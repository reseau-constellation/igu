import{d as G,p as H,n as K,r as o,q as d,a as g,c as N,w as l,x as Y,y as Z,z as ee,b as a,h as ae,V as te,B as $,t as m,f as i,au as le,e as w,l as ie,Q as se,R as f,aX as ne,ew as re,L as D,J as U,ex as ue,am as oe,dI as A,a2 as ce,c1 as ve,as as de,C as B,M as me,N as fe,W as be,i as pe,ao as ge,bn as _e,A as Ve,bo as xe,m as Ce,I as we,க as ye,c2 as Ne,b$ as ke}from"./index-Bj2l6ASh.js";const je={key:0,class:"my-2 text-center text-disabled"},Te={class:"text-center"},De=G({__name:"NouvelleVariable",emits:["nouvelle"],setup(Oe,{emit:q}){const I=q,b=H(),{மொழியாக்கம்_பயன்படுத்து:L}=ye(),{$மொ:s}=L(),{mdAndUp:R}=K(),y=o(!1),r=o(0),u=["catégorie","noms","descriptions","unités","règles","confirmation"],S=d(()=>{switch(u[r.value]){case"catégorie":return"variables.nouvelle.titreCatégorie";case"noms":return"variables.nouvelle.titreNoms";case"descriptions":return"variables.nouvelle.titreDescriptions";case"unités":return"variables.nouvelle.titreUnités";case"règles":return"variables.nouvelle.titreRègles";case"confirmation":return"variables.nouvelle.titreConfirmation";default:return""}}),E=d(()=>{switch(u[r.value]){case"catégorie":return"variables.nouvelle.sousTitreCatégorie";case"noms":return"variables.nouvelle.sousTitreNoms";case"descriptions":return"variables.nouvelle.sousTitreDescriptions";case"unités":return"variables.nouvelle.sousTitreUnités";case"règles":return"variables.nouvelle.sousTitreRègles";case"confirmation":return"variables.nouvelle.sousTitreConfirmation";default:return""}}),h=()=>{switch(u[r.value]){case"règles":r.value=u.indexOf(O.value?"unités":"descriptions");break;default:r.value--;break}},P=()=>{switch(u[r.value]){case"descriptions":r.value=u.indexOf(O.value?"unités":"règles");break;default:r.value++;break}},k=d(()=>{switch(u[r.value]){case"catégorie":return{actif:!!c.value,visible:!0};case"noms":return{actif:!!Object.keys(p.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),j=d(()=>{switch(u[r.value]){case"catégorie":return{actif:!1,visible:!1};case"confirmation":return{actif:!C.value,visible:!0};default:return{actif:!0,visible:!0}}}),_=o(!1),c=o(),T=d(()=>{if(c.value)return{type:_.value?"liste":"simple",catégorie:c.value}}),p=o({}),W=t=>{p.value=t},V=o({}),z=t=>{V.value=t},x=o(),O=d(()=>c.value==="numérique"),v=o([]),F=t=>{v.value=[...v.value,{règle:t,id:Ne()}]},J=t=>{v.value=v.value.filter(n=>n.id!==t)},C=o(!1),M=async()=>{if(C.value=!0,!T.value)return;const t=await b.variables.créerVariable({catégorie:T.value}),n=[b.variables.sauvegarderNomsVariable({idVariable:t,noms:Object.fromEntries(Object.entries(p.value))}),b.variables.sauvegarderDescriptionsVariable({idVariable:t,descriptions:Object.fromEntries(Object.entries(V.value))}),...v.value.map(e=>b.variables.ajouterRègleVariable({idVariable:t,règle:e.règle}))];x.value&&n.push(b.variables.sauvegarderUnitésVariable({idVariable:t,idUnité:x.value})),I("nouvelle",t),Q()},Q=()=>{c.value=void 0,_.value=!1,p.value={},V.value={},r.value=0,C.value=!1,y.value=!1};return(t,n)=>(g(),N(we,{modelValue:y.value,"onUpdate:modelValue":n[6]||(n[6]=e=>y.value=e)},{activator:l(({props:e})=>[Y(t.$slots,"activator",Z(ee({props:e})))]),default:l(()=>[a(Ce,{class:"mx-auto","min-width":i(R)?500:300},{default:l(()=>[a(ae,null,{default:l(()=>[a(te,{class:"text-h5 justify-space-between"},{default:l(()=>[$("span",null,m(i(s)(S.value)),1)]),_:1}),a(le,null,{default:l(()=>[w(m(i(s)(E.value)),1)]),_:1})]),_:1}),a(ie,null,{default:l(()=>[a(se,{modelValue:r.value,"onUpdate:modelValue":n[5]||(n[5]=e=>r.value=e),style:{"overflow-y":"scroll"}},{default:l(()=>[a(f,{value:0},{default:l(()=>[a(ne,{modelValue:c.value,"onUpdate:modelValue":n[0]||(n[0]=e=>c.value=e),class:"mt-2",items:i(re),label:i(s)("variables.nouvelle.catégorie"),variant:"outlined"},{item:l(({item:e,props:X})=>[a(D,U(X,{title:i(s)(`variables.catégories.${e.raw}`),subtitle:i(s)(`variables.indicesCatégories.${e.raw}`),"prepend-icon":i(ue)({type:"simple",catégorie:e.raw})||"mdi-variable"}),null,16,["title","subtitle","prepend-icon"])]),selection:l(({item:e})=>[w(m(i(s)(`variables.catégories.${e.raw}`)),1)]),_:1},8,["modelValue","items","label"]),a(oe,{modelValue:_.value,"onUpdate:modelValue":n[1]||(n[1]=e=>_.value=e),label:i(s)("variables.nouvelle.typeListe"),color:"primary","append-icon":"mdi-format-list-bulleted"},null,8,["modelValue","label"])]),_:1}),a(f,{value:1},{default:l(()=>[a(A,{"texte-aucun-nom":i(s)("communs.texteAucunNom"),"indice-langue":i(s)("communs.indiceLangue"),"etiquette-nom":i(s)("communs.étiquetteNom"),"indice-nom":i(s)("variables.nouvelle.texteIndiceNom"),"noms-initiaux":p.value,"autorisation-modification":!0,onAjusterNoms:W},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1}),a(f,{value:u.indexOf("descriptions")},{default:l(()=>[a(A,{"texte-aucun-nom":i(s)("variables.nouvelle.texteAucuneDescription"),"indice-langue":i(s)("communs.indiceLangue"),"etiquette-nom":i(s)("variables.nouvelle.texteÉtiquetteDescription"),"indice-nom":i(s)("variables.nouvelle.texteIndiceDescription"),"noms-initiaux":V.value,"autorisation-modification":!0,longue:"",onAjusterNoms:z},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1},8,["value"]),a(f,{value:u.indexOf("unités")},{default:l(()=>[a(ce,{modelValue:x.value,"onUpdate:modelValue":n[2]||(n[2]=e=>x.value=e),variant:"outlined"},null,8,["modelValue"])]),_:1},8,["value"]),a(f,{value:u.indexOf("règles")},{default:l(()=>[a(ve,{source:{type:"variable"},"categorie-variable":c.value,onSauvegarder:n[3]||(n[3]=e=>F(e))},{activator:l(({props:e})=>[a(D,U(e,{"prepend-icon":"mdi-plus"}),{default:l(()=>[a(de,null,{default:l(()=>[w(m(i(s)("variables.règles.nouvelle")),1)]),_:1})]),_:2},1040)]),_:1},8,["categorie-variable"]),(g(!0),B(fe,null,me(v.value,e=>(g(),N(ke,{key:e.id,regle:e,effacable:"","autorisation-modifier":"",onEffacer:()=>J(e.id)},null,8,["regle","onEffacer"]))),128)),v.value.length?be("",!0):(g(),B("p",je,m(i(s)("variables.règles.aucune")),1))]),_:1},8,["value"]),(g(),N(f,{key:u.indexOf("confirmation")},{default:l(()=>[$("div",Te,[a(pe,{class:"mt-3",variant:"outlined",loading:C.value,onClick:n[4]||(n[4]=()=>M())},{default:l(()=>[w(m(i(s)("variables.nouvelle.texteBtnCréation")),1)]),_:1},8,["loading"])])]),_:1}))]),_:1},8,["modelValue"])]),_:1}),a(ge,null,{default:l(()=>[a(_e,{visible:j.value.visible,actif:j.value.actif,onRetour:h},null,8,["visible","actif"]),a(Ve),a(xe,{visible:k.value.visible,actif:k.value.actif,onSuivant:P},null,8,["visible","actif"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}});export{De as _};
//# sourceMappingURL=NouvelleVariable.vue_vue_type_script_setup_true_lang-Ck5nMGA_.js.map
