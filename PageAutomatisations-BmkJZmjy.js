import{d as X,க as G,n as be,p as W,r as o,q as l,s as H,a as _,c as N,w as a,b as e,h as Oe,V as Ie,e as d,t as p,f as s,x as U,i as E,at as Ce,l as he,ai as ge,aj as h,y as O,z as k,aX as g,dN as Ve,P as we,dO as Se,dP as je,an as Te,ao as ye,br as De,bs as Ae,m as Fe,F as Ne,G as ke,H as Pe,I as ze,aC as qe,S as $e,a0 as Le,R as Be,T as Re,Q as Je,aI as Ue}from"./index-B3RH4SGy.js";import{_ as Xe}from"./ItemAutomatisation.vue_vue_type_script_setup_true_lang-DH4QCtzh.js";import{_ as Ge}from"./TitrePage.vue_vue_type_script_setup_true_lang-BNs6q1Ce.js";const We={class:"text-center"},He={key:0},Me={key:1},Qe={class:"text-center"},Ke={class:"text-center"},Ye={class:"text-h6 font-weight-light mb-2"},Ze=X({__name:"ImporterOuExporter",props:{type:{},automatiser:{type:Boolean},infoObjet:{}},setup(P){const{மொழியாக்கம்_பயன்படுத்து:V}=G(),{$மொ:u}=V(),{mdAndUp:v}=be(),w=W(),n=P,S=!Se&&!je,I=o(!1),i=["importerOuExporter","objetConstellation","sourceImportation","correspondancesImportation","dossierExportation","inclureSFIPExportation","languesExportation","formatDocExportation","voulezVousAutomatiser","fréquence","dispositif","confirmation"],r=o(i.indexOf(n.type?n.infoObjet?n.type==="exportation"?"dossierExportation":"sourceImportation":"objetConstellation":"importerOuExporter")),x=o(n.type),M=o(),Q=()=>{switch(i[r.value]){case"importerOuExporter":r.value=i.indexOf(n.infoObjet?x.value==="importation"?"sourceImportation":"dossierExportation":"objetConstellation");break;case"correspondancesImportation":case"formatDocExportation":r.value=i.indexOf(n.automatiser?"fréquence":"voulezVousAutomatiser");break;default:r.value++;break}},K=()=>{const t=i[r.value];switch(t){case"confirmation":r.value=i.indexOf(M.value?"dispositif":x.value==="importation"?"correspondancesImportation":"formatDocExportation");break;case"voulezVousAutomatiser":r.value=i.indexOf(x.value==="importation"?"correspondancesImportation":"formatDocExportation");break;case"sourceImportation":case"dossierExportation":r.value=i.indexOf(n.infoObjet?n.type?t:"importerOuExporter":"objetConstellation");break;default:r.value--;break}},z=l(()=>{switch(i[r.value]){case"importerOuExporter":return{actif:!1,visible:!1};case"objetConstellation":return{actif:!!($.value&&oe.value),visible:!0};case"sourceImportation":return{actif:!!le.value,visible:!0};case"correspondancesImportation":return{actif:!!pe.value,visible:!0};case"dossierExportation":return{actif:!!re.value,visible:!0};case"inclureSFIPExportation":return{actif:!!ae.value,visible:!0};case"languesExportation":return{actif:!!fe.value,visible:!0};case"formatDocExportation":return{actif:!!de.value,visible:!0};case"voulezVousAutomatiser":return{actif:Ee.value!==void 0,visible:!0};case"fréquence":return{actif:!!ve.value,visible:!0};case"dispositif":return{actif:!!xe.value,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),q=l(()=>{switch(i[r.value]){case"importerOuExporter":return{actif:!1,visible:!1};case"confirmation":return{actif:!J.value,visible:!0};default:return{actif:!0,visible:!0}}}),Y=()=>{x.value="importation",r.value=i.indexOf("sourceImportation")},Z=()=>{x.value="exportation",r.value=i.indexOf("dossierExportation")},ee=l(()=>{switch(i[r.value]){case"importerOuExporter":return"communs.importerOuExporter.titreImporterOuExporter";case"objetConstellation":return"communs.importerOuExporter.titreObjetConstellation";case"sourceImportation":return"communs.importerOuExporter.titreSourceImportation";case"correspondancesImportation":return"communs.importerOuExporter.titreCorrespondancesImportation";case"dossierExportation":return"communs.importerOuExporter.titreDossierExportation";case"inclureSFIPExportation":return"communs.importerOuExporter.titreInclureSFIPExportation";case"languesExportation":return"communs.importerOuExporter.titreLanguesExportation";case"formatDocExportation":return"communs.importerOuExporter.titreFormatDocExportation";case"voulezVousAutomatiser":return"communs.importerOuExporter.titreVoulezVousAutomatiser";case"fréquence":return"communs.importerOuExporter.titreFréquence";case"dispositif":return"communs.importerOuExporter.titreDispositif";case"confirmation":return"communs.importerOuExporter.titreconfirmation";default:return""}}),te=l(()=>{switch(i[r.value]){case"importerOuExporter":return"communs.importerOuExporter.sousTitreImporterOuExporter";case"objetConstellation":return"communs.importerOuExporter.sousTitreObjetConstellation";case"sourceImportation":return"communs.importerOuExporter.sousTitreSourceImportation";case"correspondancesImportation":return"communs.importerOuExporter.sousTitreCorrespondancesImportation";case"dossierExportation":return"communs.importerOuExporter.sousTitreDossierExportation";case"inclureSFIPExportation":return"communs.importerOuExporter.sousTitreInclureSFIPExportation";case"languesExportation":return"communs.importerOuExporter.sousTitreLanguesExportation";case"formatDocExportation":return"communs.importerOuExporter.sousTitreFormatDocExportation";case"voulezVousAutomatiser":return"communs.importerOuExporter.sousTitreVoulezVousAutomatiser";case"fréquence":return"communs.importerOuExporter.sousTitreFréquence";case"dispositif":return"communs.importerOuExporter.sousTitreDispositif";case"confirmation":return"communs.importerOuExporter.sousTitreconfirmation";default:return""}}),$=o(n.infoObjet?.id),oe=o(n.infoObjet?.typeObjet),re=o(),ae=o(),C=o(),j=o(),m=o(),se=H(w.bds.suivreTableauxBd,{idBd:$}),ie=l(()=>se.value?.map(t=>t.id)),ne=o(),ue=l(()=>{const t=C.value?.split(".").pop();if(t)return t==="json"?t:"tableau"}),ce=o(),b=l(()=>m.value==="fichier"?ue.value:ce.value),T=o(),y=o(),D=o(),A=o(),F=o(),L=o(),B=()=>{if(!T.value)throw new Error("Clefs racine JSON non définies.");if(!y.value)throw new Error("Clefs éléments JSON non définies.");if(!D.value)throw new Error("Colonnes JSON non définies.");return{formatDonnées:"json",clefsRacine:T.value,clefsÉléments:y.value,cols:D.value}},R=()=>{if(!A.value)throw new Error("Nom tableau non défini.");if(!F.value)throw new Error("Colonnes feuille calcul non définies.");return{formatDonnées:"feuilleCalcul",nomTableau:A.value,cols:F.value,optionsXLSX:L.value}},le=l(()=>{if(m.value)if(m.value==="fichier"){if(!C.value)throw new Error("Fichier importation non défini.");return b.value==="json"?{typeSource:m.value,adresseFichier:C.value,info:B()}:{typeSource:m.value,adresseFichier:C.value,info:R()}}else{if(!j.value)throw new Error("URL importation non défini.");if(b.value==="json")return{typeSource:m.value,url:j.value,info:B()};{const t=me(j.value);return{typeSource:m.value,url:t,info:R()}}}}),me=t=>{const c=new URL(t);if(c.hostname==="docs.google.com"&&!c.href.includes("gviz"))try{const _e=t.split("gid=")[1];return`https://docs.google.com/spreadsheets/d/${t.split("spreadsheets/d/")[1].split("/edit#")[0]}/gviz/tq?tqx=out:csv&sheet=${_e}`}catch{return t}return t},pe=l(()=>{switch(b.value){case"json":return!!(T.value&&y.value&&D.value);case"tableau":return!!(A.value&&F.value&&L.value);default:return!1}}),fe=o(),de=o(),ve=o(),xe=o(),Ee=o(),J=o(!1);return(t,c)=>(_(),N(ze,{modelValue:I.value,"onUpdate:modelValue":c[2]||(c[2]=f=>I.value=f)},{activator:a(({props:f})=>[Ne(t.$slots,"activator",ke(Pe({props:f})))]),default:a(()=>[e(Fe,{class:"mx-auto","max-width":s(v)?500:300},{default:a(()=>[e(Oe,null,{default:a(()=>[e(Ie,{class:"d-flex"},{default:a(()=>[d(p(s(u)(ee.value))+" ",1),e(U),e(E,{icon:"mdi-close",size:"small",variant:"flat",onClick:c[0]||(c[0]=f=>I.value=!1)})]),_:1}),e(Ce,null,{default:a(()=>[d(p(s(u)(te.value)),1)]),_:1})]),_:1}),e(he,null,{default:a(()=>[e(ge,{modelValue:r.value,"onUpdate:modelValue":c[1]||(c[1]=f=>r.value=f),style:{"overflow-y":"scroll"}},{default:a(()=>[e(h,{value:0},{default:a(()=>[O("div",We,[e(E,{class:"ma-3",variant:"outlined","append-icon":"mdi-import",onClick:Y},{default:a(()=>[d(p(s(u)("communs.importerOuExporter.importer")),1)]),_:1}),e(E,{class:"ma-3",variant:"outlined","append-icon":"mdi-export",onClick:Z},{default:a(()=>[d(p(s(u)("communs.importerOuExporter.exporter")),1)]),_:1})])]),_:1}),e(h,{value:3},{default:a(()=>[b.value==="tableau"?(_(),k("span",He,[e(g,{items:ne.value},null,8,["items"]),e(g,{items:ie.value},null,8,["items"]),e(Ve,{chips:""})])):b.value==="json"?(_(),k("span",Me,[e(g,{multiple:"",chips:""}),e(g,{multiple:"",chips:""})])):we("",!0)]),_:1}),e(h,{value:9},{default:a(()=>[O("div",Qe,[e(E,{class:"ma-3",variant:"flat",color:"primary",disabled:s(S)&&(x.value==="exportation"||m.value==="fichier")},{default:a(()=>[d(p(s(u)("communs.importerOuExporter.automatiser")),1)]),_:1},8,["disabled"]),e(E,{class:"ma-3",variant:"outlined"},{default:a(()=>[d(p(s(u)("communs.importerOuExporter.nePasAutomatiser")),1)]),_:1})])]),_:1}),e(h,{value:11},{default:a(()=>[O("div",Ke,[O("h3",Ye,p(s(u)("communs.importerOuExporter.messageConfirmer")),1),O("p",null,[e(E,{class:"mt-3",variant:"outlined",loading:J.value},{default:a(()=>[d(p(s(u)("communs.importerOuExporter.confirmer")),1)]),_:1},8,["loading"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Te),e(ye,null,{default:a(()=>[e(De,{visible:q.value.visible,actif:q.value.actif,onRetour:K},null,8,["visible","actif"]),e(U),e(Ae,{visible:z.value.visible,actif:z.value.actif,onSuivant:Q},null,8,["visible","actif"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),at=X({__name:"PageAutomatisations",setup(P){const V=W(),{மொழியாக்கம்_பயன்படுத்து:u}=G(),{$மொ:v}=u(),{obtImageDéco:w}=qe(),n=w("automatisation"),S=H(V.automatisations.suivreAutomatisations);return(I,i)=>(_(),N(Ue,{class:"text-center"},{default:a(()=>[e(Ge,{titre:s(v)("pages.automatisations.titre"),image:s(n),"sous-titre":s(v)("pages.automatisations.sousTitre")},null,8,["titre","image","sous-titre"]),e(Je,{class:"text-start"},{default:a(()=>[e(Ze,{automatiser:""},{activator:a(({props:r})=>[e($e,Le(r,{"prepend-icon":"mdi-plus",title:s(v)("pages.automatisations.ajouterNouvelle.titre"),subtitle:s(v)("pages.automatisations.ajouterNouvelle.sousTitre")}),null,16,["title","subtitle"])]),_:1}),(_(!0),k(Re,null,Be(s(S),r=>(_(),N(Xe,{key:r.id,spécification:r},null,8,["spécification"]))),128))]),_:1})]),_:1}))}});export{at as default};
//# sourceMappingURL=PageAutomatisations-BmkJZmjy.js.map
