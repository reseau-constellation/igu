import{d as W,q as Ce,n as H,r as o,v as m,s as M,a as _,c as N,w as r,Q as Ie,a0 as he,a1 as ge,b as e,h as Ve,V as we,e as p,t as c,f as s,aa as U,i as d,ai as Se,l as je,a2 as Te,a3 as h,x as O,N as k,aN as g,dH as De,F as ye,a8 as Ae,a9 as Fe,O as X,P as G,m as Ne,ab as ke,க as Q,dI as Pe,dJ as ze,ax as qe,au as Be,C as Le,Y as $e,a4 as Je,a5 as Re,B as Ue}from"./index-BQ50ekR7.js";import{_ as Xe}from"./ItemAutomatisation.vue_vue_type_script_setup_true_lang-C0hgMXiY.js";import{_ as Ge}from"./TitrePage.vue_vue_type_script_setup_true_lang-Bo6QIo8F.js";const We={class:"text-center"},He={key:0},Me={key:1},Qe={class:"text-center"},Ye={class:"text-center"},Ke={class:"text-h6 font-weight-light mb-2"},Ze=W({__name:"ImporterOuExporter",props:{type:{},automatiser:{type:Boolean},infoObjet:{}},setup(P){const{மொழியாக்கம்_பயன்படுத்து:V}=Q(),{$மொ:n}=V(),{mdAndUp:x}=Ce(),w=H(),u=P,S=!Pe&&!ze,C=o(!1),i=["importerOuExporter","objetConstellation","sourceImportation","correspondancesImportation","dossierExportation","inclureSFIPExportation","languesExportation","formatDocExportation","voulezVousAutomatiser","fréquence","dispositif","confirmation"],a=o(i.indexOf(u.type?u.infoObjet?u.type==="exportation"?"dossierExportation":"sourceImportation":"objetConstellation":"importerOuExporter")),E=o(u.type),Y=o(),K=()=>{switch(i[a.value]){case"importerOuExporter":a.value=i.indexOf(u.infoObjet?E.value==="importation"?"sourceImportation":"dossierExportation":"objetConstellation");break;case"correspondancesImportation":case"formatDocExportation":a.value=i.indexOf(u.automatiser?"fréquence":"voulezVousAutomatiser");break;default:a.value++;break}},Z=()=>{const t=i[a.value];switch(t){case"confirmation":a.value=i.indexOf(Y.value?"dispositif":E.value==="importation"?"correspondancesImportation":"formatDocExportation");break;case"voulezVousAutomatiser":a.value=i.indexOf(E.value==="importation"?"correspondancesImportation":"formatDocExportation");break;case"sourceImportation":case"dossierExportation":a.value=i.indexOf(u.infoObjet?u.type?t:"importerOuExporter":"objetConstellation");break;default:a.value--;break}},z=m(()=>{switch(i[a.value]){case"importerOuExporter":return{actif:!1,visible:!1};case"objetConstellation":return{actif:!!(B.value&&ae.value),visible:!0};case"sourceImportation":return{actif:!!pe.value,visible:!0};case"correspondancesImportation":return{actif:!!de.value,visible:!0};case"dossierExportation":return{actif:!!se.value,visible:!0};case"inclureSFIPExportation":return{actif:!!ie.value,visible:!0};case"languesExportation":return{actif:!!ve.value,visible:!0};case"formatDocExportation":return{actif:!!xe.value,visible:!0};case"voulezVousAutomatiser":return{actif:be.value!==void 0,visible:!0};case"fréquence":return{actif:!!Ee.value,visible:!0};case"dispositif":return{actif:!!_e.value,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),q=m(()=>{switch(i[a.value]){case"importerOuExporter":return{actif:!1,visible:!1};case"confirmation":return{actif:!R.value,visible:!0};default:return{actif:!0,visible:!0}}}),ee=()=>{E.value="importation",a.value=i.indexOf("sourceImportation")},te=()=>{E.value="exportation",a.value=i.indexOf("dossierExportation")},oe=m(()=>{switch(i[a.value]){case"importerOuExporter":return"communs.importerOuExporter.titreImporterOuExporter";case"objetConstellation":return"communs.importerOuExporter.titreObjetConstellation";case"sourceImportation":return"communs.importerOuExporter.titreSourceImportation";case"correspondancesImportation":return"communs.importerOuExporter.titreCorrespondancesImportation";case"dossierExportation":return"communs.importerOuExporter.titreDossierExportation";case"inclureSFIPExportation":return"communs.importerOuExporter.titreInclureSFIPExportation";case"languesExportation":return"communs.importerOuExporter.titreLanguesExportation";case"formatDocExportation":return"communs.importerOuExporter.titreFormatDocExportation";case"voulezVousAutomatiser":return"communs.importerOuExporter.titreVoulezVousAutomatiser";case"fréquence":return"communs.importerOuExporter.titreFréquence";case"dispositif":return"communs.importerOuExporter.titreDispositif";case"confirmation":return"communs.importerOuExporter.titreconfirmation";default:return""}}),re=m(()=>{switch(i[a.value]){case"importerOuExporter":return"communs.importerOuExporter.sousTitreImporterOuExporter";case"objetConstellation":return"communs.importerOuExporter.sousTitreObjetConstellation";case"sourceImportation":return"communs.importerOuExporter.sousTitreSourceImportation";case"correspondancesImportation":return"communs.importerOuExporter.sousTitreCorrespondancesImportation";case"dossierExportation":return"communs.importerOuExporter.sousTitreDossierExportation";case"inclureSFIPExportation":return"communs.importerOuExporter.sousTitreInclureSFIPExportation";case"languesExportation":return"communs.importerOuExporter.sousTitreLanguesExportation";case"formatDocExportation":return"communs.importerOuExporter.sousTitreFormatDocExportation";case"voulezVousAutomatiser":return"communs.importerOuExporter.sousTitreVoulezVousAutomatiser";case"fréquence":return"communs.importerOuExporter.sousTitreFréquence";case"dispositif":return"communs.importerOuExporter.sousTitreDispositif";case"confirmation":return"communs.importerOuExporter.sousTitreconfirmation";default:return""}}),B=o(u.infoObjet?.id),ae=o(u.infoObjet?.typeObjet),se=o(),ie=o(),I=o(),j=o(),f=o(),ne=M(w.bds.suivreTableauxBd,{idBd:B}),ue=m(()=>ne.value?.map(t=>t.id)),le=o(),ce=m(()=>{const t=I.value?.split(".").pop();if(t)return t==="json"?t:"tableau"}),me=o(),b=m(()=>f.value==="fichier"?ce.value:me.value),T=o(),D=o(),y=o(),A=o(),F=o(),L=o(),$=()=>{if(!T.value)throw new Error("Clefs racine JSON non définies.");if(!D.value)throw new Error("Clefs éléments JSON non définies.");if(!y.value)throw new Error("Colonnes JSON non définies.");return{formatDonnées:"json",clefsRacine:T.value,clefsÉléments:D.value,cols:y.value}},J=()=>{if(!A.value)throw new Error("Nom tableau non défini.");if(!F.value)throw new Error("Colonnes feuille calcul non définies.");return{formatDonnées:"feuilleCalcul",nomTableau:A.value,cols:F.value,optionsXLSX:L.value}},pe=m(()=>{if(f.value)if(f.value==="fichier"){if(!I.value)throw new Error("Fichier importation non défini.");return b.value==="json"?{typeSource:f.value,adresseFichier:I.value,info:$()}:{typeSource:f.value,adresseFichier:I.value,info:J()}}else{if(!j.value)throw new Error("URL importation non défini.");if(b.value==="json")return{typeSource:f.value,url:j.value,info:$()};{const t=fe(j.value);return{typeSource:f.value,url:t,info:J()}}}}),fe=t=>{const l=new URL(t);if(l.hostname==="docs.google.com"&&!l.href.includes("gviz"))try{const Oe=t.split("gid=")[1];return`https://docs.google.com/spreadsheets/d/${t.split("spreadsheets/d/")[1].split("/edit#")[0]}/gviz/tq?tqx=out:csv&sheet=${Oe}`}catch{return t}return t},de=m(()=>{switch(b.value){case"json":return!!(T.value&&D.value&&y.value);case"tableau":return!!(A.value&&F.value&&L.value);default:return!1}}),ve=o(),xe=o(),Ee=o(),_e=o(),be=o(),R=o(!1);return(t,l)=>(_(),N(ke,{modelValue:C.value,"onUpdate:modelValue":l[2]||(l[2]=v=>C.value=v)},{activator:r(({props:v})=>[Ie(t.$slots,"activator",he(ge({props:v})))]),default:r(()=>[e(Ne,{class:"mx-auto","max-width":s(x)?500:300},{default:r(()=>[e(Ve,null,{default:r(()=>[e(we,{class:"d-flex"},{default:r(()=>[p(c(s(n)(oe.value))+" ",1),e(U),e(d,{icon:"mdi-close",size:"small",variant:"flat",onClick:l[0]||(l[0]=v=>C.value=!1)})]),_:1}),e(Se,null,{default:r(()=>[p(c(s(n)(re.value)),1)]),_:1})]),_:1}),e(je,null,{default:r(()=>[e(Te,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=v=>a.value=v),style:{"overflow-y":"scroll"}},{default:r(()=>[e(h,{value:0},{default:r(()=>[O("div",We,[e(d,{class:"ma-3",variant:"outlined","append-icon":"mdi-import",onClick:ee},{default:r(()=>[p(c(s(n)("communs.importerOuExporter.importer")),1)]),_:1}),e(d,{class:"ma-3",variant:"outlined","append-icon":"mdi-export",onClick:te},{default:r(()=>[p(c(s(n)("communs.importerOuExporter.exporter")),1)]),_:1})])]),_:1}),e(h,{value:3},{default:r(()=>[b.value==="tableau"?(_(),k("span",He,[e(g,{items:le.value},null,8,["items"]),e(g,{items:ue.value},null,8,["items"]),e(De,{chips:""})])):b.value==="json"?(_(),k("span",Me,[e(g,{multiple:"",chips:""}),e(g,{multiple:"",chips:""})])):ye("",!0)]),_:1}),e(h,{value:9},{default:r(()=>[O("div",Qe,[e(d,{class:"ma-3",variant:"flat",color:"primary",disabled:s(S)&&(E.value==="exportation"||f.value==="fichier")},{default:r(()=>[p(c(s(n)("communs.importerOuExporter.automatiser")),1)]),_:1},8,["disabled"]),e(d,{class:"ma-3",variant:"outlined"},{default:r(()=>[p(c(s(n)("communs.importerOuExporter.nePasAutomatiser")),1)]),_:1})])]),_:1}),e(h,{value:11},{default:r(()=>[O("div",Ye,[O("h3",Ke,c(s(n)("communs.importerOuExporter.messageConfirmer")),1),O("p",null,[e(d,{class:"mt-3",variant:"outlined",loading:R.value},{default:r(()=>[p(c(s(n)("communs.importerOuExporter.confirmer")),1)]),_:1},8,["loading"])])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(Ae),e(Fe,null,{default:r(()=>[X(e(d,{variant:"text",disabled:!q.value.actif,onClick:Z},{default:r(()=>[p(c(s(n)("communs.retour")),1)]),_:1},8,["disabled"]),[[G,q.value.visible]]),e(U),X(e(d,{color:"primary",variant:"flat",disabled:!z.value.actif,onClick:K},{default:r(()=>[p(c(s(n)("communs.suivant")),1)]),_:1},8,["disabled"]),[[G,z.value.visible]])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),at=W({__name:"PageAutomatisations",setup(P){const V=H(),{மொழியாக்கம்_பயன்படுத்து:n}=Q(),{$மொ:x}=n(),{obtImageDéco:w}=Be(),u=w("automatisation"),S=M(V.automatisations.suivreAutomatisations);return(C,i)=>(_(),N(qe,{class:"text-center"},{default:r(()=>[e(Ge,{titre:s(x)("pages.automatisations.titre"),image:s(u),"sous-titre":s(x)("pages.automatisations.sousTitre")},null,8,["titre","image","sous-titre"]),e(Ue,{class:"text-start"},{default:r(()=>[e(Ze,{automatiser:""},{activator:r(({props:a})=>[e(Le,$e(a,{"prepend-icon":"mdi-plus",title:s(x)("pages.automatisations.ajouterNouvelle.titre"),subtitle:s(x)("pages.automatisations.ajouterNouvelle.sousTitre")}),null,16,["title","subtitle"])]),_:1}),(_(!0),k(Re,null,Je(s(S),a=>(_(),N(Xe,{key:a.id,spécification:a},null,8,["spécification"]))),128))]),_:1})]),_:1}))}});export{at as default};
//# sourceMappingURL=PageAutomatisations-BAGUwIRT.js.map
