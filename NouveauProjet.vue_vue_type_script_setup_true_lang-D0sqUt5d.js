import{d as U,p as M,n as E,dH as z,r,q as C,a as L,c as W,w as a,x as H,y as J,z as Q,b as e,h as F,V as G,B as b,t as m,f as o,au as K,e as w,l as X,Q as Y,R as v,dI as B,dJ as Z,bB as ee,i as te,am as ae,O as se,ao as oe,bn as ne,A as ue,bo as ie,m as re,I as le,க as ce}from"./index-BIYoobNh.js";const de={class:"text-center"},me={class:"text-h6 font-weight-light mb-2"},pe=U({__name:"NouveauProjet",emits:["nouveau"],setup(ve,{emit:N}){const P=N,c=M(),{மொழியாக்கம்_பயன்படுத்து:D}=ce(),{$மொ:n}=D(),{mdAndUp:h}=E(),y=z(),x=r(!1),u=r(0),l=["noms","descriptions","motsClefs","ajouterBds","confirmation"],T=C(()=>{switch(l[u.value]){case"noms":return"projet.nouveau.titreNoms";case"descriptions":return"projet.nouveau.titreDescriptions";case"motsClefs":return"projet.nouveau.titreMotsClefs";case"ajouterBds":return"projet.nouveau.titreAjouterBds";case"confirmation":return"projet.nouveau.titreConfirmation";default:return""}}),I=C(()=>{switch(l[u.value]){case"noms":return"projet.nouveau.sousTitreNoms";case"descriptions":return"projet.nouveau.sousTitreDescriptions";case"motsClefs":return"projet.nouveau.sousTitreMotsClefs";case"ajouterBds":return"projet.nouveau.sousTitreAjouterBds";case"confirmation":return"projet.nouveau.sousTitreConfirmation";default:return""}}),$=()=>{switch(l[u.value]){default:u.value++;break}},k=()=>{switch(l[u.value]){default:u.value--;break}},g=C(()=>{switch(l[u.value]){case"noms":return{actif:Object.keys(d.value).length>0,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),A=C(()=>{switch(l[u.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!_.value,visible:!0};default:return{actif:!0,visible:!0}}}),d=r({}),q=t=>{d.value=t},f=r({}),S=t=>{f.value=t},p=r([]),j=r([]),V=r(!1),_=r(!1),O=async()=>{_.value=!0;const t=await c.projets.créerProjet();if(!t)throw new Error("Projet non créé.");await c.projets.sauvegarderNomsProjet({idProjet:t,noms:Object.fromEntries(Object.entries(d.value))}),await c.projets.sauvegarderDescriptionsProjet({idProjet:t,descriptions:Object.fromEntries(Object.entries(f.value))}),await c.projets.ajouterMotsClefsProjet({idProjet:t,idsMotsClefs:p.value}),await Promise.all(j.value.map(async s=>await c.projets.ajouterBdProjet({idProjet:t,idBd:s}))),P("nouveau",t),R(),V.value&&y.push(encodeURI(`/données/projet/${encodeURIComponent(t)}`))},R=()=>{d.value={},f.value={},p.value=[],j.value=[],u.value=0,_.value=!1,x.value=!1};return(t,s)=>(L(),W(le,{modelValue:x.value,"onUpdate:modelValue":s[5]||(s[5]=i=>x.value=i)},{activator:a(({props:i})=>[H(t.$slots,"activator",J(Q({props:i})))]),default:a(()=>[e(re,{class:"mx-auto","min-width":o(h)?750:300},{default:a(()=>[e(F,null,{default:a(()=>[e(G,{class:"text-h5 justify-space-between"},{default:a(()=>[b("span",null,m(o(n)(T.value)),1)]),_:1}),e(K,null,{default:a(()=>[w(m(o(n)(I.value)),1)]),_:1})]),_:1}),e(X,null,{default:a(()=>[e(Y,{modelValue:u.value,"onUpdate:modelValue":s[4]||(s[4]=i=>u.value=i),style:{"overflow-y":"scroll"}},{default:a(()=>[e(v,{value:0},{default:a(()=>[e(B,{"texte-aucun-nom":o(n)("communs.texteAucunNom"),"indice-langue":o(n)("communs.indiceLangue"),"etiquette-nom":o(n)("communs.étiquetteNom"),"indice-nom":o(n)("projets.nouveau.texteIndiceNom"),"noms-initiaux":d.value,"autorisation-modification":!0,onAjusterNoms:q},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1}),e(v,{value:1},{default:a(()=>[e(B,{"texte-aucun-nom":o(n)("projets.nouveau.texteAucuneDescription"),"indice-langue":o(n)("communs.indiceLangue"),"etiquette-nom":o(n)("projets.nouveau.texteÉtiquetteDescription"),"indice-nom":o(n)("projets.nouveau.texteIndiceDescription"),"noms-initiaux":f.value,"autorisation-modification":!0,onAjusterNoms:S},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1}),e(v,{value:2},{default:a(()=>[e(Z,{multiples:"",originaux:p.value,onSelectionnee:s[0]||(s[0]=i=>p.value=i)},null,8,["originaux"])]),_:1}),e(v,{value:3},{default:a(()=>[e(ee,{multiples:!1,originales:j.value,onSelectionnee:s[1]||(s[1]=i=>j.value=i)},null,8,["originales"])]),_:1}),e(v,{value:4},{default:a(()=>[b("div",de,[b("h3",me,m(o(n)("projets.nouveau.texteCréer")),1),b("p",null,[e(te,{class:"mt-3",variant:"outlined",loading:_.value,onClick:s[2]||(s[2]=()=>O())},{default:a(()=>[w(m(o(n)("projets.nouveau.texteBtnCréation")),1)]),_:1},8,["loading"])]),e(ae,{modelValue:V.value,"onUpdate:modelValue":s[3]||(s[3]=i=>V.value=i)},{default:a(()=>[w(m(o(n)("projets.nouveau.ouvrirAprèsCréation")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(se),e(oe,null,{default:a(()=>[e(ne,{visible:A.value.visible,actif:A.value.actif,onRetour:k},null,8,["visible","actif"]),e(ue),e(ie,{visible:g.value.visible,actif:g.value.actif,onSuivant:$},null,8,["visible","actif"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}});export{pe as _};
//# sourceMappingURL=NouveauProjet.vue_vue_type_script_setup_true_lang-D0sqUt5d.js.map
