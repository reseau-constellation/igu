{"version":3,"file":"ItemAutomatisation.vue_vue_type_script_setup_true_lang-DJ0EGnB7.js","sources":["../../src/components/automatisations/JetonFichierImportation.vue","../../src/components/automatisations/JetonStatutAutomatisation.vue","../../src/components/automatisations/ItemAutomatisation.vue"],"sourcesContent":["<template>\n  <v-chip>\n    <template #prepend>\n      <v-progress-circular\n        v-if=\"enProgrès\"\n        indeterminate\n        color=\"primary\"\n      >\n      </v-progress-circular>\n      <v-icon v-else-if=\"sourceRésolue\">{{ icône }}</v-icon>\n      <v-icon\n        v-else\n        color=\"error\"\n      >\n        mdi-alert\n      </v-icon>\n    </template>\n    {{ t(texteStatut) }}\n  </v-chip>\n</template>\n<script setup lang=\"ts\">\nimport type {automatisation} from '@constl/ipa';\n\nimport {கிளிமூக்கை_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport path from 'path';\nimport {computed, ref, watchEffect} from 'vue';\nimport {utiliserConstellation} from '../utils';\n\nconst props = defineProps<{\n  spécification: automatisation.SpécificationImporter;\n}>();\n\nconst {மொழியாக்கம்_பயன்படுத்து} = கிளிமூக்கை_பயன்படுத்து();\nconst {$மொ: t} = மொழியாக்கம்_பயன்படுத்து();\n\nconst constl = utiliserConstellation();\n\n// Statut source\nconst enProgrès = computed<boolean>(() => {\n  if (props.spécification.source.typeSource === 'fichier') {\n    return fichier.value === undefined;\n  } else {\n    return false;\n  }\n});\nconst sourceRésolue = computed(() => {\n  return props.spécification.source.typeSource === 'url' || typeof fichier.value === 'string';\n});\n\n// Fichier décodé\nconst fichier = ref<string | null>();\nwatchEffect(async () => {\n  if (props.spécification.source.typeSource === 'fichier') {\n    fichier.value = await constl.automatisations.résoudreAdressePrivéeFichier({\n      clef: props.spécification.source.adresseFichier,\n    });\n  }\n});\n\n// Icône\nconst icône = computed(() => {\n  if (props.spécification.source.typeSource === 'fichier') {\n    return 'mdi-file';\n  } else {\n    return 'mdi-web';\n  }\n});\n\n// Texte statut\nconst texteStatut = computed<string>(() => {\n  if (props.spécification.source.typeSource === 'fichier') {\n    if (fichier.value === undefined) {\n      return 'automatisation.rechercheFichier';\n    } else if (fichier.value === null) {\n      return 'automatisations.fichierIntrouvable';\n    } else {\n      return path.parse(fichier.value).base;\n    }\n  } else {\n    return props.spécification.source.url.slice(-10) + t('communs.troisPetitsPoints');\n  }\n});\n</script>\n","<template>\n  <v-chip>\n    <template #prepend>\n      <v-progress-circular\n        v-if=\"statut.type === 'sync'\"\n        indeterminate\n      >\n        <v-icon :color=\"icôneStatut.couleur\">{{ icôneStatut.icône }}</v-icon>\n      </v-progress-circular>\n      <v-icon\n        v-else\n        :color=\"icôneStatut.couleur\"\n      >\n        {{ icôneStatut.icône }}\n      </v-icon>\n    </template>\n    {{ t(texteStatut) }}\n  </v-chip>\n</template>\n<script setup lang=\"ts\">\nimport type {automatisation} from '@constl/ipa';\n\nimport {கிளிமூக்கை_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport {computed, onMounted, onUnmounted, ref} from 'vue';\n\nconst {மொழியாக்கம்_பயன்படுத்து} = கிளிமூக்கை_பயன்படுத்து();\nconst {$மொ: t} = மொழியாக்கம்_பயன்படுத்து();\n\nconst props = defineProps<{\n  statut: automatisation.ÉtatAutomatisation;\n}>();\n\n// Icône\nconst icôneStatut = computed(() => {\n  switch (props.statut.type) {\n    case 'erreur':\n      return {icône: 'mdi-alert', couleur: 'error'};\n    case 'programmée':\n      return {icône: 'mdi-check', couleur: 'success'};\n    case 'sync':\n      return {icône: 'mdi-sync', couleur: 'primary'};\n    case 'écoute':\n      return {icône: '', couleur: 'success'};\n    default:\n      throw new Error(JSON.stringify(props.statut));\n  }\n});\n\n// Chronomètre\nconst maintenant = ref(new Date().getTime());\nlet oublierChronomètre: number | undefined;\nonMounted(() => {\n  oublierChronomètre = window.setInterval(() => (maintenant.value = new Date().getTime()), 1000);\n});\nonUnmounted(() => {\n  if (oublierChronomètre) clearInterval(oublierChronomètre);\n});\n\n// Statut automatisation\nconst texteStatut = computed(() => {\n  switch (props.statut.type) {\n    case 'écoute':\n      return 'auto.jetonStatut.écoute';\n    case 'sync':\n      return t('auto.jetonStatut.sync', {depuis: maintenant.value - props.statut.depuis});\n    case 'programmée':\n      return t('auto.jetonStatut.programmée', {dans: props.statut.à - maintenant.value});\n    case 'erreur':\n      if (props.statut.prochaineProgramméeÀ) {\n        return t('auto.jetonStatut.erreurRéssayer', {\n          dans: props.statut.prochaineProgramméeÀ - maintenant.value,\n        });\n      } else {\n        return 'auto.jetonStatut.erreur';\n      }\n    default:\n      throw new Error(props.statut);\n  }\n});\n</script>\n","<template>\n  <v-list-item>\n    <template #prepend>\n      <v-icon>{{ spécification.type === 'exportation' ? 'mdi-export' : 'mdi-import' }}</v-icon>\n    </template>\n    <v-list-item-title>\n      <v-icon>{{ icôneTypeObjet }}</v-icon>\n      {{ nom }}\n    </v-list-item-title>\n    <jeton-fichier-importation\n      v-if=\"spécification.type === 'importation'\"\n      :spécification=\"spécification\"\n    />\n    <jeton-statut-automatisation\n      v-if=\"statut\"\n      :statut=\"statut\"\n    />\n    <v-skeleton-loader\n      v-else\n      type=\"chip\"\n    />\n  </v-list-item>\n</template>\n<script setup lang=\"ts\">\nimport type {automatisation} from '@constl/ipa';\n\nimport {computed, onMounted, ref} from 'vue';\n\nimport {மொழிகளைப்_பயன்படுத்து} from '@lassi-js/kilimukku-vue';\nimport JetonFichierImportation from './JetonFichierImportation.vue';\nimport JetonStatutAutomatisation from './JetonStatutAutomatisation.vue';\nimport {enregistrerÉcoute, icôneObjet, utiliserConstellation} from '/@/components/utils';\n\nconst props = defineProps<{\n  spécification: automatisation.SpécificationAutomatisation;\n}>();\n\nconst constl = utiliserConstellation();\n\n// Nom\nconst {அகராதியிலிருந்து_மொழிபெயர்ப்பு} = மொழிகளைப்_பயன்படுத்து();\n\nconst noms = ref<{[langue: string]: string}>();\n\nonMounted(() => {\n  if (props.spécification.type === 'importation') {\n    enregistrerÉcoute(\n      constl.tableaux.suivreNomsTableau({\n        idTableau: props.spécification.idTableau,\n        f: x => (noms.value = x),\n      }),\n    );\n  } else {\n    switch (props.spécification.typeObjet) {\n      case 'tableau':\n        enregistrerÉcoute(\n          constl.tableaux.suivreNomsTableau({\n            idTableau: props.spécification.idObjet,\n            f: x => (noms.value = x),\n          }),\n        );\n        break;\n      case 'projet':\n        enregistrerÉcoute(\n          constl.projets.suivreNomsProjet({\n            idProjet: props.spécification.idObjet,\n            f: x => (noms.value = x),\n          }),\n        );\n        break;\n      case 'bd':\n        enregistrerÉcoute(\n          constl.bds.suivreNomsBd({\n            idBd: props.spécification.idObjet,\n            f: x => (noms.value = x),\n          }),\n        );\n        break;\n      case 'nuée':\n        enregistrerÉcoute(\n          constl.nuées.suivreNomsNuée({\n            idNuée: props.spécification.idObjet,\n            f: x => (noms.value = x),\n          }),\n        );\n        break;\n      default:\n        throw new Error(JSON.stringify(props.spécification));\n    }\n  }\n});\n\nconst nom = அகராதியிலிருந்து_மொழிபெயர்ப்பு(noms);\n\n// Icône\nconst icôneTypeObjet = computed(() => {\n  if (props.spécification.type === 'importation') {\n    return 'mdi-table';\n  } else {\n    return icôneObjet(props.spécification.typeObjet);\n  }\n});\n\n// Statut\nconst statuts = ref<{[key: string]: automatisation.ÉtatAutomatisation}>();\nenregistrerÉcoute(\n  constl.automatisations.suivreÉtatAutomatisations({\n    f: x => (statuts.value = x),\n  }),\n);\nconst statut = computed(() => {\n  return statuts.value ? statuts.value[props.spécification.id] : undefined;\n});\n</script>\n"],"names":["props","__props","மொழியாக்கம்_பயன்படுத்து","கிளிமூக்கை_பயன்படுத்து","t","constl","utiliserConstellation","enProgrès","computed","fichier","sourceRésolue","ref","watchEffect","icône","texteStatut","path","icôneStatut","maintenant","oublierChronomètre","onMounted","onUnmounted","அகராதியிலிருந்து_மொழிபெயர்ப்பு","மொழிகளைப்_பயன்படுத்து","noms","enregistrerÉcoute","x","nom","icôneTypeObjet","icôneObjet","statuts","statut"],"mappings":"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"}