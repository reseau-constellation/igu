const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-CfJcFh7M.js","./index-C133Rf3c.js","./PageAccueil-BRqJLetL.js","./InviterDispositif-lo-HVaSU.js","./InviterDispositif-C-vLqxRJ.css","./VTabs-DA8LUe5p.js","./VTabs-Bv8FUb0o.css","./historiqueDocuments-B2PDpaiY.js","./NouvelleBd.vue_vue_type_script_setup_true_lang-DoZyrujH.js","./ChoisirStatut.vue_vue_type_script_setup_true_lang-CvUs6UyE.js","./SélecteurNuée.vue_vue_type_script_setup_true_lang-D7L3eXCG.js","./RésultatRechercheNuée.vue_vue_type_script_setup_true_lang-D4EQEfK1.js","./NouveauProjet.vue_vue_type_script_setup_true_lang-DOdu3W6Y.js","./TitrePage.vue_vue_type_script_setup_true_lang-DSln-bi9.js","./PageAccueil-BL18_6ai.css","./PageCompte-BYO05SVJ.js","./VSlideGroupItem--x9jWuMx.js","./MesDonnées-DcyqpeeX.js","./CarteProjet.vue_vue_type_script_setup_true_lang-CLyuhXe1.js","./NouvelleVariable.vue_vue_type_script_setup_true_lang-BrXaLQaG.js","./PageBD-ChWNi5ku.js","./VBreadcrumbs-BnKSlxWR.js","./NouvelleImportation.vue_vue_type_script_setup_true_lang-DUT7u8Pn.js","./RésultatRechercheProjet.vue_vue_type_script_setup_true_lang-C3hPyMNn.js","./NouvelleImportation-hxvwU-MM.css","./VBreadcrumbs-CT4POWqt.css","./ÉpinglerBd.vue_vue_type_script_setup_true_lang-iI-GrwP4.js","./PageNuée-xQJ5PJZp.js","./PageProjet-dRvFSFxe.js","./PageRecherche-sBdhhqsQ.js","./PageFavoris-Dbusoj25.js","./PageAutomatisations-CO6ixQt2.js","./PageSignalements-CTosAfTO.js","./index-4E9mG0c-.js","./index-DJ2MLiWI.js","./index-CCuqkz2u.js","./index-HtnVIHG2.js","./NouvelleBd-BQNLeiiK.js","./NouvelleVariable-BWhJSZg3.js"])))=>i.map(i=>d[i]);
function _mergeNamespaces(n,r){for(var g=0;g<r.length;g++){const _=r[g];if(typeof _!="string"&&!Array.isArray(_)){for(const x in _)if(x!=="default"&&!(x in n)){const S=Object.getOwnPropertyDescriptor(_,x);S&&Object.defineProperty(n,x,S.get?S:{enumerable:!0,get:()=>_[x]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))_(x);new MutationObserver(x=>{for(const S of x)if(S.type==="childList")for(const E of S.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&_(E)}).observe(document,{childList:!0,subtree:!0});function g(x){const S={};return x.integrity&&(S.integrity=x.integrity),x.referrerPolicy&&(S.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?S.credentials="include":x.crossOrigin==="anonymous"?S.credentials="omit":S.credentials="same-origin",S}function _(x){if(x.ep)return;x.ep=!0;const S=g(x);fetch(x.href,S)}})();function getDefaultExportFromCjs$1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var browser$g={exports:{}},process=browser$g.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout=setTimeout:cachedSetTimeout=defaultSetTimout}catch{cachedSetTimeout=defaultSetTimout}try{typeof clearTimeout=="function"?cachedClearTimeout=clearTimeout:cachedClearTimeout=defaultClearTimeout}catch{cachedClearTimeout=defaultClearTimeout}})();function runTimeout(n){if(cachedSetTimeout===setTimeout)return setTimeout(n,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(n,0);try{return cachedSetTimeout(n,0)}catch{try{return cachedSetTimeout.call(null,n,0)}catch{return cachedSetTimeout.call(this,n,0)}}}function runClearTimeout(n){if(cachedClearTimeout===clearTimeout)return clearTimeout(n);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(n);try{return cachedClearTimeout(n)}catch{try{return cachedClearTimeout.call(null,n)}catch{return cachedClearTimeout.call(this,n)}}}var queue$1=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue$1=currentQueue.concat(queue$1):queueIndex=-1,queue$1.length&&drainQueue())}function drainQueue(){if(!draining){var n=runTimeout(cleanUpNextTick);draining=!0;for(var r=queue$1.length;r;){for(currentQueue=queue$1,queue$1=[];++queueIndex<r;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,r=queue$1.length}currentQueue=null,draining=!1,runClearTimeout(n)}}process.nextTick=function(n){var r=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)r[g-1]=arguments[g];queue$1.push(new Item(n,r)),queue$1.length===1&&!draining&&runTimeout(drainQueue)};function Item(n,r){this.fun=n,this.array=r}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=!0;process.env={};process.argv=[];process.version="";process.versions={};function noop$6(){}process.on=noop$6;process.addListener=noop$6;process.once=noop$6;process.off=noop$6;process.removeListener=noop$6;process.removeAllListeners=noop$6;process.emit=noop$6;process.prependListener=noop$6;process.prependOnceListener=noop$6;process.listeners=function(n){return[]};process.binding=function(n){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(n){throw new Error("process.chdir is not supported")};process.umask=function(){return 0};var browserExports$1=browser$g.exports;const process$1=getDefaultExportFromCjs$1(browserExports$1);var buffer$2={},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,code$a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code$a.length;i$1<len;++i$1)lookup[i$1]=code$a[i$1],revLookup[code$a.charCodeAt(i$1)]=i$1;revLookup[45]=62;revLookup[95]=63;function getLens(n){var r=n.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=n.indexOf("=");g===-1&&(g=r);var _=g===r?0:4-g%4;return[g,_]}function byteLength(n){var r=getLens(n),g=r[0],_=r[1];return(g+_)*3/4-_}function _byteLength(n,r,g){return(r+g)*3/4-g}function toByteArray(n){var r,g=getLens(n),_=g[0],x=g[1],S=new Arr(_byteLength(n,_,x)),E=0,C=x>0?_-4:_,T;for(T=0;T<C;T+=4)r=revLookup[n.charCodeAt(T)]<<18|revLookup[n.charCodeAt(T+1)]<<12|revLookup[n.charCodeAt(T+2)]<<6|revLookup[n.charCodeAt(T+3)],S[E++]=r>>16&255,S[E++]=r>>8&255,S[E++]=r&255;return x===2&&(r=revLookup[n.charCodeAt(T)]<<2|revLookup[n.charCodeAt(T+1)]>>4,S[E++]=r&255),x===1&&(r=revLookup[n.charCodeAt(T)]<<10|revLookup[n.charCodeAt(T+1)]<<4|revLookup[n.charCodeAt(T+2)]>>2,S[E++]=r>>8&255,S[E++]=r&255),S}function tripletToBase64(n){return lookup[n>>18&63]+lookup[n>>12&63]+lookup[n>>6&63]+lookup[n&63]}function encodeChunk(n,r,g){for(var _,x=[],S=r;S<g;S+=3)_=(n[S]<<16&16711680)+(n[S+1]<<8&65280)+(n[S+2]&255),x.push(tripletToBase64(_));return x.join("")}function fromByteArray(n){for(var r,g=n.length,_=g%3,x=[],S=16383,E=0,C=g-_;E<C;E+=S)x.push(encodeChunk(n,E,E+S>C?C:E+S));return _===1?(r=n[g-1],x.push(lookup[r>>2]+lookup[r<<4&63]+"==")):_===2&&(r=(n[g-2]<<8)+n[g-1],x.push(lookup[r>>10]+lookup[r>>4&63]+lookup[r<<2&63]+"=")),x.join("")}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754.read=function(n,r,g,_,x){var S,E,C=x*8-_-1,T=(1<<C)-1,R=T>>1,A=-7,I=g?x-1:0,B=g?-1:1,D=n[r+I];for(I+=B,S=D&(1<<-A)-1,D>>=-A,A+=C;A>0;S=S*256+n[r+I],I+=B,A-=8);for(E=S&(1<<-A)-1,S>>=-A,A+=_;A>0;E=E*256+n[r+I],I+=B,A-=8);if(S===0)S=1-R;else{if(S===T)return E?NaN:(D?-1:1)*(1/0);E=E+Math.pow(2,_),S=S-R}return(D?-1:1)*E*Math.pow(2,S-_)};ieee754.write=function(n,r,g,_,x,S){var E,C,T,R=S*8-x-1,A=(1<<R)-1,I=A>>1,B=x===23?Math.pow(2,-24)-Math.pow(2,-77):0,D=_?0:S-1,N=_?1:-1,M=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(C=isNaN(r)?1:0,E=A):(E=Math.floor(Math.log(r)/Math.LN2),r*(T=Math.pow(2,-E))<1&&(E--,T*=2),E+I>=1?r+=B/T:r+=B*Math.pow(2,1-I),r*T>=2&&(E++,T/=2),E+I>=A?(C=0,E=A):E+I>=1?(C=(r*T-1)*Math.pow(2,x),E=E+I):(C=r*Math.pow(2,I-1)*Math.pow(2,x),E=0));x>=8;n[g+D]=C&255,D+=N,C/=256,x-=8);for(E=E<<x|C,R+=x;R>0;n[g+D]=E&255,D+=N,E/=256,R-=8);n[g+D-N]|=M*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(n){const r=base64Js,g=ieee754,_=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=A,n.SlowBuffer=z,n.INSPECT_MAX_BYTES=50;const x=2147483647;n.kMaxLength=x;const{Uint8Array:S,ArrayBuffer:E,SharedArrayBuffer:C}=globalThis;A.TYPED_ARRAY_SUPPORT=T(),!A.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function T(){try{const Ge=new S(1),De={foo:function(){return 42}};return Object.setPrototypeOf(De,S.prototype),Object.setPrototypeOf(Ge,De),Ge.foo()===42}catch{return!1}}Object.defineProperty(A.prototype,"parent",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.buffer}}),Object.defineProperty(A.prototype,"offset",{enumerable:!0,get:function(){if(A.isBuffer(this))return this.byteOffset}});function R(Ge){if(Ge>x)throw new RangeError('The value "'+Ge+'" is invalid for option "size"');const De=new S(Ge);return Object.setPrototypeOf(De,A.prototype),De}function A(Ge,De,Ve){if(typeof Ge=="number"){if(typeof De=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return N(Ge)}return I(Ge,De,Ve)}A.poolSize=8192;function I(Ge,De,Ve){if(typeof Ge=="string")return M(Ge,De);if(E.isView(Ge))return L(Ge);if(Ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge);if(xt(Ge,E)||Ge&&xt(Ge.buffer,E)||typeof C<"u"&&(xt(Ge,C)||Ge&&xt(Ge.buffer,C)))return F(Ge,De,Ve);if(typeof Ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const Ze=Ge.valueOf&&Ge.valueOf();if(Ze!=null&&Ze!==Ge)return A.from(Ze,De,Ve);const _t=U(Ge);if(_t)return _t;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ge[Symbol.toPrimitive]=="function")return A.from(Ge[Symbol.toPrimitive]("string"),De,Ve);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ge)}A.from=function(Ge,De,Ve){return I(Ge,De,Ve)},Object.setPrototypeOf(A.prototype,S.prototype),Object.setPrototypeOf(A,S);function B(Ge){if(typeof Ge!="number")throw new TypeError('"size" argument must be of type number');if(Ge<0)throw new RangeError('The value "'+Ge+'" is invalid for option "size"')}function D(Ge,De,Ve){return B(Ge),Ge<=0?R(Ge):De!==void 0?typeof Ve=="string"?R(Ge).fill(De,Ve):R(Ge).fill(De):R(Ge)}A.alloc=function(Ge,De,Ve){return D(Ge,De,Ve)};function N(Ge){return B(Ge),R(Ge<0?0:j(Ge)|0)}A.allocUnsafe=function(Ge){return N(Ge)},A.allocUnsafeSlow=function(Ge){return N(Ge)};function M(Ge,De){if((typeof De!="string"||De==="")&&(De="utf8"),!A.isEncoding(De))throw new TypeError("Unknown encoding: "+De);const Ve=W(Ge,De)|0;let Ze=R(Ve);const _t=Ze.write(Ge,De);return _t!==Ve&&(Ze=Ze.slice(0,_t)),Ze}function O(Ge){const De=Ge.length<0?0:j(Ge.length)|0,Ve=R(De);for(let Ze=0;Ze<De;Ze+=1)Ve[Ze]=Ge[Ze]&255;return Ve}function L(Ge){if(xt(Ge,S)){const De=new S(Ge);return F(De.buffer,De.byteOffset,De.byteLength)}return O(Ge)}function F(Ge,De,Ve){if(De<0||Ge.byteLength<De)throw new RangeError('"offset" is outside of buffer bounds');if(Ge.byteLength<De+(Ve||0))throw new RangeError('"length" is outside of buffer bounds');let Ze;return De===void 0&&Ve===void 0?Ze=new S(Ge):Ve===void 0?Ze=new S(Ge,De):Ze=new S(Ge,De,Ve),Object.setPrototypeOf(Ze,A.prototype),Ze}function U(Ge){if(A.isBuffer(Ge)){const De=j(Ge.length)|0,Ve=R(De);return Ve.length===0||Ge.copy(Ve,0,0,De),Ve}if(Ge.length!==void 0)return typeof Ge.length!="number"||Et(Ge.length)?R(0):O(Ge);if(Ge.type==="Buffer"&&Array.isArray(Ge.data))return O(Ge.data)}function j(Ge){if(Ge>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return Ge|0}function z(Ge){return+Ge!=Ge&&(Ge=0),A.alloc(+Ge)}A.isBuffer=function(De){return De!=null&&De._isBuffer===!0&&De!==A.prototype},A.compare=function(De,Ve){if(xt(De,S)&&(De=A.from(De,De.offset,De.byteLength)),xt(Ve,S)&&(Ve=A.from(Ve,Ve.offset,Ve.byteLength)),!A.isBuffer(De)||!A.isBuffer(Ve))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(De===Ve)return 0;let Ze=De.length,_t=Ve.length;for(let ft=0,ht=Math.min(Ze,_t);ft<ht;++ft)if(De[ft]!==Ve[ft]){Ze=De[ft],_t=Ve[ft];break}return Ze<_t?-1:_t<Ze?1:0},A.isEncoding=function(De){switch(String(De).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},A.concat=function(De,Ve){if(!Array.isArray(De))throw new TypeError('"list" argument must be an Array of Buffers');if(De.length===0)return A.alloc(0);let Ze;if(Ve===void 0)for(Ve=0,Ze=0;Ze<De.length;++Ze)Ve+=De[Ze].length;const _t=A.allocUnsafe(Ve);let ft=0;for(Ze=0;Ze<De.length;++Ze){let ht=De[Ze];if(xt(ht,S))ft+ht.length>_t.length?(A.isBuffer(ht)||(ht=A.from(ht)),ht.copy(_t,ft)):S.prototype.set.call(_t,ht,ft);else if(A.isBuffer(ht))ht.copy(_t,ft);else throw new TypeError('"list" argument must be an Array of Buffers');ft+=ht.length}return _t};function W(Ge,De){if(A.isBuffer(Ge))return Ge.length;if(E.isView(Ge)||xt(Ge,E))return Ge.byteLength;if(typeof Ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ge);const Ve=Ge.length,Ze=arguments.length>2&&arguments[2]===!0;if(!Ze&&Ve===0)return 0;let _t=!1;for(;;)switch(De){case"ascii":case"latin1":case"binary":return Ve;case"utf8":case"utf-8":return Je(Ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ve*2;case"hex":return Ve>>>1;case"base64":return wt(Ge).length;default:if(_t)return Ze?-1:Je(Ge).length;De=(""+De).toLowerCase(),_t=!0}}A.byteLength=W;function X(Ge,De,Ve){let Ze=!1;if((De===void 0||De<0)&&(De=0),De>this.length||((Ve===void 0||Ve>this.length)&&(Ve=this.length),Ve<=0)||(Ve>>>=0,De>>>=0,Ve<=De))return"";for(Ge||(Ge="utf8");;)switch(Ge){case"hex":return Y(this,De,Ve);case"utf8":case"utf-8":return Z(this,De,Ve);case"ascii":return se(this,De,Ve);case"latin1":case"binary":return te(this,De,Ve);case"base64":return ve(this,De,Ve);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return be(this,De,Ve);default:if(Ze)throw new TypeError("Unknown encoding: "+Ge);Ge=(Ge+"").toLowerCase(),Ze=!0}}A.prototype._isBuffer=!0;function ie(Ge,De,Ve){const Ze=Ge[De];Ge[De]=Ge[Ve],Ge[Ve]=Ze}A.prototype.swap16=function(){const De=this.length;if(De%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let Ve=0;Ve<De;Ve+=2)ie(this,Ve,Ve+1);return this},A.prototype.swap32=function(){const De=this.length;if(De%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let Ve=0;Ve<De;Ve+=4)ie(this,Ve,Ve+3),ie(this,Ve+1,Ve+2);return this},A.prototype.swap64=function(){const De=this.length;if(De%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let Ve=0;Ve<De;Ve+=8)ie(this,Ve,Ve+7),ie(this,Ve+1,Ve+6),ie(this,Ve+2,Ve+5),ie(this,Ve+3,Ve+4);return this},A.prototype.toString=function(){const De=this.length;return De===0?"":arguments.length===0?Z(this,0,De):X.apply(this,arguments)},A.prototype.toLocaleString=A.prototype.toString,A.prototype.equals=function(De){if(!A.isBuffer(De))throw new TypeError("Argument must be a Buffer");return this===De?!0:A.compare(this,De)===0},A.prototype.inspect=function(){let De="";const Ve=n.INSPECT_MAX_BYTES;return De=this.toString("hex",0,Ve).replace(/(.{2})/g,"$1 ").trim(),this.length>Ve&&(De+=" ... "),"<Buffer "+De+">"},_&&(A.prototype[_]=A.prototype.inspect),A.prototype.compare=function(De,Ve,Ze,_t,ft){if(xt(De,S)&&(De=A.from(De,De.offset,De.byteLength)),!A.isBuffer(De))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof De);if(Ve===void 0&&(Ve=0),Ze===void 0&&(Ze=De?De.length:0),_t===void 0&&(_t=0),ft===void 0&&(ft=this.length),Ve<0||Ze>De.length||_t<0||ft>this.length)throw new RangeError("out of range index");if(_t>=ft&&Ve>=Ze)return 0;if(_t>=ft)return-1;if(Ve>=Ze)return 1;if(Ve>>>=0,Ze>>>=0,_t>>>=0,ft>>>=0,this===De)return 0;let ht=ft-_t,zt=Ze-Ve;const Kt=Math.min(ht,zt),Ft=this.slice(_t,ft),Jt=De.slice(Ve,Ze);for(let jt=0;jt<Kt;++jt)if(Ft[jt]!==Jt[jt]){ht=Ft[jt],zt=Jt[jt];break}return ht<zt?-1:zt<ht?1:0};function fe(Ge,De,Ve,Ze,_t){if(Ge.length===0)return-1;if(typeof Ve=="string"?(Ze=Ve,Ve=0):Ve>2147483647?Ve=2147483647:Ve<-2147483648&&(Ve=-2147483648),Ve=+Ve,Et(Ve)&&(Ve=_t?0:Ge.length-1),Ve<0&&(Ve=Ge.length+Ve),Ve>=Ge.length){if(_t)return-1;Ve=Ge.length-1}else if(Ve<0)if(_t)Ve=0;else return-1;if(typeof De=="string"&&(De=A.from(De,Ze)),A.isBuffer(De))return De.length===0?-1:xe(Ge,De,Ve,Ze,_t);if(typeof De=="number")return De=De&255,typeof S.prototype.indexOf=="function"?_t?S.prototype.indexOf.call(Ge,De,Ve):S.prototype.lastIndexOf.call(Ge,De,Ve):xe(Ge,[De],Ve,Ze,_t);throw new TypeError("val must be string, number or Buffer")}function xe(Ge,De,Ve,Ze,_t){let ft=1,ht=Ge.length,zt=De.length;if(Ze!==void 0&&(Ze=String(Ze).toLowerCase(),Ze==="ucs2"||Ze==="ucs-2"||Ze==="utf16le"||Ze==="utf-16le")){if(Ge.length<2||De.length<2)return-1;ft=2,ht/=2,zt/=2,Ve/=2}function Kt(Jt,jt){return ft===1?Jt[jt]:Jt.readUInt16BE(jt*ft)}let Ft;if(_t){let Jt=-1;for(Ft=Ve;Ft<ht;Ft++)if(Kt(Ge,Ft)===Kt(De,Jt===-1?0:Ft-Jt)){if(Jt===-1&&(Jt=Ft),Ft-Jt+1===zt)return Jt*ft}else Jt!==-1&&(Ft-=Ft-Jt),Jt=-1}else for(Ve+zt>ht&&(Ve=ht-zt),Ft=Ve;Ft>=0;Ft--){let Jt=!0;for(let jt=0;jt<zt;jt++)if(Kt(Ge,Ft+jt)!==Kt(De,jt)){Jt=!1;break}if(Jt)return Ft}return-1}A.prototype.includes=function(De,Ve,Ze){return this.indexOf(De,Ve,Ze)!==-1},A.prototype.indexOf=function(De,Ve,Ze){return fe(this,De,Ve,Ze,!0)},A.prototype.lastIndexOf=function(De,Ve,Ze){return fe(this,De,Ve,Ze,!1)};function we(Ge,De,Ve,Ze){Ve=Number(Ve)||0;const _t=Ge.length-Ve;Ze?(Ze=Number(Ze),Ze>_t&&(Ze=_t)):Ze=_t;const ft=De.length;Ze>ft/2&&(Ze=ft/2);let ht;for(ht=0;ht<Ze;++ht){const zt=parseInt(De.substr(ht*2,2),16);if(Et(zt))return ht;Ge[Ve+ht]=zt}return ht}function G(Ge,De,Ve,Ze){return bt(Je(De,Ge.length-Ve),Ge,Ve,Ze)}function J(Ge,De,Ve,Ze){return bt(Qe(De),Ge,Ve,Ze)}function q(Ge,De,Ve,Ze){return bt(wt(De),Ge,Ve,Ze)}function H(Ge,De,Ve,Ze){return bt(rt(De,Ge.length-Ve),Ge,Ve,Ze)}A.prototype.write=function(De,Ve,Ze,_t){if(Ve===void 0)_t="utf8",Ze=this.length,Ve=0;else if(Ze===void 0&&typeof Ve=="string")_t=Ve,Ze=this.length,Ve=0;else if(isFinite(Ve))Ve=Ve>>>0,isFinite(Ze)?(Ze=Ze>>>0,_t===void 0&&(_t="utf8")):(_t=Ze,Ze=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ft=this.length-Ve;if((Ze===void 0||Ze>ft)&&(Ze=ft),De.length>0&&(Ze<0||Ve<0)||Ve>this.length)throw new RangeError("Attempt to write outside buffer bounds");_t||(_t="utf8");let ht=!1;for(;;)switch(_t){case"hex":return we(this,De,Ve,Ze);case"utf8":case"utf-8":return G(this,De,Ve,Ze);case"ascii":case"latin1":case"binary":return J(this,De,Ve,Ze);case"base64":return q(this,De,Ve,Ze);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,De,Ve,Ze);default:if(ht)throw new TypeError("Unknown encoding: "+_t);_t=(""+_t).toLowerCase(),ht=!0}},A.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ve(Ge,De,Ve){return De===0&&Ve===Ge.length?r.fromByteArray(Ge):r.fromByteArray(Ge.slice(De,Ve))}function Z(Ge,De,Ve){Ve=Math.min(Ge.length,Ve);const Ze=[];let _t=De;for(;_t<Ve;){const ft=Ge[_t];let ht=null,zt=ft>239?4:ft>223?3:ft>191?2:1;if(_t+zt<=Ve){let Kt,Ft,Jt,jt;switch(zt){case 1:ft<128&&(ht=ft);break;case 2:Kt=Ge[_t+1],(Kt&192)===128&&(jt=(ft&31)<<6|Kt&63,jt>127&&(ht=jt));break;case 3:Kt=Ge[_t+1],Ft=Ge[_t+2],(Kt&192)===128&&(Ft&192)===128&&(jt=(ft&15)<<12|(Kt&63)<<6|Ft&63,jt>2047&&(jt<55296||jt>57343)&&(ht=jt));break;case 4:Kt=Ge[_t+1],Ft=Ge[_t+2],Jt=Ge[_t+3],(Kt&192)===128&&(Ft&192)===128&&(Jt&192)===128&&(jt=(ft&15)<<18|(Kt&63)<<12|(Ft&63)<<6|Jt&63,jt>65535&&jt<1114112&&(ht=jt))}}ht===null?(ht=65533,zt=1):ht>65535&&(ht-=65536,Ze.push(ht>>>10&1023|55296),ht=56320|ht&1023),Ze.push(ht),_t+=zt}return ue(Ze)}const ce=4096;function ue(Ge){const De=Ge.length;if(De<=ce)return String.fromCharCode.apply(String,Ge);let Ve="",Ze=0;for(;Ze<De;)Ve+=String.fromCharCode.apply(String,Ge.slice(Ze,Ze+=ce));return Ve}function se(Ge,De,Ve){let Ze="";Ve=Math.min(Ge.length,Ve);for(let _t=De;_t<Ve;++_t)Ze+=String.fromCharCode(Ge[_t]&127);return Ze}function te(Ge,De,Ve){let Ze="";Ve=Math.min(Ge.length,Ve);for(let _t=De;_t<Ve;++_t)Ze+=String.fromCharCode(Ge[_t]);return Ze}function Y(Ge,De,Ve){const Ze=Ge.length;(!De||De<0)&&(De=0),(!Ve||Ve<0||Ve>Ze)&&(Ve=Ze);let _t="";for(let ft=De;ft<Ve;++ft)_t+=Rt[Ge[ft]];return _t}function be(Ge,De,Ve){const Ze=Ge.slice(De,Ve);let _t="";for(let ft=0;ft<Ze.length-1;ft+=2)_t+=String.fromCharCode(Ze[ft]+Ze[ft+1]*256);return _t}A.prototype.slice=function(De,Ve){const Ze=this.length;De=~~De,Ve=Ve===void 0?Ze:~~Ve,De<0?(De+=Ze,De<0&&(De=0)):De>Ze&&(De=Ze),Ve<0?(Ve+=Ze,Ve<0&&(Ve=0)):Ve>Ze&&(Ve=Ze),Ve<De&&(Ve=De);const _t=this.subarray(De,Ve);return Object.setPrototypeOf(_t,A.prototype),_t};function ye(Ge,De,Ve){if(Ge%1!==0||Ge<0)throw new RangeError("offset is not uint");if(Ge+De>Ve)throw new RangeError("Trying to access beyond buffer length")}A.prototype.readUintLE=A.prototype.readUIntLE=function(De,Ve,Ze){De=De>>>0,Ve=Ve>>>0,Ze||ye(De,Ve,this.length);let _t=this[De],ft=1,ht=0;for(;++ht<Ve&&(ft*=256);)_t+=this[De+ht]*ft;return _t},A.prototype.readUintBE=A.prototype.readUIntBE=function(De,Ve,Ze){De=De>>>0,Ve=Ve>>>0,Ze||ye(De,Ve,this.length);let _t=this[De+--Ve],ft=1;for(;Ve>0&&(ft*=256);)_t+=this[De+--Ve]*ft;return _t},A.prototype.readUint8=A.prototype.readUInt8=function(De,Ve){return De=De>>>0,Ve||ye(De,1,this.length),this[De]},A.prototype.readUint16LE=A.prototype.readUInt16LE=function(De,Ve){return De=De>>>0,Ve||ye(De,2,this.length),this[De]|this[De+1]<<8},A.prototype.readUint16BE=A.prototype.readUInt16BE=function(De,Ve){return De=De>>>0,Ve||ye(De,2,this.length),this[De]<<8|this[De+1]},A.prototype.readUint32LE=A.prototype.readUInt32LE=function(De,Ve){return De=De>>>0,Ve||ye(De,4,this.length),(this[De]|this[De+1]<<8|this[De+2]<<16)+this[De+3]*16777216},A.prototype.readUint32BE=A.prototype.readUInt32BE=function(De,Ve){return De=De>>>0,Ve||ye(De,4,this.length),this[De]*16777216+(this[De+1]<<16|this[De+2]<<8|this[De+3])},A.prototype.readBigUInt64LE=$t(function(De){De=De>>>0,Ke(De,"offset");const Ve=this[De],Ze=this[De+7];(Ve===void 0||Ze===void 0)&&Me(De,this.length-8);const _t=Ve+this[++De]*2**8+this[++De]*2**16+this[++De]*2**24,ft=this[++De]+this[++De]*2**8+this[++De]*2**16+Ze*2**24;return BigInt(_t)+(BigInt(ft)<<BigInt(32))}),A.prototype.readBigUInt64BE=$t(function(De){De=De>>>0,Ke(De,"offset");const Ve=this[De],Ze=this[De+7];(Ve===void 0||Ze===void 0)&&Me(De,this.length-8);const _t=Ve*2**24+this[++De]*2**16+this[++De]*2**8+this[++De],ft=this[++De]*2**24+this[++De]*2**16+this[++De]*2**8+Ze;return(BigInt(_t)<<BigInt(32))+BigInt(ft)}),A.prototype.readIntLE=function(De,Ve,Ze){De=De>>>0,Ve=Ve>>>0,Ze||ye(De,Ve,this.length);let _t=this[De],ft=1,ht=0;for(;++ht<Ve&&(ft*=256);)_t+=this[De+ht]*ft;return ft*=128,_t>=ft&&(_t-=Math.pow(2,8*Ve)),_t},A.prototype.readIntBE=function(De,Ve,Ze){De=De>>>0,Ve=Ve>>>0,Ze||ye(De,Ve,this.length);let _t=Ve,ft=1,ht=this[De+--_t];for(;_t>0&&(ft*=256);)ht+=this[De+--_t]*ft;return ft*=128,ht>=ft&&(ht-=Math.pow(2,8*Ve)),ht},A.prototype.readInt8=function(De,Ve){return De=De>>>0,Ve||ye(De,1,this.length),this[De]&128?(255-this[De]+1)*-1:this[De]},A.prototype.readInt16LE=function(De,Ve){De=De>>>0,Ve||ye(De,2,this.length);const Ze=this[De]|this[De+1]<<8;return Ze&32768?Ze|4294901760:Ze},A.prototype.readInt16BE=function(De,Ve){De=De>>>0,Ve||ye(De,2,this.length);const Ze=this[De+1]|this[De]<<8;return Ze&32768?Ze|4294901760:Ze},A.prototype.readInt32LE=function(De,Ve){return De=De>>>0,Ve||ye(De,4,this.length),this[De]|this[De+1]<<8|this[De+2]<<16|this[De+3]<<24},A.prototype.readInt32BE=function(De,Ve){return De=De>>>0,Ve||ye(De,4,this.length),this[De]<<24|this[De+1]<<16|this[De+2]<<8|this[De+3]},A.prototype.readBigInt64LE=$t(function(De){De=De>>>0,Ke(De,"offset");const Ve=this[De],Ze=this[De+7];(Ve===void 0||Ze===void 0)&&Me(De,this.length-8);const _t=this[De+4]+this[De+5]*2**8+this[De+6]*2**16+(Ze<<24);return(BigInt(_t)<<BigInt(32))+BigInt(Ve+this[++De]*2**8+this[++De]*2**16+this[++De]*2**24)}),A.prototype.readBigInt64BE=$t(function(De){De=De>>>0,Ke(De,"offset");const Ve=this[De],Ze=this[De+7];(Ve===void 0||Ze===void 0)&&Me(De,this.length-8);const _t=(Ve<<24)+this[++De]*2**16+this[++De]*2**8+this[++De];return(BigInt(_t)<<BigInt(32))+BigInt(this[++De]*2**24+this[++De]*2**16+this[++De]*2**8+Ze)}),A.prototype.readFloatLE=function(De,Ve){return De=De>>>0,Ve||ye(De,4,this.length),g.read(this,De,!0,23,4)},A.prototype.readFloatBE=function(De,Ve){return De=De>>>0,Ve||ye(De,4,this.length),g.read(this,De,!1,23,4)},A.prototype.readDoubleLE=function(De,Ve){return De=De>>>0,Ve||ye(De,8,this.length),g.read(this,De,!0,52,8)},A.prototype.readDoubleBE=function(De,Ve){return De=De>>>0,Ve||ye(De,8,this.length),g.read(this,De,!1,52,8)};function Ie(Ge,De,Ve,Ze,_t,ft){if(!A.isBuffer(Ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(De>_t||De<ft)throw new RangeError('"value" argument is out of bounds');if(Ve+Ze>Ge.length)throw new RangeError("Index out of range")}A.prototype.writeUintLE=A.prototype.writeUIntLE=function(De,Ve,Ze,_t){if(De=+De,Ve=Ve>>>0,Ze=Ze>>>0,!_t){const zt=Math.pow(2,8*Ze)-1;Ie(this,De,Ve,Ze,zt,0)}let ft=1,ht=0;for(this[Ve]=De&255;++ht<Ze&&(ft*=256);)this[Ve+ht]=De/ft&255;return Ve+Ze},A.prototype.writeUintBE=A.prototype.writeUIntBE=function(De,Ve,Ze,_t){if(De=+De,Ve=Ve>>>0,Ze=Ze>>>0,!_t){const zt=Math.pow(2,8*Ze)-1;Ie(this,De,Ve,Ze,zt,0)}let ft=Ze-1,ht=1;for(this[Ve+ft]=De&255;--ft>=0&&(ht*=256);)this[Ve+ft]=De/ht&255;return Ve+Ze},A.prototype.writeUint8=A.prototype.writeUInt8=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,1,255,0),this[Ve]=De&255,Ve+1},A.prototype.writeUint16LE=A.prototype.writeUInt16LE=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,2,65535,0),this[Ve]=De&255,this[Ve+1]=De>>>8,Ve+2},A.prototype.writeUint16BE=A.prototype.writeUInt16BE=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,2,65535,0),this[Ve]=De>>>8,this[Ve+1]=De&255,Ve+2},A.prototype.writeUint32LE=A.prototype.writeUInt32LE=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,4,4294967295,0),this[Ve+3]=De>>>24,this[Ve+2]=De>>>16,this[Ve+1]=De>>>8,this[Ve]=De&255,Ve+4},A.prototype.writeUint32BE=A.prototype.writeUInt32BE=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,4,4294967295,0),this[Ve]=De>>>24,this[Ve+1]=De>>>16,this[Ve+2]=De>>>8,this[Ve+3]=De&255,Ve+4};function ke(Ge,De,Ve,Ze,_t){Oe(De,Ze,_t,Ge,Ve,7);let ft=Number(De&BigInt(4294967295));Ge[Ve++]=ft,ft=ft>>8,Ge[Ve++]=ft,ft=ft>>8,Ge[Ve++]=ft,ft=ft>>8,Ge[Ve++]=ft;let ht=Number(De>>BigInt(32)&BigInt(4294967295));return Ge[Ve++]=ht,ht=ht>>8,Ge[Ve++]=ht,ht=ht>>8,Ge[Ve++]=ht,ht=ht>>8,Ge[Ve++]=ht,Ve}function Ce(Ge,De,Ve,Ze,_t){Oe(De,Ze,_t,Ge,Ve,7);let ft=Number(De&BigInt(4294967295));Ge[Ve+7]=ft,ft=ft>>8,Ge[Ve+6]=ft,ft=ft>>8,Ge[Ve+5]=ft,ft=ft>>8,Ge[Ve+4]=ft;let ht=Number(De>>BigInt(32)&BigInt(4294967295));return Ge[Ve+3]=ht,ht=ht>>8,Ge[Ve+2]=ht,ht=ht>>8,Ge[Ve+1]=ht,ht=ht>>8,Ge[Ve]=ht,Ve+8}A.prototype.writeBigUInt64LE=$t(function(De,Ve=0){return ke(this,De,Ve,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeBigUInt64BE=$t(function(De,Ve=0){return Ce(this,De,Ve,BigInt(0),BigInt("0xffffffffffffffff"))}),A.prototype.writeIntLE=function(De,Ve,Ze,_t){if(De=+De,Ve=Ve>>>0,!_t){const Kt=Math.pow(2,8*Ze-1);Ie(this,De,Ve,Ze,Kt-1,-Kt)}let ft=0,ht=1,zt=0;for(this[Ve]=De&255;++ft<Ze&&(ht*=256);)De<0&&zt===0&&this[Ve+ft-1]!==0&&(zt=1),this[Ve+ft]=(De/ht>>0)-zt&255;return Ve+Ze},A.prototype.writeIntBE=function(De,Ve,Ze,_t){if(De=+De,Ve=Ve>>>0,!_t){const Kt=Math.pow(2,8*Ze-1);Ie(this,De,Ve,Ze,Kt-1,-Kt)}let ft=Ze-1,ht=1,zt=0;for(this[Ve+ft]=De&255;--ft>=0&&(ht*=256);)De<0&&zt===0&&this[Ve+ft+1]!==0&&(zt=1),this[Ve+ft]=(De/ht>>0)-zt&255;return Ve+Ze},A.prototype.writeInt8=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,1,127,-128),De<0&&(De=255+De+1),this[Ve]=De&255,Ve+1},A.prototype.writeInt16LE=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,2,32767,-32768),this[Ve]=De&255,this[Ve+1]=De>>>8,Ve+2},A.prototype.writeInt16BE=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,2,32767,-32768),this[Ve]=De>>>8,this[Ve+1]=De&255,Ve+2},A.prototype.writeInt32LE=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,4,2147483647,-2147483648),this[Ve]=De&255,this[Ve+1]=De>>>8,this[Ve+2]=De>>>16,this[Ve+3]=De>>>24,Ve+4},A.prototype.writeInt32BE=function(De,Ve,Ze){return De=+De,Ve=Ve>>>0,Ze||Ie(this,De,Ve,4,2147483647,-2147483648),De<0&&(De=4294967295+De+1),this[Ve]=De>>>24,this[Ve+1]=De>>>16,this[Ve+2]=De>>>8,this[Ve+3]=De&255,Ve+4},A.prototype.writeBigInt64LE=$t(function(De,Ve=0){return ke(this,De,Ve,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),A.prototype.writeBigInt64BE=$t(function(De,Ve=0){return Ce(this,De,Ve,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ae(Ge,De,Ve,Ze,_t,ft){if(Ve+Ze>Ge.length)throw new RangeError("Index out of range");if(Ve<0)throw new RangeError("Index out of range")}function Ne(Ge,De,Ve,Ze,_t){return De=+De,Ve=Ve>>>0,_t||Ae(Ge,De,Ve,4),g.write(Ge,De,Ve,Ze,23,4),Ve+4}A.prototype.writeFloatLE=function(De,Ve,Ze){return Ne(this,De,Ve,!0,Ze)},A.prototype.writeFloatBE=function(De,Ve,Ze){return Ne(this,De,Ve,!1,Ze)};function We(Ge,De,Ve,Ze,_t){return De=+De,Ve=Ve>>>0,_t||Ae(Ge,De,Ve,8),g.write(Ge,De,Ve,Ze,52,8),Ve+8}A.prototype.writeDoubleLE=function(De,Ve,Ze){return We(this,De,Ve,!0,Ze)},A.prototype.writeDoubleBE=function(De,Ve,Ze){return We(this,De,Ve,!1,Ze)},A.prototype.copy=function(De,Ve,Ze,_t){if(!A.isBuffer(De))throw new TypeError("argument should be a Buffer");if(Ze||(Ze=0),!_t&&_t!==0&&(_t=this.length),Ve>=De.length&&(Ve=De.length),Ve||(Ve=0),_t>0&&_t<Ze&&(_t=Ze),_t===Ze||De.length===0||this.length===0)return 0;if(Ve<0)throw new RangeError("targetStart out of bounds");if(Ze<0||Ze>=this.length)throw new RangeError("Index out of range");if(_t<0)throw new RangeError("sourceEnd out of bounds");_t>this.length&&(_t=this.length),De.length-Ve<_t-Ze&&(_t=De.length-Ve+Ze);const ft=_t-Ze;return this===De&&typeof S.prototype.copyWithin=="function"?this.copyWithin(Ve,Ze,_t):S.prototype.set.call(De,this.subarray(Ze,_t),Ve),ft},A.prototype.fill=function(De,Ve,Ze,_t){if(typeof De=="string"){if(typeof Ve=="string"?(_t=Ve,Ve=0,Ze=this.length):typeof Ze=="string"&&(_t=Ze,Ze=this.length),_t!==void 0&&typeof _t!="string")throw new TypeError("encoding must be a string");if(typeof _t=="string"&&!A.isEncoding(_t))throw new TypeError("Unknown encoding: "+_t);if(De.length===1){const ht=De.charCodeAt(0);(_t==="utf8"&&ht<128||_t==="latin1")&&(De=ht)}}else typeof De=="number"?De=De&255:typeof De=="boolean"&&(De=Number(De));if(Ve<0||this.length<Ve||this.length<Ze)throw new RangeError("Out of range index");if(Ze<=Ve)return this;Ve=Ve>>>0,Ze=Ze===void 0?this.length:Ze>>>0,De||(De=0);let ft;if(typeof De=="number")for(ft=Ve;ft<Ze;++ft)this[ft]=De;else{const ht=A.isBuffer(De)?De:A.from(De,_t),zt=ht.length;if(zt===0)throw new TypeError('The value "'+De+'" is invalid for argument "value"');for(ft=0;ft<Ze-Ve;++ft)this[ft+Ve]=ht[ft%zt]}return this};const Be={};function Se(Ge,De,Ve){Be[Ge]=class extends Ve{constructor(){super(),Object.defineProperty(this,"message",{value:De.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ge}]`,this.stack,delete this.name}get code(){return Ge}set code(_t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:_t,writable:!0})}toString(){return`${this.name} [${Ge}]: ${this.message}`}}}Se("ERR_BUFFER_OUT_OF_BOUNDS",function(Ge){return Ge?`${Ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Se("ERR_INVALID_ARG_TYPE",function(Ge,De){return`The "${Ge}" argument must be of type number. Received type ${typeof De}`},TypeError),Se("ERR_OUT_OF_RANGE",function(Ge,De,Ve){let Ze=`The value of "${Ge}" is out of range.`,_t=Ve;return Number.isInteger(Ve)&&Math.abs(Ve)>2**32?_t=$e(String(Ve)):typeof Ve=="bigint"&&(_t=String(Ve),(Ve>BigInt(2)**BigInt(32)||Ve<-(BigInt(2)**BigInt(32)))&&(_t=$e(_t)),_t+="n"),Ze+=` It must be ${De}. Received ${_t}`,Ze},RangeError);function $e(Ge){let De="",Ve=Ge.length;const Ze=Ge[0]==="-"?1:0;for(;Ve>=Ze+4;Ve-=3)De=`_${Ge.slice(Ve-3,Ve)}${De}`;return`${Ge.slice(0,Ve)}${De}`}function _e(Ge,De,Ve){Ke(De,"offset"),(Ge[De]===void 0||Ge[De+Ve]===void 0)&&Me(De,Ge.length-(Ve+1))}function Oe(Ge,De,Ve,Ze,_t,ft){if(Ge>Ve||Ge<De){const ht=typeof De=="bigint"?"n":"";let zt;throw De===0||De===BigInt(0)?zt=`>= 0${ht} and < 2${ht} ** ${(ft+1)*8}${ht}`:zt=`>= -(2${ht} ** ${(ft+1)*8-1}${ht}) and < 2 ** ${(ft+1)*8-1}${ht}`,new Be.ERR_OUT_OF_RANGE("value",zt,Ge)}_e(Ze,_t,ft)}function Ke(Ge,De){if(typeof Ge!="number")throw new Be.ERR_INVALID_ARG_TYPE(De,"number",Ge)}function Me(Ge,De,Ve){throw Math.floor(Ge)!==Ge?(Ke(Ge,Ve),new Be.ERR_OUT_OF_RANGE("offset","an integer",Ge)):De<0?new Be.ERR_BUFFER_OUT_OF_BOUNDS:new Be.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${De}`,Ge)}const Le=/[^+/0-9A-Za-z-_]/g;function ze(Ge){if(Ge=Ge.split("=")[0],Ge=Ge.trim().replace(Le,""),Ge.length<2)return"";for(;Ge.length%4!==0;)Ge=Ge+"=";return Ge}function Je(Ge,De){De=De||1/0;let Ve;const Ze=Ge.length;let _t=null;const ft=[];for(let ht=0;ht<Ze;++ht){if(Ve=Ge.charCodeAt(ht),Ve>55295&&Ve<57344){if(!_t){if(Ve>56319){(De-=3)>-1&&ft.push(239,191,189);continue}else if(ht+1===Ze){(De-=3)>-1&&ft.push(239,191,189);continue}_t=Ve;continue}if(Ve<56320){(De-=3)>-1&&ft.push(239,191,189),_t=Ve;continue}Ve=(_t-55296<<10|Ve-56320)+65536}else _t&&(De-=3)>-1&&ft.push(239,191,189);if(_t=null,Ve<128){if((De-=1)<0)break;ft.push(Ve)}else if(Ve<2048){if((De-=2)<0)break;ft.push(Ve>>6|192,Ve&63|128)}else if(Ve<65536){if((De-=3)<0)break;ft.push(Ve>>12|224,Ve>>6&63|128,Ve&63|128)}else if(Ve<1114112){if((De-=4)<0)break;ft.push(Ve>>18|240,Ve>>12&63|128,Ve>>6&63|128,Ve&63|128)}else throw new Error("Invalid code point")}return ft}function Qe(Ge){const De=[];for(let Ve=0;Ve<Ge.length;++Ve)De.push(Ge.charCodeAt(Ve)&255);return De}function rt(Ge,De){let Ve,Ze,_t;const ft=[];for(let ht=0;ht<Ge.length&&!((De-=2)<0);++ht)Ve=Ge.charCodeAt(ht),Ze=Ve>>8,_t=Ve%256,ft.push(_t),ft.push(Ze);return ft}function wt(Ge){return r.toByteArray(ze(Ge))}function bt(Ge,De,Ve,Ze){let _t;for(_t=0;_t<Ze&&!(_t+Ve>=De.length||_t>=Ge.length);++_t)De[_t+Ve]=Ge[_t];return _t}function xt(Ge,De){return Ge instanceof De||Ge!=null&&Ge.constructor!=null&&Ge.constructor.name!=null&&Ge.constructor.name===De.name}function Et(Ge){return Ge!==Ge}const Rt=function(){const Ge="0123456789abcdef",De=new Array(256);for(let Ve=0;Ve<16;++Ve){const Ze=Ve*16;for(let _t=0;_t<16;++_t)De[Ze+_t]=Ge[Ve]+Ge[_t]}return De}();function $t(Ge){return typeof BigInt>"u"?qt:Ge}function qt(){throw new Error("BigInt not supported")}})(buffer$2);const Buffer$1=buffer$2.Buffer,Buffer$1$1=buffer$2.Buffer;window.Buffer=Buffer$1$1;window.process=process$1;const global$1=globalThis||void 0||self;/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(n){const r=Object.create(null);for(const g of n.split(","))r[g]=1;return g=>g in r}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn$1=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),isModelListener=n=>n.startsWith("onUpdate:"),extend$1=Object.assign,remove=(n,r)=>{const g=n.indexOf(r);g>-1&&n.splice(g,1)},hasOwnProperty$b=Object.prototype.hasOwnProperty,hasOwn=(n,r)=>hasOwnProperty$b.call(n,r),isArray$3=Array.isArray,isMap$1=n=>toTypeString(n)==="[object Map]",isSet$1=n=>toTypeString(n)==="[object Set]",isFunction$2=n=>typeof n=="function",isString$2=n=>typeof n=="string",isSymbol$1=n=>typeof n=="symbol",isObject$3=n=>n!==null&&typeof n=="object",isPromise$7=n=>(isObject$3(n)||isFunction$2(n))&&isFunction$2(n.then)&&isFunction$2(n.catch),objectToString$2=Object.prototype.toString,toTypeString=n=>objectToString$2.call(n),toRawType=n=>toTypeString(n).slice(8,-1),isPlainObject$3=n=>toTypeString(n)==="[object Object]",isIntegerKey=n=>isString$2(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=n=>{const r=Object.create(null);return g=>r[g]||(r[g]=n(g))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(n=>n.replace(camelizeRE,(r,g)=>g?g.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(n=>n.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(n=>n.charAt(0).toUpperCase()+n.slice(1)),toHandlerKey=cacheStringFunction(n=>n?`on${capitalize(n)}`:""),hasChanged=(n,r)=>!Object.is(n,r),invokeArrayFns=(n,...r)=>{for(let g=0;g<n.length;g++)n[g](...r)},def=(n,r,g,_=!1)=>{Object.defineProperty(n,r,{configurable:!0,enumerable:!1,writable:_,value:g})},looseToNumber=n=>{const r=parseFloat(n);return isNaN(r)?n:r},toNumber=n=>{const r=isString$2(n)?Number(n):NaN;return isNaN(r)?n:r};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global$1<"u"?global$1:{});function normalizeStyle(n){if(isArray$3(n)){const r={};for(let g=0;g<n.length;g++){const _=n[g],x=isString$2(_)?parseStringStyle(_):normalizeStyle(_);if(x)for(const S in x)r[S]=x[S]}return r}else if(isString$2(n)||isObject$3(n))return n}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(n){const r={};return n.replace(styleCommentRE,"").split(listDelimiterRE).forEach(g=>{if(g){const _=g.split(propertyDelimiterRE);_.length>1&&(r[_[0].trim()]=_[1].trim())}}),r}function normalizeClass(n){let r="";if(isString$2(n))r=n;else if(isArray$3(n))for(let g=0;g<n.length;g++){const _=normalizeClass(n[g]);_&&(r+=_+" ")}else if(isObject$3(n))for(const g in n)n[g]&&(r+=g+" ");return r.trim()}function normalizeProps(n){if(!n)return null;let{class:r,style:g}=n;return r&&!isString$2(r)&&(n.class=normalizeClass(r)),g&&(n.style=normalizeStyle(g)),n}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(n){return!!n||n===""}const isRef$1=n=>!!(n&&n.__v_isRef===!0),toDisplayString=n=>isString$2(n)?n:n==null?"":isArray$3(n)||isObject$3(n)&&(n.toString===objectToString$2||!isFunction$2(n.toString))?isRef$1(n)?toDisplayString(n.value):JSON.stringify(n,replacer,2):String(n),replacer=(n,r)=>isRef$1(r)?replacer(n,r.value):isMap$1(r)?{[`Map(${r.size})`]:[...r.entries()].reduce((g,[_,x],S)=>(g[stringifySymbol(_,S)+" =>"]=x,g),{})}:isSet$1(r)?{[`Set(${r.size})`]:[...r.values()].map(g=>stringifySymbol(g))}:isSymbol$1(r)?stringifySymbol(r):isObject$3(r)&&!isArray$3(r)&&!isPlainObject$3(r)?String(r):r,stringifySymbol=(n,r="")=>{var g;return isSymbol$1(n)?`Symbol(${(g=n.description)!=null?g:r})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(r=!1){this.detached=r,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!r&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let r,g;if(this.scopes)for(r=0,g=this.scopes.length;r<g;r++)this.scopes[r].pause();for(r=0,g=this.effects.length;r<g;r++)this.effects[r].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let r,g;if(this.scopes)for(r=0,g=this.scopes.length;r<g;r++)this.scopes[r].resume();for(r=0,g=this.effects.length;r<g;r++)this.effects[r].resume()}}run(r){if(this._active){const g=activeEffectScope;try{return activeEffectScope=this,r()}finally{activeEffectScope=g}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(r){if(this._active){this._active=!1;let g,_;for(g=0,_=this.effects.length;g<_;g++)this.effects[g].stop();for(this.effects.length=0,g=0,_=this.cleanups.length;g<_;g++)this.cleanups[g]();if(this.cleanups.length=0,this.scopes){for(g=0,_=this.scopes.length;g<_;g++)this.scopes[g].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!r){const x=this.parent.scopes.pop();x&&x!==this&&(this.parent.scopes[this.index]=x,x.index=this.index)}this.parent=void 0}}}function effectScope(n){return new EffectScope(n)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(n,r=!1){activeEffectScope&&activeEffectScope.cleanups.push(n)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(r){this.fn=r,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch$1(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const r=activeSub,g=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=r,shouldTrack=g,this.flags&=-3}}stop(){if(this.flags&1){for(let r=this.deps;r;r=r.nextDep)removeSub(r);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch$1(n,r=!1){if(n.flags|=8,r){n.next=batchedComputed,batchedComputed=n;return}n.next=batchedSub,batchedSub=n}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let r=batchedComputed;for(batchedComputed=void 0;r;){const g=r.next;r.next=void 0,r.flags&=-9,r=g}}let n;for(;batchedSub;){let r=batchedSub;for(batchedSub=void 0;r;){const g=r.next;if(r.next=void 0,r.flags&=-9,r.flags&1)try{r.trigger()}catch(_){n||(n=_)}r=g}}if(n)throw n}function prepareDeps(n){for(let r=n.deps;r;r=r.nextDep)r.version=-1,r.prevActiveLink=r.dep.activeLink,r.dep.activeLink=r}function cleanupDeps(n){let r,g=n.depsTail,_=g;for(;_;){const x=_.prevDep;_.version===-1?(_===g&&(g=x),removeSub(_),removeDep(_)):r=_,_.dep.activeLink=_.prevActiveLink,_.prevActiveLink=void 0,_=x}n.deps=r,n.depsTail=g}function isDirty(n){for(let r=n.deps;r;r=r.nextDep)if(r.dep.version!==r.version||r.dep.computed&&(refreshComputed(r.dep.computed)||r.dep.version!==r.version))return!0;return!!n._dirty}function refreshComputed(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===globalVersion))return;n.globalVersion=globalVersion;const r=n.dep;if(n.flags|=2,r.version>0&&!n.isSSR&&n.deps&&!isDirty(n)){n.flags&=-3;return}const g=activeSub,_=shouldTrack;activeSub=n,shouldTrack=!0;try{prepareDeps(n);const x=n.fn(n._value);(r.version===0||hasChanged(x,n._value))&&(n._value=x,r.version++)}catch(x){throw r.version++,x}finally{activeSub=g,shouldTrack=_,cleanupDeps(n),n.flags&=-3}}function removeSub(n,r=!1){const{dep:g,prevSub:_,nextSub:x}=n;if(_&&(_.nextSub=x,n.prevSub=void 0),x&&(x.prevSub=_,n.nextSub=void 0),g.subs===n&&(g.subs=_,!_&&g.computed)){g.computed.flags&=-5;for(let S=g.computed.deps;S;S=S.nextDep)removeSub(S,!0)}!r&&!--g.sc&&g.map&&g.map.delete(g.key)}function removeDep(n){const{prevDep:r,nextDep:g}=n;r&&(r.nextDep=g,n.prevDep=void 0),g&&(g.prevDep=r,n.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const n=trackStack.pop();shouldTrack=n===void 0?!0:n}function cleanupEffect(n){const{cleanup:r}=n;if(n.cleanup=void 0,r){const g=activeSub;activeSub=void 0;try{r()}finally{activeSub=g}}}let globalVersion=0;class Link{constructor(r,g){this.sub=r,this.dep=g,this.version=g.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(r){this.computed=r,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(r){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let g=this.activeLink;if(g===void 0||g.sub!==activeSub)g=this.activeLink=new Link(activeSub,this),activeSub.deps?(g.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=g,activeSub.depsTail=g):activeSub.deps=activeSub.depsTail=g,addSub(g);else if(g.version===-1&&(g.version=this.version,g.nextDep)){const _=g.nextDep;_.prevDep=g.prevDep,g.prevDep&&(g.prevDep.nextDep=_),g.prevDep=activeSub.depsTail,g.nextDep=void 0,activeSub.depsTail.nextDep=g,activeSub.depsTail=g,activeSub.deps===g&&(activeSub.deps=_)}return g}trigger(r){this.version++,globalVersion++,this.notify(r)}notify(r){startBatch();try{for(let g=this.subs;g;g=g.prevSub)g.sub.notify()&&g.sub.dep.notify()}finally{endBatch()}}}function addSub(n){if(n.dep.sc++,n.sub.flags&4){const r=n.dep.computed;if(r&&!n.dep.subs){r.flags|=20;for(let _=r.deps;_;_=_.nextDep)addSub(_)}const g=n.dep.subs;g!==n&&(n.prevSub=g,g&&(g.nextSub=n)),n.dep.subs=n}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(n,r,g){if(shouldTrack&&activeSub){let _=targetMap.get(n);_||targetMap.set(n,_=new Map);let x=_.get(g);x||(_.set(g,x=new Dep),x.map=_,x.key=g),x.track()}}function trigger(n,r,g,_,x,S){const E=targetMap.get(n);if(!E){globalVersion++;return}const C=T=>{T&&T.trigger()};if(startBatch(),r==="clear")E.forEach(C);else{const T=isArray$3(n),R=T&&isIntegerKey(g);if(T&&g==="length"){const A=Number(_);E.forEach((I,B)=>{(B==="length"||B===ARRAY_ITERATE_KEY||!isSymbol$1(B)&&B>=A)&&C(I)})}else switch((g!==void 0||E.has(void 0))&&C(E.get(g)),R&&C(E.get(ARRAY_ITERATE_KEY)),r){case"add":T?R&&C(E.get("length")):(C(E.get(ITERATE_KEY)),isMap$1(n)&&C(E.get(MAP_KEY_ITERATE_KEY)));break;case"delete":T||(C(E.get(ITERATE_KEY)),isMap$1(n)&&C(E.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$1(n)&&C(E.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(n,r){const g=targetMap.get(n);return g&&g.get(r)}function reactiveReadArray(n){const r=toRaw(n);return r===n?r:(track(r,"iterate",ARRAY_ITERATE_KEY),isShallow(n)?r:r.map(toReactive))}function shallowReadArray(n){return track(n=toRaw(n),"iterate",ARRAY_ITERATE_KEY),n}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator$1(this,Symbol.iterator,toReactive)},concat(...n){return reactiveReadArray(this).concat(...n.map(r=>isArray$3(r)?reactiveReadArray(r):r))},entries(){return iterator$1(this,"entries",n=>(n[1]=toReactive(n[1]),n))},every(n,r){return apply(this,"every",n,r,void 0,arguments)},filter(n,r){return apply(this,"filter",n,r,g=>g.map(toReactive),arguments)},find(n,r){return apply(this,"find",n,r,toReactive,arguments)},findIndex(n,r){return apply(this,"findIndex",n,r,void 0,arguments)},findLast(n,r){return apply(this,"findLast",n,r,toReactive,arguments)},findLastIndex(n,r){return apply(this,"findLastIndex",n,r,void 0,arguments)},forEach(n,r){return apply(this,"forEach",n,r,void 0,arguments)},includes(...n){return searchProxy(this,"includes",n)},indexOf(...n){return searchProxy(this,"indexOf",n)},join(n){return reactiveReadArray(this).join(n)},lastIndexOf(...n){return searchProxy(this,"lastIndexOf",n)},map(n,r){return apply(this,"map",n,r,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...n){return noTracking(this,"push",n)},reduce(n,...r){return reduce$1(this,"reduce",n,r)},reduceRight(n,...r){return reduce$1(this,"reduceRight",n,r)},shift(){return noTracking(this,"shift")},some(n,r){return apply(this,"some",n,r,void 0,arguments)},splice(...n){return noTracking(this,"splice",n)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(n){return reactiveReadArray(this).toSorted(n)},toSpliced(...n){return reactiveReadArray(this).toSpliced(...n)},unshift(...n){return noTracking(this,"unshift",n)},values(){return iterator$1(this,"values",toReactive)}};function iterator$1(n,r,g){const _=shallowReadArray(n),x=_[r]();return _!==n&&!isShallow(n)&&(x._next=x.next,x.next=()=>{const S=x._next();return S.value&&(S.value=g(S.value)),S}),x}const arrayProto$1=Array.prototype;function apply(n,r,g,_,x,S){const E=shallowReadArray(n),C=E!==n&&!isShallow(n),T=E[r];if(T!==arrayProto$1[r]){const I=T.apply(n,S);return C?toReactive(I):I}let R=g;E!==n&&(C?R=function(I,B){return g.call(this,toReactive(I),B,n)}:g.length>2&&(R=function(I,B){return g.call(this,I,B,n)}));const A=T.call(E,R,_);return C&&x?x(A):A}function reduce$1(n,r,g,_){const x=shallowReadArray(n);let S=g;return x!==n&&(isShallow(n)?g.length>3&&(S=function(E,C,T){return g.call(this,E,C,T,n)}):S=function(E,C,T){return g.call(this,E,toReactive(C),T,n)}),x[r](S,..._)}function searchProxy(n,r,g){const _=toRaw(n);track(_,"iterate",ARRAY_ITERATE_KEY);const x=_[r](...g);return(x===-1||x===!1)&&isProxy(g[0])?(g[0]=toRaw(g[0]),_[r](...g)):x}function noTracking(n,r,g=[]){pauseTracking(),startBatch();const _=toRaw(n)[r].apply(n,g);return endBatch(),resetTracking(),_}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(isSymbol$1));function hasOwnProperty$a(n){isSymbol$1(n)||(n=String(n));const r=toRaw(this);return track(r,"has",n),r.hasOwnProperty(n)}class BaseReactiveHandler{constructor(r=!1,g=!1){this._isReadonly=r,this._isShallow=g}get(r,g,_){if(g==="__v_skip")return r.__v_skip;const x=this._isReadonly,S=this._isShallow;if(g==="__v_isReactive")return!x;if(g==="__v_isReadonly")return x;if(g==="__v_isShallow")return S;if(g==="__v_raw")return _===(x?S?shallowReadonlyMap:readonlyMap:S?shallowReactiveMap:reactiveMap).get(r)||Object.getPrototypeOf(r)===Object.getPrototypeOf(_)?r:void 0;const E=isArray$3(r);if(!x){let T;if(E&&(T=arrayInstrumentations[g]))return T;if(g==="hasOwnProperty")return hasOwnProperty$a}const C=Reflect.get(r,g,isRef(r)?r:_);return(isSymbol$1(g)?builtInSymbols.has(g):isNonTrackableKeys(g))||(x||track(r,"get",g),S)?C:isRef(C)?E&&isIntegerKey(g)?C:C.value:isObject$3(C)?x?readonly$2(C):reactive(C):C}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!1,r)}set(r,g,_,x){let S=r[g];if(!this._isShallow){const T=isReadonly(S);if(!isShallow(_)&&!isReadonly(_)&&(S=toRaw(S),_=toRaw(_)),!isArray$3(r)&&isRef(S)&&!isRef(_))return T?!1:(S.value=_,!0)}const E=isArray$3(r)&&isIntegerKey(g)?Number(g)<r.length:hasOwn(r,g),C=Reflect.set(r,g,_,isRef(r)?r:x);return r===toRaw(x)&&(E?hasChanged(_,S)&&trigger(r,"set",g,_):trigger(r,"add",g,_)),C}deleteProperty(r,g){const _=hasOwn(r,g);r[g];const x=Reflect.deleteProperty(r,g);return x&&_&&trigger(r,"delete",g,void 0),x}has(r,g){const _=Reflect.has(r,g);return(!isSymbol$1(g)||!builtInSymbols.has(g))&&track(r,"has",g),_}ownKeys(r){return track(r,"iterate",isArray$3(r)?"length":ITERATE_KEY),Reflect.ownKeys(r)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(r=!1){super(!0,r)}set(r,g){return!0}deleteProperty(r,g){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=n=>n,getProto=n=>Reflect.getPrototypeOf(n);function createIterableMethod(n,r,g){return function(..._){const x=this.__v_raw,S=toRaw(x),E=isMap$1(S),C=n==="entries"||n===Symbol.iterator&&E,T=n==="keys"&&E,R=x[n](..._),A=g?toShallow:r?toReadonly:toReactive;return!r&&track(S,"iterate",T?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:I,done:B}=R.next();return B?{value:I,done:B}:{value:C?[A(I[0]),A(I[1])]:A(I),done:B}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(n){return function(...r){return n==="delete"?!1:n==="clear"?void 0:this}}function createInstrumentations(n,r){const g={get(x){const S=this.__v_raw,E=toRaw(S),C=toRaw(x);n||(hasChanged(x,C)&&track(E,"get",x),track(E,"get",C));const{has:T}=getProto(E),R=r?toShallow:n?toReadonly:toReactive;if(T.call(E,x))return R(S.get(x));if(T.call(E,C))return R(S.get(C));S!==E&&S.get(x)},get size(){const x=this.__v_raw;return!n&&track(toRaw(x),"iterate",ITERATE_KEY),Reflect.get(x,"size",x)},has(x){const S=this.__v_raw,E=toRaw(S),C=toRaw(x);return n||(hasChanged(x,C)&&track(E,"has",x),track(E,"has",C)),x===C?S.has(x):S.has(x)||S.has(C)},forEach(x,S){const E=this,C=E.__v_raw,T=toRaw(C),R=r?toShallow:n?toReadonly:toReactive;return!n&&track(T,"iterate",ITERATE_KEY),C.forEach((A,I)=>x.call(S,R(A),R(I),E))}};return extend$1(g,n?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(x){!r&&!isShallow(x)&&!isReadonly(x)&&(x=toRaw(x));const S=toRaw(this);return getProto(S).has.call(S,x)||(S.add(x),trigger(S,"add",x,x)),this},set(x,S){!r&&!isShallow(S)&&!isReadonly(S)&&(S=toRaw(S));const E=toRaw(this),{has:C,get:T}=getProto(E);let R=C.call(E,x);R||(x=toRaw(x),R=C.call(E,x));const A=T.call(E,x);return E.set(x,S),R?hasChanged(S,A)&&trigger(E,"set",x,S):trigger(E,"add",x,S),this},delete(x){const S=toRaw(this),{has:E,get:C}=getProto(S);let T=E.call(S,x);T||(x=toRaw(x),T=E.call(S,x)),C&&C.call(S,x);const R=S.delete(x);return T&&trigger(S,"delete",x,void 0),R},clear(){const x=toRaw(this),S=x.size!==0,E=x.clear();return S&&trigger(x,"clear",void 0,void 0),E}}),["keys","values","entries",Symbol.iterator].forEach(x=>{g[x]=createIterableMethod(x,n,r)}),g}function createInstrumentationGetter(n,r){const g=createInstrumentations(n,r);return(_,x,S)=>x==="__v_isReactive"?!n:x==="__v_isReadonly"?n:x==="__v_raw"?_:Reflect.get(hasOwn(g,x)&&x in _?g:_,x,S)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(n){return n.__v_skip||!Object.isExtensible(n)?0:targetTypeMap(toRawType(n))}function reactive(n){return isReadonly(n)?n:createReactiveObject(n,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(n){return createReactiveObject(n,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly$2(n){return createReactiveObject(n,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(n){return createReactiveObject(n,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(n,r,g,_,x){if(!isObject$3(n)||n.__v_raw&&!(r&&n.__v_isReactive))return n;const S=x.get(n);if(S)return S;const E=getTargetType(n);if(E===0)return n;const C=new Proxy(n,E===2?_:g);return x.set(n,C),C}function isReactive(n){return isReadonly(n)?isReactive(n.__v_raw):!!(n&&n.__v_isReactive)}function isReadonly(n){return!!(n&&n.__v_isReadonly)}function isShallow(n){return!!(n&&n.__v_isShallow)}function isProxy(n){return n?!!n.__v_raw:!1}function toRaw(n){const r=n&&n.__v_raw;return r?toRaw(r):n}function markRaw(n){return!hasOwn(n,"__v_skip")&&Object.isExtensible(n)&&def(n,"__v_skip",!0),n}const toReactive=n=>isObject$3(n)?reactive(n):n,toReadonly=n=>isObject$3(n)?readonly$2(n):n;function isRef(n){return n?n.__v_isRef===!0:!1}function ref$2(n){return createRef(n,!1)}function shallowRef(n){return createRef(n,!0)}function createRef(n,r){return isRef(n)?n:new RefImpl(n,r)}class RefImpl{constructor(r,g){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=g?r:toRaw(r),this._value=g?r:toReactive(r),this.__v_isShallow=g}get value(){return this.dep.track(),this._value}set value(r){const g=this._rawValue,_=this.__v_isShallow||isShallow(r)||isReadonly(r);r=_?r:toRaw(r),hasChanged(r,g)&&(this._rawValue=r,this._value=_?r:toReactive(r),this.dep.trigger())}}function unref(n){return isRef(n)?n.value:n}function toValue(n){return isFunction$2(n)?n():unref(n)}const shallowUnwrapHandlers={get:(n,r,g)=>r==="__v_raw"?n:unref(Reflect.get(n,r,g)),set:(n,r,g,_)=>{const x=n[r];return isRef(x)&&!isRef(g)?(x.value=g,!0):Reflect.set(n,r,g,_)}};function proxyRefs(n){return isReactive(n)?n:new Proxy(n,shallowUnwrapHandlers)}class CustomRefImpl{constructor(r){this.__v_isRef=!0,this._value=void 0;const g=this.dep=new Dep,{get:_,set:x}=r(g.track.bind(g),g.trigger.bind(g));this._get=_,this._set=x}get value(){return this._value=this._get()}set value(r){this._set(r)}}function customRef(n){return new CustomRefImpl(n)}function toRefs(n){const r=isArray$3(n)?new Array(n.length):{};for(const g in n)r[g]=propertyToRef(n,g);return r}class ObjectRefImpl{constructor(r,g,_){this._object=r,this._key=g,this._defaultValue=_,this.__v_isRef=!0,this._value=void 0}get value(){const r=this._object[this._key];return this._value=r===void 0?this._defaultValue:r}set value(r){this._object[this._key]=r}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(r){this._getter=r,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(n,r,g){return isRef(n)?n:isFunction$2(n)?new GetterRefImpl(n):isObject$3(n)&&arguments.length>1?propertyToRef(n,r,g):ref$2(n)}function propertyToRef(n,r,g){const _=n[r];return isRef(_)?_:new ObjectRefImpl(n,r,g)}class ComputedRefImpl{constructor(r,g,_){this.fn=r,this.setter=g,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!g,this.isSSR=_}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch$1(this,!0),!0}get value(){const r=this.dep.track();return refreshComputed(this),r&&(r.version=this.dep.version),this._value}set value(r){this.setter&&this.setter(r)}}function computed$1(n,r,g=!1){let _,x;return isFunction$2(n)?_=n:(_=n.get,x=n.set),new ComputedRefImpl(_,x,g)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(n,r=!1,g=activeWatcher){if(g){let _=cleanupMap.get(g);_||cleanupMap.set(g,_=[]),_.push(n)}}function watch$1(n,r,g=EMPTY_OBJ){const{immediate:_,deep:x,once:S,scheduler:E,augmentJob:C,call:T}=g,R=j=>x?j:isShallow(j)||x===!1||x===0?traverse(j,1):traverse(j);let A,I,B,D,N=!1,M=!1;if(isRef(n)?(I=()=>n.value,N=isShallow(n)):isReactive(n)?(I=()=>R(n),N=!0):isArray$3(n)?(M=!0,N=n.some(j=>isReactive(j)||isShallow(j)),I=()=>n.map(j=>{if(isRef(j))return j.value;if(isReactive(j))return R(j);if(isFunction$2(j))return T?T(j,2):j()})):isFunction$2(n)?r?I=T?()=>T(n,2):n:I=()=>{if(B){pauseTracking();try{B()}finally{resetTracking()}}const j=activeWatcher;activeWatcher=A;try{return T?T(n,3,[D]):n(D)}finally{activeWatcher=j}}:I=NOOP,r&&x){const j=I,z=x===!0?1/0:x;I=()=>traverse(j(),z)}const O=getCurrentScope(),L=()=>{A.stop(),O&&O.active&&remove(O.effects,A)};if(S&&r){const j=r;r=(...z)=>{j(...z),L()}}let F=M?new Array(n.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const U=j=>{if(!(!(A.flags&1)||!A.dirty&&!j))if(r){const z=A.run();if(x||N||(M?z.some((W,X)=>hasChanged(W,F[X])):hasChanged(z,F))){B&&B();const W=activeWatcher;activeWatcher=A;try{const X=[z,F===INITIAL_WATCHER_VALUE?void 0:M&&F[0]===INITIAL_WATCHER_VALUE?[]:F,D];T?T(r,3,X):r(...X),F=z}finally{activeWatcher=W}}}else A.run()};return C&&C(U),A=new ReactiveEffect(I),A.scheduler=E?()=>E(U,!1):U,D=j=>onWatcherCleanup(j,!1,A),B=A.onStop=()=>{const j=cleanupMap.get(A);if(j){if(T)T(j,4);else for(const z of j)z();cleanupMap.delete(A)}},r?_?U(!0):F=A.run():E?E(U.bind(null,!0),!0):A.run(),L.pause=A.pause.bind(A),L.resume=A.resume.bind(A),L.stop=L,L}function traverse(n,r=1/0,g){if(r<=0||!isObject$3(n)||n.__v_skip||(g=g||new Set,g.has(n)))return n;if(g.add(n),r--,isRef(n))traverse(n.value,r,g);else if(isArray$3(n))for(let _=0;_<n.length;_++)traverse(n[_],r,g);else if(isSet$1(n)||isMap$1(n))n.forEach(_=>{traverse(_,r,g)});else if(isPlainObject$3(n)){for(const _ in n)traverse(n[_],r,g);for(const _ of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,_)&&traverse(n[_],r,g)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1(n,...r){if(isWarning)return;isWarning=!0,pauseTracking();const g=stack.length?stack[stack.length-1].component:null,_=g&&g.appContext.config.warnHandler,x=getComponentTrace();if(_)callWithErrorHandling(_,g,11,[n+r.map(S=>{var E,C;return(C=(E=S.toString)==null?void 0:E.call(S))!=null?C:JSON.stringify(S)}).join(""),g&&g.proxy,x.map(({vnode:S})=>`at <${formatComponentName(g,S.type)}>`).join(`
`),x]);else{const S=[`[Vue warn]: ${n}`,...r];x.length&&S.push(`
`,...formatTrace(x)),console.warn(...S)}resetTracking(),isWarning=!1}function getComponentTrace(){let n=stack[stack.length-1];if(!n)return[];const r=[];for(;n;){const g=r[0];g&&g.vnode===n?g.recurseCount++:r.push({vnode:n,recurseCount:0});const _=n.component&&n.component.parent;n=_&&_.vnode}return r}function formatTrace(n){const r=[];return n.forEach((g,_)=>{r.push(..._===0?[]:[`
`],...formatTraceEntry(g))}),r}function formatTraceEntry({vnode:n,recurseCount:r}){const g=r>0?`... (${r} recursive calls)`:"",_=n.component?n.component.parent==null:!1,x=` at <${formatComponentName(n.component,n.type,_)}`,S=">"+g;return n.props?[x,...formatProps(n.props),S]:[x+S]}function formatProps(n){const r=[],g=Object.keys(n);return g.slice(0,3).forEach(_=>{r.push(...formatProp(_,n[_]))}),g.length>3&&r.push(" ..."),r}function formatProp(n,r,g){return isString$2(r)?(r=JSON.stringify(r),g?r:[`${n}=${r}`]):typeof r=="number"||typeof r=="boolean"||r==null?g?r:[`${n}=${r}`]:isRef(r)?(r=formatProp(n,toRaw(r.value),!0),g?r:[`${n}=Ref<`,r,">"]):isFunction$2(r)?[`${n}=fn${r.name?`<${r.name}>`:""}`]:(r=toRaw(r),g?r:[`${n}=`,r])}function callWithErrorHandling(n,r,g,_){try{return _?n(..._):n()}catch(x){handleError(x,r,g)}}function callWithAsyncErrorHandling(n,r,g,_){if(isFunction$2(n)){const x=callWithErrorHandling(n,r,g,_);return x&&isPromise$7(x)&&x.catch(S=>{handleError(S,r,g)}),x}if(isArray$3(n)){const x=[];for(let S=0;S<n.length;S++)x.push(callWithAsyncErrorHandling(n[S],r,g,_));return x}}function handleError(n,r,g,_=!0){const x=r?r.vnode:null,{errorHandler:S,throwUnhandledErrorInProduction:E}=r&&r.appContext.config||EMPTY_OBJ;if(r){let C=r.parent;const T=r.proxy,R=`https://vuejs.org/error-reference/#runtime-${g}`;for(;C;){const A=C.ec;if(A){for(let I=0;I<A.length;I++)if(A[I](n,T,R)===!1)return}C=C.parent}if(S){pauseTracking(),callWithErrorHandling(S,null,10,[n,T,R]),resetTracking();return}}logError(n,g,x,_,E)}function logError(n,r,g,_=!0,x=!1){if(x)throw n;console.error(n)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick$1(n){const r=currentFlushPromise||resolvedPromise;return n?r.then(this?n.bind(this):n):r}function findInsertionIndex$1(n){let r=flushIndex+1,g=queue.length;for(;r<g;){const _=r+g>>>1,x=queue[_],S=getId(x);S<n||S===n&&x.flags&2?r=_+1:g=_}return r}function queueJob(n){if(!(n.flags&1)){const r=getId(n),g=queue[queue.length-1];!g||!(n.flags&2)&&r>=getId(g)?queue.push(n):queue.splice(findInsertionIndex$1(r),0,n),n.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(n){isArray$3(n)?pendingPostFlushCbs.push(...n):activePostFlushCbs&&n.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,n):n.flags&1||(pendingPostFlushCbs.push(n),n.flags|=1),queueFlush()}function flushPreFlushCbs(n,r,g=flushIndex+1){for(;g<queue.length;g++){const _=queue[g];if(_&&_.flags&2){if(n&&_.id!==n.uid)continue;queue.splice(g,1),g--,_.flags&4&&(_.flags&=-2),_(),_.flags&4||(_.flags&=-2)}}}function flushPostFlushCbs(n){if(pendingPostFlushCbs.length){const r=[...new Set(pendingPostFlushCbs)].sort((g,_)=>getId(g)-getId(_));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...r);return}for(activePostFlushCbs=r,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const g=activePostFlushCbs[postFlushIndex];g.flags&4&&(g.flags&=-2),g.flags&8||g(),g.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=n=>n.id==null?n.flags&2?-1:1/0:n.id;function flushJobs(n){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&!(r.flags&8)&&(r.flags&4&&(r.flags&=-2),callWithErrorHandling(r,r.i,r.i?15:14),r.flags&4||(r.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const r=queue[flushIndex];r&&(r.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(n){const r=currentRenderingInstance;return currentRenderingInstance=n,currentScopeId=n&&n.type.__scopeId||null,r}function withCtx(n,r=currentRenderingInstance,g){if(!r||n._n)return n;const _=(...x)=>{_._d&&setBlockTracking(-1);const S=setCurrentRenderingInstance(r);let E;try{E=n(...x)}finally{setCurrentRenderingInstance(S),_._d&&setBlockTracking(1)}return E};return _._n=!0,_._c=!0,_._d=!0,_}function withDirectives(n,r){if(currentRenderingInstance===null)return n;const g=getComponentPublicInstance(currentRenderingInstance),_=n.dirs||(n.dirs=[]);for(let x=0;x<r.length;x++){let[S,E,C,T=EMPTY_OBJ]=r[x];S&&(isFunction$2(S)&&(S={mounted:S,updated:S}),S.deep&&traverse(E),_.push({dir:S,instance:g,value:E,oldValue:void 0,arg:C,modifiers:T}))}return n}function invokeDirectiveHook(n,r,g,_){const x=n.dirs,S=r&&r.dirs;for(let E=0;E<x.length;E++){const C=x[E];S&&(C.oldValue=S[E].value);let T=C.dir[_];T&&(pauseTracking(),callWithAsyncErrorHandling(T,g,8,[n.el,C,n,r]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=n=>n.__isTeleport,isTeleportDisabled=n=>n&&(n.disabled||n.disabled===""),isTeleportDeferred=n=>n&&(n.defer||n.defer===""),isTargetSVG=n=>typeof SVGElement<"u"&&n instanceof SVGElement,isTargetMathML=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,resolveTarget=(n,r)=>{const g=n&&n.to;return isString$2(g)?r?r(g):null:g},TeleportImpl={name:"Teleport",__isTeleport:!0,process(n,r,g,_,x,S,E,C,T,R){const{mc:A,pc:I,pbc:B,o:{insert:D,querySelector:N,createText:M,createComment:O}}=R,L=isTeleportDisabled(r.props);let{shapeFlag:F,children:U,dynamicChildren:j}=r;if(n==null){const z=r.el=M(""),W=r.anchor=M("");D(z,g,_),D(W,g,_);const X=(fe,xe)=>{F&16&&(x&&x.isCE&&(x.ce._teleportTarget=fe),A(U,fe,xe,x,S,E,C,T))},ie=()=>{const fe=r.target=resolveTarget(r.props,N),xe=prepareAnchor(fe,r,M,D);fe&&(E!=="svg"&&isTargetSVG(fe)?E="svg":E!=="mathml"&&isTargetMathML(fe)&&(E="mathml"),L||(X(fe,xe),updateCssVars(r,!1)))};L&&(X(g,W),updateCssVars(r,!0)),isTeleportDeferred(r.props)?queuePostRenderEffect(()=>{ie(),r.el.__isMounted=!0},S):ie()}else{if(isTeleportDeferred(r.props)&&!n.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(n,r,g,_,x,S,E,C,T,R),delete n.el.__isMounted},S);return}r.el=n.el,r.targetStart=n.targetStart;const z=r.anchor=n.anchor,W=r.target=n.target,X=r.targetAnchor=n.targetAnchor,ie=isTeleportDisabled(n.props),fe=ie?g:W,xe=ie?z:X;if(E==="svg"||isTargetSVG(W)?E="svg":(E==="mathml"||isTargetMathML(W))&&(E="mathml"),j?(B(n.dynamicChildren,j,fe,x,S,E,C),traverseStaticChildren(n,r,!0)):T||I(n,r,fe,xe,x,S,E,C,!1),L)ie?r.props&&n.props&&r.props.to!==n.props.to&&(r.props.to=n.props.to):moveTeleport(r,g,z,R,1);else if((r.props&&r.props.to)!==(n.props&&n.props.to)){const we=r.target=resolveTarget(r.props,N);we&&moveTeleport(r,we,null,R,0)}else ie&&moveTeleport(r,W,X,R,1);updateCssVars(r,L)}},remove(n,r,g,{um:_,o:{remove:x}},S){const{shapeFlag:E,children:C,anchor:T,targetStart:R,targetAnchor:A,target:I,props:B}=n;if(I&&(x(R),x(A)),S&&x(T),E&16){const D=S||!isTeleportDisabled(B);for(let N=0;N<C.length;N++){const M=C[N];_(M,r,g,D,!!M.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(n,r,g,{o:{insert:_},m:x},S=2){S===0&&_(n.targetAnchor,r,g);const{el:E,anchor:C,shapeFlag:T,children:R,props:A}=n,I=S===2;if(I&&_(E,r,g),(!I||isTeleportDisabled(A))&&T&16)for(let B=0;B<R.length;B++)x(R[B],r,g,2);I&&_(C,r,g)}function hydrateTeleport(n,r,g,_,x,S,{o:{nextSibling:E,parentNode:C,querySelector:T,insert:R,createText:A}},I){const B=r.target=resolveTarget(r.props,T);if(B){const D=isTeleportDisabled(r.props),N=B._lpa||B.firstChild;if(r.shapeFlag&16)if(D)r.anchor=I(E(n),r,C(n),g,_,x,S),r.targetStart=N,r.targetAnchor=N&&E(N);else{r.anchor=E(n);let M=N;for(;M;){if(M&&M.nodeType===8){if(M.data==="teleport start anchor")r.targetStart=M;else if(M.data==="teleport anchor"){r.targetAnchor=M,B._lpa=r.targetAnchor&&E(r.targetAnchor);break}}M=E(M)}r.targetAnchor||prepareAnchor(B,r,A,R),I(N&&E(N),r,B,g,_,x,S)}updateCssVars(r,D)}return r.anchor&&E(r.anchor)}const Teleport=TeleportImpl;function updateCssVars(n,r){const g=n.ctx;if(g&&g.ut){let _,x;for(r?(_=n.el,x=n.anchor):(_=n.targetStart,x=n.targetAnchor);_&&_!==x;)_.nodeType===1&&_.setAttribute("data-v-owner",g.uid),_=_.nextSibling;g.ut()}}function prepareAnchor(n,r,g,_){const x=r.targetStart=g(""),S=r.targetAnchor=g("");return x[TeleportEndKey]=S,n&&(_(x,n),_(S,n)),S}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{n.isMounted=!0}),onBeforeUnmount(()=>{n.isUnmounting=!0}),n}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=n=>{const r=n.subTree;return r.component?recursiveGetSubtree(r.component):r},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(n,{slots:r}){const g=getCurrentInstance$1(),_=useTransitionState();return()=>{const x=r.default&&getTransitionRawChildren(r.default(),!0);if(!x||!x.length)return;const S=findNonCommentChild(x),E=toRaw(n),{mode:C}=E;if(_.isLeaving)return emptyPlaceholder(S);const T=getInnerChild$1(S);if(!T)return emptyPlaceholder(S);let R=resolveTransitionHooks(T,E,_,g,I=>R=I);T.type!==Comment&&setTransitionHooks(T,R);let A=g.subTree&&getInnerChild$1(g.subTree);if(A&&A.type!==Comment&&!isSameVNodeType(T,A)&&recursiveGetSubtree(g).type!==Comment){let I=resolveTransitionHooks(A,E,_,g);if(setTransitionHooks(A,I),C==="out-in"&&T.type!==Comment)return _.isLeaving=!0,I.afterLeave=()=>{_.isLeaving=!1,g.job.flags&8||g.update(),delete I.afterLeave,A=void 0},emptyPlaceholder(S);C==="in-out"&&T.type!==Comment?I.delayLeave=(B,D,N)=>{const M=getLeavingNodesForType(_,A);M[String(A.key)]=A,B[leaveCbKey]=()=>{D(),B[leaveCbKey]=void 0,delete R.delayedLeave,A=void 0},R.delayedLeave=()=>{N(),delete R.delayedLeave,A=void 0}}:A=void 0}else A&&(A=void 0);return S}}};function findNonCommentChild(n){let r=n[0];if(n.length>1){for(const g of n)if(g.type!==Comment){r=g;break}}return r}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(n,r){const{leavingVNodes:g}=n;let _=g.get(r.type);return _||(_=Object.create(null),g.set(r.type,_)),_}function resolveTransitionHooks(n,r,g,_,x){const{appear:S,mode:E,persisted:C=!1,onBeforeEnter:T,onEnter:R,onAfterEnter:A,onEnterCancelled:I,onBeforeLeave:B,onLeave:D,onAfterLeave:N,onLeaveCancelled:M,onBeforeAppear:O,onAppear:L,onAfterAppear:F,onAppearCancelled:U}=r,j=String(n.key),z=getLeavingNodesForType(g,n),W=(fe,xe)=>{fe&&callWithAsyncErrorHandling(fe,_,9,xe)},X=(fe,xe)=>{const we=xe[1];W(fe,xe),isArray$3(fe)?fe.every(G=>G.length<=1)&&we():fe.length<=1&&we()},ie={mode:E,persisted:C,beforeEnter(fe){let xe=T;if(!g.isMounted)if(S)xe=O||T;else return;fe[leaveCbKey]&&fe[leaveCbKey](!0);const we=z[j];we&&isSameVNodeType(n,we)&&we.el[leaveCbKey]&&we.el[leaveCbKey](),W(xe,[fe])},enter(fe){let xe=R,we=A,G=I;if(!g.isMounted)if(S)xe=L||R,we=F||A,G=U||I;else return;let J=!1;const q=fe[enterCbKey$1]=H=>{J||(J=!0,H?W(G,[fe]):W(we,[fe]),ie.delayedLeave&&ie.delayedLeave(),fe[enterCbKey$1]=void 0)};xe?X(xe,[fe,q]):q()},leave(fe,xe){const we=String(n.key);if(fe[enterCbKey$1]&&fe[enterCbKey$1](!0),g.isUnmounting)return xe();W(B,[fe]);let G=!1;const J=fe[leaveCbKey]=q=>{G||(G=!0,xe(),q?W(M,[fe]):W(N,[fe]),fe[leaveCbKey]=void 0,z[we]===n&&delete z[we])};z[we]=n,D?X(D,[fe,J]):J()},clone(fe){const xe=resolveTransitionHooks(fe,r,g,_,x);return x&&x(xe),xe}};return ie}function emptyPlaceholder(n){if(isKeepAlive(n))return n=cloneVNode(n),n.children=null,n}function getInnerChild$1(n){if(!isKeepAlive(n))return isTeleport(n.type)&&n.children?findNonCommentChild(n.children):n;const{shapeFlag:r,children:g}=n;if(g){if(r&16)return g[0];if(r&32&&isFunction$2(g.default))return g.default()}}function setTransitionHooks(n,r){n.shapeFlag&6&&n.component?(n.transition=r,setTransitionHooks(n.component.subTree,r)):n.shapeFlag&128?(n.ssContent.transition=r.clone(n.ssContent),n.ssFallback.transition=r.clone(n.ssFallback)):n.transition=r}function getTransitionRawChildren(n,r=!1,g){let _=[],x=0;for(let S=0;S<n.length;S++){let E=n[S];const C=g==null?E.key:String(g)+String(E.key!=null?E.key:S);E.type===Fragment?(E.patchFlag&128&&x++,_=_.concat(getTransitionRawChildren(E.children,r,C))):(r||E.type!==Comment)&&_.push(C!=null?cloneVNode(E,{key:C}):E)}if(x>1)for(let S=0;S<_.length;S++)_[S].patchFlag=-2;return _}/*! #__NO_SIDE_EFFECTS__ */function defineComponent$1(n,r){return isFunction$2(n)?extend$1({name:n.name},r,{setup:n}):n}function markAsyncBoundary(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function setRef(n,r,g,_,x=!1){if(isArray$3(n)){n.forEach((N,M)=>setRef(N,r&&(isArray$3(r)?r[M]:r),g,_,x));return}if(isAsyncWrapper(_)&&!x){_.shapeFlag&512&&_.type.__asyncResolved&&_.component.subTree.component&&setRef(n,r,g,_.component.subTree);return}const S=_.shapeFlag&4?getComponentPublicInstance(_.component):_.el,E=x?null:S,{i:C,r:T}=n,R=r&&r.r,A=C.refs===EMPTY_OBJ?C.refs={}:C.refs,I=C.setupState,B=toRaw(I),D=I===EMPTY_OBJ?()=>!1:N=>hasOwn(B,N);if(R!=null&&R!==T&&(isString$2(R)?(A[R]=null,D(R)&&(I[R]=null)):isRef(R)&&(R.value=null)),isFunction$2(T))callWithErrorHandling(T,C,12,[E,A]);else{const N=isString$2(T),M=isRef(T);if(N||M){const O=()=>{if(n.f){const L=N?D(T)?I[T]:A[T]:T.value;x?isArray$3(L)&&remove(L,S):isArray$3(L)?L.includes(S)||L.push(S):N?(A[T]=[S],D(T)&&(I[T]=A[T])):(T.value=[S],n.k&&(A[n.k]=T.value))}else N?(A[T]=E,D(T)&&(I[T]=E)):M&&(T.value=E,n.k&&(A[n.k]=E))};E?(O.id=-1,queuePostRenderEffect(O,g)):O()}}}const isComment=n=>n.nodeType===8;getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;function forEachElement(n,r){if(isComment(n)&&n.data==="["){let g=1,_=n.nextSibling;for(;_;){if(_.nodeType===1){if(r(_)===!1)break}else if(isComment(_))if(_.data==="]"){if(--g===0)break}else _.data==="["&&g++;_=_.nextSibling}}else r(n)}const isAsyncWrapper=n=>!!n.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(n){isFunction$2(n)&&(n={loader:n});const{loader:r,loadingComponent:g,errorComponent:_,delay:x=200,hydrate:S,timeout:E,suspensible:C=!0,onError:T}=n;let R=null,A,I=0;const B=()=>(I++,R=null,D()),D=()=>{let N;return R||(N=R=r().catch(M=>{if(M=M instanceof Error?M:new Error(String(M)),T)return new Promise((O,L)=>{T(M,()=>O(B()),()=>L(M),I+1)});throw M}).then(M=>N!==R&&R?R:(M&&(M.__esModule||M[Symbol.toStringTag]==="Module")&&(M=M.default),A=M,M)))};return defineComponent$1({name:"AsyncComponentWrapper",__asyncLoader:D,__asyncHydrate(N,M,O){const L=S?()=>{const F=S(O,U=>forEachElement(N,U));F&&(M.bum||(M.bum=[])).push(F)}:O;A?L():D().then(()=>!M.isUnmounted&&L())},get __asyncResolved(){return A},setup(){const N=currentInstance;if(markAsyncBoundary(N),A)return()=>createInnerComp(A,N);const M=U=>{R=null,handleError(U,N,13,!_)};if(C&&N.suspense||isInSSRComponentSetup)return D().then(U=>()=>createInnerComp(U,N)).catch(U=>(M(U),()=>_?createVNode(_,{error:U}):null));const O=ref$2(!1),L=ref$2(),F=ref$2(!!x);return x&&setTimeout(()=>{F.value=!1},x),E!=null&&setTimeout(()=>{if(!O.value&&!L.value){const U=new Error(`Async component timed out after ${E}ms.`);M(U),L.value=U}},E),D().then(()=>{O.value=!0,N.parent&&isKeepAlive(N.parent.vnode)&&N.parent.update()}).catch(U=>{M(U),L.value=U}),()=>{if(O.value&&A)return createInnerComp(A,N);if(L.value&&_)return createVNode(_,{error:L.value});if(g&&!F.value)return createVNode(g)}}})}function createInnerComp(n,r){const{ref:g,props:_,children:x,ce:S}=r.vnode,E=createVNode(n,_,x);return E.ref=g,E.ce=S,delete r.vnode.ce,E}const isKeepAlive=n=>n.type.__isKeepAlive;function onActivated(n,r){registerKeepAliveHook(n,"a",r)}function onDeactivated(n,r){registerKeepAliveHook(n,"da",r)}function registerKeepAliveHook(n,r,g=currentInstance){const _=n.__wdc||(n.__wdc=()=>{let x=g;for(;x;){if(x.isDeactivated)return;x=x.parent}return n()});if(injectHook(r,_,g),g){let x=g.parent;for(;x&&x.parent;)isKeepAlive(x.parent.vnode)&&injectToKeepAliveRoot(_,r,g,x),x=x.parent}}function injectToKeepAliveRoot(n,r,g,_){const x=injectHook(r,n,_,!0);onUnmounted(()=>{remove(_[r],x)},g)}function injectHook(n,r,g=currentInstance,_=!1){if(g){const x=g[n]||(g[n]=[]),S=r.__weh||(r.__weh=(...E)=>{pauseTracking();const C=setCurrentInstance(g),T=callWithAsyncErrorHandling(r,g,n,E);return C(),resetTracking(),T});return _?x.unshift(S):x.push(S),S}}const createHook=n=>(r,g=currentInstance)=>{(!isInSSRComponentSetup||n==="sp")&&injectHook(n,(..._)=>r(..._),g)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(n,r=currentInstance){injectHook("ec",n,r)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(n,r){return resolveAsset(COMPONENTS,n,!0,r)||n}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(n){return isString$2(n)?resolveAsset(COMPONENTS,n,!1)||n:n||NULL_DYNAMIC_COMPONENT}function resolveDirective(n){return resolveAsset(DIRECTIVES,n)}function resolveAsset(n,r,g=!0,_=!1){const x=currentRenderingInstance||currentInstance;if(x){const S=x.type;if(n===COMPONENTS){const C=getComponentName(S,!1);if(C&&(C===r||C===camelize(r)||C===capitalize(camelize(r))))return S}const E=resolve$8(x[n]||S[n],r)||resolve$8(x.appContext[n],r);return!E&&_?S:E}}function resolve$8(n,r){return n&&(n[r]||n[camelize(r)]||n[capitalize(camelize(r))])}function renderList(n,r,g,_){let x;const S=g,E=isArray$3(n);if(E||isString$2(n)){const C=E&&isReactive(n);let T=!1;C&&(T=!isShallow(n),n=shallowReadArray(n)),x=new Array(n.length);for(let R=0,A=n.length;R<A;R++)x[R]=r(T?toReactive(n[R]):n[R],R,void 0,S)}else if(typeof n=="number"){x=new Array(n);for(let C=0;C<n;C++)x[C]=r(C+1,C,void 0,S)}else if(isObject$3(n))if(n[Symbol.iterator])x=Array.from(n,(C,T)=>r(C,T,void 0,S));else{const C=Object.keys(n);x=new Array(C.length);for(let T=0,R=C.length;T<R;T++){const A=C[T];x[T]=r(n[A],A,T,S)}}else x=[];return x}function createSlots(n,r){for(let g=0;g<r.length;g++){const _=r[g];if(isArray$3(_))for(let x=0;x<_.length;x++)n[_[x].name]=_[x].fn;else _&&(n[_.name]=_.key?(...x)=>{const S=_.fn(...x);return S&&(S.key=_.key),S}:_.fn)}return n}function renderSlot(n,r,g={},_,x){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return r!=="default"&&(g.name=r),openBlock(),createBlock(Fragment,null,[createVNode("slot",g,_&&_())],64);let S=n[r];S&&S._c&&(S._d=!1),openBlock();const E=S&&ensureValidVNode$1(S(g)),C=g.key||E&&E.key,T=createBlock(Fragment,{key:(C&&!isSymbol$1(C)?C:`_${r}`)+(!E&&_?"_fb":"")},E||(_?_():[]),E&&n._===1?64:-2);return!x&&T.scopeId&&(T.slotScopeIds=[T.scopeId+"-s"]),S&&S._c&&(S._d=!0),T}function ensureValidVNode$1(n){return n.some(r=>isVNode(r)?!(r.type===Comment||r.type===Fragment&&!ensureValidVNode$1(r.children)):!0)?n:null}const getPublicInstance=n=>n?isStatefulComponent(n)?getComponentPublicInstance(n):getPublicInstance(n.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>getPublicInstance(n.parent),$root:n=>getPublicInstance(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>resolveMergedOptions(n),$forceUpdate:n=>n.f||(n.f=()=>{queueJob(n.update)}),$nextTick:n=>n.n||(n.n=nextTick$1.bind(n.proxy)),$watch:n=>instanceWatch.bind(n)}),hasSetupBinding=(n,r)=>n!==EMPTY_OBJ&&!n.__isScriptSetup&&hasOwn(n,r),PublicInstanceProxyHandlers={get({_:n},r){if(r==="__v_skip")return!0;const{ctx:g,setupState:_,data:x,props:S,accessCache:E,type:C,appContext:T}=n;let R;if(r[0]!=="$"){const D=E[r];if(D!==void 0)switch(D){case 1:return _[r];case 2:return x[r];case 4:return g[r];case 3:return S[r]}else{if(hasSetupBinding(_,r))return E[r]=1,_[r];if(x!==EMPTY_OBJ&&hasOwn(x,r))return E[r]=2,x[r];if((R=n.propsOptions[0])&&hasOwn(R,r))return E[r]=3,S[r];if(g!==EMPTY_OBJ&&hasOwn(g,r))return E[r]=4,g[r];shouldCacheAccess&&(E[r]=0)}}const A=publicPropertiesMap[r];let I,B;if(A)return r==="$attrs"&&track(n.attrs,"get",""),A(n);if((I=C.__cssModules)&&(I=I[r]))return I;if(g!==EMPTY_OBJ&&hasOwn(g,r))return E[r]=4,g[r];if(B=T.config.globalProperties,hasOwn(B,r))return B[r]},set({_:n},r,g){const{data:_,setupState:x,ctx:S}=n;return hasSetupBinding(x,r)?(x[r]=g,!0):_!==EMPTY_OBJ&&hasOwn(_,r)?(_[r]=g,!0):hasOwn(n.props,r)||r[0]==="$"&&r.slice(1)in n?!1:(S[r]=g,!0)},has({_:{data:n,setupState:r,accessCache:g,ctx:_,appContext:x,propsOptions:S}},E){let C;return!!g[E]||n!==EMPTY_OBJ&&hasOwn(n,E)||hasSetupBinding(r,E)||(C=S[0])&&hasOwn(C,E)||hasOwn(_,E)||hasOwn(publicPropertiesMap,E)||hasOwn(x.config.globalProperties,E)},defineProperty(n,r,g){return g.get!=null?n._.accessCache[r]=0:hasOwn(g,"value")&&this.set(n,r,g.value,null),Reflect.defineProperty(n,r,g)}};function useSlots(){return getContext().slots}function getContext(){const n=getCurrentInstance$1();return n.setupContext||(n.setupContext=createSetupContext(n))}function normalizePropsOrEmits(n){return isArray$3(n)?n.reduce((r,g)=>(r[g]=null,r),{}):n}function mergeDefaults(n,r){const g=normalizePropsOrEmits(n);for(const _ in r){if(_.startsWith("__skip"))continue;let x=g[_];x?isArray$3(x)||isFunction$2(x)?x=g[_]={type:x,default:r[_]}:x.default=r[_]:x===null&&(x=g[_]={default:r[_]}),x&&r[`__skip_${_}`]&&(x.skipFactory=!0)}return g}let shouldCacheAccess=!0;function applyOptions(n){const r=resolveMergedOptions(n),g=n.proxy,_=n.ctx;shouldCacheAccess=!1,r.beforeCreate&&callHook$1(r.beforeCreate,n,"bc");const{data:x,computed:S,methods:E,watch:C,provide:T,inject:R,created:A,beforeMount:I,mounted:B,beforeUpdate:D,updated:N,activated:M,deactivated:O,beforeDestroy:L,beforeUnmount:F,destroyed:U,unmounted:j,render:z,renderTracked:W,renderTriggered:X,errorCaptured:ie,serverPrefetch:fe,expose:xe,inheritAttrs:we,components:G,directives:J,filters:q}=r;if(R&&resolveInjections(R,_,null),E)for(const Z in E){const ce=E[Z];isFunction$2(ce)&&(_[Z]=ce.bind(g))}if(x){const Z=x.call(g,g);isObject$3(Z)&&(n.data=reactive(Z))}if(shouldCacheAccess=!0,S)for(const Z in S){const ce=S[Z],ue=isFunction$2(ce)?ce.bind(g,g):isFunction$2(ce.get)?ce.get.bind(g,g):NOOP,se=!isFunction$2(ce)&&isFunction$2(ce.set)?ce.set.bind(g):NOOP,te=computed({get:ue,set:se});Object.defineProperty(_,Z,{enumerable:!0,configurable:!0,get:()=>te.value,set:Y=>te.value=Y})}if(C)for(const Z in C)createWatcher(C[Z],_,g,Z);if(T){const Z=isFunction$2(T)?T.call(g):T;Reflect.ownKeys(Z).forEach(ce=>{provide(ce,Z[ce])})}A&&callHook$1(A,n,"c");function ve(Z,ce){isArray$3(ce)?ce.forEach(ue=>Z(ue.bind(g))):ce&&Z(ce.bind(g))}if(ve(onBeforeMount,I),ve(onMounted,B),ve(onBeforeUpdate,D),ve(onUpdated,N),ve(onActivated,M),ve(onDeactivated,O),ve(onErrorCaptured,ie),ve(onRenderTracked,W),ve(onRenderTriggered,X),ve(onBeforeUnmount,F),ve(onUnmounted,j),ve(onServerPrefetch,fe),isArray$3(xe))if(xe.length){const Z=n.exposed||(n.exposed={});xe.forEach(ce=>{Object.defineProperty(Z,ce,{get:()=>g[ce],set:ue=>g[ce]=ue})})}else n.exposed||(n.exposed={});z&&n.render===NOOP&&(n.render=z),we!=null&&(n.inheritAttrs=we),G&&(n.components=G),J&&(n.directives=J),fe&&markAsyncBoundary(n)}function resolveInjections(n,r,g=NOOP){isArray$3(n)&&(n=normalizeInject(n));for(const _ in n){const x=n[_];let S;isObject$3(x)?"default"in x?S=inject$1(x.from||_,x.default,!0):S=inject$1(x.from||_):S=inject$1(x),isRef(S)?Object.defineProperty(r,_,{enumerable:!0,configurable:!0,get:()=>S.value,set:E=>S.value=E}):r[_]=S}}function callHook$1(n,r,g){callWithAsyncErrorHandling(isArray$3(n)?n.map(_=>_.bind(r.proxy)):n.bind(r.proxy),r,g)}function createWatcher(n,r,g,_){let x=_.includes(".")?createPathGetter(g,_):()=>g[_];if(isString$2(n)){const S=r[n];isFunction$2(S)&&watch(x,S)}else if(isFunction$2(n))watch(x,n.bind(g));else if(isObject$3(n))if(isArray$3(n))n.forEach(S=>createWatcher(S,r,g,_));else{const S=isFunction$2(n.handler)?n.handler.bind(g):r[n.handler];isFunction$2(S)&&watch(x,S,n)}}function resolveMergedOptions(n){const r=n.type,{mixins:g,extends:_}=r,{mixins:x,optionsCache:S,config:{optionMergeStrategies:E}}=n.appContext,C=S.get(r);let T;return C?T=C:!x.length&&!g&&!_?T=r:(T={},x.length&&x.forEach(R=>mergeOptions$b(T,R,E,!0)),mergeOptions$b(T,r,E)),isObject$3(r)&&S.set(r,T),T}function mergeOptions$b(n,r,g,_=!1){const{mixins:x,extends:S}=r;S&&mergeOptions$b(n,S,g,!0),x&&x.forEach(E=>mergeOptions$b(n,E,g,!0));for(const E in r)if(!(_&&E==="expose")){const C=internalOptionMergeStrats[E]||g&&g[E];n[E]=C?C(n[E],r[E]):r[E]}return n}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(n,r){return r?n?function(){return extend$1(isFunction$2(n)?n.call(this,this):n,isFunction$2(r)?r.call(this,this):r)}:r:n}function mergeInject(n,r){return mergeObjectOptions(normalizeInject(n),normalizeInject(r))}function normalizeInject(n){if(isArray$3(n)){const r={};for(let g=0;g<n.length;g++)r[n[g]]=n[g];return r}return n}function mergeAsArray(n,r){return n?[...new Set([].concat(n,r))]:r}function mergeObjectOptions(n,r){return n?extend$1(Object.create(null),n,r):r}function mergeEmitsOrPropsOptions(n,r){return n?isArray$3(n)&&isArray$3(r)?[...new Set([...n,...r])]:extend$1(Object.create(null),normalizePropsOrEmits(n),normalizePropsOrEmits(r??{})):r}function mergeWatchOptions(n,r){if(!n)return r;if(!r)return n;const g=extend$1(Object.create(null),n);for(const _ in r)g[_]=mergeAsArray(n[_],r[_]);return g}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(n,r){return function(_,x=null){isFunction$2(_)||(_=extend$1({},_)),x!=null&&!isObject$3(x)&&(x=null);const S=createAppContext(),E=new WeakSet,C=[];let T=!1;const R=S.app={_uid:uid$1++,_component:_,_props:x,_container:null,_context:S,_instance:null,version:version$4,get config(){return S.config},set config(A){},use(A,...I){return E.has(A)||(A&&isFunction$2(A.install)?(E.add(A),A.install(R,...I)):isFunction$2(A)&&(E.add(A),A(R,...I))),R},mixin(A){return S.mixins.includes(A)||S.mixins.push(A),R},component(A,I){return I?(S.components[A]=I,R):S.components[A]},directive(A,I){return I?(S.directives[A]=I,R):S.directives[A]},mount(A,I,B){if(!T){const D=R._ceVNode||createVNode(_,x);return D.appContext=S,B===!0?B="svg":B===!1&&(B=void 0),I&&r?r(D,A):n(D,A,B),T=!0,R._container=A,A.__vue_app__=R,getComponentPublicInstance(D.component)}},onUnmount(A){C.push(A)},unmount(){T&&(callWithAsyncErrorHandling(C,R._instance,16),n(null,R._container),delete R._container.__vue_app__)},provide(A,I){return S.provides[A]=I,R},runWithContext(A){const I=currentApp;currentApp=R;try{return A()}finally{currentApp=I}}};return R}}let currentApp=null;function provide(n,r){if(currentInstance){let g=currentInstance.provides;const _=currentInstance.parent&&currentInstance.parent.provides;_===g&&(g=currentInstance.provides=Object.create(_)),g[n]=r}}function inject$1(n,r,g=!1){const _=currentInstance||currentRenderingInstance;if(_||currentApp){const x=currentApp?currentApp._context.provides:_?_.parent==null?_.vnode.appContext&&_.vnode.appContext.provides:_.parent.provides:void 0;if(x&&n in x)return x[n];if(arguments.length>1)return g&&isFunction$2(r)?r.call(_&&_.proxy):r}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=n=>Object.getPrototypeOf(n)===internalObjectProto;function initProps(n,r,g,_=!1){const x={},S=createInternalObject();n.propsDefaults=Object.create(null),setFullProps(n,r,x,S);for(const E in n.propsOptions[0])E in x||(x[E]=void 0);g?n.props=_?x:shallowReactive(x):n.type.props?n.props=x:n.props=S,n.attrs=S}function updateProps(n,r,g,_){const{props:x,attrs:S,vnode:{patchFlag:E}}=n,C=toRaw(x),[T]=n.propsOptions;let R=!1;if((_||E>0)&&!(E&16)){if(E&8){const A=n.vnode.dynamicProps;for(let I=0;I<A.length;I++){let B=A[I];if(isEmitListener(n.emitsOptions,B))continue;const D=r[B];if(T)if(hasOwn(S,B))D!==S[B]&&(S[B]=D,R=!0);else{const N=camelize(B);x[N]=resolvePropValue(T,C,N,D,n,!1)}else D!==S[B]&&(S[B]=D,R=!0)}}}else{setFullProps(n,r,x,S)&&(R=!0);let A;for(const I in C)(!r||!hasOwn(r,I)&&((A=hyphenate(I))===I||!hasOwn(r,A)))&&(T?g&&(g[I]!==void 0||g[A]!==void 0)&&(x[I]=resolvePropValue(T,C,I,void 0,n,!0)):delete x[I]);if(S!==C)for(const I in S)(!r||!hasOwn(r,I))&&(delete S[I],R=!0)}R&&trigger(n.attrs,"set","")}function setFullProps(n,r,g,_){const[x,S]=n.propsOptions;let E=!1,C;if(r)for(let T in r){if(isReservedProp(T))continue;const R=r[T];let A;x&&hasOwn(x,A=camelize(T))?!S||!S.includes(A)?g[A]=R:(C||(C={}))[A]=R:isEmitListener(n.emitsOptions,T)||(!(T in _)||R!==_[T])&&(_[T]=R,E=!0)}if(S){const T=toRaw(g),R=C||EMPTY_OBJ;for(let A=0;A<S.length;A++){const I=S[A];g[I]=resolvePropValue(x,T,I,R[I],n,!hasOwn(R,I))}}return E}function resolvePropValue(n,r,g,_,x,S){const E=n[g];if(E!=null){const C=hasOwn(E,"default");if(C&&_===void 0){const T=E.default;if(E.type!==Function&&!E.skipFactory&&isFunction$2(T)){const{propsDefaults:R}=x;if(g in R)_=R[g];else{const A=setCurrentInstance(x);_=R[g]=T.call(null,r),A()}}else _=T;x.ce&&x.ce._setProp(g,_)}E[0]&&(S&&!C?_=!1:E[1]&&(_===""||_===hyphenate(g))&&(_=!0))}return _}const mixinPropsCache=new WeakMap;function normalizePropsOptions(n,r,g=!1){const _=g?mixinPropsCache:r.propsCache,x=_.get(n);if(x)return x;const S=n.props,E={},C=[];let T=!1;if(!isFunction$2(n)){const A=I=>{T=!0;const[B,D]=normalizePropsOptions(I,r,!0);extend$1(E,B),D&&C.push(...D)};!g&&r.mixins.length&&r.mixins.forEach(A),n.extends&&A(n.extends),n.mixins&&n.mixins.forEach(A)}if(!S&&!T)return isObject$3(n)&&_.set(n,EMPTY_ARR),EMPTY_ARR;if(isArray$3(S))for(let A=0;A<S.length;A++){const I=camelize(S[A]);validatePropName(I)&&(E[I]=EMPTY_OBJ)}else if(S)for(const A in S){const I=camelize(A);if(validatePropName(I)){const B=S[A],D=E[I]=isArray$3(B)||isFunction$2(B)?{type:B}:extend$1({},B),N=D.type;let M=!1,O=!0;if(isArray$3(N))for(let L=0;L<N.length;++L){const F=N[L],U=isFunction$2(F)&&F.name;if(U==="Boolean"){M=!0;break}else U==="String"&&(O=!1)}else M=isFunction$2(N)&&N.name==="Boolean";D[0]=M,D[1]=O,(M||hasOwn(D,"default"))&&C.push(I)}}const R=[E,C];return isObject$3(n)&&_.set(n,R),R}function validatePropName(n){return n[0]!=="$"&&!isReservedProp(n)}const isInternalKey=n=>n[0]==="_"||n==="$stable",normalizeSlotValue=n=>isArray$3(n)?n.map(normalizeVNode):[normalizeVNode(n)],normalizeSlot$1=(n,r,g)=>{if(r._n)return r;const _=withCtx((...x)=>normalizeSlotValue(r(...x)),g);return _._c=!1,_},normalizeObjectSlots=(n,r,g)=>{const _=n._ctx;for(const x in n){if(isInternalKey(x))continue;const S=n[x];if(isFunction$2(S))r[x]=normalizeSlot$1(x,S,_);else if(S!=null){const E=normalizeSlotValue(S);r[x]=()=>E}}},normalizeVNodeSlots=(n,r)=>{const g=normalizeSlotValue(r);n.slots.default=()=>g},assignSlots=(n,r,g)=>{for(const _ in r)(g||_!=="_")&&(n[_]=r[_])},initSlots=(n,r,g)=>{const _=n.slots=createInternalObject();if(n.vnode.shapeFlag&32){const x=r._;x?(assignSlots(_,r,g),g&&def(_,"_",x,!0)):normalizeObjectSlots(r,_)}else r&&normalizeVNodeSlots(n,r)},updateSlots=(n,r,g)=>{const{vnode:_,slots:x}=n;let S=!0,E=EMPTY_OBJ;if(_.shapeFlag&32){const C=r._;C?g&&C===1?S=!1:assignSlots(x,r,g):(S=!r.$stable,normalizeObjectSlots(r,x)),E=r}else r&&(normalizeVNodeSlots(n,r),E={default:1});if(S)for(const C in x)!isInternalKey(C)&&E[C]==null&&delete x[C]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(n){return baseCreateRenderer(n)}function baseCreateRenderer(n,r){const g=getGlobalThis();g.__VUE__=!0;const{insert:_,remove:x,patchProp:S,createElement:E,createText:C,createComment:T,setText:R,setElementText:A,parentNode:I,nextSibling:B,setScopeId:D=NOOP,insertStaticContent:N}=n,M=($e,_e,Oe,Ke=null,Me=null,Le=null,ze=void 0,Je=null,Qe=!!_e.dynamicChildren)=>{if($e===_e)return;$e&&!isSameVNodeType($e,_e)&&(Ke=Ce($e),Y($e,Me,Le,!0),$e=null),_e.patchFlag===-2&&(Qe=!1,_e.dynamicChildren=null);const{type:rt,ref:wt,shapeFlag:bt}=_e;switch(rt){case Text:O($e,_e,Oe,Ke);break;case Comment:L($e,_e,Oe,Ke);break;case Static:$e==null&&F(_e,Oe,Ke,ze);break;case Fragment:G($e,_e,Oe,Ke,Me,Le,ze,Je,Qe);break;default:bt&1?z($e,_e,Oe,Ke,Me,Le,ze,Je,Qe):bt&6?J($e,_e,Oe,Ke,Me,Le,ze,Je,Qe):(bt&64||bt&128)&&rt.process($e,_e,Oe,Ke,Me,Le,ze,Je,Qe,We)}wt!=null&&Me&&setRef(wt,$e&&$e.ref,Le,_e||$e,!_e)},O=($e,_e,Oe,Ke)=>{if($e==null)_(_e.el=C(_e.children),Oe,Ke);else{const Me=_e.el=$e.el;_e.children!==$e.children&&R(Me,_e.children)}},L=($e,_e,Oe,Ke)=>{$e==null?_(_e.el=T(_e.children||""),Oe,Ke):_e.el=$e.el},F=($e,_e,Oe,Ke)=>{[$e.el,$e.anchor]=N($e.children,_e,Oe,Ke,$e.el,$e.anchor)},U=({el:$e,anchor:_e},Oe,Ke)=>{let Me;for(;$e&&$e!==_e;)Me=B($e),_($e,Oe,Ke),$e=Me;_(_e,Oe,Ke)},j=({el:$e,anchor:_e})=>{let Oe;for(;$e&&$e!==_e;)Oe=B($e),x($e),$e=Oe;x(_e)},z=($e,_e,Oe,Ke,Me,Le,ze,Je,Qe)=>{_e.type==="svg"?ze="svg":_e.type==="math"&&(ze="mathml"),$e==null?W(_e,Oe,Ke,Me,Le,ze,Je,Qe):fe($e,_e,Me,Le,ze,Je,Qe)},W=($e,_e,Oe,Ke,Me,Le,ze,Je)=>{let Qe,rt;const{props:wt,shapeFlag:bt,transition:xt,dirs:Et}=$e;if(Qe=$e.el=E($e.type,Le,wt&&wt.is,wt),bt&8?A(Qe,$e.children):bt&16&&ie($e.children,Qe,null,Ke,Me,resolveChildrenNamespace($e,Le),ze,Je),Et&&invokeDirectiveHook($e,null,Ke,"created"),X(Qe,$e,$e.scopeId,ze,Ke),wt){for(const $t in wt)$t!=="value"&&!isReservedProp($t)&&S(Qe,$t,null,wt[$t],Le,Ke);"value"in wt&&S(Qe,"value",null,wt.value,Le),(rt=wt.onVnodeBeforeMount)&&invokeVNodeHook(rt,Ke,$e)}Et&&invokeDirectiveHook($e,null,Ke,"beforeMount");const Rt=needTransition(Me,xt);Rt&&xt.beforeEnter(Qe),_(Qe,_e,Oe),((rt=wt&&wt.onVnodeMounted)||Rt||Et)&&queuePostRenderEffect(()=>{rt&&invokeVNodeHook(rt,Ke,$e),Rt&&xt.enter(Qe),Et&&invokeDirectiveHook($e,null,Ke,"mounted")},Me)},X=($e,_e,Oe,Ke,Me)=>{if(Oe&&D($e,Oe),Ke)for(let Le=0;Le<Ke.length;Le++)D($e,Ke[Le]);if(Me){let Le=Me.subTree;if(_e===Le||isSuspense(Le.type)&&(Le.ssContent===_e||Le.ssFallback===_e)){const ze=Me.vnode;X($e,ze,ze.scopeId,ze.slotScopeIds,Me.parent)}}},ie=($e,_e,Oe,Ke,Me,Le,ze,Je,Qe=0)=>{for(let rt=Qe;rt<$e.length;rt++){const wt=$e[rt]=Je?cloneIfMounted($e[rt]):normalizeVNode($e[rt]);M(null,wt,_e,Oe,Ke,Me,Le,ze,Je)}},fe=($e,_e,Oe,Ke,Me,Le,ze)=>{const Je=_e.el=$e.el;let{patchFlag:Qe,dynamicChildren:rt,dirs:wt}=_e;Qe|=$e.patchFlag&16;const bt=$e.props||EMPTY_OBJ,xt=_e.props||EMPTY_OBJ;let Et;if(Oe&&toggleRecurse(Oe,!1),(Et=xt.onVnodeBeforeUpdate)&&invokeVNodeHook(Et,Oe,_e,$e),wt&&invokeDirectiveHook(_e,$e,Oe,"beforeUpdate"),Oe&&toggleRecurse(Oe,!0),(bt.innerHTML&&xt.innerHTML==null||bt.textContent&&xt.textContent==null)&&A(Je,""),rt?xe($e.dynamicChildren,rt,Je,Oe,Ke,resolveChildrenNamespace(_e,Me),Le):ze||ce($e,_e,Je,null,Oe,Ke,resolveChildrenNamespace(_e,Me),Le,!1),Qe>0){if(Qe&16)we(Je,bt,xt,Oe,Me);else if(Qe&2&&bt.class!==xt.class&&S(Je,"class",null,xt.class,Me),Qe&4&&S(Je,"style",bt.style,xt.style,Me),Qe&8){const Rt=_e.dynamicProps;for(let $t=0;$t<Rt.length;$t++){const qt=Rt[$t],Ge=bt[qt],De=xt[qt];(De!==Ge||qt==="value")&&S(Je,qt,Ge,De,Me,Oe)}}Qe&1&&$e.children!==_e.children&&A(Je,_e.children)}else!ze&&rt==null&&we(Je,bt,xt,Oe,Me);((Et=xt.onVnodeUpdated)||wt)&&queuePostRenderEffect(()=>{Et&&invokeVNodeHook(Et,Oe,_e,$e),wt&&invokeDirectiveHook(_e,$e,Oe,"updated")},Ke)},xe=($e,_e,Oe,Ke,Me,Le,ze)=>{for(let Je=0;Je<_e.length;Je++){const Qe=$e[Je],rt=_e[Je],wt=Qe.el&&(Qe.type===Fragment||!isSameVNodeType(Qe,rt)||Qe.shapeFlag&70)?I(Qe.el):Oe;M(Qe,rt,wt,null,Ke,Me,Le,ze,!0)}},we=($e,_e,Oe,Ke,Me)=>{if(_e!==Oe){if(_e!==EMPTY_OBJ)for(const Le in _e)!isReservedProp(Le)&&!(Le in Oe)&&S($e,Le,_e[Le],null,Me,Ke);for(const Le in Oe){if(isReservedProp(Le))continue;const ze=Oe[Le],Je=_e[Le];ze!==Je&&Le!=="value"&&S($e,Le,Je,ze,Me,Ke)}"value"in Oe&&S($e,"value",_e.value,Oe.value,Me)}},G=($e,_e,Oe,Ke,Me,Le,ze,Je,Qe)=>{const rt=_e.el=$e?$e.el:C(""),wt=_e.anchor=$e?$e.anchor:C("");let{patchFlag:bt,dynamicChildren:xt,slotScopeIds:Et}=_e;Et&&(Je=Je?Je.concat(Et):Et),$e==null?(_(rt,Oe,Ke),_(wt,Oe,Ke),ie(_e.children||[],Oe,wt,Me,Le,ze,Je,Qe)):bt>0&&bt&64&&xt&&$e.dynamicChildren?(xe($e.dynamicChildren,xt,Oe,Me,Le,ze,Je),(_e.key!=null||Me&&_e===Me.subTree)&&traverseStaticChildren($e,_e,!0)):ce($e,_e,Oe,wt,Me,Le,ze,Je,Qe)},J=($e,_e,Oe,Ke,Me,Le,ze,Je,Qe)=>{_e.slotScopeIds=Je,$e==null?_e.shapeFlag&512?Me.ctx.activate(_e,Oe,Ke,ze,Qe):q(_e,Oe,Ke,Me,Le,ze,Qe):H($e,_e,Qe)},q=($e,_e,Oe,Ke,Me,Le,ze)=>{const Je=$e.component=createComponentInstance($e,Ke,Me);if(isKeepAlive($e)&&(Je.ctx.renderer=We),setupComponent(Je,!1,ze),Je.asyncDep){if(Me&&Me.registerDep(Je,ve,ze),!$e.el){const Qe=Je.subTree=createVNode(Comment);L(null,Qe,_e,Oe)}}else ve(Je,$e,_e,Oe,Me,Le,ze)},H=($e,_e,Oe)=>{const Ke=_e.component=$e.component;if(shouldUpdateComponent($e,_e,Oe))if(Ke.asyncDep&&!Ke.asyncResolved){Z(Ke,_e,Oe);return}else Ke.next=_e,Ke.update();else _e.el=$e.el,Ke.vnode=_e},ve=($e,_e,Oe,Ke,Me,Le,ze)=>{const Je=()=>{if($e.isMounted){let{next:bt,bu:xt,u:Et,parent:Rt,vnode:$t}=$e;{const Ze=locateNonHydratedAsyncRoot($e);if(Ze){bt&&(bt.el=$t.el,Z($e,bt,ze)),Ze.asyncDep.then(()=>{$e.isUnmounted||Je()});return}}let qt=bt,Ge;toggleRecurse($e,!1),bt?(bt.el=$t.el,Z($e,bt,ze)):bt=$t,xt&&invokeArrayFns(xt),(Ge=bt.props&&bt.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Ge,Rt,bt,$t),toggleRecurse($e,!0);const De=renderComponentRoot($e),Ve=$e.subTree;$e.subTree=De,M(Ve,De,I(Ve.el),Ce(Ve),$e,Me,Le),bt.el=De.el,qt===null&&updateHOCHostEl($e,De.el),Et&&queuePostRenderEffect(Et,Me),(Ge=bt.props&&bt.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Ge,Rt,bt,$t),Me)}else{let bt;const{el:xt,props:Et}=_e,{bm:Rt,m:$t,parent:qt,root:Ge,type:De}=$e,Ve=isAsyncWrapper(_e);if(toggleRecurse($e,!1),Rt&&invokeArrayFns(Rt),!Ve&&(bt=Et&&Et.onVnodeBeforeMount)&&invokeVNodeHook(bt,qt,_e),toggleRecurse($e,!0),xt&&Se){const Ze=()=>{$e.subTree=renderComponentRoot($e),Se(xt,$e.subTree,$e,Me,null)};Ve&&De.__asyncHydrate?De.__asyncHydrate(xt,$e,Ze):Ze()}else{Ge.ce&&Ge.ce._injectChildStyle(De);const Ze=$e.subTree=renderComponentRoot($e);M(null,Ze,Oe,Ke,$e,Me,Le),_e.el=Ze.el}if($t&&queuePostRenderEffect($t,Me),!Ve&&(bt=Et&&Et.onVnodeMounted)){const Ze=_e;queuePostRenderEffect(()=>invokeVNodeHook(bt,qt,Ze),Me)}(_e.shapeFlag&256||qt&&isAsyncWrapper(qt.vnode)&&qt.vnode.shapeFlag&256)&&$e.a&&queuePostRenderEffect($e.a,Me),$e.isMounted=!0,_e=Oe=Ke=null}};$e.scope.on();const Qe=$e.effect=new ReactiveEffect(Je);$e.scope.off();const rt=$e.update=Qe.run.bind(Qe),wt=$e.job=Qe.runIfDirty.bind(Qe);wt.i=$e,wt.id=$e.uid,Qe.scheduler=()=>queueJob(wt),toggleRecurse($e,!0),rt()},Z=($e,_e,Oe)=>{_e.component=$e;const Ke=$e.vnode.props;$e.vnode=_e,$e.next=null,updateProps($e,_e.props,Ke,Oe),updateSlots($e,_e.children,Oe),pauseTracking(),flushPreFlushCbs($e),resetTracking()},ce=($e,_e,Oe,Ke,Me,Le,ze,Je,Qe=!1)=>{const rt=$e&&$e.children,wt=$e?$e.shapeFlag:0,bt=_e.children,{patchFlag:xt,shapeFlag:Et}=_e;if(xt>0){if(xt&128){se(rt,bt,Oe,Ke,Me,Le,ze,Je,Qe);return}else if(xt&256){ue(rt,bt,Oe,Ke,Me,Le,ze,Je,Qe);return}}Et&8?(wt&16&&ke(rt,Me,Le),bt!==rt&&A(Oe,bt)):wt&16?Et&16?se(rt,bt,Oe,Ke,Me,Le,ze,Je,Qe):ke(rt,Me,Le,!0):(wt&8&&A(Oe,""),Et&16&&ie(bt,Oe,Ke,Me,Le,ze,Je,Qe))},ue=($e,_e,Oe,Ke,Me,Le,ze,Je,Qe)=>{$e=$e||EMPTY_ARR,_e=_e||EMPTY_ARR;const rt=$e.length,wt=_e.length,bt=Math.min(rt,wt);let xt;for(xt=0;xt<bt;xt++){const Et=_e[xt]=Qe?cloneIfMounted(_e[xt]):normalizeVNode(_e[xt]);M($e[xt],Et,Oe,null,Me,Le,ze,Je,Qe)}rt>wt?ke($e,Me,Le,!0,!1,bt):ie(_e,Oe,Ke,Me,Le,ze,Je,Qe,bt)},se=($e,_e,Oe,Ke,Me,Le,ze,Je,Qe)=>{let rt=0;const wt=_e.length;let bt=$e.length-1,xt=wt-1;for(;rt<=bt&&rt<=xt;){const Et=$e[rt],Rt=_e[rt]=Qe?cloneIfMounted(_e[rt]):normalizeVNode(_e[rt]);if(isSameVNodeType(Et,Rt))M(Et,Rt,Oe,null,Me,Le,ze,Je,Qe);else break;rt++}for(;rt<=bt&&rt<=xt;){const Et=$e[bt],Rt=_e[xt]=Qe?cloneIfMounted(_e[xt]):normalizeVNode(_e[xt]);if(isSameVNodeType(Et,Rt))M(Et,Rt,Oe,null,Me,Le,ze,Je,Qe);else break;bt--,xt--}if(rt>bt){if(rt<=xt){const Et=xt+1,Rt=Et<wt?_e[Et].el:Ke;for(;rt<=xt;)M(null,_e[rt]=Qe?cloneIfMounted(_e[rt]):normalizeVNode(_e[rt]),Oe,Rt,Me,Le,ze,Je,Qe),rt++}}else if(rt>xt)for(;rt<=bt;)Y($e[rt],Me,Le,!0),rt++;else{const Et=rt,Rt=rt,$t=new Map;for(rt=Rt;rt<=xt;rt++){const ht=_e[rt]=Qe?cloneIfMounted(_e[rt]):normalizeVNode(_e[rt]);ht.key!=null&&$t.set(ht.key,rt)}let qt,Ge=0;const De=xt-Rt+1;let Ve=!1,Ze=0;const _t=new Array(De);for(rt=0;rt<De;rt++)_t[rt]=0;for(rt=Et;rt<=bt;rt++){const ht=$e[rt];if(Ge>=De){Y(ht,Me,Le,!0);continue}let zt;if(ht.key!=null)zt=$t.get(ht.key);else for(qt=Rt;qt<=xt;qt++)if(_t[qt-Rt]===0&&isSameVNodeType(ht,_e[qt])){zt=qt;break}zt===void 0?Y(ht,Me,Le,!0):(_t[zt-Rt]=rt+1,zt>=Ze?Ze=zt:Ve=!0,M(ht,_e[zt],Oe,null,Me,Le,ze,Je,Qe),Ge++)}const ft=Ve?getSequence(_t):EMPTY_ARR;for(qt=ft.length-1,rt=De-1;rt>=0;rt--){const ht=Rt+rt,zt=_e[ht],Kt=ht+1<wt?_e[ht+1].el:Ke;_t[rt]===0?M(null,zt,Oe,Kt,Me,Le,ze,Je,Qe):Ve&&(qt<0||rt!==ft[qt]?te(zt,Oe,Kt,2):qt--)}}},te=($e,_e,Oe,Ke,Me=null)=>{const{el:Le,type:ze,transition:Je,children:Qe,shapeFlag:rt}=$e;if(rt&6){te($e.component.subTree,_e,Oe,Ke);return}if(rt&128){$e.suspense.move(_e,Oe,Ke);return}if(rt&64){ze.move($e,_e,Oe,We);return}if(ze===Fragment){_(Le,_e,Oe);for(let bt=0;bt<Qe.length;bt++)te(Qe[bt],_e,Oe,Ke);_($e.anchor,_e,Oe);return}if(ze===Static){U($e,_e,Oe);return}if(Ke!==2&&rt&1&&Je)if(Ke===0)Je.beforeEnter(Le),_(Le,_e,Oe),queuePostRenderEffect(()=>Je.enter(Le),Me);else{const{leave:bt,delayLeave:xt,afterLeave:Et}=Je,Rt=()=>_(Le,_e,Oe),$t=()=>{bt(Le,()=>{Rt(),Et&&Et()})};xt?xt(Le,Rt,$t):$t()}else _(Le,_e,Oe)},Y=($e,_e,Oe,Ke=!1,Me=!1)=>{const{type:Le,props:ze,ref:Je,children:Qe,dynamicChildren:rt,shapeFlag:wt,patchFlag:bt,dirs:xt,cacheIndex:Et}=$e;if(bt===-2&&(Me=!1),Je!=null&&setRef(Je,null,Oe,$e,!0),Et!=null&&(_e.renderCache[Et]=void 0),wt&256){_e.ctx.deactivate($e);return}const Rt=wt&1&&xt,$t=!isAsyncWrapper($e);let qt;if($t&&(qt=ze&&ze.onVnodeBeforeUnmount)&&invokeVNodeHook(qt,_e,$e),wt&6)Ie($e.component,Oe,Ke);else{if(wt&128){$e.suspense.unmount(Oe,Ke);return}Rt&&invokeDirectiveHook($e,null,_e,"beforeUnmount"),wt&64?$e.type.remove($e,_e,Oe,We,Ke):rt&&!rt.hasOnce&&(Le!==Fragment||bt>0&&bt&64)?ke(rt,_e,Oe,!1,!0):(Le===Fragment&&bt&384||!Me&&wt&16)&&ke(Qe,_e,Oe),Ke&&be($e)}($t&&(qt=ze&&ze.onVnodeUnmounted)||Rt)&&queuePostRenderEffect(()=>{qt&&invokeVNodeHook(qt,_e,$e),Rt&&invokeDirectiveHook($e,null,_e,"unmounted")},Oe)},be=$e=>{const{type:_e,el:Oe,anchor:Ke,transition:Me}=$e;if(_e===Fragment){ye(Oe,Ke);return}if(_e===Static){j($e);return}const Le=()=>{x(Oe),Me&&!Me.persisted&&Me.afterLeave&&Me.afterLeave()};if($e.shapeFlag&1&&Me&&!Me.persisted){const{leave:ze,delayLeave:Je}=Me,Qe=()=>ze(Oe,Le);Je?Je($e.el,Le,Qe):Qe()}else Le()},ye=($e,_e)=>{let Oe;for(;$e!==_e;)Oe=B($e),x($e),$e=Oe;x(_e)},Ie=($e,_e,Oe)=>{const{bum:Ke,scope:Me,job:Le,subTree:ze,um:Je,m:Qe,a:rt}=$e;invalidateMount(Qe),invalidateMount(rt),Ke&&invokeArrayFns(Ke),Me.stop(),Le&&(Le.flags|=8,Y(ze,$e,_e,Oe)),Je&&queuePostRenderEffect(Je,_e),queuePostRenderEffect(()=>{$e.isUnmounted=!0},_e),_e&&_e.pendingBranch&&!_e.isUnmounted&&$e.asyncDep&&!$e.asyncResolved&&$e.suspenseId===_e.pendingId&&(_e.deps--,_e.deps===0&&_e.resolve())},ke=($e,_e,Oe,Ke=!1,Me=!1,Le=0)=>{for(let ze=Le;ze<$e.length;ze++)Y($e[ze],_e,Oe,Ke,Me)},Ce=$e=>{if($e.shapeFlag&6)return Ce($e.component.subTree);if($e.shapeFlag&128)return $e.suspense.next();const _e=B($e.anchor||$e.el),Oe=_e&&_e[TeleportEndKey];return Oe?B(Oe):_e};let Ae=!1;const Ne=($e,_e,Oe)=>{$e==null?_e._vnode&&Y(_e._vnode,null,null,!0):M(_e._vnode||null,$e,_e,null,null,null,Oe),_e._vnode=$e,Ae||(Ae=!0,flushPreFlushCbs(),flushPostFlushCbs(),Ae=!1)},We={p:M,um:Y,m:te,r:be,mt:q,mc:ie,pc:ce,pbc:xe,n:Ce,o:n};let Be,Se;return{render:Ne,hydrate:Be,createApp:createAppAPI(Ne,Be)}}function resolveChildrenNamespace({type:n,props:r},g){return g==="svg"&&n==="foreignObject"||g==="mathml"&&n==="annotation-xml"&&r&&r.encoding&&r.encoding.includes("html")?void 0:g}function toggleRecurse({effect:n,job:r},g){g?(n.flags|=32,r.flags|=4):(n.flags&=-33,r.flags&=-5)}function needTransition(n,r){return(!n||n&&!n.pendingBranch)&&r&&!r.persisted}function traverseStaticChildren(n,r,g=!1){const _=n.children,x=r.children;if(isArray$3(_)&&isArray$3(x))for(let S=0;S<_.length;S++){const E=_[S];let C=x[S];C.shapeFlag&1&&!C.dynamicChildren&&((C.patchFlag<=0||C.patchFlag===32)&&(C=x[S]=cloneIfMounted(x[S]),C.el=E.el),!g&&C.patchFlag!==-2&&traverseStaticChildren(E,C)),C.type===Text&&(C.el=E.el)}}function getSequence(n){const r=n.slice(),g=[0];let _,x,S,E,C;const T=n.length;for(_=0;_<T;_++){const R=n[_];if(R!==0){if(x=g[g.length-1],n[x]<R){r[_]=x,g.push(_);continue}for(S=0,E=g.length-1;S<E;)C=S+E>>1,n[g[C]]<R?S=C+1:E=C;R<n[g[S]]&&(S>0&&(r[_]=g[S-1]),g[S]=_)}}for(S=g.length,E=g[S-1];S-- >0;)g[S]=E,E=r[E];return g}function locateNonHydratedAsyncRoot(n){const r=n.subTree.component;if(r)return r.asyncDep&&!r.asyncResolved?r:locateNonHydratedAsyncRoot(r)}function invalidateMount(n){if(n)for(let r=0;r<n.length;r++)n[r].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject$1(ssrContextKey);function watchEffect(n,r){return doWatch(n,null,r)}function watchSyncEffect(n,r){return doWatch(n,null,{flush:"sync"})}function watch(n,r,g){return doWatch(n,r,g)}function doWatch(n,r,g=EMPTY_OBJ){const{immediate:_,deep:x,flush:S,once:E}=g,C=extend$1({},g),T=r&&_||!r&&S!=="post";let R;if(isInSSRComponentSetup){if(S==="sync"){const D=useSSRContext();R=D.__watcherHandles||(D.__watcherHandles=[])}else if(!T){const D=()=>{};return D.stop=NOOP,D.resume=NOOP,D.pause=NOOP,D}}const A=currentInstance;C.call=(D,N,M)=>callWithAsyncErrorHandling(D,A,N,M);let I=!1;S==="post"?C.scheduler=D=>{queuePostRenderEffect(D,A&&A.suspense)}:S!=="sync"&&(I=!0,C.scheduler=(D,N)=>{N?D():queueJob(D)}),C.augmentJob=D=>{r&&(D.flags|=4),I&&(D.flags|=2,A&&(D.id=A.uid,D.i=A))};const B=watch$1(n,r,C);return isInSSRComponentSetup&&(R?R.push(B):T&&B()),B}function instanceWatch(n,r,g){const _=this.proxy,x=isString$2(n)?n.includes(".")?createPathGetter(_,n):()=>_[n]:n.bind(_,_);let S;isFunction$2(r)?S=r:(S=r.handler,g=r);const E=setCurrentInstance(this),C=doWatch(x,S.bind(_),g);return E(),C}function createPathGetter(n,r){const g=r.split(".");return()=>{let _=n;for(let x=0;x<g.length&&_;x++)_=_[g[x]];return _}}function useModel(n,r,g=EMPTY_OBJ){const _=getCurrentInstance$1(),x=camelize(r),S=hyphenate(r),E=getModelModifiers(n,x),C=customRef((T,R)=>{let A,I=EMPTY_OBJ,B;return watchSyncEffect(()=>{const D=n[x];hasChanged(A,D)&&(A=D,R())}),{get(){return T(),g.get?g.get(A):A},set(D){const N=g.set?g.set(D):D;if(!hasChanged(N,A)&&!(I!==EMPTY_OBJ&&hasChanged(D,I)))return;const M=_.vnode.props;M&&(r in M||x in M||S in M)&&(`onUpdate:${r}`in M||`onUpdate:${x}`in M||`onUpdate:${S}`in M)||(A=D,R()),_.emit(`update:${r}`,N),hasChanged(D,N)&&hasChanged(D,I)&&!hasChanged(N,B)&&R(),I=D,B=N}}});return C[Symbol.iterator]=()=>{let T=0;return{next(){return T<2?{value:T++?E||EMPTY_OBJ:C,done:!1}:{done:!0}}}},C}const getModelModifiers=(n,r)=>r==="modelValue"||r==="model-value"?n.modelModifiers:n[`${r}Modifiers`]||n[`${camelize(r)}Modifiers`]||n[`${hyphenate(r)}Modifiers`];function emit(n,r,...g){if(n.isUnmounted)return;const _=n.vnode.props||EMPTY_OBJ;let x=g;const S=r.startsWith("update:"),E=S&&getModelModifiers(_,r.slice(7));E&&(E.trim&&(x=g.map(A=>isString$2(A)?A.trim():A)),E.number&&(x=g.map(looseToNumber)));let C,T=_[C=toHandlerKey(r)]||_[C=toHandlerKey(camelize(r))];!T&&S&&(T=_[C=toHandlerKey(hyphenate(r))]),T&&callWithAsyncErrorHandling(T,n,6,x);const R=_[C+"Once"];if(R){if(!n.emitted)n.emitted={};else if(n.emitted[C])return;n.emitted[C]=!0,callWithAsyncErrorHandling(R,n,6,x)}}function normalizeEmitsOptions(n,r,g=!1){const _=r.emitsCache,x=_.get(n);if(x!==void 0)return x;const S=n.emits;let E={},C=!1;if(!isFunction$2(n)){const T=R=>{const A=normalizeEmitsOptions(R,r,!0);A&&(C=!0,extend$1(E,A))};!g&&r.mixins.length&&r.mixins.forEach(T),n.extends&&T(n.extends),n.mixins&&n.mixins.forEach(T)}return!S&&!C?(isObject$3(n)&&_.set(n,null),null):(isArray$3(S)?S.forEach(T=>E[T]=null):extend$1(E,S),isObject$3(n)&&_.set(n,E),E)}function isEmitListener(n,r){return!n||!isOn$1(r)?!1:(r=r.slice(2).replace(/Once$/,""),hasOwn(n,r[0].toLowerCase()+r.slice(1))||hasOwn(n,hyphenate(r))||hasOwn(n,r))}function markAttrsAccessed(){}function renderComponentRoot(n){const{type:r,vnode:g,proxy:_,withProxy:x,propsOptions:[S],slots:E,attrs:C,emit:T,render:R,renderCache:A,props:I,data:B,setupState:D,ctx:N,inheritAttrs:M}=n,O=setCurrentRenderingInstance(n);let L,F;try{if(g.shapeFlag&4){const j=x||_,z=j;L=normalizeVNode(R.call(z,j,A,I,D,B,N)),F=C}else{const j=r;L=normalizeVNode(j.length>1?j(I,{attrs:C,slots:E,emit:T}):j(I,null)),F=r.props?C:getFunctionalFallthrough(C)}}catch(j){blockStack.length=0,handleError(j,n,1),L=createVNode(Comment)}let U=L;if(F&&M!==!1){const j=Object.keys(F),{shapeFlag:z}=U;j.length&&z&7&&(S&&j.some(isModelListener)&&(F=filterModelListeners(F,S)),U=cloneVNode(U,F,!1,!0))}return g.dirs&&(U=cloneVNode(U,null,!1,!0),U.dirs=U.dirs?U.dirs.concat(g.dirs):g.dirs),g.transition&&setTransitionHooks(U,g.transition),L=U,setCurrentRenderingInstance(O),L}const getFunctionalFallthrough=n=>{let r;for(const g in n)(g==="class"||g==="style"||isOn$1(g))&&((r||(r={}))[g]=n[g]);return r},filterModelListeners=(n,r)=>{const g={};for(const _ in n)(!isModelListener(_)||!(_.slice(9)in r))&&(g[_]=n[_]);return g};function shouldUpdateComponent(n,r,g){const{props:_,children:x,component:S}=n,{props:E,children:C,patchFlag:T}=r,R=S.emitsOptions;if(r.dirs||r.transition)return!0;if(g&&T>=0){if(T&1024)return!0;if(T&16)return _?hasPropsChanged(_,E,R):!!E;if(T&8){const A=r.dynamicProps;for(let I=0;I<A.length;I++){const B=A[I];if(E[B]!==_[B]&&!isEmitListener(R,B))return!0}}}else return(x||C)&&(!C||!C.$stable)?!0:_===E?!1:_?E?hasPropsChanged(_,E,R):!0:!!E;return!1}function hasPropsChanged(n,r,g){const _=Object.keys(r);if(_.length!==Object.keys(n).length)return!0;for(let x=0;x<_.length;x++){const S=_[x];if(r[S]!==n[S]&&!isEmitListener(g,S))return!0}return!1}function updateHOCHostEl({vnode:n,parent:r},g){for(;r;){const _=r.subTree;if(_.suspense&&_.suspense.activeBranch===n&&(_.el=n.el),_===n)(n=r.vnode).el=g,r=r.parent;else break}}const isSuspense=n=>n.__isSuspense;function queueEffectWithSuspense(n,r){r&&r.pendingBranch?isArray$3(n)?r.effects.push(...n):r.effects.push(n):queuePostFlushCb(n)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(n=!1){blockStack.push(currentBlock=n?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(n,r=!1){isBlockTreeEnabled+=n,n<0&&currentBlock&&r&&(currentBlock.hasOnce=!0)}function setupBlock(n){return n.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(n),n}function createElementBlock(n,r,g,_,x,S){return setupBlock(createBaseVNode(n,r,g,_,x,S,!0))}function createBlock(n,r,g,_,x){return setupBlock(createVNode(n,r,g,_,x,!0))}function isVNode(n){return n?n.__v_isVNode===!0:!1}function isSameVNodeType(n,r){return n.type===r.type&&n.key===r.key}const normalizeKey=({key:n})=>n??null,normalizeRef=({ref:n,ref_key:r,ref_for:g})=>(typeof n=="number"&&(n=""+n),n!=null?isString$2(n)||isRef(n)||isFunction$2(n)?{i:currentRenderingInstance,r:n,k:r,f:!!g}:n:null);function createBaseVNode(n,r=null,g=null,_=0,x=null,S=n===Fragment?0:1,E=!1,C=!1){const T={__v_isVNode:!0,__v_skip:!0,type:n,props:r,key:r&&normalizeKey(r),ref:r&&normalizeRef(r),scopeId:currentScopeId,slotScopeIds:null,children:g,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:S,patchFlag:_,dynamicProps:x,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return C?(normalizeChildren(T,g),S&128&&n.normalize(T)):g&&(T.shapeFlag|=isString$2(g)?8:16),isBlockTreeEnabled>0&&!E&&currentBlock&&(T.patchFlag>0||S&6)&&T.patchFlag!==32&&currentBlock.push(T),T}const createVNode=_createVNode;function _createVNode(n,r=null,g=null,_=0,x=null,S=!1){if((!n||n===NULL_DYNAMIC_COMPONENT)&&(n=Comment),isVNode(n)){const C=cloneVNode(n,r,!0);return g&&normalizeChildren(C,g),isBlockTreeEnabled>0&&!S&&currentBlock&&(C.shapeFlag&6?currentBlock[currentBlock.indexOf(n)]=C:currentBlock.push(C)),C.patchFlag=-2,C}if(isClassComponent(n)&&(n=n.__vccOpts),r){r=guardReactiveProps(r);let{class:C,style:T}=r;C&&!isString$2(C)&&(r.class=normalizeClass(C)),isObject$3(T)&&(isProxy(T)&&!isArray$3(T)&&(T=extend$1({},T)),r.style=normalizeStyle(T))}const E=isString$2(n)?1:isSuspense(n)?128:isTeleport(n)?64:isObject$3(n)?4:isFunction$2(n)?2:0;return createBaseVNode(n,r,g,_,x,E,S,!0)}function guardReactiveProps(n){return n?isProxy(n)||isInternalObject(n)?extend$1({},n):n:null}function cloneVNode(n,r,g=!1,_=!1){const{props:x,ref:S,patchFlag:E,children:C,transition:T}=n,R=r?mergeProps(x||{},r):x,A={__v_isVNode:!0,__v_skip:!0,type:n.type,props:R,key:R&&normalizeKey(R),ref:r&&r.ref?g&&S?isArray$3(S)?S.concat(normalizeRef(r)):[S,normalizeRef(r)]:normalizeRef(r):S,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:C,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:r&&n.type!==Fragment?E===-1?16:E|16:E,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:T,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&cloneVNode(n.ssContent),ssFallback:n.ssFallback&&cloneVNode(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return T&&_&&setTransitionHooks(A,T.clone(A)),A}function createTextVNode(n=" ",r=0){return createVNode(Text,null,n,r)}function createCommentVNode(n="",r=!1){return r?(openBlock(),createBlock(Comment,null,n)):createVNode(Comment,null,n)}function normalizeVNode(n){return n==null||typeof n=="boolean"?createVNode(Comment):isArray$3(n)?createVNode(Fragment,null,n.slice()):isVNode(n)?cloneIfMounted(n):createVNode(Text,null,String(n))}function cloneIfMounted(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:cloneVNode(n)}function normalizeChildren(n,r){let g=0;const{shapeFlag:_}=n;if(r==null)r=null;else if(isArray$3(r))g=16;else if(typeof r=="object")if(_&65){const x=r.default;x&&(x._c&&(x._d=!1),normalizeChildren(n,x()),x._c&&(x._d=!0));return}else{g=32;const x=r._;!x&&!isInternalObject(r)?r._ctx=currentRenderingInstance:x===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?r._=1:(r._=2,n.patchFlag|=1024))}else isFunction$2(r)?(r={default:r,_ctx:currentRenderingInstance},g=32):(r=String(r),_&64?(g=16,r=[createTextVNode(r)]):g=8);n.children=r,n.shapeFlag|=g}function mergeProps(...n){const r={};for(let g=0;g<n.length;g++){const _=n[g];for(const x in _)if(x==="class")r.class!==_.class&&(r.class=normalizeClass([r.class,_.class]));else if(x==="style")r.style=normalizeStyle([r.style,_.style]);else if(isOn$1(x)){const S=r[x],E=_[x];E&&S!==E&&!(isArray$3(S)&&S.includes(E))&&(r[x]=S?[].concat(S,E):E)}else x!==""&&(r[x]=_[x])}return r}function invokeVNodeHook(n,r,g,_=null){callWithAsyncErrorHandling(n,r,7,[g,_])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(n,r,g){const _=n.type,x=(r?r.appContext:n.appContext)||emptyAppContext,S={uid:uid++,vnode:n,type:_,parent:r,appContext:x,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:r?r.provides:Object.create(x.provides),ids:r?r.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(_,x),emitsOptions:normalizeEmitsOptions(_,x),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:_.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:g,suspenseId:g?g.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return S.ctx={_:S},S.root=r?r.root:S,S.emit=emit.bind(null,S),n.ce&&n.ce(S),S}let currentInstance=null;const getCurrentInstance$1=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const n=getGlobalThis(),r=(g,_)=>{let x;return(x=n[g])||(x=n[g]=[]),x.push(_),S=>{x.length>1?x.forEach(E=>E(S)):x[0](S)}};internalSetCurrentInstance=r("__VUE_INSTANCE_SETTERS__",g=>currentInstance=g),setInSSRSetupState=r("__VUE_SSR_SETTERS__",g=>isInSSRComponentSetup=g)}const setCurrentInstance=n=>{const r=currentInstance;return internalSetCurrentInstance(n),n.scope.on(),()=>{n.scope.off(),internalSetCurrentInstance(r)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(n){return n.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(n,r=!1,g=!1){r&&setInSSRSetupState(r);const{props:_,children:x}=n.vnode,S=isStatefulComponent(n);initProps(n,_,S,r),initSlots(n,x,g);const E=S?setupStatefulComponent(n,r):void 0;return r&&setInSSRSetupState(!1),E}function setupStatefulComponent(n,r){const g=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,PublicInstanceProxyHandlers);const{setup:_}=g;if(_){pauseTracking();const x=n.setupContext=_.length>1?createSetupContext(n):null,S=setCurrentInstance(n),E=callWithErrorHandling(_,n,0,[n.props,x]),C=isPromise$7(E);if(resetTracking(),S(),(C||n.sp)&&!isAsyncWrapper(n)&&markAsyncBoundary(n),C){if(E.then(unsetCurrentInstance,unsetCurrentInstance),r)return E.then(T=>{handleSetupResult(n,T,r)}).catch(T=>{handleError(T,n,0)});n.asyncDep=E}else handleSetupResult(n,E,r)}else finishComponentSetup(n,r)}function handleSetupResult(n,r,g){isFunction$2(r)?n.type.__ssrInlineRender?n.ssrRender=r:n.render=r:isObject$3(r)&&(n.setupState=proxyRefs(r)),finishComponentSetup(n,g)}let compile$1;function finishComponentSetup(n,r,g){const _=n.type;if(!n.render){if(!r&&compile$1&&!_.render){const x=_.template||resolveMergedOptions(n).template;if(x){const{isCustomElement:S,compilerOptions:E}=n.appContext.config,{delimiters:C,compilerOptions:T}=_,R=extend$1(extend$1({isCustomElement:S,delimiters:C},E),T);_.render=compile$1(x,R)}}n.render=_.render||NOOP}{const x=setCurrentInstance(n);pauseTracking();try{applyOptions(n)}finally{resetTracking(),x()}}}const attrsProxyHandlers={get(n,r){return track(n,"get",""),n[r]}};function createSetupContext(n){const r=g=>{n.exposed=g||{}};return{attrs:new Proxy(n.attrs,attrsProxyHandlers),slots:n.slots,emit:n.emit,expose:r}}function getComponentPublicInstance(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(proxyRefs(markRaw(n.exposed)),{get(r,g){if(g in r)return r[g];if(g in publicPropertiesMap)return publicPropertiesMap[g](n)},has(r,g){return g in r||g in publicPropertiesMap}})):n.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=n=>n.replace(classifyRE,r=>r.toUpperCase()).replace(/[-_]/g,"");function getComponentName(n,r=!0){return isFunction$2(n)?n.displayName||n.name:n.name||r&&n.__name}function formatComponentName(n,r,g=!1){let _=getComponentName(r);if(!_&&r.__file){const x=r.__file.match(/([^/\\]+)\.\w+$/);x&&(_=x[1])}if(!_&&n&&n.parent){const x=S=>{for(const E in S)if(S[E]===r)return E};_=x(n.components||n.parent.type.components)||x(n.appContext.components)}return _?classify(_):g?"App":"Anonymous"}function isClassComponent(n){return isFunction$2(n)&&"__vccOpts"in n}const computed=(n,r)=>computed$1(n,r,isInSSRComponentSetup);function h$2(n,r,g){const _=arguments.length;return _===2?isObject$3(r)&&!isArray$3(r)?isVNode(r)?createVNode(n,null,[r]):createVNode(n,r):createVNode(n,null,r):(_>3?g=Array.prototype.slice.call(arguments,2):_===3&&isVNode(g)&&(g=[g]),createVNode(n,r,g))}const version$4="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:n=>n})}catch{}const unsafeToTrustedHTML=policy?n=>policy.createHTML(n):n=>n,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(n,r,g)=>{r.insertBefore(n,g||null)},remove:n=>{const r=n.parentNode;r&&r.removeChild(n)},createElement:(n,r,g,_)=>{const x=r==="svg"?doc.createElementNS(svgNS,n):r==="mathml"?doc.createElementNS(mathmlNS,n):g?doc.createElement(n,{is:g}):doc.createElement(n);return n==="select"&&_&&_.multiple!=null&&x.setAttribute("multiple",_.multiple),x},createText:n=>doc.createTextNode(n),createComment:n=>doc.createComment(n),setText:(n,r)=>{n.nodeValue=r},setElementText:(n,r)=>{n.textContent=r},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>doc.querySelector(n),setScopeId(n,r){n.setAttribute(r,"")},insertStaticContent(n,r,g,_,x,S){const E=g?g.previousSibling:r.lastChild;if(x&&(x===S||x.nextSibling))for(;r.insertBefore(x.cloneNode(!0),g),!(x===S||!(x=x.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(_==="svg"?`<svg>${n}</svg>`:_==="mathml"?`<math>${n}</math>`:n);const C=templateContainer.content;if(_==="svg"||_==="mathml"){const T=C.firstChild;for(;T.firstChild;)C.appendChild(T.firstChild);C.removeChild(T)}r.insertBefore(C,g)}return[E?E.nextSibling:r.firstChild,g?g.previousSibling:r.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$1({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=n=>(n.displayName="Transition",n.props=TransitionPropsValidators,n),Transition=decorate$1((n,{slots:r})=>h$2(BaseTransition,resolveTransitionProps(n),r)),callHook=(n,r=[])=>{isArray$3(n)?n.forEach(g=>g(...r)):n&&n(...r)},hasExplicitCallback=n=>n?isArray$3(n)?n.some(r=>r.length>1):n.length>1:!1;function resolveTransitionProps(n){const r={};for(const G in n)G in DOMTransitionPropsValidators||(r[G]=n[G]);if(n.css===!1)return r;const{name:g="v",type:_,duration:x,enterFromClass:S=`${g}-enter-from`,enterActiveClass:E=`${g}-enter-active`,enterToClass:C=`${g}-enter-to`,appearFromClass:T=S,appearActiveClass:R=E,appearToClass:A=C,leaveFromClass:I=`${g}-leave-from`,leaveActiveClass:B=`${g}-leave-active`,leaveToClass:D=`${g}-leave-to`}=n,N=normalizeDuration(x),M=N&&N[0],O=N&&N[1],{onBeforeEnter:L,onEnter:F,onEnterCancelled:U,onLeave:j,onLeaveCancelled:z,onBeforeAppear:W=L,onAppear:X=F,onAppearCancelled:ie=U}=r,fe=(G,J,q,H)=>{G._enterCancelled=H,removeTransitionClass(G,J?A:C),removeTransitionClass(G,J?R:E),q&&q()},xe=(G,J)=>{G._isLeaving=!1,removeTransitionClass(G,I),removeTransitionClass(G,D),removeTransitionClass(G,B),J&&J()},we=G=>(J,q)=>{const H=G?X:F,ve=()=>fe(J,G,q);callHook(H,[J,ve]),nextFrame(()=>{removeTransitionClass(J,G?T:S),addTransitionClass(J,G?A:C),hasExplicitCallback(H)||whenTransitionEnds(J,_,M,ve)})};return extend$1(r,{onBeforeEnter(G){callHook(L,[G]),addTransitionClass(G,S),addTransitionClass(G,E)},onBeforeAppear(G){callHook(W,[G]),addTransitionClass(G,T),addTransitionClass(G,R)},onEnter:we(!1),onAppear:we(!0),onLeave(G,J){G._isLeaving=!0;const q=()=>xe(G,J);addTransitionClass(G,I),G._enterCancelled?(addTransitionClass(G,B),forceReflow()):(forceReflow(),addTransitionClass(G,B)),nextFrame(()=>{G._isLeaving&&(removeTransitionClass(G,I),addTransitionClass(G,D),hasExplicitCallback(j)||whenTransitionEnds(G,_,O,q))}),callHook(j,[G,q])},onEnterCancelled(G){fe(G,!1,void 0,!0),callHook(U,[G])},onAppearCancelled(G){fe(G,!0,void 0,!0),callHook(ie,[G])},onLeaveCancelled(G){xe(G),callHook(z,[G])}})}function normalizeDuration(n){if(n==null)return null;if(isObject$3(n))return[NumberOf(n.enter),NumberOf(n.leave)];{const r=NumberOf(n);return[r,r]}}function NumberOf(n){return toNumber(n)}function addTransitionClass(n,r){r.split(/\s+/).forEach(g=>g&&n.classList.add(g)),(n[vtcKey]||(n[vtcKey]=new Set)).add(r)}function removeTransitionClass(n,r){r.split(/\s+/).forEach(_=>_&&n.classList.remove(_));const g=n[vtcKey];g&&(g.delete(r),g.size||(n[vtcKey]=void 0))}function nextFrame(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let endId=0;function whenTransitionEnds(n,r,g,_){const x=n._endId=++endId,S=()=>{x===n._endId&&_()};if(g!=null)return setTimeout(S,g);const{type:E,timeout:C,propCount:T}=getTransitionInfo(n,r);if(!E)return _();const R=E+"end";let A=0;const I=()=>{n.removeEventListener(R,B),S()},B=D=>{D.target===n&&++A>=T&&I()};setTimeout(()=>{A<T&&I()},C+1),n.addEventListener(R,B)}function getTransitionInfo(n,r){const g=window.getComputedStyle(n),_=N=>(g[N]||"").split(", "),x=_(`${TRANSITION}Delay`),S=_(`${TRANSITION}Duration`),E=getTimeout(x,S),C=_(`${ANIMATION}Delay`),T=_(`${ANIMATION}Duration`),R=getTimeout(C,T);let A=null,I=0,B=0;r===TRANSITION?E>0&&(A=TRANSITION,I=E,B=S.length):r===ANIMATION?R>0&&(A=ANIMATION,I=R,B=T.length):(I=Math.max(E,R),A=I>0?E>R?TRANSITION:ANIMATION:null,B=A?A===TRANSITION?S.length:T.length:0);const D=A===TRANSITION&&/\b(transform|all)(,|$)/.test(_(`${TRANSITION}Property`).toString());return{type:A,timeout:I,propCount:B,hasTransform:D}}function getTimeout(n,r){for(;n.length<r.length;)n=n.concat(n);return Math.max(...r.map((g,_)=>toMs(g)+toMs(n[_])))}function toMs(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(n,r,g){const _=n[vtcKey];_&&(r=(r?[r,..._]:[..._]).join(" ")),r==null?n.removeAttribute("class"):g?n.setAttribute("class",r):n.className=r}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(n,{value:r},{transition:g}){n[vShowOriginalDisplay]=n.style.display==="none"?"":n.style.display,g&&r?g.beforeEnter(n):setDisplay(n,r)},mounted(n,{value:r},{transition:g}){g&&r&&g.enter(n)},updated(n,{value:r,oldValue:g},{transition:_}){!r!=!g&&(_?r?(_.beforeEnter(n),setDisplay(n,!0),_.enter(n)):_.leave(n,()=>{setDisplay(n,!1)}):setDisplay(n,r))},beforeUnmount(n,{value:r}){setDisplay(n,r)}};function setDisplay(n,r){n.style.display=r?n[vShowOriginalDisplay]:"none",n[vShowHidden]=!r}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(n,r,g){const _=n.style,x=isString$2(g);let S=!1;if(g&&!x){if(r)if(isString$2(r))for(const E of r.split(";")){const C=E.slice(0,E.indexOf(":")).trim();g[C]==null&&setStyle(_,C,"")}else for(const E in r)g[E]==null&&setStyle(_,E,"");for(const E in g)E==="display"&&(S=!0),setStyle(_,E,g[E])}else if(x){if(r!==g){const E=_[CSS_VAR_TEXT];E&&(g+=";"+E),_.cssText=g,S=displayRE.test(g)}}else r&&n.removeAttribute("style");vShowOriginalDisplay in n&&(n[vShowOriginalDisplay]=S?_.display:"",n[vShowHidden]&&(_.display="none"))}const importantRE=/\s*!important$/;function setStyle(n,r,g){if(isArray$3(g))g.forEach(_=>setStyle(n,r,_));else if(g==null&&(g=""),r.startsWith("--"))n.setProperty(r,g);else{const _=autoPrefix(n,r);importantRE.test(g)?n.setProperty(hyphenate(_),g.replace(importantRE,""),"important"):n[_]=g}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(n,r){const g=prefixCache[r];if(g)return g;let _=camelize(r);if(_!=="filter"&&_ in n)return prefixCache[r]=_;_=capitalize(_);for(let x=0;x<prefixes.length;x++){const S=prefixes[x]+_;if(S in n)return prefixCache[r]=S}return r}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(n,r,g,_,x,S=isSpecialBooleanAttr(r)){_&&r.startsWith("xlink:")?g==null?n.removeAttributeNS(xlinkNS,r.slice(6,r.length)):n.setAttributeNS(xlinkNS,r,g):g==null||S&&!includeBooleanAttr(g)?n.removeAttribute(r):n.setAttribute(r,S?"":isSymbol$1(g)?String(g):g)}function patchDOMProp(n,r,g,_,x){if(r==="innerHTML"||r==="textContent"){g!=null&&(n[r]=r==="innerHTML"?unsafeToTrustedHTML(g):g);return}const S=n.tagName;if(r==="value"&&S!=="PROGRESS"&&!S.includes("-")){const C=S==="OPTION"?n.getAttribute("value")||"":n.value,T=g==null?n.type==="checkbox"?"on":"":String(g);(C!==T||!("_value"in n))&&(n.value=T),g==null&&n.removeAttribute(r),n._value=g;return}let E=!1;if(g===""||g==null){const C=typeof n[r];C==="boolean"?g=includeBooleanAttr(g):g==null&&C==="string"?(g="",E=!0):C==="number"&&(g=0,E=!0)}try{n[r]=g}catch{}E&&n.removeAttribute(x||r)}function addEventListener(n,r,g,_){n.addEventListener(r,g,_)}function removeEventListener(n,r,g,_){n.removeEventListener(r,g,_)}const veiKey=Symbol("_vei");function patchEvent(n,r,g,_,x=null){const S=n[veiKey]||(n[veiKey]={}),E=S[r];if(_&&E)E.value=_;else{const[C,T]=parseName(r);if(_){const R=S[r]=createInvoker(_,x);addEventListener(n,C,R,T)}else E&&(removeEventListener(n,C,E,T),S[r]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(n){let r;if(optionsModifierRE.test(n)){r={};let _;for(;_=n.match(optionsModifierRE);)n=n.slice(0,n.length-_[0].length),r[_[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):hyphenate(n.slice(2)),r]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(n,r){const g=_=>{if(!_._vts)_._vts=Date.now();else if(_._vts<=g.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(_,g.value),r,5,[_])};return g.value=n,g.attached=getNow(),g}function patchStopImmediatePropagation(n,r){if(isArray$3(r)){const g=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{g.call(n),n._stopped=!0},r.map(_=>x=>!x._stopped&&_&&_(x))}else return r}const isNativeOn=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,patchProp=(n,r,g,_,x,S)=>{const E=x==="svg";r==="class"?patchClass(n,_,E):r==="style"?patchStyle(n,g,_):isOn$1(r)?isModelListener(r)||patchEvent(n,r,g,_,S):(r[0]==="."?(r=r.slice(1),!0):r[0]==="^"?(r=r.slice(1),!1):shouldSetAsProp(n,r,_,E))?(patchDOMProp(n,r,_),!n.tagName.includes("-")&&(r==="value"||r==="checked"||r==="selected")&&patchAttr(n,r,_,E,S,r!=="value")):n._isVueCE&&(/[A-Z]/.test(r)||!isString$2(_))?patchDOMProp(n,camelize(r),_,S,r):(r==="true-value"?n._trueValue=_:r==="false-value"&&(n._falseValue=_),patchAttr(n,r,_,E))};function shouldSetAsProp(n,r,g,_){if(_)return!!(r==="innerHTML"||r==="textContent"||r in n&&isNativeOn(r)&&isFunction$2(g));if(r==="spellcheck"||r==="draggable"||r==="translate"||r==="form"||r==="list"&&n.tagName==="INPUT"||r==="type"&&n.tagName==="TEXTAREA")return!1;if(r==="width"||r==="height"){const x=n.tagName;if(x==="IMG"||x==="VIDEO"||x==="CANVAS"||x==="SOURCE")return!1}return isNativeOn(r)&&isString$2(g)?!1:r in n}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=n=>(delete n.props.mode,n),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(n,{slots:r}){const g=getCurrentInstance$1(),_=useTransitionState();let x,S;return onUpdated(()=>{if(!x.length)return;const E=n.moveClass||`${n.name||"v"}-move`;if(!hasCSSTransform(x[0].el,g.vnode.el,E))return;x.forEach(callPendingCbs),x.forEach(recordPosition);const C=x.filter(applyTranslation);forceReflow(),C.forEach(T=>{const R=T.el,A=R.style;addTransitionClass(R,E),A.transform=A.webkitTransform=A.transitionDuration="";const I=R[moveCbKey]=B=>{B&&B.target!==R||(!B||/transform$/.test(B.propertyName))&&(R.removeEventListener("transitionend",I),R[moveCbKey]=null,removeTransitionClass(R,E))};R.addEventListener("transitionend",I)})}),()=>{const E=toRaw(n),C=resolveTransitionProps(E);let T=E.tag||Fragment;if(x=[],S)for(let R=0;R<S.length;R++){const A=S[R];A.el&&A.el instanceof Element&&(x.push(A),setTransitionHooks(A,resolveTransitionHooks(A,C,_,g)),positionMap.set(A,A.el.getBoundingClientRect()))}S=r.default?getTransitionRawChildren(r.default()):[];for(let R=0;R<S.length;R++){const A=S[R];A.key!=null&&setTransitionHooks(A,resolveTransitionHooks(A,C,_,g))}return createVNode(T,null,S)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(n){const r=n.el;r[moveCbKey]&&r[moveCbKey](),r[enterCbKey]&&r[enterCbKey]()}function recordPosition(n){newPositionMap.set(n,n.el.getBoundingClientRect())}function applyTranslation(n){const r=positionMap.get(n),g=newPositionMap.get(n),_=r.left-g.left,x=r.top-g.top;if(_||x){const S=n.el.style;return S.transform=S.webkitTransform=`translate(${_}px,${x}px)`,S.transitionDuration="0s",n}}function hasCSSTransform(n,r,g){const _=n.cloneNode(),x=n[vtcKey];x&&x.forEach(C=>{C.split(/\s+/).forEach(T=>T&&_.classList.remove(T))}),g.split(/\s+/).forEach(C=>C&&_.classList.add(C)),_.style.display="none";const S=r.nodeType===1?r:r.parentNode;S.appendChild(_);const{hasTransform:E}=getTransitionInfo(_);return S.removeChild(_),E}const getModelAssigner=n=>{const r=n.props["onUpdate:modelValue"]||!1;return isArray$3(r)?g=>invokeArrayFns(r,g):r};function onCompositionStart(n){n.target.composing=!0}function onCompositionEnd(n){const r=n.target;r.composing&&(r.composing=!1,r.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(n,{modifiers:{lazy:r,trim:g,number:_}},x){n[assignKey]=getModelAssigner(x);const S=_||x.props&&x.props.type==="number";addEventListener(n,r?"change":"input",E=>{if(E.target.composing)return;let C=n.value;g&&(C=C.trim()),S&&(C=looseToNumber(C)),n[assignKey](C)}),g&&addEventListener(n,"change",()=>{n.value=n.value.trim()}),r||(addEventListener(n,"compositionstart",onCompositionStart),addEventListener(n,"compositionend",onCompositionEnd),addEventListener(n,"change",onCompositionEnd))},mounted(n,{value:r}){n.value=r??""},beforeUpdate(n,{value:r,oldValue:g,modifiers:{lazy:_,trim:x,number:S}},E){if(n[assignKey]=getModelAssigner(E),n.composing)return;const C=(S||n.type==="number")&&!/^0\d/.test(n.value)?looseToNumber(n.value):n.value,T=r??"";C!==T&&(document.activeElement===n&&n.type!=="range"&&(_&&r===g||x&&n.value.trim()===T)||(n.value=T))}},systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,r)=>systemModifiers.some(g=>n[`${g}Key`]&&!r.includes(g))},withModifiers=(n,r)=>{const g=n._withMods||(n._withMods={}),_=r.join(".");return g[_]||(g[_]=(x,...S)=>{for(let E=0;E<r.length;E++){const C=modifierGuards[r[E]];if(C&&C(x,r))return}return n(x,...S)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(n,r)=>{const g=n._withKeys||(n._withKeys={}),_=r.join(".");return g[_]||(g[_]=x=>{if(!("key"in x))return;const S=hyphenate(x.key);if(r.some(E=>E===S||keyNames[E]===S))return n(x)})},rendererOptions=extend$1({patchProp},nodeOps);let renderer$1;function ensureRenderer(){return renderer$1||(renderer$1=createRenderer(rendererOptions))}const render=(...n)=>{ensureRenderer().render(...n)},createApp=(...n)=>{const r=ensureRenderer().createApp(...n),{mount:g}=r;return r.mount=_=>{const x=normalizeContainer(_);if(!x)return;const S=r._component;!isFunction$2(S)&&!S.render&&!S.template&&(S.template=x.innerHTML),x.nodeType===1&&(x.textContent="");const E=g(x,!1,resolveRootNamespace(x));return x instanceof Element&&(x.removeAttribute("v-cloak"),x.setAttribute("data-v-app","")),E},r};function resolveRootNamespace(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function normalizeContainer(n){return isString$2(n)?document.querySelector(n):n}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function getAugmentedNamespace(n){if(n.__esModule)return n;var r=n.default;if(typeof r=="function"){var g=function _(){return this instanceof _?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};g.prototype=r.prototype}else g={};return Object.defineProperty(g,"__esModule",{value:!0}),Object.keys(n).forEach(function(_){var x=Object.getOwnPropertyDescriptor(n,_);Object.defineProperty(g,_,x.get?x:{enumerable:!0,get:function(){return n[_]}})}),g}var events$1={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events$1.exports;hasRequiredEvents=1;var n=typeof Reflect=="object"?Reflect:null,r=n&&typeof n.apply=="function"?n.apply:function(z,W,X){return Function.prototype.apply.call(z,W,X)},g;n&&typeof n.ownKeys=="function"?g=n.ownKeys:Object.getOwnPropertySymbols?g=function(z){return Object.getOwnPropertyNames(z).concat(Object.getOwnPropertySymbols(z))}:g=function(z){return Object.getOwnPropertyNames(z)};function _(j){console&&console.warn&&console.warn(j)}var x=Number.isNaN||function(z){return z!==z};function S(){S.init.call(this)}events$1.exports=S,events$1.exports.once=L,S.EventEmitter=S,S.prototype._events=void 0,S.prototype._eventsCount=0,S.prototype._maxListeners=void 0;var E=10;function C(j){if(typeof j!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof j)}Object.defineProperty(S,"defaultMaxListeners",{enumerable:!0,get:function(){return E},set:function(j){if(typeof j!="number"||j<0||x(j))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+j+".");E=j}}),S.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},S.prototype.setMaxListeners=function(z){if(typeof z!="number"||z<0||x(z))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+z+".");return this._maxListeners=z,this};function T(j){return j._maxListeners===void 0?S.defaultMaxListeners:j._maxListeners}S.prototype.getMaxListeners=function(){return T(this)},S.prototype.emit=function(z){for(var W=[],X=1;X<arguments.length;X++)W.push(arguments[X]);var ie=z==="error",fe=this._events;if(fe!==void 0)ie=ie&&fe.error===void 0;else if(!ie)return!1;if(ie){var xe;if(W.length>0&&(xe=W[0]),xe instanceof Error)throw xe;var we=new Error("Unhandled error."+(xe?" ("+xe.message+")":""));throw we.context=xe,we}var G=fe[z];if(G===void 0)return!1;if(typeof G=="function")r(G,this,W);else for(var J=G.length,q=N(G,J),X=0;X<J;++X)r(q[X],this,W);return!0};function R(j,z,W,X){var ie,fe,xe;if(C(W),fe=j._events,fe===void 0?(fe=j._events=Object.create(null),j._eventsCount=0):(fe.newListener!==void 0&&(j.emit("newListener",z,W.listener?W.listener:W),fe=j._events),xe=fe[z]),xe===void 0)xe=fe[z]=W,++j._eventsCount;else if(typeof xe=="function"?xe=fe[z]=X?[W,xe]:[xe,W]:X?xe.unshift(W):xe.push(W),ie=T(j),ie>0&&xe.length>ie&&!xe.warned){xe.warned=!0;var we=new Error("Possible EventEmitter memory leak detected. "+xe.length+" "+String(z)+" listeners added. Use emitter.setMaxListeners() to increase limit");we.name="MaxListenersExceededWarning",we.emitter=j,we.type=z,we.count=xe.length,_(we)}return j}S.prototype.addListener=function(z,W){return R(this,z,W,!1)},S.prototype.on=S.prototype.addListener,S.prototype.prependListener=function(z,W){return R(this,z,W,!0)};function A(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function I(j,z,W){var X={fired:!1,wrapFn:void 0,target:j,type:z,listener:W},ie=A.bind(X);return ie.listener=W,X.wrapFn=ie,ie}S.prototype.once=function(z,W){return C(W),this.on(z,I(this,z,W)),this},S.prototype.prependOnceListener=function(z,W){return C(W),this.prependListener(z,I(this,z,W)),this},S.prototype.removeListener=function(z,W){var X,ie,fe,xe,we;if(C(W),ie=this._events,ie===void 0)return this;if(X=ie[z],X===void 0)return this;if(X===W||X.listener===W)--this._eventsCount===0?this._events=Object.create(null):(delete ie[z],ie.removeListener&&this.emit("removeListener",z,X.listener||W));else if(typeof X!="function"){for(fe=-1,xe=X.length-1;xe>=0;xe--)if(X[xe]===W||X[xe].listener===W){we=X[xe].listener,fe=xe;break}if(fe<0)return this;fe===0?X.shift():M(X,fe),X.length===1&&(ie[z]=X[0]),ie.removeListener!==void 0&&this.emit("removeListener",z,we||W)}return this},S.prototype.off=S.prototype.removeListener,S.prototype.removeAllListeners=function(z){var W,X,ie;if(X=this._events,X===void 0)return this;if(X.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):X[z]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete X[z]),this;if(arguments.length===0){var fe=Object.keys(X),xe;for(ie=0;ie<fe.length;++ie)xe=fe[ie],xe!=="removeListener"&&this.removeAllListeners(xe);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(W=X[z],typeof W=="function")this.removeListener(z,W);else if(W!==void 0)for(ie=W.length-1;ie>=0;ie--)this.removeListener(z,W[ie]);return this};function B(j,z,W){var X=j._events;if(X===void 0)return[];var ie=X[z];return ie===void 0?[]:typeof ie=="function"?W?[ie.listener||ie]:[ie]:W?O(ie):N(ie,ie.length)}S.prototype.listeners=function(z){return B(this,z,!0)},S.prototype.rawListeners=function(z){return B(this,z,!1)},S.listenerCount=function(j,z){return typeof j.listenerCount=="function"?j.listenerCount(z):D.call(j,z)},S.prototype.listenerCount=D;function D(j){var z=this._events;if(z!==void 0){var W=z[j];if(typeof W=="function")return 1;if(W!==void 0)return W.length}return 0}S.prototype.eventNames=function(){return this._eventsCount>0?g(this._events):[]};function N(j,z){for(var W=new Array(z),X=0;X<z;++X)W[X]=j[X];return W}function M(j,z){for(;z+1<j.length;z++)j[z]=j[z+1];j.pop()}function O(j){for(var z=new Array(j.length),W=0;W<z.length;++W)z[W]=j[W].listener||j[W];return z}function L(j,z){return new Promise(function(W,X){function ie(xe){j.removeListener(z,fe),X(xe)}function fe(){typeof j.removeListener=="function"&&j.removeListener("error",ie),W([].slice.call(arguments))}U(j,z,fe,{once:!0}),z!=="error"&&F(j,ie,{once:!0})})}function F(j,z,W){typeof j.on=="function"&&U(j,"error",z,W)}function U(j,z,W,X){if(typeof j.on=="function")X.once?j.once(z,W):j.on(z,W);else if(typeof j.addEventListener=="function")j.addEventListener(z,function ie(fe){X.once&&j.removeEventListener(z,ie),W(fe)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof j)}return events$1.exports}var eventsExports=requireEvents();const EventEmitter$1=getDefaultExportFromCjs(eventsExports);var eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(n){var r=Object.prototype.hasOwnProperty,g="~";function _(){}Object.create&&(_.prototype=Object.create(null),new _().__proto__||(g=!1));function x(T,R,A){this.fn=T,this.context=R,this.once=A||!1}function S(T,R,A,I,B){if(typeof A!="function")throw new TypeError("The listener must be a function");var D=new x(A,I||T,B),N=g?g+R:R;return T._events[N]?T._events[N].fn?T._events[N]=[T._events[N],D]:T._events[N].push(D):(T._events[N]=D,T._eventsCount++),T}function E(T,R){--T._eventsCount===0?T._events=new _:delete T._events[R]}function C(){this._events=new _,this._eventsCount=0}C.prototype.eventNames=function(){var R=[],A,I;if(this._eventsCount===0)return R;for(I in A=this._events)r.call(A,I)&&R.push(g?I.slice(1):I);return Object.getOwnPropertySymbols?R.concat(Object.getOwnPropertySymbols(A)):R},C.prototype.listeners=function(R){var A=g?g+R:R,I=this._events[A];if(!I)return[];if(I.fn)return[I.fn];for(var B=0,D=I.length,N=new Array(D);B<D;B++)N[B]=I[B].fn;return N},C.prototype.listenerCount=function(R){var A=g?g+R:R,I=this._events[A];return I?I.fn?1:I.length:0},C.prototype.emit=function(R,A,I,B,D,N){var M=g?g+R:R;if(!this._events[M])return!1;var O=this._events[M],L=arguments.length,F,U;if(O.fn){switch(O.once&&this.removeListener(R,O.fn,void 0,!0),L){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,A),!0;case 3:return O.fn.call(O.context,A,I),!0;case 4:return O.fn.call(O.context,A,I,B),!0;case 5:return O.fn.call(O.context,A,I,B,D),!0;case 6:return O.fn.call(O.context,A,I,B,D,N),!0}for(U=1,F=new Array(L-1);U<L;U++)F[U-1]=arguments[U];O.fn.apply(O.context,F)}else{var j=O.length,z;for(U=0;U<j;U++)switch(O[U].once&&this.removeListener(R,O[U].fn,void 0,!0),L){case 1:O[U].fn.call(O[U].context);break;case 2:O[U].fn.call(O[U].context,A);break;case 3:O[U].fn.call(O[U].context,A,I);break;case 4:O[U].fn.call(O[U].context,A,I,B);break;default:if(!F)for(z=1,F=new Array(L-1);z<L;z++)F[z-1]=arguments[z];O[U].fn.apply(O[U].context,F)}}return!0},C.prototype.on=function(R,A,I){return S(this,R,A,I,!1)},C.prototype.once=function(R,A,I){return S(this,R,A,I,!0)},C.prototype.removeListener=function(R,A,I,B){var D=g?g+R:R;if(!this._events[D])return this;if(!A)return E(this,D),this;var N=this._events[D];if(N.fn)N.fn===A&&(!B||N.once)&&(!I||N.context===I)&&E(this,D);else{for(var M=0,O=[],L=N.length;M<L;M++)(N[M].fn!==A||B&&!N[M].once||I&&N[M].context!==I)&&O.push(N[M]);O.length?this._events[D]=O.length===1?O[0]:O:E(this,D)}return this},C.prototype.removeAllListeners=function(R){var A;return R?(A=g?g+R:R,this._events[A]&&E(this,A)):(this._events=new _,this._eventsCount=0),this},C.prototype.off=C.prototype.removeListener,C.prototype.addListener=C.prototype.on,C.prefixed=g,C.EventEmitter=C,n.exports=C}(eventemitter3)),eventemitter3.exports}var eventemitter3Exports=requireEventemitter3();const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);let TimeoutError$1=class extends Error{constructor(r){super(r),this.name="TimeoutError"}},AbortError$6=class extends Error{constructor(r){super(),this.name="AbortError",this.message=r}};const getDOMException=n=>globalThis.DOMException===void 0?new AbortError$6(n):new DOMException(n),getAbortedReason=n=>{const r=n.reason===void 0?getDOMException("This operation was aborted."):n.reason;return r instanceof Error?r:getDOMException(r)};function pTimeout(n,r){const{milliseconds:g,fallback:_,message:x,customTimers:S={setTimeout,clearTimeout}}=r;let E;const T=new Promise((R,A)=>{if(typeof g!="number"||Math.sign(g)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${g}\``);if(r.signal){const{signal:B}=r;B.aborted&&A(getAbortedReason(B));const D=()=>{A(getAbortedReason(B))};B.addEventListener("abort",D,{once:!0}),n.finally(()=>{B.removeEventListener("abort",D)})}if(g===Number.POSITIVE_INFINITY){n.then(R,A);return}const I=new TimeoutError$1;E=S.setTimeout.call(void 0,()=>{if(_){try{R(_())}catch(B){A(B)}return}typeof n.cancel=="function"&&n.cancel(),x===!1?R():x instanceof Error?A(x):(I.message=x??`Promise timed out after ${g} milliseconds`,A(I))},g),(async()=>{try{R(await n)}catch(B){A(B)}})()}).finally(()=>{T.clear()});return T.clear=()=>{S.clearTimeout.call(void 0,E),E=void 0},T}function lowerBound(n,r,g){let _=0,x=n.length;for(;x>0;){const S=Math.trunc(x/2);let E=_+S;g(n[E],r)<=0?(_=++E,x-=S+1):x=S}return _}let PriorityQueue$1=class{#e=[];enqueue(r,g){g={priority:0,...g};const _={priority:g.priority,run:r};if(this.size&&this.#e[this.size-1].priority>=g.priority){this.#e.push(_);return}const x=lowerBound(this.#e,_,(S,E)=>E.priority-S.priority);this.#e.splice(x,0,_)}dequeue(){return this.#e.shift()?.run}filter(r){return this.#e.filter(g=>g.priority===r.priority).map(g=>g.run)}get size(){return this.#e.length}};class PQueue extends EventEmitter{#e;#t;#r=0;#i;#o;#l=0;#s;#u;#n;#m;#a=0;#f;#c;#g;timeout;constructor(r){if(super(),r={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue$1,...r},!(typeof r.intervalCap=="number"&&r.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${r.intervalCap?.toString()??""}\` (${typeof r.intervalCap})`);if(r.interval===void 0||!(Number.isFinite(r.interval)&&r.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${r.interval?.toString()??""}\` (${typeof r.interval})`);this.#e=r.carryoverConcurrencyCount,this.#t=r.intervalCap===Number.POSITIVE_INFINITY||r.interval===0,this.#i=r.intervalCap,this.#o=r.interval,this.#n=new r.queueClass,this.#m=r.queueClass,this.concurrency=r.concurrency,this.timeout=r.timeout,this.#g=r.throwOnTimeout===!0,this.#c=r.autoStart===!1}get#b(){return this.#t||this.#r<this.#i}get#w(){return this.#a<this.#f}#_(){this.#a--,this.#d(),this.emit("next")}#x(){this.#y(),this.#v(),this.#u=void 0}get#S(){const r=Date.now();if(this.#s===void 0){const g=this.#l-r;if(g<0)this.#r=this.#e?this.#a:0;else return this.#u===void 0&&(this.#u=setTimeout(()=>{this.#x()},g)),!0}return!1}#d(){if(this.#n.size===0)return this.#s&&clearInterval(this.#s),this.#s=void 0,this.emit("empty"),this.#a===0&&this.emit("idle"),!1;if(!this.#c){const r=!this.#S;if(this.#b&&this.#w){const g=this.#n.dequeue();return g?(this.emit("active"),g(),r&&this.#v(),!0):!1}}return!1}#v(){this.#t||this.#s!==void 0||(this.#s=setInterval(()=>{this.#y()},this.#o),this.#l=Date.now()+this.#o)}#y(){this.#r===0&&this.#a===0&&this.#s&&(clearInterval(this.#s),this.#s=void 0),this.#r=this.#e?this.#a:0,this.#h()}#h(){for(;this.#d(););}get concurrency(){return this.#f}set concurrency(r){if(!(typeof r=="number"&&r>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${r}\` (${typeof r})`);this.#f=r,this.#h()}async#E(r){return new Promise((g,_)=>{r.addEventListener("abort",()=>{_(r.reason)},{once:!0})})}async add(r,g={}){return g={timeout:this.timeout,throwOnTimeout:this.#g,...g},new Promise((_,x)=>{this.#n.enqueue(async()=>{this.#a++,this.#r++;try{g.signal?.throwIfAborted();let S=r({signal:g.signal});g.timeout&&(S=pTimeout(Promise.resolve(S),{milliseconds:g.timeout})),g.signal&&(S=Promise.race([S,this.#E(g.signal)]));const E=await S;_(E),this.emit("completed",E)}catch(S){if(S instanceof TimeoutError$1&&!g.throwOnTimeout){_();return}x(S),this.emit("error",S)}finally{this.#_()}},g),this.emit("add"),this.#d()})}async addAll(r,g){return Promise.all(r.map(async _=>this.add(_,g)))}start(){return this.#c?(this.#c=!1,this.#h(),this):this}pause(){this.#c=!0}clear(){this.#n=new this.#m}async onEmpty(){this.#n.size!==0&&await this.#p("empty")}async onSizeLessThan(r){this.#n.size<r||await this.#p("next",()=>this.#n.size<r)}async onIdle(){this.#a===0&&this.#n.size===0||await this.#p("idle")}async#p(r,g){return new Promise(_=>{const x=()=>{g&&!g()||(this.off(r,x),_())};this.on(r,x)})}get size(){return this.#n.size}sizeBy(r){return this.#n.filter(r).length}get pending(){return this.#a}get isPaused(){return this.#c}}function pDefer(){const n={};return n.promise=new Promise((r,g)=>{n.resolve=r,n.reject=g}),n}class FixedFIFO{buffer;mask;top;btm;next;constructor(r){if(!(r>0)||r-1&r)throw new Error("Max size for a FixedFIFO should be a power of two");this.buffer=new Array(r),this.mask=r-1,this.top=0,this.btm=0,this.next=null}push(r){return this.buffer[this.top]!==void 0?!1:(this.buffer[this.top]=r,this.top=this.top+1&this.mask,!0)}shift(){const r=this.buffer[this.btm];if(r!==void 0)return this.buffer[this.btm]=void 0,this.btm=this.btm+1&this.mask,r}isEmpty(){return this.buffer[this.btm]===void 0}}class FIFO{size;hwm;head;tail;constructor(r={}){this.hwm=r.splitLimit??16,this.head=new FixedFIFO(this.hwm),this.tail=this.head,this.size=0}calculateSize(r){return r?.byteLength!=null?r.byteLength:1}push(r){if(r?.value!=null&&(this.size+=this.calculateSize(r.value)),!this.head.push(r)){const g=this.head;this.head=g.next=new FixedFIFO(2*this.head.buffer.length),this.head.push(r)}}shift(){let r=this.tail.shift();if(r===void 0&&this.tail.next!=null){const g=this.tail.next;this.tail.next=null,this.tail=g,r=this.tail.shift()}return r?.value!=null&&(this.size-=this.calculateSize(r.value)),r}isEmpty(){return this.head.isEmpty()}}let AbortError$5=class extends Error{type;code;constructor(r,g){super(r??"The operation was aborted"),this.type="aborted",this.code=g??"ABORT_ERR"}};function pushable(n={}){return _pushable(g=>{const _=g.shift();if(_==null)return{done:!0};if(_.error!=null)throw _.error;return{done:_.done===!0,value:_.value}},n)}function _pushable(n,r){r=r??{};let g=r.onEnd,_=new FIFO,x,S,E,C=pDefer();const T=async()=>{try{return _.isEmpty()?E?{done:!0}:await new Promise((O,L)=>{S=F=>{S=null,_.push(F);try{O(n(_))}catch(U){L(U)}return x}}):n(_)}finally{_.isEmpty()&&queueMicrotask(()=>{C.resolve(),C=pDefer()})}},R=O=>S!=null?S(O):(_.push(O),x),A=O=>(_=new FIFO,S!=null?S({error:O}):(_.push({error:O}),x)),I=O=>{if(E)return x;if(r?.objectMode!==!0&&O?.byteLength==null)throw new Error("objectMode was not true but tried to push non-Uint8Array value");return R({done:!1,value:O})},B=O=>E?x:(E=!0,O!=null?A(O):R({done:!0})),D=()=>(_=new FIFO,B(),{done:!0}),N=O=>(B(O),{done:!0});if(x={[Symbol.asyncIterator](){return this},next:T,return:D,throw:N,push:I,end:B,get readableLength(){return _.size},onEmpty:async O=>{const L=O?.signal;if(L?.throwIfAborted(),_.isEmpty())return;let F,U;L!=null&&(F=new Promise((j,z)=>{U=()=>{z(new AbortError$5)},L.addEventListener("abort",U)}));try{await Promise.race([C.promise,F])}finally{U!=null&&L!=null&&L?.removeEventListener("abort",U)}}},g==null)return x;const M=x;return x={[Symbol.asyncIterator](){return this},next(){return M.next()},throw(O){return M.throw(O),g!=null&&(g(O),g=void 0),{done:!0}},return(){return M.return(),g!=null&&(g(),g=void 0),{done:!0}},push:I,end(O){return M.end(O),g!=null&&(g(O),g=void 0),x},get readableLength(){return M.readableLength},onEmpty:O=>M.onEmpty(O)},x}function isAsyncIterable$f(n){return n[Symbol.asyncIterator]!=null}function merge$2(...n){const r=[];for(const g of n)isAsyncIterable$f(g)||r.push(g);return r.length===n.length?function*(){for(const g of r)yield*g}():async function*(){const g=pushable({objectMode:!0});Promise.resolve().then(async()=>{try{await Promise.all(n.map(async _=>{for await(const x of _)g.push(x)})),g.end()}catch(_){g.end(_)}}),yield*g}()}function pipe(n,...r){if(n==null)throw new Error("Empty pipeline");if(isDuplex(n)){const _=n;n=()=>_.source}else if(isIterable$1(n)||isAsyncIterable$e(n)){const _=n;n=()=>_}const g=[n,...r];if(g.length>1&&isDuplex(g[g.length-1])&&(g[g.length-1]=g[g.length-1].sink),g.length>2)for(let _=1;_<g.length-1;_++)isDuplex(g[_])&&(g[_]=duplexPipelineFn(g[_]));return rawPipe(...g)}const rawPipe=(...n)=>{let r;for(;n.length>0;)r=n.shift()(r);return r},isAsyncIterable$e=n=>n?.[Symbol.asyncIterator]!=null,isIterable$1=n=>n?.[Symbol.iterator]!=null,isDuplex=n=>n==null?!1:n.sink!=null&&n.source!=null,duplexPipelineFn=n=>r=>{const g=n.sink(r);if(g?.then!=null){const _=pushable({objectMode:!0});g.then(()=>{_.end()},E=>{_.end(E)});let x;const S=n.source;if(isAsyncIterable$e(S))x=async function*(){yield*S,_.end()};else if(isIterable$1(S))x=function*(){yield*S,_.end()};else throw new Error("Unknown duplex source type - must be Iterable or AsyncIterable");return merge$2(_,x())}return n.source};var timeBrowser,hasRequiredTimeBrowser;function requireTimeBrowser(){return hasRequiredTimeBrowser||(hasRequiredTimeBrowser=1,timeBrowser=function(){return Date.now()}),timeBrowser}var retimer_1,hasRequiredRetimer;function requireRetimer(){if(hasRequiredRetimer)return retimer_1;hasRequiredRetimer=1;const n=requireTimeBrowser();class r{constructor(x,S,E){const C=this;this._started=n(),this._rescheduled=0,this._scheduled=S,this._args=E,this._triggered=!1,this._timerWrapper=()=>{C._rescheduled>0?(C._scheduled=C._rescheduled-(n()-C._started),C._schedule(C._scheduled)):(C._triggered=!0,x.apply(null,C._args))},this._timer=setTimeout(this._timerWrapper,S)}reschedule(x){x||(x=this._scheduled);const S=n();S+x-(this._started+this._scheduled)<0?(clearTimeout(this._timer),this._schedule(x)):this._triggered?this._schedule(x):(this._started=S,this._rescheduled=x)}_schedule(x){this._triggered=!1,this._started=n(),this._rescheduled=0,this._scheduled=x,this._timer=setTimeout(this._timerWrapper,x)}clear(){clearTimeout(this._timer)}}function g(){if(typeof arguments[0]!="function")throw new Error("callback needed");if(typeof arguments[1]!="number")throw new Error("timeout needed");let _;if(arguments.length>0){_=new Array(arguments.length-2);for(var x=0;x<_.length;x++)_[x]=arguments[x+2]}return new r(arguments[0],arguments[1],_)}return retimer_1=g,retimer_1}var timeoutAbortController,hasRequiredTimeoutAbortController;function requireTimeoutAbortController(){if(hasRequiredTimeoutAbortController)return timeoutAbortController;hasRequiredTimeoutAbortController=1;const{AbortController:n}=globalThis,r=requireRetimer();class g extends n{constructor(x){super(),this._ms=x,this._timer=r(()=>this.abort(),x),Object.setPrototypeOf(this,g.prototype)}abort(){return this._timer.clear(),super.abort()}clear(){this._timer.clear()}reset(){this._timer.clear(),this._timer=r(()=>this.abort(),this._ms)}}return timeoutAbortController={TimeoutController:g},timeoutAbortController}var timeoutAbortControllerExports=requireTimeoutAbortController();const posixJoin=(...n)=>n.join("/").replace(/((?<=\/)\/+)|(^\.\/)|((?<=\/)\.\/)/g,"")||".",DefaultTimeout$1=3e4,Sync=async({ipfs:n,log:r,events:g,onSynced:_,start:x,timeout:S})=>{if(!n)throw new Error("An instance of ipfs is required.");if(!r)throw new Error("An instance of log is required.");const E=n.libp2p,C=n.libp2p.services.pubsub,T=r.id,R=posixJoin("/orbitdb/heads/",T),A=new PQueue({concurrency:1}),I=new Set;g=g||new eventsExports.EventEmitter,S=S||DefaultTimeout$1;let B=!1;const D=async W=>{const X=await r.heads();g.emit("join",W,X)},N=W=>async function*(){const X=await r.heads();for await(const{bytes:ie}of X)yield ie}(),M=W=>async X=>{for await(const ie of X){const fe=ie.subarray();fe&&_&&await _(fe)}B&&await D(W)},O=async({connection:W,stream:X})=>{const ie=String(W.remotePeer);try{I.add(ie),await pipe(X,M(ie),N,X)}catch(fe){I.delete(ie),g.emit("error",fe)}},L=async W=>{const X=async()=>{const{peerId:ie,subscriptions:fe}=W.detail,xe=String(ie),we=fe.find(G=>G.topic===T);if(we)if(we.subscribe){if(I.has(xe))return;const G=new timeoutAbortControllerExports.TimeoutController(S),{signal:J}=G;try{I.add(xe);const q=await E.dialProtocol(ie,R,{signal:J});await pipe(N,q,M(xe))}catch(q){console.error(q),I.delete(xe),q.code==="ERR_UNSUPPORTED_PROTOCOL"||g.emit("error",q)}finally{G&&G.clear()}}else I.delete(xe),g.emit("leave",xe)};A.add(X)},F=async W=>{const{topic:X,data:ie}=W.detail,fe=async()=>{try{ie&&_&&await _(ie)}catch(xe){g.emit("error",xe)}};X===T&&A.add(fe)},U=async W=>{B&&await C.publish(T,W.bytes)},j=async()=>{B&&(B=!1,await A.onIdle(),C.removeEventListener("subscription-change",L),C.removeEventListener("message",F),await E.unhandle(R),await C.unsubscribe(T),I.clear())},z=async()=>{B||(await E.handle(R,O),C.addEventListener("subscription-change",L),C.addEventListener("message",F),await C.subscribe(T),B=!0)};return x!==!1&&await z(),{add:U,stop:j,start:z,events:g,peers:I}};var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,typeof Object.create=="function"?inherits_browser.exports=function(r,g){g&&(r.super_=g,r.prototype=Object.create(g.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(r,g){if(g){r.super_=g;var _=function(){};_.prototype=g.prototype,r.prototype=new _,r.prototype.constructor=r}}),inherits_browser.exports}var lru,hasRequiredLru;function requireLru(){if(hasRequiredLru)return lru;hasRequiredLru=1;var n=requireEvents(),r=requireInherits_browser();lru=g;function g(_){if(!(this instanceof g))return new g(_);typeof _=="number"&&(_={max:_}),_||(_={}),n.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=_.max||1e3,this.maxAge=_.maxAge||0}return r(g,n.EventEmitter),Object.defineProperty(g.prototype,"keys",{get:function(){return Object.keys(this.cache)}}),g.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0},g.prototype.remove=function(_){if(typeof _!="string"&&(_=""+_),!!this.cache.hasOwnProperty(_)){var x=this.cache[_];return delete this.cache[_],this._unlink(_,x.prev,x.next),x.value}},g.prototype._unlink=function(_,x,S){this.length--,this.length===0?this.head=this.tail=null:this.head===_?(this.head=x,this.cache[this.head].next=null):this.tail===_?(this.tail=S,this.cache[this.tail].prev=null):(this.cache[x].next=S,this.cache[S].prev=x)},g.prototype.peek=function(_){if(this.cache.hasOwnProperty(_)){var x=this.cache[_];if(this._checkAge(_,x))return x.value}},g.prototype.set=function(_,x){typeof _!="string"&&(_=""+_);var S;if(this.cache.hasOwnProperty(_)){if(S=this.cache[_],S.value=x,this.maxAge&&(S.modified=Date.now()),_===this.head)return x;this._unlink(_,S.prev,S.next)}else S={value:x,modified:0,next:null,prev:null},this.maxAge&&(S.modified=Date.now()),this.cache[_]=S,this.length===this.max&&this.evict();return this.length++,S.next=null,S.prev=this.head,this.head&&(this.cache[this.head].next=_),this.head=_,this.tail||(this.tail=_),x},g.prototype._checkAge=function(_,x){return this.maxAge&&Date.now()-x.modified>this.maxAge?(this.remove(_),this.emit("evict",{key:_,value:x.value}),!1):!0},g.prototype.get=function(_){if(typeof _!="string"&&(_=""+_),!!this.cache.hasOwnProperty(_)){var x=this.cache[_];if(this._checkAge(_,x))return this.head!==_&&(_===this.tail?(this.tail=x.next,this.cache[this.tail].prev=null):this.cache[x.prev].next=x.next,this.cache[x.next].prev=x.prev,this.cache[this.head].next=_,x.prev=this.head,x.next=null,this.head=_),x.value}},g.prototype.evict=function(){if(this.tail){var _=this.tail,x=this.remove(this.tail);this.emit("evict",{key:_,value:x})}},lru}var lruExports=requireLru();const LRU=getDefaultExportFromCjs(lruExports),compareClocks=(n,r)=>{const g=n.time-r.time;return g===0&&n.id!==r.id?n.id<r.id?-1:1:g},tickClock=n=>Clock(n.id,++n.time),Clock=(n,r)=>(r=r||0,{id:n,time:r}),equals$7=(n,r)=>{if(n===r)return!0;if(n.byteLength!==r.byteLength)return!1;for(let g=0;g<n.byteLength;g++)if(n[g]!==r[g])return!1;return!0},coerce$3=n=>{if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")};function base$6(n,r){if(n.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),_=0;_<g.length;_++)g[_]=255;for(var x=0;x<n.length;x++){var S=n.charAt(x),E=S.charCodeAt(0);if(g[E]!==255)throw new TypeError(S+" is ambiguous");g[E]=x}var C=n.length,T=n.charAt(0),R=Math.log(C)/Math.log(256),A=Math.log(256)/Math.log(C);function I(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var M=0,O=0,L=0,F=N.length;L!==F&&N[L]===0;)L++,M++;for(var U=(F-L)*A+1>>>0,j=new Uint8Array(U);L!==F;){for(var z=N[L],W=0,X=U-1;(z!==0||W<O)&&X!==-1;X--,W++)z+=256*j[X]>>>0,j[X]=z%C>>>0,z=z/C>>>0;if(z!==0)throw new Error("Non-zero carry");O=W,L++}for(var ie=U-O;ie!==U&&j[ie]===0;)ie++;for(var fe=T.repeat(M);ie<U;++ie)fe+=n.charAt(j[ie]);return fe}function B(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var M=0;if(N[M]!==" "){for(var O=0,L=0;N[M]===T;)O++,M++;for(var F=(N.length-M)*R+1>>>0,U=new Uint8Array(F);N[M];){var j=g[N.charCodeAt(M)];if(j===255)return;for(var z=0,W=F-1;(j!==0||z<L)&&W!==-1;W--,z++)j+=C*U[W]>>>0,U[W]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");L=z,M++}if(N[M]!==" "){for(var X=F-L;X!==F&&U[X]===0;)X++;for(var ie=new Uint8Array(O+(F-X)),fe=O;X!==F;)ie[fe++]=U[X++];return ie}}}function D(N){var M=B(N);if(M)return M;throw new Error(`Non-${r} character`)}return{encode:I,decodeUnsafe:B,decode:D}}var src$3=base$6,_brrp__multiformats_scope_baseX$3=src$3;let Encoder$4=class{constructor(r,g,_){this.name=r,this.prefix=g,this.baseEncode=_}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},Decoder$5=class{constructor(r,g,_){if(this.name=r,this.prefix=g,g.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=g.codePointAt(0),this.baseDecode=_}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return or$6(this,r)}},ComposedDecoder$3=class{constructor(r){this.decoders=r}or(r){return or$6(this,r)}decode(r){const g=r[0],_=this.decoders[g];if(_)return _.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$6=(n,r)=>new ComposedDecoder$3({...n.decoders||{[n.prefix]:n},...r.decoders||{[r.prefix]:r}});let Codec$3=class{constructor(r,g,_,x){this.name=r,this.prefix=g,this.baseEncode=_,this.baseDecode=x,this.encoder=new Encoder$4(r,g,_),this.decoder=new Decoder$5(r,g,x)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};const from$6=({name:n,prefix:r,encode:g,decode:_})=>new Codec$3(n,r,g,_),baseX$3=({prefix:n,name:r,alphabet:g})=>{const{encode:_,decode:x}=_brrp__multiformats_scope_baseX$3(g,r);return from$6({prefix:n,name:r,encode:_,decode:S=>coerce$3(x(S))})},decode$q=(n,r,g,_)=>{const x={};for(let A=0;A<r.length;++A)x[r[A]]=A;let S=n.length;for(;n[S-1]==="=";)--S;const E=new Uint8Array(S*g/8|0);let C=0,T=0,R=0;for(let A=0;A<S;++A){const I=x[n[A]];if(I===void 0)throw new SyntaxError(`Non-${_} character`);T=T<<g|I,C+=g,C>=8&&(C-=8,E[R++]=255&T>>C)}if(C>=g||255&T<<8-C)throw new SyntaxError("Unexpected end of data");return E},encode$o=(n,r,g)=>{const _=r[r.length-1]==="=",x=(1<<g)-1;let S="",E=0,C=0;for(let T=0;T<n.length;++T)for(C=C<<8|n[T],E+=8;E>g;)E-=g,S+=r[x&C>>E];if(E&&(S+=r[x&C<<g-E]),_)for(;S.length*g&7;)S+="=";return S},rfc4648$3=({name:n,prefix:r,bitsPerChar:g,alphabet:_})=>from$6({prefix:r,name:n,encode(x){return encode$o(x,_,g)},decode(x){return decode$q(x,_,g,n)}}),base32$3=rfc4648$3({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$3({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$3({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$3({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$3({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$3({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$3({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$3({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$3({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base58btc$2=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var encode_1$3=encode$n,MSB$4=128,REST$4=127,MSBALL$2=~REST$4,INT$2=Math.pow(2,31);function encode$n(n,r,g){r=r||[],g=g||0;for(var _=g;n>=INT$2;)r[g++]=n&255|MSB$4,n/=128;for(;n&MSBALL$2;)r[g++]=n&255|MSB$4,n>>>=7;return r[g]=n|0,encode$n.bytes=g-_+1,r}var decode$p=read$4,MSB$1$3=128,REST$1$3=127;function read$4(n,_){var g=0,_=_||0,x=0,S=_,E,C=n.length;do{if(S>=C)throw read$4.bytes=0,new RangeError("Could not decode varint");E=n[S++],g+=x<28?(E&REST$1$3)<<x:(E&REST$1$3)*Math.pow(2,x),x+=7}while(E>=MSB$1$3);return read$4.bytes=S-_,g}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$4=function(n){return n<N1$3?1:n<N2$3?2:n<N3$3?3:n<N4$3?4:n<N5$3?5:n<N6$3?6:n<N7$3?7:n<N8$2?8:n<N9$2?9:10},varint$2={encode:encode_1$3,decode:decode$p,encodingLength:length$4},_brrp_varint$2=varint$2;const decode$o=(n,r=0)=>[_brrp_varint$2.decode(n,r),_brrp_varint$2.decode.bytes],encodeTo$2=(n,r,g=0)=>(_brrp_varint$2.encode(n,r,g),r),encodingLength$3=n=>_brrp_varint$2.encodingLength(n),create$4=(n,r)=>{const g=r.byteLength,_=encodingLength$3(n),x=_+encodingLength$3(g),S=new Uint8Array(x+g);return encodeTo$2(n,S,0),encodeTo$2(g,S,_),S.set(r,x),new Digest$2(n,g,r,S)},decode$n=n=>{const r=coerce$3(n),[g,_]=decode$o(r),[x,S]=decode$o(r.subarray(_)),E=r.subarray(_+S);if(E.byteLength!==x)throw new Error("Incorrect length");return new Digest$2(g,x,E,r)},equals$6=(n,r)=>{if(n===r)return!0;{const g=r;return n.code===g.code&&n.size===g.size&&g.bytes instanceof Uint8Array&&equals$7(n.bytes,g.bytes)}};let Digest$2=class{constructor(r,g,_,x){this.code=r,this.size=g,this.digest=_,this.bytes=x}};const format$7=(n,r)=>{const{bytes:g,version:_}=n;switch(_){case 0:return toStringV0$2(g,baseCache$2(n),r||base58btc$2.encoder);default:return toStringV1$2(g,baseCache$2(n),r||base32$3.encoder)}},cache$4=new WeakMap,baseCache$2=n=>{const r=cache$4.get(n);if(r==null){const g=new Map;return cache$4.set(n,g),g}return r};let CID$2=class Tn{constructor(r,g,_,x){this.code=g,this.version=r,this.multihash=_,this.bytes=x,this["/"]=x}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:g}=this;if(r!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(g.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return Tn.createV0(g)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:g}=this.multihash,_=create$4(r,g);return Tn.createV1(this.code,_)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return Tn.equals(this,r)}static equals(r,g){const _=g;return _&&r.code===_.code&&r.version===_.version&&equals$6(r.multihash,_.multihash)}toString(r){return format$7(this,r)}toJSON(){return{"/":format$7(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const g=r;if(g instanceof Tn)return g;if(g["/"]!=null&&g["/"]===g.bytes||g.asCID===g){const{version:_,code:x,multihash:S,bytes:E}=g;return new Tn(_,x,S,E||encodeCID$2(_,x,S.bytes))}else if(g[cidSymbol$2]===!0){const{version:_,multihash:x,code:S}=g,E=decode$n(x);return Tn.create(_,S,E)}else return null}static create(r,g,_){if(typeof g!="number")throw new Error("String codecs are no longer supported");if(!(_.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(g!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new Tn(r,g,_,_.bytes)}case 1:{const x=encodeCID$2(r,g,_.bytes);return new Tn(r,g,_,x)}default:throw new Error("Invalid version")}}static createV0(r){return Tn.create(0,DAG_PB_CODE$2,r)}static createV1(r,g){return Tn.create(1,r,g)}static decode(r){const[g,_]=Tn.decodeFirst(r);if(_.length)throw new Error("Incorrect length");return g}static decodeFirst(r){const g=Tn.inspectBytes(r),_=g.size-g.multihashSize,x=coerce$3(r.subarray(_,_+g.multihashSize));if(x.byteLength!==g.multihashSize)throw new Error("Incorrect length");const S=x.subarray(g.multihashSize-g.digestSize),E=new Digest$2(g.multihashCode,g.digestSize,S,x);return[g.version===0?Tn.createV0(E):Tn.createV1(g.codec,E),r.subarray(g.size)]}static inspectBytes(r){let g=0;const _=()=>{const[I,B]=decode$o(r.subarray(g));return g+=B,I};let x=_(),S=DAG_PB_CODE$2;if(x===18?(x=0,g=0):S=_(),x!==0&&x!==1)throw new RangeError(`Invalid CID version ${x}`);const E=g,C=_(),T=_(),R=g+T,A=R-E;return{version:x,codec:S,multihashCode:C,digestSize:T,multihashSize:A,size:R}}static parse(r,g){const[_,x]=parseCIDtoBytes$2(r,g),S=Tn.decode(x);if(S.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$2(S).set(_,r),S}};const parseCIDtoBytes$2=(n,r)=>{switch(n[0]){case"Q":{const g=r||base58btc$2;return[base58btc$2.prefix,g.decode(`${base58btc$2.prefix}${n}`)]}case base58btc$2.prefix:{const g=r||base58btc$2;return[base58btc$2.prefix,g.decode(n)]}case base32$3.prefix:{const g=r||base32$3;return[base32$3.prefix,g.decode(n)]}default:{if(r==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[n[0],r.decode(n)]}}},toStringV0$2=(n,r,g)=>{const{prefix:_}=g;if(_!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${g.name} encoding`);const x=r.get(_);if(x==null){const S=g.encode(n).slice(1);return r.set(_,S),S}else return x},toStringV1$2=(n,r,g)=>{const{prefix:_}=g,x=r.get(_);if(x==null){const S=g.encode(n);return r.set(_,S),S}else return x},DAG_PB_CODE$2=112,SHA_256_CODE$2=18,encodeCID$2=(n,r,g)=>{const _=encodingLength$3(n),x=_+encodingLength$3(r),S=new Uint8Array(x+g.byteLength);return encodeTo$2(n,S,0),encodeTo$2(r,S,_),S.set(g,x),S},cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),from$5=({name:n,code:r,encode:g})=>new Hasher$2(n,r,g);let Hasher$2=class{constructor(r,g,_){this.name=r,this.code=g,this.encode=_}digest(r){if(r instanceof Uint8Array){const g=this.encode(r);return g instanceof Uint8Array?create$4(this.code,g):g.then(_=>create$4(this.code,_))}else throw Error("Unknown type, must be binary type")}};function readonly$1({enumerable:n=!0,configurable:r=!1}={}){return{enumerable:n,configurable:r,writable:!1}}function*linksWithin$1(n,r){if(r!=null&&typeof r=="object")if(Array.isArray(r))for(const[g,_]of r.entries()){const x=[...n,g],S=CID$2.asCID(_);S?yield[x.join("/"),S]:typeof _=="object"&&(yield*links$1(_,x))}else{const g=CID$2.asCID(r);g?yield[n.join("/"),g]:yield*links$1(r,n)}}function*links$1(n,r){if(n==null||n instanceof Uint8Array)return;const g=CID$2.asCID(n);g&&(yield[r.join("/"),g]);for(const[_,x]of Object.entries(n)){const S=[...r,_];yield*linksWithin$1(S,x)}}function*treeWithin$1(n,r){if(Array.isArray(r))for(const[g,_]of r.entries()){const x=[...n,g];yield x.join("/"),typeof _=="object"&&!CID$2.asCID(_)&&(yield*tree$1(_,x))}else yield*tree$1(r,n)}function*tree$1(n,r){if(!(n==null||typeof n!="object"))for(const[g,_]of Object.entries(n)){const x=[...r,g];yield x.join("/"),_!=null&&!(_ instanceof Uint8Array)&&typeof _=="object"&&!CID$2.asCID(_)&&(yield*treeWithin$1(x,_))}}function get$3(n,r){let g=n;for(const[_,x]of r.entries()){if(g=g[x],g==null)throw new Error(`Object has no property at ${r.slice(0,_+1).map(E=>`[${JSON.stringify(E)}]`).join("")}`);const S=CID$2.asCID(g);if(S)return{value:S,remaining:r.slice(_+1).join("/")}}return{value:g}}let Block$2=class{constructor({cid:r,bytes:g,value:_}){if(!r||!g||typeof _>"u")throw new Error("Missing required argument");this.cid=r,this.bytes=g,this.value=_,this.asBlock=this,Object.defineProperties(this,{cid:readonly$1(),bytes:readonly$1(),value:readonly$1(),asBlock:readonly$1()})}links(){return links$1(this.value,[])}tree(){return tree$1(this.value,[])}get(r="/"){return get$3(this.value,r.split("/").filter(Boolean))}};async function encode$m({value:n,codec:r,hasher:g}){if(typeof n>"u")throw new Error('Missing required argument "value"');if(!r||!g)throw new Error("Missing required argument: codec or hasher");const _=r.encode(n),x=await g.digest(_),S=CID$2.create(1,r.code,x);return new Block$2({value:n,bytes:_,cid:S})}async function decode$m({bytes:n,codec:r,hasher:g}){if(!n)throw new Error('Missing required argument "bytes"');if(!r||!g)throw new Error("Missing required argument: codec or hasher");const _=r.decode(n),x=await g.digest(n),S=CID$2.create(1,r.code,x);return new Block$2({value:_,bytes:n,cid:S})}const typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is(n){if(n===null)return"null";if(n===void 0)return"undefined";if(n===!0||n===!1)return"boolean";const r=typeof n;if(typeofs.includes(r))return r;if(r==="function")return"Function";if(Array.isArray(n))return"Array";if(isBuffer$4(n))return"Buffer";const g=getObjectType(n);return g||"Object"}function isBuffer$4(n){return n&&n.constructor&&n.constructor.isBuffer&&n.constructor.isBuffer.call(null,n)}function getObjectType(n){const r=Object.prototype.toString.call(n).slice(8,-1);if(objectTypeNames.includes(r))return r}class Type{constructor(r,g,_){this.major=r,this.majorEncoded=r<<5,this.name=g,this.terminal=_}toString(){return`Type[${this.major}].${this.name}`}compare(r){return this.major<r.major?-1:this.major>r.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(r,g,_){this.type=r,this.value=g,this.encodedLength=_,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$2=new TextDecoder,textEncoder$3=new TextEncoder;function isBuffer$3(n){return useBuffer&&globalThis.Buffer.isBuffer(n)}function asU8A(n){return n instanceof Uint8Array?isBuffer$3(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):n:Uint8Array.from(n)}const toString$5=useBuffer?(n,r,g)=>g-r>64?globalThis.Buffer.from(n.subarray(r,g)).toString("utf8"):utf8Slice(n,r,g):(n,r,g)=>g-r>64?textDecoder$2.decode(n.subarray(r,g)):utf8Slice(n,r,g),fromString$2=useBuffer?n=>n.length>64?globalThis.Buffer.from(n):utf8ToBytes$4(n):n=>n.length>64?textEncoder$3.encode(n):utf8ToBytes$4(n),fromArray=n=>Uint8Array.from(n),slice=useBuffer?(n,r,g)=>isBuffer$3(n)?new Uint8Array(n.subarray(r,g)):n.slice(r,g):(n,r,g)=>n.slice(r,g),concat$2=useBuffer?(n,r)=>(n=n.map(g=>g instanceof Uint8Array?g:globalThis.Buffer.from(g)),asU8A(globalThis.Buffer.concat(n,r))):(n,r)=>{const g=new Uint8Array(r);let _=0;for(let x of n)_+x.length>g.length&&(x=x.subarray(0,g.length-_)),g.set(x,_),_+=x.length;return g},alloc$2=useBuffer?n=>globalThis.Buffer.allocUnsafe(n):n=>new Uint8Array(n);function compare$1(n,r){if(isBuffer$3(n)&&isBuffer$3(r))return n.compare(r);for(let g=0;g<n.length;g++)if(n[g]!==r[g])return n[g]<r[g]?-1:1;return 0}function utf8ToBytes$4(n){const r=[];let g=0;for(let _=0;_<n.length;_++){let x=n.charCodeAt(_);x<128?r[g++]=x:x<2048?(r[g++]=x>>6|192,r[g++]=x&63|128):(x&64512)===55296&&_+1<n.length&&(n.charCodeAt(_+1)&64512)===56320?(x=65536+((x&1023)<<10)+(n.charCodeAt(++_)&1023),r[g++]=x>>18|240,r[g++]=x>>12&63|128,r[g++]=x>>6&63|128,r[g++]=x&63|128):(r[g++]=x>>12|224,r[g++]=x>>6&63|128,r[g++]=x&63|128)}return r}function utf8Slice(n,r,g){const _=[];for(;r<g;){const x=n[r];let S=null,E=x>239?4:x>223?3:x>191?2:1;if(r+E<=g){let C,T,R,A;switch(E){case 1:x<128&&(S=x);break;case 2:C=n[r+1],(C&192)===128&&(A=(x&31)<<6|C&63,A>127&&(S=A));break;case 3:C=n[r+1],T=n[r+2],(C&192)===128&&(T&192)===128&&(A=(x&15)<<12|(C&63)<<6|T&63,A>2047&&(A<55296||A>57343)&&(S=A));break;case 4:C=n[r+1],T=n[r+2],R=n[r+3],(C&192)===128&&(T&192)===128&&(R&192)===128&&(A=(x&15)<<18|(C&63)<<12|(T&63)<<6|R&63,A>65535&&A<1114112&&(S=A))}}S===null?(S=65533,E=1):S>65535&&(S-=65536,_.push(S>>>10&1023|55296),S=56320|S&1023),_.push(S),r+=E}return decodeCodePointsArray(_)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(n){const r=n.length;if(r<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,n);let g="",_=0;for(;_<r;)g+=String.fromCharCode.apply(String,n.slice(_,_+=MAX_ARGUMENTS_LENGTH));return g}const defaultChunkSize=256;class Bl{constructor(r=defaultChunkSize){this.chunkSize=r,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(r){let g=this.chunks[this.chunks.length-1];if(this.cursor+r.length<=this.maxCursor+1){const x=g.length-(this.maxCursor-this.cursor)-1;g.set(r,x)}else{if(g){const x=g.length-(this.maxCursor-this.cursor)-1;x<g.length&&(this.chunks[this.chunks.length-1]=g.subarray(0,x),this.maxCursor=this.cursor-1)}r.length<64&&r.length<this.chunkSize?(g=alloc$2(this.chunkSize),this.chunks.push(g),this.maxCursor+=g.length,this._initReuseChunk===null&&(this._initReuseChunk=g),g.set(r,0)):(this.chunks.push(r),this.maxCursor+=r.length)}this.cursor+=r.length}toBytes(r=!1){let g;if(this.chunks.length===1){const _=this.chunks[0];r&&this.cursor>_.length/2?(g=this.cursor===_.length?_:_.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):g=slice(_,0,this.cursor)}else g=concat$2(this.chunks,this.cursor);return r&&this.reset(),g}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(n,r,g){if(n.length-r<g)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(n,r,g){assertEnoughData(n,r,1);const _=n[r];if(g.strict===!0&&_<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return _}function readUint16(n,r,g){assertEnoughData(n,r,2);const _=n[r]<<8|n[r+1];if(g.strict===!0&&_<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return _}function readUint32(n,r,g){assertEnoughData(n,r,4);const _=n[r]*16777216+(n[r+1]<<16)+(n[r+2]<<8)+n[r+3];if(g.strict===!0&&_<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return _}function readUint64(n,r,g){assertEnoughData(n,r,8);const _=n[r]*16777216+(n[r+1]<<16)+(n[r+2]<<8)+n[r+3],x=n[r+4]*16777216+(n[r+5]<<16)+(n[r+6]<<8)+n[r+7],S=(BigInt(_)<<BigInt(32))+BigInt(x);if(g.strict===!0&&S<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(S<=Number.MAX_SAFE_INTEGER)return Number(S);if(g.allowBigInt===!0)return S;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(n,r,g,_){return new Token(Type.uint,readUint8(n,r+1,_),2)}function decodeUint16(n,r,g,_){return new Token(Type.uint,readUint16(n,r+1,_),3)}function decodeUint32(n,r,g,_){return new Token(Type.uint,readUint32(n,r+1,_),5)}function decodeUint64(n,r,g,_){return new Token(Type.uint,readUint64(n,r+1,_),9)}function encodeUint(n,r){return encodeUintValue(n,0,r.value)}function encodeUintValue(n,r,g){if(g<uintBoundaries[0]){const _=Number(g);n.push([r|_])}else if(g<uintBoundaries[1]){const _=Number(g);n.push([r|24,_])}else if(g<uintBoundaries[2]){const _=Number(g);n.push([r|25,_>>>8,_&255])}else if(g<uintBoundaries[3]){const _=Number(g);n.push([r|26,_>>>24&255,_>>>16&255,_>>>8&255,_&255])}else{const _=BigInt(g);if(_<uintBoundaries[4]){const x=[r|27,0,0,0,0,0,0,0];let S=Number(_&BigInt(4294967295)),E=Number(_>>BigInt(32)&BigInt(4294967295));x[8]=S&255,S=S>>8,x[7]=S&255,S=S>>8,x[6]=S&255,S=S>>8,x[5]=S&255,x[4]=E&255,E=E>>8,x[3]=E&255,E=E>>8,x[2]=E&255,E=E>>8,x[1]=E&255,n.push(x)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(r){return encodeUintValue.encodedSize(r.value)};encodeUintValue.encodedSize=function(r){return r<uintBoundaries[0]?1:r<uintBoundaries[1]?2:r<uintBoundaries[2]?3:r<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(r,g){return r.value<g.value?-1:r.value>g.value?1:0};function decodeNegint8(n,r,g,_){return new Token(Type.negint,-1-readUint8(n,r+1,_),2)}function decodeNegint16(n,r,g,_){return new Token(Type.negint,-1-readUint16(n,r+1,_),3)}function decodeNegint32(n,r,g,_){return new Token(Type.negint,-1-readUint32(n,r+1,_),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(n,r,g,_){const x=readUint64(n,r+1,_);if(typeof x!="bigint"){const S=-1-x;if(S>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,S,9)}if(_.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(x),9)}function encodeNegint(n,r){const g=r.value,_=typeof g=="bigint"?g*neg1b-pos1b:g*-1-1;encodeUintValue(n,r.type.majorEncoded,_)}encodeNegint.encodedSize=function(r){const g=r.value,_=typeof g=="bigint"?g*neg1b-pos1b:g*-1-1;return _<uintBoundaries[0]?1:_<uintBoundaries[1]?2:_<uintBoundaries[2]?3:_<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(r,g){return r.value<g.value?1:r.value>g.value?-1:0};function toToken$3(n,r,g,_){assertEnoughData(n,r,g+_);const x=slice(n,r+g,r+g+_);return new Token(Type.bytes,x,g+_)}function decodeBytesCompact(n,r,g,_){return toToken$3(n,r,1,g)}function decodeBytes8(n,r,g,_){return toToken$3(n,r,2,readUint8(n,r+1,_))}function decodeBytes16(n,r,g,_){return toToken$3(n,r,3,readUint16(n,r+1,_))}function decodeBytes32(n,r,g,_){return toToken$3(n,r,5,readUint32(n,r+1,_))}function decodeBytes64(n,r,g,_){const x=readUint64(n,r+1,_);if(typeof x=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(n,r,9,x)}function tokenBytes(n){return n.encodedBytes===void 0&&(n.encodedBytes=n.type===Type.string?fromString$2(n.value):n.value),n.encodedBytes}function encodeBytes(n,r){const g=tokenBytes(r);encodeUintValue(n,r.type.majorEncoded,g.length),n.push(g)}encodeBytes.encodedSize=function(r){const g=tokenBytes(r);return encodeUintValue.encodedSize(g.length)+g.length};encodeBytes.compareTokens=function(r,g){return compareBytes(tokenBytes(r),tokenBytes(g))};function compareBytes(n,r){return n.length<r.length?-1:n.length>r.length?1:compare$1(n,r)}function toToken$2(n,r,g,_,x){const S=g+_;assertEnoughData(n,r,S);const E=new Token(Type.string,toString$5(n,r+g,r+S),S);return x.retainStringBytes===!0&&(E.byteValue=slice(n,r+g,r+S)),E}function decodeStringCompact(n,r,g,_){return toToken$2(n,r,1,g,_)}function decodeString8(n,r,g,_){return toToken$2(n,r,2,readUint8(n,r+1,_),_)}function decodeString16(n,r,g,_){return toToken$2(n,r,3,readUint16(n,r+1,_),_)}function decodeString32(n,r,g,_){return toToken$2(n,r,5,readUint32(n,r+1,_),_)}function decodeString64(n,r,g,_){const x=readUint64(n,r+1,_);if(typeof x=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(n,r,9,x,_)}const encodeString=encodeBytes;function toToken$1(n,r,g,_){return new Token(Type.array,_,g)}function decodeArrayCompact(n,r,g,_){return toToken$1(n,r,1,g)}function decodeArray8(n,r,g,_){return toToken$1(n,r,2,readUint8(n,r+1,_))}function decodeArray16(n,r,g,_){return toToken$1(n,r,3,readUint16(n,r+1,_))}function decodeArray32(n,r,g,_){return toToken$1(n,r,5,readUint32(n,r+1,_))}function decodeArray64(n,r,g,_){const x=readUint64(n,r+1,_);if(typeof x=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(n,r,9,x)}function decodeArrayIndefinite(n,r,g,_){if(_.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(n,r,1,1/0)}function encodeArray(n,r){encodeUintValue(n,Type.array.majorEncoded,r.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(r){return encodeUintValue.encodedSize(r.value)};function toToken(n,r,g,_){return new Token(Type.map,_,g)}function decodeMapCompact(n,r,g,_){return toToken(n,r,1,g)}function decodeMap8(n,r,g,_){return toToken(n,r,2,readUint8(n,r+1,_))}function decodeMap16(n,r,g,_){return toToken(n,r,3,readUint16(n,r+1,_))}function decodeMap32(n,r,g,_){return toToken(n,r,5,readUint32(n,r+1,_))}function decodeMap64(n,r,g,_){const x=readUint64(n,r+1,_);if(typeof x=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(n,r,9,x)}function decodeMapIndefinite(n,r,g,_){if(_.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(n,r,1,1/0)}function encodeMap(n,r){encodeUintValue(n,Type.map.majorEncoded,r.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(r){return encodeUintValue.encodedSize(r.value)};function decodeTagCompact(n,r,g,_){return new Token(Type.tag,g,1)}function decodeTag8(n,r,g,_){return new Token(Type.tag,readUint8(n,r+1,_),2)}function decodeTag16(n,r,g,_){return new Token(Type.tag,readUint16(n,r+1,_),3)}function decodeTag32(n,r,g,_){return new Token(Type.tag,readUint32(n,r+1,_),5)}function decodeTag64(n,r,g,_){return new Token(Type.tag,readUint64(n,r+1,_),9)}function encodeTag(n,r){encodeUintValue(n,Type.tag.majorEncoded,r.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(r){return encodeUintValue.encodedSize(r.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(n,r,g,_){if(_.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return _.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(n,r,g,_){if(_.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(n,r,g){if(g){if(g.allowNaN===!1&&Number.isNaN(n))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(g.allowInfinity===!1&&(n===1/0||n===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,n,r)}function decodeFloat16(n,r,g,_){return createToken(readFloat16(n,r+1),3,_)}function decodeFloat32(n,r,g,_){return createToken(readFloat32(n,r+1),5,_)}function decodeFloat64(n,r,g,_){return createToken(readFloat64(n,r+1),9,_)}function encodeFloat(n,r,g){const _=r.value;if(_===!1)n.push([Type.float.majorEncoded|MINOR_FALSE]);else if(_===!0)n.push([Type.float.majorEncoded|MINOR_TRUE]);else if(_===null)n.push([Type.float.majorEncoded|MINOR_NULL]);else if(_===void 0)n.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let x,S=!1;(!g||g.float64!==!0)&&(encodeFloat16(_),x=readFloat16(ui8a,1),_===x||Number.isNaN(_)?(ui8a[0]=249,n.push(ui8a.slice(0,3)),S=!0):(encodeFloat32(_),x=readFloat32(ui8a,1),_===x&&(ui8a[0]=250,n.push(ui8a.slice(0,5)),S=!0))),S||(encodeFloat64(_),x=readFloat64(ui8a,1),ui8a[0]=251,n.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(r,g){const _=r.value;if(_===!1||_===!0||_===null||_===void 0)return 1;if(!g||g.float64!==!0){encodeFloat16(_);let x=readFloat16(ui8a,1);if(_===x||Number.isNaN(_))return 3;if(encodeFloat32(_),x=readFloat32(ui8a,1),_===x)return 5}return 9};const buffer$1=new ArrayBuffer(9),dataView=new DataView(buffer$1,1),ui8a=new Uint8Array(buffer$1,0);function encodeFloat16(n){if(n===1/0)dataView.setUint16(0,31744,!1);else if(n===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(n))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,n);const r=dataView.getUint32(0),g=(r&2139095040)>>23,_=r&8388607;if(g===255)dataView.setUint16(0,31744,!1);else if(g===0)dataView.setUint16(0,(n&2147483648)>>16|_>>13,!1);else{const x=g-127;x<-24?dataView.setUint16(0,0):x<-14?dataView.setUint16(0,(r&2147483648)>>16|1<<24+x,!1):dataView.setUint16(0,(r&2147483648)>>16|x+15<<10|_>>13,!1)}}}function readFloat16(n,r){if(n.length-r<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const g=(n[r]<<8)+n[r+1];if(g===31744)return 1/0;if(g===64512)return-1/0;if(g===32256)return NaN;const _=g>>10&31,x=g&1023;let S;return _===0?S=x*2**-24:_!==31?S=(x+1024)*2**(_-25):S=x===0?1/0:NaN,g&32768?-S:S}function encodeFloat32(n){dataView.setFloat32(0,n,!1)}function readFloat32(n,r){if(n.length-r<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const g=(n.byteOffset||0)+r;return new DataView(n.buffer,g,4).getFloat32(0,!1)}function encodeFloat64(n){dataView.setFloat64(0,n,!1)}function readFloat64(n,r){if(n.length-r<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const g=(n.byteOffset||0)+r;return new DataView(n.buffer,g,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(n,r,g){throw new Error(`${decodeErrPrefix} encountered invalid minor (${g}) for major ${n[r]>>>5}`)}function errorer(n){return()=>{throw new Error(`${decodeErrPrefix} ${n}`)}}const jump=[];for(let n=0;n<=23;n++)jump[n]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let n=32;n<=55;n++)jump[n]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let n=64;n<=87;n++)jump[n]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let n=96;n<=119;n++)jump[n]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let n=128;n<=151;n++)jump[n]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let n=160;n<=183;n++)jump[n]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let n=192;n<=215;n++)jump[n]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let n=224;n<=243;n++)jump[n]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let n=0;n<24;n++)quick[n]=new Token(Type.uint,n,1);for(let n=-1;n>=-24;n--)quick[31-n]=new Token(Type.negint,n,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(n){switch(n.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return n.value.length?void 0:fromArray([64]);case Type.string:return n.value===""?fromArray([96]):void 0;case Type.array:return n.value===0?fromArray([128]):void 0;case Type.map:return n.value===0?fromArray([160]):void 0;case Type.uint:return n.value<24?fromArray([Number(n.value)]):void 0;case Type.negint:if(n.value>=-24)return fromArray([31-Number(n.value)])}}const defaultEncodeOptions$1={float64:!1,mapSorter:mapSorter$1,quickEncodeToken};function makeCborEncoders(){const n=[];return n[Type.uint.major]=encodeUint,n[Type.negint.major]=encodeNegint,n[Type.bytes.major]=encodeBytes,n[Type.string.major]=encodeString,n[Type.array.major]=encodeArray,n[Type.map.major]=encodeMap,n[Type.tag.major]=encodeTag,n[Type.float.major]=encodeFloat,n}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(r,g){this.obj=r,this.parent=g}includes(r){let g=this;do if(g.obj===r)return!0;while(g=g.parent);return!1}static createCheck(r,g){if(r&&r.includes(g))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(g,r)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(n,r,g,_){return!Number.isInteger(n)||!Number.isSafeInteger(n)?new Token(Type.float,n):n>=0?new Token(Type.uint,n):new Token(Type.negint,n)},bigint(n,r,g,_){return n>=BigInt(0)?new Token(Type.uint,n):new Token(Type.negint,n)},Uint8Array(n,r,g,_){return new Token(Type.bytes,n)},string(n,r,g,_){return new Token(Type.string,n)},boolean(n,r,g,_){return n?simpleTokens.true:simpleTokens.false},null(n,r,g,_){return simpleTokens.null},undefined(n,r,g,_){return simpleTokens.undefined},ArrayBuffer(n,r,g,_){return new Token(Type.bytes,new Uint8Array(n))},DataView(n,r,g,_){return new Token(Type.bytes,new Uint8Array(n.buffer,n.byteOffset,n.byteLength))},Array(n,r,g,_){if(!n.length)return g.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;_=Ref.createCheck(_,n);const x=[];let S=0;for(const E of n)x[S++]=objectToTokens(E,g,_);return g.addBreakTokens?[new Token(Type.array,n.length),x,new Token(Type.break)]:[new Token(Type.array,n.length),x]},Object(n,r,g,_){const x=r!=="Object",S=x?n.keys():Object.keys(n),E=x?n.size:S.length;if(!E)return g.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;_=Ref.createCheck(_,n);const C=[];let T=0;for(const R of S)C[T++]=[objectToTokens(R,g,_),objectToTokens(x?n.get(R):n[R],g,_)];return sortMapEntries(C,g),g.addBreakTokens?[new Token(Type.map,E),C,new Token(Type.break)]:[new Token(Type.map,E),C]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const n of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${n}Array`]=typeEncoders.DataView;function objectToTokens(n,r={},g){const _=is(n),x=r&&r.typeEncoders&&r.typeEncoders[_]||typeEncoders[_];if(typeof x=="function"){const E=x(n,_,r,g);if(E!=null)return E}const S=typeEncoders[_];if(!S)throw new Error(`${encodeErrPrefix} unsupported type: ${_}`);return S(n,_,r,g)}function sortMapEntries(n,r){r.mapSorter&&n.sort(r.mapSorter)}function mapSorter$1(n,r){const g=Array.isArray(n[0])?n[0][0]:n[0],_=Array.isArray(r[0])?r[0][0]:r[0];if(g.type!==_.type)return g.type.compare(_.type);const x=g.type.major,S=cborEncoders[x].compareTokens(g,_);return S===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),S}function tokensToEncoded(n,r,g,_){if(Array.isArray(r))for(const x of r)tokensToEncoded(n,x,g,_);else g[r.type.major](n,r,_)}function encodeCustom(n,r,g){const _=objectToTokens(n,g);if(!Array.isArray(_)&&g.quickEncodeToken){const x=g.quickEncodeToken(_);if(x)return x;const S=r[_.type.major];if(S.encodedSize){const E=S.encodedSize(_,g),C=new Bl(E);if(S(C,_,g),C.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${_} was wrong`);return asU8A(C.chunks[0])}}return buf.reset(),tokensToEncoded(buf,_,r,g),buf.toBytes(!0)}function encode$l(n,r){return r=Object.assign({},defaultEncodeOptions$1,r),encodeCustom(n,cborEncoders,r)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(r,g={}){this._pos=0,this.data=r,this.options=g}pos(){return this._pos}done(){return this._pos>=this.data.length}next(){const r=this.data[this._pos];let g=quick[r];if(g===void 0){const _=jump[r];if(!_)throw new Error(`${decodeErrPrefix} no decoder for major type ${r>>>5} (byte 0x${r.toString(16).padStart(2,"0")})`);const x=r&31;g=_(this.data,this._pos,x,this.options)}return this._pos+=g.encodedLength,g}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(n,r,g){const _=[];for(let x=0;x<n.value;x++){const S=tokensToObject(r,g);if(S===BREAK){if(n.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(S===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${x}, expected ${n.value})`);_[x]=S}return _}function tokenToMap(n,r,g){const _=g.useMaps===!0,x=_?void 0:{},S=_?new Map:void 0;for(let E=0;E<n.value;E++){const C=tokensToObject(r,g);if(C===BREAK){if(n.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(C===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${E} [no key], expected ${n.value})`);if(_!==!0&&typeof C!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof C})`);if(g.rejectDuplicateMapKeys===!0&&(_&&S.has(C)||!_&&C in x))throw new Error(`${decodeErrPrefix} found repeat map key "${C}"`);const T=tokensToObject(r,g);if(T===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${E} [no value], expected ${n.value})`);_?S.set(C,T):x[C]=T}return _?S:x}function tokensToObject(n,r){if(n.done())return DONE;const g=n.next();if(g.type===Type.break)return BREAK;if(g.type.terminal)return g.value;if(g.type===Type.array)return tokenToArray(g,n,r);if(g.type===Type.map)return tokenToMap(g,n,r);if(g.type===Type.tag){if(r.tags&&typeof r.tags[g.value]=="function"){const _=tokensToObject(n,r);return r.tags[g.value](_)}throw new Error(`${decodeErrPrefix} tag not supported (${g.value})`)}throw new Error("unsupported")}function decodeFirst(n,r){if(!(n instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);r=Object.assign({},defaultDecodeOptions,r);const g=r.tokenizer||new Tokeniser(n,r),_=tokensToObject(g,r);if(_===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(_===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);return[_,n.subarray(g.pos())]}function decode$l(n,r){const[g,_]=decodeFirst(n,r);if(_.length>0)throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return g}const empty$3=new Uint8Array(0);function fromHex(n){const r=n.match(/../g);return r!=null?new Uint8Array(r.map(g=>parseInt(g,16))):empty$3}function equals$5(n,r){if(n===r)return!0;if(n.byteLength!==r.byteLength)return!1;for(let g=0;g<n.byteLength;g++)if(n[g]!==r[g])return!1;return!0}function coerce$2(n){if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")}function fromString$1(n){return new TextEncoder().encode(n)}function toString$4(n){return new TextDecoder().decode(n)}function base$5(n,r){if(n.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),_=0;_<g.length;_++)g[_]=255;for(var x=0;x<n.length;x++){var S=n.charAt(x),E=S.charCodeAt(0);if(g[E]!==255)throw new TypeError(S+" is ambiguous");g[E]=x}var C=n.length,T=n.charAt(0),R=Math.log(C)/Math.log(256),A=Math.log(256)/Math.log(C);function I(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var M=0,O=0,L=0,F=N.length;L!==F&&N[L]===0;)L++,M++;for(var U=(F-L)*A+1>>>0,j=new Uint8Array(U);L!==F;){for(var z=N[L],W=0,X=U-1;(z!==0||W<O)&&X!==-1;X--,W++)z+=256*j[X]>>>0,j[X]=z%C>>>0,z=z/C>>>0;if(z!==0)throw new Error("Non-zero carry");O=W,L++}for(var ie=U-O;ie!==U&&j[ie]===0;)ie++;for(var fe=T.repeat(M);ie<U;++ie)fe+=n.charAt(j[ie]);return fe}function B(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var M=0;if(N[M]!==" "){for(var O=0,L=0;N[M]===T;)O++,M++;for(var F=(N.length-M)*R+1>>>0,U=new Uint8Array(F);N[M];){var j=g[N.charCodeAt(M)];if(j===255)return;for(var z=0,W=F-1;(j!==0||z<L)&&W!==-1;W--,z++)j+=C*U[W]>>>0,U[W]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");L=z,M++}if(N[M]!==" "){for(var X=F-L;X!==F&&U[X]===0;)X++;for(var ie=new Uint8Array(O+(F-X)),fe=O;X!==F;)ie[fe++]=U[X++];return ie}}}function D(N){var M=B(N);if(M)return M;throw new Error(`Non-${r} character`)}return{encode:I,decodeUnsafe:B,decode:D}}var src$2=base$5,_brrp__multiformats_scope_baseX$2=src$2;let Encoder$3=class{name;prefix;baseEncode;constructor(r,g,_){this.name=r,this.prefix=g,this.baseEncode=_}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},Decoder$4=class{name;prefix;baseDecode;prefixCodePoint;constructor(r,g,_){this.name=r,this.prefix=g;const x=g.codePointAt(0);if(x===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=x,this.baseDecode=_}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return or$5(this,r)}},ComposedDecoder$2=class{decoders;constructor(r){this.decoders=r}or(r){return or$5(this,r)}decode(r){const g=r[0],_=this.decoders[g];if(_!=null)return _.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function or$5(n,r){return new ComposedDecoder$2({...n.decoders??{[n.prefix]:n},...r.decoders??{[r.prefix]:r}})}let Codec$2=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(r,g,_,x){this.name=r,this.prefix=g,this.baseEncode=_,this.baseDecode=x,this.encoder=new Encoder$3(r,g,_),this.decoder=new Decoder$4(r,g,x)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};function from$4({name:n,prefix:r,encode:g,decode:_}){return new Codec$2(n,r,g,_)}function baseX$2({name:n,prefix:r,alphabet:g}){const{encode:_,decode:x}=_brrp__multiformats_scope_baseX$2(g,n);return from$4({prefix:r,name:n,encode:_,decode:S=>coerce$2(x(S))})}function decode$k(n,r,g,_){const x={};for(let A=0;A<r.length;++A)x[r[A]]=A;let S=n.length;for(;n[S-1]==="=";)--S;const E=new Uint8Array(S*g/8|0);let C=0,T=0,R=0;for(let A=0;A<S;++A){const I=x[n[A]];if(I===void 0)throw new SyntaxError(`Non-${_} character`);T=T<<g|I,C+=g,C>=8&&(C-=8,E[R++]=255&T>>C)}if(C>=g||255&T<<8-C)throw new SyntaxError("Unexpected end of data");return E}function encode$k(n,r,g){const _=r[r.length-1]==="=",x=(1<<g)-1;let S="",E=0,C=0;for(let T=0;T<n.length;++T)for(C=C<<8|n[T],E+=8;E>g;)E-=g,S+=r[x&C>>E];if(E!==0&&(S+=r[x&C<<g-E]),_)for(;S.length*g&7;)S+="=";return S}function rfc4648$2({name:n,prefix:r,bitsPerChar:g,alphabet:_}){return from$4({prefix:r,name:n,encode(x){return encode$k(x,_,g)},decode(x){return decode$k(x,_,g,n)}})}const base32$1=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$2=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$1,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"})),base36$1=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$2=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$1,base36upper},Symbol.toStringTag,{value:"Module"})),base58btc$1=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr},Symbol.toStringTag,{value:"Module"}));var encode_1$2=encode$j,MSB$3=128,REST$3=127,MSBALL$1=~REST$3,INT$1=Math.pow(2,31);function encode$j(n,r,g){r=r||[],g=g||0;for(var _=g;n>=INT$1;)r[g++]=n&255|MSB$3,n/=128;for(;n&MSBALL$1;)r[g++]=n&255|MSB$3,n>>>=7;return r[g]=n|0,encode$j.bytes=g-_+1,r}var decode$j=read$3,MSB$1$2=128,REST$1$2=127;function read$3(n,_){var g=0,_=_||0,x=0,S=_,E,C=n.length;do{if(S>=C)throw read$3.bytes=0,new RangeError("Could not decode varint");E=n[S++],g+=x<28?(E&REST$1$2)<<x:(E&REST$1$2)*Math.pow(2,x),x+=7}while(E>=MSB$1$2);return read$3.bytes=S-_,g}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$3=function(n){return n<N1$2?1:n<N2$2?2:n<N3$2?3:n<N4$2?4:n<N5$2?5:n<N6$2?6:n<N7$2?7:n<N8$1?8:n<N9$1?9:10},varint$1={encode:encode_1$2,decode:decode$j,encodingLength:length$3},_brrp_varint$1=varint$1;function decode$i(n,r=0){return[_brrp_varint$1.decode(n,r),_brrp_varint$1.decode.bytes]}function encodeTo$1(n,r,g=0){return _brrp_varint$1.encode(n,r,g),r}function encodingLength$2(n){return _brrp_varint$1.encodingLength(n)}function create$3(n,r){const g=r.byteLength,_=encodingLength$2(n),x=_+encodingLength$2(g),S=new Uint8Array(x+g);return encodeTo$1(n,S,0),encodeTo$1(g,S,_),S.set(r,x),new Digest$1(n,g,r,S)}function decode$h(n){const r=coerce$2(n),[g,_]=decode$i(r),[x,S]=decode$i(r.subarray(_)),E=r.subarray(_+S);if(E.byteLength!==x)throw new Error("Incorrect length");return new Digest$1(g,x,E,r)}function equals$4(n,r){if(n===r)return!0;{const g=r;return n.code===g.code&&n.size===g.size&&g.bytes instanceof Uint8Array&&equals$5(n.bytes,g.bytes)}}let Digest$1=class{code;size;digest;bytes;constructor(r,g,_,x){this.code=r,this.size=g,this.digest=_,this.bytes=x}};function format$6(n,r){const{bytes:g,version:_}=n;switch(_){case 0:return toStringV0$1(g,baseCache$1(n),r??base58btc$1.encoder);default:return toStringV1$1(g,baseCache$1(n),r??base32$1.encoder)}}const cache$3=new WeakMap;function baseCache$1(n){const r=cache$3.get(n);if(r==null){const g=new Map;return cache$3.set(n,g),g}return r}let CID$1=class kn{code;version;multihash;bytes;"/";constructor(r,g,_,x){this.code=g,this.version=r,this.multihash=_,this.bytes=x,this["/"]=x}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:g}=this;if(r!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(g.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return kn.createV0(g)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:g}=this.multihash,_=create$3(r,g);return kn.createV1(this.code,_)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return kn.equals(this,r)}static equals(r,g){const _=g;return _!=null&&r.code===_.code&&r.version===_.version&&equals$4(r.multihash,_.multihash)}toString(r){return format$6(this,r)}toJSON(){return{"/":format$6(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const g=r;if(g instanceof kn)return g;if(g["/"]!=null&&g["/"]===g.bytes||g.asCID===g){const{version:_,code:x,multihash:S,bytes:E}=g;return new kn(_,x,S,E??encodeCID$1(_,x,S.bytes))}else if(g[cidSymbol$1]===!0){const{version:_,multihash:x,code:S}=g,E=decode$h(x);return kn.create(_,S,E)}else return null}static create(r,g,_){if(typeof g!="number")throw new Error("String codecs are no longer supported");if(!(_.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(g!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new kn(r,g,_,_.bytes)}case 1:{const x=encodeCID$1(r,g,_.bytes);return new kn(r,g,_,x)}default:throw new Error("Invalid version")}}static createV0(r){return kn.create(0,DAG_PB_CODE$1,r)}static createV1(r,g){return kn.create(1,r,g)}static decode(r){const[g,_]=kn.decodeFirst(r);if(_.length!==0)throw new Error("Incorrect length");return g}static decodeFirst(r){const g=kn.inspectBytes(r),_=g.size-g.multihashSize,x=coerce$2(r.subarray(_,_+g.multihashSize));if(x.byteLength!==g.multihashSize)throw new Error("Incorrect length");const S=x.subarray(g.multihashSize-g.digestSize),E=new Digest$1(g.multihashCode,g.digestSize,S,x);return[g.version===0?kn.createV0(E):kn.createV1(g.codec,E),r.subarray(g.size)]}static inspectBytes(r){let g=0;const _=()=>{const[I,B]=decode$i(r.subarray(g));return g+=B,I};let x=_(),S=DAG_PB_CODE$1;if(x===18?(x=0,g=0):S=_(),x!==0&&x!==1)throw new RangeError(`Invalid CID version ${x}`);const E=g,C=_(),T=_(),R=g+T,A=R-E;return{version:x,codec:S,multihashCode:C,digestSize:T,multihashSize:A,size:R}}static parse(r,g){const[_,x]=parseCIDtoBytes$1(r,g),S=kn.decode(x);if(S.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$1(S).set(_,r),S}};function parseCIDtoBytes$1(n,r){switch(n[0]){case"Q":{const g=r??base58btc$1;return[base58btc$1.prefix,g.decode(`${base58btc$1.prefix}${n}`)]}case base58btc$1.prefix:{const g=r??base58btc$1;return[base58btc$1.prefix,g.decode(n)]}case base32$1.prefix:{const g=r??base32$1;return[base32$1.prefix,g.decode(n)]}case base36$1.prefix:{const g=r??base36$1;return[base36$1.prefix,g.decode(n)]}default:{if(r==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[n[0],r.decode(n)]}}}function toStringV0$1(n,r,g){const{prefix:_}=g;if(_!==base58btc$1.prefix)throw Error(`Cannot string encode V0 in ${g.name} encoding`);const x=r.get(_);if(x==null){const S=g.encode(n).slice(1);return r.set(_,S),S}else return x}function toStringV1$1(n,r,g){const{prefix:_}=g,x=r.get(_);if(x==null){const S=g.encode(n);return r.set(_,S),S}else return x}const DAG_PB_CODE$1=112,SHA_256_CODE$1=18;function encodeCID$1(n,r,g){const _=encodingLength$2(n),x=_+encodingLength$2(r),S=new Uint8Array(x+g.byteLength);return encodeTo$1(n,S,0),encodeTo$1(r,S,_),S.set(g,x),S}const cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),CID_CBOR_TAG=42;function toByteView$2(n){return n instanceof ArrayBuffer?new Uint8Array(n,0,n.byteLength):n}function cidEncoder$1(n){if(n.asCID!==n&&n["/"]!==n.bytes)return null;const r=CID$1.asCID(n);if(!r)return null;const g=new Uint8Array(r.bytes.byteLength+1);return g.set(r.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,g)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(n){if(Number.isNaN(n))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(n===1/0||n===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const _encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}},encodeOptions$1={..._encodeOptions,typeEncoders:{..._encodeOptions.typeEncoders}};function cidDecoder(n){if(n[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(n.subarray(1))}const _decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};_decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const decodeOptions$1={..._decodeOptions,tags:_decodeOptions.tags.slice()},name$9="dag-cbor",code$9=113,encode$i=n=>encode$l(n,_encodeOptions),decode$g=n=>decode$l(toByteView$2(n),_decodeOptions),dagCbor=Object.freeze(Object.defineProperty({__proto__:null,code:code$9,decode:decode$g,decodeOptions:decodeOptions$1,encode:encode$i,encodeOptions:encodeOptions$1,name:name$9,toByteView:toByteView$2},Symbol.toStringTag,{value:"Module"})),sha$4=n=>async r=>new Uint8Array(await crypto.subtle.digest(n,r)),sha256$9=from$5({name:"sha2-256",code:18,encode:sha$4("SHA-256")}),codec$5=dagCbor,hasher$5=sha256$9,hashStringEncoding$5=base58btc$2,create$2=async(n,r,g,_=null,x=[],S=[])=>{if(n==null)throw new Error("Identity is required, cannot create entry");if(r==null)throw new Error("Entry requires an id");if(g==null)throw new Error("Entry requires a payload");if(x==null||!Array.isArray(x))throw new Error("'next' argument is not an array");_=_||Clock(n.publicKey);const E={id:r,payload:g,next:x,refs:S,clock:_,v:2},{bytes:C}=await encode$m({value:E,codec:codec$5,hasher:hasher$5}),T=await n.sign(n,C);return E.key=n.publicKey,E.identity=n.hash,E.sig=T,encode$h(E)},verify=async(n,r)=>{if(!n)throw new Error("Identities is required, cannot verify entry");if(!isEntry(r))throw new Error("Invalid Log entry");if(!r.key)throw new Error("Entry doesn't have a key");if(!r.sig)throw new Error("Entry doesn't have a signature");const g={id:r.id,payload:r.payload,next:r.next,refs:r.refs,clock:r.clock,v:r.v},{bytes:_}=await encode$m({value:g,codec:codec$5,hasher:hasher$5});return n.verify(r.sig,r.key,_)},isEntry=n=>n&&n.id!==void 0&&n.next!==void 0&&n.payload!==void 0&&n.v!==void 0&&n.clock!==void 0&&n.refs!==void 0,isEqual$3=(n,r)=>n&&r&&n.hash===r.hash,decode$f=async n=>{const{cid:r,value:g}=await decode$m({bytes:n,codec:codec$5,hasher:hasher$5}),_=r.toString(hashStringEncoding$5);return{...g,hash:_,bytes:n}},encode$h=async n=>{const{cid:r,bytes:g}=await encode$m({value:n,codec:codec$5,hasher:hasher$5}),_=r.toString(hashStringEncoding$5),x=Clock(n.clock.id,n.clock.time);return{...n,clock:x,hash:_,bytes:g}},Entry={create:create$2,verify,decode:decode$f,encode:encode$h,isEntry,isEqual:isEqual$3},MemoryStorage$1=async()=>{let n={};const r=async(T,R)=>{n[T]=R};return{put:r,del:async T=>{delete n[T]},get:async T=>n[T],iterator:async function*(){for await(const[T,R]of Object.entries(n))yield[T,R]},merge:async T=>{if(T)for await(const[R,A]of T.iterator())r(R,A)},clear:async()=>{n={}},close:async()=>{}}},DefaultStorage$1=MemoryStorage$1,Heads=async({storage:n,heads:r})=>{n=n||await DefaultStorage$1();const g=async A=>{A=findHeads(A);for(const I of A)await n.put(I.hash,I.bytes)},_=async A=>{await n.clear(),await g(A)},x=async A=>{const I=await C();if(I.find(D=>Entry.isEqual(D,A)))return;const B=findHeads([...I,A]);return await _(B),B},S=async A=>{const B=(await C()).filter(D=>D.hash!==A);await _(B)},E=async function*(){const A=n.iterator();for await(const[,I]of A)yield await Entry.decode(I)},C=async()=>{const A=[];for await(const I of E())A.push(I);return A},T=async()=>{await n.clear()},R=async()=>{await n.close()};return await g(r||[]),{put:g,set:_,add:x,remove:S,iterator:E,all:C,clear:T,close:R}},findHeads=n=>{n=new Set(n);const r={};for(const _ of n)for(const x of _.next)r[x]=_.hash;const g=[];for(const _ of n)r[_.hash]||g.push(_);return g};function LastWriteWins$1(n,r){const g=(S,E)=>S,_=(S,E)=>SortByClockId(S,E,g);return((S,E)=>SortByClocks(S,E,_))(n,r)}function SortByClocks(n,r,g){const _=compareClocks(n.clock,r.clock);return _===0?g(n,r):_}function SortByClockId(n,r,g){return n.clock.id===r.clock.id?g(n,r):n.clock.id<r.clock.id?-1:1}function NoZeroes$1(n){const r=`Your log's tiebreaker function, ${n.name}, has returned zero and therefore cannot be`;return(_,x)=>{const S=n(_,x);if(S===0)throw Error(r);return S}}const ConflictResolution={SortByClocks,SortByClockId,LastWriteWins:LastWriteWins$1,NoZeroes:NoZeroes$1},{LastWriteWins,NoZeroes}=ConflictResolution,randomId$1=()=>new Date().getTime().toString(),maxClockTimeReducer=(n,r)=>Math.max(n,r.clock.time),DefaultStorage=MemoryStorage$1,DefaultAccessController$1=async()=>({canAppend:async n=>!0}),Log=async(n,{logId:r,logHeads:g,access:_,entryStorage:x,headsStorage:S,indexStorage:E,sortFn:C}={})=>{if(n==null)throw new Error("Identity is required");if(g!=null&&!Array.isArray(g))throw new Error("'logHeads' argument must be an array");const T=r||randomId$1();_=_||await DefaultAccessController$1();const R=x||await DefaultStorage(),A=E||await DefaultStorage();S=S||await DefaultStorage();const I=await Heads({storage:S,heads:g});C=NoZeroes(C||LastWriteWins);const B=new PQueue({concurrency:1}),D=new PQueue({concurrency:1}),N=async()=>{const G=Math.max(0,(await M()).reduce(maxClockTimeReducer,0));return Clock(n.publicKey,G)},M=async()=>(await I.all()).sort(C).reverse(),O=async()=>{const G=[];for await(const J of W())G.unshift(J);return G},L=async G=>{const J=await R.get(G);if(J)return await Entry.decode(J)},F=async G=>await A.get(G)!=null,U=async(G,J={referencesCount:0})=>{const q=async()=>{const H=await M(),ve=H.map(se=>se.hash),Z=await we(H,J.referencesCount+H.length),ce=await Entry.create(n,T,G,tickClock(await N()),ve,Z);if(!await _.canAppend(ce))throw new Error(`Could not append entry:
Key "${n.hash}" is not allowed to write to the log`);return await I.set([ce]),await R.put(ce.hash,ce.bytes),await A.put(ce.hash,!0),ce};return B.add(q)},j=async G=>{if(!G)throw new Error("Log instance not defined");if(!xe(G))throw new Error("Given argument is not an instance of Log");R.merge&&await R.merge(G.storage);const J=await G.heads();for(const q of J)await z(q)},z=async G=>{const J=async()=>{if(await F(G.hash))return!1;const H=async te=>{if(te.id!==T)throw new Error(`Entry's id (${te.id}) doesn't match the log's id (${T}).`);if(!await _.canAppend(te))throw new Error(`Could not append entry:
Key "${te.identity}" is not allowed to write to the log`);if(!await Entry.verify(n,te))throw new Error(`Could not validate signature for entry "${te.hash}"`)};await H(G);const ve=(await M()).map(te=>te.hash),Z=new Set([G.hash]),ce=new Set([...G.next,...G.refs]),ue=new Set,se=async()=>{const te=Array.from(ce.values()).filter(F).map(L),Y=await Promise.all(te);for(const be of Y){ce.delete(be.hash),await H(be),Z.add(be.hash);for(const ye of[...be.next,...be.refs])!await F(ye)&&!Z.has(ye)?ce.add(ye):ve.includes(ye)&&ue.add(ye)}ce.size>0&&await se()};await se();for(const te of Z.values())await A.put(te,!0);for(const te of ue.values())await I.remove(te);return await R.put(G.hash,G.bytes),await I.add(G),!0};return D.add(J)},W=async function*(G,J){J=J||(()=>!1),G=G||await M();let H=G.sort(C);const ve={};let Z=[];const ce={},ue=te=>!(ve[te]||ce[te]);let se;for(;H.length>0;)if(H=H.sort(C),se=H.pop(),se){const{hash:te,next:Y}=se;if(!ve[te]){if(yield se,await J(se)===!0)break;ve[te]=!0,ce[te]=!0,Z=[...Z,...Y].filter(ue);const ye=ke=>{if(!ve[ke]&&!ce[ke])return ce[ke]=!0,L(ke)},Ie=await Promise.all(Z.map(ye));Z=Ie.filter(ke=>ke!=null).reduce((ke,Ce)=>Array.from(new Set([...ke,...Ce.next])),[]).filter(ue),H=[...Ie,...H]}}},X=async function*({amount:G=-1,gt:J,gte:q,lt:H,lte:ve}={}){if(G===0)return;if(typeof ve=="string"&&(ve=[await L(ve)]),typeof H=="string"){const ke=await L(H);H=await Promise.all(ke.next.map(Ae=>L(Ae)))}if(H!=null&&!Array.isArray(H))throw new Error("lt must be a string or an array of Entries");if(ve!=null&&!Array.isArray(ve))throw new Error("lte must be a string or an array of Entries");const Z=(H||ve||await M()).filter(ke=>ke!=null),ce=J||q?await L(J||q):null,ue=ce||G===-1?-1:G;let se=0;const te=async ke=>(se++,ke?!!(se>=ue&&ue!==-1||ce&&Entry.isEqual(ke,ce)):!1),Y=ce&&G!==-1&&!H&&!ve,be=Y?new LRU(G+2):null;let ye=0;const Ie=W(Z,te);for await(const ke of Ie){const Ce=H&&Entry.isEqual(ke,Z),Ae=J&&Entry.isEqual(ke,ce);Ce||Ae||(Y?be.set(ye++,ke.hash):yield ke)}if(Y){const ke=be.keys.length,Ce=ke>G?ke-G:0,Ae=be.keys.slice(Ce,ke);for(const Ne of Ae){const We=be.get(Ne);yield await L(We)}}},ie=async()=>{await A.clear(),await I.clear(),await R.clear()},fe=async()=>{await A.close(),await I.close(),await R.close()},xe=G=>G&&G.id!==void 0&&G.clock!==void 0&&G.heads!==void 0&&G.values!==void 0&&G.access!==void 0&&G.identity!==void 0&&G.storage!==void 0,we=async(G,J=0)=>{let q=[];const H=async ve=>q.length>=J&&J!==-1;for await(const{hash:ve}of W(G,H))q.push(ve);return q=q.slice(G.length+1,J),q};return{id:T,clock:N,heads:M,values:O,all:O,get:L,has:F,append:U,join:j,joinEntry:z,traverse:W,iterator:X,clear:ie,close:fe,access:_,identity:n,storage:R}},ComposedStorage=async(n,r)=>({put:async(R,A)=>{await n.put(R,A),await r.put(R,A)},get:async R=>{let A=await n.get(R);return A||(A=await r.get(R),A&&await n.put(R,A)),A},del:async R=>{await n.del(R),await r.del(R)},iterator:async function*({amount:R,reverse:A}={}){const I=[],B={amount:R||-1,reverse:A||!1};for(const D of[n,r])for await(const[N,M]of D.iterator(B))I[N]||(I[N]=!0,yield[N,M])},merge:async R=>{await n.merge(R),await r.merge(R),await R.merge(n),await R.merge(r)},clear:async()=>{await n.clear(),await r.clear()},close:async()=>{await n.close(),await r.close()}});function isAsyncIterable$d(n){return n[Symbol.asyncIterator]!=null}function drain(n){if(isAsyncIterable$d(n))return(async()=>{for await(const r of n);})();for(const r of n);}const DefaultTimeout=3e4,IPFSBlockStorage=async({ipfs:n,pin:r,timeout:g}={})=>{if(!n)throw new Error("An instance of ipfs is required.");return{put:async(A,I)=>{const B=CID$2.parse(A,base58btc$2),{signal:D}=new timeoutAbortControllerExports.TimeoutController(g||DefaultTimeout);await n.blockstore.put(B,I,{signal:D}),r&&!await n.pins.isPinned(B)&&await drain(n.pins.add(B))},del:async A=>{},get:async A=>{const I=CID$2.parse(A,base58btc$2),{signal:B}=new timeoutAbortControllerExports.TimeoutController(g||DefaultTimeout),D=await n.blockstore.get(I,{signal:B});if(D)return D},iterator:async function*(){},merge:async A=>{},clear:async()=>{},close:async()=>{}}};var browser$f={},browserLevel={},abstractLevel$1={},abstractLevel={},levelSupports={},hasRequiredLevelSupports;function requireLevelSupports(){return hasRequiredLevelSupports||(hasRequiredLevelSupports=1,levelSupports.supports=function(...r){const g=r.reduce((_,x)=>Object.assign(_,x),{});return Object.assign(g,{snapshots:g.snapshots||!1,permanence:g.permanence||!1,seek:g.seek||!1,clear:g.clear||!1,getMany:g.getMany||!1,keyIterator:g.keyIterator||!1,valueIterator:g.valueIterator||!1,iteratorNextv:g.iteratorNextv||!1,iteratorAll:g.iteratorAll||!1,status:g.status||!1,createIfMissing:g.createIfMissing||!1,errorIfExists:g.errorIfExists||!1,deferredOpen:g.deferredOpen||!1,promises:g.promises||!1,streams:g.streams||!1,encodings:Object.assign({},g.encodings),events:Object.assign({},g.events),additionalMethods:Object.assign({},g.additionalMethods)})}),levelSupports}var levelTranscoder={},moduleError,hasRequiredModuleError;function requireModuleError(){return hasRequiredModuleError||(hasRequiredModuleError=1,moduleError=class extends Error{constructor(r,g){super(r||""),typeof g=="object"&&g!==null&&(g.code&&(this.code=String(g.code)),g.expected&&(this.expected=!0),g.transient&&(this.transient=!0),g.cause&&(this.cause=g.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}),moduleError}var encodings$1={},dist={},hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(n){Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var r={},g={};g.byteLength=A,g.toByteArray=B,g.fromByteArray=M;for(var _=[],x=[],S=typeof Uint8Array<"u"?Uint8Array:Array,E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",C=0,T=E.length;C<T;++C)_[C]=E[C],x[E.charCodeAt(C)]=C;x[45]=62,x[95]=63;function R(F){var U=F.length;if(U%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var j=F.indexOf("=");j===-1&&(j=U);var z=j===U?0:4-j%4;return[j,z]}function A(F){var U=R(F),j=U[0],z=U[1];return(j+z)*3/4-z}function I(F,U,j){return(U+j)*3/4-j}function B(F){var U,j=R(F),z=j[0],W=j[1],X=new S(I(F,z,W)),ie=0,fe=W>0?z-4:z,xe;for(xe=0;xe<fe;xe+=4)U=x[F.charCodeAt(xe)]<<18|x[F.charCodeAt(xe+1)]<<12|x[F.charCodeAt(xe+2)]<<6|x[F.charCodeAt(xe+3)],X[ie++]=U>>16&255,X[ie++]=U>>8&255,X[ie++]=U&255;return W===2&&(U=x[F.charCodeAt(xe)]<<2|x[F.charCodeAt(xe+1)]>>4,X[ie++]=U&255),W===1&&(U=x[F.charCodeAt(xe)]<<10|x[F.charCodeAt(xe+1)]<<4|x[F.charCodeAt(xe+2)]>>2,X[ie++]=U>>8&255,X[ie++]=U&255),X}function D(F){return _[F>>18&63]+_[F>>12&63]+_[F>>6&63]+_[F&63]}function N(F,U,j){for(var z,W=[],X=U;X<j;X+=3)z=(F[X]<<16&16711680)+(F[X+1]<<8&65280)+(F[X+2]&255),W.push(D(z));return W.join("")}function M(F){for(var U,j=F.length,z=j%3,W=[],X=16383,ie=0,fe=j-z;ie<fe;ie+=X)W.push(N(F,ie,ie+X>fe?fe:ie+X));return z===1?(U=F[j-1],W.push(_[U>>2]+_[U<<4&63]+"==")):z===2&&(U=(F[j-2]<<8)+F[j-1],W.push(_[U>>10]+_[U>>4&63]+_[U<<2&63]+"=")),W.join("")}var O={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */O.read=function(F,U,j,z,W){var X,ie,fe=W*8-z-1,xe=(1<<fe)-1,we=xe>>1,G=-7,J=j?W-1:0,q=j?-1:1,H=F[U+J];for(J+=q,X=H&(1<<-G)-1,H>>=-G,G+=fe;G>0;X=X*256+F[U+J],J+=q,G-=8);for(ie=X&(1<<-G)-1,X>>=-G,G+=z;G>0;ie=ie*256+F[U+J],J+=q,G-=8);if(X===0)X=1-we;else{if(X===xe)return ie?NaN:(H?-1:1)*(1/0);ie=ie+Math.pow(2,z),X=X-we}return(H?-1:1)*ie*Math.pow(2,X-z)},O.write=function(F,U,j,z,W,X){var ie,fe,xe,we=X*8-W-1,G=(1<<we)-1,J=G>>1,q=W===23?Math.pow(2,-24)-Math.pow(2,-77):0,H=z?0:X-1,ve=z?1:-1,Z=U<0||U===0&&1/U<0?1:0;for(U=Math.abs(U),isNaN(U)||U===1/0?(fe=isNaN(U)?1:0,ie=G):(ie=Math.floor(Math.log(U)/Math.LN2),U*(xe=Math.pow(2,-ie))<1&&(ie--,xe*=2),ie+J>=1?U+=q/xe:U+=q*Math.pow(2,1-J),U*xe>=2&&(ie++,xe/=2),ie+J>=G?(fe=0,ie=G):ie+J>=1?(fe=(U*xe-1)*Math.pow(2,W),ie=ie+J):(fe=U*Math.pow(2,J-1)*Math.pow(2,W),ie=0));W>=8;F[j+H]=fe&255,H+=ve,fe/=256,W-=8);for(ie=ie<<W|fe,we+=W;we>0;F[j+H]=ie&255,H+=ve,ie/=256,we-=8);F[j+H-ve]|=Z*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(F){const U=g,j=O,z=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;F.Buffer=G,F.SlowBuffer=be,F.INSPECT_MAX_BYTES=50;const W=2147483647;F.kMaxLength=W;const{Uint8Array:X,ArrayBuffer:ie,SharedArrayBuffer:fe}=globalThis;G.TYPED_ARRAY_SUPPORT=xe(),!G.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function xe(){try{const Ye=new X(1),Fe={foo:function(){return 42}};return Object.setPrototypeOf(Fe,X.prototype),Object.setPrototypeOf(Ye,Fe),Ye.foo()===42}catch{return!1}}Object.defineProperty(G.prototype,"parent",{enumerable:!0,get:function(){if(G.isBuffer(this))return this.buffer}}),Object.defineProperty(G.prototype,"offset",{enumerable:!0,get:function(){if(G.isBuffer(this))return this.byteOffset}});function we(Ye){if(Ye>W)throw new RangeError('The value "'+Ye+'" is invalid for option "size"');const Fe=new X(Ye);return Object.setPrototypeOf(Fe,G.prototype),Fe}function G(Ye,Fe,qe){if(typeof Ye=="number"){if(typeof Fe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ve(Ye)}return J(Ye,Fe,qe)}G.poolSize=8192;function J(Ye,Fe,qe){if(typeof Ye=="string")return Z(Ye,Fe);if(ie.isView(Ye))return ue(Ye);if(Ye==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ye);if(ir(Ye,ie)||Ye&&ir(Ye.buffer,ie)||typeof fe<"u"&&(ir(Ye,fe)||Ye&&ir(Ye.buffer,fe)))return se(Ye,Fe,qe);if(typeof Ye=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const pt=Ye.valueOf&&Ye.valueOf();if(pt!=null&&pt!==Ye)return G.from(pt,Fe,qe);const St=te(Ye);if(St)return St;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof Ye[Symbol.toPrimitive]=="function")return G.from(Ye[Symbol.toPrimitive]("string"),Fe,qe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof Ye)}G.from=function(Ye,Fe,qe){return J(Ye,Fe,qe)},Object.setPrototypeOf(G.prototype,X.prototype),Object.setPrototypeOf(G,X);function q(Ye){if(typeof Ye!="number")throw new TypeError('"size" argument must be of type number');if(Ye<0)throw new RangeError('The value "'+Ye+'" is invalid for option "size"')}function H(Ye,Fe,qe){return q(Ye),Ye<=0?we(Ye):Fe!==void 0?typeof qe=="string"?we(Ye).fill(Fe,qe):we(Ye).fill(Fe):we(Ye)}G.alloc=function(Ye,Fe,qe){return H(Ye,Fe,qe)};function ve(Ye){return q(Ye),we(Ye<0?0:Y(Ye)|0)}G.allocUnsafe=function(Ye){return ve(Ye)},G.allocUnsafeSlow=function(Ye){return ve(Ye)};function Z(Ye,Fe){if((typeof Fe!="string"||Fe==="")&&(Fe="utf8"),!G.isEncoding(Fe))throw new TypeError("Unknown encoding: "+Fe);const qe=ye(Ye,Fe)|0;let pt=we(qe);const St=pt.write(Ye,Fe);return St!==qe&&(pt=pt.slice(0,St)),pt}function ce(Ye){const Fe=Ye.length<0?0:Y(Ye.length)|0,qe=we(Fe);for(let pt=0;pt<Fe;pt+=1)qe[pt]=Ye[pt]&255;return qe}function ue(Ye){if(ir(Ye,X)){const Fe=new X(Ye);return se(Fe.buffer,Fe.byteOffset,Fe.byteLength)}return ce(Ye)}function se(Ye,Fe,qe){if(Fe<0||Ye.byteLength<Fe)throw new RangeError('"offset" is outside of buffer bounds');if(Ye.byteLength<Fe+(qe||0))throw new RangeError('"length" is outside of buffer bounds');let pt;return Fe===void 0&&qe===void 0?pt=new X(Ye):qe===void 0?pt=new X(Ye,Fe):pt=new X(Ye,Fe,qe),Object.setPrototypeOf(pt,G.prototype),pt}function te(Ye){if(G.isBuffer(Ye)){const Fe=Y(Ye.length)|0,qe=we(Fe);return qe.length===0||Ye.copy(qe,0,0,Fe),qe}if(Ye.length!==void 0)return typeof Ye.length!="number"||cr(Ye.length)?we(0):ce(Ye);if(Ye.type==="Buffer"&&Array.isArray(Ye.data))return ce(Ye.data)}function Y(Ye){if(Ye>=W)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+W.toString(16)+" bytes");return Ye|0}function be(Ye){return+Ye!=Ye&&(Ye=0),G.alloc(+Ye)}G.isBuffer=function(Fe){return Fe!=null&&Fe._isBuffer===!0&&Fe!==G.prototype},G.compare=function(Fe,qe){if(ir(Fe,X)&&(Fe=G.from(Fe,Fe.offset,Fe.byteLength)),ir(qe,X)&&(qe=G.from(qe,qe.offset,qe.byteLength)),!G.isBuffer(Fe)||!G.isBuffer(qe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(Fe===qe)return 0;let pt=Fe.length,St=qe.length;for(let Tt=0,At=Math.min(pt,St);Tt<At;++Tt)if(Fe[Tt]!==qe[Tt]){pt=Fe[Tt],St=qe[Tt];break}return pt<St?-1:St<pt?1:0},G.isEncoding=function(Fe){switch(String(Fe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},G.concat=function(Fe,qe){if(!Array.isArray(Fe))throw new TypeError('"list" argument must be an Array of Buffers');if(Fe.length===0)return G.alloc(0);let pt;if(qe===void 0)for(qe=0,pt=0;pt<Fe.length;++pt)qe+=Fe[pt].length;const St=G.allocUnsafe(qe);let Tt=0;for(pt=0;pt<Fe.length;++pt){let At=Fe[pt];if(ir(At,X))Tt+At.length>St.length?(G.isBuffer(At)||(At=G.from(At)),At.copy(St,Tt)):X.prototype.set.call(St,At,Tt);else if(G.isBuffer(At))At.copy(St,Tt);else throw new TypeError('"list" argument must be an Array of Buffers');Tt+=At.length}return St};function ye(Ye,Fe){if(G.isBuffer(Ye))return Ye.length;if(ie.isView(Ye)||ir(Ye,ie))return Ye.byteLength;if(typeof Ye!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof Ye);const qe=Ye.length,pt=arguments.length>2&&arguments[2]===!0;if(!pt&&qe===0)return 0;let St=!1;for(;;)switch(Fe){case"ascii":case"latin1":case"binary":return qe;case"utf8":case"utf-8":return Kt(Ye).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qe*2;case"hex":return qe>>>1;case"base64":return jt(Ye).length;default:if(St)return pt?-1:Kt(Ye).length;Fe=(""+Fe).toLowerCase(),St=!0}}G.byteLength=ye;function Ie(Ye,Fe,qe){let pt=!1;if((Fe===void 0||Fe<0)&&(Fe=0),Fe>this.length||((qe===void 0||qe>this.length)&&(qe=this.length),qe<=0)||(qe>>>=0,Fe>>>=0,qe<=Fe))return"";for(Ye||(Ye="utf8");;)switch(Ye){case"hex":return Je(this,Fe,qe);case"utf8":case"utf-8":return Oe(this,Fe,qe);case"ascii":return Le(this,Fe,qe);case"latin1":case"binary":return ze(this,Fe,qe);case"base64":return _e(this,Fe,qe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Qe(this,Fe,qe);default:if(pt)throw new TypeError("Unknown encoding: "+Ye);Ye=(Ye+"").toLowerCase(),pt=!0}}G.prototype._isBuffer=!0;function ke(Ye,Fe,qe){const pt=Ye[Fe];Ye[Fe]=Ye[qe],Ye[qe]=pt}G.prototype.swap16=function(){const Fe=this.length;if(Fe%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let qe=0;qe<Fe;qe+=2)ke(this,qe,qe+1);return this},G.prototype.swap32=function(){const Fe=this.length;if(Fe%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let qe=0;qe<Fe;qe+=4)ke(this,qe,qe+3),ke(this,qe+1,qe+2);return this},G.prototype.swap64=function(){const Fe=this.length;if(Fe%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let qe=0;qe<Fe;qe+=8)ke(this,qe,qe+7),ke(this,qe+1,qe+6),ke(this,qe+2,qe+5),ke(this,qe+3,qe+4);return this},G.prototype.toString=function(){const Fe=this.length;return Fe===0?"":arguments.length===0?Oe(this,0,Fe):Ie.apply(this,arguments)},G.prototype.toLocaleString=G.prototype.toString,G.prototype.equals=function(Fe){if(!G.isBuffer(Fe))throw new TypeError("Argument must be a Buffer");return this===Fe?!0:G.compare(this,Fe)===0},G.prototype.inspect=function(){let Fe="";const qe=F.INSPECT_MAX_BYTES;return Fe=this.toString("hex",0,qe).replace(/(.{2})/g,"$1 ").trim(),this.length>qe&&(Fe+=" ... "),"<Buffer "+Fe+">"},z&&(G.prototype[z]=G.prototype.inspect),G.prototype.compare=function(Fe,qe,pt,St,Tt){if(ir(Fe,X)&&(Fe=G.from(Fe,Fe.offset,Fe.byteLength)),!G.isBuffer(Fe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof Fe);if(qe===void 0&&(qe=0),pt===void 0&&(pt=Fe?Fe.length:0),St===void 0&&(St=0),Tt===void 0&&(Tt=this.length),qe<0||pt>Fe.length||St<0||Tt>this.length)throw new RangeError("out of range index");if(St>=Tt&&qe>=pt)return 0;if(St>=Tt)return-1;if(qe>=pt)return 1;if(qe>>>=0,pt>>>=0,St>>>=0,Tt>>>=0,this===Fe)return 0;let At=Tt-St,ar=pt-qe;const Xe=Math.min(At,ar),nt=this.slice(St,Tt),ot=Fe.slice(qe,pt);for(let et=0;et<Xe;++et)if(nt[et]!==ot[et]){At=nt[et],ar=ot[et];break}return At<ar?-1:ar<At?1:0};function Ce(Ye,Fe,qe,pt,St){if(Ye.length===0)return-1;if(typeof qe=="string"?(pt=qe,qe=0):qe>2147483647?qe=2147483647:qe<-2147483648&&(qe=-2147483648),qe=+qe,cr(qe)&&(qe=St?0:Ye.length-1),qe<0&&(qe=Ye.length+qe),qe>=Ye.length){if(St)return-1;qe=Ye.length-1}else if(qe<0)if(St)qe=0;else return-1;if(typeof Fe=="string"&&(Fe=G.from(Fe,pt)),G.isBuffer(Fe))return Fe.length===0?-1:Ae(Ye,Fe,qe,pt,St);if(typeof Fe=="number")return Fe=Fe&255,typeof X.prototype.indexOf=="function"?St?X.prototype.indexOf.call(Ye,Fe,qe):X.prototype.lastIndexOf.call(Ye,Fe,qe):Ae(Ye,[Fe],qe,pt,St);throw new TypeError("val must be string, number or Buffer")}function Ae(Ye,Fe,qe,pt,St){let Tt=1,At=Ye.length,ar=Fe.length;if(pt!==void 0&&(pt=String(pt).toLowerCase(),pt==="ucs2"||pt==="ucs-2"||pt==="utf16le"||pt==="utf-16le")){if(Ye.length<2||Fe.length<2)return-1;Tt=2,At/=2,ar/=2,qe/=2}function Xe(ot,et){return Tt===1?ot[et]:ot.readUInt16BE(et*Tt)}let nt;if(St){let ot=-1;for(nt=qe;nt<At;nt++)if(Xe(Ye,nt)===Xe(Fe,ot===-1?0:nt-ot)){if(ot===-1&&(ot=nt),nt-ot+1===ar)return ot*Tt}else ot!==-1&&(nt-=nt-ot),ot=-1}else for(qe+ar>At&&(qe=At-ar),nt=qe;nt>=0;nt--){let ot=!0;for(let et=0;et<ar;et++)if(Xe(Ye,nt+et)!==Xe(Fe,et)){ot=!1;break}if(ot)return nt}return-1}G.prototype.includes=function(Fe,qe,pt){return this.indexOf(Fe,qe,pt)!==-1},G.prototype.indexOf=function(Fe,qe,pt){return Ce(this,Fe,qe,pt,!0)},G.prototype.lastIndexOf=function(Fe,qe,pt){return Ce(this,Fe,qe,pt,!1)};function Ne(Ye,Fe,qe,pt){qe=Number(qe)||0;const St=Ye.length-qe;pt?(pt=Number(pt),pt>St&&(pt=St)):pt=St;const Tt=Fe.length;pt>Tt/2&&(pt=Tt/2);let At;for(At=0;At<pt;++At){const ar=parseInt(Fe.substr(At*2,2),16);if(cr(ar))return At;Ye[qe+At]=ar}return At}function We(Ye,Fe,qe,pt){return rr(Kt(Fe,Ye.length-qe),Ye,qe,pt)}function Be(Ye,Fe,qe,pt){return rr(Ft(Fe),Ye,qe,pt)}function Se(Ye,Fe,qe,pt){return rr(jt(Fe),Ye,qe,pt)}function $e(Ye,Fe,qe,pt){return rr(Jt(Fe,Ye.length-qe),Ye,qe,pt)}G.prototype.write=function(Fe,qe,pt,St){if(qe===void 0)St="utf8",pt=this.length,qe=0;else if(pt===void 0&&typeof qe=="string")St=qe,pt=this.length,qe=0;else if(isFinite(qe))qe=qe>>>0,isFinite(pt)?(pt=pt>>>0,St===void 0&&(St="utf8")):(St=pt,pt=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Tt=this.length-qe;if((pt===void 0||pt>Tt)&&(pt=Tt),Fe.length>0&&(pt<0||qe<0)||qe>this.length)throw new RangeError("Attempt to write outside buffer bounds");St||(St="utf8");let At=!1;for(;;)switch(St){case"hex":return Ne(this,Fe,qe,pt);case"utf8":case"utf-8":return We(this,Fe,qe,pt);case"ascii":case"latin1":case"binary":return Be(this,Fe,qe,pt);case"base64":return Se(this,Fe,qe,pt);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $e(this,Fe,qe,pt);default:if(At)throw new TypeError("Unknown encoding: "+St);St=(""+St).toLowerCase(),At=!0}},G.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function _e(Ye,Fe,qe){return Fe===0&&qe===Ye.length?U.fromByteArray(Ye):U.fromByteArray(Ye.slice(Fe,qe))}function Oe(Ye,Fe,qe){qe=Math.min(Ye.length,qe);const pt=[];let St=Fe;for(;St<qe;){const Tt=Ye[St];let At=null,ar=Tt>239?4:Tt>223?3:Tt>191?2:1;if(St+ar<=qe){let Xe,nt,ot,et;switch(ar){case 1:Tt<128&&(At=Tt);break;case 2:Xe=Ye[St+1],(Xe&192)===128&&(et=(Tt&31)<<6|Xe&63,et>127&&(At=et));break;case 3:Xe=Ye[St+1],nt=Ye[St+2],(Xe&192)===128&&(nt&192)===128&&(et=(Tt&15)<<12|(Xe&63)<<6|nt&63,et>2047&&(et<55296||et>57343)&&(At=et));break;case 4:Xe=Ye[St+1],nt=Ye[St+2],ot=Ye[St+3],(Xe&192)===128&&(nt&192)===128&&(ot&192)===128&&(et=(Tt&15)<<18|(Xe&63)<<12|(nt&63)<<6|ot&63,et>65535&&et<1114112&&(At=et))}}At===null?(At=65533,ar=1):At>65535&&(At-=65536,pt.push(At>>>10&1023|55296),At=56320|At&1023),pt.push(At),St+=ar}return Me(pt)}const Ke=4096;function Me(Ye){const Fe=Ye.length;if(Fe<=Ke)return String.fromCharCode.apply(String,Ye);let qe="",pt=0;for(;pt<Fe;)qe+=String.fromCharCode.apply(String,Ye.slice(pt,pt+=Ke));return qe}function Le(Ye,Fe,qe){let pt="";qe=Math.min(Ye.length,qe);for(let St=Fe;St<qe;++St)pt+=String.fromCharCode(Ye[St]&127);return pt}function ze(Ye,Fe,qe){let pt="";qe=Math.min(Ye.length,qe);for(let St=Fe;St<qe;++St)pt+=String.fromCharCode(Ye[St]);return pt}function Je(Ye,Fe,qe){const pt=Ye.length;(!Fe||Fe<0)&&(Fe=0),(!qe||qe<0||qe>pt)&&(qe=pt);let St="";for(let Tt=Fe;Tt<qe;++Tt)St+=sr[Ye[Tt]];return St}function Qe(Ye,Fe,qe){const pt=Ye.slice(Fe,qe);let St="";for(let Tt=0;Tt<pt.length-1;Tt+=2)St+=String.fromCharCode(pt[Tt]+pt[Tt+1]*256);return St}G.prototype.slice=function(Fe,qe){const pt=this.length;Fe=~~Fe,qe=qe===void 0?pt:~~qe,Fe<0?(Fe+=pt,Fe<0&&(Fe=0)):Fe>pt&&(Fe=pt),qe<0?(qe+=pt,qe<0&&(qe=0)):qe>pt&&(qe=pt),qe<Fe&&(qe=Fe);const St=this.subarray(Fe,qe);return Object.setPrototypeOf(St,G.prototype),St};function rt(Ye,Fe,qe){if(Ye%1!==0||Ye<0)throw new RangeError("offset is not uint");if(Ye+Fe>qe)throw new RangeError("Trying to access beyond buffer length")}G.prototype.readUintLE=G.prototype.readUIntLE=function(Fe,qe,pt){Fe=Fe>>>0,qe=qe>>>0,pt||rt(Fe,qe,this.length);let St=this[Fe],Tt=1,At=0;for(;++At<qe&&(Tt*=256);)St+=this[Fe+At]*Tt;return St},G.prototype.readUintBE=G.prototype.readUIntBE=function(Fe,qe,pt){Fe=Fe>>>0,qe=qe>>>0,pt||rt(Fe,qe,this.length);let St=this[Fe+--qe],Tt=1;for(;qe>0&&(Tt*=256);)St+=this[Fe+--qe]*Tt;return St},G.prototype.readUint8=G.prototype.readUInt8=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,1,this.length),this[Fe]},G.prototype.readUint16LE=G.prototype.readUInt16LE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,2,this.length),this[Fe]|this[Fe+1]<<8},G.prototype.readUint16BE=G.prototype.readUInt16BE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,2,this.length),this[Fe]<<8|this[Fe+1]},G.prototype.readUint32LE=G.prototype.readUInt32LE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,4,this.length),(this[Fe]|this[Fe+1]<<8|this[Fe+2]<<16)+this[Fe+3]*16777216},G.prototype.readUint32BE=G.prototype.readUInt32BE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,4,this.length),this[Fe]*16777216+(this[Fe+1]<<16|this[Fe+2]<<8|this[Fe+3])},G.prototype.readBigUInt64LE=yr(function(Fe){Fe=Fe>>>0,_t(Fe,"offset");const qe=this[Fe],pt=this[Fe+7];(qe===void 0||pt===void 0)&&ft(Fe,this.length-8);const St=qe+this[++Fe]*2**8+this[++Fe]*2**16+this[++Fe]*2**24,Tt=this[++Fe]+this[++Fe]*2**8+this[++Fe]*2**16+pt*2**24;return BigInt(St)+(BigInt(Tt)<<BigInt(32))}),G.prototype.readBigUInt64BE=yr(function(Fe){Fe=Fe>>>0,_t(Fe,"offset");const qe=this[Fe],pt=this[Fe+7];(qe===void 0||pt===void 0)&&ft(Fe,this.length-8);const St=qe*2**24+this[++Fe]*2**16+this[++Fe]*2**8+this[++Fe],Tt=this[++Fe]*2**24+this[++Fe]*2**16+this[++Fe]*2**8+pt;return(BigInt(St)<<BigInt(32))+BigInt(Tt)}),G.prototype.readIntLE=function(Fe,qe,pt){Fe=Fe>>>0,qe=qe>>>0,pt||rt(Fe,qe,this.length);let St=this[Fe],Tt=1,At=0;for(;++At<qe&&(Tt*=256);)St+=this[Fe+At]*Tt;return Tt*=128,St>=Tt&&(St-=Math.pow(2,8*qe)),St},G.prototype.readIntBE=function(Fe,qe,pt){Fe=Fe>>>0,qe=qe>>>0,pt||rt(Fe,qe,this.length);let St=qe,Tt=1,At=this[Fe+--St];for(;St>0&&(Tt*=256);)At+=this[Fe+--St]*Tt;return Tt*=128,At>=Tt&&(At-=Math.pow(2,8*qe)),At},G.prototype.readInt8=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,1,this.length),this[Fe]&128?(255-this[Fe]+1)*-1:this[Fe]},G.prototype.readInt16LE=function(Fe,qe){Fe=Fe>>>0,qe||rt(Fe,2,this.length);const pt=this[Fe]|this[Fe+1]<<8;return pt&32768?pt|4294901760:pt},G.prototype.readInt16BE=function(Fe,qe){Fe=Fe>>>0,qe||rt(Fe,2,this.length);const pt=this[Fe+1]|this[Fe]<<8;return pt&32768?pt|4294901760:pt},G.prototype.readInt32LE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,4,this.length),this[Fe]|this[Fe+1]<<8|this[Fe+2]<<16|this[Fe+3]<<24},G.prototype.readInt32BE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,4,this.length),this[Fe]<<24|this[Fe+1]<<16|this[Fe+2]<<8|this[Fe+3]},G.prototype.readBigInt64LE=yr(function(Fe){Fe=Fe>>>0,_t(Fe,"offset");const qe=this[Fe],pt=this[Fe+7];(qe===void 0||pt===void 0)&&ft(Fe,this.length-8);const St=this[Fe+4]+this[Fe+5]*2**8+this[Fe+6]*2**16+(pt<<24);return(BigInt(St)<<BigInt(32))+BigInt(qe+this[++Fe]*2**8+this[++Fe]*2**16+this[++Fe]*2**24)}),G.prototype.readBigInt64BE=yr(function(Fe){Fe=Fe>>>0,_t(Fe,"offset");const qe=this[Fe],pt=this[Fe+7];(qe===void 0||pt===void 0)&&ft(Fe,this.length-8);const St=(qe<<24)+this[++Fe]*2**16+this[++Fe]*2**8+this[++Fe];return(BigInt(St)<<BigInt(32))+BigInt(this[++Fe]*2**24+this[++Fe]*2**16+this[++Fe]*2**8+pt)}),G.prototype.readFloatLE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,4,this.length),j.read(this,Fe,!0,23,4)},G.prototype.readFloatBE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,4,this.length),j.read(this,Fe,!1,23,4)},G.prototype.readDoubleLE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,8,this.length),j.read(this,Fe,!0,52,8)},G.prototype.readDoubleBE=function(Fe,qe){return Fe=Fe>>>0,qe||rt(Fe,8,this.length),j.read(this,Fe,!1,52,8)};function wt(Ye,Fe,qe,pt,St,Tt){if(!G.isBuffer(Ye))throw new TypeError('"buffer" argument must be a Buffer instance');if(Fe>St||Fe<Tt)throw new RangeError('"value" argument is out of bounds');if(qe+pt>Ye.length)throw new RangeError("Index out of range")}G.prototype.writeUintLE=G.prototype.writeUIntLE=function(Fe,qe,pt,St){if(Fe=+Fe,qe=qe>>>0,pt=pt>>>0,!St){const ar=Math.pow(2,8*pt)-1;wt(this,Fe,qe,pt,ar,0)}let Tt=1,At=0;for(this[qe]=Fe&255;++At<pt&&(Tt*=256);)this[qe+At]=Fe/Tt&255;return qe+pt},G.prototype.writeUintBE=G.prototype.writeUIntBE=function(Fe,qe,pt,St){if(Fe=+Fe,qe=qe>>>0,pt=pt>>>0,!St){const ar=Math.pow(2,8*pt)-1;wt(this,Fe,qe,pt,ar,0)}let Tt=pt-1,At=1;for(this[qe+Tt]=Fe&255;--Tt>=0&&(At*=256);)this[qe+Tt]=Fe/At&255;return qe+pt},G.prototype.writeUint8=G.prototype.writeUInt8=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,1,255,0),this[qe]=Fe&255,qe+1},G.prototype.writeUint16LE=G.prototype.writeUInt16LE=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,2,65535,0),this[qe]=Fe&255,this[qe+1]=Fe>>>8,qe+2},G.prototype.writeUint16BE=G.prototype.writeUInt16BE=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,2,65535,0),this[qe]=Fe>>>8,this[qe+1]=Fe&255,qe+2},G.prototype.writeUint32LE=G.prototype.writeUInt32LE=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,4,4294967295,0),this[qe+3]=Fe>>>24,this[qe+2]=Fe>>>16,this[qe+1]=Fe>>>8,this[qe]=Fe&255,qe+4},G.prototype.writeUint32BE=G.prototype.writeUInt32BE=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,4,4294967295,0),this[qe]=Fe>>>24,this[qe+1]=Fe>>>16,this[qe+2]=Fe>>>8,this[qe+3]=Fe&255,qe+4};function bt(Ye,Fe,qe,pt,St){Ze(Fe,pt,St,Ye,qe,7);let Tt=Number(Fe&BigInt(4294967295));Ye[qe++]=Tt,Tt=Tt>>8,Ye[qe++]=Tt,Tt=Tt>>8,Ye[qe++]=Tt,Tt=Tt>>8,Ye[qe++]=Tt;let At=Number(Fe>>BigInt(32)&BigInt(4294967295));return Ye[qe++]=At,At=At>>8,Ye[qe++]=At,At=At>>8,Ye[qe++]=At,At=At>>8,Ye[qe++]=At,qe}function xt(Ye,Fe,qe,pt,St){Ze(Fe,pt,St,Ye,qe,7);let Tt=Number(Fe&BigInt(4294967295));Ye[qe+7]=Tt,Tt=Tt>>8,Ye[qe+6]=Tt,Tt=Tt>>8,Ye[qe+5]=Tt,Tt=Tt>>8,Ye[qe+4]=Tt;let At=Number(Fe>>BigInt(32)&BigInt(4294967295));return Ye[qe+3]=At,At=At>>8,Ye[qe+2]=At,At=At>>8,Ye[qe+1]=At,At=At>>8,Ye[qe]=At,qe+8}G.prototype.writeBigUInt64LE=yr(function(Fe,qe=0){return bt(this,Fe,qe,BigInt(0),BigInt("0xffffffffffffffff"))}),G.prototype.writeBigUInt64BE=yr(function(Fe,qe=0){return xt(this,Fe,qe,BigInt(0),BigInt("0xffffffffffffffff"))}),G.prototype.writeIntLE=function(Fe,qe,pt,St){if(Fe=+Fe,qe=qe>>>0,!St){const Xe=Math.pow(2,8*pt-1);wt(this,Fe,qe,pt,Xe-1,-Xe)}let Tt=0,At=1,ar=0;for(this[qe]=Fe&255;++Tt<pt&&(At*=256);)Fe<0&&ar===0&&this[qe+Tt-1]!==0&&(ar=1),this[qe+Tt]=(Fe/At>>0)-ar&255;return qe+pt},G.prototype.writeIntBE=function(Fe,qe,pt,St){if(Fe=+Fe,qe=qe>>>0,!St){const Xe=Math.pow(2,8*pt-1);wt(this,Fe,qe,pt,Xe-1,-Xe)}let Tt=pt-1,At=1,ar=0;for(this[qe+Tt]=Fe&255;--Tt>=0&&(At*=256);)Fe<0&&ar===0&&this[qe+Tt+1]!==0&&(ar=1),this[qe+Tt]=(Fe/At>>0)-ar&255;return qe+pt},G.prototype.writeInt8=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,1,127,-128),Fe<0&&(Fe=255+Fe+1),this[qe]=Fe&255,qe+1},G.prototype.writeInt16LE=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,2,32767,-32768),this[qe]=Fe&255,this[qe+1]=Fe>>>8,qe+2},G.prototype.writeInt16BE=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,2,32767,-32768),this[qe]=Fe>>>8,this[qe+1]=Fe&255,qe+2},G.prototype.writeInt32LE=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,4,2147483647,-2147483648),this[qe]=Fe&255,this[qe+1]=Fe>>>8,this[qe+2]=Fe>>>16,this[qe+3]=Fe>>>24,qe+4},G.prototype.writeInt32BE=function(Fe,qe,pt){return Fe=+Fe,qe=qe>>>0,pt||wt(this,Fe,qe,4,2147483647,-2147483648),Fe<0&&(Fe=4294967295+Fe+1),this[qe]=Fe>>>24,this[qe+1]=Fe>>>16,this[qe+2]=Fe>>>8,this[qe+3]=Fe&255,qe+4},G.prototype.writeBigInt64LE=yr(function(Fe,qe=0){return bt(this,Fe,qe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),G.prototype.writeBigInt64BE=yr(function(Fe,qe=0){return xt(this,Fe,qe,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Et(Ye,Fe,qe,pt,St,Tt){if(qe+pt>Ye.length)throw new RangeError("Index out of range");if(qe<0)throw new RangeError("Index out of range")}function Rt(Ye,Fe,qe,pt,St){return Fe=+Fe,qe=qe>>>0,St||Et(Ye,Fe,qe,4),j.write(Ye,Fe,qe,pt,23,4),qe+4}G.prototype.writeFloatLE=function(Fe,qe,pt){return Rt(this,Fe,qe,!0,pt)},G.prototype.writeFloatBE=function(Fe,qe,pt){return Rt(this,Fe,qe,!1,pt)};function $t(Ye,Fe,qe,pt,St){return Fe=+Fe,qe=qe>>>0,St||Et(Ye,Fe,qe,8),j.write(Ye,Fe,qe,pt,52,8),qe+8}G.prototype.writeDoubleLE=function(Fe,qe,pt){return $t(this,Fe,qe,!0,pt)},G.prototype.writeDoubleBE=function(Fe,qe,pt){return $t(this,Fe,qe,!1,pt)},G.prototype.copy=function(Fe,qe,pt,St){if(!G.isBuffer(Fe))throw new TypeError("argument should be a Buffer");if(pt||(pt=0),!St&&St!==0&&(St=this.length),qe>=Fe.length&&(qe=Fe.length),qe||(qe=0),St>0&&St<pt&&(St=pt),St===pt||Fe.length===0||this.length===0)return 0;if(qe<0)throw new RangeError("targetStart out of bounds");if(pt<0||pt>=this.length)throw new RangeError("Index out of range");if(St<0)throw new RangeError("sourceEnd out of bounds");St>this.length&&(St=this.length),Fe.length-qe<St-pt&&(St=Fe.length-qe+pt);const Tt=St-pt;return this===Fe&&typeof X.prototype.copyWithin=="function"?this.copyWithin(qe,pt,St):X.prototype.set.call(Fe,this.subarray(pt,St),qe),Tt},G.prototype.fill=function(Fe,qe,pt,St){if(typeof Fe=="string"){if(typeof qe=="string"?(St=qe,qe=0,pt=this.length):typeof pt=="string"&&(St=pt,pt=this.length),St!==void 0&&typeof St!="string")throw new TypeError("encoding must be a string");if(typeof St=="string"&&!G.isEncoding(St))throw new TypeError("Unknown encoding: "+St);if(Fe.length===1){const At=Fe.charCodeAt(0);(St==="utf8"&&At<128||St==="latin1")&&(Fe=At)}}else typeof Fe=="number"?Fe=Fe&255:typeof Fe=="boolean"&&(Fe=Number(Fe));if(qe<0||this.length<qe||this.length<pt)throw new RangeError("Out of range index");if(pt<=qe)return this;qe=qe>>>0,pt=pt===void 0?this.length:pt>>>0,Fe||(Fe=0);let Tt;if(typeof Fe=="number")for(Tt=qe;Tt<pt;++Tt)this[Tt]=Fe;else{const At=G.isBuffer(Fe)?Fe:G.from(Fe,St),ar=At.length;if(ar===0)throw new TypeError('The value "'+Fe+'" is invalid for argument "value"');for(Tt=0;Tt<pt-qe;++Tt)this[Tt+qe]=At[Tt%ar]}return this};const qt={};function Ge(Ye,Fe,qe){qt[Ye]=class extends qe{constructor(){super(),Object.defineProperty(this,"message",{value:Fe.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${Ye}]`,this.stack,delete this.name}get code(){return Ye}set code(St){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:St,writable:!0})}toString(){return`${this.name} [${Ye}]: ${this.message}`}}}Ge("ERR_BUFFER_OUT_OF_BOUNDS",function(Ye){return Ye?`${Ye} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ge("ERR_INVALID_ARG_TYPE",function(Ye,Fe){return`The "${Ye}" argument must be of type number. Received type ${typeof Fe}`},TypeError),Ge("ERR_OUT_OF_RANGE",function(Ye,Fe,qe){let pt=`The value of "${Ye}" is out of range.`,St=qe;return Number.isInteger(qe)&&Math.abs(qe)>2**32?St=De(String(qe)):typeof qe=="bigint"&&(St=String(qe),(qe>BigInt(2)**BigInt(32)||qe<-(BigInt(2)**BigInt(32)))&&(St=De(St)),St+="n"),pt+=` It must be ${Fe}. Received ${St}`,pt},RangeError);function De(Ye){let Fe="",qe=Ye.length;const pt=Ye[0]==="-"?1:0;for(;qe>=pt+4;qe-=3)Fe=`_${Ye.slice(qe-3,qe)}${Fe}`;return`${Ye.slice(0,qe)}${Fe}`}function Ve(Ye,Fe,qe){_t(Fe,"offset"),(Ye[Fe]===void 0||Ye[Fe+qe]===void 0)&&ft(Fe,Ye.length-(qe+1))}function Ze(Ye,Fe,qe,pt,St,Tt){if(Ye>qe||Ye<Fe){const At=typeof Fe=="bigint"?"n":"";let ar;throw Fe===0||Fe===BigInt(0)?ar=`>= 0${At} and < 2${At} ** ${(Tt+1)*8}${At}`:ar=`>= -(2${At} ** ${(Tt+1)*8-1}${At}) and < 2 ** ${(Tt+1)*8-1}${At}`,new qt.ERR_OUT_OF_RANGE("value",ar,Ye)}Ve(pt,St,Tt)}function _t(Ye,Fe){if(typeof Ye!="number")throw new qt.ERR_INVALID_ARG_TYPE(Fe,"number",Ye)}function ft(Ye,Fe,qe){throw Math.floor(Ye)!==Ye?(_t(Ye,qe),new qt.ERR_OUT_OF_RANGE("offset","an integer",Ye)):Fe<0?new qt.ERR_BUFFER_OUT_OF_BOUNDS:new qt.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${Fe}`,Ye)}const ht=/[^+/0-9A-Za-z-_]/g;function zt(Ye){if(Ye=Ye.split("=")[0],Ye=Ye.trim().replace(ht,""),Ye.length<2)return"";for(;Ye.length%4!==0;)Ye=Ye+"=";return Ye}function Kt(Ye,Fe){Fe=Fe||1/0;let qe;const pt=Ye.length;let St=null;const Tt=[];for(let At=0;At<pt;++At){if(qe=Ye.charCodeAt(At),qe>55295&&qe<57344){if(!St){if(qe>56319){(Fe-=3)>-1&&Tt.push(239,191,189);continue}else if(At+1===pt){(Fe-=3)>-1&&Tt.push(239,191,189);continue}St=qe;continue}if(qe<56320){(Fe-=3)>-1&&Tt.push(239,191,189),St=qe;continue}qe=(St-55296<<10|qe-56320)+65536}else St&&(Fe-=3)>-1&&Tt.push(239,191,189);if(St=null,qe<128){if((Fe-=1)<0)break;Tt.push(qe)}else if(qe<2048){if((Fe-=2)<0)break;Tt.push(qe>>6|192,qe&63|128)}else if(qe<65536){if((Fe-=3)<0)break;Tt.push(qe>>12|224,qe>>6&63|128,qe&63|128)}else if(qe<1114112){if((Fe-=4)<0)break;Tt.push(qe>>18|240,qe>>12&63|128,qe>>6&63|128,qe&63|128)}else throw new Error("Invalid code point")}return Tt}function Ft(Ye){const Fe=[];for(let qe=0;qe<Ye.length;++qe)Fe.push(Ye.charCodeAt(qe)&255);return Fe}function Jt(Ye,Fe){let qe,pt,St;const Tt=[];for(let At=0;At<Ye.length&&!((Fe-=2)<0);++At)qe=Ye.charCodeAt(At),pt=qe>>8,St=qe%256,Tt.push(St),Tt.push(pt);return Tt}function jt(Ye){return U.toByteArray(zt(Ye))}function rr(Ye,Fe,qe,pt){let St;for(St=0;St<pt&&!(St+qe>=Fe.length||St>=Ye.length);++St)Fe[St+qe]=Ye[St];return St}function ir(Ye,Fe){return Ye instanceof Fe||Ye!=null&&Ye.constructor!=null&&Ye.constructor.name!=null&&Ye.constructor.name===Fe.name}function cr(Ye){return Ye!==Ye}const sr=function(){const Ye="0123456789abcdef",Fe=new Array(256);for(let qe=0;qe<16;++qe){const pt=qe*16;for(let St=0;St<16;++St)Fe[pt+St]=Ye[qe]+Ye[St]}return Fe}();function yr(Ye){return typeof BigInt>"u"?ur:Ye}function ur(){throw new Error("BigInt not supported")}})(r);const L=r.Buffer;n.Blob=r.Blob,n.BlobOptions=r.BlobOptions,n.Buffer=r.Buffer,n.File=r.File,n.FileOptions=r.FileOptions,n.INSPECT_MAX_BYTES=r.INSPECT_MAX_BYTES,n.SlowBuffer=r.SlowBuffer,n.TranscodeEncoding=r.TranscodeEncoding,n.atob=r.atob,n.btoa=r.btoa,n.constants=r.constants,n.default=L,n.isAscii=r.isAscii,n.isUtf8=r.isUtf8,n.kMaxLength=r.kMaxLength,n.kStringMaxLength=r.kStringMaxLength,n.resolveObjectURL=r.resolveObjectURL,n.transcode=r.transcode}(dist)),dist}var textEndec,hasRequiredTextEndec;function requireTextEndec(){if(hasRequiredTextEndec)return textEndec;hasRequiredTextEndec=1;let n=null;return textEndec=function(){return n===null&&(n={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),n},textEndec}var formats={},encoding={},hasRequiredEncoding;function requireEncoding(){if(hasRequiredEncoding)return encoding;hasRequiredEncoding=1;const n=requireModuleError(),r=new Set(["buffer","view","utf8"]);class g{constructor(x){if(this.encode=x.encode||this.encode,this.decode=x.decode||this.decode,this.name=x.name||this.name,this.format=x.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!r.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");x.createViewTranscoder&&(this.createViewTranscoder=x.createViewTranscoder),x.createBufferTranscoder&&(this.createBufferTranscoder=x.createBufferTranscoder),x.createUTF8Transcoder&&(this.createUTF8Transcoder=x.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new n(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}}return encoding.Encoding=g,encoding}var hasRequiredFormats;function requireFormats(){if(hasRequiredFormats)return formats;hasRequiredFormats=1;const{Buffer:n}=requireDist()||{},{Encoding:r}=requireEncoding(),g=requireTextEndec();class _ extends r{constructor(C){super({...C,format:"buffer"})}createViewTranscoder(){return new x({encode:this.encode,decode:C=>this.decode(n.from(C.buffer,C.byteOffset,C.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}}class x extends r{constructor(C){super({...C,format:"view"})}createBufferTranscoder(){return new _({encode:C=>{const T=this.encode(C);return n.from(T.buffer,T.byteOffset,T.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}}class S extends r{constructor(C){super({...C,format:"utf8"})}createBufferTranscoder(){return new _({encode:C=>n.from(this.encode(C),"utf8"),decode:C=>this.decode(C.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:C,textDecoder:T}=g();return new x({encode:R=>C.encode(this.encode(R)),decode:R=>this.decode(T.decode(R)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}}return formats.BufferFormat=_,formats.ViewFormat=x,formats.UTF8Format=S,formats}var hasRequiredEncodings;function requireEncodings(){if(hasRequiredEncodings)return encodings$1;hasRequiredEncodings=1;const{Buffer:n}=requireDist()||{Buffer:{isBuffer:()=>!1}},{textEncoder:r,textDecoder:g}=requireTextEndec()(),{BufferFormat:_,ViewFormat:x,UTF8Format:S}=requireFormats(),E=C=>C;return encodings$1.utf8=new S({encode:function(C){return n.isBuffer(C)?C.toString("utf8"):ArrayBuffer.isView(C)?g.decode(C):String(C)},decode:E,name:"utf8",createViewTranscoder(){return new x({encode:function(C){return ArrayBuffer.isView(C)?C:r.encode(C)},decode:function(C){return g.decode(C)},name:`${this.name}+view`})},createBufferTranscoder(){return new _({encode:function(C){return n.isBuffer(C)?C:ArrayBuffer.isView(C)?n.from(C.buffer,C.byteOffset,C.byteLength):n.from(String(C),"utf8")},decode:function(C){return C.toString("utf8")},name:`${this.name}+buffer`})}}),encodings$1.json=new S({encode:JSON.stringify,decode:JSON.parse,name:"json"}),encodings$1.buffer=new _({encode:function(C){return n.isBuffer(C)?C:ArrayBuffer.isView(C)?n.from(C.buffer,C.byteOffset,C.byteLength):n.from(String(C),"utf8")},decode:E,name:"buffer",createViewTranscoder(){return new x({encode:function(C){return ArrayBuffer.isView(C)?C:n.from(String(C),"utf8")},decode:function(C){return n.from(C.buffer,C.byteOffset,C.byteLength)},name:`${this.name}+view`})}}),encodings$1.view=new x({encode:function(C){return ArrayBuffer.isView(C)?C:r.encode(C)},decode:E,name:"view",createBufferTranscoder(){return new _({encode:function(C){return n.isBuffer(C)?C:ArrayBuffer.isView(C)?n.from(C.buffer,C.byteOffset,C.byteLength):n.from(String(C),"utf8")},decode:E,name:`${this.name}+buffer`})}}),encodings$1.hex=new _({encode:function(C){return n.isBuffer(C)?C:n.from(String(C),"hex")},decode:function(C){return C.toString("hex")},name:"hex"}),encodings$1.base64=new _({encode:function(C){return n.isBuffer(C)?C:n.from(String(C),"base64")},decode:function(C){return C.toString("base64")},name:"base64"}),encodings$1}var hasRequiredLevelTranscoder;function requireLevelTranscoder(){if(hasRequiredLevelTranscoder)return levelTranscoder;hasRequiredLevelTranscoder=1;const n=requireModuleError(),r=requireEncodings(),{Encoding:g}=requireEncoding(),{BufferFormat:_,ViewFormat:x,UTF8Format:S}=requireFormats(),E=Symbol("formats"),C=Symbol("encodings"),T=new Set(["buffer","view","utf8"]);class R{constructor(O){if(Array.isArray(O)){if(!O.every(L=>T.has(L)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[C]=new Map,this[E]=new Set(O);for(const L in r)try{this.encoding(L)}catch(F){if(F.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw F}}encodings(){return Array.from(new Set(this[C].values()))}encoding(O){let L=this[C].get(O);if(L===void 0){if(typeof O=="string"&&O!==""){if(L=D[O],!L)throw new n(`Encoding '${O}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof O!="object"||O===null)throw new TypeError("First argument 'encoding' must be a string or object");L=A(O)}const{name:F,format:U}=L;if(!this[E].has(U))if(this[E].has("view"))L=L.createViewTranscoder();else if(this[E].has("buffer"))L=L.createBufferTranscoder();else if(this[E].has("utf8"))L=L.createUTF8Transcoder();else throw new n(`Encoding '${F}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const j of[O,F,L.name,L.commonName])this[C].set(j,L)}return L}}levelTranscoder.Transcoder=R;function A(M){if(M instanceof g)return M;const O="type"in M&&typeof M.type=="string"?M.type:void 0,L=M.name||O||`anonymous-${N++}`;switch(I(M)){case"view":return new x({...M,name:L});case"utf8":return new S({...M,name:L});case"buffer":return new _({...M,name:L});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function I(M){return"format"in M&&M.format!==void 0?M.format:"buffer"in M&&typeof M.buffer=="boolean"?M.buffer?"buffer":"utf8":"code"in M&&Number.isInteger(M.code)?"view":"buffer"}const B={binary:r.buffer,"utf-8":r.utf8},D={...r,...B};let N=0;return levelTranscoder}var catering={},nextTickBrowser$1,hasRequiredNextTickBrowser$1;function requireNextTickBrowser$1(){return hasRequiredNextTickBrowser$1||(hasRequiredNextTickBrowser$1=1,nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:n=>Promise.resolve().then(n)),nextTickBrowser$1}var hasRequiredCatering;function requireCatering(){if(hasRequiredCatering)return catering;hasRequiredCatering=1;var n=requireNextTickBrowser$1();return catering.fromCallback=function(r,g){if(r===void 0){var _=new Promise(function(x,S){r=function(E,C){E?S(E):x(C)}});r[g!==void 0?g:"promise"]=_}else if(typeof r!="function")throw new TypeError("Callback must be a function");return r},catering.fromPromise=function(r,g){if(g===void 0)return r;r.then(function(_){n(()=>g(null,_))}).catch(function(_){n(()=>g(_))})},catering}var abstractIterator={},common$2={},hasRequiredCommon$2;function requireCommon$2(){return hasRequiredCommon$2||(hasRequiredCommon$2=1,common$2.getCallback=function(n,r){return typeof n=="function"?n:r},common$2.getOptions=function(n,r){return typeof n=="object"&&n!==null?n:r!==void 0?r:{}}),common$2}var hasRequiredAbstractIterator;function requireAbstractIterator(){if(hasRequiredAbstractIterator)return abstractIterator;hasRequiredAbstractIterator=1;const{fromCallback:n}=requireCatering(),r=requireModuleError(),{getOptions:g,getCallback:_}=requireCommon$2(),x=Symbol("promise"),S=Symbol("callback"),E=Symbol("working"),C=Symbol("handleOne"),T=Symbol("handleMany"),R=Symbol("autoClose"),A=Symbol("finishWork"),I=Symbol("returnMany"),B=Symbol("closing"),D=Symbol("handleClose"),N=Symbol("closed"),M=Symbol("closeCallbacks"),O=Symbol("keyEncoding"),L=Symbol("valueEncoding"),F=Symbol("abortOnClose"),U=Symbol("legacy"),j=Symbol("keys"),z=Symbol("values"),W=Symbol("limit"),X=Symbol("count"),ie=Object.freeze({}),fe=()=>{};let xe=!1;class we{constructor(Z,ce,ue){if(typeof Z!="object"||Z===null){const se=Z===null?"null":typeof Z;throw new TypeError(`The first argument must be an abstract-level database, received ${se}`)}if(typeof ce!="object"||ce===null)throw new TypeError("The second argument must be an options object");this[N]=!1,this[M]=[],this[E]=!1,this[B]=!1,this[R]=!1,this[S]=null,this[C]=this[C].bind(this),this[T]=this[T].bind(this),this[D]=this[D].bind(this),this[O]=ce[O],this[L]=ce[L],this[U]=ue,this[W]=Number.isInteger(ce.limit)&&ce.limit>=0?ce.limit:1/0,this[X]=0,this[F]=!!ce.abortOnClose,this.db=Z,this.db.attachResource(this),this.nextTick=Z.nextTick}get count(){return this[X]}get limit(){return this[W]}next(Z){let ce;if(Z===void 0)ce=new Promise((ue,se)=>{Z=(te,Y,be)=>{te?se(te):this[U]?Y===void 0&&be===void 0?ue():ue([Y,be]):ue(Y)}});else if(typeof Z!="function")throw new TypeError("Callback must be a function");return this[B]?this.nextTick(Z,new r("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[E]?this.nextTick(Z,new r("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[E]=!0,this[S]=Z,this[X]>=this[W]?this.nextTick(this[C],null):this._next(this[C])),ce}_next(Z){this.nextTick(Z)}nextv(Z,ce,ue){return ue=_(ce,ue),ue=n(ue,x),ce=g(ce,ie),Number.isInteger(Z)?(this[B]?this.nextTick(ue,new r("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[E]?this.nextTick(ue,new r("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(Z<1&&(Z=1),this[W]<1/0&&(Z=Math.min(Z,this[W]-this[X])),this[E]=!0,this[S]=ue,Z<=0?this.nextTick(this[T],null,[]):this._nextv(Z,ce,this[T])),ue[x]):(this.nextTick(ue,new TypeError("The first argument 'size' must be an integer")),ue[x])}_nextv(Z,ce,ue){const se=[],te=(Y,be,ye)=>{if(Y)return ue(Y);if(this[U]?be===void 0&&ye===void 0:be===void 0)return ue(null,se);se.push(this[U]?[be,ye]:be),se.length===Z?ue(null,se):this._next(te)};this._next(te)}all(Z,ce){return ce=_(Z,ce),ce=n(ce,x),Z=g(Z,ie),this[B]?this.nextTick(ce,new r("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[E]?this.nextTick(ce,new r("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[E]=!0,this[S]=ce,this[R]=!0,this[X]>=this[W]?this.nextTick(this[T],null,[]):this._all(Z,this[T])),ce[x]}_all(Z,ce){let ue=this[X];const se=[],te=()=>{const be=this[W]<1/0?Math.min(1e3,this[W]-ue):1e3;be<=0?this.nextTick(ce,null,se):this._nextv(be,ie,Y)},Y=(be,ye)=>{be?ce(be):ye.length===0?ce(null,se):(se.push.apply(se,ye),ue+=ye.length,te())};te()}[A](){const Z=this[S];return this[F]&&Z===null?fe:(this[E]=!1,this[S]=null,this[B]&&this._close(this[D]),Z)}[I](Z,ce,ue){this[R]?this.close(Z.bind(null,ce,ue)):Z(ce,ue)}seek(Z,ce){if(ce=g(ce,ie),!this[B]){if(this[E])throw new r("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const ue=this.db.keyEncoding(ce.keyEncoding||this[O]),se=ue.format;ce.keyEncoding!==se&&(ce={...ce,keyEncoding:se});const te=this.db.prefixKey(ue.encode(Z),se);this._seek(te,ce)}}}_seek(Z,ce){throw new r("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(Z){return Z=n(Z,x),this[N]?this.nextTick(Z):this[B]?this[M].push(Z):(this[B]=!0,this[M].push(Z),this[E]?this[F]&&this[A]()(new r("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[D])),Z[x]}_close(Z){this.nextTick(Z)}[D](){this[N]=!0,this.db.detachResource(this);const Z=this[M];this[M]=[];for(const ce of Z)ce()}async*[Symbol.asyncIterator](){try{let Z;for(;(Z=await this.next())!==void 0;)yield Z}finally{this[N]||await this.close()}}}class G extends we{constructor(Z,ce){super(Z,ce,!0),this[j]=ce.keys!==!1,this[z]=ce.values!==!1}[C](Z,ce,ue){const se=this[A]();if(Z)return se(Z);try{ce=this[j]&&ce!==void 0?this[O].decode(ce):void 0,ue=this[z]&&ue!==void 0?this[L].decode(ue):void 0}catch(te){return se(new H("entry",te))}ce===void 0&&ue===void 0||this[X]++,se(null,ce,ue)}[T](Z,ce){const ue=this[A]();if(Z)return this[I](ue,Z);try{for(const se of ce){const te=se[0],Y=se[1];se[0]=this[j]&&te!==void 0?this[O].decode(te):void 0,se[1]=this[z]&&Y!==void 0?this[L].decode(Y):void 0}}catch(se){return this[I](ue,new H("entries",se))}this[X]+=ce.length,this[I](ue,null,ce)}end(Z){return!xe&&typeof console<"u"&&(xe=!0,console.warn(new r("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(Z)}}class J extends we{constructor(Z,ce){super(Z,ce,!1)}[C](Z,ce){const ue=this[A]();if(Z)return ue(Z);try{ce=ce!==void 0?this[O].decode(ce):void 0}catch(se){return ue(new H("key",se))}ce!==void 0&&this[X]++,ue(null,ce)}[T](Z,ce){const ue=this[A]();if(Z)return this[I](ue,Z);try{for(let se=0;se<ce.length;se++){const te=ce[se];ce[se]=te!==void 0?this[O].decode(te):void 0}}catch(se){return this[I](ue,new H("keys",se))}this[X]+=ce.length,this[I](ue,null,ce)}}class q extends we{constructor(Z,ce){super(Z,ce,!1)}[C](Z,ce){const ue=this[A]();if(Z)return ue(Z);try{ce=ce!==void 0?this[L].decode(ce):void 0}catch(se){return ue(new H("value",se))}ce!==void 0&&this[X]++,ue(null,ce)}[T](Z,ce){const ue=this[A]();if(Z)return this[I](ue,Z);try{for(let se=0;se<ce.length;se++){const te=ce[se];ce[se]=te!==void 0?this[L].decode(te):void 0}}catch(se){return this[I](ue,new H("values",se))}this[X]+=ce.length,this[I](ue,null,ce)}}class H extends r{constructor(Z,ce){super(`Iterator could not decode ${Z}`,{code:"LEVEL_DECODE_ERROR",cause:ce})}}for(const ve of["_ended property","_nexting property","_end method"])Object.defineProperty(G.prototype,ve.split(" ")[0],{get(){throw new r(`The ${ve} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new r(`The ${ve} has been removed`,{code:"LEVEL_LEGACY"})}});return G.keyEncoding=O,G.valueEncoding=L,abstractIterator.AbstractIterator=G,abstractIterator.AbstractKeyIterator=J,abstractIterator.AbstractValueIterator=q,abstractIterator}var defaultKvIterator={},hasRequiredDefaultKvIterator;function requireDefaultKvIterator(){if(hasRequiredDefaultKvIterator)return defaultKvIterator;hasRequiredDefaultKvIterator=1;const{AbstractKeyIterator:n,AbstractValueIterator:r}=requireAbstractIterator(),g=Symbol("iterator"),_=Symbol("callback"),x=Symbol("handleOne"),S=Symbol("handleMany");class E extends n{constructor(R,A){super(R,A),this[g]=R.iterator({...A,keys:!0,values:!1}),this[x]=this[x].bind(this),this[S]=this[S].bind(this)}}class C extends r{constructor(R,A){super(R,A),this[g]=R.iterator({...A,keys:!1,values:!0}),this[x]=this[x].bind(this),this[S]=this[S].bind(this)}}for(const T of[E,C]){const R=T===E,A=R?I=>I[0]:I=>I[1];T.prototype._next=function(I){this[_]=I,this[g].next(this[x])},T.prototype[x]=function(I,B,D){const N=this[_];I?N(I):N(null,R?B:D)},T.prototype._nextv=function(I,B,D){this[_]=D,this[g].nextv(I,B,this[S])},T.prototype._all=function(I,B){this[_]=B,this[g].all(I,this[S])},T.prototype[S]=function(I,B){const D=this[_];I?D(I):D(null,B.map(A))},T.prototype._seek=function(I,B){this[g].seek(I,B)},T.prototype._close=function(I){this[g].close(I)}}return defaultKvIterator.DefaultKeyIterator=E,defaultKvIterator.DefaultValueIterator=C,defaultKvIterator}var deferredIterator={},hasRequiredDeferredIterator;function requireDeferredIterator(){if(hasRequiredDeferredIterator)return deferredIterator;hasRequiredDeferredIterator=1;const{AbstractIterator:n,AbstractKeyIterator:r,AbstractValueIterator:g}=requireAbstractIterator(),_=requireModuleError(),x=Symbol("nut"),S=Symbol("undefer"),E=Symbol("factory");class C extends n{constructor(I,B){super(I,B),this[x]=null,this[E]=()=>I.iterator(B),this.db.defer(()=>this[S]())}}class T extends r{constructor(I,B){super(I,B),this[x]=null,this[E]=()=>I.keys(B),this.db.defer(()=>this[S]())}}class R extends g{constructor(I,B){super(I,B),this[x]=null,this[E]=()=>I.values(B),this.db.defer(()=>this[S]())}}for(const A of[C,T,R])A.prototype[S]=function(){this.db.status==="open"&&(this[x]=this[E]())},A.prototype._next=function(I){this[x]!==null?this[x].next(I):this.db.status==="opening"?this.db.defer(()=>this._next(I)):this.nextTick(I,new _("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},A.prototype._nextv=function(I,B,D){this[x]!==null?this[x].nextv(I,B,D):this.db.status==="opening"?this.db.defer(()=>this._nextv(I,B,D)):this.nextTick(D,new _("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},A.prototype._all=function(I,B){this[x]!==null?this[x].all(B):this.db.status==="opening"?this.db.defer(()=>this._all(I,B)):this.nextTick(B,new _("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},A.prototype._seek=function(I,B){this[x]!==null?this[x]._seek(I,B):this.db.status==="opening"&&this.db.defer(()=>this._seek(I,B))},A.prototype._close=function(I){this[x]!==null?this[x].close(I):this.db.status==="opening"?this.db.defer(()=>this._close(I)):this.nextTick(I)};return deferredIterator.DeferredIterator=C,deferredIterator.DeferredKeyIterator=T,deferredIterator.DeferredValueIterator=R,deferredIterator}var defaultChainedBatch={},abstractChainedBatch={},hasRequiredAbstractChainedBatch;function requireAbstractChainedBatch(){if(hasRequiredAbstractChainedBatch)return abstractChainedBatch;hasRequiredAbstractChainedBatch=1;const{fromCallback:n}=requireCatering(),r=requireModuleError(),{getCallback:g,getOptions:_}=requireCommon$2(),x=Symbol("promise"),S=Symbol("status"),E=Symbol("operations"),C=Symbol("finishClose"),T=Symbol("closeCallbacks");class R{constructor(I){if(typeof I!="object"||I===null){const B=I===null?"null":typeof I;throw new TypeError(`The first argument must be an abstract-level database, received ${B}`)}this[E]=[],this[T]=[],this[S]="open",this[C]=this[C].bind(this),this.db=I,this.db.attachResource(this),this.nextTick=I.nextTick}get length(){return this[E].length}put(I,B,D){if(this[S]!=="open")throw new r("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const N=this.db._checkKey(I)||this.db._checkValue(B);if(N)throw N;const M=D&&D.sublevel!=null?D.sublevel:this.db,O=D,L=M.keyEncoding(D&&D.keyEncoding),F=M.valueEncoding(D&&D.valueEncoding),U=L.format;D={...D,keyEncoding:U,valueEncoding:F.format},M!==this.db&&(D.sublevel=null);const j=M.prefixKey(L.encode(I),U),z=F.encode(B);return this._put(j,z,D),this[E].push({...O,type:"put",key:I,value:B}),this}_put(I,B,D){}del(I,B){if(this[S]!=="open")throw new r("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const D=this.db._checkKey(I);if(D)throw D;const N=B&&B.sublevel!=null?B.sublevel:this.db,M=B,O=N.keyEncoding(B&&B.keyEncoding),L=O.format;return B={...B,keyEncoding:L},N!==this.db&&(B.sublevel=null),this._del(N.prefixKey(O.encode(I),L),B),this[E].push({...M,type:"del",key:I}),this}_del(I,B){}clear(){if(this[S]!=="open")throw new r("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[E]=[],this}_clear(){}write(I,B){return B=g(I,B),B=n(B,x),I=_(I),this[S]!=="open"?this.nextTick(B,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(B):(this[S]="writing",this._write(I,D=>{this[S]="closing",this[T].push(()=>B(D)),D||this.db.emit("batch",this[E]),this._close(this[C])})),B[x]}_write(I,B){}close(I){return I=n(I,x),this[S]==="closing"?this[T].push(I):this[S]==="closed"?this.nextTick(I):(this[T].push(I),this[S]!=="writing"&&(this[S]="closing",this._close(this[C]))),I[x]}_close(I){this.nextTick(I)}[C](){this[S]="closed",this.db.detachResource(this);const I=this[T];this[T]=[];for(const B of I)B()}}return abstractChainedBatch.AbstractChainedBatch=R,abstractChainedBatch}var hasRequiredDefaultChainedBatch;function requireDefaultChainedBatch(){if(hasRequiredDefaultChainedBatch)return defaultChainedBatch;hasRequiredDefaultChainedBatch=1;const{AbstractChainedBatch:n}=requireAbstractChainedBatch(),r=requireModuleError(),g=Symbol("encoded");class _ extends n{constructor(S){super(S),this[g]=[]}_put(S,E,C){this[g].push({...C,type:"put",key:S,value:E})}_del(S,E){this[g].push({...E,type:"del",key:S})}_clear(){this[g]=[]}_write(S,E){this.db.status==="opening"?this.db.defer(()=>this._write(S,E)):this.db.status==="open"?this[g].length===0?this.nextTick(E):this.db._batch(this[g],S,E):this.nextTick(E,new r("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}}return defaultChainedBatch.DefaultChainedBatch=_,defaultChainedBatch}var rangeOptions_1,hasRequiredRangeOptions;function requireRangeOptions(){if(hasRequiredRangeOptions)return rangeOptions_1;hasRequiredRangeOptions=1;const n=requireModuleError(),r=Object.prototype.hasOwnProperty,g=new Set(["lt","lte","gt","gte"]);return rangeOptions_1=function(_,x){const S={};for(const E in _)if(r.call(_,E)&&!(E==="keyEncoding"||E==="valueEncoding")){if(E==="start"||E==="end")throw new n(`The legacy range option '${E}' has been removed`,{code:"LEVEL_LEGACY"});if(E==="encoding")throw new n("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});g.has(E)?S[E]=x.encode(_[E]):S[E]=_[E]}return S.reverse=!!S.reverse,S.limit=Number.isInteger(S.limit)&&S.limit>=0?S.limit:-1,S},rangeOptions_1}/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var queueMicrotask_1,hasRequiredQueueMicrotask;function requireQueueMicrotask(){if(hasRequiredQueueMicrotask)return queueMicrotask_1;hasRequiredQueueMicrotask=1;let n;return queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):r=>(n||(n=Promise.resolve())).then(r).catch(g=>setTimeout(()=>{throw g},0)),queueMicrotask_1}var nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const n=requireQueueMicrotask();return nextTickBrowser=function(r,...g){g.length===0?n(r):n(()=>r(...g))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:n,AbstractKeyIterator:r,AbstractValueIterator:g}=requireAbstractIterator(),_=Symbol("unfix"),x=Symbol("iterator"),S=Symbol("handleOne"),E=Symbol("handleMany"),C=Symbol("callback");class T extends n{constructor(B,D,N,M){super(B,D),this[x]=N,this[_]=M,this[S]=this[S].bind(this),this[E]=this[E].bind(this),this[C]=null}[S](B,D,N){const M=this[C];if(B)return M(B);D!==void 0&&(D=this[_](D)),M(B,D,N)}[E](B,D){const N=this[C];if(B)return N(B);for(const M of D){const O=M[0];O!==void 0&&(M[0]=this[_](O))}N(B,D)}}class R extends r{constructor(B,D,N,M){super(B,D),this[x]=N,this[_]=M,this[S]=this[S].bind(this),this[E]=this[E].bind(this),this[C]=null}[S](B,D){const N=this[C];if(B)return N(B);D!==void 0&&(D=this[_](D)),N(B,D)}[E](B,D){const N=this[C];if(B)return N(B);for(let M=0;M<D.length;M++){const O=D[M];O!==void 0&&(D[M]=this[_](O))}N(B,D)}}class A extends g{constructor(B,D,N){super(B,D),this[x]=N}}for(const I of[T,R])I.prototype._next=function(B){this[C]=B,this[x].next(this[S])},I.prototype._nextv=function(B,D,N){this[C]=N,this[x].nextv(B,D,this[E])},I.prototype._all=function(B,D){this[C]=D,this[x].all(B,this[E])};for(const I of[A])I.prototype._next=function(B){this[x].next(B)},I.prototype._nextv=function(B,D,N){this[x].nextv(B,D,N)},I.prototype._all=function(B,D){this[x].all(B,D)};for(const I of[T,R,A])I.prototype._seek=function(B,D){this[x].seek(B,D)},I.prototype._close=function(B){this[x].close(B)};return abstractSublevelIterator.AbstractSublevelIterator=T,abstractSublevelIterator.AbstractSublevelKeyIterator=R,abstractSublevelIterator.AbstractSublevelValueIterator=A,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const n=requireModuleError(),{Buffer:r}=requireDist()||{},{AbstractSublevelIterator:g,AbstractSublevelKeyIterator:_,AbstractSublevelValueIterator:x}=requireAbstractSublevelIterator(),S=Symbol("prefix"),E=Symbol("upperBound"),C=Symbol("prefixRange"),T=Symbol("parent"),R=Symbol("unfix"),A=new TextEncoder,I={separator:"!"};abstractSublevel=function({AbstractLevel:L}){class F extends L{static defaults(j){if(typeof j=="string")throw new n("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(j&&j.open)throw new n("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return j==null?I:j.separator?j:{...j,separator:"!"}}constructor(j,z,W){const{separator:X,manifest:ie,...fe}=F.defaults(W);z=O(z,X);const xe=X.charCodeAt(0)+1,we=j[T]||j;if(!A.encode(z).every(q=>q>xe&&q<127))throw new n(`Prefix must use bytes > ${xe} < 127`,{code:"LEVEL_INVALID_PREFIX"});super(B(we,ie),fe);const G=(j.prefix||"")+X+z+X,J=G.slice(0,-1)+String.fromCharCode(xe);this[T]=we,this[S]=new N(G),this[E]=new N(J),this[R]=new M,this.nextTick=we.nextTick}prefixKey(j,z){if(z==="utf8")return this[S].utf8+j;if(j.byteLength===0)return this[S][z];if(z==="view"){const W=this[S].view,X=new Uint8Array(W.byteLength+j.byteLength);return X.set(W,0),X.set(j,W.byteLength),X}else{const W=this[S].buffer;return r.concat([W,j],W.byteLength+j.byteLength)}}[C](j,z){j.gte!==void 0?j.gte=this.prefixKey(j.gte,z):j.gt!==void 0?j.gt=this.prefixKey(j.gt,z):j.gte=this[S][z],j.lte!==void 0?j.lte=this.prefixKey(j.lte,z):j.lt!==void 0?j.lt=this.prefixKey(j.lt,z):j.lte=this[E][z]}get prefix(){return this[S].utf8}get db(){return this[T]}_open(j,z){this[T].open({passive:!0},z)}_put(j,z,W,X){this[T].put(j,z,W,X)}_get(j,z,W){this[T].get(j,z,W)}_getMany(j,z,W){this[T].getMany(j,z,W)}_del(j,z,W){this[T].del(j,z,W)}_batch(j,z,W){this[T].batch(j,z,W)}_clear(j,z){this[C](j,j.keyEncoding),this[T].clear(j,z)}_iterator(j){this[C](j,j.keyEncoding);const z=this[T].iterator(j),W=this[R].get(this[S].utf8.length,j.keyEncoding);return new g(this,j,z,W)}_keys(j){this[C](j,j.keyEncoding);const z=this[T].keys(j),W=this[R].get(this[S].utf8.length,j.keyEncoding);return new _(this,j,z,W)}_values(j){this[C](j,j.keyEncoding);const z=this[T].values(j);return new x(this,j,z)}}return{AbstractSublevel:F}};const B=function(L,F){return{...L.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...F,encodings:{utf8:D(L,"utf8"),buffer:D(L,"buffer"),view:D(L,"view")}}},D=function(L,F){return L.supports.encodings[F]?L.keyEncoding(F).name===F:!1};class N{constructor(F){this.utf8=F,this.view=A.encode(F),this.buffer=r?r.from(this.view.buffer,0,this.view.byteLength):{}}}class M{constructor(){this.cache=new Map}get(F,U){let j=this.cache.get(U);return j===void 0&&(U==="view"?j=function(z,W){return W.subarray(z)}.bind(null,F):j=function(z,W){return W.slice(z)}.bind(null,F),this.cache.set(U,j)),j}}const O=function(L,F){let U=0,j=L.length;for(;U<j&&L[U]===F;)U++;for(;j>U&&L[j-1]===F;)j--;return L.slice(U,j)};return abstractSublevel}var hasRequiredAbstractLevel$1;function requireAbstractLevel$1(){if(hasRequiredAbstractLevel$1)return abstractLevel;hasRequiredAbstractLevel$1=1;const{supports:n}=requireLevelSupports(),{Transcoder:r}=requireLevelTranscoder(),{EventEmitter:g}=requireEvents(),{fromCallback:_}=requireCatering(),x=requireModuleError(),{AbstractIterator:S}=requireAbstractIterator(),{DefaultKeyIterator:E,DefaultValueIterator:C}=requireDefaultKvIterator(),{DeferredIterator:T,DeferredKeyIterator:R,DeferredValueIterator:A}=requireDeferredIterator(),{DefaultChainedBatch:I}=requireDefaultChainedBatch(),{getCallback:B,getOptions:D}=requireCommon$2(),N=requireRangeOptions(),M=Symbol("promise"),O=Symbol("landed"),L=Symbol("resources"),F=Symbol("closeResources"),U=Symbol("operations"),j=Symbol("undefer"),z=Symbol("deferOpen"),W=Symbol("options"),X=Symbol("status"),ie=Symbol("defaultOptions"),fe=Symbol("transcoder"),xe=Symbol("keyEncoding"),we=Symbol("valueEncoding"),G=()=>{};class J extends g{constructor(ce,ue){if(super(),typeof ce!="object"||ce===null)throw new TypeError("The first argument 'manifest' must be an object");ue=D(ue);const{keyEncoding:se,valueEncoding:te,passive:Y,...be}=ue;this[L]=new Set,this[U]=[],this[z]=!0,this[W]=be,this[X]="opening",this.supports=n(ce,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:ce.snapshots!==!1,permanence:ce.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:ce.encodings||{},events:Object.assign({},ce.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[fe]=new r(ve(this)),this[xe]=this[fe].encoding(se||"utf8"),this[we]=this[fe].encoding(te||"utf8");for(const ye of this[fe].encodings())this.supports.encodings[ye.commonName]||(this.supports.encodings[ye.commonName]=!0);this[ie]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[xe].commonName,valueEncoding:this[we].commonName}),key:Object.freeze({keyEncoding:this[xe].commonName})},this.nextTick(()=>{this[z]&&this.open({passive:!1},G)})}get status(){return this[X]}keyEncoding(ce){return this[fe].encoding(ce??this[xe])}valueEncoding(ce){return this[fe].encoding(ce??this[we])}open(ce,ue){ue=B(ce,ue),ue=_(ue,M),ce={...this[W],...D(ce)},ce.createIfMissing=ce.createIfMissing!==!1,ce.errorIfExists=!!ce.errorIfExists;const se=te=>{this[X]==="closing"||this[X]==="opening"?this.once(O,te?()=>se(te):se):this[X]!=="open"?ue(new x("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:te})):ue()};return ce.passive?this[X]==="opening"?this.once(O,se):this.nextTick(se):this[X]==="closed"||this[z]?(this[z]=!1,this[X]="opening",this.emit("opening"),this._open(ce,te=>{if(te){this[X]="closed",this[F](()=>{this.emit(O),se(te)}),this[j]();return}this[X]="open",this[j](),this.emit(O),this[X]==="open"&&this.emit("open"),this[X]==="open"&&this.emit("ready"),se()})):this[X]==="open"?this.nextTick(se):this.once(O,()=>this.open(ce,ue)),ue[M]}_open(ce,ue){this.nextTick(ue)}close(ce){ce=_(ce,M);const ue=se=>{this[X]==="opening"||this[X]==="closing"?this.once(O,se?ue(se):ue):this[X]!=="closed"?ce(new x("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:se})):ce()};if(this[X]==="open"){this[X]="closing",this.emit("closing");const se=te=>{this[X]="open",this[j](),this.emit(O),ue(te)};this[F](()=>{this._close(te=>{if(te)return se(te);this[X]="closed",this[j](),this.emit(O),this[X]==="closed"&&this.emit("closed"),ue()})})}else this[X]==="closed"?this.nextTick(ue):this.once(O,()=>this.close(ce));return ce[M]}[F](ce){if(this[L].size===0)return this.nextTick(ce);let ue=this[L].size,se=!0;const te=()=>{--ue===0&&(se?this.nextTick(ce):ce())};for(const Y of this[L])Y.close(te);se=!1,this[L].clear()}_close(ce){this.nextTick(ce)}get(ce,ue,se){if(se=B(ue,se),se=_(se,M),ue=D(ue,this[ie].entry),this[X]==="opening")return this.defer(()=>this.get(ce,ue,se)),se[M];if(H(this,se))return se[M];const te=this._checkKey(ce);if(te)return this.nextTick(se,te),se[M];const Y=this.keyEncoding(ue.keyEncoding),be=this.valueEncoding(ue.valueEncoding),ye=Y.format,Ie=be.format;return(ue.keyEncoding!==ye||ue.valueEncoding!==Ie)&&(ue=Object.assign({},ue,{keyEncoding:ye,valueEncoding:Ie})),this._get(this.prefixKey(Y.encode(ce),ye),ue,(ke,Ce)=>{if(ke)return(ke.code==="LEVEL_NOT_FOUND"||ke.notFound||/NotFound/i.test(ke))&&(ke.code||(ke.code="LEVEL_NOT_FOUND"),ke.notFound||(ke.notFound=!0),ke.status||(ke.status=404)),se(ke);try{Ce=be.decode(Ce)}catch(Ae){return se(new x("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:Ae}))}se(null,Ce)}),se[M]}_get(ce,ue,se){this.nextTick(se,new Error("NotFound"))}getMany(ce,ue,se){if(se=B(ue,se),se=_(se,M),ue=D(ue,this[ie].entry),this[X]==="opening")return this.defer(()=>this.getMany(ce,ue,se)),se[M];if(H(this,se))return se[M];if(!Array.isArray(ce))return this.nextTick(se,new TypeError("The first argument 'keys' must be an array")),se[M];if(ce.length===0)return this.nextTick(se,null,[]),se[M];const te=this.keyEncoding(ue.keyEncoding),Y=this.valueEncoding(ue.valueEncoding),be=te.format,ye=Y.format;(ue.keyEncoding!==be||ue.valueEncoding!==ye)&&(ue=Object.assign({},ue,{keyEncoding:be,valueEncoding:ye}));const Ie=new Array(ce.length);for(let ke=0;ke<ce.length;ke++){const Ce=ce[ke],Ae=this._checkKey(Ce);if(Ae)return this.nextTick(se,Ae),se[M];Ie[ke]=this.prefixKey(te.encode(Ce),be)}return this._getMany(Ie,ue,(ke,Ce)=>{if(ke)return se(ke);try{for(let Ae=0;Ae<Ce.length;Ae++)Ce[Ae]!==void 0&&(Ce[Ae]=Y.decode(Ce[Ae]))}catch(Ae){return se(new x(`Could not decode one or more of ${Ce.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:Ae}))}se(null,Ce)}),se[M]}_getMany(ce,ue,se){this.nextTick(se,null,new Array(ce.length).fill(void 0))}put(ce,ue,se,te){if(te=B(se,te),te=_(te,M),se=D(se,this[ie].entry),this[X]==="opening")return this.defer(()=>this.put(ce,ue,se,te)),te[M];if(H(this,te))return te[M];const Y=this._checkKey(ce)||this._checkValue(ue);if(Y)return this.nextTick(te,Y),te[M];const be=this.keyEncoding(se.keyEncoding),ye=this.valueEncoding(se.valueEncoding),Ie=be.format,ke=ye.format;(se.keyEncoding!==Ie||se.valueEncoding!==ke)&&(se=Object.assign({},se,{keyEncoding:Ie,valueEncoding:ke}));const Ce=this.prefixKey(be.encode(ce),Ie),Ae=ye.encode(ue);return this._put(Ce,Ae,se,Ne=>{if(Ne)return te(Ne);this.emit("put",ce,ue),te()}),te[M]}_put(ce,ue,se,te){this.nextTick(te)}del(ce,ue,se){if(se=B(ue,se),se=_(se,M),ue=D(ue,this[ie].key),this[X]==="opening")return this.defer(()=>this.del(ce,ue,se)),se[M];if(H(this,se))return se[M];const te=this._checkKey(ce);if(te)return this.nextTick(se,te),se[M];const Y=this.keyEncoding(ue.keyEncoding),be=Y.format;return ue.keyEncoding!==be&&(ue=Object.assign({},ue,{keyEncoding:be})),this._del(this.prefixKey(Y.encode(ce),be),ue,ye=>{if(ye)return se(ye);this.emit("del",ce),se()}),se[M]}_del(ce,ue,se){this.nextTick(se)}batch(ce,ue,se){if(!arguments.length){if(this[X]==="opening")return new I(this);if(this[X]!=="open")throw new x("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof ce=="function"?se=ce:se=B(ue,se),se=_(se,M),ue=D(ue,this[ie].empty),this[X]==="opening")return this.defer(()=>this.batch(ce,ue,se)),se[M];if(H(this,se))return se[M];if(!Array.isArray(ce))return this.nextTick(se,new TypeError("The first argument 'operations' must be an array")),se[M];if(ce.length===0)return this.nextTick(se),se[M];const te=new Array(ce.length),{keyEncoding:Y,valueEncoding:be,...ye}=ue;for(let Ie=0;Ie<ce.length;Ie++){if(typeof ce[Ie]!="object"||ce[Ie]===null)return this.nextTick(se,new TypeError("A batch operation must be an object")),se[M];const ke=Object.assign({},ce[Ie]);if(ke.type!=="put"&&ke.type!=="del")return this.nextTick(se,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),se[M];const Ce=this._checkKey(ke.key);if(Ce)return this.nextTick(se,Ce),se[M];const Ae=ke.sublevel!=null?ke.sublevel:this,Ne=Ae.keyEncoding(ke.keyEncoding||Y),We=Ne.format;if(ke.key=Ae.prefixKey(Ne.encode(ke.key),We),ke.keyEncoding=We,ke.type==="put"){const Be=this._checkValue(ke.value);if(Be)return this.nextTick(se,Be),se[M];const Se=Ae.valueEncoding(ke.valueEncoding||be);ke.value=Se.encode(ke.value),ke.valueEncoding=Se.format}Ae!==this&&(ke.sublevel=null),te[Ie]=ke}return this._batch(te,ye,Ie=>{if(Ie)return se(Ie);this.emit("batch",ce),se()}),se[M]}_batch(ce,ue,se){this.nextTick(se)}sublevel(ce,ue){return this._sublevel(ce,q.defaults(ue))}_sublevel(ce,ue){return new q(this,ce,ue)}prefixKey(ce,ue){return ce}clear(ce,ue){if(ue=B(ce,ue),ue=_(ue,M),ce=D(ce,this[ie].empty),this[X]==="opening")return this.defer(()=>this.clear(ce,ue)),ue[M];if(H(this,ue))return ue[M];const se=ce,te=this.keyEncoding(ce.keyEncoding);return ce=N(ce,te),ce.keyEncoding=te.format,ce.limit===0?this.nextTick(ue):this._clear(ce,Y=>{if(Y)return ue(Y);this.emit("clear",se),ue()}),ue[M]}_clear(ce,ue){this.nextTick(ue)}iterator(ce){const ue=this.keyEncoding(ce&&ce.keyEncoding),se=this.valueEncoding(ce&&ce.valueEncoding);if(ce=N(ce,ue),ce.keys=ce.keys!==!1,ce.values=ce.values!==!1,ce[S.keyEncoding]=ue,ce[S.valueEncoding]=se,ce.keyEncoding=ue.format,ce.valueEncoding=se.format,this[X]==="opening")return new T(this,ce);if(this[X]!=="open")throw new x("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(ce)}_iterator(ce){return new S(this,ce)}keys(ce){const ue=this.keyEncoding(ce&&ce.keyEncoding),se=this.valueEncoding(ce&&ce.valueEncoding);if(ce=N(ce,ue),ce[S.keyEncoding]=ue,ce[S.valueEncoding]=se,ce.keyEncoding=ue.format,ce.valueEncoding=se.format,this[X]==="opening")return new R(this,ce);if(this[X]!=="open")throw new x("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(ce)}_keys(ce){return new E(this,ce)}values(ce){const ue=this.keyEncoding(ce&&ce.keyEncoding),se=this.valueEncoding(ce&&ce.valueEncoding);if(ce=N(ce,ue),ce[S.keyEncoding]=ue,ce[S.valueEncoding]=se,ce.keyEncoding=ue.format,ce.valueEncoding=se.format,this[X]==="opening")return new A(this,ce);if(this[X]!=="open")throw new x("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(ce)}_values(ce){return new C(this,ce)}defer(ce){if(typeof ce!="function")throw new TypeError("The first argument must be a function");this[U].push(ce)}[j](){if(this[U].length===0)return;const ce=this[U];this[U]=[];for(const ue of ce)ue()}attachResource(ce){if(typeof ce!="object"||ce===null||typeof ce.close!="function")throw new TypeError("The first argument must be a resource object");this[L].add(ce)}detachResource(ce){this[L].delete(ce)}_chainedBatch(){return new I(this)}_checkKey(ce){if(ce==null)return new x("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(ce){if(ce==null)return new x("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}}J.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel:q}=requireAbstractSublevel()({AbstractLevel:J});abstractLevel.AbstractLevel=J,abstractLevel.AbstractSublevel=q;const H=function(Z,ce){return Z[X]!=="open"?(Z.nextTick(ce,new x("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},ve=function(Z){return Object.keys(Z.supports.encodings).filter(ce=>!!Z.supports.encodings[ce])};return abstractLevel}var hasRequiredAbstractLevel;function requireAbstractLevel(){return hasRequiredAbstractLevel||(hasRequiredAbstractLevel=1,abstractLevel$1.AbstractLevel=requireAbstractLevel$1().AbstractLevel,abstractLevel$1.AbstractSublevel=requireAbstractLevel$1().AbstractSublevel,abstractLevel$1.AbstractIterator=requireAbstractIterator().AbstractIterator,abstractLevel$1.AbstractKeyIterator=requireAbstractIterator().AbstractKeyIterator,abstractLevel$1.AbstractValueIterator=requireAbstractIterator().AbstractValueIterator,abstractLevel$1.AbstractChainedBatch=requireAbstractChainedBatch().AbstractChainedBatch),abstractLevel$1}/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1,hasRequiredRunParallelLimit;function requireRunParallelLimit(){if(hasRequiredRunParallelLimit)return runParallelLimit_1;hasRequiredRunParallelLimit=1,runParallelLimit_1=r;const n=requireQueueMicrotask();function r(g,_,x){if(typeof _!="number")throw new Error("second argument must be a Number");let S,E,C,T,R,A=!0,I;Array.isArray(g)?(S=[],C=E=g.length):(T=Object.keys(g),S={},C=E=T.length);function B(N){function M(){x&&x(N,S),x=null}A?n(M):M()}function D(N,M,O){if(S[N]=O,M&&(R=!0),--C===0||M)B(M);else if(!R&&I<E){let L;T?(L=T[I],I+=1,g[L](function(F,U){D(L,F,U)})):(L=I,I+=1,g[L](function(F,U){D(L,F,U)}))}}I=_,C?T?T.some(function(N,M){return g[N](function(O,L){D(N,O,L)}),M===_-1}):g.some(function(N,M){return N(function(O,L){D(M,O,L)}),M===_-1}):B(null),A=!1}return runParallelLimit_1}var iterator={},keyRange,hasRequiredKeyRange;function requireKeyRange(){return hasRequiredKeyRange||(hasRequiredKeyRange=1,keyRange=function(r){const g=r.gte!==void 0?r.gte:r.gt!==void 0?r.gt:void 0,_=r.lte!==void 0?r.lte:r.lt!==void 0?r.lt:void 0,x=r.gte===void 0,S=r.lte===void 0;return g!==void 0&&_!==void 0?IDBKeyRange.bound(g,_,x,S):g!==void 0?IDBKeyRange.lowerBound(g,x):_!==void 0?IDBKeyRange.upperBound(_,S):null}),keyRange}var deserialize,hasRequiredDeserialize;function requireDeserialize(){if(hasRequiredDeserialize)return deserialize;hasRequiredDeserialize=1;const n=new TextEncoder;return deserialize=function(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):n.encode(r)},deserialize}var hasRequiredIterator;function requireIterator(){if(hasRequiredIterator)return iterator;hasRequiredIterator=1;const{AbstractIterator:n}=requireAbstractLevel(),r=requireKeyRange(),g=requireDeserialize(),_=Symbol("cache"),x=Symbol("finished"),S=Symbol("options"),E=Symbol("currentOptions"),C=Symbol("position"),T=Symbol("location"),R=Symbol("first"),A={};class I extends n{constructor(N,M,O){super(N,O),this[_]=[],this[x]=this.limit===0,this[S]=O,this[E]={...O},this[C]=void 0,this[T]=M,this[R]=!0}_nextv(N,M,O){if(this[R]=!1,this[x])return this.nextTick(O,null,[]);if(this[_].length>0)return N=Math.min(N,this[_].length),this.nextTick(O,null,this[_].splice(0,N));this[C]!==void 0&&(this[S].reverse?(this[E].lt=this[C],this[E].lte=void 0):(this[E].gt=this[C],this[E].gte=void 0));let L;try{L=r(this[E])}catch{return this[x]=!0,this.nextTick(O,null,[])}const F=this.db.db.transaction([this[T]],"readonly"),U=F.objectStore(this[T]),j=[];if(this[S].reverse){const z=!this[S].values&&U.openKeyCursor?"openKeyCursor":"openCursor";U[z](L,"prev").onsuccess=W=>{const X=W.target.result;if(X){const{key:ie,value:fe}=X;this[C]=ie,j.push([this[S].keys&&ie!==void 0?g(ie):void 0,this[S].values&&fe!==void 0?g(fe):void 0]),j.length<N?X.continue():B(F)}else this[x]=!0}}else{let z,W;const X=()=>{if(z===void 0||W===void 0)return;const ie=Math.max(z.length,W.length);ie===0||N===1/0?this[x]=!0:this[C]=z[ie-1],j.length=ie;for(let fe=0;fe<ie;fe++){const xe=z[fe],we=W[fe];j[fe]=[this[S].keys&&xe!==void 0?g(xe):void 0,this[S].values&&we!==void 0?g(we):void 0]}B(F)};this[S].keys||N<1/0?U.getAllKeys(L,N<1/0?N:void 0).onsuccess=ie=>{z=ie.target.result,X()}:(z=[],this.nextTick(X)),this[S].values?U.getAll(L,N<1/0?N:void 0).onsuccess=ie=>{W=ie.target.result,X()}:(W=[],this.nextTick(X))}F.onabort=()=>{O(F.error||new Error("aborted by user")),O=null},F.oncomplete=()=>{O(null,j),O=null}}_next(N){if(this[_].length>0){const[M,O]=this[_].shift();this.nextTick(N,null,M,O)}else if(this[x])this.nextTick(N);else{let M=Math.min(100,this.limit-this.count);this[R]&&(this[R]=!1,M=1),this._nextv(M,A,(O,L)=>{if(O)return N(O);this[_]=L,this._next(N)})}}_all(N,M){this[R]=!1;const O=this[_].splice(0,this[_].length),L=this.limit-this.count-O.length;if(L<=0)return this.nextTick(M,null,O);this._nextv(L,A,(F,U)=>{if(F)return M(F);O.length>0&&(U=O.concat(U)),M(null,U)})}_seek(N,M){this[R]=!0,this[_]=[],this[x]=!1,this[C]=void 0,this[E]={...this[S]};let O;try{O=r(this[S])}catch{this[x]=!0;return}O!==null&&!O.includes(N)?this[x]=!0:this[S].reverse?this[E].lte=N:this[E].gte=N}}iterator.Iterator=I;function B(D){typeof D.commit=="function"&&D.commit()}return iterator}var clear,hasRequiredClear;function requireClear(){return hasRequiredClear||(hasRequiredClear=1,clear=function(r,g,_,x,S){if(x.limit===0)return r.nextTick(S);const E=r.db.transaction([g],"readwrite"),C=E.objectStore(g);let T=0;E.oncomplete=function(){S()},E.onabort=function(){S(E.error||new Error("aborted by user"))};const R=C.openKeyCursor?"openKeyCursor":"openCursor",A=x.reverse?"prev":"next";C[R](_,A).onsuccess=function(I){const B=I.target.result;B&&(C.delete(B.key).onsuccess=function(){(x.limit<=0||++T<x.limit)&&B.continue()})}}),clear}var hasRequiredBrowserLevel;function requireBrowserLevel(){if(hasRequiredBrowserLevel)return browserLevel;hasRequiredBrowserLevel=1;const{AbstractLevel:n}=requireAbstractLevel(),r=requireModuleError(),g=requireRunParallelLimit(),{fromCallback:_}=requireCatering(),{Iterator:x}=requireIterator(),S=requireDeserialize(),E=requireClear(),C=requireKeyRange(),T="level-js-",R=Symbol("idb"),A=Symbol("namePrefix"),I=Symbol("location"),B=Symbol("version"),D=Symbol("store"),N=Symbol("onComplete"),M=Symbol("promise");class O extends n{constructor(F,U,j){if(typeof U=="function"||typeof j=="function")throw new r("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:z,version:W,...X}=U||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},X),typeof F!="string")throw new Error("constructor requires a location string argument");this[I]=F,this[A]=z??T,this[B]=parseInt(W||1,10),this[R]=null}get location(){return this[I]}get namePrefix(){return this[A]}get version(){return this[B]}get db(){return this[R]}get type(){return"browser-level"}_open(F,U){const j=indexedDB.open(this[A]+this[I],this[B]);j.onerror=function(){U(j.error||new Error("unknown error"))},j.onsuccess=()=>{this[R]=j.result,U()},j.onupgradeneeded=z=>{const W=z.target.result;W.objectStoreNames.contains(this[I])||W.createObjectStore(this[I])}}[D](F){return this[R].transaction([this[I]],F).objectStore(this[I])}[N](F,U){const j=F.transaction;j.onabort=function(){U(j.error||new Error("aborted by user"))},j.oncomplete=function(){U(null,F.result)}}_get(F,U,j){const z=this[D]("readonly");let W;try{W=z.get(F)}catch(X){return this.nextTick(j,X)}this[N](W,function(X,ie){if(X)return j(X);if(ie===void 0)return j(new r("Entry not found",{code:"LEVEL_NOT_FOUND"}));j(null,S(ie))})}_getMany(F,U,j){const z=this[D]("readonly"),W=F.map(X=>ie=>{let fe;try{fe=z.get(X)}catch(xe){return ie(xe)}fe.onsuccess=()=>{const xe=fe.result;ie(null,xe===void 0?xe:S(xe))},fe.onerror=xe=>{xe.stopPropagation(),ie(fe.error)}});g(W,16,j)}_del(F,U,j){const z=this[D]("readwrite");let W;try{W=z.delete(F)}catch(X){return this.nextTick(j,X)}this[N](W,j)}_put(F,U,j,z){const W=this[D]("readwrite");let X;try{X=W.put(U,F)}catch(ie){return this.nextTick(z,ie)}this[N](X,z)}_iterator(F){return new x(this,this[I],F)}_batch(F,U,j){const z=this[D]("readwrite"),W=z.transaction;let X=0,ie;W.onabort=function(){j(ie||W.error||new Error("aborted by user"))},W.oncomplete=function(){j()};function fe(){const xe=F[X++],we=xe.key;let G;try{G=xe.type==="del"?z.delete(we):z.put(xe.value,we)}catch(J){ie=J,W.abort();return}X<F.length?G.onsuccess=fe:typeof W.commit=="function"&&W.commit()}fe()}_clear(F,U){let j,z;try{j=C(F)}catch{return this.nextTick(U)}if(F.limit>=0)return E(this,this[I],j,F,U);try{const W=this[D]("readwrite");z=j?W.delete(j):W.clear()}catch(W){return this.nextTick(U,W)}this[N](z,U)}_close(F){this[R].close(),this.nextTick(F)}}return O.destroy=function(L,F,U){typeof F=="function"&&(U=F,F=T),U=_(U,M);const j=indexedDB.deleteDatabase(F+L);return j.onsuccess=function(){U()},j.onerror=function(z){U(z)},U[M]},browserLevel.BrowserLevel=O,browserLevel}var hasRequiredBrowser$e;function requireBrowser$e(){return hasRequiredBrowser$e||(hasRequiredBrowser$e=1,browser$f.Level=requireBrowserLevel().BrowserLevel),browser$f}var browserExports=requireBrowser$e();const defaultPath$1="./level",defaultValueEncoding="view",LevelStorage=async({path:n,valueEncoding:r}={})=>{n=n||defaultPath$1,r=r||defaultValueEncoding;const g=new browserExports.Level(n,{valueEncoding:r,passive:!0});return await g.open(),{put:async(A,I)=>{await g.put(A,I)},del:async A=>{await g.del(A)},get:async A=>{try{const I=await g.get(A);if(I)return I}catch{}},iterator:async function*({amount:A,reverse:I}={}){const B={limit:A||-1,reverse:I||!1};for await(const[D,N]of g.iterator(B))yield[D,N]},merge:async A=>{},clear:async()=>{await g.clear()},close:async()=>{await g.close()}}},defaultSize=1e6,LRUStorage=async({size:n}={})=>{let r=new LRU(n||defaultSize);return{put:async(R,A)=>{r.set(R,A)},del:async R=>{r.remove(R)},get:async R=>r.get(R),iterator:async function*(){for await(const R of r.keys){const A=r.get(R);yield[R,A]}},merge:async R=>{if(R)for await(const[A,I]of R.iterator())r.set(A,I)},clear:async()=>{r=new LRU(n||defaultSize)},close:async()=>{}}},defaultReferencesCount=16,defaultCacheSize=1e3,Database=async({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B})=>{S=posixJoin(S||"./orbitdb",`./${g}/`),E=E||{},A=Number(A)>-1?A:defaultReferencesCount,T=T||await ComposedStorage(await LRUStorage({size:defaultCacheSize}),await IPFSBlockStorage({ipfs:n,pin:!0})),C=C||await ComposedStorage(await LRUStorage({size:defaultCacheSize}),await LevelStorage({path:posixJoin(S,"/log/_heads/")})),R=R||await ComposedStorage(await LRUStorage({size:defaultCacheSize}),await LevelStorage({path:posixJoin(S,"/log/_index/")}));const D=await Log(r,{logId:g,access:x,entryStorage:T,headsStorage:C,indexStorage:R}),N=new eventsExports.EventEmitter,M=new PQueue({concurrency:1}),O=async z=>{const W=async()=>{const ie=await D.append(z,{referencesCount:A});return await j.add(ie),B&&await B(D,ie),N.emit("update",ie),ie.hash},X=await M.add(W);return await M.onIdle(),X},L=async z=>{const W=async()=>{const X=await Entry.decode(z);X&&await D.joinEntry(X)&&(B&&await B(D,X),N.emit("update",X))};await M.add(W)},F=async()=>{await j.stop(),await M.onIdle(),await D.close(),x&&x.close&&await x.close(),N.emit("close")},U=async()=>{await M.onIdle(),await D.clear(),x&&x.drop&&await x.drop(),N.emit("drop")},j=await Sync({ipfs:n,log:D,events:N,onSynced:L,start:I});return{address:g,name:_,identity:r,meta:E,close:F,drop:U,addOperation:O,log:D,sync:j,peers:j.peers,events:N,access:x}},type$c="documents",DefaultOptions={indexBy:"_id"},Documents=({indexBy:n}=DefaultOptions)=>async({ipfs:r,identity:g,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:R,indexStorage:A,referencesCount:I,syncAutomatically:B,onUpdate:D})=>{const N=await Database({ipfs:r,identity:g,address:_,name:x,access:S,directory:E,meta:C,headsStorage:T,entryStorage:R,indexStorage:A,referencesCount:I,syncAutomatically:B}),{addOperation:M,log:O}=N,L=async X=>{const ie=X[n];if(!ie)throw new Error(`The provided document doesn't contain field '${n}'`);return M({op:"PUT",key:ie,value:X})},F=async X=>{if(!await U(X))throw new Error(`No document with key '${X}' in the database`);return M({op:"DEL",key:X,value:null})},U=async X=>{for await(const ie of z())if(X===ie.key)return ie},j=async X=>{const ie=[];for await(const fe of z())X(fe.value)&&ie.push(fe.value);return ie},z=async function*({amount:X}={}){const ie={};let fe=0;for await(const xe of O.iterator()){const{op:we,key:G,value:J}=xe.payload;if(we==="PUT"&&!ie[G]?(ie[G]=!0,fe++,yield{hash:xe.hash,key:G,value:J}):we==="DEL"&&!ie[G]&&(ie[G]=!0),fe>=X)break}};return{...N,type:type$c,put:L,del:F,get:U,iterator:z,query:j,indexBy:n,all:async()=>{const X=[];for await(const ie of z())X.unshift(ie);return X}}};Documents.type=type$c;const type$b="events",Events=()=>async({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B})=>{const D=await Database({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B}),{addOperation:N,log:M}=D,O=async j=>N({op:"ADD",key:null,value:j}),L=async j=>(await M.get(j)).payload.value,F=async function*({gt:j,gte:z,lt:W,lte:X,amount:ie}={}){const fe=M.iterator({gt:j,gte:z,lt:W,lte:X,amount:ie});for await(const xe of fe){const we=xe.hash,G=xe.payload.value;yield{hash:we,value:G}}};return{...D,type:type$b,add:O,get:L,iterator:F,all:async()=>{const j=[];for await(const z of F())j.unshift(z);return j}}};Events.type=type$b;const type$a="keyvalue",KeyValue=()=>async({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B})=>{const D=await Database({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B}),{addOperation:N,log:M}=D,O=async(z,W)=>N({op:"PUT",key:z,value:W}),L=async z=>N({op:"DEL",key:z,value:null}),F=async z=>{for await(const W of M.traverse()){const{op:X,key:ie,value:fe}=W.payload;if(X==="PUT"&&ie===z)return fe;if(X==="DEL"&&ie===z)return}},U=async function*({amount:z}={}){const W={};let X=0;for await(const ie of M.traverse()){const{op:fe,key:xe,value:we}=ie.payload;if(fe==="PUT"&&!W[xe]){W[xe]=!0,X++;const G=ie.hash;yield{key:xe,value:we,hash:G}}else fe==="DEL"&&!W[xe]&&(W[xe]=!0);if(X>=z)break}};return{...D,type:type$a,put:O,set:O,del:L,get:F,iterator:U,all:async()=>{const z=[];for await(const W of U())z.unshift(W);return z}}};KeyValue.type=type$a;const databaseTypes={},useDatabaseType=n=>{if(!n.type)throw new Error("Database type does not contain required field 'type'.");databaseTypes[n.type]=n},getDatabaseType=n=>{if(!n)throw new Error("Type not specified");if(!databaseTypes[n])throw new Error(`Unsupported database type: '${n}'`);return databaseTypes[n]};useDatabaseType(Events);useDatabaseType(Documents);useDatabaseType(KeyValue);let InvalidParametersError$4=class extends Error{static name="InvalidParametersError";constructor(r="Invalid parameters"){super(r),this.name="InvalidParametersError"}},InvalidPublicKeyError$1=class extends Error{static name="InvalidPublicKeyError";constructor(r="Invalid public key"){super(r),this.name="InvalidPublicKeyError"}},InvalidPrivateKeyError$1=class extends Error{static name="InvalidPrivateKeyError";constructor(r="Invalid private key"){super(r),this.name="InvalidPrivateKeyError"}};function equals$3(n,r){if(n===r)return!0;if(n.byteLength!==r.byteLength)return!1;for(let g=0;g<n.byteLength;g++)if(n[g]!==r[g])return!1;return!0}function coerce$1(n){if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")}function base$4(n,r){if(n.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),_=0;_<g.length;_++)g[_]=255;for(var x=0;x<n.length;x++){var S=n.charAt(x),E=S.charCodeAt(0);if(g[E]!==255)throw new TypeError(S+" is ambiguous");g[E]=x}var C=n.length,T=n.charAt(0),R=Math.log(C)/Math.log(256),A=Math.log(256)/Math.log(C);function I(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var M=0,O=0,L=0,F=N.length;L!==F&&N[L]===0;)L++,M++;for(var U=(F-L)*A+1>>>0,j=new Uint8Array(U);L!==F;){for(var z=N[L],W=0,X=U-1;(z!==0||W<O)&&X!==-1;X--,W++)z+=256*j[X]>>>0,j[X]=z%C>>>0,z=z/C>>>0;if(z!==0)throw new Error("Non-zero carry");O=W,L++}for(var ie=U-O;ie!==U&&j[ie]===0;)ie++;for(var fe=T.repeat(M);ie<U;++ie)fe+=n.charAt(j[ie]);return fe}function B(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var M=0;if(N[M]!==" "){for(var O=0,L=0;N[M]===T;)O++,M++;for(var F=(N.length-M)*R+1>>>0,U=new Uint8Array(F);N[M];){var j=g[N.charCodeAt(M)];if(j===255)return;for(var z=0,W=F-1;(j!==0||z<L)&&W!==-1;W--,z++)j+=C*U[W]>>>0,U[W]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");L=z,M++}if(N[M]!==" "){for(var X=F-L;X!==F&&U[X]===0;)X++;for(var ie=new Uint8Array(O+(F-X)),fe=O;X!==F;)ie[fe++]=U[X++];return ie}}}function D(N){var M=B(N);if(M)return M;throw new Error(`Non-${r} character`)}return{encode:I,decodeUnsafe:B,decode:D}}var src$1=base$4,_brrp__multiformats_scope_baseX$1=src$1;let Encoder$2=class{name;prefix;baseEncode;constructor(r,g,_){this.name=r,this.prefix=g,this.baseEncode=_}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}},Decoder$3=class{name;prefix;baseDecode;prefixCodePoint;constructor(r,g,_){this.name=r,this.prefix=g;const x=g.codePointAt(0);if(x===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=x,this.baseDecode=_}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return or$4(this,r)}},ComposedDecoder$1=class{decoders;constructor(r){this.decoders=r}or(r){return or$4(this,r)}decode(r){const g=r[0],_=this.decoders[g];if(_!=null)return _.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function or$4(n,r){return new ComposedDecoder$1({...n.decoders??{[n.prefix]:n},...r.decoders??{[r.prefix]:r}})}let Codec$1=class{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(r,g,_,x){this.name=r,this.prefix=g,this.baseEncode=_,this.baseDecode=x,this.encoder=new Encoder$2(r,g,_),this.decoder=new Decoder$3(r,g,x)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}};function from$3({name:n,prefix:r,encode:g,decode:_}){return new Codec$1(n,r,g,_)}function baseX$1({name:n,prefix:r,alphabet:g}){const{encode:_,decode:x}=_brrp__multiformats_scope_baseX$1(g,n);return from$3({prefix:r,name:n,encode:_,decode:S=>coerce$1(x(S))})}function decode$e(n,r,g,_){const x={};for(let A=0;A<r.length;++A)x[r[A]]=A;let S=n.length;for(;n[S-1]==="=";)--S;const E=new Uint8Array(S*g/8|0);let C=0,T=0,R=0;for(let A=0;A<S;++A){const I=x[n[A]];if(I===void 0)throw new SyntaxError(`Non-${_} character`);T=T<<g|I,C+=g,C>=8&&(C-=8,E[R++]=255&T>>C)}if(C>=g||255&T<<8-C)throw new SyntaxError("Unexpected end of data");return E}function encode$g(n,r,g){const _=r[r.length-1]==="=",x=(1<<g)-1;let S="",E=0,C=0;for(let T=0;T<n.length;++T)for(C=C<<8|n[T],E+=8;E>g;)E-=g,S+=r[x&C>>E];if(E!==0&&(S+=r[x&C<<g-E]),_)for(;S.length*g&7;)S+="=";return S}function rfc4648$1({name:n,prefix:r,bitsPerChar:g,alphabet:_}){return from$3({prefix:r,name:n,encode(x){return encode$g(x,_,g)},decode(x){return decode$e(x,_,g,n)}})}const base58btc=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"});baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var encode_1$1=encode$f,MSB$2=128,REST$2=127,MSBALL=~REST$2,INT=Math.pow(2,31);function encode$f(n,r,g){r=r||[],g=g||0;for(var _=g;n>=INT;)r[g++]=n&255|MSB$2,n/=128;for(;n&MSBALL;)r[g++]=n&255|MSB$2,n>>>=7;return r[g]=n|0,encode$f.bytes=g-_+1,r}var decode$d=read$2,MSB$1$1=128,REST$1$1=127;function read$2(n,_){var g=0,_=_||0,x=0,S=_,E,C=n.length;do{if(S>=C)throw read$2.bytes=0,new RangeError("Could not decode varint");E=n[S++],g+=x<28?(E&REST$1$1)<<x:(E&REST$1$1)*Math.pow(2,x),x+=7}while(E>=MSB$1$1);return read$2.bytes=S-_,g}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length$2=function(n){return n<N1$1?1:n<N2$1?2:n<N3$1?3:n<N4$1?4:n<N5$1?5:n<N6$1?6:n<N7$1?7:n<N8?8:n<N9?9:10},varint={encode:encode_1$1,decode:decode$d,encodingLength:length$2},_brrp_varint=varint;function decode$c(n,r=0){return[_brrp_varint.decode(n,r),_brrp_varint.decode.bytes]}function encodeTo(n,r,g=0){return _brrp_varint.encode(n,r,g),r}function encodingLength$1(n){return _brrp_varint.encodingLength(n)}function create$1(n,r){const g=r.byteLength,_=encodingLength$1(n),x=_+encodingLength$1(g),S=new Uint8Array(x+g);return encodeTo(n,S,0),encodeTo(g,S,_),S.set(r,x),new Digest(n,g,r,S)}function decode$b(n){const r=coerce$1(n),[g,_]=decode$c(r),[x,S]=decode$c(r.subarray(_)),E=r.subarray(_+S);if(E.byteLength!==x)throw new Error("Incorrect length");return new Digest(g,x,E,r)}function equals$2(n,r){if(n===r)return!0;{const g=r;return n.code===g.code&&n.size===g.size&&g.bytes instanceof Uint8Array&&equals$3(n.bytes,g.bytes)}}class Digest{code;size;digest;bytes;constructor(r,g,_,x){this.code=r,this.size=g,this.digest=_,this.bytes=x}}function format$5(n,r){const{bytes:g,version:_}=n;switch(_){case 0:return toStringV0(g,baseCache(n),r??base58btc.encoder);default:return toStringV1(g,baseCache(n),r??base32.encoder)}}const cache$2=new WeakMap;function baseCache(n){const r=cache$2.get(n);if(r==null){const g=new Map;return cache$2.set(n,g),g}return r}class CID{code;version;multihash;bytes;"/";constructor(r,g,_,x){this.code=g,this.version=r,this.multihash=_,this.bytes=x,this["/"]=x}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:r,multihash:g}=this;if(r!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(g.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(g)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:r,digest:g}=this.multihash,_=create$1(r,g);return CID.createV1(this.code,_)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(r){return CID.equals(this,r)}static equals(r,g){const _=g;return _!=null&&r.code===_.code&&r.version===_.version&&equals$2(r.multihash,_.multihash)}toString(r){return format$5(this,r)}toJSON(){return{"/":format$5(this)}}link(){return this}[Symbol.toStringTag]="CID";[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(r){if(r==null)return null;const g=r;if(g instanceof CID)return g;if(g["/"]!=null&&g["/"]===g.bytes||g.asCID===g){const{version:_,code:x,multihash:S,bytes:E}=g;return new CID(_,x,S,E??encodeCID(_,x,S.bytes))}else if(g[cidSymbol]===!0){const{version:_,multihash:x,code:S}=g,E=decode$b(x);return CID.create(_,S,E)}else return null}static create(r,g,_){if(typeof g!="number")throw new Error("String codecs are no longer supported");if(!(_.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(r){case 0:{if(g!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(r,g,_,_.bytes)}case 1:{const x=encodeCID(r,g,_.bytes);return new CID(r,g,_,x)}default:throw new Error("Invalid version")}}static createV0(r){return CID.create(0,DAG_PB_CODE,r)}static createV1(r,g){return CID.create(1,r,g)}static decode(r){const[g,_]=CID.decodeFirst(r);if(_.length!==0)throw new Error("Incorrect length");return g}static decodeFirst(r){const g=CID.inspectBytes(r),_=g.size-g.multihashSize,x=coerce$1(r.subarray(_,_+g.multihashSize));if(x.byteLength!==g.multihashSize)throw new Error("Incorrect length");const S=x.subarray(g.multihashSize-g.digestSize),E=new Digest(g.multihashCode,g.digestSize,S,x);return[g.version===0?CID.createV0(E):CID.createV1(g.codec,E),r.subarray(g.size)]}static inspectBytes(r){let g=0;const _=()=>{const[I,B]=decode$c(r.subarray(g));return g+=B,I};let x=_(),S=DAG_PB_CODE;if(x===18?(x=0,g=0):S=_(),x!==0&&x!==1)throw new RangeError(`Invalid CID version ${x}`);const E=g,C=_(),T=_(),R=g+T,A=R-E;return{version:x,codec:S,multihashCode:C,digestSize:T,multihashSize:A,size:R}}static parse(r,g){const[_,x]=parseCIDtoBytes(r,g),S=CID.decode(x);if(S.version===0&&r[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(S).set(_,r),S}}function parseCIDtoBytes(n,r){switch(n[0]){case"Q":{const g=r??base58btc;return[base58btc.prefix,g.decode(`${base58btc.prefix}${n}`)]}case base58btc.prefix:{const g=r??base58btc;return[base58btc.prefix,g.decode(n)]}case base32.prefix:{const g=r??base32;return[base32.prefix,g.decode(n)]}case base36.prefix:{const g=r??base36;return[base36.prefix,g.decode(n)]}default:{if(r==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[n[0],r.decode(n)]}}}function toStringV0(n,r,g){const{prefix:_}=g;if(_!==base58btc.prefix)throw Error(`Cannot string encode V0 in ${g.name} encoding`);const x=r.get(_);if(x==null){const S=g.encode(n).slice(1);return r.set(_,S),S}else return x}function toStringV1(n,r,g){const{prefix:_}=g,x=r.get(_);if(x==null){const S=g.encode(n);return r.set(_,S),S}else return x}const DAG_PB_CODE=112,SHA_256_CODE=18;function encodeCID(n,r,g){const _=encodingLength$1(n),x=_+encodingLength$1(r),S=new Uint8Array(x+g.byteLength);return encodeTo(n,S,0),encodeTo(r,S,_),S.set(g,x),S}const cidSymbol=Symbol.for("@ipld/js-cid/CID"),code$8=0,name$8="identity",encode$e=coerce$1;function digest$1(n){return create$1(code$8,encode$e(n))}const identity$3={code:code$8,name:name$8,encode:encode$e,digest:digest$1};function equals$1(n,r){if(n===r)return!0;if(n.byteLength!==r.byteLength)return!1;for(let g=0;g<n.byteLength;g++)if(n[g]!==r[g])return!1;return!0}function anumber$1(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function isBytes$3(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function abytes$2(n,...r){if(!isBytes$3(n))throw new Error("Uint8Array expected");if(r.length>0&&!r.includes(n.length))throw new Error("Uint8Array expected of length "+r+", got length="+n.length)}function ahash$1(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");anumber$1(n.outputLen),anumber$1(n.blockLen)}function aexists$1(n,r=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(r&&n.finished)throw new Error("Hash#digest() has already been called")}function aoutput$1(n,r){abytes$2(n);const g=r.outputLen;if(n.length<g)throw new Error("digestInto() expects output buffer of length at least "+g)}const crypto$3=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const createView$2=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),rotr$1=(n,r)=>n<<32-r|n>>>r;function utf8ToBytes$3(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function toBytes$3(n){return typeof n=="string"&&(n=utf8ToBytes$3(n)),abytes$2(n),n}function concatBytes$1(...n){let r=0;for(let _=0;_<n.length;_++){const x=n[_];abytes$2(x),r+=x.length}const g=new Uint8Array(r);for(let _=0,x=0;_<n.length;_++){const S=n[_];g.set(S,x),x+=S.length}return g}let Hash$2=class{clone(){return this._cloneInto()}};function wrapConstructor$1(n){const r=_=>n().update(toBytes$3(_)).digest(),g=n();return r.outputLen=g.outputLen,r.blockLen=g.blockLen,r.create=()=>n(),r}function randomBytes$2(n=32){if(crypto$3&&typeof crypto$3.getRandomValues=="function")return crypto$3.getRandomValues(new Uint8Array(n));if(crypto$3&&typeof crypto$3.randomBytes=="function")return crypto$3.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$2(n,r,g,_){if(typeof n.setBigUint64=="function")return n.setBigUint64(r,g,_);const x=BigInt(32),S=BigInt(4294967295),E=Number(g>>x&S),C=Number(g&S),T=_?4:0,R=_?0:4;n.setUint32(r+T,E,_),n.setUint32(r+R,C,_)}const Chi$2=(n,r,g)=>n&r^~n&g,Maj$1=(n,r,g)=>n&r^n&g^r&g;let HashMD$1=class extends Hash$2{constructor(r,g,_,x){super(),this.blockLen=r,this.outputLen=g,this.padOffset=_,this.isLE=x,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=createView$2(this.buffer)}update(r){aexists$1(this);const{view:g,buffer:_,blockLen:x}=this;r=toBytes$3(r);const S=r.length;for(let E=0;E<S;){const C=Math.min(x-this.pos,S-E);if(C===x){const T=createView$2(r);for(;x<=S-E;E+=x)this.process(T,E);continue}_.set(r.subarray(E,E+C),this.pos),this.pos+=C,E+=C,this.pos===x&&(this.process(g,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){aexists$1(this),aoutput$1(r,this),this.finished=!0;const{buffer:g,view:_,blockLen:x,isLE:S}=this;let{pos:E}=this;g[E++]=128,this.buffer.subarray(E).fill(0),this.padOffset>x-E&&(this.process(_,0),E=0);for(let I=E;I<x;I++)g[I]=0;setBigUint64$2(_,x-8,BigInt(this.length*8),S),this.process(_,0);const C=createView$2(r),T=this.outputLen;if(T%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const R=T/4,A=this.get();if(R>A.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<R;I++)C.setUint32(4*I,A[I],S)}digest(){const{buffer:r,outputLen:g}=this;this.digestInto(r);const _=r.slice(0,g);return this.destroy(),_}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:g,buffer:_,length:x,finished:S,destroyed:E,pos:C}=this;return r.length=x,r.pos=C,r.finished=S,r.destroyed=E,x%g&&r.buffer.set(_),r}};const U32_MASK64$1=BigInt(2**32-1),_32n$1=BigInt(32);function fromBig$1(n,r=!1){return r?{h:Number(n&U32_MASK64$1),l:Number(n>>_32n$1&U32_MASK64$1)}:{h:Number(n>>_32n$1&U32_MASK64$1)|0,l:Number(n&U32_MASK64$1)|0}}function split$1(n,r=!1){let g=new Uint32Array(n.length),_=new Uint32Array(n.length);for(let x=0;x<n.length;x++){const{h:S,l:E}=fromBig$1(n[x],r);[g[x],_[x]]=[S,E]}return[g,_]}const toBig$1=(n,r)=>BigInt(n>>>0)<<_32n$1|BigInt(r>>>0),shrSH$1=(n,r,g)=>n>>>g,shrSL$1=(n,r,g)=>n<<32-g|r>>>g,rotrSH$1=(n,r,g)=>n>>>g|r<<32-g,rotrSL$1=(n,r,g)=>n<<32-g|r>>>g,rotrBH$1=(n,r,g)=>n<<64-g|r>>>g-32,rotrBL$1=(n,r,g)=>n>>>g-32|r<<64-g,rotr32H$1=(n,r)=>r,rotr32L$1=(n,r)=>n,rotlSH$1=(n,r,g)=>n<<g|r>>>32-g,rotlSL$1=(n,r,g)=>r<<g|n>>>32-g,rotlBH$1=(n,r,g)=>r<<g-32|n>>>64-g,rotlBL$1=(n,r,g)=>n<<g-32|r>>>64-g;function add$1(n,r,g,_){const x=(r>>>0)+(_>>>0);return{h:n+g+(x/2**32|0)|0,l:x|0}}const add3L$1=(n,r,g)=>(n>>>0)+(r>>>0)+(g>>>0),add3H$1=(n,r,g,_)=>r+g+_+(n/2**32|0)|0,add4L$1=(n,r,g,_)=>(n>>>0)+(r>>>0)+(g>>>0)+(_>>>0),add4H$1=(n,r,g,_,x)=>r+g+_+x+(n/2**32|0)|0,add5L$1=(n,r,g,_,x)=>(n>>>0)+(r>>>0)+(g>>>0)+(_>>>0)+(x>>>0),add5H$1=(n,r,g,_,x,S)=>r+g+_+x+S+(n/2**32|0)|0,u64$1={fromBig:fromBig$1,split:split$1,toBig:toBig$1,shrSH:shrSH$1,shrSL:shrSL$1,rotrSH:rotrSH$1,rotrSL:rotrSL$1,rotrBH:rotrBH$1,rotrBL:rotrBL$1,rotr32H:rotr32H$1,rotr32L:rotr32L$1,rotlSH:rotlSH$1,rotlSL:rotlSL$1,rotlBH:rotlBH$1,rotlBL:rotlBL$1,add:add$1,add3L:add3L$1,add3H:add3H$1,add4L:add4L$1,add4H:add4H$1,add5H:add5H$1,add5L:add5L$1},[SHA512_Kh$1,SHA512_Kl$1]=u64$1.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),SHA512_W_H$1=new Uint32Array(80),SHA512_W_L$1=new Uint32Array(80);let SHA512$1=class extends HashMD$1{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:g,Bh:_,Bl:x,Ch:S,Cl:E,Dh:C,Dl:T,Eh:R,El:A,Fh:I,Fl:B,Gh:D,Gl:N,Hh:M,Hl:O}=this;return[r,g,_,x,S,E,C,T,R,A,I,B,D,N,M,O]}set(r,g,_,x,S,E,C,T,R,A,I,B,D,N,M,O){this.Ah=r|0,this.Al=g|0,this.Bh=_|0,this.Bl=x|0,this.Ch=S|0,this.Cl=E|0,this.Dh=C|0,this.Dl=T|0,this.Eh=R|0,this.El=A|0,this.Fh=I|0,this.Fl=B|0,this.Gh=D|0,this.Gl=N|0,this.Hh=M|0,this.Hl=O|0}process(r,g){for(let U=0;U<16;U++,g+=4)SHA512_W_H$1[U]=r.getUint32(g),SHA512_W_L$1[U]=r.getUint32(g+=4);for(let U=16;U<80;U++){const j=SHA512_W_H$1[U-15]|0,z=SHA512_W_L$1[U-15]|0,W=u64$1.rotrSH(j,z,1)^u64$1.rotrSH(j,z,8)^u64$1.shrSH(j,z,7),X=u64$1.rotrSL(j,z,1)^u64$1.rotrSL(j,z,8)^u64$1.shrSL(j,z,7),ie=SHA512_W_H$1[U-2]|0,fe=SHA512_W_L$1[U-2]|0,xe=u64$1.rotrSH(ie,fe,19)^u64$1.rotrBH(ie,fe,61)^u64$1.shrSH(ie,fe,6),we=u64$1.rotrSL(ie,fe,19)^u64$1.rotrBL(ie,fe,61)^u64$1.shrSL(ie,fe,6),G=u64$1.add4L(X,we,SHA512_W_L$1[U-7],SHA512_W_L$1[U-16]),J=u64$1.add4H(G,W,xe,SHA512_W_H$1[U-7],SHA512_W_H$1[U-16]);SHA512_W_H$1[U]=J|0,SHA512_W_L$1[U]=G|0}let{Ah:_,Al:x,Bh:S,Bl:E,Ch:C,Cl:T,Dh:R,Dl:A,Eh:I,El:B,Fh:D,Fl:N,Gh:M,Gl:O,Hh:L,Hl:F}=this;for(let U=0;U<80;U++){const j=u64$1.rotrSH(I,B,14)^u64$1.rotrSH(I,B,18)^u64$1.rotrBH(I,B,41),z=u64$1.rotrSL(I,B,14)^u64$1.rotrSL(I,B,18)^u64$1.rotrBL(I,B,41),W=I&D^~I&M,X=B&N^~B&O,ie=u64$1.add5L(F,z,X,SHA512_Kl$1[U],SHA512_W_L$1[U]),fe=u64$1.add5H(ie,L,j,W,SHA512_Kh$1[U],SHA512_W_H$1[U]),xe=ie|0,we=u64$1.rotrSH(_,x,28)^u64$1.rotrBH(_,x,34)^u64$1.rotrBH(_,x,39),G=u64$1.rotrSL(_,x,28)^u64$1.rotrBL(_,x,34)^u64$1.rotrBL(_,x,39),J=_&S^_&C^S&C,q=x&E^x&T^E&T;L=M|0,F=O|0,M=D|0,O=N|0,D=I|0,N=B|0,{h:I,l:B}=u64$1.add(R|0,A|0,fe|0,xe|0),R=C|0,A=T|0,C=S|0,T=E|0,S=_|0,E=x|0;const H=u64$1.add3L(xe,G,q);_=u64$1.add3H(H,fe,we,J),x=H|0}({h:_,l:x}=u64$1.add(this.Ah|0,this.Al|0,_|0,x|0)),{h:S,l:E}=u64$1.add(this.Bh|0,this.Bl|0,S|0,E|0),{h:C,l:T}=u64$1.add(this.Ch|0,this.Cl|0,C|0,T|0),{h:R,l:A}=u64$1.add(this.Dh|0,this.Dl|0,R|0,A|0),{h:I,l:B}=u64$1.add(this.Eh|0,this.El|0,I|0,B|0),{h:D,l:N}=u64$1.add(this.Fh|0,this.Fl|0,D|0,N|0),{h:M,l:O}=u64$1.add(this.Gh|0,this.Gl|0,M|0,O|0),{h:L,l:F}=u64$1.add(this.Hh|0,this.Hl|0,L|0,F|0),this.set(_,x,S,E,C,T,R,A,I,B,D,N,M,O,L,F)}roundClean(){SHA512_W_H$1.fill(0),SHA512_W_L$1.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}};const sha512$4=wrapConstructor$1(()=>new SHA512$1);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$5=BigInt(0),_1n$7=BigInt(1),_2n$4=BigInt(2);function isBytes$2(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function abytes$1(n){if(!isBytes$2(n))throw new Error("Uint8Array expected")}function abool(n,r){if(typeof r!="boolean")throw new Error(n+" boolean expected, got "+r)}const hexes=Array.from({length:256},(n,r)=>r.toString(16).padStart(2,"0"));function bytesToHex(n){abytes$1(n);let r="";for(let g=0;g<n.length;g++)r+=hexes[n[g]];return r}function numberToHexUnpadded(n){const r=n.toString(16);return r.length&1?"0"+r:r}function hexToNumber(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?_0n$5:BigInt("0x"+n)}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(n){if(n>=asciis._0&&n<=asciis._9)return n-asciis._0;if(n>=asciis.A&&n<=asciis.F)return n-(asciis.A-10);if(n>=asciis.a&&n<=asciis.f)return n-(asciis.a-10)}function hexToBytes(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const r=n.length,g=r/2;if(r%2)throw new Error("hex string expected, got unpadded hex of length "+r);const _=new Uint8Array(g);for(let x=0,S=0;x<g;x++,S+=2){const E=asciiToBase16(n.charCodeAt(S)),C=asciiToBase16(n.charCodeAt(S+1));if(E===void 0||C===void 0){const T=n[S]+n[S+1];throw new Error('hex string expected, got non-hex character "'+T+'" at index '+S)}_[x]=E*16+C}return _}function bytesToNumberBE(n){return hexToNumber(bytesToHex(n))}function bytesToNumberLE(n){return abytes$1(n),hexToNumber(bytesToHex(Uint8Array.from(n).reverse()))}function numberToBytesBE(n,r){return hexToBytes(n.toString(16).padStart(r*2,"0"))}function numberToBytesLE(n,r){return numberToBytesBE(n,r).reverse()}function numberToVarBytesBE(n){return hexToBytes(numberToHexUnpadded(n))}function ensureBytes(n,r,g){let _;if(typeof r=="string")try{_=hexToBytes(r)}catch(S){throw new Error(n+" must be hex string or Uint8Array, cause: "+S)}else if(isBytes$2(r))_=Uint8Array.from(r);else throw new Error(n+" must be hex string or Uint8Array");const x=_.length;if(typeof g=="number"&&x!==g)throw new Error(n+" of length "+g+" expected, got "+x);return _}function concatBytes(...n){let r=0;for(let _=0;_<n.length;_++){const x=n[_];abytes$1(x),r+=x.length}const g=new Uint8Array(r);for(let _=0,x=0;_<n.length;_++){const S=n[_];g.set(S,x),x+=S.length}return g}function equalBytes$1(n,r){if(n.length!==r.length)return!1;let g=0;for(let _=0;_<n.length;_++)g|=n[_]^r[_];return g===0}function utf8ToBytes$2(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}const isPosBig=n=>typeof n=="bigint"&&_0n$5<=n;function inRange(n,r,g){return isPosBig(n)&&isPosBig(r)&&isPosBig(g)&&r<=n&&n<g}function aInRange(n,r,g,_){if(!inRange(r,g,_))throw new Error("expected valid "+n+": "+g+" <= n < "+_+", got "+r)}function bitLen(n){let r;for(r=0;n>_0n$5;n>>=_1n$7,r+=1);return r}function bitGet(n,r){return n>>BigInt(r)&_1n$7}function bitSet(n,r,g){return n|(g?_1n$7:_0n$5)<<BigInt(r)}const bitMask=n=>(_2n$4<<BigInt(n-1))-_1n$7,u8n=n=>new Uint8Array(n),u8fr=n=>Uint8Array.from(n);function createHmacDrbg(n,r,g){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof r!="number"||r<2)throw new Error("qByteLen must be a number");if(typeof g!="function")throw new Error("hmacFn must be a function");let _=u8n(n),x=u8n(n),S=0;const E=()=>{_.fill(1),x.fill(0),S=0},C=(...I)=>g(x,_,...I),T=(I=u8n())=>{x=C(u8fr([0]),I),_=C(),I.length!==0&&(x=C(u8fr([1]),I),_=C())},R=()=>{if(S++>=1e3)throw new Error("drbg: tried 1000 values");let I=0;const B=[];for(;I<r;){_=C();const D=_.slice();B.push(D),I+=_.length}return concatBytes(...B)};return(I,B)=>{E(),T(I);let D;for(;!(D=B(R()));)T();return E(),D}}const validatorFns={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||isBytes$2(n),isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,r)=>r.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function validateObject(n,r,g={}){const _=(x,S,E)=>{const C=validatorFns[S];if(typeof C!="function")throw new Error("invalid validator function");const T=n[x];if(!(E&&T===void 0)&&!C(T,n))throw new Error("param "+String(x)+" is invalid. Expected "+S+", got "+T)};for(const[x,S]of Object.entries(r))_(x,S,!1);for(const[x,S]of Object.entries(g))_(x,S,!0);return n}const notImplemented=()=>{throw new Error("not implemented")};function memoized(n){const r=new WeakMap;return(g,..._)=>{const x=r.get(g);if(x!==void 0)return x;const S=n(g,..._);return r.set(g,S),S}}const ut$1=Object.freeze(Object.defineProperty({__proto__:null,aInRange,abool,abytes:abytes$1,bitGet,bitLen,bitMask,bitSet,bytesToHex,bytesToNumberBE,bytesToNumberLE,concatBytes,createHmacDrbg,ensureBytes,equalBytes:equalBytes$1,hexToBytes,hexToNumber,inRange,isBytes:isBytes$2,memoized,notImplemented,numberToBytesBE,numberToBytesLE,numberToHexUnpadded,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$2,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$6=BigInt(1),_2n$3=BigInt(2),_3n$2=BigInt(3),_4n=BigInt(4),_5n$1=BigInt(5),_8n$2=BigInt(8);function mod(n,r){const g=n%r;return g>=_0n$4?g:r+g}function pow(n,r,g){if(r<_0n$4)throw new Error("invalid exponent, negatives unsupported");if(g<=_0n$4)throw new Error("invalid modulus");if(g===_1n$6)return _0n$4;let _=_1n$6;for(;r>_0n$4;)r&_1n$6&&(_=_*n%g),n=n*n%g,r>>=_1n$6;return _}function pow2(n,r,g){let _=n;for(;r-- >_0n$4;)_*=_,_%=g;return _}function invert(n,r){if(n===_0n$4)throw new Error("invert: expected non-zero number");if(r<=_0n$4)throw new Error("invert: expected positive modulus, got "+r);let g=mod(n,r),_=r,x=_0n$4,S=_1n$6;for(;g!==_0n$4;){const C=_/g,T=_%g,R=x-S*C;_=g,g=T,x=S,S=R}if(_!==_1n$6)throw new Error("invert: does not exist");return mod(x,r)}function tonelliShanks(n){const r=(n-_1n$6)/_2n$3;let g,_,x;for(g=n-_1n$6,_=0;g%_2n$3===_0n$4;g/=_2n$3,_++);for(x=_2n$3;x<n&&pow(x,r,n)!==n-_1n$6;x++)if(x>1e3)throw new Error("Cannot find square root: likely non-prime P");if(_===1){const E=(n+_1n$6)/_4n;return function(T,R){const A=T.pow(R,E);if(!T.eql(T.sqr(A),R))throw new Error("Cannot find square root");return A}}const S=(g+_1n$6)/_2n$3;return function(C,T){if(C.pow(T,r)===C.neg(C.ONE))throw new Error("Cannot find square root");let R=_,A=C.pow(C.mul(C.ONE,x),g),I=C.pow(T,S),B=C.pow(T,g);for(;!C.eql(B,C.ONE);){if(C.eql(B,C.ZERO))return C.ZERO;let D=1;for(let M=C.sqr(B);D<R&&!C.eql(M,C.ONE);D++)M=C.sqr(M);const N=C.pow(A,_1n$6<<BigInt(R-D-1));A=C.sqr(N),I=C.mul(I,N),B=C.mul(B,A),R=D}return I}}function FpSqrt(n){if(n%_4n===_3n$2){const r=(n+_1n$6)/_4n;return function(_,x){const S=_.pow(x,r);if(!_.eql(_.sqr(S),x))throw new Error("Cannot find square root");return S}}if(n%_8n$2===_5n$1){const r=(n-_5n$1)/_8n$2;return function(_,x){const S=_.mul(x,_2n$3),E=_.pow(S,r),C=_.mul(x,E),T=_.mul(_.mul(C,_2n$3),E),R=_.mul(C,_.sub(T,_.ONE));if(!_.eql(_.sqr(R),x))throw new Error("Cannot find square root");return R}}return tonelliShanks(n)}const isNegativeLE=(n,r)=>(mod(n,r)&_1n$6)===_1n$6,FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(n){const r={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},g=FIELD_FIELDS.reduce((_,x)=>(_[x]="function",_),r);return validateObject(n,g)}function FpPow(n,r,g){if(g<_0n$4)throw new Error("invalid exponent, negatives unsupported");if(g===_0n$4)return n.ONE;if(g===_1n$6)return r;let _=n.ONE,x=r;for(;g>_0n$4;)g&_1n$6&&(_=n.mul(_,x)),x=n.sqr(x),g>>=_1n$6;return _}function FpInvertBatch(n,r){const g=new Array(r.length),_=r.reduce((S,E,C)=>n.is0(E)?S:(g[C]=S,n.mul(S,E)),n.ONE),x=n.inv(_);return r.reduceRight((S,E,C)=>n.is0(E)?S:(g[C]=n.mul(S,g[C]),n.mul(S,E)),x),g}function nLength(n,r){const g=r!==void 0?r:n.toString(2).length,_=Math.ceil(g/8);return{nBitLength:g,nByteLength:_}}function Field(n,r,g=!1,_={}){if(n<=_0n$4)throw new Error("invalid field: expected ORDER > 0, got "+n);const{nBitLength:x,nByteLength:S}=nLength(n,r);if(S>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let E;const C=Object.freeze({ORDER:n,BITS:x,BYTES:S,MASK:bitMask(x),ZERO:_0n$4,ONE:_1n$6,create:T=>mod(T,n),isValid:T=>{if(typeof T!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof T);return _0n$4<=T&&T<n},is0:T=>T===_0n$4,isOdd:T=>(T&_1n$6)===_1n$6,neg:T=>mod(-T,n),eql:(T,R)=>T===R,sqr:T=>mod(T*T,n),add:(T,R)=>mod(T+R,n),sub:(T,R)=>mod(T-R,n),mul:(T,R)=>mod(T*R,n),pow:(T,R)=>FpPow(C,T,R),div:(T,R)=>mod(T*invert(R,n),n),sqrN:T=>T*T,addN:(T,R)=>T+R,subN:(T,R)=>T-R,mulN:(T,R)=>T*R,inv:T=>invert(T,n),sqrt:_.sqrt||(T=>(E||(E=FpSqrt(n)),E(C,T))),invertBatch:T=>FpInvertBatch(C,T),cmov:(T,R,A)=>A?R:T,toBytes:T=>g?numberToBytesLE(T,S):numberToBytesBE(T,S),fromBytes:T=>{if(T.length!==S)throw new Error("Field.fromBytes: expected "+S+" bytes, got "+T.length);return g?bytesToNumberLE(T):bytesToNumberBE(T)}});return Object.freeze(C)}function getFieldBytesLength(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const r=n.toString(2).length;return Math.ceil(r/8)}function getMinHashLength(n){const r=getFieldBytesLength(n);return r+Math.ceil(r/2)}function mapHashToField(n,r,g=!1){const _=n.length,x=getFieldBytesLength(r),S=getMinHashLength(r);if(_<16||_<S||_>1024)throw new Error("expected "+S+"-1024 bytes of input, got "+_);const E=g?bytesToNumberBE(n):bytesToNumberLE(n),C=mod(E,r-_1n$6)+_1n$6;return g?numberToBytesLE(C,x):numberToBytesBE(C,x)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$5=BigInt(1);function constTimeNegate(n,r){const g=r.negate();return n?g:r}function validateW(n,r){if(!Number.isSafeInteger(n)||n<=0||n>r)throw new Error("invalid window size, expected [1.."+r+"], got W="+n)}function calcWOpts(n,r){validateW(n,r);const g=Math.ceil(r/n)+1,_=2**(n-1);return{windows:g,windowSize:_}}function validateMSMPoints(n,r){if(!Array.isArray(n))throw new Error("array expected");n.forEach((g,_)=>{if(!(g instanceof r))throw new Error("invalid point at index "+_)})}function validateMSMScalars(n,r){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((g,_)=>{if(!r.isValid(g))throw new Error("invalid scalar at index "+_)})}const pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function getW(n){return pointWindowSizes.get(n)||1}function wNAF(n,r){return{constTimeNegate,hasPrecomputes(g){return getW(g)!==1},unsafeLadder(g,_,x=n.ZERO){let S=g;for(;_>_0n$3;)_&_1n$5&&(x=x.add(S)),S=S.double(),_>>=_1n$5;return x},precomputeWindow(g,_){const{windows:x,windowSize:S}=calcWOpts(_,r),E=[];let C=g,T=C;for(let R=0;R<x;R++){T=C,E.push(T);for(let A=1;A<S;A++)T=T.add(C),E.push(T);C=T.double()}return E},wNAF(g,_,x){const{windows:S,windowSize:E}=calcWOpts(g,r);let C=n.ZERO,T=n.BASE;const R=BigInt(2**g-1),A=2**g,I=BigInt(g);for(let B=0;B<S;B++){const D=B*E;let N=Number(x&R);x>>=I,N>E&&(N-=A,x+=_1n$5);const M=D,O=D+Math.abs(N)-1,L=B%2!==0,F=N<0;N===0?T=T.add(constTimeNegate(L,_[M])):C=C.add(constTimeNegate(F,_[O]))}return{p:C,f:T}},wNAFUnsafe(g,_,x,S=n.ZERO){const{windows:E,windowSize:C}=calcWOpts(g,r),T=BigInt(2**g-1),R=2**g,A=BigInt(g);for(let I=0;I<E;I++){const B=I*C;if(x===_0n$3)break;let D=Number(x&T);if(x>>=A,D>C&&(D-=R,x+=_1n$5),D===0)continue;let N=_[B+Math.abs(D)-1];D<0&&(N=N.negate()),S=S.add(N)}return S},getPrecomputes(g,_,x){let S=pointPrecomputes.get(_);return S||(S=this.precomputeWindow(_,g),g!==1&&pointPrecomputes.set(_,x(S))),S},wNAFCached(g,_,x){const S=getW(g);return this.wNAF(S,this.getPrecomputes(S,g,x),_)},wNAFCachedUnsafe(g,_,x,S){const E=getW(g);return E===1?this.unsafeLadder(g,_,S):this.wNAFUnsafe(E,this.getPrecomputes(E,g,x),_,S)},setWindowSize(g,_){validateW(_,r),pointWindowSizes.set(g,_),pointPrecomputes.delete(g)}}}function pippenger(n,r,g,_){if(validateMSMPoints(g,n),validateMSMScalars(_,r),g.length!==_.length)throw new Error("arrays of points and scalars must have equal length");const x=n.ZERO,S=bitLen(BigInt(g.length)),E=S>12?S-3:S>4?S-2:S?2:1,C=(1<<E)-1,T=new Array(C+1).fill(x),R=Math.floor((r.BITS-1)/E)*E;let A=x;for(let I=R;I>=0;I-=E){T.fill(x);for(let D=0;D<_.length;D++){const N=_[D],M=Number(N>>BigInt(I)&BigInt(C));T[M]=T[M].add(g[D])}let B=x;for(let D=T.length-1,N=x;D>0;D--)N=N.add(T[D]),B=B.add(N);if(A=A.add(B),I!==0)for(let D=0;D<E;D++)A=A.double()}return A}function validateBasic(n){return validateField(n.Fp),validateObject(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$4=BigInt(1),_2n$2=BigInt(2),_8n$1=BigInt(8),VERIFY_DEFAULT={zip215:!0};function validateOpts$2(n){const r=validateBasic(n);return validateObject(n,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...r})}function twistedEdwards(n){const r=validateOpts$2(n),{Fp:g,n:_,prehash:x,hash:S,randomBytes:E,nByteLength:C,h:T}=r,R=_2n$2<<BigInt(C*8)-_1n$4,A=g.create,I=Field(r.n,r.nBitLength),B=r.uvRatio||((ve,Z)=>{try{return{isValid:!0,value:g.sqrt(ve*g.inv(Z))}}catch{return{isValid:!1,value:_0n$2}}}),D=r.adjustScalarBytes||(ve=>ve),N=r.domain||((ve,Z,ce)=>{if(abool("phflag",ce),Z.length||ce)throw new Error("Contexts/pre-hash are not supported");return ve});function M(ve,Z){aInRange("coordinate "+ve,Z,_0n$2,R)}function O(ve){if(!(ve instanceof U))throw new Error("ExtendedPoint expected")}const L=memoized((ve,Z)=>{const{ex:ce,ey:ue,ez:se}=ve,te=ve.is0();Z==null&&(Z=te?_8n$1:g.inv(se));const Y=A(ce*Z),be=A(ue*Z),ye=A(se*Z);if(te)return{x:_0n$2,y:_1n$4};if(ye!==_1n$4)throw new Error("invZ was invalid");return{x:Y,y:be}}),F=memoized(ve=>{const{a:Z,d:ce}=r;if(ve.is0())throw new Error("bad point: ZERO");const{ex:ue,ey:se,ez:te,et:Y}=ve,be=A(ue*ue),ye=A(se*se),Ie=A(te*te),ke=A(Ie*Ie),Ce=A(be*Z),Ae=A(Ie*A(Ce+ye)),Ne=A(ke+A(ce*A(be*ye)));if(Ae!==Ne)throw new Error("bad point: equation left != right (1)");const We=A(ue*se),Be=A(te*Y);if(We!==Be)throw new Error("bad point: equation left != right (2)");return!0});class U{constructor(Z,ce,ue,se){this.ex=Z,this.ey=ce,this.ez=ue,this.et=se,M("x",Z),M("y",ce),M("z",ue),M("t",se),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(Z){if(Z instanceof U)throw new Error("extended point not allowed");const{x:ce,y:ue}=Z||{};return M("x",ce),M("y",ue),new U(ce,ue,_1n$4,A(ce*ue))}static normalizeZ(Z){const ce=g.invertBatch(Z.map(ue=>ue.ez));return Z.map((ue,se)=>ue.toAffine(ce[se])).map(U.fromAffine)}static msm(Z,ce){return pippenger(U,I,Z,ce)}_setWindowSize(Z){W.setWindowSize(this,Z)}assertValidity(){F(this)}equals(Z){O(Z);const{ex:ce,ey:ue,ez:se}=this,{ex:te,ey:Y,ez:be}=Z,ye=A(ce*be),Ie=A(te*se),ke=A(ue*be),Ce=A(Y*se);return ye===Ie&&ke===Ce}is0(){return this.equals(U.ZERO)}negate(){return new U(A(-this.ex),this.ey,this.ez,A(-this.et))}double(){const{a:Z}=r,{ex:ce,ey:ue,ez:se}=this,te=A(ce*ce),Y=A(ue*ue),be=A(_2n$2*A(se*se)),ye=A(Z*te),Ie=ce+ue,ke=A(A(Ie*Ie)-te-Y),Ce=ye+Y,Ae=Ce-be,Ne=ye-Y,We=A(ke*Ae),Be=A(Ce*Ne),Se=A(ke*Ne),$e=A(Ae*Ce);return new U(We,Be,$e,Se)}add(Z){O(Z);const{a:ce,d:ue}=r,{ex:se,ey:te,ez:Y,et:be}=this,{ex:ye,ey:Ie,ez:ke,et:Ce}=Z;if(ce===BigInt(-1)){const Je=A((te-se)*(Ie+ye)),Qe=A((te+se)*(Ie-ye)),rt=A(Qe-Je);if(rt===_0n$2)return this.double();const wt=A(Y*_2n$2*Ce),bt=A(be*_2n$2*ke),xt=bt+wt,Et=Qe+Je,Rt=bt-wt,$t=A(xt*rt),qt=A(Et*Rt),Ge=A(xt*Rt),De=A(rt*Et);return new U($t,qt,De,Ge)}const Ae=A(se*ye),Ne=A(te*Ie),We=A(be*ue*Ce),Be=A(Y*ke),Se=A((se+te)*(ye+Ie)-Ae-Ne),$e=Be-We,_e=Be+We,Oe=A(Ne-ce*Ae),Ke=A(Se*$e),Me=A(_e*Oe),Le=A(Se*Oe),ze=A($e*_e);return new U(Ke,Me,ze,Le)}subtract(Z){return this.add(Z.negate())}wNAF(Z){return W.wNAFCached(this,Z,U.normalizeZ)}multiply(Z){const ce=Z;aInRange("scalar",ce,_1n$4,_);const{p:ue,f:se}=this.wNAF(ce);return U.normalizeZ([ue,se])[0]}multiplyUnsafe(Z,ce=U.ZERO){const ue=Z;return aInRange("scalar",ue,_0n$2,_),ue===_0n$2?z:this.is0()||ue===_1n$4?this:W.wNAFCachedUnsafe(this,ue,U.normalizeZ,ce)}isSmallOrder(){return this.multiplyUnsafe(T).is0()}isTorsionFree(){return W.unsafeLadder(this,_).is0()}toAffine(Z){return L(this,Z)}clearCofactor(){const{h:Z}=r;return Z===_1n$4?this:this.multiplyUnsafe(Z)}static fromHex(Z,ce=!1){const{d:ue,a:se}=r,te=g.BYTES;Z=ensureBytes("pointHex",Z,te),abool("zip215",ce);const Y=Z.slice(),be=Z[te-1];Y[te-1]=be&-129;const ye=bytesToNumberLE(Y),Ie=ce?R:g.ORDER;aInRange("pointHex.y",ye,_0n$2,Ie);const ke=A(ye*ye),Ce=A(ke-_1n$4),Ae=A(ue*ke-se);let{isValid:Ne,value:We}=B(Ce,Ae);if(!Ne)throw new Error("Point.fromHex: invalid y coordinate");const Be=(We&_1n$4)===_1n$4,Se=(be&128)!==0;if(!ce&&We===_0n$2&&Se)throw new Error("Point.fromHex: x=0 and x_0=1");return Se!==Be&&(We=A(-We)),U.fromAffine({x:We,y:ye})}static fromPrivateKey(Z){return fe(Z).point}toRawBytes(){const{x:Z,y:ce}=this.toAffine(),ue=numberToBytesLE(ce,g.BYTES);return ue[ue.length-1]|=Z&_1n$4?128:0,ue}toHex(){return bytesToHex(this.toRawBytes())}}U.BASE=new U(r.Gx,r.Gy,_1n$4,A(r.Gx*r.Gy)),U.ZERO=new U(_0n$2,_1n$4,_1n$4,_0n$2);const{BASE:j,ZERO:z}=U,W=wNAF(U,C*8);function X(ve){return mod(ve,_)}function ie(ve){return X(bytesToNumberLE(ve))}function fe(ve){const Z=g.BYTES;ve=ensureBytes("private key",ve,Z);const ce=ensureBytes("hashed private key",S(ve),2*Z),ue=D(ce.slice(0,Z)),se=ce.slice(Z,2*Z),te=ie(ue),Y=j.multiply(te),be=Y.toRawBytes();return{head:ue,prefix:se,scalar:te,point:Y,pointBytes:be}}function xe(ve){return fe(ve).pointBytes}function we(ve=new Uint8Array,...Z){const ce=concatBytes(...Z);return ie(S(N(ce,ensureBytes("context",ve),!!x)))}function G(ve,Z,ce={}){ve=ensureBytes("message",ve),x&&(ve=x(ve));const{prefix:ue,scalar:se,pointBytes:te}=fe(Z),Y=we(ce.context,ue,ve),be=j.multiply(Y).toRawBytes(),ye=we(ce.context,be,te,ve),Ie=X(Y+ye*se);aInRange("signature.s",Ie,_0n$2,_);const ke=concatBytes(be,numberToBytesLE(Ie,g.BYTES));return ensureBytes("result",ke,g.BYTES*2)}const J=VERIFY_DEFAULT;function q(ve,Z,ce,ue=J){const{context:se,zip215:te}=ue,Y=g.BYTES;ve=ensureBytes("signature",ve,2*Y),Z=ensureBytes("message",Z),ce=ensureBytes("publicKey",ce,Y),te!==void 0&&abool("zip215",te),x&&(Z=x(Z));const be=bytesToNumberLE(ve.slice(Y,2*Y));let ye,Ie,ke;try{ye=U.fromHex(ce,te),Ie=U.fromHex(ve.slice(0,Y),te),ke=j.multiplyUnsafe(be)}catch{return!1}if(!te&&ye.isSmallOrder())return!1;const Ce=we(se,Ie.toRawBytes(),ye.toRawBytes(),Z);return Ie.add(ye.multiplyUnsafe(Ce)).subtract(ke).clearCofactor().equals(U.ZERO)}return j._setWindowSize(8),{CURVE:r,getPublicKey:xe,sign:G,verify:q,ExtendedPoint:U,utils:{getExtendedPublicKey:fe,randomPrivateKey:()=>E(g.BYTES),precompute(ve=8,Z=U.BASE){return Z._setWindowSize(ve),Z.multiply(BigInt(3)),Z}}}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$3=BigInt(1);function validateOpts$1(n){return validateObject(n,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...n})}function montgomery(n){const r=validateOpts$1(n),{P:g}=r,_=F=>mod(F,g),x=r.montgomeryBits,S=Math.ceil(x/8),E=r.nByteLength,C=r.adjustScalarBytes||(F=>F),T=r.powPminus2||(F=>pow(F,g-BigInt(2),g));function R(F,U,j){const z=_(F*(U-j));return U=_(U-z),j=_(j+z),[U,j]}const A=(r.a-BigInt(2))/BigInt(4);function I(F,U){aInRange("u",F,_0n$1,g),aInRange("scalar",U,_0n$1,g);const j=U,z=F;let W=_1n$3,X=_0n$1,ie=F,fe=_1n$3,xe=_0n$1,we;for(let J=BigInt(x-1);J>=_0n$1;J--){const q=j>>J&_1n$3;xe^=q,we=R(xe,W,ie),W=we[0],ie=we[1],we=R(xe,X,fe),X=we[0],fe=we[1],xe=q;const H=W+X,ve=_(H*H),Z=W-X,ce=_(Z*Z),ue=ve-ce,se=ie+fe,te=ie-fe,Y=_(te*H),be=_(se*Z),ye=Y+be,Ie=Y-be;ie=_(ye*ye),fe=_(z*_(Ie*Ie)),W=_(ve*ce),X=_(ue*(ve+_(A*ue)))}we=R(xe,W,ie),W=we[0],ie=we[1],we=R(xe,X,fe),X=we[0],fe=we[1];const G=T(X);return _(W*G)}function B(F){return numberToBytesLE(_(F),S)}function D(F){const U=ensureBytes("u coordinate",F,S);return E===32&&(U[31]&=127),bytesToNumberLE(U)}function N(F){const U=ensureBytes("scalar",F),j=U.length;if(j!==S&&j!==E){let z=""+S+" or "+E;throw new Error("invalid scalar, expected "+z+" bytes, got "+j)}return bytesToNumberLE(C(U))}function M(F,U){const j=D(U),z=N(F),W=I(j,z);if(W===_0n$1)throw new Error("invalid private or public key received");return B(W)}const O=B(r.Gu);function L(F){return M(F,O)}return{scalarMult:M,scalarMultBase:L,getSharedSecret:(F,U)=>M(F,U),getPublicKey:F=>L(F),utils:{randomPrivateKey:()=>r.randomBytes(r.nByteLength)},GuBytes:O}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ED25519_P=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),ED25519_SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt(0);const _1n$2=BigInt(1),_2n$1=BigInt(2),_3n$1=BigInt(3),_5n=BigInt(5),_8n=BigInt(8);function ed25519_pow_2_252_3(n){const r=BigInt(10),g=BigInt(20),_=BigInt(40),x=BigInt(80),S=ED25519_P,C=n*n%S*n%S,T=pow2(C,_2n$1,S)*C%S,R=pow2(T,_1n$2,S)*n%S,A=pow2(R,_5n,S)*R%S,I=pow2(A,r,S)*A%S,B=pow2(I,g,S)*I%S,D=pow2(B,_,S)*B%S,N=pow2(D,x,S)*D%S,M=pow2(N,x,S)*D%S,O=pow2(M,r,S)*A%S;return{pow_p_5_8:pow2(O,_2n$1,S)*n%S,b2:C}}function adjustScalarBytes(n){return n[0]&=248,n[31]&=127,n[31]|=64,n}function uvRatio(n,r){const g=ED25519_P,_=mod(r*r*r,g),x=mod(_*_*r,g),S=ed25519_pow_2_252_3(n*x).pow_p_5_8;let E=mod(n*_*S,g);const C=mod(r*E*E,g),T=E,R=mod(E*ED25519_SQRT_M1,g),A=C===n,I=C===mod(-n,g),B=C===mod(-n*ED25519_SQRT_M1,g);return A&&(E=T),(I||B)&&(E=R),isNegativeLE(E,g)&&(E=mod(-E,g)),{isValid:A||I,value:E}}const Fp=Field(ED25519_P,void 0,!0),ed25519Defaults={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:_8n,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:sha512$4,randomBytes:randomBytes$2,adjustScalarBytes,uvRatio},ed25519=twistedEdwards(ed25519Defaults),x25519=montgomery({P:ED25519_P,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:n=>{const r=ED25519_P,{pow_p_5_8:g,b2:_}=ed25519_pow_2_252_3(n);return mod(pow2(g,_3n$1,r)*_,r)},adjustScalarBytes,randomBytes:randomBytes$2}),PUBLIC_KEY_BYTE_LENGTH$1=32,PRIVATE_KEY_BYTE_LENGTH$1=64,KEYS_BYTE_LENGTH$1=32;function hashAndSign$5(n,r){const g=n.subarray(0,KEYS_BYTE_LENGTH$1);return ed25519.sign(r instanceof Uint8Array?r:r.subarray(),g)}function hashAndVerify$5(n,r,g){return ed25519.verify(r,g instanceof Uint8Array?g:g.subarray(),n)}let Ed25519PublicKey$1=class{type="Ed25519";raw;constructor(r){this.raw=ensureEd25519Key$1(r,PUBLIC_KEY_BYTE_LENGTH$1)}toMultihash(){return identity$3.digest(publicKeyToProtobuf$1(this))}toCID(){return CID.createV1(114,this.toMultihash())}toString(){return base58btc.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}verify(r,g){return hashAndVerify$5(this.raw,g,r)}},Ed25519PrivateKey$1=class{type="Ed25519";raw;publicKey;constructor(r,g){this.raw=ensureEd25519Key$1(r,PRIVATE_KEY_BYTE_LENGTH$1),this.publicKey=new Ed25519PublicKey$1(g)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}sign(r){return hashAndSign$5(this.raw,r)}};function unmarshalEd25519PrivateKey$1(n){if(n.length>PRIVATE_KEY_BYTE_LENGTH$1){n=ensureEd25519Key$1(n,PRIVATE_KEY_BYTE_LENGTH$1+PUBLIC_KEY_BYTE_LENGTH$1);const _=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH$1),x=n.subarray(PRIVATE_KEY_BYTE_LENGTH$1,n.length);return new Ed25519PrivateKey$1(_,x)}n=ensureEd25519Key$1(n,PRIVATE_KEY_BYTE_LENGTH$1);const r=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH$1),g=n.subarray(PUBLIC_KEY_BYTE_LENGTH$1);return new Ed25519PrivateKey$1(r,g)}function unmarshalEd25519PublicKey$1(n){return n=ensureEd25519Key$1(n,PUBLIC_KEY_BYTE_LENGTH$1),new Ed25519PublicKey$1(n)}function ensureEd25519Key$1(n,r){if(n=Uint8Array.from(n??[]),n.length!==r)throw new InvalidParametersError$4(`Key must be a Uint8Array of length ${r}, got ${n.length}`);return n}function alloc$1(n=0){return new Uint8Array(n)}function allocUnsafe(n=0){return new Uint8Array(n)}const N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),MSB$1=128,REST$1=127;function encodingLength(n){if(n<N1)return 1;if(n<N2)return 2;if(n<N3)return 3;if(n<N4)return 4;if(n<N5)return 5;if(n<N6)return 6;if(n<N7)return 7;if(Number.MAX_SAFE_INTEGER!=null&&n>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function encodeUint8Array(n,r,g=0){switch(encodingLength(n)){case 8:r[g++]=n&255|MSB$1,n/=128;case 7:r[g++]=n&255|MSB$1,n/=128;case 6:r[g++]=n&255|MSB$1,n/=128;case 5:r[g++]=n&255|MSB$1,n/=128;case 4:r[g++]=n&255|MSB$1,n>>>=7;case 3:r[g++]=n&255|MSB$1,n>>>=7;case 2:r[g++]=n&255|MSB$1,n>>>=7;case 1:{r[g++]=n&255,n>>>=7;break}default:throw new Error("unreachable")}return r}function encodeUint8ArrayList(n,r,g=0){switch(encodingLength(n)){case 8:r.set(g++,n&255|MSB$1),n/=128;case 7:r.set(g++,n&255|MSB$1),n/=128;case 6:r.set(g++,n&255|MSB$1),n/=128;case 5:r.set(g++,n&255|MSB$1),n/=128;case 4:r.set(g++,n&255|MSB$1),n>>>=7;case 3:r.set(g++,n&255|MSB$1),n>>>=7;case 2:r.set(g++,n&255|MSB$1),n>>>=7;case 1:{r.set(g++,n&255),n>>>=7;break}default:throw new Error("unreachable")}return r}function decodeUint8Array(n,r){let g=n[r],_=0;if(_+=g&REST$1,g<MSB$1||(g=n[r+1],_+=(g&REST$1)<<7,g<MSB$1)||(g=n[r+2],_+=(g&REST$1)<<14,g<MSB$1)||(g=n[r+3],_+=(g&REST$1)<<21,g<MSB$1)||(g=n[r+4],_+=(g&REST$1)*N4,g<MSB$1)||(g=n[r+5],_+=(g&REST$1)*N5,g<MSB$1)||(g=n[r+6],_+=(g&REST$1)*N6,g<MSB$1)||(g=n[r+7],_+=(g&REST$1)*N7,g<MSB$1))return _;throw new RangeError("Could not decode varint")}function decodeUint8ArrayList(n,r){let g=n.get(r),_=0;if(_+=g&REST$1,g<MSB$1||(g=n.get(r+1),_+=(g&REST$1)<<7,g<MSB$1)||(g=n.get(r+2),_+=(g&REST$1)<<14,g<MSB$1)||(g=n.get(r+3),_+=(g&REST$1)<<21,g<MSB$1)||(g=n.get(r+4),_+=(g&REST$1)*N4,g<MSB$1)||(g=n.get(r+5),_+=(g&REST$1)*N5,g<MSB$1)||(g=n.get(r+6),_+=(g&REST$1)*N6,g<MSB$1)||(g=n.get(r+7),_+=(g&REST$1)*N7,g<MSB$1))return _;throw new RangeError("Could not decode varint")}function encode$d(n,r,g=0){return r==null&&(r=allocUnsafe(encodingLength(n))),r instanceof Uint8Array?encodeUint8Array(n,r,g):encodeUint8ArrayList(n,r,g)}function decode$a(n,r=0){return n instanceof Uint8Array?decodeUint8Array(n,r):decodeUint8ArrayList(n,r)}const f32=new Float32Array([-0]),f8b=new Uint8Array(f32.buffer);function writeFloatLE(n,r,g){f32[0]=n,r[g]=f8b[0],r[g+1]=f8b[1],r[g+2]=f8b[2],r[g+3]=f8b[3]}function readFloatLE(n,r){return f8b[0]=n[r],f8b[1]=n[r+1],f8b[2]=n[r+2],f8b[3]=n[r+3],f32[0]}const f64=new Float64Array([-0]),d8b=new Uint8Array(f64.buffer);function writeDoubleLE(n,r,g){f64[0]=n,r[g]=d8b[0],r[g+1]=d8b[1],r[g+2]=d8b[2],r[g+3]=d8b[3],r[g+4]=d8b[4],r[g+5]=d8b[5],r[g+6]=d8b[6],r[g+7]=d8b[7]}function readDoubleLE(n,r){return d8b[0]=n[r],d8b[1]=n[r+1],d8b[2]=n[r+2],d8b[3]=n[r+3],d8b[4]=n[r+4],d8b[5]=n[r+5],d8b[6]=n[r+6],d8b[7]=n[r+7],f64[0]}const MAX_SAFE_NUMBER_INTEGER=BigInt(Number.MAX_SAFE_INTEGER),MIN_SAFE_NUMBER_INTEGER=BigInt(Number.MIN_SAFE_INTEGER);class LongBits{lo;hi;constructor(r,g){this.lo=r|0,this.hi=g|0}toNumber(r=!1){if(!r&&this.hi>>>31>0){const g=~this.lo+1>>>0;let _=~this.hi>>>0;return g===0&&(_=_+1>>>0),-(g+_*4294967296)}return this.lo+this.hi*4294967296}toBigInt(r=!1){if(r)return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n);if(this.hi>>>31){const g=~this.lo+1>>>0;let _=~this.hi>>>0;return g===0&&(_=_+1>>>0),-(BigInt(g)+(BigInt(_)<<32n))}return BigInt(this.lo>>>0)+(BigInt(this.hi>>>0)<<32n)}toString(r=!1){return this.toBigInt(r).toString()}zzEncode(){const r=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^r)>>>0,this.lo=(this.lo<<1^r)>>>0,this}zzDecode(){const r=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^r)>>>0,this.hi=(this.hi>>>1^r)>>>0,this}length(){const r=this.lo,g=(this.lo>>>28|this.hi<<4)>>>0,_=this.hi>>>24;return _===0?g===0?r<16384?r<128?1:2:r<2097152?3:4:g<16384?g<128?5:6:g<2097152?7:8:_<128?9:10}static fromBigInt(r){if(r===0n)return zero$1;if(r<MAX_SAFE_NUMBER_INTEGER&&r>MIN_SAFE_NUMBER_INTEGER)return this.fromNumber(Number(r));const g=r<0n;g&&(r=-r);let _=r>>32n,x=r-(_<<32n);return g&&(_=~_|0n,x=~x|0n,++x>TWO_32&&(x=0n,++_>TWO_32&&(_=0n))),new LongBits(Number(x),Number(_))}static fromNumber(r){if(r===0)return zero$1;const g=r<0;g&&(r=-r);let _=r>>>0,x=(r-_)/4294967296>>>0;return g&&(x=~x>>>0,_=~_>>>0,++_>4294967295&&(_=0,++x>4294967295&&(x=0))),new LongBits(_,x)}static from(r){return typeof r=="number"?LongBits.fromNumber(r):typeof r=="bigint"?LongBits.fromBigInt(r):typeof r=="string"?LongBits.fromBigInt(BigInt(r)):r.low!=null||r.high!=null?new LongBits(r.low>>>0,r.high>>>0):zero$1}}const zero$1=new LongBits(0,0);zero$1.toBigInt=function(){return 0n};zero$1.zzEncode=zero$1.zzDecode=function(){return this};zero$1.length=function(){return 1};const TWO_32=4294967296n;function length$1(n){let r=0,g=0;for(let _=0;_<n.length;++_)g=n.charCodeAt(_),g<128?r+=1:g<2048?r+=2:(g&64512)===55296&&(n.charCodeAt(_+1)&64512)===56320?(++_,r+=4):r+=3;return r}function read$1(n,r,g){if(g-r<1)return"";let x;const S=[];let E=0,C;for(;r<g;)C=n[r++],C<128?S[E++]=C:C>191&&C<224?S[E++]=(C&31)<<6|n[r++]&63:C>239&&C<365?(C=((C&7)<<18|(n[r++]&63)<<12|(n[r++]&63)<<6|n[r++]&63)-65536,S[E++]=55296+(C>>10),S[E++]=56320+(C&1023)):S[E++]=(C&15)<<12|(n[r++]&63)<<6|n[r++]&63,E>8191&&((x??(x=[])).push(String.fromCharCode.apply(String,S)),E=0);return x!=null?(E>0&&x.push(String.fromCharCode.apply(String,S.slice(0,E))),x.join("")):String.fromCharCode.apply(String,S.slice(0,E))}function write$1(n,r,g){const _=g;let x,S;for(let E=0;E<n.length;++E)x=n.charCodeAt(E),x<128?r[g++]=x:x<2048?(r[g++]=x>>6|192,r[g++]=x&63|128):(x&64512)===55296&&((S=n.charCodeAt(E+1))&64512)===56320?(x=65536+((x&1023)<<10)+(S&1023),++E,r[g++]=x>>18|240,r[g++]=x>>12&63|128,r[g++]=x>>6&63|128,r[g++]=x&63|128):(r[g++]=x>>12|224,r[g++]=x>>6&63|128,r[g++]=x&63|128);return g-_}function indexOutOfRange(n,r){return RangeError(`index out of range: ${n.pos} + ${r??1} > ${n.len}`)}function readFixed32End(n,r){return(n[r-4]|n[r-3]<<8|n[r-2]<<16|n[r-1]<<24)>>>0}class Uint8ArrayReader{buf;pos;len;_slice=Uint8Array.prototype.subarray;constructor(r){this.buf=r,this.pos=0,this.len=r.length}uint32(){let r=4294967295;if(r=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(r=(r|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(r=(r|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return r;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return r}int32(){return this.uint32()|0}sint32(){const r=this.uint32();return r>>>1^-(r&1)|0}bool(){return this.uint32()!==0}fixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32End(this.buf,this.pos+=4)}sfixed32(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32End(this.buf,this.pos+=4)|0}float(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);const r=readFloatLE(this.buf,this.pos);return this.pos+=4,r}double(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);const r=readDoubleLE(this.buf,this.pos);return this.pos+=8,r}bytes(){const r=this.uint32(),g=this.pos,_=this.pos+r;if(_>this.len)throw indexOutOfRange(this,r);return this.pos+=r,g===_?new Uint8Array(0):this.buf.subarray(g,_)}string(){const r=this.bytes();return read$1(r,0,r.length)}skip(r){if(typeof r=="number"){if(this.pos+r>this.len)throw indexOutOfRange(this,r);this.pos+=r}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this}skipType(r){switch(r){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(r=this.uint32()&7)!==4;)this.skipType(r);break;case 5:this.skip(4);break;default:throw Error(`invalid wire type ${r} at offset ${this.pos}`)}return this}readLongVarint(){const r=new LongBits(0,0);let g=0;if(this.len-this.pos>4){for(;g<4;++g)if(r.lo=(r.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return r;if(r.lo=(r.lo|(this.buf[this.pos]&127)<<28)>>>0,r.hi=(r.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return r;g=0}else{for(;g<3;++g){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.lo=(r.lo|(this.buf[this.pos]&127)<<g*7)>>>0,this.buf[this.pos++]<128)return r}return r.lo=(r.lo|(this.buf[this.pos++]&127)<<g*7)>>>0,r}if(this.len-this.pos>4){for(;g<5;++g)if(r.hi=(r.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return r}else for(;g<5;++g){if(this.pos>=this.len)throw indexOutOfRange(this);if(r.hi=(r.hi|(this.buf[this.pos]&127)<<g*7+3)>>>0,this.buf[this.pos++]<128)return r}throw Error("invalid varint encoding")}readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);const r=readFixed32End(this.buf,this.pos+=4),g=readFixed32End(this.buf,this.pos+=4);return new LongBits(r,g)}int64(){return this.readLongVarint().toBigInt()}int64Number(){return this.readLongVarint().toNumber()}int64String(){return this.readLongVarint().toString()}uint64(){return this.readLongVarint().toBigInt(!0)}uint64Number(){const r=decodeUint8Array(this.buf,this.pos);return this.pos+=encodingLength(r),r}uint64String(){return this.readLongVarint().toString(!0)}sint64(){return this.readLongVarint().zzDecode().toBigInt()}sint64Number(){return this.readLongVarint().zzDecode().toNumber()}sint64String(){return this.readLongVarint().zzDecode().toString()}fixed64(){return this.readFixed64().toBigInt()}fixed64Number(){return this.readFixed64().toNumber()}fixed64String(){return this.readFixed64().toString()}sfixed64(){return this.readFixed64().toBigInt()}sfixed64Number(){return this.readFixed64().toNumber()}sfixed64String(){return this.readFixed64().toString()}}function createReader(n){return new Uint8ArrayReader(n instanceof Uint8Array?n:n.subarray())}function decodeMessage(n,r,g){const _=createReader(n);return r.decode(_,void 0,g)}const base10=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars=alphabet.reduce((n,r,g)=>(n[g]=r,n),[]),alphabetCharsToBytes=alphabet.reduce((n,r,g)=>{const _=r.codePointAt(0);if(_==null)throw new Error(`Invalid character: ${r}`);return n[_]=g,n},[]);function encode$c(n){return n.reduce((r,g)=>(r+=alphabetBytesToChars[g],r),"")}function decode$9(n){const r=[];for(const g of n){const _=g.codePointAt(0);if(_==null)throw new Error(`Invalid character: ${g}`);const x=alphabetCharsToBytes[_];if(x==null)throw new Error(`Non-base256emoji character: ${g}`);r.push(x)}return new Uint8Array(r)}const base256emoji=from$4({prefix:"🚀",name:"base256emoji",encode:encode$c,decode:decode$9}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"})),base64=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$1=Object.freeze(Object.defineProperty({__proto__:null,base64,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),identity$2=from$4({prefix:"\0",name:"identity",encode:n=>toString$4(n),decode:n=>fromString$1(n)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$2},Symbol.toStringTag,{value:"Module"})),textEncoder$2=new TextEncoder,textDecoder$1=new TextDecoder,name$7="json",code$7=512;function encode$b(n){return textEncoder$2.encode(JSON.stringify(n))}function decode$8(n){return JSON.parse(textDecoder$1.decode(n))}const json=Object.freeze(Object.defineProperty({__proto__:null,code:code$7,decode:decode$8,encode:encode$b,name:name$7},Symbol.toStringTag,{value:"Module"})),name$6="raw",code$6=85;function encode$a(n){return coerce$2(n)}function decode$7(n){return coerce$2(n)}const raw=Object.freeze(Object.defineProperty({__proto__:null,code:code$6,decode:decode$7,encode:encode$a,name:name$6},Symbol.toStringTag,{value:"Module"})),code$5=0,name$5="identity",encode$9=coerce$2;function digest(n){return create$3(code$5,encode$9(n))}const identity$1={code:code$5,name:name$5,encode:encode$9,digest};function from$2({name:n,code:r,encode:g}){return new Hasher$1(n,r,g)}let Hasher$1=class{name;code;encode;constructor(r,g,_){this.name=r,this.code=g,this.encode=_}digest(r){if(r instanceof Uint8Array){const g=this.encode(r);return g instanceof Uint8Array?create$3(this.code,g):g.then(_=>create$3(this.code,_))}else throw Error("Unknown type, must be binary type")}};function sha$3(n){return async r=>new Uint8Array(await crypto.subtle.digest(n,r))}const sha256$8=from$2({name:"sha2-256",code:18,encode:sha$3("SHA-256")}),sha512$3=from$2({name:"sha2-512",code:19,encode:sha$3("SHA-512")}),bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$2,...base36$2,...base58,...base64$1,...base256emoji$1};function createCodec$1(n,r,g,_){return{name:n,prefix:r,encoder:{name:n,prefix:r,encode:g},decoder:{decode:_}}}const string$1=createCodec$1("utf8","u",n=>"u"+new TextDecoder("utf8").decode(n),n=>new TextEncoder().encode(n.substring(1))),ascii=createCodec$1("ascii","a",n=>{let r="a";for(let g=0;g<n.length;g++)r+=String.fromCharCode(n[g]);return r},n=>{n=n.substring(1);const r=allocUnsafe(n.length);for(let g=0;g<n.length;g++)r[g]=n.charCodeAt(g);return r}),BASES={utf8:string$1,"utf-8":string$1,hex:bases.base16,latin1:ascii,ascii,binary:ascii,...bases};function fromString(n,r="utf8"){const g=BASES[r];if(g==null)throw new Error(`Unsupported encoding "${r}"`);return g.decoder.decode(`${g.prefix}${n}`)}function pool(n){let _,x=8192;return function(E){if(E<1||E>4096)return allocUnsafe(E);x+E>8192&&(_=allocUnsafe(8192),x=0);const C=_.subarray(x,x+=E);return x&7&&(x=(x|7)+1),C}}class Op{fn;len;next;val;constructor(r,g,_){this.fn=r,this.len=g,this.next=void 0,this.val=_}}function noop$5(){}class State{head;tail;len;next;constructor(r){this.head=r.head,this.tail=r.tail,this.len=r.len,this.next=r.states}}const bufferPool=pool();function alloc(n){return globalThis.Buffer!=null?allocUnsafe(n):bufferPool(n)}class Uint8ArrayWriter{len;head;tail;states;constructor(){this.len=0,this.head=new Op(noop$5,0,0),this.tail=this.head,this.states=null}_push(r,g,_){return this.tail=this.tail.next=new Op(r,g,_),this.len+=g,this}uint32(r){return this.len+=(this.tail=this.tail.next=new VarintOp((r=r>>>0)<128?1:r<16384?2:r<2097152?3:r<268435456?4:5,r)).len,this}int32(r){return r<0?this._push(writeVarint64,10,LongBits.fromNumber(r)):this.uint32(r)}sint32(r){return this.uint32((r<<1^r>>31)>>>0)}uint64(r){const g=LongBits.fromBigInt(r);return this._push(writeVarint64,g.length(),g)}uint64Number(r){return this._push(encodeUint8Array,encodingLength(r),r)}uint64String(r){return this.uint64(BigInt(r))}int64(r){return this.uint64(r)}int64Number(r){return this.uint64Number(r)}int64String(r){return this.uint64String(r)}sint64(r){const g=LongBits.fromBigInt(r).zzEncode();return this._push(writeVarint64,g.length(),g)}sint64Number(r){const g=LongBits.fromNumber(r).zzEncode();return this._push(writeVarint64,g.length(),g)}sint64String(r){return this.sint64(BigInt(r))}bool(r){return this._push(writeByte,1,r?1:0)}fixed32(r){return this._push(writeFixed32,4,r>>>0)}sfixed32(r){return this.fixed32(r)}fixed64(r){const g=LongBits.fromBigInt(r);return this._push(writeFixed32,4,g.lo)._push(writeFixed32,4,g.hi)}fixed64Number(r){const g=LongBits.fromNumber(r);return this._push(writeFixed32,4,g.lo)._push(writeFixed32,4,g.hi)}fixed64String(r){return this.fixed64(BigInt(r))}sfixed64(r){return this.fixed64(r)}sfixed64Number(r){return this.fixed64Number(r)}sfixed64String(r){return this.fixed64String(r)}float(r){return this._push(writeFloatLE,4,r)}double(r){return this._push(writeDoubleLE,8,r)}bytes(r){const g=r.length>>>0;return g===0?this._push(writeByte,1,0):this.uint32(g)._push(writeBytes,g,r)}string(r){const g=length$1(r);return g!==0?this.uint32(g)._push(write$1,g,r):this._push(writeByte,1,0)}fork(){return this.states=new State(this),this.head=this.tail=new Op(noop$5,0,0),this.len=0,this}reset(){return this.states!=null?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$5,0,0),this.len=0),this}ldelim(){const r=this.head,g=this.tail,_=this.len;return this.reset().uint32(_),_!==0&&(this.tail.next=r.next,this.tail=g,this.len+=_),this}finish(){let r=this.head.next;const g=alloc(this.len);let _=0;for(;r!=null;)r.fn(r.val,g,_),_+=r.len,r=r.next;return g}}function writeByte(n,r,g){r[g]=n&255}function writeVarint32(n,r,g){for(;n>127;)r[g++]=n&127|128,n>>>=7;r[g]=n}class VarintOp extends Op{next;constructor(r,g){super(writeVarint32,r,g),this.next=void 0}}function writeVarint64(n,r,g){for(;n.hi!==0;)r[g++]=n.lo&127|128,n.lo=(n.lo>>>7|n.hi<<25)>>>0,n.hi>>>=7;for(;n.lo>127;)r[g++]=n.lo&127|128,n.lo=n.lo>>>7;r[g++]=n.lo}function writeFixed32(n,r,g){r[g]=n&255,r[g+1]=n>>>8&255,r[g+2]=n>>>16&255,r[g+3]=n>>>24}function writeBytes(n,r,g){r.set(n,g)}globalThis.Buffer!=null&&(Uint8ArrayWriter.prototype.bytes=function(n){const r=n.length>>>0;return this.uint32(r),r>0&&this._push(writeBytesBuffer,r,n),this},Uint8ArrayWriter.prototype.string=function(n){const r=globalThis.Buffer.byteLength(n);return this.uint32(r),r>0&&this._push(writeStringBuffer,r,n),this});function writeBytesBuffer(n,r,g){r.set(n,g)}function writeStringBuffer(n,r,g){n.length<40?write$1(n,r,g):r.utf8Write!=null?r.utf8Write(n,g):r.set(fromString(n),g)}function createWriter(){return new Uint8ArrayWriter}function encodeMessage(n,r){const g=createWriter();return r.encode(n,g,{lengthDelimited:!1}),g.finish()}var CODEC_TYPES;(function(n){n[n.VARINT=0]="VARINT",n[n.BIT64=1]="BIT64",n[n.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",n[n.START_GROUP=3]="START_GROUP",n[n.END_GROUP=4]="END_GROUP",n[n.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec(n,r,g,_){return{name:n,type:r,encode:g,decode:_}}function enumeration(n){function r(x){if(n[x.toString()]==null)throw new Error("Invalid enum value");return n[x]}const g=function(S,E){const C=r(S);E.int32(C)},_=function(S){const E=S.int32();return r(E)};return createCodec("enum",CODEC_TYPES.VARINT,g,_)}function message(n,r){return createCodec("message",CODEC_TYPES.LENGTH_DELIMITED,n,r)}class MaxLengthError extends Error{code="ERR_MAX_LENGTH";name="MaxLengthError"}class MaxSizeError extends Error{code="ERR_MAX_SIZE";name="MaxSizeError"}var KeyType$1;(function(n){n.RSA="RSA",n.Ed25519="Ed25519",n.secp256k1="secp256k1"})(KeyType$1||(KeyType$1={}));var __KeyTypeValues$1;(function(n){n[n.RSA=0]="RSA",n[n.Ed25519=1]="Ed25519",n[n.secp256k1=2]="secp256k1"})(__KeyTypeValues$1||(__KeyTypeValues$1={}));(function(n){n.codec=()=>enumeration(__KeyTypeValues$1)})(KeyType$1||(KeyType$1={}));var PublicKey$1;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.Type!=null&&(_.uint32(8),KeyType$1.codec().encode(g.Type,_)),g.Data!=null&&(_.uint32(18),_.bytes(g.Data)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.Type=KeyType$1.codec().decode(g);break}case 2:{S.Data=g.bytes();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(PublicKey$1||(PublicKey$1={}));var PrivateKey$1;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.Type!=null&&(_.uint32(8),KeyType$1.codec().encode(g.Type,_)),g.Data!=null&&(_.uint32(18),_.bytes(g.Data)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.Type=KeyType$1.codec().decode(g);break}case 2:{S.Data=g.bytes();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(PrivateKey$1||(PrivateKey$1={}));function anumber(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function isBytes$1(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function abytes(n,...r){if(!isBytes$1(n))throw new Error("Uint8Array expected");if(r.length>0&&!r.includes(n.length))throw new Error("Uint8Array expected of length "+r+", got length="+n.length)}function ahash(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");anumber(n.outputLen),anumber(n.blockLen)}function aexists(n,r=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(r&&n.finished)throw new Error("Hash#digest() has already been called")}function aoutput(n,r){abytes(n);const g=r.outputLen;if(n.length<g)throw new Error("digestInto() expects output buffer of length at least "+g)}const crypto$2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const createView$1=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),rotr=(n,r)=>n<<32-r|n>>>r,rotl$1=(n,r)=>n<<r|n>>>32-r>>>0,nextTick=async()=>{};async function asyncLoop(n,r,g){let _=Date.now();for(let x=0;x<n;x++){g(x);const S=Date.now()-_;S>=0&&S<r||(await nextTick(),_+=S)}}function utf8ToBytes$1(n){if(typeof n!="string")throw new Error("utf8ToBytes expected string, got "+typeof n);return new Uint8Array(new TextEncoder().encode(n))}function toBytes$2(n){return typeof n=="string"&&(n=utf8ToBytes$1(n)),abytes(n),n}let Hash$1=class{clone(){return this._cloneInto()}};function checkOpts$1(n,r){if(r!==void 0&&{}.toString.call(r)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(n,r)}function wrapConstructor(n){const r=_=>n().update(toBytes$2(_)).digest(),g=n();return r.outputLen=g.outputLen,r.blockLen=g.blockLen,r.create=()=>n(),r}function randomBytes$1(n=32){if(crypto$2&&typeof crypto$2.getRandomValues=="function")return crypto$2.getRandomValues(new Uint8Array(n));if(crypto$2&&typeof crypto$2.randomBytes=="function")return crypto$2.randomBytes(n);throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$1(n,r,g,_){if(typeof n.setBigUint64=="function")return n.setBigUint64(r,g,_);const x=BigInt(32),S=BigInt(4294967295),E=Number(g>>x&S),C=Number(g&S),T=_?4:0,R=_?0:4;n.setUint32(r+T,E,_),n.setUint32(r+R,C,_)}const Chi$1=(n,r,g)=>n&r^~n&g,Maj=(n,r,g)=>n&r^n&g^r&g;class HashMD extends Hash$1{constructor(r,g,_,x){super(),this.blockLen=r,this.outputLen=g,this.padOffset=_,this.isLE=x,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(r),this.view=createView$1(this.buffer)}update(r){aexists(this);const{view:g,buffer:_,blockLen:x}=this;r=toBytes$2(r);const S=r.length;for(let E=0;E<S;){const C=Math.min(x-this.pos,S-E);if(C===x){const T=createView$1(r);for(;x<=S-E;E+=x)this.process(T,E);continue}_.set(r.subarray(E,E+C),this.pos),this.pos+=C,E+=C,this.pos===x&&(this.process(g,0),this.pos=0)}return this.length+=r.length,this.roundClean(),this}digestInto(r){aexists(this),aoutput(r,this),this.finished=!0;const{buffer:g,view:_,blockLen:x,isLE:S}=this;let{pos:E}=this;g[E++]=128,this.buffer.subarray(E).fill(0),this.padOffset>x-E&&(this.process(_,0),E=0);for(let I=E;I<x;I++)g[I]=0;setBigUint64$1(_,x-8,BigInt(this.length*8),S),this.process(_,0);const C=createView$1(r),T=this.outputLen;if(T%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const R=T/4,A=this.get();if(R>A.length)throw new Error("_sha2: outputLen bigger than state");for(let I=0;I<R;I++)C.setUint32(4*I,A[I],S)}digest(){const{buffer:r,outputLen:g}=this;this.digestInto(r);const _=r.slice(0,g);return this.destroy(),_}_cloneInto(r){r||(r=new this.constructor),r.set(...this.get());const{blockLen:g,buffer:_,length:x,finished:S,destroyed:E,pos:C}=this;return r.length=x,r.pos=C,r.finished=S,r.destroyed=E,x%g&&r.buffer.set(_),r}}const SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$1=class extends HashMD{constructor(){super(64,32,8,!1),this.A=SHA256_IV$1[0]|0,this.B=SHA256_IV$1[1]|0,this.C=SHA256_IV$1[2]|0,this.D=SHA256_IV$1[3]|0,this.E=SHA256_IV$1[4]|0,this.F=SHA256_IV$1[5]|0,this.G=SHA256_IV$1[6]|0,this.H=SHA256_IV$1[7]|0}get(){const{A:r,B:g,C:_,D:x,E:S,F:E,G:C,H:T}=this;return[r,g,_,x,S,E,C,T]}set(r,g,_,x,S,E,C,T){this.A=r|0,this.B=g|0,this.C=_|0,this.D=x|0,this.E=S|0,this.F=E|0,this.G=C|0,this.H=T|0}process(r,g){for(let I=0;I<16;I++,g+=4)SHA256_W$1[I]=r.getUint32(g,!1);for(let I=16;I<64;I++){const B=SHA256_W$1[I-15],D=SHA256_W$1[I-2],N=rotr(B,7)^rotr(B,18)^B>>>3,M=rotr(D,17)^rotr(D,19)^D>>>10;SHA256_W$1[I]=M+SHA256_W$1[I-7]+N+SHA256_W$1[I-16]|0}let{A:_,B:x,C:S,D:E,E:C,F:T,G:R,H:A}=this;for(let I=0;I<64;I++){const B=rotr(C,6)^rotr(C,11)^rotr(C,25),D=A+B+Chi$1(C,T,R)+SHA256_K$1[I]+SHA256_W$1[I]|0,M=(rotr(_,2)^rotr(_,13)^rotr(_,22))+Maj(_,x,S)|0;A=R,R=T,T=C,C=E+D|0,E=S,S=x,x=_,_=D+M|0}_=_+this.A|0,x=x+this.B|0,S=S+this.C|0,E=E+this.D|0,C=C+this.E|0,T=T+this.F|0,R=R+this.G|0,A=A+this.H|0,this.set(_,x,S,E,C,T,R,A)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$7=wrapConstructor(()=>new SHA256$1);/*!
 * MIT License
 * 
 * Copyright (c) 2017-2024 Peculiar Ventures, LLC
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 * 
 */const ARRAY_BUFFER_NAME="[object ArrayBuffer]";class BufferSourceConverter{static isArrayBuffer(r){return Object.prototype.toString.call(r)===ARRAY_BUFFER_NAME}static toArrayBuffer(r){return this.isArrayBuffer(r)?r:r.byteLength===r.buffer.byteLength||r.byteOffset===0&&r.byteLength===r.buffer.byteLength?r.buffer:this.toUint8Array(r.buffer).slice(r.byteOffset,r.byteOffset+r.byteLength).buffer}static toUint8Array(r){return this.toView(r,Uint8Array)}static toView(r,g){if(r.constructor===g)return r;if(this.isArrayBuffer(r))return new g(r);if(this.isArrayBufferView(r))return new g(r.buffer,r.byteOffset,r.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(r){return this.isArrayBufferView(r)||this.isArrayBuffer(r)}static isArrayBufferView(r){return ArrayBuffer.isView(r)||r&&this.isArrayBuffer(r.buffer)}static isEqual(r,g){const _=BufferSourceConverter.toUint8Array(r),x=BufferSourceConverter.toUint8Array(g);if(_.length!==x.byteLength)return!1;for(let S=0;S<_.length;S++)if(_[S]!==x[S])return!1;return!0}static concat(...r){let g;Array.isArray(r[0])&&!(r[1]instanceof Function)||Array.isArray(r[0])&&r[1]instanceof Function?g=r[0]:r[r.length-1]instanceof Function?g=r.slice(0,r.length-1):g=r;let _=0;for(const E of g)_+=E.byteLength;const x=new Uint8Array(_);let S=0;for(const E of g){const C=this.toUint8Array(E);x.set(C,S),S+=C.length}return r[r.length-1]instanceof Function?this.toView(x,r[r.length-1]):x.buffer}}const STRING_TYPE="string",HEX_REGEX=/^[0-9a-f\s]+$/i,BASE64_REGEX=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,BASE64URL_REGEX=/^[a-zA-Z0-9-_]+$/;class Utf8Converter{static fromString(r){const g=unescape(encodeURIComponent(r)),_=new Uint8Array(g.length);for(let x=0;x<g.length;x++)_[x]=g.charCodeAt(x);return _.buffer}static toString(r){const g=BufferSourceConverter.toUint8Array(r);let _="";for(let S=0;S<g.length;S++)_+=String.fromCharCode(g[S]);return decodeURIComponent(escape(_))}}class Utf16Converter{static toString(r,g=!1){const _=BufferSourceConverter.toArrayBuffer(r),x=new DataView(_);let S="";for(let E=0;E<_.byteLength;E+=2){const C=x.getUint16(E,g);S+=String.fromCharCode(C)}return S}static fromString(r,g=!1){const _=new ArrayBuffer(r.length*2),x=new DataView(_);for(let S=0;S<r.length;S++)x.setUint16(S*2,r.charCodeAt(S),g);return _}}class Convert{static isHex(r){return typeof r===STRING_TYPE&&HEX_REGEX.test(r)}static isBase64(r){return typeof r===STRING_TYPE&&BASE64_REGEX.test(r)}static isBase64Url(r){return typeof r===STRING_TYPE&&BASE64URL_REGEX.test(r)}static ToString(r,g="utf8"){const _=BufferSourceConverter.toUint8Array(r);switch(g.toLowerCase()){case"utf8":return this.ToUtf8String(_);case"binary":return this.ToBinary(_);case"hex":return this.ToHex(_);case"base64":return this.ToBase64(_);case"base64url":return this.ToBase64Url(_);case"utf16le":return Utf16Converter.toString(_,!0);case"utf16":case"utf16be":return Utf16Converter.toString(_);default:throw new Error(`Unknown type of encoding '${g}'`)}}static FromString(r,g="utf8"){if(!r)return new ArrayBuffer(0);switch(g.toLowerCase()){case"utf8":return this.FromUtf8String(r);case"binary":return this.FromBinary(r);case"hex":return this.FromHex(r);case"base64":return this.FromBase64(r);case"base64url":return this.FromBase64Url(r);case"utf16le":return Utf16Converter.fromString(r,!0);case"utf16":case"utf16be":return Utf16Converter.fromString(r);default:throw new Error(`Unknown type of encoding '${g}'`)}}static ToBase64(r){const g=BufferSourceConverter.toUint8Array(r);if(typeof btoa<"u"){const _=this.ToString(g,"binary");return btoa(_)}else return Buffer$1.from(g).toString("base64")}static FromBase64(r){const g=this.formatString(r);if(!g)return new ArrayBuffer(0);if(!Convert.isBase64(g))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(g)):new Uint8Array(Buffer$1.from(g,"base64")).buffer}static FromBase64Url(r){const g=this.formatString(r);if(!g)return new ArrayBuffer(0);if(!Convert.isBase64Url(g))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(g.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(r){return this.ToBase64(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(r,g=Convert.DEFAULT_UTF8_ENCODING){switch(g){case"ascii":return this.FromBinary(r);case"utf8":return Utf8Converter.fromString(r);case"utf16":case"utf16be":return Utf16Converter.fromString(r);case"utf16le":case"usc2":return Utf16Converter.fromString(r,!0);default:throw new Error(`Unknown type of encoding '${g}'`)}}static ToUtf8String(r,g=Convert.DEFAULT_UTF8_ENCODING){switch(g){case"ascii":return this.ToBinary(r);case"utf8":return Utf8Converter.toString(r);case"utf16":case"utf16be":return Utf16Converter.toString(r);case"utf16le":case"usc2":return Utf16Converter.toString(r,!0);default:throw new Error(`Unknown type of encoding '${g}'`)}}static FromBinary(r){const g=r.length,_=new Uint8Array(g);for(let x=0;x<g;x++)_[x]=r.charCodeAt(x);return _.buffer}static ToBinary(r){const g=BufferSourceConverter.toUint8Array(r);let _="";for(let x=0;x<g.length;x++)_+=String.fromCharCode(g[x]);return _}static ToHex(r){const g=BufferSourceConverter.toUint8Array(r);let _="";const x=g.length;for(let S=0;S<x;S++){const E=g[S];E<16&&(_+="0"),_+=E.toString(16)}return _}static FromHex(r){let g=this.formatString(r);if(!g)return new ArrayBuffer(0);if(!Convert.isHex(g))throw new TypeError("Argument 'hexString' is not HEX encoded");g.length%2&&(g=`0${g}`);const _=new Uint8Array(g.length/2);for(let x=0;x<g.length;x=x+2){const S=g.slice(x,x+2);_[x/2]=parseInt(S,16)}return _.buffer}static ToUtf16String(r,g=!1){return Utf16Converter.toString(r,g)}static FromUtf16String(r,g=!1){return Utf16Converter.fromString(r,g)}static Base64Padding(r){const g=4-r.length%4;if(g<4)for(let _=0;_<g;_++)r+="=";return r}static formatString(r){return r?.replace(/[\n\r\t ]/g,"")||""}}Convert.DEFAULT_UTF8_ENCODING="utf8";/*!
 Copyright (c) Peculiar Ventures, LLC
*/function utilFromBase(n,r){let g=0;if(n.length===1)return n[0];for(let _=n.length-1;_>=0;_--)g+=n[n.length-1-_]*Math.pow(2,r*_);return g}function utilToBase(n,r,g=-1){const _=g;let x=n,S=0,E=Math.pow(2,r);for(let C=1;C<8;C++){if(n<E){let T;if(_<0)T=new ArrayBuffer(C),S=C;else{if(_<C)return new ArrayBuffer(0);T=new ArrayBuffer(_),S=_}const R=new Uint8Array(T);for(let A=C-1;A>=0;A--){const I=Math.pow(2,A*r);R[S-A-1]=Math.floor(x/I),x-=R[S-A-1]*I}return T}E*=Math.pow(2,r)}return new ArrayBuffer(0)}function utilConcatView(...n){let r=0,g=0;for(const S of n)r+=S.length;const _=new ArrayBuffer(r),x=new Uint8Array(_);for(const S of n)x.set(S,g),g+=S.length;return x}function utilDecodeTC(){const n=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const C=n[0]===255&&n[1]&128,T=n[0]===0&&(n[1]&128)===0;(C||T)&&this.warnings.push("Needlessly long format")}const r=new ArrayBuffer(this.valueHex.byteLength),g=new Uint8Array(r);for(let C=0;C<this.valueHex.byteLength;C++)g[C]=0;g[0]=n[0]&128;const _=utilFromBase(g,8),x=new ArrayBuffer(this.valueHex.byteLength),S=new Uint8Array(x);for(let C=0;C<this.valueHex.byteLength;C++)S[C]=n[C];return S[0]&=127,utilFromBase(S,8)-_}function utilEncodeTC(n){const r=n<0?n*-1:n;let g=128;for(let _=1;_<8;_++){if(r<=g){if(n<0){const E=g-r,C=utilToBase(E,8,_),T=new Uint8Array(C);return T[0]|=128,C}let x=utilToBase(r,8,_),S=new Uint8Array(x);if(S[0]&128){const E=x.slice(0),C=new Uint8Array(E);x=new ArrayBuffer(x.byteLength+1),S=new Uint8Array(x);for(let T=0;T<E.byteLength;T++)S[T+1]=C[T];S[0]=0}return x}g*=Math.pow(2,8)}return new ArrayBuffer(0)}function isEqualBuffer(n,r){if(n.byteLength!==r.byteLength)return!1;const g=new Uint8Array(n),_=new Uint8Array(r);for(let x=0;x<g.length;x++)if(g[x]!==_[x])return!1;return!0}function padNumber(n,r){const g=n.toString(10);if(r<g.length)return"";const _=r-g.length,x=new Array(_);for(let E=0;E<_;E++)x[E]="0";return x.join("").concat(g)}/*!
 * Copyright (c) 2014, GMO GlobalSign
 * Copyright (c) 2015-2022, Peculiar Ventures
 * All rights reserved.
 * 
 * Author 2014-2019, Yury Strozhevsky
 * 
 * Redistribution and use in source and binary forms, with or without modification,
 * are permitted provided that the following conditions are met:
 * 
 * * Redistributions of source code must retain the above copyright notice, this
 *   list of conditions and the following disclaimer.
 * 
 * * Redistributions in binary form must reproduce the above copyright notice, this
 *   list of conditions and the following disclaimer in the documentation and/or
 *   other materials provided with the distribution.
 * 
 * * Neither the name of the copyright holder nor the names of its
 *   contributors may be used to endorse or promote products derived from
 *   this software without specific prior written permission.
 * 
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
 * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
 * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 * 
 */function assertBigInt(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function concat$1(n){let r=0,g=0;for(let x=0;x<n.length;x++){const S=n[x];r+=S.byteLength}const _=new Uint8Array(r);for(let x=0;x<n.length;x++){const S=n[x];_.set(new Uint8Array(S),g),g+=S.byteLength}return _.buffer}function checkBufferParams(n,r,g,_){return r instanceof Uint8Array?r.byteLength?g<0?(n.error="Wrong parameter: inputOffset less than zero",!1):_<0?(n.error="Wrong parameter: inputLength less than zero",!1):r.byteLength-g-_<0?(n.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(n.error="Wrong parameter: inputBuffer has zero length",!1):(n.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class ViewWriter{constructor(){this.items=[]}write(r){this.items.push(r)}final(){return concat$1(this.items)}}const powers2=[new Uint8Array([1])],digitsString="0123456789",EMPTY_STRING="",EMPTY_BUFFER$1=new ArrayBuffer(0),EMPTY_VIEW=new Uint8Array(0),END_OF_CONTENT_NAME="EndOfContent",OCTET_STRING_NAME="OCTET STRING",BIT_STRING_NAME="BIT STRING";function HexBlock(n){var r;return r=class extends n{constructor(..._){var x;super(..._);const S=_[0]||{};this.isHexOnly=(x=S.isHexOnly)!==null&&x!==void 0?x:!1,this.valueHexView=S.valueHex?BufferSourceConverter.toUint8Array(S.valueHex):EMPTY_VIEW}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(_){this.valueHexView=new Uint8Array(_)}fromBER(_,x,S){const E=_ instanceof ArrayBuffer?new Uint8Array(_):_;if(!checkBufferParams(this,E,x,S))return-1;const C=x+S;return this.valueHexView=E.subarray(x,C),this.valueHexView.length?(this.blockLength=S,C):(this.warnings.push("Zero buffer length"),x)}toBER(_=!1){return this.isHexOnly?_?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",EMPTY_BUFFER$1)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Convert.ToHex(this.valueHexView)}}},r.NAME="hexBlock",r}class LocalBaseBlock{constructor({blockLength:r=0,error:g=EMPTY_STRING,warnings:_=[],valueBeforeDecode:x=EMPTY_VIEW}={}){this.blockLength=r,this.error=g,this.warnings=_,this.valueBeforeDecodeView=BufferSourceConverter.toUint8Array(x)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(r){this.valueBeforeDecodeView=new Uint8Array(r)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Convert.ToHex(this.valueBeforeDecodeView)}}}LocalBaseBlock.NAME="baseBlock";class ValueBlock extends LocalBaseBlock{fromBER(r,g,_){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(r,g){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ValueBlock.NAME="valueBlock";class LocalIdentificationBlock extends HexBlock(LocalBaseBlock){constructor({idBlock:r={}}={}){var g,_,x,S;super(),r?(this.isHexOnly=(g=r.isHexOnly)!==null&&g!==void 0?g:!1,this.valueHexView=r.valueHex?BufferSourceConverter.toUint8Array(r.valueHex):EMPTY_VIEW,this.tagClass=(_=r.tagClass)!==null&&_!==void 0?_:-1,this.tagNumber=(x=r.tagNumber)!==null&&x!==void 0?x:-1,this.isConstructed=(S=r.isConstructed)!==null&&S!==void 0?S:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(r=!1){let g=0;switch(this.tagClass){case 1:g|=0;break;case 2:g|=64;break;case 3:g|=128;break;case 4:g|=192;break;default:return this.error="Unknown tag class",EMPTY_BUFFER$1}if(this.isConstructed&&(g|=32),this.tagNumber<31&&!this.isHexOnly){const x=new Uint8Array(1);if(!r){let S=this.tagNumber;S&=31,g|=S,x[0]=g}return x.buffer}if(!this.isHexOnly){const x=utilToBase(this.tagNumber,7),S=new Uint8Array(x),E=x.byteLength,C=new Uint8Array(E+1);if(C[0]=g|31,!r){for(let T=0;T<E-1;T++)C[T+1]=S[T]|128;C[E]=S[E-1]}return C.buffer}const _=new Uint8Array(this.valueHexView.byteLength+1);if(_[0]=g|31,!r){const x=this.valueHexView;for(let S=0;S<x.length-1;S++)_[S+1]=x[S]|128;_[this.valueHexView.byteLength]=x[x.length-1]}return _.buffer}fromBER(r,g,_){const x=BufferSourceConverter.toUint8Array(r);if(!checkBufferParams(this,x,g,_))return-1;const S=x.subarray(g,g+_);if(S.length===0)return this.error="Zero buffer length",-1;switch(S[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(S[0]&32)===32,this.isHexOnly=!1;const C=S[0]&31;if(C!==31)this.tagNumber=C,this.blockLength=1;else{let T=1,R=this.valueHexView=new Uint8Array(255),A=255;for(;S[T]&128;){if(R[T-1]=S[T]&127,T++,T>=S.length)return this.error="End of input reached before message was fully decoded",-1;if(T===A){A+=255;const B=new Uint8Array(A);for(let D=0;D<R.length;D++)B[D]=R[D];R=this.valueHexView=new Uint8Array(A)}}this.blockLength=T+1,R[T-1]=S[T]&127;const I=new Uint8Array(T);for(let B=0;B<T;B++)I[B]=R[B];R=this.valueHexView=new Uint8Array(T),R.set(I),this.blockLength<=9?this.tagNumber=utilFromBase(R,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return g+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}LocalIdentificationBlock.NAME="identificationBlock";class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:r={}}={}){var g,_,x;super(),this.isIndefiniteForm=(g=r.isIndefiniteForm)!==null&&g!==void 0?g:!1,this.longFormUsed=(_=r.longFormUsed)!==null&&_!==void 0?_:!1,this.length=(x=r.length)!==null&&x!==void 0?x:0}fromBER(r,g,_){const x=BufferSourceConverter.toUint8Array(r);if(!checkBufferParams(this,x,g,_))return-1;const S=x.subarray(g,g+_);if(S.length===0)return this.error="Zero buffer length",-1;if(S[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=S[0]===128,this.isIndefiniteForm)return this.blockLength=1,g+this.blockLength;if(this.longFormUsed=!!(S[0]&128),this.longFormUsed===!1)return this.length=S[0],this.blockLength=1,g+this.blockLength;const E=S[0]&127;if(E>8)return this.error="Too big integer",-1;if(E+1>S.length)return this.error="End of input reached before message was fully decoded",-1;const C=g+1,T=x.subarray(C,C+E);return T[E-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=utilFromBase(T,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=E+1,g+this.blockLength}toBER(r=!1){let g,_;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return g=new ArrayBuffer(1),r===!1&&(_=new Uint8Array(g),_[0]=128),g;if(this.longFormUsed){const x=utilToBase(this.length,8);if(x.byteLength>127)return this.error="Too big length",EMPTY_BUFFER$1;if(g=new ArrayBuffer(x.byteLength+1),r)return g;const S=new Uint8Array(x);_=new Uint8Array(g),_[0]=x.byteLength|128;for(let E=0;E<x.byteLength;E++)_[E+1]=S[E];return g}return g=new ArrayBuffer(1),r===!1&&(_=new Uint8Array(g),_[0]=this.length),g}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}LocalLengthBlock.NAME="lengthBlock";const typeStore={};class BaseBlock extends LocalBaseBlock{constructor({name:r=EMPTY_STRING,optional:g=!1,primitiveSchema:_,...x}={},S){super(x),this.name=r,this.optional=g,_&&(this.primitiveSchema=_),this.idBlock=new LocalIdentificationBlock(x),this.lenBlock=new LocalLengthBlock(x),this.valueBlock=S?new S(x):new ValueBlock(x)}fromBER(r,g,_){const x=this.valueBlock.fromBER(r,g,this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return x===-1?(this.error=this.valueBlock.error,x):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),x)}toBER(r,g){const _=g||new ViewWriter;g||prepareIndefiniteForm(this);const x=this.idBlock.toBER(r);if(_.write(x),this.lenBlock.isIndefiniteForm)_.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(r,_),_.write(new ArrayBuffer(2));else{const S=this.valueBlock.toBER(r);this.lenBlock.length=S.byteLength;const E=this.lenBlock.toBER(r);_.write(E),_.write(S)}return g?EMPTY_BUFFER$1:_.final()}toJSON(){const r={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(r.primitiveSchema=this.primitiveSchema.toJSON()),r}toString(r="ascii"){return r==="ascii"?this.onAsciiEncoding():Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(r){if(this===r)return!0;if(!(r instanceof this.constructor))return!1;const g=this.toBER(),_=r.toBER();return isEqualBuffer(g,_)}}BaseBlock.NAME="BaseBlock";function prepareIndefiniteForm(n){if(n instanceof typeStore.Constructed)for(const r of n.valueBlock.value)prepareIndefiniteForm(r)&&(n.lenBlock.isIndefiniteForm=!0);return!!n.lenBlock.isIndefiniteForm}class BaseStringBlock extends BaseBlock{constructor({value:r=EMPTY_STRING,...g}={},_){super(g,_),r&&this.fromString(r)}getValue(){return this.valueBlock.value}setValue(r){this.valueBlock.value=r}fromBER(r,g,_){const x=this.valueBlock.fromBER(r,g,this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return x===-1?(this.error=this.valueBlock.error,x):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),x)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}BaseStringBlock.NAME="BaseStringBlock";class LocalPrimitiveValueBlock extends HexBlock(ValueBlock){constructor({isHexOnly:r=!0,...g}={}){super(g),this.isHexOnly=r}}LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";var _a$w;class Primitive extends BaseBlock{constructor(r={}){super(r,LocalPrimitiveValueBlock),this.idBlock.isConstructed=!1}}_a$w=Primitive;typeStore.Primitive=_a$w;Primitive.NAME="PRIMITIVE";function localChangeType(n,r){if(n instanceof r)return n;const g=new r;return g.idBlock=n.idBlock,g.lenBlock=n.lenBlock,g.warnings=n.warnings,g.valueBeforeDecodeView=n.valueBeforeDecodeView,g}function localFromBER(n,r=0,g=n.length){const _=r;let x=new BaseBlock({},ValueBlock);const S=new LocalBaseBlock;if(!checkBufferParams(S,n,r,g))return x.error=S.error,{offset:-1,result:x};if(!n.subarray(r,r+g).length)return x.error="Zero buffer length",{offset:-1,result:x};let C=x.idBlock.fromBER(n,r,g);if(x.idBlock.warnings.length&&x.warnings.concat(x.idBlock.warnings),C===-1)return x.error=x.idBlock.error,{offset:-1,result:x};if(r=C,g-=x.idBlock.blockLength,C=x.lenBlock.fromBER(n,r,g),x.lenBlock.warnings.length&&x.warnings.concat(x.lenBlock.warnings),C===-1)return x.error=x.lenBlock.error,{offset:-1,result:x};if(r=C,g-=x.lenBlock.blockLength,!x.idBlock.isConstructed&&x.lenBlock.isIndefiniteForm)return x.error="Indefinite length form used for primitive encoding form",{offset:-1,result:x};let T=BaseBlock;switch(x.idBlock.tagClass){case 1:if(x.idBlock.tagNumber>=37&&x.idBlock.isHexOnly===!1)return x.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:x};switch(x.idBlock.tagNumber){case 0:if(x.idBlock.isConstructed&&x.lenBlock.length>0)return x.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:x};T=typeStore.EndOfContent;break;case 1:T=typeStore.Boolean;break;case 2:T=typeStore.Integer;break;case 3:T=typeStore.BitString;break;case 4:T=typeStore.OctetString;break;case 5:T=typeStore.Null;break;case 6:T=typeStore.ObjectIdentifier;break;case 10:T=typeStore.Enumerated;break;case 12:T=typeStore.Utf8String;break;case 13:T=typeStore.RelativeObjectIdentifier;break;case 14:T=typeStore.TIME;break;case 15:return x.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:x};case 16:T=typeStore.Sequence;break;case 17:T=typeStore.Set;break;case 18:T=typeStore.NumericString;break;case 19:T=typeStore.PrintableString;break;case 20:T=typeStore.TeletexString;break;case 21:T=typeStore.VideotexString;break;case 22:T=typeStore.IA5String;break;case 23:T=typeStore.UTCTime;break;case 24:T=typeStore.GeneralizedTime;break;case 25:T=typeStore.GraphicString;break;case 26:T=typeStore.VisibleString;break;case 27:T=typeStore.GeneralString;break;case 28:T=typeStore.UniversalString;break;case 29:T=typeStore.CharacterString;break;case 30:T=typeStore.BmpString;break;case 31:T=typeStore.DATE;break;case 32:T=typeStore.TimeOfDay;break;case 33:T=typeStore.DateTime;break;case 34:T=typeStore.Duration;break;default:{const R=x.idBlock.isConstructed?new typeStore.Constructed:new typeStore.Primitive;R.idBlock=x.idBlock,R.lenBlock=x.lenBlock,R.warnings=x.warnings,x=R}}break;case 2:case 3:case 4:default:T=x.idBlock.isConstructed?typeStore.Constructed:typeStore.Primitive}return x=localChangeType(x,T),C=x.fromBER(n,r,x.lenBlock.isIndefiniteForm?g:x.lenBlock.length),x.valueBeforeDecodeView=n.subarray(_,_+x.blockLength),{offset:C,result:x}}function fromBER(n){if(!n.byteLength){const r=new BaseBlock({},ValueBlock);return r.error="Input buffer has zero length",{offset:-1,result:r}}return localFromBER(BufferSourceConverter.toUint8Array(n).slice(),0,n.byteLength)}function checkLen(n,r){return n?1:r}class LocalConstructedValueBlock extends ValueBlock{constructor({value:r=[],isIndefiniteForm:g=!1,..._}={}){super(_),this.value=r,this.isIndefiniteForm=g}fromBER(r,g,_){const x=BufferSourceConverter.toUint8Array(r);if(!checkBufferParams(this,x,g,_))return-1;if(this.valueBeforeDecodeView=x.subarray(g,g+_),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),g;let S=g;for(;checkLen(this.isIndefiniteForm,_)>0;){const E=localFromBER(x,S,_);if(E.offset===-1)return this.error=E.result.error,this.warnings.concat(E.result.warnings),-1;if(S=E.offset,this.blockLength+=E.result.blockLength,_-=E.result.blockLength,this.value.push(E.result),this.isIndefiniteForm&&E.result.constructor.NAME===END_OF_CONTENT_NAME)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===END_OF_CONTENT_NAME?this.value.pop():this.warnings.push("No EndOfContent block encoded")),S}toBER(r,g){const _=g||new ViewWriter;for(let x=0;x<this.value.length;x++)this.value[x].toBER(r,_);return g?EMPTY_BUFFER$1:_.final()}toJSON(){const r={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const g of this.value)r.value.push(g.toJSON());return r}}LocalConstructedValueBlock.NAME="ConstructedValueBlock";var _a$v;class Constructed extends BaseBlock{constructor(r={}){super(r,LocalConstructedValueBlock),this.idBlock.isConstructed=!0}fromBER(r,g,_){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const x=this.valueBlock.fromBER(r,g,this.lenBlock.isIndefiniteForm?_:this.lenBlock.length);return x===-1?(this.error=this.valueBlock.error,x):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),x)}onAsciiEncoding(){const r=[];for(const _ of this.valueBlock.value)r.push(_.toString("ascii").split(`
`).map(x=>`  ${x}`).join(`
`));const g=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return r.length?`${g} :
${r.join(`
`)}`:`${g} :`}}_a$v=Constructed;typeStore.Constructed=_a$v;Constructed.NAME="CONSTRUCTED";class LocalEndOfContentValueBlock extends ValueBlock{fromBER(r,g,_){return g}toBER(r){return EMPTY_BUFFER$1}}LocalEndOfContentValueBlock.override="EndOfContentValueBlock";var _a$u;class EndOfContent extends BaseBlock{constructor(r={}){super(r,LocalEndOfContentValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}_a$u=EndOfContent;typeStore.EndOfContent=_a$u;EndOfContent.NAME=END_OF_CONTENT_NAME;var _a$t;class Null extends BaseBlock{constructor(r={}){super(r,ValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(r,g,_){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=_,g+_>r.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):g+_}toBER(r,g){const _=new ArrayBuffer(2);if(!r){const x=new Uint8Array(_);x[0]=5,x[1]=0}return g&&g.write(_),_}onAsciiEncoding(){return`${this.constructor.NAME}`}}_a$t=Null;typeStore.Null=_a$t;Null.NAME="NULL";class LocalBooleanValueBlock extends HexBlock(ValueBlock){constructor({value:r,...g}={}){super(g),g.valueHex?this.valueHexView=BufferSourceConverter.toUint8Array(g.valueHex):this.valueHexView=new Uint8Array(1),r&&(this.value=r)}get value(){for(const r of this.valueHexView)if(r>0)return!0;return!1}set value(r){this.valueHexView[0]=r?255:0}fromBER(r,g,_){const x=BufferSourceConverter.toUint8Array(r);return checkBufferParams(this,x,g,_)?(this.valueHexView=x.subarray(g,g+_),_>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,utilDecodeTC.call(this),this.blockLength=_,g+_):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}LocalBooleanValueBlock.NAME="BooleanValueBlock";var _a$s;let Boolean$1=class extends BaseBlock{constructor(r={}){super(r,LocalBooleanValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(r){this.valueBlock.value=r}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};_a$s=Boolean$1;typeStore.Boolean=_a$s;Boolean$1.NAME="BOOLEAN";class LocalOctetStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({isConstructed:r=!1,...g}={}){super(g),this.isConstructed=r}fromBER(r,g,_){let x=0;if(this.isConstructed){if(this.isHexOnly=!1,x=LocalConstructedValueBlock.prototype.fromBER.call(this,r,g,_),x===-1)return x;for(let S=0;S<this.value.length;S++){const E=this.value[S].constructor.NAME;if(E===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(E!==OCTET_STRING_NAME)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,x=super.fromBER(r,g,_),this.blockLength=_;return x}toBER(r,g){return this.isConstructed?LocalConstructedValueBlock.prototype.toBER.call(this,r,g):r?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}LocalOctetStringValueBlock.NAME="OctetStringValueBlock";var _a$r;class OctetString extends BaseBlock{constructor({idBlock:r={},lenBlock:g={},..._}={}){var x,S;(x=_.isConstructed)!==null&&x!==void 0||(_.isConstructed=!!(!((S=_.value)===null||S===void 0)&&S.length)),super({idBlock:{isConstructed:_.isConstructed,...r},lenBlock:{...g,isIndefiniteForm:!!_.isIndefiniteForm},..._},LocalOctetStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(r,g,_){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,_===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),g;if(!this.valueBlock.isConstructed){const S=(r instanceof ArrayBuffer?new Uint8Array(r):r).subarray(g,g+_);try{if(S.byteLength){const E=localFromBER(S,0,S.byteLength);E.offset!==-1&&E.offset===_&&(this.valueBlock.value=[E.result])}}catch{}}return super.fromBER(r,g,_)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?Constructed.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const r=[];for(const g of this.valueBlock.value)g instanceof OctetString&&r.push(g.valueBlock.valueHexView);return BufferSourceConverter.concat(r)}}_a$r=OctetString;typeStore.OctetString=_a$r;OctetString.NAME=OCTET_STRING_NAME;class LocalBitStringValueBlock extends HexBlock(LocalConstructedValueBlock){constructor({unusedBits:r=0,isConstructed:g=!1,..._}={}){super(_),this.unusedBits=r,this.isConstructed=g,this.blockLength=this.valueHexView.byteLength}fromBER(r,g,_){if(!_)return g;let x=-1;if(this.isConstructed){if(x=LocalConstructedValueBlock.prototype.fromBER.call(this,r,g,_),x===-1)return x;for(const C of this.value){const T=C.constructor.NAME;if(T===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(T!==BIT_STRING_NAME)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const R=C.valueBlock;if(this.unusedBits>0&&R.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=R.unusedBits}return x}const S=BufferSourceConverter.toUint8Array(r);if(!checkBufferParams(this,S,g,_))return-1;const E=S.subarray(g,g+_);if(this.unusedBits=E[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const C=E.subarray(1);try{if(C.byteLength){const T=localFromBER(C,0,C.byteLength);T.offset!==-1&&T.offset===_-1&&(this.value=[T.result])}}catch{}}return this.valueHexView=E.subarray(1),this.blockLength=E.length,g+_}toBER(r,g){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,r,g);if(r)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return EMPTY_BUFFER$1;const _=new Uint8Array(this.valueHexView.length+1);return _[0]=this.unusedBits,_.set(this.valueHexView,1),_.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}LocalBitStringValueBlock.NAME="BitStringValueBlock";var _a$q;class BitString extends BaseBlock{constructor({idBlock:r={},lenBlock:g={},..._}={}){var x,S;(x=_.isConstructed)!==null&&x!==void 0||(_.isConstructed=!!(!((S=_.value)===null||S===void 0)&&S.length)),super({idBlock:{isConstructed:_.isConstructed,...r},lenBlock:{...g,isIndefiniteForm:!!_.isIndefiniteForm},..._},LocalBitStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(r,g,_){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(r,g,_)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Constructed.prototype.onAsciiEncoding.call(this);{const r=[],g=this.valueBlock.valueHexView;for(const x of g)r.push(x.toString(2).padStart(8,"0"));const _=r.join("");return`${this.constructor.NAME} : ${_.substring(0,_.length-this.valueBlock.unusedBits)}`}}}_a$q=BitString;typeStore.BitString=_a$q;BitString.NAME=BIT_STRING_NAME;var _a$p;function viewAdd(n,r){const g=new Uint8Array([0]),_=new Uint8Array(n),x=new Uint8Array(r);let S=_.slice(0);const E=S.length-1,C=x.slice(0),T=C.length-1;let R=0;const A=T<E?E:T;let I=0;for(let B=A;B>=0;B--,I++){switch(!0){case I<C.length:R=S[E-I]+C[T-I]+g[0];break;default:R=S[E-I]+g[0]}switch(g[0]=R/10,!0){case I>=S.length:S=utilConcatView(new Uint8Array([R%10]),S);break;default:S[E-I]=R%10}}return g[0]>0&&(S=utilConcatView(g,S)),S}function power2(n){if(n>=powers2.length)for(let r=powers2.length;r<=n;r++){const g=new Uint8Array([0]);let _=powers2[r-1].slice(0);for(let x=_.length-1;x>=0;x--){const S=new Uint8Array([(_[x]<<1)+g[0]]);g[0]=S[0]/10,_[x]=S[0]%10}g[0]>0&&(_=utilConcatView(g,_)),powers2.push(_)}return powers2[n]}function viewSub(n,r){let g=0;const _=new Uint8Array(n),x=new Uint8Array(r),S=_.slice(0),E=S.length-1,C=x.slice(0),T=C.length-1;let R,A=0;for(let I=T;I>=0;I--,A++)switch(R=S[E-A]-C[T-A]-g,!0){case R<0:g=1,S[E-A]=R+10;break;default:g=0,S[E-A]=R}if(g>0)for(let I=E-T+1;I>=0;I--,A++)if(R=S[E-A]-g,R<0)g=1,S[E-A]=R+10;else{g=0,S[E-A]=R;break}return S.slice()}class LocalIntegerValueBlock extends HexBlock(ValueBlock){constructor({value:r,...g}={}){super(g),this._valueDec=0,g.valueHex&&this.setValueHex(),r!==void 0&&(this.valueDec=r)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=utilDecodeTC.call(this)))}set valueDec(r){this._valueDec=r,this.isHexOnly=!1,this.valueHexView=new Uint8Array(utilEncodeTC(r))}get valueDec(){return this._valueDec}fromDER(r,g,_,x=0){const S=this.fromBER(r,g,_);if(S===-1)return S;const E=this.valueHexView;return E[0]===0&&E[1]&128?this.valueHexView=E.subarray(1):x!==0&&E.length<x&&(x-E.length>1&&(x=E.length+1),this.valueHexView=E.subarray(x-E.length)),S}toDER(r=!1){const g=this.valueHexView;switch(!0){case(g[0]&128)!==0:{const _=new Uint8Array(this.valueHexView.length+1);_[0]=0,_.set(g,1),this.valueHexView=_}break;case(g[0]===0&&(g[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(r)}fromBER(r,g,_){const x=super.fromBER(r,g,_);return x===-1||this.setValueHex(),x}toBER(r){return r?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const r=this.valueHexView.length*8-1;let g=new Uint8Array(this.valueHexView.length*8/3),_=0,x;const S=this.valueHexView;let E="",C=!1;for(let T=S.byteLength-1;T>=0;T--){x=S[T];for(let R=0;R<8;R++){if((x&1)===1)switch(_){case r:g=viewSub(power2(_),g),E="-";break;default:g=viewAdd(g,power2(_))}_++,x>>=1}}for(let T=0;T<g.length;T++)g[T]&&(C=!0),C&&(E+=digitsString.charAt(g[T]));return C===!1&&(E+=digitsString.charAt(0)),E}}_a$p=LocalIntegerValueBlock;LocalIntegerValueBlock.NAME="IntegerValueBlock";Object.defineProperty(_a$p.prototype,"valueHex",{set:function(n){this.valueHexView=new Uint8Array(n),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var _a$o;class Integer extends BaseBlock{constructor(r={}){super(r,LocalIntegerValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return assertBigInt(),BigInt(this.valueBlock.toString())}static fromBigInt(r){assertBigInt();const g=BigInt(r),_=new ViewWriter,x=g.toString(16).replace(/^-/,""),S=new Uint8Array(Convert.FromHex(x));if(g<0){const C=new Uint8Array(S.length+(S[0]&128?1:0));C[0]|=128;const R=BigInt(`0x${Convert.ToHex(C)}`)+g,A=BufferSourceConverter.toUint8Array(Convert.FromHex(R.toString(16)));A[0]|=128,_.write(A)}else S[0]&128&&_.write(new Uint8Array([0])),_.write(S);return new Integer({valueHex:_.final()})}convertToDER(){const r=new Integer({valueHex:this.valueBlock.valueHexView});return r.valueBlock.toDER(),r}convertFromDER(){return new Integer({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}_a$o=Integer;typeStore.Integer=_a$o;Integer.NAME="INTEGER";var _a$n;class Enumerated extends Integer{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}_a$n=Enumerated;typeStore.Enumerated=_a$n;Enumerated.NAME="ENUMERATED";class LocalSidValueBlock extends HexBlock(ValueBlock){constructor({valueDec:r=-1,isFirstSid:g=!1,..._}={}){super(_),this.valueDec=r,this.isFirstSid=g}fromBER(r,g,_){if(!_)return g;const x=BufferSourceConverter.toUint8Array(r);if(!checkBufferParams(this,x,g,_))return-1;const S=x.subarray(g,g+_);this.valueHexView=new Uint8Array(_);for(let C=0;C<_&&(this.valueHexView[C]=S[C]&127,this.blockLength++,!!(S[C]&128));C++);const E=new Uint8Array(this.blockLength);for(let C=0;C<this.blockLength;C++)E[C]=this.valueHexView[C];return this.valueHexView=E,S[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),g+this.blockLength)}set valueBigInt(r){assertBigInt();let g=BigInt(r).toString(2);for(;g.length%7;)g="0"+g;const _=new Uint8Array(g.length/7);for(let x=0;x<_.length;x++)_[x]=parseInt(g.slice(x*7,x*7+7),2)+(x+1<_.length?128:0);this.fromBER(_.buffer,0,_.length)}toBER(r){if(this.isHexOnly){if(r)return new ArrayBuffer(this.valueHexView.byteLength);const x=this.valueHexView,S=new Uint8Array(this.blockLength);for(let E=0;E<this.blockLength-1;E++)S[E]=x[E]|128;return S[this.blockLength-1]=x[this.blockLength-1],S.buffer}const g=utilToBase(this.valueDec,7);if(g.byteLength===0)return this.error="Error during encoding SID value",EMPTY_BUFFER$1;const _=new Uint8Array(g.byteLength);if(!r){const x=new Uint8Array(g),S=g.byteLength-1;for(let E=0;E<S;E++)_[E]=x[E]|128;_[S]=x[S]}return _}toString(){let r="";if(this.isHexOnly)r=Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let g=this.valueDec;this.valueDec<=39?r="0.":this.valueDec<=79?(r="1.",g-=40):(r="2.",g-=80),r+=g.toString()}else r=this.valueDec.toString();return r}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}LocalSidValueBlock.NAME="sidBlock";class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:r=EMPTY_STRING,...g}={}){super(g),this.value=[],r&&this.fromString(r)}fromBER(r,g,_){let x=g;for(;_>0;){const S=new LocalSidValueBlock;if(x=S.fromBER(r,x,_),x===-1)return this.blockLength=0,this.error=S.error,x;this.value.length===0&&(S.isFirstSid=!0),this.blockLength+=S.blockLength,_-=S.blockLength,this.value.push(S)}return x}toBER(r){const g=[];for(let _=0;_<this.value.length;_++){const x=this.value[_].toBER(r);if(x.byteLength===0)return this.error=this.value[_].error,EMPTY_BUFFER$1;g.push(x)}return concat$1(g)}fromString(r){this.value=[];let g=0,_=0,x="",S=!1;do if(_=r.indexOf(".",g),_===-1?x=r.substring(g):x=r.substring(g,_),g=_+1,S){const E=this.value[0];let C=0;switch(E.valueDec){case 0:break;case 1:C=40;break;case 2:C=80;break;default:this.value=[];return}const T=parseInt(x,10);if(isNaN(T))return;E.valueDec=T+C,S=!1}else{const E=new LocalSidValueBlock;if(x>Number.MAX_SAFE_INTEGER){assertBigInt();const C=BigInt(x);E.valueBigInt=C}else if(E.valueDec=parseInt(x,10),isNaN(E.valueDec))return;this.value.length||(E.isFirstSid=!0,S=!0),this.value.push(E)}while(_!==-1)}toString(){let r="",g=!1;for(let _=0;_<this.value.length;_++){g=this.value[_].isHexOnly;let x=this.value[_].toString();_!==0&&(r=`${r}.`),g?(x=`{${x}}`,this.value[_].isFirstSid?r=`2.{${x} - 80}`:r+=x):r+=x}return r}toJSON(){const r={...super.toJSON(),value:this.toString(),sidArray:[]};for(let g=0;g<this.value.length;g++)r.sidArray.push(this.value[g].toJSON());return r}}LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";var _a$m;class ObjectIdentifier extends BaseBlock{constructor(r={}){super(r,LocalObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(r){this.valueBlock.fromString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$m=ObjectIdentifier;typeStore.ObjectIdentifier=_a$m;ObjectIdentifier.NAME="OBJECT IDENTIFIER";class LocalRelativeSidValueBlock extends HexBlock(LocalBaseBlock){constructor({valueDec:r=0,...g}={}){super(g),this.valueDec=r}fromBER(r,g,_){if(_===0)return g;const x=BufferSourceConverter.toUint8Array(r);if(!checkBufferParams(this,x,g,_))return-1;const S=x.subarray(g,g+_);this.valueHexView=new Uint8Array(_);for(let C=0;C<_&&(this.valueHexView[C]=S[C]&127,this.blockLength++,!!(S[C]&128));C++);const E=new Uint8Array(this.blockLength);for(let C=0;C<this.blockLength;C++)E[C]=this.valueHexView[C];return this.valueHexView=E,S[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),g+this.blockLength)}toBER(r){if(this.isHexOnly){if(r)return new ArrayBuffer(this.valueHexView.byteLength);const x=this.valueHexView,S=new Uint8Array(this.blockLength);for(let E=0;E<this.blockLength-1;E++)S[E]=x[E]|128;return S[this.blockLength-1]=x[this.blockLength-1],S.buffer}const g=utilToBase(this.valueDec,7);if(g.byteLength===0)return this.error="Error during encoding SID value",EMPTY_BUFFER$1;const _=new Uint8Array(g.byteLength);if(!r){const x=new Uint8Array(g),S=g.byteLength-1;for(let E=0;E<S;E++)_[E]=x[E]|128;_[S]=x[S]}return _.buffer}toString(){let r="";return this.isHexOnly?r=Convert.ToHex(this.valueHexView):r=this.valueDec.toString(),r}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}LocalRelativeSidValueBlock.NAME="relativeSidBlock";class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:r=EMPTY_STRING,...g}={}){super(g),this.value=[],r&&this.fromString(r)}fromBER(r,g,_){let x=g;for(;_>0;){const S=new LocalRelativeSidValueBlock;if(x=S.fromBER(r,x,_),x===-1)return this.blockLength=0,this.error=S.error,x;this.blockLength+=S.blockLength,_-=S.blockLength,this.value.push(S)}return x}toBER(r,g){const _=[];for(let x=0;x<this.value.length;x++){const S=this.value[x].toBER(r);if(S.byteLength===0)return this.error=this.value[x].error,EMPTY_BUFFER$1;_.push(S)}return concat$1(_)}fromString(r){this.value=[];let g=0,_=0,x="";do{_=r.indexOf(".",g),_===-1?x=r.substring(g):x=r.substring(g,_),g=_+1;const S=new LocalRelativeSidValueBlock;if(S.valueDec=parseInt(x,10),isNaN(S.valueDec))return!0;this.value.push(S)}while(_!==-1);return!0}toString(){let r="",g=!1;for(let _=0;_<this.value.length;_++){g=this.value[_].isHexOnly;let x=this.value[_].toString();_!==0&&(r=`${r}.`),g&&(x=`{${x}}`),r+=x}return r}toJSON(){const r={...super.toJSON(),value:this.toString(),sidArray:[]};for(let g=0;g<this.value.length;g++)r.sidArray.push(this.value[g].toJSON());return r}}LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";var _a$l;class RelativeObjectIdentifier extends BaseBlock{constructor(r={}){super(r,LocalRelativeObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(r){this.valueBlock.fromString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$l=RelativeObjectIdentifier;typeStore.RelativeObjectIdentifier=_a$l;RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";var _a$k;class Sequence extends Constructed{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}_a$k=Sequence;typeStore.Sequence=_a$k;Sequence.NAME="SEQUENCE";var _a$j;let Set$3=class extends Constructed{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};_a$j=Set$3;typeStore.Set=_a$j;Set$3.NAME="SET";class LocalStringValueBlock extends HexBlock(ValueBlock){constructor({...r}={}){super(r),this.isHexOnly=!0,this.value=EMPTY_STRING}toJSON(){return{...super.toJSON(),value:this.value}}}LocalStringValueBlock.NAME="StringValueBlock";class LocalSimpleStringValueBlock extends LocalStringValueBlock{}LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";class LocalSimpleStringBlock extends BaseStringBlock{constructor({...r}={}){super(r,LocalSimpleStringValueBlock)}fromBuffer(r){this.valueBlock.value=String.fromCharCode.apply(null,BufferSourceConverter.toUint8Array(r))}fromString(r){const g=r.length,_=this.valueBlock.valueHexView=new Uint8Array(g);for(let x=0;x<g;x++)_[x]=r.charCodeAt(x);this.valueBlock.value=r}}LocalSimpleStringBlock.NAME="SIMPLE STRING";class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(r){this.valueBlock.valueHexView=BufferSourceConverter.toUint8Array(r);try{this.valueBlock.value=Convert.ToUtf8String(r)}catch(g){this.warnings.push(`Error during "decodeURIComponent": ${g}, using raw string`),this.valueBlock.value=Convert.ToBinary(r)}}fromString(r){this.valueBlock.valueHexView=new Uint8Array(Convert.FromUtf8String(r)),this.valueBlock.value=r}}LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";var _a$i;class Utf8String extends LocalUtf8StringValueBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}_a$i=Utf8String;typeStore.Utf8String=_a$i;Utf8String.NAME="UTF8String";class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(r){this.valueBlock.value=Convert.ToUtf16String(r),this.valueBlock.valueHexView=BufferSourceConverter.toUint8Array(r)}fromString(r){this.valueBlock.value=r,this.valueBlock.valueHexView=new Uint8Array(Convert.FromUtf16String(r))}}LocalBmpStringValueBlock.NAME="BmpStringValueBlock";var _a$h;class BmpString extends LocalBmpStringValueBlock{constructor({...r}={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}_a$h=BmpString;typeStore.BmpString=_a$h;BmpString.NAME="BMPString";class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(r){const g=ArrayBuffer.isView(r)?r.slice().buffer:r.slice(0),_=new Uint8Array(g);for(let x=0;x<_.length;x+=4)_[x]=_[x+3],_[x+1]=_[x+2],_[x+2]=0,_[x+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(g))}fromString(r){const g=r.length,_=this.valueBlock.valueHexView=new Uint8Array(g*4);for(let x=0;x<g;x++){const S=utilToBase(r.charCodeAt(x),8),E=new Uint8Array(S);if(E.length>4)continue;const C=4-E.length;for(let T=E.length-1;T>=0;T--)_[x*4+T+C]=E[T]}this.valueBlock.value=r}}LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";var _a$g;class UniversalString extends LocalUniversalStringValueBlock{constructor({...r}={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}_a$g=UniversalString;typeStore.UniversalString=_a$g;UniversalString.NAME="UniversalString";var _a$f;class NumericString extends LocalSimpleStringBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}_a$f=NumericString;typeStore.NumericString=_a$f;NumericString.NAME="NumericString";var _a$e;class PrintableString extends LocalSimpleStringBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}_a$e=PrintableString;typeStore.PrintableString=_a$e;PrintableString.NAME="PrintableString";var _a$d;class TeletexString extends LocalSimpleStringBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}_a$d=TeletexString;typeStore.TeletexString=_a$d;TeletexString.NAME="TeletexString";var _a$c;class VideotexString extends LocalSimpleStringBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}_a$c=VideotexString;typeStore.VideotexString=_a$c;VideotexString.NAME="VideotexString";var _a$b;class IA5String extends LocalSimpleStringBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}_a$b=IA5String;typeStore.IA5String=_a$b;IA5String.NAME="IA5String";var _a$a;class GraphicString extends LocalSimpleStringBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}_a$a=GraphicString;typeStore.GraphicString=_a$a;GraphicString.NAME="GraphicString";var _a$9;class VisibleString extends LocalSimpleStringBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}_a$9=VisibleString;typeStore.VisibleString=_a$9;VisibleString.NAME="VisibleString";var _a$8;class GeneralString extends LocalSimpleStringBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}_a$8=GeneralString;typeStore.GeneralString=_a$8;GeneralString.NAME="GeneralString";var _a$7;class CharacterString extends LocalSimpleStringBlock{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}_a$7=CharacterString;typeStore.CharacterString=_a$7;CharacterString.NAME="CharacterString";var _a$6;class UTCTime extends VisibleString{constructor({value:r,valueDate:g,..._}={}){if(super(_),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,r){this.fromString(r),this.valueBlock.valueHexView=new Uint8Array(r.length);for(let x=0;x<r.length;x++)this.valueBlock.valueHexView[x]=r.charCodeAt(x)}g&&(this.fromDate(g),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(r){this.fromString(String.fromCharCode.apply(null,BufferSourceConverter.toUint8Array(r)))}toBuffer(){const r=this.toString(),g=new ArrayBuffer(r.length),_=new Uint8Array(g);for(let x=0;x<r.length;x++)_[x]=r.charCodeAt(x);return g}fromDate(r){this.year=r.getUTCFullYear(),this.month=r.getUTCMonth()+1,this.day=r.getUTCDate(),this.hour=r.getUTCHours(),this.minute=r.getUTCMinutes(),this.second=r.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(r){const _=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(r);if(_===null){this.error="Wrong input string for conversion";return}const x=parseInt(_[1],10);x>=50?this.year=1900+x:this.year=2e3+x,this.month=parseInt(_[2],10),this.day=parseInt(_[3],10),this.hour=parseInt(_[4],10),this.minute=parseInt(_[5],10),this.second=parseInt(_[6],10)}toString(r="iso"){if(r==="iso"){const g=new Array(7);return g[0]=padNumber(this.year<2e3?this.year-1900:this.year-2e3,2),g[1]=padNumber(this.month,2),g[2]=padNumber(this.day,2),g[3]=padNumber(this.hour,2),g[4]=padNumber(this.minute,2),g[5]=padNumber(this.second,2),g[6]="Z",g.join("")}return super.toString(r)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}_a$6=UTCTime;typeStore.UTCTime=_a$6;UTCTime.NAME="UTCTime";var _a$5;class GeneralizedTime extends UTCTime{constructor(r={}){var g;super(r),(g=this.millisecond)!==null&&g!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(r){super.fromDate(r),this.millisecond=r.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(r){let g=!1,_="",x="",S=0,E,C=0,T=0;if(r[r.length-1]==="Z")_=r.substring(0,r.length-1),g=!0;else{const I=new Number(r[r.length-1]);if(isNaN(I.valueOf()))throw new Error("Wrong input string for conversion");_=r}if(g){if(_.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(_.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let I=1,B=_.indexOf("+"),D="";if(B===-1&&(B=_.indexOf("-"),I=-1),B!==-1){if(D=_.substring(B+1),_=_.substring(0,B),D.length!==2&&D.length!==4)throw new Error("Wrong input string for conversion");let N=parseInt(D.substring(0,2),10);if(isNaN(N.valueOf()))throw new Error("Wrong input string for conversion");if(C=I*N,D.length===4){if(N=parseInt(D.substring(2,4),10),isNaN(N.valueOf()))throw new Error("Wrong input string for conversion");T=I*N}}}let R=_.indexOf(".");if(R===-1&&(R=_.indexOf(",")),R!==-1){const I=new Number(`0${_.substring(R)}`);if(isNaN(I.valueOf()))throw new Error("Wrong input string for conversion");S=I.valueOf(),x=_.substring(0,R)}else x=_;switch(!0){case x.length===8:if(E=/(\d{4})(\d{2})(\d{2})/ig,R!==-1)throw new Error("Wrong input string for conversion");break;case x.length===10:if(E=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,R!==-1){let I=60*S;this.minute=Math.floor(I),I=60*(I-this.minute),this.second=Math.floor(I),I=1e3*(I-this.second),this.millisecond=Math.floor(I)}break;case x.length===12:if(E=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,R!==-1){let I=60*S;this.second=Math.floor(I),I=1e3*(I-this.second),this.millisecond=Math.floor(I)}break;case x.length===14:if(E=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,R!==-1){const I=1e3*S;this.millisecond=Math.floor(I)}break;default:throw new Error("Wrong input string for conversion")}const A=E.exec(x);if(A===null)throw new Error("Wrong input string for conversion");for(let I=1;I<A.length;I++)switch(I){case 1:this.year=parseInt(A[I],10);break;case 2:this.month=parseInt(A[I],10);break;case 3:this.day=parseInt(A[I],10);break;case 4:this.hour=parseInt(A[I],10)+C;break;case 5:this.minute=parseInt(A[I],10)+T;break;case 6:this.second=parseInt(A[I],10);break;default:throw new Error("Wrong input string for conversion")}if(g===!1){const I=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=I.getUTCFullYear(),this.month=I.getUTCMonth(),this.day=I.getUTCDay(),this.hour=I.getUTCHours(),this.minute=I.getUTCMinutes(),this.second=I.getUTCSeconds(),this.millisecond=I.getUTCMilliseconds()}}toString(r="iso"){if(r==="iso"){const g=[];return g.push(padNumber(this.year,4)),g.push(padNumber(this.month,2)),g.push(padNumber(this.day,2)),g.push(padNumber(this.hour,2)),g.push(padNumber(this.minute,2)),g.push(padNumber(this.second,2)),this.millisecond!==0&&(g.push("."),g.push(padNumber(this.millisecond,3))),g.push("Z"),g.join("")}return super.toString(r)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}_a$5=GeneralizedTime;typeStore.GeneralizedTime=_a$5;GeneralizedTime.NAME="GeneralizedTime";var _a$4;class DATE extends Utf8String{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}_a$4=DATE;typeStore.DATE=_a$4;DATE.NAME="DATE";var _a$3;class TimeOfDay extends Utf8String{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}_a$3=TimeOfDay;typeStore.TimeOfDay=_a$3;TimeOfDay.NAME="TimeOfDay";var _a$2;class DateTime extends Utf8String{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}_a$2=DateTime;typeStore.DateTime=_a$2;DateTime.NAME="DateTime";var _a$1;class Duration extends Utf8String{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}_a$1=Duration;typeStore.Duration=_a$1;Duration.NAME="Duration";var _a;class TIME extends Utf8String{constructor(r={}){super(r),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}_a=TIME;typeStore.TIME=_a;TIME.NAME="TIME";function toString$3(n,r="utf8"){const g=BASES[r];if(g==null)throw new Error(`Unsupported encoding "${r}"`);return g.encoder.encode(n).substring(1)}let SigningError$1=class extends Error{constructor(r="An error occurred while signing a message"){super(r),this.name="SigningError"}},VerificationError$1=class extends Error{constructor(r="An error occurred while verifying a message"){super(r),this.name="VerificationError"}},WebCryptoMissingError$1=class extends Error{constructor(r="Missing Web Crypto API"){super(r),this.name="WebCryptoMissingError"}};const webcrypto$1={get(n=globalThis){const r=n.crypto;if(r?.subtle==null)throw new WebCryptoMissingError$1("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return r}};async function hashAndSign$4(n,r){const g=await webcrypto$1.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),_=await webcrypto$1.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},g,r instanceof Uint8Array?r:r.subarray());return new Uint8Array(_,0,_.byteLength)}async function hashAndVerify$4(n,r,g){const _=await webcrypto$1.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return webcrypto$1.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},_,r,g instanceof Uint8Array?g:g.subarray())}function rsaKeySize$1(n){if(n.kty!=="RSA")throw new InvalidParametersError$4("invalid key type");if(n.n==null)throw new InvalidParametersError$4("invalid key modulus");return fromString(n.n,"base64url").length*8}let RSAPublicKey$1=class{type="RSA";_key;_raw;_multihash;constructor(r,g){this._key=r,this._multihash=g}get raw(){return this._raw==null&&(this._raw=jwkToPkix$1(this._key)),this._raw}toMultihash(){return this._multihash}toCID(){return CID.createV1(114,this._multihash)}toString(){return base58btc.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}verify(r,g){return hashAndVerify$4(this._key,g,r)}},RSAPrivateKey$1=class{type="RSA";_key;_raw;publicKey;constructor(r,g){this._key=r,this.publicKey=g}get raw(){return this._raw==null&&(this._raw=jwkToPkcs1$1(this._key)),this._raw}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}sign(r){return hashAndSign$4(this._key,r)}};const MAX_RSA_KEY_SIZE$1=8192,SHA2_256_CODE$1=18;function pkcs1ToJwk$1(n){const{result:r}=fromBER(n),g=r.valueBlock.value;return{n:asn1jsIntegerToBase64$1(g[1]),e:asn1jsIntegerToBase64$1(g[2]),d:asn1jsIntegerToBase64$1(g[3]),p:asn1jsIntegerToBase64$1(g[4]),q:asn1jsIntegerToBase64$1(g[5]),dp:asn1jsIntegerToBase64$1(g[6]),dq:asn1jsIntegerToBase64$1(g[7]),qi:asn1jsIntegerToBase64$1(g[8]),kty:"RSA",alg:"RS256"}}function jwkToPkcs1$1(n){if(n.n==null||n.e==null||n.d==null||n.p==null||n.q==null||n.dp==null||n.dq==null||n.qi==null)throw new InvalidParametersError$4("JWK was missing components");const g=new Sequence({value:[new Integer({value:0}),Integer.fromBigInt(bufToBn$1(fromString(n.n,"base64url"))),Integer.fromBigInt(bufToBn$1(fromString(n.e,"base64url"))),Integer.fromBigInt(bufToBn$1(fromString(n.d,"base64url"))),Integer.fromBigInt(bufToBn$1(fromString(n.p,"base64url"))),Integer.fromBigInt(bufToBn$1(fromString(n.q,"base64url"))),Integer.fromBigInt(bufToBn$1(fromString(n.dp,"base64url"))),Integer.fromBigInt(bufToBn$1(fromString(n.dq,"base64url"))),Integer.fromBigInt(bufToBn$1(fromString(n.qi,"base64url")))]}).toBER();return new Uint8Array(g,0,g.byteLength)}function pkixToJwk$1(n){const{result:r}=fromBER(n),g=r.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:asn1jsIntegerToBase64$1(g[0]),e:asn1jsIntegerToBase64$1(g[1])}}function jwkToPkix$1(n){if(n.n==null||n.e==null)throw new InvalidParametersError$4("JWK was missing components");const g=new Sequence({value:[new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.1.1.1"}),new Null]}),new BitString({valueHex:new Sequence({value:[Integer.fromBigInt(bufToBn$1(fromString(n.n,"base64url"))),Integer.fromBigInt(bufToBn$1(fromString(n.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(g,0,g.byteLength)}function asn1jsIntegerToBase64$1(n){let r=n.valueBlock.valueHexView;for(;r[0]===0;)r=r.subarray(1);return toString$3(r,"base64url")}function bufToBn$1(n){const r=[];return n.forEach(function(g){let _=g.toString(16);_.length%2>0&&(_=`0${_}`),r.push(_)}),BigInt("0x"+r.join(""))}function pkcs1ToRSAPrivateKey$1(n){const r=pkcs1ToJwk$1(n);return jwkToRSAPrivateKey$1(r)}function pkixToRSAPublicKey$1(n){const r=pkixToJwk$1(n);if(rsaKeySize$1(r)>MAX_RSA_KEY_SIZE$1)throw new InvalidPublicKeyError$1("Key size is too large");const g=sha256$7(PublicKey$1.encode({Type:KeyType$1.RSA,Data:n})),_=create$1(SHA2_256_CODE$1,g);return new RSAPublicKey$1(r,_)}function jwkToRSAPrivateKey$1(n){if(rsaKeySize$1(n)>MAX_RSA_KEY_SIZE$1)throw new InvalidParametersError$4("Key size is too large");const r=jwkToJWKKeyPair$1(n),g=sha256$7(PublicKey$1.encode({Type:KeyType$1.RSA,Data:jwkToPkix$1(r.publicKey)})),_=create$1(SHA2_256_CODE$1,g);return new RSAPrivateKey$1(r.privateKey,new RSAPublicKey$1(r.publicKey,_))}function jwkToJWKKeyPair$1(n){if(n==null)throw new InvalidParametersError$4("Missing key parameter");return{privateKey:n,publicKey:{kty:n.kty,n:n.n,e:n.e}}}const SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD$1{constructor(){super(64,32,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:r,B:g,C:_,D:x,E:S,F:E,G:C,H:T}=this;return[r,g,_,x,S,E,C,T]}set(r,g,_,x,S,E,C,T){this.A=r|0,this.B=g|0,this.C=_|0,this.D=x|0,this.E=S|0,this.F=E|0,this.G=C|0,this.H=T|0}process(r,g){for(let I=0;I<16;I++,g+=4)SHA256_W[I]=r.getUint32(g,!1);for(let I=16;I<64;I++){const B=SHA256_W[I-15],D=SHA256_W[I-2],N=rotr$1(B,7)^rotr$1(B,18)^B>>>3,M=rotr$1(D,17)^rotr$1(D,19)^D>>>10;SHA256_W[I]=M+SHA256_W[I-7]+N+SHA256_W[I-16]|0}let{A:_,B:x,C:S,D:E,E:C,F:T,G:R,H:A}=this;for(let I=0;I<64;I++){const B=rotr$1(C,6)^rotr$1(C,11)^rotr$1(C,25),D=A+B+Chi$2(C,T,R)+SHA256_K[I]+SHA256_W[I]|0,M=(rotr$1(_,2)^rotr$1(_,13)^rotr$1(_,22))+Maj$1(_,x,S)|0;A=R,R=T,T=C,C=E+D|0,E=S,S=x,x=_,_=D+M|0}_=_+this.A|0,x=x+this.B|0,S=S+this.C|0,E=E+this.D|0,C=C+this.E|0,T=T+this.F|0,R=R+this.G|0,A=A+this.H|0,this.set(_,x,S,E,C,T,R,A)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256$6=wrapConstructor$1(()=>new SHA256);let HMAC$1=class extends Hash$2{constructor(r,g){super(),this.finished=!1,this.destroyed=!1,ahash$1(r);const _=toBytes$3(g);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const x=this.blockLen,S=new Uint8Array(x);S.set(_.length>x?r.create().update(_).digest():_);for(let E=0;E<S.length;E++)S[E]^=54;this.iHash.update(S),this.oHash=r.create();for(let E=0;E<S.length;E++)S[E]^=106;this.oHash.update(S),S.fill(0)}update(r){return aexists$1(this),this.iHash.update(r),this}digestInto(r){aexists$1(this),abytes$2(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:g,iHash:_,finished:x,destroyed:S,blockLen:E,outputLen:C}=this;return r=r,r.finished=x,r.destroyed=S,r.blockLen=E,r.outputLen=C,r.oHash=g._cloneInto(r.oHash),r.iHash=_._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$2=(n,r,g)=>new HMAC$1(n,r).update(g).digest();hmac$2.create=(n,r)=>new HMAC$1(n,r);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validateSigVerOpts(n){n.lowS!==void 0&&abool("lowS",n.lowS),n.prehash!==void 0&&abool("prehash",n.prehash)}function validatePointOpts(n){const r=validateBasic(n);validateObject(r,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:g,Fp:_,a:x}=r;if(g){if(!_.eql(x,_.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if(typeof g!="object"||typeof g.beta!="bigint"||typeof g.splitScalar!="function")throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...r})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut$1,DER={Err:class extends Error{constructor(r=""){super(r)}},_tlv:{encode:(n,r)=>{const{Err:g}=DER;if(n<0||n>256)throw new g("tlv.encode: wrong tag");if(r.length&1)throw new g("tlv.encode: unpadded data");const _=r.length/2,x=numberToHexUnpadded(_);if(x.length/2&128)throw new g("tlv.encode: long form length too big");const S=_>127?numberToHexUnpadded(x.length/2|128):"";return numberToHexUnpadded(n)+S+x+r},decode(n,r){const{Err:g}=DER;let _=0;if(n<0||n>256)throw new g("tlv.encode: wrong tag");if(r.length<2||r[_++]!==n)throw new g("tlv.decode: wrong tlv");const x=r[_++],S=!!(x&128);let E=0;if(!S)E=x;else{const T=x&127;if(!T)throw new g("tlv.decode(long): indefinite length not supported");if(T>4)throw new g("tlv.decode(long): byte length is too big");const R=r.subarray(_,_+T);if(R.length!==T)throw new g("tlv.decode: length bytes not complete");if(R[0]===0)throw new g("tlv.decode(long): zero leftmost byte");for(const A of R)E=E<<8|A;if(_+=T,E<128)throw new g("tlv.decode(long): not minimal encoding")}const C=r.subarray(_,_+E);if(C.length!==E)throw new g("tlv.decode: wrong value length");return{v:C,l:r.subarray(_+E)}}},_int:{encode(n){const{Err:r}=DER;if(n<_0n)throw new r("integer: negative integers are not allowed");let g=numberToHexUnpadded(n);if(Number.parseInt(g[0],16)&8&&(g="00"+g),g.length&1)throw new r("unexpected DER parsing assertion: unpadded hex");return g},decode(n){const{Err:r}=DER;if(n[0]&128)throw new r("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new r("invalid signature integer: unnecessary leading zero");return b2n(n)}},toSig(n){const{Err:r,_int:g,_tlv:_}=DER,x=typeof n=="string"?h2b(n):n;abytes$1(x);const{v:S,l:E}=_.decode(48,x);if(E.length)throw new r("invalid signature: left bytes after parsing");const{v:C,l:T}=_.decode(2,S),{v:R,l:A}=_.decode(2,T);if(A.length)throw new r("invalid signature: left bytes after parsing");return{r:g.decode(C),s:g.decode(R)}},hexFromSig(n){const{_tlv:r,_int:g}=DER,_=r.encode(2,g.encode(n.r)),x=r.encode(2,g.encode(n.s)),S=_+x;return r.encode(48,S)}},_0n=BigInt(0),_1n$1=BigInt(1);BigInt(2);const _3n=BigInt(3);BigInt(4);function weierstrassPoints(n){const r=validatePointOpts(n),{Fp:g}=r,_=Field(r.n,r.nBitLength),x=r.toBytes||((M,O,L)=>{const F=O.toAffine();return concatBytes(Uint8Array.from([4]),g.toBytes(F.x),g.toBytes(F.y))}),S=r.fromBytes||(M=>{const O=M.subarray(1),L=g.fromBytes(O.subarray(0,g.BYTES)),F=g.fromBytes(O.subarray(g.BYTES,2*g.BYTES));return{x:L,y:F}});function E(M){const{a:O,b:L}=r,F=g.sqr(M),U=g.mul(F,M);return g.add(g.add(U,g.mul(M,O)),L)}if(!g.eql(g.sqr(r.Gy),E(r.Gx)))throw new Error("bad generator point: equation left != right");function C(M){return inRange(M,_1n$1,r.n)}function T(M){const{allowedPrivateKeyLengths:O,nByteLength:L,wrapPrivateKey:F,n:U}=r;if(O&&typeof M!="bigint"){if(isBytes$2(M)&&(M=bytesToHex(M)),typeof M!="string"||!O.includes(M.length))throw new Error("invalid private key");M=M.padStart(L*2,"0")}let j;try{j=typeof M=="bigint"?M:bytesToNumberBE(ensureBytes("private key",M,L))}catch{throw new Error("invalid private key, expected hex or "+L+" bytes, got "+typeof M)}return F&&(j=mod(j,U)),aInRange("private key",j,_1n$1,U),j}function R(M){if(!(M instanceof B))throw new Error("ProjectivePoint expected")}const A=memoized((M,O)=>{const{px:L,py:F,pz:U}=M;if(g.eql(U,g.ONE))return{x:L,y:F};const j=M.is0();O==null&&(O=j?g.ONE:g.inv(U));const z=g.mul(L,O),W=g.mul(F,O),X=g.mul(U,O);if(j)return{x:g.ZERO,y:g.ZERO};if(!g.eql(X,g.ONE))throw new Error("invZ was invalid");return{x:z,y:W}}),I=memoized(M=>{if(M.is0()){if(r.allowInfinityPoint&&!g.is0(M.py))return;throw new Error("bad point: ZERO")}const{x:O,y:L}=M.toAffine();if(!g.isValid(O)||!g.isValid(L))throw new Error("bad point: x or y not FE");const F=g.sqr(L),U=E(O);if(!g.eql(F,U))throw new Error("bad point: equation left != right");if(!M.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class B{constructor(O,L,F){if(this.px=O,this.py=L,this.pz=F,O==null||!g.isValid(O))throw new Error("x required");if(L==null||!g.isValid(L))throw new Error("y required");if(F==null||!g.isValid(F))throw new Error("z required");Object.freeze(this)}static fromAffine(O){const{x:L,y:F}=O||{};if(!O||!g.isValid(L)||!g.isValid(F))throw new Error("invalid affine point");if(O instanceof B)throw new Error("projective point not allowed");const U=j=>g.eql(j,g.ZERO);return U(L)&&U(F)?B.ZERO:new B(L,F,g.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(O){const L=g.invertBatch(O.map(F=>F.pz));return O.map((F,U)=>F.toAffine(L[U])).map(B.fromAffine)}static fromHex(O){const L=B.fromAffine(S(ensureBytes("pointHex",O)));return L.assertValidity(),L}static fromPrivateKey(O){return B.BASE.multiply(T(O))}static msm(O,L){return pippenger(B,_,O,L)}_setWindowSize(O){N.setWindowSize(this,O)}assertValidity(){I(this)}hasEvenY(){const{y:O}=this.toAffine();if(g.isOdd)return!g.isOdd(O);throw new Error("Field doesn't support isOdd")}equals(O){R(O);const{px:L,py:F,pz:U}=this,{px:j,py:z,pz:W}=O,X=g.eql(g.mul(L,W),g.mul(j,U)),ie=g.eql(g.mul(F,W),g.mul(z,U));return X&&ie}negate(){return new B(this.px,g.neg(this.py),this.pz)}double(){const{a:O,b:L}=r,F=g.mul(L,_3n),{px:U,py:j,pz:z}=this;let W=g.ZERO,X=g.ZERO,ie=g.ZERO,fe=g.mul(U,U),xe=g.mul(j,j),we=g.mul(z,z),G=g.mul(U,j);return G=g.add(G,G),ie=g.mul(U,z),ie=g.add(ie,ie),W=g.mul(O,ie),X=g.mul(F,we),X=g.add(W,X),W=g.sub(xe,X),X=g.add(xe,X),X=g.mul(W,X),W=g.mul(G,W),ie=g.mul(F,ie),we=g.mul(O,we),G=g.sub(fe,we),G=g.mul(O,G),G=g.add(G,ie),ie=g.add(fe,fe),fe=g.add(ie,fe),fe=g.add(fe,we),fe=g.mul(fe,G),X=g.add(X,fe),we=g.mul(j,z),we=g.add(we,we),fe=g.mul(we,G),W=g.sub(W,fe),ie=g.mul(we,xe),ie=g.add(ie,ie),ie=g.add(ie,ie),new B(W,X,ie)}add(O){R(O);const{px:L,py:F,pz:U}=this,{px:j,py:z,pz:W}=O;let X=g.ZERO,ie=g.ZERO,fe=g.ZERO;const xe=r.a,we=g.mul(r.b,_3n);let G=g.mul(L,j),J=g.mul(F,z),q=g.mul(U,W),H=g.add(L,F),ve=g.add(j,z);H=g.mul(H,ve),ve=g.add(G,J),H=g.sub(H,ve),ve=g.add(L,U);let Z=g.add(j,W);return ve=g.mul(ve,Z),Z=g.add(G,q),ve=g.sub(ve,Z),Z=g.add(F,U),X=g.add(z,W),Z=g.mul(Z,X),X=g.add(J,q),Z=g.sub(Z,X),fe=g.mul(xe,ve),X=g.mul(we,q),fe=g.add(X,fe),X=g.sub(J,fe),fe=g.add(J,fe),ie=g.mul(X,fe),J=g.add(G,G),J=g.add(J,G),q=g.mul(xe,q),ve=g.mul(we,ve),J=g.add(J,q),q=g.sub(G,q),q=g.mul(xe,q),ve=g.add(ve,q),G=g.mul(J,ve),ie=g.add(ie,G),G=g.mul(Z,ve),X=g.mul(H,X),X=g.sub(X,G),G=g.mul(H,J),fe=g.mul(Z,fe),fe=g.add(fe,G),new B(X,ie,fe)}subtract(O){return this.add(O.negate())}is0(){return this.equals(B.ZERO)}wNAF(O){return N.wNAFCached(this,O,B.normalizeZ)}multiplyUnsafe(O){const{endo:L,n:F}=r;aInRange("scalar",O,_0n,F);const U=B.ZERO;if(O===_0n)return U;if(this.is0()||O===_1n$1)return this;if(!L||N.hasPrecomputes(this))return N.wNAFCachedUnsafe(this,O,B.normalizeZ);let{k1neg:j,k1:z,k2neg:W,k2:X}=L.splitScalar(O),ie=U,fe=U,xe=this;for(;z>_0n||X>_0n;)z&_1n$1&&(ie=ie.add(xe)),X&_1n$1&&(fe=fe.add(xe)),xe=xe.double(),z>>=_1n$1,X>>=_1n$1;return j&&(ie=ie.negate()),W&&(fe=fe.negate()),fe=new B(g.mul(fe.px,L.beta),fe.py,fe.pz),ie.add(fe)}multiply(O){const{endo:L,n:F}=r;aInRange("scalar",O,_1n$1,F);let U,j;if(L){const{k1neg:z,k1:W,k2neg:X,k2:ie}=L.splitScalar(O);let{p:fe,f:xe}=this.wNAF(W),{p:we,f:G}=this.wNAF(ie);fe=N.constTimeNegate(z,fe),we=N.constTimeNegate(X,we),we=new B(g.mul(we.px,L.beta),we.py,we.pz),U=fe.add(we),j=xe.add(G)}else{const{p:z,f:W}=this.wNAF(O);U=z,j=W}return B.normalizeZ([U,j])[0]}multiplyAndAddUnsafe(O,L,F){const U=B.BASE,j=(W,X)=>X===_0n||X===_1n$1||!W.equals(U)?W.multiplyUnsafe(X):W.multiply(X),z=j(this,L).add(j(O,F));return z.is0()?void 0:z}toAffine(O){return A(this,O)}isTorsionFree(){const{h:O,isTorsionFree:L}=r;if(O===_1n$1)return!0;if(L)return L(B,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:O,clearCofactor:L}=r;return O===_1n$1?this:L?L(B,this):this.multiplyUnsafe(r.h)}toRawBytes(O=!0){return abool("isCompressed",O),this.assertValidity(),x(B,this,O)}toHex(O=!0){return abool("isCompressed",O),bytesToHex(this.toRawBytes(O))}}B.BASE=new B(r.Gx,r.Gy,g.ONE),B.ZERO=new B(g.ZERO,g.ONE,g.ZERO);const D=r.nBitLength,N=wNAF(B,r.endo?Math.ceil(D/2):D);return{CURVE:r,ProjectivePoint:B,normPrivateKeyToScalar:T,weierstrassEquation:E,isWithinCurveOrder:C}}function validateOpts(n){const r=validateBasic(n);return validateObject(r,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...r})}function weierstrass(n){const r=validateOpts(n),{Fp:g,n:_}=r,x=g.BYTES+1,S=2*g.BYTES+1;function E(q){return mod(q,_)}function C(q){return invert(q,_)}const{ProjectivePoint:T,normPrivateKeyToScalar:R,weierstrassEquation:A,isWithinCurveOrder:I}=weierstrassPoints({...r,toBytes(q,H,ve){const Z=H.toAffine(),ce=g.toBytes(Z.x),ue=concatBytes;return abool("isCompressed",ve),ve?ue(Uint8Array.from([H.hasEvenY()?2:3]),ce):ue(Uint8Array.from([4]),ce,g.toBytes(Z.y))},fromBytes(q){const H=q.length,ve=q[0],Z=q.subarray(1);if(H===x&&(ve===2||ve===3)){const ce=bytesToNumberBE(Z);if(!inRange(ce,_1n$1,g.ORDER))throw new Error("Point is not on curve");const ue=A(ce);let se;try{se=g.sqrt(ue)}catch(be){const ye=be instanceof Error?": "+be.message:"";throw new Error("Point is not on curve"+ye)}const te=(se&_1n$1)===_1n$1;return(ve&1)===1!==te&&(se=g.neg(se)),{x:ce,y:se}}else if(H===S&&ve===4){const ce=g.fromBytes(Z.subarray(0,g.BYTES)),ue=g.fromBytes(Z.subarray(g.BYTES,2*g.BYTES));return{x:ce,y:ue}}else{const ce=x,ue=S;throw new Error("invalid Point, expected length of "+ce+", or uncompressed "+ue+", got "+H)}}}),B=q=>bytesToHex(numberToBytesBE(q,r.nByteLength));function D(q){const H=_>>_1n$1;return q>H}function N(q){return D(q)?E(-q):q}const M=(q,H,ve)=>bytesToNumberBE(q.slice(H,ve));class O{constructor(H,ve,Z){this.r=H,this.s=ve,this.recovery=Z,this.assertValidity()}static fromCompact(H){const ve=r.nByteLength;return H=ensureBytes("compactSignature",H,ve*2),new O(M(H,0,ve),M(H,ve,2*ve))}static fromDER(H){const{r:ve,s:Z}=DER.toSig(ensureBytes("DER",H));return new O(ve,Z)}assertValidity(){aInRange("r",this.r,_1n$1,_),aInRange("s",this.s,_1n$1,_)}addRecoveryBit(H){return new O(this.r,this.s,H)}recoverPublicKey(H){const{r:ve,s:Z,recovery:ce}=this,ue=W(ensureBytes("msgHash",H));if(ce==null||![0,1,2,3].includes(ce))throw new Error("recovery id invalid");const se=ce===2||ce===3?ve+r.n:ve;if(se>=g.ORDER)throw new Error("recovery id 2 or 3 invalid");const te=ce&1?"03":"02",Y=T.fromHex(te+B(se)),be=C(se),ye=E(-ue*be),Ie=E(Z*be),ke=T.BASE.multiplyAndAddUnsafe(Y,ye,Ie);if(!ke)throw new Error("point at infinify");return ke.assertValidity(),ke}hasHighS(){return D(this.s)}normalizeS(){return this.hasHighS()?new O(this.r,E(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes(this.toDERHex())}toDERHex(){return DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes(this.toCompactHex())}toCompactHex(){return B(this.r)+B(this.s)}}const L={isValidPrivateKey(q){try{return R(q),!0}catch{return!1}},normPrivateKeyToScalar:R,randomPrivateKey:()=>{const q=getMinHashLength(r.n);return mapHashToField(r.randomBytes(q),r.n)},precompute(q=8,H=T.BASE){return H._setWindowSize(q),H.multiply(BigInt(3)),H}};function F(q,H=!0){return T.fromPrivateKey(q).toRawBytes(H)}function U(q){const H=isBytes$2(q),ve=typeof q=="string",Z=(H||ve)&&q.length;return H?Z===x||Z===S:ve?Z===2*x||Z===2*S:q instanceof T}function j(q,H,ve=!0){if(U(q))throw new Error("first arg must be private key");if(!U(H))throw new Error("second arg must be public key");return T.fromHex(H).multiply(R(q)).toRawBytes(ve)}const z=r.bits2int||function(q){if(q.length>8192)throw new Error("input is too large");const H=bytesToNumberBE(q),ve=q.length*8-r.nBitLength;return ve>0?H>>BigInt(ve):H},W=r.bits2int_modN||function(q){return E(z(q))},X=bitMask(r.nBitLength);function ie(q){return aInRange("num < 2^"+r.nBitLength,q,_0n,X),numberToBytesBE(q,r.nByteLength)}function fe(q,H,ve=xe){if(["recovered","canonical"].some(Ae=>Ae in ve))throw new Error("sign() legacy options not supported");const{hash:Z,randomBytes:ce}=r;let{lowS:ue,prehash:se,extraEntropy:te}=ve;ue==null&&(ue=!0),q=ensureBytes("msgHash",q),validateSigVerOpts(ve),se&&(q=ensureBytes("prehashed msgHash",Z(q)));const Y=W(q),be=R(H),ye=[ie(be),ie(Y)];if(te!=null&&te!==!1){const Ae=te===!0?ce(g.BYTES):te;ye.push(ensureBytes("extraEntropy",Ae))}const Ie=concatBytes(...ye),ke=Y;function Ce(Ae){const Ne=z(Ae);if(!I(Ne))return;const We=C(Ne),Be=T.BASE.multiply(Ne).toAffine(),Se=E(Be.x);if(Se===_0n)return;const $e=E(We*E(ke+Se*be));if($e===_0n)return;let _e=(Be.x===Se?0:2)|Number(Be.y&_1n$1),Oe=$e;return ue&&D($e)&&(Oe=N($e),_e^=1),new O(Se,Oe,_e)}return{seed:Ie,k2sig:Ce}}const xe={lowS:r.lowS,prehash:!1},we={lowS:r.lowS,prehash:!1};function G(q,H,ve=xe){const{seed:Z,k2sig:ce}=fe(q,H,ve),ue=r;return createHmacDrbg(ue.hash.outputLen,ue.nByteLength,ue.hmac)(Z,ce)}T.BASE._setWindowSize(8);function J(q,H,ve,Z=we){const ce=q;H=ensureBytes("msgHash",H),ve=ensureBytes("publicKey",ve);const{lowS:ue,prehash:se,format:te}=Z;if(validateSigVerOpts(Z),"strict"in Z)throw new Error("options.strict was renamed to lowS");if(te!==void 0&&te!=="compact"&&te!=="der")throw new Error("format must be compact or der");const Y=typeof ce=="string"||isBytes$2(ce),be=!Y&&!te&&typeof ce=="object"&&ce!==null&&typeof ce.r=="bigint"&&typeof ce.s=="bigint";if(!Y&&!be)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let ye,Ie;try{if(be&&(ye=new O(ce.r,ce.s)),Y){try{te!=="compact"&&(ye=O.fromDER(ce))}catch(_e){if(!(_e instanceof DER.Err))throw _e}!ye&&te!=="der"&&(ye=O.fromCompact(ce))}Ie=T.fromHex(ve)}catch{return!1}if(!ye||ue&&ye.hasHighS())return!1;se&&(H=r.hash(H));const{r:ke,s:Ce}=ye,Ae=W(H),Ne=C(Ce),We=E(Ae*Ne),Be=E(ke*Ne),Se=T.BASE.multiplyAndAddUnsafe(Ie,We,Be)?.toAffine();return Se?E(Se.x)===ke:!1}return{CURVE:r,getPublicKey:F,getSharedSecret:j,sign:G,verify:J,ProjectivePoint:T,Signature:O,utils:L}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(n){return{hash:n,hmac:(r,...g)=>hmac$2(n,r,concatBytes$1(...g)),randomBytes:randomBytes$2}}function createCurve(n,r){const g=_=>weierstrass({...n,...getHash(_)});return Object.freeze({...g(r),create:g})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n=BigInt(1),_2n=BigInt(2),divNearest=(n,r)=>(n+r/_2n)/r;function sqrtMod(n){const r=secp256k1P,g=BigInt(3),_=BigInt(6),x=BigInt(11),S=BigInt(22),E=BigInt(23),C=BigInt(44),T=BigInt(88),R=n*n*n%r,A=R*R*n%r,I=pow2(A,g,r)*A%r,B=pow2(I,g,r)*A%r,D=pow2(B,_2n,r)*R%r,N=pow2(D,x,r)*D%r,M=pow2(N,S,r)*N%r,O=pow2(M,C,r)*M%r,L=pow2(O,T,r)*O%r,F=pow2(L,C,r)*M%r,U=pow2(F,g,r)*A%r,j=pow2(U,E,r)*N%r,z=pow2(j,_,r)*R%r,W=pow2(z,_2n,r);if(!Fpk1.eql(Fpk1.sqr(W),n))throw new Error("Cannot find square root");return W}const Fpk1=Field(secp256k1P,void 0,void 0,{sqrt:sqrtMod}),secp256k1$1=createCurve({a:BigInt(0),b:BigInt(7),Fp:Fpk1,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const r=secp256k1N,g=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),_=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),x=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),S=g,E=BigInt("0x100000000000000000000000000000000"),C=divNearest(S*n,r),T=divNearest(-_*n,r);let R=mod(n-C*g-T*x,r),A=mod(-C*_-T*S,r);const I=R>E,B=A>E;if(I&&(R=r-R),B&&(A=r-A),R>E||A>E)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:I,k1:R,k2neg:B,k2:A}}}},sha256$6);BigInt(0);secp256k1$1.ProjectivePoint;function from$1({name:n,code:r,encode:g}){return new Hasher(n,r,g)}class Hasher{name;code;encode;constructor(r,g,_){this.name=r,this.code=g,this.encode=_}digest(r){if(r instanceof Uint8Array){const g=this.encode(r);return g instanceof Uint8Array?create$1(this.code,g):g.then(_=>create$1(this.code,_))}else throw Error("Unknown type, must be binary type")}}function sha$2(n){return async r=>new Uint8Array(await crypto.subtle.digest(n,r))}const sha256$5=from$1({name:"sha2-256",code:18,encode:sha$2("SHA-256")});function asUint8Array(n){return n}function concat(n,r){r==null&&(r=n.reduce((x,S)=>x+S.length,0));const g=allocUnsafe(r);let _=0;for(const x of n)g.set(x,_),_+=x.length;return g}function isPromise$6(n){return n==null?!1:typeof n.then=="function"&&typeof n.catch=="function"&&typeof n.finally=="function"}function hashAndSign$3(n,r){const g=sha256$5.digest(r instanceof Uint8Array?r:r.subarray());if(isPromise$6(g))return g.then(({digest:_})=>secp256k1$1.sign(_,n).toDERRawBytes()).catch(_=>{throw new SigningError$1(String(_))});try{return secp256k1$1.sign(g.digest,n).toDERRawBytes()}catch(_){throw new SigningError$1(String(_))}}function hashAndVerify$3(n,r,g){const _=sha256$5.digest(g instanceof Uint8Array?g:g.subarray());if(isPromise$6(_))return _.then(({digest:x})=>secp256k1$1.verify(r,x,n)).catch(x=>{throw new VerificationError$1(String(x))});try{return secp256k1$1.verify(r,_.digest,n)}catch(x){throw new VerificationError$1(String(x))}}let Secp256k1PublicKey$1=class{type="secp256k1";raw;_key;constructor(r){this._key=validateSecp256k1PublicKey$1(r),this.raw=compressSecp256k1PublicKey$1(this._key)}toMultihash(){return identity$3.digest(publicKeyToProtobuf$1(this))}toCID(){return CID.createV1(114,this.toMultihash())}toString(){return base58btc.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}verify(r,g){return hashAndVerify$3(this._key,g,r)}},Secp256k1PrivateKey$1=class{type="secp256k1";raw;publicKey;constructor(r,g){this.raw=validateSecp256k1PrivateKey$1(r),this.publicKey=new Secp256k1PublicKey$1(g??computeSecp256k1PublicKey$1(r))}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}sign(r){return hashAndSign$3(this.raw,r)}};function unmarshalSecp256k1PrivateKey$1(n){return new Secp256k1PrivateKey$1(n)}function unmarshalSecp256k1PublicKey$1(n){return new Secp256k1PublicKey$1(n)}async function generateSecp256k1KeyPair(){const n=generateSecp256k1PrivateKey();return new Secp256k1PrivateKey$1(n)}function compressSecp256k1PublicKey$1(n){return secp256k1$1.ProjectivePoint.fromHex(n).toRawBytes(!0)}function validateSecp256k1PrivateKey$1(n){try{return secp256k1$1.getPublicKey(n,!0),n}catch(r){throw new InvalidPrivateKeyError$1(String(r))}}function validateSecp256k1PublicKey$1(n){try{return secp256k1$1.ProjectivePoint.fromHex(n),n}catch(r){throw new InvalidPublicKeyError$1(String(r))}}function computeSecp256k1PublicKey$1(n){try{return secp256k1$1.getPublicKey(n,!0)}catch(r){throw new InvalidPrivateKeyError$1(String(r))}}function generateSecp256k1PrivateKey(){return secp256k1$1.utils.randomPrivateKey()}async function generateKeyPair$1(n,r){return generateSecp256k1KeyPair()}function publicKeyFromRaw(n){return n.byteLength===32?unmarshalEd25519PublicKey$1(n):n.byteLength===33?unmarshalSecp256k1PublicKey$1(n):pkixToRSAPublicKey$1(n)}function publicKeyToProtobuf$1(n){return PublicKey$1.encode({Type:KeyType$1[n.type],Data:n.raw})}function privateKeyFromRaw$1(n){return n.byteLength===64?unmarshalEd25519PrivateKey$1(n):n.byteLength===32?unmarshalSecp256k1PrivateKey$1(n):pkcs1ToRSAPrivateKey$1(n)}function compare(n,r){for(let g=0;g<n.byteLength;g++){if(n[g]<r[g])return-1;if(n[g]>r[g])return 1}return n.byteLength>r.byteLength?1:n.byteLength<r.byteLength?-1:0}const verifySignature=async(n,r,g)=>{if(!n)throw new Error("No signature given");if(!r)throw new Error("Given publicKey was undefined");if(!g)throw new Error("Given input data was undefined");g instanceof Uint8Array||(g=typeof g=="string"?fromString(g):new Uint8Array(g));const _=(S,E,C)=>S.verify(E,C);let x=!1;try{const S=publicKeyFromRaw(fromString(r,"base16"));x=await _(S,g,fromString(n,"base16"))}catch{}return Promise.resolve(x)},signMessage=async(n,r)=>{if(!n)throw new Error("No signing key given");if(!r)throw new Error("Given input data was undefined");return r instanceof Uint8Array||(r=typeof r=="string"?fromString(r):new Uint8Array(r)),toString$3(await n.sign(r),"base16")},verifiedCachePromise=LRUStorage({size:1e3}),verifyMessage=async(n,r,g)=>{const _=await verifiedCachePromise,x=await _.get(n);let S=!1;if(x){const E=(C,T)=>T instanceof Uint8Array?compare(C,T)===0:C.toString()===T.toString();S=x.publicKey===r&&E(x.data,g)}else{const E=await verifySignature(n,r,g);S=E,E&&await _.put(n,{publicKey:r,data:g})}return S},defaultPath="./keystore",KeyStore=async({storage:n,path:r}={})=>{n=n||await ComposedStorage(await LRUStorage({size:1e3}),await LevelStorage({path:r||defaultPath}));const g=await LRUStorage({size:1e3}),_=async()=>{await n.close(),await g.close()},x=async()=>{await n.clear(),await g.clear()},S=async A=>{if(!A)throw new Error("id needed to check a key");let I=!1,B=await g.get(A);if(B)I=!0;else try{B=await n.get("private_"+A),I=B!=null}catch{console.error("Error: ENOENT: no such file or directory")}return I},E=async(A,I)=>{const{privateKey:B}=I;await n.put("private_"+A,B);const D=privateKeyFromRaw$1(B);await g.put(A,D)};return{clear:x,close:_,hasKey:S,addKey:E,createKey:async A=>{if(!A)throw new Error("id needed to create a key");const I=await generateKeyPair$1(),B={publicKey:I.publicKey.raw,privateKey:I.raw};return await E(A,B),I},getKey:async A=>{if(!A)throw new Error("id needed to get a key");let I=await g.get(A);if(!I){let B;try{B=await n.get("private_"+A)}catch{}if(!B)return;I=privateKeyFromRaw$1(B),await g.put(A,I)}return I},getPublic:(A,I={})=>{const B=["hex","buffer"],D=I.format||"hex";if(B.indexOf(D)===-1)throw new Error("Supported formats are `hex` and `buffer`");const N=A.publicKey.raw;return D==="buffer"?N:toString$3(N,"base16")}}},codec$4=dagCbor,hasher$4=sha256$9,hashStringEncoding$4=base58btc$2,Identity=async({id:n,publicKey:r,signatures:g,type:_,sign:x,verify:S}={})=>{if(!n)throw new Error("Identity id is required");if(!r)throw new Error("Invalid public key");if(!g)throw new Error("Signatures object is required");if(!g.id)throw new Error("Signature of id is required");if(!g.publicKey)throw new Error("Signature of publicKey+id is required");if(!_)throw new Error("Identity type is required");g=Object.assign({},g);const E={id:n,publicKey:r,signatures:g,type:_,sign:x,verify:S},{hash:C,bytes:T}=await _encodeIdentity(E);return E.hash=C,E.bytes=T,E},_encodeIdentity=async n=>{const{id:r,publicKey:g,signatures:_,type:x}=n,S={id:r,publicKey:g,signatures:_,type:x},{cid:E,bytes:C}=await encode$m({value:S,codec:codec$4,hasher:hasher$4});return{hash:E.toString(hashStringEncoding$4),bytes:Uint8Array.from(C)}},decodeIdentity=async n=>{const{value:r}=await decode$m({bytes:n,codec:codec$4,hasher:hasher$4});return Identity({...r})},isIdentity=n=>!!(n.id&&n.hash&&n.bytes&&n.publicKey&&n.signatures&&n.signatures.id&&n.signatures.publicKey&&n.type),isEqual$2=(n,r)=>n.id===r.id&&n.hash===r.hash&&n.type===r.type&&n.publicKey===r.publicKey&&n.signatures.id===r.signatures.id&&n.signatures.publicKey===r.signatures.publicKey,type$9="publickey",verifyIdentity=async n=>{const{id:r,publicKey:g,signatures:_}=n;return verifyMessage(_.publicKey,r,g+_.id)},PublicKeyIdentityProvider=({keystore:n})=>async()=>{if(!n)throw new Error("PublicKeyIdentityProvider requires a keystore parameter");return{type:type$9,getId:async({id:_}={})=>{if(!_)throw new Error("id is required");const x=await n.getKey(_)||await n.createKey(_);return toString$3(x.publicKey.raw,"base16")},signIdentity:async(_,{id:x}={})=>{if(!x)throw new Error("id is required");const S=await n.getKey(x);if(!S)throw new Error(`Signing key for '${x}' not found`);return signMessage(S,_)}}};PublicKeyIdentityProvider.verifyIdentity=verifyIdentity;PublicKeyIdentityProvider.type=type$9;const identityProviders={},isProviderSupported=n=>Object.keys(identityProviders).includes(n),getIdentityProvider=n=>{if(!isProviderSupported(n))throw new Error(`IdentityProvider type '${n}' is not supported`);return identityProviders[n]},useIdentityProvider=n=>{if(!n.type||typeof n.type!="string")throw new Error("Given IdentityProvider doesn't have a field 'type'.");if(!n.verifyIdentity)throw new Error("Given IdentityProvider doesn't have a function 'verifyIdentity'.");identityProviders[n.type]=n};useIdentityProvider(PublicKeyIdentityProvider);const DefaultIdentityKeysPath=posixJoin("./orbitdb","identities"),Identities=async({keystore:n,path:r,storage:g,ipfs:_}={})=>{n=n||await KeyStore({path:r||DefaultIdentityKeysPath}),g||(g=_?await ComposedStorage(await LRUStorage({size:1e3}),await IPFSBlockStorage({ipfs:_,pin:!0})):await MemoryStorage$1());const x=await LRUStorage({size:1e3}),S=async A=>{const I=await g.get(A);if(I)return decodeIdentity(I)},E=async(A={})=>{A.keystore=n;const I=getIdentityProvider("publickey"),D=await(A.provider||I({keystore:n}))();if(!getIdentityProvider(D.type))throw new Error("Identity provider is unknown. Use useIdentityProvider(provider) to register the identity provider");const N=await D.getId(A),M=await n.getKey(N)||await n.createKey(N),O=n.getPublic(M),L=await signMessage(M,N),F=await D.signIdentity(O+L,A),j=await Identity({id:N,publicKey:O,signatures:{id:L,publicKey:F},type:D.type,sign:T,verify:R});return await g.put(j.hash,j.bytes),j},C=async A=>{if(!isIdentity(A))return!1;const{id:I,publicKey:B,signatures:D}=A;if(!await R(D.id,B,I))return!1;const M=await x.get(D.id);if(M)return isEqual$2(A,M);const L=await getIdentityProvider(A.type).verifyIdentity(A);return L&&await x.put(D.id,A),L},T=async(A,I)=>{const B=await n.getKey(A.id);if(!B)throw new Error("Private signing key not found from KeyStore");return await signMessage(B,I)},R=async(A,I,B)=>await verifyMessage(A,I,B);return{createIdentity:E,verifyIdentity:C,getIdentity:S,sign:T,verify:R,keystore:n}},isValidAddress=n=>{if(n=n.toString(),!n.startsWith("/orbitdb")&&!n.startsWith("\\orbitdb"))return!1;n=n.replaceAll("/orbitdb/",""),n=n.replaceAll("\\orbitdb\\",""),n=n.replaceAll("/",""),n=n.replaceAll("\\","");let r;try{r=CID$2.parse(n,base58btc$2)}catch{return!1}return r!==void 0},OrbitDBAddress=n=>{if(n&&n.protocol==="orbitdb"&&n.hash)return n;const r="orbitdb",g=n.replace("/orbitdb/","").replace("\\orbitdb\\","");return{protocol:r,hash:g,address:n,toString:()=>posixJoin("/",r,g)}},codec$3=dagCbor,hasher$3=sha256$9,hashStringEncoding$3=base58btc$2,ManifestStore=async({ipfs:n,storage:r}={})=>(r=r||await ComposedStorage(await LRUStorage({size:1e5}),await IPFSBlockStorage({ipfs:n,pin:!0})),{get:async S=>{const E=await r.get(S),{value:C}=await decode$m({bytes:E,codec:codec$3,hasher:hasher$3});return C&&await r.put(S,E),C},create:async({name:S,type:E,accessController:C,meta:T})=>{if(!S)throw new Error("name is required");if(!E)throw new Error("type is required");if(!C)throw new Error("accessController is required");const R=Object.assign({name:S,type:E,accessController:C},T!==void 0?{meta:T}:{}),{cid:A,bytes:I}=await encode$m({value:R,codec:codec$3,hasher:hasher$3}),B=A.toString(hashStringEncoding$3);return await r.put(B,I),{hash:B,manifest:R}},close:async()=>{await r.close()}}),createId=async(n=32)=>{const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let g="",_=0;for(;_<n;)g+=r.charAt(Math.floor(Math.random()*r.length)),_+=1;return g},codec$2=dagCbor,hasher$2=sha256$9,hashStringEncoding$2=base58btc$2,AccessControlList=async({storage:n,type:r,params:g})=>{const _={type:r,...g},{cid:x,bytes:S}=await encode$m({value:_,codec:codec$2,hasher:hasher$2}),E=x.toString(hashStringEncoding$2);return await n.put(E,S),E},type$8="ipfs",IPFSAccessController=({write:n,storage:r}={})=>async({orbitdb:g,identities:_,address:x})=>{if(r=r||await ComposedStorage(await LRUStorage({size:1e3}),await IPFSBlockStorage({ipfs:g.ipfs,pin:!0})),n=n||[g.identity.id],x){const E=await r.get(x.replaceAll("/ipfs/","")),{value:C}=await decode$m({bytes:E,codec:codec$2,hasher:hasher$2});n=C.write}else x=await AccessControlList({storage:r,type:type$8,params:{write:n}}),x=posixJoin("/",type$8,x);return{type:type$8,address:x,write:n,canAppend:async E=>{const C=await _.getIdentity(E.identity);if(!C)return!1;const{id:T}=C;return n.includes(T)||n.includes("*")?await _.verifyIdentity(C):!1}}};IPFSAccessController.type=type$8;const type$7="orbitdb",OrbitDBAccessController=({write:n}={})=>async({orbitdb:r,identities:g,address:_,name:x})=>{_=_||x||await createId(64),n=n||[r.identity.id];const S=await r.open(_,{type:"keyvalue",AccessController:IPFSAccessController({write:n})});_=S.address;const E=async N=>{const M=await g.getIdentity(N.identity);if(!M)return!1;const{id:O}=M;return await I("write",O)||await I("admin",O)?await g.verifyIdentity(M):!1},C=async()=>{const N=[];for await(const O of S.iterator())N[O.key]=O.value;const M=O=>{const L=O[0];N[L]=new Set([...N[L]||[],...O[1]])};return Object.entries({...N,admin:new Set([...N.admin||[],...S.access.write])}).forEach(M),N},T=async N=>(await C())[N]||new Set([]),R=async()=>{await S.close()},A=async()=>{await S.drop()},I=async(N,M)=>{const O=new Set(await T(N));return O.has(M)||O.has("*")};return{type:type$7,address:_,write:n,canAppend:E,capabilities:C,get:T,grant:async(N,M)=>{const O=new Set([...await S.get(N)||[],M]);await S.put(N,Array.from(O.values()))},revoke:async(N,M)=>{const O=new Set(await S.get(N)||[]);O.delete(M),O.size>0?await S.put(N,Array.from(O.values())):await S.del(N)},close:R,drop:A,events:S.events}};OrbitDBAccessController.type=type$7;const accessControllers={},getAccessController=n=>{if(!accessControllers[n])throw new Error(`AccessController type '${n}' is not supported`);return accessControllers[n]},useAccessController=n=>{if(!n.type)throw new Error("AccessController does not contain required field 'type'.");accessControllers[n.type]=n};useAccessController(IPFSAccessController);useAccessController(OrbitDBAccessController);const DefaultDatabaseType="events",DefaultAccessController=IPFSAccessController,OrbitDB=async({ipfs:n,id:r,identity:g,identities:_,directory:x}={})=>{if(n==null)throw new Error("IPFS instance is a required argument.");r=r||await createId();const S=n.libp2p.peerId;x=x||"./orbitdb";let E;_?E=_.keystore:(E=await KeyStore({path:posixJoin(x,"./keystore")}),_=await Identities({ipfs:n,keystore:E})),g?g.provider&&(g=await _.createIdentity({...g})):g=await _.createIdentity({id:r});const C=await ManifestStore({ipfs:n});let T={};const R=async(B,{type:D,meta:N,sync:M,Database:O,AccessController:L,headsStorage:F,entryStorage:U,indexStorage:j,referencesCount:z}={})=>{let W,X,ie;if(T[B])return T[B];if(isValidAddress(B)){const xe=OrbitDBAddress(B);X=await C.get(xe.hash);const we=X.accessController.split("/",2).pop();L=getAccessController(we)(),ie=await L({orbitdb:{open:R,identity:g,ipfs:n},identities:_,address:X.accessController}),W=X.name,D=D||X.type,N=X.meta}else{D=D||DefaultDatabaseType,L=L||DefaultAccessController(),ie=await L({orbitdb:{open:R,identity:g,ipfs:n},identities:_,name:B});const xe=await C.create({name:B,type:D,accessController:ie.address,meta:N});if(X=xe.manifest,B=OrbitDBAddress(xe.hash),W=X.name,N=X.meta,T[B])return T[B]}if(O=O||getDatabaseType(D)(),!O)throw new Error(`Unsupported database type: '${D}'`);B=B.toString();const fe=await O({ipfs:n,identity:g,address:B,name:W,access:ie,directory:x,meta:N,syncAutomatically:M,headsStorage:F,entryStorage:U,indexStorage:j,referencesCount:z});return fe.events.on("close",A(B)),T[B]=fe,fe},A=B=>()=>{delete T[B]};return{id:r,open:R,stop:async()=>{for(const B of Object.values(T))await B.close();E&&await E.close(),C&&await C.close(),T={}},ipfs:n,directory:x,keystore:E,identities:_,identity:g,peerId:S}},type$6="set",Set$2=()=>async({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B})=>{const D=await Database({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B}),{addOperation:N,log:M}=D,O=async j=>N({op:"ADD",key:null,value:j}),L=async j=>N({op:"DEL",key:null,value:j}),F=async function*({amount:j}={}){const z={};let W=0;for await(const X of M.traverse()){const{op:ie,value:fe}=X.payload,xe=JSON.stringify(fe);if(ie==="ADD"&&!z[xe]){z[xe]=!0,W++;const we=X.hash;yield{value:fe,hash:we}}else ie==="DEL"&&!z[xe]&&(z[xe]=!0);if(j!==void 0&&W>=j)break}};return{...D,type:type$6,add:O,del:L,iterator:F,all:async()=>{const j=[];for await(const z of F())j.unshift(z);return j}}};Set$2.type=type$6;const registerSet=()=>useDatabaseType(Set$2);function readonly({enumerable:n=!0,configurable:r=!1}={}){return{enumerable:n,configurable:r,writable:!1}}function*linksWithin(n,r){if(r!=null&&typeof r=="object")if(Array.isArray(r))for(const[g,_]of r.entries()){const x=[...n,g],S=CID$1.asCID(_);S!=null?yield[x.join("/"),S]:typeof _=="object"&&(yield*links(_,x))}else{const g=CID$1.asCID(r);g!=null?yield[n.join("/"),g]:yield*links(r,n)}}function*links(n,r){if(n==null||n instanceof Uint8Array)return;const g=CID$1.asCID(n);g!=null&&(yield[r.join("/"),g]);for(const[_,x]of Object.entries(n)){const S=[...r,_];yield*linksWithin(S,x)}}function*treeWithin(n,r){if(Array.isArray(r))for(const[g,_]of r.entries()){const x=[...n,g];yield x.join("/"),typeof _=="object"&&CID$1.asCID(_)==null&&(yield*tree(_,x))}else yield*tree(r,n)}function*tree(n,r){if(!(n==null||typeof n!="object"))for(const[g,_]of Object.entries(n)){const x=[...r,g];yield x.join("/"),_!=null&&!(_ instanceof Uint8Array)&&typeof _=="object"&&CID$1.asCID(_)==null&&(yield*treeWithin(x,_))}}function get$2(n,r){let g=n;for(const[_,x]of r.entries()){if(g=g[x],g==null)throw new Error(`Object has no property at ${r.slice(0,_+1).map(E=>`[${JSON.stringify(E)}]`).join("")}`);const S=CID$1.asCID(g);if(S!=null)return{value:S,remaining:r.slice(_+1).join("/")}}return{value:g}}let Block$1=class{cid;bytes;value;asBlock;constructor({cid:r,bytes:g,value:_}){if(r==null||g==null||typeof _>"u")throw new Error("Missing required argument");this.cid=r,this.bytes=g,this.value=_,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(r="/"){return get$2(this.value,r.split("/").filter(Boolean))}};async function encode$8({value:n,codec:r,hasher:g}){if(typeof n>"u")throw new Error('Missing required argument "value"');if(r==null||g==null)throw new Error("Missing required argument: codec or hasher");const _=r.encode(n),x=await g.digest(_),S=CID$1.create(1,r.code,x);return new Block$1({value:n,bytes:_,cid:S})}async function decode$6({bytes:n,codec:r,hasher:g}){if(n==null)throw new Error('Missing required argument "bytes"');if(r==null||g==null)throw new Error("Missing required argument: codec or hasher");const _=r.decode(n),x=await g.digest(n),S=CID$1.create(1,r.code,x);return new Block$1({value:_,bytes:n,cid:S})}function createUnsafe({bytes:n,cid:r,value:g,codec:_}){const x=g!==void 0?g:_?.decode(n);if(x===void 0)throw new Error('Missing required argument, must either provide "value" or "codec"');return new Block$1({cid:r,bytes:n,value:x})}const byteToHex$2=[];for(let n=0;n<256;++n)byteToHex$2.push((n+256).toString(16).slice(1));function unsafeStringify$2(n,r=0){return(byteToHex$2[n[r+0]]+byteToHex$2[n[r+1]]+byteToHex$2[n[r+2]]+byteToHex$2[n[r+3]]+"-"+byteToHex$2[n[r+4]]+byteToHex$2[n[r+5]]+"-"+byteToHex$2[n[r+6]]+byteToHex$2[n[r+7]]+"-"+byteToHex$2[n[r+8]]+byteToHex$2[n[r+9]]+"-"+byteToHex$2[n[r+10]]+byteToHex$2[n[r+11]]+byteToHex$2[n[r+12]]+byteToHex$2[n[r+13]]+byteToHex$2[n[r+14]]+byteToHex$2[n[r+15]]).toLowerCase()}let getRandomValues$2;const rnds8$2=new Uint8Array(16);function rng$2(){if(!getRandomValues$2){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues$2=crypto.getRandomValues.bind(crypto)}return getRandomValues$2(rnds8$2)}const randomUUID$2=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native$3={randomUUID:randomUUID$2};function v4$3(n,r,g){if(native$3.randomUUID&&!r&&!n)return native$3.randomUUID();n=n||{};const _=n.random??n.rng?.()??rng$2();if(_.length<16)throw new Error("Random bytes length must be >= 16");return _[6]=_[6]&15|64,_[8]=_[8]&63|128,unsafeStringify$2(_)}const MODÉRATEUR="MODÉRATEUR",MEMBRE="MEMBRE",rôles=[MODÉRATEUR,MEMBRE],type$5="feed",Feed=()=>async({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B})=>{const D=await Database({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B}),{addOperation:N,log:M}=D,O=async j=>N({op:"ADD",key:null,value:j}),L=async j=>N({op:"DEL",key:null,value:j}),F=async function*({amount:j}={}){const z={};let W=0;for await(const X of M.traverse()){const{op:ie,value:fe}=X.payload,{hash:xe}=X;if(ie==="ADD"&&!z[xe]){W++;const we=X.hash;z[we]=!0,yield{value:fe,hash:we}}else ie==="DEL"&&!z[fe]&&(z[fe]=!0);if(j!==void 0&&W>=j)break}};return{...D,type:type$5,add:O,remove:L,iterator:F,all:async()=>{const j=[];for await(const z of F())j.unshift(z);return j}}};Feed.type=type$5;const registerFeed=()=>useDatabaseType(Feed),type$4="ordered-keyvalue",OrderedKeyValue=()=>async({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B})=>{const D=await Database({ipfs:n,identity:r,address:g,name:_,access:x,directory:S,meta:E,headsStorage:C,entryStorage:T,indexStorage:R,referencesCount:A,syncAutomatically:I,onUpdate:B}),{addOperation:N,log:M}=D,O=async(W,X,ie)=>{const fe={value:X};return ie!==void 0&&(fe.position=ie),N({op:"PUT",key:W,value:fe})},L=async(W,X)=>N({op:"MOVE",key:W,value:X}),F=async W=>N({op:"DEL",key:W,value:null}),U=async W=>{for await(const X of M.traverse()){const{op:ie,key:fe,value:xe}=X.payload;if(ie==="PUT"&&fe===W)return xe;if(ie==="DEL"&&fe===W)return}},j=async function*({amount:W}={}){const X={},ie={};let fe=0;for await(const xe of M.traverse()){const{op:we,key:G,value:J}=xe.payload;if(!G)return;if(we==="PUT"&&!X[G]){X[G]=!0;const q=J,H=xe.hash,ve=ie[G]!==void 0?ie[G]:q.position!==void 0?q.position:0;ie[G]=ve,fe++,yield{key:G,value:q.value,position:ve,hash:H}}else we==="MOVE"&&!X[G]?ie[G]=J:we==="DEL"&&!X[G]&&(X[G]=!0);if(W!==void 0&&fe>=W)break}};return{...D,type:type$4,put:O,set:O,del:F,move:L,get:U,iterator:j,all:async()=>{const W=[];for await(const X of j())W.unshift(X);return W.sort((X,ie)=>X.position>ie.position?1:X.position===ie.position?0:-1).map(X=>({key:X.key,value:X.value,hash:X.hash}))}}};OrderedKeyValue.type=type$4;const registerOrderedKeyValue=()=>useDatabaseType(OrderedKeyValue);var ajv$1={exports:{}},core$3={},validate$2={},boolSchema={},errors$1={},codegen={},code$4={},hasRequiredCode$2;function requireCode$2(){return hasRequiredCode$2||(hasRequiredCode$2=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.regexpCode=n.getEsmExportName=n.getProperty=n.safeStringify=n.stringify=n.strConcat=n.addCodeArg=n.str=n._=n.nil=n._Code=n.Name=n.IDENTIFIER=n._CodeOrName=void 0;class r{}n._CodeOrName=r,n.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class g extends r{constructor(F){if(super(),!n.IDENTIFIER.test(F))throw new Error("CodeGen: name must be a valid identifier");this.str=F}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}n.Name=g;class _ extends r{constructor(F){super(),this._items=typeof F=="string"?[F]:F}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const F=this._items[0];return F===""||F==='""'}get str(){var F;return(F=this._str)!==null&&F!==void 0?F:this._str=this._items.reduce((U,j)=>`${U}${j}`,"")}get names(){var F;return(F=this._names)!==null&&F!==void 0?F:this._names=this._items.reduce((U,j)=>(j instanceof g&&(U[j.str]=(U[j.str]||0)+1),U),{})}}n._Code=_,n.nil=new _("");function x(L,...F){const U=[L[0]];let j=0;for(;j<F.length;)C(U,F[j]),U.push(L[++j]);return new _(U)}n._=x;const S=new _("+");function E(L,...F){const U=[D(L[0])];let j=0;for(;j<F.length;)U.push(S),C(U,F[j]),U.push(S,D(L[++j]));return T(U),new _(U)}n.str=E;function C(L,F){F instanceof _?L.push(...F._items):F instanceof g?L.push(F):L.push(I(F))}n.addCodeArg=C;function T(L){let F=1;for(;F<L.length-1;){if(L[F]===S){const U=R(L[F-1],L[F+1]);if(U!==void 0){L.splice(F-1,3,U);continue}L[F++]="+"}F++}}function R(L,F){if(F==='""')return L;if(L==='""')return F;if(typeof L=="string")return F instanceof g||L[L.length-1]!=='"'?void 0:typeof F!="string"?`${L.slice(0,-1)}${F}"`:F[0]==='"'?L.slice(0,-1)+F.slice(1):void 0;if(typeof F=="string"&&F[0]==='"'&&!(L instanceof g))return`"${L}${F.slice(1)}`}function A(L,F){return F.emptyStr()?L:L.emptyStr()?F:E`${L}${F}`}n.strConcat=A;function I(L){return typeof L=="number"||typeof L=="boolean"||L===null?L:D(Array.isArray(L)?L.join(","):L)}function B(L){return new _(D(L))}n.stringify=B;function D(L){return JSON.stringify(L).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}n.safeStringify=D;function N(L){return typeof L=="string"&&n.IDENTIFIER.test(L)?new _(`.${L}`):x`[${L}]`}n.getProperty=N;function M(L){if(typeof L=="string"&&n.IDENTIFIER.test(L))return new _(`${L}`);throw new Error(`CodeGen: invalid export name: ${L}, use explicit $id name mapping`)}n.getEsmExportName=M;function O(L){return new _(L.toString())}n.regexpCode=O}(code$4)),code$4}var scope={},hasRequiredScope;function requireScope(){return hasRequiredScope||(hasRequiredScope=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.ValueScope=n.ValueScopeName=n.Scope=n.varKinds=n.UsedValueState=void 0;const r=requireCode$2();class g extends Error{constructor(R){super(`CodeGen: "code" for ${R} not defined`),this.value=R.value}}var _;(function(T){T[T.Started=0]="Started",T[T.Completed=1]="Completed"})(_||(n.UsedValueState=_={})),n.varKinds={const:new r.Name("const"),let:new r.Name("let"),var:new r.Name("var")};class x{constructor({prefixes:R,parent:A}={}){this._names={},this._prefixes=R,this._parent=A}toName(R){return R instanceof r.Name?R:this.name(R)}name(R){return new r.Name(this._newName(R))}_newName(R){const A=this._names[R]||this._nameGroup(R);return`${R}${A.index++}`}_nameGroup(R){var A,I;if(!((I=(A=this._parent)===null||A===void 0?void 0:A._prefixes)===null||I===void 0)&&I.has(R)||this._prefixes&&!this._prefixes.has(R))throw new Error(`CodeGen: prefix "${R}" is not allowed in this scope`);return this._names[R]={prefix:R,index:0}}}n.Scope=x;class S extends r.Name{constructor(R,A){super(A),this.prefix=R}setValue(R,{property:A,itemIndex:I}){this.value=R,this.scopePath=(0,r._)`.${new r.Name(A)}[${I}]`}}n.ValueScopeName=S;const E=(0,r._)`\n`;class C extends x{constructor(R){super(R),this._values={},this._scope=R.scope,this.opts={...R,_n:R.lines?E:r.nil}}get(){return this._scope}name(R){return new S(R,this._newName(R))}value(R,A){var I;if(A.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const B=this.toName(R),{prefix:D}=B,N=(I=A.key)!==null&&I!==void 0?I:A.ref;let M=this._values[D];if(M){const F=M.get(N);if(F)return F}else M=this._values[D]=new Map;M.set(N,B);const O=this._scope[D]||(this._scope[D]=[]),L=O.length;return O[L]=A.ref,B.setValue(A,{property:D,itemIndex:L}),B}getValue(R,A){const I=this._values[R];if(I)return I.get(A)}scopeRefs(R,A=this._values){return this._reduceValues(A,I=>{if(I.scopePath===void 0)throw new Error(`CodeGen: name "${I}" has no value`);return(0,r._)`${R}${I.scopePath}`})}scopeCode(R=this._values,A,I){return this._reduceValues(R,B=>{if(B.value===void 0)throw new Error(`CodeGen: name "${B}" has no value`);return B.value.code},A,I)}_reduceValues(R,A,I={},B){let D=r.nil;for(const N in R){const M=R[N];if(!M)continue;const O=I[N]=I[N]||new Map;M.forEach(L=>{if(O.has(L))return;O.set(L,_.Started);let F=A(L);if(F){const U=this.opts.es5?n.varKinds.var:n.varKinds.const;D=(0,r._)`${D}${U} ${L} = ${F};${this.opts._n}`}else if(F=B?.(L))D=(0,r._)`${D}${F}${this.opts._n}`;else throw new g(L);O.set(L,_.Completed)})}return D}}n.ValueScope=C}(scope)),scope}var hasRequiredCodegen;function requireCodegen(){return hasRequiredCodegen||(hasRequiredCodegen=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.or=n.and=n.not=n.CodeGen=n.operators=n.varKinds=n.ValueScopeName=n.ValueScope=n.Scope=n.Name=n.regexpCode=n.stringify=n.getProperty=n.nil=n.strConcat=n.str=n._=void 0;const r=requireCode$2(),g=requireScope();var _=requireCode$2();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return _._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return _.str}}),Object.defineProperty(n,"strConcat",{enumerable:!0,get:function(){return _.strConcat}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return _.nil}}),Object.defineProperty(n,"getProperty",{enumerable:!0,get:function(){return _.getProperty}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return _.stringify}}),Object.defineProperty(n,"regexpCode",{enumerable:!0,get:function(){return _.regexpCode}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return _.Name}});var x=requireScope();Object.defineProperty(n,"Scope",{enumerable:!0,get:function(){return x.Scope}}),Object.defineProperty(n,"ValueScope",{enumerable:!0,get:function(){return x.ValueScope}}),Object.defineProperty(n,"ValueScopeName",{enumerable:!0,get:function(){return x.ValueScopeName}}),Object.defineProperty(n,"varKinds",{enumerable:!0,get:function(){return x.varKinds}}),n.operators={GT:new r._Code(">"),GTE:new r._Code(">="),LT:new r._Code("<"),LTE:new r._Code("<="),EQ:new r._Code("==="),NEQ:new r._Code("!=="),NOT:new r._Code("!"),OR:new r._Code("||"),AND:new r._Code("&&"),ADD:new r._Code("+")};class S{optimizeNodes(){return this}optimizeNames(ye,Ie){return this}}class E extends S{constructor(ye,Ie,ke){super(),this.varKind=ye,this.name=Ie,this.rhs=ke}render({es5:ye,_n:Ie}){const ke=ye?g.varKinds.var:this.varKind,Ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ke} ${this.name}${Ce};`+Ie}optimizeNames(ye,Ie){if(ye[this.name.str])return this.rhs&&(this.rhs=q(this.rhs,ye,Ie)),this}get names(){return this.rhs instanceof r._CodeOrName?this.rhs.names:{}}}class C extends S{constructor(ye,Ie,ke){super(),this.lhs=ye,this.rhs=Ie,this.sideEffects=ke}render({_n:ye}){return`${this.lhs} = ${this.rhs};`+ye}optimizeNames(ye,Ie){if(!(this.lhs instanceof r.Name&&!ye[this.lhs.str]&&!this.sideEffects))return this.rhs=q(this.rhs,ye,Ie),this}get names(){const ye=this.lhs instanceof r.Name?{}:{...this.lhs.names};return J(ye,this.rhs)}}class T extends C{constructor(ye,Ie,ke,Ce){super(ye,ke,Ce),this.op=Ie}render({_n:ye}){return`${this.lhs} ${this.op}= ${this.rhs};`+ye}}class R extends S{constructor(ye){super(),this.label=ye,this.names={}}render({_n:ye}){return`${this.label}:`+ye}}class A extends S{constructor(ye){super(),this.label=ye,this.names={}}render({_n:ye}){return`break${this.label?` ${this.label}`:""};`+ye}}class I extends S{constructor(ye){super(),this.error=ye}render({_n:ye}){return`throw ${this.error};`+ye}get names(){return this.error.names}}class B extends S{constructor(ye){super(),this.code=ye}render({_n:ye}){return`${this.code};`+ye}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(ye,Ie){return this.code=q(this.code,ye,Ie),this}get names(){return this.code instanceof r._CodeOrName?this.code.names:{}}}class D extends S{constructor(ye=[]){super(),this.nodes=ye}render(ye){return this.nodes.reduce((Ie,ke)=>Ie+ke.render(ye),"")}optimizeNodes(){const{nodes:ye}=this;let Ie=ye.length;for(;Ie--;){const ke=ye[Ie].optimizeNodes();Array.isArray(ke)?ye.splice(Ie,1,...ke):ke?ye[Ie]=ke:ye.splice(Ie,1)}return ye.length>0?this:void 0}optimizeNames(ye,Ie){const{nodes:ke}=this;let Ce=ke.length;for(;Ce--;){const Ae=ke[Ce];Ae.optimizeNames(ye,Ie)||(H(ye,Ae.names),ke.splice(Ce,1))}return ke.length>0?this:void 0}get names(){return this.nodes.reduce((ye,Ie)=>G(ye,Ie.names),{})}}class N extends D{render(ye){return"{"+ye._n+super.render(ye)+"}"+ye._n}}class M extends D{}class O extends N{}O.kind="else";class L extends N{constructor(ye,Ie){super(Ie),this.condition=ye}render(ye){let Ie=`if(${this.condition})`+super.render(ye);return this.else&&(Ie+="else "+this.else.render(ye)),Ie}optimizeNodes(){super.optimizeNodes();const ye=this.condition;if(ye===!0)return this.nodes;let Ie=this.else;if(Ie){const ke=Ie.optimizeNodes();Ie=this.else=Array.isArray(ke)?new O(ke):ke}if(Ie)return ye===!1?Ie instanceof L?Ie:Ie.nodes:this.nodes.length?this:new L(ve(ye),Ie instanceof L?[Ie]:Ie.nodes);if(!(ye===!1||!this.nodes.length))return this}optimizeNames(ye,Ie){var ke;if(this.else=(ke=this.else)===null||ke===void 0?void 0:ke.optimizeNames(ye,Ie),!!(super.optimizeNames(ye,Ie)||this.else))return this.condition=q(this.condition,ye,Ie),this}get names(){const ye=super.names;return J(ye,this.condition),this.else&&G(ye,this.else.names),ye}}L.kind="if";class F extends N{}F.kind="for";class U extends F{constructor(ye){super(),this.iteration=ye}render(ye){return`for(${this.iteration})`+super.render(ye)}optimizeNames(ye,Ie){if(super.optimizeNames(ye,Ie))return this.iteration=q(this.iteration,ye,Ie),this}get names(){return G(super.names,this.iteration.names)}}class j extends F{constructor(ye,Ie,ke,Ce){super(),this.varKind=ye,this.name=Ie,this.from=ke,this.to=Ce}render(ye){const Ie=ye.es5?g.varKinds.var:this.varKind,{name:ke,from:Ce,to:Ae}=this;return`for(${Ie} ${ke}=${Ce}; ${ke}<${Ae}; ${ke}++)`+super.render(ye)}get names(){const ye=J(super.names,this.from);return J(ye,this.to)}}class z extends F{constructor(ye,Ie,ke,Ce){super(),this.loop=ye,this.varKind=Ie,this.name=ke,this.iterable=Ce}render(ye){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(ye)}optimizeNames(ye,Ie){if(super.optimizeNames(ye,Ie))return this.iterable=q(this.iterable,ye,Ie),this}get names(){return G(super.names,this.iterable.names)}}class W extends N{constructor(ye,Ie,ke){super(),this.name=ye,this.args=Ie,this.async=ke}render(ye){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(ye)}}W.kind="func";class X extends D{render(ye){return"return "+super.render(ye)}}X.kind="return";class ie extends N{render(ye){let Ie="try"+super.render(ye);return this.catch&&(Ie+=this.catch.render(ye)),this.finally&&(Ie+=this.finally.render(ye)),Ie}optimizeNodes(){var ye,Ie;return super.optimizeNodes(),(ye=this.catch)===null||ye===void 0||ye.optimizeNodes(),(Ie=this.finally)===null||Ie===void 0||Ie.optimizeNodes(),this}optimizeNames(ye,Ie){var ke,Ce;return super.optimizeNames(ye,Ie),(ke=this.catch)===null||ke===void 0||ke.optimizeNames(ye,Ie),(Ce=this.finally)===null||Ce===void 0||Ce.optimizeNames(ye,Ie),this}get names(){const ye=super.names;return this.catch&&G(ye,this.catch.names),this.finally&&G(ye,this.finally.names),ye}}class fe extends N{constructor(ye){super(),this.error=ye}render(ye){return`catch(${this.error})`+super.render(ye)}}fe.kind="catch";class xe extends N{render(ye){return"finally"+super.render(ye)}}xe.kind="finally";class we{constructor(ye,Ie={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...Ie,_n:Ie.lines?`
`:""},this._extScope=ye,this._scope=new g.Scope({parent:ye}),this._nodes=[new M]}toString(){return this._root.render(this.opts)}name(ye){return this._scope.name(ye)}scopeName(ye){return this._extScope.name(ye)}scopeValue(ye,Ie){const ke=this._extScope.value(ye,Ie);return(this._values[ke.prefix]||(this._values[ke.prefix]=new Set)).add(ke),ke}getScopeValue(ye,Ie){return this._extScope.getValue(ye,Ie)}scopeRefs(ye){return this._extScope.scopeRefs(ye,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(ye,Ie,ke,Ce){const Ae=this._scope.toName(Ie);return ke!==void 0&&Ce&&(this._constants[Ae.str]=ke),this._leafNode(new E(ye,Ae,ke)),Ae}const(ye,Ie,ke){return this._def(g.varKinds.const,ye,Ie,ke)}let(ye,Ie,ke){return this._def(g.varKinds.let,ye,Ie,ke)}var(ye,Ie,ke){return this._def(g.varKinds.var,ye,Ie,ke)}assign(ye,Ie,ke){return this._leafNode(new C(ye,Ie,ke))}add(ye,Ie){return this._leafNode(new T(ye,n.operators.ADD,Ie))}code(ye){return typeof ye=="function"?ye():ye!==r.nil&&this._leafNode(new B(ye)),this}object(...ye){const Ie=["{"];for(const[ke,Ce]of ye)Ie.length>1&&Ie.push(","),Ie.push(ke),(ke!==Ce||this.opts.es5)&&(Ie.push(":"),(0,r.addCodeArg)(Ie,Ce));return Ie.push("}"),new r._Code(Ie)}if(ye,Ie,ke){if(this._blockNode(new L(ye)),Ie&&ke)this.code(Ie).else().code(ke).endIf();else if(Ie)this.code(Ie).endIf();else if(ke)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(ye){return this._elseNode(new L(ye))}else(){return this._elseNode(new O)}endIf(){return this._endBlockNode(L,O)}_for(ye,Ie){return this._blockNode(ye),Ie&&this.code(Ie).endFor(),this}for(ye,Ie){return this._for(new U(ye),Ie)}forRange(ye,Ie,ke,Ce,Ae=this.opts.es5?g.varKinds.var:g.varKinds.let){const Ne=this._scope.toName(ye);return this._for(new j(Ae,Ne,Ie,ke),()=>Ce(Ne))}forOf(ye,Ie,ke,Ce=g.varKinds.const){const Ae=this._scope.toName(ye);if(this.opts.es5){const Ne=Ie instanceof r.Name?Ie:this.var("_arr",Ie);return this.forRange("_i",0,(0,r._)`${Ne}.length`,We=>{this.var(Ae,(0,r._)`${Ne}[${We}]`),ke(Ae)})}return this._for(new z("of",Ce,Ae,Ie),()=>ke(Ae))}forIn(ye,Ie,ke,Ce=this.opts.es5?g.varKinds.var:g.varKinds.const){if(this.opts.ownProperties)return this.forOf(ye,(0,r._)`Object.keys(${Ie})`,ke);const Ae=this._scope.toName(ye);return this._for(new z("in",Ce,Ae,Ie),()=>ke(Ae))}endFor(){return this._endBlockNode(F)}label(ye){return this._leafNode(new R(ye))}break(ye){return this._leafNode(new A(ye))}return(ye){const Ie=new X;if(this._blockNode(Ie),this.code(ye),Ie.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(X)}try(ye,Ie,ke){if(!Ie&&!ke)throw new Error('CodeGen: "try" without "catch" and "finally"');const Ce=new ie;if(this._blockNode(Ce),this.code(ye),Ie){const Ae=this.name("e");this._currNode=Ce.catch=new fe(Ae),Ie(Ae)}return ke&&(this._currNode=Ce.finally=new xe,this.code(ke)),this._endBlockNode(fe,xe)}throw(ye){return this._leafNode(new I(ye))}block(ye,Ie){return this._blockStarts.push(this._nodes.length),ye&&this.code(ye).endBlock(Ie),this}endBlock(ye){const Ie=this._blockStarts.pop();if(Ie===void 0)throw new Error("CodeGen: not in self-balancing block");const ke=this._nodes.length-Ie;if(ke<0||ye!==void 0&&ke!==ye)throw new Error(`CodeGen: wrong number of nodes: ${ke} vs ${ye} expected`);return this._nodes.length=Ie,this}func(ye,Ie=r.nil,ke,Ce){return this._blockNode(new W(ye,Ie,ke)),Ce&&this.code(Ce).endFunc(),this}endFunc(){return this._endBlockNode(W)}optimize(ye=1){for(;ye-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(ye){return this._currNode.nodes.push(ye),this}_blockNode(ye){this._currNode.nodes.push(ye),this._nodes.push(ye)}_endBlockNode(ye,Ie){const ke=this._currNode;if(ke instanceof ye||Ie&&ke instanceof Ie)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${Ie?`${ye.kind}/${Ie.kind}`:ye.kind}"`)}_elseNode(ye){const Ie=this._currNode;if(!(Ie instanceof L))throw new Error('CodeGen: "else" without "if"');return this._currNode=Ie.else=ye,this}get _root(){return this._nodes[0]}get _currNode(){const ye=this._nodes;return ye[ye.length-1]}set _currNode(ye){const Ie=this._nodes;Ie[Ie.length-1]=ye}}n.CodeGen=we;function G(be,ye){for(const Ie in ye)be[Ie]=(be[Ie]||0)+(ye[Ie]||0);return be}function J(be,ye){return ye instanceof r._CodeOrName?G(be,ye.names):be}function q(be,ye,Ie){if(be instanceof r.Name)return ke(be);if(!Ce(be))return be;return new r._Code(be._items.reduce((Ae,Ne)=>(Ne instanceof r.Name&&(Ne=ke(Ne)),Ne instanceof r._Code?Ae.push(...Ne._items):Ae.push(Ne),Ae),[]));function ke(Ae){const Ne=Ie[Ae.str];return Ne===void 0||ye[Ae.str]!==1?Ae:(delete ye[Ae.str],Ne)}function Ce(Ae){return Ae instanceof r._Code&&Ae._items.some(Ne=>Ne instanceof r.Name&&ye[Ne.str]===1&&Ie[Ne.str]!==void 0)}}function H(be,ye){for(const Ie in ye)be[Ie]=(be[Ie]||0)-(ye[Ie]||0)}function ve(be){return typeof be=="boolean"||typeof be=="number"||be===null?!be:(0,r._)`!${Y(be)}`}n.not=ve;const Z=te(n.operators.AND);function ce(...be){return be.reduce(Z)}n.and=ce;const ue=te(n.operators.OR);function se(...be){return be.reduce(ue)}n.or=se;function te(be){return(ye,Ie)=>ye===r.nil?Ie:Ie===r.nil?ye:(0,r._)`${Y(ye)} ${be} ${Y(Ie)}`}function Y(be){return be instanceof r.Name?be:(0,r._)`(${be})`}}(codegen)),codegen}var util$2={},hasRequiredUtil$2;function requireUtil$2(){if(hasRequiredUtil$2)return util$2;hasRequiredUtil$2=1,Object.defineProperty(util$2,"__esModule",{value:!0}),util$2.checkStrictMode=util$2.getErrorPath=util$2.Type=util$2.useFunc=util$2.setEvaluated=util$2.evaluatedPropsToName=util$2.mergeEvaluated=util$2.eachItem=util$2.unescapeJsonPointer=util$2.escapeJsonPointer=util$2.escapeFragment=util$2.unescapeFragment=util$2.schemaRefOrVal=util$2.schemaHasRulesButRef=util$2.schemaHasRules=util$2.checkUnknownRules=util$2.alwaysValidSchema=util$2.toHash=void 0;const n=requireCodegen(),r=requireCode$2();function g(z){const W={};for(const X of z)W[X]=!0;return W}util$2.toHash=g;function _(z,W){return typeof W=="boolean"?W:Object.keys(W).length===0?!0:(x(z,W),!S(W,z.self.RULES.all))}util$2.alwaysValidSchema=_;function x(z,W=z.schema){const{opts:X,self:ie}=z;if(!X.strictSchema||typeof W=="boolean")return;const fe=ie.RULES.keywords;for(const xe in W)fe[xe]||j(z,`unknown keyword: "${xe}"`)}util$2.checkUnknownRules=x;function S(z,W){if(typeof z=="boolean")return!z;for(const X in z)if(W[X])return!0;return!1}util$2.schemaHasRules=S;function E(z,W){if(typeof z=="boolean")return!z;for(const X in z)if(X!=="$ref"&&W.all[X])return!0;return!1}util$2.schemaHasRulesButRef=E;function C({topSchemaRef:z,schemaPath:W},X,ie,fe){if(!fe){if(typeof X=="number"||typeof X=="boolean")return X;if(typeof X=="string")return(0,n._)`${X}`}return(0,n._)`${z}${W}${(0,n.getProperty)(ie)}`}util$2.schemaRefOrVal=C;function T(z){return I(decodeURIComponent(z))}util$2.unescapeFragment=T;function R(z){return encodeURIComponent(A(z))}util$2.escapeFragment=R;function A(z){return typeof z=="number"?`${z}`:z.replace(/~/g,"~0").replace(/\//g,"~1")}util$2.escapeJsonPointer=A;function I(z){return z.replace(/~1/g,"/").replace(/~0/g,"~")}util$2.unescapeJsonPointer=I;function B(z,W){if(Array.isArray(z))for(const X of z)W(X);else W(z)}util$2.eachItem=B;function D({mergeNames:z,mergeToName:W,mergeValues:X,resultToName:ie}){return(fe,xe,we,G)=>{const J=we===void 0?xe:we instanceof n.Name?(xe instanceof n.Name?z(fe,xe,we):W(fe,xe,we),we):xe instanceof n.Name?(W(fe,we,xe),xe):X(xe,we);return G===n.Name&&!(J instanceof n.Name)?ie(fe,J):J}}util$2.mergeEvaluated={props:D({mergeNames:(z,W,X)=>z.if((0,n._)`${X} !== true && ${W} !== undefined`,()=>{z.if((0,n._)`${W} === true`,()=>z.assign(X,!0),()=>z.assign(X,(0,n._)`${X} || {}`).code((0,n._)`Object.assign(${X}, ${W})`))}),mergeToName:(z,W,X)=>z.if((0,n._)`${X} !== true`,()=>{W===!0?z.assign(X,!0):(z.assign(X,(0,n._)`${X} || {}`),M(z,X,W))}),mergeValues:(z,W)=>z===!0?!0:{...z,...W},resultToName:N}),items:D({mergeNames:(z,W,X)=>z.if((0,n._)`${X} !== true && ${W} !== undefined`,()=>z.assign(X,(0,n._)`${W} === true ? true : ${X} > ${W} ? ${X} : ${W}`)),mergeToName:(z,W,X)=>z.if((0,n._)`${X} !== true`,()=>z.assign(X,W===!0?!0:(0,n._)`${X} > ${W} ? ${X} : ${W}`)),mergeValues:(z,W)=>z===!0?!0:Math.max(z,W),resultToName:(z,W)=>z.var("items",W)})};function N(z,W){if(W===!0)return z.var("props",!0);const X=z.var("props",(0,n._)`{}`);return W!==void 0&&M(z,X,W),X}util$2.evaluatedPropsToName=N;function M(z,W,X){Object.keys(X).forEach(ie=>z.assign((0,n._)`${W}${(0,n.getProperty)(ie)}`,!0))}util$2.setEvaluated=M;const O={};function L(z,W){return z.scopeValue("func",{ref:W,code:O[W.code]||(O[W.code]=new r._Code(W.code))})}util$2.useFunc=L;var F;(function(z){z[z.Num=0]="Num",z[z.Str=1]="Str"})(F||(util$2.Type=F={}));function U(z,W,X){if(z instanceof n.Name){const ie=W===F.Num;return X?ie?(0,n._)`"[" + ${z} + "]"`:(0,n._)`"['" + ${z} + "']"`:ie?(0,n._)`"/" + ${z}`:(0,n._)`"/" + ${z}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return X?(0,n.getProperty)(z).toString():"/"+A(z)}util$2.getErrorPath=U;function j(z,W,X=z.opts.strictSchema){if(X){if(W=`strict mode: ${W}`,X===!0)throw new Error(W);z.self.logger.warn(W)}}return util$2.checkStrictMode=j,util$2}var names$1={},hasRequiredNames;function requireNames(){if(hasRequiredNames)return names$1;hasRequiredNames=1,Object.defineProperty(names$1,"__esModule",{value:!0});const n=requireCodegen(),r={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};return names$1.default=r,names$1}var hasRequiredErrors;function requireErrors(){return hasRequiredErrors||(hasRequiredErrors=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.extendErrors=n.resetErrorsCount=n.reportExtraError=n.reportError=n.keyword$DataError=n.keywordError=void 0;const r=requireCodegen(),g=requireUtil$2(),_=requireNames();n.keywordError={message:({keyword:O})=>(0,r.str)`must pass "${O}" keyword validation`},n.keyword$DataError={message:({keyword:O,schemaType:L})=>L?(0,r.str)`"${O}" keyword must be ${L} ($data)`:(0,r.str)`"${O}" keyword is invalid ($data)`};function x(O,L=n.keywordError,F,U){const{it:j}=O,{gen:z,compositeRule:W,allErrors:X}=j,ie=I(O,L,F);U??(W||X)?T(z,ie):R(j,(0,r._)`[${ie}]`)}n.reportError=x;function S(O,L=n.keywordError,F){const{it:U}=O,{gen:j,compositeRule:z,allErrors:W}=U,X=I(O,L,F);T(j,X),z||W||R(U,_.default.vErrors)}n.reportExtraError=S;function E(O,L){O.assign(_.default.errors,L),O.if((0,r._)`${_.default.vErrors} !== null`,()=>O.if(L,()=>O.assign((0,r._)`${_.default.vErrors}.length`,L),()=>O.assign(_.default.vErrors,null)))}n.resetErrorsCount=E;function C({gen:O,keyword:L,schemaValue:F,data:U,errsCount:j,it:z}){if(j===void 0)throw new Error("ajv implementation error");const W=O.name("err");O.forRange("i",j,_.default.errors,X=>{O.const(W,(0,r._)`${_.default.vErrors}[${X}]`),O.if((0,r._)`${W}.instancePath === undefined`,()=>O.assign((0,r._)`${W}.instancePath`,(0,r.strConcat)(_.default.instancePath,z.errorPath))),O.assign((0,r._)`${W}.schemaPath`,(0,r.str)`${z.errSchemaPath}/${L}`),z.opts.verbose&&(O.assign((0,r._)`${W}.schema`,F),O.assign((0,r._)`${W}.data`,U))})}n.extendErrors=C;function T(O,L){const F=O.const("err",L);O.if((0,r._)`${_.default.vErrors} === null`,()=>O.assign(_.default.vErrors,(0,r._)`[${F}]`),(0,r._)`${_.default.vErrors}.push(${F})`),O.code((0,r._)`${_.default.errors}++`)}function R(O,L){const{gen:F,validateName:U,schemaEnv:j}=O;j.$async?F.throw((0,r._)`new ${O.ValidationError}(${L})`):(F.assign((0,r._)`${U}.errors`,L),F.return(!1))}const A={keyword:new r.Name("keyword"),schemaPath:new r.Name("schemaPath"),params:new r.Name("params"),propertyName:new r.Name("propertyName"),message:new r.Name("message"),schema:new r.Name("schema"),parentSchema:new r.Name("parentSchema")};function I(O,L,F){const{createErrors:U}=O.it;return U===!1?(0,r._)`{}`:B(O,L,F)}function B(O,L,F={}){const{gen:U,it:j}=O,z=[D(j,F),N(O,F)];return M(O,L,z),U.object(...z)}function D({errorPath:O},{instancePath:L}){const F=L?(0,r.str)`${O}${(0,g.getErrorPath)(L,g.Type.Str)}`:O;return[_.default.instancePath,(0,r.strConcat)(_.default.instancePath,F)]}function N({keyword:O,it:{errSchemaPath:L}},{schemaPath:F,parentSchema:U}){let j=U?L:(0,r.str)`${L}/${O}`;return F&&(j=(0,r.str)`${j}${(0,g.getErrorPath)(F,g.Type.Str)}`),[A.schemaPath,j]}function M(O,{params:L,message:F},U){const{keyword:j,data:z,schemaValue:W,it:X}=O,{opts:ie,propertyName:fe,topSchemaRef:xe,schemaPath:we}=X;U.push([A.keyword,j],[A.params,typeof L=="function"?L(O):L||(0,r._)`{}`]),ie.messages&&U.push([A.message,typeof F=="function"?F(O):F]),ie.verbose&&U.push([A.schema,W],[A.parentSchema,(0,r._)`${xe}${we}`],[_.default.data,z]),fe&&U.push([A.propertyName,fe])}}(errors$1)),errors$1}var hasRequiredBoolSchema;function requireBoolSchema(){if(hasRequiredBoolSchema)return boolSchema;hasRequiredBoolSchema=1,Object.defineProperty(boolSchema,"__esModule",{value:!0}),boolSchema.boolOrEmptySchema=boolSchema.topBoolOrEmptySchema=void 0;const n=requireErrors(),r=requireCodegen(),g=requireNames(),_={message:"boolean schema is false"};function x(C){const{gen:T,schema:R,validateName:A}=C;R===!1?E(C,!1):typeof R=="object"&&R.$async===!0?T.return(g.default.data):(T.assign((0,r._)`${A}.errors`,null),T.return(!0))}boolSchema.topBoolOrEmptySchema=x;function S(C,T){const{gen:R,schema:A}=C;A===!1?(R.var(T,!1),E(C)):R.var(T,!0)}boolSchema.boolOrEmptySchema=S;function E(C,T){const{gen:R,data:A}=C,I={gen:R,keyword:"false schema",data:A,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:C};(0,n.reportError)(I,_,void 0,T)}return boolSchema}var dataType={},rules={},hasRequiredRules;function requireRules(){if(hasRequiredRules)return rules;hasRequiredRules=1,Object.defineProperty(rules,"__esModule",{value:!0}),rules.getRules=rules.isJSONType=void 0;const n=["string","number","integer","boolean","null","object","array"],r=new Set(n);function g(x){return typeof x=="string"&&r.has(x)}rules.isJSONType=g;function _(){const x={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...x,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},x.number,x.string,x.array,x.object],post:{rules:[]},all:{},keywords:{}}}return rules.getRules=_,rules}var applicability={},hasRequiredApplicability;function requireApplicability(){if(hasRequiredApplicability)return applicability;hasRequiredApplicability=1,Object.defineProperty(applicability,"__esModule",{value:!0}),applicability.shouldUseRule=applicability.shouldUseGroup=applicability.schemaHasRulesForType=void 0;function n({schema:_,self:x},S){const E=x.RULES.types[S];return E&&E!==!0&&r(_,E)}applicability.schemaHasRulesForType=n;function r(_,x){return x.rules.some(S=>g(_,S))}applicability.shouldUseGroup=r;function g(_,x){var S;return _[x.keyword]!==void 0||((S=x.definition.implements)===null||S===void 0?void 0:S.some(E=>_[E]!==void 0))}return applicability.shouldUseRule=g,applicability}var hasRequiredDataType;function requireDataType(){if(hasRequiredDataType)return dataType;hasRequiredDataType=1,Object.defineProperty(dataType,"__esModule",{value:!0}),dataType.reportTypeError=dataType.checkDataTypes=dataType.checkDataType=dataType.coerceAndCheckDataType=dataType.getJSONTypes=dataType.getSchemaTypes=dataType.DataType=void 0;const n=requireRules(),r=requireApplicability(),g=requireErrors(),_=requireCodegen(),x=requireUtil$2();var S;(function(F){F[F.Correct=0]="Correct",F[F.Wrong=1]="Wrong"})(S||(dataType.DataType=S={}));function E(F){const U=C(F.type);if(U.includes("null")){if(F.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!U.length&&F.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');F.nullable===!0&&U.push("null")}return U}dataType.getSchemaTypes=E;function C(F){const U=Array.isArray(F)?F:F?[F]:[];if(U.every(n.isJSONType))return U;throw new Error("type must be JSONType or JSONType[]: "+U.join(","))}dataType.getJSONTypes=C;function T(F,U){const{gen:j,data:z,opts:W}=F,X=A(U,W.coerceTypes),ie=U.length>0&&!(X.length===0&&U.length===1&&(0,r.schemaHasRulesForType)(F,U[0]));if(ie){const fe=N(U,z,W.strictNumbers,S.Wrong);j.if(fe,()=>{X.length?I(F,U,X):O(F)})}return ie}dataType.coerceAndCheckDataType=T;const R=new Set(["string","number","integer","boolean","null"]);function A(F,U){return U?F.filter(j=>R.has(j)||U==="array"&&j==="array"):[]}function I(F,U,j){const{gen:z,data:W,opts:X}=F,ie=z.let("dataType",(0,_._)`typeof ${W}`),fe=z.let("coerced",(0,_._)`undefined`);X.coerceTypes==="array"&&z.if((0,_._)`${ie} == 'object' && Array.isArray(${W}) && ${W}.length == 1`,()=>z.assign(W,(0,_._)`${W}[0]`).assign(ie,(0,_._)`typeof ${W}`).if(N(U,W,X.strictNumbers),()=>z.assign(fe,W))),z.if((0,_._)`${fe} !== undefined`);for(const we of j)(R.has(we)||we==="array"&&X.coerceTypes==="array")&&xe(we);z.else(),O(F),z.endIf(),z.if((0,_._)`${fe} !== undefined`,()=>{z.assign(W,fe),B(F,fe)});function xe(we){switch(we){case"string":z.elseIf((0,_._)`${ie} == "number" || ${ie} == "boolean"`).assign(fe,(0,_._)`"" + ${W}`).elseIf((0,_._)`${W} === null`).assign(fe,(0,_._)`""`);return;case"number":z.elseIf((0,_._)`${ie} == "boolean" || ${W} === null
              || (${ie} == "string" && ${W} && ${W} == +${W})`).assign(fe,(0,_._)`+${W}`);return;case"integer":z.elseIf((0,_._)`${ie} === "boolean" || ${W} === null
              || (${ie} === "string" && ${W} && ${W} == +${W} && !(${W} % 1))`).assign(fe,(0,_._)`+${W}`);return;case"boolean":z.elseIf((0,_._)`${W} === "false" || ${W} === 0 || ${W} === null`).assign(fe,!1).elseIf((0,_._)`${W} === "true" || ${W} === 1`).assign(fe,!0);return;case"null":z.elseIf((0,_._)`${W} === "" || ${W} === 0 || ${W} === false`),z.assign(fe,null);return;case"array":z.elseIf((0,_._)`${ie} === "string" || ${ie} === "number"
              || ${ie} === "boolean" || ${W} === null`).assign(fe,(0,_._)`[${W}]`)}}}function B({gen:F,parentData:U,parentDataProperty:j},z){F.if((0,_._)`${U} !== undefined`,()=>F.assign((0,_._)`${U}[${j}]`,z))}function D(F,U,j,z=S.Correct){const W=z===S.Correct?_.operators.EQ:_.operators.NEQ;let X;switch(F){case"null":return(0,_._)`${U} ${W} null`;case"array":X=(0,_._)`Array.isArray(${U})`;break;case"object":X=(0,_._)`${U} && typeof ${U} == "object" && !Array.isArray(${U})`;break;case"integer":X=ie((0,_._)`!(${U} % 1) && !isNaN(${U})`);break;case"number":X=ie();break;default:return(0,_._)`typeof ${U} ${W} ${F}`}return z===S.Correct?X:(0,_.not)(X);function ie(fe=_.nil){return(0,_.and)((0,_._)`typeof ${U} == "number"`,fe,j?(0,_._)`isFinite(${U})`:_.nil)}}dataType.checkDataType=D;function N(F,U,j,z){if(F.length===1)return D(F[0],U,j,z);let W;const X=(0,x.toHash)(F);if(X.array&&X.object){const ie=(0,_._)`typeof ${U} != "object"`;W=X.null?ie:(0,_._)`!${U} || ${ie}`,delete X.null,delete X.array,delete X.object}else W=_.nil;X.number&&delete X.integer;for(const ie in X)W=(0,_.and)(W,D(ie,U,j,z));return W}dataType.checkDataTypes=N;const M={message:({schema:F})=>`must be ${F}`,params:({schema:F,schemaValue:U})=>typeof F=="string"?(0,_._)`{type: ${F}}`:(0,_._)`{type: ${U}}`};function O(F){const U=L(F);(0,g.reportError)(U,M)}dataType.reportTypeError=O;function L(F){const{gen:U,data:j,schema:z}=F,W=(0,x.schemaRefOrVal)(F,z,"type");return{gen:U,keyword:"type",data:j,schema:z.type,schemaCode:W,schemaValue:W,parentSchema:z,params:{},it:F}}return dataType}var defaults$2={},hasRequiredDefaults;function requireDefaults(){if(hasRequiredDefaults)return defaults$2;hasRequiredDefaults=1,Object.defineProperty(defaults$2,"__esModule",{value:!0}),defaults$2.assignDefaults=void 0;const n=requireCodegen(),r=requireUtil$2();function g(x,S){const{properties:E,items:C}=x.schema;if(S==="object"&&E)for(const T in E)_(x,T,E[T].default);else S==="array"&&Array.isArray(C)&&C.forEach((T,R)=>_(x,R,T.default))}defaults$2.assignDefaults=g;function _(x,S,E){const{gen:C,compositeRule:T,data:R,opts:A}=x;if(E===void 0)return;const I=(0,n._)`${R}${(0,n.getProperty)(S)}`;if(T){(0,r.checkStrictMode)(x,`default is ignored for: ${I}`);return}let B=(0,n._)`${I} === undefined`;A.useDefaults==="empty"&&(B=(0,n._)`${B} || ${I} === null || ${I} === ""`),C.if(B,(0,n._)`${I} = ${(0,n.stringify)(E)}`)}return defaults$2}var keyword={},code$3={},hasRequiredCode$1;function requireCode$1(){if(hasRequiredCode$1)return code$3;hasRequiredCode$1=1,Object.defineProperty(code$3,"__esModule",{value:!0}),code$3.validateUnion=code$3.validateArray=code$3.usePattern=code$3.callValidateCode=code$3.schemaProperties=code$3.allSchemaProperties=code$3.noPropertyInData=code$3.propertyInData=code$3.isOwnProperty=code$3.hasPropFunc=code$3.reportMissingProp=code$3.checkMissingProp=code$3.checkReportMissingProp=void 0;const n=requireCodegen(),r=requireUtil$2(),g=requireNames(),_=requireUtil$2();function x(F,U){const{gen:j,data:z,it:W}=F;j.if(A(j,z,U,W.opts.ownProperties),()=>{F.setParams({missingProperty:(0,n._)`${U}`},!0),F.error()})}code$3.checkReportMissingProp=x;function S({gen:F,data:U,it:{opts:j}},z,W){return(0,n.or)(...z.map(X=>(0,n.and)(A(F,U,X,j.ownProperties),(0,n._)`${W} = ${X}`)))}code$3.checkMissingProp=S;function E(F,U){F.setParams({missingProperty:U},!0),F.error()}code$3.reportMissingProp=E;function C(F){return F.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,n._)`Object.prototype.hasOwnProperty`})}code$3.hasPropFunc=C;function T(F,U,j){return(0,n._)`${C(F)}.call(${U}, ${j})`}code$3.isOwnProperty=T;function R(F,U,j,z){const W=(0,n._)`${U}${(0,n.getProperty)(j)} !== undefined`;return z?(0,n._)`${W} && ${T(F,U,j)}`:W}code$3.propertyInData=R;function A(F,U,j,z){const W=(0,n._)`${U}${(0,n.getProperty)(j)} === undefined`;return z?(0,n.or)(W,(0,n.not)(T(F,U,j))):W}code$3.noPropertyInData=A;function I(F){return F?Object.keys(F).filter(U=>U!=="__proto__"):[]}code$3.allSchemaProperties=I;function B(F,U){return I(U).filter(j=>!(0,r.alwaysValidSchema)(F,U[j]))}code$3.schemaProperties=B;function D({schemaCode:F,data:U,it:{gen:j,topSchemaRef:z,schemaPath:W,errorPath:X},it:ie},fe,xe,we){const G=we?(0,n._)`${F}, ${U}, ${z}${W}`:U,J=[[g.default.instancePath,(0,n.strConcat)(g.default.instancePath,X)],[g.default.parentData,ie.parentData],[g.default.parentDataProperty,ie.parentDataProperty],[g.default.rootData,g.default.rootData]];ie.opts.dynamicRef&&J.push([g.default.dynamicAnchors,g.default.dynamicAnchors]);const q=(0,n._)`${G}, ${j.object(...J)}`;return xe!==n.nil?(0,n._)`${fe}.call(${xe}, ${q})`:(0,n._)`${fe}(${q})`}code$3.callValidateCode=D;const N=(0,n._)`new RegExp`;function M({gen:F,it:{opts:U}},j){const z=U.unicodeRegExp?"u":"",{regExp:W}=U.code,X=W(j,z);return F.scopeValue("pattern",{key:X.toString(),ref:X,code:(0,n._)`${W.code==="new RegExp"?N:(0,_.useFunc)(F,W)}(${j}, ${z})`})}code$3.usePattern=M;function O(F){const{gen:U,data:j,keyword:z,it:W}=F,X=U.name("valid");if(W.allErrors){const fe=U.let("valid",!0);return ie(()=>U.assign(fe,!1)),fe}return U.var(X,!0),ie(()=>U.break()),X;function ie(fe){const xe=U.const("len",(0,n._)`${j}.length`);U.forRange("i",0,xe,we=>{F.subschema({keyword:z,dataProp:we,dataPropType:r.Type.Num},X),U.if((0,n.not)(X),fe)})}}code$3.validateArray=O;function L(F){const{gen:U,schema:j,keyword:z,it:W}=F;if(!Array.isArray(j))throw new Error("ajv implementation error");if(j.some(xe=>(0,r.alwaysValidSchema)(W,xe))&&!W.opts.unevaluated)return;const ie=U.let("valid",!1),fe=U.name("_valid");U.block(()=>j.forEach((xe,we)=>{const G=F.subschema({keyword:z,schemaProp:we,compositeRule:!0},fe);U.assign(ie,(0,n._)`${ie} || ${fe}`),F.mergeValidEvaluated(G,fe)||U.if((0,n.not)(ie))})),F.result(ie,()=>F.reset(),()=>F.error(!0))}return code$3.validateUnion=L,code$3}var hasRequiredKeyword;function requireKeyword(){if(hasRequiredKeyword)return keyword;hasRequiredKeyword=1,Object.defineProperty(keyword,"__esModule",{value:!0}),keyword.validateKeywordUsage=keyword.validSchemaType=keyword.funcKeywordCode=keyword.macroKeywordCode=void 0;const n=requireCodegen(),r=requireNames(),g=requireCode$1(),_=requireErrors();function x(B,D){const{gen:N,keyword:M,schema:O,parentSchema:L,it:F}=B,U=D.macro.call(F.self,O,L,F),j=R(N,M,U);F.opts.validateSchema!==!1&&F.self.validateSchema(U,!0);const z=N.name("valid");B.subschema({schema:U,schemaPath:n.nil,errSchemaPath:`${F.errSchemaPath}/${M}`,topSchemaRef:j,compositeRule:!0},z),B.pass(z,()=>B.error(!0))}keyword.macroKeywordCode=x;function S(B,D){var N;const{gen:M,keyword:O,schema:L,parentSchema:F,$data:U,it:j}=B;T(j,D);const z=!U&&D.compile?D.compile.call(j.self,L,F,j):D.validate,W=R(M,O,z),X=M.let("valid");B.block$data(X,ie),B.ok((N=D.valid)!==null&&N!==void 0?N:X);function ie(){if(D.errors===!1)we(),D.modifying&&E(B),G(()=>B.error());else{const J=D.async?fe():xe();D.modifying&&E(B),G(()=>C(B,J))}}function fe(){const J=M.let("ruleErrs",null);return M.try(()=>we((0,n._)`await `),q=>M.assign(X,!1).if((0,n._)`${q} instanceof ${j.ValidationError}`,()=>M.assign(J,(0,n._)`${q}.errors`),()=>M.throw(q))),J}function xe(){const J=(0,n._)`${W}.errors`;return M.assign(J,null),we(n.nil),J}function we(J=D.async?(0,n._)`await `:n.nil){const q=j.opts.passContext?r.default.this:r.default.self,H=!("compile"in D&&!U||D.schema===!1);M.assign(X,(0,n._)`${J}${(0,g.callValidateCode)(B,W,q,H)}`,D.modifying)}function G(J){var q;M.if((0,n.not)((q=D.valid)!==null&&q!==void 0?q:X),J)}}keyword.funcKeywordCode=S;function E(B){const{gen:D,data:N,it:M}=B;D.if(M.parentData,()=>D.assign(N,(0,n._)`${M.parentData}[${M.parentDataProperty}]`))}function C(B,D){const{gen:N}=B;N.if((0,n._)`Array.isArray(${D})`,()=>{N.assign(r.default.vErrors,(0,n._)`${r.default.vErrors} === null ? ${D} : ${r.default.vErrors}.concat(${D})`).assign(r.default.errors,(0,n._)`${r.default.vErrors}.length`),(0,_.extendErrors)(B)},()=>B.error())}function T({schemaEnv:B},D){if(D.async&&!B.$async)throw new Error("async keyword in sync schema")}function R(B,D,N){if(N===void 0)throw new Error(`keyword "${D}" failed to compile`);return B.scopeValue("keyword",typeof N=="function"?{ref:N}:{ref:N,code:(0,n.stringify)(N)})}function A(B,D,N=!1){return!D.length||D.some(M=>M==="array"?Array.isArray(B):M==="object"?B&&typeof B=="object"&&!Array.isArray(B):typeof B==M||N&&typeof B>"u")}keyword.validSchemaType=A;function I({schema:B,opts:D,self:N,errSchemaPath:M},O,L){if(Array.isArray(O.keyword)?!O.keyword.includes(L):O.keyword!==L)throw new Error("ajv implementation error");const F=O.dependencies;if(F?.some(U=>!Object.prototype.hasOwnProperty.call(B,U)))throw new Error(`parent schema must have dependencies of ${L}: ${F.join(",")}`);if(O.validateSchema&&!O.validateSchema(B[L])){const j=`keyword "${L}" value is invalid at path "${M}": `+N.errorsText(O.validateSchema.errors);if(D.validateSchema==="log")N.logger.error(j);else throw new Error(j)}}return keyword.validateKeywordUsage=I,keyword}var subschema={},hasRequiredSubschema;function requireSubschema(){if(hasRequiredSubschema)return subschema;hasRequiredSubschema=1,Object.defineProperty(subschema,"__esModule",{value:!0}),subschema.extendSubschemaMode=subschema.extendSubschemaData=subschema.getSubschema=void 0;const n=requireCodegen(),r=requireUtil$2();function g(S,{keyword:E,schemaProp:C,schema:T,schemaPath:R,errSchemaPath:A,topSchemaRef:I}){if(E!==void 0&&T!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(E!==void 0){const B=S.schema[E];return C===void 0?{schema:B,schemaPath:(0,n._)`${S.schemaPath}${(0,n.getProperty)(E)}`,errSchemaPath:`${S.errSchemaPath}/${E}`}:{schema:B[C],schemaPath:(0,n._)`${S.schemaPath}${(0,n.getProperty)(E)}${(0,n.getProperty)(C)}`,errSchemaPath:`${S.errSchemaPath}/${E}/${(0,r.escapeFragment)(C)}`}}if(T!==void 0){if(R===void 0||A===void 0||I===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:T,schemaPath:R,topSchemaRef:I,errSchemaPath:A}}throw new Error('either "keyword" or "schema" must be passed')}subschema.getSubschema=g;function _(S,E,{dataProp:C,dataPropType:T,data:R,dataTypes:A,propertyName:I}){if(R!==void 0&&C!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:B}=E;if(C!==void 0){const{errorPath:N,dataPathArr:M,opts:O}=E,L=B.let("data",(0,n._)`${E.data}${(0,n.getProperty)(C)}`,!0);D(L),S.errorPath=(0,n.str)`${N}${(0,r.getErrorPath)(C,T,O.jsPropertySyntax)}`,S.parentDataProperty=(0,n._)`${C}`,S.dataPathArr=[...M,S.parentDataProperty]}if(R!==void 0){const N=R instanceof n.Name?R:B.let("data",R,!0);D(N),I!==void 0&&(S.propertyName=I)}A&&(S.dataTypes=A);function D(N){S.data=N,S.dataLevel=E.dataLevel+1,S.dataTypes=[],E.definedProperties=new Set,S.parentData=E.data,S.dataNames=[...E.dataNames,N]}}subschema.extendSubschemaData=_;function x(S,{jtdDiscriminator:E,jtdMetadata:C,compositeRule:T,createErrors:R,allErrors:A}){T!==void 0&&(S.compositeRule=T),R!==void 0&&(S.createErrors=R),A!==void 0&&(S.allErrors=A),S.jtdDiscriminator=E,S.jtdMetadata=C}return subschema.extendSubschemaMode=x,subschema}var resolve$7={},fastDeepEqual,hasRequiredFastDeepEqual;function requireFastDeepEqual(){return hasRequiredFastDeepEqual||(hasRequiredFastDeepEqual=1,fastDeepEqual=function n(r,g){if(r===g)return!0;if(r&&g&&typeof r=="object"&&typeof g=="object"){if(r.constructor!==g.constructor)return!1;var _,x,S;if(Array.isArray(r)){if(_=r.length,_!=g.length)return!1;for(x=_;x--!==0;)if(!n(r[x],g[x]))return!1;return!0}if(r.constructor===RegExp)return r.source===g.source&&r.flags===g.flags;if(r.valueOf!==Object.prototype.valueOf)return r.valueOf()===g.valueOf();if(r.toString!==Object.prototype.toString)return r.toString()===g.toString();if(S=Object.keys(r),_=S.length,_!==Object.keys(g).length)return!1;for(x=_;x--!==0;)if(!Object.prototype.hasOwnProperty.call(g,S[x]))return!1;for(x=_;x--!==0;){var E=S[x];if(!n(r[E],g[E]))return!1}return!0}return r!==r&&g!==g}),fastDeepEqual}var jsonSchemaTraverse={exports:{}},hasRequiredJsonSchemaTraverse;function requireJsonSchemaTraverse(){if(hasRequiredJsonSchemaTraverse)return jsonSchemaTraverse.exports;hasRequiredJsonSchemaTraverse=1;var n=jsonSchemaTraverse.exports=function(_,x,S){typeof x=="function"&&(S=x,x={}),S=x.cb||S;var E=typeof S=="function"?S:S.pre||function(){},C=S.post||function(){};r(x,E,C,_,"",_)};n.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},n.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},n.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},n.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function r(_,x,S,E,C,T,R,A,I,B){if(E&&typeof E=="object"&&!Array.isArray(E)){x(E,C,T,R,A,I,B);for(var D in E){var N=E[D];if(Array.isArray(N)){if(D in n.arrayKeywords)for(var M=0;M<N.length;M++)r(_,x,S,N[M],C+"/"+D+"/"+M,T,C,D,E,M)}else if(D in n.propsKeywords){if(N&&typeof N=="object")for(var O in N)r(_,x,S,N[O],C+"/"+D+"/"+g(O),T,C,D,E,O)}else(D in n.keywords||_.allKeys&&!(D in n.skipKeywords))&&r(_,x,S,N,C+"/"+D,T,C,D,E)}S(E,C,T,R,A,I,B)}}function g(_){return _.replace(/~/g,"~0").replace(/\//g,"~1")}return jsonSchemaTraverse.exports}var hasRequiredResolve;function requireResolve(){if(hasRequiredResolve)return resolve$7;hasRequiredResolve=1,Object.defineProperty(resolve$7,"__esModule",{value:!0}),resolve$7.getSchemaRefs=resolve$7.resolveUrl=resolve$7.normalizeId=resolve$7._getFullPath=resolve$7.getFullPath=resolve$7.inlineRef=void 0;const n=requireUtil$2(),r=requireFastDeepEqual(),g=requireJsonSchemaTraverse(),_=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function x(M,O=!0){return typeof M=="boolean"?!0:O===!0?!E(M):O?C(M)<=O:!1}resolve$7.inlineRef=x;const S=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function E(M){for(const O in M){if(S.has(O))return!0;const L=M[O];if(Array.isArray(L)&&L.some(E)||typeof L=="object"&&E(L))return!0}return!1}function C(M){let O=0;for(const L in M){if(L==="$ref")return 1/0;if(O++,!_.has(L)&&(typeof M[L]=="object"&&(0,n.eachItem)(M[L],F=>O+=C(F)),O===1/0))return 1/0}return O}function T(M,O="",L){L!==!1&&(O=I(O));const F=M.parse(O);return R(M,F)}resolve$7.getFullPath=T;function R(M,O){return M.serialize(O).split("#")[0]+"#"}resolve$7._getFullPath=R;const A=/#\/?$/;function I(M){return M?M.replace(A,""):""}resolve$7.normalizeId=I;function B(M,O,L){return L=I(L),M.resolve(O,L)}resolve$7.resolveUrl=B;const D=/^[a-z_][-a-z0-9._]*$/i;function N(M,O){if(typeof M=="boolean")return{};const{schemaId:L,uriResolver:F}=this.opts,U=I(M[L]||O),j={"":U},z=T(F,U,!1),W={},X=new Set;return g(M,{allKeys:!0},(xe,we,G,J)=>{if(J===void 0)return;const q=z+we;let H=j[J];typeof xe[L]=="string"&&(H=ve.call(this,xe[L])),Z.call(this,xe.$anchor),Z.call(this,xe.$dynamicAnchor),j[we]=H;function ve(ce){const ue=this.opts.uriResolver.resolve;if(ce=I(H?ue(H,ce):ce),X.has(ce))throw fe(ce);X.add(ce);let se=this.refs[ce];return typeof se=="string"&&(se=this.refs[se]),typeof se=="object"?ie(xe,se.schema,ce):ce!==I(q)&&(ce[0]==="#"?(ie(xe,W[ce],ce),W[ce]=xe):this.refs[ce]=q),ce}function Z(ce){if(typeof ce=="string"){if(!D.test(ce))throw new Error(`invalid anchor "${ce}"`);ve.call(this,`#${ce}`)}}}),W;function ie(xe,we,G){if(we!==void 0&&!r(xe,we))throw fe(G)}function fe(xe){return new Error(`reference "${xe}" resolves to more than one schema`)}}return resolve$7.getSchemaRefs=N,resolve$7}var hasRequiredValidate;function requireValidate(){if(hasRequiredValidate)return validate$2;hasRequiredValidate=1,Object.defineProperty(validate$2,"__esModule",{value:!0}),validate$2.getData=validate$2.KeywordCxt=validate$2.validateFunctionCode=void 0;const n=requireBoolSchema(),r=requireDataType(),g=requireApplicability(),_=requireDataType(),x=requireDefaults(),S=requireKeyword(),E=requireSubschema(),C=requireCodegen(),T=requireNames(),R=requireResolve(),A=requireUtil$2(),I=requireErrors();function B(Be){if(z(Be)&&(X(Be),j(Be))){O(Be);return}D(Be,()=>(0,n.topBoolOrEmptySchema)(Be))}validate$2.validateFunctionCode=B;function D({gen:Be,validateName:Se,schema:$e,schemaEnv:_e,opts:Oe},Ke){Oe.code.es5?Be.func(Se,(0,C._)`${T.default.data}, ${T.default.valCxt}`,_e.$async,()=>{Be.code((0,C._)`"use strict"; ${F($e,Oe)}`),M(Be,Oe),Be.code(Ke)}):Be.func(Se,(0,C._)`${T.default.data}, ${N(Oe)}`,_e.$async,()=>Be.code(F($e,Oe)).code(Ke))}function N(Be){return(0,C._)`{${T.default.instancePath}="", ${T.default.parentData}, ${T.default.parentDataProperty}, ${T.default.rootData}=${T.default.data}${Be.dynamicRef?(0,C._)`, ${T.default.dynamicAnchors}={}`:C.nil}}={}`}function M(Be,Se){Be.if(T.default.valCxt,()=>{Be.var(T.default.instancePath,(0,C._)`${T.default.valCxt}.${T.default.instancePath}`),Be.var(T.default.parentData,(0,C._)`${T.default.valCxt}.${T.default.parentData}`),Be.var(T.default.parentDataProperty,(0,C._)`${T.default.valCxt}.${T.default.parentDataProperty}`),Be.var(T.default.rootData,(0,C._)`${T.default.valCxt}.${T.default.rootData}`),Se.dynamicRef&&Be.var(T.default.dynamicAnchors,(0,C._)`${T.default.valCxt}.${T.default.dynamicAnchors}`)},()=>{Be.var(T.default.instancePath,(0,C._)`""`),Be.var(T.default.parentData,(0,C._)`undefined`),Be.var(T.default.parentDataProperty,(0,C._)`undefined`),Be.var(T.default.rootData,T.default.data),Se.dynamicRef&&Be.var(T.default.dynamicAnchors,(0,C._)`{}`)})}function O(Be){const{schema:Se,opts:$e,gen:_e}=Be;D(Be,()=>{$e.$comment&&Se.$comment&&J(Be),xe(Be),_e.let(T.default.vErrors,null),_e.let(T.default.errors,0),$e.unevaluated&&L(Be),ie(Be),q(Be)})}function L(Be){const{gen:Se,validateName:$e}=Be;Be.evaluated=Se.const("evaluated",(0,C._)`${$e}.evaluated`),Se.if((0,C._)`${Be.evaluated}.dynamicProps`,()=>Se.assign((0,C._)`${Be.evaluated}.props`,(0,C._)`undefined`)),Se.if((0,C._)`${Be.evaluated}.dynamicItems`,()=>Se.assign((0,C._)`${Be.evaluated}.items`,(0,C._)`undefined`))}function F(Be,Se){const $e=typeof Be=="object"&&Be[Se.schemaId];return $e&&(Se.code.source||Se.code.process)?(0,C._)`/*# sourceURL=${$e} */`:C.nil}function U(Be,Se){if(z(Be)&&(X(Be),j(Be))){W(Be,Se);return}(0,n.boolOrEmptySchema)(Be,Se)}function j({schema:Be,self:Se}){if(typeof Be=="boolean")return!Be;for(const $e in Be)if(Se.RULES.all[$e])return!0;return!1}function z(Be){return typeof Be.schema!="boolean"}function W(Be,Se){const{schema:$e,gen:_e,opts:Oe}=Be;Oe.$comment&&$e.$comment&&J(Be),we(Be),G(Be);const Ke=_e.const("_errs",T.default.errors);ie(Be,Ke),_e.var(Se,(0,C._)`${Ke} === ${T.default.errors}`)}function X(Be){(0,A.checkUnknownRules)(Be),fe(Be)}function ie(Be,Se){if(Be.opts.jtd)return ve(Be,[],!1,Se);const $e=(0,r.getSchemaTypes)(Be.schema),_e=(0,r.coerceAndCheckDataType)(Be,$e);ve(Be,$e,!_e,Se)}function fe(Be){const{schema:Se,errSchemaPath:$e,opts:_e,self:Oe}=Be;Se.$ref&&_e.ignoreKeywordsWithRef&&(0,A.schemaHasRulesButRef)(Se,Oe.RULES)&&Oe.logger.warn(`$ref: keywords ignored in schema at path "${$e}"`)}function xe(Be){const{schema:Se,opts:$e}=Be;Se.default!==void 0&&$e.useDefaults&&$e.strictSchema&&(0,A.checkStrictMode)(Be,"default is ignored in the schema root")}function we(Be){const Se=Be.schema[Be.opts.schemaId];Se&&(Be.baseId=(0,R.resolveUrl)(Be.opts.uriResolver,Be.baseId,Se))}function G(Be){if(Be.schema.$async&&!Be.schemaEnv.$async)throw new Error("async schema in sync schema")}function J({gen:Be,schemaEnv:Se,schema:$e,errSchemaPath:_e,opts:Oe}){const Ke=$e.$comment;if(Oe.$comment===!0)Be.code((0,C._)`${T.default.self}.logger.log(${Ke})`);else if(typeof Oe.$comment=="function"){const Me=(0,C.str)`${_e}/$comment`,Le=Be.scopeValue("root",{ref:Se.root});Be.code((0,C._)`${T.default.self}.opts.$comment(${Ke}, ${Me}, ${Le}.schema)`)}}function q(Be){const{gen:Se,schemaEnv:$e,validateName:_e,ValidationError:Oe,opts:Ke}=Be;$e.$async?Se.if((0,C._)`${T.default.errors} === 0`,()=>Se.return(T.default.data),()=>Se.throw((0,C._)`new ${Oe}(${T.default.vErrors})`)):(Se.assign((0,C._)`${_e}.errors`,T.default.vErrors),Ke.unevaluated&&H(Be),Se.return((0,C._)`${T.default.errors} === 0`))}function H({gen:Be,evaluated:Se,props:$e,items:_e}){$e instanceof C.Name&&Be.assign((0,C._)`${Se}.props`,$e),_e instanceof C.Name&&Be.assign((0,C._)`${Se}.items`,_e)}function ve(Be,Se,$e,_e){const{gen:Oe,schema:Ke,data:Me,allErrors:Le,opts:ze,self:Je}=Be,{RULES:Qe}=Je;if(Ke.$ref&&(ze.ignoreKeywordsWithRef||!(0,A.schemaHasRulesButRef)(Ke,Qe))){Oe.block(()=>Ce(Be,"$ref",Qe.all.$ref.definition));return}ze.jtd||ce(Be,Se),Oe.block(()=>{for(const wt of Qe.rules)rt(wt);rt(Qe.post)});function rt(wt){(0,g.shouldUseGroup)(Ke,wt)&&(wt.type?(Oe.if((0,_.checkDataType)(wt.type,Me,ze.strictNumbers)),Z(Be,wt),Se.length===1&&Se[0]===wt.type&&$e&&(Oe.else(),(0,_.reportTypeError)(Be)),Oe.endIf()):Z(Be,wt),Le||Oe.if((0,C._)`${T.default.errors} === ${_e||0}`))}}function Z(Be,Se){const{gen:$e,schema:_e,opts:{useDefaults:Oe}}=Be;Oe&&(0,x.assignDefaults)(Be,Se.type),$e.block(()=>{for(const Ke of Se.rules)(0,g.shouldUseRule)(_e,Ke)&&Ce(Be,Ke.keyword,Ke.definition,Se.type)})}function ce(Be,Se){Be.schemaEnv.meta||!Be.opts.strictTypes||(ue(Be,Se),Be.opts.allowUnionTypes||se(Be,Se),te(Be,Be.dataTypes))}function ue(Be,Se){if(Se.length){if(!Be.dataTypes.length){Be.dataTypes=Se;return}Se.forEach($e=>{be(Be.dataTypes,$e)||Ie(Be,`type "${$e}" not allowed by context "${Be.dataTypes.join(",")}"`)}),ye(Be,Se)}}function se(Be,Se){Se.length>1&&!(Se.length===2&&Se.includes("null"))&&Ie(Be,"use allowUnionTypes to allow union type keyword")}function te(Be,Se){const $e=Be.self.RULES.all;for(const _e in $e){const Oe=$e[_e];if(typeof Oe=="object"&&(0,g.shouldUseRule)(Be.schema,Oe)){const{type:Ke}=Oe.definition;Ke.length&&!Ke.some(Me=>Y(Se,Me))&&Ie(Be,`missing type "${Ke.join(",")}" for keyword "${_e}"`)}}}function Y(Be,Se){return Be.includes(Se)||Se==="number"&&Be.includes("integer")}function be(Be,Se){return Be.includes(Se)||Se==="integer"&&Be.includes("number")}function ye(Be,Se){const $e=[];for(const _e of Be.dataTypes)be(Se,_e)?$e.push(_e):Se.includes("integer")&&_e==="number"&&$e.push("integer");Be.dataTypes=$e}function Ie(Be,Se){const $e=Be.schemaEnv.baseId+Be.errSchemaPath;Se+=` at "${$e}" (strictTypes)`,(0,A.checkStrictMode)(Be,Se,Be.opts.strictTypes)}class ke{constructor(Se,$e,_e){if((0,S.validateKeywordUsage)(Se,$e,_e),this.gen=Se.gen,this.allErrors=Se.allErrors,this.keyword=_e,this.data=Se.data,this.schema=Se.schema[_e],this.$data=$e.$data&&Se.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,A.schemaRefOrVal)(Se,this.schema,_e,this.$data),this.schemaType=$e.schemaType,this.parentSchema=Se.schema,this.params={},this.it=Se,this.def=$e,this.$data)this.schemaCode=Se.gen.const("vSchema",We(this.$data,Se));else if(this.schemaCode=this.schemaValue,!(0,S.validSchemaType)(this.schema,$e.schemaType,$e.allowUndefined))throw new Error(`${_e} value must be ${JSON.stringify($e.schemaType)}`);("code"in $e?$e.trackErrors:$e.errors!==!1)&&(this.errsCount=Se.gen.const("_errs",T.default.errors))}result(Se,$e,_e){this.failResult((0,C.not)(Se),$e,_e)}failResult(Se,$e,_e){this.gen.if(Se),_e?_e():this.error(),$e?(this.gen.else(),$e(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(Se,$e){this.failResult((0,C.not)(Se),void 0,$e)}fail(Se){if(Se===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(Se),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(Se){if(!this.$data)return this.fail(Se);const{schemaCode:$e}=this;this.fail((0,C._)`${$e} !== undefined && (${(0,C.or)(this.invalid$data(),Se)})`)}error(Se,$e,_e){if($e){this.setParams($e),this._error(Se,_e),this.setParams({});return}this._error(Se,_e)}_error(Se,$e){(Se?I.reportExtraError:I.reportError)(this,this.def.error,$e)}$dataError(){(0,I.reportError)(this,this.def.$dataError||I.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,I.resetErrorsCount)(this.gen,this.errsCount)}ok(Se){this.allErrors||this.gen.if(Se)}setParams(Se,$e){$e?Object.assign(this.params,Se):this.params=Se}block$data(Se,$e,_e=C.nil){this.gen.block(()=>{this.check$data(Se,_e),$e()})}check$data(Se=C.nil,$e=C.nil){if(!this.$data)return;const{gen:_e,schemaCode:Oe,schemaType:Ke,def:Me}=this;_e.if((0,C.or)((0,C._)`${Oe} === undefined`,$e)),Se!==C.nil&&_e.assign(Se,!0),(Ke.length||Me.validateSchema)&&(_e.elseIf(this.invalid$data()),this.$dataError(),Se!==C.nil&&_e.assign(Se,!1)),_e.else()}invalid$data(){const{gen:Se,schemaCode:$e,schemaType:_e,def:Oe,it:Ke}=this;return(0,C.or)(Me(),Le());function Me(){if(_e.length){if(!($e instanceof C.Name))throw new Error("ajv implementation error");const ze=Array.isArray(_e)?_e:[_e];return(0,C._)`${(0,_.checkDataTypes)(ze,$e,Ke.opts.strictNumbers,_.DataType.Wrong)}`}return C.nil}function Le(){if(Oe.validateSchema){const ze=Se.scopeValue("validate$data",{ref:Oe.validateSchema});return(0,C._)`!${ze}(${$e})`}return C.nil}}subschema(Se,$e){const _e=(0,E.getSubschema)(this.it,Se);(0,E.extendSubschemaData)(_e,this.it,Se),(0,E.extendSubschemaMode)(_e,Se);const Oe={...this.it,..._e,items:void 0,props:void 0};return U(Oe,$e),Oe}mergeEvaluated(Se,$e){const{it:_e,gen:Oe}=this;_e.opts.unevaluated&&(_e.props!==!0&&Se.props!==void 0&&(_e.props=A.mergeEvaluated.props(Oe,Se.props,_e.props,$e)),_e.items!==!0&&Se.items!==void 0&&(_e.items=A.mergeEvaluated.items(Oe,Se.items,_e.items,$e)))}mergeValidEvaluated(Se,$e){const{it:_e,gen:Oe}=this;if(_e.opts.unevaluated&&(_e.props!==!0||_e.items!==!0))return Oe.if($e,()=>this.mergeEvaluated(Se,C.Name)),!0}}validate$2.KeywordCxt=ke;function Ce(Be,Se,$e,_e){const Oe=new ke(Be,$e,Se);"code"in $e?$e.code(Oe,_e):Oe.$data&&$e.validate?(0,S.funcKeywordCode)(Oe,$e):"macro"in $e?(0,S.macroKeywordCode)(Oe,$e):($e.compile||$e.validate)&&(0,S.funcKeywordCode)(Oe,$e)}const Ae=/^\/(?:[^~]|~0|~1)*$/,Ne=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function We(Be,{dataLevel:Se,dataNames:$e,dataPathArr:_e}){let Oe,Ke;if(Be==="")return T.default.rootData;if(Be[0]==="/"){if(!Ae.test(Be))throw new Error(`Invalid JSON-pointer: ${Be}`);Oe=Be,Ke=T.default.rootData}else{const Je=Ne.exec(Be);if(!Je)throw new Error(`Invalid JSON-pointer: ${Be}`);const Qe=+Je[1];if(Oe=Je[2],Oe==="#"){if(Qe>=Se)throw new Error(ze("property/index",Qe));return _e[Se-Qe]}if(Qe>Se)throw new Error(ze("data",Qe));if(Ke=$e[Se-Qe],!Oe)return Ke}let Me=Ke;const Le=Oe.split("/");for(const Je of Le)Je&&(Ke=(0,C._)`${Ke}${(0,C.getProperty)((0,A.unescapeJsonPointer)(Je))}`,Me=(0,C._)`${Me} && ${Ke}`);return Me;function ze(Je,Qe){return`Cannot access ${Je} ${Qe} levels up, current level is ${Se}`}}return validate$2.getData=We,validate$2}var validation_error={},hasRequiredValidation_error;function requireValidation_error(){if(hasRequiredValidation_error)return validation_error;hasRequiredValidation_error=1,Object.defineProperty(validation_error,"__esModule",{value:!0});class n extends Error{constructor(g){super("validation failed"),this.errors=g,this.ajv=this.validation=!0}}return validation_error.default=n,validation_error}var ref_error={},hasRequiredRef_error;function requireRef_error(){if(hasRequiredRef_error)return ref_error;hasRequiredRef_error=1,Object.defineProperty(ref_error,"__esModule",{value:!0});const n=requireResolve();class r extends Error{constructor(_,x,S,E){super(E||`can't resolve reference ${S} from id ${x}`),this.missingRef=(0,n.resolveUrl)(_,x,S),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(_,this.missingRef))}}return ref_error.default=r,ref_error}var compile={},hasRequiredCompile;function requireCompile(){if(hasRequiredCompile)return compile;hasRequiredCompile=1,Object.defineProperty(compile,"__esModule",{value:!0}),compile.resolveSchema=compile.getCompilingSchema=compile.resolveRef=compile.compileSchema=compile.SchemaEnv=void 0;const n=requireCodegen(),r=requireValidation_error(),g=requireNames(),_=requireResolve(),x=requireUtil$2(),S=requireValidate();class E{constructor(L){var F;this.refs={},this.dynamicAnchors={};let U;typeof L.schema=="object"&&(U=L.schema),this.schema=L.schema,this.schemaId=L.schemaId,this.root=L.root||this,this.baseId=(F=L.baseId)!==null&&F!==void 0?F:(0,_.normalizeId)(U?.[L.schemaId||"$id"]),this.schemaPath=L.schemaPath,this.localRefs=L.localRefs,this.meta=L.meta,this.$async=U?.$async,this.refs={}}}compile.SchemaEnv=E;function C(O){const L=A.call(this,O);if(L)return L;const F=(0,_.getFullPath)(this.opts.uriResolver,O.root.baseId),{es5:U,lines:j}=this.opts.code,{ownProperties:z}=this.opts,W=new n.CodeGen(this.scope,{es5:U,lines:j,ownProperties:z});let X;O.$async&&(X=W.scopeValue("Error",{ref:r.default,code:(0,n._)`require("ajv/dist/runtime/validation_error").default`}));const ie=W.scopeName("validate");O.validateName=ie;const fe={gen:W,allErrors:this.opts.allErrors,data:g.default.data,parentData:g.default.parentData,parentDataProperty:g.default.parentDataProperty,dataNames:[g.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:W.scopeValue("schema",this.opts.code.source===!0?{ref:O.schema,code:(0,n.stringify)(O.schema)}:{ref:O.schema}),validateName:ie,ValidationError:X,schema:O.schema,schemaEnv:O,rootId:F,baseId:O.baseId||F,schemaPath:n.nil,errSchemaPath:O.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,n._)`""`,opts:this.opts,self:this};let xe;try{this._compilations.add(O),(0,S.validateFunctionCode)(fe),W.optimize(this.opts.code.optimize);const we=W.toString();xe=`${W.scopeRefs(g.default.scope)}return ${we}`,this.opts.code.process&&(xe=this.opts.code.process(xe,O));const J=new Function(`${g.default.self}`,`${g.default.scope}`,xe)(this,this.scope.get());if(this.scope.value(ie,{ref:J}),J.errors=null,J.schema=O.schema,J.schemaEnv=O,O.$async&&(J.$async=!0),this.opts.code.source===!0&&(J.source={validateName:ie,validateCode:we,scopeValues:W._values}),this.opts.unevaluated){const{props:q,items:H}=fe;J.evaluated={props:q instanceof n.Name?void 0:q,items:H instanceof n.Name?void 0:H,dynamicProps:q instanceof n.Name,dynamicItems:H instanceof n.Name},J.source&&(J.source.evaluated=(0,n.stringify)(J.evaluated))}return O.validate=J,O}catch(we){throw delete O.validate,delete O.validateName,xe&&this.logger.error("Error compiling schema, function code:",xe),we}finally{this._compilations.delete(O)}}compile.compileSchema=C;function T(O,L,F){var U;F=(0,_.resolveUrl)(this.opts.uriResolver,L,F);const j=O.refs[F];if(j)return j;let z=B.call(this,O,F);if(z===void 0){const W=(U=O.localRefs)===null||U===void 0?void 0:U[F],{schemaId:X}=this.opts;W&&(z=new E({schema:W,schemaId:X,root:O,baseId:L}))}if(z!==void 0)return O.refs[F]=R.call(this,z)}compile.resolveRef=T;function R(O){return(0,_.inlineRef)(O.schema,this.opts.inlineRefs)?O.schema:O.validate?O:C.call(this,O)}function A(O){for(const L of this._compilations)if(I(L,O))return L}compile.getCompilingSchema=A;function I(O,L){return O.schema===L.schema&&O.root===L.root&&O.baseId===L.baseId}function B(O,L){let F;for(;typeof(F=this.refs[L])=="string";)L=F;return F||this.schemas[L]||D.call(this,O,L)}function D(O,L){const F=this.opts.uriResolver.parse(L),U=(0,_._getFullPath)(this.opts.uriResolver,F);let j=(0,_.getFullPath)(this.opts.uriResolver,O.baseId,void 0);if(Object.keys(O.schema).length>0&&U===j)return M.call(this,F,O);const z=(0,_.normalizeId)(U),W=this.refs[z]||this.schemas[z];if(typeof W=="string"){const X=D.call(this,O,W);return typeof X?.schema!="object"?void 0:M.call(this,F,X)}if(typeof W?.schema=="object"){if(W.validate||C.call(this,W),z===(0,_.normalizeId)(L)){const{schema:X}=W,{schemaId:ie}=this.opts,fe=X[ie];return fe&&(j=(0,_.resolveUrl)(this.opts.uriResolver,j,fe)),new E({schema:X,schemaId:ie,root:O,baseId:j})}return M.call(this,F,W)}}compile.resolveSchema=D;const N=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function M(O,{baseId:L,schema:F,root:U}){var j;if(((j=O.fragment)===null||j===void 0?void 0:j[0])!=="/")return;for(const X of O.fragment.slice(1).split("/")){if(typeof F=="boolean")return;const ie=F[(0,x.unescapeFragment)(X)];if(ie===void 0)return;F=ie;const fe=typeof F=="object"&&F[this.opts.schemaId];!N.has(X)&&fe&&(L=(0,_.resolveUrl)(this.opts.uriResolver,L,fe))}let z;if(typeof F!="boolean"&&F.$ref&&!(0,x.schemaHasRulesButRef)(F,this.RULES)){const X=(0,_.resolveUrl)(this.opts.uriResolver,L,F.$ref);z=D.call(this,U,X)}const{schemaId:W}=this.opts;if(z=z||new E({schema:F,schemaId:W,root:U,baseId:L}),z.schema!==z.root.schema)return z}return compile}const $id$1="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description$1="Meta-schema for $data reference (JSON AnySchema extension proposal)",type$3="object",required$1=["$data"],properties$2={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties$1=!1,require$$9={$id:$id$1,description:description$1,type:type$3,required:required$1,properties:properties$2,additionalProperties:additionalProperties$1};var uri$1={},fastUri={exports:{}},scopedChars,hasRequiredScopedChars;function requireScopedChars(){return hasRequiredScopedChars||(hasRequiredScopedChars=1,scopedChars={HEX:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15}}),scopedChars}var utils$8,hasRequiredUtils$5;function requireUtils$5(){if(hasRequiredUtils$5)return utils$8;hasRequiredUtils$5=1;const{HEX:n}=requireScopedChars();function r(N){if(E(N,".")<3)return{host:N,isIPV4:!1};const M=N.match(/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/u)||[],[O]=M;return O?{host:S(O,"."),isIPV4:!0}:{host:N,isIPV4:!1}}function g(N,M=!1){let O="",L=!0;for(const F of N){if(n[F]===void 0)return;F!=="0"&&L===!0&&(L=!1),L||(O+=F)}return M&&O.length===0&&(O="0"),O}function _(N){let M=0;const O={error:!1,address:"",zone:""},L=[],F=[];let U=!1,j=!1,z=!1;function W(){if(F.length){if(U===!1){const X=g(F);if(X!==void 0)L.push(X);else return O.error=!0,!1}F.length=0}return!0}for(let X=0;X<N.length;X++){const ie=N[X];if(!(ie==="["||ie==="]"))if(ie===":"){if(j===!0&&(z=!0),!W())break;if(M++,L.push(":"),M>7){O.error=!0;break}X-1>=0&&N[X-1]===":"&&(j=!0);continue}else if(ie==="%"){if(!W())break;U=!0}else{F.push(ie);continue}}return F.length&&(U?O.zone=F.join(""):z?L.push(F.join("")):L.push(g(F))),O.address=L.join(""),O}function x(N,M={}){if(E(N,":")<2)return{host:N,isIPV6:!1};const O=_(N);if(O.error)return{host:N,isIPV6:!1};{let L=O.address,F=O.address;return O.zone&&(L+="%"+O.zone,F+="%25"+O.zone),{host:L,escapedHost:F,isIPV6:!0}}}function S(N,M){let O="",L=!0;const F=N.length;for(let U=0;U<F;U++){const j=N[U];j==="0"&&L?(U+1<=F&&N[U+1]===M||U+1===F)&&(O+=j,L=!1):(j===M?L=!0:L=!1,O+=j)}return O}function E(N,M){let O=0;for(let L=0;L<N.length;L++)N[L]===M&&O++;return O}const C=/^\.\.?\//u,T=/^\/\.(?:\/|$)/u,R=/^\/\.\.(?:\/|$)/u,A=/^\/?(?:.|\n)*?(?=\/|$)/u;function I(N){const M=[];for(;N.length;)if(N.match(C))N=N.replace(C,"");else if(N.match(T))N=N.replace(T,"/");else if(N.match(R))N=N.replace(R,"/"),M.pop();else if(N==="."||N==="..")N="";else{const O=N.match(A);if(O){const L=O[0];N=N.slice(L.length),M.push(L)}else throw new Error("Unexpected dot segment condition")}return M.join("")}function B(N,M){const O=M!==!0?escape:unescape;return N.scheme!==void 0&&(N.scheme=O(N.scheme)),N.userinfo!==void 0&&(N.userinfo=O(N.userinfo)),N.host!==void 0&&(N.host=O(N.host)),N.path!==void 0&&(N.path=O(N.path)),N.query!==void 0&&(N.query=O(N.query)),N.fragment!==void 0&&(N.fragment=O(N.fragment)),N}function D(N,M){const O=[];if(N.userinfo!==void 0&&(O.push(N.userinfo),O.push("@")),N.host!==void 0){let L=unescape(N.host);const F=r(L);if(F.isIPV4)L=F.host;else{const U=x(F.host,{isIPV4:!1});U.isIPV6===!0?L=`[${U.escapedHost}]`:L=N.host}O.push(L)}return(typeof N.port=="number"||typeof N.port=="string")&&(O.push(":"),O.push(String(N.port))),O.length?O.join(""):void 0}return utils$8={recomposeAuthority:D,normalizeComponentEncoding:B,removeDotSegments:I,normalizeIPv4:r,normalizeIPv6:x,stringArrayToHexStripped:g},utils$8}var schemes,hasRequiredSchemes;function requireSchemes(){if(hasRequiredSchemes)return schemes;hasRequiredSchemes=1;const n=/^[\da-f]{8}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{4}\b-[\da-f]{12}$/iu,r=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function g(F){return typeof F.secure=="boolean"?F.secure:String(F.scheme).toLowerCase()==="wss"}function _(F){return F.host||(F.error=F.error||"HTTP URIs must have a host."),F}function x(F){const U=String(F.scheme).toLowerCase()==="https";return(F.port===(U?443:80)||F.port==="")&&(F.port=void 0),F.path||(F.path="/"),F}function S(F){return F.secure=g(F),F.resourceName=(F.path||"/")+(F.query?"?"+F.query:""),F.path=void 0,F.query=void 0,F}function E(F){if((F.port===(g(F)?443:80)||F.port==="")&&(F.port=void 0),typeof F.secure=="boolean"&&(F.scheme=F.secure?"wss":"ws",F.secure=void 0),F.resourceName){const[U,j]=F.resourceName.split("?");F.path=U&&U!=="/"?U:void 0,F.query=j,F.resourceName=void 0}return F.fragment=void 0,F}function C(F,U){if(!F.path)return F.error="URN can not be parsed",F;const j=F.path.match(r);if(j){const z=U.scheme||F.scheme||"urn";F.nid=j[1].toLowerCase(),F.nss=j[2];const W=`${z}:${U.nid||F.nid}`,X=L[W];F.path=void 0,X&&(F=X.parse(F,U))}else F.error=F.error||"URN can not be parsed.";return F}function T(F,U){const j=U.scheme||F.scheme||"urn",z=F.nid.toLowerCase(),W=`${j}:${U.nid||z}`,X=L[W];X&&(F=X.serialize(F,U));const ie=F,fe=F.nss;return ie.path=`${z||U.nid}:${fe}`,U.skipEscape=!0,ie}function R(F,U){const j=F;return j.uuid=j.nss,j.nss=void 0,!U.tolerant&&(!j.uuid||!n.test(j.uuid))&&(j.error=j.error||"UUID is not valid."),j}function A(F){const U=F;return U.nss=(F.uuid||"").toLowerCase(),U}const I={scheme:"http",domainHost:!0,parse:_,serialize:x},B={scheme:"https",domainHost:I.domainHost,parse:_,serialize:x},D={scheme:"ws",domainHost:!0,parse:S,serialize:E},N={scheme:"wss",domainHost:D.domainHost,parse:D.parse,serialize:D.serialize},L={http:I,https:B,ws:D,wss:N,urn:{scheme:"urn",parse:C,serialize:T,skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:R,serialize:A,skipNormalize:!0}};return schemes=L,schemes}var hasRequiredFastUri;function requireFastUri(){if(hasRequiredFastUri)return fastUri.exports;hasRequiredFastUri=1;const{normalizeIPv6:n,normalizeIPv4:r,removeDotSegments:g,recomposeAuthority:_,normalizeComponentEncoding:x}=requireUtils$5(),S=requireSchemes();function E(O,L){return typeof O=="string"?O=A(N(O,L),L):typeof O=="object"&&(O=N(A(O,L),L)),O}function C(O,L,F){const U=Object.assign({scheme:"null"},F),j=T(N(O,U),N(L,U),U,!0);return A(j,{...U,skipEscape:!0})}function T(O,L,F,U){const j={};return U||(O=N(A(O,F),F),L=N(A(L,F),F)),F=F||{},!F.tolerant&&L.scheme?(j.scheme=L.scheme,j.userinfo=L.userinfo,j.host=L.host,j.port=L.port,j.path=g(L.path||""),j.query=L.query):(L.userinfo!==void 0||L.host!==void 0||L.port!==void 0?(j.userinfo=L.userinfo,j.host=L.host,j.port=L.port,j.path=g(L.path||""),j.query=L.query):(L.path?(L.path.charAt(0)==="/"?j.path=g(L.path):((O.userinfo!==void 0||O.host!==void 0||O.port!==void 0)&&!O.path?j.path="/"+L.path:O.path?j.path=O.path.slice(0,O.path.lastIndexOf("/")+1)+L.path:j.path=L.path,j.path=g(j.path)),j.query=L.query):(j.path=O.path,L.query!==void 0?j.query=L.query:j.query=O.query),j.userinfo=O.userinfo,j.host=O.host,j.port=O.port),j.scheme=O.scheme),j.fragment=L.fragment,j}function R(O,L,F){return typeof O=="string"?(O=unescape(O),O=A(x(N(O,F),!0),{...F,skipEscape:!0})):typeof O=="object"&&(O=A(x(O,!0),{...F,skipEscape:!0})),typeof L=="string"?(L=unescape(L),L=A(x(N(L,F),!0),{...F,skipEscape:!0})):typeof L=="object"&&(L=A(x(L,!0),{...F,skipEscape:!0})),O.toLowerCase()===L.toLowerCase()}function A(O,L){const F={host:O.host,scheme:O.scheme,userinfo:O.userinfo,port:O.port,path:O.path,query:O.query,nid:O.nid,nss:O.nss,uuid:O.uuid,fragment:O.fragment,reference:O.reference,resourceName:O.resourceName,secure:O.secure,error:""},U=Object.assign({},L),j=[],z=S[(U.scheme||F.scheme||"").toLowerCase()];z&&z.serialize&&z.serialize(F,U),F.path!==void 0&&(U.skipEscape?F.path=unescape(F.path):(F.path=escape(F.path),F.scheme!==void 0&&(F.path=F.path.split("%3A").join(":")))),U.reference!=="suffix"&&F.scheme&&j.push(F.scheme,":");const W=_(F,U);if(W!==void 0&&(U.reference!=="suffix"&&j.push("//"),j.push(W),F.path&&F.path.charAt(0)!=="/"&&j.push("/")),F.path!==void 0){let X=F.path;!U.absolutePath&&(!z||!z.absolutePath)&&(X=g(X)),W===void 0&&(X=X.replace(/^\/\//u,"/%2F")),j.push(X)}return F.query!==void 0&&j.push("?",F.query),F.fragment!==void 0&&j.push("#",F.fragment),j.join("")}const I=Array.from({length:127},(O,L)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(L)));function B(O){let L=0;for(let F=0,U=O.length;F<U;++F)if(L=O.charCodeAt(F),L>126||I[L])return!0;return!1}const D=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function N(O,L){const F=Object.assign({},L),U={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},j=O.indexOf("%")!==-1;let z=!1;F.reference==="suffix"&&(O=(F.scheme?F.scheme+":":"")+"//"+O);const W=O.match(D);if(W){if(U.scheme=W[1],U.userinfo=W[3],U.host=W[4],U.port=parseInt(W[5],10),U.path=W[6]||"",U.query=W[7],U.fragment=W[8],isNaN(U.port)&&(U.port=W[5]),U.host){const ie=r(U.host);if(ie.isIPV4===!1){const fe=n(ie.host,{isIPV4:!1});U.host=fe.host.toLowerCase(),z=fe.isIPV6}else U.host=ie.host,z=!0}U.scheme===void 0&&U.userinfo===void 0&&U.host===void 0&&U.port===void 0&&!U.path&&U.query===void 0?U.reference="same-document":U.scheme===void 0?U.reference="relative":U.fragment===void 0?U.reference="absolute":U.reference="uri",F.reference&&F.reference!=="suffix"&&F.reference!==U.reference&&(U.error=U.error||"URI is not a "+F.reference+" reference.");const X=S[(F.scheme||U.scheme||"").toLowerCase()];if(!F.unicodeSupport&&(!X||!X.unicodeSupport)&&U.host&&(F.domainHost||X&&X.domainHost)&&z===!1&&B(U.host))try{U.host=URL.domainToASCII(U.host.toLowerCase())}catch(ie){U.error=U.error||"Host's domain name can not be converted to ASCII: "+ie}(!X||X&&!X.skipNormalize)&&(j&&U.scheme!==void 0&&(U.scheme=unescape(U.scheme)),j&&U.host!==void 0&&(U.host=unescape(U.host)),U.path!==void 0&&U.path.length&&(U.path=escape(unescape(U.path))),U.fragment!==void 0&&U.fragment.length&&(U.fragment=encodeURI(decodeURIComponent(U.fragment)))),X&&X.parse&&X.parse(U,F)}else U.error=U.error||"URI can not be parsed.";return U}const M={SCHEMES:S,normalize:E,resolve:C,resolveComponents:T,equal:R,serialize:A,parse:N};return fastUri.exports=M,fastUri.exports.default=M,fastUri.exports.fastUri=M,fastUri.exports}var hasRequiredUri$1;function requireUri$1(){if(hasRequiredUri$1)return uri$1;hasRequiredUri$1=1,Object.defineProperty(uri$1,"__esModule",{value:!0});const n=requireFastUri();return n.code='require("ajv/dist/runtime/uri").default',uri$1.default=n,uri$1}var hasRequiredCore$2;function requireCore$2(){return hasRequiredCore$2||(hasRequiredCore$2=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.CodeGen=n.Name=n.nil=n.stringify=n.str=n._=n.KeywordCxt=void 0;var r=requireValidate();Object.defineProperty(n,"KeywordCxt",{enumerable:!0,get:function(){return r.KeywordCxt}});var g=requireCodegen();Object.defineProperty(n,"_",{enumerable:!0,get:function(){return g._}}),Object.defineProperty(n,"str",{enumerable:!0,get:function(){return g.str}}),Object.defineProperty(n,"stringify",{enumerable:!0,get:function(){return g.stringify}}),Object.defineProperty(n,"nil",{enumerable:!0,get:function(){return g.nil}}),Object.defineProperty(n,"Name",{enumerable:!0,get:function(){return g.Name}}),Object.defineProperty(n,"CodeGen",{enumerable:!0,get:function(){return g.CodeGen}});const _=requireValidation_error(),x=requireRef_error(),S=requireRules(),E=requireCompile(),C=requireCodegen(),T=requireResolve(),R=requireDataType(),A=requireUtil$2(),I=require$$9,B=requireUri$1(),D=(se,te)=>new RegExp(se,te);D.code="new RegExp";const N=["removeAdditional","useDefaults","coerceTypes"],M=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),O={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},L={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},F=200;function U(se){var te,Y,be,ye,Ie,ke,Ce,Ae,Ne,We,Be,Se,$e,_e,Oe,Ke,Me,Le,ze,Je,Qe,rt,wt,bt,xt;const Et=se.strict,Rt=(te=se.code)===null||te===void 0?void 0:te.optimize,$t=Rt===!0||Rt===void 0?1:Rt||0,qt=(be=(Y=se.code)===null||Y===void 0?void 0:Y.regExp)!==null&&be!==void 0?be:D,Ge=(ye=se.uriResolver)!==null&&ye!==void 0?ye:B.default;return{strictSchema:(ke=(Ie=se.strictSchema)!==null&&Ie!==void 0?Ie:Et)!==null&&ke!==void 0?ke:!0,strictNumbers:(Ae=(Ce=se.strictNumbers)!==null&&Ce!==void 0?Ce:Et)!==null&&Ae!==void 0?Ae:!0,strictTypes:(We=(Ne=se.strictTypes)!==null&&Ne!==void 0?Ne:Et)!==null&&We!==void 0?We:"log",strictTuples:(Se=(Be=se.strictTuples)!==null&&Be!==void 0?Be:Et)!==null&&Se!==void 0?Se:"log",strictRequired:(_e=($e=se.strictRequired)!==null&&$e!==void 0?$e:Et)!==null&&_e!==void 0?_e:!1,code:se.code?{...se.code,optimize:$t,regExp:qt}:{optimize:$t,regExp:qt},loopRequired:(Oe=se.loopRequired)!==null&&Oe!==void 0?Oe:F,loopEnum:(Ke=se.loopEnum)!==null&&Ke!==void 0?Ke:F,meta:(Me=se.meta)!==null&&Me!==void 0?Me:!0,messages:(Le=se.messages)!==null&&Le!==void 0?Le:!0,inlineRefs:(ze=se.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(Je=se.schemaId)!==null&&Je!==void 0?Je:"$id",addUsedSchema:(Qe=se.addUsedSchema)!==null&&Qe!==void 0?Qe:!0,validateSchema:(rt=se.validateSchema)!==null&&rt!==void 0?rt:!0,validateFormats:(wt=se.validateFormats)!==null&&wt!==void 0?wt:!0,unicodeRegExp:(bt=se.unicodeRegExp)!==null&&bt!==void 0?bt:!0,int32range:(xt=se.int32range)!==null&&xt!==void 0?xt:!0,uriResolver:Ge}}class j{constructor(te={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,te=this.opts={...te,...U(te)};const{es5:Y,lines:be}=this.opts.code;this.scope=new C.ValueScope({scope:{},prefixes:M,es5:Y,lines:be}),this.logger=G(te.logger);const ye=te.validateFormats;te.validateFormats=!1,this.RULES=(0,S.getRules)(),z.call(this,O,te,"NOT SUPPORTED"),z.call(this,L,te,"DEPRECATED","warn"),this._metaOpts=xe.call(this),te.formats&&ie.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),te.keywords&&fe.call(this,te.keywords),typeof te.meta=="object"&&this.addMetaSchema(te.meta),X.call(this),te.validateFormats=ye}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:te,meta:Y,schemaId:be}=this.opts;let ye=I;be==="id"&&(ye={...I},ye.id=ye.$id,delete ye.$id),Y&&te&&this.addMetaSchema(ye,ye[be],!1)}defaultMeta(){const{meta:te,schemaId:Y}=this.opts;return this.opts.defaultMeta=typeof te=="object"?te[Y]||te:void 0}validate(te,Y){let be;if(typeof te=="string"){if(be=this.getSchema(te),!be)throw new Error(`no schema with key or ref "${te}"`)}else be=this.compile(te);const ye=be(Y);return"$async"in be||(this.errors=be.errors),ye}compile(te,Y){const be=this._addSchema(te,Y);return be.validate||this._compileSchemaEnv(be)}compileAsync(te,Y){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:be}=this.opts;return ye.call(this,te,Y);async function ye(We,Be){await Ie.call(this,We.$schema);const Se=this._addSchema(We,Be);return Se.validate||ke.call(this,Se)}async function Ie(We){We&&!this.getSchema(We)&&await ye.call(this,{$ref:We},!0)}async function ke(We){try{return this._compileSchemaEnv(We)}catch(Be){if(!(Be instanceof x.default))throw Be;return Ce.call(this,Be),await Ae.call(this,Be.missingSchema),ke.call(this,We)}}function Ce({missingSchema:We,missingRef:Be}){if(this.refs[We])throw new Error(`AnySchema ${We} is loaded but ${Be} cannot be resolved`)}async function Ae(We){const Be=await Ne.call(this,We);this.refs[We]||await Ie.call(this,Be.$schema),this.refs[We]||this.addSchema(Be,We,Y)}async function Ne(We){const Be=this._loading[We];if(Be)return Be;try{return await(this._loading[We]=be(We))}finally{delete this._loading[We]}}}addSchema(te,Y,be,ye=this.opts.validateSchema){if(Array.isArray(te)){for(const ke of te)this.addSchema(ke,void 0,be,ye);return this}let Ie;if(typeof te=="object"){const{schemaId:ke}=this.opts;if(Ie=te[ke],Ie!==void 0&&typeof Ie!="string")throw new Error(`schema ${ke} must be string`)}return Y=(0,T.normalizeId)(Y||Ie),this._checkUnique(Y),this.schemas[Y]=this._addSchema(te,be,Y,ye,!0),this}addMetaSchema(te,Y,be=this.opts.validateSchema){return this.addSchema(te,Y,!0,be),this}validateSchema(te,Y){if(typeof te=="boolean")return!0;let be;if(be=te.$schema,be!==void 0&&typeof be!="string")throw new Error("$schema must be a string");if(be=be||this.opts.defaultMeta||this.defaultMeta(),!be)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const ye=this.validate(be,te);if(!ye&&Y){const Ie="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(Ie);else throw new Error(Ie)}return ye}getSchema(te){let Y;for(;typeof(Y=W.call(this,te))=="string";)te=Y;if(Y===void 0){const{schemaId:be}=this.opts,ye=new E.SchemaEnv({schema:{},schemaId:be});if(Y=E.resolveSchema.call(this,ye,te),!Y)return;this.refs[te]=Y}return Y.validate||this._compileSchemaEnv(Y)}removeSchema(te){if(te instanceof RegExp)return this._removeAllSchemas(this.schemas,te),this._removeAllSchemas(this.refs,te),this;switch(typeof te){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const Y=W.call(this,te);return typeof Y=="object"&&this._cache.delete(Y.schema),delete this.schemas[te],delete this.refs[te],this}case"object":{const Y=te;this._cache.delete(Y);let be=te[this.opts.schemaId];return be&&(be=(0,T.normalizeId)(be),delete this.schemas[be],delete this.refs[be]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(te){for(const Y of te)this.addKeyword(Y);return this}addKeyword(te,Y){let be;if(typeof te=="string")be=te,typeof Y=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),Y.keyword=be);else if(typeof te=="object"&&Y===void 0){if(Y=te,be=Y.keyword,Array.isArray(be)&&!be.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(q.call(this,be,Y),!Y)return(0,A.eachItem)(be,Ie=>H.call(this,Ie)),this;Z.call(this,Y);const ye={...Y,type:(0,R.getJSONTypes)(Y.type),schemaType:(0,R.getJSONTypes)(Y.schemaType)};return(0,A.eachItem)(be,ye.type.length===0?Ie=>H.call(this,Ie,ye):Ie=>ye.type.forEach(ke=>H.call(this,Ie,ye,ke))),this}getKeyword(te){const Y=this.RULES.all[te];return typeof Y=="object"?Y.definition:!!Y}removeKeyword(te){const{RULES:Y}=this;delete Y.keywords[te],delete Y.all[te];for(const be of Y.rules){const ye=be.rules.findIndex(Ie=>Ie.keyword===te);ye>=0&&be.rules.splice(ye,1)}return this}addFormat(te,Y){return typeof Y=="string"&&(Y=new RegExp(Y)),this.formats[te]=Y,this}errorsText(te=this.errors,{separator:Y=", ",dataVar:be="data"}={}){return!te||te.length===0?"No errors":te.map(ye=>`${be}${ye.instancePath} ${ye.message}`).reduce((ye,Ie)=>ye+Y+Ie)}$dataMetaSchema(te,Y){const be=this.RULES.all;te=JSON.parse(JSON.stringify(te));for(const ye of Y){const Ie=ye.split("/").slice(1);let ke=te;for(const Ce of Ie)ke=ke[Ce];for(const Ce in be){const Ae=be[Ce];if(typeof Ae!="object")continue;const{$data:Ne}=Ae.definition,We=ke[Ce];Ne&&We&&(ke[Ce]=ue(We))}}return te}_removeAllSchemas(te,Y){for(const be in te){const ye=te[be];(!Y||Y.test(be))&&(typeof ye=="string"?delete te[be]:ye&&!ye.meta&&(this._cache.delete(ye.schema),delete te[be]))}}_addSchema(te,Y,be,ye=this.opts.validateSchema,Ie=this.opts.addUsedSchema){let ke;const{schemaId:Ce}=this.opts;if(typeof te=="object")ke=te[Ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof te!="boolean")throw new Error("schema must be object or boolean")}let Ae=this._cache.get(te);if(Ae!==void 0)return Ae;be=(0,T.normalizeId)(ke||be);const Ne=T.getSchemaRefs.call(this,te,be);return Ae=new E.SchemaEnv({schema:te,schemaId:Ce,meta:Y,baseId:be,localRefs:Ne}),this._cache.set(Ae.schema,Ae),Ie&&!be.startsWith("#")&&(be&&this._checkUnique(be),this.refs[be]=Ae),ye&&this.validateSchema(te,!0),Ae}_checkUnique(te){if(this.schemas[te]||this.refs[te])throw new Error(`schema with key or id "${te}" already exists`)}_compileSchemaEnv(te){if(te.meta?this._compileMetaSchema(te):E.compileSchema.call(this,te),!te.validate)throw new Error("ajv implementation error");return te.validate}_compileMetaSchema(te){const Y=this.opts;this.opts=this._metaOpts;try{E.compileSchema.call(this,te)}finally{this.opts=Y}}}j.ValidationError=_.default,j.MissingRefError=x.default,n.default=j;function z(se,te,Y,be="error"){for(const ye in se){const Ie=ye;Ie in te&&this.logger[be](`${Y}: option ${ye}. ${se[Ie]}`)}}function W(se){return se=(0,T.normalizeId)(se),this.schemas[se]||this.refs[se]}function X(){const se=this.opts.schemas;if(se)if(Array.isArray(se))this.addSchema(se);else for(const te in se)this.addSchema(se[te],te)}function ie(){for(const se in this.opts.formats){const te=this.opts.formats[se];te&&this.addFormat(se,te)}}function fe(se){if(Array.isArray(se)){this.addVocabulary(se);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const te in se){const Y=se[te];Y.keyword||(Y.keyword=te),this.addKeyword(Y)}}function xe(){const se={...this.opts};for(const te of N)delete se[te];return se}const we={log(){},warn(){},error(){}};function G(se){if(se===!1)return we;if(se===void 0)return console;if(se.log&&se.warn&&se.error)return se;throw new Error("logger must implement log, warn and error methods")}const J=/^[a-z_$][a-z0-9_$:-]*$/i;function q(se,te){const{RULES:Y}=this;if((0,A.eachItem)(se,be=>{if(Y.keywords[be])throw new Error(`Keyword ${be} is already defined`);if(!J.test(be))throw new Error(`Keyword ${be} has invalid name`)}),!!te&&te.$data&&!("code"in te||"validate"in te))throw new Error('$data keyword must have "code" or "validate" function')}function H(se,te,Y){var be;const ye=te?.post;if(Y&&ye)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:Ie}=this;let ke=ye?Ie.post:Ie.rules.find(({type:Ae})=>Ae===Y);if(ke||(ke={type:Y,rules:[]},Ie.rules.push(ke)),Ie.keywords[se]=!0,!te)return;const Ce={keyword:se,definition:{...te,type:(0,R.getJSONTypes)(te.type),schemaType:(0,R.getJSONTypes)(te.schemaType)}};te.before?ve.call(this,ke,Ce,te.before):ke.rules.push(Ce),Ie.all[se]=Ce,(be=te.implements)===null||be===void 0||be.forEach(Ae=>this.addKeyword(Ae))}function ve(se,te,Y){const be=se.rules.findIndex(ye=>ye.keyword===Y);be>=0?se.rules.splice(be,0,te):(se.rules.push(te),this.logger.warn(`rule ${Y} is not defined`))}function Z(se){let{metaSchema:te}=se;te!==void 0&&(se.$data&&this.opts.$data&&(te=ue(te)),se.validateSchema=this.compile(te,!0))}const ce={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function ue(se){return{anyOf:[se,ce]}}}(core$3)),core$3}var draft7={},core$2={},id={},hasRequiredId;function requireId(){if(hasRequiredId)return id;hasRequiredId=1,Object.defineProperty(id,"__esModule",{value:!0});const n={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};return id.default=n,id}var ref$1={},hasRequiredRef$1;function requireRef$1(){if(hasRequiredRef$1)return ref$1;hasRequiredRef$1=1,Object.defineProperty(ref$1,"__esModule",{value:!0}),ref$1.callRef=ref$1.getValidate=void 0;const n=requireRef_error(),r=requireCode$1(),g=requireCodegen(),_=requireNames(),x=requireCompile(),S=requireUtil$2(),E={keyword:"$ref",schemaType:"string",code(R){const{gen:A,schema:I,it:B}=R,{baseId:D,schemaEnv:N,validateName:M,opts:O,self:L}=B,{root:F}=N;if((I==="#"||I==="#/")&&D===F.baseId)return j();const U=x.resolveRef.call(L,F,D,I);if(U===void 0)throw new n.default(B.opts.uriResolver,D,I);if(U instanceof x.SchemaEnv)return z(U);return W(U);function j(){if(N===F)return T(R,M,N,N.$async);const X=A.scopeValue("root",{ref:F});return T(R,(0,g._)`${X}.validate`,F,F.$async)}function z(X){const ie=C(R,X);T(R,ie,X,X.$async)}function W(X){const ie=A.scopeValue("schema",O.code.source===!0?{ref:X,code:(0,g.stringify)(X)}:{ref:X}),fe=A.name("valid"),xe=R.subschema({schema:X,dataTypes:[],schemaPath:g.nil,topSchemaRef:ie,errSchemaPath:I},fe);R.mergeEvaluated(xe),R.ok(fe)}}};function C(R,A){const{gen:I}=R;return A.validate?I.scopeValue("validate",{ref:A.validate}):(0,g._)`${I.scopeValue("wrapper",{ref:A})}.validate`}ref$1.getValidate=C;function T(R,A,I,B){const{gen:D,it:N}=R,{allErrors:M,schemaEnv:O,opts:L}=N,F=L.passContext?_.default.this:g.nil;B?U():j();function U(){if(!O.$async)throw new Error("async schema referenced by sync schema");const X=D.let("valid");D.try(()=>{D.code((0,g._)`await ${(0,r.callValidateCode)(R,A,F)}`),W(A),M||D.assign(X,!0)},ie=>{D.if((0,g._)`!(${ie} instanceof ${N.ValidationError})`,()=>D.throw(ie)),z(ie),M||D.assign(X,!1)}),R.ok(X)}function j(){R.result((0,r.callValidateCode)(R,A,F),()=>W(A),()=>z(A))}function z(X){const ie=(0,g._)`${X}.errors`;D.assign(_.default.vErrors,(0,g._)`${_.default.vErrors} === null ? ${ie} : ${_.default.vErrors}.concat(${ie})`),D.assign(_.default.errors,(0,g._)`${_.default.vErrors}.length`)}function W(X){var ie;if(!N.opts.unevaluated)return;const fe=(ie=I?.validate)===null||ie===void 0?void 0:ie.evaluated;if(N.props!==!0)if(fe&&!fe.dynamicProps)fe.props!==void 0&&(N.props=S.mergeEvaluated.props(D,fe.props,N.props));else{const xe=D.var("props",(0,g._)`${X}.evaluated.props`);N.props=S.mergeEvaluated.props(D,xe,N.props,g.Name)}if(N.items!==!0)if(fe&&!fe.dynamicItems)fe.items!==void 0&&(N.items=S.mergeEvaluated.items(D,fe.items,N.items));else{const xe=D.var("items",(0,g._)`${X}.evaluated.items`);N.items=S.mergeEvaluated.items(D,xe,N.items,g.Name)}}}return ref$1.callRef=T,ref$1.default=E,ref$1}var hasRequiredCore$1;function requireCore$1(){if(hasRequiredCore$1)return core$2;hasRequiredCore$1=1,Object.defineProperty(core$2,"__esModule",{value:!0});const n=requireId(),r=requireRef$1(),g=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,r.default];return core$2.default=g,core$2}var validation={},limitNumber={},hasRequiredLimitNumber;function requireLimitNumber(){if(hasRequiredLimitNumber)return limitNumber;hasRequiredLimitNumber=1,Object.defineProperty(limitNumber,"__esModule",{value:!0});const n=requireCodegen(),r=n.operators,g={maximum:{okStr:"<=",ok:r.LTE,fail:r.GT},minimum:{okStr:">=",ok:r.GTE,fail:r.LT},exclusiveMaximum:{okStr:"<",ok:r.LT,fail:r.GTE},exclusiveMinimum:{okStr:">",ok:r.GT,fail:r.LTE}},_={message:({keyword:S,schemaCode:E})=>(0,n.str)`must be ${g[S].okStr} ${E}`,params:({keyword:S,schemaCode:E})=>(0,n._)`{comparison: ${g[S].okStr}, limit: ${E}}`},x={keyword:Object.keys(g),type:"number",schemaType:"number",$data:!0,error:_,code(S){const{keyword:E,data:C,schemaCode:T}=S;S.fail$data((0,n._)`${C} ${g[E].fail} ${T} || isNaN(${C})`)}};return limitNumber.default=x,limitNumber}var multipleOf={},hasRequiredMultipleOf;function requireMultipleOf(){if(hasRequiredMultipleOf)return multipleOf;hasRequiredMultipleOf=1,Object.defineProperty(multipleOf,"__esModule",{value:!0});const n=requireCodegen(),g={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:_})=>(0,n.str)`must be multiple of ${_}`,params:({schemaCode:_})=>(0,n._)`{multipleOf: ${_}}`},code(_){const{gen:x,data:S,schemaCode:E,it:C}=_,T=C.opts.multipleOfPrecision,R=x.let("res"),A=T?(0,n._)`Math.abs(Math.round(${R}) - ${R}) > 1e-${T}`:(0,n._)`${R} !== parseInt(${R})`;_.fail$data((0,n._)`(${E} === 0 || (${R} = ${S}/${E}, ${A}))`)}};return multipleOf.default=g,multipleOf}var limitLength={},ucs2length={},hasRequiredUcs2length;function requireUcs2length(){if(hasRequiredUcs2length)return ucs2length;hasRequiredUcs2length=1,Object.defineProperty(ucs2length,"__esModule",{value:!0});function n(r){const g=r.length;let _=0,x=0,S;for(;x<g;)_++,S=r.charCodeAt(x++),S>=55296&&S<=56319&&x<g&&(S=r.charCodeAt(x),(S&64512)===56320&&x++);return _}return ucs2length.default=n,n.code='require("ajv/dist/runtime/ucs2length").default',ucs2length}var hasRequiredLimitLength;function requireLimitLength(){if(hasRequiredLimitLength)return limitLength;hasRequiredLimitLength=1,Object.defineProperty(limitLength,"__esModule",{value:!0});const n=requireCodegen(),r=requireUtil$2(),g=requireUcs2length(),x={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:S,schemaCode:E}){const C=S==="maxLength"?"more":"fewer";return(0,n.str)`must NOT have ${C} than ${E} characters`},params:({schemaCode:S})=>(0,n._)`{limit: ${S}}`},code(S){const{keyword:E,data:C,schemaCode:T,it:R}=S,A=E==="maxLength"?n.operators.GT:n.operators.LT,I=R.opts.unicode===!1?(0,n._)`${C}.length`:(0,n._)`${(0,r.useFunc)(S.gen,g.default)}(${C})`;S.fail$data((0,n._)`${I} ${A} ${T}`)}};return limitLength.default=x,limitLength}var pattern={},hasRequiredPattern;function requirePattern(){if(hasRequiredPattern)return pattern;hasRequiredPattern=1,Object.defineProperty(pattern,"__esModule",{value:!0});const n=requireCode$1(),r=requireCodegen(),_={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:x})=>(0,r.str)`must match pattern "${x}"`,params:({schemaCode:x})=>(0,r._)`{pattern: ${x}}`},code(x){const{data:S,$data:E,schema:C,schemaCode:T,it:R}=x,A=R.opts.unicodeRegExp?"u":"",I=E?(0,r._)`(new RegExp(${T}, ${A}))`:(0,n.usePattern)(x,C);x.fail$data((0,r._)`!${I}.test(${S})`)}};return pattern.default=_,pattern}var limitProperties={},hasRequiredLimitProperties;function requireLimitProperties(){if(hasRequiredLimitProperties)return limitProperties;hasRequiredLimitProperties=1,Object.defineProperty(limitProperties,"__esModule",{value:!0});const n=requireCodegen(),g={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:_,schemaCode:x}){const S=_==="maxProperties"?"more":"fewer";return(0,n.str)`must NOT have ${S} than ${x} properties`},params:({schemaCode:_})=>(0,n._)`{limit: ${_}}`},code(_){const{keyword:x,data:S,schemaCode:E}=_,C=x==="maxProperties"?n.operators.GT:n.operators.LT;_.fail$data((0,n._)`Object.keys(${S}).length ${C} ${E}`)}};return limitProperties.default=g,limitProperties}var required={},hasRequiredRequired;function requireRequired(){if(hasRequiredRequired)return required;hasRequiredRequired=1,Object.defineProperty(required,"__esModule",{value:!0});const n=requireCode$1(),r=requireCodegen(),g=requireUtil$2(),x={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:S}})=>(0,r.str)`must have required property '${S}'`,params:({params:{missingProperty:S}})=>(0,r._)`{missingProperty: ${S}}`},code(S){const{gen:E,schema:C,schemaCode:T,data:R,$data:A,it:I}=S,{opts:B}=I;if(!A&&C.length===0)return;const D=C.length>=B.loopRequired;if(I.allErrors?N():M(),B.strictRequired){const F=S.parentSchema.properties,{definedProperties:U}=S.it;for(const j of C)if(F?.[j]===void 0&&!U.has(j)){const z=I.schemaEnv.baseId+I.errSchemaPath,W=`required property "${j}" is not defined at "${z}" (strictRequired)`;(0,g.checkStrictMode)(I,W,I.opts.strictRequired)}}function N(){if(D||A)S.block$data(r.nil,O);else for(const F of C)(0,n.checkReportMissingProp)(S,F)}function M(){const F=E.let("missing");if(D||A){const U=E.let("valid",!0);S.block$data(U,()=>L(F,U)),S.ok(U)}else E.if((0,n.checkMissingProp)(S,C,F)),(0,n.reportMissingProp)(S,F),E.else()}function O(){E.forOf("prop",T,F=>{S.setParams({missingProperty:F}),E.if((0,n.noPropertyInData)(E,R,F,B.ownProperties),()=>S.error())})}function L(F,U){S.setParams({missingProperty:F}),E.forOf(F,T,()=>{E.assign(U,(0,n.propertyInData)(E,R,F,B.ownProperties)),E.if((0,r.not)(U),()=>{S.error(),E.break()})},r.nil)}}};return required.default=x,required}var limitItems={},hasRequiredLimitItems;function requireLimitItems(){if(hasRequiredLimitItems)return limitItems;hasRequiredLimitItems=1,Object.defineProperty(limitItems,"__esModule",{value:!0});const n=requireCodegen(),g={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:_,schemaCode:x}){const S=_==="maxItems"?"more":"fewer";return(0,n.str)`must NOT have ${S} than ${x} items`},params:({schemaCode:_})=>(0,n._)`{limit: ${_}}`},code(_){const{keyword:x,data:S,schemaCode:E}=_,C=x==="maxItems"?n.operators.GT:n.operators.LT;_.fail$data((0,n._)`${S}.length ${C} ${E}`)}};return limitItems.default=g,limitItems}var uniqueItems={},equal={},hasRequiredEqual;function requireEqual(){if(hasRequiredEqual)return equal;hasRequiredEqual=1,Object.defineProperty(equal,"__esModule",{value:!0});const n=requireFastDeepEqual();return n.code='require("ajv/dist/runtime/equal").default',equal.default=n,equal}var hasRequiredUniqueItems;function requireUniqueItems(){if(hasRequiredUniqueItems)return uniqueItems;hasRequiredUniqueItems=1,Object.defineProperty(uniqueItems,"__esModule",{value:!0});const n=requireDataType(),r=requireCodegen(),g=requireUtil$2(),_=requireEqual(),S={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:E,j:C}})=>(0,r.str)`must NOT have duplicate items (items ## ${C} and ${E} are identical)`,params:({params:{i:E,j:C}})=>(0,r._)`{i: ${E}, j: ${C}}`},code(E){const{gen:C,data:T,$data:R,schema:A,parentSchema:I,schemaCode:B,it:D}=E;if(!R&&!A)return;const N=C.let("valid"),M=I.items?(0,n.getSchemaTypes)(I.items):[];E.block$data(N,O,(0,r._)`${B} === false`),E.ok(N);function O(){const j=C.let("i",(0,r._)`${T}.length`),z=C.let("j");E.setParams({i:j,j:z}),C.assign(N,!0),C.if((0,r._)`${j} > 1`,()=>(L()?F:U)(j,z))}function L(){return M.length>0&&!M.some(j=>j==="object"||j==="array")}function F(j,z){const W=C.name("item"),X=(0,n.checkDataTypes)(M,W,D.opts.strictNumbers,n.DataType.Wrong),ie=C.const("indices",(0,r._)`{}`);C.for((0,r._)`;${j}--;`,()=>{C.let(W,(0,r._)`${T}[${j}]`),C.if(X,(0,r._)`continue`),M.length>1&&C.if((0,r._)`typeof ${W} == "string"`,(0,r._)`${W} += "_"`),C.if((0,r._)`typeof ${ie}[${W}] == "number"`,()=>{C.assign(z,(0,r._)`${ie}[${W}]`),E.error(),C.assign(N,!1).break()}).code((0,r._)`${ie}[${W}] = ${j}`)})}function U(j,z){const W=(0,g.useFunc)(C,_.default),X=C.name("outer");C.label(X).for((0,r._)`;${j}--;`,()=>C.for((0,r._)`${z} = ${j}; ${z}--;`,()=>C.if((0,r._)`${W}(${T}[${j}], ${T}[${z}])`,()=>{E.error(),C.assign(N,!1).break(X)})))}}};return uniqueItems.default=S,uniqueItems}var _const={},hasRequired_const;function require_const(){if(hasRequired_const)return _const;hasRequired_const=1,Object.defineProperty(_const,"__esModule",{value:!0});const n=requireCodegen(),r=requireUtil$2(),g=requireEqual(),x={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:S})=>(0,n._)`{allowedValue: ${S}}`},code(S){const{gen:E,data:C,$data:T,schemaCode:R,schema:A}=S;T||A&&typeof A=="object"?S.fail$data((0,n._)`!${(0,r.useFunc)(E,g.default)}(${C}, ${R})`):S.fail((0,n._)`${A} !== ${C}`)}};return _const.default=x,_const}var _enum={},hasRequired_enum;function require_enum(){if(hasRequired_enum)return _enum;hasRequired_enum=1,Object.defineProperty(_enum,"__esModule",{value:!0});const n=requireCodegen(),r=requireUtil$2(),g=requireEqual(),x={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:S})=>(0,n._)`{allowedValues: ${S}}`},code(S){const{gen:E,data:C,$data:T,schema:R,schemaCode:A,it:I}=S;if(!T&&R.length===0)throw new Error("enum must have non-empty array");const B=R.length>=I.opts.loopEnum;let D;const N=()=>D??(D=(0,r.useFunc)(E,g.default));let M;if(B||T)M=E.let("valid"),S.block$data(M,O);else{if(!Array.isArray(R))throw new Error("ajv implementation error");const F=E.const("vSchema",A);M=(0,n.or)(...R.map((U,j)=>L(F,j)))}S.pass(M);function O(){E.assign(M,!1),E.forOf("v",A,F=>E.if((0,n._)`${N()}(${C}, ${F})`,()=>E.assign(M,!0).break()))}function L(F,U){const j=R[U];return typeof j=="object"&&j!==null?(0,n._)`${N()}(${C}, ${F}[${U}])`:(0,n._)`${C} === ${j}`}}};return _enum.default=x,_enum}var hasRequiredValidation;function requireValidation(){if(hasRequiredValidation)return validation;hasRequiredValidation=1,Object.defineProperty(validation,"__esModule",{value:!0});const n=requireLimitNumber(),r=requireMultipleOf(),g=requireLimitLength(),_=requirePattern(),x=requireLimitProperties(),S=requireRequired(),E=requireLimitItems(),C=requireUniqueItems(),T=require_const(),R=require_enum(),A=[n.default,r.default,g.default,_.default,x.default,S.default,E.default,C.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},T.default,R.default];return validation.default=A,validation}var applicator={},additionalItems={},hasRequiredAdditionalItems;function requireAdditionalItems(){if(hasRequiredAdditionalItems)return additionalItems;hasRequiredAdditionalItems=1,Object.defineProperty(additionalItems,"__esModule",{value:!0}),additionalItems.validateAdditionalItems=void 0;const n=requireCodegen(),r=requireUtil$2(),_={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:S}})=>(0,n.str)`must NOT have more than ${S} items`,params:({params:{len:S}})=>(0,n._)`{limit: ${S}}`},code(S){const{parentSchema:E,it:C}=S,{items:T}=E;if(!Array.isArray(T)){(0,r.checkStrictMode)(C,'"additionalItems" is ignored when "items" is not an array of schemas');return}x(S,T)}};function x(S,E){const{gen:C,schema:T,data:R,keyword:A,it:I}=S;I.items=!0;const B=C.const("len",(0,n._)`${R}.length`);if(T===!1)S.setParams({len:E.length}),S.pass((0,n._)`${B} <= ${E.length}`);else if(typeof T=="object"&&!(0,r.alwaysValidSchema)(I,T)){const N=C.var("valid",(0,n._)`${B} <= ${E.length}`);C.if((0,n.not)(N),()=>D(N)),S.ok(N)}function D(N){C.forRange("i",E.length,B,M=>{S.subschema({keyword:A,dataProp:M,dataPropType:r.Type.Num},N),I.allErrors||C.if((0,n.not)(N),()=>C.break())})}}return additionalItems.validateAdditionalItems=x,additionalItems.default=_,additionalItems}var prefixItems={},items={},hasRequiredItems;function requireItems(){if(hasRequiredItems)return items;hasRequiredItems=1,Object.defineProperty(items,"__esModule",{value:!0}),items.validateTuple=void 0;const n=requireCodegen(),r=requireUtil$2(),g=requireCode$1(),_={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(S){const{schema:E,it:C}=S;if(Array.isArray(E))return x(S,"additionalItems",E);C.items=!0,!(0,r.alwaysValidSchema)(C,E)&&S.ok((0,g.validateArray)(S))}};function x(S,E,C=S.schema){const{gen:T,parentSchema:R,data:A,keyword:I,it:B}=S;M(R),B.opts.unevaluated&&C.length&&B.items!==!0&&(B.items=r.mergeEvaluated.items(T,C.length,B.items));const D=T.name("valid"),N=T.const("len",(0,n._)`${A}.length`);C.forEach((O,L)=>{(0,r.alwaysValidSchema)(B,O)||(T.if((0,n._)`${N} > ${L}`,()=>S.subschema({keyword:I,schemaProp:L,dataProp:L},D)),S.ok(D))});function M(O){const{opts:L,errSchemaPath:F}=B,U=C.length,j=U===O.minItems&&(U===O.maxItems||O[E]===!1);if(L.strictTuples&&!j){const z=`"${I}" is ${U}-tuple, but minItems or maxItems/${E} are not specified or different at path "${F}"`;(0,r.checkStrictMode)(B,z,L.strictTuples)}}}return items.validateTuple=x,items.default=_,items}var hasRequiredPrefixItems;function requirePrefixItems(){if(hasRequiredPrefixItems)return prefixItems;hasRequiredPrefixItems=1,Object.defineProperty(prefixItems,"__esModule",{value:!0});const n=requireItems(),r={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:g=>(0,n.validateTuple)(g,"items")};return prefixItems.default=r,prefixItems}var items2020={},hasRequiredItems2020;function requireItems2020(){if(hasRequiredItems2020)return items2020;hasRequiredItems2020=1,Object.defineProperty(items2020,"__esModule",{value:!0});const n=requireCodegen(),r=requireUtil$2(),g=requireCode$1(),_=requireAdditionalItems(),S={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:E}})=>(0,n.str)`must NOT have more than ${E} items`,params:({params:{len:E}})=>(0,n._)`{limit: ${E}}`},code(E){const{schema:C,parentSchema:T,it:R}=E,{prefixItems:A}=T;R.items=!0,!(0,r.alwaysValidSchema)(R,C)&&(A?(0,_.validateAdditionalItems)(E,A):E.ok((0,g.validateArray)(E)))}};return items2020.default=S,items2020}var contains={},hasRequiredContains;function requireContains(){if(hasRequiredContains)return contains;hasRequiredContains=1,Object.defineProperty(contains,"__esModule",{value:!0});const n=requireCodegen(),r=requireUtil$2(),_={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:x,max:S}})=>S===void 0?(0,n.str)`must contain at least ${x} valid item(s)`:(0,n.str)`must contain at least ${x} and no more than ${S} valid item(s)`,params:({params:{min:x,max:S}})=>S===void 0?(0,n._)`{minContains: ${x}}`:(0,n._)`{minContains: ${x}, maxContains: ${S}}`},code(x){const{gen:S,schema:E,parentSchema:C,data:T,it:R}=x;let A,I;const{minContains:B,maxContains:D}=C;R.opts.next?(A=B===void 0?1:B,I=D):A=1;const N=S.const("len",(0,n._)`${T}.length`);if(x.setParams({min:A,max:I}),I===void 0&&A===0){(0,r.checkStrictMode)(R,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(I!==void 0&&A>I){(0,r.checkStrictMode)(R,'"minContains" > "maxContains" is always invalid'),x.fail();return}if((0,r.alwaysValidSchema)(R,E)){let U=(0,n._)`${N} >= ${A}`;I!==void 0&&(U=(0,n._)`${U} && ${N} <= ${I}`),x.pass(U);return}R.items=!0;const M=S.name("valid");I===void 0&&A===1?L(M,()=>S.if(M,()=>S.break())):A===0?(S.let(M,!0),I!==void 0&&S.if((0,n._)`${T}.length > 0`,O)):(S.let(M,!1),O()),x.result(M,()=>x.reset());function O(){const U=S.name("_valid"),j=S.let("count",0);L(U,()=>S.if(U,()=>F(j)))}function L(U,j){S.forRange("i",0,N,z=>{x.subschema({keyword:"contains",dataProp:z,dataPropType:r.Type.Num,compositeRule:!0},U),j()})}function F(U){S.code((0,n._)`${U}++`),I===void 0?S.if((0,n._)`${U} >= ${A}`,()=>S.assign(M,!0).break()):(S.if((0,n._)`${U} > ${I}`,()=>S.assign(M,!1).break()),A===1?S.assign(M,!0):S.if((0,n._)`${U} >= ${A}`,()=>S.assign(M,!0)))}}};return contains.default=_,contains}var dependencies$1={},hasRequiredDependencies;function requireDependencies(){return hasRequiredDependencies||(hasRequiredDependencies=1,function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSchemaDeps=n.validatePropertyDeps=n.error=void 0;const r=requireCodegen(),g=requireUtil$2(),_=requireCode$1();n.error={message:({params:{property:T,depsCount:R,deps:A}})=>{const I=R===1?"property":"properties";return(0,r.str)`must have ${I} ${A} when property ${T} is present`},params:({params:{property:T,depsCount:R,deps:A,missingProperty:I}})=>(0,r._)`{property: ${T},
    missingProperty: ${I},
    depsCount: ${R},
    deps: ${A}}`};const x={keyword:"dependencies",type:"object",schemaType:"object",error:n.error,code(T){const[R,A]=S(T);E(T,R),C(T,A)}};function S({schema:T}){const R={},A={};for(const I in T){if(I==="__proto__")continue;const B=Array.isArray(T[I])?R:A;B[I]=T[I]}return[R,A]}function E(T,R=T.schema){const{gen:A,data:I,it:B}=T;if(Object.keys(R).length===0)return;const D=A.let("missing");for(const N in R){const M=R[N];if(M.length===0)continue;const O=(0,_.propertyInData)(A,I,N,B.opts.ownProperties);T.setParams({property:N,depsCount:M.length,deps:M.join(", ")}),B.allErrors?A.if(O,()=>{for(const L of M)(0,_.checkReportMissingProp)(T,L)}):(A.if((0,r._)`${O} && (${(0,_.checkMissingProp)(T,M,D)})`),(0,_.reportMissingProp)(T,D),A.else())}}n.validatePropertyDeps=E;function C(T,R=T.schema){const{gen:A,data:I,keyword:B,it:D}=T,N=A.name("valid");for(const M in R)(0,g.alwaysValidSchema)(D,R[M])||(A.if((0,_.propertyInData)(A,I,M,D.opts.ownProperties),()=>{const O=T.subschema({keyword:B,schemaProp:M},N);T.mergeValidEvaluated(O,N)},()=>A.var(N,!0)),T.ok(N))}n.validateSchemaDeps=C,n.default=x}(dependencies$1)),dependencies$1}var propertyNames={},hasRequiredPropertyNames;function requirePropertyNames(){if(hasRequiredPropertyNames)return propertyNames;hasRequiredPropertyNames=1,Object.defineProperty(propertyNames,"__esModule",{value:!0});const n=requireCodegen(),r=requireUtil$2(),_={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:x})=>(0,n._)`{propertyName: ${x.propertyName}}`},code(x){const{gen:S,schema:E,data:C,it:T}=x;if((0,r.alwaysValidSchema)(T,E))return;const R=S.name("valid");S.forIn("key",C,A=>{x.setParams({propertyName:A}),x.subschema({keyword:"propertyNames",data:A,dataTypes:["string"],propertyName:A,compositeRule:!0},R),S.if((0,n.not)(R),()=>{x.error(!0),T.allErrors||S.break()})}),x.ok(R)}};return propertyNames.default=_,propertyNames}var additionalProperties={},hasRequiredAdditionalProperties;function requireAdditionalProperties(){if(hasRequiredAdditionalProperties)return additionalProperties;hasRequiredAdditionalProperties=1,Object.defineProperty(additionalProperties,"__esModule",{value:!0});const n=requireCode$1(),r=requireCodegen(),g=requireNames(),_=requireUtil$2(),S={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:E})=>(0,r._)`{additionalProperty: ${E.additionalProperty}}`},code(E){const{gen:C,schema:T,parentSchema:R,data:A,errsCount:I,it:B}=E;if(!I)throw new Error("ajv implementation error");const{allErrors:D,opts:N}=B;if(B.props=!0,N.removeAdditional!=="all"&&(0,_.alwaysValidSchema)(B,T))return;const M=(0,n.allSchemaProperties)(R.properties),O=(0,n.allSchemaProperties)(R.patternProperties);L(),E.ok((0,r._)`${I} === ${g.default.errors}`);function L(){C.forIn("key",A,W=>{!M.length&&!O.length?j(W):C.if(F(W),()=>j(W))})}function F(W){let X;if(M.length>8){const ie=(0,_.schemaRefOrVal)(B,R.properties,"properties");X=(0,n.isOwnProperty)(C,ie,W)}else M.length?X=(0,r.or)(...M.map(ie=>(0,r._)`${W} === ${ie}`)):X=r.nil;return O.length&&(X=(0,r.or)(X,...O.map(ie=>(0,r._)`${(0,n.usePattern)(E,ie)}.test(${W})`))),(0,r.not)(X)}function U(W){C.code((0,r._)`delete ${A}[${W}]`)}function j(W){if(N.removeAdditional==="all"||N.removeAdditional&&T===!1){U(W);return}if(T===!1){E.setParams({additionalProperty:W}),E.error(),D||C.break();return}if(typeof T=="object"&&!(0,_.alwaysValidSchema)(B,T)){const X=C.name("valid");N.removeAdditional==="failing"?(z(W,X,!1),C.if((0,r.not)(X),()=>{E.reset(),U(W)})):(z(W,X),D||C.if((0,r.not)(X),()=>C.break()))}}function z(W,X,ie){const fe={keyword:"additionalProperties",dataProp:W,dataPropType:_.Type.Str};ie===!1&&Object.assign(fe,{compositeRule:!0,createErrors:!1,allErrors:!1}),E.subschema(fe,X)}}};return additionalProperties.default=S,additionalProperties}var properties$1={},hasRequiredProperties;function requireProperties(){if(hasRequiredProperties)return properties$1;hasRequiredProperties=1,Object.defineProperty(properties$1,"__esModule",{value:!0});const n=requireValidate(),r=requireCode$1(),g=requireUtil$2(),_=requireAdditionalProperties(),x={keyword:"properties",type:"object",schemaType:"object",code(S){const{gen:E,schema:C,parentSchema:T,data:R,it:A}=S;A.opts.removeAdditional==="all"&&T.additionalProperties===void 0&&_.default.code(new n.KeywordCxt(A,_.default,"additionalProperties"));const I=(0,r.allSchemaProperties)(C);for(const O of I)A.definedProperties.add(O);A.opts.unevaluated&&I.length&&A.props!==!0&&(A.props=g.mergeEvaluated.props(E,(0,g.toHash)(I),A.props));const B=I.filter(O=>!(0,g.alwaysValidSchema)(A,C[O]));if(B.length===0)return;const D=E.name("valid");for(const O of B)N(O)?M(O):(E.if((0,r.propertyInData)(E,R,O,A.opts.ownProperties)),M(O),A.allErrors||E.else().var(D,!0),E.endIf()),S.it.definedProperties.add(O),S.ok(D);function N(O){return A.opts.useDefaults&&!A.compositeRule&&C[O].default!==void 0}function M(O){S.subschema({keyword:"properties",schemaProp:O,dataProp:O},D)}}};return properties$1.default=x,properties$1}var patternProperties={},hasRequiredPatternProperties;function requirePatternProperties(){if(hasRequiredPatternProperties)return patternProperties;hasRequiredPatternProperties=1,Object.defineProperty(patternProperties,"__esModule",{value:!0});const n=requireCode$1(),r=requireCodegen(),g=requireUtil$2(),_=requireUtil$2(),x={keyword:"patternProperties",type:"object",schemaType:"object",code(S){const{gen:E,schema:C,data:T,parentSchema:R,it:A}=S,{opts:I}=A,B=(0,n.allSchemaProperties)(C),D=B.filter(j=>(0,g.alwaysValidSchema)(A,C[j]));if(B.length===0||D.length===B.length&&(!A.opts.unevaluated||A.props===!0))return;const N=I.strictSchema&&!I.allowMatchingProperties&&R.properties,M=E.name("valid");A.props!==!0&&!(A.props instanceof r.Name)&&(A.props=(0,_.evaluatedPropsToName)(E,A.props));const{props:O}=A;L();function L(){for(const j of B)N&&F(j),A.allErrors?U(j):(E.var(M,!0),U(j),E.if(M))}function F(j){for(const z in N)new RegExp(j).test(z)&&(0,g.checkStrictMode)(A,`property ${z} matches pattern ${j} (use allowMatchingProperties)`)}function U(j){E.forIn("key",T,z=>{E.if((0,r._)`${(0,n.usePattern)(S,j)}.test(${z})`,()=>{const W=D.includes(j);W||S.subschema({keyword:"patternProperties",schemaProp:j,dataProp:z,dataPropType:_.Type.Str},M),A.opts.unevaluated&&O!==!0?E.assign((0,r._)`${O}[${z}]`,!0):!W&&!A.allErrors&&E.if((0,r.not)(M),()=>E.break())})})}}};return patternProperties.default=x,patternProperties}var not$1={},hasRequiredNot;function requireNot(){if(hasRequiredNot)return not$1;hasRequiredNot=1,Object.defineProperty(not$1,"__esModule",{value:!0});const n=requireUtil$2(),r={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(g){const{gen:_,schema:x,it:S}=g;if((0,n.alwaysValidSchema)(S,x)){g.fail();return}const E=_.name("valid");g.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},E),g.failResult(E,()=>g.reset(),()=>g.error())},error:{message:"must NOT be valid"}};return not$1.default=r,not$1}var anyOf={},hasRequiredAnyOf;function requireAnyOf(){if(hasRequiredAnyOf)return anyOf;hasRequiredAnyOf=1,Object.defineProperty(anyOf,"__esModule",{value:!0});const r={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:requireCode$1().validateUnion,error:{message:"must match a schema in anyOf"}};return anyOf.default=r,anyOf}var oneOf={},hasRequiredOneOf;function requireOneOf(){if(hasRequiredOneOf)return oneOf;hasRequiredOneOf=1,Object.defineProperty(oneOf,"__esModule",{value:!0});const n=requireCodegen(),r=requireUtil$2(),_={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:x})=>(0,n._)`{passingSchemas: ${x.passing}}`},code(x){const{gen:S,schema:E,parentSchema:C,it:T}=x;if(!Array.isArray(E))throw new Error("ajv implementation error");if(T.opts.discriminator&&C.discriminator)return;const R=E,A=S.let("valid",!1),I=S.let("passing",null),B=S.name("_valid");x.setParams({passing:I}),S.block(D),x.result(A,()=>x.reset(),()=>x.error(!0));function D(){R.forEach((N,M)=>{let O;(0,r.alwaysValidSchema)(T,N)?S.var(B,!0):O=x.subschema({keyword:"oneOf",schemaProp:M,compositeRule:!0},B),M>0&&S.if((0,n._)`${B} && ${A}`).assign(A,!1).assign(I,(0,n._)`[${I}, ${M}]`).else(),S.if(B,()=>{S.assign(A,!0),S.assign(I,M),O&&x.mergeEvaluated(O,n.Name)})})}}};return oneOf.default=_,oneOf}var allOf={},hasRequiredAllOf;function requireAllOf(){if(hasRequiredAllOf)return allOf;hasRequiredAllOf=1,Object.defineProperty(allOf,"__esModule",{value:!0});const n=requireUtil$2(),r={keyword:"allOf",schemaType:"array",code(g){const{gen:_,schema:x,it:S}=g;if(!Array.isArray(x))throw new Error("ajv implementation error");const E=_.name("valid");x.forEach((C,T)=>{if((0,n.alwaysValidSchema)(S,C))return;const R=g.subschema({keyword:"allOf",schemaProp:T},E);g.ok(E),g.mergeEvaluated(R)})}};return allOf.default=r,allOf}var _if={},hasRequired_if;function require_if(){if(hasRequired_if)return _if;hasRequired_if=1,Object.defineProperty(_if,"__esModule",{value:!0});const n=requireCodegen(),r=requireUtil$2(),_={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:S})=>(0,n.str)`must match "${S.ifClause}" schema`,params:({params:S})=>(0,n._)`{failingKeyword: ${S.ifClause}}`},code(S){const{gen:E,parentSchema:C,it:T}=S;C.then===void 0&&C.else===void 0&&(0,r.checkStrictMode)(T,'"if" without "then" and "else" is ignored');const R=x(T,"then"),A=x(T,"else");if(!R&&!A)return;const I=E.let("valid",!0),B=E.name("_valid");if(D(),S.reset(),R&&A){const M=E.let("ifClause");S.setParams({ifClause:M}),E.if(B,N("then",M),N("else",M))}else R?E.if(B,N("then")):E.if((0,n.not)(B),N("else"));S.pass(I,()=>S.error(!0));function D(){const M=S.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},B);S.mergeEvaluated(M)}function N(M,O){return()=>{const L=S.subschema({keyword:M},B);E.assign(I,B),S.mergeValidEvaluated(L,I),O?E.assign(O,(0,n._)`${M}`):S.setParams({ifClause:M})}}}};function x(S,E){const C=S.schema[E];return C!==void 0&&!(0,r.alwaysValidSchema)(S,C)}return _if.default=_,_if}var thenElse={},hasRequiredThenElse;function requireThenElse(){if(hasRequiredThenElse)return thenElse;hasRequiredThenElse=1,Object.defineProperty(thenElse,"__esModule",{value:!0});const n=requireUtil$2(),r={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:g,parentSchema:_,it:x}){_.if===void 0&&(0,n.checkStrictMode)(x,`"${g}" without "if" is ignored`)}};return thenElse.default=r,thenElse}var hasRequiredApplicator;function requireApplicator(){if(hasRequiredApplicator)return applicator;hasRequiredApplicator=1,Object.defineProperty(applicator,"__esModule",{value:!0});const n=requireAdditionalItems(),r=requirePrefixItems(),g=requireItems(),_=requireItems2020(),x=requireContains(),S=requireDependencies(),E=requirePropertyNames(),C=requireAdditionalProperties(),T=requireProperties(),R=requirePatternProperties(),A=requireNot(),I=requireAnyOf(),B=requireOneOf(),D=requireAllOf(),N=require_if(),M=requireThenElse();function O(L=!1){const F=[A.default,I.default,B.default,D.default,N.default,M.default,E.default,C.default,S.default,T.default,R.default];return L?F.push(r.default,_.default):F.push(n.default,g.default),F.push(x.default),F}return applicator.default=O,applicator}var format$4={},format$3={},hasRequiredFormat$2;function requireFormat$2(){if(hasRequiredFormat$2)return format$3;hasRequiredFormat$2=1,Object.defineProperty(format$3,"__esModule",{value:!0});const n=requireCodegen(),g={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:_})=>(0,n.str)`must match format "${_}"`,params:({schemaCode:_})=>(0,n._)`{format: ${_}}`},code(_,x){const{gen:S,data:E,$data:C,schema:T,schemaCode:R,it:A}=_,{opts:I,errSchemaPath:B,schemaEnv:D,self:N}=A;if(!I.validateFormats)return;C?M():O();function M(){const L=S.scopeValue("formats",{ref:N.formats,code:I.code.formats}),F=S.const("fDef",(0,n._)`${L}[${R}]`),U=S.let("fType"),j=S.let("format");S.if((0,n._)`typeof ${F} == "object" && !(${F} instanceof RegExp)`,()=>S.assign(U,(0,n._)`${F}.type || "string"`).assign(j,(0,n._)`${F}.validate`),()=>S.assign(U,(0,n._)`"string"`).assign(j,F)),_.fail$data((0,n.or)(z(),W()));function z(){return I.strictSchema===!1?n.nil:(0,n._)`${R} && !${j}`}function W(){const X=D.$async?(0,n._)`(${F}.async ? await ${j}(${E}) : ${j}(${E}))`:(0,n._)`${j}(${E})`,ie=(0,n._)`(typeof ${j} == "function" ? ${X} : ${j}.test(${E}))`;return(0,n._)`${j} && ${j} !== true && ${U} === ${x} && !${ie}`}}function O(){const L=N.formats[T];if(!L){z();return}if(L===!0)return;const[F,U,j]=W(L);F===x&&_.pass(X());function z(){if(I.strictSchema===!1){N.logger.warn(ie());return}throw new Error(ie());function ie(){return`unknown format "${T}" ignored in schema at path "${B}"`}}function W(ie){const fe=ie instanceof RegExp?(0,n.regexpCode)(ie):I.code.formats?(0,n._)`${I.code.formats}${(0,n.getProperty)(T)}`:void 0,xe=S.scopeValue("formats",{key:T,ref:ie,code:fe});return typeof ie=="object"&&!(ie instanceof RegExp)?[ie.type||"string",ie.validate,(0,n._)`${xe}.validate`]:["string",ie,xe]}function X(){if(typeof L=="object"&&!(L instanceof RegExp)&&L.async){if(!D.$async)throw new Error("async format in sync schema");return(0,n._)`await ${j}(${E})`}return typeof U=="function"?(0,n._)`${j}(${E})`:(0,n._)`${j}.test(${E})`}}}};return format$3.default=g,format$3}var hasRequiredFormat$1;function requireFormat$1(){if(hasRequiredFormat$1)return format$4;hasRequiredFormat$1=1,Object.defineProperty(format$4,"__esModule",{value:!0});const r=[requireFormat$2().default];return format$4.default=r,format$4}var metadata={},hasRequiredMetadata;function requireMetadata(){return hasRequiredMetadata||(hasRequiredMetadata=1,Object.defineProperty(metadata,"__esModule",{value:!0}),metadata.contentVocabulary=metadata.metadataVocabulary=void 0,metadata.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],metadata.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]),metadata}var hasRequiredDraft7;function requireDraft7(){if(hasRequiredDraft7)return draft7;hasRequiredDraft7=1,Object.defineProperty(draft7,"__esModule",{value:!0});const n=requireCore$1(),r=requireValidation(),g=requireApplicator(),_=requireFormat$1(),x=requireMetadata(),S=[n.default,r.default,(0,g.default)(),_.default,x.metadataVocabulary,x.contentVocabulary];return draft7.default=S,draft7}var discriminator={},types$2={},hasRequiredTypes$1;function requireTypes$1(){if(hasRequiredTypes$1)return types$2;hasRequiredTypes$1=1,Object.defineProperty(types$2,"__esModule",{value:!0}),types$2.DiscrError=void 0;var n;return function(r){r.Tag="tag",r.Mapping="mapping"}(n||(types$2.DiscrError=n={})),types$2}var hasRequiredDiscriminator;function requireDiscriminator(){if(hasRequiredDiscriminator)return discriminator;hasRequiredDiscriminator=1,Object.defineProperty(discriminator,"__esModule",{value:!0});const n=requireCodegen(),r=requireTypes$1(),g=requireCompile(),_=requireRef_error(),x=requireUtil$2(),E={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:C,tagName:T}})=>C===r.DiscrError.Tag?`tag "${T}" must be string`:`value of tag "${T}" must be in oneOf`,params:({params:{discrError:C,tag:T,tagName:R}})=>(0,n._)`{error: ${C}, tag: ${R}, tagValue: ${T}}`},code(C){const{gen:T,data:R,schema:A,parentSchema:I,it:B}=C,{oneOf:D}=I;if(!B.opts.discriminator)throw new Error("discriminator: requires discriminator option");const N=A.propertyName;if(typeof N!="string")throw new Error("discriminator: requires propertyName");if(A.mapping)throw new Error("discriminator: mapping is not supported");if(!D)throw new Error("discriminator: requires oneOf keyword");const M=T.let("valid",!1),O=T.const("tag",(0,n._)`${R}${(0,n.getProperty)(N)}`);T.if((0,n._)`typeof ${O} == "string"`,()=>L(),()=>C.error(!1,{discrError:r.DiscrError.Tag,tag:O,tagName:N})),C.ok(M);function L(){const j=U();T.if(!1);for(const z in j)T.elseIf((0,n._)`${O} === ${z}`),T.assign(M,F(j[z]));T.else(),C.error(!1,{discrError:r.DiscrError.Mapping,tag:O,tagName:N}),T.endIf()}function F(j){const z=T.name("valid"),W=C.subschema({keyword:"oneOf",schemaProp:j},z);return C.mergeEvaluated(W,n.Name),z}function U(){var j;const z={},W=ie(I);let X=!0;for(let we=0;we<D.length;we++){let G=D[we];if(G?.$ref&&!(0,x.schemaHasRulesButRef)(G,B.self.RULES)){const q=G.$ref;if(G=g.resolveRef.call(B.self,B.schemaEnv.root,B.baseId,q),G instanceof g.SchemaEnv&&(G=G.schema),G===void 0)throw new _.default(B.opts.uriResolver,B.baseId,q)}const J=(j=G?.properties)===null||j===void 0?void 0:j[N];if(typeof J!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${N}"`);X=X&&(W||ie(G)),fe(J,we)}if(!X)throw new Error(`discriminator: "${N}" must be required`);return z;function ie({required:we}){return Array.isArray(we)&&we.includes(N)}function fe(we,G){if(we.const)xe(we.const,G);else if(we.enum)for(const J of we.enum)xe(J,G);else throw new Error(`discriminator: "properties/${N}" must have "const" or "enum"`)}function xe(we,G){if(typeof we!="string"||we in z)throw new Error(`discriminator: "${N}" values must be unique strings`);z[we]=G}}}};return discriminator.default=E,discriminator}const $schema="http://json-schema.org/draft-07/schema#",$id="http://json-schema.org/draft-07/schema#",title="Core schema meta-schema",definitions={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type$2=["object","boolean"],properties={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},require$$3={$schema,$id,title,definitions,type:type$2,properties,default:!0};var hasRequiredAjv;function requireAjv(){return hasRequiredAjv||(hasRequiredAjv=1,function(n,r){Object.defineProperty(r,"__esModule",{value:!0}),r.MissingRefError=r.ValidationError=r.CodeGen=r.Name=r.nil=r.stringify=r.str=r._=r.KeywordCxt=r.Ajv=void 0;const g=requireCore$2(),_=requireDraft7(),x=requireDiscriminator(),S=require$$3,E=["/properties"],C="http://json-schema.org/draft-07/schema";class T extends g.default{_addVocabularies(){super._addVocabularies(),_.default.forEach(N=>this.addVocabulary(N)),this.opts.discriminator&&this.addKeyword(x.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const N=this.opts.$data?this.$dataMetaSchema(S,E):S;this.addMetaSchema(N,C,!1),this.refs["http://json-schema.org/schema"]=C}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(C)?C:void 0)}}r.Ajv=T,n.exports=r=T,n.exports.Ajv=T,Object.defineProperty(r,"__esModule",{value:!0}),r.default=T;var R=requireValidate();Object.defineProperty(r,"KeywordCxt",{enumerable:!0,get:function(){return R.KeywordCxt}});var A=requireCodegen();Object.defineProperty(r,"_",{enumerable:!0,get:function(){return A._}}),Object.defineProperty(r,"str",{enumerable:!0,get:function(){return A.str}}),Object.defineProperty(r,"stringify",{enumerable:!0,get:function(){return A.stringify}}),Object.defineProperty(r,"nil",{enumerable:!0,get:function(){return A.nil}}),Object.defineProperty(r,"Name",{enumerable:!0,get:function(){return A.Name}}),Object.defineProperty(r,"CodeGen",{enumerable:!0,get:function(){return A.CodeGen}});var I=requireValidation_error();Object.defineProperty(r,"ValidationError",{enumerable:!0,get:function(){return I.default}});var B=requireRef_error();Object.defineProperty(r,"MissingRefError",{enumerable:!0,get:function(){return B.default}})}(ajv$1,ajv$1.exports)),ajv$1.exports}var ajvExports=requireAjv();const Ajv=getDefaultExportFromCjs(ajvExports),ajv=new Ajv({allowUnionTypes:!0}),generateListValidator=n=>({validate:ajv.compile(n)}),generateDictValidator=n=>{const r=ajv.compile(n),g=T=>T===!0?()=>!0:ajv.compile(T),_=Object.fromEntries(Object.entries(n.properties||{}).map(([T,R])=>[T,g(R)])),x=n.additionalProperties?g(n.additionalProperties):()=>!1,S=(T,R)=>E(R)(T),E=T=>_[T]||x;return{validateRoot:r,validateKey:S,getKeyValidator:E,supportedKey:T=>!!_[T]||!!n.additionalProperties}},typedFeed=({db:n,schema:r})=>{const{validate:g}=generateListValidator(r);return new Proxy(n,{get(_,x){return x==="all"?async()=>(await _[x]()).filter(C=>g(C.value)):x==="add"?async S=>{if(g(S))return await _.add(S);throw new Error(S.toString()+JSON.stringify(g.errors,void 0,2))}:_[x]}})},typedKeyValue=({db:n,schema:r})=>{const{validateRoot:g,validateKey:_,getKeyValidator:x,supportedKey:S}=generateDictValidator(r);return new Proxy(n,{get(E,C){return C==="get"?async T=>{if(!S(T))throw new Error(`Unsupported key ${T}.`);const R=await E.get(T);return R===void 0||_(R,T)?R:void 0}:C==="put"||C==="set"?async(T,R)=>{if(!S(T))throw new Error(`Unsupported key ${T}.`);if(_(R,T))return await E.put(T,R);throw new Error(JSON.stringify(x(T).errors,void 0,2))}:C==="all"?async()=>(await E.all()).filter(R=>_(R.value,R.key)):C==="allAsJSON"?async()=>{const T=await E.all(),R=Object.fromEntries(T.map(I=>[I.key,I.value]));if(g(R))return R;throw new Error(JSON.stringify(g.errors,void 0,2))}:E[C]}})},typedOrderedKeyValue=({db:n,schema:r})=>{const{validateKey:g,getKeyValidator:_,supportedKey:x}=generateDictValidator(r);return new Proxy(n,{get(S,E){return E==="get"?async C=>{if(!x(C))throw new Error(`Unsupported key ${C}.`);const T=await S.get(C);if(T===void 0)return T;const{value:R,position:A}=T;return g(R,C)?{value:R,position:A}:void 0}:E==="move"?async(C,T)=>{if(!x(C))throw new Error(`Unsupported key ${C}.`);return await S.move(C,T)}:E==="put"||E==="set"?async(C,T,R)=>{if(!x(C))throw new Error(`Unsupported key ${C}.`);if(g(T,C))return await S.put(C,T,R);throw new Error(JSON.stringify(_(C).errors,void 0,2))}:E==="all"?async()=>(await S.all()).filter(T=>g(T.value,T.key)):S[E]}})},typedSet=({db:n,schema:r})=>{const{validate:g}=generateListValidator(r);return new Proxy(n,{get(_,x){return x==="all"?async()=>(await _[x]()).filter(C=>g(C.value)):x==="add"?async S=>{if(g(S))return await _.add(S);throw new Error(S.toString()+JSON.stringify(g.errors,void 0,2))}:_[x]}})};let e$1=class{constructor(r){this.queue=void 0,this.maxConcurrent=void 0,this.count=void 0,this.queue=[],this.maxConcurrent=r,this.count=0}get canAcquire(){return this.count<this.maxConcurrent}acquire(){return this.canAcquire?(this.count++,Promise.resolve()):new Promise(r=>this.queue.push(r))}release(){const r=this.queue.shift();r?setTimeout(r,0):this.count--}};const t="_default";let s$2=class{constructor(r=1){this.semaphoreInstances=void 0,this.maxConcurrent=void 0,this.semaphoreInstances={},this.maxConcurrent=r}hasSemaphoreInstance(r=t){return!!this.semaphoreInstances[r]}getSemaphoreInstance(r=t){return this.hasSemaphoreInstance(r)||(this.semaphoreInstances[r]=new e$1(this.maxConcurrent)),this.semaphoreInstances[r]}tidy(r=t){this.hasSemaphoreInstance(r)&&this.getSemaphoreInstance(r).count===0&&delete this.semaphoreInstances[r]}canAcquire(r=t){return this.getSemaphoreInstance(r).canAcquire}acquire(r=t){return this.getSemaphoreInstance(r).acquire()}release(r=t){this.getSemaphoreInstance(r).release(),this.tidy(r)}count(r=t){return this.hasSemaphoreInstance(r)?this.getSemaphoreInstance(r).count:0}hasTasks(r=t){return this.count(r)>0}async request(r,g=t){try{return await this.acquire(g),await r()}finally{this.release(g)}}async requestIfAvailable(r,g=t){return this.canAcquire(g)?this.request(r,g):null}};const préparerOrbite=()=>{registerFeed(),registerSet(),registerOrderedKeyValue(),enregistrerContrôleurs()};async function initOrbite({sfip:n,dossierOrbite:r}){return préparerOrbite(),await OrbitDB({ipfs:n,id:"constellation",directory:r})}const typerBd=({bd:n,schéma:r})=>{switch(n.type){case"feed":return typedFeed({db:n,schema:r});case"set":return typedSet({db:n,schema:r});case"keyvalue":return typedKeyValue({db:n,schema:r});case"ordered-keyvalue":return typedOrderedKeyValue({db:n,schema:r});default:throw new Error("Type de bd non reconnu.")}};class GestionnaireOrbite{orbite;_bdsOrbite;verrouOuvertureBd;_oublierNettoyageBdsOuvertes;constructor(r){this.orbite=r,this._bdsOrbite={},this.verrouOuvertureBd=new s$2,this._oublierNettoyageBdsOuvertes=this.lancerNettoyageBdsOuvertes()}get identity(){return this.orbite.identity}async ouvrirBd({id:r,type:g,options:_}){await this.verrouOuvertureBd.acquire(r);const x=this._bdsOrbite[r],S=v4$3(),E=async()=>{this._bdsOrbite[r]&&this._bdsOrbite[r].idsRequêtes.delete(S)},C=T=>{const{type:R}=T;return g===void 0?!0:R===g};if(x){if(this._bdsOrbite[r].idsRequêtes.add(S),this.verrouOuvertureBd.release(r),!C(x.bd))throw new Error(`La bd est de type ${x.bd.type}, et non ${g}.`);return{bd:x.bd,fOublier:E}}try{const T=await this.orbite.open(r,{type:g,..._});return this._bdsOrbite[r]={bd:T,idsRequêtes:new Set([S])},this.verrouOuvertureBd.release(r),{bd:T,fOublier:E}}catch(T){throw console.error(T.toString()),T}}async ouvrirBdTypée({id:r,type:g,schéma:_,options:x}){const{bd:S,fOublier:E}=await this.ouvrirBd({id:r,type:g,options:x});return{bd:typerBd({bd:S,schéma:_}),fOublier:E}}async créerBdIndépendante({type:r,options:g,nom:_}){const x=await this.orbite.open(_||v4$3(),{type:r,...g}),{address:S}=x;return this._bdsOrbite[S]={bd:x,idsRequêtes:new Set},S}async effacerBd({id:r}){const{bd:g}=await this.ouvrirBd({id:r});await g.drop(),delete this._bdsOrbite[r]}lancerNettoyageBdsOuvertes(){const g=setInterval(async()=>{await Promise.all(Object.keys(this._bdsOrbite).map(async _=>{const{bd:x,idsRequêtes:S}=this._bdsOrbite[_];S.size||(delete this._bdsOrbite[_],await x.close())}))},3e5);return async()=>clearInterval(g)}async appliquerFonctionBdOrbite({idBd:r,fonction:g,args:_}){const{bd:x,fOublier:S}=await this.ouvrirBd({id:r}),E=await x[g](..._);return await S(),E}async fermer({arrêterOrbite:r}){this._oublierNettoyageBdsOuvertes&&this._oublierNettoyageBdsOuvertes(),r&&await this.orbite.stop()}}class GestionnaireOrbiteGénéral{gestionnaires;constructor(){this.gestionnaires={}}obtGestionnaireOrbite({orbite:r}){return this.gestionnaires[r.identity.id]||(this.gestionnaires[r.identity.id]=new GestionnaireOrbite(r)),this.gestionnaires[r.identity.id]}async fermer({orbite:r,arrêterOrbite:g}){await this.obtGestionnaireOrbite({orbite:r}).fermer({arrêterOrbite:g}),delete this.gestionnaires[r.identity.id]}}const gestionnaireOrbiteGénéral=new GestionnaireOrbiteGénéral,orbite=Object.freeze(Object.defineProperty({__proto__:null,GestionnaireOrbite,GestionnaireOrbiteGénéral,gestionnaireOrbiteGénéral,initOrbite,préparerOrbite},Symbol.toStringTag,{value:"Module"})),suivreBdAccès=async(n,r)=>{const g=async()=>{const x=await n.all();await r(x.map(S=>S.value))};return n.events.setMaxListeners(100),n.events.on("update",g),await g(),async()=>{n.events.off("update",g)}};class AccèsUtilisateur extends eventsExports.EventEmitter{orbite;idBd;idBdAccès;bdAccès;fOublierBd;oublierSuivi;autorisés;accès;idRequête;prêt;constructor(r,g){super(),this.orbite=gestionnaireOrbiteGénéral.obtGestionnaireOrbite({orbite:r}),this.idBd=g,this.autorisés=[],this.idRequête=v4$3(),this.prêt=!1}async initialiser(){const{bd:r,fOublier:g}=await this.orbite.ouvrirBd({id:this.idBd});this.fOublierBd=g,this.accès=r.access,this.bdAccès=this.accès.bd,this.idBdAccès=this.bdAccès?.address,await this._miseÀJour([]),this.oublierSuivi=await suivreBdAccès(this.bdAccès,async _=>{await this._miseÀJour(_)}),this.prêt=!0}async _miseÀJour(r){const g=[];r=[{id:this.accès.write,rôle:MODÉRATEUR},...r],r.forEach(_=>{g.push(_.id)}),this.autorisés=g,this.emit("misÀJour")}async fermer(){this.oublierSuivi&&await this.oublierSuivi(),await this.fOublierBd?.()}}class GestionnaireAccès extends eventsExports.EventEmitter{_rôles;_rôlesIdOrbite;_rôlesUtilisateurs;_miseÀJourEnCours;orbite;constructor(r){super(),this._rôles={[MODÉRATEUR]:[],[MEMBRE]:[]},this._rôlesIdOrbite={[MODÉRATEUR]:[],[MEMBRE]:[]},this._rôlesUtilisateurs={[MODÉRATEUR]:{},[MEMBRE]:{}},this._miseÀJourEnCours=!1,this.orbite=r}async estUnMembre(r){return this._miseÀJourEnCours&&await eventsExports.once(this,"misÀJour"),this._rôles[MEMBRE].includes(r)}async estUnModérateur(r){return this._miseÀJourEnCours&&await eventsExports.once(this,"misÀJour"),this._rôles[MODÉRATEUR].includes(r)}async estAutorisé(r){return await this.estUnModérateur(r)||await this.estUnMembre(r)}async ajouterÉléments(r){this._miseÀJourEnCours=!0,await Promise.all(r.map(async g=>{const{rôle:_,id:x}=g;if(isValidAddress(x)){if(!this._rôlesUtilisateurs[_][x]){const S=new AccèsUtilisateur(this.orbite,x);S.on("misÀJour",()=>this._mettreRôlesÀJour()),this._rôlesUtilisateurs[_][x]=S,await S.initialiser()}}else this._rôlesIdOrbite[_].includes(x)||(this._rôlesIdOrbite[_].push(x),this._mettreRôlesÀJour())})),this._miseÀJourEnCours=!1,this._mettreRôlesÀJour(),this.emit("misÀJour")}_mettreRôlesÀJour(){const r={MODÉRATEUR:[],MEMBRE:[]};for(const[g,_]of Object.entries(this._rôlesIdOrbite)){const x=r[g];_.forEach(S=>{x.includes(S)||x.push(S)})}for(const[g,_]of Object.entries(this._rôlesUtilisateurs)){const x=r[g];Object.values(_).forEach(S=>{S.autorisés.forEach(E=>{x.includes(E)||x.push(E)})})}this._rôles=r}async fermer(){const r=Object.values(this._rôlesUtilisateurs).map(g=>Object.values(g)).flat();await Promise.all(r.map(g=>g.fermer()))}}const pathJoin=(...n)=>n.join("/").replace(/((?<=\/)\/+)|(^\.\/)|((?<=\/)\.\/)/g,"")||".",estUnContrôleurConstellation=n=>n.type===nomType,type$1="contrôleur-accès-constellation",codec$1=dagCbor,hasher$1=sha256$8,hashStringEncoding$1=base58btc$1,PremierModérateur=async({storage:n,type:r,params:g})=>{const _={type:r,...g},{cid:x,bytes:S}=await encode$8({value:_,codec:codec$1,hasher:hasher$1}),E=x.toString(hashStringEncoding$1);return await n.put(E,S),E},ContrôleurAccès=({write:n,storage:r}={})=>async({orbitdb:g,identities:_,address:x})=>{r=r||await ComposedStorage(await LRUStorage({size:1e3}),await IPFSBlockStorage({ipfs:g.ipfs,pin:!0})),n=n||g.identity.id;const S=new GestionnaireAccès(g);if(x){const T=await r.get(x.replaceAll("/contrôleur-accès-constellation/","")),{value:R}=await decode$6({bytes:T,codec:codec$1,hasher:hasher$1});({write:n}=R)}else x=await PremierModérateur({storage:r,type:type$1,params:{write:n}}),x=pathJoin("/",type$1,x);await S.ajouterÉléments([{id:n,rôle:MODÉRATEUR}]);const E=async T=>{if(T.payload.op!=="ADD"||!T.payload.value)return!1;const{rôle:R,id:A}=T.payload.value,I=rôles.includes(R),B=await _.getIdentity(T.identity);if(!B)return!1;const{id:D}=B;return I&&await C(D,T)&&await _.verifyIdentity(B)?(R===MODÉRATEUR&&await S.ajouterÉléments([{id:A,rôle:MODÉRATEUR}]),!0):!1},C=async(T,R)=>{if(await S.estUnModérateur(T))return!0;const A=R.next;for(const I of A){const B=await r.get(I),D=await Entry.decode(B);if(await E(D)&&await S.estUnModérateur(T))return!0}return!1};return{type:type$1,address:x,write:n,canAppend:E}};ContrôleurAccès.type=type$1;const nomType="contrôleur-constellation",codec=dagCbor,hasher=sha256$8,hashStringEncoding=base58btc$1,schémaBdAccès={type:"object",properties:{rôle:{type:"string"},id:{type:"string"}},required:["rôle","id"]},ManifestContrôleurConstellation=async({storage:n,type:r,params:g})=>{const _={type:r,...g},{cid:x,bytes:S}=await encode$8({value:_,codec,hasher}),E=x.toString(hashStringEncoding);return await n.put(E,S),E},ContrôleurConstellation=({write:n,nom:r,storage:g}={})=>async({orbitdb:_,identities:x,address:S})=>{n=n||_.identity.id,r=r||v4$3(),g=g||await ComposedStorage(await LRUStorage({size:1e3}),await IPFSBlockStorage({ipfs:_.ipfs,pin:!0}));const E=gestionnaireOrbiteGénéral.obtGestionnaireOrbite({orbite:_});let C,T,R;if(S){const ie=await g.get(S.replaceAll(`/${nomType}/`,"")),{value:fe}=await decode$6({bytes:ie,codec,hasher});({write:n,nom:r,adresseBdAccès:C}=fe),{bd:T,fOublier:R}=await E.ouvrirBdTypée({id:C,type:"set",schéma:schémaBdAccès,options:{sync:!0}})}else({bd:T,fOublier:R}=await E.ouvrirBdTypée({id:r,type:"set",schéma:schémaBdAccès,options:{AccessController:ContrôleurAccès({write:n,storage:g}),sync:!0}})),C=T.address,S=await ManifestContrôleurConstellation({storage:g,type:nomType,params:{write:n,nom:r,adresseBdAccès:C}}),S=pathJoin("/",nomType,S);const A=new eventsExports.EventEmitter,I=new GestionnaireAccès(_);I.on("misÀJour",()=>A.emit("misÀJour"));const D=await suivreBdAccès(T,async ie=>{ie=[{rôle:MODÉRATEUR,id:n},...ie],await I.ajouterÉléments(ie)}),N=async ie=>await I.estAutorisé(ie);return{type:nomType,address:S,adresseBdAccès:C,write:n,grant:async(ie,fe)=>{if(!rôles.includes(ie))throw new Error(`Erreur: Le rôle ${ie} n'existe pas.`);if(!I._rôles[ie].includes(fe))try{const xe={rôle:ie,id:fe};await T.add(xe)}catch(xe){const we=xe;throw we.toString().includes("not append entry")?new Error(`Erreur : Le rôle ${ie} ne peut pas être octroyé à ${fe}.`):we}},revoke:async(ie,fe)=>{throw new Error("C'est très difficile à implémenter...avez-vous des idées ?")},canAppend:async ie=>{const fe=await x.getIdentity(ie.identity);if(!fe)return!1;const{id:xe}=fe;return await x.verifyIdentity(fe)&&await N(xe)},close:async()=>{await D(),await R(),await I.fermer()},drop:async()=>{},suivreUtilisateursAutorisés:async ie=>{const fe=async()=>{const we=Object.keys(I._rôlesUtilisateurs[MODÉRATEUR]).map(H=>({idCompte:H,rôle:MODÉRATEUR})),G=we.map(H=>H.idCompte),J=Object.keys(I._rôlesUtilisateurs[MEMBRE]).map(H=>({idCompte:H,rôle:MEMBRE})).filter(H=>!G.includes(H.idCompte)),q=[...we,...J];await ie(q)};return I.on("misÀJour",fe),await fe(),async()=>{I.off("misÀJour",fe)}},suivreIdsOrbiteAutoriséesÉcriture:async ie=>{const fe=async()=>{await ie([...I._rôles.MEMBRE,...I._rôles.MODÉRATEUR])};return I.on("misÀJour",fe),await fe(),async()=>{I.off("misÀJour",fe)}},gestRôles:I,estAutorisé:N,estUnMembre:async ie=>await I.estUnMembre(ie),estUnModérateur:async ie=>await I.estUnModérateur(ie),bd:T}};ContrôleurConstellation.type=nomType;const enregistrerContrôleurs=()=>{registerSet(),useAccessController(ContrôleurConstellation),useAccessController(ContrôleurAccès)};function bind(n,r){return function(){return n.apply(r,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(n=>r=>{const g=toString$2.call(r);return n[g]||(n[g]=g.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=n=>(n=n.toLowerCase(),r=>kindOf(r)===n),typeOfTest=n=>r=>typeof r===n,{isArray:isArray$2}=Array,isUndefined=typeOfTest("undefined");function isBuffer$2(n){return n!==null&&!isUndefined(n)&&n.constructor!==null&&!isUndefined(n.constructor)&&isFunction$1(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const isArrayBuffer$2=kindOfTest("ArrayBuffer");function isArrayBufferView(n){let r;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?r=ArrayBuffer.isView(n):r=n&&n.buffer&&isArrayBuffer$2(n.buffer),r}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject$2=n=>n!==null&&typeof n=="object",isBoolean=n=>n===!0||n===!1,isPlainObject$2=n=>{if(kindOf(n)!=="object")return!1;const r=getPrototypeOf(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=n=>isObject$2(n)&&isFunction$1(n.pipe),isFormData=n=>{let r;return n&&(typeof FormData=="function"&&n instanceof FormData||isFunction$1(n.append)&&((r=kindOf(n))==="formdata"||r==="object"&&isFunction$1(n.toString)&&n.toString()==="[object FormData]"))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach$1(n,r,{allOwnKeys:g=!1}={}){if(n===null||typeof n>"u")return;let _,x;if(typeof n!="object"&&(n=[n]),isArray$2(n))for(_=0,x=n.length;_<x;_++)r.call(null,n[_],_,n);else{const S=g?Object.getOwnPropertyNames(n):Object.keys(n),E=S.length;let C;for(_=0;_<E;_++)C=S[_],r.call(null,n[C],C,n)}}function findKey(n,r){r=r.toLowerCase();const g=Object.keys(n);let _=g.length,x;for(;_-- >0;)if(x=g[_],r===x.toLowerCase())return x;return null}const _global=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global$1,isContextDefined=n=>!isUndefined(n)&&n!==_global;function merge$1(){const{caseless:n}=isContextDefined(this)&&this||{},r={},g=(_,x)=>{const S=n&&findKey(r,x)||x;isPlainObject$2(r[S])&&isPlainObject$2(_)?r[S]=merge$1(r[S],_):isPlainObject$2(_)?r[S]=merge$1({},_):isArray$2(_)?r[S]=_.slice():r[S]=_};for(let _=0,x=arguments.length;_<x;_++)arguments[_]&&forEach$1(arguments[_],g);return r}const extend=(n,r,g,{allOwnKeys:_}={})=>(forEach$1(r,(x,S)=>{g&&isFunction$1(x)?n[S]=bind(x,g):n[S]=x},{allOwnKeys:_}),n),stripBOM=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),inherits=(n,r,g,_)=>{n.prototype=Object.create(r.prototype,_),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:r.prototype}),g&&Object.assign(n.prototype,g)},toFlatObject=(n,r,g,_)=>{let x,S,E;const C={};if(r=r||{},n==null)return r;do{for(x=Object.getOwnPropertyNames(n),S=x.length;S-- >0;)E=x[S],(!_||_(E,n,r))&&!C[E]&&(r[E]=n[E],C[E]=!0);n=g!==!1&&getPrototypeOf(n)}while(n&&(!g||g(n,r))&&n!==Object.prototype);return r},endsWith=(n,r,g)=>{n=String(n),(g===void 0||g>n.length)&&(g=n.length),g-=r.length;const _=n.indexOf(r,g);return _!==-1&&_===g},toArray=n=>{if(!n)return null;if(isArray$2(n))return n;let r=n.length;if(!isNumber(r))return null;const g=new Array(r);for(;r-- >0;)g[r]=n[r];return g},isTypedArray$2=(n=>r=>n&&r instanceof n)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(n,r)=>{const _=(n&&n[Symbol.iterator]).call(n);let x;for(;(x=_.next())&&!x.done;){const S=x.value;r.call(n,S[0],S[1])}},matchAll=(n,r)=>{let g;const _=[];for(;(g=n.exec(r))!==null;)_.push(g);return _},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(g,_,x){return _.toUpperCase()+x}),hasOwnProperty$9=(({hasOwnProperty:n})=>(r,g)=>n.call(r,g))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(n,r)=>{const g=Object.getOwnPropertyDescriptors(n),_={};forEach$1(g,(x,S)=>{let E;(E=r(x,S,n))!==!1&&(_[S]=E||x)}),Object.defineProperties(n,_)},freezeMethods=n=>{reduceDescriptors(n,(r,g)=>{if(isFunction$1(n)&&["arguments","caller","callee"].indexOf(g)!==-1)return!1;const _=n[g];if(isFunction$1(_)){if(r.enumerable=!1,"writable"in r){r.writable=!1;return}r.set||(r.set=()=>{throw Error("Can not rewrite read-only method '"+g+"'")})}})},toObjectSet=(n,r)=>{const g={},_=x=>{x.forEach(S=>{g[S]=!0})};return isArray$2(n)?_(n):_(String(n).split(r)),g},noop$4=()=>{},toFiniteNumber=(n,r)=>n!=null&&Number.isFinite(n=+n)?n:r,ALPHA$1="abcdefghijklmnopqrstuvwxyz",DIGIT="0123456789",ALPHABET={DIGIT,ALPHA:ALPHA$1,ALPHA_DIGIT:ALPHA$1+ALPHA$1.toUpperCase()+DIGIT},generateString=(n=16,r=ALPHABET.ALPHA_DIGIT)=>{let g="";const{length:_}=r;for(;n--;)g+=r[Math.random()*_|0];return g};function isSpecCompliantForm(n){return!!(n&&isFunction$1(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const toJSONObject=n=>{const r=new Array(10),g=(_,x)=>{if(isObject$2(_)){if(r.indexOf(_)>=0)return;if(!("toJSON"in _)){r[x]=_;const S=isArray$2(_)?[]:{};return forEach$1(_,(E,C)=>{const T=g(E,x+1);!isUndefined(T)&&(S[C]=T)}),r[x]=void 0,S}}return _};return g(n,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=n=>n&&(isObject$2(n)||isFunction$1(n))&&isFunction$1(n.then)&&isFunction$1(n.catch),_setImmediate=((n,r)=>n?setImmediate:r?((g,_)=>(_global.addEventListener("message",({source:x,data:S})=>{x===_global&&S===g&&_.length&&_.shift()()},!1),x=>{_.push(x),_global.postMessage(g,"*")}))(`axios@${Math.random()}`,[]):g=>setTimeout(g))(typeof setImmediate=="function",isFunction$1(_global.postMessage)),asap=typeof queueMicrotask<"u"?queueMicrotask.bind(_global):typeof process$1<"u"&&process$1.nextTick||_setImmediate,utils$7={isArray:isArray$2,isArrayBuffer:isArrayBuffer$2,isBuffer:isBuffer$2,isFormData,isArrayBufferView,isString:isString$1,isNumber,isBoolean,isObject:isObject$2,isPlainObject:isPlainObject$2,isReadableStream,isRequest,isResponse,isHeaders,isUndefined,isDate,isFile,isBlob,isRegExp,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray:isTypedArray$2,isFileList,forEach:forEach$1,merge:merge$1,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$9,hasOwnProp:hasOwnProperty$9,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$4,toFiniteNumber,findKey,global:_global,isContextDefined,ALPHABET,generateString,isSpecCompliantForm,toJSONObject,isAsyncFn,isThenable,setImmediate:_setImmediate,asap};function AxiosError(n,r,g,_,x){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",r&&(this.code=r),g&&(this.config=g),_&&(this.request=_),x&&(this.response=x,this.status=x.status?x.status:null)}utils$7.inherits(AxiosError,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$7.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{descriptors[n]={value:n}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(n,r,g,_,x,S)=>{const E=Object.create(prototype$1);return utils$7.toFlatObject(n,E,function(T){return T!==Error.prototype},C=>C!=="isAxiosError"),AxiosError.call(E,n.message,r,g,_,x),E.cause=n,E.name=n.name,S&&Object.assign(E,S),E};const httpAdapter=null;function isVisitable(n){return utils$7.isPlainObject(n)||utils$7.isArray(n)}function removeBrackets(n){return utils$7.endsWith(n,"[]")?n.slice(0,-2):n}function renderKey(n,r,g){return n?n.concat(r).map(function(x,S){return x=removeBrackets(x),!g&&S?"["+x+"]":x}).join(g?".":""):r}function isFlatArray(n){return utils$7.isArray(n)&&!n.some(isVisitable)}const predicates=utils$7.toFlatObject(utils$7,{},null,function(r){return/^is[A-Z]/.test(r)});function toFormData(n,r,g){if(!utils$7.isObject(n))throw new TypeError("target must be an object");r=r||new FormData,g=utils$7.toFlatObject(g,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,O){return!utils$7.isUndefined(O[M])});const _=g.metaTokens,x=g.visitor||A,S=g.dots,E=g.indexes,T=(g.Blob||typeof Blob<"u"&&Blob)&&utils$7.isSpecCompliantForm(r);if(!utils$7.isFunction(x))throw new TypeError("visitor must be a function");function R(N){if(N===null)return"";if(utils$7.isDate(N))return N.toISOString();if(!T&&utils$7.isBlob(N))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils$7.isArrayBuffer(N)||utils$7.isTypedArray(N)?T&&typeof Blob=="function"?new Blob([N]):Buffer$1.from(N):N}function A(N,M,O){let L=N;if(N&&!O&&typeof N=="object"){if(utils$7.endsWith(M,"{}"))M=_?M:M.slice(0,-2),N=JSON.stringify(N);else if(utils$7.isArray(N)&&isFlatArray(N)||(utils$7.isFileList(N)||utils$7.endsWith(M,"[]"))&&(L=utils$7.toArray(N)))return M=removeBrackets(M),L.forEach(function(U,j){!(utils$7.isUndefined(U)||U===null)&&r.append(E===!0?renderKey([M],j,S):E===null?M:M+"[]",R(U))}),!1}return isVisitable(N)?!0:(r.append(renderKey(O,M,S),R(N)),!1)}const I=[],B=Object.assign(predicates,{defaultVisitor:A,convertValue:R,isVisitable});function D(N,M){if(!utils$7.isUndefined(N)){if(I.indexOf(N)!==-1)throw Error("Circular reference detected in "+M.join("."));I.push(N),utils$7.forEach(N,function(L,F){(!(utils$7.isUndefined(L)||L===null)&&x.call(r,L,utils$7.isString(F)?F.trim():F,M,B))===!0&&D(L,M?M.concat(F):[F])}),I.pop()}}if(!utils$7.isObject(n))throw new TypeError("data must be an object");return D(n),r}function encode$7(n){const r={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(_){return r[_]})}function AxiosURLSearchParams(n,r){this._pairs=[],n&&toFormData(n,this,r)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function(r,g){this._pairs.push([r,g])};prototype.toString=function(r){const g=r?function(_){return r.call(this,_,encode$7)}:encode$7;return this._pairs.map(function(x){return g(x[0])+"="+g(x[1])},"").join("&")};function encode$6(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(n,r,g){if(!r)return n;const _=g&&g.encode||encode$6;utils$7.isFunction(g)&&(g={serialize:g});const x=g&&g.serialize;let S;if(x?S=x(r,g):S=utils$7.isURLSearchParams(r)?r.toString():new AxiosURLSearchParams(r,g).toString(_),S){const E=n.indexOf("#");E!==-1&&(n=n.slice(0,E)),n+=(n.indexOf("?")===-1?"?":"&")+S}return n}class InterceptorManager{constructor(){this.handlers=[]}use(r,g,_){return this.handlers.push({fulfilled:r,rejected:g,synchronous:_?_.synchronous:!1,runWhen:_?_.runWhen:null}),this.handlers.length-1}eject(r){this.handlers[r]&&(this.handlers[r]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(r){utils$7.forEach(this.handlers,function(_){_!==null&&r(_)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=typeof FormData<"u"?FormData:null,Blob$1=typeof Blob<"u"?Blob:null,platform$3={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv=typeof window<"u"&&typeof document<"u",_navigator=typeof navigator=="object"&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",origin=hasBrowserEnv&&window.location.href||"http://localhost",utils$6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv,hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin},Symbol.toStringTag,{value:"Module"})),platform$2={...utils$6,...platform$3};function toURLEncodedForm(n,r){return toFormData(n,new platform$2.classes.URLSearchParams,Object.assign({visitor:function(g,_,x,S){return platform$2.isNode&&utils$7.isBuffer(g)?(this.append(_,g.toString("base64")),!1):S.defaultVisitor.apply(this,arguments)}},r))}function parsePropPath(n){return utils$7.matchAll(/\w+|\[(\w*)]/g,n).map(r=>r[0]==="[]"?"":r[1]||r[0])}function arrayToObject(n){const r={},g=Object.keys(n);let _;const x=g.length;let S;for(_=0;_<x;_++)S=g[_],r[S]=n[S];return r}function formDataToJSON(n){function r(g,_,x,S){let E=g[S++];if(E==="__proto__")return!0;const C=Number.isFinite(+E),T=S>=g.length;return E=!E&&utils$7.isArray(x)?x.length:E,T?(utils$7.hasOwnProp(x,E)?x[E]=[x[E],_]:x[E]=_,!C):((!x[E]||!utils$7.isObject(x[E]))&&(x[E]=[]),r(g,_,x[E],S)&&utils$7.isArray(x[E])&&(x[E]=arrayToObject(x[E])),!C)}if(utils$7.isFormData(n)&&utils$7.isFunction(n.entries)){const g={};return utils$7.forEachEntry(n,(_,x)=>{r(parsePropPath(_),x,g,0)}),g}return null}function stringifySafely(n,r,g){if(utils$7.isString(n))try{return(r||JSON.parse)(n),utils$7.trim(n)}catch(_){if(_.name!=="SyntaxError")throw _}return(0,JSON.stringify)(n)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(r,g){const _=g.getContentType()||"",x=_.indexOf("application/json")>-1,S=utils$7.isObject(r);if(S&&utils$7.isHTMLForm(r)&&(r=new FormData(r)),utils$7.isFormData(r))return x?JSON.stringify(formDataToJSON(r)):r;if(utils$7.isArrayBuffer(r)||utils$7.isBuffer(r)||utils$7.isStream(r)||utils$7.isFile(r)||utils$7.isBlob(r)||utils$7.isReadableStream(r))return r;if(utils$7.isArrayBufferView(r))return r.buffer;if(utils$7.isURLSearchParams(r))return g.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),r.toString();let C;if(S){if(_.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(r,this.formSerializer).toString();if((C=utils$7.isFileList(r))||_.indexOf("multipart/form-data")>-1){const T=this.env&&this.env.FormData;return toFormData(C?{"files[]":r}:r,T&&new T,this.formSerializer)}}return S||x?(g.setContentType("application/json",!1),stringifySafely(r)):r}],transformResponse:[function(r){const g=this.transitional||defaults$1.transitional,_=g&&g.forcedJSONParsing,x=this.responseType==="json";if(utils$7.isResponse(r)||utils$7.isReadableStream(r))return r;if(r&&utils$7.isString(r)&&(_&&!this.responseType||x)){const E=!(g&&g.silentJSONParsing)&&x;try{return JSON.parse(r)}catch(C){if(E)throw C.name==="SyntaxError"?AxiosError.from(C,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):C}}return r}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform$2.classes.FormData,Blob:platform$2.classes.Blob},validateStatus:function(r){return r>=200&&r<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$7.forEach(["delete","get","head","post","put","patch"],n=>{defaults$1.headers[n]={}});const ignoreDuplicateOf=utils$7.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=n=>{const r={};let g,_,x;return n&&n.split(`
`).forEach(function(E){x=E.indexOf(":"),g=E.substring(0,x).trim().toLowerCase(),_=E.substring(x+1).trim(),!(!g||r[g]&&ignoreDuplicateOf[g])&&(g==="set-cookie"?r[g]?r[g].push(_):r[g]=[_]:r[g]=r[g]?r[g]+", "+_:_)}),r},$internals=Symbol("internals");function normalizeHeader(n){return n&&String(n).trim().toLowerCase()}function normalizeValue(n){return n===!1||n==null?n:utils$7.isArray(n)?n.map(normalizeValue):String(n)}function parseTokens(n){const r=Object.create(null),g=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let _;for(;_=g.exec(n);)r[_[1]]=_[2];return r}const isValidHeaderName=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function matchHeaderValue(n,r,g,_,x){if(utils$7.isFunction(_))return _.call(this,r,g);if(x&&(r=g),!!utils$7.isString(r)){if(utils$7.isString(_))return r.indexOf(_)!==-1;if(utils$7.isRegExp(_))return _.test(r)}}function formatHeader(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(r,g,_)=>g.toUpperCase()+_)}function buildAccessors(n,r){const g=utils$7.toCamelCase(" "+r);["get","set","has"].forEach(_=>{Object.defineProperty(n,_+g,{value:function(x,S,E){return this[_].call(this,r,x,S,E)},configurable:!0})})}class AxiosHeaders{constructor(r){r&&this.set(r)}set(r,g,_){const x=this;function S(C,T,R){const A=normalizeHeader(T);if(!A)throw new Error("header name must be a non-empty string");const I=utils$7.findKey(x,A);(!I||x[I]===void 0||R===!0||R===void 0&&x[I]!==!1)&&(x[I||T]=normalizeValue(C))}const E=(C,T)=>utils$7.forEach(C,(R,A)=>S(R,A,T));if(utils$7.isPlainObject(r)||r instanceof this.constructor)E(r,g);else if(utils$7.isString(r)&&(r=r.trim())&&!isValidHeaderName(r))E(parseHeaders(r),g);else if(utils$7.isHeaders(r))for(const[C,T]of r.entries())S(T,C,_);else r!=null&&S(g,r,_);return this}get(r,g){if(r=normalizeHeader(r),r){const _=utils$7.findKey(this,r);if(_){const x=this[_];if(!g)return x;if(g===!0)return parseTokens(x);if(utils$7.isFunction(g))return g.call(this,x,_);if(utils$7.isRegExp(g))return g.exec(x);throw new TypeError("parser must be boolean|regexp|function")}}}has(r,g){if(r=normalizeHeader(r),r){const _=utils$7.findKey(this,r);return!!(_&&this[_]!==void 0&&(!g||matchHeaderValue(this,this[_],_,g)))}return!1}delete(r,g){const _=this;let x=!1;function S(E){if(E=normalizeHeader(E),E){const C=utils$7.findKey(_,E);C&&(!g||matchHeaderValue(_,_[C],C,g))&&(delete _[C],x=!0)}}return utils$7.isArray(r)?r.forEach(S):S(r),x}clear(r){const g=Object.keys(this);let _=g.length,x=!1;for(;_--;){const S=g[_];(!r||matchHeaderValue(this,this[S],S,r,!0))&&(delete this[S],x=!0)}return x}normalize(r){const g=this,_={};return utils$7.forEach(this,(x,S)=>{const E=utils$7.findKey(_,S);if(E){g[E]=normalizeValue(x),delete g[S];return}const C=r?formatHeader(S):String(S).trim();C!==S&&delete g[S],g[C]=normalizeValue(x),_[C]=!0}),this}concat(...r){return this.constructor.concat(this,...r)}toJSON(r){const g=Object.create(null);return utils$7.forEach(this,(_,x)=>{_!=null&&_!==!1&&(g[x]=r&&utils$7.isArray(_)?_.join(", "):_)}),g}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([r,g])=>r+": "+g).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(r){return r instanceof this?r:new this(r)}static concat(r,...g){const _=new this(r);return g.forEach(x=>_.set(x)),_}static accessor(r){const _=(this[$internals]=this[$internals]={accessors:{}}).accessors,x=this.prototype;function S(E){const C=normalizeHeader(E);_[C]||(buildAccessors(x,E),_[C]=!0)}return utils$7.isArray(r)?r.forEach(S):S(r),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);utils$7.reduceDescriptors(AxiosHeaders.prototype,({value:n},r)=>{let g=r[0].toUpperCase()+r.slice(1);return{get:()=>n,set(_){this[g]=_}}});utils$7.freezeMethods(AxiosHeaders);function transformData(n,r){const g=this||defaults$1,_=r||g,x=AxiosHeaders.from(_.headers);let S=_.data;return utils$7.forEach(n,function(C){S=C.call(g,S,x.normalize(),r?r.status:void 0)}),x.normalize(),S}function isCancel(n){return!!(n&&n.__CANCEL__)}function CanceledError(n,r,g){AxiosError.call(this,n??"canceled",AxiosError.ERR_CANCELED,r,g),this.name="CanceledError"}utils$7.inherits(CanceledError,AxiosError,{__CANCEL__:!0});function settle(n,r,g){const _=g.config.validateStatus;!g.status||!_||_(g.status)?n(g):r(new AxiosError("Request failed with status code "+g.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(g.status/100)-4],g.config,g.request,g))}function parseProtocol(n){const r=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return r&&r[1]||""}function speedometer(n,r){n=n||10;const g=new Array(n),_=new Array(n);let x=0,S=0,E;return r=r!==void 0?r:1e3,function(T){const R=Date.now(),A=_[S];E||(E=R),g[x]=T,_[x]=R;let I=S,B=0;for(;I!==x;)B+=g[I++],I=I%n;if(x=(x+1)%n,x===S&&(S=(S+1)%n),R-E<r)return;const D=A&&R-A;return D?Math.round(B*1e3/D):void 0}}function throttle(n,r){let g=0,_=1e3/r,x,S;const E=(R,A=Date.now())=>{g=A,x=null,S&&(clearTimeout(S),S=null),n.apply(null,R)};return[(...R)=>{const A=Date.now(),I=A-g;I>=_?E(R,A):(x=R,S||(S=setTimeout(()=>{S=null,E(x)},_-I)))},()=>x&&E(x)]}const progressEventReducer=(n,r,g=3)=>{let _=0;const x=speedometer(50,250);return throttle(S=>{const E=S.loaded,C=S.lengthComputable?S.total:void 0,T=E-_,R=x(T),A=E<=C;_=E;const I={loaded:E,total:C,progress:C?E/C:void 0,bytes:T,rate:R||void 0,estimated:R&&C&&A?(C-E)/R:void 0,event:S,lengthComputable:C!=null,[r?"download":"upload"]:!0};n(I)},g)},progressEventDecorator=(n,r)=>{const g=n!=null;return[_=>r[0]({lengthComputable:g,total:n,loaded:_}),r[1]]},asyncDecorator=n=>(...r)=>utils$7.asap(()=>n(...r)),isURLSameOrigin=platform$2.hasStandardBrowserEnv?((n,r)=>g=>(g=new URL(g,platform$2.origin),n.protocol===g.protocol&&n.host===g.host&&(r||n.port===g.port)))(new URL(platform$2.origin),platform$2.navigator&&/(msie|trident)/i.test(platform$2.navigator.userAgent)):()=>!0,cookies=platform$2.hasStandardBrowserEnv?{write(n,r,g,_,x,S){const E=[n+"="+encodeURIComponent(r)];utils$7.isNumber(g)&&E.push("expires="+new Date(g).toGMTString()),utils$7.isString(_)&&E.push("path="+_),utils$7.isString(x)&&E.push("domain="+x),S===!0&&E.push("secure"),document.cookie=E.join("; ")},read(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function isAbsoluteURL(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function combineURLs(n,r){return r?n.replace(/\/?\/$/,"")+"/"+r.replace(/^\/+/,""):n}function buildFullPath(n,r){return n&&!isAbsoluteURL(r)?combineURLs(n,r):r}const headersToObject=n=>n instanceof AxiosHeaders?{...n}:n;function mergeConfig(n,r){r=r||{};const g={};function _(R,A,I,B){return utils$7.isPlainObject(R)&&utils$7.isPlainObject(A)?utils$7.merge.call({caseless:B},R,A):utils$7.isPlainObject(A)?utils$7.merge({},A):utils$7.isArray(A)?A.slice():A}function x(R,A,I,B){if(utils$7.isUndefined(A)){if(!utils$7.isUndefined(R))return _(void 0,R,I,B)}else return _(R,A,I,B)}function S(R,A){if(!utils$7.isUndefined(A))return _(void 0,A)}function E(R,A){if(utils$7.isUndefined(A)){if(!utils$7.isUndefined(R))return _(void 0,R)}else return _(void 0,A)}function C(R,A,I){if(I in r)return _(R,A);if(I in n)return _(void 0,R)}const T={url:S,method:S,data:S,baseURL:E,transformRequest:E,transformResponse:E,paramsSerializer:E,timeout:E,timeoutMessage:E,withCredentials:E,withXSRFToken:E,adapter:E,responseType:E,xsrfCookieName:E,xsrfHeaderName:E,onUploadProgress:E,onDownloadProgress:E,decompress:E,maxContentLength:E,maxBodyLength:E,beforeRedirect:E,transport:E,httpAgent:E,httpsAgent:E,cancelToken:E,socketPath:E,responseEncoding:E,validateStatus:C,headers:(R,A,I)=>x(headersToObject(R),headersToObject(A),I,!0)};return utils$7.forEach(Object.keys(Object.assign({},n,r)),function(A){const I=T[A]||x,B=I(n[A],r[A],A);utils$7.isUndefined(B)&&I!==C||(g[A]=B)}),g}const resolveConfig=n=>{const r=mergeConfig({},n);let{data:g,withXSRFToken:_,xsrfHeaderName:x,xsrfCookieName:S,headers:E,auth:C}=r;r.headers=E=AxiosHeaders.from(E),r.url=buildURL(buildFullPath(r.baseURL,r.url),n.params,n.paramsSerializer),C&&E.set("Authorization","Basic "+btoa((C.username||"")+":"+(C.password?unescape(encodeURIComponent(C.password)):"")));let T;if(utils$7.isFormData(g)){if(platform$2.hasStandardBrowserEnv||platform$2.hasStandardBrowserWebWorkerEnv)E.setContentType(void 0);else if((T=E.getContentType())!==!1){const[R,...A]=T?T.split(";").map(I=>I.trim()).filter(Boolean):[];E.setContentType([R||"multipart/form-data",...A].join("; "))}}if(platform$2.hasStandardBrowserEnv&&(_&&utils$7.isFunction(_)&&(_=_(r)),_||_!==!1&&isURLSameOrigin(r.url))){const R=x&&S&&cookies.read(S);R&&E.set(x,R)}return r},isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(n){return new Promise(function(g,_){const x=resolveConfig(n);let S=x.data;const E=AxiosHeaders.from(x.headers).normalize();let{responseType:C,onUploadProgress:T,onDownloadProgress:R}=x,A,I,B,D,N;function M(){D&&D(),N&&N(),x.cancelToken&&x.cancelToken.unsubscribe(A),x.signal&&x.signal.removeEventListener("abort",A)}let O=new XMLHttpRequest;O.open(x.method.toUpperCase(),x.url,!0),O.timeout=x.timeout;function L(){if(!O)return;const U=AxiosHeaders.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),z={data:!C||C==="text"||C==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:U,config:n,request:O};settle(function(X){g(X),M()},function(X){_(X),M()},z),O=null}"onloadend"in O?O.onloadend=L:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(L)},O.onabort=function(){O&&(_(new AxiosError("Request aborted",AxiosError.ECONNABORTED,n,O)),O=null)},O.onerror=function(){_(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n,O)),O=null},O.ontimeout=function(){let j=x.timeout?"timeout of "+x.timeout+"ms exceeded":"timeout exceeded";const z=x.transitional||transitionalDefaults;x.timeoutErrorMessage&&(j=x.timeoutErrorMessage),_(new AxiosError(j,z.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,n,O)),O=null},S===void 0&&E.setContentType(null),"setRequestHeader"in O&&utils$7.forEach(E.toJSON(),function(j,z){O.setRequestHeader(z,j)}),utils$7.isUndefined(x.withCredentials)||(O.withCredentials=!!x.withCredentials),C&&C!=="json"&&(O.responseType=x.responseType),R&&([B,N]=progressEventReducer(R,!0),O.addEventListener("progress",B)),T&&O.upload&&([I,D]=progressEventReducer(T),O.upload.addEventListener("progress",I),O.upload.addEventListener("loadend",D)),(x.cancelToken||x.signal)&&(A=U=>{O&&(_(!U||U.type?new CanceledError(null,n,O):U),O.abort(),O=null)},x.cancelToken&&x.cancelToken.subscribe(A),x.signal&&(x.signal.aborted?A():x.signal.addEventListener("abort",A)));const F=parseProtocol(x.url);if(F&&platform$2.protocols.indexOf(F)===-1){_(new AxiosError("Unsupported protocol "+F+":",AxiosError.ERR_BAD_REQUEST,n));return}O.send(S||null)})},composeSignals=(n,r)=>{const{length:g}=n=n?n.filter(Boolean):[];if(r||g){let _=new AbortController,x;const S=function(R){if(!x){x=!0,C();const A=R instanceof Error?R:this.reason;_.abort(A instanceof AxiosError?A:new CanceledError(A instanceof Error?A.message:A))}};let E=r&&setTimeout(()=>{E=null,S(new AxiosError(`timeout ${r} of ms exceeded`,AxiosError.ETIMEDOUT))},r);const C=()=>{n&&(E&&clearTimeout(E),E=null,n.forEach(R=>{R.unsubscribe?R.unsubscribe(S):R.removeEventListener("abort",S)}),n=null)};n.forEach(R=>R.addEventListener("abort",S));const{signal:T}=_;return T.unsubscribe=()=>utils$7.asap(C),T}},streamChunk=function*(n,r){let g=n.byteLength;if(g<r){yield n;return}let _=0,x;for(;_<g;)x=_+r,yield n.slice(_,x),_=x},readBytes=async function*(n,r){for await(const g of readStream(n))yield*streamChunk(g,r)},readStream=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const r=n.getReader();try{for(;;){const{done:g,value:_}=await r.read();if(g)break;yield _}}finally{await r.cancel()}},trackStream=(n,r,g,_)=>{const x=readBytes(n,r);let S=0,E,C=T=>{E||(E=!0,_&&_(T))};return new ReadableStream({async pull(T){try{const{done:R,value:A}=await x.next();if(R){C(),T.close();return}let I=A.byteLength;if(g){let B=S+=I;g(B)}T.enqueue(new Uint8Array(A))}catch(R){throw C(R),R}},cancel(T){return C(T),x.return()}},{highWaterMark:2})},isFetchSupported=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",isReadableStreamSupported=isFetchSupported&&typeof ReadableStream=="function",encodeText=isFetchSupported&&(typeof TextEncoder=="function"?(n=>r=>n.encode(r))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),test=(n,...r)=>{try{return!!n(...r)}catch{return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let n=!1;const r=new Request(platform$2.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!r}),DEFAULT_CHUNK_SIZE$1=64*1024,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$7.isReadableStream(new Response("").body)),resolvers$2={stream:supportsResponseStream&&(n=>n.body)};isFetchSupported&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(r=>{!resolvers$2[r]&&(resolvers$2[r]=utils$7.isFunction(n[r])?g=>g[r]():(g,_)=>{throw new AxiosError(`Response type '${r}' is not supported`,AxiosError.ERR_NOT_SUPPORT,_)})})})(new Response);const getBodyLength=async n=>{if(n==null)return 0;if(utils$7.isBlob(n))return n.size;if(utils$7.isSpecCompliantForm(n))return(await new Request(platform$2.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(utils$7.isArrayBufferView(n)||utils$7.isArrayBuffer(n))return n.byteLength;if(utils$7.isURLSearchParams(n)&&(n=n+""),utils$7.isString(n))return(await encodeText(n)).byteLength},resolveBodyLength=async(n,r)=>{const g=utils$7.toFiniteNumber(n.getContentLength());return g??getBodyLength(r)},fetchAdapter=isFetchSupported&&(async n=>{let{url:r,method:g,data:_,signal:x,cancelToken:S,timeout:E,onDownloadProgress:C,onUploadProgress:T,responseType:R,headers:A,withCredentials:I="same-origin",fetchOptions:B}=resolveConfig(n);R=R?(R+"").toLowerCase():"text";let D=composeSignals([x,S&&S.toAbortSignal()],E),N;const M=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let O;try{if(T&&supportsRequestStream&&g!=="get"&&g!=="head"&&(O=await resolveBodyLength(A,_))!==0){let z=new Request(r,{method:"POST",body:_,duplex:"half"}),W;if(utils$7.isFormData(_)&&(W=z.headers.get("content-type"))&&A.setContentType(W),z.body){const[X,ie]=progressEventDecorator(O,progressEventReducer(asyncDecorator(T)));_=trackStream(z.body,DEFAULT_CHUNK_SIZE$1,X,ie)}}utils$7.isString(I)||(I=I?"include":"omit");const L="credentials"in Request.prototype;N=new Request(r,{...B,signal:D,method:g.toUpperCase(),headers:A.normalize().toJSON(),body:_,duplex:"half",credentials:L?I:void 0});let F=await fetch(N);const U=supportsResponseStream&&(R==="stream"||R==="response");if(supportsResponseStream&&(C||U&&M)){const z={};["status","statusText","headers"].forEach(fe=>{z[fe]=F[fe]});const W=utils$7.toFiniteNumber(F.headers.get("content-length")),[X,ie]=C&&progressEventDecorator(W,progressEventReducer(asyncDecorator(C),!0))||[];F=new Response(trackStream(F.body,DEFAULT_CHUNK_SIZE$1,X,()=>{ie&&ie(),M&&M()}),z)}R=R||"text";let j=await resolvers$2[utils$7.findKey(resolvers$2,R)||"text"](F,n);return!U&&M&&M(),await new Promise((z,W)=>{settle(z,W,{data:j,headers:AxiosHeaders.from(F.headers),status:F.status,statusText:F.statusText,config:n,request:N})})}catch(L){throw M&&M(),L&&L.name==="TypeError"&&/fetch/i.test(L.message)?Object.assign(new AxiosError("Network Error",AxiosError.ERR_NETWORK,n,N),{cause:L.cause||L}):AxiosError.from(L,L&&L.code,n,N)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$7.forEach(knownAdapters,(n,r)=>{if(n){try{Object.defineProperty(n,"name",{value:r})}catch{}Object.defineProperty(n,"adapterName",{value:r})}});const renderReason=n=>`- ${n}`,isResolvedHandle=n=>utils$7.isFunction(n)||n===null||n===!1,adapters={getAdapter:n=>{n=utils$7.isArray(n)?n:[n];const{length:r}=n;let g,_;const x={};for(let S=0;S<r;S++){g=n[S];let E;if(_=g,!isResolvedHandle(g)&&(_=knownAdapters[(E=String(g)).toLowerCase()],_===void 0))throw new AxiosError(`Unknown adapter '${E}'`);if(_)break;x[E||"#"+S]=_}if(!_){const S=Object.entries(x).map(([C,T])=>`adapter ${C} `+(T===!1?"is not supported by the environment":"is not available in the build"));let E=r?S.length>1?`since :
`+S.map(renderReason).join(`
`):" "+renderReason(S[0]):"as no adapter specified";throw new AxiosError("There is no suitable adapter to dispatch the request "+E,"ERR_NOT_SUPPORT")}return _},adapters:knownAdapters};function throwIfCancellationRequested(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new CanceledError(null,n)}function dispatchRequest(n){return throwIfCancellationRequested(n),n.headers=AxiosHeaders.from(n.headers),n.data=transformData.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(n.adapter||defaults$1.adapter)(n).then(function(_){return throwIfCancellationRequested(n),_.data=transformData.call(n,n.transformResponse,_),_.headers=AxiosHeaders.from(_.headers),_},function(_){return isCancel(_)||(throwIfCancellationRequested(n),_&&_.response&&(_.response.data=transformData.call(n,n.transformResponse,_.response),_.response.headers=AxiosHeaders.from(_.response.headers))),Promise.reject(_)})}const VERSION="1.7.9",validators$2={};["object","boolean","number","function","string","symbol"].forEach((n,r)=>{validators$2[n]=function(_){return typeof _===n||"a"+(r<1?"n ":" ")+n}});const deprecatedWarnings={};validators$2.transitional=function(r,g,_){function x(S,E){return"[Axios v"+VERSION+"] Transitional option '"+S+"'"+E+(_?". "+_:"")}return(S,E,C)=>{if(r===!1)throw new AxiosError(x(E," has been removed"+(g?" in "+g:"")),AxiosError.ERR_DEPRECATED);return g&&!deprecatedWarnings[E]&&(deprecatedWarnings[E]=!0,console.warn(x(E," has been deprecated since v"+g+" and will be removed in the near future"))),r?r(S,E,C):!0}};validators$2.spelling=function(r){return(g,_)=>(console.warn(`${_} is likely a misspelling of ${r}`),!0)};function assertOptions(n,r,g){if(typeof n!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const _=Object.keys(n);let x=_.length;for(;x-- >0;){const S=_[x],E=r[S];if(E){const C=n[S],T=C===void 0||E(C,S,n);if(T!==!0)throw new AxiosError("option "+S+" must be "+T,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(g!==!0)throw new AxiosError("Unknown option "+S,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$2},validators$1=validator.validators;class Axios{constructor(r){this.defaults=r,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(r,g){try{return await this._request(r,g)}catch(_){if(_ instanceof Error){let x={};Error.captureStackTrace?Error.captureStackTrace(x):x=new Error;const S=x.stack?x.stack.replace(/^.+\n/,""):"";try{_.stack?S&&!String(_.stack).endsWith(S.replace(/^.+\n.+\n/,""))&&(_.stack+=`
`+S):_.stack=S}catch{}}throw _}}_request(r,g){typeof r=="string"?(g=g||{},g.url=r):g=r||{},g=mergeConfig(this.defaults,g);const{transitional:_,paramsSerializer:x,headers:S}=g;_!==void 0&&validator.assertOptions(_,{silentJSONParsing:validators$1.transitional(validators$1.boolean),forcedJSONParsing:validators$1.transitional(validators$1.boolean),clarifyTimeoutError:validators$1.transitional(validators$1.boolean)},!1),x!=null&&(utils$7.isFunction(x)?g.paramsSerializer={serialize:x}:validator.assertOptions(x,{encode:validators$1.function,serialize:validators$1.function},!0)),validator.assertOptions(g,{baseUrl:validators$1.spelling("baseURL"),withXsrfToken:validators$1.spelling("withXSRFToken")},!0),g.method=(g.method||this.defaults.method||"get").toLowerCase();let E=S&&utils$7.merge(S.common,S[g.method]);S&&utils$7.forEach(["delete","get","head","post","put","patch","common"],N=>{delete S[N]}),g.headers=AxiosHeaders.concat(E,S);const C=[];let T=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(g)===!1||(T=T&&M.synchronous,C.unshift(M.fulfilled,M.rejected))});const R=[];this.interceptors.response.forEach(function(M){R.push(M.fulfilled,M.rejected)});let A,I=0,B;if(!T){const N=[dispatchRequest.bind(this),void 0];for(N.unshift.apply(N,C),N.push.apply(N,R),B=N.length,A=Promise.resolve(g);I<B;)A=A.then(N[I++],N[I++]);return A}B=C.length;let D=g;for(I=0;I<B;){const N=C[I++],M=C[I++];try{D=N(D)}catch(O){M.call(this,O);break}}try{A=dispatchRequest.call(this,D)}catch(N){return Promise.reject(N)}for(I=0,B=R.length;I<B;)A=A.then(R[I++],R[I++]);return A}getUri(r){r=mergeConfig(this.defaults,r);const g=buildFullPath(r.baseURL,r.url);return buildURL(g,r.params,r.paramsSerializer)}}utils$7.forEach(["delete","get","head","options"],function(r){Axios.prototype[r]=function(g,_){return this.request(mergeConfig(_||{},{method:r,url:g,data:(_||{}).data}))}});utils$7.forEach(["post","put","patch"],function(r){function g(_){return function(S,E,C){return this.request(mergeConfig(C||{},{method:r,headers:_?{"Content-Type":"multipart/form-data"}:{},url:S,data:E}))}}Axios.prototype[r]=g(),Axios.prototype[r+"Form"]=g(!0)});class CancelToken{constructor(r){if(typeof r!="function")throw new TypeError("executor must be a function.");let g;this.promise=new Promise(function(S){g=S});const _=this;this.promise.then(x=>{if(!_._listeners)return;let S=_._listeners.length;for(;S-- >0;)_._listeners[S](x);_._listeners=null}),this.promise.then=x=>{let S;const E=new Promise(C=>{_.subscribe(C),S=C}).then(x);return E.cancel=function(){_.unsubscribe(S)},E},r(function(S,E,C){_.reason||(_.reason=new CanceledError(S,E,C),g(_.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]}unsubscribe(r){if(!this._listeners)return;const g=this._listeners.indexOf(r);g!==-1&&this._listeners.splice(g,1)}toAbortSignal(){const r=new AbortController,g=_=>{r.abort(_)};return this.subscribe(g),r.signal.unsubscribe=()=>this.unsubscribe(g),r.signal}static source(){let r;return{token:new CancelToken(function(x){r=x}),cancel:r}}}function spread(n){return function(g){return n.apply(null,g)}}function isAxiosError(n){return utils$7.isObject(n)&&n.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([n,r])=>{HttpStatusCode[r]=n});function createInstance$1(n){const r=new Axios(n),g=bind(Axios.prototype.request,r);return utils$7.extend(g,Axios.prototype,r,{allOwnKeys:!0}),utils$7.extend(g,r,null,{allOwnKeys:!0}),g.create=function(x){return createInstance$1(mergeConfig(n,x))},g}const axios=createInstance$1(defaults$1);axios.Axios=Axios;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken;axios.isCancel=isCancel;axios.VERSION=VERSION;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function(r){return Promise.all(r)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders;axios.formToJSON=n=>formDataToJSON(utils$7.isHTMLForm(n)?new FormData(n):n);axios.getAdapter=adapters.getAdapter;axios.HttpStatusCode=HttpStatusCode;axios.default=axios;/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XLSX={};XLSX.version="0.19.1";var current_codepage=1200,$cptable,VALID_ANSI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],CS2CP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},set_ansi=function(n){VALID_ANSI.indexOf(n)!=-1&&(CS2CP[0]=n)};function reset_ansi(){set_ansi(1252)}var set_cp=function(n){current_codepage=n,set_ansi(n)};function reset_cp(){set_cp(1200),reset_ansi()}function char_codes(n){for(var r=[],g=0,_=n.length;g<_;++g)r[g]=n.charCodeAt(g);return r}function utf16leread(n){for(var r=[],g=0;g<n.length>>1;++g)r[g]=String.fromCharCode(n.charCodeAt(2*g)+(n.charCodeAt(2*g+1)<<8));return r.join("")}function utf16beread(n){for(var r=[],g=0;g<n.length>>1;++g)r[g]=String.fromCharCode(n.charCodeAt(2*g+1)+(n.charCodeAt(2*g)<<8));return r.join("")}var debom=function(n){var r=n.charCodeAt(0),g=n.charCodeAt(1);return r==255&&g==254?utf16leread(n.slice(2)):r==254&&g==255?utf16beread(n.slice(2)):r==65279?n.slice(1):n},_getchar=function(r){return String.fromCharCode(r)},_getansi=function(r){return String.fromCharCode(r)},DENSE=null,Base64_map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Base64_encode(n){for(var r="",g=0,_=0,x=0,S=0,E=0,C=0,T=0,R=0;R<n.length;)g=n.charCodeAt(R++),S=g>>2,_=n.charCodeAt(R++),E=(g&3)<<4|_>>4,x=n.charCodeAt(R++),C=(_&15)<<2|x>>6,T=x&63,isNaN(_)?C=T=64:isNaN(x)&&(T=64),r+=Base64_map.charAt(S)+Base64_map.charAt(E)+Base64_map.charAt(C)+Base64_map.charAt(T);return r}function Base64_encode_pass(n){for(var r="",g=0,_=0,x=0,S=0,E=0,C=0,T=0,R=0;R<n.length;)g=n.charCodeAt(R++),g>255&&(g=95),S=g>>2,_=n.charCodeAt(R++),_>255&&(_=95),E=(g&3)<<4|_>>4,x=n.charCodeAt(R++),x>255&&(x=95),C=(_&15)<<2|x>>6,T=x&63,isNaN(_)?C=T=64:isNaN(x)&&(T=64),r+=Base64_map.charAt(S)+Base64_map.charAt(E)+Base64_map.charAt(C)+Base64_map.charAt(T);return r}function Base64_decode(n){var r="",g=0,_=0,x=0,S=0,E=0,C=0,T=0;n=n.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var R=0;R<n.length;)S=Base64_map.indexOf(n.charAt(R++)),E=Base64_map.indexOf(n.charAt(R++)),g=S<<2|E>>4,r+=String.fromCharCode(g),C=Base64_map.indexOf(n.charAt(R++)),_=(E&15)<<4|C>>2,C!==64&&(r+=String.fromCharCode(_)),T=Base64_map.indexOf(n.charAt(R++)),x=(C&3)<<6|T,T!==64&&(r+=String.fromCharCode(x));return r}var has_buf=function(){return typeof Buffer$1<"u"&&typeof process$1<"u"&&typeof process$1.versions<"u"&&!!process$1.versions.node}(),Buffer_from=function(){if(typeof Buffer$1<"u"){var n=!Buffer$1.from;if(!n)try{Buffer$1.from("foo","utf8")}catch{n=!0}return n?function(r,g){return g?new Buffer$1(r,g):new Buffer$1(r)}:Buffer$1.from.bind(Buffer$1)}return function(){}}(),buf_utf16le=function(){if(typeof Buffer$1>"u")return!1;var n=Buffer_from([65,0]);if(!n)return!1;var r=n.toString("utf16le");return r.length==1}();function new_raw_buf(n){return has_buf?Buffer$1.alloc?Buffer$1.alloc(n):new Buffer$1(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function new_unsafe_buf(n){return has_buf?Buffer$1.allocUnsafe?Buffer$1.allocUnsafe(n):new Buffer$1(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var s2a=function(r){return has_buf?Buffer_from(r,"binary"):r.split("").map(function(g){return g.charCodeAt(0)&255})};function s2ab(n){if(typeof ArrayBuffer>"u")return s2a(n);for(var r=new ArrayBuffer(n.length),g=new Uint8Array(r),_=0;_!=n.length;++_)g[_]=n.charCodeAt(_)&255;return r}function a2s(n){if(Array.isArray(n))return n.map(function(_){return String.fromCharCode(_)}).join("");for(var r=[],g=0;g<n.length;++g)r[g]=String.fromCharCode(n[g]);return r.join("")}function a2u(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}function ab2a(n){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(n instanceof ArrayBuffer)return ab2a(new Uint8Array(n));for(var r=new Array(n.length),g=0;g<n.length;++g)r[g]=n[g];return r}var bconcat=has_buf?function(n){return Buffer$1.concat(n.map(function(r){return Buffer$1.isBuffer(r)?r:Buffer_from(r)}))}:function(n){if(typeof Uint8Array<"u"){var r=0,g=0;for(r=0;r<n.length;++r)g+=n[r].length;var _=new Uint8Array(g),x=0;for(r=0,g=0;r<n.length;g+=x,++r)x=n[r].length,n[r]instanceof Uint8Array?_.set(n[r],g):typeof n[r]=="string"?_.set(new Uint8Array(s2a(n[r])),g):_.set(new Uint8Array(n[r]),g);return _}return[].concat.apply([],n.map(function(S){return Array.isArray(S)?S:[].slice.call(S)}))};function utf8decode(n){for(var r=[],g=0,_=n.length+250,x=new_raw_buf(n.length+255),S=0;S<n.length;++S){var E=n.charCodeAt(S);if(E<128)x[g++]=E;else if(E<2048)x[g++]=192|E>>6&31,x[g++]=128|E&63;else if(E>=55296&&E<57344){E=(E&1023)+64;var C=n.charCodeAt(++S)&1023;x[g++]=240|E>>8&7,x[g++]=128|E>>2&63,x[g++]=128|C>>6&15|(E&3)<<4,x[g++]=128|C&63}else x[g++]=224|E>>12&15,x[g++]=128|E>>6&63,x[g++]=128|E&63;g>_&&(r.push(x.slice(0,g)),g=0,x=new_raw_buf(65535),_=65530)}return r.push(x.slice(0,g)),bconcat(r)}var chr0=/\u0000/g,chr1=/[\u0001-\u0006]/g;function _strrev(n){for(var r="",g=n.length-1;g>=0;)r+=n.charAt(g--);return r}function pad0(n,r){var g=""+n;return g.length>=r?g:fill("0",r-g.length)+g}function pad_(n,r){var g=""+n;return g.length>=r?g:fill(" ",r-g.length)+g}function rpad_(n,r){var g=""+n;return g.length>=r?g:g+fill(" ",r-g.length)}function pad0r1(n,r){var g=""+Math.round(n);return g.length>=r?g:fill("0",r-g.length)+g}function pad0r2(n,r){var g=""+n;return g.length>=r?g:fill("0",r-g.length)+g}var p2_32=Math.pow(2,32);function pad0r(n,r){if(n>p2_32||n<-p2_32)return pad0r1(n,r);var g=Math.round(n);return pad0r2(g,r)}function SSF_isgeneral(n,r){return r=r||0,n.length>=7+r&&(n.charCodeAt(r)|32)===103&&(n.charCodeAt(r+1)|32)===101&&(n.charCodeAt(r+2)|32)===110&&(n.charCodeAt(r+3)|32)===101&&(n.charCodeAt(r+4)|32)===114&&(n.charCodeAt(r+5)|32)===97&&(n.charCodeAt(r+6)|32)===108}var days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SSF_init_table(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',n}var table_fmt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},SSF_default_map={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SSF_default_str={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function SSF_frac(n,r,g){for(var _=n<0?-1:1,x=n*_,S=0,E=1,C=0,T=1,R=0,A=0,I=Math.floor(x);R<r&&(I=Math.floor(x),C=I*E+S,A=I*R+T,!(x-I<5e-8));)x=1/(x-I),S=E,E=C,T=R,R=A;if(A>r&&(R>r?(A=T,C=S):(A=R,C=E)),!g)return[0,_*C,A];var B=Math.floor(_*C/A);return[B,_*C-B*A,A]}function SSF_parse_date_code(n,r,g){if(n>2958465||n<0)return null;var _=n|0,x=Math.floor(86400*(n-_)),S=0,E=[],C={D:_,T:x,u:86400*(n-_)-x,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(C.u)<1e-6&&(C.u=0),r&&r.date1904&&(_+=1462),C.u>.9999&&(C.u=0,++x==86400&&(C.T=x=0,++_,++C.D)),_===60)E=g?[1317,10,29]:[1900,2,29],S=3;else if(_===0)E=g?[1317,8,29]:[1900,1,0],S=6;else{_>60&&--_;var T=new Date(1900,0,1);T.setDate(T.getDate()+_-1),E=[T.getFullYear(),T.getMonth()+1,T.getDate()],S=T.getDay(),_<60&&(S=(S+6)%7),g&&(S=SSF_fix_hijri(T,E))}return C.y=E[0],C.m=E[1],C.d=E[2],C.S=x%60,x=Math.floor(x/60),C.M=x%60,x=Math.floor(x/60),C.H=x,C.q=S,C}var SSFbasedate=new Date(1899,11,31,0,0,0),SSFdnthresh=SSFbasedate.getTime(),SSFbase1904=new Date(1900,2,1,0,0,0);function datenum_local(n,r){var g=n.getTime();return r?g-=1461*24*60*60*1e3:n>=SSFbase1904&&(g+=24*60*60*1e3),(g-(SSFdnthresh+(n.getTimezoneOffset()-SSFbasedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function SSF_strip_decimal(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function SSF_normalize_exp(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SSF_small_exp(n){var r=n<0?12:11,g=SSF_strip_decimal(n.toFixed(12));return g.length<=r||(g=n.toPrecision(10),g.length<=r)?g:n.toExponential(5)}function SSF_large_exp(n){var r=SSF_strip_decimal(n.toFixed(11));return r.length>(n<0?12:11)||r==="0"||r==="-0"?n.toPrecision(6):r}function SSF_general_num(n){var r=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),g;return r>=-4&&r<=-1?g=n.toPrecision(10+r):Math.abs(r)<=9?g=SSF_small_exp(n):r===10?g=n.toFixed(10).substr(0,12):g=SSF_large_exp(n),SSF_strip_decimal(SSF_normalize_exp(g.toUpperCase()))}function SSF_general(n,r){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):SSF_general_num(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return SSF_format(14,datenum_local(n,r&&r.date1904),r)}throw new Error("unsupported value in General format: "+n)}function SSF_fix_hijri(n,r){r[0]-=581;var g=n.getDay();return n<60&&(g=(g+6)%7),g}function SSF_write_date(n,r,g,_){var x="",S=0,E=0,C=g.y,T,R=0;switch(n){case 98:C=g.y+543;case 121:switch(r.length){case 1:case 2:T=C%100,R=2;break;default:T=C%1e4,R=4;break}break;case 109:switch(r.length){case 1:case 2:T=g.m,R=r.length;break;case 3:return months[g.m-1][1];case 5:return months[g.m-1][0];default:return months[g.m-1][2]}break;case 100:switch(r.length){case 1:case 2:T=g.d,R=r.length;break;case 3:return days[g.q][0];default:return days[g.q][1]}break;case 104:switch(r.length){case 1:case 2:T=1+(g.H+11)%12,R=r.length;break;default:throw"bad hour format: "+r}break;case 72:switch(r.length){case 1:case 2:T=g.H,R=r.length;break;default:throw"bad hour format: "+r}break;case 77:switch(r.length){case 1:case 2:T=g.M,R=r.length;break;default:throw"bad minute format: "+r}break;case 115:if(r!="s"&&r!="ss"&&r!=".0"&&r!=".00"&&r!=".000")throw"bad second format: "+r;return g.u===0&&(r=="s"||r=="ss")?pad0(g.S,r.length):(_>=2?E=_===3?1e3:100:E=_===1?10:1,S=Math.round(E*(g.S+g.u)),S>=60*E&&(S=0),r==="s"?S===0?"0":""+S/E:(x=pad0(S,2+_),r==="ss"?x.substr(0,2):"."+x.substr(2,r.length-1)));case 90:switch(r){case"[h]":case"[hh]":T=g.D*24+g.H;break;case"[m]":case"[mm]":T=(g.D*24+g.H)*60+g.M;break;case"[s]":case"[ss]":T=((g.D*24+g.H)*60+g.M)*60+Math.round(g.S+g.u);break;default:throw"bad abstime format: "+r}R=r.length===3?1:2;break;case 101:T=C,R=1;break}var A=R>0?pad0(T,R):"";return A}function commaify(n){var r=3;if(n.length<=r)return n;for(var g=n.length%r,_=n.substr(0,g);g!=n.length;g+=r)_+=(_.length>0?",":"")+n.substr(g,r);return _}var pct1=/%/g;function write_num_pct(n,r,g){var _=r.replace(pct1,""),x=r.length-_.length;return write_num(n,_,g*Math.pow(10,2*x))+fill("%",x)}function write_num_cm(n,r,g){for(var _=r.length-1;r.charCodeAt(_-1)===44;)--_;return write_num(n,r.substr(0,_),g/Math.pow(10,3*(r.length-_)))}function write_num_exp(n,r){var g,_=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+write_num_exp(n,-r);var x=n.indexOf(".");x===-1&&(x=n.indexOf("E"));var S=Math.floor(Math.log(r)*Math.LOG10E)%x;if(S<0&&(S+=x),g=(r/Math.pow(10,S)).toPrecision(_+1+(x+S)%x),g.indexOf("e")===-1){var E=Math.floor(Math.log(r)*Math.LOG10E);for(g.indexOf(".")===-1?g=g.charAt(0)+"."+g.substr(1)+"E+"+(E-g.length+S):g+="E+"+(E-S);g.substr(0,2)==="0.";)g=g.charAt(0)+g.substr(2,x)+"."+g.substr(2+x),g=g.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");g=g.replace(/\+-/,"-")}g=g.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(C,T,R,A){return T+R+A.substr(0,(x+S)%x)+"."+A.substr(S)+"E"})}else g=r.toExponential(_);return n.match(/E\+00$/)&&g.match(/e[+-]\d$/)&&(g=g.substr(0,g.length-1)+"0"+g.charAt(g.length-1)),n.match(/E\-/)&&g.match(/e\+/)&&(g=g.replace(/e\+/,"e")),g.replace("e","E")}var frac1=/# (\?+)( ?)\/( ?)(\d+)/;function write_num_f1(n,r,g){var _=parseInt(n[4],10),x=Math.round(r*_),S=Math.floor(x/_),E=x-S*_,C=_;return g+(S===0?"":""+S)+" "+(E===0?fill(" ",n[1].length+1+n[4].length):pad_(E,n[1].length)+n[2]+"/"+n[3]+pad0(C,n[4].length))}function write_num_f2(n,r,g){return g+(r===0?"":""+r)+fill(" ",n[1].length+2+n[4].length)}var dec1=/^#*0*\.([0#]+)/,closeparen=/\).*[0#]/,phone$1=/\(###\) ###\\?-####/;function hashq(n){for(var r="",g,_=0;_!=n.length;++_)switch(g=n.charCodeAt(_)){case 35:break;case 63:r+=" ";break;case 48:r+="0";break;default:r+=String.fromCharCode(g)}return r}function rnd(n,r){var g=Math.pow(10,r);return""+Math.round(n*g)/g}function dec(n,r){var g=n-Math.floor(n),_=Math.pow(10,r);return r<(""+Math.round(g*_)).length?0:Math.round(g*_)}function carry(n,r){return r<(""+Math.round((n-Math.floor(n))*Math.pow(10,r))).length?1:0}function flr(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function write_num_flt(n,r,g){if(n.charCodeAt(0)===40&&!r.match(closeparen)){var _=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return g>=0?write_num_flt("n",_,g):"("+write_num_flt("n",_,-g)+")"}if(r.charCodeAt(r.length-1)===44)return write_num_cm(n,r,g);if(r.indexOf("%")!==-1)return write_num_pct(n,r,g);if(r.indexOf("E")!==-1)return write_num_exp(r,g);if(r.charCodeAt(0)===36)return"$"+write_num_flt(n,r.substr(r.charAt(1)==" "?2:1),g);var x,S,E,C,T=Math.abs(g),R=g<0?"-":"";if(r.match(/^00+$/))return R+pad0r(T,r.length);if(r.match(/^[#?]+$/))return x=pad0r(g,0),x==="0"&&(x=""),x.length>r.length?x:hashq(r.substr(0,r.length-x.length))+x;if(S=r.match(frac1))return write_num_f1(S,T,R);if(r.match(/^#+0+$/))return R+pad0r(T,r.length-r.indexOf("0"));if(S=r.match(dec1))return x=rnd(g,S[1].length).replace(/^([^\.]+)$/,"$1."+hashq(S[1])).replace(/\.$/,"."+hashq(S[1])).replace(/\.(\d*)$/,function(N,M){return"."+M+fill("0",hashq(S[1]).length-M.length)}),r.indexOf("0.")!==-1?x:x.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),S=r.match(/^(0*)\.(#*)$/))return R+rnd(T,S[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,S[1].length?"0.":".");if(S=r.match(/^#{1,3},##0(\.?)$/))return R+commaify(pad0r(T,0));if(S=r.match(/^#,##0\.([#0]*0)$/))return g<0?"-"+write_num_flt(n,r,-g):commaify(""+(Math.floor(g)+carry(g,S[1].length)))+"."+pad0(dec(g,S[1].length),S[1].length);if(S=r.match(/^#,#*,#0/))return write_num_flt(n,r.replace(/^#,#*,/,""),g);if(S=r.match(/^([0#]+)(\\?-([0#]+))+$/))return x=_strrev(write_num_flt(n,r.replace(/[\\-]/g,""),g)),E=0,_strrev(_strrev(r.replace(/\\/g,"")).replace(/[0#]/g,function(N){return E<x.length?x.charAt(E++):N==="0"?"0":""}));if(r.match(phone$1))return x=write_num_flt(n,"##########",g),"("+x.substr(0,3)+") "+x.substr(3,3)+"-"+x.substr(6);var A="";if(S=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return E=Math.min(S[4].length,7),C=SSF_frac(T,Math.pow(10,E)-1,!1),x=""+R,A=write_num("n",S[1],C[1]),A.charAt(A.length-1)==" "&&(A=A.substr(0,A.length-1)+"0"),x+=A+S[2]+"/"+S[3],A=rpad_(C[2],E),A.length<S[4].length&&(A=hashq(S[4].substr(S[4].length-A.length))+A),x+=A,x;if(S=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return E=Math.min(Math.max(S[1].length,S[4].length),7),C=SSF_frac(T,Math.pow(10,E)-1,!0),R+(C[0]||(C[1]?"":"0"))+" "+(C[1]?pad_(C[1],E)+S[2]+"/"+S[3]+rpad_(C[2],E):fill(" ",2*E+1+S[2].length+S[3].length));if(S=r.match(/^[#0?]+$/))return x=pad0r(g,0),r.length<=x.length?x:hashq(r.substr(0,r.length-x.length))+x;if(S=r.match(/^([#0?]+)\.([#0]+)$/)){x=""+g.toFixed(Math.min(S[2].length,10)).replace(/([^0])0+$/,"$1"),E=x.indexOf(".");var I=r.indexOf(".")-E,B=r.length-x.length-I;return hashq(r.substr(0,I)+x+r.substr(r.length-B))}if(S=r.match(/^00,000\.([#0]*0)$/))return E=dec(g,S[1].length),g<0?"-"+write_num_flt(n,r,-g):commaify(flr(g)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?pad0(0,3-N.length):"")+N})+"."+pad0(E,S[1].length);switch(r){case"###,##0.00":return write_num_flt(n,"#,##0.00",g);case"###,###":case"##,###":case"#,###":var D=commaify(pad0r(T,0));return D!=="0"?R+D:"";case"###,###.00":return write_num_flt(n,"###,##0.00",g).replace(/^0\./,".");case"#,###.00":return write_num_flt(n,"#,##0.00",g).replace(/^0\./,".")}throw new Error("unsupported format |"+r+"|")}function write_num_cm2(n,r,g){for(var _=r.length-1;r.charCodeAt(_-1)===44;)--_;return write_num(n,r.substr(0,_),g/Math.pow(10,3*(r.length-_)))}function write_num_pct2(n,r,g){var _=r.replace(pct1,""),x=r.length-_.length;return write_num(n,_,g*Math.pow(10,2*x))+fill("%",x)}function write_num_exp2(n,r){var g,_=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(r==0)return"0.0E+0";if(r<0)return"-"+write_num_exp2(n,-r);var x=n.indexOf(".");x===-1&&(x=n.indexOf("E"));var S=Math.floor(Math.log(r)*Math.LOG10E)%x;if(S<0&&(S+=x),g=(r/Math.pow(10,S)).toPrecision(_+1+(x+S)%x),!g.match(/[Ee]/)){var E=Math.floor(Math.log(r)*Math.LOG10E);g.indexOf(".")===-1?g=g.charAt(0)+"."+g.substr(1)+"E+"+(E-g.length+S):g+="E+"+(E-S),g=g.replace(/\+-/,"-")}g=g.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(C,T,R,A){return T+R+A.substr(0,(x+S)%x)+"."+A.substr(S)+"E"})}else g=r.toExponential(_);return n.match(/E\+00$/)&&g.match(/e[+-]\d$/)&&(g=g.substr(0,g.length-1)+"0"+g.charAt(g.length-1)),n.match(/E\-/)&&g.match(/e\+/)&&(g=g.replace(/e\+/,"e")),g.replace("e","E")}function write_num_int(n,r,g){if(n.charCodeAt(0)===40&&!r.match(closeparen)){var _=r.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return g>=0?write_num_int("n",_,g):"("+write_num_int("n",_,-g)+")"}if(r.charCodeAt(r.length-1)===44)return write_num_cm2(n,r,g);if(r.indexOf("%")!==-1)return write_num_pct2(n,r,g);if(r.indexOf("E")!==-1)return write_num_exp2(r,g);if(r.charCodeAt(0)===36)return"$"+write_num_int(n,r.substr(r.charAt(1)==" "?2:1),g);var x,S,E,C,T=Math.abs(g),R=g<0?"-":"";if(r.match(/^00+$/))return R+pad0(T,r.length);if(r.match(/^[#?]+$/))return x=""+g,g===0&&(x=""),x.length>r.length?x:hashq(r.substr(0,r.length-x.length))+x;if(S=r.match(frac1))return write_num_f2(S,T,R);if(r.match(/^#+0+$/))return R+pad0(T,r.length-r.indexOf("0"));if(S=r.match(dec1))return x=(""+g).replace(/^([^\.]+)$/,"$1."+hashq(S[1])).replace(/\.$/,"."+hashq(S[1])),x=x.replace(/\.(\d*)$/,function(N,M){return"."+M+fill("0",hashq(S[1]).length-M.length)}),r.indexOf("0.")!==-1?x:x.replace(/^0\./,".");if(r=r.replace(/^#+([0.])/,"$1"),S=r.match(/^(0*)\.(#*)$/))return R+(""+T).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,S[1].length?"0.":".");if(S=r.match(/^#{1,3},##0(\.?)$/))return R+commaify(""+T);if(S=r.match(/^#,##0\.([#0]*0)$/))return g<0?"-"+write_num_int(n,r,-g):commaify(""+g)+"."+fill("0",S[1].length);if(S=r.match(/^#,#*,#0/))return write_num_int(n,r.replace(/^#,#*,/,""),g);if(S=r.match(/^([0#]+)(\\?-([0#]+))+$/))return x=_strrev(write_num_int(n,r.replace(/[\\-]/g,""),g)),E=0,_strrev(_strrev(r.replace(/\\/g,"")).replace(/[0#]/g,function(N){return E<x.length?x.charAt(E++):N==="0"?"0":""}));if(r.match(phone$1))return x=write_num_int(n,"##########",g),"("+x.substr(0,3)+") "+x.substr(3,3)+"-"+x.substr(6);var A="";if(S=r.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return E=Math.min(S[4].length,7),C=SSF_frac(T,Math.pow(10,E)-1,!1),x=""+R,A=write_num("n",S[1],C[1]),A.charAt(A.length-1)==" "&&(A=A.substr(0,A.length-1)+"0"),x+=A+S[2]+"/"+S[3],A=rpad_(C[2],E),A.length<S[4].length&&(A=hashq(S[4].substr(S[4].length-A.length))+A),x+=A,x;if(S=r.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return E=Math.min(Math.max(S[1].length,S[4].length),7),C=SSF_frac(T,Math.pow(10,E)-1,!0),R+(C[0]||(C[1]?"":"0"))+" "+(C[1]?pad_(C[1],E)+S[2]+"/"+S[3]+rpad_(C[2],E):fill(" ",2*E+1+S[2].length+S[3].length));if(S=r.match(/^[#0?]+$/))return x=""+g,r.length<=x.length?x:hashq(r.substr(0,r.length-x.length))+x;if(S=r.match(/^([#0]+)\.([#0]+)$/)){x=""+g.toFixed(Math.min(S[2].length,10)).replace(/([^0])0+$/,"$1"),E=x.indexOf(".");var I=r.indexOf(".")-E,B=r.length-x.length-I;return hashq(r.substr(0,I)+x+r.substr(r.length-B))}if(S=r.match(/^00,000\.([#0]*0)$/))return g<0?"-"+write_num_int(n,r,-g):commaify(""+g).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(N){return"00,"+(N.length<3?pad0(0,3-N.length):"")+N})+"."+pad0(0,S[1].length);switch(r){case"###,###":case"##,###":case"#,###":var D=commaify(""+T);return D!=="0"?R+D:"";default:if(r.match(/\.[0#?]*$/))return write_num_int(n,r.slice(0,r.lastIndexOf(".")),g)+hashq(r.slice(r.lastIndexOf(".")))}throw new Error("unsupported format |"+r+"|")}function write_num(n,r,g){return(g|0)===g?write_num_int(n,r,g):write_num_flt(n,r,g)}function SSF_split_fmt(n){for(var r=[],g=!1,_=0,x=0;_<n.length;++_)switch(n.charCodeAt(_)){case 34:g=!g;break;case 95:case 42:case 92:++_;break;case 59:r[r.length]=n.substr(x,_-x),x=_+1}if(r[r.length]=n.substr(x),g===!0)throw new Error("Format |"+n+"| unterminated string ");return r}var SSF_abstime=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fmt_is_date(n){for(var r=0,g="",_="";r<n.length;)switch(g=n.charAt(r)){case"G":SSF_isgeneral(n,r)&&(r+=6),r++;break;case'"':for(;n.charCodeAt(++r)!==34&&r<n.length;);++r;break;case"\\":r+=2;break;case"_":r+=2;break;case"@":++r;break;case"B":case"b":if(n.charAt(r+1)==="1"||n.charAt(r+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(n.substr(r,3).toUpperCase()==="A/P"||n.substr(r,5).toUpperCase()==="AM/PM"||n.substr(r,5).toUpperCase()==="上午/下午")return!0;++r;break;case"[":for(_=g;n.charAt(r++)!=="]"&&r<n.length;)_+=n.charAt(r);if(_.match(SSF_abstime))return!0;break;case".":case"0":case"#":for(;r<n.length&&("0#?.,E+-%".indexOf(g=n.charAt(++r))>-1||g=="\\"&&n.charAt(r+1)=="-"&&"0#".indexOf(n.charAt(r+2))>-1););break;case"?":for(;n.charAt(++r)===g;);break;case"*":++r,(n.charAt(r)==" "||n.charAt(r)=="*")&&++r;break;case"(":case")":++r;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;r<n.length&&"0123456789".indexOf(n.charAt(++r))>-1;);break;case" ":++r;break;default:++r;break}return!1}function eval_fmt(n,r,g,_){for(var x=[],S="",E=0,C="",T="t",R,A,I,B="H";E<n.length;)switch(C=n.charAt(E)){case"G":if(!SSF_isgeneral(n,E))throw new Error("unrecognized character "+C+" in "+n);x[x.length]={t:"G",v:"General"},E+=7;break;case'"':for(S="";(I=n.charCodeAt(++E))!==34&&E<n.length;)S+=String.fromCharCode(I);x[x.length]={t:"t",v:S},++E;break;case"\\":var D=n.charAt(++E),N=D==="("||D===")"?D:"t";x[x.length]={t:N,v:D},++E;break;case"_":x[x.length]={t:"t",v:" "},E+=2;break;case"@":x[x.length]={t:"T",v:r},++E;break;case"B":case"b":if(n.charAt(E+1)==="1"||n.charAt(E+1)==="2"){if(R==null&&(R=SSF_parse_date_code(r,g,n.charAt(E+1)==="2"),R==null))return"";x[x.length]={t:"X",v:n.substr(E,2)},T=C,E+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":C=C.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(r<0||R==null&&(R=SSF_parse_date_code(r,g),R==null))return"";for(S=C;++E<n.length&&n.charAt(E).toLowerCase()===C;)S+=C;C==="m"&&T.toLowerCase()==="h"&&(C="M"),C==="h"&&(C=B),x[x.length]={t:C,v:S},T=C;break;case"A":case"a":case"上":var M={t:C,v:C};if(R==null&&(R=SSF_parse_date_code(r,g)),n.substr(E,3).toUpperCase()==="A/P"?(R!=null&&(M.v=R.H>=12?n.charAt(E+2):C),M.t="T",B="h",E+=3):n.substr(E,5).toUpperCase()==="AM/PM"?(R!=null&&(M.v=R.H>=12?"PM":"AM"),M.t="T",E+=5,B="h"):n.substr(E,5).toUpperCase()==="上午/下午"?(R!=null&&(M.v=R.H>=12?"下午":"上午"),M.t="T",E+=5,B="h"):(M.t="t",++E),R==null&&M.t==="T")return"";x[x.length]=M,T=C;break;case"[":for(S=C;n.charAt(E++)!=="]"&&E<n.length;)S+=n.charAt(E);if(S.slice(-1)!=="]")throw'unterminated "[" block: |'+S+"|";if(S.match(SSF_abstime)){if(R==null&&(R=SSF_parse_date_code(r,g),R==null))return"";x[x.length]={t:"Z",v:S.toLowerCase()},T=S.charAt(1)}else S.indexOf("$")>-1&&(S=(S.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(n)||(x[x.length]={t:"t",v:S}));break;case".":if(R!=null){for(S=C;++E<n.length&&(C=n.charAt(E))==="0";)S+=C;x[x.length]={t:"s",v:S};break}case"0":case"#":for(S=C;++E<n.length&&"0#?.,E+-%".indexOf(C=n.charAt(E))>-1;)S+=C;x[x.length]={t:"n",v:S};break;case"?":for(S=C;n.charAt(++E)===C;)S+=C;x[x.length]={t:C,v:S},T=C;break;case"*":++E,(n.charAt(E)==" "||n.charAt(E)=="*")&&++E;break;case"(":case")":x[x.length]={t:_===1?"t":C,v:C},++E;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(S=C;E<n.length&&"0123456789".indexOf(n.charAt(++E))>-1;)S+=n.charAt(E);x[x.length]={t:"D",v:S};break;case" ":x[x.length]={t:C,v:C},++E;break;case"$":x[x.length]={t:"t",v:"$"},++E;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(C)===-1)throw new Error("unrecognized character "+C+" in "+n);x[x.length]={t:"t",v:C},++E;break}var O=0,L=0,F;for(E=x.length-1,T="t";E>=0;--E)switch(x[E].t){case"h":case"H":x[E].t=B,T="h",O<1&&(O=1);break;case"s":(F=x[E].v.match(/\.0+$/))&&(L=Math.max(L,F[0].length-1)),O<3&&(O=3);case"d":case"y":case"M":case"e":T=x[E].t;break;case"m":T==="s"&&(x[E].t="M",O<2&&(O=2));break;case"X":break;case"Z":O<1&&x[E].v.match(/[Hh]/)&&(O=1),O<2&&x[E].v.match(/[Mm]/)&&(O=2),O<3&&x[E].v.match(/[Ss]/)&&(O=3)}switch(O){case 0:break;case 1:R.u>=.5&&(R.u=0,++R.S),R.S>=60&&(R.S=0,++R.M),R.M>=60&&(R.M=0,++R.H);break;case 2:R.u>=.5&&(R.u=0,++R.S),R.S>=60&&(R.S=0,++R.M);break}var U="",j;for(E=0;E<x.length;++E)switch(x[E].t){case"t":case"T":case" ":case"D":break;case"X":x[E].v="",x[E].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":x[E].v=SSF_write_date(x[E].t.charCodeAt(0),x[E].v,R,L),x[E].t="t";break;case"n":case"?":for(j=E+1;x[j]!=null&&((C=x[j].t)==="?"||C==="D"||(C===" "||C==="t")&&x[j+1]!=null&&(x[j+1].t==="?"||x[j+1].t==="t"&&x[j+1].v==="/")||x[E].t==="("&&(C===" "||C==="n"||C===")")||C==="t"&&(x[j].v==="/"||x[j].v===" "&&x[j+1]!=null&&x[j+1].t=="?"));)x[E].v+=x[j].v,x[j]={v:"",t:";"},++j;U+=x[E].v,E=j-1;break;case"G":x[E].t="t",x[E].v=SSF_general(r,g);break}var z="",W,X;if(U.length>0){U.charCodeAt(0)==40?(W=r<0&&U.charCodeAt(0)===45?-r:r,X=write_num("n",U,W)):(W=r<0&&_>1?-r:r,X=write_num("n",U,W),W<0&&x[0]&&x[0].t=="t"&&(X=X.substr(1),x[0].v="-"+x[0].v)),j=X.length-1;var ie=x.length;for(E=0;E<x.length;++E)if(x[E]!=null&&x[E].t!="t"&&x[E].v.indexOf(".")>-1){ie=E;break}var fe=x.length;if(ie===x.length&&X.indexOf("E")===-1){for(E=x.length-1;E>=0;--E)x[E]==null||"n?".indexOf(x[E].t)===-1||(j>=x[E].v.length-1?(j-=x[E].v.length,x[E].v=X.substr(j+1,x[E].v.length)):j<0?x[E].v="":(x[E].v=X.substr(0,j+1),j=-1),x[E].t="t",fe=E);j>=0&&fe<x.length&&(x[fe].v=X.substr(0,j+1)+x[fe].v)}else if(ie!==x.length&&X.indexOf("E")===-1){for(j=X.indexOf(".")-1,E=ie;E>=0;--E)if(!(x[E]==null||"n?".indexOf(x[E].t)===-1)){for(A=x[E].v.indexOf(".")>-1&&E===ie?x[E].v.indexOf(".")-1:x[E].v.length-1,z=x[E].v.substr(A+1);A>=0;--A)j>=0&&(x[E].v.charAt(A)==="0"||x[E].v.charAt(A)==="#")&&(z=X.charAt(j--)+z);x[E].v=z,x[E].t="t",fe=E}for(j>=0&&fe<x.length&&(x[fe].v=X.substr(0,j+1)+x[fe].v),j=X.indexOf(".")+1,E=ie;E<x.length;++E)if(!(x[E]==null||"n?(".indexOf(x[E].t)===-1&&E!==ie)){for(A=x[E].v.indexOf(".")>-1&&E===ie?x[E].v.indexOf(".")+1:0,z=x[E].v.substr(0,A);A<x[E].v.length;++A)j<X.length&&(z+=X.charAt(j++));x[E].v=z,x[E].t="t",fe=E}}}for(E=0;E<x.length;++E)x[E]!=null&&"n?".indexOf(x[E].t)>-1&&(W=_>1&&r<0&&E>0&&x[E-1].v==="-"?-r:r,x[E].v=write_num(x[E].t,x[E].v,W),x[E].t="t");var xe="";for(E=0;E!==x.length;++E)x[E]!=null&&(xe+=x[E].v);return xe}var cfregex2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function chkcond(n,r){if(r==null)return!1;var g=parseFloat(r[2]);switch(r[1]){case"=":if(n==g)return!0;break;case">":if(n>g)return!0;break;case"<":if(n<g)return!0;break;case"<>":if(n!=g)return!0;break;case">=":if(n>=g)return!0;break;case"<=":if(n<=g)return!0;break}return!1}function choose_fmt(n,r){var g=SSF_split_fmt(n),_=g.length,x=g[_-1].indexOf("@");if(_<4&&x>-1&&--_,g.length>4)throw new Error("cannot find right format for |"+g.join("|")+"|");if(typeof r!="number")return[4,g.length===4||x>-1?g[g.length-1]:"@"];switch(g.length){case 1:g=x>-1?["General","General","General",g[0]]:[g[0],g[0],g[0],"@"];break;case 2:g=x>-1?[g[0],g[0],g[0],g[1]]:[g[0],g[1],g[0],"@"];break;case 3:g=x>-1?[g[0],g[1],g[0],g[2]]:[g[0],g[1],g[2],"@"];break}var S=r>0?g[0]:r<0?g[1]:g[2];if(g[0].indexOf("[")===-1&&g[1].indexOf("[")===-1)return[_,S];if(g[0].match(/\[[=<>]/)!=null||g[1].match(/\[[=<>]/)!=null){var E=g[0].match(cfregex2),C=g[1].match(cfregex2);return chkcond(r,E)?[_,g[0]]:chkcond(r,C)?[_,g[1]]:[_,g[E!=null&&C!=null?2:1]]}return[_,S]}function SSF_format(n,r,g){g==null&&(g={});var _="";switch(typeof n){case"string":n=="m/d/yy"&&g.dateNF?_=g.dateNF:_=n;break;case"number":n==14&&g.dateNF?_=g.dateNF:_=(g.table!=null?g.table:table_fmt)[n],_==null&&(_=g.table&&g.table[SSF_default_map[n]]||table_fmt[SSF_default_map[n]]),_==null&&(_=SSF_default_str[n]||"General");break}if(SSF_isgeneral(_,0))return SSF_general(r,g);r instanceof Date&&(r=datenum_local(r,g.date1904));var x=choose_fmt(_,r);if(SSF_isgeneral(x[1]))return SSF_general(r,g);if(r===!0)r="TRUE";else if(r===!1)r="FALSE";else if(r===""||r==null)return"";return eval_fmt(x[1],r,g,x[0])}function SSF_load(n,r){if(typeof r!="number"){r=+r||-1;for(var g=0;g<392;++g){if(table_fmt[g]==null){r<0&&(r=g);continue}if(table_fmt[g]==n){r=g;break}}r<0&&(r=391)}return table_fmt[r]=n,r}function SSF_load_table(n){for(var r=0;r!=392;++r)n[r]!==void 0&&SSF_load(n[r],r)}function make_ssf(){table_fmt=SSF_init_table()}var SSFImplicit={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dateNFregex=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dateNF_regex(n){var r=typeof n=="number"?table_fmt[n]:n;return r=r.replace(dateNFregex,"(\\d+)"),new RegExp("^"+r+"$")}function dateNF_fix(n,r,g){var _=-1,x=-1,S=-1,E=-1,C=-1,T=-1;(r.match(dateNFregex)||[]).forEach(function(I,B){var D=parseInt(g[B+1],10);switch(I.toLowerCase().charAt(0)){case"y":_=D;break;case"d":S=D;break;case"h":E=D;break;case"s":T=D;break;case"m":E>=0?C=D:x=D;break}}),T>=0&&C==-1&&x>=0&&(C=x,x=-1);var R=(""+(_>=0?_:new Date().getFullYear())).slice(-4)+"-"+("00"+(x>=1?x:1)).slice(-2)+"-"+("00"+(S>=1?S:1)).slice(-2);R.length==7&&(R="0"+R),R.length==8&&(R="20"+R);var A=("00"+(E>=0?E:0)).slice(-2)+":"+("00"+(C>=0?C:0)).slice(-2)+":"+("00"+(T>=0?T:0)).slice(-2);return E==-1&&C==-1&&T==-1?R:_==-1&&x==-1&&S==-1?A:R+"T"+A}var bad_formats={"d.m":"d\\.m"};function SSF__load(n,r){return SSF_load(bad_formats[n]||n,r)}var CRC32=function(){var n={};n.version="1.2.0";function r(){for(var X=0,ie=new Array(256),fe=0;fe!=256;++fe)X=fe,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,X=X&1?-306674912^X>>>1:X>>>1,ie[fe]=X;return typeof Int32Array<"u"?new Int32Array(ie):ie}var g=r();function _(X){var ie=0,fe=0,xe=0,we=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(xe=0;xe!=256;++xe)we[xe]=X[xe];for(xe=0;xe!=256;++xe)for(fe=X[xe],ie=256+xe;ie<4096;ie+=256)fe=we[ie]=fe>>>8^X[fe&255];var G=[];for(xe=1;xe!=16;++xe)G[xe-1]=typeof Int32Array<"u"?we.subarray(xe*256,xe*256+256):we.slice(xe*256,xe*256+256);return G}var x=_(g),S=x[0],E=x[1],C=x[2],T=x[3],R=x[4],A=x[5],I=x[6],B=x[7],D=x[8],N=x[9],M=x[10],O=x[11],L=x[12],F=x[13],U=x[14];function j(X,ie){for(var fe=ie^-1,xe=0,we=X.length;xe<we;)fe=fe>>>8^g[(fe^X.charCodeAt(xe++))&255];return~fe}function z(X,ie){for(var fe=ie^-1,xe=X.length-15,we=0;we<xe;)fe=U[X[we++]^fe&255]^F[X[we++]^fe>>8&255]^L[X[we++]^fe>>16&255]^O[X[we++]^fe>>>24]^M[X[we++]]^N[X[we++]]^D[X[we++]]^B[X[we++]]^I[X[we++]]^A[X[we++]]^R[X[we++]]^T[X[we++]]^C[X[we++]]^E[X[we++]]^S[X[we++]]^g[X[we++]];for(xe+=15;we<xe;)fe=fe>>>8^g[(fe^X[we++])&255];return~fe}function W(X,ie){for(var fe=ie^-1,xe=0,we=X.length,G=0,J=0;xe<we;)G=X.charCodeAt(xe++),G<128?fe=fe>>>8^g[(fe^G)&255]:G<2048?(fe=fe>>>8^g[(fe^(192|G>>6&31))&255],fe=fe>>>8^g[(fe^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,J=X.charCodeAt(xe++)&1023,fe=fe>>>8^g[(fe^(240|G>>8&7))&255],fe=fe>>>8^g[(fe^(128|G>>2&63))&255],fe=fe>>>8^g[(fe^(128|J>>6&15|(G&3)<<4))&255],fe=fe>>>8^g[(fe^(128|J&63))&255]):(fe=fe>>>8^g[(fe^(224|G>>12&15))&255],fe=fe>>>8^g[(fe^(128|G>>6&63))&255],fe=fe>>>8^g[(fe^(128|G&63))&255]);return~fe}return n.table=g,n.bstr=j,n.buf=z,n.str=W,n}(),CFB=function(){var r={};r.version="1.2.2";function g(Xe,nt){for(var ot=Xe.split("/"),et=nt.split("/"),mt=0,vt=0,Ct=Math.min(ot.length,et.length);mt<Ct;++mt){if(vt=ot[mt].length-et[mt].length)return vt;if(ot[mt]!=et[mt])return ot[mt]<et[mt]?-1:1}return ot.length-et.length}function _(Xe){if(Xe.charAt(Xe.length-1)=="/")return Xe.slice(0,-1).indexOf("/")===-1?Xe:_(Xe.slice(0,-1));var nt=Xe.lastIndexOf("/");return nt===-1?Xe:Xe.slice(0,nt+1)}function x(Xe){if(Xe.charAt(Xe.length-1)=="/")return x(Xe.slice(0,-1));var nt=Xe.lastIndexOf("/");return nt===-1?Xe:Xe.slice(nt+1)}function S(Xe,nt){typeof nt=="string"&&(nt=new Date(nt));var ot=nt.getHours();ot=ot<<6|nt.getMinutes(),ot=ot<<5|nt.getSeconds()>>>1,Xe.write_shift(2,ot);var et=nt.getFullYear()-1980;et=et<<4|nt.getMonth()+1,et=et<<5|nt.getDate(),Xe.write_shift(2,et)}function E(Xe){var nt=Xe.read_shift(2)&65535,ot=Xe.read_shift(2)&65535,et=new Date,mt=ot&31;ot>>>=5;var vt=ot&15;ot>>>=4,et.setMilliseconds(0),et.setFullYear(ot+1980),et.setMonth(vt-1),et.setDate(mt);var Ct=nt&31;nt>>>=5;var Pt=nt&63;return nt>>>=6,et.setHours(nt),et.setMinutes(Pt),et.setSeconds(Ct<<1),et}function C(Xe){prep_blob(Xe,0);for(var nt={},ot=0;Xe.l<=Xe.length-4;){var et=Xe.read_shift(2),mt=Xe.read_shift(2),vt=Xe.l+mt,Ct={};switch(et){case 21589:ot=Xe.read_shift(1),ot&1&&(Ct.mtime=Xe.read_shift(4)),mt>5&&(ot&2&&(Ct.atime=Xe.read_shift(4)),ot&4&&(Ct.ctime=Xe.read_shift(4))),Ct.mtime&&(Ct.mt=new Date(Ct.mtime*1e3));break;case 1:{var Pt=Xe.read_shift(4),It=Xe.read_shift(4);Ct.usz=It*Math.pow(2,32)+Pt,Pt=Xe.read_shift(4),It=Xe.read_shift(4),Ct.csz=It*Math.pow(2,32)+Pt}break}Xe.l=vt,nt[et]=Ct}return nt}var T;function R(){return T||(T=_fs)}function A(Xe,nt){if(Xe[0]==80&&Xe[1]==75)return Jt(Xe,nt);if((Xe[0]|32)==109&&(Xe[1]|32)==105)return Fe(Xe,nt);if(Xe.length<512)throw new Error("CFB file size "+Xe.length+" < 512");var ot=3,et=512,mt=0,vt=0,Ct=0,Pt=0,It=0,Nt=[],Dt=Xe.slice(0,512);prep_blob(Dt,0);var Ht=I(Dt);switch(ot=Ht[0],ot){case 3:et=512;break;case 4:et=4096;break;case 0:if(Ht[1]==0)return Jt(Xe,nt);default:throw new Error("Major Version: Expected 3 or 4 saw "+ot)}et!==512&&(Dt=Xe.slice(0,et),prep_blob(Dt,28));var Zt=Xe.slice(0,et);B(Dt,ot);var nr=Dt.read_shift(4,"i");if(ot===3&&nr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+nr);Dt.l+=4,Ct=Dt.read_shift(4,"i"),Dt.l+=4,Dt.chk("00100000","Mini Stream Cutoff Size: "),Pt=Dt.read_shift(4,"i"),mt=Dt.read_shift(4,"i"),It=Dt.read_shift(4,"i"),vt=Dt.read_shift(4,"i");for(var Xt=-1,Qt=0;Qt<109&&(Xt=Dt.read_shift(4,"i"),!(Xt<0));++Qt)Nt[Qt]=Xt;var gr=D(Xe,et);O(It,vt,gr,et,Nt);var sn=F(gr,Ct,Nt,et);Ct<sn.length&&(sn[Ct].name="!Directory"),mt>0&&Pt!==J&&(sn[Pt].name="!MiniFAT"),sn[Nt[0]].name="!FAT",sn.fat_addrs=Nt,sn.ssz=et;var an={},on=[],gn=[],wn=[];U(Ct,sn,gr,on,mt,an,gn,Pt),N(gn,wn,on),on.shift();var _n={FileIndex:gn,FullPaths:wn};return nt&&nt.raw&&(_n.raw={header:Zt,sectors:gr}),_n}function I(Xe){if(Xe[Xe.l]==80&&Xe[Xe.l+1]==75)return[0,0];Xe.chk(q,"Header Signature: "),Xe.l+=16;var nt=Xe.read_shift(2,"u");return[Xe.read_shift(2,"u"),nt]}function B(Xe,nt){var ot=9;switch(Xe.l+=2,ot=Xe.read_shift(2)){case 9:if(nt!=3)throw new Error("Sector Shift: Expected 9 saw "+ot);break;case 12:if(nt!=4)throw new Error("Sector Shift: Expected 12 saw "+ot);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ot)}Xe.chk("0600","Mini Sector Shift: "),Xe.chk("000000000000","Reserved: ")}function D(Xe,nt){for(var ot=Math.ceil(Xe.length/nt)-1,et=[],mt=1;mt<ot;++mt)et[mt-1]=Xe.slice(mt*nt,(mt+1)*nt);return et[ot-1]=Xe.slice(ot*nt),et}function N(Xe,nt,ot){for(var et=0,mt=0,vt=0,Ct=0,Pt=0,It=ot.length,Nt=[],Dt=[];et<It;++et)Nt[et]=Dt[et]=et,nt[et]=ot[et];for(;Pt<Dt.length;++Pt)et=Dt[Pt],mt=Xe[et].L,vt=Xe[et].R,Ct=Xe[et].C,Nt[et]===et&&(mt!==-1&&Nt[mt]!==mt&&(Nt[et]=Nt[mt]),vt!==-1&&Nt[vt]!==vt&&(Nt[et]=Nt[vt])),Ct!==-1&&(Nt[Ct]=et),mt!==-1&&et!=Nt[et]&&(Nt[mt]=Nt[et],Dt.lastIndexOf(mt)<Pt&&Dt.push(mt)),vt!==-1&&et!=Nt[et]&&(Nt[vt]=Nt[et],Dt.lastIndexOf(vt)<Pt&&Dt.push(vt));for(et=1;et<It;++et)Nt[et]===et&&(vt!==-1&&Nt[vt]!==vt?Nt[et]=Nt[vt]:mt!==-1&&Nt[mt]!==mt&&(Nt[et]=Nt[mt]));for(et=1;et<It;++et)if(Xe[et].type!==0){if(Pt=et,Pt!=Nt[Pt])do Pt=Nt[Pt],nt[et]=nt[Pt]+"/"+nt[et];while(Pt!==0&&Nt[Pt]!==-1&&Pt!=Nt[Pt]);Nt[et]=-1}for(nt[0]+="/",et=1;et<It;++et)Xe[et].type!==2&&(nt[et]+="/")}function M(Xe,nt,ot){for(var et=Xe.start,mt=Xe.size,vt=[],Ct=et;ot&&mt>0&&Ct>=0;)vt.push(nt.slice(Ct*G,Ct*G+G)),mt-=G,Ct=__readInt32LE(ot,Ct*4);return vt.length===0?new_buf(0):bconcat(vt).slice(0,Xe.size)}function O(Xe,nt,ot,et,mt){var vt=J;if(Xe===J){if(nt!==0)throw new Error("DIFAT chain shorter than expected")}else if(Xe!==-1){var Ct=ot[Xe],Pt=(et>>>2)-1;if(!Ct)return;for(var It=0;It<Pt&&(vt=__readInt32LE(Ct,It*4))!==J;++It)mt.push(vt);nt>=1&&O(__readInt32LE(Ct,et-4),nt-1,ot,et,mt)}}function L(Xe,nt,ot,et,mt){var vt=[],Ct=[];mt||(mt=[]);var Pt=et-1,It=0,Nt=0;for(It=nt;It>=0;){mt[It]=!0,vt[vt.length]=It,Ct.push(Xe[It]);var Dt=ot[Math.floor(It*4/et)];if(Nt=It*4&Pt,et<4+Nt)throw new Error("FAT boundary crossed: "+It+" 4 "+et);if(!Xe[Dt])break;It=__readInt32LE(Xe[Dt],Nt)}return{nodes:vt,data:__toBuffer([Ct])}}function F(Xe,nt,ot,et){var mt=Xe.length,vt=[],Ct=[],Pt=[],It=[],Nt=et-1,Dt=0,Ht=0,Zt=0,nr=0;for(Dt=0;Dt<mt;++Dt)if(Pt=[],Zt=Dt+nt,Zt>=mt&&(Zt-=mt),!Ct[Zt]){It=[];var Xt=[];for(Ht=Zt;Ht>=0;){Xt[Ht]=!0,Ct[Ht]=!0,Pt[Pt.length]=Ht,It.push(Xe[Ht]);var Qt=ot[Math.floor(Ht*4/et)];if(nr=Ht*4&Nt,et<4+nr)throw new Error("FAT boundary crossed: "+Ht+" 4 "+et);if(!Xe[Qt]||(Ht=__readInt32LE(Xe[Qt],nr),Xt[Ht]))break}vt[Zt]={nodes:Pt,data:__toBuffer([It])}}return vt}function U(Xe,nt,ot,et,mt,vt,Ct,Pt){for(var It=0,Nt=et.length?2:0,Dt=nt[Xe].data,Ht=0,Zt=0,nr;Ht<Dt.length;Ht+=128){var Xt=Dt.slice(Ht,Ht+128);prep_blob(Xt,64),Zt=Xt.read_shift(2),nr=__utf16le(Xt,0,Zt-Nt),et.push(nr);var Qt={name:nr,type:Xt.read_shift(1),color:Xt.read_shift(1),L:Xt.read_shift(4,"i"),R:Xt.read_shift(4,"i"),C:Xt.read_shift(4,"i"),clsid:Xt.read_shift(16),state:Xt.read_shift(4,"i"),start:0,size:0},gr=Xt.read_shift(2)+Xt.read_shift(2)+Xt.read_shift(2)+Xt.read_shift(2);gr!==0&&(Qt.ct=j(Xt,Xt.l-8));var sn=Xt.read_shift(2)+Xt.read_shift(2)+Xt.read_shift(2)+Xt.read_shift(2);sn!==0&&(Qt.mt=j(Xt,Xt.l-8)),Qt.start=Xt.read_shift(4,"i"),Qt.size=Xt.read_shift(4,"i"),Qt.size<0&&Qt.start<0&&(Qt.size=Qt.type=0,Qt.start=J,Qt.name=""),Qt.type===5?(It=Qt.start,mt>0&&It!==J&&(nt[It].name="!StreamData")):Qt.size>=4096?(Qt.storage="fat",nt[Qt.start]===void 0&&(nt[Qt.start]=L(ot,Qt.start,nt.fat_addrs,nt.ssz)),nt[Qt.start].name=Qt.name,Qt.content=nt[Qt.start].data.slice(0,Qt.size)):(Qt.storage="minifat",Qt.size<0?Qt.size=0:It!==J&&Qt.start!==J&&nt[It]&&(Qt.content=M(Qt,nt[It].data,(nt[Pt]||{}).data))),Qt.content&&prep_blob(Qt.content,0),vt[nr]=Qt,Ct.push(Qt)}}function j(Xe,nt){return new Date((__readUInt32LE(Xe,nt+4)/1e7*Math.pow(2,32)+__readUInt32LE(Xe,nt)/1e7-11644473600)*1e3)}function z(Xe,nt){return R(),A(T.readFileSync(Xe),nt)}function W(Xe,nt){var ot=nt&&nt.type;switch(ot||has_buf&&Buffer$1.isBuffer(Xe)&&(ot="buffer"),ot||"base64"){case"file":return z(Xe,nt);case"base64":return A(s2a(Base64_decode(Xe)),nt);case"binary":return A(s2a(Xe),nt)}return A(Xe,nt)}function X(Xe,nt){var ot=nt||{},et=ot.root||"Root Entry";if(Xe.FullPaths||(Xe.FullPaths=[]),Xe.FileIndex||(Xe.FileIndex=[]),Xe.FullPaths.length!==Xe.FileIndex.length)throw new Error("inconsistent CFB structure");Xe.FullPaths.length===0&&(Xe.FullPaths[0]=et+"/",Xe.FileIndex[0]={name:et,type:5}),ot.CLSID&&(Xe.FileIndex[0].clsid=ot.CLSID),ie(Xe)}function ie(Xe){var nt="Sh33tJ5";if(!CFB.find(Xe,"/"+nt)){var ot=new_buf(4);ot[0]=55,ot[1]=ot[3]=50,ot[2]=54,Xe.FileIndex.push({name:nt,type:2,content:ot,size:4,L:69,R:69,C:69}),Xe.FullPaths.push(Xe.FullPaths[0]+nt),fe(Xe)}}function fe(Xe,nt){X(Xe);for(var ot=!1,et=!1,mt=Xe.FullPaths.length-1;mt>=0;--mt){var vt=Xe.FileIndex[mt];switch(vt.type){case 0:et?ot=!0:(Xe.FileIndex.pop(),Xe.FullPaths.pop());break;case 1:case 2:case 5:et=!0,isNaN(vt.R*vt.L*vt.C)&&(ot=!0),vt.R>-1&&vt.L>-1&&vt.R==vt.L&&(ot=!0);break;default:ot=!0;break}}if(!(!ot&&!nt)){var Ct=new Date(1987,1,19),Pt=0,It=Object.create?Object.create(null):{},Nt=[];for(mt=0;mt<Xe.FullPaths.length;++mt)It[Xe.FullPaths[mt]]=!0,Xe.FileIndex[mt].type!==0&&Nt.push([Xe.FullPaths[mt],Xe.FileIndex[mt]]);for(mt=0;mt<Nt.length;++mt){var Dt=_(Nt[mt][0]);for(et=It[Dt];!et;){for(;_(Dt)&&!It[_(Dt)];)Dt=_(Dt);Nt.push([Dt,{name:x(Dt).replace("/",""),type:1,clsid:ve,ct:Ct,mt:Ct,content:null}]),It[Dt]=!0,Dt=_(Nt[mt][0]),et=It[Dt]}}for(Nt.sort(function(nr,Xt){return g(nr[0],Xt[0])}),Xe.FullPaths=[],Xe.FileIndex=[],mt=0;mt<Nt.length;++mt)Xe.FullPaths[mt]=Nt[mt][0],Xe.FileIndex[mt]=Nt[mt][1];for(mt=0;mt<Nt.length;++mt){var Ht=Xe.FileIndex[mt],Zt=Xe.FullPaths[mt];if(Ht.name=x(Zt).replace("/",""),Ht.L=Ht.R=Ht.C=-(Ht.color=1),Ht.size=Ht.content?Ht.content.length:0,Ht.start=0,Ht.clsid=Ht.clsid||ve,mt===0)Ht.C=Nt.length>1?1:-1,Ht.size=0,Ht.type=5;else if(Zt.slice(-1)=="/"){for(Pt=mt+1;Pt<Nt.length&&_(Xe.FullPaths[Pt])!=Zt;++Pt);for(Ht.C=Pt>=Nt.length?-1:Pt,Pt=mt+1;Pt<Nt.length&&_(Xe.FullPaths[Pt])!=_(Zt);++Pt);Ht.R=Pt>=Nt.length?-1:Pt,Ht.type=1}else _(Xe.FullPaths[mt+1]||"")==_(Zt)&&(Ht.R=mt+1),Ht.type=2}}}function xe(Xe,nt){var ot=nt||{};if(ot.fileType=="mad")return qe(Xe,ot);switch(fe(Xe),ot.fileType){case"zip":return rr(Xe,ot)}var et=function(nr){for(var Xt=0,Qt=0,gr=0;gr<nr.FileIndex.length;++gr){var sn=nr.FileIndex[gr];if(sn.content){var an=sn.content.length;an>0&&(an<4096?Xt+=an+63>>6:Qt+=an+511>>9)}}for(var on=nr.FullPaths.length+3>>2,gn=Xt+7>>3,wn=Xt+127>>7,_n=gn+Qt+on+wn,vn=_n+127>>7,En=vn<=109?0:Math.ceil((vn-109)/127);_n+vn+En+127>>7>vn;)En=++vn<=109?0:Math.ceil((vn-109)/127);var xn=[1,En,vn,wn,on,Qt,Xt,0];return nr.FileIndex[0].size=Xt<<6,xn[7]=(nr.FileIndex[0].start=xn[0]+xn[1]+xn[2]+xn[3]+xn[4]+xn[5])+(xn[6]+7>>3),xn}(Xe),mt=new_buf(et[7]<<9),vt=0,Ct=0;{for(vt=0;vt<8;++vt)mt.write_shift(1,H[vt]);for(vt=0;vt<8;++vt)mt.write_shift(2,0);for(mt.write_shift(2,62),mt.write_shift(2,3),mt.write_shift(2,65534),mt.write_shift(2,9),mt.write_shift(2,6),vt=0;vt<3;++vt)mt.write_shift(2,0);for(mt.write_shift(4,0),mt.write_shift(4,et[2]),mt.write_shift(4,et[0]+et[1]+et[2]+et[3]-1),mt.write_shift(4,0),mt.write_shift(4,4096),mt.write_shift(4,et[3]?et[0]+et[1]+et[2]-1:J),mt.write_shift(4,et[3]),mt.write_shift(-4,et[1]?et[0]-1:J),mt.write_shift(4,et[1]),vt=0;vt<109;++vt)mt.write_shift(-4,vt<et[2]?et[1]+vt:-1)}if(et[1])for(Ct=0;Ct<et[1];++Ct){for(;vt<236+Ct*127;++vt)mt.write_shift(-4,vt<et[2]?et[1]+vt:-1);mt.write_shift(-4,Ct===et[1]-1?J:Ct+1)}var Pt=function(nr){for(Ct+=nr;vt<Ct-1;++vt)mt.write_shift(-4,vt+1);nr&&(++vt,mt.write_shift(-4,J))};for(Ct=vt=0,Ct+=et[1];vt<Ct;++vt)mt.write_shift(-4,Z.DIFSECT);for(Ct+=et[2];vt<Ct;++vt)mt.write_shift(-4,Z.FATSECT);Pt(et[3]),Pt(et[4]);for(var It=0,Nt=0,Dt=Xe.FileIndex[0];It<Xe.FileIndex.length;++It)Dt=Xe.FileIndex[It],Dt.content&&(Nt=Dt.content.length,!(Nt<4096)&&(Dt.start=Ct,Pt(Nt+511>>9)));for(Pt(et[6]+7>>3);mt.l&511;)mt.write_shift(-4,Z.ENDOFCHAIN);for(Ct=vt=0,It=0;It<Xe.FileIndex.length;++It)Dt=Xe.FileIndex[It],Dt.content&&(Nt=Dt.content.length,!(!Nt||Nt>=4096)&&(Dt.start=Ct,Pt(Nt+63>>6)));for(;mt.l&511;)mt.write_shift(-4,Z.ENDOFCHAIN);for(vt=0;vt<et[4]<<2;++vt){var Ht=Xe.FullPaths[vt];if(!Ht||Ht.length===0){for(It=0;It<17;++It)mt.write_shift(4,0);for(It=0;It<3;++It)mt.write_shift(4,-1);for(It=0;It<12;++It)mt.write_shift(4,0);continue}Dt=Xe.FileIndex[vt],vt===0&&(Dt.start=Dt.size?Dt.start-1:J);var Zt=vt===0&&ot.root||Dt.name;if(Zt.length>32&&(console.error("Name "+Zt+" will be truncated to "+Zt.slice(0,32)),Zt=Zt.slice(0,32)),Nt=2*(Zt.length+1),mt.write_shift(64,Zt,"utf16le"),mt.write_shift(2,Nt),mt.write_shift(1,Dt.type),mt.write_shift(1,Dt.color),mt.write_shift(-4,Dt.L),mt.write_shift(-4,Dt.R),mt.write_shift(-4,Dt.C),Dt.clsid)mt.write_shift(16,Dt.clsid,"hex");else for(It=0;It<4;++It)mt.write_shift(4,0);mt.write_shift(4,Dt.state||0),mt.write_shift(4,0),mt.write_shift(4,0),mt.write_shift(4,0),mt.write_shift(4,0),mt.write_shift(4,Dt.start),mt.write_shift(4,Dt.size),mt.write_shift(4,0)}for(vt=1;vt<Xe.FileIndex.length;++vt)if(Dt=Xe.FileIndex[vt],Dt.size>=4096)if(mt.l=Dt.start+1<<9,has_buf&&Buffer$1.isBuffer(Dt.content))Dt.content.copy(mt,mt.l,0,Dt.size),mt.l+=Dt.size+511&-512;else{for(It=0;It<Dt.size;++It)mt.write_shift(1,Dt.content[It]);for(;It&511;++It)mt.write_shift(1,0)}for(vt=1;vt<Xe.FileIndex.length;++vt)if(Dt=Xe.FileIndex[vt],Dt.size>0&&Dt.size<4096)if(has_buf&&Buffer$1.isBuffer(Dt.content))Dt.content.copy(mt,mt.l,0,Dt.size),mt.l+=Dt.size+63&-64;else{for(It=0;It<Dt.size;++It)mt.write_shift(1,Dt.content[It]);for(;It&63;++It)mt.write_shift(1,0)}if(has_buf)mt.l=mt.length;else for(;mt.l<mt.length;)mt.write_shift(1,0);return mt}function we(Xe,nt){var ot=Xe.FullPaths.map(function(It){return It.toUpperCase()}),et=ot.map(function(It){var Nt=It.split("/");return Nt[Nt.length-(It.slice(-1)=="/"?2:1)]}),mt=!1;nt.charCodeAt(0)===47?(mt=!0,nt=ot[0].slice(0,-1)+nt):mt=nt.indexOf("/")!==-1;var vt=nt.toUpperCase(),Ct=mt===!0?ot.indexOf(vt):et.indexOf(vt);if(Ct!==-1)return Xe.FileIndex[Ct];var Pt=!vt.match(chr1);for(vt=vt.replace(chr0,""),Pt&&(vt=vt.replace(chr1,"!")),Ct=0;Ct<ot.length;++Ct)if((Pt?ot[Ct].replace(chr1,"!"):ot[Ct]).replace(chr0,"")==vt||(Pt?et[Ct].replace(chr1,"!"):et[Ct]).replace(chr0,"")==vt)return Xe.FileIndex[Ct];return null}var G=64,J=-2,q="d0cf11e0a1b11ae1",H=[208,207,17,224,161,177,26,225],ve="00000000000000000000000000000000",Z={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:J,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ve,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ce(Xe,nt,ot){R();var et=xe(Xe,ot);T.writeFileSync(nt,et)}function ue(Xe){for(var nt=new Array(Xe.length),ot=0;ot<Xe.length;++ot)nt[ot]=String.fromCharCode(Xe[ot]);return nt.join("")}function se(Xe,nt){var ot=xe(Xe,nt);switch(nt&&nt.type||"buffer"){case"file":return R(),T.writeFileSync(nt.filename,ot),ot;case"binary":return typeof ot=="string"?ot:ue(ot);case"base64":return Base64_encode(typeof ot=="string"?ot:ue(ot));case"buffer":if(has_buf)return Buffer$1.isBuffer(ot)?ot:Buffer_from(ot);case"array":return typeof ot=="string"?s2a(ot):ot}return ot}var te;function Y(Xe){try{var nt=Xe.InflateRaw,ot=new nt;if(ot._processChunk(new Uint8Array([3,0]),ot._finishFlushFlag),ot.bytesRead)te=Xe;else throw new Error("zlib does not expose bytesRead")}catch(et){console.error("cannot use native zlib: "+(et.message||et))}}function be(Xe,nt){if(!te)return Kt(Xe,nt);var ot=te.InflateRaw,et=new ot,mt=et._processChunk(Xe.slice(Xe.l),et._finishFlushFlag);return Xe.l+=et.bytesRead,mt}function ye(Xe){return te?te.deflateRawSync(Xe):Ge(Xe)}var Ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ke=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ce=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Ae(Xe){var nt=(Xe<<1|Xe<<11)&139536|(Xe<<5|Xe<<15)&558144;return(nt>>16|nt>>8|nt)&255}for(var Ne=typeof Uint8Array<"u",We=Ne?new Uint8Array(256):[],Be=0;Be<256;++Be)We[Be]=Ae(Be);function Se(Xe,nt){var ot=We[Xe&255];return nt<=8?ot>>>8-nt:(ot=ot<<8|We[Xe>>8&255],nt<=16?ot>>>16-nt:(ot=ot<<8|We[Xe>>16&255],ot>>>24-nt))}function $e(Xe,nt){var ot=nt&7,et=nt>>>3;return(Xe[et]|(ot<=6?0:Xe[et+1]<<8))>>>ot&3}function _e(Xe,nt){var ot=nt&7,et=nt>>>3;return(Xe[et]|(ot<=5?0:Xe[et+1]<<8))>>>ot&7}function Oe(Xe,nt){var ot=nt&7,et=nt>>>3;return(Xe[et]|(ot<=4?0:Xe[et+1]<<8))>>>ot&15}function Ke(Xe,nt){var ot=nt&7,et=nt>>>3;return(Xe[et]|(ot<=3?0:Xe[et+1]<<8))>>>ot&31}function Me(Xe,nt){var ot=nt&7,et=nt>>>3;return(Xe[et]|(ot<=1?0:Xe[et+1]<<8))>>>ot&127}function Le(Xe,nt,ot){var et=nt&7,mt=nt>>>3,vt=(1<<ot)-1,Ct=Xe[mt]>>>et;return ot<8-et||(Ct|=Xe[mt+1]<<8-et,ot<16-et)||(Ct|=Xe[mt+2]<<16-et,ot<24-et)||(Ct|=Xe[mt+3]<<24-et),Ct&vt}function ze(Xe,nt,ot){var et=nt&7,mt=nt>>>3;return et<=5?Xe[mt]|=(ot&7)<<et:(Xe[mt]|=ot<<et&255,Xe[mt+1]=(ot&7)>>8-et),nt+3}function Je(Xe,nt,ot){var et=nt&7,mt=nt>>>3;return ot=(ot&1)<<et,Xe[mt]|=ot,nt+1}function Qe(Xe,nt,ot){var et=nt&7,mt=nt>>>3;return ot<<=et,Xe[mt]|=ot&255,ot>>>=8,Xe[mt+1]=ot,nt+8}function rt(Xe,nt,ot){var et=nt&7,mt=nt>>>3;return ot<<=et,Xe[mt]|=ot&255,ot>>>=8,Xe[mt+1]=ot&255,Xe[mt+2]=ot>>>8,nt+16}function wt(Xe,nt){var ot=Xe.length,et=2*ot>nt?2*ot:nt+5,mt=0;if(ot>=nt)return Xe;if(has_buf){var vt=new_unsafe_buf(et);if(Xe.copy)Xe.copy(vt);else for(;mt<Xe.length;++mt)vt[mt]=Xe[mt];return vt}else if(Ne){var Ct=new Uint8Array(et);if(Ct.set)Ct.set(Xe);else for(;mt<ot;++mt)Ct[mt]=Xe[mt];return Ct}return Xe.length=et,Xe}function bt(Xe){for(var nt=new Array(Xe),ot=0;ot<Xe;++ot)nt[ot]=0;return nt}function xt(Xe,nt,ot){var et=1,mt=0,vt=0,Ct=0,Pt=0,It=Xe.length,Nt=Ne?new Uint16Array(32):bt(32);for(vt=0;vt<32;++vt)Nt[vt]=0;for(vt=It;vt<ot;++vt)Xe[vt]=0;It=Xe.length;var Dt=Ne?new Uint16Array(It):bt(It);for(vt=0;vt<It;++vt)Nt[mt=Xe[vt]]++,et<mt&&(et=mt),Dt[vt]=0;for(Nt[0]=0,vt=1;vt<=et;++vt)Nt[vt+16]=Pt=Pt+Nt[vt-1]<<1;for(vt=0;vt<It;++vt)Pt=Xe[vt],Pt!=0&&(Dt[vt]=Nt[Pt+16]++);var Ht=0;for(vt=0;vt<It;++vt)if(Ht=Xe[vt],Ht!=0)for(Pt=Se(Dt[vt],et)>>et-Ht,Ct=(1<<et+4-Ht)-1;Ct>=0;--Ct)nt[Pt|Ct<<Ht]=Ht&15|vt<<4;return et}var Et=Ne?new Uint16Array(512):bt(512),Rt=Ne?new Uint16Array(32):bt(32);if(!Ne){for(var $t=0;$t<512;++$t)Et[$t]=0;for($t=0;$t<32;++$t)Rt[$t]=0}(function(){for(var Xe=[],nt=0;nt<32;nt++)Xe.push(5);xt(Xe,Rt,32);var ot=[];for(nt=0;nt<=143;nt++)ot.push(8);for(;nt<=255;nt++)ot.push(9);for(;nt<=279;nt++)ot.push(7);for(;nt<=287;nt++)ot.push(8);xt(ot,Et,288)})();var qt=function(){for(var nt=Ne?new Uint8Array(32768):[],ot=0,et=0;ot<Ce.length-1;++ot)for(;et<Ce[ot+1];++et)nt[et]=ot;for(;et<32768;++et)nt[et]=29;var mt=Ne?new Uint8Array(259):[];for(ot=0,et=0;ot<ke.length-1;++ot)for(;et<ke[ot+1];++et)mt[et]=ot;function vt(Pt,It){for(var Nt=0;Nt<Pt.length;){var Dt=Math.min(65535,Pt.length-Nt),Ht=Nt+Dt==Pt.length;for(It.write_shift(1,+Ht),It.write_shift(2,Dt),It.write_shift(2,~Dt&65535);Dt-- >0;)It[It.l++]=Pt[Nt++]}return It.l}function Ct(Pt,It){for(var Nt=0,Dt=0,Ht=Ne?new Uint16Array(32768):[];Dt<Pt.length;){var Zt=Math.min(65535,Pt.length-Dt);if(Zt<10){for(Nt=ze(It,Nt,+(Dt+Zt==Pt.length)),Nt&7&&(Nt+=8-(Nt&7)),It.l=Nt/8|0,It.write_shift(2,Zt),It.write_shift(2,~Zt&65535);Zt-- >0;)It[It.l++]=Pt[Dt++];Nt=It.l*8;continue}Nt=ze(It,Nt,+(Dt+Zt==Pt.length)+2);for(var nr=0;Zt-- >0;){var Xt=Pt[Dt];nr=(nr<<5^Xt)&32767;var Qt=-1,gr=0;if((Qt=Ht[nr])&&(Qt|=Dt&-32768,Qt>Dt&&(Qt-=32768),Qt<Dt))for(;Pt[Qt+gr]==Pt[Dt+gr]&&gr<250;)++gr;if(gr>2){Xt=mt[gr],Xt<=22?Nt=Qe(It,Nt,We[Xt+1]>>1)-1:(Qe(It,Nt,3),Nt+=5,Qe(It,Nt,We[Xt-23]>>5),Nt+=3);var sn=Xt<8?0:Xt-4>>2;sn>0&&(rt(It,Nt,gr-ke[Xt]),Nt+=sn),Xt=nt[Dt-Qt],Nt=Qe(It,Nt,We[Xt]>>3),Nt-=3;var an=Xt<4?0:Xt-2>>1;an>0&&(rt(It,Nt,Dt-Qt-Ce[Xt]),Nt+=an);for(var on=0;on<gr;++on)Ht[nr]=Dt&32767,nr=(nr<<5^Pt[Dt])&32767,++Dt;Zt-=gr-1}else Xt<=143?Xt=Xt+48:Nt=Je(It,Nt,1),Nt=Qe(It,Nt,We[Xt]),Ht[nr]=Dt&32767,++Dt}Nt=Qe(It,Nt,0)-1}return It.l=(Nt+7)/8|0,It.l}return function(It,Nt){return It.length<8?vt(It,Nt):Ct(It,Nt)}}();function Ge(Xe){var nt=new_buf(50+Math.floor(Xe.length*1.1)),ot=qt(Xe,nt);return nt.slice(0,ot)}var De=Ne?new Uint16Array(32768):bt(32768),Ve=Ne?new Uint16Array(32768):bt(32768),Ze=Ne?new Uint16Array(128):bt(128),_t=1,ft=1;function ht(Xe,nt){var ot=Ke(Xe,nt)+257;nt+=5;var et=Ke(Xe,nt)+1;nt+=5;var mt=Oe(Xe,nt)+4;nt+=4;for(var vt=0,Ct=Ne?new Uint8Array(19):bt(19),Pt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],It=1,Nt=Ne?new Uint8Array(8):bt(8),Dt=Ne?new Uint8Array(8):bt(8),Ht=Ct.length,Zt=0;Zt<mt;++Zt)Ct[Ie[Zt]]=vt=_e(Xe,nt),It<vt&&(It=vt),Nt[vt]++,nt+=3;var nr=0;for(Nt[0]=0,Zt=1;Zt<=It;++Zt)Dt[Zt]=nr=nr+Nt[Zt-1]<<1;for(Zt=0;Zt<Ht;++Zt)(nr=Ct[Zt])!=0&&(Pt[Zt]=Dt[nr]++);var Xt=0;for(Zt=0;Zt<Ht;++Zt)if(Xt=Ct[Zt],Xt!=0){nr=We[Pt[Zt]]>>8-Xt;for(var Qt=(1<<7-Xt)-1;Qt>=0;--Qt)Ze[nr|Qt<<Xt]=Xt&7|Zt<<3}var gr=[];for(It=1;gr.length<ot+et;)switch(nr=Ze[Me(Xe,nt)],nt+=nr&7,nr>>>=3){case 16:for(vt=3+$e(Xe,nt),nt+=2,nr=gr[gr.length-1];vt-- >0;)gr.push(nr);break;case 17:for(vt=3+_e(Xe,nt),nt+=3;vt-- >0;)gr.push(0);break;case 18:for(vt=11+Me(Xe,nt),nt+=7;vt-- >0;)gr.push(0);break;default:gr.push(nr),It<nr&&(It=nr);break}var sn=gr.slice(0,ot),an=gr.slice(ot);for(Zt=ot;Zt<286;++Zt)sn[Zt]=0;for(Zt=et;Zt<30;++Zt)an[Zt]=0;return _t=xt(sn,De,286),ft=xt(an,Ve,30),nt}function zt(Xe,nt){if(Xe[0]==3&&!(Xe[1]&3))return[new_raw_buf(nt),2];for(var ot=0,et=0,mt=new_unsafe_buf(nt||1<<18),vt=0,Ct=mt.length>>>0,Pt=0,It=0;!(et&1);){if(et=_e(Xe,ot),ot+=3,et>>>1)et>>1==1?(Pt=9,It=5):(ot=ht(Xe,ot),Pt=_t,It=ft);else{ot&7&&(ot+=8-(ot&7));var Nt=Xe[ot>>>3]|Xe[(ot>>>3)+1]<<8;if(ot+=32,Nt>0)for(!nt&&Ct<vt+Nt&&(mt=wt(mt,vt+Nt),Ct=mt.length);Nt-- >0;)mt[vt++]=Xe[ot>>>3],ot+=8;continue}for(;;){!nt&&Ct<vt+32767&&(mt=wt(mt,vt+32767),Ct=mt.length);var Dt=Le(Xe,ot,Pt),Ht=et>>>1==1?Et[Dt]:De[Dt];if(ot+=Ht&15,Ht>>>=4,!(Ht>>>8&255))mt[vt++]=Ht;else{if(Ht==256)break;Ht-=257;var Zt=Ht<8?0:Ht-4>>2;Zt>5&&(Zt=0);var nr=vt+ke[Ht];Zt>0&&(nr+=Le(Xe,ot,Zt),ot+=Zt),Dt=Le(Xe,ot,It),Ht=et>>>1==1?Rt[Dt]:Ve[Dt],ot+=Ht&15,Ht>>>=4;var Xt=Ht<4?0:Ht-2>>1,Qt=Ce[Ht];for(Xt>0&&(Qt+=Le(Xe,ot,Xt),ot+=Xt),!nt&&Ct<nr&&(mt=wt(mt,nr+100),Ct=mt.length);vt<nr;)mt[vt]=mt[vt-Qt],++vt}}}return nt?[mt,ot+7>>>3]:[mt.slice(0,vt),ot+7>>>3]}function Kt(Xe,nt){var ot=Xe.slice(Xe.l||0),et=zt(ot,nt);return Xe.l+=et[1],et[0]}function Ft(Xe,nt){if(Xe)typeof console<"u"&&console.error(nt);else throw new Error(nt)}function Jt(Xe,nt){var ot=Xe;prep_blob(ot,0);var et=[],mt=[],vt={FileIndex:et,FullPaths:mt};X(vt,{root:nt.root});for(var Ct=ot.length-4;(ot[Ct]!=80||ot[Ct+1]!=75||ot[Ct+2]!=5||ot[Ct+3]!=6)&&Ct>=0;)--Ct;ot.l=Ct+4,ot.l+=4;var Pt=ot.read_shift(2);ot.l+=6;var It=ot.read_shift(4);for(ot.l=It,Ct=0;Ct<Pt;++Ct){ot.l+=20;var Nt=ot.read_shift(4),Dt=ot.read_shift(4),Ht=ot.read_shift(2),Zt=ot.read_shift(2),nr=ot.read_shift(2);ot.l+=8;var Xt=ot.read_shift(4),Qt=C(ot.slice(ot.l+Ht,ot.l+Ht+Zt));ot.l+=Ht+Zt+nr;var gr=ot.l;ot.l=Xt+4,Qt&&Qt[1]&&((Qt[1]||{}).usz&&(Dt=Qt[1].usz),(Qt[1]||{}).csz&&(Nt=Qt[1].csz)),jt(ot,Nt,Dt,vt,Qt),ot.l=gr}return vt}function jt(Xe,nt,ot,et,mt){Xe.l+=2;var vt=Xe.read_shift(2),Ct=Xe.read_shift(2),Pt=E(Xe);if(vt&8257)throw new Error("Unsupported ZIP encryption");for(var It=Xe.read_shift(4),Nt=Xe.read_shift(4),Dt=Xe.read_shift(4),Ht=Xe.read_shift(2),Zt=Xe.read_shift(2),nr="",Xt=0;Xt<Ht;++Xt)nr+=String.fromCharCode(Xe[Xe.l++]);if(Zt){var Qt=C(Xe.slice(Xe.l,Xe.l+Zt));(Qt[21589]||{}).mt&&(Pt=Qt[21589].mt),(Qt[1]||{}).usz&&(Dt=Qt[1].usz),(Qt[1]||{}).csz&&(Nt=Qt[1].csz),mt&&((mt[21589]||{}).mt&&(Pt=mt[21589].mt),(mt[1]||{}).usz&&(Dt=Qt[1].usz),(mt[1]||{}).csz&&(Nt=Qt[1].csz))}Xe.l+=Zt;var gr=Xe.slice(Xe.l,Xe.l+Nt);switch(Ct){case 8:gr=be(Xe,Dt);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ct)}var sn=!1;vt&8&&(It=Xe.read_shift(4),It==134695760&&(It=Xe.read_shift(4),sn=!0),Nt=Xe.read_shift(4),Dt=Xe.read_shift(4)),Nt!=nt&&Ft(sn,"Bad compressed size: "+nt+" != "+Nt),Dt!=ot&&Ft(sn,"Bad uncompressed size: "+ot+" != "+Dt),St(et,nr,gr,{unsafe:!0,mt:Pt})}function rr(Xe,nt){var ot=nt||{},et=[],mt=[],vt=new_buf(1),Ct=ot.compression?8:0,Pt=0,It=0,Nt=0,Dt=0,Ht=0,Zt=Xe.FullPaths[0],nr=Zt,Xt=Xe.FileIndex[0],Qt=[],gr=0;for(It=1;It<Xe.FullPaths.length;++It)if(nr=Xe.FullPaths[It].slice(Zt.length),Xt=Xe.FileIndex[It],!(!Xt.size||!Xt.content||nr=="Sh33tJ5")){var sn=Dt,an=new_buf(nr.length);for(Nt=0;Nt<nr.length;++Nt)an.write_shift(1,nr.charCodeAt(Nt)&127);an=an.slice(0,an.l),Qt[Ht]=typeof Xt.content=="string"?CRC32.bstr(Xt.content,0):CRC32.buf(Xt.content,0);var on=typeof Xt.content=="string"?s2a(Xt.content):Xt.content;Ct==8&&(on=ye(on)),vt=new_buf(30),vt.write_shift(4,67324752),vt.write_shift(2,20),vt.write_shift(2,Pt),vt.write_shift(2,Ct),Xt.mt?S(vt,Xt.mt):vt.write_shift(4,0),vt.write_shift(-4,Qt[Ht]),vt.write_shift(4,on.length),vt.write_shift(4,Xt.content.length),vt.write_shift(2,an.length),vt.write_shift(2,0),Dt+=vt.length,et.push(vt),Dt+=an.length,et.push(an),Dt+=on.length,et.push(on),vt=new_buf(46),vt.write_shift(4,33639248),vt.write_shift(2,0),vt.write_shift(2,20),vt.write_shift(2,Pt),vt.write_shift(2,Ct),vt.write_shift(4,0),vt.write_shift(-4,Qt[Ht]),vt.write_shift(4,on.length),vt.write_shift(4,Xt.content.length),vt.write_shift(2,an.length),vt.write_shift(2,0),vt.write_shift(2,0),vt.write_shift(2,0),vt.write_shift(2,0),vt.write_shift(4,0),vt.write_shift(4,sn),gr+=vt.l,mt.push(vt),gr+=an.length,mt.push(an),++Ht}return vt=new_buf(22),vt.write_shift(4,101010256),vt.write_shift(2,0),vt.write_shift(2,0),vt.write_shift(2,Ht),vt.write_shift(2,Ht),vt.write_shift(4,gr),vt.write_shift(4,Dt),vt.write_shift(2,0),bconcat([bconcat(et),bconcat(mt),vt])}var ir={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function cr(Xe,nt){if(Xe.ctype)return Xe.ctype;var ot=Xe.name||"",et=ot.match(/\.([^\.]+)$/);return et&&ir[et[1]]||nt&&(et=(ot=nt).match(/[\.\\]([^\.\\])+$/),et&&ir[et[1]])?ir[et[1]]:"application/octet-stream"}function sr(Xe){for(var nt=Base64_encode(Xe),ot=[],et=0;et<nt.length;et+=76)ot.push(nt.slice(et,et+76));return ot.join(`\r
`)+`\r
`}function yr(Xe){var nt=Xe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Nt){var Dt=Nt.charCodeAt(0).toString(16).toUpperCase();return"="+(Dt.length==1?"0"+Dt:Dt)});nt=nt.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),nt.charAt(0)==`
`&&(nt="=0D"+nt.slice(1)),nt=nt.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ot=[],et=nt.split(`\r
`),mt=0;mt<et.length;++mt){var vt=et[mt];if(vt.length==0){ot.push("");continue}for(var Ct=0;Ct<vt.length;){var Pt=76,It=vt.slice(Ct,Ct+Pt);It.charAt(Pt-1)=="="?Pt--:It.charAt(Pt-2)=="="?Pt-=2:It.charAt(Pt-3)=="="&&(Pt-=3),It=vt.slice(Ct,Ct+Pt),Ct+=Pt,Ct<vt.length&&(It+="="),ot.push(It)}}return ot.join(`\r
`)}function ur(Xe){for(var nt=[],ot=0;ot<Xe.length;++ot){for(var et=Xe[ot];ot<=Xe.length&&et.charAt(et.length-1)=="=";)et=et.slice(0,et.length-1)+Xe[++ot];nt.push(et)}for(var mt=0;mt<nt.length;++mt)nt[mt]=nt[mt].replace(/[=][0-9A-Fa-f]{2}/g,function(vt){return String.fromCharCode(parseInt(vt.slice(1),16))});return s2a(nt.join(`\r
`))}function Ye(Xe,nt,ot){for(var et="",mt="",vt="",Ct,Pt=0;Pt<10;++Pt){var It=nt[Pt];if(!It||It.match(/^\s*$/))break;var Nt=It.match(/^(.*?):\s*([^\s].*)$/);if(Nt)switch(Nt[1].toLowerCase()){case"content-location":et=Nt[2].trim();break;case"content-type":vt=Nt[2].trim();break;case"content-transfer-encoding":mt=Nt[2].trim();break}}switch(++Pt,mt.toLowerCase()){case"base64":Ct=s2a(Base64_decode(nt.slice(Pt).join("")));break;case"quoted-printable":Ct=ur(nt.slice(Pt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+mt)}var Dt=St(Xe,et.slice(ot.length),Ct,{unsafe:!0});vt&&(Dt.ctype=vt)}function Fe(Xe,nt){if(ue(Xe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ot=nt&&nt.root||"",et=(has_buf&&Buffer$1.isBuffer(Xe)?Xe.toString("binary"):ue(Xe)).split(`\r
`),mt=0,vt="";for(mt=0;mt<et.length;++mt)if(vt=et[mt],!!/^Content-Location:/i.test(vt)&&(vt=vt.slice(vt.indexOf("file")),ot||(ot=vt.slice(0,vt.lastIndexOf("/")+1)),vt.slice(0,ot.length)!=ot))for(;ot.length>0&&(ot=ot.slice(0,ot.length-1),ot=ot.slice(0,ot.lastIndexOf("/")+1),vt.slice(0,ot.length)!=ot););var Ct=(et[1]||"").match(/boundary="(.*?)"/);if(!Ct)throw new Error("MAD cannot find boundary");var Pt="--"+(Ct[1]||""),It=[],Nt=[],Dt={FileIndex:It,FullPaths:Nt};X(Dt);var Ht,Zt=0;for(mt=0;mt<et.length;++mt){var nr=et[mt];nr!==Pt&&nr!==Pt+"--"||(Zt++&&Ye(Dt,et.slice(Ht,mt),ot),Ht=mt)}return Dt}function qe(Xe,nt){var ot=nt||{},et=ot.boundary||"SheetJS";et="------="+et;for(var mt=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+et.slice(2)+'"',"","",""],vt=Xe.FullPaths[0],Ct=vt,Pt=Xe.FileIndex[0],It=1;It<Xe.FullPaths.length;++It)if(Ct=Xe.FullPaths[It].slice(vt.length),Pt=Xe.FileIndex[It],!(!Pt.size||!Pt.content||Ct=="Sh33tJ5")){Ct=Ct.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(gr){return"_x"+gr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(gr){return"_u"+gr.charCodeAt(0).toString(16)+"_"});for(var Nt=Pt.content,Dt=has_buf&&Buffer$1.isBuffer(Nt)?Nt.toString("binary"):ue(Nt),Ht=0,Zt=Math.min(1024,Dt.length),nr=0,Xt=0;Xt<=Zt;++Xt)(nr=Dt.charCodeAt(Xt))>=32&&nr<128&&++Ht;var Qt=Ht>=Zt*4/5;mt.push(et),mt.push("Content-Location: "+(ot.root||"file:///C:/SheetJS/")+Ct),mt.push("Content-Transfer-Encoding: "+(Qt?"quoted-printable":"base64")),mt.push("Content-Type: "+cr(Pt,Ct)),mt.push(""),mt.push(Qt?yr(Dt):sr(Dt))}return mt.push(et+`--\r
`),mt.join(`\r
`)}function pt(Xe){var nt={};return X(nt,Xe),nt}function St(Xe,nt,ot,et){var mt=et&&et.unsafe;mt||X(Xe);var vt=!mt&&CFB.find(Xe,nt);if(!vt){var Ct=Xe.FullPaths[0];nt.slice(0,Ct.length)==Ct?Ct=nt:(Ct.slice(-1)!="/"&&(Ct+="/"),Ct=(Ct+nt).replace("//","/")),vt={name:x(nt),type:2},Xe.FileIndex.push(vt),Xe.FullPaths.push(Ct),mt||CFB.utils.cfb_gc(Xe)}return vt.content=ot,vt.size=ot?ot.length:0,et&&(et.CLSID&&(vt.clsid=et.CLSID),et.mt&&(vt.mt=et.mt),et.ct&&(vt.ct=et.ct)),vt}function Tt(Xe,nt){X(Xe);var ot=CFB.find(Xe,nt);if(ot){for(var et=0;et<Xe.FileIndex.length;++et)if(Xe.FileIndex[et]==ot)return Xe.FileIndex.splice(et,1),Xe.FullPaths.splice(et,1),!0}return!1}function At(Xe,nt,ot){X(Xe);var et=CFB.find(Xe,nt);if(et){for(var mt=0;mt<Xe.FileIndex.length;++mt)if(Xe.FileIndex[mt]==et)return Xe.FileIndex[mt].name=x(ot),Xe.FullPaths[mt]=ot,!0}return!1}function ar(Xe){fe(Xe,!0)}return r.find=we,r.read=W,r.parse=A,r.write=se,r.writeFile=ce,r.utils={cfb_new:pt,cfb_add:St,cfb_del:Tt,cfb_mov:At,cfb_gc:ar,ReadShift,CheckField,prep_blob,bconcat,use_zlib:Y,_deflateRaw:Ge,_inflateRaw:Kt,consts:Z},r}(),_fs;function set_fs(n){_fs=n}function blobify(n){return typeof n=="string"?s2ab(n):Array.isArray(n)?a2u(n):n}function write_dl(n,r,g){if(typeof _fs<"u"&&_fs.writeFileSync)return g?_fs.writeFileSync(n,r,g):_fs.writeFileSync(n,r);if(typeof Deno<"u"){if(g&&typeof r=="string")switch(g){case"utf8":r=new TextEncoder(g).encode(r);break;case"binary":r=s2ab(r);break;default:throw new Error("Unsupported encoding "+g)}return Deno.writeFileSync(n,r)}var _=g=="utf8"?utf8write(r):r;if(typeof IE_SaveFile<"u")return IE_SaveFile(_,n);if(typeof Blob<"u"){var x=new Blob([blobify(_)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(x,n);if(typeof saveAs<"u")return saveAs(x,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var S=URL.createObjectURL(x);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(S)},6e4),chrome.downloads.download({url:S,filename:n,saveAs:!0});var E=document.createElement("a");if(E.download!=null)return E.download=n,E.href=S,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(S)},6e4),S}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var C=File(n);return C.open("w"),C.encoding="binary",Array.isArray(r)&&(r=a2s(r)),C.write(r),C.close(),r}catch(T){if(!T.message||!T.message.match(/onstruct/))throw T}throw new Error("cannot save file "+n)}function read_binary(n){if(typeof _fs<"u")return _fs.readFileSync(n);if(typeof Deno<"u")return Deno.readFileSync(n);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var r=File(n);r.open("r"),r.encoding="binary";var g=r.read();return r.close(),g}catch(_){if(!_.message||!_.message.match(/onstruct/))throw _}throw new Error("Cannot access file "+n)}function keys$2(n){for(var r=Object.keys(n),g=[],_=0;_<r.length;++_)Object.prototype.hasOwnProperty.call(n,r[_])&&g.push(r[_]);return g}function evert_key(n,r){for(var g=[],_=keys$2(n),x=0;x!==_.length;++x)g[n[_[x]][r]]==null&&(g[n[_[x]][r]]=_[x]);return g}function evert(n){for(var r=[],g=keys$2(n),_=0;_!==g.length;++_)r[n[g[_]]]=g[_];return r}function evert_num(n){for(var r=[],g=keys$2(n),_=0;_!==g.length;++_)r[n[g[_]]]=parseInt(g[_],10);return r}function evert_arr(n){for(var r=[],g=keys$2(n),_=0;_!==g.length;++_)r[n[g[_]]]==null&&(r[n[g[_]]]=[]),r[n[g[_]]].push(g[_]);return r}var basedate=new Date(1899,11,30,0,0,0);function datenum(n,r){var g=n.getTime();r&&(g-=1462*24*60*60*1e3);var _=basedate.getTime()+(n.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4;return(g-_)/(24*60*60*1e3)}var refdate=new Date,dnthresh=basedate.getTime()+(refdate.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4,refoffset=refdate.getTimezoneOffset();function numdate(n){var r=new Date;return r.setTime(n*24*60*60*1e3+dnthresh),r.getTimezoneOffset()!==refoffset&&r.setTime(r.getTime()+(r.getTimezoneOffset()-refoffset)*6e4),r}function parse_isodur(n){var r=0,g=0,_=!1,x=n.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!x)throw new Error("|"+n+"| is not an ISO8601 Duration");for(var S=1;S!=x.length;++S)if(x[S]){switch(g=1,S>3&&(_=!0),x[S].slice(x[S].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+x[S].slice(x[S].length-1));case"D":g*=24;case"H":g*=60;case"M":if(_)g*=60;else throw new Error("Unsupported ISO Duration Field: M")}r+=g*parseInt(x[S],10)}return r}var good_pd_date_1=new Date("2017-02-19T19:06:09.000Z"),good_pd_date=isNaN(good_pd_date_1.getFullYear())?new Date("2/19/17"):good_pd_date_1,good_pd=good_pd_date.getFullYear()==2017;function parseDate(n,r){var g=new Date(n);if(good_pd)return r>0?g.setTime(g.getTime()+g.getTimezoneOffset()*60*1e3):r<0&&g.setTime(g.getTime()-g.getTimezoneOffset()*60*1e3),g;if(n instanceof Date)return n;if(good_pd_date.getFullYear()==1917&&!isNaN(g.getFullYear())){var _=g.getFullYear();return n.indexOf(""+_)>-1||g.setFullYear(g.getFullYear()+100),g}var x=n.match(/\d+/g)||["2017","2","19","0","0","0"],S=new Date(+x[0],+x[1]-1,+x[2],+x[3]||0,+x[4]||0,+x[5]||0);return n.indexOf("Z")>-1&&(S=new Date(S.getTime()-S.getTimezoneOffset()*60*1e3)),S}function cc2str(n,r){if(has_buf&&Buffer$1.isBuffer(n)){if(r&&buf_utf16le){if(n[0]==255&&n[1]==254)return utf8write(n.slice(2).toString("utf16le"));if(n[1]==254&&n[2]==255)return utf8write(utf16beread(n.slice(2).toString("binary")))}return n.toString("binary")}if(typeof TextDecoder<"u")try{if(r){if(n[0]==255&&n[1]==254)return utf8write(new TextDecoder("utf-16le").decode(n.slice(2)));if(n[0]==254&&n[1]==255)return utf8write(new TextDecoder("utf-16be").decode(n.slice(2)))}var g={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(S){return g[S]||S})}catch{}for(var _=[],x=0;x!=n.length;++x)_.push(String.fromCharCode(n[x]));return _.join("")}function dup(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var r={};for(var g in n)Object.prototype.hasOwnProperty.call(n,g)&&(r[g]=dup(n[g]));return r}function fill(n,r){for(var g="";g.length<r;)g+=n;return g}function fuzzynum(n){var r=Number(n);if(!isNaN(r))return isFinite(r)?r:NaN;if(!/\d/.test(n))return r;var g=1,_=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return g*=100,""});return!isNaN(r=Number(_))||(_=_.replace(/[(](.*)[)]/,function(x,S){return g=-g,S}),!isNaN(r=Number(_)))?r/g:r}var FDRE1=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/;function fuzzytime1(n){return n[2]?n[3]?n[4]?new Date(1899,11,30,+n[1]%12+(n[7]=="p"?12:0),+n[2],+n[4],parseFloat(n[3])*1e3):new Date(1899,11,30,n[7]=="p"?12:0,+n[1],+n[2],parseFloat(n[3])*1e3):n[5]?new Date(1899,11,30,+n[1]%12+(n[7]=="p"?12:0),+n[2],+n[5],n[6]?parseFloat(n[6])*1e3:0):new Date(1899,11,30,+n[1]%12+(n[7]=="p"?12:0),+n[2],0,0):new Date(1899,11,30,+n[1]%12+(n[7]=="p"?12:0),0,0,0)}var lower_months=["january","february","march","april","may","june","july","august","september","october","november","december"];function fuzzydate(n){var r=n.toLowerCase(),g=r.replace(/\s+/g," ").trim(),_=g.match(FDRE1);if(_)return fuzzytime1(_);var x=new Date(n),S=new Date(NaN),E=x.getYear();x.getMonth();var C=x.getDate();if(isNaN(C))return S;if(r.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(r=r.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),r.length>3&&lower_months.indexOf(r)==-1)return S}else if(r.replace(/[ap]m?/,"").match(/[a-z]/))return S;return E<0||E>8099||n.match(/[^-0-9:,\/\\]/)?S:x}var split_regex=function(){var n="abacaba".split(/(:?b)/i).length==5;return function(g,_,x){if(n||typeof _=="string")return g.split(_);for(var S=g.split(_),E=[S[0]],C=1;C<S.length;++C)E.push(x),E.push(S[C]);return E}}();function getdatastr(n){return n?n.content&&n.type?cc2str(n.content,!0):n.data?debom(n.data):n.asNodeBuffer&&has_buf?debom(n.asNodeBuffer().toString("binary")):n.asBinary?debom(n.asBinary()):n._data&&n._data.getContent?debom(cc2str(Array.prototype.slice.call(n._data.getContent(),0))):null:null}function getdatabin(n){if(!n)return null;if(n.data)return char_codes(n.data);if(n.asNodeBuffer&&has_buf)return n.asNodeBuffer();if(n._data&&n._data.getContent){var r=n._data.getContent();return typeof r=="string"?char_codes(r):Array.prototype.slice.call(r)}return n.content&&n.type?n.content:null}function getdata(n){return n&&n.name.slice(-4)===".bin"?getdatabin(n):getdatastr(n)}function safegetzipfile(n,r){for(var g=n.FullPaths||keys$2(n.files),_=r.toLowerCase().replace(/[\/]/g,"\\"),x=_.replace(/\\/g,"/"),S=0;S<g.length;++S){var E=g[S].replace(/^Root Entry[\/]/,"").toLowerCase();if(_==E||x==E)return n.files?n.files[g[S]]:n.FileIndex[S]}return null}function getzipfile(n,r){var g=safegetzipfile(n,r);if(g==null)throw new Error("Cannot find file "+r+" in zip");return g}function getzipdata(n,r,g){if(!g)return getdata(getzipfile(n,r));if(!r)return null;try{return getzipdata(n,r)}catch{return null}}function getzipstr(n,r,g){if(!g)return getdatastr(getzipfile(n,r));if(!r)return null;try{return getzipstr(n,r)}catch{return null}}function getzipbin(n,r,g){return getdatabin(getzipfile(n,r))}function zipentries(n){for(var r=n.FullPaths||keys$2(n.files),g=[],_=0;_<r.length;++_)r[_].slice(-1)!="/"&&g.push(r[_].replace(/^Root Entry[\/]/,""));return g.sort()}function zip_add_file(n,r,g){if(n.FullPaths){if(typeof g=="string"){var _;return has_buf?_=Buffer_from(g):_=utf8decode(g),CFB.utils.cfb_add(n,r,_)}CFB.utils.cfb_add(n,r,g)}else n.file(r,g)}function zip_new(){return CFB.utils.cfb_new()}function zip_read(n,r){switch(r.type){case"base64":return CFB.read(n,{type:"base64"});case"binary":return CFB.read(n,{type:"binary"});case"buffer":case"array":return CFB.read(n,{type:"buffer"})}throw new Error("Unrecognized type "+r.type)}function resolve_path(n,r){if(n.charAt(0)=="/")return n.slice(1);var g=r.split("/");r.slice(-1)!="/"&&g.pop();for(var _=n.split("/");_.length!==0;){var x=_.shift();x===".."?g.pop():x!=="."&&g.push(x)}return g.join("/")}var XML_HEADER=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,attregexg=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,tagregex1=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,tagregex2=/<[^>]*>/g,tagregex=XML_HEADER.match(tagregex1)?tagregex1:tagregex2,nsregex=/<\w*:/,nsregex2=/<(\/?)\w+:/;function parsexmltag(n,r,g){for(var _={},x=0,S=0;x!==n.length&&!((S=n.charCodeAt(x))===32||S===10||S===13);++x);if(r||(_[0]=n.slice(0,x)),x===n.length)return _;var E=n.match(attregexg),C=0,T="",R=0,A="",I="",B=1;if(E)for(R=0;R!=E.length;++R){for(I=E[R],S=0;S!=I.length&&I.charCodeAt(S)!==61;++S);for(A=I.slice(0,S).trim();I.charCodeAt(S+1)==32;)++S;for(B=(x=I.charCodeAt(S+1))==34||x==39?1:0,T=I.slice(S+1+B,I.length-B),C=0;C!=A.length&&A.charCodeAt(C)!==58;++C);if(C===A.length)A.indexOf("_")>0&&(A=A.slice(0,A.indexOf("_"))),_[A]=T,_[A.toLowerCase()]=T;else{var D=(C===5&&A.slice(0,5)==="xmlns"?"xmlns":"")+A.slice(C+1);if(_[D]&&A.slice(C-3,C)=="ext")continue;_[D]=T,_[D.toLowerCase()]=T}}return _}function strip_ns(n){return n.replace(nsregex2,"<$1")}var encodings={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rencoding=evert(encodings),unescapexml=function(){var n=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,r=/_x([\da-fA-F]{4})_/ig;function g(_){var x=_+"",S=x.indexOf("<![CDATA[");if(S==-1)return x.replace(n,function(C,T){return encodings[C]||String.fromCharCode(parseInt(T,C.indexOf("x")>-1?16:10))||C}).replace(r,function(C,T){return String.fromCharCode(parseInt(T,16))});var E=x.indexOf("]]>");return g(x.slice(0,S))+x.slice(S+9,E)+g(x.slice(E+3))}return function(x,S){var E=g(x);return S?E.replace(/\r\n/g,`
`):E}}(),decregex=/[&<>'"]/g,charegex=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function escapexml(n){var r=n+"";return r.replace(decregex,function(g){return rencoding[g]}).replace(charegex,function(g){return"_x"+("000"+g.charCodeAt(0).toString(16)).slice(-4)+"_"})}function escapexmltag(n){return escapexml(n).replace(/ /g,"_x0020_")}var htmlcharegex=/[\u0000-\u001f]/g;function escapehtml(n){var r=n+"";return r.replace(decregex,function(g){return rencoding[g]}).replace(/\n/g,"<br/>").replace(htmlcharegex,function(g){return"&#x"+("000"+g.charCodeAt(0).toString(16)).slice(-4)+";"})}function escapexlml(n){var r=n+"";return r.replace(decregex,function(g){return rencoding[g]}).replace(htmlcharegex,function(g){return"&#x"+g.charCodeAt(0).toString(16).toUpperCase()+";"})}var xlml_fixstr=function(){var n=/&#(\d+);/g;function r(g,_){return String.fromCharCode(parseInt(_,10))}return function(_){return _.replace(n,r)}}();function xlml_unfixstr(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function parsexmlbool(n){switch(n){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function utf8reada(n){for(var r="",g=0,_=0,x=0,S=0,E=0,C=0;g<n.length;){if(_=n.charCodeAt(g++),_<128){r+=String.fromCharCode(_);continue}if(x=n.charCodeAt(g++),_>191&&_<224){E=(_&31)<<6,E|=x&63,r+=String.fromCharCode(E);continue}if(S=n.charCodeAt(g++),_<240){r+=String.fromCharCode((_&15)<<12|(x&63)<<6|S&63);continue}E=n.charCodeAt(g++),C=((_&7)<<18|(x&63)<<12|(S&63)<<6|E&63)-65536,r+=String.fromCharCode(55296+(C>>>10&1023)),r+=String.fromCharCode(56320+(C&1023))}return r}function utf8readb(n){var r=new_raw_buf(2*n.length),g,_,x=1,S=0,E=0,C;for(_=0;_<n.length;_+=x)x=1,(C=n.charCodeAt(_))<128?g=C:C<224?(g=(C&31)*64+(n.charCodeAt(_+1)&63),x=2):C<240?(g=(C&15)*4096+(n.charCodeAt(_+1)&63)*64+(n.charCodeAt(_+2)&63),x=3):(x=4,g=(C&7)*262144+(n.charCodeAt(_+1)&63)*4096+(n.charCodeAt(_+2)&63)*64+(n.charCodeAt(_+3)&63),g-=65536,E=55296+(g>>>10&1023),g=56320+(g&1023)),E!==0&&(r[S++]=E&255,r[S++]=E>>>8,E=0),r[S++]=g%256,r[S++]=g>>>8;return r.slice(0,S).toString("ucs2")}function utf8readc(n){return Buffer_from(n,"binary").toString("utf8")}var utf8corpus="foo bar bazâð£",utf8read=has_buf&&(utf8readc(utf8corpus)==utf8reada(utf8corpus)&&utf8readc||utf8readb(utf8corpus)==utf8reada(utf8corpus)&&utf8readb)||utf8reada,utf8write=has_buf?function(n){return Buffer_from(n,"utf8").toString("binary")}:function(n){for(var r=[],g=0,_=0,x=0;g<n.length;)switch(_=n.charCodeAt(g++),!0){case _<128:r.push(String.fromCharCode(_));break;case _<2048:r.push(String.fromCharCode(192+(_>>6))),r.push(String.fromCharCode(128+(_&63)));break;case(_>=55296&&_<57344):_-=55296,x=n.charCodeAt(g++)-56320+(_<<10),r.push(String.fromCharCode(240+(x>>18&7))),r.push(String.fromCharCode(144+(x>>12&63))),r.push(String.fromCharCode(128+(x>>6&63))),r.push(String.fromCharCode(128+(x&63)));break;default:r.push(String.fromCharCode(224+(_>>12))),r.push(String.fromCharCode(128+(_>>6&63))),r.push(String.fromCharCode(128+(_&63)))}return r.join("")},matchtag=function(){var n={};return function(g,_){var x=g+"|"+(_||"");return n[x]?n[x]:n[x]=new RegExp("<(?:\\w+:)?"+g+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+g+">",_||"")}}(),htmldecode=function(){var n=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(r){return[new RegExp("&"+r[0]+";","ig"),r[1]]});return function(g){for(var _=g.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),x=0;x<n.length;++x)_=_.replace(n[x][0],n[x][1]);return _}}(),vtregex=function(){var n={};return function(g){return n[g]!==void 0?n[g]:n[g]=new RegExp("<(?:vt:)?"+g+">([\\s\\S]*?)</(?:vt:)?"+g+">","g")}}(),vtvregex=/<\/?(?:vt:)?variant>/g,vtmregex=/<(?:vt:)([^>]*)>([\s\S]*)</;function parseVector(n,r){var g=parsexmltag(n),_=n.match(vtregex(g.baseType))||[],x=[];if(_.length!=g.size){if(r.WTF)throw new Error("unexpected vector length "+_.length+" != "+g.size);return x}return _.forEach(function(S){var E=S.replace(vtvregex,"").match(vtmregex);E&&x.push({v:utf8read(E[2]),t:E[1]})}),x}var wtregex=/(^\s|\s$|\n)/;function writetag(n,r){return"<"+n+(r.match(wtregex)?' xml:space="preserve"':"")+">"+r+"</"+n+">"}function wxt_helper(n){return keys$2(n).map(function(r){return" "+r+'="'+n[r]+'"'}).join("")}function writextag(n,r,g){return"<"+n+(g!=null?wxt_helper(g):"")+(r!=null?(r.match(wtregex)?' xml:space="preserve"':"")+">"+r+"</"+n:"/")+">"}function write_w3cdtf(n,r){try{return n.toISOString().replace(/\.\d*/,"")}catch(g){if(r)throw g}return""}function write_vt(n,r){switch(typeof n){case"string":var g=writextag("vt:lpwstr",escapexml(n));return g=g.replace(/&quot;/g,"_x0022_"),g;case"number":return writextag((n|0)==n?"vt:i4":"vt:r8",escapexml(String(n)));case"boolean":return writextag("vt:bool",n?"true":"false")}if(n instanceof Date)return writextag("vt:filetime",write_w3cdtf(n));throw new Error("Unable to serialize "+n)}function xlml_normalize(n){if(has_buf&&Buffer$1.isBuffer(n))return n.toString("utf8");if(typeof n=="string")return n;if(typeof Uint8Array<"u"&&n instanceof Uint8Array)return utf8read(a2s(ab2a(n)));throw new Error("Bad input format: expected Buffer or string")}var xlmlregex=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/](?:[^>=]|="[^"]*?")*)?>/mg,XMLNS={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},XMLNS_main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],XLMLNS={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function read_double_le(n,r){for(var g=1-2*(n[r+7]>>>7),_=((n[r+7]&127)<<4)+(n[r+6]>>>4&15),x=n[r+6]&15,S=5;S>=0;--S)x=x*256+n[r+S];return _==2047?x==0?g*(1/0):NaN:(_==0?_=-1022:(_-=1023,x+=Math.pow(2,52)),g*Math.pow(2,_-52)*x)}function write_double_le(n,r,g){var _=(r<0||1/r==-1/0?1:0)<<7,x=0,S=0,E=_?-r:r;isFinite(E)?E==0?x=S=0:(x=Math.floor(Math.log(E)/Math.LN2),S=E*Math.pow(2,52-x),x<=-1023&&(!isFinite(S)||S<Math.pow(2,52))?x=-1022:(S-=Math.pow(2,52),x+=1023)):(x=2047,S=isNaN(r)?26985:0);for(var C=0;C<=5;++C,S/=256)n[g+C]=S&255;n[g+6]=(x&15)<<4|S&15,n[g+7]=x>>4|_}var ___toBuffer=function(n){for(var r=[],g=10240,_=0;_<n[0].length;++_)if(n[0][_])for(var x=0,S=n[0][_].length;x<S;x+=g)r.push.apply(r,n[0][_].slice(x,x+g));return r},__toBuffer=has_buf?function(n){return n[0].length>0&&Buffer$1.isBuffer(n[0][0])?Buffer$1.concat(n[0].map(function(r){return Buffer$1.isBuffer(r)?r:Buffer_from(r)})):___toBuffer(n)}:___toBuffer,___utf16le=function(n,r,g){for(var _=[],x=r;x<g;x+=2)_.push(String.fromCharCode(__readUInt16LE(n,x)));return _.join("").replace(chr0,"")},__utf16le=has_buf?function(n,r,g){return!Buffer$1.isBuffer(n)||!buf_utf16le?___utf16le(n,r,g):n.toString("utf16le",r,g).replace(chr0,"")}:___utf16le,___hexlify=function(n,r,g){for(var _=[],x=r;x<r+g;++x)_.push(("0"+n[x].toString(16)).slice(-2));return _.join("")},__hexlify=has_buf?function(n,r,g){return Buffer$1.isBuffer(n)?n.toString("hex",r,r+g):___hexlify(n,r,g)}:___hexlify,___utf8=function(n,r,g){for(var _=[],x=r;x<g;x++)_.push(String.fromCharCode(__readUInt8(n,x)));return _.join("")},__utf8=has_buf?function(r,g,_){return Buffer$1.isBuffer(r)?r.toString("utf8",g,_):___utf8(r,g,_)}:___utf8,___lpstr=function(n,r){var g=__readUInt32LE(n,r);return g>0?__utf8(n,r+4,r+4+g-1):""},__lpstr=___lpstr,___cpstr=function(n,r){var g=__readUInt32LE(n,r);return g>0?__utf8(n,r+4,r+4+g-1):""},__cpstr=___cpstr,___lpwstr=function(n,r){var g=2*__readUInt32LE(n,r);return g>0?__utf8(n,r+4,r+4+g-1):""},__lpwstr=___lpwstr,___lpp4=function(r,g){var _=__readUInt32LE(r,g);return _>0?__utf16le(r,g+4,g+4+_):""},__lpp4=___lpp4,___8lpp4=function(n,r){var g=__readUInt32LE(n,r);return g>0?__utf8(n,r+4,r+4+g):""},__8lpp4=___8lpp4,___double=function(n,r){return read_double_le(n,r)},__double=___double,is_buf=function(r){return Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array};has_buf&&(__lpstr=function(r,g){if(!Buffer$1.isBuffer(r))return ___lpstr(r,g);var _=r.readUInt32LE(g);return _>0?r.toString("utf8",g+4,g+4+_-1):""},__cpstr=function(r,g){if(!Buffer$1.isBuffer(r))return ___cpstr(r,g);var _=r.readUInt32LE(g);return _>0?r.toString("utf8",g+4,g+4+_-1):""},__lpwstr=function(r,g){if(!Buffer$1.isBuffer(r)||!buf_utf16le)return ___lpwstr(r,g);var _=2*r.readUInt32LE(g);return r.toString("utf16le",g+4,g+4+_-1)},__lpp4=function(r,g){if(!Buffer$1.isBuffer(r)||!buf_utf16le)return ___lpp4(r,g);var _=r.readUInt32LE(g);return r.toString("utf16le",g+4,g+4+_)},__8lpp4=function(r,g){if(!Buffer$1.isBuffer(r))return ___8lpp4(r,g);var _=r.readUInt32LE(g);return r.toString("utf8",g+4,g+4+_)},__double=function(r,g){return Buffer$1.isBuffer(r)?r.readDoubleLE(g):___double(r,g)},is_buf=function(r){return Buffer$1.isBuffer(r)||Array.isArray(r)||typeof Uint8Array<"u"&&r instanceof Uint8Array});var __readUInt8=function(n,r){return n[r]},__readUInt16LE=function(n,r){return n[r+1]*256+n[r]},__readInt16LE=function(n,r){var g=n[r+1]*256+n[r];return g<32768?g:(65535-g+1)*-1},__readUInt32LE=function(n,r){return n[r+3]*(1<<24)+(n[r+2]<<16)+(n[r+1]<<8)+n[r]},__readInt32LE=function(n,r){return n[r+3]<<24|n[r+2]<<16|n[r+1]<<8|n[r]},__readInt32BE=function(n,r){return n[r]<<24|n[r+1]<<16|n[r+2]<<8|n[r+3]};function ReadShift(n,r){var g="",_,x,S=[],E,C,T,R;switch(r){case"dbcs":if(R=this.l,has_buf&&Buffer$1.isBuffer(this)&&buf_utf16le)g=this.slice(this.l,this.l+2*n).toString("utf16le");else for(T=0;T<n;++T)g+=String.fromCharCode(__readUInt16LE(this,R)),R+=2;n*=2;break;case"utf8":g=__utf8(this,this.l,this.l+n);break;case"utf16le":n*=2,g=__utf16le(this,this.l,this.l+n);break;case"wstr":return ReadShift.call(this,n,"dbcs");case"lpstr-ansi":g=__lpstr(this,this.l),n=4+__readUInt32LE(this,this.l);break;case"lpstr-cp":g=__cpstr(this,this.l),n=4+__readUInt32LE(this,this.l);break;case"lpwstr":g=__lpwstr(this,this.l),n=4+2*__readUInt32LE(this,this.l);break;case"lpp4":n=4+__readUInt32LE(this,this.l),g=__lpp4(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+__readUInt32LE(this,this.l),g=__8lpp4(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,g="";(E=__readUInt8(this,this.l+n++))!==0;)S.push(_getchar(E));g=S.join("");break;case"_wstr":for(n=0,g="";(E=__readUInt16LE(this,this.l+n))!==0;)S.push(_getchar(E)),n+=2;n+=2,g=S.join("");break;case"dbcs-cont":for(g="",R=this.l,T=0;T<n;++T){if(this.lens&&this.lens.indexOf(R)!==-1)return E=__readUInt8(this,R),this.l=R+1,C=ReadShift.call(this,n-T,E?"dbcs-cont":"sbcs-cont"),S.join("")+C;S.push(_getchar(__readUInt16LE(this,R))),R+=2}g=S.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(g="",R=this.l,T=0;T!=n;++T){if(this.lens&&this.lens.indexOf(R)!==-1)return E=__readUInt8(this,R),this.l=R+1,C=ReadShift.call(this,n-T,E?"dbcs-cont":"sbcs-cont"),S.join("")+C;S.push(_getchar(__readUInt8(this,R))),R+=1}g=S.join("");break;default:switch(n){case 1:return _=__readUInt8(this,this.l),this.l++,_;case 2:return _=(r==="i"?__readInt16LE:__readUInt16LE)(this,this.l),this.l+=2,_;case 4:case-4:return r==="i"||!(this[this.l+3]&128)?(_=(n>0?__readInt32LE:__readInt32BE)(this,this.l),this.l+=4,_):(x=__readUInt32LE(this,this.l),this.l+=4,x);case 8:case-8:if(r==="f")return n==8?x=__double(this,this.l):x=__double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,x;n=8;case 16:g=__hexlify(this,this.l,n);break}}return this.l+=n,g}var __writeUInt32LE=function(n,r,g){n[g]=r&255,n[g+1]=r>>>8&255,n[g+2]=r>>>16&255,n[g+3]=r>>>24&255},__writeInt32LE=function(n,r,g){n[g]=r&255,n[g+1]=r>>8&255,n[g+2]=r>>16&255,n[g+3]=r>>24&255},__writeUInt16LE=function(n,r,g){n[g]=r&255,n[g+1]=r>>>8&255};function WriteShift(n,r,g){var _=0,x=0;if(g==="dbcs"){for(x=0;x!=r.length;++x)__writeUInt16LE(this,r.charCodeAt(x),this.l+2*x);_=2*r.length}else if(g==="sbcs"||g=="cpstr"){for(r=r.replace(/[^\x00-\x7F]/g,"_"),x=0;x!=r.length;++x)this[this.l+x]=r.charCodeAt(x)&255;_=r.length}else if(g==="hex"){for(;x<n;++x)this[this.l++]=parseInt(r.slice(2*x,2*x+2),16)||0;return this}else if(g==="utf16le"){var S=Math.min(this.l+n,this.length);for(x=0;x<Math.min(r.length,n);++x){var E=r.charCodeAt(x);this[this.l++]=E&255,this[this.l++]=E>>8}for(;this.l<S;)this[this.l++]=0;return this}else switch(n){case 1:_=1,this[this.l]=r&255;break;case 2:_=2,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255;break;case 3:_=3,this[this.l]=r&255,r>>>=8,this[this.l+1]=r&255,r>>>=8,this[this.l+2]=r&255;break;case 4:_=4,__writeUInt32LE(this,r,this.l);break;case 8:if(_=8,g==="f"){write_double_le(this,r,this.l);break}case 16:break;case-4:_=4,__writeInt32LE(this,r,this.l);break}return this.l+=_,this}function CheckField(n,r){var g=__hexlify(this,this.l,n.length>>1);if(g!==n)throw new Error(r+"Expected "+n+" saw "+g);this.l+=n.length>>1}function prep_blob(n,r){n.l=r,n.read_shift=ReadShift,n.chk=CheckField,n.write_shift=WriteShift}function parsenoop(n,r){n.l+=r}function new_buf(n){var r=new_raw_buf(n);return prep_blob(r,0),r}function recordhopper(n,r,g){if(n){var _,x,S;prep_blob(n,n.l||0);for(var E=n.length,C=0,T=0;n.l<E;){C=n.read_shift(1),C&128&&(C=(C&127)+((n.read_shift(1)&127)<<7));var R=XLSBRecordEnum[C]||XLSBRecordEnum[65535];for(_=n.read_shift(1),S=_&127,x=1;x<4&&_&128;++x)S+=((_=n.read_shift(1))&127)<<7*x;T=n.l+S;var A=R.f&&R.f(n,S,g);if(n.l=T,r(A,R,C))return}}}function buf_array(){var n=[],r=has_buf?256:2048,g=function(R){var A=new_buf(R);return prep_blob(A,0),A},_=g(r),x=function(){_&&(_.l&&(_.length>_.l&&(_=_.slice(0,_.l),_.l=_.length),_.length>0&&n.push(_)),_=null)},S=function(R){return _&&R<_.length-_.l?_:(x(),_=g(Math.max(R+1,r)))},E=function(){return x(),bconcat(n)},C=function(R){x(),_=R,_.l==null&&(_.l=_.length),S(r)};return{next:S,push:C,end:E,_bufs:n}}function write_record(n,r,g,_){var x=+r,S;if(!isNaN(x)){_||(_=XLSBRecordEnum[x].p||(g||[]).length||0),S=1+(x>=128?1:0)+1,_>=128&&++S,_>=16384&&++S,_>=2097152&&++S;var E=n.next(S);x<=127?E.write_shift(1,x):(E.write_shift(1,(x&127)+128),E.write_shift(1,x>>7));for(var C=0;C!=4;++C)if(_>=128)E.write_shift(1,(_&127)+128),_>>=7;else{E.write_shift(1,_);break}_>0&&is_buf(g)&&n.push(g)}}function shift_cell_xls(n,r,g){var _=dup(n);if(r.s?(_.cRel&&(_.c+=r.s.c),_.rRel&&(_.r+=r.s.r)):(_.cRel&&(_.c+=r.c),_.rRel&&(_.r+=r.r)),!g||g.biff<12){for(;_.c>=256;)_.c-=256;for(;_.r>=65536;)_.r-=65536}return _}function shift_range_xls(n,r,g){var _=dup(n);return _.s=shift_cell_xls(_.s,r.s,g),_.e=shift_cell_xls(_.e,r.s,g),_}function encode_cell_xls(n,r){if(n.cRel&&n.c<0)for(n=dup(n);n.c<0;)n.c+=r>8?16384:256;if(n.rRel&&n.r<0)for(n=dup(n);n.r<0;)n.r+=r>8?1048576:r>5?65536:16384;var g=encode_cell(n);return!n.cRel&&n.cRel!=null&&(g=fix_col(g)),!n.rRel&&n.rRel!=null&&(g=fix_row(g)),g}function encode_range_xls(n,r){return n.s.r==0&&!n.s.rRel&&n.e.r==(r.biff>=12?1048575:r.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+encode_col(n.s.c)+":"+(n.e.cRel?"":"$")+encode_col(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(r.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+encode_row(n.s.r)+":"+(n.e.rRel?"":"$")+encode_row(n.e.r):encode_cell_xls(n.s,r.biff)+":"+encode_cell_xls(n.e,r.biff)}function decode_row(n){return parseInt(unfix_row(n),10)-1}function encode_row(n){return""+(n+1)}function fix_row(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function unfix_row(n){return n.replace(/\$(\d+)$/,"$1")}function decode_col(n){for(var r=unfix_col(n),g=0,_=0;_!==r.length;++_)g=26*g+r.charCodeAt(_)-64;return g-1}function encode_col(n){if(n<0)throw new Error("invalid column "+n);var r="";for(++n;n;n=Math.floor((n-1)/26))r=String.fromCharCode((n-1)%26+65)+r;return r}function fix_col(n){return n.replace(/^([A-Z])/,"$$$1")}function unfix_col(n){return n.replace(/^\$([A-Z])/,"$1")}function split_cell(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function decode_cell(n){for(var r=0,g=0,_=0;_<n.length;++_){var x=n.charCodeAt(_);x>=48&&x<=57?r=10*r+(x-48):x>=65&&x<=90&&(g=26*g+(x-64))}return{c:g-1,r:r-1}}function encode_cell(n){for(var r=n.c+1,g="";r;r=(r-1)/26|0)g=String.fromCharCode((r-1)%26+65)+g;return g+(n.r+1)}function decode_range(n){var r=n.indexOf(":");return r==-1?{s:decode_cell(n),e:decode_cell(n)}:{s:decode_cell(n.slice(0,r)),e:decode_cell(n.slice(r+1))}}function encode_range(n,r){return typeof r>"u"||typeof r=="number"?encode_range(n.s,n.e):(typeof n!="string"&&(n=encode_cell(n)),typeof r!="string"&&(r=encode_cell(r)),n==r?n:n+":"+r)}function fix_range(n){var r=decode_range(n);return"$"+encode_col(r.s.c)+"$"+encode_row(r.s.r)+":$"+encode_col(r.e.c)+"$"+encode_row(r.e.r)}function formula_quote_sheet_name(n,r){if(!n&&!(r&&r.biff<=5&&r.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n.replace(/'/g,"''")+"'":n}function safe_decode_range(n){var r={s:{c:0,r:0},e:{c:0,r:0}},g=0,_=0,x=0,S=n.length;for(g=0;_<S&&!((x=n.charCodeAt(_)-64)<1||x>26);++_)g=26*g+x;for(r.s.c=--g,g=0;_<S&&!((x=n.charCodeAt(_)-48)<0||x>9);++_)g=10*g+x;if(r.s.r=--g,_===S||x!=10)return r.e.c=r.s.c,r.e.r=r.s.r,r;for(++_,g=0;_!=S&&!((x=n.charCodeAt(_)-64)<1||x>26);++_)g=26*g+x;for(r.e.c=--g,g=0;_!=S&&!((x=n.charCodeAt(_)-48)<0||x>9);++_)g=10*g+x;return r.e.r=--g,r}function safe_format_cell(n,r){var g=n.t=="d"&&r instanceof Date;if(n.z!=null)try{return n.w=SSF_format(n.z,g?datenum(r):r)}catch{}try{return n.w=SSF_format((n.XF||{}).numFmtId||(g?14:0),g?datenum(r):r)}catch{return""+r}}function format_cell(n,r,g){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&g&&g.dateNF&&(n.z=g.dateNF),n.t=="e"?BErr[n.v]||n.v:r==null?safe_format_cell(n,n.v):safe_format_cell(n,r))}function sheet_to_workbook(n,r){var g=r&&r.sheet?r.sheet:"Sheet1",_={};return _[g]=n,{SheetNames:[g],Sheets:_}}function sheet_add_aoa(n,r,g){var _=g||{},x=n?n["!data"]!=null:_.dense,S=n||{};x&&!S["!data"]&&(S["!data"]=[]);var E=0,C=0;if(S&&_.origin!=null){if(typeof _.origin=="number")E=_.origin;else{var T=typeof _.origin=="string"?decode_cell(_.origin):_.origin;E=T.r,C=T.c}S["!ref"]||(S["!ref"]="A1:A1")}var R={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(S["!ref"]){var A=safe_decode_range(S["!ref"]);R.s.c=A.s.c,R.s.r=A.s.r,R.e.c=Math.max(R.e.c,A.e.c),R.e.r=Math.max(R.e.r,A.e.r),E==-1&&(R.e.r=E=A.e.r+1)}for(var I=[],B=0;B!=r.length;++B)if(r[B]){if(!Array.isArray(r[B]))throw new Error("aoa_to_sheet expects an array of arrays");var D=E+B,N=""+(D+1);x&&(S["!data"][D]||(S["!data"][D]=[]),I=S["!data"][D]);for(var M=0;M!=r[B].length;++M)if(!(typeof r[B][M]>"u")){var O={v:r[B][M]},L=C+M;if(R.s.r>D&&(R.s.r=D),R.s.c>L&&(R.s.c=L),R.e.r<D&&(R.e.r=D),R.e.c<L&&(R.e.c=L),r[B][M]&&typeof r[B][M]=="object"&&!Array.isArray(r[B][M])&&!(r[B][M]instanceof Date))O=r[B][M];else if(Array.isArray(O.v)&&(O.f=r[B][M][1],O.v=O.v[0]),O.v===null)if(O.f)O.t="n";else if(_.nullError)O.t="e",O.v=0;else if(_.sheetStubs)O.t="z";else continue;else typeof O.v=="number"?O.t="n":typeof O.v=="boolean"?O.t="b":O.v instanceof Date?(O.z=_.dateNF||table_fmt[14],_.cellDates?(O.t="d",O.w=SSF_format(O.z,datenum(O.v,_.date1904))):(O.t="n",O.v=datenum(O.v,_.date1904),O.w=SSF_format(O.z,O.v))):O.t="s";if(x)I[L]&&I[L].z&&(O.z=I[L].z),I[L]=O;else{var F=encode_col(L)+N;S[F]&&S[F].z&&(O.z=S[F].z),S[F]=O}}}return R.s.c<1e7&&(S["!ref"]=encode_range(R)),S}function aoa_to_sheet(n,r){return sheet_add_aoa(null,n,r)}function parse_Int32LE(n){return n.read_shift(4,"i")}function write_UInt32LE(n,r){return r||(r=new_buf(4)),r.write_shift(4,n),r}function parse_XLWideString(n){var r=n.read_shift(4);return r===0?"":n.read_shift(r,"dbcs")}function write_XLWideString(n,r){var g=!1;return r==null&&(g=!0,r=new_buf(4+2*n.length)),r.write_shift(4,n.length),n.length>0&&r.write_shift(0,n,"dbcs"),g?r.slice(0,r.l):r}function parse_StrRun(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function write_StrRun(n,r){return r||(r=new_buf(4)),r.write_shift(2,0),r.write_shift(2,0),r}function parse_RichStr(n,r){var g=n.l,_=n.read_shift(1),x=parse_XLWideString(n),S=[],E={t:x,h:x};if(_&1){for(var C=n.read_shift(4),T=0;T!=C;++T)S.push(parse_StrRun(n));E.r=S}else E.r=[{ich:0,ifnt:0}];return n.l=g+r,E}function write_RichStr(n,r){var g=!1;return r==null&&(g=!0,r=new_buf(15+4*n.t.length)),r.write_shift(1,0),write_XLWideString(n.t,r),g?r.slice(0,r.l):r}var parse_BrtCommentText=parse_RichStr;function write_BrtCommentText(n,r){var g=!1;return r==null&&(g=!0,r=new_buf(23+4*n.t.length)),r.write_shift(1,1),write_XLWideString(n.t,r),r.write_shift(4,1),write_StrRun({ich:0,ifnt:0},r),g?r.slice(0,r.l):r}function parse_XLSBCell(n){var r=n.read_shift(4),g=n.read_shift(2);return g+=n.read_shift(1)<<16,n.l++,{c:r,iStyleRef:g}}function write_XLSBCell(n,r){return r==null&&(r=new_buf(8)),r.write_shift(-4,n.c),r.write_shift(3,n.iStyleRef||n.s),r.write_shift(1,0),r}function parse_XLSBShortCell(n){var r=n.read_shift(2);return r+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:r}}function write_XLSBShortCell(n,r){return r==null&&(r=new_buf(4)),r.write_shift(3,n.iStyleRef||n.s),r.write_shift(1,0),r}var parse_XLSBCodeName=parse_XLWideString,write_XLSBCodeName=write_XLWideString;function parse_XLNullableWideString(n){var r=n.read_shift(4);return r===0||r===4294967295?"":n.read_shift(r,"dbcs")}function write_XLNullableWideString(n,r){var g=!1;return r==null&&(g=!0,r=new_buf(127)),r.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&r.write_shift(0,n,"dbcs"),g?r.slice(0,r.l):r}var parse_XLNameWideString=parse_XLWideString,parse_RelID=parse_XLNullableWideString,write_RelID=write_XLNullableWideString;function parse_RkNumber(n){var r=n.slice(n.l,n.l+4),g=r[0]&1,_=r[0]&2;n.l+=4;var x=_===0?__double([0,0,0,0,r[0]&252,r[1],r[2],r[3]],0):__readInt32LE(r,0)>>2;return g?x/100:x}function write_RkNumber(n,r){r==null&&(r=new_buf(4));var g=0,_=0,x=n*100;if(n==(n|0)&&n>=-(1<<29)&&n<1<<29?_=1:x==(x|0)&&x>=-(1<<29)&&x<1<<29&&(_=1,g=1),_)r.write_shift(-4,((g?x:n)<<2)+(g+2));else throw new Error("unsupported RkNumber "+n)}function parse_RfX(n){var r={s:{},e:{}};return r.s.r=n.read_shift(4),r.e.r=n.read_shift(4),r.s.c=n.read_shift(4),r.e.c=n.read_shift(4),r}function write_RfX(n,r){return r||(r=new_buf(16)),r.write_shift(4,n.s.r),r.write_shift(4,n.e.r),r.write_shift(4,n.s.c),r.write_shift(4,n.e.c),r}var parse_UncheckedRfX=parse_RfX,write_UncheckedRfX=write_RfX;function parse_Xnum(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function write_Xnum(n,r){return(r||new_buf(8)).write_shift(8,n,"f")}function parse_BrtColor(n){var r={},g=n.read_shift(1),_=g>>>1,x=n.read_shift(1),S=n.read_shift(2,"i"),E=n.read_shift(1),C=n.read_shift(1),T=n.read_shift(1);switch(n.l++,_){case 0:r.auto=1;break;case 1:r.index=x;var R=XLSIcv[x];R&&(r.rgb=rgb2Hex(R));break;case 2:r.rgb=rgb2Hex([E,C,T]);break;case 3:r.theme=x;break}return S!=0&&(r.tint=S>0?S/32767:S/32768),r}function write_BrtColor(n,r){if(r||(r=new_buf(8)),!n||n.auto)return r.write_shift(4,0),r.write_shift(4,0),r;n.index!=null?(r.write_shift(1,2),r.write_shift(1,n.index)):n.theme!=null?(r.write_shift(1,6),r.write_shift(1,n.theme)):(r.write_shift(1,5),r.write_shift(1,0));var g=n.tint||0;if(g>0?g*=32767:g<0&&(g*=32768),r.write_shift(2,g),!n.rgb||n.theme!=null)r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);else{var _=n.rgb||"FFFFFF";typeof _=="number"&&(_=("000000"+_.toString(16)).slice(-6)),r.write_shift(1,parseInt(_.slice(0,2),16)),r.write_shift(1,parseInt(_.slice(2,4),16)),r.write_shift(1,parseInt(_.slice(4,6),16)),r.write_shift(1,255)}return r}function parse_FontFlags(n){var r=n.read_shift(1);n.l++;var g={fBold:r&1,fItalic:r&2,fUnderline:r&4,fStrikeout:r&8,fOutline:r&16,fShadow:r&32,fCondense:r&64,fExtend:r&128};return g}function write_FontFlags(n,r){r||(r=new_buf(2));var g=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return r.write_shift(1,g),r.write_shift(1,0),r}function parse_ClipboardFormatOrString(n,r){var g={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},_=n.read_shift(4);switch(_){case 0:return"";case 4294967295:case 4294967294:return g[n.read_shift(4)]||""}if(_>400)throw new Error("Unsupported Clipboard: "+_.toString(16));return n.l-=4,n.read_shift(0,r==1?"lpstr":"lpwstr")}function parse_ClipboardFormatOrAnsiString(n){return parse_ClipboardFormatOrString(n,1)}function parse_ClipboardFormatOrUnicodeString(n){return parse_ClipboardFormatOrString(n,2)}var VT_I2=2,VT_I4=3,VT_BOOL=11,VT_VARIANT=12,VT_UI4=19,VT_FILETIME=64,VT_BLOB=65,VT_CF=71,VT_VECTOR_VARIANT=4108,VT_VECTOR_LPSTR=4126,VT_STRING=80,VT_USTR=81,VT_CUSTOM=[VT_STRING,VT_USTR],DocSummaryPIDDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Category",t:VT_STRING},3:{n:"PresentationFormat",t:VT_STRING},4:{n:"ByteCount",t:VT_I4},5:{n:"LineCount",t:VT_I4},6:{n:"ParagraphCount",t:VT_I4},7:{n:"SlideCount",t:VT_I4},8:{n:"NoteCount",t:VT_I4},9:{n:"HiddenCount",t:VT_I4},10:{n:"MultimediaClipCount",t:VT_I4},11:{n:"ScaleCrop",t:VT_BOOL},12:{n:"HeadingPairs",t:VT_VECTOR_VARIANT},13:{n:"TitlesOfParts",t:VT_VECTOR_LPSTR},14:{n:"Manager",t:VT_STRING},15:{n:"Company",t:VT_STRING},16:{n:"LinksUpToDate",t:VT_BOOL},17:{n:"CharacterCount",t:VT_I4},19:{n:"SharedDoc",t:VT_BOOL},22:{n:"HyperlinksChanged",t:VT_BOOL},23:{n:"AppVersion",t:VT_I4,p:"version"},24:{n:"DigSig",t:VT_BLOB},26:{n:"ContentType",t:VT_STRING},27:{n:"ContentStatus",t:VT_STRING},28:{n:"Language",t:VT_STRING},29:{n:"Version",t:VT_STRING},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},SummaryPIDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Title",t:VT_STRING},3:{n:"Subject",t:VT_STRING},4:{n:"Author",t:VT_STRING},5:{n:"Keywords",t:VT_STRING},6:{n:"Comments",t:VT_STRING},7:{n:"Template",t:VT_STRING},8:{n:"LastAuthor",t:VT_STRING},9:{n:"RevNumber",t:VT_STRING},10:{n:"EditTime",t:VT_FILETIME},11:{n:"LastPrinted",t:VT_FILETIME},12:{n:"CreatedDate",t:VT_FILETIME},13:{n:"ModifiedDate",t:VT_FILETIME},14:{n:"PageCount",t:VT_I4},15:{n:"WordCount",t:VT_I4},16:{n:"CharCount",t:VT_I4},17:{n:"Thumbnail",t:VT_CF},18:{n:"Application",t:VT_STRING},19:{n:"DocSecurity",t:VT_I4},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},CountryEnum={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},XLSFillPattern=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rgbify(n){return n.map(function(r){return[r>>16&255,r>>8&255,r&255]})}var _XLSIcv=rgbify([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XLSIcv=dup(_XLSIcv),BErr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},RBErr={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},XLSLblBuiltIn=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],ct2type={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},CT_LIST={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function new_ct(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function parse_ct(n){var r=new_ct();if(!n||!n.match)return r;var g={};if((n.match(tagregex)||[]).forEach(function(_){var x=parsexmltag(_);switch(x[0].replace(nsregex,"<")){case"<?xml":break;case"<Types":r.xmlns=x["xmlns"+(x[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":g[x.Extension.toLowerCase()]=x.ContentType;break;case"<Override":r[ct2type[x.ContentType]]!==void 0&&r[ct2type[x.ContentType]].push(x.PartName);break}}),r.xmlns!==XMLNS.CT)throw new Error("Unknown Namespace: "+r.xmlns);return r.calcchain=r.calcchains.length>0?r.calcchains[0]:"",r.sst=r.strs.length>0?r.strs[0]:"",r.style=r.styles.length>0?r.styles[0]:"",r.defaults=g,delete r.calcchains,r}function write_ct(n,r,g){var _=evert_arr(ct2type),x=[],S;x[x.length]=XML_HEADER,x[x.length]=writextag("Types",null,{xmlns:XMLNS.CT,"xmlns:xsd":XMLNS.xsd,"xmlns:xsi":XMLNS.xsi}),x=x.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(R){return writextag("Default",null,{Extension:R[0],ContentType:R[1]})}));var E=function(R){n[R]&&n[R].length>0&&(S=n[R][0],x[x.length]=writextag("Override",null,{PartName:(S[0]=="/"?"":"/")+S,ContentType:CT_LIST[R][r.bookType]||CT_LIST[R].xlsx}))},C=function(R){(n[R]||[]).forEach(function(A){x[x.length]=writextag("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:CT_LIST[R][r.bookType]||CT_LIST[R].xlsx})})},T=function(R){(n[R]||[]).forEach(function(A){x[x.length]=writextag("Override",null,{PartName:(A[0]=="/"?"":"/")+A,ContentType:_[R][0]})})};return E("workbooks"),C("sheets"),C("charts"),T("themes"),["strs","styles"].forEach(E),["coreprops","extprops","custprops"].forEach(T),T("vba"),T("comments"),T("threadedcomments"),T("drawings"),C("metadata"),T("people"),x.length>2&&(x[x.length]="</Types>",x[1]=x[1].replace("/>",">")),x.join("")}var RELS={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function get_rels_path(n){var r=n.lastIndexOf("/");return n.slice(0,r+1)+"_rels/"+n.slice(r+1)+".rels"}function parse_rels(n,r){var g={"!id":{}};if(!n)return g;r.charAt(0)!=="/"&&(r="/"+r);var _={};return(n.match(tagregex)||[]).forEach(function(x){var S=parsexmltag(x);if(S[0]==="<Relationship"){var E={};E.Type=S.Type,E.Target=S.Target,E.Id=S.Id,S.TargetMode&&(E.TargetMode=S.TargetMode);var C=S.TargetMode==="External"?S.Target:resolve_path(S.Target,r);g[C]=E,_[S.Id]=E}}),g["!id"]=_,g}function write_rels(n){var r=[XML_HEADER,writextag("Relationships",null,{xmlns:XMLNS.RELS})];return keys$2(n["!id"]).forEach(function(g){r[r.length]=writextag("Relationship",null,n["!id"][g])}),r.length>2&&(r[r.length]="</Relationships>",r[1]=r[1].replace("/>",">")),r.join("")}function add_rels(n,r,g,_,x,S){if(x||(x={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),r<0)for(r=n["!idx"];n["!id"]["rId"+r];++r);if(n["!idx"]=r+1,x.Id="rId"+r,x.Type=_,x.Target=g,[RELS.HLINK,RELS.XPATH,RELS.XMISS].indexOf(x.Type)>-1&&(x.TargetMode="External"),n["!id"][x.Id])throw new Error("Cannot rewrite rId "+r);return n["!id"][x.Id]=x,n[("/"+x.Target).replace("//","/")]=x,r}var CT_ODS="application/vnd.oasis.opendocument.spreadsheet";function parse_manifest(n,r){for(var g=xlml_normalize(n),_,x;_=xlmlregex.exec(g);)switch(_[3]){case"manifest":break;case"file-entry":if(x=parsexmltag(_[0],!1),x.path=="/"&&x.type!==CT_ODS)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(r&&r.WTF)throw _}}function write_manifest(n){var r=[XML_HEADER];r.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),r.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var g=0;g<n.length;++g)r.push('  <manifest:file-entry manifest:full-path="'+n[g][0]+'" manifest:media-type="'+n[g][1]+`"/>
`);return r.push("</manifest:manifest>"),r.join("")}function write_rdf_type(n,r,g){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(g||"odf")+"#"+r+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf_has(n,r){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+r+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf(n){var r=[XML_HEADER];r.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var g=0;g!=n.length;++g)r.push(write_rdf_type(n[g][0],n[g][1])),r.push(write_rdf_has("",n[g][0]));return r.push(write_rdf_type("","Document","pkg")),r.push("</rdf:RDF>"),r.join("")}function write_meta_ods(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XLSX.version+"</meta:generator></office:meta></office:document-meta>"}var CORE_PROPS=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],CORE_PROPS_REGEX=function(){for(var n=new Array(CORE_PROPS.length),r=0;r<CORE_PROPS.length;++r){var g=CORE_PROPS[r],_="(?:"+g[0].slice(0,g[0].indexOf(":"))+":)"+g[0].slice(g[0].indexOf(":")+1);n[r]=new RegExp("<"+_+"[^>]*>([\\s\\S]*?)</"+_+">")}return n}();function parse_core_props(n){var r={};n=utf8read(n);for(var g=0;g<CORE_PROPS.length;++g){var _=CORE_PROPS[g],x=n.match(CORE_PROPS_REGEX[g]);x!=null&&x.length>0&&(r[_[1]]=unescapexml(x[1])),_[2]==="date"&&r[_[1]]&&(r[_[1]]=parseDate(r[_[1]]))}return r}function cp_doit(n,r,g,_,x){x[n]!=null||r==null||r===""||(x[n]=r,r=escapexml(r),_[_.length]=g?writextag(n,r,g):writetag(n,r))}function write_core_props(n,r){var g=r||{},_=[XML_HEADER,writextag("cp:coreProperties",null,{"xmlns:cp":XMLNS.CORE_PROPS,"xmlns:dc":XMLNS.dc,"xmlns:dcterms":XMLNS.dcterms,"xmlns:dcmitype":XMLNS.dcmitype,"xmlns:xsi":XMLNS.xsi})],x={};if(!n&&!g.Props)return _.join("");n&&(n.CreatedDate!=null&&cp_doit("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:write_w3cdtf(n.CreatedDate,g.WTF),{"xsi:type":"dcterms:W3CDTF"},_,x),n.ModifiedDate!=null&&cp_doit("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:write_w3cdtf(n.ModifiedDate,g.WTF),{"xsi:type":"dcterms:W3CDTF"},_,x));for(var S=0;S!=CORE_PROPS.length;++S){var E=CORE_PROPS[S],C=g.Props&&g.Props[E[1]]!=null?g.Props[E[1]]:n?n[E[1]]:null;C===!0?C="1":C===!1?C="0":typeof C=="number"&&(C=String(C)),C!=null&&cp_doit(E[0],C,null,_,x)}return _.length>2&&(_[_.length]="</cp:coreProperties>",_[1]=_[1].replace("/>",">")),_.join("")}var EXT_PROPS=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PseudoPropsPairs=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function load_props_pairs(n,r,g,_){var x=[];if(typeof n=="string")x=parseVector(n,_);else for(var S=0;S<n.length;++S)x=x.concat(n[S].map(function(A){return{v:A}}));var E=typeof r=="string"?parseVector(r,_).map(function(A){return A.v}):r,C=0,T=0;if(E.length>0)for(var R=0;R!==x.length;R+=2){switch(T=+x[R+1].v,x[R].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":g.Worksheets=T,g.SheetNames=E.slice(C,C+T);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":g.NamedRanges=T,g.DefinedNames=E.slice(C,C+T);break;case"Charts":case"Diagramme":g.Chartsheets=T,g.ChartNames=E.slice(C,C+T);break}C+=T}}function parse_ext_props(n,r,g){var _={};return r||(r={}),n=utf8read(n),EXT_PROPS.forEach(function(x){var S=(n.match(matchtag(x[0]))||[])[1];switch(x[2]){case"string":S&&(r[x[1]]=unescapexml(S));break;case"bool":r[x[1]]=S==="true";break;case"raw":var E=n.match(new RegExp("<"+x[0]+"[^>]*>([\\s\\S]*?)</"+x[0]+">"));E&&E.length>0&&(_[x[1]]=E[1]);break}}),_.HeadingPairs&&_.TitlesOfParts&&load_props_pairs(_.HeadingPairs,_.TitlesOfParts,r,g),r}function write_ext_props(n){var r=[],g=writextag;return n||(n={}),n.Application="SheetJS",r[r.length]=XML_HEADER,r[r.length]=writextag("Properties",null,{xmlns:XMLNS.EXT_PROPS,"xmlns:vt":XMLNS.vt}),EXT_PROPS.forEach(function(_){if(n[_[1]]!==void 0){var x;switch(_[2]){case"string":x=escapexml(String(n[_[1]]));break;case"bool":x=n[_[1]]?"true":"false";break}x!==void 0&&(r[r.length]=g(_[0],x))}}),r[r.length]=g("HeadingPairs",g("vt:vector",g("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+g("vt:variant",g("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),r[r.length]=g("TitlesOfParts",g("vt:vector",n.SheetNames.map(function(_){return"<vt:lpstr>"+escapexml(_)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}var custregex=/<[^>]+>[^<]*/g;function parse_cust_props(n,r){var g={},_="",x=n.match(custregex);if(x)for(var S=0;S!=x.length;++S){var E=x[S],C=parsexmltag(E);switch(strip_ns(C[0])){case"<?xml":break;case"<Properties":break;case"<property":_=unescapexml(C.name);break;case"</property>":_=null;break;default:if(E.indexOf("<vt:")===0){var T=E.split(">"),R=T[0].slice(4),A=T[1];switch(R){case"lpstr":case"bstr":case"lpwstr":g[_]=unescapexml(A);break;case"bool":g[_]=parsexmlbool(A);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":g[_]=parseInt(A,10);break;case"r4":case"r8":case"decimal":g[_]=parseFloat(A);break;case"filetime":case"date":g[_]=parseDate(A);break;case"cy":case"error":g[_]=unescapexml(A);break;default:if(R.slice(-1)=="/")break;r.WTF&&typeof console<"u"&&console.warn("Unexpected",E,R,T)}}else if(E.slice(0,2)!=="</"){if(r.WTF)throw new Error(E)}}}return g}function write_cust_props(n){var r=[XML_HEADER,writextag("Properties",null,{xmlns:XMLNS.CUST_PROPS,"xmlns:vt":XMLNS.vt})];if(!n)return r.join("");var g=1;return keys$2(n).forEach(function(x){++g,r[r.length]=writextag("property",write_vt(n[x]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:g,name:escapexml(x)})}),r.length>2&&(r[r.length]="</Properties>",r[1]=r[1].replace("/>",">")),r.join("")}var XLMLDocPropsMap={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},evert_XLMLDPM;function xlml_set_prop(n,r,g){evert_XLMLDPM||(evert_XLMLDPM=evert(XLMLDocPropsMap)),r=evert_XLMLDPM[r]||r,n[r]=g}function xlml_write_docprops(n,r){var g=[];return keys$2(XLMLDocPropsMap).map(function(_){for(var x=0;x<CORE_PROPS.length;++x)if(CORE_PROPS[x][1]==_)return CORE_PROPS[x];for(x=0;x<EXT_PROPS.length;++x)if(EXT_PROPS[x][1]==_)return EXT_PROPS[x];throw _}).forEach(function(_){if(n[_[1]]!=null){var x=r&&r.Props&&r.Props[_[1]]!=null?r.Props[_[1]]:n[_[1]];switch(_[2]){case"date":x=new Date(x).toISOString().replace(/\.\d*Z/,"Z");break}typeof x=="number"?x=String(x):x===!0||x===!1?x=x?"1":"0":x instanceof Date&&(x=new Date(x).toISOString().replace(/\.\d*Z/,"")),g.push(writetag(XLMLDocPropsMap[_[1]]||_[1],x))}}),writextag("DocumentProperties",g.join(""),{xmlns:XLMLNS.o})}function xlml_write_custprops(n,r){var g=["Worksheets","SheetNames"],_="CustomDocumentProperties",x=[];return n&&keys$2(n).forEach(function(S){if(Object.prototype.hasOwnProperty.call(n,S)){for(var E=0;E<CORE_PROPS.length;++E)if(S==CORE_PROPS[E][1])return;for(E=0;E<EXT_PROPS.length;++E)if(S==EXT_PROPS[E][1])return;for(E=0;E<g.length;++E)if(S==g[E])return;var C=n[S],T="string";typeof C=="number"?(T="float",C=String(C)):C===!0||C===!1?(T="boolean",C=C?"1":"0"):C=String(C),x.push(writextag(escapexmltag(S),C,{"dt:dt":T}))}}),r&&keys$2(r).forEach(function(S){if(Object.prototype.hasOwnProperty.call(r,S)&&!(n&&Object.prototype.hasOwnProperty.call(n,S))){var E=r[S],C="string";typeof E=="number"?(C="float",E=String(E)):E===!0||E===!1?(C="boolean",E=E?"1":"0"):E instanceof Date?(C="dateTime.tz",E=E.toISOString()):E=String(E),x.push(writextag(escapexmltag(S),E,{"dt:dt":C}))}}),"<"+_+' xmlns="'+XLMLNS.o+'">'+x.join("")+"</"+_+">"}function parse_FILETIME(n){var r=n.read_shift(4),g=n.read_shift(4);return new Date((g/1e7*Math.pow(2,32)+r/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function write_FILETIME(n){var r=typeof n=="string"?new Date(Date.parse(n)):n,g=r.getTime()/1e3+11644473600,_=g%Math.pow(2,32),x=(g-_)/Math.pow(2,32);_*=1e7,x*=1e7;var S=_/Math.pow(2,32)|0;S>0&&(_=_%Math.pow(2,32),x+=S);var E=new_buf(8);return E.write_shift(4,_),E.write_shift(4,x),E}function parse_lpstr(n,r,g){var _=n.l,x=n.read_shift(0,"lpstr-cp");if(g)for(;n.l-_&3;)++n.l;return x}function parse_lpwstr(n,r,g){var _=n.read_shift(0,"lpwstr");return _}function parse_VtStringBase(n,r,g){return r===31?parse_lpwstr(n):parse_lpstr(n,r,g)}function parse_VtString(n,r,g){return parse_VtStringBase(n,r,g===!1?0:4)}function parse_VtUnalignedString(n,r){if(!r)throw new Error("VtUnalignedString must have positive length");return parse_VtStringBase(n,r,0)}function parse_VtVecLpwstrValue(n){for(var r=n.read_shift(4),g=[],_=0;_!=r;++_){var x=n.l;g[_]=n.read_shift(0,"lpwstr").replace(chr0,""),n.l-x&2&&(n.l+=2)}return g}function parse_VtVecUnalignedLpstrValue(n){for(var r=n.read_shift(4),g=[],_=0;_!=r;++_)g[_]=n.read_shift(0,"lpstr-cp").replace(chr0,"");return g}function parse_VtHeadingPair(n){var r=n.l,g=parse_TypedPropertyValue(n,VT_USTR);n[n.l]==0&&n[n.l+1]==0&&n.l-r&2&&(n.l+=2);var _=parse_TypedPropertyValue(n,VT_I4);return[g,_]}function parse_VtVecHeadingPairValue(n){for(var r=n.read_shift(4),g=[],_=0;_<r/2;++_)g.push(parse_VtHeadingPair(n));return g}function parse_dictionary(n,r){for(var g=n.read_shift(4),_={},x=0;x!=g;++x){var S=n.read_shift(4),E=n.read_shift(4);_[S]=n.read_shift(E,r===1200?"utf16le":"utf8").replace(chr0,"").replace(chr1,"!"),r===1200&&E%2&&(n.l+=2)}return n.l&3&&(n.l=n.l>>3<<2),_}function parse_BLOB(n){var r=n.read_shift(4),g=n.slice(n.l,n.l+r);return n.l+=r,(r&3)>0&&(n.l+=4-(r&3)&3),g}function parse_ClipboardData(n){var r={};return r.Size=n.read_shift(4),n.l+=r.Size+3-(r.Size-1)%4,r}function parse_TypedPropertyValue(n,r,g){var _=n.read_shift(2),x,S=g||{};if(n.l+=2,r!==VT_VARIANT&&_!==r&&VT_CUSTOM.indexOf(r)===-1&&!((r&65534)==4126&&(_&65534)==4126))throw new Error("Expected type "+r+" saw "+_);switch(r===VT_VARIANT?_:r){case 2:return x=n.read_shift(2,"i"),S.raw||(n.l+=2),x;case 3:return x=n.read_shift(4,"i"),x;case 11:return n.read_shift(4)!==0;case 19:return x=n.read_shift(4),x;case 30:return parse_lpstr(n,_,4).replace(chr0,"");case 31:return parse_lpwstr(n);case 64:return parse_FILETIME(n);case 65:return parse_BLOB(n);case 71:return parse_ClipboardData(n);case 80:return parse_VtString(n,_,!S.raw).replace(chr0,"");case 81:return parse_VtUnalignedString(n,_).replace(chr0,"");case 4108:return parse_VtVecHeadingPairValue(n);case 4126:case 4127:return _==4127?parse_VtVecLpwstrValue(n):parse_VtVecUnalignedLpstrValue(n);default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+_)}}function write_TypedPropertyValue(n,r){var g=new_buf(4),_=new_buf(4);switch(g.write_shift(4,n==80?31:n),n){case 3:_.write_shift(-4,r);break;case 5:_=new_buf(8),_.write_shift(8,r,"f");break;case 11:_.write_shift(4,r?1:0);break;case 64:_=write_FILETIME(r);break;case 31:case 80:for(_=new_buf(4+2*(r.length+1)+(r.length%2?0:2)),_.write_shift(4,r.length+1),_.write_shift(0,r,"dbcs");_.l!=_.length;)_.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+r)}return bconcat([g,_])}function parse_PropertySet(n,r){var g=n.l,_=n.read_shift(4),x=n.read_shift(4),S=[],E=0,C=0,T=-1,R={};for(E=0;E!=x;++E){var A=n.read_shift(4),I=n.read_shift(4);S[E]=[A,I+g]}S.sort(function(F,U){return F[1]-U[1]});var B={};for(E=0;E!=x;++E){if(n.l!==S[E][1]){var D=!0;if(E>0&&r)switch(r[S[E-1][0]].t){case 2:n.l+2===S[E][1]&&(n.l+=2,D=!1);break;case 80:n.l<=S[E][1]&&(n.l=S[E][1],D=!1);break;case 4108:n.l<=S[E][1]&&(n.l=S[E][1],D=!1);break}if((!r||E==0)&&n.l<=S[E][1]&&(D=!1,n.l=S[E][1]),D)throw new Error("Read Error: Expected address "+S[E][1]+" at "+n.l+" :"+E)}if(r){if(S[E][0]==0&&S.length>E+1&&S[E][1]==S[E+1][1])continue;var N=r[S[E][0]];if(B[N.n]=parse_TypedPropertyValue(n,N.t,{raw:!0}),N.p==="version"&&(B[N.n]=String(B[N.n]>>16)+"."+("0000"+String(B[N.n]&65535)).slice(-4)),N.n=="CodePage")switch(B[N.n]){case 0:B[N.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:set_cp(C=B[N.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+B[N.n])}}else if(S[E][0]===1){if(C=B.CodePage=parse_TypedPropertyValue(n,VT_I2),set_cp(C),T!==-1){var M=n.l;n.l=S[T][1],R=parse_dictionary(n,C),n.l=M}}else if(S[E][0]===0){if(C===0){T=E,n.l=S[E+1][1];continue}R=parse_dictionary(n,C)}else{var O=R[S[E][0]],L;switch(n[n.l]){case 65:n.l+=4,L=parse_BLOB(n);break;case 30:n.l+=4,L=parse_VtString(n,n[n.l-4]).replace(/\u0000+$/,"");break;case 31:n.l+=4,L=parse_VtString(n,n[n.l-4]).replace(/\u0000+$/,"");break;case 3:n.l+=4,L=n.read_shift(4,"i");break;case 19:n.l+=4,L=n.read_shift(4);break;case 5:n.l+=4,L=n.read_shift(8,"f");break;case 11:n.l+=4,L=parsebool(n,4);break;case 64:n.l+=4,L=parseDate(parse_FILETIME(n));break;default:throw new Error("unparsed value: "+n[n.l])}B[O]=L}}return n.l=g+_,B}var XLSPSSkip=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function guess_property_type(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function write_PropertySet(n,r,g){var _=new_buf(8),x=[],S=[],E=8,C=0,T=new_buf(8),R=new_buf(8);if(T.write_shift(4,2),T.write_shift(4,1200),R.write_shift(4,1),S.push(T),x.push(R),E+=8+T.length,!r){R=new_buf(8),R.write_shift(4,0),x.unshift(R);var A=[new_buf(4)];for(A[0].write_shift(4,n.length),C=0;C<n.length;++C){var I=n[C][0];for(T=new_buf(8+2*(I.length+1)+(I.length%2?0:2)),T.write_shift(4,C+2),T.write_shift(4,I.length+1),T.write_shift(0,I,"dbcs");T.l!=T.length;)T.write_shift(1,0);A.push(T)}T=bconcat(A),S.unshift(T),E+=8+T.length}for(C=0;C<n.length;++C)if(!(r&&!r[n[C][0]])&&!(XLSPSSkip.indexOf(n[C][0])>-1||PseudoPropsPairs.indexOf(n[C][0])>-1)&&n[C][1]!=null){var B=n[C][1],D=0;if(r){D=+r[n[C][0]];var N=g[D];if(N.p=="version"&&typeof B=="string"){var M=B.split(".");B=(+M[0]<<16)+(+M[1]||0)}T=write_TypedPropertyValue(N.t,B)}else{var O=guess_property_type(B);O==-1&&(O=31,B=String(B)),T=write_TypedPropertyValue(O,B)}S.push(T),R=new_buf(8),R.write_shift(4,r?D:2+C),x.push(R),E+=8+T.length}var L=8*(S.length+1);for(C=0;C<S.length;++C)x[C].write_shift(4,L),L+=S[C].length;return _.write_shift(4,E),_.write_shift(4,S.length),bconcat([_].concat(x).concat(S))}function parse_PropertySetStream(n,r,g){var _=n.content;if(!_)return{};prep_blob(_,0);var x,S,E,C,T=0;_.chk("feff","Byte Order: "),_.read_shift(2);var R=_.read_shift(4),A=_.read_shift(16);if(A!==CFB.utils.consts.HEADER_CLSID&&A!==g)throw new Error("Bad PropertySet CLSID "+A);if(x=_.read_shift(4),x!==1&&x!==2)throw new Error("Unrecognized #Sets: "+x);if(S=_.read_shift(16),C=_.read_shift(4),x===1&&C!==_.l)throw new Error("Length mismatch: "+C+" !== "+_.l);x===2&&(E=_.read_shift(16),T=_.read_shift(4));var I=parse_PropertySet(_,r),B={SystemIdentifier:R};for(var D in I)B[D]=I[D];if(B.FMTID=S,x===1)return B;if(T-_.l==2&&(_.l+=2),_.l!==T)throw new Error("Length mismatch 2: "+_.l+" !== "+T);var N;try{N=parse_PropertySet(_,null)}catch{}for(D in N)B[D]=N[D];return B.FMTID=[S,E],B}function write_PropertySetStream(n,r,g,_,x,S){var E=new_buf(x?68:48),C=[E];E.write_shift(2,65534),E.write_shift(2,0),E.write_shift(4,842412599),E.write_shift(16,CFB.utils.consts.HEADER_CLSID,"hex"),E.write_shift(4,x?2:1),E.write_shift(16,r,"hex"),E.write_shift(4,x?68:48);var T=write_PropertySet(n,g,_);if(C.push(T),x){var R=write_PropertySet(x,null,null);E.write_shift(16,S,"hex"),E.write_shift(4,68+T.length),C.push(R)}return bconcat(C)}function parsenoop2(n,r){return n.read_shift(r),null}function writezeroes(n,r){r||(r=new_buf(n));for(var g=0;g<n;++g)r.write_shift(1,0);return r}function parslurp(n,r,g){for(var _=[],x=n.l+r;n.l<x;)_.push(g(n,x-n.l));if(x!==n.l)throw new Error("Slurp error");return _}function parsebool(n,r){return n.read_shift(r)===1}function writebool(n,r){return r||(r=new_buf(2)),r.write_shift(2,+!!n),r}function parseuint16(n){return n.read_shift(2,"u")}function writeuint16(n,r){return r||(r=new_buf(2)),r.write_shift(2,n),r}function parseuint16a(n,r){return parslurp(n,r,parseuint16)}function parse_Bes(n){var r=n.read_shift(1),g=n.read_shift(1);return g===1?r:r===1}function write_Bes(n,r,g){return g||(g=new_buf(2)),g.write_shift(1,r=="e"?+n:+!!n),g.write_shift(1,r=="e"?1:0),g}function parse_ShortXLUnicodeString(n,r,g){var _=n.read_shift(g&&g.biff>=12?2:1),x="sbcs-cont",S=current_codepage;if(g&&g.biff>=8&&(current_codepage=1200),!g||g.biff==8){var E=n.read_shift(1);E&&(x="dbcs-cont")}else g.biff==12&&(x="wstr");g.biff>=2&&g.biff<=5&&(x="cpstr");var C=_?n.read_shift(_,x):"";return current_codepage=S,C}function parse_XLUnicodeRichExtendedString(n){var r=current_codepage;current_codepage=1200;var g=n.read_shift(2),_=n.read_shift(1),x=_&4,S=_&8,E=1+(_&1),C=0,T,R={};S&&(C=n.read_shift(2)),x&&(T=n.read_shift(4));var A=E==2?"dbcs-cont":"sbcs-cont",I=g===0?"":n.read_shift(g,A);return S&&(n.l+=4*C),x&&(n.l+=T),R.t=I,S||(R.raw="<t>"+R.t+"</t>",R.r=R.t),current_codepage=r,R}function write_XLUnicodeRichExtendedString(n){var r=n.t||"",g=new_buf(3);g.write_shift(2,r.length),g.write_shift(1,1);var _=new_buf(2*r.length);_.write_shift(2*r.length,r,"utf16le");var x=[g,_];return bconcat(x)}function parse_XLUnicodeStringNoCch(n,r,g){var _;if(g){if(g.biff>=2&&g.biff<=5)return n.read_shift(r,"cpstr");if(g.biff>=12)return n.read_shift(r,"dbcs-cont")}var x=n.read_shift(1);return x===0?_=n.read_shift(r,"sbcs-cont"):_=n.read_shift(r,"dbcs-cont"),_}function parse_XLUnicodeString(n,r,g){var _=n.read_shift(g&&g.biff==2?1:2);return _===0?(n.l++,""):parse_XLUnicodeStringNoCch(n,_,g)}function parse_XLUnicodeString2(n,r,g){if(g.biff>5)return parse_XLUnicodeString(n,r,g);var _=n.read_shift(1);return _===0?(n.l++,""):n.read_shift(_,g.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function write_XLUnicodeString(n,r,g){return g||(g=new_buf(3+2*n.length)),g.write_shift(2,n.length),g.write_shift(1,1),g.write_shift(31,n,"utf16le"),g}function parse_ControlInfo(n){var r=n.read_shift(1);n.l++;var g=n.read_shift(2);return n.l+=2,[r,g]}function parse_URLMoniker(n){var r=n.read_shift(4),g=n.l,_=!1;r>24&&(n.l+=r-24,n.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(_=!0),n.l=g);var x=n.read_shift((_?r-24:r)>>1,"utf16le").replace(chr0,"");return _&&(n.l+=24),x}function parse_FileMoniker(n){for(var r=n.read_shift(2),g="";r-- >0;)g+="../";var _=n.read_shift(0,"lpstr-ansi");if(n.l+=2,n.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var x=n.read_shift(4);if(x===0)return g+_.replace(/\\/g,"/");var S=n.read_shift(4);if(n.read_shift(2)!=3)throw new Error("Bad FileMoniker");var E=n.read_shift(S>>1,"utf16le").replace(chr0,"");return g+E}function parse_HyperlinkMoniker(n,r){var g=n.read_shift(16);switch(g){case"e0c9ea79f9bace118c8200aa004ba90b":return parse_URLMoniker(n);case"0303000000000000c000000000000046":return parse_FileMoniker(n);default:throw new Error("Unsupported Moniker "+g)}}function parse_HyperlinkString(n){var r=n.read_shift(4),g=r>0?n.read_shift(r,"utf16le").replace(chr0,""):"";return g}function write_HyperlinkString(n,r){r||(r=new_buf(6+n.length*2)),r.write_shift(4,1+n.length);for(var g=0;g<n.length;++g)r.write_shift(2,n.charCodeAt(g));return r.write_shift(2,0),r}function parse_Hyperlink(n,r){var g=n.l+r,_=n.read_shift(4);if(_!==2)throw new Error("Unrecognized streamVersion: "+_);var x=n.read_shift(2);n.l+=2;var S,E,C,T,R="",A,I;x&16&&(S=parse_HyperlinkString(n,g-n.l)),x&128&&(E=parse_HyperlinkString(n,g-n.l)),(x&257)===257&&(C=parse_HyperlinkString(n,g-n.l)),(x&257)===1&&(T=parse_HyperlinkMoniker(n,g-n.l)),x&8&&(R=parse_HyperlinkString(n,g-n.l)),x&32&&(A=n.read_shift(16)),x&64&&(I=parse_FILETIME(n)),n.l=g;var B=E||C||T||"";B&&R&&(B+="#"+R),B||(B="#"+R),x&2&&B.charAt(0)=="/"&&B.charAt(1)!="/"&&(B="file://"+B);var D={Target:B};return A&&(D.guid=A),I&&(D.time=I),S&&(D.Tooltip=S),D}function write_Hyperlink(n){var r=new_buf(512),g=0,_=n.Target;_.slice(0,7)=="file://"&&(_=_.slice(7));var x=_.indexOf("#"),S=x>-1?31:23;switch(_.charAt(0)){case"#":S=28;break;case".":S&=-3;break}r.write_shift(4,2),r.write_shift(4,S);var E=[8,6815827,6619237,4849780,83];for(g=0;g<E.length;++g)r.write_shift(4,E[g]);if(S==28)_=_.slice(1),write_HyperlinkString(_,r);else if(S&2){for(E="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),g=0;g<E.length;++g)r.write_shift(1,parseInt(E[g],16));var C=x>-1?_.slice(0,x):_;for(r.write_shift(4,2*(C.length+1)),g=0;g<C.length;++g)r.write_shift(2,C.charCodeAt(g));r.write_shift(2,0),S&8&&write_HyperlinkString(x>-1?_.slice(x+1):"",r)}else{for(E="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),g=0;g<E.length;++g)r.write_shift(1,parseInt(E[g],16));for(var T=0;_.slice(T*3,T*3+3)=="../"||_.slice(T*3,T*3+3)=="..\\";)++T;for(r.write_shift(2,T),r.write_shift(4,_.length-3*T+1),g=0;g<_.length-3*T;++g)r.write_shift(1,_.charCodeAt(g+3*T)&255);for(r.write_shift(1,0),r.write_shift(2,65535),r.write_shift(2,57005),g=0;g<6;++g)r.write_shift(4,0)}return r.slice(0,r.l)}function parse_LongRGBA(n){var r=n.read_shift(1),g=n.read_shift(1),_=n.read_shift(1),x=n.read_shift(1);return[r,g,_,x]}function parse_LongRGB(n,r){var g=parse_LongRGBA(n);return g[3]=0,g}function parse_XLSCell(n){var r=n.read_shift(2),g=n.read_shift(2),_=n.read_shift(2);return{r,c:g,ixfe:_}}function write_XLSCell(n,r,g,_){return _||(_=new_buf(6)),_.write_shift(2,n),_.write_shift(2,r),_.write_shift(2,g||0),_}function parse_frtHeader(n){var r=n.read_shift(2),g=n.read_shift(2);return n.l+=8,{type:r,flags:g}}function parse_OptXLUnicodeString(n,r,g){return r===0?"":parse_XLUnicodeString2(n,r,g)}function parse_XTI(n,r,g){var _=g.biff>8?4:2,x=n.read_shift(_),S=n.read_shift(_,"i"),E=n.read_shift(_,"i");return[x,S,E]}function parse_RkRec(n){var r=n.read_shift(2),g=parse_RkNumber(n);return[r,g]}function parse_AddinUdf(n,r,g){n.l+=4,r-=4;var _=n.l+r,x=parse_ShortXLUnicodeString(n,r,g),S=n.read_shift(2);if(_-=n.l,S!==_)throw new Error("Malformed AddinUdf: padding = "+_+" != "+S);return n.l+=S,x}function parse_Ref8U(n){var r=n.read_shift(2),g=n.read_shift(2),_=n.read_shift(2),x=n.read_shift(2);return{s:{c:_,r},e:{c:x,r:g}}}function write_Ref8U(n,r){return r||(r=new_buf(8)),r.write_shift(2,n.s.r),r.write_shift(2,n.e.r),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c),r}function parse_RefU(n){var r=n.read_shift(2),g=n.read_shift(2),_=n.read_shift(1),x=n.read_shift(1);return{s:{c:_,r},e:{c:x,r:g}}}var parse_Ref=parse_RefU;function parse_FtCmo(n){n.l+=4;var r=n.read_shift(2),g=n.read_shift(2),_=n.read_shift(2);return n.l+=12,[g,r,_]}function parse_FtNts(n){var r={};return n.l+=4,n.l+=16,r.fSharedNote=n.read_shift(2),n.l+=4,r}function parse_FtCf(n){var r={};return n.l+=4,n.cf=n.read_shift(2),r}function parse_FtSkip(n){n.l+=2,n.l+=n.read_shift(2)}var FtTab={0:parse_FtSkip,4:parse_FtSkip,5:parse_FtSkip,6:parse_FtSkip,7:parse_FtCf,8:parse_FtSkip,9:parse_FtSkip,10:parse_FtSkip,11:parse_FtSkip,12:parse_FtSkip,13:parse_FtNts,14:parse_FtSkip,15:parse_FtSkip,16:parse_FtSkip,17:parse_FtSkip,18:parse_FtSkip,19:parse_FtSkip,20:parse_FtSkip,21:parse_FtCmo};function parse_FtArray(n,r){for(var g=n.l+r,_=[];n.l<g;){var x=n.read_shift(2);n.l-=2;try{_.push(FtTab[x](n,g-n.l))}catch{return n.l=g,_}}return n.l!=g&&(n.l=g),_}function parse_BOF(n,r){var g={BIFFVer:0,dt:0};switch(g.BIFFVer=n.read_shift(2),r-=2,r>=2&&(g.dt=n.read_shift(2),n.l-=2),g.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(r>6)throw new Error("Unexpected BIFF Ver "+g.BIFFVer)}return n.read_shift(r),g}function write_BOF(n,r,g){var _=1536,x=16;switch(g.bookType){case"biff8":break;case"biff5":_=1280,x=8;break;case"biff4":_=4,x=6;break;case"biff3":_=3,x=6;break;case"biff2":_=2,x=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var S=new_buf(x);return S.write_shift(2,_),S.write_shift(2,r),x>4&&S.write_shift(2,29282),x>6&&S.write_shift(2,1997),x>8&&(S.write_shift(2,49161),S.write_shift(2,1),S.write_shift(2,1798),S.write_shift(2,0)),S}function parse_InterfaceHdr(n,r){return r===0||n.read_shift(2),1200}function parse_WriteAccess(n,r,g){if(g.enc)return n.l+=r,"";var _=n.l,x=parse_XLUnicodeString2(n,0,g);return n.read_shift(r+_-n.l),x}function write_WriteAccess(n,r){var g=!r||r.biff==8,_=new_buf(g?112:54);for(_.write_shift(r.biff==8?2:1,7),g&&_.write_shift(1,0),_.write_shift(4,859007059),_.write_shift(4,5458548|(g?0:536870912));_.l<_.length;)_.write_shift(1,g?0:32);return _}function parse_WsBool(n,r,g){var _=g&&g.biff==8||r==2?n.read_shift(2):(n.l+=r,0);return{fDialog:_&16,fBelow:_&64,fRight:_&128}}function parse_BoundSheet8(n,r,g){var _=n.read_shift(4),x=n.read_shift(1)&3,S=n.read_shift(1);switch(S){case 0:S="Worksheet";break;case 1:S="Macrosheet";break;case 2:S="Chartsheet";break;case 6:S="VBAModule";break}var E=parse_ShortXLUnicodeString(n,0,g);return E.length===0&&(E="Sheet1"),{pos:_,hs:x,dt:S,name:E}}function write_BoundSheet8(n,r){var g=!r||r.biff>=8?2:1,_=new_buf(8+g*n.name.length);_.write_shift(4,n.pos),_.write_shift(1,n.hs||0),_.write_shift(1,n.dt),_.write_shift(1,n.name.length),r.biff>=8&&_.write_shift(1,1),_.write_shift(g*n.name.length,n.name,r.biff<8?"sbcs":"utf16le");var x=_.slice(0,_.l);return x.l=_.l,x}function parse_SST(n,r){for(var g=n.l+r,_=n.read_shift(4),x=n.read_shift(4),S=[],E=0;E!=x&&n.l<g;++E)S.push(parse_XLUnicodeRichExtendedString(n));return S.Count=_,S.Unique=x,S}function write_SST(n,r){var g=new_buf(8);g.write_shift(4,n.Count),g.write_shift(4,n.Unique);for(var _=[],x=0;x<n.length;++x)_[x]=write_XLUnicodeRichExtendedString(n[x]);var S=bconcat([g].concat(_));return S.parts=[g.length].concat(_.map(function(E){return E.length})),S}function parse_ExtSST(n,r){var g={};return g.dsst=n.read_shift(2),n.l+=r-2,g}function parse_Row(n){var r={};r.r=n.read_shift(2),r.c=n.read_shift(2),r.cnt=n.read_shift(2)-r.c;var g=n.read_shift(2);n.l+=4;var _=n.read_shift(1);return n.l+=3,_&7&&(r.level=_&7),_&32&&(r.hidden=!0),_&64&&(r.hpt=g/20),r}function parse_ForceFullCalculation(n){var r=parse_frtHeader(n);if(r.type!=2211)throw new Error("Invalid Future Record "+r.type);var g=n.read_shift(4);return g!==0}function parse_RecalcId(n){return n.read_shift(2),n.read_shift(4)}function parse_DefaultRowHeight(n,r,g){var _=0;g&&g.biff==2||(_=n.read_shift(2));var x=n.read_shift(2);g&&g.biff==2&&(_=1-(x>>15),x&=32767);var S={Unsynced:_&1,DyZero:(_&2)>>1,ExAsc:(_&4)>>2,ExDsc:(_&8)>>3};return[S,x]}function parse_Window1(n){var r=n.read_shift(2),g=n.read_shift(2),_=n.read_shift(2),x=n.read_shift(2),S=n.read_shift(2),E=n.read_shift(2),C=n.read_shift(2),T=n.read_shift(2),R=n.read_shift(2);return{Pos:[r,g],Dim:[_,x],Flags:S,CurTab:E,FirstTab:C,Selected:T,TabRatio:R}}function write_Window1(){var n=new_buf(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function parse_Window2(n,r,g){if(g&&g.biff>=2&&g.biff<5)return{};var _=n.read_shift(2);return{RTL:_&64}}function write_Window2(n){var r=new_buf(18),g=1718;return n&&n.RTL&&(g|=64),r.write_shift(2,g),r.write_shift(4,0),r.write_shift(4,64),r.write_shift(4,0),r.write_shift(4,0),r}function parse_Pane(){}function parse_Font(n,r,g){var _={dyHeight:n.read_shift(2),fl:n.read_shift(2)};switch(g&&g.biff||8){case 2:break;case 3:case 4:n.l+=2;break;default:n.l+=10;break}return _.name=parse_ShortXLUnicodeString(n,0,g),_}function write_Font(n,r){var g=n.name||"Arial",_=r&&r.biff==5,x=_?15+g.length:16+2*g.length,S=new_buf(x);return S.write_shift(2,(n.sz||12)*20),S.write_shift(4,0),S.write_shift(2,400),S.write_shift(4,0),S.write_shift(2,0),S.write_shift(1,g.length),_||S.write_shift(1,1),S.write_shift((_?1:2)*g.length,g,_?"sbcs":"utf16le"),S}function parse_LabelSst(n){var r=parse_XLSCell(n);return r.isst=n.read_shift(4),r}function write_LabelSst(n,r,g,_){var x=new_buf(10);return write_XLSCell(n,r,_,x),x.write_shift(4,g),x}function parse_Label(n,r,g){g.biffguess&&g.biff==2&&(g.biff=5);var _=n.l+r,x=parse_XLSCell(n);g.biff==2&&n.l++;var S=parse_XLUnicodeString(n,_-n.l,g);return x.val=S,x}function write_Label(n,r,g,_,x){var S=!x||x.biff==8,E=new_buf(8+ +S+(1+S)*g.length);return write_XLSCell(n,r,_,E),E.write_shift(2,g.length),S&&E.write_shift(1,1),E.write_shift((1+S)*g.length,g,S?"utf16le":"sbcs"),E}function parse_Format(n,r,g){var _=n.read_shift(2),x=parse_XLUnicodeString2(n,0,g);return[_,x]}function write_Format(n,r,g,_){var x=g&&g.biff==5;_||(_=new_buf(x?3+r.length:5+2*r.length)),_.write_shift(2,n),_.write_shift(x?1:2,r.length),x||_.write_shift(1,1),_.write_shift((x?1:2)*r.length,r,x?"sbcs":"utf16le");var S=_.length>_.l?_.slice(0,_.l):_;return S.l==null&&(S.l=S.length),S}var parse_BIFF2Format=parse_XLUnicodeString2;function parse_Dimensions(n,r,g){var _=n.l+r,x=g.biff==8||!g.biff?4:2,S=n.read_shift(x),E=n.read_shift(x),C=n.read_shift(2),T=n.read_shift(2);return n.l=_,{s:{r:S,c:C},e:{r:E,c:T}}}function write_Dimensions(n,r){var g=r.biff==8||!r.biff?4:2,_=new_buf(2*g+6);return _.write_shift(g,n.s.r),_.write_shift(g,n.e.r+1),_.write_shift(2,n.s.c),_.write_shift(2,n.e.c+1),_.write_shift(2,0),_}function parse_RK(n){var r=n.read_shift(2),g=n.read_shift(2),_=parse_RkRec(n);return{r,c:g,ixfe:_[0],rknum:_[1]}}function parse_MulRk(n,r){for(var g=n.l+r-2,_=n.read_shift(2),x=n.read_shift(2),S=[];n.l<g;)S.push(parse_RkRec(n));if(n.l!==g)throw new Error("MulRK read error");var E=n.read_shift(2);if(S.length!=E-x+1)throw new Error("MulRK length mismatch");return{r:_,c:x,C:E,rkrec:S}}function parse_MulBlank(n,r){for(var g=n.l+r-2,_=n.read_shift(2),x=n.read_shift(2),S=[];n.l<g;)S.push(n.read_shift(2));if(n.l!==g)throw new Error("MulBlank read error");var E=n.read_shift(2);if(S.length!=E-x+1)throw new Error("MulBlank length mismatch");return{r:_,c:x,C:E,ixfe:S}}function parse_CellStyleXF(n,r,g,_){var x={},S=n.read_shift(4),E=n.read_shift(4),C=n.read_shift(4),T=n.read_shift(2);return x.patternType=XLSFillPattern[C>>26],_.cellStyles&&(x.alc=S&7,x.fWrap=S>>3&1,x.alcV=S>>4&7,x.fJustLast=S>>7&1,x.trot=S>>8&255,x.cIndent=S>>16&15,x.fShrinkToFit=S>>20&1,x.iReadOrder=S>>22&2,x.fAtrNum=S>>26&1,x.fAtrFnt=S>>27&1,x.fAtrAlc=S>>28&1,x.fAtrBdr=S>>29&1,x.fAtrPat=S>>30&1,x.fAtrProt=S>>31&1,x.dgLeft=E&15,x.dgRight=E>>4&15,x.dgTop=E>>8&15,x.dgBottom=E>>12&15,x.icvLeft=E>>16&127,x.icvRight=E>>23&127,x.grbitDiag=E>>30&3,x.icvTop=C&127,x.icvBottom=C>>7&127,x.icvDiag=C>>14&127,x.dgDiag=C>>21&15,x.icvFore=T&127,x.icvBack=T>>7&127,x.fsxButton=T>>14&1),x}function parse_XF(n,r,g){var _={};return _.ifnt=n.read_shift(2),_.numFmtId=n.read_shift(2),_.flags=n.read_shift(2),_.fStyle=_.flags>>2&1,r-=6,_.data=parse_CellStyleXF(n,r,_.fStyle,g),_}function write_XF(n,r,g,_){var x=g&&g.biff==5;_||(_=new_buf(x?16:20)),_.write_shift(2,0),n.style?(_.write_shift(2,n.numFmtId||0),_.write_shift(2,65524)):(_.write_shift(2,n.numFmtId||0),_.write_shift(2,r<<4));var S=0;return n.numFmtId>0&&x&&(S|=1024),_.write_shift(4,S),_.write_shift(4,0),x||_.write_shift(4,0),_.write_shift(2,0),_}function parse_Guts(n){n.l+=4;var r=[n.read_shift(2),n.read_shift(2)];if(r[0]!==0&&r[0]--,r[1]!==0&&r[1]--,r[0]>7||r[1]>7)throw new Error("Bad Gutters: "+r.join("|"));return r}function write_Guts(n){var r=new_buf(8);return r.write_shift(4,0),r.write_shift(2,0),r.write_shift(2,0),r}function parse_BoolErr(n,r,g){var _=parse_XLSCell(n);(g.biff==2||r==9)&&++n.l;var x=parse_Bes(n);return _.val=x,_.t=x===!0||x===!1?"b":"e",_}function write_BoolErr(n,r,g,_,x,S){var E=new_buf(8);return write_XLSCell(n,r,_,E),write_Bes(g,S,E),E}function parse_Number(n,r,g){g.biffguess&&g.biff==2&&(g.biff=5);var _=parse_XLSCell(n),x=parse_Xnum(n);return _.val=x,_}function write_Number(n,r,g,_){var x=new_buf(14);return write_XLSCell(n,r,_,x),write_Xnum(g,x),x}var parse_XLHeaderFooter=parse_OptXLUnicodeString;function parse_SupBook(n,r,g){var _=n.l+r,x=n.read_shift(2),S=n.read_shift(2);if(g.sbcch=S,S==1025||S==14849)return[S,x];if(S<1||S>255)throw new Error("Unexpected SupBook type: "+S);for(var E=parse_XLUnicodeStringNoCch(n,S),C=[];_>n.l;)C.push(parse_XLUnicodeString(n));return[S,x,E,C]}function parse_ExternName(n,r,g){var _=n.read_shift(2),x,S={fBuiltIn:_&1,fWantAdvise:_>>>1&1,fWantPict:_>>>2&1,fOle:_>>>3&1,fOleLink:_>>>4&1,cf:_>>>5&1023,fIcon:_>>>15&1};return g.sbcch===14849&&(x=parse_AddinUdf(n,r-2,g)),S.body=x||n.read_shift(r-2),typeof x=="string"&&(S.Name=x),S}function parse_Lbl(n,r,g){var _=n.l+r,x=n.read_shift(2),S=n.read_shift(1),E=n.read_shift(1),C=n.read_shift(g&&g.biff==2?1:2),T=0;(!g||g.biff>=5)&&(g.biff!=5&&(n.l+=2),T=n.read_shift(2),g.biff==5&&(n.l+=2),n.l+=4);var R=parse_XLUnicodeStringNoCch(n,E,g);x&32&&(R=XLSLblBuiltIn[R.charCodeAt(0)]);var A=_-n.l;g&&g.biff==2&&--A;var I=_==n.l||C===0||!(A>0)?[]:parse_NameParsedFormula(n,A,g,C);return{chKey:S,Name:R,itab:T,rgce:I}}function parse_ExternSheet(n,r,g){if(g.biff<8)return parse_BIFF5ExternSheet(n,r,g);for(var _=[],x=n.l+r,S=n.read_shift(g.biff>8?4:2);S--!==0;)_.push(parse_XTI(n,g.biff>8?12:6,g));if(n.l!=x)throw new Error("Bad ExternSheet: "+n.l+" != "+x);return _}function parse_BIFF5ExternSheet(n,r,g){n[n.l+1]==3&&n[n.l]++;var _=parse_ShortXLUnicodeString(n,r,g);return _.charCodeAt(0)==3?_.slice(1):_}function parse_NameCmt(n,r,g){if(g.biff<8){n.l+=r;return}var _=n.read_shift(2),x=n.read_shift(2),S=parse_XLUnicodeStringNoCch(n,_,g),E=parse_XLUnicodeStringNoCch(n,x,g);return[S,E]}function parse_ShrFmla(n,r,g){var _=parse_RefU(n);n.l++;var x=n.read_shift(1);return r-=8,[parse_SharedParsedFormula(n,r,g),x,_]}function parse_Array(n,r,g){var _=parse_Ref(n);switch(g.biff){case 2:n.l++,r-=7;break;case 3:case 4:n.l+=2,r-=8;break;default:n.l+=6,r-=12}return[_,parse_ArrayParsedFormula(n,r,g)]}function parse_MTRSettings(n){var r=n.read_shift(4)!==0,g=n.read_shift(4)!==0,_=n.read_shift(4);return[r,g,_]}function parse_NoteSh(n,r,g){if(!(g.biff<8)){var _=n.read_shift(2),x=n.read_shift(2),S=n.read_shift(2),E=n.read_shift(2),C=parse_XLUnicodeString2(n,0,g);return g.biff<8&&n.read_shift(1),[{r:_,c:x},C,E,S]}}function parse_Note(n,r,g){return parse_NoteSh(n,r,g)}function parse_MergeCells(n,r){for(var g=[],_=n.read_shift(2);_--;)g.push(parse_Ref8U(n));return g}function write_MergeCells(n){var r=new_buf(2+n.length*8);r.write_shift(2,n.length);for(var g=0;g<n.length;++g)write_Ref8U(n[g],r);return r}function parse_Obj(n,r,g){if(g&&g.biff<8)return parse_BIFF5Obj(n,r,g);var _=parse_FtCmo(n),x=parse_FtArray(n,r-22,_[1]);return{cmo:_,ft:x}}var parse_BIFF5OT={8:function(n,r){var g=n.l+r;n.l+=10;var _=n.read_shift(2);n.l+=4,n.l+=2,n.l+=2,n.l+=2,n.l+=4;var x=n.read_shift(1);return n.l+=x,n.l=g,{fmt:_}}};function parse_BIFF5Obj(n,r,g){n.l+=4;var _=n.read_shift(2),x=n.read_shift(2),S=n.read_shift(2);n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=2,n.l+=6,r-=36;var E=[];return E.push((parse_BIFF5OT[_]||parsenoop)(n,r,g)),{cmo:[x,_,S],ft:E}}function parse_TxO(n,r,g){var _=n.l,x="";try{n.l+=4;var S=(g.lastobj||{cmo:[0,0]}).cmo[1],E;[0,5,7,11,12,14].indexOf(S)==-1?n.l+=6:E=parse_ControlInfo(n,6,g);var C=n.read_shift(2);n.read_shift(2),parseuint16(n,2);var T=n.read_shift(2);n.l+=T;for(var R=1;R<n.lens.length-1;++R){if(n.l-_!=n.lens[R])throw new Error("TxO: bad continue record");var A=n[n.l],I=parse_XLUnicodeStringNoCch(n,n.lens[R+1]-n.lens[R]-1);if(x+=I,x.length>=(A?C:2*C))break}if(x.length!==C&&x.length!==C*2)throw new Error("cchText: "+C+" != "+x.length);return n.l=_+r,{t:x}}catch{return n.l=_+r,{t:x}}}function parse_HLink(n,r){var g=parse_Ref8U(n);n.l+=16;var _=parse_Hyperlink(n,r-24);return[g,_]}function write_HLink(n){var r=new_buf(24),g=decode_cell(n[0]);r.write_shift(2,g.r),r.write_shift(2,g.r),r.write_shift(2,g.c),r.write_shift(2,g.c);for(var _="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),x=0;x<16;++x)r.write_shift(1,parseInt(_[x],16));return bconcat([r,write_Hyperlink(n[1])])}function parse_HLinkTooltip(n,r){n.read_shift(2);var g=parse_Ref8U(n),_=n.read_shift((r-10)/2,"dbcs-cont");return _=_.replace(chr0,""),[g,_]}function write_HLinkTooltip(n){var r=n[1].Tooltip,g=new_buf(10+2*(r.length+1));g.write_shift(2,2048);var _=decode_cell(n[0]);g.write_shift(2,_.r),g.write_shift(2,_.r),g.write_shift(2,_.c),g.write_shift(2,_.c);for(var x=0;x<r.length;++x)g.write_shift(2,r.charCodeAt(x));return g.write_shift(2,0),g}function parse_Country(n){var r=[0,0],g;return g=n.read_shift(2),r[0]=CountryEnum[g]||g,g=n.read_shift(2),r[1]=CountryEnum[g]||g,r}function write_Country(n){return n||(n=new_buf(4)),n.write_shift(2,1),n.write_shift(2,1),n}function parse_ClrtClient(n){for(var r=n.read_shift(2),g=[];r-- >0;)g.push(parse_LongRGB(n));return g}function parse_Palette(n){for(var r=n.read_shift(2),g=[];r-- >0;)g.push(parse_LongRGB(n));return g}function parse_XFCRC(n){n.l+=2;var r={cxfs:0,crc:0};return r.cxfs=n.read_shift(2),r.crc=n.read_shift(4),r}function parse_ColInfo(n,r,g){if(!g.cellStyles)return parsenoop(n,r);var _=g&&g.biff>=12?4:2,x=n.read_shift(_),S=n.read_shift(_),E=n.read_shift(_),C=n.read_shift(_),T=n.read_shift(2);_==2&&(n.l+=2);var R={s:x,e:S,w:E,ixfe:C,flags:T};return(g.biff>=5||!g.biff)&&(R.level=T>>8&7),R}function write_ColInfo(n,r){var g=new_buf(12);g.write_shift(2,r),g.write_shift(2,r),g.write_shift(2,n.width*256),g.write_shift(2,0);var _=0;return n.hidden&&(_|=1),g.write_shift(1,_),_=n.level||0,g.write_shift(1,_),g.write_shift(2,0),g}function parse_Setup(n,r){var g={};return r<32||(n.l+=16,g.header=parse_Xnum(n),g.footer=parse_Xnum(n),n.l+=2),g}function parse_ShtProps(n,r,g){var _={area:!1};if(g.biff!=5)return n.l+=r,_;var x=n.read_shift(1);return n.l+=3,x&16&&(_.area=!0),_}function write_RRTabId(n){for(var r=new_buf(2*n),g=0;g<n;++g)r.write_shift(2,g+1);return r}var parse_Blank=parse_XLSCell,parse_Scl=parseuint16a,parse_String=parse_XLUnicodeString;function parse_ImData(n){var r=n.read_shift(2),g=n.read_shift(2),_=n.read_shift(4),x={fmt:r,env:g,len:_,data:n.slice(n.l,n.l+_)};return n.l+=_,x}function parse_BIFF2STR(n,r,g){g.biffguess&&g.biff==5&&(g.biff=2);var _=parse_XLSCell(n);++n.l;var x=parse_XLUnicodeString2(n,r-7,g);return _.t="str",_.val=x,_}function parse_BIFF2NUM(n){var r=parse_XLSCell(n);++n.l;var g=parse_Xnum(n);return r.t="n",r.val=g,r}function write_BIFF2NUM(n,r,g){var _=new_buf(15);return write_BIFF2Cell(_,n,r),_.write_shift(8,g,"f"),_}function parse_BIFF2INT(n){var r=parse_XLSCell(n);++n.l;var g=n.read_shift(2);return r.t="n",r.val=g,r}function write_BIFF2INT(n,r,g){var _=new_buf(9);return write_BIFF2Cell(_,n,r),_.write_shift(2,g),_}function parse_BIFF2STRING(n){var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,"sbcs-cont")}function parse_BIFF2FONTXTRA(n,r){n.l+=6,n.l+=2,n.l+=1,n.l+=3,n.l+=1,n.l+=r-13}function parse_RString(n,r,g){var _=n.l+r,x=parse_XLSCell(n),S=n.read_shift(2),E=parse_XLUnicodeStringNoCch(n,S,g);return n.l=_,x.t="str",x.val=E,x}var DBF_SUPPORTED_VERSIONS=[2,3,48,49,131,139,140,245],DBF=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},r=evert({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function g(C,T){var R=[],A=new_raw_buf(1);switch(T.type){case"base64":A=s2a(Base64_decode(C));break;case"binary":A=s2a(C);break;case"buffer":case"array":A=C;break}prep_blob(A,0);var I=A.read_shift(1),B=!!(I&136),D=!1,N=!1;switch(I){case 2:break;case 3:break;case 48:D=!0,B=!0;break;case 49:D=!0,B=!0;break;case 131:break;case 139:break;case 140:N=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+I.toString(16))}var M=0,O=521;I==2&&(M=A.read_shift(2)),A.l+=3,I!=2&&(M=A.read_shift(4)),M>1048576&&(M=1e6),I!=2&&(O=A.read_shift(2));var L=A.read_shift(2);T.codepage,I!=2&&(A.l+=16,A.read_shift(1),A[A.l]!==0&&n[A[A.l]],A.l+=1,A.l+=2),N&&(A.l+=36);for(var F=[],U={},j=Math.min(A.length,I==2?521:O-10-(D?264:0)),z=N?32:11;A.l<j&&A[A.l]!=13;)switch(U={},U.name=a2s(A.slice(A.l,A.l+z)).replace(/[\u0000\r\n].*$/g,""),A.l+=z,U.type=String.fromCharCode(A.read_shift(1)),I!=2&&!N&&(U.offset=A.read_shift(4)),U.len=A.read_shift(1),I==2&&(U.offset=A.read_shift(2)),U.dec=A.read_shift(1),U.name.length&&F.push(U),I!=2&&(A.l+=N?13:14),U.type){case"B":(!D||U.len!=8)&&T.WTF&&console.log("Skipping "+U.name+":"+U.type);break;case"G":case"P":T.WTF&&console.log("Skipping "+U.name+":"+U.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+U.type)}if(A[A.l]!==13&&(A.l=O-1),A.read_shift(1)!==13)throw new Error("DBF Terminator not found "+A.l+" "+A[A.l]);A.l=O;var W=0,X=0;for(R[0]=[],X=0;X!=F.length;++X)R[0][X]=F[X].name;for(;M-- >0;){if(A[A.l]===42){A.l+=L;continue}for(++A.l,R[++W]=[],X=0,X=0;X!=F.length;++X){var ie=A.slice(A.l,A.l+F[X].len);A.l+=F[X].len,prep_blob(ie,0);var fe=a2s(ie);switch(F[X].type){case"C":fe.trim().length&&(R[W][X]=fe.replace(/\s+$/,""));break;case"D":fe.length===8?R[W][X]=new Date(+fe.slice(0,4),+fe.slice(4,6)-1,+fe.slice(6,8)):R[W][X]=fe;break;case"F":R[W][X]=parseFloat(fe.trim());break;case"+":case"I":R[W][X]=N?ie.read_shift(-4,"i")^2147483648:ie.read_shift(4,"i");break;case"L":switch(fe.trim().toUpperCase()){case"Y":case"T":R[W][X]=!0;break;case"N":case"F":R[W][X]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+fe+"|")}break;case"M":if(!B)throw new Error("DBF Unexpected MEMO for type "+I.toString(16));R[W][X]="##MEMO##"+(N?parseInt(fe.trim(),10):ie.read_shift(4));break;case"N":fe=fe.replace(/\u0000/g,"").trim(),fe&&fe!="."&&(R[W][X]=+fe||0);break;case"@":R[W][X]=new Date(ie.read_shift(-8,"f")-621356832e5);break;case"T":R[W][X]=new Date((ie.read_shift(4)-2440588)*864e5+ie.read_shift(4));break;case"Y":R[W][X]=ie.read_shift(4,"i")/1e4+ie.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":R[W][X]=-ie.read_shift(-8,"f");break;case"B":if(D&&F[X].len==8){R[W][X]=ie.read_shift(8,"f");break}case"G":case"P":ie.l+=F[X].len;break;case"0":if(F[X].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+F[X].type)}}}if(I!=2&&A.l<A.length&&A[A.l++]!=26)throw new Error("DBF EOF Marker missing "+(A.l-1)+" of "+A.length+" "+A[A.l-1].toString(16));return T&&T.sheetRows&&(R=R.slice(0,T.sheetRows)),T.DBF=F,R}function _(C,T){var R=T||{};R.dateNF||(R.dateNF="yyyymmdd");var A=aoa_to_sheet(g(C,R),R);return A["!cols"]=R.DBF.map(function(I){return{wch:I.len,DBF:I}}),delete R.DBF,A}function x(C,T){try{var R=sheet_to_workbook(_(C,T),T);return R.bookType="dbf",R}catch(A){if(T&&T.WTF)throw A}return{SheetNames:[],Sheets:{}}}var S={B:8,C:250,L:1,D:8,"?":0,"":0};function E(C,T){var R=T||{},A=current_codepage;if(+R.codepage>=0&&set_cp(+R.codepage),R.type=="string")throw new Error("Cannot write DBF to JS string");var I=buf_array(),B=sheet_to_json(C,{header:1,raw:!0,cellDates:!0}),D=B[0],N=B.slice(1),M=C["!cols"]||[],O=0,L=0,F=0,U=1;for(O=0;O<D.length;++O){if(((M[O]||{}).DBF||{}).name){D[O]=M[O].DBF.name,++F;continue}if(D[O]!=null){if(++F,typeof D[O]=="number"&&(D[O]=D[O].toString(10)),typeof D[O]!="string")throw new Error("DBF Invalid column name "+D[O]+" |"+typeof D[O]+"|");if(D.indexOf(D[O])!==O){for(L=0;L<1024;++L)if(D.indexOf(D[O]+"_"+L)==-1){D[O]+="_"+L;break}}}}var j=safe_decode_range(C["!ref"]),z=[],W=[],X=[];for(O=0;O<=j.e.c-j.s.c;++O){var ie="",fe="",xe=0,we=[];for(L=0;L<N.length;++L)N[L][O]!=null&&we.push(N[L][O]);if(we.length==0||D[O]==null){z[O]="?";continue}for(L=0;L<we.length;++L){switch(typeof we[L]){case"number":fe="B";break;case"string":fe="C";break;case"boolean":fe="L";break;case"object":fe=we[L]instanceof Date?"D":"C";break;default:fe="C"}xe=Math.max(xe,String(we[L]).length),ie=ie&&ie!=fe?"C":fe}xe>250&&(xe=250),fe=((M[O]||{}).DBF||{}).type,fe=="C"&&M[O].DBF.len>xe&&(xe=M[O].DBF.len),ie=="B"&&fe=="N"&&(ie="N",X[O]=M[O].DBF.dec,xe=M[O].DBF.len),W[O]=ie=="C"||fe=="N"?xe:S[ie]||0,U+=W[O],z[O]=ie}var G=I.next(32);for(G.write_shift(4,318902576),G.write_shift(4,N.length),G.write_shift(2,296+32*F),G.write_shift(2,U),O=0;O<4;++O)G.write_shift(4,0);var J=+r[current_codepage]||3;for(G.write_shift(4,0|J<<8),n[J]!=+R.codepage&&(R.codepage&&console.error("DBF Unsupported codepage "+current_codepage+", using 1252"),current_codepage=1252),O=0,L=0;O<D.length;++O)if(D[O]!=null){var q=I.next(32),H=(D[O].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);q.write_shift(1,H,"sbcs"),q.write_shift(1,z[O]=="?"?"C":z[O],"sbcs"),q.write_shift(4,L),q.write_shift(1,W[O]||S[z[O]]||0),q.write_shift(1,X[O]||0),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(1,0),q.write_shift(4,0),q.write_shift(4,0),L+=W[O]||S[z[O]]||0}var ve=I.next(264);for(ve.write_shift(4,13),O=0;O<65;++O)ve.write_shift(4,0);for(O=0;O<N.length;++O){var Z=I.next(U);for(Z.write_shift(1,0),L=0;L<D.length;++L)if(D[L]!=null)switch(z[L]){case"L":Z.write_shift(1,N[O][L]==null?63:N[O][L]?84:70);break;case"B":Z.write_shift(8,N[O][L]||0,"f");break;case"N":var ce="0";for(typeof N[O][L]=="number"&&(ce=N[O][L].toFixed(X[L]||0)),ce.length>W[L]&&(ce=ce.slice(0,W[L])),F=0;F<W[L]-ce.length;++F)Z.write_shift(1,32);Z.write_shift(1,ce,"sbcs");break;case"D":N[O][L]?(Z.write_shift(4,("0000"+N[O][L].getFullYear()).slice(-4),"sbcs"),Z.write_shift(2,("00"+(N[O][L].getMonth()+1)).slice(-2),"sbcs"),Z.write_shift(2,("00"+N[O][L].getDate()).slice(-2),"sbcs")):Z.write_shift(8,"00000000","sbcs");break;case"C":var ue=Z.l,se=String(N[O][L]!=null?N[O][L]:"").slice(0,W[L]);for(Z.write_shift(1,se,"cpstr"),ue+=W[L]-Z.l,F=0;F<ue;++F)Z.write_shift(1,32);break}}return current_codepage=A,I.next(1).write_shift(1,26),I.end()}return{to_workbook:x,to_sheet:_,from_sheet:E}}(),SYLK=function(){var n={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},r=new RegExp("\x1BN("+keys$2(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),g=function(I,B){var D=n[B];return typeof D=="number"?_getansi(D):D},_=function(I,B,D){var N=B.charCodeAt(0)-32<<4|D.charCodeAt(0)-48;return N==59?I:_getansi(N)};n["|"]=254;function x(I,B){switch(B.type){case"base64":return S(Base64_decode(I),B);case"binary":return S(I,B);case"buffer":return S(has_buf&&Buffer$1.isBuffer(I)?I.toString("binary"):a2s(I),B);case"array":return S(cc2str(I),B)}throw new Error("Unrecognized type "+B.type)}function S(I,B){var D=I.split(/[\n\r]+/),N=-1,M=-1,O=0,L=0,F=[],U=[],j=null,z={},W=[],X=[],ie=[],fe=0,xe,we={Workbook:{WBProps:{},Names:[]}};for(+B.codepage>=0&&set_cp(+B.codepage);O!==D.length;++O){fe=0;var G=D[O].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,_).replace(r,g),J=G.replace(/;;/g,"\0").split(";").map(function(Ae){return Ae.replace(/\u0000/g,";")}),q=J[0],H;if(G.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":for(L=1;L<J.length;++L)switch(J[L].charAt(0)){case"V":{var ve=parseInt(J[L].slice(1),10);ve>=1&&ve<=4&&(we.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(J[1].charAt(0)){case"P":U.push(G.slice(3).replace(/;;/g,";"));break}break;case"NN":{var Z={Sheet:0};for(L=1;L<J.length;++L)switch(J[L].charAt(0)){case"N":Z.Name=J[L].slice(1);break;case"E":Z.Ref=(B&&B.sheet||"Sheet1")+"!"+rc_to_a1(J[L].slice(1));break}we.Workbook.Names.push(Z)}break;case"C":var ce=!1,ue=!1,se=!1,te=!1,Y=-1,be=-1,ye="",Ie="z";for(L=1;L<J.length;++L)switch(J[L].charAt(0)){case"A":break;case"X":M=parseInt(J[L].slice(1),10)-1,ue=!0;break;case"Y":for(N=parseInt(J[L].slice(1),10)-1,ue||(M=0),xe=F.length;xe<=N;++xe)F[xe]=[];break;case"K":H=J[L].slice(1),H.charAt(0)==='"'?(H=H.slice(1,H.length-1),Ie="s"):H==="TRUE"||H==="FALSE"?(H=H==="TRUE",Ie="b"):isNaN(fuzzynum(H))?isNaN(fuzzydate(H).getDate())||(H=parseDate(H),Ie="d",B.cellDates||(Ie="n",H=datenum(H,we.Workbook.WBProps.date1904))):(H=fuzzynum(H),Ie="n",j!==null&&fmt_is_date(j)&&B.cellDates&&(H=numdate(we.Workbook.WBProps.date1904?H+1462:H),Ie="d")),ce=!0;break;case"E":te=!0,ye=rc_to_a1(J[L].slice(1),{r:N,c:M});break;case"S":se=!0;break;case"G":break;case"R":Y=parseInt(J[L].slice(1),10)-1;break;case"C":be=parseInt(J[L].slice(1),10)-1;break;default:if(B&&B.WTF)throw new Error("SYLK bad record "+G)}if(ce&&(F[N][M]?(F[N][M].t=Ie,F[N][M].v=H):F[N][M]={t:Ie,v:H},j&&(F[N][M].z=j),B.cellText!==!1&&j&&(F[N][M].w=SSF_format(F[N][M].z,F[N][M].v,{date1904:we.Workbook.WBProps.date1904})),j=null),se){if(te)throw new Error("SYLK shared formula cannot have own formula");var ke=Y>-1&&F[Y][be];if(!ke||!ke[1])throw new Error("SYLK shared formula cannot find base");ye=shift_formula_str(ke[1],{r:N-Y,c:M-be})}ye&&(F[N][M]?F[N][M].f=ye:F[N][M]={t:"n",f:ye});break;case"F":var Ce=0;for(L=1;L<J.length;++L)switch(J[L].charAt(0)){case"X":M=parseInt(J[L].slice(1),10)-1,++Ce;break;case"Y":for(N=parseInt(J[L].slice(1),10)-1,xe=F.length;xe<=N;++xe)F[xe]=[];break;case"M":fe=parseInt(J[L].slice(1),10)/20;break;case"F":break;case"G":break;case"P":j=U[parseInt(J[L].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(ie=J[L].slice(1).split(" "),xe=parseInt(ie[0],10);xe<=parseInt(ie[1],10);++xe)fe=parseInt(ie[2],10),X[xe-1]=fe===0?{hidden:!0}:{wch:fe};break;case"C":M=parseInt(J[L].slice(1),10)-1,X[M]||(X[M]={});break;case"R":N=parseInt(J[L].slice(1),10)-1,W[N]||(W[N]={}),fe>0?(W[N].hpt=fe,W[N].hpx=pt2px(fe)):fe===0&&(W[N].hidden=!0);break;default:if(B&&B.WTF)throw new Error("SYLK bad record "+G)}Ce<1&&(j=null);break;default:if(B&&B.WTF)throw new Error("SYLK bad record "+G)}}return W.length>0&&(z["!rows"]=W),X.length>0&&(z["!cols"]=X),X.forEach(function(Ae){process_col(Ae)}),B&&B.sheetRows&&(F=F.slice(0,B.sheetRows)),[F,z,we]}function E(I,B){var D=x(I,B),N=D[0],M=D[1],O=D[2],L=dup(B);L.date1904=(((O||{}).Workbook||{}).WBProps||{}).date1904;var F=aoa_to_sheet(N,L);keys$2(M).forEach(function(j){F[j]=M[j]});var U=sheet_to_workbook(F,B);return keys$2(O).forEach(function(j){U[j]=O[j]}),U.bookType="sylk",U}function C(I,B,D,N){var M="C;Y"+(D+1)+";X"+(N+1)+";K";switch(I.t){case"n":M+=I.v||0,I.f&&!I.F&&(M+=";E"+a1_to_rc(I.f,{r:D,c:N}));break;case"b":M+=I.v?"TRUE":"FALSE";break;case"e":M+=I.w||I.v;break;case"d":M+='"'+(I.w||I.v)+'"';break;case"s":M+='"'+(I.v==null?"":String(I.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return M}function T(I,B){B.forEach(function(D,N){var M="F;W"+(N+1)+" "+(N+1)+" ";D.hidden?M+="0":(typeof D.width=="number"&&!D.wpx&&(D.wpx=width2px(D.width)),typeof D.wpx=="number"&&!D.wch&&(D.wch=px2char(D.wpx)),typeof D.wch=="number"&&(M+=Math.round(D.wch))),M.charAt(M.length-1)!=" "&&I.push(M)})}function R(I,B){B.forEach(function(D,N){var M="F;";D.hidden?M+="M0;":D.hpt?M+="M"+20*D.hpt+";":D.hpx&&(M+="M"+20*px2pt(D.hpx)+";"),M.length>2&&I.push(M+"R"+(N+1))})}function A(I,B,D){var N=["ID;PSheetJS;N;E"],M=[],O=safe_decode_range(I["!ref"]),L,F=I["!data"]!=null,U=`\r
`,j=(((D||{}).Workbook||{}).WBProps||{}).date1904;N.push("P;PGeneral"),N.push("F;P0;DG0G8;M255"),I["!cols"]&&T(N,I["!cols"]),I["!rows"]&&R(N,I["!rows"]),N.push("B;Y"+(O.e.r-O.s.r+1)+";X"+(O.e.c-O.s.c+1)+";D"+[O.s.c,O.s.r,O.e.c,O.e.r].join(" ")),N.push("O;L;D;B"+(j?";V4":"")+";K47;G100 0.001");for(var z=O.s.r;z<=O.e.r;++z)if(!(F&&!I["!data"][z])){for(var W=[],X=O.s.c;X<=O.e.c;++X)L=F?I["!data"][z][X]:I[encode_col(X)+encode_row(z)],!(!L||L.v==null&&(!L.f||L.F))&&W.push(C(L,I,z,X));M.push(W.join(U))}return N.join(U)+U+M.join(U)+U+"E"+U}return{to_workbook:E,from_sheet:A}}(),DIF=function(){function n(C,T){switch(T.type){case"base64":return r(Base64_decode(C),T);case"binary":return r(C,T);case"buffer":return r(has_buf&&Buffer$1.isBuffer(C)?C.toString("binary"):a2s(C),T);case"array":return r(cc2str(C),T)}throw new Error("Unrecognized type "+T.type)}function r(C,T){for(var R=C.split(`
`),A=-1,I=-1,B=0,D=[];B!==R.length;++B){if(R[B].trim()==="BOT"){D[++A]=[],I=0;continue}if(!(A<0)){var N=R[B].trim().split(","),M=N[0],O=N[1];++B;for(var L=R[B]||"";(L.match(/["]/g)||[]).length&1&&B<R.length-1;)L+=`
`+R[++B];switch(L=L.trim(),+M){case-1:if(L==="BOT"){D[++A]=[],I=0;continue}else if(L!=="EOD")throw new Error("Unrecognized DIF special command "+L);break;case 0:L==="TRUE"?D[A][I]=!0:L==="FALSE"?D[A][I]=!1:isNaN(fuzzynum(O))?isNaN(fuzzydate(O).getDate())?D[A][I]=O:D[A][I]=parseDate(O):D[A][I]=fuzzynum(O),++I;break;case 1:L=L.slice(1,L.length-1),L=L.replace(/""/g,'"'),L&&L.match(/^=".*"$/)&&(L=L.slice(2,-1)),D[A][I++]=L!==""?L:null;break}if(L==="EOD")break}}return T&&T.sheetRows&&(D=D.slice(0,T.sheetRows)),D}function g(C,T){return aoa_to_sheet(n(C,T),T)}function _(C,T){var R=sheet_to_workbook(g(C,T),T);return R.bookType="dif",R}function x(C,T){return"0,"+String(C)+`\r
`+T}function S(C){return`1,0\r
"`+C.replace(/"/g,'""')+'"'}function E(C){for(var T=safe_decode_range(C["!ref"]),R=C["!data"]!=null,A=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(T.e.r-T.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(T.e.c-T.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],I=T.s.r;I<=T.e.r;++I){for(var B=R?C["!data"][I]:[],D=`-1,0\r
BOT\r
`,N=T.s.c;N<=T.e.c;++N){var M=R?B&&B[N]:C[encode_cell({r:I,c:N})];if(M==null){D+=`1,0\r
""\r
`;continue}switch(M.t){case"n":M.w!=null?D+="0,"+M.w+`\r
V`:M.v!=null?D+=x(M.v,"V"):M.f!=null&&!M.F?D+=S("="+M.f):D+=`1,0\r
""`;break;case"b":D+=M.v?x(1,"TRUE"):x(0,"FALSE");break;case"s":D+=S(isNaN(+M.v)?M.v:'="'+M.v+'"');break;case"d":M.w||(M.w=SSF_format(M.z||table_fmt[14],datenum(parseDate(M.v)))),D+=x(M.w,"V");break;default:D+=`1,0\r
""`}D+=`\r
`}A.push(D)}return A.join("")+`-1,0\r
EOD`}return{to_workbook:_,to_sheet:g,from_sheet:E}}(),ETH$1=function(){function n(I){return I.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function r(I){return I.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function g(I,B){for(var D=I.split(`
`),N=-1,M=-1,O=0,L=[];O!==D.length;++O){var F=D[O].trim().split(":");if(F[0]==="cell"){var U=decode_cell(F[1]);if(L.length<=U.r)for(N=L.length;N<=U.r;++N)L[N]||(L[N]=[]);switch(N=U.r,M=U.c,F[2]){case"t":L[N][M]=n(F[3]);break;case"v":L[N][M]=+F[3];break;case"vtf":var j=F[F.length-1];case"vtc":switch(F[3]){case"nl":L[N][M]=!!+F[4];break;default:L[N][M]=+F[4];break}F[2]=="vtf"&&(L[N][M]=[L[N][M],j])}}}return B&&B.sheetRows&&(L=L.slice(0,B.sheetRows)),L}function _(I,B){return aoa_to_sheet(g(I,B),B)}function x(I,B){return sheet_to_workbook(_(I,B),B)}var S=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),E=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,C=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),T="--SocialCalcSpreadsheetControlSave--";function R(I){if(!I||!I["!ref"])return"";for(var B=[],D=[],N,M="",O=decode_range(I["!ref"]),L=I["!data"]!=null,F=O.s.r;F<=O.e.r;++F)for(var U=O.s.c;U<=O.e.c;++U)if(M=encode_cell({r:F,c:U}),N=L?(I["!data"][F]||[])[U]:I[M],!(!N||N.v==null||N.t==="z")){switch(D=["cell",M,"t"],N.t){case"s":case"str":D.push(r(N.v));break;case"n":N.f?(D[2]="vtf",D[3]="n",D[4]=N.v,D[5]=r(N.f)):(D[2]="v",D[3]=N.v);break;case"b":D[2]="vt"+(N.f?"f":"c"),D[3]="nl",D[4]=N.v?"1":"0",D[5]=r(N.f||(N.v?"TRUE":"FALSE"));break;case"d":var j=datenum(parseDate(N.v));D[2]="vtc",D[3]="nd",D[4]=""+j,D[5]=N.w||SSF_format(N.z||table_fmt[14],j);break;case"e":continue}B.push(D.join(":"))}return B.push("sheet:c:"+(O.e.c-O.s.c+1)+":r:"+(O.e.r-O.s.r+1)+":tvf:1"),B.push("valueformat:1:text-wiki"),B.join(`
`)}function A(I){return[S,E,C,E,R(I),T].join(`
`)}return{to_workbook:x,to_sheet:_,from_sheet:A}}(),PRN=function(){function n(A,I,B,D,N){N.raw?I[B][D]=A:A===""||(A==="TRUE"?I[B][D]=!0:A==="FALSE"?I[B][D]=!1:isNaN(fuzzynum(A))?isNaN(fuzzydate(A).getDate())?I[B][D]=A:I[B][D]=parseDate(A):I[B][D]=fuzzynum(A))}function r(A,I){var B=I||{},D=[];if(!A||A.length===0)return D;for(var N=A.split(/[\r\n]/),M=N.length-1;M>=0&&N[M].length===0;)--M;for(var O=10,L=0,F=0;F<=M;++F)L=N[F].indexOf(" "),L==-1?L=N[F].length:L++,O=Math.max(O,L);for(F=0;F<=M;++F){D[F]=[];var U=0;for(n(N[F].slice(0,O).trim(),D,F,U,B),U=1;U<=(N[F].length-O)/10+1;++U)n(N[F].slice(O+(U-1)*10,O+U*10).trim(),D,F,U,B)}return B.sheetRows&&(D=D.slice(0,B.sheetRows)),D}var g={44:",",9:"	",59:";",124:"|"},_={44:3,9:2,59:1,124:0};function x(A){for(var I={},B=!1,D=0,N=0;D<A.length;++D)(N=A.charCodeAt(D))==34?B=!B:!B&&N in g&&(I[N]=(I[N]||0)+1);N=[];for(D in I)Object.prototype.hasOwnProperty.call(I,D)&&N.push([I[D],D]);if(!N.length){I=_;for(D in I)Object.prototype.hasOwnProperty.call(I,D)&&N.push([I[D],D])}return N.sort(function(M,O){return M[0]-O[0]||_[M[1]]-_[O[1]]}),g[N.pop()[1]]||44}function S(A,I){var B=I||{},D="",N={};B.dense&&(N["!data"]=[]);var M={s:{c:0,r:0},e:{c:0,r:0}};A.slice(0,4)=="sep="?A.charCodeAt(5)==13&&A.charCodeAt(6)==10?(D=A.charAt(4),A=A.slice(7)):A.charCodeAt(5)==13||A.charCodeAt(5)==10?(D=A.charAt(4),A=A.slice(6)):D=x(A.slice(0,1024)):B&&B.FS?D=B.FS:D=x(A.slice(0,1024));var O=0,L=0,F=0,U=0,j=0,z=D.charCodeAt(0),W=!1,X=0,ie=A.charCodeAt(0),fe=B.dateNF!=null?dateNF_regex(B.dateNF):null;function xe(){var we=A.slice(U,j);we.slice(-1)=="\r"&&(we=we.slice(0,-1));var G={};if(we.charAt(0)=='"'&&we.charAt(we.length-1)=='"'&&(we=we.slice(1,-1).replace(/""/g,'"')),we.length===0)G.t="z";else if(B.raw)G.t="s",G.v=we;else if(we.trim().length===0)G.t="s",G.v=we;else if(we.charCodeAt(0)==61)we.charCodeAt(1)==34&&we.charCodeAt(we.length-1)==34?(G.t="s",G.v=we.slice(2,-1).replace(/""/g,'"')):fuzzyfmla(we)?(G.t="n",G.f=we.slice(1)):(G.t="s",G.v=we);else if(we=="TRUE")G.t="b",G.v=!0;else if(we=="FALSE")G.t="b",G.v=!1;else if(!isNaN(F=fuzzynum(we)))G.t="n",B.cellText!==!1&&(G.w=we),G.v=F;else if(!isNaN((F=fuzzydate(we)).getDate())||fe&&we.match(fe)){G.z=B.dateNF||table_fmt[14];var J=0;fe&&we.match(fe)&&(we=dateNF_fix(we,B.dateNF,we.match(fe)||[]),J=1,F=parseDate(we,J)),B.cellDates?(G.t="d",G.v=F):(G.t="n",G.v=datenum(F)),B.cellText!==!1&&(G.w=SSF_format(G.z,G.v instanceof Date?datenum(G.v):G.v)),B.cellNF||delete G.z}else G.t="s",G.v=we;if(G.t=="z"||(B.dense?(N["!data"][O]||(N["!data"][O]=[]),N["!data"][O][L]=G):N[encode_cell({c:L,r:O})]=G),U=j+1,ie=A.charCodeAt(U),M.e.c<L&&(M.e.c=L),M.e.r<O&&(M.e.r=O),X==z)++L;else if(L=0,++O,B.sheetRows&&B.sheetRows<=O)return!0}e:for(;j<A.length;++j)switch(X=A.charCodeAt(j)){case 34:ie===34&&(W=!W);break;case 13:if(W)break;A.charCodeAt(j+1)==10&&++j;case z:case 10:if(!W&&xe())break e;break}return j-U>0&&xe(),N["!ref"]=encode_range(M),N}function E(A,I){return!(I&&I.PRN)||I.FS||A.slice(0,4)=="sep="||A.indexOf("	")>=0||A.indexOf(",")>=0||A.indexOf(";")>=0?S(A,I):aoa_to_sheet(r(A,I),I)}function C(A,I){var B="",D=I.type=="string"?[0,0,0,0]:firstbyte(A,I);switch(I.type){case"base64":B=Base64_decode(A);break;case"binary":B=A;break;case"buffer":I.codepage==65001?B=A.toString("utf8"):I.codepage&&typeof $cptable<"u"?B=$cptable.utils.decode(I.codepage,A):B=has_buf&&Buffer$1.isBuffer(A)?A.toString("binary"):a2s(A);break;case"array":B=cc2str(A);break;case"string":B=A;break;default:throw new Error("Unrecognized type "+I.type)}return D[0]==239&&D[1]==187&&D[2]==191?B=utf8read(B.slice(3)):I.type!="string"&&I.type!="buffer"&&I.codepage==65001?B=utf8read(B):I.type=="binary"&&typeof $cptable<"u"&&I.codepage&&(B=$cptable.utils.decode(I.codepage,$cptable.utils.encode(28591,B))),B.slice(0,19)=="socialcalc:version:"?ETH$1.to_sheet(I.type=="string"?B:utf8read(B),I):E(B,I)}function T(A,I){return sheet_to_workbook(C(A,I),I)}function R(A){for(var I=[],B=safe_decode_range(A["!ref"]),D,N=A["!data"]!=null,M=B.s.r;M<=B.e.r;++M){for(var O=[],L=B.s.c;L<=B.e.c;++L){var F=encode_cell({r:M,c:L});if(D=N?(A["!data"][M]||[])[L]:A[F],!D||D.v==null){O.push("          ");continue}for(var U=(D.w||(format_cell(D),D.w)||"").slice(0,10);U.length<10;)U+=" ";O.push(U+(L===0?" ":""))}I.push(O.join(""))}return I.join(`
`)}return{to_workbook:T,to_sheet:C,from_sheet:R}}();function read_wb_ID(n,r){var g=r||{},_=!!g.WTF;g.WTF=!0;try{var x=SYLK.to_workbook(n,g);return g.WTF=_,x}catch(S){if(g.WTF=_,!S.message.match(/SYLK bad record ID/)&&_)throw S;return PRN.to_workbook(n,r)}}var WK_=function(){function n(ye,Ie,ke){if(ye){prep_blob(ye,ye.l||0);for(var Ce=ke.Enum||te;ye.l<ye.length;){var Ae=ye.read_shift(2),Ne=Ce[Ae]||Ce[65535],We=ye.read_shift(2),Be=ye.l+We,Se=Ne.f&&Ne.f(ye,We,ke);if(ye.l=Be,Ie(Se,Ne,Ae))return}}}function r(ye,Ie){switch(Ie.type){case"base64":return g(s2a(Base64_decode(ye)),Ie);case"binary":return g(s2a(ye),Ie);case"buffer":case"array":return g(ye,Ie)}throw"Unsupported type "+Ie.type}function g(ye,Ie){if(!ye)return ye;var ke=Ie||{},Ce={},Ae="Sheet1",Ne="",We=0,Be={},Se=[],$e=[],_e=[];ke.dense&&(_e=Ce["!data"]=[]);var Oe={s:{r:0,c:0},e:{r:0,c:0}},Ke=ke.sheetRows||0;if(ye[4]==81&&ye[5]==80&&ye[6]==87)return be(ye,Ie);if(ye[2]==0&&(ye[3]==8||ye[3]==9)&&ye.length>=16&&ye[14]==5&&ye[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(ye[2]==2)ke.Enum=te,n(ye,function(Je,Qe,rt){switch(rt){case 0:ke.vers=Je,Je>=4096&&(ke.qpro=!0);break;case 255:ke.vers=Je,ke.works=!0;break;case 6:Oe=Je;break;case 204:Je&&(Ne=Je);break;case 222:Ne=Je;break;case 15:case 51:(!ke.qpro&&!ke.works||rt==51)&&Je[1].v.charCodeAt(0)<48&&(Je[1].v=Je[1].v.slice(1)),(ke.works||ke.works2)&&(Je[1].v=Je[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:rt==14&&(Je[2]&112)==112&&(Je[2]&15)>1&&(Je[2]&15)<15&&(Je[1].z=ke.dateNF||table_fmt[14],ke.cellDates&&(Je[1].t="d",Je[1].v=numdate(Je[1].v))),ke.qpro&&Je[3]>We&&(Ce["!ref"]=encode_range(Oe),Be[Ae]=Ce,Se.push(Ae),Ce={},ke.dense&&(_e=Ce["!data"]=[]),Oe={s:{r:0,c:0},e:{r:0,c:0}},We=Je[3],Ae=Ne||"Sheet"+(We+1),Ne="");var wt=ke.dense?(_e[Je[0].r]||[])[Je[0].c]:Ce[encode_cell(Je[0])];if(wt){wt.t=Je[1].t,wt.v=Je[1].v,Je[1].z!=null&&(wt.z=Je[1].z),Je[1].f!=null&&(wt.f=Je[1].f);break}ke.dense?(_e[Je[0].r]||(_e[Je[0].r]=[]),_e[Je[0].r][Je[0].c]=Je[1]):Ce[encode_cell(Je[0])]=Je[1];break;case 21509:ke.works2=!0;break}},ke);else if(ye[2]==26||ye[2]==14)ke.Enum=Y,ye[2]==14&&(ke.qpro=!0,ye.l=0),n(ye,function(Je,Qe,rt){switch(rt){case 204:Ae=Je;break;case 22:Je[1].v.charCodeAt(0)<48&&(Je[1].v=Je[1].v.slice(1)),Je[1].v=Je[1].v.replace(/\x0F./g,function(wt){return String.fromCharCode(wt.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(Je[3]>We&&(Ce["!ref"]=encode_range(Oe),Be[Ae]=Ce,Se.push(Ae),Ce={},ke.dense&&(_e=Ce["!data"]=[]),Oe={s:{r:0,c:0},e:{r:0,c:0}},We=Je[3],Ae="Sheet"+(We+1)),Ke>0&&Je[0].r>=Ke)break;ke.dense?(_e[Je[0].r]||(_e[Je[0].r]=[]),_e[Je[0].r][Je[0].c]=Je[1]):Ce[encode_cell(Je[0])]=Je[1],Oe.e.c<Je[0].c&&(Oe.e.c=Je[0].c),Oe.e.r<Je[0].r&&(Oe.e.r=Je[0].r);break;case 27:Je[14e3]&&($e[Je[14e3][0]]=Je[14e3][1]);break;case 1537:$e[Je[0]]=Je[1],Je[0]==We&&(Ae=Je[1]);break}},ke);else throw new Error("Unrecognized LOTUS BOF "+ye[2]);if(Ce["!ref"]=encode_range(Oe),Be[Ne||Ae]=Ce,Se.push(Ne||Ae),!$e.length)return{SheetNames:Se,Sheets:Be};for(var Me={},Le=[],ze=0;ze<$e.length;++ze)Be[Se[ze]]?(Le.push($e[ze]||Se[ze]),Me[$e[ze]]=Be[$e[ze]]||Be[Se[ze]]):(Le.push($e[ze]),Me[$e[ze]]={"!ref":"A1"});return{SheetNames:Le,Sheets:Me}}function _(ye,Ie){var ke=Ie||{};if(+ke.codepage>=0&&set_cp(+ke.codepage),ke.type=="string")throw new Error("Cannot write WK1 to JS string");var Ce=buf_array(),Ae=safe_decode_range(ye["!ref"]),Ne=ye["!data"]!=null,We=[];write_biff_rec(Ce,0,S(1030)),write_biff_rec(Ce,6,T(Ae));for(var Be=Math.min(Ae.e.r,8191),Se=Ae.s.c;Se<=Ae.e.c;++Se)We[Se]=encode_col(Se);for(var $e=Ae.s.r;$e<=Be;++$e){var _e=encode_row($e);for(Se=Ae.s.c;Se<=Ae.e.c;++Se){var Oe=Ne?(ye["!data"][$e]||[])[Se]:ye[We[Se]+_e];if(!(!Oe||Oe.t=="z"))if(Oe.t=="n")(Oe.v|0)==Oe.v&&Oe.v>=-32768&&Oe.v<=32767?write_biff_rec(Ce,13,N($e,Se,Oe.v)):write_biff_rec(Ce,14,O($e,Se,Oe.v));else{var Ke=format_cell(Oe);write_biff_rec(Ce,15,I($e,Se,Ke.slice(0,239)))}}}return write_biff_rec(Ce,1),Ce.end()}function x(ye,Ie){var ke=Ie||{};if(+ke.codepage>=0&&set_cp(+ke.codepage),ke.type=="string")throw new Error("Cannot write WK3 to JS string");var Ce=buf_array();write_biff_rec(Ce,0,E(ye));for(var Ae=0,Ne=0;Ae<ye.SheetNames.length;++Ae)(ye.Sheets[ye.SheetNames[Ae]]||{})["!ref"]&&write_biff_rec(Ce,27,se(ye.SheetNames[Ae],Ne++));var We=0;for(Ae=0;Ae<ye.SheetNames.length;++Ae){var Be=ye.Sheets[ye.SheetNames[Ae]];if(!(!Be||!Be["!ref"])){for(var Se=safe_decode_range(Be["!ref"]),$e=Be["!data"]!=null,_e=[],Oe=Math.min(Se.e.r,8191),Ke=Se.s.r;Ke<=Oe;++Ke)for(var Me=encode_row(Ke),Le=Se.s.c;Le<=Se.e.c;++Le){Ke===Se.s.r&&(_e[Le]=encode_col(Le));var ze=_e[Le]+Me,Je=$e?(Be["!data"][Ke]||[])[Le]:Be[ze];if(!(!Je||Je.t=="z"))if(Je.t=="n")write_biff_rec(Ce,23,we(Ke,Le,We,Je.v));else{var Qe=format_cell(Je);write_biff_rec(Ce,22,ie(Ke,Le,We,Qe.slice(0,239)))}}++We}}return write_biff_rec(Ce,1),Ce.end()}function S(ye){var Ie=new_buf(2);return Ie.write_shift(2,ye),Ie}function E(ye){var Ie=new_buf(26);Ie.write_shift(2,4096),Ie.write_shift(2,4),Ie.write_shift(4,0);for(var ke=0,Ce=0,Ae=0,Ne=0;Ne<ye.SheetNames.length;++Ne){var We=ye.SheetNames[Ne],Be=ye.Sheets[We];if(!(!Be||!Be["!ref"])){++Ae;var Se=decode_range(Be["!ref"]);ke<Se.e.r&&(ke=Se.e.r),Ce<Se.e.c&&(Ce=Se.e.c)}}return ke>8191&&(ke=8191),Ie.write_shift(2,ke),Ie.write_shift(1,Ae),Ie.write_shift(1,Ce),Ie.write_shift(2,0),Ie.write_shift(2,0),Ie.write_shift(1,1),Ie.write_shift(1,2),Ie.write_shift(4,0),Ie.write_shift(4,0),Ie}function C(ye,Ie,ke){var Ce={s:{c:0,r:0},e:{c:0,r:0}};return Ie==8&&ke.qpro?(Ce.s.c=ye.read_shift(1),ye.l++,Ce.s.r=ye.read_shift(2),Ce.e.c=ye.read_shift(1),ye.l++,Ce.e.r=ye.read_shift(2),Ce):(Ce.s.c=ye.read_shift(2),Ce.s.r=ye.read_shift(2),Ie==12&&ke.qpro&&(ye.l+=2),Ce.e.c=ye.read_shift(2),Ce.e.r=ye.read_shift(2),Ie==12&&ke.qpro&&(ye.l+=2),Ce.s.c==65535&&(Ce.s.c=Ce.e.c=Ce.s.r=Ce.e.r=0),Ce)}function T(ye){var Ie=new_buf(8);return Ie.write_shift(2,ye.s.c),Ie.write_shift(2,ye.s.r),Ie.write_shift(2,ye.e.c),Ie.write_shift(2,ye.e.r),Ie}function R(ye,Ie,ke){var Ce=[{c:0,r:0},{t:"n",v:0},0,0];return ke.qpro&&ke.vers!=20768?(Ce[0].c=ye.read_shift(1),Ce[3]=ye.read_shift(1),Ce[0].r=ye.read_shift(2),ye.l+=2):ke.works?(Ce[0].c=ye.read_shift(2),Ce[0].r=ye.read_shift(2),Ce[2]=ye.read_shift(2)):(Ce[2]=ye.read_shift(1),Ce[0].c=ye.read_shift(2),Ce[0].r=ye.read_shift(2)),Ce}function A(ye,Ie,ke){var Ce=ye.l+Ie,Ae=R(ye,Ie,ke);if(Ae[1].t="s",ke.vers==20768){ye.l++;var Ne=ye.read_shift(1);return Ae[1].v=ye.read_shift(Ne,"utf8"),Ae}return ke.qpro&&ye.l++,Ae[1].v=ye.read_shift(Ce-ye.l,"cstr"),Ae}function I(ye,Ie,ke){var Ce=new_buf(7+ke.length);Ce.write_shift(1,255),Ce.write_shift(2,Ie),Ce.write_shift(2,ye),Ce.write_shift(1,39);for(var Ae=0;Ae<Ce.length;++Ae){var Ne=ke.charCodeAt(Ae);Ce.write_shift(1,Ne>=128?95:Ne)}return Ce.write_shift(1,0),Ce}function B(ye,Ie,ke){var Ce=ye.l+Ie,Ae=R(ye,Ie,ke);if(Ae[1].t="s",ke.vers==20768){var Ne=ye.read_shift(1);return Ae[1].v=ye.read_shift(Ne,"utf8"),Ae}return Ae[1].v=ye.read_shift(Ce-ye.l,"cstr"),Ae}function D(ye,Ie,ke){var Ce=R(ye,Ie,ke);return Ce[1].v=ye.read_shift(2,"i"),Ce}function N(ye,Ie,ke){var Ce=new_buf(7);return Ce.write_shift(1,255),Ce.write_shift(2,Ie),Ce.write_shift(2,ye),Ce.write_shift(2,ke,"i"),Ce}function M(ye,Ie,ke){var Ce=R(ye,Ie,ke);return Ce[1].v=ye.read_shift(8,"f"),Ce}function O(ye,Ie,ke){var Ce=new_buf(13);return Ce.write_shift(1,255),Ce.write_shift(2,Ie),Ce.write_shift(2,ye),Ce.write_shift(8,ke,"f"),Ce}function L(ye,Ie,ke){var Ce=ye.l+Ie,Ae=R(ye,Ie,ke);if(Ae[1].v=ye.read_shift(8,"f"),ke.qpro)ye.l=Ce;else{var Ne=ye.read_shift(2);z(ye.slice(ye.l,ye.l+Ne),Ae),ye.l+=Ne}return Ae}function F(ye,Ie,ke){var Ce=Ie&32768;return Ie&=-32769,Ie=(Ce?ye:0)+(Ie>=8192?Ie-16384:Ie),(Ce?"":"$")+(ke?encode_col(Ie):encode_row(Ie))}var U={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],63:["ROUND",2],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function z(ye,Ie){prep_blob(ye,0);for(var ke=[],Ce=0,Ae="",Ne="",We="",Be="";ye.l<ye.length;){var Se=ye[ye.l++];switch(Se){case 0:ke.push(ye.read_shift(8,"f"));break;case 1:Ne=F(Ie[0].c,ye.read_shift(2),!0),Ae=F(Ie[0].r,ye.read_shift(2),!1),ke.push(Ne+Ae);break;case 2:{var $e=F(Ie[0].c,ye.read_shift(2),!0),_e=F(Ie[0].r,ye.read_shift(2),!1);Ne=F(Ie[0].c,ye.read_shift(2),!0),Ae=F(Ie[0].r,ye.read_shift(2),!1),ke.push($e+_e+":"+Ne+Ae)}break;case 3:if(ye.l<ye.length){console.error("WK1 premature formula end");return}break;case 4:ke.push("("+ke.pop()+")");break;case 5:ke.push(ye.read_shift(2));break;case 6:{for(var Oe="";Se=ye[ye.l++];)Oe+=String.fromCharCode(Se);ke.push('"'+Oe.replace(/"/g,'""')+'"')}break;case 8:ke.push("-"+ke.pop());break;case 23:ke.push("+"+ke.pop());break;case 22:ke.push("NOT("+ke.pop()+")");break;case 20:case 21:Be=ke.pop(),We=ke.pop(),ke.push(["AND","OR"][Se-20]+"("+We+","+Be+")");break;default:if(Se<32&&j[Se])Be=ke.pop(),We=ke.pop(),ke.push(We+j[Se]+Be);else if(U[Se]){if(Ce=U[Se][1],Ce==69&&(Ce=ye[ye.l++]),Ce>ke.length){console.error("WK1 bad formula parse 0x"+Se.toString(16)+":|"+ke.join("|")+"|");return}var Ke=ke.slice(-Ce);ke.length-=Ce,ke.push(U[Se][0]+"("+Ke.join(",")+")")}else return Se<=7?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=24?console.error("WK1 unsupported op "+Se.toString(16)):Se<=30?console.error("WK1 invalid opcode "+Se.toString(16)):Se<=115?console.error("WK1 unsupported function opcode "+Se.toString(16)):console.error("WK1 unrecognized opcode "+Se.toString(16))}}ke.length==1?Ie[1].f=""+ke[0]:console.error("WK1 bad formula parse |"+ke.join("|")+"|")}function W(ye){var Ie=[{c:0,r:0},{t:"n",v:0},0];return Ie[0].r=ye.read_shift(2),Ie[3]=ye[ye.l++],Ie[0].c=ye[ye.l++],Ie}function X(ye,Ie){var ke=W(ye);return ke[1].t="s",ke[1].v=ye.read_shift(Ie-4,"cstr"),ke}function ie(ye,Ie,ke,Ce){var Ae=new_buf(6+Ce.length);Ae.write_shift(2,ye),Ae.write_shift(1,ke),Ae.write_shift(1,Ie),Ae.write_shift(1,39);for(var Ne=0;Ne<Ce.length;++Ne){var We=Ce.charCodeAt(Ne);Ae.write_shift(1,We>=128?95:We)}return Ae.write_shift(1,0),Ae}function fe(ye,Ie){var ke=W(ye);ke[1].v=ye.read_shift(2);var Ce=ke[1].v>>1;if(ke[1].v&1)switch(Ce&7){case 0:Ce=(Ce>>3)*5e3;break;case 1:Ce=(Ce>>3)*500;break;case 2:Ce=(Ce>>3)/20;break;case 3:Ce=(Ce>>3)/200;break;case 4:Ce=(Ce>>3)/2e3;break;case 5:Ce=(Ce>>3)/2e4;break;case 6:Ce=(Ce>>3)/16;break;case 7:Ce=(Ce>>3)/64;break}return ke[1].v=Ce,ke}function xe(ye,Ie){var ke=W(ye),Ce=ye.read_shift(4),Ae=ye.read_shift(4),Ne=ye.read_shift(2);if(Ne==65535)return Ce===0&&Ae===3221225472?(ke[1].t="e",ke[1].v=15):Ce===0&&Ae===3489660928?(ke[1].t="e",ke[1].v=42):ke[1].v=0,ke;var We=Ne&32768;return Ne=(Ne&32767)-16446,ke[1].v=(1-We*2)*(Ae*Math.pow(2,Ne+32)+Ce*Math.pow(2,Ne)),ke}function we(ye,Ie,ke,Ce){var Ae=new_buf(14);if(Ae.write_shift(2,ye),Ae.write_shift(1,ke),Ae.write_shift(1,Ie),Ce==0)return Ae.write_shift(4,0),Ae.write_shift(4,0),Ae.write_shift(2,65535),Ae;var Ne=0,We=0,Be=0,Se=0;return Ce<0&&(Ne=1,Ce=-Ce),We=Math.log2(Ce)|0,Ce/=Math.pow(2,We-31),Se=Ce>>>0,Se&2147483648||(Ce/=2,++We,Se=Ce>>>0),Ce-=Se,Se|=2147483648,Se>>>=0,Ce*=Math.pow(2,32),Be=Ce>>>0,Ae.write_shift(4,Be),Ae.write_shift(4,Se),We+=16383+(Ne?32768:0),Ae.write_shift(2,We),Ae}function G(ye,Ie){var ke=xe(ye);return ye.l+=Ie-14,ke}function J(ye,Ie){var ke=W(ye),Ce=ye.read_shift(4);return ke[1].v=Ce>>6,ke}function q(ye,Ie){var ke=W(ye),Ce=ye.read_shift(8,"f");return ke[1].v=Ce,ke}function H(ye,Ie){var ke=q(ye);return ye.l+=Ie-12,ke}function ve(ye,Ie){return ye[ye.l+Ie-1]==0?ye.read_shift(Ie,"cstr"):""}function Z(ye,Ie){var ke=ye[ye.l++];ke>Ie-1&&(ke=Ie-1);for(var Ce="";Ce.length<ke;)Ce+=String.fromCharCode(ye[ye.l++]);return Ce}function ce(ye,Ie,ke){if(!(!ke.qpro||Ie<21)){var Ce=ye.read_shift(1);ye.l+=17,ye.l+=1,ye.l+=2;var Ae=ye.read_shift(Ie-21,"cstr");return[Ce,Ae]}}function ue(ye,Ie){for(var ke={},Ce=ye.l+Ie;ye.l<Ce;){var Ae=ye.read_shift(2);if(Ae==14e3){for(ke[Ae]=[0,""],ke[Ae][0]=ye.read_shift(2);ye[ye.l];)ke[Ae][1]+=String.fromCharCode(ye[ye.l]),ye.l++;ye.l++}}return ke}function se(ye,Ie){var ke=new_buf(5+ye.length);ke.write_shift(2,14e3),ke.write_shift(2,Ie);for(var Ce=0;Ce<ye.length;++Ce){var Ae=ye.charCodeAt(Ce);ke[ke.l++]=Ae>127?95:Ae}return ke[ke.l++]=0,ke}var te={0:{n:"BOF",f:parseuint16},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:C},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:D},14:{n:"NUMBER",f:M},15:{n:"LABEL",f:A},16:{n:"FORMULA",f:L},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:B},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ve},222:{n:"SHEETNAMELP",f:Z},255:{n:"BOF",f:parseuint16},65535:{n:""}},Y={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:X},23:{n:"NUMBER17",f:xe},24:{n:"NUMBER18",f:fe},25:{n:"FORMULA19",f:G},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ue},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:J},38:{n:"??"},39:{n:"NUMBER27",f:q},40:{n:"FORMULA28",f:H},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ve},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ce},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};function be(ye,Ie){prep_blob(ye,0);var ke=Ie||{},Ce={};ke.dense&&(Ce["!data"]=[]);var Ae=[],Ne="",We={s:{r:-1,c:-1},e:{r:-1,c:-1}},Be=0,Se=0,$e=0,_e=0,Oe={SheetNames:[],Sheets:{}};e:for(;ye.l<ye.length;){var Ke=ye.read_shift(2),Me=ye.read_shift(2),Le=ye.slice(ye.l,ye.l+Me);switch(prep_blob(Le,0),Ke){case 1:if(Le.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 1025:break;case 1026:break;case 1031:for(Le.l+=12;Le.l<Le.length;)Be=Le.read_shift(2),Se=Le.read_shift(1),Ae.push(Le.read_shift(Be,"cstr"));break;case 1032:break;case 1537:{var ze=Le.read_shift(2);Ce={},ke.dense&&(Ce["!data"]=[]),We.s.c=Le.read_shift(2),We.e.c=Le.read_shift(2),We.s.r=Le.read_shift(4),We.e.r=Le.read_shift(4),Le.l+=4,Le.l+2<Le.length&&(Be=Le.read_shift(2),Se=Le.read_shift(1),Ne=Be==0?"":Le.read_shift(Be,"cstr")),Ne||(Ne=encode_col(ze))}break;case 1538:{if(We.s.c>255||We.s.r>999999)break;We.e.c<We.s.c&&(We.e.c=We.s.c),We.e.r<We.s.r&&(We.e.r=We.s.r),Ce["!ref"]=encode_range(We),book_append_sheet(Oe,Ce,Ne)}break;case 2561:$e=Le.read_shift(2),We.e.c<$e&&(We.e.c=$e),We.s.c>$e&&(We.s.c=$e),_e=Le.read_shift(4),We.s.r>_e&&(We.s.r=_e),_e=Le.read_shift(4),We.e.r<_e&&(We.e.r=_e);break;case 3073:{_e=Le.read_shift(4),Be=Le.read_shift(4),We.s.r>_e&&(We.s.r=_e),We.e.r<_e+Be-1&&(We.e.r=_e+Be-1);for(var Je=encode_col($e);Le.l<Le.length;){var Qe={t:"z"},rt=Le.read_shift(1);rt&128&&(Le.l+=2);var wt=rt&64?Le.read_shift(2)-1:0;switch(rt&31){case 1:break;case 2:Qe={t:"n",v:Le.read_shift(2)};break;case 3:Qe={t:"n",v:Le.read_shift(2,"i")};break;case 5:Qe={t:"n",v:Le.read_shift(8,"f")};break;case 7:Qe={t:"s",v:Ae[Se=Le.read_shift(4)-1]};break;case 8:Qe={t:"n",v:Le.read_shift(8,"f")},Le.l+=2,Le.l+=4;break;default:throw"Unrecognized QPW cell type "+(rt&31)}var bt=0;if(rt&32)switch(rt&31){case 2:bt=Le.read_shift(2);break;case 3:bt=Le.read_shift(2,"i");break;case 7:bt=Le.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(rt&31)}for(!ke.sheetStubs&&Qe.t=="z"||(Ce["!data"]!=null?(Ce["!data"][_e]||(Ce["!data"][_e]=[]),Ce["!data"][_e][$e]=Qe):Ce[Je+encode_row(_e)]=Qe),++_e,--Be;wt-- >0&&Be>=0;){if(rt&32)switch(rt&31){case 2:Qe={t:"n",v:Qe.v+bt&65535};break;case 3:Qe={t:"n",v:Qe.v+bt&65535},Qe.v>32767&&(Qe.v-=65536);break;case 7:Qe={t:"s",v:Ae[Se=Se+bt>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(rt&31)}else switch(rt&31){case 1:Qe={t:"z"};break;case 2:Qe={t:"n",v:Le.read_shift(2)};break;case 7:Qe={t:"s",v:Ae[Se=Le.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(rt&31)}!ke.sheetStubs&&Qe.t=="z"||(Ce["!data"]!=null?(Ce["!data"][_e]||(Ce["!data"][_e]=[]),Ce["!data"][_e][$e]=Qe):Ce[Je+encode_row(_e)]=Qe),++_e,--Be}}}break}ye.l+=Me}return Oe}return{sheet_to_wk1:_,book_to_wk3:x,to_workbook:r}}();function parse_rpr(n){var r={},g=n.match(tagregex),_=0,x=!1;if(g)for(;_!=g.length;++_){var S=parsexmltag(g[_]);switch(S[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!S.val)break;case"<shadow>":case"<shadow/>":r.shadow=1;break;case"</shadow>":break;case"<charset":if(S.val=="1")break;r.cp=CS2CP[parseInt(S.val,10)];break;case"<outline":if(!S.val)break;case"<outline>":case"<outline/>":r.outline=1;break;case"</outline>":break;case"<rFont":r.name=S.val;break;case"<sz":r.sz=S.val;break;case"<strike":if(!S.val)break;case"<strike>":case"<strike/>":r.strike=1;break;case"</strike>":break;case"<u":if(!S.val)break;switch(S.val){case"double":r.uval="double";break;case"singleAccounting":r.uval="single-accounting";break;case"doubleAccounting":r.uval="double-accounting";break}case"<u>":case"<u/>":r.u=1;break;case"</u>":break;case"<b":if(S.val=="0")break;case"<b>":case"<b/>":r.b=1;break;case"</b>":break;case"<i":if(S.val=="0")break;case"<i>":case"<i/>":r.i=1;break;case"</i>":break;case"<color":S.rgb&&(r.color=S.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":r.family=S.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":r.valign=S.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":x=!0;break;case"</ext>":x=!1;break;default:if(S[0].charCodeAt(1)!==47&&!x)throw new Error("Unrecognized rich format "+S[0])}}return r}var parse_rs=function(){var n=matchtag("t"),r=matchtag("rPr");function g(S){var E=S.match(n);if(!E)return{t:"s",v:""};var C={t:"s",v:unescapexml(E[1])},T=S.match(r);return T&&(C.s=parse_rpr(T[1])),C}var _=/<(?:\w+:)?r>/g,x=/<\/(?:\w+:)?r>/;return function(E){return E.replace(_,"").split(x).map(g).filter(function(C){return C.v})}}(),rs_to_html=function(){var r=/(\r\n|\n)/g;function g(x,S,E){var C=[];x.u&&C.push("text-decoration: underline;"),x.uval&&C.push("text-underline-style:"+x.uval+";"),x.sz&&C.push("font-size:"+x.sz+"pt;"),x.outline&&C.push("text-effect: outline;"),x.shadow&&C.push("text-shadow: auto;"),S.push('<span style="'+C.join("")+'">'),x.b&&(S.push("<b>"),E.push("</b>")),x.i&&(S.push("<i>"),E.push("</i>")),x.strike&&(S.push("<s>"),E.push("</s>"));var T=x.valign||"";return T=="superscript"||T=="super"?T="sup":T=="subscript"&&(T="sub"),T!=""&&(S.push("<"+T+">"),E.push("</"+T+">")),E.push("</span>"),x}function _(x){var S=[[],x.v,[]];return x.v?(x.s&&g(x.s,S[0],S[2]),S[0].join("")+S[1].replace(r,"<br/>")+S[2].join("")):""}return function(S){return S.map(_).join("")}}(),sitregex=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,sirregex=/<(?:\w+:)?r>/,sirphregex=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function parse_si(n,r){var g=r?r.cellHTML:!0,_={};return n?(n.match(/^\s*<(?:\w+:)?t[^>]*>/)?(_.t=unescapexml(utf8read(n.slice(n.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),_.r=utf8read(n),g&&(_.h=escapehtml(_.t))):n.match(sirregex)&&(_.r=utf8read(n),_.t=unescapexml(utf8read((n.replace(sirphregex,"").match(sitregex)||[]).join("").replace(tagregex,"")),!0),g&&(_.h=rs_to_html(parse_rs(_.r)))),_):{t:""}}var sstr0=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,sstr1=/<(?:\w+:)?(?:si|sstItem)>/g,sstr2=/<\/(?:\w+:)?(?:si|sstItem)>/;function parse_sst_xml(n,r){var g=[],_="";if(!n)return g;var x=n.match(sstr0);if(x){_=x[2].replace(sstr1,"").split(sstr2);for(var S=0;S!=_.length;++S){var E=parse_si(_[S].trim(),r);E!=null&&(g[g.length]=E)}x=parsexmltag(x[1]),g.Count=x.count,g.Unique=x.uniqueCount}return g}var straywsregex=/^\s|\s$|[\t\n\r]/;function write_sst_xml(n,r){if(!r.bookSST)return"";var g=[XML_HEADER];g[g.length]=writextag("sst",null,{xmlns:XMLNS_main[0],count:n.Count,uniqueCount:n.Unique});for(var _=0;_!=n.length;++_)if(n[_]!=null){var x=n[_],S="<si>";x.r?S+=x.r:(S+="<t",x.t||(x.t=""),typeof x.t!="string"&&(x.t=String(x.t)),x.t.match(straywsregex)&&(S+=' xml:space="preserve"'),S+=">"+escapexml(x.t)+"</t>"),S+="</si>",g[g.length]=S}return g.length>2&&(g[g.length]="</sst>",g[1]=g[1].replace("/>",">")),g.join("")}function parse_BrtBeginSst(n){return[n.read_shift(4),n.read_shift(4)]}function parse_sst_bin(n,r){var g=[],_=!1;return recordhopper(n,function(S,E,C){switch(C){case 159:g.Count=S[0],g.Unique=S[1];break;case 19:g.push(S);break;case 160:return!0;case 35:_=!0;break;case 36:_=!1;break;default:if(E.T,!_||r.WTF)throw new Error("Unexpected record 0x"+C.toString(16))}}),g}function write_BrtBeginSst(n,r){return r||(r=new_buf(8)),r.write_shift(4,n.Count),r.write_shift(4,n.Unique),r}var write_BrtSSTItem=write_RichStr;function write_sst_bin(n){var r=buf_array();write_record(r,159,write_BrtBeginSst(n));for(var g=0;g<n.length;++g)write_record(r,19,write_BrtSSTItem(n[g]));return write_record(r,160),r.end()}function _JS2ANSI(n){for(var r=[],g=n.split(""),_=0;_<g.length;++_)r[_]=g[_].charCodeAt(0);return r}function parse_CRYPTOVersion(n,r){var g={};return g.Major=n.read_shift(2),g.Minor=n.read_shift(2),r>=4&&(n.l+=r-4),g}function parse_DataSpaceVersionInfo(n){var r={};return r.id=n.read_shift(0,"lpp4"),r.R=parse_CRYPTOVersion(n,4),r.U=parse_CRYPTOVersion(n,4),r.W=parse_CRYPTOVersion(n,4),r}function parse_DataSpaceMapEntry(n){for(var r=n.read_shift(4),g=n.l+r-4,_={},x=n.read_shift(4),S=[];x-- >0;)S.push({t:n.read_shift(4),v:n.read_shift(0,"lpp4")});if(_.name=n.read_shift(0,"lpp4"),_.comps=S,n.l!=g)throw new Error("Bad DataSpaceMapEntry: "+n.l+" != "+g);return _}function parse_DataSpaceMap(n){var r=[];n.l+=4;for(var g=n.read_shift(4);g-- >0;)r.push(parse_DataSpaceMapEntry(n));return r}function parse_DataSpaceDefinition(n){var r=[];n.l+=4;for(var g=n.read_shift(4);g-- >0;)r.push(n.read_shift(0,"lpp4"));return r}function parse_TransformInfoHeader(n){var r={};return n.read_shift(4),n.l+=4,r.id=n.read_shift(0,"lpp4"),r.name=n.read_shift(0,"lpp4"),r.R=parse_CRYPTOVersion(n,4),r.U=parse_CRYPTOVersion(n,4),r.W=parse_CRYPTOVersion(n,4),r}function parse_Primary(n){var r=parse_TransformInfoHeader(n);if(r.ename=n.read_shift(0,"8lpp4"),r.blksz=n.read_shift(4),r.cmode=n.read_shift(4),n.read_shift(4)!=4)throw new Error("Bad !Primary record");return r}function parse_EncryptionHeader(n,r){var g=n.l+r,_={};_.Flags=n.read_shift(4)&63,n.l+=4,_.AlgID=n.read_shift(4);var x=!1;switch(_.AlgID){case 26126:case 26127:case 26128:x=_.Flags==36;break;case 26625:x=_.Flags==4;break;case 0:x=_.Flags==16||_.Flags==4||_.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+_.AlgID}if(!x)throw new Error("Encryption Flags/AlgID mismatch");return _.AlgIDHash=n.read_shift(4),_.KeySize=n.read_shift(4),_.ProviderType=n.read_shift(4),n.l+=8,_.CSPName=n.read_shift(g-n.l>>1,"utf16le"),n.l=g,_}function parse_EncryptionVerifier(n,r){var g={},_=n.l+r;return n.l+=4,g.Salt=n.slice(n.l,n.l+16),n.l+=16,g.Verifier=n.slice(n.l,n.l+16),n.l+=16,n.read_shift(4),g.VerifierHash=n.slice(n.l,_),n.l=_,g}function parse_EncryptionInfo(n){var r=parse_CRYPTOVersion(n);switch(r.Minor){case 2:return[r.Minor,parse_EncInfoStd(n)];case 3:return[r.Minor,parse_EncInfoExt()];case 4:return[r.Minor,parse_EncInfoAgl(n)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+r.Minor)}function parse_EncInfoStd(n){var r=n.read_shift(4);if((r&63)!=36)throw new Error("EncryptionInfo mismatch");var g=n.read_shift(4),_=parse_EncryptionHeader(n,g),x=parse_EncryptionVerifier(n,n.length-n.l);return{t:"Std",h:_,v:x}}function parse_EncInfoExt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function parse_EncInfoAgl(n){var r=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];n.l+=4;var g=n.read_shift(n.length-n.l,"utf8"),_={};return g.replace(tagregex,function(S){var E=parsexmltag(S);switch(strip_ns(E[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":r.forEach(function(C){_[C]=E[C]});break;case"<dataIntegrity":_.encryptedHmacKey=E.encryptedHmacKey,_.encryptedHmacValue=E.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":_.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":_.uri=E.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":_.encs.push(E);break;default:throw E[0]}}),_}function parse_RC4CryptoHeader(n,r){var g={},_=g.EncryptionVersionInfo=parse_CRYPTOVersion(n,4);if(r-=4,_.Minor!=2)throw new Error("unrecognized minor version code: "+_.Minor);if(_.Major>4||_.Major<2)throw new Error("unrecognized major version code: "+_.Major);g.Flags=n.read_shift(4),r-=4;var x=n.read_shift(4);return r-=4,g.EncryptionHeader=parse_EncryptionHeader(n,x),r-=x,g.EncryptionVerifier=parse_EncryptionVerifier(n,r),g}function parse_RC4Header(n){var r={},g=r.EncryptionVersionInfo=parse_CRYPTOVersion(n,4);if(g.Major!=1||g.Minor!=1)throw"unrecognized version code "+g.Major+" : "+g.Minor;return r.Salt=n.read_shift(16),r.EncryptedVerifier=n.read_shift(16),r.EncryptedVerifierHash=n.read_shift(16),r}function crypto_CreatePasswordVerifier_Method1(n){var r=0,g,_=_JS2ANSI(n),x=_.length+1,S,E,C,T,R;for(g=new_raw_buf(x),g[0]=_.length,S=1;S!=x;++S)g[S]=_[S-1];for(S=x-1;S>=0;--S)E=g[S],C=r&16384?1:0,T=r<<1&32767,R=C|T,r=R^E;return r^52811}var crypto_CreateXorArray_Method1=function(){var n=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],r=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],g=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],_=function(E){return(E/2|E*128)&255},x=function(E,C){return _(E^C)},S=function(E){for(var C=r[E.length-1],T=104,R=E.length-1;R>=0;--R)for(var A=E[R],I=0;I!=7;++I)A&64&&(C^=g[T]),A*=2,--T;return C};return function(E){for(var C=_JS2ANSI(E),T=S(C),R=C.length,A=new_raw_buf(16),I=0;I!=16;++I)A[I]=0;var B,D,N;for((R&1)===1&&(B=T>>8,A[R]=x(n[0],B),--R,B=T&255,D=C[C.length-1],A[R]=x(D,B));R>0;)--R,B=T>>8,A[R]=x(C[R],B),--R,B=T&255,A[R]=x(C[R],B);for(R=15,N=15-C.length;N>0;)B=T>>8,A[R]=x(n[N],B),--R,--N,B=T&255,A[R]=x(C[R],B),--R,--N;return A}}(),crypto_DecryptData_Method1=function(n,r,g,_,x){x||(x=r),_||(_=crypto_CreateXorArray_Method1(n));var S,E;for(S=0;S!=r.length;++S)E=r[S],E^=_[g],E=(E>>5|E<<3)&255,x[S]=E,++g;return[x,g,_]},crypto_MakeXorDecryptor=function(n){var r=0,g=crypto_CreateXorArray_Method1(n);return function(_){var x=crypto_DecryptData_Method1("",_,r,g);return r=x[1],x[0]}};function parse_XORObfuscation(n,r,g,_){var x={key:parseuint16(n),verificationBytes:parseuint16(n)};return g.password&&(x.verifier=crypto_CreatePasswordVerifier_Method1(g.password)),_.valid=x.verificationBytes===x.verifier,_.valid&&(_.insitu=crypto_MakeXorDecryptor(g.password)),x}function parse_FilePassHeader(n,r,g){var _=g||{};return _.Info=n.read_shift(2),n.l-=2,_.Info===1?_.Data=parse_RC4Header(n):_.Data=parse_RC4CryptoHeader(n,r),_}function parse_FilePass(n,r,g){var _={Type:g.biff>=8?n.read_shift(2):0};return _.Type?parse_FilePassHeader(n,r-2,_):parse_XORObfuscation(n,g.biff>=8?r:r-2,g,_),_}function rtf_to_sheet(n,r){switch(r.type){case"base64":return rtf_to_sheet_str(Base64_decode(n),r);case"binary":return rtf_to_sheet_str(n,r);case"buffer":return rtf_to_sheet_str(has_buf&&Buffer$1.isBuffer(n)?n.toString("binary"):a2s(n),r);case"array":return rtf_to_sheet_str(cc2str(n),r)}throw new Error("Unrecognized type "+r.type)}function rtf_to_sheet_str(n,r){var g=r||{},_={},x=g.dense;x&&(_["!data"]=[]);var S=n.match(/\\trowd[\s\S]*?\\row\b/g);if(!S)throw new Error("RTF missing table");var E={s:{c:0,r:0},e:{c:0,r:S.length-1}},C=[];return S.forEach(function(T,R){x&&(C=_["!data"][R]=[]);for(var A=/\\[\w\-]+\b/g,I=0,B,D=-1,N=[];(B=A.exec(T))!=null;){var M=T.slice(I,A.lastIndex-B[0].length);switch(M.charCodeAt(0)==32&&(M=M.slice(1)),M.length&&N.push(M),B[0]){case"\\cell":if(++D,N.length){var O={v:N.join(""),t:"s"};O.v=="TRUE"||O.v=="FALSE"?(O.v=O.v=="TRUE",O.t="b"):isNaN(fuzzynum(O.v))||(O.t="n",g.cellText!==!1&&(O.w=O.v),O.v=fuzzynum(O.v)),x?C[D]=O:_[encode_cell({r:R,c:D})]=O}N=[];break;case"\\par":N.push(`
`);break}I=A.lastIndex}D>E.e.c&&(E.e.c=D)}),_["!ref"]=encode_range(E),_}function rtf_to_workbook(n,r){var g=sheet_to_workbook(rtf_to_sheet(n,r),r);return g.bookType="rtf",g}function sheet_to_rtf(n,r){var g=["{\\rtf1\\ansi"];if(!n["!ref"])return g[0]+"}";for(var _=safe_decode_range(n["!ref"]),x,S=n["!data"]!=null,E=[],C=_.s.r;C<=_.e.r;++C){g.push("\\trowd\\trautofit1");for(var T=_.s.c;T<=_.e.c;++T)g.push("\\cellx"+(T+1));for(g.push("\\pard\\intbl"),S&&(E=n["!data"][C]||[]),T=_.s.c;T<=_.e.c;++T){var R=encode_cell({r:C,c:T});if(x=S?E[T]:n[R],!x||x.v==null&&(!x.f||x.F)){g.push(" \\cell");continue}g.push(" "+(x.w||(format_cell(x),x.w)||"").replace(/[\r\n]/g,"\\par ")),g.push("\\cell")}g.push("\\pard\\intbl\\row")}return g.join("")+"}"}function hex2RGB(n){var r=n.slice(n[0]==="#"?1:0).slice(0,6);return[parseInt(r.slice(0,2),16),parseInt(r.slice(2,4),16),parseInt(r.slice(4,6),16)]}function rgb2Hex(n){for(var r=0,g=1;r!=3;++r)g=g*256+(n[r]>255?255:n[r]<0?0:n[r]);return g.toString(16).toUpperCase().slice(1)}function rgb2HSL(n){var r=n[0]/255,g=n[1]/255,_=n[2]/255,x=Math.max(r,g,_),S=Math.min(r,g,_),E=x-S;if(E===0)return[0,0,r];var C=0,T=0,R=x+S;switch(T=E/(R>1?2-R:R),x){case r:C=((g-_)/E+6)%6;break;case g:C=(_-r)/E+2;break;case _:C=(r-g)/E+4;break}return[C/6,T,R/2]}function hsl2RGB(n){var r=n[0],g=n[1],_=n[2],x=g*2*(_<.5?_:1-_),S=_-x/2,E=[S,S,S],C=6*r,T;if(g!==0)switch(C|0){case 0:case 6:T=x*C,E[0]+=x,E[1]+=T;break;case 1:T=x*(2-C),E[0]+=T,E[1]+=x;break;case 2:T=x*(C-2),E[1]+=x,E[2]+=T;break;case 3:T=x*(4-C),E[1]+=T,E[2]+=x;break;case 4:T=x*(C-4),E[2]+=x,E[0]+=T;break;case 5:T=x*(6-C),E[2]+=T,E[0]+=x;break}for(var R=0;R!=3;++R)E[R]=Math.round(E[R]*255);return E}function rgb_tint(n,r){if(r===0)return n;var g=rgb2HSL(hex2RGB(n));return r<0?g[2]=g[2]*(1+r):g[2]=1-(1-g[2])*(1-r),rgb2Hex(hsl2RGB(g))}var DEF_MDW=6,MAX_MDW=15,MIN_MDW=1,MDW=DEF_MDW;function width2px(n){return Math.floor((n+Math.round(128/MDW)/256)*MDW)}function px2char(n){return Math.floor((n-5)/MDW*100+.5)/100}function char2width(n){return Math.round((n*MDW+5)/MDW*256)/256}function cycle_width(n){return char2width(px2char(width2px(n)))}function find_mdw_colw(n){var r=Math.abs(n-cycle_width(n)),g=MDW;if(r>.005)for(MDW=MIN_MDW;MDW<MAX_MDW;++MDW)Math.abs(n-cycle_width(n))<=r&&(r=Math.abs(n-cycle_width(n)),g=MDW);MDW=g}function process_col(n){n.width?(n.wpx=width2px(n.width),n.wch=px2char(n.wpx),n.MDW=MDW):n.wpx?(n.wch=px2char(n.wpx),n.width=char2width(n.wch),n.MDW=MDW):typeof n.wch=="number"&&(n.width=char2width(n.wch),n.wpx=width2px(n.width),n.MDW=MDW),n.customWidth&&delete n.customWidth}var DEF_PPI=96,PPI=DEF_PPI;function px2pt(n){return n*96/PPI}function pt2px(n){return n*PPI/96}var XLMLPatternTypeMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function parse_borders(n,r,g,_){r.Borders=[];var x={},S=!1;(n[0].match(tagregex)||[]).forEach(function(E){var C=parsexmltag(E);switch(strip_ns(C[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":x={},C.diagonalUp&&(x.diagonalUp=parsexmlbool(C.diagonalUp)),C.diagonalDown&&(x.diagonalDown=parsexmlbool(C.diagonalDown)),r.Borders.push(x);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(_&&_.WTF&&!S)throw new Error("unrecognized "+C[0]+" in borders")}})}function parse_fills(n,r,g,_){r.Fills=[];var x={},S=!1;(n[0].match(tagregex)||[]).forEach(function(E){var C=parsexmltag(E);switch(strip_ns(C[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":x={},r.Fills.push(x);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":r.Fills.push(x),x={};break;case"<patternFill":case"<patternFill>":C.patternType&&(x.patternType=C.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":x.bgColor||(x.bgColor={}),C.indexed&&(x.bgColor.indexed=parseInt(C.indexed,10)),C.theme&&(x.bgColor.theme=parseInt(C.theme,10)),C.tint&&(x.bgColor.tint=parseFloat(C.tint)),C.rgb&&(x.bgColor.rgb=C.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":x.fgColor||(x.fgColor={}),C.theme&&(x.fgColor.theme=parseInt(C.theme,10)),C.tint&&(x.fgColor.tint=parseFloat(C.tint)),C.rgb!=null&&(x.fgColor.rgb=C.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(_&&_.WTF&&!S)throw new Error("unrecognized "+C[0]+" in fills")}})}function parse_fonts(n,r,g,_){r.Fonts=[];var x={},S=!1;(n[0].match(tagregex)||[]).forEach(function(E){var C=parsexmltag(E);switch(strip_ns(C[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":r.Fonts.push(x),x={};break;case"<name":C.val&&(x.name=utf8read(C.val));break;case"<name/>":case"</name>":break;case"<b":x.bold=C.val?parsexmlbool(C.val):1;break;case"<b/>":x.bold=1;break;case"<i":x.italic=C.val?parsexmlbool(C.val):1;break;case"<i/>":x.italic=1;break;case"<u":switch(C.val){case"none":x.underline=0;break;case"single":x.underline=1;break;case"double":x.underline=2;break;case"singleAccounting":x.underline=33;break;case"doubleAccounting":x.underline=34;break}break;case"<u/>":x.underline=1;break;case"<strike":x.strike=C.val?parsexmlbool(C.val):1;break;case"<strike/>":x.strike=1;break;case"<outline":x.outline=C.val?parsexmlbool(C.val):1;break;case"<outline/>":x.outline=1;break;case"<shadow":x.shadow=C.val?parsexmlbool(C.val):1;break;case"<shadow/>":x.shadow=1;break;case"<condense":x.condense=C.val?parsexmlbool(C.val):1;break;case"<condense/>":x.condense=1;break;case"<extend":x.extend=C.val?parsexmlbool(C.val):1;break;case"<extend/>":x.extend=1;break;case"<sz":C.val&&(x.sz=+C.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":C.val&&(x.vertAlign=C.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":C.val&&(x.family=parseInt(C.val,10));break;case"<family/>":case"</family>":break;case"<scheme":C.val&&(x.scheme=C.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(C.val=="1")break;C.codepage=CS2CP[parseInt(C.val,10)];break;case"<color":if(x.color||(x.color={}),C.auto&&(x.color.auto=parsexmlbool(C.auto)),C.rgb)x.color.rgb=C.rgb.slice(-6);else if(C.indexed){x.color.index=parseInt(C.indexed,10);var T=XLSIcv[x.color.index];x.color.index==81&&(T=XLSIcv[1]),T||(T=XLSIcv[1]),x.color.rgb=T[0].toString(16)+T[1].toString(16)+T[2].toString(16)}else C.theme&&(x.color.theme=parseInt(C.theme,10),C.tint&&(x.color.tint=parseFloat(C.tint)),C.theme&&g.themeElements&&g.themeElements.clrScheme&&(x.color.rgb=rgb_tint(g.themeElements.clrScheme[x.color.theme].rgb,x.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":S=!0;break;case"</AlternateContent>":S=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":S=!0;break;case"</ext>":S=!1;break;default:if(_&&_.WTF&&!S)throw new Error("unrecognized "+C[0]+" in fonts")}})}function parse_numFmts(n,r,g){r.NumberFmt=[];for(var _=keys$2(table_fmt),x=0;x<_.length;++x)r.NumberFmt[_[x]]=table_fmt[_[x]];var S=n[0].match(tagregex);if(S)for(x=0;x<S.length;++x){var E=parsexmltag(S[x]);switch(strip_ns(E[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var C=unescapexml(utf8read(E.formatCode)),T=parseInt(E.numFmtId,10);if(r.NumberFmt[T]=C,T>0){if(T>392){for(T=392;T>60&&r.NumberFmt[T]!=null;--T);r.NumberFmt[T]=C}SSF__load(C,T)}}break;case"</numFmt>":break;default:if(g.WTF)throw new Error("unrecognized "+E[0]+" in numFmts")}}}function write_numFmts(n){var r=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(g){for(var _=g[0];_<=g[1];++_)n[_]!=null&&(r[r.length]=writextag("numFmt",null,{numFmtId:_,formatCode:escapexml(n[_])}))}),r.length===1?"":(r[r.length]="</numFmts>",r[0]=writextag("numFmts",null,{count:r.length-2}).replace("/>",">"),r.join(""))}var cellXF_uint=["numFmtId","fillId","fontId","borderId","xfId"],cellXF_bool=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function parse_cellXfs(n,r,g){r.CellXf=[];var _,x=!1;(n[0].match(tagregex)||[]).forEach(function(S){var E=parsexmltag(S),C=0;switch(strip_ns(E[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(_=E,delete _[0],C=0;C<cellXF_uint.length;++C)_[cellXF_uint[C]]&&(_[cellXF_uint[C]]=parseInt(_[cellXF_uint[C]],10));for(C=0;C<cellXF_bool.length;++C)_[cellXF_bool[C]]&&(_[cellXF_bool[C]]=parsexmlbool(_[cellXF_bool[C]]));if(r.NumberFmt&&_.numFmtId>392){for(C=392;C>60;--C)if(r.NumberFmt[_.numFmtId]==r.NumberFmt[C]){_.numFmtId=C;break}}r.CellXf.push(_);break;case"</xf>":break;case"<alignment":case"<alignment/>":var T={};E.vertical&&(T.vertical=E.vertical),E.horizontal&&(T.horizontal=E.horizontal),E.textRotation!=null&&(T.textRotation=E.textRotation),E.indent&&(T.indent=E.indent),E.wrapText&&(T.wrapText=parsexmlbool(E.wrapText)),_.alignment=T;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":x=!0;break;case"</AlternateContent>":x=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":x=!0;break;case"</ext>":x=!1;break;default:if(g&&g.WTF&&!x)throw new Error("unrecognized "+E[0]+" in cellXfs")}})}function write_cellXfs(n){var r=[];return r[r.length]=writextag("cellXfs",null),n.forEach(function(g){r[r.length]=writextag("xf",null,g)}),r[r.length]="</cellXfs>",r.length===2?"":(r[0]=writextag("cellXfs",null,{count:r.length-2}).replace("/>",">"),r.join(""))}var parse_sty_xml=function(){var r=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,g=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,_=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,x=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,S=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(C,T,R){var A={};if(!C)return A;C=C.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var I;return(I=C.match(r))&&parse_numFmts(I,A,R),(I=C.match(x))&&parse_fonts(I,A,T,R),(I=C.match(_))&&parse_fills(I,A,T,R),(I=C.match(S))&&parse_borders(I,A,T,R),(I=C.match(g))&&parse_cellXfs(I,A,R),A}}();function write_sty_xml(n,r){var g=[XML_HEADER,writextag("styleSheet",null,{xmlns:XMLNS_main[0],"xmlns:vt":XMLNS.vt})],_;return n.SSF&&(_=write_numFmts(n.SSF))!=null&&(g[g.length]=_),g[g.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',g[g.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',g[g.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',g[g.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(_=write_cellXfs(r.cellXfs))&&(g[g.length]=_),g[g.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',g[g.length]='<dxfs count="0"/>',g[g.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',g.length>2&&(g[g.length]="</styleSheet>",g[1]=g[1].replace("/>",">")),g.join("")}function parse_BrtFmt(n,r){var g=n.read_shift(2),_=parse_XLWideString(n);return[g,_]}function write_BrtFmt(n,r,g){g||(g=new_buf(6+4*r.length)),g.write_shift(2,n),write_XLWideString(r,g);var _=g.length>g.l?g.slice(0,g.l):g;return g.l==null&&(g.l=g.length),_}function parse_BrtFont(n,r,g){var _={};_.sz=n.read_shift(2)/20;var x=parse_FontFlags(n);x.fItalic&&(_.italic=1),x.fCondense&&(_.condense=1),x.fExtend&&(_.extend=1),x.fShadow&&(_.shadow=1),x.fOutline&&(_.outline=1),x.fStrikeout&&(_.strike=1);var S=n.read_shift(2);switch(S===700&&(_.bold=1),n.read_shift(2)){case 1:_.vertAlign="superscript";break;case 2:_.vertAlign="subscript";break}var E=n.read_shift(1);E!=0&&(_.underline=E);var C=n.read_shift(1);C>0&&(_.family=C);var T=n.read_shift(1);switch(T>0&&(_.charset=T),n.l++,_.color=parse_BrtColor(n),n.read_shift(1)){case 1:_.scheme="major";break;case 2:_.scheme="minor";break}return _.name=parse_XLWideString(n),_}function write_BrtFont(n,r){r||(r=new_buf(25+4*32)),r.write_shift(2,n.sz*20),write_FontFlags(n,r),r.write_shift(2,n.bold?700:400);var g=0;n.vertAlign=="superscript"?g=1:n.vertAlign=="subscript"&&(g=2),r.write_shift(2,g),r.write_shift(1,n.underline||0),r.write_shift(1,n.family||0),r.write_shift(1,n.charset||0),r.write_shift(1,0),write_BrtColor(n.color,r);var _=0;return n.scheme=="major"&&(_=1),n.scheme=="minor"&&(_=2),r.write_shift(1,_),write_XLWideString(n.name,r),r.length>r.l?r.slice(0,r.l):r}var XLSBFillPTNames=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rev_XLSBFillPTNames,parse_BrtFill=parsenoop;function write_BrtFill(n,r){r||(r=new_buf(4*3+8*7+16*1)),rev_XLSBFillPTNames||(rev_XLSBFillPTNames=evert(XLSBFillPTNames));var g=rev_XLSBFillPTNames[n.patternType];g==null&&(g=40),r.write_shift(4,g);var _=0;if(g!=40)for(write_BrtColor({auto:1},r),write_BrtColor({auto:1},r);_<12;++_)r.write_shift(4,0);else{for(;_<4;++_)r.write_shift(4,0);for(;_<12;++_)r.write_shift(4,0)}return r.length>r.l?r.slice(0,r.l):r}function parse_BrtXF(n,r){var g=n.l+r,_=n.read_shift(2),x=n.read_shift(2);return n.l=g,{ixfe:_,numFmtId:x}}function write_BrtXF(n,r,g){g||(g=new_buf(16)),g.write_shift(2,r||0),g.write_shift(2,n.numFmtId||0),g.write_shift(2,0),g.write_shift(2,0),g.write_shift(2,0),g.write_shift(1,0),g.write_shift(1,0);var _=0;return g.write_shift(1,_),g.write_shift(1,0),g.write_shift(1,0),g.write_shift(1,0),g}function write_Blxf(n,r){return r||(r=new_buf(10)),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(4,0),r}var parse_BrtBorder=parsenoop;function write_BrtBorder(n,r){return r||(r=new_buf(51)),r.write_shift(1,0),write_Blxf(null,r),write_Blxf(null,r),write_Blxf(null,r),write_Blxf(null,r),write_Blxf(null,r),r.length>r.l?r.slice(0,r.l):r}function write_BrtStyle(n,r){return r||(r=new_buf(12+4*10)),r.write_shift(4,n.xfId),r.write_shift(2,1),r.write_shift(1,+n.builtinId),r.write_shift(1,0),write_XLNullableWideString(n.name||"",r),r.length>r.l?r.slice(0,r.l):r}function write_BrtBeginTableStyles(n,r,g){var _=new_buf(2052);return _.write_shift(4,n),write_XLNullableWideString(r,_),write_XLNullableWideString(g,_),_.length>_.l?_.slice(0,_.l):_}function parse_sty_bin(n,r,g){var _={};_.NumberFmt=[];for(var x in table_fmt)_.NumberFmt[x]=table_fmt[x];_.CellXf=[],_.Fonts=[];var S=[],E=!1;return recordhopper(n,function(T,R,A){switch(A){case 44:_.NumberFmt[T[0]]=T[1],SSF__load(T[1],T[0]);break;case 43:_.Fonts.push(T),T.color.theme!=null&&r&&r.themeElements&&r.themeElements.clrScheme&&(T.color.rgb=rgb_tint(r.themeElements.clrScheme[T.color.theme].rgb,T.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:S[S.length-1]==617&&_.CellXf.push(T);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:E=!0;break;case 36:E=!1;break;case 37:S.push(A),E=!0;break;case 38:S.pop(),E=!1;break;default:if(R.T>0)S.push(A);else if(R.T<0)S.pop();else if(!E||g.WTF&&S[S.length-1]!=37)throw new Error("Unexpected record 0x"+A.toString(16))}}),_}function write_FMTS_bin(n,r){if(r){var g=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(_){for(var x=_[0];x<=_[1];++x)r[x]!=null&&++g}),g!=0&&(write_record(n,615,write_UInt32LE(g)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(_){for(var x=_[0];x<=_[1];++x)r[x]!=null&&write_record(n,44,write_BrtFmt(x,r[x]))}),write_record(n,616))}}function write_FONTS_bin(n){var r=1;write_record(n,611,write_UInt32LE(r)),write_record(n,43,write_BrtFont({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),write_record(n,612)}function write_FILLS_bin(n){var r=2;write_record(n,603,write_UInt32LE(r)),write_record(n,45,write_BrtFill({patternType:"none"})),write_record(n,45,write_BrtFill({patternType:"gray125"})),write_record(n,604)}function write_BORDERS_bin(n){var r=1;write_record(n,613,write_UInt32LE(r)),write_record(n,46,write_BrtBorder()),write_record(n,614)}function write_CELLSTYLEXFS_bin(n){var r=1;write_record(n,626,write_UInt32LE(r)),write_record(n,47,write_BrtXF({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),write_record(n,627)}function write_CELLXFS_bin(n,r){write_record(n,617,write_UInt32LE(r.length)),r.forEach(function(g){write_record(n,47,write_BrtXF(g,0))}),write_record(n,618)}function write_STYLES_bin(n){var r=1;write_record(n,619,write_UInt32LE(r)),write_record(n,48,write_BrtStyle({xfId:0,builtinId:0,name:"Normal"})),write_record(n,620)}function write_DXFS_bin(n){var r=0;write_record(n,505,write_UInt32LE(r)),write_record(n,506)}function write_TABLESTYLES_bin(n){var r=0;write_record(n,508,write_BrtBeginTableStyles(r,"TableStyleMedium9","PivotStyleMedium4")),write_record(n,509)}function write_sty_bin(n,r){var g=buf_array();return write_record(g,278),write_FMTS_bin(g,n.SSF),write_FONTS_bin(g),write_FILLS_bin(g),write_BORDERS_bin(g),write_CELLSTYLEXFS_bin(g),write_CELLXFS_bin(g,r.cellXfs),write_STYLES_bin(g),write_DXFS_bin(g),write_TABLESTYLES_bin(g),write_record(g,279),g.end()}var XLSXThemeClrScheme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function parse_clrScheme(n,r,g){r.themeElements.clrScheme=[];var _={};(n[0].match(tagregex)||[]).forEach(function(x){var S=parsexmltag(x);switch(S[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":_.rgb=S.val;break;case"<a:sysClr":_.rgb=S.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":S[0].charAt(1)==="/"?(r.themeElements.clrScheme[XLSXThemeClrScheme.indexOf(S[0])]=_,_={}):_.name=S[0].slice(3,S[0].length-1);break;default:if(g&&g.WTF)throw new Error("Unrecognized "+S[0]+" in clrScheme")}})}function parse_fontScheme(){}function parse_fmtScheme(){}var clrsregex=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,fntsregex=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,fmtsregex=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function parse_themeElements(n,r,g){r.themeElements={};var _;[["clrScheme",clrsregex,parse_clrScheme],["fontScheme",fntsregex,parse_fontScheme],["fmtScheme",fmtsregex,parse_fmtScheme]].forEach(function(x){if(!(_=n.match(x[1])))throw new Error(x[0]+" not found in themeElements");x[2](_,r,g)})}var themeltregex=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function parse_theme_xml(n,r){(!n||n.length===0)&&(n=write_theme());var g,_={};if(!(g=n.match(themeltregex)))throw new Error("themeElements not found in theme");return parse_themeElements(g[0],_,r),_.raw=n,_}function write_theme(n,r){if(r&&r.themeXLSX)return r.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var g=[XML_HEADER];return g[g.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',g[g.length]="<a:themeElements>",g[g.length]='<a:clrScheme name="Office">',g[g.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',g[g.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',g[g.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',g[g.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',g[g.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',g[g.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',g[g.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',g[g.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',g[g.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',g[g.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',g[g.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',g[g.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',g[g.length]="</a:clrScheme>",g[g.length]='<a:fontScheme name="Office">',g[g.length]="<a:majorFont>",g[g.length]='<a:latin typeface="Cambria"/>',g[g.length]='<a:ea typeface=""/>',g[g.length]='<a:cs typeface=""/>',g[g.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',g[g.length]='<a:font script="Hang" typeface="맑은 고딕"/>',g[g.length]='<a:font script="Hans" typeface="宋体"/>',g[g.length]='<a:font script="Hant" typeface="新細明體"/>',g[g.length]='<a:font script="Arab" typeface="Times New Roman"/>',g[g.length]='<a:font script="Hebr" typeface="Times New Roman"/>',g[g.length]='<a:font script="Thai" typeface="Tahoma"/>',g[g.length]='<a:font script="Ethi" typeface="Nyala"/>',g[g.length]='<a:font script="Beng" typeface="Vrinda"/>',g[g.length]='<a:font script="Gujr" typeface="Shruti"/>',g[g.length]='<a:font script="Khmr" typeface="MoolBoran"/>',g[g.length]='<a:font script="Knda" typeface="Tunga"/>',g[g.length]='<a:font script="Guru" typeface="Raavi"/>',g[g.length]='<a:font script="Cans" typeface="Euphemia"/>',g[g.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',g[g.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',g[g.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',g[g.length]='<a:font script="Thaa" typeface="MV Boli"/>',g[g.length]='<a:font script="Deva" typeface="Mangal"/>',g[g.length]='<a:font script="Telu" typeface="Gautami"/>',g[g.length]='<a:font script="Taml" typeface="Latha"/>',g[g.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',g[g.length]='<a:font script="Orya" typeface="Kalinga"/>',g[g.length]='<a:font script="Mlym" typeface="Kartika"/>',g[g.length]='<a:font script="Laoo" typeface="DokChampa"/>',g[g.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',g[g.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',g[g.length]='<a:font script="Viet" typeface="Times New Roman"/>',g[g.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',g[g.length]='<a:font script="Geor" typeface="Sylfaen"/>',g[g.length]="</a:majorFont>",g[g.length]="<a:minorFont>",g[g.length]='<a:latin typeface="Calibri"/>',g[g.length]='<a:ea typeface=""/>',g[g.length]='<a:cs typeface=""/>',g[g.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',g[g.length]='<a:font script="Hang" typeface="맑은 고딕"/>',g[g.length]='<a:font script="Hans" typeface="宋体"/>',g[g.length]='<a:font script="Hant" typeface="新細明體"/>',g[g.length]='<a:font script="Arab" typeface="Arial"/>',g[g.length]='<a:font script="Hebr" typeface="Arial"/>',g[g.length]='<a:font script="Thai" typeface="Tahoma"/>',g[g.length]='<a:font script="Ethi" typeface="Nyala"/>',g[g.length]='<a:font script="Beng" typeface="Vrinda"/>',g[g.length]='<a:font script="Gujr" typeface="Shruti"/>',g[g.length]='<a:font script="Khmr" typeface="DaunPenh"/>',g[g.length]='<a:font script="Knda" typeface="Tunga"/>',g[g.length]='<a:font script="Guru" typeface="Raavi"/>',g[g.length]='<a:font script="Cans" typeface="Euphemia"/>',g[g.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',g[g.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',g[g.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',g[g.length]='<a:font script="Thaa" typeface="MV Boli"/>',g[g.length]='<a:font script="Deva" typeface="Mangal"/>',g[g.length]='<a:font script="Telu" typeface="Gautami"/>',g[g.length]='<a:font script="Taml" typeface="Latha"/>',g[g.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',g[g.length]='<a:font script="Orya" typeface="Kalinga"/>',g[g.length]='<a:font script="Mlym" typeface="Kartika"/>',g[g.length]='<a:font script="Laoo" typeface="DokChampa"/>',g[g.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',g[g.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',g[g.length]='<a:font script="Viet" typeface="Arial"/>',g[g.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',g[g.length]='<a:font script="Geor" typeface="Sylfaen"/>',g[g.length]="</a:minorFont>",g[g.length]="</a:fontScheme>",g[g.length]='<a:fmtScheme name="Office">',g[g.length]="<a:fillStyleLst>",g[g.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',g[g.length]='<a:gradFill rotWithShape="1">',g[g.length]="<a:gsLst>",g[g.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',g[g.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',g[g.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',g[g.length]="</a:gsLst>",g[g.length]='<a:lin ang="16200000" scaled="1"/>',g[g.length]="</a:gradFill>",g[g.length]='<a:gradFill rotWithShape="1">',g[g.length]="<a:gsLst>",g[g.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',g[g.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',g[g.length]="</a:gsLst>",g[g.length]='<a:lin ang="16200000" scaled="0"/>',g[g.length]="</a:gradFill>",g[g.length]="</a:fillStyleLst>",g[g.length]="<a:lnStyleLst>",g[g.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',g[g.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',g[g.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',g[g.length]="</a:lnStyleLst>",g[g.length]="<a:effectStyleLst>",g[g.length]="<a:effectStyle>",g[g.length]="<a:effectLst>",g[g.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',g[g.length]="</a:effectLst>",g[g.length]="</a:effectStyle>",g[g.length]="<a:effectStyle>",g[g.length]="<a:effectLst>",g[g.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',g[g.length]="</a:effectLst>",g[g.length]="</a:effectStyle>",g[g.length]="<a:effectStyle>",g[g.length]="<a:effectLst>",g[g.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',g[g.length]="</a:effectLst>",g[g.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',g[g.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',g[g.length]="</a:effectStyle>",g[g.length]="</a:effectStyleLst>",g[g.length]="<a:bgFillStyleLst>",g[g.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',g[g.length]='<a:gradFill rotWithShape="1">',g[g.length]="<a:gsLst>",g[g.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',g[g.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',g[g.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',g[g.length]="</a:gsLst>",g[g.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',g[g.length]="</a:gradFill>",g[g.length]='<a:gradFill rotWithShape="1">',g[g.length]="<a:gsLst>",g[g.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',g[g.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',g[g.length]="</a:gsLst>",g[g.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',g[g.length]="</a:gradFill>",g[g.length]="</a:bgFillStyleLst>",g[g.length]="</a:fmtScheme>",g[g.length]="</a:themeElements>",g[g.length]="<a:objectDefaults>",g[g.length]="<a:spDef>",g[g.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',g[g.length]="</a:spDef>",g[g.length]="<a:lnDef>",g[g.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',g[g.length]="</a:lnDef>",g[g.length]="</a:objectDefaults>",g[g.length]="<a:extraClrSchemeLst/>",g[g.length]="</a:theme>",g.join("")}function parse_Theme(n,r,g){var _=n.l+r,x=n.read_shift(4);if(x!==124226){if(!g.cellStyles){n.l=_;return}var S=n.slice(n.l);n.l=_;var E;try{E=zip_read(S,{type:"array"})}catch{return}var C=getzipstr(E,"theme/theme/theme1.xml",!0);if(C)return parse_theme_xml(C,g)}}function parse_ColorTheme(n){return n.read_shift(4)}function parse_FullColorExt(n){var r={};switch(r.xclrType=n.read_shift(2),r.nTintShade=n.read_shift(2),r.xclrType){case 0:n.l+=4;break;case 1:r.xclrValue=parse_IcvXF(n,4);break;case 2:r.xclrValue=parse_LongRGBA(n);break;case 3:r.xclrValue=parse_ColorTheme(n);break;case 4:n.l+=4;break}return n.l+=8,r}function parse_IcvXF(n,r){return parsenoop(n,r)}function parse_XFExtGradient(n,r){return parsenoop(n,r)}function parse_ExtProp(n){var r=n.read_shift(2),g=n.read_shift(2)-4,_=[r];switch(r){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:_[1]=parse_FullColorExt(n);break;case 6:_[1]=parse_XFExtGradient(n,g);break;case 14:case 15:_[1]=n.read_shift(g===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+r+" "+g)}return _}function parse_XFExt(n,r){var g=n.l+r;n.l+=2;var _=n.read_shift(2);n.l+=2;for(var x=n.read_shift(2),S=[];x-- >0;)S.push(parse_ExtProp(n,g-n.l));return{ixfe:_,ext:S}}function update_xfext(n,r){r.forEach(function(g){switch(g[0]){}})}function parse_BrtMdtinfo(n,r){return{flags:n.read_shift(4),version:n.read_shift(4),name:parse_XLWideString(n)}}function write_BrtMdtinfo(n){var r=new_buf(12+2*n.name.length);return r.write_shift(4,n.flags),r.write_shift(4,n.version),write_XLWideString(n.name,r),r.slice(0,r.l)}function parse_BrtMdb(n){for(var r=[],g=n.read_shift(4);g-- >0;)r.push([n.read_shift(4),n.read_shift(4)]);return r}function write_BrtMdb(n){var r=new_buf(4+8*n.length);r.write_shift(4,n.length);for(var g=0;g<n.length;++g)r.write_shift(4,n[g][0]),r.write_shift(4,n[g][1]);return r}function write_BrtBeginEsfmd(n,r){var g=new_buf(8+2*r.length);return g.write_shift(4,n),write_XLWideString(r,g),g.slice(0,g.l)}function parse_BrtBeginEsmdb(n){return n.l+=4,n.read_shift(4)!=0}function write_BrtBeginEsmdb(n,r){var g=new_buf(8);return g.write_shift(4,n),g.write_shift(4,1),g}function parse_xlmeta_bin(n,r,g){var _={Types:[],Cell:[],Value:[]},x=g||{},S=[],E=!1,C=2;return recordhopper(n,function(T,R,A){switch(A){case 335:_.Types.push({name:T.name});break;case 51:T.forEach(function(I){C==1?_.Cell.push({type:_.Types[I[0]-1].name,index:I[1]}):C==0&&_.Value.push({type:_.Types[I[0]-1].name,index:I[1]})});break;case 337:C=T?1:0;break;case 338:C=2;break;case 35:S.push(A),E=!0;break;case 36:S.pop(),E=!1;break;default:if(!R.T){if(!E||x.WTF&&S[S.length-1]!=35)throw new Error("Unexpected record 0x"+A.toString(16))}}}),_}function write_xlmeta_bin(){var n=buf_array();return write_record(n,332),write_record(n,334,write_UInt32LE(1)),write_record(n,335,write_BrtMdtinfo({name:"XLDAPR",version:12e4,flags:3496657072})),write_record(n,336),write_record(n,339,write_BrtBeginEsfmd(1,"XLDAPR")),write_record(n,52),write_record(n,35,write_UInt32LE(514)),write_record(n,4096,write_UInt32LE(0)),write_record(n,4097,writeuint16(1)),write_record(n,36),write_record(n,53),write_record(n,340),write_record(n,337,write_BrtBeginEsmdb(1)),write_record(n,51,write_BrtMdb([[1,0]])),write_record(n,338),write_record(n,333),n.end()}function parse_xlmeta_xml(n,r,g){var _={Types:[],Cell:[],Value:[]};if(!n)return _;var x=!1,S=2,E;return n.replace(tagregex,function(C){var T=parsexmltag(C);switch(strip_ns(T[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":_.Types.push({name:T.name});break;case"</metadataType>":break;case"<futureMetadata":for(var R=0;R<_.Types.length;++R)_.Types[R].name==T.name&&(E=_.Types[R]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":S==1?_.Cell.push({type:_.Types[T.t-1].name,index:+T.v}):S==0&&_.Value.push({type:_.Types[T.t-1].name,index:+T.v});break;case"</rc>":break;case"<cellMetadata":S=1;break;case"</cellMetadata>":S=2;break;case"<valueMetadata":S=0;break;case"</valueMetadata>":S=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":x=!0;break;case"</ext>":x=!1;break;case"<rvb":if(!E)break;E.offsets||(E.offsets=[]),E.offsets.push(+T.i);break;default:if(!x&&g?.WTF)throw new Error("unrecognized "+T[0]+" in metadata")}return C}),_}function write_xlmeta_xml(){var n=[XML_HEADER];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function parse_cc_xml(n){var r=[];if(!n)return r;var g=1;return(n.match(tagregex)||[]).forEach(function(_){var x=parsexmltag(_);switch(x[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete x[0],x.i?g=x.i:x.i=g,r.push(x);break}}),r}function parse_BrtCalcChainItem$(n){var r={};r.i=n.read_shift(4);var g={};g.r=n.read_shift(4),g.c=n.read_shift(4),r.r=encode_cell(g);var _=n.read_shift(1);return _&2&&(r.l="1"),_&8&&(r.a="1"),r}function parse_cc_bin(n,r,g){var _=[];return recordhopper(n,function(S,E,C){switch(C){case 63:_.push(S);break;default:if(!E.T)throw new Error("Unexpected record 0x"+C.toString(16))}}),_}function parse_xlink_xml(){}function parse_xlink_bin(n,r,g,_){if(!n)return n;var x=_||{},S=!1;recordhopper(n,function(C,T,R){switch(R){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:S=!0;break;case 36:S=!1;break;default:if(!T.T){if(!S||x.WTF)throw new Error("Unexpected record 0x"+R.toString(16))}}},x)}function parse_drawing(n,r){if(!n)return"??";var g=(n.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return r["!id"][g].Target}function write_vml(n,r){var g=[21600,21600],_=["m0,0l0",g[1],g[0],g[1],g[0],"0xe"].join(","),x=[writextag("xml",null,{"xmlns:v":XLMLNS.v,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:mv":XLMLNS.mv}).replace(/\/>/,">"),writextag("o:shapelayout",writextag("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"})],S=65536*n,E=r||[];return E.length>0&&x.push(writextag("v:shapetype",[writextag("v:stroke",null,{joinstyle:"miter"}),writextag("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:g.join(","),"o:spt":202,path:_})),E.forEach(function(C){++S,x.push(write_vml_comment(C,S))}),x.push("</xml>"),x.join("")}function write_vml_comment(n,r){var g=decode_cell(n[0]),_={color2:"#BEFF82",type:"gradient"};_.type=="gradient"&&(_.angle="-180");var x=_.type=="gradient"?writextag("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,S=writextag("v:fill",x,_),E={on:"t",obscured:"t"};return["<v:shape"+wxt_helper({id:"_x0000_s"+r,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(n[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",S,writextag("v:shadow",null,E),writextag("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",writetag("x:Anchor",[g.c+1,0,g.r+1,0,g.c+3,20,g.r+5,20].join(",")),writetag("x:AutoFill","False"),writetag("x:Row",String(g.r)),writetag("x:Column",String(g.c)),n[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function sheet_insert_comments(n,r,g,_){var x=n["!data"]!=null,S;r.forEach(function(E){var C=decode_cell(E.ref);if(x?(n["!data"][C.r]||(n["!data"][C.r]=[]),S=n["!data"][C.r][C.c]):S=n[E.ref],!S){S={t:"z"},x?n["!data"][C.r][C.c]=S:n[E.ref]=S;var T=safe_decode_range(n["!ref"]||"BDWGO1000001:A1");T.s.r>C.r&&(T.s.r=C.r),T.e.r<C.r&&(T.e.r=C.r),T.s.c>C.c&&(T.s.c=C.c),T.e.c<C.c&&(T.e.c=C.c);var R=encode_range(T);n["!ref"]=R}S.c||(S.c=[]);var A={a:E.author,t:E.t,r:E.r,T:g};E.h&&(A.h=E.h);for(var I=S.c.length-1;I>=0;--I){if(!g&&S.c[I].T)return;g&&!S.c[I].T&&S.c.splice(I,1)}if(g&&_){for(I=0;I<_.length;++I)if(A.a==_[I].id){A.a=_[I].name||A.a;break}}S.c.push(A)})}function parse_comments_xml(n,r){if(n.match(/<(?:\w+:)?comments *\/>/))return[];var g=[],_=[],x=n.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);x&&x[1]&&x[1].split(/<\/\w*:?author>/).forEach(function(E){if(!(E===""||E.trim()==="")){var C=E.match(/<(?:\w+:)?author[^>]*>(.*)/);C&&g.push(C[1])}});var S=n.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return S&&S[1]&&S[1].split(/<\/\w*:?comment>/).forEach(function(E){if(!(E===""||E.trim()==="")){var C=E.match(/<(?:\w+:)?comment[^>]*>/);if(C){var T=parsexmltag(C[0]),R={author:T.authorId&&g[T.authorId]||"sheetjsghost",ref:T.ref,guid:T.guid},A=decode_cell(T.ref);if(!(r.sheetRows&&r.sheetRows<=A.r)){var I=E.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),B=!!I&&!!I[1]&&parse_si(I[1])||{r:"",t:"",h:""};R.r=B.r,B.r=="<t></t>"&&(B.t=B.h=""),R.t=(B.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),r.cellHTML&&(R.h=B.h),_.push(R)}}}}),_}function write_comments_xml(n){var r=[XML_HEADER,writextag("comments",null,{xmlns:XMLNS_main[0]})],g=[];return r.push("<authors>"),n.forEach(function(_){_[1].forEach(function(x){var S=escapexml(x.a);g.indexOf(S)==-1&&(g.push(S),r.push("<author>"+S+"</author>")),x.T&&x.ID&&g.indexOf("tc="+x.ID)==-1&&(g.push("tc="+x.ID),r.push("<author>tc="+x.ID+"</author>"))})}),g.length==0&&(g.push("SheetJ5"),r.push("<author>SheetJ5</author>")),r.push("</authors>"),r.push("<commentList>"),n.forEach(function(_){var x=0,S=[],E=0;if(_[1][0]&&_[1][0].T&&_[1][0].ID&&(x=g.indexOf("tc="+_[1][0].ID)),_[1].forEach(function(R){R.a&&(x=g.indexOf(escapexml(R.a))),R.T&&++E,S.push(R.t==null?"":escapexml(R.t))}),E===0)_[1].forEach(function(R){r.push('<comment ref="'+_[0]+'" authorId="'+g.indexOf(escapexml(R.a))+'"><text>'),r.push(writetag("t",R.t==null?"":escapexml(R.t))),r.push("</text></comment>")});else{r.push('<comment ref="'+_[0]+'" authorId="'+x+'"><text>');for(var C=`Comment:
    `+S[0]+`
`,T=1;T<S.length;++T)C+=`Reply:
    `+S[T]+`
`;r.push(writetag("t",escapexml(C))),r.push("</text></comment>")}}),r.push("</commentList>"),r.length>2&&(r[r.length]="</comments>",r[1]=r[1].replace("/>",">")),r.join("")}function parse_tcmnt_xml(n,r){var g=[],_=!1,x={},S=0;return n.replace(tagregex,function(C,T){var R=parsexmltag(C);switch(strip_ns(R[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":x={author:R.personId,guid:R.id,ref:R.ref,T:1};break;case"</threadedComment>":x.t!=null&&g.push(x);break;case"<text>":case"<text":S=T+C.length;break;case"</text>":x.t=n.slice(S,T).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":_=!0;break;case"</mentions>":_=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":_=!0;break;case"</ext>":_=!1;break;default:if(!_&&r.WTF)throw new Error("unrecognized "+R[0]+" in threaded comments")}return C}),g}function write_tcmnt_xml(n,r,g){var _=[XML_HEADER,writextag("ThreadedComments",null,{xmlns:XMLNS.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(x){var S="";(x[1]||[]).forEach(function(E,C){if(!E.T){delete E.ID;return}E.a&&r.indexOf(E.a)==-1&&r.push(E.a);var T={ref:x[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+g.tcid++).slice(-12)+"}"};C==0?S=T.id:T.parentId=S,E.ID=T.id,E.a&&(T.personId="{54EE7950-7262-4200-6969-"+("000000000000"+r.indexOf(E.a)).slice(-12)+"}"),_.push(writextag("threadedComment",writetag("text",E.t||""),T))})}),_.push("</ThreadedComments>"),_.join("")}function parse_people_xml(n,r){var g=[],_=!1;return n.replace(tagregex,function(S){var E=parsexmltag(S);switch(strip_ns(E[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":g.push({name:E.displayname,id:E.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":_=!0;break;case"</ext>":_=!1;break;default:if(!_&&r.WTF)throw new Error("unrecognized "+E[0]+" in threaded comments")}return S}),g}function write_people_xml(n){var r=[XML_HEADER,writextag("personList",null,{xmlns:XMLNS.TCMNT,"xmlns:x":XMLNS_main[0]}).replace(/[\/]>/,">")];return n.forEach(function(g,_){r.push(writextag("person",null,{displayName:g,id:"{54EE7950-7262-4200-6969-"+("000000000000"+_).slice(-12)+"}",userId:g,providerId:"None"}))}),r.push("</personList>"),r.join("")}function parse_BrtBeginComment(n){var r={};r.iauthor=n.read_shift(4);var g=parse_UncheckedRfX(n);return r.rfx=g.s,r.ref=encode_cell(g.s),n.l+=16,r}function write_BrtBeginComment(n,r){return r==null&&(r=new_buf(36)),r.write_shift(4,n[1].iauthor),write_UncheckedRfX(n[0],r),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r}var parse_BrtCommentAuthor=parse_XLWideString;function write_BrtCommentAuthor(n){return write_XLWideString(n.slice(0,54))}function parse_comments_bin(n,r){var g=[],_=[],x={},S=!1;return recordhopper(n,function(C,T,R){switch(R){case 632:_.push(C);break;case 635:x=C;break;case 637:x.t=C.t,x.h=C.h,x.r=C.r;break;case 636:if(x.author=_[x.iauthor],delete x.iauthor,r.sheetRows&&x.rfx&&r.sheetRows<=x.rfx.r)break;x.t||(x.t=""),delete x.rfx,g.push(x);break;case 3072:break;case 35:S=!0;break;case 36:S=!1;break;case 37:break;case 38:break;default:if(!T.T){if(!S||r.WTF)throw new Error("Unexpected record 0x"+R.toString(16))}}}),g}function write_comments_bin(n){var r=buf_array(),g=[];return write_record(r,628),write_record(r,630),n.forEach(function(_){_[1].forEach(function(x){g.indexOf(x.a)>-1||(g.push(x.a.slice(0,54)),write_record(r,632,write_BrtCommentAuthor(x.a)))})}),write_record(r,631),write_record(r,633),n.forEach(function(_){_[1].forEach(function(x){x.iauthor=g.indexOf(x.a);var S={s:decode_cell(_[0]),e:decode_cell(_[0])};write_record(r,635,write_BrtBeginComment([S,x])),x.t&&x.t.length>0&&write_record(r,637,write_BrtCommentText(x)),write_record(r,636),delete x.iauthor})}),write_record(r,634),write_record(r,629),r.end()}var CT_VBA="application/vnd.ms-office.vbaProject";function make_vba_xls(n){var r=CFB.utils.cfb_new({root:"R"});return n.FullPaths.forEach(function(g,_){if(!(g.slice(-1)==="/"||!g.match(/_VBA_PROJECT_CUR/))){var x=g.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");CFB.utils.cfb_add(r,x,n.FileIndex[_].content)}}),CFB.write(r)}function fill_vba_xls(n,r){r.FullPaths.forEach(function(g,_){if(_!=0){var x=g.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");x.slice(-1)!=="/"&&CFB.utils.cfb_add(n,x,r.FileIndex[_].content)}})}var VBAFMTS=["xlsb","xlsm","xlam","biff8","xla"];function parse_ds_bin(){return{"!type":"dialog"}}function parse_ds_xml(){return{"!type":"dialog"}}function parse_ms_bin(){return{"!type":"macro"}}function parse_ms_xml(){return{"!type":"macro"}}var rc_to_a1=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,r={r:0,c:0};function g(_,x,S,E){var C=!1,T=!1;S.length==0?T=!0:S.charAt(0)=="["&&(T=!0,S=S.slice(1,-1)),E.length==0?C=!0:E.charAt(0)=="["&&(C=!0,E=E.slice(1,-1));var R=S.length>0?parseInt(S,10)|0:0,A=E.length>0?parseInt(E,10)|0:0;return C?A+=r.c:--A,T?R+=r.r:--R,x+(C?"":"$")+encode_col(A)+(T?"":"$")+encode_row(R)}return function(x,S){return r=S,x.replace(n,g)}}(),crefregex=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1_to_rc=function(){return function(r,g){return r.replace(crefregex,function(_,x,S,E,C,T){var R=decode_col(E)-(S?0:g.c),A=decode_row(T)-(C?0:g.r),I=C=="$"?A+1:A==0?"":"["+A+"]",B=S=="$"?R+1:R==0?"":"["+R+"]";return x+"R"+I+"C"+B})}}();function shift_formula_str(n,r){return n.replace(crefregex,function(g,_,x,S,E,C){return _+(x=="$"?x+S:encode_col(decode_col(S)+r.c))+(E=="$"?E+C:encode_row(decode_row(C)+r.r))})}function shift_formula_xlsx(n,r,g){var _=decode_range(r),x=_.s,S=decode_cell(g),E={r:S.r-x.r,c:S.c-x.c};return shift_formula_str(n,E)}function fuzzyfmla(n){return n.length!=1}function _xlfn(n){return n.replace(/_xlfn\./g,"")}function parseread1(n){n.l+=1}function parse_ColRelU(n,r){var g=n.read_shift(2);return[g&16383,g>>14&1,g>>15&1]}function parse_RgceArea(n,r,g){var _=2;if(g){if(g.biff>=2&&g.biff<=5)return parse_RgceArea_BIFF2(n);g.biff==12&&(_=4)}var x=n.read_shift(_),S=n.read_shift(_),E=parse_ColRelU(n),C=parse_ColRelU(n);return{s:{r:x,c:E[0],cRel:E[1],rRel:E[2]},e:{r:S,c:C[0],cRel:C[1],rRel:C[2]}}}function parse_RgceArea_BIFF2(n){var r=parse_ColRelU(n),g=parse_ColRelU(n),_=n.read_shift(1),x=n.read_shift(1);return{s:{r:r[0],c:_,cRel:r[1],rRel:r[2]},e:{r:g[0],c:x,cRel:g[1],rRel:g[2]}}}function parse_RgceAreaRel(n,r,g){if(g.biff<8)return parse_RgceArea_BIFF2(n);var _=n.read_shift(g.biff==12?4:2),x=n.read_shift(g.biff==12?4:2),S=parse_ColRelU(n),E=parse_ColRelU(n);return{s:{r:_,c:S[0],cRel:S[1],rRel:S[2]},e:{r:x,c:E[0],cRel:E[1],rRel:E[2]}}}function parse_RgceLoc(n,r,g){if(g&&g.biff>=2&&g.biff<=5)return parse_RgceLoc_BIFF2(n);var _=n.read_shift(g&&g.biff==12?4:2),x=parse_ColRelU(n);return{r:_,c:x[0],cRel:x[1],rRel:x[2]}}function parse_RgceLoc_BIFF2(n){var r=parse_ColRelU(n),g=n.read_shift(1);return{r:r[0],c:g,cRel:r[1],rRel:r[2]}}function parse_RgceElfLoc(n){var r=n.read_shift(2),g=n.read_shift(2);return{r,c:g&255,fQuoted:!!(g&16384),cRel:g>>15,rRel:g>>15}}function parse_RgceLocRel(n,r,g){var _=g&&g.biff?g.biff:8;if(_>=2&&_<=5)return parse_RgceLocRel_BIFF2(n);var x=n.read_shift(_>=12?4:2),S=n.read_shift(2),E=(S&16384)>>14,C=(S&32768)>>15;if(S&=16383,C==1)for(;x>524287;)x-=1048576;if(E==1)for(;S>8191;)S=S-16384;return{r:x,c:S,cRel:E,rRel:C}}function parse_RgceLocRel_BIFF2(n){var r=n.read_shift(2),g=n.read_shift(1),_=(r&32768)>>15,x=(r&16384)>>14;return r&=16383,_==1&&r>=8192&&(r=r-16384),x==1&&g>=128&&(g=g-256),{r,c:g,cRel:x,rRel:_}}function parse_PtgArea(n,r,g){var _=(n[n.l++]&96)>>5,x=parse_RgceArea(n,g.biff>=2&&g.biff<=5?6:8,g);return[_,x]}function parse_PtgArea3d(n,r,g){var _=(n[n.l++]&96)>>5,x=n.read_shift(2,"i"),S=8;if(g)switch(g.biff){case 5:n.l+=12,S=6;break;case 12:S=12;break}var E=parse_RgceArea(n,S,g);return[_,x,E]}function parse_PtgAreaErr(n,r,g){var _=(n[n.l++]&96)>>5;return n.l+=g&&g.biff>8?12:g.biff<8?6:8,[_]}function parse_PtgAreaErr3d(n,r,g){var _=(n[n.l++]&96)>>5,x=n.read_shift(2),S=8;if(g)switch(g.biff){case 5:n.l+=12,S=6;break;case 12:S=12;break}return n.l+=S,[_,x]}function parse_PtgAreaN(n,r,g){var _=(n[n.l++]&96)>>5,x=parse_RgceAreaRel(n,r-1,g);return[_,x]}function parse_PtgArray(n,r,g){var _=(n[n.l++]&96)>>5;return n.l+=g.biff==2?6:g.biff==12?14:7,[_]}function parse_PtgAttrBaxcel(n){var r=n[n.l+1]&1,g=1;return n.l+=4,[r,g]}function parse_PtgAttrChoose(n,r,g){n.l+=2;for(var _=n.read_shift(g&&g.biff==2?1:2),x=[],S=0;S<=_;++S)x.push(n.read_shift(g&&g.biff==2?1:2));return x}function parse_PtgAttrGoto(n,r,g){var _=n[n.l+1]&255?1:0;return n.l+=2,[_,n.read_shift(g&&g.biff==2?1:2)]}function parse_PtgAttrIf(n,r,g){var _=n[n.l+1]&255?1:0;return n.l+=2,[_,n.read_shift(g&&g.biff==2?1:2)]}function parse_PtgAttrIfError(n){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(2)]}function parse_PtgAttrSemi(n,r,g){var _=n[n.l+1]&255?1:0;return n.l+=g&&g.biff==2?3:4,[_]}function parse_PtgAttrSpaceType(n){var r=n.read_shift(1),g=n.read_shift(1);return[r,g]}function parse_PtgAttrSpace(n){return n.read_shift(2),parse_PtgAttrSpaceType(n)}function parse_PtgAttrSpaceSemi(n){return n.read_shift(2),parse_PtgAttrSpaceType(n)}function parse_PtgRef(n,r,g){var _=(n[n.l]&96)>>5;n.l+=1;var x=parse_RgceLoc(n,0,g);return[_,x]}function parse_PtgRefN(n,r,g){var _=(n[n.l]&96)>>5;n.l+=1;var x=parse_RgceLocRel(n,0,g);return[_,x]}function parse_PtgRef3d(n,r,g){var _=(n[n.l]&96)>>5;n.l+=1;var x=n.read_shift(2);g&&g.biff==5&&(n.l+=12);var S=parse_RgceLoc(n,0,g);return[_,x,S]}function parse_PtgFunc(n,r,g){var _=(n[n.l]&96)>>5;n.l+=1;var x=n.read_shift(g&&g.biff<=3?1:2);return[FtabArgc[x],Ftab[x],_]}function parse_PtgFuncVar(n,r,g){var _=n[n.l++],x=n.read_shift(1),S=g&&g.biff<=3?[_==88?-1:0,n.read_shift(1)]:parsetab(n);return[x,(S[0]===0?Ftab:Cetab)[S[1]]]}function parsetab(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function parse_PtgAttrSum(n,r,g){n.l+=g&&g.biff==2?3:4}function parse_PtgExp(n,r,g){if(n.l++,g&&g.biff==12)return[n.read_shift(4,"i"),0];var _=n.read_shift(2),x=n.read_shift(g&&g.biff==2?1:2);return[_,x]}function parse_PtgErr(n){return n.l++,BErr[n.read_shift(1)]}function parse_PtgInt(n){return n.l++,n.read_shift(2)}function parse_PtgBool(n){return n.l++,n.read_shift(1)!==0}function parse_PtgNum(n){return n.l++,parse_Xnum(n)}function parse_PtgStr(n,r,g){return n.l++,parse_ShortXLUnicodeString(n,r-1,g)}function parse_SerAr(n,r){var g=[n.read_shift(1)];if(r==12)switch(g[0]){case 2:g[0]=4;break;case 4:g[0]=16;break;case 0:g[0]=1;break;case 1:g[0]=2;break}switch(g[0]){case 4:g[1]=parsebool(n,1)?"TRUE":"FALSE",r!=12&&(n.l+=7);break;case 37:case 16:g[1]=BErr[n[n.l]],n.l+=r==12?4:8;break;case 0:n.l+=8;break;case 1:g[1]=parse_Xnum(n);break;case 2:g[1]=parse_XLUnicodeString2(n,0,{biff:r>0&&r<8?2:r});break;default:throw new Error("Bad SerAr: "+g[0])}return g}function parse_PtgExtraMem(n,r,g){for(var _=n.read_shift(g.biff==12?4:2),x=[],S=0;S!=_;++S)x.push((g.biff==12?parse_UncheckedRfX:parse_Ref8U)(n));return x}function parse_PtgExtraArray(n,r,g){var _=0,x=0;g.biff==12?(_=n.read_shift(4),x=n.read_shift(4)):(x=1+n.read_shift(1),_=1+n.read_shift(2)),g.biff>=2&&g.biff<8&&(--_,--x==0&&(x=256));for(var S=0,E=[];S!=_&&(E[S]=[]);++S)for(var C=0;C!=x;++C)E[S][C]=parse_SerAr(n,g.biff);return E}function parse_PtgName(n,r,g){var _=n.read_shift(1)>>>5&3,x=!g||g.biff>=8?4:2,S=n.read_shift(x);switch(g.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[_,0,S]}function parse_PtgNameX(n,r,g){if(g.biff==5)return parse_PtgNameX_BIFF5(n);var _=n.read_shift(1)>>>5&3,x=n.read_shift(2),S=n.read_shift(4);return[_,x,S]}function parse_PtgNameX_BIFF5(n){var r=n.read_shift(1)>>>5&3,g=n.read_shift(2,"i");n.l+=8;var _=n.read_shift(2);return n.l+=12,[r,g,_]}function parse_PtgMemArea(n,r,g){var _=n.read_shift(1)>>>5&3;n.l+=g&&g.biff==2?3:4;var x=n.read_shift(g&&g.biff==2?1:2);return[_,x]}function parse_PtgMemFunc(n,r,g){var _=n.read_shift(1)>>>5&3,x=n.read_shift(g&&g.biff==2?1:2);return[_,x]}function parse_PtgRefErr(n,r,g){var _=n.read_shift(1)>>>5&3;return n.l+=4,g.biff<8&&n.l--,g.biff==12&&(n.l+=2),[_]}function parse_PtgRefErr3d(n,r,g){var _=(n[n.l++]&96)>>5,x=n.read_shift(2),S=4;if(g)switch(g.biff){case 5:S=15;break;case 12:S=6;break}return n.l+=S,[_,x]}var parse_PtgMemErr=parsenoop,parse_PtgMemNoMem=parsenoop,parse_PtgTbl=parsenoop;function parse_PtgElfLoc(n,r,g){return n.l+=2,[parse_RgceElfLoc(n)]}function parse_PtgElfNoop(n){return n.l+=6,[]}var parse_PtgElfCol=parse_PtgElfLoc,parse_PtgElfColS=parse_PtgElfNoop,parse_PtgElfColSV=parse_PtgElfNoop,parse_PtgElfColV=parse_PtgElfLoc;function parse_PtgElfLel(n){return n.l+=2,[parseuint16(n),n.read_shift(2)&1]}var parse_PtgElfRadical=parse_PtgElfLoc,parse_PtgElfRadicalLel=parse_PtgElfLel,parse_PtgElfRadicalS=parse_PtgElfNoop,parse_PtgElfRw=parse_PtgElfLoc,parse_PtgElfRwV=parse_PtgElfLoc,PtgListRT=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function parse_PtgList(n){n.l+=2;var r=n.read_shift(2),g=n.read_shift(2),_=n.read_shift(4),x=n.read_shift(2),S=n.read_shift(2),E=PtgListRT[g>>2&31];return{ixti:r,coltype:g&3,rt:E,idx:_,c:x,C:S}}function parse_PtgSxName(n){return n.l+=2,[n.read_shift(4)]}function parse_PtgSheet(n,r,g){return n.l+=5,n.l+=2,n.l+=g.biff==2?1:4,["PTGSHEET"]}function parse_PtgEndSheet(n,r,g){return n.l+=g.biff==2?4:5,["PTGENDSHEET"]}function parse_PtgMemAreaN(n){var r=n.read_shift(1)>>>5&3,g=n.read_shift(2);return[r,g]}function parse_PtgMemNoMemN(n){var r=n.read_shift(1)>>>5&3,g=n.read_shift(2);return[r,g]}function parse_PtgAttrNoop(n){return n.l+=4,[0,0]}var PtgTypes={1:{n:"PtgExp",f:parse_PtgExp},2:{n:"PtgTbl",f:parse_PtgTbl},3:{n:"PtgAdd",f:parseread1},4:{n:"PtgSub",f:parseread1},5:{n:"PtgMul",f:parseread1},6:{n:"PtgDiv",f:parseread1},7:{n:"PtgPower",f:parseread1},8:{n:"PtgConcat",f:parseread1},9:{n:"PtgLt",f:parseread1},10:{n:"PtgLe",f:parseread1},11:{n:"PtgEq",f:parseread1},12:{n:"PtgGe",f:parseread1},13:{n:"PtgGt",f:parseread1},14:{n:"PtgNe",f:parseread1},15:{n:"PtgIsect",f:parseread1},16:{n:"PtgUnion",f:parseread1},17:{n:"PtgRange",f:parseread1},18:{n:"PtgUplus",f:parseread1},19:{n:"PtgUminus",f:parseread1},20:{n:"PtgPercent",f:parseread1},21:{n:"PtgParen",f:parseread1},22:{n:"PtgMissArg",f:parseread1},23:{n:"PtgStr",f:parse_PtgStr},26:{n:"PtgSheet",f:parse_PtgSheet},27:{n:"PtgEndSheet",f:parse_PtgEndSheet},28:{n:"PtgErr",f:parse_PtgErr},29:{n:"PtgBool",f:parse_PtgBool},30:{n:"PtgInt",f:parse_PtgInt},31:{n:"PtgNum",f:parse_PtgNum},32:{n:"PtgArray",f:parse_PtgArray},33:{n:"PtgFunc",f:parse_PtgFunc},34:{n:"PtgFuncVar",f:parse_PtgFuncVar},35:{n:"PtgName",f:parse_PtgName},36:{n:"PtgRef",f:parse_PtgRef},37:{n:"PtgArea",f:parse_PtgArea},38:{n:"PtgMemArea",f:parse_PtgMemArea},39:{n:"PtgMemErr",f:parse_PtgMemErr},40:{n:"PtgMemNoMem",f:parse_PtgMemNoMem},41:{n:"PtgMemFunc",f:parse_PtgMemFunc},42:{n:"PtgRefErr",f:parse_PtgRefErr},43:{n:"PtgAreaErr",f:parse_PtgAreaErr},44:{n:"PtgRefN",f:parse_PtgRefN},45:{n:"PtgAreaN",f:parse_PtgAreaN},46:{n:"PtgMemAreaN",f:parse_PtgMemAreaN},47:{n:"PtgMemNoMemN",f:parse_PtgMemNoMemN},57:{n:"PtgNameX",f:parse_PtgNameX},58:{n:"PtgRef3d",f:parse_PtgRef3d},59:{n:"PtgArea3d",f:parse_PtgArea3d},60:{n:"PtgRefErr3d",f:parse_PtgRefErr3d},61:{n:"PtgAreaErr3d",f:parse_PtgAreaErr3d},255:{}},PtgDupes={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ptg18={1:{n:"PtgElfLel",f:parse_PtgElfLel},2:{n:"PtgElfRw",f:parse_PtgElfRw},3:{n:"PtgElfCol",f:parse_PtgElfCol},6:{n:"PtgElfRwV",f:parse_PtgElfRwV},7:{n:"PtgElfColV",f:parse_PtgElfColV},10:{n:"PtgElfRadical",f:parse_PtgElfRadical},11:{n:"PtgElfRadicalS",f:parse_PtgElfRadicalS},13:{n:"PtgElfColS",f:parse_PtgElfColS},15:{n:"PtgElfColSV",f:parse_PtgElfColSV},16:{n:"PtgElfRadicalLel",f:parse_PtgElfRadicalLel},25:{n:"PtgList",f:parse_PtgList},29:{n:"PtgSxName",f:parse_PtgSxName},255:{}},Ptg19={0:{n:"PtgAttrNoop",f:parse_PtgAttrNoop},1:{n:"PtgAttrSemi",f:parse_PtgAttrSemi},2:{n:"PtgAttrIf",f:parse_PtgAttrIf},4:{n:"PtgAttrChoose",f:parse_PtgAttrChoose},8:{n:"PtgAttrGoto",f:parse_PtgAttrGoto},16:{n:"PtgAttrSum",f:parse_PtgAttrSum},32:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},33:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},64:{n:"PtgAttrSpace",f:parse_PtgAttrSpace},65:{n:"PtgAttrSpaceSemi",f:parse_PtgAttrSpaceSemi},128:{n:"PtgAttrIfError",f:parse_PtgAttrIfError},255:{}};function parse_RgbExtra(n,r,g,_){if(_.biff<8)return parsenoop(n,r);for(var x=n.l+r,S=[],E=0;E!==g.length;++E)switch(g[E][0]){case"PtgArray":g[E][1]=parse_PtgExtraArray(n,0,_),S.push(g[E][1]);break;case"PtgMemArea":g[E][2]=parse_PtgExtraMem(n,g[E][1],_),S.push(g[E][2]);break;case"PtgExp":_&&_.biff==12&&(g[E][1][1]=n.read_shift(4),S.push(g[E][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+g[E][0]}return r=x-n.l,r!==0&&S.push(parsenoop(n,r)),S}function parse_Rgce(n,r,g){for(var _=n.l+r,x,S,E=[];_!=n.l;)r=_-n.l,S=n[n.l],x=PtgTypes[S]||PtgTypes[PtgDupes[S]],(S===24||S===25)&&(x=(S===24?Ptg18:Ptg19)[n[n.l+1]]),!x||!x.f?parsenoop(n,r):E.push([x.n,x.f(n,r,g)]);return E}function stringify_array(n){for(var r=[],g=0;g<n.length;++g){for(var _=n[g],x=[],S=0;S<_.length;++S){var E=_[S];if(E)switch(E[0]){case 2:x.push('"'+E[1].replace(/"/g,'""')+'"');break;default:x.push(E[1])}else x.push("")}r.push(x.join(","))}return r.join(";")}var PtgBinOp={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function make_3d_range(n,r){var g=n.lastIndexOf("!"),_=r.lastIndexOf("!");return g==-1&&_==-1?n+":"+r:g>0&&_>0&&n.slice(0,g).toLowerCase()==r.slice(0,_).toLowerCase()?n+":"+r.slice(_+1):(console.error("Cannot hydrate range",n,r),n+":"+r)}function get_ixti_raw(n,r,g){if(!n)return"SH33TJSERR0";if(g.biff>8&&(!n.XTI||!n.XTI[r]))return n.SheetNames[r];if(!n.XTI)return"SH33TJSERR6";var _=n.XTI[r];if(g.biff<8)return r>1e4&&(r-=65536),r<0&&(r=-r),r==0?"":n.XTI[r-1];if(!_)return"SH33TJSERR1";var x="";if(g.biff>8)switch(n[_[0]][0]){case 357:return x=_[1]==-1?"#REF":n.SheetNames[_[1]],_[1]==_[2]?x:x+":"+n.SheetNames[_[2]];case 358:return g.SID!=null?n.SheetNames[g.SID]:"SH33TJSSAME"+n[_[0]][0];case 355:default:return"SH33TJSSRC"+n[_[0]][0]}switch(n[_[0]][0][0]){case 1025:return x=_[1]==-1?"#REF":n.SheetNames[_[1]]||"SH33TJSERR3",_[1]==_[2]?x:x+":"+n.SheetNames[_[2]];case 14849:return n[_[0]].slice(1).map(function(S){return S.Name}).join(";;");default:return n[_[0]][0][3]?(x=_[1]==-1?"#REF":n[_[0]][0][3][_[1]]||"SH33TJSERR4",_[1]==_[2]?x:x+":"+n[_[0]][0][3][_[2]]):"SH33TJSERR2"}}function get_ixti(n,r,g){var _=get_ixti_raw(n,r,g);return _=="#REF"?_:formula_quote_sheet_name(_,g)}function stringify_formula(n,r,g,_,x){var S=x&&x.biff||8,E={s:{c:0,r:0},e:{c:0,r:0}},C=[],T,R,A,I=0,B=0,D,N="";if(!n[0]||!n[0][0])return"";for(var M=-1,O="",L=0,F=n[0].length;L<F;++L){var U=n[0][L];switch(U[0]){case"PtgUminus":C.push("-"+C.pop());break;case"PtgUplus":C.push("+"+C.pop());break;case"PtgPercent":C.push(C.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(T=C.pop(),R=C.pop(),M>=0){switch(n[0][M][1][0]){case 0:O=fill(" ",n[0][M][1][1]);break;case 1:O=fill("\r",n[0][M][1][1]);break;default:if(O="",x.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][M][1][0])}R=R+O,M=-1}C.push(R+PtgBinOp[U[0]]+T);break;case"PtgIsect":T=C.pop(),R=C.pop(),C.push(R+" "+T);break;case"PtgUnion":T=C.pop(),R=C.pop(),C.push(R+","+T);break;case"PtgRange":T=C.pop(),R=C.pop(),C.push(make_3d_range(R,T));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":A=shift_cell_xls(U[1][1],E,x),C.push(encode_cell_xls(A,S));break;case"PtgRefN":A=g?shift_cell_xls(U[1][1],g,x):U[1][1],C.push(encode_cell_xls(A,S));break;case"PtgRef3d":I=U[1][1],A=shift_cell_xls(U[1][2],E,x),N=get_ixti(_,I,x),C.push(N+"!"+encode_cell_xls(A,S));break;case"PtgFunc":case"PtgFuncVar":var j=U[1][0],z=U[1][1];j||(j=0),j&=127;var W=j==0?[]:C.slice(-j);C.length-=j,z==="User"&&(z=W.shift()),C.push(z+"("+W.join(",")+")");break;case"PtgBool":C.push(U[1]?"TRUE":"FALSE");break;case"PtgInt":C.push(U[1]);break;case"PtgNum":C.push(String(U[1]));break;case"PtgStr":C.push('"'+U[1].replace(/"/g,'""')+'"');break;case"PtgErr":C.push(U[1]);break;case"PtgAreaN":D=shift_range_xls(U[1][1],g?{s:g}:E,x),C.push(encode_range_xls(D,x));break;case"PtgArea":D=shift_range_xls(U[1][1],E,x),C.push(encode_range_xls(D,x));break;case"PtgArea3d":I=U[1][1],D=U[1][2],N=get_ixti(_,I,x),C.push(N+"!"+encode_range_xls(D,x));break;case"PtgAttrSum":C.push("SUM("+C.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":B=U[1][2];var X=(_.names||[])[B-1]||(_[0]||[])[B],ie=X?X.Name:"SH33TJSNAME"+String(B);ie&&ie.slice(0,6)=="_xlfn."&&!x.xlfn&&(ie=ie.slice(6)),C.push(ie);break;case"PtgNameX":var fe=U[1][1];B=U[1][2];var xe;if(x.biff<=5)fe<0&&(fe=-fe),_[fe]&&(xe=_[fe][B]);else{var we="";if(((_[fe]||[])[0]||[])[0]==14849||(((_[fe]||[])[0]||[])[0]==1025?_[fe][B]&&_[fe][B].itab>0&&(we=_.SheetNames[_[fe][B].itab-1]+"!"):we=_.SheetNames[B-1]+"!"),_[fe]&&_[fe][B])we+=_[fe][B].Name;else if(_[0]&&_[0][B])we+=_[0][B].Name;else{var G=(get_ixti_raw(_,fe,x)||"").split(";;");G[B-1]?we=G[B-1]:we+="SH33TJSERRX"}C.push(we);break}xe||(xe={Name:"SH33TJSERRY"}),C.push(xe.Name);break;case"PtgParen":var J="(",q=")";if(M>=0){switch(O="",n[0][M][1][0]){case 2:J=fill(" ",n[0][M][1][1])+J;break;case 3:J=fill("\r",n[0][M][1][1])+J;break;case 4:q=fill(" ",n[0][M][1][1])+q;break;case 5:q=fill("\r",n[0][M][1][1])+q;break;default:if(x.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][M][1][0])}M=-1}C.push(J+C.pop()+q);break;case"PtgRefErr":C.push("#REF!");break;case"PtgRefErr3d":C.push("#REF!");break;case"PtgExp":A={c:U[1][1],r:U[1][0]};var H={c:g.c,r:g.r};if(_.sharedf[encode_cell(A)]){var ve=_.sharedf[encode_cell(A)];C.push(stringify_formula(ve,E,H,_,x))}else{var Z=!1;for(T=0;T!=_.arrayf.length;++T)if(R=_.arrayf[T],!(A.c<R[0].s.c||A.c>R[0].e.c)&&!(A.r<R[0].s.r||A.r>R[0].e.r)){C.push(stringify_formula(R[1],E,H,_,x)),Z=!0;break}Z||C.push(U[1])}break;case"PtgArray":C.push("{"+stringify_array(U[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":M=L;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":C.push("");break;case"PtgAreaErr":C.push("#REF!");break;case"PtgAreaErr3d":C.push("#REF!");break;case"PtgList":C.push("Table"+U[1].idx+"[#"+U[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(U));default:throw new Error("Unrecognized Formula Token: "+String(U))}var ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(x.biff!=3&&M>=0&&ce.indexOf(n[0][L][0])==-1){U=n[0][M];var ue=!0;switch(U[1][0]){case 4:ue=!1;case 0:O=fill(" ",U[1][1]);break;case 5:ue=!1;case 1:O=fill("\r",U[1][1]);break;default:if(O="",x.WTF)throw new Error("Unexpected PtgAttrSpaceType "+U[1][0])}C.push((ue?O:"")+C.pop()+(ue?"":O)),M=-1}}if(C.length>1&&x.WTF)throw new Error("bad formula stack");return C[0]=="TRUE"?!0:C[0]=="FALSE"?!1:C[0]}function parse_ArrayParsedFormula(n,r,g){var _=n.l+r,x=g.biff==2?1:2,S,E=n.read_shift(x);if(E==65535)return[[],parsenoop(n,r-2)];var C=parse_Rgce(n,E,g);return r!==E+x&&(S=parse_RgbExtra(n,r-E-x,C,g)),n.l=_,[C,S]}function parse_XLSCellParsedFormula(n,r,g){var _=n.l+r,x=g.biff==2?1:2,S,E=n.read_shift(x);if(E==65535)return[[],parsenoop(n,r-2)];var C=parse_Rgce(n,E,g);return r!==E+x&&(S=parse_RgbExtra(n,r-E-x,C,g)),n.l=_,[C,S]}function parse_NameParsedFormula(n,r,g,_){var x=n.l+r,S=parse_Rgce(n,_,g),E;return x!==n.l&&(E=parse_RgbExtra(n,x-n.l,S,g)),[S,E]}function parse_SharedParsedFormula(n,r,g){var _=n.l+r,x,S=n.read_shift(2),E=parse_Rgce(n,S,g);return S==65535?[[],parsenoop(n,r-2)]:(r!==S+2&&(x=parse_RgbExtra(n,_-S-2,E,g)),[E,x])}function parse_FormulaValue(n){var r;if(__readUInt16LE(n,n.l+6)!==65535)return[parse_Xnum(n),"n"];switch(n[n.l]){case 0:return n.l+=8,["String","s"];case 1:return r=n[n.l+2]===1,n.l+=8,[r,"b"];case 2:return r=n[n.l+2],n.l+=8,[r,"e"];case 3:return n.l+=8,["","s"]}return[]}function write_FormulaValue(n){if(n==null){var r=new_buf(8);return r.write_shift(1,3),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,65535),r}else if(typeof n=="number")return write_Xnum(n);return write_Xnum(0)}function parse_Formula(n,r,g){var _=n.l+r,x=parse_XLSCell(n);g.biff==2&&++n.l;var S=parse_FormulaValue(n),E=n.read_shift(1);g.biff!=2&&(n.read_shift(1),g.biff>=5&&n.read_shift(4));var C=parse_XLSCellParsedFormula(n,_-n.l,g);return{cell:x,val:S[0],formula:C,shared:E>>3&1,tt:S[1]}}function write_Formula(n,r,g,_,x){var S=write_XLSCell(r,g,x),E=write_FormulaValue(n.v),C=new_buf(6),T=33;C.write_shift(2,T),C.write_shift(4,0);for(var R=new_buf(n.bf.length),A=0;A<n.bf.length;++A)R[A]=n.bf[A];var I=bconcat([S,E,C,R]);return I}function parse_XLSBParsedFormula(n,r,g){var _=n.read_shift(4),x=parse_Rgce(n,_,g),S=n.read_shift(4),E=S>0?parse_RgbExtra(n,S,x,g):null;return[x,E]}var parse_XLSBArrayParsedFormula=parse_XLSBParsedFormula,parse_XLSBCellParsedFormula=parse_XLSBParsedFormula,parse_XLSBNameParsedFormula=parse_XLSBParsedFormula,parse_XLSBSharedParsedFormula=parse_XLSBParsedFormula;function write_XLSBFormulaNum(n){if((n|0)==n&&n<Math.pow(2,16)&&n>=0){var r=new_buf(11);return r.write_shift(4,3),r.write_shift(1,30),r.write_shift(2,n),r.write_shift(4,0),r}var g=new_buf(17);return g.write_shift(4,11),g.write_shift(1,31),g.write_shift(8,n),g.write_shift(4,0),g}function write_XLSBFormulaErr(n){var r=new_buf(10);return r.write_shift(4,2),r.write_shift(1,28),r.write_shift(1,n),r.write_shift(4,0),r}function write_XLSBFormulaBool(n){var r=new_buf(10);return r.write_shift(4,2),r.write_shift(1,29),r.write_shift(1,n?1:0),r.write_shift(4,0),r}function write_XLSBFormulaStr(n){var r=new_buf(7);r.write_shift(4,3+2*n.length),r.write_shift(1,23),r.write_shift(2,n.length);var g=new_buf(2*n.length);g.write_shift(2*n.length,n,"utf16le");var _=new_buf(4);return _.write_shift(4,0),bconcat([r,g,_])}function write_XLSBFormulaRef(n){var r=decode_cell(n),g=new_buf(15);return g.write_shift(4,7),g.write_shift(1,36),g.write_shift(4,r.r),g.write_shift(2,r.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),g.write_shift(4,0),g}function write_XLSBFormulaRef3D(n,r){var g=n.lastIndexOf("!"),_=n.slice(0,g);n=n.slice(g+1);var x=decode_cell(n);_.charAt(0)=="'"&&(_=_.slice(1,-1).replace(/''/g,"'"));var S=new_buf(17);return S.write_shift(4,9),S.write_shift(1,58),S.write_shift(2,2+r.SheetNames.map(function(E){return E.toLowerCase()}).indexOf(_.toLowerCase())),S.write_shift(4,x.r),S.write_shift(2,x.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),S.write_shift(4,0),S}function write_XLSBFormulaRefErr3D(n,r){var g=n.lastIndexOf("!"),_=n.slice(0,g);n=n.slice(g+1),_.charAt(0)=="'"&&(_=_.slice(1,-1).replace(/''/g,"'"));var x=new_buf(17);return x.write_shift(4,9),x.write_shift(1,60),x.write_shift(2,2+r.SheetNames.map(function(S){return S.toLowerCase()}).indexOf(_.toLowerCase())),x.write_shift(4,0),x.write_shift(2,0),x.write_shift(4,0),x}function write_XLSBFormulaRange(n){var r=n.split(":"),g=r[0],_=new_buf(23);_.write_shift(4,15),g=r[0];var x=decode_cell(g);return _.write_shift(1,36),_.write_shift(4,x.r),_.write_shift(2,x.c|(g.charAt(0)=="$"?0:1)<<14|(g.match(/\$\d/)?0:1)<<15),_.write_shift(4,0),g=r[1],x=decode_cell(g),_.write_shift(1,36),_.write_shift(4,x.r),_.write_shift(2,x.c|(g.charAt(0)=="$"?0:1)<<14|(g.match(/\$\d/)?0:1)<<15),_.write_shift(4,0),_.write_shift(1,17),_.write_shift(4,0),_}function write_XLSBFormulaRangeWS(n,r){var g=n.lastIndexOf("!"),_=n.slice(0,g);n=n.slice(g+1),_.charAt(0)=="'"&&(_=_.slice(1,-1).replace(/''/g,"'"));var x=n.split(":");E=x[0];var S=new_buf(27);S.write_shift(4,19);var E=x[0],C=decode_cell(E);return S.write_shift(1,58),S.write_shift(2,2+r.SheetNames.map(function(T){return T.toLowerCase()}).indexOf(_.toLowerCase())),S.write_shift(4,C.r),S.write_shift(2,C.c|(E.charAt(0)=="$"?0:1)<<14|(E.match(/\$\d/)?0:1)<<15),E=x[1],C=decode_cell(E),S.write_shift(1,58),S.write_shift(2,2+r.SheetNames.map(function(T){return T.toLowerCase()}).indexOf(_.toLowerCase())),S.write_shift(4,C.r),S.write_shift(2,C.c|(E.charAt(0)=="$"?0:1)<<14|(E.match(/\$\d/)?0:1)<<15),S.write_shift(1,17),S.write_shift(4,0),S}function write_XLSBFormulaArea3D(n,r){var g=n.lastIndexOf("!"),_=n.slice(0,g);n=n.slice(g+1),_.charAt(0)=="'"&&(_=_.slice(1,-1).replace(/''/g,"'"));var x=decode_range(n),S=new_buf(23);return S.write_shift(4,15),S.write_shift(1,59),S.write_shift(2,2+r.SheetNames.map(function(E){return E.toLowerCase()}).indexOf(_.toLowerCase())),S.write_shift(4,x.s.r),S.write_shift(4,x.e.r),S.write_shift(2,x.s.c),S.write_shift(2,x.e.c),S.write_shift(4,0),S}function write_XLSBFormula(n,r){if(typeof n=="number")return write_XLSBFormulaNum(n);if(typeof n=="boolean")return write_XLSBFormulaBool(n);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(n))return write_XLSBFormulaErr(+RBErr[n]);if(n.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef(n);if(n.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRange(n);if(n.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaArea3D(n,r);if(n.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef3D(n,r);if(n.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRangeWS(n,r);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(n))return write_XLSBFormulaRefErr3D(n,r);if(/^".*"$/.test(n))return write_XLSBFormulaStr(n);if(/^[+-]\d+$/.test(n))return write_XLSBFormulaNum(parseInt(n,10));throw"Formula |"+n+"| not supported for XLSB"}var write_XLSBNameParsedFormula=write_XLSBFormula,Cetab={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Ftab={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FtabArgc={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function ods_to_csf_formula(n){return n.slice(0,3)=="of:"&&(n=n.slice(3)),n.charCodeAt(0)==61&&(n=n.slice(1),n.charCodeAt(0)==61&&(n=n.slice(1))),n=n.replace(/COM\.MICROSOFT\./g,""),n=n.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(r,g){return g.replace(/\./g,"")}),n=n.replace(/\$'([^']|'')+'/g,function(r){return r.slice(1)}),n=n.replace(/\$([^\]\. #$]+)/g,function(r,g){return g.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?r:g}),n=n.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),n.replace(/[;~]/g,",").replace(/\|/g,";")}function csf_to_ods_formula(n){var r="of:="+n.replace(crefregex,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return r.replace(/;/g,"|").replace(/,/g,";")}function ods_to_csf_3D(n){n=n.replace(/\$'([^']|'')+'/g,function(_){return _.slice(1)}),n=n.replace(/\$([^\]\. #$]+)/g,function(_,x){return x.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?_:x});var r=n.split(":"),g=r[0].split(".")[0];return[g,r[0].split(".")[1]+(r.length>1?":"+(r[1].split(".")[1]||r[1].split(".")[0]):"")]}function csf_to_ods_3D(n){return n.replace(/!/,".")}var strs={},_ssfopts={},browser_has_Map=typeof Map<"u";function get_sst_id(n,r,g){var _=0,x=n.length;if(g){if(browser_has_Map?g.has(r):Object.prototype.hasOwnProperty.call(g,r)){for(var S=browser_has_Map?g.get(r):g[r];_<S.length;++_)if(n[S[_]].t===r)return n.Count++,S[_]}}else for(;_<x;++_)if(n[_].t===r)return n.Count++,_;return n[x]={t:r},n.Count++,n.Unique++,g&&(browser_has_Map?(g.has(r)||g.set(r,[]),g.get(r).push(x)):(Object.prototype.hasOwnProperty.call(g,r)||(g[r]=[]),g[r].push(x))),x}function col_obj_w(n,r){var g={min:n+1,max:n+1},_=-1;return r.MDW&&(MDW=r.MDW),r.width!=null?g.customWidth=1:r.wpx!=null?_=px2char(r.wpx):r.wch!=null&&(_=r.wch),_>-1?(g.width=char2width(_),g.customWidth=1):r.width!=null&&(g.width=r.width),r.hidden&&(g.hidden=!0),r.level!=null&&(g.outlineLevel=g.level=r.level),g}function default_margins(n,r){if(n){var g=[.7,.7,.75,.75,.3,.3];r=="xlml"&&(g=[1,1,1,1,.5,.5]),n.left==null&&(n.left=g[0]),n.right==null&&(n.right=g[1]),n.top==null&&(n.top=g[2]),n.bottom==null&&(n.bottom=g[3]),n.header==null&&(n.header=g[4]),n.footer==null&&(n.footer=g[5])}}function get_cell_style(n,r,g){var _=g.revssf[r.z!=null?r.z:"General"],x=60,S=n.length;if(_==null&&g.ssf){for(;x<392;++x)if(g.ssf[x]==null){SSF__load(r.z,x),g.ssf[x]=r.z,g.revssf[r.z]=_=x;break}}for(x=0;x!=S;++x)if(n[x].numFmtId===_)return x;return n[S]={numFmtId:_,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},S}function safe_format(n,r,g,_,x,S){try{_.cellNF&&(n.z=table_fmt[r])}catch(C){if(_.WTF)throw C}if(!(n.t==="z"&&!_.cellStyles)){if(n.t==="d"&&typeof n.v=="string"&&(n.v=parseDate(n.v)),(!_||_.cellText!==!1)&&n.t!=="z")try{if(table_fmt[r]==null&&SSF__load(SSFImplicit[r]||"General",r),n.t==="e")n.w=n.w||BErr[n.v];else if(r===0)if(n.t==="n")(n.v|0)===n.v?n.w=n.v.toString(10):n.w=SSF_general_num(n.v);else if(n.t==="d"){var E=datenum(n.v);(E|0)===E?n.w=E.toString(10):n.w=SSF_general_num(E)}else{if(n.v===void 0)return"";n.w=SSF_general(n.v,_ssfopts)}else n.t==="d"?n.w=SSF_format(r,datenum(n.v),_ssfopts):n.w=SSF_format(r,n.v,_ssfopts)}catch(C){if(_.WTF)throw C}if(_.cellStyles&&g!=null)try{n.s=S.Fills[g],n.s.fgColor&&n.s.fgColor.theme&&!n.s.fgColor.rgb&&(n.s.fgColor.rgb=rgb_tint(x.themeElements.clrScheme[n.s.fgColor.theme].rgb,n.s.fgColor.tint||0),_.WTF&&(n.s.fgColor.raw_rgb=x.themeElements.clrScheme[n.s.fgColor.theme].rgb)),n.s.bgColor&&n.s.bgColor.theme&&(n.s.bgColor.rgb=rgb_tint(x.themeElements.clrScheme[n.s.bgColor.theme].rgb,n.s.bgColor.tint||0),_.WTF&&(n.s.bgColor.raw_rgb=x.themeElements.clrScheme[n.s.bgColor.theme].rgb))}catch(C){if(_.WTF&&S.Fills)throw C}}}function check_ws(n,r,g){if(n&&n["!ref"]){var _=safe_decode_range(n["!ref"]);if(_.e.c<_.s.c||_.e.r<_.s.r)throw new Error("Bad range ("+g+"): "+n["!ref"])}}function parse_ws_xml_dim(n,r){var g=safe_decode_range(r);g.s.r<=g.e.r&&g.s.c<=g.e.c&&g.s.r>=0&&g.s.c>=0&&(n["!ref"]=encode_range(g))}var mergecregex=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sheetdataregex=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,hlinkregex=/<(?:\w:)?hyperlink [^>]*>/mg,dimregex=/"(\w*:\w*)"/,colregex=/<(?:\w:)?col\b[^>]*[\/]?>/g,afregex=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,marginregex=/<(?:\w:)?pageMargins[^>]*\/>/g,sheetprregex=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,sheetprregex2=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,svsregex=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function parse_ws_xml(n,r,g,_,x,S,E){if(!n)return n;_||(_={"!id":{}});var C={};r.dense&&(C["!data"]=[]);var T={s:{r:2e6,c:2e6},e:{r:0,c:0}},R="",A="",I=n.match(sheetdataregex);I?(R=n.slice(0,I.index),A=n.slice(I.index+I[0].length)):R=A=n;var B=R.match(sheetprregex);B?parse_ws_xml_sheetpr(B[0],C,x,g):(B=R.match(sheetprregex2))&&parse_ws_xml_sheetpr2(B[0],B[1]||"",C,x,g);var D=(R.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(D>0){var N=R.slice(D,D+50).match(dimregex);N&&!(r&&r.nodim)&&parse_ws_xml_dim(C,N[1])}var M=R.match(svsregex);M&&M[1]&&parse_ws_xml_sheetviews(M[1],x);var O=[];if(r.cellStyles){var L=R.match(colregex);L&&parse_ws_xml_cols(O,L)}I&&parse_ws_xml_data(I[1],C,r,T,S,E);var F=A.match(afregex);F&&(C["!autofilter"]=parse_ws_xml_autofilter(F[0]));var U=[],j=A.match(mergecregex);if(j)for(D=0;D!=j.length;++D)U[D]=safe_decode_range(j[D].slice(j[D].indexOf('"')+1));var z=A.match(hlinkregex);z&&parse_ws_xml_hlinks(C,z,_);var W=A.match(marginregex);if(W&&(C["!margins"]=parse_ws_xml_margins(parsexmltag(W[0]))),r&&r.nodim&&(T.s.c=T.s.r=0),!C["!ref"]&&T.e.c>=T.s.c&&T.e.r>=T.s.r&&(C["!ref"]=encode_range(T)),r.sheetRows>0&&C["!ref"]){var X=safe_decode_range(C["!ref"]);r.sheetRows<=+X.e.r&&(X.e.r=r.sheetRows-1,X.e.r>T.e.r&&(X.e.r=T.e.r),X.e.r<X.s.r&&(X.s.r=X.e.r),X.e.c>T.e.c&&(X.e.c=T.e.c),X.e.c<X.s.c&&(X.s.c=X.e.c),C["!fullref"]=C["!ref"],C["!ref"]=encode_range(X))}return O.length>0&&(C["!cols"]=O),U.length>0&&(C["!merges"]=U),C}function write_ws_xml_merges(n){if(n.length===0)return"";for(var r='<mergeCells count="'+n.length+'">',g=0;g!=n.length;++g)r+='<mergeCell ref="'+encode_range(n[g])+'"/>';return r+"</mergeCells>"}function parse_ws_xml_sheetpr(n,r,g,_){var x=parsexmltag(n);g.Sheets[_]||(g.Sheets[_]={}),x.codeName&&(g.Sheets[_].CodeName=unescapexml(utf8read(x.codeName)))}function parse_ws_xml_sheetpr2(n,r,g,_,x){parse_ws_xml_sheetpr(n.slice(0,n.indexOf(">")),g,_,x)}function write_ws_xml_sheetpr(n,r,g,_,x){var S=!1,E={},C=null;if(_.bookType!=="xlsx"&&r.vbaraw){var T=r.SheetNames[g];try{r.Workbook&&(T=r.Workbook.Sheets[g].CodeName||T)}catch{}S=!0,E.codeName=utf8write(escapexml(T))}if(n&&n["!outline"]){var R={summaryBelow:1,summaryRight:1};n["!outline"].above&&(R.summaryBelow=0),n["!outline"].left&&(R.summaryRight=0),C=(C||"")+writextag("outlinePr",null,R)}!S&&!C||(x[x.length]=writextag("sheetPr",C,E))}var sheetprot_deffalse=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sheetprot_deftrue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function write_ws_xml_protection(n){var r={sheet:1};return sheetprot_deffalse.forEach(function(g){n[g]!=null&&n[g]&&(r[g]="1")}),sheetprot_deftrue.forEach(function(g){n[g]!=null&&!n[g]&&(r[g]="0")}),n.password&&(r.password=crypto_CreatePasswordVerifier_Method1(n.password).toString(16).toUpperCase()),writextag("sheetProtection",null,r)}function parse_ws_xml_hlinks(n,r,g){for(var _=n["!data"]!=null,x=0;x!=r.length;++x){var S=parsexmltag(utf8read(r[x]),!0);if(!S.ref)return;var E=((g||{})["!id"]||[])[S.id];E?(S.Target=E.Target,S.location&&(S.Target+="#"+unescapexml(S.location))):(S.Target="#"+unescapexml(S.location),E={Target:S.Target,TargetMode:"Internal"}),S.Rel=E,S.tooltip&&(S.Tooltip=S.tooltip,delete S.tooltip);for(var C=safe_decode_range(S.ref),T=C.s.r;T<=C.e.r;++T)for(var R=C.s.c;R<=C.e.c;++R){var A=encode_col(R)+encode_row(T);_?(n["!data"][T]||(n["!data"][T]=[]),n["!data"][T][R]||(n["!data"][T][R]={t:"z",v:void 0}),n["!data"][T][R].l=S):(n[A]||(n[A]={t:"z",v:void 0}),n[A].l=S)}}}function parse_ws_xml_margins(n){var r={};return["left","right","top","bottom","header","footer"].forEach(function(g){n[g]&&(r[g]=parseFloat(n[g]))}),r}function write_ws_xml_margins(n){return default_margins(n),writextag("pageMargins",null,n)}function parse_ws_xml_cols(n,r){for(var g=!1,_=0;_!=r.length;++_){var x=parsexmltag(r[_],!0);x.hidden&&(x.hidden=parsexmlbool(x.hidden));var S=parseInt(x.min,10)-1,E=parseInt(x.max,10)-1;for(x.outlineLevel&&(x.level=+x.outlineLevel||0),delete x.min,delete x.max,x.width=+x.width,!g&&x.width&&(g=!0,find_mdw_colw(x.width)),process_col(x);S<=E;)n[S++]=dup(x)}}function write_ws_xml_cols(n,r){for(var g=["<cols>"],_,x=0;x!=r.length;++x)(_=r[x])&&(g[g.length]=writextag("col",null,col_obj_w(x,_)));return g[g.length]="</cols>",g.join("")}function parse_ws_xml_autofilter(n){var r={ref:(n.match(/ref="([^"]*)"/)||[])[1]};return r}function write_ws_xml_autofilter(n,r,g,_){var x=typeof n.ref=="string"?n.ref:encode_range(n.ref);g.Workbook||(g.Workbook={Sheets:[]}),g.Workbook.Names||(g.Workbook.Names=[]);var S=g.Workbook.Names,E=decode_range(x);E.s.r==E.e.r&&(E.e.r=decode_range(r["!ref"]).e.r,x=encode_range(E));for(var C=0;C<S.length;++C){var T=S[C];if(T.Name=="_xlnm._FilterDatabase"&&T.Sheet==_){T.Ref=formula_quote_sheet_name(g.SheetNames[_])+"!"+fix_range(x);break}}return C==S.length&&S.push({Name:"_xlnm._FilterDatabase",Sheet:_,Ref:"'"+g.SheetNames[_]+"'!"+x}),writextag("autoFilter",null,{ref:x})}var sviewregex=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/g;function parse_ws_xml_sheetviews(n,r){r.Views||(r.Views=[{}]),(n.match(sviewregex)||[]).forEach(function(g,_){var x=parsexmltag(g);r.Views[_]||(r.Views[_]={}),+x.zoomScale&&(r.Views[_].zoom=+x.zoomScale),x.rightToLeft&&parsexmlbool(x.rightToLeft)&&(r.Views[_].RTL=!0)})}function write_ws_xml_sheetviews(n,r,g,_){var x={workbookViewId:"0"};return(((_||{}).Workbook||{}).Views||[])[0]&&(x.rightToLeft=_.Workbook.Views[0].RTL?"1":"0"),writextag("sheetViews",writextag("sheetView",null,x),{})}function write_ws_xml_cell(n,r,g,_){if(n.c&&g["!comments"].push([r,n.c]),(n.v===void 0||n.t==="z"&&!(_||{}).sheetStubs)&&typeof n.f!="string"&&typeof n.z>"u")return"";var x="",S=n.t,E=n.v;if(n.t!=="z")switch(n.t){case"b":x=n.v?"1":"0";break;case"n":x=""+n.v;break;case"e":x=BErr[n.v];break;case"d":_&&_.cellDates?x=parseDate(n.v,-1).toISOString():(n=dup(n),n.t="n",x=""+(n.v=datenum(parseDate(n.v)))),typeof n.z>"u"&&(n.z=table_fmt[14]);break;default:x=n.v;break}var C=n.t=="z"||n.v==null?"":writetag("v",escapexml(x)),T={r},R=get_cell_style(_.cellXfs,n,_);switch(R!==0&&(T.s=R),n.t){case"n":break;case"d":T.t="d";break;case"b":T.t="b";break;case"e":T.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(_&&_.bookSST){C=writetag("v",""+get_sst_id(_.Strings,n.v,_.revStrings)),T.t="s";break}else T.t="str";break}if(n.t!=S&&(n.t=S,n.v=E),typeof n.f=="string"&&n.f){var A=n.F&&n.F.slice(0,r.length)==r?{t:"array",ref:n.F}:null;C=writextag("f",escapexml(n.f),A)+(n.v!=null?C:"")}return n.l&&(n.l.display=escapexml(x),g["!links"].push([r,n.l])),n.D&&(T.cm=1),writextag("c",C,T)}var parse_ws_xml_data=function(){var n=/<(?:\w+:)?c[ \/>]/,r=/<\/(?:\w+:)?row>/,g=/r=["']([^"']*)["']/,_=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,x=/ref=["']([^"']*)["']/,S=matchtag("v"),E=matchtag("f");return function(T,R,A,I,B,D){for(var N=0,M="",O=[],L=[],F=0,U=0,j=0,z="",W,X,ie=0,fe=0,xe,we,G=0,J=0,q=Array.isArray(D.CellXf),H,ve=[],Z=[],ce=R["!data"]!=null,ue=[],se={},te=!1,Y=!!A.sheetStubs,be=T.split(r),ye=0,Ie=be.length;ye!=Ie;++ye){M=be[ye].trim();var ke=M.length;if(ke!==0){var Ce=0;e:for(N=0;N<ke;++N)switch(M[N]){case">":if(M[N-1]!="/"){++N;break e}if(A&&A.cellStyles){if(X=parsexmltag(M.slice(Ce,N),!0),ie=X.r!=null?parseInt(X.r,10):ie+1,fe=-1,A.sheetRows&&A.sheetRows<ie)continue;se={},te=!1,X.ht&&(te=!0,se.hpt=parseFloat(X.ht),se.hpx=pt2px(se.hpt)),X.hidden&&parsexmlbool(X.hidden)&&(te=!0,se.hidden=!0),X.outlineLevel!=null&&(te=!0,se.level=+X.outlineLevel),te&&(ue[ie-1]=se)}break;case"<":Ce=N;break}if(Ce>=N)break;if(X=parsexmltag(M.slice(Ce,N),!0),ie=X.r!=null?parseInt(X.r,10):ie+1,fe=-1,!(A.sheetRows&&A.sheetRows<ie)){A.nodim||(I.s.r>ie-1&&(I.s.r=ie-1),I.e.r<ie-1&&(I.e.r=ie-1)),A&&A.cellStyles&&(se={},te=!1,X.ht&&(te=!0,se.hpt=parseFloat(X.ht),se.hpx=pt2px(se.hpt)),X.hidden&&parsexmlbool(X.hidden)&&(te=!0,se.hidden=!0),X.outlineLevel!=null&&(te=!0,se.level=+X.outlineLevel),te&&(ue[ie-1]=se)),O=M.slice(N).split(n);for(var Ae=0;Ae!=O.length&&O[Ae].trim().charAt(0)=="<";++Ae);for(O=O.slice(Ae),N=0;N!=O.length;++N)if(M=O[N].trim(),M.length!==0){if(L=M.match(g),F=N,U=0,j=0,M="<c "+(M.slice(0,1)=="<"?">":"")+M,L!=null&&L.length===2){for(F=0,z=L[1],U=0;U!=z.length&&!((j=z.charCodeAt(U)-64)<1||j>26);++U)F=26*F+j;--F,fe=F}else++fe;for(U=0;U!=M.length&&M.charCodeAt(U)!==62;++U);if(++U,X=parsexmltag(M.slice(0,U),!0),X.r||(X.r=encode_cell({r:ie-1,c:fe})),z=M.slice(U),W={t:""},(L=z.match(S))!=null&&L[1]!==""&&(W.v=unescapexml(L[1])),A.cellFormula){if((L=z.match(E))!=null&&L[1]!==""){if(W.f=unescapexml(utf8read(L[1]),!0),A.xlfn||(W.f=_xlfn(W.f)),L[0].indexOf('t="array"')>-1)W.F=(z.match(x)||[])[1],W.F.indexOf(":")>-1&&ve.push([safe_decode_range(W.F),W.F]);else if(L[0].indexOf('t="shared"')>-1){we=parsexmltag(L[0]);var Ne=unescapexml(utf8read(L[1]));A.xlfn||(Ne=_xlfn(Ne)),Z[parseInt(we.si,10)]=[we,Ne,X.r]}}else(L=z.match(/<f[^>]*\/>/))&&(we=parsexmltag(L[0]),Z[we.si]&&(W.f=shift_formula_xlsx(Z[we.si][1],Z[we.si][2],X.r)));var We=decode_cell(X.r);for(U=0;U<ve.length;++U)We.r>=ve[U][0].s.r&&We.r<=ve[U][0].e.r&&We.c>=ve[U][0].s.c&&We.c<=ve[U][0].e.c&&(W.F=ve[U][1])}if(X.t==null&&W.v===void 0)if(W.f||W.F)W.v=0,W.t="n";else if(Y)W.t="z";else continue;else W.t=X.t||"n";switch(I.s.c>fe&&(I.s.c=fe),I.e.c<fe&&(I.e.c=fe),W.t){case"n":if(W.v==""||W.v==null){if(!Y)continue;W.t="z"}else W.v=parseFloat(W.v);break;case"s":if(typeof W.v>"u"){if(!Y)continue;W.t="z"}else xe=strs[parseInt(W.v,10)],W.v=xe.t,W.r=xe.r,A.cellHTML&&(W.h=xe.h);break;case"str":W.t="s",W.v=W.v!=null?unescapexml(utf8read(W.v),!0):"",A.cellHTML&&(W.h=escapehtml(W.v));break;case"inlineStr":L=z.match(_),W.t="s",L!=null&&(xe=parse_si(L[1]))?(W.v=xe.t,A.cellHTML&&(W.h=xe.h)):W.v="";break;case"b":W.v=parsexmlbool(W.v);break;case"d":A.cellDates?W.v=parseDate(W.v,1):(W.v=datenum(parseDate(W.v,1)),W.t="n");break;case"e":(!A||A.cellText!==!1)&&(W.w=W.v),W.v=RBErr[W.v];break}if(G=J=0,H=null,q&&X.s!==void 0&&(H=D.CellXf[X.s],H!=null&&(H.numFmtId!=null&&(G=H.numFmtId),A.cellStyles&&H.fillId!=null&&(J=H.fillId))),safe_format(W,G,J,A,B,D),A.cellDates&&q&&W.t=="n"&&fmt_is_date(table_fmt[G])&&(W.t="d",W.v=numdate(W.v)),X.cm&&A.xlmeta){var Be=(A.xlmeta.Cell||[])[+X.cm-1];Be&&Be.type=="XLDAPR"&&(W.D=!0)}var Se;A.nodim&&(Se=decode_cell(X.r),I.s.r>Se.r&&(I.s.r=Se.r),I.e.r<Se.r&&(I.e.r=Se.r)),ce?(Se=decode_cell(X.r),R["!data"][Se.r]||(R["!data"][Se.r]=[]),R["!data"][Se.r][Se.c]=W):R[X.r]=W}}}}ue.length>0&&(R["!rows"]=ue)}}();function write_ws_xml_data(n,r,g,_){var x=[],S=[],E=safe_decode_range(n["!ref"]),C="",T,R="",A=[],I=0,B=0,D=n["!rows"],N=n["!data"]!=null,M={r:R},O,L=-1;for(B=E.s.c;B<=E.e.c;++B)A[B]=encode_col(B);for(I=E.s.r;I<=E.e.r;++I){for(S=[],R=encode_row(I),B=E.s.c;B<=E.e.c;++B){T=A[B]+R;var F=N?(n["!data"][I]||[])[B]:n[T];F!==void 0&&(C=write_ws_xml_cell(F,T,n,r))!=null&&S.push(C)}(S.length>0||D&&D[I])&&(M={r:R},D&&D[I]&&(O=D[I],O.hidden&&(M.hidden=1),L=-1,O.hpx?L=px2pt(O.hpx):O.hpt&&(L=O.hpt),L>-1&&(M.ht=L,M.customHeight=1),O.level&&(M.outlineLevel=O.level)),x[x.length]=writextag("row",S.join(""),M))}if(D)for(;I<D.length;++I)D&&D[I]&&(M={r:I+1},O=D[I],O.hidden&&(M.hidden=1),L=-1,O.hpx?L=px2pt(O.hpx):O.hpt&&(L=O.hpt),L>-1&&(M.ht=L,M.customHeight=1),O.level&&(M.outlineLevel=O.level),x[x.length]=writextag("row","",M));return x.join("")}function write_ws_xml(n,r,g,_){var x=[XML_HEADER,writextag("worksheet",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r})],S=g.SheetNames[n],E=0,C="",T=g.Sheets[S];T==null&&(T={});var R=T["!ref"]||"A1",A=safe_decode_range(R);if(A.e.c>16383||A.e.r>1048575){if(r.WTF)throw new Error("Range "+R+" exceeds format limit A1:XFD1048576");A.e.c=Math.min(A.e.c,16383),A.e.r=Math.min(A.e.c,1048575),R=encode_range(A)}_||(_={}),T["!comments"]=[];var I=[];write_ws_xml_sheetpr(T,g,n,r,x),x[x.length]=writextag("dimension",null,{ref:R}),x[x.length]=write_ws_xml_sheetviews(T,r,n,g),r.sheetFormat&&(x[x.length]=writextag("sheetFormatPr",null,{defaultRowHeight:r.sheetFormat.defaultRowHeight||"16",baseColWidth:r.sheetFormat.baseColWidth||"10",outlineLevelRow:r.sheetFormat.outlineLevelRow||"7"})),T["!cols"]!=null&&T["!cols"].length>0&&(x[x.length]=write_ws_xml_cols(T,T["!cols"])),x[E=x.length]="<sheetData/>",T["!links"]=[],T["!ref"]!=null&&(C=write_ws_xml_data(T,r),C.length>0&&(x[x.length]=C)),x.length>E+1&&(x[x.length]="</sheetData>",x[E]=x[E].replace("/>",">")),T["!protect"]&&(x[x.length]=write_ws_xml_protection(T["!protect"])),T["!autofilter"]!=null&&(x[x.length]=write_ws_xml_autofilter(T["!autofilter"],T,g,n)),T["!merges"]!=null&&T["!merges"].length>0&&(x[x.length]=write_ws_xml_merges(T["!merges"]));var B=-1,D,N=-1;return T["!links"].length>0&&(x[x.length]="<hyperlinks>",T["!links"].forEach(function(M){M[1].Target&&(D={ref:M[0]},M[1].Target.charAt(0)!="#"&&(N=add_rels(_,-1,escapexml(M[1].Target).replace(/#.*$/,""),RELS.HLINK),D["r:id"]="rId"+N),(B=M[1].Target.indexOf("#"))>-1&&(D.location=escapexml(M[1].Target.slice(B+1))),M[1].Tooltip&&(D.tooltip=escapexml(M[1].Tooltip)),D.display=M[1].display,x[x.length]=writextag("hyperlink",null,D))}),x[x.length]="</hyperlinks>"),delete T["!links"],T["!margins"]!=null&&(x[x.length]=write_ws_xml_margins(T["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&(x[x.length]=writetag("ignoredErrors",writextag("ignoredError",null,{numberStoredAsText:1,sqref:R}))),I.length>0&&(N=add_rels(_,-1,"../drawings/drawing"+(n+1)+".xml",RELS.DRAW),x[x.length]=writextag("drawing",null,{"r:id":"rId"+N}),T["!drawing"]=I),T["!comments"].length>0&&(N=add_rels(_,-1,"../drawings/vmlDrawing"+(n+1)+".vml",RELS.VML),x[x.length]=writextag("legacyDrawing",null,{"r:id":"rId"+N}),T["!legacy"]=N),x.length>1&&(x[x.length]="</worksheet>",x[1]=x[1].replace("/>",">")),x.join("")}function parse_BrtRowHdr(n,r){var g={},_=n.l+r;g.r=n.read_shift(4),n.l+=4;var x=n.read_shift(2);n.l+=1;var S=n.read_shift(1);return n.l=_,S&7&&(g.level=S&7),S&16&&(g.hidden=!0),S&32&&(g.hpt=x/20),g}function write_BrtRowHdr(n,r,g){var _=new_buf(145),x=(g["!rows"]||[])[n]||{};_.write_shift(4,n),_.write_shift(4,0);var S=320;x.hpx?S=px2pt(x.hpx)*20:x.hpt&&(S=x.hpt*20),_.write_shift(2,S),_.write_shift(1,0);var E=0;x.level&&(E|=x.level),x.hidden&&(E|=16),(x.hpx||x.hpt)&&(E|=32),_.write_shift(1,E),_.write_shift(1,0);var C=0,T=_.l;_.l+=4;for(var R={r:n,c:0},A=g["!data"]!=null,I=0;I<16;++I)if(!(r.s.c>I+1<<10||r.e.c<I<<10)){for(var B=-1,D=-1,N=I<<10;N<I+1<<10;++N){R.c=N;var M=A?(g["!data"][R.r]||[])[R.c]:g[encode_cell(R)];M&&(B<0&&(B=N),D=N)}B<0||(++C,_.write_shift(4,B),_.write_shift(4,D))}var O=_.l;return _.l=T,_.write_shift(4,C),_.l=O,_.length>_.l?_.slice(0,_.l):_}function write_row_header(n,r,g,_){var x=write_BrtRowHdr(_,g,r);(x.length>17||(r["!rows"]||[])[_])&&write_record(n,0,x)}var parse_BrtWsDim=parse_UncheckedRfX,write_BrtWsDim=write_UncheckedRfX;function parse_BrtWsFmtInfo(){}function parse_BrtWsProp(n,r){var g={},_=n[n.l];return++n.l,g.above=!(_&64),g.left=!(_&128),n.l+=18,g.name=parse_XLSBCodeName(n),g}function write_BrtWsProp(n,r,g){g==null&&(g=new_buf(84+4*n.length));var _=192;r&&(r.above&&(_&=-65),r.left&&(_&=-129)),g.write_shift(1,_);for(var x=1;x<3;++x)g.write_shift(1,0);return write_BrtColor({auto:1},g),g.write_shift(-4,-1),g.write_shift(-4,-1),write_XLSBCodeName(n,g),g.slice(0,g.l)}function parse_BrtCellBlank(n){var r=parse_XLSBCell(n);return[r]}function write_BrtCellBlank(n,r,g){return g==null&&(g=new_buf(8)),write_XLSBCell(r,g)}function parse_BrtShortBlank(n){var r=parse_XLSBShortCell(n);return[r]}function write_BrtShortBlank(n,r,g){return g==null&&(g=new_buf(4)),write_XLSBShortCell(r,g)}function parse_BrtCellBool(n){var r=parse_XLSBCell(n),g=n.read_shift(1);return[r,g,"b"]}function write_BrtCellBool(n,r,g){return g==null&&(g=new_buf(9)),write_XLSBCell(r,g),g.write_shift(1,n.v?1:0),g}function parse_BrtShortBool(n){var r=parse_XLSBShortCell(n),g=n.read_shift(1);return[r,g,"b"]}function write_BrtShortBool(n,r,g){return g==null&&(g=new_buf(5)),write_XLSBShortCell(r,g),g.write_shift(1,n.v?1:0),g}function parse_BrtCellError(n){var r=parse_XLSBCell(n),g=n.read_shift(1);return[r,g,"e"]}function write_BrtCellError(n,r,g){return g==null&&(g=new_buf(9)),write_XLSBCell(r,g),g.write_shift(1,n.v),g}function parse_BrtShortError(n){var r=parse_XLSBShortCell(n),g=n.read_shift(1);return[r,g,"e"]}function write_BrtShortError(n,r,g){return g==null&&(g=new_buf(8)),write_XLSBShortCell(r,g),g.write_shift(1,n.v),g.write_shift(2,0),g.write_shift(1,0),g}function parse_BrtCellIsst(n){var r=parse_XLSBCell(n),g=n.read_shift(4);return[r,g,"s"]}function write_BrtCellIsst(n,r,g){return g==null&&(g=new_buf(12)),write_XLSBCell(r,g),g.write_shift(4,r.v),g}function parse_BrtShortIsst(n){var r=parse_XLSBShortCell(n),g=n.read_shift(4);return[r,g,"s"]}function write_BrtShortIsst(n,r,g){return g==null&&(g=new_buf(8)),write_XLSBShortCell(r,g),g.write_shift(4,r.v),g}function parse_BrtCellReal(n){var r=parse_XLSBCell(n),g=parse_Xnum(n);return[r,g,"n"]}function write_BrtCellReal(n,r,g){return g==null&&(g=new_buf(16)),write_XLSBCell(r,g),write_Xnum(n.v,g),g}function parse_BrtShortReal(n){var r=parse_XLSBShortCell(n),g=parse_Xnum(n);return[r,g,"n"]}function write_BrtShortReal(n,r,g){return g==null&&(g=new_buf(12)),write_XLSBShortCell(r,g),write_Xnum(n.v,g),g}function parse_BrtCellRk(n){var r=parse_XLSBCell(n),g=parse_RkNumber(n);return[r,g,"n"]}function write_BrtCellRk(n,r,g){return g==null&&(g=new_buf(12)),write_XLSBCell(r,g),write_RkNumber(n.v,g),g}function parse_BrtShortRk(n){var r=parse_XLSBShortCell(n),g=parse_RkNumber(n);return[r,g,"n"]}function write_BrtShortRk(n,r,g){return g==null&&(g=new_buf(8)),write_XLSBShortCell(r,g),write_RkNumber(n.v,g),g}function parse_BrtCellRString(n){var r=parse_XLSBCell(n),g=parse_RichStr(n);return[r,g,"is"]}function parse_BrtCellSt(n){var r=parse_XLSBCell(n),g=parse_XLWideString(n);return[r,g,"str"]}function write_BrtCellSt(n,r,g){var _=n.v==null?"":String(n.v);return g==null&&(g=new_buf(12+4*n.v.length)),write_XLSBCell(r,g),write_XLWideString(_,g),g.length>g.l?g.slice(0,g.l):g}function parse_BrtShortSt(n){var r=parse_XLSBShortCell(n),g=parse_XLWideString(n);return[r,g,"str"]}function write_BrtShortSt(n,r,g){var _=n.v==null?"":String(n.v);return g==null&&(g=new_buf(8+4*_.length)),write_XLSBShortCell(r,g),write_XLWideString(_,g),g.length>g.l?g.slice(0,g.l):g}function parse_BrtFmlaBool(n,r,g){var _=n.l+r,x=parse_XLSBCell(n);x.r=g["!row"];var S=n.read_shift(1),E=[x,S,"b"];if(g.cellFormula){n.l+=2;var C=parse_XLSBCellParsedFormula(n,_-n.l,g);E[3]=stringify_formula(C,null,x,g.supbooks,g)}else n.l=_;return E}function parse_BrtFmlaError(n,r,g){var _=n.l+r,x=parse_XLSBCell(n);x.r=g["!row"];var S=n.read_shift(1),E=[x,S,"e"];if(g.cellFormula){n.l+=2;var C=parse_XLSBCellParsedFormula(n,_-n.l,g);E[3]=stringify_formula(C,null,x,g.supbooks,g)}else n.l=_;return E}function parse_BrtFmlaNum(n,r,g){var _=n.l+r,x=parse_XLSBCell(n);x.r=g["!row"];var S=parse_Xnum(n),E=[x,S,"n"];if(g.cellFormula){n.l+=2;var C=parse_XLSBCellParsedFormula(n,_-n.l,g);E[3]=stringify_formula(C,null,x,g.supbooks,g)}else n.l=_;return E}function parse_BrtFmlaString(n,r,g){var _=n.l+r,x=parse_XLSBCell(n);x.r=g["!row"];var S=parse_XLWideString(n),E=[x,S,"str"];if(g.cellFormula){n.l+=2;var C=parse_XLSBCellParsedFormula(n,_-n.l,g);E[3]=stringify_formula(C,null,x,g.supbooks,g)}else n.l=_;return E}var parse_BrtMergeCell=parse_UncheckedRfX,write_BrtMergeCell=write_UncheckedRfX;function write_BrtBeginMergeCells(n,r){return r==null&&(r=new_buf(4)),r.write_shift(4,n),r}function parse_BrtHLink(n,r){var g=n.l+r,_=parse_UncheckedRfX(n),x=parse_XLNullableWideString(n),S=parse_XLWideString(n),E=parse_XLWideString(n),C=parse_XLWideString(n);n.l=g;var T={rfx:_,relId:x,loc:S,display:C};return E&&(T.Tooltip=E),T}function write_BrtHLink(n,r){var g=new_buf(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));write_UncheckedRfX({s:decode_cell(n[0]),e:decode_cell(n[0])},g),write_RelID("rId"+r,g);var _=n[1].Target.indexOf("#"),x=_==-1?"":n[1].Target.slice(_+1);return write_XLWideString(x||"",g),write_XLWideString(n[1].Tooltip||"",g),write_XLWideString("",g),g.slice(0,g.l)}function parse_BrtPane(){}function parse_BrtArrFmla(n,r,g){var _=n.l+r,x=parse_RfX(n),S=n.read_shift(1),E=[x];if(E[2]=S,g.cellFormula){var C=parse_XLSBArrayParsedFormula(n,_-n.l,g);E[1]=C}else n.l=_;return E}function parse_BrtShrFmla(n,r,g){var _=n.l+r,x=parse_UncheckedRfX(n),S=[x];if(g.cellFormula){var E=parse_XLSBSharedParsedFormula(n,_-n.l,g);S[1]=E,n.l=_}else n.l=_;return S}function write_BrtColInfo(n,r,g){g==null&&(g=new_buf(18));var _=col_obj_w(n,r);g.write_shift(-4,n),g.write_shift(-4,n),g.write_shift(4,(_.width||10)*256),g.write_shift(4,0);var x=0;return r.hidden&&(x|=1),typeof _.width=="number"&&(x|=2),r.level&&(x|=r.level<<8),g.write_shift(2,x),g}var BrtMarginKeys=["left","right","top","bottom","header","footer"];function parse_BrtMargins(n){var r={};return BrtMarginKeys.forEach(function(g){r[g]=parse_Xnum(n)}),r}function write_BrtMargins(n,r){return r==null&&(r=new_buf(6*8)),default_margins(n),BrtMarginKeys.forEach(function(g){write_Xnum(n[g],r)}),r}function parse_BrtBeginWsView(n){var r=n.read_shift(2);return n.l+=28,{RTL:r&32}}function write_BrtBeginWsView(n,r,g){g==null&&(g=new_buf(30));var _=924;return(((r||{}).Views||[])[0]||{}).RTL&&(_|=32),g.write_shift(2,_),g.write_shift(4,0),g.write_shift(4,0),g.write_shift(4,0),g.write_shift(1,0),g.write_shift(1,0),g.write_shift(2,0),g.write_shift(2,100),g.write_shift(2,0),g.write_shift(2,0),g.write_shift(2,0),g.write_shift(4,0),g}function write_BrtCellIgnoreEC(n){var r=new_buf(24);return r.write_shift(4,4),r.write_shift(4,1),write_UncheckedRfX(n,r),r}function write_BrtSheetProtection(n,r){return r==null&&(r=new_buf(16*4+2)),r.write_shift(2,n.password?crypto_CreatePasswordVerifier_Method1(n.password):0),r.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(g){g[1]?r.write_shift(4,n[g[0]]!=null&&!n[g[0]]?1:0):r.write_shift(4,n[g[0]]!=null&&n[g[0]]?0:1)}),r}function parse_BrtDVal(){}function parse_BrtDVal14(){}function parse_ws_bin(n,r,g,_,x,S,E){if(!n)return n;var C=r||{};_||(_={"!id":{}});var T={};C.dense&&(T["!data"]=[]);var R,A={s:{r:2e6,c:2e6},e:{r:0,c:0}},I=!1,B=!1,D,N,M,O,L,F,U,j,z,W=[];C.biff=12,C["!row"]=0;var X=0,ie=!1,fe=[],xe={},we=C.supbooks||x.supbooks||[[]];if(we.sharedf=xe,we.arrayf=fe,we.SheetNames=x.SheetNames||x.Sheets.map(function(ce){return ce.name}),!C.supbooks&&(C.supbooks=we,x.Names))for(var G=0;G<x.Names.length;++G)we[0][G+1]=x.Names[G];var J=[],q=[],H=!1;XLSBRecordEnum[16]={n:"BrtShortReal",f:parse_BrtShortReal};var ve;if(recordhopper(n,function(ue,se,te){if(!B)switch(te){case 148:R=ue;break;case 0:D=ue,C.sheetRows&&C.sheetRows<=D.r&&(B=!0),j=encode_row(O=D.r),C["!row"]=D.r,(ue.hidden||ue.hpt||ue.level!=null)&&(ue.hpt&&(ue.hpx=pt2px(ue.hpt)),q[ue.r]=ue);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(N={t:ue[2]},ue[2]){case"n":N.v=ue[1];break;case"s":U=strs[ue[1]],N.v=U.t,N.r=U.r;break;case"b":N.v=!!ue[1];break;case"e":N.v=ue[1],C.cellText!==!1&&(N.w=BErr[N.v]);break;case"str":N.t="s",N.v=ue[1];break;case"is":N.t="s",N.v=ue[1].t;break}if((M=E.CellXf[ue[0].iStyleRef])&&safe_format(N,M.numFmtId,null,C,S,E),L=ue[0].c==-1?L+1:ue[0].c,C.dense?(T["!data"][O]||(T["!data"][O]=[]),T["!data"][O][L]=N):T[encode_col(L)+j]=N,C.cellFormula){for(ie=!1,X=0;X<fe.length;++X){var Y=fe[X];D.r>=Y[0].s.r&&D.r<=Y[0].e.r&&L>=Y[0].s.c&&L<=Y[0].e.c&&(N.F=encode_range(Y[0]),ie=!0)}!ie&&ue.length>3&&(N.f=ue[3])}if(A.s.r>D.r&&(A.s.r=D.r),A.s.c>L&&(A.s.c=L),A.e.r<D.r&&(A.e.r=D.r),A.e.c<L&&(A.e.c=L),C.cellDates&&M&&N.t=="n"&&fmt_is_date(table_fmt[M.numFmtId])){var be=SSF_parse_date_code(N.v);be&&(N.t="d",N.v=new Date(be.y,be.m-1,be.d,be.H,be.M,be.S,be.u))}ve&&(ve.type=="XLDAPR"&&(N.D=!0),ve=void 0);break;case 1:case 12:if(!C.sheetStubs||I)break;N={t:"z",v:void 0},L=ue[0].c==-1?L+1:ue[0].c,C.dense?(T["!data"][O]||(T["!data"][O]=[]),T["!data"][O][L]=N):T[encode_col(L)+j]=N,A.s.r>D.r&&(A.s.r=D.r),A.s.c>L&&(A.s.c=L),A.e.r<D.r&&(A.e.r=D.r),A.e.c<L&&(A.e.c=L),ve&&(ve.type=="XLDAPR"&&(N.D=!0),ve=void 0);break;case 176:W.push(ue);break;case 49:ve=((C.xlmeta||{}).Cell||[])[ue-1];break;case 494:var ye=_["!id"][ue.relId];for(ye?(ue.Target=ye.Target,ue.loc&&(ue.Target+="#"+ue.loc),ue.Rel=ye):ue.relId==""&&(ue.Target="#"+ue.loc),O=ue.rfx.s.r;O<=ue.rfx.e.r;++O)for(L=ue.rfx.s.c;L<=ue.rfx.e.c;++L)C.dense?(T["!data"][O]||(T["!data"][O]=[]),T["!data"][O][L]||(T["!data"][O][L]={t:"z",v:void 0}),T["!data"][O][L].l=ue):(F=encode_col(L)+encode_row(O),T[F]||(T[F]={t:"z",v:void 0}),T[F].l=ue);break;case 426:if(!C.cellFormula)break;fe.push(ue),z=C.dense?T["!data"][O][L]:T[encode_col(L)+j],z.f=stringify_formula(ue[1],A,{r:D.r,c:L},we,C),z.F=encode_range(ue[0]);break;case 427:if(!C.cellFormula)break;xe[encode_cell(ue[0].s)]=ue[1],z=C.dense?T["!data"][O][L]:T[encode_col(L)+j],z.f=stringify_formula(ue[1],A,{r:D.r,c:L},we,C);break;case 60:if(!C.cellStyles)break;for(;ue.e>=ue.s;)J[ue.e--]={width:ue.w/256,hidden:!!(ue.flags&1),level:ue.level},H||(H=!0,find_mdw_colw(ue.w/256)),process_col(J[ue.e+1]);break;case 161:T["!autofilter"]={ref:encode_range(ue)};break;case 476:T["!margins"]=ue;break;case 147:x.Sheets[g]||(x.Sheets[g]={}),ue.name&&(x.Sheets[g].CodeName=ue.name),(ue.above||ue.left)&&(T["!outline"]={above:ue.above,left:ue.left});break;case 137:x.Views||(x.Views=[{}]),x.Views[0]||(x.Views[0]={}),ue.RTL&&(x.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:I=!0;break;case 36:I=!1;break;case 37:I=!0;break;case 38:I=!1;break;default:if(!se.T){if(!I||C.WTF)throw new Error("Unexpected record 0x"+te.toString(16))}}},C),delete C.supbooks,delete C["!row"],!T["!ref"]&&(A.s.r<2e6||R&&(R.e.r>0||R.e.c>0||R.s.r>0||R.s.c>0))&&(T["!ref"]=encode_range(R||A)),C.sheetRows&&T["!ref"]){var Z=safe_decode_range(T["!ref"]);C.sheetRows<=+Z.e.r&&(Z.e.r=C.sheetRows-1,Z.e.r>A.e.r&&(Z.e.r=A.e.r),Z.e.r<Z.s.r&&(Z.s.r=Z.e.r),Z.e.c>A.e.c&&(Z.e.c=A.e.c),Z.e.c<Z.s.c&&(Z.s.c=Z.e.c),T["!fullref"]=T["!ref"],T["!ref"]=encode_range(Z))}return W.length>0&&(T["!merges"]=W),J.length>0&&(T["!cols"]=J),q.length>0&&(T["!rows"]=q),T}function write_ws_bin_cell(n,r,g,_,x,S,E){var C={r:g,c:_};if(r.c&&S["!comments"].push([encode_cell(C),r.c]),r.v===void 0)return!1;var T="";switch(r.t){case"b":T=r.v?"1":"0";break;case"d":r=dup(r),r.z=r.z||table_fmt[14],r.v=datenum(parseDate(r.v)),r.t="n";break;case"n":case"e":T=""+r.v;break;default:T=r.v;break}switch(C.s=get_cell_style(x.cellXfs,r,x),r.l&&S["!links"].push([encode_cell(C),r.l]),r.t){case"s":case"str":return x.bookSST?(T=get_sst_id(x.Strings,r.v==null?"":String(r.v),x.revStrings),C.t="s",C.v=T,E?write_record(n,18,write_BrtShortIsst(r,C)):write_record(n,7,write_BrtCellIsst(r,C))):(C.t="str",E?write_record(n,17,write_BrtShortSt(r,C)):write_record(n,6,write_BrtCellSt(r,C))),!0;case"n":return r.v==(r.v|0)&&r.v>-1e3&&r.v<1e3?E?write_record(n,13,write_BrtShortRk(r,C)):write_record(n,2,write_BrtCellRk(r,C)):E?write_record(n,16,write_BrtShortReal(r,C)):write_record(n,5,write_BrtCellReal(r,C)),!0;case"b":return C.t="b",E?write_record(n,15,write_BrtShortBool(r,C)):write_record(n,4,write_BrtCellBool(r,C)),!0;case"e":return C.t="e",E?write_record(n,14,write_BrtShortError(r,C)):write_record(n,3,write_BrtCellError(r,C)),!0}return E?write_record(n,12,write_BrtShortBlank(r,C)):write_record(n,1,write_BrtCellBlank(r,C)),!0}function write_CELLTABLE(n,r,g,_){var x=safe_decode_range(r["!ref"]||"A1"),S,E="",C=[];write_record(n,145);var T=r["!data"]!=null,R=x.e.r;r["!rows"]&&(R=Math.max(x.e.r,r["!rows"].length-1));for(var A=x.s.r;A<=R;++A){E=encode_row(A),write_row_header(n,r,x,A);var I=!1;if(A<=x.e.r)for(var B=x.s.c;B<=x.e.c;++B){A===x.s.r&&(C[B]=encode_col(B)),S=C[B]+E;var D=T?(r["!data"][A]||[])[B]:r[S];if(!D){I=!1;continue}I=write_ws_bin_cell(n,D,A,B,_,r,I)}}write_record(n,146)}function write_MERGECELLS(n,r){!r||!r["!merges"]||(write_record(n,177,write_BrtBeginMergeCells(r["!merges"].length)),r["!merges"].forEach(function(g){write_record(n,176,write_BrtMergeCell(g))}),write_record(n,178))}function write_COLINFOS(n,r){!r||!r["!cols"]||(write_record(n,390),r["!cols"].forEach(function(g,_){g&&write_record(n,60,write_BrtColInfo(_,g))}),write_record(n,391))}function write_IGNOREECS(n,r){!r||!r["!ref"]||(write_record(n,648),write_record(n,649,write_BrtCellIgnoreEC(safe_decode_range(r["!ref"]))),write_record(n,650))}function write_HLINKS(n,r,g){r["!links"].forEach(function(_){if(_[1].Target){var x=add_rels(g,-1,_[1].Target.replace(/#.*$/,""),RELS.HLINK);write_record(n,494,write_BrtHLink(_,x))}}),delete r["!links"]}function write_LEGACYDRAWING(n,r,g,_){if(r["!comments"].length>0){var x=add_rels(_,-1,"../drawings/vmlDrawing"+(g+1)+".vml",RELS.VML);write_record(n,551,write_RelID("rId"+x)),r["!legacy"]=x}}function write_AUTOFILTER(n,r,g,_){if(r["!autofilter"]){var x=r["!autofilter"],S=typeof x.ref=="string"?x.ref:encode_range(x.ref);g.Workbook||(g.Workbook={Sheets:[]}),g.Workbook.Names||(g.Workbook.Names=[]);var E=g.Workbook.Names,C=decode_range(S);C.s.r==C.e.r&&(C.e.r=decode_range(r["!ref"]).e.r,S=encode_range(C));for(var T=0;T<E.length;++T){var R=E[T];if(R.Name=="_xlnm._FilterDatabase"&&R.Sheet==_){R.Ref=formula_quote_sheet_name(g.SheetNames[_])+"!"+fix_range(S);break}}T==E.length&&E.push({Name:"_xlnm._FilterDatabase",Sheet:_,Ref:formula_quote_sheet_name(g.SheetNames[_])+"!"+fix_range(S)}),write_record(n,161,write_UncheckedRfX(safe_decode_range(S))),write_record(n,162)}}function write_WSVIEWS2(n,r,g){write_record(n,133),write_record(n,137,write_BrtBeginWsView(r,g)),write_record(n,138),write_record(n,134)}function write_SHEETPROTECT(n,r){r["!protect"]&&write_record(n,535,write_BrtSheetProtection(r["!protect"]))}function write_ws_bin(n,r,g,_){var x=buf_array(),S=g.SheetNames[n],E=g.Sheets[S]||{},C=S;try{g&&g.Workbook&&(C=g.Workbook.Sheets[n].CodeName||C)}catch{}var T=safe_decode_range(E["!ref"]||"A1");if(T.e.c>16383||T.e.r>1048575){if(r.WTF)throw new Error("Range "+(E["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");T.e.c=Math.min(T.e.c,16383),T.e.r=Math.min(T.e.c,1048575)}return E["!links"]=[],E["!comments"]=[],write_record(x,129),(g.vbaraw||E["!outline"])&&write_record(x,147,write_BrtWsProp(C,E["!outline"])),write_record(x,148,write_BrtWsDim(T)),write_WSVIEWS2(x,E,g.Workbook),write_COLINFOS(x,E),write_CELLTABLE(x,E,n,r),write_SHEETPROTECT(x,E),write_AUTOFILTER(x,E,g,n),write_MERGECELLS(x,E),write_HLINKS(x,E,_),E["!margins"]&&write_record(x,476,write_BrtMargins(E["!margins"])),(!r||r.ignoreEC||r.ignoreEC==null)&&write_IGNOREECS(x,E),write_LEGACYDRAWING(x,E,n,_),write_record(x,130),x.end()}function parse_Cache(n){var r=[],g=n.match(/^<c:numCache>/),_;(n.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(S){var E=S.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);E&&(r[+E[1]]=g?+E[2]:E[2])});var x=unescapexml((n.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(n.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(S){_=S.replace(/<.*?>/g,"")}),[r,x,_]}function parse_chart(n,r,g,_,x,S){var E=S||{"!type":"chart"};if(!n)return S;var C=0,T=0,R="A",A={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(n.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(I){var B=parse_Cache(I);A.s.r=A.s.c=0,A.e.c=C,R=encode_col(C),B[0].forEach(function(D,N){E["!data"]?(E["!data"][N]||(E["!data"][N]=[]),E["!data"][N][C]={t:"n",v:D,z:B[1]}):E[R+encode_row(N)]={t:"n",v:D,z:B[1]},T=N}),A.e.r<T&&(A.e.r=T),++C}),C>0&&(E["!ref"]=encode_range(A)),E}function parse_cs_xml(n,r,g,_,x){if(!n)return n;_||(_={"!id":{}});var S={"!type":"chart","!drawel":null,"!rel":""},E,C=n.match(sheetprregex);return C&&parse_ws_xml_sheetpr(C[0],S,x,g),(E=n.match(/drawing r:id="(.*?)"/))&&(S["!rel"]=E[1]),_["!id"][S["!rel"]]&&(S["!drawel"]=_["!id"][S["!rel"]]),S}function parse_BrtCsProp(n,r){n.l+=10;var g=parse_XLWideString(n);return{name:g}}function parse_cs_bin(n,r,g,_,x){if(!n)return n;_||(_={"!id":{}});var S={"!type":"chart","!drawel":null,"!rel":""},E=!1;return recordhopper(n,function(T,R,A){switch(A){case 550:S["!rel"]=T;break;case 651:x.Sheets[g]||(x.Sheets[g]={}),T.name&&(x.Sheets[g].CodeName=T.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:E=!0;break;case 36:E=!1;break;case 37:break;case 38:break;default:if(!(R.T>0)){if(!(R.T<0)){if(!E||r.WTF)throw new Error("Unexpected record 0x"+A.toString(16))}}}},r),_["!id"][S["!rel"]]&&(S["!drawel"]=_["!id"][S["!rel"]]),S}var WBPropsDef=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],WBViewDef=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],SheetDef=[],CalcPrDef=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function push_defaults_array(n,r){for(var g=0;g!=n.length;++g)for(var _=n[g],x=0;x!=r.length;++x){var S=r[x];if(_[S[0]]==null)_[S[0]]=S[1];else switch(S[2]){case"bool":typeof _[S[0]]=="string"&&(_[S[0]]=parsexmlbool(_[S[0]]));break;case"int":typeof _[S[0]]=="string"&&(_[S[0]]=parseInt(_[S[0]],10));break}}}function push_defaults(n,r){for(var g=0;g!=r.length;++g){var _=r[g];if(n[_[0]]==null)n[_[0]]=_[1];else switch(_[2]){case"bool":typeof n[_[0]]=="string"&&(n[_[0]]=parsexmlbool(n[_[0]]));break;case"int":typeof n[_[0]]=="string"&&(n[_[0]]=parseInt(n[_[0]],10));break}}}function parse_wb_defaults(n){push_defaults(n.WBProps,WBPropsDef),push_defaults(n.CalcPr,CalcPrDef),push_defaults_array(n.WBView,WBViewDef),push_defaults_array(n.Sheets,SheetDef),_ssfopts.date1904=parsexmlbool(n.WBProps.date1904)}function safe1904(n){return!n.Workbook||!n.Workbook.WBProps?"false":parsexmlbool(n.Workbook.WBProps.date1904)?"true":"false"}var badchars=":][*?/\\".split("");function check_ws_name(n,r){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var g=!0;return badchars.forEach(function(_){if(n.indexOf(_)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),g}function check_wb_names(n,r,g){n.forEach(function(_,x){check_ws_name(_);for(var S=0;S<x;++S)if(_==n[S])throw new Error("Duplicate Sheet Name: "+_);if(g){var E=r&&r[x]&&r[x].CodeName||_;if(E.charCodeAt(0)==95&&E.length>22)throw new Error("Bad Code Name: Worksheet"+E)}})}function check_wb(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var r=n.Workbook&&n.Workbook.Sheets||[];check_wb_names(n.SheetNames,r,!!n.vbaraw);for(var g=0;g<n.SheetNames.length;++g)check_ws(n.Sheets[n.SheetNames[g]],n.SheetNames[g],g);n.SheetNames.forEach(function(_,x){var S=n.Sheets[_];if(!(!S||!S["!autofilter"])){var E;n.Workbook||(n.Workbook={}),n.Workbook.Names||(n.Workbook.Names=[]),n.Workbook.Names.forEach(function(T){T.Name=="_xlnm._FilterDatabase"&&T.Sheet==x&&(E=T)});var C=formula_quote_sheet_name(_)+"!"+fix_range(S["!autofilter"].ref);E?E.Ref=C:n.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:x,Ref:C})}})}var wbnsregex=/<\w+:workbook/;function parse_wb_xml(n,r){if(!n)throw new Error("Could not find file");var g={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},_=!1,x="xmlns",S={},E=0;if(n.replace(tagregex,function(T,R){var A=parsexmltag(T);switch(strip_ns(A[0])){case"<?xml":break;case"<workbook":T.match(wbnsregex)&&(x="xmlns"+T.match(/<(\w+):/)[1]),g.xmlns=A[x];break;case"</workbook>":break;case"<fileVersion":delete A[0],g.AppVersion=A;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":WBPropsDef.forEach(function(I){if(A[I[0]]!=null)switch(I[2]){case"bool":g.WBProps[I[0]]=parsexmlbool(A[I[0]]);break;case"int":g.WBProps[I[0]]=parseInt(A[I[0]],10);break;default:g.WBProps[I[0]]=A[I[0]]}}),A.codeName&&(g.WBProps.CodeName=utf8read(A.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete A[0],g.WBView.push(A);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(A.state){case"hidden":A.Hidden=1;break;case"veryHidden":A.Hidden=2;break;default:A.Hidden=0}delete A.state,A.name=unescapexml(utf8read(A.name)),delete A[0],g.Sheets.push(A);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":_=!0;break;case"</definedNames>":_=!1;break;case"<definedName":S={},S.Name=utf8read(A.name),A.comment&&(S.Comment=A.comment),A.localSheetId&&(S.Sheet=+A.localSheetId),parsexmlbool(A.hidden||"0")&&(S.Hidden=!0),E=R+T.length;break;case"</definedName>":S.Ref=unescapexml(utf8read(n.slice(E,R))),g.Names.push(S);break;case"<definedName/>":break;case"<calcPr":delete A[0],g.CalcPr=A;break;case"<calcPr/>":delete A[0],g.CalcPr=A;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":_=!0;break;case"</ext>":_=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":_=!0;break;case"</AlternateContent>":_=!1;break;case"<revisionPtr":break;default:if(!_&&r.WTF)throw new Error("unrecognized "+A[0]+" in workbook")}return T}),XMLNS_main.indexOf(g.xmlns)===-1)throw new Error("Unknown Namespace: "+g.xmlns);return parse_wb_defaults(g),g}function write_wb_xml(n){var r=[XML_HEADER];r[r.length]=writextag("workbook",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r});var g=n.Workbook&&(n.Workbook.Names||[]).length>0,_={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(WBPropsDef.forEach(function(C){n.Workbook.WBProps[C[0]]!=null&&n.Workbook.WBProps[C[0]]!=C[1]&&(_[C[0]]=n.Workbook.WBProps[C[0]])}),n.Workbook.WBProps.CodeName&&(_.codeName=n.Workbook.WBProps.CodeName,delete _.CodeName)),r[r.length]=writextag("workbookPr",null,_);var x=n.Workbook&&n.Workbook.Sheets||[],S=0;if(x&&x[0]&&x[0].Hidden){for(r[r.length]="<bookViews>",S=0;S!=n.SheetNames.length&&!(!x[S]||!x[S].Hidden);++S);S==n.SheetNames.length&&(S=0),r[r.length]='<workbookView firstSheet="'+S+'" activeTab="'+S+'"/>',r[r.length]="</bookViews>"}for(r[r.length]="<sheets>",S=0;S!=n.SheetNames.length;++S){var E={name:escapexml(n.SheetNames[S].slice(0,31))};if(E.sheetId=""+(S+1),E["r:id"]="rId"+(S+1),x[S])switch(x[S].Hidden){case 1:E.state="hidden";break;case 2:E.state="veryHidden";break}r[r.length]=writextag("sheet",null,E)}return r[r.length]="</sheets>",g&&(r[r.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(C){var T={name:C.Name};C.Comment&&(T.comment=C.Comment),C.Sheet!=null&&(T.localSheetId=""+C.Sheet),C.Hidden&&(T.hidden="1"),C.Ref&&(r[r.length]=writextag("definedName",escapexml(C.Ref),T))}),r[r.length]="</definedNames>"),r.length>2&&(r[r.length]="</workbook>",r[1]=r[1].replace("/>",">")),r.join("")}function parse_BrtBundleSh(n,r){var g={};return g.Hidden=n.read_shift(4),g.iTabID=n.read_shift(4),g.strRelID=parse_RelID(n),g.name=parse_XLWideString(n),g}function write_BrtBundleSh(n,r){return r||(r=new_buf(127)),r.write_shift(4,n.Hidden),r.write_shift(4,n.iTabID),write_RelID(n.strRelID,r),write_XLWideString(n.name.slice(0,31),r),r.length>r.l?r.slice(0,r.l):r}function parse_BrtWbProp(n,r){var g={},_=n.read_shift(4);g.defaultThemeVersion=n.read_shift(4);var x=r>8?parse_XLWideString(n):"";return x.length>0&&(g.CodeName=x),g.autoCompressPictures=!!(_&65536),g.backupFile=!!(_&64),g.checkCompatibility=!!(_&4096),g.date1904=!!(_&1),g.filterPrivacy=!!(_&8),g.hidePivotFieldList=!!(_&1024),g.promptedSolutions=!!(_&16),g.publishItems=!!(_&2048),g.refreshAllConnections=!!(_&262144),g.saveExternalLinkValues=!!(_&128),g.showBorderUnselectedTables=!!(_&4),g.showInkAnnotation=!!(_&32),g.showObjects=["all","placeholders","none"][_>>13&3],g.showPivotChartFilter=!!(_&32768),g.updateLinks=["userSet","never","always"][_>>8&3],g}function write_BrtWbProp(n,r){r||(r=new_buf(72));var g=0;return n&&(n.date1904&&(g|=1),n.filterPrivacy&&(g|=8)),r.write_shift(4,g),r.write_shift(4,0),write_XLSBCodeName(n&&n.CodeName||"ThisWorkbook",r),r.slice(0,r.l)}function parse_BrtFRTArchID$(n,r){var g={};return n.read_shift(4),g.ArchID=n.read_shift(4),n.l+=r-8,g}function parse_BrtName(n,r,g){var _=n.l+r,x=n.read_shift(4);n.l+=1;var S=n.read_shift(4),E=parse_XLNameWideString(n),C=parse_XLSBNameParsedFormula(n,0,g),T=parse_XLNullableWideString(n);x&32&&(E="_xlnm."+E),n.l=_;var R={Name:E,Ptg:C,Flags:x};return S<268435455&&(R.Sheet=S),T&&(R.Comment=T),R}function write_BrtName(n,r){var g=new_buf(9),_=0,x=n.Name;XLSLblBuiltIn.indexOf(x)>-1&&(_|=32,x=x.slice(6)),g.write_shift(4,_),g.write_shift(1,0),g.write_shift(4,n.Sheet==null?4294967295:n.Sheet);var S=[g,write_XLWideString(x),write_XLSBNameParsedFormula(n.Ref,r)];if(n.Comment)S.push(write_XLNullableWideString(n.Comment));else{var E=new_buf(4);E.write_shift(4,4294967295),S.push(E)}return bconcat(S)}function parse_wb_bin(n,r){var g={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},_=[],x=!1;r||(r={}),r.biff=12;var S=[],E=[[]];return E.SheetNames=[],E.XTI=[],XLSBRecordEnum[16]={n:"BrtFRTArchID$",f:parse_BrtFRTArchID$},recordhopper(n,function(T,R,A){switch(A){case 156:E.SheetNames.push(T.name),g.Sheets.push(T);break;case 153:g.WBProps=T;break;case 39:T.Sheet!=null&&(r.SID=T.Sheet),T.Ref=stringify_formula(T.Ptg,null,null,E,r),delete r.SID,delete T.Ptg,S.push(T);break;case 1036:break;case 357:case 358:case 355:case 667:E[0].length?E.push([A,T]):E[0]=[A,T],E[E.length-1].XTI=[];break;case 362:E.length===0&&(E[0]=[],E[0].XTI=[]),E[E.length-1].XTI=E[E.length-1].XTI.concat(T),E.XTI=E.XTI.concat(T);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:_.push(A),x=!0;break;case 36:_.pop(),x=!1;break;case 37:_.push(A),x=!0;break;case 38:_.pop(),x=!1;break;case 16:break;default:if(!R.T){if(!x||r.WTF&&_[_.length-1]!=37&&_[_.length-1]!=35)throw new Error("Unexpected record 0x"+A.toString(16))}}},r),parse_wb_defaults(g),g.Names=S,g.supbooks=E,g}function write_BUNDLESHS(n,r){write_record(n,143);for(var g=0;g!=r.SheetNames.length;++g){var _=r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[g]&&r.Workbook.Sheets[g].Hidden||0,x={Hidden:_,iTabID:g+1,strRelID:"rId"+(g+1),name:r.SheetNames[g]};write_record(n,156,write_BrtBundleSh(x))}write_record(n,144)}function write_BrtFileVersion(n,r){r||(r=new_buf(127));for(var g=0;g!=4;++g)r.write_shift(4,0);return write_XLWideString("SheetJS",r),write_XLWideString(XLSX.version,r),write_XLWideString(XLSX.version,r),write_XLWideString("7262",r),r.length>r.l?r.slice(0,r.l):r}function write_BrtBookView(n,r){r||(r=new_buf(29)),r.write_shift(-4,0),r.write_shift(-4,460),r.write_shift(4,28800),r.write_shift(4,17600),r.write_shift(4,500),r.write_shift(4,n),r.write_shift(4,n);var g=120;return r.write_shift(1,g),r.length>r.l?r.slice(0,r.l):r}function write_BOOKVIEWS(n,r){if(!(!r.Workbook||!r.Workbook.Sheets)){for(var g=r.Workbook.Sheets,_=0,x=-1,S=-1;_<g.length;++_)!g[_]||!g[_].Hidden&&x==-1?x=_:g[_].Hidden==1&&S==-1&&(S=_);S>x||(write_record(n,135),write_record(n,158,write_BrtBookView(x)),write_record(n,136))}}function write_BRTNAMES(n,r){!r.Workbook||!r.Workbook.Names||r.Workbook.Names.forEach(function(g){try{if(g.Flags&14)return;write_record(n,39,write_BrtName(g,r))}catch{console.error("Could not serialize defined name "+JSON.stringify(g))}})}function write_SELF_EXTERNS_xlsb(n){var r=n.SheetNames.length,g=new_buf(12*r+28);g.write_shift(4,r+2),g.write_shift(4,0),g.write_shift(4,-2),g.write_shift(4,-2),g.write_shift(4,0),g.write_shift(4,-1),g.write_shift(4,-1);for(var _=0;_<r;++_)g.write_shift(4,0),g.write_shift(4,_),g.write_shift(4,_);return g}function write_EXTERNALS_xlsb(n,r){write_record(n,353),write_record(n,357),write_record(n,362,write_SELF_EXTERNS_xlsb(r)),write_record(n,354)}function write_wb_bin(n,r){var g=buf_array();return write_record(g,131),write_record(g,128,write_BrtFileVersion()),write_record(g,153,write_BrtWbProp(n.Workbook&&n.Workbook.WBProps||null)),write_BOOKVIEWS(g,n),write_BUNDLESHS(g,n),write_EXTERNALS_xlsb(g,n),(n.Workbook||{}).Names&&write_BRTNAMES(g,n),write_record(g,132),g.end()}function parse_wb(n,r,g){return r.slice(-4)===".bin"?parse_wb_bin(n,g):parse_wb_xml(n,g)}function parse_ws(n,r,g,_,x,S,E,C){return r.slice(-4)===".bin"?parse_ws_bin(n,_,g,x,S,E,C):parse_ws_xml(n,_,g,x,S,E,C)}function parse_cs(n,r,g,_,x,S,E,C){return r.slice(-4)===".bin"?parse_cs_bin(n,_,g,x,S):parse_cs_xml(n,_,g,x,S)}function parse_ms(n,r,g,_,x,S,E,C){return r.slice(-4)===".bin"?parse_ms_bin():parse_ms_xml()}function parse_ds(n,r,g,_,x,S,E,C){return r.slice(-4)===".bin"?parse_ds_bin():parse_ds_xml()}function parse_sty(n,r,g,_){return r.slice(-4)===".bin"?parse_sty_bin(n,g,_):parse_sty_xml(n,g,_)}function parse_sst(n,r,g){return r.slice(-4)===".bin"?parse_sst_bin(n,g):parse_sst_xml(n,g)}function parse_cmnt(n,r,g){return r.slice(-4)===".bin"?parse_comments_bin(n,g):parse_comments_xml(n,g)}function parse_cc(n,r,g){return r.slice(-4)===".bin"?parse_cc_bin(n):parse_cc_xml(n)}function parse_xlink(n,r,g,_){return g.slice(-4)===".bin"?parse_xlink_bin(n,r,g,_):void 0}function parse_xlmeta(n,r,g){return r.slice(-4)===".bin"?parse_xlmeta_bin(n,r,g):parse_xlmeta_xml(n,r,g)}var attregexg2=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,attregex2=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xlml_parsexmltag(n,r){var g=n.split(/\s+/),_=[];if(_[0]=g[0],g.length===1)return _;var x=n.match(attregexg2),S,E,C,T;if(x)for(T=0;T!=x.length;++T)S=x[T].match(attregex2),(E=S[1].indexOf(":"))===-1?_[S[1]]=S[2].slice(1,S[2].length-1):(S[1].slice(0,6)==="xmlns:"?C="xmlns"+S[1].slice(6):C=S[1].slice(E+1),_[C]=S[2].slice(1,S[2].length-1));return _}function xlml_parsexmltagobj(n){var r=n.split(/\s+/),g={};if(r.length===1)return g;var _=n.match(attregexg2),x,S,E,C;if(_)for(C=0;C!=_.length;++C)x=_[C].match(attregex2),(S=x[1].indexOf(":"))===-1?g[x[1]]=x[2].slice(1,x[2].length-1):(x[1].slice(0,6)==="xmlns:"?E="xmlns"+x[1].slice(6):E=x[1].slice(S+1),g[E]=x[2].slice(1,x[2].length-1));return g}var XLMLFormatMap;function xlml_format(n,r){var g=XLMLFormatMap[n]||unescapexml(n);return g==="General"?SSF_general(r):SSF_format(g,r)}function xlml_set_custprop(n,r,g,_){var x=_;switch((g[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":x=parsexmlbool(_);break;case"i2":case"int":x=parseInt(_,10);break;case"r4":case"float":x=parseFloat(_);break;case"date":case"dateTime.tz":x=parseDate(_);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+g[0])}n[unescapexml(r)]=x}function safe_format_xlml(n,r,g){if(n.t!=="z"){if(!g||g.cellText!==!1)try{n.t==="e"?n.w=n.w||BErr[n.v]:r==="General"?n.t==="n"?(n.v|0)===n.v?n.w=n.v.toString(10):n.w=SSF_general_num(n.v):n.w=SSF_general(n.v):n.w=xlml_format(r||"General",n.v)}catch(S){if(g.WTF)throw S}try{var _=XLMLFormatMap[r]||r||"General";if(g.cellNF&&(n.z=_),g.cellDates&&n.t=="n"&&fmt_is_date(_)){var x=SSF_parse_date_code(n.v);x&&(n.t="d",n.v=new Date(x.y,x.m-1,x.d,x.H,x.M,x.S,x.u))}}catch(S){if(g.WTF)throw S}}}function process_style_xlml(n,r,g){if(g.cellStyles&&r.Interior){var _=r.Interior;_.Pattern&&(_.patternType=XLMLPatternTypeMap[_.Pattern]||_.Pattern)}n[r.ID]=r}function parse_xlml_data(n,r,g,_,x,S,E,C,T,R){var A="General",I=_.StyleID,B={};R=R||{};var D=[],N=0;for(I===void 0&&C&&(I=C.StyleID),I===void 0&&E&&(I=E.StyleID);S[I]!==void 0&&(S[I].nf&&(A=S[I].nf),S[I].Interior&&D.push(S[I].Interior),!!S[I].Parent);)I=S[I].Parent;switch(g.Type){case"Boolean":_.t="b",_.v=parsexmlbool(n);break;case"String":_.t="s",_.r=xlml_fixstr(unescapexml(n)),_.v=n.indexOf("<")>-1?unescapexml(r||n).replace(/<.*?>/g,""):_.r;break;case"DateTime":n.slice(-1)!="Z"&&(n+="Z"),_.v=(parseDate(n)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),_.v!==_.v?_.v=unescapexml(n):_.v<60&&(_.v=_.v-1),(!A||A=="General")&&(A="yyyy-mm-dd");case"Number":_.v===void 0&&(_.v=+n),_.t||(_.t="n");break;case"Error":_.t="e",_.v=RBErr[n],R.cellText!==!1&&(_.w=n);break;default:n==""&&r==""?_.t="z":(_.t="s",_.v=xlml_fixstr(r||n));break}if(safe_format_xlml(_,A,R),R.cellFormula!==!1)if(_.Formula){var M=unescapexml(_.Formula);M.charCodeAt(0)==61&&(M=M.slice(1)),_.f=rc_to_a1(M,x),delete _.Formula,_.ArrayRange=="RC"?_.F=rc_to_a1("RC:RC",x):_.ArrayRange&&(_.F=rc_to_a1(_.ArrayRange,x),T.push([safe_decode_range(_.F),_.F]))}else for(N=0;N<T.length;++N)x.r>=T[N][0].s.r&&x.r<=T[N][0].e.r&&x.c>=T[N][0].s.c&&x.c<=T[N][0].e.c&&(_.F=T[N][1]);R.cellStyles&&(D.forEach(function(O){!B.patternType&&O.patternType&&(B.patternType=O.patternType)}),_.s=B),_.StyleID!==void 0&&(_.ixfe=_.StyleID)}function xlml_prefix_dname(n){return XLSLblBuiltIn.indexOf("_xlnm."+n)>-1?"_xlnm."+n:n}function xlml_clean_comment(n){n.t=n.v||"",n.t=n.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),n.v=n.w=n.ixfe=void 0}function parse_xlml_xml(n,r){var g=r||{};make_ssf();var _=debom(xlml_normalize(n));(g.type=="binary"||g.type=="array"||g.type=="base64")&&(_=utf8read(_));var x=_.slice(0,1024).toLowerCase(),S=!1;if(x=x.replace(/".*?"/g,""),(x.indexOf(">")&1023)>Math.min(x.indexOf(",")&1023,x.indexOf(";")&1023)){var E=dup(g);return E.type="string",PRN.to_workbook(_,E)}if(x.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Le){x.indexOf("<"+Le)>=0&&(S=!0)}),S)return html_to_workbook(_,g);XLMLFormatMap={"General Number":"General","General Date":table_fmt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":table_fmt[15],"Short Date":table_fmt[14],"Long Time":table_fmt[19],"Medium Time":table_fmt[18],"Short Time":table_fmt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:table_fmt[2],Standard:table_fmt[4],Percent:table_fmt[10],Scientific:table_fmt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var C,T=[],R,A={},I=[],B={},D="";g.dense&&(B["!data"]=[]);var N={},M={},O=xlml_parsexmltag('<Data ss:Type="String">'),L=0,F=0,U=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},z={},W={},X="",ie=0,fe=[],xe={},we={},G=0,J=[],q=[],H={},ve=[],Z,ce=!1,ue=[],se=[],te={},Y=0,be=0,ye={Sheets:[],WBProps:{date1904:!1}},Ie={};xlmlregex.lastIndex=0,_=_.replace(/<!--([\s\S]*?)-->/mg,"");for(var ke="";C=xlmlregex.exec(_);)switch(C[3]=(ke=C[3]).toLowerCase()){case"data":if(ke=="data"){if(C[1]==="/"){if((R=T.pop())[0]!==C[3])throw new Error("Bad state: "+R.join("|"))}else C[0].charAt(C[0].length-2)!=="/"&&T.push([C[3],!0]);break}if(T[T.length-1][1])break;C[1]==="/"?parse_xlml_data(_.slice(L,C.index),X,O,T[T.length-1][0]=="comment"?H:N,{c:F,r:U},z,ve[F],M,ue,g):(X="",O=xlml_parsexmltag(C[0]),L=C.index+C[0].length);break;case"cell":if(C[1]==="/")if(q.length>0&&(N.c=q),(!g.sheetRows||g.sheetRows>U)&&N.v!==void 0&&(g.dense?(B["!data"][U]||(B["!data"][U]=[]),B["!data"][U][F]=N):B[encode_col(F)+encode_row(U)]=N),N.HRef&&(N.l={Target:unescapexml(N.HRef)},N.HRefScreenTip&&(N.l.Tooltip=N.HRefScreenTip),delete N.HRef,delete N.HRefScreenTip),(N.MergeAcross||N.MergeDown)&&(Y=F+(parseInt(N.MergeAcross,10)|0),be=U+(parseInt(N.MergeDown,10)|0),(Y>F||be>U)&&fe.push({s:{c:F,r:U},e:{c:Y,r:be}})),!g.sheetStubs)N.MergeAcross?F=Y+1:++F;else if(N.MergeAcross||N.MergeDown){for(var Ce=F;Ce<=Y;++Ce)for(var Ae=U;Ae<=be;++Ae)(Ce>F||Ae>U)&&(g.dense?(B["!data"][Ae]||(B["!data"][Ae]=[]),B["!data"][Ae][Ce]={t:"z"}):B[encode_col(Ce)+encode_row(Ae)]={t:"z"});F=Y+1}else++F;else N=xlml_parsexmltagobj(C[0]),N.Index&&(F=+N.Index-1),F<j.s.c&&(j.s.c=F),F>j.e.c&&(j.e.c=F),C[0].slice(-2)==="/>"&&++F,q=[];break;case"row":C[1]==="/"||C[0].slice(-2)==="/>"?(U<j.s.r&&(j.s.r=U),U>j.e.r&&(j.e.r=U),C[0].slice(-2)==="/>"&&(M=xlml_parsexmltag(C[0]),M.Index&&(U=+M.Index-1)),F=0,++U):(M=xlml_parsexmltag(C[0]),M.Index&&(U=+M.Index-1),te={},(M.AutoFitHeight=="0"||M.Height)&&(te.hpx=parseInt(M.Height,10),te.hpt=px2pt(te.hpx),se[U]=te),M.Hidden=="1"&&(te.hidden=!0,se[U]=te));break;case"worksheet":if(C[1]==="/"){if((R=T.pop())[0]!==C[3])throw new Error("Bad state: "+R.join("|"));I.push(D),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(B["!ref"]=encode_range(j),g.sheetRows&&g.sheetRows<=j.e.r&&(B["!fullref"]=B["!ref"],j.e.r=g.sheetRows-1,B["!ref"]=encode_range(j))),fe.length&&(B["!merges"]=fe),ve.length>0&&(B["!cols"]=ve),se.length>0&&(B["!rows"]=se),A[D]=B}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},U=F=0,T.push([C[3],!1]),R=xlml_parsexmltag(C[0]),D=unescapexml(R.Name),B={},g.dense&&(B["!data"]=[]),fe=[],ue=[],se=[],Ie={name:D,Hidden:0},ye.Sheets.push(Ie);break;case"table":if(C[1]==="/"){if((R=T.pop())[0]!==C[3])throw new Error("Bad state: "+R.join("|"))}else{if(C[0].slice(-2)=="/>")break;T.push([C[3],!1]),ve=[],ce=!1}break;case"style":C[1]==="/"?process_style_xlml(z,W,g):W=xlml_parsexmltag(C[0]);break;case"numberformat":W.nf=unescapexml(xlml_parsexmltag(C[0]).Format||"General"),XLMLFormatMap[W.nf]&&(W.nf=XLMLFormatMap[W.nf]);for(var Ne=0;Ne!=392&&table_fmt[Ne]!=W.nf;++Ne);if(Ne==392){for(Ne=57;Ne!=392;++Ne)if(table_fmt[Ne]==null){SSF__load(W.nf,Ne);break}}break;case"column":if(T[T.length-1][0]!=="table"||C[1]==="/")break;if(Z=xlml_parsexmltag(C[0]),Z.Hidden&&(Z.hidden=!0,delete Z.Hidden),Z.Width&&(Z.wpx=parseInt(Z.Width,10)),!ce&&Z.wpx>10){ce=!0,MDW=DEF_MDW;for(var We=0;We<ve.length;++We)ve[We]&&process_col(ve[We])}ce&&process_col(Z),ve[Z.Index-1||ve.length]=Z;for(var Be=0;Be<+Z.Span;++Be)ve[ve.length]=dup(Z);break;case"namedrange":if(C[1]==="/")break;ye.Names||(ye.Names=[]);var Se=parsexmltag(C[0]),$e={Name:xlml_prefix_dname(Se.Name),Ref:rc_to_a1(Se.RefersTo.slice(1),{r:0,c:0})};ye.Sheets.length>0&&($e.Sheet=ye.Sheets.length-1),ye.Names.push($e);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(C[0].slice(-2)==="/>")break;C[1]==="/"?X+=_.slice(ie,C.index):ie=C.index+C[0].length;break;case"interior":if(!g.cellStyles)break;W.Interior=xlml_parsexmltag(C[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(C[0].slice(-2)==="/>")break;C[1]==="/"?xlml_set_prop(xe,ke,_.slice(G,C.index)):G=C.index+C[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(C[1]==="/"){if((R=T.pop())[0]!==C[3])throw new Error("Bad state: "+R.join("|"))}else T.push([C[3],!1]);break;case"comment":if(C[1]==="/"){if((R=T.pop())[0]!==C[3])throw new Error("Bad state: "+R.join("|"));xlml_clean_comment(H),q.push(H)}else T.push([C[3],!1]),R=xlml_parsexmltag(C[0]),H={a:R.Author};break;case"autofilter":if(C[1]==="/"){if((R=T.pop())[0]!==C[3])throw new Error("Bad state: "+R.join("|"))}else if(C[0].charAt(C[0].length-2)!=="/"){var _e=xlml_parsexmltag(C[0]);B["!autofilter"]={ref:rc_to_a1(_e.Range).replace(/\$/g,"")},T.push([C[3],!0])}break;case"name":break;case"datavalidation":if(C[1]==="/"){if((R=T.pop())[0]!==C[3])throw new Error("Bad state: "+R.join("|"))}else C[0].charAt(C[0].length-2)!=="/"&&T.push([C[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(C[1]==="/"){if((R=T.pop())[0]!==C[3])throw new Error("Bad state: "+R.join("|"))}else C[0].charAt(C[0].length-2)!=="/"&&T.push([C[3],!0]);break;case"null":break;default:if(T.length==0&&C[3]=="document"||T.length==0&&C[3]=="uof")return parse_fods(_,g);var Oe=!0;switch(T[T.length-1][0]){case"officedocumentsettings":switch(C[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Oe=!1}break;case"componentoptions":switch(C[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Oe=!1}break;case"excelworkbook":switch(C[3]){case"date1904":ye.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Oe=!1}break;case"workbookoptions":switch(C[3]){case"owcversion":break;case"height":break;case"width":break;default:Oe=!1}break;case"worksheetoptions":switch(C[3]){case"visible":if(C[0].slice(-2)!=="/>")if(C[1]==="/")switch(_.slice(G,C.index)){case"SheetHidden":Ie.Hidden=1;break;case"SheetVeryHidden":Ie.Hidden=2;break}else G=C.index+C[0].length;break;case"header":B["!margins"]||default_margins(B["!margins"]={},"xlml"),isNaN(+parsexmltag(C[0]).Margin)||(B["!margins"].header=+parsexmltag(C[0]).Margin);break;case"footer":B["!margins"]||default_margins(B["!margins"]={},"xlml"),isNaN(+parsexmltag(C[0]).Margin)||(B["!margins"].footer=+parsexmltag(C[0]).Margin);break;case"pagemargins":var Ke=parsexmltag(C[0]);B["!margins"]||default_margins(B["!margins"]={},"xlml"),isNaN(+Ke.Top)||(B["!margins"].top=+Ke.Top),isNaN(+Ke.Left)||(B["!margins"].left=+Ke.Left),isNaN(+Ke.Right)||(B["!margins"].right=+Ke.Right),isNaN(+Ke.Bottom)||(B["!margins"].bottom=+Ke.Bottom);break;case"displayrighttoleft":ye.Views||(ye.Views=[]),ye.Views[0]||(ye.Views[0]={}),ye.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":B["!outline"]||(B["!outline"]={}),B["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":B["!outline"]||(B["!outline"]={}),B["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Oe=!1}break;case"pivottable":case"pivotcache":switch(C[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Oe=!1}break;case"pagebreaks":switch(C[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Oe=!1}break;case"autofilter":switch(C[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Oe=!1}break;case"querytable":switch(C[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Oe=!1}break;case"datavalidation":switch(C[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Oe=!1}break;case"sorting":case"conditionalformatting":switch(C[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Oe=!1}break;case"mapinfo":case"schema":case"data":switch(C[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Oe=!1}break;case"smarttags":break;default:Oe=!1;break}if(Oe||C[3].match(/!\[CDATA/))break;if(!T[T.length-1][1])throw"Unrecognized tag: "+C[3]+"|"+T.join("|");if(T[T.length-1][0]==="customdocumentproperties"){if(C[0].slice(-2)==="/>")break;C[1]==="/"?xlml_set_custprop(we,ke,J,_.slice(G,C.index)):(J=C,G=C.index+C[0].length);break}if(g.WTF)throw"Unrecognized tag: "+C[3]+"|"+T.join("|")}var Me={};return!g.bookSheets&&!g.bookProps&&(Me.Sheets=A),Me.SheetNames=I,Me.Workbook=ye,Me.SSF=dup(table_fmt),Me.Props=xe,Me.Custprops=we,Me.bookType="xlml",Me}function parse_xlml(n,r){switch(fix_read_opts(r=r||{}),r.type||"base64"){case"base64":return parse_xlml_xml(Base64_decode(n),r);case"binary":case"buffer":case"file":return parse_xlml_xml(n,r);case"array":return parse_xlml_xml(a2s(n),r)}}function write_props_xlml(n,r){var g=[];return n.Props&&g.push(xlml_write_docprops(n.Props,r)),n.Custprops&&g.push(xlml_write_custprops(n.Props,n.Custprops)),g.join("")}function write_wb_xlml(n){return(((n||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function write_sty_xlml(n,r){var g=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return r.cellXfs.forEach(function(_,x){var S=[];S.push(writextag("NumberFormat",null,{"ss:Format":escapexml(table_fmt[_.numFmtId])}));var E={"ss:ID":"s"+(21+x)};g.push(writextag("Style",S.join(""),E))}),writextag("Styles",g.join(""))}function write_name_xlml(n){return writextag("NamedRange",null,{"ss:Name":n.Name.slice(0,6)=="_xlnm."?n.Name.slice(6):n.Name,"ss:RefersTo":"="+a1_to_rc(n.Ref,{r:0,c:0})})}function write_names_xlml(n){if(!((n||{}).Workbook||{}).Names)return"";for(var r=n.Workbook.Names,g=[],_=0;_<r.length;++_){var x=r[_];x.Sheet==null&&(x.Name.match(/^_xlfn\./)||g.push(write_name_xlml(x)))}return writextag("Names",g.join(""))}function write_ws_xlml_names(n,r,g,_){if(!n||!((_||{}).Workbook||{}).Names)return"";for(var x=_.Workbook.Names,S=[],E=0;E<x.length;++E){var C=x[E];C.Sheet==g&&(C.Name.match(/^_xlfn\./)||S.push(write_name_xlml(C)))}return S.join("")}function write_ws_xlml_wsopts(n,r,g,_){if(!n)return"";var x=[];if(n["!margins"]&&(x.push("<PageSetup>"),n["!margins"].header&&x.push(writextag("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&x.push(writextag("Footer",null,{"x:Margin":n["!margins"].footer})),x.push(writextag("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),x.push("</PageSetup>")),_&&_.Workbook&&_.Workbook.Sheets&&_.Workbook.Sheets[g])if(_.Workbook.Sheets[g].Hidden)x.push(writextag("Visible",_.Workbook.Sheets[g].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var S=0;S<g&&!(_.Workbook.Sheets[S]&&!_.Workbook.Sheets[S].Hidden);++S);S==g&&x.push("<Selected/>")}return((((_||{}).Workbook||{}).Views||[])[0]||{}).RTL&&x.push("<DisplayRightToLeft/>"),n["!protect"]&&(x.push(writetag("ProtectContents","True")),n["!protect"].objects&&x.push(writetag("ProtectObjects","True")),n["!protect"].scenarios&&x.push(writetag("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?x.push(writetag("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&x.push(writetag("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(E){n["!protect"][E[0]]&&x.push("<"+E[1]+"/>")})),x.length==0?"":writextag("WorksheetOptions",x.join(""),{xmlns:XLMLNS.x})}function write_ws_xlml_comment(n){return n.map(function(r){var g=xlml_unfixstr(r.t||""),_=writextag("ss:Data",g,{xmlns:"http://www.w3.org/TR/REC-html40"});return writextag("Comment",_,{"ss:Author":r.a})}).join("")}function write_ws_xlml_cell(n,r,g,_,x,S,E){if(!n||n.v==null&&n.f==null)return"";var C={};if(n.f&&(C["ss:Formula"]="="+escapexml(a1_to_rc(n.f,E))),n.F&&n.F.slice(0,r.length)==r){var T=decode_cell(n.F.slice(r.length+1));C["ss:ArrayRange"]="RC:R"+(T.r==E.r?"":"["+(T.r-E.r)+"]")+"C"+(T.c==E.c?"":"["+(T.c-E.c)+"]")}if(n.l&&n.l.Target&&(C["ss:HRef"]=escapexml(n.l.Target),n.l.Tooltip&&(C["x:HRefScreenTip"]=escapexml(n.l.Tooltip))),g["!merges"])for(var R=g["!merges"],A=0;A!=R.length;++A)R[A].s.c!=E.c||R[A].s.r!=E.r||(R[A].e.c>R[A].s.c&&(C["ss:MergeAcross"]=R[A].e.c-R[A].s.c),R[A].e.r>R[A].s.r&&(C["ss:MergeDown"]=R[A].e.r-R[A].s.r));var I="",B="";switch(n.t){case"z":if(!_.sheetStubs)return"";break;case"n":I="Number",B=String(n.v);break;case"b":I="Boolean",B=n.v?"1":"0";break;case"e":I="Error",B=BErr[n.v];break;case"d":I="DateTime",B=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||table_fmt[14]);break;case"s":I="String",B=escapexlml(n.v||"");break}var D=get_cell_style(_.cellXfs,n,_);C["ss:StyleID"]="s"+(21+D),C["ss:Index"]=E.c+1;var N=n.v!=null?B:"",M=n.t=="z"?"":'<Data ss:Type="'+I+'">'+N+"</Data>";return(n.c||[]).length>0&&(M+=write_ws_xlml_comment(n.c)),writextag("Cell",M,C)}function write_ws_xlml_row(n,r){var g='<Row ss:Index="'+(n+1)+'"';return r&&(r.hpt&&!r.hpx&&(r.hpx=pt2px(r.hpt)),r.hpx&&(g+=' ss:AutoFitHeight="0" ss:Height="'+r.hpx+'"'),r.hidden&&(g+=' ss:Hidden="1"')),g+">"}function write_ws_xlml_table(n,r,g,_){if(!n["!ref"])return"";var x=safe_decode_range(n["!ref"]),S=n["!merges"]||[],E=0,C=[];n["!cols"]&&n["!cols"].forEach(function(O,L){process_col(O);var F=!!O.width,U=col_obj_w(L,O),j={"ss:Index":L+1};F&&(j["ss:Width"]=width2px(U.width)),O.hidden&&(j["ss:Hidden"]="1"),C.push(writextag("Column",null,j))});for(var T=n["!data"]!=null,R=x.s.r;R<=x.e.r;++R){for(var A=[write_ws_xlml_row(R,(n["!rows"]||[])[R])],I=x.s.c;I<=x.e.c;++I){var B=!1;for(E=0;E!=S.length;++E)if(!(S[E].s.c>I)&&!(S[E].s.r>R)&&!(S[E].e.c<I)&&!(S[E].e.r<R)){(S[E].s.c!=I||S[E].s.r!=R)&&(B=!0);break}if(!B){var D={r:R,c:I},N=encode_col(I)+encode_row(R),M=T?(n["!data"][R]||[])[I]:n[N];A.push(write_ws_xlml_cell(M,N,n,r,g,_,D))}}A.push("</Row>"),A.length>2&&C.push(A.join(""))}return C.join("")}function write_ws_xlml(n,r,g){var _=[],x=g.SheetNames[n],S=g.Sheets[x],E=S?write_ws_xlml_names(S,r,n,g):"";return E.length>0&&_.push("<Names>"+E+"</Names>"),E=S?write_ws_xlml_table(S,r,n,g):"",E.length>0&&_.push("<Table>"+E+"</Table>"),_.push(write_ws_xlml_wsopts(S,r,n,g)),S["!autofilter"]&&_.push('<AutoFilter x:Range="'+a1_to_rc(fix_range(S["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),_.join("")}function write_xlml(n,r){r||(r={}),n.SSF||(n.SSF=dup(table_fmt)),n.SSF&&(make_ssf(),SSF_load_table(n.SSF),r.revssf=evert_num(n.SSF),r.revssf[n.SSF[65535]]=0,r.ssf=n.SSF,r.cellXfs=[],get_cell_style(r.cellXfs,{},{revssf:{General:0}}));var g=[];g.push(write_props_xlml(n,r)),g.push(write_wb_xlml(n)),g.push(""),g.push("");for(var _=0;_<n.SheetNames.length;++_)g.push(writextag("Worksheet",write_ws_xlml(_,r,n),{"ss:Name":escapexml(n.SheetNames[_])}));return g[2]=write_sty_xlml(n,r),g[3]=write_names_xlml(n),XML_HEADER+writextag("Workbook",g.join(""),{xmlns:XLMLNS.ss,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:ss":XLMLNS.ss,"xmlns:dt":XLMLNS.dt,"xmlns:html":XLMLNS.html})}function parse_compobj(n){var r={},g=n.content;if(g.l=28,r.AnsiUserType=g.read_shift(0,"lpstr-ansi"),r.AnsiClipboardFormat=parse_ClipboardFormatOrAnsiString(g),g.length-g.l<=4)return r;var _=g.read_shift(4);if(_==0||_>40||(g.l-=4,r.Reserved1=g.read_shift(0,"lpstr-ansi"),g.length-g.l<=4)||(_=g.read_shift(4),_!==1907505652)||(r.UnicodeClipboardFormat=parse_ClipboardFormatOrUnicodeString(g),_=g.read_shift(4),_==0||_>40))return r;g.l-=4,r.Reserved2=g.read_shift(0,"lpwstr")}var CONTINUE_RT=[60,1084,2066,2165,2175];function slurp(n,r,g,_,x){var S=_,E=[],C=g.slice(g.l,g.l+S);if(x&&x.enc&&x.enc.insitu&&C.length>0)switch(n){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:x.enc.insitu(C)}E.push(C),g.l+=S;for(var T=__readUInt16LE(g,g.l),R=XLSRecordEnum[T],A=0;R!=null&&CONTINUE_RT.indexOf(T)>-1;)S=__readUInt16LE(g,g.l+2),A=g.l+4,T==2066?A+=4:(T==2165||T==2175)&&(A+=12),C=g.slice(A,g.l+4+S),E.push(C),g.l+=4+S,R=XLSRecordEnum[T=__readUInt16LE(g,g.l)];var I=bconcat(E);prep_blob(I,0);var B=0;I.lens=[];for(var D=0;D<E.length;++D)I.lens.push(B),B+=E[D].length;if(I.length<_)throw"XLS Record 0x"+n.toString(16)+" Truncated: "+I.length+" < "+_;return r.f(I,I.length,x)}function safe_format_xf(n,r,g){if(n.t!=="z"&&n.XF){var _=0;try{_=n.z||n.XF.numFmtId||0,r.cellNF&&(n.z=table_fmt[_])}catch(S){if(r.WTF)throw S}if(!r||r.cellText!==!1)try{n.t==="e"?n.w=n.w||BErr[n.v]:_===0||_=="General"?n.t==="n"?(n.v|0)===n.v?n.w=n.v.toString(10):n.w=SSF_general_num(n.v):n.w=SSF_general(n.v):n.w=SSF_format(_,n.v,{date1904:!!g,dateNF:r&&r.dateNF})}catch(S){if(r.WTF)throw S}if(r.cellDates&&_&&n.t=="n"&&fmt_is_date(table_fmt[_]||String(_))){var x=SSF_parse_date_code(n.v);x&&(n.t="d",n.v=new Date(x.y,x.m-1,x.d,x.H,x.M,x.S,x.u))}}}function make_cell(n,r,g){return{v:n,ixfe:r,t:g}}function parse_workbook(n,r){var g={opts:{}},_={},x={};r.dense&&(x["!data"]=[]);var S={},E={},C=null,T=[],R="",A={},I,B="",D,N,M,O,L={},F=[],U,j,z=[],W=[],X={Sheets:[],WBProps:{date1904:!1},Views:[{}]},ie={},fe=function(Ge){return Ge<8?XLSIcv[Ge]:Ge<64&&W[Ge-8]||XLSIcv[Ge]},xe=function(Ge,De,Ve){var Ze=De.XF.data;if(!(!Ze||!Ze.patternType||!Ve||!Ve.cellStyles)){De.s={},De.s.patternType=Ze.patternType;var _t;(_t=rgb2Hex(fe(Ze.icvFore)))&&(De.s.fgColor={rgb:_t}),(_t=rgb2Hex(fe(Ze.icvBack)))&&(De.s.bgColor={rgb:_t})}},we=function(Ge,De,Ve){if(!(te>1)&&!(Ve.sheetRows&&Ge.r>=Ve.sheetRows)){if(Ve.cellStyles&&De.XF&&De.XF.data&&xe(Ge,De,Ve),delete De.ixfe,delete De.XF,I=Ge,B=encode_cell(Ge),(!E||!E.s||!E.e)&&(E={s:{r:0,c:0},e:{r:0,c:0}}),Ge.r<E.s.r&&(E.s.r=Ge.r),Ge.c<E.s.c&&(E.s.c=Ge.c),Ge.r+1>E.e.r&&(E.e.r=Ge.r+1),Ge.c+1>E.e.c&&(E.e.c=Ge.c+1),Ve.cellFormula&&De.f){for(var Ze=0;Ze<F.length;++Ze)if(!(F[Ze][0].s.c>Ge.c||F[Ze][0].s.r>Ge.r)&&!(F[Ze][0].e.c<Ge.c||F[Ze][0].e.r<Ge.r)){De.F=encode_range(F[Ze][0]),(F[Ze][0].s.c!=Ge.c||F[Ze][0].s.r!=Ge.r)&&delete De.f,De.f&&(De.f=""+stringify_formula(F[Ze][1],E,Ge,ue,G));break}}Ve.dense?(x["!data"][Ge.r]||(x["!data"][Ge.r]=[]),x["!data"][Ge.r][Ge.c]=De):x[B]=De}},G={enc:!1,sbcch:0,snames:[],sharedf:L,arrayf:F,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!r&&!!r.cellStyles,WTF:!!r&&!!r.wtf};r.password&&(G.password=r.password);var J,q=[],H=[],ve=[],Z=[],ce=!1,ue=[];ue.SheetNames=G.snames,ue.sharedf=G.sharedf,ue.arrayf=G.arrayf,ue.names=[],ue.XTI=[];var se=0,te=0,Y=0,be=[],ye=[],Ie;G.codepage=1200,set_cp(1200);for(var ke=!1;n.l<n.length-1;){var Ce=n.l,Ae=n.read_shift(2);if(Ae===0&&se===10)break;var Ne=n.l===n.length?0:n.read_shift(2),We=XLSRecordEnum[Ae];if(te==0&&[9,521,1033,2057].indexOf(Ae)==-1)break;if(We&&We.f){if(r.bookSheets&&se===133&&Ae!==133)break;if(se=Ae,We.r===2||We.r==12){var Be=n.read_shift(2);if(Ne-=2,!G.enc&&Be!==Ae&&((Be&255)<<8|Be>>8)!==Ae)throw new Error("rt mismatch: "+Be+"!="+Ae);We.r==12&&(n.l+=10,Ne-=10)}var Se={};if(Ae===10?Se=We.f(n,Ne,G):Se=slurp(Ae,We,n,Ne,G),te==0&&[9,521,1033,2057].indexOf(se)===-1)continue;switch(Ae){case 34:g.opts.Date1904=X.WBProps.date1904=Se;break;case 134:g.opts.WriteProtect=!0;break;case 47:if(G.enc||(n.l=0),G.enc=Se,!r.password)throw new Error("File is password-protected");if(Se.valid==null)throw new Error("Encryption scheme unsupported");if(!Se.valid)throw new Error("Password is incorrect");break;case 92:G.lastuser=Se;break;case 66:var $e=Number(Se);switch($e){case 21010:$e=1200;break;case 32768:$e=1e4;break;case 32769:$e=1252;break}set_cp(G.codepage=$e),ke=!0;break;case 317:G.rrtabid=Se;break;case 25:G.winlocked=Se;break;case 439:g.opts.RefreshAll=Se;break;case 12:g.opts.CalcCount=Se;break;case 16:g.opts.CalcDelta=Se;break;case 17:g.opts.CalcIter=Se;break;case 13:g.opts.CalcMode=Se;break;case 14:g.opts.CalcPrecision=Se;break;case 95:g.opts.CalcSaveRecalc=Se;break;case 15:G.CalcRefMode=Se;break;case 2211:g.opts.FullCalc=Se;break;case 129:Se.fDialog&&(x["!type"]="dialog"),Se.fBelow||((x["!outline"]||(x["!outline"]={})).above=!0),Se.fRight||((x["!outline"]||(x["!outline"]={})).left=!0);break;case 224:z.push(Se);break;case 430:ue.push([Se]),ue[ue.length-1].XTI=[];break;case 35:case 547:ue[ue.length-1].push(Se);break;case 24:case 536:Ie={Name:Se.Name,Ref:stringify_formula(Se.rgce,E,null,ue,G)},Se.itab>0&&(Ie.Sheet=Se.itab-1),ue.names.push(Ie),ue[0]||(ue[0]=[],ue[0].XTI=[]),ue[ue.length-1].push(Se),Se.Name=="_xlnm._FilterDatabase"&&Se.itab>0&&Se.rgce&&Se.rgce[0]&&Se.rgce[0][0]&&Se.rgce[0][0][0]=="PtgArea3d"&&(ye[Se.itab-1]={ref:encode_range(Se.rgce[0][0][1][2])});break;case 22:G.ExternCount=Se;break;case 23:ue.length==0&&(ue[0]=[],ue[0].XTI=[]),ue[ue.length-1].XTI=ue[ue.length-1].XTI.concat(Se),ue.XTI=ue.XTI.concat(Se);break;case 2196:if(G.biff<8)break;Ie!=null&&(Ie.Comment=Se[1]);break;case 18:x["!protect"]=Se;break;case 19:Se!==0&&G.WTF&&console.error("Password verifier: "+Se);break;case 133:S[Se.pos]=Se,G.snames.push(Se.name);break;case 10:{if(--te)break;if(E.e){if(E.e.r>0&&E.e.c>0){if(E.e.r--,E.e.c--,x["!ref"]=encode_range(E),r.sheetRows&&r.sheetRows<=E.e.r){var _e=E.e.r;E.e.r=r.sheetRows-1,x["!fullref"]=x["!ref"],x["!ref"]=encode_range(E),E.e.r=_e}E.e.r++,E.e.c++}q.length>0&&(x["!merges"]=q),H.length>0&&(x["!objects"]=H),ve.length>0&&(x["!cols"]=ve),Z.length>0&&(x["!rows"]=Z),X.Sheets.push(ie)}R===""?A=x:_[R]=x,x={},r.dense&&(x["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(G.biff===8&&(G.biff={9:2,521:3,1033:4}[Ae]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[Se.BIFFVer]||8),G.biffguess=Se.BIFFVer==0,Se.BIFFVer==0&&Se.dt==4096&&(G.biff=5,ke=!0,set_cp(G.codepage=28591)),G.biff==8&&Se.BIFFVer==0&&Se.dt==16&&(G.biff=2),te++)break;if(x={},r.dense&&(x["!data"]=[]),G.biff<8&&!ke&&(ke=!0,set_cp(G.codepage=r.codepage||1252)),G.biff<5||Se.BIFFVer==0&&Se.dt==4096){R===""&&(R="Sheet1"),E={s:{r:0,c:0},e:{r:0,c:0}};var Oe={pos:n.l-Ne,name:R};S[Oe.pos]=Oe,G.snames.push(R)}else R=(S[Ce]||{name:""}).name;Se.dt==32&&(x["!type"]="chart"),Se.dt==64&&(x["!type"]="macro"),q=[],H=[],G.arrayf=F=[],ve=[],Z=[],ce=!1,ie={Hidden:(S[Ce]||{hs:0}).hs,name:R}}break;case 515:case 3:case 2:x["!type"]=="chart"&&(r.dense?(x["!data"][Se.r]||[])[Se.c]:x[encode_col(Se.c)+encode_row(Se.r)])&&++Se.c,U={ixfe:Se.ixfe,XF:z[Se.ixfe]||{},v:Se.val,t:"n"},Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we({c:Se.c,r:Se.r},U,r);break;case 5:case 517:U={ixfe:Se.ixfe,XF:z[Se.ixfe],v:Se.val,t:Se.t},Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we({c:Se.c,r:Se.r},U,r);break;case 638:U={ixfe:Se.ixfe,XF:z[Se.ixfe],v:Se.rknum,t:"n"},Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we({c:Se.c,r:Se.r},U,r);break;case 189:for(var Ke=Se.c;Ke<=Se.C;++Ke){var Me=Se.rkrec[Ke-Se.c][0];U={ixfe:Me,XF:z[Me],v:Se.rkrec[Ke-Se.c][1],t:"n"},Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we({c:Ke,r:Se.r},U,r)}break;case 6:case 518:case 1030:{if(Se.val=="String"){C=Se;break}if(U=make_cell(Se.val,Se.cell.ixfe,Se.tt),U.XF=z[U.ixfe],r.cellFormula){var Le=Se.formula;if(Le&&Le[0]&&Le[0][0]&&Le[0][0][0]=="PtgExp"){var ze=Le[0][0][1][0],Je=Le[0][0][1][1],Qe=encode_cell({r:ze,c:Je});L[Qe]?U.f=""+stringify_formula(Se.formula,E,Se.cell,ue,G):U.F=((r.dense?(x["!data"][ze]||[])[Je]:x[Qe])||{}).F}else U.f=""+stringify_formula(Se.formula,E,Se.cell,ue,G)}Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we(Se.cell,U,r),C=Se}break;case 7:case 519:if(C)C.val=Se,U=make_cell(Se,C.cell.ixfe,"s"),U.XF=z[U.ixfe],r.cellFormula&&(U.f=""+stringify_formula(C.formula,E,C.cell,ue,G)),Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we(C.cell,U,r),C=null;else throw new Error("String record expects Formula");break;case 33:case 545:{F.push(Se);var rt=encode_cell(Se[0].s);if(D=r.dense?(x["!data"][Se[0].s.r]||[])[Se[0].s.c]:x[rt],r.cellFormula&&D){if(!C||!rt||!D)break;D.f=""+stringify_formula(Se[1],E,Se[0],ue,G),D.F=encode_range(Se[0])}}break;case 1212:{if(!r.cellFormula)break;if(B){if(!C)break;L[encode_cell(C.cell)]=Se[0],D=r.dense?(x["!data"][C.cell.r]||[])[C.cell.c]:x[encode_cell(C.cell)],(D||{}).f=""+stringify_formula(Se[0],E,I,ue,G)}}break;case 253:U=make_cell(T[Se.isst].t,Se.ixfe,"s"),T[Se.isst].h&&(U.h=T[Se.isst].h),U.XF=z[U.ixfe],Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we({c:Se.c,r:Se.r},U,r);break;case 513:r.sheetStubs&&(U={ixfe:Se.ixfe,XF:z[Se.ixfe],t:"z"},Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we({c:Se.c,r:Se.r},U,r));break;case 190:if(r.sheetStubs)for(var wt=Se.c;wt<=Se.C;++wt){var bt=Se.ixfe[wt-Se.c];U={ixfe:bt,XF:z[bt],t:"z"},Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we({c:wt,r:Se.r},U,r)}break;case 214:case 516:case 4:U=make_cell(Se.val,Se.ixfe,"s"),U.XF=z[U.ixfe],Y>0&&(U.z=be[U.ixfe>>8&63]),safe_format_xf(U,r,g.opts.Date1904),we({c:Se.c,r:Se.r},U,r);break;case 0:case 512:te===1&&(E=Se);break;case 252:T=Se;break;case 1054:if(G.biff==4){be[Y++]=Se[1];for(var xt=0;xt<Y+163&&table_fmt[xt]!=Se[1];++xt);xt>=163&&SSF__load(Se[1],Y+163)}else SSF__load(Se[1],Se[0]);break;case 30:{be[Y++]=Se;for(var Et=0;Et<Y+163&&table_fmt[Et]!=Se;++Et);Et>=163&&SSF__load(Se,Y+163)}break;case 229:q=q.concat(Se);break;case 93:H[Se.cmo[0]]=G.lastobj=Se;break;case 438:G.lastobj.TxO=Se;break;case 127:G.lastobj.ImData=Se;break;case 440:for(O=Se[0].s.r;O<=Se[0].e.r;++O)for(M=Se[0].s.c;M<=Se[0].e.c;++M)D=r.dense?(x["!data"][O]||[])[M]:x[encode_cell({c:M,r:O})],D&&(D.l=Se[1]);break;case 2048:for(O=Se[0].s.r;O<=Se[0].e.r;++O)for(M=Se[0].s.c;M<=Se[0].e.c;++M)D=r.dense?(x["!data"][O]||[])[M]:x[encode_cell({c:M,r:O})],D&&D.l&&(D.l.Tooltip=Se[1]);break;case 28:{if(G.biff<=5&&G.biff>=2)break;D=r.dense?(x["!data"][Se[0].r]||[])[Se[0].c]:x[encode_cell(Se[0])];var Rt=H[Se[2]];D||(r.dense?(x["!data"][Se[0].r]||(x["!data"][Se[0].r]=[]),D=x["!data"][Se[0].r][Se[0].c]={t:"z"}):D=x[encode_cell(Se[0])]={t:"z"},E.e.r=Math.max(E.e.r,Se[0].r),E.s.r=Math.min(E.s.r,Se[0].r),E.e.c=Math.max(E.e.c,Se[0].c),E.s.c=Math.min(E.s.c,Se[0].c)),D.c||(D.c=[]),N={a:Se[1],t:Rt.TxO.t},D.c.push(N)}break;case 2173:update_xfext(z[Se.ixfe],Se.ext);break;case 125:{if(!G.cellStyles)break;for(;Se.e>=Se.s;)ve[Se.e--]={width:Se.w/256,level:Se.level||0,hidden:!!(Se.flags&1)},ce||(ce=!0,find_mdw_colw(Se.w/256)),process_col(ve[Se.e+1])}break;case 520:{var $t={};Se.level!=null&&(Z[Se.r]=$t,$t.level=Se.level),Se.hidden&&(Z[Se.r]=$t,$t.hidden=!0),Se.hpt&&(Z[Se.r]=$t,$t.hpt=Se.hpt,$t.hpx=pt2px(Se.hpt))}break;case 38:case 39:case 40:case 41:x["!margins"]||default_margins(x["!margins"]={}),x["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Ae]]=Se;break;case 161:x["!margins"]||default_margins(x["!margins"]={}),x["!margins"].header=Se.header,x["!margins"].footer=Se.footer;break;case 574:Se.RTL&&(X.Views[0].RTL=!0);break;case 146:W=Se;break;case 2198:J=Se;break;case 140:j=Se;break;case 442:R?ie.CodeName=Se||ie.name:X.WBProps.CodeName=Se||"ThisWorkbook";break}}else We||console.error("Missing Info for XLS Record 0x"+Ae.toString(16)),n.l+=Ne}return g.SheetNames=keys$2(S).sort(function(qt,Ge){return Number(qt)-Number(Ge)}).map(function(qt){return S[qt].name}),r.bookSheets||(g.Sheets=_),!g.SheetNames.length&&A["!ref"]?(g.SheetNames.push("Sheet1"),g.Sheets&&(g.Sheets.Sheet1=A)):g.Preamble=A,g.Sheets&&ye.forEach(function(qt,Ge){g.Sheets[g.SheetNames[Ge]]["!autofilter"]=qt}),g.Strings=T,g.SSF=dup(table_fmt),G.enc&&(g.Encryption=G.enc),J&&(g.Themes=J),g.Metadata={},j!==void 0&&(g.Metadata.Country=j),ue.names.length>0&&(X.Names=ue.names),g.Workbook=X,g}var PSCLSID={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function parse_xls_props(n,r,g){var _=CFB.find(n,"/!DocumentSummaryInformation");if(_&&_.size>0)try{var x=parse_PropertySetStream(_,DocSummaryPIDDSI,PSCLSID.DSI);for(var S in x)r[S]=x[S]}catch(R){if(g.WTF)throw R}var E=CFB.find(n,"/!SummaryInformation");if(E&&E.size>0)try{var C=parse_PropertySetStream(E,SummaryPIDSI,PSCLSID.SI);for(var T in C)r[T]==null&&(r[T]=C[T])}catch(R){if(g.WTF)throw R}r.HeadingPairs&&r.TitlesOfParts&&(load_props_pairs(r.HeadingPairs,r.TitlesOfParts,r,g),delete r.HeadingPairs,delete r.TitlesOfParts)}function write_xls_props(n,r){var g=[],_=[],x=[],S=0,E,C=evert_key(DocSummaryPIDDSI,"n"),T=evert_key(SummaryPIDSI,"n");if(n.Props)for(E=keys$2(n.Props),S=0;S<E.length;++S)(Object.prototype.hasOwnProperty.call(C,E[S])?g:Object.prototype.hasOwnProperty.call(T,E[S])?_:x).push([E[S],n.Props[E[S]]]);if(n.Custprops)for(E=keys$2(n.Custprops),S=0;S<E.length;++S)Object.prototype.hasOwnProperty.call(n.Props||{},E[S])||(Object.prototype.hasOwnProperty.call(C,E[S])?g:Object.prototype.hasOwnProperty.call(T,E[S])?_:x).push([E[S],n.Custprops[E[S]]]);var R=[];for(S=0;S<x.length;++S)XLSPSSkip.indexOf(x[S][0])>-1||PseudoPropsPairs.indexOf(x[S][0])>-1||x[S][1]!=null&&R.push(x[S]);_.length&&CFB.utils.cfb_add(r,"/SummaryInformation",write_PropertySetStream(_,PSCLSID.SI,T,SummaryPIDSI)),(g.length||R.length)&&CFB.utils.cfb_add(r,"/DocumentSummaryInformation",write_PropertySetStream(g,PSCLSID.DSI,C,DocSummaryPIDDSI,R.length?R:null,PSCLSID.UDI))}function parse_xlscfb(n,r){r||(r={}),fix_read_opts(r),reset_cp(),r.codepage&&set_ansi(r.codepage);var g,_;if(n.FullPaths){if(CFB.find(n,"/encryption"))throw new Error("File is password-protected");g=CFB.find(n,"!CompObj"),_=CFB.find(n,"/Workbook")||CFB.find(n,"/Book")}else{switch(r.type){case"base64":n=s2a(Base64_decode(n));break;case"binary":n=s2a(n);break;case"buffer":break;case"array":Array.isArray(n)||(n=Array.prototype.slice.call(n));break}prep_blob(n,0),_={content:n}}var x,S;if(g&&parse_compobj(g),r.bookProps&&!r.bookSheets)x={};else{var E=has_buf?"buffer":"array";if(_&&_.content)x=parse_workbook(_.content,r);else if((S=CFB.find(n,"PerfectOffice_MAIN"))&&S.content)x=WK_.to_workbook(S.content,(r.type=E,r));else if((S=CFB.find(n,"NativeContent_MAIN"))&&S.content)x=WK_.to_workbook(S.content,(r.type=E,r));else throw(S=CFB.find(n,"MN0"))&&S.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");r.bookVBA&&n.FullPaths&&CFB.find(n,"/_VBA_PROJECT_CUR/VBA/dir")&&(x.vbaraw=make_vba_xls(n))}var C={};return n.FullPaths&&parse_xls_props(n,C,r),x.Props=x.Custprops=C,r.bookFiles&&(x.cfb=n),x}function write_xlscfb(n,r){var g=r||{},_=CFB.utils.cfb_new({root:"R"}),x="/Workbook";switch(g.bookType||"xls"){case"xls":g.bookType="biff8";case"xla":g.bookType||(g.bookType="xla");case"biff8":x="/Workbook",g.biff=8;break;case"biff5":x="/Book",g.biff=5;break;default:throw new Error("invalid type "+g.bookType+" for XLS CFB")}return CFB.utils.cfb_add(_,x,write_biff_buf(n,g)),g.biff==8&&(n.Props||n.Custprops)&&write_xls_props(n,_),g.biff==8&&n.vbaraw&&fill_vba_xls(_,CFB.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),_}var XLSBRecordEnum={0:{f:parse_BrtRowHdr},1:{f:parse_BrtCellBlank},2:{f:parse_BrtCellRk},3:{f:parse_BrtCellError},4:{f:parse_BrtCellBool},5:{f:parse_BrtCellReal},6:{f:parse_BrtCellSt},7:{f:parse_BrtCellIsst},8:{f:parse_BrtFmlaString},9:{f:parse_BrtFmlaNum},10:{f:parse_BrtFmlaBool},11:{f:parse_BrtFmlaError},12:{f:parse_BrtShortBlank},13:{f:parse_BrtShortRk},14:{f:parse_BrtShortError},15:{f:parse_BrtShortBool},16:{f:parse_BrtShortReal},17:{f:parse_BrtShortSt},18:{f:parse_BrtShortIsst},19:{f:parse_RichStr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:parse_BrtName},40:{},42:{},43:{f:parse_BrtFont},44:{f:parse_BrtFmt},45:{f:parse_BrtFill},46:{f:parse_BrtBorder},47:{f:parse_BrtXF},48:{},49:{f:parse_Int32LE},50:{},51:{f:parse_BrtMdb},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:parse_ColInfo},62:{f:parse_BrtCellRString},63:{f:parse_BrtCalcChainItem$},64:{f:parse_BrtDVal},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:parsenoop,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:parse_BrtBeginWsView},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:parse_BrtWsProp},148:{f:parse_BrtWsDim,p:16},151:{f:parse_BrtPane},152:{},153:{f:parse_BrtWbProp},154:{},155:{},156:{f:parse_BrtBundleSh},157:{},158:{},159:{T:1,f:parse_BrtBeginSst},160:{T:-1},161:{T:1,f:parse_UncheckedRfX},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:parse_BrtMergeCell},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:parse_BrtMdtinfo},336:{T:-1},337:{f:parse_BrtBeginEsmdb,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:parse_RelID},357:{},358:{},359:{},360:{T:1},361:{},362:{f:parse_ExternSheet},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:parse_BrtArrFmla},427:{f:parse_BrtShrFmla},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:parse_BrtMargins},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:parse_BrtWsFmtInfo},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:parse_BrtHLink},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:parse_RelID},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:parse_BrtCommentAuthor},633:{T:1},634:{T:-1},635:{T:1,f:parse_BrtBeginComment},636:{T:-1},637:{f:parse_BrtCommentText},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:parse_BrtCsProp},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:parse_BrtDVal14},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},XLSRecordEnum={6:{f:parse_Formula},10:{f:parsenoop2},12:{f:parseuint16},13:{f:parseuint16},14:{f:parsebool},15:{f:parsebool},16:{f:parse_Xnum},17:{f:parsebool},18:{f:parsebool},19:{f:parseuint16},20:{f:parse_XLHeaderFooter},21:{f:parse_XLHeaderFooter},23:{f:parse_ExternSheet},24:{f:parse_Lbl},25:{f:parsebool},26:{},27:{},28:{f:parse_Note},29:{},34:{f:parsebool},35:{f:parse_ExternName},38:{f:parse_Xnum},39:{f:parse_Xnum},40:{f:parse_Xnum},41:{f:parse_Xnum},42:{f:parsebool},43:{f:parsebool},47:{f:parse_FilePass},49:{f:parse_Font},51:{f:parseuint16},60:{},61:{f:parse_Window1},64:{f:parsebool},65:{f:parse_Pane},66:{f:parseuint16},77:{},80:{},81:{},82:{},85:{f:parseuint16},89:{},90:{},91:{},92:{f:parse_WriteAccess},93:{f:parse_Obj},94:{},95:{f:parsebool},96:{},97:{},99:{f:parsebool},125:{f:parse_ColInfo},128:{f:parse_Guts},129:{f:parse_WsBool},130:{f:parseuint16},131:{f:parsebool},132:{f:parsebool},133:{f:parse_BoundSheet8},134:{},140:{f:parse_Country},141:{f:parseuint16},144:{},146:{f:parse_Palette},151:{},152:{},153:{},154:{},155:{},156:{f:parseuint16},157:{},158:{},160:{f:parse_Scl},161:{f:parse_Setup},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:parse_MulRk},190:{f:parse_MulBlank},193:{f:parsenoop2},197:{},198:{},199:{},200:{},201:{},202:{f:parsebool},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:parseuint16},220:{},221:{f:parsebool},222:{},224:{f:parse_XF},225:{f:parse_InterfaceHdr},226:{f:parsenoop2},227:{},229:{f:parse_MergeCells},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:parse_SST},253:{f:parse_LabelSst},255:{f:parse_ExtSST},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:parseuint16a},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:parsebool},353:{f:parsenoop2},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:parse_SupBook},431:{f:parsebool},432:{},433:{},434:{},437:{},438:{f:parse_TxO},439:{f:parsebool},440:{f:parse_HLink},441:{},442:{f:parse_XLUnicodeString},443:{},444:{f:parseuint16},445:{},446:{},448:{f:parsenoop2},449:{f:parse_RecalcId,r:2},450:{f:parsenoop2},512:{f:parse_Dimensions},513:{f:parse_Blank},515:{f:parse_Number},516:{f:parse_Label},517:{f:parse_BoolErr},519:{f:parse_String},520:{f:parse_Row},523:{},545:{f:parse_Array},549:{f:parse_DefaultRowHeight},566:{},574:{f:parse_Window2},638:{f:parse_RK},659:{},1048:{},1054:{f:parse_Format},1084:{},1212:{f:parse_ShrFmla},2048:{f:parse_HLinkTooltip},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:parse_BOF},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:parsenoop2},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:parse_XFCRC,r:12},2173:{f:parse_XFExt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:parsebool,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:parse_NameCmt,r:12},2197:{},2198:{f:parse_Theme,r:12},2199:{},2200:{},2201:{},2202:{f:parse_MTRSettings,r:12},2203:{f:parsenoop2},2204:{},2205:{},2206:{},2207:{},2211:{f:parse_ForceFullCalculation},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:parseuint16},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:parse_ShtProps},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:parse_ClrtClient},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:parse_Dimensions},1:{},2:{f:parse_BIFF2INT},3:{f:parse_BIFF2NUM},4:{f:parse_BIFF2STR},5:{f:parse_BoolErr},7:{f:parse_BIFF2STRING},8:{},9:{f:parse_BOF},11:{},22:{f:parseuint16},30:{f:parse_BIFF2Format},31:{},32:{},33:{f:parse_Array},36:{},37:{f:parse_DefaultRowHeight},50:{f:parse_BIFF2FONTXTRA},62:{},52:{},67:{},68:{f:parseuint16},69:{},86:{},126:{},127:{f:parse_ImData},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:parse_RString},223:{},234:{},354:{},421:{},518:{f:parse_Formula},521:{f:parse_BOF},536:{f:parse_Lbl},547:{f:parse_ExternName},561:{},579:{},1030:{f:parse_Formula},1033:{f:parse_BOF},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function write_biff_rec(n,r,g,_){var x=r;if(!isNaN(x)){var S=_||(g||[]).length||0,E=n.next(4);E.write_shift(2,x),E.write_shift(2,S),S>0&&is_buf(g)&&n.push(g)}}function write_biff_continue(n,r,g,_){var x=(g||[]).length||0;if(x<=8224)return write_biff_rec(n,r,g,x);var S=r;if(!isNaN(S)){for(var E=g.parts||[],C=0,T=0,R=0;R+(E[C]||8224)<=8224;)R+=E[C]||8224,C++;var A=n.next(4);for(A.write_shift(2,S),A.write_shift(2,R),n.push(g.slice(T,T+R)),T+=R;T<x;){for(A=n.next(4),A.write_shift(2,60),R=0;R+(E[C]||8224)<=8224;)R+=E[C]||8224,C++;A.write_shift(2,R),n.push(g.slice(T,T+R)),T+=R}}}function write_BIFF2Cell(n,r,g){return n||(n=new_buf(7)),n.write_shift(2,r),n.write_shift(2,g),n.write_shift(2,0),n.write_shift(1,0),n}function write_BIFF2BERR(n,r,g,_){var x=new_buf(9);return write_BIFF2Cell(x,n,r),write_Bes(g,_||"b",x),x}function write_BIFF2LABEL(n,r,g){var _=new_buf(8+2*g.length);return write_BIFF2Cell(_,n,r),_.write_shift(1,g.length),_.write_shift(g.length,g,"sbcs"),_.l<_.length?_.slice(0,_.l):_}function write_ws_biff2_cell(n,r,g,_){if(r.v!=null)switch(r.t){case"d":case"n":var x=r.t=="d"?datenum(parseDate(r.v)):r.v;x==(x|0)&&x>=0&&x<65536?write_biff_rec(n,2,write_BIFF2INT(g,_,x)):write_biff_rec(n,3,write_BIFF2NUM(g,_,x));return;case"b":case"e":write_biff_rec(n,5,write_BIFF2BERR(g,_,r.v,r.t));return;case"s":case"str":write_biff_rec(n,4,write_BIFF2LABEL(g,_,r.v==null?"":String(r.v).slice(0,255)));return}write_biff_rec(n,1,write_BIFF2Cell(null,g,_))}function write_ws_biff2(n,r,g,_){var x=r["!data"]!=null,S=safe_decode_range(r["!ref"]||"A1"),E="",C=[];if(S.e.c>255||S.e.r>16383){if(_.WTF)throw new Error("Range "+(r["!ref"]||"A1")+" exceeds format limit A1:IV16384");S.e.c=Math.min(S.e.c,255),S.e.r=Math.min(S.e.c,16383)}for(var T=[],R=S.s.c;R<=S.e.c;++R)C[R]=encode_col(R);for(var A=S.s.r;A<=S.e.r;++A)for(x&&(T=r["!data"][A]||[]),E=encode_row(A),R=S.s.c;R<=S.e.c;++R){var I=x?T[R]:r[C[R]+E];I&&write_ws_biff2_cell(n,I,A,R)}}function write_biff2_buf(n,r){for(var g=r||{},_=buf_array(),x=0,S=0;S<n.SheetNames.length;++S)n.SheetNames[S]==g.sheet&&(x=S);if(x==0&&g.sheet&&n.SheetNames[0]!=g.sheet)throw new Error("Sheet not found: "+g.sheet);return write_biff_rec(_,g.biff==4?1033:g.biff==3?521:9,write_BOF(n,16,g)),write_ws_biff2(_,n.Sheets[n.SheetNames[x]],x,g),write_biff_rec(_,10),_.end()}function write_FONTS_biff8(n,r,g){write_biff_rec(n,49,write_Font({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},g))}function write_FMTS_biff8(n,r,g){r&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(_){for(var x=_[0];x<=_[1];++x)r[x]!=null&&write_biff_rec(n,1054,write_Format(x,r[x],g))})}function write_FEAT(n,r){var g=new_buf(19);g.write_shift(4,2151),g.write_shift(4,0),g.write_shift(4,0),g.write_shift(2,3),g.write_shift(1,1),g.write_shift(4,0),write_biff_rec(n,2151,g),g=new_buf(39),g.write_shift(4,2152),g.write_shift(4,0),g.write_shift(4,0),g.write_shift(2,3),g.write_shift(1,0),g.write_shift(4,0),g.write_shift(2,1),g.write_shift(4,4),g.write_shift(2,0),write_Ref8U(safe_decode_range(r["!ref"]||"A1"),g),g.write_shift(4,4),write_biff_rec(n,2152,g)}function write_CELLXFS_biff8(n,r){for(var g=0;g<16;++g)write_biff_rec(n,224,write_XF({numFmtId:0,style:!0},0,r));r.cellXfs.forEach(function(_){write_biff_rec(n,224,write_XF(_,0,r))})}function write_ws_biff8_hlinks(n,r){for(var g=0;g<r["!links"].length;++g){var _=r["!links"][g];write_biff_rec(n,440,write_HLink(_)),_[1].Tooltip&&write_biff_rec(n,2048,write_HLinkTooltip(_))}delete r["!links"]}function write_ws_cols_biff8(n,r){if(r){var g=0;r.forEach(function(_,x){++g<=256&&_&&write_biff_rec(n,125,write_ColInfo(col_obj_w(x,_),x))})}}function write_ws_biff8_cell(n,r,g,_,x){var S=16+get_cell_style(x.cellXfs,r,x);if(r.v==null&&!r.bf){write_biff_rec(n,513,write_XLSCell(g,_,S));return}if(r.bf)write_biff_rec(n,6,write_Formula(r,g,_,x,S));else switch(r.t){case"d":case"n":var E=r.t=="d"?datenum(parseDate(r.v)):r.v;write_biff_rec(n,515,write_Number(g,_,E,S));break;case"b":case"e":write_biff_rec(n,517,write_BoolErr(g,_,r.v,S,x,r.t));break;case"s":case"str":if(x.bookSST){var C=get_sst_id(x.Strings,r.v==null?"":String(r.v),x.revStrings);write_biff_rec(n,253,write_LabelSst(g,_,C,S))}else write_biff_rec(n,516,write_Label(g,_,(r.v==null?"":String(r.v)).slice(0,255),S,x));break;default:write_biff_rec(n,513,write_XLSCell(g,_,S))}}function write_ws_biff8(n,r,g){var _=buf_array(),x=g.SheetNames[n],S=g.Sheets[x]||{},E=(g||{}).Workbook||{},C=(E.Sheets||[])[n]||{},T=S["!data"]!=null,R=r.biff==8,A,I="",B=[],D=safe_decode_range(S["!ref"]||"A1"),N=R?65536:16384;if(D.e.c>255||D.e.r>=N){if(r.WTF)throw new Error("Range "+(S["!ref"]||"A1")+" exceeds format limit A1:IV16384");D.e.c=Math.min(D.e.c,255),D.e.r=Math.min(D.e.c,N-1)}write_biff_rec(_,2057,write_BOF(g,16,r)),write_biff_rec(_,13,writeuint16(1)),write_biff_rec(_,12,writeuint16(100)),write_biff_rec(_,15,writebool(!0)),write_biff_rec(_,17,writebool(!1)),write_biff_rec(_,16,write_Xnum(.001)),write_biff_rec(_,95,writebool(!0)),write_biff_rec(_,42,writebool(!1)),write_biff_rec(_,43,writebool(!1)),write_biff_rec(_,130,writeuint16(1)),write_biff_rec(_,128,write_Guts()),write_biff_rec(_,131,writebool(!1)),write_biff_rec(_,132,writebool(!1)),R&&write_ws_cols_biff8(_,S["!cols"]),write_biff_rec(_,512,write_Dimensions(D,r)),R&&(S["!links"]=[]);for(var M=[],O=[],L=D.s.c;L<=D.e.c;++L)B[L]=encode_col(L);for(var F=D.s.r;F<=D.e.r;++F)for(T&&(O=S["!data"][F]||[]),I=encode_row(F),L=D.s.c;L<=D.e.c;++L){A=B[L]+I;var U=T?O[L]:S[A];U&&(write_ws_biff8_cell(_,U,F,L,r),R&&U.l&&S["!links"].push([A,U.l]),R&&U.c&&M.push([A,U.c]))}var j=C.CodeName||C.name||x;return R&&write_biff_rec(_,574,write_Window2((E.Views||[])[0])),R&&(S["!merges"]||[]).length&&write_biff_rec(_,229,write_MergeCells(S["!merges"])),R&&write_ws_biff8_hlinks(_,S),write_biff_rec(_,442,write_XLUnicodeString(j)),R&&write_FEAT(_,S),write_biff_rec(_,10),_.end()}function write_biff8_global(n,r,g){var _=buf_array(),x=(n||{}).Workbook||{},S=x.Sheets||[],E=x.WBProps||{},C=g.biff==8,T=g.biff==5;if(write_biff_rec(_,2057,write_BOF(n,5,g)),g.bookType=="xla"&&write_biff_rec(_,135),write_biff_rec(_,225,C?writeuint16(1200):null),write_biff_rec(_,193,writezeroes(2)),T&&write_biff_rec(_,191),T&&write_biff_rec(_,192),write_biff_rec(_,226),write_biff_rec(_,92,write_WriteAccess("SheetJS",g)),write_biff_rec(_,66,writeuint16(C?1200:1252)),C&&write_biff_rec(_,353,writeuint16(0)),C&&write_biff_rec(_,448),write_biff_rec(_,317,write_RRTabId(n.SheetNames.length)),C&&n.vbaraw&&write_biff_rec(_,211),C&&n.vbaraw){var R=E.CodeName||"ThisWorkbook";write_biff_rec(_,442,write_XLUnicodeString(R))}write_biff_rec(_,156,writeuint16(17)),write_biff_rec(_,25,writebool(!1)),write_biff_rec(_,18,writebool(!1)),write_biff_rec(_,19,writeuint16(0)),C&&write_biff_rec(_,431,writebool(!1)),C&&write_biff_rec(_,444,writeuint16(0)),write_biff_rec(_,61,write_Window1()),write_biff_rec(_,64,writebool(!1)),write_biff_rec(_,141,writeuint16(0)),write_biff_rec(_,34,writebool(safe1904(n)=="true")),write_biff_rec(_,14,writebool(!0)),C&&write_biff_rec(_,439,writebool(!1)),write_biff_rec(_,218,writeuint16(0)),write_FONTS_biff8(_,n,g),write_FMTS_biff8(_,n.SSF,g),write_CELLXFS_biff8(_,g),C&&write_biff_rec(_,352,writebool(!1));var A=_.end(),I=buf_array();C&&write_biff_rec(I,140,write_Country()),C&&g.Strings&&write_biff_continue(I,252,write_SST(g.Strings)),write_biff_rec(I,10);var B=I.end(),D=buf_array(),N=0,M=0;for(M=0;M<n.SheetNames.length;++M)N+=(C?12:11)+(C?2:1)*n.SheetNames[M].length;var O=A.length+N+B.length;for(M=0;M<n.SheetNames.length;++M){var L=S[M]||{};write_biff_rec(D,133,write_BoundSheet8({pos:O,hs:L.Hidden||0,dt:0,name:n.SheetNames[M]},g)),O+=r[M].length}var F=D.end();if(N!=F.length)throw new Error("BS8 "+N+" != "+F.length);var U=[];return A.length&&U.push(A),F.length&&U.push(F),B.length&&U.push(B),bconcat(U)}function write_biff8_buf(n,r){var g=r||{},_=[];n&&!n.SSF&&(n.SSF=dup(table_fmt)),n&&n.SSF&&(make_ssf(),SSF_load_table(n.SSF),g.revssf=evert_num(n.SSF),g.revssf[n.SSF[65535]]=0,g.ssf=n.SSF),g.Strings=[],g.Strings.Count=0,g.Strings.Unique=0,fix_write_opts(g),g.cellXfs=[],get_cell_style(g.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var x=0;x<n.SheetNames.length;++x)_[_.length]=write_ws_biff8(x,g,n);return _.unshift(write_biff8_global(n,_,g)),bconcat(_)}function write_biff_buf(n,r){for(var g=0;g<=n.SheetNames.length;++g){var _=n.Sheets[n.SheetNames[g]];if(!(!_||!_["!ref"])){var x=decode_range(_["!ref"]);x.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[g]+"' extends beyond column IV (255).  Data may be lost.")}}var S=r||{};switch(S.biff||2){case 8:case 5:return write_biff8_buf(n,r);case 4:case 3:case 2:return write_biff2_buf(n,r)}throw new Error("invalid type "+S.bookType+" for BIFF")}function html_to_sheet(n,r){var g=r||{},_=g.dense!=null?g.dense:DENSE,x={};_&&(x["!data"]=[]),n=n.replace(/<!--.*?-->/g,"");var S=n.match(/<table/i);if(!S)throw new Error("Invalid HTML: could not find <table>");var E=n.match(/<\/table/i),C=S.index,T=E&&E.index||n.length,R=split_regex(n.slice(C,T),/(:?<tr[^>]*>)/i,"<tr>"),A=-1,I=0,B=0,D=0,N={s:{r:1e7,c:1e7},e:{r:0,c:0}},M=[];for(C=0;C<R.length;++C){var O=R[C].trim(),L=O.slice(0,3).toLowerCase();if(L=="<tr"){if(++A,g.sheetRows&&g.sheetRows<=A){--A;break}I=0;continue}if(!(L!="<td"&&L!="<th")){var F=O.split(/<\/t[dh]>/i);for(T=0;T<F.length;++T){var U=F[T].trim();if(U.match(/<t[dh]/i)){for(var j=U,z=0;j.charAt(0)=="<"&&(z=j.indexOf(">"))>-1;)j=j.slice(z+1);for(var W=0;W<M.length;++W){var X=M[W];X.s.c==I&&X.s.r<A&&A<=X.e.r&&(I=X.e.c+1,W=-1)}var ie=parsexmltag(U.slice(0,U.indexOf(">")));D=ie.colspan?+ie.colspan:1,((B=+ie.rowspan)>1||D>1)&&M.push({s:{r:A,c:I},e:{r:A+(B||1)-1,c:I+D-1}});var fe=ie.t||ie["data-t"]||"";if(!j.length){I+=D;continue}if(j=htmldecode(j),N.s.r>A&&(N.s.r=A),N.e.r<A&&(N.e.r=A),N.s.c>I&&(N.s.c=I),N.e.c<I&&(N.e.c=I),!j.length){I+=D;continue}var xe={t:"s",v:j};g.raw||!j.trim().length||fe=="s"||(j==="TRUE"?xe={t:"b",v:!0}:j==="FALSE"?xe={t:"b",v:!1}:isNaN(fuzzynum(j))?isNaN(fuzzydate(j).getDate())||(xe={t:"d",v:parseDate(j)},g.cellDates||(xe={t:"n",v:datenum(xe.v)}),xe.z=g.dateNF||table_fmt[14]):xe={t:"n",v:fuzzynum(j)}),_?(x["!data"][A]||(x["!data"][A]=[]),x["!data"][A][I]=xe):x[encode_cell({r:A,c:I})]=xe,I+=D}}}}return x["!ref"]=encode_range(N),M.length&&(x["!merges"]=M),x}function make_html_row(n,r,g,_){for(var x=n["!merges"]||[],S=[],E={},C=n["!data"]!=null,T=r.s.c;T<=r.e.c;++T){for(var R=0,A=0,I=0;I<x.length;++I)if(!(x[I].s.r>g||x[I].s.c>T)&&!(x[I].e.r<g||x[I].e.c<T)){if(x[I].s.r<g||x[I].s.c<T){R=-1;break}R=x[I].e.r-x[I].s.r+1,A=x[I].e.c-x[I].s.c+1;break}if(!(R<0)){var B=encode_col(T)+encode_row(g),D=C?(n["!data"][g]||[])[T]:n[B],N=D&&D.v!=null&&(D.h||escapehtml(D.w||(format_cell(D),D.w)||""))||"";E={},R>1&&(E.rowspan=R),A>1&&(E.colspan=A),_.editable?N='<span contenteditable="true">'+N+"</span>":D&&(E["data-t"]=D&&D.t||"z",D.v!=null&&(E["data-v"]=D.v),D.z!=null&&(E["data-z"]=D.z),D.l&&(D.l.Target||"#").charAt(0)!="#"&&(N='<a href="'+D.l.Target+'">'+N+"</a>")),E.id=(_.id||"sjs")+"-"+B,S.push(writextag("td",N,E))}}var M="<tr>";return M+S.join("")+"</tr>"}var HTML_BEGIN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HTML_END="</body></html>";function html_to_workbook(n,r){var g=n.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!g||g.length==0)throw new Error("Invalid HTML: could not find <table>");if(g.length==1){var _=sheet_to_workbook(html_to_sheet(g[0],r),r);return _.bookType="html",_}var x=book_new();return g.forEach(function(S,E){book_append_sheet(x,html_to_sheet(S,r),"Sheet"+(E+1))}),x.bookType="html",x}function make_html_preamble(n,r,g){var _=[];return _.join("")+"<table"+(g&&g.id?' id="'+g.id+'"':"")+">"}function sheet_to_html(n,r){var g=r||{},_=g.header!=null?g.header:HTML_BEGIN,x=g.footer!=null?g.footer:HTML_END,S=[_],E=decode_range(n["!ref"]);S.push(make_html_preamble(n,E,g));for(var C=E.s.r;C<=E.e.r;++C)S.push(make_html_row(n,E,C,g));return S.push("</table>"+x),S.join("")}function sheet_add_dom(n,r,g){var _=r.rows;if(!_)throw"Unsupported origin when "+r.tagName+" is not a TABLE";var x=g||{},S=n["!data"]!=null,E=0,C=0;if(x.origin!=null)if(typeof x.origin=="number")E=x.origin;else{var T=typeof x.origin=="string"?decode_cell(x.origin):x.origin;E=T.r,C=T.c}var R=Math.min(x.sheetRows||1e7,_.length),A={s:{r:0,c:0},e:{r:E,c:C}};if(n["!ref"]){var I=decode_range(n["!ref"]);A.s.r=Math.min(A.s.r,I.s.r),A.s.c=Math.min(A.s.c,I.s.c),A.e.r=Math.max(A.e.r,I.e.r),A.e.c=Math.max(A.e.c,I.e.c),E==-1&&(A.e.r=E=I.e.r+1)}var B=[],D=0,N=n["!rows"]||(n["!rows"]=[]),M=0,O=0,L=0,F=0,U=0,j=0;for(n["!cols"]||(n["!cols"]=[]);M<_.length&&O<R;++M){var z=_[M];if(is_dom_element_hidden(z)){if(x.display)continue;N[O]={hidden:!0}}var W=z.cells;for(L=F=0;L<W.length;++L){var X=W[L];if(!(x.display&&is_dom_element_hidden(X))){var ie=X.hasAttribute("data-v")?X.getAttribute("data-v"):X.hasAttribute("v")?X.getAttribute("v"):htmldecode(X.innerHTML),fe=X.getAttribute("data-z")||X.getAttribute("z");for(D=0;D<B.length;++D){var xe=B[D];xe.s.c==F+C&&xe.s.r<O+E&&O+E<=xe.e.r&&(F=xe.e.c+1-C,D=-1)}j=+X.getAttribute("colspan")||1,((U=+X.getAttribute("rowspan")||1)>1||j>1)&&B.push({s:{r:O+E,c:F+C},e:{r:O+E+(U||1)-1,c:F+C+(j||1)-1}});var we={t:"s",v:ie},G=X.getAttribute("data-t")||X.getAttribute("t")||"";ie!=null&&(ie.length==0?we.t=G||"z":x.raw||ie.trim().length==0||G=="s"||(ie==="TRUE"?we={t:"b",v:!0}:ie==="FALSE"?we={t:"b",v:!1}:isNaN(fuzzynum(ie))?isNaN(fuzzydate(ie).getDate())||(we={t:"d",v:parseDate(ie)},x.cellDates||(we={t:"n",v:datenum(we.v)}),we.z=x.dateNF||table_fmt[14]):we={t:"n",v:fuzzynum(ie)})),we.z===void 0&&fe!=null&&(we.z=fe);var J="",q=X.getElementsByTagName("A");if(q&&q.length)for(var H=0;H<q.length&&!(q[H].hasAttribute("href")&&(J=q[H].getAttribute("href"),J.charAt(0)!="#"));++H);J&&J.charAt(0)!="#"&&J.slice(0,11).toLowerCase()!="javascript:"&&(we.l={Target:J}),S?(n["!data"][O+E]||(n["!data"][O+E]=[]),n["!data"][O+E][F+C]=we):n[encode_cell({c:F+C,r:O+E})]=we,A.e.c<F+C&&(A.e.c=F+C),F+=j}}++O}return B.length&&(n["!merges"]=(n["!merges"]||[]).concat(B)),A.e.r=Math.max(A.e.r,O-1+E),n["!ref"]=encode_range(A),O>=R&&(n["!fullref"]=encode_range((A.e.r=_.length-M+O-1+E,A))),n}function parse_dom_table(n,r){var g=r||{},_={};return g.dense&&(_["!data"]=[]),sheet_add_dom(_,n,r)}function table_to_book(n,r){var g=sheet_to_workbook(parse_dom_table(n,r),r);return g}function is_dom_element_hidden(n){var r="",g=get_get_computed_style_function(n);return g&&(r=g(n).getPropertyValue("display")),r||(r=n.style&&n.style.display),r==="none"}function get_get_computed_style_function(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function parse_text_p(n){var r=n.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(_,x){return Array(parseInt(x,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),g=unescapexml(r.replace(/<[^>]*>/g,""));return[g]}function parse_ods_styles(n,r,g){var _=g||{},x=xlml_normalize(n);xlmlregex.lastIndex=0,x=x.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");for(var S,E,C="",T="",R,A=0,I=-1,B="";S=xlmlregex.exec(x);)switch(S[3]=S[3].replace(/_.*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":S[1]==="/"?(E["truncate-on-overflow"]=="false"&&(C.match(/h/)?C=C.replace(/h+/,"[$&]"):C.match(/m/)?C=C.replace(/m+/,"[$&]"):C.match(/s/)&&(C=C.replace(/s+/,"[$&]"))),_[E.name]=C,C=""):S[0].charAt(S[0].length-2)!=="/"&&(C="",E=parsexmltag(S[0],!1));break;case"boolean-style":S[1]==="/"?(_[E.name]="General",C=""):S[0].charAt(S[0].length-2)!=="/"&&(C="",E=parsexmltag(S[0],!1));break;case"boolean":C+="General";break;case"text":S[1]==="/"?(B=x.slice(I,xlmlregex.lastIndex-S[0].length),B=="%"&&E[0]=="<number:percentage-style"?C+="%":C+='"'+B.replace(/"/g,'""')+'"'):S[0].charAt(S[0].length-2)!=="/"&&(I=xlmlregex.lastIndex);break;case"day":switch(R=parsexmltag(S[0],!1),R.style){case"short":C+="d";break;case"long":C+="dd";break;default:C+="dd";break}break;case"day-of-week":switch(R=parsexmltag(S[0],!1),R.style){case"short":C+="ddd";break;case"long":C+="dddd";break;default:C+="ddd";break}break;case"era":switch(R=parsexmltag(S[0],!1),R.style){case"short":C+="ee";break;case"long":C+="eeee";break;default:C+="eeee";break}break;case"hours":switch(R=parsexmltag(S[0],!1),R.style){case"short":C+="h";break;case"long":C+="hh";break;default:C+="hh";break}break;case"minutes":switch(R=parsexmltag(S[0],!1),R.style){case"short":C+="m";break;case"long":C+="mm";break;default:C+="mm";break}break;case"month":switch(R=parsexmltag(S[0],!1),R.textual&&(C+="mm"),R.style){case"short":C+="m";break;case"long":C+="mm";break;default:C+="m";break}break;case"seconds":{switch(R=parsexmltag(S[0],!1),R.style){case"short":C+="s";break;case"long":C+="ss";break;default:C+="ss";break}R["decimal-places"]&&(C+="."+fill("0",+R["decimal-places"]))}break;case"year":switch(R=parsexmltag(S[0],!1),R.style){case"short":C+="yy";break;case"long":C+="yyyy";break;default:C+="yy";break}break;case"am-pm":C+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+S[3]);break;case"fill-character":S[1]==="/"?(B=x.slice(I,xlmlregex.lastIndex-S[0].length),C+='"'+B.replace(/"/g,'""')+'"*'):S[0].charAt(S[0].length-2)!=="/"&&(I=xlmlregex.lastIndex);break;case"scientific-number":R=parsexmltag(S[0],!1),C+="0."+fill("0",+R["min-decimal-places"]||+R["decimal-places"]||2)+fill("?",+R["decimal-places"]-+R["min-decimal-places"]||0)+"E"+(parsexmlbool(R["forced-exponent-sign"])?"+":"")+fill("0",+R["min-exponent-digits"]||2);break;case"fraction":R=parsexmltag(S[0],!1),+R["min-integer-digits"]?C+=fill("0",+R["min-integer-digits"]):C+="#",C+=" ",C+=fill("?",+R["min-numerator-digits"]||1),C+="/",+R["denominator-value"]?C+=R["denominator-value"]:C+=fill("?",+R["min-denominator-digits"]||1);break;case"currency-symbol":S[1]==="/"?C+='"'+x.slice(I,xlmlregex.lastIndex-S[0].length).replace(/"/g,'""')+'"':S[0].charAt(S[0].length-2)!=="/"?I=xlmlregex.lastIndex:C+="$";break;case"text-properties":switch(R=parsexmltag(S[0],!1),(R.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":C="[Red]"+C;break}break;case"text-content":C+="@";break;case"map":R=parsexmltag(S[0],!1),unescapexml(R.condition)=="value()>=0"?C=_[R["apply-style-name"]]+";"+C:console.error("ODS number format may be incorrect: "+R.condition);break;case"number":if(S[1]==="/")break;R=parsexmltag(S[0],!1),T="",T+=fill("0",+R["min-integer-digits"]||1),parsexmlbool(R.grouping)&&(T=commaify(fill("#",Math.max(0,4-T.length))+T)),(+R["min-decimal-places"]||+R["decimal-places"])&&(T+="."),+R["min-decimal-places"]&&(T+=fill("0",+R["min-decimal-places"]||1)),+R["decimal-places"]-(+R["min-decimal-places"]||0)&&(T+=fill("0",+R["decimal-places"]-(+R["min-decimal-places"]||0))),C+=T;break;case"embedded-text":S[1]==="/"?A==0?C+='"'+x.slice(I,xlmlregex.lastIndex-S[0].length).replace(/"/g,'""')+'"':C=C.slice(0,A)+'"'+x.slice(I,xlmlregex.lastIndex-S[0].length).replace(/"/g,'""')+'"'+C.slice(A):S[0].charAt(S[0].length-2)!=="/"&&(I=xlmlregex.lastIndex,A=-+parsexmltag(S[0],!1).position||0);break}return _}function parse_content_xml(n,r,g){var _=r||{},x=xlml_normalize(n),S=[],E,C,T,R="",A=0,I,B,D={},N=[],M={};_.dense&&(M["!data"]=[]);var O,L,F={value:""},U="",j=0,z=[],W=-1,X=-1,ie={s:{r:1e6,c:1e7},e:{r:0,c:0}},fe=0,xe=g||{},we={},G=[],J={},q=0,H=0,ve=[],Z=1,ce=1,ue=[],se={Names:[],WBProps:{}},te={},Y=["",""],be=[],ye={},Ie="",ke=0,Ce=!1,Ae=!1,Ne=0,We=0;for(xlmlregex.lastIndex=0,x=x.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");O=xlmlregex.exec(x);)switch(O[3]=O[3].replace(/_.*$/,"")){case"table":case"工作表":O[1]==="/"?(ie.e.c>=ie.s.c&&ie.e.r>=ie.s.r?M["!ref"]=encode_range(ie):M["!ref"]="A1:A1",_.sheetRows>0&&_.sheetRows<=ie.e.r&&(M["!fullref"]=M["!ref"],ie.e.r=_.sheetRows-1,M["!ref"]=encode_range(ie)),G.length&&(M["!merges"]=G),ve.length&&(M["!rows"]=ve),I.name=I.名称||I.name,typeof JSON<"u"&&JSON.stringify(I),N.push(I.name),D[I.name]=M,Ae=!1):O[0].charAt(O[0].length-2)!=="/"&&(I=parsexmltag(O[0],!1),W=X=-1,ie.s.r=ie.s.c=1e7,ie.e.r=ie.e.c=0,M={},_.dense&&(M["!data"]=[]),G=[],ve=[],Ae=!0);break;case"table-row-group":O[1]==="/"?--fe:++fe;break;case"table-row":case"行":if(O[1]==="/"){W+=Z,Z=1;break}if(B=parsexmltag(O[0],!1),B.行号?W=B.行号-1:W==-1&&(W=0),Z=+B["number-rows-repeated"]||1,Z<10)for(Ne=0;Ne<Z;++Ne)fe>0&&(ve[W+Ne]={level:fe});X=-1;break;case"covered-table-cell":O[1]!=="/"&&++X,_.sheetStubs&&(_.dense?(M["!data"][W]||(M["!data"][W]=[]),M["!data"][W][X]={t:"z"}):M[encode_cell({r:W,c:X})]={t:"z"}),U="",z=[];break;case"table-cell":case"数据":if(O[0].charAt(O[0].length-2)==="/")++X,F=parsexmltag(O[0],!1),ce=parseInt(F["number-columns-repeated"]||"1",10),L={t:"z",v:null},F.formula&&_.cellFormula!=!1&&(L.f=ods_to_csf_formula(unescapexml(F.formula))),F["style-name"]&&we[F["style-name"]]&&(L.z=we[F["style-name"]]),(F.数据类型||F["value-type"])=="string"&&(L.t="s",L.v=unescapexml(F["string-value"]||""),_.dense?(M["!data"][W]||(M["!data"][W]=[]),M["!data"][W][X]=L):M[encode_col(X)+encode_row(W)]=L),X+=ce-1;else if(O[1]!=="/"){++X,U="",j=0,z=[],ce=1;var Be=Z?W+Z-1:W;if(X>ie.e.c&&(ie.e.c=X),X<ie.s.c&&(ie.s.c=X),W<ie.s.r&&(ie.s.r=W),Be>ie.e.r&&(ie.e.r=Be),F=parsexmltag(O[0],!1),be=[],ye={},L={t:F.数据类型||F["value-type"],v:null},F["style-name"]&&we[F["style-name"]]&&(L.z=we[F["style-name"]]),_.cellFormula)if(F.formula&&(F.formula=unescapexml(F.formula)),F["number-matrix-columns-spanned"]&&F["number-matrix-rows-spanned"]&&(q=parseInt(F["number-matrix-rows-spanned"],10)||0,H=parseInt(F["number-matrix-columns-spanned"],10)||0,J={s:{r:W,c:X},e:{r:W+q-1,c:X+H-1}},L.F=encode_range(J),ue.push([J,L.F])),F.formula)L.f=ods_to_csf_formula(F.formula);else for(Ne=0;Ne<ue.length;++Ne)W>=ue[Ne][0].s.r&&W<=ue[Ne][0].e.r&&X>=ue[Ne][0].s.c&&X<=ue[Ne][0].e.c&&(L.F=ue[Ne][1]);switch((F["number-columns-spanned"]||F["number-rows-spanned"])&&(q=parseInt(F["number-rows-spanned"],10)||0,H=parseInt(F["number-columns-spanned"],10)||0,J={s:{r:W,c:X},e:{r:W+q-1,c:X+H-1}},G.push(J)),F["number-columns-repeated"]&&(ce=parseInt(F["number-columns-repeated"],10)),L.t){case"boolean":L.t="b",L.v=parsexmlbool(F["boolean-value"])||+F["boolean-value"]>=1;break;case"float":L.t="n",L.v=parseFloat(F.value);break;case"percentage":L.t="n",L.v=parseFloat(F.value);break;case"currency":L.t="n",L.v=parseFloat(F.value);break;case"date":L.t="d",L.v=parseDate(F["date-value"]),_.cellDates||(L.t="n",L.v=datenum(L.v,se.WBProps.date1904)-We),L.z||(L.z="m/d/yy");break;case"time":L.t="n",L.v=parse_isodur(F["time-value"])/86400,_.cellDates&&(L.t="d",L.v=numdate(L.v)),L.z||(L.z="HH:MM:SS");break;case"number":L.t="n",L.v=parseFloat(F.数据数值);break;default:if(L.t==="string"||L.t==="text"||!L.t)L.t="s",F["string-value"]!=null&&(U=unescapexml(F["string-value"]),z=[]);else throw new Error("Unsupported value type "+L.t)}}else{if(Ce=!1,L.t==="s"&&(L.v=U||"",z.length&&(L.R=z),Ce=j==0),te.Target&&(L.l=te),be.length>0&&(L.c=be,be=[]),U&&_.cellText!==!1&&(L.w=U),Ce&&(L.t="z",delete L.v),(!Ce||_.sheetStubs)&&!(_.sheetRows&&_.sheetRows<=W))for(var Se=0;Se<Z;++Se){if(ce=parseInt(F["number-columns-repeated"]||"1",10),_.dense)for(M["!data"][W+Se]||(M["!data"][W+Se]=[]),M["!data"][W+Se][X]=Se==0?L:dup(L);--ce>0;)M["!data"][W+Se][X+ce]=dup(L);else for(M[encode_cell({r:W+Se,c:X})]=L;--ce>0;)M[encode_cell({r:W+Se,c:X+ce})]=dup(L);ie.e.c<=X&&(ie.e.c=X)}ce=parseInt(F["number-columns-repeated"]||"1",10),X+=ce-1,ce=0,L={},U="",z=[]}te={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(O[1]==="/"){if((E=S.pop())[0]!==O[3])throw"Bad state: "+E}else O[0].charAt(O[0].length-2)!=="/"&&S.push([O[3],!0]);break;case"annotation":if(O[1]==="/"){if((E=S.pop())[0]!==O[3])throw"Bad state: "+E;ye.t=U,z.length&&(ye.R=z),ye.a=Ie,be.push(ye)}else O[0].charAt(O[0].length-2)!=="/"&&S.push([O[3],!1]);Ie="",ke=0,U="",j=0,z=[];break;case"creator":O[1]==="/"?Ie=x.slice(ke,O.index):ke=O.index+O[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(O[1]==="/"){if((E=S.pop())[0]!==O[3])throw"Bad state: "+E}else O[0].charAt(O[0].length-2)!=="/"&&S.push([O[3],!1]);U="",j=0,z=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(O[1]==="/"){var $e=xlmlregex.lastIndex;parse_ods_styles(x.slice(T,xlmlregex.lastIndex),r,xe),xlmlregex.lastIndex=$e}else O[0].charAt(O[0].length-2)!=="/"&&(T=xlmlregex.lastIndex-O[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var _e=parsexmltag(O[0],!1);_e.family=="table-cell"&&xe[_e["data-style-name"]]&&(we[_e.name]=xe[_e["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(O[0].slice(-2)==="/>")break;if(O[1]==="/")switch(S[S.length-1][0]){case"number-style":case"date-style":case"time-style":R+=x.slice(A,O.index);break}else A=O.index+O[0].length;break;case"named-range":C=parsexmltag(O[0],!1),Y=ods_to_csf_3D(C["cell-range-address"]);var Oe={Name:C.name,Ref:Y[0]+"!"+Y[1]};Ae&&(Oe.Sheet=N.length),se.Names.push(Oe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(C=parsexmltag(O[0],!1),C["date-value"]){case"1904-01-01":se.WBProps.date1904=!0;case"1900-01-01":We=0}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(S[S.length-1][0])>-1)break;if(O[1]==="/"&&(!F||!F["string-value"])){var Ke=parse_text_p(x.slice(j,O.index));U=(U.length>0?U+`
`:"")+Ke[0]}else parsexmltag(O[0],!1),j=O.index+O[0].length;break;case"s":break;case"database-range":if(O[1]==="/")break;try{Y=ods_to_csf_3D(parsexmltag(O[0])["target-range-address"]),D[Y[0]]["!autofilter"]={ref:Y[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(O[1]!=="/"){if(te=parsexmltag(O[0],!1),!te.href)break;te.Target=unescapexml(te.href),delete te.href,te.Target.charAt(0)=="#"&&te.Target.indexOf(".")>-1?(Y=ods_to_csf_3D(te.Target.slice(1)),te.Target="#"+Y[0]+"!"+Y[1]):te.Target.match(/^\.\.[\\\/]/)&&(te.Target=te.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(O[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(_.WTF)throw new Error(O)}}var Me={Sheets:D,SheetNames:N,Workbook:se};return _.bookSheets&&delete Me.Sheets,Me}function parse_ods(n,r){r=r||{},safegetzipfile(n,"META-INF/manifest.xml")&&parse_manifest(getzipdata(n,"META-INF/manifest.xml"),r);var g=getzipstr(n,"styles.xml"),_=g&&parse_ods_styles(utf8read(g)),x=getzipstr(n,"content.xml");if(!x)throw new Error("Missing content.xml in ODS / UOF file");var S=parse_content_xml(utf8read(x),r,_);return safegetzipfile(n,"meta.xml")&&(S.Props=parse_core_props(getzipdata(n,"meta.xml"))),S.bookType="ods",S}function parse_fods(n,r){var g=parse_content_xml(n,r);return g.bookType="fods",g}var write_styles_ods=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),r="<office:document-styles "+wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return XML_HEADER+r}}();function write_number_format_ods(n,r){var g="number",_="",x={"style:name":r},S="",E=0;n=n.replace(/"[$]"/g,"$");e:{if(n.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+n),n=n.slice(0,n.indexOf(";"))),n=="@"){g="text",_="<number:text-content/>";break e}if(n.indexOf(/\$/)>-1&&(g="currency"),n[E]=='"'){for(S="";n[++E]!='"'||n[++E]=='"';)S+=n[E];--E,n[E+1]=="*"?(E++,_+="<number:fill-character>"+escapexml(S.replace(/""/g,'"'))+"</number:fill-character>"):_+="<number:text>"+escapexml(S.replace(/""/g,'"'))+"</number:text>",n=n.slice(E+1),E=0}var C=n.match(/# (\?+)\/(\?+)/);if(C){_+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":C[1].length,"number:max-denominator-value":Math.max(+C[1].replace(/./g,"9"),+C[2].replace(/./g,"9"))});break e}if(C=n.match(/# (\?+)\/(\d+)/)){_+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":C[1].length,"number:denominator-value":+C[2]});break e}if(C=n.match(/(\d+)(|\.\d+)%/)){g="percentage",_+=writextag("number:number",null,{"number:decimal-places":C[2]&&C.length-1||0,"number:min-decimal-places":C[2]&&C.length-1||0,"number:min-integer-digits":C[1].length})+"<number:text>%</number:text>";break e}var T=!1;if(["y","m","d"].indexOf(n[0])>-1){g="date";t:for(;E<n.length;++E)switch(S=n[E].toLowerCase()){case"h":case"s":T=!0,--E;break t;case"m":r:for(var R=E+1;R<n.length;++R)switch(n[R]){case"y":case"d":break r;case"h":case"s":T=!0,--E;break t}case"y":case"d":for(;(n[++E]||"").toLowerCase()==S[0];)S+=S[0];switch(--E,S){case"y":case"yy":_+="<number:year/>";break;case"yyy":case"yyyy":_+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":_+='<number:month number:style="'+(S.length%2?"short":"long")+'" number:textual="'+(S.length>=3?"true":"false")+'"/>';break;case"d":case"dd":_+='<number:day number:style="'+(S.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":_+='<number:day-of-week number:style="'+(S.length%2?"short":"long")+'"/>';break}break;case'"':for(;n[++E]!='"'||n[++E]=='"';)S+=n[E];--E,_+="<number:text>"+escapexml(S.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":_+="<number:text>"+escapexml(S)+"</number:text>";break;default:console.error("unrecognized character "+S+" in ODF format "+n)}if(!T)break e;n=n.slice(E+1),E=0}if(n.match(/^\[?[hms]/)){for(g=="number"&&(g="time"),n.match(/\[/)&&(n=n.replace(/[\[\]]/g,""),x["number:truncate-on-overflow"]="false");E<n.length;++E)switch(S=n[E].toLowerCase()){case"h":case"m":case"s":for(;(n[++E]||"").toLowerCase()==S[0];)S+=S[0];switch(--E,S){case"h":case"hh":_+='<number:hours number:style="'+(S.length%2?"short":"long")+'"/>';break;case"m":case"mm":_+='<number:minutes number:style="'+(S.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(n[E+1]==".")do S+=n[E+1],++E;while(n[E+1]=="0");_+='<number:seconds number:style="'+(S.match("ss")?"long":"short")+'"'+(S.match(/\./)?' number:decimal-places="'+(S.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;n[++E]!='"'||n[++E]=='"';)S+=n[E];--E,_+="<number:text>"+escapexml(S.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":_+="<number:text>"+escapexml(S)+"</number:text>";break;case"a":if(n.slice(E,E+3).toLowerCase()=="a/p"){_+="<number:am-pm/>",E+=2;break}if(n.slice(E,E+5).toLowerCase()=="am/pm"){_+="<number:am-pm/>",E+=4;break}default:console.error("unrecognized character "+S+" in ODF format "+n)}break e}if(n.indexOf(/\$/)>-1&&(g="currency"),n[0]=="$"&&(_+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',n=n.slice(1),E=0),E=0,n[E]=='"'){for(;n[++E]!='"'||n[++E]=='"';)S+=n[E];--E,n[E+1]=="*"?(E++,_+="<number:fill-character>"+escapexml(S.replace(/""/g,'"'))+"</number:fill-character>"):_+="<number:text>"+escapexml(S.replace(/""/g,'"'))+"</number:text>",n=n.slice(E+1),E=0}var A=n.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!A||!A[0])console.error("Could not find numeric part of "+n);else{var I=A[1].replace(/,/g,"");_+="<number:"+(A[3]?"scientific-":"")+'number number:min-integer-digits="'+(I.indexOf("0")==-1?"0":I.length-I.indexOf("0"))+'"'+(A[0].indexOf(",")>-1?' number:grouping="true"':"")+(A[2]&&' number:decimal-places="'+(A[2].length-1)+'"'||' number:decimal-places="0"')+(A[3]&&A[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(A[3]?' number:min-exponent-digits="'+A[3].match(/0+/)[0].length+'"':"")+"></number:"+(A[3]?"scientific-":"")+"number>",E=A.index+A[0].length}if(n[E]=='"'){for(S="";n[++E]!='"'||n[++E]=='"';)S+=n[E];--E,_+="<number:text>"+escapexml(S.replace(/""/g,'"'))+"</number:text>"}}return _?writextag("number:"+g+"-style",_,x):(console.error("Could not generate ODS number format for |"+n+"|"),"")}function write_names_ods(n,r,g){var _=n.filter(function(x){return x.Sheet==(g==-1?null:g)});return _.length?`      <table:named-expressions>
`+_.map(function(x){var S=csf_to_ods_3D(x.Ref);return"        "+writextag("table:named-range",null,{"table:name":x.Name,"table:cell-range-address":S,"table:base-cell-address":S.replace(/[\.]?[^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var write_content_ods=function(){var n=function(S){return escapexml(S).replace(/  +/g,function(E){return'<text:s text:c="'+E.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},r=`          <table:table-cell />
`,g=`          <table:covered-table-cell/>
`,_=function(S,E,C,T,R){var A=[];A.push('      <table:table table:name="'+escapexml(E.SheetNames[C])+`" table:style-name="ta1">
`);var I=0,B=0,D=decode_range(S["!ref"]||"A1"),N=S["!merges"]||[],M=0,O=S["!data"]!=null;if(S["!cols"])for(B=0;B<=D.e.c;++B)A.push("        <table:table-column"+(S["!cols"][B]?' table:style-name="co'+S["!cols"][B].ods+'"':"")+`></table:table-column>
`);var L="",F=S["!rows"]||[];for(I=0;I<D.s.r;++I)L=F[I]?' table:style-name="ro'+F[I].ods+'"':"",A.push("        <table:table-row"+L+`></table:table-row>
`);for(;I<=D.e.r;++I){for(L=F[I]?' table:style-name="ro'+F[I].ods+'"':"",A.push("        <table:table-row"+L+`>
`),B=0;B<D.s.c;++B)A.push(r);for(;B<=D.e.c;++B){var U=!1,j={},z="";for(M=0;M!=N.length;++M)if(!(N[M].s.c>B)&&!(N[M].s.r>I)&&!(N[M].e.c<B)&&!(N[M].e.r<I)){(N[M].s.c!=B||N[M].s.r!=I)&&(U=!0),j["table:number-columns-spanned"]=N[M].e.c-N[M].s.c+1,j["table:number-rows-spanned"]=N[M].e.r-N[M].s.r+1;break}if(U){A.push(g);continue}var W=encode_cell({r:I,c:B}),X=O?(S["!data"][I]||[])[B]:S[W];if(X&&X.f&&(j["table:formula"]=escapexml(csf_to_ods_formula(X.f)),X.F&&X.F.slice(0,W.length)==W)){var ie=decode_range(X.F);j["table:number-matrix-columns-spanned"]=ie.e.c-ie.s.c+1,j["table:number-matrix-rows-spanned"]=ie.e.r-ie.s.r+1}if(!X){A.push(r);continue}switch(X.t){case"b":z=X.v?"TRUE":"FALSE",j["office:value-type"]="boolean",j["office:boolean-value"]=X.v?"true":"false";break;case"n":z=X.w||String(X.v||0),j["office:value-type"]="float",j["office:value"]=X.v||0;break;case"s":case"str":z=X.v==null?"":X.v,j["office:value-type"]="string";break;case"d":z=X.w||parseDate(X.v).toISOString(),j["office:value-type"]="date",j["office:date-value"]=parseDate(X.v).toISOString(),j["table:style-name"]="ce1";break;default:A.push(r);continue}var fe=n(z);if(X.l&&X.l.Target){var xe=X.l.Target;xe=xe.charAt(0)=="#"?"#"+csf_to_ods_3D(xe.slice(1)):xe,xe.charAt(0)!="#"&&!xe.match(/^\w+:/)&&(xe="../"+xe),fe=writextag("text:a",fe,{"xlink:href":xe.replace(/&/g,"&amp;")})}R[X.z]&&(j["table:style-name"]="ce"+R[X.z].slice(1)),A.push("          "+writextag("table:table-cell",writextag("text:p",fe,{}),j)+`
`)}A.push(`        </table:table-row>
`)}return(E.Workbook||{}).Names&&A.push(write_names_ods(E.Workbook.Names,E.SheetNames,C)),A.push(`      </table:table>
`),A.join("")},x=function(S,E){S.push(` <office:automatic-styles>
`);var C=0;E.SheetNames.map(function(I){return E.Sheets[I]}).forEach(function(I){if(I&&I["!cols"]){for(var B=0;B<I["!cols"].length;++B)if(I["!cols"][B]){var D=I["!cols"][B];if(D.width==null&&D.wpx==null&&D.wch==null)continue;process_col(D),D.ods=C;var N=I["!cols"][B].wpx+"px";S.push('  <style:style style:name="co'+C+`" style:family="table-column">
`),S.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+N+`"/>
`),S.push(`  </style:style>
`),++C}}});var T=0;E.SheetNames.map(function(I){return E.Sheets[I]}).forEach(function(I){if(I&&I["!rows"]){for(var B=0;B<I["!rows"].length;++B)if(I["!rows"][B]){I["!rows"][B].ods=T;var D=I["!rows"][B].hpx+"px";S.push('  <style:style style:name="ro'+T+`" style:family="table-row">
`),S.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+D+`"/>
`),S.push(`  </style:style>
`),++T}}}),S.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),S.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),S.push(`  </style:style>
`),S.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),S.push(`   <number:month number:style="long"/>
`),S.push(`   <number:text>/</number:text>
`),S.push(`   <number:day number:style="long"/>
`),S.push(`   <number:text>/</number:text>
`),S.push(`   <number:year/>
`),S.push(`  </number:date-style>
`);var R={},A=69;return E.SheetNames.map(function(I){return E.Sheets[I]}).forEach(function(I){if(I)for(var B=I["!data"]!=null,D=decode_range(I["!ref"]),N=0;N<=D.e.r;++N)for(var M=0;M<=D.e.c;++M){var O=B?(I["!data"][N]||[])[M]:I[encode_cell({r:N,c:M})];if(!(!O||!O.z||O.z.toLowerCase()=="general")&&!R[O.z]){var L=write_number_format_ods(O.z,"N"+A);L&&(R[O.z]="N"+A,++A,S.push(L+`
`))}}}),S.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),keys$2(R).forEach(function(I){S.push('<style:style style:name="ce'+R[I].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+R[I]+`"/>
`)}),S.push(` </office:automatic-styles>
`),R};return function(E,C){var T=[XML_HEADER],R=wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),A=wxt_helper({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});C.bookType=="fods"?(T.push("<office:document"+R+A+`>
`),T.push(write_meta_ods().replace(/<office:document-meta.*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):T.push("<office:document-content"+R+`>
`);var I=x(T,E);T.push(`  <office:body>
`),T.push(`    <office:spreadsheet>
`),((E.Workbook||{}).WBProps||{}).date1904&&T.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var B=0;B!=E.SheetNames.length;++B)T.push(_(E.Sheets[E.SheetNames[B]],E,B,C,I));return(E.Workbook||{}).Names&&T.push(write_names_ods(E.Workbook.Names,E.SheetNames,-1)),T.push(`    </office:spreadsheet>
`),T.push(`  </office:body>
`),C.bookType=="fods"?T.push("</office:document>"):T.push("</office:document-content>"),T.join("")}}();function write_ods(n,r){if(r.bookType=="fods")return write_content_ods(n,r);var g=zip_new(),_="",x=[],S=[];return _="mimetype",zip_add_file(g,_,"application/vnd.oasis.opendocument.spreadsheet"),_="content.xml",zip_add_file(g,_,write_content_ods(n,r)),x.push([_,"text/xml"]),S.push([_,"ContentFile"]),_="styles.xml",zip_add_file(g,_,write_styles_ods(n,r)),x.push([_,"text/xml"]),S.push([_,"StylesFile"]),_="meta.xml",zip_add_file(g,_,XML_HEADER+write_meta_ods()),x.push([_,"text/xml"]),S.push([_,"MetadataFile"]),_="manifest.rdf",zip_add_file(g,_,write_rdf(S)),x.push([_,"application/rdf+xml"]),_="META-INF/manifest.xml",zip_add_file(g,_,write_manifest(x)),g}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var subarray=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer$1<"u"?typeof Buffer$1.prototype.subarray>"u"?"slice":(typeof Buffer$1.from=="function"?Buffer$1.from([72,62]):new Buffer$1([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function u8_to_dataview(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function u8str(n){return typeof TextDecoder<"u"?new TextDecoder().decode(n):utf8read(a2s(n))}function stru8(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):s2a(utf8write(n))}function u8concat(n){for(var r=0,g=0;g<n.length;++g)r+=n[g].length;var _=new Uint8Array(r),x=0;for(g=0;g<n.length;++g){var S=n[g],E=S.length;if(E<250)for(var C=0;C<E;++C)_[x++]=S[C];else _.set(S,x),x+=E}return _}function popcnt(n){return n-=n>>1&1431655765,n=(n&858993459)+(n>>2&858993459),(n+(n>>4)&252645135)*16843009>>>24}function readDecimal128LE(n,r){for(var g=(n[r+15]&127)<<7|n[r+14]>>1,_=n[r+14]&1,x=r+13;x>=r;--x)_=_*256+n[x];return(n[r+15]&128?-_:_)*Math.pow(10,g-6176)}function writeDecimal128LE(n,r,g){var _=Math.floor(g==0?0:Math.LOG10E*Math.log(Math.abs(g)))+6176-16,x=g/Math.pow(10,_-6176);n[r+15]|=_>>7,n[r+14]|=(_&127)<<1;for(var S=0;x>=1;++S,x/=256)n[r+S]=x&255;n[r+15]|=g>=0?0:128}function parse_varint49(n,r){var g=r.l,_=n[g]&127;e:if(n[g++]>=128&&(_|=(n[g]&127)<<7,n[g++]<128||(_|=(n[g]&127)<<14,n[g++]<128)||(_|=(n[g]&127)<<21,n[g++]<128)||(_+=(n[g]&127)*Math.pow(2,28),++g,n[g++]<128)||(_+=(n[g]&127)*Math.pow(2,35),++g,n[g++]<128)||(_+=(n[g]&127)*Math.pow(2,42),++g,n[g++]<128)))break e;return r.l=g,_}function write_varint49(n){var r=new Uint8Array(7);r[0]=n&127;var g=1;e:if(n>127){if(r[g-1]|=128,r[g]=n>>7&127,++g,n<=16383||(r[g-1]|=128,r[g]=n>>14&127,++g,n<=2097151)||(r[g-1]|=128,r[g]=n>>21&127,++g,n<=268435455)||(r[g-1]|=128,r[g]=n/256>>>21&127,++g,n<=34359738367)||(r[g-1]|=128,r[g]=n/65536>>>21&127,++g,n<=4398046511103))break e;r[g-1]|=128,r[g]=n/16777216>>>21&127,++g}return r[subarray](0,g)}function parse_packed_varints(n){for(var r={l:0},g=[];r.l<n.length;)g.push(parse_varint49(n,r));return g}function write_packed_varints(n){return u8concat(n.map(function(r){return write_varint49(r)}))}function varint_to_i32(n){var r=0,g=n[r]&127;e:if(n[r++]>=128){if(g|=(n[r]&127)<<7,n[r++]<128||(g|=(n[r]&127)<<14,n[r++]<128)||(g|=(n[r]&127)<<21,n[r++]<128))break e;g|=(n[r]&127)<<28}return g}function parse_shallow(n){for(var r=[],g={l:0};g.l<n.length;){var _=g.l,x=parse_varint49(n,g),S=x&7;x=x/8|0;var E,C=g.l;switch(S){case 0:{for(;n[C++]>=128;);E=n[subarray](g.l,C),g.l=C}break;case 1:E=n[subarray](C,C+8),g.l=C+8;break;case 2:{var T=parse_varint49(n,g);E=n[subarray](g.l,g.l+T),g.l+=T}break;case 5:E=n[subarray](C,C+4),g.l=C+4;break;default:throw new Error("PB Type ".concat(S," for Field ").concat(x," at offset ").concat(_))}var R={data:E,type:S};r[x]==null&&(r[x]=[]),r[x].push(R)}return r}function write_shallow(n){var r=[];return n.forEach(function(g,_){_!=0&&g.forEach(function(x){x.data&&(r.push(write_varint49(_*8+x.type)),x.type==2&&r.push(write_varint49(x.data.length)),r.push(x.data))})}),u8concat(r)}function mappa(n,r){return n?.map(function(g){return r(g.data)})||[]}function parse_iwa_file(n){for(var r,g=[],_={l:0};_.l<n.length;){var x=parse_varint49(n,_),S=parse_shallow(n[subarray](_.l,_.l+x));_.l+=x;var E={id:varint_to_i32(S[1][0].data),messages:[]};S[2].forEach(function(C){var T=parse_shallow(C.data),R=varint_to_i32(T[3][0].data);E.messages.push({meta:T,data:n[subarray](_.l,_.l+R)}),_.l+=R}),(r=S[3])!=null&&r[0]&&(E.merge=varint_to_i32(S[3][0].data)>>>0>0),g.push(E)}return g}function write_iwa_file(n){var r=[];return n.forEach(function(g){var _=[[],[{data:write_varint49(g.id),type:0}],[]];g.merge!=null&&(_[3]=[{data:write_varint49(+!!g.merge),type:0}]);var x=[];g.messages.forEach(function(E){x.push(E.data),E.meta[3]=[{type:0,data:write_varint49(E.data.length)}],_[2].push({data:write_shallow(E.meta),type:2})});var S=write_shallow(_);r.push(write_varint49(S.length)),r.push(S),x.forEach(function(E){return r.push(E)})}),u8concat(r)}function parse_snappy_chunk(n,r){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var g={l:0},_=parse_varint49(r,g),x=[],S=g.l;S<r.length;){var E=r[S]&3;if(E==0){var C=r[S++]>>2;if(C<60)++C;else{var T=C-59;C=r[S],T>1&&(C|=r[S+1]<<8),T>2&&(C|=r[S+2]<<16),T>3&&(C|=r[S+3]<<24),C>>>=0,C++,S+=T}x.push(r[subarray](S,S+C)),S+=C;continue}else{var R=0,A=0;if(E==1?(A=(r[S]>>2&7)+4,R=(r[S++]&224)<<3,R|=r[S++]):(A=(r[S++]>>2)+1,E==2?(R=r[S]|r[S+1]<<8,S+=2):(R=(r[S]|r[S+1]<<8|r[S+2]<<16|r[S+3]<<24)>>>0,S+=4)),R==0)throw new Error("Invalid offset 0");for(var I=x.length-1,B=R;I>=0&&B>=x[I].length;)B-=x[I].length,--I;if(I<0)if(B==0)B=x[I=0].length;else throw new Error("Invalid offset beyond length");if(A<B)x.push(x[I][subarray](x[I].length-B,x[I].length-B+A));else{for(B>0&&(x.push(x[I][subarray](x[I].length-B)),A-=B),++I;A>=x[I].length;)x.push(x[I]),A-=x[I].length,++I;A&&x.push(x[I][subarray](0,A))}x.length>25&&(x=[u8concat(x)])}}for(var D=0,N=0;N<x.length;++N)D+=x[N].length;if(D!=_)throw new Error("Unexpected length: ".concat(D," != ").concat(_));return x}function decompress_iwa_file(n){Array.isArray(n)&&(n=new Uint8Array(n));for(var r=[],g=0;g<n.length;){var _=n[g++],x=n[g]|n[g+1]<<8|n[g+2]<<16;g+=3,r.push.apply(r,parse_snappy_chunk(_,n[subarray](g,g+x))),g+=x}if(g!==n.length)throw new Error("data is not a valid framed stream!");return r.length==1?r[0]:u8concat(r)}function compress_iwa_file(n){for(var r=[],g=0;g<n.length;){var _=Math.min(n.length-g,268435455),x=new Uint8Array(4);r.push(x);var S=write_varint49(_),E=S.length;r.push(S),_<=60?(E++,r.push(new Uint8Array([_-1<<2]))):_<=256?(E+=2,r.push(new Uint8Array([240,_-1&255]))):_<=65536?(E+=3,r.push(new Uint8Array([244,_-1&255,_-1>>8&255]))):_<=16777216?(E+=4,r.push(new Uint8Array([248,_-1&255,_-1>>8&255,_-1>>16&255]))):_<=4294967296&&(E+=5,r.push(new Uint8Array([252,_-1&255,_-1>>8&255,_-1>>16&255,_-1>>>24&255]))),r.push(n[subarray](g,g+_)),E+=_,x[0]=0,x[1]=E&255,x[2]=E>>8&255,x[3]=E>>16&255,g+=_}return u8concat(r)}var numbers_lut_new=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[]}};function numbers_format_cell(n,r,g,_,x){var S,E,C,T,R=r&255,A=r>>8,I=A>=5?x:_;e:if(g&(A>4?8:4)&&n.t=="n"&&R==7){var B=(S=I[7])!=null&&S[0]?varint_to_i32(I[7][0].data):-1;if(B==-1)break e;var D=(E=I[15])!=null&&E[0]?varint_to_i32(I[15][0].data):-1,N=(C=I[16])!=null&&C[0]?varint_to_i32(I[16][0].data):-1,M=(T=I[40])!=null&&T[0]?varint_to_i32(I[40][0].data):-1,O=n.v,L=O;t:if(M){if(O==0){D=N=2;break t}O>=604800?D=1:O>=86400?D=2:O>=3600?D=4:O>=60?D=8:O>=1?D=16:D=32,Math.floor(O)!=O?N=32:O%60?N=16:O%3600?N=8:O%86400?N=4:O%604800&&(N=2),N<D&&(N=D)}if(D==-1||N==-1)break e;var F=[],U=[];D==1&&(L=O/604800,N==1?U.push('d"d"'):(L|=0,O-=604800*L),F.push(L+(B==2?" week"+(L==1?"":"s"):B==1?"w":""))),D<=2&&N>=2&&(L=O/86400,N>2&&(L|=0,O-=86400*L),U.push('d"d"'),F.push(L+(B==2?" day"+(L==1?"":"s"):B==1?"d":""))),D<=4&&N>=4&&(L=O/3600,N>4&&(L|=0,O-=3600*L),U.push((D>=4?"[h]":"h")+'"h"'),F.push(L+(B==2?" hour"+(L==1?"":"s"):B==1?"h":""))),D<=8&&N>=8&&(L=O/60,N>8&&(L|=0,O-=60*L),U.push((D>=8?"[m]":"m")+'"m"'),B==0?F.push((D==8&&N==8||L>=10?"":"0")+L):F.push(L+(B==2?" minute"+(L==1?"":"s"):B==1?"m":""))),D<=16&&N>=16&&(L=O,N>16&&(L|=0,O-=L),U.push((D>=16?"[s]":"s")+'"s"'),B==0?F.push((N==16&&D==16||L>=10?"":"0")+L):F.push(L+(B==2?" second"+(L==1?"":"s"):B==1?"s":""))),N>=32&&(L=Math.round(1e3*O),D<32&&U.push('.000"ms"'),B==0?F.push((L>=100?"":L>=10?"0":"00")+L):F.push(L+(B==2?" millisecond"+(L==1?"":"s"):B==1?"ms":""))),n.w=F.join(B==0?":":" "),n.z=U.join(B==0?'":"':" "),B==0&&(n.w=n.w.replace(/:(\d\d\d)$/,".$1"))}}function parse_old_storage(n,r,g){var _=u8_to_dataview(n),x=_.getUint32(4,!0),S=-1,E=-1,C=-1,T=NaN,R=new Date(2001,0,1),A=g>1?12:8;x&2&&(C=_.getUint32(A,!0),A+=4),A+=popcnt(x&(g>1?3468:396))*4,x&512&&(S=_.getUint32(A,!0),A+=4),A+=popcnt(x&(g>1?12288:4096))*4,x&16&&(E=_.getUint32(A,!0),A+=4),x&32&&(T=_.getFloat64(A,!0),A+=8),x&64&&(R.setTime(R.getTime()+_.getFloat64(A,!0)*1e3),A+=8),g>1&&(x=_.getUint32(8,!0)>>>16,x&255&&(C==-1&&(C=_.getUint32(A,!0)),A+=4));var I,B=n[g>=4?1:2];switch(B){case 0:return;case 2:I={t:"n",v:T};break;case 3:I={t:"s",v:r.sst[E]};break;case 5:I={t:"d",v:R};break;case 6:I={t:"b",v:T>0};break;case 7:I={t:"n",v:T};break;case 8:I={t:"e",v:0};break;case 9:if(S>-1)I={t:"s",v:r.rsst[S]};else throw new Error("Unsupported cell type ".concat(n[subarray](0,4)));break;default:throw new Error("Unsupported cell type ".concat(n[subarray](0,4)))}return C>-1&&numbers_format_cell(I,B|g<<8,x,r.ofmt[C],r.nfmt[C]),B==7&&(I.v/=86400),I}function parse_new_storage(n,r){var g=u8_to_dataview(n);g.getUint32(4,!0);var _=g.getUint32(8,!0),x=12,S=-1,E=-1,C=-1,T=NaN,R=NaN,A=new Date(2001,0,1);_&1&&(T=readDecimal128LE(n,x),x+=16),_&2&&(R=g.getFloat64(x,!0),x+=8),_&4&&(A.setTime(A.getTime()+g.getFloat64(x,!0)*1e3),x+=8),_&8&&(E=g.getUint32(x,!0),x+=4),_&16&&(S=g.getUint32(x,!0),x+=4);var I,B=n[1];switch(B){case 0:return;case 2:I={t:"n",v:T};break;case 3:I={t:"s",v:r.sst[E]};break;case 5:I={t:"d",v:A};break;case 6:I={t:"b",v:R>0};break;case 7:I={t:"n",v:R};break;case 8:I={t:"e",v:0};break;case 9:I={t:"s",v:r.rsst[S]};break;case 10:I={t:"n",v:T};break;default:throw new Error("Unsupported cell type ".concat(n[1]," : ").concat(_&31," : ").concat(n[subarray](0,4)))}return x+=popcnt(_&8160)*4,_&516096&&(C==-1&&(C=g.getUint32(x,!0)),x+=4),C>-1&&numbers_format_cell(I,B|1280,_>>13,r.ofmt[C],r.nfmt[C]),B==7&&(I.v/=86400),I}function write_new_storage(n,r){var g=new Uint8Array(32),_=u8_to_dataview(g),x=12,S=0;switch(g[0]=5,n.t){case"n":g[1]=2,writeDecimal128LE(g,x,n.v),S|=1,x+=16;break;case"b":g[1]=6,_.setFloat64(x,n.v?1:0,!0),S|=2,x+=8;break;case"s":var E=n.v==null?"":String(n.v),C=r.indexOf(E);C==-1&&(r[C=r.length]=E),g[1]=3,_.setUint32(x,C,!0),S|=8,x+=4;break;default:throw"unsupported cell type "+n.t}return _.setUint32(8,S,!0),g[subarray](0,x)}function write_old_storage(n,r){var g=new Uint8Array(32),_=u8_to_dataview(g),x=12,S=0;switch(g[0]=4,n.t){case"n":g[2]=2,_.setFloat64(x,n.v,!0),S|=32,x+=8;break;case"b":g[2]=6,_.setFloat64(x,n.v?1:0,!0),S|=32,x+=8;break;case"s":var E=n.v==null?"":String(n.v),C=r.indexOf(E);C==-1&&(r[C=r.length]=E),g[2]=3,_.setUint32(x,C,!0),S|=16,x+=4;break;default:throw"unsupported cell type "+n.t}return _.setUint32(8,S,!0),g[subarray](0,x)}function parse_cell_storage(n,r){switch(n[0]){case 0:case 1:case 2:case 3:case 4:return parse_old_storage(n,r,n[0]);case 5:return parse_new_storage(n,r);default:throw new Error("Unsupported payload version ".concat(n[0]))}}function parse_TSP_Reference(n){var r=parse_shallow(n);return varint_to_i32(r[1][0].data)}function write_TSP_Reference(n){return write_shallow([[],[{type:0,data:write_varint49(n)}]])}function numbers_add_oref(n,r){var g,_=(g=n.messages[0].meta[5])!=null&&g[0]?parse_packed_varints(n.messages[0].meta[5][0].data):[],x=_.indexOf(r);x==-1&&(_.push(r),n.messages[0].meta[5]=[{type:2,data:write_packed_varints(_)}])}function numbers_del_oref(n,r){var g,_=(g=n.messages[0].meta[5])!=null&&g[0]?parse_packed_varints(n.messages[0].meta[5][0].data):[];n.messages[0].meta[5]=[{type:2,data:write_packed_varints(_.filter(function(x){return x!=r}))}]}function parse_TST_TableDataList(n,r){var g=parse_shallow(r.data),_=varint_to_i32(g[1][0].data),x=g[3],S=[];return(x||[]).forEach(function(E){var C=parse_shallow(E.data);if(C[1]){var T=varint_to_i32(C[1][0].data)>>>0;switch(_){case 1:S[T]=u8str(C[3][0].data);break;case 8:{var R=n[parse_TSP_Reference(C[9][0].data)][0],A=parse_shallow(R.data),I=n[parse_TSP_Reference(A[1][0].data)][0],B=varint_to_i32(I.meta[1][0].data);if(B!=2001)throw new Error("2000 unexpected reference to ".concat(B));var D=parse_shallow(I.data);S[T]=D[3].map(function(N){return u8str(N.data)}).join("")}break;case 2:S[T]=parse_shallow(C[6][0].data);break;default:throw _}}}),S}function parse_TST_TileRowInfo(n,r){var g,_,x,S,E,C,T,R,A,I,B,D,N,M,O=parse_shallow(n),L=varint_to_i32(O[1][0].data)>>>0,F=varint_to_i32(O[2][0].data)>>>0,U=((_=(g=O[8])==null?void 0:g[0])==null?void 0:_.data)&&varint_to_i32(O[8][0].data)>0||!1,j,z;if((S=(x=O[7])==null?void 0:x[0])!=null&&S.data&&r!=0)j=(C=(E=O[7])==null?void 0:E[0])==null?void 0:C.data,z=(R=(T=O[6])==null?void 0:T[0])==null?void 0:R.data;else if((I=(A=O[4])==null?void 0:A[0])!=null&&I.data&&r!=1)j=(D=(B=O[4])==null?void 0:B[0])==null?void 0:D.data,z=(M=(N=O[3])==null?void 0:N[0])==null?void 0:M.data;else throw"NUMBERS Tile missing ".concat(r," cell storage");for(var W=U?4:1,X=u8_to_dataview(j),ie=[],fe=0;fe<j.length/2;++fe){var xe=X.getUint16(fe*2,!0);xe<65535&&ie.push([fe,xe])}if(ie.length!=F)throw"Expected ".concat(F," cells, found ").concat(ie.length);var we=[];for(fe=0;fe<ie.length-1;++fe)we[ie[fe][0]]=z[subarray](ie[fe][1]*W,ie[fe+1][1]*W);return ie.length>=1&&(we[ie[ie.length-1][0]]=z[subarray](ie[ie.length-1][1]*W)),{R:L,cells:we}}function parse_TST_Tile(n,r){var g,_=parse_shallow(r.data),x=-1;(g=_?.[7])!=null&&g[0]&&(varint_to_i32(_[7][0].data)>>>0?x=1:x=0);var S=mappa(_[5],function(E){return parse_TST_TileRowInfo(E,x)});return{nrows:varint_to_i32(_[4][0].data)>>>0,data:S.reduce(function(E,C){return E[C.R]||(E[C.R]=[]),C.cells.forEach(function(T,R){if(E[C.R][R])throw new Error("Duplicate cell r=".concat(C.R," c=").concat(R));E[C.R][R]=T}),E},[])}}function parse_TST_TableModelArchive(n,r,g){var _,x,S,E,C,T,R=parse_shallow(r.data),A={s:{r:0,c:0},e:{r:0,c:0}};if(A.e.r=(varint_to_i32(R[6][0].data)>>>0)-1,A.e.r<0)throw new Error("Invalid row varint ".concat(R[6][0].data));if(A.e.c=(varint_to_i32(R[7][0].data)>>>0)-1,A.e.c<0)throw new Error("Invalid col varint ".concat(R[7][0].data));g["!ref"]=encode_range(A);var I=g["!data"]!=null,B=g,D=parse_shallow(R[4][0].data),N=numbers_lut_new();(_=D[4])!=null&&_[0]&&(N.sst=parse_TST_TableDataList(n,n[parse_TSP_Reference(D[4][0].data)][0])),(x=D[11])!=null&&x[0]&&(N.ofmt=parse_TST_TableDataList(n,n[parse_TSP_Reference(D[11][0].data)][0])),(S=D[17])!=null&&S[0]&&(N.rsst=parse_TST_TableDataList(n,n[parse_TSP_Reference(D[17][0].data)][0])),(E=D[22])!=null&&E[0]&&(N.nfmt=parse_TST_TableDataList(n,n[parse_TSP_Reference(D[22][0].data)][0]));var M=parse_shallow(D[3][0].data),O=0;if(M[1].forEach(function(U){var j=parse_shallow(U.data),z=n[parse_TSP_Reference(j[2][0].data)][0],W=varint_to_i32(z.meta[1][0].data);if(W!=6002)throw new Error("6001 unexpected reference to ".concat(W));var X=parse_TST_Tile(n,z);X.data.forEach(function(ie,fe){ie.forEach(function(xe,we){var G=parse_cell_storage(xe,N);G&&(I?(B["!data"][O+fe]||(B["!data"][O+fe]=[]),B["!data"][O+fe][we]=G):g[encode_col(we)+encode_row(O+fe)]=G)})}),O+=X.nrows}),(C=D[13])!=null&&C[0]){var L=n[parse_TSP_Reference(D[13][0].data)][0],F=varint_to_i32(L.meta[1][0].data);if(F!=6144)throw new Error("Expected merge type 6144, found ".concat(F));g["!merges"]=(T=parse_shallow(L.data))==null?void 0:T[1].map(function(U){var j=parse_shallow(U.data),z=u8_to_dataview(parse_shallow(j[1][0].data)[1][0].data),W=u8_to_dataview(parse_shallow(j[2][0].data)[1][0].data);return{s:{r:z.getUint16(0,!0),c:z.getUint16(2,!0)},e:{r:z.getUint16(0,!0)+W.getUint16(0,!0)-1,c:z.getUint16(2,!0)+W.getUint16(2,!0)-1}}})}}function parse_TST_TableInfoArchive(n,r,g){var _=parse_shallow(r.data),x={"!ref":"A1"};g?.dense&&(x["!data"]=[]);var S=n[parse_TSP_Reference(_[2][0].data)],E=varint_to_i32(S[0].meta[1][0].data);if(E!=6001)throw new Error("6000 unexpected reference to ".concat(E));return parse_TST_TableModelArchive(n,S[0],x),x}function parse_TN_SheetArchive(n,r,g){var _,x=parse_shallow(r.data),S={name:(_=x[1])!=null&&_[0]?u8str(x[1][0].data):"",sheets:[]},E=mappa(x[2],parse_TSP_Reference);return E.forEach(function(C){n[C].forEach(function(T){var R=varint_to_i32(T.meta[1][0].data);R==6e3&&S.sheets.push(parse_TST_TableInfoArchive(n,T,g))})}),S}function parse_TN_DocumentArchive(n,r,g){var _,x=book_new(),S=parse_shallow(r.data);if((_=S[2])!=null&&_[0])throw new Error("Keynote presentations are not supported");var E=mappa(S[1],parse_TSP_Reference);if(E.forEach(function(C){n[C].forEach(function(T){var R=varint_to_i32(T.meta[1][0].data);if(R==2){var A=parse_TN_SheetArchive(n,T,g);A.sheets.forEach(function(I,B){book_append_sheet(x,I,B==0?A.name:A.name+"_"+B,!0)})}})}),x.SheetNames.length==0)throw new Error("Empty NUMBERS file");return x.bookType="numbers",x}function parse_numbers_iwa(n,r){var g,_,x,S,E,C,T,R={},A=[];if(n.FullPaths.forEach(function(B){if(B.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),n.FileIndex.forEach(function(B){if(B.name.match(/\.iwa$/)&&B.content[0]==0){var D;try{D=decompress_iwa_file(B.content)}catch(M){return console.log("?? "+B.content.length+" "+(M.message||M))}var N;try{N=parse_iwa_file(D)}catch(M){return console.log("## "+(M.message||M))}N.forEach(function(M){R[M.id]=M.messages,A.push(M.id)})}}),!A.length)throw new Error("File has no messages");if((x=(_=(g=R?.[1])==null?void 0:g[0].meta)==null?void 0:_[1])!=null&&x[0].data&&varint_to_i32(R[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var I=((T=(C=(E=(S=R?.[1])==null?void 0:S[0])==null?void 0:E.meta)==null?void 0:C[1])==null?void 0:T[0].data)&&varint_to_i32(R[1][0].meta[1][0].data)==1&&R[1][0];if(I||A.forEach(function(B){R[B].forEach(function(D){var N=varint_to_i32(D.meta[1][0].data)>>>0;if(N==1)if(!I)I=D;else throw new Error("Document has multiple roots")})}),!I)throw new Error("Cannot find Document root");return parse_TN_DocumentArchive(R,I,r)}function write_TST_TileRowInfo(n,r,g){var _,x,S=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(1)}]];if(!((_=S[6])!=null&&_[0])||!((x=S[7])!=null&&x[0]))throw"Mutation only works on post-BNC storages!";var E=0;if(S[7][0].data.length<2*n.length){var C=new Uint8Array(2*n.length);C.set(S[7][0].data),S[7][0].data=C}if(S[4][0].data.length<2*n.length){var T=new Uint8Array(2*n.length);T.set(S[4][0].data),S[4][0].data=T}for(var R=u8_to_dataview(S[7][0].data),A=0,I=[],B=u8_to_dataview(S[4][0].data),D=0,N=[],M=4,O=0;O<n.length;++O){if(n[O]==null){R.setUint16(O*2,65535,!0),B.setUint16(O*2,65535);continue}R.setUint16(O*2,A/M,!0),B.setUint16(O*2,D/M,!0);var L,F;switch(typeof n[O]){case"string":L=write_new_storage({t:"s",v:n[O]},r),F=write_old_storage({t:"s",v:n[O]},r);break;case"number":L=write_new_storage({t:"n",v:n[O]},r),F=write_old_storage({t:"n",v:n[O]},r);break;case"boolean":L=write_new_storage({t:"b",v:n[O]},r),F=write_old_storage({t:"b",v:n[O]},r);break;default:if(n[O]instanceof Date){L=write_new_storage({t:"s",v:n[O].toISOString()},r),F=write_old_storage({t:"s",v:n[O].toISOString()},r);break}throw new Error("Unsupported value "+n[O])}I.push(L),A+=L.length,N.push(F),D+=F.length,++E}for(S[2][0].data=write_varint49(E),S[5][0].data=write_varint49(5);O<S[7][0].data.length/2;++O)R.setUint16(O*2,65535,!0),B.setUint16(O*2,65535,!0);return S[6][0].data=u8concat(I),S[3][0].data=u8concat(N),S[8]=[{type:0,data:write_varint49(1)}],S}function write_iwam(n,r){return{meta:[[],[{type:0,data:write_varint49(n)}]],data:r}}function get_unique_msgid(n,r){r.last||(r.last=927262);for(var g=r.last;g<2e6;++g)if(!r[g])return r[r.last=g]=n,g;throw new Error("Too many messages")}function build_numbers_deps(n){var r={},g=[];return n.FileIndex.map(function(_,x){return[_,n.FullPaths[x]]}).forEach(function(_){var x=_[0],S=_[1];x.type==2&&x.name.match(/\.iwa/)&&x.content[0]==0&&parse_iwa_file(decompress_iwa_file(x.content)).forEach(function(E){g.push(E.id),r[E.id]={deps:[],location:S,type:varint_to_i32(E.messages[0].meta[1][0].data)}})}),n.FileIndex.forEach(function(_){_.name.match(/\.iwa/)&&_.content[0]==0&&parse_iwa_file(decompress_iwa_file(_.content)).forEach(function(x){x.messages.forEach(function(S){[5,6].forEach(function(E){S.meta[E]&&S.meta[E].forEach(function(C){r[x.id].deps.push(varint_to_i32(C.data))})})})})}),r}function write_numbers_iwa(n,r){if(!r||!r.numbers)throw new Error("Must pass a `numbers` option -- check the README");var g=CFB.read(r.numbers,{type:"base64"}),_=build_numbers_deps(g),x=numbers_iwa_find(g,_,1);if(x==null)throw"Could not find message ".concat(1," in Numbers template");var S=mappa(parse_shallow(x.messages[0].data)[1],parse_TSP_Reference);if(S.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return n.SheetNames.forEach(function(E,C){C>=1&&(numbers_add_ws(g,_,C+1),x=numbers_iwa_find(g,_,1),S=mappa(parse_shallow(x.messages[0].data)[1],parse_TSP_Reference)),write_numbers_ws(g,_,n.Sheets[E],E,C,S[C])}),g}function numbers_iwa_doit(n,r,g,_){var x=CFB.find(n,r[g].location);if(!x)throw"Could not find ".concat(r[g].location," in Numbers template");var S=parse_iwa_file(decompress_iwa_file(x.content)),E=S.find(function(C){return C.id==g});_(E,S),x.content=compress_iwa_file(write_iwa_file(S)),x.size=x.content.length}function numbers_iwa_find(n,r,g){var _=CFB.find(n,r[g].location);if(!_)throw"Could not find ".concat(r[g].location," in Numbers template");var x=parse_iwa_file(decompress_iwa_file(_.content)),S=x.find(function(E){return E.id==g});return S}function numbers_add_ws(n,r,g){var _=-1,x=-1,S={};numbers_iwa_doit(n,r,1,function(R,A){var I=parse_shallow(R.messages[0].data);_=parse_TSP_Reference(parse_shallow(R.messages[0].data)[1][0].data),x=get_unique_msgid({deps:[1],location:r[_].location,type:2},r),S[_]=x,numbers_add_oref(R,x),I[1].push({type:2,data:write_TSP_Reference(x)});var B=numbers_iwa_find(n,r,_);B.id=x,r[1].location==r[x].location?A.push(B):numbers_iwa_doit(n,r,x,function(D,N){return N.push(B)}),R.messages[0].data=write_shallow(I)});var E=-1;numbers_iwa_doit(n,r,x,function(R,A){for(var I=parse_shallow(R.messages[0].data),B=3;B<=69;++B)delete I[B];var D=mappa(I[2],parse_TSP_Reference);D.forEach(function(O){return numbers_del_oref(R,O)}),E=get_unique_msgid({deps:[x],location:r[D[0]].location,type:r[D[0]].type},r),numbers_add_oref(R,E),S[D[0]]=E,I[2]=[{type:2,data:write_TSP_Reference(E)}];var N=numbers_iwa_find(n,r,D[0]);if(N.id=E,r[D[0]].location==r[x].location)A.push(N);else{var M=r[x].location;M=M.replace(/^Root Entry\//,""),M=M.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(n,r,2,function(O){var L=parse_shallow(O.messages[0].data),F=L[3].findIndex(function(j){var z,W,X=parse_shallow(j.data);return(z=X[3])!=null&&z[0]?u8str(X[3][0].data)==M:!!((W=X[2])!=null&&W[0]&&u8str(X[2][0].data)==M)}),U=parse_shallow(L[3][F].data);U[6]||(U[6]=[]),U[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(E)}]])}),L[3][F].data=write_shallow(U),O.messages[0].data=write_shallow(L)}),numbers_iwa_doit(n,r,E,function(O,L){return L.push(N)})}R.messages[0].data=write_shallow(I)});var C=-1;numbers_iwa_doit(n,r,E,function(R,A){for(var I=parse_shallow(R.messages[0].data),B=parse_shallow(I[1][0].data),D=3;D<=69;++D)delete B[D];var N=parse_TSP_Reference(B[2][0].data);B[2][0].data=write_TSP_Reference(S[N]),I[1][0].data=write_shallow(B);var M=parse_TSP_Reference(I[2][0].data);numbers_del_oref(R,M),C=get_unique_msgid({deps:[E],location:r[M].location,type:r[M].type},r),numbers_add_oref(R,C),S[M]=C,I[2][0].data=write_TSP_Reference(C);var O=numbers_iwa_find(n,r,M);O.id=C,r[E].location==r[C].location?A.push(O):numbers_iwa_doit(n,r,C,function(L,F){return F.push(O)}),R.messages[0].data=write_shallow(I)});var T=r[C].location;T=T.replace(/^Root Entry\//,""),T=T.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(n,r,C,function(R,A){var I,B,D=parse_shallow(R.messages[0].data),N=u8str(D[1][0].data),M=N.replace(/-[A-Z0-9]*/,"-".concat(g.toString(16).padStart(4,"0")));if(D[1][0].data=stru8(M),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(W){return delete D[W]}),D[45]){var O=parse_shallow(D[45][0].data),L=parse_TSP_Reference(O[1][0].data);numbers_del_oref(R,L),delete D[45]}if(D[70]){var F=parse_shallow(D[70][0].data);(I=F[2])==null||I.forEach(function(W){var X=parse_shallow(W.data);[2,3].map(function(ie){return X[ie][0]}).forEach(function(ie){var fe=parse_shallow(ie.data);if(fe[8]){var xe=parse_TSP_Reference(fe[8][0].data);numbers_del_oref(R,xe)}})}),delete D[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(W){if(D[W]){var X=parse_TSP_Reference(D[W][0].data);delete D[W],numbers_del_oref(R,X)}});var U=parse_shallow(D[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(W){var X;if((X=U[W])!=null&&X[0]){var ie=parse_TSP_Reference(U[W][0].data),fe=get_unique_msgid({deps:[C],location:r[ie].location,type:r[ie].type},r);numbers_del_oref(R,ie),numbers_add_oref(R,fe),S[ie]=fe;var xe=numbers_iwa_find(n,r,ie);if(xe.id=fe,r[ie].location==r[C].location)A.push(xe);else{r[fe].location=r[ie].location.replace(ie.toString(),fe.toString()),r[fe].location==r[ie].location&&(r[fe].location=r[fe].location.replace(/\.iwa/,"-".concat(fe,".iwa"))),CFB.utils.cfb_add(n,r[fe].location,compress_iwa_file(write_iwa_file([xe])));var we=r[fe].location;we=we.replace(/^Root Entry\//,""),we=we.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(n,r,2,function(G){var J=parse_shallow(G.messages[0].data);J[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(fe)}],[{type:2,data:stru8(we.replace(/-.*$/,""))}],[{type:2,data:stru8(we)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),J[1]=[{type:0,data:write_varint49(Math.max(fe+1,varint_to_i32(J[1][0].data)))}];var q=J[3].findIndex(function(ve){var Z,ce,ue=parse_shallow(ve.data);return(Z=ue[3])!=null&&Z[0]?u8str(ue[3][0].data)==T:!!((ce=ue[2])!=null&&ce[0]&&u8str(ue[2][0].data)==T)}),H=parse_shallow(J[3][q].data);H[6]||(H[6]=[]),H[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(fe)}]])}),J[3][q].data=write_shallow(H),G.messages[0].data=write_shallow(J)})}U[W][0].data=write_TSP_Reference(fe)}});var j=parse_shallow(U[1][0].data);(B=j[2])==null||B.forEach(function(W){var X=parse_TSP_Reference(W.data),ie=get_unique_msgid({deps:[C],location:r[X].location,type:r[X].type},r);numbers_del_oref(R,X),numbers_add_oref(R,ie),S[X]=ie;var fe=numbers_iwa_find(n,r,X);if(fe.id=ie,r[X].location==r[C].location)A.push(fe);else{r[ie].location=r[X].location.replace(X.toString(),ie.toString()),r[ie].location==r[X].location&&(r[ie].location=r[ie].location.replace(/\.iwa/,"-".concat(ie,".iwa"))),CFB.utils.cfb_add(n,r[ie].location,compress_iwa_file(write_iwa_file([fe])));var xe=r[ie].location;xe=xe.replace(/^Root Entry\//,""),xe=xe.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(n,r,2,function(we){var G=parse_shallow(we.messages[0].data);G[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ie)}],[{type:2,data:stru8(xe.replace(/-.*$/,""))}],[{type:2,data:stru8(xe)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),G[1]=[{type:0,data:write_varint49(Math.max(ie+1,varint_to_i32(G[1][0].data)))}];var J=G[3].findIndex(function(H){var ve,Z,ce=parse_shallow(H.data);return(ve=ce[3])!=null&&ve[0]?u8str(ce[3][0].data)==T:!!((Z=ce[2])!=null&&Z[0]&&u8str(ce[2][0].data)==T)}),q=parse_shallow(G[3][J].data);q[6]||(q[6]=[]),q[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(ie)}]])}),G[3][J].data=write_shallow(q),we.messages[0].data=write_shallow(G)})}W.data=write_TSP_Reference(ie)}),U[1][0].data=write_shallow(j);var z=parse_shallow(U[3][0].data);z[1].forEach(function(W){var X=parse_shallow(W.data),ie=parse_TSP_Reference(X[2][0].data),fe=S[ie];if(!S[ie]){fe=get_unique_msgid({deps:[C],location:"",type:r[ie].type},r),r[fe].location="Root Entry/Index/Tables/Tile-".concat(fe,".iwa"),S[ie]=fe;var xe=numbers_iwa_find(n,r,ie);xe.id=fe,numbers_del_oref(R,ie),numbers_add_oref(R,fe),CFB.utils.cfb_add(n,"/Index/Tables/Tile-".concat(fe,".iwa"),compress_iwa_file(write_iwa_file([xe]))),numbers_iwa_doit(n,r,2,function(we){var G=parse_shallow(we.messages[0].data);G[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(fe)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(fe))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),G[1]=[{type:0,data:write_varint49(Math.max(fe+1,varint_to_i32(G[1][0].data)))}];var J=G[3].findIndex(function(H){var ve,Z,ce=parse_shallow(H.data);return(ve=ce[3])!=null&&ve[0]?u8str(ce[3][0].data)==T:!!((Z=ce[2])!=null&&Z[0]&&u8str(ce[2][0].data)==T)}),q=parse_shallow(G[3][J].data);q[6]||(q[6]=[]),q[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(fe)}]])}),G[3][J].data=write_shallow(q),we.messages[0].data=write_shallow(G)})}X[2][0].data=write_TSP_Reference(fe),W.data=write_shallow(X)}),U[3][0].data=write_shallow(z)}D[4][0].data=write_shallow(U),R.messages[0].data=write_shallow(D)})}function write_numbers_ws(n,r,g,_,x,S){var E=[];numbers_iwa_doit(n,r,S,function(R){var A=parse_shallow(R.messages[0].data);A[1]=[{type:2,data:stru8(_)}],E=mappa(A[2],parse_TSP_Reference),R.messages[0].data=write_shallow(A)});var C=numbers_iwa_find(n,r,E[0]),T=parse_TSP_Reference(parse_shallow(C.messages[0].data)[2][0].data);numbers_iwa_doit(n,r,T,function(R,A){return write_numbers_tma(n,r,g,R,A,T)})}function write_numbers_tma(n,r,g,_,x,S){var E=decode_range(g["!ref"]);E.s.r=E.s.c=0;var C=!1;E.e.c>999&&(C=!0,E.e.c=999),E.e.r>999999&&(C=!0,E.e.r=999999),C&&console.error("Truncating to ".concat(encode_range(E)));var T=sheet_to_json(g,{range:E,header:1}),R=["~Sh33tJ5~"],A=r[S].location;A=A.replace(/^Root Entry\//,""),A=A.replace(/^Index\//,"").replace(/\.iwa$/,"");var I=parse_shallow(_.messages[0].data);{I[6][0].data=write_varint49(E.e.r+1),I[7][0].data=write_varint49(E.e.c+1),delete I[46];var B=parse_shallow(I[4][0].data);{var D=parse_TSP_Reference(parse_shallow(B[1][0].data)[2][0].data);numbers_iwa_doit(n,r,D,function(q,H){var ve,Z=parse_shallow(q.messages[0].data);if((ve=Z?.[2])!=null&&ve[0])for(var ce=0;ce<T.length;++ce){var ue=parse_shallow(Z[2][0].data);ue[1][0].data=write_varint49(ce),ue[4][0].data=write_varint49(T[ce].length),Z[2][ce]={type:Z[2][0].type,data:write_shallow(ue)}}q.messages[0].data=write_shallow(Z)});var N=parse_TSP_Reference(B[2][0].data);numbers_iwa_doit(n,r,N,function(q,H){for(var ve=parse_shallow(q.messages[0].data),Z=0;Z<=E.e.c;++Z){var ce=parse_shallow(ve[2][0].data);ce[1][0].data=write_varint49(Z),ce[4][0].data=write_varint49(E.e.r+1),ve[2][Z]={type:ve[2][0].type,data:write_shallow(ce)}}q.messages[0].data=write_shallow(ve)});var M=parse_shallow(B[9][0].data);M[1]=[];var O=parse_shallow(B[3][0].data);{var L=256;O[2]=[{type:0,data:write_varint49(L)}];var F=parse_TSP_Reference(parse_shallow(O[1][0].data)[2][0].data),U=function(){var q=numbers_iwa_find(n,r,2),H=parse_shallow(q.messages[0].data),ve=H[3].filter(function(Z){return varint_to_i32(parse_shallow(Z.data)[1][0].data)==F});return ve?.length?varint_to_i32(parse_shallow(ve[0].data)[12][0].data):0}();CFB.utils.cfb_del(n,r[F].location),numbers_iwa_doit(n,r,2,function(q){var H=parse_shallow(q.messages[0].data);H[3]=H[3].filter(function(ce){return varint_to_i32(parse_shallow(ce.data)[1][0].data)!=F});var ve=H[3].findIndex(function(ce){var ue,se,te=parse_shallow(ce.data);return(ue=te[3])!=null&&ue[0]?u8str(te[3][0].data)==A:!!((se=te[2])!=null&&se[0]&&u8str(te[2][0].data)==A)}),Z=parse_shallow(H[3][ve].data);Z[6]||(Z[6]=[]),Z[6]=Z[6].filter(function(ce){return varint_to_i32(parse_shallow(ce.data)[1][0].data)!=F}),H[3][ve].data=write_shallow(Z),q.messages[0].data=write_shallow(H)}),numbers_del_oref(_,F),O[1]=[];for(var j=Math.ceil((E.e.r+1)/L),z=0;z<j;++z){var W=get_unique_msgid({deps:[],location:"",type:6002},r);r[W].location="Root Entry/Index/Tables/Tile-".concat(W,".iwa");for(var X=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min(E.e.r+1,(z+1)*L))}],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min((z+1)*L,E.e.r+1)-z*L)}],[],[{type:0,data:write_varint49(5)}],[{type:0,data:write_varint49(1)}],[{type:0,data:write_varint49(1)}]],ie=z*L;ie<=Math.min(E.e.r,(z+1)*L-1);++ie){var fe=write_TST_TileRowInfo(T[ie],R);fe[1][0].data=write_varint49(ie-z*L),X[5].push({data:write_shallow(fe),type:2})}O[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(z)}],[{type:2,data:write_TSP_Reference(W)}]])});var xe={id:W,messages:[write_iwam(6002,write_shallow(X))]},we=compress_iwa_file(write_iwa_file([xe]));CFB.utils.cfb_add(n,"/Index/Tables/Tile-".concat(W,".iwa"),we),numbers_iwa_doit(n,r,2,function(q){var H=parse_shallow(q.messages[0].data);H[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(W)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(W))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(U)}]])}),H[1]=[{type:0,data:write_varint49(Math.max(W+1,varint_to_i32(H[1][0].data)))}];var ve=H[3].findIndex(function(ce){var ue,se,te=parse_shallow(ce.data);return(ue=te[3])!=null&&ue[0]?u8str(te[3][0].data)==A:!!((se=te[2])!=null&&se[0]&&u8str(te[2][0].data)==A)}),Z=parse_shallow(H[3][ve].data);Z[6]||(Z[6]=[]),Z[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(W)}]])}),H[3][ve].data=write_shallow(Z),q.messages[0].data=write_shallow(H)}),numbers_add_oref(_,W),M[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(z*L)}],[{type:0,data:write_varint49(z)}]])})}}if(B[3][0].data=write_shallow(O),B[9][0].data=write_shallow(M),B[10]=[{type:2,data:new Uint8Array([])}],g["!merges"]){var G=get_unique_msgid({type:6144,deps:[S],location:r[S].location},r);x.push({id:G,messages:[write_iwam(6144,write_shallow([[],g["!merges"].map(function(q){return{type:2,data:write_shallow([[],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([q.s.r,q.s.c]).buffer)}]])}],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([q.e.r-q.s.r+1,q.e.c-q.s.c+1]).buffer)}]])}]])}})]))]}),B[13]=[{type:2,data:write_TSP_Reference(G)}],numbers_iwa_doit(n,r,2,function(q){var H=parse_shallow(q.messages[0].data),ve=H[3].findIndex(function(ce){var ue,se,te=parse_shallow(ce.data);return(ue=te[3])!=null&&ue[0]?u8str(te[3][0].data)==A:!!((se=te[2])!=null&&se[0]&&u8str(te[2][0].data)==A)}),Z=parse_shallow(H[3][ve].data);Z[6]||(Z[6]=[]),Z[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(G)}]])}),H[3][ve].data=write_shallow(Z),q.messages[0].data=write_shallow(H)}),numbers_add_oref(_,G)}else delete B[13];var J=parse_TSP_Reference(B[4][0].data);numbers_iwa_doit(n,r,J,function(q){var H=parse_shallow(q.messages[0].data);H[3]=[],R.forEach(function(ve,Z){Z!=0&&H[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Z)}],[{type:0,data:write_varint49(1)}],[{type:2,data:stru8(ve)}]])})}),q.messages[0].data=write_shallow(H)})}I[4][0].data=write_shallow(B)}_.messages[0].data=write_shallow(I)}function fix_opts_func(n){return function(g){for(var _=0;_!=n.length;++_){var x=n[_];g[x[0]]===void 0&&(g[x[0]]=x[1]),x[2]==="n"&&(g[x[0]]=Number(g[x[0]]))}}}function fix_read_opts(n){fix_opts_func([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(n)}function fix_write_opts(n){fix_opts_func([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function get_sheet_type(n){return RELS.WS.indexOf(n)>-1?"sheet":n==RELS.CS?"chart":n==RELS.DS?"dialog":n==RELS.MS?"macro":n&&n.length?n:"sheet"}function safe_parse_wbrels(n,r){if(!n)return 0;try{n=r.map(function(_){return _.id||(_.id=_.strRelID),[_.name,n["!id"][_.id].Target,get_sheet_type(n["!id"][_.id].Type)]})}catch{return null}return!n||n.length===0?null:n}function safe_parse_sheet(n,r,g,_,x,S,E,C,T,R,A,I){try{S[_]=parse_rels(getzipstr(n,g,!0),r);var B=getzipdata(n,r),D;switch(C){case"sheet":D=parse_ws(B,r,x,T,S[_],R,A,I);break;case"chart":if(D=parse_cs(B,r,x,T,S[_],R,A,I),!D||!D["!drawel"])break;var N=resolve_path(D["!drawel"].Target,r),M=get_rels_path(N),O=parse_drawing(getzipstr(n,N,!0),parse_rels(getzipstr(n,M,!0),N)),L=resolve_path(O,N),F=get_rels_path(L);D=parse_chart(getzipstr(n,L,!0),L,T,parse_rels(getzipstr(n,F,!0),L),R,D);break;case"macro":D=parse_ms(B,r,x,T,S[_],R,A,I);break;case"dialog":D=parse_ds(B,r,x,T,S[_],R,A,I);break;default:throw new Error("Unrecognized sheet type "+C)}E[_]=D;var U=[],j=[];S&&S[_]&&keys$2(S[_]).forEach(function(z){var W="";if(S[_][z].Type==RELS.CMNT){if(W=resolve_path(S[_][z].Target,r),U=parse_cmnt(getzipdata(n,W,!0),W,T),!U||!U.length)return;sheet_insert_comments(D,U,!1)}S[_][z].Type==RELS.TCMNT&&(W=resolve_path(S[_][z].Target,r),j=j.concat(parse_tcmnt_xml(getzipdata(n,W,!0),T)))}),j&&j.length&&sheet_insert_comments(D,j,!0,T.people||[])}catch(z){if(T.WTF)throw z}}function strip_front_slash(n){return n.charAt(0)=="/"?n.slice(1):n}function parse_zip(n,r){if(make_ssf(),r=r||{},fix_read_opts(r),safegetzipfile(n,"META-INF/manifest.xml")||safegetzipfile(n,"objectdata.xml"))return parse_ods(n,r);if(safegetzipfile(n,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof parse_numbers_iwa<"u"){if(n.FileIndex)return parse_numbers_iwa(n,r);var g=CFB.utils.cfb_new();return zipentries(n).forEach(function(H){zip_add_file(g,H,getzipbin(n,H))}),parse_numbers_iwa(g,r)}throw new Error("Unsupported NUMBERS file")}if(!safegetzipfile(n,"[Content_Types].xml")){if(safegetzipfile(n,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(safegetzipfile(n,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var _=CFB.find(n,"Index.zip");if(_)return r=dup(r),delete r.type,typeof _.content=="string"&&(r.type="binary"),typeof Bun<"u"&&Buffer$1.isBuffer(_.content)?readSync(new Uint8Array(_.content),r):readSync(_.content,r);throw new Error("Unsupported ZIP file")}var x=zipentries(n),S=parse_ct(getzipstr(n,"[Content_Types].xml")),E=!1,C,T;if(S.workbooks.length===0&&(T="xl/workbook.xml",getzipdata(n,T,!0)&&S.workbooks.push(T)),S.workbooks.length===0){if(T="xl/workbook.bin",!getzipdata(n,T,!0))throw new Error("Could not find workbook");S.workbooks.push(T),E=!0}S.workbooks[0].slice(-3)=="bin"&&(E=!0);var R={},A={};if(!r.bookSheets&&!r.bookProps){if(strs=[],S.sst)try{strs=parse_sst(getzipdata(n,strip_front_slash(S.sst)),S.sst,r)}catch(H){if(r.WTF)throw H}r.cellStyles&&S.themes.length&&(R=parse_theme_xml(getzipstr(n,S.themes[0].replace(/^\//,""),!0)||"",r)),S.style&&(A=parse_sty(getzipdata(n,strip_front_slash(S.style)),S.style,R,r))}S.links.map(function(H){try{var ve=parse_rels(getzipstr(n,get_rels_path(strip_front_slash(H))),H);return parse_xlink(getzipdata(n,strip_front_slash(H)),ve,H,r)}catch{}});var I=parse_wb(getzipdata(n,strip_front_slash(S.workbooks[0])),S.workbooks[0],r),B={},D="";S.coreprops.length&&(D=getzipdata(n,strip_front_slash(S.coreprops[0]),!0),D&&(B=parse_core_props(D)),S.extprops.length!==0&&(D=getzipdata(n,strip_front_slash(S.extprops[0]),!0),D&&parse_ext_props(D,B,r)));var N={};(!r.bookSheets||r.bookProps)&&S.custprops.length!==0&&(D=getzipstr(n,strip_front_slash(S.custprops[0]),!0),D&&(N=parse_cust_props(D,r)));var M={};if((r.bookSheets||r.bookProps)&&(I.Sheets?C=I.Sheets.map(function(ve){return ve.name}):B.Worksheets&&B.SheetNames.length>0&&(C=B.SheetNames),r.bookProps&&(M.Props=B,M.Custprops=N),r.bookSheets&&typeof C<"u"&&(M.SheetNames=C),r.bookSheets?M.SheetNames:r.bookProps))return M;C={};var O={};r.bookDeps&&S.calcchain&&(O=parse_cc(getzipdata(n,strip_front_slash(S.calcchain)),S.calcchain));var L=0,F={},U,j;{var z=I.Sheets;B.Worksheets=z.length,B.SheetNames=[];for(var W=0;W!=z.length;++W)B.SheetNames[W]=z[W].name}var X=E?"bin":"xml",ie=S.workbooks[0].lastIndexOf("/"),fe=(S.workbooks[0].slice(0,ie+1)+"_rels/"+S.workbooks[0].slice(ie+1)+".rels").replace(/^\//,"");safegetzipfile(n,fe)||(fe="xl/_rels/workbook."+X+".rels");var xe=parse_rels(getzipstr(n,fe,!0),fe.replace(/_rels.*/,"s5s"));(S.metadata||[]).length>=1&&(r.xlmeta=parse_xlmeta(getzipdata(n,strip_front_slash(S.metadata[0])),S.metadata[0],r)),(S.people||[]).length>=1&&(r.people=parse_people_xml(getzipdata(n,strip_front_slash(S.people[0])),r)),xe&&(xe=safe_parse_wbrels(xe,I.Sheets));var we=getzipdata(n,"xl/worksheets/sheet.xml",!0)?1:0;e:for(L=0;L!=B.Worksheets;++L){var G="sheet";if(xe&&xe[L]?(U="xl/"+xe[L][1].replace(/[\/]?xl\//,""),safegetzipfile(n,U)||(U=xe[L][1]),safegetzipfile(n,U)||(U=fe.replace(/_rels\/.*$/,"")+xe[L][1]),G=xe[L][2]):(U="xl/worksheets/sheet"+(L+1-we)+"."+X,U=U.replace(/sheet0\./,"sheet.")),j=U.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),r&&r.sheets!=null)switch(typeof r.sheets){case"number":if(L!=r.sheets)continue e;break;case"string":if(B.SheetNames[L].toLowerCase()!=r.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(r.sheets)){for(var J=!1,q=0;q!=r.sheets.length;++q)typeof r.sheets[q]=="number"&&r.sheets[q]==L&&(J=1),typeof r.sheets[q]=="string"&&r.sheets[q].toLowerCase()==B.SheetNames[L].toLowerCase()&&(J=1);if(!J)continue e}}safe_parse_sheet(n,U,j,B.SheetNames[L],L,F,C,G,r,I,R,A)}return M={Directory:S,Workbook:I,Props:B,Custprops:N,Deps:O,Sheets:C,SheetNames:B.SheetNames,Strings:strs,Styles:A,Themes:R,SSF:dup(table_fmt)},r&&r.bookFiles&&(n.files?(M.keys=x,M.files=n.files):(M.keys=[],M.files={},n.FullPaths.forEach(function(H,ve){H=H.replace(/^Root Entry[\/]/,""),M.keys.push(H),M.files[H]=n.FileIndex[ve]}))),r&&r.bookVBA&&(S.vba.length>0?M.vbaraw=getzipdata(n,strip_front_slash(S.vba[0]),!0):S.defaults&&S.defaults.bin===CT_VBA&&(M.vbaraw=getzipdata(n,"xl/vbaProject.bin",!0))),M.bookType=E?"xlsb":"xlsx",M}function parse_xlsxcfb(n,r){var g=r||{},_="Workbook",x=CFB.find(n,_);try{if(_="/!DataSpaces/Version",x=CFB.find(n,_),!x||!x.content)throw new Error("ECMA-376 Encrypted file missing "+_);if(parse_DataSpaceVersionInfo(x.content),_="/!DataSpaces/DataSpaceMap",x=CFB.find(n,_),!x||!x.content)throw new Error("ECMA-376 Encrypted file missing "+_);var S=parse_DataSpaceMap(x.content);if(S.length!==1||S[0].comps.length!==1||S[0].comps[0].t!==0||S[0].name!=="StrongEncryptionDataSpace"||S[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+_);if(_="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",x=CFB.find(n,_),!x||!x.content)throw new Error("ECMA-376 Encrypted file missing "+_);var E=parse_DataSpaceDefinition(x.content);if(E.length!=1||E[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+_);if(_="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",x=CFB.find(n,_),!x||!x.content)throw new Error("ECMA-376 Encrypted file missing "+_);parse_Primary(x.content)}catch{}if(_="/EncryptionInfo",x=CFB.find(n,_),!x||!x.content)throw new Error("ECMA-376 Encrypted file missing "+_);var C=parse_EncryptionInfo(x.content);if(_="/EncryptedPackage",x=CFB.find(n,_),!x||!x.content)throw new Error("ECMA-376 Encrypted file missing "+_);if(C[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(C[1],x.content,g.password||"",g);if(C[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(C[1],x.content,g.password||"",g);throw new Error("File is password-protected")}function write_zip_xlsb(n,r){n&&!n.SSF&&(n.SSF=dup(table_fmt)),n&&n.SSF&&(make_ssf(),SSF_load_table(n.SSF),r.revssf=evert_num(n.SSF),r.revssf[n.SSF[65535]]=0,r.ssf=n.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,browser_has_Map?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var g="bin",_=!0,x=new_ct();fix_write_opts(r=r||{});var S=zip_new(),E="",C=0;if(r.cellXfs=[],get_cell_style(r.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),E="docProps/core.xml",zip_add_file(S,E,write_core_props(n.Props,r)),x.coreprops.push(E),add_rels(r.rels,2,E,RELS.CORE_PROPS),E="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var T=[],R=0;R<n.SheetNames.length;++R)(n.Workbook.Sheets[R]||{}).Hidden!=2&&T.push(n.SheetNames[R]);n.Props.SheetNames=T}for(n.Props.Worksheets=n.Props.SheetNames.length,zip_add_file(S,E,write_ext_props(n.Props)),x.extprops.push(E),add_rels(r.rels,3,E,RELS.EXT_PROPS),n.Custprops!==n.Props&&keys$2(n.Custprops||{}).length>0&&(E="docProps/custom.xml",zip_add_file(S,E,write_cust_props(n.Custprops)),x.custprops.push(E),add_rels(r.rels,4,E,RELS.CUST_PROPS)),C=1;C<=n.SheetNames.length;++C){var A={"!id":{}},I=n.Sheets[n.SheetNames[C-1]],B=(I||{})["!type"]||"sheet";switch(B){case"chart":default:E="xl/worksheets/sheet"+C+"."+g,zip_add_file(S,E,write_ws_bin(C-1,r,n,A)),x.sheets.push(E),add_rels(r.wbrels,-1,"worksheets/sheet"+C+"."+g,RELS.WS[0])}if(I){var D=I["!comments"],N=!1,M="";D&&D.length>0&&(M="xl/comments"+C+"."+g,zip_add_file(S,M,write_comments_bin(D)),x.comments.push(M),add_rels(A,-1,"../comments"+C+"."+g,RELS.CMNT),N=!0),I["!legacy"]&&N&&zip_add_file(S,"xl/drawings/vmlDrawing"+C+".vml",write_vml(C,I["!comments"])),delete I["!comments"],delete I["!legacy"]}A["!id"].rId1&&zip_add_file(S,get_rels_path(E),write_rels(A))}r.Strings!=null&&r.Strings.length>0&&(E="xl/sharedStrings."+g,zip_add_file(S,E,write_sst_bin(r.Strings)),x.strs.push(E),add_rels(r.wbrels,-1,"sharedStrings."+g,RELS.SST)),E="xl/workbook."+g,zip_add_file(S,E,write_wb_bin(n)),x.workbooks.push(E),add_rels(r.rels,1,E,RELS.WB),E="xl/theme/theme1.xml";var O=write_theme(n.Themes,r);return zip_add_file(S,E,O),x.themes.push(E),add_rels(r.wbrels,-1,"theme/theme1.xml",RELS.THEME),E="xl/styles."+g,zip_add_file(S,E,write_sty_bin(n,r)),x.styles.push(E),add_rels(r.wbrels,-1,"styles."+g,RELS.STY),n.vbaraw&&_&&(E="xl/vbaProject.bin",zip_add_file(S,E,n.vbaraw),x.vba.push(E),add_rels(r.wbrels,-1,"vbaProject.bin",RELS.VBA)),E="xl/metadata."+g,zip_add_file(S,E,write_xlmeta_bin()),x.metadata.push(E),add_rels(r.wbrels,-1,"metadata."+g,RELS.XLMETA),zip_add_file(S,"[Content_Types].xml",write_ct(x,r)),zip_add_file(S,"_rels/.rels",write_rels(r.rels)),zip_add_file(S,"xl/_rels/workbook."+g+".rels",write_rels(r.wbrels)),delete r.revssf,delete r.ssf,S}function write_zip_xlsx(n,r){n&&!n.SSF&&(n.SSF=dup(table_fmt)),n&&n.SSF&&(make_ssf(),SSF_load_table(n.SSF),r.revssf=evert_num(n.SSF),r.revssf[n.SSF[65535]]=0,r.ssf=n.SSF),r.rels={},r.wbrels={},r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,browser_has_Map?r.revStrings=new Map:(r.revStrings={},r.revStrings.foo=[],delete r.revStrings.foo);var g="xml",_=VBAFMTS.indexOf(r.bookType)>-1,x=new_ct();fix_write_opts(r=r||{});var S=zip_new(),E="",C=0;if(r.cellXfs=[],get_cell_style(r.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),E="docProps/core.xml",zip_add_file(S,E,write_core_props(n.Props,r)),x.coreprops.push(E),add_rels(r.rels,2,E,RELS.CORE_PROPS),E="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var T=[],R=0;R<n.SheetNames.length;++R)(n.Workbook.Sheets[R]||{}).Hidden!=2&&T.push(n.SheetNames[R]);n.Props.SheetNames=T}n.Props.Worksheets=n.Props.SheetNames.length,zip_add_file(S,E,write_ext_props(n.Props)),x.extprops.push(E),add_rels(r.rels,3,E,RELS.EXT_PROPS),n.Custprops!==n.Props&&keys$2(n.Custprops||{}).length>0&&(E="docProps/custom.xml",zip_add_file(S,E,write_cust_props(n.Custprops)),x.custprops.push(E),add_rels(r.rels,4,E,RELS.CUST_PROPS));var A=["SheetJ5"];for(r.tcid=0,C=1;C<=n.SheetNames.length;++C){var I={"!id":{}},B=n.Sheets[n.SheetNames[C-1]],D=(B||{})["!type"]||"sheet";switch(D){case"chart":default:E="xl/worksheets/sheet"+C+"."+g,zip_add_file(S,E,write_ws_xml(C-1,r,n,I)),x.sheets.push(E),add_rels(r.wbrels,-1,"worksheets/sheet"+C+"."+g,RELS.WS[0])}if(B){var N=B["!comments"],M=!1,O="";if(N&&N.length>0){var L=!1;N.forEach(function(F){F[1].forEach(function(U){U.T==!0&&(L=!0)})}),L&&(O="xl/threadedComments/threadedComment"+C+".xml",zip_add_file(S,O,write_tcmnt_xml(N,A,r)),x.threadedcomments.push(O),add_rels(I,-1,"../threadedComments/threadedComment"+C+".xml",RELS.TCMNT)),O="xl/comments"+C+"."+g,zip_add_file(S,O,write_comments_xml(N)),x.comments.push(O),add_rels(I,-1,"../comments"+C+"."+g,RELS.CMNT),M=!0}B["!legacy"]&&M&&zip_add_file(S,"xl/drawings/vmlDrawing"+C+".vml",write_vml(C,B["!comments"])),delete B["!comments"],delete B["!legacy"]}I["!id"].rId1&&zip_add_file(S,get_rels_path(E),write_rels(I))}return r.Strings!=null&&r.Strings.length>0&&(E="xl/sharedStrings."+g,zip_add_file(S,E,write_sst_xml(r.Strings,r)),x.strs.push(E),add_rels(r.wbrels,-1,"sharedStrings."+g,RELS.SST)),E="xl/workbook."+g,zip_add_file(S,E,write_wb_xml(n)),x.workbooks.push(E),add_rels(r.rels,1,E,RELS.WB),E="xl/theme/theme1.xml",zip_add_file(S,E,write_theme(n.Themes,r)),x.themes.push(E),add_rels(r.wbrels,-1,"theme/theme1.xml",RELS.THEME),E="xl/styles."+g,zip_add_file(S,E,write_sty_xml(n,r)),x.styles.push(E),add_rels(r.wbrels,-1,"styles."+g,RELS.STY),n.vbaraw&&_&&(E="xl/vbaProject.bin",zip_add_file(S,E,n.vbaraw),x.vba.push(E),add_rels(r.wbrels,-1,"vbaProject.bin",RELS.VBA)),E="xl/metadata."+g,zip_add_file(S,E,write_xlmeta_xml()),x.metadata.push(E),add_rels(r.wbrels,-1,"metadata."+g,RELS.XLMETA),A.length>1&&(E="xl/persons/person.xml",zip_add_file(S,E,write_people_xml(A)),x.people.push(E),add_rels(r.wbrels,-1,"persons/person.xml",RELS.PEOPLE)),zip_add_file(S,"[Content_Types].xml",write_ct(x,r)),zip_add_file(S,"_rels/.rels",write_rels(r.rels)),zip_add_file(S,"xl/_rels/workbook."+g+".rels",write_rels(r.wbrels)),delete r.revssf,delete r.ssf,S}function firstbyte(n,r){var g="";switch((r||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":g=Base64_decode(n.slice(0,12));break;case"binary":g=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(r&&r.type||"undefined"))}return[g.charCodeAt(0),g.charCodeAt(1),g.charCodeAt(2),g.charCodeAt(3),g.charCodeAt(4),g.charCodeAt(5),g.charCodeAt(6),g.charCodeAt(7)]}function read_cfb(n,r){return CFB.find(n,"EncryptedPackage")?parse_xlsxcfb(n,r):parse_xlscfb(n,r)}function read_zip(n,r){var g,_=n,x=r||{};return x.type||(x.type=has_buf&&Buffer$1.isBuffer(n)?"buffer":"base64"),g=zip_read(_,x),parse_zip(g,x)}function read_plaintext(n,r){var g=0;e:for(;g<n.length;)switch(n.charCodeAt(g)){case 10:case 13:case 32:++g;break;case 60:return parse_xlml(n.slice(g),r);default:break e}return PRN.to_workbook(n,r)}function read_plaintext_raw(n,r){var g="",_=firstbyte(n,r);switch(r.type){case"base64":g=Base64_decode(n);break;case"binary":g=n;break;case"buffer":g=n.toString("binary");break;case"array":g=cc2str(n);break;default:throw new Error("Unrecognized type "+r.type)}return _[0]==239&&_[1]==187&&_[2]==191&&(g=utf8read(g)),r.type="binary",read_plaintext(g,r)}function read_utf16(n,r){var g=n;return r.type=="base64"&&(g=Base64_decode(g)),g=utf16leread(g.slice(2)),r.type="binary",read_plaintext(g,r)}function bstrify(n){return n.match(/[^\x00-\x7F]/)?utf8write(n):n}function read_prn(n,r,g,_){return _?(g.type="string",PRN.to_workbook(n,g)):PRN.to_workbook(r,g)}function readSync(n,r){reset_cp();var g=r||{};if(g.codepage&&typeof $cptable>"u"&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer)return readSync(new Uint8Array(n),(g=dup(g),g.type="array",g));typeof Uint8Array<"u"&&n instanceof Uint8Array&&!g.type&&(g.type=typeof Deno<"u"?"buffer":"array");var _=n,x=[0,0,0,0],S=!1;if(g.cellStyles&&(g.cellNF=!0,g.sheetStubs=!0),_ssfopts={},g.dateNF&&(_ssfopts.dateNF=g.dateNF),g.type||(g.type=has_buf&&Buffer$1.isBuffer(n)?"buffer":"base64"),g.type=="file"&&(g.type=has_buf?"buffer":"binary",_=read_binary(n),typeof Uint8Array<"u"&&!has_buf&&(g.type="array")),g.type=="string"&&(S=!0,g.type="binary",g.codepage=65001,_=bstrify(n)),g.type=="array"&&typeof Uint8Array<"u"&&n instanceof Uint8Array&&typeof ArrayBuffer<"u"){var E=new ArrayBuffer(3),C=new Uint8Array(E);if(C.foo="bar",!C.foo)return g=dup(g),g.type="array",readSync(ab2a(_),g)}switch((x=firstbyte(_,g))[0]){case 208:if(x[1]===207&&x[2]===17&&x[3]===224&&x[4]===161&&x[5]===177&&x[6]===26&&x[7]===225)return read_cfb(CFB.read(_,g),g);break;case 9:if(x[1]<=8)return parse_xlscfb(_,g);break;case 60:return parse_xlml(_,g);case 73:if(x[1]===73&&x[2]===42&&x[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(x[1]===68)return read_wb_ID(_,g);break;case 84:if(x[1]===65&&x[2]===66&&x[3]===76)return DIF.to_workbook(_,g);break;case 80:return x[1]===75&&x[2]<9&&x[3]<9?read_zip(_,g):read_prn(n,_,g,S);case 239:return x[3]===60?parse_xlml(_,g):read_prn(n,_,g,S);case 255:if(x[1]===254)return read_utf16(_,g);if(x[1]===0&&x[2]===2&&x[3]===0)return WK_.to_workbook(_,g);break;case 0:if(x[1]===0&&(x[2]>=2&&x[3]===0||x[2]===0&&(x[3]===8||x[3]===9)))return WK_.to_workbook(_,g);break;case 3:case 131:case 139:case 140:return DBF.to_workbook(_,g);case 123:if(x[1]===92&&x[2]===114&&x[3]===116)return rtf_to_workbook(_,g);break;case 10:case 13:case 32:return read_plaintext_raw(_,g);case 137:if(x[1]===80&&x[2]===78&&x[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(x[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(x[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(x[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return DBF_SUPPORTED_VERSIONS.indexOf(x[0])>-1&&x[2]<=12&&x[3]<=31?DBF.to_workbook(_,g):read_prn(n,_,g,S)}function readFileSync(n,r){var g=r||{};return g.type="file",readSync(n,g)}function write_cfb_ctr(n,r){switch(r.type){case"base64":case"binary":break;case"buffer":case"array":r.type="";break;case"file":return write_dl(r.file,CFB.write(n,{type:has_buf?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");default:throw new Error("Unrecognized type "+r.type)}return CFB.write(n,r)}function write_zip(n,r){switch(r.bookType){case"ods":return write_ods(n,r);case"numbers":return write_numbers_iwa(n,r);case"xlsb":return write_zip_xlsb(n,r);default:return write_zip_xlsx(n,r)}}function write_zip_type(n,r){var g=dup(r||{}),_=write_zip(n,g);return write_zip_denouement(_,g)}function write_zip_denouement(n,r){var g={},_=has_buf?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(r.compression&&(g.compression="DEFLATE"),r.password)g.type=_;else switch(r.type){case"base64":g.type="base64";break;case"binary":g.type="string";break;case"string":throw new Error("'string' output type invalid for '"+r.bookType+"' files");case"buffer":case"file":g.type=_;break;default:throw new Error("Unrecognized type "+r.type)}var x=n.FullPaths?CFB.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[g.type]||g.type,compression:!!r.compression}):n.generate(g);if(typeof Deno<"u"&&typeof x=="string"){if(r.type=="binary"||r.type=="base64")return x;x=new Uint8Array(s2ab(x))}return r.password&&typeof encrypt_agile<"u"?write_cfb_ctr(encrypt_agile(x,r.password),r):r.type==="file"?write_dl(r.file,x):r.type=="string"?utf8read(x):x}function write_cfb_type(n,r){var g=r||{},_=write_xlscfb(n,g);return write_cfb_ctr(_,g)}function write_string_type(n,r,g){g||(g="");var _=g+n;switch(r.type){case"base64":return Base64_encode(utf8write(_));case"binary":return utf8write(_);case"string":return n;case"file":return write_dl(r.file,_,"utf8");case"buffer":return has_buf?Buffer_from(_,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(_):write_string_type(_,{type:"binary"}).split("").map(function(x){return x.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function write_stxt_type(n,r){switch(r.type){case"base64":return Base64_encode_pass(n);case"binary":return n;case"string":return n;case"file":return write_dl(r.file,n,"binary");case"buffer":return has_buf?Buffer_from(n,"binary"):n.split("").map(function(g){return g.charCodeAt(0)})}throw new Error("Unrecognized type "+r.type)}function write_binary_type(n,r){switch(r.type){case"string":case"base64":case"binary":for(var g="",_=0;_<n.length;++_)g+=String.fromCharCode(n[_]);return r.type=="base64"?Base64_encode(g):r.type=="string"?utf8read(g):g;case"file":return write_dl(r.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+r.type)}}function writeSync(n,r){reset_cp(),check_wb(n);var g=dup(r||{});if(g.cellStyles&&(g.cellNF=!0,g.sheetStubs=!0),g.type=="array"){g.type="binary";var _=writeSync(n,g);return g.type="array",s2ab(_)}var x=0;if(g.sheet&&(typeof g.sheet=="number"?x=g.sheet:x=n.SheetNames.indexOf(g.sheet),!n.SheetNames[x]))throw new Error("Sheet not found: "+g.sheet+" : "+typeof g.sheet);switch(g.bookType||"xlsb"){case"xml":case"xlml":return write_string_type(write_xlml(n,g),g);case"slk":case"sylk":return write_string_type(SYLK.from_sheet(n.Sheets[n.SheetNames[x]],g,n),g);case"htm":case"html":return write_string_type(sheet_to_html(n.Sheets[n.SheetNames[x]],g),g);case"txt":return write_stxt_type(sheet_to_txt(n.Sheets[n.SheetNames[x]],g),g);case"csv":return write_string_type(sheet_to_csv(n.Sheets[n.SheetNames[x]],g),g,"\uFEFF");case"dif":return write_string_type(DIF.from_sheet(n.Sheets[n.SheetNames[x]],g),g);case"dbf":return write_binary_type(DBF.from_sheet(n.Sheets[n.SheetNames[x]],g),g);case"prn":return write_string_type(PRN.from_sheet(n.Sheets[n.SheetNames[x]],g),g);case"rtf":return write_string_type(sheet_to_rtf(n.Sheets[n.SheetNames[x]]),g);case"eth":return write_string_type(ETH$1.from_sheet(n.Sheets[n.SheetNames[x]],g),g);case"fods":return write_string_type(write_ods(n,g),g);case"wk1":return write_binary_type(WK_.sheet_to_wk1(n.Sheets[n.SheetNames[x]],g),g);case"wk3":return write_binary_type(WK_.book_to_wk3(n,g),g);case"biff2":g.biff||(g.biff=2);case"biff3":g.biff||(g.biff=3);case"biff4":return g.biff||(g.biff=4),write_binary_type(write_biff_buf(n,g),g);case"biff5":g.biff||(g.biff=5);case"biff8":case"xla":case"xls":return g.biff||(g.biff=8),write_cfb_type(n,g);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return write_zip_type(n,g);default:throw new Error("Unrecognized bookType |"+g.bookType+"|")}}function resolve_book_type(n){if(!n.bookType){var r={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},g=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();g.match(/^\.[a-z]+$/)&&(n.bookType=g.slice(1)),n.bookType=r[n.bookType]||n.bookType}}function writeFileSync(n,r,g){var _=g||{};return _.type="file",_.file=r,resolve_book_type(_),writeSync(n,_)}function make_json_row(n,r,g,_,x,S,E){var C=encode_row(g),T=E.defval,R=E.raw||!Object.prototype.hasOwnProperty.call(E,"raw"),A=!0,I=n["!data"]!=null,B=x===1?[]:{};if(x!==1)if(Object.defineProperty)try{Object.defineProperty(B,"__rowNum__",{value:g,enumerable:!1})}catch{B.__rowNum__=g}else B.__rowNum__=g;if(!I||n["!data"][g])for(var D=r.s.c;D<=r.e.c;++D){var N=I?(n["!data"][g]||[])[D]:n[_[D]+C];if(N===void 0||N.t===void 0){if(T===void 0)continue;S[D]!=null&&(B[S[D]]=T);continue}var M=N.v;switch(N.t){case"z":if(M==null)break;continue;case"e":M=M==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+N.t)}if(S[D]!=null){if(M==null)if(N.t=="e"&&M===null)B[S[D]]=null;else if(T!==void 0)B[S[D]]=T;else if(R&&M===null)B[S[D]]=null;else continue;else B[S[D]]=R&&(N.t!=="n"||N.t==="n"&&E.rawNumbers!==!1)?M:format_cell(N,M,E);M!=null&&(A=!1)}}return{row:B,isempty:A}}function sheet_to_json(n,r){if(n==null||n["!ref"]==null)return[];var g={t:"n",v:0},_=0,x=1,S=[],E=0,C="",T={s:{r:0,c:0},e:{r:0,c:0}},R=r||{},A=R.range!=null?R.range:n["!ref"];switch(R.header===1?_=1:R.header==="A"?_=2:Array.isArray(R.header)?_=3:R.header==null&&(_=0),typeof A){case"string":T=safe_decode_range(A);break;case"number":T=safe_decode_range(n["!ref"]),T.s.r=A;break;default:T=A}_>0&&(x=0);var I=encode_row(T.s.r),B=[],D=[],N=0,M=0,O=n["!data"]!=null,L=T.s.r,F=0,U={};O&&!n["!data"][L]&&(n["!data"][L]=[]);var j=R.skipHidden&&n["!cols"]||[],z=R.skipHidden&&n["!rows"]||[];for(F=T.s.c;F<=T.e.c;++F)if(!(j[F]||{}).hidden)switch(B[F]=encode_col(F),g=O?n["!data"][L][F]:n[B[F]+I],_){case 1:S[F]=F-T.s.c;break;case 2:S[F]=B[F];break;case 3:S[F]=R.header[F-T.s.c];break;default:if(g==null&&(g={w:"__EMPTY",t:"s"}),C=E=format_cell(g,null,R),M=U[E]||0,!M)U[E]=1;else{do C=E+"_"+M++;while(U[C]);U[E]=M,U[C]=1}S[F]=C}for(L=T.s.r+x;L<=T.e.r;++L)if(!(z[L]||{}).hidden){var W=make_json_row(n,T,L,B,_,S,R);(W.isempty===!1||(_===1?R.blankrows!==!1:R.blankrows))&&(D[N++]=W.row)}return D.length=N,D}var qreg=/"/g;function make_csv_row(n,r,g,_,x,S,E,C){for(var T=!0,R=[],A="",I=encode_row(g),B=n["!data"]!=null,D=B&&n["!data"][g]||[],N=r.s.c;N<=r.e.c;++N)if(_[N]){var M=B?D[N]:n[_[N]+I];if(M==null)A="";else if(M.v!=null){T=!1,A=""+(C.rawNumbers&&M.t=="n"?M.v:format_cell(M,null,C));for(var O=0,L=0;O!==A.length;++O)if((L=A.charCodeAt(O))===x||L===S||L===34||C.forceQuotes){A='"'+A.replace(qreg,'""')+'"';break}A=="ID"&&(A='"ID"')}else M.f!=null&&!M.F?(T=!1,A="="+M.f,A.indexOf(",")>=0&&(A='"'+A.replace(qreg,'""')+'"')):A="";R.push(A)}return C.blankrows===!1&&T?null:R.join(E)}function sheet_to_csv(n,r){var g=[],_=r??{};if(n==null||n["!ref"]==null)return"";for(var x=safe_decode_range(n["!ref"]),S=_.FS!==void 0?_.FS:",",E=S.charCodeAt(0),C=_.RS!==void 0?_.RS:`
`,T=C.charCodeAt(0),R=new RegExp((S=="|"?"\\|":S)+"+$"),A="",I=[],B=_.skipHidden&&n["!cols"]||[],D=_.skipHidden&&n["!rows"]||[],N=x.s.c;N<=x.e.c;++N)(B[N]||{}).hidden||(I[N]=encode_col(N));for(var M=0,O=x.s.r;O<=x.e.r;++O)(D[O]||{}).hidden||(A=make_csv_row(n,x,O,I,E,T,S,_),A!=null&&(_.strip&&(A=A.replace(R,"")),(A||_.blankrows!==!1)&&g.push((M++?C:"")+A)));return g.join("")}function sheet_to_txt(n,r){r||(r={}),r.FS="	",r.RS=`
`;var g=sheet_to_csv(n,r);return g}function sheet_to_formulae(n){var r="",g,_="";if(n==null||n["!ref"]==null)return[];var x=safe_decode_range(n["!ref"]),S="",E=[],C,T=[],R=n["!data"]!=null;for(C=x.s.c;C<=x.e.c;++C)E[C]=encode_col(C);for(var A=x.s.r;A<=x.e.r;++A)for(S=encode_row(A),C=x.s.c;C<=x.e.c;++C)if(r=E[C]+S,g=R?(n["!data"][A]||[])[C]:n[r],_="",g!==void 0){if(g.F!=null){if(r=g.F,!g.f)continue;_=g.f,r.indexOf(":")==-1&&(r=r+":"+r)}if(g.f!=null)_=g.f;else{if(g.t=="z")continue;if(g.t=="n"&&g.v!=null)_=""+g.v;else if(g.t=="b")_=g.v?"TRUE":"FALSE";else if(g.w!==void 0)_="'"+g.w;else{if(g.v===void 0)continue;g.t=="s"?_="'"+g.v:_=""+g.v}}T[T.length]=r+"="+_}return T}function sheet_add_json(n,r,g){var _=g||{},x=n?n["!data"]!=null:_.dense,S=+!_.skipHeader,E=n||{};!n&&x&&(E["!data"]=[]);var C=0,T=0;if(E&&_.origin!=null)if(typeof _.origin=="number")C=_.origin;else{var R=typeof _.origin=="string"?decode_cell(_.origin):_.origin;C=R.r,T=R.c}var A={s:{c:0,r:0},e:{c:T,r:C+r.length-1+S}};if(E["!ref"]){var I=safe_decode_range(E["!ref"]);A.e.c=Math.max(A.e.c,I.e.c),A.e.r=Math.max(A.e.r,I.e.r),C==-1&&(C=I.e.r+1,A.e.r=C+r.length-1+S)}else C==-1&&(C=0,A.e.r=r.length-1+S);var B=_.header||[],D=0,N=[];r.forEach(function(O,L){x&&!E["!data"][C+L+S]&&(E["!data"][C+L+S]=[]),x&&(N=E["!data"][C+L+S]),keys$2(O).forEach(function(F){(D=B.indexOf(F))==-1&&(B[D=B.length]=F);var U=O[F],j="z",z="",W=x?"":encode_col(T+D)+encode_row(C+L+S),X=x?N[T+D]:E[W];U&&typeof U=="object"&&!(U instanceof Date)?x?N[T+D]=U:E[W]=U:(typeof U=="number"?j="n":typeof U=="boolean"?j="b":typeof U=="string"?j="s":U instanceof Date?(j="d",_.cellDates||(j="n",U=datenum(U)),z=X!=null&&X.z&&fmt_is_date(X.z)?X.z:_.dateNF||table_fmt[14]):U===null&&_.nullError&&(j="e",U=0),X?(X.t=j,X.v=U,delete X.w,delete X.R,z&&(X.z=z)):x?N[T+D]=X={t:j,v:U}:E[W]=X={t:j,v:U},z&&(X.z=z))})}),A.e.c=Math.max(A.e.c,T+B.length-1);var M=encode_row(C);if(x&&!E["!data"][C]&&(E["!data"][C]=[]),S)for(D=0;D<B.length;++D)x?E["!data"][C][D+T]={t:"s",v:B[D]}:E[encode_col(D+T)+M]={t:"s",v:B[D]};return E["!ref"]=encode_range(A),E}function json_to_sheet(n,r){return sheet_add_json(null,n,r)}function ws_get_cell_stub(n,r,g){if(typeof r=="string"){if(n["!data"]!=null){var _=decode_cell(r);return n["!data"][_.r]||(n["!data"][_.r]=[]),n["!data"][_.r][_.c]||(n["!data"][_.r][_.c]={t:"z"})}return n[r]||(n[r]={t:"z"})}return typeof r!="number"?ws_get_cell_stub(n,encode_cell(r)):ws_get_cell_stub(n,encode_col(g||0)+encode_row(r))}function wb_sheet_idx(n,r){if(typeof r=="number"){if(r>=0&&n.SheetNames.length>r)return r;throw new Error("Cannot find sheet # "+r)}else if(typeof r=="string"){var g=n.SheetNames.indexOf(r);if(g>-1)return g;throw new Error("Cannot find sheet name |"+r+"|")}else throw new Error("Cannot find sheet |"+r+"|")}function book_new(){return{SheetNames:[],Sheets:{}}}function book_append_sheet(n,r,g,_){var x=1;if(!g)for(;x<=65535&&n.SheetNames.indexOf(g="Sheet"+x)!=-1;++x,g=void 0);if(!g||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(_&&n.SheetNames.indexOf(g)>=0){var S=g.match(/(^.*?)(\d+)$/);x=S&&+S[2]||0;var E=S&&S[1]||g;for(++x;x<=65535&&n.SheetNames.indexOf(g=E+x)!=-1;++x);}if(check_ws_name(g),n.SheetNames.indexOf(g)>=0)throw new Error("Worksheet with name |"+g+"| already exists!");return n.SheetNames.push(g),n.Sheets[g]=r,g}function book_set_sheet_visibility(n,r,g){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var _=wb_sheet_idx(n,r);switch(n.Workbook.Sheets[_]||(n.Workbook.Sheets[_]={}),g){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+g)}n.Workbook.Sheets[_].Hidden=g}function cell_set_number_format(n,r){return n.z=r,n}function cell_set_hyperlink(n,r,g){return r?(n.l={Target:r},g&&(n.l.Tooltip=g)):delete n.l,n}function cell_set_internal_link(n,r,g){return cell_set_hyperlink(n,"#"+r,g)}function cell_add_comment(n,r,g){n.c||(n.c=[]),n.c.push({t:r,a:g||"SheetJS"})}function sheet_set_array_formula(n,r,g,_){for(var x=typeof r!="string"?r:safe_decode_range(r),S=typeof r=="string"?r:encode_range(r),E=x.s.r;E<=x.e.r;++E)for(var C=x.s.c;C<=x.e.c;++C){var T=ws_get_cell_stub(n,E,C);T.t="n",T.F=S,delete T.v,E==x.s.r&&C==x.s.c&&(T.f=g,_&&(T.D=!0))}var R=decode_range(n["!ref"]);return R.s.r>x.s.r&&(R.s.r=x.s.r),R.s.c>x.s.c&&(R.s.c=x.s.c),R.e.r<x.e.r&&(R.e.r=x.e.r),R.e.c<x.e.c&&(R.e.c=x.e.c),n["!ref"]=encode_range(R),n}var utils$5={encode_col,encode_row,encode_cell,encode_range,decode_col,decode_row,split_cell,decode_cell,decode_range,format_cell,sheet_add_aoa,sheet_add_json,sheet_add_dom,aoa_to_sheet,json_to_sheet,table_to_sheet:parse_dom_table,table_to_book,sheet_to_csv,sheet_to_txt,sheet_to_json,sheet_to_html,sheet_to_formulae,sheet_to_row_object_array:sheet_to_json,sheet_get_cell:ws_get_cell_stub,book_new,book_append_sheet,book_set_sheet_visibility,cell_set_number_format,cell_set_hyperlink,cell_set_internal_link,cell_add_comment,sheet_set_array_formula,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}},_Readable;function set_readable(n){_Readable=n}function write_csv_stream(n,r){var g=_Readable(),_=r??{};if(n==null||n["!ref"]==null)return g.push(null),g;for(var x=safe_decode_range(n["!ref"]),S=_.FS!==void 0?_.FS:",",E=S.charCodeAt(0),C=_.RS!==void 0?_.RS:`
`,T=C.charCodeAt(0),R=new RegExp((S=="|"?"\\|":S)+"+$"),A="",I=[],B=_.skipHidden&&n["!cols"]||[],D=_.skipHidden&&n["!rows"]||[],N=x.s.c;N<=x.e.c;++N)(B[N]||{}).hidden||(I[N]=encode_col(N));var M=x.s.r,O=!1,L=0;return g._read=function(){if(!O)return O=!0,g.push("\uFEFF");for(;M<=x.e.r;)if(++M,!(D[M-1]||{}).hidden&&(A=make_csv_row(n,x,M-1,I,E,T,S,_),A!=null&&(_.strip&&(A=A.replace(R,"")),A||_.blankrows!==!1)))return g.push((L++?C:"")+A);return g.push(null)},g}function write_html_stream(n,r){var g=_Readable(),_=r||{},x=_.header!=null?_.header:HTML_BEGIN,S=_.footer!=null?_.footer:HTML_END;g.push(x);var E=decode_range(n["!ref"]);g.push(make_html_preamble(n,E,_));var C=E.s.r,T=!1;return g._read=function(){if(C>E.e.r)return T||(T=!0,g.push("</table>"+S)),g.push(null);for(;C<=E.e.r;){g.push(make_html_row(n,E,C,_)),++C;break}},g}function write_json_stream(n,r){var g=_Readable({objectMode:!0});if(n==null||n["!ref"]==null)return g.push(null),g;var _={t:"n",v:0},x=0,S=1,E=[],C=0,T="",R={s:{r:0,c:0},e:{r:0,c:0}},A=r||{},I=A.range!=null?A.range:n["!ref"];switch(A.header===1?x=1:A.header==="A"?x=2:Array.isArray(A.header)&&(x=3),typeof I){case"string":R=safe_decode_range(I);break;case"number":R=safe_decode_range(n["!ref"]),R.s.r=I;break;default:R=I}x>0&&(S=0);var B=encode_row(R.s.r),D=[],N=0,M=n["!data"]!=null,O=R.s.r,L=0,F={};M&&!n["!data"][O]&&(n["!data"][O]=[]);var U=A.skipHidden&&n["!cols"]||[],j=A.skipHidden&&n["!rows"]||[];for(L=R.s.c;L<=R.e.c;++L)if(!(U[L]||{}).hidden)switch(D[L]=encode_col(L),_=M?n["!data"][O][L]:n[D[L]+B],x){case 1:E[L]=L-R.s.c;break;case 2:E[L]=D[L];break;case 3:E[L]=A.header[L-R.s.c];break;default:if(_==null&&(_={w:"__EMPTY",t:"s"}),T=C=format_cell(_,null,A),N=F[C]||0,!N)F[C]=1;else{do T=C+"_"+N++;while(F[T]);F[C]=N,F[T]=1}E[L]=T}return O=R.s.r+S,g._read=function(){for(;O<=R.e.r;)if(!(j[O-1]||{}).hidden){var z=make_json_row(n,R,O,D,x,E,A);if(++O,z.isempty===!1||(x===1?A.blankrows!==!1:A.blankrows)){g.push(z.row);return}}return g.push(null)},g}var __stream={to_json:write_json_stream,to_html:write_html_stream,to_csv:write_csv_stream,set_readable};async function importerJSONdURL(n){return await(await axios.get(n)).data}async function importerFeuilleCalculDURL(n,r){const _=(await axios.get(n,{responseType:"arraybuffer"})).data,S=Object.assign({type:"buffer",cellDates:!0},r||{});return readSync(_,S)}const ERREUR_MESSAGE_INCONNU="messageInconnu",ERREUR_FORMAT_ARGUMENTS="formatArguments",ERREUR_FONCTION_MANQUANTE="nomFonctionManquant",ERREUR_MULTIPLES_FONCTIONS="multiplesFonctions",ERREUR_PAS_UNE_FONCTION="pasUneFonction",ERREUR_EXÉCUTION_IPA="exécutionIpa",ERREUR_INIT_IPA="initIpa",ERREUR_INIT_IPA_DÉJÀ_LANCÉ="initIpaDéjàLancé",lorsque=async(n,r)=>new Promise(g=>n.once(r,g));class Callable extends Function{constructor(){return Object.setPrototypeOf(function(){},new.target.prototype)}}class Mandatairifiable extends Callable{dernièreErreur;événements;événementsInternes;tâches;constructor(){super(),this.événements=new eventsExports.EventEmitter,this.événementsInternes=new eventsExports.EventEmitter,this.tâches={}}__call__(r,g={}){typeof g!="object"&&this.erreur({code:ERREUR_FORMAT_ARGUMENTS,erreur:`La fonction ${r.join(".")} fut appelée avec arguments ${g}. 
      Toute fonction mandataire Constellation doit être appelée avec un seul argument en format d'objet (dictionnaire).`});const _=v4$3(),x=Object.entries(g).find(S=>typeof S[1]=="function")?.[0];return x?this.appelerFonctionSuivre(_,r,g,x):this.appelerFonctionAction(_,r,g)}async appelerFonctionSuivre(r,g,_,x){const S=_[x],E=Object.fromEntries(Object.entries(_).filter(D=>typeof D[1]!="function"));S===void 0&&this.erreur({code:ERREUR_FONCTION_MANQUANTE,erreur:"Aucun argument de nom "+x+" n'a été donnée pour "+g.join("."),idRequête:r}),Object.keys(_).length>Object.keys(E).length+1?this.erreur({code:ERREUR_MULTIPLES_FONCTIONS,erreur:"Plus d'un argument pour "+g.join(".")+" est une fonction : "+JSON.stringify(_),idRequête:r}):typeof S!="function"&&this.erreur({code:ERREUR_PAS_UNE_FONCTION,erreur:"Argument "+x+"n'est pas une fonction : ",idRequête:r});const C={type:"suivre",idRequête:r,fonction:g,args:E,nomArgFonction:x},R={idRequête:r,fSuivre:S,fRetour:async(D,N)=>{const M={type:"retour",idRequête:r,fonction:D,args:N};this.envoyerMessageÀIpa(M)}};this.tâches[r]=R;const A=async()=>{await this.oublierTâche(r)},I=lorsque(this.événementsInternes,r);this.envoyerMessageÀIpa(C);const B=await I;if(B.type==="erreur"&&this.erreur({erreur:B.erreur,idRequête:r,code:B.codeErreur||ERREUR_EXÉCUTION_IPA}),B.type==="suivrePrêt"){const{fonctions:D}=B;if(D&&D[0]){const N={fOublier:A};for(const M of D)N[M]=async(...O)=>{await this.tâches[r]?.fRetour(M,O)};return N}}return A}async appelerFonctionAction(r,g,_){const x={type:"action",idRequête:r,fonction:g,args:_},S=lorsque(this.événementsInternes,r);this.envoyerMessageÀIpa(x);const E=await S;if(E.type==="action")return E.résultat;throw E.type==="erreur"?this.erreur({erreur:E.erreur,idRequête:r,code:E.codeErreur||ERREUR_EXÉCUTION_IPA}):this.erreur({erreur:`Type de retour ${E} non reconnu.`,idRequête:r,code:ERREUR_EXÉCUTION_IPA}),new Error("On ne devrait jamais arriver ici.")}erreur({erreur:r,code:g,idRequête:_}){throw this.dernièreErreur?.code!==ERREUR_INIT_IPA&&this.dernièreErreur?.code!==ERREUR_INIT_IPA_DÉJÀ_LANCÉ&&(this.dernièreErreur={erreur:r,idRequête:_,code:g}),this.événements.emit("erreur",{idRequête:_,...this.dernièreErreur}),new Error(JSON.stringify({idRequête:_,...this.dernièreErreur}))}async oublierTâche(r){const g=this.tâches[r];g&&await g.fRetour("fOublier"),delete this.tâches[r]}async recevoirMessageDIpa(r){const{type:g}=r;switch(g){case"suivre":{const{idRequête:_,données:x}=r;if(!this.tâches[_])return;const{fSuivre:S}=this.tâches[_];S(x);break}case"action":case"suivrePrêt":case"erreur":{if(r.type==="erreur"&&!r.idRequête){this.erreur({erreur:r.erreur,code:r.erreur||ERREUR_EXÉCUTION_IPA});break}this.événementsInternes.emit(r.idRequête,r);break}default:this.erreur({code:ERREUR_MESSAGE_INCONNU,erreur:`Type inconnu ${g} du message ${r}.`,idRequête:r.idRequête})}}suivreErreurs({f:r}){return this.événements.on("erreur",r),r(this.dernièreErreur),async()=>{this.événements.off("erreur",r)}}}class Handler{listeAtributs;constructor(r){this.listeAtributs=r||[]}get(r,g){if(["suivreErreurs"].includes(g))return r[g].bind(r);{const x=[...this.listeAtributs,g],S=new Handler(x);return new Proxy(r,S)}}apply(r,g,_){return r.__call__(this.listeAtributs,_[0])}}const générerMandataire=n=>{const r=new Handler;return new Proxy(n,r)},scriptRel="modulepreload",assetsURL=function(n,r){return new URL(n,r).href},seen={},__vitePreload=function(r,g,_){let x=Promise.resolve();if(g&&g.length>0){const E=document.getElementsByTagName("link"),C=document.querySelector("meta[property=csp-nonce]"),T=C?.nonce||C?.getAttribute("nonce");x=Promise.allSettled(g.map(R=>{if(R=assetsURL(R,_),R in seen)return;seen[R]=!0;const A=R.endsWith(".css"),I=A?'[rel="stylesheet"]':"";if(!!_)for(let N=E.length-1;N>=0;N--){const M=E[N];if(M.href===R&&(!A||M.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${R}"]${I}`))return;const D=document.createElement("link");if(D.rel=A?"stylesheet":scriptRel,A||(D.as="script"),D.crossOrigin="",D.href=R,T&&D.setAttribute("nonce",T),document.head.appendChild(D),A)return new Promise((N,M)=>{D.addEventListener("load",N),D.addEventListener("error",()=>M(new Error(`Unable to preload CSS for ${R}`)))})}))}function S(E){const C=new Event("vite:preloadError",{cancelable:!0});if(C.payload=E,window.dispatchEvent(C),!C.defaultPrevented)throw E}return x.then(E=>{for(const C of E||[])C.status==="rejected"&&S(C.reason);return r().catch(S)})};function __decorate(n,r,g,_){var x=arguments.length,S=x<3?r:_===null?_=Object.getOwnPropertyDescriptor(r,g):_,E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(n,r,g,_);else for(var C=n.length-1;C>=0;C--)(E=n[C])&&(S=(x<3?E(S):x>3?E(r,g,S):E(r,g))||S);return x>3&&S&&Object.defineProperty(r,g,S),S}typeof SuppressedError=="function"&&SuppressedError;function isAsyncIterable$c(n){return n[Symbol.asyncIterator]!=null}function first(n){if(isAsyncIterable$c(n))return(async()=>{for await(const r of n)return r})();for(const r of n)return r}function isAsyncIterable$b(n){return n[Symbol.asyncIterator]!=null}function batch(n,r=1){return r=Number(r),isAsyncIterable$b(n)?async function*(){let g=[];if(r<1&&(r=1),r!==Math.round(r))throw new Error("Batch size must be an integer");for await(const _ of n)for(g.push(_);g.length>=r;)yield g.slice(0,r),g=g.slice(r);for(;g.length>0;)yield g.slice(0,r),g=g.slice(r)}():function*(){let g=[];if(r<1&&(r=1),r!==Math.round(r))throw new Error("Batch size must be an integer");for(const _ of n)for(g.push(_);g.length>=r;)yield g.slice(0,r),g=g.slice(r);for(;g.length>0;)yield g.slice(0,r),g=g.slice(r)}()}async function*parallelBatch(n,r=1){for await(const g of batch(n,r)){const _=g.map(async x=>x().then(S=>({ok:!0,value:S}),S=>({ok:!1,err:S})));for(let x=0;x<_.length;x++){const S=await _[x];if(S.ok)yield S.value;else throw S.err}}}const symbol$1=Symbol.for("@achingbrain/uint8arraylist");function findBufAndOffset(n,r){if(r==null||r<0)throw new RangeError("index is out of bounds");let g=0;for(const _ of n){const x=g+_.byteLength;if(r<x)return{buf:_,index:r-g};g=x}throw new RangeError("index is out of bounds")}function isUint8ArrayList(n){return!!n?.[symbol$1]}class Uint8ArrayList{bufs;length;[symbol$1]=!0;constructor(...r){this.bufs=[],this.length=0,r.length>0&&this.appendAll(r)}*[Symbol.iterator](){yield*this.bufs}get byteLength(){return this.length}append(...r){this.appendAll(r)}appendAll(r){let g=0;for(const _ of r)if(_ instanceof Uint8Array)g+=_.byteLength,this.bufs.push(_);else if(isUint8ArrayList(_))g+=_.byteLength,this.bufs.push(..._.bufs);else throw new Error("Could not append value, must be an Uint8Array or a Uint8ArrayList");this.length+=g}prepend(...r){this.prependAll(r)}prependAll(r){let g=0;for(const _ of r.reverse())if(_ instanceof Uint8Array)g+=_.byteLength,this.bufs.unshift(_);else if(isUint8ArrayList(_))g+=_.byteLength,this.bufs.unshift(..._.bufs);else throw new Error("Could not prepend value, must be an Uint8Array or a Uint8ArrayList");this.length+=g}get(r){const g=findBufAndOffset(this.bufs,r);return g.buf[g.index]}set(r,g){const _=findBufAndOffset(this.bufs,r);_.buf[_.index]=g}write(r,g=0){if(r instanceof Uint8Array)for(let _=0;_<r.length;_++)this.set(g+_,r[_]);else if(isUint8ArrayList(r))for(let _=0;_<r.length;_++)this.set(g+_,r.get(_));else throw new Error("Could not write value, must be an Uint8Array or a Uint8ArrayList")}consume(r){if(r=Math.trunc(r),!(Number.isNaN(r)||r<=0)){if(r===this.byteLength){this.bufs=[],this.length=0;return}for(;this.bufs.length>0;)if(r>=this.bufs[0].byteLength)r-=this.bufs[0].byteLength,this.length-=this.bufs[0].byteLength,this.bufs.shift();else{this.bufs[0]=this.bufs[0].subarray(r),this.length-=r;break}}}slice(r,g){const{bufs:_,length:x}=this._subList(r,g);return concat(_,x)}subarray(r,g){const{bufs:_,length:x}=this._subList(r,g);return _.length===1?_[0]:concat(_,x)}sublist(r,g){const{bufs:_,length:x}=this._subList(r,g),S=new Uint8ArrayList;return S.length=x,S.bufs=[..._],S}_subList(r,g){if(r=r??0,g=g??this.length,r<0&&(r=this.length+r),g<0&&(g=this.length+g),r<0||g>this.length)throw new RangeError("index is out of bounds");if(r===g)return{bufs:[],length:0};if(r===0&&g===this.length)return{bufs:this.bufs,length:this.length};const _=[];let x=0;for(let S=0;S<this.bufs.length;S++){const E=this.bufs[S],C=x,T=C+E.byteLength;if(x=T,r>=T)continue;const R=r>=C&&r<T,A=g>C&&g<=T;if(R&&A){if(r===C&&g===T){_.push(E);break}const I=r-C;_.push(E.subarray(I,I+(g-r)));break}if(R){if(r===0){_.push(E);continue}_.push(E.subarray(r-C));continue}if(A){if(g===T){_.push(E);break}_.push(E.subarray(0,g-C));break}_.push(E)}return{bufs:_,length:g-r}}indexOf(r,g=0){if(!isUint8ArrayList(r)&&!(r instanceof Uint8Array))throw new TypeError('The "value" argument must be a Uint8ArrayList or Uint8Array');const _=r instanceof Uint8Array?r:r.subarray();if(g=Number(g??0),isNaN(g)&&(g=0),g<0&&(g=this.length+g),g<0&&(g=0),r.length===0)return g>this.length?this.length:g;const x=_.byteLength;if(x===0)throw new TypeError("search must be at least 1 byte long");const S=256,E=new Int32Array(S);for(let I=0;I<S;I++)E[I]=-1;for(let I=0;I<x;I++)E[_[I]]=I;const C=E,T=this.byteLength-_.byteLength,R=_.byteLength-1;let A;for(let I=g;I<=T;I+=A){A=0;for(let B=R;B>=0;B--){const D=this.get(I+B);if(_[B]!==D){A=Math.max(1,B-C[D]);break}}if(A===0)return I}return-1}getInt8(r){const g=this.subarray(r,r+1);return new DataView(g.buffer,g.byteOffset,g.byteLength).getInt8(0)}setInt8(r,g){const _=allocUnsafe(1);new DataView(_.buffer,_.byteOffset,_.byteLength).setInt8(0,g),this.write(_,r)}getInt16(r,g){const _=this.subarray(r,r+2);return new DataView(_.buffer,_.byteOffset,_.byteLength).getInt16(0,g)}setInt16(r,g,_){const x=alloc$1(2);new DataView(x.buffer,x.byteOffset,x.byteLength).setInt16(0,g,_),this.write(x,r)}getInt32(r,g){const _=this.subarray(r,r+4);return new DataView(_.buffer,_.byteOffset,_.byteLength).getInt32(0,g)}setInt32(r,g,_){const x=alloc$1(4);new DataView(x.buffer,x.byteOffset,x.byteLength).setInt32(0,g,_),this.write(x,r)}getBigInt64(r,g){const _=this.subarray(r,r+8);return new DataView(_.buffer,_.byteOffset,_.byteLength).getBigInt64(0,g)}setBigInt64(r,g,_){const x=alloc$1(8);new DataView(x.buffer,x.byteOffset,x.byteLength).setBigInt64(0,g,_),this.write(x,r)}getUint8(r){const g=this.subarray(r,r+1);return new DataView(g.buffer,g.byteOffset,g.byteLength).getUint8(0)}setUint8(r,g){const _=allocUnsafe(1);new DataView(_.buffer,_.byteOffset,_.byteLength).setUint8(0,g),this.write(_,r)}getUint16(r,g){const _=this.subarray(r,r+2);return new DataView(_.buffer,_.byteOffset,_.byteLength).getUint16(0,g)}setUint16(r,g,_){const x=alloc$1(2);new DataView(x.buffer,x.byteOffset,x.byteLength).setUint16(0,g,_),this.write(x,r)}getUint32(r,g){const _=this.subarray(r,r+4);return new DataView(_.buffer,_.byteOffset,_.byteLength).getUint32(0,g)}setUint32(r,g,_){const x=alloc$1(4);new DataView(x.buffer,x.byteOffset,x.byteLength).setUint32(0,g,_),this.write(x,r)}getBigUint64(r,g){const _=this.subarray(r,r+8);return new DataView(_.buffer,_.byteOffset,_.byteLength).getBigUint64(0,g)}setBigUint64(r,g,_){const x=alloc$1(8);new DataView(x.buffer,x.byteOffset,x.byteLength).setBigUint64(0,g,_),this.write(x,r)}getFloat32(r,g){const _=this.subarray(r,r+4);return new DataView(_.buffer,_.byteOffset,_.byteLength).getFloat32(0,g)}setFloat32(r,g,_){const x=alloc$1(4);new DataView(x.buffer,x.byteOffset,x.byteLength).setFloat32(0,g,_),this.write(x,r)}getFloat64(r,g){const _=this.subarray(r,r+8);return new DataView(_.buffer,_.byteOffset,_.byteLength).getFloat64(0,g)}setFloat64(r,g,_){const x=alloc$1(8);new DataView(x.buffer,x.byteOffset,x.byteLength).setFloat64(0,g,_),this.write(x,r)}equals(r){if(r==null||!(r instanceof Uint8ArrayList)||r.bufs.length!==this.bufs.length)return!1;for(let g=0;g<this.bufs.length;g++)if(!equals$1(this.bufs[g],r.bufs[g]))return!1;return!0}static fromUint8Arrays(r,g){const _=new Uint8ArrayList;return _.bufs=r,g==null&&(g=r.reduce((x,S)=>x+S.byteLength,0)),_.length=g,_}}const DEFAULT_CHUNK_SIZE=262144,fixedSize=(n={})=>{const r=n.chunkSize??DEFAULT_CHUNK_SIZE;return async function*(_){let x=new Uint8ArrayList,S=0,E=!1;for await(const C of _)for(x.append(C),S+=C.length;S>=r;)if(yield x.slice(0,r),E=!0,r===x.length)x=new Uint8ArrayList,S=0;else{const T=new Uint8ArrayList;T.append(x.sublist(r)),x=T,S-=r}(!E||S>0)&&(yield x.subarray(0,S))}},textDecoder=new TextDecoder;function decodeVarint(n,r){let g=0;for(let _=0;;_+=7){if(_>=64)throw new Error("protobuf: varint overflow");if(r>=n.length)throw new Error("protobuf: unexpected end of data");const x=n[r++];if(g+=_<28?(x&127)<<_:(x&127)*2**_,x<128)break}return[g,r]}function decodeBytes(n,r){let g;[g,r]=decodeVarint(n,r);const _=r+g;if(g<0||_<0)throw new Error("protobuf: invalid length");if(_>n.length)throw new Error("protobuf: unexpected end of data");return[n.subarray(r,_),_]}function decodeKey(n,r){let g;return[g,r]=decodeVarint(n,r),[g&7,g>>3,r]}function decodeLink(n){const r={},g=n.length;let _=0;for(;_<g;){let x,S;if([x,S,_]=decodeKey(n,_),S===1){if(r.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(x!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${x}) for Hash`);if(r.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[r.Hash,_]=decodeBytes(n,_)}else if(S===2){if(r.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(x!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${x}) for Name`);if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let E;[E,_]=decodeBytes(n,_),r.Name=textDecoder.decode(E)}else if(S===3){if(r.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(x!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${x}) for Tsize`);[r.Tsize,_]=decodeVarint(n,_)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${S}`)}if(_>g)throw new Error("protobuf: (PBLink) unexpected end of data");return r}function decodeNode(n){const r=n.length;let g=0,_,x=!1,S;for(;g<r;){let C,T;if([C,T,g]=decodeKey(n,g),C!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${C}`);if(T===1){if(S)throw new Error("protobuf: (PBNode) duplicate Data section");[S,g]=decodeBytes(n,g),_&&(x=!0)}else if(T===2){if(x)throw new Error("protobuf: (PBNode) duplicate Links section");_||(_=[]);let R;[R,g]=decodeBytes(n,g),_.push(decodeLink(R))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${T}`)}if(g>r)throw new Error("protobuf: (PBNode) unexpected end of data");const E={};return S&&(E.Data=S),E.Links=_||[],E}const textEncoder$1=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(n,r){let g=r.length;if(typeof n.Tsize=="number"){if(n.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(n.Tsize))throw new Error("Tsize too large for encoding");g=encodeVarint(r,g,n.Tsize)-1,r[g]=24}if(typeof n.Name=="string"){const _=textEncoder$1.encode(n.Name);g-=_.length,r.set(_,g),g=encodeVarint(r,g,_.length)-1,r[g]=18}return n.Hash&&(g-=n.Hash.length,r.set(n.Hash,g),g=encodeVarint(r,g,n.Hash.length)-1,r[g]=10),r.length-g}function encodeNode(n){const r=sizeNode(n),g=new Uint8Array(r);let _=r;if(n.Data&&(_-=n.Data.length,g.set(n.Data,_),_=encodeVarint(g,_,n.Data.length)-1,g[_]=10),n.Links)for(let x=n.Links.length-1;x>=0;x--){const S=encodeLink(n.Links[x],g.subarray(0,_));_-=S,_=encodeVarint(g,_,S)-1,g[_]=18}return g}function sizeLink(n){let r=0;if(n.Hash){const g=n.Hash.length;r+=1+g+sov(g)}if(typeof n.Name=="string"){const g=textEncoder$1.encode(n.Name).length;r+=1+g+sov(g)}return typeof n.Tsize=="number"&&(r+=1+sov(n.Tsize)),r}function sizeNode(n){let r=0;if(n.Data){const g=n.Data.length;r+=1+g+sov(g)}if(n.Links)for(const g of n.Links){const _=sizeLink(g);r+=1+_+sov(_)}return r}function encodeVarint(n,r,g){r-=sov(g);const _=r;for(;g>=maxUInt32;)n[r++]=g&127|128,g/=128;for(;g>=128;)n[r++]=g&127|128,g>>>=7;return n[r]=g,_}function sov(n){return n%2===0&&n++,Math.floor((len64(n)+6)/7)}function len64(n){let r=0;return n>=maxInt32&&(n=Math.floor(n/maxInt32),r=32),n>=65536&&(n>>>=16,r+=16),n>=256&&(n>>>=8,r+=8),r+len8tab[n]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder=new TextEncoder;function linkComparator(n,r){if(n===r)return 0;const g=n.Name?textEncoder.encode(n.Name):[],_=r.Name?textEncoder.encode(r.Name):[];let x=g.length,S=_.length;for(let E=0,C=Math.min(x,S);E<C;++E)if(g[E]!==_[E]){x=g[E],S=_[E];break}return x<S?-1:S<x?1:0}function hasOnlyProperties(n,r){return!Object.keys(n).some(g=>!r.includes(g))}function asLink(n){if(typeof n.asCID=="object"){const g=CID$1.asCID(n);if(!g)throw new TypeError("Invalid DAG-PB form");return{Hash:g}}if(typeof n!="object"||Array.isArray(n))throw new TypeError("Invalid DAG-PB form");const r={};if(n.Hash){let g=CID$1.asCID(n.Hash);try{g||(typeof n.Hash=="string"?g=CID$1.parse(n.Hash):n.Hash instanceof Uint8Array&&(g=CID$1.decode(n.Hash)))}catch(_){throw new TypeError(`Invalid DAG-PB form: ${_.message}`)}g&&(r.Hash=g)}if(!r.Hash)throw new TypeError("Invalid DAG-PB form");return typeof n.Name=="string"&&(r.Name=n.Name),typeof n.Tsize=="number"&&(r.Tsize=n.Tsize),r}function prepare(n){if((n instanceof Uint8Array||typeof n=="string")&&(n={Data:n}),typeof n!="object"||Array.isArray(n))throw new TypeError("Invalid DAG-PB form");const r={};if(n.Data!==void 0)if(typeof n.Data=="string")r.Data=textEncoder.encode(n.Data);else if(n.Data instanceof Uint8Array)r.Data=n.Data;else throw new TypeError("Invalid DAG-PB form");if(n.Links!==void 0)if(Array.isArray(n.Links))r.Links=n.Links.map(asLink),r.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else r.Links=[];return r}function validate$1(n){if(!n||typeof n!="object"||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(n,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(n.Data!==void 0&&!(n.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(n.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let r=0;r<n.Links.length;r++){const g=n.Links[r];if(!g||typeof g!="object"||Array.isArray(g)||g instanceof Uint8Array||g["/"]&&g["/"]===g.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hasOnlyProperties(g,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(g.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(g.Hash==null||!g.Hash["/"]||g.Hash["/"]!==g.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(g.Name!==void 0&&typeof g.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(g.Tsize!==void 0){if(typeof g.Tsize!="number"||g.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(g.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(r>0&&linkComparator(g,n.Links[r-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(n,r=[]){return prepare({Data:n,Links:r})}function createLink(n,r,g){return asLink({Hash:g,Name:n,Tsize:r})}function toByteView$1(n){return n instanceof ArrayBuffer?new Uint8Array(n,0,n.byteLength):n}const name$4="dag-pb",code$2=112;function encode$5(n){validate$1(n);const r={};return n.Links&&(r.Links=n.Links.map(g=>{const _={};return g.Hash&&(_.Hash=g.Hash.bytes),g.Name!==void 0&&(_.Name=g.Name),g.Tsize!==void 0&&(_.Tsize=g.Tsize),_})),n.Data&&(r.Data=n.Data),encodeNode(r)}function decode$5(n){const r=toByteView$1(n),g=decodeNode(r),_={};return g.Data&&(_.Data=g.Data),g.Links&&(_.Links=g.Links.map(x=>{const S={};try{S.Hash=CID$1.decode(x.Hash)}catch{}if(!S.Hash)throw new Error("Invalid Hash field found in link, expected CID");return x.Name!==void 0&&(S.Name=x.Name),x.Tsize!==void 0&&(S.Tsize=x.Tsize),S})),_}const dagPb=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,createLink,createNode,decode:decode$5,encode:encode$5,name:name$4,prepare,validate:validate$1},Symbol.toStringTag,{value:"Module"}));class InvalidTypeError extends Error{static name="InvalidTypeError";static code="ERR_INVALID_TYPE";name=InvalidTypeError.name;code=InvalidTypeError.code;constructor(r="Invalid type"){super(r)}}var Data;(function(n){(function(_){_.Raw="Raw",_.Directory="Directory",_.File="File",_.Metadata="Metadata",_.Symlink="Symlink",_.HAMTShard="HAMTShard"})(n.DataType||(n.DataType={}));let r;(function(_){_[_.Raw=0]="Raw",_[_.Directory=1]="Directory",_[_.File=2]="File",_[_.Metadata=3]="Metadata",_[_.Symlink=4]="Symlink",_[_.HAMTShard=5]="HAMTShard"})(r||(r={})),function(_){_.codec=()=>enumeration(r)}(n.DataType||(n.DataType={}));let g;n.codec=()=>(g==null&&(g=message((_,x,S={})=>{if(S.lengthDelimited!==!1&&x.fork(),_.Type!=null&&(x.uint32(8),n.DataType.codec().encode(_.Type,x)),_.Data!=null&&(x.uint32(18),x.bytes(_.Data)),_.filesize!=null&&(x.uint32(24),x.uint64(_.filesize)),_.blocksizes!=null)for(const E of _.blocksizes)x.uint32(32),x.uint64(E);_.hashType!=null&&(x.uint32(40),x.uint64(_.hashType)),_.fanout!=null&&(x.uint32(48),x.uint64(_.fanout)),_.mode!=null&&(x.uint32(56),x.uint32(_.mode)),_.mtime!=null&&(x.uint32(66),UnixTime.codec().encode(_.mtime,x)),S.lengthDelimited!==!1&&x.ldelim()},(_,x)=>{const S={blocksizes:[]},E=x==null?_.len:_.pos+x;for(;_.pos<E;){const C=_.uint32();switch(C>>>3){case 1:S.Type=n.DataType.codec().decode(_);break;case 2:S.Data=_.bytes();break;case 3:S.filesize=_.uint64();break;case 4:S.blocksizes.push(_.uint64());break;case 5:S.hashType=_.uint64();break;case 6:S.fanout=_.uint64();break;case 7:S.mode=_.uint32();break;case 8:S.mtime=UnixTime.codec().decode(_,_.uint32());break;default:_.skipType(C&7);break}}return S})),g),n.encode=_=>encodeMessage(_,n.codec()),n.decode=_=>decodeMessage(_,n.codec())})(Data||(Data={}));var UnixTime;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.Seconds!=null&&(_.uint32(8),_.int64(g.Seconds)),g.FractionalNanoseconds!=null&&(_.uint32(21),_.fixed32(g.FractionalNanoseconds)),x.lengthDelimited!==!1&&_.ldelim()},(g,_)=>{const x={},S=_==null?g.len:g.pos+_;for(;g.pos<S;){const E=g.uint32();switch(E>>>3){case 1:x.Seconds=g.int64();break;case 2:x.FractionalNanoseconds=g.fixed32();break;default:g.skipType(E&7);break}}return x})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=g=>decodeMessage(g,n.codec())})(UnixTime||(UnixTime={}));var Metadata;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.MimeType!=null&&(_.uint32(10),_.string(g.MimeType)),x.lengthDelimited!==!1&&_.ldelim()},(g,_)=>{const x={},S=_==null?g.len:g.pos+_;for(;g.pos<S;){const E=g.uint32();switch(E>>>3){case 1:x.MimeType=g.string();break;default:g.skipType(E&7);break}}return x})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=g=>decodeMessage(g,n.codec())})(Metadata||(Metadata={}));const types$1={Raw:"raw",Directory:"directory",File:"file",Metadata:"metadata",Symlink:"symlink",HAMTShard:"hamt-sharded-directory"},dirTypes=["directory","hamt-sharded-directory"],DEFAULT_FILE_MODE=parseInt("0644",8),DEFAULT_DIRECTORY_MODE=parseInt("0755",8);let UnixFS$1=class cs{static unmarshal(r){const g=Data.decode(r),_=new cs({type:types$1[g.Type!=null?g.Type.toString():"File"],data:g.Data,blockSizes:g.blocksizes,mode:g.mode,mtime:g.mtime!=null?{secs:g.mtime.Seconds??0n,nsecs:g.mtime.FractionalNanoseconds}:void 0,fanout:g.fanout});return _._originalMode=g.mode??0,_}type;data;blockSizes;hashType;fanout;mtime;_mode;_originalMode;constructor(r={type:"file"}){const{type:g,data:_,blockSizes:x,hashType:S,fanout:E,mtime:C,mode:T}=r;if(g!=null&&!Object.values(types$1).includes(g))throw new InvalidTypeError("Type: "+g+" is not valid");this.type=g??"file",this.data=_,this.hashType=S,this.fanout=E,this.blockSizes=x??[],this._originalMode=0,this.mode=T,this.mtime=C}set mode(r){r==null?this._mode=this.isDirectory()?DEFAULT_DIRECTORY_MODE:DEFAULT_FILE_MODE:this._mode=r&4095}get mode(){return this._mode}isDirectory(){return dirTypes.includes(this.type)}addBlockSize(r){this.blockSizes.push(r)}removeBlockSize(r){this.blockSizes.splice(r,1)}fileSize(){if(this.isDirectory())return 0n;let r=0n;return this.blockSizes.forEach(g=>{r+=g}),this.data!=null&&(r+=BigInt(this.data.length)),r}marshal(){let r;switch(this.type){case"raw":r=Data.DataType.Raw;break;case"directory":r=Data.DataType.Directory;break;case"file":r=Data.DataType.File;break;case"metadata":r=Data.DataType.Metadata;break;case"symlink":r=Data.DataType.Symlink;break;case"hamt-sharded-directory":r=Data.DataType.HAMTShard;break;default:throw new InvalidTypeError(`Type: ${r} is not valid`)}let g=this.data;(this.data==null||this.data.length===0)&&(g=void 0);let _;this.mode!=null&&(_=this._originalMode&4294963200|(this.mode??0),_===DEFAULT_FILE_MODE&&!this.isDirectory()&&(_=void 0),_===DEFAULT_DIRECTORY_MODE&&this.isDirectory()&&(_=void 0));let x;return this.mtime!=null&&(x={Seconds:this.mtime.secs,FractionalNanoseconds:this.mtime.nsecs}),Data.encode({Type:r,Data:g,filesize:this.isDirectory()?void 0:this.fileSize(),blocksizes:this.blockSizes,hashType:this.hashType,fanout:this.fanout,mode:_,mtime:x})}};class CustomProgressEvent extends Event{type;detail;constructor(r,g){super(r),this.type=r,this.detail=g}}const persist$1=async(n,r,g)=>{g.codec==null&&(g.codec=dagPb);const _=await sha256$8.digest(n),x=CID$1.create(g.cidVersion,g.codec.code,_);return await r.put(x,n,g),x};function defaultBufferImporter(n){return async function*(g,_){let x=0n;for await(let S of g.content)yield async()=>{let E;const C={codec:dagPb,cidVersion:n.cidVersion,onProgress:n.onProgress};n.rawLeaves?(C.codec=raw,C.cidVersion=1):(E=new UnixFS$1({type:n.leafType,data:S}),S=encode$5({Data:E.marshal(),Links:[]}));const T=await persist$1(S,_,C);return x+=BigInt(S.byteLength),n.onProgress?.(new CustomProgressEvent("unixfs:importer:progress:file:write",{bytesWritten:x,cid:T,path:g.path})),{cid:T,unixfs:E,size:BigInt(S.length),block:S}}}}let InvalidParametersError$3=class Zn extends Error{static name="InvalidParametersError";static code="ERR_INVALID_PARAMS";name=Zn.name;code=Zn.code;constructor(r="Invalid parameters"){super(r)}};class InvalidContentError extends Error{static name="InvalidContentError";static code="ERR_INVALID_CONTENT";name=InvalidContentError.name;code=InvalidContentError.code;constructor(r="Invalid content"){super(r)}}const dirBuilder=async(n,r,g)=>{const _=new UnixFS$1({type:"directory",mtime:n.mtime,mode:n.mode}),x=encode$5(prepare({Data:_.marshal()})),S=await persist$1(x,r,g),E=n.path;return{cid:S,path:E,unixfs:_,size:BigInt(x.length),originalPath:n.originalPath,block:x}};async function*buildFileBatch(n,r,g){let _=-1,x;for await(const S of parallelBatch(g.bufferImporter(n,r),g.blockWriteConcurrency)){if(_++,_===0){x={...S,single:!0};continue}else _===1&&x!=null&&(yield{...x,block:void 0,single:void 0},x=void 0);yield{...S,block:void 0}}x!=null&&(yield x)}function isSingleBlockImport(n){return n.single===!0}const reduce=(n,r,g)=>async function(x){if(x.length===1&&isSingleBlockImport(x[0])&&g.reduceSingleLeafToSelf){const A=x[0];let I=A.block;return isSingleBlockImport(A)&&(n.mtime!==void 0||n.mode!==void 0)&&(A.unixfs=new UnixFS$1({type:"file",mtime:n.mtime,mode:n.mode,data:A.block}),I={Data:A.unixfs.marshal(),Links:[]},A.block=encode$5(prepare(I)),A.cid=await persist$1(A.block,r,{...g,cidVersion:g.cidVersion}),A.size=BigInt(A.block.length)),g.onProgress?.(new CustomProgressEvent("unixfs:importer:progress:file:layout",{cid:A.cid,path:A.originalPath})),{cid:A.cid,path:n.path,unixfs:A.unixfs,size:A.size,originalPath:A.originalPath}}const S=new UnixFS$1({type:"file",mtime:n.mtime,mode:n.mode}),E=x.filter(A=>A.cid.code===code$6&&A.size>0||A.unixfs!=null&&A.unixfs.data==null&&A.unixfs.fileSize()>0n?!0:!!A.unixfs?.data?.length).map(A=>A.cid.code===code$6?(S.addBlockSize(A.size),{Name:"",Tsize:Number(A.size),Hash:A.cid}):(A.unixfs?.data==null?S.addBlockSize(A.unixfs?.fileSize()??0n):S.addBlockSize(BigInt(A.unixfs.data.length)),{Name:"",Tsize:Number(A.size),Hash:A.cid})),C={Data:S.marshal(),Links:E},T=encode$5(prepare(C)),R=await persist$1(T,r,g);return g.onProgress?.(new CustomProgressEvent("unixfs:importer:progress:file:layout",{cid:R,path:n.originalPath})),{cid:R,path:n.path,unixfs:S,size:BigInt(T.length+C.Links.reduce((A,I)=>A+(I.Tsize??0),0)),originalPath:n.originalPath,block:T}},fileBuilder=async(n,r,g)=>g.layout(buildFileBatch(n,r,g),reduce(n,r,g));function isIterable(n){return Symbol.iterator in n}function isAsyncIterable$a(n){return Symbol.asyncIterator in n}function contentAsAsyncIterable(n){try{if(n instanceof Uint8Array)return async function*(){yield n}();if(isIterable(n))return async function*(){yield*n}();if(isAsyncIterable$a(n))return n}catch{throw new InvalidContentError("Content was invalid")}throw new InvalidContentError("Content was invalid")}function defaultDagBuilder(n){return async function*(g,_){for await(const x of g){let S;if(x.path!=null&&(S=x.path,x.path=x.path.split("/").filter(E=>E!=null&&E!==".").join("/")),isFileCandidate(x)){const E={path:x.path,mtime:x.mtime,mode:x.mode,content:async function*(){let C=0n;for await(const T of n.chunker(n.chunkValidator(contentAsAsyncIterable(x.content)))){const R=BigInt(T.byteLength);C+=R,n.onProgress?.(new CustomProgressEvent("unixfs:importer:progress:file:read",{bytesRead:C,chunkSize:R,path:x.path})),yield T}}(),originalPath:S};yield async()=>fileBuilder(E,_,n)}else if(x.path!=null){const E={path:x.path,mtime:x.mtime,mode:x.mode,originalPath:S};yield async()=>dirBuilder(E,_,n)}else throw new Error("Import candidate must have content or path or both")}}}function isFileCandidate(n){return n.content!=null}const defaultChunkValidator=()=>async function*(r){for await(const g of r){if(g.length===void 0)throw new InvalidContentError("Content was invalid");if(typeof g=="string"||g instanceof String)yield fromString(g.toString());else if(Array.isArray(g))yield Uint8Array.from(g);else if(g instanceof Uint8Array)yield g;else throw new InvalidContentError("Content was invalid")}},DEFAULT_MAX_CHILDREN_PER_NODE=174;function balanced(n){const r=n?.maxChildrenPerNode??DEFAULT_MAX_CHILDREN_PER_NODE;return async function g(_,x){const S=[];for await(const E of batch(_,r))S.push(await x(E));return S.length>1?g(S,x):S[0]}}function isAsyncIterable$9(n){return n[Symbol.asyncIterator]!=null}function all$1(n){if(isAsyncIterable$9(n))return(async()=>{const g=[];for await(const _ of n)g.push(_);return g})();const r=[];for(const g of n)r.push(g);return r}let Dir$1=class{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(r,g){this.options=g??{},this.root=r.root,this.dir=r.dir,this.path=r.path,this.dirty=r.dirty,this.flat=r.flat,this.parent=r.parent,this.parentKey=r.parentKey,this.unixfs=r.unixfs,this.mode=r.mode,this.mtime=r.mtime}};const CID_V0$1=CID$1.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),CID_V1$1=CID$1.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi");class DirFlat extends Dir$1{_children;constructor(r,g){super(r,g),this._children=new Map}async put(r,g){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,this._children.set(r,g)}async get(r){return Promise.resolve(this._children.get(r))}childCount(){return this._children.size}directChildrenCount(){return this.childCount()}onlyChild(){return this._children.values().next().value}async*eachChildSeries(){for(const[r,g]of this._children.entries())yield{key:r,child:g}}estimateNodeSize(){if(this.nodeSize!==void 0)return this.nodeSize;this.nodeSize=0;for(const[r,g]of this._children.entries())g.size!=null&&g.cid!=null&&(this.nodeSize+=r.length+(this.options.cidVersion===1?CID_V1$1.bytes.byteLength:CID_V0$1.bytes.byteLength));return this.nodeSize}async*flush(r){const g=[];for(const[T,R]of this._children.entries()){let A=R;if(R instanceof Dir$1)for await(const I of R.flush(r))A=I,yield I;A.size!=null&&A.cid!=null&&g.push({Name:T,Tsize:Number(A.size),Hash:A.cid})}const _=new UnixFS$1({type:"directory",mtime:this.mtime,mode:this.mode}),x={Data:_.marshal(),Links:g},S=encode$5(prepare(x)),E=await persist$1(S,r,this.options),C=S.length+x.Links.reduce((T,R)=>T+(R.Tsize??0),0);this.cid=E,this.size=C,yield{cid:E,unixfs:_,path:this.path,size:BigInt(C)}}}var murmurHash3js={exports:{}},hasRequiredMurmurHash3js;function requireMurmurHash3js(){return hasRequiredMurmurHash3js||(hasRequiredMurmurHash3js=1,function(n,r){(function(g,_){var x={version:"3.0.0",x86:{},x64:{},inputValidation:!0};function S(M){if(!Array.isArray(M)&&!ArrayBuffer.isView(M))return!1;for(var O=0;O<M.length;O++)if(!Number.isInteger(M[O])||M[O]<0||M[O]>255)return!1;return!0}function E(M,O){return(M&65535)*O+(((M>>>16)*O&65535)<<16)}function C(M,O){return M<<O|M>>>32-O}function T(M){return M^=M>>>16,M=E(M,2246822507),M^=M>>>13,M=E(M,3266489909),M^=M>>>16,M}function R(M,O){M=[M[0]>>>16,M[0]&65535,M[1]>>>16,M[1]&65535],O=[O[0]>>>16,O[0]&65535,O[1]>>>16,O[1]&65535];var L=[0,0,0,0];return L[3]+=M[3]+O[3],L[2]+=L[3]>>>16,L[3]&=65535,L[2]+=M[2]+O[2],L[1]+=L[2]>>>16,L[2]&=65535,L[1]+=M[1]+O[1],L[0]+=L[1]>>>16,L[1]&=65535,L[0]+=M[0]+O[0],L[0]&=65535,[L[0]<<16|L[1],L[2]<<16|L[3]]}function A(M,O){M=[M[0]>>>16,M[0]&65535,M[1]>>>16,M[1]&65535],O=[O[0]>>>16,O[0]&65535,O[1]>>>16,O[1]&65535];var L=[0,0,0,0];return L[3]+=M[3]*O[3],L[2]+=L[3]>>>16,L[3]&=65535,L[2]+=M[2]*O[3],L[1]+=L[2]>>>16,L[2]&=65535,L[2]+=M[3]*O[2],L[1]+=L[2]>>>16,L[2]&=65535,L[1]+=M[1]*O[3],L[0]+=L[1]>>>16,L[1]&=65535,L[1]+=M[2]*O[2],L[0]+=L[1]>>>16,L[1]&=65535,L[1]+=M[3]*O[1],L[0]+=L[1]>>>16,L[1]&=65535,L[0]+=M[0]*O[3]+M[1]*O[2]+M[2]*O[1]+M[3]*O[0],L[0]&=65535,[L[0]<<16|L[1],L[2]<<16|L[3]]}function I(M,O){return O%=64,O===32?[M[1],M[0]]:O<32?[M[0]<<O|M[1]>>>32-O,M[1]<<O|M[0]>>>32-O]:(O-=32,[M[1]<<O|M[0]>>>32-O,M[0]<<O|M[1]>>>32-O])}function B(M,O){return O%=64,O===0?M:O<32?[M[0]<<O|M[1]>>>32-O,M[1]<<O]:[M[1]<<O-32,0]}function D(M,O){return[M[0]^O[0],M[1]^O[1]]}function N(M){return M=D(M,[0,M[0]>>>1]),M=A(M,[4283543511,3981806797]),M=D(M,[0,M[0]>>>1]),M=A(M,[3301882366,444984403]),M=D(M,[0,M[0]>>>1]),M}x.x86.hash32=function(M,O){if(x.inputValidation&&!S(M))return _;O=O||0;for(var L=M.length%4,F=M.length-L,U=O,j=0,z=3432918353,W=461845907,X=0;X<F;X=X+4)j=M[X]|M[X+1]<<8|M[X+2]<<16|M[X+3]<<24,j=E(j,z),j=C(j,15),j=E(j,W),U^=j,U=C(U,13),U=E(U,5)+3864292196;switch(j=0,L){case 3:j^=M[X+2]<<16;case 2:j^=M[X+1]<<8;case 1:j^=M[X],j=E(j,z),j=C(j,15),j=E(j,W),U^=j}return U^=M.length,U=T(U),U>>>0},x.x86.hash128=function(M,O){if(x.inputValidation&&!S(M))return _;O=O||0;for(var L=M.length%16,F=M.length-L,U=O,j=O,z=O,W=O,X=0,ie=0,fe=0,xe=0,we=597399067,G=2869860233,J=951274213,q=2716044179,H=0;H<F;H=H+16)X=M[H]|M[H+1]<<8|M[H+2]<<16|M[H+3]<<24,ie=M[H+4]|M[H+5]<<8|M[H+6]<<16|M[H+7]<<24,fe=M[H+8]|M[H+9]<<8|M[H+10]<<16|M[H+11]<<24,xe=M[H+12]|M[H+13]<<8|M[H+14]<<16|M[H+15]<<24,X=E(X,we),X=C(X,15),X=E(X,G),U^=X,U=C(U,19),U+=j,U=E(U,5)+1444728091,ie=E(ie,G),ie=C(ie,16),ie=E(ie,J),j^=ie,j=C(j,17),j+=z,j=E(j,5)+197830471,fe=E(fe,J),fe=C(fe,17),fe=E(fe,q),z^=fe,z=C(z,15),z+=W,z=E(z,5)+2530024501,xe=E(xe,q),xe=C(xe,18),xe=E(xe,we),W^=xe,W=C(W,13),W+=U,W=E(W,5)+850148119;switch(X=0,ie=0,fe=0,xe=0,L){case 15:xe^=M[H+14]<<16;case 14:xe^=M[H+13]<<8;case 13:xe^=M[H+12],xe=E(xe,q),xe=C(xe,18),xe=E(xe,we),W^=xe;case 12:fe^=M[H+11]<<24;case 11:fe^=M[H+10]<<16;case 10:fe^=M[H+9]<<8;case 9:fe^=M[H+8],fe=E(fe,J),fe=C(fe,17),fe=E(fe,q),z^=fe;case 8:ie^=M[H+7]<<24;case 7:ie^=M[H+6]<<16;case 6:ie^=M[H+5]<<8;case 5:ie^=M[H+4],ie=E(ie,G),ie=C(ie,16),ie=E(ie,J),j^=ie;case 4:X^=M[H+3]<<24;case 3:X^=M[H+2]<<16;case 2:X^=M[H+1]<<8;case 1:X^=M[H],X=E(X,we),X=C(X,15),X=E(X,G),U^=X}return U^=M.length,j^=M.length,z^=M.length,W^=M.length,U+=j,U+=z,U+=W,j+=U,z+=U,W+=U,U=T(U),j=T(j),z=T(z),W=T(W),U+=j,U+=z,U+=W,j+=U,z+=U,W+=U,("00000000"+(U>>>0).toString(16)).slice(-8)+("00000000"+(j>>>0).toString(16)).slice(-8)+("00000000"+(z>>>0).toString(16)).slice(-8)+("00000000"+(W>>>0).toString(16)).slice(-8)},x.x64.hash128=function(M,O){if(x.inputValidation&&!S(M))return _;O=O||0;for(var L=M.length%16,F=M.length-L,U=[0,O],j=[0,O],z=[0,0],W=[0,0],X=[2277735313,289559509],ie=[1291169091,658871167],fe=0;fe<F;fe=fe+16)z=[M[fe+4]|M[fe+5]<<8|M[fe+6]<<16|M[fe+7]<<24,M[fe]|M[fe+1]<<8|M[fe+2]<<16|M[fe+3]<<24],W=[M[fe+12]|M[fe+13]<<8|M[fe+14]<<16|M[fe+15]<<24,M[fe+8]|M[fe+9]<<8|M[fe+10]<<16|M[fe+11]<<24],z=A(z,X),z=I(z,31),z=A(z,ie),U=D(U,z),U=I(U,27),U=R(U,j),U=R(A(U,[0,5]),[0,1390208809]),W=A(W,ie),W=I(W,33),W=A(W,X),j=D(j,W),j=I(j,31),j=R(j,U),j=R(A(j,[0,5]),[0,944331445]);switch(z=[0,0],W=[0,0],L){case 15:W=D(W,B([0,M[fe+14]],48));case 14:W=D(W,B([0,M[fe+13]],40));case 13:W=D(W,B([0,M[fe+12]],32));case 12:W=D(W,B([0,M[fe+11]],24));case 11:W=D(W,B([0,M[fe+10]],16));case 10:W=D(W,B([0,M[fe+9]],8));case 9:W=D(W,[0,M[fe+8]]),W=A(W,ie),W=I(W,33),W=A(W,X),j=D(j,W);case 8:z=D(z,B([0,M[fe+7]],56));case 7:z=D(z,B([0,M[fe+6]],48));case 6:z=D(z,B([0,M[fe+5]],40));case 5:z=D(z,B([0,M[fe+4]],32));case 4:z=D(z,B([0,M[fe+3]],24));case 3:z=D(z,B([0,M[fe+2]],16));case 2:z=D(z,B([0,M[fe+1]],8));case 1:z=D(z,[0,M[fe]]),z=A(z,X),z=I(z,31),z=A(z,ie),U=D(U,z)}return U=D(U,[0,M.length]),j=D(j,[0,M.length]),U=R(U,j),j=R(j,U),U=N(U),j=N(j),U=R(U,j),j=R(j,U),("00000000"+(U[0]>>>0).toString(16)).slice(-8)+("00000000"+(U[1]>>>0).toString(16)).slice(-8)+("00000000"+(j[0]>>>0).toString(16)).slice(-8)+("00000000"+(j[1]>>>0).toString(16)).slice(-8)},n.exports&&(r=n.exports=x),r.murmurHash3=x})()}(murmurHash3js,murmurHash3js.exports)),murmurHash3js.exports}var murmurhash3jsRevisited,hasRequiredMurmurhash3jsRevisited;function requireMurmurhash3jsRevisited(){return hasRequiredMurmurhash3jsRevisited||(hasRequiredMurmurhash3jsRevisited=1,murmurhash3jsRevisited=requireMurmurHash3js()),murmurhash3jsRevisited}var murmurhash3jsRevisitedExports=requireMurmurhash3jsRevisited();const mur=getDefaultExportFromCjs(murmurhash3jsRevisitedExports),murmur3128=from$2({name:"murmur3-128",code:34,encode:n=>fromHex(mur.x64.hash128(n))});var sparseArray,hasRequiredSparseArray;function requireSparseArray(){if(hasRequiredSparseArray)return sparseArray;hasRequiredSparseArray=1;const n=7;sparseArray=class{constructor(){this._bitArrays=[],this._data=[],this._length=0,this._changedLength=!1,this._changedData=!1}set(E,C){let T=this._internalPositionFor(E,!1);if(C===void 0)T!==-1&&(this._unsetInternalPos(T),this._unsetBit(E),this._changedLength=!0,this._changedData=!0);else{let R=!1;T===-1?(T=this._data.length,this._setBit(E),this._changedData=!0):R=!0,this._setInternalPos(T,E,C,R),this._changedLength=!0}}unset(E){this.set(E,void 0)}get(E){this._sortData();const C=this._internalPositionFor(E,!0);if(C!==-1)return this._data[C][1]}push(E){return this.set(this.length,E),this.length}get length(){if(this._sortData(),this._changedLength){const E=this._data[this._data.length-1];this._length=E?E[0]+1:0,this._changedLength=!1}return this._length}forEach(E){let C=0;for(;C<this.length;)E(this.get(C),C,this),C++}map(E){let C=0,T=new Array(this.length);for(;C<this.length;)T[C]=E(this.get(C),C,this),C++;return T}reduce(E,C){let T=0,R=C;for(;T<this.length;){const A=this.get(T);R=E(R,A,T),T++}return R}find(E){let C=0,T,R;for(;C<this.length&&!T;)R=this.get(C),T=E(R),C++;return T?R:void 0}_internalPositionFor(E,C){const T=this._bytePosFor(E,C);if(T>=this._bitArrays.length)return-1;const R=this._bitArrays[T],A=E-T*n;if(!((R&1<<A)>0))return-1;const B=this._bitArrays.slice(0,T).reduce(r,0),D=~(4294967295<<A+1),N=g(R&D);return B+N-1}_bytePosFor(E,C){const T=Math.floor(E/n),R=T+1;for(;!C&&this._bitArrays.length<R;)this._bitArrays.push(0);return T}_setBit(E){const C=this._bytePosFor(E,!1);this._bitArrays[C]|=1<<E-C*n}_unsetBit(E){const C=this._bytePosFor(E,!1);this._bitArrays[C]&=~(1<<E-C*n)}_setInternalPos(E,C,T,R){const A=this._data,I=[C,T];if(R)this._sortData(),A[E]=I;else{if(A.length)if(A[A.length-1][0]>=C)A.push(I);else if(A[0][0]<=C)A.unshift(I);else{const B=Math.round(A.length/2);this._data=A.slice(0,B).concat(I).concat(A.slice(B))}else this._data.push(I);this._changedData=!0,this._changedLength=!0}}_unsetInternalPos(E){this._data.splice(E,1)}_sortData(){this._changedData&&this._data.sort(_),this._changedData=!1}bitField(){const E=[];let C=8,T=0,R=0,A;const I=this._bitArrays.slice();for(;I.length||T;){T===0&&(A=I.shift(),T=7);const D=Math.min(T,C),N=~(255<<D),M=A&N;R|=M<<8-C,A=A>>>D,T-=D,C-=D,(!C||!T&&!I.length)&&(E.push(R),R=0,C=8)}for(var B=E.length-1;B>0&&E[B]===0;B--)E.pop();return E}compactArray(){return this._sortData(),this._data.map(x)}};function r(S,E){return S+g(E)}function g(S){let E=S;return E=E-(E>>1&1431655765),E=(E&858993459)+(E>>2&858993459),(E+(E>>4)&252645135)*16843009>>24}function _(S,E){return S[0]-E[0]}function x(S){return S[1]}return sparseArray}var sparseArrayExports=requireSparseArray();const SparseArray=getDefaultExportFromCjs(sparseArrayExports);let Bucket$1=class $n{_options;_popCount;_parent;_posAtParent;_children;key;constructor(r,g,_=0){this._options=r,this._popCount=0,this._parent=g,this._posAtParent=_,this._children=new SparseArray,this.key=null}async put(r,g){const _=await this._findNewBucketAndPos(r);_.bucket._putAt(_,r,g)}async get(r){const g=await this._findChild(r);if(g!=null)return g.value}async del(r){const g=await this._findPlace(r),_=g.bucket._at(g.pos);_!=null&&_.key===r&&g.bucket._delAt(g.pos)}leafCount(){return this._children.compactArray().reduce((g,_)=>_ instanceof $n?g+_.leafCount():g+1,0)}childrenCount(){return this._children.length}onlyChild(){return this._children.get(0)}*eachLeafSeries(){const r=this._children.compactArray();for(const g of r)g instanceof $n?yield*g.eachLeafSeries():yield g}serialize(r,g){const _=[];return g(this._children.reduce((x,S,E)=>(S!=null&&(S instanceof $n?x.push(S.serialize(r,g)):x.push(r(S,E))),x),_))}async asyncTransform(r,g){return asyncTransformBucket(this,r,g)}toJSON(){return this.serialize(mapNode,reduceNodes)}prettyPrint(){return JSON.stringify(this.toJSON(),null,"  ")}tableSize(){return Math.pow(2,this._options.bits)}async _findChild(r){const g=await this._findPlace(r),_=g.bucket._at(g.pos);if(!(_ instanceof $n)&&_!=null&&_.key===r)return _}async _findPlace(r){const g=this._options.hash(typeof r=="string"?fromString(r):r),_=await g.take(this._options.bits),x=this._children.get(_);return x instanceof $n?x._findPlace(g):{bucket:this,pos:_,hash:g,existingChild:x}}async _findNewBucketAndPos(r){const g=await this._findPlace(r);if(g.existingChild!=null&&g.existingChild.key!==r){const _=new $n(this._options,g.bucket,g.pos);g.bucket._putObjectAt(g.pos,_);const x=await _._findPlace(g.existingChild.hash);return x.bucket._putAt(x,g.existingChild.key,g.existingChild.value),_._findNewBucketAndPos(g.hash)}return g}_putAt(r,g,_){this._putObjectAt(r.pos,{key:g,value:_,hash:r.hash})}_putObjectAt(r,g){this._children.get(r)==null&&this._popCount++,this._children.set(r,g)}_delAt(r){if(r===-1)throw new Error("Invalid position");this._children.get(r)!=null&&this._popCount--,this._children.unset(r),this._level()}_level(){if(this._parent!=null&&this._popCount<=1)if(this._popCount===1){const r=this._children.find(exists$1);if(r!=null&&!(r instanceof $n)){const g=r.hash;g.untake(this._options.bits);const _={pos:this._posAtParent,hash:g,bucket:this._parent};this._parent._putAt(_,r.key,r.value)}}else this._parent._delAt(this._posAtParent)}_at(r){return this._children.get(r)}};function exists$1(n){return!!n}function mapNode(n,r){return n.key}function reduceNodes(n){return n}async function asyncTransformBucket(n,r,g){const _=[];for(const x of n._children.compactArray())if(x instanceof Bucket$1)await asyncTransformBucket(x,r,g);else{const S=await r(x);_.push({bitField:n._children.bitField(),children:S})}return g(_)}const START_MASKS$1=[255,254,252,248,240,224,192,128],STOP_MASKS$1=[1,3,7,15,31,63,127,255];let ConsumableBuffer$1=class{_value;_currentBytePos;_currentBitPos;constructor(r){this._value=r,this._currentBytePos=r.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(r){let g=r,_=0;for(;g>0&&this._haveBits();){const x=this._value[this._currentBytePos],S=this._currentBitPos+1,E=Math.min(S,g),C=byteBitsToInt$1(x,S-E,E);_=(_<<E)+C,g-=E,this._currentBitPos-=E,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return _}untake(r){for(this._currentBitPos+=r;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}};function byteBitsToInt$1(n,r,g){const _=maskFor$1(r,g);return(n&_)>>>r}function maskFor$1(n,r){return START_MASKS$1[n]&STOP_MASKS$1[Math.min(r+n-1,7)]}function wrapHash$1(n){function r(g){return g instanceof InfiniteHash$1?g:new InfiniteHash$1(g,n)}return r}let InfiniteHash$1=class{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(r,g){if(!(r instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=r,this._hashFn=g,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(r){let g=r;for(;this._availableBits<g;)await this._produceMoreBits();let _=0;for(;g>0;){const x=this._buffers[this._currentBufferIndex],S=Math.min(x.availableBits(),g),E=x.take(S);_=(_<<S)+E,g-=S,this._availableBits-=S,x.availableBits()===0&&this._currentBufferIndex++}return _}untake(r){let g=r;for(;g>0;){const _=this._buffers[this._currentBufferIndex],x=Math.min(_.totalBits()-_.availableBits(),g);_.untake(x),g-=x,this._availableBits+=x,this._currentBufferIndex>0&&_.totalBits()===_.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const r=this._depth>0?concat([this._value,Uint8Array.from([this._depth])]):this._value,g=await this._hashFn(r),_=new ConsumableBuffer$1(g);this._buffers.push(_),this._availableBits+=_.availableBits()}};function createHAMT(n){if(n==null||n.hashFn==null)throw new Error("please define an options.hashFn");const r={bits:n.bits??8,hash:wrapHash$1(n.hashFn)};return new Bucket$1(r)}async function hamtHashFn$1(n){return(await murmur3128.encode(n)).slice(0,8).reverse()}const HAMT_HASH_CODE=BigInt(34),DEFAULT_FANOUT_BITS=8;let DirSharded$1=class extends Dir$1{_bucket;constructor(r,g){super(r,g),this._bucket=createHAMT({hashFn:hamtHashFn$1,bits:g.shardFanoutBits??DEFAULT_FANOUT_BITS})}async put(r,g){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(r,g)}async get(r){return this._bucket.get(r)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:r,value:g}of this._bucket.eachLeafSeries())yield{key:r,child:g}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=calculateSize$1(this._bucket,this,this.options),this.nodeSize)}async*flush(r){for await(const g of flush$1(this._bucket,r,this,this.options))yield{...g,path:this.path}}};async function*flush$1(n,r,g,_){const x=n._children,S=(n.tableSize()-1).toString(16).length,E=[];let C=0n;for(let N=0;N<x.length;N++){const M=x.get(N);if(M==null)continue;const O=N.toString(16).toUpperCase().padStart(S,"0");if(M instanceof Bucket$1){let L;for await(const F of flush$1(M,r,null,_))L=F;if(L==null)throw new Error("Could not flush sharded directory, no subshard found");E.push({Name:O,Tsize:Number(L.size),Hash:L.cid}),C+=L.size}else if(isDir$1(M.value)){const L=M.value;let F;for await(const j of L.flush(r))F=j,yield F;if(F==null)throw new Error("Did not flush dir");const U=O+M.key;E.push({Name:U,Tsize:Number(F.size),Hash:F.cid}),C+=F.size}else{const L=M.value;if(L.cid==null)continue;const F=O+M.key,U=L.size;E.push({Name:F,Tsize:Number(U),Hash:L.cid}),C+=BigInt(U??0)}}const T=Uint8Array.from(x.bitField().reverse()),R=new UnixFS$1({type:"hamt-sharded-directory",data:T,fanout:BigInt(n.tableSize()),hashType:HAMT_HASH_CODE,mtime:g?.mtime,mode:g?.mode}),A={Data:R.marshal(),Links:E},I=encode$5(prepare(A)),B=await persist$1(I,r,_),D=BigInt(I.byteLength)+C;yield{cid:B,unixfs:R,size:D}}function isDir$1(n){return typeof n.flush=="function"}function calculateSize$1(n,r,g){const _=n._children,x=(n.tableSize()-1).toString(16).length,S=[];for(let R=0;R<_.length;R++){const A=_.get(R);if(A==null)continue;const I=R.toString(16).toUpperCase().padStart(x,"0");if(A instanceof Bucket$1){const B=calculateSize$1(A,null,g);S.push({Name:I,Tsize:Number(B),Hash:g.cidVersion===0?CID_V0$1:CID_V1$1})}else if(typeof A.value.flush=="function"){const D=A.value.nodeSize();S.push({Name:I+A.key,Tsize:Number(D),Hash:g.cidVersion===0?CID_V0$1:CID_V1$1})}else{const B=A.value;if(B.cid==null)continue;const D=I+A.key,N=B.size;S.push({Name:D,Tsize:Number(N),Hash:B.cid})}}const E=Uint8Array.from(_.bitField().reverse()),C=new UnixFS$1({type:"hamt-sharded-directory",data:E,fanout:BigInt(n.tableSize()),hashType:HAMT_HASH_CODE,mtime:r?.mtime,mode:r?.mode});return encode$5(prepare({Data:C.marshal(),Links:S})).length}async function flatToShard(n,r,g,_){let x=r;r instanceof DirFlat&&r.estimateNodeSize()>g&&(x=await convertToShard(r,_));const S=x.parent;if(S!=null){if(x!==r){if(n!=null&&(n.parent=x),x.parentKey==null)throw new Error("No parent key found");await S.put(x.parentKey,x)}return flatToShard(x,S,g,_)}return x}async function convertToShard(n,r){const g=new DirSharded$1({root:n.root,dir:!0,parent:n.parent,parentKey:n.parentKey,path:n.path,dirty:n.dirty,flat:!1,mtime:n.mtime,mode:n.mode},r);for await(const{key:_,child:x}of n.eachChildSeries())await g.put(_,x);return g}const toPathComponents$1=(n="")=>n.split(/(?<!\\)\//).filter(Boolean);async function addToTree(n,r,g){const _=toPathComponents$1(n.path??""),x=_.length-1;let S=r,E="";for(let C=0;C<_.length;C++){const T=_[C];E+=`${E!==""?"/":""}${T}`;const R=C===x;if(S.dirty=!0,S.cid=void 0,S.size=void 0,R)await S.put(T,n),r=await flatToShard(null,S,g.shardSplitThresholdBytes,g);else{let A=await S.get(T);(A==null||!(A instanceof Dir$1))&&(A=new DirFlat({root:!1,dir:!0,parent:S,parentKey:T,path:E,dirty:!0,flat:!0,mtime:A?.unixfs?.mtime,mode:A?.unixfs?.mode},g)),await S.put(T,A),S=A}}return r}async function*flushAndYield(n,r){if(!(n instanceof Dir$1)){n.unixfs?.isDirectory()===!0&&(yield n);return}yield*n.flush(r)}function defaultTreeBuilder(n){return async function*(g,_){let x=new DirFlat({root:!0,dir:!0,path:"",dirty:!0,flat:!0},n),S,E=!1;for await(const C of g){if(C==null)continue;const T=`${C.originalPath??""}`.split("/")[0];T!=null&&T!==""&&(S==null?(S=T,E=!0):S!==T&&(E=!1)),x=await addToTree(C,x,n),C.unixfs?.isDirectory()!==!0&&(yield C)}if(n.wrapWithDirectory||E&&x.childCount()>1)yield*flushAndYield(x,_);else for await(const C of x.eachChildSeries())C!=null&&(yield*flushAndYield(C.child,_))}}async function*importer$1(n,r,g={}){let _;Symbol.asyncIterator in n||Symbol.iterator in n?_=n:_=[n];const x=g.wrapWithDirectory??!1,S=g.shardSplitThresholdBytes??262144,E=g.shardFanoutBits??8,C=g.cidVersion??1,T=g.rawLeaves??!0,R=g.leafType??"file",A=g.fileImportConcurrency??50,I=g.blockWriteConcurrency??10,B=g.reduceSingleLeafToSelf??!0,D=g.chunker??fixedSize(),N=g.chunkValidator??defaultChunkValidator(),M=g.dagBuilder??defaultDagBuilder({chunker:D,chunkValidator:N,wrapWithDirectory:x,layout:g.layout??balanced(),bufferImporter:g.bufferImporter??defaultBufferImporter({cidVersion:C,rawLeaves:T,leafType:R,onProgress:g.onProgress}),blockWriteConcurrency:I,reduceSingleLeafToSelf:B,cidVersion:C,onProgress:g.onProgress}),O=g.treeBuilder??defaultTreeBuilder({wrapWithDirectory:x,shardSplitThresholdBytes:S,shardFanoutBits:E,cidVersion:C,onProgress:g.onProgress});for await(const L of O(parallelBatch(M(_,r),A),r))yield{cid:L.cid,path:L.path,unixfs:L.unixfs,size:L.size}}async function importFile(n,r,g={}){const _=await first(importer$1([n],r,g));if(_==null)throw new InvalidParametersError$3("Nothing imported");return _}async function importDirectory(n,r,g={}){const _=await first(importer$1([n],r,g));if(_==null)throw new InvalidParametersError$3("Nothing imported");return _}async function importBytes(n,r,g={}){return importFile({content:n},r,g)}async function importByteStream(n,r,g={}){return importFile({content:n},r,g)}const defaultImporterSettings={cidVersion:1,rawLeaves:!0,layout:balanced({maxChildrenPerNode:1024}),chunker:fixedSize({chunkSize:1048576})};async function*addAll(n,r,g={}){yield*importer$1(n,r,{...defaultImporterSettings,...g})}async function addBytes(n,r,g={}){const{cid:_}=await importBytes(n,r,{...defaultImporterSettings,...g});return _}async function addByteStream(n,r,g={}){const{cid:_}=await importByteStream(n,r,{...defaultImporterSettings,...g});return _}async function addFile(n,r,g={}){const{cid:_}=await importFile(n,r,{...defaultImporterSettings,...g});return _}async function addDirectory(n,r,g={}){const{cid:_}=await importDirectory({...n,path:n.path??"-"},r,{...defaultImporterSettings,...g});return _}function isAsyncIterable$8(n){return n[Symbol.asyncIterator]!=null}function last(n){if(isAsyncIterable$8(n))return(async()=>{let g;for await(const _ of n)g=_;return g})();let r;for(const g of n)r=g;return r}class BadPathError extends Error{static name="BadPathError";static code="ERR_BAD_PATH";name=BadPathError.name;code=BadPathError.code;constructor(r="Bad path"){super(r)}}let NotFoundError$2=class Qn extends Error{static name="NotFoundError";static code="ERR_NOT_FOUND";name=Qn.name;code=Qn.code;constructor(r="Not found"){super(r)}};class NoResolverError extends Error{static name="NoResolverError";static code="ERR_NO_RESOLVER";name=NoResolverError.name;code=NoResolverError.code;constructor(r="No resolver"){super(r)}}let NotUnixFSError$1=class ri extends Error{static name="NotUnixFSError";static code="ERR_NOT_UNIXFS";name=ri.name;code=ri.code;constructor(r="Not UnixFS"){super(r)}};class OverReadError extends Error{static name="OverReadError";static code="ERR_OVER_READ";name=OverReadError.name;code=OverReadError.code;constructor(r="Over read"){super(r)}}class UnderReadError extends Error{static name="UnderReadError";static code="ERR_UNDER_READ";name=UnderReadError.name;code=UnderReadError.code;constructor(r="Under read"){super(r)}}class NoPropError extends Error{static name="NoPropError";static code="ERR_NO_PROP";name=NoPropError.name;code=NoPropError.code;constructor(r="No Property found"){super(r)}}let InvalidParametersError$2=class Bi extends Error{static name="InvalidParametersError";static code="ERR_INVALID_PARAMS";name=Bi.name;code=Bi.code;constructor(r="Invalid parameters"){super(r)}};class JSONEncoder extends Array{constructor(){super(),this.inRecursive=[]}prefix(r){const g=this.inRecursive[this.inRecursive.length-1];g&&(g.type===Type.array&&(g.elements++,g.elements!==1&&r.push([44])),g.type===Type.map&&(g.elements++,g.elements!==1&&(g.elements%2===1?r.push([44]):r.push([58]))))}[Type.uint.major](r,g){this.prefix(r);const _=String(g.value),x=[];for(let S=0;S<_.length;S++)x[S]=_.charCodeAt(S);r.push(x)}[Type.negint.major](r,g){this[Type.uint.major](r,g)}[Type.bytes.major](r,g){throw new Error(`${encodeErrPrefix} unsupported type: Uint8Array`)}[Type.string.major](r,g){this.prefix(r);const _=fromString$2(JSON.stringify(g.value));r.push(_.length>32?asU8A(_):_)}[Type.array.major](r,g){this.prefix(r),this.inRecursive.push({type:Type.array,elements:0}),r.push([91])}[Type.map.major](r,g){this.prefix(r),this.inRecursive.push({type:Type.map,elements:0}),r.push([123])}[Type.tag.major](r,g){}[Type.float.major](r,g){if(g.type.name==="break"){const E=this.inRecursive.pop();if(E){if(E.type===Type.array)r.push([93]);else if(E.type===Type.map)r.push([125]);else throw new Error("Unexpected recursive type; this should not happen!");return}throw new Error("Unexpected break; this should not happen!")}if(g.value===void 0)throw new Error(`${encodeErrPrefix} unsupported type: undefined`);if(this.prefix(r),g.type.name==="true"){r.push([116,114,117,101]);return}else if(g.type.name==="false"){r.push([102,97,108,115,101]);return}else if(g.type.name==="null"){r.push([110,117,108,108]);return}const _=String(g.value),x=[];let S=!1;for(let E=0;E<_.length;E++)x[E]=_.charCodeAt(E),!S&&(x[E]===46||x[E]===101||x[E]===69)&&(S=!0);S||(x.push(46),x.push(48)),r.push(x)}}function mapSorter(n,r){if(Array.isArray(n[0])||Array.isArray(r[0]))throw new Error(`${encodeErrPrefix} complex map keys are not supported`);const g=n[0],_=r[0];if(g.type!==Type.string||_.type!==Type.string)throw new Error(`${encodeErrPrefix} non-string map keys are not supported`);if(g<_)return-1;if(g>_)return 1;throw new Error(`${encodeErrPrefix} unexpected duplicate map keys, this is not supported`)}const defaultEncodeOptions={addBreakTokens:!0,mapSorter};function encode$4(n,r){return r=Object.assign({},defaultEncodeOptions,r),encodeCustom(n,new JSONEncoder,r)}class Tokenizer{constructor(r,g={}){this._pos=0,this.data=r,this.options=g,this.modeStack=["value"],this.lastToken=""}pos(){return this._pos}done(){return this._pos>=this.data.length}ch(){return this.data[this._pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let r=this.ch();for(;r===32||r===9||r===13||r===10;)r=this.data[++this._pos]}expect(r){if(this.data.length-this._pos<r.length)throw new Error(`${decodeErrPrefix} unexpected end of input at position ${this._pos}`);for(let g=0;g<r.length;g++)if(this.data[this._pos++]!==r[g])throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}, expected to find '${String.fromCharCode(...r)}'`)}parseNumber(){const r=this._pos;let g=!1,_=!1;const x=C=>{for(;!this.done();){const T=this.ch();if(C.includes(T))this._pos++;else break}};if(this.ch()===45&&(g=!0,this._pos++),this.ch()===48)if(this._pos++,this.ch()===46)this._pos++,_=!0;else return new Token(Type.uint,0,this._pos-r);if(x([48,49,50,51,52,53,54,55,56,57]),g&&this._pos===r+1)throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}`);if(!this.done()&&this.ch()===46){if(_)throw new Error(`${decodeErrPrefix} unexpected token at position ${this._pos}`);_=!0,this._pos++,x([48,49,50,51,52,53,54,55,56,57])}!this.done()&&(this.ch()===101||this.ch()===69)&&(_=!0,this._pos++,!this.done()&&(this.ch()===43||this.ch()===45)&&this._pos++,x([48,49,50,51,52,53,54,55,56,57]));const S=String.fromCharCode.apply(null,this.data.subarray(r,this._pos)),E=parseFloat(S);return _?new Token(Type.float,E,this._pos-r):this.options.allowBigInt!==!0||Number.isSafeInteger(E)?new Token(E>=0?Type.uint:Type.negint,E,this._pos-r):new Token(E>=0?Type.uint:Type.negint,BigInt(S),this._pos-r)}parseString(){if(this.ch()!==34)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}; this shouldn't happen`);this._pos++;for(let S=this._pos,E=0;S<this.data.length&&E<65536;S++,E++){const C=this.data[S];if(C===92||C<32||C>=128)break;if(C===34){const T=String.fromCharCode.apply(null,this.data.subarray(this._pos,S));return this._pos=S+1,new Token(Type.string,T,E)}}const r=this._pos,g=[],_=()=>{if(this._pos+4>=this.data.length)throw new Error(`${decodeErrPrefix} unexpected end of unicode escape sequence at position ${this._pos}`);let S=0;for(let E=0;E<4;E++){let C=this.ch();if(C>=48&&C<=57)C-=48;else if(C>=97&&C<=102)C=C-97+10;else if(C>=65&&C<=70)C=C-65+10;else throw new Error(`${decodeErrPrefix} unexpected unicode escape character at position ${this._pos}`);S=S*16+C,this._pos++}return S},x=()=>{const S=this.ch();let E=null,C=S>239?4:S>223?3:S>191?2:1;if(this._pos+C>this.data.length)throw new Error(`${decodeErrPrefix} unexpected unicode sequence at position ${this._pos}`);let T,R,A,I;switch(C){case 1:S<128&&(E=S);break;case 2:T=this.data[this._pos+1],(T&192)===128&&(I=(S&31)<<6|T&63,I>127&&(E=I));break;case 3:T=this.data[this._pos+1],R=this.data[this._pos+2],(T&192)===128&&(R&192)===128&&(I=(S&15)<<12|(T&63)<<6|R&63,I>2047&&(I<55296||I>57343)&&(E=I));break;case 4:T=this.data[this._pos+1],R=this.data[this._pos+2],A=this.data[this._pos+3],(T&192)===128&&(R&192)===128&&(A&192)===128&&(I=(S&15)<<18|(T&63)<<12|(R&63)<<6|A&63,I>65535&&I<1114112&&(E=I))}E===null?(E=65533,C=1):E>65535&&(E-=65536,g.push(E>>>10&1023|55296),E=56320|E&1023),g.push(E),this._pos+=C};for(;!this.done();){const S=this.ch();let E;switch(S){case 92:if(this._pos++,this.done())throw new Error(`${decodeErrPrefix} unexpected string termination at position ${this._pos}`);switch(E=this.ch(),this._pos++,E){case 34:case 39:case 92:case 47:g.push(E);break;case 98:g.push(8);break;case 116:g.push(9);break;case 110:g.push(10);break;case 102:g.push(12);break;case 114:g.push(13);break;case 117:g.push(_());break;default:throw new Error(`${decodeErrPrefix} unexpected string escape character at position ${this._pos}`)}break;case 34:return this._pos++,new Token(Type.string,decodeCodePointsArray(g),this._pos-r);default:if(S<32)throw new Error(`${decodeErrPrefix} invalid control character at position ${this._pos}`);S<128?(g.push(S),this._pos++):x()}}throw new Error(`${decodeErrPrefix} unexpected end of string at position ${this._pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this._pos++,new Token(Type.map,1/0,1);case 91:return this.modeStack.push("array-start"),this._pos++,new Token(Type.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new Token(Type.null,null,4);case 102:return this.expect([102,97,108,115,101]),new Token(Type.false,!1,5);case 116:return this.expect([116,114,117,101]),new Token(Type.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":{if(this.modeStack.pop(),this.ch()===93)return this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue()}case"array-start":return this.modeStack.pop(),this.ch()===93?(this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1)):(this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue());case"obj-key":if(this.ch()===125)return this.modeStack.pop(),this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);if(this.ch()!==44)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this._pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),this.ch()===125)return this._pos++,this.skipWhitespace(),new Token(Type.break,void 0,1);const r=this.parseString();if(this.skipWhitespace(),this.ch()!==58)throw new Error(`${decodeErrPrefix} unexpected character at position ${this._pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this._pos++,this.modeStack.push("obj-value"),r}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw new Error(`${decodeErrPrefix} unexpected parse state at position ${this._pos}; this shouldn't happen`)}}}function decode$4(n,r){return r=Object.assign({tokenizer:new Tokenizer(n,r)},r),decode$l(n,r)}function toByteView(n){return n instanceof ArrayBuffer?new Uint8Array(n,0,n.byteLength):n}function cidEncoder(n){if(n.asCID!==n&&n["/"]!==n.bytes)return null;const r=CID$1.asCID(n);if(!r)return null;const g=r.toString();return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.string,g,g.length),new Token(Type.break,void 0,1)]}function bytesEncoder(n){const r=base64.encode(n).slice(1);return[new Token(Type.map,1/0,1),new Token(Type.string,"/",1),new Token(Type.map,1/0,1),new Token(Type.string,"bytes",5),new Token(Type.string,r,r.length),new Token(Type.break,void 0,1),new Token(Type.break,void 0,1)]}function taBytesEncoder(n){return bytesEncoder(new Uint8Array(n.buffer,n.byteOffset,n.byteLength))}function abBytesEncoder(n){return bytesEncoder(new Uint8Array(n))}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(n){if(Number.isNaN(n))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(n===1/0||n===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={typeEncoders:{Object:cidEncoder,Buffer:bytesEncoder,Uint8Array:bytesEncoder,Int8Array:taBytesEncoder,Uint16Array:taBytesEncoder,Int16Array:taBytesEncoder,Uint32Array:taBytesEncoder,Int32Array:taBytesEncoder,Float32Array:taBytesEncoder,Float64Array:taBytesEncoder,Uint8ClampedArray:taBytesEncoder,BigInt64Array:taBytesEncoder,BigUint64Array:taBytesEncoder,DataView:taBytesEncoder,ArrayBuffer:abBytesEncoder,undefined:undefinedEncoder,number:numberEncoder}};class DagJsonTokenizer extends Tokenizer{constructor(r,g){super(r,g),this.tokenBuffer=[]}done(){return this.tokenBuffer.length===0&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){const r=this._next();if(r.type===Type.map){const g=this._next();if(g.type===Type.string&&g.value==="/"){const _=this._next();if(_.type===Type.string){if(this._next().type!==Type.break)throw new Error("Invalid encoded CID form");return this.tokenBuffer.push(_),new Token(Type.tag,42,0)}if(_.type===Type.map){const x=this._next();if(x.type===Type.string&&x.value==="bytes"){const S=this._next();if(S.type===Type.string){for(let C=0;C<2;C++)if(this._next().type!==Type.break)throw new Error("Invalid encoded Bytes form");const E=base64.decode(`m${S.value}`);return new Token(Type.bytes,E,S.value.length)}this.tokenBuffer.push(S)}this.tokenBuffer.push(x)}this.tokenBuffer.push(_)}this.tokenBuffer.push(g)}return r}}const decodeOptions={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions.tags[42]=CID$1.parse;const name$3="dag-json",code$1=297,encode$3=n=>encode$4(n,encodeOptions),decode$3=n=>{const r=toByteView(n),g=Object.assign(decodeOptions,{tokenizer:new DagJsonTokenizer(r,decodeOptions)});return decode$4(r,g)},format$2=n=>utf8Decoder.decode(encode$3(n)),utf8Decoder=new TextDecoder,parse$3=n=>decode$3(utf8Encoder.encode(n)),utf8Encoder=new TextEncoder,dagJson=Object.freeze(Object.defineProperty({__proto__:null,code:code$1,decode:decode$3,encode:encode$3,format:format$2,name:name$3,parse:parse$3,stringify:format$2},Symbol.toStringTag,{value:"Module"}));function resolveObjectPath(n,r,g,_,x,S,E){let C=n,T=x;for(;S.length>0;){const R=S[0];if(R in C){S.shift(),T=`${T}/${R}`;const A=CID$1.asCID(C[R]);if(A!=null)return{entry:{type:"object",name:_,path:x,cid:g,node:r,depth:E,size:BigInt(r.length),content:async function*(){yield n}},next:{cid:A,name:R,path:T,toResolve:S}};C=C[R]}else throw new NoPropError(`No property named ${R} found in node ${g}`)}return{entry:{type:"object",name:_,path:x,cid:g,node:r,depth:E,size:BigInt(r.length),content:async function*(){yield n}}}}const resolve$6=async(n,r,g,_,x,S,E,C)=>{const T=await E.get(n,C),R=decode$g(T);return resolveObjectPath(R,T,n,r,g,_,S)},resolve$5=async(n,r,g,_,x,S,E,C)=>{const T=await E.get(n,C),R=decode$3(T);return resolveObjectPath(R,T,n,r,g,_,S)};function extractDataFromBlock(n,r,g,_){const x=BigInt(n.length),S=BigInt(r+x);return g>=S||_<r?new Uint8Array(0):(_>=r&&_<S&&(n=n.subarray(0,Number(_-r))),g>=r&&g<S&&(n=n.subarray(Number(g-r))),n)}const validateOffsetAndLength=(n,r=0,g=n)=>{const _=BigInt(n),x=BigInt(r??0);let S=BigInt(g);if(S!==_&&(S=x+S),S>_&&(S=_),x<0n)throw new InvalidParametersError$2("Offset must be greater than or equal to 0");if(x>_)throw new InvalidParametersError$2("Offset must be less than the file size");if(S<0n)throw new InvalidParametersError$2("Length must be greater than or equal to 0");if(S>_)throw new InvalidParametersError$2("Length must be less than the file size");return{start:x,end:S}},rawContent$1=n=>{async function*r(g={}){const{start:_,end:x}=validateOffsetAndLength(n.length,g.offset,g.length),S=extractDataFromBlock(n,0n,_,x);g.onProgress?.(new CustomProgressEvent("unixfs:exporter:progress:identity",{bytesRead:BigInt(S.byteLength),totalBytes:x-_,fileSize:BigInt(n.byteLength)})),yield S}return r},resolve$4=async(n,r,g,_,x,S,E,C)=>{if(_.length>0)throw new NotFoundError$2(`No link named ${g} found in raw node ${n}`);const T=decode$h(n.multihash.bytes);return{entry:{type:"identity",name:r,path:g,cid:n,content:rawContent$1(T.digest),depth:S,size:BigInt(T.digest.length),node:T.digest}}},resolve$3=async(n,r,g,_,x,S,E,C)=>{const T=await E.get(n,C),R=decode$8(T);return resolveObjectPath(R,T,n,r,g,_,S)},rawContent=n=>{async function*r(g={}){const{start:_,end:x}=validateOffsetAndLength(n.length,g.offset,g.length),S=extractDataFromBlock(n,0n,_,x);g.onProgress?.(new CustomProgressEvent("unixfs:exporter:progress:raw",{bytesRead:BigInt(S.byteLength),totalBytes:x-_,fileSize:BigInt(n.byteLength)})),yield S}return r},resolve$2=async(n,r,g,_,x,S,E,C)=>{if(_.length>0)throw new NotFoundError$2(`No link named ${g} found in raw node ${n}`);const T=await E.get(n,C);return{entry:{type:"raw",name:r,path:g,cid:n,content:rawContent(T),depth:S,size:BigInt(T.length),node:T}}},hashFn=async function(n){return(await murmur3128.encode(n)).slice(0,8).reverse()},addLinksToHamtBucket=async(n,r,g)=>{const _=(r.tableSize()-1).toString(16).length;await Promise.all(n.map(async x=>{if(x.Name==null)throw new Error("Unexpected Link without a Name");if(x.Name.length===_){const S=parseInt(x.Name,16);r._putObjectAt(S,new Bucket$1({hash:g._options.hash,bits:g._options.bits},r,S));return}await g.put(x.Name.substring(2),!0)}))},toPrefix$1=(n,r)=>n.toString(16).toUpperCase().padStart(r,"0").substring(0,r),toBucketPath=n=>{let r=n.bucket;const g=[];for(;r._parent!=null;)g.push(r),r=r._parent;return g.push(r),g.reverse()},findShardCid=async(n,r,g,_,x)=>{if(_==null){if(n.Data==null)throw new NotUnixFSError$1("no data in PBNode");let I;try{I=UnixFS$1.unmarshal(n.Data)}catch(D){throw new NotUnixFSError$1(D.message)}if(I.type!=="hamt-sharded-directory")throw new NotUnixFSError$1("not a HAMT");if(I.fanout==null)throw new NotUnixFSError$1("missing fanout");const B=createHAMT({hashFn,bits:Math.log2(Number(I.fanout))});_={rootBucket:B,hamtDepth:1,lastBucket:B}}const S=(_.lastBucket.tableSize()-1).toString(16).length;await addLinksToHamtBucket(n.Links,_.lastBucket,_.rootBucket);const E=await _.rootBucket._findNewBucketAndPos(r);let C=toPrefix$1(E.pos,S);const T=toBucketPath(E);T.length>_.hamtDepth&&(_.lastBucket=T[_.hamtDepth],C=toPrefix$1(_.lastBucket._posAtParent,S));const R=n.Links.find(I=>{if(I.Name==null)return!1;const B=I.Name.substring(0,S),D=I.Name.substring(S);return!(B!==C||D!==""&&D!==r)});if(R==null)return;if(R.Name!=null&&R.Name.substring(S)===r)return R.Hash;_.hamtDepth++;const A=await g.get(R.Hash,x);return n=decode$5(A),findShardCid(n,r,g,_,x)};function peekable(n){const[r,g]=n[Symbol.asyncIterator]!=null?[n[Symbol.asyncIterator](),Symbol.asyncIterator]:[n[Symbol.iterator](),Symbol.iterator],_=[];return{peek:()=>r.next(),push:x=>{_.push(x)},next:()=>_.length>0?{done:!1,value:_.shift()}:r.next(),[g](){return this}}}function isAsyncIterable$7(n){return n[Symbol.asyncIterator]!=null}function filter(n,r){let g=0;if(isAsyncIterable$7(n))return async function*(){for await(const T of n)await r(T,g++)&&(yield T)}();const _=peekable(n),{value:x,done:S}=_.next();if(S===!0)return function*(){}();const E=r(x,g++);if(typeof E.then=="function")return async function*(){await E&&(yield x);for await(const T of _)await r(T,g++)&&(yield T)}();const C=r;return function*(){E===!0&&(yield x);for(const T of _)C(T,g++)&&(yield T)}()}function isAsyncIterable$6(n){return n[Symbol.asyncIterator]!=null}function map$2(n,r){let g=0;if(isAsyncIterable$6(n))return async function*(){for await(const T of n)yield r(T,g++)}();const _=peekable(n),{value:x,done:S}=_.next();if(S===!0)return function*(){}();const E=r(x,g++);if(typeof E.then=="function")return async function*(){yield await E;for await(const T of _)yield r(T,g++)}();const C=r;return function*(){yield E;for(const T of _)yield C(T,g++)}()}const CustomEvent$1=globalThis.CustomEvent??Event;async function*parallel$1(n,r={}){let g=r.concurrency??1/0;g<1&&(g=1/0);const _=r.ordered==null?!1:r.ordered,x=new EventTarget,S=[];let E=pDefer(),C=pDefer(),T=!1,R,A=!1;x.addEventListener("task-complete",()=>{C.resolve()}),Promise.resolve().then(async()=>{try{for await(const N of n){if(S.length===g&&(E=pDefer(),await E.promise),A)break;const M={done:!1};S.push(M),N().then(O=>{M.done=!0,M.ok=!0,M.value=O,x.dispatchEvent(new CustomEvent$1("task-complete"))},O=>{M.done=!0,M.err=O,x.dispatchEvent(new CustomEvent$1("task-complete"))})}T=!0,x.dispatchEvent(new CustomEvent$1("task-complete"))}catch(N){R=N,x.dispatchEvent(new CustomEvent$1("task-complete"))}});function I(){return _?S[0]?.done:!!S.find(N=>N.done)}function*B(){for(;S.length>0&&S[0].done;){const N=S[0];if(S.shift(),N.ok)yield N.value;else throw A=!0,E.resolve(),N.err;E.resolve()}}function*D(){for(;I();)for(let N=0;N<S.length;N++)if(S[N].done){const M=S[N];if(S.splice(N,1),N--,M.ok)yield M.value;else throw A=!0,E.resolve(),M.err;E.resolve()}}for(;;){if(I()||(C=pDefer(),await C.promise),R!=null)throw R;if(_?yield*B():yield*D(),T&&S.length===0)break}}const directoryContent=(n,r,g,_,x,S,E)=>{async function*C(T={}){const R=T.offset??0,A=T.length??r.Links.length,I=r.Links.slice(R,A);T.onProgress?.(new CustomProgressEvent("unixfs:exporter:walk:directory",{cid:n})),yield*pipe(I,B=>map$2(B,D=>async()=>{const N=D.Name??"",M=`${_}/${N}`;return(await x(D.Hash,N,M,[],S+1,E,T)).entry}),B=>parallel$1(B,{ordered:!0,concurrency:T.blockReadConcurrency}),B=>filter(B,D=>D!=null))}return C};async function walkDAG(n,r,g,_,x,S,E){if(r instanceof Uint8Array){const R=extractDataFromBlock(r,_,x,S);g.push(R);return}if(r.Data==null)throw new NotUnixFSError$1("no data in PBNode");let C;try{C=UnixFS$1.unmarshal(r.Data)}catch(R){throw new NotUnixFSError$1(R.message)}if(C.data!=null){const R=C.data,A=extractDataFromBlock(R,_,x,S);g.push(A),_+=BigInt(A.byteLength)}const T=[];if(r.Links.length!==C.blockSizes.length)throw new NotUnixFSError$1("Inconsistent block sizes and dag links");for(let R=0;R<r.Links.length;R++){const A=r.Links[R],I=_,B=I+C.blockSizes[R];if((x>=I&&x<B||S>=I&&S<=B||x<I&&S>B)&&T.push({link:A,blockStart:_}),_=B,_>S)break}await pipe(T,R=>map$2(R,A=>async()=>{const I=await n.get(A.link.Hash,E);return{...A,block:I}}),R=>parallel$1(R,{ordered:!0,concurrency:E.blockReadConcurrency}),async R=>{for await(const{link:A,block:I,blockStart:B}of R){let D;switch(A.Hash.code){case code$2:D=decode$5(I);break;case code$6:D=I;break;default:g.end(new NotUnixFSError$1(`Unsupported codec: ${A.Hash.code}`));return}const N=new PQueue({concurrency:1});N.on("error",M=>{g.end(M)}),N.add(async()=>{E.onProgress?.(new CustomProgressEvent("unixfs:exporter:walk:file",{cid:A.Hash})),await walkDAG(n,D,g,B,x,S,E)}),await N.onIdle()}}),_>=S&&g.end()}const fileContent=(n,r,g,_,x,S,E)=>{async function*C(T={}){const R=g.fileSize();if(R===void 0)throw new Error("File was a directory");const{start:A,end:I}=validateOffsetAndLength(R,T.offset,T.length);if(I===0n)return;let B=0n;const D=I-A,N=pushable();T.onProgress?.(new CustomProgressEvent("unixfs:exporter:walk:file",{cid:n})),walkDAG(E,r,N,0n,A,I,T).catch(M=>{N.end(M)});for await(const M of N)if(M!=null){if(B+=BigInt(M.byteLength),B>D)throw N.end(),new OverReadError("Read too many bytes - the file size reported by the UnixFS data in the root node may be incorrect");B===D&&N.end(),T.onProgress?.(new CustomProgressEvent("unixfs:exporter:progress:unixfs:file",{bytesRead:B,totalBytes:D,fileSize:R})),yield M}if(B<D)throw new UnderReadError("Traversed entire DAG but did not read enough bytes")}return C},hamtShardedDirectoryContent=(n,r,g,_,x,S,E)=>{function C(T={}){return T.onProgress?.(new CustomProgressEvent("unixfs:exporter:walk:hamt-sharded-directory",{cid:n})),listDirectory(r,_,x,S,E,T)}return C};async function*listDirectory(n,r,g,_,x,S){const E=n.Links;if(n.Data==null)throw new NotUnixFSError$1("no data in PBNode");let C;try{C=UnixFS$1.unmarshal(n.Data)}catch(A){throw new NotUnixFSError$1(A.message)}if(C.fanout==null)throw new NotUnixFSError$1("missing fanout");const T=(C.fanout-1n).toString(16).length,R=pipe(E,A=>map$2(A,I=>async()=>{const B=I.Name!=null?I.Name.substring(T):null;if(B!=null&&B!==""){const D=await g(I.Hash,B,`${r}/${B}`,[],_+1,x,S);return{entries:D.entry==null?[]:[D.entry]}}else{const D=await x.get(I.Hash,S);return n=decode$5(D),S.onProgress?.(new CustomProgressEvent("unixfs:exporter:walk:hamt-sharded-directory",{cid:I.Hash})),{entries:listDirectory(n,r,g,_,x,S)}}}),A=>parallel$1(A,{ordered:!0,concurrency:S.blockReadConcurrency}));for await(const{entries:A}of R)yield*A}const findLinkCid=(n,r)=>n.Links.find(_=>_.Name===r)?.Hash,contentExporters={raw:fileContent,file:fileContent,directory:directoryContent,"hamt-sharded-directory":hamtShardedDirectoryContent,metadata:(n,r,g,_,x,S,E)=>()=>[],symlink:(n,r,g,_,x,S,E)=>()=>[]},unixFsResolver=async(n,r,g,_,x,S,E,C)=>{const T=await E.get(n,C),R=decode$5(T);let A,I;if(r==null&&(r=n.toString()),R.Data==null)throw new NotUnixFSError$1("no data in PBNode");try{A=UnixFS$1.unmarshal(R.Data)}catch(D){throw new NotUnixFSError$1(D.message)}if(g==null&&(g=r),_.length>0){let D;if(A?.type==="hamt-sharded-directory"?D=await findShardCid(R,_[0],E):D=findLinkCid(R,_[0]),D==null)throw new NotFoundError$2("file does not exist");const N=_.shift(),M=`${g}/${N}`;I={cid:D,toResolve:_,name:N??"",path:M}}const B=contentExporters[A.type](n,R,A,g,x,S,E);if(B==null)throw new NotFoundError$2("could not find content exporter");return A.isDirectory()?{entry:{type:"directory",name:r,path:g,cid:n,content:B,unixfs:A,depth:S,node:R,size:A.fileSize()},next:I}:{entry:{type:"file",name:r,path:g,cid:n,content:B,unixfs:A,depth:S,node:R,size:A.fileSize()},next:I}},resolvers$1={[code$2]:unixFsResolver,[code$6]:resolve$2,[code$9]:resolve$6,[code$1]:resolve$5,[identity$1.code]:resolve$4,[code$7]:resolve$3},resolve$1=async(n,r,g,_,x,S,E)=>{const C=resolvers$1[n.code];if(C==null)throw new NoResolverError(`No resolver for code ${n.code}`);return C(n,r,g,_,resolve$1,x,S,E)},toPathComponents=(n="")=>(n.trim().match(/([^\\^/]|\\\/)+/g)??[]).filter(Boolean),cidAndRest=n=>{if(n instanceof Uint8Array)return{cid:CID$1.decode(n),toResolve:[]};const r=CID$1.asCID(n);if(r!=null)return{cid:r,toResolve:[]};if(typeof n=="string"){n.indexOf("/ipfs/")===0&&(n=n.substring(6));const g=toPathComponents(n);return{cid:CID$1.parse(g[0]),toResolve:g.slice(1)}}throw new BadPathError(`Unknown path type ${n}`)};async function*walkPath(n,r,g={}){let{cid:_,toResolve:x}=cidAndRest(n),S=_.toString(),E=S;const C=x.length;for(;;){const T=await resolve$1(_,S,E,x,C,r,g);if(T.entry==null&&T.next==null)throw new NotFoundError$2(`Could not resolve ${n}`);if(T.entry!=null&&(yield T.entry),T.next==null)return;x=T.next.toResolve,_=T.next.cid,S=T.next.name,E=T.next.path}}async function exporter$1(n,r,g={}){const _=await last(walkPath(n,r,g));if(_==null)throw new NotFoundError$2(`Could not resolve ${n}`);return _}async function*recursive(n,r,g={}){const _=await exporter$1(n,r,g);if(_==null)return;if(yield _,_.type==="directory")for await(const S of x(_,g))yield S;async function*x(S,E){for await(const C of S.content(E))yield C,!(C instanceof Uint8Array)&&C.type==="directory"&&(yield*x(C,E))}}var isPlainObj,hasRequiredIsPlainObj;function requireIsPlainObj(){return hasRequiredIsPlainObj||(hasRequiredIsPlainObj=1,isPlainObj=n=>{if(Object.prototype.toString.call(n)!=="[object Object]")return!1;const r=Object.getPrototypeOf(n);return r===null||r===Object.prototype}),isPlainObj}var mergeOptions$a,hasRequiredMergeOptions;function requireMergeOptions(){if(hasRequiredMergeOptions)return mergeOptions$a;hasRequiredMergeOptions=1;const n=requireIsPlainObj(),{hasOwnProperty:r}=Object.prototype,{propertyIsEnumerable:g}=Object,_=(D,N,M)=>Object.defineProperty(D,N,{value:M,writable:!0,enumerable:!0,configurable:!0}),x=mergeOptions$a,S={concatArrays:!1,ignoreUndefined:!1},E=D=>{const N=[];for(const M in D)r.call(D,M)&&N.push(M);if(Object.getOwnPropertySymbols){const M=Object.getOwnPropertySymbols(D);for(const O of M)g.call(D,O)&&N.push(O)}return N};function C(D){return Array.isArray(D)?T(D):n(D)?R(D):D}function T(D){const N=D.slice(0,0);return E(D).forEach(M=>{_(N,M,C(D[M]))}),N}function R(D){const N=Object.getPrototypeOf(D)===null?Object.create(null):{};return E(D).forEach(M=>{_(N,M,C(D[M]))}),N}const A=(D,N,M,O)=>(M.forEach(L=>{typeof N[L]>"u"&&O.ignoreUndefined||(L in D&&D[L]!==Object.getPrototypeOf(D)?_(D,L,B(D[L],N[L],O)):_(D,L,C(N[L])))}),D),I=(D,N,M)=>{let O=D.slice(0,0),L=0;return[D,N].forEach(F=>{const U=[];for(let j=0;j<F.length;j++)r.call(F,j)&&(U.push(String(j)),F===D?_(O,L++,F[j]):_(O,L++,C(F[j])));O=A(O,F,E(F).filter(j=>!U.includes(j)),M)}),O};function B(D,N,M){return M.concatArrays&&Array.isArray(D)&&Array.isArray(N)?I(D,N,M):!n(N)||!n(D)?C(N):A(D,N,E(N),M)}return mergeOptions$a=function(...D){const N=B(C(S),this!==x&&this||{},S);let M={_:{}};for(const O of D)if(O!==void 0){if(!n(O))throw new TypeError("`"+O+"` is not an Option Object");M=B(M,{_:O},N)}return M._},mergeOptions$a}var mergeOptionsExports=requireMergeOptions();const mergeOptions$9=getDefaultExportFromCjs(mergeOptionsExports);class UnixFSError extends Error{name;code;constructor(r,g,_){super(r),this.name=g,this.code=_}}class NotUnixFSError extends UnixFSError{constructor(r="not a Unixfs node"){super(r,"NotUnixFSError","ERR_NOT_UNIXFS")}}class InvalidPBNodeError extends UnixFSError{constructor(r="invalid PBNode"){super(r,"InvalidPBNodeError","ERR_INVALID_PBNODE")}}class UnknownError extends UnixFSError{constructor(r="unknown error"){super(r,"InvalidPBNodeError","ERR_UNKNOWN_ERROR")}}class AlreadyExistsError extends UnixFSError{constructor(r="path already exists"){super(r,"AlreadyExistsError","ERR_ALREADY_EXISTS")}}class DoesNotExistError extends UnixFSError{constructor(r="path does not exist"){super(r,"DoesNotExistError","ERR_DOES_NOT_EXIST")}}class NoContentError extends UnixFSError{constructor(r="no content"){super(r,"NoContentError","ERR_NO_CONTENT")}}class NotAFileError extends UnixFSError{constructor(r="not a file"){super(r,"NotAFileError","ERR_NOT_A_FILE")}}class NotADirectoryError extends UnixFSError{constructor(r="not a directory"){super(r,"NotADirectoryError","ERR_NOT_A_DIRECTORY")}}let InvalidParametersError$1=class extends UnixFSError{constructor(r="invalid parameters"){super(r,"InvalidParametersError","ERR_INVALID_PARAMETERS")}};const s$1=1e3,m$1=s$1*60,h$1=m$1*60,d$1=h$1*24,w$1=d$1*7,y$1=d$1*365.25;function ms(n,r){try{if(typeof n=="string"&&n.length>0)return parse$2(n);if(typeof n=="number"&&isFinite(n))return r?.long?fmtLong(n):fmtShort(n);throw new Error("Value is not a string or number.")}catch(g){const _=isError$1(g)?`${g.message}. value=${JSON.stringify(n)}`:"An unknown error has occured.";throw new Error(_)}}function parse$2(n){if(n=String(n),n.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const r=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(!r)return NaN;const g=parseFloat(r[1]),_=(r[2]||"ms").toLowerCase();switch(_){case"years":case"year":case"yrs":case"yr":case"y":return g*y$1;case"weeks":case"week":case"w":return g*w$1;case"days":case"day":case"d":return g*d$1;case"hours":case"hour":case"hrs":case"hr":case"h":return g*h$1;case"minutes":case"minute":case"mins":case"min":case"m":return g*m$1;case"seconds":case"second":case"secs":case"sec":case"s":return g*s$1;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return g;default:throw new Error(`The unit ${_} was matched, but no matching case exists.`)}}function fmtShort(n){const r=Math.abs(n);return r>=d$1?`${Math.round(n/d$1)}d`:r>=h$1?`${Math.round(n/h$1)}h`:r>=m$1?`${Math.round(n/m$1)}m`:r>=s$1?`${Math.round(n/s$1)}s`:`${n}ms`}function fmtLong(n){const r=Math.abs(n);return r>=d$1?plural(n,r,d$1,"day"):r>=h$1?plural(n,r,h$1,"hour"):r>=m$1?plural(n,r,m$1,"minute"):r>=s$1?plural(n,r,s$1,"second"):`${n} ms`}function plural(n,r,g,_){const x=r>=g*1.5;return`${Math.round(n/g)} ${_}${x?"s":""}`}function isError$1(n){return typeof n=="object"&&n!==null&&"message"in n}function setup(n){g.debug=g,g.default=g,g.coerce=T,g.disable=S,g.enable=x,g.enabled=E,g.humanize=ms,g.destroy=R,Object.keys(n).forEach(A=>{g[A]=n[A]}),g.names=[],g.skips=[],g.formatters={};function r(A){let I=0;for(let B=0;B<A.length;B++)I=(I<<5)-I+A.charCodeAt(B),I|=0;return g.colors[Math.abs(I)%g.colors.length]}g.selectColor=r;function g(A){let I,B=null,D,N;function M(...O){if(!M.enabled)return;const L=M,F=Number(new Date),U=F-(I||F);L.diff=U,L.prev=I,L.curr=F,I=F,O[0]=g.coerce(O[0]),typeof O[0]!="string"&&O.unshift("%O");let j=0;O[0]=O[0].replace(/%([a-zA-Z%])/g,(W,X)=>{if(W==="%%")return"%";j++;const ie=g.formatters[X];if(typeof ie=="function"){const fe=O[j];W=ie.call(L,fe),O.splice(j,1),j--}return W}),g.formatArgs.call(L,O),(L.log||g.log).apply(L,O)}return M.namespace=A,M.useColors=g.useColors(),M.color=g.selectColor(A),M.extend=_,M.destroy=g.destroy,Object.defineProperty(M,"enabled",{enumerable:!0,configurable:!1,get:()=>B!==null?B:(D!==g.namespaces&&(D=g.namespaces,N=g.enabled(A)),N),set:O=>{B=O}}),typeof g.init=="function"&&g.init(M),M}function _(A,I){const B=g(this.namespace+(typeof I>"u"?":":I)+A);return B.log=this.log,B}function x(A){g.save(A),g.namespaces=A,g.names=[],g.skips=[];let I;const B=(typeof A=="string"?A:"").split(/[\s,]+/),D=B.length;for(I=0;I<D;I++)B[I]&&(A=B[I].replace(/\*/g,".*?"),A[0]==="-"?g.skips.push(new RegExp("^"+A.substr(1)+"$")):g.names.push(new RegExp("^"+A+"$")))}function S(){const A=[...g.names.map(C),...g.skips.map(C).map(I=>"-"+I)].join(",");return g.enable(""),A}function E(A){if(A[A.length-1]==="*")return!0;let I,B;for(I=0,B=g.skips.length;I<B;I++)if(g.skips[I].test(A))return!1;for(I=0,B=g.names.length;I<B;I++)if(g.names[I].test(A))return!0;return!1}function C(A){return A.toString().substring(2,A.toString().length-2).replace(/\.\*\?$/,"*")}function T(A){return A instanceof Error?A.stack??A.message:A}function R(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return g.setupFormatters(g.formatters),g.enable(g.load()),g}var define_globalThis_process_env_default={};const storage=localstorage(),colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function useColors(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/(edge|trident)\/(\d+)/)!=null?!1:typeof document<"u"&&document.documentElement?.style?.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/firefox\/(\d+)/)!=null&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent?.toLowerCase().match(/applewebkit\/(\d+)/)}function formatArgs(n){if(n[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+n[0]+(this.useColors?"%c ":" ")+"+"+ms(this.diff),!this.useColors)return;const r="color: "+this.color;n.splice(1,0,r,"color: inherit");let g=0,_=0;n[0].replace(/%[a-zA-Z%]/g,x=>{x!=="%%"&&(g++,x==="%c"&&(_=g))}),n.splice(_,0,r)}const log$d=console.debug??console.log??(()=>{});function save(n){try{n?storage?.setItem("debug",n):storage?.removeItem("debug")}catch{}}function load(){let n;try{n=storage?.getItem("debug")}catch{}return!n&&typeof globalThis.process<"u"&&"env"in globalThis.process&&(n=define_globalThis_process_env_default.DEBUG),n}function localstorage(){try{return localStorage}catch{}}function setupFormatters(n){n.j=function(r){try{return JSON.stringify(r)}catch(g){return"[UnexpectedJSONParseError]: "+g.message}}}const weald=setup({formatArgs,save,load,useColors,setupFormatters,colors,storage,log:log$d});weald.formatters.b=n=>n==null?"undefined":base58btc$1.baseEncode(n);weald.formatters.t=n=>n==null?"undefined":base32$1.baseEncode(n);weald.formatters.m=n=>n==null?"undefined":base64.baseEncode(n);weald.formatters.p=n=>n==null?"undefined":n.toString();weald.formatters.c=n=>n==null?"undefined":n.toString();weald.formatters.k=n=>n==null?"undefined":n.toString();weald.formatters.a=n=>n==null?"undefined":n.toString();weald.formatters.e=n=>n==null?"undefined":notEmpty$2(n.stack)??notEmpty$2(n.message)??n.toString();function createDisabledLogger$2(n){const r=()=>{};return r.enabled=!1,r.color="",r.diff=0,r.log=()=>{},r.namespace=n,r.destroy=()=>!0,r.extend=()=>r,r}function defaultLogger(){return{forComponent(n){return logger$2(n)}}}function logger$2(n){let r=createDisabledLogger$2(`${n}:trace`);return weald.enabled(`${n}:trace`)&&weald.names.map(g=>g.toString()).find(g=>g.includes(":trace"))!=null&&(r=weald(`${n}:trace`)),Object.assign(weald(n),{error:weald(`${n}:error`),trace:r})}function notEmpty$2(n){if(n!=null&&(n=n.trim(),n.length!==0))return n}function wrapHash(n){function r(g){return g instanceof InfiniteHash?g:new InfiniteHash(g,n)}return r}class InfiniteHash{_value;_hashFn;_depth;_availableBits;_currentBufferIndex;_buffers;constructor(r,g){if(!(r instanceof Uint8Array))throw new Error("can only hash Uint8Arrays");this._value=r,this._hashFn=g,this._depth=-1,this._availableBits=0,this._currentBufferIndex=0,this._buffers=[]}async take(r){let g=r;for(;this._availableBits<g;)await this._produceMoreBits();let _=0;for(;g>0;){const x=this._buffers[this._currentBufferIndex],S=Math.min(x.availableBits(),g),E=x.take(S);_=(_<<S)+E,g-=S,this._availableBits-=S,x.availableBits()===0&&this._currentBufferIndex++}return _}untake(r){let g=r;for(;g>0;){const _=this._buffers[this._currentBufferIndex],x=Math.min(_.totalBits()-_.availableBits(),g);_.untake(x),g-=x,this._availableBits+=x,this._currentBufferIndex>0&&_.totalBits()===_.availableBits()&&(this._depth--,this._currentBufferIndex--)}}async _produceMoreBits(){this._depth++;const r=this._depth>0?concat([this._value,Uint8Array.from([this._depth])]):this._value,g=await this._hashFn(r),_=new ConsumableBuffer(g);this._buffers.push(_),this._availableBits+=_.availableBits()}}const START_MASKS=[255,254,252,248,240,224,192,128],STOP_MASKS=[1,3,7,15,31,63,127,255];class ConsumableBuffer{_value;_currentBytePos;_currentBitPos;constructor(r){this._value=r,this._currentBytePos=r.length-1,this._currentBitPos=7}availableBits(){return this._currentBitPos+1+this._currentBytePos*8}totalBits(){return this._value.length*8}take(r){let g=r,_=0;for(;g>0&&this._haveBits();){const x=this._value[this._currentBytePos],S=this._currentBitPos+1,E=Math.min(S,g),C=byteBitsToInt(x,S-E,E);_=(_<<E)+C,g-=E,this._currentBitPos-=E,this._currentBitPos<0&&(this._currentBitPos=7,this._currentBytePos--)}return _}untake(r){for(this._currentBitPos+=r;this._currentBitPos>7;)this._currentBitPos-=8,this._currentBytePos+=1}_haveBits(){return this._currentBytePos>=0}}function byteBitsToInt(n,r,g){const _=maskFor(r,g);return(n&_)>>>r}function maskFor(n,r){return START_MASKS[n]&STOP_MASKS[Math.min(r+n-1,7)]}const hamtHashCode=BigInt(murmur3128.code),hamtBucketBits=8;async function hamtHashFn(n){return(await murmur3128.encode(n)).subarray(0,8).reverse()}const persist=async(n,r,g)=>{g.codec==null&&(g.codec=dagPb);const _=await sha256$8.digest(n),x=CID$1.create(g.cidVersion,g.codec.code,_);return await r.put(x,n,{...g,signal:g.signal}),x};class Dir{options;root;dir;path;dirty;flat;parent;parentKey;unixfs;mode;mtime;cid;size;nodeSize;constructor(r,g){this.options=g??{},this.root=r.root,this.dir=r.dir,this.path=r.path,this.dirty=r.dirty,this.flat=r.flat,this.parent=r.parent,this.parentKey=r.parentKey,this.unixfs=r.unixfs,this.mode=r.mode,this.mtime=r.mtime}}class DirSharded extends Dir{_bucket;constructor(r,g){super(r,g),this._bucket=createHAMT({hashFn:hamtHashFn,bits:8})}async put(r,g){this.cid=void 0,this.size=void 0,this.nodeSize=void 0,await this._bucket.put(r,g)}async get(r){return this._bucket.get(r)}childCount(){return this._bucket.leafCount()}directChildrenCount(){return this._bucket.childrenCount()}onlyChild(){return this._bucket.onlyChild()}async*eachChildSeries(){for await(const{key:r,value:g}of this._bucket.eachLeafSeries())yield{key:r,child:g}}estimateNodeSize(){return this.nodeSize!==void 0?this.nodeSize:(this.nodeSize=calculateSize(this._bucket,this,this.options),this.nodeSize)}async*flush(r){for await(const g of flush(this._bucket,r,this,this.options))yield{...g,path:this.path}}}async function*flush(n,r,g,_){const x=n._children,S=[];let E=0n;for(let D=0;D<x.length;D++){const N=x.get(D);if(N==null)continue;const M=D.toString(16).toUpperCase().padStart(2,"0");if(N instanceof Bucket$1){let O;for await(const L of flush(N,r,null,_))O=L;if(O==null)throw new Error("Could not flush sharded directory, no subshard found");S.push({Name:M,Tsize:Number(O.size),Hash:O.cid}),E+=O.size}else if(isDir(N.value)){const O=N.value;let L;for await(const U of O.flush(r))L=U,yield L;if(L==null)throw new Error("Did not flush dir");const F=M+N.key;S.push({Name:F,Tsize:Number(L.size),Hash:L.cid}),E+=L.size}else{const O=N.value;if(O.cid==null)continue;const L=M+N.key,F=O.size;S.push({Name:L,Tsize:Number(F),Hash:O.cid}),E+=BigInt(F??0)}}const C=Uint8Array.from(x.bitField().reverse()),T=new UnixFS$1({type:"hamt-sharded-directory",data:C,fanout:BigInt(n.tableSize()),hashType:hamtHashCode,mtime:g?.mtime,mode:g?.mode}),R={Data:T.marshal(),Links:S},A=encode$5(prepare(R)),I=await persist(A,r,_),B=BigInt(A.byteLength)+E;yield{cid:I,unixfs:T,size:B}}function isDir(n){return typeof n.flush=="function"}function calculateSize(n,r,g){const _=n._children,x=[];for(let T=0;T<_.length;T++){const R=_.get(T);if(R==null)continue;const A=T.toString(16).toUpperCase().padStart(2,"0");if(R instanceof Bucket$1){const I=calculateSize(R,null,g);x.push({Name:A,Tsize:Number(I),Hash:g.cidVersion===0?CID_V0:CID_V1})}else if(typeof R.value.flush=="function"){const B=R.value.nodeSize();x.push({Name:A+R.key,Tsize:Number(B),Hash:g.cidVersion===0?CID_V0:CID_V1})}else{const I=R.value;if(I.cid==null)continue;const B=A+R.key,D=I.size;x.push({Name:B,Tsize:Number(D),Hash:I.cid})}}const S=Uint8Array.from(_.bitField().reverse()),E=new UnixFS$1({type:"hamt-sharded-directory",data:S,fanout:BigInt(n.tableSize()),hashType:hamtHashCode,mtime:r?.mtime,mode:r?.mode});return encode$5(prepare({Data:E.marshal(),Links:x})).length}const CID_V0=CID$1.parse("QmUNLLsPACCz1vLxQVkXqqLX5R1X345qqfHbsf67hvA3Nn"),CID_V1=CID$1.parse("zdj7WbTaiJT1fgatdet9Ei9iDB5hdCxkbVyhyh8YTUnXMiwYi"),log$c=logger$2("helia:unixfs:commands:utils:hamt-utils"),toPrefix=n=>n.toString(16).toUpperCase().padStart(2,"0").substring(0,2),createShard=async(n,r,g)=>{const _=new DirSharded({root:!0,dir:!0,parent:void 0,parentKey:void 0,path:"",dirty:!0,flat:!1,mtime:g.mtime,mode:g.mode},g);for(let S=0;S<r.length;S++)await _._bucket.put(r[S].name,{size:r[S].size,cid:r[S].cid});const x=await last(_.flush(n));if(x==null)throw new Error("Flushing shard yielded no result");return x},updateShardedDirectory=async(n,r,g)=>{const _=UnixFS$1.unmarshal(n[0].node.Data??new Uint8Array(0)),x=BigInt(Math.pow(2,hamtBucketBits));n.reverse();let S,E;for(let C=0;C<n.length;C++){const T=C===n.length-1,R=n[C],A=Uint8Array.from(R.children.bitField().reverse()),I=new UnixFS$1({type:"hamt-sharded-directory",data:A,fanout:x,hashType:hamtHashCode});T&&(I.mtime=_.mtime,I.mode=_.mode),E={Data:I.marshal(),Links:R.node.Links};const B=encode$5(prepare(E));if(S=await persist(B,r,g),!T){const D=n[C+1];if(D==null)throw new Error("Was not operating on shard root but also had no parent?");log$c("updating link in parent sub-shard with prefix %s",D.prefix),D.node.Links=D.node.Links.filter(N=>N.Name!==D.prefix),D.node.Links.push({Name:D.prefix,Hash:S,Tsize:R.node.Links.reduce((N,M)=>N+(M.Tsize??0),B.byteLength)})}}if(S==null||E==null)throw new Error("Noting persisted");return{cid:S,node:E}},recreateShardedDirectory=async(n,r,g,_)=>{const S=wrapHash(hamtHashFn)(fromString(r)),E=[];for(;;){const C=await g.get(n,_),T=decode$5(C),R=new SparseArray,A=await S.take(hamtBucketBits),I=toPrefix(A);E.push({prefix:I,children:R,node:T});let B;for(const N of T.Links){const M=N.Name??"";if(M.length<2)throw new Error("Invalid HAMT - link name was too short");const O=parseInt(M.substring(0,2),16);R.set(O,!0),M.startsWith(I)&&(B=N)}if(B==null){log$c("no link found with prefix %s for %s",I,r);break}const D=B.Name??"";if(D.length<2)throw new Error("Invalid HAMT - link name was too short");if(D.length===2){n=B.Hash,log$c("descend into sub-shard with prefix %s",D);continue}break}return{path:E,hash:S}};async function isOverShardThreshold(n,r,g,_){if(n.Data==null)throw new Error("DagPB node had no data");const x=UnixFS$1.unmarshal(n.Data);let S;if(x.type==="directory")S=estimateNodeSize(n);else if(x.type==="hamt-sharded-directory")S=await estimateShardSize(n,0,g,r,_);else throw new Error("Can only estimate the size of directories or shards");return S>g}function estimateNodeSize(n){let r=0;for(const g of n.Links)r+=(g.Name??"").length,r+=g.Hash.version===1?CID_V1.bytes.byteLength:CID_V0.bytes.byteLength;return r}async function estimateShardSize(n,r,g,_,x){if(r>g)return g;if(n.Data==null||!UnixFS$1.unmarshal(n.Data).isDirectory())return r;for(const E of n.Links){let C=E.Name??"";if(C=C.substring(2),r+=C.length,r+=E.Hash.bytes.byteLength,E.Hash.code===code$2){const T=await _.get(E.Hash,x),R=decode$5(T);r+=await estimateShardSize(R,r,g,_,x)}}return r}const log$b=logger$2("helia:unixfs:components:utils:add-link");async function addLink(n,r,g,_){if(n.node.Data==null)throw new InvalidParametersError$1("Invalid parent passed to addLink");if(UnixFS$1.unmarshal(n.node.Data).type==="hamt-sharded-directory")return log$b("adding link to sharded directory"),addToShardedDirectory(n,r,g,_);log$b(`adding ${r.Name} (${r.Hash}) to regular directory`);const S=await addToDirectory(n,r,g,_);if(await isOverShardThreshold(S.node,g,_.shardSplitThresholdBytes,_)){log$b("converting directory to sharded directory");const E=await convertToShardedDirectory(S,g);S.cid=E.cid,S.node=decode$5(await g.get(E.cid,_))}return S}const convertToShardedDirectory=async(n,r)=>{if(n.node.Data==null)throw new InvalidParametersError$1("Invalid parent passed to convertToShardedDirectory");const g=UnixFS$1.unmarshal(n.node.Data),_=await createShard(r,n.node.Links.map(x=>({name:x.Name??"",size:BigInt(x.Tsize??0),cid:x.Hash})),{mode:g.mode,mtime:g.mtime,cidVersion:n.cid.version});return log$b(`converted directory to sharded directory ${_.cid}`),_},addToDirectory=async(n,r,g,_)=>{const x=n.node.Links.filter(A=>{const I=A.Name===r.Name;if(I&&!_.allowOverwriting)throw new AlreadyExistsError;return!I});if(x.push(r),n.node.Data==null)throw new InvalidPBNodeError("Parent node with no data passed to addToDirectory");const S=UnixFS$1.unmarshal(n.node.Data);let E;if(S.mtime!=null){const A=Date.now(),I=Math.floor(A/1e3);S.mtime={secs:BigInt(I),nsecs:(A-I*1e3)*1e3},E=S.marshal()}else E=n.node.Data;n.node=prepare({Data:E,Links:x});const C=encode$5(n.node),T=await sha256$8.digest(C),R=CID$1.create(n.cid.version,code$2,T);return await g.put(R,C),{node:n.node,cid:R}},addToShardedDirectory=async(n,r,g,_)=>{const{path:x,hash:S}=await recreateShardedDirectory(n.cid,r.Name,g,_),E=x[x.length-1];if(E==null)throw new Error("Invalid HAMT, could not generate path");const C=E.prefix,T=parseInt(C,16);log$b("next prefix for %s is %s",r.Name,C);const R=`${C}${r.Name}`,A=E.node.Links.find(I=>(I.Name??"").startsWith(C));if(A!=null)if(log$b("link %s was present in shard",R),A.Name===R){if(!_.allowOverwriting)throw new AlreadyExistsError;log$b("overwriting %s in subshard",r.Name),E.node.Links=E.node.Links.filter(I=>I.Name!==R),E.node.Links.push({Name:R,Hash:r.Hash,Tsize:r.Tsize})}else{if(A.Name?.length===2)throw new Error("Existing link was subshard?!");{log$b("prefix %s already exists, creating new subshard",C);const I=E.node.Links.findIndex(O=>O.Name?.startsWith(C)),B=E.node.Links.splice(I,1)[0],D=(B.Name??"").substring(2),M=wrapHash(hamtHashFn)(fromString(D));for(let O=0;O<x.length;O++)await M.take(hamtBucketBits);for(;;){const O=await M.take(hamtBucketBits),L=toPrefix(O);B.Name=`${L}${D}`;const F=await S.take(hamtBucketBits),U=toPrefix(F);if(L===U){const z=new SparseArray;z.set(F,!0),x.push({prefix:U,children:z,node:{Links:[]}});continue}const j=new SparseArray;j.set(F,!0),j.set(O,!0),x.push({prefix:C,children:j,node:{Links:[B,{Name:`${U}${r.Name}`,Hash:r.Hash,Tsize:r.Tsize}]}});break}}}else log$b("link %s was not present in sub-shard",R),r.Name=R,E.node.Links.push(r),E.children.set(T,!0),log$b("adding %s to existing sub-shard",R);return updateShardedDirectory(x,g,_)};async function cidToDirectory(n,r,g={}){const _=await exporter$1(n,r,g);if(_.type!=="directory")throw new NotADirectoryError(`${n.toString()} was not a UnixFS directory`);return{cid:n,node:_.node}}async function cidToPBLink(n,r,g,_){const x=await exporter$1(n,g,_);if(x.type!=="directory"&&x.type!=="file"&&x.type!=="raw")throw new NotUnixFSError(`${n.toString()} was not a UnixFS node`);return{Name:r,Tsize:x.node instanceof Uint8Array?x.node.byteLength:dagNodeTsize(x.node),Hash:n}}function dagNodeTsize(n){const r=n.Links.reduce((g,_)=>g+(_.Tsize??0),0);return encode$5(n).byteLength+r}const log$a=logger$2("helia:unixfs:components:utils:resolve");async function resolve(n,r,g,_){if(r==null||r==="")return{cid:n};const x=`/ipfs/${n}${r==null?"":`/${r}`}`,S=await all$1(walkPath(x,g,_));if(S.length===0)throw new DoesNotExistError("Could not find path in directory");return log$a("resolved %s to %c",r,n),{cid:S[S.length-1].cid,path:r,segments:S}}async function updatePathCids(n,r,g,_){if(r.segments==null||r.segments.length===0)return n;let x=r.segments.pop();if(x==null)throw new Error("Insufficient segments");x.cid=n,r.segments.reverse();for(const S of r.segments){const[E,C]=await Promise.all([cidToDirectory(S.cid,g,_),cidToPBLink(x.cid,x.name,g,_)]);n=(await addLink(E,C,g,{..._,allowOverwriting:!0,cidVersion:n.version})).cid,S.cid=n,x=S}return n}const mergeOptions$8=mergeOptions$9.bind({ignoreUndefined:!0}),defaultOptions$d={};async function*cat(n,r,g={}){const _=mergeOptions$8(defaultOptions$d,g),x=await resolve(n,_.path,r,_),S=await exporter$1(x.cid,r,_);if(S.type!=="file"&&S.type!=="raw")throw new NotAFileError;if(S.content==null)throw new NoContentError;yield*S.content(_)}const SHARD_SPLIT_THRESHOLD_BYTES=262144,mergeOptions$7=mergeOptions$9.bind({ignoreUndefined:!0}),log$9=logger$2("helia:unixfs:chmod"),defaultOptions$c={recursive:!1,shardSplitThresholdBytes:SHARD_SPLIT_THRESHOLD_BYTES};async function chmod(n,r,g,_={}){const x=mergeOptions$7(defaultOptions$c,_),S=await resolve(n,x.path,g,_);if(log$9("chmod %c %d",S.cid,r),x.recursive){const B=await pipe(async function*(){for await(const D of recursive(S.cid,g,_)){let N,M=[];if(D.type==="raw")N=new UnixFS$1({type:"file",data:D.node});else if(D.type==="file"||D.type==="directory")N=D.unixfs,M=D.node.Links;else throw new NotUnixFSError;N.mode=r;const O={Data:N.marshal(),Links:M};yield{path:D.path,content:O}}},D=>importer$1(D,g,{...x,dagBuilder:async function*(N,M){for await(const O of N)yield async function(){const L=O.content,F=encode$5(L),U=await persist(F,M,{...x,cidVersion:n.version});if(L.Data==null)throw new InvalidPBNodeError(`${U} had no data`);const j=UnixFS$1.unmarshal(L.Data);return{cid:U,size:BigInt(F.length),path:O.path,unixfs:j}}}}),async D=>last(D));if(B==null)throw new UnknownError(`Could not chmod ${S.cid.toString()}`);return updatePathCids(B.cid,S,g,x)}const E=await g.get(S.cid,_);let C,T=[];if(S.cid.code===code$6)C=new UnixFS$1({type:"file",data:E});else{const B=decode$5(E);if(B.Data==null)throw new InvalidPBNodeError(`${S.cid.toString()} had no data`);T=B.Links,C=UnixFS$1.unmarshal(B.Data)}C.mode=r;const R=encode$5({Data:C.marshal(),Links:T}),A=await sha256$8.digest(R),I=CID$1.create(S.cid.version,code$2,A);return await g.put(I,R),updatePathCids(I,S,g,x)}const mergeOptions$6=mergeOptions$9.bind({ignoreUndefined:!0}),log$8=logger$2("helia:unixfs:cp"),defaultOptions$b={force:!1,shardSplitThresholdBytes:SHARD_SPLIT_THRESHOLD_BYTES};async function cp(n,r,g,_,x={}){const S=mergeOptions$6(defaultOptions$b,x);if(g.includes("/"))throw new InvalidParametersError$1("Name must not have slashes");const[E,C]=await Promise.all([cidToDirectory(r,_,S),cidToPBLink(n,g,_,S)]);return log$8('Adding %c as "%s" to %c',n,g,r),(await addLink(E,C,_,{allowOverwriting:S.force,cidVersion:r.version,...S})).cid}const mergeOptions$5=mergeOptions$9.bind({ignoreUndefined:!0}),defaultOptions$a={};async function*ls(n,r,g={}){const _=mergeOptions$5(defaultOptions$a,g),x=await resolve(n,_.path,r,_),S=await exporter$1(x.cid,r);if(S.type==="file"||S.type==="raw"){yield S;return}if(S.content==null)throw new NoContentError;if(S.type!=="directory")throw new NotADirectoryError;yield*S.content({offset:g.offset,length:g.length})}const mergeOptions$4=mergeOptions$9.bind({ignoreUndefined:!0}),log$7=logger$2("helia:unixfs:mkdir"),defaultOptions$9={cidVersion:1,force:!1,shardSplitThresholdBytes:SHARD_SPLIT_THRESHOLD_BYTES};async function mkdir(n,r,g,_={}){const x=mergeOptions$4(defaultOptions$9,_);if(r.includes("/"))throw new InvalidParametersError$1("Path must not have slashes");if((await exporter$1(n,g,_)).type!=="directory")throw new NotADirectoryError(`${n.toString()} was not a UnixFS directory`);log$7("creating %s",r);const C={Data:new UnixFS$1({type:"directory",mode:x.mode,mtime:x.mtime}).marshal(),Links:[]},T=encode$5(C),R=await sha256$8.digest(T),A=CID$1.create(x.cidVersion,code$2,R);await g.put(A,T);const[I,B]=await Promise.all([cidToDirectory(n,g,x),cidToPBLink(A,r,g,x)]);return log$7("adding empty dir called %s to %c",r,n),(await addLink(I,B,g,{...x,allowOverwriting:x.force})).cid}const log$6=logger$2("helia:unixfs:utils:remove-link");async function removeLink(n,r,g,_){if(n.node.Data==null)throw new InvalidPBNodeError("Parent node had no data");if(UnixFS$1.unmarshal(n.node.Data).type==="hamt-sharded-directory"){log$6(`removing ${r} from sharded directory`);const S=await removeFromShardedDirectory(n,r,g,_);return await isOverShardThreshold(S.node,g,_.shardSplitThresholdBytes,_)?S:(log$6("converting shard to flat directory %c",n.cid),convertToFlatDirectory(S,g,_))}return log$6(`removing link ${r} regular directory`),removeFromDirectory(n,r,g,_)}const removeFromDirectory=async(n,r,g,_)=>{n.node.Links=n.node.Links.filter(E=>E.Name!==r);const x=encode$5(n.node),S=await persist(x,g,{..._,cidVersion:n.cid.version});return log$6(`Updated regular directory ${S}`),{node:n.node,cid:S}},removeFromShardedDirectory=async(n,r,g,_)=>{const{path:x}=await recreateShardedDirectory(n.cid,r,g,_),S=x[x.length-1];if(S==null)throw new Error("Invalid HAMT, could not generate path");const E=S.node.Links.filter(R=>(R.Name??"").substring(2)===r).map(R=>R.Name).pop();if(E==null)throw new Error("File not found");const C=E.substring(0,2),T=parseInt(C,16);if(S.node.Links=S.node.Links.filter(R=>R.Name!==E),S.children.unset(T),S.node.Links.length===1)for(;x.length!==1;){const R=x[x.length-1];if(R==null||R.node.Links.length>1)break;x.pop();const A=x[x.length-1];if(A==null)break;const I=R.node.Links[0];A.node.Links=A.node.Links.filter(B=>!(B.Name??"").startsWith(A.prefix)),A.node.Links.push({Hash:I.Hash,Name:`${A.prefix}${(I.Name??"").substring(2)}`,Tsize:I.Tsize})}return updateShardedDirectory(x,g,_)},convertToFlatDirectory=async(n,r,g)=>{if(n.node.Data==null)throw new InvalidParametersError$1("Invalid parent passed to convertToFlatDirectory");const _={Links:[]},x=await exporter$1(n.cid,r);if(x.type!=="directory")throw new Error("Unexpected node type");for await(const T of x.content()){let R=0;T.node instanceof Uint8Array?R=T.node.byteLength:R=encode$5(T.node).length,_.Links.push({Hash:T.cid,Name:T.name,Tsize:R})}const S=UnixFS$1.unmarshal(n.node.Data);_.Data=new UnixFS$1({type:"directory",mode:S.mode,mtime:S.mtime}).marshal();const E=encode$5(prepare(_));return{cid:await persist(E,r,{codec:dagPb,cidVersion:n.cid.version,signal:g.signal}),node:_}},mergeOptions$3=mergeOptions$9.bind({ignoreUndefined:!0}),log$5=logger$2("helia:unixfs:rm"),defaultOptions$8={shardSplitThresholdBytes:SHARD_SPLIT_THRESHOLD_BYTES};async function rm(n,r,g,_={}){const x=mergeOptions$3(defaultOptions$8,_);if(r.includes("/"))throw new InvalidParametersError$1("Name must not have slashes");const S=await cidToDirectory(n,g,x);return log$5("Removing %s from %c",r,n),(await removeLink(S,r,g,{...x,cidVersion:n.version})).cid}const mergeOptions$2=mergeOptions$9.bind({ignoreUndefined:!0}),log$4=logger$2("helia:unixfs:stat"),defaultOptions$7={};async function stat(n,r,g={}){const _=mergeOptions$2(defaultOptions$7,g),x=await resolve(n,g.path,r,_);log$4("stat %c",x.cid);const S=await exporter$1(x.cid,r,_);if(S.type!=="file"&&S.type!=="directory"&&S.type!=="raw")throw new NotUnixFSError;let E=0n,C=0n,T=0n,R=0n,A=0,I,B;const D=S.type;let N;if(S.type==="raw"&&(E=BigInt(S.node.byteLength),C=BigInt(S.node.byteLength),T=BigInt(S.node.byteLength),R=BigInt(S.node.byteLength),A=1),S.type==="directory"&&(E=0n,C=BigInt(S.unixfs.marshal().byteLength),T=0n,R=C,A=1,I=S.unixfs.mode,B=S.unixfs.mtime,N=S.unixfs),S.type==="file"){const M=await inspectDag(x.cid,r,_);E=S.unixfs.fileSize(),C=BigInt((S.node.Data?.byteLength??0)+S.node.Links.reduce((O,L)=>O+(L.Tsize??0),0)),T=BigInt(M.localFileSize),R=BigInt(M.localDagSize),A=M.blocks,I=S.unixfs.mode,B=S.unixfs.mtime,N=S.unixfs}return{cid:x.cid,mode:I,mtime:B,fileSize:E,dagSize:C,localFileSize:T,localDagSize:R,blocks:A,type:D,unixfs:N}}async function inspectDag(n,r,g){const _={localFileSize:0,localDagSize:0,blocks:0};if(await r.has(n,g)){const x=await r.get(n,g);if(_.blocks++,_.localDagSize+=x.byteLength,n.code===code$6)_.localFileSize+=x.byteLength;else if(n.code===code$2){const S=decode$5(x);if(S.Links.length>0)for(const E of S.Links){const C=await inspectDag(E.Hash,r,g);_.localFileSize+=C.localFileSize,_.localDagSize+=C.localDagSize,_.blocks+=C.blocks}else{if(S.Data==null)throw new InvalidPBNodeError(`PBNode ${n.toString()} had no data`);const E=UnixFS$1.unmarshal(S.Data);if(E.data==null)throw new InvalidPBNodeError(`UnixFS node ${n.toString()} had no data`);_.localFileSize+=E.data.byteLength??0}}else throw new UnknownError(`${n.toString()} was neither DAG_PB nor RAW`)}return _}const mergeOptions$1=mergeOptions$9.bind({ignoreUndefined:!0}),log$3=logger$2("helia:unixfs:touch"),defaultOptions$6={recursive:!1,shardSplitThresholdBytes:SHARD_SPLIT_THRESHOLD_BYTES};async function touch(n,r,g={}){const _=mergeOptions$1(defaultOptions$6,g),x=await resolve(n,_.path,r,_),S=_.mtime??{secs:BigInt(Math.round(Date.now()/1e3)),nsecs:0};if(log$3("touch %c %o",x.cid,S),_.recursive){const B=await pipe(async function*(){for await(const D of recursive(x.cid,r)){let N,M;if(D.type==="raw")N=new UnixFS$1({data:D.node}),M=[];else if(D.type==="file"||D.type==="directory")N=D.unixfs,M=D.node.Links;else throw new NotUnixFSError;N.mtime=S;const O={Data:N.marshal(),Links:M};yield{path:D.path,content:O}}},D=>importer$1(D,r,{..._,dagBuilder:async function*(N,M){for await(const O of N)yield async function(){const L=O.content,F=encode$5(L),U=await persist(F,M,{..._,cidVersion:n.version});if(L.Data==null)throw new InvalidPBNodeError(`${U} had no data`);const j=UnixFS$1.unmarshal(L.Data);return{cid:U,size:BigInt(F.length),path:O.path,unixfs:j}}}}),async D=>last(D));if(B==null)throw new UnknownError(`Could not chmod ${x.cid.toString()}`);return updatePathCids(B.cid,x,r,_)}const E=await r.get(x.cid,g);let C,T=[];if(x.cid.code===code$6)C=new UnixFS$1({data:E});else{const B=decode$5(E);if(T=B.Links,B.Data==null)throw new InvalidPBNodeError(`${x.cid.toString()} had no data`);C=UnixFS$1.unmarshal(B.Data)}C.mtime=S;const R=encode$5({Data:C.marshal(),Links:T}),A=await sha256$8.digest(R),I=CID$1.create(x.cid.version,code$2,A);return await r.put(I,R),updatePathCids(I,x,r,_)}class UnixFS{components;constructor(r){this.components=r}async*addAll(r,g={}){yield*addAll(r,this.components.blockstore,g)}async addBytes(r,g={}){return addBytes(r,this.components.blockstore,g)}async addByteStream(r,g={}){return addByteStream(r,this.components.blockstore,g)}async addFile(r,g={}){return addFile(r,this.components.blockstore,g)}async addDirectory(r={},g={}){return addDirectory(r,this.components.blockstore,g)}async*cat(r,g={}){yield*cat(r,this.components.blockstore,g)}async chmod(r,g,_={}){return chmod(r,g,this.components.blockstore,_)}async cp(r,g,_,x={}){return cp(r,g,_,this.components.blockstore,x)}async*ls(r,g={}){yield*ls(r,this.components.blockstore,g)}async mkdir(r,g,_={}){return mkdir(r,g,this.components.blockstore,_)}async rm(r,g,_={}){return rm(r,g,this.components.blockstore,_)}async stat(r,g={}){return stat(r,this.components.blockstore,g)}async touch(r,g={}){return touch(r,this.components.blockstore,g)}}function unixfs(n){return new UnixFS(n)}var isArguments$2,hasRequiredIsArguments$1;function requireIsArguments$1(){if(hasRequiredIsArguments$1)return isArguments$2;hasRequiredIsArguments$1=1;var n=Object.prototype.toString;return isArguments$2=function(g){var _=n.call(g),x=_==="[object Arguments]";return x||(x=_!=="[object Array]"&&g!==null&&typeof g=="object"&&typeof g.length=="number"&&g.length>=0&&n.call(g.callee)==="[object Function]"),x},isArguments$2}var implementation$5,hasRequiredImplementation$4;function requireImplementation$4(){if(hasRequiredImplementation$4)return implementation$5;hasRequiredImplementation$4=1;var n;if(!Object.keys){var r=Object.prototype.hasOwnProperty,g=Object.prototype.toString,_=requireIsArguments$1(),x=Object.prototype.propertyIsEnumerable,S=!x.call({toString:null},"toString"),E=x.call(function(){},"prototype"),C=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],T=function(B){var D=B.constructor;return D&&D.prototype===B},R={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},A=function(){if(typeof window>"u")return!1;for(var B in window)try{if(!R["$"+B]&&r.call(window,B)&&window[B]!==null&&typeof window[B]=="object")try{T(window[B])}catch{return!0}}catch{return!0}return!1}(),I=function(B){if(typeof window>"u"||!A)return T(B);try{return T(B)}catch{return!1}};n=function(D){var N=D!==null&&typeof D=="object",M=g.call(D)==="[object Function]",O=_(D),L=N&&g.call(D)==="[object String]",F=[];if(!N&&!M&&!O)throw new TypeError("Object.keys called on a non-object");var U=E&&M;if(L&&D.length>0&&!r.call(D,0))for(var j=0;j<D.length;++j)F.push(String(j));if(O&&D.length>0)for(var z=0;z<D.length;++z)F.push(String(z));else for(var W in D)!(U&&W==="prototype")&&r.call(D,W)&&F.push(String(W));if(S)for(var X=I(D),ie=0;ie<C.length;++ie)!(X&&C[ie]==="constructor")&&r.call(D,C[ie])&&F.push(C[ie]);return F}}return implementation$5=n,implementation$5}var objectKeys,hasRequiredObjectKeys;function requireObjectKeys(){if(hasRequiredObjectKeys)return objectKeys;hasRequiredObjectKeys=1;var n=Array.prototype.slice,r=requireIsArguments$1(),g=Object.keys,_=g?function(E){return g(E)}:requireImplementation$4(),x=Object.keys;return _.shim=function(){if(Object.keys){var E=function(){var C=Object.keys(arguments);return C&&C.length===arguments.length}(1,2);E||(Object.keys=function(T){return r(T)?x(n.call(T)):x(T)})}else Object.keys=_;return Object.keys||_},objectKeys=_,objectKeys}var esErrors,hasRequiredEsErrors;function requireEsErrors(){return hasRequiredEsErrors||(hasRequiredEsErrors=1,esErrors=Error),esErrors}var _eval,hasRequired_eval;function require_eval(){return hasRequired_eval||(hasRequired_eval=1,_eval=EvalError),_eval}var range$2,hasRequiredRange$1;function requireRange$1(){return hasRequiredRange$1||(hasRequiredRange$1=1,range$2=RangeError),range$2}var ref,hasRequiredRef;function requireRef(){return hasRequiredRef||(hasRequiredRef=1,ref=ReferenceError),ref}var syntax,hasRequiredSyntax;function requireSyntax(){return hasRequiredSyntax||(hasRequiredSyntax=1,syntax=SyntaxError),syntax}var type,hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,type=TypeError),type}var uri,hasRequiredUri;function requireUri(){return hasRequiredUri||(hasRequiredUri=1,uri=URIError),uri}var shams$1,hasRequiredShams$1;function requireShams$1(){return hasRequiredShams$1||(hasRequiredShams$1=1,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var r={},g=Symbol("test"),_=Object(g);if(typeof g=="string"||Object.prototype.toString.call(g)!=="[object Symbol]"||Object.prototype.toString.call(_)!=="[object Symbol]")return!1;var x=42;r[g]=x;for(g in r)return!1;if(typeof Object.keys=="function"&&Object.keys(r).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(r).length!==0)return!1;var S=Object.getOwnPropertySymbols(r);if(S.length!==1||S[0]!==g||!Object.prototype.propertyIsEnumerable.call(r,g))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var E=Object.getOwnPropertyDescriptor(r,g);if(E.value!==x||E.enumerable!==!0)return!1}return!0}),shams$1}var hasSymbols,hasRequiredHasSymbols;function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var n=typeof Symbol<"u"&&Symbol,r=requireShams$1();return hasSymbols=function(){return typeof n!="function"||typeof Symbol!="function"||typeof n("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:r()},hasSymbols}var hasProto,hasRequiredHasProto;function requireHasProto(){if(hasRequiredHasProto)return hasProto;hasRequiredHasProto=1;var n={__proto__:null,foo:{}},r=Object;return hasProto=function(){return{__proto__:n}.foo===n.foo&&!(n instanceof r)},hasProto}var implementation$4,hasRequiredImplementation$3;function requireImplementation$3(){if(hasRequiredImplementation$3)return implementation$4;hasRequiredImplementation$3=1;var n="Function.prototype.bind called on incompatible ",r=Object.prototype.toString,g=Math.max,_="[object Function]",x=function(T,R){for(var A=[],I=0;I<T.length;I+=1)A[I]=T[I];for(var B=0;B<R.length;B+=1)A[B+T.length]=R[B];return A},S=function(T,R){for(var A=[],I=R,B=0;I<T.length;I+=1,B+=1)A[B]=T[I];return A},E=function(C,T){for(var R="",A=0;A<C.length;A+=1)R+=C[A],A+1<C.length&&(R+=T);return R};return implementation$4=function(T){var R=this;if(typeof R!="function"||r.apply(R)!==_)throw new TypeError(n+R);for(var A=S(arguments,1),I,B=function(){if(this instanceof I){var L=R.apply(this,x(A,arguments));return Object(L)===L?L:this}return R.apply(T,x(A,arguments))},D=g(0,R.length-A.length),N=[],M=0;M<D;M++)N[M]="$"+M;if(I=Function("binder","return function ("+E(N,",")+"){ return binder.apply(this,arguments); }")(B),R.prototype){var O=function(){};O.prototype=R.prototype,I.prototype=new O,O.prototype=null}return I},implementation$4}var functionBind,hasRequiredFunctionBind;function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var n=requireImplementation$3();return functionBind=Function.prototype.bind||n,functionBind}var hasown,hasRequiredHasown;function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var n=Function.prototype.call,r=Object.prototype.hasOwnProperty,g=requireFunctionBind();return hasown=g.call(n,r),hasown}var getIntrinsic,hasRequiredGetIntrinsic;function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;hasRequiredGetIntrinsic=1;var n,r=requireEsErrors(),g=require_eval(),_=requireRange$1(),x=requireRef(),S=requireSyntax(),E=requireType(),C=requireUri(),T=Function,R=function(Z){try{return T('"use strict"; return ('+Z+").constructor;")()}catch{}},A=Object.getOwnPropertyDescriptor;if(A)try{A({},"")}catch{A=null}var I=function(){throw new E},B=A?function(){try{return arguments.callee,I}catch{try{return A(arguments,"callee").get}catch{return I}}}():I,D=requireHasSymbols()(),N=requireHasProto()(),M=Object.getPrototypeOf||(N?function(Z){return Z.__proto__}:null),O={},L=typeof Uint8Array>"u"||!M?n:M(Uint8Array),F={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?n:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?n:ArrayBuffer,"%ArrayIteratorPrototype%":D&&M?M([][Symbol.iterator]()):n,"%AsyncFromSyncIteratorPrototype%":n,"%AsyncFunction%":O,"%AsyncGenerator%":O,"%AsyncGeneratorFunction%":O,"%AsyncIteratorPrototype%":O,"%Atomics%":typeof Atomics>"u"?n:Atomics,"%BigInt%":typeof BigInt>"u"?n:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?n:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?n:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?n:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":g,"%Float32Array%":typeof Float32Array>"u"?n:Float32Array,"%Float64Array%":typeof Float64Array>"u"?n:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?n:FinalizationRegistry,"%Function%":T,"%GeneratorFunction%":O,"%Int8Array%":typeof Int8Array>"u"?n:Int8Array,"%Int16Array%":typeof Int16Array>"u"?n:Int16Array,"%Int32Array%":typeof Int32Array>"u"?n:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":D&&M?M(M([][Symbol.iterator]())):n,"%JSON%":typeof JSON=="object"?JSON:n,"%Map%":typeof Map>"u"?n:Map,"%MapIteratorPrototype%":typeof Map>"u"||!D||!M?n:M(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?n:Promise,"%Proxy%":typeof Proxy>"u"?n:Proxy,"%RangeError%":_,"%ReferenceError%":x,"%Reflect%":typeof Reflect>"u"?n:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?n:Set,"%SetIteratorPrototype%":typeof Set>"u"||!D||!M?n:M(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?n:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":D&&M?M(""[Symbol.iterator]()):n,"%Symbol%":D?Symbol:n,"%SyntaxError%":S,"%ThrowTypeError%":B,"%TypedArray%":L,"%TypeError%":E,"%Uint8Array%":typeof Uint8Array>"u"?n:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?n:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?n:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?n:Uint32Array,"%URIError%":C,"%WeakMap%":typeof WeakMap>"u"?n:WeakMap,"%WeakRef%":typeof WeakRef>"u"?n:WeakRef,"%WeakSet%":typeof WeakSet>"u"?n:WeakSet};if(M)try{null.error}catch(Z){var U=M(M(Z));F["%Error.prototype%"]=U}var j=function Z(ce){var ue;if(ce==="%AsyncFunction%")ue=R("async function () {}");else if(ce==="%GeneratorFunction%")ue=R("function* () {}");else if(ce==="%AsyncGeneratorFunction%")ue=R("async function* () {}");else if(ce==="%AsyncGenerator%"){var se=Z("%AsyncGeneratorFunction%");se&&(ue=se.prototype)}else if(ce==="%AsyncIteratorPrototype%"){var te=Z("%AsyncGenerator%");te&&M&&(ue=M(te.prototype))}return F[ce]=ue,ue},z={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},W=requireFunctionBind(),X=requireHasown(),ie=W.call(Function.call,Array.prototype.concat),fe=W.call(Function.apply,Array.prototype.splice),xe=W.call(Function.call,String.prototype.replace),we=W.call(Function.call,String.prototype.slice),G=W.call(Function.call,RegExp.prototype.exec),J=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,H=function(ce){var ue=we(ce,0,1),se=we(ce,-1);if(ue==="%"&&se!=="%")throw new S("invalid intrinsic syntax, expected closing `%`");if(se==="%"&&ue!=="%")throw new S("invalid intrinsic syntax, expected opening `%`");var te=[];return xe(ce,J,function(Y,be,ye,Ie){te[te.length]=ye?xe(Ie,q,"$1"):be||Y}),te},ve=function(ce,ue){var se=ce,te;if(X(z,se)&&(te=z[se],se="%"+te[0]+"%"),X(F,se)){var Y=F[se];if(Y===O&&(Y=j(se)),typeof Y>"u"&&!ue)throw new E("intrinsic "+ce+" exists, but is not available. Please file an issue!");return{alias:te,name:se,value:Y}}throw new S("intrinsic "+ce+" does not exist!")};return getIntrinsic=function(ce,ue){if(typeof ce!="string"||ce.length===0)throw new E("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof ue!="boolean")throw new E('"allowMissing" argument must be a boolean');if(G(/^%?[^%]*%?$/,ce)===null)throw new S("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var se=H(ce),te=se.length>0?se[0]:"",Y=ve("%"+te+"%",ue),be=Y.name,ye=Y.value,Ie=!1,ke=Y.alias;ke&&(te=ke[0],fe(se,ie([0,1],ke)));for(var Ce=1,Ae=!0;Ce<se.length;Ce+=1){var Ne=se[Ce],We=we(Ne,0,1),Be=we(Ne,-1);if((We==='"'||We==="'"||We==="`"||Be==='"'||Be==="'"||Be==="`")&&We!==Be)throw new S("property names with quotes must have matching quotes");if((Ne==="constructor"||!Ae)&&(Ie=!0),te+="."+Ne,be="%"+te+"%",X(F,be))ye=F[be];else if(ye!=null){if(!(Ne in ye)){if(!ue)throw new E("base intrinsic for "+ce+" exists, but the property is not available.");return}if(A&&Ce+1>=se.length){var Se=A(ye,Ne);Ae=!!Se,Ae&&"get"in Se&&!("originalValue"in Se.get)?ye=Se.get:ye=ye[Ne]}else Ae=X(ye,Ne),ye=ye[Ne];Ae&&!Ie&&(F[be]=ye)}}return ye},getIntrinsic}var esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var n=requireGetIntrinsic(),r=n("%Object.defineProperty%",!0)||!1;if(r)try{r({},"a",{value:1})}catch{r=!1}return esDefineProperty=r,esDefineProperty}var gopd,hasRequiredGopd;function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var n=requireGetIntrinsic(),r=n("%Object.getOwnPropertyDescriptor%",!0);if(r)try{r([],"length")}catch{r=null}return gopd=r,gopd}var defineDataProperty,hasRequiredDefineDataProperty;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var n=requireEsDefineProperty(),r=requireSyntax(),g=requireType(),_=requireGopd();return defineDataProperty=function(S,E,C){if(!S||typeof S!="object"&&typeof S!="function")throw new g("`obj` must be an object or a function`");if(typeof E!="string"&&typeof E!="symbol")throw new g("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new g("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new g("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new g("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new g("`loose`, if provided, must be a boolean");var T=arguments.length>3?arguments[3]:null,R=arguments.length>4?arguments[4]:null,A=arguments.length>5?arguments[5]:null,I=arguments.length>6?arguments[6]:!1,B=!!_&&_(S,E);if(n)n(S,E,{configurable:A===null&&B?B.configurable:!A,enumerable:T===null&&B?B.enumerable:!T,value:C,writable:R===null&&B?B.writable:!R});else if(I||!T&&!R&&!A)S[E]=C;else throw new r("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},defineDataProperty}var hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors;function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var n=requireEsDefineProperty(),r=function(){return!!n};return r.hasArrayLengthDefineBug=function(){if(!n)return null;try{return n([],"length",{value:1}).length!==1}catch{return!0}},hasPropertyDescriptors_1=r,hasPropertyDescriptors_1}var defineProperties_1,hasRequiredDefineProperties;function requireDefineProperties(){if(hasRequiredDefineProperties)return defineProperties_1;hasRequiredDefineProperties=1;var n=requireObjectKeys(),r=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",g=Object.prototype.toString,_=Array.prototype.concat,x=requireDefineDataProperty(),S=function(R){return typeof R=="function"&&g.call(R)==="[object Function]"},E=requireHasPropertyDescriptors()(),C=function(R,A,I,B){if(A in R){if(B===!0){if(R[A]===I)return}else if(!S(B)||!B())return}E?x(R,A,I,!0):x(R,A,I)},T=function(R,A){var I=arguments.length>2?arguments[2]:{},B=n(A);r&&(B=_.call(B,Object.getOwnPropertySymbols(A)));for(var D=0;D<B.length;D+=1)C(R,B[D],A[B[D]],I[B[D]])};return T.supportsDescriptors=!!E,defineProperties_1=T,defineProperties_1}var callBind={exports:{}},setFunctionLength,hasRequiredSetFunctionLength;function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var n=requireGetIntrinsic(),r=requireDefineDataProperty(),g=requireHasPropertyDescriptors()(),_=requireGopd(),x=requireType(),S=n("%Math.floor%");return setFunctionLength=function(C,T){if(typeof C!="function")throw new x("`fn` is not a function");if(typeof T!="number"||T<0||T>4294967295||S(T)!==T)throw new x("`length` must be a positive 32-bit integer");var R=arguments.length>2&&!!arguments[2],A=!0,I=!0;if("length"in C&&_){var B=_(C,"length");B&&!B.configurable&&(A=!1),B&&!B.writable&&(I=!1)}return(A||I||!R)&&(g?r(C,"length",T,!0,!0):r(C,"length",T)),C},setFunctionLength}var hasRequiredCallBind;function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,function(n){var r=requireFunctionBind(),g=requireGetIntrinsic(),_=requireSetFunctionLength(),x=requireType(),S=g("%Function.prototype.apply%"),E=g("%Function.prototype.call%"),C=g("%Reflect.apply%",!0)||r.call(E,S),T=requireEsDefineProperty(),R=g("%Math.max%");n.exports=function(B){if(typeof B!="function")throw new x("a function is required");var D=C(r,E,arguments);return _(D,1+R(0,B.length-(arguments.length-1)),!0)};var A=function(){return C(r,S,arguments)};T?T(n.exports,"apply",{value:A}):n.exports.apply=A}(callBind)),callBind.exports}var callBound,hasRequiredCallBound;function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var n=requireGetIntrinsic(),r=requireCallBind(),g=r(n("String.prototype.indexOf"));return callBound=function(x,S){var E=n(x,!!S);return typeof E=="function"&&g(x,".prototype.")>-1?r(E):E},callBound}var implementation$3,hasRequiredImplementation$2;function requireImplementation$2(){if(hasRequiredImplementation$2)return implementation$3;hasRequiredImplementation$2=1;var n=requireObjectKeys(),r=requireShams$1()(),g=requireCallBound(),_=Object,x=g("Array.prototype.push"),S=g("Object.prototype.propertyIsEnumerable"),E=r?Object.getOwnPropertySymbols:null;return implementation$3=function(T,R){if(T==null)throw new TypeError("target must be an object");var A=_(T);if(arguments.length===1)return A;for(var I=1;I<arguments.length;++I){var B=_(arguments[I]),D=n(B),N=r&&(Object.getOwnPropertySymbols||E);if(N)for(var M=N(B),O=0;O<M.length;++O){var L=M[O];S(B,L)&&x(D,L)}for(var F=0;F<D.length;++F){var U=D[F];if(S(B,U)){var j=B[U];A[U]=j}}}return A},implementation$3}var polyfill$2,hasRequiredPolyfill$2;function requirePolyfill$2(){if(hasRequiredPolyfill$2)return polyfill$2;hasRequiredPolyfill$2=1;var n=requireImplementation$2(),r=function(){if(!Object.assign)return!1;for(var _="abcdefghijklmnopqrst",x=_.split(""),S={},E=0;E<x.length;++E)S[x[E]]=x[E];var C=Object.assign({},S),T="";for(var R in C)T+=R;return _!==T},g=function(){if(!Object.assign||!Object.preventExtensions)return!1;var _=Object.preventExtensions({1:2});try{Object.assign(_,"xy")}catch{return _[1]==="y"}return!1};return polyfill$2=function(){return!Object.assign||r()||g()?n:Object.assign},polyfill$2}var shim$2,hasRequiredShim$2;function requireShim$2(){if(hasRequiredShim$2)return shim$2;hasRequiredShim$2=1;var n=requireDefineProperties(),r=requirePolyfill$2();return shim$2=function(){var _=r();return n(Object,{assign:_},{assign:function(){return Object.assign!==_}}),_},shim$2}var object_assign,hasRequiredObject_assign;function requireObject_assign(){if(hasRequiredObject_assign)return object_assign;hasRequiredObject_assign=1;var n=requireDefineProperties(),r=requireCallBind(),g=requireImplementation$2(),_=requirePolyfill$2(),x=requireShim$2(),S=r.apply(_()),E=function(T,R){return S(Object,arguments)};return n(E,{getPolyfill:_,implementation:g,shim:x}),object_assign=E,object_assign}var functionsHaveNames_1,hasRequiredFunctionsHaveNames;function requireFunctionsHaveNames(){if(hasRequiredFunctionsHaveNames)return functionsHaveNames_1;hasRequiredFunctionsHaveNames=1;var n=function(){return typeof function(){}.name=="string"},r=Object.getOwnPropertyDescriptor;if(r)try{r([],"length")}catch{r=null}n.functionsHaveConfigurableNames=function(){if(!n()||!r)return!1;var x=r(function(){},"name");return!!x&&!!x.configurable};var g=Function.prototype.bind;return n.boundFunctionsHaveNames=function(){return n()&&typeof g=="function"&&function(){}.bind().name!==""},functionsHaveNames_1=n,functionsHaveNames_1}var setFunctionName,hasRequiredSetFunctionName;function requireSetFunctionName(){if(hasRequiredSetFunctionName)return setFunctionName;hasRequiredSetFunctionName=1;var n=requireDefineDataProperty(),r=requireHasPropertyDescriptors()(),g=requireFunctionsHaveNames().functionsHaveConfigurableNames(),_=requireType();return setFunctionName=function(S,E){if(typeof S!="function")throw new _("`fn` is not a function");var C=arguments.length>2&&!!arguments[2];return(!C||g)&&(r?n(S,"name",E,!0,!0):n(S,"name",E)),S},setFunctionName}var implementation$2,hasRequiredImplementation$1;function requireImplementation$1(){if(hasRequiredImplementation$1)return implementation$2;hasRequiredImplementation$1=1;var n=requireSetFunctionName(),r=requireType(),g=Object;return implementation$2=n(function(){if(this==null||this!==g(this))throw new r("RegExp.prototype.flags getter called on non-object");var x="";return this.hasIndices&&(x+="d"),this.global&&(x+="g"),this.ignoreCase&&(x+="i"),this.multiline&&(x+="m"),this.dotAll&&(x+="s"),this.unicode&&(x+="u"),this.unicodeSets&&(x+="v"),this.sticky&&(x+="y"),x},"get flags",!0),implementation$2}var polyfill$1,hasRequiredPolyfill$1;function requirePolyfill$1(){if(hasRequiredPolyfill$1)return polyfill$1;hasRequiredPolyfill$1=1;var n=requireImplementation$1(),r=requireDefineProperties().supportsDescriptors,g=Object.getOwnPropertyDescriptor;return polyfill$1=function(){if(r&&/a/mig.flags==="gim"){var x=g(RegExp.prototype,"flags");if(x&&typeof x.get=="function"&&"dotAll"in RegExp.prototype&&"hasIndices"in RegExp.prototype){var S="",E={};if(Object.defineProperty(E,"hasIndices",{get:function(){S+="d"}}),Object.defineProperty(E,"sticky",{get:function(){S+="y"}}),x.get.call(E),S==="dy")return x.get}}return n},polyfill$1}var shim$1,hasRequiredShim$1;function requireShim$1(){if(hasRequiredShim$1)return shim$1;hasRequiredShim$1=1;var n=requireDefineProperties().supportsDescriptors,r=requirePolyfill$1(),g=Object.getOwnPropertyDescriptor,_=Object.defineProperty,x=TypeError,S=Object.getPrototypeOf,E=/a/;return shim$1=function(){if(!n||!S)throw new x("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var T=r(),R=S(E),A=g(R,"flags");return(!A||A.get!==T)&&_(R,"flags",{configurable:!0,enumerable:!1,get:T}),T},shim$1}var regexp_prototype_flags,hasRequiredRegexp_prototype_flags;function requireRegexp_prototype_flags(){if(hasRequiredRegexp_prototype_flags)return regexp_prototype_flags;hasRequiredRegexp_prototype_flags=1;var n=requireDefineProperties(),r=requireCallBind(),g=requireImplementation$1(),_=requirePolyfill$1(),x=requireShim$1(),S=r(_());return n(S,{getPolyfill:_,implementation:g,shim:x}),regexp_prototype_flags=S,regexp_prototype_flags}var esGetIterator={exports:{}},shams,hasRequiredShams;function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var n=requireShams$1();return shams=function(){return n()&&!!Symbol.toStringTag},shams}var isArguments$1,hasRequiredIsArguments;function requireIsArguments(){if(hasRequiredIsArguments)return isArguments$1;hasRequiredIsArguments=1;var n=requireShams()(),r=requireCallBound(),g=r("Object.prototype.toString"),_=function(C){return n&&C&&typeof C=="object"&&Symbol.toStringTag in C?!1:g(C)==="[object Arguments]"},x=function(C){return _(C)?!0:C!==null&&typeof C=="object"&&typeof C.length=="number"&&C.length>=0&&g(C)!=="[object Array]"&&g(C.callee)==="[object Function]"},S=function(){return _(arguments)}();return _.isLegacyArguments=x,isArguments$1=S?_:x,isArguments$1}const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(__viteBrowserExternal$1);var objectInspect,hasRequiredObjectInspect;function requireObjectInspect(){if(hasRequiredObjectInspect)return objectInspect;hasRequiredObjectInspect=1;var n=typeof Map=="function"&&Map.prototype,r=Object.getOwnPropertyDescriptor&&n?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,g=n&&r&&typeof r.get=="function"?r.get:null,_=n&&Map.prototype.forEach,x=typeof Set=="function"&&Set.prototype,S=Object.getOwnPropertyDescriptor&&x?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,E=x&&S&&typeof S.get=="function"?S.get:null,C=x&&Set.prototype.forEach,T=typeof WeakMap=="function"&&WeakMap.prototype,R=T?WeakMap.prototype.has:null,A=typeof WeakSet=="function"&&WeakSet.prototype,I=A?WeakSet.prototype.has:null,B=typeof WeakRef=="function"&&WeakRef.prototype,D=B?WeakRef.prototype.deref:null,N=Boolean.prototype.valueOf,M=Object.prototype.toString,O=Function.prototype.toString,L=String.prototype.match,F=String.prototype.slice,U=String.prototype.replace,j=String.prototype.toUpperCase,z=String.prototype.toLowerCase,W=RegExp.prototype.test,X=Array.prototype.concat,ie=Array.prototype.join,fe=Array.prototype.slice,xe=Math.floor,we=typeof BigInt=="function"?BigInt.prototype.valueOf:null,G=Object.getOwnPropertySymbols,J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,q=typeof Symbol=="function"&&typeof Symbol.iterator=="object",H=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===q||!0)?Symbol.toStringTag:null,ve=Object.prototype.propertyIsEnumerable,Z=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(ft){return ft.__proto__}:null);function ce(ft,ht){if(ft===1/0||ft===-1/0||ft!==ft||ft&&ft>-1e3&&ft<1e3||W.call(/e/,ht))return ht;var zt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof ft=="number"){var Kt=ft<0?-xe(-ft):xe(ft);if(Kt!==ft){var Ft=String(Kt),Jt=F.call(ht,Ft.length+1);return U.call(Ft,zt,"$&_")+"."+U.call(U.call(Jt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return U.call(ht,zt,"$&_")}var ue=require$$0$2,se=ue.custom,te=$e(se)?se:null,Y={__proto__:null,double:'"',single:"'"},be={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};objectInspect=function ft(ht,zt,Kt,Ft){var Jt=zt||{};if(Ke(Jt,"quoteStyle")&&!Ke(Y,Jt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Ke(Jt,"maxStringLength")&&(typeof Jt.maxStringLength=="number"?Jt.maxStringLength<0&&Jt.maxStringLength!==1/0:Jt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var jt=Ke(Jt,"customInspect")?Jt.customInspect:!0;if(typeof jt!="boolean"&&jt!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Ke(Jt,"indent")&&Jt.indent!==null&&Jt.indent!=="	"&&!(parseInt(Jt.indent,10)===Jt.indent&&Jt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Ke(Jt,"numericSeparator")&&typeof Jt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var rr=Jt.numericSeparator;if(typeof ht>"u")return"undefined";if(ht===null)return"null";if(typeof ht=="boolean")return ht?"true":"false";if(typeof ht=="string")return Et(ht,Jt);if(typeof ht=="number"){if(ht===0)return 1/0/ht>0?"0":"-0";var ir=String(ht);return rr?ce(ht,ir):ir}if(typeof ht=="bigint"){var cr=String(ht)+"n";return rr?ce(ht,cr):cr}var sr=typeof Jt.depth>"u"?5:Jt.depth;if(typeof Kt>"u"&&(Kt=0),Kt>=sr&&sr>0&&typeof ht=="object")return ke(ht)?"[Array]":"[Object]";var yr=Ve(Jt,Kt);if(typeof Ft>"u")Ft=[];else if(ze(Ft,ht)>=0)return"[Circular]";function ur(It,Nt,Dt){if(Nt&&(Ft=fe.call(Ft),Ft.push(Nt)),Dt){var Ht={depth:Jt.depth};return Ke(Jt,"quoteStyle")&&(Ht.quoteStyle=Jt.quoteStyle),ft(It,Ht,Kt+1,Ft)}return ft(It,Jt,Kt+1,Ft)}if(typeof ht=="function"&&!Ae(ht)){var Ye=Le(ht),Fe=_t(ht,ur);return"[Function"+(Ye?": "+Ye:" (anonymous)")+"]"+(Fe.length>0?" { "+ie.call(Fe,", ")+" }":"")}if($e(ht)){var qe=q?U.call(String(ht),/^(Symbol\(.*\))_[^)]*$/,"$1"):J.call(ht);return typeof ht=="object"&&!q?$t(qe):qe}if(xt(ht)){for(var pt="<"+z.call(String(ht.nodeName)),St=ht.attributes||[],Tt=0;Tt<St.length;Tt++)pt+=" "+St[Tt].name+"="+ye(Ie(St[Tt].value),"double",Jt);return pt+=">",ht.childNodes&&ht.childNodes.length&&(pt+="..."),pt+="</"+z.call(String(ht.nodeName))+">",pt}if(ke(ht)){if(ht.length===0)return"[]";var At=_t(ht,ur);return yr&&!De(At)?"["+Ze(At,yr)+"]":"[ "+ie.call(At,", ")+" ]"}if(Ne(ht)){var ar=_t(ht,ur);return!("cause"in Error.prototype)&&"cause"in ht&&!ve.call(ht,"cause")?"{ ["+String(ht)+"] "+ie.call(X.call("[cause]: "+ur(ht.cause),ar),", ")+" }":ar.length===0?"["+String(ht)+"]":"{ ["+String(ht)+"] "+ie.call(ar,", ")+" }"}if(typeof ht=="object"&&jt){if(te&&typeof ht[te]=="function"&&ue)return ue(ht,{depth:sr-Kt});if(jt!=="symbol"&&typeof ht.inspect=="function")return ht.inspect()}if(Je(ht)){var Xe=[];return _&&_.call(ht,function(It,Nt){Xe.push(ur(Nt,ht,!0)+" => "+ur(It,ht))}),Ge("Map",g.call(ht),Xe,yr)}if(wt(ht)){var nt=[];return C&&C.call(ht,function(It){nt.push(ur(It,ht))}),Ge("Set",E.call(ht),nt,yr)}if(Qe(ht))return qt("WeakMap");if(bt(ht))return qt("WeakSet");if(rt(ht))return qt("WeakRef");if(Be(ht))return $t(ur(Number(ht)));if(_e(ht))return $t(ur(we.call(ht)));if(Se(ht))return $t(N.call(ht));if(We(ht))return $t(ur(String(ht)));if(typeof window<"u"&&ht===window)return"{ [object Window] }";if(typeof globalThis<"u"&&ht===globalThis||typeof commonjsGlobal<"u"&&ht===commonjsGlobal)return"{ [object globalThis] }";if(!Ce(ht)&&!Ae(ht)){var ot=_t(ht,ur),et=Z?Z(ht)===Object.prototype:ht instanceof Object||ht.constructor===Object,mt=ht instanceof Object?"":"null prototype",vt=!et&&H&&Object(ht)===ht&&H in ht?F.call(Me(ht),8,-1):mt?"Object":"",Ct=et||typeof ht.constructor!="function"?"":ht.constructor.name?ht.constructor.name+" ":"",Pt=Ct+(vt||mt?"["+ie.call(X.call([],vt||[],mt||[]),": ")+"] ":"");return ot.length===0?Pt+"{}":yr?Pt+"{"+Ze(ot,yr)+"}":Pt+"{ "+ie.call(ot,", ")+" }"}return String(ht)};function ye(ft,ht,zt){var Kt=zt.quoteStyle||ht,Ft=Y[Kt];return Ft+ft+Ft}function Ie(ft){return U.call(String(ft),/"/g,"&quot;")}function ke(ft){return Me(ft)==="[object Array]"&&(!H||!(typeof ft=="object"&&H in ft))}function Ce(ft){return Me(ft)==="[object Date]"&&(!H||!(typeof ft=="object"&&H in ft))}function Ae(ft){return Me(ft)==="[object RegExp]"&&(!H||!(typeof ft=="object"&&H in ft))}function Ne(ft){return Me(ft)==="[object Error]"&&(!H||!(typeof ft=="object"&&H in ft))}function We(ft){return Me(ft)==="[object String]"&&(!H||!(typeof ft=="object"&&H in ft))}function Be(ft){return Me(ft)==="[object Number]"&&(!H||!(typeof ft=="object"&&H in ft))}function Se(ft){return Me(ft)==="[object Boolean]"&&(!H||!(typeof ft=="object"&&H in ft))}function $e(ft){if(q)return ft&&typeof ft=="object"&&ft instanceof Symbol;if(typeof ft=="symbol")return!0;if(!ft||typeof ft!="object"||!J)return!1;try{return J.call(ft),!0}catch{}return!1}function _e(ft){if(!ft||typeof ft!="object"||!we)return!1;try{return we.call(ft),!0}catch{}return!1}var Oe=Object.prototype.hasOwnProperty||function(ft){return ft in this};function Ke(ft,ht){return Oe.call(ft,ht)}function Me(ft){return M.call(ft)}function Le(ft){if(ft.name)return ft.name;var ht=L.call(O.call(ft),/^function\s*([\w$]+)/);return ht?ht[1]:null}function ze(ft,ht){if(ft.indexOf)return ft.indexOf(ht);for(var zt=0,Kt=ft.length;zt<Kt;zt++)if(ft[zt]===ht)return zt;return-1}function Je(ft){if(!g||!ft||typeof ft!="object")return!1;try{g.call(ft);try{E.call(ft)}catch{return!0}return ft instanceof Map}catch{}return!1}function Qe(ft){if(!R||!ft||typeof ft!="object")return!1;try{R.call(ft,R);try{I.call(ft,I)}catch{return!0}return ft instanceof WeakMap}catch{}return!1}function rt(ft){if(!D||!ft||typeof ft!="object")return!1;try{return D.call(ft),!0}catch{}return!1}function wt(ft){if(!E||!ft||typeof ft!="object")return!1;try{E.call(ft);try{g.call(ft)}catch{return!0}return ft instanceof Set}catch{}return!1}function bt(ft){if(!I||!ft||typeof ft!="object")return!1;try{I.call(ft,I);try{R.call(ft,R)}catch{return!0}return ft instanceof WeakSet}catch{}return!1}function xt(ft){return!ft||typeof ft!="object"?!1:typeof HTMLElement<"u"&&ft instanceof HTMLElement?!0:typeof ft.nodeName=="string"&&typeof ft.getAttribute=="function"}function Et(ft,ht){if(ft.length>ht.maxStringLength){var zt=ft.length-ht.maxStringLength,Kt="... "+zt+" more character"+(zt>1?"s":"");return Et(F.call(ft,0,ht.maxStringLength),ht)+Kt}var Ft=be[ht.quoteStyle||"single"];Ft.lastIndex=0;var Jt=U.call(U.call(ft,Ft,"\\$1"),/[\x00-\x1f]/g,Rt);return ye(Jt,"single",ht)}function Rt(ft){var ht=ft.charCodeAt(0),zt={8:"b",9:"t",10:"n",12:"f",13:"r"}[ht];return zt?"\\"+zt:"\\x"+(ht<16?"0":"")+j.call(ht.toString(16))}function $t(ft){return"Object("+ft+")"}function qt(ft){return ft+" { ? }"}function Ge(ft,ht,zt,Kt){var Ft=Kt?Ze(zt,Kt):ie.call(zt,", ");return ft+" ("+ht+") {"+Ft+"}"}function De(ft){for(var ht=0;ht<ft.length;ht++)if(ze(ft[ht],`
`)>=0)return!1;return!0}function Ve(ft,ht){var zt;if(ft.indent==="	")zt="	";else if(typeof ft.indent=="number"&&ft.indent>0)zt=ie.call(Array(ft.indent+1)," ");else return null;return{base:zt,prev:ie.call(Array(ht+1),zt)}}function Ze(ft,ht){if(ft.length===0)return"";var zt=`
`+ht.prev+ht.base;return zt+ie.call(ft,","+zt)+`
`+ht.prev}function _t(ft,ht){var zt=ke(ft),Kt=[];if(zt){Kt.length=ft.length;for(var Ft=0;Ft<ft.length;Ft++)Kt[Ft]=Ke(ft,Ft)?ht(ft[Ft],ft):""}var Jt=typeof G=="function"?G(ft):[],jt;if(q){jt={};for(var rr=0;rr<Jt.length;rr++)jt["$"+Jt[rr]]=Jt[rr]}for(var ir in ft)Ke(ft,ir)&&(zt&&String(Number(ir))===ir&&ir<ft.length||q&&jt["$"+ir]instanceof Symbol||(W.call(/[^\w$]/,ir)?Kt.push(ht(ir,ft)+": "+ht(ft[ir],ft)):Kt.push(ir+": "+ht(ft[ir],ft))));if(typeof G=="function")for(var cr=0;cr<Jt.length;cr++)ve.call(ft,Jt[cr])&&Kt.push("["+ht(Jt[cr])+"]: "+ht(ft[Jt[cr]],ft));return Kt}return objectInspect}var sideChannel,hasRequiredSideChannel;function requireSideChannel(){if(hasRequiredSideChannel)return sideChannel;hasRequiredSideChannel=1;var n=requireGetIntrinsic(),r=requireCallBound(),g=requireObjectInspect(),_=requireType(),x=n("%WeakMap%",!0),S=n("%Map%",!0),E=r("WeakMap.prototype.get",!0),C=r("WeakMap.prototype.set",!0),T=r("WeakMap.prototype.has",!0),R=r("Map.prototype.get",!0),A=r("Map.prototype.set",!0),I=r("Map.prototype.has",!0),B=function(O,L){for(var F=O,U;(U=F.next)!==null;F=U)if(U.key===L)return F.next=U.next,U.next=O.next,O.next=U,U},D=function(O,L){var F=B(O,L);return F&&F.value},N=function(O,L,F){var U=B(O,L);U?U.value=F:O.next={key:L,next:O.next,value:F}},M=function(O,L){return!!B(O,L)};return sideChannel=function(){var L,F,U,j={assert:function(z){if(!j.has(z))throw new _("Side channel does not contain "+g(z))},get:function(z){if(x&&z&&(typeof z=="object"||typeof z=="function")){if(L)return E(L,z)}else if(S){if(F)return R(F,z)}else if(U)return D(U,z)},has:function(z){if(x&&z&&(typeof z=="object"||typeof z=="function")){if(L)return T(L,z)}else if(S){if(F)return I(F,z)}else if(U)return M(U,z);return!1},set:function(z,W){x&&z&&(typeof z=="object"||typeof z=="function")?(L||(L=new x),C(L,z,W)):S?(F||(F=new S),A(F,z,W)):(U||(U={key:{},next:null}),N(U,z,W))}};return j},sideChannel}var internalSlot,hasRequiredInternalSlot;function requireInternalSlot(){if(hasRequiredInternalSlot)return internalSlot;hasRequiredInternalSlot=1;var n=requireHasown(),r=requireSideChannel()(),g=requireType(),_={assert:function(x,S){if(!x||typeof x!="object"&&typeof x!="function")throw new g("`O` is not an object");if(typeof S!="string")throw new g("`slot` must be a string");if(r.assert(x),!_.has(x,S))throw new g("`"+S+"` is not present on `O`")},get:function(x,S){if(!x||typeof x!="object"&&typeof x!="function")throw new g("`O` is not an object");if(typeof S!="string")throw new g("`slot` must be a string");var E=r.get(x);return E&&E["$"+S]},has:function(x,S){if(!x||typeof x!="object"&&typeof x!="function")throw new g("`O` is not an object");if(typeof S!="string")throw new g("`slot` must be a string");var E=r.get(x);return!!E&&n(E,"$"+S)},set:function(x,S,E){if(!x||typeof x!="object"&&typeof x!="function")throw new g("`O` is not an object");if(typeof S!="string")throw new g("`slot` must be a string");var C=r.get(x);C||(C={},r.set(x,C)),C["$"+S]=E}};return Object.freeze&&Object.freeze(_),internalSlot=_,internalSlot}var stopIterationIterator,hasRequiredStopIterationIterator;function requireStopIterationIterator(){if(hasRequiredStopIterationIterator)return stopIterationIterator;hasRequiredStopIterationIterator=1;var n=requireInternalSlot(),r=SyntaxError,g=typeof StopIteration=="object"?StopIteration:null;return stopIterationIterator=function(x){if(!g)throw new r("this environment lacks StopIteration");n.set(x,"[[Done]]",!1);var S={next:function(){var C=n.get(this,"[[Iterator]]"),T=n.get(C,"[[Done]]");try{return{done:T,value:T?void 0:C.next()}}catch(R){if(n.set(C,"[[Done]]",!0),R!==g)throw R;return{done:!0,value:void 0}}}};return n.set(S,"[[Iterator]]",x),S},stopIterationIterator}var isarray$1,hasRequiredIsarray$1;function requireIsarray$1(){if(hasRequiredIsarray$1)return isarray$1;hasRequiredIsarray$1=1;var n={}.toString;return isarray$1=Array.isArray||function(r){return n.call(r)=="[object Array]"},isarray$1}var isString,hasRequiredIsString;function requireIsString(){if(hasRequiredIsString)return isString;hasRequiredIsString=1;var n=String.prototype.valueOf,r=function(E){try{return n.call(E),!0}catch{return!1}},g=Object.prototype.toString,_="[object String]",x=requireShams()();return isString=function(E){return typeof E=="string"?!0:typeof E!="object"?!1:x?r(E):g.call(E)===_},isString}var isMap,hasRequiredIsMap;function requireIsMap(){if(hasRequiredIsMap)return isMap;hasRequiredIsMap=1;var n=typeof Map=="function"&&Map.prototype?Map:null,r=typeof Set=="function"&&Set.prototype?Set:null,g;n||(g=function(E){return!1});var _=n?Map.prototype.has:null,x=r?Set.prototype.has:null;return!g&&!_&&(g=function(E){return!1}),isMap=g||function(E){if(!E||typeof E!="object")return!1;try{if(_.call(E),x)try{x.call(E)}catch{return!0}return E instanceof n}catch{}return!1},isMap}var isSet,hasRequiredIsSet;function requireIsSet(){if(hasRequiredIsSet)return isSet;hasRequiredIsSet=1;var n=typeof Map=="function"&&Map.prototype?Map:null,r=typeof Set=="function"&&Set.prototype?Set:null,g;r||(g=function(E){return!1});var _=n?Map.prototype.has:null,x=r?Set.prototype.has:null;return!g&&!x&&(g=function(E){return!1}),isSet=g||function(E){if(!E||typeof E!="object")return!1;try{if(x.call(E),_)try{_.call(E)}catch{return!0}return E instanceof r}catch{}return!1},isSet}var hasRequiredEsGetIterator;function requireEsGetIterator(){if(hasRequiredEsGetIterator)return esGetIterator.exports;hasRequiredEsGetIterator=1;var n=requireIsArguments(),r=requireStopIterationIterator();if(requireHasSymbols()()||requireShams$1()()){var g=Symbol.iterator;esGetIterator.exports=function(fe){if(fe!=null&&typeof fe[g]<"u")return fe[g]();if(n(fe))return Array.prototype[g].call(fe)}}else{var _=requireIsarray$1(),x=requireIsString(),S=requireGetIntrinsic(),E=S("%Map%",!0),C=S("%Set%",!0),T=requireCallBound(),R=T("Array.prototype.push"),A=T("String.prototype.charCodeAt"),I=T("String.prototype.slice"),B=function(fe,xe){var we=fe.length;if(xe+1>=we)return xe+1;var G=A(fe,xe);if(G<55296||G>56319)return xe+1;var J=A(fe,xe+1);return J<56320||J>57343?xe+1:xe+2},D=function(fe){var xe=0;return{next:function(){var G=xe>=fe.length,J;return G||(J=fe[xe],xe+=1),{done:G,value:J}}}},N=function(fe,xe){if(_(fe)||n(fe))return D(fe);if(x(fe)){var we=0;return{next:function(){var J=B(fe,we),q=I(fe,we,J);return we=J,{done:J>fe.length,value:q}}}}if(xe&&typeof fe["_es6-shim iterator_"]<"u")return fe["_es6-shim iterator_"]()};if(!E&&!C)esGetIterator.exports=function(fe){if(fe!=null)return N(fe,!0)};else{var M=requireIsMap(),O=requireIsSet(),L=T("Map.prototype.forEach",!0),F=T("Set.prototype.forEach",!0);if(typeof process$1>"u"||!process$1.versions||!process$1.versions.node)var U=T("Map.prototype.iterator",!0),j=T("Set.prototype.iterator",!0);var z=T("Map.prototype.@@iterator",!0)||T("Map.prototype._es6-shim iterator_",!0),W=T("Set.prototype.@@iterator",!0)||T("Set.prototype._es6-shim iterator_",!0),X=function(fe){if(M(fe)){if(U)return r(U(fe));if(z)return z(fe);if(L){var xe=[];return L(fe,function(G,J){R(xe,[J,G])}),D(xe)}}if(O(fe)){if(j)return r(j(fe));if(W)return W(fe);if(F){var we=[];return F(fe,function(G){R(we,G)}),D(we)}}};esGetIterator.exports=function(fe){return X(fe)||N(fe)}}}return esGetIterator.exports}var implementation$1,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation$1;hasRequiredImplementation=1;var n=function(r){return r!==r};return implementation$1=function(g,_){return g===0&&_===0?1/g===1/_:!!(g===_||n(g)&&n(_))},implementation$1}var polyfill,hasRequiredPolyfill;function requirePolyfill(){if(hasRequiredPolyfill)return polyfill;hasRequiredPolyfill=1;var n=requireImplementation();return polyfill=function(){return typeof Object.is=="function"?Object.is:n},polyfill}var shim,hasRequiredShim;function requireShim(){if(hasRequiredShim)return shim;hasRequiredShim=1;var n=requirePolyfill(),r=requireDefineProperties();return shim=function(){var _=n();return r(Object,{is:_},{is:function(){return Object.is!==_}}),_},shim}var objectIs,hasRequiredObjectIs;function requireObjectIs(){if(hasRequiredObjectIs)return objectIs;hasRequiredObjectIs=1;var n=requireDefineProperties(),r=requireCallBind(),g=requireImplementation(),_=requirePolyfill(),x=requireShim(),S=r(_(),Object);return n(S,{getPolyfill:_,implementation:g,shim:x}),objectIs=S,objectIs}var isArrayBuffer$1,hasRequiredIsArrayBuffer;function requireIsArrayBuffer(){if(hasRequiredIsArrayBuffer)return isArrayBuffer$1;hasRequiredIsArrayBuffer=1;var n=requireCallBind(),r=requireCallBound(),g=requireGetIntrinsic(),_=g("%ArrayBuffer%",!0),x=r("ArrayBuffer.prototype.byteLength",!0),S=r("Object.prototype.toString"),E=!!_&&!x&&new _(0).slice,C=!!E&&n(E);return isArrayBuffer$1=x||C?function(R){if(!R||typeof R!="object")return!1;try{return x?x(R):C(R,0),!0}catch{return!1}}:_?function(R){return S(R)==="[object ArrayBuffer]"}:function(R){return!1},isArrayBuffer$1}var isDateObject,hasRequiredIsDateObject;function requireIsDateObject(){if(hasRequiredIsDateObject)return isDateObject;hasRequiredIsDateObject=1;var n=Date.prototype.getDay,r=function(E){try{return n.call(E),!0}catch{return!1}},g=Object.prototype.toString,_="[object Date]",x=requireShams()();return isDateObject=function(E){return typeof E!="object"||E===null?!1:x?r(E):g.call(E)===_},isDateObject}var isRegex,hasRequiredIsRegex;function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var n=requireCallBound(),r=requireShams()(),g,_,x,S;if(r){g=n("Object.prototype.hasOwnProperty"),_=n("RegExp.prototype.exec"),x={};var E=function(){throw x};S={toString:E,valueOf:E},typeof Symbol.toPrimitive=="symbol"&&(S[Symbol.toPrimitive]=E)}var C=n("Object.prototype.toString"),T=Object.getOwnPropertyDescriptor,R="[object RegExp]";return isRegex=r?function(I){if(!I||typeof I!="object")return!1;var B=T(I,"lastIndex"),D=B&&g(B,"value");if(!D)return!1;try{_(I,S)}catch(N){return N===x}}:function(I){return!I||typeof I!="object"&&typeof I!="function"?!1:C(I)===R},isRegex}var isSharedArrayBuffer,hasRequiredIsSharedArrayBuffer;function requireIsSharedArrayBuffer(){if(hasRequiredIsSharedArrayBuffer)return isSharedArrayBuffer;hasRequiredIsSharedArrayBuffer=1;var n=requireCallBound(),r=n("SharedArrayBuffer.prototype.byteLength",!0);return isSharedArrayBuffer=r?function(_){if(!_||typeof _!="object")return!1;try{return r(_),!0}catch{return!1}}:function(_){return!1},isSharedArrayBuffer}var isNumberObject,hasRequiredIsNumberObject;function requireIsNumberObject(){if(hasRequiredIsNumberObject)return isNumberObject;hasRequiredIsNumberObject=1;var n=Number.prototype.toString,r=function(E){try{return n.call(E),!0}catch{return!1}},g=Object.prototype.toString,_="[object Number]",x=requireShams()();return isNumberObject=function(E){return typeof E=="number"?!0:typeof E!="object"?!1:x?r(E):g.call(E)===_},isNumberObject}var isBooleanObject,hasRequiredIsBooleanObject;function requireIsBooleanObject(){if(hasRequiredIsBooleanObject)return isBooleanObject;hasRequiredIsBooleanObject=1;var n=requireCallBound(),r=n("Boolean.prototype.toString"),g=n("Object.prototype.toString"),_=function(C){try{return r(C),!0}catch{return!1}},x="[object Boolean]",S=requireShams()();return isBooleanObject=function(C){return typeof C=="boolean"?!0:C===null||typeof C!="object"?!1:S&&Symbol.toStringTag in C?_(C):g(C)===x},isBooleanObject}var isSymbol={exports:{}},hasRequiredIsSymbol;function requireIsSymbol(){if(hasRequiredIsSymbol)return isSymbol.exports;hasRequiredIsSymbol=1;var n=Object.prototype.toString,r=requireHasSymbols()();if(r){var g=Symbol.prototype.toString,_=/^Symbol\(.*\)$/,x=function(E){return typeof E.valueOf()!="symbol"?!1:_.test(g.call(E))};isSymbol.exports=function(E){if(typeof E=="symbol")return!0;if(n.call(E)!=="[object Symbol]")return!1;try{return x(E)}catch{return!1}}}else isSymbol.exports=function(E){return!1};return isSymbol.exports}var isBigint={exports:{}},hasBigints,hasRequiredHasBigints;function requireHasBigints(){if(hasRequiredHasBigints)return hasBigints;hasRequiredHasBigints=1;var n=typeof BigInt<"u"&&BigInt;return hasBigints=function(){return typeof n=="function"&&typeof BigInt=="function"&&typeof n(42)=="bigint"&&typeof BigInt(42)=="bigint"},hasBigints}var hasRequiredIsBigint;function requireIsBigint(){if(hasRequiredIsBigint)return isBigint.exports;hasRequiredIsBigint=1;var n=requireHasBigints()();if(n){var r=BigInt.prototype.valueOf,g=function(x){try{return r.call(x),!0}catch{}return!1};isBigint.exports=function(x){return x===null||typeof x>"u"||typeof x=="boolean"||typeof x=="string"||typeof x=="number"||typeof x=="symbol"||typeof x=="function"?!1:typeof x=="bigint"?!0:g(x)}}else isBigint.exports=function(x){return!1};return isBigint.exports}var whichBoxedPrimitive,hasRequiredWhichBoxedPrimitive;function requireWhichBoxedPrimitive(){if(hasRequiredWhichBoxedPrimitive)return whichBoxedPrimitive;hasRequiredWhichBoxedPrimitive=1;var n=requireIsString(),r=requireIsNumberObject(),g=requireIsBooleanObject(),_=requireIsSymbol(),x=requireIsBigint();return whichBoxedPrimitive=function(E){if(E==null||typeof E!="object"&&typeof E!="function")return null;if(n(E))return"String";if(r(E))return"Number";if(g(E))return"Boolean";if(_(E))return"Symbol";if(x(E))return"BigInt"},whichBoxedPrimitive}var isWeakmap,hasRequiredIsWeakmap;function requireIsWeakmap(){if(hasRequiredIsWeakmap)return isWeakmap;hasRequiredIsWeakmap=1;var n=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,r=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,g;n||(g=function(E){return!1});var _=n?n.prototype.has:null,x=r?r.prototype.has:null;return!g&&!_&&(g=function(E){return!1}),isWeakmap=g||function(E){if(!E||typeof E!="object")return!1;try{if(_.call(E,_),x)try{x.call(E,x)}catch{return!0}return E instanceof n}catch{}return!1},isWeakmap}var isWeakset={exports:{}},hasRequiredIsWeakset;function requireIsWeakset(){if(hasRequiredIsWeakset)return isWeakset.exports;hasRequiredIsWeakset=1;var n=requireGetIntrinsic(),r=requireCallBound(),g=n("%WeakSet%",!0),_=r("WeakSet.prototype.has",!0);if(_){var x=r("WeakMap.prototype.has",!0);isWeakset.exports=function(E){if(!E||typeof E!="object")return!1;try{if(_(E,_),x)try{x(E,x)}catch{return!0}return E instanceof g}catch{}return!1}}else isWeakset.exports=function(E){return!1};return isWeakset.exports}var whichCollection,hasRequiredWhichCollection;function requireWhichCollection(){if(hasRequiredWhichCollection)return whichCollection;hasRequiredWhichCollection=1;var n=requireIsMap(),r=requireIsSet(),g=requireIsWeakmap(),_=requireIsWeakset();return whichCollection=function(S){if(S&&typeof S=="object"){if(n(S))return"Map";if(r(S))return"Set";if(g(S))return"WeakMap";if(_(S))return"WeakSet"}return!1},whichCollection}var isCallable,hasRequiredIsCallable;function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var n=Function.prototype.toString,r=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,g,_;if(typeof r=="function"&&typeof Object.defineProperty=="function")try{g=Object.defineProperty({},"length",{get:function(){throw _}}),_={},r(function(){throw 42},null,g)}catch(F){F!==_&&(r=null)}else r=null;var x=/^\s*class\b/,S=function(U){try{var j=n.call(U);return x.test(j)}catch{return!1}},E=function(U){try{return S(U)?!1:(n.call(U),!0)}catch{return!1}},C=Object.prototype.toString,T="[object Object]",R="[object Function]",A="[object GeneratorFunction]",I="[object HTMLAllCollection]",B="[object HTML document.all class]",D="[object HTMLCollection]",N=typeof Symbol=="function"&&!!Symbol.toStringTag,M=!(0 in[,]),O=function(){return!1};if(typeof document=="object"){var L=document.all;C.call(L)===C.call(document.all)&&(O=function(U){if((M||!U)&&(typeof U>"u"||typeof U=="object"))try{var j=C.call(U);return(j===I||j===B||j===D||j===T)&&U("")==null}catch{}return!1})}return isCallable=r?function(U){if(O(U))return!0;if(!U||typeof U!="function"&&typeof U!="object")return!1;try{r(U,null,g)}catch(j){if(j!==_)return!1}return!S(U)&&E(U)}:function(U){if(O(U))return!0;if(!U||typeof U!="function"&&typeof U!="object")return!1;if(N)return E(U);if(S(U))return!1;var j=C.call(U);return j!==R&&j!==A&&!/^\[object HTML/.test(j)?!1:E(U)},isCallable}var forEach_1,hasRequiredForEach;function requireForEach(){if(hasRequiredForEach)return forEach_1;hasRequiredForEach=1;var n=requireIsCallable(),r=Object.prototype.toString,g=Object.prototype.hasOwnProperty,_=function(T,R,A){for(var I=0,B=T.length;I<B;I++)g.call(T,I)&&(A==null?R(T[I],I,T):R.call(A,T[I],I,T))},x=function(T,R,A){for(var I=0,B=T.length;I<B;I++)A==null?R(T.charAt(I),I,T):R.call(A,T.charAt(I),I,T)},S=function(T,R,A){for(var I in T)g.call(T,I)&&(A==null?R(T[I],I,T):R.call(A,T[I],I,T))},E=function(T,R,A){if(!n(R))throw new TypeError("iterator must be a function");var I;arguments.length>=3&&(I=A),r.call(T)==="[object Array]"?_(T,R,I):typeof T=="string"?x(T,R,I):S(T,R,I)};return forEach_1=E,forEach_1}var possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames;function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames||(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]),possibleTypedArrayNames}var availableTypedArrays,hasRequiredAvailableTypedArrays;function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var n=requirePossibleTypedArrayNames(),r=typeof globalThis>"u"?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var _=[],x=0;x<n.length;x++)typeof r[n[x]]=="function"&&(_[_.length]=n[x]);return _},availableTypedArrays}var whichTypedArray,hasRequiredWhichTypedArray;function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var n=requireForEach(),r=requireAvailableTypedArrays(),g=requireCallBind(),_=requireCallBound(),x=requireGopd(),S=_("Object.prototype.toString"),E=requireShams()(),C=typeof globalThis>"u"?commonjsGlobal:globalThis,T=r(),R=_("String.prototype.slice"),A=Object.getPrototypeOf,I=_("Array.prototype.indexOf",!0)||function(O,L){for(var F=0;F<O.length;F+=1)if(O[F]===L)return F;return-1},B={__proto__:null};E&&x&&A?n(T,function(M){var O=new C[M];if(Symbol.toStringTag in O){var L=A(O),F=x(L,Symbol.toStringTag);if(!F){var U=A(L);F=x(U,Symbol.toStringTag)}B["$"+M]=g(F.get)}}):n(T,function(M){var O=new C[M],L=O.slice||O.set;L&&(B["$"+M]=g(L))});var D=function(O){var L=!1;return n(B,function(F,U){if(!L)try{"$"+F(O)===U&&(L=R(U,1))}catch{}}),L},N=function(O){var L=!1;return n(B,function(F,U){if(!L)try{F(O),L=R(U,1)}catch{}}),L};return whichTypedArray=function(O){if(!O||typeof O!="object")return!1;if(!E){var L=R(S(O),8,-1);return I(T,L)>-1?L:L!=="Object"?!1:N(O)}return x?D(O):null},whichTypedArray}var arrayBufferByteLength,hasRequiredArrayBufferByteLength;function requireArrayBufferByteLength(){if(hasRequiredArrayBufferByteLength)return arrayBufferByteLength;hasRequiredArrayBufferByteLength=1;var n=requireCallBound(),r=n("ArrayBuffer.prototype.byteLength",!0),g=requireIsArrayBuffer();return arrayBufferByteLength=function(x){return g(x)?r?r(x):x.byteLength:NaN},arrayBufferByteLength}var deepEqual$3,hasRequiredDeepEqual;function requireDeepEqual(){if(hasRequiredDeepEqual)return deepEqual$3;hasRequiredDeepEqual=1;var n=requireObject_assign(),r=requireCallBound(),g=requireRegexp_prototype_flags(),_=requireGetIntrinsic(),x=requireEsGetIterator(),S=requireSideChannel(),E=requireObjectIs(),C=requireIsArguments(),T=requireIsarray$1(),R=requireIsArrayBuffer(),A=requireIsDateObject(),I=requireIsRegex(),B=requireIsSharedArrayBuffer(),D=requireObjectKeys(),N=requireWhichBoxedPrimitive(),M=requireWhichCollection(),O=requireWhichTypedArray(),L=requireArrayBufferByteLength(),F=r("SharedArrayBuffer.prototype.byteLength",!0),U=r("Date.prototype.getTime"),j=Object.getPrototypeOf,z=r("Object.prototype.toString"),W=_("%Set%",!0),X=r("Map.prototype.has",!0),ie=r("Map.prototype.get",!0),fe=r("Map.prototype.size",!0),xe=r("Set.prototype.add",!0),we=r("Set.prototype.delete",!0),G=r("Set.prototype.has",!0),J=r("Set.prototype.size",!0);function q(ye,Ie,ke,Ce){for(var Ae=x(ye),Ne;(Ne=Ae.next())&&!Ne.done;)if(ue(Ie,Ne.value,ke,Ce))return we(ye,Ne.value),!0;return!1}function H(ye){if(typeof ye>"u")return null;if(typeof ye!="object")return typeof ye=="symbol"?!1:typeof ye=="string"||typeof ye=="number"?+ye==+ye:!0}function ve(ye,Ie,ke,Ce,Ae,Ne){var We=H(ke);if(We!=null)return We;var Be=ie(Ie,We),Se=n({},Ae,{strict:!1});return typeof Be>"u"&&!X(Ie,We)||!ue(Ce,Be,Se,Ne)?!1:!X(ye,We)&&ue(Ce,Be,Se,Ne)}function Z(ye,Ie,ke){var Ce=H(ke);return Ce??(G(Ie,Ce)&&!G(ye,Ce))}function ce(ye,Ie,ke,Ce,Ae,Ne){for(var We=x(ye),Be,Se;(Be=We.next())&&!Be.done;)if(Se=Be.value,ue(ke,Se,Ae,Ne)&&ue(Ce,ie(Ie,Se),Ae,Ne))return we(ye,Se),!0;return!1}function ue(ye,Ie,ke,Ce){var Ae=ke||{};if(Ae.strict?E(ye,Ie):ye===Ie)return!0;var Ne=N(ye),We=N(Ie);if(Ne!==We)return!1;if(!ye||!Ie||typeof ye!="object"&&typeof Ie!="object")return Ae.strict?E(ye,Ie):ye==Ie;var Be=Ce.has(ye),Se=Ce.has(Ie),$e;if(Be&&Se){if(Ce.get(ye)===Ce.get(Ie))return!0}else $e={};return Be||Ce.set(ye,$e),Se||Ce.set(Ie,$e),be(ye,Ie,Ae,Ce)}function se(ye){return!ye||typeof ye!="object"||typeof ye.length!="number"||typeof ye.copy!="function"||typeof ye.slice!="function"||ye.length>0&&typeof ye[0]!="number"?!1:!!(ye.constructor&&ye.constructor.isBuffer&&ye.constructor.isBuffer(ye))}function te(ye,Ie,ke,Ce){if(J(ye)!==J(Ie))return!1;for(var Ae=x(ye),Ne=x(Ie),We,Be,Se;(We=Ae.next())&&!We.done;)if(We.value&&typeof We.value=="object")Se||(Se=new W),xe(Se,We.value);else if(!G(Ie,We.value)){if(ke.strict||!Z(ye,Ie,We.value))return!1;Se||(Se=new W),xe(Se,We.value)}if(Se){for(;(Be=Ne.next())&&!Be.done;)if(Be.value&&typeof Be.value=="object"){if(!q(Se,Be.value,ke.strict,Ce))return!1}else if(!ke.strict&&!G(ye,Be.value)&&!q(Se,Be.value,ke.strict,Ce))return!1;return J(Se)===0}return!0}function Y(ye,Ie,ke,Ce){if(fe(ye)!==fe(Ie))return!1;for(var Ae=x(ye),Ne=x(Ie),We,Be,Se,$e,_e,Oe;(We=Ae.next())&&!We.done;)if($e=We.value[0],_e=We.value[1],$e&&typeof $e=="object")Se||(Se=new W),xe(Se,$e);else if(Oe=ie(Ie,$e),typeof Oe>"u"&&!X(Ie,$e)||!ue(_e,Oe,ke,Ce)){if(ke.strict||!ve(ye,Ie,$e,_e,ke,Ce))return!1;Se||(Se=new W),xe(Se,$e)}if(Se){for(;(Be=Ne.next())&&!Be.done;)if($e=Be.value[0],Oe=Be.value[1],$e&&typeof $e=="object"){if(!ce(Se,ye,$e,Oe,ke,Ce))return!1}else if(!ke.strict&&(!ye.has($e)||!ue(ie(ye,$e),Oe,ke,Ce))&&!ce(Se,ye,$e,Oe,n({},ke,{strict:!1}),Ce))return!1;return J(Se)===0}return!0}function be(ye,Ie,ke,Ce){var Ae,Ne;if(typeof ye!=typeof Ie||ye==null||Ie==null||z(ye)!==z(Ie)||C(ye)!==C(Ie))return!1;var We=T(ye),Be=T(Ie);if(We!==Be)return!1;var Se=ye instanceof Error,$e=Ie instanceof Error;if(Se!==$e||(Se||$e)&&(ye.name!==Ie.name||ye.message!==Ie.message))return!1;var _e=I(ye),Oe=I(Ie);if(_e!==Oe||(_e||Oe)&&(ye.source!==Ie.source||g(ye)!==g(Ie)))return!1;var Ke=A(ye),Me=A(Ie);if(Ke!==Me||(Ke||Me)&&U(ye)!==U(Ie)||ke.strict&&j&&j(ye)!==j(Ie))return!1;var Le=O(ye),ze=O(Ie);if(Le!==ze)return!1;if(Le||ze){if(ye.length!==Ie.length)return!1;for(Ae=0;Ae<ye.length;Ae++)if(ye[Ae]!==Ie[Ae])return!1;return!0}var Je=se(ye),Qe=se(Ie);if(Je!==Qe)return!1;if(Je||Qe){if(ye.length!==Ie.length)return!1;for(Ae=0;Ae<ye.length;Ae++)if(ye[Ae]!==Ie[Ae])return!1;return!0}var rt=R(ye),wt=R(Ie);if(rt!==wt)return!1;if(rt||wt)return L(ye)!==L(Ie)?!1:typeof Uint8Array=="function"&&ue(new Uint8Array(ye),new Uint8Array(Ie),ke,Ce);var bt=B(ye),xt=B(Ie);if(bt!==xt)return!1;if(bt||xt)return F(ye)!==F(Ie)?!1:typeof Uint8Array=="function"&&ue(new Uint8Array(ye),new Uint8Array(Ie),ke,Ce);if(typeof ye!=typeof Ie)return!1;var Et=D(ye),Rt=D(Ie);if(Et.length!==Rt.length)return!1;for(Et.sort(),Rt.sort(),Ae=Et.length-1;Ae>=0;Ae--)if(Et[Ae]!=Rt[Ae])return!1;for(Ae=Et.length-1;Ae>=0;Ae--)if(Ne=Et[Ae],!ue(ye[Ne],Ie[Ne],ke,Ce))return!1;var $t=M(ye),qt=M(Ie);return $t!==qt?!1:$t==="Set"||qt==="Set"?te(ye,Ie,ke,Ce):$t==="Map"?Y(ye,Ie,ke,Ce):!0}return deepEqual$3=function(Ie,ke,Ce){return ue(Ie,ke,Ce,S())},deepEqual$3}var deepEqualExports=requireDeepEqual();const deepEqual$2=getDefaultExportFromCjs(deepEqualExports);var cjs,hasRequiredCjs;function requireCjs(){if(hasRequiredCjs)return cjs;hasRequiredCjs=1;var n=function(F){return r(F)&&!g(F)};function r(L){return!!L&&typeof L=="object"}function g(L){var F=Object.prototype.toString.call(L);return F==="[object RegExp]"||F==="[object Date]"||S(L)}var _=typeof Symbol=="function"&&Symbol.for,x=_?Symbol.for("react.element"):60103;function S(L){return L.$$typeof===x}function E(L){return Array.isArray(L)?[]:{}}function C(L,F){return F.clone!==!1&&F.isMergeableObject(L)?M(E(L),L,F):L}function T(L,F,U){return L.concat(F).map(function(j){return C(j,U)})}function R(L,F){if(!F.customMerge)return M;var U=F.customMerge(L);return typeof U=="function"?U:M}function A(L){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(L).filter(function(F){return Object.propertyIsEnumerable.call(L,F)}):[]}function I(L){return Object.keys(L).concat(A(L))}function B(L,F){try{return F in L}catch{return!1}}function D(L,F){return B(L,F)&&!(Object.hasOwnProperty.call(L,F)&&Object.propertyIsEnumerable.call(L,F))}function N(L,F,U){var j={};return U.isMergeableObject(L)&&I(L).forEach(function(z){j[z]=C(L[z],U)}),I(F).forEach(function(z){D(L,z)||(B(L,z)&&U.isMergeableObject(F[z])?j[z]=R(z,U)(L[z],F[z],U):j[z]=C(F[z],U))}),j}function M(L,F,U){U=U||{},U.arrayMerge=U.arrayMerge||T,U.isMergeableObject=U.isMergeableObject||n,U.cloneUnlessOtherwiseSpecified=C;var j=Array.isArray(F),z=Array.isArray(L),W=j===z;return W?j?U.arrayMerge(L,F,U):N(L,F,U):C(F,U)}M.all=function(F,U){if(!Array.isArray(F))throw new Error("first argument should be an array");return F.reduce(function(j,z){return M(j,z,U)},{})};var O=M;return cjs=O,cjs}var cjsExports=requireCjs();const merge=getDefaultExportFromCjs(cjsExports),latin={வகை:"இடஞ்சார்",ஒருங்குறி:"latn",குறிகள்:"0123456789",அடுக்குக்குறி:"eE",பிரிப்பு:"."},_தகவல்கள்={latin,"Mayab'":{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"𝋠𝋡𝋢𝋣𝋤𝋥𝋦𝋧𝋨𝋩𝋪𝋫𝋬𝋭𝋮𝋯𝋰𝋱𝋲𝋳"},"𑼒𑼮𑼶":{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"𑽐𑽑𑽒𑽓𑽔𑽕𑽖𑽗𑽘𑽙"},ᑲᒃᑐᕕᒃ:{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"𝋀𝋁𝋂𝋃𝋄𝋅𝋆𝋇𝋈𝋉𝋊𝋋𝋌𝋍𝋎𝋏𝋐𝋑𝋒𝋓"},देवनागरी:{வகை:"இடஞ்சார்",ஒருங்குறி:"deva",அடுக்குக்குறி:"घा",குறிகள்:"०१२३४५६७८९"},ਪੰਜਾਬੀ:{வகை:"இடஞ்சார்",ஒருங்குறி:"guru",அடுக்குக்குறி:"ਘਾ",குறிகள்:"੦੧੨੩੪੫੬੭੮੯"},ગુજરાતી:{வகை:"இடஞ்சார்",ஒருங்குறி:"gujr",குறிகள்:"૦૧૨૩૪૫૬૭૮૯"},"മലയാളം സ്ഥാനിക":{வகை:"இடஞ்சார்",ஒருங்குறி:"mlym",குறிகள்:"൦൧൨൩൪൫൬൭൮൯"},മലയാളം:{வகை:"அடிமானம்",ஒருங்குறி:null,குறிகள்:"൦൧൨൩൪൫൬൭൮൯",அடிமானங்கள்:{"൰":10,"൱":100,"൲":1e3}},தமிழ்:{வகை:"அடிமானம்",ஒருங்குறி:"taml",குறிகள்:"௦௧௨௩௪௫௬௭௮௯",அடுக்குக்குறி:"ப",அடிமானங்கள்:{"௰":10,"௱":100,"௲":1e3}},"தமிழ் இடஞ்சார்":{வகை:"இடஞ்சார்",ஒருங்குறி:"tamldec",அடுக்குக்குறி:"ப",குறிகள்:"௦௧௨௩௪௫௬௭௮௯"},فارسی:{வகை:"இடஞ்சார்",ஒருங்குறி:"arabext",அடுக்குக்குறி:"ت",குறிகள்:"۰۱۲۳۴۵۶۷۸۹",பிரிப்பு:"٫."},عربية:{வகை:"இடஞ்சார்",ஒருங்குறி:"arab",அடுக்குக்குறி:"ر",குறிகள்:"٠١٢٣٤٥٦٧٨٩",பிரிப்பு:"٫."},ଓଡ଼ିଆ:{வகை:"இடஞ்சார்",ஒருங்குறி:"orya",குறிகள்:"୦୧୨୩୪୫୬୭୮୯"},বাংলা:{வகை:"இடஞ்சார்",ஒருங்குறி:"beng",அடுக்குக்குறி:"সূ",குறிகள்:"০১২৩৪৫৬৭৮৯"},ಕನ್ನಡ:{வகை:"இடஞ்சார்",ஒருங்குறி:"knda",குறிகள்:"೦೧೨೩೪೫೬೭೮೯"},తెలుగు:{வகை:"இடஞ்சார்",ஒருங்குறி:"telu",குறிகள்:"౦౧౨౩౪౫౬౭౮౯"},"𑀩𑁆𑀭𑀸𑀳𑀫𑀻":{வகை:"இடஞ்சார்",ஒருங்குறி:"brah",குறிகள்:"𑁦𑁧𑁨𑁩𑁪𑁫𑁬𑁭𑁮𑁯"},"𑄃𑄧𑄏":{வகை:"இடஞ்சார்",ஒருங்குறி:"cakm",குறிகள்:"𑄶𑄷𑄸𑄹𑄺𑄻𑄼𑄽𑄾𑄿"},"ߒߞߏ":{வகை:"இடஞ்சார்",ஒருங்குறி:"nkoo",குறிகள்:"߀߁߂߃߄߅߆߇߈߉"},"ꢱꣃꢬꢵꢰ꣄ꢜ꣄ꢬ":{வகை:"இடஞ்சார்",ஒருங்குறி:"saur",குறிகள்:"꣐꣑꣒꣓꣔꣕꣖꣗꣘꣙"},"ᱚᱞ ᱪᱤᱠᱤ":{வகை:"இடஞ்சார்",ஒருங்குறி:"olck",குறிகள்:"᱐᱑᱒᱓᱔᱕᱖᱗᱘᱙"},"සිංහල ස්ථානීය":{வகை:"இடஞ்சார்",ஒருங்குறி:"sinh",குறிகள்:"෦෧෨෩෪෫෬෭෮෯"},සිංහල:{வகை:"அடிமானம்",ஒருங்குறி:null,குறிகள்:"෦෧෨෩෪෫෬෭෮෯",அடிமானங்கள்:{"𑇫":10,"𑇳":100,"𑇴":1e3}},"ᬩᬮᬶ":{வகை:"இடஞ்சார்",ஒருங்குறி:"bali",குறிகள்:"᭐᭑᭒᭓᭔᭕᭖᭗᭘᭙"},"ꨌꨩꨠ":{வகை:"இடஞ்சார்",ஒருங்குறி:"cham",குறிகள்:"꩐꩑꩒꩓꩔꩕꩖꩗꩘꩙"},"ꦗꦮ":{வகை:"இடஞ்சார்",ஒருங்குறி:"java",குறிகள்:"꧐꧑꧒꧓꧔꧕꧖꧗꧘꧙"},ไทย:{வகை:"இடஞ்சார்",ஒருங்குறி:"thai",அடுக்குக்குறி:"กา",குறிகள்:"๐๑๒๓๔๕๖๗๘๙"},ລາວ:{வகை:"இடஞ்சார்",ஒருங்குறி:"laoo",குறிகள்:"໐໑໒໓໔໕໖໗໘໙"},"བོད་ཡིག":{வகை:"இடஞ்சார்",ஒருங்குறி:"tibt",குறிகள்:"༠༡༢༣༤༥༦༧༨༩"},"လိၵ်ႈတႆး":{வகை:"இடஞ்சார்",ஒருங்குறி:"mymrshan",குறிகள்:"႐႑႒႓႔႕႖႗႘႙"},"တိုင်းလိုင်":{வகை:"இடஞ்சார்",ஒருங்குறி:"mymrtlng",குறிகள்:"꧰꧱꧲꧳꧴꧵꧶꧷꧸꧹"},"မြန်မာ":{வகை:"இடஞ்சார்",ஒருங்குறி:"mymr",குறிகள்:"၀၁၂၃၄၅၆၇၈၉"},"ꤊꤢ꤬ꤛꤢ꤭ ꤜꤟꤤ꤬":{வகை:"இடஞ்சார்",ஒருங்குறி:"kali",குறிகள்:"꤀꤁꤂꤃꤄꤅꤆꤇꤈꤉"},"ᨣᩴᩣᩱᨴᩭ":{வகை:"இடஞ்சார்",ஒருங்குறி:"talu",குறிகள்:"᧐᧑᧒᧓᧔᧕᧖᧗᧘᧙"},"𑜒𑜑𑜪𑜨":{வகை:"இடஞ்சார்",ஒருங்குறி:"ahom",குறிகள்:"𑜰𑜱𑜲𑜳𑜴𑜵𑜶𑜷𑜸𑜹"},"𑰥𑰹𑰎𑰿𑰬𑰲𑰎𑰱":{வகை:"இடஞ்சார்",ஒருங்குறி:"bhks",குறிகள்:"𑱐𑱑𑱒𑱓𑱔𑱕𑱖𑱗𑱘𑱙"},"𑵶𑶓𑶕𑶂𑶋":{வகை:"இடஞ்சார்",ஒருங்குறி:"gong",குறிகள்:"𑶠𑶡𑶢𑶣𑶤𑶥𑶦𑶧𑶨𑶩"},"𖪰𖩵𖪂𖪫𖩸":{வகை:"இடஞ்சார்",குறிகள்:"𖫀𖫁𖫂𖫃𖫄𖫅𖫆𖫇𖫈𖫉"},"𑴎𑴽𑵀𑴘𑴲":{வகை:"இடஞ்சார்",ஒருங்குறி:"gonm",குறிகள்:"𑵐𑵑𑵒𑵓𑵔𑵕𑵖𑵗𑵘𑵙"},"𐴇𐴝𐴕𐴞𐴉𐴞":{வகை:"இடஞ்சார்",ஒருங்குறி:"rohg",குறிகள்:"𐴰𐴱𐴲𐴳𐴴𐴵𐴶𐴷𐴸𐴹"},"𖬖𖬰𖬝𖬵 𖬄𖬶𖬟 𖬌𖬣𖬵":{வகை:"இடஞ்சார்",ஒருங்குறி:"hmng",குறிகள்:"𖭐𖭑𖭒𖭓𖭔𖭕𖭖𖭗𖭘𖭙"},"𞄀𞄩𞄰𞄁𞄦𞄱𞄂𞄤𞄳𞄬𞄃𞄥𞄳":{வகை:"இடஞ்சார்",ஒருங்குறி:"hmng",குறிகள்:"𞅀𞅁𞅂𞅃𞅄𞅅𞅆𞅇𞅈𞅉"},ខ្មែរ:{வகை:"இடஞ்சார்",ஒருங்குறி:"khmr",குறிகள்:"០១២៣៤៥៦៧៨៩"},"ᨲ᩠ᩅᩫᨾᩮᩥᩬᨦ - lek nai tam":{வகை:"இடஞ்சார்",ஒருங்குறி:"lana",குறிகள்:"᪀᪁᪂᪃᪄᪅᪆᪇᪈᪉"},"ᨲ᩠ᩅᩫᨾᩮᩥᩬᨦ - lek hora":{வகை:"இடஞ்சார்",ஒருங்குறி:"lanatham",குறிகள்:"᪐᪑᪒᪓᪔᪕᪖᪗᪘᪙"},"ᰴᰩᰛᰴᰧᰛ":{வகை:"இடஞ்சார்",ஒருங்குறி:"lepc",குறிகள்:"᱀᱁᱂᱃᱄᱅᱆᱇᱈᱉"},"ᤕᤠᤰᤌᤢᤱ ᤐᤠᤴ":{வகை:"இடஞ்சார்",ஒருங்குறி:"limb",குறிகள்:"᥆᥇᥈᥉᥊᥋᥌᥍᥎᥏"},"ᠮᠣᠩᠭᠣᠯ ᠬᠡᠯᠡ":{வகை:"இடஞ்சார்",ஒருங்குறி:"mong",குறிகள்:"᠐᠑᠒᠓᠔᠕᠖᠗᠘᠙"},"ꯃꯤꯇꯩ":{வகை:"இடஞ்சார்",ஒருங்குறி:"mtei",குறிகள்:"꯰꯱꯲꯳꯴꯵꯶꯷꯸꯹"},"ᮞᮥᮔ᮪ᮓ":{வகை:"இடஞ்சார்",ஒருங்குறி:"sund",குறிகள்:"᮰᮱᮲᮳᮴᮵᮶᮷᮸᮹"},"𑋝𑋡𑋟𑋐𑋢":{வகை:"இடஞ்சார்",ஒருங்குறி:"sind",குறிகள்:"𑋰𑋱𑋲𑋳𑋴𑋵𑋶𑋷𑋸𑋹"},"𑘦𑘻𑘚𑘲":{வகை:"இடஞ்சார்",ஒருங்குறி:"modi",குறிகள்:"𑙐𑙑𑙒𑙓𑙔𑙕𑙖𑙗𑙘𑙙"},"𖩃𖩓𖩑":{வகை:"இடஞ்சார்",ஒருங்குறி:"mroo",குறிகள்:"𖩠𖩡𖩢𖩣𖩤𖩥𖩦𖩧𖩨𖩩"},"𑐥𑑂𑐬𑐔𑐮𑐶𑐟 𑐣𑐾𑐥𑐵𑐮":{வகை:"இடஞ்சார்",ஒருங்குறி:"newa",குறிகள்:"𑑐𑑑𑑒𑑓𑑔𑑕𑑖𑑗𑑘𑑙"},"ꕙꔤ":{வகை:"இடஞ்சார்",ஒருங்குறி:"vaii",குறிகள்:"꘠꘡꘢꘣꘤꘥꘦꘧꘨꘩"},"𐒋𐒘𐒈𐒑𐒛𐒒𐒕𐒀":{வகை:"இடஞ்சார்",ஒருங்குறி:"osma",குறிகள்:"𐒠𐒡𐒢𐒣𐒤𐒥𐒦𐒧𐒨𐒩"},"𑆯𑆳𑆫𑆢𑆳":{வகை:"இடஞ்சார்",ஒருங்குறி:"shrd",குறிகள்:"𑇐𑇑𑇒𑇓𑇔𑇕𑇖𑇗𑇘𑇙"},ግዕዝ:{வகை:"அடிமானம்",ஒருங்குறி:"ethi",குறிகள்:"0፩፪፫፬፭፮፯፰፱",அடிமானங்கள்:{"፲":10,"፳":20,"፴":30,"፵":40,"፶":50,"፷":60,"፸":70,"፹":80,"፺":90,"፻":100,"፼":1e4}},"𑃐𑃦𑃝𑃗 𑃐𑃦𑃖𑃛𑃣𑃗":{வகை:"இடஞ்சார்",ஒருங்குறி:"sora",குறிகள்:"𑃰𑃱𑃲𑃳𑃴𑃵𑃶𑃷𑃸𑃹"},"𑚔𑚭𑚊𑚤𑚯":{வகை:"இடஞ்சார்",ஒருங்குறி:"takr",குறிகள்:"𑛀𑛁𑛂𑛃𑛄𑛅𑛆𑛇𑛈𑛉"},"𑒞𑒱𑒩𑒯𑒳𑒞𑒰":{வகை:"இடஞ்சார்",ஒருங்குறி:"tirh",குறிகள்:"𑓐𑓑𑓒𑓓𑓔𑓕𑓖𑓗𑓘𑓙"},"𑢹𑣗𑣁𑣜𑣊 𑣏𑣂𑣕𑣂":{வகை:"இடஞ்சார்",ஒருங்குறி:"wara",குறிகள்:"𑣠𑣡𑣢𑣣𑣤𑣥𑣦𑣧𑣨𑣩"},"ꛀꛣꚧꚳ":{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"ꛯꛦꛧꛨꛩꛪꛫꛬꛭꛮ"},"𞋒𞋀𞋉𞋃𞋕":{வகை:"இடஞ்சார்",ஒருங்குறி:"wcho",குறிகள்:"𞋰𞋱𞋲𞋳𞋴𞋵𞋶𞋷𞋸𞋹"},"𞤀𞤣𞤤𞤥":{வகை:"இடஞ்சார்",ஒருங்குறி:"adlm",குறிகள்:"𞥐𞥑𞥒𞥓𞥔𞥕𞥖𞥗𞥘𞥙"},汉语:{வகை:"அடிமானம்",ஒருங்குறி:"hans",அடுக்குக்குறி:"幂",குறிகள்:"〇一二三四五六七八九",பிரிப்பு:"。.",அடிமானங்கள்:{十:10,百:100,千:1e3,万:1e4,亿:1e8,兆:1e12,京:1e16,垓:1e20,秭:1e24,穰:1e28,溝:1e32,澗:1e36,正:1e40,載:1e44}},进位汉语:{வகை:"இடஞ்சார்",ஒருங்குறி:"hanidec",அடுக்குக்குறி:"幂",குறிகள்:"〇一二三四五六七八九",பிரிப்பு:"。."},花碼:{வகை:"இடஞ்சார்",ஒருங்குறி:null,குறிகள்:"〇〡〢〣〤〥〦〧〨〩"}};var typeDetect$2={exports:{}},typeDetect$1=typeDetect$2.exports,hasRequiredTypeDetect;function requireTypeDetect(){return hasRequiredTypeDetect||(hasRequiredTypeDetect=1,function(n,r){(function(g,_){n.exports=_()})(typeDetect$1,function(){var g=typeof Promise=="function",_=function(X){if(typeof globalThis=="object")return globalThis;Object.defineProperty(X,"typeDetectGlobalObject",{get:function(){return this},configurable:!0});var ie=typeDetectGlobalObject;return delete X.typeDetectGlobalObject,ie}(Object.prototype),x=typeof Symbol<"u",S=typeof Map<"u",E=typeof Set<"u",C=typeof WeakMap<"u",T=typeof WeakSet<"u",R=typeof DataView<"u",A=x&&typeof Symbol.iterator<"u",I=x&&typeof Symbol.toStringTag<"u",B=E&&typeof Set.prototype.entries=="function",D=S&&typeof Map.prototype.entries=="function",N=B&&Object.getPrototypeOf(new Set().entries()),M=D&&Object.getPrototypeOf(new Map().entries()),O=A&&typeof Array.prototype[Symbol.iterator]=="function",L=O&&Object.getPrototypeOf([][Symbol.iterator]()),F=A&&typeof String.prototype[Symbol.iterator]=="function",U=F&&Object.getPrototypeOf(""[Symbol.iterator]()),j=8,z=-1;function W(X){var ie=typeof X;if(ie!=="object")return ie;if(X===null)return"null";if(X===_)return"global";if(Array.isArray(X)&&(I===!1||!(Symbol.toStringTag in X)))return"Array";if(typeof window=="object"&&window!==null){if(typeof window.location=="object"&&X===window.location)return"Location";if(typeof window.document=="object"&&X===window.document)return"Document";if(typeof window.navigator=="object"){if(typeof window.navigator.mimeTypes=="object"&&X===window.navigator.mimeTypes)return"MimeTypeArray";if(typeof window.navigator.plugins=="object"&&X===window.navigator.plugins)return"PluginArray"}if((typeof window.HTMLElement=="function"||typeof window.HTMLElement=="object")&&X instanceof window.HTMLElement){if(X.tagName==="BLOCKQUOTE")return"HTMLQuoteElement";if(X.tagName==="TD")return"HTMLTableDataCellElement";if(X.tagName==="TH")return"HTMLTableHeaderCellElement"}}var fe=I&&X[Symbol.toStringTag];if(typeof fe=="string")return fe;var xe=Object.getPrototypeOf(X);return xe===RegExp.prototype?"RegExp":xe===Date.prototype?"Date":g&&xe===Promise.prototype?"Promise":E&&xe===Set.prototype?"Set":S&&xe===Map.prototype?"Map":T&&xe===WeakSet.prototype?"WeakSet":C&&xe===WeakMap.prototype?"WeakMap":R&&xe===DataView.prototype?"DataView":S&&xe===M?"Map Iterator":E&&xe===N?"Set Iterator":O&&xe===L?"Array Iterator":F&&xe===U?"String Iterator":xe===null?"Object":Object.prototype.toString.call(X).slice(j,z)}return W})}(typeDetect$2)),typeDetect$2.exports}var typeDetectExports=requireTypeDetect();const typeDetect=getDefaultExportFromCjs(typeDetectExports),isBufferExists=typeof Buffer$1<"u",isBufferFromExists=isBufferExists&&typeof Buffer$1.from<"u",isBuffer$1=isBufferExists?function(r){return Buffer$1.isBuffer(r)}:function(){return!1},copy$2=isBufferFromExists?function(r){return Buffer$1.from(r)}:isBufferExists?function(r){return new Buffer$1(r)}:function(r){return r};function detectType(n){return isBuffer$1(n)?"Buffer":typeDetect(n)}const collectionTypeSet=new Set(["Arguments","Array","Map","Object","Set"]);function get$1(n,r,g=null){switch(g||detectType(n)){case"Arguments":case"Array":case"Object":return n[r];case"Map":return n.get(r);case"Set":return r}}function isCollection(n){return collectionTypeSet.has(n)}function set$1(n,r,g,_=null){switch(_||detectType(n)){case"Arguments":case"Array":case"Object":n[r]=g;break;case"Map":n.set(r,g);break;case"Set":n.add(g);break}return n}const freeGlobalThis=typeof globalThis<"u"&&globalThis!==null&&globalThis.Object===Object&&globalThis,freeGlobal$1=typeof global$1<"u"&&global$1!==null&&global$1.Object===Object&&global$1,freeSelf$1=typeof self<"u"&&self!==null&&self.Object===Object&&self,globalObject=freeGlobalThis||freeGlobal$1||freeSelf$1||Function("return this")();function copyArrayBuffer(n){return n.slice(0)}function copyBoolean(n){return new Boolean(n.valueOf())}function copyDataView(n){return new DataView(n.buffer)}function copyBuffer(n){return copy$2(n)}function copyDate(n){return new Date(n.getTime())}function copyNumber(n){return new Number(n)}function copyRegExp(n){return new RegExp(n.source,n.flags)}function copyString(n){return new String(n)}function copyTypedArray(n,r){return globalObject[r].from?globalObject[r].from(n):new globalObject[r](n)}function shallowCopy(n){return n}function getEmptyArray(){return[]}function getEmptyMap(){return new Map}function getEmptyObject(){return{}}function getEmptySet(){return new Set}const copyMap=new Map([["ArrayBuffer",copyArrayBuffer],["Boolean",copyBoolean],["Buffer",copyBuffer],["DataView",copyDataView],["Date",copyDate],["Number",copyNumber],["RegExp",copyRegExp],["String",copyString],["Float32Array",copyTypedArray],["Float64Array",copyTypedArray],["Int16Array",copyTypedArray],["Int32Array",copyTypedArray],["Int8Array",copyTypedArray],["Uint16Array",copyTypedArray],["Uint32Array",copyTypedArray],["Uint8Array",copyTypedArray],["Uint8ClampedArray",copyTypedArray],["Array Iterator",shallowCopy],["Map Iterator",shallowCopy],["Promise",shallowCopy],["Set Iterator",shallowCopy],["String Iterator",shallowCopy],["function",shallowCopy],["global",shallowCopy],["WeakMap",shallowCopy],["WeakSet",shallowCopy],["boolean",shallowCopy],["null",shallowCopy],["number",shallowCopy],["string",shallowCopy],["symbol",shallowCopy],["undefined",shallowCopy],["Arguments",getEmptyArray],["Array",getEmptyArray],["Map",getEmptyMap],["Object",getEmptyObject],["Set",getEmptySet]]);function noop$3(){}function copy$1(n,r=null,g=noop$3){arguments.length===2&&typeof r=="function"&&(g=r,r=null);const _=r||detectType(n),x=copyMap.get(_);if(_==="Object"){const S=g(n,_);if(S!==void 0)return S}return x?x(n,_):n}function deepcopy(n,r={}){typeof r=="function"&&(r={customizer:r});const{customizer:g}=r,_=detectType(n);if(!isCollection(_))return recursiveCopy(n,null,null,null);const x=copy$1(n,_,g),S=new WeakMap([[n,x]]),E=new WeakSet([n]);return recursiveCopy(n,x,S,E)}function recursiveCopy(n,r,g,_,x){const S=detectType(n),E=copy$1(n,S);if(!isCollection(S))return E;let C;switch(S){case"Arguments":case"Array":C=Object.keys(n);break;case"Object":C=Object.keys(n),C.push(...Object.getOwnPropertySymbols(n));break;case"Map":case"Set":C=n.keys();break}for(let T of C){const R=get$1(n,T,S);if(_.has(R))set$1(r,T,g.get(R),S);else{const A=detectType(R),I=copy$1(R,A);isCollection(A)&&(g.set(R,I),_.add(R)),set$1(r,T,recursiveCopy(R,I,g,_),S)}}return r}function commonjsRequire(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var jszip_min={exports:{}},hasRequiredJszip_min;function requireJszip_min(){return hasRequiredJszip_min||(hasRequiredJszip_min=1,function(n,r){(function(g){n.exports=g()})(function(){return function g(_,x,S){function E(R,A){if(!x[R]){if(!_[R]){var I=typeof commonjsRequire=="function"&&commonjsRequire;if(!A&&I)return I(R,!0);if(C)return C(R,!0);var B=new Error("Cannot find module '"+R+"'");throw B.code="MODULE_NOT_FOUND",B}var D=x[R]={exports:{}};_[R][0].call(D.exports,function(N){var M=_[R][1][N];return E(M||N)},D,D.exports,g,_,x,S)}return x[R].exports}for(var C=typeof commonjsRequire=="function"&&commonjsRequire,T=0;T<S.length;T++)E(S[T]);return E}({1:[function(g,_,x){var S=g("./utils"),E=g("./support"),C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";x.encode=function(T){for(var R,A,I,B,D,N,M,O=[],L=0,F=T.length,U=F,j=S.getTypeOf(T)!=="string";L<T.length;)U=F-L,I=j?(R=T[L++],A=L<F?T[L++]:0,L<F?T[L++]:0):(R=T.charCodeAt(L++),A=L<F?T.charCodeAt(L++):0,L<F?T.charCodeAt(L++):0),B=R>>2,D=(3&R)<<4|A>>4,N=1<U?(15&A)<<2|I>>6:64,M=2<U?63&I:64,O.push(C.charAt(B)+C.charAt(D)+C.charAt(N)+C.charAt(M));return O.join("")},x.decode=function(T){var R,A,I,B,D,N,M=0,O=0,L="data:";if(T.substr(0,L.length)===L)throw new Error("Invalid base64 input, it looks like a data url.");var F,U=3*(T=T.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(T.charAt(T.length-1)===C.charAt(64)&&U--,T.charAt(T.length-2)===C.charAt(64)&&U--,U%1!=0)throw new Error("Invalid base64 input, bad content length.");for(F=E.uint8array?new Uint8Array(0|U):new Array(0|U);M<T.length;)R=C.indexOf(T.charAt(M++))<<2|(B=C.indexOf(T.charAt(M++)))>>4,A=(15&B)<<4|(D=C.indexOf(T.charAt(M++)))>>2,I=(3&D)<<6|(N=C.indexOf(T.charAt(M++))),F[O++]=R,D!==64&&(F[O++]=A),N!==64&&(F[O++]=I);return F}},{"./support":30,"./utils":32}],2:[function(g,_,x){var S=g("./external"),E=g("./stream/DataWorker"),C=g("./stream/Crc32Probe"),T=g("./stream/DataLengthProbe");function R(A,I,B,D,N){this.compressedSize=A,this.uncompressedSize=I,this.crc32=B,this.compression=D,this.compressedContent=N}R.prototype={getContentWorker:function(){var A=new E(S.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new T("data_length")),I=this;return A.on("end",function(){if(this.streamInfo.data_length!==I.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),A},getCompressedWorker:function(){return new E(S.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},R.createWorkerFrom=function(A,I,B){return A.pipe(new C).pipe(new T("uncompressedSize")).pipe(I.compressWorker(B)).pipe(new T("compressedSize")).withStreamInfo("compression",I)},_.exports=R},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(g,_,x){var S=g("./stream/GenericWorker");x.STORE={magic:"\0\0",compressWorker:function(){return new S("STORE compression")},uncompressWorker:function(){return new S("STORE decompression")}},x.DEFLATE=g("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(g,_,x){var S=g("./utils"),E=function(){for(var C,T=[],R=0;R<256;R++){C=R;for(var A=0;A<8;A++)C=1&C?3988292384^C>>>1:C>>>1;T[R]=C}return T}();_.exports=function(C,T){return C!==void 0&&C.length?S.getTypeOf(C)!=="string"?function(R,A,I,B){var D=E,N=B+I;R^=-1;for(var M=B;M<N;M++)R=R>>>8^D[255&(R^A[M])];return-1^R}(0|T,C,C.length,0):function(R,A,I,B){var D=E,N=B+I;R^=-1;for(var M=B;M<N;M++)R=R>>>8^D[255&(R^A.charCodeAt(M))];return-1^R}(0|T,C,C.length,0):0}},{"./utils":32}],5:[function(g,_,x){x.base64=!1,x.binary=!1,x.dir=!1,x.createFolders=!0,x.date=null,x.compression=null,x.compressionOptions=null,x.comment=null,x.unixPermissions=null,x.dosPermissions=null},{}],6:[function(g,_,x){var S=null;S=typeof Promise<"u"?Promise:g("lie"),_.exports={Promise:S}},{lie:37}],7:[function(g,_,x){var S=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",E=g("pako"),C=g("./utils"),T=g("./stream/GenericWorker"),R=S?"uint8array":"array";function A(I,B){T.call(this,"FlateWorker/"+I),this._pako=null,this._pakoAction=I,this._pakoOptions=B,this.meta={}}x.magic="\b\0",C.inherits(A,T),A.prototype.processChunk=function(I){this.meta=I.meta,this._pako===null&&this._createPako(),this._pako.push(C.transformTo(R,I.data),!1)},A.prototype.flush=function(){T.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},A.prototype.cleanUp=function(){T.prototype.cleanUp.call(this),this._pako=null},A.prototype._createPako=function(){this._pako=new E[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var I=this;this._pako.onData=function(B){I.push({data:B,meta:I.meta})}},x.compressWorker=function(I){return new A("Deflate",I)},x.uncompressWorker=function(){return new A("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(g,_,x){function S(D,N){var M,O="";for(M=0;M<N;M++)O+=String.fromCharCode(255&D),D>>>=8;return O}function E(D,N,M,O,L,F){var U,j,z=D.file,W=D.compression,X=F!==R.utf8encode,ie=C.transformTo("string",F(z.name)),fe=C.transformTo("string",R.utf8encode(z.name)),xe=z.comment,we=C.transformTo("string",F(xe)),G=C.transformTo("string",R.utf8encode(xe)),J=fe.length!==z.name.length,q=G.length!==xe.length,H="",ve="",Z="",ce=z.dir,ue=z.date,se={crc32:0,compressedSize:0,uncompressedSize:0};N&&!M||(se.crc32=D.crc32,se.compressedSize=D.compressedSize,se.uncompressedSize=D.uncompressedSize);var te=0;N&&(te|=8),X||!J&&!q||(te|=2048);var Y=0,be=0;ce&&(Y|=16),L==="UNIX"?(be=798,Y|=function(Ie,ke){var Ce=Ie;return Ie||(Ce=ke?16893:33204),(65535&Ce)<<16}(z.unixPermissions,ce)):(be=20,Y|=function(Ie){return 63&(Ie||0)}(z.dosPermissions)),U=ue.getUTCHours(),U<<=6,U|=ue.getUTCMinutes(),U<<=5,U|=ue.getUTCSeconds()/2,j=ue.getUTCFullYear()-1980,j<<=4,j|=ue.getUTCMonth()+1,j<<=5,j|=ue.getUTCDate(),J&&(ve=S(1,1)+S(A(ie),4)+fe,H+="up"+S(ve.length,2)+ve),q&&(Z=S(1,1)+S(A(we),4)+G,H+="uc"+S(Z.length,2)+Z);var ye="";return ye+=`
\0`,ye+=S(te,2),ye+=W.magic,ye+=S(U,2),ye+=S(j,2),ye+=S(se.crc32,4),ye+=S(se.compressedSize,4),ye+=S(se.uncompressedSize,4),ye+=S(ie.length,2),ye+=S(H.length,2),{fileRecord:I.LOCAL_FILE_HEADER+ye+ie+H,dirRecord:I.CENTRAL_FILE_HEADER+S(be,2)+ye+S(we.length,2)+"\0\0\0\0"+S(Y,4)+S(O,4)+ie+H+we}}var C=g("../utils"),T=g("../stream/GenericWorker"),R=g("../utf8"),A=g("../crc32"),I=g("../signature");function B(D,N,M,O){T.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=N,this.zipPlatform=M,this.encodeFileName=O,this.streamFiles=D,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}C.inherits(B,T),B.prototype.push=function(D){var N=D.meta.percent||0,M=this.entriesCount,O=this._sources.length;this.accumulate?this.contentBuffer.push(D):(this.bytesWritten+=D.data.length,T.prototype.push.call(this,{data:D.data,meta:{currentFile:this.currentFile,percent:M?(N+100*(M-O-1))/M:100}}))},B.prototype.openedSource=function(D){this.currentSourceOffset=this.bytesWritten,this.currentFile=D.file.name;var N=this.streamFiles&&!D.file.dir;if(N){var M=E(D,N,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:M.fileRecord,meta:{percent:0}})}else this.accumulate=!0},B.prototype.closedSource=function(D){this.accumulate=!1;var N=this.streamFiles&&!D.file.dir,M=E(D,N,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(M.dirRecord),N)this.push({data:function(O){return I.DATA_DESCRIPTOR+S(O.crc32,4)+S(O.compressedSize,4)+S(O.uncompressedSize,4)}(D),meta:{percent:100}});else for(this.push({data:M.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},B.prototype.flush=function(){for(var D=this.bytesWritten,N=0;N<this.dirRecords.length;N++)this.push({data:this.dirRecords[N],meta:{percent:100}});var M=this.bytesWritten-D,O=function(L,F,U,j,z){var W=C.transformTo("string",z(j));return I.CENTRAL_DIRECTORY_END+"\0\0\0\0"+S(L,2)+S(L,2)+S(F,4)+S(U,4)+S(W.length,2)+W}(this.dirRecords.length,M,D,this.zipComment,this.encodeFileName);this.push({data:O,meta:{percent:100}})},B.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},B.prototype.registerPrevious=function(D){this._sources.push(D);var N=this;return D.on("data",function(M){N.processChunk(M)}),D.on("end",function(){N.closedSource(N.previous.streamInfo),N._sources.length?N.prepareNextSource():N.end()}),D.on("error",function(M){N.error(M)}),this},B.prototype.resume=function(){return!!T.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},B.prototype.error=function(D){var N=this._sources;if(!T.prototype.error.call(this,D))return!1;for(var M=0;M<N.length;M++)try{N[M].error(D)}catch{}return!0},B.prototype.lock=function(){T.prototype.lock.call(this);for(var D=this._sources,N=0;N<D.length;N++)D[N].lock()},_.exports=B},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(g,_,x){var S=g("../compressions"),E=g("./ZipFileWorker");x.generateWorker=function(C,T,R){var A=new E(T.streamFiles,R,T.platform,T.encodeFileName),I=0;try{C.forEach(function(B,D){I++;var N=function(F,U){var j=F||U,z=S[j];if(!z)throw new Error(j+" is not a valid compression method !");return z}(D.options.compression,T.compression),M=D.options.compressionOptions||T.compressionOptions||{},O=D.dir,L=D.date;D._compressWorker(N,M).withStreamInfo("file",{name:B,dir:O,date:L,comment:D.comment||"",unixPermissions:D.unixPermissions,dosPermissions:D.dosPermissions}).pipe(A)}),A.entriesCount=I}catch(B){A.error(B)}return A}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(g,_,x){function S(){if(!(this instanceof S))return new S;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var E=new S;for(var C in this)typeof this[C]!="function"&&(E[C]=this[C]);return E}}(S.prototype=g("./object")).loadAsync=g("./load"),S.support=g("./support"),S.defaults=g("./defaults"),S.version="3.10.1",S.loadAsync=function(E,C){return new S().loadAsync(E,C)},S.external=g("./external"),_.exports=S},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(g,_,x){var S=g("./utils"),E=g("./external"),C=g("./utf8"),T=g("./zipEntries"),R=g("./stream/Crc32Probe"),A=g("./nodejsUtils");function I(B){return new E.Promise(function(D,N){var M=B.decompressed.getContentWorker().pipe(new R);M.on("error",function(O){N(O)}).on("end",function(){M.streamInfo.crc32!==B.decompressed.crc32?N(new Error("Corrupted zip : CRC32 mismatch")):D()}).resume()})}_.exports=function(B,D){var N=this;return D=S.extend(D||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:C.utf8decode}),A.isNode&&A.isStream(B)?E.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):S.prepareContent("the loaded zip file",B,!0,D.optimizedBinaryString,D.base64).then(function(M){var O=new T(D);return O.load(M),O}).then(function(M){var O=[E.Promise.resolve(M)],L=M.files;if(D.checkCRC32)for(var F=0;F<L.length;F++)O.push(I(L[F]));return E.Promise.all(O)}).then(function(M){for(var O=M.shift(),L=O.files,F=0;F<L.length;F++){var U=L[F],j=U.fileNameStr,z=S.resolve(U.fileNameStr);N.file(z,U.decompressed,{binary:!0,optimizedBinaryString:!0,date:U.date,dir:U.dir,comment:U.fileCommentStr.length?U.fileCommentStr:null,unixPermissions:U.unixPermissions,dosPermissions:U.dosPermissions,createFolders:D.createFolders}),U.dir||(N.file(z).unsafeOriginalName=j)}return O.zipComment.length&&(N.comment=O.zipComment),N})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(g,_,x){var S=g("../utils"),E=g("../stream/GenericWorker");function C(T,R){E.call(this,"Nodejs stream input adapter for "+T),this._upstreamEnded=!1,this._bindStream(R)}S.inherits(C,E),C.prototype._bindStream=function(T){var R=this;(this._stream=T).pause(),T.on("data",function(A){R.push({data:A,meta:{percent:0}})}).on("error",function(A){R.isPaused?this.generatedError=A:R.error(A)}).on("end",function(){R.isPaused?R._upstreamEnded=!0:R.end()})},C.prototype.pause=function(){return!!E.prototype.pause.call(this)&&(this._stream.pause(),!0)},C.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},_.exports=C},{"../stream/GenericWorker":28,"../utils":32}],13:[function(g,_,x){var S=g("readable-stream").Readable;function E(C,T,R){S.call(this,T),this._helper=C;var A=this;C.on("data",function(I,B){A.push(I)||A._helper.pause(),R&&R(B)}).on("error",function(I){A.emit("error",I)}).on("end",function(){A.push(null)})}g("../utils").inherits(E,S),E.prototype._read=function(){this._helper.resume()},_.exports=E},{"../utils":32,"readable-stream":16}],14:[function(g,_,x){_.exports={isNode:typeof Buffer$1<"u",newBufferFrom:function(S,E){if(Buffer$1.from&&Buffer$1.from!==Uint8Array.from)return Buffer$1.from(S,E);if(typeof S=="number")throw new Error('The "data" argument must not be a number');return new Buffer$1(S,E)},allocBuffer:function(S){if(Buffer$1.alloc)return Buffer$1.alloc(S);var E=new Buffer$1(S);return E.fill(0),E},isBuffer:function(S){return Buffer$1.isBuffer(S)},isStream:function(S){return S&&typeof S.on=="function"&&typeof S.pause=="function"&&typeof S.resume=="function"}}},{}],15:[function(g,_,x){function S(z,W,X){var ie,fe=C.getTypeOf(W),xe=C.extend(X||{},A);xe.date=xe.date||new Date,xe.compression!==null&&(xe.compression=xe.compression.toUpperCase()),typeof xe.unixPermissions=="string"&&(xe.unixPermissions=parseInt(xe.unixPermissions,8)),xe.unixPermissions&&16384&xe.unixPermissions&&(xe.dir=!0),xe.dosPermissions&&16&xe.dosPermissions&&(xe.dir=!0),xe.dir&&(z=L(z)),xe.createFolders&&(ie=O(z))&&F.call(this,ie,!0);var we=fe==="string"&&xe.binary===!1&&xe.base64===!1;X&&X.binary!==void 0||(xe.binary=!we),(W instanceof I&&W.uncompressedSize===0||xe.dir||!W||W.length===0)&&(xe.base64=!1,xe.binary=!0,W="",xe.compression="STORE",fe="string");var G=null;G=W instanceof I||W instanceof T?W:N.isNode&&N.isStream(W)?new M(z,W):C.prepareContent(z,W,xe.binary,xe.optimizedBinaryString,xe.base64);var J=new B(z,G,xe);this.files[z]=J}var E=g("./utf8"),C=g("./utils"),T=g("./stream/GenericWorker"),R=g("./stream/StreamHelper"),A=g("./defaults"),I=g("./compressedObject"),B=g("./zipObject"),D=g("./generate"),N=g("./nodejsUtils"),M=g("./nodejs/NodejsStreamInputAdapter"),O=function(z){z.slice(-1)==="/"&&(z=z.substring(0,z.length-1));var W=z.lastIndexOf("/");return 0<W?z.substring(0,W):""},L=function(z){return z.slice(-1)!=="/"&&(z+="/"),z},F=function(z,W){return W=W!==void 0?W:A.createFolders,z=L(z),this.files[z]||S.call(this,z,null,{dir:!0,createFolders:W}),this.files[z]};function U(z){return Object.prototype.toString.call(z)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(z){var W,X,ie;for(W in this.files)ie=this.files[W],(X=W.slice(this.root.length,W.length))&&W.slice(0,this.root.length)===this.root&&z(X,ie)},filter:function(z){var W=[];return this.forEach(function(X,ie){z(X,ie)&&W.push(ie)}),W},file:function(z,W,X){if(arguments.length!==1)return z=this.root+z,S.call(this,z,W,X),this;if(U(z)){var ie=z;return this.filter(function(xe,we){return!we.dir&&ie.test(xe)})}var fe=this.files[this.root+z];return fe&&!fe.dir?fe:null},folder:function(z){if(!z)return this;if(U(z))return this.filter(function(fe,xe){return xe.dir&&z.test(fe)});var W=this.root+z,X=F.call(this,W),ie=this.clone();return ie.root=X.name,ie},remove:function(z){z=this.root+z;var W=this.files[z];if(W||(z.slice(-1)!=="/"&&(z+="/"),W=this.files[z]),W&&!W.dir)delete this.files[z];else for(var X=this.filter(function(fe,xe){return xe.name.slice(0,z.length)===z}),ie=0;ie<X.length;ie++)delete this.files[X[ie].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(z){var W,X={};try{if((X=C.extend(z||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:E.utf8encode})).type=X.type.toLowerCase(),X.compression=X.compression.toUpperCase(),X.type==="binarystring"&&(X.type="string"),!X.type)throw new Error("No output type specified.");C.checkSupport(X.type),X.platform!=="darwin"&&X.platform!=="freebsd"&&X.platform!=="linux"&&X.platform!=="sunos"||(X.platform="UNIX"),X.platform==="win32"&&(X.platform="DOS");var ie=X.comment||this.comment||"";W=D.generateWorker(this,X,ie)}catch(fe){(W=new T("error")).error(fe)}return new R(W,X.type||"string",X.mimeType)},generateAsync:function(z,W){return this.generateInternalStream(z).accumulate(W)},generateNodeStream:function(z,W){return(z=z||{}).type||(z.type="nodebuffer"),this.generateInternalStream(z).toNodejsStream(W)}};_.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(g,_,x){_.exports=g("stream")},{stream:void 0}],17:[function(g,_,x){var S=g("./DataReader");function E(C){S.call(this,C);for(var T=0;T<this.data.length;T++)C[T]=255&C[T]}g("../utils").inherits(E,S),E.prototype.byteAt=function(C){return this.data[this.zero+C]},E.prototype.lastIndexOfSignature=function(C){for(var T=C.charCodeAt(0),R=C.charCodeAt(1),A=C.charCodeAt(2),I=C.charCodeAt(3),B=this.length-4;0<=B;--B)if(this.data[B]===T&&this.data[B+1]===R&&this.data[B+2]===A&&this.data[B+3]===I)return B-this.zero;return-1},E.prototype.readAndCheckSignature=function(C){var T=C.charCodeAt(0),R=C.charCodeAt(1),A=C.charCodeAt(2),I=C.charCodeAt(3),B=this.readData(4);return T===B[0]&&R===B[1]&&A===B[2]&&I===B[3]},E.prototype.readData=function(C){if(this.checkOffset(C),C===0)return[];var T=this.data.slice(this.zero+this.index,this.zero+this.index+C);return this.index+=C,T},_.exports=E},{"../utils":32,"./DataReader":18}],18:[function(g,_,x){var S=g("../utils");function E(C){this.data=C,this.length=C.length,this.index=0,this.zero=0}E.prototype={checkOffset:function(C){this.checkIndex(this.index+C)},checkIndex:function(C){if(this.length<this.zero+C||C<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+C+"). Corrupted zip ?")},setIndex:function(C){this.checkIndex(C),this.index=C},skip:function(C){this.setIndex(this.index+C)},byteAt:function(){},readInt:function(C){var T,R=0;for(this.checkOffset(C),T=this.index+C-1;T>=this.index;T--)R=(R<<8)+this.byteAt(T);return this.index+=C,R},readString:function(C){return S.transformTo("string",this.readData(C))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var C=this.readInt(4);return new Date(Date.UTC(1980+(C>>25&127),(C>>21&15)-1,C>>16&31,C>>11&31,C>>5&63,(31&C)<<1))}},_.exports=E},{"../utils":32}],19:[function(g,_,x){var S=g("./Uint8ArrayReader");function E(C){S.call(this,C)}g("../utils").inherits(E,S),E.prototype.readData=function(C){this.checkOffset(C);var T=this.data.slice(this.zero+this.index,this.zero+this.index+C);return this.index+=C,T},_.exports=E},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(g,_,x){var S=g("./DataReader");function E(C){S.call(this,C)}g("../utils").inherits(E,S),E.prototype.byteAt=function(C){return this.data.charCodeAt(this.zero+C)},E.prototype.lastIndexOfSignature=function(C){return this.data.lastIndexOf(C)-this.zero},E.prototype.readAndCheckSignature=function(C){return C===this.readData(4)},E.prototype.readData=function(C){this.checkOffset(C);var T=this.data.slice(this.zero+this.index,this.zero+this.index+C);return this.index+=C,T},_.exports=E},{"../utils":32,"./DataReader":18}],21:[function(g,_,x){var S=g("./ArrayReader");function E(C){S.call(this,C)}g("../utils").inherits(E,S),E.prototype.readData=function(C){if(this.checkOffset(C),C===0)return new Uint8Array(0);var T=this.data.subarray(this.zero+this.index,this.zero+this.index+C);return this.index+=C,T},_.exports=E},{"../utils":32,"./ArrayReader":17}],22:[function(g,_,x){var S=g("../utils"),E=g("../support"),C=g("./ArrayReader"),T=g("./StringReader"),R=g("./NodeBufferReader"),A=g("./Uint8ArrayReader");_.exports=function(I){var B=S.getTypeOf(I);return S.checkSupport(B),B!=="string"||E.uint8array?B==="nodebuffer"?new R(I):E.uint8array?new A(S.transformTo("uint8array",I)):new C(S.transformTo("array",I)):new T(I)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(g,_,x){x.LOCAL_FILE_HEADER="PK",x.CENTRAL_FILE_HEADER="PK",x.CENTRAL_DIRECTORY_END="PK",x.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",x.ZIP64_CENTRAL_DIRECTORY_END="PK",x.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(g,_,x){var S=g("./GenericWorker"),E=g("../utils");function C(T){S.call(this,"ConvertWorker to "+T),this.destType=T}E.inherits(C,S),C.prototype.processChunk=function(T){this.push({data:E.transformTo(this.destType,T.data),meta:T.meta})},_.exports=C},{"../utils":32,"./GenericWorker":28}],25:[function(g,_,x){var S=g("./GenericWorker"),E=g("../crc32");function C(){S.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}g("../utils").inherits(C,S),C.prototype.processChunk=function(T){this.streamInfo.crc32=E(T.data,this.streamInfo.crc32||0),this.push(T)},_.exports=C},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(g,_,x){var S=g("../utils"),E=g("./GenericWorker");function C(T){E.call(this,"DataLengthProbe for "+T),this.propName=T,this.withStreamInfo(T,0)}S.inherits(C,E),C.prototype.processChunk=function(T){if(T){var R=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=R+T.data.length}E.prototype.processChunk.call(this,T)},_.exports=C},{"../utils":32,"./GenericWorker":28}],27:[function(g,_,x){var S=g("../utils"),E=g("./GenericWorker");function C(T){E.call(this,"DataWorker");var R=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,T.then(function(A){R.dataIsReady=!0,R.data=A,R.max=A&&A.length||0,R.type=S.getTypeOf(A),R.isPaused||R._tickAndRepeat()},function(A){R.error(A)})}S.inherits(C,E),C.prototype.cleanUp=function(){E.prototype.cleanUp.call(this),this.data=null},C.prototype.resume=function(){return!!E.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,S.delay(this._tickAndRepeat,[],this)),!0)},C.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(S.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},C.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var T=null,R=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":T=this.data.substring(this.index,R);break;case"uint8array":T=this.data.subarray(this.index,R);break;case"array":case"nodebuffer":T=this.data.slice(this.index,R)}return this.index=R,this.push({data:T,meta:{percent:this.max?this.index/this.max*100:0}})},_.exports=C},{"../utils":32,"./GenericWorker":28}],28:[function(g,_,x){function S(E){this.name=E||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}S.prototype={push:function(E){this.emit("data",E)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(E){this.emit("error",E)}return!0},error:function(E){return!this.isFinished&&(this.isPaused?this.generatedError=E:(this.isFinished=!0,this.emit("error",E),this.previous&&this.previous.error(E),this.cleanUp()),!0)},on:function(E,C){return this._listeners[E].push(C),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(E,C){if(this._listeners[E])for(var T=0;T<this._listeners[E].length;T++)this._listeners[E][T].call(this,C)},pipe:function(E){return E.registerPrevious(this)},registerPrevious:function(E){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=E.streamInfo,this.mergeStreamInfo(),this.previous=E;var C=this;return E.on("data",function(T){C.processChunk(T)}),E.on("end",function(){C.end()}),E.on("error",function(T){C.error(T)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var E=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),E=!0),this.previous&&this.previous.resume(),!E},flush:function(){},processChunk:function(E){this.push(E)},withStreamInfo:function(E,C){return this.extraStreamInfo[E]=C,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var E in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,E)&&(this.streamInfo[E]=this.extraStreamInfo[E])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var E="Worker "+this.name;return this.previous?this.previous+" -> "+E:E}},_.exports=S},{}],29:[function(g,_,x){var S=g("../utils"),E=g("./ConvertWorker"),C=g("./GenericWorker"),T=g("../base64"),R=g("../support"),A=g("../external"),I=null;if(R.nodestream)try{I=g("../nodejs/NodejsStreamOutputAdapter")}catch{}function B(N,M){return new A.Promise(function(O,L){var F=[],U=N._internalType,j=N._outputType,z=N._mimeType;N.on("data",function(W,X){F.push(W),M&&M(X)}).on("error",function(W){F=[],L(W)}).on("end",function(){try{var W=function(X,ie,fe){switch(X){case"blob":return S.newBlob(S.transformTo("arraybuffer",ie),fe);case"base64":return T.encode(ie);default:return S.transformTo(X,ie)}}(j,function(X,ie){var fe,xe=0,we=null,G=0;for(fe=0;fe<ie.length;fe++)G+=ie[fe].length;switch(X){case"string":return ie.join("");case"array":return Array.prototype.concat.apply([],ie);case"uint8array":for(we=new Uint8Array(G),fe=0;fe<ie.length;fe++)we.set(ie[fe],xe),xe+=ie[fe].length;return we;case"nodebuffer":return Buffer$1.concat(ie);default:throw new Error("concat : unsupported type '"+X+"'")}}(U,F),z);O(W)}catch(X){L(X)}F=[]}).resume()})}function D(N,M,O){var L=M;switch(M){case"blob":case"arraybuffer":L="uint8array";break;case"base64":L="string"}try{this._internalType=L,this._outputType=M,this._mimeType=O,S.checkSupport(L),this._worker=N.pipe(new E(L)),N.lock()}catch(F){this._worker=new C("error"),this._worker.error(F)}}D.prototype={accumulate:function(N){return B(this,N)},on:function(N,M){var O=this;return N==="data"?this._worker.on(N,function(L){M.call(O,L.data,L.meta)}):this._worker.on(N,function(){S.delay(M,arguments,O)}),this},resume:function(){return S.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(N){if(S.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new I(this,{objectMode:this._outputType!=="nodebuffer"},N)}},_.exports=D},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(g,_,x){if(x.base64=!0,x.array=!0,x.string=!0,x.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",x.nodebuffer=typeof Buffer$1<"u",x.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")x.blob=!1;else{var S=new ArrayBuffer(0);try{x.blob=new Blob([S],{type:"application/zip"}).size===0}catch{try{var E=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);E.append(S),x.blob=E.getBlob("application/zip").size===0}catch{x.blob=!1}}}try{x.nodestream=!!g("readable-stream").Readable}catch{x.nodestream=!1}},{"readable-stream":16}],31:[function(g,_,x){for(var S=g("./utils"),E=g("./support"),C=g("./nodejsUtils"),T=g("./stream/GenericWorker"),R=new Array(256),A=0;A<256;A++)R[A]=252<=A?6:248<=A?5:240<=A?4:224<=A?3:192<=A?2:1;R[254]=R[254]=1;function I(){T.call(this,"utf-8 decode"),this.leftOver=null}function B(){T.call(this,"utf-8 encode")}x.utf8encode=function(D){return E.nodebuffer?C.newBufferFrom(D,"utf-8"):function(N){var M,O,L,F,U,j=N.length,z=0;for(F=0;F<j;F++)(64512&(O=N.charCodeAt(F)))==55296&&F+1<j&&(64512&(L=N.charCodeAt(F+1)))==56320&&(O=65536+(O-55296<<10)+(L-56320),F++),z+=O<128?1:O<2048?2:O<65536?3:4;for(M=E.uint8array?new Uint8Array(z):new Array(z),F=U=0;U<z;F++)(64512&(O=N.charCodeAt(F)))==55296&&F+1<j&&(64512&(L=N.charCodeAt(F+1)))==56320&&(O=65536+(O-55296<<10)+(L-56320),F++),O<128?M[U++]=O:(O<2048?M[U++]=192|O>>>6:(O<65536?M[U++]=224|O>>>12:(M[U++]=240|O>>>18,M[U++]=128|O>>>12&63),M[U++]=128|O>>>6&63),M[U++]=128|63&O);return M}(D)},x.utf8decode=function(D){return E.nodebuffer?S.transformTo("nodebuffer",D).toString("utf-8"):function(N){var M,O,L,F,U=N.length,j=new Array(2*U);for(M=O=0;M<U;)if((L=N[M++])<128)j[O++]=L;else if(4<(F=R[L]))j[O++]=65533,M+=F-1;else{for(L&=F===2?31:F===3?15:7;1<F&&M<U;)L=L<<6|63&N[M++],F--;1<F?j[O++]=65533:L<65536?j[O++]=L:(L-=65536,j[O++]=55296|L>>10&1023,j[O++]=56320|1023&L)}return j.length!==O&&(j.subarray?j=j.subarray(0,O):j.length=O),S.applyFromCharCode(j)}(D=S.transformTo(E.uint8array?"uint8array":"array",D))},S.inherits(I,T),I.prototype.processChunk=function(D){var N=S.transformTo(E.uint8array?"uint8array":"array",D.data);if(this.leftOver&&this.leftOver.length){if(E.uint8array){var M=N;(N=new Uint8Array(M.length+this.leftOver.length)).set(this.leftOver,0),N.set(M,this.leftOver.length)}else N=this.leftOver.concat(N);this.leftOver=null}var O=function(F,U){var j;for((U=U||F.length)>F.length&&(U=F.length),j=U-1;0<=j&&(192&F[j])==128;)j--;return j<0||j===0?U:j+R[F[j]]>U?j:U}(N),L=N;O!==N.length&&(E.uint8array?(L=N.subarray(0,O),this.leftOver=N.subarray(O,N.length)):(L=N.slice(0,O),this.leftOver=N.slice(O,N.length))),this.push({data:x.utf8decode(L),meta:D.meta})},I.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:x.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},x.Utf8DecodeWorker=I,S.inherits(B,T),B.prototype.processChunk=function(D){this.push({data:x.utf8encode(D.data),meta:D.meta})},x.Utf8EncodeWorker=B},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(g,_,x){var S=g("./support"),E=g("./base64"),C=g("./nodejsUtils"),T=g("./external");function R(M){return M}function A(M,O){for(var L=0;L<M.length;++L)O[L]=255&M.charCodeAt(L);return O}g("setimmediate"),x.newBlob=function(M,O){x.checkSupport("blob");try{return new Blob([M],{type:O})}catch{try{var L=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return L.append(M),L.getBlob(O)}catch{throw new Error("Bug : can't construct the Blob.")}}};var I={stringifyByChunk:function(M,O,L){var F=[],U=0,j=M.length;if(j<=L)return String.fromCharCode.apply(null,M);for(;U<j;)O==="array"||O==="nodebuffer"?F.push(String.fromCharCode.apply(null,M.slice(U,Math.min(U+L,j)))):F.push(String.fromCharCode.apply(null,M.subarray(U,Math.min(U+L,j)))),U+=L;return F.join("")},stringifyByChar:function(M){for(var O="",L=0;L<M.length;L++)O+=String.fromCharCode(M[L]);return O},applyCanBeUsed:{uint8array:function(){try{return S.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return S.nodebuffer&&String.fromCharCode.apply(null,C.allocBuffer(1)).length===1}catch{return!1}}()}};function B(M){var O=65536,L=x.getTypeOf(M),F=!0;if(L==="uint8array"?F=I.applyCanBeUsed.uint8array:L==="nodebuffer"&&(F=I.applyCanBeUsed.nodebuffer),F)for(;1<O;)try{return I.stringifyByChunk(M,L,O)}catch{O=Math.floor(O/2)}return I.stringifyByChar(M)}function D(M,O){for(var L=0;L<M.length;L++)O[L]=M[L];return O}x.applyFromCharCode=B;var N={};N.string={string:R,array:function(M){return A(M,new Array(M.length))},arraybuffer:function(M){return N.string.uint8array(M).buffer},uint8array:function(M){return A(M,new Uint8Array(M.length))},nodebuffer:function(M){return A(M,C.allocBuffer(M.length))}},N.array={string:B,array:R,arraybuffer:function(M){return new Uint8Array(M).buffer},uint8array:function(M){return new Uint8Array(M)},nodebuffer:function(M){return C.newBufferFrom(M)}},N.arraybuffer={string:function(M){return B(new Uint8Array(M))},array:function(M){return D(new Uint8Array(M),new Array(M.byteLength))},arraybuffer:R,uint8array:function(M){return new Uint8Array(M)},nodebuffer:function(M){return C.newBufferFrom(new Uint8Array(M))}},N.uint8array={string:B,array:function(M){return D(M,new Array(M.length))},arraybuffer:function(M){return M.buffer},uint8array:R,nodebuffer:function(M){return C.newBufferFrom(M)}},N.nodebuffer={string:B,array:function(M){return D(M,new Array(M.length))},arraybuffer:function(M){return N.nodebuffer.uint8array(M).buffer},uint8array:function(M){return D(M,new Uint8Array(M.length))},nodebuffer:R},x.transformTo=function(M,O){if(O=O||"",!M)return O;x.checkSupport(M);var L=x.getTypeOf(O);return N[L][M](O)},x.resolve=function(M){for(var O=M.split("/"),L=[],F=0;F<O.length;F++){var U=O[F];U==="."||U===""&&F!==0&&F!==O.length-1||(U===".."?L.pop():L.push(U))}return L.join("/")},x.getTypeOf=function(M){return typeof M=="string"?"string":Object.prototype.toString.call(M)==="[object Array]"?"array":S.nodebuffer&&C.isBuffer(M)?"nodebuffer":S.uint8array&&M instanceof Uint8Array?"uint8array":S.arraybuffer&&M instanceof ArrayBuffer?"arraybuffer":void 0},x.checkSupport=function(M){if(!S[M.toLowerCase()])throw new Error(M+" is not supported by this platform")},x.MAX_VALUE_16BITS=65535,x.MAX_VALUE_32BITS=-1,x.pretty=function(M){var O,L,F="";for(L=0;L<(M||"").length;L++)F+="\\x"+((O=M.charCodeAt(L))<16?"0":"")+O.toString(16).toUpperCase();return F},x.delay=function(M,O,L){setImmediate(function(){M.apply(L||null,O||[])})},x.inherits=function(M,O){function L(){}L.prototype=O.prototype,M.prototype=new L},x.extend=function(){var M,O,L={};for(M=0;M<arguments.length;M++)for(O in arguments[M])Object.prototype.hasOwnProperty.call(arguments[M],O)&&L[O]===void 0&&(L[O]=arguments[M][O]);return L},x.prepareContent=function(M,O,L,F,U){return T.Promise.resolve(O).then(function(j){return S.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new T.Promise(function(z,W){var X=new FileReader;X.onload=function(ie){z(ie.target.result)},X.onerror=function(ie){W(ie.target.error)},X.readAsArrayBuffer(j)}):j}).then(function(j){var z=x.getTypeOf(j);return z?(z==="arraybuffer"?j=x.transformTo("uint8array",j):z==="string"&&(U?j=E.decode(j):L&&F!==!0&&(j=function(W){return A(W,S.uint8array?new Uint8Array(W.length):new Array(W.length))}(j))),j):T.Promise.reject(new Error("Can't read the data of '"+M+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(g,_,x){var S=g("./reader/readerFor"),E=g("./utils"),C=g("./signature"),T=g("./zipEntry"),R=g("./support");function A(I){this.files=[],this.loadOptions=I}A.prototype={checkSignature:function(I){if(!this.reader.readAndCheckSignature(I)){this.reader.index-=4;var B=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+E.pretty(B)+", expected "+E.pretty(I)+")")}},isSignature:function(I,B){var D=this.reader.index;this.reader.setIndex(I);var N=this.reader.readString(4)===B;return this.reader.setIndex(D),N},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var I=this.reader.readData(this.zipCommentLength),B=R.uint8array?"uint8array":"array",D=E.transformTo(B,I);this.zipComment=this.loadOptions.decodeFileName(D)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var I,B,D,N=this.zip64EndOfCentralSize-44;0<N;)I=this.reader.readInt(2),B=this.reader.readInt(4),D=this.reader.readData(B),this.zip64ExtensibleData[I]={id:I,length:B,value:D}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var I,B;for(I=0;I<this.files.length;I++)B=this.files[I],this.reader.setIndex(B.localHeaderOffset),this.checkSignature(C.LOCAL_FILE_HEADER),B.readLocalPart(this.reader),B.handleUTF8(),B.processAttributes()},readCentralDir:function(){var I;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(C.CENTRAL_FILE_HEADER);)(I=new T({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(I);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var I=this.reader.lastIndexOfSignature(C.CENTRAL_DIRECTORY_END);if(I<0)throw this.isSignature(0,C.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(I);var B=I;if(this.checkSignature(C.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===E.MAX_VALUE_16BITS||this.diskWithCentralDirStart===E.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===E.MAX_VALUE_16BITS||this.centralDirRecords===E.MAX_VALUE_16BITS||this.centralDirSize===E.MAX_VALUE_32BITS||this.centralDirOffset===E.MAX_VALUE_32BITS){if(this.zip64=!0,(I=this.reader.lastIndexOfSignature(C.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(I),this.checkSignature(C.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,C.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(C.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(C.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var D=this.centralDirOffset+this.centralDirSize;this.zip64&&(D+=20,D+=12+this.zip64EndOfCentralSize);var N=B-D;if(0<N)this.isSignature(B,C.CENTRAL_FILE_HEADER)||(this.reader.zero=N);else if(N<0)throw new Error("Corrupted zip: missing "+Math.abs(N)+" bytes.")},prepareReader:function(I){this.reader=S(I)},load:function(I){this.prepareReader(I),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},_.exports=A},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(g,_,x){var S=g("./reader/readerFor"),E=g("./utils"),C=g("./compressedObject"),T=g("./crc32"),R=g("./utf8"),A=g("./compressions"),I=g("./support");function B(D,N){this.options=D,this.loadOptions=N}B.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(D){var N,M;if(D.skip(22),this.fileNameLength=D.readInt(2),M=D.readInt(2),this.fileName=D.readData(this.fileNameLength),D.skip(M),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((N=function(O){for(var L in A)if(Object.prototype.hasOwnProperty.call(A,L)&&A[L].magic===O)return A[L];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+E.pretty(this.compressionMethod)+" unknown (inner file : "+E.transformTo("string",this.fileName)+")");this.decompressed=new C(this.compressedSize,this.uncompressedSize,this.crc32,N,D.readData(this.compressedSize))},readCentralPart:function(D){this.versionMadeBy=D.readInt(2),D.skip(2),this.bitFlag=D.readInt(2),this.compressionMethod=D.readString(2),this.date=D.readDate(),this.crc32=D.readInt(4),this.compressedSize=D.readInt(4),this.uncompressedSize=D.readInt(4);var N=D.readInt(2);if(this.extraFieldsLength=D.readInt(2),this.fileCommentLength=D.readInt(2),this.diskNumberStart=D.readInt(2),this.internalFileAttributes=D.readInt(2),this.externalFileAttributes=D.readInt(4),this.localHeaderOffset=D.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");D.skip(N),this.readExtraFields(D),this.parseZIP64ExtraField(D),this.fileComment=D.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var D=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),D==0&&(this.dosPermissions=63&this.externalFileAttributes),D==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var D=S(this.extraFields[1].value);this.uncompressedSize===E.MAX_VALUE_32BITS&&(this.uncompressedSize=D.readInt(8)),this.compressedSize===E.MAX_VALUE_32BITS&&(this.compressedSize=D.readInt(8)),this.localHeaderOffset===E.MAX_VALUE_32BITS&&(this.localHeaderOffset=D.readInt(8)),this.diskNumberStart===E.MAX_VALUE_32BITS&&(this.diskNumberStart=D.readInt(4))}},readExtraFields:function(D){var N,M,O,L=D.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});D.index+4<L;)N=D.readInt(2),M=D.readInt(2),O=D.readData(M),this.extraFields[N]={id:N,length:M,value:O};D.setIndex(L)},handleUTF8:function(){var D=I.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=R.utf8decode(this.fileName),this.fileCommentStr=R.utf8decode(this.fileComment);else{var N=this.findExtraFieldUnicodePath();if(N!==null)this.fileNameStr=N;else{var M=E.transformTo(D,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(M)}var O=this.findExtraFieldUnicodeComment();if(O!==null)this.fileCommentStr=O;else{var L=E.transformTo(D,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(L)}}},findExtraFieldUnicodePath:function(){var D=this.extraFields[28789];if(D){var N=S(D.value);return N.readInt(1)!==1||T(this.fileName)!==N.readInt(4)?null:R.utf8decode(N.readData(D.length-5))}return null},findExtraFieldUnicodeComment:function(){var D=this.extraFields[25461];if(D){var N=S(D.value);return N.readInt(1)!==1||T(this.fileComment)!==N.readInt(4)?null:R.utf8decode(N.readData(D.length-5))}return null}},_.exports=B},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(g,_,x){function S(N,M,O){this.name=N,this.dir=O.dir,this.date=O.date,this.comment=O.comment,this.unixPermissions=O.unixPermissions,this.dosPermissions=O.dosPermissions,this._data=M,this._dataBinary=O.binary,this.options={compression:O.compression,compressionOptions:O.compressionOptions}}var E=g("./stream/StreamHelper"),C=g("./stream/DataWorker"),T=g("./utf8"),R=g("./compressedObject"),A=g("./stream/GenericWorker");S.prototype={internalStream:function(N){var M=null,O="string";try{if(!N)throw new Error("No output type specified.");var L=(O=N.toLowerCase())==="string"||O==="text";O!=="binarystring"&&O!=="text"||(O="string"),M=this._decompressWorker();var F=!this._dataBinary;F&&!L&&(M=M.pipe(new T.Utf8EncodeWorker)),!F&&L&&(M=M.pipe(new T.Utf8DecodeWorker))}catch(U){(M=new A("error")).error(U)}return new E(M,O,"")},async:function(N,M){return this.internalStream(N).accumulate(M)},nodeStream:function(N,M){return this.internalStream(N||"nodebuffer").toNodejsStream(M)},_compressWorker:function(N,M){if(this._data instanceof R&&this._data.compression.magic===N.magic)return this._data.getCompressedWorker();var O=this._decompressWorker();return this._dataBinary||(O=O.pipe(new T.Utf8EncodeWorker)),R.createWorkerFrom(O,N,M)},_decompressWorker:function(){return this._data instanceof R?this._data.getContentWorker():this._data instanceof A?this._data:new C(this._data)}};for(var I=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],B=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},D=0;D<I.length;D++)S.prototype[I[D]]=B;_.exports=S},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(g,_,x){(function(S){var E,C,T=S.MutationObserver||S.WebKitMutationObserver;if(T){var R=0,A=new T(N),I=S.document.createTextNode("");A.observe(I,{characterData:!0}),E=function(){I.data=R=++R%2}}else if(S.setImmediate||S.MessageChannel===void 0)E="document"in S&&"onreadystatechange"in S.document.createElement("script")?function(){var M=S.document.createElement("script");M.onreadystatechange=function(){N(),M.onreadystatechange=null,M.parentNode.removeChild(M),M=null},S.document.documentElement.appendChild(M)}:function(){setTimeout(N,0)};else{var B=new S.MessageChannel;B.port1.onmessage=N,E=function(){B.port2.postMessage(0)}}var D=[];function N(){var M,O;C=!0;for(var L=D.length;L;){for(O=D,D=[],M=-1;++M<L;)O[M]();L=D.length}C=!1}_.exports=function(M){D.push(M)!==1||C||E()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(g,_,x){var S=g("immediate");function E(){}var C={},T=["REJECTED"],R=["FULFILLED"],A=["PENDING"];function I(L){if(typeof L!="function")throw new TypeError("resolver must be a function");this.state=A,this.queue=[],this.outcome=void 0,L!==E&&M(this,L)}function B(L,F,U){this.promise=L,typeof F=="function"&&(this.onFulfilled=F,this.callFulfilled=this.otherCallFulfilled),typeof U=="function"&&(this.onRejected=U,this.callRejected=this.otherCallRejected)}function D(L,F,U){S(function(){var j;try{j=F(U)}catch(z){return C.reject(L,z)}j===L?C.reject(L,new TypeError("Cannot resolve promise with itself")):C.resolve(L,j)})}function N(L){var F=L&&L.then;if(L&&(typeof L=="object"||typeof L=="function")&&typeof F=="function")return function(){F.apply(L,arguments)}}function M(L,F){var U=!1;function j(X){U||(U=!0,C.reject(L,X))}function z(X){U||(U=!0,C.resolve(L,X))}var W=O(function(){F(z,j)});W.status==="error"&&j(W.value)}function O(L,F){var U={};try{U.value=L(F),U.status="success"}catch(j){U.status="error",U.value=j}return U}(_.exports=I).prototype.finally=function(L){if(typeof L!="function")return this;var F=this.constructor;return this.then(function(U){return F.resolve(L()).then(function(){return U})},function(U){return F.resolve(L()).then(function(){throw U})})},I.prototype.catch=function(L){return this.then(null,L)},I.prototype.then=function(L,F){if(typeof L!="function"&&this.state===R||typeof F!="function"&&this.state===T)return this;var U=new this.constructor(E);return this.state!==A?D(U,this.state===R?L:F,this.outcome):this.queue.push(new B(U,L,F)),U},B.prototype.callFulfilled=function(L){C.resolve(this.promise,L)},B.prototype.otherCallFulfilled=function(L){D(this.promise,this.onFulfilled,L)},B.prototype.callRejected=function(L){C.reject(this.promise,L)},B.prototype.otherCallRejected=function(L){D(this.promise,this.onRejected,L)},C.resolve=function(L,F){var U=O(N,F);if(U.status==="error")return C.reject(L,U.value);var j=U.value;if(j)M(L,j);else{L.state=R,L.outcome=F;for(var z=-1,W=L.queue.length;++z<W;)L.queue[z].callFulfilled(F)}return L},C.reject=function(L,F){L.state=T,L.outcome=F;for(var U=-1,j=L.queue.length;++U<j;)L.queue[U].callRejected(F);return L},I.resolve=function(L){return L instanceof this?L:C.resolve(new this(E),L)},I.reject=function(L){var F=new this(E);return C.reject(F,L)},I.all=function(L){var F=this;if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=L.length,j=!1;if(!U)return this.resolve([]);for(var z=new Array(U),W=0,X=-1,ie=new this(E);++X<U;)fe(L[X],X);return ie;function fe(xe,we){F.resolve(xe).then(function(G){z[we]=G,++W!==U||j||(j=!0,C.resolve(ie,z))},function(G){j||(j=!0,C.reject(ie,G))})}},I.race=function(L){var F=this;if(Object.prototype.toString.call(L)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=L.length,j=!1;if(!U)return this.resolve([]);for(var z=-1,W=new this(E);++z<U;)X=L[z],F.resolve(X).then(function(ie){j||(j=!0,C.resolve(W,ie))},function(ie){j||(j=!0,C.reject(W,ie))});var X;return W}},{immediate:36}],38:[function(g,_,x){var S={};(0,g("./lib/utils/common").assign)(S,g("./lib/deflate"),g("./lib/inflate"),g("./lib/zlib/constants")),_.exports=S},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(g,_,x){var S=g("./zlib/deflate"),E=g("./utils/common"),C=g("./utils/strings"),T=g("./zlib/messages"),R=g("./zlib/zstream"),A=Object.prototype.toString,I=0,B=-1,D=0,N=8;function M(L){if(!(this instanceof M))return new M(L);this.options=E.assign({level:B,method:N,chunkSize:16384,windowBits:15,memLevel:8,strategy:D,to:""},L||{});var F=this.options;F.raw&&0<F.windowBits?F.windowBits=-F.windowBits:F.gzip&&0<F.windowBits&&F.windowBits<16&&(F.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new R,this.strm.avail_out=0;var U=S.deflateInit2(this.strm,F.level,F.method,F.windowBits,F.memLevel,F.strategy);if(U!==I)throw new Error(T[U]);if(F.header&&S.deflateSetHeader(this.strm,F.header),F.dictionary){var j;if(j=typeof F.dictionary=="string"?C.string2buf(F.dictionary):A.call(F.dictionary)==="[object ArrayBuffer]"?new Uint8Array(F.dictionary):F.dictionary,(U=S.deflateSetDictionary(this.strm,j))!==I)throw new Error(T[U]);this._dict_set=!0}}function O(L,F){var U=new M(F);if(U.push(L,!0),U.err)throw U.msg||T[U.err];return U.result}M.prototype.push=function(L,F){var U,j,z=this.strm,W=this.options.chunkSize;if(this.ended)return!1;j=F===~~F?F:F===!0?4:0,typeof L=="string"?z.input=C.string2buf(L):A.call(L)==="[object ArrayBuffer]"?z.input=new Uint8Array(L):z.input=L,z.next_in=0,z.avail_in=z.input.length;do{if(z.avail_out===0&&(z.output=new E.Buf8(W),z.next_out=0,z.avail_out=W),(U=S.deflate(z,j))!==1&&U!==I)return this.onEnd(U),!(this.ended=!0);z.avail_out!==0&&(z.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(C.buf2binstring(E.shrinkBuf(z.output,z.next_out))):this.onData(E.shrinkBuf(z.output,z.next_out)))}while((0<z.avail_in||z.avail_out===0)&&U!==1);return j===4?(U=S.deflateEnd(this.strm),this.onEnd(U),this.ended=!0,U===I):j!==2||(this.onEnd(I),!(z.avail_out=0))},M.prototype.onData=function(L){this.chunks.push(L)},M.prototype.onEnd=function(L){L===I&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=L,this.msg=this.strm.msg},x.Deflate=M,x.deflate=O,x.deflateRaw=function(L,F){return(F=F||{}).raw=!0,O(L,F)},x.gzip=function(L,F){return(F=F||{}).gzip=!0,O(L,F)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(g,_,x){var S=g("./zlib/inflate"),E=g("./utils/common"),C=g("./utils/strings"),T=g("./zlib/constants"),R=g("./zlib/messages"),A=g("./zlib/zstream"),I=g("./zlib/gzheader"),B=Object.prototype.toString;function D(M){if(!(this instanceof D))return new D(M);this.options=E.assign({chunkSize:16384,windowBits:0,to:""},M||{});var O=this.options;O.raw&&0<=O.windowBits&&O.windowBits<16&&(O.windowBits=-O.windowBits,O.windowBits===0&&(O.windowBits=-15)),!(0<=O.windowBits&&O.windowBits<16)||M&&M.windowBits||(O.windowBits+=32),15<O.windowBits&&O.windowBits<48&&!(15&O.windowBits)&&(O.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new A,this.strm.avail_out=0;var L=S.inflateInit2(this.strm,O.windowBits);if(L!==T.Z_OK)throw new Error(R[L]);this.header=new I,S.inflateGetHeader(this.strm,this.header)}function N(M,O){var L=new D(O);if(L.push(M,!0),L.err)throw L.msg||R[L.err];return L.result}D.prototype.push=function(M,O){var L,F,U,j,z,W,X=this.strm,ie=this.options.chunkSize,fe=this.options.dictionary,xe=!1;if(this.ended)return!1;F=O===~~O?O:O===!0?T.Z_FINISH:T.Z_NO_FLUSH,typeof M=="string"?X.input=C.binstring2buf(M):B.call(M)==="[object ArrayBuffer]"?X.input=new Uint8Array(M):X.input=M,X.next_in=0,X.avail_in=X.input.length;do{if(X.avail_out===0&&(X.output=new E.Buf8(ie),X.next_out=0,X.avail_out=ie),(L=S.inflate(X,T.Z_NO_FLUSH))===T.Z_NEED_DICT&&fe&&(W=typeof fe=="string"?C.string2buf(fe):B.call(fe)==="[object ArrayBuffer]"?new Uint8Array(fe):fe,L=S.inflateSetDictionary(this.strm,W)),L===T.Z_BUF_ERROR&&xe===!0&&(L=T.Z_OK,xe=!1),L!==T.Z_STREAM_END&&L!==T.Z_OK)return this.onEnd(L),!(this.ended=!0);X.next_out&&(X.avail_out!==0&&L!==T.Z_STREAM_END&&(X.avail_in!==0||F!==T.Z_FINISH&&F!==T.Z_SYNC_FLUSH)||(this.options.to==="string"?(U=C.utf8border(X.output,X.next_out),j=X.next_out-U,z=C.buf2string(X.output,U),X.next_out=j,X.avail_out=ie-j,j&&E.arraySet(X.output,X.output,U,j,0),this.onData(z)):this.onData(E.shrinkBuf(X.output,X.next_out)))),X.avail_in===0&&X.avail_out===0&&(xe=!0)}while((0<X.avail_in||X.avail_out===0)&&L!==T.Z_STREAM_END);return L===T.Z_STREAM_END&&(F=T.Z_FINISH),F===T.Z_FINISH?(L=S.inflateEnd(this.strm),this.onEnd(L),this.ended=!0,L===T.Z_OK):F!==T.Z_SYNC_FLUSH||(this.onEnd(T.Z_OK),!(X.avail_out=0))},D.prototype.onData=function(M){this.chunks.push(M)},D.prototype.onEnd=function(M){M===T.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=E.flattenChunks(this.chunks)),this.chunks=[],this.err=M,this.msg=this.strm.msg},x.Inflate=D,x.inflate=N,x.inflateRaw=function(M,O){return(O=O||{}).raw=!0,N(M,O)},x.ungzip=N},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(g,_,x){var S=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";x.assign=function(T){for(var R=Array.prototype.slice.call(arguments,1);R.length;){var A=R.shift();if(A){if(typeof A!="object")throw new TypeError(A+"must be non-object");for(var I in A)A.hasOwnProperty(I)&&(T[I]=A[I])}}return T},x.shrinkBuf=function(T,R){return T.length===R?T:T.subarray?T.subarray(0,R):(T.length=R,T)};var E={arraySet:function(T,R,A,I,B){if(R.subarray&&T.subarray)T.set(R.subarray(A,A+I),B);else for(var D=0;D<I;D++)T[B+D]=R[A+D]},flattenChunks:function(T){var R,A,I,B,D,N;for(R=I=0,A=T.length;R<A;R++)I+=T[R].length;for(N=new Uint8Array(I),R=B=0,A=T.length;R<A;R++)D=T[R],N.set(D,B),B+=D.length;return N}},C={arraySet:function(T,R,A,I,B){for(var D=0;D<I;D++)T[B+D]=R[A+D]},flattenChunks:function(T){return[].concat.apply([],T)}};x.setTyped=function(T){T?(x.Buf8=Uint8Array,x.Buf16=Uint16Array,x.Buf32=Int32Array,x.assign(x,E)):(x.Buf8=Array,x.Buf16=Array,x.Buf32=Array,x.assign(x,C))},x.setTyped(S)},{}],42:[function(g,_,x){var S=g("./common"),E=!0,C=!0;try{String.fromCharCode.apply(null,[0])}catch{E=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{C=!1}for(var T=new S.Buf8(256),R=0;R<256;R++)T[R]=252<=R?6:248<=R?5:240<=R?4:224<=R?3:192<=R?2:1;function A(I,B){if(B<65537&&(I.subarray&&C||!I.subarray&&E))return String.fromCharCode.apply(null,S.shrinkBuf(I,B));for(var D="",N=0;N<B;N++)D+=String.fromCharCode(I[N]);return D}T[254]=T[254]=1,x.string2buf=function(I){var B,D,N,M,O,L=I.length,F=0;for(M=0;M<L;M++)(64512&(D=I.charCodeAt(M)))==55296&&M+1<L&&(64512&(N=I.charCodeAt(M+1)))==56320&&(D=65536+(D-55296<<10)+(N-56320),M++),F+=D<128?1:D<2048?2:D<65536?3:4;for(B=new S.Buf8(F),M=O=0;O<F;M++)(64512&(D=I.charCodeAt(M)))==55296&&M+1<L&&(64512&(N=I.charCodeAt(M+1)))==56320&&(D=65536+(D-55296<<10)+(N-56320),M++),D<128?B[O++]=D:(D<2048?B[O++]=192|D>>>6:(D<65536?B[O++]=224|D>>>12:(B[O++]=240|D>>>18,B[O++]=128|D>>>12&63),B[O++]=128|D>>>6&63),B[O++]=128|63&D);return B},x.buf2binstring=function(I){return A(I,I.length)},x.binstring2buf=function(I){for(var B=new S.Buf8(I.length),D=0,N=B.length;D<N;D++)B[D]=I.charCodeAt(D);return B},x.buf2string=function(I,B){var D,N,M,O,L=B||I.length,F=new Array(2*L);for(D=N=0;D<L;)if((M=I[D++])<128)F[N++]=M;else if(4<(O=T[M]))F[N++]=65533,D+=O-1;else{for(M&=O===2?31:O===3?15:7;1<O&&D<L;)M=M<<6|63&I[D++],O--;1<O?F[N++]=65533:M<65536?F[N++]=M:(M-=65536,F[N++]=55296|M>>10&1023,F[N++]=56320|1023&M)}return A(F,N)},x.utf8border=function(I,B){var D;for((B=B||I.length)>I.length&&(B=I.length),D=B-1;0<=D&&(192&I[D])==128;)D--;return D<0||D===0?B:D+T[I[D]]>B?D:B}},{"./common":41}],43:[function(g,_,x){_.exports=function(S,E,C,T){for(var R=65535&S|0,A=S>>>16&65535|0,I=0;C!==0;){for(C-=I=2e3<C?2e3:C;A=A+(R=R+E[T++]|0)|0,--I;);R%=65521,A%=65521}return R|A<<16|0}},{}],44:[function(g,_,x){_.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(g,_,x){var S=function(){for(var E,C=[],T=0;T<256;T++){E=T;for(var R=0;R<8;R++)E=1&E?3988292384^E>>>1:E>>>1;C[T]=E}return C}();_.exports=function(E,C,T,R){var A=S,I=R+T;E^=-1;for(var B=R;B<I;B++)E=E>>>8^A[255&(E^C[B])];return-1^E}},{}],46:[function(g,_,x){var S,E=g("../utils/common"),C=g("./trees"),T=g("./adler32"),R=g("./crc32"),A=g("./messages"),I=0,B=4,D=0,N=-2,M=-1,O=4,L=2,F=8,U=9,j=286,z=30,W=19,X=2*j+1,ie=15,fe=3,xe=258,we=xe+fe+1,G=42,J=113,q=1,H=2,ve=3,Z=4;function ce(_e,Oe){return _e.msg=A[Oe],Oe}function ue(_e){return(_e<<1)-(4<_e?9:0)}function se(_e){for(var Oe=_e.length;0<=--Oe;)_e[Oe]=0}function te(_e){var Oe=_e.state,Ke=Oe.pending;Ke>_e.avail_out&&(Ke=_e.avail_out),Ke!==0&&(E.arraySet(_e.output,Oe.pending_buf,Oe.pending_out,Ke,_e.next_out),_e.next_out+=Ke,Oe.pending_out+=Ke,_e.total_out+=Ke,_e.avail_out-=Ke,Oe.pending-=Ke,Oe.pending===0&&(Oe.pending_out=0))}function Y(_e,Oe){C._tr_flush_block(_e,0<=_e.block_start?_e.block_start:-1,_e.strstart-_e.block_start,Oe),_e.block_start=_e.strstart,te(_e.strm)}function be(_e,Oe){_e.pending_buf[_e.pending++]=Oe}function ye(_e,Oe){_e.pending_buf[_e.pending++]=Oe>>>8&255,_e.pending_buf[_e.pending++]=255&Oe}function Ie(_e,Oe){var Ke,Me,Le=_e.max_chain_length,ze=_e.strstart,Je=_e.prev_length,Qe=_e.nice_match,rt=_e.strstart>_e.w_size-we?_e.strstart-(_e.w_size-we):0,wt=_e.window,bt=_e.w_mask,xt=_e.prev,Et=_e.strstart+xe,Rt=wt[ze+Je-1],$t=wt[ze+Je];_e.prev_length>=_e.good_match&&(Le>>=2),Qe>_e.lookahead&&(Qe=_e.lookahead);do if(wt[(Ke=Oe)+Je]===$t&&wt[Ke+Je-1]===Rt&&wt[Ke]===wt[ze]&&wt[++Ke]===wt[ze+1]){ze+=2,Ke++;do;while(wt[++ze]===wt[++Ke]&&wt[++ze]===wt[++Ke]&&wt[++ze]===wt[++Ke]&&wt[++ze]===wt[++Ke]&&wt[++ze]===wt[++Ke]&&wt[++ze]===wt[++Ke]&&wt[++ze]===wt[++Ke]&&wt[++ze]===wt[++Ke]&&ze<Et);if(Me=xe-(Et-ze),ze=Et-xe,Je<Me){if(_e.match_start=Oe,Qe<=(Je=Me))break;Rt=wt[ze+Je-1],$t=wt[ze+Je]}}while((Oe=xt[Oe&bt])>rt&&--Le!=0);return Je<=_e.lookahead?Je:_e.lookahead}function ke(_e){var Oe,Ke,Me,Le,ze,Je,Qe,rt,wt,bt,xt=_e.w_size;do{if(Le=_e.window_size-_e.lookahead-_e.strstart,_e.strstart>=xt+(xt-we)){for(E.arraySet(_e.window,_e.window,xt,xt,0),_e.match_start-=xt,_e.strstart-=xt,_e.block_start-=xt,Oe=Ke=_e.hash_size;Me=_e.head[--Oe],_e.head[Oe]=xt<=Me?Me-xt:0,--Ke;);for(Oe=Ke=xt;Me=_e.prev[--Oe],_e.prev[Oe]=xt<=Me?Me-xt:0,--Ke;);Le+=xt}if(_e.strm.avail_in===0)break;if(Je=_e.strm,Qe=_e.window,rt=_e.strstart+_e.lookahead,wt=Le,bt=void 0,bt=Je.avail_in,wt<bt&&(bt=wt),Ke=bt===0?0:(Je.avail_in-=bt,E.arraySet(Qe,Je.input,Je.next_in,bt,rt),Je.state.wrap===1?Je.adler=T(Je.adler,Qe,bt,rt):Je.state.wrap===2&&(Je.adler=R(Je.adler,Qe,bt,rt)),Je.next_in+=bt,Je.total_in+=bt,bt),_e.lookahead+=Ke,_e.lookahead+_e.insert>=fe)for(ze=_e.strstart-_e.insert,_e.ins_h=_e.window[ze],_e.ins_h=(_e.ins_h<<_e.hash_shift^_e.window[ze+1])&_e.hash_mask;_e.insert&&(_e.ins_h=(_e.ins_h<<_e.hash_shift^_e.window[ze+fe-1])&_e.hash_mask,_e.prev[ze&_e.w_mask]=_e.head[_e.ins_h],_e.head[_e.ins_h]=ze,ze++,_e.insert--,!(_e.lookahead+_e.insert<fe)););}while(_e.lookahead<we&&_e.strm.avail_in!==0)}function Ce(_e,Oe){for(var Ke,Me;;){if(_e.lookahead<we){if(ke(_e),_e.lookahead<we&&Oe===I)return q;if(_e.lookahead===0)break}if(Ke=0,_e.lookahead>=fe&&(_e.ins_h=(_e.ins_h<<_e.hash_shift^_e.window[_e.strstart+fe-1])&_e.hash_mask,Ke=_e.prev[_e.strstart&_e.w_mask]=_e.head[_e.ins_h],_e.head[_e.ins_h]=_e.strstart),Ke!==0&&_e.strstart-Ke<=_e.w_size-we&&(_e.match_length=Ie(_e,Ke)),_e.match_length>=fe)if(Me=C._tr_tally(_e,_e.strstart-_e.match_start,_e.match_length-fe),_e.lookahead-=_e.match_length,_e.match_length<=_e.max_lazy_match&&_e.lookahead>=fe){for(_e.match_length--;_e.strstart++,_e.ins_h=(_e.ins_h<<_e.hash_shift^_e.window[_e.strstart+fe-1])&_e.hash_mask,Ke=_e.prev[_e.strstart&_e.w_mask]=_e.head[_e.ins_h],_e.head[_e.ins_h]=_e.strstart,--_e.match_length!=0;);_e.strstart++}else _e.strstart+=_e.match_length,_e.match_length=0,_e.ins_h=_e.window[_e.strstart],_e.ins_h=(_e.ins_h<<_e.hash_shift^_e.window[_e.strstart+1])&_e.hash_mask;else Me=C._tr_tally(_e,0,_e.window[_e.strstart]),_e.lookahead--,_e.strstart++;if(Me&&(Y(_e,!1),_e.strm.avail_out===0))return q}return _e.insert=_e.strstart<fe-1?_e.strstart:fe-1,Oe===B?(Y(_e,!0),_e.strm.avail_out===0?ve:Z):_e.last_lit&&(Y(_e,!1),_e.strm.avail_out===0)?q:H}function Ae(_e,Oe){for(var Ke,Me,Le;;){if(_e.lookahead<we){if(ke(_e),_e.lookahead<we&&Oe===I)return q;if(_e.lookahead===0)break}if(Ke=0,_e.lookahead>=fe&&(_e.ins_h=(_e.ins_h<<_e.hash_shift^_e.window[_e.strstart+fe-1])&_e.hash_mask,Ke=_e.prev[_e.strstart&_e.w_mask]=_e.head[_e.ins_h],_e.head[_e.ins_h]=_e.strstart),_e.prev_length=_e.match_length,_e.prev_match=_e.match_start,_e.match_length=fe-1,Ke!==0&&_e.prev_length<_e.max_lazy_match&&_e.strstart-Ke<=_e.w_size-we&&(_e.match_length=Ie(_e,Ke),_e.match_length<=5&&(_e.strategy===1||_e.match_length===fe&&4096<_e.strstart-_e.match_start)&&(_e.match_length=fe-1)),_e.prev_length>=fe&&_e.match_length<=_e.prev_length){for(Le=_e.strstart+_e.lookahead-fe,Me=C._tr_tally(_e,_e.strstart-1-_e.prev_match,_e.prev_length-fe),_e.lookahead-=_e.prev_length-1,_e.prev_length-=2;++_e.strstart<=Le&&(_e.ins_h=(_e.ins_h<<_e.hash_shift^_e.window[_e.strstart+fe-1])&_e.hash_mask,Ke=_e.prev[_e.strstart&_e.w_mask]=_e.head[_e.ins_h],_e.head[_e.ins_h]=_e.strstart),--_e.prev_length!=0;);if(_e.match_available=0,_e.match_length=fe-1,_e.strstart++,Me&&(Y(_e,!1),_e.strm.avail_out===0))return q}else if(_e.match_available){if((Me=C._tr_tally(_e,0,_e.window[_e.strstart-1]))&&Y(_e,!1),_e.strstart++,_e.lookahead--,_e.strm.avail_out===0)return q}else _e.match_available=1,_e.strstart++,_e.lookahead--}return _e.match_available&&(Me=C._tr_tally(_e,0,_e.window[_e.strstart-1]),_e.match_available=0),_e.insert=_e.strstart<fe-1?_e.strstart:fe-1,Oe===B?(Y(_e,!0),_e.strm.avail_out===0?ve:Z):_e.last_lit&&(Y(_e,!1),_e.strm.avail_out===0)?q:H}function Ne(_e,Oe,Ke,Me,Le){this.good_length=_e,this.max_lazy=Oe,this.nice_length=Ke,this.max_chain=Me,this.func=Le}function We(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=F,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new E.Buf16(2*X),this.dyn_dtree=new E.Buf16(2*(2*z+1)),this.bl_tree=new E.Buf16(2*(2*W+1)),se(this.dyn_ltree),se(this.dyn_dtree),se(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new E.Buf16(ie+1),this.heap=new E.Buf16(2*j+1),se(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new E.Buf16(2*j+1),se(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Be(_e){var Oe;return _e&&_e.state?(_e.total_in=_e.total_out=0,_e.data_type=L,(Oe=_e.state).pending=0,Oe.pending_out=0,Oe.wrap<0&&(Oe.wrap=-Oe.wrap),Oe.status=Oe.wrap?G:J,_e.adler=Oe.wrap===2?0:1,Oe.last_flush=I,C._tr_init(Oe),D):ce(_e,N)}function Se(_e){var Oe=Be(_e);return Oe===D&&function(Ke){Ke.window_size=2*Ke.w_size,se(Ke.head),Ke.max_lazy_match=S[Ke.level].max_lazy,Ke.good_match=S[Ke.level].good_length,Ke.nice_match=S[Ke.level].nice_length,Ke.max_chain_length=S[Ke.level].max_chain,Ke.strstart=0,Ke.block_start=0,Ke.lookahead=0,Ke.insert=0,Ke.match_length=Ke.prev_length=fe-1,Ke.match_available=0,Ke.ins_h=0}(_e.state),Oe}function $e(_e,Oe,Ke,Me,Le,ze){if(!_e)return N;var Je=1;if(Oe===M&&(Oe=6),Me<0?(Je=0,Me=-Me):15<Me&&(Je=2,Me-=16),Le<1||U<Le||Ke!==F||Me<8||15<Me||Oe<0||9<Oe||ze<0||O<ze)return ce(_e,N);Me===8&&(Me=9);var Qe=new We;return(_e.state=Qe).strm=_e,Qe.wrap=Je,Qe.gzhead=null,Qe.w_bits=Me,Qe.w_size=1<<Qe.w_bits,Qe.w_mask=Qe.w_size-1,Qe.hash_bits=Le+7,Qe.hash_size=1<<Qe.hash_bits,Qe.hash_mask=Qe.hash_size-1,Qe.hash_shift=~~((Qe.hash_bits+fe-1)/fe),Qe.window=new E.Buf8(2*Qe.w_size),Qe.head=new E.Buf16(Qe.hash_size),Qe.prev=new E.Buf16(Qe.w_size),Qe.lit_bufsize=1<<Le+6,Qe.pending_buf_size=4*Qe.lit_bufsize,Qe.pending_buf=new E.Buf8(Qe.pending_buf_size),Qe.d_buf=1*Qe.lit_bufsize,Qe.l_buf=3*Qe.lit_bufsize,Qe.level=Oe,Qe.strategy=ze,Qe.method=Ke,Se(_e)}S=[new Ne(0,0,0,0,function(_e,Oe){var Ke=65535;for(Ke>_e.pending_buf_size-5&&(Ke=_e.pending_buf_size-5);;){if(_e.lookahead<=1){if(ke(_e),_e.lookahead===0&&Oe===I)return q;if(_e.lookahead===0)break}_e.strstart+=_e.lookahead,_e.lookahead=0;var Me=_e.block_start+Ke;if((_e.strstart===0||_e.strstart>=Me)&&(_e.lookahead=_e.strstart-Me,_e.strstart=Me,Y(_e,!1),_e.strm.avail_out===0)||_e.strstart-_e.block_start>=_e.w_size-we&&(Y(_e,!1),_e.strm.avail_out===0))return q}return _e.insert=0,Oe===B?(Y(_e,!0),_e.strm.avail_out===0?ve:Z):(_e.strstart>_e.block_start&&(Y(_e,!1),_e.strm.avail_out),q)}),new Ne(4,4,8,4,Ce),new Ne(4,5,16,8,Ce),new Ne(4,6,32,32,Ce),new Ne(4,4,16,16,Ae),new Ne(8,16,32,32,Ae),new Ne(8,16,128,128,Ae),new Ne(8,32,128,256,Ae),new Ne(32,128,258,1024,Ae),new Ne(32,258,258,4096,Ae)],x.deflateInit=function(_e,Oe){return $e(_e,Oe,F,15,8,0)},x.deflateInit2=$e,x.deflateReset=Se,x.deflateResetKeep=Be,x.deflateSetHeader=function(_e,Oe){return _e&&_e.state?_e.state.wrap!==2?N:(_e.state.gzhead=Oe,D):N},x.deflate=function(_e,Oe){var Ke,Me,Le,ze;if(!_e||!_e.state||5<Oe||Oe<0)return _e?ce(_e,N):N;if(Me=_e.state,!_e.output||!_e.input&&_e.avail_in!==0||Me.status===666&&Oe!==B)return ce(_e,_e.avail_out===0?-5:N);if(Me.strm=_e,Ke=Me.last_flush,Me.last_flush=Oe,Me.status===G)if(Me.wrap===2)_e.adler=0,be(Me,31),be(Me,139),be(Me,8),Me.gzhead?(be(Me,(Me.gzhead.text?1:0)+(Me.gzhead.hcrc?2:0)+(Me.gzhead.extra?4:0)+(Me.gzhead.name?8:0)+(Me.gzhead.comment?16:0)),be(Me,255&Me.gzhead.time),be(Me,Me.gzhead.time>>8&255),be(Me,Me.gzhead.time>>16&255),be(Me,Me.gzhead.time>>24&255),be(Me,Me.level===9?2:2<=Me.strategy||Me.level<2?4:0),be(Me,255&Me.gzhead.os),Me.gzhead.extra&&Me.gzhead.extra.length&&(be(Me,255&Me.gzhead.extra.length),be(Me,Me.gzhead.extra.length>>8&255)),Me.gzhead.hcrc&&(_e.adler=R(_e.adler,Me.pending_buf,Me.pending,0)),Me.gzindex=0,Me.status=69):(be(Me,0),be(Me,0),be(Me,0),be(Me,0),be(Me,0),be(Me,Me.level===9?2:2<=Me.strategy||Me.level<2?4:0),be(Me,3),Me.status=J);else{var Je=F+(Me.w_bits-8<<4)<<8;Je|=(2<=Me.strategy||Me.level<2?0:Me.level<6?1:Me.level===6?2:3)<<6,Me.strstart!==0&&(Je|=32),Je+=31-Je%31,Me.status=J,ye(Me,Je),Me.strstart!==0&&(ye(Me,_e.adler>>>16),ye(Me,65535&_e.adler)),_e.adler=1}if(Me.status===69)if(Me.gzhead.extra){for(Le=Me.pending;Me.gzindex<(65535&Me.gzhead.extra.length)&&(Me.pending!==Me.pending_buf_size||(Me.gzhead.hcrc&&Me.pending>Le&&(_e.adler=R(_e.adler,Me.pending_buf,Me.pending-Le,Le)),te(_e),Le=Me.pending,Me.pending!==Me.pending_buf_size));)be(Me,255&Me.gzhead.extra[Me.gzindex]),Me.gzindex++;Me.gzhead.hcrc&&Me.pending>Le&&(_e.adler=R(_e.adler,Me.pending_buf,Me.pending-Le,Le)),Me.gzindex===Me.gzhead.extra.length&&(Me.gzindex=0,Me.status=73)}else Me.status=73;if(Me.status===73)if(Me.gzhead.name){Le=Me.pending;do{if(Me.pending===Me.pending_buf_size&&(Me.gzhead.hcrc&&Me.pending>Le&&(_e.adler=R(_e.adler,Me.pending_buf,Me.pending-Le,Le)),te(_e),Le=Me.pending,Me.pending===Me.pending_buf_size)){ze=1;break}ze=Me.gzindex<Me.gzhead.name.length?255&Me.gzhead.name.charCodeAt(Me.gzindex++):0,be(Me,ze)}while(ze!==0);Me.gzhead.hcrc&&Me.pending>Le&&(_e.adler=R(_e.adler,Me.pending_buf,Me.pending-Le,Le)),ze===0&&(Me.gzindex=0,Me.status=91)}else Me.status=91;if(Me.status===91)if(Me.gzhead.comment){Le=Me.pending;do{if(Me.pending===Me.pending_buf_size&&(Me.gzhead.hcrc&&Me.pending>Le&&(_e.adler=R(_e.adler,Me.pending_buf,Me.pending-Le,Le)),te(_e),Le=Me.pending,Me.pending===Me.pending_buf_size)){ze=1;break}ze=Me.gzindex<Me.gzhead.comment.length?255&Me.gzhead.comment.charCodeAt(Me.gzindex++):0,be(Me,ze)}while(ze!==0);Me.gzhead.hcrc&&Me.pending>Le&&(_e.adler=R(_e.adler,Me.pending_buf,Me.pending-Le,Le)),ze===0&&(Me.status=103)}else Me.status=103;if(Me.status===103&&(Me.gzhead.hcrc?(Me.pending+2>Me.pending_buf_size&&te(_e),Me.pending+2<=Me.pending_buf_size&&(be(Me,255&_e.adler),be(Me,_e.adler>>8&255),_e.adler=0,Me.status=J)):Me.status=J),Me.pending!==0){if(te(_e),_e.avail_out===0)return Me.last_flush=-1,D}else if(_e.avail_in===0&&ue(Oe)<=ue(Ke)&&Oe!==B)return ce(_e,-5);if(Me.status===666&&_e.avail_in!==0)return ce(_e,-5);if(_e.avail_in!==0||Me.lookahead!==0||Oe!==I&&Me.status!==666){var Qe=Me.strategy===2?function(rt,wt){for(var bt;;){if(rt.lookahead===0&&(ke(rt),rt.lookahead===0)){if(wt===I)return q;break}if(rt.match_length=0,bt=C._tr_tally(rt,0,rt.window[rt.strstart]),rt.lookahead--,rt.strstart++,bt&&(Y(rt,!1),rt.strm.avail_out===0))return q}return rt.insert=0,wt===B?(Y(rt,!0),rt.strm.avail_out===0?ve:Z):rt.last_lit&&(Y(rt,!1),rt.strm.avail_out===0)?q:H}(Me,Oe):Me.strategy===3?function(rt,wt){for(var bt,xt,Et,Rt,$t=rt.window;;){if(rt.lookahead<=xe){if(ke(rt),rt.lookahead<=xe&&wt===I)return q;if(rt.lookahead===0)break}if(rt.match_length=0,rt.lookahead>=fe&&0<rt.strstart&&(xt=$t[Et=rt.strstart-1])===$t[++Et]&&xt===$t[++Et]&&xt===$t[++Et]){Rt=rt.strstart+xe;do;while(xt===$t[++Et]&&xt===$t[++Et]&&xt===$t[++Et]&&xt===$t[++Et]&&xt===$t[++Et]&&xt===$t[++Et]&&xt===$t[++Et]&&xt===$t[++Et]&&Et<Rt);rt.match_length=xe-(Rt-Et),rt.match_length>rt.lookahead&&(rt.match_length=rt.lookahead)}if(rt.match_length>=fe?(bt=C._tr_tally(rt,1,rt.match_length-fe),rt.lookahead-=rt.match_length,rt.strstart+=rt.match_length,rt.match_length=0):(bt=C._tr_tally(rt,0,rt.window[rt.strstart]),rt.lookahead--,rt.strstart++),bt&&(Y(rt,!1),rt.strm.avail_out===0))return q}return rt.insert=0,wt===B?(Y(rt,!0),rt.strm.avail_out===0?ve:Z):rt.last_lit&&(Y(rt,!1),rt.strm.avail_out===0)?q:H}(Me,Oe):S[Me.level].func(Me,Oe);if(Qe!==ve&&Qe!==Z||(Me.status=666),Qe===q||Qe===ve)return _e.avail_out===0&&(Me.last_flush=-1),D;if(Qe===H&&(Oe===1?C._tr_align(Me):Oe!==5&&(C._tr_stored_block(Me,0,0,!1),Oe===3&&(se(Me.head),Me.lookahead===0&&(Me.strstart=0,Me.block_start=0,Me.insert=0))),te(_e),_e.avail_out===0))return Me.last_flush=-1,D}return Oe!==B?D:Me.wrap<=0?1:(Me.wrap===2?(be(Me,255&_e.adler),be(Me,_e.adler>>8&255),be(Me,_e.adler>>16&255),be(Me,_e.adler>>24&255),be(Me,255&_e.total_in),be(Me,_e.total_in>>8&255),be(Me,_e.total_in>>16&255),be(Me,_e.total_in>>24&255)):(ye(Me,_e.adler>>>16),ye(Me,65535&_e.adler)),te(_e),0<Me.wrap&&(Me.wrap=-Me.wrap),Me.pending!==0?D:1)},x.deflateEnd=function(_e){var Oe;return _e&&_e.state?(Oe=_e.state.status)!==G&&Oe!==69&&Oe!==73&&Oe!==91&&Oe!==103&&Oe!==J&&Oe!==666?ce(_e,N):(_e.state=null,Oe===J?ce(_e,-3):D):N},x.deflateSetDictionary=function(_e,Oe){var Ke,Me,Le,ze,Je,Qe,rt,wt,bt=Oe.length;if(!_e||!_e.state||(ze=(Ke=_e.state).wrap)===2||ze===1&&Ke.status!==G||Ke.lookahead)return N;for(ze===1&&(_e.adler=T(_e.adler,Oe,bt,0)),Ke.wrap=0,bt>=Ke.w_size&&(ze===0&&(se(Ke.head),Ke.strstart=0,Ke.block_start=0,Ke.insert=0),wt=new E.Buf8(Ke.w_size),E.arraySet(wt,Oe,bt-Ke.w_size,Ke.w_size,0),Oe=wt,bt=Ke.w_size),Je=_e.avail_in,Qe=_e.next_in,rt=_e.input,_e.avail_in=bt,_e.next_in=0,_e.input=Oe,ke(Ke);Ke.lookahead>=fe;){for(Me=Ke.strstart,Le=Ke.lookahead-(fe-1);Ke.ins_h=(Ke.ins_h<<Ke.hash_shift^Ke.window[Me+fe-1])&Ke.hash_mask,Ke.prev[Me&Ke.w_mask]=Ke.head[Ke.ins_h],Ke.head[Ke.ins_h]=Me,Me++,--Le;);Ke.strstart=Me,Ke.lookahead=fe-1,ke(Ke)}return Ke.strstart+=Ke.lookahead,Ke.block_start=Ke.strstart,Ke.insert=Ke.lookahead,Ke.lookahead=0,Ke.match_length=Ke.prev_length=fe-1,Ke.match_available=0,_e.next_in=Qe,_e.input=rt,_e.avail_in=Je,Ke.wrap=ze,D},x.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(g,_,x){_.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(g,_,x){_.exports=function(S,E){var C,T,R,A,I,B,D,N,M,O,L,F,U,j,z,W,X,ie,fe,xe,we,G,J,q,H;C=S.state,T=S.next_in,q=S.input,R=T+(S.avail_in-5),A=S.next_out,H=S.output,I=A-(E-S.avail_out),B=A+(S.avail_out-257),D=C.dmax,N=C.wsize,M=C.whave,O=C.wnext,L=C.window,F=C.hold,U=C.bits,j=C.lencode,z=C.distcode,W=(1<<C.lenbits)-1,X=(1<<C.distbits)-1;e:do{U<15&&(F+=q[T++]<<U,U+=8,F+=q[T++]<<U,U+=8),ie=j[F&W];t:for(;;){if(F>>>=fe=ie>>>24,U-=fe,(fe=ie>>>16&255)===0)H[A++]=65535&ie;else{if(!(16&fe)){if(!(64&fe)){ie=j[(65535&ie)+(F&(1<<fe)-1)];continue t}if(32&fe){C.mode=12;break e}S.msg="invalid literal/length code",C.mode=30;break e}xe=65535&ie,(fe&=15)&&(U<fe&&(F+=q[T++]<<U,U+=8),xe+=F&(1<<fe)-1,F>>>=fe,U-=fe),U<15&&(F+=q[T++]<<U,U+=8,F+=q[T++]<<U,U+=8),ie=z[F&X];r:for(;;){if(F>>>=fe=ie>>>24,U-=fe,!(16&(fe=ie>>>16&255))){if(!(64&fe)){ie=z[(65535&ie)+(F&(1<<fe)-1)];continue r}S.msg="invalid distance code",C.mode=30;break e}if(we=65535&ie,U<(fe&=15)&&(F+=q[T++]<<U,(U+=8)<fe&&(F+=q[T++]<<U,U+=8)),D<(we+=F&(1<<fe)-1)){S.msg="invalid distance too far back",C.mode=30;break e}if(F>>>=fe,U-=fe,(fe=A-I)<we){if(M<(fe=we-fe)&&C.sane){S.msg="invalid distance too far back",C.mode=30;break e}if(J=L,(G=0)===O){if(G+=N-fe,fe<xe){for(xe-=fe;H[A++]=L[G++],--fe;);G=A-we,J=H}}else if(O<fe){if(G+=N+O-fe,(fe-=O)<xe){for(xe-=fe;H[A++]=L[G++],--fe;);if(G=0,O<xe){for(xe-=fe=O;H[A++]=L[G++],--fe;);G=A-we,J=H}}}else if(G+=O-fe,fe<xe){for(xe-=fe;H[A++]=L[G++],--fe;);G=A-we,J=H}for(;2<xe;)H[A++]=J[G++],H[A++]=J[G++],H[A++]=J[G++],xe-=3;xe&&(H[A++]=J[G++],1<xe&&(H[A++]=J[G++]))}else{for(G=A-we;H[A++]=H[G++],H[A++]=H[G++],H[A++]=H[G++],2<(xe-=3););xe&&(H[A++]=H[G++],1<xe&&(H[A++]=H[G++]))}break}}break}}while(T<R&&A<B);T-=xe=U>>3,F&=(1<<(U-=xe<<3))-1,S.next_in=T,S.next_out=A,S.avail_in=T<R?R-T+5:5-(T-R),S.avail_out=A<B?B-A+257:257-(A-B),C.hold=F,C.bits=U}},{}],49:[function(g,_,x){var S=g("../utils/common"),E=g("./adler32"),C=g("./crc32"),T=g("./inffast"),R=g("./inftrees"),A=1,I=2,B=0,D=-2,N=1,M=852,O=592;function L(G){return(G>>>24&255)+(G>>>8&65280)+((65280&G)<<8)+((255&G)<<24)}function F(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new S.Buf16(320),this.work=new S.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function U(G){var J;return G&&G.state?(J=G.state,G.total_in=G.total_out=J.total=0,G.msg="",J.wrap&&(G.adler=1&J.wrap),J.mode=N,J.last=0,J.havedict=0,J.dmax=32768,J.head=null,J.hold=0,J.bits=0,J.lencode=J.lendyn=new S.Buf32(M),J.distcode=J.distdyn=new S.Buf32(O),J.sane=1,J.back=-1,B):D}function j(G){var J;return G&&G.state?((J=G.state).wsize=0,J.whave=0,J.wnext=0,U(G)):D}function z(G,J){var q,H;return G&&G.state?(H=G.state,J<0?(q=0,J=-J):(q=1+(J>>4),J<48&&(J&=15)),J&&(J<8||15<J)?D:(H.window!==null&&H.wbits!==J&&(H.window=null),H.wrap=q,H.wbits=J,j(G))):D}function W(G,J){var q,H;return G?(H=new F,(G.state=H).window=null,(q=z(G,J))!==B&&(G.state=null),q):D}var X,ie,fe=!0;function xe(G){if(fe){var J;for(X=new S.Buf32(512),ie=new S.Buf32(32),J=0;J<144;)G.lens[J++]=8;for(;J<256;)G.lens[J++]=9;for(;J<280;)G.lens[J++]=7;for(;J<288;)G.lens[J++]=8;for(R(A,G.lens,0,288,X,0,G.work,{bits:9}),J=0;J<32;)G.lens[J++]=5;R(I,G.lens,0,32,ie,0,G.work,{bits:5}),fe=!1}G.lencode=X,G.lenbits=9,G.distcode=ie,G.distbits=5}function we(G,J,q,H){var ve,Z=G.state;return Z.window===null&&(Z.wsize=1<<Z.wbits,Z.wnext=0,Z.whave=0,Z.window=new S.Buf8(Z.wsize)),H>=Z.wsize?(S.arraySet(Z.window,J,q-Z.wsize,Z.wsize,0),Z.wnext=0,Z.whave=Z.wsize):(H<(ve=Z.wsize-Z.wnext)&&(ve=H),S.arraySet(Z.window,J,q-H,ve,Z.wnext),(H-=ve)?(S.arraySet(Z.window,J,q-H,H,0),Z.wnext=H,Z.whave=Z.wsize):(Z.wnext+=ve,Z.wnext===Z.wsize&&(Z.wnext=0),Z.whave<Z.wsize&&(Z.whave+=ve))),0}x.inflateReset=j,x.inflateReset2=z,x.inflateResetKeep=U,x.inflateInit=function(G){return W(G,15)},x.inflateInit2=W,x.inflate=function(G,J){var q,H,ve,Z,ce,ue,se,te,Y,be,ye,Ie,ke,Ce,Ae,Ne,We,Be,Se,$e,_e,Oe,Ke,Me,Le=0,ze=new S.Buf8(4),Je=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!G||!G.state||!G.output||!G.input&&G.avail_in!==0)return D;(q=G.state).mode===12&&(q.mode=13),ce=G.next_out,ve=G.output,se=G.avail_out,Z=G.next_in,H=G.input,ue=G.avail_in,te=q.hold,Y=q.bits,be=ue,ye=se,Oe=B;e:for(;;)switch(q.mode){case N:if(q.wrap===0){q.mode=13;break}for(;Y<16;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if(2&q.wrap&&te===35615){ze[q.check=0]=255&te,ze[1]=te>>>8&255,q.check=C(q.check,ze,2,0),Y=te=0,q.mode=2;break}if(q.flags=0,q.head&&(q.head.done=!1),!(1&q.wrap)||(((255&te)<<8)+(te>>8))%31){G.msg="incorrect header check",q.mode=30;break}if((15&te)!=8){G.msg="unknown compression method",q.mode=30;break}if(Y-=4,_e=8+(15&(te>>>=4)),q.wbits===0)q.wbits=_e;else if(_e>q.wbits){G.msg="invalid window size",q.mode=30;break}q.dmax=1<<_e,G.adler=q.check=1,q.mode=512&te?10:12,Y=te=0;break;case 2:for(;Y<16;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if(q.flags=te,(255&q.flags)!=8){G.msg="unknown compression method",q.mode=30;break}if(57344&q.flags){G.msg="unknown header flags set",q.mode=30;break}q.head&&(q.head.text=te>>8&1),512&q.flags&&(ze[0]=255&te,ze[1]=te>>>8&255,q.check=C(q.check,ze,2,0)),Y=te=0,q.mode=3;case 3:for(;Y<32;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}q.head&&(q.head.time=te),512&q.flags&&(ze[0]=255&te,ze[1]=te>>>8&255,ze[2]=te>>>16&255,ze[3]=te>>>24&255,q.check=C(q.check,ze,4,0)),Y=te=0,q.mode=4;case 4:for(;Y<16;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}q.head&&(q.head.xflags=255&te,q.head.os=te>>8),512&q.flags&&(ze[0]=255&te,ze[1]=te>>>8&255,q.check=C(q.check,ze,2,0)),Y=te=0,q.mode=5;case 5:if(1024&q.flags){for(;Y<16;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}q.length=te,q.head&&(q.head.extra_len=te),512&q.flags&&(ze[0]=255&te,ze[1]=te>>>8&255,q.check=C(q.check,ze,2,0)),Y=te=0}else q.head&&(q.head.extra=null);q.mode=6;case 6:if(1024&q.flags&&(ue<(Ie=q.length)&&(Ie=ue),Ie&&(q.head&&(_e=q.head.extra_len-q.length,q.head.extra||(q.head.extra=new Array(q.head.extra_len)),S.arraySet(q.head.extra,H,Z,Ie,_e)),512&q.flags&&(q.check=C(q.check,H,Ie,Z)),ue-=Ie,Z+=Ie,q.length-=Ie),q.length))break e;q.length=0,q.mode=7;case 7:if(2048&q.flags){if(ue===0)break e;for(Ie=0;_e=H[Z+Ie++],q.head&&_e&&q.length<65536&&(q.head.name+=String.fromCharCode(_e)),_e&&Ie<ue;);if(512&q.flags&&(q.check=C(q.check,H,Ie,Z)),ue-=Ie,Z+=Ie,_e)break e}else q.head&&(q.head.name=null);q.length=0,q.mode=8;case 8:if(4096&q.flags){if(ue===0)break e;for(Ie=0;_e=H[Z+Ie++],q.head&&_e&&q.length<65536&&(q.head.comment+=String.fromCharCode(_e)),_e&&Ie<ue;);if(512&q.flags&&(q.check=C(q.check,H,Ie,Z)),ue-=Ie,Z+=Ie,_e)break e}else q.head&&(q.head.comment=null);q.mode=9;case 9:if(512&q.flags){for(;Y<16;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if(te!==(65535&q.check)){G.msg="header crc mismatch",q.mode=30;break}Y=te=0}q.head&&(q.head.hcrc=q.flags>>9&1,q.head.done=!0),G.adler=q.check=0,q.mode=12;break;case 10:for(;Y<32;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}G.adler=q.check=L(te),Y=te=0,q.mode=11;case 11:if(q.havedict===0)return G.next_out=ce,G.avail_out=se,G.next_in=Z,G.avail_in=ue,q.hold=te,q.bits=Y,2;G.adler=q.check=1,q.mode=12;case 12:if(J===5||J===6)break e;case 13:if(q.last){te>>>=7&Y,Y-=7&Y,q.mode=27;break}for(;Y<3;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}switch(q.last=1&te,Y-=1,3&(te>>>=1)){case 0:q.mode=14;break;case 1:if(xe(q),q.mode=20,J!==6)break;te>>>=2,Y-=2;break e;case 2:q.mode=17;break;case 3:G.msg="invalid block type",q.mode=30}te>>>=2,Y-=2;break;case 14:for(te>>>=7&Y,Y-=7&Y;Y<32;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if((65535&te)!=(te>>>16^65535)){G.msg="invalid stored block lengths",q.mode=30;break}if(q.length=65535&te,Y=te=0,q.mode=15,J===6)break e;case 15:q.mode=16;case 16:if(Ie=q.length){if(ue<Ie&&(Ie=ue),se<Ie&&(Ie=se),Ie===0)break e;S.arraySet(ve,H,Z,Ie,ce),ue-=Ie,Z+=Ie,se-=Ie,ce+=Ie,q.length-=Ie;break}q.mode=12;break;case 17:for(;Y<14;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if(q.nlen=257+(31&te),te>>>=5,Y-=5,q.ndist=1+(31&te),te>>>=5,Y-=5,q.ncode=4+(15&te),te>>>=4,Y-=4,286<q.nlen||30<q.ndist){G.msg="too many length or distance symbols",q.mode=30;break}q.have=0,q.mode=18;case 18:for(;q.have<q.ncode;){for(;Y<3;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}q.lens[Je[q.have++]]=7&te,te>>>=3,Y-=3}for(;q.have<19;)q.lens[Je[q.have++]]=0;if(q.lencode=q.lendyn,q.lenbits=7,Ke={bits:q.lenbits},Oe=R(0,q.lens,0,19,q.lencode,0,q.work,Ke),q.lenbits=Ke.bits,Oe){G.msg="invalid code lengths set",q.mode=30;break}q.have=0,q.mode=19;case 19:for(;q.have<q.nlen+q.ndist;){for(;Ne=(Le=q.lencode[te&(1<<q.lenbits)-1])>>>16&255,We=65535&Le,!((Ae=Le>>>24)<=Y);){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if(We<16)te>>>=Ae,Y-=Ae,q.lens[q.have++]=We;else{if(We===16){for(Me=Ae+2;Y<Me;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if(te>>>=Ae,Y-=Ae,q.have===0){G.msg="invalid bit length repeat",q.mode=30;break}_e=q.lens[q.have-1],Ie=3+(3&te),te>>>=2,Y-=2}else if(We===17){for(Me=Ae+3;Y<Me;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}Y-=Ae,_e=0,Ie=3+(7&(te>>>=Ae)),te>>>=3,Y-=3}else{for(Me=Ae+7;Y<Me;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}Y-=Ae,_e=0,Ie=11+(127&(te>>>=Ae)),te>>>=7,Y-=7}if(q.have+Ie>q.nlen+q.ndist){G.msg="invalid bit length repeat",q.mode=30;break}for(;Ie--;)q.lens[q.have++]=_e}}if(q.mode===30)break;if(q.lens[256]===0){G.msg="invalid code -- missing end-of-block",q.mode=30;break}if(q.lenbits=9,Ke={bits:q.lenbits},Oe=R(A,q.lens,0,q.nlen,q.lencode,0,q.work,Ke),q.lenbits=Ke.bits,Oe){G.msg="invalid literal/lengths set",q.mode=30;break}if(q.distbits=6,q.distcode=q.distdyn,Ke={bits:q.distbits},Oe=R(I,q.lens,q.nlen,q.ndist,q.distcode,0,q.work,Ke),q.distbits=Ke.bits,Oe){G.msg="invalid distances set",q.mode=30;break}if(q.mode=20,J===6)break e;case 20:q.mode=21;case 21:if(6<=ue&&258<=se){G.next_out=ce,G.avail_out=se,G.next_in=Z,G.avail_in=ue,q.hold=te,q.bits=Y,T(G,ye),ce=G.next_out,ve=G.output,se=G.avail_out,Z=G.next_in,H=G.input,ue=G.avail_in,te=q.hold,Y=q.bits,q.mode===12&&(q.back=-1);break}for(q.back=0;Ne=(Le=q.lencode[te&(1<<q.lenbits)-1])>>>16&255,We=65535&Le,!((Ae=Le>>>24)<=Y);){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if(Ne&&!(240&Ne)){for(Be=Ae,Se=Ne,$e=We;Ne=(Le=q.lencode[$e+((te&(1<<Be+Se)-1)>>Be)])>>>16&255,We=65535&Le,!(Be+(Ae=Le>>>24)<=Y);){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}te>>>=Be,Y-=Be,q.back+=Be}if(te>>>=Ae,Y-=Ae,q.back+=Ae,q.length=We,Ne===0){q.mode=26;break}if(32&Ne){q.back=-1,q.mode=12;break}if(64&Ne){G.msg="invalid literal/length code",q.mode=30;break}q.extra=15&Ne,q.mode=22;case 22:if(q.extra){for(Me=q.extra;Y<Me;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}q.length+=te&(1<<q.extra)-1,te>>>=q.extra,Y-=q.extra,q.back+=q.extra}q.was=q.length,q.mode=23;case 23:for(;Ne=(Le=q.distcode[te&(1<<q.distbits)-1])>>>16&255,We=65535&Le,!((Ae=Le>>>24)<=Y);){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if(!(240&Ne)){for(Be=Ae,Se=Ne,$e=We;Ne=(Le=q.distcode[$e+((te&(1<<Be+Se)-1)>>Be)])>>>16&255,We=65535&Le,!(Be+(Ae=Le>>>24)<=Y);){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}te>>>=Be,Y-=Be,q.back+=Be}if(te>>>=Ae,Y-=Ae,q.back+=Ae,64&Ne){G.msg="invalid distance code",q.mode=30;break}q.offset=We,q.extra=15&Ne,q.mode=24;case 24:if(q.extra){for(Me=q.extra;Y<Me;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}q.offset+=te&(1<<q.extra)-1,te>>>=q.extra,Y-=q.extra,q.back+=q.extra}if(q.offset>q.dmax){G.msg="invalid distance too far back",q.mode=30;break}q.mode=25;case 25:if(se===0)break e;if(Ie=ye-se,q.offset>Ie){if((Ie=q.offset-Ie)>q.whave&&q.sane){G.msg="invalid distance too far back",q.mode=30;break}ke=Ie>q.wnext?(Ie-=q.wnext,q.wsize-Ie):q.wnext-Ie,Ie>q.length&&(Ie=q.length),Ce=q.window}else Ce=ve,ke=ce-q.offset,Ie=q.length;for(se<Ie&&(Ie=se),se-=Ie,q.length-=Ie;ve[ce++]=Ce[ke++],--Ie;);q.length===0&&(q.mode=21);break;case 26:if(se===0)break e;ve[ce++]=q.length,se--,q.mode=21;break;case 27:if(q.wrap){for(;Y<32;){if(ue===0)break e;ue--,te|=H[Z++]<<Y,Y+=8}if(ye-=se,G.total_out+=ye,q.total+=ye,ye&&(G.adler=q.check=q.flags?C(q.check,ve,ye,ce-ye):E(q.check,ve,ye,ce-ye)),ye=se,(q.flags?te:L(te))!==q.check){G.msg="incorrect data check",q.mode=30;break}Y=te=0}q.mode=28;case 28:if(q.wrap&&q.flags){for(;Y<32;){if(ue===0)break e;ue--,te+=H[Z++]<<Y,Y+=8}if(te!==(4294967295&q.total)){G.msg="incorrect length check",q.mode=30;break}Y=te=0}q.mode=29;case 29:Oe=1;break e;case 30:Oe=-3;break e;case 31:return-4;case 32:default:return D}return G.next_out=ce,G.avail_out=se,G.next_in=Z,G.avail_in=ue,q.hold=te,q.bits=Y,(q.wsize||ye!==G.avail_out&&q.mode<30&&(q.mode<27||J!==4))&&we(G,G.output,G.next_out,ye-G.avail_out)?(q.mode=31,-4):(be-=G.avail_in,ye-=G.avail_out,G.total_in+=be,G.total_out+=ye,q.total+=ye,q.wrap&&ye&&(G.adler=q.check=q.flags?C(q.check,ve,ye,G.next_out-ye):E(q.check,ve,ye,G.next_out-ye)),G.data_type=q.bits+(q.last?64:0)+(q.mode===12?128:0)+(q.mode===20||q.mode===15?256:0),(be==0&&ye===0||J===4)&&Oe===B&&(Oe=-5),Oe)},x.inflateEnd=function(G){if(!G||!G.state)return D;var J=G.state;return J.window&&(J.window=null),G.state=null,B},x.inflateGetHeader=function(G,J){var q;return G&&G.state&&2&(q=G.state).wrap?((q.head=J).done=!1,B):D},x.inflateSetDictionary=function(G,J){var q,H=J.length;return G&&G.state?(q=G.state).wrap!==0&&q.mode!==11?D:q.mode===11&&E(1,J,H,0)!==q.check?-3:we(G,J,H,H)?(q.mode=31,-4):(q.havedict=1,B):D},x.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(g,_,x){var S=g("../utils/common"),E=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],C=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],T=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],R=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];_.exports=function(A,I,B,D,N,M,O,L){var F,U,j,z,W,X,ie,fe,xe,we=L.bits,G=0,J=0,q=0,H=0,ve=0,Z=0,ce=0,ue=0,se=0,te=0,Y=null,be=0,ye=new S.Buf16(16),Ie=new S.Buf16(16),ke=null,Ce=0;for(G=0;G<=15;G++)ye[G]=0;for(J=0;J<D;J++)ye[I[B+J]]++;for(ve=we,H=15;1<=H&&ye[H]===0;H--);if(H<ve&&(ve=H),H===0)return N[M++]=20971520,N[M++]=20971520,L.bits=1,0;for(q=1;q<H&&ye[q]===0;q++);for(ve<q&&(ve=q),G=ue=1;G<=15;G++)if(ue<<=1,(ue-=ye[G])<0)return-1;if(0<ue&&(A===0||H!==1))return-1;for(Ie[1]=0,G=1;G<15;G++)Ie[G+1]=Ie[G]+ye[G];for(J=0;J<D;J++)I[B+J]!==0&&(O[Ie[I[B+J]]++]=J);if(X=A===0?(Y=ke=O,19):A===1?(Y=E,be-=257,ke=C,Ce-=257,256):(Y=T,ke=R,-1),G=q,W=M,ce=J=te=0,j=-1,z=(se=1<<(Z=ve))-1,A===1&&852<se||A===2&&592<se)return 1;for(;;){for(ie=G-ce,xe=O[J]<X?(fe=0,O[J]):O[J]>X?(fe=ke[Ce+O[J]],Y[be+O[J]]):(fe=96,0),F=1<<G-ce,q=U=1<<Z;N[W+(te>>ce)+(U-=F)]=ie<<24|fe<<16|xe|0,U!==0;);for(F=1<<G-1;te&F;)F>>=1;if(F!==0?(te&=F-1,te+=F):te=0,J++,--ye[G]==0){if(G===H)break;G=I[B+O[J]]}if(ve<G&&(te&z)!==j){for(ce===0&&(ce=ve),W+=q,ue=1<<(Z=G-ce);Z+ce<H&&!((ue-=ye[Z+ce])<=0);)Z++,ue<<=1;if(se+=1<<Z,A===1&&852<se||A===2&&592<se)return 1;N[j=te&z]=ve<<24|Z<<16|W-M|0}}return te!==0&&(N[W+te]=G-ce<<24|64<<16|0),L.bits=ve,0}},{"../utils/common":41}],51:[function(g,_,x){_.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(g,_,x){var S=g("../utils/common"),E=0,C=1;function T(Le){for(var ze=Le.length;0<=--ze;)Le[ze]=0}var R=0,A=29,I=256,B=I+1+A,D=30,N=19,M=2*B+1,O=15,L=16,F=7,U=256,j=16,z=17,W=18,X=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ie=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],fe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],xe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],we=new Array(2*(B+2));T(we);var G=new Array(2*D);T(G);var J=new Array(512);T(J);var q=new Array(256);T(q);var H=new Array(A);T(H);var ve,Z,ce,ue=new Array(D);function se(Le,ze,Je,Qe,rt){this.static_tree=Le,this.extra_bits=ze,this.extra_base=Je,this.elems=Qe,this.max_length=rt,this.has_stree=Le&&Le.length}function te(Le,ze){this.dyn_tree=Le,this.max_code=0,this.stat_desc=ze}function Y(Le){return Le<256?J[Le]:J[256+(Le>>>7)]}function be(Le,ze){Le.pending_buf[Le.pending++]=255&ze,Le.pending_buf[Le.pending++]=ze>>>8&255}function ye(Le,ze,Je){Le.bi_valid>L-Je?(Le.bi_buf|=ze<<Le.bi_valid&65535,be(Le,Le.bi_buf),Le.bi_buf=ze>>L-Le.bi_valid,Le.bi_valid+=Je-L):(Le.bi_buf|=ze<<Le.bi_valid&65535,Le.bi_valid+=Je)}function Ie(Le,ze,Je){ye(Le,Je[2*ze],Je[2*ze+1])}function ke(Le,ze){for(var Je=0;Je|=1&Le,Le>>>=1,Je<<=1,0<--ze;);return Je>>>1}function Ce(Le,ze,Je){var Qe,rt,wt=new Array(O+1),bt=0;for(Qe=1;Qe<=O;Qe++)wt[Qe]=bt=bt+Je[Qe-1]<<1;for(rt=0;rt<=ze;rt++){var xt=Le[2*rt+1];xt!==0&&(Le[2*rt]=ke(wt[xt]++,xt))}}function Ae(Le){var ze;for(ze=0;ze<B;ze++)Le.dyn_ltree[2*ze]=0;for(ze=0;ze<D;ze++)Le.dyn_dtree[2*ze]=0;for(ze=0;ze<N;ze++)Le.bl_tree[2*ze]=0;Le.dyn_ltree[2*U]=1,Le.opt_len=Le.static_len=0,Le.last_lit=Le.matches=0}function Ne(Le){8<Le.bi_valid?be(Le,Le.bi_buf):0<Le.bi_valid&&(Le.pending_buf[Le.pending++]=Le.bi_buf),Le.bi_buf=0,Le.bi_valid=0}function We(Le,ze,Je,Qe){var rt=2*ze,wt=2*Je;return Le[rt]<Le[wt]||Le[rt]===Le[wt]&&Qe[ze]<=Qe[Je]}function Be(Le,ze,Je){for(var Qe=Le.heap[Je],rt=Je<<1;rt<=Le.heap_len&&(rt<Le.heap_len&&We(ze,Le.heap[rt+1],Le.heap[rt],Le.depth)&&rt++,!We(ze,Qe,Le.heap[rt],Le.depth));)Le.heap[Je]=Le.heap[rt],Je=rt,rt<<=1;Le.heap[Je]=Qe}function Se(Le,ze,Je){var Qe,rt,wt,bt,xt=0;if(Le.last_lit!==0)for(;Qe=Le.pending_buf[Le.d_buf+2*xt]<<8|Le.pending_buf[Le.d_buf+2*xt+1],rt=Le.pending_buf[Le.l_buf+xt],xt++,Qe===0?Ie(Le,rt,ze):(Ie(Le,(wt=q[rt])+I+1,ze),(bt=X[wt])!==0&&ye(Le,rt-=H[wt],bt),Ie(Le,wt=Y(--Qe),Je),(bt=ie[wt])!==0&&ye(Le,Qe-=ue[wt],bt)),xt<Le.last_lit;);Ie(Le,U,ze)}function $e(Le,ze){var Je,Qe,rt,wt=ze.dyn_tree,bt=ze.stat_desc.static_tree,xt=ze.stat_desc.has_stree,Et=ze.stat_desc.elems,Rt=-1;for(Le.heap_len=0,Le.heap_max=M,Je=0;Je<Et;Je++)wt[2*Je]!==0?(Le.heap[++Le.heap_len]=Rt=Je,Le.depth[Je]=0):wt[2*Je+1]=0;for(;Le.heap_len<2;)wt[2*(rt=Le.heap[++Le.heap_len]=Rt<2?++Rt:0)]=1,Le.depth[rt]=0,Le.opt_len--,xt&&(Le.static_len-=bt[2*rt+1]);for(ze.max_code=Rt,Je=Le.heap_len>>1;1<=Je;Je--)Be(Le,wt,Je);for(rt=Et;Je=Le.heap[1],Le.heap[1]=Le.heap[Le.heap_len--],Be(Le,wt,1),Qe=Le.heap[1],Le.heap[--Le.heap_max]=Je,Le.heap[--Le.heap_max]=Qe,wt[2*rt]=wt[2*Je]+wt[2*Qe],Le.depth[rt]=(Le.depth[Je]>=Le.depth[Qe]?Le.depth[Je]:Le.depth[Qe])+1,wt[2*Je+1]=wt[2*Qe+1]=rt,Le.heap[1]=rt++,Be(Le,wt,1),2<=Le.heap_len;);Le.heap[--Le.heap_max]=Le.heap[1],function($t,qt){var Ge,De,Ve,Ze,_t,ft,ht=qt.dyn_tree,zt=qt.max_code,Kt=qt.stat_desc.static_tree,Ft=qt.stat_desc.has_stree,Jt=qt.stat_desc.extra_bits,jt=qt.stat_desc.extra_base,rr=qt.stat_desc.max_length,ir=0;for(Ze=0;Ze<=O;Ze++)$t.bl_count[Ze]=0;for(ht[2*$t.heap[$t.heap_max]+1]=0,Ge=$t.heap_max+1;Ge<M;Ge++)rr<(Ze=ht[2*ht[2*(De=$t.heap[Ge])+1]+1]+1)&&(Ze=rr,ir++),ht[2*De+1]=Ze,zt<De||($t.bl_count[Ze]++,_t=0,jt<=De&&(_t=Jt[De-jt]),ft=ht[2*De],$t.opt_len+=ft*(Ze+_t),Ft&&($t.static_len+=ft*(Kt[2*De+1]+_t)));if(ir!==0){do{for(Ze=rr-1;$t.bl_count[Ze]===0;)Ze--;$t.bl_count[Ze]--,$t.bl_count[Ze+1]+=2,$t.bl_count[rr]--,ir-=2}while(0<ir);for(Ze=rr;Ze!==0;Ze--)for(De=$t.bl_count[Ze];De!==0;)zt<(Ve=$t.heap[--Ge])||(ht[2*Ve+1]!==Ze&&($t.opt_len+=(Ze-ht[2*Ve+1])*ht[2*Ve],ht[2*Ve+1]=Ze),De--)}}(Le,ze),Ce(wt,Rt,Le.bl_count)}function _e(Le,ze,Je){var Qe,rt,wt=-1,bt=ze[1],xt=0,Et=7,Rt=4;for(bt===0&&(Et=138,Rt=3),ze[2*(Je+1)+1]=65535,Qe=0;Qe<=Je;Qe++)rt=bt,bt=ze[2*(Qe+1)+1],++xt<Et&&rt===bt||(xt<Rt?Le.bl_tree[2*rt]+=xt:rt!==0?(rt!==wt&&Le.bl_tree[2*rt]++,Le.bl_tree[2*j]++):xt<=10?Le.bl_tree[2*z]++:Le.bl_tree[2*W]++,wt=rt,Rt=(xt=0)===bt?(Et=138,3):rt===bt?(Et=6,3):(Et=7,4))}function Oe(Le,ze,Je){var Qe,rt,wt=-1,bt=ze[1],xt=0,Et=7,Rt=4;for(bt===0&&(Et=138,Rt=3),Qe=0;Qe<=Je;Qe++)if(rt=bt,bt=ze[2*(Qe+1)+1],!(++xt<Et&&rt===bt)){if(xt<Rt)for(;Ie(Le,rt,Le.bl_tree),--xt!=0;);else rt!==0?(rt!==wt&&(Ie(Le,rt,Le.bl_tree),xt--),Ie(Le,j,Le.bl_tree),ye(Le,xt-3,2)):xt<=10?(Ie(Le,z,Le.bl_tree),ye(Le,xt-3,3)):(Ie(Le,W,Le.bl_tree),ye(Le,xt-11,7));wt=rt,Rt=(xt=0)===bt?(Et=138,3):rt===bt?(Et=6,3):(Et=7,4)}}T(ue);var Ke=!1;function Me(Le,ze,Je,Qe){ye(Le,(R<<1)+(Qe?1:0),3),function(rt,wt,bt,xt){Ne(rt),be(rt,bt),be(rt,~bt),S.arraySet(rt.pending_buf,rt.window,wt,bt,rt.pending),rt.pending+=bt}(Le,ze,Je)}x._tr_init=function(Le){Ke||(function(){var ze,Je,Qe,rt,wt,bt=new Array(O+1);for(rt=Qe=0;rt<A-1;rt++)for(H[rt]=Qe,ze=0;ze<1<<X[rt];ze++)q[Qe++]=rt;for(q[Qe-1]=rt,rt=wt=0;rt<16;rt++)for(ue[rt]=wt,ze=0;ze<1<<ie[rt];ze++)J[wt++]=rt;for(wt>>=7;rt<D;rt++)for(ue[rt]=wt<<7,ze=0;ze<1<<ie[rt]-7;ze++)J[256+wt++]=rt;for(Je=0;Je<=O;Je++)bt[Je]=0;for(ze=0;ze<=143;)we[2*ze+1]=8,ze++,bt[8]++;for(;ze<=255;)we[2*ze+1]=9,ze++,bt[9]++;for(;ze<=279;)we[2*ze+1]=7,ze++,bt[7]++;for(;ze<=287;)we[2*ze+1]=8,ze++,bt[8]++;for(Ce(we,B+1,bt),ze=0;ze<D;ze++)G[2*ze+1]=5,G[2*ze]=ke(ze,5);ve=new se(we,X,I+1,B,O),Z=new se(G,ie,0,D,O),ce=new se(new Array(0),fe,0,N,F)}(),Ke=!0),Le.l_desc=new te(Le.dyn_ltree,ve),Le.d_desc=new te(Le.dyn_dtree,Z),Le.bl_desc=new te(Le.bl_tree,ce),Le.bi_buf=0,Le.bi_valid=0,Ae(Le)},x._tr_stored_block=Me,x._tr_flush_block=function(Le,ze,Je,Qe){var rt,wt,bt=0;0<Le.level?(Le.strm.data_type===2&&(Le.strm.data_type=function(xt){var Et,Rt=4093624447;for(Et=0;Et<=31;Et++,Rt>>>=1)if(1&Rt&&xt.dyn_ltree[2*Et]!==0)return E;if(xt.dyn_ltree[18]!==0||xt.dyn_ltree[20]!==0||xt.dyn_ltree[26]!==0)return C;for(Et=32;Et<I;Et++)if(xt.dyn_ltree[2*Et]!==0)return C;return E}(Le)),$e(Le,Le.l_desc),$e(Le,Le.d_desc),bt=function(xt){var Et;for(_e(xt,xt.dyn_ltree,xt.l_desc.max_code),_e(xt,xt.dyn_dtree,xt.d_desc.max_code),$e(xt,xt.bl_desc),Et=N-1;3<=Et&&xt.bl_tree[2*xe[Et]+1]===0;Et--);return xt.opt_len+=3*(Et+1)+5+5+4,Et}(Le),rt=Le.opt_len+3+7>>>3,(wt=Le.static_len+3+7>>>3)<=rt&&(rt=wt)):rt=wt=Je+5,Je+4<=rt&&ze!==-1?Me(Le,ze,Je,Qe):Le.strategy===4||wt===rt?(ye(Le,2+(Qe?1:0),3),Se(Le,we,G)):(ye(Le,4+(Qe?1:0),3),function(xt,Et,Rt,$t){var qt;for(ye(xt,Et-257,5),ye(xt,Rt-1,5),ye(xt,$t-4,4),qt=0;qt<$t;qt++)ye(xt,xt.bl_tree[2*xe[qt]+1],3);Oe(xt,xt.dyn_ltree,Et-1),Oe(xt,xt.dyn_dtree,Rt-1)}(Le,Le.l_desc.max_code+1,Le.d_desc.max_code+1,bt+1),Se(Le,Le.dyn_ltree,Le.dyn_dtree)),Ae(Le),Qe&&Ne(Le)},x._tr_tally=function(Le,ze,Je){return Le.pending_buf[Le.d_buf+2*Le.last_lit]=ze>>>8&255,Le.pending_buf[Le.d_buf+2*Le.last_lit+1]=255&ze,Le.pending_buf[Le.l_buf+Le.last_lit]=255&Je,Le.last_lit++,ze===0?Le.dyn_ltree[2*Je]++:(Le.matches++,ze--,Le.dyn_ltree[2*(q[Je]+I+1)]++,Le.dyn_dtree[2*Y(ze)]++),Le.last_lit===Le.lit_bufsize-1},x._tr_align=function(Le){ye(Le,2,3),Ie(Le,U,we),function(ze){ze.bi_valid===16?(be(ze,ze.bi_buf),ze.bi_buf=0,ze.bi_valid=0):8<=ze.bi_valid&&(ze.pending_buf[ze.pending++]=255&ze.bi_buf,ze.bi_buf>>=8,ze.bi_valid-=8)}(Le)}},{"../utils/common":41}],53:[function(g,_,x){_.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(g,_,x){(function(S){(function(E,C){if(!E.setImmediate){var T,R,A,I,B=1,D={},N=!1,M=E.document,O=Object.getPrototypeOf&&Object.getPrototypeOf(E);O=O&&O.setTimeout?O:E,T={}.toString.call(E.process)==="[object process]"?function(j){process$1.nextTick(function(){F(j)})}:function(){if(E.postMessage&&!E.importScripts){var j=!0,z=E.onmessage;return E.onmessage=function(){j=!1},E.postMessage("","*"),E.onmessage=z,j}}()?(I="setImmediate$"+Math.random()+"$",E.addEventListener?E.addEventListener("message",U,!1):E.attachEvent("onmessage",U),function(j){E.postMessage(I+j,"*")}):E.MessageChannel?((A=new MessageChannel).port1.onmessage=function(j){F(j.data)},function(j){A.port2.postMessage(j)}):M&&"onreadystatechange"in M.createElement("script")?(R=M.documentElement,function(j){var z=M.createElement("script");z.onreadystatechange=function(){F(j),z.onreadystatechange=null,R.removeChild(z),z=null},R.appendChild(z)}):function(j){setTimeout(F,0,j)},O.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var z=new Array(arguments.length-1),W=0;W<z.length;W++)z[W]=arguments[W+1];var X={callback:j,args:z};return D[B]=X,T(B),B++},O.clearImmediate=L}function L(j){delete D[j]}function F(j){if(N)setTimeout(F,0,j);else{var z=D[j];if(z){N=!0;try{(function(W){var X=W.callback,ie=W.args;switch(ie.length){case 0:X();break;case 1:X(ie[0]);break;case 2:X(ie[0],ie[1]);break;case 3:X(ie[0],ie[1],ie[2]);break;default:X.apply(C,ie)}})(z)}finally{L(j),N=!1}}}}function U(j){j.source===E&&typeof j.data=="string"&&j.data.indexOf(I)===0&&F(+j.data.slice(I.length))}})(typeof self>"u"?S===void 0?this:S:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(jszip_min)),jszip_min.exports}var jszip_minExports=requireJszip_min();const JSZip=getDefaultExportFromCjs(jszip_minExports),e=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})();e?Promise.resolve().then(function(){return l}):Promise.resolve().then(function(){return v});e?Promise.resolve().then(function(){return y}):Promise.resolve().then(function(){return b});const a=e?Promise.resolve().then(function(){return m}):Promise.resolve().then(function(){return k});async function o(...n){return(await a).default(...n)}const s=async n=>{const r=await n.getFile();return r.handle=n,r};var c=async(n=[{}])=>{Array.isArray(n)||(n=[n]);const r=[];n.forEach((x,S)=>{r[S]={description:x.description||"Files",accept:{}},x.mimeTypes?x.mimeTypes.map(E=>{r[S].accept[E]=x.extensions||[]}):r[S].accept["*/*"]=x.extensions||[]});const g=await window.showOpenFilePicker({id:n[0].id,startIn:n[0].startIn,types:r,multiple:n[0].multiple||!1,excludeAcceptAllOption:n[0].excludeAcceptAllOption||!1}),_=await Promise.all(g.map(s));return n[0].multiple?_:_[0]},l={__proto__:null,default:c};function u(n){function r(g){if(Object(g)!==g)return Promise.reject(new TypeError(g+" is not an object."));var _=g.done;return Promise.resolve(g.value).then(function(x){return{value:x,done:_}})}return u=function(g){this.s=g,this.n=g.next},u.prototype={s:null,n:null,next:function(){return r(this.n.apply(this.s,arguments))},return:function(g){var _=this.s.return;return _===void 0?Promise.resolve({value:g,done:!0}):r(_.apply(this.s,arguments))},throw:function(g){var _=this.s.return;return _===void 0?Promise.reject(g):r(_.apply(this.s,arguments))}},new u(n)}const p=async(n,r,g=n.name,_)=>{const x=[],S=[];var E,C=!1,T=!1;try{for(var R,A=function(I){var B,D,N,M=2;for(typeof Symbol<"u"&&(D=Symbol.asyncIterator,N=Symbol.iterator);M--;){if(D&&(B=I[D])!=null)return B.call(I);if(N&&(B=I[N])!=null)return new u(B.call(I));D="@@asyncIterator",N="@@iterator"}throw new TypeError("Object is not async iterable")}(n.values());C=!(R=await A.next()).done;C=!1){const I=R.value,B=`${g}/${I.name}`;I.kind==="file"?S.push(I.getFile().then(D=>(D.directoryHandle=n,D.handle=I,Object.defineProperty(D,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>B})))):I.kind!=="directory"||!r||_&&_(I)||x.push(p(I,r,B,_))}}catch(I){T=!0,E=I}finally{try{C&&A.return!=null&&await A.return()}finally{if(T)throw E}}return[...(await Promise.all(x)).flat(),...await Promise.all(S)]};var d=async(n={})=>{n.recursive=n.recursive||!1,n.mode=n.mode||"read";const r=await window.showDirectoryPicker({id:n.id,startIn:n.startIn,mode:n.mode});return(await(await r.values()).next()).done?[r]:p(r,n.recursive,void 0,n.skipDirectory)},y={__proto__:null,default:d},f=async(n,r=[{}],g=null,_=!1,x=null)=>{Array.isArray(r)||(r=[r]),r[0].fileName=r[0].fileName||"Untitled";const S=[];let E=null;if(n instanceof Blob&&n.type?E=n.type:n.headers&&n.headers.get("content-type")&&(E=n.headers.get("content-type")),r.forEach((R,A)=>{S[A]={description:R.description||"Files",accept:{}},R.mimeTypes?(A===0&&E&&R.mimeTypes.push(E),R.mimeTypes.map(I=>{S[A].accept[I]=R.extensions||[]})):E?S[A].accept[E]=R.extensions||[]:S[A].accept["*/*"]=R.extensions||[]}),g)try{await g.getFile()}catch(R){if(g=null,_)throw R}const C=g||await window.showSaveFilePicker({suggestedName:r[0].fileName,id:r[0].id,startIn:r[0].startIn,types:S,excludeAcceptAllOption:r[0].excludeAcceptAllOption||!1});!g&&x&&x(C);const T=await C.createWritable();return"stream"in n?(await n.stream().pipeTo(T),C):"body"in n?(await n.body.pipeTo(T),C):(await T.write(await n),await T.close(),C)},m={__proto__:null,default:f},w=async(n=[{}])=>(Array.isArray(n)||(n=[n]),new Promise((r,g)=>{const _=document.createElement("input");_.type="file";const x=[...n.map(T=>T.mimeTypes||[]),...n.map(T=>T.extensions||[])].join();_.multiple=n[0].multiple||!1,_.accept=x||"",_.style.display="none",document.body.append(_);const S=T=>{typeof E=="function"&&E(),r(T)},E=n[0].legacySetup&&n[0].legacySetup(S,()=>E(g),_),C=()=>{window.removeEventListener("focus",C),_.remove()};_.addEventListener("click",()=>{window.addEventListener("focus",C)}),_.addEventListener("change",()=>{window.removeEventListener("focus",C),_.remove(),S(_.multiple?Array.from(_.files):_.files[0])}),"showPicker"in HTMLInputElement.prototype?_.showPicker():_.click()})),v={__proto__:null,default:w},h=async(n=[{}])=>(Array.isArray(n)||(n=[n]),n[0].recursive=n[0].recursive||!1,new Promise((r,g)=>{const _=document.createElement("input");_.type="file",_.webkitdirectory=!0;const x=E=>{typeof S=="function"&&S(),r(E)},S=n[0].legacySetup&&n[0].legacySetup(x,()=>S(g),_);_.addEventListener("change",()=>{let E=Array.from(_.files);n[0].recursive?n[0].recursive&&n[0].skipDirectory&&(E=E.filter(C=>C.webkitRelativePath.split("/").every(T=>!n[0].skipDirectory({name:T,kind:"directory"})))):E=E.filter(C=>C.webkitRelativePath.split("/").length===2),x(E)}),"showPicker"in HTMLInputElement.prototype?_.showPicker():_.click()})),b={__proto__:null,default:h},P=async(n,r={})=>{Array.isArray(r)&&(r=r[0]);const g=document.createElement("a");let _=n;"body"in n&&(_=await async function(E,C){const T=E.getReader(),R=new ReadableStream({start:B=>async function D(){return T.read().then(({done:N,value:M})=>{if(!N)return B.enqueue(M),D();B.close()})}()}),A=new Response(R),I=await A.blob();return T.releaseLock(),new Blob([I],{type:C})}(n.body,n.headers.get("content-type"))),g.download=r.fileName||"Untitled",g.href=URL.createObjectURL(await _);const x=()=>{typeof S=="function"&&S()},S=r.legacySetup&&r.legacySetup(x,()=>S(),g);return g.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(g.href),3e4),x()}),g.click(),null},k={__proto__:null,default:P},pathBrowserify,hasRequiredPathBrowserify;function requirePathBrowserify(){if(hasRequiredPathBrowserify)return pathBrowserify;hasRequiredPathBrowserify=1;function n(x){if(typeof x!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(x))}function r(x,S){for(var E="",C=0,T=-1,R=0,A,I=0;I<=x.length;++I){if(I<x.length)A=x.charCodeAt(I);else{if(A===47)break;A=47}if(A===47){if(!(T===I-1||R===1))if(T!==I-1&&R===2){if(E.length<2||C!==2||E.charCodeAt(E.length-1)!==46||E.charCodeAt(E.length-2)!==46){if(E.length>2){var B=E.lastIndexOf("/");if(B!==E.length-1){B===-1?(E="",C=0):(E=E.slice(0,B),C=E.length-1-E.lastIndexOf("/")),T=I,R=0;continue}}else if(E.length===2||E.length===1){E="",C=0,T=I,R=0;continue}}S&&(E.length>0?E+="/..":E="..",C=2)}else E.length>0?E+="/"+x.slice(T+1,I):E=x.slice(T+1,I),C=I-T-1;T=I,R=0}else A===46&&R!==-1?++R:R=-1}return E}function g(x,S){var E=S.dir||S.root,C=S.base||(S.name||"")+(S.ext||"");return E?E===S.root?E+C:E+x+C:C}var _={resolve:function(){for(var S="",E=!1,C,T=arguments.length-1;T>=-1&&!E;T--){var R;T>=0?R=arguments[T]:(C===void 0&&(C=process$1.cwd()),R=C),n(R),R.length!==0&&(S=R+"/"+S,E=R.charCodeAt(0)===47)}return S=r(S,!E),E?S.length>0?"/"+S:"/":S.length>0?S:"."},normalize:function(S){if(n(S),S.length===0)return".";var E=S.charCodeAt(0)===47,C=S.charCodeAt(S.length-1)===47;return S=r(S,!E),S.length===0&&!E&&(S="."),S.length>0&&C&&(S+="/"),E?"/"+S:S},isAbsolute:function(S){return n(S),S.length>0&&S.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var S,E=0;E<arguments.length;++E){var C=arguments[E];n(C),C.length>0&&(S===void 0?S=C:S+="/"+C)}return S===void 0?".":_.normalize(S)},relative:function(S,E){if(n(S),n(E),S===E||(S=_.resolve(S),E=_.resolve(E),S===E))return"";for(var C=1;C<S.length&&S.charCodeAt(C)===47;++C);for(var T=S.length,R=T-C,A=1;A<E.length&&E.charCodeAt(A)===47;++A);for(var I=E.length,B=I-A,D=R<B?R:B,N=-1,M=0;M<=D;++M){if(M===D){if(B>D){if(E.charCodeAt(A+M)===47)return E.slice(A+M+1);if(M===0)return E.slice(A+M)}else R>D&&(S.charCodeAt(C+M)===47?N=M:M===0&&(N=0));break}var O=S.charCodeAt(C+M),L=E.charCodeAt(A+M);if(O!==L)break;O===47&&(N=M)}var F="";for(M=C+N+1;M<=T;++M)(M===T||S.charCodeAt(M)===47)&&(F.length===0?F+="..":F+="/..");return F.length>0?F+E.slice(A+N):(A+=N,E.charCodeAt(A)===47&&++A,E.slice(A))},_makeLong:function(S){return S},dirname:function(S){if(n(S),S.length===0)return".";for(var E=S.charCodeAt(0),C=E===47,T=-1,R=!0,A=S.length-1;A>=1;--A)if(E=S.charCodeAt(A),E===47){if(!R){T=A;break}}else R=!1;return T===-1?C?"/":".":C&&T===1?"//":S.slice(0,T)},basename:function(S,E){if(E!==void 0&&typeof E!="string")throw new TypeError('"ext" argument must be a string');n(S);var C=0,T=-1,R=!0,A;if(E!==void 0&&E.length>0&&E.length<=S.length){if(E.length===S.length&&E===S)return"";var I=E.length-1,B=-1;for(A=S.length-1;A>=0;--A){var D=S.charCodeAt(A);if(D===47){if(!R){C=A+1;break}}else B===-1&&(R=!1,B=A+1),I>=0&&(D===E.charCodeAt(I)?--I===-1&&(T=A):(I=-1,T=B))}return C===T?T=B:T===-1&&(T=S.length),S.slice(C,T)}else{for(A=S.length-1;A>=0;--A)if(S.charCodeAt(A)===47){if(!R){C=A+1;break}}else T===-1&&(R=!1,T=A+1);return T===-1?"":S.slice(C,T)}},extname:function(S){n(S);for(var E=-1,C=0,T=-1,R=!0,A=0,I=S.length-1;I>=0;--I){var B=S.charCodeAt(I);if(B===47){if(!R){C=I+1;break}continue}T===-1&&(R=!1,T=I+1),B===46?E===-1?E=I:A!==1&&(A=1):E!==-1&&(A=-1)}return E===-1||T===-1||A===0||A===1&&E===T-1&&E===C+1?"":S.slice(E,T)},format:function(S){if(S===null||typeof S!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof S);return g("/",S)},parse:function(S){n(S);var E={root:"",dir:"",base:"",ext:"",name:""};if(S.length===0)return E;var C=S.charCodeAt(0),T=C===47,R;T?(E.root="/",R=1):R=0;for(var A=-1,I=0,B=-1,D=!0,N=S.length-1,M=0;N>=R;--N){if(C=S.charCodeAt(N),C===47){if(!D){I=N+1;break}continue}B===-1&&(D=!1,B=N+1),C===46?A===-1?A=N:M!==1&&(M=1):A!==-1&&(M=-1)}return A===-1||B===-1||M===0||M===1&&A===B-1&&A===I+1?B!==-1&&(I===0&&T?E.base=E.name=S.slice(1,B):E.base=E.name=S.slice(I,B)):(I===0&&T?(E.name=S.slice(1,A),E.base=S.slice(1,B)):(E.name=S.slice(I,A),E.base=S.slice(I,B)),E.ext=S.slice(A,B)),I>0?E.dir=S.slice(0,I-1):T&&(E.dir="/"),E},sep:"/",delimiter:":",win32:null,posix:null};return _.posix=_,pathBrowserify=_,pathBrowserify}var pathBrowserifyExports=requirePathBrowserify();const path=getDefaultExportFromCjs(pathBrowserifyExports),index$1=_mergeNamespaces({__proto__:null,default:path},[pathBrowserifyExports]);var isElectron_1,hasRequiredIsElectron;function requireIsElectron(){if(hasRequiredIsElectron)return isElectron_1;hasRequiredIsElectron=1;function n(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process$1<"u"&&typeof process$1.versions=="object"&&process$1.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}return isElectron_1=n,isElectron_1}var isElectronExports=requireIsElectron();const detectElectron=getDefaultExportFromCjs(isElectronExports),isEnvWithDom=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,isElectron=detectElectron(),isBrowser$1=isEnvWithDom&&!isElectron,isElectronMain=isElectron&&!isEnvWithDom,isElectronRenderer=isElectron&&isEnvWithDom,isNode=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!isElectron,isWebWorker=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";function traduire(n,r){const g=r.find(S=>n[S]!==void 0),_=Object.values(n)[0];return g?n[g]:_}async function zipper(n,r,g){g.endsWith(".zip")||(g=`${g}.zip`);const _=new JSZip;for(const S of n)_.file(S.nom,S.octets);const x=_.folder("sfip");for(const S of r)x.file(S.nom,S.octets);await sauvegarderFichierZip({fichierZip:_,nomFichier:g})}async function sauvegarderFichierZip({fichierZip:n,nomFichier:r}){if(isNode||isElectronMain){const g=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url),_=n.generateNodeStream();g.mkdirSync(path.dirname(r),{recursive:!0});const x=g.createWriteStream(r),S=_.pipe(x);return new Promise(E=>S.on("finish",E))}else{const g=await n.generateAsync({type:"blob"});await o(g,{fileName:r})}}function idcValide(n){if(typeof n=="string")try{return CID$1.parse(n),!0}catch{return!1}return!1}async function toBuffer$2(n,r){let g=new Uint8Array(0);for await(const _ of n)if(g=concat([g,_],g.length+_.length),r!==void 0&&g.length>r)return null;return g}let ÉmetteurUneFois$2=class extends eventsExports.EventEmitter{condition;résultatPrêt;fOublier;résultat;f;constructor(r,g){super(),this.condition=g||(()=>!0),this.résultatPrêt=!1,this.f=r,this.initialiser()}async initialiser(){const r=async g=>{await this.condition(g)&&(this.résultat=g,this.résultatPrêt=!0,this.fOublier&&this.lorsquePrêt())};this.fOublier=await this.f(r),this.lorsquePrêt()}lorsquePrêt(){if(this.résultatPrêt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.résultat)}}};const suivreBdDeFonction$1=async({fRacine:n,f:r,fSuivre:g})=>{let _,x,S=!0;const E=await n({fSuivreRacine:async C=>{C===void 0&&S&&(S=!1,await r(void 0)),C!==x&&(x=C,_&&await _(),x?_=await g({id:x,fSuivreBd:r}):(await r(void 0),_=void 0))}});return async()=>{await E(),_&&await _()}},uneFois$2=async function(n,r){const g=new ÉmetteurUneFois$2(n,r);return(await eventsExports.once(g,"fini"))[0]},faisRien$1=async()=>{},ignorerNonDéfinis$1=n=>async r=>{if(r!==void 0)return await n(r)},attendreStabilité$1=n=>{let r=!1,g,_=faisRien$1;return x=>new Promise(S=>{if(r&&JSON.stringify(x)===g)return;r=!0,_(),g=JSON.stringify(x);const E=setTimeout(()=>S(!0),n);_=()=>{clearTimeout(E),S(!1)}})},suivreBdsDeFonctionListe$1=async({fListe:n,f:r,fBranche:g,fIdBdDeBranche:_=E=>E,fRéduction:x=E=>[...new Set(E.flat())],fCode:S=E=>E})=>{const E={},C={};let T=!1;const R=async()=>{if(!T||Object.values(E).length&&Object.values(E).every(L=>!L.déjàÉvaluée))return;const M=Object.values(E).map(L=>L.données).filter(L=>L!==void 0),O=x(M);await r(O)},A=new s$2,B=await n(async M=>{if(await A.acquire("racine"),M.some(z=>typeof S(z)!="string"))throw console.error("Définir fCode si les éléments ne sont pas en format texte (chaînes)."),new Error("Définir fCode si les éléments ne sont pas en format texte (chaînes).");const O=Object.fromEntries(M.map(z=>[S(z),z])),L=Object.keys(E);let F=Object.keys(O).filter(z=>!L.includes(z));const U=L.filter(z=>!Object.keys(O).includes(z)),j=Object.entries(O).filter(z=>!deepEqual$2(C[z[0]],z[1])).map(z=>z[0]);F.push(...j),F=[...new Set(F)],await Promise.all(j.map(async z=>{if(E[z]){const W=E[z].fOublier;W&&await W(),delete E[z]}})),await Promise.all(U.map(async z=>{const W=E[z].fOublier;W&&await W(),delete E[z]})),await Promise.all(F.map(async z=>{E[z]={déjàÉvaluée:!1};const W=O[z];C[z]=W;const X=_(W),fe=await g(X,async xe=>{E[z].données=xe,E[z].déjàÉvaluée=!0,await R()},W);E[z].fOublier=fe})),T=!0,await R(),A.release("racine")});let D;const N=async()=>{await D(),await Promise.all(Object.values(E).map(M=>M.fOublier&&M.fOublier()))};return typeof B=="function"?(D=B,N):(D=B.fOublier,Object.assign({},B,{fOublier:N}))};var geojsonValidation={},hasRequiredGeojsonValidation;function requireGeojsonValidation(){return hasRequiredGeojsonValidation||(hasRequiredGeojsonValidation=1,function(n){const r={};function g(A){return typeof A=="function"}function _(A){return A===Object(A)}function x(A,I){let B=!1;return typeof I=="string"?I=[I]:Object.prototype.toString.call(I)==="[object Array]"?I.length===0&&(B=!0):B=!0,A?I:B}function S(A,I){let B;if(g(r[A])){try{B=r[A](I)}catch(D){B=["Problem with custom definition for "+A+": "+D]}if(typeof result=="string"&&(B=[B]),Object.prototype.toString.call(B)==="[object Array]")return B}return[]}n.define=(A,I)=>A in R&&g(I)?(r[A]=I,!0):!1,n.isPosition=(A,I=!1)=>{let B=[];return Array.isArray(A)?(A.length<=1&&B.push("Position must be at least two elements"),A.forEach((D,N)=>{typeof D!="number"&&B.push("Position must only contain numbers. Item "+D+" at index "+N+" is invalid.")})):B.push("Position must be an array"),B=B.concat(S("Position",A)),x(I,B)},n.isGeoJSONObject=n.valid=(A,I=!1)=>{if(_(A)){let B=[];if("type"in A){if(C[A.type])return C[A.type](A,I);if(T[A.type])return T[A.type](A,I);B.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else B.push('must have a member with the name "type"');return B=B.concat(S("GeoJSONObject",A)),x(I,B)}else return x(I,["must be a JSON Object"])},n.isGeometryObject=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("type"in A){if(T[A.type])return T[A.type](A,I);B.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else B.push('must have a member with the name "type"');return B=B.concat(S("GeometryObject",A)),x(I,B)},n.isPoint=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("bbox"in A){const D=n.isBbox(A.bbox,!0);D.length&&(B=B.concat(D))}if("type"in A?A.type!=="Point"&&B.push('type must be "Point"'):B.push('must have a member with the name "type"'),"coordinates"in A){const D=n.isPosition(A.coordinates,!0);D.length&&(B=B.concat(D))}else B.push('must have a member with the name "coordinates"');return B=B.concat(S("Point",A)),x(I,B)},n.isMultiPointCoor=(A,I=!1)=>{let B=[];return Array.isArray(A)?A.forEach((D,N)=>{const M=n.isPosition(D,!0);M.length&&(M[0]="at "+N+": ".concat(M[0]),B=B.concat(M))}):B.push("coordinates must be an array"),x(I,B)},n.isMultiPoint=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("bbox"in A){const D=n.isBbox(A.bbox,!0);D.length&&(B=B.concat(D))}if("type"in A?A.type!=="MultiPoint"&&B.push('type must be "MultiPoint"'):B.push('must have a member with the name "type"'),"coordinates"in A){const D=n.isMultiPointCoor(A.coordinates,!0);D.length&&(B=B.concat(D))}else B.push('must have a member with the name "coordinates"');return B=B.concat(S("MultiPoint",A)),x(I,B)},n.isLineStringCoor=(A,I=!1)=>{let B=[];return Array.isArray(A)?A.length>1?A.forEach((D,N)=>{const M=n.isPosition(D,!0);M.length&&(M[0]="at "+N+": ".concat(M[0]),B=B.concat(M))}):B.push("coordinates must have at least two elements"):B.push("coordinates must be an array"),x(I,B)},n.isLineString=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("bbox"in A){const D=n.isBbox(A.bbox,!0);D.length&&(B=B.concat(D))}if("type"in A?A.type!=="LineString"&&B.push('type must be "LineString"'):B.push('must have a member with the name "type"'),"coordinates"in A){const D=n.isLineStringCoor(A.coordinates,!0);D.length&&(B=B.concat(D))}else B.push('must have a member with the name "coordinates"');return B=B.concat(S("LineString",A)),x(I,B)},n.isMultiLineStringCoor=(A,I=!1)=>{let B=[];return Array.isArray(A)?A.forEach((D,N)=>{const M=n.isLineStringCoor(D,!0);M.length&&(M[0]="at "+N+": ".concat(M[0]),B=B.concat(M))}):B.push("coordinates must be an array"),x(I,B)},n.isMultiLineString=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("bbox"in A){const D=n.isBbox(A.bbox,!0);D.length&&(B=B.concat(D))}if("type"in A?A.type!=="MultiLineString"&&B.push('type must be "MultiLineString"'):B.push('must have a member with the name "type"'),"coordinates"in A){const D=n.isMultiLineStringCoor(A.coordinates,!0);D.length&&(B=B.concat(D))}else B.push('must have a member with the name "coordinates"');return B=B.concat(S("MultiPoint",A)),x(I,B)};function E(A,I){let B=[];return Array.isArray(A)?(A.forEach((D,N)=>{const M=n.isPosition(D,!0);M.length&&(M[0]="at "+N+": ".concat(M[0]),B=B.concat(M))}),A[0].toString()!==A[A.length-1].toString()&&B.push("The first and last positions must be equivalent"),A.length<4&&B.push("coordinates must have at least four positions")):B.push("coordinates must be an array"),x(I,B)}n.isPolygonCoor=(A,I=!1)=>{let B=[];return Array.isArray(A)?A.forEach((D,N)=>{const M=E(D,!0);M.length&&(M[0]="at "+N+": ".concat(M[0]),B=B.concat(M))}):B.push("coordinates must be an array"),x(I,B)},n.isPolygon=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("bbox"in A){const D=n.isBbox(A.bbox,!0);D.length&&(B=B.concat(D))}if("type"in A?A.type!=="Polygon"&&B.push('type must be "Polygon"'):B.push('must have a member with the name "type"'),"coordinates"in A){const D=n.isPolygonCoor(A.coordinates,!0);D.length&&(B=B.concat(D))}else B.push('must have a member with the name "coordinates"');return B=B.concat(S("Polygon",A)),x(I,B)},n.isMultiPolygonCoor=(A,I=!1)=>{let B=[];return Array.isArray(A)?A.forEach((D,N)=>{const M=n.isPolygonCoor(D,!0);M.length&&(M[0]="at "+N+": ".concat(M[0]),B=B.concat(M))}):B.push("coordinates must be an array"),x(I,B)},n.isMultiPolygon=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("bbox"in A){const D=n.isBbox(A.bbox,!0);D.length&&(B=B.concat(D))}if("type"in A?A.type!=="MultiPolygon"&&B.push('type must be "MultiPolygon"'):B.push('must have a member with the name "type"'),"coordinates"in A){const D=n.isMultiPolygonCoor(A.coordinates,!0);D.length&&(B=B.concat(D))}else B.push('must have a member with the name "coordinates"');return B=B.concat(S("MultiPolygon",A)),x(I,B)},n.isGeometryCollection=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("bbox"in A){const D=n.isBbox(A.bbox,!0);D.length&&(B=B.concat(D))}return"type"in A?A.type!=="GeometryCollection"&&B.push('type must be "GeometryCollection"'):B.push('must have a member with the name "type"'),"geometries"in A?Array.isArray(A.geometries)?A.geometries.forEach((D,N)=>{const M=n.isGeometryObject(D,!0);M.length&&(M[0]="at "+N+": ".concat(M[0]),B=B.concat(M))}):B.push('"geometries" must be an array'):B.push('must have a member with the name "geometries"'),B=B.concat(S("GeometryCollection",A)),x(I,B)},n.isFeature=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("bbox"in A){const D=n.isBbox(A.bbox,!0);D.length&&(B=B.concat(D))}if("type"in A?A.type!=="Feature"&&B.push('type must be "Feature"'):B.push('must have a member with the name "type"'),"properties"in A||B.push('must have a member with the name "properties"'),"geometry"in A){if(A.geometry!==null){const D=n.isGeometryObject(A.geometry,!0);D.length&&(B=B.concat(D))}}else B.push('must have a member with the name "geometry"');return B=B.concat(S("Feature",A)),x(I,B)},n.isFeatureCollection=(A,I=!1)=>{if(!_(A))return x(I,["must be a JSON Object"]);let B=[];if("bbox"in A){const D=n.isBbox(A.bbox,!0);D.length&&(B=D)}return"type"in A?A.type!=="FeatureCollection"&&B.push('type must be "FeatureCollection"'):B.push('must have a member with the name "type"'),"features"in A?Array.isArray(A.features)?A.features.forEach((D,N)=>{const M=n.isFeature(D,!0);M.length&&(M[0]="at "+N+": ".concat(M[0]),B=B.concat(M))}):B.push('"Features" must be an array'):B.push('must have a member with the name "Features"'),B=B.concat(S("FeatureCollection",A)),x(I,B)},n.isBbox=(A,I=!1)=>{let B=[];return Array.isArray(A)?A.length%2!==0&&B.push("bbox, must be a 2*n array"):B.push("bbox must be an array"),B=B.concat(S("Bbox",A)),x(I,B)};const C={Feature:n.isFeature,FeatureCollection:n.isFeatureCollection},T={Point:n.isPoint,MultiPoint:n.isMultiPoint,LineString:n.isLineString,MultiLineString:n.isMultiLineString,Polygon:n.isPolygon,MultiPolygon:n.isMultiPolygon,GeometryCollection:n.isGeometryCollection},R={Feature:n.isFeature,FeatureCollection:n.isFeatureCollection,Point:n.isPoint,MultiPoint:n.isMultiPoint,LineString:n.isLineString,MultiLineString:n.isMultiLineString,Polygon:n.isPolygon,MultiPolygon:n.isMultiPolygon,GeometryCollection:n.isGeometryCollection,Bbox:n.isBbox,Position:n.isPosition,GeoJSON:n.isGeoJSONObject,GeometryObject:n.isGeometryObject};n.allTypes=R}(geojsonValidation)),geojsonValidation}var geojsonValidationExports=requireGeojsonValidation();const gjv=getDefaultExportFromCjs(geojsonValidationExports),estSpécificationHoroDatage$1=n=>!!n&&typeof n.système=="string"&&typeof n.val=="string";let Cholqij$1=class{lireDate(r){const{système:g,val:_}=r;switch(g){case"dateJS":case"grégorien":{const x=new Date(_);if(isNaN(x.valueOf()))throw new Error(_);return x}default:throw new Error(g)}}dateValide(r){if(!estSpécificationHoroDatage$1(r))return!1;try{return this.lireDate(r),!0}catch{return!1}}};const cholqij$1=new Cholqij$1,adresseOrbiteValide=n=>{if(n=n.toString(),!n.startsWith("/orbitdb")&&!n.startsWith("\\orbitdb"))return!1;n=n.replaceAll("/orbitdb/",""),n=n.replaceAll("\\orbitdb\\",""),n=n.replaceAll("/",""),n=n.replaceAll("\\","");let r;try{r=CID$1.parse(n,base58btc$1)}catch{return!1}return r!==void 0},formatsFichiers={images:["webp","svg","png","jpg","jpeg","jfif","pjpeg","pjp","gif","avif","apng"],vidéo:["mp4"],audio:["mp3","ogg","m4a"]},idcEtExt=n=>{try{const[r,g]=n.split("/");if(idcValide(r)){const _=g.split(".").pop();if(_)return{ext:_,fichier:g,id:r}}}catch{}},devinerCatégorie=n=>{if(typeof n=="boolean")return"booléen";if(typeof n=="string"){try{const[r,g]=n.split("/");if(idcValide(r)){const _=g.split(".").pop();if(_&&formatsFichiers.images.includes(_))return"image";if(_&&formatsFichiers.vidéo.includes(_))return"vidéo";if(_&&formatsFichiers.audio.includes(_))return"audio";if(_)return"fichier"}}catch{}return adresseOrbiteValide(n)?"chaîne":"chaîneNonTraductible"}else{if(typeof n=="number")return n>1e11?"horoDatage":"numérique";if(Array.isArray(n))return n.length===2&&n.every(r=>typeof r=="number"&&r>1e11)?"intervaleTemps":void 0;if(gjv.valid(n))return"géojson"}},estUnHoroDatage=n=>{if(["number","string"].includes(typeof n)){const r=new Date(n);return!isNaN(r.valueOf())}else return cholqij$1.dateValide(n)},validFichier=(n,r)=>{if(typeof n!="string")return!1;let g,_;try{[g,_]=n.split("/")}catch{return!1}if(!_||!idcValide(g))return!1;if(r){const x=_.split(".").pop();return!!x&&r.includes(x)}return!0},validerCatégorieBase=({catégorie:n,val:r})=>{switch(n){case"numérique":return typeof r=="number";case"horoDatage":return estUnHoroDatage(r);case"intervaleTemps":return!Array.isArray(r)||r.length!==2?!1:r.every(g=>estUnHoroDatage(g));case"chaîne":return typeof r=="string"&&adresseOrbiteValide(r);case"chaîneNonTraductible":return typeof r=="string";case"booléen":return typeof r=="boolean";case"géojson":return typeof r!="object"?!1:gjv.valid(r);case"vidéo":return validFichier(r,formatsFichiers.vidéo);case"audio":return validFichier(r,formatsFichiers.audio);case"image":return validFichier(r,formatsFichiers.images);case"fichier":return validFichier(r);default:return!1}};function validerCatégorieVal({val:n,catégorie:r}){return n===void 0?!0:r.type==="simple"?validerCatégorieBase({catégorie:r.catégorie,val:n}):Array.isArray(n)?n.every(g=>validerCatégorieBase({catégorie:r.catégorie,val:g})):!1}const அங்கீகார_தத_மீதரவு_சாபி$2="அங்கீகறிக்கப்பட்ட தரவுகள்",பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்$2="பங்கேற்பாளர்",பங்கேற்பாளர்_மாறி_அடையாளம்$2="/orbitdb/zdpuAunUaEc6CRX8wAjNixNioB6hF5SYvwJytx4ynm5wQx1vH",தேதி_நெடுவரிசை_அடையாளம்$2="தேதி",தேதி_மாறி_அடையாளம்$2="/orbitdb/zdpuAkz4jAZW5EM3rK7huQoZAE6L26dtpoVd4UYGGyaQkDmTx",மாறிலிகள்$2={அங்கீகார_தத_மீதரவு_சாபி:அங்கீகார_தத_மீதரவு_சாபி$2,பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்:பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்$2,பங்கேற்பாளர்_மாறி_அடையாளம்:பங்கேற்பாளர்_மாறி_அடையாளம்$2,தேதி_நெடுவரிசை_அடையாளம்:தேதி_நெடுவரிசை_அடையாளம்$2,தேதி_மாறி_அடையாளம்:தேதி_மாறி_அடையாளம்$2},குறியீட்டு_இல்லாமல்_வார்ப்புரு$2=n=>(n=deepcopy(n),n.tableaux=n.tableaux.map(r=>({clef:r.clef,cols:r.cols.map(g=>({idColonne:g.idColonne,idVariable:g.idVariable,optionnelle:g.optionnelle}))})),n);let கிளி$2=class us{விண்மீன்;அட்டவணை_சாபி;குழு_அடையாளம்;வார்ப்புரு;மாறிலிகள்;constructor({விண்மீன்:r,அட்டவணை_சாபி:g,குழு_அடையாளம்:_,வார்ப்புரு:x,மாறிலிகள்:S}){this.விண்மீன்=r,this.அட்டவணை_சாபி=g,this.குழு_அடையாளம்=_,x=us.வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:x,அட்டவணை_சாபி:g,குழு_அடையாளம்:_,மாறிலிகள்:S}),this.வார்ப்புரு=குறியீட்டு_இல்லாமல்_வார்ப்புரு$2(x),this.மாறிலிகள்=Object.assign({},மாறிலிகள்$2,S)}static வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:r,அட்டவணை_சாபி:g,குழு_அடையாளம்:_,மாறிலிகள்:x}){const S=deepcopy(r),E=S.tableaux.find(T=>T.clef===g);if(!E)throw new Error("அட்டவணை சாபி அட்டவணை வார்ப்புரில் கிடைத்ததில்லை.");return E.cols.find(T=>T.idColonne===(x?.தேதி_நெடுவரிசை_அடையாளம்||தேதி_நெடுவரிசை_அடையாளம்$2))||(E.cols.push({idVariable:x?.தேதி_மாறி_அடையாளம்||தேதி_மாறி_அடையாளம்$2,idColonne:x?.தேதி_நெடுவரிசை_அடையாளம்||தேதி_நெடுவரிசை_அடையாளம்$2}),S.tableaux=S.tableaux.map(T=>T.clef===g?E:T)),S.nuées||(S.nuées=[]),S.nuées.includes(_)||S.nuées.push(_),S}static async உருவாக்கு({விண்மீன்:r,வார்ப்புரு:g,அட்டவணை_சாபி:_,பேற்றோர்:x,மாறிலிகள்:S}){if(!r.nuées||!r.bds)throw new Error("விண்மீன் தயராரானதில்லை");const E=await r.nuées.créerNuée({nuéeParent:x});g=this.வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:g,அட்டவணை_சாபி:_,குழு_அடையாளம்:E,மாறிலிகள்:S});for(const R of g.tableaux){const A=await r.nuées.ajouterTableauNuée({idNuée:E,clefTableau:R.clef});for(const I of R.cols)await r.nuées.ajouterColonneTableauNuée({idTableau:A,idVariable:I.idVariable,idColonne:I.idColonne}),I.index;g.motsClefs&&await r.nuées.ajouterMotsClefsNuée({idNuée:E,idsMotsClefs:g.motsClefs})}const C={licence:g.licence,motsClefs:g.motsClefs,tableaux:g.tableaux.map(R=>R.clef===_?{clef:R.clef,cols:[...R.cols,{idColonne:S?.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்||பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்$2,idVariable:S?.பங்கேற்பாளர்_மாறி_அடையாளம்||பங்கேற்பாளர்_மாறி_அடையாளம்$2}]}:R)},T=await r.bds.créerBdDeSchéma({schéma:C});return await r.nuées.sauvegarderMétadonnéeNuée({idNuée:E,clef:அங்கீகார_தத_மீதரவு_சாபி$2,valeur:T}),E}async அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:r}){return await suivreBdsDeFonctionListe$1({fListe:async g=>await this.விண்மீன்.nuées.suivreNuéesParents({idNuée:this.குழு_அடையாளம்,f:_=>g([this.குழு_அடையாளம்,..._].reverse())}),f:async g=>await r(g),fBranche:async(g,_)=>await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:x})=>await this.அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:x,அடையாளம்:g}),f:ignorerNonDéfinis$1(_),fSuivre:async({id:x,fSuivreBd:S})=>await this.விண்மீன்.bds.suivreDonnéesDeTableauParClef({idBd:x,clefTableau:this.அட்டவணை_சாபி,f:S})})})}async பரிந்துரைகளை_கேள்ளு({செ:r,சந்ததி:g=!0}){return await this.விண்மீன்.nuées.suivreDonnéesTableauNuée({idNuée:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,héritage:g?["descendance","ascendance"]:["ascendance"],f:async _=>{await r(_.map(x=>({பங்கேற்பாளர்:x.idCompte,அடையாளம்:x.élément.id,பரிந்துரை:x.élément.données})))},nRésultatsDésirés:1e3})}async என்_பரிந்துரைகளை_கேள்ளு({செ:r}){return await this.விண்மீன்.bds.suivreDonnéesDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,f:async g=>{const _=await this.விண்மீன்.obtIdCompte();await r(g.map(x=>({பங்கேற்பாளர்:_,அடையாளம்:x.id,பரிந்துரை:x.données})))}})}async பரிந்துரையு({பரிந்துரை:r}){const g=x=>x[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்]?x:{...x,[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்]:Date.now()};return(await this.விண்மீன்.bds.ajouterÉlémentÀTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,vals:g(r)}))[0]}async பரிந்துரையை_நீக்கு({அடையாளம்:r}){return await this.விண்மீன்.bds.effacerÉlémentDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,idÉlément:r})}async பரிந்துரையை_திருத்து({பரிந்துரை:r,அடையாளம்:g}){await this.விண்மீன்.bds.modifierÉlémentDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,vals:r,idÉlément:g})}async அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:r,அடையாளம்:g}){const _=async x=>{const S=x[this.மாறிலிகள்.அங்கீகார_தத_மீதரவு_சாபி];if(typeof S=="string")return await r(S)};return await this.விண்மீன்.nuées.suivreMétadonnéesNuée({idNuée:g||this.குழு_அடையாளம்,f:_,hériter:!1})}async அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு(){return await uneFois$2(async g=>await this.அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:g}))}async அங்கீகரி({பரிந்துரை:r}){const g=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு(),_=Object.assign({},r.பரிந்துரை,{[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:r.பங்கேற்பாளர்}),S=(await uneFois$2(async E=>await this.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:E}))).find(E=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(E.données,_));return S?(await this.அங்கீகரிக்கப்பட்ட_உறுப்படியை_திருத்து({பரிந்துரை:r,அடையாளம்:S.id}),S.id):(await this.விண்மீன்.bds.ajouterÉlémentÀTableauParClef({idBd:g,clefTableau:this.அட்டவணை_சாபி,vals:_}))[0]}async அங்கீகரிக்கப்பட்ட_உறுப்படியை_நீக்கு({அடையாளம்:r}){const g=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு();await this.விண்மீன்.bds.effacerÉlémentDeTableauParClef({idBd:g,clefTableau:this.அட்டவணை_சாபி,idÉlément:r})}async அங்கீகரிக்கப்பட்ட_உறுப்படியை_திருத்து({பரிந்துரை:r,அடையாளம்:g}){const _=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு();await this.விண்மீன்.bds.modifierÉlémentDeTableauParClef({idBd:_,clefTableau:this.அட்டவணை_சாபி,idÉlément:g,vals:{...r.பரிந்துரை,[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:r.பங்கேற்பாளர்}})}குறியீட்டு_நெடுவரிசைகள்_சமம்(r,g){return(this.வார்ப்புரு.tableaux.find(x=>x.clef===this.அட்டவணை_சாபி)?.cols.filter(x=>x.index).map(x=>x.idColonne)||[]).every(x=>r[x]===g[x])}async உறுப்படிகளை_கேள்ளு({செ:r,பரிந்துரைகள்:g="எனது"}){const _={அங்கீகரிக்கப்பட்டவை:[],பந்திருரைக்கப்பட்டவை:[]},x=async()=>{const C=[];for(const T of _.பந்திருரைக்கப்பட்டவை){const R=C.find(A=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(A,T));if(R){const A=R[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்],I=T[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்];A&&I&&I>A&&(C.splice(C.indexOf(R),1),C.push(T))}else C.push(T)}for(const T of _.அங்கீகரிக்கப்பட்டவை){const R=C.find(A=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(A,T));R&&C.splice(C.indexOf(R),1),C.push(T)}return await r(C)},E=[await this.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async C=>{_.அங்கீகரிக்கப்பட்டவை=C.map(T=>T.données),await x()}})];if(g==="அனைத்தும்"){const C=await this.பரிந்துரைகளை_கேள்ளு({செ:async T=>{_.பந்திருரைக்கப்பட்டவை=T.map(R=>({[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:R.பங்கேற்பாளர்,...R.பரிந்துரை})),await x()}});E.push(C.fOublier)}else if(g==="எனது"){const C=await this.என்_பரிந்துரைகளை_கேள்ளு({செ:async T=>{_.பந்திருரைக்கப்பட்டவை=T.map(R=>({[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:R.பங்கேற்பாளர்,...R.பரிந்துரை})),await x()}});E.push(C)}return async()=>{await Promise.all(E.map(C=>C()))}}};const அட்டவணை_சாபி="முறைமைகள்",கிளி_குழு_அடையாளம்="/orbitdb/zdpuB2ZNKMRPnn8kwwL9UDY6VNdXxqxTUiEanjJ4Z6HuxEgWU",எண்ணிக்கை_சிறப்பு_சொல்="/orbitdb/zdpuAwiHHcXVqXtC5d2zTBC3kP8LkpMxHyp1BjjxVCboH6nPb",முறைமை_குறியீடு_நெடுவரிசை_குறியீடு="குறியீடு",முறைமை_வகை_நெடுவரிசை_குறியீடு="வகை",முறைமை_ஒருங்குறி_குறியீடு_நெடுவரிசை_குறியீடு="ஒருங்குறி",முறைமை_குறிகள்_நெடுவரிசை_குறியீடு="குறிகள்",முறைமை_அடுக்குக்குறி_நெடுவரிசை_குறியீடு="அடுக்குக்குறி",முறைமை_அடிமானங்கள்_நெடுவரிசை_குறியீடு="அடிமானங்கள்",முறைமை_பிரிப்பு_நெடுவரிசை_குறியீடு="பிரிப்பு",முறைமை_குறியீடு_மாறி_குறியீடு="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6",முறைமை_வகை_மாறி_குறியீடு="/orbitdb/zdpuAmMYvS8f9WH95y3tyxDPgLsWjXu2zoB2bAy78JNsMkCWn",முறைமை_ஒருங்குறி_குறியீடு_மாறி_குறியீடு="/orbitdb/zdpuApW3gaGcGNtppzQQyzuzygfKiQ1WVtVpjQa21ALjqRUNo",முறைமை_குறிகள்_மாறி_குறியீடு="/orbitdb/zdpuAzeaU4DA5WCaKBr1B23UA9gtvMoRiUtPgA1PsuRJvtA6k",முறைமை_அடுக்குக்குறி_மாறி_குறியீடு="/orbitdb/zdpuB2xXUJ3kcsmzqhqbvUDNRrRH63dLoj6jw238Xu85oSVJp",முறைமை_அடிமானங்கள்_மாறி_குறியீடு="/orbitdb/zdpuAq1CqRxiFvcy7sUuB9wLPJ5Ex9Vrp6uFiyP7YB8G3T74s",முறைமை_பிரிப்பு_மாறி_குறியீடு="/orbitdb/zdpuAwi62CTtS6Tpu8Zf2pBFKEUGo3F27QZXCib4CVGXyBPVa",தரவுத்தள_வார்ப்புரு={licence:"ODbl-1_0",motsClefs:[எண்ணிக்கை_சிறப்பு_சொல்],tableaux:[{cols:[{idColonne:முறைமை_குறியீடு_நெடுவரிசை_குறியீடு,idVariable:முறைமை_குறியீடு_மாறி_குறியீடு,index:!0},{idColonne:முறைமை_வகை_நெடுவரிசை_குறியீடு,idVariable:முறைமை_வகை_மாறி_குறியீடு},{idColonne:முறைமை_ஒருங்குறி_குறியீடு_நெடுவரிசை_குறியீடு,idVariable:முறைமை_ஒருங்குறி_குறியீடு_மாறி_குறியீடு},{idColonne:முறைமை_குறிகள்_நெடுவரிசை_குறியீடு,idVariable:முறைமை_குறிகள்_மாறி_குறியீடு},{idColonne:முறைமை_அடுக்குக்குறி_நெடுவரிசை_குறியீடு,idVariable:முறைமை_அடுக்குக்குறி_மாறி_குறியீடு},{idColonne:முறைமை_அடிமானங்கள்_நெடுவரிசை_குறியீடு,idVariable:முறைமை_அடிமானங்கள்_மாறி_குறியீடு},{idColonne:முறைமை_பிரிப்பு_நெடுவரிசை_குறியீடு,idVariable:முறைமை_பிரிப்பு_மாறி_குறியீடு}],clef:அட்டவணை_சாபி}]},கிளி_தயாரிப்பு=({விண்மீன்:n})=>new கிளி$2({விண்மீன்:n,அட்டவணை_சாபி,வார்ப்புரு:தரவுத்தள_வார்ப்புரு,குழு_அடையாளம்:கிளி_குழு_அடையாளம்});class எண்ணிக்கை{விண்மீன்_தகவல்கள்;விண்மீன்;கிளி;நடவடிக்கைகள்;கிளியை_மறந்துவிடு;constructor({விண்மீன்:r}){this.விண்மீன்=r,this.விண்மீன்_தகவல்கள்={},this.நடவடிக்கைகள்=new eventsExports.EventEmitter,this._கிளி_தயாரிப்பு()}async கிளியைப்_பெறு(){return this.கிளி||await new Promise(r=>this.நடவடிக்கைகள்.once("கிளி தயார்",r))}async _கிளி_தயாரிப்பு(){this.விண்மீன்&&(this.கிளி=கிளி_தயாரிப்பு({விண்மீன்:this.விண்மீன்}),this.கிளியை_மறந்துவிடு=await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:r=>{this.விண்மீன்_தகவல்கள்=எண்ணிக்கை_தகவல்கள்_வடிவூட்டத்துக்கு_மாறு(r),this.மாற்றம்_வந்துவிட்டது()}}),this.நடவடிக்கைகள்.emit("கிளி தயார்",this.கிளி))}மாற்றம்_வந்துவிட்டது(){this.நடவடிக்கைகள்.emit("மாற்றம்")}get தகவல்கள்(){return merge(_தகவல்கள்,this.விண்மீன்_தகவல்கள்)}get முறைமைகள்(){return Object.keys(this.தகவல்கள்)}தகவல்களை_பெறு({மொழி:r}){const g=this.தகவல்கள்[r];if(!g)throw Error(`தெரியாத எண்ணுரு முறைமை ${r}`);return g}உரைக்கு_அடிமானம்({எண்:r,தகவல்_மொழி:g}){const{குறிகள்:_,அடிமானங்கள்:x}=g,S=g.பிரிப்பு||".",E=[..._],C=r<0;r=Math.abs(r);const T=r.toString().split(".")[1];let R=this._அடிமானம்_எழுதல்(r,E,x);return R.length===0&&(R=E[0]),C&&(R="-"+R),T&&(R+=S[0]+[...T].map(A=>_[parseInt(A)]).join("")),R}எண்ணுக்கு_அடிமானம்({உரை:r,தகவல்_மொழி:g}){RegExp(`[${g.குறிகள்}${g.பிரிப்பு||"."}]+`,"g").exec(r)?.[0]===r&&this.எண்ணுக்கு_அடிமானம்({உரை:r,தகவல்_மொழி:g});const _=g.அடிமானங்கள்,x=[...g.குறிகள்],S=g.பிரிப்பு||".",E=r[0]==="-";E?r=r.slice(1):r=r.replace(/^\++/,"");const[C,T]=r.split(S[0]);let R=0;if(C){const A=[...C].map(B=>_[B]||x.indexOf(B)).reverse();if(A.some(B=>B<0))throw new Error;const I=B=>{const D=B[0],N=B.slice(1).find(j=>j>D),M=(N?B.slice(1).indexOf(N):B.slice(1).length)+1,O=B.slice(1,M),L=O.length?I(O):1,F=B.slice(M),U=F.length?I(F):0;return D*L+U};R=I(A)}return T!==void 0&&T.length&&(R+=parseFloat("."+[...T].map(A=>x.indexOf(A).toString()).join(""))),E&&(R*=-1),R}உரைக்கு_இடஞ்சார்({எண்:r,தகவல்_மொழி:g}){const _=[...g.குறிகள்],x=_.length,S=(g.பிரிப்பு||".")[0];if(x===10){let A=r.toString();return A.includes(".")&&(A=A.replace(".",S)),Array.prototype.map.call(A,I=>I===S?I:_[parseInt(I)]).join("")}if(r===0)return _[0];const E=r<0;let C=r%1;C=parseFloat(C.toFixed(எ_சுற்று(r))),r=Math.abs(r);let T="";for(;r;)T=_[Math.floor(r%x)]+T,r=Math.floor(r/x);C&&(T+=S);let R;for(;C!==0;)R=எ_சுற்று(C),C*=x,T+=_[Math.floor(C)],C-=Math.floor(C),C=parseFloat(C.toFixed(R));return E&&(T="-"+T),T}எண்ணுக்கு_இடஞ்சார்({உரை:r,மொழி:g,தகவல்_மொழி:_}){const x=[..._.குறிகள்],S=_.அடுக்குக்குறி||"eE",E=x.length,C=_.பிரிப்பு||".";if(r=r.replace(/^\++/,""),S.split("").some(T=>r.includes(T))){const[T,R]=r.split(RegExp(S));return this.எண்ணுக்கு_இடஞ்சார்({உரை:T,மொழி:g,தகவல்_மொழி:_})*E**this.எண்ணுக்கு({உரை:R,மொழி:g})}if(E===10){for(const[T,R]of x.entries())r=r.replace(R,T.toString());for(const T of C.split(""))r=r.replace(T,".");return parseFloat(r)}else{let T=0;const R=r.split(/\./);let A=R[0];const I=R[1],B=A[0]==="-";if(A=A.replace(/^-+/,""),A)for(const D of A){if(T*=E,x.indexOf(D)===-1)throw new Error;T+=x.indexOf(D)}if(I){let D=E;for(const N of I)T+=x.indexOf(N)/D,T=parseFloat(T.toFixed(எ_சுற்று(1/D))),D*=E}return T=B?-T:T,T}}உரைக்கு({எண்:r,மொழி:g}){const _=this.தகவல்களை_பெறு({மொழி:g});return _.வகை==="இடஞ்சார்"?this.உரைக்கு_இடஞ்சார்({எண்:r,தகவல்_மொழி:_}):this.உரைக்கு_அடிமானம்({எண்:r,தகவல்_மொழி:_})}எண்ணுக்கு({உரை:r,மொழி:g}){const _=g?[g]:this.முறைமைகள்;for(const x of _)try{const S=this.தகவல்களை_பெறு({மொழி:x}),E=this.தகவல்களுடன்_எண்ணுக்கு({உரை:r,மொழி:x,தகவல்_மொழி:S});if(!isNaN(E))return E}catch{continue}throw new Error(`${r} என்று எண்ணை படிக்க முடியவில்லை.`)}தகவல்களுடன்_எண்ணுக்கு({உரை:r,மொழி:g,தகவல்_மொழி:_}){const x=_.வகை;if(x==="இடஞ்சார்")return this.எண்ணுக்கு_இடஞ்சார்({உரை:r,மொழி:g,தகவல்_மொழி:_});if(x==="அடிமானம்")return this.எண்ணுக்கு_அடிமானம்({உரை:r,தகவல்_மொழி:_});throw Error(`தெரியாத எண்ணுரு முறைமை வகை ${x}`)}_அடிமானம்_எழுதல்(r,g,_){let x=r,S="";for(const[E,C]of Object.entries(_).sort((T,R)=>R[1]-T[1])){const T=Math.floor(x/C);T&&(x-=T*C,T!==1&&(S+=this._அடிமானம்_எழுதல்(T,g,_)),S+=E)}return x&&(S=S+g[Math.floor(x)]),S}பின்பற்று(r){return this.நடவடிக்கைகள்.on("மாற்றம்",r),r(),()=>{this.நடவடிக்கைகள்.off("மாற்றம்",r)}}முறைமைகளை_பின்பற்று({செ:r}){return this.பின்பற்று(()=>r(this.முறைமைகள்))}உரைக்கு_பின்பற்று({எண்:r,மொழி:g,செ:_}){return this.பின்பற்று(()=>_(this.உரைக்கு({எண்:r,மொழி:g})))}எணுக்கு_பின்பற்று({உரை:r,மொழி:g,செ:_}){return this.பின்பற்று(()=>_(this.எண்ணுக்கு({உரை:r,மொழி:g})))}async பரிந்துரையு(r){return(await this.கிளியைப்_பெறு()).பரிந்துரையு({பரிந்துரை:r})}async அங்கீகரி(r){return(await this.கிளியைப்_பெறு()).அங்கீகரி({பரிந்துரை:r})}async முடி(){this.கிளியை_மறந்துவிடு&&await this.கிளியை_மறந்துவிடு()}}function எ_சுற்று(n){const r=n.toString();if(r.includes("e")){const[g,_]=r.split("e-");return parseInt(_)+g.length}else return r.length}function எண்ணிக்கை_தகவல்கள்_வடிவூட்டத்துக்கு_மாறு(n){const r={};for(const g of n){const _=g.données[முறைமை_வகை_நெடுவரிசை_குறியீடு],x=g.données[முறைமை_குறியீடு_நெடுவரிசை_குறியீடு];if(_==="இடஞ்சார்"){const S={வகை:_,குறிகள்:g.données[முறைமை_குறிகள்_நெடுவரிசை_குறியீடு],ஒருங்குறி:g.données[முறைமை_ஒருங்குறி_குறியீடு_நெடுவரிசை_குறியீடு],அடுக்குக்குறி:g.données[முறைமை_அடுக்குக்குறி_நெடுவரிசை_குறியீடு],பிரிப்பு:g.données[முறைமை_பிரிப்பு_நெடுவரிசை_குறியீடு]};r[x]=S}else if(_==="அடிமானம்"){const S=g.données[முறைமை_அடிமானங்கள்_நெடுவரிசை_குறியீடு];if(!S)throw new Error(`${x} என்று எண்ணுரு முறைமைக்காக அடிமானங்கள் தேவை.`);const E={வகை:_,குறிகள்:g.données[முறைமை_குறிகள்_நெடுவரிசை_குறியீடு],ஒருங்குறி:g.données[முறைமை_ஒருங்குறி_குறியீடு_நெடுவரிசை_குறியீடு],அடுக்குக்குறி:g.données[முறைமை_அடுக்குக்குறி_நெடுவரிசை_குறியீடு],அடிமானங்கள்:JSON.parse(S),பிரிப்பு:g.données[முறைமை_பிரிப்பு_நெடுவரிசை_குறியீடு]};r[x]=E}}return r}var lib$2={},indexedDbReadStream={},streamBrowser$1,hasRequiredStreamBrowser$1;function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1||(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter),streamBrowser$1}var util$1={},types={},isGeneratorFunction,hasRequiredIsGeneratorFunction;function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var n=Object.prototype.toString,r=Function.prototype.toString,g=/^\s*(?:function)?\*/,_=requireShams()(),x=Object.getPrototypeOf,S=function(){if(!_)return!1;try{return Function("return function*() {}")()}catch{}},E;return isGeneratorFunction=function(T){if(typeof T!="function")return!1;if(g.test(r.call(T)))return!0;if(!_){var R=n.call(T);return R==="[object GeneratorFunction]"}if(!x)return!1;if(typeof E>"u"){var A=S();E=A?x(A):!1}return x(T)===E},isGeneratorFunction}var isTypedArray$1,hasRequiredIsTypedArray;function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray$1;hasRequiredIsTypedArray=1;var n=requireWhichTypedArray();return isTypedArray$1=function(g){return!!n(g)},isTypedArray$1}var hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(n){var r=requireIsArguments(),g=requireIsGeneratorFunction(),_=requireWhichTypedArray(),x=requireIsTypedArray();function S(ze){return ze.call.bind(ze)}var E=typeof BigInt<"u",C=typeof Symbol<"u",T=S(Object.prototype.toString),R=S(Number.prototype.valueOf),A=S(String.prototype.valueOf),I=S(Boolean.prototype.valueOf);if(E)var B=S(BigInt.prototype.valueOf);if(C)var D=S(Symbol.prototype.valueOf);function N(ze,Je){if(typeof ze!="object")return!1;try{return Je(ze),!0}catch{return!1}}n.isArgumentsObject=r,n.isGeneratorFunction=g,n.isTypedArray=x;function M(ze){return typeof Promise<"u"&&ze instanceof Promise||ze!==null&&typeof ze=="object"&&typeof ze.then=="function"&&typeof ze.catch=="function"}n.isPromise=M;function O(ze){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ze):x(ze)||be(ze)}n.isArrayBufferView=O;function L(ze){return _(ze)==="Uint8Array"}n.isUint8Array=L;function F(ze){return _(ze)==="Uint8ClampedArray"}n.isUint8ClampedArray=F;function U(ze){return _(ze)==="Uint16Array"}n.isUint16Array=U;function j(ze){return _(ze)==="Uint32Array"}n.isUint32Array=j;function z(ze){return _(ze)==="Int8Array"}n.isInt8Array=z;function W(ze){return _(ze)==="Int16Array"}n.isInt16Array=W;function X(ze){return _(ze)==="Int32Array"}n.isInt32Array=X;function ie(ze){return _(ze)==="Float32Array"}n.isFloat32Array=ie;function fe(ze){return _(ze)==="Float64Array"}n.isFloat64Array=fe;function xe(ze){return _(ze)==="BigInt64Array"}n.isBigInt64Array=xe;function we(ze){return _(ze)==="BigUint64Array"}n.isBigUint64Array=we;function G(ze){return T(ze)==="[object Map]"}G.working=typeof Map<"u"&&G(new Map);function J(ze){return typeof Map>"u"?!1:G.working?G(ze):ze instanceof Map}n.isMap=J;function q(ze){return T(ze)==="[object Set]"}q.working=typeof Set<"u"&&q(new Set);function H(ze){return typeof Set>"u"?!1:q.working?q(ze):ze instanceof Set}n.isSet=H;function ve(ze){return T(ze)==="[object WeakMap]"}ve.working=typeof WeakMap<"u"&&ve(new WeakMap);function Z(ze){return typeof WeakMap>"u"?!1:ve.working?ve(ze):ze instanceof WeakMap}n.isWeakMap=Z;function ce(ze){return T(ze)==="[object WeakSet]"}ce.working=typeof WeakSet<"u"&&ce(new WeakSet);function ue(ze){return ce(ze)}n.isWeakSet=ue;function se(ze){return T(ze)==="[object ArrayBuffer]"}se.working=typeof ArrayBuffer<"u"&&se(new ArrayBuffer);function te(ze){return typeof ArrayBuffer>"u"?!1:se.working?se(ze):ze instanceof ArrayBuffer}n.isArrayBuffer=te;function Y(ze){return T(ze)==="[object DataView]"}Y.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&Y(new DataView(new ArrayBuffer(1),0,1));function be(ze){return typeof DataView>"u"?!1:Y.working?Y(ze):ze instanceof DataView}n.isDataView=be;var ye=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Ie(ze){return T(ze)==="[object SharedArrayBuffer]"}function ke(ze){return typeof ye>"u"?!1:(typeof Ie.working>"u"&&(Ie.working=Ie(new ye)),Ie.working?Ie(ze):ze instanceof ye)}n.isSharedArrayBuffer=ke;function Ce(ze){return T(ze)==="[object AsyncFunction]"}n.isAsyncFunction=Ce;function Ae(ze){return T(ze)==="[object Map Iterator]"}n.isMapIterator=Ae;function Ne(ze){return T(ze)==="[object Set Iterator]"}n.isSetIterator=Ne;function We(ze){return T(ze)==="[object Generator]"}n.isGeneratorObject=We;function Be(ze){return T(ze)==="[object WebAssembly.Module]"}n.isWebAssemblyCompiledModule=Be;function Se(ze){return N(ze,R)}n.isNumberObject=Se;function $e(ze){return N(ze,A)}n.isStringObject=$e;function _e(ze){return N(ze,I)}n.isBooleanObject=_e;function Oe(ze){return E&&N(ze,B)}n.isBigIntObject=Oe;function Ke(ze){return C&&N(ze,D)}n.isSymbolObject=Ke;function Me(ze){return Se(ze)||$e(ze)||_e(ze)||Oe(ze)||Ke(ze)}n.isBoxedPrimitive=Me;function Le(ze){return typeof Uint8Array<"u"&&(te(ze)||ke(ze))}n.isAnyArrayBuffer=Le,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ze){Object.defineProperty(n,ze,{enumerable:!1,value:function(){throw new Error(ze+" is not supported in userland")}})})}(types)),types}var isBufferBrowser,hasRequiredIsBufferBrowser;function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser||(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(r){return r&&typeof r=="object"&&typeof r.copy=="function"&&typeof r.fill=="function"&&typeof r.readUInt8=="function"}),isBufferBrowser}var hasRequiredUtil$1;function requireUtil$1(){return hasRequiredUtil$1||(hasRequiredUtil$1=1,function(n){var r={},g=Object.getOwnPropertyDescriptors||function(ye){for(var Ie=Object.keys(ye),ke={},Ce=0;Ce<Ie.length;Ce++)ke[Ie[Ce]]=Object.getOwnPropertyDescriptor(ye,Ie[Ce]);return ke},_=/%[sdj%]/g;n.format=function(be){if(!W(be)){for(var ye=[],Ie=0;Ie<arguments.length;Ie++)ye.push(C(arguments[Ie]));return ye.join(" ")}for(var Ie=1,ke=arguments,Ce=ke.length,Ae=String(be).replace(_,function(We){if(We==="%%")return"%";if(Ie>=Ce)return We;switch(We){case"%s":return String(ke[Ie++]);case"%d":return Number(ke[Ie++]);case"%j":try{return JSON.stringify(ke[Ie++])}catch{return"[Circular]"}default:return We}}),Ne=ke[Ie];Ie<Ce;Ne=ke[++Ie])U(Ne)||!xe(Ne)?Ae+=" "+Ne:Ae+=" "+C(Ne);return Ae},n.deprecate=function(be,ye){if(typeof process$1<"u"&&process$1.noDeprecation===!0)return be;if(typeof process$1>"u")return function(){return n.deprecate(be,ye).apply(this,arguments)};var Ie=!1;function ke(){if(!Ie){if(process$1.throwDeprecation)throw new Error(ye);process$1.traceDeprecation?console.trace(ye):console.error(ye),Ie=!0}return be.apply(this,arguments)}return ke};var x={},S=/^$/;if(r.NODE_DEBUG){var E=r.NODE_DEBUG;E=E.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),S=new RegExp("^"+E+"$","i")}n.debuglog=function(be){if(be=be.toUpperCase(),!x[be])if(S.test(be)){var ye=process$1.pid;x[be]=function(){var Ie=n.format.apply(n,arguments);console.error("%s %d: %s",be,ye,Ie)}}else x[be]=function(){};return x[be]};function C(be,ye){var Ie={seen:[],stylize:R};return arguments.length>=3&&(Ie.depth=arguments[2]),arguments.length>=4&&(Ie.colors=arguments[3]),F(ye)?Ie.showHidden=ye:ye&&n._extend(Ie,ye),ie(Ie.showHidden)&&(Ie.showHidden=!1),ie(Ie.depth)&&(Ie.depth=2),ie(Ie.colors)&&(Ie.colors=!1),ie(Ie.customInspect)&&(Ie.customInspect=!0),Ie.colors&&(Ie.stylize=T),I(Ie,be,Ie.depth)}n.inspect=C,C.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},C.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function T(be,ye){var Ie=C.styles[ye];return Ie?"\x1B["+C.colors[Ie][0]+"m"+be+"\x1B["+C.colors[Ie][1]+"m":be}function R(be,ye){return be}function A(be){var ye={};return be.forEach(function(Ie,ke){ye[Ie]=!0}),ye}function I(be,ye,Ie){if(be.customInspect&&ye&&J(ye.inspect)&&ye.inspect!==n.inspect&&!(ye.constructor&&ye.constructor.prototype===ye)){var ke=ye.inspect(Ie,be);return W(ke)||(ke=I(be,ke,Ie)),ke}var Ce=B(be,ye);if(Ce)return Ce;var Ae=Object.keys(ye),Ne=A(Ae);if(be.showHidden&&(Ae=Object.getOwnPropertyNames(ye)),G(ye)&&(Ae.indexOf("message")>=0||Ae.indexOf("description")>=0))return D(ye);if(Ae.length===0){if(J(ye)){var We=ye.name?": "+ye.name:"";return be.stylize("[Function"+We+"]","special")}if(fe(ye))return be.stylize(RegExp.prototype.toString.call(ye),"regexp");if(we(ye))return be.stylize(Date.prototype.toString.call(ye),"date");if(G(ye))return D(ye)}var Be="",Se=!1,$e=["{","}"];if(L(ye)&&(Se=!0,$e=["[","]"]),J(ye)){var _e=ye.name?": "+ye.name:"";Be=" [Function"+_e+"]"}if(fe(ye)&&(Be=" "+RegExp.prototype.toString.call(ye)),we(ye)&&(Be=" "+Date.prototype.toUTCString.call(ye)),G(ye)&&(Be=" "+D(ye)),Ae.length===0&&(!Se||ye.length==0))return $e[0]+Be+$e[1];if(Ie<0)return fe(ye)?be.stylize(RegExp.prototype.toString.call(ye),"regexp"):be.stylize("[Object]","special");be.seen.push(ye);var Oe;return Se?Oe=N(be,ye,Ie,Ne,Ae):Oe=Ae.map(function(Ke){return M(be,ye,Ie,Ne,Ke,Se)}),be.seen.pop(),O(Oe,Be,$e)}function B(be,ye){if(ie(ye))return be.stylize("undefined","undefined");if(W(ye)){var Ie="'"+JSON.stringify(ye).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return be.stylize(Ie,"string")}if(z(ye))return be.stylize(""+ye,"number");if(F(ye))return be.stylize(""+ye,"boolean");if(U(ye))return be.stylize("null","null")}function D(be){return"["+Error.prototype.toString.call(be)+"]"}function N(be,ye,Ie,ke,Ce){for(var Ae=[],Ne=0,We=ye.length;Ne<We;++Ne)ue(ye,String(Ne))?Ae.push(M(be,ye,Ie,ke,String(Ne),!0)):Ae.push("");return Ce.forEach(function(Be){Be.match(/^\d+$/)||Ae.push(M(be,ye,Ie,ke,Be,!0))}),Ae}function M(be,ye,Ie,ke,Ce,Ae){var Ne,We,Be;if(Be=Object.getOwnPropertyDescriptor(ye,Ce)||{value:ye[Ce]},Be.get?Be.set?We=be.stylize("[Getter/Setter]","special"):We=be.stylize("[Getter]","special"):Be.set&&(We=be.stylize("[Setter]","special")),ue(ke,Ce)||(Ne="["+Ce+"]"),We||(be.seen.indexOf(Be.value)<0?(U(Ie)?We=I(be,Be.value,null):We=I(be,Be.value,Ie-1),We.indexOf(`
`)>-1&&(Ae?We=We.split(`
`).map(function(Se){return"  "+Se}).join(`
`).slice(2):We=`
`+We.split(`
`).map(function(Se){return"   "+Se}).join(`
`))):We=be.stylize("[Circular]","special")),ie(Ne)){if(Ae&&Ce.match(/^\d+$/))return We;Ne=JSON.stringify(""+Ce),Ne.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Ne=Ne.slice(1,-1),Ne=be.stylize(Ne,"name")):(Ne=Ne.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Ne=be.stylize(Ne,"string"))}return Ne+": "+We}function O(be,ye,Ie){var ke=be.reduce(function(Ce,Ae){return Ae.indexOf(`
`)>=0,Ce+Ae.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ke>60?Ie[0]+(ye===""?"":ye+`
 `)+" "+be.join(`,
  `)+" "+Ie[1]:Ie[0]+ye+" "+be.join(", ")+" "+Ie[1]}n.types=requireTypes();function L(be){return Array.isArray(be)}n.isArray=L;function F(be){return typeof be=="boolean"}n.isBoolean=F;function U(be){return be===null}n.isNull=U;function j(be){return be==null}n.isNullOrUndefined=j;function z(be){return typeof be=="number"}n.isNumber=z;function W(be){return typeof be=="string"}n.isString=W;function X(be){return typeof be=="symbol"}n.isSymbol=X;function ie(be){return be===void 0}n.isUndefined=ie;function fe(be){return xe(be)&&H(be)==="[object RegExp]"}n.isRegExp=fe,n.types.isRegExp=fe;function xe(be){return typeof be=="object"&&be!==null}n.isObject=xe;function we(be){return xe(be)&&H(be)==="[object Date]"}n.isDate=we,n.types.isDate=we;function G(be){return xe(be)&&(H(be)==="[object Error]"||be instanceof Error)}n.isError=G,n.types.isNativeError=G;function J(be){return typeof be=="function"}n.isFunction=J;function q(be){return be===null||typeof be=="boolean"||typeof be=="number"||typeof be=="string"||typeof be=="symbol"||typeof be>"u"}n.isPrimitive=q,n.isBuffer=requireIsBufferBrowser();function H(be){return Object.prototype.toString.call(be)}function ve(be){return be<10?"0"+be.toString(10):be.toString(10)}var Z=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function ce(){var be=new Date,ye=[ve(be.getHours()),ve(be.getMinutes()),ve(be.getSeconds())].join(":");return[be.getDate(),Z[be.getMonth()],ye].join(" ")}n.log=function(){console.log("%s - %s",ce(),n.format.apply(n,arguments))},n.inherits=requireInherits_browser(),n._extend=function(be,ye){if(!ye||!xe(ye))return be;for(var Ie=Object.keys(ye),ke=Ie.length;ke--;)be[Ie[ke]]=ye[Ie[ke]];return be};function ue(be,ye){return Object.prototype.hasOwnProperty.call(be,ye)}var se=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;n.promisify=function(ye){if(typeof ye!="function")throw new TypeError('The "original" argument must be of type Function');if(se&&ye[se]){var Ie=ye[se];if(typeof Ie!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Ie,se,{value:Ie,enumerable:!1,writable:!1,configurable:!0}),Ie}function Ie(){for(var ke,Ce,Ae=new Promise(function(Be,Se){ke=Be,Ce=Se}),Ne=[],We=0;We<arguments.length;We++)Ne.push(arguments[We]);Ne.push(function(Be,Se){Be?Ce(Be):ke(Se)});try{ye.apply(this,Ne)}catch(Be){Ce(Be)}return Ae}return Object.setPrototypeOf(Ie,Object.getPrototypeOf(ye)),se&&Object.defineProperty(Ie,se,{value:Ie,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Ie,g(ye))},n.promisify.custom=se;function te(be,ye){if(!be){var Ie=new Error("Promise was rejected with a falsy value");Ie.reason=be,be=Ie}return ye(be)}function Y(be){if(typeof be!="function")throw new TypeError('The "original" argument must be of type Function');function ye(){for(var Ie=[],ke=0;ke<arguments.length;ke++)Ie.push(arguments[ke]);var Ce=Ie.pop();if(typeof Ce!="function")throw new TypeError("The last argument must be of type Function");var Ae=this,Ne=function(){return Ce.apply(Ae,arguments)};be.apply(this,Ie).then(function(We){process$1.nextTick(Ne.bind(null,null,We))},function(We){process$1.nextTick(te.bind(null,We,Ne))})}return Object.setPrototypeOf(ye,Object.getPrototypeOf(be)),Object.defineProperties(ye,g(be)),ye}n.callbackify=Y}(util$1)),util$1}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function n(N,M){var O=Object.keys(N);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(N);M&&(L=L.filter(function(F){return Object.getOwnPropertyDescriptor(N,F).enumerable})),O.push.apply(O,L)}return O}function r(N){for(var M=1;M<arguments.length;M++){var O=arguments[M]!=null?arguments[M]:{};M%2?n(Object(O),!0).forEach(function(L){g(N,L,O[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(N,Object.getOwnPropertyDescriptors(O)):n(Object(O)).forEach(function(L){Object.defineProperty(N,L,Object.getOwnPropertyDescriptor(O,L))})}return N}function g(N,M,O){return M=E(M),M in N?Object.defineProperty(N,M,{value:O,enumerable:!0,configurable:!0,writable:!0}):N[M]=O,N}function _(N,M){if(!(N instanceof M))throw new TypeError("Cannot call a class as a function")}function x(N,M){for(var O=0;O<M.length;O++){var L=M[O];L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(N,E(L.key),L)}}function S(N,M,O){return M&&x(N.prototype,M),Object.defineProperty(N,"prototype",{writable:!1}),N}function E(N){var M=C(N,"string");return typeof M=="symbol"?M:String(M)}function C(N,M){if(typeof N!="object"||N===null)return N;var O=N[Symbol.toPrimitive];if(O!==void 0){var L=O.call(N,M||"default");if(typeof L!="object")return L;throw new TypeError("@@toPrimitive must return a primitive value.")}return(M==="string"?String:Number)(N)}var T=requireDist(),R=T.Buffer,A=requireUtil$1(),I=A.inspect,B=I&&I.custom||"inspect";function D(N,M,O){R.prototype.copy.call(N,M,O)}return buffer_list=function(){function N(){_(this,N),this.head=null,this.tail=null,this.length=0}return S(N,[{key:"push",value:function(O){var L={data:O,next:null};this.length>0?this.tail.next=L:this.head=L,this.tail=L,++this.length}},{key:"unshift",value:function(O){var L={data:O,next:this.head};this.length===0&&(this.tail=L),this.head=L,++this.length}},{key:"shift",value:function(){if(this.length!==0){var O=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,O}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(O){if(this.length===0)return"";for(var L=this.head,F=""+L.data;L=L.next;)F+=O+L.data;return F}},{key:"concat",value:function(O){if(this.length===0)return R.alloc(0);for(var L=R.allocUnsafe(O>>>0),F=this.head,U=0;F;)D(F.data,L,U),U+=F.data.length,F=F.next;return L}},{key:"consume",value:function(O,L){var F;return O<this.head.data.length?(F=this.head.data.slice(0,O),this.head.data=this.head.data.slice(O)):O===this.head.data.length?F=this.shift():F=L?this._getString(O):this._getBuffer(O),F}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(O){var L=this.head,F=1,U=L.data;for(O-=U.length;L=L.next;){var j=L.data,z=O>j.length?j.length:O;if(z===j.length?U+=j:U+=j.slice(0,O),O-=z,O===0){z===j.length?(++F,L.next?this.head=L.next:this.head=this.tail=null):(this.head=L,L.data=j.slice(z));break}++F}return this.length-=F,U}},{key:"_getBuffer",value:function(O){var L=R.allocUnsafe(O),F=this.head,U=1;for(F.data.copy(L),O-=F.data.length;F=F.next;){var j=F.data,z=O>j.length?j.length:O;if(j.copy(L,L.length-O,0,z),O-=z,O===0){z===j.length?(++U,F.next?this.head=F.next:this.head=this.tail=null):(this.head=F,F.data=j.slice(z));break}++U}return this.length-=U,L}},{key:B,value:function(O,L){return I(this,r(r({},L),{},{depth:0,customInspect:!1}))}}]),N}(),buffer_list}var destroy_1$1,hasRequiredDestroy$1;function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;hasRequiredDestroy$1=1;function n(E,C){var T=this,R=this._readableState&&this._readableState.destroyed,A=this._writableState&&this._writableState.destroyed;return R||A?(C?C(E):E&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(x,this,E)):process$1.nextTick(x,this,E)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(E||null,function(I){!C&&I?T._writableState?T._writableState.errorEmitted?process$1.nextTick(g,T):(T._writableState.errorEmitted=!0,process$1.nextTick(r,T,I)):process$1.nextTick(r,T,I):C?(process$1.nextTick(g,T),C(I)):process$1.nextTick(g,T)}),this)}function r(E,C){x(E,C),g(E)}function g(E){E._writableState&&!E._writableState.emitClose||E._readableState&&!E._readableState.emitClose||E.emit("close")}function _(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function x(E,C){E.emit("error",C)}function S(E,C){var T=E._readableState,R=E._writableState;T&&T.autoDestroy||R&&R.autoDestroy?E.destroy(C):E.emit("error",C)}return destroy_1$1={destroy:n,undestroy:_,errorOrDestroy:S},destroy_1$1}var errorsBrowser={},hasRequiredErrorsBrowser;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;function n(C,T){C.prototype=Object.create(T.prototype),C.prototype.constructor=C,C.__proto__=T}var r={};function g(C,T,R){R||(R=Error);function A(B,D,N){return typeof T=="string"?T:T(B,D,N)}var I=function(B){n(D,B);function D(N,M,O){return B.call(this,A(N,M,O))||this}return D}(R);I.prototype.name=R.name,I.prototype.code=C,r[C]=I}function _(C,T){if(Array.isArray(C)){var R=C.length;return C=C.map(function(A){return String(A)}),R>2?"one of ".concat(T," ").concat(C.slice(0,R-1).join(", "),", or ")+C[R-1]:R===2?"one of ".concat(T," ").concat(C[0]," or ").concat(C[1]):"of ".concat(T," ").concat(C[0])}else return"of ".concat(T," ").concat(String(C))}function x(C,T,R){return C.substr(0,T.length)===T}function S(C,T,R){return(R===void 0||R>C.length)&&(R=C.length),C.substring(R-T.length,R)===T}function E(C,T,R){return typeof R!="number"&&(R=0),R+T.length>C.length?!1:C.indexOf(T,R)!==-1}return g("ERR_INVALID_OPT_VALUE",function(C,T){return'The value "'+T+'" is invalid for option "'+C+'"'},TypeError),g("ERR_INVALID_ARG_TYPE",function(C,T,R){var A;typeof T=="string"&&x(T,"not ")?(A="must not be",T=T.replace(/^not /,"")):A="must be";var I;if(S(C," argument"))I="The ".concat(C," ").concat(A," ").concat(_(T,"type"));else{var B=E(C,".")?"property":"argument";I='The "'.concat(C,'" ').concat(B," ").concat(A," ").concat(_(T,"type"))}return I+=". Received type ".concat(typeof R),I},TypeError),g("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),g("ERR_METHOD_NOT_IMPLEMENTED",function(C){return"The "+C+" method is not implemented"}),g("ERR_STREAM_PREMATURE_CLOSE","Premature close"),g("ERR_STREAM_DESTROYED",function(C){return"Cannot call "+C+" after a stream was destroyed"}),g("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),g("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),g("ERR_STREAM_WRITE_AFTER_END","write after end"),g("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),g("ERR_UNKNOWN_ENCODING",function(C){return"Unknown encoding: "+C},TypeError),g("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=r,errorsBrowser}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var n=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;function r(_,x,S){return _.highWaterMark!=null?_.highWaterMark:x?_[S]:null}function g(_,x,S,E){var C=r(x,E,S);if(C!=null){if(!(isFinite(C)&&Math.floor(C)===C)||C<0){var T=E?S:"highWaterMark";throw new n(T,C)}return Math.floor(C)}return _.objectMode?16:16*1024}return state={getHighWaterMark:g},state}var browser$e,hasRequiredBrowser$d;function requireBrowser$d(){if(hasRequiredBrowser$d)return browser$e;hasRequiredBrowser$d=1,browser$e=n;function n(g,_){if(r("noDeprecation"))return g;var x=!1;function S(){if(!x){if(r("throwDeprecation"))throw new Error(_);r("traceDeprecation")?console.trace(_):console.warn(_),x=!0}return g.apply(this,arguments)}return S}function r(g){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var _=commonjsGlobal.localStorage[g];return _==null?!1:String(_).toLowerCase()==="true"}return browser$e}var _stream_writable$1,hasRequired_stream_writable$1;function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;hasRequired_stream_writable$1=1,_stream_writable$1=ie;function n(ke){var Ce=this;this.next=null,this.entry=null,this.finish=function(){Ie(Ce,ke)}}var r;ie.WritableState=W;var g={deprecate:requireBrowser$d()},_=requireStreamBrowser$1(),x=requireDist().Buffer,S=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function E(ke){return x.from(ke)}function C(ke){return x.isBuffer(ke)||ke instanceof S}var T=requireDestroy$1(),R=requireState(),A=R.getHighWaterMark,I=requireErrorsBrowser().codes,B=I.ERR_INVALID_ARG_TYPE,D=I.ERR_METHOD_NOT_IMPLEMENTED,N=I.ERR_MULTIPLE_CALLBACK,M=I.ERR_STREAM_CANNOT_PIPE,O=I.ERR_STREAM_DESTROYED,L=I.ERR_STREAM_NULL_VALUES,F=I.ERR_STREAM_WRITE_AFTER_END,U=I.ERR_UNKNOWN_ENCODING,j=T.errorOrDestroy;requireInherits_browser()(ie,_);function z(){}function W(ke,Ce,Ae){r=r||require_stream_duplex$1(),ke=ke||{},typeof Ae!="boolean"&&(Ae=Ce instanceof r),this.objectMode=!!ke.objectMode,Ae&&(this.objectMode=this.objectMode||!!ke.writableObjectMode),this.highWaterMark=A(this,ke,"writableHighWaterMark",Ae),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ne=ke.decodeStrings===!1;this.decodeStrings=!Ne,this.defaultEncoding=ke.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(We){ve(Ce,We)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ke.emitClose!==!1,this.autoDestroy=!!ke.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}W.prototype.getBuffer=function(){for(var Ce=this.bufferedRequest,Ae=[];Ce;)Ae.push(Ce),Ce=Ce.next;return Ae},function(){try{Object.defineProperty(W.prototype,"buffer",{get:g.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var X;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(X=Function.prototype[Symbol.hasInstance],Object.defineProperty(ie,Symbol.hasInstance,{value:function(Ce){return X.call(this,Ce)?!0:this!==ie?!1:Ce&&Ce._writableState instanceof W}})):X=function(Ce){return Ce instanceof this};function ie(ke){r=r||require_stream_duplex$1();var Ce=this instanceof r;if(!Ce&&!X.call(ie,this))return new ie(ke);this._writableState=new W(ke,this,Ce),this.writable=!0,ke&&(typeof ke.write=="function"&&(this._write=ke.write),typeof ke.writev=="function"&&(this._writev=ke.writev),typeof ke.destroy=="function"&&(this._destroy=ke.destroy),typeof ke.final=="function"&&(this._final=ke.final)),_.call(this)}ie.prototype.pipe=function(){j(this,new M)};function fe(ke,Ce){var Ae=new F;j(ke,Ae),process$1.nextTick(Ce,Ae)}function xe(ke,Ce,Ae,Ne){var We;return Ae===null?We=new L:typeof Ae!="string"&&!Ce.objectMode&&(We=new B("chunk",["string","Buffer"],Ae)),We?(j(ke,We),process$1.nextTick(Ne,We),!1):!0}ie.prototype.write=function(ke,Ce,Ae){var Ne=this._writableState,We=!1,Be=!Ne.objectMode&&C(ke);return Be&&!x.isBuffer(ke)&&(ke=E(ke)),typeof Ce=="function"&&(Ae=Ce,Ce=null),Be?Ce="buffer":Ce||(Ce=Ne.defaultEncoding),typeof Ae!="function"&&(Ae=z),Ne.ending?fe(this,Ae):(Be||xe(this,Ne,ke,Ae))&&(Ne.pendingcb++,We=G(this,Ne,Be,ke,Ce,Ae)),We},ie.prototype.cork=function(){this._writableState.corked++},ie.prototype.uncork=function(){var ke=this._writableState;ke.corked&&(ke.corked--,!ke.writing&&!ke.corked&&!ke.bufferProcessing&&ke.bufferedRequest&&ue(this,ke))},ie.prototype.setDefaultEncoding=function(Ce){if(typeof Ce=="string"&&(Ce=Ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Ce+"").toLowerCase())>-1))throw new U(Ce);return this._writableState.defaultEncoding=Ce,this},Object.defineProperty(ie.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function we(ke,Ce,Ae){return!ke.objectMode&&ke.decodeStrings!==!1&&typeof Ce=="string"&&(Ce=x.from(Ce,Ae)),Ce}Object.defineProperty(ie.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function G(ke,Ce,Ae,Ne,We,Be){if(!Ae){var Se=we(Ce,Ne,We);Ne!==Se&&(Ae=!0,We="buffer",Ne=Se)}var $e=Ce.objectMode?1:Ne.length;Ce.length+=$e;var _e=Ce.length<Ce.highWaterMark;if(_e||(Ce.needDrain=!0),Ce.writing||Ce.corked){var Oe=Ce.lastBufferedRequest;Ce.lastBufferedRequest={chunk:Ne,encoding:We,isBuf:Ae,callback:Be,next:null},Oe?Oe.next=Ce.lastBufferedRequest:Ce.bufferedRequest=Ce.lastBufferedRequest,Ce.bufferedRequestCount+=1}else J(ke,Ce,!1,$e,Ne,We,Be);return _e}function J(ke,Ce,Ae,Ne,We,Be,Se){Ce.writelen=Ne,Ce.writecb=Se,Ce.writing=!0,Ce.sync=!0,Ce.destroyed?Ce.onwrite(new O("write")):Ae?ke._writev(We,Ce.onwrite):ke._write(We,Be,Ce.onwrite),Ce.sync=!1}function q(ke,Ce,Ae,Ne,We){--Ce.pendingcb,Ae?(process$1.nextTick(We,Ne),process$1.nextTick(be,ke,Ce),ke._writableState.errorEmitted=!0,j(ke,Ne)):(We(Ne),ke._writableState.errorEmitted=!0,j(ke,Ne),be(ke,Ce))}function H(ke){ke.writing=!1,ke.writecb=null,ke.length-=ke.writelen,ke.writelen=0}function ve(ke,Ce){var Ae=ke._writableState,Ne=Ae.sync,We=Ae.writecb;if(typeof We!="function")throw new N;if(H(Ae),Ce)q(ke,Ae,Ne,Ce,We);else{var Be=se(Ae)||ke.destroyed;!Be&&!Ae.corked&&!Ae.bufferProcessing&&Ae.bufferedRequest&&ue(ke,Ae),Ne?process$1.nextTick(Z,ke,Ae,Be,We):Z(ke,Ae,Be,We)}}function Z(ke,Ce,Ae,Ne){Ae||ce(ke,Ce),Ce.pendingcb--,Ne(),be(ke,Ce)}function ce(ke,Ce){Ce.length===0&&Ce.needDrain&&(Ce.needDrain=!1,ke.emit("drain"))}function ue(ke,Ce){Ce.bufferProcessing=!0;var Ae=Ce.bufferedRequest;if(ke._writev&&Ae&&Ae.next){var Ne=Ce.bufferedRequestCount,We=new Array(Ne),Be=Ce.corkedRequestsFree;Be.entry=Ae;for(var Se=0,$e=!0;Ae;)We[Se]=Ae,Ae.isBuf||($e=!1),Ae=Ae.next,Se+=1;We.allBuffers=$e,J(ke,Ce,!0,Ce.length,We,"",Be.finish),Ce.pendingcb++,Ce.lastBufferedRequest=null,Be.next?(Ce.corkedRequestsFree=Be.next,Be.next=null):Ce.corkedRequestsFree=new n(Ce),Ce.bufferedRequestCount=0}else{for(;Ae;){var _e=Ae.chunk,Oe=Ae.encoding,Ke=Ae.callback,Me=Ce.objectMode?1:_e.length;if(J(ke,Ce,!1,Me,_e,Oe,Ke),Ae=Ae.next,Ce.bufferedRequestCount--,Ce.writing)break}Ae===null&&(Ce.lastBufferedRequest=null)}Ce.bufferedRequest=Ae,Ce.bufferProcessing=!1}ie.prototype._write=function(ke,Ce,Ae){Ae(new D("_write()"))},ie.prototype._writev=null,ie.prototype.end=function(ke,Ce,Ae){var Ne=this._writableState;return typeof ke=="function"?(Ae=ke,ke=null,Ce=null):typeof Ce=="function"&&(Ae=Ce,Ce=null),ke!=null&&this.write(ke,Ce),Ne.corked&&(Ne.corked=1,this.uncork()),Ne.ending||ye(this,Ne,Ae),this},Object.defineProperty(ie.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function se(ke){return ke.ending&&ke.length===0&&ke.bufferedRequest===null&&!ke.finished&&!ke.writing}function te(ke,Ce){ke._final(function(Ae){Ce.pendingcb--,Ae&&j(ke,Ae),Ce.prefinished=!0,ke.emit("prefinish"),be(ke,Ce)})}function Y(ke,Ce){!Ce.prefinished&&!Ce.finalCalled&&(typeof ke._final=="function"&&!Ce.destroyed?(Ce.pendingcb++,Ce.finalCalled=!0,process$1.nextTick(te,ke,Ce)):(Ce.prefinished=!0,ke.emit("prefinish")))}function be(ke,Ce){var Ae=se(Ce);if(Ae&&(Y(ke,Ce),Ce.pendingcb===0&&(Ce.finished=!0,ke.emit("finish"),Ce.autoDestroy))){var Ne=ke._readableState;(!Ne||Ne.autoDestroy&&Ne.endEmitted)&&ke.destroy()}return Ae}function ye(ke,Ce,Ae){Ce.ending=!0,be(ke,Ce),Ae&&(Ce.finished?process$1.nextTick(Ae):ke.once("finish",Ae)),Ce.ended=!0,ke.writable=!1}function Ie(ke,Ce,Ae){var Ne=ke.entry;for(ke.entry=null;Ne;){var We=Ne.callback;Ce.pendingcb--,We(Ae),Ne=Ne.next}Ce.corkedRequestsFree.next=ke}return Object.defineProperty(ie.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Ce){this._writableState&&(this._writableState.destroyed=Ce)}}),ie.prototype.destroy=T.destroy,ie.prototype._undestroy=T.undestroy,ie.prototype._destroy=function(ke,Ce){Ce(ke)},_stream_writable$1}var _stream_duplex$1,hasRequired_stream_duplex$1;function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var n=Object.keys||function(R){var A=[];for(var I in R)A.push(I);return A};_stream_duplex$1=E;var r=require_stream_readable$1(),g=require_stream_writable$1();requireInherits_browser()(E,r);for(var _=n(g.prototype),x=0;x<_.length;x++){var S=_[x];E.prototype[S]||(E.prototype[S]=g.prototype[S])}function E(R){if(!(this instanceof E))return new E(R);r.call(this,R),g.call(this,R),this.allowHalfOpen=!0,R&&(R.readable===!1&&(this.readable=!1),R.writable===!1&&(this.writable=!1),R.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",C)))}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function C(){this._writableState.ended||process$1.nextTick(T,this)}function T(R){R.end()}return Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(A){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=A,this._writableState.destroyed=A)}}),_stream_duplex$1}var string_decoder={},safeBuffer$1={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredSafeBuffer$1;function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(n,r){var g=requireDist(),_=g.Buffer;function x(E,C){for(var T in E)C[T]=E[T]}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?n.exports=g:(x(g,r),r.Buffer=S);function S(E,C,T){return _(E,C,T)}S.prototype=Object.create(_.prototype),x(_,S),S.from=function(E,C,T){if(typeof E=="number")throw new TypeError("Argument must not be a number");return _(E,C,T)},S.alloc=function(E,C,T){if(typeof E!="number")throw new TypeError("Argument must be a number");var R=_(E);return C!==void 0?typeof T=="string"?R.fill(C,T):R.fill(C):R.fill(0),R},S.allocUnsafe=function(E){if(typeof E!="number")throw new TypeError("Argument must be a number");return _(E)},S.allocUnsafeSlow=function(E){if(typeof E!="number")throw new TypeError("Argument must be a number");return g.SlowBuffer(E)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var n=requireSafeBuffer$1().Buffer,r=n.isEncoding||function(L){switch(L=""+L,L&&L.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function g(L){if(!L)return"utf8";for(var F;;)switch(L){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return L;default:if(F)return;L=(""+L).toLowerCase(),F=!0}}function _(L){var F=g(L);if(typeof F!="string"&&(n.isEncoding===r||!r(L)))throw new Error("Unknown encoding: "+L);return F||L}string_decoder.StringDecoder=x;function x(L){this.encoding=_(L);var F;switch(this.encoding){case"utf16le":this.text=I,this.end=B,F=4;break;case"utf8":this.fillLast=T,F=4;break;case"base64":this.text=D,this.end=N,F=3;break;default:this.write=M,this.end=O;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=n.allocUnsafe(F)}x.prototype.write=function(L){if(L.length===0)return"";var F,U;if(this.lastNeed){if(F=this.fillLast(L),F===void 0)return"";U=this.lastNeed,this.lastNeed=0}else U=0;return U<L.length?F?F+this.text(L,U):this.text(L,U):F||""},x.prototype.end=A,x.prototype.text=R,x.prototype.fillLast=function(L){if(this.lastNeed<=L.length)return L.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);L.copy(this.lastChar,this.lastTotal-this.lastNeed,0,L.length),this.lastNeed-=L.length};function S(L){return L<=127?0:L>>5===6?2:L>>4===14?3:L>>3===30?4:L>>6===2?-1:-2}function E(L,F,U){var j=F.length-1;if(j<U)return 0;var z=S(F[j]);return z>=0?(z>0&&(L.lastNeed=z-1),z):--j<U||z===-2?0:(z=S(F[j]),z>=0?(z>0&&(L.lastNeed=z-2),z):--j<U||z===-2?0:(z=S(F[j]),z>=0?(z>0&&(z===2?z=0:L.lastNeed=z-3),z):0))}function C(L,F,U){if((F[0]&192)!==128)return L.lastNeed=0,"�";if(L.lastNeed>1&&F.length>1){if((F[1]&192)!==128)return L.lastNeed=1,"�";if(L.lastNeed>2&&F.length>2&&(F[2]&192)!==128)return L.lastNeed=2,"�"}}function T(L){var F=this.lastTotal-this.lastNeed,U=C(this,L);if(U!==void 0)return U;if(this.lastNeed<=L.length)return L.copy(this.lastChar,F,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);L.copy(this.lastChar,F,0,L.length),this.lastNeed-=L.length}function R(L,F){var U=E(this,L,F);if(!this.lastNeed)return L.toString("utf8",F);this.lastTotal=U;var j=L.length-(U-this.lastNeed);return L.copy(this.lastChar,0,j),L.toString("utf8",F,j)}function A(L){var F=L&&L.length?this.write(L):"";return this.lastNeed?F+"�":F}function I(L,F){if((L.length-F)%2===0){var U=L.toString("utf16le",F);if(U){var j=U.charCodeAt(U.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=L[L.length-2],this.lastChar[1]=L[L.length-1],U.slice(0,-1)}return U}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=L[L.length-1],L.toString("utf16le",F,L.length-1)}function B(L){var F=L&&L.length?this.write(L):"";if(this.lastNeed){var U=this.lastTotal-this.lastNeed;return F+this.lastChar.toString("utf16le",0,U)}return F}function D(L,F){var U=(L.length-F)%3;return U===0?L.toString("base64",F):(this.lastNeed=3-U,this.lastTotal=3,U===1?this.lastChar[0]=L[L.length-1]:(this.lastChar[0]=L[L.length-2],this.lastChar[1]=L[L.length-1]),L.toString("base64",F,L.length-U))}function N(L){var F=L&&L.length?this.write(L):"";return this.lastNeed?F+this.lastChar.toString("base64",0,3-this.lastNeed):F}function M(L){return L.toString(this.encoding)}function O(L){return L&&L.length?this.write(L):""}return string_decoder}var endOfStream,hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var n=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function r(S){var E=!1;return function(){if(!E){E=!0;for(var C=arguments.length,T=new Array(C),R=0;R<C;R++)T[R]=arguments[R];S.apply(this,T)}}}function g(){}function _(S){return S.setHeader&&typeof S.abort=="function"}function x(S,E,C){if(typeof E=="function")return x(S,null,E);E||(E={}),C=r(C||g);var T=E.readable||E.readable!==!1&&S.readable,R=E.writable||E.writable!==!1&&S.writable,A=function(){S.writable||B()},I=S._writableState&&S._writableState.finished,B=function(){R=!1,I=!0,T||C.call(S)},D=S._readableState&&S._readableState.endEmitted,N=function(){T=!1,D=!0,R||C.call(S)},M=function(U){C.call(S,U)},O=function(){var U;if(T&&!D)return(!S._readableState||!S._readableState.ended)&&(U=new n),C.call(S,U);if(R&&!I)return(!S._writableState||!S._writableState.ended)&&(U=new n),C.call(S,U)},L=function(){S.req.on("finish",B)};return _(S)?(S.on("complete",B),S.on("abort",O),S.req?L():S.on("request",L)):R&&!S._writableState&&(S.on("end",A),S.on("close",A)),S.on("end",N),S.on("finish",B),E.error!==!1&&S.on("error",M),S.on("close",O),function(){S.removeListener("complete",B),S.removeListener("abort",O),S.removeListener("request",L),S.req&&S.req.removeListener("finish",B),S.removeListener("end",A),S.removeListener("close",A),S.removeListener("finish",B),S.removeListener("end",N),S.removeListener("error",M),S.removeListener("close",O)}}return endOfStream=x,endOfStream}var async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var n;function r(U,j,z){return j=g(j),j in U?Object.defineProperty(U,j,{value:z,enumerable:!0,configurable:!0,writable:!0}):U[j]=z,U}function g(U){var j=_(U,"string");return typeof j=="symbol"?j:String(j)}function _(U,j){if(typeof U!="object"||U===null)return U;var z=U[Symbol.toPrimitive];if(z!==void 0){var W=z.call(U,j||"default");if(typeof W!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return(j==="string"?String:Number)(U)}var x=requireEndOfStream(),S=Symbol("lastResolve"),E=Symbol("lastReject"),C=Symbol("error"),T=Symbol("ended"),R=Symbol("lastPromise"),A=Symbol("handlePromise"),I=Symbol("stream");function B(U,j){return{value:U,done:j}}function D(U){var j=U[S];if(j!==null){var z=U[I].read();z!==null&&(U[R]=null,U[S]=null,U[E]=null,j(B(z,!1)))}}function N(U){process$1.nextTick(D,U)}function M(U,j){return function(z,W){U.then(function(){if(j[T]){z(B(void 0,!0));return}j[A](z,W)},W)}}var O=Object.getPrototypeOf(function(){}),L=Object.setPrototypeOf((n={get stream(){return this[I]},next:function(){var j=this,z=this[C];if(z!==null)return Promise.reject(z);if(this[T])return Promise.resolve(B(void 0,!0));if(this[I].destroyed)return new Promise(function(fe,xe){process$1.nextTick(function(){j[C]?xe(j[C]):fe(B(void 0,!0))})});var W=this[R],X;if(W)X=new Promise(M(W,this));else{var ie=this[I].read();if(ie!==null)return Promise.resolve(B(ie,!1));X=new Promise(this[A])}return this[R]=X,X}},r(n,Symbol.asyncIterator,function(){return this}),r(n,"return",function(){var j=this;return new Promise(function(z,W){j[I].destroy(null,function(X){if(X){W(X);return}z(B(void 0,!0))})})}),n),O),F=function(j){var z,W=Object.create(L,(z={},r(z,I,{value:j,writable:!0}),r(z,S,{value:null,writable:!0}),r(z,E,{value:null,writable:!0}),r(z,C,{value:null,writable:!0}),r(z,T,{value:j._readableState.endEmitted,writable:!0}),r(z,A,{value:function(ie,fe){var xe=W[I].read();xe?(W[R]=null,W[S]=null,W[E]=null,ie(B(xe,!1))):(W[S]=ie,W[E]=fe)},writable:!0}),z));return W[R]=null,x(j,function(X){if(X&&X.code!=="ERR_STREAM_PREMATURE_CLOSE"){var ie=W[E];ie!==null&&(W[R]=null,W[S]=null,W[E]=null,ie(X)),W[C]=X;return}var fe=W[S];fe!==null&&(W[R]=null,W[S]=null,W[E]=null,fe(B(void 0,!0))),W[T]=!0}),j.on("readable",N.bind(null,W)),W};return async_iterator=F,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable$1,hasRequired_stream_readable$1;function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;hasRequired_stream_readable$1=1,_stream_readable$1=fe;var n;fe.ReadableState=ie,requireEvents().EventEmitter;var r=function(Se,$e){return Se.listeners($e).length},g=requireStreamBrowser$1(),_=requireDist().Buffer,x=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function S(Be){return _.from(Be)}function E(Be){return _.isBuffer(Be)||Be instanceof x}var C=requireUtil$1(),T;C&&C.debuglog?T=C.debuglog("stream"):T=function(){};var R=requireBuffer_list(),A=requireDestroy$1(),I=requireState(),B=I.getHighWaterMark,D=requireErrorsBrowser().codes,N=D.ERR_INVALID_ARG_TYPE,M=D.ERR_STREAM_PUSH_AFTER_EOF,O=D.ERR_METHOD_NOT_IMPLEMENTED,L=D.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,F,U,j;requireInherits_browser()(fe,g);var z=A.errorOrDestroy,W=["error","close","destroy","pause","resume"];function X(Be,Se,$e){if(typeof Be.prependListener=="function")return Be.prependListener(Se,$e);!Be._events||!Be._events[Se]?Be.on(Se,$e):Array.isArray(Be._events[Se])?Be._events[Se].unshift($e):Be._events[Se]=[$e,Be._events[Se]]}function ie(Be,Se,$e){n=n||require_stream_duplex$1(),Be=Be||{},typeof $e!="boolean"&&($e=Se instanceof n),this.objectMode=!!Be.objectMode,$e&&(this.objectMode=this.objectMode||!!Be.readableObjectMode),this.highWaterMark=B(this,Be,"readableHighWaterMark",$e),this.buffer=new R,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Be.emitClose!==!1,this.autoDestroy=!!Be.autoDestroy,this.destroyed=!1,this.defaultEncoding=Be.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Be.encoding&&(F||(F=requireString_decoder().StringDecoder),this.decoder=new F(Be.encoding),this.encoding=Be.encoding)}function fe(Be){if(n=n||require_stream_duplex$1(),!(this instanceof fe))return new fe(Be);var Se=this instanceof n;this._readableState=new ie(Be,this,Se),this.readable=!0,Be&&(typeof Be.read=="function"&&(this._read=Be.read),typeof Be.destroy=="function"&&(this._destroy=Be.destroy)),g.call(this)}Object.defineProperty(fe.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Se){this._readableState&&(this._readableState.destroyed=Se)}}),fe.prototype.destroy=A.destroy,fe.prototype._undestroy=A.undestroy,fe.prototype._destroy=function(Be,Se){Se(Be)},fe.prototype.push=function(Be,Se){var $e=this._readableState,_e;return $e.objectMode?_e=!0:typeof Be=="string"&&(Se=Se||$e.defaultEncoding,Se!==$e.encoding&&(Be=_.from(Be,Se),Se=""),_e=!0),xe(this,Be,Se,!1,_e)},fe.prototype.unshift=function(Be){return xe(this,Be,null,!0,!1)};function xe(Be,Se,$e,_e,Oe){T("readableAddChunk",Se);var Ke=Be._readableState;if(Se===null)Ke.reading=!1,ve(Be,Ke);else{var Me;if(Oe||(Me=G(Ke,Se)),Me)z(Be,Me);else if(Ke.objectMode||Se&&Se.length>0)if(typeof Se!="string"&&!Ke.objectMode&&Object.getPrototypeOf(Se)!==_.prototype&&(Se=S(Se)),_e)Ke.endEmitted?z(Be,new L):we(Be,Ke,Se,!0);else if(Ke.ended)z(Be,new M);else{if(Ke.destroyed)return!1;Ke.reading=!1,Ke.decoder&&!$e?(Se=Ke.decoder.write(Se),Ke.objectMode||Se.length!==0?we(Be,Ke,Se,!1):ue(Be,Ke)):we(Be,Ke,Se,!1)}else _e||(Ke.reading=!1,ue(Be,Ke))}return!Ke.ended&&(Ke.length<Ke.highWaterMark||Ke.length===0)}function we(Be,Se,$e,_e){Se.flowing&&Se.length===0&&!Se.sync?(Se.awaitDrain=0,Be.emit("data",$e)):(Se.length+=Se.objectMode?1:$e.length,_e?Se.buffer.unshift($e):Se.buffer.push($e),Se.needReadable&&Z(Be)),ue(Be,Se)}function G(Be,Se){var $e;return!E(Se)&&typeof Se!="string"&&Se!==void 0&&!Be.objectMode&&($e=new N("chunk",["string","Buffer","Uint8Array"],Se)),$e}fe.prototype.isPaused=function(){return this._readableState.flowing===!1},fe.prototype.setEncoding=function(Be){F||(F=requireString_decoder().StringDecoder);var Se=new F(Be);this._readableState.decoder=Se,this._readableState.encoding=this._readableState.decoder.encoding;for(var $e=this._readableState.buffer.head,_e="";$e!==null;)_e+=Se.write($e.data),$e=$e.next;return this._readableState.buffer.clear(),_e!==""&&this._readableState.buffer.push(_e),this._readableState.length=_e.length,this};var J=1073741824;function q(Be){return Be>=J?Be=J:(Be--,Be|=Be>>>1,Be|=Be>>>2,Be|=Be>>>4,Be|=Be>>>8,Be|=Be>>>16,Be++),Be}function H(Be,Se){return Be<=0||Se.length===0&&Se.ended?0:Se.objectMode?1:Be!==Be?Se.flowing&&Se.length?Se.buffer.head.data.length:Se.length:(Be>Se.highWaterMark&&(Se.highWaterMark=q(Be)),Be<=Se.length?Be:Se.ended?Se.length:(Se.needReadable=!0,0))}fe.prototype.read=function(Be){T("read",Be),Be=parseInt(Be,10);var Se=this._readableState,$e=Be;if(Be!==0&&(Se.emittedReadable=!1),Be===0&&Se.needReadable&&((Se.highWaterMark!==0?Se.length>=Se.highWaterMark:Se.length>0)||Se.ended))return T("read: emitReadable",Se.length,Se.ended),Se.length===0&&Se.ended?Ae(this):Z(this),null;if(Be=H(Be,Se),Be===0&&Se.ended)return Se.length===0&&Ae(this),null;var _e=Se.needReadable;T("need readable",_e),(Se.length===0||Se.length-Be<Se.highWaterMark)&&(_e=!0,T("length less than watermark",_e)),Se.ended||Se.reading?(_e=!1,T("reading or ended",_e)):_e&&(T("do read"),Se.reading=!0,Se.sync=!0,Se.length===0&&(Se.needReadable=!0),this._read(Se.highWaterMark),Se.sync=!1,Se.reading||(Be=H($e,Se)));var Oe;return Be>0?Oe=Ce(Be,Se):Oe=null,Oe===null?(Se.needReadable=Se.length<=Se.highWaterMark,Be=0):(Se.length-=Be,Se.awaitDrain=0),Se.length===0&&(Se.ended||(Se.needReadable=!0),$e!==Be&&Se.ended&&Ae(this)),Oe!==null&&this.emit("data",Oe),Oe};function ve(Be,Se){if(T("onEofChunk"),!Se.ended){if(Se.decoder){var $e=Se.decoder.end();$e&&$e.length&&(Se.buffer.push($e),Se.length+=Se.objectMode?1:$e.length)}Se.ended=!0,Se.sync?Z(Be):(Se.needReadable=!1,Se.emittedReadable||(Se.emittedReadable=!0,ce(Be)))}}function Z(Be){var Se=Be._readableState;T("emitReadable",Se.needReadable,Se.emittedReadable),Se.needReadable=!1,Se.emittedReadable||(T("emitReadable",Se.flowing),Se.emittedReadable=!0,process$1.nextTick(ce,Be))}function ce(Be){var Se=Be._readableState;T("emitReadable_",Se.destroyed,Se.length,Se.ended),!Se.destroyed&&(Se.length||Se.ended)&&(Be.emit("readable"),Se.emittedReadable=!1),Se.needReadable=!Se.flowing&&!Se.ended&&Se.length<=Se.highWaterMark,ke(Be)}function ue(Be,Se){Se.readingMore||(Se.readingMore=!0,process$1.nextTick(se,Be,Se))}function se(Be,Se){for(;!Se.reading&&!Se.ended&&(Se.length<Se.highWaterMark||Se.flowing&&Se.length===0);){var $e=Se.length;if(T("maybeReadMore read 0"),Be.read(0),$e===Se.length)break}Se.readingMore=!1}fe.prototype._read=function(Be){z(this,new O("_read()"))},fe.prototype.pipe=function(Be,Se){var $e=this,_e=this._readableState;switch(_e.pipesCount){case 0:_e.pipes=Be;break;case 1:_e.pipes=[_e.pipes,Be];break;default:_e.pipes.push(Be);break}_e.pipesCount+=1,T("pipe count=%d opts=%j",_e.pipesCount,Se);var Oe=(!Se||Se.end!==!1)&&Be!==process$1.stdout&&Be!==process$1.stderr,Ke=Oe?Le:Et;_e.endEmitted?process$1.nextTick(Ke):$e.once("end",Ke),Be.on("unpipe",Me);function Me(Rt,$t){T("onunpipe"),Rt===$e&&$t&&$t.hasUnpiped===!1&&($t.hasUnpiped=!0,Qe())}function Le(){T("onend"),Be.end()}var ze=te($e);Be.on("drain",ze);var Je=!1;function Qe(){T("cleanup"),Be.removeListener("close",bt),Be.removeListener("finish",xt),Be.removeListener("drain",ze),Be.removeListener("error",wt),Be.removeListener("unpipe",Me),$e.removeListener("end",Le),$e.removeListener("end",Et),$e.removeListener("data",rt),Je=!0,_e.awaitDrain&&(!Be._writableState||Be._writableState.needDrain)&&ze()}$e.on("data",rt);function rt(Rt){T("ondata");var $t=Be.write(Rt);T("dest.write",$t),$t===!1&&((_e.pipesCount===1&&_e.pipes===Be||_e.pipesCount>1&&We(_e.pipes,Be)!==-1)&&!Je&&(T("false write response, pause",_e.awaitDrain),_e.awaitDrain++),$e.pause())}function wt(Rt){T("onerror",Rt),Et(),Be.removeListener("error",wt),r(Be,"error")===0&&z(Be,Rt)}X(Be,"error",wt);function bt(){Be.removeListener("finish",xt),Et()}Be.once("close",bt);function xt(){T("onfinish"),Be.removeListener("close",bt),Et()}Be.once("finish",xt);function Et(){T("unpipe"),$e.unpipe(Be)}return Be.emit("pipe",$e),_e.flowing||(T("pipe resume"),$e.resume()),Be};function te(Be){return function(){var $e=Be._readableState;T("pipeOnDrain",$e.awaitDrain),$e.awaitDrain&&$e.awaitDrain--,$e.awaitDrain===0&&r(Be,"data")&&($e.flowing=!0,ke(Be))}}fe.prototype.unpipe=function(Be){var Se=this._readableState,$e={hasUnpiped:!1};if(Se.pipesCount===0)return this;if(Se.pipesCount===1)return Be&&Be!==Se.pipes?this:(Be||(Be=Se.pipes),Se.pipes=null,Se.pipesCount=0,Se.flowing=!1,Be&&Be.emit("unpipe",this,$e),this);if(!Be){var _e=Se.pipes,Oe=Se.pipesCount;Se.pipes=null,Se.pipesCount=0,Se.flowing=!1;for(var Ke=0;Ke<Oe;Ke++)_e[Ke].emit("unpipe",this,{hasUnpiped:!1});return this}var Me=We(Se.pipes,Be);return Me===-1?this:(Se.pipes.splice(Me,1),Se.pipesCount-=1,Se.pipesCount===1&&(Se.pipes=Se.pipes[0]),Be.emit("unpipe",this,$e),this)},fe.prototype.on=function(Be,Se){var $e=g.prototype.on.call(this,Be,Se),_e=this._readableState;return Be==="data"?(_e.readableListening=this.listenerCount("readable")>0,_e.flowing!==!1&&this.resume()):Be==="readable"&&!_e.endEmitted&&!_e.readableListening&&(_e.readableListening=_e.needReadable=!0,_e.flowing=!1,_e.emittedReadable=!1,T("on readable",_e.length,_e.reading),_e.length?Z(this):_e.reading||process$1.nextTick(be,this)),$e},fe.prototype.addListener=fe.prototype.on,fe.prototype.removeListener=function(Be,Se){var $e=g.prototype.removeListener.call(this,Be,Se);return Be==="readable"&&process$1.nextTick(Y,this),$e},fe.prototype.removeAllListeners=function(Be){var Se=g.prototype.removeAllListeners.apply(this,arguments);return(Be==="readable"||Be===void 0)&&process$1.nextTick(Y,this),Se};function Y(Be){var Se=Be._readableState;Se.readableListening=Be.listenerCount("readable")>0,Se.resumeScheduled&&!Se.paused?Se.flowing=!0:Be.listenerCount("data")>0&&Be.resume()}function be(Be){T("readable nexttick read 0"),Be.read(0)}fe.prototype.resume=function(){var Be=this._readableState;return Be.flowing||(T("resume"),Be.flowing=!Be.readableListening,ye(this,Be)),Be.paused=!1,this};function ye(Be,Se){Se.resumeScheduled||(Se.resumeScheduled=!0,process$1.nextTick(Ie,Be,Se))}function Ie(Be,Se){T("resume",Se.reading),Se.reading||Be.read(0),Se.resumeScheduled=!1,Be.emit("resume"),ke(Be),Se.flowing&&!Se.reading&&Be.read(0)}fe.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ke(Be){var Se=Be._readableState;for(T("flow",Se.flowing);Se.flowing&&Be.read()!==null;);}fe.prototype.wrap=function(Be){var Se=this,$e=this._readableState,_e=!1;Be.on("end",function(){if(T("wrapped end"),$e.decoder&&!$e.ended){var Me=$e.decoder.end();Me&&Me.length&&Se.push(Me)}Se.push(null)}),Be.on("data",function(Me){if(T("wrapped data"),$e.decoder&&(Me=$e.decoder.write(Me)),!($e.objectMode&&Me==null)&&!(!$e.objectMode&&(!Me||!Me.length))){var Le=Se.push(Me);Le||(_e=!0,Be.pause())}});for(var Oe in Be)this[Oe]===void 0&&typeof Be[Oe]=="function"&&(this[Oe]=function(Le){return function(){return Be[Le].apply(Be,arguments)}}(Oe));for(var Ke=0;Ke<W.length;Ke++)Be.on(W[Ke],this.emit.bind(this,W[Ke]));return this._read=function(Me){T("wrapped _read",Me),_e&&(_e=!1,Be.resume())},this},typeof Symbol=="function"&&(fe.prototype[Symbol.asyncIterator]=function(){return U===void 0&&(U=requireAsync_iterator()),U(this)}),Object.defineProperty(fe.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(fe.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(fe.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Se){this._readableState&&(this._readableState.flowing=Se)}}),fe._fromList=Ce,Object.defineProperty(fe.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Ce(Be,Se){if(Se.length===0)return null;var $e;return Se.objectMode?$e=Se.buffer.shift():!Be||Be>=Se.length?(Se.decoder?$e=Se.buffer.join(""):Se.buffer.length===1?$e=Se.buffer.first():$e=Se.buffer.concat(Se.length),Se.buffer.clear()):$e=Se.buffer.consume(Be,Se.decoder),$e}function Ae(Be){var Se=Be._readableState;T("endReadable",Se.endEmitted),Se.endEmitted||(Se.ended=!0,process$1.nextTick(Ne,Se,Be))}function Ne(Be,Se){if(T("endReadableNT",Be.endEmitted,Be.length),!Be.endEmitted&&Be.length===0&&(Be.endEmitted=!0,Se.readable=!1,Se.emit("end"),Be.autoDestroy)){var $e=Se._writableState;(!$e||$e.autoDestroy&&$e.finished)&&Se.destroy()}}typeof Symbol=="function"&&(fe.from=function(Be,Se){return j===void 0&&(j=requireFromBrowser()),j(fe,Be,Se)});function We(Be,Se){for(var $e=0,_e=Be.length;$e<_e;$e++)if(Be[$e]===Se)return $e;return-1}return _stream_readable$1}var _stream_transform$1,hasRequired_stream_transform$1;function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=C;var n=requireErrorsBrowser().codes,r=n.ERR_METHOD_NOT_IMPLEMENTED,g=n.ERR_MULTIPLE_CALLBACK,_=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,x=n.ERR_TRANSFORM_WITH_LENGTH_0,S=require_stream_duplex$1();requireInherits_browser()(C,S);function E(A,I){var B=this._transformState;B.transforming=!1;var D=B.writecb;if(D===null)return this.emit("error",new g);B.writechunk=null,B.writecb=null,I!=null&&this.push(I),D(A);var N=this._readableState;N.reading=!1,(N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}function C(A){if(!(this instanceof C))return new C(A);S.call(this,A),this._transformState={afterTransform:E.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,A&&(typeof A.transform=="function"&&(this._transform=A.transform),typeof A.flush=="function"&&(this._flush=A.flush)),this.on("prefinish",T)}function T(){var A=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(I,B){R(A,I,B)}):R(this,null,null)}C.prototype.push=function(A,I){return this._transformState.needTransform=!1,S.prototype.push.call(this,A,I)},C.prototype._transform=function(A,I,B){B(new r("_transform()"))},C.prototype._write=function(A,I,B){var D=this._transformState;if(D.writecb=B,D.writechunk=A,D.writeencoding=I,!D.transforming){var N=this._readableState;(D.needTransform||N.needReadable||N.length<N.highWaterMark)&&this._read(N.highWaterMark)}},C.prototype._read=function(A){var I=this._transformState;I.writechunk!==null&&!I.transforming?(I.transforming=!0,this._transform(I.writechunk,I.writeencoding,I.afterTransform)):I.needTransform=!0},C.prototype._destroy=function(A,I){S.prototype._destroy.call(this,A,function(B){I(B)})};function R(A,I,B){if(I)return A.emit("error",I);if(B!=null&&A.push(B),A._writableState.length)throw new x;if(A._transformState.transforming)throw new _;return A.push(null)}return _stream_transform$1}var _stream_passthrough$1,hasRequired_stream_passthrough$1;function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=r;var n=require_stream_transform$1();requireInherits_browser()(r,n);function r(g){if(!(this instanceof r))return new r(g);n.call(this,g)}return r.prototype._transform=function(g,_,x){x(null,g)},_stream_passthrough$1}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;var n;function r(B){var D=!1;return function(){D||(D=!0,B.apply(void 0,arguments))}}var g=requireErrorsBrowser().codes,_=g.ERR_MISSING_ARGS,x=g.ERR_STREAM_DESTROYED;function S(B){if(B)throw B}function E(B){return B.setHeader&&typeof B.abort=="function"}function C(B,D,N,M){M=r(M);var O=!1;B.on("close",function(){O=!0}),n===void 0&&(n=requireEndOfStream()),n(B,{readable:D,writable:N},function(F){if(F)return M(F);O=!0,M()});var L=!1;return function(F){if(!O&&!L){if(L=!0,E(B))return B.abort();if(typeof B.destroy=="function")return B.destroy();M(F||new x("pipe"))}}}function T(B){B()}function R(B,D){return B.pipe(D)}function A(B){return!B.length||typeof B[B.length-1]!="function"?S:B.pop()}function I(){for(var B=arguments.length,D=new Array(B),N=0;N<B;N++)D[N]=arguments[N];var M=A(D);if(Array.isArray(D[0])&&(D=D[0]),D.length<2)throw new _("streams");var O,L=D.map(function(F,U){var j=U<D.length-1,z=U>0;return C(F,j,z,function(W){O||(O=W),W&&L.forEach(T),!j&&(L.forEach(T),M(O))})});return D.reduce(R)}return pipeline_1=I,pipeline_1}var streamBrowserify,hasRequiredStreamBrowserify;function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=g;var n=requireEvents().EventEmitter,r=requireInherits_browser();r(g,n),g.Readable=require_stream_readable$1(),g.Writable=require_stream_writable$1(),g.Duplex=require_stream_duplex$1(),g.Transform=require_stream_transform$1(),g.PassThrough=require_stream_passthrough$1(),g.finished=requireEndOfStream(),g.pipeline=requirePipeline(),g.Stream=g;function g(){n.call(this)}return g.prototype.pipe=function(_,x){var S=this;function E(D){_.writable&&_.write(D)===!1&&S.pause&&S.pause()}S.on("data",E);function C(){S.readable&&S.resume&&S.resume()}_.on("drain",C),!_._isStdio&&(!x||x.end!==!1)&&(S.on("end",R),S.on("close",A));var T=!1;function R(){T||(T=!0,_.end())}function A(){T||(T=!0,typeof _.destroy=="function"&&_.destroy())}function I(D){if(B(),n.listenerCount(this,"error")===0)throw D}S.on("error",I),_.on("error",I);function B(){S.removeListener("data",E),_.removeListener("drain",C),S.removeListener("end",R),S.removeListener("close",A),S.removeListener("error",I),_.removeListener("error",I),S.removeListener("end",B),S.removeListener("close",B),_.removeListener("close",B)}return S.on("end",B),S.on("close",B),_.on("close",B),_.emit("pipe",S),_},streamBrowserify}var hasRequiredIndexedDbReadStream;function requireIndexedDbReadStream(){if(hasRequiredIndexedDbReadStream)return indexedDbReadStream;hasRequiredIndexedDbReadStream=1;var n=indexedDbReadStream&&indexedDbReadStream.__extends||function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,S){x.__proto__=S}||function(x,S){for(var E in S)S.hasOwnProperty(E)&&(x[E]=S[E])};return function(x,S){_(x,S);function E(){this.constructor=x}x.prototype=S===null?Object.create(S):(E.prototype=S.prototype,new E)}}();Object.defineProperty(indexedDbReadStream,"__esModule",{value:!0});var r=requireStreamBrowserify(),g=function(_){n(x,_);function x(S){var E=_.call(this,{objectMode:!0})||this,C=indexedDB.open(S.databaseName,S.databaseVersion);return C.addEventListener("success",function(T){var R;try{var A=T.target.result.transaction([S.objectStoreName]).objectStore(S.objectStoreName);S.indexName&&(A=A.index(S.indexName)),R=A.openCursor(S.range,S.cursorDirection)}catch(I){return E.emit("error",I)}R.addEventListener("success",function(I){if(I.target.result)return E.push(I.target.result.value),I.target.result.continue();E.push(null)}),R.addEventListener("error",function(I){E.emit("error",I.target.result)})}),C.addEventListener("error",function(T){E.emit("error",T.target.result)}),E}return x.prototype._read=function(){},x}(r.Readable);return indexedDbReadStream.IndexedDbReadStream=g,indexedDbReadStream}var indexedDbWriteStream={},hasRequiredIndexedDbWriteStream;function requireIndexedDbWriteStream(){if(hasRequiredIndexedDbWriteStream)return indexedDbWriteStream;hasRequiredIndexedDbWriteStream=1;var n=indexedDbWriteStream&&indexedDbWriteStream.__extends||function(){var _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,S){x.__proto__=S}||function(x,S){for(var E in S)S.hasOwnProperty(E)&&(x[E]=S[E])};return function(x,S){_(x,S);function E(){this.constructor=x}x.prototype=S===null?Object.create(S):(E.prototype=S.prototype,new E)}}();Object.defineProperty(indexedDbWriteStream,"__esModule",{value:!0});var r=requireStreamBrowserify(),g=function(_){n(x,_);function x(S){var E=_.call(this,{objectMode:!0})||this;return E.options=S,E}return x.prototype._write=function(S,E,C){var T=this,R=indexedDB.open(this.options.databaseName,this.options.databaseVersion);R.addEventListener("success",function(A){var I;try{I=A.target.result.transaction([T.options.objectStoreName],"readwrite").objectStore(T.options.objectStoreName).add(S)}catch(B){T.emit("error",B);return}I.addEventListener("success",function(){C()}),I.addEventListener("error",function(B){T.emit("error",B.target.error)})}),R.addEventListener("error",function(A){T.emit("error",A.target.error)})},x}(r.Writable);return indexedDbWriteStream.IndexedDbWriteStream=g,indexedDbWriteStream}var hasRequiredLib$2;function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,function(n){function r(g){for(var _ in g)n.hasOwnProperty(_)||(n[_]=g[_])}Object.defineProperty(n,"__esModule",{value:!0}),r(requireIndexedDbReadStream()),r(requireIndexedDbWriteStream())}(lib$2)),lib$2}var libExports$1=requireLib$2();const indexedDbStream=getDefaultExportFromCjs(libExports$1);var platform$1={exports:{}};/*!
 * Platform.js v1.3.6
 * Copyright 2014-2020 Benjamin Tan
 * Copyright 2011-2013 John-David Dalton
 * Available under MIT license
 */var platform=platform$1.exports,hasRequiredPlatform;function requirePlatform(){return hasRequiredPlatform||(hasRequiredPlatform=1,function(n,r){(function(){var g={function:!0,object:!0},_=g[typeof window]&&window||this,x=r,S=n&&!n.nodeType&&n,E=x&&S&&typeof commonjsGlobal=="object"&&commonjsGlobal;E&&(E.global===E||E.window===E||E.self===E)&&(_=E);var C=Math.pow(2,53)-1,T=/\bOpera/,R=Object.prototype,A=R.hasOwnProperty,I=R.toString;function B(ie){return ie=String(ie),ie.charAt(0).toUpperCase()+ie.slice(1)}function D(ie,fe,xe){var we={"10.0":"10","6.4":"10 Technical Preview","6.3":"8.1","6.2":"8","6.1":"Server 2008 R2 / 7","6.0":"Server 2008 / Vista","5.2":"Server 2003 / XP 64-bit","5.1":"XP","5.01":"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return fe&&xe&&/^Win/i.test(ie)&&!/^Windows Phone /i.test(ie)&&(we=we[/[\d.]+$/.exec(ie)])&&(ie="Windows "+we),ie=String(ie),fe&&xe&&(ie=ie.replace(RegExp(fe,"i"),xe)),ie=M(ie.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),ie}function N(ie,fe){var xe=-1,we=ie?ie.length:0;if(typeof we=="number"&&we>-1&&we<=C)for(;++xe<we;)fe(ie[xe],xe,ie);else O(ie,fe)}function M(ie){return ie=z(ie),/^(?:webOS|i(?:OS|P))/.test(ie)?ie:B(ie)}function O(ie,fe){for(var xe in ie)A.call(ie,xe)&&fe(ie[xe],xe,ie)}function L(ie){return ie==null?B(ie):I.call(ie).slice(8,-1)}function F(ie,fe){var xe=ie!=null?typeof ie[fe]:"number";return!/^(?:boolean|number|string|undefined)$/.test(xe)&&(xe=="object"?!!ie[fe]:!0)}function U(ie){return String(ie).replace(/([ -])(?!$)/g,"$1?")}function j(ie,fe){var xe=null;return N(ie,function(we,G){xe=fe(xe,we,G,ie)}),xe}function z(ie){return String(ie).replace(/^ +| +$/g,"")}function W(ie){var fe=_,xe=ie&&typeof ie=="object"&&L(ie)!="String";xe&&(fe=ie,ie=null);var we=fe.navigator||{},G=we.userAgent||"";ie||(ie=G);var J=xe?!!we.likeChrome:/\bChrome\b/.test(ie)&&!/internal|\n/i.test(I.toString()),q="Object",H=xe?q:"ScriptBridgingProxyObject",ve=xe?q:"Environment",Z=xe&&fe.java?"JavaPackage":L(fe.java),ce=xe?q:"RuntimeObject",ue=/\bJava/.test(Z)&&fe.java,se=ue&&L(fe.environment)==ve,te=ue?"a":"α",Y=ue?"b":"β",be=fe.document||{},ye=fe.operamini||fe.opera,Ie=T.test(Ie=xe&&ye?ye["[[Class]]"]:L(ye))?Ie:ye=null,ke,Ce=ie,Ae=[],Ne=null,We=ie==G,Be=We&&ye&&typeof ye.version=="function"&&ye.version(),Se,$e=Le([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),_e=Je(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),Oe=rt([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),Ke=ze({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),Me=Qe(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function Le(Et){return j(Et,function(Rt,$t){return Rt||RegExp("\\b"+($t.pattern||U($t))+"\\b","i").exec(ie)&&($t.label||$t)})}function ze(Et){return j(Et,function(Rt,$t,qt){return Rt||($t[Oe]||$t[/^[a-z]+(?: +[a-z]+\b)*/i.exec(Oe)]||RegExp("\\b"+U(qt)+"(?:\\b|\\w*\\d)","i").exec(ie))&&qt})}function Je(Et){return j(Et,function(Rt,$t){return Rt||RegExp("\\b"+($t.pattern||U($t))+"\\b","i").exec(ie)&&($t.label||$t)})}function Qe(Et){return j(Et,function(Rt,$t){var qt=$t.pattern||U($t);return!Rt&&(Rt=RegExp("\\b"+qt+"(?:/[\\d.]+|[ \\w.]*)","i").exec(ie))&&(Rt=D(Rt,qt,$t.label||$t)),Rt})}function rt(Et){return j(Et,function(Rt,$t){var qt=$t.pattern||U($t);return!Rt&&(Rt=RegExp("\\b"+qt+" *\\d+[.\\w_]*","i").exec(ie)||RegExp("\\b"+qt+" *\\w+-[\\w]*","i").exec(ie)||RegExp("\\b"+qt+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(ie))&&((Rt=String($t.label&&!RegExp(qt,"i").test($t.label)?$t.label:Rt).split("/"))[1]&&!/[\d.]+/.test(Rt[0])&&(Rt[0]+=" "+Rt[1]),$t=$t.label||$t,Rt=M(Rt[0].replace(RegExp(qt,"i"),$t).replace(RegExp("; *(?:"+$t+"[_-])?","i")," ").replace(RegExp("("+$t+")[-_.]?(\\w)","i"),"$1 $2"))),Rt})}function wt(Et){return j(Et,function(Rt,$t){return Rt||(RegExp($t+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(ie)||0)[1]||null})}function bt(){return this.description||""}if($e&&($e=[$e]),/\bAndroid\b/.test(Me)&&!Oe&&(ke=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(ie))&&(Oe=z(ke[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),Ke&&!Oe?Oe=rt([Ke]):Ke&&Oe&&(Oe=Oe.replace(RegExp("^("+U(Ke)+")[-_.\\s]","i"),Ke+" ").replace(RegExp("^("+U(Ke)+")[-_.]?(\\w)","i"),Ke+" $2")),(ke=/\bGoogle TV\b/.exec(Oe))&&(Oe=ke[0]),/\bSimulator\b/i.test(ie)&&(Oe=(Oe?Oe+" ":"")+"Simulator"),_e=="Opera Mini"&&/\bOPiOS\b/.test(ie)&&Ae.push("running in Turbo/Uncompressed mode"),_e=="IE"&&/\blike iPhone OS\b/.test(ie)?(ke=W(ie.replace(/like iPhone OS/,"")),Ke=ke.manufacturer,Oe=ke.product):/^iP/.test(Oe)?(_e||(_e="Safari"),Me="iOS"+((ke=/ OS ([\d_]+)/i.exec(ie))?" "+ke[1].replace(/_/g,"."):"")):_e=="Konqueror"&&/^Linux\b/i.test(Me)?Me="Kubuntu":Ke&&Ke!="Google"&&(/Chrome/.test(_e)&&!/\bMobile Safari\b/i.test(ie)||/\bVita\b/.test(Oe))||/\bAndroid\b/.test(Me)&&/^Chrome/.test(_e)&&/\bVersion\//i.test(ie)?(_e="Android Browser",Me=/\bAndroid\b/.test(Me)?Me:"Android"):_e=="Silk"?(/\bMobi/i.test(ie)||(Me="Android",Ae.unshift("desktop mode")),/Accelerated *= *true/i.test(ie)&&Ae.unshift("accelerated")):_e=="UC Browser"&&/\bUCWEB\b/.test(ie)?Ae.push("speed mode"):_e=="PaleMoon"&&(ke=/\bFirefox\/([\d.]+)\b/.exec(ie))?Ae.push("identifying as Firefox "+ke[1]):_e=="Firefox"&&(ke=/\b(Mobile|Tablet|TV)\b/i.exec(ie))?(Me||(Me="Firefox OS"),Oe||(Oe=ke[1])):!_e||(ke=!/\bMinefield\b/i.test(ie)&&/\b(?:Firefox|Safari)\b/.exec(_e))?(_e&&!Oe&&/[\/,]|^[^(]+?\)/.test(ie.slice(ie.indexOf(ke+"/")+8))&&(_e=null),(ke=Oe||Ke||Me)&&(Oe||Ke||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(Me))&&(_e=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(Me)?Me:ke)+" Browser")):_e=="Electron"&&(ke=(/\bChrome\/([\d.]+)\b/.exec(ie)||0)[1])&&Ae.push("Chromium "+ke),Be||(Be=wt(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",U(_e),"(?:Firefox|Minefield|NetFront)"])),(ke=$e=="iCab"&&parseFloat(Be)>3&&"WebKit"||/\bOpera\b/.test(_e)&&(/\bOPR\b/.test(ie)?"Blink":"Presto")||/\b(?:Midori|Nook|Safari)\b/i.test(ie)&&!/^(?:Trident|EdgeHTML)$/.test($e)&&"WebKit"||!$e&&/\bMSIE\b/i.test(ie)&&(Me=="Mac OS"?"Tasman":"Trident")||$e=="WebKit"&&/\bPlayStation\b(?! Vita\b)/i.test(_e)&&"NetFront")&&($e=[ke]),_e=="IE"&&(ke=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(ie)||0)[1])?(_e+=" Mobile",Me="Windows Phone "+(/\+$/.test(ke)?ke:ke+".x"),Ae.unshift("desktop mode")):/\bWPDesktop\b/i.test(ie)?(_e="IE Mobile",Me="Windows Phone 8.x",Ae.unshift("desktop mode"),Be||(Be=(/\brv:([\d.]+)/.exec(ie)||0)[1])):_e!="IE"&&$e=="Trident"&&(ke=/\brv:([\d.]+)/.exec(ie))&&(_e&&Ae.push("identifying as "+_e+(Be?" "+Be:"")),_e="IE",Be=ke[1]),We){if(F(fe,"global"))if(ue&&(ke=ue.lang.System,Ce=ke.getProperty("os.arch"),Me=Me||ke.getProperty("os.name")+" "+ke.getProperty("os.version")),se){try{Be=fe.require("ringo/engine").version.join("."),_e="RingoJS"}catch{(ke=fe.system)&&ke.global.system==fe.system&&(_e="Narwhal",Me||(Me=ke[0].os||null))}_e||(_e="Rhino")}else typeof fe.process=="object"&&!fe.process.browser&&(ke=fe.process)&&(typeof ke.versions=="object"&&(typeof ke.versions.electron=="string"?(Ae.push("Node "+ke.versions.node),_e="Electron",Be=ke.versions.electron):typeof ke.versions.nw=="string"&&(Ae.push("Chromium "+Be,"Node "+ke.versions.node),_e="NW.js",Be=ke.versions.nw)),_e||(_e="Node.js",Ce=ke.arch,Me=ke.platform,Be=/[\d.]+/.exec(ke.version),Be=Be?Be[0]:null));else L(ke=fe.runtime)==H?(_e="Adobe AIR",Me=ke.flash.system.Capabilities.os):L(ke=fe.phantom)==ce?(_e="PhantomJS",Be=(ke=ke.version||null)&&ke.major+"."+ke.minor+"."+ke.patch):typeof be.documentMode=="number"&&(ke=/\bTrident\/(\d+)/i.exec(ie))?(Be=[Be,be.documentMode],(ke=+ke[1]+4)!=Be[1]&&(Ae.push("IE "+Be[1]+" mode"),$e&&($e[1]=""),Be[1]=ke),Be=_e=="IE"?String(Be[1].toFixed(1)):Be[0]):typeof be.documentMode=="number"&&/^(?:Chrome|Firefox)\b/.test(_e)&&(Ae.push("masking as "+_e+" "+Be),_e="IE",Be="11.0",$e=["Trident"],Me="Windows");Me=Me&&M(Me)}if(Be&&(ke=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(Be)||/(?:alpha|beta)(?: ?\d)?/i.exec(ie+";"+(We&&we.appMinorVersion))||/\bMinefield\b/i.test(ie)&&"a")&&(Ne=/b/i.test(ke)?"beta":"alpha",Be=Be.replace(RegExp(ke+"\\+?$"),"")+(Ne=="beta"?Y:te)+(/\d+\+?/.exec(ke)||"")),_e=="Fennec"||_e=="Firefox"&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(Me))_e="Firefox Mobile";else if(_e=="Maxthon"&&Be)Be=Be.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(Oe))Oe=="Xbox 360"&&(Me=null),Oe=="Xbox 360"&&/\bIEMobile\b/.test(ie)&&Ae.unshift("mobile mode");else if((/^(?:Chrome|IE|Opera)$/.test(_e)||_e&&!Oe&&!/Browser|Mobi/.test(_e))&&(Me=="Windows CE"||/Mobi/i.test(ie)))_e+=" Mobile";else if(_e=="IE"&&We)try{fe.external===null&&Ae.unshift("platform preview")}catch{Ae.unshift("embedded")}else(/\bBlackBerry\b/.test(Oe)||/\bBB10\b/.test(ie))&&(ke=(RegExp(Oe.replace(/ +/g," *")+"/([.\\d]+)","i").exec(ie)||0)[1]||Be)?(ke=[ke,/BB10/.test(ie)],Me=(ke[1]?(Oe=null,Ke="BlackBerry"):"Device Software")+" "+ke[0],Be=null):this!=O&&Oe!="Wii"&&(We&&ye||/Opera/.test(_e)&&/\b(?:MSIE|Firefox)\b/i.test(ie)||_e=="Firefox"&&/\bOS X (?:\d+\.){2,}/.test(Me)||_e=="IE"&&(Me&&!/^Win/.test(Me)&&Be>5.5||/\bWindows XP\b/.test(Me)&&Be>8||Be==8&&!/\bTrident\b/.test(ie)))&&!T.test(ke=W.call(O,ie.replace(T,"")+";"))&&ke.name&&(ke="ing as "+ke.name+((ke=ke.version)?" "+ke:""),T.test(_e)?(/\bIE\b/.test(ke)&&Me=="Mac OS"&&(Me=null),ke="identify"+ke):(ke="mask"+ke,Ie?_e=M(Ie.replace(/([a-z])([A-Z])/g,"$1 $2")):_e="Opera",/\bIE\b/.test(ke)&&(Me=null),We||(Be=null)),$e=["Presto"],Ae.push(ke));(ke=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(ie)||0)[1])&&(ke=[parseFloat(ke.replace(/\.(\d)$/,".0$1")),ke],_e=="Safari"&&ke[1].slice(-1)=="+"?(_e="WebKit Nightly",Ne="alpha",Be=ke[1].slice(0,-1)):(Be==ke[1]||Be==(ke[2]=(/\bSafari\/([\d.]+\+?)/i.exec(ie)||0)[1]))&&(Be=null),ke[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(ie)||0)[1],ke[0]==537.36&&ke[2]==537.36&&parseFloat(ke[1])>=28&&$e=="WebKit"&&($e=["Blink"]),!We||!J&&!ke[1]?($e&&($e[1]="like Safari"),ke=(ke=ke[0],ke<400?1:ke<500?2:ke<526?3:ke<533?4:ke<534?"4+":ke<535?5:ke<537?6:ke<538?7:ke<601?8:ke<602?9:ke<604?10:ke<606?11:ke<608?12:"12")):($e&&($e[1]="like Chrome"),ke=ke[1]||(ke=ke[0],ke<530?1:ke<532?2:ke<532.05?3:ke<533?4:ke<534.03?5:ke<534.07?6:ke<534.1?7:ke<534.13?8:ke<534.16?9:ke<534.24?10:ke<534.3?11:ke<535.01?12:ke<535.02?"13+":ke<535.07?15:ke<535.11?16:ke<535.19?17:ke<536.05?18:ke<536.1?19:ke<537.01?20:ke<537.11?"21+":ke<537.13?23:ke<537.18?24:ke<537.24?25:ke<537.36?26:$e!="Blink"?"27":"28")),$e&&($e[1]+=" "+(ke+=typeof ke=="number"?".x":/[.+]/.test(ke)?"":"+")),_e=="Safari"&&(!Be||parseInt(Be)>45)?Be=ke:_e=="Chrome"&&/\bHeadlessChrome/i.test(ie)&&Ae.unshift("headless")),_e=="Opera"&&(ke=/\bzbov|zvav$/.exec(Me))?(_e+=" ",Ae.unshift("desktop mode"),ke=="zvav"?(_e+="Mini",Be=null):_e+="Mobile",Me=Me.replace(RegExp(" *"+ke+"$"),"")):_e=="Safari"&&/\bChrome\b/.exec($e&&$e[1])?(Ae.unshift("desktop mode"),_e="Chrome Mobile",Be=null,/\bOS X\b/.test(Me)?(Ke="Apple",Me="iOS 4.3+"):Me=null):/\bSRWare Iron\b/.test(_e)&&!Be&&(Be=wt("Chrome")),Be&&Be.indexOf(ke=/[\d.]+$/.exec(Me))==0&&ie.indexOf("/"+ke+"-")>-1&&(Me=z(Me.replace(ke,""))),Me&&Me.indexOf(_e)!=-1&&!RegExp(_e+" OS").test(Me)&&(Me=Me.replace(RegExp(" *"+U(_e)+" *"),"")),$e&&!/\b(?:Avant|Nook)\b/.test(_e)&&(/Browser|Lunascape|Maxthon/.test(_e)||_e!="Safari"&&/^iOS/.test(Me)&&/\bSafari\b/.test($e[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(_e)&&$e[1])&&(ke=$e[$e.length-1])&&Ae.push(ke),Ae.length&&(Ae=["("+Ae.join("; ")+")"]),Ke&&Oe&&Oe.indexOf(Ke)<0&&Ae.push("on "+Ke),Oe&&Ae.push((/^on /.test(Ae[Ae.length-1])?"":"on ")+Oe),Me&&(ke=/ ([\d.+]+)$/.exec(Me),Se=ke&&Me.charAt(Me.length-ke[0].length-1)=="/",Me={architecture:32,family:ke&&!Se?Me.replace(ke[0],""):Me,version:ke?ke[1]:null,toString:function(){var Et=this.version;return this.family+(Et&&!Se?" "+Et:"")+(this.architecture==64?" 64-bit":"")}}),(ke=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(Ce))&&!/\bi686\b/i.test(Ce)?(Me&&(Me.architecture=64,Me.family=Me.family.replace(RegExp(" *"+ke),"")),_e&&(/\bWOW64\b/i.test(ie)||We&&/\w(?:86|32)$/.test(we.cpuClass||we.platform)&&!/\bWin64; x64\b/i.test(ie))&&Ae.unshift("32-bit")):Me&&/^OS X/.test(Me.family)&&_e=="Chrome"&&parseFloat(Be)>=39&&(Me.architecture=64),ie||(ie=null);var xt={};return xt.description=ie,xt.layout=$e&&$e[0],xt.manufacturer=Ke,xt.name=_e,xt.prerelease=Ne,xt.product=Oe,xt.ua=ie,xt.version=_e&&Be,xt.os=Me||{architecture:null,family:null,version:null,toString:function(){return"null"}},xt.parse=W,xt.toString=bt,xt.version&&Ae.unshift(Be),xt.name&&Ae.unshift(_e),Me&&_e&&!(Me==String(Me).split(" ")[0]&&(Me==_e.split(" ")[0]||Oe))&&Ae.push(Oe?"("+Me+")":"on "+Me),Ae.length&&(xt.description=Ae.join(" ")),xt}var X=W();x&&S?O(X,function(ie,fe){x[fe]=ie}):_.platform=X}).call(platform)}(platform$1,platform$1.exports)),platform$1.exports}var platformExports=requirePlatform();const plateforme$1=getDefaultExportFromCjs(platformExports);var encBase64$1={exports:{}},core$1={exports:{}},cryptoBrowserify={},browser$d={exports:{}},hasRequiredBrowser$c;function requireBrowser$c(){if(hasRequiredBrowser$c)return browser$d.exports;hasRequiredBrowser$c=1;var n=65536,r=4294967295;function g(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var _=requireSafeBuffer$1().Buffer,x=commonjsGlobal.crypto||commonjsGlobal.msCrypto;x&&x.getRandomValues?browser$d.exports=S:browser$d.exports=g;function S(E,C){if(E>r)throw new RangeError("requested too many random bytes");var T=_.allocUnsafe(E);if(E>0)if(E>n)for(var R=0;R<E;R+=n)x.getRandomValues(T.slice(R,R+n));else x.getRandomValues(T);return typeof C=="function"?process$1.nextTick(function(){C(null,T)}):T}return browser$d.exports}var hashBase,hasRequiredHashBase;function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var n=requireSafeBuffer$1().Buffer,r=requireStreamBrowserify().Transform,g=requireInherits_browser();function _(C){r.call(this),this._block=n.allocUnsafe(C),this._blockSize=C,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}g(_,r),_.prototype._transform=function(C,T,R){var A=null;try{this.update(C,T)}catch(I){A=I}R(A)},_.prototype._flush=function(C){var T=null;try{this.push(this.digest())}catch(R){T=R}C(T)};var x=typeof Uint8Array<"u",S=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(n.prototype instanceof Uint8Array||n.TYPED_ARRAY_SUPPORT);function E(C,T){if(C instanceof n)return C;if(typeof C=="string")return n.from(C,T);if(S&&ArrayBuffer.isView(C)){if(C.byteLength===0)return n.alloc(0);var R=n.from(C.buffer,C.byteOffset,C.byteLength);if(R.byteLength===C.byteLength)return R}if(x&&C instanceof Uint8Array||n.isBuffer(C)&&C.constructor&&typeof C.constructor.isBuffer=="function"&&C.constructor.isBuffer(C))return n.from(C);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}return _.prototype.update=function(C,T){if(this._finalized)throw new Error("Digest already called");C=E(C,T);for(var R=this._block,A=0;this._blockOffset+C.length-A>=this._blockSize;){for(var I=this._blockOffset;I<this._blockSize;)R[I++]=C[A++];this._update(),this._blockOffset=0}for(;A<C.length;)R[this._blockOffset++]=C[A++];for(var B=0,D=C.length*8;D>0;++B)this._length[B]+=D,D=this._length[B]/4294967296|0,D>0&&(this._length[B]-=4294967296*D);return this},_.prototype._update=function(){throw new Error("_update is not implemented")},_.prototype.digest=function(C){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var T=this._digest();C!==void 0&&(T=T.toString(C)),this._block.fill(0),this._blockOffset=0;for(var R=0;R<4;++R)this._length[R]=0;return T},_.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=_,hashBase}var md5_js,hasRequiredMd5_js;function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var n=requireInherits_browser(),r=requireHashBase(),g=requireSafeBuffer$1().Buffer,_=new Array(16);function x(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}n(x,r),x.prototype._update=function(){for(var A=_,I=0;I<16;++I)A[I]=this._block.readInt32LE(I*4);var B=this._a,D=this._b,N=this._c,M=this._d;B=E(B,D,N,M,A[0],3614090360,7),M=E(M,B,D,N,A[1],3905402710,12),N=E(N,M,B,D,A[2],606105819,17),D=E(D,N,M,B,A[3],3250441966,22),B=E(B,D,N,M,A[4],4118548399,7),M=E(M,B,D,N,A[5],1200080426,12),N=E(N,M,B,D,A[6],2821735955,17),D=E(D,N,M,B,A[7],4249261313,22),B=E(B,D,N,M,A[8],1770035416,7),M=E(M,B,D,N,A[9],2336552879,12),N=E(N,M,B,D,A[10],4294925233,17),D=E(D,N,M,B,A[11],2304563134,22),B=E(B,D,N,M,A[12],1804603682,7),M=E(M,B,D,N,A[13],4254626195,12),N=E(N,M,B,D,A[14],2792965006,17),D=E(D,N,M,B,A[15],1236535329,22),B=C(B,D,N,M,A[1],4129170786,5),M=C(M,B,D,N,A[6],3225465664,9),N=C(N,M,B,D,A[11],643717713,14),D=C(D,N,M,B,A[0],3921069994,20),B=C(B,D,N,M,A[5],3593408605,5),M=C(M,B,D,N,A[10],38016083,9),N=C(N,M,B,D,A[15],3634488961,14),D=C(D,N,M,B,A[4],3889429448,20),B=C(B,D,N,M,A[9],568446438,5),M=C(M,B,D,N,A[14],3275163606,9),N=C(N,M,B,D,A[3],4107603335,14),D=C(D,N,M,B,A[8],1163531501,20),B=C(B,D,N,M,A[13],2850285829,5),M=C(M,B,D,N,A[2],4243563512,9),N=C(N,M,B,D,A[7],1735328473,14),D=C(D,N,M,B,A[12],2368359562,20),B=T(B,D,N,M,A[5],4294588738,4),M=T(M,B,D,N,A[8],2272392833,11),N=T(N,M,B,D,A[11],1839030562,16),D=T(D,N,M,B,A[14],4259657740,23),B=T(B,D,N,M,A[1],2763975236,4),M=T(M,B,D,N,A[4],1272893353,11),N=T(N,M,B,D,A[7],4139469664,16),D=T(D,N,M,B,A[10],3200236656,23),B=T(B,D,N,M,A[13],681279174,4),M=T(M,B,D,N,A[0],3936430074,11),N=T(N,M,B,D,A[3],3572445317,16),D=T(D,N,M,B,A[6],76029189,23),B=T(B,D,N,M,A[9],3654602809,4),M=T(M,B,D,N,A[12],3873151461,11),N=T(N,M,B,D,A[15],530742520,16),D=T(D,N,M,B,A[2],3299628645,23),B=R(B,D,N,M,A[0],4096336452,6),M=R(M,B,D,N,A[7],1126891415,10),N=R(N,M,B,D,A[14],2878612391,15),D=R(D,N,M,B,A[5],4237533241,21),B=R(B,D,N,M,A[12],1700485571,6),M=R(M,B,D,N,A[3],2399980690,10),N=R(N,M,B,D,A[10],4293915773,15),D=R(D,N,M,B,A[1],2240044497,21),B=R(B,D,N,M,A[8],1873313359,6),M=R(M,B,D,N,A[15],4264355552,10),N=R(N,M,B,D,A[6],2734768916,15),D=R(D,N,M,B,A[13],1309151649,21),B=R(B,D,N,M,A[4],4149444226,6),M=R(M,B,D,N,A[11],3174756917,10),N=R(N,M,B,D,A[2],718787259,15),D=R(D,N,M,B,A[9],3951481745,21),this._a=this._a+B|0,this._b=this._b+D|0,this._c=this._c+N|0,this._d=this._d+M|0},x.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var A=g.allocUnsafe(16);return A.writeInt32LE(this._a,0),A.writeInt32LE(this._b,4),A.writeInt32LE(this._c,8),A.writeInt32LE(this._d,12),A};function S(A,I){return A<<I|A>>>32-I}function E(A,I,B,D,N,M,O){return S(A+(I&B|~I&D)+N+M|0,O)+I|0}function C(A,I,B,D,N,M,O){return S(A+(I&D|B&~D)+N+M|0,O)+I|0}function T(A,I,B,D,N,M,O){return S(A+(I^B^D)+N+M|0,O)+I|0}function R(A,I,B,D,N,M,O){return S(A+(B^(I|~D))+N+M|0,O)+I|0}return md5_js=x,md5_js}var ripemd160,hasRequiredRipemd160;function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var n=requireDist().Buffer,r=requireInherits_browser(),g=requireHashBase(),_=new Array(16),x=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],S=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],E=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],C=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],T=[0,1518500249,1859775393,2400959708,2840853838],R=[1352829926,1548603684,1836072691,2053994217,0];function A(){g.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}r(A,g),A.prototype._update=function(){for(var L=_,F=0;F<16;++F)L[F]=this._block.readInt32LE(F*4);for(var U=this._a|0,j=this._b|0,z=this._c|0,W=this._d|0,X=this._e|0,ie=this._a|0,fe=this._b|0,xe=this._c|0,we=this._d|0,G=this._e|0,J=0;J<80;J+=1){var q,H;J<16?(q=B(U,j,z,W,X,L[x[J]],T[0],E[J]),H=O(ie,fe,xe,we,G,L[S[J]],R[0],C[J])):J<32?(q=D(U,j,z,W,X,L[x[J]],T[1],E[J]),H=M(ie,fe,xe,we,G,L[S[J]],R[1],C[J])):J<48?(q=N(U,j,z,W,X,L[x[J]],T[2],E[J]),H=N(ie,fe,xe,we,G,L[S[J]],R[2],C[J])):J<64?(q=M(U,j,z,W,X,L[x[J]],T[3],E[J]),H=D(ie,fe,xe,we,G,L[S[J]],R[3],C[J])):(q=O(U,j,z,W,X,L[x[J]],T[4],E[J]),H=B(ie,fe,xe,we,G,L[S[J]],R[4],C[J])),U=X,X=W,W=I(z,10),z=j,j=q,ie=G,G=we,we=I(xe,10),xe=fe,fe=H}var ve=this._b+z+we|0;this._b=this._c+W+G|0,this._c=this._d+X+ie|0,this._d=this._e+U+fe|0,this._e=this._a+j+xe|0,this._a=ve},A.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var L=n.alloc?n.alloc(20):new n(20);return L.writeInt32LE(this._a,0),L.writeInt32LE(this._b,4),L.writeInt32LE(this._c,8),L.writeInt32LE(this._d,12),L.writeInt32LE(this._e,16),L};function I(L,F){return L<<F|L>>>32-F}function B(L,F,U,j,z,W,X,ie){return I(L+(F^U^j)+W+X|0,ie)+z|0}function D(L,F,U,j,z,W,X,ie){return I(L+(F&U|~F&j)+W+X|0,ie)+z|0}function N(L,F,U,j,z,W,X,ie){return I(L+((F|~U)^j)+W+X|0,ie)+z|0}function M(L,F,U,j,z,W,X,ie){return I(L+(F&j|U&~j)+W+X|0,ie)+z|0}function O(L,F,U,j,z,W,X,ie){return I(L+(F^(U|~j))+W+X|0,ie)+z|0}return ripemd160=A,ripemd160}var sha_js={exports:{}},hash$1,hasRequiredHash$1;function requireHash$1(){if(hasRequiredHash$1)return hash$1;hasRequiredHash$1=1;var n=requireSafeBuffer$1().Buffer;function r(g,_){this._block=n.alloc(g),this._finalSize=_,this._blockSize=g,this._len=0}return r.prototype.update=function(g,_){typeof g=="string"&&(_=_||"utf8",g=n.from(g,_));for(var x=this._block,S=this._blockSize,E=g.length,C=this._len,T=0;T<E;){for(var R=C%S,A=Math.min(E-T,S-R),I=0;I<A;I++)x[R+I]=g[T+I];C+=A,T+=A,C%S===0&&this._update(x)}return this._len+=E,this},r.prototype.digest=function(g){var _=this._len%this._blockSize;this._block[_]=128,this._block.fill(0,_+1),_>=this._finalSize&&(this._update(this._block),this._block.fill(0));var x=this._len*8;if(x<=4294967295)this._block.writeUInt32BE(x,this._blockSize-4);else{var S=(x&4294967295)>>>0,E=(x-S)/4294967296;this._block.writeUInt32BE(E,this._blockSize-8),this._block.writeUInt32BE(S,this._blockSize-4)}this._update(this._block);var C=this._hash();return g?C.toString(g):C},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$1=r,hash$1}var sha$1,hasRequiredSha$1;function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var n=requireInherits_browser(),r=requireHash$1(),g=requireSafeBuffer$1().Buffer,_=[1518500249,1859775393,-1894007588,-899497514],x=new Array(80);function S(){this.init(),this._w=x,r.call(this,64,56)}n(S,r),S.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function E(R){return R<<5|R>>>27}function C(R){return R<<30|R>>>2}function T(R,A,I,B){return R===0?A&I|~A&B:R===2?A&I|A&B|I&B:A^I^B}return S.prototype._update=function(R){for(var A=this._w,I=this._a|0,B=this._b|0,D=this._c|0,N=this._d|0,M=this._e|0,O=0;O<16;++O)A[O]=R.readInt32BE(O*4);for(;O<80;++O)A[O]=A[O-3]^A[O-8]^A[O-14]^A[O-16];for(var L=0;L<80;++L){var F=~~(L/20),U=E(I)+T(F,B,D,N)+M+A[L]+_[F]|0;M=N,N=D,D=C(B),B=I,I=U}this._a=I+this._a|0,this._b=B+this._b|0,this._c=D+this._c|0,this._d=N+this._d|0,this._e=M+this._e|0},S.prototype._hash=function(){var R=g.allocUnsafe(20);return R.writeInt32BE(this._a|0,0),R.writeInt32BE(this._b|0,4),R.writeInt32BE(this._c|0,8),R.writeInt32BE(this._d|0,12),R.writeInt32BE(this._e|0,16),R},sha$1=S,sha$1}var sha1$1,hasRequiredSha1;function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var n=requireInherits_browser(),r=requireHash$1(),g=requireSafeBuffer$1().Buffer,_=[1518500249,1859775393,-1894007588,-899497514],x=new Array(80);function S(){this.init(),this._w=x,r.call(this,64,56)}n(S,r),S.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function E(A){return A<<1|A>>>31}function C(A){return A<<5|A>>>27}function T(A){return A<<30|A>>>2}function R(A,I,B,D){return A===0?I&B|~I&D:A===2?I&B|I&D|B&D:I^B^D}return S.prototype._update=function(A){for(var I=this._w,B=this._a|0,D=this._b|0,N=this._c|0,M=this._d|0,O=this._e|0,L=0;L<16;++L)I[L]=A.readInt32BE(L*4);for(;L<80;++L)I[L]=E(I[L-3]^I[L-8]^I[L-14]^I[L-16]);for(var F=0;F<80;++F){var U=~~(F/20),j=C(B)+R(U,D,N,M)+O+I[F]+_[U]|0;O=M,M=N,N=T(D),D=B,B=j}this._a=B+this._a|0,this._b=D+this._b|0,this._c=N+this._c|0,this._d=M+this._d|0,this._e=O+this._e|0},S.prototype._hash=function(){var A=g.allocUnsafe(20);return A.writeInt32BE(this._a|0,0),A.writeInt32BE(this._b|0,4),A.writeInt32BE(this._c|0,8),A.writeInt32BE(this._d|0,12),A.writeInt32BE(this._e|0,16),A},sha1$1=S,sha1$1}var sha256$4,hasRequiredSha256$1;function requireSha256$1(){if(hasRequiredSha256$1)return sha256$4;hasRequiredSha256$1=1;var n=requireInherits_browser(),r=requireHash$1(),g=requireSafeBuffer$1().Buffer,_=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],x=new Array(64);function S(){this.init(),this._w=x,r.call(this,64,56)}n(S,r),S.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function E(B,D,N){return N^B&(D^N)}function C(B,D,N){return B&D|N&(B|D)}function T(B){return(B>>>2|B<<30)^(B>>>13|B<<19)^(B>>>22|B<<10)}function R(B){return(B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7)}function A(B){return(B>>>7|B<<25)^(B>>>18|B<<14)^B>>>3}function I(B){return(B>>>17|B<<15)^(B>>>19|B<<13)^B>>>10}return S.prototype._update=function(B){for(var D=this._w,N=this._a|0,M=this._b|0,O=this._c|0,L=this._d|0,F=this._e|0,U=this._f|0,j=this._g|0,z=this._h|0,W=0;W<16;++W)D[W]=B.readInt32BE(W*4);for(;W<64;++W)D[W]=I(D[W-2])+D[W-7]+A(D[W-15])+D[W-16]|0;for(var X=0;X<64;++X){var ie=z+R(F)+E(F,U,j)+_[X]+D[X]|0,fe=T(N)+C(N,M,O)|0;z=j,j=U,U=F,F=L+ie|0,L=O,O=M,M=N,N=ie+fe|0}this._a=N+this._a|0,this._b=M+this._b|0,this._c=O+this._c|0,this._d=L+this._d|0,this._e=F+this._e|0,this._f=U+this._f|0,this._g=j+this._g|0,this._h=z+this._h|0},S.prototype._hash=function(){var B=g.allocUnsafe(32);return B.writeInt32BE(this._a,0),B.writeInt32BE(this._b,4),B.writeInt32BE(this._c,8),B.writeInt32BE(this._d,12),B.writeInt32BE(this._e,16),B.writeInt32BE(this._f,20),B.writeInt32BE(this._g,24),B.writeInt32BE(this._h,28),B},sha256$4=S,sha256$4}var sha224$1,hasRequiredSha224;function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var n=requireInherits_browser(),r=requireSha256$1(),g=requireHash$1(),_=requireSafeBuffer$1().Buffer,x=new Array(64);function S(){this.init(),this._w=x,g.call(this,64,56)}return n(S,r),S.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},S.prototype._hash=function(){var E=_.allocUnsafe(28);return E.writeInt32BE(this._a,0),E.writeInt32BE(this._b,4),E.writeInt32BE(this._c,8),E.writeInt32BE(this._d,12),E.writeInt32BE(this._e,16),E.writeInt32BE(this._f,20),E.writeInt32BE(this._g,24),E},sha224$1=S,sha224$1}var sha512$2,hasRequiredSha512;function requireSha512(){if(hasRequiredSha512)return sha512$2;hasRequiredSha512=1;var n=requireInherits_browser(),r=requireHash$1(),g=requireSafeBuffer$1().Buffer,_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],x=new Array(160);function S(){this.init(),this._w=x,r.call(this,128,112)}n(S,r),S.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function E(M,O,L){return L^M&(O^L)}function C(M,O,L){return M&O|L&(M|O)}function T(M,O){return(M>>>28|O<<4)^(O>>>2|M<<30)^(O>>>7|M<<25)}function R(M,O){return(M>>>14|O<<18)^(M>>>18|O<<14)^(O>>>9|M<<23)}function A(M,O){return(M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7}function I(M,O){return(M>>>1|O<<31)^(M>>>8|O<<24)^(M>>>7|O<<25)}function B(M,O){return(M>>>19|O<<13)^(O>>>29|M<<3)^M>>>6}function D(M,O){return(M>>>19|O<<13)^(O>>>29|M<<3)^(M>>>6|O<<26)}function N(M,O){return M>>>0<O>>>0?1:0}return S.prototype._update=function(M){for(var O=this._w,L=this._ah|0,F=this._bh|0,U=this._ch|0,j=this._dh|0,z=this._eh|0,W=this._fh|0,X=this._gh|0,ie=this._hh|0,fe=this._al|0,xe=this._bl|0,we=this._cl|0,G=this._dl|0,J=this._el|0,q=this._fl|0,H=this._gl|0,ve=this._hl|0,Z=0;Z<32;Z+=2)O[Z]=M.readInt32BE(Z*4),O[Z+1]=M.readInt32BE(Z*4+4);for(;Z<160;Z+=2){var ce=O[Z-30],ue=O[Z-15*2+1],se=A(ce,ue),te=I(ue,ce);ce=O[Z-2*2],ue=O[Z-2*2+1];var Y=B(ce,ue),be=D(ue,ce),ye=O[Z-7*2],Ie=O[Z-7*2+1],ke=O[Z-16*2],Ce=O[Z-16*2+1],Ae=te+Ie|0,Ne=se+ye+N(Ae,te)|0;Ae=Ae+be|0,Ne=Ne+Y+N(Ae,be)|0,Ae=Ae+Ce|0,Ne=Ne+ke+N(Ae,Ce)|0,O[Z]=Ne,O[Z+1]=Ae}for(var We=0;We<160;We+=2){Ne=O[We],Ae=O[We+1];var Be=C(L,F,U),Se=C(fe,xe,we),$e=T(L,fe),_e=T(fe,L),Oe=R(z,J),Ke=R(J,z),Me=_[We],Le=_[We+1],ze=E(z,W,X),Je=E(J,q,H),Qe=ve+Ke|0,rt=ie+Oe+N(Qe,ve)|0;Qe=Qe+Je|0,rt=rt+ze+N(Qe,Je)|0,Qe=Qe+Le|0,rt=rt+Me+N(Qe,Le)|0,Qe=Qe+Ae|0,rt=rt+Ne+N(Qe,Ae)|0;var wt=_e+Se|0,bt=$e+Be+N(wt,_e)|0;ie=X,ve=H,X=W,H=q,W=z,q=J,J=G+Qe|0,z=j+rt+N(J,G)|0,j=U,G=we,U=F,we=xe,F=L,xe=fe,fe=Qe+wt|0,L=rt+bt+N(fe,Qe)|0}this._al=this._al+fe|0,this._bl=this._bl+xe|0,this._cl=this._cl+we|0,this._dl=this._dl+G|0,this._el=this._el+J|0,this._fl=this._fl+q|0,this._gl=this._gl+H|0,this._hl=this._hl+ve|0,this._ah=this._ah+L+N(this._al,fe)|0,this._bh=this._bh+F+N(this._bl,xe)|0,this._ch=this._ch+U+N(this._cl,we)|0,this._dh=this._dh+j+N(this._dl,G)|0,this._eh=this._eh+z+N(this._el,J)|0,this._fh=this._fh+W+N(this._fl,q)|0,this._gh=this._gh+X+N(this._gl,H)|0,this._hh=this._hh+ie+N(this._hl,ve)|0},S.prototype._hash=function(){var M=g.allocUnsafe(64);function O(L,F,U){M.writeInt32BE(L,U),M.writeInt32BE(F,U+4)}return O(this._ah,this._al,0),O(this._bh,this._bl,8),O(this._ch,this._cl,16),O(this._dh,this._dl,24),O(this._eh,this._el,32),O(this._fh,this._fl,40),O(this._gh,this._gl,48),O(this._hh,this._hl,56),M},sha512$2=S,sha512$2}var sha384$1,hasRequiredSha384;function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var n=requireInherits_browser(),r=requireSha512(),g=requireHash$1(),_=requireSafeBuffer$1().Buffer,x=new Array(160);function S(){this.init(),this._w=x,g.call(this,128,112)}return n(S,r),S.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},S.prototype._hash=function(){var E=_.allocUnsafe(48);function C(T,R,A){E.writeInt32BE(T,A),E.writeInt32BE(R,A+4)}return C(this._ah,this._al,0),C(this._bh,this._bl,8),C(this._ch,this._cl,16),C(this._dh,this._dl,24),C(this._eh,this._el,32),C(this._fh,this._fl,40),E},sha384$1=S,sha384$1}var hasRequiredSha_js;function requireSha_js(){if(hasRequiredSha_js)return sha_js.exports;hasRequiredSha_js=1;var n=sha_js.exports=function(g){g=g.toLowerCase();var _=n[g];if(!_)throw new Error(g+" is not supported (we accept pull requests)");return new _};return n.sha=requireSha$1(),n.sha1=requireSha1(),n.sha224=requireSha224(),n.sha256=requireSha256$1(),n.sha384=requireSha384(),n.sha512=requireSha512(),sha_js.exports}var cipherBase,hasRequiredCipherBase;function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var n=requireSafeBuffer$1().Buffer,r=requireStreamBrowserify().Transform,g=requireString_decoder().StringDecoder,_=requireInherits_browser();function x(C){r.call(this),this.hashMode=typeof C=="string",this.hashMode?this[C]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}_(x,r);var S=typeof Uint8Array<"u",E=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&ArrayBuffer.isView&&(n.prototype instanceof Uint8Array||n.TYPED_ARRAY_SUPPORT);return x.prototype.update=function(C,T,R){var A;if(C instanceof n)A=C;else if(typeof C=="string")A=n.from(C,T);else if(E&&ArrayBuffer.isView(C))A=n.from(C.buffer,C.byteOffset,C.byteLength);else if(S&&C instanceof Uint8Array)A=n.from(C);else if(n.isBuffer(C)&&C.constructor&&C.constructor.isBuffer&&C.constructor.isBuffer(C))A=n.from(C);else throw new Error('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.');var I=this._update(A);return this.hashMode?this:(R&&(I=this._toString(I,R)),I)},x.prototype.setAutoPadding=function(){},x.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},x.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},x.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},x.prototype._transform=function(C,T,R){var A;try{this.hashMode?this._update(C):this.push(this._update(C))}catch(I){A=I}finally{R(A)}},x.prototype._flush=function(C){var T;try{this.push(this.__final())}catch(R){T=R}C(T)},x.prototype._finalOrDigest=function(C){var T=this.__final()||n.alloc(0);return C&&(T=this._toString(T,C,!0)),T},x.prototype._toString=function(C,T,R){if(this._decoder||(this._decoder=new g(T),this._encoding=T),this._encoding!==T)throw new Error("can’t switch encodings");var A=this._decoder.write(C);return R&&(A+=this._decoder.end()),A},cipherBase=x,cipherBase}var browser$c,hasRequiredBrowser$b;function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$c;hasRequiredBrowser$b=1;var n=requireInherits_browser(),r=requireMd5_js(),g=requireRipemd160(),_=requireSha_js(),x=requireCipherBase();function S(E){x.call(this,"digest"),this._hash=E}return n(S,x),S.prototype._update=function(E){this._hash.update(E)},S.prototype._final=function(){return this._hash.digest()},browser$c=function(C){return C=C.toLowerCase(),C==="md5"?new r:C==="rmd160"||C==="ripemd160"?new g:new S(_(C))},browser$c}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;var n=requireInherits_browser(),r=requireSafeBuffer$1().Buffer,g=requireCipherBase(),_=r.alloc(128),x=64;function S(E,C){g.call(this,"digest"),typeof C=="string"&&(C=r.from(C)),this._alg=E,this._key=C,C.length>x?C=E(C):C.length<x&&(C=r.concat([C,_],x));for(var T=this._ipad=r.allocUnsafe(x),R=this._opad=r.allocUnsafe(x),A=0;A<x;A++)T[A]=C[A]^54,R[A]=C[A]^92;this._hash=[T]}return n(S,g),S.prototype._update=function(E){this._hash.push(E)},S.prototype._final=function(){var E=this._alg(r.concat(this._hash));return this._alg(r.concat([this._opad,E]))},legacy=S,legacy}var md5$3,hasRequiredMd5$1;function requireMd5$1(){if(hasRequiredMd5$1)return md5$3;hasRequiredMd5$1=1;var n=requireMd5_js();return md5$3=function(r){return new n().update(r).digest()},md5$3}var browser$b,hasRequiredBrowser$a;function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$b;hasRequiredBrowser$a=1;var n=requireInherits_browser(),r=requireLegacy(),g=requireCipherBase(),_=requireSafeBuffer$1().Buffer,x=requireMd5$1(),S=requireRipemd160(),E=requireSha_js(),C=_.alloc(128);function T(R,A){g.call(this,"digest"),typeof A=="string"&&(A=_.from(A));var I=R==="sha512"||R==="sha384"?128:64;if(this._alg=R,this._key=A,A.length>I){var B=R==="rmd160"?new S:E(R);A=B.update(A).digest()}else A.length<I&&(A=_.concat([A,C],I));for(var D=this._ipad=_.allocUnsafe(I),N=this._opad=_.allocUnsafe(I),M=0;M<I;M++)D[M]=A[M]^54,N[M]=A[M]^92;this._hash=R==="rmd160"?new S:E(R),this._hash.update(D)}return n(T,g),T.prototype._update=function(R){this._hash.update(R)},T.prototype._final=function(){var R=this._hash.digest(),A=this._alg==="rmd160"?new S:E(this._alg);return A.update(this._opad).update(R).digest()},browser$b=function(A,I){return A=A.toLowerCase(),A==="rmd160"||A==="ripemd160"?new T("rmd160",I):A==="md5"?new r(x,I):new T(A,I)},browser$b}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$3={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512$1={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$3,sha224,sha384,sha512:sha512$1,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos||(hasRequiredAlgos=1,algos=require$$6),algos}var browser$a={},precondition,hasRequiredPrecondition;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var n=Math.pow(2,30)-1;return precondition=function(r,g){if(typeof r!="number")throw new TypeError("Iterations not a number");if(r<0)throw new TypeError("Bad iterations");if(typeof g!="number")throw new TypeError("Key length not a number");if(g<0||g>n||g!==g)throw new TypeError("Bad key length")},precondition}var defaultEncoding_1,hasRequiredDefaultEncoding;function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;hasRequiredDefaultEncoding=1;var n;if(commonjsGlobal.process&&commonjsGlobal.process.browser)n="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var r=parseInt(process$1.version.split(".")[0].slice(1),10);n=r>=6?"utf-8":"binary"}else n="utf-8";return defaultEncoding_1=n,defaultEncoding_1}var toBuffer$1,hasRequiredToBuffer;function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer$1;hasRequiredToBuffer=1;var n=requireSafeBuffer$1().Buffer;return toBuffer$1=function(r,g,_){if(n.isBuffer(r))return r;if(typeof r=="string")return n.from(r,g);if(ArrayBuffer.isView(r))return n.from(r.buffer);throw new TypeError(_+" must be a string, a Buffer, a typed array or a DataView")},toBuffer$1}var syncBrowser,hasRequiredSyncBrowser;function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var n=requireMd5$1(),r=requireRipemd160(),g=requireSha_js(),_=requireSafeBuffer$1().Buffer,x=requirePrecondition(),S=requireDefaultEncoding(),E=requireToBuffer(),C=_.alloc(128),T={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function R(B,D,N){var M=A(B),O=B==="sha512"||B==="sha384"?128:64;D.length>O?D=M(D):D.length<O&&(D=_.concat([D,C],O));for(var L=_.allocUnsafe(O+T[B]),F=_.allocUnsafe(O+T[B]),U=0;U<O;U++)L[U]=D[U]^54,F[U]=D[U]^92;var j=_.allocUnsafe(O+N+4);L.copy(j,0,0,O),this.ipad1=j,this.ipad2=L,this.opad=F,this.alg=B,this.blocksize=O,this.hash=M,this.size=T[B]}R.prototype.run=function(B,D){B.copy(D,this.blocksize);var N=this.hash(D);return N.copy(this.opad,this.blocksize),this.hash(this.opad)};function A(B){function D(M){return g(B).update(M).digest()}function N(M){return new r().update(M).digest()}return B==="rmd160"||B==="ripemd160"?N:B==="md5"?n:D}function I(B,D,N,M,O){x(N,M),B=E(B,S,"Password"),D=E(D,S,"Salt"),O=O||"sha1";var L=new R(O,B,D.length),F=_.allocUnsafe(M),U=_.allocUnsafe(D.length+4);D.copy(U,0,0,D.length);for(var j=0,z=T[O],W=Math.ceil(M/z),X=1;X<=W;X++){U.writeUInt32BE(X,D.length);for(var ie=L.run(U,L.ipad1),fe=ie,xe=1;xe<N;xe++){fe=L.run(fe,L.ipad2);for(var we=0;we<z;we++)ie[we]^=fe[we]}ie.copy(F,j),j+=z}return F}return syncBrowser=I,syncBrowser}var async,hasRequiredAsync;function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var n=requireSafeBuffer$1().Buffer,r=requirePrecondition(),g=requireDefaultEncoding(),_=requireSyncBrowser(),x=requireToBuffer(),S,E=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,C={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},T=[];function R(N){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!E||!E.importKey||!E.deriveBits)return Promise.resolve(!1);if(T[N]!==void 0)return T[N];S=S||n.alloc(8);var M=B(S,S,10,128,N).then(function(){return!0}).catch(function(){return!1});return T[N]=M,M}var A;function I(){return A||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?A=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?A=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?A=commonjsGlobal.setImmediate:A=commonjsGlobal.setTimeout,A)}function B(N,M,O,L,F){return E.importKey("raw",N,{name:"PBKDF2"},!1,["deriveBits"]).then(function(U){return E.deriveBits({name:"PBKDF2",salt:M,iterations:O,hash:{name:F}},U,L<<3)}).then(function(U){return n.from(U)})}function D(N,M){N.then(function(O){I()(function(){M(null,O)})},function(O){I()(function(){M(O)})})}return async=function(N,M,O,L,F,U){typeof F=="function"&&(U=F,F=void 0),F=F||"sha1";var j=C[F.toLowerCase()];if(!j||typeof commonjsGlobal.Promise!="function"){I()(function(){var z;try{z=_(N,M,O,L,F)}catch(W){return U(W)}U(null,z)});return}if(r(O,L),N=x(N,g,"Password"),M=x(M,g,"Salt"),typeof U!="function")throw new Error("No callback provided to pbkdf2");D(R(j).then(function(z){return z?B(N,M,O,L,j):_(N,M,O,L,F)}),U)},async}var hasRequiredBrowser$9;function requireBrowser$9(){return hasRequiredBrowser$9||(hasRequiredBrowser$9=1,browser$a.pbkdf2=requireAsync(),browser$a.pbkdf2Sync=requireSyncBrowser()),browser$a}var browser$9={},des$1={},utils$4={},hasRequiredUtils$4;function requireUtils$4(){if(hasRequiredUtils$4)return utils$4;hasRequiredUtils$4=1,utils$4.readUInt32BE=function(x,S){var E=x[0+S]<<24|x[1+S]<<16|x[2+S]<<8|x[3+S];return E>>>0},utils$4.writeUInt32BE=function(x,S,E){x[0+E]=S>>>24,x[1+E]=S>>>16&255,x[2+E]=S>>>8&255,x[3+E]=S&255},utils$4.ip=function(x,S,E,C){for(var T=0,R=0,A=6;A>=0;A-=2){for(var I=0;I<=24;I+=8)T<<=1,T|=S>>>I+A&1;for(var I=0;I<=24;I+=8)T<<=1,T|=x>>>I+A&1}for(var A=6;A>=0;A-=2){for(var I=1;I<=25;I+=8)R<<=1,R|=S>>>I+A&1;for(var I=1;I<=25;I+=8)R<<=1,R|=x>>>I+A&1}E[C+0]=T>>>0,E[C+1]=R>>>0},utils$4.rip=function(x,S,E,C){for(var T=0,R=0,A=0;A<4;A++)for(var I=24;I>=0;I-=8)T<<=1,T|=S>>>I+A&1,T<<=1,T|=x>>>I+A&1;for(var A=4;A<8;A++)for(var I=24;I>=0;I-=8)R<<=1,R|=S>>>I+A&1,R<<=1,R|=x>>>I+A&1;E[C+0]=T>>>0,E[C+1]=R>>>0},utils$4.pc1=function(x,S,E,C){for(var T=0,R=0,A=7;A>=5;A--){for(var I=0;I<=24;I+=8)T<<=1,T|=S>>I+A&1;for(var I=0;I<=24;I+=8)T<<=1,T|=x>>I+A&1}for(var I=0;I<=24;I+=8)T<<=1,T|=S>>I+A&1;for(var A=1;A<=3;A++){for(var I=0;I<=24;I+=8)R<<=1,R|=S>>I+A&1;for(var I=0;I<=24;I+=8)R<<=1,R|=x>>I+A&1}for(var I=0;I<=24;I+=8)R<<=1,R|=x>>I+A&1;E[C+0]=T>>>0,E[C+1]=R>>>0},utils$4.r28shl=function(x,S){return x<<S&268435455|x>>>28-S};var n=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$4.pc2=function(x,S,E,C){for(var T=0,R=0,A=n.length>>>1,I=0;I<A;I++)T<<=1,T|=x>>>n[I]&1;for(var I=A;I<n.length;I++)R<<=1,R|=S>>>n[I]&1;E[C+0]=T>>>0,E[C+1]=R>>>0},utils$4.expand=function(x,S,E){var C=0,T=0;C=(x&1)<<5|x>>>27;for(var R=23;R>=15;R-=4)C<<=6,C|=x>>>R&63;for(var R=11;R>=3;R-=4)T|=x>>>R&63,T<<=6;T|=(x&31)<<1|x>>>31,S[E+0]=C>>>0,S[E+1]=T>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$4.substitute=function(x,S){for(var E=0,C=0;C<4;C++){var T=x>>>18-C*6&63,R=r[C*64+T];E<<=4,E|=R}for(var C=0;C<4;C++){var T=S>>>18-C*6&63,R=r[4*64+C*64+T];E<<=4,E|=R}return E>>>0};var g=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$4.permute=function(x){for(var S=0,E=0;E<g.length;E++)S<<=1,S|=x>>>g[E]&1;return S>>>0},utils$4.padSplit=function(x,S,E){for(var C=x.toString(2);C.length<S;)C="0"+C;for(var T=[],R=0;R<S;R+=E)T.push(C.slice(R,R+E));return T.join(" ")},utils$4}var minimalisticAssert,hasRequiredMinimalisticAssert;function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;hasRequiredMinimalisticAssert=1,minimalisticAssert=n;function n(r,g){if(!r)throw new Error(g||"Assertion failed")}return n.equal=function(g,_,x){if(g!=_)throw new Error(x||"Assertion failed: "+g+" != "+_)},minimalisticAssert}var cipher,hasRequiredCipher;function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var n=requireMinimalisticAssert();function r(g){this.options=g,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=g.padding!==!1}return cipher=r,r.prototype._init=function(){},r.prototype.update=function(_){return _.length===0?[]:this.type==="decrypt"?this._updateDecrypt(_):this._updateEncrypt(_)},r.prototype._buffer=function(_,x){for(var S=Math.min(this.buffer.length-this.bufferOff,_.length-x),E=0;E<S;E++)this.buffer[this.bufferOff+E]=_[x+E];return this.bufferOff+=S,S},r.prototype._flushBuffer=function(_,x){return this._update(this.buffer,0,_,x),this.bufferOff=0,this.blockSize},r.prototype._updateEncrypt=function(_){var x=0,S=0,E=(this.bufferOff+_.length)/this.blockSize|0,C=new Array(E*this.blockSize);this.bufferOff!==0&&(x+=this._buffer(_,x),this.bufferOff===this.buffer.length&&(S+=this._flushBuffer(C,S)));for(var T=_.length-(_.length-x)%this.blockSize;x<T;x+=this.blockSize)this._update(_,x,C,S),S+=this.blockSize;for(;x<_.length;x++,this.bufferOff++)this.buffer[this.bufferOff]=_[x];return C},r.prototype._updateDecrypt=function(_){for(var x=0,S=0,E=Math.ceil((this.bufferOff+_.length)/this.blockSize)-1,C=new Array(E*this.blockSize);E>0;E--)x+=this._buffer(_,x),S+=this._flushBuffer(C,S);return x+=this._buffer(_,x),C},r.prototype.final=function(_){var x;_&&(x=this.update(_));var S;return this.type==="encrypt"?S=this._finalEncrypt():S=this._finalDecrypt(),x?x.concat(S):S},r.prototype._pad=function(_,x){if(x===0)return!1;for(;x<_.length;)_[x++]=0;return!0},r.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var _=new Array(this.blockSize);return this._update(this.buffer,0,_,0),_},r.prototype._unpad=function(_){return _},r.prototype._finalDecrypt=function(){n.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var _=new Array(this.blockSize);return this._flushBuffer(_,0),this._unpad(_)},cipher}var des,hasRequiredDes$1;function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var n=requireMinimalisticAssert(),r=requireInherits_browser(),g=requireUtils$4(),_=requireCipher();function x(){this.tmp=new Array(2),this.keys=null}function S(C){_.call(this,C);var T=new x;this._desState=T,this.deriveKeys(T,C.key)}r(S,_),des=S,S.create=function(T){return new S(T)};var E=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return S.prototype.deriveKeys=function(T,R){T.keys=new Array(16*2),n.equal(R.length,this.blockSize,"Invalid key length");var A=g.readUInt32BE(R,0),I=g.readUInt32BE(R,4);g.pc1(A,I,T.tmp,0),A=T.tmp[0],I=T.tmp[1];for(var B=0;B<T.keys.length;B+=2){var D=E[B>>>1];A=g.r28shl(A,D),I=g.r28shl(I,D),g.pc2(A,I,T.keys,B)}},S.prototype._update=function(T,R,A,I){var B=this._desState,D=g.readUInt32BE(T,R),N=g.readUInt32BE(T,R+4);g.ip(D,N,B.tmp,0),D=B.tmp[0],N=B.tmp[1],this.type==="encrypt"?this._encrypt(B,D,N,B.tmp,0):this._decrypt(B,D,N,B.tmp,0),D=B.tmp[0],N=B.tmp[1],g.writeUInt32BE(A,D,I),g.writeUInt32BE(A,N,I+4)},S.prototype._pad=function(T,R){if(this.padding===!1)return!1;for(var A=T.length-R,I=R;I<T.length;I++)T[I]=A;return!0},S.prototype._unpad=function(T){if(this.padding===!1)return T;for(var R=T[T.length-1],A=T.length-R;A<T.length;A++)n.equal(T[A],R);return T.slice(0,T.length-R)},S.prototype._encrypt=function(T,R,A,I,B){for(var D=R,N=A,M=0;M<T.keys.length;M+=2){var O=T.keys[M],L=T.keys[M+1];g.expand(N,T.tmp,0),O^=T.tmp[0],L^=T.tmp[1];var F=g.substitute(O,L),U=g.permute(F),j=N;N=(D^U)>>>0,D=j}g.rip(N,D,I,B)},S.prototype._decrypt=function(T,R,A,I,B){for(var D=A,N=R,M=T.keys.length-2;M>=0;M-=2){var O=T.keys[M],L=T.keys[M+1];g.expand(D,T.tmp,0),O^=T.tmp[0],L^=T.tmp[1];var F=g.substitute(O,L),U=g.permute(F),j=D;D=(N^U)>>>0,N=j}g.rip(D,N,I,B)},des}var cbc$1={},hasRequiredCbc$1;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var n=requireMinimalisticAssert(),r=requireInherits_browser(),g={};function _(S){n.equal(S.length,8,"Invalid IV length"),this.iv=new Array(8);for(var E=0;E<this.iv.length;E++)this.iv[E]=S[E]}function x(S){function E(A){S.call(this,A),this._cbcInit()}r(E,S);for(var C=Object.keys(g),T=0;T<C.length;T++){var R=C[T];E.prototype[R]=g[R]}return E.create=function(I){return new E(I)},E}return cbc$1.instantiate=x,g._cbcInit=function(){var E=new _(this.options.iv);this._cbcState=E},g._update=function(E,C,T,R){var A=this._cbcState,I=this.constructor.super_.prototype,B=A.iv;if(this.type==="encrypt"){for(var D=0;D<this.blockSize;D++)B[D]^=E[C+D];I._update.call(this,B,0,T,R);for(var D=0;D<this.blockSize;D++)B[D]=T[R+D]}else{I._update.call(this,E,C,T,R);for(var D=0;D<this.blockSize;D++)T[R+D]^=B[D];for(var D=0;D<this.blockSize;D++)B[D]=E[C+D]}},cbc$1}var ede,hasRequiredEde;function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var n=requireMinimalisticAssert(),r=requireInherits_browser(),g=requireCipher(),_=requireDes$1();function x(E,C){n.equal(C.length,24,"Invalid key length");var T=C.slice(0,8),R=C.slice(8,16),A=C.slice(16,24);E==="encrypt"?this.ciphers=[_.create({type:"encrypt",key:T}),_.create({type:"decrypt",key:R}),_.create({type:"encrypt",key:A})]:this.ciphers=[_.create({type:"decrypt",key:A}),_.create({type:"encrypt",key:R}),_.create({type:"decrypt",key:T})]}function S(E){g.call(this,E);var C=new x(this.type,this.options.key);this._edeState=C}return r(S,g),ede=S,S.create=function(C){return new S(C)},S.prototype._update=function(C,T,R,A){var I=this._edeState;I.ciphers[0]._update(C,T,R,A),I.ciphers[1]._update(R,A,R,A),I.ciphers[2]._update(R,A,R,A)},S.prototype._pad=_.prototype._pad,S.prototype._unpad=_.prototype._unpad,ede}var hasRequiredDes;function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$4(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}var browserifyDes,hasRequiredBrowserifyDes;function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var n=requireCipherBase(),r=requireDes(),g=requireInherits_browser(),_=requireSafeBuffer$1().Buffer,x={"des-ede3-cbc":r.CBC.instantiate(r.EDE),"des-ede3":r.EDE,"des-ede-cbc":r.CBC.instantiate(r.EDE),"des-ede":r.EDE,"des-cbc":r.CBC.instantiate(r.DES),"des-ecb":r.DES};x.des=x["des-cbc"],x.des3=x["des-ede3-cbc"],browserifyDes=S,g(S,n);function S(E){n.call(this);var C=E.mode.toLowerCase(),T=x[C],R;E.decrypt?R="decrypt":R="encrypt";var A=E.key;_.isBuffer(A)||(A=_.from(A)),(C==="des-ede"||C==="des-ede-cbc")&&(A=_.concat([A,A.slice(0,8)]));var I=E.iv;_.isBuffer(I)||(I=_.from(I)),this._des=T.create({key:A,iv:I,type:R})}return S.prototype._update=function(E){return _.from(this._des.update(E))},S.prototype._final=function(){return _.from(this._des.final())},browserifyDes}var browser$8={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(n,r){return n._cipher.encryptBlock(r)},ecb.decrypt=function(n,r){return n._cipher.decryptBlock(r)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor;function requireBufferXor(){return hasRequiredBufferXor||(hasRequiredBufferXor=1,bufferXor=function(r,g){for(var _=Math.min(r.length,g.length),x=new Buffer$1(_),S=0;S<_;++S)x[S]=r[S]^g[S];return x}),bufferXor}var hasRequiredCbc;function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var n=requireBufferXor();return cbc.encrypt=function(r,g){var _=n(g,r._prev);return r._prev=r._cipher.encryptBlock(_),r._prev},cbc.decrypt=function(r,g){var _=r._prev;r._prev=g;var x=r._cipher.decryptBlock(g);return n(x,_)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var n=requireSafeBuffer$1().Buffer,r=requireBufferXor();function g(_,x,S){var E=x.length,C=r(x,_._cache);return _._cache=_._cache.slice(E),_._prev=n.concat([_._prev,S?x:C]),C}return cfb.encrypt=function(_,x,S){for(var E=n.allocUnsafe(0),C;x.length;)if(_._cache.length===0&&(_._cache=_._cipher.encryptBlock(_._prev),_._prev=n.allocUnsafe(0)),_._cache.length<=x.length)C=_._cache.length,E=n.concat([E,g(_,x.slice(0,C),S)]),x=x.slice(C);else{E=n.concat([E,g(_,x,S)]);break}return E},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var n=requireSafeBuffer$1().Buffer;function r(g,_,x){var S=g._cipher.encryptBlock(g._prev),E=S[0]^_;return g._prev=n.concat([g._prev.slice(1),n.from([x?_:E])]),E}return cfb8.encrypt=function(g,_,x){for(var S=_.length,E=n.allocUnsafe(S),C=-1;++C<S;)E[C]=r(g,_[C],x);return E},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var n=requireSafeBuffer$1().Buffer;function r(_,x,S){for(var E,C=-1,T=8,R=0,A,I;++C<T;)E=_._cipher.encryptBlock(_._prev),A=x&1<<7-C?128:0,I=E[0]^A,R+=(I&128)>>C%8,_._prev=g(_._prev,S?A:I);return R}function g(_,x){var S=_.length,E=-1,C=n.allocUnsafe(_.length);for(_=n.concat([_,n.from([x])]);++E<S;)C[E]=_[E]<<1|_[E+1]>>7;return C}return cfb1.encrypt=function(_,x,S){for(var E=x.length,C=n.allocUnsafe(E),T=-1;++T<E;)C[T]=r(_,x[T],S);return C},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var n=requireBufferXor();function r(g){return g._prev=g._cipher.encryptBlock(g._prev),g._prev}return ofb.encrypt=function(g,_){for(;g._cache.length<_.length;)g._cache=Buffer$1.concat([g._cache,r(g)]);var x=g._cache.slice(0,_.length);return g._cache=g._cache.slice(_.length),n(_,x)},ofb}var ctr={},incr32_1,hasRequiredIncr32;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;hasRequiredIncr32=1;function n(r){for(var g=r.length,_;g--;)if(_=r.readUInt8(g),_===255)r.writeUInt8(0,g);else{_++,r.writeUInt8(_,g);break}}return incr32_1=n,incr32_1}var hasRequiredCtr;function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var n=requireBufferXor(),r=requireSafeBuffer$1().Buffer,g=requireIncr32();function _(S){var E=S._cipher.encryptBlockRaw(S._prev);return g(S._prev),E}var x=16;return ctr.encrypt=function(S,E){var C=Math.ceil(E.length/x),T=S._cache.length;S._cache=r.concat([S._cache,r.allocUnsafe(C*x)]);for(var R=0;R<C;R++){var A=_(S),I=T+R*x;S._cache.writeUInt32BE(A[0],I+0),S._cache.writeUInt32BE(A[1],I+4),S._cache.writeUInt32BE(A[2],I+8),S._cache.writeUInt32BE(A[3],I+12)}var B=S._cache.slice(0,E.length);return S._cache=S._cache.slice(E.length),n(E,B)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var n={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},r=require$$2;for(var g in r)r[g].module=n[r[g].mode];return modes_1=r,modes_1}var aes={},hasRequiredAes;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var n=requireSafeBuffer$1().Buffer;function r(C){n.isBuffer(C)||(C=n.from(C));for(var T=C.length/4|0,R=new Array(T),A=0;A<T;A++)R[A]=C.readUInt32BE(A*4);return R}function g(C){for(var T=0;T<C.length;C++)C[T]=0}function _(C,T,R,A,I){for(var B=R[0],D=R[1],N=R[2],M=R[3],O=C[0]^T[0],L=C[1]^T[1],F=C[2]^T[2],U=C[3]^T[3],j,z,W,X,ie=4,fe=1;fe<I;fe++)j=B[O>>>24]^D[L>>>16&255]^N[F>>>8&255]^M[U&255]^T[ie++],z=B[L>>>24]^D[F>>>16&255]^N[U>>>8&255]^M[O&255]^T[ie++],W=B[F>>>24]^D[U>>>16&255]^N[O>>>8&255]^M[L&255]^T[ie++],X=B[U>>>24]^D[O>>>16&255]^N[L>>>8&255]^M[F&255]^T[ie++],O=j,L=z,F=W,U=X;return j=(A[O>>>24]<<24|A[L>>>16&255]<<16|A[F>>>8&255]<<8|A[U&255])^T[ie++],z=(A[L>>>24]<<24|A[F>>>16&255]<<16|A[U>>>8&255]<<8|A[O&255])^T[ie++],W=(A[F>>>24]<<24|A[U>>>16&255]<<16|A[O>>>8&255]<<8|A[L&255])^T[ie++],X=(A[U>>>24]<<24|A[O>>>16&255]<<16|A[L>>>8&255]<<8|A[F&255])^T[ie++],j=j>>>0,z=z>>>0,W=W>>>0,X=X>>>0,[j,z,W,X]}var x=[0,1,2,4,8,16,32,64,128,27,54],S=function(){for(var C=new Array(256),T=0;T<256;T++)T<128?C[T]=T<<1:C[T]=T<<1^283;for(var R=[],A=[],I=[[],[],[],[]],B=[[],[],[],[]],D=0,N=0,M=0;M<256;++M){var O=N^N<<1^N<<2^N<<3^N<<4;O=O>>>8^O&255^99,R[D]=O,A[O]=D;var L=C[D],F=C[L],U=C[F],j=C[O]*257^O*16843008;I[0][D]=j<<24|j>>>8,I[1][D]=j<<16|j>>>16,I[2][D]=j<<8|j>>>24,I[3][D]=j,j=U*16843009^F*65537^L*257^D*16843008,B[0][O]=j<<24|j>>>8,B[1][O]=j<<16|j>>>16,B[2][O]=j<<8|j>>>24,B[3][O]=j,D===0?D=N=1:(D=L^C[C[C[U^L]]],N^=C[C[N]])}return{SBOX:R,INV_SBOX:A,SUB_MIX:I,INV_SUB_MIX:B}}();function E(C){this._key=r(C),this._reset()}return E.blockSize=4*4,E.keySize=256/8,E.prototype.blockSize=E.blockSize,E.prototype.keySize=E.keySize,E.prototype._reset=function(){for(var C=this._key,T=C.length,R=T+6,A=(R+1)*4,I=[],B=0;B<T;B++)I[B]=C[B];for(B=T;B<A;B++){var D=I[B-1];B%T===0?(D=D<<8|D>>>24,D=S.SBOX[D>>>24]<<24|S.SBOX[D>>>16&255]<<16|S.SBOX[D>>>8&255]<<8|S.SBOX[D&255],D^=x[B/T|0]<<24):T>6&&B%T===4&&(D=S.SBOX[D>>>24]<<24|S.SBOX[D>>>16&255]<<16|S.SBOX[D>>>8&255]<<8|S.SBOX[D&255]),I[B]=I[B-T]^D}for(var N=[],M=0;M<A;M++){var O=A-M,L=I[O-(M%4?0:4)];M<4||O<=4?N[M]=L:N[M]=S.INV_SUB_MIX[0][S.SBOX[L>>>24]]^S.INV_SUB_MIX[1][S.SBOX[L>>>16&255]]^S.INV_SUB_MIX[2][S.SBOX[L>>>8&255]]^S.INV_SUB_MIX[3][S.SBOX[L&255]]}this._nRounds=R,this._keySchedule=I,this._invKeySchedule=N},E.prototype.encryptBlockRaw=function(C){return C=r(C),_(C,this._keySchedule,S.SUB_MIX,S.SBOX,this._nRounds)},E.prototype.encryptBlock=function(C){var T=this.encryptBlockRaw(C),R=n.allocUnsafe(16);return R.writeUInt32BE(T[0],0),R.writeUInt32BE(T[1],4),R.writeUInt32BE(T[2],8),R.writeUInt32BE(T[3],12),R},E.prototype.decryptBlock=function(C){C=r(C);var T=C[1];C[1]=C[3],C[3]=T;var R=_(C,this._invKeySchedule,S.INV_SUB_MIX,S.INV_SBOX,this._nRounds),A=n.allocUnsafe(16);return A.writeUInt32BE(R[0],0),A.writeUInt32BE(R[3],4),A.writeUInt32BE(R[2],8),A.writeUInt32BE(R[1],12),A},E.prototype.scrub=function(){g(this._keySchedule),g(this._invKeySchedule),g(this._key)},aes.AES=E,aes}var ghash,hasRequiredGhash;function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var n=requireSafeBuffer$1().Buffer,r=n.alloc(16,0);function g(S){return[S.readUInt32BE(0),S.readUInt32BE(4),S.readUInt32BE(8),S.readUInt32BE(12)]}function _(S){var E=n.allocUnsafe(16);return E.writeUInt32BE(S[0]>>>0,0),E.writeUInt32BE(S[1]>>>0,4),E.writeUInt32BE(S[2]>>>0,8),E.writeUInt32BE(S[3]>>>0,12),E}function x(S){this.h=S,this.state=n.alloc(16,0),this.cache=n.allocUnsafe(0)}return x.prototype.ghash=function(S){for(var E=-1;++E<S.length;)this.state[E]^=S[E];this._multiply()},x.prototype._multiply=function(){for(var S=g(this.h),E=[0,0,0,0],C,T,R,A=-1;++A<128;){for(T=(this.state[~~(A/8)]&1<<7-A%8)!==0,T&&(E[0]^=S[0],E[1]^=S[1],E[2]^=S[2],E[3]^=S[3]),R=(S[3]&1)!==0,C=3;C>0;C--)S[C]=S[C]>>>1|(S[C-1]&1)<<31;S[0]=S[0]>>>1,R&&(S[0]=S[0]^225<<24)}this.state=_(E)},x.prototype.update=function(S){this.cache=n.concat([this.cache,S]);for(var E;this.cache.length>=16;)E=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(E)},x.prototype.final=function(S,E){return this.cache.length&&this.ghash(n.concat([this.cache,r],16)),this.ghash(_([0,S,0,E])),this.state},ghash=x,ghash}var authCipher,hasRequiredAuthCipher;function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var n=requireAes(),r=requireSafeBuffer$1().Buffer,g=requireCipherBase(),_=requireInherits_browser(),x=requireGhash(),S=requireBufferXor(),E=requireIncr32();function C(A,I){var B=0;A.length!==I.length&&B++;for(var D=Math.min(A.length,I.length),N=0;N<D;++N)B+=A[N]^I[N];return B}function T(A,I,B){if(I.length===12)return A._finID=r.concat([I,r.from([0,0,0,1])]),r.concat([I,r.from([0,0,0,2])]);var D=new x(B),N=I.length,M=N%16;D.update(I),M&&(M=16-M,D.update(r.alloc(M,0))),D.update(r.alloc(8,0));var O=N*8,L=r.alloc(8);L.writeUIntBE(O,0,8),D.update(L),A._finID=D.state;var F=r.from(A._finID);return E(F),F}function R(A,I,B,D){g.call(this);var N=r.alloc(4,0);this._cipher=new n.AES(I);var M=this._cipher.encryptBlock(N);this._ghash=new x(M),B=T(this,B,M),this._prev=r.from(B),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=D,this._alen=0,this._len=0,this._mode=A,this._authTag=null,this._called=!1}return _(R,g),R.prototype._update=function(A){if(!this._called&&this._alen){var I=16-this._alen%16;I<16&&(I=r.alloc(I,0),this._ghash.update(I))}this._called=!0;var B=this._mode.encrypt(this,A);return this._decrypt?this._ghash.update(A):this._ghash.update(B),this._len+=A.length,B},R.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var A=S(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&C(A,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=A,this._cipher.scrub()},R.prototype.getAuthTag=function(){if(this._decrypt||!r.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},R.prototype.setAuthTag=function(I){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=I},R.prototype.setAAD=function(I){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(I),this._alen+=I.length},authCipher=R,authCipher}var streamCipher,hasRequiredStreamCipher;function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var n=requireAes(),r=requireSafeBuffer$1().Buffer,g=requireCipherBase(),_=requireInherits_browser();function x(S,E,C,T){g.call(this),this._cipher=new n.AES(E),this._prev=r.from(C),this._cache=r.allocUnsafe(0),this._secCache=r.allocUnsafe(0),this._decrypt=T,this._mode=S}return _(x,g),x.prototype._update=function(S){return this._mode.encrypt(this,S,this._decrypt)},x.prototype._final=function(){this._cipher.scrub()},streamCipher=x,streamCipher}var evp_bytestokey,hasRequiredEvp_bytestokey;function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var n=requireSafeBuffer$1().Buffer,r=requireMd5_js();function g(_,x,S,E){if(n.isBuffer(_)||(_=n.from(_,"binary")),x&&(n.isBuffer(x)||(x=n.from(x,"binary")),x.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var C=S/8,T=n.alloc(C),R=n.alloc(E||0),A=n.alloc(0);C>0||E>0;){var I=new r;I.update(A),I.update(_),x&&I.update(x),A=I.digest();var B=0;if(C>0){var D=T.length-C;B=Math.min(C,A.length),A.copy(T,D,0,B),C-=B}if(B<A.length&&E>0){var N=R.length-E,M=Math.min(E,A.length-B);A.copy(R,N,B,B+M),E-=M}}return A.fill(0),{key:T,iv:R}}return evp_bytestokey=g,evp_bytestokey}var hasRequiredEncrypter;function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var n=requireModes$1(),r=requireAuthCipher(),g=requireSafeBuffer$1().Buffer,_=requireStreamCipher(),x=requireCipherBase(),S=requireAes(),E=requireEvp_bytestokey(),C=requireInherits_browser();function T(D,N,M){x.call(this),this._cache=new A,this._cipher=new S.AES(N),this._prev=g.from(M),this._mode=D,this._autopadding=!0}C(T,x),T.prototype._update=function(D){this._cache.add(D);for(var N,M,O=[];N=this._cache.get();)M=this._mode.encrypt(this,N),O.push(M);return g.concat(O)};var R=g.alloc(16,16);T.prototype._final=function(){var D=this._cache.flush();if(this._autopadding)return D=this._mode.encrypt(this,D),this._cipher.scrub(),D;if(!D.equals(R))throw this._cipher.scrub(),new Error("data not multiple of block length")},T.prototype.setAutoPadding=function(D){return this._autopadding=!!D,this};function A(){this.cache=g.allocUnsafe(0)}A.prototype.add=function(D){this.cache=g.concat([this.cache,D])},A.prototype.get=function(){if(this.cache.length>15){var D=this.cache.slice(0,16);return this.cache=this.cache.slice(16),D}return null},A.prototype.flush=function(){for(var D=16-this.cache.length,N=g.allocUnsafe(D),M=-1;++M<D;)N.writeUInt8(D,M);return g.concat([this.cache,N])};function I(D,N,M){var O=n[D.toLowerCase()];if(!O)throw new TypeError("invalid suite type");if(typeof N=="string"&&(N=g.from(N)),N.length!==O.key/8)throw new TypeError("invalid key length "+N.length);if(typeof M=="string"&&(M=g.from(M)),O.mode!=="GCM"&&M.length!==O.iv)throw new TypeError("invalid iv length "+M.length);return O.type==="stream"?new _(O.module,N,M):O.type==="auth"?new r(O.module,N,M):new T(O.module,N,M)}function B(D,N){var M=n[D.toLowerCase()];if(!M)throw new TypeError("invalid suite type");var O=E(N,!1,M.key,M.iv);return I(D,O.key,O.iv)}return encrypter.createCipheriv=I,encrypter.createCipher=B,encrypter}var decrypter={},hasRequiredDecrypter;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var n=requireAuthCipher(),r=requireSafeBuffer$1().Buffer,g=requireModes$1(),_=requireStreamCipher(),x=requireCipherBase(),S=requireAes(),E=requireEvp_bytestokey(),C=requireInherits_browser();function T(D,N,M){x.call(this),this._cache=new R,this._last=void 0,this._cipher=new S.AES(N),this._prev=r.from(M),this._mode=D,this._autopadding=!0}C(T,x),T.prototype._update=function(D){this._cache.add(D);for(var N,M,O=[];N=this._cache.get(this._autopadding);)M=this._mode.decrypt(this,N),O.push(M);return r.concat(O)},T.prototype._final=function(){var D=this._cache.flush();if(this._autopadding)return A(this._mode.decrypt(this,D));if(D)throw new Error("data not multiple of block length")},T.prototype.setAutoPadding=function(D){return this._autopadding=!!D,this};function R(){this.cache=r.allocUnsafe(0)}R.prototype.add=function(D){this.cache=r.concat([this.cache,D])},R.prototype.get=function(D){var N;if(D){if(this.cache.length>16)return N=this.cache.slice(0,16),this.cache=this.cache.slice(16),N}else if(this.cache.length>=16)return N=this.cache.slice(0,16),this.cache=this.cache.slice(16),N;return null},R.prototype.flush=function(){if(this.cache.length)return this.cache};function A(D){var N=D[15];if(N<1||N>16)throw new Error("unable to decrypt data");for(var M=-1;++M<N;)if(D[M+(16-N)]!==N)throw new Error("unable to decrypt data");if(N!==16)return D.slice(0,16-N)}function I(D,N,M){var O=g[D.toLowerCase()];if(!O)throw new TypeError("invalid suite type");if(typeof M=="string"&&(M=r.from(M)),O.mode!=="GCM"&&M.length!==O.iv)throw new TypeError("invalid iv length "+M.length);if(typeof N=="string"&&(N=r.from(N)),N.length!==O.key/8)throw new TypeError("invalid key length "+N.length);return O.type==="stream"?new _(O.module,N,M,!0):O.type==="auth"?new n(O.module,N,M,!0):new T(O.module,N,M)}function B(D,N){var M=g[D.toLowerCase()];if(!M)throw new TypeError("invalid suite type");var O=E(N,!1,M.key,M.iv);return I(D,O.key,O.iv)}return decrypter.createDecipher=B,decrypter.createDecipheriv=I,decrypter}var hasRequiredBrowser$8;function requireBrowser$8(){if(hasRequiredBrowser$8)return browser$8;hasRequiredBrowser$8=1;var n=requireEncrypter(),r=requireDecrypter(),g=require$$2;function _(){return Object.keys(g)}return browser$8.createCipher=browser$8.Cipher=n.createCipher,browser$8.createCipheriv=browser$8.Cipheriv=n.createCipheriv,browser$8.createDecipher=browser$8.Decipher=r.createDecipher,browser$8.createDecipheriv=browser$8.Decipheriv=r.createDecipheriv,browser$8.listCiphers=browser$8.getCiphers=_,browser$8}var modes={},hasRequiredModes;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,function(n){n["des-ecb"]={key:8,iv:0},n["des-cbc"]=n.des={key:8,iv:8},n["des-ede3-cbc"]=n.des3={key:24,iv:8},n["des-ede3"]={key:24,iv:0},n["des-ede-cbc"]={key:16,iv:8},n["des-ede"]={key:16,iv:0}}(modes)),modes}var hasRequiredBrowser$7;function requireBrowser$7(){if(hasRequiredBrowser$7)return browser$9;hasRequiredBrowser$7=1;var n=requireBrowserifyDes(),r=requireBrowser$8(),g=requireModes$1(),_=requireModes(),x=requireEvp_bytestokey();function S(A,I){A=A.toLowerCase();var B,D;if(g[A])B=g[A].key,D=g[A].iv;else if(_[A])B=_[A].key*8,D=_[A].iv;else throw new TypeError("invalid suite type");var N=x(I,!1,B,D);return C(A,N.key,N.iv)}function E(A,I){A=A.toLowerCase();var B,D;if(g[A])B=g[A].key,D=g[A].iv;else if(_[A])B=_[A].key*8,D=_[A].iv;else throw new TypeError("invalid suite type");var N=x(I,!1,B,D);return T(A,N.key,N.iv)}function C(A,I,B){if(A=A.toLowerCase(),g[A])return r.createCipheriv(A,I,B);if(_[A])return new n({key:I,iv:B,mode:A});throw new TypeError("invalid suite type")}function T(A,I,B){if(A=A.toLowerCase(),g[A])return r.createDecipheriv(A,I,B);if(_[A])return new n({key:I,iv:B,mode:A,decrypt:!0});throw new TypeError("invalid suite type")}function R(){return Object.keys(_).concat(r.getCiphers())}return browser$9.createCipher=browser$9.Cipher=S,browser$9.createCipheriv=browser$9.Cipheriv=C,browser$9.createDecipher=browser$9.Decipher=E,browser$9.createDecipheriv=browser$9.Decipheriv=T,browser$9.listCiphers=browser$9.getCiphers=R,browser$9}var browser$7={},bn$5={exports:{}},bn$4=bn$5.exports,hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(n){(function(r,g){function _(we,G){if(!we)throw new Error(G||"Assertion failed")}function x(we,G){we.super_=G;var J=function(){};J.prototype=G.prototype,we.prototype=new J,we.prototype.constructor=we}function S(we,G,J){if(S.isBN(we))return we;this.negative=0,this.words=null,this.length=0,this.red=null,we!==null&&((G==="le"||G==="be")&&(J=G,G=10),this._init(we||0,G||10,J||"be"))}typeof r=="object"?r.exports=S:g.BN=S,S.BN=S,S.wordSize=26;var E;try{typeof window<"u"&&typeof window.Buffer<"u"?E=window.Buffer:E=requireDist().Buffer}catch{}S.isBN=function(G){return G instanceof S?!0:G!==null&&typeof G=="object"&&G.constructor.wordSize===S.wordSize&&Array.isArray(G.words)},S.max=function(G,J){return G.cmp(J)>0?G:J},S.min=function(G,J){return G.cmp(J)<0?G:J},S.prototype._init=function(G,J,q){if(typeof G=="number")return this._initNumber(G,J,q);if(typeof G=="object")return this._initArray(G,J,q);J==="hex"&&(J=16),_(J===(J|0)&&J>=2&&J<=36),G=G.toString().replace(/\s+/g,"");var H=0;G[0]==="-"&&(H++,this.negative=1),H<G.length&&(J===16?this._parseHex(G,H,q):(this._parseBase(G,J,H),q==="le"&&this._initArray(this.toArray(),J,q)))},S.prototype._initNumber=function(G,J,q){G<0&&(this.negative=1,G=-G),G<67108864?(this.words=[G&67108863],this.length=1):G<4503599627370496?(this.words=[G&67108863,G/67108864&67108863],this.length=2):(_(G<9007199254740992),this.words=[G&67108863,G/67108864&67108863,1],this.length=3),q==="le"&&this._initArray(this.toArray(),J,q)},S.prototype._initArray=function(G,J,q){if(_(typeof G.length=="number"),G.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(G.length/3),this.words=new Array(this.length);for(var H=0;H<this.length;H++)this.words[H]=0;var ve,Z,ce=0;if(q==="be")for(H=G.length-1,ve=0;H>=0;H-=3)Z=G[H]|G[H-1]<<8|G[H-2]<<16,this.words[ve]|=Z<<ce&67108863,this.words[ve+1]=Z>>>26-ce&67108863,ce+=24,ce>=26&&(ce-=26,ve++);else if(q==="le")for(H=0,ve=0;H<G.length;H+=3)Z=G[H]|G[H+1]<<8|G[H+2]<<16,this.words[ve]|=Z<<ce&67108863,this.words[ve+1]=Z>>>26-ce&67108863,ce+=24,ce>=26&&(ce-=26,ve++);return this.strip()};function C(we,G){var J=we.charCodeAt(G);return J>=65&&J<=70?J-55:J>=97&&J<=102?J-87:J-48&15}function T(we,G,J){var q=C(we,J);return J-1>=G&&(q|=C(we,J-1)<<4),q}S.prototype._parseHex=function(G,J,q){this.length=Math.ceil((G.length-J)/6),this.words=new Array(this.length);for(var H=0;H<this.length;H++)this.words[H]=0;var ve=0,Z=0,ce;if(q==="be")for(H=G.length-1;H>=J;H-=2)ce=T(G,J,H)<<ve,this.words[Z]|=ce&67108863,ve>=18?(ve-=18,Z+=1,this.words[Z]|=ce>>>26):ve+=8;else{var ue=G.length-J;for(H=ue%2===0?J+1:J;H<G.length;H+=2)ce=T(G,J,H)<<ve,this.words[Z]|=ce&67108863,ve>=18?(ve-=18,Z+=1,this.words[Z]|=ce>>>26):ve+=8}this.strip()};function R(we,G,J,q){for(var H=0,ve=Math.min(we.length,J),Z=G;Z<ve;Z++){var ce=we.charCodeAt(Z)-48;H*=q,ce>=49?H+=ce-49+10:ce>=17?H+=ce-17+10:H+=ce}return H}S.prototype._parseBase=function(G,J,q){this.words=[0],this.length=1;for(var H=0,ve=1;ve<=67108863;ve*=J)H++;H--,ve=ve/J|0;for(var Z=G.length-q,ce=Z%H,ue=Math.min(Z,Z-ce)+q,se=0,te=q;te<ue;te+=H)se=R(G,te,te+H,J),this.imuln(ve),this.words[0]+se<67108864?this.words[0]+=se:this._iaddn(se);if(ce!==0){var Y=1;for(se=R(G,te,G.length,J),te=0;te<ce;te++)Y*=J;this.imuln(Y),this.words[0]+se<67108864?this.words[0]+=se:this._iaddn(se)}this.strip()},S.prototype.copy=function(G){G.words=new Array(this.length);for(var J=0;J<this.length;J++)G.words[J]=this.words[J];G.length=this.length,G.negative=this.negative,G.red=this.red},S.prototype.clone=function(){var G=new S(null);return this.copy(G),G},S.prototype._expand=function(G){for(;this.length<G;)this.words[this.length++]=0;return this},S.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},S.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},S.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var A=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],I=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],B=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];S.prototype.toString=function(G,J){G=G||10,J=J|0||1;var q;if(G===16||G==="hex"){q="";for(var H=0,ve=0,Z=0;Z<this.length;Z++){var ce=this.words[Z],ue=((ce<<H|ve)&16777215).toString(16);ve=ce>>>24-H&16777215,H+=2,H>=26&&(H-=26,Z--),ve!==0||Z!==this.length-1?q=A[6-ue.length]+ue+q:q=ue+q}for(ve!==0&&(q=ve.toString(16)+q);q.length%J!==0;)q="0"+q;return this.negative!==0&&(q="-"+q),q}if(G===(G|0)&&G>=2&&G<=36){var se=I[G],te=B[G];q="";var Y=this.clone();for(Y.negative=0;!Y.isZero();){var be=Y.modn(te).toString(G);Y=Y.idivn(te),Y.isZero()?q=be+q:q=A[se-be.length]+be+q}for(this.isZero()&&(q="0"+q);q.length%J!==0;)q="0"+q;return this.negative!==0&&(q="-"+q),q}_(!1,"Base should be between 2 and 36")},S.prototype.toNumber=function(){var G=this.words[0];return this.length===2?G+=this.words[1]*67108864:this.length===3&&this.words[2]===1?G+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-G:G},S.prototype.toJSON=function(){return this.toString(16)},S.prototype.toBuffer=function(G,J){return _(typeof E<"u"),this.toArrayLike(E,G,J)},S.prototype.toArray=function(G,J){return this.toArrayLike(Array,G,J)},S.prototype.toArrayLike=function(G,J,q){var H=this.byteLength(),ve=q||Math.max(1,H);_(H<=ve,"byte array longer than desired length"),_(ve>0,"Requested array length <= 0"),this.strip();var Z=J==="le",ce=new G(ve),ue,se,te=this.clone();if(Z){for(se=0;!te.isZero();se++)ue=te.andln(255),te.iushrn(8),ce[se]=ue;for(;se<ve;se++)ce[se]=0}else{for(se=0;se<ve-H;se++)ce[se]=0;for(se=0;!te.isZero();se++)ue=te.andln(255),te.iushrn(8),ce[ve-se-1]=ue}return ce},Math.clz32?S.prototype._countBits=function(G){return 32-Math.clz32(G)}:S.prototype._countBits=function(G){var J=G,q=0;return J>=4096&&(q+=13,J>>>=13),J>=64&&(q+=7,J>>>=7),J>=8&&(q+=4,J>>>=4),J>=2&&(q+=2,J>>>=2),q+J},S.prototype._zeroBits=function(G){if(G===0)return 26;var J=G,q=0;return J&8191||(q+=13,J>>>=13),J&127||(q+=7,J>>>=7),J&15||(q+=4,J>>>=4),J&3||(q+=2,J>>>=2),J&1||q++,q},S.prototype.bitLength=function(){var G=this.words[this.length-1],J=this._countBits(G);return(this.length-1)*26+J};function D(we){for(var G=new Array(we.bitLength()),J=0;J<G.length;J++){var q=J/26|0,H=J%26;G[J]=(we.words[q]&1<<H)>>>H}return G}S.prototype.zeroBits=function(){if(this.isZero())return 0;for(var G=0,J=0;J<this.length;J++){var q=this._zeroBits(this.words[J]);if(G+=q,q!==26)break}return G},S.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},S.prototype.toTwos=function(G){return this.negative!==0?this.abs().inotn(G).iaddn(1):this.clone()},S.prototype.fromTwos=function(G){return this.testn(G-1)?this.notn(G).iaddn(1).ineg():this.clone()},S.prototype.isNeg=function(){return this.negative!==0},S.prototype.neg=function(){return this.clone().ineg()},S.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},S.prototype.iuor=function(G){for(;this.length<G.length;)this.words[this.length++]=0;for(var J=0;J<G.length;J++)this.words[J]=this.words[J]|G.words[J];return this.strip()},S.prototype.ior=function(G){return _((this.negative|G.negative)===0),this.iuor(G)},S.prototype.or=function(G){return this.length>G.length?this.clone().ior(G):G.clone().ior(this)},S.prototype.uor=function(G){return this.length>G.length?this.clone().iuor(G):G.clone().iuor(this)},S.prototype.iuand=function(G){var J;this.length>G.length?J=G:J=this;for(var q=0;q<J.length;q++)this.words[q]=this.words[q]&G.words[q];return this.length=J.length,this.strip()},S.prototype.iand=function(G){return _((this.negative|G.negative)===0),this.iuand(G)},S.prototype.and=function(G){return this.length>G.length?this.clone().iand(G):G.clone().iand(this)},S.prototype.uand=function(G){return this.length>G.length?this.clone().iuand(G):G.clone().iuand(this)},S.prototype.iuxor=function(G){var J,q;this.length>G.length?(J=this,q=G):(J=G,q=this);for(var H=0;H<q.length;H++)this.words[H]=J.words[H]^q.words[H];if(this!==J)for(;H<J.length;H++)this.words[H]=J.words[H];return this.length=J.length,this.strip()},S.prototype.ixor=function(G){return _((this.negative|G.negative)===0),this.iuxor(G)},S.prototype.xor=function(G){return this.length>G.length?this.clone().ixor(G):G.clone().ixor(this)},S.prototype.uxor=function(G){return this.length>G.length?this.clone().iuxor(G):G.clone().iuxor(this)},S.prototype.inotn=function(G){_(typeof G=="number"&&G>=0);var J=Math.ceil(G/26)|0,q=G%26;this._expand(J),q>0&&J--;for(var H=0;H<J;H++)this.words[H]=~this.words[H]&67108863;return q>0&&(this.words[H]=~this.words[H]&67108863>>26-q),this.strip()},S.prototype.notn=function(G){return this.clone().inotn(G)},S.prototype.setn=function(G,J){_(typeof G=="number"&&G>=0);var q=G/26|0,H=G%26;return this._expand(q+1),J?this.words[q]=this.words[q]|1<<H:this.words[q]=this.words[q]&~(1<<H),this.strip()},S.prototype.iadd=function(G){var J;if(this.negative!==0&&G.negative===0)return this.negative=0,J=this.isub(G),this.negative^=1,this._normSign();if(this.negative===0&&G.negative!==0)return G.negative=0,J=this.isub(G),G.negative=1,J._normSign();var q,H;this.length>G.length?(q=this,H=G):(q=G,H=this);for(var ve=0,Z=0;Z<H.length;Z++)J=(q.words[Z]|0)+(H.words[Z]|0)+ve,this.words[Z]=J&67108863,ve=J>>>26;for(;ve!==0&&Z<q.length;Z++)J=(q.words[Z]|0)+ve,this.words[Z]=J&67108863,ve=J>>>26;if(this.length=q.length,ve!==0)this.words[this.length]=ve,this.length++;else if(q!==this)for(;Z<q.length;Z++)this.words[Z]=q.words[Z];return this},S.prototype.add=function(G){var J;return G.negative!==0&&this.negative===0?(G.negative=0,J=this.sub(G),G.negative^=1,J):G.negative===0&&this.negative!==0?(this.negative=0,J=G.sub(this),this.negative=1,J):this.length>G.length?this.clone().iadd(G):G.clone().iadd(this)},S.prototype.isub=function(G){if(G.negative!==0){G.negative=0;var J=this.iadd(G);return G.negative=1,J._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(G),this.negative=1,this._normSign();var q=this.cmp(G);if(q===0)return this.negative=0,this.length=1,this.words[0]=0,this;var H,ve;q>0?(H=this,ve=G):(H=G,ve=this);for(var Z=0,ce=0;ce<ve.length;ce++)J=(H.words[ce]|0)-(ve.words[ce]|0)+Z,Z=J>>26,this.words[ce]=J&67108863;for(;Z!==0&&ce<H.length;ce++)J=(H.words[ce]|0)+Z,Z=J>>26,this.words[ce]=J&67108863;if(Z===0&&ce<H.length&&H!==this)for(;ce<H.length;ce++)this.words[ce]=H.words[ce];return this.length=Math.max(this.length,ce),H!==this&&(this.negative=1),this.strip()},S.prototype.sub=function(G){return this.clone().isub(G)};function N(we,G,J){J.negative=G.negative^we.negative;var q=we.length+G.length|0;J.length=q,q=q-1|0;var H=we.words[0]|0,ve=G.words[0]|0,Z=H*ve,ce=Z&67108863,ue=Z/67108864|0;J.words[0]=ce;for(var se=1;se<q;se++){for(var te=ue>>>26,Y=ue&67108863,be=Math.min(se,G.length-1),ye=Math.max(0,se-we.length+1);ye<=be;ye++){var Ie=se-ye|0;H=we.words[Ie]|0,ve=G.words[ye]|0,Z=H*ve+Y,te+=Z/67108864|0,Y=Z&67108863}J.words[se]=Y|0,ue=te|0}return ue!==0?J.words[se]=ue|0:J.length--,J.strip()}var M=function(G,J,q){var H=G.words,ve=J.words,Z=q.words,ce=0,ue,se,te,Y=H[0]|0,be=Y&8191,ye=Y>>>13,Ie=H[1]|0,ke=Ie&8191,Ce=Ie>>>13,Ae=H[2]|0,Ne=Ae&8191,We=Ae>>>13,Be=H[3]|0,Se=Be&8191,$e=Be>>>13,_e=H[4]|0,Oe=_e&8191,Ke=_e>>>13,Me=H[5]|0,Le=Me&8191,ze=Me>>>13,Je=H[6]|0,Qe=Je&8191,rt=Je>>>13,wt=H[7]|0,bt=wt&8191,xt=wt>>>13,Et=H[8]|0,Rt=Et&8191,$t=Et>>>13,qt=H[9]|0,Ge=qt&8191,De=qt>>>13,Ve=ve[0]|0,Ze=Ve&8191,_t=Ve>>>13,ft=ve[1]|0,ht=ft&8191,zt=ft>>>13,Kt=ve[2]|0,Ft=Kt&8191,Jt=Kt>>>13,jt=ve[3]|0,rr=jt&8191,ir=jt>>>13,cr=ve[4]|0,sr=cr&8191,yr=cr>>>13,ur=ve[5]|0,Ye=ur&8191,Fe=ur>>>13,qe=ve[6]|0,pt=qe&8191,St=qe>>>13,Tt=ve[7]|0,At=Tt&8191,ar=Tt>>>13,Xe=ve[8]|0,nt=Xe&8191,ot=Xe>>>13,et=ve[9]|0,mt=et&8191,vt=et>>>13;q.negative=G.negative^J.negative,q.length=19,ue=Math.imul(be,Ze),se=Math.imul(be,_t),se=se+Math.imul(ye,Ze)|0,te=Math.imul(ye,_t);var Ct=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,ue=Math.imul(ke,Ze),se=Math.imul(ke,_t),se=se+Math.imul(Ce,Ze)|0,te=Math.imul(Ce,_t),ue=ue+Math.imul(be,ht)|0,se=se+Math.imul(be,zt)|0,se=se+Math.imul(ye,ht)|0,te=te+Math.imul(ye,zt)|0;var Pt=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,ue=Math.imul(Ne,Ze),se=Math.imul(Ne,_t),se=se+Math.imul(We,Ze)|0,te=Math.imul(We,_t),ue=ue+Math.imul(ke,ht)|0,se=se+Math.imul(ke,zt)|0,se=se+Math.imul(Ce,ht)|0,te=te+Math.imul(Ce,zt)|0,ue=ue+Math.imul(be,Ft)|0,se=se+Math.imul(be,Jt)|0,se=se+Math.imul(ye,Ft)|0,te=te+Math.imul(ye,Jt)|0;var It=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(It>>>26)|0,It&=67108863,ue=Math.imul(Se,Ze),se=Math.imul(Se,_t),se=se+Math.imul($e,Ze)|0,te=Math.imul($e,_t),ue=ue+Math.imul(Ne,ht)|0,se=se+Math.imul(Ne,zt)|0,se=se+Math.imul(We,ht)|0,te=te+Math.imul(We,zt)|0,ue=ue+Math.imul(ke,Ft)|0,se=se+Math.imul(ke,Jt)|0,se=se+Math.imul(Ce,Ft)|0,te=te+Math.imul(Ce,Jt)|0,ue=ue+Math.imul(be,rr)|0,se=se+Math.imul(be,ir)|0,se=se+Math.imul(ye,rr)|0,te=te+Math.imul(ye,ir)|0;var Nt=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,ue=Math.imul(Oe,Ze),se=Math.imul(Oe,_t),se=se+Math.imul(Ke,Ze)|0,te=Math.imul(Ke,_t),ue=ue+Math.imul(Se,ht)|0,se=se+Math.imul(Se,zt)|0,se=se+Math.imul($e,ht)|0,te=te+Math.imul($e,zt)|0,ue=ue+Math.imul(Ne,Ft)|0,se=se+Math.imul(Ne,Jt)|0,se=se+Math.imul(We,Ft)|0,te=te+Math.imul(We,Jt)|0,ue=ue+Math.imul(ke,rr)|0,se=se+Math.imul(ke,ir)|0,se=se+Math.imul(Ce,rr)|0,te=te+Math.imul(Ce,ir)|0,ue=ue+Math.imul(be,sr)|0,se=se+Math.imul(be,yr)|0,se=se+Math.imul(ye,sr)|0,te=te+Math.imul(ye,yr)|0;var Dt=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,ue=Math.imul(Le,Ze),se=Math.imul(Le,_t),se=se+Math.imul(ze,Ze)|0,te=Math.imul(ze,_t),ue=ue+Math.imul(Oe,ht)|0,se=se+Math.imul(Oe,zt)|0,se=se+Math.imul(Ke,ht)|0,te=te+Math.imul(Ke,zt)|0,ue=ue+Math.imul(Se,Ft)|0,se=se+Math.imul(Se,Jt)|0,se=se+Math.imul($e,Ft)|0,te=te+Math.imul($e,Jt)|0,ue=ue+Math.imul(Ne,rr)|0,se=se+Math.imul(Ne,ir)|0,se=se+Math.imul(We,rr)|0,te=te+Math.imul(We,ir)|0,ue=ue+Math.imul(ke,sr)|0,se=se+Math.imul(ke,yr)|0,se=se+Math.imul(Ce,sr)|0,te=te+Math.imul(Ce,yr)|0,ue=ue+Math.imul(be,Ye)|0,se=se+Math.imul(be,Fe)|0,se=se+Math.imul(ye,Ye)|0,te=te+Math.imul(ye,Fe)|0;var Ht=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,ue=Math.imul(Qe,Ze),se=Math.imul(Qe,_t),se=se+Math.imul(rt,Ze)|0,te=Math.imul(rt,_t),ue=ue+Math.imul(Le,ht)|0,se=se+Math.imul(Le,zt)|0,se=se+Math.imul(ze,ht)|0,te=te+Math.imul(ze,zt)|0,ue=ue+Math.imul(Oe,Ft)|0,se=se+Math.imul(Oe,Jt)|0,se=se+Math.imul(Ke,Ft)|0,te=te+Math.imul(Ke,Jt)|0,ue=ue+Math.imul(Se,rr)|0,se=se+Math.imul(Se,ir)|0,se=se+Math.imul($e,rr)|0,te=te+Math.imul($e,ir)|0,ue=ue+Math.imul(Ne,sr)|0,se=se+Math.imul(Ne,yr)|0,se=se+Math.imul(We,sr)|0,te=te+Math.imul(We,yr)|0,ue=ue+Math.imul(ke,Ye)|0,se=se+Math.imul(ke,Fe)|0,se=se+Math.imul(Ce,Ye)|0,te=te+Math.imul(Ce,Fe)|0,ue=ue+Math.imul(be,pt)|0,se=se+Math.imul(be,St)|0,se=se+Math.imul(ye,pt)|0,te=te+Math.imul(ye,St)|0;var Zt=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,ue=Math.imul(bt,Ze),se=Math.imul(bt,_t),se=se+Math.imul(xt,Ze)|0,te=Math.imul(xt,_t),ue=ue+Math.imul(Qe,ht)|0,se=se+Math.imul(Qe,zt)|0,se=se+Math.imul(rt,ht)|0,te=te+Math.imul(rt,zt)|0,ue=ue+Math.imul(Le,Ft)|0,se=se+Math.imul(Le,Jt)|0,se=se+Math.imul(ze,Ft)|0,te=te+Math.imul(ze,Jt)|0,ue=ue+Math.imul(Oe,rr)|0,se=se+Math.imul(Oe,ir)|0,se=se+Math.imul(Ke,rr)|0,te=te+Math.imul(Ke,ir)|0,ue=ue+Math.imul(Se,sr)|0,se=se+Math.imul(Se,yr)|0,se=se+Math.imul($e,sr)|0,te=te+Math.imul($e,yr)|0,ue=ue+Math.imul(Ne,Ye)|0,se=se+Math.imul(Ne,Fe)|0,se=se+Math.imul(We,Ye)|0,te=te+Math.imul(We,Fe)|0,ue=ue+Math.imul(ke,pt)|0,se=se+Math.imul(ke,St)|0,se=se+Math.imul(Ce,pt)|0,te=te+Math.imul(Ce,St)|0,ue=ue+Math.imul(be,At)|0,se=se+Math.imul(be,ar)|0,se=se+Math.imul(ye,At)|0,te=te+Math.imul(ye,ar)|0;var nr=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(nr>>>26)|0,nr&=67108863,ue=Math.imul(Rt,Ze),se=Math.imul(Rt,_t),se=se+Math.imul($t,Ze)|0,te=Math.imul($t,_t),ue=ue+Math.imul(bt,ht)|0,se=se+Math.imul(bt,zt)|0,se=se+Math.imul(xt,ht)|0,te=te+Math.imul(xt,zt)|0,ue=ue+Math.imul(Qe,Ft)|0,se=se+Math.imul(Qe,Jt)|0,se=se+Math.imul(rt,Ft)|0,te=te+Math.imul(rt,Jt)|0,ue=ue+Math.imul(Le,rr)|0,se=se+Math.imul(Le,ir)|0,se=se+Math.imul(ze,rr)|0,te=te+Math.imul(ze,ir)|0,ue=ue+Math.imul(Oe,sr)|0,se=se+Math.imul(Oe,yr)|0,se=se+Math.imul(Ke,sr)|0,te=te+Math.imul(Ke,yr)|0,ue=ue+Math.imul(Se,Ye)|0,se=se+Math.imul(Se,Fe)|0,se=se+Math.imul($e,Ye)|0,te=te+Math.imul($e,Fe)|0,ue=ue+Math.imul(Ne,pt)|0,se=se+Math.imul(Ne,St)|0,se=se+Math.imul(We,pt)|0,te=te+Math.imul(We,St)|0,ue=ue+Math.imul(ke,At)|0,se=se+Math.imul(ke,ar)|0,se=se+Math.imul(Ce,At)|0,te=te+Math.imul(Ce,ar)|0,ue=ue+Math.imul(be,nt)|0,se=se+Math.imul(be,ot)|0,se=se+Math.imul(ye,nt)|0,te=te+Math.imul(ye,ot)|0;var Xt=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,ue=Math.imul(Ge,Ze),se=Math.imul(Ge,_t),se=se+Math.imul(De,Ze)|0,te=Math.imul(De,_t),ue=ue+Math.imul(Rt,ht)|0,se=se+Math.imul(Rt,zt)|0,se=se+Math.imul($t,ht)|0,te=te+Math.imul($t,zt)|0,ue=ue+Math.imul(bt,Ft)|0,se=se+Math.imul(bt,Jt)|0,se=se+Math.imul(xt,Ft)|0,te=te+Math.imul(xt,Jt)|0,ue=ue+Math.imul(Qe,rr)|0,se=se+Math.imul(Qe,ir)|0,se=se+Math.imul(rt,rr)|0,te=te+Math.imul(rt,ir)|0,ue=ue+Math.imul(Le,sr)|0,se=se+Math.imul(Le,yr)|0,se=se+Math.imul(ze,sr)|0,te=te+Math.imul(ze,yr)|0,ue=ue+Math.imul(Oe,Ye)|0,se=se+Math.imul(Oe,Fe)|0,se=se+Math.imul(Ke,Ye)|0,te=te+Math.imul(Ke,Fe)|0,ue=ue+Math.imul(Se,pt)|0,se=se+Math.imul(Se,St)|0,se=se+Math.imul($e,pt)|0,te=te+Math.imul($e,St)|0,ue=ue+Math.imul(Ne,At)|0,se=se+Math.imul(Ne,ar)|0,se=se+Math.imul(We,At)|0,te=te+Math.imul(We,ar)|0,ue=ue+Math.imul(ke,nt)|0,se=se+Math.imul(ke,ot)|0,se=se+Math.imul(Ce,nt)|0,te=te+Math.imul(Ce,ot)|0,ue=ue+Math.imul(be,mt)|0,se=se+Math.imul(be,vt)|0,se=se+Math.imul(ye,mt)|0,te=te+Math.imul(ye,vt)|0;var Qt=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,ue=Math.imul(Ge,ht),se=Math.imul(Ge,zt),se=se+Math.imul(De,ht)|0,te=Math.imul(De,zt),ue=ue+Math.imul(Rt,Ft)|0,se=se+Math.imul(Rt,Jt)|0,se=se+Math.imul($t,Ft)|0,te=te+Math.imul($t,Jt)|0,ue=ue+Math.imul(bt,rr)|0,se=se+Math.imul(bt,ir)|0,se=se+Math.imul(xt,rr)|0,te=te+Math.imul(xt,ir)|0,ue=ue+Math.imul(Qe,sr)|0,se=se+Math.imul(Qe,yr)|0,se=se+Math.imul(rt,sr)|0,te=te+Math.imul(rt,yr)|0,ue=ue+Math.imul(Le,Ye)|0,se=se+Math.imul(Le,Fe)|0,se=se+Math.imul(ze,Ye)|0,te=te+Math.imul(ze,Fe)|0,ue=ue+Math.imul(Oe,pt)|0,se=se+Math.imul(Oe,St)|0,se=se+Math.imul(Ke,pt)|0,te=te+Math.imul(Ke,St)|0,ue=ue+Math.imul(Se,At)|0,se=se+Math.imul(Se,ar)|0,se=se+Math.imul($e,At)|0,te=te+Math.imul($e,ar)|0,ue=ue+Math.imul(Ne,nt)|0,se=se+Math.imul(Ne,ot)|0,se=se+Math.imul(We,nt)|0,te=te+Math.imul(We,ot)|0,ue=ue+Math.imul(ke,mt)|0,se=se+Math.imul(ke,vt)|0,se=se+Math.imul(Ce,mt)|0,te=te+Math.imul(Ce,vt)|0;var gr=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(gr>>>26)|0,gr&=67108863,ue=Math.imul(Ge,Ft),se=Math.imul(Ge,Jt),se=se+Math.imul(De,Ft)|0,te=Math.imul(De,Jt),ue=ue+Math.imul(Rt,rr)|0,se=se+Math.imul(Rt,ir)|0,se=se+Math.imul($t,rr)|0,te=te+Math.imul($t,ir)|0,ue=ue+Math.imul(bt,sr)|0,se=se+Math.imul(bt,yr)|0,se=se+Math.imul(xt,sr)|0,te=te+Math.imul(xt,yr)|0,ue=ue+Math.imul(Qe,Ye)|0,se=se+Math.imul(Qe,Fe)|0,se=se+Math.imul(rt,Ye)|0,te=te+Math.imul(rt,Fe)|0,ue=ue+Math.imul(Le,pt)|0,se=se+Math.imul(Le,St)|0,se=se+Math.imul(ze,pt)|0,te=te+Math.imul(ze,St)|0,ue=ue+Math.imul(Oe,At)|0,se=se+Math.imul(Oe,ar)|0,se=se+Math.imul(Ke,At)|0,te=te+Math.imul(Ke,ar)|0,ue=ue+Math.imul(Se,nt)|0,se=se+Math.imul(Se,ot)|0,se=se+Math.imul($e,nt)|0,te=te+Math.imul($e,ot)|0,ue=ue+Math.imul(Ne,mt)|0,se=se+Math.imul(Ne,vt)|0,se=se+Math.imul(We,mt)|0,te=te+Math.imul(We,vt)|0;var sn=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(sn>>>26)|0,sn&=67108863,ue=Math.imul(Ge,rr),se=Math.imul(Ge,ir),se=se+Math.imul(De,rr)|0,te=Math.imul(De,ir),ue=ue+Math.imul(Rt,sr)|0,se=se+Math.imul(Rt,yr)|0,se=se+Math.imul($t,sr)|0,te=te+Math.imul($t,yr)|0,ue=ue+Math.imul(bt,Ye)|0,se=se+Math.imul(bt,Fe)|0,se=se+Math.imul(xt,Ye)|0,te=te+Math.imul(xt,Fe)|0,ue=ue+Math.imul(Qe,pt)|0,se=se+Math.imul(Qe,St)|0,se=se+Math.imul(rt,pt)|0,te=te+Math.imul(rt,St)|0,ue=ue+Math.imul(Le,At)|0,se=se+Math.imul(Le,ar)|0,se=se+Math.imul(ze,At)|0,te=te+Math.imul(ze,ar)|0,ue=ue+Math.imul(Oe,nt)|0,se=se+Math.imul(Oe,ot)|0,se=se+Math.imul(Ke,nt)|0,te=te+Math.imul(Ke,ot)|0,ue=ue+Math.imul(Se,mt)|0,se=se+Math.imul(Se,vt)|0,se=se+Math.imul($e,mt)|0,te=te+Math.imul($e,vt)|0;var an=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(an>>>26)|0,an&=67108863,ue=Math.imul(Ge,sr),se=Math.imul(Ge,yr),se=se+Math.imul(De,sr)|0,te=Math.imul(De,yr),ue=ue+Math.imul(Rt,Ye)|0,se=se+Math.imul(Rt,Fe)|0,se=se+Math.imul($t,Ye)|0,te=te+Math.imul($t,Fe)|0,ue=ue+Math.imul(bt,pt)|0,se=se+Math.imul(bt,St)|0,se=se+Math.imul(xt,pt)|0,te=te+Math.imul(xt,St)|0,ue=ue+Math.imul(Qe,At)|0,se=se+Math.imul(Qe,ar)|0,se=se+Math.imul(rt,At)|0,te=te+Math.imul(rt,ar)|0,ue=ue+Math.imul(Le,nt)|0,se=se+Math.imul(Le,ot)|0,se=se+Math.imul(ze,nt)|0,te=te+Math.imul(ze,ot)|0,ue=ue+Math.imul(Oe,mt)|0,se=se+Math.imul(Oe,vt)|0,se=se+Math.imul(Ke,mt)|0,te=te+Math.imul(Ke,vt)|0;var on=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(on>>>26)|0,on&=67108863,ue=Math.imul(Ge,Ye),se=Math.imul(Ge,Fe),se=se+Math.imul(De,Ye)|0,te=Math.imul(De,Fe),ue=ue+Math.imul(Rt,pt)|0,se=se+Math.imul(Rt,St)|0,se=se+Math.imul($t,pt)|0,te=te+Math.imul($t,St)|0,ue=ue+Math.imul(bt,At)|0,se=se+Math.imul(bt,ar)|0,se=se+Math.imul(xt,At)|0,te=te+Math.imul(xt,ar)|0,ue=ue+Math.imul(Qe,nt)|0,se=se+Math.imul(Qe,ot)|0,se=se+Math.imul(rt,nt)|0,te=te+Math.imul(rt,ot)|0,ue=ue+Math.imul(Le,mt)|0,se=se+Math.imul(Le,vt)|0,se=se+Math.imul(ze,mt)|0,te=te+Math.imul(ze,vt)|0;var gn=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(gn>>>26)|0,gn&=67108863,ue=Math.imul(Ge,pt),se=Math.imul(Ge,St),se=se+Math.imul(De,pt)|0,te=Math.imul(De,St),ue=ue+Math.imul(Rt,At)|0,se=se+Math.imul(Rt,ar)|0,se=se+Math.imul($t,At)|0,te=te+Math.imul($t,ar)|0,ue=ue+Math.imul(bt,nt)|0,se=se+Math.imul(bt,ot)|0,se=se+Math.imul(xt,nt)|0,te=te+Math.imul(xt,ot)|0,ue=ue+Math.imul(Qe,mt)|0,se=se+Math.imul(Qe,vt)|0,se=se+Math.imul(rt,mt)|0,te=te+Math.imul(rt,vt)|0;var wn=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(wn>>>26)|0,wn&=67108863,ue=Math.imul(Ge,At),se=Math.imul(Ge,ar),se=se+Math.imul(De,At)|0,te=Math.imul(De,ar),ue=ue+Math.imul(Rt,nt)|0,se=se+Math.imul(Rt,ot)|0,se=se+Math.imul($t,nt)|0,te=te+Math.imul($t,ot)|0,ue=ue+Math.imul(bt,mt)|0,se=se+Math.imul(bt,vt)|0,se=se+Math.imul(xt,mt)|0,te=te+Math.imul(xt,vt)|0;var _n=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(_n>>>26)|0,_n&=67108863,ue=Math.imul(Ge,nt),se=Math.imul(Ge,ot),se=se+Math.imul(De,nt)|0,te=Math.imul(De,ot),ue=ue+Math.imul(Rt,mt)|0,se=se+Math.imul(Rt,vt)|0,se=se+Math.imul($t,mt)|0,te=te+Math.imul($t,vt)|0;var vn=(ce+ue|0)+((se&8191)<<13)|0;ce=(te+(se>>>13)|0)+(vn>>>26)|0,vn&=67108863,ue=Math.imul(Ge,mt),se=Math.imul(Ge,vt),se=se+Math.imul(De,mt)|0,te=Math.imul(De,vt);var En=(ce+ue|0)+((se&8191)<<13)|0;return ce=(te+(se>>>13)|0)+(En>>>26)|0,En&=67108863,Z[0]=Ct,Z[1]=Pt,Z[2]=It,Z[3]=Nt,Z[4]=Dt,Z[5]=Ht,Z[6]=Zt,Z[7]=nr,Z[8]=Xt,Z[9]=Qt,Z[10]=gr,Z[11]=sn,Z[12]=an,Z[13]=on,Z[14]=gn,Z[15]=wn,Z[16]=_n,Z[17]=vn,Z[18]=En,ce!==0&&(Z[19]=ce,q.length++),q};Math.imul||(M=N);function O(we,G,J){J.negative=G.negative^we.negative,J.length=we.length+G.length;for(var q=0,H=0,ve=0;ve<J.length-1;ve++){var Z=H;H=0;for(var ce=q&67108863,ue=Math.min(ve,G.length-1),se=Math.max(0,ve-we.length+1);se<=ue;se++){var te=ve-se,Y=we.words[te]|0,be=G.words[se]|0,ye=Y*be,Ie=ye&67108863;Z=Z+(ye/67108864|0)|0,Ie=Ie+ce|0,ce=Ie&67108863,Z=Z+(Ie>>>26)|0,H+=Z>>>26,Z&=67108863}J.words[ve]=ce,q=Z,Z=H}return q!==0?J.words[ve]=q:J.length--,J.strip()}function L(we,G,J){var q=new F;return q.mulp(we,G,J)}S.prototype.mulTo=function(G,J){var q,H=this.length+G.length;return this.length===10&&G.length===10?q=M(this,G,J):H<63?q=N(this,G,J):H<1024?q=O(this,G,J):q=L(this,G,J),q};function F(we,G){this.x=we,this.y=G}F.prototype.makeRBT=function(G){for(var J=new Array(G),q=S.prototype._countBits(G)-1,H=0;H<G;H++)J[H]=this.revBin(H,q,G);return J},F.prototype.revBin=function(G,J,q){if(G===0||G===q-1)return G;for(var H=0,ve=0;ve<J;ve++)H|=(G&1)<<J-ve-1,G>>=1;return H},F.prototype.permute=function(G,J,q,H,ve,Z){for(var ce=0;ce<Z;ce++)H[ce]=J[G[ce]],ve[ce]=q[G[ce]]},F.prototype.transform=function(G,J,q,H,ve,Z){this.permute(Z,G,J,q,H,ve);for(var ce=1;ce<ve;ce<<=1)for(var ue=ce<<1,se=Math.cos(2*Math.PI/ue),te=Math.sin(2*Math.PI/ue),Y=0;Y<ve;Y+=ue)for(var be=se,ye=te,Ie=0;Ie<ce;Ie++){var ke=q[Y+Ie],Ce=H[Y+Ie],Ae=q[Y+Ie+ce],Ne=H[Y+Ie+ce],We=be*Ae-ye*Ne;Ne=be*Ne+ye*Ae,Ae=We,q[Y+Ie]=ke+Ae,H[Y+Ie]=Ce+Ne,q[Y+Ie+ce]=ke-Ae,H[Y+Ie+ce]=Ce-Ne,Ie!==ue&&(We=se*be-te*ye,ye=se*ye+te*be,be=We)}},F.prototype.guessLen13b=function(G,J){var q=Math.max(J,G)|1,H=q&1,ve=0;for(q=q/2|0;q;q=q>>>1)ve++;return 1<<ve+1+H},F.prototype.conjugate=function(G,J,q){if(!(q<=1))for(var H=0;H<q/2;H++){var ve=G[H];G[H]=G[q-H-1],G[q-H-1]=ve,ve=J[H],J[H]=-J[q-H-1],J[q-H-1]=-ve}},F.prototype.normalize13b=function(G,J){for(var q=0,H=0;H<J/2;H++){var ve=Math.round(G[2*H+1]/J)*8192+Math.round(G[2*H]/J)+q;G[H]=ve&67108863,ve<67108864?q=0:q=ve/67108864|0}return G},F.prototype.convert13b=function(G,J,q,H){for(var ve=0,Z=0;Z<J;Z++)ve=ve+(G[Z]|0),q[2*Z]=ve&8191,ve=ve>>>13,q[2*Z+1]=ve&8191,ve=ve>>>13;for(Z=2*J;Z<H;++Z)q[Z]=0;_(ve===0),_((ve&-8192)===0)},F.prototype.stub=function(G){for(var J=new Array(G),q=0;q<G;q++)J[q]=0;return J},F.prototype.mulp=function(G,J,q){var H=2*this.guessLen13b(G.length,J.length),ve=this.makeRBT(H),Z=this.stub(H),ce=new Array(H),ue=new Array(H),se=new Array(H),te=new Array(H),Y=new Array(H),be=new Array(H),ye=q.words;ye.length=H,this.convert13b(G.words,G.length,ce,H),this.convert13b(J.words,J.length,te,H),this.transform(ce,Z,ue,se,H,ve),this.transform(te,Z,Y,be,H,ve);for(var Ie=0;Ie<H;Ie++){var ke=ue[Ie]*Y[Ie]-se[Ie]*be[Ie];se[Ie]=ue[Ie]*be[Ie]+se[Ie]*Y[Ie],ue[Ie]=ke}return this.conjugate(ue,se,H),this.transform(ue,se,ye,Z,H,ve),this.conjugate(ye,Z,H),this.normalize13b(ye,H),q.negative=G.negative^J.negative,q.length=G.length+J.length,q.strip()},S.prototype.mul=function(G){var J=new S(null);return J.words=new Array(this.length+G.length),this.mulTo(G,J)},S.prototype.mulf=function(G){var J=new S(null);return J.words=new Array(this.length+G.length),L(this,G,J)},S.prototype.imul=function(G){return this.clone().mulTo(G,this)},S.prototype.imuln=function(G){_(typeof G=="number"),_(G<67108864);for(var J=0,q=0;q<this.length;q++){var H=(this.words[q]|0)*G,ve=(H&67108863)+(J&67108863);J>>=26,J+=H/67108864|0,J+=ve>>>26,this.words[q]=ve&67108863}return J!==0&&(this.words[q]=J,this.length++),this},S.prototype.muln=function(G){return this.clone().imuln(G)},S.prototype.sqr=function(){return this.mul(this)},S.prototype.isqr=function(){return this.imul(this.clone())},S.prototype.pow=function(G){var J=D(G);if(J.length===0)return new S(1);for(var q=this,H=0;H<J.length&&J[H]===0;H++,q=q.sqr());if(++H<J.length)for(var ve=q.sqr();H<J.length;H++,ve=ve.sqr())J[H]!==0&&(q=q.mul(ve));return q},S.prototype.iushln=function(G){_(typeof G=="number"&&G>=0);var J=G%26,q=(G-J)/26,H=67108863>>>26-J<<26-J,ve;if(J!==0){var Z=0;for(ve=0;ve<this.length;ve++){var ce=this.words[ve]&H,ue=(this.words[ve]|0)-ce<<J;this.words[ve]=ue|Z,Z=ce>>>26-J}Z&&(this.words[ve]=Z,this.length++)}if(q!==0){for(ve=this.length-1;ve>=0;ve--)this.words[ve+q]=this.words[ve];for(ve=0;ve<q;ve++)this.words[ve]=0;this.length+=q}return this.strip()},S.prototype.ishln=function(G){return _(this.negative===0),this.iushln(G)},S.prototype.iushrn=function(G,J,q){_(typeof G=="number"&&G>=0);var H;J?H=(J-J%26)/26:H=0;var ve=G%26,Z=Math.min((G-ve)/26,this.length),ce=67108863^67108863>>>ve<<ve,ue=q;if(H-=Z,H=Math.max(0,H),ue){for(var se=0;se<Z;se++)ue.words[se]=this.words[se];ue.length=Z}if(Z!==0)if(this.length>Z)for(this.length-=Z,se=0;se<this.length;se++)this.words[se]=this.words[se+Z];else this.words[0]=0,this.length=1;var te=0;for(se=this.length-1;se>=0&&(te!==0||se>=H);se--){var Y=this.words[se]|0;this.words[se]=te<<26-ve|Y>>>ve,te=Y&ce}return ue&&te!==0&&(ue.words[ue.length++]=te),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},S.prototype.ishrn=function(G,J,q){return _(this.negative===0),this.iushrn(G,J,q)},S.prototype.shln=function(G){return this.clone().ishln(G)},S.prototype.ushln=function(G){return this.clone().iushln(G)},S.prototype.shrn=function(G){return this.clone().ishrn(G)},S.prototype.ushrn=function(G){return this.clone().iushrn(G)},S.prototype.testn=function(G){_(typeof G=="number"&&G>=0);var J=G%26,q=(G-J)/26,H=1<<J;if(this.length<=q)return!1;var ve=this.words[q];return!!(ve&H)},S.prototype.imaskn=function(G){_(typeof G=="number"&&G>=0);var J=G%26,q=(G-J)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=q)return this;if(J!==0&&q++,this.length=Math.min(q,this.length),J!==0){var H=67108863^67108863>>>J<<J;this.words[this.length-1]&=H}return this.strip()},S.prototype.maskn=function(G){return this.clone().imaskn(G)},S.prototype.iaddn=function(G){return _(typeof G=="number"),_(G<67108864),G<0?this.isubn(-G):this.negative!==0?this.length===1&&(this.words[0]|0)<G?(this.words[0]=G-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(G),this.negative=1,this):this._iaddn(G)},S.prototype._iaddn=function(G){this.words[0]+=G;for(var J=0;J<this.length&&this.words[J]>=67108864;J++)this.words[J]-=67108864,J===this.length-1?this.words[J+1]=1:this.words[J+1]++;return this.length=Math.max(this.length,J+1),this},S.prototype.isubn=function(G){if(_(typeof G=="number"),_(G<67108864),G<0)return this.iaddn(-G);if(this.negative!==0)return this.negative=0,this.iaddn(G),this.negative=1,this;if(this.words[0]-=G,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var J=0;J<this.length&&this.words[J]<0;J++)this.words[J]+=67108864,this.words[J+1]-=1;return this.strip()},S.prototype.addn=function(G){return this.clone().iaddn(G)},S.prototype.subn=function(G){return this.clone().isubn(G)},S.prototype.iabs=function(){return this.negative=0,this},S.prototype.abs=function(){return this.clone().iabs()},S.prototype._ishlnsubmul=function(G,J,q){var H=G.length+q,ve;this._expand(H);var Z,ce=0;for(ve=0;ve<G.length;ve++){Z=(this.words[ve+q]|0)+ce;var ue=(G.words[ve]|0)*J;Z-=ue&67108863,ce=(Z>>26)-(ue/67108864|0),this.words[ve+q]=Z&67108863}for(;ve<this.length-q;ve++)Z=(this.words[ve+q]|0)+ce,ce=Z>>26,this.words[ve+q]=Z&67108863;if(ce===0)return this.strip();for(_(ce===-1),ce=0,ve=0;ve<this.length;ve++)Z=-(this.words[ve]|0)+ce,ce=Z>>26,this.words[ve]=Z&67108863;return this.negative=1,this.strip()},S.prototype._wordDiv=function(G,J){var q=this.length-G.length,H=this.clone(),ve=G,Z=ve.words[ve.length-1]|0,ce=this._countBits(Z);q=26-ce,q!==0&&(ve=ve.ushln(q),H.iushln(q),Z=ve.words[ve.length-1]|0);var ue=H.length-ve.length,se;if(J!=="mod"){se=new S(null),se.length=ue+1,se.words=new Array(se.length);for(var te=0;te<se.length;te++)se.words[te]=0}var Y=H.clone()._ishlnsubmul(ve,1,ue);Y.negative===0&&(H=Y,se&&(se.words[ue]=1));for(var be=ue-1;be>=0;be--){var ye=(H.words[ve.length+be]|0)*67108864+(H.words[ve.length+be-1]|0);for(ye=Math.min(ye/Z|0,67108863),H._ishlnsubmul(ve,ye,be);H.negative!==0;)ye--,H.negative=0,H._ishlnsubmul(ve,1,be),H.isZero()||(H.negative^=1);se&&(se.words[be]=ye)}return se&&se.strip(),H.strip(),J!=="div"&&q!==0&&H.iushrn(q),{div:se||null,mod:H}},S.prototype.divmod=function(G,J,q){if(_(!G.isZero()),this.isZero())return{div:new S(0),mod:new S(0)};var H,ve,Z;return this.negative!==0&&G.negative===0?(Z=this.neg().divmod(G,J),J!=="mod"&&(H=Z.div.neg()),J!=="div"&&(ve=Z.mod.neg(),q&&ve.negative!==0&&ve.iadd(G)),{div:H,mod:ve}):this.negative===0&&G.negative!==0?(Z=this.divmod(G.neg(),J),J!=="mod"&&(H=Z.div.neg()),{div:H,mod:Z.mod}):this.negative&G.negative?(Z=this.neg().divmod(G.neg(),J),J!=="div"&&(ve=Z.mod.neg(),q&&ve.negative!==0&&ve.isub(G)),{div:Z.div,mod:ve}):G.length>this.length||this.cmp(G)<0?{div:new S(0),mod:this}:G.length===1?J==="div"?{div:this.divn(G.words[0]),mod:null}:J==="mod"?{div:null,mod:new S(this.modn(G.words[0]))}:{div:this.divn(G.words[0]),mod:new S(this.modn(G.words[0]))}:this._wordDiv(G,J)},S.prototype.div=function(G){return this.divmod(G,"div",!1).div},S.prototype.mod=function(G){return this.divmod(G,"mod",!1).mod},S.prototype.umod=function(G){return this.divmod(G,"mod",!0).mod},S.prototype.divRound=function(G){var J=this.divmod(G);if(J.mod.isZero())return J.div;var q=J.div.negative!==0?J.mod.isub(G):J.mod,H=G.ushrn(1),ve=G.andln(1),Z=q.cmp(H);return Z<0||ve===1&&Z===0?J.div:J.div.negative!==0?J.div.isubn(1):J.div.iaddn(1)},S.prototype.modn=function(G){_(G<=67108863);for(var J=(1<<26)%G,q=0,H=this.length-1;H>=0;H--)q=(J*q+(this.words[H]|0))%G;return q},S.prototype.idivn=function(G){_(G<=67108863);for(var J=0,q=this.length-1;q>=0;q--){var H=(this.words[q]|0)+J*67108864;this.words[q]=H/G|0,J=H%G}return this.strip()},S.prototype.divn=function(G){return this.clone().idivn(G)},S.prototype.egcd=function(G){_(G.negative===0),_(!G.isZero());var J=this,q=G.clone();J.negative!==0?J=J.umod(G):J=J.clone();for(var H=new S(1),ve=new S(0),Z=new S(0),ce=new S(1),ue=0;J.isEven()&&q.isEven();)J.iushrn(1),q.iushrn(1),++ue;for(var se=q.clone(),te=J.clone();!J.isZero();){for(var Y=0,be=1;!(J.words[0]&be)&&Y<26;++Y,be<<=1);if(Y>0)for(J.iushrn(Y);Y-- >0;)(H.isOdd()||ve.isOdd())&&(H.iadd(se),ve.isub(te)),H.iushrn(1),ve.iushrn(1);for(var ye=0,Ie=1;!(q.words[0]&Ie)&&ye<26;++ye,Ie<<=1);if(ye>0)for(q.iushrn(ye);ye-- >0;)(Z.isOdd()||ce.isOdd())&&(Z.iadd(se),ce.isub(te)),Z.iushrn(1),ce.iushrn(1);J.cmp(q)>=0?(J.isub(q),H.isub(Z),ve.isub(ce)):(q.isub(J),Z.isub(H),ce.isub(ve))}return{a:Z,b:ce,gcd:q.iushln(ue)}},S.prototype._invmp=function(G){_(G.negative===0),_(!G.isZero());var J=this,q=G.clone();J.negative!==0?J=J.umod(G):J=J.clone();for(var H=new S(1),ve=new S(0),Z=q.clone();J.cmpn(1)>0&&q.cmpn(1)>0;){for(var ce=0,ue=1;!(J.words[0]&ue)&&ce<26;++ce,ue<<=1);if(ce>0)for(J.iushrn(ce);ce-- >0;)H.isOdd()&&H.iadd(Z),H.iushrn(1);for(var se=0,te=1;!(q.words[0]&te)&&se<26;++se,te<<=1);if(se>0)for(q.iushrn(se);se-- >0;)ve.isOdd()&&ve.iadd(Z),ve.iushrn(1);J.cmp(q)>=0?(J.isub(q),H.isub(ve)):(q.isub(J),ve.isub(H))}var Y;return J.cmpn(1)===0?Y=H:Y=ve,Y.cmpn(0)<0&&Y.iadd(G),Y},S.prototype.gcd=function(G){if(this.isZero())return G.abs();if(G.isZero())return this.abs();var J=this.clone(),q=G.clone();J.negative=0,q.negative=0;for(var H=0;J.isEven()&&q.isEven();H++)J.iushrn(1),q.iushrn(1);do{for(;J.isEven();)J.iushrn(1);for(;q.isEven();)q.iushrn(1);var ve=J.cmp(q);if(ve<0){var Z=J;J=q,q=Z}else if(ve===0||q.cmpn(1)===0)break;J.isub(q)}while(!0);return q.iushln(H)},S.prototype.invm=function(G){return this.egcd(G).a.umod(G)},S.prototype.isEven=function(){return(this.words[0]&1)===0},S.prototype.isOdd=function(){return(this.words[0]&1)===1},S.prototype.andln=function(G){return this.words[0]&G},S.prototype.bincn=function(G){_(typeof G=="number");var J=G%26,q=(G-J)/26,H=1<<J;if(this.length<=q)return this._expand(q+1),this.words[q]|=H,this;for(var ve=H,Z=q;ve!==0&&Z<this.length;Z++){var ce=this.words[Z]|0;ce+=ve,ve=ce>>>26,ce&=67108863,this.words[Z]=ce}return ve!==0&&(this.words[Z]=ve,this.length++),this},S.prototype.isZero=function(){return this.length===1&&this.words[0]===0},S.prototype.cmpn=function(G){var J=G<0;if(this.negative!==0&&!J)return-1;if(this.negative===0&&J)return 1;this.strip();var q;if(this.length>1)q=1;else{J&&(G=-G),_(G<=67108863,"Number is too big");var H=this.words[0]|0;q=H===G?0:H<G?-1:1}return this.negative!==0?-q|0:q},S.prototype.cmp=function(G){if(this.negative!==0&&G.negative===0)return-1;if(this.negative===0&&G.negative!==0)return 1;var J=this.ucmp(G);return this.negative!==0?-J|0:J},S.prototype.ucmp=function(G){if(this.length>G.length)return 1;if(this.length<G.length)return-1;for(var J=0,q=this.length-1;q>=0;q--){var H=this.words[q]|0,ve=G.words[q]|0;if(H!==ve){H<ve?J=-1:H>ve&&(J=1);break}}return J},S.prototype.gtn=function(G){return this.cmpn(G)===1},S.prototype.gt=function(G){return this.cmp(G)===1},S.prototype.gten=function(G){return this.cmpn(G)>=0},S.prototype.gte=function(G){return this.cmp(G)>=0},S.prototype.ltn=function(G){return this.cmpn(G)===-1},S.prototype.lt=function(G){return this.cmp(G)===-1},S.prototype.lten=function(G){return this.cmpn(G)<=0},S.prototype.lte=function(G){return this.cmp(G)<=0},S.prototype.eqn=function(G){return this.cmpn(G)===0},S.prototype.eq=function(G){return this.cmp(G)===0},S.red=function(G){return new fe(G)},S.prototype.toRed=function(G){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),G.convertTo(this)._forceRed(G)},S.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},S.prototype._forceRed=function(G){return this.red=G,this},S.prototype.forceRed=function(G){return _(!this.red,"Already a number in reduction context"),this._forceRed(G)},S.prototype.redAdd=function(G){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,G)},S.prototype.redIAdd=function(G){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,G)},S.prototype.redSub=function(G){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,G)},S.prototype.redISub=function(G){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,G)},S.prototype.redShl=function(G){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,G)},S.prototype.redMul=function(G){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,G),this.red.mul(this,G)},S.prototype.redIMul=function(G){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,G),this.red.imul(this,G)},S.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},S.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},S.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},S.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},S.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},S.prototype.redPow=function(G){return _(this.red&&!G.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,G)};var U={k256:null,p224:null,p192:null,p25519:null};function j(we,G){this.name=we,this.p=new S(G,16),this.n=this.p.bitLength(),this.k=new S(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var G=new S(null);return G.words=new Array(Math.ceil(this.n/13)),G},j.prototype.ireduce=function(G){var J=G,q;do this.split(J,this.tmp),J=this.imulK(J),J=J.iadd(this.tmp),q=J.bitLength();while(q>this.n);var H=q<this.n?-1:J.ucmp(this.p);return H===0?(J.words[0]=0,J.length=1):H>0?J.isub(this.p):J.strip!==void 0?J.strip():J._strip(),J},j.prototype.split=function(G,J){G.iushrn(this.n,0,J)},j.prototype.imulK=function(G){return G.imul(this.k)};function z(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}x(z,j),z.prototype.split=function(G,J){for(var q=4194303,H=Math.min(G.length,9),ve=0;ve<H;ve++)J.words[ve]=G.words[ve];if(J.length=H,G.length<=9){G.words[0]=0,G.length=1;return}var Z=G.words[9];for(J.words[J.length++]=Z&q,ve=10;ve<G.length;ve++){var ce=G.words[ve]|0;G.words[ve-10]=(ce&q)<<4|Z>>>22,Z=ce}Z>>>=22,G.words[ve-10]=Z,Z===0&&G.length>10?G.length-=10:G.length-=9},z.prototype.imulK=function(G){G.words[G.length]=0,G.words[G.length+1]=0,G.length+=2;for(var J=0,q=0;q<G.length;q++){var H=G.words[q]|0;J+=H*977,G.words[q]=J&67108863,J=H*64+(J/67108864|0)}return G.words[G.length-1]===0&&(G.length--,G.words[G.length-1]===0&&G.length--),G};function W(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}x(W,j);function X(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}x(X,j);function ie(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}x(ie,j),ie.prototype.imulK=function(G){for(var J=0,q=0;q<G.length;q++){var H=(G.words[q]|0)*19+J,ve=H&67108863;H>>>=26,G.words[q]=ve,J=H}return J!==0&&(G.words[G.length++]=J),G},S._prime=function(G){if(U[G])return U[G];var J;if(G==="k256")J=new z;else if(G==="p224")J=new W;else if(G==="p192")J=new X;else if(G==="p25519")J=new ie;else throw new Error("Unknown prime "+G);return U[G]=J,J};function fe(we){if(typeof we=="string"){var G=S._prime(we);this.m=G.p,this.prime=G}else _(we.gtn(1),"modulus must be greater than 1"),this.m=we,this.prime=null}fe.prototype._verify1=function(G){_(G.negative===0,"red works only with positives"),_(G.red,"red works only with red numbers")},fe.prototype._verify2=function(G,J){_((G.negative|J.negative)===0,"red works only with positives"),_(G.red&&G.red===J.red,"red works only with red numbers")},fe.prototype.imod=function(G){return this.prime?this.prime.ireduce(G)._forceRed(this):G.umod(this.m)._forceRed(this)},fe.prototype.neg=function(G){return G.isZero()?G.clone():this.m.sub(G)._forceRed(this)},fe.prototype.add=function(G,J){this._verify2(G,J);var q=G.add(J);return q.cmp(this.m)>=0&&q.isub(this.m),q._forceRed(this)},fe.prototype.iadd=function(G,J){this._verify2(G,J);var q=G.iadd(J);return q.cmp(this.m)>=0&&q.isub(this.m),q},fe.prototype.sub=function(G,J){this._verify2(G,J);var q=G.sub(J);return q.cmpn(0)<0&&q.iadd(this.m),q._forceRed(this)},fe.prototype.isub=function(G,J){this._verify2(G,J);var q=G.isub(J);return q.cmpn(0)<0&&q.iadd(this.m),q},fe.prototype.shl=function(G,J){return this._verify1(G),this.imod(G.ushln(J))},fe.prototype.imul=function(G,J){return this._verify2(G,J),this.imod(G.imul(J))},fe.prototype.mul=function(G,J){return this._verify2(G,J),this.imod(G.mul(J))},fe.prototype.isqr=function(G){return this.imul(G,G.clone())},fe.prototype.sqr=function(G){return this.mul(G,G)},fe.prototype.sqrt=function(G){if(G.isZero())return G.clone();var J=this.m.andln(3);if(_(J%2===1),J===3){var q=this.m.add(new S(1)).iushrn(2);return this.pow(G,q)}for(var H=this.m.subn(1),ve=0;!H.isZero()&&H.andln(1)===0;)ve++,H.iushrn(1);_(!H.isZero());var Z=new S(1).toRed(this),ce=Z.redNeg(),ue=this.m.subn(1).iushrn(1),se=this.m.bitLength();for(se=new S(2*se*se).toRed(this);this.pow(se,ue).cmp(ce)!==0;)se.redIAdd(ce);for(var te=this.pow(se,H),Y=this.pow(G,H.addn(1).iushrn(1)),be=this.pow(G,H),ye=ve;be.cmp(Z)!==0;){for(var Ie=be,ke=0;Ie.cmp(Z)!==0;ke++)Ie=Ie.redSqr();_(ke<ye);var Ce=this.pow(te,new S(1).iushln(ye-ke-1));Y=Y.redMul(Ce),te=Ce.redSqr(),be=be.redMul(te),ye=ke}return Y},fe.prototype.invm=function(G){var J=G._invmp(this.m);return J.negative!==0?(J.negative=0,this.imod(J).redNeg()):this.imod(J)},fe.prototype.pow=function(G,J){if(J.isZero())return new S(1).toRed(this);if(J.cmpn(1)===0)return G.clone();var q=4,H=new Array(1<<q);H[0]=new S(1).toRed(this),H[1]=G;for(var ve=2;ve<H.length;ve++)H[ve]=this.mul(H[ve-1],G);var Z=H[0],ce=0,ue=0,se=J.bitLength()%26;for(se===0&&(se=26),ve=J.length-1;ve>=0;ve--){for(var te=J.words[ve],Y=se-1;Y>=0;Y--){var be=te>>Y&1;if(Z!==H[0]&&(Z=this.sqr(Z)),be===0&&ce===0){ue=0;continue}ce<<=1,ce|=be,ue++,!(ue!==q&&(ve!==0||Y!==0))&&(Z=this.mul(Z,H[ce]),ue=0,ce=0)}se=26}return Z},fe.prototype.convertTo=function(G){var J=G.umod(this.m);return J===G?J.clone():J},fe.prototype.convertFrom=function(G){var J=G.clone();return J.red=null,J},S.mont=function(G){return new xe(G)};function xe(we){fe.call(this,we),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new S(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x(xe,fe),xe.prototype.convertTo=function(G){return this.imod(G.ushln(this.shift))},xe.prototype.convertFrom=function(G){var J=this.imod(G.mul(this.rinv));return J.red=null,J},xe.prototype.imul=function(G,J){if(G.isZero()||J.isZero())return G.words[0]=0,G.length=1,G;var q=G.imul(J),H=q.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ve=q.isub(H).iushrn(this.shift),Z=ve;return ve.cmp(this.m)>=0?Z=ve.isub(this.m):ve.cmpn(0)<0&&(Z=ve.iadd(this.m)),Z._forceRed(this)},xe.prototype.mul=function(G,J){if(G.isZero()||J.isZero())return new S(0)._forceRed(this);var q=G.mul(J),H=q.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ve=q.isub(H).iushrn(this.shift),Z=ve;return ve.cmp(this.m)>=0?Z=ve.isub(this.m):ve.cmpn(0)<0&&(Z=ve.iadd(this.m)),Z._forceRed(this)},xe.prototype.invm=function(G){var J=this.imod(G._invmp(this.m).mul(this.r2));return J._forceRed(this)}})(n,bn$4)}(bn$5)),bn$5.exports}var brorand={exports:{}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;hasRequiredBrorand=1;var n;brorand.exports=function(x){return n||(n=new r(null)),n.generate(x)};function r(_){this.rand=_}if(brorand.exports.Rand=r,r.prototype.generate=function(x){return this._rand(x)},r.prototype._rand=function(x){if(this.rand.getBytes)return this.rand.getBytes(x);for(var S=new Uint8Array(x),E=0;E<S.length;E++)S[E]=this.rand.getByte();return S},typeof self=="object")self.crypto&&self.crypto.getRandomValues?r.prototype._rand=function(x){var S=new Uint8Array(x);return self.crypto.getRandomValues(S),S}:self.msCrypto&&self.msCrypto.getRandomValues?r.prototype._rand=function(x){var S=new Uint8Array(x);return self.msCrypto.getRandomValues(S),S}:typeof window=="object"&&(r.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var g=requireCryptoBrowserify();if(typeof g.randomBytes!="function")throw new Error("Not supported");r.prototype._rand=function(x){return g.randomBytes(x)}}catch{}return brorand.exports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var n=requireBn$2(),r=requireBrorand();function g(_){this.rand=_||new r.Rand}return mr=g,g.create=function(x){return new g(x)},g.prototype._randbelow=function(x){var S=x.bitLength(),E=Math.ceil(S/8);do var C=new n(this.rand.generate(E));while(C.cmp(x)>=0);return C},g.prototype._randrange=function(x,S){var E=S.sub(x);return x.add(this._randbelow(E))},g.prototype.test=function(x,S,E){var C=x.bitLength(),T=n.mont(x),R=new n(1).toRed(T);S||(S=Math.max(1,C/48|0));for(var A=x.subn(1),I=0;!A.testn(I);I++);for(var B=x.shrn(I),D=A.toRed(T),N=!0;S>0;S--){var M=this._randrange(new n(2),A);E&&E(M);var O=M.toRed(T).redPow(B);if(!(O.cmp(R)===0||O.cmp(D)===0)){for(var L=1;L<I;L++){if(O=O.redSqr(),O.cmp(R)===0)return!1;if(O.cmp(D)===0)break}if(L===I)return!1}}return N},g.prototype.getDivisor=function(x,S){var E=x.bitLength(),C=n.mont(x),T=new n(1).toRed(C);S||(S=Math.max(1,E/48|0));for(var R=x.subn(1),A=0;!R.testn(A);A++);for(var I=x.shrn(A),B=R.toRed(C);S>0;S--){var D=this._randrange(new n(2),R),N=x.gcd(D);if(N.cmpn(1)!==0)return N;var M=D.toRed(C).redPow(I);if(!(M.cmp(T)===0||M.cmp(B)===0)){for(var O=1;O<A;O++){if(M=M.redSqr(),M.cmp(T)===0)return M.fromRed().subn(1).gcd(x);if(M.cmp(B)===0)break}if(O===A)return M=M.redSqr(),M.fromRed().subn(1).gcd(x)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var n=requireBrowser$c();generatePrime=O,O.simpleSieve=N,O.fermatTest=M;var r=requireBn$2(),g=new r(24),_=requireMr(),x=new _,S=new r(1),E=new r(2),C=new r(5);new r(16),new r(8);var T=new r(10),R=new r(3);new r(7);var A=new r(11),I=new r(4);new r(12);var B=null;function D(){if(B!==null)return B;var L=1048576,F=[];F[0]=2;for(var U=1,j=3;j<L;j+=2){for(var z=Math.ceil(Math.sqrt(j)),W=0;W<U&&F[W]<=z&&j%F[W]!==0;W++);U!==W&&F[W]<=z||(F[U++]=j)}return B=F,F}function N(L){for(var F=D(),U=0;U<F.length;U++)if(L.modn(F[U])===0)return L.cmpn(F[U])===0;return!0}function M(L){var F=r.mont(L);return E.toRed(F).redPow(L.subn(1)).fromRed().cmpn(1)===0}function O(L,F){if(L<16)return F===2||F===5?new r([140,123]):new r([140,39]);F=new r(F);for(var U,j;;){for(U=new r(n(Math.ceil(L/8)));U.bitLength()>L;)U.ishrn(1);if(U.isEven()&&U.iadd(S),U.testn(1)||U.iadd(E),F.cmp(E)){if(!F.cmp(C))for(;U.mod(T).cmp(R);)U.iadd(I)}else for(;U.mod(g).cmp(A);)U.iadd(I);if(j=U.shrn(1),N(j)&&N(U)&&M(j)&&M(U)&&x.test(j)&&x.test(U))return U}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var n=requireBn$2(),r=requireMr(),g=new r,_=new n(24),x=new n(11),S=new n(10),E=new n(3),C=new n(7),T=requireGeneratePrime(),R=requireBrowser$c();dh=N;function A(O,L){return L=L||"utf8",Buffer$1.isBuffer(O)||(O=new Buffer$1(O,L)),this._pub=new n(O),this}function I(O,L){return L=L||"utf8",Buffer$1.isBuffer(O)||(O=new Buffer$1(O,L)),this._priv=new n(O),this}var B={};function D(O,L){var F=L.toString("hex"),U=[F,O.toString(16)].join("_");if(U in B)return B[U];var j=0;if(O.isEven()||!T.simpleSieve||!T.fermatTest(O)||!g.test(O))return j+=1,F==="02"||F==="05"?j+=8:j+=4,B[U]=j,j;g.test(O.shrn(1))||(j+=2);var z;switch(F){case"02":O.mod(_).cmp(x)&&(j+=8);break;case"05":z=O.mod(S),z.cmp(E)&&z.cmp(C)&&(j+=8);break;default:j+=4}return B[U]=j,j}function N(O,L,F){this.setGenerator(L),this.__prime=new n(O),this._prime=n.mont(this.__prime),this._primeLen=O.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,F?(this.setPublicKey=A,this.setPrivateKey=I):this._primeCode=8}Object.defineProperty(N.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=D(this.__prime,this.__gen)),this._primeCode}}),N.prototype.generateKeys=function(){return this._priv||(this._priv=new n(R(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},N.prototype.computeSecret=function(O){O=new n(O),O=O.toRed(this._prime);var L=O.redPow(this._priv).fromRed(),F=new Buffer$1(L.toArray()),U=this.getPrime();if(F.length<U.length){var j=new Buffer$1(U.length-F.length);j.fill(0),F=Buffer$1.concat([j,F])}return F},N.prototype.getPublicKey=function(L){return M(this._pub,L)},N.prototype.getPrivateKey=function(L){return M(this._priv,L)},N.prototype.getPrime=function(O){return M(this.__prime,O)},N.prototype.getGenerator=function(O){return M(this._gen,O)},N.prototype.setGenerator=function(O,L){return L=L||"utf8",Buffer$1.isBuffer(O)||(O=new Buffer$1(O,L)),this.__gen=O,this._gen=new n(O),this};function M(O,L){var F=new Buffer$1(O.toArray());return L?F.toString(L):F}return dh}var hasRequiredBrowser$6;function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$7;hasRequiredBrowser$6=1;var n=requireGeneratePrime(),r=require$$1$1,g=requireDh();function _(E){var C=new Buffer$1(r[E].prime,"hex"),T=new Buffer$1(r[E].gen,"hex");return new g(C,T)}var x={binary:!0,hex:!0,base64:!0};function S(E,C,T,R){return Buffer$1.isBuffer(C)||x[C]===void 0?S(E,"binary",C,T):(C=C||"binary",R=R||"binary",T=T||new Buffer$1([2]),Buffer$1.isBuffer(T)||(T=new Buffer$1(T,R)),typeof E=="number"?new g(n(E,T),T,!0):(Buffer$1.isBuffer(E)||(E=new Buffer$1(E,C)),new g(E,T,!0)))}return browser$7.DiffieHellmanGroup=browser$7.createDiffieHellmanGroup=browser$7.getDiffieHellman=_,browser$7.createDiffieHellman=browser$7.DiffieHellman=S,browser$7}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;hasRequiredProcessNextickArgs=1,typeof process$1>"u"||!process$1.version||process$1.version.indexOf("v0.")===0||process$1.version.indexOf("v1.")===0&&process$1.version.indexOf("v1.8.")!==0?processNextickArgs.exports={nextTick:n}:processNextickArgs.exports=process$1;function n(r,g,_,x){if(typeof r!="function")throw new TypeError('"callback" argument must be a function');var S=arguments.length,E,C;switch(S){case 0:case 1:return process$1.nextTick(r);case 2:return process$1.nextTick(function(){r.call(null,g)});case 3:return process$1.nextTick(function(){r.call(null,g,_)});case 4:return process$1.nextTick(function(){r.call(null,g,_,x)});default:for(E=new Array(S-1),C=0;C<E.length;)E[C++]=arguments[C];return process$1.nextTick(function(){r.apply(null,E)})}}return processNextickArgs.exports}var isarray,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var n={}.toString;return isarray=Array.isArray||function(r){return n.call(r)=="[object Array]"},isarray}var streamBrowser,hasRequiredStreamBrowser;function requireStreamBrowser(){return hasRequiredStreamBrowser||(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter),streamBrowser}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(n,r){var g=requireDist(),_=g.Buffer;function x(E,C){for(var T in E)C[T]=E[T]}_.from&&_.alloc&&_.allocUnsafe&&_.allocUnsafeSlow?n.exports=g:(x(g,r),r.Buffer=S);function S(E,C,T){return _(E,C,T)}x(_,S),S.from=function(E,C,T){if(typeof E=="number")throw new TypeError("Argument must not be a number");return _(E,C,T)},S.alloc=function(E,C,T){if(typeof E!="number")throw new TypeError("Argument must be a number");var R=_(E);return C!==void 0?typeof T=="string"?R.fill(C,T):R.fill(C):R.fill(0),R},S.allocUnsafe=function(E){if(typeof E!="number")throw new TypeError("Argument must be a number");return _(E)},S.allocUnsafeSlow=function(E){if(typeof E!="number")throw new TypeError("Argument must be a number");return g.SlowBuffer(E)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util={},hasRequiredUtil;function requireUtil(){if(hasRequiredUtil)return util;hasRequiredUtil=1;function n(M){return Array.isArray?Array.isArray(M):N(M)==="[object Array]"}util.isArray=n;function r(M){return typeof M=="boolean"}util.isBoolean=r;function g(M){return M===null}util.isNull=g;function _(M){return M==null}util.isNullOrUndefined=_;function x(M){return typeof M=="number"}util.isNumber=x;function S(M){return typeof M=="string"}util.isString=S;function E(M){return typeof M=="symbol"}util.isSymbol=E;function C(M){return M===void 0}util.isUndefined=C;function T(M){return N(M)==="[object RegExp]"}util.isRegExp=T;function R(M){return typeof M=="object"&&M!==null}util.isObject=R;function A(M){return N(M)==="[object Date]"}util.isDate=A;function I(M){return N(M)==="[object Error]"||M instanceof Error}util.isError=I;function B(M){return typeof M=="function"}util.isFunction=B;function D(M){return M===null||typeof M=="boolean"||typeof M=="number"||typeof M=="string"||typeof M=="symbol"||typeof M>"u"}util.isPrimitive=D,util.isBuffer=requireDist().Buffer.isBuffer;function N(M){return Object.prototype.toString.call(M)}return util}var BufferList={exports:{}},hasRequiredBufferList;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(n){function r(S,E){if(!(S instanceof E))throw new TypeError("Cannot call a class as a function")}var g=requireSafeBuffer().Buffer,_=requireUtil$1();function x(S,E,C){S.copy(E,C)}n.exports=function(){function S(){r(this,S),this.head=null,this.tail=null,this.length=0}return S.prototype.push=function(C){var T={data:C,next:null};this.length>0?this.tail.next=T:this.head=T,this.tail=T,++this.length},S.prototype.unshift=function(C){var T={data:C,next:this.head};this.length===0&&(this.tail=T),this.head=T,++this.length},S.prototype.shift=function(){if(this.length!==0){var C=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,C}},S.prototype.clear=function(){this.head=this.tail=null,this.length=0},S.prototype.join=function(C){if(this.length===0)return"";for(var T=this.head,R=""+T.data;T=T.next;)R+=C+T.data;return R},S.prototype.concat=function(C){if(this.length===0)return g.alloc(0);for(var T=g.allocUnsafe(C>>>0),R=this.head,A=0;R;)x(R.data,T,A),A+=R.data.length,R=R.next;return T},S}(),_&&_.inspect&&_.inspect.custom&&(n.exports.prototype[_.inspect.custom]=function(){var S=_.inspect({length:this.length});return this.constructor.name+" "+S})}(BufferList)),BufferList.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var n=requireProcessNextickArgs();function r(x,S){var E=this,C=this._readableState&&this._readableState.destroyed,T=this._writableState&&this._writableState.destroyed;return C||T?(S?S(x):x&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(_,this,x)):n.nextTick(_,this,x)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(x||null,function(R){!S&&R?E._writableState?E._writableState.errorEmitted||(E._writableState.errorEmitted=!0,n.nextTick(_,E,R)):n.nextTick(_,E,R):S&&S(R)}),this)}function g(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function _(x,S){x.emit("error",S)}return destroy_1={destroy:r,undestroy:g},destroy_1}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var n=requireProcessNextickArgs();_stream_writable=M;function r(Z){var ce=this;this.next=null,this.entry=null,this.finish=function(){ve(ce,Z)}}var g=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:n.nextTick,_;M.WritableState=D;var x=Object.create(requireUtil());x.inherits=requireInherits_browser();var S={deprecate:requireBrowser$d()},E=requireStreamBrowser(),C=requireSafeBuffer().Buffer,T=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function R(Z){return C.from(Z)}function A(Z){return C.isBuffer(Z)||Z instanceof T}var I=requireDestroy();x.inherits(M,E);function B(){}function D(Z,ce){_=_||require_stream_duplex(),Z=Z||{};var ue=ce instanceof _;this.objectMode=!!Z.objectMode,ue&&(this.objectMode=this.objectMode||!!Z.writableObjectMode);var se=Z.highWaterMark,te=Z.writableHighWaterMark,Y=this.objectMode?16:16*1024;se||se===0?this.highWaterMark=se:ue&&(te||te===0)?this.highWaterMark=te:this.highWaterMark=Y,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var be=Z.decodeStrings===!1;this.decodeStrings=!be,this.defaultEncoding=Z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ye){X(ce,ye)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}D.prototype.getBuffer=function(){for(var ce=this.bufferedRequest,ue=[];ce;)ue.push(ce),ce=ce.next;return ue},function(){try{Object.defineProperty(D.prototype,"buffer",{get:S.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var N;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(N=Function.prototype[Symbol.hasInstance],Object.defineProperty(M,Symbol.hasInstance,{value:function(Z){return N.call(this,Z)?!0:this!==M?!1:Z&&Z._writableState instanceof D}})):N=function(Z){return Z instanceof this};function M(Z){if(_=_||require_stream_duplex(),!N.call(M,this)&&!(this instanceof _))return new M(Z);this._writableState=new D(Z,this),this.writable=!0,Z&&(typeof Z.write=="function"&&(this._write=Z.write),typeof Z.writev=="function"&&(this._writev=Z.writev),typeof Z.destroy=="function"&&(this._destroy=Z.destroy),typeof Z.final=="function"&&(this._final=Z.final)),E.call(this)}M.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function O(Z,ce){var ue=new Error("write after end");Z.emit("error",ue),n.nextTick(ce,ue)}function L(Z,ce,ue,se){var te=!0,Y=!1;return ue===null?Y=new TypeError("May not write null values to stream"):typeof ue!="string"&&ue!==void 0&&!ce.objectMode&&(Y=new TypeError("Invalid non-string/buffer chunk")),Y&&(Z.emit("error",Y),n.nextTick(se,Y),te=!1),te}M.prototype.write=function(Z,ce,ue){var se=this._writableState,te=!1,Y=!se.objectMode&&A(Z);return Y&&!C.isBuffer(Z)&&(Z=R(Z)),typeof ce=="function"&&(ue=ce,ce=null),Y?ce="buffer":ce||(ce=se.defaultEncoding),typeof ue!="function"&&(ue=B),se.ended?O(this,ue):(Y||L(this,se,Z,ue))&&(se.pendingcb++,te=U(this,se,Y,Z,ce,ue)),te},M.prototype.cork=function(){var Z=this._writableState;Z.corked++},M.prototype.uncork=function(){var Z=this._writableState;Z.corked&&(Z.corked--,!Z.writing&&!Z.corked&&!Z.bufferProcessing&&Z.bufferedRequest&&xe(this,Z))},M.prototype.setDefaultEncoding=function(ce){if(typeof ce=="string"&&(ce=ce.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((ce+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+ce);return this._writableState.defaultEncoding=ce,this};function F(Z,ce,ue){return!Z.objectMode&&Z.decodeStrings!==!1&&typeof ce=="string"&&(ce=C.from(ce,ue)),ce}Object.defineProperty(M.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function U(Z,ce,ue,se,te,Y){if(!ue){var be=F(ce,se,te);se!==be&&(ue=!0,te="buffer",se=be)}var ye=ce.objectMode?1:se.length;ce.length+=ye;var Ie=ce.length<ce.highWaterMark;if(Ie||(ce.needDrain=!0),ce.writing||ce.corked){var ke=ce.lastBufferedRequest;ce.lastBufferedRequest={chunk:se,encoding:te,isBuf:ue,callback:Y,next:null},ke?ke.next=ce.lastBufferedRequest:ce.bufferedRequest=ce.lastBufferedRequest,ce.bufferedRequestCount+=1}else j(Z,ce,!1,ye,se,te,Y);return Ie}function j(Z,ce,ue,se,te,Y,be){ce.writelen=se,ce.writecb=be,ce.writing=!0,ce.sync=!0,ue?Z._writev(te,ce.onwrite):Z._write(te,Y,ce.onwrite),ce.sync=!1}function z(Z,ce,ue,se,te){--ce.pendingcb,ue?(n.nextTick(te,se),n.nextTick(q,Z,ce),Z._writableState.errorEmitted=!0,Z.emit("error",se)):(te(se),Z._writableState.errorEmitted=!0,Z.emit("error",se),q(Z,ce))}function W(Z){Z.writing=!1,Z.writecb=null,Z.length-=Z.writelen,Z.writelen=0}function X(Z,ce){var ue=Z._writableState,se=ue.sync,te=ue.writecb;if(W(ue),ce)z(Z,ue,se,ce,te);else{var Y=we(ue);!Y&&!ue.corked&&!ue.bufferProcessing&&ue.bufferedRequest&&xe(Z,ue),se?g(ie,Z,ue,Y,te):ie(Z,ue,Y,te)}}function ie(Z,ce,ue,se){ue||fe(Z,ce),ce.pendingcb--,se(),q(Z,ce)}function fe(Z,ce){ce.length===0&&ce.needDrain&&(ce.needDrain=!1,Z.emit("drain"))}function xe(Z,ce){ce.bufferProcessing=!0;var ue=ce.bufferedRequest;if(Z._writev&&ue&&ue.next){var se=ce.bufferedRequestCount,te=new Array(se),Y=ce.corkedRequestsFree;Y.entry=ue;for(var be=0,ye=!0;ue;)te[be]=ue,ue.isBuf||(ye=!1),ue=ue.next,be+=1;te.allBuffers=ye,j(Z,ce,!0,ce.length,te,"",Y.finish),ce.pendingcb++,ce.lastBufferedRequest=null,Y.next?(ce.corkedRequestsFree=Y.next,Y.next=null):ce.corkedRequestsFree=new r(ce),ce.bufferedRequestCount=0}else{for(;ue;){var Ie=ue.chunk,ke=ue.encoding,Ce=ue.callback,Ae=ce.objectMode?1:Ie.length;if(j(Z,ce,!1,Ae,Ie,ke,Ce),ue=ue.next,ce.bufferedRequestCount--,ce.writing)break}ue===null&&(ce.lastBufferedRequest=null)}ce.bufferedRequest=ue,ce.bufferProcessing=!1}M.prototype._write=function(Z,ce,ue){ue(new Error("_write() is not implemented"))},M.prototype._writev=null,M.prototype.end=function(Z,ce,ue){var se=this._writableState;typeof Z=="function"?(ue=Z,Z=null,ce=null):typeof ce=="function"&&(ue=ce,ce=null),Z!=null&&this.write(Z,ce),se.corked&&(se.corked=1,this.uncork()),se.ending||H(this,se,ue)};function we(Z){return Z.ending&&Z.length===0&&Z.bufferedRequest===null&&!Z.finished&&!Z.writing}function G(Z,ce){Z._final(function(ue){ce.pendingcb--,ue&&Z.emit("error",ue),ce.prefinished=!0,Z.emit("prefinish"),q(Z,ce)})}function J(Z,ce){!ce.prefinished&&!ce.finalCalled&&(typeof Z._final=="function"?(ce.pendingcb++,ce.finalCalled=!0,n.nextTick(G,Z,ce)):(ce.prefinished=!0,Z.emit("prefinish")))}function q(Z,ce){var ue=we(ce);return ue&&(J(Z,ce),ce.pendingcb===0&&(ce.finished=!0,Z.emit("finish"))),ue}function H(Z,ce,ue){ce.ending=!0,q(Z,ce),ue&&(ce.finished?n.nextTick(ue):Z.once("finish",ue)),ce.ended=!0,Z.writable=!1}function ve(Z,ce,ue){var se=Z.entry;for(Z.entry=null;se;){var te=se.callback;ce.pendingcb--,te(ue),se=se.next}ce.corkedRequestsFree.next=Z}return Object.defineProperty(M.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Z){this._writableState&&(this._writableState.destroyed=Z)}}),M.prototype.destroy=I.destroy,M.prototype._undestroy=I.undestroy,M.prototype._destroy=function(Z,ce){this.end(),ce(Z)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var n=requireProcessNextickArgs(),r=Object.keys||function(I){var B=[];for(var D in I)B.push(D);return B};_stream_duplex=T;var g=Object.create(requireUtil());g.inherits=requireInherits_browser();var _=require_stream_readable(),x=require_stream_writable();g.inherits(T,_);for(var S=r(x.prototype),E=0;E<S.length;E++){var C=S[E];T.prototype[C]||(T.prototype[C]=x.prototype[C])}function T(I){if(!(this instanceof T))return new T(I);_.call(this,I),x.call(this,I),I&&I.readable===!1&&(this.readable=!1),I&&I.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,I&&I.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",R)}Object.defineProperty(T.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function R(){this.allowHalfOpen||this._writableState.ended||n.nextTick(A,this)}function A(I){I.end()}return Object.defineProperty(T.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(I){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=I,this._writableState.destroyed=I)}}),T.prototype._destroy=function(I,B){this.push(null),this.end(),n.nextTick(B,I)},_stream_duplex}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var n=requireProcessNextickArgs();_stream_readable=F;var r=requireIsarray(),g;F.ReadableState=L,requireEvents().EventEmitter;var _=function(Ce,Ae){return Ce.listeners(Ae).length},x=requireStreamBrowser(),S=requireSafeBuffer().Buffer,E=(typeof commonjsGlobal<"u"?commonjsGlobal:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function C(Ce){return S.from(Ce)}function T(Ce){return S.isBuffer(Ce)||Ce instanceof E}var R=Object.create(requireUtil());R.inherits=requireInherits_browser();var A=requireUtil$1(),I=void 0;A&&A.debuglog?I=A.debuglog("stream"):I=function(){};var B=requireBufferList(),D=requireDestroy(),N;R.inherits(F,x);var M=["error","close","destroy","pause","resume"];function O(Ce,Ae,Ne){if(typeof Ce.prependListener=="function")return Ce.prependListener(Ae,Ne);!Ce._events||!Ce._events[Ae]?Ce.on(Ae,Ne):r(Ce._events[Ae])?Ce._events[Ae].unshift(Ne):Ce._events[Ae]=[Ne,Ce._events[Ae]]}function L(Ce,Ae){g=g||require_stream_duplex(),Ce=Ce||{};var Ne=Ae instanceof g;this.objectMode=!!Ce.objectMode,Ne&&(this.objectMode=this.objectMode||!!Ce.readableObjectMode);var We=Ce.highWaterMark,Be=Ce.readableHighWaterMark,Se=this.objectMode?16:16*1024;We||We===0?this.highWaterMark=We:Ne&&(Be||Be===0)?this.highWaterMark=Be:this.highWaterMark=Se,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new B,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=Ce.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ce.encoding&&(N||(N=requireString_decoder().StringDecoder),this.decoder=new N(Ce.encoding),this.encoding=Ce.encoding)}function F(Ce){if(g=g||require_stream_duplex(),!(this instanceof F))return new F(Ce);this._readableState=new L(Ce,this),this.readable=!0,Ce&&(typeof Ce.read=="function"&&(this._read=Ce.read),typeof Ce.destroy=="function"&&(this._destroy=Ce.destroy)),x.call(this)}Object.defineProperty(F.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(Ce){this._readableState&&(this._readableState.destroyed=Ce)}}),F.prototype.destroy=D.destroy,F.prototype._undestroy=D.undestroy,F.prototype._destroy=function(Ce,Ae){this.push(null),Ae(Ce)},F.prototype.push=function(Ce,Ae){var Ne=this._readableState,We;return Ne.objectMode?We=!0:typeof Ce=="string"&&(Ae=Ae||Ne.defaultEncoding,Ae!==Ne.encoding&&(Ce=S.from(Ce,Ae),Ae=""),We=!0),U(this,Ce,Ae,!1,We)},F.prototype.unshift=function(Ce){return U(this,Ce,null,!0,!1)};function U(Ce,Ae,Ne,We,Be){var Se=Ce._readableState;if(Ae===null)Se.reading=!1,xe(Ce,Se);else{var $e;Be||($e=z(Se,Ae)),$e?Ce.emit("error",$e):Se.objectMode||Ae&&Ae.length>0?(typeof Ae!="string"&&!Se.objectMode&&Object.getPrototypeOf(Ae)!==S.prototype&&(Ae=C(Ae)),We?Se.endEmitted?Ce.emit("error",new Error("stream.unshift() after end event")):j(Ce,Se,Ae,!0):Se.ended?Ce.emit("error",new Error("stream.push() after EOF")):(Se.reading=!1,Se.decoder&&!Ne?(Ae=Se.decoder.write(Ae),Se.objectMode||Ae.length!==0?j(Ce,Se,Ae,!1):J(Ce,Se)):j(Ce,Se,Ae,!1))):We||(Se.reading=!1)}return W(Se)}function j(Ce,Ae,Ne,We){Ae.flowing&&Ae.length===0&&!Ae.sync?(Ce.emit("data",Ne),Ce.read(0)):(Ae.length+=Ae.objectMode?1:Ne.length,We?Ae.buffer.unshift(Ne):Ae.buffer.push(Ne),Ae.needReadable&&we(Ce)),J(Ce,Ae)}function z(Ce,Ae){var Ne;return!T(Ae)&&typeof Ae!="string"&&Ae!==void 0&&!Ce.objectMode&&(Ne=new TypeError("Invalid non-string/buffer chunk")),Ne}function W(Ce){return!Ce.ended&&(Ce.needReadable||Ce.length<Ce.highWaterMark||Ce.length===0)}F.prototype.isPaused=function(){return this._readableState.flowing===!1},F.prototype.setEncoding=function(Ce){return N||(N=requireString_decoder().StringDecoder),this._readableState.decoder=new N(Ce),this._readableState.encoding=Ce,this};var X=8388608;function ie(Ce){return Ce>=X?Ce=X:(Ce--,Ce|=Ce>>>1,Ce|=Ce>>>2,Ce|=Ce>>>4,Ce|=Ce>>>8,Ce|=Ce>>>16,Ce++),Ce}function fe(Ce,Ae){return Ce<=0||Ae.length===0&&Ae.ended?0:Ae.objectMode?1:Ce!==Ce?Ae.flowing&&Ae.length?Ae.buffer.head.data.length:Ae.length:(Ce>Ae.highWaterMark&&(Ae.highWaterMark=ie(Ce)),Ce<=Ae.length?Ce:Ae.ended?Ae.length:(Ae.needReadable=!0,0))}F.prototype.read=function(Ce){I("read",Ce),Ce=parseInt(Ce,10);var Ae=this._readableState,Ne=Ce;if(Ce!==0&&(Ae.emittedReadable=!1),Ce===0&&Ae.needReadable&&(Ae.length>=Ae.highWaterMark||Ae.ended))return I("read: emitReadable",Ae.length,Ae.ended),Ae.length===0&&Ae.ended?ye(this):we(this),null;if(Ce=fe(Ce,Ae),Ce===0&&Ae.ended)return Ae.length===0&&ye(this),null;var We=Ae.needReadable;I("need readable",We),(Ae.length===0||Ae.length-Ce<Ae.highWaterMark)&&(We=!0,I("length less than watermark",We)),Ae.ended||Ae.reading?(We=!1,I("reading or ended",We)):We&&(I("do read"),Ae.reading=!0,Ae.sync=!0,Ae.length===0&&(Ae.needReadable=!0),this._read(Ae.highWaterMark),Ae.sync=!1,Ae.reading||(Ce=fe(Ne,Ae)));var Be;return Ce>0?Be=se(Ce,Ae):Be=null,Be===null?(Ae.needReadable=!0,Ce=0):Ae.length-=Ce,Ae.length===0&&(Ae.ended||(Ae.needReadable=!0),Ne!==Ce&&Ae.ended&&ye(this)),Be!==null&&this.emit("data",Be),Be};function xe(Ce,Ae){if(!Ae.ended){if(Ae.decoder){var Ne=Ae.decoder.end();Ne&&Ne.length&&(Ae.buffer.push(Ne),Ae.length+=Ae.objectMode?1:Ne.length)}Ae.ended=!0,we(Ce)}}function we(Ce){var Ae=Ce._readableState;Ae.needReadable=!1,Ae.emittedReadable||(I("emitReadable",Ae.flowing),Ae.emittedReadable=!0,Ae.sync?n.nextTick(G,Ce):G(Ce))}function G(Ce){I("emit readable"),Ce.emit("readable"),ue(Ce)}function J(Ce,Ae){Ae.readingMore||(Ae.readingMore=!0,n.nextTick(q,Ce,Ae))}function q(Ce,Ae){for(var Ne=Ae.length;!Ae.reading&&!Ae.flowing&&!Ae.ended&&Ae.length<Ae.highWaterMark&&(I("maybeReadMore read 0"),Ce.read(0),Ne!==Ae.length);)Ne=Ae.length;Ae.readingMore=!1}F.prototype._read=function(Ce){this.emit("error",new Error("_read() is not implemented"))},F.prototype.pipe=function(Ce,Ae){var Ne=this,We=this._readableState;switch(We.pipesCount){case 0:We.pipes=Ce;break;case 1:We.pipes=[We.pipes,Ce];break;default:We.pipes.push(Ce);break}We.pipesCount+=1,I("pipe count=%d opts=%j",We.pipesCount,Ae);var Be=(!Ae||Ae.end!==!1)&&Ce!==process$1.stdout&&Ce!==process$1.stderr,Se=Be?_e:wt;We.endEmitted?n.nextTick(Se):Ne.once("end",Se),Ce.on("unpipe",$e);function $e(bt,xt){I("onunpipe"),bt===Ne&&xt&&xt.hasUnpiped===!1&&(xt.hasUnpiped=!0,Me())}function _e(){I("onend"),Ce.end()}var Oe=H(Ne);Ce.on("drain",Oe);var Ke=!1;function Me(){I("cleanup"),Ce.removeListener("close",Qe),Ce.removeListener("finish",rt),Ce.removeListener("drain",Oe),Ce.removeListener("error",Je),Ce.removeListener("unpipe",$e),Ne.removeListener("end",_e),Ne.removeListener("end",wt),Ne.removeListener("data",ze),Ke=!0,We.awaitDrain&&(!Ce._writableState||Ce._writableState.needDrain)&&Oe()}var Le=!1;Ne.on("data",ze);function ze(bt){I("ondata"),Le=!1;var xt=Ce.write(bt);xt===!1&&!Le&&((We.pipesCount===1&&We.pipes===Ce||We.pipesCount>1&&ke(We.pipes,Ce)!==-1)&&!Ke&&(I("false write response, pause",We.awaitDrain),We.awaitDrain++,Le=!0),Ne.pause())}function Je(bt){I("onerror",bt),wt(),Ce.removeListener("error",Je),_(Ce,"error")===0&&Ce.emit("error",bt)}O(Ce,"error",Je);function Qe(){Ce.removeListener("finish",rt),wt()}Ce.once("close",Qe);function rt(){I("onfinish"),Ce.removeListener("close",Qe),wt()}Ce.once("finish",rt);function wt(){I("unpipe"),Ne.unpipe(Ce)}return Ce.emit("pipe",Ne),We.flowing||(I("pipe resume"),Ne.resume()),Ce};function H(Ce){return function(){var Ae=Ce._readableState;I("pipeOnDrain",Ae.awaitDrain),Ae.awaitDrain&&Ae.awaitDrain--,Ae.awaitDrain===0&&_(Ce,"data")&&(Ae.flowing=!0,ue(Ce))}}F.prototype.unpipe=function(Ce){var Ae=this._readableState,Ne={hasUnpiped:!1};if(Ae.pipesCount===0)return this;if(Ae.pipesCount===1)return Ce&&Ce!==Ae.pipes?this:(Ce||(Ce=Ae.pipes),Ae.pipes=null,Ae.pipesCount=0,Ae.flowing=!1,Ce&&Ce.emit("unpipe",this,Ne),this);if(!Ce){var We=Ae.pipes,Be=Ae.pipesCount;Ae.pipes=null,Ae.pipesCount=0,Ae.flowing=!1;for(var Se=0;Se<Be;Se++)We[Se].emit("unpipe",this,{hasUnpiped:!1});return this}var $e=ke(Ae.pipes,Ce);return $e===-1?this:(Ae.pipes.splice($e,1),Ae.pipesCount-=1,Ae.pipesCount===1&&(Ae.pipes=Ae.pipes[0]),Ce.emit("unpipe",this,Ne),this)},F.prototype.on=function(Ce,Ae){var Ne=x.prototype.on.call(this,Ce,Ae);if(Ce==="data")this._readableState.flowing!==!1&&this.resume();else if(Ce==="readable"){var We=this._readableState;!We.endEmitted&&!We.readableListening&&(We.readableListening=We.needReadable=!0,We.emittedReadable=!1,We.reading?We.length&&we(this):n.nextTick(ve,this))}return Ne},F.prototype.addListener=F.prototype.on;function ve(Ce){I("readable nexttick read 0"),Ce.read(0)}F.prototype.resume=function(){var Ce=this._readableState;return Ce.flowing||(I("resume"),Ce.flowing=!0,Z(this,Ce)),this};function Z(Ce,Ae){Ae.resumeScheduled||(Ae.resumeScheduled=!0,n.nextTick(ce,Ce,Ae))}function ce(Ce,Ae){Ae.reading||(I("resume read 0"),Ce.read(0)),Ae.resumeScheduled=!1,Ae.awaitDrain=0,Ce.emit("resume"),ue(Ce),Ae.flowing&&!Ae.reading&&Ce.read(0)}F.prototype.pause=function(){return I("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(I("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ue(Ce){var Ae=Ce._readableState;for(I("flow",Ae.flowing);Ae.flowing&&Ce.read()!==null;);}F.prototype.wrap=function(Ce){var Ae=this,Ne=this._readableState,We=!1;Ce.on("end",function(){if(I("wrapped end"),Ne.decoder&&!Ne.ended){var $e=Ne.decoder.end();$e&&$e.length&&Ae.push($e)}Ae.push(null)}),Ce.on("data",function($e){if(I("wrapped data"),Ne.decoder&&($e=Ne.decoder.write($e)),!(Ne.objectMode&&$e==null)&&!(!Ne.objectMode&&(!$e||!$e.length))){var _e=Ae.push($e);_e||(We=!0,Ce.pause())}});for(var Be in Ce)this[Be]===void 0&&typeof Ce[Be]=="function"&&(this[Be]=function($e){return function(){return Ce[$e].apply(Ce,arguments)}}(Be));for(var Se=0;Se<M.length;Se++)Ce.on(M[Se],this.emit.bind(this,M[Se]));return this._read=function($e){I("wrapped _read",$e),We&&(We=!1,Ce.resume())},this},Object.defineProperty(F.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),F._fromList=se;function se(Ce,Ae){if(Ae.length===0)return null;var Ne;return Ae.objectMode?Ne=Ae.buffer.shift():!Ce||Ce>=Ae.length?(Ae.decoder?Ne=Ae.buffer.join(""):Ae.buffer.length===1?Ne=Ae.buffer.head.data:Ne=Ae.buffer.concat(Ae.length),Ae.buffer.clear()):Ne=te(Ce,Ae.buffer,Ae.decoder),Ne}function te(Ce,Ae,Ne){var We;return Ce<Ae.head.data.length?(We=Ae.head.data.slice(0,Ce),Ae.head.data=Ae.head.data.slice(Ce)):Ce===Ae.head.data.length?We=Ae.shift():We=Ne?Y(Ce,Ae):be(Ce,Ae),We}function Y(Ce,Ae){var Ne=Ae.head,We=1,Be=Ne.data;for(Ce-=Be.length;Ne=Ne.next;){var Se=Ne.data,$e=Ce>Se.length?Se.length:Ce;if($e===Se.length?Be+=Se:Be+=Se.slice(0,Ce),Ce-=$e,Ce===0){$e===Se.length?(++We,Ne.next?Ae.head=Ne.next:Ae.head=Ae.tail=null):(Ae.head=Ne,Ne.data=Se.slice($e));break}++We}return Ae.length-=We,Be}function be(Ce,Ae){var Ne=S.allocUnsafe(Ce),We=Ae.head,Be=1;for(We.data.copy(Ne),Ce-=We.data.length;We=We.next;){var Se=We.data,$e=Ce>Se.length?Se.length:Ce;if(Se.copy(Ne,Ne.length-Ce,0,$e),Ce-=$e,Ce===0){$e===Se.length?(++Be,We.next?Ae.head=We.next:Ae.head=Ae.tail=null):(Ae.head=We,We.data=Se.slice($e));break}++Be}return Ae.length-=Be,Ne}function ye(Ce){var Ae=Ce._readableState;if(Ae.length>0)throw new Error('"endReadable()" called on non-empty stream');Ae.endEmitted||(Ae.ended=!0,n.nextTick(Ie,Ae,Ce))}function Ie(Ce,Ae){!Ce.endEmitted&&Ce.length===0&&(Ce.endEmitted=!0,Ae.readable=!1,Ae.emit("end"))}function ke(Ce,Ae){for(var Ne=0,We=Ce.length;Ne<We;Ne++)if(Ce[Ne]===Ae)return Ne;return-1}return _stream_readable}var _stream_transform,hasRequired_stream_transform;function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=_;var n=require_stream_duplex(),r=Object.create(requireUtil());r.inherits=requireInherits_browser(),r.inherits(_,n);function g(E,C){var T=this._transformState;T.transforming=!1;var R=T.writecb;if(!R)return this.emit("error",new Error("write callback called multiple times"));T.writechunk=null,T.writecb=null,C!=null&&this.push(C),R(E);var A=this._readableState;A.reading=!1,(A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}function _(E){if(!(this instanceof _))return new _(E);n.call(this,E),this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,E&&(typeof E.transform=="function"&&(this._transform=E.transform),typeof E.flush=="function"&&(this._flush=E.flush)),this.on("prefinish",x)}function x(){var E=this;typeof this._flush=="function"?this._flush(function(C,T){S(E,C,T)}):S(this,null,null)}_.prototype.push=function(E,C){return this._transformState.needTransform=!1,n.prototype.push.call(this,E,C)},_.prototype._transform=function(E,C,T){throw new Error("_transform() is not implemented")},_.prototype._write=function(E,C,T){var R=this._transformState;if(R.writecb=T,R.writechunk=E,R.writeencoding=C,!R.transforming){var A=this._readableState;(R.needTransform||A.needReadable||A.length<A.highWaterMark)&&this._read(A.highWaterMark)}},_.prototype._read=function(E){var C=this._transformState;C.writechunk!==null&&C.writecb&&!C.transforming?(C.transforming=!0,this._transform(C.writechunk,C.writeencoding,C.afterTransform)):C.needTransform=!0},_.prototype._destroy=function(E,C){var T=this;n.prototype._destroy.call(this,E,function(R){C(R),T.emit("close")})};function S(E,C,T){if(C)return E.emit("error",C);if(T!=null&&E.push(T),E._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(E._transformState.transforming)throw new Error("Calling transform done when still transforming");return E.push(null)}return _stream_transform}var _stream_passthrough,hasRequired_stream_passthrough;function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=g;var n=require_stream_transform(),r=Object.create(requireUtil());r.inherits=requireInherits_browser(),r.inherits(g,n);function g(_){if(!(this instanceof g))return new g(_);n.call(this,_)}return g.prototype._transform=function(_,x,S){S(null,_)},_stream_passthrough}var hasRequiredReadableBrowser;function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,function(n,r){r=n.exports=require_stream_readable(),r.Stream=r,r.Readable=r,r.Writable=require_stream_writable(),r.Duplex=require_stream_duplex(),r.Transform=require_stream_transform(),r.PassThrough=require_stream_passthrough()}(readableBrowser,readableBrowser.exports)),readableBrowser.exports}var sign={exports:{}},bn$3={exports:{}},bn$2=bn$3.exports,hasRequiredBn$1;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(n){(function(r,g){function _(J,q){if(!J)throw new Error(q||"Assertion failed")}function x(J,q){J.super_=q;var H=function(){};H.prototype=q.prototype,J.prototype=new H,J.prototype.constructor=J}function S(J,q,H){if(S.isBN(J))return J;this.negative=0,this.words=null,this.length=0,this.red=null,J!==null&&((q==="le"||q==="be")&&(H=q,q=10),this._init(J||0,q||10,H||"be"))}typeof r=="object"?r.exports=S:g.BN=S,S.BN=S,S.wordSize=26;var E;try{typeof window<"u"&&typeof window.Buffer<"u"?E=window.Buffer:E=requireDist().Buffer}catch{}S.isBN=function(q){return q instanceof S?!0:q!==null&&typeof q=="object"&&q.constructor.wordSize===S.wordSize&&Array.isArray(q.words)},S.max=function(q,H){return q.cmp(H)>0?q:H},S.min=function(q,H){return q.cmp(H)<0?q:H},S.prototype._init=function(q,H,ve){if(typeof q=="number")return this._initNumber(q,H,ve);if(typeof q=="object")return this._initArray(q,H,ve);H==="hex"&&(H=16),_(H===(H|0)&&H>=2&&H<=36),q=q.toString().replace(/\s+/g,"");var Z=0;q[0]==="-"&&(Z++,this.negative=1),Z<q.length&&(H===16?this._parseHex(q,Z,ve):(this._parseBase(q,H,Z),ve==="le"&&this._initArray(this.toArray(),H,ve)))},S.prototype._initNumber=function(q,H,ve){q<0&&(this.negative=1,q=-q),q<67108864?(this.words=[q&67108863],this.length=1):q<4503599627370496?(this.words=[q&67108863,q/67108864&67108863],this.length=2):(_(q<9007199254740992),this.words=[q&67108863,q/67108864&67108863,1],this.length=3),ve==="le"&&this._initArray(this.toArray(),H,ve)},S.prototype._initArray=function(q,H,ve){if(_(typeof q.length=="number"),q.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(q.length/3),this.words=new Array(this.length);for(var Z=0;Z<this.length;Z++)this.words[Z]=0;var ce,ue,se=0;if(ve==="be")for(Z=q.length-1,ce=0;Z>=0;Z-=3)ue=q[Z]|q[Z-1]<<8|q[Z-2]<<16,this.words[ce]|=ue<<se&67108863,this.words[ce+1]=ue>>>26-se&67108863,se+=24,se>=26&&(se-=26,ce++);else if(ve==="le")for(Z=0,ce=0;Z<q.length;Z+=3)ue=q[Z]|q[Z+1]<<8|q[Z+2]<<16,this.words[ce]|=ue<<se&67108863,this.words[ce+1]=ue>>>26-se&67108863,se+=24,se>=26&&(se-=26,ce++);return this._strip()};function C(J,q){var H=J.charCodeAt(q);if(H>=48&&H<=57)return H-48;if(H>=65&&H<=70)return H-55;if(H>=97&&H<=102)return H-87;_(!1,"Invalid character in "+J)}function T(J,q,H){var ve=C(J,H);return H-1>=q&&(ve|=C(J,H-1)<<4),ve}S.prototype._parseHex=function(q,H,ve){this.length=Math.ceil((q.length-H)/6),this.words=new Array(this.length);for(var Z=0;Z<this.length;Z++)this.words[Z]=0;var ce=0,ue=0,se;if(ve==="be")for(Z=q.length-1;Z>=H;Z-=2)se=T(q,H,Z)<<ce,this.words[ue]|=se&67108863,ce>=18?(ce-=18,ue+=1,this.words[ue]|=se>>>26):ce+=8;else{var te=q.length-H;for(Z=te%2===0?H+1:H;Z<q.length;Z+=2)se=T(q,H,Z)<<ce,this.words[ue]|=se&67108863,ce>=18?(ce-=18,ue+=1,this.words[ue]|=se>>>26):ce+=8}this._strip()};function R(J,q,H,ve){for(var Z=0,ce=0,ue=Math.min(J.length,H),se=q;se<ue;se++){var te=J.charCodeAt(se)-48;Z*=ve,te>=49?ce=te-49+10:te>=17?ce=te-17+10:ce=te,_(te>=0&&ce<ve,"Invalid character"),Z+=ce}return Z}S.prototype._parseBase=function(q,H,ve){this.words=[0],this.length=1;for(var Z=0,ce=1;ce<=67108863;ce*=H)Z++;Z--,ce=ce/H|0;for(var ue=q.length-ve,se=ue%Z,te=Math.min(ue,ue-se)+ve,Y=0,be=ve;be<te;be+=Z)Y=R(q,be,be+Z,H),this.imuln(ce),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y);if(se!==0){var ye=1;for(Y=R(q,be,q.length,H),be=0;be<se;be++)ye*=H;this.imuln(ye),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y)}this._strip()},S.prototype.copy=function(q){q.words=new Array(this.length);for(var H=0;H<this.length;H++)q.words[H]=this.words[H];q.length=this.length,q.negative=this.negative,q.red=this.red};function A(J,q){J.words=q.words,J.length=q.length,J.negative=q.negative,J.red=q.red}if(S.prototype._move=function(q){A(q,this)},S.prototype.clone=function(){var q=new S(null);return this.copy(q),q},S.prototype._expand=function(q){for(;this.length<q;)this.words[this.length++]=0;return this},S.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},S.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{S.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{S.prototype.inspect=I}else S.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];S.prototype.toString=function(q,H){q=q||10,H=H|0||1;var ve;if(q===16||q==="hex"){ve="";for(var Z=0,ce=0,ue=0;ue<this.length;ue++){var se=this.words[ue],te=((se<<Z|ce)&16777215).toString(16);ce=se>>>24-Z&16777215,Z+=2,Z>=26&&(Z-=26,ue--),ce!==0||ue!==this.length-1?ve=B[6-te.length]+te+ve:ve=te+ve}for(ce!==0&&(ve=ce.toString(16)+ve);ve.length%H!==0;)ve="0"+ve;return this.negative!==0&&(ve="-"+ve),ve}if(q===(q|0)&&q>=2&&q<=36){var Y=D[q],be=N[q];ve="";var ye=this.clone();for(ye.negative=0;!ye.isZero();){var Ie=ye.modrn(be).toString(q);ye=ye.idivn(be),ye.isZero()?ve=Ie+ve:ve=B[Y-Ie.length]+Ie+ve}for(this.isZero()&&(ve="0"+ve);ve.length%H!==0;)ve="0"+ve;return this.negative!==0&&(ve="-"+ve),ve}_(!1,"Base should be between 2 and 36")},S.prototype.toNumber=function(){var q=this.words[0];return this.length===2?q+=this.words[1]*67108864:this.length===3&&this.words[2]===1?q+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-q:q},S.prototype.toJSON=function(){return this.toString(16,2)},E&&(S.prototype.toBuffer=function(q,H){return this.toArrayLike(E,q,H)}),S.prototype.toArray=function(q,H){return this.toArrayLike(Array,q,H)};var M=function(q,H){return q.allocUnsafe?q.allocUnsafe(H):new q(H)};S.prototype.toArrayLike=function(q,H,ve){this._strip();var Z=this.byteLength(),ce=ve||Math.max(1,Z);_(Z<=ce,"byte array longer than desired length"),_(ce>0,"Requested array length <= 0");var ue=M(q,ce),se=H==="le"?"LE":"BE";return this["_toArrayLike"+se](ue,Z),ue},S.prototype._toArrayLikeLE=function(q,H){for(var ve=0,Z=0,ce=0,ue=0;ce<this.length;ce++){var se=this.words[ce]<<ue|Z;q[ve++]=se&255,ve<q.length&&(q[ve++]=se>>8&255),ve<q.length&&(q[ve++]=se>>16&255),ue===6?(ve<q.length&&(q[ve++]=se>>24&255),Z=0,ue=0):(Z=se>>>24,ue+=2)}if(ve<q.length)for(q[ve++]=Z;ve<q.length;)q[ve++]=0},S.prototype._toArrayLikeBE=function(q,H){for(var ve=q.length-1,Z=0,ce=0,ue=0;ce<this.length;ce++){var se=this.words[ce]<<ue|Z;q[ve--]=se&255,ve>=0&&(q[ve--]=se>>8&255),ve>=0&&(q[ve--]=se>>16&255),ue===6?(ve>=0&&(q[ve--]=se>>24&255),Z=0,ue=0):(Z=se>>>24,ue+=2)}if(ve>=0)for(q[ve--]=Z;ve>=0;)q[ve--]=0},Math.clz32?S.prototype._countBits=function(q){return 32-Math.clz32(q)}:S.prototype._countBits=function(q){var H=q,ve=0;return H>=4096&&(ve+=13,H>>>=13),H>=64&&(ve+=7,H>>>=7),H>=8&&(ve+=4,H>>>=4),H>=2&&(ve+=2,H>>>=2),ve+H},S.prototype._zeroBits=function(q){if(q===0)return 26;var H=q,ve=0;return H&8191||(ve+=13,H>>>=13),H&127||(ve+=7,H>>>=7),H&15||(ve+=4,H>>>=4),H&3||(ve+=2,H>>>=2),H&1||ve++,ve},S.prototype.bitLength=function(){var q=this.words[this.length-1],H=this._countBits(q);return(this.length-1)*26+H};function O(J){for(var q=new Array(J.bitLength()),H=0;H<q.length;H++){var ve=H/26|0,Z=H%26;q[H]=J.words[ve]>>>Z&1}return q}S.prototype.zeroBits=function(){if(this.isZero())return 0;for(var q=0,H=0;H<this.length;H++){var ve=this._zeroBits(this.words[H]);if(q+=ve,ve!==26)break}return q},S.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},S.prototype.toTwos=function(q){return this.negative!==0?this.abs().inotn(q).iaddn(1):this.clone()},S.prototype.fromTwos=function(q){return this.testn(q-1)?this.notn(q).iaddn(1).ineg():this.clone()},S.prototype.isNeg=function(){return this.negative!==0},S.prototype.neg=function(){return this.clone().ineg()},S.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},S.prototype.iuor=function(q){for(;this.length<q.length;)this.words[this.length++]=0;for(var H=0;H<q.length;H++)this.words[H]=this.words[H]|q.words[H];return this._strip()},S.prototype.ior=function(q){return _((this.negative|q.negative)===0),this.iuor(q)},S.prototype.or=function(q){return this.length>q.length?this.clone().ior(q):q.clone().ior(this)},S.prototype.uor=function(q){return this.length>q.length?this.clone().iuor(q):q.clone().iuor(this)},S.prototype.iuand=function(q){var H;this.length>q.length?H=q:H=this;for(var ve=0;ve<H.length;ve++)this.words[ve]=this.words[ve]&q.words[ve];return this.length=H.length,this._strip()},S.prototype.iand=function(q){return _((this.negative|q.negative)===0),this.iuand(q)},S.prototype.and=function(q){return this.length>q.length?this.clone().iand(q):q.clone().iand(this)},S.prototype.uand=function(q){return this.length>q.length?this.clone().iuand(q):q.clone().iuand(this)},S.prototype.iuxor=function(q){var H,ve;this.length>q.length?(H=this,ve=q):(H=q,ve=this);for(var Z=0;Z<ve.length;Z++)this.words[Z]=H.words[Z]^ve.words[Z];if(this!==H)for(;Z<H.length;Z++)this.words[Z]=H.words[Z];return this.length=H.length,this._strip()},S.prototype.ixor=function(q){return _((this.negative|q.negative)===0),this.iuxor(q)},S.prototype.xor=function(q){return this.length>q.length?this.clone().ixor(q):q.clone().ixor(this)},S.prototype.uxor=function(q){return this.length>q.length?this.clone().iuxor(q):q.clone().iuxor(this)},S.prototype.inotn=function(q){_(typeof q=="number"&&q>=0);var H=Math.ceil(q/26)|0,ve=q%26;this._expand(H),ve>0&&H--;for(var Z=0;Z<H;Z++)this.words[Z]=~this.words[Z]&67108863;return ve>0&&(this.words[Z]=~this.words[Z]&67108863>>26-ve),this._strip()},S.prototype.notn=function(q){return this.clone().inotn(q)},S.prototype.setn=function(q,H){_(typeof q=="number"&&q>=0);var ve=q/26|0,Z=q%26;return this._expand(ve+1),H?this.words[ve]=this.words[ve]|1<<Z:this.words[ve]=this.words[ve]&~(1<<Z),this._strip()},S.prototype.iadd=function(q){var H;if(this.negative!==0&&q.negative===0)return this.negative=0,H=this.isub(q),this.negative^=1,this._normSign();if(this.negative===0&&q.negative!==0)return q.negative=0,H=this.isub(q),q.negative=1,H._normSign();var ve,Z;this.length>q.length?(ve=this,Z=q):(ve=q,Z=this);for(var ce=0,ue=0;ue<Z.length;ue++)H=(ve.words[ue]|0)+(Z.words[ue]|0)+ce,this.words[ue]=H&67108863,ce=H>>>26;for(;ce!==0&&ue<ve.length;ue++)H=(ve.words[ue]|0)+ce,this.words[ue]=H&67108863,ce=H>>>26;if(this.length=ve.length,ce!==0)this.words[this.length]=ce,this.length++;else if(ve!==this)for(;ue<ve.length;ue++)this.words[ue]=ve.words[ue];return this},S.prototype.add=function(q){var H;return q.negative!==0&&this.negative===0?(q.negative=0,H=this.sub(q),q.negative^=1,H):q.negative===0&&this.negative!==0?(this.negative=0,H=q.sub(this),this.negative=1,H):this.length>q.length?this.clone().iadd(q):q.clone().iadd(this)},S.prototype.isub=function(q){if(q.negative!==0){q.negative=0;var H=this.iadd(q);return q.negative=1,H._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(q),this.negative=1,this._normSign();var ve=this.cmp(q);if(ve===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Z,ce;ve>0?(Z=this,ce=q):(Z=q,ce=this);for(var ue=0,se=0;se<ce.length;se++)H=(Z.words[se]|0)-(ce.words[se]|0)+ue,ue=H>>26,this.words[se]=H&67108863;for(;ue!==0&&se<Z.length;se++)H=(Z.words[se]|0)+ue,ue=H>>26,this.words[se]=H&67108863;if(ue===0&&se<Z.length&&Z!==this)for(;se<Z.length;se++)this.words[se]=Z.words[se];return this.length=Math.max(this.length,se),Z!==this&&(this.negative=1),this._strip()},S.prototype.sub=function(q){return this.clone().isub(q)};function L(J,q,H){H.negative=q.negative^J.negative;var ve=J.length+q.length|0;H.length=ve,ve=ve-1|0;var Z=J.words[0]|0,ce=q.words[0]|0,ue=Z*ce,se=ue&67108863,te=ue/67108864|0;H.words[0]=se;for(var Y=1;Y<ve;Y++){for(var be=te>>>26,ye=te&67108863,Ie=Math.min(Y,q.length-1),ke=Math.max(0,Y-J.length+1);ke<=Ie;ke++){var Ce=Y-ke|0;Z=J.words[Ce]|0,ce=q.words[ke]|0,ue=Z*ce+ye,be+=ue/67108864|0,ye=ue&67108863}H.words[Y]=ye|0,te=be|0}return te!==0?H.words[Y]=te|0:H.length--,H._strip()}var F=function(q,H,ve){var Z=q.words,ce=H.words,ue=ve.words,se=0,te,Y,be,ye=Z[0]|0,Ie=ye&8191,ke=ye>>>13,Ce=Z[1]|0,Ae=Ce&8191,Ne=Ce>>>13,We=Z[2]|0,Be=We&8191,Se=We>>>13,$e=Z[3]|0,_e=$e&8191,Oe=$e>>>13,Ke=Z[4]|0,Me=Ke&8191,Le=Ke>>>13,ze=Z[5]|0,Je=ze&8191,Qe=ze>>>13,rt=Z[6]|0,wt=rt&8191,bt=rt>>>13,xt=Z[7]|0,Et=xt&8191,Rt=xt>>>13,$t=Z[8]|0,qt=$t&8191,Ge=$t>>>13,De=Z[9]|0,Ve=De&8191,Ze=De>>>13,_t=ce[0]|0,ft=_t&8191,ht=_t>>>13,zt=ce[1]|0,Kt=zt&8191,Ft=zt>>>13,Jt=ce[2]|0,jt=Jt&8191,rr=Jt>>>13,ir=ce[3]|0,cr=ir&8191,sr=ir>>>13,yr=ce[4]|0,ur=yr&8191,Ye=yr>>>13,Fe=ce[5]|0,qe=Fe&8191,pt=Fe>>>13,St=ce[6]|0,Tt=St&8191,At=St>>>13,ar=ce[7]|0,Xe=ar&8191,nt=ar>>>13,ot=ce[8]|0,et=ot&8191,mt=ot>>>13,vt=ce[9]|0,Ct=vt&8191,Pt=vt>>>13;ve.negative=q.negative^H.negative,ve.length=19,te=Math.imul(Ie,ft),Y=Math.imul(Ie,ht),Y=Y+Math.imul(ke,ft)|0,be=Math.imul(ke,ht);var It=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(It>>>26)|0,It&=67108863,te=Math.imul(Ae,ft),Y=Math.imul(Ae,ht),Y=Y+Math.imul(Ne,ft)|0,be=Math.imul(Ne,ht),te=te+Math.imul(Ie,Kt)|0,Y=Y+Math.imul(Ie,Ft)|0,Y=Y+Math.imul(ke,Kt)|0,be=be+Math.imul(ke,Ft)|0;var Nt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,te=Math.imul(Be,ft),Y=Math.imul(Be,ht),Y=Y+Math.imul(Se,ft)|0,be=Math.imul(Se,ht),te=te+Math.imul(Ae,Kt)|0,Y=Y+Math.imul(Ae,Ft)|0,Y=Y+Math.imul(Ne,Kt)|0,be=be+Math.imul(Ne,Ft)|0,te=te+Math.imul(Ie,jt)|0,Y=Y+Math.imul(Ie,rr)|0,Y=Y+Math.imul(ke,jt)|0,be=be+Math.imul(ke,rr)|0;var Dt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,te=Math.imul(_e,ft),Y=Math.imul(_e,ht),Y=Y+Math.imul(Oe,ft)|0,be=Math.imul(Oe,ht),te=te+Math.imul(Be,Kt)|0,Y=Y+Math.imul(Be,Ft)|0,Y=Y+Math.imul(Se,Kt)|0,be=be+Math.imul(Se,Ft)|0,te=te+Math.imul(Ae,jt)|0,Y=Y+Math.imul(Ae,rr)|0,Y=Y+Math.imul(Ne,jt)|0,be=be+Math.imul(Ne,rr)|0,te=te+Math.imul(Ie,cr)|0,Y=Y+Math.imul(Ie,sr)|0,Y=Y+Math.imul(ke,cr)|0,be=be+Math.imul(ke,sr)|0;var Ht=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,te=Math.imul(Me,ft),Y=Math.imul(Me,ht),Y=Y+Math.imul(Le,ft)|0,be=Math.imul(Le,ht),te=te+Math.imul(_e,Kt)|0,Y=Y+Math.imul(_e,Ft)|0,Y=Y+Math.imul(Oe,Kt)|0,be=be+Math.imul(Oe,Ft)|0,te=te+Math.imul(Be,jt)|0,Y=Y+Math.imul(Be,rr)|0,Y=Y+Math.imul(Se,jt)|0,be=be+Math.imul(Se,rr)|0,te=te+Math.imul(Ae,cr)|0,Y=Y+Math.imul(Ae,sr)|0,Y=Y+Math.imul(Ne,cr)|0,be=be+Math.imul(Ne,sr)|0,te=te+Math.imul(Ie,ur)|0,Y=Y+Math.imul(Ie,Ye)|0,Y=Y+Math.imul(ke,ur)|0,be=be+Math.imul(ke,Ye)|0;var Zt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,te=Math.imul(Je,ft),Y=Math.imul(Je,ht),Y=Y+Math.imul(Qe,ft)|0,be=Math.imul(Qe,ht),te=te+Math.imul(Me,Kt)|0,Y=Y+Math.imul(Me,Ft)|0,Y=Y+Math.imul(Le,Kt)|0,be=be+Math.imul(Le,Ft)|0,te=te+Math.imul(_e,jt)|0,Y=Y+Math.imul(_e,rr)|0,Y=Y+Math.imul(Oe,jt)|0,be=be+Math.imul(Oe,rr)|0,te=te+Math.imul(Be,cr)|0,Y=Y+Math.imul(Be,sr)|0,Y=Y+Math.imul(Se,cr)|0,be=be+Math.imul(Se,sr)|0,te=te+Math.imul(Ae,ur)|0,Y=Y+Math.imul(Ae,Ye)|0,Y=Y+Math.imul(Ne,ur)|0,be=be+Math.imul(Ne,Ye)|0,te=te+Math.imul(Ie,qe)|0,Y=Y+Math.imul(Ie,pt)|0,Y=Y+Math.imul(ke,qe)|0,be=be+Math.imul(ke,pt)|0;var nr=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(nr>>>26)|0,nr&=67108863,te=Math.imul(wt,ft),Y=Math.imul(wt,ht),Y=Y+Math.imul(bt,ft)|0,be=Math.imul(bt,ht),te=te+Math.imul(Je,Kt)|0,Y=Y+Math.imul(Je,Ft)|0,Y=Y+Math.imul(Qe,Kt)|0,be=be+Math.imul(Qe,Ft)|0,te=te+Math.imul(Me,jt)|0,Y=Y+Math.imul(Me,rr)|0,Y=Y+Math.imul(Le,jt)|0,be=be+Math.imul(Le,rr)|0,te=te+Math.imul(_e,cr)|0,Y=Y+Math.imul(_e,sr)|0,Y=Y+Math.imul(Oe,cr)|0,be=be+Math.imul(Oe,sr)|0,te=te+Math.imul(Be,ur)|0,Y=Y+Math.imul(Be,Ye)|0,Y=Y+Math.imul(Se,ur)|0,be=be+Math.imul(Se,Ye)|0,te=te+Math.imul(Ae,qe)|0,Y=Y+Math.imul(Ae,pt)|0,Y=Y+Math.imul(Ne,qe)|0,be=be+Math.imul(Ne,pt)|0,te=te+Math.imul(Ie,Tt)|0,Y=Y+Math.imul(Ie,At)|0,Y=Y+Math.imul(ke,Tt)|0,be=be+Math.imul(ke,At)|0;var Xt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,te=Math.imul(Et,ft),Y=Math.imul(Et,ht),Y=Y+Math.imul(Rt,ft)|0,be=Math.imul(Rt,ht),te=te+Math.imul(wt,Kt)|0,Y=Y+Math.imul(wt,Ft)|0,Y=Y+Math.imul(bt,Kt)|0,be=be+Math.imul(bt,Ft)|0,te=te+Math.imul(Je,jt)|0,Y=Y+Math.imul(Je,rr)|0,Y=Y+Math.imul(Qe,jt)|0,be=be+Math.imul(Qe,rr)|0,te=te+Math.imul(Me,cr)|0,Y=Y+Math.imul(Me,sr)|0,Y=Y+Math.imul(Le,cr)|0,be=be+Math.imul(Le,sr)|0,te=te+Math.imul(_e,ur)|0,Y=Y+Math.imul(_e,Ye)|0,Y=Y+Math.imul(Oe,ur)|0,be=be+Math.imul(Oe,Ye)|0,te=te+Math.imul(Be,qe)|0,Y=Y+Math.imul(Be,pt)|0,Y=Y+Math.imul(Se,qe)|0,be=be+Math.imul(Se,pt)|0,te=te+Math.imul(Ae,Tt)|0,Y=Y+Math.imul(Ae,At)|0,Y=Y+Math.imul(Ne,Tt)|0,be=be+Math.imul(Ne,At)|0,te=te+Math.imul(Ie,Xe)|0,Y=Y+Math.imul(Ie,nt)|0,Y=Y+Math.imul(ke,Xe)|0,be=be+Math.imul(ke,nt)|0;var Qt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,te=Math.imul(qt,ft),Y=Math.imul(qt,ht),Y=Y+Math.imul(Ge,ft)|0,be=Math.imul(Ge,ht),te=te+Math.imul(Et,Kt)|0,Y=Y+Math.imul(Et,Ft)|0,Y=Y+Math.imul(Rt,Kt)|0,be=be+Math.imul(Rt,Ft)|0,te=te+Math.imul(wt,jt)|0,Y=Y+Math.imul(wt,rr)|0,Y=Y+Math.imul(bt,jt)|0,be=be+Math.imul(bt,rr)|0,te=te+Math.imul(Je,cr)|0,Y=Y+Math.imul(Je,sr)|0,Y=Y+Math.imul(Qe,cr)|0,be=be+Math.imul(Qe,sr)|0,te=te+Math.imul(Me,ur)|0,Y=Y+Math.imul(Me,Ye)|0,Y=Y+Math.imul(Le,ur)|0,be=be+Math.imul(Le,Ye)|0,te=te+Math.imul(_e,qe)|0,Y=Y+Math.imul(_e,pt)|0,Y=Y+Math.imul(Oe,qe)|0,be=be+Math.imul(Oe,pt)|0,te=te+Math.imul(Be,Tt)|0,Y=Y+Math.imul(Be,At)|0,Y=Y+Math.imul(Se,Tt)|0,be=be+Math.imul(Se,At)|0,te=te+Math.imul(Ae,Xe)|0,Y=Y+Math.imul(Ae,nt)|0,Y=Y+Math.imul(Ne,Xe)|0,be=be+Math.imul(Ne,nt)|0,te=te+Math.imul(Ie,et)|0,Y=Y+Math.imul(Ie,mt)|0,Y=Y+Math.imul(ke,et)|0,be=be+Math.imul(ke,mt)|0;var gr=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(gr>>>26)|0,gr&=67108863,te=Math.imul(Ve,ft),Y=Math.imul(Ve,ht),Y=Y+Math.imul(Ze,ft)|0,be=Math.imul(Ze,ht),te=te+Math.imul(qt,Kt)|0,Y=Y+Math.imul(qt,Ft)|0,Y=Y+Math.imul(Ge,Kt)|0,be=be+Math.imul(Ge,Ft)|0,te=te+Math.imul(Et,jt)|0,Y=Y+Math.imul(Et,rr)|0,Y=Y+Math.imul(Rt,jt)|0,be=be+Math.imul(Rt,rr)|0,te=te+Math.imul(wt,cr)|0,Y=Y+Math.imul(wt,sr)|0,Y=Y+Math.imul(bt,cr)|0,be=be+Math.imul(bt,sr)|0,te=te+Math.imul(Je,ur)|0,Y=Y+Math.imul(Je,Ye)|0,Y=Y+Math.imul(Qe,ur)|0,be=be+Math.imul(Qe,Ye)|0,te=te+Math.imul(Me,qe)|0,Y=Y+Math.imul(Me,pt)|0,Y=Y+Math.imul(Le,qe)|0,be=be+Math.imul(Le,pt)|0,te=te+Math.imul(_e,Tt)|0,Y=Y+Math.imul(_e,At)|0,Y=Y+Math.imul(Oe,Tt)|0,be=be+Math.imul(Oe,At)|0,te=te+Math.imul(Be,Xe)|0,Y=Y+Math.imul(Be,nt)|0,Y=Y+Math.imul(Se,Xe)|0,be=be+Math.imul(Se,nt)|0,te=te+Math.imul(Ae,et)|0,Y=Y+Math.imul(Ae,mt)|0,Y=Y+Math.imul(Ne,et)|0,be=be+Math.imul(Ne,mt)|0,te=te+Math.imul(Ie,Ct)|0,Y=Y+Math.imul(Ie,Pt)|0,Y=Y+Math.imul(ke,Ct)|0,be=be+Math.imul(ke,Pt)|0;var sn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(sn>>>26)|0,sn&=67108863,te=Math.imul(Ve,Kt),Y=Math.imul(Ve,Ft),Y=Y+Math.imul(Ze,Kt)|0,be=Math.imul(Ze,Ft),te=te+Math.imul(qt,jt)|0,Y=Y+Math.imul(qt,rr)|0,Y=Y+Math.imul(Ge,jt)|0,be=be+Math.imul(Ge,rr)|0,te=te+Math.imul(Et,cr)|0,Y=Y+Math.imul(Et,sr)|0,Y=Y+Math.imul(Rt,cr)|0,be=be+Math.imul(Rt,sr)|0,te=te+Math.imul(wt,ur)|0,Y=Y+Math.imul(wt,Ye)|0,Y=Y+Math.imul(bt,ur)|0,be=be+Math.imul(bt,Ye)|0,te=te+Math.imul(Je,qe)|0,Y=Y+Math.imul(Je,pt)|0,Y=Y+Math.imul(Qe,qe)|0,be=be+Math.imul(Qe,pt)|0,te=te+Math.imul(Me,Tt)|0,Y=Y+Math.imul(Me,At)|0,Y=Y+Math.imul(Le,Tt)|0,be=be+Math.imul(Le,At)|0,te=te+Math.imul(_e,Xe)|0,Y=Y+Math.imul(_e,nt)|0,Y=Y+Math.imul(Oe,Xe)|0,be=be+Math.imul(Oe,nt)|0,te=te+Math.imul(Be,et)|0,Y=Y+Math.imul(Be,mt)|0,Y=Y+Math.imul(Se,et)|0,be=be+Math.imul(Se,mt)|0,te=te+Math.imul(Ae,Ct)|0,Y=Y+Math.imul(Ae,Pt)|0,Y=Y+Math.imul(Ne,Ct)|0,be=be+Math.imul(Ne,Pt)|0;var an=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(an>>>26)|0,an&=67108863,te=Math.imul(Ve,jt),Y=Math.imul(Ve,rr),Y=Y+Math.imul(Ze,jt)|0,be=Math.imul(Ze,rr),te=te+Math.imul(qt,cr)|0,Y=Y+Math.imul(qt,sr)|0,Y=Y+Math.imul(Ge,cr)|0,be=be+Math.imul(Ge,sr)|0,te=te+Math.imul(Et,ur)|0,Y=Y+Math.imul(Et,Ye)|0,Y=Y+Math.imul(Rt,ur)|0,be=be+Math.imul(Rt,Ye)|0,te=te+Math.imul(wt,qe)|0,Y=Y+Math.imul(wt,pt)|0,Y=Y+Math.imul(bt,qe)|0,be=be+Math.imul(bt,pt)|0,te=te+Math.imul(Je,Tt)|0,Y=Y+Math.imul(Je,At)|0,Y=Y+Math.imul(Qe,Tt)|0,be=be+Math.imul(Qe,At)|0,te=te+Math.imul(Me,Xe)|0,Y=Y+Math.imul(Me,nt)|0,Y=Y+Math.imul(Le,Xe)|0,be=be+Math.imul(Le,nt)|0,te=te+Math.imul(_e,et)|0,Y=Y+Math.imul(_e,mt)|0,Y=Y+Math.imul(Oe,et)|0,be=be+Math.imul(Oe,mt)|0,te=te+Math.imul(Be,Ct)|0,Y=Y+Math.imul(Be,Pt)|0,Y=Y+Math.imul(Se,Ct)|0,be=be+Math.imul(Se,Pt)|0;var on=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(on>>>26)|0,on&=67108863,te=Math.imul(Ve,cr),Y=Math.imul(Ve,sr),Y=Y+Math.imul(Ze,cr)|0,be=Math.imul(Ze,sr),te=te+Math.imul(qt,ur)|0,Y=Y+Math.imul(qt,Ye)|0,Y=Y+Math.imul(Ge,ur)|0,be=be+Math.imul(Ge,Ye)|0,te=te+Math.imul(Et,qe)|0,Y=Y+Math.imul(Et,pt)|0,Y=Y+Math.imul(Rt,qe)|0,be=be+Math.imul(Rt,pt)|0,te=te+Math.imul(wt,Tt)|0,Y=Y+Math.imul(wt,At)|0,Y=Y+Math.imul(bt,Tt)|0,be=be+Math.imul(bt,At)|0,te=te+Math.imul(Je,Xe)|0,Y=Y+Math.imul(Je,nt)|0,Y=Y+Math.imul(Qe,Xe)|0,be=be+Math.imul(Qe,nt)|0,te=te+Math.imul(Me,et)|0,Y=Y+Math.imul(Me,mt)|0,Y=Y+Math.imul(Le,et)|0,be=be+Math.imul(Le,mt)|0,te=te+Math.imul(_e,Ct)|0,Y=Y+Math.imul(_e,Pt)|0,Y=Y+Math.imul(Oe,Ct)|0,be=be+Math.imul(Oe,Pt)|0;var gn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(gn>>>26)|0,gn&=67108863,te=Math.imul(Ve,ur),Y=Math.imul(Ve,Ye),Y=Y+Math.imul(Ze,ur)|0,be=Math.imul(Ze,Ye),te=te+Math.imul(qt,qe)|0,Y=Y+Math.imul(qt,pt)|0,Y=Y+Math.imul(Ge,qe)|0,be=be+Math.imul(Ge,pt)|0,te=te+Math.imul(Et,Tt)|0,Y=Y+Math.imul(Et,At)|0,Y=Y+Math.imul(Rt,Tt)|0,be=be+Math.imul(Rt,At)|0,te=te+Math.imul(wt,Xe)|0,Y=Y+Math.imul(wt,nt)|0,Y=Y+Math.imul(bt,Xe)|0,be=be+Math.imul(bt,nt)|0,te=te+Math.imul(Je,et)|0,Y=Y+Math.imul(Je,mt)|0,Y=Y+Math.imul(Qe,et)|0,be=be+Math.imul(Qe,mt)|0,te=te+Math.imul(Me,Ct)|0,Y=Y+Math.imul(Me,Pt)|0,Y=Y+Math.imul(Le,Ct)|0,be=be+Math.imul(Le,Pt)|0;var wn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(wn>>>26)|0,wn&=67108863,te=Math.imul(Ve,qe),Y=Math.imul(Ve,pt),Y=Y+Math.imul(Ze,qe)|0,be=Math.imul(Ze,pt),te=te+Math.imul(qt,Tt)|0,Y=Y+Math.imul(qt,At)|0,Y=Y+Math.imul(Ge,Tt)|0,be=be+Math.imul(Ge,At)|0,te=te+Math.imul(Et,Xe)|0,Y=Y+Math.imul(Et,nt)|0,Y=Y+Math.imul(Rt,Xe)|0,be=be+Math.imul(Rt,nt)|0,te=te+Math.imul(wt,et)|0,Y=Y+Math.imul(wt,mt)|0,Y=Y+Math.imul(bt,et)|0,be=be+Math.imul(bt,mt)|0,te=te+Math.imul(Je,Ct)|0,Y=Y+Math.imul(Je,Pt)|0,Y=Y+Math.imul(Qe,Ct)|0,be=be+Math.imul(Qe,Pt)|0;var _n=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(_n>>>26)|0,_n&=67108863,te=Math.imul(Ve,Tt),Y=Math.imul(Ve,At),Y=Y+Math.imul(Ze,Tt)|0,be=Math.imul(Ze,At),te=te+Math.imul(qt,Xe)|0,Y=Y+Math.imul(qt,nt)|0,Y=Y+Math.imul(Ge,Xe)|0,be=be+Math.imul(Ge,nt)|0,te=te+Math.imul(Et,et)|0,Y=Y+Math.imul(Et,mt)|0,Y=Y+Math.imul(Rt,et)|0,be=be+Math.imul(Rt,mt)|0,te=te+Math.imul(wt,Ct)|0,Y=Y+Math.imul(wt,Pt)|0,Y=Y+Math.imul(bt,Ct)|0,be=be+Math.imul(bt,Pt)|0;var vn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(vn>>>26)|0,vn&=67108863,te=Math.imul(Ve,Xe),Y=Math.imul(Ve,nt),Y=Y+Math.imul(Ze,Xe)|0,be=Math.imul(Ze,nt),te=te+Math.imul(qt,et)|0,Y=Y+Math.imul(qt,mt)|0,Y=Y+Math.imul(Ge,et)|0,be=be+Math.imul(Ge,mt)|0,te=te+Math.imul(Et,Ct)|0,Y=Y+Math.imul(Et,Pt)|0,Y=Y+Math.imul(Rt,Ct)|0,be=be+Math.imul(Rt,Pt)|0;var En=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(En>>>26)|0,En&=67108863,te=Math.imul(Ve,et),Y=Math.imul(Ve,mt),Y=Y+Math.imul(Ze,et)|0,be=Math.imul(Ze,mt),te=te+Math.imul(qt,Ct)|0,Y=Y+Math.imul(qt,Pt)|0,Y=Y+Math.imul(Ge,Ct)|0,be=be+Math.imul(Ge,Pt)|0;var xn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(xn>>>26)|0,xn&=67108863,te=Math.imul(Ve,Ct),Y=Math.imul(Ve,Pt),Y=Y+Math.imul(Ze,Ct)|0,be=Math.imul(Ze,Pt);var Rn=(se+te|0)+((Y&8191)<<13)|0;return se=(be+(Y>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,ue[0]=It,ue[1]=Nt,ue[2]=Dt,ue[3]=Ht,ue[4]=Zt,ue[5]=nr,ue[6]=Xt,ue[7]=Qt,ue[8]=gr,ue[9]=sn,ue[10]=an,ue[11]=on,ue[12]=gn,ue[13]=wn,ue[14]=_n,ue[15]=vn,ue[16]=En,ue[17]=xn,ue[18]=Rn,se!==0&&(ue[19]=se,ve.length++),ve};Math.imul||(F=L);function U(J,q,H){H.negative=q.negative^J.negative,H.length=J.length+q.length;for(var ve=0,Z=0,ce=0;ce<H.length-1;ce++){var ue=Z;Z=0;for(var se=ve&67108863,te=Math.min(ce,q.length-1),Y=Math.max(0,ce-J.length+1);Y<=te;Y++){var be=ce-Y,ye=J.words[be]|0,Ie=q.words[Y]|0,ke=ye*Ie,Ce=ke&67108863;ue=ue+(ke/67108864|0)|0,Ce=Ce+se|0,se=Ce&67108863,ue=ue+(Ce>>>26)|0,Z+=ue>>>26,ue&=67108863}H.words[ce]=se,ve=ue,ue=Z}return ve!==0?H.words[ce]=ve:H.length--,H._strip()}function j(J,q,H){return U(J,q,H)}S.prototype.mulTo=function(q,H){var ve,Z=this.length+q.length;return this.length===10&&q.length===10?ve=F(this,q,H):Z<63?ve=L(this,q,H):Z<1024?ve=U(this,q,H):ve=j(this,q,H),ve},S.prototype.mul=function(q){var H=new S(null);return H.words=new Array(this.length+q.length),this.mulTo(q,H)},S.prototype.mulf=function(q){var H=new S(null);return H.words=new Array(this.length+q.length),j(this,q,H)},S.prototype.imul=function(q){return this.clone().mulTo(q,this)},S.prototype.imuln=function(q){var H=q<0;H&&(q=-q),_(typeof q=="number"),_(q<67108864);for(var ve=0,Z=0;Z<this.length;Z++){var ce=(this.words[Z]|0)*q,ue=(ce&67108863)+(ve&67108863);ve>>=26,ve+=ce/67108864|0,ve+=ue>>>26,this.words[Z]=ue&67108863}return ve!==0&&(this.words[Z]=ve,this.length++),H?this.ineg():this},S.prototype.muln=function(q){return this.clone().imuln(q)},S.prototype.sqr=function(){return this.mul(this)},S.prototype.isqr=function(){return this.imul(this.clone())},S.prototype.pow=function(q){var H=O(q);if(H.length===0)return new S(1);for(var ve=this,Z=0;Z<H.length&&H[Z]===0;Z++,ve=ve.sqr());if(++Z<H.length)for(var ce=ve.sqr();Z<H.length;Z++,ce=ce.sqr())H[Z]!==0&&(ve=ve.mul(ce));return ve},S.prototype.iushln=function(q){_(typeof q=="number"&&q>=0);var H=q%26,ve=(q-H)/26,Z=67108863>>>26-H<<26-H,ce;if(H!==0){var ue=0;for(ce=0;ce<this.length;ce++){var se=this.words[ce]&Z,te=(this.words[ce]|0)-se<<H;this.words[ce]=te|ue,ue=se>>>26-H}ue&&(this.words[ce]=ue,this.length++)}if(ve!==0){for(ce=this.length-1;ce>=0;ce--)this.words[ce+ve]=this.words[ce];for(ce=0;ce<ve;ce++)this.words[ce]=0;this.length+=ve}return this._strip()},S.prototype.ishln=function(q){return _(this.negative===0),this.iushln(q)},S.prototype.iushrn=function(q,H,ve){_(typeof q=="number"&&q>=0);var Z;H?Z=(H-H%26)/26:Z=0;var ce=q%26,ue=Math.min((q-ce)/26,this.length),se=67108863^67108863>>>ce<<ce,te=ve;if(Z-=ue,Z=Math.max(0,Z),te){for(var Y=0;Y<ue;Y++)te.words[Y]=this.words[Y];te.length=ue}if(ue!==0)if(this.length>ue)for(this.length-=ue,Y=0;Y<this.length;Y++)this.words[Y]=this.words[Y+ue];else this.words[0]=0,this.length=1;var be=0;for(Y=this.length-1;Y>=0&&(be!==0||Y>=Z);Y--){var ye=this.words[Y]|0;this.words[Y]=be<<26-ce|ye>>>ce,be=ye&se}return te&&be!==0&&(te.words[te.length++]=be),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},S.prototype.ishrn=function(q,H,ve){return _(this.negative===0),this.iushrn(q,H,ve)},S.prototype.shln=function(q){return this.clone().ishln(q)},S.prototype.ushln=function(q){return this.clone().iushln(q)},S.prototype.shrn=function(q){return this.clone().ishrn(q)},S.prototype.ushrn=function(q){return this.clone().iushrn(q)},S.prototype.testn=function(q){_(typeof q=="number"&&q>=0);var H=q%26,ve=(q-H)/26,Z=1<<H;if(this.length<=ve)return!1;var ce=this.words[ve];return!!(ce&Z)},S.prototype.imaskn=function(q){_(typeof q=="number"&&q>=0);var H=q%26,ve=(q-H)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=ve)return this;if(H!==0&&ve++,this.length=Math.min(ve,this.length),H!==0){var Z=67108863^67108863>>>H<<H;this.words[this.length-1]&=Z}return this._strip()},S.prototype.maskn=function(q){return this.clone().imaskn(q)},S.prototype.iaddn=function(q){return _(typeof q=="number"),_(q<67108864),q<0?this.isubn(-q):this.negative!==0?this.length===1&&(this.words[0]|0)<=q?(this.words[0]=q-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(q),this.negative=1,this):this._iaddn(q)},S.prototype._iaddn=function(q){this.words[0]+=q;for(var H=0;H<this.length&&this.words[H]>=67108864;H++)this.words[H]-=67108864,H===this.length-1?this.words[H+1]=1:this.words[H+1]++;return this.length=Math.max(this.length,H+1),this},S.prototype.isubn=function(q){if(_(typeof q=="number"),_(q<67108864),q<0)return this.iaddn(-q);if(this.negative!==0)return this.negative=0,this.iaddn(q),this.negative=1,this;if(this.words[0]-=q,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var H=0;H<this.length&&this.words[H]<0;H++)this.words[H]+=67108864,this.words[H+1]-=1;return this._strip()},S.prototype.addn=function(q){return this.clone().iaddn(q)},S.prototype.subn=function(q){return this.clone().isubn(q)},S.prototype.iabs=function(){return this.negative=0,this},S.prototype.abs=function(){return this.clone().iabs()},S.prototype._ishlnsubmul=function(q,H,ve){var Z=q.length+ve,ce;this._expand(Z);var ue,se=0;for(ce=0;ce<q.length;ce++){ue=(this.words[ce+ve]|0)+se;var te=(q.words[ce]|0)*H;ue-=te&67108863,se=(ue>>26)-(te/67108864|0),this.words[ce+ve]=ue&67108863}for(;ce<this.length-ve;ce++)ue=(this.words[ce+ve]|0)+se,se=ue>>26,this.words[ce+ve]=ue&67108863;if(se===0)return this._strip();for(_(se===-1),se=0,ce=0;ce<this.length;ce++)ue=-(this.words[ce]|0)+se,se=ue>>26,this.words[ce]=ue&67108863;return this.negative=1,this._strip()},S.prototype._wordDiv=function(q,H){var ve=this.length-q.length,Z=this.clone(),ce=q,ue=ce.words[ce.length-1]|0,se=this._countBits(ue);ve=26-se,ve!==0&&(ce=ce.ushln(ve),Z.iushln(ve),ue=ce.words[ce.length-1]|0);var te=Z.length-ce.length,Y;if(H!=="mod"){Y=new S(null),Y.length=te+1,Y.words=new Array(Y.length);for(var be=0;be<Y.length;be++)Y.words[be]=0}var ye=Z.clone()._ishlnsubmul(ce,1,te);ye.negative===0&&(Z=ye,Y&&(Y.words[te]=1));for(var Ie=te-1;Ie>=0;Ie--){var ke=(Z.words[ce.length+Ie]|0)*67108864+(Z.words[ce.length+Ie-1]|0);for(ke=Math.min(ke/ue|0,67108863),Z._ishlnsubmul(ce,ke,Ie);Z.negative!==0;)ke--,Z.negative=0,Z._ishlnsubmul(ce,1,Ie),Z.isZero()||(Z.negative^=1);Y&&(Y.words[Ie]=ke)}return Y&&Y._strip(),Z._strip(),H!=="div"&&ve!==0&&Z.iushrn(ve),{div:Y||null,mod:Z}},S.prototype.divmod=function(q,H,ve){if(_(!q.isZero()),this.isZero())return{div:new S(0),mod:new S(0)};var Z,ce,ue;return this.negative!==0&&q.negative===0?(ue=this.neg().divmod(q,H),H!=="mod"&&(Z=ue.div.neg()),H!=="div"&&(ce=ue.mod.neg(),ve&&ce.negative!==0&&ce.iadd(q)),{div:Z,mod:ce}):this.negative===0&&q.negative!==0?(ue=this.divmod(q.neg(),H),H!=="mod"&&(Z=ue.div.neg()),{div:Z,mod:ue.mod}):this.negative&q.negative?(ue=this.neg().divmod(q.neg(),H),H!=="div"&&(ce=ue.mod.neg(),ve&&ce.negative!==0&&ce.isub(q)),{div:ue.div,mod:ce}):q.length>this.length||this.cmp(q)<0?{div:new S(0),mod:this}:q.length===1?H==="div"?{div:this.divn(q.words[0]),mod:null}:H==="mod"?{div:null,mod:new S(this.modrn(q.words[0]))}:{div:this.divn(q.words[0]),mod:new S(this.modrn(q.words[0]))}:this._wordDiv(q,H)},S.prototype.div=function(q){return this.divmod(q,"div",!1).div},S.prototype.mod=function(q){return this.divmod(q,"mod",!1).mod},S.prototype.umod=function(q){return this.divmod(q,"mod",!0).mod},S.prototype.divRound=function(q){var H=this.divmod(q);if(H.mod.isZero())return H.div;var ve=H.div.negative!==0?H.mod.isub(q):H.mod,Z=q.ushrn(1),ce=q.andln(1),ue=ve.cmp(Z);return ue<0||ce===1&&ue===0?H.div:H.div.negative!==0?H.div.isubn(1):H.div.iaddn(1)},S.prototype.modrn=function(q){var H=q<0;H&&(q=-q),_(q<=67108863);for(var ve=(1<<26)%q,Z=0,ce=this.length-1;ce>=0;ce--)Z=(ve*Z+(this.words[ce]|0))%q;return H?-Z:Z},S.prototype.modn=function(q){return this.modrn(q)},S.prototype.idivn=function(q){var H=q<0;H&&(q=-q),_(q<=67108863);for(var ve=0,Z=this.length-1;Z>=0;Z--){var ce=(this.words[Z]|0)+ve*67108864;this.words[Z]=ce/q|0,ve=ce%q}return this._strip(),H?this.ineg():this},S.prototype.divn=function(q){return this.clone().idivn(q)},S.prototype.egcd=function(q){_(q.negative===0),_(!q.isZero());var H=this,ve=q.clone();H.negative!==0?H=H.umod(q):H=H.clone();for(var Z=new S(1),ce=new S(0),ue=new S(0),se=new S(1),te=0;H.isEven()&&ve.isEven();)H.iushrn(1),ve.iushrn(1),++te;for(var Y=ve.clone(),be=H.clone();!H.isZero();){for(var ye=0,Ie=1;!(H.words[0]&Ie)&&ye<26;++ye,Ie<<=1);if(ye>0)for(H.iushrn(ye);ye-- >0;)(Z.isOdd()||ce.isOdd())&&(Z.iadd(Y),ce.isub(be)),Z.iushrn(1),ce.iushrn(1);for(var ke=0,Ce=1;!(ve.words[0]&Ce)&&ke<26;++ke,Ce<<=1);if(ke>0)for(ve.iushrn(ke);ke-- >0;)(ue.isOdd()||se.isOdd())&&(ue.iadd(Y),se.isub(be)),ue.iushrn(1),se.iushrn(1);H.cmp(ve)>=0?(H.isub(ve),Z.isub(ue),ce.isub(se)):(ve.isub(H),ue.isub(Z),se.isub(ce))}return{a:ue,b:se,gcd:ve.iushln(te)}},S.prototype._invmp=function(q){_(q.negative===0),_(!q.isZero());var H=this,ve=q.clone();H.negative!==0?H=H.umod(q):H=H.clone();for(var Z=new S(1),ce=new S(0),ue=ve.clone();H.cmpn(1)>0&&ve.cmpn(1)>0;){for(var se=0,te=1;!(H.words[0]&te)&&se<26;++se,te<<=1);if(se>0)for(H.iushrn(se);se-- >0;)Z.isOdd()&&Z.iadd(ue),Z.iushrn(1);for(var Y=0,be=1;!(ve.words[0]&be)&&Y<26;++Y,be<<=1);if(Y>0)for(ve.iushrn(Y);Y-- >0;)ce.isOdd()&&ce.iadd(ue),ce.iushrn(1);H.cmp(ve)>=0?(H.isub(ve),Z.isub(ce)):(ve.isub(H),ce.isub(Z))}var ye;return H.cmpn(1)===0?ye=Z:ye=ce,ye.cmpn(0)<0&&ye.iadd(q),ye},S.prototype.gcd=function(q){if(this.isZero())return q.abs();if(q.isZero())return this.abs();var H=this.clone(),ve=q.clone();H.negative=0,ve.negative=0;for(var Z=0;H.isEven()&&ve.isEven();Z++)H.iushrn(1),ve.iushrn(1);do{for(;H.isEven();)H.iushrn(1);for(;ve.isEven();)ve.iushrn(1);var ce=H.cmp(ve);if(ce<0){var ue=H;H=ve,ve=ue}else if(ce===0||ve.cmpn(1)===0)break;H.isub(ve)}while(!0);return ve.iushln(Z)},S.prototype.invm=function(q){return this.egcd(q).a.umod(q)},S.prototype.isEven=function(){return(this.words[0]&1)===0},S.prototype.isOdd=function(){return(this.words[0]&1)===1},S.prototype.andln=function(q){return this.words[0]&q},S.prototype.bincn=function(q){_(typeof q=="number");var H=q%26,ve=(q-H)/26,Z=1<<H;if(this.length<=ve)return this._expand(ve+1),this.words[ve]|=Z,this;for(var ce=Z,ue=ve;ce!==0&&ue<this.length;ue++){var se=this.words[ue]|0;se+=ce,ce=se>>>26,se&=67108863,this.words[ue]=se}return ce!==0&&(this.words[ue]=ce,this.length++),this},S.prototype.isZero=function(){return this.length===1&&this.words[0]===0},S.prototype.cmpn=function(q){var H=q<0;if(this.negative!==0&&!H)return-1;if(this.negative===0&&H)return 1;this._strip();var ve;if(this.length>1)ve=1;else{H&&(q=-q),_(q<=67108863,"Number is too big");var Z=this.words[0]|0;ve=Z===q?0:Z<q?-1:1}return this.negative!==0?-ve|0:ve},S.prototype.cmp=function(q){if(this.negative!==0&&q.negative===0)return-1;if(this.negative===0&&q.negative!==0)return 1;var H=this.ucmp(q);return this.negative!==0?-H|0:H},S.prototype.ucmp=function(q){if(this.length>q.length)return 1;if(this.length<q.length)return-1;for(var H=0,ve=this.length-1;ve>=0;ve--){var Z=this.words[ve]|0,ce=q.words[ve]|0;if(Z!==ce){Z<ce?H=-1:Z>ce&&(H=1);break}}return H},S.prototype.gtn=function(q){return this.cmpn(q)===1},S.prototype.gt=function(q){return this.cmp(q)===1},S.prototype.gten=function(q){return this.cmpn(q)>=0},S.prototype.gte=function(q){return this.cmp(q)>=0},S.prototype.ltn=function(q){return this.cmpn(q)===-1},S.prototype.lt=function(q){return this.cmp(q)===-1},S.prototype.lten=function(q){return this.cmpn(q)<=0},S.prototype.lte=function(q){return this.cmp(q)<=0},S.prototype.eqn=function(q){return this.cmpn(q)===0},S.prototype.eq=function(q){return this.cmp(q)===0},S.red=function(q){return new we(q)},S.prototype.toRed=function(q){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),q.convertTo(this)._forceRed(q)},S.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},S.prototype._forceRed=function(q){return this.red=q,this},S.prototype.forceRed=function(q){return _(!this.red,"Already a number in reduction context"),this._forceRed(q)},S.prototype.redAdd=function(q){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,q)},S.prototype.redIAdd=function(q){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,q)},S.prototype.redSub=function(q){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,q)},S.prototype.redISub=function(q){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,q)},S.prototype.redShl=function(q){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,q)},S.prototype.redMul=function(q){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,q),this.red.mul(this,q)},S.prototype.redIMul=function(q){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,q),this.red.imul(this,q)},S.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},S.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},S.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},S.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},S.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},S.prototype.redPow=function(q){return _(this.red&&!q.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,q)};var z={k256:null,p224:null,p192:null,p25519:null};function W(J,q){this.name=J,this.p=new S(q,16),this.n=this.p.bitLength(),this.k=new S(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}W.prototype._tmp=function(){var q=new S(null);return q.words=new Array(Math.ceil(this.n/13)),q},W.prototype.ireduce=function(q){var H=q,ve;do this.split(H,this.tmp),H=this.imulK(H),H=H.iadd(this.tmp),ve=H.bitLength();while(ve>this.n);var Z=ve<this.n?-1:H.ucmp(this.p);return Z===0?(H.words[0]=0,H.length=1):Z>0?H.isub(this.p):H.strip!==void 0?H.strip():H._strip(),H},W.prototype.split=function(q,H){q.iushrn(this.n,0,H)},W.prototype.imulK=function(q){return q.imul(this.k)};function X(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}x(X,W),X.prototype.split=function(q,H){for(var ve=4194303,Z=Math.min(q.length,9),ce=0;ce<Z;ce++)H.words[ce]=q.words[ce];if(H.length=Z,q.length<=9){q.words[0]=0,q.length=1;return}var ue=q.words[9];for(H.words[H.length++]=ue&ve,ce=10;ce<q.length;ce++){var se=q.words[ce]|0;q.words[ce-10]=(se&ve)<<4|ue>>>22,ue=se}ue>>>=22,q.words[ce-10]=ue,ue===0&&q.length>10?q.length-=10:q.length-=9},X.prototype.imulK=function(q){q.words[q.length]=0,q.words[q.length+1]=0,q.length+=2;for(var H=0,ve=0;ve<q.length;ve++){var Z=q.words[ve]|0;H+=Z*977,q.words[ve]=H&67108863,H=Z*64+(H/67108864|0)}return q.words[q.length-1]===0&&(q.length--,q.words[q.length-1]===0&&q.length--),q};function ie(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}x(ie,W);function fe(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}x(fe,W);function xe(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}x(xe,W),xe.prototype.imulK=function(q){for(var H=0,ve=0;ve<q.length;ve++){var Z=(q.words[ve]|0)*19+H,ce=Z&67108863;Z>>>=26,q.words[ve]=ce,H=Z}return H!==0&&(q.words[q.length++]=H),q},S._prime=function(q){if(z[q])return z[q];var H;if(q==="k256")H=new X;else if(q==="p224")H=new ie;else if(q==="p192")H=new fe;else if(q==="p25519")H=new xe;else throw new Error("Unknown prime "+q);return z[q]=H,H};function we(J){if(typeof J=="string"){var q=S._prime(J);this.m=q.p,this.prime=q}else _(J.gtn(1),"modulus must be greater than 1"),this.m=J,this.prime=null}we.prototype._verify1=function(q){_(q.negative===0,"red works only with positives"),_(q.red,"red works only with red numbers")},we.prototype._verify2=function(q,H){_((q.negative|H.negative)===0,"red works only with positives"),_(q.red&&q.red===H.red,"red works only with red numbers")},we.prototype.imod=function(q){return this.prime?this.prime.ireduce(q)._forceRed(this):(A(q,q.umod(this.m)._forceRed(this)),q)},we.prototype.neg=function(q){return q.isZero()?q.clone():this.m.sub(q)._forceRed(this)},we.prototype.add=function(q,H){this._verify2(q,H);var ve=q.add(H);return ve.cmp(this.m)>=0&&ve.isub(this.m),ve._forceRed(this)},we.prototype.iadd=function(q,H){this._verify2(q,H);var ve=q.iadd(H);return ve.cmp(this.m)>=0&&ve.isub(this.m),ve},we.prototype.sub=function(q,H){this._verify2(q,H);var ve=q.sub(H);return ve.cmpn(0)<0&&ve.iadd(this.m),ve._forceRed(this)},we.prototype.isub=function(q,H){this._verify2(q,H);var ve=q.isub(H);return ve.cmpn(0)<0&&ve.iadd(this.m),ve},we.prototype.shl=function(q,H){return this._verify1(q),this.imod(q.ushln(H))},we.prototype.imul=function(q,H){return this._verify2(q,H),this.imod(q.imul(H))},we.prototype.mul=function(q,H){return this._verify2(q,H),this.imod(q.mul(H))},we.prototype.isqr=function(q){return this.imul(q,q.clone())},we.prototype.sqr=function(q){return this.mul(q,q)},we.prototype.sqrt=function(q){if(q.isZero())return q.clone();var H=this.m.andln(3);if(_(H%2===1),H===3){var ve=this.m.add(new S(1)).iushrn(2);return this.pow(q,ve)}for(var Z=this.m.subn(1),ce=0;!Z.isZero()&&Z.andln(1)===0;)ce++,Z.iushrn(1);_(!Z.isZero());var ue=new S(1).toRed(this),se=ue.redNeg(),te=this.m.subn(1).iushrn(1),Y=this.m.bitLength();for(Y=new S(2*Y*Y).toRed(this);this.pow(Y,te).cmp(se)!==0;)Y.redIAdd(se);for(var be=this.pow(Y,Z),ye=this.pow(q,Z.addn(1).iushrn(1)),Ie=this.pow(q,Z),ke=ce;Ie.cmp(ue)!==0;){for(var Ce=Ie,Ae=0;Ce.cmp(ue)!==0;Ae++)Ce=Ce.redSqr();_(Ae<ke);var Ne=this.pow(be,new S(1).iushln(ke-Ae-1));ye=ye.redMul(Ne),be=Ne.redSqr(),Ie=Ie.redMul(be),ke=Ae}return ye},we.prototype.invm=function(q){var H=q._invmp(this.m);return H.negative!==0?(H.negative=0,this.imod(H).redNeg()):this.imod(H)},we.prototype.pow=function(q,H){if(H.isZero())return new S(1).toRed(this);if(H.cmpn(1)===0)return q.clone();var ve=4,Z=new Array(1<<ve);Z[0]=new S(1).toRed(this),Z[1]=q;for(var ce=2;ce<Z.length;ce++)Z[ce]=this.mul(Z[ce-1],q);var ue=Z[0],se=0,te=0,Y=H.bitLength()%26;for(Y===0&&(Y=26),ce=H.length-1;ce>=0;ce--){for(var be=H.words[ce],ye=Y-1;ye>=0;ye--){var Ie=be>>ye&1;if(ue!==Z[0]&&(ue=this.sqr(ue)),Ie===0&&se===0){te=0;continue}se<<=1,se|=Ie,te++,!(te!==ve&&(ce!==0||ye!==0))&&(ue=this.mul(ue,Z[se]),te=0,se=0)}Y=26}return ue},we.prototype.convertTo=function(q){var H=q.umod(this.m);return H===q?H.clone():H},we.prototype.convertFrom=function(q){var H=q.clone();return H.red=null,H},S.mont=function(q){return new G(q)};function G(J){we.call(this,J),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new S(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x(G,we),G.prototype.convertTo=function(q){return this.imod(q.ushln(this.shift))},G.prototype.convertFrom=function(q){var H=this.imod(q.mul(this.rinv));return H.red=null,H},G.prototype.imul=function(q,H){if(q.isZero()||H.isZero())return q.words[0]=0,q.length=1,q;var ve=q.imul(H),Z=ve.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ce=ve.isub(Z).iushrn(this.shift),ue=ce;return ce.cmp(this.m)>=0?ue=ce.isub(this.m):ce.cmpn(0)<0&&(ue=ce.iadd(this.m)),ue._forceRed(this)},G.prototype.mul=function(q,H){if(q.isZero()||H.isZero())return new S(0)._forceRed(this);var ve=q.mul(H),Z=ve.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ce=ve.isub(Z).iushrn(this.shift),ue=ce;return ce.cmp(this.m)>=0?ue=ce.isub(this.m):ce.cmpn(0)<0&&(ue=ce.iadd(this.m)),ue._forceRed(this)},G.prototype.invm=function(q){var H=this.imod(q._invmp(this.m).mul(this.r2));return H._forceRed(this)}})(n,bn$2)}(bn$3)),bn$3.exports}var browserifyRsa,hasRequiredBrowserifyRsa;function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var n=requireBn$1(),r=requireBrowser$c(),g=requireSafeBuffer$1().Buffer;function _(E){var C=E.modulus.byteLength(),T;do T=new n(r(C));while(T.cmp(E.modulus)>=0||!T.umod(E.prime1)||!T.umod(E.prime2));return T}function x(E){var C=_(E),T=C.toRed(n.mont(E.modulus)).redPow(new n(E.publicExponent)).fromRed();return{blinder:T,unblinder:C.invm(E.modulus)}}function S(E,C){var T=x(C),R=C.modulus.byteLength(),A=new n(E).mul(T.blinder).umod(C.modulus),I=A.toRed(n.mont(C.prime1)),B=A.toRed(n.mont(C.prime2)),D=C.coefficient,N=C.prime1,M=C.prime2,O=I.redPow(C.exponent1).fromRed(),L=B.redPow(C.exponent2).fromRed(),F=O.isub(L).imul(D).umod(N).imul(M);return L.iadd(F).imul(T.unblinder).umod(C.modulus).toArrayLike(g,"be",R)}return S.getr=_,browserifyRsa=S,browserifyRsa}var elliptic={};const name$2="elliptic",version$3="6.6.1",description="EC cryptography",main="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$1={name:name$2,version:version$3,description,main,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$3={},utils$2={},hasRequiredUtils$3;function requireUtils$3(){return hasRequiredUtils$3||(hasRequiredUtils$3=1,function(n){var r=n;function g(S,E){if(Array.isArray(S))return S.slice();if(!S)return[];var C=[];if(typeof S!="string"){for(var T=0;T<S.length;T++)C[T]=S[T]|0;return C}if(E==="hex"){S=S.replace(/[^a-z0-9]+/ig,""),S.length%2!==0&&(S="0"+S);for(var T=0;T<S.length;T+=2)C.push(parseInt(S[T]+S[T+1],16))}else for(var T=0;T<S.length;T++){var R=S.charCodeAt(T),A=R>>8,I=R&255;A?C.push(A,I):C.push(I)}return C}r.toArray=g;function _(S){return S.length===1?"0"+S:S}r.zero2=_;function x(S){for(var E="",C=0;C<S.length;C++)E+=_(S[C].toString(16));return E}r.toHex=x,r.encode=function(E,C){return C==="hex"?x(E):E}}(utils$2)),utils$2}var hasRequiredUtils$2;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(n){var r=n,g=requireBn$2(),_=requireMinimalisticAssert(),x=requireUtils$3();r.assert=_,r.toArray=x.toArray,r.zero2=x.zero2,r.toHex=x.toHex,r.encode=x.encode;function S(A,I,B){var D=new Array(Math.max(A.bitLength(),B)+1),N;for(N=0;N<D.length;N+=1)D[N]=0;var M=1<<I+1,O=A.clone();for(N=0;N<D.length;N++){var L,F=O.andln(M-1);O.isOdd()?(F>(M>>1)-1?L=(M>>1)-F:L=F,O.isubn(L)):L=0,D[N]=L,O.iushrn(1)}return D}r.getNAF=S;function E(A,I){var B=[[],[]];A=A.clone(),I=I.clone();for(var D=0,N=0,M;A.cmpn(-D)>0||I.cmpn(-N)>0;){var O=A.andln(3)+D&3,L=I.andln(3)+N&3;O===3&&(O=-1),L===3&&(L=-1);var F;O&1?(M=A.andln(7)+D&7,(M===3||M===5)&&L===2?F=-O:F=O):F=0,B[0].push(F);var U;L&1?(M=I.andln(7)+N&7,(M===3||M===5)&&O===2?U=-L:U=L):U=0,B[1].push(U),2*D===F+1&&(D=1-D),2*N===U+1&&(N=1-N),A.iushrn(1),I.iushrn(1)}return B}r.getJSF=E;function C(A,I,B){var D="_"+I;A.prototype[I]=function(){return this[D]!==void 0?this[D]:this[D]=B.call(this)}}r.cachedProperty=C;function T(A){return typeof A=="string"?r.toArray(A,"hex"):A}r.parseBytes=T;function R(A){return new g(A,"hex","le")}r.intFromLE=R}(utils$3)),utils$3}var curve={},base$3,hasRequiredBase$1;function requireBase$1(){if(hasRequiredBase$1)return base$3;hasRequiredBase$1=1;var n=requireBn$2(),r=requireUtils$2(),g=r.getNAF,_=r.getJSF,x=r.assert;function S(C,T){this.type=C,this.p=new n(T.p,16),this.red=T.prime?n.red(T.prime):n.mont(this.p),this.zero=new n(0).toRed(this.red),this.one=new n(1).toRed(this.red),this.two=new n(2).toRed(this.red),this.n=T.n&&new n(T.n,16),this.g=T.g&&this.pointFromJSON(T.g,T.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var R=this.n&&this.p.div(this.n);!R||R.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}base$3=S,S.prototype.point=function(){throw new Error("Not implemented")},S.prototype.validate=function(){throw new Error("Not implemented")},S.prototype._fixedNafMul=function(T,R){x(T.precomputed);var A=T._getDoubles(),I=g(R,1,this._bitLength),B=(1<<A.step+1)-(A.step%2===0?2:1);B/=3;var D=[],N,M;for(N=0;N<I.length;N+=A.step){M=0;for(var O=N+A.step-1;O>=N;O--)M=(M<<1)+I[O];D.push(M)}for(var L=this.jpoint(null,null,null),F=this.jpoint(null,null,null),U=B;U>0;U--){for(N=0;N<D.length;N++)M=D[N],M===U?F=F.mixedAdd(A.points[N]):M===-U&&(F=F.mixedAdd(A.points[N].neg()));L=L.add(F)}return L.toP()},S.prototype._wnafMul=function(T,R){var A=4,I=T._getNAFPoints(A);A=I.wnd;for(var B=I.points,D=g(R,A,this._bitLength),N=this.jpoint(null,null,null),M=D.length-1;M>=0;M--){for(var O=0;M>=0&&D[M]===0;M--)O++;if(M>=0&&O++,N=N.dblp(O),M<0)break;var L=D[M];x(L!==0),T.type==="affine"?L>0?N=N.mixedAdd(B[L-1>>1]):N=N.mixedAdd(B[-L-1>>1].neg()):L>0?N=N.add(B[L-1>>1]):N=N.add(B[-L-1>>1].neg())}return T.type==="affine"?N.toP():N},S.prototype._wnafMulAdd=function(T,R,A,I,B){var D=this._wnafT1,N=this._wnafT2,M=this._wnafT3,O=0,L,F,U;for(L=0;L<I;L++){U=R[L];var j=U._getNAFPoints(T);D[L]=j.wnd,N[L]=j.points}for(L=I-1;L>=1;L-=2){var z=L-1,W=L;if(D[z]!==1||D[W]!==1){M[z]=g(A[z],D[z],this._bitLength),M[W]=g(A[W],D[W],this._bitLength),O=Math.max(M[z].length,O),O=Math.max(M[W].length,O);continue}var X=[R[z],null,null,R[W]];R[z].y.cmp(R[W].y)===0?(X[1]=R[z].add(R[W]),X[2]=R[z].toJ().mixedAdd(R[W].neg())):R[z].y.cmp(R[W].y.redNeg())===0?(X[1]=R[z].toJ().mixedAdd(R[W]),X[2]=R[z].add(R[W].neg())):(X[1]=R[z].toJ().mixedAdd(R[W]),X[2]=R[z].toJ().mixedAdd(R[W].neg()));var ie=[-3,-1,-5,-7,0,7,5,1,3],fe=_(A[z],A[W]);for(O=Math.max(fe[0].length,O),M[z]=new Array(O),M[W]=new Array(O),F=0;F<O;F++){var xe=fe[0][F]|0,we=fe[1][F]|0;M[z][F]=ie[(xe+1)*3+(we+1)],M[W][F]=0,N[z]=X}}var G=this.jpoint(null,null,null),J=this._wnafT4;for(L=O;L>=0;L--){for(var q=0;L>=0;){var H=!0;for(F=0;F<I;F++)J[F]=M[F][L]|0,J[F]!==0&&(H=!1);if(!H)break;q++,L--}if(L>=0&&q++,G=G.dblp(q),L<0)break;for(F=0;F<I;F++){var ve=J[F];ve!==0&&(ve>0?U=N[F][ve-1>>1]:ve<0&&(U=N[F][-ve-1>>1].neg()),U.type==="affine"?G=G.mixedAdd(U):G=G.add(U))}}for(L=0;L<I;L++)N[L]=null;return B?G:G.toP()};function E(C,T){this.curve=C,this.type=T,this.precomputed=null}return S.BasePoint=E,E.prototype.eq=function(){throw new Error("Not implemented")},E.prototype.validate=function(){return this.curve.validate(this)},S.prototype.decodePoint=function(T,R){T=r.toArray(T,R);var A=this.p.byteLength();if((T[0]===4||T[0]===6||T[0]===7)&&T.length-1===2*A){T[0]===6?x(T[T.length-1]%2===0):T[0]===7&&x(T[T.length-1]%2===1);var I=this.point(T.slice(1,1+A),T.slice(1+A,1+2*A));return I}else if((T[0]===2||T[0]===3)&&T.length-1===A)return this.pointFromX(T.slice(1,1+A),T[0]===3);throw new Error("Unknown point format")},E.prototype.encodeCompressed=function(T){return this.encode(T,!0)},E.prototype._encode=function(T){var R=this.curve.p.byteLength(),A=this.getX().toArray("be",R);return T?[this.getY().isEven()?2:3].concat(A):[4].concat(A,this.getY().toArray("be",R))},E.prototype.encode=function(T,R){return r.encode(this._encode(R),T)},E.prototype.precompute=function(T){if(this.precomputed)return this;var R={doubles:null,naf:null,beta:null};return R.naf=this._getNAFPoints(8),R.doubles=this._getDoubles(4,T),R.beta=this._getBeta(),this.precomputed=R,this},E.prototype._hasDoubles=function(T){if(!this.precomputed)return!1;var R=this.precomputed.doubles;return R?R.points.length>=Math.ceil((T.bitLength()+1)/R.step):!1},E.prototype._getDoubles=function(T,R){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var A=[this],I=this,B=0;B<R;B+=T){for(var D=0;D<T;D++)I=I.dbl();A.push(I)}return{step:T,points:A}},E.prototype._getNAFPoints=function(T){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var R=[this],A=(1<<T)-1,I=A===1?null:this.dbl(),B=1;B<A;B++)R[B]=R[B-1].add(I);return{wnd:T,points:R}},E.prototype._getBeta=function(){return null},E.prototype.dblp=function(T){for(var R=this,A=0;A<T;A++)R=R.dbl();return R},base$3}var short,hasRequiredShort;function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var n=requireUtils$2(),r=requireBn$2(),g=requireInherits_browser(),_=requireBase$1(),x=n.assert;function S(T){_.call(this,"short",T),this.a=new r(T.a,16).toRed(this.red),this.b=new r(T.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(T),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}g(S,_),short=S,S.prototype._getEndomorphism=function(R){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var A,I;if(R.beta)A=new r(R.beta,16).toRed(this.red);else{var B=this._getEndoRoots(this.p);A=B[0].cmp(B[1])<0?B[0]:B[1],A=A.toRed(this.red)}if(R.lambda)I=new r(R.lambda,16);else{var D=this._getEndoRoots(this.n);this.g.mul(D[0]).x.cmp(this.g.x.redMul(A))===0?I=D[0]:(I=D[1],x(this.g.mul(I).x.cmp(this.g.x.redMul(A))===0))}var N;return R.basis?N=R.basis.map(function(M){return{a:new r(M.a,16),b:new r(M.b,16)}}):N=this._getEndoBasis(I),{beta:A,lambda:I,basis:N}}},S.prototype._getEndoRoots=function(R){var A=R===this.p?this.red:r.mont(R),I=new r(2).toRed(A).redInvm(),B=I.redNeg(),D=new r(3).toRed(A).redNeg().redSqrt().redMul(I),N=B.redAdd(D).fromRed(),M=B.redSub(D).fromRed();return[N,M]},S.prototype._getEndoBasis=function(R){for(var A=this.n.ushrn(Math.floor(this.n.bitLength()/2)),I=R,B=this.n.clone(),D=new r(1),N=new r(0),M=new r(0),O=new r(1),L,F,U,j,z,W,X,ie=0,fe,xe;I.cmpn(0)!==0;){var we=B.div(I);fe=B.sub(we.mul(I)),xe=M.sub(we.mul(D));var G=O.sub(we.mul(N));if(!U&&fe.cmp(A)<0)L=X.neg(),F=D,U=fe.neg(),j=xe;else if(U&&++ie===2)break;X=fe,B=I,I=fe,M=D,D=xe,O=N,N=G}z=fe.neg(),W=xe;var J=U.sqr().add(j.sqr()),q=z.sqr().add(W.sqr());return q.cmp(J)>=0&&(z=L,W=F),U.negative&&(U=U.neg(),j=j.neg()),z.negative&&(z=z.neg(),W=W.neg()),[{a:U,b:j},{a:z,b:W}]},S.prototype._endoSplit=function(R){var A=this.endo.basis,I=A[0],B=A[1],D=B.b.mul(R).divRound(this.n),N=I.b.neg().mul(R).divRound(this.n),M=D.mul(I.a),O=N.mul(B.a),L=D.mul(I.b),F=N.mul(B.b),U=R.sub(M).sub(O),j=L.add(F).neg();return{k1:U,k2:j}},S.prototype.pointFromX=function(R,A){R=new r(R,16),R.red||(R=R.toRed(this.red));var I=R.redSqr().redMul(R).redIAdd(R.redMul(this.a)).redIAdd(this.b),B=I.redSqrt();if(B.redSqr().redSub(I).cmp(this.zero)!==0)throw new Error("invalid point");var D=B.fromRed().isOdd();return(A&&!D||!A&&D)&&(B=B.redNeg()),this.point(R,B)},S.prototype.validate=function(R){if(R.inf)return!0;var A=R.x,I=R.y,B=this.a.redMul(A),D=A.redSqr().redMul(A).redIAdd(B).redIAdd(this.b);return I.redSqr().redISub(D).cmpn(0)===0},S.prototype._endoWnafMulAdd=function(R,A,I){for(var B=this._endoWnafT1,D=this._endoWnafT2,N=0;N<R.length;N++){var M=this._endoSplit(A[N]),O=R[N],L=O._getBeta();M.k1.negative&&(M.k1.ineg(),O=O.neg(!0)),M.k2.negative&&(M.k2.ineg(),L=L.neg(!0)),B[N*2]=O,B[N*2+1]=L,D[N*2]=M.k1,D[N*2+1]=M.k2}for(var F=this._wnafMulAdd(1,B,D,N*2,I),U=0;U<N*2;U++)B[U]=null,D[U]=null;return F};function E(T,R,A,I){_.BasePoint.call(this,T,"affine"),R===null&&A===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new r(R,16),this.y=new r(A,16),I&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}g(E,_.BasePoint),S.prototype.point=function(R,A,I){return new E(this,R,A,I)},S.prototype.pointFromJSON=function(R,A){return E.fromJSON(this,R,A)},E.prototype._getBeta=function(){if(this.curve.endo){var R=this.precomputed;if(R&&R.beta)return R.beta;var A=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(R){var I=this.curve,B=function(D){return I.point(D.x.redMul(I.endo.beta),D.y)};R.beta=A,A.precomputed={beta:null,naf:R.naf&&{wnd:R.naf.wnd,points:R.naf.points.map(B)},doubles:R.doubles&&{step:R.doubles.step,points:R.doubles.points.map(B)}}}return A}},E.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},E.fromJSON=function(R,A,I){typeof A=="string"&&(A=JSON.parse(A));var B=R.point(A[0],A[1],I);if(!A[2])return B;function D(M){return R.point(M[0],M[1],I)}var N=A[2];return B.precomputed={beta:null,doubles:N.doubles&&{step:N.doubles.step,points:[B].concat(N.doubles.points.map(D))},naf:N.naf&&{wnd:N.naf.wnd,points:[B].concat(N.naf.points.map(D))}},B},E.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},E.prototype.isInfinity=function(){return this.inf},E.prototype.add=function(R){if(this.inf)return R;if(R.inf)return this;if(this.eq(R))return this.dbl();if(this.neg().eq(R))return this.curve.point(null,null);if(this.x.cmp(R.x)===0)return this.curve.point(null,null);var A=this.y.redSub(R.y);A.cmpn(0)!==0&&(A=A.redMul(this.x.redSub(R.x).redInvm()));var I=A.redSqr().redISub(this.x).redISub(R.x),B=A.redMul(this.x.redSub(I)).redISub(this.y);return this.curve.point(I,B)},E.prototype.dbl=function(){if(this.inf)return this;var R=this.y.redAdd(this.y);if(R.cmpn(0)===0)return this.curve.point(null,null);var A=this.curve.a,I=this.x.redSqr(),B=R.redInvm(),D=I.redAdd(I).redIAdd(I).redIAdd(A).redMul(B),N=D.redSqr().redISub(this.x.redAdd(this.x)),M=D.redMul(this.x.redSub(N)).redISub(this.y);return this.curve.point(N,M)},E.prototype.getX=function(){return this.x.fromRed()},E.prototype.getY=function(){return this.y.fromRed()},E.prototype.mul=function(R){return R=new r(R,16),this.isInfinity()?this:this._hasDoubles(R)?this.curve._fixedNafMul(this,R):this.curve.endo?this.curve._endoWnafMulAdd([this],[R]):this.curve._wnafMul(this,R)},E.prototype.mulAdd=function(R,A,I){var B=[this,A],D=[R,I];return this.curve.endo?this.curve._endoWnafMulAdd(B,D):this.curve._wnafMulAdd(1,B,D,2)},E.prototype.jmulAdd=function(R,A,I){var B=[this,A],D=[R,I];return this.curve.endo?this.curve._endoWnafMulAdd(B,D,!0):this.curve._wnafMulAdd(1,B,D,2,!0)},E.prototype.eq=function(R){return this===R||this.inf===R.inf&&(this.inf||this.x.cmp(R.x)===0&&this.y.cmp(R.y)===0)},E.prototype.neg=function(R){if(this.inf)return this;var A=this.curve.point(this.x,this.y.redNeg());if(R&&this.precomputed){var I=this.precomputed,B=function(D){return D.neg()};A.precomputed={naf:I.naf&&{wnd:I.naf.wnd,points:I.naf.points.map(B)},doubles:I.doubles&&{step:I.doubles.step,points:I.doubles.points.map(B)}}}return A},E.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var R=this.curve.jpoint(this.x,this.y,this.curve.one);return R};function C(T,R,A,I){_.BasePoint.call(this,T,"jacobian"),R===null&&A===null&&I===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new r(0)):(this.x=new r(R,16),this.y=new r(A,16),this.z=new r(I,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return g(C,_.BasePoint),S.prototype.jpoint=function(R,A,I){return new C(this,R,A,I)},C.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var R=this.z.redInvm(),A=R.redSqr(),I=this.x.redMul(A),B=this.y.redMul(A).redMul(R);return this.curve.point(I,B)},C.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},C.prototype.add=function(R){if(this.isInfinity())return R;if(R.isInfinity())return this;var A=R.z.redSqr(),I=this.z.redSqr(),B=this.x.redMul(A),D=R.x.redMul(I),N=this.y.redMul(A.redMul(R.z)),M=R.y.redMul(I.redMul(this.z)),O=B.redSub(D),L=N.redSub(M);if(O.cmpn(0)===0)return L.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var F=O.redSqr(),U=F.redMul(O),j=B.redMul(F),z=L.redSqr().redIAdd(U).redISub(j).redISub(j),W=L.redMul(j.redISub(z)).redISub(N.redMul(U)),X=this.z.redMul(R.z).redMul(O);return this.curve.jpoint(z,W,X)},C.prototype.mixedAdd=function(R){if(this.isInfinity())return R.toJ();if(R.isInfinity())return this;var A=this.z.redSqr(),I=this.x,B=R.x.redMul(A),D=this.y,N=R.y.redMul(A).redMul(this.z),M=I.redSub(B),O=D.redSub(N);if(M.cmpn(0)===0)return O.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var L=M.redSqr(),F=L.redMul(M),U=I.redMul(L),j=O.redSqr().redIAdd(F).redISub(U).redISub(U),z=O.redMul(U.redISub(j)).redISub(D.redMul(F)),W=this.z.redMul(M);return this.curve.jpoint(j,z,W)},C.prototype.dblp=function(R){if(R===0)return this;if(this.isInfinity())return this;if(!R)return this.dbl();var A;if(this.curve.zeroA||this.curve.threeA){var I=this;for(A=0;A<R;A++)I=I.dbl();return I}var B=this.curve.a,D=this.curve.tinv,N=this.x,M=this.y,O=this.z,L=O.redSqr().redSqr(),F=M.redAdd(M);for(A=0;A<R;A++){var U=N.redSqr(),j=F.redSqr(),z=j.redSqr(),W=U.redAdd(U).redIAdd(U).redIAdd(B.redMul(L)),X=N.redMul(j),ie=W.redSqr().redISub(X.redAdd(X)),fe=X.redISub(ie),xe=W.redMul(fe);xe=xe.redIAdd(xe).redISub(z);var we=F.redMul(O);A+1<R&&(L=L.redMul(z)),N=ie,O=we,F=xe}return this.curve.jpoint(N,F.redMul(D),O)},C.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},C.prototype._zeroDbl=function(){var R,A,I;if(this.zOne){var B=this.x.redSqr(),D=this.y.redSqr(),N=D.redSqr(),M=this.x.redAdd(D).redSqr().redISub(B).redISub(N);M=M.redIAdd(M);var O=B.redAdd(B).redIAdd(B),L=O.redSqr().redISub(M).redISub(M),F=N.redIAdd(N);F=F.redIAdd(F),F=F.redIAdd(F),R=L,A=O.redMul(M.redISub(L)).redISub(F),I=this.y.redAdd(this.y)}else{var U=this.x.redSqr(),j=this.y.redSqr(),z=j.redSqr(),W=this.x.redAdd(j).redSqr().redISub(U).redISub(z);W=W.redIAdd(W);var X=U.redAdd(U).redIAdd(U),ie=X.redSqr(),fe=z.redIAdd(z);fe=fe.redIAdd(fe),fe=fe.redIAdd(fe),R=ie.redISub(W).redISub(W),A=X.redMul(W.redISub(R)).redISub(fe),I=this.y.redMul(this.z),I=I.redIAdd(I)}return this.curve.jpoint(R,A,I)},C.prototype._threeDbl=function(){var R,A,I;if(this.zOne){var B=this.x.redSqr(),D=this.y.redSqr(),N=D.redSqr(),M=this.x.redAdd(D).redSqr().redISub(B).redISub(N);M=M.redIAdd(M);var O=B.redAdd(B).redIAdd(B).redIAdd(this.curve.a),L=O.redSqr().redISub(M).redISub(M);R=L;var F=N.redIAdd(N);F=F.redIAdd(F),F=F.redIAdd(F),A=O.redMul(M.redISub(L)).redISub(F),I=this.y.redAdd(this.y)}else{var U=this.z.redSqr(),j=this.y.redSqr(),z=this.x.redMul(j),W=this.x.redSub(U).redMul(this.x.redAdd(U));W=W.redAdd(W).redIAdd(W);var X=z.redIAdd(z);X=X.redIAdd(X);var ie=X.redAdd(X);R=W.redSqr().redISub(ie),I=this.y.redAdd(this.z).redSqr().redISub(j).redISub(U);var fe=j.redSqr();fe=fe.redIAdd(fe),fe=fe.redIAdd(fe),fe=fe.redIAdd(fe),A=W.redMul(X.redISub(R)).redISub(fe)}return this.curve.jpoint(R,A,I)},C.prototype._dbl=function(){var R=this.curve.a,A=this.x,I=this.y,B=this.z,D=B.redSqr().redSqr(),N=A.redSqr(),M=I.redSqr(),O=N.redAdd(N).redIAdd(N).redIAdd(R.redMul(D)),L=A.redAdd(A);L=L.redIAdd(L);var F=L.redMul(M),U=O.redSqr().redISub(F.redAdd(F)),j=F.redISub(U),z=M.redSqr();z=z.redIAdd(z),z=z.redIAdd(z),z=z.redIAdd(z);var W=O.redMul(j).redISub(z),X=I.redAdd(I).redMul(B);return this.curve.jpoint(U,W,X)},C.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var R=this.x.redSqr(),A=this.y.redSqr(),I=this.z.redSqr(),B=A.redSqr(),D=R.redAdd(R).redIAdd(R),N=D.redSqr(),M=this.x.redAdd(A).redSqr().redISub(R).redISub(B);M=M.redIAdd(M),M=M.redAdd(M).redIAdd(M),M=M.redISub(N);var O=M.redSqr(),L=B.redIAdd(B);L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L);var F=D.redIAdd(M).redSqr().redISub(N).redISub(O).redISub(L),U=A.redMul(F);U=U.redIAdd(U),U=U.redIAdd(U);var j=this.x.redMul(O).redISub(U);j=j.redIAdd(j),j=j.redIAdd(j);var z=this.y.redMul(F.redMul(L.redISub(F)).redISub(M.redMul(O)));z=z.redIAdd(z),z=z.redIAdd(z),z=z.redIAdd(z);var W=this.z.redAdd(M).redSqr().redISub(I).redISub(O);return this.curve.jpoint(j,z,W)},C.prototype.mul=function(R,A){return R=new r(R,A),this.curve._wnafMul(this,R)},C.prototype.eq=function(R){if(R.type==="affine")return this.eq(R.toJ());if(this===R)return!0;var A=this.z.redSqr(),I=R.z.redSqr();if(this.x.redMul(I).redISub(R.x.redMul(A)).cmpn(0)!==0)return!1;var B=A.redMul(this.z),D=I.redMul(R.z);return this.y.redMul(D).redISub(R.y.redMul(B)).cmpn(0)===0},C.prototype.eqXToP=function(R){var A=this.z.redSqr(),I=R.toRed(this.curve.red).redMul(A);if(this.x.cmp(I)===0)return!0;for(var B=R.clone(),D=this.curve.redN.redMul(A);;){if(B.iadd(this.curve.n),B.cmp(this.curve.p)>=0)return!1;if(I.redIAdd(D),this.x.cmp(I)===0)return!0}},C.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},C.prototype.isInfinity=function(){return this.z.cmpn(0)===0},short}var mont,hasRequiredMont;function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var n=requireBn$2(),r=requireInherits_browser(),g=requireBase$1(),_=requireUtils$2();function x(E){g.call(this,"mont",E),this.a=new n(E.a,16).toRed(this.red),this.b=new n(E.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}r(x,g),mont=x,x.prototype.validate=function(C){var T=C.normalize().x,R=T.redSqr(),A=R.redMul(T).redAdd(R.redMul(this.a)).redAdd(T),I=A.redSqrt();return I.redSqr().cmp(A)===0};function S(E,C,T){g.BasePoint.call(this,E,"projective"),C===null&&T===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(C,16),this.z=new n(T,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return r(S,g.BasePoint),x.prototype.decodePoint=function(C,T){return this.point(_.toArray(C,T),1)},x.prototype.point=function(C,T){return new S(this,C,T)},x.prototype.pointFromJSON=function(C){return S.fromJSON(this,C)},S.prototype.precompute=function(){},S.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},S.fromJSON=function(C,T){return new S(C,T[0],T[1]||C.one)},S.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},S.prototype.isInfinity=function(){return this.z.cmpn(0)===0},S.prototype.dbl=function(){var C=this.x.redAdd(this.z),T=C.redSqr(),R=this.x.redSub(this.z),A=R.redSqr(),I=T.redSub(A),B=T.redMul(A),D=I.redMul(A.redAdd(this.curve.a24.redMul(I)));return this.curve.point(B,D)},S.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},S.prototype.diffAdd=function(C,T){var R=this.x.redAdd(this.z),A=this.x.redSub(this.z),I=C.x.redAdd(C.z),B=C.x.redSub(C.z),D=B.redMul(R),N=I.redMul(A),M=T.z.redMul(D.redAdd(N).redSqr()),O=T.x.redMul(D.redISub(N).redSqr());return this.curve.point(M,O)},S.prototype.mul=function(C){for(var T=C.clone(),R=this,A=this.curve.point(null,null),I=this,B=[];T.cmpn(0)!==0;T.iushrn(1))B.push(T.andln(1));for(var D=B.length-1;D>=0;D--)B[D]===0?(R=R.diffAdd(A,I),A=A.dbl()):(A=R.diffAdd(A,I),R=R.dbl());return A},S.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},S.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},S.prototype.eq=function(C){return this.getX().cmp(C.getX())===0},S.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},S.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}var edwards,hasRequiredEdwards;function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var n=requireUtils$2(),r=requireBn$2(),g=requireInherits_browser(),_=requireBase$1(),x=n.assert;function S(C){this.twisted=(C.a|0)!==1,this.mOneA=this.twisted&&(C.a|0)===-1,this.extended=this.mOneA,_.call(this,"edwards",C),this.a=new r(C.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new r(C.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new r(C.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),x(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(C.c|0)===1}g(S,_),edwards=S,S.prototype._mulA=function(T){return this.mOneA?T.redNeg():this.a.redMul(T)},S.prototype._mulC=function(T){return this.oneC?T:this.c.redMul(T)},S.prototype.jpoint=function(T,R,A,I){return this.point(T,R,A,I)},S.prototype.pointFromX=function(T,R){T=new r(T,16),T.red||(T=T.toRed(this.red));var A=T.redSqr(),I=this.c2.redSub(this.a.redMul(A)),B=this.one.redSub(this.c2.redMul(this.d).redMul(A)),D=I.redMul(B.redInvm()),N=D.redSqrt();if(N.redSqr().redSub(D).cmp(this.zero)!==0)throw new Error("invalid point");var M=N.fromRed().isOdd();return(R&&!M||!R&&M)&&(N=N.redNeg()),this.point(T,N)},S.prototype.pointFromY=function(T,R){T=new r(T,16),T.red||(T=T.toRed(this.red));var A=T.redSqr(),I=A.redSub(this.c2),B=A.redMul(this.d).redMul(this.c2).redSub(this.a),D=I.redMul(B.redInvm());if(D.cmp(this.zero)===0){if(R)throw new Error("invalid point");return this.point(this.zero,T)}var N=D.redSqrt();if(N.redSqr().redSub(D).cmp(this.zero)!==0)throw new Error("invalid point");return N.fromRed().isOdd()!==R&&(N=N.redNeg()),this.point(N,T)},S.prototype.validate=function(T){if(T.isInfinity())return!0;T.normalize();var R=T.x.redSqr(),A=T.y.redSqr(),I=R.redMul(this.a).redAdd(A),B=this.c2.redMul(this.one.redAdd(this.d.redMul(R).redMul(A)));return I.cmp(B)===0};function E(C,T,R,A,I){_.BasePoint.call(this,C,"projective"),T===null&&R===null&&A===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new r(T,16),this.y=new r(R,16),this.z=A?new r(A,16):this.curve.one,this.t=I&&new r(I,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return g(E,_.BasePoint),S.prototype.pointFromJSON=function(T){return E.fromJSON(this,T)},S.prototype.point=function(T,R,A,I){return new E(this,T,R,A,I)},E.fromJSON=function(T,R){return new E(T,R[0],R[1],R[2])},E.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},E.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)},E.prototype._extDbl=function(){var T=this.x.redSqr(),R=this.y.redSqr(),A=this.z.redSqr();A=A.redIAdd(A);var I=this.curve._mulA(T),B=this.x.redAdd(this.y).redSqr().redISub(T).redISub(R),D=I.redAdd(R),N=D.redSub(A),M=I.redSub(R),O=B.redMul(N),L=D.redMul(M),F=B.redMul(M),U=N.redMul(D);return this.curve.point(O,L,U,F)},E.prototype._projDbl=function(){var T=this.x.redAdd(this.y).redSqr(),R=this.x.redSqr(),A=this.y.redSqr(),I,B,D,N,M,O;if(this.curve.twisted){N=this.curve._mulA(R);var L=N.redAdd(A);this.zOne?(I=T.redSub(R).redSub(A).redMul(L.redSub(this.curve.two)),B=L.redMul(N.redSub(A)),D=L.redSqr().redSub(L).redSub(L)):(M=this.z.redSqr(),O=L.redSub(M).redISub(M),I=T.redSub(R).redISub(A).redMul(O),B=L.redMul(N.redSub(A)),D=L.redMul(O))}else N=R.redAdd(A),M=this.curve._mulC(this.z).redSqr(),O=N.redSub(M).redSub(M),I=this.curve._mulC(T.redISub(N)).redMul(O),B=this.curve._mulC(N).redMul(R.redISub(A)),D=N.redMul(O);return this.curve.point(I,B,D)},E.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},E.prototype._extAdd=function(T){var R=this.y.redSub(this.x).redMul(T.y.redSub(T.x)),A=this.y.redAdd(this.x).redMul(T.y.redAdd(T.x)),I=this.t.redMul(this.curve.dd).redMul(T.t),B=this.z.redMul(T.z.redAdd(T.z)),D=A.redSub(R),N=B.redSub(I),M=B.redAdd(I),O=A.redAdd(R),L=D.redMul(N),F=M.redMul(O),U=D.redMul(O),j=N.redMul(M);return this.curve.point(L,F,j,U)},E.prototype._projAdd=function(T){var R=this.z.redMul(T.z),A=R.redSqr(),I=this.x.redMul(T.x),B=this.y.redMul(T.y),D=this.curve.d.redMul(I).redMul(B),N=A.redSub(D),M=A.redAdd(D),O=this.x.redAdd(this.y).redMul(T.x.redAdd(T.y)).redISub(I).redISub(B),L=R.redMul(N).redMul(O),F,U;return this.curve.twisted?(F=R.redMul(M).redMul(B.redSub(this.curve._mulA(I))),U=N.redMul(M)):(F=R.redMul(M).redMul(B.redSub(I)),U=this.curve._mulC(N).redMul(M)),this.curve.point(L,F,U)},E.prototype.add=function(T){return this.isInfinity()?T:T.isInfinity()?this:this.curve.extended?this._extAdd(T):this._projAdd(T)},E.prototype.mul=function(T){return this._hasDoubles(T)?this.curve._fixedNafMul(this,T):this.curve._wnafMul(this,T)},E.prototype.mulAdd=function(T,R,A){return this.curve._wnafMulAdd(1,[this,R],[T,A],2,!1)},E.prototype.jmulAdd=function(T,R,A){return this.curve._wnafMulAdd(1,[this,R],[T,A],2,!0)},E.prototype.normalize=function(){if(this.zOne)return this;var T=this.z.redInvm();return this.x=this.x.redMul(T),this.y=this.y.redMul(T),this.t&&(this.t=this.t.redMul(T)),this.z=this.curve.one,this.zOne=!0,this},E.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},E.prototype.getX=function(){return this.normalize(),this.x.fromRed()},E.prototype.getY=function(){return this.normalize(),this.y.fromRed()},E.prototype.eq=function(T){return this===T||this.getX().cmp(T.getX())===0&&this.getY().cmp(T.getY())===0},E.prototype.eqXToP=function(T){var R=T.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(R)===0)return!0;for(var A=T.clone(),I=this.curve.redN.redMul(this.z);;){if(A.iadd(this.curve.n),A.cmp(this.curve.p)>=0)return!1;if(R.redIAdd(I),this.x.cmp(R)===0)return!0}},E.prototype.toP=E.prototype.normalize,E.prototype.mixedAdd=E.prototype.add,edwards}var hasRequiredCurve;function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,function(n){var r=n;r.base=requireBase$1(),r.short=requireShort(),r.mont=requireMont(),r.edwards=requireEdwards()}(curve)),curve}var curves={},hash={},utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1;var n=requireMinimalisticAssert(),r=requireInherits_browser();utils$1.inherits=r;function g(G,J){return(G.charCodeAt(J)&64512)!==55296||J<0||J+1>=G.length?!1:(G.charCodeAt(J+1)&64512)===56320}function _(G,J){if(Array.isArray(G))return G.slice();if(!G)return[];var q=[];if(typeof G=="string")if(J){if(J==="hex")for(G=G.replace(/[^a-z0-9]+/ig,""),G.length%2!==0&&(G="0"+G),ve=0;ve<G.length;ve+=2)q.push(parseInt(G[ve]+G[ve+1],16))}else for(var H=0,ve=0;ve<G.length;ve++){var Z=G.charCodeAt(ve);Z<128?q[H++]=Z:Z<2048?(q[H++]=Z>>6|192,q[H++]=Z&63|128):g(G,ve)?(Z=65536+((Z&1023)<<10)+(G.charCodeAt(++ve)&1023),q[H++]=Z>>18|240,q[H++]=Z>>12&63|128,q[H++]=Z>>6&63|128,q[H++]=Z&63|128):(q[H++]=Z>>12|224,q[H++]=Z>>6&63|128,q[H++]=Z&63|128)}else for(ve=0;ve<G.length;ve++)q[ve]=G[ve]|0;return q}utils$1.toArray=_;function x(G){for(var J="",q=0;q<G.length;q++)J+=C(G[q].toString(16));return J}utils$1.toHex=x;function S(G){var J=G>>>24|G>>>8&65280|G<<8&16711680|(G&255)<<24;return J>>>0}utils$1.htonl=S;function E(G,J){for(var q="",H=0;H<G.length;H++){var ve=G[H];J==="little"&&(ve=S(ve)),q+=T(ve.toString(16))}return q}utils$1.toHex32=E;function C(G){return G.length===1?"0"+G:G}utils$1.zero2=C;function T(G){return G.length===7?"0"+G:G.length===6?"00"+G:G.length===5?"000"+G:G.length===4?"0000"+G:G.length===3?"00000"+G:G.length===2?"000000"+G:G.length===1?"0000000"+G:G}utils$1.zero8=T;function R(G,J,q,H){var ve=q-J;n(ve%4===0);for(var Z=new Array(ve/4),ce=0,ue=J;ce<Z.length;ce++,ue+=4){var se;H==="big"?se=G[ue]<<24|G[ue+1]<<16|G[ue+2]<<8|G[ue+3]:se=G[ue+3]<<24|G[ue+2]<<16|G[ue+1]<<8|G[ue],Z[ce]=se>>>0}return Z}utils$1.join32=R;function A(G,J){for(var q=new Array(G.length*4),H=0,ve=0;H<G.length;H++,ve+=4){var Z=G[H];J==="big"?(q[ve]=Z>>>24,q[ve+1]=Z>>>16&255,q[ve+2]=Z>>>8&255,q[ve+3]=Z&255):(q[ve+3]=Z>>>24,q[ve+2]=Z>>>16&255,q[ve+1]=Z>>>8&255,q[ve]=Z&255)}return q}utils$1.split32=A;function I(G,J){return G>>>J|G<<32-J}utils$1.rotr32=I;function B(G,J){return G<<J|G>>>32-J}utils$1.rotl32=B;function D(G,J){return G+J>>>0}utils$1.sum32=D;function N(G,J,q){return G+J+q>>>0}utils$1.sum32_3=N;function M(G,J,q,H){return G+J+q+H>>>0}utils$1.sum32_4=M;function O(G,J,q,H,ve){return G+J+q+H+ve>>>0}utils$1.sum32_5=O;function L(G,J,q,H){var ve=G[J],Z=G[J+1],ce=H+Z>>>0,ue=(ce<H?1:0)+q+ve;G[J]=ue>>>0,G[J+1]=ce}utils$1.sum64=L;function F(G,J,q,H){var ve=J+H>>>0,Z=(ve<J?1:0)+G+q;return Z>>>0}utils$1.sum64_hi=F;function U(G,J,q,H){var ve=J+H;return ve>>>0}utils$1.sum64_lo=U;function j(G,J,q,H,ve,Z,ce,ue){var se=0,te=J;te=te+H>>>0,se+=te<J?1:0,te=te+Z>>>0,se+=te<Z?1:0,te=te+ue>>>0,se+=te<ue?1:0;var Y=G+q+ve+ce+se;return Y>>>0}utils$1.sum64_4_hi=j;function z(G,J,q,H,ve,Z,ce,ue){var se=J+H+Z+ue;return se>>>0}utils$1.sum64_4_lo=z;function W(G,J,q,H,ve,Z,ce,ue,se,te){var Y=0,be=J;be=be+H>>>0,Y+=be<J?1:0,be=be+Z>>>0,Y+=be<Z?1:0,be=be+ue>>>0,Y+=be<ue?1:0,be=be+te>>>0,Y+=be<te?1:0;var ye=G+q+ve+ce+se+Y;return ye>>>0}utils$1.sum64_5_hi=W;function X(G,J,q,H,ve,Z,ce,ue,se,te){var Y=J+H+Z+ue+te;return Y>>>0}utils$1.sum64_5_lo=X;function ie(G,J,q){var H=J<<32-q|G>>>q;return H>>>0}utils$1.rotr64_hi=ie;function fe(G,J,q){var H=G<<32-q|J>>>q;return H>>>0}utils$1.rotr64_lo=fe;function xe(G,J,q){return G>>>q}utils$1.shr64_hi=xe;function we(G,J,q){var H=G<<32-q|J>>>q;return H>>>0}return utils$1.shr64_lo=we,utils$1}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var n=requireUtils$1(),r=requireMinimalisticAssert();function g(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=g,g.prototype.update=function(x,S){if(x=n.toArray(x,S),this.pending?this.pending=this.pending.concat(x):this.pending=x,this.pendingTotal+=x.length,this.pending.length>=this._delta8){x=this.pending;var E=x.length%this._delta8;this.pending=x.slice(x.length-E,x.length),this.pending.length===0&&(this.pending=null),x=n.join32(x,0,x.length-E,this.endian);for(var C=0;C<x.length;C+=this._delta32)this._update(x,C,C+this._delta32)}return this},g.prototype.digest=function(x){return this.update(this._pad()),r(this.pending===null),this._digest(x)},g.prototype._pad=function(){var x=this.pendingTotal,S=this._delta8,E=S-(x+this.padLength)%S,C=new Array(E+this.padLength);C[0]=128;for(var T=1;T<E;T++)C[T]=0;if(x<<=3,this.endian==="big"){for(var R=8;R<this.padLength;R++)C[T++]=0;C[T++]=0,C[T++]=0,C[T++]=0,C[T++]=0,C[T++]=x>>>24&255,C[T++]=x>>>16&255,C[T++]=x>>>8&255,C[T++]=x&255}else for(C[T++]=x&255,C[T++]=x>>>8&255,C[T++]=x>>>16&255,C[T++]=x>>>24&255,C[T++]=0,C[T++]=0,C[T++]=0,C[T++]=0,R=8;R<this.padLength;R++)C[T++]=0;return C},common$1}var sha={},common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var n=requireUtils$1(),r=n.rotr32;function g(A,I,B,D){if(A===0)return _(I,B,D);if(A===1||A===3)return S(I,B,D);if(A===2)return x(I,B,D)}common.ft_1=g;function _(A,I,B){return A&I^~A&B}common.ch32=_;function x(A,I,B){return A&I^A&B^I&B}common.maj32=x;function S(A,I,B){return A^I^B}common.p32=S;function E(A){return r(A,2)^r(A,13)^r(A,22)}common.s0_256=E;function C(A){return r(A,6)^r(A,11)^r(A,25)}common.s1_256=C;function T(A){return r(A,7)^r(A,18)^A>>>3}common.g0_256=T;function R(A){return r(A,17)^r(A,19)^A>>>10}return common.g1_256=R,common}var _1,hasRequired_1;function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var n=requireUtils$1(),r=requireCommon$1(),g=requireCommon(),_=n.rotl32,x=n.sum32,S=n.sum32_5,E=g.ft_1,C=r.BlockHash,T=[1518500249,1859775393,2400959708,3395469782];function R(){if(!(this instanceof R))return new R;C.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return n.inherits(R,C),_1=R,R.blockSize=512,R.outSize=160,R.hmacStrength=80,R.padLength=64,R.prototype._update=function(I,B){for(var D=this.W,N=0;N<16;N++)D[N]=I[B+N];for(;N<D.length;N++)D[N]=_(D[N-3]^D[N-8]^D[N-14]^D[N-16],1);var M=this.h[0],O=this.h[1],L=this.h[2],F=this.h[3],U=this.h[4];for(N=0;N<D.length;N++){var j=~~(N/20),z=S(_(M,5),E(j,O,L,F),U,D[N],T[j]);U=F,F=L,L=_(O,30),O=M,M=z}this.h[0]=x(this.h[0],M),this.h[1]=x(this.h[1],O),this.h[2]=x(this.h[2],L),this.h[3]=x(this.h[3],F),this.h[4]=x(this.h[4],U)},R.prototype._digest=function(I){return I==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")},_1}var _256,hasRequired_256;function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var n=requireUtils$1(),r=requireCommon$1(),g=requireCommon(),_=requireMinimalisticAssert(),x=n.sum32,S=n.sum32_4,E=n.sum32_5,C=g.ch32,T=g.maj32,R=g.s0_256,A=g.s1_256,I=g.g0_256,B=g.g1_256,D=r.BlockHash,N=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function M(){if(!(this instanceof M))return new M;D.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=N,this.W=new Array(64)}return n.inherits(M,D),_256=M,M.blockSize=512,M.outSize=256,M.hmacStrength=192,M.padLength=64,M.prototype._update=function(L,F){for(var U=this.W,j=0;j<16;j++)U[j]=L[F+j];for(;j<U.length;j++)U[j]=S(B(U[j-2]),U[j-7],I(U[j-15]),U[j-16]);var z=this.h[0],W=this.h[1],X=this.h[2],ie=this.h[3],fe=this.h[4],xe=this.h[5],we=this.h[6],G=this.h[7];for(_(this.k.length===U.length),j=0;j<U.length;j++){var J=E(G,A(fe),C(fe,xe,we),this.k[j],U[j]),q=x(R(z),T(z,W,X));G=we,we=xe,xe=fe,fe=x(ie,J),ie=X,X=W,W=z,z=x(J,q)}this.h[0]=x(this.h[0],z),this.h[1]=x(this.h[1],W),this.h[2]=x(this.h[2],X),this.h[3]=x(this.h[3],ie),this.h[4]=x(this.h[4],fe),this.h[5]=x(this.h[5],xe),this.h[6]=x(this.h[6],we),this.h[7]=x(this.h[7],G)},M.prototype._digest=function(L){return L==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")},_256}var _224,hasRequired_224;function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var n=requireUtils$1(),r=require_256();function g(){if(!(this instanceof g))return new g;r.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return n.inherits(g,r),_224=g,g.blockSize=512,g.outSize=224,g.hmacStrength=192,g.padLength=64,g.prototype._digest=function(x){return x==="hex"?n.toHex32(this.h.slice(0,7),"big"):n.split32(this.h.slice(0,7),"big")},_224}var _512,hasRequired_512;function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var n=requireUtils$1(),r=requireCommon$1(),g=requireMinimalisticAssert(),_=n.rotr64_hi,x=n.rotr64_lo,S=n.shr64_hi,E=n.shr64_lo,C=n.sum64,T=n.sum64_hi,R=n.sum64_lo,A=n.sum64_4_hi,I=n.sum64_4_lo,B=n.sum64_5_hi,D=n.sum64_5_lo,N=r.BlockHash,M=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function O(){if(!(this instanceof O))return new O;N.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=M,this.W=new Array(160)}n.inherits(O,N),_512=O,O.blockSize=1024,O.outSize=512,O.hmacStrength=192,O.padLength=128,O.prototype._prepareBlock=function(q,H){for(var ve=this.W,Z=0;Z<32;Z++)ve[Z]=q[H+Z];for(;Z<ve.length;Z+=2){var ce=we(ve[Z-4],ve[Z-3]),ue=G(ve[Z-4],ve[Z-3]),se=ve[Z-14],te=ve[Z-13],Y=fe(ve[Z-30],ve[Z-29]),be=xe(ve[Z-30],ve[Z-29]),ye=ve[Z-32],Ie=ve[Z-31];ve[Z]=A(ce,ue,se,te,Y,be,ye,Ie),ve[Z+1]=I(ce,ue,se,te,Y,be,ye,Ie)}},O.prototype._update=function(q,H){this._prepareBlock(q,H);var ve=this.W,Z=this.h[0],ce=this.h[1],ue=this.h[2],se=this.h[3],te=this.h[4],Y=this.h[5],be=this.h[6],ye=this.h[7],Ie=this.h[8],ke=this.h[9],Ce=this.h[10],Ae=this.h[11],Ne=this.h[12],We=this.h[13],Be=this.h[14],Se=this.h[15];g(this.k.length===ve.length);for(var $e=0;$e<ve.length;$e+=2){var _e=Be,Oe=Se,Ke=X(Ie,ke),Me=ie(Ie,ke),Le=L(Ie,ke,Ce,Ae,Ne),ze=F(Ie,ke,Ce,Ae,Ne,We),Je=this.k[$e],Qe=this.k[$e+1],rt=ve[$e],wt=ve[$e+1],bt=B(_e,Oe,Ke,Me,Le,ze,Je,Qe,rt,wt),xt=D(_e,Oe,Ke,Me,Le,ze,Je,Qe,rt,wt);_e=z(Z,ce),Oe=W(Z,ce),Ke=U(Z,ce,ue,se,te),Me=j(Z,ce,ue,se,te,Y);var Et=T(_e,Oe,Ke,Me),Rt=R(_e,Oe,Ke,Me);Be=Ne,Se=We,Ne=Ce,We=Ae,Ce=Ie,Ae=ke,Ie=T(be,ye,bt,xt),ke=R(ye,ye,bt,xt),be=te,ye=Y,te=ue,Y=se,ue=Z,se=ce,Z=T(bt,xt,Et,Rt),ce=R(bt,xt,Et,Rt)}C(this.h,0,Z,ce),C(this.h,2,ue,se),C(this.h,4,te,Y),C(this.h,6,be,ye),C(this.h,8,Ie,ke),C(this.h,10,Ce,Ae),C(this.h,12,Ne,We),C(this.h,14,Be,Se)},O.prototype._digest=function(q){return q==="hex"?n.toHex32(this.h,"big"):n.split32(this.h,"big")};function L(J,q,H,ve,Z){var ce=J&H^~J&Z;return ce<0&&(ce+=4294967296),ce}function F(J,q,H,ve,Z,ce){var ue=q&ve^~q&ce;return ue<0&&(ue+=4294967296),ue}function U(J,q,H,ve,Z){var ce=J&H^J&Z^H&Z;return ce<0&&(ce+=4294967296),ce}function j(J,q,H,ve,Z,ce){var ue=q&ve^q&ce^ve&ce;return ue<0&&(ue+=4294967296),ue}function z(J,q){var H=_(J,q,28),ve=_(q,J,2),Z=_(q,J,7),ce=H^ve^Z;return ce<0&&(ce+=4294967296),ce}function W(J,q){var H=x(J,q,28),ve=x(q,J,2),Z=x(q,J,7),ce=H^ve^Z;return ce<0&&(ce+=4294967296),ce}function X(J,q){var H=_(J,q,14),ve=_(J,q,18),Z=_(q,J,9),ce=H^ve^Z;return ce<0&&(ce+=4294967296),ce}function ie(J,q){var H=x(J,q,14),ve=x(J,q,18),Z=x(q,J,9),ce=H^ve^Z;return ce<0&&(ce+=4294967296),ce}function fe(J,q){var H=_(J,q,1),ve=_(J,q,8),Z=S(J,q,7),ce=H^ve^Z;return ce<0&&(ce+=4294967296),ce}function xe(J,q){var H=x(J,q,1),ve=x(J,q,8),Z=E(J,q,7),ce=H^ve^Z;return ce<0&&(ce+=4294967296),ce}function we(J,q){var H=_(J,q,19),ve=_(q,J,29),Z=S(J,q,6),ce=H^ve^Z;return ce<0&&(ce+=4294967296),ce}function G(J,q){var H=x(J,q,19),ve=x(q,J,29),Z=E(J,q,6),ce=H^ve^Z;return ce<0&&(ce+=4294967296),ce}return _512}var _384,hasRequired_384;function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var n=requireUtils$1(),r=require_512();function g(){if(!(this instanceof g))return new g;r.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return n.inherits(g,r),_384=g,g.blockSize=1024,g.outSize=384,g.hmacStrength=192,g.padLength=128,g.prototype._digest=function(x){return x==="hex"?n.toHex32(this.h.slice(0,12),"big"):n.split32(this.h.slice(0,12),"big")},_384}var hasRequiredSha;function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var n=requireUtils$1(),r=requireCommon$1(),g=n.rotl32,_=n.sum32,x=n.sum32_3,S=n.sum32_4,E=r.BlockHash;function C(){if(!(this instanceof C))return new C;E.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}n.inherits(C,E),ripemd.ripemd160=C,C.blockSize=512,C.outSize=160,C.hmacStrength=192,C.padLength=64,C.prototype._update=function(O,L){for(var F=this.h[0],U=this.h[1],j=this.h[2],z=this.h[3],W=this.h[4],X=F,ie=U,fe=j,xe=z,we=W,G=0;G<80;G++){var J=_(g(S(F,T(G,U,j,z),O[I[G]+L],R(G)),D[G]),W);F=W,W=z,z=g(j,10),j=U,U=J,J=_(g(S(X,T(79-G,ie,fe,xe),O[B[G]+L],A(G)),N[G]),we),X=we,we=xe,xe=g(fe,10),fe=ie,ie=J}J=x(this.h[1],j,xe),this.h[1]=x(this.h[2],z,we),this.h[2]=x(this.h[3],W,X),this.h[3]=x(this.h[4],F,ie),this.h[4]=x(this.h[0],U,fe),this.h[0]=J},C.prototype._digest=function(O){return O==="hex"?n.toHex32(this.h,"little"):n.split32(this.h,"little")};function T(M,O,L,F){return M<=15?O^L^F:M<=31?O&L|~O&F:M<=47?(O|~L)^F:M<=63?O&F|L&~F:O^(L|~F)}function R(M){return M<=15?0:M<=31?1518500249:M<=47?1859775393:M<=63?2400959708:2840853838}function A(M){return M<=15?1352829926:M<=31?1548603684:M<=47?1836072691:M<=63?2053994217:0}var I=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],B=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],D=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],N=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}var hmac$1,hasRequiredHmac;function requireHmac(){if(hasRequiredHmac)return hmac$1;hasRequiredHmac=1;var n=requireUtils$1(),r=requireMinimalisticAssert();function g(_,x,S){if(!(this instanceof g))return new g(_,x,S);this.Hash=_,this.blockSize=_.blockSize/8,this.outSize=_.outSize/8,this.inner=null,this.outer=null,this._init(n.toArray(x,S))}return hmac$1=g,g.prototype._init=function(x){x.length>this.blockSize&&(x=new this.Hash().update(x).digest()),r(x.length<=this.blockSize);for(var S=x.length;S<this.blockSize;S++)x.push(0);for(S=0;S<x.length;S++)x[S]^=54;for(this.inner=new this.Hash().update(x),S=0;S<x.length;S++)x[S]^=106;this.outer=new this.Hash().update(x)},g.prototype.update=function(x,S){return this.inner.update(x,S),this},g.prototype.digest=function(x){return this.outer.update(this.inner.digest()),this.outer.digest(x)},hmac$1}var hasRequiredHash;function requireHash(){return hasRequiredHash||(hasRequiredHash=1,function(n){var r=n;r.utils=requireUtils$1(),r.common=requireCommon$1(),r.sha=requireSha(),r.ripemd=requireRipemd(),r.hmac=requireHmac(),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160}(hash)),hash}var secp256k1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1}var hasRequiredCurves;function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(n){var r=n,g=requireHash(),_=requireCurve(),x=requireUtils$2(),S=x.assert;function E(R){R.type==="short"?this.curve=new _.short(R):R.type==="edwards"?this.curve=new _.edwards(R):this.curve=new _.mont(R),this.g=this.curve.g,this.n=this.curve.n,this.hash=R.hash,S(this.g.validate(),"Invalid curve"),S(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=E;function C(R,A){Object.defineProperty(r,R,{configurable:!0,enumerable:!0,get:function(){var I=new E(A);return Object.defineProperty(r,R,{configurable:!0,enumerable:!0,value:I}),I}})}C("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:g.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),C("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:g.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),C("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:g.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),C("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:g.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),C("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:g.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),C("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["9"]}),C("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:g.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var T;try{T=requireSecp256k1()}catch{T=void 0}C("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:g.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",T]})}(curves)),curves}var hmacDrbg,hasRequiredHmacDrbg;function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var n=requireHash(),r=requireUtils$3(),g=requireMinimalisticAssert();function _(x){if(!(this instanceof _))return new _(x);this.hash=x.hash,this.predResist=!!x.predResist,this.outLen=this.hash.outSize,this.minEntropy=x.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var S=r.toArray(x.entropy,x.entropyEnc||"hex"),E=r.toArray(x.nonce,x.nonceEnc||"hex"),C=r.toArray(x.pers,x.persEnc||"hex");g(S.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(S,E,C)}return hmacDrbg=_,_.prototype._init=function(S,E,C){var T=S.concat(E).concat(C);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var R=0;R<this.V.length;R++)this.K[R]=0,this.V[R]=1;this._update(T),this._reseed=1,this.reseedInterval=281474976710656},_.prototype._hmac=function(){return new n.hmac(this.hash,this.K)},_.prototype._update=function(S){var E=this._hmac().update(this.V).update([0]);S&&(E=E.update(S)),this.K=E.digest(),this.V=this._hmac().update(this.V).digest(),S&&(this.K=this._hmac().update(this.V).update([1]).update(S).digest(),this.V=this._hmac().update(this.V).digest())},_.prototype.reseed=function(S,E,C,T){typeof E!="string"&&(T=C,C=E,E=null),S=r.toArray(S,E),C=r.toArray(C,T),g(S.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(S.concat(C||[])),this._reseed=1},_.prototype.generate=function(S,E,C,T){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof E!="string"&&(T=C,C=E,E=null),C&&(C=r.toArray(C,T||"hex"),this._update(C));for(var R=[];R.length<S;)this.V=this._hmac().update(this.V).digest(),R=R.concat(this.V);var A=R.slice(0,S);return this._update(C),this._reseed++,r.encode(A,E)},hmacDrbg}var key$1,hasRequiredKey$1;function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var n=requireBn$2(),r=requireUtils$2(),g=r.assert;function _(x,S){this.ec=x,this.priv=null,this.pub=null,S.priv&&this._importPrivate(S.priv,S.privEnc),S.pub&&this._importPublic(S.pub,S.pubEnc)}return key$1=_,_.fromPublic=function(S,E,C){return E instanceof _?E:new _(S,{pub:E,pubEnc:C})},_.fromPrivate=function(S,E,C){return E instanceof _?E:new _(S,{priv:E,privEnc:C})},_.prototype.validate=function(){var S=this.getPublic();return S.isInfinity()?{result:!1,reason:"Invalid public key"}:S.validate()?S.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},_.prototype.getPublic=function(S,E){return typeof S=="string"&&(E=S,S=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),E?this.pub.encode(E,S):this.pub},_.prototype.getPrivate=function(S){return S==="hex"?this.priv.toString(16,2):this.priv},_.prototype._importPrivate=function(S,E){this.priv=new n(S,E||16),this.priv=this.priv.umod(this.ec.curve.n)},_.prototype._importPublic=function(S,E){if(S.x||S.y){this.ec.curve.type==="mont"?g(S.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&g(S.x&&S.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(S.x,S.y);return}this.pub=this.ec.curve.decodePoint(S,E)},_.prototype.derive=function(S){return S.validate()||g(S.validate(),"public point not validated"),S.mul(this.priv).getX()},_.prototype.sign=function(S,E,C){return this.ec.sign(S,this,E,C)},_.prototype.verify=function(S,E,C){return this.ec.verify(S,E,this,void 0,C)},_.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}var signature$1,hasRequiredSignature$1;function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var n=requireBn$2(),r=requireUtils$2(),g=r.assert;function _(T,R){if(T instanceof _)return T;this._importDER(T,R)||(g(T.r&&T.s,"Signature without r or s"),this.r=new n(T.r,16),this.s=new n(T.s,16),T.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=T.recoveryParam)}signature$1=_;function x(){this.place=0}function S(T,R){var A=T[R.place++];if(!(A&128))return A;var I=A&15;if(I===0||I>4||T[R.place]===0)return!1;for(var B=0,D=0,N=R.place;D<I;D++,N++)B<<=8,B|=T[N],B>>>=0;return B<=127?!1:(R.place=N,B)}function E(T){for(var R=0,A=T.length-1;!T[R]&&!(T[R+1]&128)&&R<A;)R++;return R===0?T:T.slice(R)}_.prototype._importDER=function(R,A){R=r.toArray(R,A);var I=new x;if(R[I.place++]!==48)return!1;var B=S(R,I);if(B===!1||B+I.place!==R.length||R[I.place++]!==2)return!1;var D=S(R,I);if(D===!1||R[I.place]&128)return!1;var N=R.slice(I.place,D+I.place);if(I.place+=D,R[I.place++]!==2)return!1;var M=S(R,I);if(M===!1||R.length!==M+I.place||R[I.place]&128)return!1;var O=R.slice(I.place,M+I.place);if(N[0]===0)if(N[1]&128)N=N.slice(1);else return!1;if(O[0]===0)if(O[1]&128)O=O.slice(1);else return!1;return this.r=new n(N),this.s=new n(O),this.recoveryParam=null,!0};function C(T,R){if(R<128){T.push(R);return}var A=1+(Math.log(R)/Math.LN2>>>3);for(T.push(A|128);--A;)T.push(R>>>(A<<3)&255);T.push(R)}return _.prototype.toDER=function(R){var A=this.r.toArray(),I=this.s.toArray();for(A[0]&128&&(A=[0].concat(A)),I[0]&128&&(I=[0].concat(I)),A=E(A),I=E(I);!I[0]&&!(I[1]&128);)I=I.slice(1);var B=[2];C(B,A.length),B=B.concat(A),B.push(2),C(B,I.length);var D=B.concat(I),N=[48];return C(N,D.length),N=N.concat(D),r.encode(N,R)},signature$1}var ec,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var n=requireBn$2(),r=requireHmacDrbg(),g=requireUtils$2(),_=requireCurves(),x=requireBrorand(),S=g.assert,E=requireKey$1(),C=requireSignature$1();function T(R){if(!(this instanceof T))return new T(R);typeof R=="string"&&(S(Object.prototype.hasOwnProperty.call(_,R),"Unknown curve "+R),R=_[R]),R instanceof _.PresetCurve&&(R={curve:R}),this.curve=R.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=R.curve.g,this.g.precompute(R.curve.n.bitLength()+1),this.hash=R.hash||R.curve.hash}return ec=T,T.prototype.keyPair=function(A){return new E(this,A)},T.prototype.keyFromPrivate=function(A,I){return E.fromPrivate(this,A,I)},T.prototype.keyFromPublic=function(A,I){return E.fromPublic(this,A,I)},T.prototype.genKeyPair=function(A){A||(A={});for(var I=new r({hash:this.hash,pers:A.pers,persEnc:A.persEnc||"utf8",entropy:A.entropy||x(this.hash.hmacStrength),entropyEnc:A.entropy&&A.entropyEnc||"utf8",nonce:this.n.toArray()}),B=this.n.byteLength(),D=this.n.sub(new n(2));;){var N=new n(I.generate(B));if(!(N.cmp(D)>0))return N.iaddn(1),this.keyFromPrivate(N)}},T.prototype._truncateToN=function(A,I,B){var D;if(n.isBN(A)||typeof A=="number")A=new n(A,16),D=A.byteLength();else if(typeof A=="object")D=A.length,A=new n(A,16);else{var N=A.toString();D=N.length+1>>>1,A=new n(N,16)}typeof B!="number"&&(B=D*8);var M=B-this.n.bitLength();return M>0&&(A=A.ushrn(M)),!I&&A.cmp(this.n)>=0?A.sub(this.n):A},T.prototype.sign=function(A,I,B,D){if(typeof B=="object"&&(D=B,B=null),D||(D={}),typeof A!="string"&&typeof A!="number"&&!n.isBN(A)){S(typeof A=="object"&&A&&typeof A.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),S(A.length>>>0===A.length);for(var N=0;N<A.length;N++)S((A[N]&255)===A[N])}I=this.keyFromPrivate(I,B),A=this._truncateToN(A,!1,D.msgBitLength),S(!A.isNeg(),"Can not sign a negative message");var M=this.n.byteLength(),O=I.getPrivate().toArray("be",M),L=A.toArray("be",M);S(new n(L).eq(A),"Can not sign message");for(var F=new r({hash:this.hash,entropy:O,nonce:L,pers:D.pers,persEnc:D.persEnc||"utf8"}),U=this.n.sub(new n(1)),j=0;;j++){var z=D.k?D.k(j):new n(F.generate(this.n.byteLength()));if(z=this._truncateToN(z,!0),!(z.cmpn(1)<=0||z.cmp(U)>=0)){var W=this.g.mul(z);if(!W.isInfinity()){var X=W.getX(),ie=X.umod(this.n);if(ie.cmpn(0)!==0){var fe=z.invm(this.n).mul(ie.mul(I.getPrivate()).iadd(A));if(fe=fe.umod(this.n),fe.cmpn(0)!==0){var xe=(W.getY().isOdd()?1:0)|(X.cmp(ie)!==0?2:0);return D.canonical&&fe.cmp(this.nh)>0&&(fe=this.n.sub(fe),xe^=1),new C({r:ie,s:fe,recoveryParam:xe})}}}}}},T.prototype.verify=function(A,I,B,D,N){N||(N={}),A=this._truncateToN(A,!1,N.msgBitLength),B=this.keyFromPublic(B,D),I=new C(I,"hex");var M=I.r,O=I.s;if(M.cmpn(1)<0||M.cmp(this.n)>=0||O.cmpn(1)<0||O.cmp(this.n)>=0)return!1;var L=O.invm(this.n),F=L.mul(A).umod(this.n),U=L.mul(M).umod(this.n),j;return this.curve._maxwellTrick?(j=this.g.jmulAdd(F,B.getPublic(),U),j.isInfinity()?!1:j.eqXToP(M)):(j=this.g.mulAdd(F,B.getPublic(),U),j.isInfinity()?!1:j.getX().umod(this.n).cmp(M)===0)},T.prototype.recoverPubKey=function(R,A,I,B){S((3&I)===I,"The recovery param is more than two bits"),A=new C(A,B);var D=this.n,N=new n(R),M=A.r,O=A.s,L=I&1,F=I>>1;if(M.cmp(this.curve.p.umod(this.curve.n))>=0&&F)throw new Error("Unable to find sencond key candinate");F?M=this.curve.pointFromX(M.add(this.curve.n),L):M=this.curve.pointFromX(M,L);var U=A.r.invm(D),j=D.sub(N).mul(U).umod(D),z=O.mul(U).umod(D);return this.g.mulAdd(j,M,z)},T.prototype.getKeyRecoveryParam=function(R,A,I,B){if(A=new C(A,B),A.recoveryParam!==null)return A.recoveryParam;for(var D=0;D<4;D++){var N;try{N=this.recoverPubKey(R,A,D)}catch{continue}if(N.eq(I))return D}throw new Error("Unable to find valid recovery factor")},ec}var key,hasRequiredKey;function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var n=requireUtils$2(),r=n.assert,g=n.parseBytes,_=n.cachedProperty;function x(S,E){this.eddsa=S,this._secret=g(E.secret),S.isPoint(E.pub)?this._pub=E.pub:this._pubBytes=g(E.pub)}return x.fromPublic=function(E,C){return C instanceof x?C:new x(E,{pub:C})},x.fromSecret=function(E,C){return C instanceof x?C:new x(E,{secret:C})},x.prototype.secret=function(){return this._secret},_(x,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),_(x,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),_(x,"privBytes",function(){var E=this.eddsa,C=this.hash(),T=E.encodingLength-1,R=C.slice(0,E.encodingLength);return R[0]&=248,R[T]&=127,R[T]|=64,R}),_(x,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),_(x,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),_(x,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),x.prototype.sign=function(E){return r(this._secret,"KeyPair can only verify"),this.eddsa.sign(E,this)},x.prototype.verify=function(E,C){return this.eddsa.verify(E,C,this)},x.prototype.getSecret=function(E){return r(this._secret,"KeyPair is public only"),n.encode(this.secret(),E)},x.prototype.getPublic=function(E){return n.encode(this.pubBytes(),E)},key=x,key}var signature,hasRequiredSignature;function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var n=requireBn$2(),r=requireUtils$2(),g=r.assert,_=r.cachedProperty,x=r.parseBytes;function S(E,C){this.eddsa=E,typeof C!="object"&&(C=x(C)),Array.isArray(C)&&(g(C.length===E.encodingLength*2,"Signature has invalid size"),C={R:C.slice(0,E.encodingLength),S:C.slice(E.encodingLength)}),g(C.R&&C.S,"Signature without R or S"),E.isPoint(C.R)&&(this._R=C.R),C.S instanceof n&&(this._S=C.S),this._Rencoded=Array.isArray(C.R)?C.R:C.Rencoded,this._Sencoded=Array.isArray(C.S)?C.S:C.Sencoded}return _(S,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),_(S,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),_(S,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),_(S,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),S.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},S.prototype.toHex=function(){return r.encode(this.toBytes(),"hex").toUpperCase()},signature=S,signature}var eddsa,hasRequiredEddsa;function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var n=requireHash(),r=requireCurves(),g=requireUtils$2(),_=g.assert,x=g.parseBytes,S=requireKey(),E=requireSignature();function C(T){if(_(T==="ed25519","only tested with ed25519 so far"),!(this instanceof C))return new C(T);T=r[T].curve,this.curve=T,this.g=T.g,this.g.precompute(T.n.bitLength()+1),this.pointClass=T.point().constructor,this.encodingLength=Math.ceil(T.n.bitLength()/8),this.hash=n.sha512}return eddsa=C,C.prototype.sign=function(R,A){R=x(R);var I=this.keyFromSecret(A),B=this.hashInt(I.messagePrefix(),R),D=this.g.mul(B),N=this.encodePoint(D),M=this.hashInt(N,I.pubBytes(),R).mul(I.priv()),O=B.add(M).umod(this.curve.n);return this.makeSignature({R:D,S:O,Rencoded:N})},C.prototype.verify=function(R,A,I){if(R=x(R),A=this.makeSignature(A),A.S().gte(A.eddsa.curve.n)||A.S().isNeg())return!1;var B=this.keyFromPublic(I),D=this.hashInt(A.Rencoded(),B.pubBytes(),R),N=this.g.mul(A.S()),M=A.R().add(B.pub().mul(D));return M.eq(N)},C.prototype.hashInt=function(){for(var R=this.hash(),A=0;A<arguments.length;A++)R.update(arguments[A]);return g.intFromLE(R.digest()).umod(this.curve.n)},C.prototype.keyFromPublic=function(R){return S.fromPublic(this,R)},C.prototype.keyFromSecret=function(R){return S.fromSecret(this,R)},C.prototype.makeSignature=function(R){return R instanceof E?R:new E(this,R)},C.prototype.encodePoint=function(R){var A=R.getY().toArray("le",this.encodingLength);return A[this.encodingLength-1]|=R.getX().isOdd()?128:0,A},C.prototype.decodePoint=function(R){R=g.parseBytes(R);var A=R.length-1,I=R.slice(0,A).concat(R[A]&-129),B=(R[A]&128)!==0,D=g.intFromLE(I);return this.curve.pointFromY(D,B)},C.prototype.encodeInt=function(R){return R.toArray("le",this.encodingLength)},C.prototype.decodeInt=function(R){return g.intFromLE(R)},C.prototype.isPoint=function(R){return R instanceof this.pointClass},eddsa}var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(n){var r=n;r.version=require$$0$1.version,r.utils=requireUtils$2(),r.rand=requireBrorand(),r.curve=requireCurve(),r.curves=requireCurves(),r.ec=requireEc(),r.eddsa=requireEddsa()}(elliptic)),elliptic}var bn$1={exports:{}},bn=bn$1.exports,hasRequiredBn;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(n){(function(r,g){function _(J,q){if(!J)throw new Error(q||"Assertion failed")}function x(J,q){J.super_=q;var H=function(){};H.prototype=q.prototype,J.prototype=new H,J.prototype.constructor=J}function S(J,q,H){if(S.isBN(J))return J;this.negative=0,this.words=null,this.length=0,this.red=null,J!==null&&((q==="le"||q==="be")&&(H=q,q=10),this._init(J||0,q||10,H||"be"))}typeof r=="object"?r.exports=S:g.BN=S,S.BN=S,S.wordSize=26;var E;try{typeof window<"u"&&typeof window.Buffer<"u"?E=window.Buffer:E=requireDist().Buffer}catch{}S.isBN=function(q){return q instanceof S?!0:q!==null&&typeof q=="object"&&q.constructor.wordSize===S.wordSize&&Array.isArray(q.words)},S.max=function(q,H){return q.cmp(H)>0?q:H},S.min=function(q,H){return q.cmp(H)<0?q:H},S.prototype._init=function(q,H,ve){if(typeof q=="number")return this._initNumber(q,H,ve);if(typeof q=="object")return this._initArray(q,H,ve);H==="hex"&&(H=16),_(H===(H|0)&&H>=2&&H<=36),q=q.toString().replace(/\s+/g,"");var Z=0;q[0]==="-"&&(Z++,this.negative=1),Z<q.length&&(H===16?this._parseHex(q,Z,ve):(this._parseBase(q,H,Z),ve==="le"&&this._initArray(this.toArray(),H,ve)))},S.prototype._initNumber=function(q,H,ve){q<0&&(this.negative=1,q=-q),q<67108864?(this.words=[q&67108863],this.length=1):q<4503599627370496?(this.words=[q&67108863,q/67108864&67108863],this.length=2):(_(q<9007199254740992),this.words=[q&67108863,q/67108864&67108863,1],this.length=3),ve==="le"&&this._initArray(this.toArray(),H,ve)},S.prototype._initArray=function(q,H,ve){if(_(typeof q.length=="number"),q.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(q.length/3),this.words=new Array(this.length);for(var Z=0;Z<this.length;Z++)this.words[Z]=0;var ce,ue,se=0;if(ve==="be")for(Z=q.length-1,ce=0;Z>=0;Z-=3)ue=q[Z]|q[Z-1]<<8|q[Z-2]<<16,this.words[ce]|=ue<<se&67108863,this.words[ce+1]=ue>>>26-se&67108863,se+=24,se>=26&&(se-=26,ce++);else if(ve==="le")for(Z=0,ce=0;Z<q.length;Z+=3)ue=q[Z]|q[Z+1]<<8|q[Z+2]<<16,this.words[ce]|=ue<<se&67108863,this.words[ce+1]=ue>>>26-se&67108863,se+=24,se>=26&&(se-=26,ce++);return this._strip()};function C(J,q){var H=J.charCodeAt(q);if(H>=48&&H<=57)return H-48;if(H>=65&&H<=70)return H-55;if(H>=97&&H<=102)return H-87;_(!1,"Invalid character in "+J)}function T(J,q,H){var ve=C(J,H);return H-1>=q&&(ve|=C(J,H-1)<<4),ve}S.prototype._parseHex=function(q,H,ve){this.length=Math.ceil((q.length-H)/6),this.words=new Array(this.length);for(var Z=0;Z<this.length;Z++)this.words[Z]=0;var ce=0,ue=0,se;if(ve==="be")for(Z=q.length-1;Z>=H;Z-=2)se=T(q,H,Z)<<ce,this.words[ue]|=se&67108863,ce>=18?(ce-=18,ue+=1,this.words[ue]|=se>>>26):ce+=8;else{var te=q.length-H;for(Z=te%2===0?H+1:H;Z<q.length;Z+=2)se=T(q,H,Z)<<ce,this.words[ue]|=se&67108863,ce>=18?(ce-=18,ue+=1,this.words[ue]|=se>>>26):ce+=8}this._strip()};function R(J,q,H,ve){for(var Z=0,ce=0,ue=Math.min(J.length,H),se=q;se<ue;se++){var te=J.charCodeAt(se)-48;Z*=ve,te>=49?ce=te-49+10:te>=17?ce=te-17+10:ce=te,_(te>=0&&ce<ve,"Invalid character"),Z+=ce}return Z}S.prototype._parseBase=function(q,H,ve){this.words=[0],this.length=1;for(var Z=0,ce=1;ce<=67108863;ce*=H)Z++;Z--,ce=ce/H|0;for(var ue=q.length-ve,se=ue%Z,te=Math.min(ue,ue-se)+ve,Y=0,be=ve;be<te;be+=Z)Y=R(q,be,be+Z,H),this.imuln(ce),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y);if(se!==0){var ye=1;for(Y=R(q,be,q.length,H),be=0;be<se;be++)ye*=H;this.imuln(ye),this.words[0]+Y<67108864?this.words[0]+=Y:this._iaddn(Y)}this._strip()},S.prototype.copy=function(q){q.words=new Array(this.length);for(var H=0;H<this.length;H++)q.words[H]=this.words[H];q.length=this.length,q.negative=this.negative,q.red=this.red};function A(J,q){J.words=q.words,J.length=q.length,J.negative=q.negative,J.red=q.red}if(S.prototype._move=function(q){A(q,this)},S.prototype.clone=function(){var q=new S(null);return this.copy(q),q},S.prototype._expand=function(q){for(;this.length<q;)this.words[this.length++]=0;return this},S.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},S.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{S.prototype[Symbol.for("nodejs.util.inspect.custom")]=I}catch{S.prototype.inspect=I}else S.prototype.inspect=I;function I(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var B=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],D=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];S.prototype.toString=function(q,H){q=q||10,H=H|0||1;var ve;if(q===16||q==="hex"){ve="";for(var Z=0,ce=0,ue=0;ue<this.length;ue++){var se=this.words[ue],te=((se<<Z|ce)&16777215).toString(16);ce=se>>>24-Z&16777215,Z+=2,Z>=26&&(Z-=26,ue--),ce!==0||ue!==this.length-1?ve=B[6-te.length]+te+ve:ve=te+ve}for(ce!==0&&(ve=ce.toString(16)+ve);ve.length%H!==0;)ve="0"+ve;return this.negative!==0&&(ve="-"+ve),ve}if(q===(q|0)&&q>=2&&q<=36){var Y=D[q],be=N[q];ve="";var ye=this.clone();for(ye.negative=0;!ye.isZero();){var Ie=ye.modrn(be).toString(q);ye=ye.idivn(be),ye.isZero()?ve=Ie+ve:ve=B[Y-Ie.length]+Ie+ve}for(this.isZero()&&(ve="0"+ve);ve.length%H!==0;)ve="0"+ve;return this.negative!==0&&(ve="-"+ve),ve}_(!1,"Base should be between 2 and 36")},S.prototype.toNumber=function(){var q=this.words[0];return this.length===2?q+=this.words[1]*67108864:this.length===3&&this.words[2]===1?q+=4503599627370496+this.words[1]*67108864:this.length>2&&_(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-q:q},S.prototype.toJSON=function(){return this.toString(16,2)},E&&(S.prototype.toBuffer=function(q,H){return this.toArrayLike(E,q,H)}),S.prototype.toArray=function(q,H){return this.toArrayLike(Array,q,H)};var M=function(q,H){return q.allocUnsafe?q.allocUnsafe(H):new q(H)};S.prototype.toArrayLike=function(q,H,ve){this._strip();var Z=this.byteLength(),ce=ve||Math.max(1,Z);_(Z<=ce,"byte array longer than desired length"),_(ce>0,"Requested array length <= 0");var ue=M(q,ce),se=H==="le"?"LE":"BE";return this["_toArrayLike"+se](ue,Z),ue},S.prototype._toArrayLikeLE=function(q,H){for(var ve=0,Z=0,ce=0,ue=0;ce<this.length;ce++){var se=this.words[ce]<<ue|Z;q[ve++]=se&255,ve<q.length&&(q[ve++]=se>>8&255),ve<q.length&&(q[ve++]=se>>16&255),ue===6?(ve<q.length&&(q[ve++]=se>>24&255),Z=0,ue=0):(Z=se>>>24,ue+=2)}if(ve<q.length)for(q[ve++]=Z;ve<q.length;)q[ve++]=0},S.prototype._toArrayLikeBE=function(q,H){for(var ve=q.length-1,Z=0,ce=0,ue=0;ce<this.length;ce++){var se=this.words[ce]<<ue|Z;q[ve--]=se&255,ve>=0&&(q[ve--]=se>>8&255),ve>=0&&(q[ve--]=se>>16&255),ue===6?(ve>=0&&(q[ve--]=se>>24&255),Z=0,ue=0):(Z=se>>>24,ue+=2)}if(ve>=0)for(q[ve--]=Z;ve>=0;)q[ve--]=0},Math.clz32?S.prototype._countBits=function(q){return 32-Math.clz32(q)}:S.prototype._countBits=function(q){var H=q,ve=0;return H>=4096&&(ve+=13,H>>>=13),H>=64&&(ve+=7,H>>>=7),H>=8&&(ve+=4,H>>>=4),H>=2&&(ve+=2,H>>>=2),ve+H},S.prototype._zeroBits=function(q){if(q===0)return 26;var H=q,ve=0;return H&8191||(ve+=13,H>>>=13),H&127||(ve+=7,H>>>=7),H&15||(ve+=4,H>>>=4),H&3||(ve+=2,H>>>=2),H&1||ve++,ve},S.prototype.bitLength=function(){var q=this.words[this.length-1],H=this._countBits(q);return(this.length-1)*26+H};function O(J){for(var q=new Array(J.bitLength()),H=0;H<q.length;H++){var ve=H/26|0,Z=H%26;q[H]=J.words[ve]>>>Z&1}return q}S.prototype.zeroBits=function(){if(this.isZero())return 0;for(var q=0,H=0;H<this.length;H++){var ve=this._zeroBits(this.words[H]);if(q+=ve,ve!==26)break}return q},S.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},S.prototype.toTwos=function(q){return this.negative!==0?this.abs().inotn(q).iaddn(1):this.clone()},S.prototype.fromTwos=function(q){return this.testn(q-1)?this.notn(q).iaddn(1).ineg():this.clone()},S.prototype.isNeg=function(){return this.negative!==0},S.prototype.neg=function(){return this.clone().ineg()},S.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},S.prototype.iuor=function(q){for(;this.length<q.length;)this.words[this.length++]=0;for(var H=0;H<q.length;H++)this.words[H]=this.words[H]|q.words[H];return this._strip()},S.prototype.ior=function(q){return _((this.negative|q.negative)===0),this.iuor(q)},S.prototype.or=function(q){return this.length>q.length?this.clone().ior(q):q.clone().ior(this)},S.prototype.uor=function(q){return this.length>q.length?this.clone().iuor(q):q.clone().iuor(this)},S.prototype.iuand=function(q){var H;this.length>q.length?H=q:H=this;for(var ve=0;ve<H.length;ve++)this.words[ve]=this.words[ve]&q.words[ve];return this.length=H.length,this._strip()},S.prototype.iand=function(q){return _((this.negative|q.negative)===0),this.iuand(q)},S.prototype.and=function(q){return this.length>q.length?this.clone().iand(q):q.clone().iand(this)},S.prototype.uand=function(q){return this.length>q.length?this.clone().iuand(q):q.clone().iuand(this)},S.prototype.iuxor=function(q){var H,ve;this.length>q.length?(H=this,ve=q):(H=q,ve=this);for(var Z=0;Z<ve.length;Z++)this.words[Z]=H.words[Z]^ve.words[Z];if(this!==H)for(;Z<H.length;Z++)this.words[Z]=H.words[Z];return this.length=H.length,this._strip()},S.prototype.ixor=function(q){return _((this.negative|q.negative)===0),this.iuxor(q)},S.prototype.xor=function(q){return this.length>q.length?this.clone().ixor(q):q.clone().ixor(this)},S.prototype.uxor=function(q){return this.length>q.length?this.clone().iuxor(q):q.clone().iuxor(this)},S.prototype.inotn=function(q){_(typeof q=="number"&&q>=0);var H=Math.ceil(q/26)|0,ve=q%26;this._expand(H),ve>0&&H--;for(var Z=0;Z<H;Z++)this.words[Z]=~this.words[Z]&67108863;return ve>0&&(this.words[Z]=~this.words[Z]&67108863>>26-ve),this._strip()},S.prototype.notn=function(q){return this.clone().inotn(q)},S.prototype.setn=function(q,H){_(typeof q=="number"&&q>=0);var ve=q/26|0,Z=q%26;return this._expand(ve+1),H?this.words[ve]=this.words[ve]|1<<Z:this.words[ve]=this.words[ve]&~(1<<Z),this._strip()},S.prototype.iadd=function(q){var H;if(this.negative!==0&&q.negative===0)return this.negative=0,H=this.isub(q),this.negative^=1,this._normSign();if(this.negative===0&&q.negative!==0)return q.negative=0,H=this.isub(q),q.negative=1,H._normSign();var ve,Z;this.length>q.length?(ve=this,Z=q):(ve=q,Z=this);for(var ce=0,ue=0;ue<Z.length;ue++)H=(ve.words[ue]|0)+(Z.words[ue]|0)+ce,this.words[ue]=H&67108863,ce=H>>>26;for(;ce!==0&&ue<ve.length;ue++)H=(ve.words[ue]|0)+ce,this.words[ue]=H&67108863,ce=H>>>26;if(this.length=ve.length,ce!==0)this.words[this.length]=ce,this.length++;else if(ve!==this)for(;ue<ve.length;ue++)this.words[ue]=ve.words[ue];return this},S.prototype.add=function(q){var H;return q.negative!==0&&this.negative===0?(q.negative=0,H=this.sub(q),q.negative^=1,H):q.negative===0&&this.negative!==0?(this.negative=0,H=q.sub(this),this.negative=1,H):this.length>q.length?this.clone().iadd(q):q.clone().iadd(this)},S.prototype.isub=function(q){if(q.negative!==0){q.negative=0;var H=this.iadd(q);return q.negative=1,H._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(q),this.negative=1,this._normSign();var ve=this.cmp(q);if(ve===0)return this.negative=0,this.length=1,this.words[0]=0,this;var Z,ce;ve>0?(Z=this,ce=q):(Z=q,ce=this);for(var ue=0,se=0;se<ce.length;se++)H=(Z.words[se]|0)-(ce.words[se]|0)+ue,ue=H>>26,this.words[se]=H&67108863;for(;ue!==0&&se<Z.length;se++)H=(Z.words[se]|0)+ue,ue=H>>26,this.words[se]=H&67108863;if(ue===0&&se<Z.length&&Z!==this)for(;se<Z.length;se++)this.words[se]=Z.words[se];return this.length=Math.max(this.length,se),Z!==this&&(this.negative=1),this._strip()},S.prototype.sub=function(q){return this.clone().isub(q)};function L(J,q,H){H.negative=q.negative^J.negative;var ve=J.length+q.length|0;H.length=ve,ve=ve-1|0;var Z=J.words[0]|0,ce=q.words[0]|0,ue=Z*ce,se=ue&67108863,te=ue/67108864|0;H.words[0]=se;for(var Y=1;Y<ve;Y++){for(var be=te>>>26,ye=te&67108863,Ie=Math.min(Y,q.length-1),ke=Math.max(0,Y-J.length+1);ke<=Ie;ke++){var Ce=Y-ke|0;Z=J.words[Ce]|0,ce=q.words[ke]|0,ue=Z*ce+ye,be+=ue/67108864|0,ye=ue&67108863}H.words[Y]=ye|0,te=be|0}return te!==0?H.words[Y]=te|0:H.length--,H._strip()}var F=function(q,H,ve){var Z=q.words,ce=H.words,ue=ve.words,se=0,te,Y,be,ye=Z[0]|0,Ie=ye&8191,ke=ye>>>13,Ce=Z[1]|0,Ae=Ce&8191,Ne=Ce>>>13,We=Z[2]|0,Be=We&8191,Se=We>>>13,$e=Z[3]|0,_e=$e&8191,Oe=$e>>>13,Ke=Z[4]|0,Me=Ke&8191,Le=Ke>>>13,ze=Z[5]|0,Je=ze&8191,Qe=ze>>>13,rt=Z[6]|0,wt=rt&8191,bt=rt>>>13,xt=Z[7]|0,Et=xt&8191,Rt=xt>>>13,$t=Z[8]|0,qt=$t&8191,Ge=$t>>>13,De=Z[9]|0,Ve=De&8191,Ze=De>>>13,_t=ce[0]|0,ft=_t&8191,ht=_t>>>13,zt=ce[1]|0,Kt=zt&8191,Ft=zt>>>13,Jt=ce[2]|0,jt=Jt&8191,rr=Jt>>>13,ir=ce[3]|0,cr=ir&8191,sr=ir>>>13,yr=ce[4]|0,ur=yr&8191,Ye=yr>>>13,Fe=ce[5]|0,qe=Fe&8191,pt=Fe>>>13,St=ce[6]|0,Tt=St&8191,At=St>>>13,ar=ce[7]|0,Xe=ar&8191,nt=ar>>>13,ot=ce[8]|0,et=ot&8191,mt=ot>>>13,vt=ce[9]|0,Ct=vt&8191,Pt=vt>>>13;ve.negative=q.negative^H.negative,ve.length=19,te=Math.imul(Ie,ft),Y=Math.imul(Ie,ht),Y=Y+Math.imul(ke,ft)|0,be=Math.imul(ke,ht);var It=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(It>>>26)|0,It&=67108863,te=Math.imul(Ae,ft),Y=Math.imul(Ae,ht),Y=Y+Math.imul(Ne,ft)|0,be=Math.imul(Ne,ht),te=te+Math.imul(Ie,Kt)|0,Y=Y+Math.imul(Ie,Ft)|0,Y=Y+Math.imul(ke,Kt)|0,be=be+Math.imul(ke,Ft)|0;var Nt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,te=Math.imul(Be,ft),Y=Math.imul(Be,ht),Y=Y+Math.imul(Se,ft)|0,be=Math.imul(Se,ht),te=te+Math.imul(Ae,Kt)|0,Y=Y+Math.imul(Ae,Ft)|0,Y=Y+Math.imul(Ne,Kt)|0,be=be+Math.imul(Ne,Ft)|0,te=te+Math.imul(Ie,jt)|0,Y=Y+Math.imul(Ie,rr)|0,Y=Y+Math.imul(ke,jt)|0,be=be+Math.imul(ke,rr)|0;var Dt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,te=Math.imul(_e,ft),Y=Math.imul(_e,ht),Y=Y+Math.imul(Oe,ft)|0,be=Math.imul(Oe,ht),te=te+Math.imul(Be,Kt)|0,Y=Y+Math.imul(Be,Ft)|0,Y=Y+Math.imul(Se,Kt)|0,be=be+Math.imul(Se,Ft)|0,te=te+Math.imul(Ae,jt)|0,Y=Y+Math.imul(Ae,rr)|0,Y=Y+Math.imul(Ne,jt)|0,be=be+Math.imul(Ne,rr)|0,te=te+Math.imul(Ie,cr)|0,Y=Y+Math.imul(Ie,sr)|0,Y=Y+Math.imul(ke,cr)|0,be=be+Math.imul(ke,sr)|0;var Ht=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Ht>>>26)|0,Ht&=67108863,te=Math.imul(Me,ft),Y=Math.imul(Me,ht),Y=Y+Math.imul(Le,ft)|0,be=Math.imul(Le,ht),te=te+Math.imul(_e,Kt)|0,Y=Y+Math.imul(_e,Ft)|0,Y=Y+Math.imul(Oe,Kt)|0,be=be+Math.imul(Oe,Ft)|0,te=te+Math.imul(Be,jt)|0,Y=Y+Math.imul(Be,rr)|0,Y=Y+Math.imul(Se,jt)|0,be=be+Math.imul(Se,rr)|0,te=te+Math.imul(Ae,cr)|0,Y=Y+Math.imul(Ae,sr)|0,Y=Y+Math.imul(Ne,cr)|0,be=be+Math.imul(Ne,sr)|0,te=te+Math.imul(Ie,ur)|0,Y=Y+Math.imul(Ie,Ye)|0,Y=Y+Math.imul(ke,ur)|0,be=be+Math.imul(ke,Ye)|0;var Zt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Zt>>>26)|0,Zt&=67108863,te=Math.imul(Je,ft),Y=Math.imul(Je,ht),Y=Y+Math.imul(Qe,ft)|0,be=Math.imul(Qe,ht),te=te+Math.imul(Me,Kt)|0,Y=Y+Math.imul(Me,Ft)|0,Y=Y+Math.imul(Le,Kt)|0,be=be+Math.imul(Le,Ft)|0,te=te+Math.imul(_e,jt)|0,Y=Y+Math.imul(_e,rr)|0,Y=Y+Math.imul(Oe,jt)|0,be=be+Math.imul(Oe,rr)|0,te=te+Math.imul(Be,cr)|0,Y=Y+Math.imul(Be,sr)|0,Y=Y+Math.imul(Se,cr)|0,be=be+Math.imul(Se,sr)|0,te=te+Math.imul(Ae,ur)|0,Y=Y+Math.imul(Ae,Ye)|0,Y=Y+Math.imul(Ne,ur)|0,be=be+Math.imul(Ne,Ye)|0,te=te+Math.imul(Ie,qe)|0,Y=Y+Math.imul(Ie,pt)|0,Y=Y+Math.imul(ke,qe)|0,be=be+Math.imul(ke,pt)|0;var nr=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(nr>>>26)|0,nr&=67108863,te=Math.imul(wt,ft),Y=Math.imul(wt,ht),Y=Y+Math.imul(bt,ft)|0,be=Math.imul(bt,ht),te=te+Math.imul(Je,Kt)|0,Y=Y+Math.imul(Je,Ft)|0,Y=Y+Math.imul(Qe,Kt)|0,be=be+Math.imul(Qe,Ft)|0,te=te+Math.imul(Me,jt)|0,Y=Y+Math.imul(Me,rr)|0,Y=Y+Math.imul(Le,jt)|0,be=be+Math.imul(Le,rr)|0,te=te+Math.imul(_e,cr)|0,Y=Y+Math.imul(_e,sr)|0,Y=Y+Math.imul(Oe,cr)|0,be=be+Math.imul(Oe,sr)|0,te=te+Math.imul(Be,ur)|0,Y=Y+Math.imul(Be,Ye)|0,Y=Y+Math.imul(Se,ur)|0,be=be+Math.imul(Se,Ye)|0,te=te+Math.imul(Ae,qe)|0,Y=Y+Math.imul(Ae,pt)|0,Y=Y+Math.imul(Ne,qe)|0,be=be+Math.imul(Ne,pt)|0,te=te+Math.imul(Ie,Tt)|0,Y=Y+Math.imul(Ie,At)|0,Y=Y+Math.imul(ke,Tt)|0,be=be+Math.imul(ke,At)|0;var Xt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,te=Math.imul(Et,ft),Y=Math.imul(Et,ht),Y=Y+Math.imul(Rt,ft)|0,be=Math.imul(Rt,ht),te=te+Math.imul(wt,Kt)|0,Y=Y+Math.imul(wt,Ft)|0,Y=Y+Math.imul(bt,Kt)|0,be=be+Math.imul(bt,Ft)|0,te=te+Math.imul(Je,jt)|0,Y=Y+Math.imul(Je,rr)|0,Y=Y+Math.imul(Qe,jt)|0,be=be+Math.imul(Qe,rr)|0,te=te+Math.imul(Me,cr)|0,Y=Y+Math.imul(Me,sr)|0,Y=Y+Math.imul(Le,cr)|0,be=be+Math.imul(Le,sr)|0,te=te+Math.imul(_e,ur)|0,Y=Y+Math.imul(_e,Ye)|0,Y=Y+Math.imul(Oe,ur)|0,be=be+Math.imul(Oe,Ye)|0,te=te+Math.imul(Be,qe)|0,Y=Y+Math.imul(Be,pt)|0,Y=Y+Math.imul(Se,qe)|0,be=be+Math.imul(Se,pt)|0,te=te+Math.imul(Ae,Tt)|0,Y=Y+Math.imul(Ae,At)|0,Y=Y+Math.imul(Ne,Tt)|0,be=be+Math.imul(Ne,At)|0,te=te+Math.imul(Ie,Xe)|0,Y=Y+Math.imul(Ie,nt)|0,Y=Y+Math.imul(ke,Xe)|0,be=be+Math.imul(ke,nt)|0;var Qt=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(Qt>>>26)|0,Qt&=67108863,te=Math.imul(qt,ft),Y=Math.imul(qt,ht),Y=Y+Math.imul(Ge,ft)|0,be=Math.imul(Ge,ht),te=te+Math.imul(Et,Kt)|0,Y=Y+Math.imul(Et,Ft)|0,Y=Y+Math.imul(Rt,Kt)|0,be=be+Math.imul(Rt,Ft)|0,te=te+Math.imul(wt,jt)|0,Y=Y+Math.imul(wt,rr)|0,Y=Y+Math.imul(bt,jt)|0,be=be+Math.imul(bt,rr)|0,te=te+Math.imul(Je,cr)|0,Y=Y+Math.imul(Je,sr)|0,Y=Y+Math.imul(Qe,cr)|0,be=be+Math.imul(Qe,sr)|0,te=te+Math.imul(Me,ur)|0,Y=Y+Math.imul(Me,Ye)|0,Y=Y+Math.imul(Le,ur)|0,be=be+Math.imul(Le,Ye)|0,te=te+Math.imul(_e,qe)|0,Y=Y+Math.imul(_e,pt)|0,Y=Y+Math.imul(Oe,qe)|0,be=be+Math.imul(Oe,pt)|0,te=te+Math.imul(Be,Tt)|0,Y=Y+Math.imul(Be,At)|0,Y=Y+Math.imul(Se,Tt)|0,be=be+Math.imul(Se,At)|0,te=te+Math.imul(Ae,Xe)|0,Y=Y+Math.imul(Ae,nt)|0,Y=Y+Math.imul(Ne,Xe)|0,be=be+Math.imul(Ne,nt)|0,te=te+Math.imul(Ie,et)|0,Y=Y+Math.imul(Ie,mt)|0,Y=Y+Math.imul(ke,et)|0,be=be+Math.imul(ke,mt)|0;var gr=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(gr>>>26)|0,gr&=67108863,te=Math.imul(Ve,ft),Y=Math.imul(Ve,ht),Y=Y+Math.imul(Ze,ft)|0,be=Math.imul(Ze,ht),te=te+Math.imul(qt,Kt)|0,Y=Y+Math.imul(qt,Ft)|0,Y=Y+Math.imul(Ge,Kt)|0,be=be+Math.imul(Ge,Ft)|0,te=te+Math.imul(Et,jt)|0,Y=Y+Math.imul(Et,rr)|0,Y=Y+Math.imul(Rt,jt)|0,be=be+Math.imul(Rt,rr)|0,te=te+Math.imul(wt,cr)|0,Y=Y+Math.imul(wt,sr)|0,Y=Y+Math.imul(bt,cr)|0,be=be+Math.imul(bt,sr)|0,te=te+Math.imul(Je,ur)|0,Y=Y+Math.imul(Je,Ye)|0,Y=Y+Math.imul(Qe,ur)|0,be=be+Math.imul(Qe,Ye)|0,te=te+Math.imul(Me,qe)|0,Y=Y+Math.imul(Me,pt)|0,Y=Y+Math.imul(Le,qe)|0,be=be+Math.imul(Le,pt)|0,te=te+Math.imul(_e,Tt)|0,Y=Y+Math.imul(_e,At)|0,Y=Y+Math.imul(Oe,Tt)|0,be=be+Math.imul(Oe,At)|0,te=te+Math.imul(Be,Xe)|0,Y=Y+Math.imul(Be,nt)|0,Y=Y+Math.imul(Se,Xe)|0,be=be+Math.imul(Se,nt)|0,te=te+Math.imul(Ae,et)|0,Y=Y+Math.imul(Ae,mt)|0,Y=Y+Math.imul(Ne,et)|0,be=be+Math.imul(Ne,mt)|0,te=te+Math.imul(Ie,Ct)|0,Y=Y+Math.imul(Ie,Pt)|0,Y=Y+Math.imul(ke,Ct)|0,be=be+Math.imul(ke,Pt)|0;var sn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(sn>>>26)|0,sn&=67108863,te=Math.imul(Ve,Kt),Y=Math.imul(Ve,Ft),Y=Y+Math.imul(Ze,Kt)|0,be=Math.imul(Ze,Ft),te=te+Math.imul(qt,jt)|0,Y=Y+Math.imul(qt,rr)|0,Y=Y+Math.imul(Ge,jt)|0,be=be+Math.imul(Ge,rr)|0,te=te+Math.imul(Et,cr)|0,Y=Y+Math.imul(Et,sr)|0,Y=Y+Math.imul(Rt,cr)|0,be=be+Math.imul(Rt,sr)|0,te=te+Math.imul(wt,ur)|0,Y=Y+Math.imul(wt,Ye)|0,Y=Y+Math.imul(bt,ur)|0,be=be+Math.imul(bt,Ye)|0,te=te+Math.imul(Je,qe)|0,Y=Y+Math.imul(Je,pt)|0,Y=Y+Math.imul(Qe,qe)|0,be=be+Math.imul(Qe,pt)|0,te=te+Math.imul(Me,Tt)|0,Y=Y+Math.imul(Me,At)|0,Y=Y+Math.imul(Le,Tt)|0,be=be+Math.imul(Le,At)|0,te=te+Math.imul(_e,Xe)|0,Y=Y+Math.imul(_e,nt)|0,Y=Y+Math.imul(Oe,Xe)|0,be=be+Math.imul(Oe,nt)|0,te=te+Math.imul(Be,et)|0,Y=Y+Math.imul(Be,mt)|0,Y=Y+Math.imul(Se,et)|0,be=be+Math.imul(Se,mt)|0,te=te+Math.imul(Ae,Ct)|0,Y=Y+Math.imul(Ae,Pt)|0,Y=Y+Math.imul(Ne,Ct)|0,be=be+Math.imul(Ne,Pt)|0;var an=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(an>>>26)|0,an&=67108863,te=Math.imul(Ve,jt),Y=Math.imul(Ve,rr),Y=Y+Math.imul(Ze,jt)|0,be=Math.imul(Ze,rr),te=te+Math.imul(qt,cr)|0,Y=Y+Math.imul(qt,sr)|0,Y=Y+Math.imul(Ge,cr)|0,be=be+Math.imul(Ge,sr)|0,te=te+Math.imul(Et,ur)|0,Y=Y+Math.imul(Et,Ye)|0,Y=Y+Math.imul(Rt,ur)|0,be=be+Math.imul(Rt,Ye)|0,te=te+Math.imul(wt,qe)|0,Y=Y+Math.imul(wt,pt)|0,Y=Y+Math.imul(bt,qe)|0,be=be+Math.imul(bt,pt)|0,te=te+Math.imul(Je,Tt)|0,Y=Y+Math.imul(Je,At)|0,Y=Y+Math.imul(Qe,Tt)|0,be=be+Math.imul(Qe,At)|0,te=te+Math.imul(Me,Xe)|0,Y=Y+Math.imul(Me,nt)|0,Y=Y+Math.imul(Le,Xe)|0,be=be+Math.imul(Le,nt)|0,te=te+Math.imul(_e,et)|0,Y=Y+Math.imul(_e,mt)|0,Y=Y+Math.imul(Oe,et)|0,be=be+Math.imul(Oe,mt)|0,te=te+Math.imul(Be,Ct)|0,Y=Y+Math.imul(Be,Pt)|0,Y=Y+Math.imul(Se,Ct)|0,be=be+Math.imul(Se,Pt)|0;var on=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(on>>>26)|0,on&=67108863,te=Math.imul(Ve,cr),Y=Math.imul(Ve,sr),Y=Y+Math.imul(Ze,cr)|0,be=Math.imul(Ze,sr),te=te+Math.imul(qt,ur)|0,Y=Y+Math.imul(qt,Ye)|0,Y=Y+Math.imul(Ge,ur)|0,be=be+Math.imul(Ge,Ye)|0,te=te+Math.imul(Et,qe)|0,Y=Y+Math.imul(Et,pt)|0,Y=Y+Math.imul(Rt,qe)|0,be=be+Math.imul(Rt,pt)|0,te=te+Math.imul(wt,Tt)|0,Y=Y+Math.imul(wt,At)|0,Y=Y+Math.imul(bt,Tt)|0,be=be+Math.imul(bt,At)|0,te=te+Math.imul(Je,Xe)|0,Y=Y+Math.imul(Je,nt)|0,Y=Y+Math.imul(Qe,Xe)|0,be=be+Math.imul(Qe,nt)|0,te=te+Math.imul(Me,et)|0,Y=Y+Math.imul(Me,mt)|0,Y=Y+Math.imul(Le,et)|0,be=be+Math.imul(Le,mt)|0,te=te+Math.imul(_e,Ct)|0,Y=Y+Math.imul(_e,Pt)|0,Y=Y+Math.imul(Oe,Ct)|0,be=be+Math.imul(Oe,Pt)|0;var gn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(gn>>>26)|0,gn&=67108863,te=Math.imul(Ve,ur),Y=Math.imul(Ve,Ye),Y=Y+Math.imul(Ze,ur)|0,be=Math.imul(Ze,Ye),te=te+Math.imul(qt,qe)|0,Y=Y+Math.imul(qt,pt)|0,Y=Y+Math.imul(Ge,qe)|0,be=be+Math.imul(Ge,pt)|0,te=te+Math.imul(Et,Tt)|0,Y=Y+Math.imul(Et,At)|0,Y=Y+Math.imul(Rt,Tt)|0,be=be+Math.imul(Rt,At)|0,te=te+Math.imul(wt,Xe)|0,Y=Y+Math.imul(wt,nt)|0,Y=Y+Math.imul(bt,Xe)|0,be=be+Math.imul(bt,nt)|0,te=te+Math.imul(Je,et)|0,Y=Y+Math.imul(Je,mt)|0,Y=Y+Math.imul(Qe,et)|0,be=be+Math.imul(Qe,mt)|0,te=te+Math.imul(Me,Ct)|0,Y=Y+Math.imul(Me,Pt)|0,Y=Y+Math.imul(Le,Ct)|0,be=be+Math.imul(Le,Pt)|0;var wn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(wn>>>26)|0,wn&=67108863,te=Math.imul(Ve,qe),Y=Math.imul(Ve,pt),Y=Y+Math.imul(Ze,qe)|0,be=Math.imul(Ze,pt),te=te+Math.imul(qt,Tt)|0,Y=Y+Math.imul(qt,At)|0,Y=Y+Math.imul(Ge,Tt)|0,be=be+Math.imul(Ge,At)|0,te=te+Math.imul(Et,Xe)|0,Y=Y+Math.imul(Et,nt)|0,Y=Y+Math.imul(Rt,Xe)|0,be=be+Math.imul(Rt,nt)|0,te=te+Math.imul(wt,et)|0,Y=Y+Math.imul(wt,mt)|0,Y=Y+Math.imul(bt,et)|0,be=be+Math.imul(bt,mt)|0,te=te+Math.imul(Je,Ct)|0,Y=Y+Math.imul(Je,Pt)|0,Y=Y+Math.imul(Qe,Ct)|0,be=be+Math.imul(Qe,Pt)|0;var _n=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(_n>>>26)|0,_n&=67108863,te=Math.imul(Ve,Tt),Y=Math.imul(Ve,At),Y=Y+Math.imul(Ze,Tt)|0,be=Math.imul(Ze,At),te=te+Math.imul(qt,Xe)|0,Y=Y+Math.imul(qt,nt)|0,Y=Y+Math.imul(Ge,Xe)|0,be=be+Math.imul(Ge,nt)|0,te=te+Math.imul(Et,et)|0,Y=Y+Math.imul(Et,mt)|0,Y=Y+Math.imul(Rt,et)|0,be=be+Math.imul(Rt,mt)|0,te=te+Math.imul(wt,Ct)|0,Y=Y+Math.imul(wt,Pt)|0,Y=Y+Math.imul(bt,Ct)|0,be=be+Math.imul(bt,Pt)|0;var vn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(vn>>>26)|0,vn&=67108863,te=Math.imul(Ve,Xe),Y=Math.imul(Ve,nt),Y=Y+Math.imul(Ze,Xe)|0,be=Math.imul(Ze,nt),te=te+Math.imul(qt,et)|0,Y=Y+Math.imul(qt,mt)|0,Y=Y+Math.imul(Ge,et)|0,be=be+Math.imul(Ge,mt)|0,te=te+Math.imul(Et,Ct)|0,Y=Y+Math.imul(Et,Pt)|0,Y=Y+Math.imul(Rt,Ct)|0,be=be+Math.imul(Rt,Pt)|0;var En=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(En>>>26)|0,En&=67108863,te=Math.imul(Ve,et),Y=Math.imul(Ve,mt),Y=Y+Math.imul(Ze,et)|0,be=Math.imul(Ze,mt),te=te+Math.imul(qt,Ct)|0,Y=Y+Math.imul(qt,Pt)|0,Y=Y+Math.imul(Ge,Ct)|0,be=be+Math.imul(Ge,Pt)|0;var xn=(se+te|0)+((Y&8191)<<13)|0;se=(be+(Y>>>13)|0)+(xn>>>26)|0,xn&=67108863,te=Math.imul(Ve,Ct),Y=Math.imul(Ve,Pt),Y=Y+Math.imul(Ze,Ct)|0,be=Math.imul(Ze,Pt);var Rn=(se+te|0)+((Y&8191)<<13)|0;return se=(be+(Y>>>13)|0)+(Rn>>>26)|0,Rn&=67108863,ue[0]=It,ue[1]=Nt,ue[2]=Dt,ue[3]=Ht,ue[4]=Zt,ue[5]=nr,ue[6]=Xt,ue[7]=Qt,ue[8]=gr,ue[9]=sn,ue[10]=an,ue[11]=on,ue[12]=gn,ue[13]=wn,ue[14]=_n,ue[15]=vn,ue[16]=En,ue[17]=xn,ue[18]=Rn,se!==0&&(ue[19]=se,ve.length++),ve};Math.imul||(F=L);function U(J,q,H){H.negative=q.negative^J.negative,H.length=J.length+q.length;for(var ve=0,Z=0,ce=0;ce<H.length-1;ce++){var ue=Z;Z=0;for(var se=ve&67108863,te=Math.min(ce,q.length-1),Y=Math.max(0,ce-J.length+1);Y<=te;Y++){var be=ce-Y,ye=J.words[be]|0,Ie=q.words[Y]|0,ke=ye*Ie,Ce=ke&67108863;ue=ue+(ke/67108864|0)|0,Ce=Ce+se|0,se=Ce&67108863,ue=ue+(Ce>>>26)|0,Z+=ue>>>26,ue&=67108863}H.words[ce]=se,ve=ue,ue=Z}return ve!==0?H.words[ce]=ve:H.length--,H._strip()}function j(J,q,H){return U(J,q,H)}S.prototype.mulTo=function(q,H){var ve,Z=this.length+q.length;return this.length===10&&q.length===10?ve=F(this,q,H):Z<63?ve=L(this,q,H):Z<1024?ve=U(this,q,H):ve=j(this,q,H),ve},S.prototype.mul=function(q){var H=new S(null);return H.words=new Array(this.length+q.length),this.mulTo(q,H)},S.prototype.mulf=function(q){var H=new S(null);return H.words=new Array(this.length+q.length),j(this,q,H)},S.prototype.imul=function(q){return this.clone().mulTo(q,this)},S.prototype.imuln=function(q){var H=q<0;H&&(q=-q),_(typeof q=="number"),_(q<67108864);for(var ve=0,Z=0;Z<this.length;Z++){var ce=(this.words[Z]|0)*q,ue=(ce&67108863)+(ve&67108863);ve>>=26,ve+=ce/67108864|0,ve+=ue>>>26,this.words[Z]=ue&67108863}return ve!==0&&(this.words[Z]=ve,this.length++),H?this.ineg():this},S.prototype.muln=function(q){return this.clone().imuln(q)},S.prototype.sqr=function(){return this.mul(this)},S.prototype.isqr=function(){return this.imul(this.clone())},S.prototype.pow=function(q){var H=O(q);if(H.length===0)return new S(1);for(var ve=this,Z=0;Z<H.length&&H[Z]===0;Z++,ve=ve.sqr());if(++Z<H.length)for(var ce=ve.sqr();Z<H.length;Z++,ce=ce.sqr())H[Z]!==0&&(ve=ve.mul(ce));return ve},S.prototype.iushln=function(q){_(typeof q=="number"&&q>=0);var H=q%26,ve=(q-H)/26,Z=67108863>>>26-H<<26-H,ce;if(H!==0){var ue=0;for(ce=0;ce<this.length;ce++){var se=this.words[ce]&Z,te=(this.words[ce]|0)-se<<H;this.words[ce]=te|ue,ue=se>>>26-H}ue&&(this.words[ce]=ue,this.length++)}if(ve!==0){for(ce=this.length-1;ce>=0;ce--)this.words[ce+ve]=this.words[ce];for(ce=0;ce<ve;ce++)this.words[ce]=0;this.length+=ve}return this._strip()},S.prototype.ishln=function(q){return _(this.negative===0),this.iushln(q)},S.prototype.iushrn=function(q,H,ve){_(typeof q=="number"&&q>=0);var Z;H?Z=(H-H%26)/26:Z=0;var ce=q%26,ue=Math.min((q-ce)/26,this.length),se=67108863^67108863>>>ce<<ce,te=ve;if(Z-=ue,Z=Math.max(0,Z),te){for(var Y=0;Y<ue;Y++)te.words[Y]=this.words[Y];te.length=ue}if(ue!==0)if(this.length>ue)for(this.length-=ue,Y=0;Y<this.length;Y++)this.words[Y]=this.words[Y+ue];else this.words[0]=0,this.length=1;var be=0;for(Y=this.length-1;Y>=0&&(be!==0||Y>=Z);Y--){var ye=this.words[Y]|0;this.words[Y]=be<<26-ce|ye>>>ce,be=ye&se}return te&&be!==0&&(te.words[te.length++]=be),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},S.prototype.ishrn=function(q,H,ve){return _(this.negative===0),this.iushrn(q,H,ve)},S.prototype.shln=function(q){return this.clone().ishln(q)},S.prototype.ushln=function(q){return this.clone().iushln(q)},S.prototype.shrn=function(q){return this.clone().ishrn(q)},S.prototype.ushrn=function(q){return this.clone().iushrn(q)},S.prototype.testn=function(q){_(typeof q=="number"&&q>=0);var H=q%26,ve=(q-H)/26,Z=1<<H;if(this.length<=ve)return!1;var ce=this.words[ve];return!!(ce&Z)},S.prototype.imaskn=function(q){_(typeof q=="number"&&q>=0);var H=q%26,ve=(q-H)/26;if(_(this.negative===0,"imaskn works only with positive numbers"),this.length<=ve)return this;if(H!==0&&ve++,this.length=Math.min(ve,this.length),H!==0){var Z=67108863^67108863>>>H<<H;this.words[this.length-1]&=Z}return this._strip()},S.prototype.maskn=function(q){return this.clone().imaskn(q)},S.prototype.iaddn=function(q){return _(typeof q=="number"),_(q<67108864),q<0?this.isubn(-q):this.negative!==0?this.length===1&&(this.words[0]|0)<=q?(this.words[0]=q-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(q),this.negative=1,this):this._iaddn(q)},S.prototype._iaddn=function(q){this.words[0]+=q;for(var H=0;H<this.length&&this.words[H]>=67108864;H++)this.words[H]-=67108864,H===this.length-1?this.words[H+1]=1:this.words[H+1]++;return this.length=Math.max(this.length,H+1),this},S.prototype.isubn=function(q){if(_(typeof q=="number"),_(q<67108864),q<0)return this.iaddn(-q);if(this.negative!==0)return this.negative=0,this.iaddn(q),this.negative=1,this;if(this.words[0]-=q,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var H=0;H<this.length&&this.words[H]<0;H++)this.words[H]+=67108864,this.words[H+1]-=1;return this._strip()},S.prototype.addn=function(q){return this.clone().iaddn(q)},S.prototype.subn=function(q){return this.clone().isubn(q)},S.prototype.iabs=function(){return this.negative=0,this},S.prototype.abs=function(){return this.clone().iabs()},S.prototype._ishlnsubmul=function(q,H,ve){var Z=q.length+ve,ce;this._expand(Z);var ue,se=0;for(ce=0;ce<q.length;ce++){ue=(this.words[ce+ve]|0)+se;var te=(q.words[ce]|0)*H;ue-=te&67108863,se=(ue>>26)-(te/67108864|0),this.words[ce+ve]=ue&67108863}for(;ce<this.length-ve;ce++)ue=(this.words[ce+ve]|0)+se,se=ue>>26,this.words[ce+ve]=ue&67108863;if(se===0)return this._strip();for(_(se===-1),se=0,ce=0;ce<this.length;ce++)ue=-(this.words[ce]|0)+se,se=ue>>26,this.words[ce]=ue&67108863;return this.negative=1,this._strip()},S.prototype._wordDiv=function(q,H){var ve=this.length-q.length,Z=this.clone(),ce=q,ue=ce.words[ce.length-1]|0,se=this._countBits(ue);ve=26-se,ve!==0&&(ce=ce.ushln(ve),Z.iushln(ve),ue=ce.words[ce.length-1]|0);var te=Z.length-ce.length,Y;if(H!=="mod"){Y=new S(null),Y.length=te+1,Y.words=new Array(Y.length);for(var be=0;be<Y.length;be++)Y.words[be]=0}var ye=Z.clone()._ishlnsubmul(ce,1,te);ye.negative===0&&(Z=ye,Y&&(Y.words[te]=1));for(var Ie=te-1;Ie>=0;Ie--){var ke=(Z.words[ce.length+Ie]|0)*67108864+(Z.words[ce.length+Ie-1]|0);for(ke=Math.min(ke/ue|0,67108863),Z._ishlnsubmul(ce,ke,Ie);Z.negative!==0;)ke--,Z.negative=0,Z._ishlnsubmul(ce,1,Ie),Z.isZero()||(Z.negative^=1);Y&&(Y.words[Ie]=ke)}return Y&&Y._strip(),Z._strip(),H!=="div"&&ve!==0&&Z.iushrn(ve),{div:Y||null,mod:Z}},S.prototype.divmod=function(q,H,ve){if(_(!q.isZero()),this.isZero())return{div:new S(0),mod:new S(0)};var Z,ce,ue;return this.negative!==0&&q.negative===0?(ue=this.neg().divmod(q,H),H!=="mod"&&(Z=ue.div.neg()),H!=="div"&&(ce=ue.mod.neg(),ve&&ce.negative!==0&&ce.iadd(q)),{div:Z,mod:ce}):this.negative===0&&q.negative!==0?(ue=this.divmod(q.neg(),H),H!=="mod"&&(Z=ue.div.neg()),{div:Z,mod:ue.mod}):this.negative&q.negative?(ue=this.neg().divmod(q.neg(),H),H!=="div"&&(ce=ue.mod.neg(),ve&&ce.negative!==0&&ce.isub(q)),{div:ue.div,mod:ce}):q.length>this.length||this.cmp(q)<0?{div:new S(0),mod:this}:q.length===1?H==="div"?{div:this.divn(q.words[0]),mod:null}:H==="mod"?{div:null,mod:new S(this.modrn(q.words[0]))}:{div:this.divn(q.words[0]),mod:new S(this.modrn(q.words[0]))}:this._wordDiv(q,H)},S.prototype.div=function(q){return this.divmod(q,"div",!1).div},S.prototype.mod=function(q){return this.divmod(q,"mod",!1).mod},S.prototype.umod=function(q){return this.divmod(q,"mod",!0).mod},S.prototype.divRound=function(q){var H=this.divmod(q);if(H.mod.isZero())return H.div;var ve=H.div.negative!==0?H.mod.isub(q):H.mod,Z=q.ushrn(1),ce=q.andln(1),ue=ve.cmp(Z);return ue<0||ce===1&&ue===0?H.div:H.div.negative!==0?H.div.isubn(1):H.div.iaddn(1)},S.prototype.modrn=function(q){var H=q<0;H&&(q=-q),_(q<=67108863);for(var ve=(1<<26)%q,Z=0,ce=this.length-1;ce>=0;ce--)Z=(ve*Z+(this.words[ce]|0))%q;return H?-Z:Z},S.prototype.modn=function(q){return this.modrn(q)},S.prototype.idivn=function(q){var H=q<0;H&&(q=-q),_(q<=67108863);for(var ve=0,Z=this.length-1;Z>=0;Z--){var ce=(this.words[Z]|0)+ve*67108864;this.words[Z]=ce/q|0,ve=ce%q}return this._strip(),H?this.ineg():this},S.prototype.divn=function(q){return this.clone().idivn(q)},S.prototype.egcd=function(q){_(q.negative===0),_(!q.isZero());var H=this,ve=q.clone();H.negative!==0?H=H.umod(q):H=H.clone();for(var Z=new S(1),ce=new S(0),ue=new S(0),se=new S(1),te=0;H.isEven()&&ve.isEven();)H.iushrn(1),ve.iushrn(1),++te;for(var Y=ve.clone(),be=H.clone();!H.isZero();){for(var ye=0,Ie=1;!(H.words[0]&Ie)&&ye<26;++ye,Ie<<=1);if(ye>0)for(H.iushrn(ye);ye-- >0;)(Z.isOdd()||ce.isOdd())&&(Z.iadd(Y),ce.isub(be)),Z.iushrn(1),ce.iushrn(1);for(var ke=0,Ce=1;!(ve.words[0]&Ce)&&ke<26;++ke,Ce<<=1);if(ke>0)for(ve.iushrn(ke);ke-- >0;)(ue.isOdd()||se.isOdd())&&(ue.iadd(Y),se.isub(be)),ue.iushrn(1),se.iushrn(1);H.cmp(ve)>=0?(H.isub(ve),Z.isub(ue),ce.isub(se)):(ve.isub(H),ue.isub(Z),se.isub(ce))}return{a:ue,b:se,gcd:ve.iushln(te)}},S.prototype._invmp=function(q){_(q.negative===0),_(!q.isZero());var H=this,ve=q.clone();H.negative!==0?H=H.umod(q):H=H.clone();for(var Z=new S(1),ce=new S(0),ue=ve.clone();H.cmpn(1)>0&&ve.cmpn(1)>0;){for(var se=0,te=1;!(H.words[0]&te)&&se<26;++se,te<<=1);if(se>0)for(H.iushrn(se);se-- >0;)Z.isOdd()&&Z.iadd(ue),Z.iushrn(1);for(var Y=0,be=1;!(ve.words[0]&be)&&Y<26;++Y,be<<=1);if(Y>0)for(ve.iushrn(Y);Y-- >0;)ce.isOdd()&&ce.iadd(ue),ce.iushrn(1);H.cmp(ve)>=0?(H.isub(ve),Z.isub(ce)):(ve.isub(H),ce.isub(Z))}var ye;return H.cmpn(1)===0?ye=Z:ye=ce,ye.cmpn(0)<0&&ye.iadd(q),ye},S.prototype.gcd=function(q){if(this.isZero())return q.abs();if(q.isZero())return this.abs();var H=this.clone(),ve=q.clone();H.negative=0,ve.negative=0;for(var Z=0;H.isEven()&&ve.isEven();Z++)H.iushrn(1),ve.iushrn(1);do{for(;H.isEven();)H.iushrn(1);for(;ve.isEven();)ve.iushrn(1);var ce=H.cmp(ve);if(ce<0){var ue=H;H=ve,ve=ue}else if(ce===0||ve.cmpn(1)===0)break;H.isub(ve)}while(!0);return ve.iushln(Z)},S.prototype.invm=function(q){return this.egcd(q).a.umod(q)},S.prototype.isEven=function(){return(this.words[0]&1)===0},S.prototype.isOdd=function(){return(this.words[0]&1)===1},S.prototype.andln=function(q){return this.words[0]&q},S.prototype.bincn=function(q){_(typeof q=="number");var H=q%26,ve=(q-H)/26,Z=1<<H;if(this.length<=ve)return this._expand(ve+1),this.words[ve]|=Z,this;for(var ce=Z,ue=ve;ce!==0&&ue<this.length;ue++){var se=this.words[ue]|0;se+=ce,ce=se>>>26,se&=67108863,this.words[ue]=se}return ce!==0&&(this.words[ue]=ce,this.length++),this},S.prototype.isZero=function(){return this.length===1&&this.words[0]===0},S.prototype.cmpn=function(q){var H=q<0;if(this.negative!==0&&!H)return-1;if(this.negative===0&&H)return 1;this._strip();var ve;if(this.length>1)ve=1;else{H&&(q=-q),_(q<=67108863,"Number is too big");var Z=this.words[0]|0;ve=Z===q?0:Z<q?-1:1}return this.negative!==0?-ve|0:ve},S.prototype.cmp=function(q){if(this.negative!==0&&q.negative===0)return-1;if(this.negative===0&&q.negative!==0)return 1;var H=this.ucmp(q);return this.negative!==0?-H|0:H},S.prototype.ucmp=function(q){if(this.length>q.length)return 1;if(this.length<q.length)return-1;for(var H=0,ve=this.length-1;ve>=0;ve--){var Z=this.words[ve]|0,ce=q.words[ve]|0;if(Z!==ce){Z<ce?H=-1:Z>ce&&(H=1);break}}return H},S.prototype.gtn=function(q){return this.cmpn(q)===1},S.prototype.gt=function(q){return this.cmp(q)===1},S.prototype.gten=function(q){return this.cmpn(q)>=0},S.prototype.gte=function(q){return this.cmp(q)>=0},S.prototype.ltn=function(q){return this.cmpn(q)===-1},S.prototype.lt=function(q){return this.cmp(q)===-1},S.prototype.lten=function(q){return this.cmpn(q)<=0},S.prototype.lte=function(q){return this.cmp(q)<=0},S.prototype.eqn=function(q){return this.cmpn(q)===0},S.prototype.eq=function(q){return this.cmp(q)===0},S.red=function(q){return new we(q)},S.prototype.toRed=function(q){return _(!this.red,"Already a number in reduction context"),_(this.negative===0,"red works only with positives"),q.convertTo(this)._forceRed(q)},S.prototype.fromRed=function(){return _(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},S.prototype._forceRed=function(q){return this.red=q,this},S.prototype.forceRed=function(q){return _(!this.red,"Already a number in reduction context"),this._forceRed(q)},S.prototype.redAdd=function(q){return _(this.red,"redAdd works only with red numbers"),this.red.add(this,q)},S.prototype.redIAdd=function(q){return _(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,q)},S.prototype.redSub=function(q){return _(this.red,"redSub works only with red numbers"),this.red.sub(this,q)},S.prototype.redISub=function(q){return _(this.red,"redISub works only with red numbers"),this.red.isub(this,q)},S.prototype.redShl=function(q){return _(this.red,"redShl works only with red numbers"),this.red.shl(this,q)},S.prototype.redMul=function(q){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,q),this.red.mul(this,q)},S.prototype.redIMul=function(q){return _(this.red,"redMul works only with red numbers"),this.red._verify2(this,q),this.red.imul(this,q)},S.prototype.redSqr=function(){return _(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},S.prototype.redISqr=function(){return _(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},S.prototype.redSqrt=function(){return _(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},S.prototype.redInvm=function(){return _(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},S.prototype.redNeg=function(){return _(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},S.prototype.redPow=function(q){return _(this.red&&!q.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,q)};var z={k256:null,p224:null,p192:null,p25519:null};function W(J,q){this.name=J,this.p=new S(q,16),this.n=this.p.bitLength(),this.k=new S(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}W.prototype._tmp=function(){var q=new S(null);return q.words=new Array(Math.ceil(this.n/13)),q},W.prototype.ireduce=function(q){var H=q,ve;do this.split(H,this.tmp),H=this.imulK(H),H=H.iadd(this.tmp),ve=H.bitLength();while(ve>this.n);var Z=ve<this.n?-1:H.ucmp(this.p);return Z===0?(H.words[0]=0,H.length=1):Z>0?H.isub(this.p):H.strip!==void 0?H.strip():H._strip(),H},W.prototype.split=function(q,H){q.iushrn(this.n,0,H)},W.prototype.imulK=function(q){return q.imul(this.k)};function X(){W.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}x(X,W),X.prototype.split=function(q,H){for(var ve=4194303,Z=Math.min(q.length,9),ce=0;ce<Z;ce++)H.words[ce]=q.words[ce];if(H.length=Z,q.length<=9){q.words[0]=0,q.length=1;return}var ue=q.words[9];for(H.words[H.length++]=ue&ve,ce=10;ce<q.length;ce++){var se=q.words[ce]|0;q.words[ce-10]=(se&ve)<<4|ue>>>22,ue=se}ue>>>=22,q.words[ce-10]=ue,ue===0&&q.length>10?q.length-=10:q.length-=9},X.prototype.imulK=function(q){q.words[q.length]=0,q.words[q.length+1]=0,q.length+=2;for(var H=0,ve=0;ve<q.length;ve++){var Z=q.words[ve]|0;H+=Z*977,q.words[ve]=H&67108863,H=Z*64+(H/67108864|0)}return q.words[q.length-1]===0&&(q.length--,q.words[q.length-1]===0&&q.length--),q};function ie(){W.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}x(ie,W);function fe(){W.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}x(fe,W);function xe(){W.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}x(xe,W),xe.prototype.imulK=function(q){for(var H=0,ve=0;ve<q.length;ve++){var Z=(q.words[ve]|0)*19+H,ce=Z&67108863;Z>>>=26,q.words[ve]=ce,H=Z}return H!==0&&(q.words[q.length++]=H),q},S._prime=function(q){if(z[q])return z[q];var H;if(q==="k256")H=new X;else if(q==="p224")H=new ie;else if(q==="p192")H=new fe;else if(q==="p25519")H=new xe;else throw new Error("Unknown prime "+q);return z[q]=H,H};function we(J){if(typeof J=="string"){var q=S._prime(J);this.m=q.p,this.prime=q}else _(J.gtn(1),"modulus must be greater than 1"),this.m=J,this.prime=null}we.prototype._verify1=function(q){_(q.negative===0,"red works only with positives"),_(q.red,"red works only with red numbers")},we.prototype._verify2=function(q,H){_((q.negative|H.negative)===0,"red works only with positives"),_(q.red&&q.red===H.red,"red works only with red numbers")},we.prototype.imod=function(q){return this.prime?this.prime.ireduce(q)._forceRed(this):(A(q,q.umod(this.m)._forceRed(this)),q)},we.prototype.neg=function(q){return q.isZero()?q.clone():this.m.sub(q)._forceRed(this)},we.prototype.add=function(q,H){this._verify2(q,H);var ve=q.add(H);return ve.cmp(this.m)>=0&&ve.isub(this.m),ve._forceRed(this)},we.prototype.iadd=function(q,H){this._verify2(q,H);var ve=q.iadd(H);return ve.cmp(this.m)>=0&&ve.isub(this.m),ve},we.prototype.sub=function(q,H){this._verify2(q,H);var ve=q.sub(H);return ve.cmpn(0)<0&&ve.iadd(this.m),ve._forceRed(this)},we.prototype.isub=function(q,H){this._verify2(q,H);var ve=q.isub(H);return ve.cmpn(0)<0&&ve.iadd(this.m),ve},we.prototype.shl=function(q,H){return this._verify1(q),this.imod(q.ushln(H))},we.prototype.imul=function(q,H){return this._verify2(q,H),this.imod(q.imul(H))},we.prototype.mul=function(q,H){return this._verify2(q,H),this.imod(q.mul(H))},we.prototype.isqr=function(q){return this.imul(q,q.clone())},we.prototype.sqr=function(q){return this.mul(q,q)},we.prototype.sqrt=function(q){if(q.isZero())return q.clone();var H=this.m.andln(3);if(_(H%2===1),H===3){var ve=this.m.add(new S(1)).iushrn(2);return this.pow(q,ve)}for(var Z=this.m.subn(1),ce=0;!Z.isZero()&&Z.andln(1)===0;)ce++,Z.iushrn(1);_(!Z.isZero());var ue=new S(1).toRed(this),se=ue.redNeg(),te=this.m.subn(1).iushrn(1),Y=this.m.bitLength();for(Y=new S(2*Y*Y).toRed(this);this.pow(Y,te).cmp(se)!==0;)Y.redIAdd(se);for(var be=this.pow(Y,Z),ye=this.pow(q,Z.addn(1).iushrn(1)),Ie=this.pow(q,Z),ke=ce;Ie.cmp(ue)!==0;){for(var Ce=Ie,Ae=0;Ce.cmp(ue)!==0;Ae++)Ce=Ce.redSqr();_(Ae<ke);var Ne=this.pow(be,new S(1).iushln(ke-Ae-1));ye=ye.redMul(Ne),be=Ne.redSqr(),Ie=Ie.redMul(be),ke=Ae}return ye},we.prototype.invm=function(q){var H=q._invmp(this.m);return H.negative!==0?(H.negative=0,this.imod(H).redNeg()):this.imod(H)},we.prototype.pow=function(q,H){if(H.isZero())return new S(1).toRed(this);if(H.cmpn(1)===0)return q.clone();var ve=4,Z=new Array(1<<ve);Z[0]=new S(1).toRed(this),Z[1]=q;for(var ce=2;ce<Z.length;ce++)Z[ce]=this.mul(Z[ce-1],q);var ue=Z[0],se=0,te=0,Y=H.bitLength()%26;for(Y===0&&(Y=26),ce=H.length-1;ce>=0;ce--){for(var be=H.words[ce],ye=Y-1;ye>=0;ye--){var Ie=be>>ye&1;if(ue!==Z[0]&&(ue=this.sqr(ue)),Ie===0&&se===0){te=0;continue}se<<=1,se|=Ie,te++,!(te!==ve&&(ce!==0||ye!==0))&&(ue=this.mul(ue,Z[se]),te=0,se=0)}Y=26}return ue},we.prototype.convertTo=function(q){var H=q.umod(this.m);return H===q?H.clone():H},we.prototype.convertFrom=function(q){var H=q.clone();return H.red=null,H},S.mont=function(q){return new G(q)};function G(J){we.call(this,J),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new S(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x(G,we),G.prototype.convertTo=function(q){return this.imod(q.ushln(this.shift))},G.prototype.convertFrom=function(q){var H=this.imod(q.mul(this.rinv));return H.red=null,H},G.prototype.imul=function(q,H){if(q.isZero()||H.isZero())return q.words[0]=0,q.length=1,q;var ve=q.imul(H),Z=ve.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ce=ve.isub(Z).iushrn(this.shift),ue=ce;return ce.cmp(this.m)>=0?ue=ce.isub(this.m):ce.cmpn(0)<0&&(ue=ce.iadd(this.m)),ue._forceRed(this)},G.prototype.mul=function(q,H){if(q.isZero()||H.isZero())return new S(0)._forceRed(this);var ve=q.mul(H),Z=ve.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),ce=ve.isub(Z).iushrn(this.shift),ue=ce;return ce.cmp(this.m)>=0?ue=ce.isub(this.m):ce.cmpn(0)<0&&(ue=ce.iadd(this.m)),ue._forceRed(this)},G.prototype.invm=function(q){var H=this.imod(q._invmp(this.m).mul(this.r2));return H._forceRed(this)}})(n,bn)}(bn$1)),bn$1.exports}var asn1$1={},asn1={},api={},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(n,r){if(n.indexOf)return n.indexOf(r);for(var g=0;g<n.length;g++)if(n[g]===r)return g;return-1},Object_keys=function(n){if(Object.keys)return Object.keys(n);var r=[];for(var g in n)r.push(g);return r},forEach=function(n,r){if(n.forEach)return n.forEach(r);for(var g=0;g<n.length;g++)r(n[g],g,n)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(n,r,g){Object.defineProperty(n,r,{writable:!0,enumerable:!1,configurable:!0,value:g})}}catch{return function(r,g,_){r[g]=_}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(r){if(!(this instanceof Script))return new Script(r);this.code=r};Script.prototype.runInContext=function(n){if(!(n instanceof Context))throw new TypeError("needs a 'context' argument.");var r=document.createElement("iframe");r.style||(r.style={}),r.style.display="none",document.body.appendChild(r);var g=r.contentWindow,_=g.eval,x=g.execScript;!_&&x&&(x.call(g,"null"),_=g.eval),forEach(Object_keys(n),function(C){g[C]=n[C]}),forEach(globals,function(C){n[C]&&(g[C]=n[C])});var S=Object_keys(g),E=_.call(g,this.code);return forEach(Object_keys(g),function(C){(C in n||indexOf(S,C)===-1)&&(n[C]=g[C])}),forEach(globals,function(C){C in n||defineProp(n,C,g[C])}),document.body.removeChild(r),E},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(n){var r=Script.createContext(n),g=this.runInContext(r);return n&&forEach(Object_keys(r),function(_){n[_]=r[_]}),g},forEach(Object_keys(Script.prototype),function(n){exports[n]=Script[n]=function(r){var g=Script(r);return g[n].apply(g,[].slice.call(arguments,1))}}),exports.isContext=function(n){return n instanceof Context},exports.createScript=function(n){return exports.Script(n)},exports.createContext=Script.createContext=function(n){var r=new Context;return typeof n=="object"&&forEach(Object_keys(n),function(g){r[g]=n[g]}),r}}(vmBrowserify)),vmBrowserify}var hasRequiredApi;function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(n){var r=requireAsn1$1(),g=requireInherits_browser(),_=n;_.define=function(E,C){return new x(E,C)};function x(S,E){this.name=S,this.body=E,this.decoders={},this.encoders={}}x.prototype._createNamed=function(E){var C;try{C=requireVmBrowserify().runInThisContext("(function "+this.name+`(entity) {
  this._initNamed(entity);
})`)}catch{C=function(R){this._initNamed(R)}}return g(C,E),C.prototype._initNamed=function(R){E.call(this,R)},new C(this)},x.prototype._getDecoder=function(E){return E=E||"der",this.decoders.hasOwnProperty(E)||(this.decoders[E]=this._createNamed(r.decoders[E])),this.decoders[E]},x.prototype.decode=function(E,C,T){return this._getDecoder(C).decode(E,T)},x.prototype._getEncoder=function(E){return E=E||"der",this.encoders.hasOwnProperty(E)||(this.encoders[E]=this._createNamed(r.encoders[E])),this.encoders[E]},x.prototype.encode=function(E,C,T){return this._getEncoder(C).encode(E,T)}}(api)),api}var base$2={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var n=requireInherits_browser();function r(_){this._reporterState={obj:null,path:[],options:_||{},errors:[]}}reporter.Reporter=r,r.prototype.isError=function(x){return x instanceof g},r.prototype.save=function(){var x=this._reporterState;return{obj:x.obj,pathLen:x.path.length}},r.prototype.restore=function(x){var S=this._reporterState;S.obj=x.obj,S.path=S.path.slice(0,x.pathLen)},r.prototype.enterKey=function(x){return this._reporterState.path.push(x)},r.prototype.exitKey=function(x){var S=this._reporterState;S.path=S.path.slice(0,x-1)},r.prototype.leaveKey=function(x,S,E){var C=this._reporterState;this.exitKey(x),C.obj!==null&&(C.obj[S]=E)},r.prototype.path=function(){return this._reporterState.path.join("/")},r.prototype.enterObject=function(){var x=this._reporterState,S=x.obj;return x.obj={},S},r.prototype.leaveObject=function(x){var S=this._reporterState,E=S.obj;return S.obj=x,E},r.prototype.error=function(x){var S,E=this._reporterState,C=x instanceof g;if(C?S=x:S=new g(E.path.map(function(T){return"["+JSON.stringify(T)+"]"}).join(""),x.message||x,x.stack),!E.options.partial)throw S;return C||E.errors.push(S),S},r.prototype.wrapResult=function(x){var S=this._reporterState;return S.options.partial?{result:this.isError(x)?null:x,errors:S.errors}:x};function g(_,x){this.path=_,this.rethrow(x)}return n(g,Error),g.prototype.rethrow=function(x){if(this.message=x+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,g),!this.stack)try{throw new Error(this.message)}catch(S){this.stack=S.stack}return this},reporter}var buffer={},hasRequiredBuffer;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var n=requireInherits_browser(),r=requireBase().Reporter,g=requireDist().Buffer;function _(S,E){if(r.call(this,E),!g.isBuffer(S)){this.error("Input not Buffer");return}this.base=S,this.offset=0,this.length=S.length}n(_,r),buffer.DecoderBuffer=_,_.prototype.save=function(){return{offset:this.offset,reporter:r.prototype.save.call(this)}},_.prototype.restore=function(E){var C=new _(this.base);return C.offset=E.offset,C.length=this.offset,this.offset=E.offset,r.prototype.restore.call(this,E.reporter),C},_.prototype.isEmpty=function(){return this.offset===this.length},_.prototype.readUInt8=function(E){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(E||"DecoderBuffer overrun")},_.prototype.skip=function(E,C){if(!(this.offset+E<=this.length))return this.error(C||"DecoderBuffer overrun");var T=new _(this.base);return T._reporterState=this._reporterState,T.offset=this.offset,T.length=this.offset+E,this.offset+=E,T},_.prototype.raw=function(E){return this.base.slice(E?E.offset:this.offset,this.length)};function x(S,E){if(Array.isArray(S))this.length=0,this.value=S.map(function(C){return C instanceof x||(C=new x(C,E)),this.length+=C.length,C},this);else if(typeof S=="number"){if(!(0<=S&&S<=255))return E.error("non-byte EncoderBuffer value");this.value=S,this.length=1}else if(typeof S=="string")this.value=S,this.length=g.byteLength(S);else if(g.isBuffer(S))this.value=S,this.length=S.length;else return E.error("Unsupported type: "+typeof S)}return buffer.EncoderBuffer=x,x.prototype.join=function(E,C){return E||(E=new g(this.length)),C||(C=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(T){T.join(E,C),C+=T.length}):(typeof this.value=="number"?E[C]=this.value:typeof this.value=="string"?E.write(this.value,C):g.isBuffer(this.value)&&this.value.copy(E,C),C+=this.length)),E},buffer}var node,hasRequiredNode;function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var n=requireBase().Reporter,r=requireBase().EncoderBuffer,g=requireBase().DecoderBuffer,_=requireMinimalisticAssert(),x=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],S=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(x),E=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function C(R,A){var I={};this._baseState=I,I.enc=R,I.parent=A||null,I.children=null,I.tag=null,I.args=null,I.reverseArgs=null,I.choice=null,I.optional=!1,I.any=!1,I.obj=!1,I.use=null,I.useDecoder=null,I.key=null,I.default=null,I.explicit=null,I.implicit=null,I.contains=null,I.parent||(I.children=[],this._wrap())}node=C;var T=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return C.prototype.clone=function(){var A=this._baseState,I={};T.forEach(function(D){I[D]=A[D]});var B=new this.constructor(I.parent);return B._baseState=I,B},C.prototype._wrap=function(){var A=this._baseState;S.forEach(function(I){this[I]=function(){var D=new this.constructor(this);return A.children.push(D),D[I].apply(D,arguments)}},this)},C.prototype._init=function(A){var I=this._baseState;_(I.parent===null),A.call(this),I.children=I.children.filter(function(B){return B._baseState.parent===this},this),_.equal(I.children.length,1,"Root node can have only one child")},C.prototype._useArgs=function(A){var I=this._baseState,B=A.filter(function(D){return D instanceof this.constructor},this);A=A.filter(function(D){return!(D instanceof this.constructor)},this),B.length!==0&&(_(I.children===null),I.children=B,B.forEach(function(D){D._baseState.parent=this},this)),A.length!==0&&(_(I.args===null),I.args=A,I.reverseArgs=A.map(function(D){if(typeof D!="object"||D.constructor!==Object)return D;var N={};return Object.keys(D).forEach(function(M){M==(M|0)&&(M|=0);var O=D[M];N[O]=M}),N}))},E.forEach(function(R){C.prototype[R]=function(){var I=this._baseState;throw new Error(R+" not implemented for encoding: "+I.enc)}}),x.forEach(function(R){C.prototype[R]=function(){var I=this._baseState,B=Array.prototype.slice.call(arguments);return _(I.tag===null),I.tag=R,this._useArgs(B),this}}),C.prototype.use=function(A){_(A);var I=this._baseState;return _(I.use===null),I.use=A,this},C.prototype.optional=function(){var A=this._baseState;return A.optional=!0,this},C.prototype.def=function(A){var I=this._baseState;return _(I.default===null),I.default=A,I.optional=!0,this},C.prototype.explicit=function(A){var I=this._baseState;return _(I.explicit===null&&I.implicit===null),I.explicit=A,this},C.prototype.implicit=function(A){var I=this._baseState;return _(I.explicit===null&&I.implicit===null),I.implicit=A,this},C.prototype.obj=function(){var A=this._baseState,I=Array.prototype.slice.call(arguments);return A.obj=!0,I.length!==0&&this._useArgs(I),this},C.prototype.key=function(A){var I=this._baseState;return _(I.key===null),I.key=A,this},C.prototype.any=function(){var A=this._baseState;return A.any=!0,this},C.prototype.choice=function(A){var I=this._baseState;return _(I.choice===null),I.choice=A,this._useArgs(Object.keys(A).map(function(B){return A[B]})),this},C.prototype.contains=function(A){var I=this._baseState;return _(I.use===null),I.contains=A,this},C.prototype._decode=function(A,I){var B=this._baseState;if(B.parent===null)return A.wrapResult(B.children[0]._decode(A,I));var D=B.default,N=!0,M=null;if(B.key!==null&&(M=A.enterKey(B.key)),B.optional){var O=null;if(B.explicit!==null?O=B.explicit:B.implicit!==null?O=B.implicit:B.tag!==null&&(O=B.tag),O===null&&!B.any){var L=A.save();try{B.choice===null?this._decodeGeneric(B.tag,A,I):this._decodeChoice(A,I),N=!0}catch{N=!1}A.restore(L)}else if(N=this._peekTag(A,O,B.any),A.isError(N))return N}var F;if(B.obj&&N&&(F=A.enterObject()),N){if(B.explicit!==null){var U=this._decodeTag(A,B.explicit);if(A.isError(U))return U;A=U}var j=A.offset;if(B.use===null&&B.choice===null){if(B.any)var L=A.save();var z=this._decodeTag(A,B.implicit!==null?B.implicit:B.tag,B.any);if(A.isError(z))return z;B.any?D=A.raw(L):A=z}if(I&&I.track&&B.tag!==null&&I.track(A.path(),j,A.length,"tagged"),I&&I.track&&B.tag!==null&&I.track(A.path(),A.offset,A.length,"content"),B.any?D=D:B.choice===null?D=this._decodeGeneric(B.tag,A,I):D=this._decodeChoice(A,I),A.isError(D))return D;if(!B.any&&B.choice===null&&B.children!==null&&B.children.forEach(function(ie){ie._decode(A,I)}),B.contains&&(B.tag==="octstr"||B.tag==="bitstr")){var W=new g(D);D=this._getUse(B.contains,A._reporterState.obj)._decode(W,I)}}return B.obj&&N&&(D=A.leaveObject(F)),B.key!==null&&(D!==null||N===!0)?A.leaveKey(M,B.key,D):M!==null&&A.exitKey(M),D},C.prototype._decodeGeneric=function(A,I,B){var D=this._baseState;return A==="seq"||A==="set"?null:A==="seqof"||A==="setof"?this._decodeList(I,A,D.args[0],B):/str$/.test(A)?this._decodeStr(I,A,B):A==="objid"&&D.args?this._decodeObjid(I,D.args[0],D.args[1],B):A==="objid"?this._decodeObjid(I,null,null,B):A==="gentime"||A==="utctime"?this._decodeTime(I,A,B):A==="null_"?this._decodeNull(I,B):A==="bool"?this._decodeBool(I,B):A==="objDesc"?this._decodeStr(I,A,B):A==="int"||A==="enum"?this._decodeInt(I,D.args&&D.args[0],B):D.use!==null?this._getUse(D.use,I._reporterState.obj)._decode(I,B):I.error("unknown tag: "+A)},C.prototype._getUse=function(A,I){var B=this._baseState;return B.useDecoder=this._use(A,I),_(B.useDecoder._baseState.parent===null),B.useDecoder=B.useDecoder._baseState.children[0],B.implicit!==B.useDecoder._baseState.implicit&&(B.useDecoder=B.useDecoder.clone(),B.useDecoder._baseState.implicit=B.implicit),B.useDecoder},C.prototype._decodeChoice=function(A,I){var B=this._baseState,D=null,N=!1;return Object.keys(B.choice).some(function(M){var O=A.save(),L=B.choice[M];try{var F=L._decode(A,I);if(A.isError(F))return!1;D={type:M,value:F},N=!0}catch{return A.restore(O),!1}return!0},this),N?D:A.error("Choice not matched")},C.prototype._createEncoderBuffer=function(A){return new r(A,this.reporter)},C.prototype._encode=function(A,I,B){var D=this._baseState;if(!(D.default!==null&&D.default===A)){var N=this._encodeValue(A,I,B);if(N!==void 0&&!this._skipDefault(N,I,B))return N}},C.prototype._encodeValue=function(A,I,B){var D=this._baseState;if(D.parent===null)return D.children[0]._encode(A,I||new n);var L=null;if(this.reporter=I,D.optional&&A===void 0)if(D.default!==null)A=D.default;else return;var N=null,M=!1;if(D.any)L=this._createEncoderBuffer(A);else if(D.choice)L=this._encodeChoice(A,I);else if(D.contains)N=this._getUse(D.contains,B)._encode(A,I),M=!0;else if(D.children)N=D.children.map(function(j){if(j._baseState.tag==="null_")return j._encode(null,I,A);if(j._baseState.key===null)return I.error("Child should have a key");var z=I.enterKey(j._baseState.key);if(typeof A!="object")return I.error("Child expected, but input is not object");var W=j._encode(A[j._baseState.key],I,A);return I.leaveKey(z),W},this).filter(function(j){return j}),N=this._createEncoderBuffer(N);else if(D.tag==="seqof"||D.tag==="setof"){if(!(D.args&&D.args.length===1))return I.error("Too many args for : "+D.tag);if(!Array.isArray(A))return I.error("seqof/setof, but data is not Array");var O=this.clone();O._baseState.implicit=null,N=this._createEncoderBuffer(A.map(function(j){var z=this._baseState;return this._getUse(z.args[0],A)._encode(j,I)},O))}else D.use!==null?L=this._getUse(D.use,B)._encode(A,I):(N=this._encodePrimitive(D.tag,A),M=!0);var L;if(!D.any&&D.choice===null){var F=D.implicit!==null?D.implicit:D.tag,U=D.implicit===null?"universal":"context";F===null?D.use===null&&I.error("Tag could be omitted only for .use()"):D.use===null&&(L=this._encodeComposite(F,M,U,N))}return D.explicit!==null&&(L=this._encodeComposite(D.explicit,!1,"context",L)),L},C.prototype._encodeChoice=function(A,I){var B=this._baseState,D=B.choice[A.type];return D||_(!1,A.type+" not found in "+JSON.stringify(Object.keys(B.choice))),D._encode(A.value,I)},C.prototype._encodePrimitive=function(A,I){var B=this._baseState;if(/str$/.test(A))return this._encodeStr(I,A);if(A==="objid"&&B.args)return this._encodeObjid(I,B.reverseArgs[0],B.args[1]);if(A==="objid")return this._encodeObjid(I,null,null);if(A==="gentime"||A==="utctime")return this._encodeTime(I,A);if(A==="null_")return this._encodeNull();if(A==="int"||A==="enum")return this._encodeInt(I,B.args&&B.reverseArgs[0]);if(A==="bool")return this._encodeBool(I);if(A==="objDesc")return this._encodeStr(I,A);throw new Error("Unsupported tag: "+A)},C.prototype._isNumstr=function(A){return/^[0-9 ]*$/.test(A)},C.prototype._isPrintstr=function(A){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(A)},node}var hasRequiredBase;function requireBase(){return hasRequiredBase||(hasRequiredBase=1,function(n){var r=n;r.Reporter=requireReporter().Reporter,r.DecoderBuffer=requireBuffer().DecoderBuffer,r.EncoderBuffer=requireBuffer().EncoderBuffer,r.Node=requireNode()}(base$2)),base$2}var constants$1={},der={},hasRequiredDer$2;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,function(n){var r=requireConstants$1();n.tagClass={0:"universal",1:"application",2:"context",3:"private"},n.tagClassByName=r._reverse(n.tagClass),n.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},n.tagByName=r._reverse(n.tag)}(der)),der}var hasRequiredConstants$1;function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,function(n){var r=n;r._reverse=function(_){var x={};return Object.keys(_).forEach(function(S){(S|0)==S&&(S=S|0);var E=_[S];x[E]=S}),x},r.der=requireDer$2()}(constants$1)),constants$1}var decoders$1={},der_1$1,hasRequiredDer$1;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var n=requireInherits_browser(),r=requireAsn1$1(),g=r.base,_=r.bignum,x=r.constants.der;function S(R){this.enc="der",this.name=R.name,this.entity=R,this.tree=new E,this.tree._init(R.body)}der_1$1=S,S.prototype.decode=function(A,I){return A instanceof g.DecoderBuffer||(A=new g.DecoderBuffer(A,I)),this.tree._decode(A,I)};function E(R){g.Node.call(this,"der",R)}n(E,g.Node),E.prototype._peekTag=function(A,I,B){if(A.isEmpty())return!1;var D=A.save(),N=C(A,'Failed to peek tag: "'+I+'"');return A.isError(N)?N:(A.restore(D),N.tag===I||N.tagStr===I||N.tagStr+"of"===I||B)},E.prototype._decodeTag=function(A,I,B){var D=C(A,'Failed to decode tag of "'+I+'"');if(A.isError(D))return D;var N=T(A,D.primitive,'Failed to get length of "'+I+'"');if(A.isError(N))return N;if(!B&&D.tag!==I&&D.tagStr!==I&&D.tagStr+"of"!==I)return A.error('Failed to match tag: "'+I+'"');if(D.primitive||N!==null)return A.skip(N,'Failed to match body of: "'+I+'"');var M=A.save(),O=this._skipUntilEnd(A,'Failed to skip indefinite length body: "'+this.tag+'"');return A.isError(O)?O:(N=A.offset-M.offset,A.restore(M),A.skip(N,'Failed to match body of: "'+I+'"'))},E.prototype._skipUntilEnd=function(A,I){for(;;){var B=C(A,I);if(A.isError(B))return B;var D=T(A,B.primitive,I);if(A.isError(D))return D;var N;if(B.primitive||D!==null?N=A.skip(D):N=this._skipUntilEnd(A,I),A.isError(N))return N;if(B.tagStr==="end")break}},E.prototype._decodeList=function(A,I,B,D){for(var N=[];!A.isEmpty();){var M=this._peekTag(A,"end");if(A.isError(M))return M;var O=B.decode(A,"der",D);if(A.isError(O)&&M)break;N.push(O)}return N},E.prototype._decodeStr=function(A,I){if(I==="bitstr"){var B=A.readUInt8();return A.isError(B)?B:{unused:B,data:A.raw()}}else if(I==="bmpstr"){var D=A.raw();if(D.length%2===1)return A.error("Decoding of string type: bmpstr length mismatch");for(var N="",M=0;M<D.length/2;M++)N+=String.fromCharCode(D.readUInt16BE(M*2));return N}else if(I==="numstr"){var O=A.raw().toString("ascii");return this._isNumstr(O)?O:A.error("Decoding of string type: numstr unsupported characters")}else{if(I==="octstr")return A.raw();if(I==="objDesc")return A.raw();if(I==="printstr"){var L=A.raw().toString("ascii");return this._isPrintstr(L)?L:A.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(I)?A.raw().toString():A.error("Decoding of string type: "+I+" unsupported")}},E.prototype._decodeObjid=function(A,I,B){for(var D,N=[],M=0;!A.isEmpty();){var O=A.readUInt8();M<<=7,M|=O&127,O&128||(N.push(M),M=0)}O&128&&N.push(M);var L=N[0]/40|0,F=N[0]%40;if(B?D=N:D=[L,F].concat(N.slice(1)),I){var U=I[D.join(" ")];U===void 0&&(U=I[D.join(".")]),U!==void 0&&(D=U)}return D},E.prototype._decodeTime=function(A,I){var B=A.raw().toString();if(I==="gentime")var D=B.slice(0,4)|0,N=B.slice(4,6)|0,M=B.slice(6,8)|0,O=B.slice(8,10)|0,L=B.slice(10,12)|0,F=B.slice(12,14)|0;else if(I==="utctime"){var D=B.slice(0,2)|0,N=B.slice(2,4)|0,M=B.slice(4,6)|0,O=B.slice(6,8)|0,L=B.slice(8,10)|0,F=B.slice(10,12)|0;D<70?D=2e3+D:D=1900+D}else return A.error("Decoding "+I+" time is not supported yet");return Date.UTC(D,N-1,M,O,L,F,0)},E.prototype._decodeNull=function(A){return null},E.prototype._decodeBool=function(A){var I=A.readUInt8();return A.isError(I)?I:I!==0},E.prototype._decodeInt=function(A,I){var B=A.raw(),D=new _(B);return I&&(D=I[D.toString(10)]||D),D},E.prototype._use=function(A,I){return typeof A=="function"&&(A=A(I)),A._getDecoder("der").tree};function C(R,A){var I=R.readUInt8(A);if(R.isError(I))return I;var B=x.tagClass[I>>6],D=(I&32)===0;if((I&31)===31){var N=I;for(I=0;(N&128)===128;){if(N=R.readUInt8(A),R.isError(N))return N;I<<=7,I|=N&127}}else I&=31;var M=x.tag[I];return{cls:B,primitive:D,tag:I,tagStr:M}}function T(R,A,I){var B=R.readUInt8(I);if(R.isError(B))return B;if(!A&&B===128)return null;if(!(B&128))return B;var D=B&127;if(D>4)return R.error("length octect is too long");B=0;for(var N=0;N<D;N++){B<<=8;var M=R.readUInt8(I);if(R.isError(M))return M;B|=M}return B}return der_1$1}var pem$1,hasRequiredPem$1;function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var n=requireInherits_browser(),r=requireDist().Buffer,g=requireDer$1();function _(x){g.call(this,x),this.enc="pem"}return n(_,g),pem$1=_,_.prototype.decode=function(S,E){for(var C=S.toString().split(/[\r\n]+/g),T=E.label.toUpperCase(),R=/^-----(BEGIN|END) ([^-]+)-----$/,A=-1,I=-1,B=0;B<C.length;B++){var D=C[B].match(R);if(D!==null&&D[2]===T)if(A===-1){if(D[1]!=="BEGIN")break;A=B}else{if(D[1]!=="END")break;I=B;break}}if(A===-1||I===-1)throw new Error("PEM section not found for: "+T);var N=C.slice(A+1,I).join("");N.replace(/[^a-z0-9\+\/=]+/gi,"");var M=new r(N,"base64");return g.prototype.decode.call(this,M,E)},pem$1}var hasRequiredDecoders;function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,function(n){var r=n;r.der=requireDer$1(),r.pem=requirePem$1()}(decoders$1)),decoders$1}var encoders={},der_1,hasRequiredDer;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var n=requireInherits_browser(),r=requireDist().Buffer,g=requireAsn1$1(),_=g.base,x=g.constants.der;function S(R){this.enc="der",this.name=R.name,this.entity=R,this.tree=new E,this.tree._init(R.body)}der_1=S,S.prototype.encode=function(A,I){return this.tree._encode(A,I).join()};function E(R){_.Node.call(this,"der",R)}n(E,_.Node),E.prototype._encodeComposite=function(A,I,B,D){var N=T(A,I,B,this.reporter);if(D.length<128){var L=new r(2);return L[0]=N,L[1]=D.length,this._createEncoderBuffer([L,D])}for(var M=1,O=D.length;O>=256;O>>=8)M++;var L=new r(2+M);L[0]=N,L[1]=128|M;for(var O=1+M,F=D.length;F>0;O--,F>>=8)L[O]=F&255;return this._createEncoderBuffer([L,D])},E.prototype._encodeStr=function(A,I){if(I==="bitstr")return this._createEncoderBuffer([A.unused|0,A.data]);if(I==="bmpstr"){for(var B=new r(A.length*2),D=0;D<A.length;D++)B.writeUInt16BE(A.charCodeAt(D),D*2);return this._createEncoderBuffer(B)}else return I==="numstr"?this._isNumstr(A)?this._createEncoderBuffer(A):this.reporter.error("Encoding of string type: numstr supports only digits and space"):I==="printstr"?this._isPrintstr(A)?this._createEncoderBuffer(A):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(I)?this._createEncoderBuffer(A):I==="objDesc"?this._createEncoderBuffer(A):this.reporter.error("Encoding of string type: "+I+" unsupported")},E.prototype._encodeObjid=function(A,I,B){if(typeof A=="string"){if(!I)return this.reporter.error("string objid given, but no values map found");if(!I.hasOwnProperty(A))return this.reporter.error("objid not found in values map");A=I[A].split(/[\s\.]+/g);for(var D=0;D<A.length;D++)A[D]|=0}else if(Array.isArray(A)){A=A.slice();for(var D=0;D<A.length;D++)A[D]|=0}if(!Array.isArray(A))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(A));if(!B){if(A[1]>=40)return this.reporter.error("Second objid identifier OOB");A.splice(0,2,A[0]*40+A[1])}for(var N=0,D=0;D<A.length;D++){var M=A[D];for(N++;M>=128;M>>=7)N++}for(var O=new r(N),L=O.length-1,D=A.length-1;D>=0;D--){var M=A[D];for(O[L--]=M&127;(M>>=7)>0;)O[L--]=128|M&127}return this._createEncoderBuffer(O)};function C(R){return R<10?"0"+R:R}E.prototype._encodeTime=function(A,I){var B,D=new Date(A);return I==="gentime"?B=[C(D.getFullYear()),C(D.getUTCMonth()+1),C(D.getUTCDate()),C(D.getUTCHours()),C(D.getUTCMinutes()),C(D.getUTCSeconds()),"Z"].join(""):I==="utctime"?B=[C(D.getFullYear()%100),C(D.getUTCMonth()+1),C(D.getUTCDate()),C(D.getUTCHours()),C(D.getUTCMinutes()),C(D.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+I+" time is not supported yet"),this._encodeStr(B,"octstr")},E.prototype._encodeNull=function(){return this._createEncoderBuffer("")},E.prototype._encodeInt=function(A,I){if(typeof A=="string"){if(!I)return this.reporter.error("String int or enum given, but no values map");if(!I.hasOwnProperty(A))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(A));A=I[A]}if(typeof A!="number"&&!r.isBuffer(A)){var B=A.toArray();!A.sign&&B[0]&128&&B.unshift(0),A=new r(B)}if(r.isBuffer(A)){var D=A.length;A.length===0&&D++;var M=new r(D);return A.copy(M),A.length===0&&(M[0]=0),this._createEncoderBuffer(M)}if(A<128)return this._createEncoderBuffer(A);if(A<256)return this._createEncoderBuffer([0,A]);for(var D=1,N=A;N>=256;N>>=8)D++;for(var M=new Array(D),N=M.length-1;N>=0;N--)M[N]=A&255,A>>=8;return M[0]&128&&M.unshift(0),this._createEncoderBuffer(new r(M))},E.prototype._encodeBool=function(A){return this._createEncoderBuffer(A?255:0)},E.prototype._use=function(A,I){return typeof A=="function"&&(A=A(I)),A._getEncoder("der").tree},E.prototype._skipDefault=function(A,I,B){var D=this._baseState,N;if(D.default===null)return!1;var M=A.join();if(D.defaultBuffer===void 0&&(D.defaultBuffer=this._encodeValue(D.default,I,B).join()),M.length!==D.defaultBuffer.length)return!1;for(N=0;N<M.length;N++)if(M[N]!==D.defaultBuffer[N])return!1;return!0};function T(R,A,I,B){var D;if(R==="seqof"?R="seq":R==="setof"&&(R="set"),x.tagByName.hasOwnProperty(R))D=x.tagByName[R];else if(typeof R=="number"&&(R|0)===R)D=R;else return B.error("Unknown tag: "+R);return D>=31?B.error("Multi-octet tag encoding unsupported"):(A||(D|=32),D|=x.tagClassByName[I||"universal"]<<6,D)}return der_1}var pem,hasRequiredPem;function requirePem(){if(hasRequiredPem)return pem;hasRequiredPem=1;var n=requireInherits_browser(),r=requireDer();function g(_){r.call(this,_),this.enc="pem"}return n(g,r),pem=g,g.prototype.encode=function(x,S){for(var E=r.prototype.encode.call(this,x),C=E.toString("base64"),T=["-----BEGIN "+S.label+"-----"],R=0;R<C.length;R+=64)T.push(C.slice(R,R+64));return T.push("-----END "+S.label+"-----"),T.join(`
`)},pem}var hasRequiredEncoders;function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,function(n){var r=n;r.der=requireDer(),r.pem=requirePem()}(encoders)),encoders}var hasRequiredAsn1$1;function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,function(n){var r=n;r.bignum=requireBn$2(),r.define=requireApi().define,r.base=requireBase(),r.constants=requireConstants$1(),r.decoders=requireDecoders(),r.encoders=requireEncoders()}(asn1)),asn1}var certificate,hasRequiredCertificate;function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var n=requireAsn1$1(),r=n.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),g=n.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),_=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),x=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(_),this.key("subjectPublicKey").bitstr())}),S=n.define("RelativeDistinguishedName",function(){this.setof(g)}),E=n.define("RDNSequence",function(){this.seqof(S)}),C=n.define("Name",function(){this.choice({rdnSequence:this.use(E)})}),T=n.define("Validity",function(){this.seq().obj(this.key("notBefore").use(r),this.key("notAfter").use(r))}),R=n.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),A=n.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(_),this.key("issuer").use(C),this.key("validity").use(T),this.key("subject").use(C),this.key("subjectPublicKeyInfo").use(x),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(R).optional())}),I=n.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(A),this.key("signatureAlgorithm").use(_),this.key("signatureValue").bitstr())});return certificate=I,certificate}var hasRequiredAsn1;function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var n=requireAsn1$1();asn1$1.certificate=requireCertificate();var r=n.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=r;var g=n.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=g;var _=n.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),x=n.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(_),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=x;var S=n.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(_),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=S;var E=n.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=E;var C=n.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=C,asn1$1.DSAparam=n.define("DSAparam",function(){this.int()});var T=n.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),R=n.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(T),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=R,asn1$1.signature=n.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var n=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,g=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,_=requireEvp_bytestokey(),x=requireBrowser$8(),S=requireSafeBuffer$1().Buffer;return fixProc=function(E,C){var T=E.toString(),R=T.match(n),A;if(R){var B="aes"+R[1],D=S.from(R[2],"hex"),N=S.from(R[3].replace(/[\r\n]/g,""),"base64"),M=_(C,D.slice(0,8),parseInt(R[1],10)).key,O=[],L=x.createDecipheriv(B,M,D);O.push(L.update(N)),O.push(L.final()),A=S.concat(O)}else{var I=T.match(g);A=S.from(I[2].replace(/[\r\n]/g,""),"base64")}var F=T.match(r)[1];return{tag:F,data:A}},fixProc}var parseAsn1,hasRequiredParseAsn1;function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var n=requireAsn1(),r=require$$1,g=requireFixProc(),_=requireBrowser$8(),x=requireBrowser$9(),S=requireSafeBuffer$1().Buffer;function E(T,R){var A=T.algorithm.decrypt.kde.kdeparams.salt,I=parseInt(T.algorithm.decrypt.kde.kdeparams.iters.toString(),10),B=r[T.algorithm.decrypt.cipher.algo.join(".")],D=T.algorithm.decrypt.cipher.iv,N=T.subjectPrivateKey,M=parseInt(B.split("-")[1],10)/8,O=x.pbkdf2Sync(R,A,I,M,"sha1"),L=_.createDecipheriv(B,O,D),F=[];return F.push(L.update(N)),F.push(L.final()),S.concat(F)}function C(T){var R;typeof T=="object"&&!S.isBuffer(T)&&(R=T.passphrase,T=T.key),typeof T=="string"&&(T=S.from(T));var A=g(T,R),I=A.tag,B=A.data,D,N;switch(I){case"CERTIFICATE":N=n.certificate.decode(B,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(N||(N=n.PublicKey.decode(B,"der")),D=N.algorithm.algorithm.join("."),D){case"1.2.840.113549.1.1.1":return n.RSAPublicKey.decode(N.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return N.subjectPrivateKey=N.subjectPublicKey,{type:"ec",data:N};case"1.2.840.10040.4.1":return N.algorithm.params.pub_key=n.DSAparam.decode(N.subjectPublicKey.data,"der"),{type:"dsa",data:N.algorithm.params};default:throw new Error("unknown key id "+D)}case"ENCRYPTED PRIVATE KEY":B=n.EncryptedPrivateKey.decode(B,"der"),B=E(B,R);case"PRIVATE KEY":switch(N=n.PrivateKey.decode(B,"der"),D=N.algorithm.algorithm.join("."),D){case"1.2.840.113549.1.1.1":return n.RSAPrivateKey.decode(N.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:N.algorithm.curve,privateKey:n.ECPrivateKey.decode(N.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return N.algorithm.params.priv_key=n.DSAparam.decode(N.subjectPrivateKey,"der"),{type:"dsa",params:N.algorithm.params};default:throw new Error("unknown key id "+D)}case"RSA PUBLIC KEY":return n.RSAPublicKey.decode(B,"der");case"RSA PRIVATE KEY":return n.RSAPrivateKey.decode(B,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:n.DSAPrivateKey.decode(B,"der")};case"EC PRIVATE KEY":return B=n.ECPrivateKey.decode(B,"der"),{curve:B.parameters.value,privateKey:B.privateKey};default:throw new Error("unknown key type "+I)}}return C.signature=n.signature,parseAsn1=C,parseAsn1}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return sign.exports;hasRequiredSign=1;var n=requireSafeBuffer$1().Buffer,r=requireBrowser$a(),g=requireBrowserifyRsa(),_=requireElliptic().ec,x=requireBn(),S=requireParseAsn1(),E=require$$4,C=1;function T(L,F,U,j,z){var W=S(F);if(W.curve){if(j!=="ecdsa"&&j!=="ecdsa/rsa")throw new Error("wrong private key type");return R(L,W)}else if(W.type==="dsa"){if(j!=="dsa")throw new Error("wrong private key type");return A(L,W,U)}if(j!=="rsa"&&j!=="ecdsa/rsa")throw new Error("wrong private key type");if(F.padding!==void 0&&F.padding!==C)throw new Error("illegal or unsupported padding mode");L=n.concat([z,L]);for(var X=W.modulus.byteLength(),ie=[0,1];L.length+ie.length+1<X;)ie.push(255);ie.push(0);for(var fe=-1;++fe<L.length;)ie.push(L[fe]);var xe=g(ie,W);return xe}function R(L,F){var U=E[F.curve.join(".")];if(!U)throw new Error("unknown curve "+F.curve.join("."));var j=new _(U),z=j.keyFromPrivate(F.privateKey),W=z.sign(L);return n.from(W.toDER())}function A(L,F,U){for(var j=F.params.priv_key,z=F.params.p,W=F.params.q,X=F.params.g,ie=new x(0),fe,xe=D(L,W).mod(W),we=!1,G=B(j,W,L,U);we===!1;)fe=M(W,G,U),ie=O(X,fe,z,W),we=fe.invm(W).imul(xe.add(j.mul(ie))).mod(W),we.cmpn(0)===0&&(we=!1,ie=new x(0));return I(ie,we)}function I(L,F){L=L.toArray(),F=F.toArray(),L[0]&128&&(L=[0].concat(L)),F[0]&128&&(F=[0].concat(F));var U=L.length+F.length+4,j=[48,U,2,L.length];return j=j.concat(L,[2,F.length],F),n.from(j)}function B(L,F,U,j){if(L=n.from(L.toArray()),L.length<F.byteLength()){var z=n.alloc(F.byteLength()-L.length);L=n.concat([z,L])}var W=U.length,X=N(U,F),ie=n.alloc(W);ie.fill(1);var fe=n.alloc(W);return fe=r(j,fe).update(ie).update(n.from([0])).update(L).update(X).digest(),ie=r(j,fe).update(ie).digest(),fe=r(j,fe).update(ie).update(n.from([1])).update(L).update(X).digest(),ie=r(j,fe).update(ie).digest(),{k:fe,v:ie}}function D(L,F){var U=new x(L),j=(L.length<<3)-F.bitLength();return j>0&&U.ishrn(j),U}function N(L,F){L=D(L,F),L=L.mod(F);var U=n.from(L.toArray());if(U.length<F.byteLength()){var j=n.alloc(F.byteLength()-U.length);U=n.concat([j,U])}return U}function M(L,F,U){var j,z;do{for(j=n.alloc(0);j.length*8<L.bitLength();)F.v=r(U,F.k).update(F.v).digest(),j=n.concat([j,F.v]);z=D(j,L),F.k=r(U,F.k).update(F.v).update(n.from([0])).digest(),F.v=r(U,F.k).update(F.v).digest()}while(z.cmp(L)!==-1);return z}function O(L,F,U,j){return L.toRed(x.mont(U)).redPow(F).fromRed().mod(j)}return sign.exports=T,sign.exports.getKey=B,sign.exports.makeKey=M,sign.exports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var n=requireSafeBuffer$1().Buffer,r=requireBn(),g=requireElliptic().ec,_=requireParseAsn1(),x=require$$4;function S(R,A,I,B,D){var N=_(I);if(N.type==="ec"){if(B!=="ecdsa"&&B!=="ecdsa/rsa")throw new Error("wrong public key type");return E(R,A,N)}else if(N.type==="dsa"){if(B!=="dsa")throw new Error("wrong public key type");return C(R,A,N)}if(B!=="rsa"&&B!=="ecdsa/rsa")throw new Error("wrong public key type");A=n.concat([D,A]);for(var M=N.modulus.byteLength(),O=[1],L=0;A.length+O.length+2<M;)O.push(255),L+=1;O.push(0);for(var F=-1;++F<A.length;)O.push(A[F]);O=n.from(O);var U=r.mont(N.modulus);R=new r(R).toRed(U),R=R.redPow(new r(N.publicExponent)),R=n.from(R.fromRed().toArray());var j=L<8?1:0;for(M=Math.min(R.length,O.length),R.length!==O.length&&(j=1),F=-1;++F<M;)j|=R[F]^O[F];return j===0}function E(R,A,I){var B=x[I.data.algorithm.curve.join(".")];if(!B)throw new Error("unknown curve "+I.data.algorithm.curve.join("."));var D=new g(B),N=I.data.subjectPrivateKey.data;return D.verify(A,R,N)}function C(R,A,I){var B=I.data.p,D=I.data.q,N=I.data.g,M=I.data.pub_key,O=_.signature.decode(R,"der"),L=O.s,F=O.r;T(L,D),T(F,D);var U=r.mont(B),j=L.invm(D),z=N.toRed(U).redPow(new r(A).mul(j).mod(D)).fromRed().mul(M.toRed(U).redPow(F.mul(j).mod(D)).fromRed()).mod(B).mod(D);return z.cmp(F)===0}function T(R,A){if(R.cmpn(0)<=0)throw new Error("invalid sig");if(R.cmp(A)>=0)throw new Error("invalid sig")}return verify_1=S,verify_1}var browser$6,hasRequiredBrowser$5;function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$6;hasRequiredBrowser$5=1;var n=requireSafeBuffer$1().Buffer,r=requireBrowser$b(),g=requireReadableBrowser(),_=requireInherits_browser(),x=requireSign(),S=requireVerify(),E=require$$6;Object.keys(E).forEach(function(I){E[I].id=n.from(E[I].id,"hex"),E[I.toLowerCase()]=E[I]});function C(I){g.Writable.call(this);var B=E[I];if(!B)throw new Error("Unknown message digest");this._hashType=B.hash,this._hash=r(B.hash),this._tag=B.id,this._signType=B.sign}_(C,g.Writable),C.prototype._write=function(B,D,N){this._hash.update(B),N()},C.prototype.update=function(B,D){return this._hash.update(typeof B=="string"?n.from(B,D):B),this},C.prototype.sign=function(B,D){this.end();var N=this._hash.digest(),M=x(N,B,this._hashType,this._signType,this._tag);return D?M.toString(D):M};function T(I){g.Writable.call(this);var B=E[I];if(!B)throw new Error("Unknown message digest");this._hash=r(B.hash),this._tag=B.id,this._signType=B.sign}_(T,g.Writable),T.prototype._write=function(B,D,N){this._hash.update(B),N()},T.prototype.update=function(B,D){return this._hash.update(typeof B=="string"?n.from(B,D):B),this},T.prototype.verify=function(B,D,N){var M=typeof D=="string"?n.from(D,N):D;this.end();var O=this._hash.digest();return S(M,O,B,this._signType,this._tag)};function R(I){return new C(I)}function A(I){return new T(I)}return browser$6={Sign:R,Verify:A,createSign:R,createVerify:A},browser$6}var browser$5,hasRequiredBrowser$4;function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$5;hasRequiredBrowser$4=1;var n=requireElliptic(),r=requireBn$2();browser$5=function(E){return new _(E)};var g={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};g.p224=g.secp224r1,g.p256=g.secp256r1=g.prime256v1,g.p192=g.secp192r1=g.prime192v1,g.p384=g.secp384r1,g.p521=g.secp521r1;function _(S){this.curveType=g[S],this.curveType||(this.curveType={name:S}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}_.prototype.generateKeys=function(S,E){return this.keys=this.curve.genKeyPair(),this.getPublicKey(S,E)},_.prototype.computeSecret=function(S,E,C){E=E||"utf8",Buffer$1.isBuffer(S)||(S=new Buffer$1(S,E));var T=this.curve.keyFromPublic(S).getPublic(),R=T.mul(this.keys.getPrivate()).getX();return x(R,C,this.curveType.byteLength)},_.prototype.getPublicKey=function(S,E){var C=this.keys.getPublic(E==="compressed",!0);return E==="hybrid"&&(C[C.length-1]%2?C[0]=7:C[0]=6),x(C,S)},_.prototype.getPrivateKey=function(S){return x(this.keys.getPrivate(),S)},_.prototype.setPublicKey=function(S,E){return E=E||"utf8",Buffer$1.isBuffer(S)||(S=new Buffer$1(S,E)),this.keys._importPublic(S),this},_.prototype.setPrivateKey=function(S,E){E=E||"utf8",Buffer$1.isBuffer(S)||(S=new Buffer$1(S,E));var C=new r(S);return C=C.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(C),this};function x(S,E,C){Array.isArray(S)||(S=S.toArray());var T=new Buffer$1(S);if(C&&T.length<C){var R=new Buffer$1(C-T.length);R.fill(0),T=Buffer$1.concat([R,T])}return E?T.toString(E):T}return browser$5}var browser$4={},mgf,hasRequiredMgf;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var n=requireBrowser$b(),r=requireSafeBuffer$1().Buffer;mgf=function(_,x){for(var S=r.alloc(0),E=0,C;S.length<x;)C=g(E++),S=r.concat([S,n("sha1").update(_).update(C).digest()]);return S.slice(0,x)};function g(_){var x=r.allocUnsafe(4);return x.writeUInt32BE(_,0),x}return mgf}var xor$1,hasRequiredXor;function requireXor(){return hasRequiredXor||(hasRequiredXor=1,xor$1=function(r,g){for(var _=r.length,x=-1;++x<_;)r[x]^=g[x];return r}),xor$1}var withPublic_1,hasRequiredWithPublic;function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var n=requireBn$2(),r=requireSafeBuffer$1().Buffer;function g(_,x){return r.from(_.toRed(n.mont(x.modulus)).redPow(new n(x.publicExponent)).fromRed().toArray())}return withPublic_1=g,withPublic_1}var publicEncrypt,hasRequiredPublicEncrypt;function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var n=requireParseAsn1(),r=requireBrowser$c(),g=requireBrowser$b(),_=requireMgf(),x=requireXor(),S=requireBn$2(),E=requireWithPublic(),C=requireBrowserifyRsa(),T=requireSafeBuffer$1().Buffer;publicEncrypt=function(D,N,M){var O;D.padding?O=D.padding:M?O=1:O=4;var L=n(D),F;if(O===4)F=R(L,N);else if(O===1)F=A(L,N,M);else if(O===3){if(F=new S(N),F.cmp(L.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return M?C(F,L):E(F,L)};function R(B,D){var N=B.modulus.byteLength(),M=D.length,O=g("sha1").update(T.alloc(0)).digest(),L=O.length,F=2*L;if(M>N-F-2)throw new Error("message too long");var U=T.alloc(N-M-F-2),j=N-L-1,z=r(L),W=x(T.concat([O,U,T.alloc(1,1),D],j),_(z,j)),X=x(z,_(W,L));return new S(T.concat([T.alloc(1),X,W],N))}function A(B,D,N){var M=D.length,O=B.modulus.byteLength();if(M>O-11)throw new Error("message too long");var L;return N?L=T.alloc(O-M-3,255):L=I(O-M-3),new S(T.concat([T.from([0,N?1:2]),L,T.alloc(1),D],O))}function I(B){for(var D=T.allocUnsafe(B),N=0,M=r(B*2),O=0,L;N<B;)O===M.length&&(M=r(B*2),O=0),L=M[O++],L&&(D[N++]=L);return D}return publicEncrypt}var privateDecrypt,hasRequiredPrivateDecrypt;function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var n=requireParseAsn1(),r=requireMgf(),g=requireXor(),_=requireBn$2(),x=requireBrowserifyRsa(),S=requireBrowser$b(),E=requireWithPublic(),C=requireSafeBuffer$1().Buffer;privateDecrypt=function(B,D,N){var M;B.padding?M=B.padding:N?M=1:M=4;var O=n(B),L=O.modulus.byteLength();if(D.length>L||new _(D).cmp(O.modulus)>=0)throw new Error("decryption error");var F;N?F=E(new _(D),O):F=x(D,O);var U=C.alloc(L-F.length);if(F=C.concat([U,F],L),M===4)return T(O,F);if(M===1)return R(O,F,N);if(M===3)return F;throw new Error("unknown padding")};function T(I,B){var D=I.modulus.byteLength(),N=S("sha1").update(C.alloc(0)).digest(),M=N.length;if(B[0]!==0)throw new Error("decryption error");var O=B.slice(1,M+1),L=B.slice(M+1),F=g(O,r(L,M)),U=g(L,r(F,D-M-1));if(A(N,U.slice(0,M)))throw new Error("decryption error");for(var j=M;U[j]===0;)j++;if(U[j++]!==1)throw new Error("decryption error");return U.slice(j)}function R(I,B,D){for(var N=B.slice(0,2),M=2,O=0;B[M++]!==0;)if(M>=B.length){O++;break}var L=B.slice(2,M-1);if((N.toString("hex")!=="0002"&&!D||N.toString("hex")!=="0001"&&D)&&O++,L.length<8&&O++,O)throw new Error("decryption error");return B.slice(M)}function A(I,B){I=C.from(I),B=C.from(B);var D=0,N=I.length;I.length!==B.length&&(D++,N=Math.min(I.length,B.length));for(var M=-1;++M<N;)D+=I[M]^B[M];return D}return privateDecrypt}var hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,function(n){n.publicEncrypt=requirePublicEncrypt(),n.privateDecrypt=requirePrivateDecrypt(),n.privateEncrypt=function(g,_){return n.publicEncrypt(g,_,!0)},n.publicDecrypt=function(g,_){return n.privateDecrypt(g,_,!0)}}(browser$4)),browser$4}var browser$3={},hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$3;hasRequiredBrowser$2=1;function n(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var r=requireSafeBuffer$1(),g=requireBrowser$c(),_=r.Buffer,x=r.kMaxLength,S=commonjsGlobal.crypto||commonjsGlobal.msCrypto,E=Math.pow(2,32)-1;function C(B,D){if(typeof B!="number"||B!==B)throw new TypeError("offset must be a number");if(B>E||B<0)throw new TypeError("offset must be a uint32");if(B>x||B>D)throw new RangeError("offset out of range")}function T(B,D,N){if(typeof B!="number"||B!==B)throw new TypeError("size must be a number");if(B>E||B<0)throw new TypeError("size must be a uint32");if(B+D>N||B>x)throw new RangeError("buffer too small")}S&&S.getRandomValues||!process$1.browser?(browser$3.randomFill=R,browser$3.randomFillSync=I):(browser$3.randomFill=n,browser$3.randomFillSync=n);function R(B,D,N,M){if(!_.isBuffer(B)&&!(B instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof D=="function")M=D,D=0,N=B.length;else if(typeof N=="function")M=N,N=B.length-D;else if(typeof M!="function")throw new TypeError('"cb" argument must be a function');return C(D,B.length),T(N,D,B.length),A(B,D,N,M)}function A(B,D,N,M){if(process$1.browser){var O=B.buffer,L=new Uint8Array(O,D,N);if(S.getRandomValues(L),M){process$1.nextTick(function(){M(null,B)});return}return B}if(M){g(N,function(U,j){if(U)return M(U);j.copy(B,D),M(null,B)});return}var F=g(N);return F.copy(B,D),B}function I(B,D,N){if(typeof D>"u"&&(D=0),!_.isBuffer(B)&&!(B instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return C(D,B.length),N===void 0&&(N=B.length-D),T(N,D,B.length),A(B,D,N)}return browser$3}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$c(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$b(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$a();var n=requireAlgos(),r=Object.keys(n),g=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(r);cryptoBrowserify.getHashes=function(){return g};var _=requireBrowser$9();cryptoBrowserify.pbkdf2=_.pbkdf2,cryptoBrowserify.pbkdf2Sync=_.pbkdf2Sync;var x=requireBrowser$7();cryptoBrowserify.Cipher=x.Cipher,cryptoBrowserify.createCipher=x.createCipher,cryptoBrowserify.Cipheriv=x.Cipheriv,cryptoBrowserify.createCipheriv=x.createCipheriv,cryptoBrowserify.Decipher=x.Decipher,cryptoBrowserify.createDecipher=x.createDecipher,cryptoBrowserify.Decipheriv=x.Decipheriv,cryptoBrowserify.createDecipheriv=x.createDecipheriv,cryptoBrowserify.getCiphers=x.getCiphers,cryptoBrowserify.listCiphers=x.listCiphers;var S=requireBrowser$6();cryptoBrowserify.DiffieHellmanGroup=S.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=S.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=S.getDiffieHellman,cryptoBrowserify.createDiffieHellman=S.createDiffieHellman,cryptoBrowserify.DiffieHellman=S.DiffieHellman;var E=requireBrowser$5();cryptoBrowserify.createSign=E.createSign,cryptoBrowserify.Sign=E.Sign,cryptoBrowserify.createVerify=E.createVerify,cryptoBrowserify.Verify=E.Verify,cryptoBrowserify.createECDH=requireBrowser$4();var C=requireBrowser$3();cryptoBrowserify.publicEncrypt=C.publicEncrypt,cryptoBrowserify.privateEncrypt=C.privateEncrypt,cryptoBrowserify.publicDecrypt=C.publicDecrypt,cryptoBrowserify.privateDecrypt=C.privateDecrypt;var T=requireBrowser$2();return cryptoBrowserify.randomFill=T.randomFill,cryptoBrowserify.randomFillSync=T.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(`sorry, createCredentials is not implemented yet
we accept pull requests
https://github.com/browserify/crypto-browserify`)},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var core=core$1.exports,hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(n,r){(function(g,_){n.exports=_()})(core,function(){var g=g||function(_,x){var S;if(typeof window<"u"&&window.crypto&&(S=window.crypto),typeof self<"u"&&self.crypto&&(S=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(S=globalThis.crypto),!S&&typeof window<"u"&&window.msCrypto&&(S=window.msCrypto),!S&&typeof commonjsGlobal<"u"&&commonjsGlobal.crypto&&(S=commonjsGlobal.crypto),!S&&typeof commonjsRequire=="function")try{S=requireCryptoBrowserify()}catch{}var E=function(){if(S){if(typeof S.getRandomValues=="function")try{return S.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof S.randomBytes=="function")try{return S.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},C=Object.create||function(){function F(){}return function(U){var j;return F.prototype=U,j=new F,F.prototype=null,j}}(),T={},R=T.lib={},A=R.Base=function(){return{extend:function(F){var U=C(this);return F&&U.mixIn(F),(!U.hasOwnProperty("init")||this.init===U.init)&&(U.init=function(){U.$super.init.apply(this,arguments)}),U.init.prototype=U,U.$super=this,U},create:function(){var F=this.extend();return F.init.apply(F,arguments),F},init:function(){},mixIn:function(F){for(var U in F)F.hasOwnProperty(U)&&(this[U]=F[U]);F.hasOwnProperty("toString")&&(this.toString=F.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),I=R.WordArray=A.extend({init:function(F,U){F=this.words=F||[],U!=x?this.sigBytes=U:this.sigBytes=F.length*4},toString:function(F){return(F||D).stringify(this)},concat:function(F){var U=this.words,j=F.words,z=this.sigBytes,W=F.sigBytes;if(this.clamp(),z%4)for(var X=0;X<W;X++){var ie=j[X>>>2]>>>24-X%4*8&255;U[z+X>>>2]|=ie<<24-(z+X)%4*8}else for(var fe=0;fe<W;fe+=4)U[z+fe>>>2]=j[fe>>>2];return this.sigBytes+=W,this},clamp:function(){var F=this.words,U=this.sigBytes;F[U>>>2]&=4294967295<<32-U%4*8,F.length=_.ceil(U/4)},clone:function(){var F=A.clone.call(this);return F.words=this.words.slice(0),F},random:function(F){for(var U=[],j=0;j<F;j+=4)U.push(E());return new I.init(U,F)}}),B=T.enc={},D=B.Hex={stringify:function(F){for(var U=F.words,j=F.sigBytes,z=[],W=0;W<j;W++){var X=U[W>>>2]>>>24-W%4*8&255;z.push((X>>>4).toString(16)),z.push((X&15).toString(16))}return z.join("")},parse:function(F){for(var U=F.length,j=[],z=0;z<U;z+=2)j[z>>>3]|=parseInt(F.substr(z,2),16)<<24-z%8*4;return new I.init(j,U/2)}},N=B.Latin1={stringify:function(F){for(var U=F.words,j=F.sigBytes,z=[],W=0;W<j;W++){var X=U[W>>>2]>>>24-W%4*8&255;z.push(String.fromCharCode(X))}return z.join("")},parse:function(F){for(var U=F.length,j=[],z=0;z<U;z++)j[z>>>2]|=(F.charCodeAt(z)&255)<<24-z%4*8;return new I.init(j,U)}},M=B.Utf8={stringify:function(F){try{return decodeURIComponent(escape(N.stringify(F)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(F){return N.parse(unescape(encodeURIComponent(F)))}},O=R.BufferedBlockAlgorithm=A.extend({reset:function(){this._data=new I.init,this._nDataBytes=0},_append:function(F){typeof F=="string"&&(F=M.parse(F)),this._data.concat(F),this._nDataBytes+=F.sigBytes},_process:function(F){var U,j=this._data,z=j.words,W=j.sigBytes,X=this.blockSize,ie=X*4,fe=W/ie;F?fe=_.ceil(fe):fe=_.max((fe|0)-this._minBufferSize,0);var xe=fe*X,we=_.min(xe*4,W);if(xe){for(var G=0;G<xe;G+=X)this._doProcessBlock(z,G);U=z.splice(0,xe),j.sigBytes-=we}return new I.init(U,we)},clone:function(){var F=A.clone.call(this);return F._data=this._data.clone(),F},_minBufferSize:0});R.Hasher=O.extend({cfg:A.extend(),init:function(F){this.cfg=this.cfg.extend(F),this.reset()},reset:function(){O.reset.call(this),this._doReset()},update:function(F){return this._append(F),this._process(),this},finalize:function(F){F&&this._append(F);var U=this._doFinalize();return U},blockSize:16,_createHelper:function(F){return function(U,j){return new F.init(j).finalize(U)}},_createHmacHelper:function(F){return function(U,j){return new L.HMAC.init(F,j).finalize(U)}}});var L=T.algo={};return T}(Math);return g})}(core$1)),core$1.exports}var encBase64=encBase64$1.exports,hasRequiredEncBase64;function requireEncBase64(){return hasRequiredEncBase64||(hasRequiredEncBase64=1,function(n,r){(function(g,_){n.exports=_(requireCore())})(encBase64,function(g){return function(){var _=g,x=_.lib,S=x.WordArray,E=_.enc;E.Base64={stringify:function(T){var R=T.words,A=T.sigBytes,I=this._map;T.clamp();for(var B=[],D=0;D<A;D+=3)for(var N=R[D>>>2]>>>24-D%4*8&255,M=R[D+1>>>2]>>>24-(D+1)%4*8&255,O=R[D+2>>>2]>>>24-(D+2)%4*8&255,L=N<<16|M<<8|O,F=0;F<4&&D+F*.75<A;F++)B.push(I.charAt(L>>>6*(3-F)&63));var U=I.charAt(64);if(U)for(;B.length%4;)B.push(U);return B.join("")},parse:function(T){var R=T.length,A=this._map,I=this._reverseMap;if(!I){I=this._reverseMap=[];for(var B=0;B<A.length;B++)I[A.charCodeAt(B)]=B}var D=A.charAt(64);if(D){var N=T.indexOf(D);N!==-1&&(R=N)}return C(T,R,I)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function C(T,R,A){for(var I=[],B=0,D=0;D<R;D++)if(D%4){var N=A[T.charCodeAt(D-1)]<<D%4*2,M=A[T.charCodeAt(D)]>>>6-D%4*2,O=N|M;I[B>>>2]|=O<<24-B%4*8,B++}return S.create(I,B)}}(),g.enc.Base64})}(encBase64$1)),encBase64$1.exports}var encBase64Exports=requireEncBase64();const Base64=getDefaultExportFromCjs(encBase64Exports);var md5$2={exports:{}},md5$1=md5$2.exports,hasRequiredMd5;function requireMd5(){return hasRequiredMd5||(hasRequiredMd5=1,function(n,r){(function(g,_){n.exports=_(requireCore())})(md5$1,function(g){return function(_){var x=g,S=x.lib,E=S.WordArray,C=S.Hasher,T=x.algo,R=[];(function(){for(var M=0;M<64;M++)R[M]=_.abs(_.sin(M+1))*4294967296|0})();var A=T.MD5=C.extend({_doReset:function(){this._hash=new E.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(M,O){for(var L=0;L<16;L++){var F=O+L,U=M[F];M[F]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360}var j=this._hash.words,z=M[O+0],W=M[O+1],X=M[O+2],ie=M[O+3],fe=M[O+4],xe=M[O+5],we=M[O+6],G=M[O+7],J=M[O+8],q=M[O+9],H=M[O+10],ve=M[O+11],Z=M[O+12],ce=M[O+13],ue=M[O+14],se=M[O+15],te=j[0],Y=j[1],be=j[2],ye=j[3];te=I(te,Y,be,ye,z,7,R[0]),ye=I(ye,te,Y,be,W,12,R[1]),be=I(be,ye,te,Y,X,17,R[2]),Y=I(Y,be,ye,te,ie,22,R[3]),te=I(te,Y,be,ye,fe,7,R[4]),ye=I(ye,te,Y,be,xe,12,R[5]),be=I(be,ye,te,Y,we,17,R[6]),Y=I(Y,be,ye,te,G,22,R[7]),te=I(te,Y,be,ye,J,7,R[8]),ye=I(ye,te,Y,be,q,12,R[9]),be=I(be,ye,te,Y,H,17,R[10]),Y=I(Y,be,ye,te,ve,22,R[11]),te=I(te,Y,be,ye,Z,7,R[12]),ye=I(ye,te,Y,be,ce,12,R[13]),be=I(be,ye,te,Y,ue,17,R[14]),Y=I(Y,be,ye,te,se,22,R[15]),te=B(te,Y,be,ye,W,5,R[16]),ye=B(ye,te,Y,be,we,9,R[17]),be=B(be,ye,te,Y,ve,14,R[18]),Y=B(Y,be,ye,te,z,20,R[19]),te=B(te,Y,be,ye,xe,5,R[20]),ye=B(ye,te,Y,be,H,9,R[21]),be=B(be,ye,te,Y,se,14,R[22]),Y=B(Y,be,ye,te,fe,20,R[23]),te=B(te,Y,be,ye,q,5,R[24]),ye=B(ye,te,Y,be,ue,9,R[25]),be=B(be,ye,te,Y,ie,14,R[26]),Y=B(Y,be,ye,te,J,20,R[27]),te=B(te,Y,be,ye,ce,5,R[28]),ye=B(ye,te,Y,be,X,9,R[29]),be=B(be,ye,te,Y,G,14,R[30]),Y=B(Y,be,ye,te,Z,20,R[31]),te=D(te,Y,be,ye,xe,4,R[32]),ye=D(ye,te,Y,be,J,11,R[33]),be=D(be,ye,te,Y,ve,16,R[34]),Y=D(Y,be,ye,te,ue,23,R[35]),te=D(te,Y,be,ye,W,4,R[36]),ye=D(ye,te,Y,be,fe,11,R[37]),be=D(be,ye,te,Y,G,16,R[38]),Y=D(Y,be,ye,te,H,23,R[39]),te=D(te,Y,be,ye,ce,4,R[40]),ye=D(ye,te,Y,be,z,11,R[41]),be=D(be,ye,te,Y,ie,16,R[42]),Y=D(Y,be,ye,te,we,23,R[43]),te=D(te,Y,be,ye,q,4,R[44]),ye=D(ye,te,Y,be,Z,11,R[45]),be=D(be,ye,te,Y,se,16,R[46]),Y=D(Y,be,ye,te,X,23,R[47]),te=N(te,Y,be,ye,z,6,R[48]),ye=N(ye,te,Y,be,G,10,R[49]),be=N(be,ye,te,Y,ue,15,R[50]),Y=N(Y,be,ye,te,xe,21,R[51]),te=N(te,Y,be,ye,Z,6,R[52]),ye=N(ye,te,Y,be,ie,10,R[53]),be=N(be,ye,te,Y,H,15,R[54]),Y=N(Y,be,ye,te,W,21,R[55]),te=N(te,Y,be,ye,J,6,R[56]),ye=N(ye,te,Y,be,se,10,R[57]),be=N(be,ye,te,Y,we,15,R[58]),Y=N(Y,be,ye,te,ce,21,R[59]),te=N(te,Y,be,ye,fe,6,R[60]),ye=N(ye,te,Y,be,ve,10,R[61]),be=N(be,ye,te,Y,X,15,R[62]),Y=N(Y,be,ye,te,q,21,R[63]),j[0]=j[0]+te|0,j[1]=j[1]+Y|0,j[2]=j[2]+be|0,j[3]=j[3]+ye|0},_doFinalize:function(){var M=this._data,O=M.words,L=this._nDataBytes*8,F=M.sigBytes*8;O[F>>>5]|=128<<24-F%32;var U=_.floor(L/4294967296),j=L;O[(F+64>>>9<<4)+15]=(U<<8|U>>>24)&16711935|(U<<24|U>>>8)&4278255360,O[(F+64>>>9<<4)+14]=(j<<8|j>>>24)&16711935|(j<<24|j>>>8)&4278255360,M.sigBytes=(O.length+1)*4,this._process();for(var z=this._hash,W=z.words,X=0;X<4;X++){var ie=W[X];W[X]=(ie<<8|ie>>>24)&16711935|(ie<<24|ie>>>8)&4278255360}return z},clone:function(){var M=C.clone.call(this);return M._hash=this._hash.clone(),M}});function I(M,O,L,F,U,j,z){var W=M+(O&L|~O&F)+U+z;return(W<<j|W>>>32-j)+O}function B(M,O,L,F,U,j,z){var W=M+(O&F|L&~F)+U+z;return(W<<j|W>>>32-j)+O}function D(M,O,L,F,U,j,z){var W=M+(O^L^F)+U+z;return(W<<j|W>>>32-j)+O}function N(M,O,L,F,U,j,z){var W=M+(L^(O|~F))+U+z;return(W<<j|W>>>32-j)+O}x.MD5=C._createHelper(A),x.HmacMD5=C._createHmacHelper(A)}(Math),g.MD5})}(md5$2)),md5$2.exports}var md5Exports=requireMd5();const md5=getDefaultExportFromCjs(md5Exports);var sha256$2={exports:{}},sha256$1=sha256$2.exports,hasRequiredSha256;function requireSha256(){return hasRequiredSha256||(hasRequiredSha256=1,function(n,r){(function(g,_){n.exports=_(requireCore())})(sha256$1,function(g){return function(_){var x=g,S=x.lib,E=S.WordArray,C=S.Hasher,T=x.algo,R=[],A=[];(function(){function D(L){for(var F=_.sqrt(L),U=2;U<=F;U++)if(!(L%U))return!1;return!0}function N(L){return(L-(L|0))*4294967296|0}for(var M=2,O=0;O<64;)D(M)&&(O<8&&(R[O]=N(_.pow(M,1/2))),A[O]=N(_.pow(M,1/3)),O++),M++})();var I=[],B=T.SHA256=C.extend({_doReset:function(){this._hash=new E.init(R.slice(0))},_doProcessBlock:function(D,N){for(var M=this._hash.words,O=M[0],L=M[1],F=M[2],U=M[3],j=M[4],z=M[5],W=M[6],X=M[7],ie=0;ie<64;ie++){if(ie<16)I[ie]=D[N+ie]|0;else{var fe=I[ie-15],xe=(fe<<25|fe>>>7)^(fe<<14|fe>>>18)^fe>>>3,we=I[ie-2],G=(we<<15|we>>>17)^(we<<13|we>>>19)^we>>>10;I[ie]=xe+I[ie-7]+G+I[ie-16]}var J=j&z^~j&W,q=O&L^O&F^L&F,H=(O<<30|O>>>2)^(O<<19|O>>>13)^(O<<10|O>>>22),ve=(j<<26|j>>>6)^(j<<21|j>>>11)^(j<<7|j>>>25),Z=X+ve+J+A[ie]+I[ie],ce=H+q;X=W,W=z,z=j,j=U+Z|0,U=F,F=L,L=O,O=Z+ce|0}M[0]=M[0]+O|0,M[1]=M[1]+L|0,M[2]=M[2]+F|0,M[3]=M[3]+U|0,M[4]=M[4]+j|0,M[5]=M[5]+z|0,M[6]=M[6]+W|0,M[7]=M[7]+X|0},_doFinalize:function(){var D=this._data,N=D.words,M=this._nDataBytes*8,O=D.sigBytes*8;return N[O>>>5]|=128<<24-O%32,N[(O+64>>>9<<4)+14]=_.floor(M/4294967296),N[(O+64>>>9<<4)+15]=M,D.sigBytes=N.length*4,this._process(),this._hash},clone:function(){var D=C.clone.call(this);return D._hash=this._hash.clone(),D}});x.SHA256=C._createHelper(B),x.HmacSHA256=C._createHmacHelper(B)}(Math),g.SHA256})}(sha256$2)),sha256$2.exports}var sha256Exports=requireSha256();const sha256=getDefaultExportFromCjs(sha256Exports);var lib$1={},hasRequiredLib$1;function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,Object.defineProperty(lib$1,"__esModule",{value:!0}),lib$1.TypedEmitter=requireEvents().EventEmitter),lib$1}var libExports=requireLib$1();class CacheSuivi{verrou;_cacheSuivi;_cacheRecherche;constructor(){this.verrou=new s$2,this._cacheSuivi={},this._cacheRecherche={}}async suivre({adresseFonction:r,idClient:g,fOriginale:_,args:x,ceciOriginal:S}){const E=Object.entries(x).find(B=>typeof B[1]=="function")?.[0];if(!E)throw new Error("Aucun argument n'est une fonction.");const C=x[E],T=Object.fromEntries(Object.entries(x).filter(B=>typeof B[1]!="function"));if(Object.keys(x).length!==Object.keys(T).length+1)throw new Error("Plus d'un argument pour "+r+" est une fonction : "+JSON.stringify(x));const R=this.générerCodeCache({adresseFonction:r,idClient:g,argsClefs:T}),A=v4$3();if(await this.verrou.acquire(R),this._cacheSuivi[R])this.verrou.release(R),this._cacheSuivi[R].requêtes[A]=C,Object.keys(this._cacheSuivi[R]).includes("val")&&await C(this._cacheSuivi[R].val);else{this._cacheSuivi[R]={requêtes:{[A]:C}};const B=async M=>{if(!this._cacheSuivi[R]||Object.keys(this._cacheSuivi[R]).includes("val")&&deepEqual$2(this._cacheSuivi[R].val,M,{strict:!0}))return;this._cacheSuivi[R].val=M;const O=Object.values(this._cacheSuivi[R].requêtes);await Promise.all(O.map(L=>L(M)))},D={...T,[E]:B},N=await _.apply(S,[D]);this._cacheSuivi[R].fOublier=N,this.verrou.release(R)}return async()=>{await this.oublierSuivi({codeCache:R,idRequête:A})}}async suivreRecherche({adresseFonction:r,nomArgTaille:g,idClient:_,fOriginale:x,args:S,ceciOriginal:E,par:C}){const T=Object.entries(S).find(F=>typeof F[1]=="function")?.[0];if(!T)throw new Error("Aucun argument n'est une fonction.");const R=S[T],A=Object.fromEntries(Object.entries(S).filter(F=>typeof F[1]!="function"));if(Object.keys(S).length!==Object.keys(A).length+1)throw new Error("Plus d'un argument pour "+r+" est une fonction : "+JSON.stringify(S));const I=Object.fromEntries(Object.entries(S).filter(F=>F[0]!==g));let B=S[g];if(B===void 0&&(B=1/0),typeof B!="number")throw new Error(`Argument ${g} n'est pas un nombre dans la fonction ${r}.`);const D=this.générerCodeCache({adresseFonction:r,idClient:_,argsClefs:I}),N=v4$3();await this.verrou.acquire(D);const M=F=>{if(!this._cacheRecherche[D])return;this._cacheRecherche[D].val=F;const U=Object.values(this._cacheRecherche[D].requêtes);C==="profondeur"?U.forEach(j=>j.f(F.filter(z=>z.profondeur<=j.taille))):U.forEach(j=>j.f(F.slice(0,j.taille)))};if(this._cacheRecherche[D]){if(this._cacheRecherche[D].requêtes[N]={f:R,taille:B},Object.keys(this._cacheRecherche[D]).includes("val")){const{val:F}=this._cacheRecherche[D];F&&M(F)}}else{this._cacheRecherche[D]={requêtes:{[N]:{f:R,taille:B}},taillePrésente:B};const F={...I,[T]:M,[g]:B};if(C==="profondeur"){const{fOublier:U,fChangerProfondeur:j}=await x.apply(E,[F]);this._cacheRecherche[D].fs={fOublier:U,fChangerTaille:j}}else{const{fOublier:U,fChangerN:j}=await x.apply(E,[F]);this._cacheRecherche[D].fs={fOublier:U,fChangerTaille:j}}}const O=async()=>{await this.oublierRecherche({codeCache:D,idRequête:N})},L=F=>{const U=this._cacheRecherche[D].requêtes[N].taille;if(F===U)return;this._cacheRecherche[D].requêtes[N].taille=F;const{val:j}=this._cacheRecherche[D];j&&M(j);const z=Math.max(...Object.values(this._cacheRecherche[D].requêtes).map(ie=>ie.taille)),{taillePrésente:W}=this._cacheRecherche[D],{fChangerTaille:X}=this._cacheRecherche[D].fs;z!==W&&(this._cacheRecherche[D].taillePrésente=z,X(z))};return this.verrou.release(D),{fOublier:O,[C==="profondeur"?"fChangerProfondeur":"fChangerN"]:L}}async oublierSuivi({codeCache:r,idRequête:g}){if(await this.verrou.acquire(r),this._cacheSuivi[r]===void 0)return;const{requêtes:_,fOublier:x}=this._cacheSuivi[r];delete _[g],Object.keys(_).length||(await x?.(),delete this._cacheSuivi[r]),this.verrou.release(r)}async oublierRecherche({codeCache:r,idRequête:g}){if(await this.verrou.acquire(r),this._cacheRecherche[r]===void 0)return;const{requêtes:_,fs:x}=this._cacheRecherche[r];delete _[g],Object.keys(_).length||(await x?.fOublier(),delete this._cacheRecherche[r]),this.verrou.release(r)}générerCodeCache({adresseFonction:r,idClient:g,argsClefs:_}){const x=r+"-"+g+"-"+JSON.stringify(_);return Base64.stringify(md5(x))}}const cacheSuivi=(n,r,g)=>envelopper({nom:r,descripteur:g}),cacheRechercheParNRésultats=(n,r,g)=>envelopper({nom:r,descripteur:g,recherche:"nRésultats"}),cacheRechercheParProfondeur=(n,r,g)=>envelopper({nom:r,descripteur:g,recherche:"profondeur"}),envelopper=({nom:n,descripteur:r,recherche:g,nomArgTaille:_})=>{const x=r.value;if(typeof x=="function")r.value=function(...S){if(S.length>1)throw new Error("Args trop longs");const E=this.client?this.client:this;try{return g?(_=_||(g==="profondeur"?"profondeur":"nRésultatsDésirés"),cache$1.suivreRecherche({adresseFonction:this.constructor.name+"."+n,idClient:E.idCompte,fOriginale:x,args:S[0],ceciOriginal:this,par:g,nomArgTaille:_})):cache$1.suivre({adresseFonction:this.constructor.name+"."+n,idClient:E.idCompte,fOriginale:x,args:S[0],ceciOriginal:this})}catch(C){throw console.error(`Erreur: ${C}`),C}};else throw new Error("L'objet décoré n'est pas une fonction");return r},cache$1=new CacheSuivi;class ComposanteClient{client;clef;typeBd;constructor({client:r,clef:g,typeBd:_}){this.client=r,this.clef=g,this.typeBd=_}async obtIdBd(){const{idCompte:r}=await this.client.attendreInitialisée(),g=await this.client.obtIdBd({nom:this.clef,racine:r,type:this.typeBd});if(!g)throw new Error("Mal initialisé");return g}}class ComposanteClientDic extends ComposanteClient{schémaBdPrincipale;constructor({client:r,clef:g,schémaBdPrincipale:_}){super({client:r,clef:g,typeBd:"keyvalue"}),this.schémaBdPrincipale=_}async obtBd(){const r=await this.obtIdBd();return await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:this.schémaBdPrincipale})}async suivreBdPrincipale({idCompte:r,f:g}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:_})=>await this.suivreIdBd({f:_,idCompte:r}),f:ignorerNonDéfinis$1(g),fSuivre:async({id:_,fSuivreBd:x})=>await this.client.suivreBdDic({id:_,schéma:this.schémaBdPrincipale,f:x})})}async suivreSousBdDic({idCompte:r,clef:g,schéma:_,f:x}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:S})=>await this.suivreIdBd({f:S,idCompte:r}),f:ignorerNonDéfinis$1(x),fSuivre:async({id:S,fSuivreBd:E})=>await this.client.suivreBdDicDeClef({id:S,clef:g,schéma:_,f:E})})}async suivreSousBdListe({idCompte:r,clef:g,schéma:_,f:x}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:S})=>await this.suivreIdBd({f:S,idCompte:r}),f:ignorerNonDéfinis$1(x),fSuivre:async({id:S,fSuivreBd:E})=>await this.client.suivreBdListeDeClef({id:S,clef:g,f:E,schéma:_,renvoyerValeur:!0})})}async suivreIdBd({f:r,idCompte:g}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:_})=>g?(await _(g),faisRien$1):await this.client.suivreIdCompte({f:_}),f:ignorerNonDéfinis$1(r),fSuivre:async({id:_,fSuivreBd:x})=>await this.client.suivreBd({id:_,type:"keyvalue",f:async S=>{const E=await this.client.obtIdBd({nom:this.clef,racine:S,type:"keyvalue"});return await x(E)}})})}}__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreBdPrincipale",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreSousBdDic",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreSousBdListe",null);__decorate([cacheSuivi],ComposanteClientDic.prototype,"suivreIdBd",null);class ComposanteClientListe extends ComposanteClient{schémaBdPrincipale;constructor({client:r,clef:g,schémaBdPrincipale:_}){super({client:r,clef:g,typeBd:"set"}),this.schémaBdPrincipale=_}async obtBd(){const r=await this.obtIdBd();return await this.client.ouvrirBdTypée({id:r,type:"set",schéma:this.schémaBdPrincipale})}async suivreBdPrincipale({idCompte:r,f:g}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:_})=>await this.suivreIdBd({f:_,idCompte:r}),f:ignorerNonDéfinis$1(g),fSuivre:async({id:_,fSuivreBd:x})=>await this.client.suivreBdListe({id:_,f:x,schéma:this.schémaBdPrincipale,renvoyerValeur:!0})})}async suivreIdBd({f:r,idCompte:g}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:_})=>g?(await _(g),faisRien$1):await this.client.suivreIdCompte({f:_}),f:ignorerNonDéfinis$1(r),fSuivre:async({id:_,fSuivreBd:x})=>await this.client.suivreBd({id:_,type:"keyvalue",schéma:schémaStructureBdCompte,f:async()=>{const S=await this.client.obtIdBd({nom:this.clef,racine:_,type:"set"});return await x(S)}})})}}__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreBdPrincipale",null);__decorate([cacheSuivi],ComposanteClientListe.prototype,"suivreIdBd",null);const copieProfonde=n=>JSON.parse(JSON.stringify(n)),estUnDic=n=>typeof n=="object"&&!Array.isArray(n),estUneListe=n=>Array.isArray(n),extraireBranches=(n,r)=>{let g;if(!r.length)return g=estUnDic(n)?Object.values(n):n,{base:{},branches:g};const _=extraireDonnées(n,r.slice(0,r.length-1)),x=r[r.length-1];let S;if(typeof x=="number")if(estUneListe(_)){const E=_[x];if(typeof E!="object")throw new Error(E.toString());S=E,delete _[x]}else throw new Error(`${x} ne peut pas indexer une liste.`);else if(typeof x=="string")if(estUnDic(_)){const E=_[x];if(typeof E!="object")throw new Error(E.toString());S=E,delete _[x]}else throw new Error(`${x} ne peut pas indexer un objet.`);else throw new Error(`${x} n'est pas une clef valide.`);if(estUnDic(S))g=Object.values(S);else if(estUneListe(S))g=S;else throw Error(JSON.stringify(S));return{base:n,branches:g}},injecterBranche=(n,r,g)=>{if(!r.length)Object.assign(n,g);else{const _=r.slice(1,r.length),x=extraireDonnées(n,_),S=r[r.length-1];if(typeof S=="number")if(estUneListe(x))x[S]=g;else throw new Error(`${S} ne peut pas indexer une liste.`);else if(typeof S=="string")if(estUnDic(x))x[S]=g;else throw new Error(`${S} ne peut pas indexer un objet.`);else throw new Error(`${S} n'est pas une clef valide.`)}},aplatirDonnées=(n,r=[],g,_=[])=>{r[r.length-1]!==-1&&r.push(-1);const x=r.indexOf(-1),S=r.slice(0,x),E=r.slice(x+1,r.length),{base:C,branches:T}=extraireBranches(n,S);for(const R of T){if(typeof R!="object")throw new Error(R.toString());const A=copieProfonde(C);injecterBranche(A,S,R),E.length?aplatirDonnées(R,E,A,_):_.push(A)}return _},extraireDonnées=(n,r)=>{let g=n;for(const _ of r)if(typeof _=="number")if(estUneListe(g))g=g[_];else throw new Error(`${_} ne peut pas indexer une liste.`);else if(typeof _=="string")if(estUnDic(g))g=g[_];else throw new Error(`${_} ne peut pas indexer un objet.`);else throw new Error(`Clef de type non indexable : ${_}`);return g};class ImportateurDonnéesJSON{donnéesJSON;constructor(r){this.donnéesJSON=r}obtDonnées(r,g,_){let x=[],S=extraireDonnées(this.donnéesJSON,r);if(typeof S!="object")throw new Error(`Type de données erroné : ${S.toString()}`);S=aplatirDonnées(S,g);for(const E of S){if(typeof E!="object")throw new Error(`Élément de type non supporté : ${E}`);x=[Object.fromEntries(Object.keys(_).map(T=>{const R=_[T];let A;try{A=extraireDonnées(E,R)}catch{A=void 0}return[T,A]}).filter(T=>T[1]!==void 0)),...x]}return x}}class ImportateurFeuilleCalcul{doc;constructor(r){this.doc=r}obtNomsTableaux(){return this.doc.SheetNames}obtColsTableau(r){const g=this.doc.Sheets[r];return(utils$5.sheet_to_json(g,{header:1})[0]||[]).map(x=>x.toString())}obtDonnées(r,g){const _=this.doc.Sheets[r],x=utils$5.sheet_to_json(_);if(Array.isArray(g))return x.map(S=>Object.fromEntries(Object.keys(S).filter(E=>g.includes(E)).map(E=>[E,S[E]])));{const S=Object.fromEntries(Object.entries(g).map(([E,C])=>[C,E]));return x.map(E=>Object.fromEntries(Object.keys(E).filter(C=>Object.keys(S).includes(C)).map(C=>[S[C],E[C]])))}}}(isElectronMain||isNode)&&(__vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url).then(n=>set_fs(n)),__vitePreload(()=>import("./index-DYLFviSk.js").then(n=>n.i),[],import.meta.url).then(n=>__stream.set_readable(n.Readable)));const MESSAGE_NON_DISPO_NAVIGATEUR="L'automatisation de l'importation des fichiers locaux n'est pas disponible sur la version apli internet de Constellation.",schémaBdAutomatisations={type:"object",additionalProperties:{type:"object",anyOf:[{type:"object",properties:{type:{type:"string"},id:{type:"string"},fréquence:{type:"object",properties:{type:{type:"string"},détails:{type:"object",properties:{n:{type:"number"},unités:{type:"string"}},nullable:!0}}},idObjet:{type:"string"},typeObjet:{type:"string"},formatDoc:{type:"string"},dossier:{type:"string",nullable:!0},langues:{type:"array",items:{type:"string"},nullable:!0},dispositifs:{type:"array",items:{type:"string"}},inclureFichiersSFIP:{type:"boolean"},nRésultatsDésirésNuée:{type:"integer",nullable:!0}},required:["type","idObjet","typeObjet","formatDoc","dispositifs","fréquence","inclureFichiersSFIP"]},{type:"object",properties:{id:{type:"string"},fréquence:{type:"object",properties:{type:{type:"string"},détails:{type:"object",properties:{n:{type:"number"},unités:{type:"string"}},nullable:!0}}},idTableau:{type:"string"},dispositif:{type:"string"},source:{type:"object",properties:{typeSource:{type:"string"},adresseFichier:{type:"string",nullable:!0},info:{type:"object",additionalProperties:!0,required:[]}},required:["info","typeSource"]},conversions:{type:"object",nullable:!0,additionalProperties:!0,required:[]}},required:["id","idTableau","dispositif","source"]}],required:["id","type"]},required:[]},obtTempsInterval=n=>{const{n:r,unités:g}=n.détails;switch(g){case"années":return r*365.25*24*60*60*1e3;case"mois":return r*30*24*60*60*1e3;case"semaines":return r*7*24*60*60*1e3;case"jours":return r*24*60*60*1e3;case"heures":return r*60*60*1e3;case"minutes":return r*60*1e3;case"secondes":return r*1e3;case"millisecondes":return r;default:throw new Error(g)}},générerFExportation=(n,r)=>async()=>{const g=await __vitePreload(()=>import("./browser-BZ0F6oX7.js").then(A=>A.b),[],import.meta.url),_=await __vitePreload(()=>Promise.resolve().then(()=>index$1),void 0,import.meta.url),x=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url),S=n.dossier?await r.automatisations.résoudreAdressePrivéeFichier({clef:n.dossier}):_.join(g.homedir(),"constellation");if(!S)throw new Error("Dossier introuvable");let E;const C=A=>{const I=A.split(".");return`${I[0]}-${Date.now()}.${I[1]}`};switch(n.typeObjet){case"tableau":{const A=await r.tableaux.exporterDonnées({idTableau:n.idObjet,langues:n.langues});E=A.nomFichier,n.copies&&(E=C(E)),await r.bds.exporterDocumentDonnées({données:A,formatDoc:n.formatDoc,dossier:S,inclureFichiersSFIP:n.inclureFichiersSFIP});break}case"bd":{const A=await r.bds.exporterDonnées({idBd:n.idObjet,langues:n.langues});E=A.nomFichier,n.copies&&(E=C(E)),await r.bds.exporterDocumentDonnées({données:A,formatDoc:n.formatDoc,dossier:S,inclureFichiersSFIP:n.inclureFichiersSFIP});break}case"projet":{const A=await r.projets.exporterDonnées({idProjet:n.idObjet,langues:n.langues});E=A.nomFichier,n.copies&&(E=C(E)),await r.projets.exporterDocumentDonnées({données:A,formatDoc:n.formatDoc,dossier:S,inclureFichiersSFIP:n.inclureFichiersSFIP});break}case"nuée":{const A=await r.nuées.exporterDonnéesNuée({idNuée:n.idObjet,langues:n.langues,nRésultatsDésirés:n.nRésultatsDésirésNuée||1e3,héritage:n.héritage});E=A.nomFichier,n.copies&&(E=C(E)),await r.bds.exporterDocumentDonnées({données:A,formatDoc:n.formatDoc,dossier:S,inclureFichiersSFIP:n.inclureFichiersSFIP});break}default:throw new Error(n.typeObjet)}const T=x.readdirSync(S).filter(A=>{try{return x.statSync(A).isFile()&&R(_.basename(A),E)}catch{return!1}}),R=(A,I)=>{const B=A.split(".").pop()||"";return`${A.slice(0,-(B?.length+1)).split("-").slice(0,-1).join("")}.${B}`===I};if(n.copies){if(n.copies.type==="n"){const A=n.copies.n-T.length;A>0&&T.map(N=>({temps:new Date(x.statSync(N).mtime).valueOf(),fichier:N})).sort((N,M)=>N.temps>M.temps?1:-1).slice(A).map(N=>N.fichier).forEach(N=>x.rmSync(N))}else if(n.copies.type==="temps"){const A=Date.now(),{temps:I}=n.copies;T.filter(D=>{const N=new Date(x.statSync(D).mtime).valueOf();return A-N<obtTempsInterval(I)}).forEach(D=>x.rmSync(D))}}},générerFAuto=(n,r)=>{switch(n.type){case"importation":return async()=>{const g=async E=>await r.automatisations.résoudreAdressePrivéeFichier({clef:E})||void 0,_=await r.automatisations.obtDonnéesImportation(n,g),x=await __vitePreload(()=>Promise.resolve().then(()=>index$1),void 0,import.meta.url);let S;if(n.source.typeSource==="fichier"&&n.source.adresseFichier){const E=await g(n.source.adresseFichier);E&&(S=x.dirname(E))}await r.tableaux.importerDonnées({idTableau:n.idTableau,données:_,conversions:n.conversions,cheminBaseFichiers:S})};case"exportation":return générerFExportation(n,r);default:throw new Error(n)}},lancerAutomatisation=async({spéc:n,idSpéc:r,client:g,fÉtat:_})=>{const x=générerFAuto(n,g),S=`auto: ${r}`,E=n.fréquence?.type==="fixe"?obtTempsInterval(n.fréquence):void 0,C=new s$2;let T="";const R=await g.obtDeStockageLocal({clef:S}),A=new Set([R]),I=async D=>{if(A.has(D))return;if(T=D,await C.acquire("opération"),D!==T||A.has(D)){C.release("opération");return}await g.sauvegarderAuStockageLocal({clef:S,val:D}),A.add(D);const N={type:"sync",depuis:new Date().getTime()};_(N);try{if(await x(),E){const M={type:"programmée",à:Date.now()+E};_(M)}else _({type:"écoute"})}catch(M){const O={type:"erreur",erreur:JSON.stringify({nom:M.name,message:M.message,pile:M.stack,cause:M.cause},void 0,2),prochaineProgramméeÀ:E?Date.now()+E:void 0};_(O)}C.release("opération")},B=async()=>await I(v4$3());if(n.fréquence.type==="fixe"){_({type:"programmée",à:E});const N={},M=async()=>{const W=new Date().getTime();await I(W.toString());const X=setTimeout(M,E);N.f=async()=>clearTimeout(X)},O=new Date().getTime(),L=await g.obtDeStockageLocal({clef:S}),F=L?parseInt(L):-1/0,U=O-F,j=setTimeout(M,Math.max(E-U,0));return N.f=async()=>clearTimeout(j),{fOublier:async()=>{N.f&&await N.f()},fLancer:B}}else if(n.fréquence.type==="dynamique")switch(_({type:"écoute"}),n.type){case"exportation":return n.typeObjet==="nuée"?{fOublier:await g.nuées.suivreEmpreinteTêtesBdsNuée({idNuée:n.idObjet,f:I}),fLancer:B}:{fOublier:await g.suivreEmpreinteTêtesBdRécursive({idBd:n.idObjet,f:I}),fLancer:B};case"importation":switch(n.source.typeSource){case"fichier":{if(!isNode&&!isElectronMain)throw new Error(MESSAGE_NON_DISPO_NAVIGATEUR);const N=await __vitePreload(()=>import("chokidar"),[],import.meta.url),M=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url),{adresseFichier:O}=n.source,L=await g.automatisations.résoudreAdressePrivéeFichier({clef:O});if(!L||!M.existsSync(L))throw new Error(`Fichier ${O} introuvable.`);const F=N.watch(L);F.on("change",async()=>{const X=new Date().getTime().toString();I(X)});const U=M.statSync(L).mtime.getTime(),j=await g.obtDeStockageLocal({clef:S});if(j?U>parseInt(j):!0){const X=new Date().getTime().toString();I(X)}return{fOublier:async()=>await F.close(),fLancer:B}}case"url":return _({type:"erreur",erreur:"La fréquence d'une automatisation d'importation d'URL doit être spécifiée.",prochaineProgramméeÀ:void 0}),{fOublier:faisRien$1,fLancer:faisRien$1};default:throw new Error(n.source)}default:throw new Error(n)}else{if(n.fréquence.type==="manuelle")return{fOublier:faisRien$1,fLancer:B};throw new Error(n.fréquence)}};class AutomatisationActive extends eventsExports.EventEmitter{client;état;fOublier;fLancer;constructor(r,g,_){super(),this.client=_,lancerAutomatisation({spéc:r,idSpéc:g,client:this.client,fÉtat:x=>{this.état=x,this.emit("misÀJour")}}).then(({fOublier:x,fLancer:S})=>{this.fOublier=x,this.fLancer=S,this.emit("prêt")})}async relancer(){this.fOublier||await new Promise(r=>{this.once("prêt",()=>{r()})}),await this.fLancer?.()}async fermer(){this.fOublier||await new Promise(r=>{this.once("prêt",()=>{r()})}),await this.fOublier?.()}}const activePourCeDispositif=(n,r)=>{switch(n.type){case"importation":return n.dispositif===r;case"exportation":return n.dispositifs.includes(r);default:throw new Error(n)}},verrou=new s$2;class Automatisations extends ComposanteClientDic{automatisations;événements;fOublier;constructor({client:r}){super({client:r,clef:"automatisations",schémaBdPrincipale:schémaBdAutomatisations}),this.automatisations={},this.événements=new eventsExports.EventEmitter,this.initialiser()}async initialiser(){this.fOublier=await this.suivreBdPrincipale({f:r=>this.mettreAutosÀJour(Object.values(r))})}async mettreAutosÀJour(r){await verrou.acquire("miseÀJour");const g=Object.keys(this.automatisations);for(const x of g)r.find(S=>S.id===x)||await this.fermerAuto(x);const _=await this.client.obtIdDispositif();for(const x of r)if(activePourCeDispositif(x,_)){if(!Object.keys(this.automatisations).includes(x.id)){const S=new AutomatisationActive(x,x.id,this.client);S.on("misÀJour",()=>this.événements.emit("misÀJour")),this.automatisations[x.id]=S}}else this.automatisations[x.id]&&await this.fermerAuto(x.id);verrou.release("miseÀJour")}async obtDonnéesImportation(r,g=async _=>_){const{typeSource:_}=r.source,{formatDonnées:x}=r.source.info;switch(_){case"url":{const{url:S}=r.source;switch(x){case"json":{const{clefsRacine:E,clefsÉléments:C,cols:T}=r.source.info,R=await importerJSONdURL(S);return new ImportateurDonnéesJSON(R).obtDonnées(E,C,T)}case"feuilleCalcul":{const{nomTableau:E,cols:C,optionsXLSX:T}=r.source.info,R=await importerFeuilleCalculDURL(S,T);return new ImportateurFeuilleCalcul(R).obtDonnées(E,C)}default:throw new Error(x)}}case"fichier":{if(!isElectronMain&&!isNode)throw new Error(MESSAGE_NON_DISPO_NAVIGATEUR);const S=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url),{adresseFichier:E}=r.source,C=await g(E);if(!C||!S.existsSync(C))throw new Error(`Fichier ${C} introuvable.`);switch(x){case"json":{const{clefsRacine:T,clefsÉléments:R,cols:A}=r.source.info,I=await S.promises.readFile(C),B=JSON.parse(I.toString());return new ImportateurDonnéesJSON(B).obtDonnées(T,R,A)}case"feuilleCalcul":{const{nomTableau:T,cols:R}=r.source.info,A=readFileSync(C);return new ImportateurFeuilleCalcul(A).obtDonnées(T,R)}default:throw new Error(x)}}default:throw new Error(_)}}async ajouterAutomatisationExporter({id:r,typeObjet:g,formatDoc:_,inclureFichiersSFIP:x,dossier:S,langues:E,fréquence:C,dispositifs:T,nRésultatsDésirésNuée:R,héritage:A,copies:I}){const{orbite:B}=await this.client.attendreSfipEtOrbite();T=T||[B.identity.id];const D=v4$3(),N=await this.sauvegarderAdressePrivéeFichier({fichier:S}),M={type:"exportation",id:D,idObjet:r,typeObjet:g,dispositifs:T,fréquence:C,formatDoc:_,langues:E,inclureFichiersSFIP:x,dossier:N,nRésultatsDésirésNuée:R,héritage:A,copies:I};Object.keys(M).forEach(F=>{M[F]===void 0&&delete M[F]});const{bd:O,fOublier:L}=await this.obtBd();return await O.put(D,M),await L(),D}async ajouterAutomatisationImporter({idTableau:r,source:g,fréquence:_,dispositif:x}){const{bd:S,fOublier:E}=await this.obtBd(),{orbite:C}=await this.client.attendreSfipEtOrbite();x=x||C.identity.id;const T=v4$3();g.typeSource==="fichier"&&(g.adresseFichier=await this.sauvegarderAdressePrivéeFichier({fichier:g.adresseFichier}));const R={type:"importation",id:T,idTableau:r,dispositif:x,fréquence:_,source:g};return Object.keys(R).forEach(A=>{R[A]===void 0&&delete R[A]}),await S.put(T,R),await E(),T}async annulerAutomatisation({id:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.del(r),await _()}async résoudreAdressePrivéeFichier({clef:r}){return r?await this.client.obtDeStockageLocal({clef:r}):null}async sauvegarderAdressePrivéeFichier({fichier:r}){const g="dossier."+v4$3();return await this.client.sauvegarderAuStockageLocal({clef:g,val:r}),g}async suivreAutomatisations({f:r,idCompte:g}){const _=async x=>{const S=await Promise.all(Object.values(x).map(async E=>{const C=deepcopy(E);if(C.type==="importation"&&C.source.typeSource==="fichier"){const{adresseFichier:T}=C.source;if(T){const R=await this.résoudreAdressePrivéeFichier({clef:T});R?C.source.adresseFichier=R:delete C.source.adresseFichier}}else if(C.type==="exportation"){const{dossier:T}=C;if(T){const R=await this.résoudreAdressePrivéeFichier({clef:T});R?C.dossier=R:delete C.dossier}}return C}));await r(S)};return await this.suivreBdPrincipale({idCompte:g,f:_})}async suivreÉtatAutomatisations({f:r}){const g=async()=>{const _=Object.fromEntries(Object.keys(this.automatisations).map(x=>[x,this.automatisations[x].état]).filter(x=>x[1]));await r(_)};return this.événements.on("misÀJour",g),async()=>{this.événements.off("misÀJour",g)}}async lancerManuellement({id:r}){await this.automatisations[r]?.relancer()}async fermerAuto(r){await this.automatisations[r].fermer(),delete this.automatisations[r]}async fermer(){await Promise.all(Object.keys(this.automatisations).map(r=>{this.fermerAuto(r)})),await this.fOublier?.()}}function isAsyncIterable$5(n){return n[Symbol.asyncIterator]!=null}function toBuffer(n){if(isAsyncIterable$5(n))return(async()=>{let _=new Uint8Array(0);for await(const x of n)_=concat([_,x],_.length+x.length);return _})();const r=[];let g=0;for(const _ of n)r.push(_),g+=_.byteLength;return concat(r,g)}var FileSaver_min$1={exports:{}},FileSaver_min=FileSaver_min$1.exports,hasRequiredFileSaver_min;function requireFileSaver_min(){return hasRequiredFileSaver_min||(hasRequiredFileSaver_min=1,function(n,r){(function(g,_){_()})(FileSaver_min,function(){function g(R,A){return typeof A>"u"?A={autoBom:!1}:typeof A!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),A={autoBom:!A}),A.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(R.type)?new Blob(["\uFEFF",R],{type:R.type}):R}function _(R,A,I){var B=new XMLHttpRequest;B.open("GET",R),B.responseType="blob",B.onload=function(){T(B.response,A,I)},B.onerror=function(){console.error("could not download file")},B.send()}function x(R){var A=new XMLHttpRequest;A.open("HEAD",R,!1);try{A.send()}catch{}return 200<=A.status&&299>=A.status}function S(R){try{R.dispatchEvent(new MouseEvent("click"))}catch{var A=document.createEvent("MouseEvents");A.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),R.dispatchEvent(A)}}var E=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,C=E.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),T=E.saveAs||(typeof window!="object"||window!==E?function(){}:"download"in HTMLAnchorElement.prototype&&!C?function(R,A,I){var B=E.URL||E.webkitURL,D=document.createElement("a");A=A||R.name||"download",D.download=A,D.rel="noopener",typeof R=="string"?(D.href=R,D.origin===location.origin?S(D):x(D.href)?_(R,A,I):S(D,D.target="_blank")):(D.href=B.createObjectURL(R),setTimeout(function(){B.revokeObjectURL(D.href)},4e4),setTimeout(function(){S(D)},0))}:"msSaveOrOpenBlob"in navigator?function(R,A,I){if(A=A||R.name||"download",typeof R!="string")navigator.msSaveOrOpenBlob(g(R,I),A);else if(x(R))_(R,A,I);else{var B=document.createElement("a");B.href=R,B.target="_blank",setTimeout(function(){S(B)})}}:function(R,A,I,B){if(B=B||open("","_blank"),B&&(B.document.title=B.document.body.innerText="downloading..."),typeof R=="string")return _(R,A,I);var D=R.type==="application/octet-stream",N=/constructor/i.test(E.HTMLElement)||E.safari,M=/CriOS\/[\d]+/.test(navigator.userAgent);if((M||D&&N||C)&&typeof FileReader<"u"){var O=new FileReader;O.onloadend=function(){var U=O.result;U=M?U:U.replace(/^data:[^;]*;/,"data:attachment/file;"),B?B.location.href=U:location=U,B=null},O.readAsDataURL(R)}else{var L=E.URL||E.webkitURL,F=L.createObjectURL(R);B?B.location=F:location.href=F,B=null,setTimeout(function(){L.revokeObjectURL(F)},4e4)}});E.saveAs=T.saveAs=T,n.exports=T})}(FileSaver_min$1)),FileSaver_min$1.exports}var FileSaver_minExports=requireFileSaver_min();const pkg=getDefaultExportFromCjs(FileSaver_minExports),schémaStructureBdNoms={type:"object",additionalProperties:{type:"string"},required:[]},schémaStructureBdMétadonnées={type:"object",additionalProperties:!0,required:[]},effacerPropriétésNonDéfinies=n=>Object.fromEntries(Object.entries(n).filter(([r,g])=>g!==void 0)),TOUS="TOUS",INSTALLÉ="INSTALLÉ",résoudreDéfauts=(n,r)=>{const g=deepcopy(r);for(const[_,x]of Object.entries(n))typeof x=="string"||Array.isArray(x)?g[_]=x:g[_]=résoudreDéfauts(x,g[_]);return g},schémaTypeDispositif={type:["string","array"],anyOf:[{type:"string"},{type:"array",items:{type:"string"}}],nullable:!0},schémaÉpingleVariable={type:"object",properties:{type:{type:"string",const:"variable"},base:schémaTypeDispositif},required:["type"]},schémaÉpingleMotClef={type:"object",properties:{type:{type:"string",const:"motClef"},base:schémaTypeDispositif},required:["type"]},schémaÉpingleBd={type:"object",properties:{type:{type:"string",const:"bd"},base:schémaTypeDispositif,fichiersBase:schémaTypeDispositif,données:{type:"object",properties:{fichiers:schémaTypeDispositif,tableaux:schémaTypeDispositif},required:["fichiers","tableaux"]}},required:["type","base","fichiersBase","données"]},schémaÉpingleNuée={type:"object",properties:{type:{type:"string",const:"nuée"},base:schémaTypeDispositif,fichiersBase:schémaTypeDispositif,données:schémaÉpingleBd},required:["type","base","données","fichiersBase"]},schémaÉpingleProjet={type:"object",properties:{type:{type:"string",const:"projet"},base:schémaTypeDispositif,fichiersBase:schémaTypeDispositif,bds:schémaÉpingleBd},required:["type","base","fichiersBase","bds"]},schémaÉpingleProfil={type:"object",properties:{type:{type:"string",const:"profil"},base:schémaTypeDispositif,fichiers:schémaTypeDispositif},required:["type","base","fichiers"]},schémaÉpingleCompte={type:"object",properties:{type:{type:"string",const:"compte"},base:schémaTypeDispositif,profil:schémaÉpingleProfil,favoris:schémaTypeDispositif},required:["type","base","favoris","profil"]},schémaÉpingleFavoris={anyOf:[schémaÉpingleVariable,schémaÉpingleMotClef,schémaÉpingleBd,schémaÉpingleNuée,schémaÉpingleProjet,schémaÉpingleCompte,schémaÉpingleProfil]},schémaBdPrincipale$4={type:"object",additionalProperties:schémaÉpingleFavoris,required:[]};class Favoris extends ComposanteClientDic{_promesseInit;oublierÉpingler;constructor({client:r}){super({client:r,clef:"favoris",schémaBdPrincipale:schémaBdPrincipale$4}),this._promesseInit=this._épinglerFavoris()}async suivreRésolutionÉpingle({épingle:r,f:g,ignorer:_}){if(_=_||new Set,_.has(r.idObjet))return faisRien$1;switch(_.add(r.idObjet),r.épingle.type){case"motClef":return await this.client.motsClefs.suivreRésolutionÉpingle({épingle:r,f:g});case"variable":return await this.client.variables.suivreRésolutionÉpingle({épingle:r,f:g});case"bd":return await this.client.bds.suivreRésolutionÉpingle({épingle:r,f:g});case"projet":return await this.client.projets.suivreRésolutionÉpingle({épingle:r,f:g});case"nuée":return await this.client.nuées.suivreRésolutionÉpingle({épingle:r,f:g});case"compte":return await this.client.suivreRésolutionÉpingle({épingle:r,f:g,ignorer:_});default:throw new Error(String(r))}}async _épinglerFavoris(){const E=await suivreBdsDeFonctionListe$1({fListe:async C=>await this.suivreBdPrincipale({f:T=>C(Object.entries(T).map(([R,A])=>({idObjet:R,épingle:A})))}),f:async C=>await this.client.épingles.épingler({idRequête:"favoris",épingles:new Set(C.map(T=>T.épingles).flat())}),fBranche:async(C,T,R)=>await this.suivreRésolutionÉpingle({épingle:R,f:T}),fIdBdDeBranche:C=>C.idObjet,fCode:C=>C.idObjet});this.oublierÉpingler=E}async suivreFavoris({f:r,idCompte:g}){const _=async x=>{const S=Object.entries(x).map(([E,C])=>({idObjet:E,épingle:C}));await r(S)};return await this.suivreBdPrincipale({idCompte:g,f:_})}async épinglerFavori({idObjet:r,épingle:g}){const{bd:_,fOublier:x}=await this.obtBd(),S=effacerPropriétésNonDéfinies(g),E=_.get(r);deepEqual$2(E,S)||await _.put(r,S),await x()}async désépinglerFavori({idObjet:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.del(r),await _()}async suivreÉtatFavori({idObjet:r,f:g,idCompte:_}){return await this.suivreBdPrincipale({f:x=>g(x[r]),idCompte:_})}async suivreEstÉpingléSurDispositif({idObjet:r,f:g}){return await this.suivreBdPrincipale({f:async _=>g(await this.résoudreÉpinglesSurDispositif({épingle:_[r]}))})}async résoudreÉpinglesSurDispositif({épingle:r,idDispositif:g}){return Object.fromEntries(await Promise.all(Object.entries(r).filter(([x,S])=>x!=="type").map(async([x,S])=>Array.isArray(S)||typeof S=="string"?[x,await this.estÉpingléSurDispositif({dispositifs:S,idDispositif:g})]:[x,await this.résoudreÉpinglesSurDispositif({épingle:S,idDispositif:g})])))}async estÉpingléSurDispositif({dispositifs:r,idDispositif:g}){const _=await this.client.obtIdDispositif();return g=g||_,r==="AUCUN"?!1:r==="TOUS"?!0:r==="INSTALLÉ"?g===_?isNode||isElectronMain:!1:typeof r=="string"?r===g:r.includes(g)}async fermer(){await this._promesseInit,this.oublierÉpingler&&await this.oublierÉpingler()}}__decorate([cacheSuivi],Favoris.prototype,"suivreFavoris",null);__decorate([cacheSuivi],Favoris.prototype,"suivreÉtatFavori",null);__decorate([cacheSuivi],Favoris.prototype,"suivreEstÉpingléSurDispositif",null);const{saveAs:saveAs$1}=pkg,schémaStructureBdBd={type:"object",properties:{type:{type:"string"},métadonnées:{type:"string",nullable:!0},licence:{type:"string"},licenceContenu:{type:"string",nullable:!0},image:{type:"string",nullable:!0},noms:{type:"string"},descriptions:{type:"string"},tableaux:{type:"string"},motsClefs:{type:"string"},nuées:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiéDe:{type:"object",properties:{id:{type:"string"}},required:["id"],nullable:!0}},required:["type","licence","noms","descriptions","tableaux","motsClefs","nuées","statut"]},schémaInfoTableau={type:"object",properties:{clef:{type:"string"}},required:["clef"]},schémaBdTableauxDeBd={type:"object",additionalProperties:schémaInfoTableau,required:[]},schémaBdPrincipale$3={type:"string"},schémaStructureBdMotsClefs={type:"string"},schémaStructureBdNuées={type:"string"},MAX_TAILLE_IMAGE$4=500*1e3,MAX_TAILLE_IMAGE_VIS$3=1500*1e3;class BDs extends ComposanteClientListe{verrouBdUnique;constructor({client:r}){super({client:r,clef:"bds",schémaBdPrincipale:schémaBdPrincipale$3}),this.verrouBdUnique=new s$2}async suivreRésolutionÉpingle({épingle:r,f:g}){const _=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.base||"TOUS"}),x=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.fichiersBase||"INSTALLÉ"}),S=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.données?.tableaux||"TOUS"}),E=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.données?.fichiers||"INSTALLÉ"}),C={},T=async()=>await g(new Set(Object.values(C).flat().filter(A=>!!A))),R=[];if(_||x){const A=await this.client.suivreBd({id:r.idObjet,type:"keyvalue",schéma:schémaStructureBdBd,f:async I=>{try{const B=await I.allAsJSON();_&&(C.base=[r.idObjet,B.descriptions,B.noms,B.tableaux,B.motsClefs,B.nuées,B.métadonnées]),x&&(C.fichiersBase=[B.image])}catch{return}await T()}});R.push(A)}if(S){const A=await this.suivreTableauxBd({idBd:r.idObjet,f:async I=>{C.données=I.map(B=>B.id),await T()}});R.push(A)}if(E){const A=await suivreBdsDeFonctionListe$1({fListe:async I=>await this.suivreTableauxBd({idBd:r.idObjet,f:B=>I(B.map(D=>D.id))}),fBranche:async(I,B)=>await this.client.tableaux.suivreDonnées({idTableau:I,f:B}),f:I=>{const B=I.map(D=>Object.values(D.données).filter(N=>idcValide(N))).flat();C.fichiersDonnées=B}});R.push(A)}return async()=>{await Promise.all(R.map(A=>A()))}}async suivreBds({f:r,idCompte:g}){return await this.suivreBdPrincipale({idCompte:g,f:r})}async créerBd({licence:r,licenceContenu:g,épingler:_=!0}){const x=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}});_&&await this.épinglerBd({idBd:x});const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdBd});await S.set("type","bd"),await S.set("licence",r),g&&await S.set("licenceContenu",g);const T={address:S.access.address},R=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:T});await S.set("métadonnées",R);const A=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:T});await S.set("noms",A);const I=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:T});await S.set("descriptions",I);const B=await this.client.créerBdIndépendante({type:"ordered-keyvalue",optionsAccès:T});await S.set("tableaux",B);const D=await this.client.créerBdIndépendante({type:"set",optionsAccès:T});await S.set("motsClefs",D);const N=await this.client.créerBdIndépendante({type:"set",optionsAccès:T});await S.set("nuées",N),await S.set("statut",{statut:"active"});const{bd:M,fOublier:O}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:schémaBdPrincipale$3});return await M.add(x),O(),await E(),x}async ajouterÀMesBds({idBd:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:schémaBdPrincipale$3});await g.add(r),await _()}async enleverDeMesBds({idBd:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:schémaBdPrincipale$3});await g.del(r),await _()}async épinglerBd({idBd:r,options:g={}}){const _=résoudreDéfauts(g,{type:"bd",base:TOUS,fichiersBase:INSTALLÉ,données:{tableaux:TOUS,fichiers:INSTALLÉ}});await this.client.favoris.épinglerFavori({idObjet:r,épingle:_})}async suivreÉpingleBd({idBd:r,f:g,idCompte:_}){return await this.client.favoris.suivreÉtatFavori({idObjet:r,f:async x=>{x?.type==="bd"?await g(x):await g(void 0)},idCompte:_})}async copierBd({idBd:r,copierDonnées:g=!0}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd}),S=await _.get("licence"),E=await _.get("licenceContenu");if(!S)throw new Error(`Aucune licence trouvée sur la BD source ${r}.`);const C=await this.créerBd({licence:S,licenceContenu:E}),{bd:T,fOublier:R}=await this.client.ouvrirBdTypée({id:C,type:"keyvalue",schéma:schémaStructureBdBd}),A=await _.get("métadonnées");if(A){const{bd:z,fOublier:W}=await this.client.ouvrirBdTypée({id:A,type:"keyvalue",schéma:schémaStructureBdMétadonnées}),X=await z.allAsJSON();await W(),await this.sauvegarderMétadonnéesBd({idBd:C,métadonnées:X})}const I=await _.get("noms");if(I){const{bd:z,fOublier:W}=await this.client.ouvrirBdTypée({id:I,type:"keyvalue",schéma:schémaStructureBdNoms}),X=await z.allAsJSON();await W(),await this.sauvegarderNomsBd({idBd:C,noms:X})}const B=await _.get("descriptions");if(B){const{bd:z,fOublier:W}=await this.client.ouvrirBdTypée({id:B,type:"keyvalue",schéma:schémaStructureBdNoms}),X=await z.allAsJSON();await W(),await this.sauvegarderDescriptionsBd({idBd:C,descriptions:X})}const D=await _.get("motsClefs");if(D){const{bd:z,fOublier:W}=await this.client.ouvrirBdTypée({id:D,type:"set",schéma:schémaStructureBdMotsClefs}),X=(await z.all()).map(ie=>ie.value);await W(),await this.ajouterMotsClefsBd({idBd:C,idsMotsClefs:X})}const N=await _.get("nuées");if(N){const{bd:z,fOublier:W}=await this.client.ouvrirBdTypée({id:N,type:"set",schéma:schémaStructureBdNuées}),X=(await z.all()).map(ie=>ie.value);await W(),await this.rejoindreNuées({idBd:C,idsNuées:X})}const M=await _.get("tableaux"),O=await T.get("tableaux");if(!O)throw new Error("Erreur d'initialisation.");const{bd:L,fOublier:F}=await this.client.ouvrirBdTypée({id:O,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd});if(M){const{bd:z,fOublier:W}=await this.client.ouvrirBdTypée({id:M,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd}),X=await z.all();await W();for(const{key:ie,value:fe}of X){const xe=await this.client.tableaux.copierTableau({id:ie,idBd:C,copierDonnées:g});await L.set(xe,fe)}}const U=await _.get("statut")||{statut:"active"};await T.set("statut",U);const j=await _.get("image");return j&&await T.set("image",j),await T.set("copiéDe",{id:r}),await Promise.all([x(),F(),R()]),C}async créerBdDeSchéma({schéma:r}){const{tableaux:g,motsClefs:_,nuées:x,licence:S,licenceContenu:E,statut:C}=r,T=await this.créerBd({licence:S,licenceContenu:E});_&&await this.ajouterMotsClefsBd({idBd:T,idsMotsClefs:_}),x&&await this.rejoindreNuées({idBd:T,idsNuées:x}),C&&await this.changerStatutBd({idBd:T,statut:C});for(const R of g){const{cols:A,clef:I}=R,B=await this.ajouterTableauBd({idBd:T,clefTableau:I});for(const D of A){const{idColonne:N,idVariable:M,index:O,optionnelle:L}=D;if(await this.client.tableaux.ajouterColonneTableau({idTableau:B,idVariable:M,idColonne:N}),O&&await this.client.tableaux.changerColIndex({idTableau:B,idColonne:N,val:!0}),!L){const F={typeRègle:"existe",détails:{}};await this.client.tableaux.ajouterRègleTableau({idTableau:B,idColonne:N,règle:F})}}}return T}async suivreParent({idBd:r,f:g}){return await this.client.suivreBd({id:r,f:async _=>{const x=await _.get("copiéDe");await g(x)},type:"keyvalue",schéma:schémaStructureBdBd})}async suivreNuéesBd({idBd:r,f:g}){return await this.client.suivreBdListeDeClef({id:r,clef:"nuées",schéma:{type:"string"},f:g})}async rechercherBdsParMotsClefs({motsClefs:r,f:g,idCompte:_}){const x=async E=>await this.suivreBds({f:E,idCompte:_}),S=async(E,C)=>{const T=R=>{const A=r.every(I=>R.includes(I));C(A)};return await this.suivreMotsClefsBd({idBd:E,f:T})};return await this.client.suivreBdsSelonCondition({fListe:x,fCondition:S,f:g})}async rechercherBdsParNuée({idNuée:r,f:g,idCompte:_}){const x=async E=>await this.suivreBds({f:E,idCompte:_}),S=async(E,C)=>{const T=async R=>{C(!!R&&R.includes(r))};return await this.suivreNuéesBd({idBd:E,f:T})};return await this.client.suivreBdsSelonCondition({fListe:x,fCondition:S,f:g})}async combinerBds({idBdBase:r,idBd2:g}){const _=async E=>await uneFois$2(async C=>await this.suivreTableauxBd({idBd:E,f:C}),attendreStabilité$1(1e3)),x=await _(r),S=await _(g);for(const E of S){const{id:C,clef:T}=E;if(T){const R=x.find(A=>A.clef===T)?.id;R&&await this.client.tableaux.combinerDonnées({idTableauBase:R,idTableau2:C})}}}async suivreIdTableauParClef({idBd:r,clef:g,f:_}){const x=async S=>{const E=S.find(C=>C.clef===g);await _(E?.id)};return await this.suivreTableauxBd({idBd:r,f:x})}async suivreBdUnique({schéma:r,idNuéeUnique:g,f:_}){const x="bdUnique: "+g,S=new Set,E=async T=>{let R;await this.verrouBdUnique.acquire(g);const A=await this.client.obtDeStockageLocal({clef:x});switch(T.length){case 0:{A?R=A:(R=await this.créerBdDeSchéma({schéma:r}),await this.client.sauvegarderAuStockageLocal({clef:x,val:R}));break}case 1:{R=T[0],await this.client.sauvegarderAuStockageLocal({clef:x,val:R}),A&&R!==A&&(await this.combinerBds({idBdBase:R,idBd2:A}),await this.effacerBd({idBd:A}));break}default:{A&&(T=[...new Set([...T,A])]),R=T.sort()[0],await this.client.sauvegarderAuStockageLocal({clef:x,val:R});for(const I of T.slice(1))S.has(I)||(S.add(I),await this.combinerBds({idBdBase:R,idBd2:I}),await this.effacerBd({idBd:I}));break}}this.verrouBdUnique.release(g),await _(R)};return await this.rechercherBdsParNuée({idNuée:g,f:E})}async suivreIdTableauParClefDeBdUnique({schémaBd:r,idNuéeUnique:g,clefTableau:_,f:x}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:C})=>await this.suivreBdUnique({schéma:r,idNuéeUnique:g,f:C}),f:x,fSuivre:async({id:C,fSuivreBd:T})=>await this.suivreIdTableauParClef({idBd:C,clef:_,f:T})})}async suivreDonnéesDeTableauUnique({schémaBd:r,idNuéeUnique:g,clefTableau:_,f:x}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:T})=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:r,idNuéeUnique:g,clefTableau:_,f:async R=>{R&&await T(R)}}),f:async T=>await x(T||[]),fSuivre:async({id:T,fSuivreBd:R})=>await this.client.tableaux.suivreDonnées({idTableau:T,f:R})})}async ajouterÉlémentÀTableauUnique({schémaBd:r,idNuéeUnique:g,clefTableau:_,vals:x}){const S=await uneFois$2(async E=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:r,idNuéeUnique:g,clefTableau:_,f:ignorerNonDéfinis$1(E)}));return await this.client.tableaux.ajouterÉlément({idTableau:S,vals:x})}async modifierÉlémentDeTableauUnique({vals:r,schémaBd:g,idNuéeUnique:_,clefTableau:x,idÉlément:S}){const E=await uneFois$2(async C=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:g,idNuéeUnique:_,clefTableau:x,f:T=>{T&&C(T)}}),C=>!!C);return await this.client.tableaux.modifierÉlément({idTableau:E,vals:r,idÉlément:S})}async effacerÉlémentDeTableauUnique({schémaBd:r,idNuéeUnique:g,clefTableau:_,idÉlément:x}){const S=await uneFois$2(async E=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:r,idNuéeUnique:g,clefTableau:_,f:C=>{C&&E(C)}}),E=>!!E);return await this.client.tableaux.effacerÉlément({idTableau:S,idÉlément:x})}async suivreDonnéesDeTableauParClef({idBd:r,clefTableau:g,f:_}){const x=await uneFois$2(async S=>await this.suivreIdTableauParClef({idBd:r,clef:g,f:ignorerNonDéfinis$1(S)}),S=>!!S);return await this.client.tableaux.suivreDonnées({idTableau:x,f:_})}async ajouterÉlémentÀTableauParClef({idBd:r,clefTableau:g,vals:_}){const x=await uneFois$2(async S=>await this.suivreIdTableauParClef({idBd:r,clef:g,f:ignorerNonDéfinis$1(S)}));return await this.client.tableaux.ajouterÉlément({idTableau:x,vals:_})}async modifierÉlémentDeTableauParClef({idBd:r,clefTableau:g,idÉlément:_,vals:x}){const S=await uneFois$2(async E=>await this.suivreIdTableauParClef({idBd:r,clef:g,f:ignorerNonDéfinis$1(E)}));return await this.client.tableaux.modifierÉlément({idTableau:S,vals:x,idÉlément:_})}async effacerÉlémentDeTableauParClef({idBd:r,clefTableau:g,idÉlément:_}){const x=await uneFois$2(async S=>await this.suivreIdTableauParClef({idBd:r,clef:g,f:ignorerNonDéfinis$1(S)}));this.client.tableaux.effacerÉlément({idTableau:x,idÉlément:_})}async sauvegarderMétadonnéesBd({idBd:r,métadonnées:g}){const _=await this.client.obtIdBd({nom:"métadonnées",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdMétadonnées});for(const E in g)await x.set(E,g[E]);await S()}async sauvegarderMétadonnéeBd({idBd:r,clef:g,métadonnée:_}){const x=await this.client.obtIdBd({nom:"métadonnées",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdMétadonnées});await S.set(g,_),await E()}async effacerMétadonnéeBd({idBd:r,clef:g}){const _=await this.client.obtIdBd({nom:"métadonnées",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdMétadonnées});await x.del(g),await S()}async suivreMétadonnéesBd({idBd:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"métadonnées",schéma:schémaStructureBdMétadonnées,f:g})}async sauvegarderNomsBd({idBd:r,noms:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const E in g)await x.set(E,g[E]);await S()}async sauvegarderNomBd({idBd:r,langue:g,nom:_}){const x=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNoms});await S.set(g,_),await E()}async effacerNomBd({idBd:r,langue:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(g),await S()}async sauvegarderDescriptionsBd({idBd:r,descriptions:g}){const _=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const E in g)await x.set(E,g[E]);await S()}async sauvegarderDescriptionBd({idBd:r,langue:g,description:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNoms});await S.set(g,_),await E()}async effacerDescriptionBd({idBd:r,langue:g}){const _=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(g),await S()}async changerLicenceBd({idBd:r,licence:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd});await _.set("licence",g),await x()}async changerLicenceContenuBd({idBd:r,licenceContenu:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd});g?await _.set("licenceContenu",g):await _.del("licenceContenu"),await x()}async ajouterMotsClefsBd({idBd:r,idsMotsClefs:g}){Array.isArray(g)||(g=[g]);const _=await this.client.obtIdBd({nom:"motsClefs",racine:r,type:"set"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"set",schéma:schémaStructureBdMotsClefs});for(const E of g)(await x.all()).map(T=>T.value).includes(E)||await x.add(E);await S()}async effacerMotClefBd({idBd:r,idMotClef:g}){const _=await this.client.obtIdBd({nom:"motsClefs",racine:r,type:"set"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"set",schéma:schémaStructureBdMotsClefs});await x.del(g),await S()}async rejoindreNuées({idBd:r,idsNuées:g}){Array.isArray(g)||(g=[g]);const _=await this.client.obtIdBd({nom:"nuées",racine:r,type:"set"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"set",schéma:schémaStructureBdNuées});for(const E of g)(await x.all()).map(T=>T.value).includes(E)||await x.add(E);await S()}async quitterNuée({idBd:r,idNuée:g}){const _=await this.client.obtIdBd({nom:"nuée",racine:r,type:"set"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"set",schéma:schémaStructureBdNuées});await x.del(g),await S()}async ajouterTableauBd({idBd:r,clefTableau:g}){const _=await this.client.obtIdBd({nom:"tableaux",racine:r,type:"ordered-keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd});g=g||v4$3();const E=await this.client.tableaux.créerTableau({idBd:r});return await x.set(E,{clef:g}),await S(),E}async effacerTableauBd({idBd:r,idTableau:g}){const _=await this.client.obtIdBd({nom:"tableaux",racine:r,type:"ordered-keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd});await x.del(g),await S(),await this.client.tableaux.effacerTableau({idTableau:g})}async spécifierClefTableau({idBd:r,idTableau:g,clef:_}){const x=await this.client.obtIdBd({nom:"tableaux",racine:r,type:"ordered-keyvalue"});if(!x)throw new Error("Id Bd Tableau non obtenable.");const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd}),C=await S.get(g);C&&(C.value.clef=_,S.set(g,C.value)),await E()}async changerStatutBd({idBd:r,statut:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd});_.set("statut",g),await x()}async suivreStatutBd({idBd:r,f:g}){return await this.client.suivreBdDic({id:r,schéma:schémaStructureBdBd,f:async _=>{if(_.statut)return await g(_.statut)}})}async marquerObsolète({idBd:r,idNouvelle:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd});_.set("statut",{statut:"obsolète",idNouvelle:g}),await x()}async marquerActive({idBd:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd});g.set("statut",{statut:"active"}),await _()}async marquerJouet({idBd:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd});g.set("statut",{statut:"jouet"}),await _()}async marquerInterne({idBd:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd});g.set("statut",{statut:"interne"}),await _()}async suivreLicenceBd({idBd:r,f:g}){return await this.client.suivreBd({id:r,type:"keyvalue",schéma:schémaStructureBdBd,f:async _=>{const x=await _.get("licence");x&&await g(x)}})}async suivreLicenceContenuBd({idBd:r,f:g}){return await this.client.suivreBd({id:r,type:"keyvalue",schéma:schémaStructureBdBd,f:async _=>{const x=await _.get("licenceContenu");await g(x)}})}async inviterAuteur({idBd:r,idCompteAuteur:g,rôle:_}){await this.client.donnerAccès({idBd:r,identité:g,rôle:_})}async sauvegarderImage({idBd:r,image:g}){if(g.contenu.byteLength>MAX_TAILLE_IMAGE$4)throw new Error("Taille maximale excédée");const _=await this.client.ajouterÀSFIP(g),{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd});await x.set("image",_),await S()}async effacerImage({idBd:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdBd});await g.del("image"),await _()}async suivreImage({idBd:r,f:g}){return await this.client.suivreBd({id:r,type:"keyvalue",schéma:schémaStructureBdBd,f:async _=>{const x=await _.get("image");if(!x)await g(null);else{const S=await this.client.obtFichierSFIP({id:x,max:MAX_TAILLE_IMAGE_VIS$3});await g(S)}}})}async suivreNomsBd({idBd:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"noms",schéma:schémaStructureBdNoms,f:g})}async suivreDescriptionsBd({idBd:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"descriptions",schéma:schémaStructureBdNoms,f:g})}async suivreMotsClefsBd({idBd:r,f:g}){return await this.client.suivreBdListeDeClef({id:r,clef:"motsClefs",schéma:{type:"string"},f:g})}async suivreTableauxBd({idBd:r,f:g}){const _=async x=>{const S=x.map(E=>({id:E.key,...E.value}));await g(S)};return await this.client.suivreBdDicOrdonnéeDeClef({id:r,clef:"tableaux",schéma:schémaBdTableauxDeBd,f:_})}async suivreScoreAccèsBd({idBd:r,f:g}){return g(Number.parseInt(r)),faisRien$1}async suivreScoreCouvertureBd({idBd:r,f:g}){return await suivreBdsDeFonctionListe$1({fListe:async E=>await this.suivreTableauxBd({idBd:r,f:C=>E(C.map(T=>T.id))}),f:async E=>{const C=E.reduce((R,A)=>R+A.numérateur,0),T=E.reduce((R,A)=>R+A.dénominateur,0);await g(T===0?void 0:C/T)},fBranche:async(E,C)=>{const T={},R=async()=>{const{cols:B,règles:D}=T;if(B!==void 0&&D!==void 0){const N=B.filter(L=>L.catégorie&&["numérique","catégorique"].includes(L.catégorie.catégorie)),M=N.length,O=N.filter(L=>D.some(F=>F.règle.règle.typeRègle!=="catégorie"&&F.colonne===L.id)).length;await C({numérateur:O,dénominateur:M})}},A=await this.client.tableaux.suivreColonnesTableau({idTableau:E,f:async B=>{T.cols=B,await R()},catégories:!0}),I=await this.client.tableaux.suivreRègles({idTableau:E,f:async B=>{T.règles=B,await R()}});return async()=>{await A(),await I()}}})}async suivreScoreValideBd({idBd:r,f:g}){return await suivreBdsDeFonctionListe$1({fListe:async E=>await this.suivreTableauxBd({idBd:r,f:C=>E(C.map(T=>T.id))}),f:async E=>{const C=E.reduce((R,A)=>R+A.numérateur,0),T=E.reduce((R,A)=>R+A.dénominateur,0);await g(T===0?void 0:C/T)},fBranche:async(E,C)=>{const T={},R=()=>{const{données:D,erreurs:N,cols:M}=T;if(D!==void 0&&N!==void 0&&M!==void 0){const O=M.filter(z=>z.catégorie&&["numérique","catégorique"].includes(z.catégorie.catégorie)),L=[],F=N.map(z=>({id:z.id,idColonne:z.erreur.règle.colonne})).filter(z=>L.find(X=>X.id===z.id&&X.idColonne===z.idColonne)?!1:(L.push(z),!0)).length,U=D.map(z=>O.filter(W=>z.données[W.id]!==void 0).length).reduce((z,W)=>z+W,0),j=U-F;C({numérateur:j,dénominateur:U})}},A=await this.client.tableaux.suivreDonnées({idTableau:E,f:D=>{T.données=D,R()}}),I=await this.client.tableaux.suivreValidDonnées({idTableau:E,f:D=>{T.erreurs=D,R()}}),B=await this.client.tableaux.suivreColonnesTableau({idTableau:E,f:D=>{T.cols=D,R()},catégories:!0});return async()=>{await A(),await I(),await B()}}})}async suivreQualitéBd({idBd:r,f:g}){const _={},x=async()=>{const{accès:R,couverture:A,valide:I,licence:B}=_,D={total:B?((R||0)+(A||0)+(I||0))/3:0,accès:R,couverture:A,valide:I,licence:B};await g(D)},S=await this.suivreScoreAccèsBd({idBd:r,f:async R=>{_.accès=R,await x()}}),E=await this.suivreScoreCouvertureBd({idBd:r,f:async R=>{_.couverture=R,await x()}}),C=await this.suivreScoreValideBd({idBd:r,f:async R=>{_.valide=R,await x()}}),T=await this.suivreLicenceBd({idBd:r,f:async R=>{_.licence=R?1:0,await x()}});return async()=>{await Promise.all([S,E,C,T])}}async suivreVariablesBd({idBd:r,f:g}){return await suivreBdsDeFonctionListe$1({fListe:async E=>await this.suivreTableauxBd({idBd:r,f:C=>E(C.map(T=>T.id))}),f:async E=>await g(E||[]),fBranche:async(E,C)=>await this.client.tableaux.suivreVariables({idTableau:E,f:C})})}async suivreDonnéesExportation({idBd:r,langues:g,f:_}){const x={},S=[],E=async()=>{const{nomsBd:T,données:R}=x;if(!R)return;const A=r.split("/").pop(),I=T&&g&&traduire(T,g)||A;await _({nomBd:I,tableaux:R})},C=await suivreBdsDeFonctionListe$1({fListe:async T=>await this.suivreTableauxBd({idBd:r,f:T}),f:async T=>{x.données=T,await E()},fBranche:async(T,R)=>await this.client.tableaux.suivreDonnéesExportation({idTableau:T,langues:g,f:async A=>await R(A)}),fIdBdDeBranche:T=>T.id,fCode:T=>T.id});if(S.push(C),g){const T=await this.suivreNomsBd({idBd:r,f:async R=>{x.nomsBd=R,await E()}});S.push(T)}return async()=>{await Promise.all(S.map(T=>T()))}}async exporterDonnées({idBd:r,langues:g,nomFichier:_,patience:x=500}){const S=utils$5.book_new(),E=await uneFois$2(async T=>await this.suivreDonnéesExportation({idBd:r,langues:g,f:T}),attendreStabilité$1(x));_=_||E.nomBd;const C=new Set;for(const T of E.tableaux){T.fichiersSFIP.forEach(A=>C.add(A));const R=utils$5.json_to_sheet(T.données);utils$5.book_append_sheet(S,R,T.nomTableau.slice(0,30))}return{doc:S,fichiersSFIP:C,nomFichier:_}}async exporterDocumentDonnées({données:r,formatDoc:g,dossier:_="",inclureFichiersSFIP:x=!0}){const{doc:S,fichiersSFIP:E,nomFichier:C}=r,R={xls:"biff8"}[g]||g,A=path.join(_,`${C}.${g}`);if(!(isBrowser$1||isWebWorker)){const I=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url);I.existsSync(_)||I.mkdirSync(_,{recursive:!0})}if(x){const I={octets:writeSync(S,{bookType:R,type:"buffer"}),nom:`${C}.${g}`},B=await Promise.all([...E].map(async D=>({nom:D.replace("/","-"),octets:await toBuffer(await this.client.obtItérableAsyncSFIP({id:D}))})));return await zipper([I],B,path.join(_,C)),path.join(_,`${C}.zip`)}else{if(isNode||isElectronMain)writeFileSync(S,A,{bookType:R});else{const I=writeSync(S,{bookType:R,type:"buffer"});saveAs$1(new Blob([new Uint8Array(I)]),`${C}.${g}`)}return A}}async effacerBd({idBd:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:schémaBdPrincipale$3});await g.del(r),await _();for(const S of["noms","descriptions","motsClefs"]){const E=await this.client.obtIdBd({nom:S,racine:r});E&&await this.client.effacerBd({id:E})}const x=await this.client.obtIdBd({nom:"tableaux",racine:r,type:"ordered-keyvalue"});if(x){const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd}),C=Object.keys(S.all);for(const T of C)await this.client.tableaux.effacerTableau({idTableau:T});E(),await this.client.effacerBd({id:x})}await this.enleverDeMesBds({idBd:r}),await this.client.favoris.désépinglerFavori({idObjet:r}),await this.client.effacerBd({id:r})}}__decorate([cacheSuivi],BDs.prototype,"suivreBds",null);__decorate([cacheSuivi],BDs.prototype,"suivreParent",null);__decorate([cacheSuivi],BDs.prototype,"suivreNuéesBd",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParMotsClefs",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParNuée",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClefDeBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnéesDeTableauUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnéesDeTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreMétadonnéesBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicenceBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicenceContenuBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreImage",null);__decorate([cacheSuivi],BDs.prototype,"suivreNomsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreDescriptionsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreMotsClefsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreTableauxBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreAccèsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreCouvertureBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreValideBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreQualitéBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreVariablesBd",null);const importationAuth=__vitePreload(()=>import("./index-CfJcFh7M.js"),__vite__mapDeps([0,1]),import.meta.url),importationCrypto=__vitePreload(()=>import("./index-C133Rf3c.js").then(n=>n.k),[],import.meta.url),verrouImportation=new s$2;let auth;const obtAuth=async()=>(await verrouImportation.acquire("auth"),auth||(auth=await importationAuth),verrouImportation.release("auth"),auth);let crypto$1;const obtCrypto=async()=>(await verrouImportation.acquire("crypto"),crypto$1||(crypto$1=await importationCrypto),verrouImportation.release("crypto"),crypto$1);class EncryptionLocalFirst{événements;clefs;nom="local-first-auth";constructor(){this.événements=new libExports.TypedEmitter,obtAuth().then(({asymmetric:r})=>{const{publicKey:g,secretKey:_}=r.keyPair();this.clefs={secrète:_,publique:g},this.événements.emit("clefs",this.clefs)})}async obtClefs(){return this.clefs||await new Promise(g=>{this.événements.once("clefs",g)})}async encrypter({message:r,clefPubliqueDestinataire:g}){const{asymmetric:_}=await obtAuth(),x=await this.obtClefs();return _.encrypt({secret:r,recipientPublicKey:g,senderSecretKey:x.secrète}).toString()}async décrypter({message:r,clefPubliqueExpéditeur:g}){const{asymmetric:_}=await obtAuth(),x=await this.obtClefs();return _.decrypt({cipher:r,recipientSecretKey:x.secrète,senderPublicKey:g})}async clefAléatoire(r=6){const{randomKey:g}=await obtCrypto();return g(r)}async obtNom(){return this.nom}}const cidEtFichierValide=n=>{let r,g;try{[r,g]=n.split("/")}catch{return!1}return!g||!idcValide(r)?!1:{cid:r,fichier:g}};class Épingles{client;requêtes;bdsOuvertes;idcsÉpinglés;constructor({client:r}){this.client=r,this.requêtes={},this.bdsOuvertes={},this.idcsÉpinglés=[]}async épingler({idRequête:r,épingles:g}){this.requêtes[r]=g,await this.mettreÀJour()}async désépingler({idRequête:r}){delete this.requêtes[r],await this.mettreÀJour()}estÉpinglé({id:r}){return!!this.bdsOuvertes[r]||this.idcsÉpinglés.includes(r)}async mettreÀJour(){const r=new Set(...Object.values(this.requêtes)),g=[...r].filter(C=>C&&isValidAddress(C)),_=[...r].filter(C=>!g.includes(C)).map(C=>{const T=cidEtFichierValide(C);if(T)return T.cid;if(idcValide(C))return C}).filter(C=>!!C),{sfip:x}=await this.client.attendreSfipEtOrbite();for(const C of _)await drain(x.pins.add(CID$1.parse(C)));const S=this.idcsÉpinglés.filter(C=>!_.includes(C));this.idcsÉpinglés=_;for(const C of S)await drain(x.pins.rm(CID$1.parse(C)));for(const C of g)try{const{bd:T,fOublier:R}=await this.client.ouvrirBd({id:C});this.bdsOuvertes[C]={bd:T,fOublier:R}}catch{return}const E=Object.keys(this.bdsOuvertes).filter(C=>!g.includes(C));for(const C of E)await this.bdsOuvertes[C].fOublier(),delete this.bdsOuvertes[C]}async fermer(){await Promise.all(Object.values(this.bdsOuvertes).map(({fOublier:r})=>r()))}}const conditions={ATTR:"attribution",ÉGAL:"partageÉgal",INCL:"inclureDroitDauteur",CHNG:"indiquerChangements",SRCE:"partagerCodeSource",USGR:"usagereseau"},droits={PRTG:"partager",ADPT:"adapter",CMRC:"usageComercial",PRV:"usagePrivé",BREV:"usageBrevets"},limitations={RSP:"aucuneResponsabilité",GRNT:"aucuneGarantie",MRCM:"marqueCommerce",BREV:"brevetExclu",SOUS:"sousLicence"},catégories={BD:"basesDeDonnées",ART:"artistique",CODE:"codeInformatique",AUTRE:"autre"},infoLicences={"ODbl-1_0":{droits:[droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT],conditions:[conditions.ATTR,conditions.ÉGAL,conditions.INCL],limitations:[limitations.RSP,limitations.BREV,limitations.MRCM,limitations.GRNT],catégorie:catégories.BD},"ODC-BY-1_0":{droits:[droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT],conditions:[conditions.ATTR,conditions.INCL],limitations:[limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV],catégorie:catégories.BD},PDDL:{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV],catégorie:catégories.BD},"rvca-open":{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[conditions.INCL,conditions.ATTR],limitations:[limitations.SOUS,limitations.RSP],catégorie:catégories.BD,spécialisée:!0},"CC-BY-SA-4_0":{droits:[droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.ÉGAL],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catégorie:catégories.ART},"CC-BY-4_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[conditions.ATTR,conditions.CHNG],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catégorie:catégories.ART},"CC-0-1_0":{droits:[droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT],catégorie:catégories.ART},"0bsd":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[],limitations:[],catégorie:catégories.CODE},"afl-3_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,droits.BREV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"agpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.USGR,conditions.ÉGAL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"apache-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"artistic-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catégorie:catégories.CODE},"bsd-2-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"bsd-3-clause-clear":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.BREV,limitations.GRNT],catégorie:catégories.CODE},"bsd-3-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"bsd-4-clause":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"bsl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"cecill-2_1":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,droits.BREV],conditions:[conditions.INCL,conditions.SRCE,conditions.ÉGAL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"ecl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.BREV,limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"epl-1_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.ÉGAL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"epl-2_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.ÉGAL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"eupl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.ÉGAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catégorie:catégories.CODE},"eupl-1_2":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.ÉGAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catégorie:catégories.CODE},"gpl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.ÉGAL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"gpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRV,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.ÉGAL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},isc:{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"lgpl-2_1":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.ÉGAL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"lgpl-3_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.ÉGAL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"lppl-1_3c":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"mit-0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},mit:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"mpl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.ÉGAL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catégorie:catégories.CODE},"ms-pl":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.GRNT,limitations.MRCM],catégorie:catégories.CODE},"ms-rl":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.SRCE,conditions.INCL,conditions.ÉGAL],limitations:[limitations.GRNT,limitations.MRCM],catégorie:catégories.CODE},"mulanpsl-2_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.MRCM,limitations.GRNT],catégorie:catégories.CODE},ncsa:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"osl-3_0":{droits:[droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV],conditions:[conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.ÉGAL],limitations:[limitations.MRCM,limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},postgresql:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},unlicence:{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"upl-1_0":{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV],conditions:[conditions.INCL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},vim:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.ÉGAL],limitations:[],catégorie:catégories.CODE},wtfpl:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[],limitations:[],catégorie:catégories.CODE},zlib:{droits:[droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV],conditions:[conditions.INCL,conditions.CHNG],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.CODE},"ofl-1_1":{droits:[droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG],conditions:[conditions.INCL,conditions.ÉGAL],limitations:[limitations.RSP,limitations.GRNT],catégorie:catégories.AUTRE}};class Licences{client;événements;prêt;perroquet;constructor({client:r}){this.client=r,this.prêt=!1,this.événements=new EventEmitter$1,this.initialiser()}async initialiser(){this.prêt=!0,this.événements.emit("prêt")}async attendrePrêt(){if(!this.prêt)return new Promise(r=>{const g=()=>{r(),this.événements.off("prêt",g)};this.événements.on("prêt",g)})}async suivreLicences({f:r}){if(await r(infoLicences),await this.attendrePrêt(),this.perroquet){const g=async _=>await r(Object.fromEntries(_.map(x=>[x.code,x])));return await this.perroquet.உறுப்படிகளை_கேள்ளு({செ:g,பரிந்துரைகள்:"எனது"})}return faisRien$1}async suggérerLicence({code:r,infoLicence:g}){await this.attendrePrêt(),this.perroquet&&await this.perroquet.பரிந்துரையு({பரிந்துரை:{code:r,...g}})}async effacerSuggestionLicence({idÉlément:r}){await this.attendrePrêt(),this.perroquet&&await this.perroquet.பரிந்துரையை_நீக்கு({அடையாளம்:r})}async suivreSuggestionsLicences({f:r}){return await this.attendrePrêt(),this.perroquet?await this.perroquet.பரிந்துரைகளை_கேள்ளு({செ:r}):{fOublier:faisRien$1,fChangerProfondeur:faisRien$1}}async approuverLicence({suggestion:r}){await this.attendrePrêt(),this.perroquet&&await this.perroquet.அங்கீகரி({பரிந்துரை:r})}}__decorate([cacheSuivi],Licences.prototype,"suivreLicences",null);const schémaBdPrincipale$2={type:"string"},schémaBdMotClef={type:"object",properties:{type:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0}},required:[]};class MotsClefs extends ComposanteClientListe{constructor({client:r}){super({client:r,clef:"motsClefs",schémaBdPrincipale:schémaBdPrincipale$2})}async suivreRésolutionÉpingle({épingle:r,f:g}){const _=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.base||"TOUS"});return await this.client.suivreBd({id:r.idObjet,type:"keyvalue",schéma:schémaBdMotClef,f:async S=>{try{const E=await S.allAsJSON();return await g(new Set(_?[r.idObjet,E.descriptions,E.noms].filter(C=>!!C):[]))}catch{return}}})}async suivreMotsClefs({f:r,idCompte:g}){return await this.suivreBdPrincipale({idCompte:g,f:r})}async créerMotClef({épingler:r=!0}={}){const g=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}});await this.ajouterÀMesMotsClefs({idMotClef:g}),r&&await this.épinglerMotClef({idMotClef:g});const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:g,type:"keyvalue",schéma:schémaBdMotClef}),E={address:_.access.address};await _.set("type","motClef");const C=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:E});await _.set("noms",C);const T=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:E});return await _.set("descriptions",T),await x(),g}async ajouterÀMesMotsClefs({idMotClef:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.add(r),await _()}async enleverDeMesMotsClefs({idMotClef:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.del(r),await _()}async épinglerMotClef({idMotClef:r,options:g={}}){const _=résoudreDéfauts(g,{type:"motClef",base:TOUS});await this.client.favoris.épinglerFavori({idObjet:r,épingle:_})}async suivreÉpingleMotClef({idMotClef:r,f:g,idCompte:_}){return await this.client.favoris.suivreÉtatFavori({idObjet:r,f:async x=>{x?.type==="motClef"?await g(x):await g(void 0)},idCompte:_})}async copierMotClef({idMotClef:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaBdMotClef}),x=await this.créerMotClef(),S=await g.get("noms");if(S){const{bd:C,fOublier:T}=await this.client.ouvrirBdTypée({id:S,type:"keyvalue",schéma:schémaStructureBdNoms}),R=await C.allAsJSON();await this.sauvegarderNomsMotClef({idMotClef:x,noms:R}),await T()}const E=await g.get("descriptions");if(E){const{bd:C,fOublier:T}=await this.client.ouvrirBdTypée({id:E,type:"keyvalue",schéma:schémaStructureBdNoms}),R=await C.allAsJSON();await this.sauvegarderDescriptionsMotClef({idMotClef:x,descriptions:R}),await T()}return await _(),x}async inviterAuteur({idMotClef:r,idCompteAuteur:g,rôle:_}){await this.client.donnerAccès({idBd:r,identité:g,rôle:_})}async sauvegarderNomsMotClef({idMotClef:r,noms:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour mot clef ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const E in g)await x.set(E,g[E]);await S()}async sauvegarderNomMotClef({idMotClef:r,langue:g,nom:_}){const x=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour mot clef ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNoms});await S.set(g,_),await E()}async effacerNomMotClef({idMotClef:r,langue:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour mot clef ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(g),await S()}async suivreNomsMotClef({idMotClef:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"noms",schéma:schémaStructureBdNoms,f:g})}async sauvegarderDescriptionsMotClef({idMotClef:r,descriptions:g}){const _=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour mot clef ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const E in g)await x.set(E,g[E]);await S()}async sauvegarderDescriptionMotClef({idMotClef:r,langue:g,description:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour mot clef ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNoms});await S.set(g,_),await E()}async effacerDescriptionMotClef({id:r,langue:g}){const _=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour mot clef ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(g),await S()}async suivreDescriptionsMotClef({idMotClef:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"descriptions",schéma:schémaStructureBdNoms,f:g})}async effacerMotClef({idMotClef:r}){await this.enleverDeMesMotsClefs({idMotClef:r}),await this.client.favoris.désépinglerFavori({idObjet:r});for(const g of["noms"]){const _=await this.client.obtIdBd({nom:g,racine:r});_&&await this.client.effacerBd({id:_})}await this.client.effacerBd({id:r})}async suivreQualitéMotClef({idMotClef:r,f:g}){return await this.suivreNomsMotClef({idMotClef:r,f:_=>g(Object.keys(_).length?1:0)})}}__decorate([cacheSuivi],MotsClefs.prototype,"suivreMotsClefs",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreNomsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreDescriptionsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreQualitéMotClef",null);const MAX_TAILLE_IMAGE$3=500*1e3,MAX_TAILLE_IMAGE_VIS$2=1500*1e3,schémaBdAutorisations={type:"object",additionalProperties:{type:"string"},required:[]},schémaStructureBdNuée={type:"object",properties:{type:{type:"string",nullable:!0},métadonnées:{type:"string",nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},image:{type:"string",nullable:!0},tableaux:{type:"string",nullable:!0},autorisation:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0},parent:{type:"string",nullable:!0},copiéDe:{type:"string",nullable:!0}},required:[]},schémaStructureBdAuthorisation={type:"object",properties:{philosophie:{type:"string",nullable:!0},membres:{type:"string",nullable:!0}},required:[]},schémaBdMotsClefsNuée={type:"string"};class Nuées extends ComposanteClientListe{constructor({client:r}){super({client:r,clef:"nuées",schémaBdPrincipale:{type:"string"}})}async suivreRésolutionÉpingle({épingle:r,f:g}){const _=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.base||"TOUS"}),x=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.fichiersBase||"INSTALLÉ"}),S=r.épingle.données,E={},C=async()=>await g(new Set(Object.values(E).flat().filter(R=>!!R))),T=[];if(_||x){const R=await this.client.suivreBd({id:r.idObjet,type:"keyvalue",schéma:schémaStructureBdNuée,f:async A=>{try{const I=await A.allAsJSON();_&&(E.base=[r.idObjet,I.descriptions,I.noms,I.tableaux,I.motsClefs,I.métadonnées]),x&&(E.fichiersBase=[I.image]),await C()}catch{return}}});T.push(R)}if(S){const{fOublier:R}=await suivreBdsDeFonctionListe$1({fListe:async A=>await this.suivreBdsCorrespondantes({idNuée:r.idObjet,f:A}),fBranche:async(A,I)=>this.client.bds.suivreRésolutionÉpingle({épingle:{idObjet:A,épingle:S},f:B=>I([...B])}),f:async A=>{E.données=A,await C()}});T.push(R)}return async()=>{await Promise.all(T.map(R=>R()))}}async créerNuée({nuéeParent:r,autorisation:g="IJPC",épingler:_=!0}={}){const x=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}});await this.ajouterÀMesNuées({idNuée:x}),_&&await this.épinglerNuée({idNuée:x});const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNuée}),T={address:S.access.address};await S.set("type","nuée");let R;if(isValidAddress(g))R=g;else if(g==="CJPI"||g==="IJPC")R=await this.générerGestionnaireAutorisations({philosophie:g});else throw new Error(`Autorisation non valide : ${g}`);await S.set("autorisation",R),g==="CJPI"&&await this.accepterMembreNuée({idNuée:x,idCompte:await this.client.obtIdCompte()});const A=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:T});await S.set("noms",A);const I=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:T});await S.set("descriptions",I);const B=await this.client.créerBdIndépendante({type:"ordered-keyvalue",optionsAccès:T});await S.set("tableaux",B);const D=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:T});await S.set("métadonnées",D);const N=await this.client.créerBdIndépendante({type:"set",optionsAccès:T});return await S.set("motsClefs",N),await S.set("statut",{statut:"active"}),r&&await S.set("parent",r),E(),x}async ajouterÀMesNuées({idNuée:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.add(r),await _()}async enleverDeMesNuées({idNuée:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.del(r),await _()}async épinglerNuée({idNuée:r,options:g={}}){const _=résoudreDéfauts(g,{type:"nuée",base:TOUS,fichiersBase:INSTALLÉ,données:{type:"bd",base:TOUS,fichiersBase:INSTALLÉ,données:{tableaux:TOUS,fichiers:INSTALLÉ}}});await this.client.favoris.épinglerFavori({idObjet:r,épingle:_})}async suivreÉpingleNuée({idBd:r,f:g,idCompte:_}){return await this.client.favoris.suivreÉtatFavori({idObjet:r,f:async x=>{x?.type==="nuée"?await g(x):await g(void 0)},idCompte:_})}async copierNuée({idNuée:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée}),x=await g.get("parent"),S=await this.créerNuée({nuéeParent:x}),{bd:E,fOublier:C}=await this.client.ouvrirBdTypée({id:S,type:"keyvalue",schéma:schémaStructureBdNuée}),T=await g.get("métadonnées");if(T){const{bd:O,fOublier:L}=await this.client.ouvrirBdTypée({id:T,type:"keyvalue",schéma:schémaStructureBdNoms}),F=await O.allAsJSON();await L(),await this.sauvegarderMétadonnéesNuée({idNuée:S,métadonnées:F})}const R=await g.get("noms");if(R){const{bd:O,fOublier:L}=await this.client.ouvrirBdTypée({id:R,type:"keyvalue",schéma:schémaStructureBdNoms}),F=await O.allAsJSON();await L(),await this.sauvegarderNomsNuée({idNuée:S,noms:F})}const A=await g.get("descriptions");if(A){const{bd:O,fOublier:L}=await this.client.ouvrirBdTypée({id:A,type:"keyvalue",schéma:schémaStructureBdNoms}),F=await O.allAsJSON();await L(),await this.sauvegarderDescriptionsNuée({idNuée:S,descriptions:F})}const I=await g.get("motsClefs");if(I){const{bd:O,fOublier:L}=await this.client.ouvrirBdTypée({id:I,type:"set",schéma:schémaBdMotsClefsNuée}),F=(await O.all()).map(U=>U.value);await L(),await this.ajouterMotsClefsNuée({idNuée:S,idsMotsClefs:F})}const B=await g.get("tableaux"),D=await E.get("tableaux");if(!D)throw new Error("Erreur initialisation.");if(B){const{bd:O,fOublier:L}=await this.client.ouvrirBdTypée({id:D,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd}),{bd:F,fOublier:U}=await this.client.ouvrirBdTypée({id:B,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd}),j=await F.all();await U();for(const z of j){const W=await this.client.tableaux.copierTableau({id:z.key,idBd:S,copierDonnées:!1});await O.set(W,z.value)}await L()}const N=await g.get("statut")||{statut:"active"};await E.set("statut",N);const M=await g.get("image");return M&&await E.set("image",M),await E.set("copiéDe",r),await Promise.all([_(),C()]),S}async suivreNuées({f:r,idCompte:g}){return await this.suivreBdPrincipale({f:r,idCompte:g})}async suivreDeParents({idNuée:r,f:g,fParents:_}){return await suivreBdsDeFonctionListe$1({fListe:async x=>await this.suivreNuéesParents({idNuée:r,f:S=>x([r,...S].reverse())}),f:g,fBranche:_,fRéduction:x=>x})}async sauvegarderMétadonnéeNuée({idNuée:r,clef:g,valeur:_}){const x=await this.client.obtIdBd({nom:"métadonnées",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour Nuée ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdMétadonnées});await S.set(g,_),await E()}async sauvegarderMétadonnéesNuée({idNuée:r,métadonnées:g}){const _=await this.client.obtIdBd({nom:"métadonnées",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Nuée ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdMétadonnées});for(const E in g)await x.set(E,g[E]);await S()}async effacerMétadonnéeNuée({idNuée:r,clef:g}){const _=await this.client.obtIdBd({nom:"métadonnées",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Nuée ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdMétadonnées});await x.del(g),await S()}async suivreMétadonnéesNuée({idNuée:r,f:g,hériter:_=!0}){if(_){const x=async S=>{await g(Object.assign({},...S))};return await this.suivreDeParents({idNuée:r,f:x,fParents:async(S,E)=>await this.client.suivreBdDicDeClef({id:S,clef:"métadonnées",schéma:schémaStructureBdMétadonnées,f:E})})}else return await this.client.suivreBdDicDeClef({id:r,clef:"métadonnées",schéma:schémaStructureBdMétadonnées,f:g})}async sauvegarderNomNuée({idNuée:r,langue:g,nom:_}){const x=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour Nuée ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNoms});await S.set(g,_),await E()}async sauvegarderNomsNuée({idNuée:r,noms:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Nuée ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const E in g)await x.set(E,g[E]);await S()}async effacerNomNuée({idNuée:r,langue:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Nuée ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(g),await S()}async suivreNomsNuée({idNuée:r,f:g}){const _=async x=>{await g(Object.assign({},...x))};return await this.suivreDeParents({idNuée:r,f:_,fParents:async(x,S)=>await this.client.suivreBdDicDeClef({id:x,clef:"noms",schéma:schémaStructureBdNoms,f:S})})}async sauvegarderDescriptionNuée({idNuée:r,langue:g,description:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour Nuée ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNoms});await S.set(g,_),await E()}async sauvegarderDescriptionsNuée({idNuée:r,descriptions:g}){const _=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const E in g)await x.set(E,g[E]);await S()}async effacerDescriptionNuée({idNuée:r,langue:g}){const _=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(g),await S()}async suivreDescriptionsNuée({idNuée:r,f:g}){const _=async x=>{await g(Object.assign({},...x))};return await this.suivreDeParents({idNuée:r,f:_,fParents:async(x,S)=>await this.client.suivreBdDicDeClef({id:x,clef:"descriptions",schéma:schémaStructureBdNoms,f:S})})}async sauvegarderImage({idNuée:r,image:g}){if(g.contenu.byteLength>MAX_TAILLE_IMAGE$3)throw new Error("Taille maximale excédée");const _=await this.client.ajouterÀSFIP(g),{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});await x.set("image",_),await S()}async effacerImage({idNuée:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});await g.del("image"),await _()}async suivreImage({idNuée:r,f:g}){return await this.client.suivreBd({id:r,type:"keyvalue",schéma:schémaStructureBdNuée,f:async _=>{const x=await _.get("image");if(!x)await g(null);else{const S=await this.client.obtFichierSFIP({id:x,max:MAX_TAILLE_IMAGE_VIS$2});await g(S)}}})}async ajouterMotsClefsNuée({idNuée:r,idsMotsClefs:g}){Array.isArray(g)||(g=[g]);const _=await this.client.obtIdBd({nom:"motsClefs",racine:r,type:"set"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"set",schéma:schémaBdMotsClefsNuée});for(const E of g)(await x.all()).map(T=>T.value).includes(E)||await x.add(E);await S()}async effacerMotClefNuée({idNuée:r,idMotClef:g}){const _=await this.client.obtIdBd({nom:"motsClefs",racine:r,type:"set"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"set",schéma:schémaBdMotsClefsNuée});await x.del(g),await S()}async suivreMotsClefsNuée({idNuée:r,f:g}){const _=async x=>{await g([...new Set(x.flat())])};return await this.suivreDeParents({idNuée:r,f:_,fParents:async(x,S)=>await this.client.suivreBdListeDeClef({id:x,clef:"motsClefs",schéma:{type:"string"},f:S})})}async changerStatutNuée({idNuée:r,statut:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});_.set("statut",g),await x()}async suivreStatutNuée({idNuée:r,f:g}){return await this.client.suivreBdDic({id:r,f:async _=>{if(_.statut)return await g(_.statut)},schéma:schémaStructureBdNuée})}async marquerObsolète({idNuée:r,idNouvelle:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});_.set("statut",{statut:"obsolète",idNouvelle:g}),await x()}async marquerActive({idNuée:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});g.set("statut",{statut:"active"}),await _()}async marquerJouet({idNuée:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});g.set("statut",{statut:"jouet"}),await _()}async marquerInterne({idNuée:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});g.set("statut",{statut:"interne"}),await _()}async inviterAuteur({idNuée:r,idCompteAuteur:g,rôle:_}){await this.client.donnerAccès({idBd:r,identité:g,rôle:_})}async générerGestionnaireAutorisations({philosophie:r="IJPC"}){const g=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{write:await this.client.obtIdCompte()}}),{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:g,type:"keyvalue",schéma:schémaStructureBdAuthorisation});await _.set("philosophie",r);const E={address:_.access.address},C=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:E});return await _.set("membres",C),x(),g}async changerPhisolophieAutorisation({idAutorisation:r,philosophie:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdAuthorisation});await _.set("philosophie",g),x()}async suivrePhilosophieAutorisation({idNuée:r,f:g}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:E})=>await this.suivreGestionnaireAutorisations({idNuée:r,f:E}),f:async E=>{if(!E)return;const C=await E.get("philosophie");C&&["IJPC","CJPI"].includes(C)&&await g(C)},fSuivre:async({id:E,fSuivreBd:C})=>await this.client.suivreBd({id:E,type:"keyvalue",schéma:schémaStructureBdAuthorisation,f:C})})}async accepterMembreAutorisation({idAutorisation:r,idCompte:g}){const _=await this.client.obtIdBd({nom:"membres",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour groupe d'autorisation ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaBdAutorisations});await x.set(g,"accepté"),S()}async accepterMembreNuée({idNuée:r,idCompte:g}){const _=await this.obtGestionnaireAutorisationsDeNuée({idNuée:r});return await this.accepterMembreAutorisation({idAutorisation:_,idCompte:g})}async exclureMembreAutorisation({idAutorisation:r,idCompte:g}){const _=await this.client.obtIdBd({nom:"membres",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour groupe d'autorisation ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaBdAutorisations});await x.set(g,"exclus"),S()}async exclureMembreDeNuée({idNuée:r,idCompte:g}){const _=await this.obtGestionnaireAutorisationsDeNuée({idNuée:r});return await this.exclureMembreAutorisation({idAutorisation:_,idCompte:g})}async suivreGestionnaireAutorisations({idNuée:r,f:g}){return await this.client.suivreBd({id:r,type:"keyvalue",schéma:schémaStructureBdNuée,f:async _=>{const x=await _.get("autorisation");await g(x)}})}async changerGestionnaireAutorisations({idNuée:r,idAutorisation:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});await _.set("autorisation",g),x()}async obtGestionnaireAutorisationsDeNuée({idNuée:r}){return await uneFois$2(async g=>await this.suivreGestionnaireAutorisations({idNuée:r,f:ignorerNonDéfinis$1(g)}))}async suivreAutorisationsMembresDeGestionnaire({idAutorisation:r,f:g}){const _=async x=>{const S=Object.entries(x).map(([E,C])=>({idCompte:E,statut:C}));await g(S)};return await this.client.suivreBdDicDeClef({id:r,clef:"membres",schéma:schémaBdAutorisations,f:_})}async suivreAutorisationsMembresDeNuée({idNuée:r,f:g}){const _=async({fSuivreRacine:S})=>await this.suivreGestionnaireAutorisations({idNuée:r,f:S}),x=async({id:S,fSuivreBd:E})=>await this.suivreAutorisationsMembresDeGestionnaire({idAutorisation:S,f:E});return await suivreBdDeFonction$1({fRacine:_,f:ignorerNonDéfinis$1(g),fSuivre:x})}async ajouterTableauNuée({idNuée:r,clefTableau:g}){const _=await this.client.obtIdBd({nom:"tableaux",racine:r,type:"ordered-keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Nuée ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd});g=g||v4$3();const E=await this.client.tableaux.créerTableau({idBd:r});return await x.set(E,{clef:g}),await S(),E}async effacerTableauNuée({idNuée:r,idTableau:g}){const _=await this.client.obtIdBd({nom:"tableaux",racine:r,type:"ordered-keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Nuée ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd});await x.del(g),await S(),await this.client.tableaux.effacerTableau({idTableau:g})}async suivreTableauxNuée({idNuée:r,f:g}){const _=async S=>{await g(S.flat())},x=async(S,E)=>{const C=T=>{const R=T.map(A=>({id:A.key,...A.value}));E(R)};return await this.client.suivreBdDicOrdonnéeDeClef({id:S,clef:"tableaux",schéma:schémaBdTableauxDeBd,f:C})};return await this.suivreDeParents({idNuée:r,f:_,fParents:x})}async sauvegarderNomsTableauNuée({idTableau:r,noms:g}){return await this.client.tableaux.sauvegarderNomsTableau({idTableau:r,noms:g})}async effacerNomsTableauNuée({idTableau:r,langue:g}){return await this.client.tableaux.effacerNomTableau({idTableau:r,langue:g})}async suivreNomsTableauNuée({idNuée:r,clefTableau:g,f:_}){const x=async E=>{await _(Object.assign({},...E))},S=async(E,C)=>await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:T})=>await this.client.bds.suivreIdTableauParClef({idBd:E,clef:g,f:T}),f:ignorerNonDéfinis$1(C),fSuivre:async({id:T,fSuivreBd:R})=>await this.client.tableaux.suivreNomsTableau({idTableau:T,f:R})});return await this.suivreDeParents({idNuée:r,f:x,fParents:S})}async ajouterColonneTableauNuée({idTableau:r,idVariable:g,idColonne:_,index:x}){const S=await this.client.tableaux.ajouterColonneTableau({idTableau:r,idVariable:g,idColonne:_});return x&&await this.changerColIndexTableauNuée({idTableau:r,idColonne:S,val:!0}),S}async effacerColonneTableauNuée({idTableau:r,idColonne:g}){return await this.client.tableaux.effacerColonneTableau({idTableau:r,idColonne:g})}async changerColIndexTableauNuée({idTableau:r,idColonne:g,val:_}){return await this.client.tableaux.changerColIndex({idTableau:r,idColonne:g,val:_})}async suivreColonnesTableauNuée({idNuée:r,clefTableau:g,f:_,catégories:x=!0}){const S=async C=>{await _(C.flat())},E=async(C,T)=>await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:R})=>await this.client.bds.suivreIdTableauParClef({idBd:C,clef:g,f:R}),f:ignorerNonDéfinis$1(T),fSuivre:async({id:R,fSuivreBd:A})=>await this.client.tableaux.suivreColonnesTableau({idTableau:R,f:A,catégories:x})});return await this.suivreDeParents({idNuée:r,f:S,fParents:E})}async ajouterRègleTableauNuée({idTableau:r,idColonne:g,règle:_}){return await this.client.tableaux.ajouterRègleTableau({idTableau:r,idColonne:g,règle:_})}async effacerRègleTableauNuée({idTableau:r,idRègle:g}){return await this.client.tableaux.effacerRègleTableau({idTableau:r,idRègle:g})}async suivreRèglesTableauNuée({idNuée:r,clefTableau:g,f:_}){const x=async E=>{await _(E.flat())},S=async(E,C)=>await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:T})=>await this.client.bds.suivreIdTableauParClef({idBd:E,clef:g,f:T}),f:ignorerNonDéfinis$1(C),fSuivre:async({id:T,fSuivreBd:R})=>await this.client.tableaux.suivreRègles({idTableau:T,f:R})});return await this.suivreDeParents({idNuée:r,f:x,fParents:S})}async suivreVariablesNuée({idNuée:r,f:g}){return await suivreBdsDeFonctionListe$1({fListe:async E=>await this.suivreTableauxNuée({idNuée:r,f:C=>E(C.map(T=>T.id))}),f:async E=>await g(E||[]),fBranche:async(E,C)=>await this.client.tableaux.suivreVariables({idTableau:E,f:C})})}async suivreQualitéNuée({idNuée:r,f:g}){const _={noms:{},descr:{}},x=async()=>{const T=[Object.keys(_.noms).length?1:0,Object.keys(_.descr).length?1:0],R=T.reduce((A,I)=>A+I,0)/T.length;await g(R)},S=await this.suivreNomsNuée({idNuée:r,f:T=>{_.noms=T,x()}}),E=await this.suivreDescriptionsNuée({idNuée:r,f:T=>{_.descr=T,x()}});return async()=>{await S(),await E()}}async suivreDifférencesNuéeEtTableau({idNuée:r,clefTableau:g,idTableau:_,f:x,stricte:S=!0}){const E=async R=>{const A=R.filter(I=>S||I.sévère);await x(A)},C=async({fSuivreRacine:R})=>await this.client.bds.suivreIdTableauParClef({idBd:r,clef:g,f:R}),T=async({id:R,fSuivreBd:A})=>await this.client.tableaux.suivreDifférencesAvecTableau({idTableau:_,idTableauRéf:R,f:A});return await suivreBdDeFonction$1({fRacine:C,f:ignorerNonDéfinis$1(E),fSuivre:T})}async suivreDifférencesNuéeEtBd({idNuée:r,idBd:g,f:_}){const x={},S=async()=>{const T=[];if(x.tableauxNuée&&x.tableauxBd){for(const R of x.tableauxNuée)if(!x.tableauxNuée.find(I=>I.clef===R.clef)){const I={type:"tableauManquant",sévère:!0,clefManquante:R.clef};T.push(I)}for(const R of x.tableauxBd)if(!x.tableauxNuée.find(I=>I.clef===R.clef)){const I={type:"tableauSupplémentaire",sévère:!1,clefExtra:R.clef};T.push(I)}}await _(T)},E=await this.client.bds.suivreTableauxBd({idBd:g,f:T=>{x.tableauxBd=T,S()}}),C=await this.suivreTableauxNuée({idNuée:r,f:T=>{x.tableauxNuée=T,S()}});return async()=>{await E(),await C()}}async suivreCorrespondanceBd({idBd:r,f:g}){return await suivreBdsDeFonctionListe$1({fListe:async S=>await this.client.bds.suivreNuéesBd({idBd:r,f:S}),f:g,fBranche:async(S,E)=>{const C={différencesBds:[],différencesTableaux:[]},T=async()=>{E([...C.différencesBds,...C.différencesTableaux])},R=await this.suivreDifférencesNuéeEtBd({idNuée:S,idBd:r,f:async B=>{C.différencesBds=B,await T()}}),I=await suivreBdsDeFonctionListe$1({fListe:async B=>await this.client.bds.suivreTableauxBd({idBd:r,f:B}),f:async B=>{C.différencesTableaux=B,await T()},fBranche:async(B,D,N)=>await this.suivreDifférencesNuéeEtTableau({idNuée:S,clefTableau:N.clef,idTableau:B,f:async M=>{await D(M.map(O=>({type:"tableau",sévère:O.sévère,idTableau:B,différence:O})))}}),fCode:B=>B.id,fIdBdDeBranche:B=>B.id});return async()=>{await Promise.all([R,I])}}})}async rechercherNuéesDéscendantes({idNuée:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=async E=>{g(E.map(C=>C.id))};return await this.client.réseau.rechercherNuées({f:S,fObjectif:async(E,C,T)=>await E.nuées.suivreNuéesParents({idNuée:C,f:R=>{R.includes(r)&&T({type:"résultat",score:1,de:"*",info:{type:"vide"}})}}),nRésultatsDésirés:_,toutLeRéseau:x})}async préciserParent({idNuée:r,idNuéeParent:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});_.set("parent",g),await x()}async enleverParent({idNuée:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNuée});g.del("parent"),await _()}async suivreNuéesParents({idNuée:r,f:g}){let _=!1;const x={},S=async()=>{await g(Object.values(Object.values(x).map(T=>T.parent)))},E=async({id:T})=>await this.client.suivreBd({id:T,type:"keyvalue",schéma:schémaStructureBdNuée,f:async R=>{if(_)return;const A=await R.get("parent");if(x[T]?.parent===A){A||await S();return}if(await x[T]?.fOublier(),A){const I=await E({id:A});x[T]={parent:A,fOublier:async()=>{await I(),await x[A]?.fOublier(),delete x[T],await S()}}}else delete x[T];await S()}}),C=await E({id:r});return async()=>{_=!0,await C(),await Promise.all(Object.values(x).map(T=>T.fOublier()))}}async suivreBdsCorrespondantesDUneNuée({idNuée:r,f:g,nRésultatsDésirés:_,vérifierAutorisation:x=!0,toujoursInclureLesMiennes:S=!0}){if(x){const E={},C=async()=>{const{philoAutorisation:O,membres:L,bds:F}=E;if(!F)return;if(!O)return S?await g(F.filter(z=>z.auteurs.some(W=>W===this.client.idCompte)).map(z=>z.idBd)):void 0;if(!L)return;const U=await this.client.obtIdCompte();return await g((z=>{if(O==="CJPI"){const W=L.filter(X=>X.statut==="accepté").map(X=>X.idCompte);return z.filter(X=>X.auteurs.some(ie=>W.includes(ie))||S&&X.auteurs.includes(U)).map(X=>X.idBd)}else if(O==="IJPC"){const W=L.filter(X=>X.statut==="exclus").map(X=>X.idCompte);return z.filter(X=>!X.auteurs.some(ie=>W.includes(ie))).map(X=>X.idBd)}else throw new Error(O)})(F))},T=await this.suivrePhilosophieAutorisation({idNuée:r,f:async O=>{E.philoAutorisation=O,await C()}}),R=await this.suivreAutorisationsMembresDeNuée({idNuée:r,f:async O=>{E.membres=O,await C()}}),A=async O=>{E.bds=O,await C()},I=async O=>await this.client.réseau.suivreBdsDeNuée({idNuée:r,f:O,nRésultatsDésirés:_}),B=async(O,L)=>{const F=async U=>await L({idBd:O,auteurs:U.filter(j=>j.accepté).map(j=>j.idCompte)});return await this.client.réseau.suivreAuteursBd({idBd:O,f:F})},{fOublier:D,fChangerProfondeur:N}=await suivreBdsDeFonctionListe$1({fListe:I,f:A,fBranche:B});return{fOublier:async()=>{await Promise.all([D,R,T].map(O=>O()))},fChangerProfondeur:N}}else return await this.client.réseau.suivreBdsDeNuée({idNuée:r,f:g,nRésultatsDésirés:_})}async suivreBdsCorrespondantes({idNuée:r,f:g,nRésultatsDésirés:_,héritage:x,vérifierAutorisation:S=!0,toujoursInclureLesMiennes:E=!0}){const C={},T=[],R=async()=>{if(!C.directes)return;const B=[...new Set([...C.ascendance||[],...C.descendance||[],...C.directes])];return await g(B)};if(x&&x.includes("ascendance")){const B=await this.suivreDeParents({idNuée:r,f:async D=>{const N=[];D.forEach(M=>M.forEach(O=>{N.includes(O)||N.push(O)})),C.ascendance=N,await R()},fParents:async(D,N)=>(await this.suivreBdsCorrespondantesDUneNuée({idNuée:D,f:N,nRésultatsDésirés:_,vérifierAutorisation:S,toujoursInclureLesMiennes:E})).fOublier});T.push(B)}if(x&&x.includes("descendance")){const{fOublier:B}=await suivreBdsDeFonctionListe$1({fListe:async D=>await this.rechercherNuéesDéscendantes({idNuée:r,f:N=>D([r,...N].reverse())}),f:async D=>{C.descendance=D,await R()},fBranche:async(D,N)=>(await this.suivreBdsCorrespondantesDUneNuée({idNuée:D,f:N,nRésultatsDésirés:_,vérifierAutorisation:S,toujoursInclureLesMiennes:E})).fOublier});T.push(B)}const{fOublier:A,fChangerProfondeur:I}=await this.suivreBdsCorrespondantesDUneNuée({idNuée:r,f:async B=>{C.directes=B,await R()},nRésultatsDésirés:_,vérifierAutorisation:S,toujoursInclureLesMiennes:E});return T.push(A),{fOublier:async()=>{await Promise.all(T.map(B=>B()))},fChangerProfondeur:I}}async suivreEmpreinteTêtesBdsNuée({idNuée:r,f:g,héritage:_}){return await suivreBdsDeFonctionListe$1({fListe:async x=>{const{fOublier:S}=await this.suivreBdsCorrespondantes({idNuée:r,f:async E=>x([r,...E]),héritage:_});return S},f:async x=>{const S=Base64.stringify(md5(x.join(":")));return await g(S)},fBranche:async(x,S)=>await this.client.suivreEmpreinteTêtesBdRécursive({idBd:x,f:S})})}async suivreDonnéesTableauNuée({idNuée:r,clefTableau:g,f:_,nRésultatsDésirés:x,héritage:S,ignorerErreursFormatBd:E=!0,ignorerErreursFormatTableau:C=!1,ignorerErreursDonnéesTableau:T=!0,licencesPermises:R=void 0,toujoursInclureLesMiennes:A=!0,clefsSelonVariables:I=!1,vérifierAutorisation:B=!0}){const D=async L=>{const F=L.flat();await _(F)},N=async L=>await this.suivreBdsCorrespondantes({idNuée:r,f:async F=>await L(F),nRésultatsDésirés:x,héritage:S,toujoursInclureLesMiennes:A,vérifierAutorisation:B});return await suivreBdsDeFonctionListe$1({fListe:async L=>{const F=async(U,j)=>{const z={licence:!1,formatBd:!0},W=[],X=async()=>{const ie=Object.values(z).every(fe=>fe);await j(ie)};if(R){const ie=await this.client.bds.suivreLicenceBd({idBd:U,f:async fe=>(z.licence=R.includes(fe),await X())});W.push(ie)}else z.licence=!0;if(E)z.formatBd=!0;else{const ie=await this.suivreDifférencesNuéeEtBd({idBd:U,idNuée:r,f:async fe=>(z.formatBd=!fe.length,await X())});W.push(ie)}return await X(),async()=>{await Promise.all(W.map(ie=>ie()))}};return await this.client.suivreBdsSelonCondition({fListe:N,fCondition:F,f:L})},f:D,fBranche:async(L,F)=>{const U={},j=async()=>{const{données:ie,erreursÉléments:fe,auteurs:xe}=U;if(ie&&fe&&xe&&xe.length){const we=xe.find(J=>J.accepté)?.idCompte;if(!we)return;const G=ie.map(J=>({idCompte:we,élément:J,valid:fe.filter(q=>q.id==J.id)})).filter(J=>T||!J.valid.length);await F(G)}},W=await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:ie})=>await this.client.suivreBdSelonCondition({fRacine:async fe=>await this.client.bds.suivreIdTableauParClef({idBd:L,clef:g,f:ignorerNonDéfinis$1(fe)}),fCondition:async(fe,xe)=>C?(await xe(!0),faisRien$1):(await xe(!0),await this.suivreDifférencesNuéeEtTableau({idNuée:r,clefTableau:g,idTableau:fe,f:async we=>await xe(!we.length),stricte:!1})),f:ie}),f:async ie=>{U.données=ie?.données,U.erreursÉléments=ie?.erreurs,await j()},fSuivre:async({id:ie,fSuivreBd:fe})=>{const xe={},we=[],G=async()=>{const{données:H,erreurs:ve}=xe;H&&await fe({données:H,erreurs:ve||[]})},J=await this.client.tableaux.suivreDonnées({idTableau:ie,f:async H=>{xe.données=H,await G()},clefsSelonVariables:I});we.push(J);const q=await this.client.tableaux.suivreValidDonnées({idTableau:ie,f:async H=>{xe.erreurs=H,await G()}});return we.push(q),async()=>{await Promise.all(we.map(H=>H()))}}}),X=await this.client.réseau.suivreAuteursBd({idBd:L,f:async ie=>{U.auteurs=ie,await j()}});return async()=>{await Promise.all([W,X])}}})}async suivreDonnéesExportationTableau({clefTableau:r,idNuée:g,langues:_,f:x,nRésultatsDésirés:S,héritage:E}){const C={},T=[],R=async()=>{const{colonnes:B,données:D,nomsTableau:N,nomsVariables:M}=C;if(B&&D&&(!_||N&&M)){const O=new Set;let L=await Promise.all(D.map(async j=>({...await this.client.tableaux.formaterÉlément({é:j.élément.données,colonnes:B,fichiersSFIP:O,langues:_}),auteur:j.idCompte})));L=L.map(j=>Object.keys(j).reduce((z,W)=>{if(W==="auteur")z[W]=j[W];else{const X=B.find(fe=>fe.id===W)?.variable;if(!X)throw new Error(`Colonnne avec id ${W} non trouvée parmis les colonnnes :
${JSON.stringify(B,void 0,2)}.`);const ie=_&&M?.[X]&&traduire(M[X],_)||W;z[ie]=j[W]}return z},{}));const F=r.split("/").pop(),U=_&&N&&traduire(N,_)||F;return await x({nomTableau:U,données:L,fichiersSFIP:O})}};if(_){const B=await this.suivreNomsTableauNuée({idNuée:g,clefTableau:r,f:async N=>{C.nomsTableau=N,await R()}});T.push(B);const D=await suivreBdsDeFonctionListe$1({fListe:async N=>this.suivreVariablesNuée({idNuée:g,f:N}),f:async N=>{C.nomsVariables=Object.fromEntries(N.map(M=>[M.idVar,M.noms])),await R()},fBranche:async(N,M)=>await this.client.variables.suivreNomsVariable({idVariable:N,f:async O=>await M({idVar:N,noms:O})})});T.push(D)}const A=await this.suivreColonnesTableauNuée({idNuée:g,clefTableau:r,f:async B=>{C.colonnes=B,await R()},catégories:!0});T.push(A);const{fOublier:I}=await this.suivreDonnéesTableauNuée({idNuée:g,clefTableau:r,nRésultatsDésirés:S,héritage:E,f:async B=>{C.données=B,await R()}});return T.push(I),async()=>{Promise.all(T.map(B=>B()))}}async suivreDonnéesExportation({idNuée:r,langues:g,f:_,nRésultatsDésirés:x,héritage:S}){const E={},C=[],T=async()=>{const{nomsNuée:I,données:B}=E;if(!B)return;const D=r.split("/").pop(),N=I&&g&&traduire(I,g)||D;await _({nomNuée:N,tableaux:B})},R=await suivreBdsDeFonctionListe$1({fListe:async I=>await this.suivreTableauxNuée({idNuée:r,f:I}),f:async I=>{E.données=I,await T()},fBranche:async(I,B)=>await this.suivreDonnéesExportationTableau({idNuée:r,clefTableau:I,langues:g,nRésultatsDésirés:x,héritage:S,f:async D=>await B(D)}),fIdBdDeBranche:I=>I.clef,fCode:I=>I.clef});if(C.push(R),g){const I=await this.suivreNomsNuée({idNuée:r,f:async B=>{E.nomsNuée=B,await T()}});C.push(I)}return async()=>{await Promise.all(C.map(I=>I()))}}async exporterDonnéesNuée({idNuée:r,langues:g,nomFichier:_,nRésultatsDésirés:x,héritage:S,patience:E=500}){const C=utils$5.book_new(),T=new Set,R=await uneFois$2(async A=>await this.suivreDonnéesExportation({idNuée:r,langues:g,f:A,héritage:S,nRésultatsDésirés:x}),attendreStabilité$1(E));_=_||R.nomNuée;for(const A of R.tableaux){A.fichiersSFIP.forEach(B=>T.add(B));const I=utils$5.json_to_sheet(A.données);utils$5.book_append_sheet(C,I,A.nomTableau.slice(0,30))}return{doc:C,fichiersSFIP:T,nomFichier:_}}async générerDeBd({idBd:r,patience:g=500}){const _=await this.créerNuée({}),[x,S,E,C]=await Promise.all([uneFois$2(async T=>await this.client.bds.suivreNomsBd({idBd:r,f:T}),attendreStabilité$1(g)),uneFois$2(async T=>await this.client.bds.suivreDescriptionsBd({idBd:r,f:T}),attendreStabilité$1(g)),uneFois$2(async T=>await this.client.bds.suivreMotsClefsBd({idBd:r,f:T}),attendreStabilité$1(g)),uneFois$2(async T=>await this.client.bds.suivreTableauxBd({idBd:r,f:T}),attendreStabilité$1(g))]);return await Promise.all([this.sauvegarderNomsNuée({idNuée:_,noms:x}),await this.sauvegarderDescriptionsNuée({idNuée:_,descriptions:S}),await this.ajouterMotsClefsNuée({idNuée:_,idsMotsClefs:E})]),await Promise.all(C.map(async T=>{const R=T.id,A=await this.ajouterTableauNuée({idNuée:_,clefTableau:T.clef}),I=await uneFois$2(async B=>await this.client.tableaux.suivreColonnesTableau({idTableau:R,f:B,catégories:!1}),attendreStabilité$1(g));for(const B of I){await this.ajouterColonneTableauNuée({idTableau:A,idVariable:B.variable,idColonne:B.id,index:B.index}),await this.changerColIndexTableauNuée({idTableau:A,idColonne:B.id,val:!!B.index});const D=await uneFois$2(async N=>await this.client.tableaux.suivreRègles({idTableau:R,f:N}),attendreStabilité$1(g));for(const N of D)N.source.type==="tableau"&&await this.ajouterRègleTableauNuée({idTableau:A,idColonne:B.id,règle:N.règle.règle})}})),_}async générerSchémaBdNuée({idNuée:r,licence:g,patience:_=500}){const[x,S]=await Promise.all([uneFois$2(async R=>await this.suivreMotsClefsNuée({idNuée:r,f:R}),attendreStabilité$1(_)),uneFois$2(async R=>await this.suivreTableauxNuée({idNuée:r,f:R}),attendreStabilité$1(_))]),E=async R=>await uneFois$2(async A=>await this.suivreRèglesTableauNuée({idNuée:r,clefTableau:R,f:A}),attendreStabilité$1(_)),C=async R=>await uneFois$2(async A=>await this.suivreColonnesTableauNuée({idNuée:r,clefTableau:R,f:A,catégories:!1}),attendreStabilité$1(_));return{licence:g,nuées:[r],motsClefs:x,tableaux:await Promise.all(S.map(async R=>{const[A,I]=await Promise.all([C(R.clef),E(R.clef)]);return{cols:A.map(B=>{const D=I.some(N=>N.colonne===B.id&&N.règle.règle.typeRègle==="existe");return{idColonne:B.id,idVariable:B.variable,index:!!B.index,optionnelle:!D}}),clef:R.clef}}))}}async effacerNuée({idNuée:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.del(r),await _();for(const S of["noms","descriptions","motsClefs"]){const E=await this.client.obtIdBd({nom:S,racine:r});E&&await this.client.effacerBd({id:E})}const x=await this.client.obtIdBd({nom:"tableaux",racine:r,type:"ordered-keyvalue"});if(x){const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"ordered-keyvalue",schéma:schémaBdTableauxDeBd}),C=Object.keys(S.all);for(const T of C)await this.client.tableaux.effacerTableau({idTableau:T});E(),await this.client.effacerBd({id:x})}await this.enleverDeMesNuées({idNuée:r}),await this.client.favoris.désépinglerFavori({idObjet:r}),await this.client.effacerBd({id:r})}}__decorate([cacheSuivi],Nuées.prototype,"suivreDescriptionsNuée",null);__decorate([cacheSuivi],Nuées.prototype,"suivreImage",null);__decorate([cacheSuivi],Nuées.prototype,"suivreMotsClefsNuée",null);__decorate([cacheSuivi],Nuées.prototype,"suivreNomsTableauNuée",null);__decorate([cacheSuivi],Nuées.prototype,"suivreColonnesTableauNuée",null);__decorate([cacheSuivi],Nuées.prototype,"suivreRèglesTableauNuée",null);__decorate([cacheSuivi],Nuées.prototype,"suivreQualitéNuée",null);__decorate([cacheSuivi],Nuées.prototype,"suivreDifférencesNuéeEtTableau",null);__decorate([cacheSuivi],Nuées.prototype,"suivreDifférencesNuéeEtBd",null);__decorate([cacheSuivi],Nuées.prototype,"suivreCorrespondanceBd",null);__decorate([cacheRechercheParNRésultats],Nuées.prototype,"rechercherNuéesDéscendantes",null);__decorate([cacheSuivi],Nuées.prototype,"suivreNuéesParents",null);__decorate([cacheRechercheParNRésultats],Nuées.prototype,"suivreBdsCorrespondantesDUneNuée",null);__decorate([cacheRechercheParNRésultats],Nuées.prototype,"suivreBdsCorrespondantes",null);__decorate([cacheSuivi],Nuées.prototype,"suivreEmpreinteTêtesBdsNuée",null);__decorate([cacheRechercheParNRésultats],Nuées.prototype,"suivreDonnéesTableauNuée",null);const MAX_TAILLE_IMAGE$2=500*1e3,MAX_TAILLE_IMAGE_VIS$1=1500*1e3,schémaStructureBdProfil={type:"object",properties:{initialisé:{type:"boolean",nullable:!0},image:{type:"string",nullable:!0},contacts:{type:"string",nullable:!0},noms:{type:"string",nullable:!0}},required:[]},schémaContactProfil={type:"object",properties:{type:{type:"string"},contact:{type:"string"}},required:["contact","type"]};class Profil extends ComposanteClientDic{constructor({client:r}){super({client:r,clef:"profil",schémaBdPrincipale:schémaStructureBdProfil})}async suivreRésolutionÉpingle({épingle:r,f:g}){const _=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.base||"TOUS"}),x=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.base||"TOUS"}),S=[];if(_||x){const E=await this.client.suivreBd({id:r.idObjet,type:"keyvalue",schéma:schémaStructureBdProfil,f:async C=>{try{const T=await C.allAsJSON(),R=[];_&&R.push(...[r.idObjet,T.contacts,T.noms].filter(A=>!!A)),x&&T.image&&R.push(T.image),await g(new Set(R))}catch{return}}});S.push(E)}return async()=>{await Promise.all(S.map(E=>E()))}}async initialiser(){const r=await this.obtIdBd(),{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdProfil});await g.set("initialisé",!0),await _()}async suivreInitialisé({f:r,idCompte:g}){return await this.suivreBdPrincipale({idCompte:g,f:async _=>await r(!!_.initialisé)})}async suivreCourriel({f:r,idCompte:g}){return await this.suivreContacts({idCompte:g,f:async _=>await r(_.find(x=>x.type=="courriel")?.contact||null)})}async sauvegarderCourriel({courriel:r}){await this.sauvegarderContact({type:"courriel",contact:r})}async effacerCourriel(){await this.effacerContact({type:"courriel"})}async suivreContacts({f:r,idCompte:g}){return await this.suivreSousBdListe({idCompte:g,clef:"contacts",schéma:schémaContactProfil,f:r})}async sauvegarderContact({type:r,contact:g}){const _=await this.obtIdBd(),x=await this.client.obtIdBd({nom:"contacts",racine:_,type:"set"});if(!x)throw new Error(`Permission de modification refusée pour BD ${_}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"set",schéma:schémaContactProfil});await S.add({type:r,contact:g}),await E()}async effacerContact({type:r,contact:g}){const _=await this.obtIdBd(),x=await this.client.obtIdBd({nom:"contacts",racine:_,type:"set"});if(!x)throw new Error(`Permission de modification refusée pour BD ${_}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"set",schéma:schémaContactProfil}),T=(await S.all()).filter(R=>R.value.type===r&&(g===void 0||R.value.contact===g));await Promise.all(T.map(async R=>await S.del(R.value))),await E()}async suivreNoms({f:r,idCompte:g}){return await this.suivreSousBdDic({idCompte:g,clef:"noms",schéma:schémaStructureBdNoms,f:r})}async sauvegarderNom({langue:r,nom:g}){return await this.sauvegarderNoms({noms:{[r]:g}})}async sauvegarderNoms({noms:r}){const g=await this.obtIdBd(),_=await this.client.obtIdBd({nom:"noms",racine:g,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${g}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const[E,C]of Object.entries(r))await x.set(E,C);await S()}async effacerNom({langue:r}){const g=await this.obtIdBd(),_=await this.client.obtIdBd({nom:"noms",racine:g,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${g}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(r),await S()}async sauvegarderImage({image:r}){if(r.contenu.byteLength>MAX_TAILLE_IMAGE$2)throw new Error("Taille maximale excédée");const g=await this.client.ajouterÀSFIP(r),{bd:_,fOublier:x}=await this.obtBd();await _.set("image",g),await x()}async effacerImage(){const{bd:r,fOublier:g}=await this.obtBd();await r.del("image"),await g()}async suivreImage({f:r,idCompte:g}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:_})=>await this.suivreIdBd({f:_,idCompte:g}),f:ignorerNonDéfinis$1(r),fSuivre:async({id:_,fSuivreBd:x})=>await this.client.suivreBd({id:_,type:"keyvalue",schéma:schémaStructureBdProfil,f:async S=>{const E=await S.get("image");if(E){const C=await this.client.obtFichierSFIP({id:E,max:MAX_TAILLE_IMAGE_VIS$1});return await x(C)}else return await x(null)}})})}}__decorate([cacheSuivi],Profil.prototype,"suivreCourriel",null);__decorate([cacheSuivi],Profil.prototype,"suivreContacts",null);__decorate([cacheSuivi],Profil.prototype,"suivreNoms",null);__decorate([cacheSuivi],Profil.prototype,"suivreImage",null);const schémaStructureBdMotsClefsdeProjet={type:"string"},schémaStuctureBdsDeProjet={type:"string"},MAX_TAILLE_IMAGE$1=500*1e3,MAX_TAILLE_IMAGE_VIS=1500*1e3,schémaBdPrincipale$1={type:"string"},schémaStructureBdProjet={type:"object",properties:{type:{type:"string"},noms:{type:"string"},descriptions:{type:"string"},bds:{type:"string"},image:{type:"string",nullable:!0},motsClefs:{type:"string"},statut:{type:"object",properties:{statut:{type:"string"},idNouvelle:{type:"string",nullable:!0}},required:["statut"]},copiéDe:{type:"object",properties:{id:{type:"string"}},required:["id"],nullable:!0}},required:["noms","descriptions","statut","type","bds"]};class Projets extends ComposanteClientListe{constructor({client:r}){super({client:r,clef:"projets",schémaBdPrincipale:schémaBdPrincipale$1})}async suivreRésolutionÉpingle({épingle:r,f:g}){const _=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.base||"TOUS"}),x=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.fichiersBase||"INSTALLÉ"}),S=r.épingle.bds,E={},C=async()=>await g(new Set(Object.values(E).flat().filter(R=>!!R))),T=[];if(_||x){const R=await this.client.suivreBd({id:r.idObjet,type:"keyvalue",schéma:schémaStructureBdProjet,f:async A=>{try{const I=await A.allAsJSON();_&&(E.base=[r.idObjet,I.descriptions,I.noms,I.bds,I.motsClefs]),x&&(E.fichiersBase=[I.image])}catch{return}await C()}});T.push(R)}if(S){const R=await suivreBdsDeFonctionListe$1({fListe:async A=>await this.suivreBdsProjet({idProjet:r.idObjet,f:A}),fBranche:async(A,I)=>this.client.bds.suivreRésolutionÉpingle({épingle:{idObjet:A,épingle:S},f:B=>I([...B])}),f:async A=>{E.bds=A,await C()}});T.push(R)}return async()=>{await Promise.all(T.map(R=>R()))}}async suivreProjets({f:r,idCompte:g}){return await this.suivreBdPrincipale({idCompte:g,f:r})}async créerProjet({épingler:r=!0}={}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:schémaBdPrincipale$1}),x=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}}),{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdProjet}),C=S.access;if(!estUnContrôleurConstellation(C))throw Error("Contrôleur de type non reconnu.");const T={address:C.address};await S.set("type","projet");const R=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:T});await S.set("noms",R);const A=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:T});await S.set("descriptions",A);const I=await this.client.créerBdIndépendante({type:"set",optionsAccès:T});await S.set("bds",I);const B=await this.client.créerBdIndépendante({type:"set",optionsAccès:T});return await S.set("motsClefs",B),await S.set("statut",{statut:"active"}),await g.add(x),r&&await this.épinglerProjet({idProjet:x}),await Promise.all([_(),E()]),x}async copierProjet({idProjet:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdProjet}),x=await this.créerProjet(),{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdProjet}),C=await g.get("noms");if(C){const{bd:D,fOublier:N}=await this.client.ouvrirBdTypée({id:C,type:"keyvalue",schéma:schémaStructureBdNoms}),M=await D.allAsJSON();await N(),await this.sauvegarderNomsProjet({idProjet:x,noms:M})}const T=await g.get("descriptions");if(T){const{bd:D,fOublier:N}=await this.client.ouvrirBdTypée({id:T,type:"keyvalue",schéma:schémaStructureBdNoms}),M=await D.allAsJSON();await N(),await this.sauvegarderDescriptionsProjet({idProjet:x,descriptions:M})}const R=await g.get("motsClefs");if(R){const{bd:D,fOublier:N}=await this.client.ouvrirBdTypée({id:R,type:"set",schéma:schémaStructureBdMotsClefsdeProjet}),M=(await D.all()).map(O=>O.value);await N(),await this.ajouterMotsClefsProjet({idProjet:x,idsMotsClefs:M})}const A=await g.get("bds");if(A){const{bd:D,fOublier:N}=await this.client.ouvrirBdTypée({id:A,type:"set",schéma:schémaStuctureBdsDeProjet}),M=(await D.all()).map(O=>O.value);await N(),await Promise.all(M.map(async O=>{await this.ajouterBdProjet({idProjet:x,idBd:O})}))}const I=await g.get("statut")||{statut:"active"};await S.set("statut",I);const B=await g.get("image");return B&&await S.set("image",B),await S.set("copiéDe",{id:r}),await Promise.all([_(),E()]),x}async ajouterÀMesProjets({idProjet:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:schémaBdPrincipale$1});await g.add(r),await _()}async enleverDeMesProjets({idProjet:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:await this.obtIdBd(),type:"set",schéma:schémaBdPrincipale$1});await g.del(r),await _()}async épinglerProjet({idProjet:r,options:g={}}){const _=résoudreDéfauts(g,{type:"projet",base:TOUS,fichiersBase:INSTALLÉ,bds:{type:"bd",base:TOUS,fichiersBase:INSTALLÉ,données:{tableaux:TOUS,fichiers:INSTALLÉ}}});await this.client.favoris.épinglerFavori({idObjet:r,épingle:_})}async suivreÉpingleProjet({idProjet:r,f:g,idCompte:_}){return await this.client.favoris.suivreÉtatFavori({idObjet:r,f:async x=>{x?.type==="projet"?await g(x):await g(void 0)},idCompte:_})}async inviterAuteur({idProjet:r,idCompteAuteur:g,rôle:_}){await this.client.donnerAccès({idBd:r,identité:g,rôle:_})}async _obtBdNoms({idProjet:r}){const g=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!g)throw new Error(`Permission de modification refusée pour Projet ${r}.`);return await this.client.ouvrirBdTypée({id:g,type:"keyvalue",schéma:schémaStructureBdNoms})}async sauvegarderNomsProjet({idProjet:r,noms:g}){const{bd:_,fOublier:x}=await this._obtBdNoms({idProjet:r});for(const S in g)await _.set(S,g[S]);await x()}async sauvegarderNomProjet({idProjet:r,langue:g,nom:_}){const{bd:x,fOublier:S}=await this._obtBdNoms({idProjet:r});await x.set(g,_),await S()}async effacerNomProjet({idProjet:r,langue:g}){const{bd:_,fOublier:x}=await this._obtBdNoms({idProjet:r});await _.del(g),await x()}async _obtBdDescr({idProjet:r}){const g=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!g)throw new Error(`Permission de modification refusée pour Projet ${r}.`);return await this.client.ouvrirBdTypée({id:g,type:"keyvalue",schéma:schémaStructureBdNoms})}async sauvegarderDescriptionsProjet({idProjet:r,descriptions:g}){const{bd:_,fOublier:x}=await this._obtBdDescr({idProjet:r});for(const S in g)await _.set(S,g[S]);await x()}async sauvegarderDescriptionProjet({idProjet:r,langue:g,description:_}){const{bd:x,fOublier:S}=await this._obtBdDescr({idProjet:r});await x.set(g,_),await S()}async effacerDescriptionProjet({idProjet:r,langue:g}){const{bd:_,fOublier:x}=await this._obtBdDescr({idProjet:r});await _.del(g),await x()}async _obtBdMotsClefs({idProjet:r}){const g=await this.client.obtIdBd({nom:"motsClefs",racine:r,type:"set"});if(!g)throw new Error(`Permission de modification refusée pour projet ${r}.`);return await this.client.ouvrirBdTypée({id:g,type:"set",schéma:schémaStructureBdMotsClefsdeProjet})}async ajouterMotsClefsProjet({idProjet:r,idsMotsClefs:g}){Array.isArray(g)||(g=[g]);const{bd:_,fOublier:x}=await this._obtBdMotsClefs({idProjet:r});await Promise.all(g.map(async S=>{(await _.all()).map(C=>C.value).includes(S)||await _.add(S)})),await x()}async effacerMotClefProjet({idProjet:r,idMotClef:g}){const{bd:_,fOublier:x}=await this._obtBdMotsClefs({idProjet:r});await _.del(g),await x()}async _obtBdBds({idProjet:r}){const g=await this.client.obtIdBd({nom:"bds",racine:r,type:"set"});if(!g)throw new Error(`Permission de modification refusée pour Projet ${r}.`);return await this.client.ouvrirBdTypée({id:g,type:"set",schéma:schémaStructureBdMotsClefsdeProjet})}async ajouterBdProjet({idProjet:r,idBd:g}){const{bd:_,fOublier:x}=await this._obtBdBds({idProjet:r});await _.add(g),await x()}async effacerBdProjet({idProjet:r,idBd:g}){const{bd:_,fOublier:x}=await this._obtBdBds({idProjet:r});await _.del(g),await x()}async marquerObsolète({idProjet:r,idNouvelle:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdProjet});_.set("statut",{statut:"obsolète",idNouvelle:g}),await x()}async changerStatutProjet({idProjet:r,statut:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdProjet});_.set("statut",g),await x()}async marquerActif({idProjet:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdProjet});g.set("statut",{statut:"active"}),await _()}async marquerJouet({idProjet:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdProjet});g.set("statut",{statut:"jouet"}),await _()}async marquerInterne({idProjet:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdProjet});g.set("statut",{statut:"interne"}),await _()}async sauvegarderImage({idProjet:r,image:g}){if(g.contenu.byteLength>MAX_TAILLE_IMAGE$1)throw new Error("Taille maximale excédée");const _=await this.client.ajouterÀSFIP(g),{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdProjet});await x.set("image",_),await S()}async effacerImage({idProjet:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdProjet});await g.del("image"),await _()}async suivreImage({idProjet:r,f:g}){return await this.client.suivreBd({id:r,type:"keyvalue",schéma:schémaStructureBdProjet,f:async _=>{const x=await _.get("image");if(x){const S=await this.client.obtFichierSFIP({id:x,max:MAX_TAILLE_IMAGE_VIS});return await g(S)}else return await g(null)}})}async suivreNomsProjet({idProjet:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"noms",schéma:schémaStructureBdNoms,f:g})}async suivreDescriptionsProjet({idProjet:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"descriptions",schéma:schémaStructureBdNoms,f:g})}async suivreMotsClefsProjet({idProjet:r,f:g}){const _={},x=async()=>{if(_.propres&&_.bds){const I=[..._.propres.map(B=>({idMotClef:B,source:"projet"})),..._.bds.map(B=>({idMotClef:B,source:"bds"}))];return await g(I)}},S=async I=>(_.propres=I,await x()),E=await this.client.suivreBdListeDeClef({id:r,clef:"motsClefs",schéma:{type:"string"},f:S}),A=await suivreBdsDeFonctionListe$1({fListe:async I=>await this.suivreBdsProjet({idProjet:r,f:I}),f:async I=>(_.bds=I,await x()),fBranche:async(I,B)=>await this.client.bds.suivreMotsClefsBd({idBd:I,f:B})});return async()=>{await E(),await A()}}async suivreBdsProjet({idProjet:r,f:g}){return await this.client.suivreBdListeDeClef({id:r,clef:"bds",schéma:{type:"string"},f:g})}async suivreVariablesProjet({idProjet:r,f:g}){const _=async E=>await g(E||[]),x=async(E,C)=>await this.client.bds.suivreVariablesBd({idBd:E,f:C}),S=async({id:E,fSuivreBd:C})=>await this.client.suivreBdsDeBdListe({id:E,f:C,fBranche:x});return await this.client.suivreBdDeClef({id:r,clef:"bds",f:_,fSuivre:S})}async suivreQualitéProjet({idProjet:r,f:g}){return await suivreBdsDeFonctionListe$1({fListe:async C=>await this.suivreBdsProjet({idProjet:r,f:C}),f:async C=>await g(C.length?C.reduce((T,R)=>T+R,0)/C.length:0),fBranche:async(C,T)=>await this.client.bds.suivreQualitéBd({idBd:C,f:R=>T(R.total)}),fRéduction:C=>C.flat()})}async suivreDonnéesExportation({idProjet:r,langues:g,f:_}){const x={},S=[],E=async()=>{const{nomsProjet:T,données:R}=x;if(!R)return;const A=r.split("/").pop(),I=T&&g&&traduire(T,g)||A;return await _({nomProjet:I,bds:R})},C=await suivreBdsDeFonctionListe$1({fListe:async T=>await this.suivreBdsProjet({idProjet:r,f:T}),f:async T=>{x.données=T,await E()},fBranche:async(T,R)=>await this.client.bds.suivreDonnéesExportation({idBd:T,langues:g,f:R})});if(S.push(C),g){const T=await this.suivreNomsProjet({idProjet:r,f:async R=>{x.nomsProjet=R,await E()}});S.push(T)}return async()=>{await Promise.all(S.map(T=>T()))}}async exporterDonnées({idProjet:r,langues:g,nomFichier:_,patience:x=500}){const S=await uneFois$2(async C=>await this.suivreDonnéesExportation({idProjet:r,langues:g,f:C}),attendreStabilité$1(x));_=_||S.nomProjet;const E=new Set;return S.bds.forEach(C=>{C.tableaux.forEach(T=>T.fichiersSFIP.forEach(R=>E.add(R)))}),{docs:S.bds.map(C=>{const T=utils$5.book_new();for(const R of C.tableaux){const A=utils$5.json_to_sheet(R.données);utils$5.book_append_sheet(T,A,R.nomTableau.slice(0,30))}return{doc:T,nom:C.nomBd}}),fichiersSFIP:E,nomFichier:_}}async exporterDocumentDonnées({données:r,formatDoc:g,dossier:_="",inclureFichiersSFIP:x=!0}){const{docs:S,fichiersSFIP:E,nomFichier:C}=r,R={xls:"biff8"}[g]||g,A=S.map(B=>({nom:`${B.nom}.${g}`,octets:writeSync(B.doc,{bookType:R,type:"buffer"})})),I=x?await Promise.all([...E].map(async B=>({nom:B.replace("/","-"),octets:await toBuffer(await this.client.obtItérableAsyncSFIP({id:B}))}))):[];await zipper(A,I,path.join(_,C))}async effacerProjet({idProjet:r}){await this.enleverDeMesProjets({idProjet:r}),await this.client.favoris.désépinglerFavori({idObjet:r});for(const g of["noms","descriptions","motsClefs","bds"]){const _=await this.client.obtIdBd({nom:g,racine:r});_&&await this.client.effacerBd({id:_})}await this.client.effacerBd({id:r})}}__decorate([cacheSuivi],Projets.prototype,"suivreProjets",null);__decorate([cacheSuivi],Projets.prototype,"suivreImage",null);__decorate([cacheSuivi],Projets.prototype,"suivreNomsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreDescriptionsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreMotsClefsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreBdsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreVariablesProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreQualitéProjet",null);function reverse(n){return n.split("").reverse().join("")}function findMatchStarts(n,r,g){const _=reverse(r);return g.map(x=>{const S=Math.max(0,x.end-r.length-x.errors),E=reverse(n.slice(S,x.end));return{start:findMatchEnds(E,_,x.errors).reduce((T,R)=>x.end-R.end<T?x.end-R.end:T,x.end),end:x.end,errors:x.errors}})}function oneIfNotZero(n){return(n|-n)>>31&1}function advanceBlock(n,r,g,_){let x=n.P[g],S=n.M[g];const E=_>>>31,C=r[g]|E,T=C|S,R=(C&x)+x^x|C;let A=S|~(R|x),I=x&R;const B=oneIfNotZero(A&n.lastRowMask[g])-oneIfNotZero(I&n.lastRowMask[g]);return A<<=1,I<<=1,I|=E,A|=oneIfNotZero(_)-E,x=I|~(T|A),S=A&T,n.P[g]=x,n.M[g]=S,B}function findMatchEnds(n,r,g){if(r.length===0)return[];g=Math.min(g,r.length);const _=[],x=32,S=Math.ceil(r.length/x)-1,E={P:new Uint32Array(S+1),M:new Uint32Array(S+1),lastRowMask:new Uint32Array(S+1)};E.lastRowMask.fill(1<<31),E.lastRowMask[S]=1<<(r.length-1)%x;const C=new Uint32Array(S+1),T=new Map,R=[];for(let B=0;B<256;B++)R.push(C);for(let B=0;B<r.length;B+=1){const D=r.charCodeAt(B);if(T.has(D))continue;const N=new Uint32Array(S+1);T.set(D,N),D<R.length&&(R[D]=N);for(let M=0;M<=S;M+=1){N[M]=0;for(let O=0;O<x;O+=1){const L=M*x+O;if(L>=r.length)continue;r.charCodeAt(L)===D&&(N[M]|=1<<O)}}}let A=Math.max(0,Math.ceil(g/x)-1);const I=new Uint32Array(S+1);for(let B=0;B<=A;B+=1)I[B]=(B+1)*x;I[S]=r.length;for(let B=0;B<=A;B+=1)E.P[B]=-1,E.M[B]=0;for(let B=0;B<n.length;B+=1){const D=n.charCodeAt(B);let N;D<R.length?N=R[D]:(N=T.get(D),typeof N>"u"&&(N=C));let M=0;for(let O=0;O<=A;O+=1)M=advanceBlock(E,N,O,M),I[O]+=M;if(I[A]-M<=g&&A<S&&(N[A+1]&1||M<0)){A+=1,E.P[A]=-1,E.M[A]=0;let O;if(A===S){const L=r.length%x;O=L===0?x:L}else O=x;I[A]=I[A-1]+O-M+advanceBlock(E,N,A,M)}else for(;A>0&&I[A]>=g+x;)A-=1;A===S&&I[A]<=g&&(I[A]<g&&_.splice(0,_.length),_.push({start:-1,end:B+1,errors:I[A]}),g=I[A])}return _}function search(n,r,g){const _=findMatchEnds(n,r,g);return findMatchStarts(n,r,_)}var average,hasRequiredAverage;function requireAverage(){if(hasRequiredAverage)return average;hasRequiredAverage=1,average=function(g){return g.reduce(n,0)/g.length};function n(r,g){return r+g}return average}var variance,hasRequiredVariance;function requireVariance(){if(hasRequiredVariance)return variance;hasRequiredVariance=1;var n=requireAverage();return variance=function(g){var _=n(g);function x(S,E){var C=E-_;return S+C*C}return g.reduce(x,0)/g.length},variance}var covariance,hasRequiredCovariance;function requireCovariance(){if(hasRequiredCovariance)return covariance;hasRequiredCovariance=1;var n=requireAverage();return covariance=function(g,_){for(var x=g.length,S=0,E=n(g),C=n(_),T=[];S<x;S+=1){var R=g[S]-E,A=_[S]-C;T.push(R*A)}return n(T)},covariance}var ssim$1,hasRequiredSsim;function requireSsim(){if(hasRequiredSsim)return ssim$1;hasRequiredSsim=1;var n=requireAverage(),r=requireVariance(),g=requireCovariance();return ssim$1=function(x,S,E){E=E||{};var C="K1"in E?E.K1:.01,T="K2"in E?E.K2:.03,R="L"in E?E.L:255,A="alpha"in E?E.alpha:1,I="beta"in E?E.beta:1,B="gamma"in E?E.gamma:1,D=C*R*(C*R),N=T*R*(T*R),M=N/2;function O(W,X){var ie=n(W),fe=n(X);return(2*ie*fe+D)/(ie*ie+fe*fe+D)}function L(W,X){var ie=r(W),fe=r(X),xe=Math.sqrt(ie),we=Math.sqrt(fe);return(2*xe*we+N)/(ie+fe+N)}function F(W,X){var ie=Math.sqrt(r(W)),fe=Math.sqrt(r(X)),xe=g(W,X);return(xe+M)/(ie*fe+M)}var U=Math.pow(O(x,S),A),j=Math.pow(L(x,S),I),z=Math.pow(F(x,S),B);return U*j*z},ssim$1}var ssimExports=requireSsim();const ssim=getDefaultExportFromCjs(ssimExports),rechercherDansTexte=(n,r)=>{const _=search(r,n,Math.ceil(n.length/4)).sort((x,S)=>x.errors>S.errors?1:-1)[0];if(_)return{type:"texte",score:1/(_.errors+1),début:_.start,fin:_.end}},similTexte=(n,r)=>(Array.isArray(r)&&(r=Object.fromEntries(r.map(x=>[x,x]))),Object.entries(r).map(([x,S])=>{const E=rechercherDansTexte(n,S);if(E){const{score:C,début:T,fin:R}=E;return{type:"résultat",score:C,clef:x,info:{type:"texte",texte:S,début:T,fin:R}}}}).filter(x=>x).sort((x,S)=>x.score>S.score?-1:1)[0]),similImages=(n,r)=>{if(!r)return 0;const{mssim:g}=ssim(n,r);return g},combinerRecherches=async(n,r,g,_)=>{const x=[],S=Object.fromEntries(Object.keys(n).map(C=>[C,void 0])),E=()=>{const C=Object.values(S).filter(T=>T).sort((T,R)=>aMieuxQueB(T,R)?-1:1)[0];_(C)};return await Promise.all(Object.entries(n).map(async([C,T])=>{const R=async A=>{S[C]=A,E()};x.push(await T(r,g,R))})),async()=>{await Promise.all(x.map(C=>C()))}},sousRecherche=async(n,r,g,_,x)=>await suivreBdsDeFonctionListe$1({fListe:r,f:async T=>{const R=meilleurRésultat(T);if(R){const A={type:"résultat",de:n,clef:R.id,score:R.résultat.score,info:{type:"résultat",de:R.résultat.de,info:R.résultat.info}};R.résultat.clef&&(A.info.clef=R.résultat.clef),await x(A)}},fBranche:async(T,R)=>await g(_,T,async A=>{A&&R({id:T,résultat:A})})}),aMieuxQueB=(n,r)=>{const g=(x,S)=>{for(;x.type==="résultat";)x=x.info;for(;S.type==="résultat";)S=S.info;const E=["vide","texte"],C=E.indexOf(x.type),T=E.indexOf(S.type);return C>T},_=(x,S)=>{for(;x.type==="résultat";)x=x.info;for(;S.type==="résultat";)S=S.info;switch(x.type){case"texte":return S.type==="texte"?x.fin-x.début>S.fin-S.début:!1;default:return!1}};return n.score>r.score?!0:n.score<r.score?!1:_(n.info,r.info)?!0:g(n.info,r.info)},meilleurRésultat=n=>Object.values(n).filter(g=>g).sort((g,_)=>aMieuxQueB(g.résultat,_.résultat)?-1:1)[0],rechercherSelonId=n=>async(r,g,_)=>{const x=rechercherDansTexte(n,g);if(x){const{score:S,début:E,fin:C}=x;await _({score:S,type:"résultat",de:"id",info:{type:"texte",début:E,fin:C,texte:g}})}else await _();return faisRien$1},rechercherTous=()=>async(n,r,g)=>(await g({type:"résultat",score:1,de:"*",info:{type:"vide"}}),faisRien$1),rechercherTousSiVide=n=>async(r,g,_)=>(n===""&&await _({type:"résultat",score:1,de:"*",info:{type:"vide"}}),faisRien$1),rechercherMotsClefsSelonNom=n=>async(r,g,_)=>{const x=async E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;return await _({type:"résultat",score:T,clef:R,info:A,de:"nom"})}else return await _()};return await r.motsClefs.suivreNomsMotClef({idMotClef:g,f:x})},rechercherMotsClefsSelonDescr=n=>async(r,g,_)=>{const x=async E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;return await _({type:"résultat",score:T,clef:R,info:A,de:"descr"})}else return await _()};return await r.motsClefs.suivreDescriptionsMotClef({idMotClef:g,f:x})},rechercherMotsClefsSelonTexte=n=>async(r,g,_)=>{const x=rechercherMotsClefsSelonNom(n),S=rechercherMotsClefsSelonDescr(n),E=rechercherSelonId(n),C=rechercherTousSiVide(n);return await combinerRecherches({noms:x,id:E,descr:S,vide:C},r,g,_)},rechercherVariablesSelonNom=n=>async(r,g,_)=>{const x=async E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;return await _({type:"résultat",score:T,de:"nom",clef:R,info:A})}else return await _()};return await r.variables.suivreNomsVariable({idVariable:g,f:x})},rechercherVariablesSelonDescr=n=>async(r,g,_)=>{const x=async E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;return await _({type:"résultat",score:T,de:"descr",clef:R,info:A})}else return await _()};return await r.variables.suivreDescriptionsVariable({idVariable:g,f:x})},rechercherVariablesSelonTexte=n=>async(r,g,_)=>{const x=rechercherVariablesSelonNom(n),S=rechercherVariablesSelonDescr(n),E=rechercherSelonId(n),C=rechercherTousSiVide(n);return await combinerRecherches({noms:x,descr:S,id:E,vide:C},r,g,_)},rechercherBdsSelonNom=n=>async(r,g,_)=>{const x=async E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;return await _({type:"résultat",score:T,clef:R,info:A,de:"nom"})}else return await _()};return await r.bds.suivreNomsBd({idBd:g,f:x})},rechercherBdsSelonDescr=n=>async(r,g,_)=>{const x=async E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;return await _({type:"résultat",score:T,clef:R,info:A,de:"descr"})}else return await _()};return await r.bds.suivreDescriptionsBd({idBd:g,f:x})},rechercherBdsSelonIdVariable=n=>async(r,g,_)=>{const x=async E=>await r.bds.suivreVariablesBd({idBd:g,f:E}),S=rechercherSelonId(n);return await sousRecherche("variable",x,S,r,_)},rechercherBdsSelonNomVariable=n=>async(r,g,_)=>{const x=async E=>await r.bds.suivreVariablesBd({idBd:g,f:E}),S=rechercherVariablesSelonNom(n);return await sousRecherche("variable",x,S,r,_)},rechercherBdsSelonVariable=n=>async(r,g,_)=>await combinerRecherches({id:rechercherBdsSelonIdVariable(n),nom:rechercherBdsSelonNomVariable(n)},r,g,_),rechercherBdsSelonIdMotClef=n=>async(r,g,_)=>{const x=async E=>await r.bds.suivreMotsClefsBd({idBd:g,f:E}),S=rechercherSelonId(n);return await sousRecherche("motClef",x,S,r,_)},rechercherBdsSelonNomMotClef=n=>async(r,g,_)=>{const x=async E=>await r.bds.suivreMotsClefsBd({idBd:g,f:E}),S=rechercherMotsClefsSelonNom(n);return await sousRecherche("motClef",x,S,r,_)},rechercherBdsSelonMotClef=n=>async(r,g,_)=>await combinerRecherches({id:rechercherBdsSelonIdMotClef(n),nom:rechercherBdsSelonNomMotClef(n)},r,g,_),rechercherBdsSelonTexte=n=>async(r,g,_)=>await combinerRecherches({nom:rechercherBdsSelonNom(n),descr:rechercherBdsSelonDescr(n),variables:rechercherBdsSelonVariable(n),motsClefs:rechercherBdsSelonMotClef(n),id:rechercherSelonId(n),vide:rechercherTousSiVide(n)},r,g,_),rechercherNuéesSelonNom=n=>async(r,g,_)=>{const x=E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;_({type:"résultat",score:T,clef:R,info:A,de:"nom"})}else _()};return await r.nuées.suivreNomsNuée({idNuée:g,f:x})},rechercherNuéesSelonDescr=n=>async(r,g,_)=>{const x=E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;_({type:"résultat",score:T,clef:R,info:A,de:"descr"})}else _()};return await r.nuées.suivreDescriptionsNuée({idNuée:g,f:x})},rechercherNuéesSelonIdVariable=n=>async(r,g,_)=>{const x=async E=>await r.nuées.suivreVariablesNuée({idNuée:g,f:E}),S=rechercherSelonId(n);return await sousRecherche("variable",x,S,r,_)},rechercherNuéesSelonNomVariable=n=>async(r,g,_)=>{const x=async E=>await r.nuées.suivreVariablesNuée({idNuée:g,f:E}),S=rechercherVariablesSelonNom(n);return await sousRecherche("variable",x,S,r,_)},rechercherNuéesSelonVariable=n=>async(r,g,_)=>await combinerRecherches({id:rechercherNuéesSelonIdVariable(n),nom:rechercherNuéesSelonNomVariable(n)},r,g,_),rechercherNuéesSelonIdMotClef=n=>async(r,g,_)=>{const x=async E=>await r.nuées.suivreMotsClefsNuée({idNuée:g,f:E}),S=rechercherSelonId(n);return await sousRecherche("motClef",x,S,r,_)},rechercherNuéesSelonNomMotClef=n=>async(r,g,_)=>{const x=async E=>await r.nuées.suivreMotsClefsNuée({idNuée:g,f:E}),S=rechercherMotsClefsSelonNom(n);return await sousRecherche("motClef",x,S,r,_)},rechercherNuéesSelonMotClef=n=>async(r,g,_)=>await combinerRecherches({id:rechercherNuéesSelonIdMotClef(n),nom:rechercherNuéesSelonNomMotClef(n)},r,g,_),rechercherNuéesSelonTexte=n=>async(r,g,_)=>await combinerRecherches({nom:rechercherNuéesSelonNom(n),descr:rechercherNuéesSelonDescr(n),variables:rechercherNuéesSelonVariable(n),motsClefs:rechercherNuéesSelonMotClef(n),id:rechercherSelonId(n),tous:rechercherTousSiVide(n)},r,g,_),rechercherProfilsSelonActivité=()=>async(n,r,g)=>{const _={noms:void 0,image:void 0,courriel:void 0},x=()=>({type:"résultat",score:[Object.keys(_.noms||{}).length>0,_.image,_.courriel].filter(Boolean).length/3,de:"activité",info:{type:"vide"}}),S=B=>{_.noms=B,g(x())},E=B=>{_.image=B,g(x())},C=B=>{_.courriel=B,g(x())},T=await n.profil.suivreNoms({idCompte:r,f:S}),R=await n.profil.suivreImage({idCompte:r,f:E}),A=await n.profil.suivreCourriel({idCompte:r,f:C});return async()=>{await Promise.all([T(),R(),A()])}},rechercherProfilsSelonNom=n=>async(r,g,_)=>{const x=E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;_({type:"résultat",score:T,clef:R,info:A,de:"nom"})}else _()};return await r.profil.suivreNoms({idCompte:g,f:x})},rechercherProfilsSelonCourriel=n=>async(r,g,_)=>{const x=E=>{const C=E?rechercherDansTexte(n,E):void 0;if(C&&E){const{score:T,début:R,fin:A}=C;_({type:"résultat",score:T,de:"courriel",info:{type:"texte",début:R,fin:A,texte:E}})}else _()};return await r.profil.suivreCourriel({idCompte:g,f:x})},rechercherProfilsSelonTexte=n=>async(r,g,_)=>{const x=rechercherProfilsSelonNom(n),S=rechercherProfilsSelonCourriel(n),E=rechercherSelonId(n),C=rechercherTousSiVide(n);return await combinerRecherches({noms:x,courriel:S,id:E,vide:C},r,g,_)},rechercherProfilsSelonImage=n=>async(r,g,_)=>{const x=E=>{const C=similImages(n,E);_({type:"résultat",score:C,de:"image",info:{type:"vide"}})};return await r.profil.suivreImage({idCompte:g,f:x})},rechercherProjetsSelonNom=n=>async(r,g,_)=>{const x=E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;_({type:"résultat",score:T,clef:R,info:A,de:"nom"})}else _()};return await r.projets.suivreNomsProjet({idProjet:g,f:x})},rechercherProjetsSelonDescr=n=>async(r,g,_)=>{const x=E=>{const C=similTexte(n,E);if(C){const{score:T,clef:R,info:A}=C;_({type:"résultat",score:T,clef:R,info:A,de:"descr"})}else _()};return await r.projets.suivreDescriptionsProjet({idProjet:g,f:x})},rechercherProjetsSelonIdBd=n=>async(r,g,_)=>{const x=async E=>await r.projets.suivreBdsProjet({idProjet:g,f:E}),S=rechercherSelonId(n);return await sousRecherche("bd",x,S,r,_)},rechercherProjetsSelonBd=n=>async(r,g,_)=>{const x=async E=>await r.projets.suivreBdsProjet({idProjet:g,f:E}),S=rechercherBdsSelonTexte(n);return await sousRecherche("bd",x,S,r,_)},rechercherProjetsSelonIdVariable=n=>async(r,g,_)=>{const x=async E=>await r.projets.suivreVariablesProjet({idProjet:g,f:E}),S=rechercherSelonId(n);return await sousRecherche("variable",x,S,r,_)},rechercherProjetsSelonNomVariable=n=>async(r,g,_)=>{const x=async E=>await r.projets.suivreVariablesProjet({idProjet:g,f:E}),S=rechercherVariablesSelonNom(n);return await sousRecherche("variable",x,S,r,_)},rechercherProjetsSelonVariable=n=>async(r,g,_)=>{const x=async E=>await r.projets.suivreVariablesProjet({idProjet:g,f:E}),S=rechercherVariablesSelonTexte(n);return await sousRecherche("variable",x,S,r,_)},rechercherProjetsSelonIdMotClef=n=>async(r,g,_)=>{const x=async E=>await r.projets.suivreMotsClefsProjet({idProjet:g,f:C=>E(C.map(T=>T.idMotClef))}),S=rechercherSelonId(n);return await sousRecherche("motClef",x,S,r,_)},rechercherProjetsSelonNomMotClef=n=>async(r,g,_)=>{const x=async E=>await r.projets.suivreMotsClefsProjet({idProjet:g,f:C=>E(C.map(T=>T.idMotClef))}),S=rechercherMotsClefsSelonNom(n);return await sousRecherche("motClef",x,S,r,_)},rechercherProjetsSelonMotClef=n=>async(r,g,_)=>{const x=async E=>await r.projets.suivreMotsClefsProjet({idProjet:g,f:C=>E(C.map(T=>T.idMotClef))}),S=rechercherMotsClefsSelonTexte(n);return await sousRecherche("motClef",x,S,r,_)},rechercherProjetsSelonTexte=n=>async(r,g,_)=>{const x=rechercherProjetsSelonNom(n),S=rechercherProjetsSelonDescr(n),E=rechercherProjetsSelonBd(n),C=rechercherProjetsSelonVariable(n),T=rechercherProjetsSelonMotClef(n),R=rechercherSelonId(n),A=rechercherTousSiVide(n);return await combinerRecherches({noms:x,descr:S,bd:E,variable:C,motClef:T,id:R,tous:A},r,g,_)};class Recherche{client;constructor({client:r}){this.client=r}async rechercherVariables({f:r,nRésultatsDésirés:g,toutLeRéseau:_=!0}){return await this.client.réseau.rechercherVariables({f:r,nRésultatsDésirés:g,toutLeRéseau:_})}async rechercherVariablesSelonId({idVariable:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherSelonId(r);return await this.client.réseau.rechercherVariables({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherVariablesSelonNom({nomVariable:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherVariablesSelonNom(r);return await this.client.réseau.rechercherVariables({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherVariablesSelonDescr({descrVariable:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherVariablesSelonDescr(r);return await this.client.réseau.rechercherVariables({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherVariablesSelonTexte({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherVariablesSelonTexte(r);return await this.client.réseau.rechercherVariables({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherMotsClefs({f:r,nRésultatsDésirés:g,toutLeRéseau:_=!0}){return await this.client.réseau.rechercherMotsClefs({f:r,nRésultatsDésirés:g,toutLeRéseau:_})}async rechercherMotsClefsSelonId({idMotClef:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherSelonId(r);return await this.client.réseau.rechercherMotsClefs({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherMotsClefsSelonNom({nomMotClef:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherMotsClefsSelonNom(r);return await this.client.réseau.rechercherMotsClefs({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherMotsClefsSelonDescr({descrMotClef:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherMotsClefsSelonDescr(r);return await this.client.réseau.rechercherMotsClefs({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherMotsClefsSelonTexte({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherMotsClefsSelonTexte(r);return await this.client.réseau.rechercherMotsClefs({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBds({f:r,nRésultatsDésirés:g,toutLeRéseau:_=!0}){return await this.client.réseau.rechercherBds({f:r,nRésultatsDésirés:g,toutLeRéseau:_})}async rechercherBdsSelonId({idBd:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherSelonId(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBdsSelonNom({nomBd:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherBdsSelonNom(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBdsSelonDescr({descrBd:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherBdsSelonDescr(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBdsSelonIdMotClef({idMotClef:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherBdsSelonIdMotClef(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBdsSelonIdVariable({idVariable:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherBdsSelonIdVariable(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBdsSelonNomMotClef({nomMotClef:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherBdsSelonNomMotClef(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBdsSelonNomVariable({nomVariable:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherBdsSelonNomVariable(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBdsSelonMotClef({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherBdsSelonMotClef(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBdsSelonVariable({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherBdsSelonVariable(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherBdsSelonTexte({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherBdsSelonTexte(r);return await this.client.réseau.rechercherBds({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProfilsSelonId({idCompte:r,f:g,nRésultatsDésirés:_}){const x=rechercherSelonId(r);return await this.client.réseau.rechercherMembres({f:g,nRésultatsDésirés:_,fObjectif:x})}async rechercherProfilsSelonNom({nom:r,f:g,nRésultatsDésirés:_}){const x=rechercherProfilsSelonNom(r);return await this.client.réseau.rechercherMembres({f:g,nRésultatsDésirés:_,fObjectif:x})}async rechercherProfilsSelonImage({image:r,f:g,nRésultatsDésirés:_}){const x=rechercherProfilsSelonImage(r);return await this.client.réseau.rechercherMembres({f:g,nRésultatsDésirés:_,fObjectif:x})}async rechercherProfilsSelonActivité({f:r,nRésultatsDésirés:g}){const _=rechercherProfilsSelonActivité();return await this.client.réseau.rechercherMembres({f:r,nRésultatsDésirés:g,fObjectif:_})}async rechercherProfilsSelonCourriel({courriel:r,f:g,nRésultatsDésirés:_}){const x=rechercherProfilsSelonCourriel(r);return await this.client.réseau.rechercherMembres({f:g,nRésultatsDésirés:_,fObjectif:x})}async rechercherProfilsSelonTexte({texte:r,f:g,nRésultatsDésirés:_}){const x=rechercherProfilsSelonTexte(r);return await this.client.réseau.rechercherMembres({f:g,nRésultatsDésirés:_,fObjectif:x})}async rechercherProjets({f:r,nRésultatsDésirés:g,toutLeRéseau:_=!0}){return await this.client.réseau.rechercherProjets({f:r,nRésultatsDésirés:g,toutLeRéseau:_})}async rechercherProjetsSelonId({idProjet:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherSelonId(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonNom({nomProjet:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonNom(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonDescr({descrProjet:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonDescr(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonIdVariable({idVariable:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonIdVariable(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonNomVariable({nomVariable:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonNomVariable(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonVariable({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonVariable(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonIdMotClef({idMotClef:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonIdMotClef(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonNomMotClef({nomMotClef:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonNomMotClef(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonMotClef({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonMotClef(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonIdBd({idBd:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonIdBd(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonBd({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonBd(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherProjetsSelonTexte({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherProjetsSelonTexte(r);return await this.client.réseau.rechercherProjets({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuées({f:r,nRésultatsDésirés:g,toutLeRéseau:_=!0}){return await this.client.réseau.rechercherNuées({f:r,nRésultatsDésirés:g,toutLeRéseau:_})}async rechercherNuéesSelonId({idNuée:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherSelonId(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuéesSelonNom({nomNuée:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherNuéesSelonNom(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuéesSelonDescr({descrNuée:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherNuéesSelonDescr(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuéesSelonIdMotClef({idMotClef:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherNuéesSelonIdMotClef(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuéesSelonIdVariable({idVariable:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherNuéesSelonIdVariable(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuéesSelonNomMotClef({nomMotClef:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherNuéesSelonNomMotClef(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuéesSelonNomVariable({nomVariable:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherNuéesSelonNomVariable(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuéesSelonMotClef({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherNuéesSelonMotClef(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuéesSelonVariable({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherNuéesSelonVariable(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}async rechercherNuéesSelonTexte({texte:r,f:g,nRésultatsDésirés:_,toutLeRéseau:x=!0}){const S=rechercherNuéesSelonTexte(r);return await this.client.réseau.rechercherNuées({f:g,nRésultatsDésirés:_,fObjectif:S,toutLeRéseau:x})}}__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariables",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariablesSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariablesSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariablesSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariablesSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotsClefs",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotsClefsSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotsClefsSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotsClefsSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotsClefsSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBds",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonIdMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonIdVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonNomMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonNomVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdsSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilsSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilsSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilsSelonImage",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilsSelonActivité",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilsSelonCourriel",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilsSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjets",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonIdVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonNomVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonIdMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonNomMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonIdBd",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonBd",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetsSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuées",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonIdMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonIdVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonNomMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonNomVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéesSelonTexte",null);class Parser{index=0;input="";new(r){return this.index=0,this.input=r,this}readAtomically(r){const g=this.index,_=r();return _===void 0&&(this.index=g),_}parseWith(r){const g=r();if(this.index===this.input.length)return g}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(r){return this.readAtomically(()=>{const g=this.readChar();if(g===r)return g})}readSeparator(r,g,_){return this.readAtomically(()=>{if(!(g>0&&this.readGivenChar(r)===void 0))return _()})}readNumber(r,g,_,x){return this.readAtomically(()=>{let S=0,E=0;const C=this.peekChar();if(C===void 0)return;const T=C==="0",R=2**(8*x)-1;for(;;){const A=this.readAtomically(()=>{const I=this.readChar();if(I===void 0)return;const B=Number.parseInt(I,r);if(!Number.isNaN(B))return B});if(A===void 0)break;if(S*=r,S+=A,S>R||(E+=1,g!==void 0&&E>g))return}if(E!==0)return!_&&T&&E>1?void 0:S})}readIPv4Addr(){return this.readAtomically(()=>{const r=new Uint8Array(4);for(let g=0;g<r.length;g++){const _=this.readSeparator(".",g,()=>this.readNumber(10,3,!1,1));if(_===void 0)return;r[g]=_}return r})}readIPv6Addr(){const r=g=>{for(let _=0;_<g.length/2;_++){const x=_*2;if(_<g.length-3){const E=this.readSeparator(":",_,()=>this.readIPv4Addr());if(E!==void 0)return g[x]=E[0],g[x+1]=E[1],g[x+2]=E[2],g[x+3]=E[3],[x+4,!0]}const S=this.readSeparator(":",_,()=>this.readNumber(16,4,!0,2));if(S===void 0)return[x,!1];g[x]=S>>8,g[x+1]=S&255}return[g.length,!1]};return this.readAtomically(()=>{const g=new Uint8Array(16),[_,x]=r(g);if(_===16)return g;if(x||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const S=new Uint8Array(14),E=16-(_+2),[C]=r(S.subarray(0,E));return g.set(S.subarray(0,C),16-C),g})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const MAX_IPV6_LENGTH=45,MAX_IPV4_LENGTH=15,parser=new Parser;function parseIPv4(n){if(!(n.length>MAX_IPV4_LENGTH))return parser.new(n).parseWith(()=>parser.readIPv4Addr())}function parseIPv6(n){if(n.includes("%")&&(n=n.split("%")[0]),!(n.length>MAX_IPV6_LENGTH))return parser.new(n).parseWith(()=>parser.readIPv6Addr())}function parseIP(n){if(n.includes("%")&&(n=n.split("%")[0]),!(n.length>MAX_IPV6_LENGTH))return parser.new(n).parseWith(()=>parser.readIPAddr())}function allFF(n,r,g){let _=0;for(const x of n)if(!(_<r)){if(_>g)break;if(x!==255)return!1;_++}return!0}function deepEqual$1(n,r,g,_){let x=0;for(const S of n)if(!(x<g)){if(x>_)break;if(S!==r[x])return!1;x++}return!0}function ipToString(n){switch(n.length){case IPv4Len:return n.join(".");case IPv6Len:{const r=[];for(let g=0;g<n.length;g++)g%2===0&&r.push(n[g].toString(16).padStart(2,"0")+n[g+1].toString(16).padStart(2,"0"));return r.join(":")}default:throw new Error("Invalid ip length")}}function simpleMaskLength(n){let r=0;for(let[g,_]of n.entries()){if(_===255){r+=8;continue}for(;_&128;)r++,_=_<<1;if(_&128)return-1;for(let x=g+1;x<n.length;x++)if(n[x]!=0)return-1;break}return r}function maskToHex(n){let r="0x";for(const g of n)r+=(g>>4).toString(16)+(g&15).toString(16);return r}const IPv4Len=4,IPv6Len=16,ipv4Prefix=new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);function maskIp(n,r){r.length===IPv6Len&&n.length===IPv4Len&&allFF(r,0,11)&&(r=r.slice(12)),r.length===IPv4Len&&n.length===IPv6Len&&deepEqual$1(n,ipv4Prefix,0,11)&&(n=n.slice(12));const g=n.length;if(g!=r.length)throw new Error("Failed to mask ip");const _=new Uint8Array(g);for(let x=0;x<g;x++)_[x]=n[x]&r[x];return _}function containsIp(n,r){if(typeof r=="string"&&(r=parseIP(r)),r==null)throw new Error("Invalid ip");if(r.length!==n.network.length)return!1;for(let g=0;g<r.length;g++)if((n.network[g]&n.mask[g])!==(r[g]&n.mask[g]))return!1;return!0}function parseCidr(n){const[r,g]=n.split("/");if(!r||!g)throw new Error("Failed to parse given CIDR: "+n);let _=IPv4Len,x=parseIPv4(r);if(x==null&&(_=IPv6Len,x=parseIPv6(r),x==null))throw new Error("Failed to parse given CIDR: "+n);const S=parseInt(g,10);if(Number.isNaN(S)||String(S).length!==g.length||S<0||S>_*8)throw new Error("Failed to parse given CIDR: "+n);const E=cidrMask(S,8*_);return{network:maskIp(x,E),mask:E}}function cidrMask(n,r){if(r!==8*IPv4Len&&r!==8*IPv6Len)throw new Error("Invalid CIDR mask");if(n<0||n>r)throw new Error("Invalid CIDR mask");const g=r/8,_=new Uint8Array(g);for(let x=0;x<g;x++){if(n>=8){_[x]=255,n-=8;continue}_[x]=255-(255>>n),n=0}return _}class IpNet{constructor(r,g){if(g==null)({network:this.network,mask:this.mask}=parseCidr(r));else{const _=parseIP(r);if(_==null)throw new Error("Failed to parse network");g=String(g);const x=parseInt(g,10);if(Number.isNaN(x)||String(x).length!==g.length||x<0||x>_.length*8){const S=parseIP(g);if(S==null)throw new Error("Failed to parse mask");this.mask=S}else this.mask=cidrMask(x,8*_.length);this.network=maskIp(_,this.mask)}}contains(r){return containsIp({network:this.network,mask:this.mask},r)}toString(){const r=simpleMaskLength(this.mask),g=r!==-1?String(r):maskToHex(this.mask);return ipToString(this.network)+"/"+g}}function cidrContains(n,r){return new IpNet(n).contains(r)}function isIPv4$1(n){return!!parseIPv4(n)}function isIPv6$1(n){return!!parseIPv6(n)}function isIP(n){return!!parseIP(n)}const isV4=isIPv4$1,isV6=isIPv6$1,toBytes$1=function(n){let r=0;if(n=n.toString().trim(),isV4(n)){const g=new Uint8Array(r+4);return n.split(/\./g).forEach(_=>{g[r++]=parseInt(_,10)&255}),g}if(isV6(n)){const g=n.split(":",8);let _;for(_=0;_<g.length;_++){const S=isV4(g[_]);let E;S&&(E=toBytes$1(g[_]),g[_]=toString$3(E.slice(0,2),"base16")),E!=null&&++_<8&&g.splice(_,0,toString$3(E.slice(2,4),"base16"))}if(g[0]==="")for(;g.length<8;)g.unshift("0");else if(g[g.length-1]==="")for(;g.length<8;)g.push("0");else if(g.length<8){for(_=0;_<g.length&&g[_]!=="";_++);const S=[_,1];for(_=9-g.length;_>0;_--)S.push("0");g.splice.apply(g,S)}const x=new Uint8Array(r+16);for(_=0;_<g.length;_++){const S=parseInt(g[_],16);x[r++]=S>>8&255,x[r++]=S&255}return x}throw new Error("invalid ip address")},toString$1=function(n,r=0,g){r=~~r,g=g??n.length-r;const _=new DataView(n.buffer);if(g===4){const x=[];for(let S=0;S<g;S++)x.push(n[r+S]);return x.join(".")}if(g===16){const x=[];for(let S=0;S<g;S+=2)x.push(_.getUint16(r+S).toString(16));return x.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V=-1,names={},codes={},table$1=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[43,8,"ipcidr"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[448,0,"tls"],[449,V,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,V,"http-path"],[777,V,"memory"]];table$1.forEach(n=>{const r=createProtocol(...n);codes[r.code]=r,names[r.name]=r});function createProtocol(n,r,g,_,x){return{code:n,size:r,name:g,resolvable:!!_,path:!!x}}function getProtocol(n){if(typeof n=="number"){if(codes[n]!=null)return codes[n];throw new Error(`no protocol with code: ${n}`)}else if(typeof n=="string"){if(names[n]!=null)return names[n];throw new Error(`no protocol with name: ${n}`)}throw new Error(`invalid protocol id type: ${typeof n}`)}const ip4Protocol=getProtocol("ip4"),ip6Protocol=getProtocol("ip6"),ipcidrProtocol=getProtocol("ipcidr");function convertToString(n,r){switch(getProtocol(n).code){case 4:case 41:return bytes2ip(r);case 42:return bytes2str(r);case 43:return toString$3(r,"base10");case 6:case 273:case 33:case 132:return bytes2port(r).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return bytes2str(r);case 421:return bytes2mh(r);case 444:return bytes2onion(r);case 445:return bytes2onion(r);case 466:return bytes2mb(r);case 481:return globalThis.encodeURIComponent(bytes2str(r));default:return toString$3(r,"base16")}}function convertToBytes(n,r){switch(getProtocol(n).code){case 4:return ip2bytes(r);case 41:return ip2bytes(r);case 42:return str2bytes(r);case 43:return fromString(r,"base10");case 6:case 273:case 33:case 132:return port2bytes(parseInt(r,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return str2bytes(r);case 421:return mh2bytes(r);case 444:return onion2bytes(r);case 445:return onion32bytes(r);case 466:return mb2bytes(r);case 481:return str2bytes(globalThis.decodeURIComponent(r));default:return fromString(r,"base16")}}function convertToIpNet(n){let r,g;if(n.stringTuples().forEach(([_,x])=>{(_===ip4Protocol.code||_===ip6Protocol.code)&&(g=x),_===ipcidrProtocol.code&&(r=x)}),r==null||g==null)throw new Error("Invalid multiaddr");return new IpNet(g,r)}const decoders=Object.values(bases).map(n=>n.decoder),anybaseDecoder=function(){let n=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(r=>n=n.or(r)),n}();function ip2bytes(n){if(!isIP(n))throw new Error("invalid ip address");return toBytes$1(n)}function bytes2ip(n){const r=toString$1(n,0,n.length);if(r==null)throw new Error("ipBuff is required");if(!isIP(r))throw new Error("invalid ip address");return r}function port2bytes(n){const r=new ArrayBuffer(2);return new DataView(r).setUint16(0,n),new Uint8Array(r)}function bytes2port(n){return new DataView(n.buffer).getUint16(n.byteOffset)}function str2bytes(n){const r=fromString(n),g=Uint8Array.from(encode$d(r.length));return concat([g,r],g.length+r.length)}function bytes2str(n){const r=decode$a(n);if(n=n.slice(encodingLength(r)),n.length!==r)throw new Error("inconsistent lengths");return toString$3(n)}function mh2bytes(n){let r;n[0]==="Q"||n[0]==="1"?r=decode$h(base58btc$1.decode(`z${n}`)).bytes:r=CID$1.parse(n).multihash.bytes;const g=Uint8Array.from(encode$d(r.length));return concat([g,r],g.length+r.length)}function mb2bytes(n){const r=anybaseDecoder.decode(n),g=Uint8Array.from(encode$d(r.length));return concat([g,r],g.length+r.length)}function bytes2mb(n){const r=decode$a(n),g=n.slice(encodingLength(r));if(g.length!==r)throw new Error("inconsistent lengths");return"u"+toString$3(g,"base64url")}function bytes2mh(n){const r=decode$a(n),g=n.slice(encodingLength(r));if(g.length!==r)throw new Error("inconsistent lengths");return toString$3(g,"base58btc")}function onion2bytes(n){const r=n.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==16)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion address.`);const g=base32$1.decode("b"+r[0]),_=parseInt(r[1],10);if(_<1||_>65536)throw new Error("Port number is not in range(1, 65536)");const x=port2bytes(_);return concat([g,x],g.length+x.length)}function onion32bytes(n){const r=n.split(":");if(r.length!==2)throw new Error(`failed to parse onion addr: ["'${r.join('", "')}'"]' does not contain a port number`);if(r[0].length!==56)throw new Error(`failed to parse onion addr: ${r[0]} not a Tor onion3 address.`);const g=base32$1.decode(`b${r[0]}`),_=parseInt(r[1],10);if(_<1||_>65536)throw new Error("Port number is not in range(1, 65536)");const x=port2bytes(_);return concat([g,x],g.length+x.length)}function bytes2onion(n){const r=n.slice(0,n.length-2),g=n.slice(n.length-2),_=toString$3(r,"base32"),x=bytes2port(g);return`${_}:${x}`}function stringToMultiaddrParts(n){n=cleanPath(n);const r=[],g=[];let _=null;const x=n.split("/").slice(1);if(x.length===1&&x[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let S=0;S<x.length;S++){const E=x[S],C=getProtocol(E);if(C.size===0){r.push([C.code]),g.push([C.code]);continue}if(S++,S>=x.length)throw ParseError("invalid address: "+n);if(C.path===!0){_=cleanPath(x.slice(S).join("/")),r.push([C.code,convertToBytes(C.code,_)]),g.push([C.code,_]);break}const T=convertToBytes(C.code,x[S]);r.push([C.code,T]),g.push([C.code,convertToString(C.code,T)])}return{string:stringTuplesToString(g),bytes:tuplesToBytes(r),tuples:r,stringTuples:g,path:_}}function bytesToMultiaddrParts(n){const r=[],g=[];let _=null,x=0;for(;x<n.length;){const S=decode$a(n,x),E=encodingLength(S),C=getProtocol(S),T=sizeForAddr(C,n.slice(x+E));if(T===0){r.push([S]),g.push([S]),x+=E;continue}const R=n.slice(x+E,x+E+T);if(x+=T+E,x>n.length)throw ParseError("Invalid address Uint8Array: "+toString$3(n,"base16"));r.push([S,R]);const A=convertToString(S,R);if(g.push([S,A]),C.path===!0){_=A;break}}return{bytes:Uint8Array.from(n),string:stringTuplesToString(g),tuples:r,stringTuples:g,path:_}}function stringTuplesToString(n){const r=[];return n.map(g=>{const _=getProtocol(g[0]);return r.push(_.name),g.length>1&&g[1]!=null&&r.push(g[1]),null}),cleanPath(r.join("/"))}function tuplesToBytes(n){return concat(n.map(r=>{const g=getProtocol(r[0]);let _=Uint8Array.from(encode$d(g.code));return r.length>1&&r[1]!=null&&(_=concat([_,r[1]])),_}))}function sizeForAddr(n,r){if(n.size>0)return n.size/8;if(n.size===0)return 0;{const g=decode$a(r instanceof Uint8Array?r:Uint8Array.from(r));return g+encodingLength(g)}}function cleanPath(n){return"/"+n.trim().split("/").filter(r=>r).join("/")}function ParseError(n){return new Error("Error parsing address: "+n)}const inspect$1=Symbol.for("nodejs.util.inspect.custom"),symbol=Symbol.for("@multiformats/js-multiaddr/multiaddr"),DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code];class NoAvailableResolverError extends Error{constructor(r="No available resolver"){super(r),this.name="NoAvailableResolverError"}}class Multiaddr{bytes;#e;#t;#r;#i;[symbol]=!0;constructor(r){r==null&&(r="");let g;if(r instanceof Uint8Array)g=bytesToMultiaddrParts(r);else if(typeof r=="string"){if(r.length>0&&r.charAt(0)!=="/")throw new Error(`multiaddr "${r}" must start with a "/"`);g=stringToMultiaddrParts(r)}else if(isMultiaddr(r))g=bytesToMultiaddrParts(r.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=g.bytes,this.#e=g.string,this.#t=g.tuples,this.#r=g.stringTuples,this.#i=g.path}toString(){return this.#e}toJSON(){return this.toString()}toOptions(){let r,g,_,x,S="";const E=getProtocol("tcp"),C=getProtocol("udp"),T=getProtocol("ip4"),R=getProtocol("ip6"),A=getProtocol("dns6"),I=getProtocol("ip6zone");for(const[D,N]of this.stringTuples())D===I.code&&(S=`%${N??""}`),DNS_CODES.includes(D)&&(g=E.name,x=443,_=`${N??""}${S}`,r=D===A.code?6:4),(D===E.code||D===C.code)&&(g=getProtocol(D).name,x=parseInt(N??"")),(D===T.code||D===R.code)&&(g=getProtocol(D).name,_=`${N??""}${S}`,r=D===R.code?6:4);if(r==null||g==null||_==null||x==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:r,host:_,transport:g,port:x}}protos(){return this.#t.map(([r])=>Object.assign({},getProtocol(r)))}protoCodes(){return this.#t.map(([r])=>r)}protoNames(){return this.#t.map(([r])=>getProtocol(r).name)}tuples(){return this.#t.map(([r,g])=>g==null?[r]:[r,g])}stringTuples(){return this.#r.map(([r,g])=>g==null?[r]:[r,g])}encapsulate(r){return r=new Multiaddr(r),new Multiaddr(this.toString()+r.toString())}decapsulate(r){const g=r.toString(),_=this.toString(),x=_.lastIndexOf(g);if(x<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${r.toString()}`);return new Multiaddr(_.slice(0,x))}decapsulateCode(r){const g=this.tuples();for(let _=g.length-1;_>=0;_--)if(g[_][0]===r)return new Multiaddr(tuplesToBytes(g.slice(0,_)));return this}getPeerId(){try{let r=[];this.stringTuples().forEach(([_,x])=>{_===names.p2p.code&&r.push([_,x]),_===names["p2p-circuit"].code&&(r=[])});const g=r.pop();if(g?.[1]!=null){const _=g[1];return _[0]==="Q"||_[0]==="1"?toString$3(base58btc$1.decode(`z${_}`),"base58btc"):toString$3(CID$1.parse(_).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return this.#i}equals(r){return equals$1(this.bytes,r.bytes)}async resolve(r){const g=this.protos().find(S=>S.resolvable);if(g==null)return[this];const _=resolvers.get(g.name);if(_==null)throw new NoAvailableResolverError(`no available resolver for ${g.name}`);return(await _(this,r)).map(S=>multiaddr(S))}nodeAddress(){const r=this.toOptions();if(r.transport!=="tcp"&&r.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${r.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:r.family,address:r.host,port:r.port}}isThinWaistAddress(r){const g=(r??this).protos();return!(g.length!==2||g[0].code!==4&&g[0].code!==41||g[1].code!==6&&g[1].code!==273)}[inspect$1](){return`Multiaddr(${this.#e})`}}const resolvers=new Map;function isMultiaddr(n){return!!n?.[symbol]}function multiaddr(n){return new Multiaddr(n)}var freeGlobal=typeof global$1=="object"&&global$1&&global$1.Object===Object&&global$1,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$b=Object.prototype,hasOwnProperty$8=objectProto$b.hasOwnProperty,nativeObjectToString$1=objectProto$b.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(n){var r=hasOwnProperty$8.call(n,symToStringTag$1),g=n[symToStringTag$1];try{n[symToStringTag$1]=void 0;var _=!0}catch{}var x=nativeObjectToString$1.call(n);return _&&(r?n[symToStringTag$1]=g:delete n[symToStringTag$1]),x}var objectProto$a=Object.prototype,nativeObjectToString=objectProto$a.toString;function objectToString$1(n){return nativeObjectToString.call(n)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(n){return n==null?n===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(n)?getRawTag(n):objectToString$1(n)}function isObjectLike(n){return n!=null&&typeof n=="object"}var isArray$1=Array.isArray;function isObject$1(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}function identity(n){return n}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(n){if(!isObject$1(n))return!1;var r=baseGetTag(n);return r==funcTag$1||r==genTag||r==asyncTag||r==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var n=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function isMasked(n){return!!maskSrcKey&&maskSrcKey in n}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(n){if(n!=null){try{return funcToString$1.call(n)}catch{}try{return n+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(n){if(!isObject$1(n)||isMasked(n))return!1;var r=isFunction(n)?reIsNative:reIsHostCtor;return r.test(toSource(n))}function getValue(n,r){return n?.[r]}function getNative(n,r){var g=getValue(n,r);return baseIsNative(g)?g:void 0}var WeakMap$1=getNative(root,"WeakMap"),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(n,r){var g=typeof n;return r=r??MAX_SAFE_INTEGER$1,!!r&&(g=="number"||g!="symbol"&&reIsUint.test(n))&&n>-1&&n%1==0&&n<r}function eq(n,r){return n===r||n!==n&&r!==r}var MAX_SAFE_INTEGER=9007199254740991;function isLength(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=MAX_SAFE_INTEGER}function isArrayLike(n){return n!=null&&isLength(n.length)&&!isFunction(n)}var objectProto$8=Object.prototype;function isPrototype(n){var r=n&&n.constructor,g=typeof r=="function"&&r.prototype||objectProto$8;return n===g}function baseTimes(n,r){for(var g=-1,_=Array(n);++g<n;)_[g]=r(g);return _}var argsTag$2="[object Arguments]";function baseIsArguments(n){return isObjectLike(n)&&baseGetTag(n)==argsTag$2}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(n){return isObjectLike(n)&&hasOwnProperty$6.call(n,"callee")&&!propertyIsEnumerable$1.call(n,"callee")};function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$3="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$3]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(n){return isObjectLike(n)&&isLength(n.length)&&!!typedArrayTags[baseGetTag(n)]}function baseUnary(n){return function(r){return n(r)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var n=freeModule&&freeModule.require&&freeModule.require("util").types;return n||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys(n,r){var g=isArray$1(n),_=!g&&isArguments(n),x=!g&&!_&&isBuffer(n),S=!g&&!_&&!x&&isTypedArray(n),E=g||_||x||S,C=E?baseTimes(n.length,String):[],T=C.length;for(var R in n)(r||hasOwnProperty$5.call(n,R))&&!(E&&(R=="length"||x&&(R=="offset"||R=="parent")||S&&(R=="buffer"||R=="byteLength"||R=="byteOffset")||isIndex(R,T)))&&C.push(R);return C}function overArg(n,r){return function(g){return n(r(g))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeys(n){if(!isPrototype(n))return nativeKeys(n);var r=[];for(var g in Object(n))hasOwnProperty$4.call(n,g)&&g!="constructor"&&r.push(g);return r}function keys$1(n){return isArrayLike(n)?arrayLikeKeys(n):baseKeys(n)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(n){var r=this.__data__;if(nativeCreate){var g=r[n];return g===HASH_UNDEFINED$2?void 0:g}return hasOwnProperty$3.call(r,n)?r[n]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas(n){var r=this.__data__;return nativeCreate?r[n]!==void 0:hasOwnProperty$2.call(r,n)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(n,r){var g=this.__data__;return this.size+=this.has(n)?0:1,g[n]=nativeCreate&&r===void 0?HASH_UNDEFINED$1:r,this}function Hash(n){var r=-1,g=n==null?0:n.length;for(this.clear();++r<g;){var _=n[r];this.set(_[0],_[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(n,r){for(var g=n.length;g--;)if(eq(n[g][0],r))return g;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(n){var r=this.__data__,g=assocIndexOf(r,n);if(g<0)return!1;var _=r.length-1;return g==_?r.pop():splice.call(r,g,1),--this.size,!0}function listCacheGet(n){var r=this.__data__,g=assocIndexOf(r,n);return g<0?void 0:r[g][1]}function listCacheHas(n){return assocIndexOf(this.__data__,n)>-1}function listCacheSet(n,r){var g=this.__data__,_=assocIndexOf(g,n);return _<0?(++this.size,g.push([n,r])):g[_][1]=r,this}function ListCache(n){var r=-1,g=n==null?0:n.length;for(this.clear();++r<g;){var _=n[r];this.set(_[0],_[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(n){var r=typeof n;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?n!=="__proto__":n===null}function getMapData(n,r){var g=n.__data__;return isKeyable(r)?g[typeof r=="string"?"string":"hash"]:g.map}function mapCacheDelete(n){var r=getMapData(this,n).delete(n);return this.size-=r?1:0,r}function mapCacheGet(n){return getMapData(this,n).get(n)}function mapCacheHas(n){return getMapData(this,n).has(n)}function mapCacheSet(n,r){var g=getMapData(this,n),_=g.size;return g.set(n,r),this.size+=g.size==_?0:1,this}function MapCache(n){var r=-1,g=n==null?0:n.length;for(this.clear();++r<g;){var _=n[r];this.set(_[0],_[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;function arrayPush(n,r){for(var g=-1,_=r.length,x=n.length;++g<_;)n[x+g]=r[g];return n}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(n){var r=this.__data__,g=r.delete(n);return this.size=r.size,g}function stackGet(n){return this.__data__.get(n)}function stackHas(n){return this.__data__.has(n)}var LARGE_ARRAY_SIZE=200;function stackSet(n,r){var g=this.__data__;if(g instanceof ListCache){var _=g.__data__;if(!Map$1||_.length<LARGE_ARRAY_SIZE-1)return _.push([n,r]),this.size=++g.size,this;g=this.__data__=new MapCache(_)}return g.set(n,r),this.size=g.size,this}function Stack(n){var r=this.__data__=new ListCache(n);this.size=r.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(n,r){for(var g=-1,_=n==null?0:n.length,x=0,S=[];++g<_;){var E=n[g];r(E,g,n)&&(S[x++]=E)}return S}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(n){return n==null?[]:(n=Object(n),arrayFilter(nativeGetSymbols(n),function(r){return propertyIsEnumerable.call(n,r)}))}:stubArray;function baseGetAllKeys(n,r,g){var _=r(n);return isArray$1(n)?_:arrayPush(_,g(n))}function getAllKeys(n){return baseGetAllKeys(n,keys$1,getSymbols)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),mapTag$2="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$1||Map$1&&getTag(new Map$1)!=mapTag$2||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$1||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(n){var r=baseGetTag(n),g=r==objectTag$1?n.constructor:void 0,_=g?toSource(g):"";if(_)switch(_){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$2;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return r});var Uint8Array$1=root.Uint8Array,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(n){return this.__data__.set(n,HASH_UNDEFINED),this}function setCacheHas(n){return this.__data__.has(n)}function SetCache(n){var r=-1,g=n==null?0:n.length;for(this.__data__=new MapCache;++r<g;)this.add(n[r])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(n,r){for(var g=-1,_=n==null?0:n.length;++g<_;)if(r(n[g],g,n))return!0;return!1}function cacheHas(n,r){return n.has(r)}var COMPARE_PARTIAL_FLAG$3=1,COMPARE_UNORDERED_FLAG$1=2;function equalArrays(n,r,g,_,x,S){var E=g&COMPARE_PARTIAL_FLAG$3,C=n.length,T=r.length;if(C!=T&&!(E&&T>C))return!1;var R=S.get(n),A=S.get(r);if(R&&A)return R==r&&A==n;var I=-1,B=!0,D=g&COMPARE_UNORDERED_FLAG$1?new SetCache:void 0;for(S.set(n,r),S.set(r,n);++I<C;){var N=n[I],M=r[I];if(_)var O=E?_(M,N,I,r,n,S):_(N,M,I,n,r,S);if(O!==void 0){if(O)continue;B=!1;break}if(D){if(!arraySome(r,function(L,F){if(!cacheHas(D,F)&&(N===L||x(N,L,g,_,S)))return D.push(F)})){B=!1;break}}else if(!(N===M||x(N,M,g,_,S))){B=!1;break}}return S.delete(n),S.delete(r),B}function mapToArray(n){var r=-1,g=Array(n.size);return n.forEach(function(_,x){g[++r]=[x,_]}),g}function setToArray(n){var r=-1,g=Array(n.size);return n.forEach(function(_){g[++r]=_}),g}var COMPARE_PARTIAL_FLAG$2=1,COMPARE_UNORDERED_FLAG=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(n,r,g,_,x,S,E){switch(g){case dataViewTag:if(n.byteLength!=r.byteLength||n.byteOffset!=r.byteOffset)return!1;n=n.buffer,r=r.buffer;case arrayBufferTag:return!(n.byteLength!=r.byteLength||!S(new Uint8Array$1(n),new Uint8Array$1(r)));case boolTag:case dateTag:case numberTag:return eq(+n,+r);case errorTag:return n.name==r.name&&n.message==r.message;case regexpTag:case stringTag:return n==r+"";case mapTag$1:var C=mapToArray;case setTag:var T=_&COMPARE_PARTIAL_FLAG$2;if(C||(C=setToArray),n.size!=r.size&&!T)return!1;var R=E.get(n);if(R)return R==r;_|=COMPARE_UNORDERED_FLAG,E.set(n,r);var A=equalArrays(C(n),C(r),_,x,S,E);return E.delete(n),A;case symbolTag:if(symbolValueOf)return symbolValueOf.call(n)==symbolValueOf.call(r)}return!1}var COMPARE_PARTIAL_FLAG$1=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(n,r,g,_,x,S){var E=g&COMPARE_PARTIAL_FLAG$1,C=getAllKeys(n),T=C.length,R=getAllKeys(r),A=R.length;if(T!=A&&!E)return!1;for(var I=T;I--;){var B=C[I];if(!(E?B in r:hasOwnProperty$1.call(r,B)))return!1}var D=S.get(n),N=S.get(r);if(D&&N)return D==r&&N==n;var M=!0;S.set(n,r),S.set(r,n);for(var O=E;++I<T;){B=C[I];var L=n[B],F=r[B];if(_)var U=E?_(F,L,B,r,n,S):_(L,F,B,n,r,S);if(!(U===void 0?L===F||x(L,F,g,_,S):U)){M=!1;break}O||(O=B=="constructor")}if(M&&!O){var j=n.constructor,z=r.constructor;j!=z&&"constructor"in n&&"constructor"in r&&!(typeof j=="function"&&j instanceof j&&typeof z=="function"&&z instanceof z)&&(M=!1)}return S.delete(n),S.delete(r),M}var COMPARE_PARTIAL_FLAG=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(n,r,g,_,x,S){var E=isArray$1(n),C=isArray$1(r),T=E?arrayTag:getTag(n),R=C?arrayTag:getTag(r);T=T==argsTag?objectTag:T,R=R==argsTag?objectTag:R;var A=T==objectTag,I=R==objectTag,B=T==R;if(B&&isBuffer(n)){if(!isBuffer(r))return!1;E=!0,A=!1}if(B&&!A)return S||(S=new Stack),E||isTypedArray(n)?equalArrays(n,r,g,_,x,S):equalByTag(n,r,T,g,_,x,S);if(!(g&COMPARE_PARTIAL_FLAG)){var D=A&&hasOwnProperty.call(n,"__wrapped__"),N=I&&hasOwnProperty.call(r,"__wrapped__");if(D||N){var M=D?n.value():n,O=N?r.value():r;return S||(S=new Stack),x(M,O,g,_,S)}}return B?(S||(S=new Stack),equalObjects(n,r,g,_,x,S)):!1}function baseIsEqual(n,r,g,_,x){return n===r?!0:n==null||r==null||!isObjectLike(n)&&!isObjectLike(r)?n!==n&&r!==r:baseIsEqualDeep(n,r,g,_,baseIsEqual,x)}function isEqual$1(n,r){return baseIsEqual(n,r)}function baseSum(n,r){for(var g,_=-1,x=n.length;++_<x;){var S=r(n[_]);S!==void 0&&(g=g===void 0?S:g+S)}return g}function sum$1(n){return n&&n.length?baseSum(n,identity):0}const schémaBdPrincipaleRéseau={type:"object",additionalProperties:{type:"string"},required:[]},INTERVALE_SALUT=1e3*10,FACTEUR_ATÉNUATION_CONFIANCE=.8,FACTEUR_ATÉNUATION_BLOQUÉS=.9,CONFIANCE_DE_COAUTEUR=.9,CONFIANCE_DE_FAVORIS=.7,DÉLAI_SESOUVENIR_MEMBRES_EN_LIGNE=1e3*60*60*24*30,N_DÉSIRÉ_SOUVENIR_MEMBRES_EN_LIGNE=50;class Réseau extends ComposanteClientDic{client;bloquésPrivés;_fermé;dispositifsEnLigne;fsOublier;événements;constructor({client:r}){super({client:r,clef:"réseau",schémaBdPrincipale:schémaBdPrincipaleRéseau}),this.client=r,this.bloquésPrivés=new Set,this.dispositifsEnLigne={},this.client.obtDeStockageLocal({clef:"dispositifsEnLigne"}).then(g=>this.dispositifsEnLigne=JSON.parse(g||"{}")),this.fsOublier=[],this._fermé=!1,this.événements=new eventsExports.EventEmitter}async initialiser(){const{sfip:r}=await this.client.attendreSfipEtOrbite(),g={},_=r.libp2p.services.pubsub;_.subscribe(this.client.sujet_réseau);const x=R=>{const A=R.detail.msg,I=v4$3();if(A.topic===this.client.sujet_réseau)try{const B=this.messageReçu({msg:JSON.parse(new TextDecoder().decode(A.data))});g[I]=B,B.then(()=>{delete g[I]})}catch(B){console.error(B.toString()),console.error(B.stack.toString())}};_.addEventListener("gossipsub:message",x),this.fsOublier.push(async()=>{_.isStarted()&&_.unsubscribe(this.client.sujet_réseau),_.removeEventListener("gossipsub:message",x),await Promise.all(Object.values(g))});const S=r.libp2p,E=()=>{this.événements.emit("changementConnexions")},C=["peer:connect","peer:disconnect"];for(const R of C)S.addEventListener(R,E);this.fsOublier.push(...C.map(R=>async()=>S.removeEventListener(R,E)));const T=setInterval(()=>{this.direSalut()},INTERVALE_SALUT);this.fsOublier.unshift(async()=>clearInterval(T)),await this.direSalut()}async suivreMessageGossipsub({sujet:r,f:g}){const _=(await this.client.attendreSfipEtOrbite()).sfip.libp2p.services.pubsub;_.subscribe(r);const x=async S=>{const E=S.detail.msg;if(E.topic===r){const C=new TextDecoder().decode(E.data);await g(C)}};return _.addEventListener("gossipsub:message",x),async()=>{_.removeEventListener("gossipsub:message",x)}}async suivreMesAdresses({f:r}){const{sfip:g}=await this.client.attendreSfipEtOrbite(),_=g.libp2p.getMultiaddrs().map(S=>S.toString());await r(_);const x=async S=>{const E=S.detail.peer.addresses.map(C=>C.multiaddr.toString());await r(E)};return g.libp2p.addEventListener("self:peer:update",x),async()=>g.libp2p.removeEventListener("self:peer:update",x)}async connecterÀAdresse({adresse:r}){const{sfip:g}=await this.client.attendreSfipEtOrbite();await g.libp2p.dial(multiaddr(r))}async envoyerMessageAuDispositif({msg:r,idDispositif:g}){const x={signature:await this.client.signer({message:JSON.stringify(r)}),valeur:r};let S,E;g&&({idSFIP:S,encryption:E}=(await uneFois$2(async D=>await this.suivreConnexionsDispositifs({f:async N=>{const M=N.find(O=>O.infoDispositif.idDispositif===g);if(M)return await D(M)}}))).infoDispositif);let C;if(g){if(E?.type!==this.client.encryption.nom)return;const B=await this.client.encryption.encrypter({message:JSON.stringify(x),clefPubliqueDestinataire:E.clefPublique}),{publique:D}=await this.client.encryption.obtClefs();C={encrypté:!0,clefPubliqueExpéditeur:D,données:B},S&&(C.destinataire=S)}else C={encrypté:!1,données:x},S&&(C.destinataire=S);const T=this.client.sujet_réseau,{sfip:R}=await this.client.attendreSfipEtOrbite(),A=R.libp2p.services.pubsub,I=new TextEncoder().encode(JSON.stringify(C));await A.publish(T,Buffer$1.from(I))}async envoyerMessageAuMembre({msg:r,idCompte:g}){const _=Date.now(),x=Object.values(this.dispositifsEnLigne).filter(S=>S.infoDispositif.idCompte===g).filter(S=>S.vuÀ&&_-S.vuÀ<INTERVALE_SALUT+1e3*30);if(!x.length)throw new Error(`Aucun dispositif présentement en ligne pour membre ${g}`);await Promise.all(x.map(async S=>{await this.envoyerMessageAuDispositif({msg:r,idDispositif:S.infoDispositif.idDispositif})}))}async direSalut({à:r}={}){const{orbite:g}=await this.client.attendreSfipEtOrbite(),_={type:"Salut !",contenu:{idSFIP:(await this.client.obtIdSFIP()).toString(),idDispositif:g.identity.id,clefPublique:g.identity.publicKey,signatures:g.identity.signatures,idCompte:await this.client.obtIdCompte()}},{publique:x}=await this.client.encryption.obtClefs();this.client.encryption&&(_.contenu.encryption={type:this.client.encryption.nom,clefPublique:x});try{await this.envoyerMessageAuDispositif({msg:_,idDispositif:r})}catch(S){if(!S.toString().includes("PublishError.InsufficientPeers"))throw S}}async envoyerDemandeRejoindreCompte({codeSecret:r}){const g=await this.client.obtIdDispositif(),[_,x]=r.split(":"),S={type:"Je veux rejoindre ce compte",contenu:{idDispositif:g,empreinteVérification:this.client.empreinteInvitation({idDispositif:g,codeSecret:x})}};await this.envoyerMessageAuDispositif({msg:S,idDispositif:_})}async messageReçu({msg:r}){if(this._fermé)return;const{encrypté:g,destinataire:_}=r;if(_&&_!==(await this.client.obtIdSFIP()).toString())return;const x=g?JSON.parse(await this.client.encryption.décrypter({message:r.données,clefPubliqueExpéditeur:r.clefPubliqueExpéditeur})):r.données;let S,E;try{({valeur:S,signature:E}=x)}catch{return}const{orbite:C}=await this.client.attendreSfipEtOrbite();if(E.clefPublique===C.identity.publicKey||!await this.client.vérifierSignature({signature:E,message:JSON.stringify(S)}))return;const R=S.contenu;switch(S.type){case"Salut !":{const A=R,{clefPublique:I}=A;if(I!==E.clefPublique)return;await this.recevoirSalut({message:A}),_||await this.direSalut({à:A.idDispositif});break}case"Je veux rejoindre ce compte":{const A=R;await this.client.considérerRequêteRejoindreCompte({requête:A});break}}}async recevoirSalut({message:r}){await this._validerInfoMembre({info:r})&&(this.dispositifsEnLigne[r.idDispositif]={infoDispositif:r,vuÀ:r.idDispositif===await this.client.obtIdDispositif()?void 0:new Date().getTime()},this.événements.emit("membreVu"),await this._sauvegarderDispositifsEnLigne())}_nettoyerDispositifsEnLigne(){const r=new Date().getTime(),g=Object.values(this.dispositifsEnLigne).filter(S=>r-(S.vuÀ||0)>DÉLAI_SESOUVENIR_MEMBRES_EN_LIGNE).sort((S,E)=>(S.vuÀ||0)<(E.vuÀ||0)?-1:1).map(S=>S.infoDispositif.idDispositif),_=Object.keys(this.dispositifsEnLigne).length-N_DÉSIRÉ_SOUVENIR_MEMBRES_EN_LIGNE;g.slice(g.length-_).forEach(S=>delete this.dispositifsEnLigne[S])}async _sauvegarderDispositifsEnLigne(){this._nettoyerDispositifsEnLigne(),await this.client.sauvegarderAuStockageLocal({clef:"dispositifsEnLigne",val:JSON.stringify(this.dispositifsEnLigne)})}async _validerInfoMembre({info:r}){const{idCompte:g,signatures:_,clefPublique:x,idDispositif:S}=r;if(!(g&&_&&x&&S))return!1;const E=await this.client.vérifierSignature({signature:{signature:_.id,clefPublique:x},message:S}),C=await this.client.vérifierSignature({signature:{signature:_.publicKey,clefPublique:S},message:x+_.id});if(!isValidAddress(g))return!1;try{const{orbite:T}=await this.client.attendreSfipEtOrbite(),{bd:R,fOublier:A}=await T.ouvrirBd({id:g});if(!estUnContrôleurConstellation(R.access))return!1;const I=R.access.estAutorisé(S);return await A(),E&&C&&I}catch{return!1}}async faireConfianceAuMembre({idCompte:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.set(r,"FIABLE"),await _()}async nePlusFaireConfianceAuMembre({idCompte:r}){const{bd:g,fOublier:_}=await this.obtBd();Object.keys(await g.allAsJSON()).includes(r)&&await g.get(r)==="FIABLE"&&await g.del(r),await _()}async suivreFiables({f:r,idCompte:g}){const _=async x=>{const S=Object.keys(x).filter(E=>x[E]==="FIABLE");return await r(S)};return await this.suivreBdPrincipale({idCompte:g,f:_})}async _initaliserBloquésPrivés(){const r=await this.client.obtDeStockageLocal({clef:"membresBloqués"});r&&(JSON.parse(r).forEach(g=>this.bloquésPrivés.add(g)),this.événements.emit("changementMembresBloqués"))}async _sauvegarderBloquésPrivés(){const r=[...this.bloquésPrivés];this.client.sauvegarderAuStockageLocal({clef:"membresBloqués",val:JSON.stringify(r)})}async bloquerMembre({idCompte:r,privé:g=!1}){if(g)await this.débloquerMembre({idCompte:r}),this.bloquésPrivés.add(r),await this._sauvegarderBloquésPrivés();else{const{bd:_,fOublier:x}=await this.obtBd();await this.débloquerMembre({idCompte:r}),await _.set(r,"BLOQUÉ"),await x()}this.événements.emit("changementMembresBloqués")}async débloquerMembre({idCompte:r}){const{bd:g,fOublier:_}=await this.obtBd();Object.keys(await g.allAsJSON()).includes(r)&&await g.get(r)==="BLOQUÉ"&&await g.del(r),await _(),this.bloquésPrivés.has(r)&&(this.bloquésPrivés.delete(r),await this._sauvegarderBloquésPrivés()),this.événements.emit("changementMembresBloqués")}async suivreBloquésPubliques({f:r,idCompte:g}){const _=async x=>{const S=Object.keys(x).filter(E=>x[E]==="BLOQUÉ");return await r(S)};return await this.suivreBdPrincipale({idCompte:g,f:_})}async suivreBloqués({f:r,idCompte:g}){const _=[];let x=[];const S=async()=>{const E=[...new Set([...[...this.bloquésPrivés].map(C=>({idCompte:C,privé:!0})),...x.map(C=>({idCompte:C,privé:!1}))])];return await r(E)};return _.push(await this.suivreBloquésPubliques({f:async E=>(x=E,await S()),idCompte:g})),(g===void 0||g===this.client.idCompte)&&(await this._initaliserBloquésPrivés(),this.événements.on("changementMembresBloqués",S),_.push(async()=>{this.événements.off("changementMembresBloqués",S)}),await S()),async()=>{await Promise.all(_.map(E=>E()))}}async suivreRelationsImmédiates({f:r,idCompte:g}){g=g||this.client.idCompte;const _=[],x={suivis:[],favoris:[],coauteursBds:[],coauteursProjets:[],coauteursVariables:[],coauteursMotsClefs:[]};let S=[];const E=async()=>{const D=[...x.suivis,...x.favoris,...x.coauteursBds,...x.coauteursProjets,...x.coauteursVariables,...x.coauteursMotsClefs,...S.map(O=>({idCompte:O,confiance:-1}))],M=[...new Set(D)].map(O=>{const{idCompte:L}=O;if(S.includes(L))return{idCompte:L,confiance:-1};const U=1-D.filter(j=>j.idCompte===L).map(j=>j.confiance).map(j=>1-j).reduce((j,z)=>z*j,1);return{idCompte:L,confiance:U}});return await r(M)};_.push(await this.suivreBloqués({f:async D=>{S=D.map(N=>N.idCompte),await E()},idCompte:g})),_.push(await this.client.suivreBdDicDeClef({id:g,clef:"réseau",schéma:schémaBdPrincipaleRéseau,f:async D=>(x.suivis=Object.entries(D).filter(([N,M])=>M==="FIABLE").map(([N,M])=>({idCompte:N,confiance:1})),await E())}));const C=async(D,N,M)=>{_.push(await suivreBdsDeFonctionListe$1({fListe:D,f:async O=>(x[N]=O.map(L=>({idCompte:L,confiance:M})),await E()),fBranche:async(O,L)=>await this.client.suivreAccèsBd({id:O,f:F=>L(F.map(U=>U.idCompte).filter(U=>U!==g))})}))};return await C(async D=>await this.suivreFavorisMembre({idCompte:g,f:N=>D((N||[]).map(M=>M.idObjet))}),"favoris",CONFIANCE_DE_FAVORIS),await C(async D=>await this.suivreBdsMembre({idCompte:g,f:N=>D(N||[])}),"coauteursBds",CONFIANCE_DE_COAUTEUR),await C(async D=>await this.suivreProjetsMembre({idCompte:g,f:N=>D(N||[])}),"coauteursProjets",CONFIANCE_DE_COAUTEUR),await C(async D=>await this.suivreVariablesMembre({idCompte:g,f:N=>D(N||[])}),"coauteursVariables",CONFIANCE_DE_COAUTEUR),await C(async D=>await this.suivreMotsClefsMembre({idCompte:g,f:N=>D(N||[])}),"coauteursMotsClefs",CONFIANCE_DE_COAUTEUR),async()=>{await Promise.all(_.map(D=>D()))}}async suivreRelationsConfiance({f:r,profondeur:g=1/0,idCompteDébut:_}){const x=_||await this.client.obtIdCompte(),S={},E={},C=new s$2;let T=!1;const R=L=>Object.entries(S).filter(([F,U])=>U.relations.map(j=>j.idCompte).includes(L)).map(([F,U])=>F),A=L=>{if(L===x)return 0;const F=({ids:U,p:j=1,déjàVues:z=new Set})=>{const W=U.map(X=>R(X).filter(ie=>!z.has(ie))).flat();return W.includes(x)?j:W.length?(z=new Set(...z,...W),F({ids:W,p:j+1,déjàVues:z})):1/0};return F({ids:[L]})},I=async()=>{const L=[];for(const[F,U]of Object.entries(S))for(const j of U.relations){const z=A(F)+1;L.push({de:F,pour:j.idCompte,confiance:j.confiance,profondeur:z})}return await r(L)},B=async L=>{S[L]={relations:[]};const F=await this.suivreRelationsImmédiates({f:U=>{S[L]&&(S[L].relations=U,N())},idCompte:L});E[L]=F},D=async L=>{await E[L](),delete E[L],delete S[L]},N=async()=>{if(T)return;await C.acquire("modification");const L=Object.keys(S).filter(U=>A(U)>=g),F=[...new Set(Object.entries(S).filter(([U,j])=>A(U)+1<g).map(([U,j])=>j.relations.map(z=>z.idCompte)).flat())].filter(U=>!Object.keys(S).includes(U));await Promise.all(L.map(U=>D(U))),await Promise.all(F.map(U=>B(U))),await I(),C.release("modification")};return await B(x),{fOublier:async()=>{T=!0,await Promise.all(Object.values(E).map(L=>L()))},fChangerProfondeur:async L=>{g=L,await N()}}}async suivreComptesRéseau({f:r,profondeur:g,idCompteDébut:_}){const x=async S=>{S.push({de:this.client.idCompte,pour:this.client.idCompte,confiance:1,profondeur:0});const E={};S.forEach(T=>{Object.keys(E).includes(T.pour)||(E[T.pour]=[]),E[T.pour].push(T)});const C=Object.entries(E).map(([T,R])=>{const A=R.find(O=>O.de===this.client.idCompte);if(A?.confiance===1||A?.confiance===-1)return{idCompte:T,profondeur:A.pour===this.client.idCompte?0:1,confiance:A.confiance};const I=Math.min(...R.map(O=>O.profondeur)),B=R.filter(O=>O.confiance>=0),N=1-R.filter(O=>O.confiance<0).map(O=>1+O.confiance*Math.pow(FACTEUR_ATÉNUATION_BLOQUÉS,O.profondeur-1)).reduce((O,L)=>L*O,1),M=1-B.map(O=>1-O.confiance*Math.pow(FACTEUR_ATÉNUATION_CONFIANCE,O.profondeur-1)).reduce((O,L)=>L*O,1)-N;return{idCompte:T,profondeur:I,confiance:M}});return await r(C)};return await this.suivreRelationsConfiance({f:x,profondeur:g,idCompteDébut:_})}async suivreComptesRéseauEtEnLigne({f:r,profondeur:g,idCompteDébut:_}){const x={réseau:[],enLigne:[]},S=async()=>{const I=[...x.réseau];return x.enLigne.forEach(B=>{I.find(D=>D.idCompte===B.idCompte)||I.push(B)}),await r(I)},E=await this.suivreConnexionsMembres({f:async I=>{const B=I.filter(D=>D.infoMembre.idCompte!==this.client.idCompte).map(D=>({idCompte:D.infoMembre.idCompte,profondeur:1/0,confiance:0}));return x.enLigne=B,await S()}}),C=async I=>(x.réseau=I,await S()),{fOublier:T,fChangerProfondeur:R}=await this.suivreComptesRéseau({f:C,profondeur:g,idCompteDébut:_});return{fOublier:async()=>{await E(),await T()},fChangerProfondeur:R}}async suivreConfianceMonRéseauPourMembre({idCompte:r,f:g,profondeur:_,idCompteRéférence:x}){const S=x||await this.client.obtIdCompte(),E=async C=>{const T=C.find(R=>R.idCompte===r);return await g(T?.confiance||0)};return await this.suivreComptesRéseau({f:E,profondeur:_,idCompteDébut:S})}async suivreConnexionsPostesSFIP({f:r}){const g=async()=>{const{sfip:x}=await this.client.attendreSfipEtOrbite(),S=x.libp2p.getPeers(),E=x.libp2p.getConnections();return await r(S.map(C=>{const T=C.toString(),R=E.filter(A=>A.remotePeer.toString()===T).map(A=>A.remoteAddr.toString());return{pair:T,adresses:R}}))};return this.événements.on("changementConnexions",g),await g(),async()=>{this.événements.off("changementConnexions",g)}}async suivreConnexionsDispositifs({f:r}){const g={infoDispositif:{idSFIP:(await this.client.obtIdSFIP()).toString(),idDispositif:await this.client.obtIdDispositif(),idCompte:await this.client.obtIdCompte(),clefPublique:(await this.client.obtIdentitéOrbite()).publicKey,encryption:{type:await this.client.encryption.obtNom(),clefPublique:(await this.client.encryption.obtClefs()).publique},signatures:(await this.client.obtIdentitéOrbite()).signatures}},_=async()=>await r([...Object.values(this.dispositifsEnLigne),g]);return this.événements.on("membreVu",_),await _(),async()=>{this.événements.off("membreVu",_)}}async suivreConnexionsMembres({f:r}){return await suivreBdsDeFonctionListe$1({fListe:async x=>{const S=async E=>{const C={};for(const T of E){const{idCompte:R}=T.infoDispositif;C[R]||(C[R]={infoMembre:{idCompte:R,dispositifs:[]}});const{infoMembre:A,vuÀ:I}=C[R];A.dispositifs.push(T.infoDispositif),C[R].vuÀ=I?T.vuÀ?Math.max(I,T.vuÀ):I:T.vuÀ}return await x(Object.values(C))};return await this.suivreConnexionsDispositifs({f:S})},f:r,fBranche:async(x,S,E)=>await this.suivreProtocolesMembre({idCompte:x,f:C=>{S({infoMembre:{...E.infoMembre,protocoles:Object.values(C).flat()},vuÀ:E.vuÀ})}}),fIdBdDeBranche:x=>x.infoMembre.idCompte,fCode:x=>x.infoMembre.idCompte})}async suivreProtocolesMembre({f:r,idCompte:g}){return await this.client.suivreBdDicDeClef({id:g||await this.client.obtIdCompte(),clef:"protocoles",schéma:schémaStructureBdCompte,f:r})}async suivreProtocolesDispositif({idDispositif:r,f:g}){const _=r||await this.client.obtIdDispositif();return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:C})=>await this.suivreConnexionsDispositifs({f:async T=>{const R=T.find(A=>A.infoDispositif.idDispositif===_);if(R){const{idCompte:A}=R.infoDispositif;return await C(A)}else return await C(void 0)}}),f:async C=>{if(C)return await g(C[_])},fSuivre:async({id:C,fSuivreBd:T})=>await this.suivreProtocolesMembre({f:T,idCompte:C})})}async rechercher({f:r,nRésultatsDésirés:g=1/0,fRecherche:_,fConfiance:x,fQualité:S,fObjectif:E,fScore:C}){C||(C=fe=>(fe.confiance+fe.qualité+fe.objectif.score)/3),E=E||rechercherTous();const T={},R={},A=3e3;let I,B=3,D=!1;const N=async fe=>{B=fe,z&&await z(fe),I&&clearTimeout(I)},M=(fe=A)=>{if(D)return;I&&clearTimeout(I);const xe=Object.values(T).map(ce=>ce.résultats).flat().map(ce=>ce.résultatObjectif.score),we=xe.length>=g?Math.min(...xe.slice(0,g)):0,G=Object.values(T).reduce(function(ce,ue){return ce[String(ue.membre.profondeur)]=ce[String(ue.membre.profondeur)]||[],ce[String(ue.membre.profondeur)].push(...ue.résultats),ce},{}),q=Object.entries(G).sort((ce,ue)=>Number(ce[0])<Number(ue[0])?-1:1).map(ce=>ce[1]).map(ce=>ce.filter(ue=>ue.résultatObjectif.score>=we).length),H=q.slice(q.length-3),ve=q.slice(q.length-4),Z=Math.max(3,sum$1(H)?B+1:sum$1(ve)?B:B-1);Z>B?I=setTimeout(()=>N(Z),fe):Z<B&&N(Z)},O=async()=>{const xe=Object.values(T).map(we=>we.résultats).flat().sort((we,G)=>we.résultatObjectif.score<G.résultatObjectif.score?1:-1);await r(xe.slice(0,g)),M()},L=async fe=>{const{idCompte:xe}=fe,we=async H=>await _({idCompte:fe.idCompte,fSuivi:async ve=>await H(ve||[])}),G=async H=>(T[xe].résultats=H,await O()),J=async(H,ve)=>{const Z={id:H},ce=async()=>{const{objectif:ke,confiance:Ce,qualité:Ae}=Z;if(ke&&Ce!==void 0&&Ae!==void 0){const Ne={id:H,résultatObjectif:{...ke,score:C(Z)}};return await ve(Ne)}else return await ve(void 0)},ue=async ke=>(Z.objectif=ke,await ce()),se=await E(this.client,H,ue),Y=await x(H,async ke=>(Z.confiance=ke,await ce())),ye=await S(H,async ke=>(Z.qualité=ke,await ce()));return async()=>{await Promise.all([se(),Y(),ye()])}};T[xe]={résultats:[],membre:fe,mettreÀJour:O};const q=await suivreBdsDeFonctionListe$1({fListe:we,f:G,fBranche:J});R[xe]=q},F=async fe=>{await R[fe](),delete T[fe],delete R[fe],await O()},U=new s$2,j=async fe=>{await U.acquire("rechercher"),fe=fe.filter(J=>J.confiance>=0);const xe=fe.filter(J=>!T[J.idCompte]),we=Object.keys(T).filter(J=>!fe.find(q=>q.idCompte===J)),G=fe.filter(J=>{const q=T[J.idCompte];return q&&(J.confiance!==q.membre.confiance||J.profondeur!==q.membre.profondeur)});await Promise.all(xe.map(L)),await Promise.all(G.map(async J=>await T[J.idCompte].mettreÀJour(J))),await Promise.all(we.map(J=>F(J))),U.release("rechercher")},{fChangerProfondeur:z,fOublier:W}=await this.suivreComptesRéseauEtEnLigne({f:j,profondeur:B});return{fChangerN:async(fe=1/0)=>{const xe=g;g=fe,fe!==xe&&(await O(),M(0))},fOublier:async()=>{D=!0,I&&clearTimeout(I),await W(),await Promise.all(Object.values(R).map(fe=>fe()))}}}async rechercherMembres({f:r,nRésultatsDésirés:g,fObjectif:_}){const x=async(C,T)=>{const{fOublier:R}=await this.suivreConfianceMonRéseauPourMembre({idCompte:C,f:T,profondeur:4});return R},S=async({idCompte:C,fSuivi:T})=>(await T([C]),faisRien$1),E=async(C,T)=>await rechercherProfilsSelonActivité()(this.client,C,async A=>{await T(A?.score||0)});return await this.rechercher({f:r,nRésultatsDésirés:g,fRecherche:S,fConfiance:x,fQualité:E,fObjectif:_})}async suivreConfianceAuteurs({idItem:r,clef:g,f:_}){return await suivreBdsDeFonctionListe$1({fListe:async T=>await this.suivreAuteursObjet({idObjet:r,clef:g,f:async R=>{const A=R.filter(I=>I.accepté).map(I=>I.idCompte);return await T(A)}}),f:async T=>{const R=T.reduce((A,I)=>A+I,0);await _(R)},fBranche:async(T,R)=>{const{fOublier:A}=await this.suivreConfianceMonRéseauPourMembre({idCompte:T,f:R,profondeur:4});return A},fRéduction:T=>T.flat()})}async rechercherObjets({f:r,clef:g,nRésultatsDésirés:_,fRecherche:x,fRechercheLesMiens:S,fQualité:E,fObjectif:C,toutLeRéseau:T=!0}){if(!T){const I=C||rechercherTous();return await suivreBdsDeFonctionListe$1({fListe:async B=>({fOublier:await S(B),fChangerN:()=>Promise.resolve()}),f:r,fBranche:async(B,D)=>await I(this.client,B,async N=>{if(N)return await D({id:B,résultatObjectif:N})})})}const R=async({idCompte:I,fSuivi:B})=>{const D={propres:[],favoris:[]},N=async()=>{const F=[...new Set([...D.propres,...D.favoris])];await B(F)},M=await x({idCompte:I,f:async F=>{D.propres=F||[],await N()}}),O=F=>{switch(F){case"bds":return"bd";case"motsClefs":return"motClef";case"nuées":return"nuée";case"projets":return"projet";case"variables":return"variable";default:return}},L=await this.client.suivreBdsSelonCondition({fListe:async F=>await this.suivreFavorisMembre({idCompte:I,f:async U=>F(U.filter(j=>j.épingle.type===O(g)).map(j=>j.idObjet))}),fCondition:async(F,U)=>await this.client.suivreTypeObjet({idObjet:F,f:async j=>await U(j===O(g))}),f:async F=>{D.favoris=F||[],await N()}});return async()=>{await M(),await L()}},A=async(I,B)=>await this.suivreConfianceAuteurs({idItem:I,clef:g,f:B});return await this.rechercher({f:r,nRésultatsDésirés:_,fRecherche:R,fConfiance:A,fQualité:E,fObjectif:C})}async rechercherNuées({f:r,nRésultatsDésirés:g,fObjectif:_,toutLeRéseau:x=!0}){const S=this.suivreNuéesMembre.bind(this),E=async(T,R)=>await this.client.nuées.suivreQualitéNuée({idNuée:T,f:R}),C=async T=>await this.client.nuées.suivreNuées({f:T});return await this.rechercherObjets({f:r,clef:"nuées",nRésultatsDésirés:g,fRecherche:S,fRechercheLesMiens:C,fQualité:E,fObjectif:_,toutLeRéseau:x})}async rechercherBds({f:r,nRésultatsDésirés:g,fObjectif:_,toutLeRéseau:x=!0}){const S=this.suivreBdsMembre.bind(this),E=async(T,R)=>{const A=async I=>await R(I.total);return await this.client.bds.suivreQualitéBd({idBd:T,f:A})},C=async T=>await this.client.bds.suivreBds({f:T});return await this.rechercherObjets({f:r,clef:"bds",nRésultatsDésirés:g,fRecherche:S,fRechercheLesMiens:C,fQualité:E,fObjectif:_,toutLeRéseau:x})}async rechercherVariables({f:r,nRésultatsDésirés:g,fObjectif:_,toutLeRéseau:x=!0}){const S=this.suivreVariablesMembre.bind(this),E=async(T,R)=>await this.client.variables.suivreQualitéVariable({idVariable:T,f:R}),C=async T=>await this.client.variables.suivreVariables({f:T});return await this.rechercherObjets({f:r,clef:"variables",nRésultatsDésirés:g,fRecherche:S,fRechercheLesMiens:C,fQualité:E,fObjectif:_,toutLeRéseau:x})}async rechercherMotsClefs({f:r,nRésultatsDésirés:g,fObjectif:_,toutLeRéseau:x=!0}){const S=this.suivreMotsClefsMembre.bind(this),E=async(T,R)=>await this.client.motsClefs.suivreQualitéMotClef({idMotClef:T,f:R}),C=async T=>await this.client.motsClefs.suivreMotsClefs({f:T});return await this.rechercherObjets({f:r,clef:"motsClefs",nRésultatsDésirés:g,fRecherche:S,fRechercheLesMiens:C,fQualité:E,fObjectif:_,toutLeRéseau:x})}async rechercherProjets({f:r,nRésultatsDésirés:g,fObjectif:_,toutLeRéseau:x=!0}){const S=this.suivreProjetsMembre.bind(this),E=async(T,R)=>await this.client.projets.suivreQualitéProjet({idProjet:T,f:R}),C=async T=>await this.client.projets.suivreProjets({f:T});return await this.rechercherObjets({f:r,clef:"projets",nRésultatsDésirés:g,fRecherche:S,fRechercheLesMiens:C,fQualité:E,fObjectif:_,toutLeRéseau:x})}async suivreAuteursObjet({idObjet:r,clef:g,f:_}){return await suivreBdsDeFonctionListe$1({fListe:async R=>await this.client.suivreAccèsBd({id:r,f:R}),f:_,fBranche:async(R,A,I)=>{const B=async N=>(N=N||[],await A([{idCompte:I.idCompte,rôle:I.rôle,accepté:N.includes(r)}]));let D;switch(await B(),g){case"motsClefs":D=await this.client.motsClefs.suivreMotsClefs({f:B,idCompte:R});break;case"variables":D=await this.client.variables.suivreVariables({f:B,idCompte:R});break;case"bds":D=await this.client.bds.suivreBds({f:B,idCompte:R});break;case"nuées":D=await this.client.nuées.suivreNuées({f:B,idCompte:R});break;case"projets":D=await this.client.projets.suivreProjets({f:B,idCompte:R});break;default:throw new Error(g)}return D},fIdBdDeBranche:R=>R.idCompte,fCode:R=>R.idCompte})}async suivreAuteursMotClef({idMotClef:r,f:g}){return await this.suivreAuteursObjet({idObjet:r,clef:"motsClefs",f:g})}async suivreAuteursVariable({idVariable:r,f:g}){return await this.suivreAuteursObjet({idObjet:r,clef:"variables",f:g})}async suivreAuteursBd({idBd:r,f:g}){return await this.suivreAuteursObjet({idObjet:r,clef:"bds",f:g})}async suivreAuteursProjet({idProjet:r,f:g}){return await this.suivreAuteursObjet({idObjet:r,clef:"projets",f:g})}async suivreAuteursNuée({idNuée:r,f:g}){return await this.suivreAuteursObjet({idObjet:r,clef:"nuées",f:g})}async suivreObjetsMembre({idCompte:r,fListeObjets:g,fSuivi:_}){return await this.client.suivreBdsSelonCondition({fListe:g,fCondition:async(x,S)=>await this.client.suivreAccèsBd({id:x,f:E=>S(E.map(C=>C.idCompte).includes(r))}),f:_})}async suivreBdsMembre({idCompte:r,f:g}){return await this.suivreObjetsMembre({idCompte:r,fListeObjets:async _=>await this.client.bds.suivreBds({f:_,idCompte:r}),fSuivi:g})}async suivreProjetsMembre({idCompte:r,f:g}){return await this.suivreObjetsMembre({idCompte:r,fListeObjets:async _=>await this.client.projets.suivreProjets({f:_,idCompte:r}),fSuivi:g})}async suivreFavorisMembre({idCompte:r,f:g}){return await this.client.favoris.suivreFavoris({f:g,idCompte:r})}async suivreVariablesMembre({idCompte:r,f:g}){return await this.suivreObjetsMembre({idCompte:r,fListeObjets:async _=>await this.client.variables.suivreVariables({f:_,idCompte:r}),fSuivi:g})}async suivreMotsClefsMembre({idCompte:r,f:g}){return await this.suivreObjetsMembre({idCompte:r,fListeObjets:async _=>await this.client.motsClefs.suivreMotsClefs({f:_,idCompte:r}),fSuivi:g})}async suivreNuéesMembre({idCompte:r,f:g}){return await this.suivreObjetsMembre({idCompte:r,fListeObjets:async _=>await this.client.nuées.suivreNuées({f:_,idCompte:r}),fSuivi:g})}async suivreFavorisObjet({idObjet:r,f:g,profondeur:_}){const x=async C=>{const T=C.filter(R=>R.épingle.idObjet===r);await g(T)},S=async C=>{const T=async R=>{const A=await this.client.obtIdCompte();return await C([A,...R.map(I=>I.idCompte)])};return await this.suivreComptesRéseauEtEnLigne({f:T,profondeur:_,idCompteDébut:this.client.idCompte})},E=async(C,T)=>await this.suivreFavorisMembre({idCompte:C,f:R=>T(R?R.map(A=>({idCompte:C,épingle:A})):void 0)});return await this.client.suivreBdsDeFonctionRecherche({fListe:S,f:x,fBranche:E})}async suivreRéplications({idObjet:r,f:g,profondeur:_}){const x={connexionsMembres:[],connexionsDispositifs:[],favoris:[]},S=async()=>{const{connexionsMembres:O,favoris:L}=x,F=L.map(W=>W.favoris.idCompte),U=O.filter(W=>F.includes(W.infoMembre.idCompte)),j=(await Promise.all(L.map(async W=>{const{favoris:X,dispositifs:ie}=W;return await Promise.all(ie.map(async fe=>{const xe=x.connexionsDispositifs.find(J=>J.infoDispositif.idDispositif===fe)?.vuÀ,we=x.connexionsDispositifs.find(J=>J.infoDispositif.idDispositif===fe)?.infoDispositif.idCompte;return{épingle:{idObjet:r,épingle:X},dispositif:{idDispositif:fe,idCompte:we,vuÀ:xe}}}))}))).flat();return await g({membres:U,dispositifs:j})},E=await this.suivreConnexionsMembres({f:async O=>(x.connexionsMembres=O,await S())}),C=await this.suivreConnexionsDispositifs({f:async O=>(x.connexionsDispositifs=O,await S())}),T=async O=>(x.favoris=O,await S()),R=async O=>await this.suivreFavorisObjet({idObjet:r,f:O,profondeur:_}),A=async(O,L,F)=>{const U=async z=>await L({favoris:F,dispositifs:z}),j=await this.client.suivreDispositifs({f:U,idCompte:O});return async()=>{await j()}},I=O=>O.idCompte,B=O=>O.idCompte,{fOublier:D,fChangerProfondeur:N}=await this.client.suivreBdsDeFonctionRecherche({fListe:R,f:T,fBranche:A,fIdBdDeBranche:I,fCode:B});return{fOublier:async()=>{await D(),await E(),await C()},fChangerProfondeur:N}}async suivreBdsDeNuée({idNuée:r,f:g,nRésultatsDésirés:_}){const x=async(E,C)=>await this.client.bds.rechercherBdsParNuée({idNuée:r,f:C,idCompte:E}),S=async E=>await this.suivreComptesRéseauEtEnLigne({f:async C=>await E(C.map(T=>T.idCompte)),profondeur:_});return await this.client.suivreBdsDeFonctionRecherche({fListe:S,f:g,fBranche:x})}async suivreÉlémentsDeTableauxUniques({idNuéeUnique:r,clef:g,f:_,nBds:x=100}){const S=async R=>{const A=async B=>await this.suivreBdsDeNuée({idNuée:r,f:B,nRésultatsDésirés:x}),I=async(B,D)=>await this.suivreAuteursBd({idBd:B,f:async N=>{const M=N.find(L=>L.accepté)?.idCompte;return await D(M?{bd:B,idCompte:M}:void 0)}});return await this.client.suivreBdsDeFonctionRecherche({fListe:A,f:R,fBranche:I})},E=async(R,A,I)=>{const{idCompte:B}=I;return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:O})=>await this.client.bds.suivreIdTableauParClef({idBd:R,clef:g,f:L=>{L&&O(L)}}),f:async O=>await A(O||[]),fSuivre:async({id:O,fSuivreBd:L})=>{const F=async U=>{const j=U.map(z=>({idCompte:B,élément:z}));return await L(j)};return await this.client.tableaux.suivreDonnées({idTableau:O,f:F})}})},C=R=>R.bd,T=R=>R.bd;return await this.client.suivreBdsDeFonctionRecherche({fListe:S,f:_,fBranche:E,fIdBdDeBranche:C,fCode:T})}async fermer(){this._fermé=!0,await Promise.all(this.fsOublier.map(r=>r()))}}__decorate([cacheSuivi],Réseau.prototype,"suivreFiables",null);__decorate([cacheSuivi],Réseau.prototype,"suivreBloquésPubliques",null);__decorate([cacheSuivi],Réseau.prototype,"suivreBloqués",null);__decorate([cacheSuivi],Réseau.prototype,"suivreRelationsImmédiates",null);__decorate([cacheRechercheParProfondeur],Réseau.prototype,"suivreRelationsConfiance",null);__decorate([cacheRechercheParProfondeur],Réseau.prototype,"suivreComptesRéseau",null);__decorate([cacheSuivi],Réseau.prototype,"suivreConnexionsPostesSFIP",null);__decorate([cacheSuivi],Réseau.prototype,"suivreConnexionsDispositifs",null);__decorate([cacheSuivi],Réseau.prototype,"suivreConnexionsMembres",null);__decorate([cacheSuivi],Réseau.prototype,"suivreProtocolesMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreProtocolesDispositif",null);__decorate([cacheSuivi],Réseau.prototype,"suivreAuteursObjet",null);__decorate([cacheSuivi],Réseau.prototype,"suivreBdsMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreProjetsMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreFavorisMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreVariablesMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreMotsClefsMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreNuéesMembre",null);__decorate([cacheRechercheParNRésultats],Réseau.prototype,"suivreBdsDeNuée",null);const estSpécificationHoroDatage=n=>!!n&&typeof n.système=="string"&&typeof n.val=="string";class Cholqij{lireDate(r){const{système:g,val:_}=r;switch(g){case"dateJS":case"grégorien":{const x=new Date(_);if(isNaN(x.valueOf()))throw new Error(_);return x}default:throw new Error(g)}}dateValide(r){if(!estSpécificationHoroDatage(r))return!1;try{return this.lireDate(r),!0}catch{return!1}}}const cholqij=new Cholqij;function générerFonctionRègle({règle:n,varsÀColonnes:r,donnéesCatégorie:g}){const _=n.règle,{colonne:x}=n,{typeRègle:S}=_.règle;switch(S){case"existe":return E=>E.filter(T=>T.données[x]===void 0).map(T=>{const{id:R}=T;return{id:R,erreur:{règle:n}}});case"catégorie":return E=>{const C=_.règle.détails.catégorie;return E.filter(R=>!validerCatégorieVal({val:R.données[x],catégorie:C})).map(R=>{const{id:A}=R;return{id:A,erreur:{règle:n}}})};case"bornes":{const E=_;let C,T;const{val:R,op:A,type:I}=E.règle.détails,B=(D,N)=>D===void 0||N===void 0;switch(A){case">":T=(D,N)=>B(D,N)||D>N;break;case"<":T=(D,N)=>B(D,N)||D<N;break;case"≥":case">=":T=(D,N)=>B(D,N)||D>=N;break;case"≤":case"<=":T=(D,N)=>B(D,N)||D<=N;break}return I==="fixe"?C=D=>{const N=D.données[x];return Array.isArray(N)?N.every(M=>T(M,R)):T(N,R)}:C=D=>{const N=D.données[x],M=I==="dynamiqueVariable"?D.données[r[R]]:D.données[R];return Array.isArray(N)?N.every(O=>T(O,M)):T(N,M)},D=>D.filter(M=>!validerBorneVal({val:M,fComp:C})).map(M=>{const{id:O}=M;return{id:O,erreur:{règle:n}}})}case"valeurCatégorique":{const E=_.règle,C=E.détails.type==="fixe"?E.détails.options:g;if(!C)throw new Error("Options non spécifiées");return T=>T.filter(A=>A.données[x]!==void 0&&!C.includes(A.données[x])).map(A=>{const{id:I}=A;return{id:I,colonne:x,erreur:{règle:n}}})}default:throw Error(`Catégorie ${S} inconnue.`)}}const validerBorneVal=({val:n,fComp:r})=>Array.isArray(n)?n.every(g=>r(g)):r(n),schémaBdInfoColAvecCatégorie={type:"object",additionalProperties:{type:"object",properties:{catégorie:{type:"object",nullable:!0,properties:{catégorie:{type:"string"},type:{type:"string"}},required:["catégorie","type"]},id:{type:"string"},variable:{type:"string"},index:{type:"boolean",nullable:!0}},required:["id","variable"]},required:[]},schémaBdDonnéesTableau={type:"object",additionalProperties:{type:"object",additionalProperties:!0,required:[]},required:[]},schémaBdRègles={type:"object",additionalProperties:{type:"object",properties:{colonne:{type:"string"},source:{type:"object",properties:{id:{type:"string"},type:{type:"string"}},required:["id","type"]},règle:{type:"object",properties:{id:{type:"string"},règle:{type:"object",properties:{détails:{type:"object",required:[]},typeRègle:{type:"string"}},required:["détails","typeRègle"]}},required:["id","règle"]}},required:["colonne","règle","source"]},required:[]};function élémentsÉgaux(n,r){const g=Object.keys(n).filter(x=>x!=="id"),_=Object.keys(r).filter(x=>x!=="id");return!(!g.every(x=>n[x]===r[x])||!_.every(x=>n[x]===r[x]))}function indexÉlémentsÉgaux(n,r,g){return!!g.every(_=>n[_]===r[_])}const schémaStructureBdTableau={type:"object",properties:{type:{type:"string"},noms:{type:"string"},données:{type:"string"},colonnes:{type:"string"},règles:{type:"string"}},required:["données","colonnes","noms","règles","type"]};class Tableaux{client;constructor({client:r}){this.client=r}async créerTableau({idBd:r}){const g=await this.client.obtOpsAccès({idBd:r}),_=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:g}),{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdTableau}),E=async()=>x.set("type","tableau"),C=async()=>{const I=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:g});await x.set("noms",I)},T=async()=>{const I=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:g});await x.set("données",I)},R=async()=>{const I=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:g});await x.set("colonnes",I)},A=async()=>{const I=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:g});await x.set("règles",I)};return await Promise.all([E(),C(),T(),R(),A()]),await S(),_}async copierTableau({id:r,idBd:g,copierDonnées:_=!0}){const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdTableau}),E=await this.créerTableau({idBd:g}),{bd:C,fOublier:T}=await this.client.ouvrirBdTypée({id:E,type:"keyvalue",schéma:schémaStructureBdTableau}),R=await x.get("noms");if(R){const{bd:A,fOublier:I}=await this.client.ouvrirBdTypée({id:R,type:"keyvalue",schéma:schémaStructureBdNoms}),B=await A.allAsJSON();await I(),await this.sauvegarderNomsTableau({idTableau:E,noms:B})}return await this.client.copierContenuBdDic({bdBase:x,nouvelleBd:C,clef:"colonnes",schéma:schémaBdInfoColAvecCatégorie}),await this.client.copierContenuBdDic({bdBase:x,nouvelleBd:C,clef:"règles",schéma:schémaBdRègles}),_&&await this.client.copierContenuBdDic({bdBase:x,nouvelleBd:C,clef:"données",schéma:schémaBdDonnéesTableau}),await Promise.all([S(),T()]),E}async suivreDifférencesAvecTableau({idTableau:r,idTableauRéf:g,f:_}){const x={},S=async()=>{if(!x.colonnesTableau||!x.colonnesTableauRéf)return;const T=[];for(const R of x.colonnesTableauRéf){const A=x.colonnesTableau.find(I=>I.id===R.id);if(A){if(A.variable!==R.variable){const I={type:"variableColonne",sévère:!0,idCol:A.id,varColTableau:A.variable,varColTableauLiée:R.variable};T.push(I)}if(A.index!==R.index){const I={type:"indexColonne",sévère:!0,idCol:A.id,colTableauIndexée:!!A.index};T.push(I)}}else{const I={type:"colonneManquante",sévère:!0,idManquante:R.id};T.push(I)}}for(const R of x.colonnesTableau)if(!x.colonnesTableauRéf.find(I=>I.id===R.id)){const I={type:"colonneSupplémentaire",sévère:!1,idExtra:R.id};T.push(I)}await _(T)},E=await this.suivreColonnesTableau({idTableau:r,f:async T=>{x.colonnesTableau=T,await S()},catégories:!1}),C=await this.suivreColonnesTableau({idTableau:g,f:async T=>{x.colonnesTableauRéf=T,await S()},catégories:!1});return async()=>{await Promise.all([E,C])}}async changerColIndex({idTableau:r,idColonne:g,val:_}){const x=await this.client.obtIdBd({nom:"colonnes",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaBdInfoColAvecCatégorie}),T=(await S.all()).find(R=>R.value.id===g);if(T&&!!T.value.index!==_){const{value:R}=T,A=Object.assign(R,{index:_});await S.put(g,A)}await E()}async suivreIndex({idTableau:r,f:g}){const _=async x=>{const S=x.filter(E=>E.index).map(E=>E.id);await g(S)};return await this.suivreColonnesTableau({idTableau:r,f:_,catégories:!1})}async suivreDonnées({idTableau:r,f:g,clefsSelonVariables:_=!1}){const x={},S=async()=>{const{données:A,colonnes:I}=x;if(A&&I){const B=Object.entries(A).map(([D,N])=>({données:_?Object.keys(N).reduce((O,L)=>{const F=L==="id"?"id":I[L];return O[F]=N[L],O},{}):N,id:D}));await g(B)}},E=async A=>{x.colonnes=Object.fromEntries(A.map(I=>[I.id,I.variable])),await S()},C=await this.suivreColonnesTableau({idTableau:r,f:E,catégories:!1}),T=async A=>{x.données=A,await S()},R=await this.client.suivreBdDicDeClef({id:r,clef:"données",f:T,schéma:schémaBdDonnéesTableau});return async()=>{await R(),await C()}}async formaterÉlément({é:r,colonnes:g,fichiersSFIP:_,langues:x}){const S=async({adresseBdTrads:T,langues:R})=>{const A=await uneFois$2(I=>this.client.suivreBdDic({id:T,f:I}));return traduire(A,R||[])||T},E={},C=async(T,R)=>{switch(typeof T){case"object":return JSON.stringify(T);case"boolean":return T.toString();case"number":return T;case"string":return["audio","image","vidéo","fichier"].includes(R)?(_.add(T),T):R==="chaîne"&&isValidAddress(T)?await S({adresseBdTrads:T,langues:x}):T;default:return}};for(const T of Object.keys(r)){const R=g.find(D=>D.id===T);if(!R)continue;const{catégorie:A}=R;let I;const B=r[T];A?.type==="simple"?I=await C(B,A.catégorie):A?.type==="liste"&&Array.isArray(B)&&(I=JSON.stringify(await Promise.all(B.map(D=>C(D,A.catégorie))))),I!==void 0&&(E[T]=I)}return E}async suivreDonnéesExportation({idTableau:r,langues:g,f:_}){const x={},S=[],E=async()=>{const{colonnes:R,données:A,nomsTableau:I,nomsVariables:B}=x;if(R&&A&&(!g||I&&B)){const D=new Set;let N=await Promise.all(A.map(L=>this.formaterÉlément({é:L.données,fichiersSFIP:D,colonnes:R,langues:g})));N=N.map(L=>Object.keys(L).reduce((F,U)=>{const j=R.find(W=>W.id===U)?.variable;if(!j)throw new Error(`Colonnne avec id ${U} non trouvée parmis les colonnnes :
${JSON.stringify(R,void 0,2)}.`);const z=g&&B?.[j]&&traduire(B[j],g)||U;return F[z]=L[U],F},{}));const M=r.split("/").pop(),O=g&&I&&traduire(I,g)||M;return await _({nomTableau:O,données:N,fichiersSFIP:D})}};if(g){const R=await this.suivreNomsTableau({idTableau:r,f:async I=>{x.nomsTableau=I,await E()}});S.push(R);const A=await suivreBdsDeFonctionListe$1({fListe:async I=>this.suivreVariables({idTableau:r,f:I}),f:async I=>{x.nomsVariables=Object.fromEntries(I.map(B=>[B.idVar,B.noms])),await E()},fBranche:async(I,B)=>await this.client.variables.suivreNomsVariable({idVariable:I,f:async D=>await B({idVar:I,noms:D})})});S.push(A)}const C=await this.suivreColonnesTableau({idTableau:r,f:async R=>{x.colonnes=R,await E()},catégories:!0});S.push(C);const T=await this.suivreDonnées({idTableau:r,f:async R=>{x.données=R,await E()}});return S.push(T),async()=>{Promise.all(S.map(R=>R()))}}async exporterDonnées({idTableau:r,langues:g,doc:_,nomFichier:x,patience:S=500}){_=_||utils$5.book_new();const E=await uneFois$2(async T=>await this.suivreDonnéesExportation({idTableau:r,langues:g,f:T}),attendreStabilité$1(S)),C=utils$5.json_to_sheet(E.données);return utils$5.book_append_sheet(_,C,E.nomTableau.slice(0,30)),x=x||E.nomTableau,{doc:_,fichiersSFIP:E.fichiersSFIP,nomFichier:x}}async ajouterÉlément({idTableau:r,vals:g}){Array.isArray(g)||(g=[g]);const _=await this.client.obtIdBd({nom:"données",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaBdDonnéesTableau}),E=(await uneFois$2(R=>this.suivreColonnesTableau({idTableau:r,f:R,catégories:!1}))).filter(R=>R.index).map(R=>R.id),C=R=>{const A=Object.fromEntries(Object.entries(R).filter(I=>E.includes(I[0])));return Base64.stringify(md5(JSON.stringify(A)))},T=[];for(const R of g){const A=E.length?C(R):v4$3();await x.put(A,R),T.push(A)}return await S(),T}async modifierÉlément({idTableau:r,vals:g,idÉlément:_}){const x=await this.client.obtIdBd({nom:"données",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaBdDonnéesTableau}),C=await S.get(_);if(!C)throw new Error(`Id élément ${_} n'existe pas.`);const T=Object.assign({},C,g);Object.keys(g).map(R=>{g[R]===void 0&&delete T[R]}),élémentsÉgaux(T,C)||await S.put(_,T),await E()}async vérifierClefsÉlément({idTableau:r,élément:g}){const _=await this.client.obtIdBd({nom:"colonnes",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaBdInfoColAvecCatégorie}),C=[...(await x.all()).map(R=>R.value.id),"id"],T=Object.keys(g).filter(R=>C.includes(R));return await S(),Object.fromEntries(T.map(R=>[R,g[R]]))}async effacerÉlément({idTableau:r,idÉlément:g}){const _=await this.client.obtIdBd({nom:"données",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaBdDonnéesTableau});await x.del(g),await S()}async combinerDonnées({idTableauBase:r,idTableau2:g}){const _=await uneFois$2(async C=>await this.suivreDonnées({idTableau:r,f:C}),attendreStabilité$1(1e3)),x=await uneFois$2(async C=>await this.suivreColonnesTableau({idTableau:r,f:C,catégories:!1}),C=>C!==void 0&&[...new Set(_.map(T=>Object.keys(T.données).filter(R=>R!=="id")).flat())].length<=C.length),S=await uneFois$2(async C=>await this.suivreDonnées({idTableau:g,f:C}),attendreStabilité$1(1e3)),E=x.filter(C=>C.index).map(C=>C.id);for(const C of S){const T=_.find(R=>indexÉlémentsÉgaux(R.données,C.données,E));if(T){const R={};for(const A of x)T.données[A.id]===void 0&&C.données[A.id]!==void 0&&(R[A.id]=C.données[A.id]);Object.keys(R).length&&(await this.effacerÉlément({idTableau:r,idÉlément:T.id}),await this.ajouterÉlément({idTableau:r,vals:Object.assign({},T.données,R)}))}else await this.ajouterÉlément({idTableau:r,vals:C.données})}}async convertirDonnées({idTableau:r,données:g,conversions:_={},importerFichiers:x,cheminBaseFichiers:S,donnéesExistantes:E}){const C=await uneFois$2(async M=>await this.suivreColonnesTableau({idTableau:r,f:M,catégories:!0})),T=new Set(E?.map(M=>C.filter(O=>O.catégorie?.catégorie==="chaîne").map(O=>O.catégorie?.type==="simple"?[M[O.id]]:M[O.id]).flat().filter(O=>typeof O=="string")).flat()||[]),R={},A=async({chemin:M})=>{try{if(new URL(M),R[M])return R[M];const O=(await axios.get(M)).data,L=M.split("/"),F=L.pop()||L.pop();if(!F)throw new Error("Nom de fichier manquant.");const U=await this.client.ajouterÀSFIP({nomFichier:F,contenu:O});R[M]=U}catch{}if(isNode||isElectronMain){const O=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url),L=await __vitePreload(()=>Promise.resolve().then(()=>index$1),void 0,import.meta.url),F=S?L.resolve(S,M):M;if(!O.existsSync(F))return;if(R[F])return R[F];const U=O.readFileSync(F),j=await this.client.ajouterÀSFIP({nomFichier:L.basename(F),contenu:U});return R[M]=j,j}},I={},B=async({val:M,langue:O})=>{if(I[O]?.[M])return I[O][M];for(const L of T){const{bd:F,fOublier:U}=await this.client.ouvrirBdTypée({id:L,type:"keyvalue",schéma:schémaStructureBdNoms}),j=await F.get(O);if(await U(),j===M)return I[O]||(I[O]={}),I[O][M]=L,L}},D=async({val:M,langue:O})=>{const{bd:L,fOublier:F}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdNoms}),j={address:L.access.address};await F();const z=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:j}),{bd:W,fOublier:X}=await this.client.ouvrirBdTypée({id:z,type:"keyvalue",schéma:schémaStructureBdNoms});return await W.set(O,M),await X(),T.add(z),z},N=async({val:M,catégorie:O,conversion:L})=>{switch(O){case"audio":case"image":case"vidéo":case"fichier":return typeof M=="string"&&x?cidEtFichierValide(M)?M:await A({chemin:M})||M:M;case"booléen":return typeof M=="string"?M.toLowerCase()==="true":M;case"numérique":{let F,U;L?.type==="numérique"&&({opération:F,systèmeNumération:U}=L);const j=({val:W,ops:X})=>{if(!X)return W;let ie=W;for(const fe of X)switch(fe.op){case"+":ie=W+fe.val;break;case"-":ie=W-fe.val;break;case"*":ie=W*fe.val;break;case"/":ie=W/fe.val;break;case"^":ie=W**fe.val;break;default:throw new Error(fe.op)}return ie};let z;if(typeof M=="string")try{z=this.client.ennikkai.எண்ணுக்கு({உரை:M,மொழி:U})}catch{}else typeof M=="number"&&(z=M);return z!==void 0?j({val:z,ops:Array.isArray(F)||typeof F>"u"?F:[F]}):M}case"horoDatage":if(L?.type==="horoDatage"&&typeof M=="string"){const{système:F,format:U}=L;return{système:"dateJS",val:cholqij.lireDate({système:F,val:M,format:U}).valueOf()}}else{if(["number","string"].includes(typeof M)){const F=new Date(M);return isNaN(F.valueOf())?M:{système:"dateJS",val:F.valueOf()}}return M}case"intervaleTemps":{const F=typeof M=="string"?JSON.parse(M):M;return Array.isArray(F)?await Promise.all(F.map(async U=>await N({val:U,catégorie:"horoDatage",conversion:L}))):F}case"chaîneNonTraductible":return M;case"chaîne":{if(typeof M!="string"||isValidAddress(M))return M;if(L?.type==="chaîne"){const{langue:F}=L;return await B({val:M,langue:F})||await D({val:M,langue:F})}return M}case"géojson":return typeof M=="string"?JSON.parse(M):M;default:return M}};for(const M of g)for(const O of C)if(O.catégorie){const{type:L,catégorie:F}=O.catégorie,U=M[O.id];if(U===void 0)continue;const j=_[O.id];if(L==="simple")M[O.id]=await N({val:U,catégorie:F,conversion:j});else{const z=typeof U=="string"?JSON.parse(U):U;M[O.id]=Array.isArray(z)?await Promise.all(z.map(async W=>await N({val:W,catégorie:F,conversion:j}))):[await N({val:z,catégorie:F,conversion:j})]}}return g}async importerDonnées({idTableau:r,données:g,conversions:_={},cheminBaseFichiers:x}){const S=await uneFois$2(async R=>await this.suivreDonnées({idTableau:r,f:R})),E=await this.convertirDonnées({idTableau:r,données:g,conversions:_,importerFichiers:!0,cheminBaseFichiers:x,donnéesExistantes:S.map(R=>R.données)}),C=[];for(const R of E)S.some(A=>élémentsÉgaux(A.données,R))||C.push(R);const T=[];for(const R of S)E.some(A=>élémentsÉgaux(A,R.données))||T.push(R.id);for(const R of T)await this.effacerÉlément({idTableau:r,idÉlément:R});for(const R of C)await this.ajouterÉlément({idTableau:r,vals:R})}async sauvegarderNomsTableau({idTableau:r,noms:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const E in g)await x.set(E,g[E]);await S()}async sauvegarderNomTableau({idTableau:r,langue:g,nom:_}){const x=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNoms});await S.set(g,_),await E()}async effacerNomTableau({idTableau:r,langue:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(g),await S()}async suivreNomsTableau({idTableau:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"noms",schéma:schémaStructureBdNoms,f:g})}async ajouterColonneTableau({idTableau:r,idVariable:g,idColonne:_}){const x=await this.client.obtIdBd({nom:"colonnes",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaBdInfoColAvecCatégorie});_=_||v4$3();const C={id:_,variable:g};return await S.put(_,C),await E(),_}async effacerColonneTableau({idTableau:r,idColonne:g}){const _=await this.client.obtIdBd({nom:"colonnes",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour BD ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaBdInfoColAvecCatégorie});await x.del(g),await S()}async suivreColonnesTableau({idTableau:r,f:g,catégories:_=!1}){const x=async R=>{if(R)return await g(R)},S=async(R,A,I)=>R?await this.client.variables.suivreCatégorieVariable({idVariable:R,f:async B=>{const D=Object.assign({catégorie:B},I);await A(D)}}):faisRien$1,E=R=>R.variable,C=R=>R.id,T=async({id:R,fSuivreBd:A})=>await this.client.suivreBdsDeBdDic({id:R,f:A,fBranche:S,fIdBdDeBranche:E,fCode:C});return _?await this.client.suivreBdDeClef({id:r,clef:"colonnes",f:x,fSuivre:T}):await this.client.suivreBdDicDeClef({id:r,clef:"colonnes",schéma:schémaBdInfoColAvecCatégorie,f:async R=>x(Object.values(R))})}async suivreVariables({idTableau:r,f:g}){const _=async S=>{await g((S||[]).filter(E=>E&&isValidAddress(E)))},x=async({id:S,fSuivreBd:E})=>await this.client.suivreBdListe({id:S,f:C=>E(C.map(T=>T.variable))});return await this.client.suivreBdDeClef({id:r,clef:"colonnes",f:_,fSuivre:x})}async ajouterRègleTableau({idTableau:r,idColonne:g,règle:_}){const x=await this.client.obtIdBd({nom:"règles",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour tableau ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaBdRègles}),C=v4$3(),R={règle:{id:C,règle:_},source:{type:"tableau",id:r},colonne:g};return await S.put(C,R),await E(),C}async effacerRègleTableau({idTableau:r,idRègle:g}){const _=await this.client.obtIdBd({nom:"règles",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour tableau ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaBdRègles});await x.del(g),await S()}async suivreRègles({idTableau:r,f:g}){const _={},x=async()=>{if(!(!_.tableau||!_.variable))return await g([..._.tableau,..._.variable])},S=async N=>(_.tableau=Object.values(N),await x()),E=await this.client.suivreBdDicDeClef({id:r,clef:"règles",schéma:schémaBdRègles,f:S}),B=await suivreBdsDeFonctionListe$1({fListe:async N=>await this.suivreColonnesTableau({idTableau:r,f:N,catégories:!1}),f:async N=>(_.variable=N,await x()),fBranche:async(N,M,O)=>{const L=F=>{const U=F.map(j=>({règle:j,source:{type:"variable",id:N},colonne:O.id}));return M(U)};return await this.client.variables.suivreRèglesVariable({idVariable:N,f:L})},fIdBdDeBranche:N=>N.variable,fCode:N=>N.id});return async()=>{await E(),await B()}}async suivreValidDonnées({idTableau:r,f:g}){const _={},x=async()=>{if(!_.données||!_.règles)return;let M=[];for(const O of _.règles){const L=O(_.données);M=[...M,...L.flat()]}await g(M)},S=async M=>{_.varsÀColonnes&&(_.règles=M.map(O=>générerFonctionRègle({règle:O.règle,varsÀColonnes:_.varsÀColonnes,donnéesCatégorie:O.donnéesCatégorie})),await x())},E=async M=>{_.données=M,await x()},C=await this.suivreColonnesTableau({idTableau:r,f:async M=>{const O=M.reduce((L,F)=>({...L,[F.variable]:F.id}),{});_.varsÀColonnes=O,await x()},catégories:!1}),B=await suivreBdsDeFonctionListe$1({fListe:async M=>await this.suivreRègles({idTableau:r,f:M}),f:S,fBranche:async(M,O,L)=>{if(L.règle.règle.typeRègle==="valeurCatégorique"&&L.règle.règle.détails.type==="dynamique"){const{tableau:F,colonne:U}=L.règle.règle.détails;return await this.suivreDonnées({idTableau:F,f:async j=>await O({règle:L,donnéesCatégorie:j.map(z=>z.données[U])})})}else return await O({règle:L}),faisRien$1},fIdBdDeBranche:M=>M.règle.id,fCode:M=>M.règle.id}),D=await this.suivreDonnées({idTableau:r,f:E});return async()=>{await B(),await D(),await C()}}async suivreValidRègles({idTableau:r,f:g}){const _={},x=async()=>{if(!_.colonnes||!_.règles)return;const D=[],N=_.règles.map(F=>F.règle).filter(F=>F.règle.règle.typeRègle==="bornes"),M=N.filter(F=>F.règle.règle.détails.type==="dynamiqueColonne"),O=N.filter(F=>F.règle.règle.détails.type==="dynamiqueVariable"),L=_.règles.filter(F=>F.règle.règle.règle.typeRègle==="valeurCatégorique"&&F.règle.règle.règle.détails.type==="dynamique");for(const F of M)if(!_.colonnes.find(j=>j.id===F.règle.règle.détails.val)){const j={règle:F,détails:"colonneBornesInexistante"};D.push(j)}for(const F of O)if(!_.colonnes.find(j=>j.variable===F.règle.règle.détails.val)){const j={règle:F,détails:"variableBornesNonPrésente"};D.push(j)}for(const F of L)if(!F.colsTableauRéf?.find(j=>j.id===F.règle.règle.règle.détails.colonne)){const j={règle:F.règle,détails:"colonneCatégInexistante"};D.push(j)}await g(D)},S=async D=>(_.règles=D,await x()),E=await this.suivreColonnesTableau({idTableau:r,f:async D=>(_.colonnes=D,await x()),catégories:!1}),I=await suivreBdsDeFonctionListe$1({fListe:async D=>await this.suivreRègles({idTableau:r,f:D}),f:S,fBranche:async(D,N,M)=>{if(M.règle.règle.typeRègle==="valeurCatégorique"&&M.règle.règle.détails.type==="dynamique"){const{tableau:O}=M.règle.règle.détails;return await this.suivreColonnesTableau({idTableau:O,f:L=>N({règle:M,colsTableauRéf:L}),catégories:!1})}else return await N({règle:M}),faisRien$1},fIdBdDeBranche:D=>D.règle.id,fCode:D=>D.règle.id});return async()=>{await I(),await E()}}async effacerTableau({idTableau:r}){for(const g of["noms","données","colonnes","règles"]){const _=await this.client.obtIdBd({nom:g,racine:r});_&&await this.client.effacerBd({id:_})}await this.client.effacerBd({id:r})}}__decorate([cacheSuivi],Tableaux.prototype,"suivreDifférencesAvecTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreIndex",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreDonnées",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreNomsTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreColonnesTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreVariables",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreRègles",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidDonnées",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidRègles",null);const schémaBdPrincipale={type:"string"},schémaStructureBdVariable={type:"object",properties:{type:{type:"string",nullable:!0},catégorie:{type:"object",properties:{catégorie:{type:"string",nullable:!0},type:{type:"string",nullable:!0}},required:[],nullable:!0},noms:{type:"string",nullable:!0},descriptions:{type:"string",nullable:!0},unités:{type:"string",nullable:!0},règles:{type:"string",nullable:!0},statut:{type:"object",properties:{idNouvelle:{type:"string",nullable:!0},statut:{type:"string",nullable:!0}},required:[],nullable:!0}},required:[]},schémaBdRèglesVariable={type:"object",additionalProperties:{type:"object",properties:{typeRègle:{type:"string"},détails:{type:"object",required:[],additionalProperties:!0}},required:["détails","typeRègle"]},required:[]};class Variables extends ComposanteClientListe{constructor({client:r}){super({client:r,clef:"variables",schémaBdPrincipale})}async suivreRésolutionÉpingle({épingle:r,f:g}){const _=await this.client.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.base||"TOUS"});return await this.client.suivreBd({id:r.idObjet,type:"keyvalue",schéma:schémaStructureBdVariable,f:async S=>{try{const E=await S.allAsJSON();return await g(new Set(_?[r.idObjet,E.descriptions,E.noms,E.règles].filter(C=>!!C):[]))}catch{return}}})}async suivreVariables({f:r,idCompte:g}){return await this.suivreBdPrincipale({idCompte:g,f:r})}async créerVariable({catégorie:r,épingler:g=!0}){const _=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:{address:void 0,write:await this.client.obtIdCompte()}});await this.ajouterÀMesVariables({idVariable:_}),g&&await this.épinglerVariable({idVariable:_});const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdVariable}),E=x.access;if(!estUnContrôleurConstellation(E))throw Error("Contrôleur de type non reconnu.");const C={address:E.address};await x.set("type","variable");const T=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:C});await x.set("noms",T);const R=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:C});await x.set("descriptions",R);const A=await this.client.créerBdIndépendante({type:"keyvalue",optionsAccès:C});return await x.set("règles",A),await x.set("catégorie",this.standardiserCatégorieVariable(r)),await this.établirStatut({id:_,statut:{statut:"active"}}),S(),_}async ajouterÀMesVariables({idVariable:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.add(r),await _()}async enleverDeMesVariables({idVariable:r}){const{bd:g,fOublier:_}=await this.obtBd();await g.del(r),await _()}async épinglerVariable({idVariable:r,options:g={}}){const _=résoudreDéfauts(g,{type:"variable",base:TOUS});await this.client.favoris.épinglerFavori({idObjet:r,épingle:_})}async suivreÉpingleVariable({idVariable:r,f:g,idCompte:_}){return await this.client.favoris.suivreÉtatFavori({idObjet:r,f:async x=>{x?.type==="variable"?await g(x):await g(void 0)},idCompte:_})}async copierVariable({idVariable:r}){const{bd:g,fOublier:_}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdVariable}),x=await g.get("catégorie"),S=await this.créerVariable({catégorie:x}),{bd:E,fOublier:C}=await this.client.ouvrirBdTypée({id:S,type:"keyvalue",schéma:schémaStructureBdVariable}),T=await g.get("noms");if(T){const{bd:D,fOublier:N}=await this.client.ouvrirBdTypée({id:T,type:"keyvalue",schéma:schémaStructureBdNoms}),M=await D.allAsJSON();await N(),await this.sauvegarderNomsVariable({idVariable:S,noms:M})}const R=await g.get("descriptions");if(R){const{bd:D,fOublier:N}=await this.client.ouvrirBdTypée({id:R,type:"keyvalue",schéma:schémaStructureBdNoms}),M=await D.allAsJSON();await N(),await this.sauvegarderDescriptionsVariable({idVariable:S,descriptions:M})}const A=await g.get("unités");A&&await E.put("unités",A);const I=await g.get("règles");if(I){const{bd:D,fOublier:N}=await this.client.ouvrirBdTypée({id:I,type:"keyvalue",schéma:schémaBdRèglesVariable}),M=await D.allAsJSON();await N(),await Promise.all(Object.entries(M).map(async([O,L])=>{await this.ajouterRègleVariable({idVariable:S,règle:L,idRègle:O})}))}const B=await g.get("statut")||{statut:"active"};return await this.établirStatut({id:S,statut:B}),await Promise.all([_(),C()]),S}async inviterAuteur({idVariable:r,idCompteAuteur:g,rôle:_}){await this.client.donnerAccès({idBd:r,identité:g,rôle:_})}async sauvegarderNomsVariable({idVariable:r,noms:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Variable ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const E in g)await x.set(E,g[E]);await S()}async sauvegarderNomVariable({idVariable:r,langue:g,nom:_}){const x=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour variable ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNoms});await S.set(g,_),await E()}async effacerNomVariable({idVariable:r,langue:g}){const _=await this.client.obtIdBd({nom:"noms",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Variable ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(g),await S()}async sauvegarderDescriptionsVariable({idVariable:r,descriptions:g}){const _=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Variable ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});for(const E in g)await x.set(E,g[E]);await S()}async sauvegarderDescriptionVariable({idVariable:r,langue:g,description:_}){const x=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour Variable ${r}.`);const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdNoms});await S.set(g,_),await E()}async effacerDescriptionVariable({idVariable:r,langue:g}){const _=await this.client.obtIdBd({nom:"descriptions",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour Variable ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaStructureBdNoms});await x.del(g),await S()}async sauvegarderCatégorieVariable({idVariable:r,catégorie:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdVariable});await _.set("catégorie",this.standardiserCatégorieVariable(g)),await x()}standardiserCatégorieVariable(r){return typeof r=="string"?{type:"simple",catégorie:r}:r}async sauvegarderUnitésVariable({idVariable:r,idUnité:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdVariable});await _.set("unités",g),await x()}async ajouterRègleVariable({idVariable:r,règle:g,idRègle:_}){const x=await this.client.obtIdBd({nom:"règles",racine:r,type:"keyvalue"});if(!x)throw new Error(`Permission de modification refusée pour variable ${r}.`);_=_||v4$3();const{bd:S,fOublier:E}=await this.client.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaBdRèglesVariable});return await S.put(_,g),await E(),_}async effacerRègleVariable({idVariable:r,idRègle:g}){const _=await this.client.obtIdBd({nom:"règles",racine:r,type:"keyvalue"});if(!_)throw new Error(`Permission de modification refusée pour variable ${r}.`);const{bd:x,fOublier:S}=await this.client.ouvrirBdTypée({id:_,type:"keyvalue",schéma:schémaBdRèglesVariable});await x.del(g),await S()}async modifierRègleVariable({idVariable:r,règleModifiée:g,idRègle:_}){await this.effacerRègleVariable({idVariable:r,idRègle:_}),await this.ajouterRègleVariable({idVariable:r,règle:g,idRègle:_})}async suivreNomsVariable({idVariable:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"noms",schéma:schémaStructureBdNoms,f:g})}async suivreDescriptionsVariable({idVariable:r,f:g}){return await this.client.suivreBdDicDeClef({id:r,clef:"descriptions",schéma:schémaStructureBdNoms,f:g})}async suivreCatégorieVariable({idVariable:r,f:g}){return await this.client.suivreBd({id:r,type:"keyvalue",schéma:schémaStructureBdVariable,f:async _=>{const x=await _.get("catégorie");x&&x.catégorie&&x.type&&await g(this.standardiserCatégorieVariable(x))}})}async suivreUnitésVariable({idVariable:r,f:g}){return await this.client.suivreBd({id:r,type:"keyvalue",schéma:schémaStructureBdVariable,f:async _=>{const x=await _.get("unités");await g(x||null)}})}async suivreRèglesVariable({idVariable:r,f:g}){const _={catégorie:{},propres:{}},x=async()=>{await g(Object.entries(Object.assign({},_.catégorie,_.propres)).map(([A,I])=>({id:A,règle:I})))},S=async A=>{const I={[v4$3()]:{typeRègle:"catégorie",détails:{catégorie:A}}};_.catégorie=I,await x()},E=await this.suivreCatégorieVariable({idVariable:r,f:S}),C=async A=>{_.propres=A,await x()},T=await this.client.suivreBdDicDeClef({id:r,clef:"règles",schéma:schémaBdRèglesVariable,f:C});return async()=>{await E(),await T()}}async suivreQualitéVariable({idVariable:r,f:g}){const _={noms:{},descr:{},règles:[]},x=async()=>{const I=[Object.keys(_.noms).length?1:0,Object.keys(_.descr).length?1:0];_.catégorie?.catégorie==="numérique"&&I.push(_.unités?1:0),_.catégorie?.catégorie==="numérique"&&I.push(_.règles.length>=1?1:0);const B=I.reduce((D,N)=>D+N,0)/I.length;await g(B)},S=await this.suivreNomsVariable({idVariable:r,f:async I=>{_.noms=I,await x()}}),E=await this.suivreDescriptionsVariable({idVariable:r,f:async I=>{_.descr=I,await x()}}),C=await this.suivreUnitésVariable({idVariable:r,f:async I=>{_.unités=I,await x()}}),T=await this.suivreCatégorieVariable({idVariable:r,f:async I=>{_.catégorie=I,await x()}}),R=await this.suivreRèglesVariable({idVariable:r,f:async I=>{_.règles=I,await x()}});return async()=>{await Promise.all([S(),E(),C(),T(),R()])}}async établirStatut({id:r,statut:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdVariable});await _.set("statut",g),await x()}async marquerObsolète({id:r,idNouvelle:g}){const{bd:_,fOublier:x}=await this.client.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdVariable});_.set("statut",{statut:"obsolète",idNouvelle:g}),await x()}async effacerVariable({idVariable:r}){await this.enleverDeMesVariables({idVariable:r}),await this.client.favoris.désépinglerFavori({idObjet:r});for(const g of["noms","descriptions","règles"]){const _=await this.client.obtIdBd({nom:g,racine:r});_&&await this.client.effacerBd({id:_})}await this.client.effacerBd({id:r})}}__decorate([cacheSuivi],Variables.prototype,"suivreVariables",null);__decorate([cacheSuivi],Variables.prototype,"suivreNomsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreDescriptionsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreCatégorieVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreUnitésVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreRèglesVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreQualitéVariable",null);var empty$1=null;const empty$2=Object.freeze(Object.defineProperty({__proto__:null,default:empty$1},Symbol.toStringTag,{value:"Module"})),stockagesLocaux={};class LocalStorage{fichier;_données;_événements;_idRequêteSauvegarde;verrou;fOublier;constructor(r){this.fichier=path.join(r,"données.json"),this._événements=new eventsExports.EventEmitter,this.verrou=new s$2,empty$1.existsSync(r)||empty$1.mkdirSync(r,{recursive:!0});try{this._données=JSON.parse(empty$1.readFileSync(this.fichier).toString())}catch{this._données={}}const g=()=>{const _=v4$3();this._idRequêteSauvegarde=_,this.sauvegarder(_)};this._événements.on("sauvegarder",g),this.fOublier=()=>this._événements.off("sauvegarder",g)}getItem(r){return this._données[r]}setItem(r,g){this._données[r]=g,this.demanderSauvegarde()}demanderSauvegarde(){this._événements.emit("sauvegarder")}removeItem(r){delete this._données[r],this.demanderSauvegarde()}clear(){this._données={},empty$1.rmSync(this.fichier)}async sauvegarder(r){if(await this.verrou.acquire("sauvegarder"),this._idRequêteSauvegarde!==r){this.verrou.release("sauvegarder");return}await empty$1.promises.writeFile(this.fichier,JSON.stringify(this._données)),this.verrou.release("sauvegarder")}async fermer(){await this.verrou.acquire("sauvegarder"),this.fOublier?.(),this.verrou.release("sauvegarder")}}const obtStockageLocal=async n=>{if(typeof localStorage>"u"||localStorage===null){const r=path.join(n,"stockageLocal");return stockagesLocaux[r]||(stockagesLocaux[r]=new LocalStorage(r)),stockagesLocaux[r]}else return localStorage},exporterStockageLocal=async n=>{const r=await obtStockageLocal(n);return r instanceof LocalStorage?JSON.stringify(r._données):JSON.stringify(r)},connectionSymbol=Symbol.for("@libp2p/connection"),contentRoutingSymbol=Symbol.for("@libp2p/content-routing"),peerDiscoverySymbol=Symbol.for("@libp2p/peer-discovery"),peerIdSymbol=Symbol.for("@libp2p/peer-id");function isPeerId(n){return!!n?.[peerIdSymbol]}const peerRoutingSymbol=Symbol.for("@libp2p/peer-routing"),KEEP_ALIVE="keep-alive",StrictSign="StrictSign",StrictNoSign="StrictNoSign";var TopicValidatorResult;(function(n){n.Accept="accept",n.Ignore="ignore",n.Reject="reject"})(TopicValidatorResult||(TopicValidatorResult={}));const transportSymbol=Symbol.for("@libp2p/transport");var FaultTolerance;(function(n){n[n.FATAL_ALL=0]="FATAL_ALL",n[n.NO_FATAL=1]="NO_FATAL"})(FaultTolerance||(FaultTolerance={}));let AbortError$4=class extends Error{static name="AbortError";constructor(r="The operation was aborted"){super(r),this.name="AbortError"}};class UnexpectedPeerError extends Error{static name="UnexpectedPeerError";constructor(r="Unexpected Peer"){super(r),this.name="UnexpectedPeerError"}}let InvalidCryptoExchangeError$1=class extends Error{static name="InvalidCryptoExchangeError";constructor(r="Invalid crypto exchange"){super(r),this.name="InvalidCryptoExchangeError"}};class InvalidParametersError extends Error{static name="InvalidParametersError";constructor(r="Invalid parameters"){super(r),this.name="InvalidParametersError"}}class InvalidPublicKeyError extends Error{static name="InvalidPublicKeyError";constructor(r="Invalid public key"){super(r),this.name="InvalidPublicKeyError"}}class InvalidPrivateKeyError extends Error{static name="InvalidPrivateKeyError";constructor(r="Invalid private key"){super(r),this.name="InvalidPrivateKeyError"}}class ConnectionClosingError extends Error{static name="ConnectionClosingError";constructor(r="The connection is closing"){super(r),this.name="ConnectionClosingError"}}class ConnectionClosedError extends Error{static name="ConnectionClosedError";constructor(r="The connection is closed"){super(r),this.name="ConnectionClosedError"}}class ConnectionFailedError extends Error{static name="ConnectionFailedError";constructor(r="Connection failed"){super(r),this.name="ConnectionFailedError"}}class MuxerClosedError extends Error{static name="MuxerClosedError";constructor(r="The muxer is closed"){super(r),this.name="MuxerClosedError"}}class StreamResetError extends Error{static name="StreamResetError";constructor(r="The stream has been reset"){super(r),this.name="StreamResetError"}}class StreamStateError extends Error{static name="StreamStateError";constructor(r="The stream is in an invalid state"){super(r),this.name="StreamStateError"}}let NotFoundError$1=class extends Error{static name="NotFoundError";constructor(r="Not found"){super(r),this.name="NotFoundError"}};class InvalidPeerIdError extends Error{static name="InvalidPeerIdError";constructor(r="Invalid PeerID"){super(r),this.name="InvalidPeerIdError"}}class InvalidMultiaddrError extends Error{static name="InvalidMultiaddrError";constructor(r="Invalid multiaddr"){super(r),this.name="InvalidMultiaddrError"}}class InvalidCIDError extends Error{static name="InvalidCIDError";constructor(r="Invalid CID"){super(r),this.name="InvalidCIDError"}}class InvalidMultihashError extends Error{static name="InvalidMultihashError";constructor(r="Invalid Multihash"){super(r),this.name="InvalidMultihashError"}}class UnsupportedProtocolError extends Error{static name="UnsupportedProtocolError";constructor(r="Unsupported protocol error"){super(r),this.name="UnsupportedProtocolError"}}class InvalidMessageError extends Error{static name="InvalidMessageError";constructor(r="Invalid message"){super(r),this.name="InvalidMessageError"}}class ProtocolError extends Error{static name="ProtocolError";constructor(r="Protocol error"){super(r),this.name="ProtocolError"}}class TimeoutError extends Error{static name="TimeoutError";constructor(r="Timed out"){super(r),this.name="TimeoutError"}}class NotStartedError extends Error{static name="NotStartedError";constructor(r="Not started"){super(r),this.name="NotStartedError"}}class DialError extends Error{static name="DialError";constructor(r="Dial error"){super(r),this.name="DialError"}}class ListenError extends Error{static name="ListenError";constructor(r="Listen error"){super(r),this.name="ListenError"}}class LimitedConnectionError extends Error{static name="LimitedConnectionError";constructor(r="Limited connection"){super(r),this.name="LimitedConnectionError"}}class TooManyInboundProtocolStreamsError extends Error{static name="TooManyInboundProtocolStreamsError";constructor(r="Too many inbound protocol streams"){super(r),this.name="TooManyInboundProtocolStreamsError"}}class TooManyOutboundProtocolStreamsError extends Error{static name="TooManyOutboundProtocolStreamsError";constructor(r="Too many outbound protocol streams"){super(r),this.name="TooManyOutboundProtocolStreamsError"}}class UnsupportedKeyTypeError extends Error{static name="UnsupportedKeyTypeError";constructor(r="Unsupported key type"){super(r),this.name="UnsupportedKeyTypeError"}}const setMaxListeners=(n,...r)=>{try{eventsExports.setMaxListeners(n,...r)}catch{}};class TypedEventEmitter extends EventTarget{#e=new Map;constructor(){super(),setMaxListeners(1/0,this)}listenerCount(r){const g=this.#e.get(r);return g==null?0:g.length}addEventListener(r,g,_){super.addEventListener(r,g,_);let x=this.#e.get(r);x==null&&(x=[],this.#e.set(r,x)),x.push({callback:g,once:(_!==!0&&_!==!1&&_?.once)??!1})}removeEventListener(r,g,_){super.removeEventListener(r.toString(),g??null,_);let x=this.#e.get(r);x!=null&&(x=x.filter(({callback:S})=>S!==g),this.#e.set(r,x))}dispatchEvent(r){const g=super.dispatchEvent(r);let _=this.#e.get(r.type);return _==null||(_=_.filter(({once:x})=>!x),this.#e.set(r.type,_)),g}safeDispatchEvent(r,g={}){return this.dispatchEvent(new CustomEvent(r,g))}}function isStartable(n){return n!=null&&typeof n.start=="function"&&typeof n.stop=="function"}async function start(...n){const r=[];for(const g of n)isStartable(g)&&r.push(g);await Promise.all(r.map(async g=>{g.beforeStart!=null&&await g.beforeStart()})),await Promise.all(r.map(async g=>{await g.start()})),await Promise.all(r.map(async g=>{g.afterStart!=null&&await g.afterStart()}))}async function stop(...n){const r=[];for(const g of n)isStartable(g)&&r.push(g);await Promise.all(r.map(async g=>{g.beforeStop!=null&&await g.beforeStop()})),await Promise.all(r.map(async g=>{await g.stop()})),await Promise.all(r.map(async g=>{g.afterStop!=null&&await g.afterStop()}))}const serviceCapabilities=Symbol.for("@libp2p/service-capabilities"),serviceDependencies=Symbol.for("@libp2p/service-dependencies");function anySignal(n){const r=new globalThis.AbortController;function g(){r.abort();for(const S of n)S?.removeEventListener!=null&&S.removeEventListener("abort",g)}for(const S of n){if(S?.aborted===!0){g();break}S?.addEventListener!=null&&S.addEventListener("abort",g)}function _(){for(const S of n)S?.removeEventListener!=null&&S.removeEventListener("abort",g)}const x=r.signal;return x.clear=_,x}let AbortError$3=class extends Error{type;code;constructor(r,g){super(r??"The operation was aborted"),this.type="aborted",this.name="AbortError",this.code=g??"ABORT_ERR"}};async function raceEvent(n,r,g,_){const x=new AbortError$3(_?.errorMessage,_?.errorCode);return g?.aborted===!0?Promise.reject(x):new Promise((S,E)=>{function C(){g?.removeEventListener("abort",A),n.removeEventListener(r,T),_?.errorEvent!=null&&n.removeEventListener(_.errorEvent,R)}const T=I=>{try{if(_?.filter?.(I)===!1)return}catch(B){C(),E(B);return}C(),S(I)},R=I=>{C(),E(I.detail)},A=()=>{C(),E(x)};g?.addEventListener("abort",A),n.addEventListener(r,T),_?.errorEvent!=null&&n.addEventListener(_.errorEvent,R)})}class RateLimitError extends Error{remainingPoints;msBeforeNext;consumedPoints;isFirstInDuration;constructor(r="Rate limit exceeded",g){super(r),this.name="RateLimitError",this.remainingPoints=g.remainingPoints,this.msBeforeNext=g.msBeforeNext,this.consumedPoints=g.consumedPoints,this.isFirstInDuration=g.isFirstInDuration}}class QueueFullError extends Error{static name="QueueFullError";constructor(r="The queue was full"){super(r),this.name="QueueFullError"}}let AbortError$2=class extends Error{type;code;constructor(r,g,_){super(r??"The operation was aborted"),this.type="aborted",this.name=_??"AbortError",this.code=g??"ABORT_ERR"}};async function raceSignal(n,r,g){if(r==null)return n;if(r.aborted)return Promise.reject(new AbortError$2(g?.errorMessage,g?.errorCode,g?.errorName));let _;const x=new AbortError$2(g?.errorMessage,g?.errorCode,g?.errorName);try{return await Promise.race([n,new Promise((S,E)=>{_=()=>{E(x)},r.addEventListener("abort",_)})])}finally{_!=null&&r.removeEventListener("abort",_)}}class JobRecipient{deferred;signal;constructor(r){this.signal=r,this.deferred=pDefer(),this.onAbort=this.onAbort.bind(this),this.signal?.addEventListener("abort",this.onAbort)}onAbort(){this.deferred.reject(this.signal?.reason??new AbortError$4)}cleanup(){this.signal?.removeEventListener("abort",this.onAbort)}}function randomId(){return`${parseInt(String(Math.random()*1e9),10).toString()}${Date.now()}`}class Job{id;fn;options;recipients;status;timeline;controller;constructor(r,g){this.id=randomId(),this.status="queued",this.fn=r,this.options=g,this.recipients=[],this.timeline={created:Date.now()},this.controller=new AbortController,setMaxListeners(1/0,this.controller.signal),this.onAbort=this.onAbort.bind(this)}abort(r){this.controller.abort(r)}onAbort(){this.recipients.reduce((g,_)=>g&&_.signal?.aborted===!0,!0)&&(this.controller.abort(new AbortError$4),this.cleanup())}async join(r={}){const g=new JobRecipient(r.signal);return this.recipients.push(g),r.signal?.addEventListener("abort",this.onAbort),g.deferred.promise}async run(){this.status="running",this.timeline.started=Date.now();try{this.controller.signal.throwIfAborted();const r=await raceSignal(this.fn({...this.options??{},signal:this.controller.signal}),this.controller.signal);this.recipients.forEach(g=>{g.deferred.resolve(r)}),this.status="complete"}catch(r){this.recipients.forEach(g=>{g.deferred.reject(r)}),this.status="errored"}finally{this.timeline.finished=Date.now(),this.cleanup()}}cleanup(){this.recipients.forEach(r=>{r.cleanup(),r.signal?.removeEventListener("abort",this.onAbort)})}}class Queue extends TypedEventEmitter{concurrency;maxSize;queue;pending;sort;constructor(r={}){super(),this.concurrency=r.concurrency??Number.POSITIVE_INFINITY,this.maxSize=r.maxSize??Number.POSITIVE_INFINITY,this.pending=0,r.metricName!=null&&r.metrics?.registerMetricGroup(r.metricName,{calculate:()=>({size:this.queue.length,running:this.pending,queued:this.queue.length-this.pending})}),this.sort=r.sort,this.queue=[]}tryToStartAnother(){if(this.size===0)return queueMicrotask(()=>{this.safeDispatchEvent("empty")}),this.running===0&&queueMicrotask(()=>{this.safeDispatchEvent("idle")}),!1;if(this.pending<this.concurrency){let r;for(const g of this.queue)if(g.status==="queued"){r=g;break}return r==null?!1:(this.safeDispatchEvent("active"),this.pending++,r.run().finally(()=>{for(let g=0;g<this.queue.length;g++)if(this.queue[g]===r){this.queue.splice(g,1);break}this.pending--,this.tryToStartAnother(),this.safeDispatchEvent("next")}),!0)}return!1}enqueue(r){this.queue.push(r),this.sort!=null&&this.queue.sort(this.sort)}async add(r,g){if(g?.signal?.throwIfAborted(),this.size===this.maxSize)throw new QueueFullError;const _=new Job(r,g);return this.enqueue(_),this.safeDispatchEvent("add"),this.tryToStartAnother(),_.join(g).then(x=>(this.safeDispatchEvent("completed",{detail:x}),this.safeDispatchEvent("success",{detail:{job:_,result:x}}),x)).catch(x=>{if(_.status==="queued"){for(let S=0;S<this.queue.length;S++)if(this.queue[S]===_){this.queue.splice(S,1);break}}throw this.safeDispatchEvent("error",{detail:x}),this.safeDispatchEvent("failure",{detail:{job:_,error:x}}),x})}clear(){this.queue.splice(0,this.queue.length)}abort(){this.queue.forEach(r=>{r.abort(new AbortError$4)}),this.clear()}async onEmpty(r){this.size!==0&&await raceEvent(this,"empty",r?.signal)}async onSizeLessThan(r,g){this.size<r||await raceEvent(this,"next",g?.signal,{filter:()=>this.size<r})}async onIdle(r){this.pending===0&&this.size===0||await raceEvent(this,"idle",r?.signal)}get size(){return this.queue.length}get queued(){return this.queue.length-this.pending}get running(){return this.pending}async*toGenerator(r){r?.signal?.throwIfAborted();const g=pushable({objectMode:!0}),_=T=>{T!=null?this.abort():this.clear(),g.end(T)},x=T=>{T.detail!=null&&g.push(T.detail)},S=T=>{_(T.detail)},E=()=>{_()},C=()=>{_(new AbortError$4("Queue aborted"))};this.addEventListener("completed",x),this.addEventListener("error",S),this.addEventListener("idle",E),r?.signal?.addEventListener("abort",C);try{yield*g}finally{this.removeEventListener("completed",x),this.removeEventListener("error",S),this.removeEventListener("idle",E),r?.signal?.removeEventListener("abort",C),_()}}}class PeerQueue extends Queue{has(r){return this.find(r)!=null}find(r){return this.queue.find(g=>r.equals(g.options.peerId))}}function isAsyncIterable$4(n){return n[Symbol.asyncIterator]!=null}const defaultEncoder=n=>{const r=encodingLength(n),g=allocUnsafe(r);return encode$d(n,g),defaultEncoder.bytes=r,g};defaultEncoder.bytes=0;function encode$2(n,r){r=r??{};const g=r.lengthEncoder??defaultEncoder;function*_(x){const S=g(x.byteLength);S instanceof Uint8Array?yield S:yield*S,x instanceof Uint8Array?yield x:yield*x}return isAsyncIterable$4(n)?async function*(){for await(const x of n)yield*_(x)}():function*(){for(const x of n)yield*_(x)}()}encode$2.single=(n,r)=>{r=r??{};const g=r.lengthEncoder??defaultEncoder;return new Uint8ArrayList(g(n.byteLength),n)};let InvalidMessageLengthError$1=class extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"},InvalidDataLengthError$1=class extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"},InvalidDataLengthLengthError$1=class extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"},UnexpectedEOFError$1=class extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"};const MAX_LENGTH_LENGTH=8,MAX_DATA_LENGTH=1024*1024*4;var ReadMode;(function(n){n[n.LENGTH=0]="LENGTH",n[n.DATA=1]="DATA"})(ReadMode||(ReadMode={}));const defaultDecoder=n=>{const r=decode$a(n);return defaultDecoder.bytes=encodingLength(r),r};defaultDecoder.bytes=0;function decode$2(n,r){const g=new Uint8ArrayList;let _=ReadMode.LENGTH,x=-1;const S=r?.lengthDecoder??defaultDecoder,E=r?.maxLengthLength??MAX_LENGTH_LENGTH,C=r?.maxDataLength??MAX_DATA_LENGTH;function*T(){for(;g.byteLength>0;){if(_===ReadMode.LENGTH)try{if(x=S(g),x<0)throw new InvalidMessageLengthError$1("Invalid message length");if(x>C)throw new InvalidDataLengthError$1("Message length too long");const R=S.bytes;g.consume(R),r?.onLength!=null&&r.onLength(x),_=ReadMode.DATA}catch(R){if(R instanceof RangeError){if(g.byteLength>E)throw new InvalidDataLengthLengthError$1("Message length length too long");break}throw R}if(_===ReadMode.DATA){if(g.byteLength<x)break;const R=g.sublist(0,x);g.consume(x),r?.onData!=null&&r.onData(R),yield R,_=ReadMode.LENGTH}}}return isAsyncIterable$4(n)?async function*(){for await(const R of n)g.append(R),yield*T();if(g.byteLength>0)throw new UnexpectedEOFError$1("Unexpected end of input")}():function*(){for(const R of n)g.append(R),yield*T();if(g.byteLength>0)throw new UnexpectedEOFError$1("Unexpected end of input")}()}decode$2.fromReader=(n,r)=>{let g=1;const _=async function*(){for(;;)try{const{done:S,value:E}=await n.next(g);if(S===!0)return;E!=null&&(yield E)}catch(S){if(S.code==="ERR_UNDER_READ")return{done:!0,value:null};throw S}finally{g=1}}();return decode$2(_,{...r??{},onLength:S=>{g=S}})};function isAsyncIterable$3(n){return n[Symbol.asyncIterator]!=null}function take(n,r){return isAsyncIterable$3(n)?async function*(){let g=0;if(!(r<1)){for await(const _ of n)if(yield _,g++,g===r)return}}():function*(){let g=0;if(!(r<1)){for(const _ of n)if(yield _,g++,g===r)return}}()}const BITSWAP_120="/ipfs/bitswap/1.2.0",DEFAULT_MAX_SIZE_REPLACE_HAS_WITH_BLOCK=1024,DEFAULT_MAX_INBOUND_STREAMS$2=1024,DEFAULT_MAX_OUTBOUND_STREAMS$2=1024,DEFAULT_MESSAGE_RECEIVE_TIMEOUT=5e3,DEFAULT_MESSAGE_SEND_DELAY=10,DEFAULT_MESSAGE_SEND_CONCURRENCY=50,DEFAULT_RUN_ON_TRANSIENT_CONNECTIONS=!1,DEFAULT_MAX_PROVIDERS_PER_REQUEST=3,DEFAULT_MAX_OUTGOING_MESSAGE_SIZE=1024*1024*4,DEFAULT_MAX_INCOMING_MESSAGE_SIZE=DEFAULT_MAX_OUTGOING_MESSAGE_SIZE;var WantType;(function(n){n.WantBlock="WantBlock",n.WantHave="WantHave"})(WantType||(WantType={}));var __WantTypeValues;(function(n){n[n.WantBlock=0]="WantBlock",n[n.WantHave=1]="WantHave"})(__WantTypeValues||(__WantTypeValues={}));(function(n){n.codec=()=>enumeration(__WantTypeValues)})(WantType||(WantType={}));var WantlistEntry;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.cid!=null&&g.cid.byteLength>0&&(_.uint32(10),_.bytes(g.cid)),g.priority!=null&&g.priority!==0&&(_.uint32(16),_.int32(g.priority)),g.cancel!=null&&(_.uint32(24),_.bool(g.cancel)),g.wantType!=null&&(_.uint32(32),WantType.codec().encode(g.wantType,_)),g.sendDontHave!=null&&(_.uint32(40),_.bool(g.sendDontHave)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={cid:alloc$1(0),priority:0},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.cid=g.bytes();break}case 2:{S.priority=g.int32();break}case 3:{S.cancel=g.bool();break}case 4:{S.wantType=WantType.codec().decode(g);break}case 5:{S.sendDontHave=g.bool();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(WantlistEntry||(WantlistEntry={}));var Wantlist;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.entries!=null)for(const S of g.entries)_.uint32(10),WantlistEntry.codec().encode(S,_);g.full!=null&&(_.uint32(16),_.bool(g.full)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={entries:[]},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{if(x.limits?.entries!=null&&S.entries.length===x.limits.entries)throw new MaxLengthError('Decode error - map field "entries" had too many elements');S.entries.push(WantlistEntry.codec().decode(g,g.uint32(),{limits:x.limits?.entries$}));break}case 2:{S.full=g.bool();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Wantlist||(Wantlist={}));var Block;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.prefix!=null&&g.prefix.byteLength>0&&(_.uint32(10),_.bytes(g.prefix)),g.data!=null&&g.data.byteLength>0&&(_.uint32(18),_.bytes(g.data)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={prefix:alloc$1(0),data:alloc$1(0)},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.prefix=g.bytes();break}case 2:{S.data=g.bytes();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Block||(Block={}));var BlockPresenceType;(function(n){n.HaveBlock="HaveBlock",n.DontHaveBlock="DontHaveBlock"})(BlockPresenceType||(BlockPresenceType={}));var __BlockPresenceTypeValues;(function(n){n[n.HaveBlock=0]="HaveBlock",n[n.DontHaveBlock=1]="DontHaveBlock"})(__BlockPresenceTypeValues||(__BlockPresenceTypeValues={}));(function(n){n.codec=()=>enumeration(__BlockPresenceTypeValues)})(BlockPresenceType||(BlockPresenceType={}));var BlockPresence;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.cid!=null&&g.cid.byteLength>0&&(_.uint32(10),_.bytes(g.cid)),g.type!=null&&__BlockPresenceTypeValues[g.type]!==0&&(_.uint32(16),BlockPresenceType.codec().encode(g.type,_)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={cid:alloc$1(0),type:BlockPresenceType.HaveBlock},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.cid=g.bytes();break}case 2:{S.type=BlockPresenceType.codec().decode(g);break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(BlockPresence||(BlockPresence={}));var BitswapMessage;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.wantlist!=null&&(_.uint32(10),Wantlist.codec().encode(g.wantlist,_)),g.blocks!=null)for(const S of g.blocks)_.uint32(26),Block.codec().encode(S,_);if(g.blockPresences!=null)for(const S of g.blockPresences)_.uint32(34),BlockPresence.codec().encode(S,_);g.pendingBytes!=null&&g.pendingBytes!==0&&(_.uint32(40),_.int32(g.pendingBytes)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={blocks:[],blockPresences:[],pendingBytes:0},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.wantlist=Wantlist.codec().decode(g,g.uint32(),{limits:x.limits?.wantlist});break}case 3:{if(x.limits?.blocks!=null&&S.blocks.length===x.limits.blocks)throw new MaxLengthError('Decode error - map field "blocks" had too many elements');S.blocks.push(Block.codec().decode(g,g.uint32(),{limits:x.limits?.blocks$}));break}case 4:{if(x.limits?.blockPresences!=null&&S.blockPresences.length===x.limits.blockPresences)throw new MaxLengthError('Decode error - map field "blockPresences" had too many elements');S.blockPresences.push(BlockPresence.codec().decode(g,g.uint32(),{limits:x.limits?.blockPresences$}));break}case 5:{S.pendingBytes=g.int32();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(BitswapMessage||(BitswapMessage={}));function mergeMessages(n,r){for(const[g,_]of r.wantlist.entries()){const x=n.wantlist.get(g);x!=null&&(x.priority>_.priority&&(_.priority=x.priority),_.cancel=_.cancel??x.cancel,_.wantType=_.wantType??x.wantType,_.sendDontHave=_.sendDontHave??x.sendDontHave),n.wantlist.set(g,_)}for(const[g,_]of r.blockPresences.entries())n.blockPresences.set(g,_);for(const[g,_]of r.blocks.entries())n.blocks.set(g,_);return r.full&&!n.full&&(n.full=!0),n}class BlockTooLargeError extends Error{static name="BlockTooLargeError";constructor(r="Block too large"){super(r),this.name="BlockTooLargeError"}}const MAX_BLOCK_SIZE=4193648,MAX_ENCODED_BLOCK_SIZE=MAX_BLOCK_SIZE+16;function*splitMessage(n,r){const g=[...n.wantlist.values()],_=[...n.blockPresences.values()],x=[...n.blocks.values()];let S=0,E=0,C=0,T=!1;for(;;){const R={wantlist:{full:n.full??!1,entries:[]},blockPresences:[],blocks:[],pendingBytes:0};let A=BitswapMessage.encode(R).byteLength,{added:I,hasMore:B,newSize:D}=addToMessage(x,R.blocks,C,r,A,calculateEncodedBlockSize);C+=I,A=D;const N=B;({added:I,hasMore:B,newSize:D}=addToMessage(_,R.blockPresences,E,r,A,calculateEncodedBlockPresenceSize)),E+=I,A=D;const M=B;if({added:I,hasMore:B,newSize:D}=addToMessage(g,R.wantlist.entries,S,r,A,calculateEncodedWantlistEntrySize),S+=I,A=D,T=!N&&!M&&!B,T||(R.wantlist.full=!1),yield BitswapMessage.encode(R),T)break}}function addToMessage(n,r,g,_,x,S){let E=0,C=!1;for(let T=g;T<n.length;T++){const R=n[T],A=S(R);if(A>MAX_ENCODED_BLOCK_SIZE)throw new BlockTooLargeError("Cannot send block as after encoding it is over the max message size");const I=x+A;if(I>_){C=!0;break}r.push(R),E++,x=I}return{hasMore:C,added:E,newSize:x}}function calculateEncodedBlockSize(n){return calculateLength(3,Block.encode(n))}function calculateEncodedBlockPresenceSize(n){return calculateLength(4,BlockPresence.encode(n))}function calculateEncodedWantlistEntrySize(n){return calculateLength(1,WantlistEntry.encode(n))}function calculateLength(n,r){const g=encodingLength(n),_=encodingLength(r.byteLength);return g+_+r.byteLength}let Network$1=class extends TypedEventEmitter{log;libp2p;routing;protocols;running;maxInboundStreams;maxOutboundStreams;messageReceiveTimeout;registrarIds;metrics;sendQueue;runOnLimitedConnections;maxOutgoingMessageSize;maxIncomingMessageSize;constructor(r,g={}){super(),this.log=r.logger.forComponent("helia:bitswap:network"),this.libp2p=r.libp2p,this.routing=r.routing,this.protocols=g.protocols??[BITSWAP_120],this.registrarIds=[],this.running=!1,this._onStream=this._onStream.bind(this),this.maxInboundStreams=g.maxInboundStreams??DEFAULT_MAX_INBOUND_STREAMS$2,this.maxOutboundStreams=g.maxOutboundStreams??DEFAULT_MAX_OUTBOUND_STREAMS$2,this.messageReceiveTimeout=g.messageReceiveTimeout??DEFAULT_MESSAGE_RECEIVE_TIMEOUT,this.runOnLimitedConnections=g.runOnLimitedConnections??DEFAULT_RUN_ON_TRANSIENT_CONNECTIONS,this.maxIncomingMessageSize=g.maxIncomingMessageSize??DEFAULT_MAX_OUTGOING_MESSAGE_SIZE,this.maxOutgoingMessageSize=g.maxOutgoingMessageSize??g.maxIncomingMessageSize??DEFAULT_MAX_INCOMING_MESSAGE_SIZE,this.metrics={blocksSent:r.metrics?.registerCounter("helia_bitswap_sent_blocks_total"),dataSent:r.metrics?.registerCounter("helia_bitswap_sent_data_bytes_total")},this.sendQueue=new PeerQueue({concurrency:g.messageSendConcurrency??DEFAULT_MESSAGE_SEND_CONCURRENCY,metrics:r.metrics,metricName:"helia_bitswap_message_send_queue"}),this.sendQueue.addEventListener("error",_=>{this.log.error("error sending wantlist to peer",_.detail)})}async start(){if(this.running)return;this.running=!0,await this.libp2p.handle(this.protocols,this._onStream,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnections});const r={onConnect:g=>{this.safeDispatchEvent("peer:connected",{detail:g})},onDisconnect:g=>{this.safeDispatchEvent("peer:disconnected",{detail:g})}};this.registrarIds=[];for(const g of this.protocols)this.registrarIds.push(await this.libp2p.register(g,r));this.libp2p.getConnections().forEach(g=>{this.safeDispatchEvent("peer:connected",{detail:g.remotePeer})})}async stop(){if(this.running=!1,await this.libp2p.unhandle(this.protocols),this.registrarIds!=null){for(const r of this.registrarIds)this.libp2p.unregister(r);this.registrarIds=[]}}_onStream(r){if(!this.running)return;const{stream:g,connection:_}=r;Promise.resolve().then(async()=>{this.log("incoming new bitswap %s stream from %p",g.protocol,_.remotePeer);const x=()=>{g.status==="open"?g.abort(new TimeoutError(`Incoming Bitswap stream timed out after ${this.messageReceiveTimeout}ms`)):this.log("stream aborted with status %s",g.status)};let S=AbortSignal.timeout(this.messageReceiveTimeout);setMaxListeners(1/0,S),S.addEventListener("abort",x),await g.closeWrite(),await pipe(g,E=>decode$2(E,{maxDataLength:this.maxIncomingMessageSize}),async E=>{for await(const C of E)try{const T=BitswapMessage.decode(C);this.log("incoming new bitswap %s message from %p on stream",g.protocol,_.remotePeer,g.id),this.safeDispatchEvent("bitswap:message",{detail:{peer:_.remotePeer,message:T}}),S.removeEventListener("abort",x),S=AbortSignal.timeout(this.messageReceiveTimeout),setMaxListeners(1/0,S),S.addEventListener("abort",x)}catch(T){this.log.error("error reading incoming bitswap message from %p on stream",_.remotePeer,g.id,T),g.abort(T);break}})}).catch(x=>{this.log.error("error handling incoming stream from %p",_.remotePeer,x),g.abort(x)})}async*findProviders(r,g){g?.onProgress?.(new CustomProgressEvent("bitswap:network:find-providers",r));for await(const _ of this.routing.findProviders(r,g))await this.libp2p.isDialable(_.multiaddrs,{runOnLimitedConnection:this.runOnLimitedConnections})&&(yield _)}async findAndConnect(r,g){await drain(map$2(take(this.findProviders(r,g),g?.maxProviders??DEFAULT_MAX_PROVIDERS_PER_REQUEST),async _=>this.connectTo(_.id,g))).catch(_=>{this.log.error(_)})}async sendMessage(r,g,_){if(!this.running)throw new Error("network isn't running");const x=this.sendQueue.queue.find(S=>r.equals(S.options.peerId)&&S.status==="queued");if(x!=null){x.options.message=mergeMessages(x.options.message,g),await x.join({signal:_?.signal});return}await this.sendQueue.add(async S=>{const E=S?.message;if(E==null)throw new InvalidParametersError("No message to send");this.log("sendMessage to %p",r),S?.onProgress?.(new CustomProgressEvent("bitswap:network:send-wantlist",r));const C=await this.libp2p.dialProtocol(r,BITSWAP_120,S);await C.closeRead();try{await pipe(splitMessage(E,this.maxOutgoingMessageSize),T=>encode$2(T),C),await C.close(S)}catch(T){S?.onProgress?.(new CustomProgressEvent("bitswap:network:send-wantlist:error",{peer:r,error:T})),this.log.error("error sending message to %p",r,T),C.abort(T)}this._updateSentStats(E.blocks)},{peerId:r,signal:_?.signal,message:g})}async connectTo(r,g){if(!this.running)throw new NotStartedError("Network isn't running");g?.onProgress?.(new CustomProgressEvent("bitswap:network:dial",r));const[_]=await Promise.all([this.libp2p.dial(r,g),raceEvent(this.libp2p,"peer:identify",g?.signal,{filter:x=>{if(!x.detail.peerId.equals(r))return!1;if(x.detail.protocols.includes(BITSWAP_120))return!0;throw new UnsupportedProtocolError(`${r} did not support ${BITSWAP_120}`)}})]);return _}_updateSentStats(r){let g=0;for(const _ of r.values())g+=_.data.byteLength;this.metrics.dataSent?.increment(g),this.metrics.blocksSent?.increment(r.size)}};const PUBLIC_KEY_BYTE_LENGTH=32,PRIVATE_KEY_BYTE_LENGTH=64,KEYS_BYTE_LENGTH=32;function generateKey(){const n=ed25519.utils.randomPrivateKey(),r=ed25519.getPublicKey(n);return{privateKey:concatKeys(n,r),publicKey:r}}function hashAndSign$2(n,r){const g=n.subarray(0,KEYS_BYTE_LENGTH);return ed25519.sign(r instanceof Uint8Array?r:r.subarray(),g)}function hashAndVerify$2(n,r,g){return ed25519.verify(r,g instanceof Uint8Array?g:g.subarray(),n)}function concatKeys(n,r){const g=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH);for(let _=0;_<KEYS_BYTE_LENGTH;_++)g[_]=n[_],g[KEYS_BYTE_LENGTH+_]=r[_];return g}class Ed25519PublicKey{type="Ed25519";raw;constructor(r){this.raw=ensureEd25519Key(r,PUBLIC_KEY_BYTE_LENGTH)}toMultihash(){return identity$1.digest(publicKeyToProtobuf(this))}toCID(){return CID$1.createV1(114,this.toMultihash())}toString(){return base58btc$1.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}verify(r,g){return hashAndVerify$2(this.raw,g,r)}}class Ed25519PrivateKey{type="Ed25519";raw;publicKey;constructor(r,g){this.raw=ensureEd25519Key(r,PRIVATE_KEY_BYTE_LENGTH),this.publicKey=new Ed25519PublicKey(g)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}sign(r){return hashAndSign$2(this.raw,r)}}function unmarshalEd25519PrivateKey(n){if(n.length>PRIVATE_KEY_BYTE_LENGTH){n=ensureEd25519Key(n,PRIVATE_KEY_BYTE_LENGTH+PUBLIC_KEY_BYTE_LENGTH);const _=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH),x=n.subarray(PRIVATE_KEY_BYTE_LENGTH,n.length);return new Ed25519PrivateKey(_,x)}n=ensureEd25519Key(n,PRIVATE_KEY_BYTE_LENGTH);const r=n.subarray(0,PRIVATE_KEY_BYTE_LENGTH),g=n.subarray(PUBLIC_KEY_BYTE_LENGTH);return new Ed25519PrivateKey(r,g)}function unmarshalEd25519PublicKey(n){return n=ensureEd25519Key(n,PUBLIC_KEY_BYTE_LENGTH),new Ed25519PublicKey(n)}async function generateEd25519KeyPair(){const{privateKey:n,publicKey:r}=generateKey();return new Ed25519PrivateKey(n,r)}function ensureEd25519Key(n,r){if(n=Uint8Array.from(n??[]),n.length!==r)throw new InvalidParametersError(`Key must be a Uint8Array of length ${r}, got ${n.length}`);return n}var KeyType;(function(n){n.RSA="RSA",n.Ed25519="Ed25519",n.secp256k1="secp256k1"})(KeyType||(KeyType={}));var __KeyTypeValues;(function(n){n[n.RSA=0]="RSA",n[n.Ed25519=1]="Ed25519",n[n.secp256k1=2]="secp256k1"})(__KeyTypeValues||(__KeyTypeValues={}));(function(n){n.codec=()=>enumeration(__KeyTypeValues)})(KeyType||(KeyType={}));var PublicKey;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.Type!=null&&(_.uint32(8),KeyType.codec().encode(g.Type,_)),g.Data!=null&&(_.uint32(18),_.bytes(g.Data)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.Type=KeyType.codec().decode(g);break}case 2:{S.Data=g.bytes();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(PublicKey||(PublicKey={}));var PrivateKey;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.Type!=null&&(_.uint32(8),KeyType.codec().encode(g.Type,_)),g.Data!=null&&(_.uint32(18),_.bytes(g.Data)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.Type=KeyType.codec().decode(g);break}case 2:{S.Data=g.bytes();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(PrivateKey||(PrivateKey={}));function randomBytes(n){if(isNaN(n)||n<=0)throw new InvalidParametersError("random bytes length must be a Number bigger than 0");return randomBytes$1(n)}class SigningError extends Error{constructor(r="An error occurred while signing a message"){super(r),this.name="SigningError"}}class VerificationError extends Error{constructor(r="An error occurred while verifying a message"){super(r),this.name="VerificationError"}}class WebCryptoMissingError extends Error{constructor(r="Missing Web Crypto API"){super(r),this.name="WebCryptoMissingError"}}const webcrypto={get(n=globalThis){const r=n.crypto;if(r?.subtle==null)throw new WebCryptoMissingError("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p/blob/main/packages/crypto/README.md#web-crypto-api");return r}};async function hashAndSign$1(n,r){const g=await webcrypto.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),_=await webcrypto.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},g,r instanceof Uint8Array?r:r.subarray());return new Uint8Array(_,0,_.byteLength)}async function hashAndVerify$1(n,r,g){const _=await webcrypto.get().subtle.importKey("jwk",n,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return webcrypto.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},_,r,g instanceof Uint8Array?g:g.subarray())}function rsaKeySize(n){if(n.kty!=="RSA")throw new InvalidParametersError("invalid key type");if(n.n==null)throw new InvalidParametersError("invalid key modulus");return fromString(n.n,"base64url").length*8}class RSAPublicKey{type="RSA";_key;_raw;_multihash;constructor(r,g){this._key=r,this._multihash=g}get raw(){return this._raw==null&&(this._raw=jwkToPkix(this._key)),this._raw}toMultihash(){return this._multihash}toCID(){return CID$1.createV1(114,this._multihash)}toString(){return base58btc$1.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}verify(r,g){return hashAndVerify$1(this._key,g,r)}}class RSAPrivateKey{type="RSA";_key;_raw;publicKey;constructor(r,g){this._key=r,this.publicKey=g}get raw(){return this._raw==null&&(this._raw=jwkToPkcs1(this._key)),this._raw}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}sign(r){return hashAndSign$1(this._key,r)}}const MAX_RSA_KEY_SIZE=8192,SHA2_256_CODE=18;function pkcs1ToJwk(n){const{result:r}=fromBER(n),g=r.valueBlock.value;return{n:asn1jsIntegerToBase64(g[1]),e:asn1jsIntegerToBase64(g[2]),d:asn1jsIntegerToBase64(g[3]),p:asn1jsIntegerToBase64(g[4]),q:asn1jsIntegerToBase64(g[5]),dp:asn1jsIntegerToBase64(g[6]),dq:asn1jsIntegerToBase64(g[7]),qi:asn1jsIntegerToBase64(g[8]),kty:"RSA",alg:"RS256"}}function jwkToPkcs1(n){if(n.n==null||n.e==null||n.d==null||n.p==null||n.q==null||n.dp==null||n.dq==null||n.qi==null)throw new InvalidParametersError("JWK was missing components");const g=new Sequence({value:[new Integer({value:0}),Integer.fromBigInt(bufToBn(fromString(n.n,"base64url"))),Integer.fromBigInt(bufToBn(fromString(n.e,"base64url"))),Integer.fromBigInt(bufToBn(fromString(n.d,"base64url"))),Integer.fromBigInt(bufToBn(fromString(n.p,"base64url"))),Integer.fromBigInt(bufToBn(fromString(n.q,"base64url"))),Integer.fromBigInt(bufToBn(fromString(n.dp,"base64url"))),Integer.fromBigInt(bufToBn(fromString(n.dq,"base64url"))),Integer.fromBigInt(bufToBn(fromString(n.qi,"base64url")))]}).toBER();return new Uint8Array(g,0,g.byteLength)}function pkixToJwk(n){const{result:r}=fromBER(n),g=r.valueBlock.value[1].valueBlock.value[0].valueBlock.value;return{kty:"RSA",n:asn1jsIntegerToBase64(g[0]),e:asn1jsIntegerToBase64(g[1])}}function jwkToPkix(n){if(n.n==null||n.e==null)throw new InvalidParametersError("JWK was missing components");const g=new Sequence({value:[new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.1.1.1"}),new Null]}),new BitString({valueHex:new Sequence({value:[Integer.fromBigInt(bufToBn(fromString(n.n,"base64url"))),Integer.fromBigInt(bufToBn(fromString(n.e,"base64url")))]}).toBER()})]}).toBER();return new Uint8Array(g,0,g.byteLength)}function asn1jsIntegerToBase64(n){let r=n.valueBlock.valueHexView;for(;r[0]===0;)r=r.subarray(1);return toString$3(r,"base64url")}function bufToBn(n){const r=[];return n.forEach(function(g){let _=g.toString(16);_.length%2>0&&(_=`0${_}`),r.push(_)}),BigInt("0x"+r.join(""))}function pkcs1ToRSAPrivateKey(n){const r=pkcs1ToJwk(n);return jwkToRSAPrivateKey(r)}function pkixToRSAPublicKey(n){const r=pkixToJwk(n);if(rsaKeySize(r)>MAX_RSA_KEY_SIZE)throw new InvalidPublicKeyError("Key size is too large");const g=sha256$7(PublicKey.encode({Type:KeyType.RSA,Data:n})),_=create$3(SHA2_256_CODE,g);return new RSAPublicKey(r,_)}function jwkToRSAPrivateKey(n){if(rsaKeySize(n)>MAX_RSA_KEY_SIZE)throw new InvalidParametersError("Key size is too large");const r=jwkToJWKKeyPair(n),g=sha256$7(PublicKey.encode({Type:KeyType.RSA,Data:jwkToPkix(r.publicKey)})),_=create$3(SHA2_256_CODE,g);return new RSAPrivateKey(r.privateKey,new RSAPublicKey(r.publicKey,_))}function jwkToJWKKeyPair(n){if(n==null)throw new InvalidParametersError("Missing key parameter");return{privateKey:n,publicKey:{kty:n.kty,n:n.n,e:n.e}}}function isPromise$5(n){return n==null?!1:typeof n.then=="function"&&typeof n.catch=="function"&&typeof n.finally=="function"}function hashAndSign(n,r){const g=sha256$8.digest(r instanceof Uint8Array?r:r.subarray());if(isPromise$5(g))return g.then(({digest:_})=>secp256k1$1.sign(_,n).toDERRawBytes()).catch(_=>{throw new SigningError(String(_))});try{return secp256k1$1.sign(g.digest,n).toDERRawBytes()}catch(_){throw new SigningError(String(_))}}function hashAndVerify(n,r,g){const _=sha256$8.digest(g instanceof Uint8Array?g:g.subarray());if(isPromise$5(_))return _.then(({digest:x})=>secp256k1$1.verify(r,x,n)).catch(x=>{throw new VerificationError(String(x))});try{return secp256k1$1.verify(r,_.digest,n)}catch(x){throw new VerificationError(String(x))}}class Secp256k1PublicKey{type="secp256k1";raw;_key;constructor(r){this._key=validateSecp256k1PublicKey(r),this.raw=compressSecp256k1PublicKey(this._key)}toMultihash(){return identity$1.digest(publicKeyToProtobuf(this))}toCID(){return CID$1.createV1(114,this.toMultihash())}toString(){return base58btc$1.encode(this.toMultihash().bytes).substring(1)}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}verify(r,g){return hashAndVerify(this._key,g,r)}}class Secp256k1PrivateKey{type="secp256k1";raw;publicKey;constructor(r,g){this.raw=validateSecp256k1PrivateKey(r),this.publicKey=new Secp256k1PublicKey(g??computeSecp256k1PublicKey(r))}equals(r){return r==null||!(r.raw instanceof Uint8Array)?!1:equals$1(this.raw,r.raw)}sign(r){return hashAndSign(this.raw,r)}}function unmarshalSecp256k1PrivateKey(n){return new Secp256k1PrivateKey(n)}function unmarshalSecp256k1PublicKey(n){return new Secp256k1PublicKey(n)}function compressSecp256k1PublicKey(n){return secp256k1$1.ProjectivePoint.fromHex(n).toRawBytes(!0)}function validateSecp256k1PrivateKey(n){try{return secp256k1$1.getPublicKey(n,!0),n}catch(r){throw new InvalidPrivateKeyError(String(r))}}function validateSecp256k1PublicKey(n){try{return secp256k1$1.ProjectivePoint.fromHex(n),n}catch(r){throw new InvalidPublicKeyError(String(r))}}function computeSecp256k1PublicKey(n){try{return secp256k1$1.getPublicKey(n,!0)}catch(r){throw new InvalidPrivateKeyError(String(r))}}async function generateKeyPair(n,r){return generateEd25519KeyPair()}function publicKeyFromProtobuf(n){const{Type:r,Data:g}=PublicKey.decode(n),_=g??new Uint8Array;switch(r){case KeyType.RSA:return pkixToRSAPublicKey(_);case KeyType.Ed25519:return unmarshalEd25519PublicKey(_);case KeyType.secp256k1:return unmarshalSecp256k1PublicKey(_);default:throw new UnsupportedKeyTypeError}}function publicKeyFromMultihash(n){const{Type:r,Data:g}=PublicKey.decode(n.digest),_=g??new Uint8Array;switch(r){case KeyType.Ed25519:return unmarshalEd25519PublicKey(_);case KeyType.secp256k1:return unmarshalSecp256k1PublicKey(_);default:throw new UnsupportedKeyTypeError}}function publicKeyToProtobuf(n){return PublicKey.encode({Type:KeyType[n.type],Data:n.raw})}function privateKeyFromProtobuf(n){const r=PrivateKey.decode(n),g=r.Data??new Uint8Array;switch(r.Type){case KeyType.RSA:return pkcs1ToRSAPrivateKey(g);case KeyType.Ed25519:return unmarshalEd25519PrivateKey(g);case KeyType.secp256k1:return unmarshalSecp256k1PrivateKey(g);default:throw new UnsupportedKeyTypeError}}function privateKeyFromRaw(n){return n.byteLength===64?unmarshalEd25519PrivateKey(n):n.byteLength===32?unmarshalSecp256k1PrivateKey(n):pkcs1ToRSAPrivateKey(n)}function privateKeyToProtobuf(n){return PrivateKey.encode({Type:KeyType[n.type],Data:n.raw})}const inspect=Symbol.for("nodejs.util.inspect.custom"),LIBP2P_KEY_CODE$1=114;class PeerIdImpl{type;multihash;publicKey;string;constructor(r){this.type=r.type,this.multihash=r.multihash,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}[peerIdSymbol]=!0;toString(){return this.string==null&&(this.string=base58btc$1.encode(this.multihash.bytes).slice(1)),this.string}toMultihash(){return this.multihash}toCID(){return CID$1.createV1(LIBP2P_KEY_CODE$1,this.multihash)}toJSON(){return this.toString()}equals(r){if(r==null)return!1;if(r instanceof Uint8Array)return equals$1(this.multihash.bytes,r);if(typeof r=="string")return this.toString()===r;if(r?.toMultihash()?.bytes!=null)return equals$1(this.multihash.bytes,r.toMultihash().bytes);throw new Error("not valid Id")}[inspect](){return`PeerId(${this.toString()})`}}class RSAPeerId extends PeerIdImpl{type="RSA";publicKey;constructor(r){super({...r,type:"RSA"}),this.publicKey=r.publicKey}}class Ed25519PeerId extends PeerIdImpl{type="Ed25519";publicKey;constructor(r){super({...r,type:"Ed25519"}),this.publicKey=r.publicKey}}class Secp256k1PeerId extends PeerIdImpl{type="secp256k1";publicKey;constructor(r){super({...r,type:"secp256k1"}),this.publicKey=r.publicKey}}const TRANSPORT_IPFS_GATEWAY_HTTP_CODE$2=2336;class URLPeerId{type="url";multihash;publicKey;url;constructor(r){this.url=r.toString(),this.multihash=identity$1.digest(fromString(this.url))}[inspect](){return`PeerId(${this.url})`}[peerIdSymbol]=!0;toString(){return this.toCID().toString()}toMultihash(){return this.multihash}toCID(){return CID$1.createV1(TRANSPORT_IPFS_GATEWAY_HTTP_CODE$2,this.toMultihash())}toJSON(){return this.toString()}equals(r){return r==null?!1:(r instanceof Uint8Array&&(r=toString$3(r)),r.toString()===this.toString())}}const LIBP2P_KEY_CODE=114,TRANSPORT_IPFS_GATEWAY_HTTP_CODE$1=2336;function peerIdFromString$1(n,r){let g;if(n.charAt(0)==="1"||n.charAt(0)==="Q")g=decode$h(base58btc$1.decode(`z${n}`));else throw new InvalidParametersError('Please pass a multibase decoder for strings that do not start with "1" or "Q"');return peerIdFromMultihash(g)}function peerIdFromPublicKey(n){if(n.type==="Ed25519")return new Ed25519PeerId({multihash:n.toCID().multihash,publicKey:n});if(n.type==="secp256k1")return new Secp256k1PeerId({multihash:n.toCID().multihash,publicKey:n});if(n.type==="RSA")return new RSAPeerId({multihash:n.toCID().multihash,publicKey:n});throw new UnsupportedKeyTypeError}function peerIdFromPrivateKey(n){return peerIdFromPublicKey(n.publicKey)}function peerIdFromMultihash(n){if(isSha256Multihash(n))return new RSAPeerId({multihash:n});if(isIdentityMultihash(n))try{const r=publicKeyFromMultihash(n);if(r.type==="Ed25519")return new Ed25519PeerId({multihash:n,publicKey:r});if(r.type==="secp256k1")return new Secp256k1PeerId({multihash:n,publicKey:r})}catch{const g=toString$3(n.digest);return new URLPeerId(new URL(g))}throw new InvalidMultihashError("Supplied PeerID Multihash is invalid")}function peerIdFromCID(n){if(n?.multihash==null||n.version==null||n.version===1&&n.code!==LIBP2P_KEY_CODE&&n.code!==TRANSPORT_IPFS_GATEWAY_HTTP_CODE$1)throw new InvalidCIDError("Supplied PeerID CID is invalid");if(n.code===TRANSPORT_IPFS_GATEWAY_HTTP_CODE$1){const r=toString$3(n.multihash.digest);return new URLPeerId(new URL(r))}return peerIdFromMultihash(n.multihash)}function isIdentityMultihash(n){return n.code===identity$1.code}function isSha256Multihash(n){return n.code===sha256$8.code}function mapIterable(n,r){const g={[Symbol.iterator]:()=>g,next:()=>{const _=n.next(),x=_.value;return _.done===!0||x==null?{done:!0,value:void 0}:{done:!1,value:r(x)}}};return g}function peerIdFromString(n){const r=decode$h(base58btc$1.decode(`z${n}`));return peerIdFromMultihash(r)}class PeerMap{map;constructor(r){if(this.map=new Map,r!=null)for(const[g,_]of r.entries())this.map.set(g.toString(),{key:g,value:_})}[Symbol.iterator](){return this.entries()}clear(){this.map.clear()}delete(r){return this.map.delete(r.toString())}entries(){return mapIterable(this.map.entries(),r=>[r[1].key,r[1].value])}forEach(r){this.map.forEach((g,_)=>{r(g.value,g.key,this)})}get(r){return this.map.get(r.toString())?.value}has(r){return this.map.has(r.toString())}set(r,g){this.map.set(r.toString(),{key:r,value:g})}keys(){return mapIterable(this.map.values(),r=>r.key)}values(){return mapIterable(this.map.values(),r=>r.value)}get size(){return this.map.size}}class PeerSet{set;constructor(r){if(this.set=new Set,r!=null)for(const g of r)this.set.add(g.toString())}get size(){return this.set.size}[Symbol.iterator](){return this.values()}add(r){this.set.add(r.toString())}clear(){this.set.clear()}delete(r){this.set.delete(r.toString())}entries(){return mapIterable(this.set.entries(),r=>{const g=peerIdFromString(r[0]);return[g,g]})}forEach(r){this.set.forEach(g=>{const _=peerIdFromString(g);r(_,_,this)})}has(r){return this.set.has(r.toString())}values(){return mapIterable(this.set.values(),r=>peerIdFromString(r))}intersection(r){const g=new PeerSet;for(const _ of r)this.has(_)&&g.add(_);return g}difference(r){const g=new PeerSet;for(const _ of this)r.has(_)||g.add(_);return g}union(r){const g=new PeerSet;for(const _ of r)g.add(_);for(const _ of this)g.add(_);return g}}class HMAC extends Hash$1{constructor(r,g){super(),this.finished=!1,this.destroyed=!1,ahash(r);const _=toBytes$2(g);if(this.iHash=r.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const x=this.blockLen,S=new Uint8Array(x);S.set(_.length>x?r.create().update(_).digest():_);for(let E=0;E<S.length;E++)S[E]^=54;this.iHash.update(S),this.oHash=r.create();for(let E=0;E<S.length;E++)S[E]^=106;this.oHash.update(S),S.fill(0)}update(r){return aexists(this),this.iHash.update(r),this}digestInto(r){aexists(this),abytes(r,this.outputLen),this.finished=!0,this.iHash.digestInto(r),this.oHash.update(r),this.oHash.digestInto(r),this.destroy()}digest(){const r=new Uint8Array(this.oHash.outputLen);return this.digestInto(r),r}_cloneInto(r){r||(r=Object.create(Object.getPrototypeOf(this),{}));const{oHash:g,iHash:_,finished:x,destroyed:S,blockLen:E,outputLen:C}=this;return r=r,r.finished=x,r.destroyed=S,r.blockLen=E,r.outputLen=C,r.oHash=g._cloneInto(r.oHash),r.iHash=_._cloneInto(r.iHash),r}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(n,r,g)=>new HMAC(n,r).update(g).digest();hmac.create=(n,r)=>new HMAC(n,r);function pbkdf2Init(n,r,g,_){ahash(n);const x=checkOpts$1({dkLen:32,asyncTick:10},_),{c:S,dkLen:E,asyncTick:C}=x;if(anumber(S),anumber(E),anumber(C),S<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const T=toBytes$2(r),R=toBytes$2(g),A=new Uint8Array(E),I=hmac.create(n,T),B=I._cloneInto().update(R);return{c:S,dkLen:E,asyncTick:C,DK:A,PRF:I,PRFSalt:B}}function pbkdf2Output(n,r,g,_,x){return n.destroy(),r.destroy(),_&&_.destroy(),x.fill(0),g}function pbkdf2$1(n,r,g,_){const{c:x,dkLen:S,DK:E,PRF:C,PRFSalt:T}=pbkdf2Init(n,r,g,_);let R;const A=new Uint8Array(4),I=createView$1(A),B=new Uint8Array(C.outputLen);for(let D=1,N=0;N<S;D++,N+=C.outputLen){const M=E.subarray(N,N+C.outputLen);I.setInt32(0,D,!1),(R=T._cloneInto(R)).update(A).digestInto(B),M.set(B.subarray(0,M.length));for(let O=1;O<x;O++){C._cloneInto(R).update(B).digestInto(B);for(let L=0;L<M.length;L++)M[L]^=B[L]}}return pbkdf2Output(C,T,E,R,B)}async function pbkdf2Async(n,r,g,_){const{c:x,dkLen:S,asyncTick:E,DK:C,PRF:T,PRFSalt:R}=pbkdf2Init(n,r,g,_);let A;const I=new Uint8Array(4),B=createView$1(I),D=new Uint8Array(T.outputLen);for(let N=1,M=0;M<S;N++,M+=T.outputLen){const O=C.subarray(M,M+T.outputLen);B.setInt32(0,N,!1),(A=R._cloneInto(A)).update(I).digestInto(D),O.set(D.subarray(0,O.length)),await asyncLoop(x-1,E,()=>{T._cloneInto(A).update(D).digestInto(D);for(let L=0;L<O.length;L++)O[L]^=D[L]})}return pbkdf2Output(T,R,C,A,D)}const SHA1_IV=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),SHA1_W=new Uint32Array(80);class SHA1 extends HashMD{constructor(){super(64,20,8,!1),this.A=SHA1_IV[0]|0,this.B=SHA1_IV[1]|0,this.C=SHA1_IV[2]|0,this.D=SHA1_IV[3]|0,this.E=SHA1_IV[4]|0}get(){const{A:r,B:g,C:_,D:x,E:S}=this;return[r,g,_,x,S]}set(r,g,_,x,S){this.A=r|0,this.B=g|0,this.C=_|0,this.D=x|0,this.E=S|0}process(r,g){for(let T=0;T<16;T++,g+=4)SHA1_W[T]=r.getUint32(g,!1);for(let T=16;T<80;T++)SHA1_W[T]=rotl$1(SHA1_W[T-3]^SHA1_W[T-8]^SHA1_W[T-14]^SHA1_W[T-16],1);let{A:_,B:x,C:S,D:E,E:C}=this;for(let T=0;T<80;T++){let R,A;T<20?(R=Chi$1(x,S,E),A=1518500249):T<40?(R=x^S^E,A=1859775393):T<60?(R=Maj(x,S,E),A=2400959708):(R=x^S^E,A=3395469782);const I=rotl$1(_,5)+R+C+A+SHA1_W[T]|0;C=E,E=S,S=rotl$1(x,30),x=_,_=I}_=_+this.A|0,x=x+this.B|0,S=S+this.C|0,E=E+this.D|0,C=C+this.E|0,this.set(_,x,S,E,C)}roundClean(){SHA1_W.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}const sha1=wrapConstructor(()=>new SHA1),U32_MASK64=BigInt(2**32-1),_32n=BigInt(32);function fromBig(n,r=!1){return r?{h:Number(n&U32_MASK64),l:Number(n>>_32n&U32_MASK64)}:{h:Number(n>>_32n&U32_MASK64)|0,l:Number(n&U32_MASK64)|0}}function split(n,r=!1){let g=new Uint32Array(n.length),_=new Uint32Array(n.length);for(let x=0;x<n.length;x++){const{h:S,l:E}=fromBig(n[x],r);[g[x],_[x]]=[S,E]}return[g,_]}const toBig=(n,r)=>BigInt(n>>>0)<<_32n|BigInt(r>>>0),shrSH=(n,r,g)=>n>>>g,shrSL=(n,r,g)=>n<<32-g|r>>>g,rotrSH=(n,r,g)=>n>>>g|r<<32-g,rotrSL=(n,r,g)=>n<<32-g|r>>>g,rotrBH=(n,r,g)=>n<<64-g|r>>>g-32,rotrBL=(n,r,g)=>n>>>g-32|r<<64-g,rotr32H=(n,r)=>r,rotr32L=(n,r)=>n,rotlSH=(n,r,g)=>n<<g|r>>>32-g,rotlSL=(n,r,g)=>r<<g|n>>>32-g,rotlBH=(n,r,g)=>r<<g-32|n>>>64-g,rotlBL=(n,r,g)=>n<<g-32|r>>>64-g;function add(n,r,g,_){const x=(r>>>0)+(_>>>0);return{h:n+g+(x/2**32|0)|0,l:x|0}}const add3L=(n,r,g)=>(n>>>0)+(r>>>0)+(g>>>0),add3H=(n,r,g,_)=>r+g+_+(n/2**32|0)|0,add4L=(n,r,g,_)=>(n>>>0)+(r>>>0)+(g>>>0)+(_>>>0),add4H=(n,r,g,_,x)=>r+g+_+x+(n/2**32|0)|0,add5L=(n,r,g,_,x)=>(n>>>0)+(r>>>0)+(g>>>0)+(_>>>0)+(x>>>0),add5H=(n,r,g,_,x,S)=>r+g+_+x+S+(n/2**32|0)|0,u64={fromBig,split,toBig,shrSH,shrSL,rotrSH,rotrSL,rotrBH,rotrBL,rotr32H,rotr32L,rotlSH,rotlSL,rotlBH,rotlBL,add,add3L,add3H,add4L,add4H,add5H,add5L},[SHA512_Kh,SHA512_Kl]=u64.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(n=>BigInt(n))),SHA512_W_H=new Uint32Array(80),SHA512_W_L=new Uint32Array(80);class SHA512 extends HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:r,Al:g,Bh:_,Bl:x,Ch:S,Cl:E,Dh:C,Dl:T,Eh:R,El:A,Fh:I,Fl:B,Gh:D,Gl:N,Hh:M,Hl:O}=this;return[r,g,_,x,S,E,C,T,R,A,I,B,D,N,M,O]}set(r,g,_,x,S,E,C,T,R,A,I,B,D,N,M,O){this.Ah=r|0,this.Al=g|0,this.Bh=_|0,this.Bl=x|0,this.Ch=S|0,this.Cl=E|0,this.Dh=C|0,this.Dl=T|0,this.Eh=R|0,this.El=A|0,this.Fh=I|0,this.Fl=B|0,this.Gh=D|0,this.Gl=N|0,this.Hh=M|0,this.Hl=O|0}process(r,g){for(let U=0;U<16;U++,g+=4)SHA512_W_H[U]=r.getUint32(g),SHA512_W_L[U]=r.getUint32(g+=4);for(let U=16;U<80;U++){const j=SHA512_W_H[U-15]|0,z=SHA512_W_L[U-15]|0,W=u64.rotrSH(j,z,1)^u64.rotrSH(j,z,8)^u64.shrSH(j,z,7),X=u64.rotrSL(j,z,1)^u64.rotrSL(j,z,8)^u64.shrSL(j,z,7),ie=SHA512_W_H[U-2]|0,fe=SHA512_W_L[U-2]|0,xe=u64.rotrSH(ie,fe,19)^u64.rotrBH(ie,fe,61)^u64.shrSH(ie,fe,6),we=u64.rotrSL(ie,fe,19)^u64.rotrBL(ie,fe,61)^u64.shrSL(ie,fe,6),G=u64.add4L(X,we,SHA512_W_L[U-7],SHA512_W_L[U-16]),J=u64.add4H(G,W,xe,SHA512_W_H[U-7],SHA512_W_H[U-16]);SHA512_W_H[U]=J|0,SHA512_W_L[U]=G|0}let{Ah:_,Al:x,Bh:S,Bl:E,Ch:C,Cl:T,Dh:R,Dl:A,Eh:I,El:B,Fh:D,Fl:N,Gh:M,Gl:O,Hh:L,Hl:F}=this;for(let U=0;U<80;U++){const j=u64.rotrSH(I,B,14)^u64.rotrSH(I,B,18)^u64.rotrBH(I,B,41),z=u64.rotrSL(I,B,14)^u64.rotrSL(I,B,18)^u64.rotrBL(I,B,41),W=I&D^~I&M,X=B&N^~B&O,ie=u64.add5L(F,z,X,SHA512_Kl[U],SHA512_W_L[U]),fe=u64.add5H(ie,L,j,W,SHA512_Kh[U],SHA512_W_H[U]),xe=ie|0,we=u64.rotrSH(_,x,28)^u64.rotrBH(_,x,34)^u64.rotrBH(_,x,39),G=u64.rotrSL(_,x,28)^u64.rotrBL(_,x,34)^u64.rotrBL(_,x,39),J=_&S^_&C^S&C,q=x&E^x&T^E&T;L=M|0,F=O|0,M=D|0,O=N|0,D=I|0,N=B|0,{h:I,l:B}=u64.add(R|0,A|0,fe|0,xe|0),R=C|0,A=T|0,C=S|0,T=E|0,S=_|0,E=x|0;const H=u64.add3L(xe,G,q);_=u64.add3H(H,fe,we,J),x=H|0}({h:_,l:x}=u64.add(this.Ah|0,this.Al|0,_|0,x|0)),{h:S,l:E}=u64.add(this.Bh|0,this.Bl|0,S|0,E|0),{h:C,l:T}=u64.add(this.Ch|0,this.Cl|0,C|0,T|0),{h:R,l:A}=u64.add(this.Dh|0,this.Dl|0,R|0,A|0),{h:I,l:B}=u64.add(this.Eh|0,this.El|0,I|0,B|0),{h:D,l:N}=u64.add(this.Fh|0,this.Fl|0,D|0,N|0),{h:M,l:O}=u64.add(this.Gh|0,this.Gl|0,M|0,O|0),{h:L,l:F}=u64.add(this.Hh|0,this.Hl|0,L|0,F|0),this.set(_,x,S,E,C,T,R,A,I,B,D,N,M,O,L,F)}roundClean(){SHA512_W_H.fill(0),SHA512_W_L.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const sha512=wrapConstructor(()=>new SHA512),hashName={sha1,"sha2-256":sha256$7,"sha2-512":sha512};function pbkdf2(n,r,g,_,x){if(x!=="sha1"&&x!=="sha2-256"&&x!=="sha2-512"){const C=Object.keys(hashName).join(" / ");throw new InvalidParametersError(`Hash '${x}' is unknown or not supported. Must be ${C}`)}const S=hashName[x],E=pbkdf2$1(S,n,r,{c:g,dkLen:_});return base64.encode(E).substring(1)}const MAX_FINGERPRINT_SIZE=64;class Fingerprint{fp;h;seed;constructor(r,g,_,x=2){if(x>MAX_FINGERPRINT_SIZE)throw new TypeError("Invalid Fingerprint Size");const S=g.hashV(r,_),E=alloc$1(x);for(let C=0;C<E.length;C++)E[C]=S[C];E.length===0&&(E[0]=7),this.fp=E,this.h=g,this.seed=_}hash(){return this.h.hash(this.fp,this.seed)}equals(r){return r?.fp instanceof Uint8Array?equals$1(this.fp,r.fp):!1}}function getRandomInt(n,r){return Math.floor(Math.random()*(r-n))+n}class Bucket{contents;constructor(r){this.contents=new Array(r).fill(null)}has(r){if(!(r instanceof Fingerprint))throw new TypeError("Invalid Fingerprint");return this.contents.some(g=>r.equals(g))}add(r){if(!(r instanceof Fingerprint))throw new TypeError("Invalid Fingerprint");for(let g=0;g<this.contents.length;g++)if(this.contents[g]==null)return this.contents[g]=r,!0;return!0}swap(r){if(!(r instanceof Fingerprint))throw new TypeError("Invalid Fingerprint");const g=getRandomInt(0,this.contents.length-1),_=this.contents[g];return this.contents[g]=r,_}remove(r){if(!(r instanceof Fingerprint))throw new TypeError("Invalid Fingerprint");const g=this.contents.findIndex(_=>r.equals(_));return g>-1?(this.contents[g]=null,!0):!1}}const FNV_PRIMES={32:16777619n,64:1099511628211n,128:309485009821345068724781371n,256:374144419156711147060143317175368453031918731002211n,512:35835915874844867368919076489095108449946327955754392558399825615420669938882575126094039892345713852759n,1024:5016456510113118655434598811035278955030765345404790744303017523831112055108147451509157692220295382716162651878526895249385292291816524375083746691371804094271873160484737966720260389217684476157468082573n},FNV_OFFSETS={32:2166136261n,64:14695981039346656037n,128:144066263297769815596495629667062367629n,256:100029257958052580907070968620625704837092796014241193945225284501741471925557n,512:9659303129496669498009435400716310466090418745672637896108374329434462657994582932197716438449813051892206539805784495328239340083876191928701583869517785n,1024:14197795064947621068722070641403218320880622795441933960878474914617582723252296732303717722150864096521202355549365628174669108571814760471015076148029755969804077320157692458563003215304957150157403644460363550505412711285966361610267868082893823963790439336411086884584107735010676915n},cachedEncoder=new globalThis.TextEncoder;function fnv1aUint8Array(n,r){const g=FNV_PRIMES[r];let _=FNV_OFFSETS[r];for(let x=0;x<n.length;x++)_^=BigInt(n[x]),_=BigInt.asUintN(r,_*g);return _}function fnv1aEncodeInto(n,r,g){if(g.length===0)throw new Error("The `utf8Buffer` option must have a length greater than zero");const _=FNV_PRIMES[r];let x=FNV_OFFSETS[r],S=n;for(;S.length>0;){const E=cachedEncoder.encodeInto(S,g);S=S.slice(E.read);for(let C=0;C<E.written;C++)x^=BigInt(g[C]),x=BigInt.asUintN(r,x*_)}return x}function fnv1a$1(n,{size:r=32,utf8Buffer:g}={}){if(!FNV_PRIMES[r])throw new Error("The `size` option must be one of 32, 64, 128, 256, 512, or 1024");if(typeof n=="string"){if(g)return fnv1aEncodeInto(n,r,g);n=cachedEncoder.encode(n)}return fnv1aUint8Array(n,r)}const fnv1a={hash:n=>Number(fnv1a$1(n,{size:32})),hashV:(n,r)=>numberToBuffer(fnv1a.hash(n,r))};function numberToBuffer(n){let r=n.toString(16);return r.length%2===1&&(r=`0${r}`),fromString(r,"base16")}const maxCuckooCount=500;class CuckooFilter{bucketSize;filterSize;fingerprintSize;buckets;count;hash;seed;constructor(r){this.filterSize=r.filterSize,this.bucketSize=r.bucketSize??4,this.fingerprintSize=r.fingerprintSize??2,this.count=0,this.buckets=[],this.hash=r.hash??fnv1a,this.seed=r.seed??getRandomInt(0,Math.pow(2,10))}add(r){typeof r=="string"&&(r=fromString(r));const g=new Fingerprint(r,this.hash,this.seed,this.fingerprintSize),_=this.hash.hash(r,this.seed)%this.filterSize,x=(_^g.hash())%this.filterSize;if(this.buckets[_]==null&&(this.buckets[_]=new Bucket(this.bucketSize)),this.buckets[x]==null&&(this.buckets[x]=new Bucket(this.bucketSize)),this.buckets[_].add(g)||this.buckets[x].add(g))return this.count++,!0;const S=[_,x];let E=S[getRandomInt(0,S.length-1)];this.buckets[E]==null&&(this.buckets[E]=new Bucket(this.bucketSize));for(let C=0;C<maxCuckooCount;C++){const T=this.buckets[E].swap(g);if(T!=null&&(E=(E^T.hash())%this.filterSize,this.buckets[E]==null&&(this.buckets[E]=new Bucket(this.bucketSize)),this.buckets[E].add(T)))return this.count++,!0}return!1}has(r){typeof r=="string"&&(r=fromString(r));const g=new Fingerprint(r,this.hash,this.seed,this.fingerprintSize),_=this.hash.hash(r,this.seed)%this.filterSize,x=this.buckets[_]?.has(g)??!1;if(x)return x;const S=(_^g.hash())%this.filterSize;return this.buckets[S]?.has(g)??!1}remove(r){typeof r=="string"&&(r=fromString(r));const g=new Fingerprint(r,this.hash,this.seed,this.fingerprintSize),_=this.hash.hash(r,this.seed)%this.filterSize,x=this.buckets[_]?.remove(g)??!1;if(x)return this.count--,x;const S=(_^g.hash())%this.filterSize,E=this.buckets[S]?.remove(g)??!1;return E&&this.count--,E}get reliable(){return Math.floor(100*(this.count/this.filterSize))<=90}}const MAX_LOAD={1:.5,2:.84,4:.95,8:.98};function calculateBucketSize(n=.001){return n>.002?2:n>1e-5?4:8}function optimize(n,r=.001){const g=calculateBucketSize(r),_=MAX_LOAD[g],x=Math.round(n/_),S=Math.min(Math.ceil(Math.log2(1/r)+Math.log2(2*g)),MAX_FINGERPRINT_SIZE);return{filterSize:x,bucketSize:g,fingerprintSize:S}}class ScalableCuckooFilter{filterSize;bucketSize;fingerprintSize;scale;filterSeries;hash;seed;constructor(r){this.bucketSize=r.bucketSize??4,this.filterSize=r.filterSize??(1<<18)/this.bucketSize,this.fingerprintSize=r.fingerprintSize??2,this.scale=r.scale??2,this.hash=r.hash??fnv1a,this.seed=r.seed??getRandomInt(0,Math.pow(2,10)),this.filterSeries=[new CuckooFilter({filterSize:this.filterSize,bucketSize:this.bucketSize,fingerprintSize:this.fingerprintSize,hash:this.hash,seed:this.seed})]}add(r){if(typeof r=="string"&&(r=fromString(r)),this.has(r))return!0;let g=this.filterSeries.find(_=>_.reliable);if(g==null){const _=this.filterSize*Math.pow(this.scale,this.filterSeries.length);g=new CuckooFilter({filterSize:_,bucketSize:this.bucketSize,fingerprintSize:this.fingerprintSize,hash:this.hash,seed:this.seed}),this.filterSeries.push(g)}return g.add(r)}has(r){typeof r=="string"&&(r=fromString(r));for(let g=0;g<this.filterSeries.length;g++)if(this.filterSeries[g].has(r))return!0;return!1}remove(r){typeof r=="string"&&(r=fromString(r));for(let g=0;g<this.filterSeries.length;g++)if(this.filterSeries[g].remove(r))return!0;return!1}get count(){return this.filterSeries.reduce((r,g)=>r+g.count,0)}}function createScalableCuckooFilter(n,r=.001,g){return new ScalableCuckooFilter({...optimize(n,r)})}class PeerFilter{filter;constructor(r,g){this.filter=createScalableCuckooFilter(r,g)}has(r){return this.filter.has(r.toMultihash().bytes)}add(r){this.filter.add(r.toMultihash().bytes)}remove(r){this.filter.remove?.(r.toMultihash().bytes)}}function peerFilter(n,r=.001){return new PeerFilter(n,r)}class TrackedPeerMap extends PeerMap{metric;constructor(r){super();const{name:g,metrics:_}=r;this.metric=_.registerMetric(g),this.updateComponentMetric()}set(r,g){return super.set(r,g),this.updateComponentMetric(),this}delete(r){const g=super.delete(r);return this.updateComponentMetric(),g}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function trackedPeerMap(n){const{name:r,metrics:g}=n;let _;return g!=null?_=new TrackedPeerMap({name:r,metrics:g}):_=new PeerMap,_}class QueuedBitswapMessage{full;pendingBytes;wantlist;blocks;blockPresences;constructor(r=!1,g=0){this.full=r,this.wantlist=new Map,this.blocks=new Map,this.blockPresences=new Map,this.pendingBytes=0}addWantlistEntry(r,g){const _=base64.encode(r.multihash.bytes);this.wantlist.set(_,g)}addBlockPresence(r,g){const _=base64.encode(r.multihash.bytes);this.blockPresences.set(_,g)}addBlock(r,g){const _=base64.encode(r.multihash.bytes);this.blocks.set(_,g)}}function varintEncoder(n){let r=new Uint8Array(n.reduce((_,x)=>_+encodingLength(x),0)),g=0;for(const _ of n)r=encode$d(_,r,g),g+=encodingLength(_);return r}function cidToPrefix(n){return varintEncoder([n.version,n.code,n.multihash.code,n.multihash.digest.byteLength])}class Ledger{peerId;blockstore;network;wants;exchangeCount;bytesSent;bytesReceived;lastExchange;maxSizeReplaceHasWithBlock;log;constructor(r,g){this.peerId=r.peerId,this.blockstore=r.blockstore,this.network=r.network,this.wants=new Map,this.log=r.logger.forComponent(`helia:bitswap:ledger:${r.peerId}`),this.exchangeCount=0,this.bytesSent=0,this.bytesReceived=0,this.maxSizeReplaceHasWithBlock=g.maxSizeReplaceHasWithBlock??DEFAULT_MAX_SIZE_REPLACE_HAS_WITH_BLOCK}sentBytes(r){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.bytesSent+=r}receivedBytes(r){this.exchangeCount++,this.lastExchange=new Date().getTime(),this.bytesReceived+=r}debtRatio(){return this.bytesSent/(this.bytesReceived+1)}async sendBlocksToPeer(r){const g=new QueuedBitswapMessage,_=new Set;for(const[x,S]of this.wants.entries())try{const E=await this.blockstore.get(S.cid,r);S.wantType===WantType.WantHave?E.byteLength<this.maxSizeReplaceHasWithBlock?(this.log("sending have and block for %c",S.cid),_.add(x),g.addBlock(S.cid,{data:E,prefix:cidToPrefix(S.cid)})):(this.log("sending have for %c",S.cid),g.addBlockPresence(S.cid,{cid:S.cid.bytes,type:BlockPresenceType.HaveBlock})):(this.log("sending block for %c",S.cid),_.add(x),g.addBlock(S.cid,{data:E,prefix:cidToPrefix(S.cid)}))}catch(E){if(E.name!=="NotFoundError")throw E;if(this.log("do not have block for %c",S.cid),!S.sendDontHave||S.sentDontHave===!0)continue;S.sentDontHave=!0,g.addBlockPresence(S.cid,{cid:S.cid.bytes,type:BlockPresenceType.DontHaveBlock})}if(g.blocks.size>0||g.blockPresences.size>0){this.log("sending message"),await this.network.sendMessage(this.peerId,g,r),this.log("sent message"),this.sentBytes([...g.blocks.values()].reduce((x,S)=>x+S.data.byteLength,0));for(const x of _)this.wants.delete(x)}}}class PeerWantLists{blockstore;network;ledgerMap;maxSizeReplaceHasWithBlock;log;logger;constructor(r,g={}){this.blockstore=r.blockstore,this.network=r.network,this.maxSizeReplaceHasWithBlock=g.maxSizeReplaceHasWithBlock,this.log=r.logger.forComponent("helia:bitswap:peer-want-lists"),this.logger=r.logger,this.ledgerMap=trackedPeerMap({name:"helia_bitswap_ledger_map",metrics:r.metrics}),this.network.addEventListener("bitswap:message",_=>{this.receiveMessage(_.detail.peer,_.detail.message).catch(x=>{this.log.error("error receiving bitswap message from %p",_.detail.peer,x)})}),this.network.addEventListener("peer:disconnected",_=>{this.peerDisconnected(_.detail)})}ledgerForPeer(r){const g=this.ledgerMap.get(r);if(g!=null)return{peer:g.peerId,value:g.debtRatio(),sent:g.bytesSent,received:g.bytesReceived,exchanged:g.exchangeCount}}wantListForPeer(r){const g=this.ledgerMap.get(r);if(g!=null)return[...g.wants.values()]}peers(){return Array.from(this.ledgerMap.values()).map(r=>r.peerId)}async receiveMessage(r,g){let _=this.ledgerMap.get(r);if(_==null&&(_=new Ledger({peerId:r,blockstore:this.blockstore,network:this.network,logger:this.logger},{maxSizeReplaceHasWithBlock:this.maxSizeReplaceHasWithBlock}),this.ledgerMap.set(r,_)),_.receivedBytes(g.blocks?.reduce((x,S)=>x+S.data.byteLength,0)??0),g.wantlist!=null){g.wantlist.full===!0&&_.wants.clear();for(const x of g.wantlist.entries){const S=CID$1.decode(x.cid),E=toString$3(S.multihash.bytes,"base64");x.cancel===!0?(this.log("peer %p cancelled want of block for %c",r,S),_.wants.delete(E)):(x.wantType===WantType.WantHave?this.log("peer %p wanted block presence for %c",r,S):this.log("peer %p wanted block for %c",r,S),_.wants.set(E,{cid:S,priority:x.priority,wantType:x.wantType??WantType.WantBlock,sendDontHave:x.sendDontHave??!1}))}}this.log("send blocks to peer"),await _.sendBlocksToPeer()}async receivedBlock(r,g){const _=toString$3(r.multihash.bytes,"base64"),x=[];for(const S of this.ledgerMap.values())S.wants.has(_)&&x.push(S);await Promise.all(x.map(async S=>S.sendBlocksToPeer(g)))}peerDisconnected(r){this.ledgerMap.delete(r)}}function getTypes(n){const r=[RecordType.A];return n==null?r:Array.isArray(n)?n.length===0?r:n:[n]}const DEFAULT_TTL=60;function toDNSResponse(n){return{Status:n.Status??0,TC:n.TC??n.flag_tc??!1,RD:n.RD??n.flag_rd??!1,RA:n.RA??n.flag_ra??!1,AD:n.AD??n.flag_ad??!1,CD:n.CD??n.flag_cd??!1,Question:(n.Question??n.questions??[]).map(r=>({name:r.name,type:RecordType[r.type]})),Answer:(n.Answer??n.answers??[]).map(r=>({name:r.name,type:RecordType[r.type],TTL:r.TTL??r.ttl??DEFAULT_TTL,data:r.data instanceof Uint8Array?toString$3(r.data):r.data}))}}const DEFAULT_QUERY_CONCURRENCY=4;function dnsJsonOverHttps(n,r={}){const g=new PQueue({concurrency:r.queryConcurrency??DEFAULT_QUERY_CONCURRENCY});return async(_,x={})=>{const S=new URLSearchParams;S.set("name",_),getTypes(x.types).forEach(C=>{S.append("type",RecordType[C])}),x.onProgress?.(new CustomProgressEvent("dns:query",{detail:_}));const E=await g.add(async()=>{const C=await fetch(`${n}?${S}`,{headers:{accept:"application/dns-json"},signal:x?.signal});if(C.status!==200)throw new Error(`Unexpected HTTP status: ${C.status} - ${C.statusText}`);const T=toDNSResponse(await C.json());return x.onProgress?.(new CustomProgressEvent("dns:response",{detail:T})),T},{signal:x.signal});if(E==null)throw new Error("No DNS response received");return E}}function defaultResolver(){return[dnsJsonOverHttps("https://cloudflare-dns.com/dns-query"),dnsJsonOverHttps("https://dns.google/resolve")]}var hashlru$1,hasRequiredHashlru;function requireHashlru(){return hasRequiredHashlru||(hasRequiredHashlru=1,hashlru$1=function(n){if(!n)throw Error("hashlru must have a max value, of type number, greater than 0");var r=0,g=Object.create(null),_=Object.create(null);function x(S,E){g[S]=E,r++,r>=n&&(r=0,_=g,g=Object.create(null))}return{has:function(S){return g[S]!==void 0||_[S]!==void 0},remove:function(S){g[S]!==void 0&&(g[S]=void 0),_[S]!==void 0&&(_[S]=void 0)},get:function(S){var E=g[S];if(E!==void 0)return E;if((E=_[S])!==void 0)return x(S,E),E},set:function(S,E){g[S]!==void 0?g[S]=E:x(S,E)},clear:function(){g=Object.create(null),_=Object.create(null)}}}),hashlru$1}var hashlruExports=requireHashlru();const hashlru=getDefaultExportFromCjs(hashlruExports);class CachedAnswers{lru;constructor(r){this.lru=hashlru(r)}get(r,g){let _=!0;const x=[];for(const S of g){const E=this.getAnswers(r,S);if(E.length===0){_=!1;break}x.push(...E)}if(_)return toDNSResponse({answers:x})}getAnswers(r,g){const _=`${r.toLowerCase()}-${g}`,x=this.lru.get(_);if(x!=null){const S=x.filter(E=>E.expires>Date.now()).map(({expires:E,value:C})=>({...C,TTL:Math.round((E-Date.now())/1e3),type:RecordType[C.type]}));return S.length===0&&this.lru.remove(_),S}return[]}add(r,g){const _=`${r.toLowerCase()}-${g.type}`,x=this.lru.get(_)??[];x.push({expires:Date.now()+(g.TTL??DEFAULT_TTL)*1e3,value:g}),this.lru.set(_,x)}remove(r,g){const _=`${r.toLowerCase()}-${g}`;this.lru.remove(_)}clear(){this.lru.clear()}}function cache(n){return new CachedAnswers(n)}const DEFAULT_ANSWER_CACHE_SIZE=1e3;let DNS$2=class{resolvers;cache;constructor(r){this.resolvers={},this.cache=cache(r.cacheSize??DEFAULT_ANSWER_CACHE_SIZE),Object.entries(r.resolvers??{}).forEach(([g,_])=>{Array.isArray(_)||(_=[_]),g.endsWith(".")||(g=`${g}.`),this.resolvers[g]=_}),this.resolvers["."]==null&&(this.resolvers["."]=defaultResolver())}async query(r,g={}){const _=getTypes(g.types),x=g.cached!==!1?this.cache.get(r,_):void 0;if(x!=null)return g.onProgress?.(new CustomProgressEvent("dns:cache",{detail:x})),x;const S=`${r.split(".").pop()}.`,E=(this.resolvers[S]??this.resolvers["."]).sort(()=>Math.random()>.5?-1:1),C=[];for(const T of E){if(g.signal?.aborted===!0)break;try{const R=await T(r,{...g,types:_});for(const A of R.Answer)this.cache.add(r,A);return R}catch(R){C.push(R),g.onProgress?.(new CustomProgressEvent("dns:error",{detail:R}))}}throw C.length===1?C[0]:new AggregateError(C,`DNS lookup of ${r} ${_} failed`)}};var RecordType;(function(n){n[n.A=1]="A",n[n.CNAME=5]="CNAME",n[n.TXT=16]="TXT",n[n.AAAA=28]="AAAA"})(RecordType||(RecordType={}));function dns(n={}){return new DNS$2(n)}const pathSepS="/",pathSepB=new TextEncoder().encode(pathSepS),pathSep=pathSepB[0];class Key{_buf;constructor(r,g){if(typeof r=="string")this._buf=fromString(r);else if(r instanceof Uint8Array)this._buf=r;else throw new Error("Invalid key, should be String of Uint8Array");if(g==null&&(g=!0),g&&this.clean(),this._buf.byteLength===0||this._buf[0]!==pathSep)throw new Error("Invalid key")}toString(r="utf8"){return toString$3(this._buf,r)}uint8Array(){return this._buf}get[Symbol.toStringTag](){return`Key(${this.toString()})`}static withNamespaces(r){return new Key(r.join(pathSepS))}static random(){return new Key(Math.random().toString().substring(2))}static asKey(r){return r instanceof Uint8Array||typeof r=="string"?new Key(r):typeof r.uint8Array=="function"?new Key(r.uint8Array()):null}clean(){if((this._buf==null||this._buf.byteLength===0)&&(this._buf=pathSepB),this._buf[0]!==pathSep){const r=new Uint8Array(this._buf.byteLength+1);r.fill(pathSep,0,1),r.set(this._buf,1),this._buf=r}for(;this._buf.byteLength>1&&this._buf[this._buf.byteLength-1]===pathSep;)this._buf=this._buf.subarray(0,-1)}less(r){const g=this.list(),_=r.list();for(let x=0;x<g.length;x++){if(_.length<x+1)return!1;const S=g[x],E=_[x];if(S<E)return!0;if(S>E)return!1}return g.length<_.length}reverse(){return Key.withNamespaces(this.list().slice().reverse())}namespaces(){return this.list()}baseNamespace(){const r=this.namespaces();return r[r.length-1]}list(){return this.toString().split(pathSepS).slice(1)}type(){return namespaceType(this.baseNamespace())}name(){return namespaceValue(this.baseNamespace())}instance(r){return new Key(this.toString()+":"+r)}path(){let r=this.parent().toString();return r.endsWith(pathSepS)||(r+=pathSepS),r+=this.type(),new Key(r)}parent(){const r=this.list();return r.length===1?new Key(pathSepS):new Key(r.slice(0,-1).join(pathSepS))}child(r){return this.toString()===pathSepS?r:r.toString()===pathSepS?this:new Key(this.toString()+r.toString(),!1)}isAncestorOf(r){return r.toString()===this.toString()?!1:r.toString().startsWith(this.toString())}isDecendantOf(r){return r.toString()===this.toString()?!1:this.toString().startsWith(r.toString())}isTopLevel(){return this.list().length===1}concat(...r){return Key.withNamespaces([...this.namespaces(),...flatten(r.map(g=>g.namespaces()))])}}function namespaceType(n){const r=n.split(":");return r.length<2?"":r.slice(0,-1).join(":")}function namespaceValue(n){const r=n.split(":");return r[r.length-1]}function flatten(n){return[].concat(...n)}const DATASTORE_PIN_PREFIX="/pin/",DATASTORE_BLOCK_PREFIX="/pinned-block/",DATASTORE_ENCODING=base36$1,DAG_WALK_QUEUE_CONCURRENCY=1;function toDSKey(n){return n.version===0&&(n=n.toV1()),new Key(`${DATASTORE_PIN_PREFIX}${n.toString(DATASTORE_ENCODING)}`)}class PinsImpl{datastore;blockstore;getCodec;constructor(r,g,_){this.datastore=r,this.blockstore=g,this.getCodec=_}async*add(r,g={}){const _=toDSKey(r);if(await this.datastore.has(_))throw new Error("Already pinned");const x=Math.round(g.depth??1/0);if(x<0)throw new Error("Depth must be greater than or equal to 0");const S=new Queue({concurrency:DAG_WALK_QUEUE_CONCURRENCY});for await(const C of this.#e(r,S,{...g,depth:x}))await this.#t(C,T=>T.pinnedBy.find(R=>equals$1(R,r.bytes))!=null?!1:(T.pinCount++,T.pinnedBy.push(r.bytes),!0),g),yield C;const E={depth:x,metadata:g.metadata??{}};await this.datastore.put(_,encode$l(E),g)}async*#e(r,g,_){if(_.depth===-1)return;const x=await this.getCodec(r.code),S=await this.blockstore.get(r,_),E=createUnsafe({bytes:S,cid:r,codec:x});yield r;for await(const[,C]of E.links())yield*await g.add(async()=>this.#e(C,g,{..._,depth:_.depth-1}))}async#t(r,g,_){const x=new Key(`${DATASTORE_BLOCK_PREFIX}${DATASTORE_ENCODING.encode(r.multihash.bytes)}`);let S={pinCount:0,pinnedBy:[]};try{S=decode$l(await this.datastore.get(x,_))}catch(C){if(C.name!=="NotFoundError")throw C}if(g(S)){if(S.pinCount===0&&await this.datastore.has(x)){await this.datastore.delete(x);return}await this.datastore.put(x,encode$l(S),_),_.onProgress?.(new CustomProgressEvent("helia:pin:add",r))}}async*rm(r,g={}){const _=toDSKey(r),x=await this.datastore.get(_,g),S=decode$l(x);await this.datastore.delete(_,g);const E=new Queue({concurrency:DAG_WALK_QUEUE_CONCURRENCY});for await(const C of this.#e(r,E,{...g,depth:S.depth}))await this.#t(C,T=>(T.pinCount--,T.pinnedBy=T.pinnedBy.filter(R=>equals$1(R,r.bytes)),!0),{...g,depth:S.depth}),yield C}async*ls(r={}){for await(const{key:g,value:_}of this.datastore.query({prefix:DATASTORE_PIN_PREFIX+(r.cid!=null?`${r.cid.toString(base36$1)}`:"")},r)){const x=CID$1.parse(g.toString().substring(5),base36$1),S=decode$l(_);yield{cid:x,...S}}}async isPinned(r,g={}){const _=new Key(`${DATASTORE_BLOCK_PREFIX}${DATASTORE_ENCODING.encode(r.multihash.bytes)}`);return this.datastore.has(_,g)}async get(r,g){const _=toDSKey(r),x=await this.datastore.get(_,g);return decode$l(x)}async setMetadata(r,g,_){const x=toDSKey(r),S=await this.datastore.get(x,_),E=decode$l(S);E.metadata=g??{},await this.datastore.put(x,encode$l(E),_)}}const DEFAULT_SESSION_MIN_PROVIDERS=1,DEFAULT_SESSION_MAX_PROVIDERS=5;class InsufficientProvidersError extends Error{static name="InsufficientProvidersError";constructor(r="Insufficient providers found"){super(r),this.name="InsufficientProvidersError"}}class NoRoutersAvailableError extends Error{static name="NoRoutersAvailableError";constructor(r="No routers available"){super(r),this.name="NoRoutersAvailableError"}}class UnknownHashAlgorithmError extends Error{static name="UnknownHashAlgorithmError";constructor(r="Unknown hash algorithm"){super(r),this.name="UnknownHashAlgorithmError"}}class UnknownCodecError extends Error{static name="UnknownCodecError";constructor(r="Unknown codec"){super(r),this.name="UnknownCodecError"}}const DEFAULT_PROVIDER_LOOKUP_CONCURRENCY=5;class Routing{log;routers;providerLookupConcurrency;constructor(r,g){this.log=r.logger.forComponent("helia:routing"),this.routers=g.routers??[],this.providerLookupConcurrency=g.providerLookupConcurrency??DEFAULT_PROVIDER_LOOKUP_CONCURRENCY}async start(){await start(...this.routers)}async stop(){await stop(...this.routers)}async*findProviders(r,g={}){if(this.routers.length===0)throw new NoRoutersAvailableError("No content routers available");const _=new PeerQueue({concurrency:this.providerLookupConcurrency});_.addEventListener("error",()=>{});for await(const x of merge$2(_.toGenerator(),...supports(this.routers,"findProviders").map(S=>S.findProviders(r,g))))if(x!=null){if(x.multiaddrs.length===0){if(_.find(x.id)!=null)continue;_.add(async()=>{try{const S=await this.findPeer(x.id,g);return S.multiaddrs.length===0?null:S}catch(S){return this.log.error("could not load multiaddrs for peer %p",x.id,S),null}},{peerId:x.id,signal:g.signal}).catch(S=>{this.log.error("could not load multiaddrs for peer %p",x.id,S)})}yield x}}async provide(r,g={}){if(this.routers.length===0)throw new NoRoutersAvailableError("No content routers available");await Promise.all(supports(this.routers,"provide").map(async _=>{await _.provide(r,g)}))}async cancelReprovide(r,g={}){await Promise.all(supports(this.routers,"cancelReprovide").map(async _=>{await _.cancelReprovide(r,g)}))}async put(r,g,_){await Promise.all(supports(this.routers,"put").map(async x=>{await x.put(r,g,_)}))}async get(r,g){return Promise.any(supports(this.routers,"get").map(async _=>_.get(r,g)))}async findPeer(r,g){if(this.routers.length===0)throw new NoRoutersAvailableError("No peer routers available");const _=this,x=merge$2(...supports(this.routers,"findPeer").map(S=>async function*(){try{yield await S.findPeer(r,g)}catch(E){_.log.error(E)}}()));for await(const S of x)if(S!=null)return S;throw new NotFoundError$1("Could not find peer in routing")}async*getClosestPeers(r,g={}){if(this.routers.length===0)throw new NoRoutersAvailableError("No peer routers available");for await(const _ of merge$2(...supports(this.routers,"getClosestPeers").map(x=>x.getClosestPeers(r,g))))_!=null&&(yield _)}}function supports(n,r){return n.filter(g=>g[r]!=null)}const events={},observable=n=>{n.addEventListener("message",r=>{observable.dispatchEvent("message",n,r)}),n.port!=null&&n.port.addEventListener("message",r=>{observable.dispatchEvent("message",n,r)})};observable.addEventListener=(n,r)=>{events[n]==null&&(events[n]=[]),events[n].push(r)};observable.removeEventListener=(n,r)=>{events[n]!=null&&(events[n]=events[n].filter(g=>g===r))};observable.dispatchEvent=function(n,r,g){events[n]!=null&&events[n].forEach(_=>_(r,g))};const WORKER_REQUEST_READ_LOCK="lock:worker:request-read",WORKER_RELEASE_READ_LOCK="lock:worker:release-read",MASTER_GRANT_READ_LOCK="lock:master:grant-read",WORKER_REQUEST_WRITE_LOCK="lock:worker:request-write",WORKER_RELEASE_WRITE_LOCK="lock:worker:release-write",MASTER_GRANT_WRITE_LOCK="lock:master:grant-write",nanoid$1=(n=21)=>Math.random().toString().substring(2),handleWorkerLockRequest=(n,r,g,_,x)=>(S,E)=>{if(E.data.type!==g)return;const C={type:E.data.type,name:E.data.name,identifier:E.data.identifier};n.dispatchEvent(new MessageEvent(r,{data:{name:C.name,handler:async()=>{S.postMessage({type:x,name:C.name,identifier:C.identifier}),await new Promise(T=>{const R=A=>{if(A?.data==null)return;const I={type:A.data.type,name:A.data.name,identifier:A.data.identifier};I.type===_&&I.identifier===C.identifier&&(S.removeEventListener("message",R),T())};S.addEventListener("message",R)})}}}))},makeWorkerLockRequest=(n,r,g,_)=>async()=>{const x=nanoid$1();return globalThis.postMessage({type:r,identifier:x,name:n}),new Promise(S=>{const E=C=>{if(C?.data==null)return;const T={type:C.data.type,identifier:C.data.identifier};T.type===g&&T.identifier===x&&(globalThis.removeEventListener("message",E),S(()=>{globalThis.postMessage({type:_,identifier:x,name:n})}))};globalThis.addEventListener("message",E)})},defaultOptions$5={singleProcess:!1},impl=n=>{if(n=Object.assign({},defaultOptions$5,n),!!globalThis.document||n.singleProcess){const g=new EventTarget;return observable.addEventListener("message",handleWorkerLockRequest(g,"requestReadLock",WORKER_REQUEST_READ_LOCK,WORKER_RELEASE_READ_LOCK,MASTER_GRANT_READ_LOCK)),observable.addEventListener("message",handleWorkerLockRequest(g,"requestWriteLock",WORKER_REQUEST_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK)),g}return{isWorker:!0,readLock:g=>makeWorkerLockRequest(g,WORKER_REQUEST_READ_LOCK,MASTER_GRANT_READ_LOCK,WORKER_RELEASE_READ_LOCK),writeLock:g=>makeWorkerLockRequest(g,WORKER_REQUEST_WRITE_LOCK,MASTER_GRANT_WRITE_LOCK,WORKER_RELEASE_WRITE_LOCK)}},mutexes={};let implementation;async function createReleaseable(n,r){let g;const _=new Promise(x=>{g=x});return n.add(async()=>pTimeout((async()=>{await new Promise(x=>{g(()=>{x()})})})(),{milliseconds:r.timeout})),_}const createMutex=(n,r)=>{if(implementation.isWorker===!0)return{readLock:implementation.readLock(n,r),writeLock:implementation.writeLock(n,r)};const g=new PQueue({concurrency:1});let _;return{async readLock(){if(_!=null)return createReleaseable(_,r);_=new PQueue({concurrency:r.concurrency,autoStart:!1});const x=_,S=createReleaseable(_,r);return g.add(async()=>{x.start(),await x.onIdle().then(()=>{_===x&&(_=null)})}),S},async writeLock(){return _=null,createReleaseable(g,r)}}},defaultOptions$4={name:"lock",concurrency:1/0,timeout:846e5,singleProcess:!1};function createMortice(n){const r=Object.assign({},defaultOptions$4,n);return implementation==null&&(implementation=impl(r),implementation.isWorker!==!0&&(implementation.addEventListener("requestReadLock",g=>{mutexes[g.data.name]!=null&&mutexes[g.data.name].readLock().then(async _=>g.data.handler().finally(()=>{_()}))}),implementation.addEventListener("requestWriteLock",async g=>{mutexes[g.data.name]!=null&&mutexes[g.data.name].writeLock().then(async _=>g.data.handler().finally(()=>{_()}))}))),mutexes[r.name]==null&&(mutexes[r.name]=createMutex(r.name,r)),mutexes[r.name]}class BlockStorage{lock;child;pins;started;constructor(r,g,_={}){this.child=r,this.pins=g,this.lock=createMortice({singleProcess:_.holdGcLock}),this.started=!1}isStarted(){return this.started}async start(){await start(this.child),this.started=!0}async stop(){await stop(this.child),this.started=!1}unwrap(){return this.child}async put(r,g,_={}){_?.signal?.throwIfAborted();const x=await this.lock.readLock();try{return await this.child.put(r,g,_)}finally{x()}}async*putMany(r,g={}){g?.signal?.throwIfAborted();const _=await this.lock.readLock();try{yield*this.child.putMany(r,g)}finally{_()}}async get(r,g={}){g?.signal?.throwIfAborted();const _=await this.lock.readLock();try{return await this.child.get(r,g)}finally{_()}}async*getMany(r,g={}){g?.signal?.throwIfAborted();const _=await this.lock.readLock();try{yield*this.child.getMany(r,g)}finally{_()}}async delete(r,g={}){g?.signal?.throwIfAborted();const _=await this.lock.writeLock();try{if(await this.pins.isPinned(r))throw new Error("CID was pinned");await this.child.delete(r,g)}finally{_()}}async*deleteMany(r,g={}){g?.signal?.throwIfAborted();const _=await this.lock.writeLock();try{const x=this;yield*this.child.deleteMany(async function*(){for await(const S of r){if(await x.pins.isPinned(S))throw new Error("CID was pinned");yield S}}(),g)}finally{_()}}async has(r,g={}){g?.signal?.throwIfAborted();const _=await this.lock.readLock();try{return await this.child.has(r,g)}finally{_()}}async*getAll(r={}){r?.signal?.throwIfAborted();const g=await this.lock.readLock();try{yield*this.child.getAll(r)}finally{g()}}createSession(r,g){return g?.signal?.throwIfAborted(),this.child.createSession(r,g)}}const DS_VERSION_KEY=new Key("/version"),CURRENT_VERSION=1;async function assertDatastoreVersionIsCurrent(n){if(!await n.has(DS_VERSION_KEY)){await n.put(DS_VERSION_KEY,fromString(`${CURRENT_VERSION}`));return}const r=await n.get(DS_VERSION_KEY),g=toString$3(r);if(parseInt(g,10)!==CURRENT_VERSION)throw new Error("Unknown datastore version, a datastore migration may be required")}function isPromise$4(n){return n?.then!=null}function getCodec(n=[],r){const g={[code$2]:dagPb,[code$6]:raw,[code$9]:dagCbor,[code$1]:dagJson,[code$7]:json};return n.forEach(_=>{g[_.code]=_}),async _=>{let x=g[_];if(x==null&&r!=null){const S=r(_);isPromise$4(S)?x=await S:x=S,g[x.code]=x}if(x!=null)return x;throw new UnknownCodecError(`Could not load codec for ${_}`)}}function getHasher(n=[],r){const g={[sha256$8.code]:sha256$8,[sha512$3.code]:sha512$3,[identity$1.code]:identity$1};return n.forEach(_=>{g[_.code]=_}),async _=>{let x=g[_];if(x==null&&r!=null){const S=r(_);isPromise$4(S)?x=await S:x=S,g[x.code]=x}if(x!=null)return x;throw new UnknownHashAlgorithmError(`No hasher configured for multihash code 0x${_.toString(16)}, please configure one. You can look up which hash this is at https://github.com/multiformats/multicodec/blob/master/table.csv`)}}class OpenFailedError extends Error{static name="OpenFailedError";static code="ERR_OPEN_FAILED";name=OpenFailedError.name;code=OpenFailedError.code;constructor(r="Open failed"){super(r)}}class PutFailedError extends Error{static name="PutFailedError";static code="ERR_PUT_FAILED";name=PutFailedError.name;code=PutFailedError.code;constructor(r="Put failed"){super(r)}}class GetFailedError extends Error{static name="GetFailedError";static code="ERR_GET_FAILED";name=GetFailedError.name;code=GetFailedError.code;constructor(r="Get failed"){super(r)}}class DeleteFailedError extends Error{static name="DeleteFailedError";static code="ERR_DELETE_FAILED";name=DeleteFailedError.name;code=DeleteFailedError.code;constructor(r="Delete failed"){super(r)}}class NotFoundError extends Error{static name="NotFoundError";static code="ERR_NOT_FOUND";name=NotFoundError.name;code=NotFoundError.code;constructor(r="Not Found"){super(r)}}class BaseBlockstore{has(r,g){return Promise.reject(new Error(".has is not implemented"))}put(r,g,_){return Promise.reject(new Error(".put is not implemented"))}async*putMany(r,g){for await(const{cid:_,block:x}of r)await this.put(_,x,g),yield _}get(r,g){return Promise.reject(new Error(".get is not implemented"))}async*getMany(r,g){for await(const _ of r)yield{cid:_,block:await this.get(_,g)}}delete(r,g){return Promise.reject(new Error(".delete is not implemented"))}async*deleteMany(r,g){for await(const _ of r)await this.delete(_,g),yield _}async*getAll(r){throw new Error(".getAll is not implemented")}}const IDENTITY_CODEC$1=0;class IdentityBlockstore extends BaseBlockstore{child;constructor(r){super(),this.child=r}put(r,g){return r.multihash.code===IDENTITY_CODEC$1||this.child==null?r:this.child.put(r,g)}get(r){if(r.multihash.code===IDENTITY_CODEC$1)return r.multihash.digest;if(this.child==null)throw new NotFoundError;return this.child.get(r)}has(r){return r.multihash.code===IDENTITY_CODEC$1?!0:this.child==null?!1:this.child.has(r)}delete(r){if(r.code!==IDENTITY_CODEC$1&&this.child!=null)return this.child.delete(r)}getAll(r){return this.child!=null?this.child.getAll(r):[]}}function isAsyncIterable$2(n){return n[Symbol.asyncIterator]!=null}function isPromise$3(n){return n?.then!=null}function forEach(n,r){let g=0;if(isAsyncIterable$2(n))return async function*(){for await(const T of n){const R=r(T,g++);isPromise$3(R)&&await R,yield T}}();const _=peekable(n),{value:x,done:S}=_.next();if(S===!0)return function*(){}();if(typeof r(x,g++)?.then=="function")return async function*(){yield x;for await(const T of _){const R=r(T,g++);isPromise$3(R)&&await R,yield T}}();const C=r;return function*(){yield x;for(const T of _)C(T,g++),yield T}()}class Storage{child;getHasher;log;logger;components;constructor(r){this.log=r.logger.forComponent("helia:networked-storage"),this.logger=r.logger,this.components=r,this.child=new IdentityBlockstore(r.blockstore),this.getHasher=r.getHasher}async put(r,g,_={}){return await this.child.has(r,_)?(_.onProgress?.(new CustomProgressEvent("blocks:put:duplicate",r)),r):(_.onProgress?.(new CustomProgressEvent("blocks:put:providers:notify",r)),await Promise.all(this.components.blockBrokers.map(async x=>x.announce?.(r,g,_))),_.onProgress?.(new CustomProgressEvent("blocks:put:blockstore:put",r)),this.child.put(r,g,_))}async*putMany(r,g={}){const _=filter(r,async({cid:S})=>{const E=await this.child.has(S,g);return E&&g.onProgress?.(new CustomProgressEvent("blocks:put-many:duplicate",S)),!E}),x=forEach(_,async({cid:S,block:E})=>{g.onProgress?.(new CustomProgressEvent("blocks:put-many:providers:notify",S)),await Promise.all(this.components.blockBrokers.map(async C=>C.announce?.(S,E,g)))});g.onProgress?.(new CustomProgressEvent("blocks:put-many:blockstore:put-many")),yield*this.child.putMany(x,g)}async get(r,g={}){if(g.offline!==!0&&!await this.child.has(r,g)){const _=await this.getHasher(r.multihash.code);g.onProgress?.(new CustomProgressEvent("blocks:get:providers:get",r));const x=await raceBlockRetrievers(r,this.components.blockBrokers,_,{...g,log:this.log});return g.onProgress?.(new CustomProgressEvent("blocks:get:blockstore:put",r)),await this.child.put(r,x,g),g.onProgress?.(new CustomProgressEvent("blocks:get:providers:notify",r)),await Promise.all(this.components.blockBrokers.map(async S=>S.announce?.(r,x,g))),x}return g.onProgress?.(new CustomProgressEvent("blocks:get:blockstore:get",r)),this.child.get(r,g)}async*getMany(r,g={}){g.onProgress?.(new CustomProgressEvent("blocks:get-many:blockstore:get-many")),yield*this.child.getMany(forEach(r,async _=>{if(g.offline!==!0&&!await this.child.has(_,g)){const x=await this.getHasher(_.multihash.code);g.onProgress?.(new CustomProgressEvent("blocks:get-many:providers:get",_));const S=await raceBlockRetrievers(_,this.components.blockBrokers,x,{...g,log:this.log});g.onProgress?.(new CustomProgressEvent("blocks:get-many:blockstore:put",_)),await this.child.put(_,S,g),g.onProgress?.(new CustomProgressEvent("blocks:get-many:providers:notify",_)),await Promise.all(this.components.blockBrokers.map(async E=>E.announce?.(_,S,g)))}}))}async delete(r,g={}){g.onProgress?.(new CustomProgressEvent("blocks:delete:blockstore:delete",r)),await this.child.delete(r,g)}async*deleteMany(r,g={}){g.onProgress?.(new CustomProgressEvent("blocks:delete-many:blockstore:delete-many")),yield*this.child.deleteMany(async function*(){for await(const _ of r)yield _}(),g)}async has(r,g={}){return this.child.has(r,g)}async*getAll(r={}){r.onProgress?.(new CustomProgressEvent("blocks:get-all:blockstore:get-many")),yield*this.child.getAll(r)}}class NetworkedStorage extends Storage{started;constructor(r){super(r),this.started=!1}isStarted(){return this.started}async start(){await start(this.child,...this.components.blockBrokers),this.started=!0}async stop(){await stop(this.child,...this.components.blockBrokers),this.started=!1}unwrap(){return this.child}createSession(r,g){const _=this.components.blockBrokers.map(x=>x.createSession==null?x:x.createSession(g));return new SessionStorage({blockstore:this.child,blockBrokers:_,getHasher:this.getHasher,logger:this.logger},{root:r})}}class SessionStorage extends Storage{closeController;constructor(r,g){super(r),this.closeController=new AbortController,setMaxListeners(1/0,this.closeController.signal),this.log=r.logger.forComponent(`helia:session-storage:${g.root}`)}close(){this.closeController.abort()}async put(r,g,_={}){const x=anySignal([this.closeController.signal,_.signal]);setMaxListeners(1/0,x);try{return await super.put(r,g,{..._,signal:x})}finally{x.clear()}}async*putMany(r,g={}){const _=anySignal([this.closeController.signal,g.signal]);setMaxListeners(1/0,_);try{yield*super.putMany(r,{...g,signal:_})}finally{_.clear()}}async get(r,g={}){const _=anySignal([this.closeController.signal,g.signal]);setMaxListeners(1/0,_);try{return await super.get(r,{...g,signal:_})}finally{_.clear()}}async*getMany(r,g={}){const _=anySignal([this.closeController.signal,g.signal]);setMaxListeners(1/0,_);try{yield*super.getMany(r,{...g,signal:_})}finally{_.clear()}}async delete(r,g={}){const _=anySignal([this.closeController.signal,g.signal]);setMaxListeners(1/0,_);try{await super.delete(r,{...g,signal:_})}finally{_.clear()}}async*deleteMany(r,g={}){const _=anySignal([this.closeController.signal,g.signal]);setMaxListeners(1/0,_);try{yield*super.deleteMany(r,{...g,signal:_})}finally{_.clear()}}async has(r,g={}){const _=anySignal([this.closeController.signal,g.signal]);setMaxListeners(1/0,_);try{return await super.has(r,{...g,signal:_})}finally{_.clear()}}async*getAll(r={}){const g=anySignal([this.closeController.signal,r.signal]);setMaxListeners(1/0,g);try{yield*super.getAll({...r,signal:g})}finally{g.clear()}}}function isRetrievingBlockBroker(n){return typeof n.retrieve=="function"}const getCidBlockVerifierFunction=(n,r)=>{if(r==null)throw new InvalidParametersError(`No hasher configured for multihash code 0x${n.multihash.code.toString(16)}, please configure one. You can look up which hash this is at https://github.com/multiformats/multicodec/blob/master/table.csv`);return async g=>{let _;const x=r.digest(g);if(isPromise$4(x)?_=await x:_=x,!equals$1(_.digest,n.multihash.digest))throw new InvalidMultihashError("Hash of downloaded block did not match multihash from passed CID")}};async function raceBlockRetrievers(n,r,g,_){const x=getCidBlockVerifierFunction(n,g),S=new AbortController,E=anySignal([S.signal,_.signal]);setMaxListeners(1/0,S.signal,E);const C=[];for(const T of r)isRetrievingBlockBroker(T)&&C.push(T);try{return await Promise.any(C.map(async T=>{try{let R=!1;const A=await T.retrieve(n,{..._,signal:E,validateFn:async I=>{await x(I),R=!0}});return R||await x(A),A}catch(R){throw _.log.error("could not retrieve verified block for %c",n,R),R}}))}finally{S.abort(),E.clear()}}class AbstractSession extends TypedEventEmitter{intialPeerSearchComplete;requests;name;log;logger;minProviders;maxProviders;providers;evictionFilter;constructor(r,g){super(),setMaxListeners(1/0,this),this.name=g.name,this.logger=r.logger,this.log=r.logger.forComponent(this.name),this.requests=new Map,this.minProviders=g.minProviders??DEFAULT_SESSION_MIN_PROVIDERS,this.maxProviders=g.maxProviders??DEFAULT_SESSION_MAX_PROVIDERS,this.providers=[],this.evictionFilter=createScalableCuckooFilter(this.maxProviders)}async retrieve(r,g={}){const _=base64.encode(r.multihash.bytes),x=this.requests.get(_);if(x!=null)return this.log("join existing request for %c",r),x;const S=pDefer();if(this.requests.set(_,S.promise),this.providers.length===0){let R=!1;this.intialPeerSearchComplete==null&&(R=!0,this.log=this.logger.forComponent(`${this.name}:${r}`),this.intialPeerSearchComplete=this.findProviders(r,this.minProviders,g)),await this.intialPeerSearchComplete,R&&this.log("found initial session peers for %c",r)}let E=!1;const C=new Queue({concurrency:this.maxProviders});C.addEventListener("error",()=>{}),C.addEventListener("failure",R=>{this.log.error("error querying provider %o, evicting from session",R.detail.job.options.provider,R.detail.error),this.evict(R.detail.job.options.provider)}),C.addEventListener("success",R=>{E=!0,S.resolve(R.detail.result)}),C.addEventListener("idle",()=>{E||g.signal?.aborted===!0||Promise.resolve().then(async()=>{this.log("no session peers had block for for %c, finding new providers",r);for(let R=0;R<this.minProviders&&this.providers.length!==0;R++){const A=this.providers[Math.floor(Math.random()*this.providers.length)];this.evict(A)}await this.findProviders(r,this.minProviders,g),this.log("found new providers re-retrieving %c",r),this.requests.delete(_),S.resolve(await this.retrieve(r,g))}).catch(R=>{this.log.error("could not find new providers for %c",r,R),S.reject(R)})});const T=R=>{C.add(async()=>this.queryProvider(r,R.detail,g),{provider:R.detail}).catch(A=>{g.signal?.aborted!==!0&&this.log.error("error retrieving session block for %c",r,A)})};this.addEventListener("provider",T),Promise.all([...this.providers].map(async R=>C.add(async()=>this.queryProvider(r,R,g),{provider:R}))).catch(R=>{g.signal?.aborted!==!0&&this.log.error("error retrieving session block for %c",r,R)});try{return await S.promise}finally{this.removeEventListener("provider",T),C.clear(),this.requests.delete(_)}}evict(r){this.evictionFilter.add(this.toEvictionKey(r));const g=this.providers.findIndex(_=>this.equals(_,r));g!==-1&&this.providers.splice(g,1)}isEvicted(r){return this.evictionFilter.has(this.toEvictionKey(r))}hasProvider(r){return!!(this.providers.find(g=>this.equals(g,r))!=null||this.isEvicted(r))}async findProviders(r,g,_){const x=pDefer();let S=0;return Promise.resolve().then(async()=>{this.log("finding %d-%d new provider(s) for %c",g,this.maxProviders,r);for await(const E of this.findNewProviders(r,_)){if(S===this.maxProviders||_.signal?.aborted===!0)break;if(!this.hasProvider(E)&&(this.log("found %d/%d new providers",S,this.maxProviders),this.providers.push(E),this.safeDispatchEvent("provider",{detail:E}),S++,S===g&&(this.log("session is ready"),x.resolve()),this.providers.length===this.maxProviders)){this.log("found max session peers",S);break}}if(this.log("found %d/%d new session peers",S,this.maxProviders),S<g)throw new InsufficientProvidersError(`Found ${S} of ${g} ${this.name} providers for ${r}`)}).catch(E=>{this.log.error("error searching routing for potential session peers for %c",r,E.errors??E),x.reject(E)}),x.promise}}class Helia{blockstore;datastore;pins;logger;routing;getCodec;getHasher;dns;metrics;log;constructor(r){this.logger=r.logger??defaultLogger(),this.log=this.logger.forComponent("helia"),this.getHasher=getHasher(r.hashers,r.loadHasher),this.getCodec=getCodec(r.codecs,r.loadCodec),this.dns=r.dns??dns(),this.metrics=r.metrics;const g={blockstore:r.blockstore,datastore:r.datastore,logger:this.logger,blockBrokers:[],getHasher:this.getHasher,getCodec:this.getCodec,dns:this.dns,metrics:this.metrics,...r.components??{}};this.routing=g.routing=new Routing(g,{routers:(r.routers??[]).flatMap(x=>{const S=[x];return x[contentRoutingSymbol]!=null&&S.push(x[contentRoutingSymbol]),x[peerRoutingSymbol]!=null&&S.push(x[peerRoutingSymbol]),S}),providerLookupConcurrency:r.providerLookupConcurrency});const _=new NetworkedStorage(g);this.pins=new PinsImpl(r.datastore,_,this.getCodec),this.blockstore=new BlockStorage(_,this.pins,{holdGcLock:r.holdGcLock??!0}),this.datastore=r.datastore,g.blockBrokers=r.blockBrokers.map(x=>x(g))}async start(){await assertDatastoreVersionIsCurrent(this.datastore),await start(this.blockstore,this.datastore,this.routing)}async stop(){await stop(this.blockstore,this.datastore,this.routing)}async gc(r={}){const g=await this.blockstore.lock.writeLock();try{const _=this,x=this.blockstore.unwrap();this.log("gc start"),await drain(x.deleteMany(async function*(){for await(const{cid:S}of x.getAll())try{if(await _.pins.isPinned(S,r))continue;yield S,r.onProgress?.(new CustomProgressEvent("helia:gc:deleted",S))}catch(E){_.log.error("Error during gc",E),r.onProgress?.(new CustomProgressEvent("helia:gc:error",E))}}()))}finally{g()}this.log("gc finished")}}class BitswapSession extends AbstractSession{wantList;network;constructor(r,g){super(r,{...g,name:"helia:bitswap:session"}),this.wantList=r.wantList,this.network=r.network}async queryProvider(r,g,_){this.log("sending WANT-BLOCK for %c to %p",r,g);const x=await this.wantList.wantSessionBlock(r,g,_);if(this.log("%p %s %c",g,x.has?"has":"does not have",r),x.has&&x.block!=null)return x.block;throw new Error("Provider did not have block")}async*findNewProviders(r,g={}){for await(const _ of this.network.findProviders(r,g))yield _.id}toEvictionKey(r){return r.toMultihash().bytes}equals(r,g){return r.equals(g)}}function createBitswapSession(n,r){return new BitswapSession(n,r)}class Stats{blocksReceived;duplicateBlocksReceived;dataReceived;duplicateDataReceived;constructor(r){this.blocksReceived=r.metrics?.registerMetricGroup("helia_bitswap_received_blocks"),this.duplicateBlocksReceived=r.metrics?.registerMetricGroup("helia_bitswap_duplicate_received_blocks"),this.dataReceived=r.metrics?.registerMetricGroup("helia_bitswap_data_received_bytes"),this.duplicateDataReceived=r.metrics?.registerMetricGroup("helia_bitswap_duplicate_data_received_bytes")}updateBlocksReceived(r=1,g){const _={global:r};g!=null&&(_[g.toString()]=r),this.blocksReceived?.increment(_)}updateDuplicateBlocksReceived(r=1,g){const _={global:r};g!=null&&(_[g.toString()]=r),this.duplicateBlocksReceived?.increment(_)}updateDataReceived(r,g){const _={global:r};g!=null&&(_[g.toString()]=r),this.dataReceived?.increment(_)}updateDuplicateDataReceived(r,g){const _={global:r};g!=null&&(_[g.toString()]=r),this.duplicateDataReceived?.increment(_)}}class TrackedMap extends Map{metric;constructor(r){super();const{name:g,metrics:_}=r;this.metric=_.registerMetric(g),this.updateComponentMetric()}set(r,g){return super.set(r,g),this.updateComponentMetric(),this}delete(r){const g=super.delete(r);return this.updateComponentMetric(),g}clear(){super.clear(),this.updateComponentMetric()}updateComponentMetric(){this.metric.update(this.size)}}function trackedMap(n){const{name:r,metrics:g}=n;let _;return g!=null?_=new TrackedMap({name:r,metrics:g}):_=new Map,_}function varintDecoder(n){if(!(n instanceof Uint8Array))throw new Error("arg needs to be a Uint8Array");const r=[];for(;n.length>0;){const g=decode$a(n);r.push(g),n=n.slice(encodingLength(g))}return r}class WantList extends TypedEventEmitter{peers;wants;network;log;sendMessagesDelay;sendMessagesTimeout;hashLoader;sendingMessages;constructor(r,g={}){super(),setMaxListeners(1/0,this),this.peers=trackedPeerMap({name:"helia_bitswap_peers",metrics:r.metrics}),this.wants=trackedMap({name:"helia_bitswap_wantlist",metrics:r.metrics}),this.network=r.network,this.sendMessagesDelay=g.sendMessagesDelay??DEFAULT_MESSAGE_SEND_DELAY,this.log=r.logger.forComponent("helia:bitswap:wantlist"),this.hashLoader=g.hashLoader,this.network.addEventListener("bitswap:message",_=>{this.receiveMessage(_.detail.peer,_.detail.message).catch(x=>{this.log.error("error receiving bitswap message from %p",_.detail.peer,x)})}),this.network.addEventListener("peer:connected",_=>{this.peerConnected(_.detail).catch(x=>{this.log.error("error processing newly connected bitswap peer %p",_.detail,x)})}),this.network.addEventListener("peer:disconnected",_=>{this.peerDisconnected(_.detail)})}async addEntry(r,g){const _=toString$3(r.multihash.bytes,"base64");let x=this.wants.get(_);x==null&&(x={cid:r,priority:g.priority??1,wantType:g.wantType??WantType.WantBlock,cancel:!1,sendDontHave:!0},this.wants.set(_,x)),x.wantType===WantType.WantHave&&g.wantType===WantType.WantBlock&&(x.wantType=WantType.WantBlock),await this.sendMessagesDebounced();try{return g.wantType===WantType.WantBlock?(await raceEvent(this,"block",g?.signal,{filter:C=>equals$1(r.multihash.digest,C.detail.cid.multihash.digest),errorMessage:"Want was aborted"})).detail:(await raceEvent(this,"presence",g?.signal,{filter:E=>equals$1(r.multihash.digest,E.detail.cid.multihash.digest),errorMessage:"Want was aborted"})).detail}finally{g.signal?.aborted===!0&&(this.log("want for %c was aborted, cancelling want",r),x.cancel=!0,await this.sendMessagesDebounced())}}async sendMessagesDebounced(){await this.sendingMessages?.promise,clearTimeout(this.sendMessagesTimeout),this.sendMessagesTimeout=setTimeout(()=>{this.sendMessages().catch(r=>{this.log("error sending messages to peers",r)})},this.sendMessagesDelay)}async sendMessages(){this.sendingMessages=pDefer(),await Promise.all([...this.peers.entries()].map(async([r,g])=>{const _=new Set,x=new QueuedBitswapMessage;for(const[S,E]of this.wants.entries())g.has(S)||E.cancel||(_.add(S),x.addWantlistEntry(E.cid,{cid:E.cid.bytes,priority:E.priority,wantType:E.wantType,cancel:E.cancel,sendDontHave:E.sendDontHave}));if(x.wantlist.size!==0)try{await this.network.sendMessage(r,x);for(const S of _)g.add(S)}catch(S){this.log.error("error sending full wantlist to new peer",S)}})).catch(r=>{this.log.error("error sending messages",r)});for(const[r,g]of this.wants)if(g.cancel){this.wants.delete(r);for(const _ of this.peers.values())_.delete(r)}this.sendingMessages.resolve()}has(r){const g=toString$3(r.multihash.bytes,"base64");return this.wants.has(g)}async wantSessionPresence(r,g,_={}){const x=new QueuedBitswapMessage;return x.addWantlistEntry(r,{cid:r.bytes,sendDontHave:!0,wantType:WantType.WantHave,priority:1}),await this.network.sendMessage(g,x),(await raceEvent(this,"presence",_.signal,{filter:E=>g.equals(E.detail.sender)&&equals$1(r.multihash.digest,E.detail.cid.multihash.digest)})).detail}async wantBlock(r,g={}){return this.addEntry(r,{...g,wantType:WantType.WantBlock})}async wantSessionBlock(r,g,_={}){const x=new QueuedBitswapMessage;return x.addWantlistEntry(r,{cid:r.bytes,sendDontHave:!0,wantType:WantType.WantBlock,priority:1}),await this.network.sendMessage(g,x),(await raceEvent(this,"presence",_.signal,{filter:E=>g.equals(E.detail.sender)&&equals$1(r.multihash.digest,E.detail.cid.multihash.digest)})).detail}async receivedBlock(r,g){const _=toString$3(r.multihash.bytes,"base64"),x=this.wants.get(_);x!=null&&(x.cancel=!0,await this.sendMessagesDebounced())}async receiveMessage(r,g){this.log("received message from %p with %d blocks",r,g.blocks.length);let _=!1;for(const x of g.blocks){if(x.prefix==null||x.data==null)continue;const S=varintDecoder(x.prefix),E=S[0],C=S[1],T=S[2],R=T===sha256$8.code?sha256$8:await this.hashLoader?.getHasher(T);if(R==null){this.log.error("unknown hash algorithm",T);continue}let A=R.digest(x.data);A.then!=null&&(A=await A);const I=CID$1.create(E===0?0:1,C,A);this.log("received block from %p for %c",r,I),this.safeDispatchEvent("block",{detail:{sender:r,cid:I,block:x.data}}),this.safeDispatchEvent("presence",{detail:{sender:r,cid:I,has:!0,block:x.data}});const B=toString$3(I.multihash.bytes,"base64"),D=this.wants.get(B);D!=null&&(D.cancel=!0,_=!0)}for(const{cid:x,type:S}of g.blockPresences){const E=CID$1.decode(x);this.log("received %s from %p for %c",S,r,E),this.safeDispatchEvent("presence",{detail:{sender:r,cid:E,has:S===BlockPresenceType.HaveBlock}})}_&&await this.sendMessagesDebounced()}async peerConnected(r){const g=new Set,_=new QueuedBitswapMessage(!0);for(const[x,S]of this.wants.entries())S.cancel||(g.add(x),_.addWantlistEntry(S.cid,{cid:S.cid.bytes,priority:1,wantType:WantType.WantBlock,cancel:!1,sendDontHave:!1}));if(_.wantlist.size===0){this.peers.set(r,g);return}try{await this.network.sendMessage(r,_),this.peers.set(r,g)}catch(x){this.log.error("error sending full wantlist to new peer %p",r,x)}}peerDisconnected(r){this.peers.delete(r)}start(){}stop(){this.peers.clear(),clearTimeout(this.sendMessagesTimeout)}}class Bitswap{log;logger;stats;network;blockstore;peerWantLists;wantList;constructor(r,g={}){this.logger=r.logger,this.log=r.logger.forComponent("helia:bitswap"),this.blockstore=r.blockstore,this.stats=new Stats(r),this.network=new Network$1(r,g),this.peerWantLists=new PeerWantLists({...r,network:this.network},g),this.wantList=new WantList({...r,network:this.network},g)}createSession(r={}){return createBitswapSession({wantList:this.wantList,network:this.network,logger:this.logger},r)}async want(r,g={}){const _=new AbortController,x=anySignal([_.signal,g.signal]);setMaxListeners(1/0,_.signal,x),this.network.findAndConnect(r,{...g,signal:x}).catch(S=>{_.signal.aborted||this.log.error("error during finding and connect for cid %c",r,S)});try{return(await this.wantList.wantBlock(r,{...g,signal:x})).block}finally{_.abort(),x.clear()}}async notify(r,g,_={}){await Promise.all([this.peerWantLists.receivedBlock(r,_),this.wantList.receivedBlock(r,_)])}getWantlist(){return[...this.wantList.wants.values()].filter(r=>!r.cancel).map(r=>({cid:r.cid,priority:r.priority,wantType:r.wantType}))}getPeerWantlist(r){return this.peerWantLists.wantListForPeer(r)}async start(){this.wantList.start(),await this.network.start()}async stop(){this.wantList.stop(),await this.network.stop()}}const createBitswap=(n,r={})=>new Bitswap(n,r);class BitswapBlockBroker{bitswap;started;constructor(r,g={}){const{getHasher:_}=r;this.bitswap=createBitswap(r,{hashLoader:{getHasher:async x=>_(x)},...g}),this.started=!1}isStarted(){return this.started}async start(){await this.bitswap.start(),this.started=!0}async stop(){await this.bitswap.stop(),this.started=!1}async announce(r,g,_){await this.bitswap.notify(r,g,_)}async retrieve(r,g={}){return this.bitswap.want(r,g)}createSession(r){const g=this.bitswap.createSession(r);return{announce:async(_,x,S)=>{await this.bitswap.notify(_,x,S)},retrieve:async(_,x)=>g.retrieve(_,x)}}}function bitswap(n={}){return r=>new BitswapBlockBroker(r,n)}var netmask={},hasRequiredNetmask;function requireNetmask(){return hasRequiredNetmask||(hasRequiredNetmask=1,function(){var n,r,g,_,x,S,E,C;C=function(T){var R,A,I,B;return R=(T&255<<24)>>>24,A=(T&255<<16)>>>16,I=(T&65280)>>>8,B=T&255,[R,A,I,B].join(".")},E=function(T){var R,A,I,B,D,N;for(R=[],I=B=0;B<=3&&T.length!==0;I=++B){if(I>0){if(T[0]!==".")throw new Error("Invalid IP");T=T.substring(1)}N=r(T),D=N[0],A=N[1],T=T.substring(A),R.push(D)}if(T.length!==0)throw new Error("Invalid IP");switch(R.length){case 1:if(R[0]>4294967295)throw new Error("Invalid IP");return R[0]>>>0;case 2:if(R[0]>255||R[1]>16777215)throw new Error("Invalid IP");return(R[0]<<24|R[1])>>>0;case 3:if(R[0]>255||R[1]>255||R[2]>65535)throw new Error("Invalid IP");return(R[0]<<24|R[1]<<16|R[2])>>>0;case 4:if(R[0]>255||R[1]>255||R[2]>255||R[3]>255)throw new Error("Invalid IP");return(R[0]<<24|R[1]<<16|R[2]<<8|R[3])>>>0;default:throw new Error("Invalid IP")}},g=function(T){return T.charCodeAt(0)},_=g("0"),S=g("a"),x=g("A"),r=function(T){var R,A,I,B,D;for(B=0,R=10,A="9",I=0,T.length>1&&T[I]==="0"&&(T[I+1]==="x"||T[I+1]==="X"?(I+=2,R=16):"0"<=T[I+1]&&T[I+1]<="9"&&(I++,R=8,A="7")),D=I;I<T.length;){if("0"<=T[I]&&T[I]<=A)B=B*R+(g(T[I])-_)>>>0;else if(R===16)if("a"<=T[I]&&T[I]<="f")B=B*R+(10+g(T[I])-S)>>>0;else if("A"<=T[I]&&T[I]<="F")B=B*R+(10+g(T[I])-x)>>>0;else break;else break;if(B>4294967295)throw new Error("too large");I++}if(I===D)throw new Error("empty octet");return[B,I]},n=function(){function T(R,A){var I,B,D;if(typeof R!="string")throw new Error("Missing `net' parameter");if(A||(D=R.split("/",2),R=D[0],A=D[1]),A||(A=32),typeof A=="string"&&A.indexOf(".")>-1){try{this.maskLong=E(A)}catch{throw new Error("Invalid mask: "+A)}for(I=B=32;B>=0;I=--B)if(this.maskLong===4294967295<<32-I>>>0){this.bitmask=I;break}}else if(A||A===0)this.bitmask=parseInt(A,10),this.maskLong=0,this.bitmask>0&&(this.maskLong=4294967295<<32-this.bitmask>>>0);else throw new Error("Invalid mask: empty");try{this.netLong=(E(R)&this.maskLong)>>>0}catch{throw new Error("Invalid net address: "+R)}if(!(this.bitmask<=32))throw new Error("Invalid mask for ip4: "+A);this.size=Math.pow(2,32-this.bitmask),this.base=C(this.netLong),this.mask=C(this.maskLong),this.hostmask=C(~this.maskLong),this.first=this.bitmask<=30?C(this.netLong+1):this.base,this.last=this.bitmask<=30?C(this.netLong+this.size-2):C(this.netLong+this.size-1),this.broadcast=this.bitmask<=30?C(this.netLong+this.size-1):void 0}return T.prototype.contains=function(R){return typeof R=="string"&&(R.indexOf("/")>0||R.split(".").length!==4)&&(R=new T(R)),R instanceof T?this.contains(R.base)&&this.contains(R.broadcast||R.last):(E(R)&this.maskLong)>>>0===(this.netLong&this.maskLong)>>>0},T.prototype.next=function(R){return R==null&&(R=1),new T(C(this.netLong+this.size*R),this.mask)},T.prototype.forEach=function(R){var A,I,B;for(B=E(this.first),I=E(this.last),A=0;B<=I;)R(C(B),B,A),A++,B++},T.prototype.toString=function(){return this.base+"/"+this.bitmask},T}(),netmask.ip2long=E,netmask.long2ip=C,netmask.Netmask=n}.call(netmask)),netmask}var netmaskExports=requireNetmask();const PRIVATE_IP_RANGES=["0.0.0.0/8","10.0.0.0/8","100.64.0.0/10","127.0.0.0/8","169.254.0.0/16","172.16.0.0/12","192.0.0.0/24","192.0.0.0/29","192.0.0.8/32","192.0.0.9/32","192.0.0.10/32","192.0.0.170/32","192.0.0.171/32","192.0.2.0/24","192.31.196.0/24","192.52.193.0/24","192.88.99.0/24","192.168.0.0/16","192.175.48.0/24","198.18.0.0/15","198.51.100.0/24","203.0.113.0/24","240.0.0.0/4","255.255.255.255/32"],NETMASK_RANGES=PRIVATE_IP_RANGES.map(n=>new netmaskExports.Netmask(n));function ipv4Check(n){for(const r of NETMASK_RANGES)if(r.contains(n))return!0;return!1}function isIpv4MappedIpv6(n){return/^::ffff:([0-9a-fA-F]{1,4}):([0-9a-fA-F]{1,4})$/.test(n)}function ipv4MappedIpv6Check(n){const r=n.split(":");if(r.length<2)return!1;const g=r[r.length-1].padStart(4,"0"),_=r[r.length-2].padStart(4,"0"),x=`${parseInt(_.substring(0,2),16)}.${parseInt(_.substring(2),16)}.${parseInt(g.substring(0,2),16)}.${parseInt(g.substring(2),16)}`;return ipv4Check(x)}function isIpv4EmbeddedIpv6(n){return/^::ffff:([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(n)}function ipv4EmbeddedIpv6Check(n){const r=n.split(":"),g=r[r.length-1];return ipv4Check(g)}function ipv6Check(n){return/^::$/.test(n)||/^::1$/.test(n)||/^64:ff9b::([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/.test(n)||/^100::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^2001::([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^2001:2[0-9a-fA-F]:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^2001:db8:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^2002:([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4}):?([0-9a-fA-F]{0,4})$/.test(n)||/^f[c-d]([0-9a-fA-F]{2,2}):/i.test(n)||/^fe[8-9a-bA-B][0-9a-fA-F]:/i.test(n)||/^ff([0-9a-fA-F]{2,2}):/i.test(n)}function isPrivateIp(n){return isIPv4$1(n)?ipv4Check(n):isIpv4MappedIpv6(n)?ipv4MappedIpv6Check(n):isIpv4EmbeddedIpv6(n)?ipv4EmbeddedIpv6Check(n):isIPv6$1(n)?ipv6Check(n):void 0}const toParts=n=>n.toString().split("/").slice(1),func=n=>({match:r=>r.length<1?!1:n(r[0])?r.slice(1):!1,pattern:"fn"}),literal=n=>({match:r=>func(g=>g===n).match(r),pattern:n}),string=()=>({match:n=>func(r=>typeof r=="string").match(n),pattern:"{string}"}),number$1=()=>({match:n=>func(r=>!isNaN(parseInt(r))).match(n),pattern:"{number}"}),peerId=()=>({match:n=>{if(n.length<2||n[0]!=="p2p"&&n[0]!=="ipfs")return!1;if(n[1].startsWith("Q")||n[1].startsWith("1"))try{base58btc$1.decode(`z${n[1]}`)}catch{return!1}else return!1;return n.slice(2)},pattern:"/p2p/{peerid}"}),certhash$1=()=>({match:n=>{if(n.length<2||n[0]!=="certhash")return!1;try{base64url.decode(n[1])}catch{return!1}return n.slice(2)},pattern:"/certhash/{certhash}"}),optional=n=>({match:r=>{const g=n.match(r);return g===!1?r:g},pattern:`optional(${n.pattern})`}),or$3=(...n)=>({match:r=>{let g;for(const _ of n){const x=_.match(r);x!==!1&&(g==null||x.length<g.length)&&(g=x)}return g??!1},pattern:`or(${n.map(r=>r.pattern).join(", ")})`}),and$2=(...n)=>({match:r=>{for(const g of n){const _=g.match(r);if(_===!1)return!1;r=_}return r},pattern:`and(${n.map(r=>r.pattern).join(", ")})`});function fmt(...n){function r(x){let S=toParts(x);for(const E of n){const C=E.match(S);if(C===!1)return!1;S=C}return S}function g(x){return r(x)!==!1}function _(x){const S=r(x);return S===!1?!1:S.length===0}return{matchers:n,matches:g,exactMatch:_}}const _DNS4=and$2(literal("dns4"),string()),_DNS6=and$2(literal("dns6"),string()),_DNSADDR=and$2(literal("dnsaddr"),string()),_DNS=and$2(literal("dns"),string());fmt(_DNS4,optional(peerId()));fmt(_DNS6,optional(peerId()));fmt(_DNSADDR,optional(peerId()));const DNS$1=fmt(or$3(_DNS,_DNSADDR,_DNS4,_DNS6),optional(peerId())),_IP4=and$2(literal("ip4"),func(isIPv4$1)),_IP6=and$2(literal("ip6"),func(isIPv6$1)),_IP=or$3(_IP4,_IP6),_IP_OR_DOMAIN=or$3(_IP,_DNS,_DNS4,_DNS6,_DNSADDR),IP_OR_DOMAIN=fmt(or$3(_IP,and$2(or$3(_DNS,_DNSADDR,_DNS4,_DNS6),optional(peerId())))),IP$1=fmt(_IP),_TCP=and$2(_IP_OR_DOMAIN,literal("tcp"),number$1()),_UDP=and$2(_IP_OR_DOMAIN,literal("udp"),number$1()),TCP$1=fmt(and$2(_TCP,optional(peerId()))),_QUIC=and$2(_UDP,literal("quic"),optional(peerId())),_QUICV1=and$2(_UDP,literal("quic-v1"),optional(peerId())),QUIC_V0_OR_V1=or$3(_QUIC,_QUICV1),_WEB=or$3(_IP_OR_DOMAIN,_TCP,_UDP,_QUIC,_QUICV1),_WebSockets$1=or$3(and$2(_WEB,literal("ws"),optional(peerId()))),WebSockets$2=fmt(_WebSockets$1),_WebSocketsSecure$1=or$3(and$2(_WEB,literal("wss"),optional(peerId())),and$2(_WEB,literal("tls"),optional(and$2(literal("sni"),string())),literal("ws"),optional(peerId()))),WebSocketsSecure$1=fmt(_WebSocketsSecure$1),_WebRTCDirect$1=and$2(_UDP,literal("webrtc-direct"),optional(certhash$1()),optional(certhash$1()),optional(peerId())),WebRTCDirect$1=fmt(_WebRTCDirect$1),_WebTransport$1=and$2(_QUICV1,literal("webtransport"),optional(certhash$1()),optional(certhash$1()),optional(peerId())),WebTransport$2=fmt(_WebTransport$1),_P2P$1=or$3(_WebSockets$1,_WebSocketsSecure$1,and$2(_TCP,optional(peerId())),and$2(QUIC_V0_OR_V1,optional(peerId())),and$2(_IP_OR_DOMAIN,optional(peerId())),_WebRTCDirect$1,_WebTransport$1,peerId()),P2P$1=fmt(_P2P$1),_Circuit$1=and$2(_P2P$1,literal("p2p-circuit"),peerId()),Circuit$2=fmt(_Circuit$1),_WebRTC=or$3(and$2(_P2P$1,literal("p2p-circuit"),literal("webrtc"),optional(peerId())),and$2(_P2P$1,literal("webrtc"),optional(peerId())),and$2(literal("webrtc"),optional(peerId()))),WebRTC=fmt(_WebRTC),_HTTP=or$3(and$2(_IP_OR_DOMAIN,literal("tcp"),number$1(),literal("http"),optional(peerId())),and$2(_IP_OR_DOMAIN,literal("http"),optional(peerId()))),HTTP$1=fmt(_HTTP),_HTTPS=or$3(and$2(_IP_OR_DOMAIN,literal("tcp"),or$3(and$2(literal("443"),literal("http")),and$2(number$1(),literal("https"))),optional(peerId())),and$2(_IP_OR_DOMAIN,literal("tls"),literal("http"),optional(peerId())),and$2(_IP_OR_DOMAIN,literal("https"),optional(peerId()))),HTTPS$1=fmt(_HTTPS);or$3(and$2(literal("memory"),string(),optional(peerId())));const ASSUME_HTTP_CODES$1=[getProtocol("tcp").code,getProtocol("dns").code,getProtocol("dnsaddr").code,getProtocol("dns4").code,getProtocol("dns6").code];function extractSNI$1(n){return extractTuple$1("sni",n)?.[1]}function extractPort$1(n){const r=extractTuple$1("tcp",n)?.[1];return r==null?"":`:${r}`}function extractTuple$1(n,r){let g;try{g=getProtocol(n).code}catch{return}for(const[_,x]of r)if(_===g&&x!=null)return[_,x]}function hasTLS$1(n){return n.some(([r,g])=>r===getProtocol("tls").code)}function interpretNext$1(n,r,g){const _=interpreters$1[getProtocol(n).name];if(_==null)throw new Error(`Can't interpret protocol ${getProtocol(n).name}`);const x=_(r,g);return n===getProtocol("ip6").code?`[${x}]`:x}const interpreters$1={ip4:(n,r)=>n,ip6:(n,r)=>r.length===0?n:`[${n}]`,tcp:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`tcp://${interpretNext$1(g[0],g[1]??"",r)}:${n}`},udp:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`udp://${interpretNext$1(g[0],g[1]??"",r)}:${n}`},dnsaddr:(n,r)=>n,dns4:(n,r)=>n,dns6:(n,r)=>n,dns:(n,r)=>n,ipfs:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`${interpretNext$1(g[0],g[1]??"",r)}`},p2p:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`${interpretNext$1(g[0],g[1]??"",r)}`},http:(n,r)=>{const g=hasTLS$1(r),_=extractSNI$1(r),x=extractPort$1(r);if(g&&_!=null)return`https://${_}${x}`;const S=g?"https://":"http://",E=r.pop();if(E==null)throw new Error("Unexpected end of multiaddr");let C=interpretNext$1(E[0],E[1]??"",r);return C=C.replace("tcp://",""),`${S}${C}`},"http-path":(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");const _=interpretNext$1(g[0],g[1]??"",r),x=decodeURIComponent(n);return`${_}/${x}`},tls:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return interpretNext$1(g[0],g[1]??"",r)},sni:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return interpretNext$1(g[0],g[1]??"",r)},https:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");let _=interpretNext$1(g[0],g[1]??"",r);return _=_.replace("tcp://",""),`https://${_}`},ws:(n,r)=>{const g=hasTLS$1(r),_=extractSNI$1(r),x=extractPort$1(r);if(g&&_!=null)return`wss://${_}${x}`;const S=g?"wss://":"ws://",E=r.pop();if(E==null)throw new Error("Unexpected end of multiaddr");let C=interpretNext$1(E[0],E[1]??"",r);return C=C.replace("tcp://",""),`${S}${C}`},wss:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");let _=interpretNext$1(g[0],g[1]??"",r);return _=_.replace("tcp://",""),`wss://${_}`}};function multiaddrToUri$1(n,r){const _=multiaddr(n).stringTuples(),x=_.pop();if(x==null)throw new Error("Unexpected end of multiaddr");const S=getProtocol(x[0]),E=interpreters$1[S.name];if(E==null)throw new Error(`No interpreter found for ${S.name}`);let C=E(x[1]??"",_);return ASSUME_HTTP_CODES$1.includes(x[0])&&(C=C.replace(/^.*:\/\//,""),x[1]==="443"?C=`https://${C}`:C=`http://${C}`),(C.startsWith("http://")||C.startsWith("https://")||C.startsWith("ws://")||C.startsWith("wss://"))&&(C=new URL(C).toString(),C.endsWith("/")&&(C=C.substring(0,C.length-1))),C}class TrustlessGateway{url;#e=0;#t=0;#r=0;#i=0;#o=new Map;log;constructor(r,g){this.url=r instanceof URL?r:new URL(r),this.log=g.forComponent(`helia:trustless-gateway-block-broker:${this.url.hostname}`)}#l(r){const g=r.multihash.bytes;return base64.encode(g)}async getRawBlock(r,g){const _=new URL(this.url.toString());if(_.pathname=`/ipfs/${r.toString()}`,_.search="?format=raw",g?.aborted===!0)throw new Error(`Signal to fetch raw block for CID ${r} from gateway ${this.url} was aborted prior to fetch`);const x=this.#l(r),S=new AbortController,E=()=>{S.abort()};g?.addEventListener("abort",E);try{let C=this.#o.get(x);return C==null&&(this.#e++,C=fetch(_.toString(),{signal:S.signal,headers:{Accept:"application/vnd.ipld.raw"},cache:"force-cache"}).then(async T=>{if(this.log("GET %s %d",_,T.status),!T.ok)throw this.#t++,new Error(`unable to fetch raw block for CID ${r} from gateway ${this.url}`);return this.#i++,new Uint8Array(await T.arrayBuffer())}),this.#o.set(x,C)),await C}catch{throw g?.aborted===!0?new Error(`fetching raw block for CID ${r} from gateway ${this.url} was aborted`):(this.#t++,new Error(`unable to fetch raw block for CID ${r}`))}finally{g?.removeEventListener("abort",E),this.#o.delete(x)}}reliability(){return this.#e===0?1:this.#r>0?-1/0:this.#i/(this.#e+this.#t*3)}incrementInvalidBlocks(){this.#r++}getStats(){return{attempts:this.#e,errors:this.#t,invalidBlocks:this.#r,successes:this.#i,pendingResponses:this.#o.size}}}function filterNonHTTPMultiaddrs(n,r,g){return n.filter(_=>{if(HTTPS$1.matches(_)||r&&HTTP$1.matches(_))return g||DNS$1.matches(_)?!0:isPrivateIp(_.toOptions().host)===!1;if(!r&&g){const{host:x}=_.toOptions();if(x==="127.0.0.1"||x==="localhost"||x.endsWith(".localhost"))return!0}return!1})}async function*findHttpGatewayProviders(n,r,g,_,x,S){for await(const E of r.findProviders(n,S)){const C=filterNonHTTPMultiaddrs(E.multiaddrs,_,x);if(C.length===0)continue;const T=multiaddrToUri$1(C[0]);yield new TrustlessGateway(T,g)}}class TrustlessGatewaySession extends AbstractSession{routing;allowInsecure;allowLocal;constructor(r,g){super(r,{...g,name:"helia:trustless-gateway:session"}),this.routing=r.routing,this.allowInsecure=g.allowInsecure??DEFAULT_ALLOW_INSECURE,this.allowLocal=g.allowLocal??DEFAULT_ALLOW_LOCAL}async queryProvider(r,g,_){this.log("fetching BLOCK for %c from %s",r,g.url);const x=await g.getRawBlock(r,_.signal);return this.log.trace("got block for %c from %s",r,g.url),await _.validateFn?.(x),x}async*findNewProviders(r,g={}){yield*findHttpGatewayProviders(r,this.routing,this.logger,this.allowInsecure,this.allowLocal,g)}toEvictionKey(r){return r.url.toString()}equals(r,g){return r.url.toString()===g.url.toString()}}function createTrustlessGatewaySession(n,r){return new TrustlessGatewaySession(n,r)}class TrustlessGatewayBlockBroker{allowInsecure;allowLocal;routing;log;logger;constructor(r,g={}){this.log=r.logger.forComponent("helia:trustless-gateway-block-broker"),this.logger=r.logger,this.routing=r.routing,this.allowInsecure=g.allowInsecure??DEFAULT_ALLOW_INSECURE,this.allowLocal=g.allowLocal??DEFAULT_ALLOW_LOCAL}async retrieve(r,g={}){const _=[];for await(const x of findHttpGatewayProviders(r,this.routing,this.logger,this.allowInsecure,this.allowLocal,g)){this.log("getting block for %c from %s",r,x.url);try{const S=await x.getRawBlock(r,g.signal);this.log.trace("got block for %c from %s",r,x.url);try{await g.validateFn?.(S)}catch(E){this.log.error("failed to validate block for %c from %s",r,x.url,E);continue}return S}catch(S){if(this.log.error("failed to get block for %c from %s",r,x.url,S),S instanceof Error?_.push(S):_.push(new Error(`Unable to fetch raw block for CID ${r} from gateway ${x.url}`)),g.signal?.aborted===!0){this.log.trace("request aborted while fetching raw block for CID %c from gateway %s",r,x.url);break}}}throw _.length>0?new AggregateError(_,`Unable to fetch raw block for CID ${r} from any gateway`):new Error(`Unable to fetch raw block for CID ${r} from any gateway`)}createSession(r={}){return createTrustlessGatewaySession({logger:this.logger,routing:this.routing},{...r,allowLocal:this.allowLocal,allowInsecure:this.allowInsecure})}}const DEFAULT_ALLOW_INSECURE=!1,DEFAULT_ALLOW_LOCAL=!1;function trustlessGateway(n={}){return r=>new TrustlessGatewayBlockBroker(r,n)}class MemoryBlockstore extends BaseBlockstore{data;constructor(){super(),this.data=new Map}put(r,g){return this.data.set(base32$1.encode(r.multihash.bytes),g),r}get(r){const g=this.data.get(base32$1.encode(r.multihash.bytes));if(g==null)throw new NotFoundError;return g}has(r){return this.data.has(base32$1.encode(r.multihash.bytes))}async delete(r){this.data.delete(base32$1.encode(r.multihash.bytes))}async*getAll(){for(const[r,g]of this.data.entries())yield{cid:CID$1.createV1(code$6,decode$h(base32$1.decode(r))),block:g}}}weald.formatters.b=n=>n==null?"undefined":base58btc$1.baseEncode(n);weald.formatters.t=n=>n==null?"undefined":base32$1.baseEncode(n);weald.formatters.m=n=>n==null?"undefined":base64.baseEncode(n);weald.formatters.p=n=>n==null?"undefined":n.toString();weald.formatters.c=n=>n==null?"undefined":n.toString();weald.formatters.k=n=>n==null?"undefined":n.toString();weald.formatters.a=n=>n==null?"undefined":n.toString();weald.formatters.e=n=>n==null?"undefined":notEmpty$1(n.stack)??notEmpty$1(n.message)??n.toString();function createDisabledLogger$1(n){const r=()=>{};return r.enabled=!1,r.color="",r.diff=0,r.log=()=>{},r.namespace=n,r.destroy=()=>!0,r.extend=()=>r,r}function logger$1(n){let r=createDisabledLogger$1(`${n}:trace`);return weald.enabled(`${n}:trace`)&&weald.names.map(g=>g.toString()).find(g=>g.includes(":trace"))!=null&&(r=weald(`${n}:trace`)),Object.assign(weald(n),{error:weald(`${n}:error`),trace:r})}function notEmpty$1(n){if(n!=null&&(n=n.trim(),n.length!==0))return n}logger$1("blockstore:core:tiered");const instanceOfAny=(n,r)=>r.some(g=>n instanceof g);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const transactionDoneMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(n){const r=new Promise((g,_)=>{const x=()=>{n.removeEventListener("success",S),n.removeEventListener("error",E)},S=()=>{g(wrap(n.result)),x()},E=()=>{_(n.error),x()};n.addEventListener("success",S),n.addEventListener("error",E)});return reverseTransformCache.set(r,n),r}function cacheDonePromiseForTransaction(n){if(transactionDoneMap.has(n))return;const r=new Promise((g,_)=>{const x=()=>{n.removeEventListener("complete",S),n.removeEventListener("error",E),n.removeEventListener("abort",E)},S=()=>{g(),x()},E=()=>{_(n.error||new DOMException("AbortError","AbortError")),x()};n.addEventListener("complete",S),n.addEventListener("error",E),n.addEventListener("abort",E)});transactionDoneMap.set(n,r)}let idbProxyTraps={get(n,r,g){if(n instanceof IDBTransaction){if(r==="done")return transactionDoneMap.get(n);if(r==="store")return g.objectStoreNames[1]?void 0:g.objectStore(g.objectStoreNames[0])}return wrap(n[r])},set(n,r,g){return n[r]=g,!0},has(n,r){return n instanceof IDBTransaction&&(r==="done"||r==="store")?!0:r in n}};function replaceTraps(n){idbProxyTraps=n(idbProxyTraps)}function wrapFunction(n){return getCursorAdvanceMethods().includes(n)?function(...r){return n.apply(unwrap(this),r),wrap(this.request)}:function(...r){return wrap(n.apply(unwrap(this),r))}}function transformCachableValue(n){return typeof n=="function"?wrapFunction(n):(n instanceof IDBTransaction&&cacheDonePromiseForTransaction(n),instanceOfAny(n,getIdbProxyableTypes())?new Proxy(n,idbProxyTraps):n)}function wrap(n){if(n instanceof IDBRequest)return promisifyRequest(n);if(transformCache.has(n))return transformCache.get(n);const r=transformCachableValue(n);return r!==n&&(transformCache.set(n,r),reverseTransformCache.set(r,n)),r}const unwrap=n=>reverseTransformCache.get(n);function openDB(n,r,{blocked:g,upgrade:_,blocking:x,terminated:S}={}){const E=indexedDB.open(n,r),C=wrap(E);return _&&E.addEventListener("upgradeneeded",T=>{_(wrap(E.result),T.oldVersion,T.newVersion,wrap(E.transaction),T)}),g&&E.addEventListener("blocked",T=>g(T.oldVersion,T.newVersion,T)),C.then(T=>{S&&T.addEventListener("close",()=>S()),x&&T.addEventListener("versionchange",R=>x(R.oldVersion,R.newVersion,R))}).catch(()=>{}),C}function deleteDB(n,{blocked:r}={}){const g=indexedDB.deleteDatabase(n);return r&&g.addEventListener("blocked",_=>r(_.oldVersion,_)),wrap(g).then(()=>{})}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(n,r){if(!(n instanceof IDBDatabase&&!(r in n)&&typeof r=="string"))return;if(cachedMethods.get(r))return cachedMethods.get(r);const g=r.replace(/FromIndex$/,""),_=r!==g,x=writeMethods.includes(g);if(!(g in(_?IDBIndex:IDBObjectStore).prototype)||!(x||readMethods.includes(g)))return;const S=async function(E,...C){const T=this.transaction(E,x?"readwrite":"readonly");let R=T.store;return _&&(R=R.index(C.shift())),(await Promise.all([R[g](...C),x&&T.done]))[0]};return cachedMethods.set(r,S),S}replaceTraps(n=>({...n,get:(r,g,_)=>getMethod(r,g)||n.get(r,g,_),has:(r,g)=>!!getMethod(r,g)||n.has(r,g)}));const advanceMethodProps=["continue","continuePrimaryKey","advance"],methodMap={},advanceResults=new WeakMap,ittrProxiedCursorToOriginalProxy=new WeakMap,cursorIteratorTraps={get(n,r){if(!advanceMethodProps.includes(r))return n[r];let g=methodMap[r];return g||(g=methodMap[r]=function(..._){advanceResults.set(this,ittrProxiedCursorToOriginalProxy.get(this)[r](..._))}),g}};async function*iterate(...n){let r=this;if(r instanceof IDBCursor||(r=await r.openCursor(...n)),!r)return;r=r;const g=new Proxy(r,cursorIteratorTraps);for(ittrProxiedCursorToOriginalProxy.set(g,r),reverseTransformCache.set(g,unwrap(r));r;)yield g,r=await(advanceResults.get(g)||r.continue()),advanceResults.delete(g)}function isIteratorProp(n,r){return r===Symbol.asyncIterator&&instanceOfAny(n,[IDBIndex,IDBObjectStore,IDBCursor])||r==="iterate"&&instanceOfAny(n,[IDBIndex,IDBObjectStore])}replaceTraps(n=>({...n,get(r,g,_){return isIteratorProp(r,g)?iterate:n.get(r,g,_)},has(r,g){return isIteratorProp(r,g)||n.has(r,g)}}));class IDBBlockstore extends BaseBlockstore{location;version;db;base;constructor(r,g={}){super(),this.location=`${g.prefix??""}${r}`,this.version=g.version??1,this.base=g.base??base32upper}#e(r){return`/${this.base.encoder.encode(r.multihash.bytes)}`}#t(r){return CID$1.createV1(code$6,decode$h(this.base.decoder.decode(r.substring(1))))}async open(){try{const r=this.location;this.db=await openDB(r,this.version,{upgrade(g){g.createObjectStore(r)}})}catch(r){throw new OpenFailedError(String(r))}}async close(){this.db?.close()}async put(r,g){if(this.db==null)throw new Error("Blockstore needs to be opened.");try{return await this.db.put(this.location,g,this.#e(r)),r}catch(_){throw new PutFailedError(String(_))}}async get(r){if(this.db==null)throw new Error("Blockstore needs to be opened.");let g;try{g=await this.db.get(this.location,this.#e(r))}catch(_){throw new PutFailedError(String(_))}if(g===void 0)throw new NotFoundError;return g}async delete(r){if(this.db==null)throw new Error("Blockstore needs to be opened.");try{await this.db.delete(this.location,this.#e(r))}catch(g){throw new PutFailedError(String(g))}}async has(r){if(this.db==null)throw new Error("Blockstore needs to be opened.");try{return!!await this.db.getKey(this.location,this.#e(r))}catch(g){throw new PutFailedError(String(g))}}async*getAll(r){if(this.db==null)throw new Error("Blockstore needs to be opened.");for(const g of await this.db.getAllKeys(this.location)){const _=this.#t(g.toString()),x=await this.get(_);yield{cid:_,block:x}}}async destroy(){await deleteDB(this.location)}}const SHARDING_FN="SHARDING";function isAsyncIterable$1(n){return n[Symbol.asyncIterator]!=null}function sort(n,r){return isAsyncIterable$1(n)?async function*(){yield*(await all$1(n)).sort(r)}():function*(){yield*all$1(n).sort(r)}()}class BaseDatastore{put(r,g,_){return Promise.reject(new Error(".put is not implemented"))}get(r,g){return Promise.reject(new Error(".get is not implemented"))}has(r,g){return Promise.reject(new Error(".has is not implemented"))}delete(r,g){return Promise.reject(new Error(".delete is not implemented"))}async*putMany(r,g={}){for await(const{key:_,value:x}of r)await this.put(_,x,g),yield _}async*getMany(r,g={}){for await(const _ of r)yield{key:_,value:await this.get(_,g)}}async*deleteMany(r,g={}){for await(const _ of r)await this.delete(_,g),yield _}batch(){let r=[],g=[];return{put(_,x){r.push({key:_,value:x})},delete(_){g.push(_)},commit:async _=>{await drain(this.putMany(r,_)),r=[],await drain(this.deleteMany(g,_)),g=[]}}}async*_all(r,g){throw new Error("._all is not implemented")}async*_allKeys(r,g){throw new Error("._allKeys is not implemented")}query(r,g){let _=this._all(r,g);if(r.prefix!=null){const x=r.prefix;_=filter(_,S=>S.key.toString().startsWith(x))}if(Array.isArray(r.filters)&&(_=r.filters.reduce((x,S)=>filter(x,S),_)),Array.isArray(r.orders)&&(_=r.orders.reduce((x,S)=>sort(x,S),_)),r.offset!=null){let x=0;const S=r.offset;_=filter(_,()=>x++>=S)}return r.limit!=null&&(_=take(_,r.limit)),_}queryKeys(r,g){let _=this._allKeys(r,g);if(r.prefix!=null){const x=r.prefix;_=filter(_,S=>S.toString().startsWith(x))}if(Array.isArray(r.filters)&&(_=r.filters.reduce((x,S)=>filter(x,S),_)),Array.isArray(r.orders)&&(_=r.orders.reduce((x,S)=>sort(x,S),_)),r.offset!=null){const x=r.offset;let S=0;_=filter(_,()=>S++>=x)}return r.limit!=null&&(_=take(_,r.limit)),_}}class MemoryDatastore extends BaseDatastore{data;constructor(){super(),this.data=new Map}put(r,g){return this.data.set(r.toString(),g),r}get(r){const g=this.data.get(r.toString());if(g==null)throw new NotFoundError;return g}has(r){return this.data.has(r.toString())}delete(r){this.data.delete(r.toString())}*_all(){for(const[r,g]of this.data.entries())yield{key:new Key(r),value:g}}*_allKeys(){for(const r of this.data.keys())yield new Key(r)}}new Key(SHARDING_FN);weald.formatters.b=n=>n==null?"undefined":base58btc$1.baseEncode(n);weald.formatters.t=n=>n==null?"undefined":base32$1.baseEncode(n);weald.formatters.m=n=>n==null?"undefined":base64.baseEncode(n);weald.formatters.p=n=>n==null?"undefined":n.toString();weald.formatters.c=n=>n==null?"undefined":n.toString();weald.formatters.k=n=>n==null?"undefined":n.toString();weald.formatters.a=n=>n==null?"undefined":n.toString();weald.formatters.e=n=>n==null?"undefined":notEmpty(n.stack)??notEmpty(n.message)??n.toString();function createDisabledLogger(n){const r=()=>{};return r.enabled=!1,r.color="",r.diff=0,r.log=()=>{},r.namespace=n,r.destroy=()=>!0,r.extend=()=>r,r}function logger(n){let r=createDisabledLogger(`${n}:trace`);return weald.enabled(`${n}:trace`)&&weald.names.map(g=>g.toString()).find(g=>g.includes(":trace"))!=null&&(r=weald(`${n}:trace`)),Object.assign(weald(n),{error:weald(`${n}:error`),trace:r})}function notEmpty(n){if(n!=null&&(n=n.trim(),n.length!==0))return n}logger("datastore:core:tiered");class IDBDatastore extends BaseDatastore{location;version;db;constructor(r,g={}){super(),this.location=`${g.prefix??""}${r}`,this.version=g.version??1}async open(){try{const r=this.location;this.db=await openDB(r,this.version,{upgrade(g){g.createObjectStore(r)}})}catch(r){throw new OpenFailedError(String(r))}}async close(){this.db?.close()}async put(r,g){if(this.db==null)throw new Error("Datastore needs to be opened.");try{return await this.db.put(this.location,g,r.toString()),r}catch(_){throw new PutFailedError(String(_))}}async get(r){if(this.db==null)throw new Error("Datastore needs to be opened.");let g;try{g=await this.db.get(this.location,r.toString())}catch(_){throw new GetFailedError(String(_))}if(g===void 0)throw new NotFoundError;return g}async has(r){if(this.db==null)throw new Error("Datastore needs to be opened.");try{return!!await this.db.getKey(this.location,r.toString())}catch(g){throw new GetFailedError(String(g))}}async delete(r){if(this.db==null)throw new Error("Datastore needs to be opened.");try{await this.db.delete(this.location,r.toString())}catch(g){throw new DeleteFailedError(String(g))}}batch(){const r=[],g=[];return{put(_,x){r.push({key:_,value:x})},delete(_){g.push(_)},commit:async()=>{if(this.db==null)throw new Error("Datastore needs to be opened.");const _=this.db.transaction(this.location,"readwrite");try{const x=r.filter(({key:S})=>g.find(E=>E.toString()===S.toString())==null).map(S=>async()=>{await _.store.put(S.value,S.key.toString())}).concat(g.map(S=>async()=>{await _.store.delete(S.toString())})).concat(async()=>{await _.done});await Promise.all(x.map(async S=>{await S()}))}catch{_.abort()}}}}async*query(r){let g=this.#e(r,(_,x)=>({key:_,value:x}));Array.isArray(r.filters)&&(g=r.filters.reduce((_,x)=>filter(_,x),g)),Array.isArray(r.orders)&&(g=r.orders.reduce((_,x)=>sort(_,x),g)),yield*g}async*queryKeys(r){let g=this.#e(r,_=>_);Array.isArray(r.filters)&&(g=r.filters.reduce((_,x)=>filter(_,x),g)),Array.isArray(r.orders)&&(g=r.orders.reduce((_,x)=>sort(_,x),g)),yield*g}async*#e(r,g){if(this.db==null)throw new Error("Datastore needs to be opened.");let _=0,x=-1;for(const S of await this.db.getAllKeys(this.location)){if(r.prefix!=null&&!S.toString().startsWith(r.prefix))continue;if(r.limit!=null&&_===r.limit)return;if(x++,r.offset!=null&&x<r.offset)continue;const E=new Key(S.toString());let C;try{C=await this.get(E)}catch(T){if(T.name!=="NotFoundError")throw T;continue}C!=null&&(yield g(E,C),_++)}}async destroy(){await deleteDB(this.location)}}async function*browserReadableStreamToIt(n,r={}){const g=n.getReader();try{for(;;){const _=await g.read();if(_.done)return;yield _.value}}finally{r.preventCancel!==!0&&await g.cancel(),g.releaseLock()}}var timestamp_min={exports:{}},hasRequiredTimestamp_min;function requireTimestamp_min(){return hasRequiredTimestamp_min||(hasRequiredTimestamp_min=1,function(n){(function(){n.exports=O;var r=86400,g=3200,_=146097*g/400,x=r*_,S=1e3*x,E=864e13,C=4294967296,T=1e6,R="000000000",A=Math.trunc||function(fe){var xe=fe-fe%1;return xe==0&&(fe<0||fe===0&&1/fe!=1/0)?-0:xe},I=O.prototype,B=(O.fromDate=function(fe){return new O(+fe)},O.fromInt64BE=z(0,1,2,3,0,4),O.fromInt64LE=z(3,2,1,0,4,0),O.fromString=function(G){var xe,we=new O,G=(G+="").replace(/^\s*[+\-]?\d+/,function(q){var q=+q,H=1970+(q-1970)%400;return we.year=q-H,H}).replace(/(?:Z|([+\-]\d{2}):?(\d{2}))$/,function(J,q,H){return q<0&&(H*=-1),xe=6e4*(60*+q+ +H),""}).replace(/\.\d+$/,function(J){return we.nano=+(J+R).substr(1,9),""}).split(/\D+/);if(1<G.length?G[1]--:G[1]=0,we.time=xe=Date.UTC.apply(Date,G)-(xe||0),isNaN(xe))throw new TypeError("Invalid Date");return L(we)},O.fromTimeT=function(fe){return U(fe,0)},I.year=0,I.time=0,I.nano=0,I.addNano=function(fe){return this.nano+=+fe||0,this},I.getNano=function(){var fe=L(this);return(fe.time%1e3*T+ +fe.nano+1e9)%1e9},I.getTimeT=function(){var xe=L(this),fe=Math.floor(xe.time/1e3),xe=xe.year;return xe&&(fe+=xe*_*r/g),fe},I.getYear=function(){return this.toDate().getUTCFullYear()+this.year},I.toDate=function(){return F(L(this).time)},I.toJSON=function(){return this.toString().replace(/0{1,6}Z$/,"Z")},I.toString=function(fe){var xe=this,we=xe.toDate(),G={H:function(){return X(we.getUTCHours())},L:function(){return ie(we.getUTCMilliseconds(),3)},M:function(){return X(we.getUTCMinutes())},N:function(){return ie(xe.getNano(),9)},S:function(){return X(we.getUTCSeconds())},Y:function(){var J=xe.getYear();return 999999<J?"+"+J:9999<J?"+"+ie(J,6):0<=J?ie(J,4):-999999<=J?"-"+ie(-J,6):J},a:function(){return N[we.getUTCDay()]},b:function(){return D[we.getUTCMonth()]},d:function(){return X(we.getUTCDate())},e:function(){return function(J){return(9<J?"":" ")+(0|J)}(we.getUTCDate())},m:function(){return X(we.getUTCMonth()+1)}};return function J(q){return q.replace(/%./g,function(H){var Z=H[1],ve=M[Z],Z=G[Z];return ve?J(ve):Z?Z():H})}(fe||B)},I.writeInt64BE=j(0,1,2,3,0,4),I.writeInt64LE=j(3,2,1,0,4,0),"%Y-%m-%dT%H:%M:%S.%NZ"),D=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],N=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],M={"%":"%",F:"%Y-%m-%d",n:`
`,R:"%H:%M",T:"%H:%M:%S",t:"	",X:"%T",Z:"GMT",z:"+0000"};return O;function O(fe,xe,we){var G=this;if(!(G instanceof O))return new O(fe,xe,we);G.time=+fe||0,G.nano=+xe||0,G.year=+we||0,L(G)}function L(fe){var xe,we,G,J=fe.year,q=fe.time,H=fe.nano,ve=((H<0||T<=H)&&(H-=(we=Math.floor(H/T))*T,q+=we,we=1),J%g);return(q<-E||E<q||ve)&&((xe=A(q/S))&&(J+=xe*g,q-=xe*S),(G=F(q)).setUTCFullYear(ve+G.getUTCFullYear()),G=(q=+G)+(xe=A((J-=ve)/g))*S,xe&&-E<=G&&G<=E&&(J-=xe*g,q=G),we=1),we&&(fe.year=J,fe.time=q,fe.nano=H),fe}function F(fe){var xe=new Date(0);return xe.setTime(fe),xe}function U(J,G){J=+J||0;var we=A((G=(G|0)*C)/x)+A(J/x),G=G%x+J%x,J=A(G/x);return J&&(we+=J,G-=J*x),new O(1e3*G,0,we*g)}function j(fe,xe,we,G,J,q){return function(ve,Z){var ue=L(this);ve=ve||new Array(8),W(ve,Z|=0);var se=Math.floor(ue.time/1e3),ue=ue.year*(_*r/g),ce=A(ue/C)+A(se/C),ue=ue%C+se%C,se=Math.floor(ue/C);return se&&(ce+=se,ue-=se*C),H(ve,Z+J,ce),H(ve,Z+q,ue),ve};function H(ve,Z,ce){ve[Z+fe]=ce>>24&255,ve[Z+xe]=ce>>16&255,ve[Z+we]=ce>>8&255,ve[Z+G]=255&ce}}function z(fe,xe,we,G,J,q){return function(ve,Z){W(ve,Z|=0);var ce=H(ve,Z+J);return U(H(ve,Z+q),ce)};function H(ve,Z){return 16777216*ve[Z+fe]+(ve[Z+xe]<<16|ve[Z+we]<<8|ve[Z+G])}}function W(fe,xe){if(fe=fe&&fe.length,fe==null)throw new TypeError("Invalid Buffer");if(fe<xe+8)throw new RangeError("Out of range")}function X(fe){return(9<fe?"":"0")+(0|fe)}function ie(fe,xe){return(R+(0|fe)).substr(-xe)}})()}(timestamp_min)),timestamp_min.exports}var timestamp_minExports=requireTimestamp_min();const NanoDate=getDefaultExportFromCjs(timestamp_minExports);class SignatureVerificationError extends Error{static name="SignatureVerificationError";constructor(r="Record signature verification failed"){super(r),this.name="SignatureVerificationError"}}class RecordExpiredError extends Error{static name="RecordExpiredError";constructor(r="Record has expired"){super(r),this.name="RecordExpiredError"}}class UnsupportedValidityError extends Error{static name="UnsupportedValidityError";constructor(r="The validity type is unsupported"){super(r),this.name="UnsupportedValidityError"}}class RecordTooLargeError extends Error{static name="RecordTooLargeError";constructor(r="The record is too large"){super(r),this.name="RecordTooLargeError"}}class InvalidValueError extends Error{static name="InvalidValueError";constructor(r="Value must be a valid content path starting with /"){super(r),this.name="InvalidValueError"}}class InvalidRecordDataError extends Error{static name="InvalidRecordDataError";constructor(r="Invalid record data"){super(r),this.name="InvalidRecordDataError"}}class InvalidEmbeddedPublicKeyError extends Error{static name="InvalidEmbeddedPublicKeyError";constructor(r="Invalid embedded public key"){super(r),this.name="InvalidEmbeddedPublicKeyError"}}var IpnsEntry;(function(n){(function(_){_.EOL="EOL"})(n.ValidityType||(n.ValidityType={}));let r;(function(_){_[_.EOL=0]="EOL"})(r||(r={})),function(_){_.codec=()=>enumeration(r)}(n.ValidityType||(n.ValidityType={}));let g;n.codec=()=>(g==null&&(g=message((_,x,S={})=>{S.lengthDelimited!==!1&&x.fork(),_.value!=null&&(x.uint32(10),x.bytes(_.value)),_.signatureV1!=null&&(x.uint32(18),x.bytes(_.signatureV1)),_.validityType!=null&&(x.uint32(24),n.ValidityType.codec().encode(_.validityType,x)),_.validity!=null&&(x.uint32(34),x.bytes(_.validity)),_.sequence!=null&&(x.uint32(40),x.uint64(_.sequence)),_.ttl!=null&&(x.uint32(48),x.uint64(_.ttl)),_.pubKey!=null&&(x.uint32(58),x.bytes(_.pubKey)),_.signatureV2!=null&&(x.uint32(66),x.bytes(_.signatureV2)),_.data!=null&&(x.uint32(74),x.bytes(_.data)),S.lengthDelimited!==!1&&x.ldelim()},(_,x,S={})=>{const E={},C=x==null?_.len:_.pos+x;for(;_.pos<C;){const T=_.uint32();switch(T>>>3){case 1:{E.value=_.bytes();break}case 2:{E.signatureV1=_.bytes();break}case 3:{E.validityType=n.ValidityType.codec().decode(_);break}case 4:{E.validity=_.bytes();break}case 5:{E.sequence=_.uint64();break}case 6:{E.ttl=_.uint64();break}case 7:{E.pubKey=_.bytes();break}case 8:{E.signatureV2=_.bytes();break}case 9:{E.data=_.bytes();break}default:{_.skipType(T&7);break}}}return E})),g),n.encode=_=>encodeMessage(_,n.codec()),n.decode=(_,x)=>decodeMessage(_,n.codec(),x)})(IpnsEntry||(IpnsEntry={}));const log$2=logger$2("ipns:utils"),IPNS_PREFIX$1=fromString("/ipns/"),IDENTITY_CODEC=0,SHA2_256_CODEC=18;function extractPublicKeyFromIPNSRecord(n){let r;if(n.pubKey!=null)try{r=publicKeyFromProtobuf(n.pubKey)}catch(g){throw log$2.error(g),g}if(r!=null)return r}function ipnsRecordDataForV2Sig(n){const r=fromString("ipns-signature:");return concat([r,n])}function marshalIPNSRecord(n){return"signatureV1"in n?IpnsEntry.encode({value:fromString(n.value),signatureV1:n.signatureV1,validityType:n.validityType,validity:fromString(n.validity),sequence:n.sequence,ttl:n.ttl,pubKey:n.pubKey,signatureV2:n.signatureV2,data:n.data}):IpnsEntry.encode({pubKey:n.pubKey,signatureV2:n.signatureV2,data:n.data})}function unmarshalIPNSRecord(n){const r=IpnsEntry.decode(n);if(r.sequence!=null&&(r.sequence=BigInt(r.sequence)),r.ttl!=null&&(r.ttl=BigInt(r.ttl)),r.signatureV2==null||r.data==null)throw new SignatureVerificationError("Missing data or signatureV2");const g=parseCborData(r.data),_=normalizeByteValue(g.Value),x=toString$3(g.Validity);if(r.value!=null&&r.signatureV1!=null)return validateCborDataMatchesPbData(r),{value:_,validityType:IpnsEntry.ValidityType.EOL,validity:x,sequence:g.Sequence,ttl:g.TTL,pubKey:r.pubKey,signatureV1:r.signatureV1,signatureV2:r.signatureV2,data:r.data};if(r.signatureV2!=null)return{value:_,validityType:IpnsEntry.ValidityType.EOL,validity:x,sequence:g.Sequence,ttl:g.TTL,pubKey:r.pubKey,signatureV2:r.signatureV2,data:r.data};throw new Error("invalid record: does not include signatureV1 or signatureV2")}function multihashToIPNSRoutingKey(n){return concat([IPNS_PREFIX$1,n.bytes])}function multihashFromIPNSRoutingKey(n){const r=decode$h(n.slice(IPNS_PREFIX$1.length));if(!isCodec(r,IDENTITY_CODEC)&&!isCodec(r,SHA2_256_CODEC))throw new InvalidMultihashError("Multihash in IPNS key was not identity or sha2-256");return r}function parseCborData(n){const r=decode$l(n);if(r.ValidityType===0)r.ValidityType=IpnsEntry.ValidityType.EOL;else throw new UnsupportedValidityError("The validity type is unsupported");return Number.isInteger(r.Sequence)&&(r.Sequence=BigInt(r.Sequence)),Number.isInteger(r.TTL)&&(r.TTL=BigInt(r.TTL)),r}function normalizeByteValue(n){const r=toString$3(n).trim();if(r.startsWith("/"))return r;try{return`/ipfs/${CID$1.decode(n).toV1().toString()}`}catch{}try{return`/ipfs/${CID$1.parse(r).toV1().toString()}`}catch{}throw new InvalidValueError("Value must be a valid content path starting with /")}function validateCborDataMatchesPbData(n){if(n.data==null)throw new InvalidRecordDataError("Record data is missing");const r=parseCborData(n.data);if(!equals$1(r.Value,n.value??new Uint8Array(0)))throw new SignatureVerificationError('Field "value" did not match between protobuf and CBOR');if(!equals$1(r.Validity,n.validity??new Uint8Array(0)))throw new SignatureVerificationError('Field "validity" did not match between protobuf and CBOR');if(r.ValidityType!==n.validityType)throw new SignatureVerificationError('Field "validityType" did not match between protobuf and CBOR');if(r.Sequence!==n.sequence)throw new SignatureVerificationError('Field "sequence" did not match between protobuf and CBOR');if(r.TTL!==n.ttl)throw new SignatureVerificationError('Field "ttl" did not match between protobuf and CBOR')}function isCodec(n,r){return n.code===r}const log$1=logger$2("ipns:validator"),MAX_RECORD_SIZE=1024*10,validate=async(n,r)=>{const g=unmarshalIPNSRecord(r);let _;try{const x=ipnsRecordDataForV2Sig(g.data);_=await n.verify(x,g.signatureV2)}catch{_=!1}if(!_)throw log$1.error("record signature verification failed"),new SignatureVerificationError("Record signature verification failed");if(g.validityType===IpnsEntry.ValidityType.EOL){if(NanoDate.fromString(g.validity).toDate().getTime()<Date.now())throw log$1.error("record has expired"),new RecordExpiredError("record has expired")}else if(g.validityType!=null)throw log$1.error("the validity type is unsupported"),new UnsupportedValidityError("The validity type is unsupported");log$1("ipns record for %s is valid",g.value)};async function ipnsValidator(n,r){if(r.byteLength>MAX_RECORD_SIZE)throw new RecordTooLargeError("The record is too large");const g=multihashFromIPNSRoutingKey(n);let _;isCodec(g,0)&&(_=publicKeyFromMultihash(g));const x=unmarshalIPNSRecord(r),S=extractPublicKeyFromIPNSRecord(x)??_;if(S==null)throw new InvalidEmbeddedPublicKeyError("Could not extract public key from IPNS record or routing key");const E=multihashToIPNSRoutingKey(S.toMultihash());if(!equals$1(n,E))throw new InvalidEmbeddedPublicKeyError("Embedded public key did not match routing key");await validate(S,r)}async function*parse$1(n){const r=/\r?\n/,g=new TextDecoder("utf8");let _="";for await(let x of n){typeof x=="string"&&(x=new TextEncoder().encode(x)),_+=g.decode(x,{stream:!0});const S=_.split(r);_=S.pop()??"";for(let E=0;E<S.length;E++)yield JSON.parse(S[E])}_+=g.decode(),_!==""&&(yield JSON.parse(_))}class InvalidRequestError extends Error{static name="InvalidRequestError";constructor(r="Invalid request"){super(r),this.name="InvalidRequestError"}}class BadResponseError extends Error{static name="BadResponseError";constructor(r="Bad response"){super(r),this.name="BadResponseError"}}const IPNS_PREFIX=fromString("/ipns/");function isIPNSKey(n){return equals$1(n.subarray(0,IPNS_PREFIX.byteLength),IPNS_PREFIX)}class DelegatedRoutingV1HttpApiClientContentRouting{client;constructor(r){this.client=r}async*findProviders(r,g={}){yield*map$2(this.client.getProviders(r,g),_=>({id:_.ID,multiaddrs:_.Addrs??[]}))}async provide(){}async cancelReprovide(){}async put(r,g,_){if(!isIPNSKey(r))return;const x=multihashFromIPNSRoutingKey(r),S=CID$1.createV1(114,x),E=unmarshalIPNSRecord(g);await this.client.putIPNS(S,E,_)}async get(r,g){if(!isIPNSKey(r))throw new NotFoundError$1("Not found");const _=multihashFromIPNSRoutingKey(r),x=CID$1.createV1(114,_);try{const S=await this.client.getIPNS(x,g);return marshalIPNSRecord(S)}catch(S){throw S.name==="BadResponseError"?new NotFoundError$1("Not found"):S}}}class DelegatedRoutingV1HttpApiClientPeerRouting{client;constructor(r){this.client=r}async findPeer(r,g={}){const _=await first(this.client.getPeers(r,g));if(_!=null)return{id:_.ID,multiaddrs:_.Addrs??[]};throw new NotFoundError$1("Not found")}async*getClosestPeers(r,g={}){}}const log=logger$2("delegated-routing-v1-http-api-client"),defaultValues$5={concurrentRequests:4,timeout:3e4,cacheTTL:5*60*1e3,cacheName:"delegated-routing-v1-cache"};class DefaultDelegatedRoutingV1HttpApiClient{started;httpQueue;shutDownController;clientUrl;timeout;contentRouting;peerRouting;filterAddrs;filterProtocols;inFlightRequests;cacheName;cache;cacheTTL;constructor(r,g={}){this.started=!1,this.shutDownController=new AbortController,setMaxListeners(1/0,this.shutDownController.signal),this.httpQueue=new PQueue({concurrency:g.concurrentRequests??defaultValues$5.concurrentRequests}),this.inFlightRequests=new Map,this.clientUrl=r instanceof URL?r:new URL(r),this.timeout=g.timeout??defaultValues$5.timeout,this.filterAddrs=g.filterAddrs,this.filterProtocols=g.filterProtocols,this.contentRouting=new DelegatedRoutingV1HttpApiClientContentRouting(this),this.peerRouting=new DelegatedRoutingV1HttpApiClientPeerRouting(this),this.cacheName=g.cacheName??defaultValues$5.cacheName,this.cacheTTL=g.cacheTTL??defaultValues$5.cacheTTL}get[contentRoutingSymbol](){return this.contentRouting}get[peerRoutingSymbol](){return this.peerRouting}isStarted(){return this.started}async start(){this.started||(this.started=!0,this.cacheTTL>0&&(this.cache=await globalThis.caches?.open(this.cacheName),this.cache!=null&&log("cache enabled with ttl %d",this.cacheTTL)))}async stop(){this.httpQueue.clear(),this.shutDownController.abort(),await globalThis.caches?.delete(this.cacheName),this.started=!1}async*getProviders(r,g={}){log("getProviders starts: %c",r);const _=AbortSignal.timeout(this.timeout),x=anySignal([this.shutDownController.signal,_,g.signal]);setMaxListeners(1/0,_,x);const S=pDefer(),E=pDefer();this.httpQueue.add(async()=>(S.resolve(),E.promise));try{await S.promise;const C=new URL(`${this.clientUrl}routing/v1/providers/${r.toString()}`);this.#t(C,g.filterAddrs,g.filterProtocols);const T={headers:{Accept:"application/x-ndjson"},signal:x},R=await this.#r(C.toString(),T);if(R.status===404)throw new NotFoundError$1("No matching records found");if(R.status===422)throw new InvalidRequestError("Request does not conform to schema or semantic constraints");if(R.body==null)throw new BadResponseError("Routing response had no body");if(R.headers.get("Content-Type")==="application/json"){const I=await R.json();for(const B of I.Providers){const D=this.#e(B);D!=null&&(yield D)}}else for await(const I of parse$1(browserReadableStreamToIt(R.body))){const B=this.#e(I);B!=null&&(yield B)}}catch(C){log.error("getProviders errored:",C)}finally{x.clear(),E.resolve(),log("getProviders finished: %c",r)}}async*getPeers(r,g={}){log("getPeers starts: %c",r);const _=AbortSignal.timeout(this.timeout),x=anySignal([this.shutDownController.signal,_,g.signal]);setMaxListeners(1/0,_,x);const S=pDefer(),E=pDefer();this.httpQueue.add(async()=>(S.resolve(),E.promise));try{await S.promise;const C=new URL(`${this.clientUrl}routing/v1/peers/${r.toCID().toString()}`);this.#t(C,g.filterAddrs,g.filterProtocols);const T={headers:{Accept:"application/x-ndjson"},signal:x},R=await this.#r(C.toString(),T);if(R.status===404)throw new NotFoundError$1("No matching records found");if(R.status===422)throw new InvalidRequestError("Request does not conform to schema or semantic constraints");if(R.body==null)throw new BadResponseError("Routing response had no body");if(R.headers.get("Content-Type")==="application/json"){const I=await R.json();for(const B of I.Peers){const D=this.#e(B);D!=null&&(yield D)}}else for await(const I of parse$1(browserReadableStreamToIt(R.body))){const B=this.#e(I);B!=null&&(yield B)}}catch(C){log.error("getPeers errored:",C)}finally{x.clear(),E.resolve(),log("getPeers finished: %c",r)}}async getIPNS(r,g={}){log("getIPNS starts: %s",r);const _=AbortSignal.timeout(this.timeout),x=anySignal([this.shutDownController.signal,_,g.signal]);setMaxListeners(1/0,_,x);const S=pDefer(),E=pDefer();this.httpQueue.add(async()=>(S.resolve(),E.promise));const C=`${this.clientUrl}routing/v1/ipns/${r}`;try{await S.promise;const T={headers:{Accept:"application/vnd.ipfs.ipns-record"},signal:x},R=await this.#r(C,T);if(log("getIPNS GET %s %d",C,R.status),R.status===404)throw new NotFoundError$1("No matching records found");if(R.status===422)throw new InvalidRequestError("Request does not conform to schema or semantic constraints");if(R.body==null)throw new BadResponseError("GET ipns response had no body");const A=await R.arrayBuffer(),I=new Uint8Array(A,0,A.byteLength);return g.validate!==!1&&await ipnsValidator(multihashToIPNSRoutingKey(r.multihash),I),unmarshalIPNSRecord(I)}catch(T){throw log.error("getIPNS GET %s error:",C,T),T}finally{x.clear(),E.resolve(),log("getIPNS finished: %s",r)}}async putIPNS(r,g,_={}){log("putIPNS starts: %c",r);const x=AbortSignal.timeout(this.timeout),S=anySignal([this.shutDownController.signal,x,_.signal]);setMaxListeners(1/0,x,S);const E=pDefer(),C=pDefer();this.httpQueue.add(async()=>(E.resolve(),C.promise));const T=`${this.clientUrl}routing/v1/ipns/${r}`;try{await E.promise;const R=marshalIPNSRecord(g),A={method:"PUT",headers:{"Content-Type":"application/vnd.ipfs.ipns-record"},body:R,signal:S},I=await this.#r(T,A);if(log("putIPNS PUT %s %d",T,I.status),I.status!==200)throw new BadResponseError("PUT ipns response had status other than 200")}catch(R){throw log.error("putIPNS PUT %s error:",T,R.stack),R}finally{S.clear(),C.resolve(),log("putIPNS finished: %c",r)}}#e(r){try{const g=[],_=r.Addrs?.map(multiaddr)??[];return r.Protocols!=null&&g.push(...r.Protocols),r.Protocol!=null&&(g.push(r.Protocol),delete r.Protocol),{...r,Schema:"peer",ID:peerIdFromString$1(r.ID),Addrs:_,Protocols:g}}catch(g){log.error("could not conform record to peer schema",g)}}#t(r,g,_){if(g!=null||this.filterAddrs!=null){const x=g?.join(",")??this.filterAddrs?.join(",")??"";x!==""&&r.searchParams.set("filter-addrs",x)}if(_!=null||this.filterProtocols!=null){const x=_?.join(",")??this.filterProtocols?.join(",")??"";x!==""&&r.searchParams.set("filter-protocols",x)}}async#r(r,g){const _=g.method??"GET",x=`${_}-${r}`;if(_==="GET"){const T=await this.cache?.match(r);if(T!=null){if(parseInt(T.headers.get("x-cache-expires")??"0",10)>Date.now())return log("returning cached response for %s",x),T;await this.cache?.delete(r)}}const S=this.inFlightRequests.get(x);if(S!=null){const T=await S;return log("deduplicating outgoing request for %s",x),T.clone()}const E=fetch(r,g).then(async T=>{if(this.cache!=null&&T.ok&&_==="GET"){const R=Date.now()+this.cacheTTL,A=new Headers(T.headers);A.set("x-cache-expires",R.toString());const I=new Response(T.clone().body,{status:T.status,statusText:T.statusText,headers:A});await this.cache.put(r,I)}return T}).finally(()=>{this.inFlightRequests.delete(x)});return this.inFlightRequests.set(x,E),await E}}function createDelegatedRoutingV1HttpApiClient(n,r={}){return new DefaultDelegatedRoutingV1HttpApiClient(new URL(n),r)}function delegatedHTTPRoutingDefaults(){return{filterProtocols:["unknown","transport-bitswap","transport-ipfs-gateway-http"],filterAddrs:["https","webtransport","webrtc","webrtc-direct","wss","tls"]}}const word="[a-fA-F\\d:]",boundry=n=>n&&n.includeBoundaries?`(?:(?<=\\s|^)(?=${word})|(?<=${word})(?=\\s|$))`:"",v4$2="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",v6segment="[a-fA-F\\d]{1,4}",v6=`
(?:
(?:${v6segment}:){7}(?:${v6segment}|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:${v6segment}:){6}(?:${v4$2}|:${v6segment}|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:${v6segment}:){5}(?::${v4$2}|(?::${v6segment}){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:${v6segment}:){4}(?:(?::${v6segment}){0,1}:${v4$2}|(?::${v6segment}){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:${v6segment}:){3}(?:(?::${v6segment}){0,2}:${v4$2}|(?::${v6segment}){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:${v6segment}:){2}(?:(?::${v6segment}){0,3}:${v4$2}|(?::${v6segment}){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:${v6segment}:){1}(?:(?::${v6segment}){0,4}:${v4$2}|(?::${v6segment}){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::${v6segment}){0,5}:${v4$2}|(?::${v6segment}){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`.replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),v46Exact=new RegExp(`(?:^${v4$2}$)|(?:^${v6}$)`),v4exact=new RegExp(`^${v4$2}$`),v6exact=new RegExp(`^${v6}$`),ipRegex=n=>n&&n.exact?v46Exact:new RegExp(`(?:${boundry(n)}${v4$2}${boundry(n)})|(?:${boundry(n)}${v6}${boundry(n)})`,"g");ipRegex.v4=n=>n&&n.exact?v4exact:new RegExp(`${boundry(n)}${v4$2}${boundry(n)}`,"g");ipRegex.v6=n=>n&&n.exact?v6exact:new RegExp(`${boundry(n)}${v6}${boundry(n)}`,"g");function functionTimeout(n){const r=(...g)=>n(...g);return Object.defineProperty(r,"name",{value:`functionTimeout(${n.name||"<anonymous>"})`,configurable:!0}),r}const{toString}=Object.prototype;function isRegexp(n){return toString.call(n)==="[object RegExp]"}const flagMap={global:"g",ignoreCase:"i",multiline:"m",dotAll:"s",sticky:"y",unicode:"u"};function clonedRegexp(n,r={}){if(!isRegexp(n))throw new TypeError("Expected a RegExp instance");const g=Object.keys(flagMap).map(x=>(typeof r[x]=="boolean"?r[x]:n[x])?flagMap[x]:"").join(""),_=new RegExp(r.source||n.source,g);return _.lastIndex=typeof r.lastIndex=="number"?r.lastIndex:n.lastIndex,_}function isMatch(n,r,{timeout:g}={}){try{return functionTimeout(()=>clonedRegexp(n).test(r),{timeout:g})()}catch(_){throw _}}const maxIPv4Length=15,maxIPv6Length=45,options={timeout:400};function isIPv6(n){return n.length>maxIPv6Length?!1:isMatch(ipRegex.v6({exact:!0}),n,options)}function isIPv4(n){return n.length>maxIPv4Length?!1:isMatch(ipRegex.v4({exact:!0}),n,options)}const portFor={http:"80",https:"443",ws:"80",wss:"443"},BROWSER_SCHEMES=["http","https","ws","wss"];function uriToMultiaddr(n,r){r=r??{};const g=r.defaultDnsType??"dns4",{scheme:_,hostname:x,port:S}=parseUri(n),C="/"+[tupleForHostname(x,g),tupleForPort(S,_),tupleForScheme(_)].filter(T=>!!T).reduce((T,R)=>T.concat(R),[]).join("/");return multiaddr(C)}function parseUri(n){const[r]=n.split(":");BROWSER_SCHEMES.includes(r)||(n="http"+n.substring(r.length));let{protocol:g,hostname:_,port:x}=new URL(n);if(x==null||x===""){const S=portForProtocol(r);S!=null&&(x=S),S==null&&g==="http:"&&(x="80")}return{scheme:r,hostname:_,port:x}}function tupleForHostname(n,r){if(!(n==null||n==="")){if(isIPv4(n))return["ip4",n];if(isIPv6(n))return["ip6",n];if(n[0]==="["){const g=n.substring(1,n.length-1);if(isIPv6(g))return["ip6",g]}return[r,n]}}function tupleForPort(n,r){if(!(n==null||n===""))return r==="udp"?["udp",n]:["tcp",n]}function tupleForScheme(n){if(n.match(/^tcp$|^udp$/)==null)return[n]}function portForProtocol(n){if(!(n==null||n===""||portFor[n]==null))return portFor[n]}const DEFAULT_TRUSTLESS_GATEWAYS=["https://trustless-gateway.link","https://4everland.io"],TRANSPORT_IPFS_GATEWAY_HTTP_CODE=2336;function toPeerInfo(n){return n=n.toString(),{id:peerIdFromCID(CID$1.createV1(TRANSPORT_IPFS_GATEWAY_HTTP_CODE,identity$1.digest(fromString(n)))),multiaddrs:[uriToMultiaddr(n)]}}class HTTPGatwayRouter{gateways;constructor(r={}){this.gateways=(r.gateways??DEFAULT_TRUSTLESS_GATEWAYS).map(g=>toPeerInfo(g))}async*findProviders(r,g){yield*this.gateways.toSorted(()=>Math.random()>.5?1:-1).map(_=>({..._,protocols:["transport-ipfs-gateway-http"]}))}}function httpGatewayRouting(n={}){return new HTTPGatwayRouter(n)}class Libp2pRouter{libp2p;constructor(r){this.libp2p=r}async provide(r,g){await this.libp2p.contentRouting.provide(r,g)}async cancelReprovide(r,g){await this.libp2p.contentRouting.cancelReprovide(r,g)}async*findProviders(r,g){yield*this.libp2p.contentRouting.findProviders(r,g)}async put(r,g,_){await this.libp2p.contentRouting.put(r,g,_)}async get(r,g){return this.libp2p.contentRouting.get(r,g)}async findPeer(r,g){return this.libp2p.peerRouting.findPeer(r,g)}async*getClosestPeers(r,g){yield*this.libp2p.peerRouting.getClosestPeers(r,g)}}function libp2pRouting(n){return new Libp2pRouter(n)}class HeliaP2P extends Helia{libp2p;constructor(r){super({...r,components:{libp2p:r.libp2p}}),this.libp2p=r.libp2p}async start(){await super.start(),await this.libp2p.start()}async stop(){await super.stop(),await this.libp2p.stop()}}class QueuelessPushable{readNext;haveNext;ended;nextResult;constructor(){this.ended=!1,this.readNext=pDefer(),this.haveNext=pDefer()}[Symbol.asyncIterator](){return this}async next(){if(this.nextResult==null&&await this.haveNext.promise,this.nextResult==null)throw new Error("HaveNext promise resolved but nextResult was undefined");const r=this.nextResult;return this.nextResult=void 0,this.readNext.resolve(),this.readNext=pDefer(),r}async throw(r){return this.ended=!0,r!=null&&(this.haveNext.promise.catch(()=>{}),this.haveNext.reject(r)),{done:!0,value:void 0}}async return(){const r={done:!0,value:void 0};return await this._push(void 0),r}async push(r,g){await this._push(r,g)}async end(r,g){r!=null?await this.throw(r):await this._push(void 0,g)}async _push(r,g){if(r!=null&&this.ended)throw new Error("Cannot push value onto an ended pushable");for(;this.nextResult!=null;)await this.readNext.promise;r!=null?this.nextResult={done:!1,value:r}:(this.ended=!0,this.nextResult={done:!0,value:void 0}),this.haveNext.resolve(),this.haveNext=pDefer(),await raceSignal(this.readNext.promise,g?.signal,g)}}function queuelessPushable(){return new QueuelessPushable}class UnexpectedEOFError extends Error{name="UnexpectedEOFError";code="ERR_UNEXPECTED_EOF"}class CodeError extends Error{code;constructor(r,g){super(r),this.code=g}}let AbortError$1=class extends CodeError{type;constructor(r){super(r,"ABORT_ERR"),this.type="aborted",this.name="AbortError"}};function byteStream(n,r){const g=queuelessPushable();n.sink(g).catch(async E=>{await g.end(E)}),n.sink=async E=>{for await(const C of E)await g.push(C);await g.end()};let _=n.source;n.source[Symbol.iterator]!=null?_=n.source[Symbol.iterator]():n.source[Symbol.asyncIterator]!=null&&(_=n.source[Symbol.asyncIterator]());const x=new Uint8ArrayList;return{read:async(E,C)=>{C?.signal?.throwIfAborted();let T;const R=new Promise((A,I)=>{T=()=>{I(new AbortError$1("Read aborted"))},C?.signal?.addEventListener("abort",T)});try{if(E==null){const{done:I,value:B}=await Promise.race([_.next(),R]);return I===!0?new Uint8ArrayList:B}for(;x.byteLength<E;){const{value:I,done:B}=await Promise.race([_.next(),R]);if(B===!0)throw new UnexpectedEOFError("unexpected end of input");x.append(I)}const A=x.sublist(0,E);return x.consume(E),A}finally{T!=null&&C?.signal?.removeEventListener("abort",T)}},write:async(E,C)=>{C?.signal?.throwIfAborted(),E instanceof Uint8Array?await g.push(E,C):await g.push(E.subarray(),C)},unwrap:()=>{if(x.byteLength>0){const E=n.source;n.source=async function*(){r?.yieldBytes===!1?yield x:yield*x,yield*E}()}return n}}}class InvalidMessageLengthError extends Error{name="InvalidMessageLengthError";code="ERR_INVALID_MSG_LENGTH"}class InvalidDataLengthError extends Error{name="InvalidDataLengthError";code="ERR_MSG_DATA_TOO_LONG"}class InvalidDataLengthLengthError extends Error{name="InvalidDataLengthLengthError";code="ERR_MSG_LENGTH_TOO_LONG"}function lpStream(n,r={}){const g=byteStream(n,r);r.maxDataLength!=null&&r.maxLengthLength==null&&(r.maxLengthLength=encodingLength(r.maxDataLength));const _=r?.lengthDecoder??decode$a,x=r?.lengthEncoder??encode$d;return{read:async E=>{let C=-1;const T=new Uint8ArrayList;for(;;){T.append(await g.read(1,E));try{C=_(T)}catch(R){if(R instanceof RangeError)continue;throw R}if(C<0)throw new InvalidMessageLengthError("Invalid message length");if(r?.maxLengthLength!=null&&T.byteLength>r.maxLengthLength)throw new InvalidDataLengthLengthError("message length length too long");if(C>-1)break}if(r?.maxDataLength!=null&&C>r.maxDataLength)throw new InvalidDataLengthError("message length too long");return g.read(C,E)},write:async(E,C)=>{await g.write(new Uint8ArrayList(x(E.byteLength),E),C)},writeV:async(E,C)=>{const T=new Uint8ArrayList(...E.flatMap(R=>[x(R.byteLength),R]));await g.write(T,C)},unwrap:()=>g.unwrap()}}function pair(){const n=pDefer();let r=!1;return{sink:async g=>{if(r)throw new Error("already piped");r=!0,n.resolve(g)},source:async function*(){yield*await n.promise}()}}function duplexPair(){const n=pair(),r=pair();return[{source:n.source,sink:r.sink},{source:r.source,sink:n.sink}]}const NOISE_MSG_MAX_LENGTH_BYTES=65535,NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG=NOISE_MSG_MAX_LENGTH_BYTES-16,DUMP_SESSION_KEYS=!!globalThis.process?.env?.DUMP_SESSION_KEYS;function number(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function bool(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function isBytes(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function bytes(n,...r){if(!isBytes(n))throw new Error("Uint8Array expected");if(r.length>0&&!r.includes(n.length))throw new Error(`Uint8Array expected of length ${r}, not of length=${n.length}`)}function exists(n,r=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(r&&n.finished)throw new Error("Hash#digest() has already been called")}function output(n,r){bytes(n);const g=r.outputLen;if(n.length<g)throw new Error(`digestInto() expects output buffer of length at least ${g}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const u32=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),createView=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes(n){if(typeof n!="string")throw new Error(`string expected, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function toBytes(n){if(typeof n=="string")n=utf8ToBytes(n);else if(isBytes(n))n=copyBytes(n);else throw new Error(`Uint8Array expected, got ${typeof n}`);return n}function checkOpts(n,r){if(r==null||typeof r!="object")throw new Error("options must be defined");return Object.assign(n,r)}function equalBytes(n,r){if(n.length!==r.length)return!1;let g=0;for(let _=0;_<n.length;_++)g|=n[_]^r[_];return g===0}const wrapCipher=(n,r)=>(Object.assign(r,n),r);function setBigUint64(n,r,g,_){if(typeof n.setBigUint64=="function")return n.setBigUint64(r,g,_);const x=BigInt(32),S=BigInt(4294967295),E=Number(g>>x&S),C=Number(g&S),T=4,R=0;n.setUint32(r+T,E,_),n.setUint32(r+R,C,_)}function copyBytes(n){return Uint8Array.from(n)}function clean$1(...n){for(let r=0;r<n.length;r++)n[r].fill(0)}const _utf8ToBytes=n=>Uint8Array.from(n.split("").map(r=>r.charCodeAt(0))),sigma16=_utf8ToBytes("expand 16-byte k"),sigma32=_utf8ToBytes("expand 32-byte k"),sigma16_32=u32(sigma16),sigma32_32=u32(sigma32);sigma32_32.slice();function rotl(n,r){return n<<r|n>>>32-r}function isAligned32(n){return n.byteOffset%4===0}const BLOCK_LEN=64,BLOCK_LEN32=16,MAX_COUNTER=2**32-1,U32_EMPTY=new Uint32Array;function runCipher(n,r,g,_,x,S,E,C){const T=x.length,R=new Uint8Array(BLOCK_LEN),A=u32(R),I=isAligned32(x)&&isAligned32(S),B=I?u32(x):U32_EMPTY,D=I?u32(S):U32_EMPTY;for(let N=0;N<T;E++){if(n(r,g,_,A,E,C),E>=MAX_COUNTER)throw new Error("arx: counter overflow");const M=Math.min(BLOCK_LEN,T-N);if(I&&M===BLOCK_LEN){const O=N/4;if(N%4!==0)throw new Error("arx: invalid block position");for(let L=0,F;L<BLOCK_LEN32;L++)F=O+L,D[F]=B[F]^A[L];N+=BLOCK_LEN;continue}for(let O=0,L;O<M;O++)L=N+O,S[L]=x[L]^R[O];N+=M}}function createCipher(n,r){const{allowShortKeys:g,extendNonceFn:_,counterLength:x,counterRight:S,rounds:E}=checkOpts({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},r);if(typeof n!="function")throw new Error("core must be a function");return number(x),number(E),bool(S),bool(g),(C,T,R,A,I=0)=>{bytes(C),bytes(T),bytes(R);const B=R.length;if(A===void 0&&(A=new Uint8Array(B)),bytes(A),number(I),I<0||I>=MAX_COUNTER)throw new Error("arx: counter overflow");if(A.length<B)throw new Error(`arx: output (${A.length}) is shorter than data (${B})`);const D=[];let N=C.length,M,O;if(N===32)D.push(M=copyBytes(C)),O=sigma32_32;else if(N===16&&g)M=new Uint8Array(32),M.set(C),M.set(C,16),O=sigma16_32,D.push(M);else throw new Error(`arx: invalid 32-byte key, got length=${N}`);isAligned32(T)||D.push(T=copyBytes(T));const L=u32(M);if(_){if(T.length!==24)throw new Error("arx: extended nonce must be 24 bytes");_(O,L,u32(T.subarray(0,16)),L),T=T.subarray(16)}const F=16-x;if(F!==T.length)throw new Error(`arx: nonce must be ${F} or 16 bytes`);if(F!==12){const j=new Uint8Array(12);j.set(T,S?0:12-T.length),T=j,D.push(T)}const U=u32(T);return runCipher(n,O,L,U,R,A,I,E),clean$1(...D),A}}const u8to16=(n,r)=>n[r++]&255|(n[r++]&255)<<8;class Poly1305{constructor(r){this.blockLen=16,this.outputLen=16,this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.pos=0,this.finished=!1,r=toBytes(r),bytes(r,32);const g=u8to16(r,0),_=u8to16(r,2),x=u8to16(r,4),S=u8to16(r,6),E=u8to16(r,8),C=u8to16(r,10),T=u8to16(r,12),R=u8to16(r,14);this.r[0]=g&8191,this.r[1]=(g>>>13|_<<3)&8191,this.r[2]=(_>>>10|x<<6)&7939,this.r[3]=(x>>>7|S<<9)&8191,this.r[4]=(S>>>4|E<<12)&255,this.r[5]=E>>>1&8190,this.r[6]=(E>>>14|C<<2)&8191,this.r[7]=(C>>>11|T<<5)&8065,this.r[8]=(T>>>8|R<<8)&8191,this.r[9]=R>>>5&127;for(let A=0;A<8;A++)this.pad[A]=u8to16(r,16+2*A)}process(r,g,_=!1){const x=_?0:2048,{h:S,r:E}=this,C=E[0],T=E[1],R=E[2],A=E[3],I=E[4],B=E[5],D=E[6],N=E[7],M=E[8],O=E[9],L=u8to16(r,g+0),F=u8to16(r,g+2),U=u8to16(r,g+4),j=u8to16(r,g+6),z=u8to16(r,g+8),W=u8to16(r,g+10),X=u8to16(r,g+12),ie=u8to16(r,g+14);let fe=S[0]+(L&8191),xe=S[1]+((L>>>13|F<<3)&8191),we=S[2]+((F>>>10|U<<6)&8191),G=S[3]+((U>>>7|j<<9)&8191),J=S[4]+((j>>>4|z<<12)&8191),q=S[5]+(z>>>1&8191),H=S[6]+((z>>>14|W<<2)&8191),ve=S[7]+((W>>>11|X<<5)&8191),Z=S[8]+((X>>>8|ie<<8)&8191),ce=S[9]+(ie>>>5|x),ue=0,se=ue+fe*C+xe*(5*O)+we*(5*M)+G*(5*N)+J*(5*D);ue=se>>>13,se&=8191,se+=q*(5*B)+H*(5*I)+ve*(5*A)+Z*(5*R)+ce*(5*T),ue+=se>>>13,se&=8191;let te=ue+fe*T+xe*C+we*(5*O)+G*(5*M)+J*(5*N);ue=te>>>13,te&=8191,te+=q*(5*D)+H*(5*B)+ve*(5*I)+Z*(5*A)+ce*(5*R),ue+=te>>>13,te&=8191;let Y=ue+fe*R+xe*T+we*C+G*(5*O)+J*(5*M);ue=Y>>>13,Y&=8191,Y+=q*(5*N)+H*(5*D)+ve*(5*B)+Z*(5*I)+ce*(5*A),ue+=Y>>>13,Y&=8191;let be=ue+fe*A+xe*R+we*T+G*C+J*(5*O);ue=be>>>13,be&=8191,be+=q*(5*M)+H*(5*N)+ve*(5*D)+Z*(5*B)+ce*(5*I),ue+=be>>>13,be&=8191;let ye=ue+fe*I+xe*A+we*R+G*T+J*C;ue=ye>>>13,ye&=8191,ye+=q*(5*O)+H*(5*M)+ve*(5*N)+Z*(5*D)+ce*(5*B),ue+=ye>>>13,ye&=8191;let Ie=ue+fe*B+xe*I+we*A+G*R+J*T;ue=Ie>>>13,Ie&=8191,Ie+=q*C+H*(5*O)+ve*(5*M)+Z*(5*N)+ce*(5*D),ue+=Ie>>>13,Ie&=8191;let ke=ue+fe*D+xe*B+we*I+G*A+J*R;ue=ke>>>13,ke&=8191,ke+=q*T+H*C+ve*(5*O)+Z*(5*M)+ce*(5*N),ue+=ke>>>13,ke&=8191;let Ce=ue+fe*N+xe*D+we*B+G*I+J*A;ue=Ce>>>13,Ce&=8191,Ce+=q*R+H*T+ve*C+Z*(5*O)+ce*(5*M),ue+=Ce>>>13,Ce&=8191;let Ae=ue+fe*M+xe*N+we*D+G*B+J*I;ue=Ae>>>13,Ae&=8191,Ae+=q*A+H*R+ve*T+Z*C+ce*(5*O),ue+=Ae>>>13,Ae&=8191;let Ne=ue+fe*O+xe*M+we*N+G*D+J*B;ue=Ne>>>13,Ne&=8191,Ne+=q*I+H*A+ve*R+Z*T+ce*C,ue+=Ne>>>13,Ne&=8191,ue=(ue<<2)+ue|0,ue=ue+se|0,se=ue&8191,ue=ue>>>13,te+=ue,S[0]=se,S[1]=te,S[2]=Y,S[3]=be,S[4]=ye,S[5]=Ie,S[6]=ke,S[7]=Ce,S[8]=Ae,S[9]=Ne}finalize(){const{h:r,pad:g}=this,_=new Uint16Array(10);let x=r[1]>>>13;r[1]&=8191;for(let C=2;C<10;C++)r[C]+=x,x=r[C]>>>13,r[C]&=8191;r[0]+=x*5,x=r[0]>>>13,r[0]&=8191,r[1]+=x,x=r[1]>>>13,r[1]&=8191,r[2]+=x,_[0]=r[0]+5,x=_[0]>>>13,_[0]&=8191;for(let C=1;C<10;C++)_[C]=r[C]+x,x=_[C]>>>13,_[C]&=8191;_[9]-=8192;let S=(x^1)-1;for(let C=0;C<10;C++)_[C]&=S;S=~S;for(let C=0;C<10;C++)r[C]=r[C]&S|_[C];r[0]=(r[0]|r[1]<<13)&65535,r[1]=(r[1]>>>3|r[2]<<10)&65535,r[2]=(r[2]>>>6|r[3]<<7)&65535,r[3]=(r[3]>>>9|r[4]<<4)&65535,r[4]=(r[4]>>>12|r[5]<<1|r[6]<<14)&65535,r[5]=(r[6]>>>2|r[7]<<11)&65535,r[6]=(r[7]>>>5|r[8]<<8)&65535,r[7]=(r[8]>>>8|r[9]<<5)&65535;let E=r[0]+g[0];r[0]=E&65535;for(let C=1;C<8;C++)E=(r[C]+g[C]|0)+(E>>>16)|0,r[C]=E&65535;clean$1(_)}update(r){exists(this);const{buffer:g,blockLen:_}=this;r=toBytes(r);const x=r.length;for(let S=0;S<x;){const E=Math.min(_-this.pos,x-S);if(E===_){for(;_<=x-S;S+=_)this.process(r,S);continue}g.set(r.subarray(S,S+E),this.pos),this.pos+=E,S+=E,this.pos===_&&(this.process(g,0,!1),this.pos=0)}return this}destroy(){clean$1(this.h,this.r,this.buffer,this.pad)}digestInto(r){exists(this),output(r,this),this.finished=!0;const{buffer:g,h:_}=this;let{pos:x}=this;if(x){for(g[x++]=1;x<16;x++)g[x]=0;this.process(g,0,!0)}this.finalize();let S=0;for(let E=0;E<8;E++)r[S++]=_[E]>>>0,r[S++]=_[E]>>>8;return r}digest(){const{buffer:r,outputLen:g}=this;this.digestInto(r);const _=r.slice(0,g);return this.destroy(),_}}function wrapConstructorWithKey(n){const r=(_,x)=>n(x).update(toBytes(_)).digest(),g=n(new Uint8Array(32));return r.outputLen=g.outputLen,r.blockLen=g.blockLen,r.create=_=>n(_),r}const poly1305=wrapConstructorWithKey(n=>new Poly1305(n));function chachaCore(n,r,g,_,x,S=20){let E=n[0],C=n[1],T=n[2],R=n[3],A=r[0],I=r[1],B=r[2],D=r[3],N=r[4],M=r[5],O=r[6],L=r[7],F=x,U=g[0],j=g[1],z=g[2],W=E,X=C,ie=T,fe=R,xe=A,we=I,G=B,J=D,q=N,H=M,ve=O,Z=L,ce=F,ue=U,se=j,te=z;for(let be=0;be<S;be+=2)W=W+xe|0,ce=rotl(ce^W,16),q=q+ce|0,xe=rotl(xe^q,12),W=W+xe|0,ce=rotl(ce^W,8),q=q+ce|0,xe=rotl(xe^q,7),X=X+we|0,ue=rotl(ue^X,16),H=H+ue|0,we=rotl(we^H,12),X=X+we|0,ue=rotl(ue^X,8),H=H+ue|0,we=rotl(we^H,7),ie=ie+G|0,se=rotl(se^ie,16),ve=ve+se|0,G=rotl(G^ve,12),ie=ie+G|0,se=rotl(se^ie,8),ve=ve+se|0,G=rotl(G^ve,7),fe=fe+J|0,te=rotl(te^fe,16),Z=Z+te|0,J=rotl(J^Z,12),fe=fe+J|0,te=rotl(te^fe,8),Z=Z+te|0,J=rotl(J^Z,7),W=W+we|0,te=rotl(te^W,16),ve=ve+te|0,we=rotl(we^ve,12),W=W+we|0,te=rotl(te^W,8),ve=ve+te|0,we=rotl(we^ve,7),X=X+G|0,ce=rotl(ce^X,16),Z=Z+ce|0,G=rotl(G^Z,12),X=X+G|0,ce=rotl(ce^X,8),Z=Z+ce|0,G=rotl(G^Z,7),ie=ie+J|0,ue=rotl(ue^ie,16),q=q+ue|0,J=rotl(J^q,12),ie=ie+J|0,ue=rotl(ue^ie,8),q=q+ue|0,J=rotl(J^q,7),fe=fe+xe|0,se=rotl(se^fe,16),H=H+se|0,xe=rotl(xe^H,12),fe=fe+xe|0,se=rotl(se^fe,8),H=H+se|0,xe=rotl(xe^H,7);let Y=0;_[Y++]=E+W|0,_[Y++]=C+X|0,_[Y++]=T+ie|0,_[Y++]=R+fe|0,_[Y++]=A+xe|0,_[Y++]=I+we|0,_[Y++]=B+G|0,_[Y++]=D+J|0,_[Y++]=N+q|0,_[Y++]=M+H|0,_[Y++]=O+ve|0,_[Y++]=L+Z|0,_[Y++]=F+ce|0,_[Y++]=U+ue|0,_[Y++]=j+se|0,_[Y++]=z+te|0}const chacha20=createCipher(chachaCore,{counterRight:!1,counterLength:4,allowShortKeys:!1}),ZEROS16=new Uint8Array(16),updatePadded=(n,r)=>{n.update(r);const g=r.length%16;g&&n.update(ZEROS16.subarray(g))},ZEROS32=new Uint8Array(32);function computeTag(n,r,g,_,x){const S=n(r,g,ZEROS32),E=poly1305.create(S);x&&updatePadded(E,x),updatePadded(E,_);const C=new Uint8Array(16),T=createView(C);setBigUint64(T,0,BigInt(x?x.length:0),!0),setBigUint64(T,8,BigInt(_.length),!0),E.update(C);const R=E.digest();return clean$1(S,C),R}const _poly1305_aead=n=>(r,g,_)=>(bytes(r,32),bytes(g),{encrypt(S,E){const C=S.length,T=C+16;E?bytes(E,T):E=new Uint8Array(T),n(r,g,S,E,1);const R=computeTag(n,r,g,E.subarray(0,-16),_);return E.set(R,C),clean$1(R),E},decrypt(S,E){const C=S.length,T=C-16;if(C<16)throw new Error("encrypted data must be at least 16 bytes");E?bytes(E,T):E=new Uint8Array(T);const R=S.subarray(0,-16),A=S.subarray(-16),I=computeTag(n,r,g,R,_);if(!equalBytes(A,I))throw new Error("invalid tag");return n(r,g,R,E,1),clean$1(I),E}}),chacha20poly1305=wrapCipher({blockSize:64,nonceLength:12,tagLength:16},_poly1305_aead(chacha20));function extract(n,r,g){return ahash(n),g===void 0&&(g=new Uint8Array(n.outputLen)),hmac(n,toBytes$2(g),toBytes$2(r))}const HKDF_COUNTER=new Uint8Array([0]),EMPTY_BUFFER=new Uint8Array;function expand(n,r,g,_=32){if(ahash(n),anumber(_),_>255*n.outputLen)throw new Error("Length should be <= 255*HashLen");const x=Math.ceil(_/n.outputLen);g===void 0&&(g=EMPTY_BUFFER);const S=new Uint8Array(x*n.outputLen),E=hmac.create(n,r),C=E._cloneInto(),T=new Uint8Array(E.outputLen);for(let R=0;R<x;R++)HKDF_COUNTER[0]=R+1,C.update(R===0?EMPTY_BUFFER:T).update(g).update(HKDF_COUNTER).digestInto(T),S.set(T,n.outputLen*R),E._cloneInto(C);return E.destroy(),C.destroy(),T.fill(0),HKDF_COUNTER.fill(0),S.slice(0,_)}const pureJsCrypto={hashSHA256(n){return sha256$7(n.subarray())},getHKDF(n,r){const g=extract(sha256$7,r,n),x=expand(sha256$7,g,void 0,96),S=x.subarray(0,32),E=x.subarray(32,64),C=x.subarray(64,96);return[S,E,C]},generateX25519KeyPair(){const n=x25519.utils.randomPrivateKey();return{publicKey:x25519.getPublicKey(n),privateKey:n}},generateX25519KeyPairFromSeed(n){return{publicKey:x25519.getPublicKey(n),privateKey:n}},generateX25519SharedKey(n,r){return x25519.getSharedSecret(n.subarray(),r.subarray())},chaCha20Poly1305Encrypt(n,r,g,_){return chacha20poly1305(_,r,g).encrypt(n.subarray())},chaCha20Poly1305Decrypt(n,r,g,_,x){return chacha20poly1305(_,r,g).decrypt(n.subarray(),x)}},defaultCrypto=pureJsCrypto;function wrapCrypto(n){return{generateKeypair:n.generateX25519KeyPair,dh:(r,g)=>n.generateX25519SharedKey(r.privateKey,g).subarray(0,32),encrypt:n.chaCha20Poly1305Encrypt,decrypt:n.chaCha20Poly1305Decrypt,hash:n.hashSHA256,hkdf:n.getHKDF}}const uint16BEEncode=n=>{const r=allocUnsafe(2);return r[0]=n>>8,r[1]=n,r};uint16BEEncode.bytes=2;const uint16BEDecode=n=>{if(n.length<2)throw RangeError("Could not decode int16BE");if(n instanceof Uint8Array){let r=0;return r+=n[0]<<8,r+=n[1],r}return n.getUint16(0)};uint16BEDecode.bytes=2;function registerMetrics(n){return{xxHandshakeSuccesses:n.registerCounter("libp2p_noise_xxhandshake_successes_total",{help:"Total count of noise xxHandshakes successes_"}),xxHandshakeErrors:n.registerCounter("libp2p_noise_xxhandshake_error_total",{help:"Total count of noise xxHandshakes errors"}),encryptedPackets:n.registerCounter("libp2p_noise_encrypted_packets_total",{help:"Total count of noise encrypted packets successfully"}),decryptedPackets:n.registerCounter("libp2p_noise_decrypted_packets_total",{help:"Total count of noise decrypted packets"}),decryptErrors:n.registerCounter("libp2p_noise_decrypt_errors_total",{help:"Total count of noise decrypt errors"})}}function logLocalStaticKeys(n,r){!r.enabled||!DUMP_SESSION_KEYS||(n?(r(`LOCAL_STATIC_PUBLIC_KEY ${toString$3(n.publicKey,"hex")}`),r(`LOCAL_STATIC_PRIVATE_KEY ${toString$3(n.privateKey,"hex")}`)):r("Missing local static keys."))}function logLocalEphemeralKeys(n,r){!r.enabled||!DUMP_SESSION_KEYS||(n?(r(`LOCAL_PUBLIC_EPHEMERAL_KEY ${toString$3(n.publicKey,"hex")}`),r(`LOCAL_PRIVATE_EPHEMERAL_KEY ${toString$3(n.privateKey,"hex")}`)):r("Missing local ephemeral keys."))}function logRemoteStaticKey(n,r){!r.enabled||!DUMP_SESSION_KEYS||r(n?`REMOTE_STATIC_PUBLIC_KEY ${toString$3(n.subarray(),"hex")}`:"Missing remote static public key.")}function logRemoteEphemeralKey(n,r){!r.enabled||!DUMP_SESSION_KEYS||r(n?`REMOTE_EPHEMERAL_PUBLIC_KEY ${toString$3(n.subarray(),"hex")}`:"Missing remote ephemeral keys.")}function logCipherState(n,r,g){!g.enabled||!DUMP_SESSION_KEYS||(g(`CIPHER_STATE_1 ${n.n.getUint64()} ${n.k&&toString$3(n.k,"hex")}`),g(`CIPHER_STATE_2 ${r.n.getUint64()} ${r.k&&toString$3(r.k,"hex")}`))}function xor(n,r){if(n.length!==r.length)throw new Error("Inputs should have the same length");const g=allocUnsafe(n.length);for(let _=0;_<n.length;_++)g[_]=n[_]^r[_];return g}class InvalidCryptoExchangeError extends Error{code;constructor(r="Invalid crypto exchange"){super(r),this.code=InvalidCryptoExchangeError.code}static code="ERR_INVALID_CRYPTO_EXCHANGE"}const MIN_NONCE=0,MAX_NONCE=4294967295,ERR_MAX_NONCE="Cipherstate has reached maximum n, a new handshake must be performed";class Nonce{n;bytes;view;constructor(r=MIN_NONCE){this.n=r,this.bytes=alloc$1(12),this.view=new DataView(this.bytes.buffer,this.bytes.byteOffset,this.bytes.byteLength),this.view.setUint32(4,r,!0)}increment(){this.n++,this.view.setUint32(4,this.n,!0)}getBytes(){return this.bytes}getUint64(){return this.n}assertValue(){if(this.n>MAX_NONCE)throw new Error(ERR_MAX_NONCE)}}const ZEROLEN=alloc$1(0);class CipherState{k;n;crypto;constructor(r,g=void 0,_=0){this.crypto=r,this.k=g,this.n=new Nonce(_)}hasKey(){return!!this.k}encryptWithAd(r,g){if(!this.hasKey())return g;this.n.assertValue();const _=this.crypto.encrypt(g,this.n.getBytes(),r,this.k);return this.n.increment(),_}decryptWithAd(r,g,_){if(!this.hasKey())return g;this.n.assertValue();const x=this.crypto.decrypt(g,this.n.getBytes(),r,this.k,_);return this.n.increment(),x}}class SymmetricState{cs;ck;h;crypto;constructor(r,g){this.crypto=r;const _=fromString(g,"utf-8");this.h=hashProtocolName(r,_),this.ck=this.h,this.cs=new CipherState(r)}mixKey(r){const[g,_]=this.crypto.hkdf(this.ck,r);this.ck=g,this.cs=new CipherState(this.crypto,_)}mixHash(r){this.h=this.crypto.hash(new Uint8ArrayList(this.h,r))}encryptAndHash(r){const g=this.cs.encryptWithAd(this.h,r);return this.mixHash(g),g}decryptAndHash(r){const g=this.cs.decryptWithAd(this.h,r);return this.mixHash(r),g}split(){const[r,g]=this.crypto.hkdf(this.ck,ZEROLEN);return[new CipherState(this.crypto,r),new CipherState(this.crypto,g)]}}class AbstractHandshakeState{ss;s;e;rs;re;initiator;crypto;constructor(r){const{crypto:g,protocolName:_,prologue:x,initiator:S,s:E,e:C,rs:T,re:R}=r;this.crypto=g,this.ss=new SymmetricState(g,_),this.ss.mixHash(x),this.initiator=S,this.s=E,this.e=C,this.rs=T,this.re=R}writeE(){if(this.e)throw new Error("ephemeral keypair is already set");const r=this.crypto.generateKeypair();return this.ss.mixHash(r.publicKey),this.e=r,r.publicKey}writeS(){if(!this.s)throw new Error("static keypair is not set");return this.ss.encryptAndHash(this.s.publicKey)}writeEE(){if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.re))}writeES(){if(this.initiator){if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.rs)throw new Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}else{if(!this.s)throw new Error("static keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}}writeSE(){if(this.initiator){if(!this.s)throw new Error("static keypair is not set");if(!this.re)throw new Error("remote ephemeral public key is not set");this.ss.mixKey(this.crypto.dh(this.s,this.re))}else{if(!this.e)throw new Error("ephemeral keypair is not set");if(!this.rs)throw new Error("remote static public key is not set");this.ss.mixKey(this.crypto.dh(this.e,this.rs))}}readE(r,g=0){if(this.re)throw new Error("remote ephemeral public key is already set");if(r.byteLength<g+32)throw new Error("message is not long enough");this.re=r.sublist(g,g+32),this.ss.mixHash(this.re)}readS(r,g=0){if(this.rs)throw new Error("remote static public key is already set");const _=32+(this.ss.cs.hasKey()?16:0);if(r.byteLength<g+_)throw new Error("message is not long enough");const x=r.sublist(g,g+_);return this.rs=this.ss.decryptAndHash(x),_}readEE(){this.writeEE()}readES(){this.writeES()}readSE(){this.writeSE()}}class XXHandshakeState extends AbstractHandshakeState{writeMessageA(r){return new Uint8ArrayList(this.writeE(),this.ss.encryptAndHash(r))}writeMessageB(r){const g=this.writeE();this.writeEE();const _=this.writeS();return this.writeES(),new Uint8ArrayList(g,_,this.ss.encryptAndHash(r))}writeMessageC(r){const g=this.writeS();return this.writeSE(),new Uint8ArrayList(g,this.ss.encryptAndHash(r))}readMessageA(r){try{return this.readE(r),this.ss.decryptAndHash(r.sublist(32))}catch(g){throw new InvalidCryptoExchangeError(`handshake stage 0 validation fail: ${g.message}`)}}readMessageB(r){try{this.readE(r),this.readEE();const g=this.readS(r,32);return this.readES(),this.ss.decryptAndHash(r.sublist(32+g))}catch(g){throw new InvalidCryptoExchangeError(`handshake stage 1 validation fail: ${g.message}`)}}readMessageC(r){try{const g=this.readS(r);return this.readSE(),this.ss.decryptAndHash(r.sublist(g))}catch(g){throw new InvalidCryptoExchangeError(`handshake stage 2 validation fail: ${g.message}`)}}}function hashProtocolName(n,r){if(r.length<=32){const g=alloc$1(32);return g.set(r),g}else return n.hash(r)}var NoiseExtensions;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.webtransportCerthashes!=null)for(const S of g.webtransportCerthashes)_.uint32(10),_.bytes(S);x.lengthDelimited!==!1&&_.ldelim()},(g,_)=>{const x={webtransportCerthashes:[]},S=_==null?g.len:g.pos+_;for(;g.pos<S;){const E=g.uint32();switch(E>>>3){case 1:{x.webtransportCerthashes.push(g.bytes());break}default:{g.skipType(E&7);break}}}return x})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=g=>decodeMessage(g,n.codec())})(NoiseExtensions||(NoiseExtensions={}));var NoiseHandshakePayload;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.identityKey!=null&&g.identityKey.byteLength>0&&(_.uint32(10),_.bytes(g.identityKey)),g.identitySig!=null&&g.identitySig.byteLength>0&&(_.uint32(18),_.bytes(g.identitySig)),g.extensions!=null&&(_.uint32(34),NoiseExtensions.codec().encode(g.extensions,_)),x.lengthDelimited!==!1&&_.ldelim()},(g,_)=>{const x={identityKey:alloc$1(0),identitySig:alloc$1(0)},S=_==null?g.len:g.pos+_;for(;g.pos<S;){const E=g.uint32();switch(E>>>3){case 1:{x.identityKey=g.bytes();break}case 2:{x.identitySig=g.bytes();break}case 4:{x.extensions=NoiseExtensions.codec().decode(g,g.uint32());break}default:{g.skipType(E&7);break}}}return x})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=g=>decodeMessage(g,n.codec())})(NoiseHandshakePayload||(NoiseHandshakePayload={}));async function createHandshakePayload(n,r,g){const _=await n.sign(getSignaturePayload(r));return NoiseHandshakePayload.encode({identityKey:publicKeyToProtobuf(n.publicKey),identitySig:_,extensions:g})}async function decodeHandshakePayload(n,r,g){try{const _=NoiseHandshakePayload.decode(n),x=publicKeyFromProtobuf(_.identityKey);if(g?.equals(x)===!1)throw new Error(`Payload identity key ${x} does not match expected remote identity key ${g}`);if(!r)throw new Error("Remote static does not exist");const S=getSignaturePayload(r);if(!await x.verify(S,_.identitySig))throw new Error("Invalid payload signature");return _}catch(_){throw new UnexpectedPeerError(_.message)}}function getSignaturePayload(n){const r=fromString("noise-libp2p-static-key:");return n instanceof Uint8Array?concat([r,n],r.length+n.length):(n.prepend(r),n)}async function performHandshakeInitiator(n,r){const{log:g,connection:_,crypto:x,privateKey:S,prologue:E,s:C,remoteIdentityKey:T,extensions:R}=n,A=await createHandshakePayload(S,C.publicKey,R),I=new XXHandshakeState({crypto:x,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!0,prologue:E,s:C});logLocalStaticKeys(I.s,g),g.trace("Stage 0 - Initiator starting to send first message."),await _.write(I.writeMessageA(ZEROLEN),r),g.trace("Stage 0 - Initiator finished sending first message."),logLocalEphemeralKeys(I.e,g),g.trace("Stage 1 - Initiator waiting to receive first message from responder...");const B=I.readMessageB(await _.read(r));g.trace("Stage 1 - Initiator received the message."),logRemoteEphemeralKey(I.re,g),logRemoteStaticKey(I.rs,g),g.trace("Initiator going to check remote's signature...");const D=await decodeHandshakePayload(B,I.rs,T);g.trace("All good with the signature!"),g.trace("Stage 2 - Initiator sending third handshake message."),await _.write(I.writeMessageC(A),r),g.trace("Stage 2 - Initiator sent message with signed payload.");const[N,M]=I.ss.split();return logCipherState(N,M,g),{payload:D,encrypt:O=>N.encryptWithAd(ZEROLEN,O),decrypt:(O,L)=>M.decryptWithAd(ZEROLEN,O,L)}}async function performHandshakeResponder(n,r){const{log:g,connection:_,crypto:x,privateKey:S,prologue:E,s:C,remoteIdentityKey:T,extensions:R}=n,A=await createHandshakePayload(S,C.publicKey,R),I=new XXHandshakeState({crypto:x,protocolName:"Noise_XX_25519_ChaChaPoly_SHA256",initiator:!1,prologue:E,s:C});logLocalStaticKeys(I.s,g),g.trace("Stage 0 - Responder waiting to receive first message."),I.readMessageA(await _.read(r)),g.trace("Stage 0 - Responder received first message."),logRemoteEphemeralKey(I.re,g),g.trace("Stage 1 - Responder sending out first message with signed payload and static key."),await _.write(I.writeMessageB(A),r),g.trace("Stage 1 - Responder sent the second handshake message with signed payload."),logLocalEphemeralKeys(I.e,g),g.trace("Stage 2 - Responder waiting for third handshake message...");const B=I.readMessageC(await _.read(r));g.trace("Stage 2 - Responder received the message, finished handshake.");const D=await decodeHandshakePayload(B,I.rs,T),[N,M]=I.ss.split();return logCipherState(N,M,g),{payload:D,encrypt:O=>M.encryptWithAd(ZEROLEN,O),decrypt:(O,L)=>N.decryptWithAd(ZEROLEN,O,L)}}const CHACHA_TAG_LENGTH=16;function encryptStream(n,r){return async function*(g){for await(const _ of g)for(let x=0;x<_.length;x+=NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG){let S=x+NOISE_MSG_MAX_LENGTH_BYTES_WITHOUT_TAG;S>_.length&&(S=_.length);let E;_ instanceof Uint8Array?E=n.encrypt(_.subarray(x,S)):E=n.encrypt(_.sublist(x,S)),r?.encryptedPackets.increment(),yield new Uint8ArrayList(uint16BEEncode(E.byteLength),E)}}}function decryptStream(n,r){return async function*(g){for await(const _ of g)for(let x=0;x<_.length;x+=NOISE_MSG_MAX_LENGTH_BYTES){let S=x+NOISE_MSG_MAX_LENGTH_BYTES;if(S>_.length&&(S=_.length),S-CHACHA_TAG_LENGTH<x)throw new Error("Invalid chunk");const E=_.sublist(x,S),C=_.subarray(x,S-CHACHA_TAG_LENGTH);try{const T=n.decrypt(E,C);r?.decryptedPackets.increment(),yield T}catch(T){throw r?.decryptErrors.increment(),T}}}}class Noise{protocol="/noise";crypto;prologue;staticKey;extensions;metrics;components;constructor(r,g={}){const{staticNoiseKey:_,extensions:x,crypto:S,prologueBytes:E}=g,{metrics:C}=r;this.components=r;const T=S??defaultCrypto;this.crypto=wrapCrypto(T),this.extensions=x,this.metrics=C?registerMetrics(C):void 0,_?this.staticKey=T.generateX25519KeyPairFromSeed(_):this.staticKey=T.generateX25519KeyPair(),this.prologue=E??alloc$1(0)}[Symbol.toStringTag]="@chainsafe/libp2p-noise";[serviceCapabilities]=["@libp2p/connection-encryption","@chainsafe/libp2p-noise"];async secureOutbound(r,g){const _=lpStream(r,{lengthEncoder:uint16BEEncode,lengthDecoder:uint16BEDecode,maxDataLength:NOISE_MSG_MAX_LENGTH_BYTES}),x=await this.performHandshakeInitiator(_,this.components.privateKey,g?.remotePeer?.publicKey,g),S=await this.createSecureConnection(_,x);r.source=S.source,r.sink=S.sink;const E=publicKeyFromProtobuf(x.payload.identityKey);return{conn:r,remoteExtensions:x.payload.extensions,remotePeer:peerIdFromPublicKey(E)}}async secureInbound(r,g){const _=lpStream(r,{lengthEncoder:uint16BEEncode,lengthDecoder:uint16BEDecode,maxDataLength:NOISE_MSG_MAX_LENGTH_BYTES}),x=await this.performHandshakeResponder(_,this.components.privateKey,g?.remotePeer?.publicKey,g),S=await this.createSecureConnection(_,x);r.source=S.source,r.sink=S.sink;const E=publicKeyFromProtobuf(x.payload.identityKey);return{conn:r,remoteExtensions:x.payload.extensions,remotePeer:peerIdFromPublicKey(E)}}async performHandshakeInitiator(r,g,_,x){let S;try{S=await performHandshakeInitiator({connection:r,privateKey:g,remoteIdentityKey:_,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:this.extensions},x),this.metrics?.xxHandshakeSuccesses.increment()}catch(E){throw this.metrics?.xxHandshakeErrors.increment(),E}return S}async performHandshakeResponder(r,g,_,x){let S;try{S=await performHandshakeResponder({connection:r,privateKey:g,remoteIdentityKey:_,log:this.components.logger.forComponent("libp2p:noise:xxhandshake"),crypto:this.crypto,prologue:this.prologue,s:this.staticKey,extensions:this.extensions},x),this.metrics?.xxHandshakeSuccesses.increment()}catch(E){throw this.metrics?.xxHandshakeErrors.increment(),E}return S}async createSecureConnection(r,g){const[_,x]=duplexPair(),S=r.unwrap();return await pipe(_,encryptStream(g,this.metrics),S,E=>decode$2(E,{lengthDecoder:uint16BEDecode}),decryptStream(g,this.metrics),_),x}}function noise(n={}){return r=>new Noise(r,n)}function getIterator(n){if(n!=null){if(typeof n[Symbol.iterator]=="function")return n[Symbol.iterator]();if(typeof n[Symbol.asyncIterator]=="function")return n[Symbol.asyncIterator]();if(typeof n.next=="function")return n}throw new Error("argument is not an iterator or iterable")}class InvalidFrameError extends Error{static name="InvalidFrameError";constructor(r="The frame was invalid"){super(r),this.name="InvalidFrameError"}}class UnrequestedPingError extends Error{static name="UnrequestedPingError";constructor(r="Unrequested ping error"){super(r),this.name="UnrequestedPingError"}}class NotMatchingPingError extends Error{static name="NotMatchingPingError";constructor(r="Unrequested ping error"){super(r),this.name="NotMatchingPingError"}}class InvalidStateError extends Error{static name="InvalidStateError";constructor(r="Invalid state"){super(r),this.name="InvalidStateError"}}class StreamAlreadyExistsError extends Error{static name="StreamAlreadyExistsError";constructor(r="Strean already exists"){super(r),this.name="StreamAlreadyExistsError"}}class DecodeInvalidVersionError extends Error{static name="DecodeInvalidVersionError";constructor(r="Decode invalid version"){super(r),this.name="DecodeInvalidVersionError"}}class BothClientsError extends Error{static name="BothClientsError";constructor(r="Both clients"){super(r),this.name="BothClientsError"}}class ReceiveWindowExceededError extends Error{static name="ReceiveWindowExceededError";constructor(r="Receive window exceeded"){super(r),this.name="ReceiveWindowExceededError"}}const PROTOCOL_ERRORS=new Set([InvalidFrameError.name,UnrequestedPingError.name,NotMatchingPingError.name,StreamAlreadyExistsError.name,DecodeInvalidVersionError.name,BothClientsError.name,ReceiveWindowExceededError.name]),INITIAL_STREAM_WINDOW=256*1024,MAX_STREAM_WINDOW=16*1024*1024,defaultConfig={enableKeepAlive:!0,keepAliveInterval:3e4,maxInboundStreams:1e3,maxOutboundStreams:1e3,initialStreamWindowSize:INITIAL_STREAM_WINDOW,maxStreamWindowSize:MAX_STREAM_WINDOW,maxMessageSize:64*1024};function verifyConfig(n){if(n.keepAliveInterval<=0)throw new InvalidParametersError("keep-alive interval must be positive");if(n.maxInboundStreams<0)throw new InvalidParametersError("max inbound streams must be larger or equal 0");if(n.maxOutboundStreams<0)throw new InvalidParametersError("max outbound streams must be larger or equal 0");if(n.initialStreamWindowSize<INITIAL_STREAM_WINDOW)throw new InvalidParametersError("InitialStreamWindowSize must be larger or equal 256 kB");if(n.maxStreamWindowSize<n.initialStreamWindowSize)throw new InvalidParametersError("MaxStreamWindowSize must be larger than the InitialStreamWindowSize");if(n.maxStreamWindowSize>2**32-1)throw new InvalidParametersError("MaxStreamWindowSize must be less than equal MAX_UINT32");if(n.maxMessageSize<1024)throw new InvalidParametersError("MaxMessageSize must be greater than a kilobyte")}var FrameType;(function(n){n[n.Data=0]="Data",n[n.WindowUpdate=1]="WindowUpdate",n[n.Ping=2]="Ping",n[n.GoAway=3]="GoAway"})(FrameType||(FrameType={}));var Flag;(function(n){n[n.SYN=1]="SYN",n[n.ACK=2]="ACK",n[n.FIN=4]="FIN",n[n.RST=8]="RST"})(Flag||(Flag={}));Object.values(Flag).filter(n=>typeof n!="string");const YAMUX_VERSION=0;var GoAwayCode;(function(n){n[n.NormalTermination=0]="NormalTermination",n[n.ProtocolError=1]="ProtocolError",n[n.InternalError=2]="InternalError"})(GoAwayCode||(GoAwayCode={}));const HEADER_LENGTH=12,twoPow24=2**24;function decodeHeader(n){if(n[0]!==YAMUX_VERSION)throw new InvalidFrameError("Invalid frame version");return{type:n[1],flag:(n[2]<<8)+n[3],streamID:n[4]*twoPow24+(n[5]<<16)+(n[6]<<8)+n[7],length:n[8]*twoPow24+(n[9]<<16)+(n[10]<<8)+n[11]}}let Decoder$2=class{source;buffer;frameInProgress;constructor(r){this.source=returnlessSource(r),this.buffer=new Uint8ArrayList,this.frameInProgress=!1}async*emitFrames(){for await(const r of this.source)for(this.buffer.append(r);;){const g=this.readHeader();if(g===void 0)break;const{type:_,length:x}=g;_===FrameType.Data?(this.frameInProgress=!0,yield{header:g,readData:this.readBytes.bind(this,x)}):yield{header:g}}}readHeader(){if(this.frameInProgress)throw new InvalidStateError("decoding frame already in progress");if(this.buffer.length<HEADER_LENGTH)return;const r=decodeHeader(this.buffer.subarray(0,HEADER_LENGTH));return this.buffer.consume(HEADER_LENGTH),r}async readBytes(r){if(this.buffer.length<r){for await(const _ of this.source)if(this.buffer.append(_),this.buffer.length>=r)break}const g=this.buffer.sublist(0,r);return this.buffer.consume(r),this.frameInProgress=!1,g}};function returnlessSource(n){if(n[Symbol.iterator]!==void 0){const r=n[Symbol.iterator]();return r.return=void 0,{[Symbol.iterator](){return r}}}else if(n[Symbol.asyncIterator]!==void 0){const r=n[Symbol.asyncIterator]();return r.return=void 0,{[Symbol.asyncIterator](){return r}}}else throw new Error("a source must be either an iterable or an async iterable")}function encodeHeader(n){const r=new Uint8Array(HEADER_LENGTH);return r[1]=n.type,r[2]=n.flag>>>8,r[3]=n.flag,r[4]=n.streamID>>>24,r[5]=n.streamID>>>16,r[6]=n.streamID>>>8,r[7]=n.streamID,r[8]=n.length>>>24,r[9]=n.length>>>16,r[10]=n.length>>>8,r[11]=n.length,r}function isPromise$2(n){return n==null?!1:typeof n.then=="function"&&typeof n.catch=="function"&&typeof n.finally=="function"}function closeSource(n,r){const g=getIterator(n).return?.();isPromise$2(g)&&g.catch(_=>{r.error("could not cause iterator to return",_)})}const DEFAULT_SEND_CLOSE_WRITE_TIMEOUT=5e3;function isPromise$1(n){return n==null?!1:typeof n.then=="function"&&typeof n.catch=="function"&&typeof n.finally=="function"}class AbstractStream{id;direction;timeline;protocol;metadata;source;status;readStatus;writeStatus;log;sinkController;sinkEnd;closed;endErr;streamSource;onEnd;onCloseRead;onCloseWrite;onReset;onAbort;sendCloseWriteTimeout;sendingData;constructor(r){this.sinkController=new AbortController,this.sinkEnd=pDefer(),this.closed=pDefer(),this.log=r.log,this.status="open",this.readStatus="ready",this.writeStatus="ready",this.id=r.id,this.metadata=r.metadata??{},this.direction=r.direction,this.timeline={open:Date.now()},this.sendCloseWriteTimeout=r.sendCloseWriteTimeout??DEFAULT_SEND_CLOSE_WRITE_TIMEOUT,this.onEnd=r.onEnd,this.onCloseRead=r?.onCloseRead,this.onCloseWrite=r?.onCloseWrite,this.onReset=r?.onReset,this.onAbort=r?.onAbort,this.source=this.streamSource=pushable({onEnd:g=>{g!=null?this.log.trace("source ended with error",g):this.log.trace("source ended"),this.onSourceEnd(g)}}),this.sink=this.sink.bind(this)}async sink(r){if(this.writeStatus!=="ready")throw new StreamStateError(`writable end state is "${this.writeStatus}" not "ready"`);try{this.writeStatus="writing";const g={signal:this.sinkController.signal};if(this.direction==="outbound"){const x=this.sendNewStream(g);isPromise$1(x)&&await x}const _=()=>{closeSource(r,this.log)};try{this.sinkController.signal.addEventListener("abort",_),this.log.trace("sink reading from source");for await(let x of r){x=x instanceof Uint8Array?new Uint8ArrayList(x):x;const S=this.sendData(x,g);isPromise$1(S)&&(this.sendingData=pDefer(),await S,this.sendingData.resolve(),this.sendingData=void 0)}}finally{this.sinkController.signal.removeEventListener("abort",_)}this.log.trace('sink finished reading from source, write status is "%s"',this.writeStatus),this.writeStatus==="writing"&&(this.writeStatus="closing",this.log.trace("send close write to remote"),await this.sendCloseWrite({signal:AbortSignal.timeout(this.sendCloseWriteTimeout)}),this.writeStatus="closed"),this.onSinkEnd()}catch(g){throw this.log.trace("sink ended with error, calling abort with error",g),this.abort(g),g}finally{this.log.trace("resolve sink end"),this.sinkEnd.resolve()}}onSourceEnd(r){this.timeline.closeRead==null&&(this.timeline.closeRead=Date.now(),this.readStatus="closed",r!=null&&this.endErr==null&&(this.endErr=r),this.onCloseRead?.(),this.timeline.closeWrite!=null?(this.log.trace("source and sink ended"),this.timeline.close=Date.now(),this.status!=="aborted"&&this.status!=="reset"&&(this.status="closed"),this.onEnd!=null&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("source ended, waiting for sink to end"))}onSinkEnd(r){this.timeline.closeWrite==null&&(this.timeline.closeWrite=Date.now(),this.writeStatus="closed",r!=null&&this.endErr==null&&(this.endErr=r),this.onCloseWrite?.(),this.timeline.closeRead!=null?(this.log.trace("sink and source ended"),this.timeline.close=Date.now(),this.status!=="aborted"&&this.status!=="reset"&&(this.status="closed"),this.onEnd!=null&&this.onEnd(this.endErr),this.closed.resolve()):this.log.trace("sink ended, waiting for source to end"))}async close(r){this.status==="open"&&(this.log.trace("closing gracefully"),this.status="closing",await raceSignal(Promise.all([this.closeWrite(r),this.closeRead(r),this.closed.promise]),r?.signal),this.status="closed",this.log.trace("closed gracefully"))}async closeRead(r={}){if(this.readStatus==="closing"||this.readStatus==="closed")return;this.log.trace('closing readable end of stream with starting read status "%s"',this.readStatus);const g=this.readStatus;this.readStatus="closing",this.status!=="reset"&&this.status!=="aborted"&&this.timeline.closeRead==null&&(this.log.trace("send close read to remote"),await this.sendCloseRead(r)),g==="ready"&&(this.log.trace("ending internal source queue with %d queued bytes",this.streamSource.readableLength),this.streamSource.end()),this.log.trace("closed readable end of stream")}async closeWrite(r={}){this.writeStatus==="closing"||this.writeStatus==="closed"||(this.log.trace('closing writable end of stream with starting write status "%s"',this.writeStatus),this.writeStatus==="ready"&&(this.log.trace("sink was never sunk, sink an empty array"),await raceSignal(this.sink([]),r.signal)),this.writeStatus==="writing"&&(this.sendingData!=null&&await raceSignal(this.sendingData.promise,r.signal),this.log.trace("aborting source passed to .sink"),this.sinkController.abort(),await raceSignal(this.sinkEnd.promise,r.signal)),this.writeStatus="closed",this.log.trace("closed writable end of stream"))}abort(r){if(this.status==="closed"||this.status==="aborted"||this.status==="reset")return;this.log("abort with error",r),this.log("try to send reset to remote");const g=this.sendReset();isPromise$1(g)&&g.catch(_=>{this.log.error("error sending reset message",_)}),this.status="aborted",this.timeline.abort=Date.now(),this._closeSinkAndSource(r),this.onAbort?.(r)}reset(){if(this.status==="closed"||this.status==="aborted"||this.status==="reset")return;const r=new StreamResetError("stream reset");this.status="reset",this.timeline.reset=Date.now(),this._closeSinkAndSource(r),this.onReset?.()}_closeSinkAndSource(r){this._closeSink(r),this._closeSource(r)}_closeSink(r){this.writeStatus==="writing"&&(this.log.trace("end sink source"),this.sinkController.abort()),this.onSinkEnd(r)}_closeSource(r){this.readStatus!=="closing"&&this.readStatus!=="closed"&&(this.log.trace("ending source with %d bytes to be read by consumer",this.streamSource.readableLength),this.readStatus="closing",this.streamSource.end(r))}remoteCloseWrite(){if(this.readStatus==="closing"||this.readStatus==="closed"){this.log("received remote close write but local source is already closed");return}this.log.trace("remote close write"),this._closeSource()}remoteCloseRead(){if(this.writeStatus==="closing"||this.writeStatus==="closed"){this.log("received remote close read but local sink is already closed");return}this.log.trace("remote close read"),this._closeSink()}destroy(){if(this.status==="closed"||this.status==="aborted"||this.status==="reset"){this.log("received destroy but we are already closed");return}this.log.trace("stream destroyed"),this._closeSinkAndSource()}sourcePush(r){this.streamSource.push(r)}sourceReadableLength(){return this.streamSource.readableLength}}var StreamState;(function(n){n[n.Init=0]="Init",n[n.SYNSent=1]="SYNSent",n[n.SYNReceived=2]="SYNReceived",n[n.Established=3]="Established",n[n.Finished=4]="Finished"})(StreamState||(StreamState={}));class YamuxStream extends AbstractStream{name;state;config;_id;sendWindowCapacity;sendWindowCapacityUpdate;recvWindow;recvWindowCapacity;epochStart;getRTT;sendFrame;constructor(r){super({...r,onEnd:g=>{this.state=StreamState.Finished,r.onEnd?.(g)}}),this.config=r.config,this._id=parseInt(r.id,10),this.name=r.name,this.state=r.state,this.sendWindowCapacity=INITIAL_STREAM_WINDOW,this.recvWindow=this.config.initialStreamWindowSize,this.recvWindowCapacity=this.recvWindow,this.epochStart=Date.now(),this.getRTT=r.getRTT,this.sendFrame=r.sendFrame,this.source=forEach(this.source,()=>{this.sendWindowUpdate()})}async sendNewStream(){}async sendData(r,g={}){for(r=r.sublist();r.byteLength!==0;){if(this.sendWindowCapacity===0&&(this.log?.trace("wait for send window capacity, status %s",this.status),await this.waitForSendWindowCapacity(g),this.status==="closed"||this.status==="aborted"||this.status==="reset")){this.log?.trace("%s while waiting for send window capacity",this.status);return}const _=Math.min(this.sendWindowCapacity,this.config.maxMessageSize-HEADER_LENGTH,r.length),x=this.getSendFlags();this.sendFrame({type:FrameType.Data,flag:x,streamID:this._id,length:_},r.sublist(0,_)),this.sendWindowCapacity-=_,r.consume(_)}}async sendReset(){this.sendFrame({type:FrameType.WindowUpdate,flag:Flag.RST,streamID:this._id,length:0})}async sendCloseWrite(){const r=this.getSendFlags()|Flag.FIN;this.sendFrame({type:FrameType.WindowUpdate,flag:r,streamID:this._id,length:0})}async sendCloseRead(){}async waitForSendWindowCapacity(r={}){if(this.sendWindowCapacity>0)return;let g,_;const x=()=>{this.status==="open"||this.status==="closing"?_(new AbortError$4("Stream aborted")):g()};r.signal?.addEventListener("abort",x);try{await new Promise((S,E)=>{this.sendWindowCapacityUpdate=()=>{S()},_=E,g=S})}finally{r.signal?.removeEventListener("abort",x)}}handleWindowUpdate(r){this.log?.trace("stream received window update id=%s",this._id),this.processFlags(r.flag);const g=this.sendWindowCapacity;this.sendWindowCapacity+=r.length,g===0&&r.length>0&&this.sendWindowCapacityUpdate?.()}async handleData(r,g){if(this.log?.trace("stream received data id=%s",this._id),this.processFlags(r.flag),this.recvWindowCapacity<r.length)throw new ReceiveWindowExceededError("Receive window exceeded");const _=await g();this.recvWindowCapacity-=r.length,this.sourcePush(_)}processFlags(r){(r&Flag.ACK)===Flag.ACK&&this.state===StreamState.SYNSent&&(this.state=StreamState.Established),(r&Flag.FIN)===Flag.FIN&&this.remoteCloseWrite(),(r&Flag.RST)===Flag.RST&&this.reset()}getSendFlags(){switch(this.state){case StreamState.Init:return this.state=StreamState.SYNSent,Flag.SYN;case StreamState.SYNReceived:return this.state=StreamState.Established,Flag.ACK;default:return 0}}sendWindowUpdate(){const r=this.getSendFlags(),g=Date.now(),_=this.getRTT();if(r===0&&_>-1&&g-this.epochStart<_*4&&(this.recvWindow=Math.min(this.recvWindow*2,this.config.maxStreamWindowSize)),this.recvWindowCapacity>=this.recvWindow&&r===0)return;const x=this.recvWindow-this.recvWindowCapacity;this.recvWindowCapacity=this.recvWindow,this.epochStart=g,this.sendFrame({type:FrameType.WindowUpdate,flag:r,streamID:this._id,length:x})}}const YAMUX_PROTOCOL_ID="/yamux/1.0.0",CLOSE_TIMEOUT$3=500;class Yamux{protocol=YAMUX_PROTOCOL_ID;_components;_init;constructor(r,g={}){this._components=r,this._init=g}[Symbol.toStringTag]="@chainsafe/libp2p-yamux";[serviceCapabilities]=["@libp2p/stream-multiplexing"];createStreamMuxer(r){return new YamuxMuxer(this._components,{...this._init,...r})}}class YamuxMuxer{protocol=YAMUX_PROTOCOL_ID;source;sink;config;log;logger;closeController;nextStreamID;_streams;nextPingID;activePing;rtt;client;localGoAway;remoteGoAway;numInboundStreams;numOutboundStreams;onIncomingStream;onStreamEnd;constructor(r,g){this.client=g.direction==="outbound",this.config={...defaultConfig,...g},this.logger=r.logger,this.log=this.logger.forComponent("libp2p:yamux"),verifyConfig(this.config),this.closeController=new AbortController,setMaxListeners(1/0,this.closeController.signal),this.onIncomingStream=g.onIncomingStream,this.onStreamEnd=g.onStreamEnd,this._streams=new Map,this.source=pushable({onEnd:()=>{this.log?.trace("muxer source ended"),this._streams.forEach(_=>{_.destroy()})}}),this.sink=async _=>{const x=()=>{const C=getIterator(_);if(C.return!=null){const T=C.return();isPromise(T)&&T.catch(R=>{this.log?.("could not cause sink source to return",R)})}};let S,E;try{const C=new Decoder$2(_);try{this.closeController.signal.addEventListener("abort",x);for await(const T of C.emitFrames())await this.handleFrame(T.header,T.readData)}finally{this.closeController.signal.removeEventListener("abort",x)}S=GoAwayCode.NormalTermination}catch(C){PROTOCOL_ERRORS.has(C.name)?(this.log?.error("protocol error in sink",C),S=GoAwayCode.ProtocolError):(this.log?.error("internal error in sink",C),S=GoAwayCode.InternalError),E=C}this.log?.trace("muxer sink ended"),E!=null?this.abort(E,S):await this.close({reason:S})},this.numInboundStreams=0,this.numOutboundStreams=0,this.nextStreamID=this.client?1:2,this.nextPingID=0,this.rtt=-1,this.log?.trace("muxer created"),this.config.enableKeepAlive&&this.keepAliveLoop().catch(_=>this.log?.error("keepalive error: %s",_)),this.ping().catch(_=>this.log?.error("ping error: %s",_))}get streams(){return Array.from(this._streams.values())}newStream(r){if(this.remoteGoAway!==void 0)throw new MuxerClosedError("Muxer closed remotely");if(this.localGoAway!==void 0)throw new MuxerClosedError("Muxer closed locally");const g=this.nextStreamID;if(this.nextStreamID+=2,this.numOutboundStreams>=this.config.maxOutboundStreams)throw new TooManyOutboundProtocolStreamsError("max outbound streams exceeded");this.log?.trace("new outgoing stream id=%s",g);const _=this._newStream(g,r,StreamState.Init,"outbound");return this._streams.set(g,_),this.numOutboundStreams++,_.sendWindowUpdate(),_}async ping(){if(this.remoteGoAway!==void 0)throw new MuxerClosedError("Muxer closed remotely");if(this.localGoAway!==void 0)throw new MuxerClosedError("Muxer closed locally");if(this.activePing===void 0){let r=()=>{};this.activePing={id:this.nextPingID++,promise:new Promise((x,S)=>{const E=()=>{S(new MuxerClosedError("Muxer closed locally"))};this.closeController.signal.addEventListener("abort",E,{once:!0}),r=()=>{this.closeController.signal.removeEventListener("abort",E),x()}}),resolve:r};const g=Date.now();this.sendPing(this.activePing.id);try{await this.activePing.promise}finally{delete this.activePing}const _=Date.now();this.rtt=_-g}else await this.activePing.promise;return this.rtt}getRTT(){return this.rtt}async close(r={}){if(this.closeController.signal.aborted)return;const g=r?.reason??GoAwayCode.NormalTermination;if(this.log?.trace("muxer close reason=%s",g),r.signal==null){const _=AbortSignal.timeout(CLOSE_TIMEOUT$3);setMaxListeners(1/0,_),r={...r,signal:_}}try{await Promise.all([...this._streams.values()].map(async _=>_.close(r))),this.sendGoAway(g),this._closeMuxer()}catch(_){this.abort(_)}}abort(r,g){if(!this.closeController.signal.aborted){g=g??GoAwayCode.InternalError,this.log?.error("muxer abort reason=%s error=%s",g,r);for(const _ of this._streams.values())_.abort(r);this.sendGoAway(g),this._closeMuxer()}}isClosed(){return this.closeController.signal.aborted}_closeMuxer(){this.closeController.abort(),this.source.end()}_newStream(r,g,_,x){if(this._streams.get(r)!=null)throw new InvalidParametersError("Stream already exists with that id");const S=new YamuxStream({id:r.toString(),name:g,state:_,direction:x,sendFrame:this.sendFrame.bind(this),onEnd:()=>{this.closeStream(r),this.onStreamEnd?.(S)},log:this.logger.forComponent(`libp2p:yamux:${x}:${r}`),config:this.config,getRTT:this.getRTT.bind(this)});return S}closeStream(r){this.client===(r%2===0)?this.numInboundStreams--:this.numOutboundStreams--,this._streams.delete(r)}async keepAliveLoop(){const r=new Promise((g,_)=>{this.closeController.signal.addEventListener("abort",_,{once:!0})});for(this.log?.trace("muxer keepalive enabled interval=%s",this.config.keepAliveInterval);;){let g;try{await Promise.race([r,new Promise(_=>{g=setTimeout(_,this.config.keepAliveInterval)})]),this.ping().catch(_=>this.log?.error("ping error: %s",_))}catch{clearInterval(g);return}}}async handleFrame(r,g){const{streamID:_,type:x,length:S}=r;if(this.log?.trace("received frame %o",r),_===0)switch(x){case FrameType.Ping:{this.handlePing(r);return}case FrameType.GoAway:{this.handleGoAway(S);return}default:throw new InvalidFrameError("Invalid frame type")}else switch(r.type){case FrameType.Data:case FrameType.WindowUpdate:{await this.handleStreamMessage(r,g);return}default:throw new InvalidFrameError("Invalid frame type")}}handlePing(r){if(r.flag===Flag.SYN)this.log?.trace("received ping request pingId=%s",r.length),this.sendPing(r.length,Flag.ACK);else if(r.flag===Flag.ACK)this.log?.trace("received ping response pingId=%s",r.length),this.handlePingResponse(r.length);else throw new InvalidFrameError("Invalid frame flag")}handlePingResponse(r){if(this.activePing===void 0)throw new UnrequestedPingError("ping not requested");if(this.activePing.id!==r)throw new NotMatchingPingError("ping doesn't match our id");this.activePing.resolve()}handleGoAway(r){this.log?.trace("received GoAway reason=%s",GoAwayCode[r]??"unknown"),this.remoteGoAway=r;for(const g of this._streams.values())g.reset();this._closeMuxer()}async handleStreamMessage(r,g){const{streamID:_,flag:x,type:S}=r;(x&Flag.SYN)===Flag.SYN&&this.incomingStream(_);const E=this._streams.get(_);if(E===void 0){if(S===FrameType.Data){if(this.log?.("discarding data for stream id=%s",_),g===void 0)throw new Error("unreachable");await g()}else this.log?.trace("frame for missing stream id=%s",_);return}switch(S){case FrameType.WindowUpdate:{E.handleWindowUpdate(r);return}case FrameType.Data:{if(g===void 0)throw new Error("unreachable");await E.handleData(r,g);return}default:throw new Error("unreachable")}}incomingStream(r){if(this.client!==(r%2===0))throw new InvalidParametersError("Both endpoints are clients");if(this._streams.has(r))return;if(this.log?.trace("new incoming stream id=%s",r),this.localGoAway!==void 0){this.sendFrame({type:FrameType.WindowUpdate,flag:Flag.RST,streamID:r,length:0});return}if(this.numInboundStreams>=this.config.maxInboundStreams){this.log?.("maxIncomingStreams exceeded, forcing stream reset"),this.sendFrame({type:FrameType.WindowUpdate,flag:Flag.RST,streamID:r,length:0});return}const g=this._newStream(r,void 0,StreamState.SYNReceived,"inbound");this.numInboundStreams++,this._streams.set(r,g),this.onIncomingStream?.(g)}sendFrame(r,g){if(this.log?.trace("sending frame %o",r),r.type===FrameType.Data){if(g===void 0)throw new InvalidFrameError("Invalid frame");this.source.push(new Uint8ArrayList(encodeHeader(r),g))}else this.source.push(encodeHeader(r))}sendPing(r,g=Flag.SYN){g===Flag.SYN?this.log?.trace("sending ping request pingId=%s",r):this.log?.trace("sending ping response pingId=%s",r),this.sendFrame({type:FrameType.Ping,flag:g,streamID:0,length:r})}sendGoAway(r=GoAwayCode.NormalTermination){this.log?.("sending GoAway reason=%s",GoAwayCode[r]),this.localGoAway=r,this.sendFrame({type:FrameType.GoAway,flag:0,streamID:0,length:r})}}function isPromise(n){return n!=null&&typeof n.then=="function"}function yamux(n={}){return r=>new Yamux(r,n)}const PROTOCOL_PREFIX$2="libp2p",PROTOCOL_NAME$2="autonat",PROTOCOL_VERSION$2="1.0.0",TIMEOUT$1=3e4,STARTUP_DELAY=5e3,REFRESH_INTERVAL$1=6e4,MAX_INBOUND_STREAMS$1=1,MAX_OUTBOUND_STREAMS$1=1;var Message$3;(function(n){(function(x){x.DIAL="DIAL",x.DIAL_RESPONSE="DIAL_RESPONSE"})(n.MessageType||(n.MessageType={}));let r;(function(x){x[x.DIAL=0]="DIAL",x[x.DIAL_RESPONSE=1]="DIAL_RESPONSE"})(r||(r={})),function(x){x.codec=()=>enumeration(r)}(n.MessageType||(n.MessageType={})),function(x){x.OK="OK",x.E_DIAL_ERROR="E_DIAL_ERROR",x.E_DIAL_REFUSED="E_DIAL_REFUSED",x.E_BAD_REQUEST="E_BAD_REQUEST",x.E_INTERNAL_ERROR="E_INTERNAL_ERROR"}(n.ResponseStatus||(n.ResponseStatus={}));let g;(function(x){x[x.OK=0]="OK",x[x.E_DIAL_ERROR=100]="E_DIAL_ERROR",x[x.E_DIAL_REFUSED=101]="E_DIAL_REFUSED",x[x.E_BAD_REQUEST=200]="E_BAD_REQUEST",x[x.E_INTERNAL_ERROR=300]="E_INTERNAL_ERROR"})(g||(g={})),function(x){x.codec=()=>enumeration(g)}(n.ResponseStatus||(n.ResponseStatus={})),function(x){let S;x.codec=()=>(S==null&&(S=message((E,C,T={})=>{if(T.lengthDelimited!==!1&&C.fork(),E.id!=null&&(C.uint32(10),C.bytes(E.id)),E.addrs!=null)for(const R of E.addrs)C.uint32(18),C.bytes(R);T.lengthDelimited!==!1&&C.ldelim()},(E,C,T={})=>{const R={addrs:[]},A=C==null?E.len:E.pos+C;for(;E.pos<A;){const I=E.uint32();switch(I>>>3){case 1:{R.id=E.bytes();break}case 2:{if(T.limits?.addrs!=null&&R.addrs.length===T.limits.addrs)throw new MaxLengthError('Decode error - map field "addrs" had too many elements');R.addrs.push(E.bytes());break}default:{E.skipType(I&7);break}}}return R})),S),x.encode=E=>encodeMessage(E,x.codec()),x.decode=(E,C)=>decodeMessage(E,x.codec(),C)}(n.PeerInfo||(n.PeerInfo={})),function(x){let S;x.codec=()=>(S==null&&(S=message((E,C,T={})=>{T.lengthDelimited!==!1&&C.fork(),E.peer!=null&&(C.uint32(10),n.PeerInfo.codec().encode(E.peer,C)),T.lengthDelimited!==!1&&C.ldelim()},(E,C,T={})=>{const R={},A=C==null?E.len:E.pos+C;for(;E.pos<A;){const I=E.uint32();switch(I>>>3){case 1:{R.peer=n.PeerInfo.codec().decode(E,E.uint32(),{limits:T.limits?.peer});break}default:{E.skipType(I&7);break}}}return R})),S),x.encode=E=>encodeMessage(E,x.codec()),x.decode=(E,C)=>decodeMessage(E,x.codec(),C)}(n.Dial||(n.Dial={})),function(x){let S;x.codec=()=>(S==null&&(S=message((E,C,T={})=>{T.lengthDelimited!==!1&&C.fork(),E.status!=null&&(C.uint32(8),n.ResponseStatus.codec().encode(E.status,C)),E.statusText!=null&&(C.uint32(18),C.string(E.statusText)),E.addr!=null&&(C.uint32(26),C.bytes(E.addr)),T.lengthDelimited!==!1&&C.ldelim()},(E,C,T={})=>{const R={},A=C==null?E.len:E.pos+C;for(;E.pos<A;){const I=E.uint32();switch(I>>>3){case 1:{R.status=n.ResponseStatus.codec().decode(E);break}case 2:{R.statusText=E.string();break}case 3:{R.addr=E.bytes();break}default:{E.skipType(I&7);break}}}return R})),S),x.encode=E=>encodeMessage(E,x.codec()),x.decode=(E,C)=>decodeMessage(E,x.codec(),C)}(n.DialResponse||(n.DialResponse={}));let _;n.codec=()=>(_==null&&(_=message((x,S,E={})=>{E.lengthDelimited!==!1&&S.fork(),x.type!=null&&(S.uint32(8),n.MessageType.codec().encode(x.type,S)),x.dial!=null&&(S.uint32(18),n.Dial.codec().encode(x.dial,S)),x.dialResponse!=null&&(S.uint32(26),n.DialResponse.codec().encode(x.dialResponse,S)),E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.type=n.MessageType.codec().decode(x);break}case 2:{C.dial=n.Dial.codec().decode(x,x.uint32(),{limits:E.limits?.dial});break}case 3:{C.dialResponse=n.DialResponse.codec().decode(x,x.uint32(),{limits:E.limits?.dialResponse});break}default:{x.skipType(R&7);break}}}return C})),_),n.encode=x=>encodeMessage(x,n.codec()),n.decode=(x,S)=>decodeMessage(x,n.codec(),S)})(Message$3||(Message$3={}));const REQUIRED_SUCCESSFUL_DIALS=4;class AutoNATService{components;startupDelay;refreshInterval;protocol;timeout;maxInboundStreams;maxOutboundStreams;verifyAddressTimeout;started;log;constructor(r,g){this.components=r,this.log=r.logger.forComponent("libp2p:autonat"),this.started=!1,this.protocol=`/${g.protocolPrefix??PROTOCOL_PREFIX$2}/${PROTOCOL_NAME$2}/${PROTOCOL_VERSION$2}`,this.timeout=g.timeout??TIMEOUT$1,this.maxInboundStreams=g.maxInboundStreams??MAX_INBOUND_STREAMS$1,this.maxOutboundStreams=g.maxOutboundStreams??MAX_OUTBOUND_STREAMS$1,this.startupDelay=g.startupDelay??STARTUP_DELAY,this.refreshInterval=g.refreshInterval??REFRESH_INTERVAL$1,this._verifyExternalAddresses=this._verifyExternalAddresses.bind(this)}[Symbol.toStringTag]="@libp2p/autonat";[serviceCapabilities]=["@libp2p/autonat"];isStarted(){return this.started}async start(){this.started||(await this.components.registrar.handle(this.protocol,r=>{this.handleIncomingAutonatStream(r).catch(g=>{this.log.error("error handling incoming autonat stream",g)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}),this.verifyAddressTimeout=setTimeout(this._verifyExternalAddresses,this.startupDelay),this.started=!0)}async stop(){await this.components.registrar.unhandle(this.protocol),clearTimeout(this.verifyAddressTimeout),this.started=!1}async handleIncomingAutonatStream(r){const g=AbortSignal.timeout(this.timeout),_=()=>{r.stream.abort(new AbortError$4)};g.addEventListener("abort",_,{once:!0}),setMaxListeners(1/0,g);try{const x=this;await pipe(r.stream,S=>decode$2(S),async function*(S){const E=await first(S);if(E==null){x.log("no message received"),yield Message$3.encode({type:Message$3.MessageType.DIAL_RESPONSE,dialResponse:{status:Message$3.ResponseStatus.E_BAD_REQUEST,statusText:"No message was sent"}});return}let C;try{C=Message$3.decode(E)}catch(T){x.log.error("could not decode message",T),yield Message$3.encode({type:Message$3.MessageType.DIAL_RESPONSE,dialResponse:{status:Message$3.ResponseStatus.E_BAD_REQUEST,statusText:"Could not decode message"}});return}yield Message$3.encode(await x.handleAutonatMessage(C,r.connection,{signal:g}))},S=>encode$2(S),r.stream)}catch(x){this.log.error("error handling incoming autonat stream",x)}finally{g.removeEventListener("abort",_)}}_verifyExternalAddresses(){this.verifyExternalAddresses().catch(r=>{this.log.error("error verifying external address",r)})}async handleAutonatMessage(r,g,_){const x=this.components.addressManager.getAddresses().map(I=>I.toOptions().host),S=r.dial;if(S==null)return this.log.error("dial was missing from message"),{type:Message$3.MessageType.DIAL_RESPONSE,dialResponse:{status:Message$3.ResponseStatus.E_BAD_REQUEST,statusText:"No Dial message found in message"}};let E;const C=S.peer;if(C?.id==null)return this.log.error("PeerId missing from message"),{type:Message$3.MessageType.DIAL_RESPONSE,dialResponse:{status:Message$3.ResponseStatus.E_BAD_REQUEST,statusText:"missing peer info"}};try{const I=decode$h(C.id);E=peerIdFromMultihash(I)}catch(I){return this.log.error("invalid PeerId",I),{type:Message$3.MessageType.DIAL_RESPONSE,dialResponse:{status:Message$3.ResponseStatus.E_BAD_REQUEST,statusText:"bad peer id"}}}if(this.log("incoming request from %p",E),!g.remotePeer.equals(E))return this.log("target peer %p did not equal sending peer %p",E,g.remotePeer),{type:Message$3.MessageType.DIAL_RESPONSE,dialResponse:{status:Message$3.ResponseStatus.E_BAD_REQUEST,statusText:"peer id mismatch"}};const T=C.addrs.map(I=>multiaddr(I)).filter(I=>{const B=I.toOptions().host===g.remoteAddr.toOptions().host;return this.log.trace("request to dial %a was sent from %a is same host %s",I,g.remoteAddr,B),B}).filter(I=>{const B=I.toOptions().host,D=!(isPrivateIp(B)??!1);return this.log.trace("host %s was public %s",B,D),D}).filter(I=>{const B=I.toOptions().host,D=!x.includes(B);return this.log.trace("host %s was not our host %s",B,D),D}).filter(I=>{const B=!!this.components.transportManager.dialTransportForMultiaddr(I);return this.log.trace("transport for %a is supported %s",I,B),B}).map(I=>(I.getPeerId()==null&&(I=I.encapsulate(`/p2p/${E.toString()}`)),I));if(T.length===0)return this.log("no valid multiaddrs for %p in message",E),{type:Message$3.MessageType.DIAL_RESPONSE,dialResponse:{status:Message$3.ResponseStatus.E_DIAL_REFUSED,statusText:"no dialable addresses"}};this.log("dial multiaddrs %s for peer %p",T.map(I=>I.toString()).join(", "),E);let R="",A=T[0];for await(const I of T){let B;A=I;try{if(B=await this.components.connectionManager.openConnection(I,_),!B.remoteAddr.equals(I))throw this.log.error("tried to dial %a but dialed %a",I,B.remoteAddr),new Error("Unexpected remote address");return this.log("Success %p",E),{type:Message$3.MessageType.DIAL_RESPONSE,dialResponse:{status:Message$3.ResponseStatus.OK,addr:B.remoteAddr.decapsulateCode(getProtocol("p2p").code).bytes}}}catch(D){this.log("could not dial %p",E,D),R=D.message}finally{B!=null&&await B.close()}}return{type:Message$3.MessageType.DIAL_RESPONSE,dialResponse:{status:Message$3.ResponseStatus.E_DIAL_ERROR,statusText:R,addr:A.bytes}}}async verifyExternalAddresses(){if(clearTimeout(this.verifyAddressTimeout),!this.isStarted())return;const r=this.components.addressManager,g=r.getObservedAddrs().filter(S=>{const E=S.toOptions();return!(isPrivateIp(E.host)??!1)});if(g.length===0){this.log("no public addresses found, not requesting verification"),this.verifyAddressTimeout=setTimeout(this._verifyExternalAddresses,this.refreshInterval);return}const _=AbortSignal.timeout(this.timeout);setMaxListeners(1/0,_);const x=this;try{this.log("verify multiaddrs %s",g.map(R=>R.toString()).join(", "));const S=Message$3.encode({type:Message$3.MessageType.DIAL,dial:{peer:{id:this.components.peerId.toMultihash().bytes,addrs:g.map(R=>R.bytes)}}}),E={},C=[],T=async R=>{let A=()=>{};try{this.log("asking %p to verify multiaddr",R.id);const I=await x.components.connectionManager.openConnection(R.id,{signal:_}),B=await I.newStream(this.protocol,{signal:_});A=()=>{B.abort(new AbortError$4)},_.addEventListener("abort",A,{once:!0});const D=await pipe([S],M=>encode$2(M),B,M=>decode$2(M),async M=>first(M));if(D==null){this.log("no response received from %p",I.remotePeer);return}const N=Message$3.decode(D);if(N.type!==Message$3.MessageType.DIAL_RESPONSE||N.dialResponse==null){this.log("invalid autonat response from %p",I.remotePeer);return}if(N.dialResponse.status===Message$3.ResponseStatus.OK){const M=I.remoteAddr.toOptions();let O;if(M.family===4)O=M.host.split(".")[0];else if(M.family===6)O=M.host.split(":")[0];else{this.log('remote address "%s" was not IP4 or IP6?',M.host);return}if(C.includes(O)){this.log("already have response from network segment %d - %s",O,M.host);return}C.push(O)}return N.dialResponse}catch(I){this.log.error("error asking remote to verify multiaddr",I)}finally{_.removeEventListener("abort",A)}};for await(const R of parallel$1(map$2(this.components.randomWalk.walk({signal:_}),A=>async()=>T(A)),{concurrency:REQUIRED_SUCCESSFUL_DIALS}))try{if(R==null)continue;const A=R.addr==null?g[0]:multiaddr(R.addr);if(this.log("autonat response for %a is %s",A,R.status),R.status===Message$3.ResponseStatus.E_BAD_REQUEST||R.status===Message$3.ResponseStatus.E_DIAL_REFUSED||R.addr==null&&g.length>1)continue;if(!g.some(B=>B.equals(A))){this.log("peer reported %a as %s but it was not in our observed address list",A,R.status);continue}const I=A.toString();if(E[I]==null&&(E[I]={success:0,failure:0}),R.status===Message$3.ResponseStatus.OK?E[I].success++:R.status===Message$3.ResponseStatus.E_DIAL_ERROR&&E[I].failure++,E[I].success===REQUIRED_SUCCESSFUL_DIALS){this.log("%a is externally dialable",A),r.confirmObservedAddr(A);return}if(E[I].failure===REQUIRED_SUCCESSFUL_DIALS){this.log("%a is not externally dialable",A),r.removeObservedAddr(A);return}}catch(A){this.log.error("could not verify external address",A)}}finally{this.verifyAddressTimeout=setTimeout(this._verifyExternalAddresses,this.refreshInterval)}}}function autoNAT(n={}){return r=>new AutoNATService(r,n)}const DNS4=base$1("dns4"),DNS6=base$1("dns6"),DNSADDR=base$1("dnsaddr"),DNS=or$2(base$1("dns"),DNSADDR,DNS4,DNS6),IP=or$2(base$1("ip4"),base$1("ip6")),TCP=or$2(and$1(IP,base$1("tcp")),and$1(DNS,base$1("tcp"))),UDP=and$1(IP,base$1("udp")),UTP=and$1(UDP,base$1("utp")),QUIC=and$1(UDP,base$1("quic")),QUICV1=and$1(UDP,base$1("quic-v1")),_WebSockets=or$2(and$1(TCP,base$1("ws")),and$1(DNS,base$1("ws"))),WebSockets$1=or$2(and$1(_WebSockets,base$1("p2p")),_WebSockets),_WebSocketsSecure=or$2(and$1(TCP,base$1("wss")),and$1(DNS,base$1("wss")),and$1(TCP,base$1("tls"),base$1("ws")),and$1(DNS,base$1("tls"),base$1("ws"))),WebSocketsSecure=or$2(and$1(_WebSocketsSecure,base$1("p2p")),_WebSocketsSecure),HTTP=or$2(and$1(TCP,base$1("http")),and$1(IP,base$1("http")),and$1(DNS,base$1("http"))),HTTPS=or$2(and$1(TCP,base$1("https")),and$1(IP,base$1("https")),and$1(DNS,base$1("https"))),_WebRTCDirect=and$1(UDP,base$1("webrtc-direct"),base$1("certhash")),WebRTCDirect=or$2(and$1(_WebRTCDirect,base$1("p2p")),_WebRTCDirect),_WebTransport=and$1(QUICV1,base$1("webtransport"),base$1("certhash"),base$1("certhash")),WebTransport$1=or$2(and$1(_WebTransport,base$1("p2p")),_WebTransport),P2PWebRTCStar=or$2(and$1(WebSockets$1,base$1("p2p-webrtc-star"),base$1("p2p")),and$1(WebSocketsSecure,base$1("p2p-webrtc-star"),base$1("p2p")),and$1(WebSockets$1,base$1("p2p-webrtc-star")),and$1(WebSocketsSecure,base$1("p2p-webrtc-star"))),P2PWebRTCDirect=or$2(and$1(HTTP,base$1("p2p-webrtc-direct"),base$1("p2p")),and$1(HTTPS,base$1("p2p-webrtc-direct"),base$1("p2p")),and$1(HTTP,base$1("p2p-webrtc-direct")),and$1(HTTPS,base$1("p2p-webrtc-direct"))),Reliable=or$2(_WebSockets,_WebSocketsSecure,HTTP,HTTPS,P2PWebRTCStar,P2PWebRTCDirect,TCP,UTP,QUIC,DNS,WebRTCDirect,WebTransport$1),_P2P=or$2(and$1(Reliable,base$1("p2p")),P2PWebRTCStar,P2PWebRTCDirect,WebRTCDirect,WebTransport$1,base$1("p2p")),_Circuit=or$2(and$1(_P2P,base$1("p2p-circuit"),_P2P),and$1(_P2P,base$1("p2p-circuit")),and$1(base$1("p2p-circuit"),_P2P),and$1(Reliable,base$1("p2p-circuit")),and$1(base$1("p2p-circuit"),Reliable),base$1("p2p-circuit")),CircuitRecursive=()=>or$2(and$1(_Circuit,CircuitRecursive),_Circuit),Circuit$1=CircuitRecursive(),P2P=or$2(and$1(Circuit$1,_P2P,Circuit$1),and$1(_P2P,Circuit$1),and$1(Circuit$1,_P2P),Circuit$1,_P2P);function makeMatchesFunction(n){function r(g){let _;try{_=multiaddr(g)}catch{return!1}const x=n(_.protoNames());return x===null?!1:x===!0||x===!1?x:x.length===0}return r}function and$1(...n){function r(g){if(g.length<n.length)return null;let _=g;return n.some(x=>(_=typeof x=="function"?x().partialMatch(g):x.partialMatch(g),Array.isArray(_)&&(g=_),_===null)),_}return{toString:function(){return"{ "+n.join(" ")+" }"},input:n,matches:makeMatchesFunction(r),partialMatch:r}}function or$2(...n){function r(_){let x=null;return n.some(S=>{const E=typeof S=="function"?S().partialMatch(_):S.partialMatch(_);return E!=null?(x=E,!0):!1}),x}return{toString:function(){return"{ "+n.join(" ")+" }"},input:n,matches:makeMatchesFunction(r),partialMatch:r}}function base$1(n){const r=n;function g(x){let S;try{S=multiaddr(x)}catch{return!1}const E=S.protoNames();return E.length===1&&E[0]===r}function _(x){return x.length===0?null:x[0]===r?x.slice(1):null}return{toString:function(){return r},matches:g,partialMatch:_}}const DEFAULT_BOOTSTRAP_TAG_NAME="bootstrap",DEFAULT_BOOTSTRAP_TAG_VALUE=50,DEFAULT_BOOTSTRAP_DISCOVERY_TIMEOUT=1e3;class Bootstrap extends TypedEventEmitter{static tag="bootstrap";log;timer;list;timeout;components;_init;constructor(r,g={list:[]}){if(g.list==null||g.list.length===0)throw new Error("Bootstrap requires a list of peer addresses");super(),this.components=r,this.log=r.logger.forComponent("libp2p:bootstrap"),this.timeout=g.timeout??DEFAULT_BOOTSTRAP_DISCOVERY_TIMEOUT,this.list=[];for(const _ of g.list){if(!P2P.matches(_)){this.log.error("Invalid multiaddr");continue}const x=multiaddr(_),S=x.getPeerId();if(S==null){this.log.error("Invalid bootstrap multiaddr without peer id");continue}const E={id:peerIdFromString$1(S),multiaddrs:[x]};this.list.push(E)}this._init=g}[peerDiscoverySymbol]=this;[Symbol.toStringTag]="@libp2p/bootstrap";[serviceCapabilities]=["@libp2p/peer-discovery"];isStarted(){return!!this.timer}start(){this.isStarted()||(this.log("Starting bootstrap node discovery, discovering peers after %s ms",this.timeout),this.timer=setTimeout(()=>{this._discoverBootstrapPeers().catch(r=>{this.log.error(r)})},this.timeout))}async _discoverBootstrapPeers(){if(this.timer!=null)for(const r of this.list){if(await this.components.peerStore.merge(r.id,{tags:{[this._init.tagName??DEFAULT_BOOTSTRAP_TAG_NAME]:{value:this._init.tagValue??DEFAULT_BOOTSTRAP_TAG_VALUE,ttl:this._init.tagTTL}},multiaddrs:r.multiaddrs}),this.timer==null)return;this.safeDispatchEvent("peer",{detail:r}),this.components.connectionManager.openConnection(r.id).catch(g=>{this.log.error("could not dial bootstrap peer %p",r.id,g)})}}stop(){this.timer!=null&&clearTimeout(this.timer),this.timer=void 0}}function bootstrap(n){return r=>new Bootstrap(r,n)}var Envelope$1;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.publicKey!=null&&g.publicKey.byteLength>0&&(_.uint32(10),_.bytes(g.publicKey)),g.payloadType!=null&&g.payloadType.byteLength>0&&(_.uint32(18),_.bytes(g.payloadType)),g.payload!=null&&g.payload.byteLength>0&&(_.uint32(26),_.bytes(g.payload)),g.signature!=null&&g.signature.byteLength>0&&(_.uint32(42),_.bytes(g.signature)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={publicKey:alloc$1(0),payloadType:alloc$1(0),payload:alloc$1(0),signature:alloc$1(0)},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.publicKey=g.bytes();break}case 2:{S.payloadType=g.bytes();break}case 3:{S.payload=g.bytes();break}case 5:{S.signature=g.bytes();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Envelope$1||(Envelope$1={}));class InvalidSignatureError extends Error{constructor(r="Invalid signature"){super(r),this.name="InvalidSignatureError"}}class RecordEnvelope{static createFromProtobuf=async r=>{const g=Envelope$1.decode(r),_=publicKeyFromProtobuf(g.publicKey);return new RecordEnvelope({publicKey:_,payloadType:g.payloadType,payload:g.payload,signature:g.signature})};static seal=async(r,g)=>{if(g==null)throw new Error("Missing private key");const _=r.domain,x=r.codec,S=r.marshal(),E=formatSignaturePayload(_,x,S),C=await g.sign(E.subarray());return new RecordEnvelope({publicKey:g.publicKey,payloadType:x,payload:S,signature:C})};static openAndCertify=async(r,g)=>{const _=await RecordEnvelope.createFromProtobuf(r);if(!await _.validate(g))throw new InvalidSignatureError("Envelope signature is not valid for the given domain");return _};publicKey;payloadType;payload;signature;marshaled;constructor(r){const{publicKey:g,payloadType:_,payload:x,signature:S}=r;this.publicKey=g,this.payloadType=_,this.payload=x,this.signature=S}marshal(){return this.marshaled==null&&(this.marshaled=Envelope$1.encode({publicKey:publicKeyToProtobuf(this.publicKey),payloadType:this.payloadType,payload:this.payload.subarray(),signature:this.signature})),this.marshaled}equals(r){return equals$1(this.marshal(),r.marshal())}async validate(r){const g=formatSignaturePayload(r,this.payloadType,this.payload);return this.publicKey.verify(g.subarray(),this.signature)}}const formatSignaturePayload=(n,r,g)=>{const _=fromString(n),x=encode$d(_.byteLength),S=encode$d(r.length),E=encode$d(g.length);return new Uint8ArrayList(x,_,S,r,E,g)};function arrayEquals(n,r){const g=(_,x)=>_.toString().localeCompare(x.toString());return n.length!==r.length?!1:(r.sort(g),n.sort(g).every((_,x)=>r[x].equals(_)))}const ENVELOPE_DOMAIN_PEER_RECORD="libp2p-peer-record",ENVELOPE_PAYLOAD_TYPE_PEER_RECORD=Uint8Array.from([3,1]);var PeerRecord$1;(function(n){(function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{E.lengthDelimited!==!1&&S.fork(),x.multiaddr!=null&&x.multiaddr.byteLength>0&&(S.uint32(10),S.bytes(x.multiaddr)),E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={multiaddr:alloc$1(0)},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.multiaddr=x.bytes();break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)})(n.AddressInfo||(n.AddressInfo={}));let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.peerId!=null&&g.peerId.byteLength>0&&(_.uint32(10),_.bytes(g.peerId)),g.seq!=null&&g.seq!==0n&&(_.uint32(16),_.uint64(g.seq)),g.addresses!=null)for(const S of g.addresses)_.uint32(26),n.AddressInfo.codec().encode(S,_);x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={peerId:alloc$1(0),seq:0n,addresses:[]},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.peerId=g.bytes();break}case 2:{S.seq=g.uint64();break}case 3:{if(x.limits?.addresses!=null&&S.addresses.length===x.limits.addresses)throw new MaxLengthError('Decode error - map field "addresses" had too many elements');S.addresses.push(n.AddressInfo.codec().decode(g,g.uint32(),{limits:x.limits?.addresses$}));break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(PeerRecord$1||(PeerRecord$1={}));class PeerRecord{static createFromProtobuf=r=>{const g=PeerRecord$1.decode(r),_=peerIdFromMultihash(decode$h(g.peerId)),x=(g.addresses??[]).map(E=>multiaddr(E.multiaddr)),S=g.seq;return new PeerRecord({peerId:_,multiaddrs:x,seqNumber:S})};static DOMAIN=ENVELOPE_DOMAIN_PEER_RECORD;static CODEC=ENVELOPE_PAYLOAD_TYPE_PEER_RECORD;peerId;multiaddrs;seqNumber;domain=PeerRecord.DOMAIN;codec=PeerRecord.CODEC;marshaled;constructor(r){const{peerId:g,multiaddrs:_,seqNumber:x}=r;this.peerId=g,this.multiaddrs=_??[],this.seqNumber=x??BigInt(Date.now())}marshal(){return this.marshaled==null&&(this.marshaled=PeerRecord$1.encode({peerId:this.peerId.toMultihash().bytes,seq:BigInt(this.seqNumber),addresses:this.multiaddrs.map(r=>({multiaddr:r.bytes}))})),this.marshaled}equals(r){return!(!(r instanceof PeerRecord)||!this.peerId.equals(r.peerId)||this.seqNumber!==r.seqNumber||!arrayEquals(this.multiaddrs,r.multiaddrs))}}function pbStream(n,r){const g=lpStream(n,r),_={read:async(x,S)=>{const E=await g.read(S);return x.decode(E)},write:async(x,S,E)=>{await g.write(S.encode(x),E)},writeV:async(x,S,E)=>{await g.writeV(x.map(C=>S.encode(C)),E)},pb:x=>({read:async S=>_.read(x,S),write:async(S,E)=>_.write(S,x,E),writeV:async(S,E)=>_.writeV(S,x,E),unwrap:()=>_}),unwrap:()=>g.unwrap()};return _}const CIRCUIT_PROTO_CODE=290,DEFAULT_RESERVATION_CONCURRENCY=1,DEFAULT_RESERVATION_COMPLETION_TIMEOUT=2e3,DEFAULT_MAX_RESERVATION_QUEUE_LENGTH=100,KEEP_ALIVE_TAG$1=`${KEEP_ALIVE}-circuit-relay`;BigInt(1<<17);const RELAY_V2_HOP_CODEC="/libp2p/circuit/relay/0.2.0/hop",RELAY_V2_STOP_CODEC="/libp2p/circuit/relay/0.2.0/stop",MAX_CONNECTIONS$1=300,DEFAULT_DISCOVERY_FILTER_SIZE=4096,DEFAULT_DISCOVERY_FILTER_ERROR_RATE=.001;var HopMessage;(function(n){(function(_){_.RESERVE="RESERVE",_.CONNECT="CONNECT",_.STATUS="STATUS"})(n.Type||(n.Type={}));let r;(function(_){_[_.RESERVE=0]="RESERVE",_[_.CONNECT=1]="CONNECT",_[_.STATUS=2]="STATUS"})(r||(r={})),function(_){_.codec=()=>enumeration(r)}(n.Type||(n.Type={}));let g;n.codec=()=>(g==null&&(g=message((_,x,S={})=>{S.lengthDelimited!==!1&&x.fork(),_.type!=null&&(x.uint32(8),n.Type.codec().encode(_.type,x)),_.peer!=null&&(x.uint32(18),Peer$2.codec().encode(_.peer,x)),_.reservation!=null&&(x.uint32(26),Reservation.codec().encode(_.reservation,x)),_.limit!=null&&(x.uint32(34),Limit.codec().encode(_.limit,x)),_.status!=null&&(x.uint32(40),Status.codec().encode(_.status,x)),S.lengthDelimited!==!1&&x.ldelim()},(_,x,S={})=>{const E={},C=x==null?_.len:_.pos+x;for(;_.pos<C;){const T=_.uint32();switch(T>>>3){case 1:{E.type=n.Type.codec().decode(_);break}case 2:{E.peer=Peer$2.codec().decode(_,_.uint32(),{limits:S.limits?.peer});break}case 3:{E.reservation=Reservation.codec().decode(_,_.uint32(),{limits:S.limits?.reservation});break}case 4:{E.limit=Limit.codec().decode(_,_.uint32(),{limits:S.limits?.limit});break}case 5:{E.status=Status.codec().decode(_);break}default:{_.skipType(T&7);break}}}return E})),g),n.encode=_=>encodeMessage(_,n.codec()),n.decode=(_,x)=>decodeMessage(_,n.codec(),x)})(HopMessage||(HopMessage={}));var StopMessage;(function(n){(function(_){_.CONNECT="CONNECT",_.STATUS="STATUS"})(n.Type||(n.Type={}));let r;(function(_){_[_.CONNECT=0]="CONNECT",_[_.STATUS=1]="STATUS"})(r||(r={})),function(_){_.codec=()=>enumeration(r)}(n.Type||(n.Type={}));let g;n.codec=()=>(g==null&&(g=message((_,x,S={})=>{S.lengthDelimited!==!1&&x.fork(),_.type!=null&&(x.uint32(8),n.Type.codec().encode(_.type,x)),_.peer!=null&&(x.uint32(18),Peer$2.codec().encode(_.peer,x)),_.limit!=null&&(x.uint32(26),Limit.codec().encode(_.limit,x)),_.status!=null&&(x.uint32(32),Status.codec().encode(_.status,x)),S.lengthDelimited!==!1&&x.ldelim()},(_,x,S={})=>{const E={},C=x==null?_.len:_.pos+x;for(;_.pos<C;){const T=_.uint32();switch(T>>>3){case 1:{E.type=n.Type.codec().decode(_);break}case 2:{E.peer=Peer$2.codec().decode(_,_.uint32(),{limits:S.limits?.peer});break}case 3:{E.limit=Limit.codec().decode(_,_.uint32(),{limits:S.limits?.limit});break}case 4:{E.status=Status.codec().decode(_);break}default:{_.skipType(T&7);break}}}return E})),g),n.encode=_=>encodeMessage(_,n.codec()),n.decode=(_,x)=>decodeMessage(_,n.codec(),x)})(StopMessage||(StopMessage={}));var Peer$2;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.id!=null&&g.id.byteLength>0&&(_.uint32(10),_.bytes(g.id)),g.addrs!=null)for(const S of g.addrs)_.uint32(18),_.bytes(S);x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={id:alloc$1(0),addrs:[]},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.id=g.bytes();break}case 2:{if(x.limits?.addrs!=null&&S.addrs.length===x.limits.addrs)throw new MaxLengthError('Decode error - map field "addrs" had too many elements');S.addrs.push(g.bytes());break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Peer$2||(Peer$2={}));var Reservation;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.expire!=null&&g.expire!==0n&&(_.uint32(8),_.uint64(g.expire)),g.addrs!=null)for(const S of g.addrs)_.uint32(18),_.bytes(S);g.voucher!=null&&(_.uint32(26),Envelope.codec().encode(g.voucher,_)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={expire:0n,addrs:[]},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.expire=g.uint64();break}case 2:{if(x.limits?.addrs!=null&&S.addrs.length===x.limits.addrs)throw new MaxLengthError('Decode error - map field "addrs" had too many elements');S.addrs.push(g.bytes());break}case 3:{S.voucher=Envelope.codec().decode(g,g.uint32(),{limits:x.limits?.voucher});break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Reservation||(Reservation={}));var Limit;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.duration!=null&&(_.uint32(8),_.uint32(g.duration)),g.data!=null&&(_.uint32(16),_.uint64(g.data)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.duration=g.uint32();break}case 2:{S.data=g.uint64();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Limit||(Limit={}));var Status;(function(n){n.UNUSED="UNUSED",n.OK="OK",n.RESERVATION_REFUSED="RESERVATION_REFUSED",n.RESOURCE_LIMIT_EXCEEDED="RESOURCE_LIMIT_EXCEEDED",n.PERMISSION_DENIED="PERMISSION_DENIED",n.CONNECTION_FAILED="CONNECTION_FAILED",n.NO_RESERVATION="NO_RESERVATION",n.MALFORMED_MESSAGE="MALFORMED_MESSAGE",n.UNEXPECTED_MESSAGE="UNEXPECTED_MESSAGE"})(Status||(Status={}));var __StatusValues;(function(n){n[n.UNUSED=0]="UNUSED",n[n.OK=100]="OK",n[n.RESERVATION_REFUSED=200]="RESERVATION_REFUSED",n[n.RESOURCE_LIMIT_EXCEEDED=201]="RESOURCE_LIMIT_EXCEEDED",n[n.PERMISSION_DENIED=202]="PERMISSION_DENIED",n[n.CONNECTION_FAILED=203]="CONNECTION_FAILED",n[n.NO_RESERVATION=204]="NO_RESERVATION",n[n.MALFORMED_MESSAGE=400]="MALFORMED_MESSAGE",n[n.UNEXPECTED_MESSAGE=401]="UNEXPECTED_MESSAGE"})(__StatusValues||(__StatusValues={}));(function(n){n.codec=()=>enumeration(__StatusValues)})(Status||(Status={}));var ReservationVoucher;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.relay!=null&&g.relay.byteLength>0&&(_.uint32(10),_.bytes(g.relay)),g.peer!=null&&g.peer.byteLength>0&&(_.uint32(18),_.bytes(g.peer)),g.expiration!=null&&g.expiration!==0n&&(_.uint32(24),_.uint64(g.expiration)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={relay:alloc$1(0),peer:alloc$1(0),expiration:0n},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.relay=g.bytes();break}case 2:{S.peer=g.bytes();break}case 3:{S.expiration=g.uint64();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(ReservationVoucher||(ReservationVoucher={}));var Envelope;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.publicKey!=null&&g.publicKey.byteLength>0&&(_.uint32(10),_.bytes(g.publicKey)),g.payloadType!=null&&g.payloadType.byteLength>0&&(_.uint32(18),_.bytes(g.payloadType)),g.payload!=null&&(_.uint32(26),ReservationVoucher.codec().encode(g.payload,_)),g.signature!=null&&g.signature.byteLength>0&&(_.uint32(42),_.bytes(g.signature)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={publicKey:alloc$1(0),payloadType:alloc$1(0),signature:alloc$1(0)},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.publicKey=g.bytes();break}case 2:{S.payloadType=g.bytes();break}case 3:{S.payload=ReservationVoucher.codec().decode(g,g.uint32(),{limits:x.limits?.payload});break}case 5:{S.signature=g.bytes();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Envelope||(Envelope={}));class HadEnoughRelaysError extends Error{static name="HadEnoughRelaysError";name="HadEnoughRelaysError"}class DoubleRelayError extends Error{static name="DoubleRelayError";name="DoubleRelayError"}class RelayQueueFullError extends Error{static name="RelayQueueFullError";name="RelayQueueFullError"}function getExpirationMilliseconds(n){const r=n*BigInt(1e3),g=new Date().getTime();return Number(r-BigInt(g))}class LimitTracker{expires;bytes;constructor(r){r?.duration!=null&&r?.duration!==0&&(this.expires=Date.now()+r.duration*1e3),this.bytes=r?.data,this.bytes===0n&&(this.bytes=void 0),this.onData=this.onData.bind(this)}onData(r){this.bytes!=null&&(this.bytes-=BigInt(r.byteLength),this.bytes<0n&&(this.bytes=0n))}getLimits(){if(this.expires==null&&this.bytes==null)return;const r={};if(this.bytes!=null){const g=this;Object.defineProperty(r,"bytes",{get(){return g.bytes}})}if(this.expires!=null){const g=this;Object.defineProperty(r,"seconds",{get(){return Math.round(((g.expires??0)-Date.now())/1e3)}})}return r}}const CircuitListen=fmt(and$2(P2P$1.matchers[0],literal("p2p-circuit"))),CircuitSearch=fmt(literal("p2p-circuit"));function streamToMaConnection(n){const{stream:r,remoteAddr:g,logger:_,onDataRead:x,onDataWrite:S}=n,E=_.forComponent("libp2p:stream:converter");let C=!1,T=!1;const R=r.close.bind(r);r.close=async N=>{await R(N),D(!0)};const A=r.abort.bind(r);r.abort=N=>{A(N),D(!0)};const I=r.sink.bind(r);r.sink=async N=>{try{await I(pipe(N,M=>forEach(M,O=>S?.(O))))}catch(M){M.type!=="aborted"&&E.error("%s error in sink",g,M)}finally{T=!0,D()}};const B={log:E,sink:r.sink,source:async function*(){try{for await(const N of r.source)x?.(N),yield N}finally{C=!0,D()}}(),remoteAddr:g,timeline:{open:Date.now(),close:void 0},close:r.close,abort:r.abort};function D(N){N===!0&&(C=!0,T=!0),C&&T&&B.timeline.close==null&&(B.timeline.close=Date.now())}return B}class RelayDiscovery extends TypedEventEmitter{peerStore;registrar;connectionManager;randomWalk;started;running;topologyId;log;discoveryController;filter;queue;constructor(r,g={}){super(),this.log=r.logger.forComponent("libp2p:circuit-relay:discover-relays"),this.started=!1,this.running=!1,this.peerStore=r.peerStore,this.registrar=r.registrar,this.connectionManager=r.connectionManager,this.randomWalk=r.randomWalk,this.filter=g.filter,this.discoveryController=new AbortController,setMaxListeners(1/0,this.discoveryController.signal)}isStarted(){return this.started}async start(){this.topologyId=await this.registrar.register(RELAY_V2_HOP_CODEC,{filter:this.filter,onConnect:r=>{this.log.trace("discovered relay %p queue (length: %d, active %d)",r,this.queue?.size,this.queue?.running),this.safeDispatchEvent("relay:discover",{detail:r})}}),this.started=!0}stop(){this.topologyId!=null&&this.registrar.unregister(this.topologyId),this.discoveryController?.abort(),this.started=!1}startDiscovery(){this.running||(this.log("start discovery"),this.running=!0,this.discoveryController=new AbortController,setMaxListeners(1/0,this.discoveryController.signal),Promise.resolve().then(async()=>{this.log("searching peer store for relays");const r=await this.peerStore.all({filters:[_=>_.protocols.includes(RELAY_V2_HOP_CODEC)],orders:[()=>Math.random()<.5?1:-1,(_,x)=>{const S=getLastDial(_),E=getLastDial(x);return S>E?-1:E>S?1:0}]});for(const _ of r)this.log.trace("found relay peer %p in peer store",_.id),this.safeDispatchEvent("relay:discover",{detail:_.id});this.log("found %d relay peers in peer store",r.length);const g=this.queue=new PeerQueue({concurrency:5});this.log("start random walk");for await(const _ of this.randomWalk.walk({signal:this.discoveryController.signal})){if(this.log.trace("found random peer %p",_.id),g.has(_.id)){this.log.trace("random peer %p was already in queue",_.id);continue}if(this.connectionManager.getConnections(_.id)?.length>0){this.log.trace("random peer %p was already connected",_.id);continue}if(!await this.connectionManager.isDialable(_.multiaddrs)){this.log.trace("random peer %p was not dialable",_.id,_.multiaddrs.map(x=>x.toString()));continue}g.queued>10&&(this.log.trace("wait for space in queue for %p",_.id),await g.onSizeLessThan(10,{signal:this.discoveryController.signal})),this.log("adding random peer %p to dial queue (length: %d, active %d)",_.id,g.size,g.running),g.add(async()=>{const x=anySignal([this.discoveryController.signal,AbortSignal.timeout(5e3)]);setMaxListeners(1/0,x);try{await this.connectionManager.openConnection(_.id,{signal:x})}finally{x.clear()}},{peerId:_.id,signal:this.discoveryController.signal}).catch(x=>{this.log.error("error opening connection to random peer %p",_.id,x)})}this.log("stop random walk"),await g.onIdle()}).catch(r=>{this.discoveryController.signal.aborted||this.log.error("failed when finding relays on the network",r)}))}stopDiscovery(){this.log("stop discovery"),this.running=!1,this.discoveryController?.abort()}}function getLastDial(n){const r=n.metadata.get("last-dial-success");return r==null?0:new Date(toString$3(r)).getTime()}class CircuitRelayTransportListener extends TypedEventEmitter{connectionManager;reservationStore;discovery;listeningAddrs;log;listenTimeout;reservationId;relay;constructor(r,g={}){super(),this.log=r.logger.forComponent("libp2p:circuit-relay:transport:listener"),this.connectionManager=r.connectionManager,this.reservationStore=r.relayStore,this.listeningAddrs=[],this.listenTimeout=g.listenTimeout??DEFAULT_RESERVATION_COMPLETION_TIMEOUT,this.reservationStore.addEventListener("relay:removed",this._onRemoveRelayPeer),this.reservationStore.addEventListener("relay:created-reservation",this._onAddRelayPeer)}_onRemoveRelayPeer=r=>{this.log("relay removed %p our relay %p",r.detail.relay,this.relay,this.relay?.equals(r.detail.relay)),this.relay?.equals(r.detail.relay)===!0&&(this.log("relay peer removed %p",r.detail.relay),this.listeningAddrs=[],this.safeDispatchEvent("listening"))};_onAddRelayPeer=r=>{const{relay:g,details:_}=r.detail;_.type!=="configured"&&_.id===this.reservationId&&(this.log("relay peer added %p",g),this.relay=g,this.listeningAddrs=_.reservation.addrs.map(x=>multiaddr(x).encapsulate("/p2p-circuit")),this.safeDispatchEvent("listening"))};async listen(r){if(this.log("listen on %a",r),CircuitSearch.exactMatch(r))this.reservationId=this.reservationStore.reserveRelay();else if(CircuitListen.exactMatch(r)){const g=AbortSignal.timeout(this.listenTimeout);setMaxListeners(1/0,g);const _=r.decapsulate("/p2p-circuit"),x=await this.connectionManager.openConnection(_,{signal:g});if(!this.reservationStore.hasReservation(x.remotePeer)){this.log("making reservation on peer %p",x.remotePeer);const S=await this.reservationStore.addRelay(x.remotePeer,"configured");this.log("made reservation on peer %p",x.remotePeer),this.relay=S.relay,this.listeningAddrs=S.details.reservation.addrs.map(E=>multiaddr(E).encapsulate("/p2p-circuit")),queueMicrotask(()=>{this.safeDispatchEvent("listening")})}}else throw new ListenError(`Could not listen on p2p-circuit address "${r}"`)}getAddrs(){return[...this.listeningAddrs.values()].flat()}async close(){this.reservationStore.cancelReservations(),this.listeningAddrs=[],this.reservationStore.removeEventListener("relay:removed",this._onRemoveRelayPeer),queueMicrotask(()=>{this.safeDispatchEvent("close")})}}function createListener$2(n){return new CircuitRelayTransportListener(n)}const urlAlphabet="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let nanoid=(n=21)=>{let r="",g=crypto.getRandomValues(new Uint8Array(n|=0));for(;n--;)r+=urlAlphabet[g[n]&63];return r};const REFRESH_WINDOW=60*1e3*10,REFRESH_TIMEOUT=60*1e3*5,REFRESH_TIMEOUT_MIN=30*1e3;class ReservationStore extends TypedEventEmitter{peerId;connectionManager;peerStore;events;reserveQueue;reservations;pendingReservations;maxReservationQueueLength;reservationCompletionTimeout;started;log;relayFilter;constructor(r,g){super(),this.log=r.logger.forComponent("libp2p:circuit-relay:transport:reservation-store"),this.peerId=r.peerId,this.connectionManager=r.connectionManager,this.peerStore=r.peerStore,this.events=r.events,this.reservations=new PeerMap,this.pendingReservations=[],this.maxReservationQueueLength=g?.maxReservationQueueLength??DEFAULT_MAX_RESERVATION_QUEUE_LENGTH,this.reservationCompletionTimeout=g?.reservationCompletionTimeout??DEFAULT_RESERVATION_COMPLETION_TIMEOUT,this.started=!1,this.relayFilter=createScalableCuckooFilter(100),this.reserveQueue=new PeerQueue({concurrency:g?.reservationConcurrency??DEFAULT_RESERVATION_CONCURRENCY,metricName:"libp2p_relay_reservation_queue",metrics:r.metrics}),this.events.addEventListener("connection:close",_=>{[...this.reservations.values()].find(S=>S.connection===_.detail.id)!=null&&this.#t(_.detail.remotePeer).catch(S=>{this.log("could not remove relay %p - %e",_.detail,S)})})}isStarted(){return this.started}start(){this.started=!0}afterStart(){Promise.resolve().then(async()=>{const r=await this.peerStore.all({filters:[g=>g.tags.has(KEEP_ALIVE_TAG$1)]});this.log("removing tag from %d old relays",r.length),await Promise.all(r.map(async g=>{await this.peerStore.merge(g.id,{tags:{[KEEP_ALIVE_TAG$1]:void 0}})})),this.log("redialing %d old relays",r.length),await Promise.all(r.map(async g=>this.addRelay(g.id,"discovered"))),this.#r()}).catch(r=>{this.log.error(r)})}stop(){this.reserveQueue.clear(),this.reservations.forEach(({timeout:r})=>{clearTimeout(r)}),this.reservations.clear(),this.started=!1}reserveRelay(){const r=nanoid();return this.pendingReservations.push(r),this.#r(),r}async addRelay(r,g){if(this.peerId.equals(r))throw this.log.trace("not trying to use self as relay"),new ListenError("Cannot use self as relay");if(this.reserveQueue.size>this.maxReservationQueueLength)throw new RelayQueueFullError("The reservation queue is full");const _=this.reserveQueue.find(r);if(_!=null)return this.log.trace("potential relay peer %p is already in the reservation queue",r),_.join();if(this.relayFilter.has(r.toMultihash().bytes))throw new ListenError("The relay was previously invalid");return this.log.trace("try to reserve relay slot with %p",r),this.reserveQueue.add(async()=>{const x=Date.now();try{const S=this.reservations.get(r);if(S!=null){const N=this.connectionManager.getConnections(r);let M=!1;if(N.length===0&&this.log("already have relay reservation with %p but we are no longer connected",r),N.map(O=>O.id).includes(S.connection)&&(this.log("already have relay reservation with %p and the original connection is still open",r),M=!0),M&&getExpirationMilliseconds(S.reservation.expire)>REFRESH_WINDOW)return this.log("already have relay reservation with %p but we are still connected and it does not expire soon",r),{relay:r,details:S};await this.#t(r)}if(g==="discovered"&&this.pendingReservations.length===0)throw new HadEnoughRelaysError("Not making reservation on discovered relay because we do not need any more relays");const E=AbortSignal.timeout(this.reservationCompletionTimeout);setMaxListeners(1/0,E);const C=await this.connectionManager.openConnection(r,{signal:E});if(Circuit$2.matches(C.remoteAddr))throw new DoubleRelayError("not creating reservation over relayed connection");const T=await this.#e(C,{signal:E}),R=getExpirationMilliseconds(T.expire);this.log("created reservation on relay peer %p, expiry date is %s",r,new Date(Date.now()+R).toString());const A=Math.min(Math.max(R-REFRESH_TIMEOUT,REFRESH_TIMEOUT_MIN),Math.pow(2,31)-1),I=setTimeout(()=>{this.log("refresh reservation to relay %p",r),this.addRelay(r,g).catch(async N=>{this.log.error("could not refresh reservation to relay %p - %e",r,N),await this.#t(r)}).catch(N=>{this.log.error("could not remove expired reservation to relay %p - %e",r,N)})},A);let B;if(g==="discovered"){const N=this.pendingReservations.pop();if(N==null)throw new HadEnoughRelaysError("Made reservation on relay but did not need any more discovered relays");B={timeout:I,reservation:T,type:g,connection:C.id,id:N}}else B={timeout:I,reservation:T,type:g,connection:C.id};this.reservations.set(r,B),await this.peerStore.merge(r,{tags:{[KEEP_ALIVE_TAG$1]:{value:1,ttl:R}}}),this.#r();const D={relay:r,details:B};return this.safeDispatchEvent("relay:created-reservation",{detail:D}),D}catch(S){throw g==="discovered"&&S.name==="HadEnoughRelaysError"||this.log.error("could not reserve slot on %p after %dms - %e",r,Date.now()-x,S),(S.name==="DialError"||S.name==="UnsupportedProtocolError")&&this.relayFilter.add(r.toMultihash().bytes),this.#t(r).catch(E=>{this.log.error("could not remove reservation on %p after reserving slot failed - %e",r,E)}),S}},{peerId:r})}hasReservation(r){return this.reservations.has(r)}getReservation(r){return this.reservations.get(r)?.reservation}reservationCount(r){return r==null?this.reservations.size:[...this.reservations.values()].reduce((g,_)=>(_.type===r&&g++,g),0)}cancelReservations(){[...this.reservations.values()].forEach(r=>{clearTimeout(r.timeout)}),this.reservations.clear()}async#e(r,g){g.signal?.throwIfAborted(),this.log("requesting reservation from %p",r.remotePeer);const _=await r.newStream(RELAY_V2_HOP_CODEC,g),S=pbStream(_).pb(HopMessage);this.log.trace("send RESERVE to %p",r.remotePeer),await S.write({type:HopMessage.Type.RESERVE},g);let E;try{this.log.trace("reading response from %p",r.remotePeer),E=await S.read(g)}catch(T){throw _.abort(T),T}finally{_.status!=="closed"&&await _.close(g)}if(this.log.trace("read response %o",E),E.status===Status.OK&&E.reservation!=null){const T=new Set;T.add(r.remoteAddr.toString());for(const R of E.reservation.addrs){let A=multiaddr(R);A.getPeerId()==null&&(A=A.encapsulate(`/p2p/${r.remotePeer}`)),A=multiaddr(A.toString().replace(`/p2p/${r.remotePeer}/p2p/${r.remotePeer}`,`/p2p/${r.remotePeer}`)),T.add(A.toString())}return E.reservation.addrs=[...T].map(R=>multiaddr(R).bytes),E.reservation}const C=`reservation failed with status ${E.status??"undefined"}`;throw this.log.error(C),new Error(C)}async#t(r){const g=this.reservations.get(r);g!=null&&(this.log("removing relay reservation with %p from local store",r),clearTimeout(g.timeout),this.reservations.delete(r),g.type==="discovered"&&this.pendingReservations.push(g.id),await this.peerStore.merge(r,{tags:{[KEEP_ALIVE_TAG$1]:void 0}}),this.safeDispatchEvent("relay:removed",{detail:{relay:r,details:g}}),this.#r())}#r(){if(this.pendingReservations.length===0){this.log.trace("have discovered enough relays"),this.reserveQueue.clear(),this.safeDispatchEvent("relay:found-enough-relays");return}this.relayFilter=createScalableCuckooFilter(100),this.log("not discovered enough relays %d/%d",this.reservations.size,this.pendingReservations.length),this.safeDispatchEvent("relay:not-enough-relays")}}const isValidStop=n=>{if(n.peer==null)return!1;try{n.peer.addrs.forEach(multiaddr)}catch{return!1}return!0},defaults={maxInboundStopStreams:MAX_CONNECTIONS$1,maxOutboundStopStreams:MAX_CONNECTIONS$1,stopTimeout:3e4};class CircuitRelayTransport{discovery;registrar;peerStore;connectionManager;transportManager;peerId;upgrader;addressManager;connectionGater;reservationStore;logger;maxInboundStopStreams;maxOutboundStopStreams;stopTimeout;started;log;constructor(r,g){this.log=r.logger.forComponent("libp2p:circuit-relay:transport"),this.registrar=r.registrar,this.peerStore=r.peerStore,this.connectionManager=r.connectionManager,this.transportManager=r.transportManager,this.logger=r.logger,this.peerId=r.peerId,this.upgrader=r.upgrader,this.addressManager=r.addressManager,this.connectionGater=r.connectionGater,this.maxInboundStopStreams=g.maxInboundStopStreams??defaults.maxInboundStopStreams,this.maxOutboundStopStreams=g.maxOutboundStopStreams??defaults.maxOutboundStopStreams,this.stopTimeout=g.stopTimeout??defaults.stopTimeout,this.discovery=new RelayDiscovery(r,{filter:g.discoveryFilter??peerFilter(DEFAULT_DISCOVERY_FILTER_SIZE,DEFAULT_DISCOVERY_FILTER_ERROR_RATE)}),this.discovery.addEventListener("relay:discover",_=>{this.reservationStore.addRelay(_.detail,"discovered").catch(x=>{x.name!=="HadEnoughRelaysError"&&x.name!=="RelayQueueFullError"&&this.log.error("could not add discovered relay %p",_.detail,x)})}),this.reservationStore=new ReservationStore(r,g),this.reservationStore.addEventListener("relay:not-enough-relays",()=>{this.discovery?.startDiscovery()}),this.reservationStore.addEventListener("relay:found-enough-relays",()=>{this.discovery?.stopDiscovery()}),this.started=!1}[Symbol.toStringTag]="@libp2p/circuit-relay-v2-transport";[serviceCapabilities]=["@libp2p/transport","@libp2p/circuit-relay-v2-transport"];get[serviceDependencies](){return this.discovery!=null?["@libp2p/identify"]:[]}[transportSymbol]=!0;isStarted(){return this.started}async start(){await this.registrar.handle(RELAY_V2_STOP_CODEC,r=>{this.onStop(r).catch(g=>{this.log.error("error while handling STOP protocol",g),r.stream.abort(g)})},{maxInboundStreams:this.maxInboundStopStreams,maxOutboundStreams:this.maxOutboundStopStreams,runOnLimitedConnection:!0}),await start(this.discovery,this.reservationStore),this.started=!0}async stop(){await stop(this.discovery,this.reservationStore),await this.registrar.unhandle(RELAY_V2_STOP_CODEC),this.started=!1}async dial(r,g){if(r.protoCodes().filter(D=>D===CIRCUIT_PROTO_CODE).length!==1){const D="Invalid circuit relay address";throw this.log.error(D,r),new DialError(D)}const _=r.toString().split("/p2p-circuit"),x=multiaddr(_[0]),S=multiaddr(_[_.length-1]),E=x.getPeerId(),C=S.getPeerId();if(E==null||C==null){const D=`ircuit relay dial to ${r.toString()} failed as address did not have both relay and destination PeerIDs`;throw this.log.error(`c${D}`),new DialError(`C${D}`)}const T=peerIdFromString$1(E),R=peerIdFromString$1(C);let I=this.connectionManager.getConnections(T)[0];I==null?(await this.peerStore.merge(T,{multiaddrs:[x]}),g.onProgress?.(new CustomProgressEvent("circuit-relay:open-connection")),I=await this.connectionManager.openConnection(T,g)):g.onProgress?.(new CustomProgressEvent("circuit-relay:reuse-connection"));let B;try{g.onProgress?.(new CustomProgressEvent("circuit-relay:open-hop-stream")),B=await I.newStream(RELAY_V2_HOP_CODEC,g);const D=pbStream(B),N=D.pb(HopMessage);g.onProgress?.(new CustomProgressEvent("circuit-relay:write-connect-message")),await N.write({type:HopMessage.Type.CONNECT,peer:{id:R.toMultihash().bytes,addrs:[multiaddr(S).bytes]}},g),g.onProgress?.(new CustomProgressEvent("circuit-relay:read-connect-response"));const M=await N.read(g);if(M.status!==Status.OK)throw new InvalidMessageError(`failed to connect via relay with status ${M?.status?.toString()??"undefined"}`);const O=new LimitTracker(M.limit),L=streamToMaConnection({stream:D.unwrap(),remoteAddr:r,localAddr:x.encapsulate(`/p2p-circuit/p2p/${this.peerId.toString()}`),logger:this.logger,onDataRead:O.onData,onDataWrite:O.onData});return this.log("new outbound relayed connection %a",L.remoteAddr),await this.upgrader.upgradeOutbound(L,{...g,limits:O.getLimits()})}catch(D){throw this.log.error("circuit relay dial to destination %p via relay %p failed",R,T,D),B?.abort(D),D}}createListener(r){return createListener$2({connectionManager:this.connectionManager,relayStore:this.reservationStore,logger:this.logger})}listenFilter(r){return r=Array.isArray(r)?r:[r],r.filter(g=>CircuitListen.exactMatch(g)||CircuitSearch.exactMatch(g))}dialFilter(r){return r=Array.isArray(r)?r:[r],r.filter(g=>Circuit$2.exactMatch(g))}async onStop({connection:r,stream:g}){if(!this.reservationStore.hasReservation(r.remotePeer))try{this.log("dialed via relay we did not have a reservation on, start listening on that relay address"),await this.transportManager.listen([r.remoteAddr.encapsulate("/p2p-circuit")])}catch(I){this.log.error("failed to listen on a relay peer we were dialed via but did not have a reservation on",I)}const _=AbortSignal.timeout(this.stopTimeout),x=pbStream(g).pb(StopMessage),S=await x.read({signal:_});if(this.log("new circuit relay v2 stop stream from %p with type %s",r.remotePeer,S.type),S?.type===void 0){this.log.error("type was missing from circuit v2 stop protocol request from %s",r.remotePeer),await x.write({type:StopMessage.Type.STATUS,status:Status.MALFORMED_MESSAGE},{signal:_}),await g.close();return}if(S.type!==StopMessage.Type.CONNECT){this.log.error("invalid stop connect request via peer %p",r.remotePeer),await x.write({type:StopMessage.Type.STATUS,status:Status.UNEXPECTED_MESSAGE},{signal:_}),await g.close();return}if(!isValidStop(S)){this.log.error("invalid stop connect request via peer %p",r.remotePeer),await x.write({type:StopMessage.Type.STATUS,status:Status.MALFORMED_MESSAGE},{signal:_}),await g.close();return}const E=peerIdFromMultihash(decode$h(S.peer.id));if(await this.connectionGater.denyInboundRelayedConnection?.(r.remotePeer,E)===!0){this.log.error("connection gater denied inbound relayed connection from %p",r.remotePeer),await x.write({type:StopMessage.Type.STATUS,status:Status.PERMISSION_DENIED},{signal:_}),await g.close();return}this.log.trace("sending success response to %p",r.remotePeer),await x.write({type:StopMessage.Type.STATUS,status:Status.OK},{signal:_});const C=new LimitTracker(S.limit),T=r.remoteAddr.encapsulate(`/p2p-circuit/p2p/${E.toString()}`),R=this.addressManager.getAddresses()[0],A=streamToMaConnection({stream:x.unwrap().unwrap(),remoteAddr:T,localAddr:R,logger:this.logger,onDataRead:C.onData,onDataWrite:C.onData});this.log("new inbound relayed connection %a",A.remoteAddr),await this.upgrader.upgradeInbound(A,{limits:C.getLimits()}),this.log("%s connection %a upgraded","inbound",A.remoteAddr)}}function circuitRelayTransport(n={}){return r=>new CircuitRelayTransport(r,n)}const createAbortError=()=>{const n=new Error("Delay aborted");return n.name="AbortError",n},clearMethods=new WeakMap;function createDelay({clearTimeout:n,setTimeout:r}={}){return(g,{value:_,signal:x}={})=>{if(x?.aborted)return Promise.reject(createAbortError());let S,E,C;const T=n??clearTimeout,R=()=>{T(S),C(createAbortError())},A=()=>{x&&x.removeEventListener("abort",R)},I=new Promise((B,D)=>{E=()=>{A(),B(_)},C=D,S=(r??setTimeout)(E,g)});return x&&x.addEventListener("abort",R,{once:!0}),clearMethods.set(I,()=>{T(S),S=null,E()}),I}}const delay=createDelay();var HolePunch;(function(n){(function(_){_.UNUSED="UNUSED",_.CONNECT="CONNECT",_.SYNC="SYNC"})(n.Type||(n.Type={}));let r;(function(_){_[_.UNUSED=0]="UNUSED",_[_.CONNECT=100]="CONNECT",_[_.SYNC=300]="SYNC"})(r||(r={})),function(_){_.codec=()=>enumeration(r)}(n.Type||(n.Type={}));let g;n.codec=()=>(g==null&&(g=message((_,x,S={})=>{if(S.lengthDelimited!==!1&&x.fork(),_.type!=null&&(x.uint32(8),n.Type.codec().encode(_.type,x)),_.observedAddresses!=null)for(const E of _.observedAddresses)x.uint32(18),x.bytes(E);S.lengthDelimited!==!1&&x.ldelim()},(_,x,S={})=>{const E={observedAddresses:[]},C=x==null?_.len:_.pos+x;for(;_.pos<C;){const T=_.uint32();switch(T>>>3){case 1:{E.type=n.Type.codec().decode(_);break}case 2:{if(S.limits?.observedAddresses!=null&&E.observedAddresses.length===S.limits.observedAddresses)throw new MaxLengthError('Decode error - map field "observedAddresses" had too many elements');E.observedAddresses.push(_.bytes());break}default:{_.skipType(T&7);break}}}return E})),g),n.encode=_=>encodeMessage(_,n.codec()),n.decode=(_,x)=>decodeMessage(_,n.codec(),x)})(HolePunch||(HolePunch={}));function isPublicAndDialable(n,r){return Circuit$2.matches(n)||r.dialTransportForMultiaddr(n)==null?!1:DNS$1.matches(n)?!0:IP$1.matches(n)?isPrivateIp(n.toOptions().host)===!1:!1}const MAX_DCUTR_MESSAGE_SIZE=1024*4,DCUTR_DIAL_PRIORITY=100,defaultValues$4={timeout:5e3,retries:3,maxInboundStreams:1,maxOutboundStreams:1};class DefaultDCUtRService{started;timeout;retries;maxInboundStreams;maxOutboundStreams;peerStore;registrar;connectionManager;addressManager;transportManager;topologyId;log;constructor(r,g){this.log=r.logger.forComponent("libp2p:dcutr"),this.started=!1,this.peerStore=r.peerStore,this.registrar=r.registrar,this.addressManager=r.addressManager,this.connectionManager=r.connectionManager,this.transportManager=r.transportManager,this.timeout=g.timeout??defaultValues$4.timeout,this.retries=g.retries??defaultValues$4.retries,this.maxInboundStreams=g.maxInboundStreams??defaultValues$4.maxInboundStreams,this.maxOutboundStreams=g.maxOutboundStreams??defaultValues$4.maxOutboundStreams}[Symbol.toStringTag]="@libp2p/dcutr";[serviceDependencies]=["@libp2p/identify"];isStarted(){return this.started}async start(){this.started||(this.topologyId=await this.registrar.register(multicodec,{notifyOnLimitedConnection:!0,onConnect:(r,g)=>{Circuit$2.exactMatch(g.remoteAddr)&&g.direction==="inbound"&&this.upgradeInbound(g).catch(_=>{this.log.error("error during outgoing DCUtR attempt",_)})}}),await this.registrar.handle(multicodec,r=>{this.handleIncomingUpgrade(r.stream,r.connection).catch(g=>{this.log.error("error during incoming DCUtR attempt",g),r.stream.abort(g)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:!0}),this.started=!0)}async stop(){await this.registrar.unhandle(multicodec),this.topologyId!=null&&this.registrar.unregister(this.topologyId),this.started=!1}async upgradeInbound(r){if(await this.attemptUnilateralConnectionUpgrade(r))return;let g;for(let _=0;_<this.retries;_++){const x={signal:AbortSignal.timeout(this.timeout)};try{g=await r.newStream([multicodec],{signal:x.signal,runOnLimitedConnection:!0});const S=pbStream(g,{maxDataLength:MAX_DCUTR_MESSAGE_SIZE}).pb(HolePunch);this.log("B sending connect to %p",r.remotePeer);const E=Date.now();await S.write({type:HolePunch.Type.CONNECT,observedAddresses:this.addressManager.getAddresses().map(I=>I.bytes)},x),this.log("B receiving connect from %p",r.remotePeer);const C=await S.read(x);if(C.type!==HolePunch.Type.CONNECT)throw this.log("A sent wrong message type"),new InvalidMessageError("DCUtR message type was incorrect");const T=this.getDialableMultiaddrs(C.observedAddresses);if(T.length===0)throw this.log("A did not have any dialable multiaddrs"),new InvalidMessageError("DCUtR connect message had no multiaddrs");const R=Date.now()-E;this.log("A sending sync, rtt %dms",R),await S.write({type:HolePunch.Type.SYNC,observedAddresses:[]},x),this.log("A waiting for half RTT"),await delay(R/2),this.log("B dialing",T);const A=await this.connectionManager.openConnection(T,{signal:x.signal,priority:DCUTR_DIAL_PRIORITY});this.log("DCUtR to %p succeeded to address %a, closing relayed connection",r.remotePeer,A.remoteAddr),await r.close(x);break}catch(S){if(this.log.error("error while attempting DCUtR on attempt %d of %d",_+1,this.retries,S),g?.abort(S),_===this.retries)throw S}finally{g!=null&&await g.close(x)}}}async attemptUnilateralConnectionUpgrade(r){const _=(await this.peerStore.get(r.remotePeer)).addresses.map(x=>{const S=x.multiaddr;return S.getPeerId()==null?S.encapsulate(`/p2p/${r.remotePeer}`):S}).filter(x=>isPublicAndDialable(x,this.transportManager));if(_.length>0){const x=AbortSignal.timeout(this.timeout);try{this.log("attempting unilateral connection upgrade to %a",_);const S=await this.connectionManager.openConnection(_,{signal:x,force:!0});if(Circuit$2.exactMatch(S.remoteAddr))throw new Error("Could not open a new, non-limited, connection");return this.log("unilateral connection upgrade to %p succeeded via %a, closing relayed connection",r.remotePeer,S.remoteAddr),await r.close({signal:x}),!0}catch(S){this.log.error("unilateral connection upgrade to %p on addresses %a failed",r.remotePeer,_,S)}}else this.log("peer %p has no public addresses, not attempting unilateral connection upgrade",r.remotePeer);return!1}async handleIncomingUpgrade(r,g){const _={signal:AbortSignal.timeout(this.timeout)};try{const x=pbStream(r,{maxDataLength:MAX_DCUTR_MESSAGE_SIZE}).pb(HolePunch);this.log("A receiving connect");const S=await x.read(_);if(S.type!==HolePunch.Type.CONNECT)throw this.log("B sent wrong message type"),new InvalidMessageError("DCUtR message type was incorrect");if(S.observedAddresses.length===0)throw this.log("B sent no multiaddrs"),new InvalidMessageError("DCUtR connect message had no multiaddrs");const E=this.getDialableMultiaddrs(S.observedAddresses);if(E.length===0)throw this.log("B had no dialable multiaddrs"),new InvalidMessageError("DCUtR connect message had no dialable multiaddrs");if(this.log("A sending connect"),await x.write({type:HolePunch.Type.CONNECT,observedAddresses:this.addressManager.getAddresses().map(R=>R.bytes)}),this.log("A receiving sync"),(await x.read(_)).type!==HolePunch.Type.SYNC)throw new InvalidMessageError("DCUtR message type was incorrect");this.log("A dialing",E);const T=await this.connectionManager.openConnection(E,{signal:_.signal,priority:DCUTR_DIAL_PRIORITY,force:!0});this.log("DCUtR to %p succeeded via %a, closing relayed connection",g.remotePeer,T.remoteAddr),await g.close(_)}catch(x){this.log.error("incoming DCUtR from %p failed",g.remotePeer,x),r.abort(x)}finally{await r.close(_)}}getDialableMultiaddrs(r){const g=[];for(const _ of r)if(!(_==null||_.length===0))try{const x=multiaddr(_);if(!isPublicAndDialable(x,this.transportManager))continue;g.push(x)}catch{}return g}}const multicodec="/libp2p/dcutr";function dcutr(n={}){return r=>new DefaultDCUtRService(r,n)}const IDENTIFY_PROTOCOL_VERSION="0.1.0",MULTICODEC_IDENTIFY_PROTOCOL_NAME="id",MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME="id/push",MULTICODEC_IDENTIFY_PROTOCOL_VERSION="1.0.0",MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION="1.0.0",MAX_IDENTIFY_MESSAGE_SIZE=1024*8,MAX_PUSH_CONCURRENCY=32;var Identify$1;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.protocolVersion!=null&&(_.uint32(42),_.string(g.protocolVersion)),g.agentVersion!=null&&(_.uint32(50),_.string(g.agentVersion)),g.publicKey!=null&&(_.uint32(10),_.bytes(g.publicKey)),g.listenAddrs!=null)for(const S of g.listenAddrs)_.uint32(18),_.bytes(S);if(g.observedAddr!=null&&(_.uint32(34),_.bytes(g.observedAddr)),g.protocols!=null)for(const S of g.protocols)_.uint32(26),_.string(S);g.signedPeerRecord!=null&&(_.uint32(66),_.bytes(g.signedPeerRecord)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={listenAddrs:[],protocols:[]},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 5:{S.protocolVersion=g.string();break}case 6:{S.agentVersion=g.string();break}case 1:{S.publicKey=g.bytes();break}case 2:{if(x.limits?.listenAddrs!=null&&S.listenAddrs.length===x.limits.listenAddrs)throw new MaxLengthError('Decode error - map field "listenAddrs" had too many elements');S.listenAddrs.push(g.bytes());break}case 4:{S.observedAddr=g.bytes();break}case 3:{if(x.limits?.protocols!=null&&S.protocols.length===x.limits.protocols)throw new MaxLengthError('Decode error - map field "protocols" had too many elements');S.protocols.push(g.string());break}case 8:{S.signedPeerRecord=g.bytes();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Identify$1||(Identify$1={}));const defaultValues$3={protocolPrefix:"ipfs",timeout:5e3,maxInboundStreams:1,maxOutboundStreams:1,maxObservedAddresses:10,maxMessageSize:MAX_IDENTIFY_MESSAGE_SIZE,runOnConnectionOpen:!0,runOnSelfUpdate:!0,runOnLimitedConnection:!0,concurrency:MAX_PUSH_CONCURRENCY};function getCleanMultiaddr(n){if(n!=null&&n.length>0)try{return multiaddr(n)}catch{}}function getAgentVersion(n,r){return r!=null||(r=`${n.name}/${n.version}`,isNode||isElectronMain?r+=` UserAgent=${globalThis.process.version}`:(isBrowser$1||isWebWorker||isElectronRenderer||isReactNative)&&(r+=` UserAgent=${globalThis.navigator.userAgent}`)),r}async function consumeIdentifyMessage(n,r,g,_,x){if(g("received identify from %p",_.remotePeer),x==null)throw new InvalidMessageError("message was null or undefined");const S={};if(x.listenAddrs.length>0&&(S.addresses=x.listenAddrs.map(T=>({isCertified:!1,multiaddr:multiaddr(T)}))),x.protocols.length>0&&(S.protocols=x.protocols),x.publicKey!=null){const T=publicKeyFromProtobuf(x.publicKey);if(!peerIdFromPublicKey(T).equals(_.remotePeer))throw new InvalidMessageError("public key did not match remote PeerId");S.publicKey=T}let E;if(x.signedPeerRecord!=null){g.trace("received signedPeerRecord from %p",_.remotePeer);let T=x.signedPeerRecord;const R=await RecordEnvelope.openAndCertify(T,PeerRecord.DOMAIN);let A=PeerRecord.createFromProtobuf(R.payload);const I=peerIdFromCID(R.publicKey.toCID());if(!A.peerId.equals(I))throw new InvalidMessageError("signing key does not match PeerId in the PeerRecord");if(!_.remotePeer.equals(A.peerId))throw new InvalidMessageError("signing key does not match remote PeerId");let B;try{B=await n.get(A.peerId)}catch(D){if(D.name!=="NotFoundError")throw D}if(B!=null&&(S.metadata=B.metadata,B.peerRecordEnvelope!=null)){const D=await RecordEnvelope.createFromProtobuf(B.peerRecordEnvelope),N=PeerRecord.createFromProtobuf(D.payload);N.seqNumber>=A.seqNumber&&(g("sequence number was lower or equal to existing sequence number - stored: %d received: %d",N.seqNumber,A.seqNumber),A=N,T=B.peerRecordEnvelope)}S.peerRecordEnvelope=T,S.addresses=A.multiaddrs.map(D=>({isCertified:!0,multiaddr:D})),E={seq:A.seqNumber,addresses:A.multiaddrs}}else g("%p did not send a signed peer record",_.remotePeer);if(g.trace("patching %p with",_.remotePeer,S),await n.patch(_.remotePeer,S),x.agentVersion!=null||x.protocolVersion!=null){const T={};x.agentVersion!=null&&(T.AgentVersion=fromString(x.agentVersion)),x.protocolVersion!=null&&(T.ProtocolVersion=fromString(x.protocolVersion)),g.trace("merging %p metadata",_.remotePeer,T),await n.merge(_.remotePeer,{metadata:T})}const C={peerId:_.remotePeer,protocolVersion:x.protocolVersion,agentVersion:x.agentVersion,publicKey:x.publicKey,listenAddrs:x.listenAddrs.map(T=>multiaddr(T)),observedAddr:x.observedAddr==null?void 0:multiaddr(x.observedAddr),protocols:x.protocols,signedPeerRecord:E,connection:_};return r.safeDispatchEvent("peer:identify",{detail:C}),C}class AbstractIdentify{host;protocol;started;timeout;peerId;privateKey;peerStore;registrar;addressManager;maxInboundStreams;maxOutboundStreams;maxMessageSize;maxObservedAddresses;events;runOnLimitedConnection;log;constructor(r,g){this.protocol=g.protocol,this.started=!1,this.peerId=r.peerId,this.privateKey=r.privateKey,this.peerStore=r.peerStore,this.registrar=r.registrar,this.addressManager=r.addressManager,this.events=r.events,this.log=g.log,this.timeout=g.timeout??defaultValues$3.timeout,this.maxInboundStreams=g.maxInboundStreams??defaultValues$3.maxInboundStreams,this.maxOutboundStreams=g.maxOutboundStreams??defaultValues$3.maxOutboundStreams,this.maxMessageSize=g.maxMessageSize??defaultValues$3.maxMessageSize,this.maxObservedAddresses=g.maxObservedAddresses??defaultValues$3.maxObservedAddresses,this.runOnLimitedConnection=g.runOnLimitedConnection??defaultValues$3.runOnLimitedConnection,this.host={protocolVersion:`${g.protocolPrefix??defaultValues$3.protocolPrefix}/${IDENTIFY_PROTOCOL_VERSION}`,agentVersion:getAgentVersion(r.nodeInfo,g.agentVersion)}}isStarted(){return this.started}async start(){this.started||(await this.peerStore.merge(this.peerId,{metadata:{AgentVersion:fromString(this.host.agentVersion),ProtocolVersion:fromString(this.host.protocolVersion)}}),await this.registrar.handle(this.protocol,r=>{this.handleProtocol(r).catch(g=>{this.log.error(g)})},{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection}),this.started=!0)}async stop(){await this.registrar.unhandle(this.protocol),this.started=!1}}class IdentifyPush extends AbstractIdentify{connectionManager;concurrency;constructor(r,g={}){super(r,{...g,protocol:`/${g.protocolPrefix??defaultValues$3.protocolPrefix}/${MULTICODEC_IDENTIFY_PUSH_PROTOCOL_NAME}/${MULTICODEC_IDENTIFY_PUSH_PROTOCOL_VERSION}`,log:r.logger.forComponent("libp2p:identify-push")}),this.connectionManager=r.connectionManager,this.concurrency=g.concurrency??defaultValues$3.concurrency,(g.runOnSelfUpdate??defaultValues$3.runOnSelfUpdate)&&r.events.addEventListener("self:peer:update",_=>{this.push().catch(x=>{this.log.error(x)})})}[serviceCapabilities]=["@libp2p/identify-push"];async push(){if(!this.isStarted())return;const r=this.addressManager.getAddresses().map(A=>A.decapsulateCode(getProtocol("p2p").code)),g=new PeerRecord({peerId:this.peerId,multiaddrs:r}),_=await RecordEnvelope.seal(g,this.privateKey),x=this.registrar.getProtocols(),S=await this.peerStore.get(this.peerId),E=toString$3(S.metadata.get("AgentVersion")??fromString(this.host.agentVersion)),C=toString$3(S.metadata.get("ProtocolVersion")??fromString(this.host.protocolVersion)),T=this;async function*R(){for(const A of T.connectionManager.getConnections())(await T.peerStore.get(A.remotePeer)).protocols.includes(T.protocol)&&(yield async()=>{let B;const D=AbortSignal.timeout(T.timeout);setMaxListeners(1/0,D);try{B=await A.newStream(T.protocol,{signal:D,runOnLimitedConnection:T.runOnLimitedConnection}),await pbStream(B,{maxDataLength:T.maxMessageSize}).pb(Identify$1).write({listenAddrs:r.map(M=>M.bytes),signedPeerRecord:_.marshal(),protocols:x,agentVersion:E,protocolVersion:C},{signal:D}),await B.close({signal:D})}catch(N){T.log.error("could not push identify update to peer",N),B?.abort(N)}})}await drain(parallel$1(R(),{concurrency:this.concurrency}))}async handleProtocol(r){const{connection:g,stream:_}=r;try{if(this.peerId.equals(g.remotePeer))throw new Error("received push from ourselves?");const x={signal:AbortSignal.timeout(this.timeout)},E=await pbStream(_,{maxDataLength:this.maxMessageSize}).pb(Identify$1).read(x);await _.close(x),await consumeIdentifyMessage(this.peerStore,this.events,this.log,g,E)}catch(x){this.log.error("received invalid message",x),_.abort(x);return}this.log.trace("handled push from %p",g.remotePeer)}}const CODEC_IP6$5=41;function isGlobalUnicast(n){try{const[[r,g]]=n.stringTuples();if(g==null)return!1;if(r===CODEC_IP6$5)return cidrContains("2000::/3",g)}catch{}return!1}const CODEC_IP4$3=4,CODEC_IP6$4=41,CODEC_DNS$1=53,CODEC_DNS4$1=54,CODEC_DNS6$1=55,CODEC_DNSADDR$1=56;function isPrivate(n){try{const[[r,g]]=n.stringTuples();if(g==null)return!0;if(r===CODEC_DNS$1||r===CODEC_DNS4$1||r===CODEC_DNS6$1||r===CODEC_DNSADDR$1)return!1;if(r===CODEC_IP4$3||r===CODEC_IP6$4)return isPrivateIp(g)??!1}catch{}return!0}const CODEC_IP6$3=41;class Identify extends AbstractIdentify{constructor(r,g={}){super(r,{...g,protocol:`/${g.protocolPrefix??defaultValues$3.protocolPrefix}/${MULTICODEC_IDENTIFY_PROTOCOL_NAME}/${MULTICODEC_IDENTIFY_PROTOCOL_VERSION}`,log:r.logger.forComponent("libp2p:identify")}),(g.runOnConnectionOpen??defaultValues$3.runOnConnectionOpen)&&r.events.addEventListener("connection:open",_=>{const x=_.detail;this.identify(x).catch(S=>{S.name!==UnsupportedProtocolError.name&&this.log.error("error during identify trigged by connection:open",S)})})}[serviceCapabilities]=["@libp2p/identify"];async _identify(r,g={}){let _;if(g.signal==null){const x=AbortSignal.timeout(this.timeout);setMaxListeners(1/0,x),g={...g,signal:x}}try{_=await r.newStream(this.protocol,{...g,runOnLimitedConnection:this.runOnLimitedConnection});const S=await pbStream(_,{maxDataLength:this.maxMessageSize}).pb(Identify$1).read(g);return await _.close(g),S}catch(x){throw _?.abort(x),x}}async identify(r,g={}){const _=await this._identify(r,g),{publicKey:x,protocols:S,observedAddr:E}=_;if(x==null)throw new InvalidMessageError("public key was missing from identify message");const C=publicKeyFromProtobuf(x),T=peerIdFromCID(C.toCID());if(!r.remotePeer.equals(T))throw new InvalidMessageError("identified peer does not match the expected peer");if(this.peerId.equals(T))throw new InvalidMessageError("identified peer is our own peer id?");return this.maybeAddObservedAddress(E),this.log("identify completed for peer %p and protocols %o",T,S),consumeIdentifyMessage(this.peerStore,this.events,this.log,r,_)}maybeAddObservedAddress(r){const g=getCleanMultiaddr(r);if(g==null)return;if(this.log.trace("our observed address was %a",g),isPrivate(g)){this.log.trace("our observed address was private");return}if(g.stringTuples()[0][0]===CODEC_IP6$3&&!isGlobalUnicast(g)){this.log.trace("our observed address was IPv6 but not a global unicast address");return}TCP$1.exactMatch(g)||(this.log.trace("storing the observed address"),this.addressManager.addObservedAddr(g))}async handleProtocol(r){const{connection:g,stream:_}=r,x=AbortSignal.timeout(this.timeout);setMaxListeners(1/0,x);try{const S=await this.peerStore.get(this.peerId),E=this.addressManager.getAddresses().map(A=>A.decapsulateCode(getProtocol("p2p").code));let C=S.peerRecordEnvelope;if(E.length>0&&C==null){const A=new PeerRecord({peerId:this.peerId,multiaddrs:E});C=(await RecordEnvelope.seal(A,this.privateKey)).marshal().subarray()}let T=g.remoteAddr.bytes;IP_OR_DOMAIN.matches(g.remoteAddr)||(T=void 0),await pbStream(_).pb(Identify$1).write({protocolVersion:this.host.protocolVersion,agentVersion:this.host.agentVersion,publicKey:publicKeyToProtobuf(this.privateKey.publicKey),listenAddrs:E.map(A=>A.bytes),signedPeerRecord:C,observedAddr:T,protocols:S.protocols},{signal:x}),await _.close({signal:x})}catch(S){this.log.error("could not respond to identify request",S),_.abort(S)}}}function identify(n={}){return r=>new Identify(r,n)}function identifyPush(n={}){return r=>new IdentifyPush(r,n)}const second$1=1e3,minute$1=60*second$1,hour=60*minute$1,MAX_RECORD_AGE=36*hour,PROTOCOL$1="/ipfs/kad/1.0.0",PROVIDERS_VALIDITY=48*hour,REPROVIDE_THRESHOLD=24*hour,REPROVIDE_CONCURRENCY=10,REPROVIDE_MAX_QUEUE_SIZE=16384,REPROVIDE_INTERVAL=hour,K=20,ALPHA=3,QUERY_SELF_INTERVAL=5*minute$1,QUERY_SELF_INITIAL_INTERVAL=second$1,QUERY_SELF_TIMEOUT=5*second$1,TABLE_REFRESH_INTERVAL=5*minute$1,TABLE_REFRESH_QUERY_TIMEOUT=30*second$1,DEFAULT_QUERY_TIMEOUT=180*second$1,KEEP_ALIVE_TAG=`${KEEP_ALIVE}-kad-dht`;var Record$1;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.key!=null&&g.key.byteLength>0&&(_.uint32(10),_.bytes(g.key)),g.value!=null&&g.value.byteLength>0&&(_.uint32(18),_.bytes(g.value)),g.timeReceived!=null&&g.timeReceived!==""&&(_.uint32(42),_.string(g.timeReceived)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={key:alloc$1(0),value:alloc$1(0),timeReceived:""},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.key=g.bytes();break}case 2:{S.value=g.bytes();break}case 5:{S.timeReceived=g.string();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Record$1||(Record$1={}));function toRFC3339(n){const r=n.getUTCFullYear(),g=String(n.getUTCMonth()+1).padStart(2,"0"),_=String(n.getUTCDate()).padStart(2,"0"),x=String(n.getUTCHours()).padStart(2,"0"),S=String(n.getUTCMinutes()).padStart(2,"0"),E=String(n.getUTCSeconds()).padStart(2,"0"),C=n.getUTCMilliseconds(),T=String(C*1e3*1e3).padStart(9,"0");return`${r}-${g}-${_}T${x}:${S}:${E}.${T}Z`}function parseRFC3339(n){const r=new RegExp("(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})\\.(\\d+)Z"),g=String(n).trim().match(r);if(g==null)throw new Error("Invalid format");const _=parseInt(g[1],10),x=parseInt(g[2],10)-1,S=parseInt(g[3],10),E=parseInt(g[4],10),C=parseInt(g[5],10),T=parseInt(g[6],10),R=parseInt(g[7].slice(0,-6),10);return new Date(Date.UTC(_,x,S,E,C,T,R))}class Libp2pRecord{key;value;timeReceived;constructor(r,g,_){if(!(r instanceof Uint8Array))throw new Error("key must be a Uint8Array");if(!(g instanceof Uint8Array))throw new Error("value must be a Uint8Array");this.key=r,this.value=g,this.timeReceived=_}serialize(){return Record$1.encode(this.prepareSerialize())}prepareSerialize(){return{key:this.key,value:this.value,timeReceived:toRFC3339(this.timeReceived)}}static deserialize(r){const g=Record$1.decode(r);return new Libp2pRecord(g.key,g.value,new Date(g.timeReceived))}static fromDeserialized(r){const g=parseRFC3339(r.timeReceived);if(r.key==null)throw new Error("key missing from deserialized object");if(r.value==null)throw new Error("value missing from deserialized object");return new Libp2pRecord(r.key,r.value,g)}}class QueryError extends Error{constructor(r="Query error"){super(r),this.name="QueryError"}}class QueryAbortedError extends Error{constructor(r="Query aborted"){super(r),this.name="QueryAbortedError"}}class InvalidRecordError extends Error{constructor(r="Invalid record"){super(r),this.name="InvalidRecordError"}}class MissingSelectorError extends Error{constructor(r="No selector function configured for prefix"){super(r),this.name="MissingSelectorError"}}var Record;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.key!=null&&(_.uint32(10),_.bytes(g.key)),g.value!=null&&(_.uint32(18),_.bytes(g.value)),g.author!=null&&(_.uint32(26),_.bytes(g.author)),g.signature!=null&&(_.uint32(34),_.bytes(g.signature)),g.timeReceived!=null&&(_.uint32(42),_.string(g.timeReceived)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.key=g.bytes();break}case 2:{S.value=g.bytes();break}case 3:{S.author=g.bytes();break}case 4:{S.signature=g.bytes();break}case 5:{S.timeReceived=g.string();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Record||(Record={}));var MessageType;(function(n){n.PUT_VALUE="PUT_VALUE",n.GET_VALUE="GET_VALUE",n.ADD_PROVIDER="ADD_PROVIDER",n.GET_PROVIDERS="GET_PROVIDERS",n.FIND_NODE="FIND_NODE",n.PING="PING"})(MessageType||(MessageType={}));var __MessageTypeValues;(function(n){n[n.PUT_VALUE=0]="PUT_VALUE",n[n.GET_VALUE=1]="GET_VALUE",n[n.ADD_PROVIDER=2]="ADD_PROVIDER",n[n.GET_PROVIDERS=3]="GET_PROVIDERS",n[n.FIND_NODE=4]="FIND_NODE",n[n.PING=5]="PING"})(__MessageTypeValues||(__MessageTypeValues={}));(function(n){n.codec=()=>enumeration(__MessageTypeValues)})(MessageType||(MessageType={}));var ConnectionType;(function(n){n.NOT_CONNECTED="NOT_CONNECTED",n.CONNECTED="CONNECTED",n.CAN_CONNECT="CAN_CONNECT",n.CANNOT_CONNECT="CANNOT_CONNECT"})(ConnectionType||(ConnectionType={}));var __ConnectionTypeValues;(function(n){n[n.NOT_CONNECTED=0]="NOT_CONNECTED",n[n.CONNECTED=1]="CONNECTED",n[n.CAN_CONNECT=2]="CAN_CONNECT",n[n.CANNOT_CONNECT=3]="CANNOT_CONNECT"})(__ConnectionTypeValues||(__ConnectionTypeValues={}));(function(n){n.codec=()=>enumeration(__ConnectionTypeValues)})(ConnectionType||(ConnectionType={}));var PeerInfo;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.id!=null&&g.id.byteLength>0&&(_.uint32(10),_.bytes(g.id)),g.multiaddrs!=null)for(const S of g.multiaddrs)_.uint32(18),_.bytes(S);g.connection!=null&&(_.uint32(24),ConnectionType.codec().encode(g.connection,_)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={id:alloc$1(0),multiaddrs:[]},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.id=g.bytes();break}case 2:{if(x.limits?.multiaddrs!=null&&S.multiaddrs.length===x.limits.multiaddrs)throw new MaxLengthError('Decode error - map field "multiaddrs" had too many elements');S.multiaddrs.push(g.bytes());break}case 3:{S.connection=ConnectionType.codec().decode(g);break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(PeerInfo||(PeerInfo={}));var Message$2;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.type!=null&&__MessageTypeValues[g.type]!==0&&(_.uint32(8),MessageType.codec().encode(g.type,_)),g.clusterLevel!=null&&(_.uint32(80),_.int32(g.clusterLevel)),g.key!=null&&(_.uint32(18),_.bytes(g.key)),g.record!=null&&(_.uint32(26),_.bytes(g.record)),g.closer!=null)for(const S of g.closer)_.uint32(66),PeerInfo.codec().encode(S,_);if(g.providers!=null)for(const S of g.providers)_.uint32(74),PeerInfo.codec().encode(S,_);x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={type:MessageType.PUT_VALUE,closer:[],providers:[]},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.type=MessageType.codec().decode(g);break}case 10:{S.clusterLevel=g.int32();break}case 2:{S.key=g.bytes();break}case 3:{S.record=g.bytes();break}case 8:{if(x.limits?.closer!=null&&S.closer.length===x.limits.closer)throw new MaxLengthError('Decode error - map field "closer" had too many elements');S.closer.push(PeerInfo.codec().decode(g,g.uint32(),{limits:x.limits?.closer$}));break}case 9:{if(x.limits?.providers!=null&&S.providers.length===x.limits.providers)throw new MaxLengthError('Decode error - map field "providers" had too many elements');S.providers.push(PeerInfo.codec().decode(g,g.uint32(),{limits:x.limits?.providers$}));break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Message$2||(Message$2={}));function sendQueryEvent(n,r={}){const g={...n,name:"SEND_QUERY",type:0,messageName:n.type,messageType:n.type};return r.onProgress?.(new CustomEvent("kad-dht:query:send-query",{detail:g})),g}function peerResponseEvent(n,r={}){const g={...n,name:"PEER_RESPONSE",type:1,messageName:n.messageType,closer:n.closer??[],providers:n.providers??[]};return r.onProgress?.(new CustomEvent("kad-dht:query:peer-response",{detail:g})),g}function finalPeerEvent(n,r={}){const g={...n,name:"FINAL_PEER",type:2};return r.onProgress?.(new CustomEvent("kad-dht:query:final-peer",{detail:g})),g}function queryErrorEvent(n,r={}){const g={...n,name:"QUERY_ERROR",type:3};return r.onProgress?.(new CustomEvent("kad-dht:query:query-error",{detail:g})),g}function providerEvent(n,r={}){const g={...n,name:"PROVIDER",type:4};return r.onProgress?.(new CustomEvent("kad-dht:query:provider",{detail:g})),g}function valueEvent(n,r={}){const g={...n,name:"VALUE",type:5};return r.onProgress?.(new CustomEvent("kad-dht:query:value",{detail:g})),g}function dialPeerEvent(n,r={}){const g={...n,name:"DIAL_PEER",type:7};return r.onProgress?.(new CustomEvent("kad-dht:query:dial-peer",{detail:g})),g}function bestRecord(n,r,g){if(g.length===0)throw new InvalidParametersError("No records given");const x=toString$3(r).split("/");if(x.length<3)throw new InvalidParametersError("Record key does not have a selector function");const S=n[x[1].toString()];if(S==null)throw new MissingSelectorError(`No selector function configured for key type "${x[1]}"`);return g.length===1?0:S(r,g)}function publickKey(n,r){return 0}const selectors={pk:publickKey};async function verifyRecord(n,r){const g=r.key,x=toString$3(g).split("/");if(x.length<3)return;const S=n[x[1].toString()];if(S==null)throw new InvalidParametersError(`No validator available for key type "${x[1]}"`);await S(g,r.value)}const validatePublicKeyRecord=async(n,r)=>{if(!(n instanceof Uint8Array))throw new InvalidParametersError('"key" must be a Uint8Array');if(n.byteLength<5)throw new InvalidParametersError("Invalid public key record");if(toString$3(n.subarray(0,4))!=="/pk/")throw new InvalidParametersError("key was not prefixed with /pk/");const _=publicKeyFromProtobuf(r),x=n.slice(4);if(!equals$1(x,_.toMultihash().bytes))throw new InvalidParametersError("public key does not match passed in key")},validators={pk:validatePublicKeyRecord},PK_PREFIX=fromString("/pk/");function removePrivateAddressesMapper(n){return{...n,multiaddrs:n.multiaddrs.filter(r=>{const[[g,_]]=r.stringTuples();if(g===53||g===54||g===55)return _!=="localhost";if(g!==4&&g!==6||_==null)return!1;const x=isPrivateIp(_);return x==null?!0:!x})}}async function convertBuffer(n){return(await sha256$8.digest(n)).digest}async function convertPeerId(n){return convertBuffer(n.toMultihash().bytes)}function bufferToRecordKey(n,r){return new Key(`${n}/${toString$3(r,"base32")}`,!1)}function keyForPublicKey(n){return concat([PK_PREFIX,n.toMultihash().bytes])}function isPublicKeyKey(n){return toString$3(n.subarray(0,4))==="/pk/"}function fromPublicKeyKey(n){const r=decode$h(n.subarray(4));return peerIdFromMultihash(r)}function createPutRecord(n,r){const g=new Date;return new Libp2pRecord(n,r,g).serialize()}const P2P_CIRCUIT_CODE=290,DNS4_CODE=54,DNS6_CODE=55,DNSADDR_CODE=56,IP4_CODE=4,IP6_CODE=41;function multiaddrIsPublic(n){const r=n.stringTuples();for(const g of r)if(g[0]===P2P_CIRCUIT_CODE)return!1;if(r[0][0]===DNS4_CODE||r[0][0]===DNS6_CODE||r[0][0]===DNSADDR_CODE)return!0;if(r[0][0]===IP4_CODE||r[0][0]===IP6_CODE){const g=isPrivateIp(`${r[0][1]}`);return g==null||!g}return!1}function parseProviderKey(n){const r=n.toString().split("/"),g=r.pop(),_=r.pop();if(g==null||_==null)throw new Error(`incorrectly formatted provider entry key in datastore: ${n.toString()}`);return{cid:CID$1.createV1(code$6,decode$h(fromString(_,"base32"))),peerId:peerIdFromString$1(g)}}function toProviderKey(n,r,g){const _=typeof r=="string"?r:toString$3(r.multihash.bytes,"base32"),x=[n,_];return g!=null&&x.push(g.toString()),new Key(x.join("/"))}function readProviderTime(n){return new Date(decode$a(n))}function timeOperationGenerator(n,r,g){return async function*(..._){const x=r.queryTime?.timer(g),S=r.errorTime?.timer(g);let E=!1;try{r.queries?.increment({[g]:!0}),yield*n(..._)}catch(C){throw E=!0,S?.(),r.errors?.increment({[g]:!0}),C}finally{r.queries?.decrement({[g]:!0}),E||x?.()}}}function timeOperationMethod(n,r,g){return async function(..._){const x=r?.queryTime?.timer(g),S=r?.errorTime?.timer(g);let E=!1;try{return r.queries?.increment({[g]:!0}),await n(..._)}catch(C){throw E=!0,S?.(),r.errors?.increment({[g]:!0}),C}finally{r.queries?.decrement({[g]:!0}),E||x?.()}}}class ContentFetching{log;components;validators;selectors;peerRouting;queryManager;network;datastorePrefix;constructor(r,g){const{validators:_,selectors:x,peerRouting:S,queryManager:E,network:C,logPrefix:T}=g;this.components=r,this.log=r.logger.forComponent(`${T}:content-fetching`),this.datastorePrefix=`${g.datastorePrefix}/record`,this.validators=_,this.selectors=x,this.peerRouting=S,this.queryManager=E,this.network=C}async getLocal(r){this.log("getLocal %b",r);const g=bufferToRecordKey(this.datastorePrefix,r);this.log("fetching record for key %k",g);const _=await this.components.datastore.get(g);this.log("found %k in local datastore",g);const x=Libp2pRecord.deserialize(_);return await verifyRecord(this.validators,x),x}async*sendCorrectionRecord(r,g,_,x={}){this.log("sendCorrection for %b",r);const S=createPutRecord(r,_);for(const{value:E,from:C}of g){if(equals$1(E,_)){this.log("record was ok");continue}if(this.components.peerId.equals(C)){try{const A=bufferToRecordKey(this.datastorePrefix,r);this.log(`Storing corrected record for key ${A.toString()}`),await this.components.datastore.put(A,S.subarray())}catch(A){this.log.error("Failed error correcting self",A)}continue}let T=!1;const R={type:MessageType.PUT_VALUE,key:r,record:S};for await(const A of this.network.sendRequest(C,R,x))A.name==="PEER_RESPONSE"&&A.record!=null&&equals$1(A.record.value,Libp2pRecord.deserialize(S).value)&&(T=!0),yield A;T||(yield queryErrorEvent({from:C,error:new QueryError("Value not put correctly")},x)),this.log.error("Failed error correcting entry")}}async*put(r,g,_={}){this.log("put key %b value %b",r,g);const x=createPutRecord(r,g),S=bufferToRecordKey(this.datastorePrefix,r);this.log(`storing record for key ${S.toString()}`),await this.components.datastore.put(S,x.subarray()),yield*pipe(this.peerRouting.getClosestPeers(r,{signal:_.signal}),E=>map$2(E,C=>async()=>{if(C.name!=="FINAL_PEER")return[C];const T=[],R={type:MessageType.PUT_VALUE,key:r,record:x};this.log("send put to %p",C.peer.id);for await(const A of this.network.sendRequest(C.peer.id,R,_))T.push(A),A.name==="PEER_RESPONSE"&&(A.record!=null&&equals$1(A.record.value,Libp2pRecord.deserialize(x).value)||T.push(queryErrorEvent({from:C.peer.id,error:new QueryError("Value not put correctly")},_)));return T}),E=>parallel$1(E,{ordered:!1,concurrency:ALPHA}),async function*(E){for await(const C of E)yield*C})}async*get(r,g={}){this.log("get %b",r);const _=[];for await(const C of this.getMany(r,g))C.name==="VALUE"&&_.push(C),yield C;if(_.length===0)return;const x=_.map(C=>C.value);let S=0;try{S=bestRecord(this.selectors,r,x)}catch(C){if(C.name!=="InvalidParametersError")throw C}const E=x[S];if(this.log("GetValue %b %b",r,E),E==null)throw new NotFoundError$1("Best value was not found");yield*this.sendCorrectionRecord(r,_,E,g),yield _[S]}async*getMany(r,g={}){this.log("getMany values for %b",r);try{const S=await this.getLocal(r);yield valueEvent({value:S.value,from:this.components.peerId},g)}catch(S){this.log("error getting local value for %b",r,S)}const _=this,x=async function*({peer:S,signal:E}){for await(const C of _.peerRouting.getValueOrPeers(S,r,{signal:E}))yield C,C.name==="PEER_RESPONSE"&&C.record!=null&&(yield valueEvent({from:S,value:C.record.value},g))};yield*this.queryManager.run(r,x,g)}}function toPbPeerInfo(n,r){return{id:n.id.toMultihash().bytes,multiaddrs:(n.multiaddrs??[]).map(_=>_.bytes),connection:r}}function fromPbPeerInfo(n){if(n.id==null)throw new Error("Invalid peer in message");const r=decode$h(n.id);return{id:peerIdFromMultihash(r),multiaddrs:(n.multiaddrs??[]).map(g=>multiaddr(g))}}class ContentRouting{log;components;network;peerRouting;queryManager;routingTable;providers;constructor(r,g){const{network:_,peerRouting:x,queryManager:S,routingTable:E,providers:C,logPrefix:T}=g;this.components=r,this.log=r.logger.forComponent(`${T}:content-routing`),this.network=_,this.peerRouting=x,this.queryManager=S,this.routingTable=E,this.providers=C}async*provide(r,g,_={}){this.log("provide %s",r);const x=r.multihash.bytes;await this.providers.addProvider(r,this.components.peerId);const S={type:MessageType.ADD_PROVIDER,key:x,providers:[toPbPeerInfo({id:this.components.peerId,multiaddrs:g})]};let E=0;const C=T=>async()=>{if(T.name!=="FINAL_PEER")return[T];const R=[];this.log("putProvider %s to %p",r,T.peer.id);try{this.log("sending provider record for %s to %p",r,T.peer.id);for await(const A of this.network.sendMessage(T.peer.id,S,_))A.name==="PEER_RESPONSE"&&(this.log("sent provider record for %s to %p",r,T.peer.id),E++),R.push(A)}catch(A){this.log.error("error sending provide record to peer %p",T.peer.id,A),R.push(queryErrorEvent({from:T.peer.id,error:A},_))}return R};yield*pipe(this.peerRouting.getClosestPeers(x,_),T=>map$2(T,R=>C(R)),T=>parallel$1(T,{ordered:!1,concurrency:ALPHA}),async function*(T){for await(const R of T)yield*R}),this.log("sent provider records to %d peers",E)}async*findProviders(r,g){const _=this.routingTable.kBucketSize;let x=0;const S=r.multihash.bytes,E=this;this.log("findProviders %c",r);const C=await this.providers.getProviders(r);if(C.length>0){const A=[];for(const I of C.slice(0,_))try{const B=await this.components.peerStore.get(I);A.push({id:I,multiaddrs:B.addresses.map(({multiaddr:D})=>D)})}catch(B){if(B.name!=="NotFoundError")throw B;this.log("no peer store entry for %p",I)}if(yield peerResponseEvent({from:this.components.peerId,messageType:MessageType.GET_PROVIDERS,providers:A},g),yield providerEvent({from:this.components.peerId,providers:A},g),x+=A.length,x>=_)return}const T=async function*({peer:A,signal:I}){const B={type:MessageType.GET_PROVIDERS,key:S};yield*E.network.sendRequest(A,B,{...g,signal:I})},R=new PeerSet(C);for await(const A of this.queryManager.run(S,T,g))if(yield A,A.name==="PEER_RESPONSE"){this.log("Found %d provider entries for %c and %d closer peers",A.providers.length,r,A.closer.length);const I=[];for(const B of A.providers)R.has(B.id)||(R.add(B.id),I.push(B));if(I.length>0&&(yield providerEvent({from:A.from,providers:I},g),x+=I.length,x>=_))return}}}class MovingAverage{movingAverage;variance;deviation;forecast;timespan;previousTime;constructor(r){this.timespan=r,this.movingAverage=0,this.variance=0,this.deviation=0,this.forecast=0}alpha(r,g){return 1-Math.exp(-(r-g)/this.timespan)}push(r,g=Date.now()){if(this.previousTime!=null){const _=this.alpha(g,this.previousTime),x=r-this.movingAverage,S=_*x;this.movingAverage=_*r+(1-_)*this.movingAverage,this.variance=(1-_)*(this.variance+x*S),this.deviation=Math.sqrt(this.variance),this.forecast=this.movingAverage+_*x}else this.movingAverage=r;this.previousTime=g}}const DEFAULT_TIMEOUT_MULTIPLIER=1.2,DEFAULT_FAILURE_MULTIPLIER=2,DEFAULT_MIN_TIMEOUT=2e3;class AdaptiveTimeout{success;failure;next;metric;timeoutMultiplier;failureMultiplier;minTimeout;constructor(r={}){this.success=new MovingAverage(r.interval??5e3),this.failure=new MovingAverage(r.interval??5e3),this.next=new MovingAverage(r.interval??5e3),this.failureMultiplier=r.failureMultiplier??DEFAULT_FAILURE_MULTIPLIER,this.timeoutMultiplier=r.timeoutMultiplier??DEFAULT_TIMEOUT_MULTIPLIER,this.minTimeout=r.minTimeout??DEFAULT_MIN_TIMEOUT,r.metricName!=null&&(this.metric=r.metrics?.registerMetricGroup(r.metricName))}getTimeoutSignal(r={}){const g=Math.max(Math.round(this.next.movingAverage*(r.timeoutFactor??this.timeoutMultiplier)),this.minTimeout),_=AbortSignal.timeout(g),x=anySignal([r.signal,_]);return setMaxListeners(1/0,x,_),x.start=Date.now(),x.timeout=g,x}cleanUp(r){const g=Date.now()-r.start;r.aborted?(this.failure.push(g),this.next.push(g*this.failureMultiplier),this.metric?.update({failureMovingAverage:this.failure.movingAverage,failureDeviation:this.failure.deviation,failureForecast:this.failure.forecast,failureVariance:this.failure.variance,failure:g})):(this.success.push(g),this.next.push(g),this.metric?.update({successMovingAverage:this.success.movingAverage,successDeviation:this.success.deviation,successForecast:this.success.forecast,successVariance:this.success.variance,success:g}))}}class Network extends TypedEventEmitter{log;protocol;running;components;timeout;metrics;constructor(r,g){super(),this.components=r,this.log=r.logger.forComponent(`${g.logPrefix}:network`),this.running=!1,this.protocol=g.protocol,this.timeout=new AdaptiveTimeout({...g.timeout??{},metrics:r.metrics,metricName:`${g.metricsPrefix}_network_message_send_times_milliseconds`}),this.metrics={operations:r.metrics?.registerCounterGroup(`${g.metricsPrefix}_outbound_rpc_requests_total`),errors:r.metrics?.registerCounterGroup(`${g.metricsPrefix}_outbound_rpc_errors_total`)}}async start(){this.running||(this.running=!0)}async stop(){this.running=!1}isStarted(){return this.running}async*sendRequest(r,g,_={}){if(!this.running)return;const x=g.type;if(x==null)throw new InvalidParametersError("Message type was missing");this.log("sending %s to %p",g.type,r),yield dialPeerEvent({peer:r},_),yield sendQueryEvent({to:r,type:x},_);let S;const E=this.timeout.getTimeoutSignal(_);_={..._,signal:E};try{this.metrics.operations?.increment({[x]:!0}),S=await(await this.components.connectionManager.openConnection(r,_)).newStream(this.protocol,_);const T=await this._writeReadMessage(S,g,_);S.close(_).catch(R=>{this.log.error("error closing stream to %p",r,R),S?.abort(R)}),yield peerResponseEvent({from:r,messageType:T.type,closer:T.closer.map(fromPbPeerInfo),providers:T.providers.map(fromPbPeerInfo),record:T.record==null?void 0:Libp2pRecord.deserialize(T.record)},_)}catch(C){this.metrics.errors?.increment({[x]:!0}),S?.abort(C),_.signal?.aborted!==!0&&this.log.error("could not send %s to %p - %e",g.type,r,C),yield queryErrorEvent({from:r,error:C},_)}finally{this.timeout.cleanUp(E)}}async*sendMessage(r,g,_={}){if(!this.running)return;const x=g.type;if(x==null)throw new InvalidParametersError("Message type was missing");this.log("sending %s to %p",g.type,r),yield dialPeerEvent({peer:r},_),yield sendQueryEvent({to:r,type:x},_);let S;const E=this.timeout.getTimeoutSignal(_);_={..._,signal:E};try{this.metrics.operations?.increment({[x]:!0}),S=await(await this.components.connectionManager.openConnection(r,_)).newStream(this.protocol,_),await this._writeMessage(S,g,_),S.close(_).catch(T=>{this.log.error("error closing stream to %p",r,T),S?.abort(T)}),yield peerResponseEvent({from:r,messageType:x},_)}catch(C){this.metrics.errors?.increment({[x]:!0}),S?.abort(C),yield queryErrorEvent({from:r,error:C},_)}finally{this.timeout.cleanUp(E)}}async _writeMessage(r,g,_){await pbStream(r).write(g,Message$2,_)}async _writeReadMessage(r,g,_){const x=pbStream(r);await x.write(g,Message$2,_);const S=await x.read(Message$2,_);return S.closer.forEach(E=>{this.safeDispatchEvent("peer",{detail:fromPbPeerInfo(E)})}),S.providers.forEach(E=>{this.safeDispatchEvent("peer",{detail:fromPbPeerInfo(E)})}),S}}function xorCompare(n,r){if(n.byteLength!==r.byteLength)throw new Error("Inputs should have the same length");for(let g=0;g<n.byteLength;g++)if(n[g]!==r[g])return n[g]<r[g]?-1:1;return 0}class PeerDistanceList{originDhtKey;capacity;peerDistances;constructor(r,g){this.originDhtKey=r,this.capacity=g,this.peerDistances=[]}get length(){return this.peerDistances.length}get peers(){return this.peerDistances.map(r=>r.peer)}async add(r){const g=await convertPeerId(r.id);this.addWitKadId(r,g)}addWitKadId(r,g){if(this.peerDistances.find(x=>x.peer.id.equals(r.id))!=null)return;const _={peer:r,distance:xor(this.originDhtKey,g)};this.peerDistances.push(_),this.peerDistances.sort((x,S)=>xorCompare(x.distance,S.distance)),this.peerDistances=this.peerDistances.slice(0,this.capacity)}async isCloser(r){if(this.length===0)return!0;const g=await convertPeerId(r),_=xor(g,this.originDhtKey),x=this.peerDistances[this.peerDistances.length-1].distance;return xorCompare(_,x)===-1}async anyCloser(r){return r.length===0?!1:Promise.any(r.map(async g=>this.isCloser(g)))}}class PeerRouting{log;routingTable;network;validators;queryManager;peerStore;peerId;constructor(r,g){this.routingTable=g.routingTable,this.network=g.network,this.validators=g.validators,this.queryManager=g.queryManager,this.peerStore=r.peerStore,this.peerId=r.peerId,this.log=r.logger.forComponent(`${g.logPrefix}:peer-routing`)}async findPeerLocal(r){let g;const _=await this.routingTable.find(r);if(_!=null){this.log("findPeerLocal found %p in routing table",r);try{g=await this.peerStore.get(_)}catch(x){if(x.name!=="NotFoundError")throw x}}if(g==null)try{g=await this.peerStore.get(r)}catch(x){if(x.name!=="NotFoundError")throw x}if(g!=null)return this.log("findPeerLocal found %p in peer store",r),{id:g.id,multiaddrs:g.addresses.map(x=>x.multiaddr)}}async*_getValueSingle(r,g,_={}){const x={type:MessageType.GET_VALUE,key:g};yield*this.network.sendRequest(r,x,_)}async*getPublicKeyFromNode(r,g={}){const _=keyForPublicKey(r);for await(const x of this._getValueSingle(r,_,g))if(yield x,x.name==="PEER_RESPONSE"&&x.record!=null){const S=publicKeyFromProtobuf(x.record.value),E=peerIdFromPublicKey(S);if(!E.equals(r))throw new InvalidPublicKeyError("public key does not match id");if(E.publicKey==null)throw new InvalidPublicKeyError("public key missing");yield valueEvent({from:r,value:x.record.value},g)}throw new QueryError(`Node not responding with its public key: ${r.toString()}`)}async*findPeer(r,g={}){if(this.log("findPeer %p",r),g.useCache!==!1){const x=await this.findPeerLocal(r);if(x!=null){this.log("found local"),yield finalPeerEvent({from:this.peerId,peer:x},g);return}}let _=!1;if(g.useNetwork!==!1){const x=this,S=async function*({peer:E,signal:C}){const T={type:MessageType.FIND_NODE,key:r.toMultihash().bytes};for await(const R of x.network.sendRequest(E,T,{...g,signal:C}))if(yield R,R.name==="PEER_RESPONSE"){const A=R.closer.find(I=>I.id.equals(r));A!=null&&(yield finalPeerEvent({from:R.from,peer:A},g))}};for await(const E of this.queryManager.run(r.toMultihash().bytes,S,g))E.name==="FINAL_PEER"&&(_=!0),yield E}_||(yield queryErrorEvent({from:this.peerId,error:new NotFoundError$1("Not found")},g))}async*getClosestPeers(r,g={}){this.log("getClosestPeers to %b",r);const _=await convertBuffer(r),x=this.routingTable.closestPeers(_),S=this,E=new PeerDistanceList(_,this.routingTable.kBucketSize);await Promise.all(x.map(async T=>{await E.add({id:T,multiaddrs:[]})}));const C=async function*({peer:T,signal:R}){S.log("closerPeersSingle %s from %p",toString$3(r,"base32"),T);const A={type:MessageType.FIND_NODE,key:r};yield*S.network.sendRequest(T,A,{...g,signal:R})};for await(const T of this.queryManager.run(r,C,g))T.name==="PEER_RESPONSE"&&await Promise.all(T.closer.map(async R=>{await E.add(R)})),yield T;this.log("found %d peers close to %b",E.length,r);for(const T of E.peers)yield finalPeerEvent({from:this.peerId,peer:T},g)}async*getValueOrPeers(r,g,_={}){for await(const x of this._getValueSingle(r,g,_)){if(x.name==="PEER_RESPONSE"&&x.record!=null)try{await this._verifyRecordOnline(x.record)}catch{const E="invalid record received, discarded";this.log(E),yield queryErrorEvent({from:x.from,error:new QueryError(E)},_);continue}yield x}}async _verifyRecordOnline(r){if(r.timeReceived==null)throw new InvalidRecordError("invalid record received");await verifyRecord(this.validators,new Libp2pRecord(r.key,r.value,r.timeReceived))}async getCloserPeersOffline(r,g){const _=[];try{const T=decode$h(r),R=peerIdFromMultihash(T),A=await this.peerStore.get(R);_.push({id:A.id,multiaddrs:A.addresses.map(({multiaddr:I})=>I)})}catch{}const x=await convertBuffer(r),S=this.routingTable.closestPeers(x),E=await convertPeerId(g),C=xor(E,x);for(const T of S){const R=await convertPeerId(T),A=xor(R,x);if(xorCompare(A,C)===-1)try{const I=await this.peerStore.get(T);_.push({id:T,multiaddrs:I.addresses.map(({multiaddr:B})=>B)})}catch(I){if(I.name!=="NotFoundError")throw I}}return _.length>0?this.log("getCloserPeersOffline found %d peer(s) closer to %b than %p",_.length,r,g):this.log("getCloserPeersOffline could not find peer closer to %b than %p with %d peers in the routing table",r,g,this.routingTable.size),_}}class Providers{log;datastore;datastorePrefix;lock;constructor(r,g){this.log=r.logger.forComponent(`${g.logPrefix}:providers`),this.datastorePrefix=`${g.datastorePrefix}/provider`,this.datastore=r.datastore,this.lock=g.lock}async addProvider(r,g){const _=await this.lock.readLock();try{this.log("%p provides %s",g,r),await this.writeProviderEntry(r,g)}finally{_()}}async removeProvider(r,g){const _=await this.lock.writeLock();try{const x=toProviderKey(this.datastorePrefix,r,g);this.log("%p no longer provides %s",g,r),await this.datastore.delete(x)}finally{_()}}async getProviders(r){const g=await this.lock.readLock();try{this.log("get providers for %c",r);const _=await this.loadProviders(r);return this.log("got %d providers for %c",_.size,r),[..._.keys()]}finally{g()}}async writeProviderEntry(r,g,_=new Date){const x=toProviderKey(this.datastorePrefix,r,g),S=encode$d(_.getTime());await this.datastore.put(x,S)}async loadProviders(r){const g=new PeerMap,_=toProviderKey(this.datastorePrefix,r);for await(const x of this.datastore.query({prefix:_.toString()})){const{peerId:S}=parseProviderKey(x.key);g.set(S,readProviderTime(x.value))}return g}}async function*queryPath(n){const{key:r,startingPeer:g,ourPeerId:_,signal:x,query:S,alpha:E,pathIndex:C,numPaths:T,queryFuncTimeout:R,log:A,peersSeen:I,connectionManager:B}=n,D=new Queue({concurrency:E,sort:(O,L)=>xorCompare(O.options.distance,L.options.distance)}),N=await convertBuffer(r);function M(O,L){if(O==null)return;I.add(O);const F=xor(L,N);D.add(async()=>{const U=[x];R!=null&&U.push(AbortSignal.timeout(R));const j=anySignal(U);setMaxListeners(1/0,j);try{for await(const z of S({key:r,peer:O,signal:j,pathIndex:C,numPaths:T})){if(j.aborted)return;if(z.name==="PEER_RESPONSE")for(const W of z.closer){if(I.has(W.id)){A.trace("already seen %p in query",W.id);continue}if(_.equals(W.id)){A("not querying ourselves");continue}if(!await B.isDialable(W.multiaddrs)){A("not querying undialable peer");continue}const X=await convertPeerId(W.id),ie=xor(X,N);if(xorCompare(ie,F)!==-1){A.trace("skipping %p as they are not closer to %b than %p",W.id,r,O);continue}A.trace("querying closer peer %p",W.id),M(W.id,X)}D.safeDispatchEvent("completed",{detail:z})}}catch(z){if(!x.aborted)return queryErrorEvent({from:O,error:z},n)}finally{j.clear()}},{distance:F}).catch(U=>{A.error(U)})}M(g,await convertPeerId(g));try{for await(const O of D.toGenerator({signal:x}))O!=null&&(yield O)}catch(O){throw x.aborted?new QueryAbortedError("Query aborted"):O}}class QueryManager{disjointPaths;alpha;shutDownController;running;logger;peerId;connectionManager;routingTable;initialQuerySelfHasRun;logPrefix;constructor(r,g){this.logPrefix=g.logPrefix,this.disjointPaths=g.disjointPaths??K,this.alpha=g.alpha??ALPHA,this.initialQuerySelfHasRun=g.initialQuerySelfHasRun,this.routingTable=g.routingTable,this.logger=r.logger,this.peerId=r.peerId,this.connectionManager=r.connectionManager,this.shutDownController=new AbortController,setMaxListeners(1/0,this.shutDownController.signal),this.running=!1}isStarted(){return this.running}async start(){this.running||(this.running=!0,this.shutDownController=new AbortController,setMaxListeners(1/0,this.shutDownController.signal))}async stop(){this.running=!1,this.shutDownController.abort()}async*run(r,g,_={}){if(!this.running)throw new Error("QueryManager not started");if(_.signal==null){const T=AbortSignal.timeout(DEFAULT_QUERY_TIMEOUT);setMaxListeners(1/0,T),_={..._,signal:T}}const x=new AbortController,S=anySignal([this.shutDownController.signal,x.signal,_.signal]);setMaxListeners(1/0,S,x.signal);const E=this.logger.forComponent(`${this.logPrefix}:query:`+toString$3(r,"base58btc"));let C=!1;try{_.isSelfQuery!==!0&&this.initialQuerySelfHasRun!=null&&(E("waiting for initial query-self query before continuing"),await raceSignal(this.initialQuerySelfHasRun.promise,S),this.initialQuerySelfHasRun=void 0),E("query:start");const T=await convertBuffer(r),R=this.routingTable.closestPeers(T),A=R.slice(0,Math.min(this.disjointPaths,R.length));if(R.length===0){E.error("Running query with no peers");return}const I=new PeerSet,B=A.map((D,N)=>queryPath({key:r,startingPeer:D,ourPeerId:this.peerId,signal:S,query:g,pathIndex:N,numPaths:A.length,alpha:this.alpha,queryFuncTimeout:_.queryFuncTimeout,log:E,peersSeen:I,onProgress:_.onProgress,connectionManager:this.connectionManager}));for await(const D of merge$2(...B)){if(D.name==="QUERY_ERROR"&&E.error("query error",D.error),D.name==="PEER_RESPONSE")for(const N of[...D.closer,...D.providers])await this.connectionManager.isDialable(N.multiaddrs)&&await this.routingTable.add(N.id);yield D}C=!0}catch(T){if(!(!this.running&&T.name==="QueryAbortedError"))throw T}finally{C||(E("query exited early"),x.abort()),S.clear(),E("query:done")}}}function isAsyncIterable(n){return n[Symbol.asyncIterator]!=null}function length(n){if(isAsyncIterable(n))return(async()=>{let r=0;for await(const g of n)r++;return r})();{let r=0;for(const g of n)r++;return r}}const normalizeEmitter=n=>{const r=n.addEventListener||n.on||n.addListener,g=n.removeEventListener||n.off||n.removeListener;if(!r||!g)throw new TypeError("Emitter is not compatible");return{addListener:r.bind(n),removeListener:g.bind(n)}};function pEventMultiple(n,r,g){let _;const x=new Promise((S,E)=>{if(g={rejectionEvents:["error"],multiArgs:!1,resolveImmediately:!1,...g},!(g.count>=0&&(g.count===Number.POSITIVE_INFINITY||Number.isInteger(g.count))))throw new TypeError("The `count` option should be at least 0 or more");g.signal?.throwIfAborted();const C=[r].flat(),T=[],{addListener:R,removeListener:A}=normalizeEmitter(n),I=(...D)=>{const N=g.multiArgs?D:D[0];g.filter&&!g.filter(N)||(T.push(N),g.count===T.length&&(_(),S(T)))},B=D=>{_(),E(D)};_=()=>{for(const D of C)A(D,I);for(const D of g.rejectionEvents)A(D,B)};for(const D of C)R(D,I);for(const D of g.rejectionEvents)R(D,B);g.signal&&g.signal.addEventListener("abort",()=>{B(g.signal.reason)},{once:!0}),g.resolveImmediately&&S(T)});if(x.cancel=_,typeof g.timeout=="number"){const S=pTimeout(x,{milliseconds:g.timeout});return S.cancel=_,S}return x}function pEvent(n,r,g){typeof g=="function"&&(g={filter:g}),g={...g,count:1,resolveImmediately:!1};const _=pEventMultiple(n,r,g),x=_.then(S=>S[0]);return x.cancel=_.cancel,x}class QuerySelf{log;peerId;peerRouting;routingTable;count;interval;initialInterval;queryTimeout;running;timeoutId;controller;initialQuerySelfHasRun;querySelfPromise;constructor(r,g){this.peerId=r.peerId,this.log=r.logger.forComponent(`${g.logPrefix}:query-self`),this.running=!1,this.peerRouting=g.peerRouting,this.routingTable=g.routingTable,this.count=g.count??K,this.interval=g.interval??QUERY_SELF_INTERVAL,this.initialInterval=g.initialInterval??QUERY_SELF_INITIAL_INTERVAL,this.queryTimeout=g.queryTimeout??QUERY_SELF_TIMEOUT,this.initialQuerySelfHasRun=g.initialQuerySelfHasRun,this.querySelf=timeOperationMethod(this.querySelf.bind(this),g.operationMetrics,"SELF_QUERY")}isStarted(){return this.running}start(){this.running||(this.running=!0,clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.querySelf().catch(r=>{this.log.error("error running self-query",r)})},this.initialInterval))}stop(){this.running=!1,this.timeoutId!=null&&clearTimeout(this.timeoutId),this.controller!=null&&this.controller.abort()}async querySelf(){if(!this.running){this.log("skip self-query because we are not started");return}if(this.querySelfPromise!=null)return this.log("joining existing self query"),this.querySelfPromise.promise;if(this.querySelfPromise=pDefer(),this.running){this.controller=new AbortController;const r=[this.controller.signal];if(this.initialQuerySelfHasRun==null){const _=AbortSignal.timeout(this.queryTimeout);setMaxListeners(1/0,_),r.push(_)}const g=anySignal(r);setMaxListeners(1/0,g,this.controller.signal);try{this.routingTable.size===0&&(this.log("routing table was empty, waiting for some peers before running query"),await pEvent(this.routingTable,"peer:add",{signal:g,filter:S=>!this.peerId.equals(S.detail)}),this.log("routing table has peers, continuing with query")),this.log("run self-query, look for %d peers timing out after %dms",this.count,this.queryTimeout);const _=Date.now(),x=await pipe(this.peerRouting.getClosestPeers(this.peerId.toMultihash().bytes,{signal:g,isSelfQuery:!0}),S=>take(S,this.count),async S=>length(S));this.log("self-query found %d peers in %dms",x,Date.now()-_)}catch(_){this.log.error("self-query error",_)}finally{g.clear(),this.initialQuerySelfHasRun!=null&&(this.initialQuerySelfHasRun.resolve(),this.initialQuerySelfHasRun=void 0)}}this.querySelfPromise.resolve(),this.querySelfPromise=void 0,this.running&&(this.timeoutId=setTimeout(()=>{this.querySelf().catch(r=>{this.log.error("error running self-query",r)})},this.interval))}}class Reprovider extends TypedEventEmitter{log;reprovideQueue;maxQueueSize;datastore;timeout;reprovideTimeout;running;shutdownController;reprovideThreshold;contentRouting;datastorePrefix;addressManager;validity;interval;lock;peerId;constructor(r,g){super(),this.log=r.logger.forComponent(`${g.logPrefix}:reprovider`),this.peerId=r.peerId,this.reprovideQueue=new Queue({concurrency:g.concurrency??REPROVIDE_CONCURRENCY,metrics:r.metrics,metricName:`${g.metricsPrefix}_reprovide_queue`}),this.reprovideTimeout=new AdaptiveTimeout({...g.timeout??{},metrics:r.metrics,metricName:`${g.metricsPrefix}_reprovide_timeout_milliseconds`}),this.datastore=r.datastore,this.addressManager=r.addressManager,this.datastorePrefix=`${g.datastorePrefix}/provider`,this.reprovideThreshold=g.threshold??REPROVIDE_THRESHOLD,this.maxQueueSize=g.maxQueueSize??REPROVIDE_MAX_QUEUE_SIZE,this.validity=g.validity??PROVIDERS_VALIDITY,this.interval=g.interval??REPROVIDE_INTERVAL,this.contentRouting=g.contentRouting,this.lock=g.lock,this.running=!1,this.reprovide=timeOperationMethod(this.reprovide.bind(this),g.operationMetrics,"PROVIDE")}start(){this.running||(this.running=!0,this.shutdownController=new AbortController,setMaxListeners(1/0,this.shutdownController.signal),this.timeout=setTimeout(()=>{this.cleanUp().catch(r=>{this.log.error("error running reprovide/cleanup - %e",r)})},this.interval))}stop(){this.running=!1,this.reprovideQueue.clear(),clearTimeout(this.timeout),this.shutdownController?.abort()}async cleanUp(){const r=await this.lock.writeLock();try{this.safeDispatchEvent("reprovide:start");for await(const g of this.datastore.query({prefix:this.datastorePrefix}))try{const{cid:_,peerId:x}=parseProviderKey(g.key),S=readProviderTime(g.value).getTime(),E=S+this.validity,C=Date.now(),T=C>E;this.log.trace("comparing: %d < %d = %s %s",S,C-this.validity,T,T?"(expired)":""),T&&await this.datastore.delete(g.key),this.peerId.equals(x)&&C-E<this.reprovideThreshold&&this.queueReprovide(_).catch(R=>{this.log.error("could not reprovide %c - %e",_,R)})}catch(_){this.log.error("error processing datastore key %s - %e",g.key,_.message)}this.log("reprovide/cleanup successful")}finally{r(),this.safeDispatchEvent("reprovide:end"),this.running&&(this.timeout=setTimeout(()=>{this.cleanUp().catch(g=>{this.log.error("error running re-provide - %e",g)})},this.interval))}}async queueReprovide(r){if(!this.running)return;this.log.trace("waiting for queue capacity before adding %c to re-provide queue",r),await this.reprovideQueue.onSizeLessThan(this.maxQueueSize);const g=this.reprovideQueue.queue.find(_=>_.options.cid.equals(r));if(g!=null)return this.log.trace("not adding %c to re-provide queue - already in queue",r),g.join();this.log.trace("adding %c to re-provide queue",r),this.reprovideQueue.add(async _=>{if(_.signal?.throwIfAborted(),!this.running)return;this.log.trace("re-providing %c",r);const x=this.reprovideTimeout.getTimeoutSignal(_);try{await this.reprovide(_.cid,_)}finally{this.reprovideTimeout.cleanUp(x)}this.log.trace("re-provided %c",r)},{signal:this.shutdownController?.signal,cid:r}).catch(_=>{this.log.error("could not re-provide key %c - %e",r,_)})}async reprovide(r,g){await drain(this.contentRouting.provide(r,this.addressManager.getAddresses(),g))}}const PEER_SET_SIZE=20,REFRESH_INTERVAL=5e3,KAD_CLOSE_TAG_NAME="kad-close",KAD_CLOSE_TAG_VALUE=50;class ClosestPeers{routingTable;components;closestPeers;newPeers;refreshInterval;peerSetSize;timeout;closeTagName;closeTagValue;log;running;constructor(r,g){this.components=r,this.log=r.logger.forComponent(`${g.logPrefix}:routing-table`),this.routingTable=g.routingTable,this.refreshInterval=g.refreshInterval??REFRESH_INTERVAL,this.peerSetSize=g.peerSetSize??PEER_SET_SIZE,this.closeTagName=g.closeTagName??KAD_CLOSE_TAG_NAME,this.closeTagValue=g.closeTagValue??KAD_CLOSE_TAG_VALUE,this.closestPeers=new PeerSet,this.onPeerPing=this.onPeerPing.bind(this),this.running=!1}async start(){if(this.running)return;this.running=!0;const r=await convertPeerId(this.components.peerId);this.newPeers=new PeerDistanceList(r,this.peerSetSize),this.routingTable.addEventListener("peer:ping",this.onPeerPing),this.timeout=setInterval(()=>{this.updatePeerTags().catch(g=>{this.log.error("error updating peer tags - %e",g)})},this.refreshInterval)}stop(){this.running=!1,this.routingTable.removeEventListener("peer:ping",this.onPeerPing),clearTimeout(this.timeout)}onPeerPing(r){this.newPeers?.add({id:r.detail,multiaddrs:[]}).catch(g=>{this.log.error("error adding peer to distance list - %e",g)})}async updatePeerTags(){const r=new PeerSet(this.newPeers?.peers.map(x=>x.id)),g=r.difference(this.closestPeers),_=this.closestPeers.difference(r);this.closestPeers=r,await Promise.all([...[...g].map(async x=>{await this.components.peerStore.merge(x,{tags:{[this.closeTagName]:{value:this.closeTagValue},[KEEP_ALIVE_TAG]:{value:1}}})}),...[..._].map(async x=>{await this.components.peerStore.merge(x,{tags:{[this.closeTagName]:void 0,[KEEP_ALIVE_TAG]:void 0}})})])}}function isLeafBucket(n){return Array.isArray(n?.peers)}class KBucket{root;localPeer;prefixLength;splitThreshold;kBucketSize;numberOfNodesToPing;lastPingThreshold;ping;verify;onAdd;onRemove;onMove;addingPeerMap;constructor(r){this.prefixLength=r.prefixLength??PREFIX_LENGTH,this.kBucketSize=r.kBucketSize??KBUCKET_SIZE,this.splitThreshold=r.splitThreshold??this.kBucketSize,this.numberOfNodesToPing=r.numberOfOldContactsToPing??PING_OLD_CONTACT_COUNT,this.lastPingThreshold=r.lastPingThreshold??LAST_PING_THRESHOLD,this.ping=r.ping,this.verify=r.verify,this.onAdd=r.onAdd,this.onRemove=r.onRemove,this.addingPeerMap=new PeerMap,this.root={prefix:"",depth:0,peers:[]}}async addSelfPeer(r){this.localPeer={peerId:r,kadId:await convertPeerId(r),lastPing:Date.now()}}async add(r,g){const _={peerId:r,kadId:await convertPeerId(r),lastPing:0},x=this.addingPeerMap.get(r);if(x!=null)return x;try{const S=this._add(_,g);this.addingPeerMap.set(r,S),await S}finally{this.addingPeerMap.delete(r)}}async _add(r,g){const _=this._determineBucket(r.kadId);if(this._indexOf(_,r.kadId)>-1)return;if(_.peers.length===this.splitThreshold&&_.depth<this.prefixLength){await this._split(_),await this._add(r,g);return}if(_.peers.length<this.kBucketSize){if(!needsPing(r,this.lastPingThreshold)){_.peers.push(r),await this.onAdd?.(r,_);return}await this.verify(r,g)&&(r.lastPing=Date.now(),await this._add(r,g));return}const x=_.peers.filter(E=>!(E.peerId.equals(this.localPeer?.peerId)||E.lastPing>Date.now()-this.lastPingThreshold)).sort((E,C)=>E.lastPing<C.lastPing?-1:E.lastPing>C.lastPing?1:0).slice(0,this.numberOfNodesToPing);let S=!1;for await(const E of this.ping(x,g))S=!0,await this.remove(E.kadId);S&&await this._add(r,g)}*closest(r,g=this.kBucketSize){const _=new PeerDistanceList(r,g);for(const x of this.toIterable())_.addWitKadId({id:x.peerId,multiaddrs:[]},x.kadId);yield*map$2(_.peers,x=>x.id)}count(){function r(g){if(isLeafBucket(g))return g.peers.length;let _=0;return g.left!=null&&(_+=r(g.left)),g.right!=null&&(_+=r(g.right)),_}return r(this.root)}get(r){const g=this._determineBucket(r),_=this._indexOf(g,r);return g.peers[_]}async remove(r){const g=this._determineBucket(r),_=this._indexOf(g,r);if(_>-1){const x=g.peers.splice(_,1)[0];await this.onRemove?.(x,g)}}*toIterable(){function*r(g){if(isLeafBucket(g)){yield*g.peers;return}yield*r(g.left),yield*r(g.right)}yield*r(this.root)}distance(r,g){return BigInt("0x"+toString$3(xor(r,g),"base16"))}_determineBucket(r){const g=toString$3(r,"base2");function _(x,S=0){return isLeafBucket(x)?x:g[S]==="0"?_(x.left,S+1):_(x.right,S+1)}return _(this.root)}_indexOf(r,g){return r.peers.findIndex(_=>equals$1(_.kadId,g))}async _split(r){const g={prefix:"0",depth:r.depth+1,peers:[]},_={prefix:"1",depth:r.depth+1,peers:[]};for(const x of r.peers)toString$3(x.kadId,"base2")[r.depth]==="0"?(g.peers.push(x),await this.onMove?.(x,r,g)):(_.peers.push(x),await this.onMove?.(x,r,_));convertToInternalBucket(r,g,_)}}function convertToInternalBucket(n,r,g){return delete n.peers,n.left=r,n.right=g,n.prefix===""&&(delete n.depth,delete n.prefix),!0}function needsPing(n,r){return n.lastPing<Date.now()-r}const KBUCKET_SIZE=20,PREFIX_LENGTH=8,PING_NEW_CONTACT_CONCURRENCY=20,PING_NEW_CONTACT_MAX_QUEUE_SIZE=100,PING_OLD_CONTACT_COUNT=3,PING_OLD_CONTACT_CONCURRENCY=20,PING_OLD_CONTACT_MAX_QUEUE_SIZE=100,KAD_PEER_TAG_NAME="kad-peer",KAD_PEER_TAG_VALUE=1,LAST_PING_THRESHOLD=6e5,POPULATE_FROM_DATASTORE_ON_START=!0,POPULATE_FROM_DATASTORE_LIMIT=1e3;class RoutingTable extends TypedEventEmitter{kBucketSize;kb;network;closestPeerTagger;log;components;running;pingNewContactTimeout;pingNewContactQueue;pingOldContactTimeout;pingOldContactQueue;populateFromDatastoreOnStart;populateFromDatastoreLimit;protocol;peerTagName;peerTagValue;metrics;constructor(r,g){super(),this.components=r,this.log=r.logger.forComponent(`${g.logPrefix}:routing-table`),this.kBucketSize=g.kBucketSize??KBUCKET_SIZE,this.running=!1,this.protocol=g.protocol,this.network=g.network,this.peerTagName=g.peerTagName??KAD_PEER_TAG_NAME,this.peerTagValue=g.peerTagValue??KAD_PEER_TAG_VALUE,this.pingOldContacts=this.pingOldContacts.bind(this),this.verifyNewContact=this.verifyNewContact.bind(this),this.peerAdded=this.peerAdded.bind(this),this.peerRemoved=this.peerRemoved.bind(this),this.populateFromDatastoreOnStart=g.populateFromDatastoreOnStart??POPULATE_FROM_DATASTORE_ON_START,this.populateFromDatastoreLimit=g.populateFromDatastoreLimit??POPULATE_FROM_DATASTORE_LIMIT,this.pingOldContactQueue=new PeerQueue({concurrency:g.pingOldContactConcurrency??PING_OLD_CONTACT_CONCURRENCY,metricName:`${g.metricsPrefix}_ping_old_contact_queue`,metrics:this.components.metrics,maxSize:g.pingOldContactMaxQueueSize??PING_OLD_CONTACT_MAX_QUEUE_SIZE}),this.pingOldContactTimeout=new AdaptiveTimeout({...g.pingOldContactTimeout??{},metrics:this.components.metrics,metricName:`${g.metricsPrefix}_routing_table_ping_old_contact_time_milliseconds`}),this.pingNewContactQueue=new PeerQueue({concurrency:g.pingNewContactConcurrency??PING_NEW_CONTACT_CONCURRENCY,metricName:`${g.metricsPrefix}_ping_new_contact_queue`,metrics:this.components.metrics,maxSize:g.pingNewContactMaxQueueSize??PING_NEW_CONTACT_MAX_QUEUE_SIZE}),this.pingNewContactTimeout=new AdaptiveTimeout({...g.pingNewContactTimeout??{},metrics:this.components.metrics,metricName:`${g.metricsPrefix}_routing_table_ping_new_contact_time_milliseconds`}),this.kb=new KBucket({kBucketSize:g.kBucketSize,prefixLength:g.prefixLength,splitThreshold:g.splitThreshold,numberOfOldContactsToPing:g.numberOfOldContactsToPing,lastPingThreshold:g.lastPingThreshold,ping:this.pingOldContacts,verify:this.verifyNewContact,onAdd:this.peerAdded,onRemove:this.peerRemoved}),this.closestPeerTagger=new ClosestPeers(this.components,{logPrefix:g.logPrefix,routingTable:this,peerSetSize:g.closestPeerSetSize,refreshInterval:g.closestPeerSetRefreshInterval,closeTagName:g.closeTagName,closeTagValue:g.closeTagValue}),this.components.metrics!=null&&(this.metrics={routingTableSize:this.components.metrics.registerMetric(`${g.metricsPrefix}_routing_table_size`),routingTableKadBucketTotal:this.components.metrics.registerMetric(`${g.metricsPrefix}_routing_table_kad_bucket_total`),routingTableKadBucketAverageOccupancy:this.components.metrics.registerMetric(`${g.metricsPrefix}_routing_table_kad_bucket_average_occupancy`),routingTableKadBucketMinOccupancy:this.components.metrics.registerMetric(`${g.metricsPrefix}_routing_table_kad_bucket_min_occupancy`),routingTableKadBucketMaxOccupancy:this.components.metrics.registerMetric(`${g.metricsPrefix}_routing_table_kad_bucket_max_occupancy`),routingTableKadBucketMaxDepth:this.components.metrics.registerMetric(`${g.metricsPrefix}_routing_table_kad_bucket_max_depth`),kadBucketEvents:this.components.metrics.registerCounterGroup(`${g.metricsPrefix}_kad_bucket_events_total`)})}isStarted(){return this.running}async start(){this.running||(this.running=!0,await start(this.closestPeerTagger),await this.kb.addSelfPeer(this.components.peerId))}async afterStart(){Promise.resolve().then(async()=>{if(!this.populateFromDatastoreOnStart)return;let r=0;for(const g of await this.components.peerStore.all({filters:[_=>_.protocols.includes(this.protocol)&&_.tags.has(KAD_PEER_TAG_NAME)],limit:this.populateFromDatastoreLimit})){if(!this.running)return;try{await this.add(g.id),r++}catch{this.log("failed to add peer %p to routing table, removing kad-dht peer tags - %e"),await this.components.peerStore.merge(g.id,{tags:{[this.peerTagName]:void 0}})}}this.log("added %d peer store peers to the routing table",r)}).catch(r=>{this.log.error("error adding peer store peers to the routing table %e",r)})}async stop(){this.running=!1,await stop(this.closestPeerTagger),this.pingOldContactQueue.abort(),this.pingNewContactQueue.abort()}async peerAdded(r,g){this.components.peerId.equals(r.peerId)||await this.components.peerStore.merge(r.peerId,{tags:{[this.peerTagName]:{value:this.peerTagValue}}}),this.updateMetrics(),this.metrics?.kadBucketEvents.increment({peer_added:!0}),this.safeDispatchEvent("peer:add",{detail:r.peerId})}async peerRemoved(r,g){this.components.peerId.equals(r.peerId)||await this.components.peerStore.merge(r.peerId,{tags:{[this.peerTagName]:void 0}}),this.updateMetrics(),this.metrics?.kadBucketEvents.increment({peer_removed:!0}),this.safeDispatchEvent("peer:remove",{detail:r.peerId})}async*pingOldContacts(r,g){if(!this.running)return;const _=[];for(const x of r){if(this.kb.get(x.kadId)==null){this.log("asked to ping contact %p that was not in routing table",x.peerId);continue}this.metrics?.kadBucketEvents.increment({ping_old_contact:!0}),_.push(async()=>{const S=this.pingOldContactQueue.find(x.peerId);if(S!=null)return this.log("asked to ping contact %p was already being pinged",x.peerId),await S.join(g)?void 0:x;if(!await this.pingOldContactQueue.add(async C=>{const T=this.pingOldContactTimeout.getTimeoutSignal(),R=anySignal([T,C?.signal]);setMaxListeners(1/0,T,R);try{return await this.pingContact(x,C)}catch{return this.metrics?.kadBucketEvents.increment({ping_old_contact_error:!0}),!0}finally{this.pingOldContactTimeout.cleanUp(T),R.clear()}},{peerId:x.peerId,signal:g?.signal}))return x})}for await(const x of parallel$1(_))x!=null&&(yield x)}async verifyNewContact(r,g){const _=this.pingNewContactTimeout.getTimeoutSignal(),x=anySignal([_,g?.signal]);setMaxListeners(1/0,_,x);try{const S=this.pingNewContactQueue.find(r.peerId);return S!=null?(this.log("joining existing ping to add new peer %p to routing table",r.peerId),await S.join({signal:x})):await this.pingNewContactQueue.add(async E=>(this.metrics?.kadBucketEvents.increment({ping_new_contact:!0}),this.log("pinging new peer %p before adding to routing table",r.peerId),this.pingContact(r,E)),{peerId:r.peerId,signal:x})}catch{return this.log.trace("tried to add peer %p but they were not online",r.peerId),this.metrics?.kadBucketEvents.increment({ping_new_contact_error:!0}),!1}finally{this.pingNewContactTimeout.cleanUp(_),x.clear()}}async pingContact(r,g){try{this.log("pinging contact %p",r.peerId);for await(const _ of this.network.sendRequest(r.peerId,{type:MessageType.PING},g))if(_.type===EventTypes.PEER_RESPONSE)return _.messageType===MessageType.PING?(this.log("contact %p ping ok",r.peerId),this.safeDispatchEvent("peer:ping",{detail:r.peerId}),!0):!1;return!1}catch(_){return this.log("error pinging old contact %p - %e",r.peerId,_),!1}}get size(){return this.kb==null?0:this.kb.count()}async find(r){const g=await convertPeerId(r);return this.kb.get(g)?.peerId}closestPeer(r){const g=this.closestPeers(r,1);if(g.length>0)return g[0]}closestPeers(r,g=this.kBucketSize){return this.kb==null?[]:[...this.kb.closest(r,g)]}async add(r,g){if(this.kb==null)throw new Error("RoutingTable is not started");await this.kb.add(r,g)}async remove(r){if(this.kb==null)throw new Error("RoutingTable is not started");const g=await convertPeerId(r);await this.kb.remove(g)}updateMetrics(){if(this.metrics==null||this.kb==null)return;let r=0,g=0,_=0,x=20,S=0;function E(C){if(isLeafBucket(C)){C.depth>_&&(_=C.depth),g++,r+=C.peers.length,C.peers.length<x&&(x=C.peers.length),C.peers.length>S&&(S=C.peers.length);return}E(C.left),E(C.right)}E(this.kb.root),this.metrics.routingTableSize.update(r),this.metrics.routingTableKadBucketTotal.update(g),this.metrics.routingTableKadBucketAverageOccupancy.update(Math.round(r/g)),this.metrics.routingTableKadBucketMinOccupancy.update(x),this.metrics.routingTableKadBucketMaxOccupancy.update(S),this.metrics.routingTableKadBucketMaxDepth.update(_)}}const GENERATED_PREFIXES=[77591,22417,43971,28421,740,29829,71467,228973,196661,78537,27689,36431,44415,14362,19456,106025,96308,2882,49509,21149,87173,131409,75844,23676,121838,30291,17492,2953,7564,110620,129477,127283,53113,72417,165166,109690,21200,102125,24049,71504,90342,25307,72039,26812,26715,32264,133800,71161,88956,171987,51779,24425,16671,30251,186294,247761,14202,2121,8465,35024,4876,85917,169730,3638,256836,96184,943,18678,6583,52907,35807,112254,214097,18796,11595,9243,23554,887,268203,382004,24590,111335,11625,16619,29039,102425,69006,97976,92362,32552,63717,41433,128974,137630,59943,10019,13986,35430,33665,108037,43799,43280,38195,29078,58629,18265,14425,46832,235538,40830,77881,110717,58937,3463,325358,51300,47623,117252,19007,10170,20540,91237,294813,4951,79841,56232,36270,128547,69209,66275,100156,32063,73531,34439,80937,28892,44466,88595,216307,32583,49620,16605,82127,45807,21630,78726,20235,40163,111007,96926,5567,72083,21665,58844,39419,179767,48328,42662,51550,5251,37811,49608,81056,50854,55513,20922,18891,197409,164656,32593,71449,220474,58919,85682,67854,13758,35066,3565,61905,214793,119572,141419,21504,10302,27354,67003,46131,32668,15165,64871,34450,17821,2757,11452,34189,5160,12257,85523,560,53385,65887,119549,135620,312353,115979,122356,10867,193231,124537,54783,90675,120791,4715,142253,50943,17271,43358,25331,4917,120566,34580,12878,33786,160528,32523,4869,301307,104817,81491,23276,8832,97911,31265,52065,7998,49622,9715,43998,34091,84587,20664,69041,29419,53205,10838,58288,116145,6185,5154,141795,35924,21307,144738,43730,12085,8279,10002,119,133779,199668,72938,31768,39176,67875,38453,9700,44144,4121,116048,41733,12868,82669,92308,128,34262,11332,7712,90764,36141,13553,71312,77470,117314,96549,49135,23602,54468,28605,6327,62308,17171,67531,21319,14105,894,107722,46157,8503,51069,100472,45138,15246,14577,35609,191464,1757,13364,161349,32067,91705,81144,52339,5408,91066,21983,14157,100545,4372,26630,129112,1423,29676,213626,4397,88436,99190,6877,49958,26122,114348,60661,29818,293118,50042,179738,16400,163423,89627,31040,43973,36638,45952,5153,1894,109322,1898,134021,12402,112077,68309,190269,69866,31938,107383,11522,105232,11248,14868,39852,71707,186525,16530,38162,106212,11700,5130,16608,26998,59586,108399,230033,43683,48135,82179,2073,5015,196684,189293,16378,23452,8301,35640,11632,214551,29240,57644,33137,91949,55157,52384,117313,5090,17717,89668,49363,82238,241035,66216,29066,184088,97206,62820,26595,4241,135635,173672,8202,459,71355,146294,29587,3008,135385,141203,14803,6634,45094,69362,50925,546,51884,62011,83296,234584,44515,56050,89476,87751,19373,12691,149923,19794,13833,35846,87557,58339,2884,19145,25647,12224,11024,77338,64608,122297,53025,7205,36189,36294,170779,21750,7739,173883,75192,35664,224240,113121,30181,26267,27036,117827,92015,106516,55628,203549,67949,60462,60844,35911,20457,1820,920,19773,8738,73173,181993,38521,98254,76257,46008,92796,5384,26868,151566,22124,2411,15919,186872,180021,28099,152961,78811,80237,62352,102653,74259,184890,16792,123702,224945,29940,19512,75283,14059,112691,92811,233329,20411,138569,53341,109802,50600,134528,66747,5529,166531,31578,64732,67189,1596,126357,967,167999,206598,109752,119431,207825,78791,91938,10301,27311,24233,252343,28831,32812,66002,112267,90895,8786,8095,16824,22866,21813,60507,174833,19549,130985,117051,52110,6938,81923,123864,38061,919,18680,53534,46739,112893,161529,85429,26761,11900,81121,91968,15390,217947,56524,1713,6654,37089,85630,138866,61850,16491,75577,16884,98296,73523,6140,44645,6062,36366,29844,57946,37932,42472,5266,20834,19309,33753,127182,134259,35810,41805,45878,312001,14881,47757,49251,120050,44252,3708,25856,107864,120347,1228,36550,41682,34496,47025,8393,173365,246526,12894,161607,35670,90785,126572,2095,124731,157033,58694,554,12786,9642,4817,16136,47864,174698,66992,4639,69284,10625,40710,27763,51738,30404,264105,137904,109882,52487,42824,57514,2740,10479,146799,107390,16586,88038,174951,9410,16185,44158,5568,40658,46108,12763,97385,26175,108859,664,230732,67470,46663,14395,50750,141320,93140,15361,47997,55784,6791,307840,118569,107326,18056,58281,260415,54691,8790,73332,45633,7511,45674,143373,14031,11799,94491,35646,96544,14560,26049,32983,25791,83814,42094,231370,63955,139212,2359,169908,3108,183486,105867,28197,32941,124968,26402,88267,149768,23053,3078,19091,52924,25383,19209,111548,97361,3959,24880,235061,9099,24921,161254,151405,20508,7159,34381,20133,11434,74036,19974,34769,36585,1076,22454,17354,38727,235160,111547,96454,117448,156940,91330,37299,7310,26915,117060,51369,22620,61861,322264,106850,111694,15091,2624,40345,300446,177064,1707,27389,54792,327783,132669,183543,59003,17744,20603,151134,106923,53084,71803,279424,319816,11579,21946,16728,38274,72711,5085,83391,88646,40159,25027,34680,10752,12988,54126,30365,18338,100445,230674,44874,84974,143877,123253,139372,28082,91477,144002,13096,219729,46016,50029,42377,14601,6660,58244,58978,23918,88206,113611,64452,17541,41032,10942,12021,49189,10978,40175,37156,10947,71709,106894,112538,57007,137486,150608,152719,40615,7746,279716,13101,19524,28708,40578,72320,1096,182051,94527,51275,22833,45164,81917,77519,48508,5421,140302,37845,149830,5587,27579,5357,428725,248187,6326,206760,39814,32585,89923,44341,288753,284443,96368,31201,94189,119504,20359,52073,103216,179,27934,32801,96035,34111,34309,101326,18198,20704,210266,37643,27880,141873,106e3,19414,56614,167714,66483,107885,86602,4379,20796,75467,4987,5017,118857,26003,34308,114428,29198,6686,29697,73632,3739,69795,16798,41504,7207,30722,21436,36735,28067,28545,3239,11221,36031,41889,100010,19247,317673,29495,174554,6424,129725,53845,94986,7955,59676,2604,191497,19735,102214,62954,23844,11872,179525,261436,34492,428,78404,142035,16747,17246,27578,37021,33672,57944,26056,135760,2369,61674,122066,31327,19374,157065,40553,130982,69619,71290,38855,72100,92903,95940,51422,165999,65713,57873,50726,7288,20272,2081,42326,22624,81120,57914,79352,19447,1684,72302,11774,302559,161481,96396,13692,414988,3721,79066,56627,46883,21150,11747,12184,5856,113458,176117,84416,52079,27933,3354,59765,141359,2212,216309,2555,23458,196722,142463,45701,44548,28798,19418,215,29916,9396,10574,114226,84475,13520,18694,34056,4524,90302,62930,13539,19407,77209,7728,38088,9535,2263,23875,183945,17750,26274,67172,10585,28042,22199,7478,51331,66030,26774,192929,31434,25850,50197,52926,178158,4679,181256,70184,229600,9959,105594,72158,73974,2726,35085,78087,23284,35568,51713,155676,5401,27254,11966,17569,223253,71993,103357,111477,55722,30504,26034,46774,35392,36285,214814,41143,163465,1051,16094,81044,6636,76489,179102,20712,39178,35683,125177,54219,30617,52994,25324,50123,2543,87529,58995,10688,125199,12388,60158,125481,131646,7642,133350,65874,3438,97277,101450,10075,56344,116821,50778,60547,98016,106135,13859,14255,16300,77373,173521,8285,45932,37426,4054,114295,55947,7703,39114,52,51119,128135,19714,60715,9554,50492,88180,2823,118271,52993,122625,97919,23859,37895,25040,33614,32102,20431,3577,9275,15686,43031,157741,110358,1884,40291,125391,13736,5008,64881,87336,77381,70711,43032,49155,118587,70494,4318,10168,30126,12580,10524,280104,104001,145413,2862,84140,6603,106005,13566,12780,11251,42830,571,179910,82443,13146,469,42714,32591,265217,424024,92553,54721,134100,6007,15242,114681,59030,16718,85465,200214,85982,55174,165013,23493,56964,82529,109150,32706,27568,82442,5350,14976,13165,44890,60021,21343,33978,17264,4655,22328,27819,75730,16567,55483,14510,17926,45827,150609,3704,7385,272531,161543,76904,122163,52405,2039,19165,41623,14423,228354,3369,176360,85491,7122,35789,303724,4465,13628,2233,55311,118771,20713,10006,221519,45115,71021,35650,29775,7337,10864,20665,21142,1746,15080,1624,32449,10905,105743,229797,7701,3940,22997,178467,57208,389057,39683,59403,63344,63125,54847,69691,18336,56448,3362,37202,18282,29648,138224,35867,10495,5911,28814,26653,31514,176702,26550,45621,11734,4525,40543,73944,121080,27858,155561,14887,44670,30742,8796,107455,113472,56369,75581,183777,240095,133699,153299,8768,160464,26058,49078,103971,21875,71486,44888,17156,9678,89541,123019,102337,3972,83930,21245,87852,109660,287918,183019,686,10100,39177,283941,11274,24736,26793,26214,25995,77011,141580,4070,23742,46285,46632,30700,26669,19056,35951,115575,174034,56097,35463,87425,24575,44245,38701,82317,85922,281616,100333,147697,61503,7730,84330,8530,59917,61597,17173,9092,32658,90288,193136,39023,20381,56654,31132,7779,1919,1375,117128,30819,11169,40938,23935,115201,101155,151034,4835,11231,74550,89388,59951,91704,107312,167882,115062,12732,72738,88703,464019,158267,57995,60496,737,14371,123867,4174,243339,159946,7568,16025,134556,110916,38103,191,80226,88794,29688,27230,10454,76308,57647,77409,113483,66864,14745,19808,12023,46583,84805,16015,17102,2231,20611,3547,95740,250131,34559,108894,8498,15853,159169,148920,20942,2813,93160,45188,210613,45531,52587,149062,39782,28194,57849,60965,84954,89766,84453,100927,16501,27658,165311,103841,54192,207341,19558,20084,319622,5672,205467,98462,61849,36279,13609,147177,24726,165015,209489,59591,31157,6551,117580,75060,141146,277310,21072,22023,106474,63041,137443,122965,68371,5383,42146,98961,113467,30863,23794,4843,99630,30392,82679,13699,241612,33601,93146,24319,18643,32155,95669,40440,15333,34089,67799,142144,58245,38633,114531,117400,77861,188726,5507,2568,8853,10987,107222,2663,2421,11530,13345,30075,41785,118661,104786,17459,12490,16281,71936,193555,17431,5944,71758,26485,77317,20803,367167,158,7362,93430,11735,172445,46002,11532,54482,930,62911,2235,23004,179236,4764,101859,208113,22477,55163,95579,14098,67320,162556,90709,156949,3826,57492,4025,34092,87442,104565,6718,186015,28214,14209,10039,107186,233912,58877,81637,55265,39828,6194,145813,50831,105849,4974,88319,122296,10272,197216,95714,51540,72418,23324,91555,8743,140452,250249,51666,34124,7229,38592,129641,78169,174242,22464,149964,51450,14034,10026,95376,26190,120062,14401,8700,265,31386,143573,7203,229889,61567,4227,140981,2466,72052,10787,10062,30958,6099,38471,30103,23202,208101,70847,467,58934,32271,32984,36637,24107,30771,17109,73353,13650,2098,157040,67366,66904,106018,265380,107238,18535,44025,32681,144983,62505,91295,56120,3082,77508,10322,63023,36700,81885,224127,16721,45023,239261,111272,13852,7866,149243,204199,32309,22084,42029,38316,126644,104973,14406,43454,67322,61310,15789,40285,24026,181047,6301,70927,23319,115823,27248,66693,115875,278566,63007,146844,56841,59007,87368,180001,22370,42114,80605,12022,10374,308,25079,14689,12618,63368,7936,264973,212291,136713,95999,105801,18965,32075,48700,52230,35119,96912,32992,8586,16606,101333,101812,14969,39930,759,193090,27387,42914,12937,5058,62646,64528,38624,25743,37502,3716,4435,30352,178687,26461,132611,42002,138442,35833,59582,16345,8048,60319,49349,309,47800,49739,90482,26405,34470,63786,32479,85028,39866,47846,11649,23934,29466,2816,42864,31828,7410,74885,49632,47629,111801,90749,19536,18767,105764,59606,21223,10746,76298,22220,39408,7190,79654,64856,11602,82156,272765,17079,70089,245473,51813,184407,384678,1576,122249,5064,27481,6188,25790,74361,27541,318284,45430,31488,620,93579,45723,192118,22670,51913,4162,70244,35966,26397,16199,50899,209613,121702,287507,2993,36101,132229,67345,33062,76295,118628,78705,52316,34375,107083,107454,44863,127561,33964,3073,154010,190914,55967,39074,6272,31047,5550,41123,26154,98638,47110,19998,148091,50229,31329,59900,195442,19106,61347,73497,70015,682,45850,25776,38022,148951,6288,37411,232526,109277,27286,32342,9262,5220,16651,23175,46740,129438,78614,121925,66914,88710,127952,5563,21500,34521,10739,14863,191006,62956,17359,16749,67027,56284,69134,43301,35039,58883,54466,60823,404451,75743,59856,86979,7923,34273,83785,32142,7693,268986,197428,282681,17049,22346,22990,92245,107180,3357,37104,96724,49153,7683,31197,43267,82231,164276,23696,20848,188364,22309,24821,158707,1018,22514,70922,27792,45589,59709,10765,736,35218,63479,51987,24275,63588,55361,92929,81964,4658,20122,12330,44058,13065,311456,72224,8337,211229,38979,22590,138478,52757,32595,133600,8838,31549,94412,43391,90056,1585,94802,127271,6223,31889,137038,132910,2165,57616,230152,6080,10748,36737,74579,134062,50525,180532,119270,34556,76155,82394,52595,29258,31435,87820,67996,26943,183878,38007,2410,13526,180297,69856,3503,187396,167700,7838,16701,9199,56267,3661,37407,65994,23767,5708,62508,221700,67088,86978,46776,84434,32088,5612,9149,88244,21685,95151,46750,189612,2979,506311,2594,3628,40074,105039,78243,28523,6651,38058,71999,30992,12764,68261,108991,6165,26450,61961,13400,22426,7490,60890,109623,2070,12958,50355,67979,257096,7213,42578,52121,35716,65461,7516,124758,39268,302,64712,14977,1467,219452,2840,34229,11121,21602,19270,63574,8024,1532,17331,79839,78885,52029,180767,57957,6069,91265,61380,55767,8927,32881,287603,22149,35029,68876,6428,199567,46926,13412,104132,21434,366616,45060,110046,81924,128910,45886,52821,130416,29416,77342,21762,67329,121432,79924,11724,38625,81006,102033,28338,13326,3250,82056,82526,38212,21112,12382,111495,3263,7414,86274,93490,40844,30224,45212,24019,48411,71367,24941,76729,57776,3769,38114,202019,197745,31953,237533,33270,201580,255648,100798,44741,32241,98468,106931,10085,15090,170358,33154,66787,18819,69760,25061,234005,82660,6295,131975,16874,9076,4094,25005,17740,40908,19533,220019,44330,99792,50040,19619,13950,55228,24423,31253,95308,103177,184795,28590,82285,5059,3210,75525,49894,70007,56178,10580,36051,139681,21617,98736,3555,106306,164189,37352,63915,47824,24883,145530,61904,28444,11483,19837,145446,30420,112972,85939,11835,191233,2262,20705,58630,1753,148334,1197,144714,6887,11223,107667,60879,77914,4151,57417,81594,96681,169430,1784,20444,95138,254041,27038,596,7117,72808,13759,3353,126776,21074,55322,27081,36942,39547,139830,179275,4453,713,8722,71399,19204,25785,22794,23923,104114,11291,25458,102309,88396,75288,230440,206396,104551,58447,130857,37247,94734,31548,176529,226077,65159,20104,10096,66881,94191,237909,27109,37404,1520,27421,25220,113003,23423,24884,50585,6286,231877,150800,11789,3226,90004,60642,5053,202400,61442,132531,175329,57138,30116,103847,9973,75367,16452,32360,59119,21246,10191,164804,23305,61051,37348,154530,13214,5468,50403,66754,130976,50559,80515,14436,155492,84017,5472,43107,41240,2890,90431,70188,382,76234,48040,50211,281038,237007,32115,142178,1536,22761,96429,1811,31243,1679,49143,55209,17402,235054,61494,7462,77030,34925,87609,78002,9499,9027,73289,201078,101379,63544,27666,5469,10642,30029,49816,132979,95620,58086,351930,116300,2110,2043,30845,6154,11279,16727,4122,2277,27281,4971,3650,39060,61970,65951,39674,75686,38151,11370,130809,177895,32665,63725,122267,7857,39618,118483,44792,157755,178624,136994,24260,41308,22471,12404,21707,12486,30473,52781,50246,20247,39065,909,56825,103158,128603,31542,1089,41935,32744,12428,37963,84420,33134,72921,208449,42622,168151,127335,147107,46699,38216,12591,94342,85814,31423,24944,2605,87542,67473,192551,4496,56321,91819,17630,6300,256183,114569,202090,33209,35289,34897,24967,40520,43470,5344,10199,34810,14283,10381,10017,62923,49924,23233,64539,13051,35686,19698,11570,135555,120868,44924,87065,52318,52335,47586,140906,245885,109834,78668,9065,46990,25258,72022,61243,40838,4545,146387,10537,11557,17470,36930,68104,46711,24264,79401,81043,18225,120488,24746,84338,81652,28266,13776,21878,46973,1047,230465,73357,95777,24973,210160,62210,58404,110633,169651,6937,41870,9909,26822,191062,76553,27519,96256,239070,2478,205678,67955,58532,20601,50120,19148,78501,195724,110740,8249,109665,27446,30568,57631,31425,49752,32820,65504,50079,3663,102256,219898,23849,211315,14645,4359,91767,9528,12449,49366,7941,49763,107848,8930,27086,50686,9744,10447,81935,39513,46514,1670,29229,6172,22312,137280,97759,9806,14445,22976,56458,73391,34983,93760,174219,52573,33149,59747,2429,136277,75123,165263,91040,7446,57632,48633,97140,246081,84766,151684,79918,93268,120346,54059,54875,77858,32996,103590,45276,11968,19600,25849,17159,132907,42828,16817,4913,99462,103303,27395,5737,74184,20749,21160,14377,77062,131403,158735,10999,27799,77785,9320,34366,51593,61070,33746,47048,29268,36675,30262,53297,9832,82e3,20188,122292,39917,7331,18160,68301,185935,134830,15031,4935,10004,165845,185534,46923,30109,44134,122631,18874,22903,112790,26561,18549,348902,82871,140345,255565,135390,63556,103747,145055,179600,145662,296111,61661,211987,23952,52342,126343,48450,32919,44277,82185,9591,62139,205363,376969,394874,108461,18040,120885,14798,39863,16571,16794,58271,81025,55206,14640,118656,6361,44092,85970,6262,153863,108244,180200,72264,79947,38044,10050,5735,61221,80712,5471,115689,11391,11661,184257,20010,60116,30320,19327,134598,45455,27542,18004,125092,452272,1549,91523,46567,180063,156026,2608,11174,58848,37788,65907,80194,30490,5786,40775,119519,106241,11323,156297,8425,61495,2617,29675,2425,59886,112582,49142,59618,4863,50597,86710,50650,168632,27693,85641,83643,18993,25768,84284,28090,93592,36627,312804,43381,9887,9402,100931,97165,3311,173330,66805,28935,4963,184460,3201,78102,19126,21607,37496,24938,22615,16153,32862,134792,153318,61120,6067,2812,12826,12792,23825,37559,64662,202250,102694,155488,85881,149193,46233,65383,15521,106982,11358,176786,25752,39717,34208,24510,32464,77742,39371,72028,138229,60688,71386,102834,132477,2208,11548,63670,271279,28351,30338,38620,32491,99845,143885,152266,13252,2825,178663,108097,1775,78201,14897,113573,163346,62292,171129,22183,96598,38733,64971,166776,117445,9968,146393,44677,74867,20908,97328,12761,25656,26785,9148,112344,26115,99176,110121,22437,49547,6180,79320,5835,31392,43328,33377,75870,119860,69497,80273,7325,155219,43167,111173,28347,20222,3763,71752,55041,47252,14618,28088,15012,97805,194698,54636,2036,41349,6173,96604,61530,51859,43782,13361,24334,22668,24792,7070,23441,16789,3209,36211,208475,26242,32880,122181,182407,21444,31060,88459,29929,77907,12716,10934,97005,20599,31690,8403,58445,30303,22700,10336,86731,103115,337709,72556,46788,112566,47684,67089,53548,36874,56487,41387,125985,26893,40071,106683,73712,18787,40105,72992,67246,137276,50802,36790,70328,138827,22466,39263,183295,29858,50975,9322,57397,10654,24364,30383,55799,41600,23584,127295,296610,129078,143558,244131,86397,36049,1085,80677,3820,108139,5476,34767,24683,7758,13060,7239,131671,250593,59556,103392,29810,4188,252323,39404,116877,7651,43600,40338,13554,157253,39196,25978,144387,61211,234,50104,6129,10449,93777,9240,356378,274148,4439,72970,3724,147770,78680,62570,115877,40027,40547,36817,224392,64609,34795,165027,67440,2477,37206,23431,50754,164797,46018,94995,170982,27051,7957,22767,3674,27900,56419,18930,60701,41302,2692,84749,339721,61996,111094,80221,50129,1045,8153,62945,19202,8250,37208,37418,32560,79477,41106,88569,33963,36693,5892,30570,1581,66471,49647,11922,160717,29442,5643,114865,82962,95982,132098,22633,22838,94726,54556,28566,205039,162340,33216,16849,35847,221339,94851,26533,71469,1805,3804,12935,45483,71020,36310,65381,192960,34240,35165,59773,1248,46954,155332,96864,4246,388800,16129,57133,74592,44807,442014,38203,42574,80818,91592,26377,36424,65760,977,77387,22628,147610,28018,30561,98454,6969,119628,63648,18170,36854,26601,64018,22027,37279,51395,152934,21153,9430,58760,194742,5330,55115,34158,28917,174111,13171,122326,1526,43896,66094,25325,4234,148354,11450,275,18999,112191,44365,22723,68409,8733,57746,96565,75007,14196,108844,29475,88599,177563,100792,106156,86323,93726,14248,135341,194131,40126,47099,14779,8272,39597,95983,171398,65882,28052,10393,47213,40689,22120,72212,106829,34964,109146,753,648,21660,30047,17527,181025,5619,145357,4085,216883,9359,186951,24779,53931,24545,36197,223296,62628,168101,4243,107313,30321,26642,13049,51059,31027,107912,807,73550,26551,84369,122422,165872,49754,74213,234264,33151,52014,33100,87183,22365,52500,40013,23302,5652,72723,21404,26107,48434,587,94049,168493,96418,32871,70860,31709,25128,443,71597,166253,15670,70994,26341,133675,28280,75491,54756,47955,56028,26182,11952,113272,472197,64640,110753,17919,337,50642,22576,142,87371,53391,93210,126694,15285,19642,85667,14148,1506,42092,52962,33243,11970,20734,135843,57044,58880,13002,219134,22876,64754,232519,4257,43120,321573,24799,64526,124728,52579,81472,70831,276848,17403,74359,23021,182101,74597,23744,148267,12055,7976,5349,11772,67540,167347,65318,18720,127832,108238,22828,90233,9987,259080,118185,73209,79270,13775,90100,137742,90799,70569,15699,19961,9087,67475,57872,39731,8810,134897,131868,146849,19898,3334,2281,167061,91073,60356,467742,74712,188,53179,137679,92769,29241,9537,132595,80119,1041,88962,5976,40171,44911,102859,139059,104558,98987,47761,19272,71472,113864,175377,73338,10857,23402,23758,1591,139864,5644,4076,118760,16427,134198,18853,20291,100849,37423,22038,36677,19071,195521,57445,11069,31869,55718,66882,148490,44,41296,75242,49704,166810,9906,20943,122258,49112,105667,15969,10344,6408,187694,21399,72742,58970,14867,14376,81889,41856,23225,15042,56993,16074,131389,74276,72407,53875,383108,53597,37363,68993,44854,122548,430927,198279,38430,80409,12245,2981,628,2818,17760,37437,238229,7968,46892,2200,3730,34190,65983,37959,112291,87850,70827,6522,20750,73913,111621,41652,19587,2780,58668,25916,85259,18200,168962,95781,42445,102050,7776,57662,103313,47742,96358,41964,66174,100396,29069,204735,19679,27978,7479,40264,22534,61183,36081,107436,58223,14680,23002,101311,24716,124108,12908,5646,31750,40380,14215,232799,102772,14122,96775,61398,50917,12096,149880,67833,598749,124194,155871,49216,790,14677,65319,56917,7440,145744,95701,12206,49405,129269,76199,45732,9767,11058,9047,210885,11051,7392,26307,2130,8132,147526,20802,232698,115660,50060,59789,57344,107623,80343,112676,23291,9866,160971,34032,118291,15719,59730,164911,28975,2659,58046,78480,21854,66209,53863,109085,116045,29021,46481,107552,22130,18764,70254,31272,11300,52460,43933,84738,20721,53869,190840,79673,105300,7561,321817,66924,13940,33281,101046,183181,32176,71878,5678,62924,79535,56646,40303,19559,27703,93042,73368,42187,3670,37376,46440,7023,36816,109628,20680,5940,276440,275233,170848,112093,136996,14984,20226,111441,77693,112960,48577,39370,55707,50314,123404,26570,54281,61372,123391,4857,35928,246740,132507,106646,44241,7196,92258,9825,37688,51197,303141,5590,15476,132986,10955,85782,34486,26696,7991,28813,18858,39546,11703,11365,38185,5716,93555,11925,40121,60002,6985,10976,171384,3887,43394,13337,56346,6381,252336,39573,75042,53711,1028,31781,44295,95925,131713,7214,68125,43571,70954,213234,1628,8760,13391,65485,17320,56038,1710,25248,60803,57399,19839,3870,326,281556,50945,72400,21460,316244,75619,56246,98775,481,13513,55765,50427,7388,123519,32929,57908,27124,61316,101097,57467,30228,48792,10788,20402,37318,50526,155730,34456,158065,145305,17832,43733,64052,4506,35072,205355,177028,184004,187081,68616,35938,83703,10367,36892,93186,260137,51934,89970,4985,23445,26755,21558,7948,78741,23376,124405,85594,68596,57536,49351,12619,56593,132668,99924,109728,71844,71935,196018,65464,17617,14987,89701,143773,33997,8687,22701,33258,2914,4436,72108,85610,9671,49067,2327,82988,1361,1672,44033,35777,30269,24057,10605,82236,616,15793,13919,47249,112086,116698,9484,80207,90574,33304,68624,93127,56101,42210,160929,4827,38995,38095,4701,125119,5027,33680,9236,231236,14135,87837,23318,70261,78893,30151,81482,14332,1084,74256,27532,46644,79185,3148,62615,6981,55672,31668,36825,1849,14536,37446,14738,23779,43058,162749,72199,1168,21346,5592,85932,85302,9668,18351,57135,150360,2080,228015,77953,34670,119302,151751,31009,106725,84265,45214,59289,74178,113071,263206,111009,4021,44449,188119,192629,123592,392506,292847,114487,12831,205858,9852,20780,79648,75767,357014,97721,18166,21005,67950,33226,204009,16536,2987,11335,66717,144910,47950,17262,55060,15063,2934,51038,26775,178497,66008,3427,49433,128592,20036,157553,63861,3089,23015,51210,28696,35933,49942,71135,231518,99620,17248,21835,176536,20676,16944,38700,165831,233253,295625,36723,13023,52745,10907,19423,67972,125868,95473,82875,1183,108455,52685,33417,64095,21433,52438,33191,127809,44505,211823,7810,2752,95548,162031,7185,91196,47563,61721,33359,17897,23682,42806,178101,22874,49707,199897,75419,82456,8618,11171,79712,116847,18783,44190,46564,5346,59046,95032,7893,14916,3214,26800,24172,121453,34362,10250,17408,18888,4840,68696,22831,13162,36005,32512,14800,62357,41723,45046,27247,37486,5372,2564,34261,298500,66509,133920,89138,31305,117697,19097,108304,81386,84106,23802,46411,63304,946,51417,41777,41041,19501,115864,60743,294354,37955,94165,18116,1156,17937,20645,57114,90804,58042,48643,92288,9861,2557,88546,61333,101008,12853,5148,87856,4152,144503,73841,18718,9789,147565,10846,42085,12789,30223,8993,56352,67203,2448,28215,6052,23540,126319,75933,36689,80235,23231,23561,21383,38800,77548,102798,21234,31468,158608,46188,63960,191679,8051,67014,11185,170078,42186,28827,34777,41930,212079,12421,34750,24111,110344,73918,45171,70826,141949,40063,23979,24254,37309,26724,27179,24718,83648,54938,14591,17425,29525,102675,48975,48654,12316,8929,60640,41709,50168,63264,89812,50716,48632,38755,138583,160123,55579,71829,24230,233277,46322,39650,166388,34718,24108,98252,7031,106695,62498,18258,35062,217827,78731,34824,33354,19520,60852,2432,60224,8587,2836,62955,702,20227,42285,40560,95592,62486,11094,53035,143291,18842,46177,77994,1770,9657,107422,172915,32655,128716,25886,25164,156740,119928,165875,85817,11007,89110,33956,12652,65156,180266,8494,36889,19958,20955,96,1264,118288,135769,44754,86671,5632,19026,168220,289120,33569,93821,66144,70635,7687,5642,2714,55445,56636,71545,184182,93133,7332,37389,12643,52315,22729,11014,158742,17050,152889,50178,34601,41945,52136,9948,26914,63548,95721,115951,40759,8960,158258,38938,49232,48325,42234,81523,253019,66128,40978,20048,238048,38760,62928,122560,118532,43687,137472,163689,26680,9878,17448,51035,16211,60834,36749,29178,14241,59868,150086,2305,26477,42422,34342,165341,83279,33894,14257,29928,12743,13957,125571,89134,66712,10952,16507,147839,30146,7249,16565,45399,39874,114565,215780,31990,230881,171477,102,196546,44538,10880,84948,281705,86651,10617,31395,2342,453658,43569,60561,132901,21845,17727,58556,258242,22262,58728,4008,77997,11806,37431,30599,81375,109137,185787,114085,217292,97453,169085,30593,60212,11544,102056,65580,2384,91655,4855,95725,7295,157994,16228,20669,53276,141590,105246,17334,25440,76067,17967,39321,38911,11362,28559,63807,21627,26468,85816,40120,1025,15234,58319,69516,66512,124548,75845,78873,22137,46681,51242,85683,32909,76747,35555,43396,101465,1765,73094,1077,2962,39028,66777,57831,42048,15828,13962,36041,63657,52412,5242,58846,2141,5506,219012,134451,3936,182230,17558,17153,152237,22621,49377,170216,35257,68233,65374,6510,11126,212151,7184,2480,22517,3437,33073,30156,16557,3768,55067,86829,91e3,12350,148650,66017,79424,70885,49066,28250,21369,51213,34533,11510,3258,18176,18465,84413,6315,36411,163765,4346,356,107618,598,13727,285026,162695,8749,14583,7132,63521,184253,32378,25991,5604,30961,53675,4874,84693,5086,34811,26978,56564,7904,33519,51221,113942,69253,6664,125563,22055,220680,102008,742,51930,19494,176108,44424,35123,13025,75685,11759,74335,22250,181453,131147,16984,132115,154311,11991,76452,52609,85351,196,30969,9198,74919,2529,56838,71779,29187,116304,3504,62330,41190,86153,28393,254926,104228,105189,13264,84359,3574,12415,8534,57147,10175,188174,59504,60932,66318,16407,107921,17638,99103,49278,28403,39786,145865,8462,3558,43406,142271,29139,21989,36552,93955,72365,7176,13556,106185,37957,321774,17782,129017,51154,27938,24952,1935,39366,2791,33489,41582,56078,24558,9311,5449,218786,27808,190429,68013,36020,86003,29735,3404,87348,119357,115714,2324,86796,81973,40992,43376,93621,28784,16808,36367,2517,2909,191926,24978,55303,53308,205724,60068,3098,21375,64784,23949,26579,63121,12319,80145,39967,97861,6757,70143,67642,37082,34698,69140,122883,46151,62187,80934,429,19437,135071,137885,222647,13331,154065,327,61778,74257,40116,37493,14855,85079,237641,42342,102164,199965,71204,4662,29368,5042,113914,122214,8955,13149,102503,43173,5659,163787,69003,307084,63392,171080,21390,81918,86666,36622,24126,28887,5736,28054,207170,163428,79891,346467,95363,38980,111806,80828,9200,19288,294896,114468,87405,111715,141705,7015,72754,68463,48738,243147,33397,101210,37051,98801,82847,20397,4940,185559,18716,54718,83491,11725,40803,1128,12128,23060,5174,7745,67007,46701,1571,27807,180186,256996,18975,16837,7877,212758,250379,15440,87954,57755,24719,124057,83461,258,50864,8874,29038,71289,31627,15429,9005,4061,113851,107716,82819,13651,79656,117851,17539,111446,12938,39724,190787,4352,15402,21070,62708,8539,23777,73853,13552,38810,86117,16285,56400,1718,75342,142863,29033,378,110113,180321,32586,23606,26393,160984,207987,23783,8406,16904,24596,47274,11693,46539,60524,78595,48423,31718,20170,9009,146268,15183,191060,172765,1349,138436,37365,10970,40509,225817,20021,70394,152138,21541,66559,66544,89352,2725,17258,91345,7313,3815,115868,8660,40362,4071,103524,39388,118275,21950,6549,38226,32754,209574,29201,43495,18028,20296,40597,18370,47520,202450,24134,2219,8195,69545,38041,136934,46374,19041,159811,84865,58620,846,98749,13569,30714,97246,32186,4479,27355,92973,35214,151491,75963,37631,1561,27200,238083,23182,60756,12291,25766,39355,102333,87362,65741,59906,19538,201575,48772,102938,24438,292580,39964,66366,9004,61379,50548,37622,38732,28379,68180,76622,17488,69849,5963,7219,48143,43413,55358,540,58691,29506,19245,52193,48621,5518,13048,118625,44755,191081,42061,89197,2259,60665,66994,71210,51232,3585,142096,55024,7892,8345,58653,463307,65658,64319,137941,136323,53499,12746,43492,6978,95163,29925,60175,5128,7352,41463,184756,121146,20473,18426,4598,5309,54580,14277,121151,10691,56711,43880,63409,76682,11830,172218,264898,32632,66536,81062,31649,25788,92774,60222,11100,63159,9432,224657,25240,53613,152,138620,163829,2397,85345,12501,37507,64932,38575,43522,65789,80198,78796,35226,3851,108891,73311,3060,28391,93671,39663,46142,30982,66041,37281,68157,26553,71872,81142,211527,39747,118119,22695,2859,11066,20232,168911,7933,197005,17066,111071,44434,133994,120798,12766,227798,45756,132852,29917,36076,55352,65281,129800,41958,18944,84678,18580,168093,132621,39997,54092,27740,32354,3770,114118,103242,43918,15899,18574,145944,3190,123469,219903,24169,100571,62403,16776,92779,14535,17168,16475,14304,37231,1712,28218,242754,61688,28980,1318,51359,222657,99200,67989,31772,23932,35351,201251,49041,27306,19128,40135,3986,77333,19649,120683,151927,21081,7076,78375,77501,101599,8011,89585,96715,58179,5378,102138,106793,26051,217276,4197,16297,27014,46721,13322,22806,5278,29629,70632,9647,71519,58818,40603,128530,8903,36770,56900,31483,26935,43845,34265,34920,87658,6114,84767,64250,47318,50720,19264,162514,33357,13117,6705,46696,75032,71054,87004,42035,69138,11903,99854,102328,19611,34525,69312,6431,49842,101600,133178,108751,41829,89939,225664,48916,99556,9195,130387,5960,36857,116724,53518,94002,39077,53996,6945,22261,64291,8314,152785,57588,16522,9091,5048,87671,35441,39509,1945,12423,158923,178413,37549,14095,1475,73188,62878,4819,24012,68534,42606,4010,120809,57497,59564,101758,103718,32701,80116,12345,95834,46918,21468,53213,15665,31200,3867,5140,96013,250744,21016,10069,13968,35449,180829,27683,39704,59956,22893,3115,26293,32785,75934,62445,141162,62720,2018,83638,19949,114012,95006,3330,99829,130935,309272,9565,55874,121727,37017,23586,319858,40970,27602,8625,112329,61060,100088,118525,25922,16232,1907,60671,51583,44553,80993,5262,94679,8676,940,20736,11823,3020,16476,12340,152600,97416,3703,25744,66826,16245,16876,46446,84798,74227,176020,45192,61955,75496,23946,23626,40372,26036,6149,11822,30582,16541,41914,82385,232823,40921,80773,14930,3631,7517,39619,4348,36180,126106,138939,62611,1477,113512,47321,25052,14546,118881,29060,23589,128322,36795,18401,137921,104699,267929,36194,172791,18113,4766,188215,30083,332586,94089,5805,77909,22194,68234,154976,43220,40660,70001,184893,138095,11128,103010,22663,5108,212615,8485,5565,49222,54614,26530,42639,16319,55062,152662,105595,21114,22216,10294,68158,10436,86950,7206,62115,3977,3657,59874,456,118617,18156,106663,112229,80992,17442,8217,55551,5133,34344,251927,51153,39364,201321,7816,66803,23057,156724,145664,14276,95705,979,2796,6875,13429,212525,50602,26276,28284,3424,19465,52397,46963,31420,51399,206476,92317,48851,637,100820,83349,10317,60227,21972,6908,282439,32857,224767,95629,83882,42106,87338,69757,29840,68709,37665,45244,114577,49188,175943,54009,186746,106158,70168,3358,234002,50555,9221,129338,9562,20118,32923,78479,118280,65752,4977,10474,102174,60947,129006,10570,83451,8598,8078,159367,123785,80438,16742,5905,5281,181513,42402,6977,163136,93179,42191,14968,50421,112401,105440,33456,57347,121611,4221,94954,36517,24046,27796,6255,33394,72990,135408,116627,1233,57874,25654,95419,68156,401399,313338,55208,45573,93124,119251,47200,38196,11909,130667,45391,73904,64964,167846,4137,115606,52036,62214,7969,160925,7187,1132,134835,40309,73195,64494,80472,444841,61111,26500,45323,40743,53625,52797,22659,15631,29739,36706,28841,39147,102836,26794,10536,14845,87305,45874,12241,127587,83833,57183,79722,30844,41304,84655,20825,92500,3722,25655,27811,10157,81634,31362,34088,92487,70123,22190,185100,72658,139035,192523,88241,2078,230490,44528,85638,100198,22088,29982,291233,241062,13865,4445,137791,37835,107218,31726,19718,38234,72528,23046,19177,66695,5109,17251,28077,5617,21554,47839,72425,133825,1486,73065,181275,141508,21768,62971,63082,2512,34200,9904,120309,6392,91243,68416,268253,41199,116757,138551,185526,41246,28986,4093,19057,17295,4148,245766,122360,35356,112075,20301,75441,10998,7977,19769,62922,937,63547,100196,26427,157820,20983,236696,22935,8140,90315,156004,47204,140973,7726,45097,52725,22636,23436,257282,105247,522,88389,216031,202204,46812,211666,19693,68828,81691,45925,11256,30292,372,5236,167826,88328,232776,151611,5360,82104,18841,80393,25465,18285,20320,72377,31730,33160,45803,38715,27705,37379,24163,18360,103586,4015,32305,269494,91252,20080,36567,54650,7797,57073,12650,31164,42209,6375,261663,105528,81661,106002,2800,5375,17247,43151,4442,15727,194619,100855,144898,62320,78465,39929,16454,1967,28311,61363,17219,9395,8745,121445,76939,80385,162380,22009,54191,44248,16299,122830,48151,74429,78291,64755,14238,44966,2511,17712,67954,93583,829,105899,49935,84750,11591,33185,85447,42717,27409,208542,28965,62052,52525,5597,25694,65594,16343,63224,276188,12475,9331,127507,38522,57287,24128,133161,79723,105548,133695,48917,27558,43278,46520,13778,141954,110785,83366,17715,46317,105763,66298,147013,41086,94180,16478,220447,44611,730,19722,78975,117889,125643,26254,16574,18480,65006,15806,38549,246418,46052,36056,8440,34984,30170,3163,59800,4458,115442,4283,41970,33507,104078,1653,22,121158,276486,3655,6338,24048,133421,23641,2161,24422,36006,8086,10675,181474,12307,29514,59143,14729,52509,87128,122470,19446,80852,33314,24573,119864,14237,9652,57779,6612,51851,15284,98871,90581,124466,156831,21190,22015,71380,161906,87247,69201,18392,17908,108470,72962,40719,14338,17911,95260,43339,20610,78916,20710,72451,11315,31448,17263,58853,178878,48111,116002,45497,80506,82605,85880,36300,121755,25215,36118,301929,88728,405223,276136,553,34704,212438,49970,78329,922,20711,25036,257130,38295,145369,18128,15385,30829,55656,48345,8012,3561,28004,122041,192900,58338,112508,41085,29976,87040,47117,23905,4336,92061,138880,97407,42083,172121,6256,25192,172671,5,93568,1420,12677,31605,56743,40620,6015,78415,231077,31298,80026,13902,19048,24924,170586,32955,176119,87859,36731,6773,27711,24658,26475,115216,133207,93250,95820,88522,8317,5714,124047,55219,86860,19677,23961,22928,162209,8904,225992,359835,56084,96201,29392,96558,86071,93643,55114,13347,8183,95129,82012,2017,123336,34219,115554,157159,47747,101684,41008,18735,193781,104151,226906,7552,179874,124113,31159,21162,44010,14771,51268,166128,31382,73124,77438,92830,205709,12113,1292,38937,13114,1334,2118,15597,69581,14449,21934,76618,48728,67038,14967,51495,24243,87736,147249,26720,11119,46063,43749,5843,44147,152629,133428,65703,14269,45604,57982,28672,55616,45957,8438,95433,37698,220862,132034,39456,61870,4161,26501,73560,56418,9845,4654,20916,10456,88920,119358,9015,65931,96507,48029,38534,21676,109081,43078,34943,25089,6131,28766,23665,5477,10255,16695,67,45778,42443,42770,29534,23733,100513,62617,42630,48746,14191,43753,50295,26007,8792,57243,43119,54725,164253,58250,112304,131796,25165,4651,3188,24831,47748,3705,19540,13211,102095,5593,18699,23666,32005,117571,33541,60584,74573,86311,99443,25172,27222,168938,7143,11853,53560,18834,19960,86522,28217,53266,117700,72989,34323,18721,66450,34346,74056,47217,202002,46269,9429,68582,75458,37823,82843,96652,32549,145144,27958,19820,158086,31955,201406,135379,31207,192545,12950,51704,9094,248263,76147,64028,110009,79407,89345,99284,223492,47966,26848,15359,201137,2861,110507,71231,72297,31851,118777,71039,151051,240855,16333,50766,14727,7939,4149,80908,418780,88378,59276,1327,7284,38576,79814,65820,42199,84860,49574,62596,12396,70598,40117,8648,7994,16836,7630,14047,359699,106878,525,29037,28064,13380,11675,50669,74216,103539,180314,27449,56299,172344,19274,7301,246099,32043,19422,36506,129317,6806,30140,4614,46639,66926,932,86600,6322,27847,233103,10541,39025,34887,3517,12972,26220,2031,66561,115015,48658,47596,12714,33845,3893,16165,35237,89983,14769,11962,147224,47018,29977,27979,5552,82338,86023,131368,1218,24853,237840,132193,15455,40873,3668,65351,53388,15229,59889,272245,47934,11858,34347,18038,90853,86981,300602,19343,114181,29362,84921,6095,106059,79472,38015,1206,48741,6208,8e4,21916,17423,6002,108083,24479,34931,56661,9511,26995,100694,163853,35997,81254,58321,18919,171890,86877,91341,74503,70477,53412,7027,59281,39892,131302,5864,15947,61301,67466,162369,47956,27874,35624,282324,21270,111847,102548,41482,30955,116737,28264,8592,55458,22301,75090,29821,30697,51709,3041,19208,8038,24634,30467,87509,126428,19389,18814,152686,20701,83474,45832,80891,105808,11378,153223,120770,98186,150633,49838,9141,12755,30962,5260,74490,21256,31678,65062,33326,289838,187831,20595,89768,2805,58535,10844,70085,12090,2451,138068,98544,24461,4511,6754,41684,28203,3383,65355,82833,30161,83924,234361,128424,28921,222594,33975,125491,34069,11508,67464,144226,41850,98703,34371,7901,21254,38398,65651,23549,53883,213340,123269,12028,71764,177701,28758,2623,68395,11549,15232,68603,9660,63116,36079,57093,31198,20475,48467,89984,35619,186847,107469,31389,43631,73867,41949,68841,114250,1605,30564,63403,17588,27680,99533,12641,70325,50428,73426,78379,11855,91651,72081,91720,60198,15743,12065,83398,140046,6761,46598,45900,5068,886,62448,148968,37347,19405,9680,15819,43496,63370,75667,163700,37639,3633,22774,34341,183131,134335,37200,23915,7054,14194,12970,26438,13350,285521,25594,8219,104410,91039,168804,138480,149734,15907,33818,61132,60082,4622,110187,56736,13551,73571,3945,73463,65498,17758,263266,17593,2710,27585,54469,38200,45367,63754,28881,3473,12791,98287,31895,65787,4463,94536,24951,36332,59901,28803,52130,86403,7668,181822,74831,18977,9850,177206,145485,109798,7292,31421,26280,77211,58511,12507,127004,11113,147,8729,56208,43066,79926,129937,31345,83947,39915,46146,98763,42566,1337,13192,18323,105163,80570,117753,16555,72883,11077,159438,40764,70933,83329,26066,12276,72059,21655,173836,126713,69454,153482,91585,70644,102558,110483,6764,127864,190133,3961,101798,20945,71138,82402,90884,69669,44753,923,16939,59700,164258,25969,27082,31399,43846,6306,246093,51342,6153,151581,202801,182731,56475,162188,89426,141356,14355,121815,27536,28023,65257,77523,106668,127314,24947,12790,38796,169698,23555,10725,44573,183083,42088,62716,43265,105958,32050,44067,50118,1668,3874,6243,318411,16599,1691,94999,52378,28671,216728,123258,2059,34969,69225,5913,136280,171443,141515,91662,22175,135282,80020,92270,1663,4808,4482,3495,34691,5226,109830,108512,17342,107488,11606,123190,100247,29666,146527,113014,15794,30894,13224,39585,243192,22351,9903,7836,47699,11078,25468,122291,48821,26780,122679,75521,81450,630,4895,92900,55074,74293,17441,3563,111657,103102,51613,12318,52370,36191,68245,34269,40445,41354,122901,168604,182500,62012,42557,11259,24428,115113,86345,12362,3909,78430,86852,134602,20459,47853,93879,22577,7659,3688,38555,13349,17381,56715,91639,12493,10895,92438,3142,37057,28928,2004,36427,32268,34222,209974,10432,67436,41989,173518,107930,27079,62729,30908,55558,5828,45031,14902,53546,8204,144263,60255,14520,88212,86582,109589,69356,8064,47449,8505,66558,16886,4844,52817,111260,215129,12941,91118,650,20770,6273,73089,40618,62790,2873,35002,14023,97208,19386,102646,36993,143736,135457,35385,113601,17893,32627,84439,100619,56016,6581,57264,172160,45452,111710,203627,70131,24100,322787,1996,35665,70078,22358,90922,83658,4097,63200,58499,14542,99153,52159,6615,12414,63415,31986,16823,1579,65405,137809,8841,16898,48082,259,33014,42375,12260,179850,73667,91389,98882,29532,17311,326251,41092,5928,20742,44964,48019,43505,9317,49265,6643,192712,48424,163487,19861,20113,70848,31928,105333,23685,78563,14638,54755,7158,24142,44018,20774,125255,20331,24280,10163,1285,2336,39851,4299,117269,46714,63816,87779,159624,11731,9971,990,137317,108831,50994,74554,162680,23640,131597,146962,170620,34829,91205,21184,1913,63616,18427,93136,156592,17519,67565,115882,138220,78622,88535,18115,2711,33554,109492,54298,971,24914,25863,36363,45715,27099,194995,14299,178181,111488,72395,322385,157719,130787,11897,81843,83999,11369,49280,118604,40922,61332,110343,53407,75639,40582,300440,54722,25637,13694,48248,48278,194521,56203,52779,48783,72627,10953,376,16733,280238,26351,230789,15132,25168,137270,3588,63704,73376,94031,74284,19443,159557,9697,39901,13351,119050,15406,146455,3460,29556,75195,37673,102524,92329,47289,98413,15311,100684,56345,7116,95480,11590,7200,167,23610,58426,17730,136656,27944,53151,2701,8824,103124,3017,90744,113588,53216,79736,65940,26931,498,29568,80540,143543,21292,1740,59268,16561,180816,42323,50174,40890,52866,10703,57169,4700,17191,4424,93511,49698,166650,26972,48631,165169,82879,69326,202970,4007,2376,231325,139592,22119,62851,37504,68816,58345,67398,186643,43331,277416,53749,15746,23102,17432,4793,151138,48822,54265,48203,198688,14305,54287,2291,18018,113378,123260,7180,97549,87027,120085,2920,76080,8190,102005,5641,64580,14955,59802,54028,58884,19367,81779,412567,85957,97053,103637,78871,29364,27637,141728,4767,30686,112738,130146,42745,12730,105040,14844,232,210944,36581,152317,135543,29744,3129,55647,58149,46319,27265,17499,28005,59948,7170,34138,5702,293047,110892,408,91760,218674,18469,46095,81403,14389,4610,35672,73060,11006,74848,104820,118143,190357,20043,105358,141735,5115,27093,45924,123073,52599,29433,9616,238350,78610,24851,58858,26769,31969,24613,18294,4982,32735,39639,143563,112073,202205,12567,4873,88601,44897,81503,101648,81362,34662,85277,17574,48173,21435,221188,40215,39576,80786,26544,64668,81841,10731,37733,247986,149188,127703,495,18382,54388,72446,43071,30974,198723,89608,41360,190,33045,8386,31658,19992,237838,119015,137622,50890,100913,6460,116233,267230,26621,104129,65114,14190,41542,14888,85962,23342,23041,26453,43725,71809,45186,4770,46452,53894,56616,221286,18973,9038,109299,55365,19366,26863,18808,60909,69353,41738,83463,12100,68561,72860,3980,13796,49340,12332,31311,27418,4255,53430,18976,45523,510,14224,30477,26581,4530,3651,101663,139840,22709,150861,31996,63923,120623,262522,3076,10528,2929,14672,130238,18087,9816,121894,100308,25085,55111,14565,18952,53293,2042,369988,23674,61789,133529,28783,108293,35477,47119,36448,71049,40015,33055,78598,198442,1833,159937,40654,77444,189245,113153,8621,18599,38553,35223,166072,2375,11659,21786,89523,6032,12116,63046,159398,18454,3678,32521,47626,11411,103527,38896,42946,15696,26370,10185,8413,37080,165583,4331,63555,14907,72220,50056,6623,62236,36565,49783,10049,17503,100581,55951,146244,24724,9626,17969,25524,109300,173965,99994,101056,46459,43647,53737,277968,8347,123521,74858,33829,44762,77574,877,81377,222525,123532,30602,43881,53145,2973,16284,81940,61281,127044,63620,9875,14756,114829,19032,9202,52759,119141,23928,120551,19607,3599,33401,76821,73233,117430,39968,36539,7071,5446,121735,194059,15206,45283,6706,15603,65615,1207,165723,92275,34773,104447,8396,32353,205240,164323,13600,60555,79205,25532,22907,33410,57480,107111,69630,32137,47832,70913,33161,20321,2371,117348,10714,86246,1625,11763,17900,268,78457,99175,97940,101092,86660,32221,14041,128504,125080,53744,124263,31017,13897,403,31859,21964,5633,111630,5547,77329,17961,18241,84995,25984,12983,67491,62168,47262,5241,297,51191,7351,8967,147212,82060,16821,782,11033,82431,62957,5026,43459,77963,203477,53528,6247,191852,87774,74164,215654,13467,1522,219964,28589,244104,16242,117821,67725,72570,156792,17186,15979,26990,44128,193014,35276,57125,16212,166451,68017,6905,77608,16364,53777,75921,76426,37975,26203,269296,64099,84122,12077,38533,830,4407,20139,963,43028,38902,42911,37503,83343,85045,16979,1165,60835,137387,58380,86990,110066,134540,56331,193845,81238,17922,163093,38744,110641,12502,56404,34862,26865,125964,12965,111648,25547,7771,27196,136980,9555,29551,107158,57885,18831,37705,35505,101742,13970,102109,62548,124657,23328,11124,89592,146376,248050,6241,22033,18337,80685,29898,11908,216623,67721,106162,146610,21377,15085,91552,42041,62560,122532,125336,102365,121537,142559,29693,223919,11515,110495,18776,22494,5895,185059,103592,229351,51220,100102,37027,257855,29359,54123,36066,106493,12244,79258,32002,432,56205,94836,90182,6726,14762,29391,48938,26864,38083,60364,3310,60192,14766,205567,57504,110760,22649,24666,46333,21517,3430,13135,28873,27052,158809,11597,20529,6695,23138,22960,37137,45574,6545,305877,43423,26153,24769,59844,14501,10430,134352,56169,13213,103432,49523,35181,13435,12408,129475,64620,230854,77390,51990,15653,83248,33466,44571,117828,51481,2187,10559,68019,18021,54895,48247,18354,33737,4554,108595,37288,39767,116707,9175,3726,108877,21616,83684,49862,1938,8543,276466,20134,108498,48770,102254,31914,131520,185291,100559,51890,209,19526,76471,50544,71814,99351,8172,198526,28816,20419,9109,98389,136777,76479,75596,30635,165417,48216,120220,25955,211071,39314,24308,32164,2559,146280,43403,9233,17947,90585,1786,86920,125662,2457,64741,32152,32918,122882,78538,44001,31723,56426,23375,103172,88177,145697,52506,49319,68016,31664,41488,18486,110400,7030,28241,986,109199,19900,42147,56864,65287,49183,7858,24e3,30453,840,16673,25907,68916,89927,6309,158335,36407,199737,130464,13137,59603,201778,195292,21015,42466,179062,172561,89492,11075,180407,31868,72493,20998,60217,9865,19530,39274,130266,54539,21623,12535,13505,40641,73375,4087,85633,2153,3117,70680,55788,92096,47509,98493,37490,271936,151475,3032,16171,96642,34106,78425,125761,19591,3366,19316,54508,24183,50786,194248,91528,33253,34622,108355,41741,705,3814,3883,108929,13203,67831,10142,59754,68208,29128,84820,56880,38794,24972,48571,40821,40476,18137,164254,24064,236309,79181,11282,395,39169,2013,51587,28551,9645,701,109513,115899,113566,12762,62045,58322,103726,41343,40866,244102,143816,2490,70346,40973,52618,15412,30720,104315,38917,42027,93676,17513,107418,20706,123890,13399,97727,24044,87962,65606,44250,98044,65276,74790,101473,19350,91570,1326,87790,172042,7577,100813,86896,85891,41512,108130,27794,14875,71431,12835,156250,58135,3759,22476,42176,115873,34686,56523,73643,108505,51491,20838,12721,32863,45700,29496,13700,34294,55360,29206,155942,123812,7706,163234,203,132720,49358,144431,8130,175788,35818,3270,76832,25710,54095,97274,28779,94621,74396,19092,128242,58067,20885,14670,93255,15107,63291,23654,126900,129421,59294,262659,9798,3251,67344,28600,44629,50672,29072,26999,31526,23183,49175,165843,175455,17282,175411,32022,45989,30298,90690,78118,83156,23749,35636,31317,7069,80381,94561,133756,14960,97404,6138,41065,78041,32843,16601,34123,9559,146529,123377,96395,54441,42012,84257,123541,10745,22139,106459,11720,150883,172651,154996,110538,4728,53447,25704,2009,71152,119354,21166,66604,1429,216162,8637,122250,63520,27180,29172,36124,276428,107787,77184,4680,14952,104903,24418,14793,51561,52931,8371,26342,48526,7118,92066,67280,40653,8847,34597,105438,14198,50163,61188,146286,50315,41205,170829,161496,585,197359,95056,1687,365794,91349,48507,5804,49263,5146,104902,96365,117343,132222,46084,96919,16875,8073,262381,79982,52663,13928,16056,153908,15145,109256,132308,18763,24904,167644,13618,40750,18686,147124,114709,150038,52849,2938,12568,48617,8778,5459,44202,44591,74914,17183,248689,13878,7822,80060,23116,194037,18487,2067,7798,43077,33678,244028,31320,74273,2794,19466,8218,36280,183997,48124,19416,29656,19280,98734,7715,18311,30701,133602,150307,126956,7378,2933,79903,13178,12593,86571,26604,92446,13574,44205,65699,427599,21118,8245,14407,27877,47936,33542,7916,26460,117762,21596,37818,2249,127359,209394,60044,47677,308089,36791,154971,31417,6998,150042,174360,12255,43009,29335,48739,3912,101398,53340,2580,146939,151295,45360,125275,15273,45383,27456,48761,23314,8750,60801,85823,104759,27894,123685,66968,39480,26917,55290,83305,2696,98390,57569,145853,340733,4919,20024,52268,30884,7413,203685,70989,112855,4129,50536,349518,68205,332641,159581,135361,236026,37563,176404,64899,6578,122033,63871,1850,85234,82089,66124,74145,121098,107351,12687,36881,117334,13136,14698,85933,93866,18047,32620,310,15094,46e3,88451,23632,36645,27940,87618,80520,58892,20976,27702,140090,96075,67841,103292,238964,87778,107338,17019,83427,67522,7302,8261,47570,116787,8730,80484,61772,174422,56005,131193,52875,14588,28471,59817,9586,15720,158155,51307,109734,15196,11025,59331,3884,52626,102602,84797,25158,27314,4437,20488,76214,189248,35023,114952,157376,2827,62439,102878,129749,36405,10329,109339,108633,36662,1254,13267,5470,87105,58004,15397,10434,159667,21864,52022,179464,3013,32147,31496,116832,18494,105502,129227,107267,50033,13481,9954,24267,22141,16257,116154,36185,950,115685,11305,176708,2048,178671,112573,287867,162328,497663,95170,50979,193861,50987,30368,136257,31830,46549,15119,169876,23788,17462,249887,57377,1949,35448,14791,43769,210091,3783,34612,282103,88380,245190,5457,20491,98908,11402,86899,117916,16028,162584,60644,320177,156096,31065,55876,22e3,77655,9992,23397,13757,317623,63978,215255,2443,17648,93231,27388,104529,93807,55505,140477,12046,112040,70887,40152,94365,112353,25063,114679,266061,71248,119555,15589,2244,617,14129,211431,70110,100652,7777,4383,85911,89221,21010,120615,58357,86405,37554,41647,18,15143,69662,60491,14714,186134,148344,42347,5410,168175,44535,42449,343894,129417,99682,20659,27272,140483,63455,222159,17536,13722,42637,62324,11976,114691,148109,2283,32057,182393,4295,147364,33705,2075,44303,30274,28331,63740,69740,29148,10346,44862,33716,73937,153333,12930,38784,247159,2515,41053,20256,83368,256189,54639,115240,5096,24661,175419,153552,26516,141,138176,63885,34115,47222,55709,2765,28479,38875,236608,12229,22921,77291,54426,45388,2860,57787,114579,295139,105782,17826,71066,19119,54364,69385,16568,12323,28057,33346,34919,124763,155533,101386,31644,8627,49001,303600,29868,63213,9103,77280,71333,9696,138789,37059,24823,5057,21352,32368,114208,56803,19424,10445,58514,8661,209508,26187,171838,10460,63454,14016,122504,41328,21329,46618,32493,38225,7855,31763,7945,29876,8734,6438,24205,97490,139977,130740,47323,33195,85390,57194,13813,60600,21313,96251,7699,27584,170521,139271,1363,4402,336738,129223,84983,69150,13147,3590,163929,207225,155260,55916,20288,4503,8398,98490,11773,27512,37113,84976,86558,28365,11756,116005,182148,13733,115313,47644,67208,85069,9347,14995,226141,14704,101835,41159,35314,13113,63526,214039,29978,50446,83339,17440,129441,72522,118641,97816,24907,73844,15717,118884,167255,96509,162793,30847,36849,51297,78974,77793,10427,1873,2972,9999,35074,28190,64297,146836,46298,60038,163007,108919,61219,2403,75022,127339,4233,110389,69022,9833,128097,88016,79390,222936,22570,94657,28462,56956,38803,81536,30474,152794,19566,16481,147408,74574,81895,20731,1918,1366,76367,187321,54494,24366,21690,61696,33283,107477,77499,31112,414383,74362,18463,218441,120929,59848,258629,201924,69269,454,19989,13054,59894,3623,58908,20681,35723,78523,102680,38988,184112,108087,50944,132704,52966,21699,18860,96349,201411,82697,85395,95658,5093,6427,177894,44191,32755,26961,155739,6249,31310,81030,26574,84311,120155,86730,113535,7424,48888,13516,45747,98098,20077,183995,81945,43210,26704,40420,75831,45648,11180,6855,57927,65528,124096,34851,2598,156633,107572,127352,38169,123845,60142,62722,105584,232364,23211,68120,1601,22169,89299,747,258039,80572,7258,152249,11862,101204,8834,121434,33761,19175,133142,46343,40178,48723,3589,41977,30210,38868,62257,10087,82658,87827,90646,16415,47552,351723,28298,72225,91146,272760,1701,11295,1652,109651,300747,51863,198800,29446,11794,32345,37538,22356,33102,37590,113544,37970,11478,179743,25454,103417,59905,221970,105196,145604,7817,164809,102360,16974,75840,255333,56902,6659,1954,645,59400,67769,7689,18675,5215,13793,20536,27852,3387,29523,259718,16860,94625,43143,29245,15848,233581,22685,63631,78557,22836,133302,84513,1348,51826,47129,98836,58284,1830,1749,94642,10933,6145,12506,10975,13879,103781,144434,10268,28409,32346,52968,121567,107374,77268,23686,35097,10501,155275,15303,47136,21102,168741,55332,90385,15996,84817,681,137803,25054,142275,6163,38175,8056,124296,240642,65621,4934,178205,16101,62803,60964,18230,100622,76465,44689,14545,9543,47514,16852,93380,28048,12047,107106,37575,101485,77047,57326,34819,96137,76916,6469,46264,115983,75768,87668,69942,13027,165,8373,114231,26434,52844,42799,182044,23580,146254,38081,43236,33883,146220,382894,14606,46035,36481,166621,35417,95382,2957,59384,60428,36358,66343,75378,22267,22950,83528,17577,56474,25285,4619,179691,75355,95836,53295,34588,171410,4487,14679,84208,44015,18562,109133,54101,11531,86052,174479,303157,28095,9953,35642,14564,39802,16145,77606,117406,53038,121117,53624,22062,1212,7632,127157,237292,189087,10478,127345,102515,181997,86752,87623,10966,121602,68783,68681,83042,114380,138349,191305,67176,50085,39016,1427,42384,1412,67118,122616,72389,25260,2237,13576,137346,19938,20304,2191,68759,5373,61364,238507,75814,23931,69565,38993,131741,38364,12528,87762,5679,129853,5310,186831,32653,90338,260176,389531,108118,26843,43985,50175,30563,25106,56965,18130,140428,4542,165503,117991,24219,229605,1819,129663,1240,3797,76093,18398,71339,51919,93043,27175,47060,216257,6483,35051,1217,16512,80798,129064,13225,69339,8548,237079,72298,2575,34280,51379,117910,55671,53345,247552,29486,39328,140821,34681,57045,60177,5004,90269,78522,2479,322607,48474,61296,13057,31558,4678,59271,6699,27044,31988,35944,12503,83480,4389,136508,3781,114121,70279,4488,155829,42214,2898,68191,75695,305850,45041,74344,106509,30087,17429,93292,12477,290,23080,114802,35714,18751,26554,105424,17775,2144,2412,100610,65192,113975,52975,180272,135050,129815,76238,106483,21440,63186,4260,46189,9711,28249,4169,23429,23390,8324,141585,63809,67668,38457,38063,39226,59972,1189,203916,62368,14403,16949,61767,85801,1739,40147,35049,76757,33124,62102,15780,103593,103009,53484,22952,67973,114645,6566,5245,50462,7601,8288,3513,194571,80276,1908,54592,5124,58571,2513,6800,273997,193904,1119,17991,117245,2508,129156,82366,26278,71465,63341,56943,39662,106116,94966,156875,9736,2204,122308,94418,27134,1280,24539,49022,45314,3764,50904,46424,30699,28087,293839,9400,33646,40165,822,147499,50263,116179,29085,11863,31314,5578,17797,5104,12454,1604,15342,219206,10232,67800,94261,25872,13565,90339,78971,75377,26649,41184,47695,11514,35369,20767,14227,41953,309396,148270,147938,33074,14453,27499,109019,39018,25738,240196,158931,52820,8612,95853,21524,137010,84901,70869,70021,116794,48404,38771,6732,1070,70990,187297,49140,5238,576,3564,253975,16027,16483,2811,37775,19034,25259,4053,2e3,70083,95774,19713,33431,92703,91314,42381,288770,48194,95985,3991,77418,13406,241328,245086,56533,35275,62725,9246,51924,70181,95331,16163,31410,79016,39312,120878,119371,275987,80124,27712,9186,220,23598,146167,85209,68238,282190,57048,31273,30555,80913,17594,75779,59160,135002,101219,189377,29225,96735,60126,62522,104e3,27620,86814,17240,147533,11001,5425,43682,410,49460,87270,69480,46315,59448,1816,76201,9431,11788,87960,29063,65539,47347,11678,33846,7008,196704,9895,6753,8633,120892,59970,572824,115934,6646,202559,892,48351,37611,251282,57823,67263,57750,26527,34485,90747,7685,88370,6144,64182,1709,41969,21458,62327,181657,49247,225330,122600,114574,107124,85361,111833,63243,71420,15655,191178,72430,18063,51425,54002,12364,53225,86557,18193,97580,41232,138398,67821,128724,8944,233212,101353,52099,42127,14006,120107,32789,32132,3498,18123,33758,56058,5779,128760,59888,98869,18445,84702,51911,13234,218379,20093,39031,8074,70195,20708,23462,24355,131384,60189,26390,10403,41060,7140,10781,49410,42261,87202,82566,41663,43105,60276,2768,5733,74176,28329,2297,145430,131632,83615,122915,105441,655,224102,5284,136426,67763,16294,188511,32538,61049,27893,3394,13951,159099,28542,17930,145360,9492,190122,32285,78855,26440,13570,58648,73908,4239,124561,2444,74172,53131,11468,10794,73566,11623,35343,64710,30481,4163,10328,38309,29901,10538,154377,76132,92405,24839,11679,3465,13449,11637,7824,2337,57754,1260,14458,41118,19878,38661,13416,159180,37074,163164,54137,28627,52134,184900,8520,40385,29546,30502,22386,66527,107458,6850,24022,47983,30603,35083,8934,304066,39500,9,28261,33026,77251,9374,44833,116312,34990,29236,63563,125639,135405,165398,159055,55690,88141,69643,236964,31983,25572,20436,36746,60896,31850,16179,11828,5888,3043,66368,9750,31167,7915,53111,36430,1333,64344,93659,20061,60596,180191,51630,6792,30244,43509,101058,22409,420,44210,109783,43223,27030,72477,72831,32679,29235,7675,47556,12258,39907,149412,84926,118247,24692,71717,105038,86009,45941,41189,89453,29856,52543,30627,226798,67303,59230,67415,34408,1367,99685,16867,128419,52147,4111,125381,117881,16173,44093,102224,31575,23234,24870,83790,127407,239098,3200,994,1255,100903,242275,117266,55116,38205,16140,29662,11307,40414,208793,123355,56470,4862,75600,30119,58218,70828,24075,26974,7802,192353,4851,5475,78720,66596,3409,28573,64396,30381,30690,59859,88256,5406,99945,103064,34463,37727,24238,86643,60088,4057,23741,5967,162904,38240,28356,93858,25510,122879,6897,3278,7057,11971,4400,35461,211413,21395,59615,39471,87233,55795,128426,3051,22470,41950,14705,3974,180108,80476,78442,204996,91987,15634,67610,139015,142373,35611,51134,10387,4353,153456,57749,181039,14183,68447,151532,21107,36452,20551,3186,46247,46383,129666,88736,140662,146243,2066,8360,7978,64818,106963,17896,47801,10723,114821,223295,74192,3293,3393,16987,74064,11277,91622,4270,29828,27951,387869,103235,1374,61988,120083,477,145892,128378,11779,211263,61354,18221,17869,46530,83061,108538,157981,90608,67199,95080,49064,195814,12302,66307,10348,231346,160732,112859,63633,146558,21271,31037,198802,47622,12862,95710,3910,77850,73961,85585,34752,61e3,4082,24595,103679,71107,8208,79568,150019,16615,24961,139857,32664,197366,4559,54735,32696,4126,162019,75698,13916,70108,159638,19834,9349,24675,175560,49643,18206,52459,27992,10809,88865,401975,133172,29e3,34558,30915,3658,25834,42430,36562,125265,18182,10155,40149,97082,208980,19575,60853,90529,66545,9600,789,46420,2317,88593,55595,98980,115302,5742,169155,1073,177901,3472,11189,63711,78643,65472,50459,127979,93,42202,67053,21720,157650,11145,141378,42033,22824,85705,79114,35584,15974,1510,54172,28562,12451,104226,19190,97151,73024,20948,5151,81741,21499,29006,84183,198074,54003,45120,170125,26240,35177,28389,64863,79974,60778,176915,232183,45342,2038,80253,41564,40703,32689,5430,100689,5366,23007,134279,14266,26712,73993,24934,64242,52113,102887,61801,46415,201049,54251,62133,122757,164883,30815,139966,2319,30842,766,13362,10287,134518,86111,81665,82440,28333,43019,18963,8804,161944,23439,102144,101145,80029,39052,248708,30350,117340,11878,128467,974,138625,63961,5237,74778,61834,67040,43814,13690,65947,33809,232476,115258,181745,28824,94013,9510,10246,93722,81976,7217,114383,3493,16014,69045,72692,12145,80981,9507,6692,1620,60820,330444,35474,33962,4797,7053,295463,46445,27026,12491,77988,49524,35675,90947,29114,166705,101385,133782,32704,6186,84595,176031,185623,45966,151302,63069,1699,107491,947,15458,74452,196212,6046,10498,12163,10239,35191,243951,9277,9090,29539,54460,22820,26514,112549,60372,51753,48756,21812,70861,260326,41,44222,10441,16961,48148,138771,216194,5914,52153,53400,212036,56519,26245,10117,45888,15294,138019,90913,26368,43842,42111,23348,6082,194845,161089,156206,51546,11647,30759,302912,262094,8635,78876,26535,35283,54183,31183,85484,147873,12989,5197,6356,72894,65347,20150,27370,73787,1493,45918,12366,190217,20724,13858,10981,67449,81213,7553,14115,72242,271517,11842,48310,88743,143726,22177,3290,243231,58452,62937,12592,1654,40066,33477,13751,9921,128442,15868,7106,75236,83773,10775,36938,10482,170465,17368,17469,161508,32752,98340,800,19824,264456,3901,87319,2867,26782,9630,113102,185815,24197,44584,86366,40224,3636,140916,31731,267731,9567,53678,72984,29389,27963,17106,50282,284911,60170,8322,12608,23374,89652,5268,39044,229766,8869,151350,31436,177342,12269,183212,120418,116270,2843,78888,69192,7865,184099,1086,129897,18383,70508,20242,18508,229924,124569,35749,50589,55626,9884,83115,40971,30671,18135,14452,38861,17844,201826,5549,26413,17189,13561,38539,10679,143331,3314,36785,171194,49685,187713,67506,4618,104039,17060,195080,50648,33159,19238,67559,134840,28599,157523,17130,38064,117398,94355,31918,13575,34538,40326,13997,3494,348283,62481,26862,3603,104426,244363,153709,112487,304612,199674,41239,35545,54869,293005,28223,26277,26899,4533,18518,15492,38587,80488,70485,160395,263,60162,11382,222152,4696,250751,51921,182609,10707,48463,46243,1227,49111,111564,46502,33342,56846,68541,63559,858,139927,16654,229375,76759,26478,33205,95828,23399,92945,2637,35630,28470,143992,50214,14174,21456,166191,65665,1711,21594,78019,97599,111701,36,147151,110246,189022,43021,30397,40757,131935,42065,73335,48039,26596,28984,15102,2361,7421,202167,69744,43766,52826,3642,83304,33873,75140,63169,192389,36551,92748,13039,123959,233220,21738,84447,77230,20228,187852,19095,25799,92136,108774,29237,53947,2299,118106,2687,8830,42331,202924,33667,2023,73763,30704,19363,19779,16737,35629,48081,24068,101013,162338,291912,13749,24745,328289,167679,70086,48299,23306,16732,17801,43322,54589,3586,63653,43624,53474,925,109177,251316,43805,13082,19511,86565,142182,92461,17117,101033,103319,64589,4022,4351,235897,5352,82705,107142,46391,156084,5860,61365,10558,13045,7717,18357,33922,12590,33065,6928,46993,783,46937,67846,8952,26295,6107,119656,18799,17458,50747,4229,179559,112727,118080,20683,41464,125468,51560,49749,44231,7359,35339,62988,136487,67015,5208,29150,24956,105186,48858,6143,18097,6972,16404,73489,58742,97196,36357,164616,5834,32267,13746,147733,15113,132091,34127,106298,39729,106426,22294,9780,15602,36213,71502,42808,66802,599,60755,5851,39120,67363,108623,126368,72770,91263,32486,30596,151717,7951,52002,43103,11768,68942,40901,39344,24037,127500,116890,48403,16926,86750,17745,48648,159545,34460,58419,5634,114317,67865,31462,23352,24010,98185,125708,69686,68337,13610,26271,70691,2980,4768,27225,102402,75453,28106,8104,6931,1176,6274,6475,112635,22498,6176,238686,26832,28893,90319,14441,15682,15087,39517,45270,109134,104440,45965,47645,81772,7876,52683,87720,12898,4505,185665,2769,113401,15664,57592,105229,137381,97059,119268,6876,43309,33886,128363,35476,144249,67013,143587,83367,25703,91436,59347,53236,2289,16519,19844,46309,58558,99834,23313,218816,231303,36388,51333,183535,109792,139277,54306,90139,18235,8275,32710,37677,82464,86025,92204,88842,117723,37570,128723,234242,76350,73795,34896,148247,58424,11105,11744,45746,63372,17118,49772,199520,81902,38004,22911,33752,3125,1995,53792,4689,26909,108150,146062,69674,41811,161444,84855,8999,28561,16731,93937,3189,21967,24890,22943,1356,145300,51569,28802,517,118679,31703,40607,48098,108854,25003,10233,73969,177495,5248,24516,215347,146192,48712,60626,69188,40735,5866,586,101541,6509,47590,52129,5969,222045,110933,25733,24223,65339,62812,2414,155418,35819,16022,78423,43138,20995,128255,240673,46745,236093,72176,57085,97841,61248,107,36068,193177,105427,55726,215229,20446,47228,100420,87091,14429,121708,23605,21157,187721,21880,2997,203976,99166,95068,25877,7724,98925,83401,4829,13182,18229,13718,239662,38653,116505,153497,30589,89029,38962,181302,43853,78872,180301,4786,248240,7401,106136,112590,77745,19731,60880,77789,125748,135487,5975,48627,34084,12419,215770,47557,254582,10364,106495,21856,67539,88981,38805,21428,48732,42316,12149,16078,52808,25327,51322,33850,51147,12253,122354,46077,56483,254553,115417,81834,150991,94662,86668,7381,12841,100650,18218,15741,22372,68294,50705,15535,84660,61887,22553,72299,31361,24824,17743,46820,64288,31582,77006,111674,116384,30760,80920,86149,77192,51979,79691,60342,122805,103800,240873,160744,233114,78962,54920,8608,3484,316104,72548,24337,5088,230040,21926,10172,36838,26,86221,83458,102176,12062,17571,41929,41170,28428,68239,41750,103930,2634,18313,53019,34825,97837,63115,24606,73157,152474,14715,91439,37033,109806,140259,30668,174760,380,135597,95673,136073,65073,134249,13829,17279,122305,4420,46444,10237,64848,203623,70728,10349,182885,65075,24519,25783,40318,34139,22222,63394,55266,102764,41422,20126,65100,90408,53640,35128,48932,11192,38935,96839,34782,39492,19396,41332,6250,5511,19492,51304,25936,104466,54099,73771,86115,5080,7669,30891,111700,13931,25276,72289,135447,14820,258641,25265,31005,281179,75286,393,95359,14623,13584,6680,101227,80173,44933,76666,54542,13244,39348,458,25379,109451,134348,81143,6959,65554,12027,51311,8716,57589,140731,28467,23316,17272,30458,25980,55229,77197,83798,28302,114784,7428,34548,26241,14712,39336,103304,18928,54080,12870,334,87722,15208,16895,142098,114262,39820,83913,57817,28682,7721,14900,108672,11250,62246,42849,415188,1724,26555,24549,25505,26443,107450,145899,61035,43528,6901,60726,65906,267741,21338,147590,42079,18924,73017,135236,15393,5206,4026,84185,1531,5988,113890,82647,303391,7386,69844,71611,189865,76523,31877,13315,19314,198575,32821,1928,67641,25913,104475,103489,3297,70391,18406,15446,113347,19295,93790,27856,1792,167471,116449,8541,4408,41757,63233,25765,86680,64501,27034,24816,34975,6079,4486,49693,36229,16917,21581,62426,27862,11612,54284,35702,194034,355,24277,48262,87411,70504,310164,118018,12516,47559,43502,57433,107139,9290,66533,80863,14634,34312,91725,28606,21342,67241,72355,43244,375789,37402,174015,105070,8342,44167,67494,1890,16365,11723,271002,1865,47918,8350,45564,27742,25110,125803,8553,49504,81925,62211,4534,15491,19011,80373,206920,667,102405,128623,245524,5553,113309,192739,65766,19567,22832,261958,29679,21293,71134,20962,105123,24721,860,21752,33448,18372,157167,94822,35770,173224,232737,75729,28937,46828,28062,25453,5207,140366,36665,30652,6169,67920,150458,92040,23186,184604,92330,20891,176492,49427,27828,38305,42495,143982,49560,25503,90043,29747,65328,47830,12932,11068,77721,9003,25213,94205,140426,46090,89945,138173,192691,33329,112232,129905,35709,27514,1841,19957,31411,127476,53572,17497,173549,55063,175135,19841,69314,5192,237921,117660,150697,4060,273045,50414,98940,65348,153665,164423,58804,156695,48994,213928,86036,28608,8355,39574,34540,16927,135680,18374,151587,10830,53805,16878,16623,4282,48030,8537,14986,46102,13062,72897,72,33050,108227,39451,45935,651,113320,40535,95176,57450,48843,5003,19019,10407,211163,3848,1068,4988,32091,30095,41692,15099,43602,107434,50744,7627,171349,16313,150832,352665,207750,33937,38256,51091,156e3,87889,90663,84175,24908,114900,50365,31494,83829,5398,169342,47521,54818,18935,8356,43094,41212,174536,10082,92550,6678,60614,23355,69721,14796,34149,128830,58187,3179,208,40325,28399,225029,401412,51150,31580,207268,6657,10993,69818,64282,289845,23308,12961,38447,6681,52944,31855,2572,47646,120728,179148,37240,45196,218274,4816,3695,21961,50084,35209,18073,51452,27004,6100,33941,1377,84831,171214,85,141510,9078,99227,32610,6417,11718,49868,65579,87902,73018,49062,46280,61742,21512,40862,107733,15941,29168,157765,144919,14487,5767,158014,140070,7241,573,71584,16921,223566,40331,179473,35081,47926,140885,41508,52104,59180,42310,32811,29048,123517,102413,80208,10104,14746,12649,153641,126022,37965,113017,4171,83,142592,2809,6362,50416,71323,116894,260776,16204,1524,5760,30351,12658,20703,54403,36083,45408,74772,4946,14485,50759,111222,10890,2195,167147,92962,130534,16283,177256,35016,15472,210156,151187,73922,117691,43250,52051,37392,24811,24358,30830,5775,818,21969,1476,127322,151783,58392,31021,106913,65215,89407,90802,28531,11690,20234,95249,44602,37256,18707,11928,5161,4410,26571,51903,49768,22008,25252,65780,209499,68769,203726,13249,137363,48845,86823,6658,5674,31881,1083,1823,108676,34518,166752,13791,14287,91576,91429,8665,11529,26401,16191,91972,30964,5254,28486,54697,79613,66520,18447,22870,45203,194466,22822,51703,12278,76716,44595,73455,33546,12235,144843,36154,51247,11116,33040,3180,225753,60864,1972,28469,12891,28879,10338,144157,56294,353058,38302,41447,87532,110616,27065,168438,6557,1213,50804,144643,24817,2390,136531,38174,247513,16190,4059,122791,131994,137430,39506,57650,16305,5188,54309,106128,20628,88071,67394,395446,250285,66176,91254,1399,114196,43915,60230,44853,27206,106353,43013,18733,345105,226453,51202,16607,57106,117175,35492,10476,89598,127439,15187,39624,13688,61570,10615,31111,59370,6238,175252,32143,224492,41388,95408,34384,148238,78307,38959,9340,160091,61443,15737,11216,41244,170,38299,102443,113097,26382,14027,33707,3957,76300,66160,19431,18900,6952,1717,108656,82206,188021,257335,27295,43999,41210,31777,46956,57457,12657,11489,15697,48060,204748,53583,82422,284790,30503,137341,8120,19615,220311,15991,10217,63424,9808,67431,70976,98221,4491,15177,28535,144789,751,13230,2394,1504,33977,132104,30316,22230,931,97193,185240,24826,22687,174322,15307,22988,1390,188745,180325,29580,59068,74903,18994,29195,79,15436,7622,38462,11566,138710,44828,45774,37768,99236,68137,84083,19282,22698,17134,74807,126662,173497,46248,16938,119735,3212,28292,213652,49013,9975,32180,45660,86250,4801,68788,95490,77482,113751,11994,44624,94452,46839,128497,100316,5798,58588,73184,202987,65417,37790,88524,1606,43156,97964,105717,34947,11203,100060,37742,130074,93653,107799,94311,196106,41347,8035,10780,16390,27883,118236,167395,1979,25006,19375,31628,18916,144723,78502,114047,103107,86492,107686,5844,20934,206963,23556,22591,16562,146333,20167,10471,117434,33085,2863,9740,36669,41849,37271,22790,18209,28979,8231,12952,54408,21731,25130,45208,55748,138120,75826,414,29593,9925,292865,25999,683,123149,7036,92159,86055,61827,103680,23176,54918,58466,57578,13305,5709,86479,16697,31064,17660,200919,10770,49793,33423,32370,52047,16488,62555,6459,8426,83493,7763,59725,82812,18628,67760,79405,68557,9612,7673,28102,56517,69620,171797,32458,29541,15870,81109,32080,207644,71495,21202,11039,91036,61230,2810,130800,32260,4613,60590,37112,75214,33979,126402,155062,30642,63875,12810,194463,82799,47664,16725,36685,43367,61099,449,172150,102867,21691,301838,36745,7130,18671,57316,34852,38034,54182,35578,65900,99486,19771,3456,2658,16914,99866,28390,28109,8262,21147,34353,20006,4228,137085,1675,203023,283196,198286,214375,163329,290603,152574,40471,83506,30068,14730,23177,131539,34759,27668,32178,71896,104799,116305,85430,119262,42860,25160,8911,23428,49437,105322,6519,16203,6349,74711,1230,38045,8540,75165,44736,25909,51026,317034,4984,32281,91312,27060,44431,17817,45363,155937,239085,35697,59784,91993,29531,126740,213757,76560,167776,285273,24262,8237,65030,41160,74437,48804,118916,13159,37842,1031,75349,1478,11655,108777,23435,277425,101734,67469,70231,124711,43532,28514,65526,54956,1e3,21882,17728,25302,40952,52214,149632,1999,2111,3259,63362,89961,220561,39777,26335,9063,10572,12416,34551,34623,38604,24723,5947,15588,69927,66252,119177,69173,46629,28714,70715,212408,20521,406913,74380,11716,50659,50862,37009,88460,130101,7210,53853,538,65120,151950,55806,163748,52837,13153,21100,16674,64536,6091,138201,44837,58547,3723,163,2177,32288,85454,34033,8497,14282,25742,10535,10741,79559,117493,243787,49337,100718,79495,40139,42956,7551,55433,15421,31509,23034,45081,547,61176,53434,328001,8470,36263,30145,4519,74173,53935,11845,73774,60211,78025,3,4102,73782,109293,315332,48412,26683,13714,6865,20128,18490,104141,325,39470,171970,115860,15707,7268,73301,74336,31370,2368,111827,107757,136231,142844,97138,96638,84053,38691,23801,1588,10573,122098,77039,240,186135,146101,11996,18143,112963,46171,155836,348769,47795,121213,116266,132515,3344,144804,31286,99187,255838,129694,35894,48779,55235,148582,71967,65282,15174,13920,47080,6147,108242,157593,125025,7136,1286,28957,127956,28402,98813,20805,7532,109417,40610,5041,32958,15142,18408,108596,33543,50517,27748,80114,233434,91447,487,37094,100048,30541,43477,10639,89862,155868,37667,8726,60684,237903,73408,99589,12190,38739,97348,3914,13594,2680,149016,13907,30171,28343,23530,115225,61104,35821,147679,14337,4297,244282,24085,326976,56428,7851,21303,131620,71446,83253,68692,111870,5224,15813,38197,49026,45057,13660,3306,76345,40671,27905,91072,996,68527,62085,91351,122634,55109,168209,2024,27560,112707,17352,8306,167115,169921,166958,5031,46020,11844,67284,19130,76185,6920,32849,5450,14610,22451,21002,17392,31872,66682,84796,13709,40210,59898,12029,8719,53564,21462,91884,21647,88379,194428,12754,37797,132826,160016,22567,54383,53186,77611,31107,8339,4694,19185,90355,23597,17222,140675,28442,23668,55977,9128,61555,28774,155229,17658,9390,24379,69357,15752,127381,239631,62460,93181,55913,45133,140155,18676,25249,33164,29581,82837,67223,22362,29975,7317,52813,1943,29613,20012,207130,49617,49651,5636,15334,36313,29226,28084,95247,72072,19e3,224932,15811,114,32127,38097,37508,88507,37225,27359,91626,12193,69279,20608,11055,88156,92808,2152,57259,55275,72789,24475,104414,1708,9882,3818,48661,66897,1631,34806,227930,85815,87753,18321,250664,72733,25107,206797,50891,8082,196411,92596,96764,152823,65514,22819,387277,62176,51225,40329,15563,189,3659,73670,64357,51793,275136,33482,86653,74615,67058,11318,125720,15388,22388,8267,1730,102663,170910,40784,7144,85373,13040,7088,94309,583,44224,140424,77439,18496,164026,36578,4722,9151,5824,63365,26510,35199,40500,79277,32495,44614,35233,9566,203293,152144,7097,2330,183480,98629,13423,330887,44130,68600,30939,97829,31012,345465,56747,94879,4939,160027,149761,99423,46099,32251,15332,8761,96094,128555,5763,235318,222223,55729,30241,55420,201746,3987,81382,8259,49325,23287,7719,24633,251100,92311,18591,110533,64759,170260,393860,7175,21144,132887,3593,75346,101277,91109,16387,259187,11627,57459,173829,44694,55780,49797,89192,120443,62622,3904,14814,23887,1027,112258,64955,99800,11132,66353,36202,48624,18158,88481,96882,43059,11040,2455,7077,21651,181159,99126,100434,61388,68186,19161,110468,120052,8819,55324,41494,7014,37689,3618,87729,92615,207943,9823,128657,12587,15857,6379,67628,51216,71775,157617,63244,1503,3864,218754,110864,5769,21492,7243,1192,87921,85529,31512,18537,42698,35350,73510,84474,34301,8991,21013,35034,566,38832,19838,35586,37216,39413,55006,12178,59742,856,84563,6900,25632,17437,49786,30723,13847,70845,4044,7843,23944,235976,55530,48942,6518,20939,73769,192653,52936,95207,23895,132542,142982,22632,87452,48042,54018,178468,10728,26230,23559,363,81269,142012,5718,346258,31456,84333,246476,51018,66692,101804,120570,39962,30373,70593,2864,60541,19425,54209,104092,7201,31545,48018,25865,15442,46257,40443,8328,6451,111782,47527,97754,33046,470,245116,31095,39,91934,87208,73470,36708,36521,12801,70624,36272,8892,79768,12427,55454,103756,5908,52390,62962,22720,141138,94634,41689,128402,126390,6628,106394,35527,134394,82727,254651,194502,148064,89549,3202,28359,957,21954,27906,49840,142747,8307,24206,48978,1186,71728,133038,71474,91306,6333,110959,74600,70387,18983,62609,56057,22970,1147,135850,1321,28834,3578,59715,102227,32827,81415,99952,55636,257598,390,22702,35701,85872,402916,39216,189795,14929,19467,10112,144422,61514,5279,63421,134686,41436,8424,51925,10598,132295,124416,4604,194739,210929,57866,31829,51626,50007,9976,91878,61906,56168,81906,60918,61859,40017,23059,16887,40927,62064,12785,32893,32913,21782,93965,20169,44387,79084,38463,11457,93950,27127,157050,2697,337088,5116,54128,48255,33279,8821,27352,25515,124022,65710,28906,38557,33390,1722,104435,72215,38551,12094,30978,25113,6671,37355,175109,42862,98024,65406,221276,59624,118012,64637,78760,86697,21426,1639,40350,12584,67193,84144,31396,7863,143011,69629,63112,9454,28666,65798,46372,134721,6314,51402,30837,151922,2847,38676,38008,92823,136245,17540,5504,109295,205242,37606,5211,214892,1586,20670,208711,137743,19328,40652,16995,20023,14657,154919,34422,12996,13918,38221,47690,16398,2959,37680,89122,6721,198469,91876,172043,83898,101992,26084,94570,3635,76958,22853,76497,38266,176590,168403,44464,142840,79180,184594,1984,41806,83147,11985,6546,366068,59732,24533,271505,8736,39084,222992,93429,28962,58985,86665,8432,30028,14548,32439,54424,165029,55175,27458,69046,121277,46168,33732,20661,24581,135574,123110,37556,79260,72611,16957,12939,46162,58238,44907,72936,253758,41324,32518,96480,11949,124438,65280,43256,34107,53533,43531,37037,28366,45970,32741,173438,6121,194202,62969,26355,30314,58370,28455,1848,50519,82830,90393,21761,295490,10936,256940,133568,44050,20269,4089,27457,21610,219460,36743,14821,101388,52005,13124,30979,140816,167362,26054,18458,60789,34917,40447,26606,33422,9066,3452,83614,5761,20263,137238,25038,91310,101,52322,74548,42572,38084,214054,186568,31802,17665,30620,141936,37730,14420,4265,187218,49640,188208,51441,55388,96452,66659,40869,42039,60967,221027,19234,178581,29105,96050,9165,196118,157335,3738,40354,117436,2965,34136,59659,15570,50843,230035,31444,71260,43886,18316,5387,38500,168508,17406,32174,8828,103373,143806,90367,3560,18719,122310,16508,26719,2541,105429,6645,37998,73190,10591,235916,49737,87112,233941,53188,32193,79154,4544,52905,126477,7580,63501,57314,3216,31337,6541,103083,60846,49,9756,15481,1355,43840,14319,13743,27486,10222,73114,230718,418644,16706,6674,279748,23058,45273,295831,86306,2743,5535,88773,21829,35253,120938,31153,3169,16839,42847,8751,80974,33942,36867,35514,16485,26474,77775,56877,5391,48346,3882,108713,31403,27804,55248,26235,43821,136104,40118,175507,28034,203908,18732,1788,34030,106427,36958,54359,7251,44936,15356,69139,455,157915,22173,140291,50348,43275,82066,49621,54952,15216,36226,96695,66855,6936,1987,8227,196087,4631,68827,99004,47541,110265,17953,147605,110242,58520,31312,38724,329975,642,3155,34497,75937,6207,73843,6120,17249,51429,117746,3218,910,68961,319671,14938,29555,34700,1649,66673,72268,9655,76800,153087,6941,210168,27130,35398,1780,73242,3135,56689,19556,165307,8765,35967,121458,13333,70453,17350,117253,22265,13340,44265,39869,441,3742,135025,23581,33309,16543,17731,13291,157637,283005,21408,101360,63887,52312,83873,5338,233779,23759,186949,34531,177320,38069,156465,91004,19353,59852,68160,14891,1338,1072,29823,1950,28901,81407,313445,73038,84807,162348,240257,37162,138934,16111,58013,41253,102951,16457,96056,19541,56402,67217,41638,94381,89674,29481,37456,80815,151579,13937,13683,132537,19699,134545,67020,29816,222341,141235,427578,48868,129557,233342,23077,87871,16213,18728,16184,9469,37913,19680,2798,171356,178328,13216,50049,72690,71904,124644,55455,7504,29052,41036,266546,19899,30391,188755,8659,59469,16,104298,112943,53865,76203,138226,68857,139953,14125,107625,119795,173133,4398,50273,48808,54390,16466,122086,31835,67035,50971,48859,7508,46427,66477,73021,84615,39985,83076,46779,201569,53336,36443,60865,168164,143810,51393,25548,169307,32896,24485,38424,21837,29087,275813,51674,6714,64883,46169,187369,55186,76192,12852,12018,62134,31067,118303,16542,12125,10579,4928,26291,43854,7091,10946,253716,109062,39283,17261,113012,258512,47764,125126,32646,55892,80279,201623,149872,3192,385,1208,48750,5376,58738,22335,5427,82416,47811,32435,143086,38930,94128,59975,156037,37977,38224,62485,7698,50405,71027,16462,21559,136153,34131,107506,162069,63703,3101,215029,40407,4178,3774,9187,80019,17880,97926,67579,2600,18405,8351,47924,86638,70820,92206,86453,29610,42241,119200,3198,15466,67813,57863,35454,4779,99518,4649,104641,144269,33730,38073,65864,6838,109456,193298,154007,5623,45741,30846,182578,25573,157224,1543,58575,138703,146140,44971,49356,18275,59064,20300,13122,11848,24453,11973,9797,86843,2919,25530,49210,1130,161220,76788,75373,85604,34926,36014,17777,17255,51533,11676,92226,51845,119859,21525,5936,18507,28050,1140,31418,14857,34207,47859,10750,36382,32079,106909,59426,87757,38393,110042,15965,97104,33757,35344,97993,53979,33651,45407,41884,82515,173089,7177,58371,35365,47543,51927,35587,10670,23544,29306,84233,39976,76076,62097,9007,8668,28119,78281,120790,19835,143020,54968,18670,64959,20649,34469,42570,33001,136570,87796,120044,1106,58700,63951,127623,12805,83057,40212,31773,49850,7361,54336,347524,101314,23751,19569,48791,29174,49369,20467,7465,75842,38281,623,112457,60210,28849,51003,94720,6426,90047,85560,43761,3579,85105,34607,90410,118528,7224,42907,111163,18168,6960,161135,191298,5247,100584,127552,171568,20121,91173,12636,54615,20199,63730,98105,2396,40387,14438,125012,4765,33235,12865,45299,37728,82098,77872,114037,59253,19675,24838,398016,102561,11446,17069,57508,178277,65836,99941,26114,2585,271882,136866,50126,11027,155648,118367,14585,8910,123015,335383,40434,41016,53021,14439,87098,176860,201543,121888,2358,9286,5739,22666,54270,37884,169381,33984,93859,16124,89364,72207,51639,76366,99029,65812,2198,12147,174891,194289,6986,30252,88822,21284,11445,288337,160821,33034,100869,43852,25761,52882,1144,103809,1924,84458,86079,43411,13542,139276,18141,34978,41298,7276,26481,173800,33210,17951,142652,33616,33677,2210,19941,98568,2486,192414,80136,12058,235883,50963,249638,29572,27221,47034,6124,72107,63346,97620,158513,299699,40388,23235,37176,224244,198386,121323,67992,23827,63170,17838,106622,158590,26807,5345,23489,91891,55474,74834,37981,13058,5977,72552,34706,26828,145172,19904,21367,34043,960,77092,91381,4733,47446,7680,41697,5170,16960,14741,46101,13656,473,51842,37433,11103,11551,121951,13191,97536,165932,50397,51628,129028,9069,44885,6590,59195,47045,32940,225472,90345,21833,13303,29407,96615,141951,5198,6028,18395,7181,3861,14966,156358,167182,36529,55253,25942,173153,30959,27261,50691,150176,162201,38467,48462,80602,42163,118482,168,108756,26011,17166,54149,456538,22512,91374,13816,90358,131615,18132,226707,1824,28139,26860,42253,93877,77351,65575,8980,80574,22020,27948,40422,91324,76376,13528,39281,91685,82215,122541,144066,1983,193851,17283,26320,2739,194978,4790,26845,42627,61300,65815,174612,55133,4200,191130,79771,158321,52280,166796,221620,62461,11278,4067,88152,83409,31717,121367,13522,47325,37945,10406,174348,249321,154101,64912,29938,51775,17220,15776,166138,78890,84425,54121,42861,16368,24572,291647,10197,32073,22651,11677,97509,26952,35787,18424,41910,71614,94977,72318,41594,70024,275419,37702,60199,7335,39107,61315,18271,18394,33768,87884,104277,123724,7277,56288,71981,189803,49320,3352,6798,14240,8954,69220,94433,57372,28620,68863,193727,85575,42309,41667,67689,42081,22543,44824,12719,28540,114236,101553,27638,27296,4300,5353,4663,19379,94098,3758,95888,95144,80344,87320,28447,259518,12718,71391,152731,37063,24132,31911,104896,15672,103782,1521,4945,72541,23717,122632,15619,87175,206120,29428,189780,61416,28350,44457,972,1175,47233,198738,95789,41907,21953,97034,59341,22864,53713,16873,32971,20693,20954,31336,21477,16169,38370,16412,9019,3841,24599,21938,17085,6484,81198,76413,5849,72514,12320,65247,276175,37234,59796,52642,16312,57349,198507,94148,46134,18958,125552,1747,18725,151873,14901,5490,68287,29470,3689,64794,40814,26018,25692,54450,2703,88278,124886,173087,174e3,24159,179477,24276,46004,201876,209202,445,52876,31948,30206,157610,39180,18439,44124,50469,5774,96278,222758,200216,50290,45486,20435,46986,46276,140133,142326,15569,13363,47522,92583,2182,7135,16853,22998,30272,4952,63263,35623,39096,53789,44864,20053,110392,124213,4630,16087,28221,127787,25839,77481,44693,13464,113146,6983,27069,55717,50102,4760,7107,26186,66507,59145,36032,104182,71328,29425,64317,50781,47465,94298,69706,74899,22754,120756,25108,93077,56834,73286,39928,16218,41699,176763,7555,70819,50083,26895,23315,26014,16773,123079,41712,5719,31516,90427,158540,85051,183128,40864,27505,55392,9058,45224,96857,30901,136622,96557,56304,120061,11501,151448,5773,89743,7769,86069,2935,18471,41628,10114,33660,110170,49479,26745,92846,33221,26731,18795,87076,8550,2100,29972,120289,3077,72490,33784,2630,208722,50861,63483,79029,6419,39467,14302,45286,64207,9686,67513,44170,1050,77246,59266,17055,53801,7150,11111,42432,4278,94579,362117,36175,42902,41933,39002,98489,22913,74161,84773,57036,17556,162288,74485,178760,93867,73635,128860,50362,261,67455,80001,46080,35662,4368,25247,19230,74393,22588,1822,27682,235324,13798,85998,13194,235067,23514,71669,147632,23191,134748,214683,105101,1518,25489,247114,7380,54842,26922,3971,26361,20844,68642,170517,77339,123255,8963,77818,150998,48466,36806,2732,23261,11741,236162,18243,126216,28690,50546,16385,92760,197383,246558,201295,88255,67588,71687,176076,172653,169058,33906,63747,24835,157621,43338,30050,46152,132741,2770,51371,94835,6614,15112,11749,56936,1250,19027,399017,58036,100215,23388,55815,308768,124152,94803,9521,64186,8971,28,30427,62163,7616,103838,35079,29203,131235,7743,17389,10882,37420,61460,228512,85363,41581,131077,62822,119647,10130,54445,26925,19968,29016,24446,74028,24176,61448,67185,9254,8563,119129,9771,99184,37716,39514,10532,221512,258753,218630,55980,23394,32141,61924,66749,32411,3741,36475,26678,77010,44946,91203,128749,116953,20476,49625,53116,13735,102335,29376,51946,83407,67892,59212,34685,21083,1546,112982,32972,74397,1078,190545,16082,86140,58591,89611,101531,10061,105104,76319,20035,17551,52611,169061,190842,100780,23907,90413,115619,9675,34710,193435,49443,129734,11183,258877,16318,136182,126808,44635,27304,192375,2599,125648,47051,12091,23814,721,58800,40137,66726,97930,60877,74487,7942,54326,9841,41428,13762,8211,85383,6950,99177,79806,201786,296464,124087,13144,29741,41721,47634,55088,254286,106408,17041,99064,12942,64086,45233,14005,2612,55827,255,7984,13980,38574,12776,46654,73499,249951,2101,26676,25996,132326,116415,119062,50449,31033,23038,11589,179252,20007,14860,129270,21143,17796,144715,60106,70758,69842,34674,282133,44014,16774,57268,38528,24053,46373,201667,28327,471023,51889,102667,21193,114909,84132,69317,96723,67969,16134,68145,15058,28765,32035,2524,101089,98664,25045,76571,14957,86040,118506,262428,154764,81573,39681,283900,73287,127825,544,80448,52347,38512,175971,15180,45467,33086,46552,48894,81107,43213,36672,54025,76703,8053,7608,13299,56619,20752,238099,54164,105133,1444,32942,953,37564,8e3,66316,119463,106817,404,13667,149108,128597,31267,10269,49836,106150,1484,52330,76965,160486,171648,38456,31263,22424,37738,66245,67467,143369,60471,75610,20895,115528,86070,60854,40796,49347,18989,15030,11371,37578,15779,79867,10187,86462,46402,155626,93200,40229,7090,57547,108053,99598,11088,47505,41218,206017,2173,20988,30219,22919,80563,57566,42369,93141,41675,2407,182519,120495,27154,16702,29456,14349,7958,16688,117177,140375,42467,261919,74916,153569,10836,34742,49526,7621,105997,12212,2270,392377,7755,17959,25086,232152,138791,33847,13860,35316,5811,1344,71259,50452,207539,92635,50359,5821,33674,30255,2086,2587,96264,17543,42,6029,9580,43007,139248,82831,12917,29607,25786,51467,42137,85161,100698,31561,88989,121990,278500,3602,109344,37982,15279,116442,28936,30880,87894,58079,128661,126731,67392,28051,146885,4861,16216,97344,42827,147561,153948,22684,21335,47685,1853,43349,15185,59642,10229,25520,187921,108972,5579,98037,24945,6697,19193,63734,137934,75056,89740,19767,224268,56138,63643,151661,39313,70618,84031,89723,84074,13703,85626,35460,8867,64845,3439,57906,99776,63968,49270,81130,34356,16210,23547,36446,34090,140028,72439,2221,22163,57058,363492,113754,18913,95451,48663,54464,54037,176097,68425,3023,34906,29482,117389,341780,80431,58330,16753,92616,60907,94846,147486,4498,48646,7773,46801,7778,18946,464978,47558,33223,177444,7328,15626,63337,94700,11743,9351,255024,39098,16447,42647,96230,39769,58840,10068,63439,35800,65843,58823,413844,9156,51258,7434,61791,85018,6872,3692,28096,7121,33024,6009,75532,31997,192535,9661,3304,9547,14753,31987,25314,55689,15896,20430,39472,31340,99744,25398,115569,54883,28719,205423,23071,57855,64638,149867,25671,82403,37616,20668,39989,77996,74948,140555,175248,64810,36515,46595,4958,248773,24045,28728,136673,168704,20804,114833,100325,27135,21205,96151,153134,45992,7093,13992,76047,1980,19432,145001,75159,87462,17710,1013,45556,34297,144882,20648,26061,11319,129567,108555,18872,464580,33386,22717,65948,167189,5603,135042,79542,8801,202632,18114,91882,5973,5239,67315,4431,60916,47819,71693,32597,32606,18183,45072,80329,76385,24749,51305,40314,156514,14693,130345,13168,66214,18029,12858,34801,27628,14544,10823,40522,40185,33739,148694,23548,9923,61012,28859,17933,19442,34364,99849,164107,141167,30629,21054,6744,36491,8096,42474,41706,155060,30650,10600,163442,1143,96655,61390,52359,7559,51568,64256,203854,4467,22453,14504,436398,7878,6980,8293,63610,293747,16167,35763,19627,147603,15419,18032,110744,51346,33681,54571,40472,48615,39073,21604,13754,173027,92560,11083,47299,63062,11813,52007,29883,9734,139722,15953,1550,20651,13616,49306,16113,90089,92326,7584,30712,72424,164858,6831,152871,55746,197721,34167,196442,6022,112107,55215,7538,123381,4920,43539,77165,8939,50392,34192,20225,79762,22505,58667,40770,29788,97180,82835,4568,8579,13273,363569,35898,49983,436,36598,3237,131691,62418,35591,8101,4073,379438,65218,76072,33887,2968,27573,212619,288680,68278,72851,150504,217896,6913,121339,22017,35340,51072,43616,75043,31437,10833,81487,4364,22968,41454,106687,85446,19863,109625,149241,524,141850,214404,54376,657,237023,9401,108137,53800,32474,49712,53334,126876,27337,45552,177696,8269,15036,12097,42240,2328,125374,119295,99715,2500,19624,39441,27220,102691,60957,94543,39101,18566,67362,13975,78230,25017,34017,239007,90027,39351,41681,35354,43822,1043,916,58587,141983,94818,38799,75459,41114,67432,16195,36606,59568,22272,126769,31424,68659,12287,134302,257977,5756,207285,95637,47248,117689,19583,77451,22373,12200,54993,117118,34244,29386,34562,53819,71267,64172,77665,49368,7716,59301,25749,45426,194789,17297,2650,1766,32501,45198,20403,20984,6600,14171,94604,19037,5402,29896,9938,59935,109708,88081,145182,44844,39167,352626,164173,35374,45982,6122,154,73419,220487,53834,53601,17992,8609,229321,5610,68098,66815,71012,95069,140968,27396,8957,134489,24656,86659,56598,134852,17316,123838,255436,6613,41610,138033,81452,32023,32396,123687,63398,8693,29712,30407,19296,121188,3551,36099,20032,111948,56624,16547,27453,35916,15378,52039,56849,13489,22214,73177,53097,277349,2157,14029,187886,10260,141743,246460,91880,50869,3788,49486,133566,54950,33120,129337,53768,18333,9525,26902,312251,10297,9020,70759,16647,112432,59260,84609,9818,82766,73569,468,46001,75780,55028,52106,11498,43645,108069,17150,17753,29417,16705,31799,9606,289,122254,115975,8620,6133,255357,56908,14456,133464,43554,79224,11247,29630,160,12756,25464,65960,350428,62521,321796,100359,67358,35169,46172,113128,48988,88868,31094,33266,6847,60887,98188,49659,69117,92977,220228,13947,80181,35103,62170,97351,13475,2440,199768,19498,36597,46971,25234,67806,62881,84717,73648,181966,10488,94149,21550,26655,63436,48375,14405,165650,9621,24439,28043,42735,4490,29963,56674,45373,1934,262446,50855,67098,26898,5261,52696,40644,33900,9440,180286,87162,22940,19704,26936,69769,10254,101759,27406,12243,48e3,73926,113215,54935,5726,192787,4312,106216,9366,11550,52949,23457,212271,277152,133895,108374,6191,96477,29980,218916,58024,54696,40853,91124,65894,91170,65908,252552,6793,29212,15389,44516,122515,52617,35058,9017,103536,39510,49136,19242,130652,662077,74699,47024,31422,8517,73351,24399,13867,128360,4810,4434,61779,111983,61036,17798,110240,59722,102960,39688,10001,23803,23039,176498,56659,44814,134295,17188,77577,74466,226175,102472,154333,63900,111747,18062,41171,79669,32773,408933,42562,28931,30907,107388,43487,2946,240310,23938,24354,319,184983,7927,6488,1422,10790,68809,68209,64775,4361,202,17123,59634,51200,44391,18188,17843,2619,74278,3230,9540,47187,21702,36274,56894,43907,16310,34790,16866,6150,5561,13587,107545,108873,126867,86986,28640,33427,19017,5762,80637,17430,46903,2047,131055,25958,13558,5444,47152,13900,44563,122857,45348,70863,39593,54332,38068,33637,318,40310,143467,18502,24520,11377,62013,28942,27246,28269,83545,17999,59015,90707,30065,15161,34720,1263,37008,2012,6060,98575,92933,5721,299,199555,24578,29223,2985,743,115825,109523,136657,47454,26378,53586,3733,174945,93340,244456,5693,37386,28782,89767,27545,23573,18798,136425,34320,84778,20041,48453,38215,7477,71958,40621,8773,5874,187927,105965,51100,43533,18083,8443,10180,43597,2003,183999,69689,12216,129696,146188,62389,34044,68410,12765,43273,26949,266807,3345,34477,79197,5688,47539,213110,21634,22257,50092,32222,42346,39530,63668,98,134978,74022,5152,59088,174145,37220,9934,9545,118937,5724,87240,19875,15784,40143,23263,87513,181654,285152,37881,263241,4966,43934,10433,186657,6470,74416,225854,25908,142677,246262,32280,6192,75890,45546,143264,135305,29742,47013,77787,11732,126658,8763,37950,21806,57557,113464,89465,108995,164574,23894,22996,23169,15369,23117,17642,130607,40503,36239,280990,44666,9981,40427,147487,26869,168452,32886,32991,46798,240839,15111,70502,65697,88548,44145,28701,48767,31139,206777,35659,181164,166262,14554,171445,31786,66523,76607,17956,6507,31279,90476,116611,167918,6560,1243,115324,80128,41867,55897,187323,37069,32596,189444,145931,13390,105530,65709,26805,6999,55714,41300,22915,68951,22138,21120,22264,10058,19945,33635,56123,99085,10032,5818,6016,46649,57476,35264,94413,112522,262288,93686,83038,14341,23204,28807,66084,77987,6101,126673,7133,38126,5923,122091,170240,97772,46874,215746,43948,41622,3272,55596,8332,146411,251315,13533,8561,81521,115449,48616,175175,2063,186556,3036,134537,75772,29728,82360,22973,186559,86348,89100,38388,82297,45610,2613,87082,9986,177812,57884,23591,47485,42543,33582,44713,74439,257444,252451,31825,35631,38540,33066,5147,13973,4343,51830,70378,22827,26448,95560,36896,241741,48067,203953,298860,61620,20450,3220,67272,6586,107662,100160,108684,6929,57226,4762,7457,1320,40404,77204,99309,62750,208653,59977,44e3,74315,34332,5819,172217,64904,114077,18147,84012,1791,98456,90930,21446,116669,103938,7422,85140,59713,5768,326211,16239,75411,13229,29398,10758,236107,1539,112472,95979,152154,151294,306,21196,38146,10700,6891,84282,109646,56492,40539,6589,119491,51354,30685,140209,136906,29622,73617,49553,70525,51671,166869,139616,74395,37439,49595,45678,11959,33211,86560,52434,9282,62690,112155,130810,5243,108261,99970,265613,72551,80049,6391,33365,90721,66737,69872,87011,1860,9032,112544,60905,37371,89015,140351,19076,850,373531,2802,36725,218795,72062,28990,16550,24614,7815,6187,26336,33373,32162,42791,73555,32062,23386,10244,56392,49442,27076,136262,12412,14883,1134,33675,97153,199281,15608,100152,74072,47942,254301,36451,16026,10687,65067,56708,254030,30290,50490,13864,57941,259331,35588,23485,43486,24869,21620,92971,22072,88645,1048,182050,13343,32452,14825,19509,3325,216938,45740,99716,189082,53740,78245,25609,24311,176777,47340,308354,40669,66085,14102,125339,9225,128709,97207,1271,200933,78439,113451,88975,18324,46521,11819,18570,141756,72512,170020,52754,63550,118515,103073,93330,32736,50499,14722,31600,68452,398867,29316,172786,18417,104924,2606,5670,84818,16288,67106,59580,82929,607401,291,85829,359,15897,35830,50696,65630,52672,22115,356968,29895,40837,231192,34024,38957,26722,406,23335,124952,72068,68804,13268,147101,164740,276569,162596,66943,11569,26654,66358,4777,23229,102127,5848,978,2921,59666,5371,28212,90108,42938,39320,2499,4271,108792,33510,125072,71653,65239,38250,66357,38577,13964,86251,35708,50755,36010,29448,12209,3844,38222,206337,100876,67827,137088,14167,252225,84163,195270,1306,5703,54198,779,46802,22028,51124,86759,70560,113164,35685,162145,45471,34561,422,2611,6464,47486,19223,38246,9191,18331,89942,243642,212364,15893,17518,22617,6409,30046,126182,59716,36560,104428,18846,26592,19458,50793,147333,30826,1388,27647,10922,14495,33545,19269,135828,39727,41601,46931,233379,49169,131130,182112,16276,82381,118209,142445,128310,19672,28740,82907,33436,3118,102206,28723,24819,41937,38854,5157,3881,111491,1142,9776,421673,152241,29309,14961,87854,6054,15424,3796,82656,54996,2108,55367,239450,154525,9643,118103,106041,64601,68549,48707,30266,25772,18740,9462,229669,91798,112152,191327,14493,72828,8175,66636,236474,25817,87351,129027,76653,20422,22983,71240,27846,44661,12399,46158,77704,53101,35032,11072,17300,109294,33638,24408,1895,11241,760,17584,82479,125877,63150,141075,34259,23274,81698,15732,43577,48340,91584,14688,16379,24481,150280,96420,262050,48635,43727,61819,56268,72003,88178,17281,79912,13218,122519,125295,166396,11811,2171,118930,67746,17636,178278,174656,95661,173039,83845,79689,17473,98555,127696,203415,54730,22925,232239,9309,12136,175026,20740,180188,10747,39816,314017,266131,10040,175732,112550,220651,31974,37393,888,23008,86799,4303,64905,148467,75337,251,3284,370102,50264,9835,5438,23655,4481,29851,329,12855,7162,64931,78141,12804,42372,296771,83547,18624,34874,86271,3360,48665,77735,88767,11463,63527,28889,22258,29140,194315,113924,25499,6406,31334,1845,4802,49184,43455,35469,127594,92970,61038,115005,38840,87761,106838,8811,20572,55637,11162,96721,132425,108925,2948,125457,36356,3502,75270,27622,127192,2561,123095,49394,61155,16897,110064,9699,89448,53356,19628,220310,21622,83036,9885,112214,6087,26713,17901,161912,91492,3440,68594,9266,92238,8087,6866,150194,72175,80701,13459,31836,43243,239700,95846,44749,50647,21945,230538,120612,132371,244604,5193,105637,34661,41341,68775,85393,1874,8771,33718,49672,77403,595452,99507,6490,58895,128742,7704,39239,73217,43816,62824,37804,199976,22361,80005,87514,94832,14089,4574,139975,59142,75523,100268,43906,53442,15152,2547,186002,17011,19513,204282,3343,60568,128318,119250,4298,51871,41336,71759,21921,45074,98169,145889,99427,11350,1237,5520,28799,7803,53702,21026,136352,38293,128690,12158,90132,44600,10184,26957,39459,126025,78904,82999,59373,39301,150198,120529,153042,20177,50089,14764,271571,30530,123161,38975,101562,22941,5648,124654,109243,69817,71675,49162,106884,21241,107795,30258,16572,188262,141456,7688,60718,8271,11044,32440,104608,103419,236109,93156,43293,128929,42107,67180,25201,115254,185488,130954,72813,167547,20537,39969,38432,22582,184022,1139,27199,5655,17767,97412,122606,209377,27070,35871,326617,188954,42680,73512,80911,22629,3011,95021,315242,157737,383,41821,41808,19335,27950,15674,25677,110950,35375,76835,59108,57370,35262,16569,160415,37706,78086,32041,49691,137143,9782,172080,50148,77917,6323,10110,69172,17711,21795,59511,76184,135114,31046,132319,59105,157578,20549,80778,57649,158421,65143,4575,72235,21899,10797,92745,34035,106079,80159,4508,78304,25350,75457,46458,32937,25623,47,8531,104751,84953,8138,36508,187199,66310,115274,13253,32461,38536,1916,42007,187160,35055,26325,84394,35963,94216,45590,97782],MAX_COMMON_PREFIX_LENGTH=15;class RoutingTableRefresh{log;peerRouting;routingTable;refreshInterval;refreshQueryTimeout;commonPrefixLengthRefreshedAt;refreshTimeoutId;constructor(r,g){const{peerRouting:_,routingTable:x,refreshInterval:S,refreshQueryTimeout:E,logPrefix:C}=g;this.log=r.logger.forComponent(`${C}:routing-table:refresh`),this.peerRouting=_,this.routingTable=x,this.refreshInterval=S??TABLE_REFRESH_INTERVAL,this.refreshQueryTimeout=E??TABLE_REFRESH_QUERY_TIMEOUT,this.commonPrefixLengthRefreshedAt=[],this.refreshTable=this.refreshTable.bind(this)}async afterStart(){this.log(`refreshing routing table every ${this.refreshInterval}ms`),this.refreshTable(!0)}async stop(){this.refreshTimeoutId!=null&&clearTimeout(this.refreshTimeoutId)}refreshTable(r=!1){this.log("refreshing routing table");const g=this._maxCommonPrefix(),_=this._getTrackedCommonPrefixLengthsForRefresh(g);this.log(`max common prefix length ${g}`),this.log(`tracked CPLs [ ${_.map(x=>x.toISOString()).join(", ")} ]`),Promise.all(_.map(async(x,S)=>{try{if(await this._refreshCommonPrefixLength(S,x,r),this._numPeersForCpl(g)===0){const E=Math.min(2*(S+1),_.length-1);for(let C=S+1;C<E+1;C++)try{await this._refreshCommonPrefixLength(C,x,r)}catch(T){this.log.error(T)}}}catch(E){this.log.error(E)}})).catch(x=>{this.log.error(x)}).then(()=>{this.refreshTimeoutId=setTimeout(this.refreshTable,this.refreshInterval),this.refreshTimeoutId.unref!=null&&this.refreshTimeoutId.unref()}).catch(x=>{this.log.error(x)})}async _refreshCommonPrefixLength(r,g,_){if(!_&&g.getTime()>Date.now()-this.refreshInterval){this.log("not running refresh for cpl %s as time since last refresh not above interval",r);return}const x=await this._generateRandomPeerId(r);this.log("starting refreshing cpl %s with key %p (routing table size was %s)",r,x,this.routingTable.size);const S=AbortSignal.timeout(this.refreshQueryTimeout);setMaxListeners(1/0,S);const E=await length(this.peerRouting.getClosestPeers(x.toMultihash().bytes,{signal:S}));this.log(`found ${E} peers that were close to imaginary peer %p`,x),this.log("finished refreshing cpl %s with key %p (routing table size is now %s)",r,x,this.routingTable.size)}_getTrackedCommonPrefixLengthsForRefresh(r){r>MAX_COMMON_PREFIX_LENGTH&&(r=MAX_COMMON_PREFIX_LENGTH);const g=[];for(let _=0;_<=r;_++)g[_]=this.commonPrefixLengthRefreshedAt[_]??new Date;return g}async _generateRandomPeerId(r){if(this.routingTable.kb==null)throw new Error("Routing table not started");if(this.routingTable.kb.localPeer==null)throw new Error("Local peer not set");const g=randomBytes(2),_=(g[1]<<8)+g[0],x=await this._makePeerId(this.routingTable.kb.localPeer.kadId,_,r),S=decode$h(x);return peerIdFromMultihash(S)}async _makePeerId(r,g,_){if(_>MAX_COMMON_PREFIX_LENGTH)throw new Error(`Cannot generate peer ID for common prefix length greater than ${MAX_COMMON_PREFIX_LENGTH}`);const E=new DataView(r.buffer,r.byteOffset,r.byteLength).getUint16(0,!1)^32768>>_,C=65535<<16-(_+1),T=E&C|g&~C,R=GENERATED_PREFIXES[T],A=new ArrayBuffer(34),I=new DataView(A,0,A.byteLength);return I.setUint8(0,sha256$8.code),I.setUint8(1,32),I.setUint32(2,R,!1),new Uint8Array(I.buffer,I.byteOffset,I.byteLength)}_maxCommonPrefix(){let r=0;for(const g of this._prefixLengths())g>r&&(r=g);return r}_numPeersForCpl(r){let g=0;for(const _ of this._prefixLengths())_===r&&g++;return g}*_prefixLengths(){if(this.routingTable.kb?.localPeer!=null)for(const{kadId:r}of this.routingTable.kb.toIterable()){const g=xor(this.routingTable.kb.localPeer.kadId,r);let _=0;for(const x of g)if(x===0)_++;else break;yield _}}}class AddProviderHandler{peerId;providers;peerStore;log;constructor(r,g){this.log=r.logger.forComponent(`${g.logPrefix}:rpc:handlers:add-provider`),this.peerId=r.peerId,this.providers=g.providers,this.peerStore=r.peerStore}async handle(r,g){if(g.key==null||g.key.length===0)throw new InvalidMessageError("Missing key");let _;try{_=CID$1.decode(g.key)}catch{throw new InvalidMessageError("Invalid CID")}(g.providers==null||g.providers.length===0)&&this.log.error("no providers found in message"),this.log("%p asked us, %p to store provider record for for %c",r,this.peerId,_),await Promise.all(g.providers.map(async x=>{const S=decode$h(x.id),E=peerIdFromMultihash(S),C=x.multiaddrs.map(T=>multiaddr(T));if(!r.equals(E)){this.log("invalid provider peer %p from %p",x.id,r);return}if(x.multiaddrs.length<1){this.log("no valid addresses for provider %p. Ignore",r);return}this.log.trace("received provider %p for %s (addrs %s)",r,_,C),await this.providers.addProvider(_,E),await this.peerStore.merge(E,{multiaddrs:C})}))}}class FindNodeHandler{peerRouting;peerInfoMapper;peerId;addressManager;log;constructor(r,g){const{peerRouting:_,logPrefix:x}=g;this.log=r.logger.forComponent(`${x}:rpc:handlers:find-node`),this.peerId=r.peerId,this.addressManager=r.addressManager,this.peerRouting=_,this.peerInfoMapper=g.peerInfoMapper}async handle(r,g){if(this.log("incoming request from %p for peers closer to %b",r,g.key),g.key==null)throw new InvalidMessageError("Invalid FIND_NODE message received - key was missing");const _=await this.peerRouting.getCloserPeersOffline(g.key,r);equals$1(this.peerId.toMultihash().bytes,g.key)&&_.push({id:this.peerId,multiaddrs:this.addressManager.getAddresses().map(S=>S.decapsulateCode(getProtocol("p2p").code))});const x={type:MessageType.FIND_NODE,clusterLevel:g.clusterLevel,closer:_.map(this.peerInfoMapper).filter(({multiaddrs:S})=>S.length).map(S=>({id:S.id.toMultihash().bytes,multiaddrs:S.multiaddrs.map(E=>E.bytes)})),providers:[]};return x.closer.length===0&&this.log("could not find any peers closer to %b than %p",g.key,r),x}}class GetProvidersHandler{peerId;peerRouting;providers;peerStore;peerInfoMapper;log;constructor(r,g){const{peerRouting:_,providers:x,logPrefix:S}=g;this.log=r.logger.forComponent(`${S}:rpc:handlers:get-providers`),this.peerId=r.peerId,this.peerStore=r.peerStore,this.peerRouting=_,this.providers=x,this.peerInfoMapper=g.peerInfoMapper}async handle(r,g){if(g.key==null)throw new InvalidMessageError("Invalid GET_PROVIDERS message received - key was missing");let _;try{_=CID$1.decode(g.key)}catch{throw new InvalidMessageError("Invalid CID")}this.log("%p asking for providers for %s",r,_);const[x,S]=await Promise.all([all$1(map$2(await this.providers.getProviders(_),async C=>{const T=await this.peerStore.get(C);return{id:T.id,multiaddrs:T.addresses.map(({multiaddr:A})=>A)}})),this.peerRouting.getCloserPeersOffline(g.key,this.peerId)]),E={type:MessageType.GET_PROVIDERS,key:g.key,clusterLevel:g.clusterLevel,closer:S.map(this.peerInfoMapper).filter(({id:C,multiaddrs:T})=>T.length>0).map(C=>({id:C.id.toMultihash().bytes,multiaddrs:C.multiaddrs.map(T=>T.bytes)})),providers:x.map(this.peerInfoMapper).filter(({id:C,multiaddrs:T})=>T.length>0).map(C=>({id:C.id.toMultihash().bytes,multiaddrs:C.multiaddrs.map(T=>T.bytes)}))};return this.log("got %s providers %s closerPeers",E.providers.length,E.closer.length),E}async _getAddresses(r){return[]}}class GetValueHandler{peerStore;datastore;peerRouting;log;datastorePrefix;constructor(r,g){this.log=r.logger.forComponent(`${g.logPrefix}:rpc:handlers:get-value`),this.datastorePrefix=`${g.datastorePrefix}/record`,this.peerStore=r.peerStore,this.datastore=r.datastore,this.peerRouting=g.peerRouting}async handle(r,g){const _=g.key;if(this.log("%p asked for key %b",r,_),_==null||_.length===0)throw new InvalidMessageError("Invalid key");const x={type:MessageType.GET_VALUE,key:_,clusterLevel:g.clusterLevel,closer:[],providers:[]};if(isPublicKeyKey(_)){this.log("is public key");const C=fromPublicKeyKey(_);let T;try{const R=await this.peerStore.get(C);if(R.id.publicKey==null)throw new NotFoundError$1("No public key found in key book");T=publicKeyToProtobuf(R.id.publicKey)}catch(R){if(R.name!=="NotFoundError")throw R}if(T!=null)return this.log("returning found public key"),x.record=new Libp2pRecord(_,T,new Date).serialize(),x}const[S,E]=await Promise.all([this._checkLocalDatastore(_),this.peerRouting.getCloserPeersOffline(_,r)]);return S!=null&&(this.log("had record for %b in local datastore",_),x.record=S.serialize()),E.length>0&&(this.log("had %s closer peers in routing table",E.length),x.closer=E.map(C=>({id:C.id.toMultihash().bytes,multiaddrs:C.multiaddrs.map(T=>T.bytes)}))),x}async _checkLocalDatastore(r){this.log("checkLocalDatastore looking for %b",r);const g=bufferToRecordKey(this.datastorePrefix,r);let _;try{_=await this.datastore.get(g)}catch(S){if(S.name==="NotFoundError")return;throw S}const x=Libp2pRecord.deserialize(_);if(x.timeReceived==null||Date.now()-x.timeReceived.getTime()>MAX_RECORD_AGE){await this.datastore.delete(g);return}return x}}class PingHandler{log;constructor(r,g){this.log=r.logger.forComponent(`${g.logPrefix}:rpc:handlers:ping`)}async handle(r,g){return this.log("ping from %p",r),g}}class PutValueHandler{components;validators;log;datastorePrefix;constructor(r,g){const{validators:_}=g;this.components=r,this.log=r.logger.forComponent(`${g.logPrefix}:rpc:handlers:put-value`),this.datastorePrefix=`${g.datastorePrefix}/record`,this.validators=_}async handle(r,g){const _=g.key;if(this.log("%p asked us to store value for key %b",r,_),g.record==null){const x=`Empty record from: ${r.toString()}`;throw this.log.error(x),new InvalidMessageError(x)}try{const x=Libp2pRecord.deserialize(g.record);await verifyRecord(this.validators,x),x.timeReceived=new Date;const S=bufferToRecordKey(this.datastorePrefix,x.key);await this.components.datastore.put(S,x.serialize().subarray()),this.log("put record for %b into datastore under key %k",_,S)}catch(x){this.log("did not put record for key %b into datastore %o",_,x)}return g}}let RPC$1=class{handlers;routingTable;log;metrics;constructor(r,g){this.metrics={operations:r.metrics?.registerCounterGroup(`${g.metricsPrefix}_inbound_rpc_requests_total`),errors:r.metrics?.registerCounterGroup(`${g.metricsPrefix}_inbound_rpc_errors_total`)},this.log=r.logger.forComponent(`${g.logPrefix}:rpc`),this.routingTable=g.routingTable,this.handlers={[MessageType.GET_VALUE.toString()]:new GetValueHandler(r,g),[MessageType.PUT_VALUE.toString()]:new PutValueHandler(r,g),[MessageType.FIND_NODE.toString()]:new FindNodeHandler(r,g),[MessageType.ADD_PROVIDER.toString()]:new AddProviderHandler(r,g),[MessageType.GET_PROVIDERS.toString()]:new GetProvidersHandler(r,g),[MessageType.PING.toString()]:new PingHandler(r,g)}}async handleMessage(r,g){const _=this.handlers[g.type];if(_==null){this.log.error(`no handler found for message type: ${g.type}`);return}try{return this.metrics.operations?.increment({[g.type]:!0}),await _.handle(r,g)}catch{this.metrics.errors?.increment({[g.type]:!0})}}onIncomingStream(r){let g="unknown";Promise.resolve().then(async()=>{const{stream:_,connection:x}=r,S=x.remotePeer,E=this;await pipe(_,C=>decode$2(C),async function*(C){for await(const T of C){const R=Message$2.decode(T);g=R.type,E.log("incoming %s from %p",R.type,S);const A=await E.handleMessage(S,R);A!=null&&(yield Message$2.encode(A))}},C=>encode$2(C),_)}).catch(_=>{this.log.error("error handling %s RPC message from %p - %e",g,r.connection.remotePeer,_)})}};class TopologyListener extends TypedEventEmitter{log;components;protocol;running;registrarId;constructor(r,g){super();const{protocol:_,logPrefix:x}=g;this.components=r,this.log=r.logger.forComponent(`${x}:topology-listener`),this.running=!1,this.protocol=_}isStarted(){return this.running}async start(){this.running||(this.running=!0,this.registrarId=await this.components.registrar.register(this.protocol,{onConnect:r=>{this.log("observed peer %p with protocol %s",r,this.protocol),this.dispatchEvent(new CustomEvent("peer",{detail:r}))}}))}async stop(){this.running=!1,this.registrarId!=null&&(this.components.registrar.unregister(this.registrarId),this.registrarId=void 0)}}class DHTContentRouting{dht;constructor(r){this.dht=r}async provide(r,g={}){await drain(this.dht.provide(r,g))}async cancelReprovide(r){await this.dht.cancelReprovide(r)}async*findProviders(r,g={}){for await(const _ of this.dht.findProviders(r,g))_.name==="PROVIDER"&&(yield*_.providers)}async put(r,g,_){await drain(this.dht.put(r,g,_))}async get(r,g){for await(const _ of this.dht.get(r,g))if(_.name==="VALUE")return _.value;throw new NotFoundError$1("Could not find value for key")}}class DHTPeerRouting{dht;constructor(r){this.dht=r}async findPeer(r,g={}){for await(const _ of this.dht.findPeer(r,g))if(_.name==="FINAL_PEER")return _.peer;throw new NotFoundError$1("Peer not found")}async*getClosestPeers(r,g={}){for await(const _ of this.dht.getClosestPeers(r,g))_.name==="FINAL_PEER"&&(yield _.peer)}}const DEFAULT_MAX_INBOUND_STREAMS$1=32,DEFAULT_MAX_OUTBOUND_STREAMS$1=64;class KadDHT extends TypedEventEmitter{protocol;routingTable;providers;network;peerRouting;components;log;running;kBucketSize;clientMode;validators;selectors;queryManager;contentFetching;contentRouting;routingTableRefresh;rpc;topologyListener;querySelf;maxInboundStreams;maxOutboundStreams;dhtContentRouting;dhtPeerRouting;peerInfoMapper;reprovider;constructor(r,g={}){super();const _=g.logPrefix??"libp2p:kad-dht",x=g.datastorePrefix??"/dht",S=g.metricsPrefix??"libp2p_kad_dht",E={queries:r.metrics?.registerMetricGroup(`${S}_operations_total`,{label:"operation"}),errors:r.metrics?.registerCounterGroup(`${S}_operation_errors_total`,{label:"operation"}),queryTime:r.metrics?.registerMetricGroup(`${S}_operation_time_seconds`,{label:"operation"}),errorTime:r.metrics?.registerMetricGroup(`${S}_operation_error_time_seconds`,{label:"operation"})};this.running=!1,this.components=r,this.log=r.logger.forComponent(_),this.protocol=g.protocol??PROTOCOL$1,this.kBucketSize=g.kBucketSize??20,this.clientMode=g.clientMode??!0,this.maxInboundStreams=g.maxInboundStreams??DEFAULT_MAX_INBOUND_STREAMS$1,this.maxOutboundStreams=g.maxOutboundStreams??DEFAULT_MAX_OUTBOUND_STREAMS$1,this.peerInfoMapper=g.peerInfoMapper??removePrivateAddressesMapper;const C=createMortice();this.providers=new Providers(r,{...g.providers,logPrefix:_,datastorePrefix:x,lock:C}),this.validators={...validators,...g.validators},this.selectors={...selectors,...g.selectors},this.network=new Network(r,{protocol:this.protocol,logPrefix:_,metricsPrefix:S}),this.routingTable=new RoutingTable(r,{kBucketSize:g.kBucketSize,pingOldContactTimeout:g.pingOldContactTimeout,pingOldContactConcurrency:g.pingOldContactConcurrency,pingOldContactMaxQueueSize:g.pingOldContactMaxQueueSize,pingNewContactTimeout:g.pingNewContactTimeout,pingNewContactConcurrency:g.pingNewContactConcurrency,pingNewContactMaxQueueSize:g.pingNewContactMaxQueueSize,protocol:this.protocol,logPrefix:_,metricsPrefix:S,prefixLength:g.prefixLength,splitThreshold:g.kBucketSplitThreshold,network:this.network});const T=pDefer();g.allowQueryWithZeroPeers===!0&&T.resolve(),this.queryManager=new QueryManager(r,{disjointPaths:Math.ceil(this.kBucketSize/2),logPrefix:_,metricsPrefix:S,initialQuerySelfHasRun:T,routingTable:this.routingTable}),this.peerRouting=new PeerRouting(r,{routingTable:this.routingTable,network:this.network,validators:this.validators,queryManager:this.queryManager,logPrefix:_}),this.contentFetching=new ContentFetching(r,{validators:this.validators,selectors:this.selectors,peerRouting:this.peerRouting,queryManager:this.queryManager,network:this.network,logPrefix:_,datastorePrefix:x}),this.contentRouting=new ContentRouting(r,{network:this.network,peerRouting:this.peerRouting,queryManager:this.queryManager,routingTable:this.routingTable,providers:this.providers,logPrefix:_}),this.routingTableRefresh=new RoutingTableRefresh(r,{peerRouting:this.peerRouting,routingTable:this.routingTable,logPrefix:_}),this.rpc=new RPC$1(r,{routingTable:this.routingTable,providers:this.providers,peerRouting:this.peerRouting,validators:this.validators,logPrefix:_,metricsPrefix:S,datastorePrefix:x,peerInfoMapper:this.peerInfoMapper}),this.topologyListener=new TopologyListener(r,{protocol:this.protocol,logPrefix:_}),this.querySelf=new QuerySelf(r,{peerRouting:this.peerRouting,interval:g.querySelfInterval,initialInterval:g.initialQuerySelfInterval,logPrefix:_,initialQuerySelfHasRun:T,routingTable:this.routingTable,operationMetrics:E}),this.reprovider=new Reprovider(r,{...g.reprovide,logPrefix:_,metricsPrefix:S,datastorePrefix:x,contentRouting:this.contentRouting,lock:C,operationMetrics:E}),this.network.addEventListener("peer",R=>{const A=R.detail;this.onPeerConnect(A).catch(I=>{this.log.error("could not add %p to routing table",A.id,I)}),this.dispatchEvent(new CustomEvent("peer",{detail:A}))}),this.topologyListener.addEventListener("peer",R=>{const A=R.detail;Promise.resolve().then(async()=>{const I=await this.components.peerStore.get(A),B={id:A,multiaddrs:I.addresses.map(({multiaddr:D})=>D),protocols:I.protocols};await this.onPeerConnect(B)}).catch(I=>{this.log.error("could not add %p to routing table - %e",A,I)})}),this.dhtPeerRouting=new DHTPeerRouting(this),this.dhtContentRouting=new DHTContentRouting(this),g.clientMode==null&&r.events.addEventListener("self:peer:update",R=>{this.log("received update of self-peer info"),Promise.resolve().then(async()=>{const A=R.detail.peer.addresses.some(({multiaddr:B})=>multiaddrIsPublic(B)),I=this.getMode();A&&I==="client"?await this.setMode("server"):I==="server"&&!A&&await this.setMode("client")}).catch(A=>{this.log.error("error setting dht server mode",A)})}),this.get=timeOperationGenerator(this.get.bind(this),E,"GET_VALUE"),this.findProviders=timeOperationGenerator(this.findProviders.bind(this),E,"FIND_PROVIDERS"),this.findPeer=timeOperationGenerator(this.findPeer.bind(this),E,"FIND_PEER"),this.getClosestPeers=timeOperationGenerator(this.getClosestPeers.bind(this),E,"GET_CLOSEST_PEERS"),this.provide=timeOperationGenerator(this.provide.bind(this),E,"PROVIDE"),this.put=timeOperationGenerator(this.put.bind(this),E,"PUT_VALUE")}[Symbol.toStringTag]="@libp2p/kad-dht";[serviceCapabilities]=["@libp2p/content-routing","@libp2p/peer-routing","@libp2p/peer-discovery"];[serviceDependencies]=["@libp2p/identify"];get[contentRoutingSymbol](){return this.dhtContentRouting}get[peerRoutingSymbol](){return this.dhtPeerRouting}get[peerDiscoverySymbol](){return this}async onPeerConnect(r){if(this.log.trace("peer %p connected",r.id),r=this.peerInfoMapper(r),r.multiaddrs.length===0){this.log.trace("ignoring %p as there were no valid addresses in %s after filtering",r.id,r.multiaddrs.map(g=>g.toString()));return}try{await this.routingTable.add(r.id)}catch(g){this.log.error("could not add %p to routing table",r.id,g)}}isStarted(){return this.running}getMode(){return this.clientMode?"client":"server"}async setMode(r,g=!1){if(r===this.getMode()&&!g){this.log("already in %s mode",r);return}if(await this.components.registrar.unhandle(this.protocol),r===this.getMode()&&!g){this.log("already in %s mode",r);return}r==="client"?(this.log("enabling client mode while in %s mode",this.getMode()),this.clientMode=!0):(this.log("enabling server mode while in %s mode",this.getMode()),this.clientMode=!1,await this.components.registrar.handle(this.protocol,this.rpc.onIncomingStream.bind(this.rpc),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams}))}async start(){this.running||(this.running=!0,await this.setMode(this.clientMode?"client":"server",!0),await start(this.routingTable,this.queryManager,this.network,this.topologyListener,this.routingTableRefresh,this.reprovider),await start(this.querySelf))}async stop(){this.running=!1,await stop(this.querySelf,this.queryManager,this.network,this.routingTable,this.routingTableRefresh,this.topologyListener,this.reprovider)}async*put(r,g,_={}){yield*this.contentFetching.put(r,g,_)}async*get(r,g={}){yield*this.contentFetching.get(r,g)}async*provide(r,g={}){yield*this.contentRouting.provide(r,this.components.addressManager.getAddresses(),g)}async cancelReprovide(r){await this.providers.removeProvider(r,this.components.peerId)}async*findProviders(r,g={}){yield*this.contentRouting.findProviders(r,g)}async*findPeer(r,g={}){yield*this.peerRouting.findPeer(r,g)}async*getClosestPeers(r,g={}){yield*this.peerRouting.getClosestPeers(r,g)}async refreshRoutingTable(){this.routingTableRefresh.refreshTable(!0)}}var EventTypes;(function(n){n[n.SEND_QUERY=0]="SEND_QUERY",n[n.PEER_RESPONSE=1]="PEER_RESPONSE",n[n.FINAL_PEER=2]="FINAL_PEER",n[n.QUERY_ERROR=3]="QUERY_ERROR",n[n.PROVIDER=4]="PROVIDER",n[n.VALUE=5]="VALUE",n[n.ADD_PEER=6]="ADD_PEER",n[n.DIAL_PEER=7]="DIAL_PEER"})(EventTypes||(EventTypes={}));function kadDHT(n={}){return r=>new KadDHT(r,n)}var truncate,hasRequiredTruncate;function requireTruncate(){if(hasRequiredTruncate)return truncate;hasRequiredTruncate=1;function n(g){return g>=55296&&g<=56319}function r(g){return g>=56320&&g<=57343}return truncate=function(_,x,S){if(typeof x!="string")throw new Error("Input must be string");for(var E=x.length,C=0,T,R,A=0;A<E;A+=1){if(T=x.charCodeAt(A),R=x[A],n(T)&&r(x.charCodeAt(A+1))&&(A+=1,R+=x[A]),C+=_(R),C===S)return x.slice(0,A+1);if(C>S)return x.slice(0,A-R.length+1)}return x},truncate}var browser$2,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$2;hasRequiredBrowser$1=1;function n(g){return g>=55296&&g<=56319}function r(g){return g>=56320&&g<=57343}return browser$2=function(_){if(typeof _!="string")throw new Error("Input must be string");for(var x=_.length,S=0,E=null,C=null,T=0;T<x;T++)E=_.charCodeAt(T),r(E)?C!=null&&n(C)?S+=1:S+=3:E<=127?S+=1:E>=128&&E<=2047?S+=2:E>=2048&&E<=65535&&(S+=3),C=E;return S},browser$2}var browser$1,hasRequiredBrowser;function requireBrowser(){if(hasRequiredBrowser)return browser$1;hasRequiredBrowser=1;var n=requireTruncate(),r=requireBrowser$1();return browser$1=n.bind(null,r),browser$1}var sanitizeFilename,hasRequiredSanitizeFilename;function requireSanitizeFilename(){if(hasRequiredSanitizeFilename)return sanitizeFilename;hasRequiredSanitizeFilename=1;var n=requireBrowser(),r=/[\/\?<>\\:\*\|"]/g,g=/[\x00-\x1f\x80-\x9f]/g,_=/^\.+$/,x=/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,S=/[\. ]+$/;function E(C,T){if(typeof C!="string")throw new Error("Input must be string");var R=C.replace(r,T).replace(g,T).replace(_,T).replace(x,T).replace(S,T);return n(R,255)}return sanitizeFilename=function(C,T){var R=T&&T.replacement||"",A=E(C,R);return R===""?A:E(A,"")},sanitizeFilename}var sanitizeFilenameExports=requireSanitizeFilename();const sanitize=getDefaultExportFromCjs(sanitizeFilenameExports),derivedEmptyPasswordKey={alg:"A128GCM",ext:!0,k:"scm9jmO_4BJAgdwWGVulLg",key_ops:["encrypt","decrypt"],kty:"oct"};function create(n){const r="AES-GCM";let g=16;const _=12,x="SHA-256",S=16,E=32767,C=webcrypto.get();g*=8;async function T(I,B){const D=C.getRandomValues(new Uint8Array(S)),N=C.getRandomValues(new Uint8Array(_)),M={name:r,iv:N};typeof B=="string"&&(B=fromString(B));let O;if(B.length===0){O=await C.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"]);try{const F={name:"PBKDF2",salt:D,iterations:E,hash:{name:x}},U=await C.subtle.importKey("raw",B,{name:"PBKDF2"},!1,["deriveKey"]);O=await C.subtle.deriveKey(F,U,{name:r,length:g},!0,["encrypt"])}catch{O=await C.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["encrypt"])}}else{const F={name:"PBKDF2",salt:D,iterations:E,hash:{name:x}},U=await C.subtle.importKey("raw",B,{name:"PBKDF2"},!1,["deriveKey"]);O=await C.subtle.deriveKey(F,U,{name:r,length:g},!0,["encrypt"])}const L=await C.subtle.encrypt(M,O,I);return concat([D,M.iv,new Uint8Array(L)])}async function R(I,B){const D=I.subarray(0,S),N=I.subarray(S,S+_),M=I.subarray(S+_),O={name:r,iv:N};typeof B=="string"&&(B=fromString(B));let L;if(B.length===0)try{const U={name:"PBKDF2",salt:D,iterations:E,hash:{name:x}},j=await C.subtle.importKey("raw",B,{name:"PBKDF2"},!1,["deriveKey"]);L=await C.subtle.deriveKey(U,j,{name:r,length:g},!0,["decrypt"])}catch{L=await C.subtle.importKey("jwk",derivedEmptyPasswordKey,{name:"AES-GCM"},!0,["decrypt"])}else{const U={name:"PBKDF2",salt:D,iterations:E,hash:{name:x}},j=await C.subtle.importKey("raw",B,{name:"PBKDF2"},!1,["deriveKey"]);L=await C.subtle.deriveKey(U,j,{name:r,length:g},!0,["decrypt"])}const F=await C.subtle.decrypt(O,L,M);return new Uint8Array(F)}return{encrypt:T,decrypt:R}}const SALT_LENGTH=16,KEY_SIZE=32,ITERATIONS=1e4;async function exporter(n,r){const _=await create().encrypt(n,r);return base64.encode(_)}async function exportPrivateKey(n,r,g){if(n.type==="RSA")return exportRSAPrivateKey(n,r,g);if(n.type==="Ed25519")return exportEd25519PrivateKey(n,r,g);if(n.type==="secp256k1")return exportSecp256k1PrivateKey(n,r,g);throw new UnsupportedKeyTypeError}async function exportEd25519PrivateKey(n,r,g="libp2p-key"){if(g==="libp2p-key")return exporter(privateKeyToProtobuf(n),r);throw new InvalidParametersError(`export format '${g}' is not supported`)}async function exportSecp256k1PrivateKey(n,r,g="libp2p-key"){if(g==="libp2p-key")return exporter(privateKeyToProtobuf(n),r);throw new InvalidParametersError("Export format is not supported")}async function exportRSAPrivateKey(n,r,g="pkcs-8"){if(g==="pkcs-8")return exportToPem(n,r);if(g==="libp2p-key")return exporter(privateKeyToProtobuf(n),r);throw new InvalidParametersError("Export format is not supported")}async function exportToPem(n,r){const g=webcrypto.get(),x=new Sequence({value:[new Integer({value:0}),new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.1.1.1"}),new Null]}),new OctetString({valueHex:n.raw})]}).toBER(),S=new Uint8Array(x,0,x.byteLength),E=randomBytes(SALT_LENGTH),C=await pbkdf2Async(sha512,r,E,{c:ITERATIONS,dkLen:KEY_SIZE}),T=randomBytes(16),R=await g.subtle.importKey("raw",C,"AES-CBC",!1,["encrypt"]),A=await g.subtle.encrypt({name:"AES-CBC",iv:T},R,S),I=new Sequence({value:[new OctetString({valueHex:E}),new Integer({value:ITERATIONS}),new Integer({value:KEY_SIZE}),new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.2.11"}),new Null]})]}),B=new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.1.5.13"}),new Sequence({value:[new Sequence({value:[new ObjectIdentifier({value:"1.2.840.113549.1.5.12"}),I]}),new Sequence({value:[new ObjectIdentifier({value:"2.16.840.1.101.3.4.1.42"}),new OctetString({valueHex:T})]})]})]}),N=new Sequence({value:[B,new OctetString({valueHex:A})]}).toBER(),M=new Uint8Array(N,0,N.byteLength);return["-----BEGIN ENCRYPTED PRIVATE KEY-----",...toString$3(M,"base64pad").split(/(.{64})/).filter(Boolean),"-----END ENCRYPTED PRIVATE KEY-----"].join(`
`)}async function importPrivateKey(n,r){try{const g=await importer(n,r);return privateKeyFromProtobuf(g)}catch{}if(!n.includes("BEGIN"))throw new InvalidParametersError("Encrypted key was not a libp2p-key or a PEM file");return importFromPem(n,r)}async function importer(n,r){const g=base64.decode(n);return create().decrypt(g,r)}async function importFromPem(n,r){const g=webcrypto.get();let _;if(n.includes("-----BEGIN ENCRYPTED PRIVATE KEY-----")){const S=fromString(n.replace("-----BEGIN ENCRYPTED PRIVATE KEY-----","").replace("-----END ENCRYPTED PRIVATE KEY-----","").replace(/\n/g,"").trim(),"base64pad"),{result:E}=fromBER(S),{iv:C,salt:T,iterations:R,keySize:A,cipherText:I}=findEncryptedPEMData(E),B=await pbkdf2Async(sha512,r,T,{c:R,dkLen:A}),D=await g.subtle.importKey("raw",B,"AES-CBC",!1,["decrypt"]),N=toUint8Array(await g.subtle.decrypt({name:"AES-CBC",iv:C},D,I)),{result:M}=fromBER(N);_=findPEMData(M)}else if(n.includes("-----BEGIN PRIVATE KEY-----")){const S=fromString(n.replace("-----BEGIN PRIVATE KEY-----","").replace("-----END PRIVATE KEY-----","").replace(/\n/g,"").trim(),"base64pad"),{result:E}=fromBER(S);_=findPEMData(E)}else throw new InvalidParametersError("Could not parse private key from PEM data");const x=privateKeyFromRaw(_);if(x.type!=="RSA")throw new InvalidParametersError("Could not parse RSA private key from PEM data");return x}function findEncryptedPEMData(n){const r=n.valueBlock.value[0];if(r.valueBlock.value[0].toString()!=="OBJECT IDENTIFIER : 1.2.840.113549.1.5.13")throw new InvalidParametersError("Only pkcs5PBES2 encrypted private keys are supported");const _=r.valueBlock.value[1].valueBlock.value[0];if(_.valueBlock.value[0].toString()!=="OBJECT IDENTIFIER : 1.2.840.113549.1.5.12")throw new InvalidParametersError("Only pkcs5PBKDF2 key derivation functions are supported");const S=_.valueBlock.value[1],E=toUint8Array(S.valueBlock.value[0].getValue());let C=ITERATIONS,T=KEY_SIZE;if(S.valueBlock.value.length===3)C=Number(S.valueBlock.value[1].toBigInt()),T=Number(S.valueBlock.value[2].toBigInt());else if(S.valueBlock.value.length===2)throw new InvalidParametersError("Could not derive key size and iterations from PEM file - please use @libp2p/rsa to re-import your key");const R=r.valueBlock.value[1].valueBlock.value[1],A=R.valueBlock.value[0].toString();if(A!=="OBJECT IDENTIFIER : 1.2.840.113549.3.7"){if(A!=="OBJECT IDENTIFIER : 1.3.14.3.2.7"){if(A!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.2"){if(A!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.22"){if(A!=="OBJECT IDENTIFIER : 2.16.840.1.101.3.4.1.42")throw new InvalidParametersError("Only AES-CBC encryption schemes are supported")}}}}const I=toUint8Array(R.valueBlock.value[1].getValue());return{cipherText:toUint8Array(n.valueBlock.value[1].getValue()),salt:E,iterations:C,keySize:T,iv:I}}function findPEMData(n){return toUint8Array(n.valueBlock.value[2].getValue())}function toUint8Array(n){return new Uint8Array(n,0,n.byteLength)}const keyPrefix="/pkcs8/",infoPrefix="/info/",privates=new WeakMap,NIST={minKeyLength:112/8,minSaltLength:128/8,minIterationCount:1e3},defaultOptions$3={dek:{keyLength:512/8,iterationCount:1e4,salt:"you should override this value with a crypto secure random number",hash:"sha2-512"}};function validateKeyName(n){return n==null||typeof n!="string"?!1:n===sanitize(n.trim())&&n.length>0}async function randomDelay(){const g=Math.random()*800+200;await new Promise(_=>setTimeout(_,g))}function DsName(n){return new Key(keyPrefix+n)}function DsInfoName(n){return new Key(infoPrefix+n)}async function keyId(n){const r=privateKeyToProtobuf(n),g=await sha256$8.digest(r);return base58btc$1.encode(g.bytes).substring(1)}class Keychain{components;init;log;constructor(r,g){if(this.components=r,this.log=r.logger.forComponent("libp2p:keychain"),this.init=mergeOptions$9(defaultOptions$3,g),this.init.pass!=null&&this.init.pass?.length<20)throw new Error("pass must be least 20 characters");if(this.init.dek?.keyLength!=null&&this.init.dek.keyLength<NIST.minKeyLength)throw new Error(`dek.keyLength must be least ${NIST.minKeyLength} bytes`);if(this.init.dek?.salt?.length!=null&&this.init.dek.salt.length<NIST.minSaltLength)throw new Error(`dek.saltLength must be least ${NIST.minSaltLength} bytes`);if(this.init.dek?.iterationCount!=null&&this.init.dek.iterationCount<NIST.minIterationCount)throw new Error(`dek.iterationCount must be least ${NIST.minIterationCount}`);const _=this.init.pass!=null&&this.init.dek?.salt!=null?pbkdf2(this.init.pass,this.init.dek?.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";privates.set(this,{dek:_})}[Symbol.toStringTag]="@libp2p/keychain";[serviceCapabilities]=["@libp2p/keychain"];static generateOptions(){const r=Object.assign({},defaultOptions$3),g=Math.ceil(NIST.minSaltLength/3)*3;return r.dek.salt=toString$3(randomBytes(g),"base64"),r}static get options(){return defaultOptions$3}async findKeyByName(r){if(!validateKeyName(r))throw await randomDelay(),new InvalidParametersError(`Invalid key name '${r}'`);const g=DsInfoName(r);try{const _=await this.components.datastore.get(g);return JSON.parse(toString$3(_))}catch(_){throw await randomDelay(),this.log.error(_),new NotFoundError$1(`Key '${r}' does not exist.`)}}async findKeyById(r){try{const g={prefix:infoPrefix};for await(const _ of this.components.datastore.query(g)){const x=JSON.parse(toString$3(_.value));if(x.id===r)return x}throw new InvalidParametersError(`Key with id '${r}' does not exist.`)}catch(g){throw await randomDelay(),g}}async importKey(r,g){if(!validateKeyName(r))throw await randomDelay(),new InvalidParametersError(`Invalid key name '${r}'`);if(g==null)throw await randomDelay(),new InvalidParametersError("Key is required");const _=DsName(r);if(await this.components.datastore.has(_))throw await randomDelay(),new InvalidParametersError(`Key '${r}' already exists`);let S,E;try{S=await keyId(g);const R=privates.get(this);if(R==null)throw new InvalidParametersError("dek missing");const A=R.dek;E=await exportPrivateKey(g,A,g.type==="RSA"?"pkcs-8":"libp2p-key")}catch(R){throw await randomDelay(),R}const C={name:r,id:S},T=this.components.datastore.batch();return T.put(_,fromString(E)),T.put(DsInfoName(r),fromString(JSON.stringify(C))),await T.commit(),C}async exportKey(r){if(!validateKeyName(r))throw await randomDelay(),new InvalidParametersError(`Invalid key name '${r}'`);const g=DsName(r);try{const _=await this.components.datastore.get(g),x=toString$3(_),S=privates.get(this);if(S==null)throw new InvalidParametersError("dek missing");const E=S.dek;return await importPrivateKey(x,E)}catch(_){throw await randomDelay(),_}}async removeKey(r){if(!validateKeyName(r)||r==="self")throw await randomDelay(),new InvalidParametersError(`Invalid key name '${r}'`);const g=DsName(r),_=await this.findKeyByName(r),x=this.components.datastore.batch();return x.delete(g),x.delete(DsInfoName(r)),await x.commit(),_}async listKeys(){const r={prefix:infoPrefix},g=[];for await(const _ of this.components.datastore.query(r))g.push(JSON.parse(toString$3(_.value)));return g}async renameKey(r,g){if(!validateKeyName(r)||r==="self")throw await randomDelay(),new InvalidParametersError(`Invalid old key name '${r}'`);if(!validateKeyName(g)||g==="self")throw await randomDelay(),new InvalidParametersError(`Invalid new key name '${g}'`);const _=DsName(r),x=DsName(g),S=DsInfoName(r),E=DsInfoName(g);if(await this.components.datastore.has(x))throw await randomDelay(),new InvalidParametersError(`Key '${g}' already exists`);try{const T=await this.components.datastore.get(_),R=await this.components.datastore.get(S),A=JSON.parse(toString$3(R));A.name=g;const I=this.components.datastore.batch();return I.put(x,T),I.put(E,fromString(JSON.stringify(A))),I.delete(_),I.delete(S),await I.commit(),A}catch(T){throw await randomDelay(),T}}async rotateKeychainPass(r,g){if(typeof r!="string")throw await randomDelay(),new InvalidParametersError(`Invalid old pass type '${typeof r}'`);if(typeof g!="string")throw await randomDelay(),new InvalidParametersError(`Invalid new pass type '${typeof g}'`);if(g.length<20)throw await randomDelay(),new InvalidParametersError(`Invalid pass length ${g.length}`);this.log("recreating keychain");const _=privates.get(this);if(_==null)throw new InvalidParametersError("dek missing");const x=_.dek;this.init.pass=g;const S=g!=null&&this.init.dek?.salt!=null?pbkdf2(g,this.init.dek.salt,this.init.dek?.iterationCount,this.init.dek?.keyLength,this.init.dek?.hash):"";privates.set(this,{dek:S});const E=await this.listKeys();for(const C of E){const T=await this.components.datastore.get(DsName(C.name)),R=toString$3(T),A=await importPrivateKey(R,x),I=S.toString(),B=await exportPrivateKey(A,I,A.type==="RSA"?"pkcs-8":"libp2p-key"),D=this.components.datastore.batch(),N={name:C.name,id:C.id};D.put(DsName(C.name),fromString(B)),D.put(DsInfoName(C.name),fromString(JSON.stringify(N))),await D.commit()}this.log("keychain reconstructed")}}function keychain(n={}){return r=>new Keychain(r,n)}class RateLimiter{memoryStorage;points;duration;blockDuration;execEvenly;execEvenlyMinDelayMs;keyPrefix;constructor(r={}){this.points=r.points??4,this.duration=r.duration??1,this.blockDuration=r.blockDuration??0,this.execEvenly=r.execEvenly??!1,this.execEvenlyMinDelayMs=r.execEvenlyMinDelayMs??this.duration*1e3/this.points,this.keyPrefix=r.keyPrefix??"rlflx",this.memoryStorage=new MemoryStorage}async consume(r,g=1,_={}){const x=this.getKey(r),S=this._getKeySecDuration(_);let E=this.memoryStorage.incrby(x,g,S);if(E.remainingPoints=Math.max(this.points-E.consumedPoints,0),E.consumedPoints>this.points)throw this.blockDuration>0&&E.consumedPoints<=this.points+g&&(E=this.memoryStorage.set(x,E.consumedPoints,this.blockDuration)),new RateLimitError("Rate limit exceeded",E);if(this.execEvenly&&E.msBeforeNext>0&&!E.isFirstInDuration){let C=Math.ceil(E.msBeforeNext/(E.remainingPoints+2));C<this.execEvenlyMinDelayMs&&(C=E.consumedPoints*this.execEvenlyMinDelayMs),await delay(C)}return E}penalty(r,g=1,_={}){const x=this.getKey(r),S=this._getKeySecDuration(_),E=this.memoryStorage.incrby(x,g,S);return E.remainingPoints=Math.max(this.points-E.consumedPoints,0),E}reward(r,g=1,_={}){const x=this.getKey(r),S=this._getKeySecDuration(_),E=this.memoryStorage.incrby(x,-g,S);return E.remainingPoints=Math.max(this.points-E.consumedPoints,0),E}block(r,g){const _=g*1e3,x=this.points+1;return this.memoryStorage.set(this.getKey(r),x,g),{remainingPoints:0,msBeforeNext:_===0?-1:_,consumedPoints:x,isFirstInDuration:!1}}set(r,g,_=0){const x=(_>=0?_:this.duration)*1e3;return this.memoryStorage.set(this.getKey(r),g,_),{remainingPoints:0,msBeforeNext:x===0?-1:x,consumedPoints:g,isFirstInDuration:!1}}get(r){const g=this.memoryStorage.get(this.getKey(r));return g!=null&&(g.remainingPoints=Math.max(this.points-g.consumedPoints,0)),g}delete(r){this.memoryStorage.delete(this.getKey(r))}_getKeySecDuration(r){return r?.customDuration!=null&&r.customDuration>=0?r.customDuration:this.duration}getKey(r){return this.keyPrefix.length>0?`${this.keyPrefix}:${r}`:r}parseKey(r){return r.substring(this.keyPrefix.length)}}class MemoryStorage{storage;constructor(){this.storage=new Map}incrby(r,g,_){const x=this.storage.get(r);if(x!=null){const S=x.expiresAt!=null?x.expiresAt.getTime()-new Date().getTime():-1;return x.expiresAt==null||S>0?(x.value+=g,{remainingPoints:0,msBeforeNext:S,consumedPoints:x.value,isFirstInDuration:!1}):this.set(r,g,_)}return this.set(r,g,_)}set(r,g,_){const x=_*1e3,S=this.storage.get(r);S!=null&&clearTimeout(S.timeoutId);const E={value:g,expiresAt:x>0?new Date(Date.now()+x):void 0};return this.storage.set(r,E),x>0&&(E.timeoutId=setTimeout(()=>{this.storage.delete(r)},x),E.timeoutId.unref!=null&&E.timeoutId.unref()),{remainingPoints:0,msBeforeNext:x===0?-1:x,consumedPoints:E.value,isFirstInDuration:!0}}get(r){const g=this.storage.get(r);if(g!=null)return{remainingPoints:0,msBeforeNext:g.expiresAt!=null?g.expiresAt.getTime()-new Date().getTime():-1,consumedPoints:g.value,isFirstInDuration:!1}}delete(r){const g=this.storage.get(r);return g!=null?(g.timeoutId!=null&&clearTimeout(g.timeoutId),this.storage.delete(r),!0):!1}}var MessageTypes;(function(n){n[n.NEW_STREAM=0]="NEW_STREAM",n[n.MESSAGE_RECEIVER=1]="MESSAGE_RECEIVER",n[n.MESSAGE_INITIATOR=2]="MESSAGE_INITIATOR",n[n.CLOSE_RECEIVER=3]="CLOSE_RECEIVER",n[n.CLOSE_INITIATOR=4]="CLOSE_INITIATOR",n[n.RESET_RECEIVER=5]="RESET_RECEIVER",n[n.RESET_INITIATOR=6]="RESET_INITIATOR"})(MessageTypes||(MessageTypes={}));const MessageTypeNames=Object.freeze({0:"NEW_STREAM",1:"MESSAGE_RECEIVER",2:"MESSAGE_INITIATOR",3:"CLOSE_RECEIVER",4:"CLOSE_INITIATOR",5:"RESET_RECEIVER",6:"RESET_INITIATOR"}),InitiatorMessageTypes=Object.freeze({NEW_STREAM:MessageTypes.NEW_STREAM,MESSAGE:MessageTypes.MESSAGE_INITIATOR,CLOSE:MessageTypes.CLOSE_INITIATOR,RESET:MessageTypes.RESET_INITIATOR}),ReceiverMessageTypes=Object.freeze({MESSAGE:MessageTypes.MESSAGE_RECEIVER,CLOSE:MessageTypes.CLOSE_RECEIVER,RESET:MessageTypes.RESET_RECEIVER}),MAX_MSG_SIZE=1<<20,MAX_MSG_QUEUE_SIZE=4<<20;let Decoder$1=class{_buffer;_headerInfo;_maxMessageSize;_maxUnprocessedMessageQueueSize;constructor(r=MAX_MSG_SIZE,g=MAX_MSG_QUEUE_SIZE){this._buffer=new Uint8ArrayList,this._headerInfo=null,this._maxMessageSize=r,this._maxUnprocessedMessageQueueSize=g}write(r){if(r==null||r.length===0)return[];if(this._buffer.append(r),this._buffer.byteLength>this._maxUnprocessedMessageQueueSize)throw new InvalidMessageError("Unprocessed message queue size too large!");const g=[];for(;this._buffer.length!==0;){if(this._headerInfo==null)try{this._headerInfo=this._decodeHeader(this._buffer)}catch(R){if(R.name==="InvalidMessageError")throw R;break}const{id:_,type:x,length:S,offset:E}=this._headerInfo;if(this._buffer.length-E<S)break;const T={id:_,type:x};(x===MessageTypes.NEW_STREAM||x===MessageTypes.MESSAGE_INITIATOR||x===MessageTypes.MESSAGE_RECEIVER)&&(T.data=this._buffer.sublist(E,E+S)),g.push(T),this._buffer.consume(E+S),this._headerInfo=null}return g}_decodeHeader(r){const{value:g,offset:_}=readVarInt(r),{value:x,offset:S}=readVarInt(r,_),E=g&7;if(MessageTypeNames[E]==null)throw new Error(`Invalid type received: ${E}`);if(x>this._maxMessageSize)throw new InvalidMessageError("Message size too large");return{id:g>>3,type:E,offset:_+S,length:x}}};const MSB=128,REST=127;function readVarInt(n,r=0){let g=0,_=0,x=r,S;const E=n.length;do{if(x>=E||_>49)throw r=0,new RangeError("Could not decode varint");S=n.get(x++),g+=_<28?(S&REST)<<_:(S&REST)*Math.pow(2,_),_+=7}while(S>=MSB);return r=x-r,{value:g,offset:r}}const POOL_SIZE=10*1024;let Encoder$1=class{_pool;_poolOffset;constructor(){this._pool=allocUnsafe(POOL_SIZE),this._poolOffset=0}write(r,g){const _=this._pool;let x=this._poolOffset;encode$d(r.id<<3|r.type,_,x),x+=encodingLength(r.id<<3|r.type),(r.type===MessageTypes.NEW_STREAM||r.type===MessageTypes.MESSAGE_INITIATOR||r.type===MessageTypes.MESSAGE_RECEIVER)&&r.data!=null?(encode$d(r.data.length,_,x),x+=encodingLength(r.data.length)):(encode$d(0,_,x),x+=encodingLength(0));const S=_.subarray(this._poolOffset,x);POOL_SIZE-x<100?(this._pool=allocUnsafe(POOL_SIZE),this._poolOffset=0):this._poolOffset=x,g.append(S),(r.type===MessageTypes.NEW_STREAM||r.type===MessageTypes.MESSAGE_INITIATOR||r.type===MessageTypes.MESSAGE_RECEIVER)&&r.data!=null&&g.append(r.data)}};const encoder=new Encoder$1;async function*encode$1(n){for await(const r of n){const g=new Uint8ArrayList;encoder.write(r,g),yield g}}class StreamInputBufferError extends Error{constructor(r="Stream input buffer error"){super(r),this.name="StreamInputBufferError"}}class MplexStream extends AbstractStream{name;streamId;send;types;maxDataSize;constructor(r){super(r),this.types=r.direction==="outbound"?InitiatorMessageTypes:ReceiverMessageTypes,this.send=r.send,this.name=r.name,this.streamId=r.streamId,this.maxDataSize=r.maxDataSize}async sendNewStream(){await this.send({id:this.streamId,type:InitiatorMessageTypes.NEW_STREAM,data:new Uint8ArrayList(fromString(this.name))})}async sendData(r){for(r=r.sublist();r.byteLength>0;){const g=Math.min(r.byteLength,this.maxDataSize);await this.send({id:this.streamId,type:this.types.MESSAGE,data:r.sublist(0,g)}),r.consume(g)}}async sendReset(){await this.send({id:this.streamId,type:this.types.RESET})}async sendCloseWrite(){await this.send({id:this.streamId,type:this.types.CLOSE})}async sendCloseRead(){}}function createStream$1(n){const{id:r,name:g,send:_,onEnd:x,type:S="initiator",maxMsgSize:E=MAX_MSG_SIZE}=n;return new MplexStream({id:S==="initiator"?`i${r}`:`r${r}`,streamId:r,name:`${g??r}`,direction:S==="initiator"?"outbound":"inbound",maxDataSize:E,onEnd:x,send:_,log:n.logger.forComponent(`libp2p:mplex:stream:${S}:${r}`)})}const MAX_STREAMS_INBOUND_STREAMS_PER_CONNECTION=1024,MAX_STREAMS_OUTBOUND_STREAMS_PER_CONNECTION=1024,MAX_STREAM_BUFFER_SIZE=1024*1024*4,DISCONNECT_THRESHOLD=5,CLOSE_TIMEOUT$2=500;function printMessage(n){const r={...n,type:`${MessageTypeNames[n.type]} (${n.type})`};return n.type===MessageTypes.NEW_STREAM&&(r.data=toString$3(n.data instanceof Uint8Array?n.data:n.data.subarray())),(n.type===MessageTypes.MESSAGE_INITIATOR||n.type===MessageTypes.MESSAGE_RECEIVER)&&(r.data=toString$3(n.data instanceof Uint8Array?n.data:n.data.subarray(),"base16")),r}class MplexStreamMuxer{protocol="/mplex/6.7.0";sink;source;log;_streamId;_streams;_init;_source;closeController;rateLimiter;closeTimeout;logger;constructor(r,g){g=g??{},this.log=r.logger.forComponent("libp2p:mplex"),this.logger=r.logger,this._streamId=0,this._streams={initiators:new Map,receivers:new Map},this._init=g,this.closeTimeout=g.closeTimeout??CLOSE_TIMEOUT$2,this.sink=this._createSink(),this._source=pushable({objectMode:!0,onEnd:()=>{for(const _ of this._streams.initiators.values())_.destroy();for(const _ of this._streams.receivers.values())_.destroy()}}),this.source=pipe(this._source,_=>encode$1(_)),this.closeController=new AbortController,this.rateLimiter=new RateLimiter({points:g.disconnectThreshold??DISCONNECT_THRESHOLD,duration:1})}get streams(){const r=[];for(const g of this._streams.initiators.values())r.push(g);for(const g of this._streams.receivers.values())r.push(g);return r}newStream(r){if(this.closeController.signal.aborted)throw new MuxerClosedError("Muxer already closed");const g=this._streamId++;r=r==null?g.toString():r.toString();const _=this._streams.initiators;return this._newStream({id:g,name:r,type:"initiator",registry:_})}async close(r){if(this.closeController.signal.aborted)return;const g=r?.signal??AbortSignal.timeout(this.closeTimeout);try{await Promise.all(this.streams.map(async _=>_.close({signal:g}))),this._source.end(),await this._source.onEmpty({signal:g}),this.closeController.abort()}catch(_){this.abort(_)}}abort(r){this.closeController.signal.aborted||(this.streams.forEach(g=>{g.abort(r)}),this.closeController.abort(r))}_newReceiverStream(r){const{id:g,name:_}=r,x=this._streams.receivers;return this._newStream({id:g,name:_,type:"receiver",registry:x})}_newStream(r){const{id:g,name:_,type:x,registry:S}=r;if(this.log("new %s stream %s",x,g),x==="initiator"&&this._streams.initiators.size===(this._init.maxOutboundStreams??MAX_STREAMS_OUTBOUND_STREAMS_PER_CONNECTION))throw new TooManyOutboundProtocolStreamsError("Too many outbound streams open");if(S.has(g))throw new Error(`${x} stream ${g} already exists!`);const T=createStream$1({id:g,name:_,send:async R=>{this.log.enabled&&this.log.trace("%s stream %s send",x,g,printMessage(R)),this._source.push(R)},type:x,onEnd:()=>{this.log("%s stream with id %s and protocol %s ended",x,g,T.protocol),S.delete(g),this._init.onStreamEnd!=null&&this._init.onStreamEnd(T)},maxMsgSize:this._init.maxMsgSize,logger:this.logger});return S.set(g,T),T}_createSink(){return async g=>{const _=()=>{closeSource(g,this.log)};this.closeController.signal.addEventListener("abort",_);try{const x=new Decoder$1(this._init.maxMsgSize,this._init.maxUnprocessedMessageQueueSize);for await(const S of g)for(const E of x.write(S))await this._handleIncoming(E);this._source.end()}catch(x){this.log("error in sink",x),this._source.end(x)}finally{this.closeController.signal.removeEventListener("abort",_)}}}async _handleIncoming(r){const{id:g,type:_}=r;if(this.log.enabled&&this.log.trace("incoming message",printMessage(r)),r.type===MessageTypes.NEW_STREAM){if(this._streams.receivers.size===(this._init.maxInboundStreams??MAX_STREAMS_INBOUND_STREAMS_PER_CONNECTION)){this.log("too many inbound streams open"),this._source.push({id:g,type:MessageTypes.RESET_RECEIVER});try{await this.rateLimiter.consume("new-stream",1)}catch{this.log("rate limit hit when opening too many new streams over the inbound stream limit - closing remote connection"),this.abort(new Error("Too many open streams"));return}return}const C=this._newReceiverStream({id:g,name:toString$3(r.data instanceof Uint8Array?r.data:r.data.subarray())});this._init.onIncomingStream!=null&&this._init.onIncomingStream(C);return}const S=((_&1)===1?this._streams.initiators:this._streams.receivers).get(g);if(S==null){this.log("missing stream %s for message type %s",g,MessageTypeNames[_]);try{await this.rateLimiter.consume("missing-stream",1)}catch{this.log("rate limit hit when receiving messages for streams that do not exist - closing remote connection"),this.abort(new Error("Too many messages for missing streams"));return}return}const E=this._init.maxStreamBufferSize??MAX_STREAM_BUFFER_SIZE;try{switch(_){case MessageTypes.MESSAGE_INITIATOR:case MessageTypes.MESSAGE_RECEIVER:if(S.sourceReadableLength()>E)throw this._source.push({id:r.id,type:_===MessageTypes.MESSAGE_INITIATOR?MessageTypes.RESET_RECEIVER:MessageTypes.RESET_INITIATOR}),new StreamInputBufferError("Input buffer full - increase Mplex maxBufferSize to accommodate slow consumers");S.sourcePush(r.data);break;case MessageTypes.CLOSE_INITIATOR:case MessageTypes.CLOSE_RECEIVER:S.remoteCloseWrite();break;case MessageTypes.RESET_INITIATOR:case MessageTypes.RESET_RECEIVER:S.reset();break;default:this.log("unknown message type %s",_)}}catch(C){this.log.error("error while processing message",C),S.abort(C)}}}class Mplex{protocol="/mplex/6.7.0";_init;components;constructor(r,g={}){this.components=r,this._init=g}[Symbol.toStringTag]="@libp2p/mplex";[serviceCapabilities]=["@libp2p/stream-multiplexing"];createStreamMuxer(r={}){return new MplexStreamMuxer(this.components,{...r,...this._init})}}function mplex(n={}){return r=>new Mplex(r,n)}const PING_LENGTH$1=32,PROTOCOL_VERSION$1="1.0.0",PROTOCOL_NAME$1="ping",PROTOCOL_PREFIX$1="ipfs",TIMEOUT=1e4,MAX_INBOUND_STREAMS=2,MAX_OUTBOUND_STREAMS=1;class PingService{protocol;components;started;timeout;maxInboundStreams;maxOutboundStreams;runOnLimitedConnection;log;constructor(r,g={}){this.components=r,this.log=r.logger.forComponent("libp2p:ping"),this.started=!1,this.protocol=`/${g.protocolPrefix??PROTOCOL_PREFIX$1}/${PROTOCOL_NAME$1}/${PROTOCOL_VERSION$1}`,this.timeout=g.timeout??TIMEOUT,this.maxInboundStreams=g.maxInboundStreams??MAX_INBOUND_STREAMS,this.maxOutboundStreams=g.maxOutboundStreams??MAX_OUTBOUND_STREAMS,this.runOnLimitedConnection=g.runOnLimitedConnection??!0,this.handleMessage=this.handleMessage.bind(this)}[Symbol.toStringTag]="@libp2p/ping";async start(){await this.components.registrar.handle(this.protocol,this.handleMessage,{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection}),this.started=!0}async stop(){await this.components.registrar.unhandle(this.protocol),this.started=!1}isStarted(){return this.started}handleMessage(r){this.log("incoming ping from %p",r.connection.remotePeer);const{stream:g}=r,_=Date.now(),x=byteStream(g);let S=!1;Promise.resolve().then(async()=>{for(;;){const E=AbortSignal.timeout(this.timeout);setMaxListeners(1/0,E),E.addEventListener("abort",()=>{g?.abort(new TimeoutError("ping timeout"))});const C=await x.read(PING_LENGTH$1,{signal:E});await x.write(C,{signal:E}),S=!0}}).catch(E=>{S&&E.name==="UnexpectedEOFError"&&g.readStatus!=="ready"||(this.log.error("incoming ping from %p failed with error - %e",r.connection.remotePeer,E),g?.abort(E))}).finally(()=>{const E=Date.now()-_;this.log("incoming ping from %p complete in %dms",r.connection.remotePeer,E);const C=AbortSignal.timeout(this.timeout);setMaxListeners(1/0,C),g.close({signal:C}).catch(T=>{this.log.error("error closing ping stream from %p - %e",r.connection.remotePeer,T),g?.abort(T)})})}async ping(r,g={}){this.log("pinging %p",r);const _=Date.now(),x=randomBytes(PING_LENGTH$1),S=await this.components.connectionManager.openConnection(r,g);let E;if(g.signal==null){const C=AbortSignal.timeout(this.timeout);g={...g,signal:C}}try{E=await S.newStream(this.protocol,{...g,runOnLimitedConnection:this.runOnLimitedConnection});const C=byteStream(E),[,T]=await Promise.all([C.write(x,g),C.read(PING_LENGTH$1,g)]),R=Date.now()-_;if(!equals$1(x,T.subarray()))throw new ProtocolError(`Received wrong ping ack after ${R}ms`);return this.log("ping %p complete in %dms",S.remotePeer,R),R}catch(C){throw this.log.error("error while pinging %p",S.remotePeer,C),E?.abort(C),C}finally{E!=null&&await E.close(g)}}}function ping(n={}){return r=>new PingService(r,n)}var __spreadArray=function(n,r,g){if(g||arguments.length===2)for(var _=0,x=r.length,S;_<x;_++)(S||!(_ in r))&&(S||(S=Array.prototype.slice.call(r,0,_)),S[_]=r[_]);return n.concat(S||Array.prototype.slice.call(r))},BrowserInfo=function(){function n(r,g,_){this.name=r,this.version=g,this.os=_,this.type="browser"}return n}(),NodeInfo=function(){function n(r){this.version=r,this.type="node",this.name="node",this.os=process$1.platform}return n}(),SearchBotDeviceInfo=function(){function n(r,g,_,x){this.name=r,this.version=g,this.os=_,this.bot=x,this.type="bot-device"}return n}(),BotInfo=function(){function n(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return n}(),ReactNativeInfo=function(){function n(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return n}(),SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(n){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo:typeof navigator<"u"?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(n){return n!==""&&userAgentRules.reduce(function(r,g){var _=g[0],x=g[1];if(r)return r;var S=x.exec(n);return!!S&&[_,S]},!1)}function parseUserAgent(n){var r=matchUserAgent(n);if(!r)return null;var g=r[0],_=r[1];if(g==="searchbot")return new BotInfo;var x=_[1]&&_[1].split(".").join("_").split("_").slice(0,3);x?x.length<REQUIRED_VERSION_PARTS&&(x=__spreadArray(__spreadArray([],x,!0),createVersionParts(REQUIRED_VERSION_PARTS-x.length),!0)):x=[];var S=x.join("."),E=detectOS(n),C=SEARCHBOT_OS_REGEX.exec(n);return C&&C[1]?new SearchBotDeviceInfo(g,S,E,C[1]):new BrowserInfo(g,S,E)}function detectOS(n){for(var r=0,g=operatingSystemRules.length;r<g;r++){var _=operatingSystemRules[r],x=_[0],S=_[1],E=S.exec(n);if(E)return x}return null}function getNodeVersion(){var n=typeof process$1<"u"&&process$1.version;return n?new NodeInfo(process$1.version.slice(1)):null}function createVersionParts(n){for(var r=[],g=0;g<n;g++)r.push("0");return r}const DEFAULT_ICE_SERVERS=["stun:stun.l.google.com:19302","stun:global.stun.twilio.com:3478","stun:stun.cloudflare.com:3478","stun:stun.services.mozilla.com:3478"],browser=detect(),isFirefox=browser!=null&&browser.name==="firefox",nopSource=async function*n(){},nopSink=async n=>{},DATA_CHANNEL_DRAIN_TIMEOUT=30*1e3;function drainAndClose(n,r,g=DATA_CHANNEL_DRAIN_TIMEOUT,_){n.readyState==="open"&&Promise.resolve().then(async()=>{if(n.bufferedAmount>0){_.log("%s drain channel with %d buffered bytes",r,n.bufferedAmount);const x=pDefer();let S=!1;n.bufferedAmountLowThreshold=0;const E=()=>{S||(_.log("%s drain channel closed before drain",r),x.resolve())};n.addEventListener("close",E,{once:!0}),n.addEventListener("bufferedamountlow",()=>{S=!0,n.removeEventListener("close",E),x.resolve()}),await pTimeout(x.promise,{milliseconds:g})}}).then(async()=>{n.readyState==="open"&&n.close()}).catch(x=>{_.log.error("error closing outbound stream",x)})}async function getRtcConfiguration(n){return n=n??{},typeof n=="function"&&(n=await n()),n.iceServers=n.iceServers??DEFAULT_ICE_SERVERS.map(r=>({urls:[r]})),n}class WebRTCMultiaddrConnection{log;peerConnection;remoteAddr;timeline;metrics;source=nopSource();sink=nopSink;constructor(r,g){this.log=r.logger.forComponent("libp2p:webrtc:maconn"),this.remoteAddr=g.remoteAddr,this.timeline=g.timeline,this.peerConnection=g.peerConnection;const _=this.peerConnection.connectionState;this.peerConnection.onconnectionstatechange=()=>{this.log.trace("peer connection state change",this.peerConnection.connectionState,"initial state",_),(this.peerConnection.connectionState==="disconnected"||this.peerConnection.connectionState==="failed"||this.peerConnection.connectionState==="closed")&&(this.timeline.close=Date.now())}}async close(r){this.log.trace("closing connection"),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({close:!0})}abort(r){this.log.error("closing connection due to error",r),this.peerConnection.close(),this.timeline.close=Date.now(),this.metrics?.increment({abort:!0})}}var Message$1;(function(n){(function(_){_.FIN="FIN",_.STOP_SENDING="STOP_SENDING",_.RESET="RESET",_.FIN_ACK="FIN_ACK"})(n.Flag||(n.Flag={}));let r;(function(_){_[_.FIN=0]="FIN",_[_.STOP_SENDING=1]="STOP_SENDING",_[_.RESET=2]="RESET",_[_.FIN_ACK=3]="FIN_ACK"})(r||(r={})),function(_){_.codec=()=>enumeration(r)}(n.Flag||(n.Flag={}));let g;n.codec=()=>(g==null&&(g=message((_,x,S={})=>{S.lengthDelimited!==!1&&x.fork(),_.flag!=null&&(x.uint32(8),n.Flag.codec().encode(_.flag,x)),_.message!=null&&(x.uint32(18),x.bytes(_.message)),S.lengthDelimited!==!1&&x.ldelim()},(_,x,S={})=>{const E={},C=x==null?_.len:_.pos+x;for(;_.pos<C;){const T=_.uint32();switch(T>>>3){case 1:{E.flag=n.Flag.codec().decode(_);break}case 2:{E.message=_.bytes();break}default:{_.skipType(T&7);break}}}return E})),g),n.encode=_=>encodeMessage(_,n.codec()),n.decode=(_,x)=>decodeMessage(_,n.codec(),x)})(Message$1||(Message$1={}));const MAX_BUFFERED_AMOUNT=2*1024*1024,BUFFERED_AMOUNT_LOW_TIMEOUT=30*1e3,MAX_MESSAGE_SIZE=16*1024;function calculateProtobufOverhead(n=MAX_MESSAGE_SIZE){const r=encodingLength(n-encodingLength(n)),g=1+encodingLength(Object.keys(Message$1.Flag).length-1),_=1,x=n-r-g-_,S=encodingLength(x);return r+g+_+S}const PROTOBUF_OVERHEAD=calculateProtobufOverhead(),FIN_ACK_TIMEOUT=5e3,OPEN_TIMEOUT=5e3;class WebRTCStream extends AbstractStream{channel;incomingData;maxBufferedAmount;bufferedAmountLowEventTimeout;maxMessageSize;receiveFinAck;finAckTimeout;openTimeout;constructor(r){const g=r.onEnd;switch(r.onEnd=x=>{this.log.trace("readable and writeable ends closed",this.status),Promise.resolve(async()=>{if(!(this.timeline.abort!=null||this.timeline.reset!==null))try{await pTimeout(this.receiveFinAck.promise,{milliseconds:this.finAckTimeout})}catch(S){this.log.error("error receiving FIN_ACK",S)}}).then(()=>{this.incomingData.end(),g?.(x)}).catch(S=>{this.log.error("error ending stream",S)})},super(r),this.channel=r.channel,this.channel.binaryType="arraybuffer",this.incomingData=pushable(),this.bufferedAmountLowEventTimeout=r.bufferedAmountLowEventTimeout??BUFFERED_AMOUNT_LOW_TIMEOUT,this.maxBufferedAmount=r.maxBufferedAmount??MAX_BUFFERED_AMOUNT,this.maxMessageSize=(r.maxMessageSize??MAX_MESSAGE_SIZE)-PROTOBUF_OVERHEAD,this.receiveFinAck=pDefer(),this.finAckTimeout=r.closeTimeout??FIN_ACK_TIMEOUT,this.openTimeout=r.openTimeout??OPEN_TIMEOUT,this.channel.readyState){case"open":this.timeline.open=new Date().getTime();break;case"closed":case"closing":(this.timeline.close===void 0||this.timeline.close===0)&&(this.timeline.close=Date.now());break;case"connecting":break;default:throw this.log.error("unknown datachannel state %s",this.channel.readyState),new StreamStateError("Unknown datachannel state")}this.channel.onopen=x=>{this.timeline.open=new Date().getTime()},this.channel.onclose=x=>{this.receiveFinAck.resolve(),this.close().catch(S=>{this.log.error("error closing stream after channel closed",S)})},this.channel.onerror=x=>{const S=x.error;this.abort(S)},this.channel.onmessage=async x=>{const{data:S}=x;S===null||S.byteLength===0||this.incomingData.push(new Uint8Array(S,0,S.byteLength))};const _=this;Promise.resolve().then(async()=>{for await(const x of decode$2(this.incomingData)){const S=_.processIncomingProtobuf(x);S!=null&&_.sourcePush(new Uint8ArrayList(S))}}).catch(x=>{this.log.error("error processing incoming data channel messages",x)})}sendNewStream(){}async _sendMessage(r,g=!0){if(g&&this.channel.bufferedAmount>this.maxBufferedAmount)try{this.log('channel buffer is %d, wait for "bufferedamountlow" event',this.channel.bufferedAmount),await pEvent(this.channel,"bufferedamountlow",{timeout:this.bufferedAmountLowEventTimeout})}catch(_){throw _ instanceof TimeoutError?new TimeoutError(`Timed out waiting for DataChannel buffer to clear after ${this.bufferedAmountLowEventTimeout}ms`):_}if(this.channel.readyState==="closed"||this.channel.readyState==="closing")throw new StreamStateError(`Invalid datachannel state - ${this.channel.readyState}`);this.channel.readyState!=="open"&&(this.log('channel state is "%s" and not "open", waiting for "open" event before sending data',this.channel.readyState),await pEvent(this.channel,"open",{timeout:this.openTimeout}),this.log('channel state is now "%s", sending data',this.channel.readyState)),this.channel.send(r.subarray())}async sendData(r){for(r=r.sublist();r.byteLength>0;){const g=Math.min(r.byteLength,this.maxMessageSize),_=r.subarray(0,g),x=Message$1.encode({message:_}),S=encode$2.single(x);await this._sendMessage(S),r.consume(g)}}async sendReset(){try{await this._sendFlag(Message$1.Flag.RESET)}catch(r){this.log.error("failed to send reset - %e",r)}}async sendCloseWrite(r){if(await this._sendFlag(Message$1.Flag.FIN)){this.log.trace("awaiting FIN_ACK");try{await raceSignal(this.receiveFinAck.promise,r?.signal,{errorMessage:"sending close-write was aborted before FIN_ACK was received",errorName:"FinAckNotReceivedError"})}catch(_){this.log.error("failed to await FIN_ACK",_)}}else this.log.trace("sending FIN failed, not awaiting FIN_ACK");this.receiveFinAck.resolve()}async sendCloseRead(){await this._sendFlag(Message$1.Flag.STOP_SENDING)}processIncomingProtobuf(r){const g=Message$1.decode(r);if(g.flag!==void 0&&(this.log.trace('incoming flag %s, write status "%s", read status "%s"',g.flag,this.writeStatus,this.readStatus),g.flag===Message$1.Flag.FIN&&(this.remoteCloseWrite(),this.log.trace("sending FIN_ACK"),this._sendFlag(Message$1.Flag.FIN_ACK).catch(_=>{this.log.error("error sending FIN_ACK immediately",_)})),g.flag===Message$1.Flag.RESET&&this.reset(),g.flag===Message$1.Flag.STOP_SENDING&&this.remoteCloseRead(),g.flag===Message$1.Flag.FIN_ACK&&(this.log.trace("received FIN_ACK"),this.receiveFinAck.resolve())),this.readStatus==="ready")return g.message}async _sendFlag(r){if(this.channel.readyState!=="open")return this.log.trace('not sending flag %s because channel is "%s" and not "open"',this.channel.readyState,r.toString()),!1;this.log.trace("sending flag %s",r.toString());const g=Message$1.encode({flag:r}),_=encode$2.single(g);try{return await this._sendMessage(_,!1),!0}catch(x){this.log.error("could not send flag %s - %e",r.toString(),x)}return!1}}function createStream(n){const{channel:r,direction:g}=n;return new WebRTCStream({id:g==="inbound"?`i${r.id}`:`r${r.id}`,log:n.logger.forComponent(`libp2p:webrtc:stream:${g}:${r.id}`),...n})}const PROTOCOL="/webrtc";class DataChannelMuxerFactory{protocol;peerConnection;bufferedStreams=[];metrics;dataChannelOptions;components;log;constructor(r,g){this.components=r,this.peerConnection=g.peerConnection,this.metrics=g.metrics,this.protocol=g.protocol??PROTOCOL,this.dataChannelOptions=g.dataChannelOptions??{},this.log=r.logger.forComponent("libp2p:webrtc:datachannelmuxerfactory"),this.peerConnection.ondatachannel=({channel:_})=>{if(this.log.trace('incoming early datachannel with channel id %d and label "%s"',_.id),_.label==="init"){this.log.trace("closing early init channel"),_.close();return}const x={},S=createStream({channel:_,direction:"inbound",onEnd:E=>{x.onEnd(E)},logger:r.logger,...this.dataChannelOptions});x.stream=S,x.channel=_,x.onEnd=()=>{this.bufferedStreams=this.bufferedStreams.filter(E=>E.stream.id!==S.id)},this.bufferedStreams.push(x)}}createStreamMuxer(r){return new DataChannelMuxer(this.components,{...r,peerConnection:this.peerConnection,dataChannelOptions:this.dataChannelOptions,metrics:this.metrics,streams:this.bufferedStreams,protocol:this.protocol})}}class DataChannelMuxer{init;streams;protocol;log;peerConnection;dataChannelOptions;metrics;logger;constructor(r,g){this.init=g,this.log=r.logger.forComponent("libp2p:webrtc:muxer"),this.logger=r.logger,this.streams=g.streams.map(_=>_.stream),this.peerConnection=g.peerConnection,this.protocol=g.protocol??PROTOCOL,this.metrics=g.metrics,this.dataChannelOptions=g.dataChannelOptions??{},this.peerConnection.ondatachannel=({channel:_})=>{if(this.log.trace("incoming datachannel with channel id %d",_.id),_.label==="init"){this.log.trace("closing init channel"),_.close();return}const x=_.id,S=createStream({channel:_,direction:"inbound",onEnd:()=>{this.#e(S,_),this.log("incoming channel %s ended",x)},logger:this.logger,...this.dataChannelOptions});this.streams.push(S),this.metrics?.increment({incoming_stream:!0}),g?.onIncomingStream?.(S)},this.init.streams.length>0&&queueMicrotask(()=>{this.init.streams.forEach(_=>{_.onEnd=()=>{this.log("incoming early channel %s ended with state %s",_.channel.id,_.channel.readyState),this.#e(_.stream,_.channel)},this.metrics?.increment({incoming_stream:!0}),this.init?.onIncomingStream?.(_.stream)})})}#e(r,g){this.log.trace("stream %s %s %s onEnd",r.direction,r.id,r.protocol),drainAndClose(g,`${r.direction} ${r.id} ${r.protocol}`,this.dataChannelOptions.drainTimeout,{log:this.log}),this.streams=this.streams.filter(_=>_.id!==r.id),this.metrics?.increment({stream_end:!0}),this.init?.onStreamEnd?.(r)}async close(r){try{await Promise.all(this.streams.map(async g=>g.close(r)))}catch(g){this.abort(g)}}abort(r){for(const g of this.streams)g.abort(r)}source=nopSource();sink=nopSink;newStream(){const r=this.peerConnection.createDataChannel(""),g=r.id;this.log.trace("opened outgoing datachannel with channel id %s",g);const _=createStream({channel:r,direction:"outbound",onEnd:()=>{this.#e(_,r),this.log("outgoing channel %s ended",g)},logger:this.logger,...this.dataChannelOptions});return this.streams.push(_),this.metrics?.increment({outgoing_stream:!0}),_}}const RTCPeerConnection=globalThis.RTCPeerConnection,RTCSessionDescription=globalThis.RTCSessionDescription,RTCIceCandidate=globalThis.RTCIceCandidate;class WebRTCTransportError extends Error{constructor(r){super(`WebRTC transport error: ${r}`),this.name="WebRTCTransportError"}}class SDPHandshakeFailedError extends WebRTCTransportError{constructor(r="SDP handshake failed"){super(r),this.name="SDPHandshakeFailedError"}}class DataChannelError extends WebRTCTransportError{constructor(r,g){super(`[stream: ${r}] data channel error: ${g}`),this.name="WebRTC/DataChannelError"}}class InvalidFingerprintError extends WebRTCTransportError{constructor(r,g){super(`Invalid fingerprint "${r}" within ${g}`),this.name="WebRTC/InvalidFingerprintError"}}class UnimplementedError extends WebRTCTransportError{constructor(r){super(`A method (${r}) was called though it has been intentionally left unimplemented.`),this.name="WebRTC/UnimplementedError"}}class UnsupportedHashAlgorithmError extends WebRTCTransportError{constructor(r){super(`unsupported hash algorithm code: ${r} please see the codes at https://github.com/multiformats/multicodec/blob/master/table.csv `),this.name="WebRTC/UnsupportedHashAlgorithmError"}}var Message;(function(n){(function(_){_.SDP_OFFER="SDP_OFFER",_.SDP_ANSWER="SDP_ANSWER",_.ICE_CANDIDATE="ICE_CANDIDATE"})(n.Type||(n.Type={}));let r;(function(_){_[_.SDP_OFFER=0]="SDP_OFFER",_[_.SDP_ANSWER=1]="SDP_ANSWER",_[_.ICE_CANDIDATE=2]="ICE_CANDIDATE"})(r||(r={})),function(_){_.codec=()=>enumeration(r)}(n.Type||(n.Type={}));let g;n.codec=()=>(g==null&&(g=message((_,x,S={})=>{S.lengthDelimited!==!1&&x.fork(),_.type!=null&&(x.uint32(8),n.Type.codec().encode(_.type,x)),_.data!=null&&(x.uint32(18),x.string(_.data)),S.lengthDelimited!==!1&&x.ldelim()},(_,x,S={})=>{const E={},C=x==null?_.len:_.pos+x;for(;_.pos<C;){const T=_.uint32();switch(T>>>3){case 1:{E.type=n.Type.codec().decode(_);break}case 2:{E.data=_.string();break}default:{_.skipType(T&7);break}}}return E})),g),n.encode=_=>encodeMessage(_,n.codec()),n.decode=(_,x)=>decodeMessage(_,n.codec(),x)})(Message||(Message={}));const readCandidatesUntilConnected=async(n,r,g)=>{try{const _=pDefer();for(resolveOnConnected(n,_);;){const x=await Promise.race([_.promise,r.read({signal:g.signal}).catch(()=>{})]);if(x==null){g.signal?.throwIfAborted();break}if(x.type!==Message.Type.ICE_CANDIDATE)throw new InvalidMessageError("ICE candidate message expected");const S=JSON.parse(x.data??"null");if(S===""||S===null){g.onProgress?.(new CustomProgressEvent("webrtc:end-of-ice-candidates")),g.log.trace("end-of-candidates received");continue}const E=new RTCIceCandidate(S);g.log.trace("%s received new ICE candidate %o",g.direction,S);try{g.onProgress?.(new CustomProgressEvent("webrtc:add-ice-candidate",E.candidate)),await n.addIceCandidate(E)}catch(C){g.log.error("%s bad candidate received",g.direction,S,C)}}}catch(_){if(g.log.error("%s error parsing ICE candidate",g.direction,_),g.signal?.aborted===!0&&getConnectionState(n)!=="connected")throw _}};function getConnectionState(n){return isFirefox?n.iceConnectionState:n.connectionState}function resolveOnConnected(n,r){n[isFirefox?"oniceconnectionstatechange":"onconnectionstatechange"]=g=>{switch(getConnectionState(n)){case"connected":r.resolve();break;case"failed":case"disconnected":case"closed":r.reject(new ConnectionFailedError("RTCPeerConnection was closed"));break}}}async function initiateConnection({rtcConfiguration:n,dataChannel:r,signal:g,metrics:_,multiaddr:x,connectionManager:S,transportManager:E,log:C,logger:T,onProgress:R}){const{baseAddr:A}=splitAddr(x);_?.dialerEvents.increment({open:!0}),C.trace("dialing base address: %a",A);const I=A.getPeerId();if(I==null)throw new InvalidParametersError("Relay peer was missing");const B=S.getConnections(peerIdFromString$1(I));let D,N=!1;B.length===0?(R?.(new CustomProgressEvent("webrtc:dial-relay")),D=await E.dial(A,{signal:g,onProgress:R}),N=!0):(R?.(new CustomProgressEvent("webrtc:reuse-relay-connection")),D=B[0]);try{R?.(new CustomProgressEvent("webrtc:open-signaling-stream"));const M=await D.newStream(SIGNALING_PROTO_ID,{signal:g,runOnLimitedConnection:!0}),O=pbStream(M).pb(Message),L=new RTCPeerConnection(n),F=new DataChannelMuxerFactory({logger:T},{peerConnection:L,dataChannelOptions:r});try{const U=L.createDataChannel("init");L.onicecandidate=({candidate:X})=>{const ie=JSON.stringify(X?.toJSON()??null);C.trace("initiator sending ICE candidate %o",X),O.write({type:Message.Type.ICE_CANDIDATE,data:ie},{signal:g}).catch(fe=>{C.error("error sending ICE candidate",fe)})},L.onicecandidateerror=X=>{C.error("initiator ICE candidate error",X)};const j=await L.createOffer().catch(X=>{throw C.error("could not execute createOffer",X),new SDPHandshakeFailedError("Failed to set createOffer")});C.trace("initiator send SDP offer %s",j.sdp),R?.(new CustomProgressEvent("webrtc:send-sdp-offer")),await O.write({type:Message.Type.SDP_OFFER,data:j.sdp},{signal:g}),await L.setLocalDescription(j).catch(X=>{throw C.error("could not execute setLocalDescription",X),new SDPHandshakeFailedError("Failed to set localDescription")}),R?.(new CustomProgressEvent("webrtc:read-sdp-answer")),C.trace("initiator read SDP answer");const z=await O.read({signal:g});if(z.type!==Message.Type.SDP_ANSWER)throw new SDPHandshakeFailedError("Remote should send an SDP answer");C.trace("initiator received SDP answer %s",z.data);const W=new RTCSessionDescription({type:"answer",sdp:z.data});return await L.setRemoteDescription(W).catch(X=>{throw C.error("could not execute setRemoteDescription",X),new SDPHandshakeFailedError("Failed to set remoteDescription")}),C.trace("initiator read candidates until connected"),R?.(new CustomProgressEvent("webrtc:read-ice-candidates")),await readCandidatesUntilConnected(L,O,{direction:"initiator",signal:g,log:C,onProgress:R}),C.trace("initiator connected, closing init channel"),U.close(),R?.(new CustomProgressEvent("webrtc:close-signaling-stream")),C.trace("closing signaling channel"),await M.close({signal:g}),C.trace("initiator connected to remote address %s",x),{remoteAddress:x,peerConnection:L,muxerFactory:F}}catch(U){throw C.error("outgoing signaling error",U),L.close(),M.abort(U),U}finally{L.onicecandidate=null,L.onicecandidateerror=null}}finally{if(N)try{await D.close({signal:g})}catch(M){D.abort(M)}}}const Circuit=fmt(P2P$1.matchers[0],literal("p2p-circuit"));class WebRTCPeerListener extends TypedEventEmitter{transportManager;shutdownController;constructor(r,g){super(),this.transportManager=r.transportManager,this.shutdownController=g.shutdownController}async listen(){queueMicrotask(()=>{this.safeDispatchEvent("listening")})}getAddrs(){return this.transportManager.getListeners().filter(r=>r!==this).map(r=>r.getAddrs().filter(g=>Circuit.exactMatch(g)).map(g=>g.encapsulate("/webrtc"))).flat()}async close(){this.shutdownController.abort(),queueMicrotask(()=>{this.safeDispatchEvent("close")})}}async function handleIncomingStream({peerConnection:n,stream:r,signal:g,connection:_,log:x}){x.trace("new inbound signaling stream");const S=pbStream(r).pb(Message);try{n.onicecandidate=({candidate:A})=>{const I=JSON.stringify(A?.toJSON()??null);x.trace("recipient sending ICE candidate %s",I),S.write({type:Message.Type.ICE_CANDIDATE,data:I},{signal:g}).catch(B=>{x.error("error sending ICE candidate",B)})},x.trace("recipient read SDP offer");const C=await S.read({signal:g});if(C.type!==Message.Type.SDP_OFFER)throw new SDPHandshakeFailedError(`expected message type SDP_OFFER, received: ${C.type??"undefined"} `);x.trace("recipient received SDP offer %s",C.data);const T=new RTCSessionDescription({type:"offer",sdp:C.data});await n.setRemoteDescription(T).catch(A=>{throw x.error("could not execute setRemoteDescription",A),new SDPHandshakeFailedError("Failed to set remoteDescription")});const R=await n.createAnswer().catch(A=>{throw x.error("could not execute createAnswer",A),new SDPHandshakeFailedError("Failed to create answer")});x.trace("recipient send SDP answer %s",R.sdp),await S.write({type:Message.Type.SDP_ANSWER,data:R.sdp},{signal:g}),await n.setLocalDescription(R).catch(A=>{throw x.error("could not execute setLocalDescription",A),new SDPHandshakeFailedError("Failed to set localDescription")}),x.trace("recipient read candidates until connected"),await readCandidatesUntilConnected(n,S,{direction:"recipient",signal:g,log:x})}catch(C){if(getConnectionState(n)!=="connected")throw x.error("error while handling signaling stream from peer %a",_.remoteAddr,C),n.close(),C;x("error while handling signaling stream from peer %a, ignoring as the RTCPeerConnection is already connected",_.remoteAddr,C)}const E=multiaddr(`/webrtc/p2p/${_.remoteAddr.getPeerId()}`);return x.trace("recipient connected to remote address %s",E),{remoteAddress:E}}const WEBRTC_TRANSPORT="/webrtc",CIRCUIT_RELAY_TRANSPORT="/p2p-circuit",SIGNALING_PROTO_ID="/webrtc-signaling/0.0.1",INBOUND_CONNECTION_TIMEOUT=30*1e3;class WebRTCTransport{components;init;log;_started=!1;metrics;shutdownController;constructor(r,g={}){this.components=r,this.init=g,this.log=r.logger.forComponent("libp2p:webrtc"),this.shutdownController=new AbortController,setMaxListeners(1/0,this.shutdownController.signal),r.metrics!=null&&(this.metrics={dialerEvents:r.metrics.registerCounterGroup("libp2p_webrtc_dialer_events_total",{label:"event",help:"Total count of WebRTC dialer events by type"}),listenerEvents:r.metrics.registerCounterGroup("libp2p_webrtc_listener_events_total",{label:"event",help:"Total count of WebRTC listener events by type"})})}[transportSymbol]=!0;[Symbol.toStringTag]="@libp2p/webrtc";[serviceCapabilities]=["@libp2p/transport"];[serviceDependencies]=["@libp2p/identify","@libp2p/circuit-relay-v2-transport"];isStarted(){return this._started}async start(){await this.components.registrar.handle(SIGNALING_PROTO_ID,r=>{this._onProtocol(r).catch(g=>{this.log.error("failed to handle incoming connect from %p",r.connection.remotePeer,g)})},{runOnLimitedConnection:!0}),this._started=!0}async stop(){await this.components.registrar.unhandle(SIGNALING_PROTO_ID),this._started=!1}createListener(r){return new WebRTCPeerListener(this.components,{shutdownController:this.shutdownController})}listenFilter(r){return r.filter(WebRTC.exactMatch)}dialFilter(r){return this.listenFilter(r)}async dial(r,g){this.log.trace("dialing address: %a",r);const{remoteAddress:_,peerConnection:x,muxerFactory:S}=await initiateConnection({rtcConfiguration:await getRtcConfiguration(this.init.rtcConfiguration),dataChannel:this.init.dataChannel,multiaddr:r,dataChannelOptions:this.init.dataChannel,signal:g.signal,connectionManager:this.components.connectionManager,transportManager:this.components.transportManager,log:this.log,logger:this.components.logger,onProgress:g.onProgress}),E=new WebRTCMultiaddrConnection(this.components,{peerConnection:x,timeline:{open:Date.now()},remoteAddr:_,metrics:this.metrics?.dialerEvents}),C=await g.upgrader.upgradeOutbound(E,{skipProtection:!0,skipEncryption:!0,muxerFactory:S,onProgress:g.onProgress});return this._closeOnShutdown(x,E),C}async _onProtocol({connection:r,stream:g}){const _=AbortSignal.timeout(this.init.inboundConnectionTimeout??INBOUND_CONNECTION_TIMEOUT),x=new RTCPeerConnection(await getRtcConfiguration(this.init.rtcConfiguration)),S=new DataChannelMuxerFactory(this.components,{peerConnection:x,dataChannelOptions:this.init.dataChannel});try{const{remoteAddress:E}=await handleIncomingStream({peerConnection:x,connection:r,stream:g,signal:_,log:this.log});await g.close({signal:_});const C=new WebRTCMultiaddrConnection(this.components,{peerConnection:x,timeline:{open:new Date().getTime()},remoteAddr:E,metrics:this.metrics?.listenerEvents});await this.components.upgrader.upgradeInbound(C,{skipEncryption:!0,skipProtection:!0,muxerFactory:S}),this._closeOnShutdown(x,C)}catch(E){throw this.log.error("incoming signaling error",E),x.close(),g.abort(E),E}}_closeOnShutdown(r,g){const _=()=>{g.close().catch(x=>{this.log.error("could not close WebRTCMultiaddrConnection",x)})};this.shutdownController.signal.addEventListener("abort",_),r.addEventListener("close",()=>{this.shutdownController.signal.removeEventListener("abort",_)})}}function splitAddr(n){const r=n.toString().split(WEBRTC_TRANSPORT+"/");if(r.length!==2)throw new InvalidParametersError("webrtc protocol was not present in multiaddr");if(!r[0].includes(CIRCUIT_RELAY_TRANSPORT))throw new InvalidParametersError("p2p-circuit protocol was not present in multiaddr");let g=multiaddr(r[0]);const x=multiaddr("/"+r[1]).getPeerId();if(x==null)throw new InvalidParametersError("destination peer id was missing");const S=g.protos().pop();if(S===void 0)throw new InvalidParametersError("invalid multiaddr");return S.name!=="p2p"&&(g=g.encapsulate(`/p2p/${x}`)),{baseAddr:g,peerId:peerIdFromString$1(x)}}const mbdecoder=Object.values(bases).map(n=>n.decoder).reduce((n,r)=>n.or(r));function getLocalFingerprint(n,r){const g=n.getConfiguration().certificates?.at(0);if(g?.getFingerprints==null){r.log.trace("fetching fingerprint from local SDP");const x=n.localDescription;return x==null?void 0:getFingerprintFromSdp(x.sdp)}if(r.log.trace("fetching fingerprint from local certificate"),g.getFingerprints().length===0)return;const _=g.getFingerprints()[0].value;if(_==null)throw new InvalidFingerprintError("","no fingerprint on local certificate");return _}const fingerprintRegex=/^a=fingerprint:(?:\w+-[0-9]+)\s(?<fingerprint>(:?[0-9a-fA-F]{2})+)$/m;function getFingerprintFromSdp(n){return n.match(fingerprintRegex)?.groups?.fingerprint}function ipv(n){for(const r of n.protoNames())if(r.startsWith("ip"))return r.toUpperCase();return"IP6"}function certhash(n){const g=n.stringTuples().filter(_=>_[0]===CERTHASH_CODE).map(_=>_[1])[0];if(g===void 0||g==="")throw new InvalidParametersError(`Couldn't find a certhash component of multiaddr: ${n.toString()}`);return g}function decodeCerthash(n){return decode$h(mbdecoder.decode(n))}function ma2Fingerprint(n){const r=decodeCerthash(certhash(n)),g=toSupportedHashFunction(r.code),_=r.digest.reduce((S,E)=>S+E.toString(16).padStart(2,"0"),""),x=_.match(/.{1,2}/g);if(x==null)throw new InvalidFingerprintError(_,n.toString());return[`${g} ${x.join(":").toUpperCase()}`,_]}function toSupportedHashFunction(n){switch(n){case 17:return"SHA-1";case 18:return"SHA-256";case 19:return"SHA-512";default:throw new UnsupportedHashAlgorithmError(n)}}function ma2sdp(n,r){const{host:g,port:_}=n.toOptions(),x=ipv(n),[S]=ma2Fingerprint(n);return`v=0
o=- 0 0 IN ${x} ${g}
s=-
c=IN ${x} ${g}
t=0 0
a=ice-lite
m=application ${_} UDP/DTLS/SCTP webrtc-datachannel
a=mid:0
a=setup:passive
a=ice-ufrag:${r}
a=ice-pwd:${r}
a=fingerprint:${S}
a=sctp-port:5000
a=max-message-size:${MAX_MESSAGE_SIZE}
a=candidate:1467250027 1 UDP 1467250027 ${g} ${_} typ host\r
`}function fromMultiAddr(n,r){return{type:"answer",sdp:ma2sdp(n,r)}}function munge(n,r){if(n.sdp===void 0)throw new InvalidParametersError("Can't munge a missing SDP");return n.sdp=n.sdp.replace(/\na=ice-ufrag:[^\n]*\n/,`
a=ice-ufrag:`+r+`
`).replace(/\na=ice-pwd:[^\n]*\n/,`
a=ice-pwd:`+r+`
`),n}const charset=Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),genUfrag=n=>[...Array(n)].map(()=>charset.at(Math.floor(Math.random()*charset.length))).join(""),HANDSHAKE_TIMEOUT_MS=1e4;getProtocol("webrtc-direct").code;const CERTHASH_CODE=getProtocol("certhash").code;class WebRTCDirectTransport{log;metrics;components;init;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:webrtc-direct"),this.components=r,this.init=g,r.metrics!=null&&(this.metrics={dialerEvents:r.metrics.registerCounterGroup("libp2p_webrtc-direct_dialer_events_total",{label:"event",help:"Total count of WebRTC-direct dial events by type"})})}[transportSymbol]=!0;[Symbol.toStringTag]="@libp2p/webrtc-direct";[serviceCapabilities]=["@libp2p/transport"];async dial(r,g){const _=await this._connect(r,g);return this.log("dialing address: %a",r),_}createListener(r){throw new UnimplementedError("WebRTCTransport.createListener")}listenFilter(r){return r.filter(WebRTCDirect$1.exactMatch)}dialFilter(r){return this.listenFilter(r)}async _connect(r,g){const _=new AbortController,x=_.signal;let S;const E=r.getPeerId();E!=null&&(S=peerIdFromString$1(E));const C=decodeCerthash(certhash(r)),T=await RTCPeerConnection.generateCertificate({name:"ECDSA",namedCurve:"P-256",hash:toSupportedHashFunction(C.code)}),R=new RTCPeerConnection({...await getRtcConfiguration(this.init.rtcConfiguration),certificates:[T]});try{const A=new Promise((X,ie)=>{const fe=R.createDataChannel("",{negotiated:!0,id:0}),xe=setTimeout(()=>{const we=`Data channel was never opened: state: ${fe.readyState}`;this.log.error(we),this.metrics?.dialerEvents.increment({open_error:!0}),ie(new DataChannelError("data",we))},HANDSHAKE_TIMEOUT_MS);fe.onopen=we=>{clearTimeout(xe),X(fe)},fe.onerror=we=>{clearTimeout(xe);const J=`Error opening a data channel for handshaking: ${we.target?.toString()??"not specified"}`;this.log.error(J),this.metrics?.dialerEvents.increment({unknown_error:!0}),ie(new DataChannelError("data",J))}}),I="libp2p+webrtc+v1/"+genUfrag(32),B=await R.createOffer(),D=munge(B,I);await R.setLocalDescription(D);const N=fromMultiAddr(r,I);await R.setRemoteDescription(N);const M=await A,O=this.generateNoisePrologue(R,C.code,r),L=noise({prologueBytes:O})(this.components),F=createStream({channel:M,direction:"inbound",logger:this.components.logger,...this.init.dataChannel??{}}),U={...F,sink:F.sink.bind(F),source:async function*(){for await(const X of F.source)for(const ie of X)yield ie}()},j=new WebRTCMultiaddrConnection(this.components,{peerConnection:R,remoteAddr:r,timeline:{open:Date.now()},metrics:this.metrics?.dialerEvents}),z=isFirefox?"iceconnectionstatechange":"connectionstatechange";R.addEventListener(z,()=>{switch(R.connectionState){case"failed":case"disconnected":case"closed":j.close().catch(X=>{this.log.error("error closing connection",X)}).finally(()=>{_.abort()});break;default:break}},{signal:x}),this.metrics?.dialerEvents.increment({peer_connection:!0});const W=new DataChannelMuxerFactory(this.components,{peerConnection:R,metrics:this.metrics?.dialerEvents,dataChannelOptions:this.init.dataChannel});return await L.secureInbound(U,{signal:x,remotePeer:S}),await g.upgrader.upgradeOutbound(j,{skipProtection:!0,skipEncryption:!0,muxerFactory:W})}catch(A){throw R.close(),A}}generateNoisePrologue(r,g,_){if(r.getConfiguration().certificates?.length===0)throw new InvalidParametersError("no local certificate");const x=getLocalFingerprint(r,{log:this.log});if(x==null)throw new InvalidParametersError("no local fingerprint found");const S=x.trim().toLowerCase().replaceAll(":",""),E=fromString(S,"hex"),C=create$3(g,E),T=mbdecoder.decode(certhash(_)),R=fromString("libp2p-webrtc-noise:");return concat([R,C.bytes,T])}}function webRTCDirect(n){return r=>new WebRTCDirectTransport(r,n)}function webRTC(n){return r=>new WebRTCTransport(r,n)}const ASSUME_HTTP_CODES=[getProtocol("tcp").code,getProtocol("dns").code,getProtocol("dnsaddr").code,getProtocol("dns4").code,getProtocol("dns6").code];function extractSNI(n){return extractTuple("sni",n)?.[1]}function extractPort(n){const r=extractTuple("tcp",n)?.[1];return r==null?"":`:${r}`}function extractTuple(n,r){let g;try{g=getProtocol(n).code}catch{return}for(const[_,x]of r)if(_===g&&x!=null)return[_,x]}function hasTLS(n){return n.some(([r,g])=>r===getProtocol("tls").code)}function interpretNext(n,r,g){const _=interpreters[getProtocol(n).name];if(_==null)throw new Error(`Can't interpret protocol ${getProtocol(n).name}`);const x=_(r,g);return n===getProtocol("ip6").code?`[${x}]`:x}const interpreters={ip4:(n,r)=>n,ip6:(n,r)=>r.length===0?n:`[${n}]`,tcp:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`tcp://${interpretNext(g[0],g[1]??"",r)}:${n}`},udp:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`udp://${interpretNext(g[0],g[1]??"",r)}:${n}`},dnsaddr:(n,r)=>n,dns4:(n,r)=>n,dns6:(n,r)=>n,dns:(n,r)=>n,ipfs:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`${interpretNext(g[0],g[1]??"",r)}/ipfs/${n}`},p2p:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`${interpretNext(g[0],g[1]??"",r)}/p2p/${n}`},http:(n,r)=>{const g=hasTLS(r),_=extractSNI(r),x=extractPort(r);if(g&&_!=null)return`https://${_}${x}`;const S=g?"https://":"http://",E=r.pop();if(E==null)throw new Error("Unexpected end of multiaddr");let C=interpretNext(E[0],E[1]??"",r);return C=C.replace("tcp://",""),`${S}${C}`},"http-path":(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");const _=interpretNext(g[0],g[1]??"",r),x=decodeURIComponent(n);return`${_}/${x}`},tls:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return interpretNext(g[0],g[1]??"",r)},sni:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return interpretNext(g[0],g[1]??"",r)},https:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");let _=interpretNext(g[0],g[1]??"",r);return _=_.replace("tcp://",""),`https://${_}`},ws:(n,r)=>{const g=hasTLS(r),_=extractSNI(r),x=extractPort(r);if(g&&_!=null)return`wss://${_}${x}`;const S=g?"wss://":"ws://",E=r.pop();if(E==null)throw new Error("Unexpected end of multiaddr");let C=interpretNext(E[0],E[1]??"",r);return C=C.replace("tcp://",""),`${S}${C}`},wss:(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");let _=interpretNext(g[0],g[1]??"",r);return _=_.replace("tcp://",""),`wss://${_}`},"p2p-websocket-star":(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`${interpretNext(g[0],g[1]??"",r)}/p2p-websocket-star`},"p2p-webrtc-star":(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`${interpretNext(g[0],g[1]??"",r)}/p2p-webrtc-star`},"p2p-webrtc-direct":(n,r)=>{const g=r.pop();if(g==null)throw new Error("Unexpected end of multiaddr");return`${interpretNext(g[0],g[1]??"",r)}/p2p-webrtc-direct`}};function multiaddrToUri(n,r){const _=multiaddr(n).stringTuples(),x=_.pop();if(x==null)throw new Error("Unexpected end of multiaddr");const S=getProtocol(x[0]),E=interpreters[S.name];if(E==null)throw new Error(`No interpreter found for ${S.name}`);let C=E(x[1]??"",_);return ASSUME_HTTP_CODES.includes(x[0])&&(C=C.replace(/^.*:\/\//,""),x[1]==="443"?C=`https://${C}`:C=`http://${C}`),(C.startsWith("http://")||C.startsWith("https://")||C.startsWith("ws://")||C.startsWith("wss://"))&&(C=new URL(C).toString(),C.endsWith("/")&&(C=C.substring(0,C.length-1))),C}const ready=async n=>{if(n.readyState>=2)throw new Error("socket closed");n.readyState!==1&&await new Promise((r,g)=>{function _(){n.removeEventListener("open",x),n.removeEventListener("error",S)}function x(){_(),r()}function S(E){_(),g(E.error??new Error(`connect ECONNREFUSED ${n.url}`))}n.addEventListener("open",x),n.addEventListener("error",S)})},sink=(n,r)=>(r=r??{},r.closeOnEnd=r.closeOnEnd!==!1,async _=>{for await(const x of _){try{await ready(n)}catch(S){if(S.message==="socket closed")break;throw S}if(n.readyState===n.CLOSING||n.readyState===n.CLOSED)break;n.send(x)}r.closeOnEnd!=null&&n.readyState<=1&&await new Promise((x,S)=>{n.addEventListener("close",E=>{if(E.wasClean||E.code===1006)x();else{const C=Object.assign(new Error("ws error"),{event:E});S(C)}}),setTimeout(()=>{n.close()})})});var dom={},eventIterator={},hasRequiredEventIterator;function requireEventIterator(){if(hasRequiredEventIterator)return eventIterator;hasRequiredEventIterator=1,Object.defineProperty(eventIterator,"__esModule",{value:!0});class n{constructor(){this.pullQueue=[],this.pushQueue=[],this.eventHandlers={},this.isPaused=!1,this.isStopped=!1}push(_){if(this.isStopped)return;const x={value:_,done:!1};if(this.pullQueue.length){const S=this.pullQueue.shift();S&&S.resolve(x)}else this.pushQueue.push(Promise.resolve(x)),this.highWaterMark!==void 0&&this.pushQueue.length>=this.highWaterMark&&!this.isPaused&&(this.isPaused=!0,this.eventHandlers.highWater?this.eventHandlers.highWater():console&&console.warn(`EventIterator queue reached ${this.pushQueue.length} items`))}stop(){if(!this.isStopped){this.isStopped=!0,this.remove();for(const _ of this.pullQueue)_.resolve({value:void 0,done:!0});this.pullQueue.length=0}}fail(_){if(!this.isStopped)if(this.isStopped=!0,this.remove(),this.pullQueue.length){for(const x of this.pullQueue)x.reject(_);this.pullQueue.length=0}else{const x=Promise.reject(_);x.catch(()=>{}),this.pushQueue.push(x)}}remove(){Promise.resolve().then(()=>{this.removeCallback&&this.removeCallback()})}[Symbol.asyncIterator](){return{next:_=>{const x=this.pushQueue.shift();return x?(this.lowWaterMark!==void 0&&this.pushQueue.length<=this.lowWaterMark&&this.isPaused&&(this.isPaused=!1,this.eventHandlers.lowWater&&this.eventHandlers.lowWater()),x):this.isStopped?Promise.resolve({value:void 0,done:!0}):new Promise((S,E)=>{this.pullQueue.push({resolve:S,reject:E})})},return:()=>(this.isStopped=!0,this.pushQueue.length=0,this.remove(),Promise.resolve({value:void 0,done:!0}))}}}class r{constructor(_,{highWaterMark:x=100,lowWaterMark:S=1}={}){const E=new n;E.highWaterMark=x,E.lowWaterMark=S,E.removeCallback=_({push:C=>E.push(C),stop:()=>E.stop(),fail:C=>E.fail(C),on:(C,T)=>{E.eventHandlers[C]=T}})||(()=>{}),this[Symbol.asyncIterator]=()=>E[Symbol.asyncIterator](),Object.freeze(this)}}return eventIterator.EventIterator=r,eventIterator.default=r,eventIterator}var hasRequiredDom;function requireDom(){if(hasRequiredDom)return dom;hasRequiredDom=1,Object.defineProperty(dom,"__esModule",{value:!0});const n=requireEventIterator();dom.EventIterator=n.EventIterator;function r(g,_,x){return new n.EventIterator(({push:S})=>(this.addEventListener(g,S,_),()=>this.removeEventListener(g,S,_)),x)}return dom.subscribe=r,dom.default=n.EventIterator,dom}var domExports=requireDom();function isArrayBuffer(n){return n instanceof ArrayBuffer||n?.constructor?.name==="ArrayBuffer"&&typeof n?.byteLength=="number"}const source=n=>{n.binaryType="arraybuffer";const r=async()=>{await new Promise((S,E)=>{if(_){S();return}if(x!=null){E(x);return}const C=A=>{n.removeEventListener("open",T),n.removeEventListener("error",R),A()},T=()=>{C(S)},R=A=>{C(()=>{E(A.error??new Error(`connect ECONNREFUSED ${n.url}`))})};n.addEventListener("open",T),n.addEventListener("error",R)})},g=async function*(){const S=new domExports.EventIterator(({push:E,stop:C,fail:T})=>{const R=I=>{let B=null;typeof I.data=="string"&&(B=fromString(I.data)),isArrayBuffer(I.data)&&(B=new Uint8Array(I.data)),I.data instanceof Uint8Array&&(B=I.data),B!=null&&E(B)},A=I=>{T(I.error??new Error("Socket error"))};return n.addEventListener("message",R),n.addEventListener("error",A),n.addEventListener("close",C),()=>{n.removeEventListener("message",R),n.removeEventListener("error",A),n.removeEventListener("close",C)}},{highWaterMark:1/0});await r();for await(const E of S)yield isArrayBuffer(E)?new Uint8Array(E):E}();let _=n.readyState===1,x;return n.addEventListener("open",()=>{_=!0,x=null}),n.addEventListener("close",()=>{_=!1,x=null}),n.addEventListener("error",S=>{_||(x=S.error??new Error(`connect ECONNREFUSED ${n.url}`))}),Object.assign(g,{connected:r})},duplex=(n,r)=>{r=r??{};const g=source(n);let _=r.remoteAddress,x=r.remotePort;if(n.url!=null)try{const E=new URL(n.url);_=E.hostname,x=parseInt(E.port,10)}catch{}if(_==null||x==null)throw new Error("Remote connection did not have address and/or port");return{sink:sink(n,r),source:g,connected:async()=>{await g.connected()},close:async()=>{(n.readyState===n.CONNECTING||n.readyState===n.OPEN)&&await new Promise(E=>{n.addEventListener("close",()=>{E()}),n.close()})},destroy:()=>{n.terminate!=null?n.terminate():n.close()},remoteAddress:_,remotePort:x,socket:n}},WebSocket$1=WebSocket,map$1={"http:":"ws:","https:":"wss:"},defaultProtocol="ws:",wsurl=(n,r)=>{if(n.startsWith("//")&&(n=`${r?.protocol??defaultProtocol}${n}`),n.startsWith("/")&&r!=null){const _=r.protocol??defaultProtocol,x=r.host,S=r.port!=null&&x?.endsWith(`:${r.port}`)!==!0?`:${r.port}`:"";n=`${_}//${x}${S}${n}`}const g=new URL(n);for(const[_,x]of Object.entries(map$1))g.protocol===_&&(g.protocol=x);return g};function connect(n,r){const g=typeof window>"u"?void 0:window.location;r=r??{};const _=wsurl(n,g),x=new WebSocket$1(_.toString(),r.websocket);return duplex(x,r)}function all(n){return n.filter(r=>WebSocketsSecure$1.exactMatch(r)||WebSockets$2.exactMatch(r))}function wss(n){return n.filter(r=>WebSocketsSecure$1.exactMatch(r))}function createListener$1(){throw new Error("WebSocket Servers can not be created in the browser!")}const CLOSE_TIMEOUT$1=500;function socketToMaConn(n,r,g){const _=g.logger.forComponent("libp2p:websockets:maconn"),x=g.metrics,S=g.metricPrefix??"",E={log:_,async sink(C){try{await n.sink(async function*(){for await(const T of C)T instanceof Uint8Array?yield T:yield T.subarray()}())}catch(T){T.type!=="aborted"&&_.error(T)}},source:n.source,remoteAddr:r,timeline:{open:Date.now()},async close(C={}){const T=Date.now();if(C.signal==null){const A=AbortSignal.timeout(CLOSE_TIMEOUT$1);C={...C,signal:A}}const R=()=>{const{host:A,port:I}=E.remoteAddr.toOptions();_("timeout closing stream to %s:%s after %dms, destroying it manually",A,I,Date.now()-T),this.abort(new AbortError$4("Socket close timeout"))};C.signal?.addEventListener("abort",R);try{await n.close()}catch(A){_.error("error closing WebSocket gracefully",A),this.abort(A)}finally{C.signal?.removeEventListener("abort",R),E.timeline.close=Date.now()}},abort(C){const{host:T,port:R}=E.remoteAddr.toOptions();_("timeout closing stream to %s:%s due to error",T,R,C),n.destroy(),E.timeline.close=Date.now(),x?.increment({[`${S}error`]:!0})}};return n.socket.addEventListener("close",()=>{x?.increment({[`${S}close`]:!0}),E.timeline.close==null&&(E.timeline.close=Date.now())},{once:!0}),E}class WebSockets{log;init;logger;metrics;components;constructor(r,g){this.log=r.logger.forComponent("libp2p:websockets"),this.logger=r.logger,this.components=r,this.init=g,r.metrics!=null&&(this.metrics={dialerEvents:r.metrics.registerCounterGroup("libp2p_websockets_dialer_events_total",{label:"event",help:"Total count of WebSockets dialer events by type"})})}[transportSymbol]=!0;[Symbol.toStringTag]="@libp2p/websockets";[serviceCapabilities]=["@libp2p/transport"];async dial(r,g){this.log("dialing %s",r),g=g??{};const _=await this._connect(r,g),x=socketToMaConn(_,r,{logger:this.logger,metrics:this.metrics?.dialerEvents});this.log("new outbound connection %s",x.remoteAddr);const S=await g.upgrader.upgradeOutbound(x,g);return this.log("outbound connection %s upgraded",x.remoteAddr),S}async _connect(r,g){g?.signal?.throwIfAborted();const _=r.toOptions();this.log("dialing %s:%s",_.host,_.port);const x=pDefer(),S=connect(multiaddrToUri(r),this.init);S.socket.addEventListener("error",()=>{const E=new ConnectionFailedError(`Could not connect to ${r.toString()}`);this.log.error("connection error:",E),this.metrics?.dialerEvents.increment({error:!0}),x.reject(E)});try{g.onProgress?.(new CustomProgressEvent("websockets:open-connection")),await raceSignal(Promise.race([S.connected(),x.promise]),g.signal)}catch(E){throw g.signal?.aborted===!0&&this.metrics?.dialerEvents.increment({abort:!0}),S.close().catch(C=>{this.log.error("error closing raw socket",C)}),E}return this.log("connected %s",r),this.metrics?.dialerEvents.increment({connect:!0}),S}createListener(r){return createListener$1({logger:this.logger,metrics:this.components.metrics},{...this.init,...r})}listenFilter(r){return r=Array.isArray(r)?r:[r],this.init?.filter!=null?this.init?.filter(r):isBrowser$1||isWebWorker?wss(r):all(r)}dialFilter(r){return this.listenFilter(r)}}function webSockets(n={}){return r=>new WebSockets(r,n)}function ipnsSelector(n,r){const g=r.map((_,x)=>({record:unmarshalIPNSRecord(_),index:x}));return g.sort((_,x)=>{const S=_.record.sequence,E=x.record.sequence;if(S>E)return-1;if(S<E)return 1;if(_.record.validityType===IpnsEntry.ValidityType.EOL&&x.record.validityType===IpnsEntry.ValidityType.EOL){const C=NanoDate.fromString(_.record.validity).toDate(),T=NanoDate.fromString(x.record.validity).toDate();if(C.getTime()>T.getTime())return-1;if(C.getTime()<T.getTime())return 1}return 0}),g[0].index}const version$2="2.4.0",name$1="js-libp2p",version$1="5.1.1",name="helia",bootstrapConfig={list:["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt","/dnsaddr/va1.bootstrap.libp2p.io/p2p/12D3KooWKnDdG3iXw9eTFijk3EWSunZcFi54Zka4wmtqtt6rPxc8","/ip4/104.131.131.82/tcp/4001/p2p/QmaCpDMGvV2BGHeYERUEnRQAwe3N8SzbUtfsmvsqQLuvuJ"]};function libp2pDefaults(n={}){const r=`${name}/${version$1} ${name$1}/${version$2} UserAgent=${globalThis.navigator.userAgent}`;return{privateKey:n.privateKey,dns:n.dns,addresses:{listen:["/p2p-circuit","/webrtc"]},transports:[circuitRelayTransport(),webRTC(),webRTCDirect(),webSockets()],connectionEncrypters:[noise()],streamMuxers:[yamux(),mplex()],peerDiscovery:[bootstrap(bootstrapConfig)],services:{autoNAT:autoNAT(),dcutr:dcutr(),delegatedRouting:()=>createDelegatedRoutingV1HttpApiClient("https://delegated-ipfs.dev",delegatedHTTPRoutingDefaults()),dht:kadDHT({clientMode:!0,validators:{ipns:ipnsValidator},selectors:{ipns:ipnsSelector}}),identify:identify({agentVersion:r}),identifyPush:identifyPush({agentVersion:r}),keychain:keychain(n.keychain),ping:ping()}}}const MAX_RECURSIVE_DEPTH=32,{code:dnsaddrCode}=getProtocol("dnsaddr");class RecursionLimitError extends Error{constructor(r="Max recursive depth reached"){super(r),this.name="RecursionLimitError"}}const dnsaddrResolver=async function n(r,g={}){const _=g.maxRecursiveDepth??MAX_RECURSIVE_DEPTH;if(_===0)throw new RecursionLimitError("Max recursive depth reached");const[,x]=r.stringTuples().find(([R])=>R===dnsaddrCode)??[],E=await(g?.dns??dns()).query(`_dnsaddr.${x}`,{signal:g?.signal,types:[RecordType.TXT]}),C=r.getPeerId(),T=[];for(const R of E.Answer){const A=R.data.replace(/["']/g,"").trim().split("=")[1];if(A==null||C!=null&&!A.includes(C))continue;const I=multiaddr(A);if(A.startsWith("/dnsaddr")){const B=await I.resolve({...g,maxRecursiveDepth:_-1});T.push(...B.map(D=>D.toString()))}else T.push(I.toString())}return T},DefaultConfig={addresses:{listen:[],announce:[],noAnnounce:[],announceFilter:n=>n},connectionManager:{resolvers:{dnsaddr:dnsaddrResolver}},transportManager:{faultTolerance:FaultTolerance.FATAL_ALL}};async function validateConfig(n){const r=mergeOptions$9(DefaultConfig,n);if(r.connectionProtector===null&&globalThis.process?.env?.LIBP2P_FORCE_PNET!=null)throw new InvalidParametersError("Private network is enforced, but no protector was provided");return r}var Peer$1;(function(n){(function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{E.lengthDelimited!==!1&&S.fork(),x.key!=null&&x.key!==""&&(S.uint32(10),S.string(x.key)),x.value!=null&&x.value.byteLength>0&&(S.uint32(18),S.bytes(x.value)),E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={key:"",value:alloc$1(0)},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.key=x.string();break}case 2:{C.value=x.bytes();break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)})(n.Peer$metadataEntry||(n.Peer$metadataEntry={})),function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{E.lengthDelimited!==!1&&S.fork(),x.key!=null&&x.key!==""&&(S.uint32(10),S.string(x.key)),x.value!=null&&(S.uint32(18),Tag.codec().encode(x.value,S)),E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={key:""},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.key=x.string();break}case 2:{C.value=Tag.codec().decode(x,x.uint32(),{limits:E.limits?.value});break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)}(n.Peer$tagsEntry||(n.Peer$tagsEntry={}));let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.addresses!=null)for(const S of g.addresses)_.uint32(10),Address.codec().encode(S,_);if(g.protocols!=null)for(const S of g.protocols)_.uint32(18),_.string(S);if(g.publicKey!=null&&(_.uint32(34),_.bytes(g.publicKey)),g.peerRecordEnvelope!=null&&(_.uint32(42),_.bytes(g.peerRecordEnvelope)),g.metadata!=null&&g.metadata.size!==0)for(const[S,E]of g.metadata.entries())_.uint32(50),n.Peer$metadataEntry.codec().encode({key:S,value:E},_);if(g.tags!=null&&g.tags.size!==0)for(const[S,E]of g.tags.entries())_.uint32(58),n.Peer$tagsEntry.codec().encode({key:S,value:E},_);x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={addresses:[],protocols:[],metadata:new Map,tags:new Map},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{if(x.limits?.addresses!=null&&S.addresses.length===x.limits.addresses)throw new MaxLengthError('Decode error - map field "addresses" had too many elements');S.addresses.push(Address.codec().decode(g,g.uint32(),{limits:x.limits?.addresses$}));break}case 2:{if(x.limits?.protocols!=null&&S.protocols.length===x.limits.protocols)throw new MaxLengthError('Decode error - map field "protocols" had too many elements');S.protocols.push(g.string());break}case 4:{S.publicKey=g.bytes();break}case 5:{S.peerRecordEnvelope=g.bytes();break}case 6:{if(x.limits?.metadata!=null&&S.metadata.size===x.limits.metadata)throw new MaxSizeError('Decode error - map field "metadata" had too many elements');const T=n.Peer$metadataEntry.codec().decode(g,g.uint32());S.metadata.set(T.key,T.value);break}case 7:{if(x.limits?.tags!=null&&S.tags.size===x.limits.tags)throw new MaxSizeError('Decode error - map field "tags" had too many elements');const T=n.Peer$tagsEntry.codec().decode(g,g.uint32(),{limits:{value:x.limits?.tags$value}});S.tags.set(T.key,T.value);break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Peer$1||(Peer$1={}));var Address;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.multiaddr!=null&&g.multiaddr.byteLength>0&&(_.uint32(10),_.bytes(g.multiaddr)),g.isCertified!=null&&(_.uint32(16),_.bool(g.isCertified)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={multiaddr:alloc$1(0)},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.multiaddr=g.bytes();break}case 2:{S.isCertified=g.bool();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Address||(Address={}));var Tag;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{x.lengthDelimited!==!1&&_.fork(),g.value!=null&&g.value!==0&&(_.uint32(8),_.uint32(g.value)),g.expiry!=null&&(_.uint32(16),_.uint64(g.expiry)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={value:0},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.value=g.uint32();break}case 2:{S.expiry=g.uint64();break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Tag||(Tag={}));function bytesToPeer(n,r){const g=Peer$1.decode(r);if(g.publicKey!=null&&n.publicKey==null){const S=publicKeyFromProtobuf(g.publicKey);n=peerIdFromPublicKey(S)}const _=new Map,x=BigInt(Date.now());for(const[S,E]of g.tags.entries())E.expiry!=null&&E.expiry<x||_.set(S,E);return{...g,id:n,addresses:g.addresses.map(({multiaddr:S,isCertified:E})=>({multiaddr:multiaddr(S),isCertified:E??!1})),metadata:g.metadata,peerRecordEnvelope:g.peerRecordEnvelope??void 0,tags:_}}const NAMESPACE_COMMON="/peers/";function peerIdToDatastoreKey(n){if(!isPeerId(n)||n.type==null)throw new InvalidParametersError("Invalid PeerId");const r=n.toCID().toString();return new Key(`${NAMESPACE_COMMON}${r}`)}async function dedupeFilterAndSortAddresses(n,r,g){const _=new Map;for(const x of g){if(x==null)continue;if(x.multiaddr instanceof Uint8Array&&(x.multiaddr=multiaddr(x.multiaddr)),!isMultiaddr(x.multiaddr))throw new InvalidParametersError("Multiaddr was invalid");if(!await r(n,x.multiaddr))continue;const S=x.isCertified??!1,E=x.multiaddr.toString(),C=_.get(E);C!=null?x.isCertified=C.isCertified||S:_.set(E,{multiaddr:x.multiaddr,isCertified:S})}return[..._.values()].sort((x,S)=>x.multiaddr.toString().localeCompare(S.multiaddr.toString())).map(({isCertified:x,multiaddr:S})=>({isCertified:x,multiaddr:S.bytes}))}async function toPeerPB(n,r,g,_){if(r==null)throw new InvalidParametersError("Invalid PeerData");if(r.publicKey!=null&&n.publicKey!=null&&!r.publicKey.equals(n.publicKey))throw new InvalidParametersError("publicKey bytes do not match peer id publicKey bytes");const x=_.existingPeer;if(x!=null&&!n.equals(x.id))throw new InvalidParametersError("peer id did not match existing peer id");let S=x?.addresses??[],E=new Set(x?.protocols??[]),C=x?.metadata??new Map,T=x?.tags??new Map,R=x?.peerRecordEnvelope;if(g==="patch"){if((r.multiaddrs!=null||r.addresses!=null)&&(S=[],r.multiaddrs!=null&&S.push(...r.multiaddrs.map(B=>({isCertified:!1,multiaddr:B}))),r.addresses!=null&&S.push(...r.addresses)),r.protocols!=null&&(E=new Set(r.protocols)),r.metadata!=null){const B=r.metadata instanceof Map?[...r.metadata.entries()]:Object.entries(r.metadata);C=createSortedMap(B,{validate:validateMetadata})}if(r.tags!=null){const B=r.tags instanceof Map?[...r.tags.entries()]:Object.entries(r.tags);T=createSortedMap(B,{validate:validateTag,map:mapTag})}r.peerRecordEnvelope!=null&&(R=r.peerRecordEnvelope)}if(g==="merge"){if(r.multiaddrs!=null&&S.push(...r.multiaddrs.map(B=>({isCertified:!1,multiaddr:B}))),r.addresses!=null&&S.push(...r.addresses),r.protocols!=null&&(E=new Set([...E,...r.protocols])),r.metadata!=null){const B=r.metadata instanceof Map?[...r.metadata.entries()]:Object.entries(r.metadata);for(const[D,N]of B)N==null?C.delete(D):C.set(D,N);C=createSortedMap([...C.entries()],{validate:validateMetadata})}if(r.tags!=null){const B=r.tags instanceof Map?[...r.tags.entries()]:Object.entries(r.tags),D=new Map(T);for(const[N,M]of B)M==null?D.delete(N):D.set(N,M);T=createSortedMap([...D.entries()],{validate:validateTag,map:mapTag})}r.peerRecordEnvelope!=null&&(R=r.peerRecordEnvelope)}let A;x?.id.publicKey!=null?A=publicKeyToProtobuf(x.id.publicKey):r.publicKey!=null?A=publicKeyToProtobuf(r.publicKey):n.publicKey!=null&&(A=publicKeyToProtobuf(n.publicKey));const I={addresses:await dedupeFilterAndSortAddresses(n,_.addressFilter??(async()=>!0),S),protocols:[...E.values()].sort((B,D)=>B.localeCompare(D)),metadata:C,tags:T,publicKey:A,peerRecordEnvelope:R};return n.type!=="RSA"&&delete I.publicKey,I}function createSortedMap(n,r){const g=new Map;for(const[_,x]of n)x!=null&&r.validate(_,x);for(const[_,x]of n.sort(([S],[E])=>S.localeCompare(E)))x!=null&&g.set(_,r.map?.(_,x)??x);return g}function validateMetadata(n,r){if(typeof n!="string")throw new InvalidParametersError("Metadata key must be a string");if(!(r instanceof Uint8Array))throw new InvalidParametersError("Metadata value must be a Uint8Array")}function validateTag(n,r){if(typeof n!="string")throw new InvalidParametersError("Tag name must be a string");if(r.value!=null){if(parseInt(`${r.value}`,10)!==r.value)throw new InvalidParametersError("Tag value must be an integer");if(r.value<0||r.value>100)throw new InvalidParametersError("Tag value must be between 0-100")}if(r.ttl!=null){if(parseInt(`${r.ttl}`,10)!==r.ttl)throw new InvalidParametersError("Tag ttl must be an integer");if(r.ttl<0)throw new InvalidParametersError("Tag ttl must be between greater than 0")}}function mapTag(n,r){let g;return r.expiry!=null&&(g=r.expiry),r.ttl!=null&&(g=BigInt(Date.now()+Number(r.ttl))),{value:r.value??0,expiry:g}}function decodePeer(n,r){const g=n.toString().split("/")[2],_=CID$1.parse(g,base32$1),x=peerIdFromCID(_);return bytesToPeer(x,r)}function mapQuery(n){return n==null?{}:{prefix:NAMESPACE_COMMON,filters:(n.filters??[]).map(r=>({key:g,value:_})=>r(decodePeer(g,_))),orders:(n.orders??[]).map(r=>(g,_)=>r(decodePeer(g.key,g.value),decodePeer(_.key,_.value)))}}class PersistentStore{peerId;datastore;lock;addressFilter;log;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:peer-store"),this.peerId=r.peerId,this.datastore=r.datastore,this.addressFilter=g.addressFilter,this.lock=createMortice({name:"peer-store",singleProcess:!0})}async has(r){return this.datastore.has(peerIdToDatastoreKey(r))}async delete(r){if(this.peerId.equals(r))throw new InvalidParametersError("Cannot delete self peer");await this.datastore.delete(peerIdToDatastoreKey(r))}async load(r){const g=await this.datastore.get(peerIdToDatastoreKey(r));return bytesToPeer(r,g)}async save(r,g){const{existingBuf:_,existingPeer:x}=await this.#e(r),S=await toPeerPB(r,g,"patch",{addressFilter:this.addressFilter});return this.#t(r,S,_,x)}async patch(r,g){const{existingBuf:_,existingPeer:x}=await this.#e(r),S=await toPeerPB(r,g,"patch",{addressFilter:this.addressFilter,existingPeer:x});return this.#t(r,S,_,x)}async merge(r,g){const{existingBuf:_,existingPeer:x}=await this.#e(r),S=await toPeerPB(r,g,"merge",{addressFilter:this.addressFilter,existingPeer:x});return this.#t(r,S,_,x)}async*all(r){for await(const{key:g,value:_}of this.datastore.query(mapQuery(r??{}))){const x=decodePeer(g,_);x.id.equals(this.peerId)||(yield x)}}async#e(r){try{const g=await this.datastore.get(peerIdToDatastoreKey(r)),_=bytesToPeer(r,g);return{existingBuf:g,existingPeer:_}}catch(g){g.name!=="NotFoundError"&&this.log.error("invalid peer data found in peer store - %e",g)}return{}}async#t(r,g,_,x){const S=Peer$1.encode(g);return _!=null&&equals$1(S,_)?{peer:bytesToPeer(r,S),previous:x,updated:!1}:(await this.datastore.put(peerIdToDatastoreKey(r),S),{peer:bytesToPeer(r,S),previous:x,updated:!0})}}class PersistentPeerStore{store;events;peerId;log;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:peer-store"),this.events=r.events,this.peerId=r.peerId,this.store=new PersistentStore(r,g)}[Symbol.toStringTag]="@libp2p/peer-store";async forEach(r,g){this.log.trace("forEach await read lock");const _=await this.store.lock.readLock();this.log.trace("forEach got read lock");try{for await(const x of this.store.all(g))r(x)}finally{this.log.trace("forEach release read lock"),_()}}async all(r){this.log.trace("all await read lock");const g=await this.store.lock.readLock();this.log.trace("all got read lock");try{return await all$1(this.store.all(r))}finally{this.log.trace("all release read lock"),g()}}async delete(r){this.log.trace("delete await write lock");const g=await this.store.lock.writeLock();this.log.trace("delete got write lock");try{await this.store.delete(r)}finally{this.log.trace("delete release write lock"),g()}}async has(r){this.log.trace("has await read lock");const g=await this.store.lock.readLock();this.log.trace("has got read lock");try{return await this.store.has(r)}finally{this.log.trace("has release read lock"),g()}}async get(r){this.log.trace("get await read lock");const g=await this.store.lock.readLock();this.log.trace("get got read lock");try{return await this.store.load(r)}finally{this.log.trace("get release read lock"),g()}}async save(r,g){this.log.trace("save await write lock");const _=await this.store.lock.writeLock();this.log.trace("save got write lock");try{const x=await this.store.save(r,g);return this.#e(r,x),x.peer}finally{this.log.trace("save release write lock"),_()}}async patch(r,g){this.log.trace("patch await write lock");const _=await this.store.lock.writeLock();this.log.trace("patch got write lock");try{const x=await this.store.patch(r,g);return this.#e(r,x),x.peer}finally{this.log.trace("patch release write lock"),_()}}async merge(r,g){this.log.trace("merge await write lock");const _=await this.store.lock.writeLock();this.log.trace("merge got write lock");try{const x=await this.store.merge(r,g);return this.#e(r,x),x.peer}finally{this.log.trace("merge release write lock"),_()}}async consumePeerRecord(r,g){const _=await RecordEnvelope.openAndCertify(r,PeerRecord.DOMAIN),x=peerIdFromCID(_.publicKey.toCID());if(g?.equals(x)===!1)return this.log("envelope peer id was not the expected peer id - expected: %p received: %p",g,x),!1;const S=PeerRecord.createFromProtobuf(_.payload);let E;try{E=await this.get(x)}catch(C){if(C.name!=="NotFoundError")throw C}if(E?.peerRecordEnvelope!=null){const C=await RecordEnvelope.createFromProtobuf(E.peerRecordEnvelope),T=PeerRecord.createFromProtobuf(C.payload);if(T.seqNumber>=S.seqNumber)return this.log("sequence number was lower or equal to existing sequence number - stored: %d received: %d",T.seqNumber,S.seqNumber),!1}return await this.patch(S.peerId,{peerRecordEnvelope:r,addresses:S.multiaddrs.map(C=>({isCertified:!0,multiaddr:C}))}),!0}#e(r,g){g.updated&&(this.peerId.equals(r)?this.events.safeDispatchEvent("self:peer:update",{detail:g}):this.events.safeDispatchEvent("peer:update",{detail:g}))}}function persistentPeerStore(n,r={}){return new PersistentPeerStore(n,r)}function debounce$1(n,r){let g;const _=function(){const x=function(){g=void 0,n()};clearTimeout(g),g=setTimeout(x,r)};return _.start=()=>{},_.stop=()=>{clearTimeout(g)},_}const MAX_DATE=864e13,CODEC_TLS=448,CODEC_SNI=449,CODEC_DNS=53,CODEC_DNS4=54,CODEC_DNS6=55,CODEC_DNSADDR=56;class DNSMappings{log;mappings;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:address-manager:dns-mappings"),this.mappings=new Map}has(r){const g=this.findHost(r);for(const _ of this.mappings.values())if(_.domain===g)return!0;return!1}add(r,g){g.forEach(_=>{this.log("add DNS mapping %s to %s",_,r);const x=isPrivateIp(_)===!0;this.mappings.set(_,{domain:r,verified:x,expires:x?MAX_DATE-Date.now():0,lastVerified:x?MAX_DATE-Date.now():void 0})})}remove(r){const g=this.findHost(r);let _=!1;for(const[x,S]of this.mappings.entries())S.domain===g&&(this.log("removing %s to %s DNS mapping %e",x,S.domain,new Error("where")),this.mappings.delete(x),_=_||S.verified);return _}getAll(r){const g=[];for(let _=0;_<r.length;_++){const S=r[_].multiaddr.stringTuples(),E=S[0][1];if(E!=null)for(const[C,T]of this.mappings.entries()){if(E!==C)continue;this.maybeAddSNITuple(S,T.domain)&&(r.splice(_,1),_--,g.push({multiaddr:multiaddr(`/${S.map(A=>[getProtocol(A[0]).name,A[1]].join("/")).join("/")}`),verified:T.verified,type:"dns-mapping",expires:T.expires,lastVerified:T.lastVerified}))}}return g}maybeAddSNITuple(r,g){for(let _=0;_<r.length;_++)if(r[_][0]===CODEC_TLS&&r[_+1]?.[0]!==CODEC_SNI)return r.splice(_+1,0,[CODEC_SNI,g]),!0;return!1}confirm(r,g){const _=this.findHost(r);let x=!1;for(const[S,E]of this.mappings.entries())E.domain===_&&(this.log("marking %s to %s DNS mapping as verified",S,E.domain),x=E.verified,E.verified=!0,E.expires=Date.now()+g,E.lastVerified=Date.now());return x}unconfirm(r,g){const _=this.findHost(r);let x=!1;for(const[S,E]of this.mappings.entries())E.domain===_&&(this.log("removing verification of %s to %s DNS mapping",S,E.domain),x=x||E.verified,E.verified=!1,E.expires=Date.now()+g);return x}findHost(r){for(const g of r.stringTuples())if(g[0]===CODEC_SNI||g[0]===CODEC_DNS||g[0]===CODEC_DNS4||g[0]===CODEC_DNS6||g[0]===CODEC_DNSADDR)return g[1]}}const CODEC_IP4$2=4,CODEC_IP6$2=41,CODEC_TCP=6,CODEC_UDP=273;class IPMappings{log;mappings;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:address-manager:ip-mappings"),this.mappings=new Map}has(r){const g=r.stringTuples();for(const _ of this.mappings.values())for(const x of _)if(x.externalIp===g[0][1])return!0;return!1}add(r,g,_,x=g,S="tcp"){const E=`${r}-${g}-${S}`,C=this.mappings.get(E)??[],T={internalIp:r,internalPort:g,externalIp:_,externalPort:x,externalFamily:isIPv4$1(_)?4:6,protocol:S,verified:!1,expires:0};C.push(T),this.mappings.set(E,C)}remove(r){const g=r.stringTuples(),_=g[0][1]??"",x=g[1][0]===CODEC_TCP?"tcp":"udp",S=parseInt(g[1][1]??"0");let E=!1;for(const[C,T]of this.mappings.entries()){for(let R=0;R<T.length;R++){const A=T[R];A.externalIp===_&&A.externalPort===S&&A.protocol===x&&(this.log("removing %s:%s to %s:%s %s IP mapping",A.externalIp,A.externalPort,_,S,x),E=E||A.verified,T.splice(R,1),R--)}T.length===0&&this.mappings.delete(C)}return E}getAll(r){const g=[];for(const{multiaddr:_}of r){const x=_.stringTuples();let S;if((x[0][0]===CODEC_IP4$2||x[0][0]===CODEC_IP6$2)&&x[1][0]===CODEC_TCP?S=`${x[0][1]}-${x[1][1]}-tcp`:(x[0][0]===CODEC_IP4$2||x[0][0]===CODEC_IP6$2)&&x[1][0]===CODEC_UDP&&(S=`${x[0][1]}-${x[1][1]}-udp`),S==null)continue;const E=this.mappings.get(S);if(E!=null)for(const C of E)x[0][0]=C.externalFamily===4?CODEC_IP4$2:CODEC_IP6$2,x[0][1]=C.externalIp,x[1][1]=`${C.externalPort}`,g.push({multiaddr:multiaddr(`/${x.map(T=>[getProtocol(T[0]).name,T[1]].join("/")).join("/")}`),verified:C.verified,type:"ip-mapping",expires:C.expires,lastVerified:C.lastVerified})}return g}confirm(r,g){const x=r.stringTuples()[0][1];let S=!1;for(const E of this.mappings.values())for(const C of E)C.externalIp===x&&(this.log("marking %s to %s IP mapping as verified",C.internalIp,C.externalIp),S=C.verified,C.verified=!0,C.expires=Date.now()+g,C.lastVerified=Date.now());return S}unconfirm(r,g){const _=r.stringTuples(),x=_[0][1]??"",S=_[1][0]===CODEC_TCP?"tcp":"udp",E=parseInt(_[1][1]??"0");let C=!1;for(const T of this.mappings.values())for(let R=0;R<T.length;R++){const A=T[R];A.externalIp===x&&A.externalPort===E&&A.protocol===S&&(this.log("removing verification of %s:%s to %s:%s %s IP mapping",A.externalIp,A.externalPort,x,E,S),C=C||A.verified,A.verified=!1,A.expires=Date.now()+g)}return C}}const CODEC_IP4$1=4,CODEC_IP6$1=41;function isLinkLocal(n){try{const[[r,g]]=n.stringTuples();if(g==null)return!1;if(r===CODEC_IP4$1)return g.startsWith("169.254.");if(r===CODEC_IP6$1)return g.toLowerCase().startsWith("fe80")}catch{}return!1}const defaultValues$2={maxObservedAddresses:10};class ObservedAddresses{log;addresses;maxObservedAddresses;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:address-manager:observed-addresses"),this.addresses=new Map,this.maxObservedAddresses=g.maxObservedAddresses??defaultValues$2.maxObservedAddresses}has(r){return this.addresses.has(r.toString())}removePrefixed(r){for(const g of this.addresses.keys())g.toString().startsWith(r)&&this.addresses.delete(g)}add(r){this.addresses.size!==this.maxObservedAddresses&&(isPrivate(r)||isLinkLocal(r)||(this.log("adding observed address %a",r),this.addresses.set(r.toString(),{verified:!1,expires:0})))}getAll(){return Array.from(this.addresses).map(([r,g])=>({multiaddr:multiaddr(r),verified:g.verified,type:"observed",expires:g.expires,lastVerified:g.lastVerified}))}remove(r){const g=this.addresses.get(r.toString())?.verified??!1;return this.log("removing observed address %a",r),this.addresses.delete(r.toString()),g}confirm(r,g){const _=r.toString(),x=this.addresses.get(_)??{verified:!1,expires:Date.now()+g,lastVerified:Date.now()},S=x.verified;return x.verified=!0,x.lastVerified=Date.now(),this.log("marking observed address %a as verified",_),this.addresses.set(_,x),S}}const defaultValues$1={maxObservedAddresses:10};class TransportAddresses{log;addresses;maxObservedAddresses;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:address-manager:observed-addresses"),this.addresses=new Map,this.maxObservedAddresses=g.maxObservedAddresses??defaultValues$1.maxObservedAddresses}get(r,g){if(isPrivate(r))return{multiaddr:r,verified:!0,type:"transport",expires:Date.now()+g,lastVerified:Date.now()};const _=this.toKey(r);let x=this.addresses.get(_);return x==null&&(x={verified:!1,expires:0},this.addresses.set(_,x)),{multiaddr:r,verified:x.verified,type:"transport",expires:x.expires,lastVerified:x.lastVerified}}has(r){const g=this.toKey(r);return this.addresses.has(g)}remove(r){const g=this.toKey(r),_=this.addresses.get(g)?.verified??!1;return this.log("removing observed address %a",r),this.addresses.delete(g),_}confirm(r,g){const _=this.toKey(r),x=this.addresses.get(_)??{verified:!1,expires:0,lastVerified:0},S=x.verified;return x.verified=!0,x.expires=Date.now()+g,x.lastVerified=Date.now(),this.addresses.set(_,x),S}unconfirm(r,g){const _=this.toKey(r),x=this.addresses.get(_)??{verified:!1,expires:0},S=x.verified;return x.verified=!1,x.expires=Date.now()+g,this.addresses.set(_,x),S}toKey(r){const g=r.toOptions();return`${g.host}-${g.port}-${g.transport}`}}const ONE_MINUTE=6e4,defaultValues={maxObservedAddresses:10,addressVerificationTTL:ONE_MINUTE*10,addressVerificationRetry:ONE_MINUTE*5},defaultAddressFilter=n=>n;function stripPeerId(n,r){const g=n.getPeerId();return g!=null&&peerIdFromString$1(g).equals(r)&&(n=n.decapsulate(multiaddr(`/p2p/${r.toString()}`))),n}class AddressManager{log;components;listen;announce;appendAnnounce;announceFilter;observed;dnsMappings;ipMappings;transportAddresses;observedAddressFilter;addressVerificationTTL;addressVerificationRetry;constructor(r,g={}){const{listen:_=[],announce:x=[],appendAnnounce:S=[]}=g;this.components=r,this.log=r.logger.forComponent("libp2p:address-manager"),this.listen=_.map(E=>E.toString()),this.announce=new Set(x.map(E=>E.toString())),this.appendAnnounce=new Set(S.map(E=>E.toString())),this.observed=new ObservedAddresses(r,g),this.dnsMappings=new DNSMappings(r,g),this.ipMappings=new IPMappings(r,g),this.transportAddresses=new TransportAddresses(r,g),this.announceFilter=g.announceFilter??defaultAddressFilter,this.observedAddressFilter=createScalableCuckooFilter(1024),this.addressVerificationTTL=g.addressVerificationTTL??defaultValues.addressVerificationTTL,this.addressVerificationRetry=g.addressVerificationRetry??defaultValues.addressVerificationRetry,this._updatePeerStoreAddresses=debounce$1(this._updatePeerStoreAddresses.bind(this),1e3),r.events.addEventListener("transport:listening",()=>{this._updatePeerStoreAddresses()}),r.events.addEventListener("transport:close",()=>{this._updatePeerStoreAddresses()})}[Symbol.toStringTag]="@libp2p/address-manager";_updatePeerStoreAddresses(){const r=this.getAddresses().map(g=>g.getPeerId()===this.components.peerId.toString()?g.decapsulate(`/p2p/${this.components.peerId.toString()}`):g);this.components.peerStore.patch(this.components.peerId,{multiaddrs:r}).catch(g=>{this.log.error("error updating addresses",g)})}getListenAddrs(){return Array.from(this.listen).map(r=>multiaddr(r))}getAnnounceAddrs(){return Array.from(this.announce).map(r=>multiaddr(r))}getAppendAnnounceAddrs(){return Array.from(this.appendAnnounce).map(r=>multiaddr(r))}getObservedAddrs(){return this.observed.getAll().map(r=>r.multiaddr)}addObservedAddr(r){const g=r.stringTuples(),_=`${g[0][1]}:${g[1][1]}`;this.observedAddressFilter.has(_)||(this.observedAddressFilter.add(_),r=stripPeerId(r,this.components.peerId),!this.ipMappings.has(r)&&(this.dnsMappings.has(r)||this.observed.add(r)))}confirmObservedAddr(r,g){r=stripPeerId(r,this.components.peerId);let _=!0;this.observed.has(r)&&(_=this.observed.confirm(r,g?.ttl??this.addressVerificationTTL)),this.transportAddresses.has(r)&&(_=this.transportAddresses.confirm(r,g?.ttl??this.addressVerificationTTL)),this.dnsMappings.has(r)&&(_=this.dnsMappings.confirm(r,g?.ttl??this.addressVerificationTTL)),this.ipMappings.has(r)&&(_=this.ipMappings.confirm(r,g?.ttl??this.addressVerificationTTL)),_||this._updatePeerStoreAddresses()}removeObservedAddr(r,g){r=stripPeerId(r,this.components.peerId);let _=!1;this.observed.has(r)&&(_=this.observed.remove(r)),this.transportAddresses.has(r)&&(_=this.transportAddresses.unconfirm(r,g?.ttl??this.addressVerificationRetry)),this.dnsMappings.has(r)&&(_=this.dnsMappings.unconfirm(r,g?.ttl??this.addressVerificationRetry)),this.ipMappings.has(r)&&(_=this.ipMappings.unconfirm(r,g?.ttl??this.addressVerificationRetry)),_&&this._updatePeerStoreAddresses()}getAddresses(){const r=new Set,g=this.getAddressesWithMetadata().filter(_=>{if(!_.verified)return!1;const x=_.multiaddr.toString();return r.has(x)?!1:(r.add(x),!0)}).map(_=>_.multiaddr);return this.announceFilter(g.map(_=>{const x=multiaddr(_);return x.protos().pop()?.path===!0||x.getPeerId()===this.components.peerId.toString()?x:x.encapsulate(`/p2p/${this.components.peerId.toString()}`)}))}getAddressesWithMetadata(){const r=this.getAnnounceAddrs();if(r.length>0)return r.map(_=>({multiaddr:_,verified:!0,type:"announce",expires:Date.now()+this.addressVerificationTTL,lastVerified:Date.now()}));let g=[];return g=g.concat(this.components.transportManager.getAddrs().map(_=>this.transportAddresses.get(_,this.addressVerificationTTL))),g=g.concat(this.getAppendAnnounceAddrs().map(_=>({multiaddr:_,verified:!0,type:"announce",expires:Date.now()+this.addressVerificationTTL,lastVerified:Date.now()}))),g=g.concat(this.observed.getAll()),g=g.concat(this.ipMappings.getAll(g)),g=g.concat(this.dnsMappings.getAll(g)),g}addDNSMapping(r,g){this.dnsMappings.add(r,g)}removeDNSMapping(r){this.dnsMappings.remove(multiaddr(`/dns/${r}`))&&this._updatePeerStoreAddresses()}addPublicAddressMapping(r,g,_,x=g,S="tcp"){this.ipMappings.add(r,g,_,x,S),this.observed.removePrefixed(`/ip${isIPv4$1(_)?4:6}/${_}/${S}/${x}`)}removePublicAddressMapping(r,g,_,x=g,S="tcp"){this.ipMappings.remove(multiaddr(`/ip${isIPv4$1(_)?4:6}/${_}/${S}/${x}`))&&this._updatePeerStoreAddresses()}}var messages$1;(function(n){n.NOT_STARTED_YET="The libp2p node is not started yet",n.NOT_FOUND="Not found"})(messages$1||(messages$1={}));class MissingServiceError extends Error{constructor(r="Missing service"){super(r),this.name="MissingServiceError"}}class UnmetServiceDependenciesError extends Error{constructor(r="Unmet service dependencies"){super(r),this.name="UnmetServiceDependenciesError"}}class NoContentRoutersError extends Error{constructor(r="No content routers available"){super(r),this.name="NoContentRoutersError"}}class NoPeerRoutersError extends Error{constructor(r="No peer routers available"){super(r),this.name="NoPeerRoutersError"}}class QueriedForSelfError extends Error{constructor(r="Should not try to find self"){super(r),this.name="QueriedForSelfError"}}class UnhandledProtocolError extends Error{constructor(r="Unhandled protocol error"){super(r),this.name="UnhandledProtocolError"}}class DuplicateProtocolHandlerError extends Error{constructor(r="Duplicate protocol handler error"){super(r),this.name="DuplicateProtocolHandlerError"}}class DialDeniedError extends Error{constructor(r="Dial denied error"){super(r),this.name="DialDeniedError"}}class NoValidAddressesError extends Error{constructor(r="No valid addresses"){super(r),this.name="NoValidAddressesError"}}class ConnectionInterceptedError extends Error{constructor(r="Connection intercepted"){super(r),this.name="ConnectionInterceptedError"}}class ConnectionDeniedError extends Error{constructor(r="Connection denied"){super(r),this.name="ConnectionDeniedError"}}class MuxerUnavailableError extends Error{constructor(r="Stream is not multiplexed"){super(r),this.name="MuxerUnavailableError"}}class EncryptionFailedError extends Error{constructor(r="Encryption failed"){super(r),this.name="EncryptionFailedError"}}class TransportUnavailableError extends Error{constructor(r="Transport unavailable"){super(r),this.name="TransportUnavailableError"}}class DefaultComponents{components={};_started=!1;constructor(r={}){this.components={};for(const[g,_]of Object.entries(r))this.components[g]=_;this.components.logger==null&&(this.components.logger=defaultLogger())}isStarted(){return this._started}async _invokeStartableMethod(r){await Promise.all(Object.values(this.components).filter(g=>isStartable(g)).map(async g=>{await g[r]?.()}))}async beforeStart(){await this._invokeStartableMethod("beforeStart")}async start(){await this._invokeStartableMethod("start"),this._started=!0}async afterStart(){await this._invokeStartableMethod("afterStart")}async beforeStop(){await this._invokeStartableMethod("beforeStop")}async stop(){await this._invokeStartableMethod("stop"),this._started=!1}async afterStop(){await this._invokeStartableMethod("afterStop")}}const OPTIONAL_SERVICES=["metrics","connectionProtector","dns"],NON_SERVICE_PROPERTIES=["components","isStarted","beforeStart","start","afterStart","beforeStop","stop","afterStop","then","_invokeStartableMethod"];function defaultComponents(n={}){const r=new DefaultComponents(n);return new Proxy(r,{get(_,x,S){if(typeof x=="string"&&!NON_SERVICE_PROPERTIES.includes(x)){const E=r.components[x];if(E==null&&!OPTIONAL_SERVICES.includes(x))throw new MissingServiceError(`${x} not set`);return E}return Reflect.get(_,x,S)},set(_,x,S){return typeof x=="string"?r.components[x]=S:Reflect.set(_,x,S),!0}})}function checkServiceDependencies(n){const r={};for(const g of Object.values(n.components))for(const _ of getServiceCapabilities(g))r[_]=!0;for(const g of Object.values(n.components))for(const _ of getServiceDependencies(g))if(r[_]!==!0)throw new UnmetServiceDependenciesError(`Service "${getServiceName(g)}" required capability "${_}" but it was not provided by any component, you may need to add additional configuration when creating your node.`)}function getServiceCapabilities(n){return Array.isArray(n?.[serviceCapabilities])?n[serviceCapabilities]:[]}function getServiceDependencies(n){return Array.isArray(n?.[serviceDependencies])?n[serviceDependencies]:[]}function getServiceName(n){return n?.[Symbol.toStringTag]??n?.toString()??"unknown"}const CODEC_IP4=4,CODEC_IP6=41;function connectionGater(n={}){return{denyDialPeer:async()=>!1,denyDialMultiaddr:async r=>{if(WebSockets$2.matches(r))return!1;const g=r.stringTuples();return g[0][0]===CODEC_IP4||g[0][0]===CODEC_IP6?!!isPrivateIp(`${g[0][1]}`):!1},denyInboundConnection:async()=>!1,denyOutboundConnection:async()=>!1,denyInboundEncryptedConnection:async()=>!1,denyOutboundEncryptedConnection:async()=>!1,denyInboundUpgradedConnection:async()=>!1,denyOutboundUpgradedConnection:async()=>!1,filterMultiaddrForPeer:async()=>!0,...n}}function getPeerAddress(n){if(isPeerId(n))return{peerId:n,multiaddrs:[]};Array.isArray(n)||(n=[n]);let r;if(n.length>0){const g=n[0].getPeerId();r=g==null?void 0:peerIdFromString$1(g),n.forEach(_=>{if(!isMultiaddr(_))throw new InvalidMultiaddrError("Invalid multiaddr");const x=_.getPeerId();if(x==null){if(r!=null)throw new InvalidParametersError("Multiaddrs must all have the same peer id or have no peer id")}else{const S=peerIdFromString$1(x);if(r?.equals(S)!==!0)throw new InvalidParametersError("Multiaddrs must all have the same peer id or have no peer id")}})}return{peerId:r,multiaddrs:n}}const DEFAULT_CLOSABLE_PROTOCOLS=["/ipfs/id/1.0.0","/ipfs/id/push/1.0.0","/libp2p/autonat/1.0.0","/libp2p/dcutr"];async function safelyCloseConnectionIfUnused(n,r){const g=n?.streams?.map(x=>x.protocol)??[],_=r?.closableProtocols??DEFAULT_CLOSABLE_PROTOCOLS;if(!(g.filter(x=>x!=null&&!_.includes(x)).length>0))try{await n?.close(r)}catch(x){n?.abort(x)}}const DIAL_TIMEOUT=5e3,UPGRADE_TIMEOUT=3e3,PROTOCOL_NEGOTIATION_TIMEOUT=2e3,MAX_PEER_ADDRS_TO_DIAL=25,INBOUND_CONNECTION_THRESHOLD=5,MAX_INCOMING_PENDING_CONNECTIONS=10,MAX_PARALLEL_RECONNECTS=5,LAST_DIAL_FAILURE_KEY="last-dial-failure",LAST_DIAL_SUCCESS_KEY="last-dial-success",MAX_DIAL_QUEUE_LENGTH=500,MAX_CONNECTIONS=100,MAX_PARALLEL_DIALS=50;async function resolveMultiaddrs(n,r){let g=!1;for(const x of resolvers.keys())if(g=n.protoNames().includes(x),g)break;if(!g)return[n];const _=await n.resolve(r);return r.log("resolved %s to",n,_.map(x=>x.toString())),_}function multiaddrToIpNet(n){try{let r;if(typeof n=="string"?r=multiaddr(n):r=n,!r.protoNames().includes("ipcidr")){const _=r.protoNames().includes("ip6")?"/ipcidr/128":"/ipcidr/32";r=r.encapsulate(_)}return convertToIpNet(r)}catch{throw new Error(`Can't convert to IpNet, Invalid multiaddr format: ${n}`)}}const defaultOptions$2={maxConnections:MAX_CONNECTIONS,allow:[]};class ConnectionPruner{maxConnections;connectionManager;peerStore;allow;events;log;constructor(r,g={}){this.maxConnections=g.maxConnections??defaultOptions$2.maxConnections,this.allow=(g.allow??[]).map(_=>multiaddrToIpNet(_)),this.connectionManager=r.connectionManager,this.peerStore=r.peerStore,this.events=r.events,this.log=r.logger.forComponent("libp2p:connection-manager:connection-pruner"),this.maybePruneConnections=this.maybePruneConnections.bind(this)}start(){this.events.addEventListener("connection:open",this.maybePruneConnections)}stop(){this.events.removeEventListener("connection:open",this.maybePruneConnections)}maybePruneConnections(){this._maybePruneConnections().catch(r=>{this.log.error("error while pruning connections %e",r)})}async _maybePruneConnections(){const r=this.connectionManager.getConnections(),g=r.length;if(this.log("checking max connections limit %d/%d",g,this.maxConnections),g<=this.maxConnections)return;const _=new PeerMap;for(const C of r){const T=C.remotePeer;if(!_.has(T)){_.set(T,0);try{const R=await this.peerStore.get(T);_.set(T,[...R.tags.values()].reduce((A,I)=>A+I.value,0))}catch(R){R.name!=="NotFoundError"&&this.log.error("error loading peer tags",R)}}}const x=this.sortConnections(r,_),S=Math.max(g-this.maxConnections,0),E=[];for(const C of x)if(this.log("too many connections open - closing a connection to %p",C.remotePeer),this.allow.some(R=>R.contains(C.remoteAddr.nodeAddress().address))||E.push(C),E.length===S)break;await Promise.all(E.map(async C=>{await safelyCloseConnectionIfUnused(C,{signal:AbortSignal.timeout(1e3)})})),this.events.safeDispatchEvent("connection:prune",{detail:E})}sortConnections(r,g){return r.sort((_,x)=>{const S=_.timeline.open,E=x.timeline.open;return S<E?1:S>E?-1:0}).sort((_,x)=>_.direction==="outbound"&&x.direction==="inbound"?1:_.direction==="inbound"&&x.direction==="outbound"?-1:0).sort((_,x)=>_.streams.length>x.streams.length?1:_.streams.length<x.streams.length?-1:0).sort((_,x)=>{const S=g.get(_.remotePeer)??0,E=g.get(x.remotePeer)??0;return S>E?1:S<E?-1:0})}}class PriorityQueue extends Queue{constructor(r={}){super({...r,sort:(g,_)=>g.options.priority>_.options.priority?-1:g.options.priority<_.options.priority?1:0})}}function reliableTransportsFirst(n,r){const g=TCP$1.exactMatch(n.multiaddr),_=TCP$1.exactMatch(r.multiaddr);if(g&&!_)return-1;if(!g&&_)return 1;const x=WebSocketsSecure$1.exactMatch(n.multiaddr),S=WebSocketsSecure$1.exactMatch(r.multiaddr);if(x&&!S)return-1;if(!x&&S)return 1;const E=WebSockets$2.exactMatch(n.multiaddr),C=WebSockets$2.exactMatch(r.multiaddr);if(E&&!C)return-1;if(!E&&C)return 1;const T=WebRTC.exactMatch(n.multiaddr),R=WebRTC.exactMatch(r.multiaddr);if(T&&!R)return-1;if(!T&&R)return 1;const A=WebRTCDirect$1.exactMatch(n.multiaddr),I=WebRTCDirect$1.exactMatch(r.multiaddr);if(A&&!I)return-1;if(!A&&I)return 1;const B=WebTransport$2.exactMatch(n.multiaddr),D=WebTransport$2.exactMatch(r.multiaddr);return B&&!D?-1:!B&&D?1:0}function publicAddressesFirst(n,r){const g=isPrivate(n.multiaddr),_=isPrivate(r.multiaddr);return g&&!_?1:!g&&_?-1:0}function certifiedAddressesFirst(n,r){return n.isCertified&&!r.isCertified?-1:!n.isCertified&&r.isCertified?1:0}function circuitRelayAddressesLast(n,r){const g=Circuit$2.exactMatch(n.multiaddr),_=Circuit$2.exactMatch(r.multiaddr);return g&&!_?1:!g&&_?-1:0}function defaultAddressSorter(n){return n.sort(reliableTransportsFirst).sort(certifiedAddressesFirst).sort(circuitRelayAddressesLast).sort(publicAddressesFirst)}const defaultOptions$1={maxParallelDials:MAX_PARALLEL_DIALS,maxDialQueueLength:MAX_DIAL_QUEUE_LENGTH,maxPeerAddrsToDial:MAX_PEER_ADDRS_TO_DIAL,dialTimeout:DIAL_TIMEOUT,resolvers:{dnsaddr:dnsaddrResolver}};class DialQueue{queue;components;addressSorter;maxPeerAddrsToDial;maxDialQueueLength;dialTimeout;shutDownController;connections;log;constructor(r,g={}){this.addressSorter=g.addressSorter,this.maxPeerAddrsToDial=g.maxPeerAddrsToDial??defaultOptions$1.maxPeerAddrsToDial,this.maxDialQueueLength=g.maxDialQueueLength??defaultOptions$1.maxDialQueueLength,this.dialTimeout=g.dialTimeout??defaultOptions$1.dialTimeout,this.connections=g.connections??new PeerMap,this.log=r.logger.forComponent("libp2p:connection-manager:dial-queue"),this.components=r,this.shutDownController=new AbortController,setMaxListeners(1/0,this.shutDownController.signal);for(const[_,x]of Object.entries(g.resolvers??{}))resolvers.set(_,x);this.queue=new PriorityQueue({concurrency:g.maxParallelDials??defaultOptions$1.maxParallelDials,metricName:"libp2p_dial_queue",metrics:r.metrics}),this.queue.addEventListener("error",_=>{_.detail.name!==AbortError$4.name&&this.log.error("error in dial queue - %e",_.detail)})}start(){this.shutDownController=new AbortController,setMaxListeners(1/0,this.shutDownController.signal)}stop(){this.shutDownController.abort(),this.queue.abort()}async dial(r,g={}){const{peerId:_,multiaddrs:x}=getPeerAddress(r),S=Array.from(this.connections.values()).flat().find(C=>g.force===!0?!1:C.remotePeer.equals(_)?!0:x.find(T=>T.equals(C.remoteAddr)));if(S?.status==="open")return this.log("already connected to %a",S.remoteAddr),g.onProgress?.(new CustomProgressEvent("dial-queue:already-connected")),S;const E=this.queue.queue.find(C=>{if(_?.equals(C.options.peerId)===!0)return!0;const T=C.options.multiaddrs;if(T==null)return!1;for(const R of x)if(T.has(R.toString()))return!0;return!1});if(E!=null){this.log("joining existing dial target for %p",_);for(const C of x)E.options.multiaddrs.add(C.toString());return g.onProgress?.(new CustomProgressEvent("dial-queue:already-in-dial-queue")),E.join(g)}if(this.queue.size>=this.maxDialQueueLength)throw new DialError("Dial queue is full");return this.log("creating dial target for %p",_,x.map(C=>C.toString())),g.onProgress?.(new CustomProgressEvent("dial-queue:add-to-dial-queue")),this.queue.add(async C=>{C?.onProgress?.(new CustomProgressEvent("dial-queue:start-dial"));const T=anySignal([this.shutDownController.signal,C.signal]);setMaxListeners(1/0,T);let R;try{R=await this.calculateMultiaddrs(_,C?.multiaddrs,{...C,signal:T}),C?.onProgress?.(new CustomProgressEvent("dial-queue:calculated-addresses",R)),R.map(({multiaddr:A})=>A.toString()).forEach(A=>{C?.multiaddrs.add(A)})}catch(A){throw T.clear(),A}try{let A=0;const I=[];for(const B of R){if(A===this.maxPeerAddrsToDial)throw this.log("dialed maxPeerAddrsToDial (%d) addresses for %p, not trying any others",A,_),new DialError("Peer had more than maxPeerAddrsToDial");A++;try{const D=await this.components.transportManager.dial(B.multiaddr,{...C,signal:T});this.log("dial to %a succeeded",B.multiaddr);try{await this.components.peerStore.merge(D.remotePeer,{multiaddrs:[D.remoteAddr],metadata:{[LAST_DIAL_SUCCESS_KEY]:fromString(Date.now().toString())}})}catch(N){this.log.error("could not update last dial failure key for %p",_,N)}return D}catch(D){if(this.log.error("dial failed to %a",B.multiaddr,D),_!=null)try{await this.components.peerStore.merge(_,{metadata:{[LAST_DIAL_FAILURE_KEY]:fromString(Date.now().toString())}})}catch(N){this.log.error("could not update last dial failure key for %p",_,N)}if(T.aborted)throw new TimeoutError(D.message);I.push(D)}}throw I.length===1?I[0]:new AggregateError(I,"All multiaddr dials failed")}finally{T.clear()}},{peerId:_,priority:g.priority??DEFAULT_DIAL_PRIORITY,multiaddrs:new Set(x.map(C=>C.toString())),signal:g.signal??AbortSignal.timeout(this.dialTimeout),onProgress:g.onProgress})}async calculateMultiaddrs(r,g=new Set,_={}){const x=[...g].map(I=>({multiaddr:multiaddr(I),isCertified:!1}));if(r!=null){if(this.components.peerId.equals(r))throw new DialError("Tried to dial self");if(await this.components.connectionGater.denyDialPeer?.(r)===!0)throw new DialDeniedError("The dial request is blocked by gater.allowDialPeer");if(x.length===0){this.log("loading multiaddrs for %p",r);try{const I=await this.components.peerStore.get(r);x.push(...I.addresses),this.log("loaded multiaddrs for %p",r,x.map(({multiaddr:B})=>B.toString()))}catch(I){if(I.name!=="NotFoundError")throw I}}if(x.length===0){this.log("looking up multiaddrs for %p in the peer routing",r);try{const I=await this.components.peerRouting.findPeer(r);this.log("found multiaddrs for %p in the peer routing",r,x.map(({multiaddr:B})=>B.toString())),x.push(...I.multiaddrs.map(B=>({multiaddr:B,isCertified:!1})))}catch(I){I.name!=="NoPeerRoutersError"&&this.log.error("looking up multiaddrs for %p in the peer routing failed",r,I)}}}let S=(await Promise.all(x.map(async I=>{const B=await resolveMultiaddrs(I.multiaddr,{dns:this.components.dns,..._,log:this.log});return B.length===1&&B[0].equals(I.multiaddr)?I:B.map(D=>({multiaddr:D,isCertified:!1}))}))).flat();if(r!=null){const I=`/p2p/${r.toString()}`;S=S.map(B=>B.multiaddr.protos().pop()?.path===!0?B:B.multiaddr.getPeerId()==null?{multiaddr:B.multiaddr.encapsulate(I),isCertified:B.isCertified}:B)}const E=S.filter(I=>{if(this.components.transportManager.dialTransportForMultiaddr(I.multiaddr)==null)return!1;const B=I.multiaddr.getPeerId();return r!=null&&B!=null?r.equals(B):!0}),C=new Map;for(const I of E){const B=I.multiaddr.toString(),D=C.get(B);if(D!=null){D.isCertified=D.isCertified||I.isCertified||!1;continue}C.set(B,I)}const T=[...C.values()];if(T.length===0)throw new NoValidAddressesError("The dial request has no valid addresses");const R=[];for(const I of T)this.components.connectionGater.denyDialMultiaddr!=null&&await this.components.connectionGater.denyDialMultiaddr(I.multiaddr)||R.push(I);const A=this.addressSorter==null?defaultAddressSorter(R):R.sort(this.addressSorter);if(A.length===0)throw new DialDeniedError("The connection gater denied all addresses in the dial request");return this.log.trace("addresses for %p before filtering",r??"unknown peer",S.map(({multiaddr:I})=>I.toString())),this.log.trace("addresses for %p after filtering",r??"unknown peer",A.map(({multiaddr:I})=>I.toString())),A}async isDialable(r,g={}){Array.isArray(r)||(r=[r]);try{const _=await this.calculateMultiaddrs(void 0,new Set(r.map(x=>x.toString())),g);return g.runOnLimitedConnection===!1?_.find(x=>!Circuit$2.matches(x.multiaddr))!=null:!0}catch(_){this.log.trace("error calculating if multiaddr(s) were dialable",_)}return!1}}var retry$2={},retry_operation,hasRequiredRetry_operation;function requireRetry_operation(){if(hasRequiredRetry_operation)return retry_operation;hasRequiredRetry_operation=1;function n(r,g){typeof g=="boolean"&&(g={forever:g}),this._originalTimeouts=JSON.parse(JSON.stringify(r)),this._timeouts=r,this._options=g||{},this._maxRetryTime=g&&g.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return retry_operation=n,n.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},n.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},n.prototype.retry=function(r){if(this._timeout&&clearTimeout(this._timeout),!r)return!1;var g=new Date().getTime();if(r&&g-this._operationStart>=this._maxRetryTime)return this._errors.push(r),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(r);var _=this._timeouts.shift();if(_===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),_=this._cachedTimeouts.slice(-1);else return!1;var x=this;return this._timer=setTimeout(function(){x._attempts++,x._operationTimeoutCb&&(x._timeout=setTimeout(function(){x._operationTimeoutCb(x._attempts)},x._operationTimeout),x._options.unref&&x._timeout.unref()),x._fn(x._attempts)},_),this._options.unref&&this._timer.unref(),!0},n.prototype.attempt=function(r,g){this._fn=r,g&&(g.timeout&&(this._operationTimeout=g.timeout),g.cb&&(this._operationTimeoutCb=g.cb));var _=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){_._operationTimeoutCb()},_._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},n.prototype.try=function(r){console.log("Using RetryOperation.try() is deprecated"),this.attempt(r)},n.prototype.start=function(r){console.log("Using RetryOperation.start() is deprecated"),this.attempt(r)},n.prototype.start=n.prototype.try,n.prototype.errors=function(){return this._errors},n.prototype.attempts=function(){return this._attempts},n.prototype.mainError=function(){if(this._errors.length===0)return null;for(var r={},g=null,_=0,x=0;x<this._errors.length;x++){var S=this._errors[x],E=S.message,C=(r[E]||0)+1;r[E]=C,C>=_&&(g=S,_=C)}return g},retry_operation}var hasRequiredRetry$1;function requireRetry$1(){return hasRequiredRetry$1||(hasRequiredRetry$1=1,function(n){var r=requireRetry_operation();n.operation=function(g){var _=n.timeouts(g);return new r(_,{forever:g&&(g.forever||g.retries===1/0),unref:g&&g.unref,maxRetryTime:g&&g.maxRetryTime})},n.timeouts=function(g){if(g instanceof Array)return[].concat(g);var _={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var x in g)_[x]=g[x];if(_.minTimeout>_.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var S=[],E=0;E<_.retries;E++)S.push(this.createTimeout(E,_));return g&&g.forever&&!S.length&&S.push(this.createTimeout(E,_)),S.sort(function(C,T){return C-T}),S},n.createTimeout=function(g,_){var x=_.randomize?Math.random()+1:1,S=Math.round(x*Math.max(_.minTimeout,1)*Math.pow(_.factor,g));return S=Math.min(S,_.maxTimeout),S},n.wrap=function(g,_,x){if(_ instanceof Array&&(x=_,_=null),!x){x=[];for(var S in g)typeof g[S]=="function"&&x.push(S)}for(var E=0;E<x.length;E++){var C=x[E],T=g[C];g[C]=function(A){var I=n.operation(_),B=Array.prototype.slice.call(arguments,1),D=B.pop();B.push(function(N){I.retry(N)||(N&&(arguments[0]=I.mainError()),D.apply(this,arguments))}),I.attempt(function(){A.apply(g,B)})}.bind(g,T),g[C].options=_}}}(retry$2)),retry$2}var retry$1,hasRequiredRetry;function requireRetry(){return hasRequiredRetry||(hasRequiredRetry=1,retry$1=requireRetry$1()),retry$1}var retryExports=requireRetry();const retry=getDefaultExportFromCjs(retryExports),objectToString=Object.prototype.toString,isError=n=>objectToString.call(n)==="[object Error]",errorMessages=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function isNetworkError(n){return n&&isError(n)&&n.name==="TypeError"&&typeof n.message=="string"?n.message==="Load failed"?n.stack===void 0:errorMessages.has(n.message):!1}class AbortError extends Error{constructor(r){super(),r instanceof Error?(this.originalError=r,{message:r}=r):(this.originalError=new Error(r),this.originalError.stack=this.stack),this.name="AbortError",this.message=r}}const decorateErrorWithCounts=(n,r,g)=>{const _=g.retries-(r-1);return n.attemptNumber=r,n.retriesLeft=_,n};async function pRetry(n,r){return new Promise((g,_)=>{r={...r},r.onFailedAttempt??=()=>{},r.shouldRetry??=()=>!0,r.retries??=10;const x=retry.operation(r),S=()=>{x.stop(),_(r.signal?.reason)};r.signal&&!r.signal.aborted&&r.signal.addEventListener("abort",S,{once:!0});const E=()=>{r.signal?.removeEventListener("abort",S),x.stop()};x.attempt(async C=>{try{const T=await n(C);E(),g(T)}catch(T){try{if(!(T instanceof Error))throw new TypeError(`Non-error was thrown: "${T}". You should only throw errors.`);if(T instanceof AbortError)throw T.originalError;if(T instanceof TypeError&&!isNetworkError(T))throw T;if(decorateErrorWithCounts(T,C,r),await r.shouldRetry(T)||(x.stop(),_(T)),await r.onFailedAttempt(T),!x.retry(T))throw x.mainError()}catch(R){decorateErrorWithCounts(R,C,r),E(),_(R)}}})})}class ReconnectQueue{log;queue;started;peerStore;retries;retryInterval;backoffFactor;connectionManager;events;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:reconnect-queue"),this.peerStore=r.peerStore,this.connectionManager=r.connectionManager,this.queue=new PeerQueue({concurrency:g.maxParallelReconnects??MAX_PARALLEL_RECONNECTS,metricName:"libp2p_reconnect_queue",metrics:r.metrics}),this.started=!1,this.retries=g.retries??5,this.backoffFactor=g.backoffFactor,this.retryInterval=g.retryInterval,this.events=r.events,r.events.addEventListener("peer:disconnect",_=>{this.maybeReconnect(_.detail).catch(x=>{this.log.error("failed to maybe reconnect to %p - %e",_.detail,x)})})}async maybeReconnect(r){if(!this.started)return;const g=await this.peerStore.get(r);hasKeepAliveTag(g)&&(this.queue.has(r)||this.queue.add(async _=>{await pRetry(async x=>{if(this.started)try{await this.connectionManager.openConnection(r,{signal:_?.signal})}catch(S){throw this.log("reconnecting to %p attempt %d of %d failed - %e",r,x,this.retries,S),S}},{signal:_?.signal,retries:this.retries,factor:this.backoffFactor,minTimeout:this.retryInterval})},{peerId:r}).catch(async _=>{this.log.error("failed to reconnect to %p - %e",r,_);const x={};[...g.tags.keys()].forEach(S=>{S.startsWith(KEEP_ALIVE)&&(x[S]=void 0)}),await this.peerStore.merge(r,{tags:x}),this.events.safeDispatchEvent("peer:reconnect-failure",{detail:r})}).catch(async _=>{this.log.error("failed to remove keep-alive tag from %p - %e",r,_)}))}start(){this.started=!0}async afterStart(){Promise.resolve().then(async()=>{const r=await this.peerStore.all({filters:[g=>hasKeepAliveTag(g)]});await Promise.all(r.map(async g=>{await this.connectionManager.openConnection(g.id).catch(_=>{this.log.error(_)})}))}).catch(r=>{this.log.error(r)})}stop(){this.started=!1,this.queue.abort()}}function hasKeepAliveTag(n){for(const r of n.tags.keys())if(r.startsWith(KEEP_ALIVE))return!0;return!1}const DEFAULT_DIAL_PRIORITY=50,defaultOptions={maxConnections:MAX_CONNECTIONS,inboundConnectionThreshold:INBOUND_CONNECTION_THRESHOLD,maxIncomingPendingConnections:MAX_INCOMING_PENDING_CONNECTIONS};class DefaultConnectionManager{started;connections;allow;deny;maxIncomingPendingConnections;incomingPendingConnections;outboundPendingConnections;maxConnections;dialQueue;reconnectQueue;connectionPruner;inboundConnectionRateLimiter;peerStore;metrics;events;log;peerId;constructor(r,g={}){if(this.maxConnections=g.maxConnections??defaultOptions.maxConnections,this.maxConnections<1)throw new InvalidParametersError("Connection Manager maxConnections must be greater than 0");this.connections=new PeerMap,this.started=!1,this.peerId=r.peerId,this.peerStore=r.peerStore,this.metrics=r.metrics,this.events=r.events,this.log=r.logger.forComponent("libp2p:connection-manager"),this.onConnect=this.onConnect.bind(this),this.onDisconnect=this.onDisconnect.bind(this),this.allow=(g.allow??[]).map(_=>multiaddrToIpNet(_)),this.deny=(g.deny??[]).map(_=>multiaddrToIpNet(_)),this.incomingPendingConnections=0,this.maxIncomingPendingConnections=g.maxIncomingPendingConnections??defaultOptions.maxIncomingPendingConnections,this.outboundPendingConnections=0,this.inboundConnectionRateLimiter=new RateLimiter({points:g.inboundConnectionThreshold??defaultOptions.inboundConnectionThreshold,duration:1}),this.connectionPruner=new ConnectionPruner({connectionManager:this,peerStore:r.peerStore,events:r.events,logger:r.logger},{maxConnections:this.maxConnections,allow:g.allow?.map(_=>multiaddr(_))}),this.dialQueue=new DialQueue(r,{addressSorter:g.addressSorter,maxParallelDials:g.maxParallelDials??MAX_PARALLEL_DIALS,maxDialQueueLength:g.maxDialQueueLength??MAX_DIAL_QUEUE_LENGTH,maxPeerAddrsToDial:g.maxPeerAddrsToDial??MAX_PEER_ADDRS_TO_DIAL,dialTimeout:g.dialTimeout??DIAL_TIMEOUT,resolvers:g.resolvers??{dnsaddr:dnsaddrResolver},connections:this.connections}),this.reconnectQueue=new ReconnectQueue({events:r.events,peerStore:r.peerStore,logger:r.logger,connectionManager:this},{retries:g.reconnectRetries,retryInterval:g.reconnectRetryInterval,backoffFactor:g.reconnectBackoffFactor,maxParallelReconnects:g.maxParallelReconnects})}[Symbol.toStringTag]="@libp2p/connection-manager";async start(){this.metrics?.registerMetricGroup("libp2p_connection_manager_connections",{calculate:()=>{const r={inbound:0,"inbound pending":this.incomingPendingConnections,outbound:0,"outbound pending":this.outboundPendingConnections};for(const g of this.connections.values())for(const _ of g)r[_.direction]++;return r}}),this.metrics?.registerMetricGroup("libp2p_protocol_streams_total",{label:"protocol",calculate:()=>{const r={};for(const g of this.connections.values())for(const _ of g)for(const x of _.streams){const S=`${x.direction} ${x.protocol??"unnegotiated"}`;r[S]=(r[S]??0)+1}return r}}),this.metrics?.registerMetricGroup("libp2p_connection_manager_protocol_streams_per_connection_90th_percentile",{label:"protocol",calculate:()=>{const r={};for(const _ of this.connections.values())for(const x of _){const S={};for(const E of x.streams){const C=`${E.direction} ${E.protocol??"unnegotiated"}`;S[C]=(S[C]??0)+1}for(const[E,C]of Object.entries(S))r[E]=r[E]??[],r[E].push(C)}const g={};for(let[_,x]of Object.entries(r)){x=x.sort((E,C)=>E-C);const S=Math.floor(x.length*.9);g[_]=x[S]}return g}}),this.events.addEventListener("connection:open",this.onConnect),this.events.addEventListener("connection:close",this.onDisconnect),await start(this.dialQueue,this.reconnectQueue,this.connectionPruner),this.started=!0,this.log("started")}async stop(){this.events.removeEventListener("connection:open",this.onConnect),this.events.removeEventListener("connection:close",this.onDisconnect),await stop(this.reconnectQueue,this.dialQueue,this.connectionPruner);const r=[];for(const g of this.connections.values())for(const _ of g)r.push((async()=>{try{await _.close()}catch(x){this.log.error(x)}})());this.log("closing %d connections",r.length),await Promise.all(r),this.connections.clear(),this.log("stopped")}getMaxConnections(){return this.maxConnections}onConnect(r){this._onConnect(r).catch(g=>{this.log.error(g)})}async _onConnect(r){const{detail:g}=r;if(!this.started){await g.close();return}if(g.status!=="open")return;const _=g.remotePeer,x=!this.connections.has(_),S=this.connections.get(_)??[];S.push(g),this.connections.set(_,S),_.publicKey!=null&&_.type==="RSA"&&await this.peerStore.patch(_,{publicKey:_.publicKey}),x&&this.events.safeDispatchEvent("peer:connect",{detail:g.remotePeer})}onDisconnect(r){const{detail:g}=r,_=g.remotePeer,S=(this.connections.get(_)??[]).filter(E=>E.id!==g.id);this.connections.set(_,S),S.length===0&&(this.log("onDisconnect remove all connections for peer %p",_),this.connections.delete(_),this.events.safeDispatchEvent("peer:disconnect",{detail:g.remotePeer}))}getConnections(r){if(r!=null)return this.connections.get(r)??[];let g=[];for(const _ of this.connections.values())g=g.concat(_);return g}getConnectionsMap(){return this.connections}async openConnection(r,g={}){if(!this.started)throw new NotStartedError("Not started");this.outboundPendingConnections++;try{g.signal?.throwIfAborted();const{peerId:_}=getPeerAddress(r);if(this.peerId.equals(_))throw new InvalidPeerIdError("Can not dial self");if(_!=null&&g.force!==!0){this.log("dial %p",_);const C=this.getConnections(_).find(T=>T.limits==null);if(C!=null)return this.log("had an existing non-limited connection to %p",_),g.onProgress?.(new CustomProgressEvent("dial-queue:already-connected")),C}const x=await this.dialQueue.dial(r,{...g,priority:g.priority??DEFAULT_DIAL_PRIORITY});if(x.status!=="open")throw new ConnectionClosedError("Remote closed connection during opening");let S=this.connections.get(x.remotePeer);S==null&&(S=[],this.connections.set(x.remotePeer,S));let E=!1;for(const C of S)if(C.id===x.id&&(E=!0),g.force!==!0&&C.id!==x.id&&C.remoteAddr.equals(x.remoteAddr))return x.abort(new InvalidMultiaddrError("Duplicate multiaddr connection")),C;return E||S.push(x),x}finally{this.outboundPendingConnections--}}async closeConnections(r,g={}){const _=this.connections.get(r)??[];await Promise.all(_.map(async x=>{try{await x.close(g)}catch(S){x.abort(S)}}))}async acceptIncomingConnection(r){if(this.deny.some(x=>x.contains(r.remoteAddr.nodeAddress().address)))return this.log("connection from %a refused - connection remote address was in deny list",r.remoteAddr),!1;if(this.allow.some(x=>x.contains(r.remoteAddr.nodeAddress().address)))return this.incomingPendingConnections++,!0;if(this.incomingPendingConnections===this.maxIncomingPendingConnections)return this.log("connection from %a refused - incomingPendingConnections exceeded by host",r.remoteAddr),!1;if(r.remoteAddr.isThinWaistAddress()){const x=r.remoteAddr.nodeAddress().address;try{await this.inboundConnectionRateLimiter.consume(x,1)}catch{return this.log("connection from %a refused - inboundConnectionThreshold exceeded by host %s",r.remoteAddr,x),!1}}return this.getConnections().length<this.maxConnections?(this.incomingPendingConnections++,!0):(this.log("connection from %a refused - maxConnections exceeded",r.remoteAddr),!1)}afterUpgradeInbound(){this.incomingPendingConnections--}getDialQueue(){const r={queued:"queued",running:"active",errored:"error",complete:"success"};return this.dialQueue.queue.queue.map(g=>({id:g.id,status:r[g.status],peerId:g.options.peerId,multiaddrs:[...g.options.multiaddrs].map(_=>multiaddr(_))}))}async isDialable(r,g={}){return this.dialQueue.isDialable(r,g)}}const DEFAULT_PING_INTERVAL_MS=1e4,PROTOCOL_VERSION="1.0.0",PROTOCOL_NAME="ping",PROTOCOL_PREFIX="ipfs",PING_LENGTH=32,DEFAULT_ABORT_CONNECTION_ON_PING_FAILURE=!0;class ConnectionMonitor{protocol;components;log;heartbeatInterval;pingIntervalMs;abortController;timeout;abortConnectionOnPingFailure;constructor(r,g={}){this.components=r,this.protocol=`/${g.protocolPrefix??PROTOCOL_PREFIX}/${PROTOCOL_NAME}/${PROTOCOL_VERSION}`,this.log=r.logger.forComponent("libp2p:connection-monitor"),this.pingIntervalMs=g.pingInterval??DEFAULT_PING_INTERVAL_MS,this.abortConnectionOnPingFailure=g.abortConnectionOnPingFailure??DEFAULT_ABORT_CONNECTION_ON_PING_FAILURE,this.timeout=new AdaptiveTimeout({...g.pingTimeout??{},metrics:r.metrics,metricName:"libp2p_connection_monitor_ping_time_milliseconds"})}[Symbol.toStringTag]="@libp2p/connection-monitor";[serviceCapabilities]=["@libp2p/connection-monitor"];start(){this.abortController=new AbortController,setMaxListeners(1/0,this.abortController.signal),this.heartbeatInterval=setInterval(()=>{this.components.connectionManager.getConnections().forEach(r=>{Promise.resolve().then(async()=>{let g=Date.now();try{const _=this.timeout.getTimeoutSignal({signal:this.abortController?.signal}),x=await r.newStream(this.protocol,{signal:_,runOnLimitedConnection:!0}),S=byteStream(x);g=Date.now(),await Promise.all([S.write(randomBytes(PING_LENGTH),{signal:_}),S.read(PING_LENGTH,{signal:_})]),r.rtt=Date.now()-g,await S.unwrap().close({signal:_})}catch(_){if(_.name!=="UnsupportedProtocolError")throw _;r.rtt=(Date.now()-g)/2}}).catch(g=>{this.log.error("error during heartbeat",g),this.abortConnectionOnPingFailure?(this.log.error("aborting connection due to ping failure"),r.abort(g)):this.log("connection ping failed, but not aborting due to abortConnectionOnPingFailure flag")})})},this.pingIntervalMs)}stop(){this.abortController?.abort(),this.heartbeatInterval!=null&&clearInterval(this.heartbeatInterval)}}class CompoundContentRouting{routers;started;components;constructor(r,g){this.routers=g.routers??[],this.started=!1,this.components=r}[Symbol.toStringTag]="@libp2p/content-routing";isStarted(){return this.started}async start(){this.started=!0}async stop(){this.started=!1}async*findProviders(r,g={}){if(this.routers.length===0)throw new NoContentRoutersError("No content routers available");const _=this,x=new PeerSet;for await(const S of merge$2(..._.routers.map(E=>E.findProviders(r,g))))S!=null&&(S.multiaddrs.length>0&&await this.components.peerStore.merge(S.id,{multiaddrs:S.multiaddrs}),!x.has(S.id)&&(x.add(S.id),yield S))}async provide(r,g={}){if(this.routers.length===0)throw new NoContentRoutersError("No content routers available");await Promise.all(this.routers.map(async _=>{await _.provide(r,g)}))}async cancelReprovide(r,g={}){if(this.routers.length===0)throw new NoContentRoutersError("No content routers available");await Promise.all(this.routers.map(async _=>{await _.cancelReprovide(r,g)}))}async put(r,g,_){if(!this.isStarted())throw new NotStartedError;await Promise.all(this.routers.map(async x=>{await x.put(r,g,_)}))}async get(r,g){if(!this.isStarted())throw new NotStartedError;return Promise.any(this.routers.map(async _=>_.get(r,g)))}}class DefaultPeerRouting{log;peerId;peerStore;routers;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:peer-routing"),this.peerId=r.peerId,this.peerStore=r.peerStore,this.routers=g.routers??[]}[Symbol.toStringTag]="@libp2p/peer-routing";async findPeer(r,g){if(this.routers.length===0)throw new NoPeerRoutersError("No peer routers available");if(r.toString()===this.peerId.toString())throw new QueriedForSelfError("Should not try to find self");const _=this,x=merge$2(...this.routers.map(S=>async function*(){try{yield await S.findPeer(r,g)}catch(E){_.log.error(E)}}()));for await(const S of x)if(S!=null)return S.multiaddrs.length>0&&await this.peerStore.merge(S.id,{multiaddrs:S.multiaddrs}),S;throw new NotFoundError$1}async*getClosestPeers(r,g={}){if(this.routers.length===0)throw new NoPeerRoutersError("No peer routers available");const _=this,x=createScalableCuckooFilter(1024);for await(const S of parallel$1(async function*(){const E=merge$2(..._.routers.map(C=>C.getClosestPeers(r,g)));for await(let C of E)yield async()=>{if(C.multiaddrs.length===0)try{C=await _.findPeer(C.id,{...g,useCache:!1})}catch(T){_.log.error("could not find peer multiaddrs",T);return}return C}}()))S!=null&&(S.multiaddrs.length>0&&await this.peerStore.merge(S.id,{multiaddrs:S.multiaddrs}),!x.has(S.id.toMultihash().bytes)&&(x.add(S.id.toMultihash().bytes),yield S))}}class RandomWalk extends TypedEventEmitter{peerRouting;log;walking;walkers;shutdownController;walkController;needNext;constructor(r){super(),this.log=r.logger.forComponent("libp2p:random-walk"),this.peerRouting=r.peerRouting,this.walkers=0,this.walking=!1,this.shutdownController=new AbortController,setMaxListeners(1/0,this.shutdownController.signal)}[Symbol.toStringTag]="@libp2p/random-walk";start(){this.shutdownController=new AbortController,setMaxListeners(1/0,this.shutdownController.signal)}stop(){this.shutdownController.abort()}async*walk(r){this.walking||this.startWalk(),this.walkers++;const g=anySignal([this.shutdownController.signal,r?.signal]);setMaxListeners(1/0,g);try{for(;;)this.needNext?.resolve(),this.needNext=pDefer(),yield(await raceEvent(this,"walk:peer",g,{errorEvent:"walk:error"})).detail}finally{g.clear(),this.walkers--,this.walkers===0&&(this.walkController?.abort(),this.walkController=void 0)}}startWalk(){this.walking=!0,this.walkController=new AbortController,setMaxListeners(1/0,this.walkController.signal);const r=anySignal([this.walkController.signal,this.shutdownController.signal]);setMaxListeners(1/0,r);const g=Date.now();let _=0;Promise.resolve().then(async()=>{for(this.log("start walk");this.walkers>0;)try{const x=randomBytes(32);let S=Date.now();for await(const E of this.peerRouting.getClosestPeers(x,{signal:r}))r.aborted&&this.log("aborting walk"),r.throwIfAborted(),this.log("found peer %p after %dms for %d walkers",E.id,Date.now()-S,this.walkers),_++,this.safeDispatchEvent("walk:peer",{detail:E}),this.walkers===1&&this.needNext!=null&&(this.log("wait for need next"),await raceSignal(this.needNext.promise,r)),S=Date.now();this.log("walk iteration for %b and %d walkers finished, found %d peers",x,this.walkers,_)}catch(x){this.log.error("randomwalk errored",x),this.safeDispatchEvent("walk:error",{detail:x})}this.log("no walkers left, ended walk")}).catch(x=>{this.log.error("randomwalk errored",x)}).finally(()=>{this.log("finished walk, found %d peers after %dms",_,Date.now()-g),this.walking=!1})}}const DEFAULT_MAX_INBOUND_STREAMS=32,DEFAULT_MAX_OUTBOUND_STREAMS=64;class DefaultRegistrar{log;topologies;handlers;components;constructor(r){this.log=r.logger.forComponent("libp2p:registrar"),this.topologies=new Map,this.handlers=new Map,this.components=r,this._onDisconnect=this._onDisconnect.bind(this),this._onPeerUpdate=this._onPeerUpdate.bind(this),this._onPeerIdentify=this._onPeerIdentify.bind(this),this.components.events.addEventListener("peer:disconnect",this._onDisconnect),this.components.events.addEventListener("peer:update",this._onPeerUpdate),this.components.events.addEventListener("peer:identify",this._onPeerIdentify)}[Symbol.toStringTag]="@libp2p/registrar";getProtocols(){return Array.from(new Set([...this.handlers.keys()])).sort()}getHandler(r){const g=this.handlers.get(r);if(g==null)throw new UnhandledProtocolError(`No handler registered for protocol ${r}`);return g}getTopologies(r){const g=this.topologies.get(r);return g==null?[]:[...g.values()]}async handle(r,g,_){if(this.handlers.has(r))throw new DuplicateProtocolHandlerError(`Handler already registered for protocol ${r}`);const x=mergeOptions$9.bind({ignoreUndefined:!0})({maxInboundStreams:DEFAULT_MAX_INBOUND_STREAMS,maxOutboundStreams:DEFAULT_MAX_OUTBOUND_STREAMS},_);this.handlers.set(r,{handler:g,options:x}),await this.components.peerStore.merge(this.components.peerId,{protocols:[r]})}async unhandle(r){(Array.isArray(r)?r:[r]).forEach(_=>{this.handlers.delete(_)}),await this.components.peerStore.patch(this.components.peerId,{protocols:this.getProtocols()})}async register(r,g){if(g==null)throw new InvalidParametersError("invalid topology");const _=`${(Math.random()*1e9).toString(36)}${Date.now()}`;let x=this.topologies.get(r);return x==null&&(x=new Map,this.topologies.set(r,x)),x.set(_,g),_}unregister(r){for(const[g,_]of this.topologies.entries())_.has(r)&&(_.delete(r),_.size===0&&this.topologies.delete(g))}_onDisconnect(r){const g=r.detail;this.components.peerStore.get(g).then(_=>{for(const x of _.protocols){const S=this.topologies.get(x);if(S!=null)for(const E of S.values())E.filter?.has(g)!==!1&&(E.filter?.remove(g),E.onDisconnect?.(g))}}).catch(_=>{_.name!=="NotFoundError"&&this.log.error("could not inform topologies of disconnecting peer %p",g,_)})}_onPeerUpdate(r){const{peer:g,previous:_}=r.detail,x=(_?.protocols??[]).filter(S=>!g.protocols.includes(S));for(const S of x){const E=this.topologies.get(S);if(E!=null)for(const C of E.values())C.filter?.has(g.id)!==!1&&(C.filter?.remove(g.id),C.onDisconnect?.(g.id))}}_onPeerIdentify(r){const g=r.detail.protocols,_=r.detail.connection,x=r.detail.peerId;for(const S of g){const E=this.topologies.get(S);if(E!=null)for(const C of E.values())_.limits!=null&&C.notifyOnLimitedConnection!==!0||C.filter?.has(x)!==!0&&(C.filter?.add(x),C.onConnect?.(x,_))}}}class DefaultTransportManager{log;components;transports;listeners;faultTolerance;started;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:transports"),this.components=r,this.started=!1,this.transports=new Map,this.listeners=trackedMap({name:"libp2p_transport_manager_listeners",metrics:this.components.metrics}),this.faultTolerance=g.faultTolerance??FaultTolerance.FATAL_ALL}[Symbol.toStringTag]="@libp2p/transport-manager";add(r){const g=r[Symbol.toStringTag];if(g==null)throw new InvalidParametersError("Transport must have a valid tag");if(this.transports.has(g))throw new InvalidParametersError(`There is already a transport with the tag ${g}`);this.log("adding transport %s",g),this.transports.set(g,r),this.listeners.has(g)||this.listeners.set(g,[])}isStarted(){return this.started}start(){this.started=!0}async afterStart(){const r=this.components.addressManager.getListenAddrs();await this.listen(r)}async stop(){const r=[];for(const[g,_]of this.listeners)for(this.log("closing listeners for %s",g);_.length>0;){const x=_.pop();x!=null&&r.push(x.close())}await Promise.all(r),this.log("all listeners closed");for(const g of this.listeners.keys())this.listeners.set(g,[]);this.started=!1}async dial(r,g){const _=this.dialTransportForMultiaddr(r);if(_==null)throw new TransportUnavailableError(`No transport available for address ${String(r)}`);return g?.onProgress?.(new CustomProgressEvent("transport-manager:selected-transport",_[Symbol.toStringTag])),_.dial(r,{...g,upgrader:this.components.upgrader})}getAddrs(){let r=[];for(const g of this.listeners.values())for(const _ of g)r=[...r,..._.getAddrs()];return r}getTransports(){return Array.of(...this.transports.values())}getListeners(){return Array.of(...this.listeners.values()).flat()}dialTransportForMultiaddr(r){for(const g of this.transports.values())if(g.dialFilter([r]).length>0)return g}listenTransportForMultiaddr(r){for(const g of this.transports.values())if(g.listenFilter([r]).length>0)return g}async listen(r){if(!this.isStarted())throw new NotStartedError("Not started");if(r==null||r.length===0){this.log("no addresses were provided for listening, this node is dial only");return}const g=[];for(const[_,x]of this.transports.entries()){const S=x.listenFilter(r),E=[];for(const R of S){this.log("creating listener for %s on %a",_,R);const A=x.createListener({upgrader:this.components.upgrader});let I=this.listeners.get(_)??[];I==null&&(I=[],this.listeners.set(_,I)),I.push(A),A.addEventListener("listening",()=>{this.components.events.safeDispatchEvent("transport:listening",{detail:A})}),A.addEventListener("close",()=>{const B=I.findIndex(D=>D===A);I.splice(B,1),this.components.events.safeDispatchEvent("transport:close",{detail:A})}),E.push(A.listen(R))}if(E.length===0){g.push(_);continue}if((await Promise.allSettled(E)).find(R=>R.status==="fulfilled")==null&&this.faultTolerance!==FaultTolerance.NO_FATAL)throw new NoValidAddressesError(`Transport (${_}) could not listen on any available address`)}if(g.length===this.transports.size){const _=`no valid addresses were provided for transports [${g.join(", ")}]`;if(this.faultTolerance===FaultTolerance.FATAL_ALL)throw new NoValidAddressesError(_);this.log(`libp2p in dial mode only: ${_}`)}}async remove(r){const g=this.listeners.get(r)??[];this.log.trace("removing transport %s",r);const _=[];for(this.log.trace("closing listeners for %s",r);g.length>0;){const x=g.pop();x!=null&&_.push(x.close())}await Promise.all(_),this.transports.delete(r),this.listeners.delete(r)}async removeAll(){const r=[];for(const g of this.transports.keys())r.push(this.remove(g));await Promise.all(r)}}const PROTOCOL_ID="/multistream/1.0.0",MAX_PROTOCOL_LENGTH=1024,NewLine$1=fromString(`
`);async function write(n,r,g){await n.write(r,g)}async function writeAll(n,r,g){await n.writeV(r,g)}async function read(n,r){const g=await n.read(r);if(g.byteLength===0||g.get(g.byteLength-1)!==NewLine$1[0])throw r.log.error("Invalid mss message - missing newline",g),new InvalidMessageError("Missing newline");return g.sublist(0,-1)}async function readString(n,r){const g=await read(n,r);return toString$3(g.subarray())}async function select(n,r,g){if(r=Array.isArray(r)?[...r]:[r],r.length===1&&g.negotiateFully===!1)return optimisticSelect(n,r[0],g);const _=lpStream(n,{...g,maxDataLength:MAX_PROTOCOL_LENGTH}),x=r.shift();if(x==null)throw new Error("At least one protocol must be specified");g.log.trace('select: write ["%s", "%s"]',PROTOCOL_ID,x);const S=fromString(`${PROTOCOL_ID}
`),E=fromString(`${x}
`);await writeAll(_,[S,E],g),g.log.trace("select: reading multistream-select header");let C=await readString(_,g);if(g.log.trace('select: read "%s"',C),C===PROTOCOL_ID&&(g.log.trace("select: reading protocol response"),C=await readString(_,g),g.log.trace('select: read "%s"',C)),C===x)return{stream:_.unwrap(),protocol:x};for(const T of r){g.log.trace('select: write "%s"',T),await write(_,fromString(`${T}
`),g),g.log.trace("select: reading protocol response");const R=await readString(_,g);if(g.log.trace('select: read "%s" for "%s"',R,T),R===T)return{stream:_.unwrap(),protocol:T}}throw new UnsupportedProtocolError("protocol selection failed")}function optimisticSelect(n,r,g){const _=n.sink.bind(n),x=n.source;let S=!1,E=!1;const C=pDefer();let T=!1,R=!1;const A=pDefer();let I=!1,B=!1;const D=pDefer(),N=lpStream({sink:_,source:x},{...g,maxDataLength:MAX_PROTOCOL_LENGTH});n.sink=async F=>{const{sink:U}=N.unwrap();await U(async function*(){let j=!1;for await(const z of F){if(R&&await A.promise,T)yield z;else{R=!0,g.log.trace('optimistic: write ["%s", "%s", data(%d)] in sink',PROTOCOL_ID,r,z.byteLength);const W=`${r}
`;yield new Uint8ArrayList(Uint8Array.from([19]),fromString(`${PROTOCOL_ID}
`),encode$d(W.length),fromString(W),z).subarray(),g.log.trace('optimistic: wrote ["%s", "%s", data(%d)] in sink',PROTOCOL_ID,r,z.byteLength),T=!0,R=!1,A.resolve(),M().catch(X=>{g.log.error("could not finish optimistic protocol negotiation of %s",r,X)})}j=!0}j||await M()}())};async function M(){if(E){g.log.trace("optimistic: already negotiating %s stream",r),await C.promise;return}E=!0;try{T||(g.log.trace("optimistic: doing send protocol for %s stream",r),await O()),I||(g.log.trace("optimistic: doing read protocol for %s stream",r),await L())}finally{E=!1,S=!0,C.resolve()}}async function O(){if(R){await A.promise;return}R=!0;try{g.log.trace('optimistic: write ["%s", "%s", data] in source',PROTOCOL_ID,r),await N.writeV([fromString(`${PROTOCOL_ID}
`),fromString(`${r}
`)]),g.log.trace('optimistic: wrote ["%s", "%s", data] in source',PROTOCOL_ID,r)}finally{T=!0,R=!1,A.resolve()}}async function L(){if(B){await D.promise;return}B=!0;try{g.log.trace("optimistic: reading multistream select header");let F=await readString(N,g);if(g.log.trace('optimistic: read multistream select header "%s"',F),F===PROTOCOL_ID&&(F=await readString(N,g)),g.log.trace('optimistic: read protocol "%s", expecting "%s"',F,r),F!==r)throw new UnsupportedProtocolError("protocol selection failed")}finally{I=!0,B=!1,D.resolve()}}if(n.source=async function*(){await M(),g.log.trace('optimistic: reading data from "%s" stream',r),yield*N.unwrap().source}(),n.closeRead!=null){const F=n.closeRead.bind(n);n.closeRead=async U=>{S||await M().catch(j=>{g.log.error("could not negotiate protocol before close read",j)}),await F(U)}}if(n.closeWrite!=null){const F=n.closeWrite.bind(n);n.closeWrite=async U=>{S||await M().catch(j=>{g.log.error("could not negotiate protocol before close write",j)}),await F(U)}}if(n.close!=null){const F=n.close.bind(n);n.close=async U=>{const j=[];R&&j.push(A.promise),B&&j.push(D.promise),j.length>0?await raceSignal(Promise.all(j),U?.signal):(S=!0,E=!1,C.resolve()),await F(U)}}return{stream:n,protocol:r}}async function handle(n,r,g){r=Array.isArray(r)?r:[r],g.log.trace("handle: available protocols %s",r);const _=lpStream(n,{...g,maxDataLength:MAX_PROTOCOL_LENGTH,maxLengthLength:2});for(;;){g.log.trace("handle: reading incoming string");const x=await readString(_,g);if(g.log.trace('handle: read "%s"',x),x===PROTOCOL_ID){g.log.trace('handle: respond with "%s" for "%s"',PROTOCOL_ID,x),await write(_,fromString(`${PROTOCOL_ID}
`),g),g.log.trace('handle: responded with "%s" for "%s"',PROTOCOL_ID,x);continue}if(r.includes(x))return g.log.trace('handle: respond with "%s" for "%s"',x,x),await write(_,fromString(`${x}
`),g),g.log.trace('handle: responded with "%s" for "%s"',x,x),{stream:_.unwrap(),protocol:x};if(x==="ls"){const S=new Uint8ArrayList(...r.map(E=>encode$2.single(fromString(`${E}
`))),fromString(`
`));g.log.trace('handle: respond with "%s" for %s',r,x),await write(_,S,g),g.log.trace('handle: responded with "%s" for %s',r,x);continue}g.log.trace('handle: respond with "na" for "%s"',x),await write(_,fromString(`na
`),g),g.log('handle: responded with "na" for "%s"',x)}}const CLOSE_TIMEOUT=500;class ConnectionImpl{id;remoteAddr;remotePeer;direction;timeline;multiplexer;encryption;status;limits;log;tags;_newStream;_close;_abort;_getStreams;constructor(r){const{remoteAddr:g,remotePeer:_,newStream:x,close:S,abort:E,getStreams:C}=r;this.id=`${parseInt(String(Math.random()*1e9)).toString(36)}${Date.now()}`,this.remoteAddr=g,this.remotePeer=_,this.direction=r.direction,this.status="open",this.timeline=r.timeline,this.multiplexer=r.multiplexer,this.encryption=r.encryption,this.limits=r.limits,this.log=r.logger.forComponent(`libp2p:connection:${this.direction}:${this.id}`),this.remoteAddr.getPeerId()==null&&(this.remoteAddr=this.remoteAddr.encapsulate(`/p2p/${this.remotePeer}`)),this._newStream=x,this._close=S,this._abort=E,this._getStreams=C,this.tags=[]}[Symbol.toStringTag]="Connection";[connectionSymbol]=!0;get streams(){return this._getStreams()}async newStream(r,g){if(this.status==="closing")throw new ConnectionClosingError("the connection is being closed");if(this.status==="closed")throw new ConnectionClosedError("the connection is closed");if(Array.isArray(r)||(r=[r]),this.limits!=null&&g?.runOnLimitedConnection!==!0)throw new LimitedConnectionError("Cannot open protocol stream on limited connection");const _=await this._newStream(r,g);return _.direction="outbound",_}async close(r={}){if(!(this.status==="closed"||this.status==="closing")){if(this.log("closing connection to %a",this.remoteAddr),this.status="closing",r.signal==null){const g=AbortSignal.timeout(CLOSE_TIMEOUT);setMaxListeners(1/0,g),r={...r,signal:g}}try{this.log.trace("closing underlying transport"),await this._close(r),this.log.trace("updating timeline with close time"),this.status="closed",this.timeline.close=Date.now()}catch(g){this.log.error("error encountered during graceful close of connection to %a",this.remoteAddr,g),this.abort(g)}}}abort(r){this.status!=="closed"&&(this.log.error("aborting connection to %a due to error",this.remoteAddr,r),this.status="closing",this._abort(r),this.status="closed",this.timeline.close=Date.now())}}function createConnection(n){return new ConnectionImpl(n)}function findIncomingStreamLimit(n,r){try{const{options:g}=r.getHandler(n);return g.maxInboundStreams}catch(g){if(g.name!=="UnhandledProtocolError")throw g}return DEFAULT_MAX_INBOUND_STREAMS}function findOutgoingStreamLimit(n,r,g={}){try{const{options:_}=r.getHandler(n);if(_.maxOutboundStreams!=null)return _.maxOutboundStreams}catch(_){if(_.name!=="UnhandledProtocolError")throw _}return g.maxOutboundStreams??DEFAULT_MAX_OUTBOUND_STREAMS}function countStreams(n,r,g){let _=0;return g.streams.forEach(x=>{x.direction===r&&x.protocol===n&&_++}),_}class DefaultUpgrader{components;connectionEncrypters;streamMuxers;inboundUpgradeTimeout;outboundUpgradeTimeout;inboundStreamProtocolNegotiationTimeout;outboundStreamProtocolNegotiationTimeout;events;metrics;constructor(r,g){this.components=r,this.connectionEncrypters=new Map,g.connectionEncrypters.forEach(_=>{this.connectionEncrypters.set(_.protocol,_)}),this.streamMuxers=new Map,g.streamMuxers.forEach(_=>{this.streamMuxers.set(_.protocol,_)}),this.inboundUpgradeTimeout=g.inboundUpgradeTimeout??UPGRADE_TIMEOUT,this.outboundUpgradeTimeout=g.outboundUpgradeTimeout??UPGRADE_TIMEOUT,this.inboundStreamProtocolNegotiationTimeout=g.inboundStreamProtocolNegotiationTimeout??PROTOCOL_NEGOTIATION_TIMEOUT,this.outboundStreamProtocolNegotiationTimeout=g.outboundStreamProtocolNegotiationTimeout??PROTOCOL_NEGOTIATION_TIMEOUT,this.events=r.events,this.metrics={dials:r.metrics?.registerCounterGroup("libp2p_connection_manager_dials_total"),errors:r.metrics?.registerCounterGroup("libp2p_connection_manager_dial_errors_total")}}[Symbol.toStringTag]="@libp2p/upgrader";async shouldBlockConnection(r,...g){const _=this.components.connectionGater[r];if(_==null)return;if(await _.apply(this.components.connectionGater,g)===!0)throw new ConnectionInterceptedError(`The multiaddr connection is blocked by gater.${r}`)}async upgradeInbound(r,g={}){let _=!1;try{if(this.metrics.dials?.increment({inbound:!0}),_=await this.components.connectionManager.acceptIncomingConnection(r),!_)throw new ConnectionDeniedError("Connection denied");await this.shouldBlockConnection("denyInboundConnection",r),await this._performUpgrade(r,"inbound",g)}catch(x){throw this.metrics.errors?.increment({inbound:!0}),x}finally{_&&this.components.connectionManager.afterUpgradeInbound()}}async upgradeOutbound(r,g={}){try{this.metrics.dials?.increment({outbound:!0});const _=r.remoteAddr.getPeerId();let x;return _!=null&&(x=peerIdFromString$1(_),await this.shouldBlockConnection("denyOutboundConnection",x,r)),await this._performUpgrade(r,"outbound",g)}catch(_){throw this.metrics.errors?.increment({outbound:!0}),_}}async _performUpgrade(r,g,_){let x,S,E,C,T;const R=AbortSignal.timeout(g==="inbound"?this.inboundUpgradeTimeout:this.outboundUpgradeTimeout),A=anySignal([R,_.signal]);setMaxListeners(1/0,R,A),_.signal=A,this.components.metrics?.trackMultiaddrConnection(r),r.log.trace("starting the %s connection upgrade",g);let I=r;if(_?.skipProtection!==!0){const B=this.components.connectionProtector;B!=null&&(r.log("protecting the %s connection",g),I=await B.protect(r,_))}try{if(x=I,_?.skipEncryption!==!0){_?.onProgress?.(new CustomProgressEvent(`upgrader:encrypt-${g}-connection`)),{conn:x,remotePeer:S,protocol:T}=await(g==="inbound"?this._encryptInbound(I,{..._,signal:A}):this._encryptOutbound(I,{..._,signal:A}));const B={...I,...x};await this.shouldBlockConnection(g==="inbound"?"denyInboundEncryptedConnection":"denyOutboundEncryptedConnection",S,B)}else{const B=r.remoteAddr.getPeerId();if(B==null)throw new InvalidMultiaddrError(`${g} connection that skipped encryption must have a peer id`);const D=peerIdFromString$1(B);T="native",S=D}if(S.equals(this.components.peerId)){const B=new InvalidPeerIdError("Can not dial self");throw r.abort(B),B}if(E=x,_?.muxerFactory!=null)C=_.muxerFactory;else if(this.streamMuxers.size>0){_?.onProgress?.(new CustomProgressEvent(`upgrader:multiplex-${g}-connection`));const B=await(g==="inbound"?this._multiplexInbound({...I,...x},this.streamMuxers,_):this._multiplexOutbound({...I,...x},this.streamMuxers,_));C=B.muxerFactory,E=B.stream}}catch(B){throw r.log.error("failed to upgrade inbound connection %s %a - %e",g==="inbound"?"from":"to",r.remoteAddr,B),B}finally{A.clear()}return await this.shouldBlockConnection(g==="inbound"?"denyInboundUpgradedConnection":"denyOutboundUpgradedConnection",S,r),r.log("successfully upgraded %s connection",g),this._createConnection({cryptoProtocol:T,direction:g,maConn:r,upgradedConn:E,muxerFactory:C,remotePeer:S,limits:_?.limits})}_createConnection(r){const{cryptoProtocol:g,direction:_,maConn:x,upgradedConn:S,remotePeer:E,muxerFactory:C,limits:T}=r;let R,A,I;C!=null&&(R=C.createStreamMuxer({direction:_,onIncomingStream:N=>{I!=null&&Promise.resolve().then(async()=>{const M=this.components.registrar.getProtocols(),O=AbortSignal.timeout(this.inboundStreamProtocolNegotiationTimeout);setMaxListeners(1/0,O);const{stream:L,protocol:F}=await handle(N,M,{signal:O,log:N.log,yieldBytes:!1});if(I==null)return;I.log("incoming stream opened on %s",F);const U=findIncomingStreamLimit(F,this.components.registrar);if(countStreams(F,"inbound",I)===U){const z=new TooManyInboundProtocolStreamsError(`Too many inbound protocol streams for protocol "${F}" - limit ${U}`);throw N.abort(z),z}N.source=L.source,N.sink=L.sink,N.protocol=F,L.closeWrite!=null&&(N.closeWrite=L.closeWrite),L.closeRead!=null&&(N.closeRead=L.closeRead),L.close!=null&&(N.close=L.close),await this.components.peerStore.merge(E,{protocols:[F]}),this.components.metrics?.trackProtocolStream(N,I),this._onStream({connection:I,stream:N,protocol:F})}).catch(async M=>{I.log.error("error handling incoming stream id %s - %e",N.id,M),N.timeline.close==null&&await N.close()})}}),A=async(N,M={})=>{if(R==null)throw new MuxerUnavailableError("Connection is not multiplexed");I.log.trace("starting new stream for protocols %s",N);const O=await R.newStream();I.log.trace("started new stream %s for protocols %s",O.id,N);try{if(M.signal==null){O.log("no abort signal was passed while trying to negotiate protocols %s falling back to default timeout",N);const z=AbortSignal.timeout(this.outboundStreamProtocolNegotiationTimeout);setMaxListeners(1/0,z),M={...M,signal:z}}O.log.trace("selecting protocol from protocols %s",N);const{stream:L,protocol:F}=await select(O,N,{...M,log:O.log,yieldBytes:!0});O.log.trace("selected protocol %s",F);const U=findOutgoingStreamLimit(F,this.components.registrar,M),j=countStreams(F,"outbound",I);if(j>=U){const z=new TooManyOutboundProtocolStreamsError(`Too many outbound protocol streams for protocol "${F}" - ${j}/${U}`);throw O.abort(z),z}return await this.components.peerStore.merge(E,{protocols:[F]}),O.source=L.source,O.sink=L.sink,O.protocol=F,L.closeWrite!=null&&(O.closeWrite=L.closeWrite),L.closeRead!=null&&(O.closeRead=L.closeRead),L.close!=null&&(O.close=L.close),this.components.metrics?.trackProtocolStream(O,I),O}catch(L){throw I.log.error("could not create new outbound stream on connection %s %a for protocols %s - %e",_==="inbound"?"from":"to",r.maConn.remoteAddr,N,L),O.timeline.close==null&&O.abort(L),L}},Promise.all([R.sink(S.source),S.sink(R.source)]).catch(N=>{I.log.error("error piping data through muxer - %e",N)}));const B=x.timeline;x.timeline=new Proxy(B,{set:(...N)=>(N[1]==="close"&&N[2]!=null&&B.close==null&&(async()=>{try{I.status==="open"&&await I.close()}catch(M){I.log.error("error closing connection after timeline close %e",M)}finally{this.events.safeDispatchEvent("connection:close",{detail:I})}})().catch(M=>{I.log.error("error thrown while dispatching connection:close event %e",M)}),Reflect.set(...N))}),x.timeline.upgraded=Date.now();const D=()=>{throw new MuxerUnavailableError("Connection is not multiplexed")};return I=createConnection({remoteAddr:x.remoteAddr,remotePeer:E,status:"open",direction:_,timeline:x.timeline,multiplexer:R?.protocol,encryption:g,limits:T,logger:this.components.logger,newStream:A??D,getStreams:()=>R?.streams??[],close:async N=>{await R?.close(N),await x.close(N)},abort:N=>{x.abort(N),R?.abort(N)}}),this.events.safeDispatchEvent("connection:open",{detail:I}),I.__maConnTimeline=B,I}_onStream(r){const{connection:g,stream:_,protocol:x}=r,{handler:S,options:E}=this.components.registrar.getHandler(x);if(g.limits!=null&&E.runOnLimitedConnection!==!0)throw new LimitedConnectionError("Cannot open protocol stream on limited connection");S({connection:g,stream:_})}async _encryptInbound(r,g){const _=Array.from(this.connectionEncrypters.keys());try{const{stream:x,protocol:S}=await handle(r,_,{...g,log:r.log}),E=this.connectionEncrypters.get(S);if(E==null)throw new EncryptionFailedError(`no crypto module found for ${S}`);return r.log("encrypting inbound connection to %a using %s",r.remoteAddr,S),{...await E.secureInbound(x,g),protocol:S}}catch(x){throw r.log.error("encrypting inbound connection from %a failed",r.remoteAddr,x),new EncryptionFailedError(x.message)}}async _encryptOutbound(r,g){const _=Array.from(this.connectionEncrypters.keys());try{r.log.trace("selecting encrypter from %s",_);const{stream:x,protocol:S}=await select(r,_,{...g,log:r.log,yieldBytes:!0}),E=this.connectionEncrypters.get(S);if(E==null)throw new EncryptionFailedError(`no crypto module found for ${S}`);return r.log("encrypting outbound connection to %a using %s",r.remoteAddr,S),{...await E.secureOutbound(x,g),protocol:S}}catch(x){throw r.log.error("encrypting outbound connection to %a failed",r.remoteAddr,x),new EncryptionFailedError(x.message)}}async _multiplexOutbound(r,g,_){const x=Array.from(g.keys());r.log("outbound selecting muxer %s",x);try{r.log.trace("selecting stream muxer from %s",x);const{stream:S,protocol:E}=await select(r,x,{..._,log:r.log,yieldBytes:!0});r.log("selected %s as muxer protocol",E);const C=g.get(E);return{stream:S,muxerFactory:C}}catch(S){throw r.log.error("error multiplexing outbound connection",S),new MuxerUnavailableError(String(S))}}async _multiplexInbound(r,g,_){const x=Array.from(g.keys());r.log("inbound handling muxers %s",x);try{const{stream:S,protocol:E}=await handle(r,x,{..._,log:r.log}),C=g.get(E);return{stream:S,muxerFactory:C}}catch(S){throw r.log.error("error multiplexing inbound connection",S),new MuxerUnavailableError(String(S))}}}class Libp2p extends TypedEventEmitter{peerId;peerStore;contentRouting;peerRouting;metrics;services;logger;status;components;log;constructor(r){super(),this.status="stopped";const g=new TypedEventEmitter,_=g.dispatchEvent.bind(g);g.dispatchEvent=C=>{const T=_(C),R=this.dispatchEvent(new CustomEvent(C.type,{detail:C.detail}));return T||R},setMaxListeners(1/0,g),this.peerId=r.peerId,this.logger=r.logger??defaultLogger(),this.log=this.logger.forComponent("libp2p"),this.services={};const x=this.components=defaultComponents({peerId:r.peerId,privateKey:r.privateKey,nodeInfo:r.nodeInfo??{name:name$1,version:version$2},logger:this.logger,events:g,datastore:r.datastore??new MemoryDatastore,connectionGater:connectionGater(r.connectionGater),dns:r.dns});this.peerStore=this.configureComponent("peerStore",persistentPeerStore(x,{addressFilter:this.components.connectionGater.filterMultiaddrForPeer,...r.peerStore})),r.metrics!=null&&(this.metrics=this.configureComponent("metrics",r.metrics(this.components))),x.events.addEventListener("peer:update",C=>{if(C.detail.previous==null){const T={id:C.detail.peer.id,multiaddrs:C.detail.peer.addresses.map(R=>R.multiaddr)};x.events.safeDispatchEvent("peer:discovery",{detail:T})}}),r.connectionProtector!=null&&this.configureComponent("connectionProtector",r.connectionProtector(x)),this.components.upgrader=new DefaultUpgrader(this.components,{connectionEncrypters:(r.connectionEncrypters??[]).map((C,T)=>this.configureComponent(`connection-encryption-${T}`,C(this.components))),streamMuxers:(r.streamMuxers??[]).map((C,T)=>this.configureComponent(`stream-muxers-${T}`,C(this.components))),inboundUpgradeTimeout:r.connectionManager?.inboundUpgradeTimeout,outboundUpgradeTimeout:r.connectionManager?.outboundUpgradeTimeout}),this.configureComponent("transportManager",new DefaultTransportManager(this.components,r.transportManager)),this.configureComponent("connectionManager",new DefaultConnectionManager(this.components,r.connectionManager)),r.connectionMonitor?.enabled!==!1&&this.configureComponent("connectionMonitor",new ConnectionMonitor(this.components,r.connectionMonitor)),this.configureComponent("registrar",new DefaultRegistrar(this.components)),this.configureComponent("addressManager",new AddressManager(this.components,r.addresses));const S=(r.peerRouters??[]).map((C,T)=>this.configureComponent(`peer-router-${T}`,C(this.components)));this.peerRouting=this.components.peerRouting=this.configureComponent("peerRouting",new DefaultPeerRouting(this.components,{routers:S}));const E=(r.contentRouters??[]).map((C,T)=>this.configureComponent(`content-router-${T}`,C(this.components)));if(this.contentRouting=this.components.contentRouting=this.configureComponent("contentRouting",new CompoundContentRouting(this.components,{routers:E})),this.configureComponent("randomWalk",new RandomWalk(this.components)),(r.peerDiscovery??[]).forEach((C,T)=>{this.configureComponent(`peer-discovery-${T}`,C(this.components)).addEventListener("peer",A=>{this.#e(A)})}),r.transports?.forEach((C,T)=>{this.components.transportManager.add(this.configureComponent(`transport-${T}`,C(this.components)))}),r.services!=null)for(const C of Object.keys(r.services)){const T=r.services[C],R=T(this.components);if(R==null){this.log.error("service factory %s returned null or undefined instance",C);continue}this.services[C]=R,this.configureComponent(C,R),R[contentRoutingSymbol]!=null&&(this.log("registering service %s for content routing",C),E.push(R[contentRoutingSymbol])),R[peerRoutingSymbol]!=null&&(this.log("registering service %s for peer routing",C),S.push(R[peerRoutingSymbol])),R[peerDiscoverySymbol]!=null&&(this.log("registering service %s for peer discovery",C),R[peerDiscoverySymbol].addEventListener?.("peer",A=>{this.#e(A)}))}checkServiceDependencies(x)}configureComponent(r,g){return g==null&&this.log.error("component %s was null or undefined",r),this.components[r]=g,g}async start(){if(this.status==="stopped"){this.status="starting",this.log("libp2p is starting");try{await this.components.beforeStart?.(),await this.components.start(),await this.components.afterStart?.(),this.status="started",this.safeDispatchEvent("start",{detail:this}),this.log("libp2p has started")}catch(r){throw this.log.error("An error occurred starting libp2p",r),this.status="started",await this.stop(),r}}}async stop(){this.status==="started"&&(this.log("libp2p is stopping"),this.status="stopping",await this.components.beforeStop?.(),await this.components.stop(),await this.components.afterStop?.(),this.status="stopped",this.safeDispatchEvent("stop",{detail:this}),this.log("libp2p has stopped"))}getConnections(r){return this.components.connectionManager.getConnections(r)}getDialQueue(){return this.components.connectionManager.getDialQueue()}getPeers(){const r=new PeerSet;for(const g of this.components.connectionManager.getConnections())r.add(g.remotePeer);return Array.from(r)}async dial(r,g={}){return this.components.connectionManager.openConnection(r,{priority:75,...g})}async dialProtocol(r,g,_={}){if(g==null)throw new InvalidParametersError("no protocols were provided to open a stream");if(g=Array.isArray(g)?g:[g],g.length===0)throw new InvalidParametersError("no protocols were provided to open a stream");return(await this.dial(r,_)).newStream(g,_)}getMultiaddrs(){return this.components.addressManager.getAddresses()}getProtocols(){return this.components.registrar.getProtocols()}async hangUp(r,g={}){isMultiaddr(r)&&(r=peerIdFromString$1(r.getPeerId()??"")),await this.components.connectionManager.closeConnections(r,g)}async getPublicKey(r,g={}){if(this.log("getPublicKey %p",r),r.publicKey!=null)return r.publicKey;try{const E=await this.peerStore.get(r);if(E.id.publicKey!=null)return E.id.publicKey}catch(E){if(E.name!=="NotFoundError")throw E}const _=concat([fromString("/pk/"),r.toMultihash().bytes]),x=await this.contentRouting.get(_,g),S=publicKeyFromProtobuf(x);return await this.peerStore.patch(r,{publicKey:S}),S}async handle(r,g,_){Array.isArray(r)||(r=[r]),await Promise.all(r.map(async x=>{await this.components.registrar.handle(x,g,_)}))}async unhandle(r){Array.isArray(r)||(r=[r]),await Promise.all(r.map(async g=>{await this.components.registrar.unhandle(g)}))}async register(r,g){return this.components.registrar.register(r,g)}unregister(r){this.components.registrar.unregister(r)}async isDialable(r,g={}){return this.components.connectionManager.isDialable(r,g)}#e(r){const{detail:g}=r;if(g.id.toString()===this.peerId.toString()){this.log.error("peer discovery mechanism discovered self");return}this.components.peerStore.merge(g.id,{multiaddrs:g.multiaddrs}).catch(_=>{this.log.error(_)})}}async function createLibp2p$1(n={}){n.privateKey??=await generateKeyPair();const r=new Libp2p({...await validateConfig(n),peerId:peerIdFromPrivateKey(n.privateKey)});return n.start!==!1&&await r.start(),r}async function createLibp2p(n){const r=n.libp2p?.privateKey,g=n.logger??defaultLogger(),_=new Key("/pkcs8/self");let x;if(r==null&&n.datastore!=null)if(x=keychain(n.keychain)({datastore:n.datastore,logger:g}),n.libp2p=n.libp2p??{},await n.datastore.has(_))n.libp2p.privateKey=await x.exportKey("self");else{const C=await generateKeyPair();n.libp2p.privateKey=C,await x.importKey("self",C)}const S=libp2pDefaults(n);return S.datastore=S.datastore??n.datastore,n=n??{},await createLibp2p$1({...S,...n.libp2p,start:!1})}async function createHelia(n={}){const r=n.datastore??new MemoryDatastore,g=n.blockstore??new MemoryBlockstore;let _;isLibp2p(n.libp2p)?_=n.libp2p:_=await createLibp2p({...n,libp2p:{dns:n.dns,...n.libp2p,start:void 0},datastore:r});const x=new HeliaP2P({...n,libp2p:_,datastore:r,blockstore:g,blockBrokers:n.blockBrokers??[trustlessGateway(),bitswap()],routers:n.routers??[libp2pRouting(_),httpGatewayRouting()],metrics:_.metrics});return n.start!==!1&&await x.start(),x}function isLibp2p(n){return n==null?!1:["dial","dialProtocol","hangUp","handle","unhandle","getMultiaddrs","getProtocols"].every(g=>typeof n[g]=="function")}const second=1e3,minute=60*second,FloodsubID="/floodsub/1.0.0",GossipsubIDv10="/meshsub/1.0.0",GossipsubIDv11="/meshsub/1.1.0",GossipsubIDv12="/meshsub/1.2.0",GossipsubD=6,GossipsubDlo=4,GossipsubDhi=12,GossipsubDscore=4,GossipsubDout=2,GossipsubHistoryLength=5,GossipsubHistoryGossip=3,GossipsubDlazy=6,GossipsubGossipFactor=.25,GossipsubGossipRetransmission=3,GossipsubHeartbeatInitialDelay=100,GossipsubHeartbeatInterval=second,GossipsubFanoutTTL=minute,GossipsubPrunePeers=16,GossipsubPruneBackoff=minute,GossipsubUnsubscribeBackoff=10*second,GossipsubPruneBackoffTicks=15,GossipsubDirectConnectTicks=300,GossipsubDirectConnectInitialDelay=second,GossipsubOpportunisticGraftTicks=60,GossipsubOpportunisticGraftPeers=2,GossipsubGraftFloodThreshold=10*second,GossipsubMaxIHaveLength=5e3,GossipsubMaxIHaveMessages=10,GossipsubIWantFollowupTime=3*second,GossipsubSeenTTL=2*minute,TimeCacheDuration=120*1e3,ERR_TOPIC_VALIDATOR_REJECT="ERR_TOPIC_VALIDATOR_REJECT",ERR_TOPIC_VALIDATOR_IGNORE="ERR_TOPIC_VALIDATOR_IGNORE",ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE=0,ACCEPT_FROM_WHITELIST_MAX_MESSAGES=128,ACCEPT_FROM_WHITELIST_DURATION_MS=1e3,DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS=1e3,BACKOFF_SLACK=1,GossipsubIdontwantMinDataSize=512,GossipsubIdontwantMaxMessages=512,defaultDecodeRpcLimits={maxSubscriptions:1/0,maxMessages:1/0,maxIhaveMessageIDs:1/0,maxIwantMessageIDs:1/0,maxIdontwantMessageIDs:1/0,maxControlMessages:1/0,maxPeerInfos:1/0};var RPC;(function(n){(function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{E.lengthDelimited!==!1&&S.fork(),x.subscribe!=null&&(S.uint32(8),S.bool(x.subscribe)),x.topic!=null&&(S.uint32(18),S.string(x.topic)),E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.subscribe=x.bool();break}case 2:{C.topic=x.string();break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)})(n.SubOpts||(n.SubOpts={})),function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{E.lengthDelimited!==!1&&S.fork(),x.from!=null&&(S.uint32(10),S.bytes(x.from)),x.data!=null&&(S.uint32(18),S.bytes(x.data)),x.seqno!=null&&(S.uint32(26),S.bytes(x.seqno)),x.topic!=null&&x.topic!==""&&(S.uint32(34),S.string(x.topic)),x.signature!=null&&(S.uint32(42),S.bytes(x.signature)),x.key!=null&&(S.uint32(50),S.bytes(x.key)),E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={topic:""},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.from=x.bytes();break}case 2:{C.data=x.bytes();break}case 3:{C.seqno=x.bytes();break}case 4:{C.topic=x.string();break}case 5:{C.signature=x.bytes();break}case 6:{C.key=x.bytes();break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)}(n.Message||(n.Message={})),function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{if(E.lengthDelimited!==!1&&S.fork(),x.ihave!=null)for(const C of x.ihave)S.uint32(10),n.ControlIHave.codec().encode(C,S);if(x.iwant!=null)for(const C of x.iwant)S.uint32(18),n.ControlIWant.codec().encode(C,S);if(x.graft!=null)for(const C of x.graft)S.uint32(26),n.ControlGraft.codec().encode(C,S);if(x.prune!=null)for(const C of x.prune)S.uint32(34),n.ControlPrune.codec().encode(C,S);if(x.idontwant!=null)for(const C of x.idontwant)S.uint32(42),n.ControlIDontWant.codec().encode(C,S);E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={ihave:[],iwant:[],graft:[],prune:[],idontwant:[]},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{if(E.limits?.ihave!=null&&C.ihave.length===E.limits.ihave)throw new MaxLengthError('Decode error - map field "ihave" had too many elements');C.ihave.push(n.ControlIHave.codec().decode(x,x.uint32(),{limits:E.limits?.ihave$}));break}case 2:{if(E.limits?.iwant!=null&&C.iwant.length===E.limits.iwant)throw new MaxLengthError('Decode error - map field "iwant" had too many elements');C.iwant.push(n.ControlIWant.codec().decode(x,x.uint32(),{limits:E.limits?.iwant$}));break}case 3:{if(E.limits?.graft!=null&&C.graft.length===E.limits.graft)throw new MaxLengthError('Decode error - map field "graft" had too many elements');C.graft.push(n.ControlGraft.codec().decode(x,x.uint32(),{limits:E.limits?.graft$}));break}case 4:{if(E.limits?.prune!=null&&C.prune.length===E.limits.prune)throw new MaxLengthError('Decode error - map field "prune" had too many elements');C.prune.push(n.ControlPrune.codec().decode(x,x.uint32(),{limits:E.limits?.prune$}));break}case 5:{if(E.limits?.idontwant!=null&&C.idontwant.length===E.limits.idontwant)throw new MaxLengthError('Decode error - map field "idontwant" had too many elements');C.idontwant.push(n.ControlIDontWant.codec().decode(x,x.uint32(),{limits:E.limits?.idontwant$}));break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)}(n.ControlMessage||(n.ControlMessage={})),function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{if(E.lengthDelimited!==!1&&S.fork(),x.topicID!=null&&(S.uint32(10),S.string(x.topicID)),x.messageIDs!=null)for(const C of x.messageIDs)S.uint32(18),S.bytes(C);E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={messageIDs:[]},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.topicID=x.string();break}case 2:{if(E.limits?.messageIDs!=null&&C.messageIDs.length===E.limits.messageIDs)throw new MaxLengthError('Decode error - map field "messageIDs" had too many elements');C.messageIDs.push(x.bytes());break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)}(n.ControlIHave||(n.ControlIHave={})),function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{if(E.lengthDelimited!==!1&&S.fork(),x.messageIDs!=null)for(const C of x.messageIDs)S.uint32(10),S.bytes(C);E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={messageIDs:[]},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{if(E.limits?.messageIDs!=null&&C.messageIDs.length===E.limits.messageIDs)throw new MaxLengthError('Decode error - map field "messageIDs" had too many elements');C.messageIDs.push(x.bytes());break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)}(n.ControlIWant||(n.ControlIWant={})),function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{E.lengthDelimited!==!1&&S.fork(),x.topicID!=null&&(S.uint32(10),S.string(x.topicID)),E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.topicID=x.string();break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)}(n.ControlGraft||(n.ControlGraft={})),function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{if(E.lengthDelimited!==!1&&S.fork(),x.topicID!=null&&(S.uint32(10),S.string(x.topicID)),x.peers!=null)for(const C of x.peers)S.uint32(18),n.PeerInfo.codec().encode(C,S);x.backoff!=null&&(S.uint32(24),S.uint64Number(x.backoff)),E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={peers:[]},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.topicID=x.string();break}case 2:{if(E.limits?.peers!=null&&C.peers.length===E.limits.peers)throw new MaxLengthError('Decode error - map field "peers" had too many elements');C.peers.push(n.PeerInfo.codec().decode(x,x.uint32(),{limits:E.limits?.peers$}));break}case 3:{C.backoff=x.uint64Number();break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)}(n.ControlPrune||(n.ControlPrune={})),function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{E.lengthDelimited!==!1&&S.fork(),x.peerID!=null&&(S.uint32(10),S.bytes(x.peerID)),x.signedPeerRecord!=null&&(S.uint32(18),S.bytes(x.signedPeerRecord)),E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{C.peerID=x.bytes();break}case 2:{C.signedPeerRecord=x.bytes();break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)}(n.PeerInfo||(n.PeerInfo={})),function(g){let _;g.codec=()=>(_==null&&(_=message((x,S,E={})=>{if(E.lengthDelimited!==!1&&S.fork(),x.messageIDs!=null)for(const C of x.messageIDs)S.uint32(10),S.bytes(C);E.lengthDelimited!==!1&&S.ldelim()},(x,S,E={})=>{const C={messageIDs:[]},T=S==null?x.len:x.pos+S;for(;x.pos<T;){const R=x.uint32();switch(R>>>3){case 1:{if(E.limits?.messageIDs!=null&&C.messageIDs.length===E.limits.messageIDs)throw new MaxLengthError('Decode error - map field "messageIDs" had too many elements');C.messageIDs.push(x.bytes());break}default:{x.skipType(R&7);break}}}return C})),_),g.encode=x=>encodeMessage(x,g.codec()),g.decode=(x,S)=>decodeMessage(x,g.codec(),S)}(n.ControlIDontWant||(n.ControlIDontWant={}));let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.subscriptions!=null)for(const S of g.subscriptions)_.uint32(10),n.SubOpts.codec().encode(S,_);if(g.messages!=null)for(const S of g.messages)_.uint32(18),n.Message.codec().encode(S,_);g.control!=null&&(_.uint32(26),n.ControlMessage.codec().encode(g.control,_)),x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={subscriptions:[],messages:[]},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{if(x.limits?.subscriptions!=null&&S.subscriptions.length===x.limits.subscriptions)throw new MaxLengthError('Decode error - map field "subscriptions" had too many elements');S.subscriptions.push(n.SubOpts.codec().decode(g,g.uint32(),{limits:x.limits?.subscriptions$}));break}case 2:{if(x.limits?.messages!=null&&S.messages.length===x.limits.messages)throw new MaxLengthError('Decode error - map field "messages" had too many elements');S.messages.push(n.Message.codec().decode(g,g.uint32(),{limits:x.limits?.messages$}));break}case 3:{S.control=n.ControlMessage.codec().decode(g,g.uint32(),{limits:x.limits?.control});break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(RPC||(RPC={}));class MessageCache{gossip;msgs=new Map;msgIdToStrFn;history=[];notValidatedCount=0;constructor(r,g,_){this.gossip=r,this.msgIdToStrFn=_;for(let x=0;x<g;x++)this.history[x]=[]}get size(){return this.msgs.size}put(r,g,_=!1){const{msgIdStr:x}=r;return this.msgs.has(x)?!1:(this.msgs.set(x,{message:g,validated:_,originatingPeers:new Set,iwantCounts:new Map}),this.history[0].push({...r,topic:g.topic}),_||this.notValidatedCount++,!0)}observeDuplicate(r,g){const _=this.msgs.get(r);_!=null&&!_.validated&&_.originatingPeers.add(g)}get(r){return this.msgs.get(this.msgIdToStrFn(r))?.message}getWithIWantCount(r,g){const _=this.msgs.get(r);if(_==null)return null;const x=(_.iwantCounts.get(g)??0)+1;return _.iwantCounts.set(g,x),{msg:_.message,count:x}}getGossipIDs(r){const g=new Map;for(let _=0;_<this.gossip;_++)this.history[_].forEach(x=>{if((this.msgs.get(x.msgIdStr)?.validated??!1)&&r.has(x.topic)){let E=g.get(x.topic);E==null&&(E=[],g.set(x.topic,E)),E.push(x.msgId)}});return g}validate(r){const g=this.msgs.get(r);if(g==null)return null;g.validated||this.notValidatedCount--;const{message:_,originatingPeers:x}=g;return g.validated=!0,g.originatingPeers=new Set,{message:_,originatingPeers:x}}shift(){this.history[this.history.length-1].forEach(g=>{const _=this.msgs.get(g.msgIdStr);_!=null&&(this.msgs.delete(g.msgIdStr),_.validated||this.notValidatedCount--)}),this.history.pop(),this.history.unshift([])}remove(r){const g=this.msgs.get(r);return g==null?null:(this.msgs.delete(r),g)}}var SignaturePolicy;(function(n){n.StrictSign="StrictSign",n.StrictNoSign="StrictNoSign"})(SignaturePolicy||(SignaturePolicy={}));var PublishConfigType;(function(n){n[n.Signing=0]="Signing",n[n.Anonymous=1]="Anonymous"})(PublishConfigType||(PublishConfigType={}));var RejectReason;(function(n){n.Error="error",n.Ignore="ignore",n.Reject="reject",n.Blacklisted="blacklisted"})(RejectReason||(RejectReason={}));var ValidateError;(function(n){n.InvalidSignature="invalid_signature",n.InvalidSeqno="invalid_seqno",n.InvalidPeerId="invalid_peerid",n.SignaturePresent="signature_present",n.SeqnoPresent="seqno_present",n.FromPresent="from_present",n.TransformFailed="transform_failed"})(ValidateError||(ValidateError={}));var MessageStatus;(function(n){n.duplicate="duplicate",n.invalid="invalid",n.valid="valid"})(MessageStatus||(MessageStatus={}));function rejectReasonFromAcceptance(n){switch(n){case TopicValidatorResult.Ignore:return RejectReason.Ignore;case TopicValidatorResult.Reject:return RejectReason.Reject;default:throw new Error("Unreachable")}}var MessageSource;(function(n){n.forward="forward",n.publish="publish"})(MessageSource||(MessageSource={}));var InclusionReason;(function(n){n.Fanout="fanout",n.Random="random",n.Subscribed="subscribed",n.Outbound="outbound",n.NotEnough="not_enough",n.Opportunistic="opportunistic"})(InclusionReason||(InclusionReason={}));var ChurnReason;(function(n){n.Dc="disconnected",n.BadScore="bad_score",n.Prune="prune",n.Excess="excess"})(ChurnReason||(ChurnReason={}));var ScorePenalty;(function(n){n.GraftBackoff="graft_backoff",n.BrokenPromise="broken_promise",n.MessageDeficit="message_deficit",n.IPColocation="IP_colocation"})(ScorePenalty||(ScorePenalty={}));var IHaveIgnoreReason;(function(n){n.LowScore="low_score",n.MaxIhave="max_ihave",n.MaxIasked="max_iasked"})(IHaveIgnoreReason||(IHaveIgnoreReason={}));var ScoreThreshold;(function(n){n.graylist="graylist",n.publish="publish",n.gossip="gossip",n.mesh="mesh"})(ScoreThreshold||(ScoreThreshold={}));function getMetrics(n,r,g){return{protocolsEnabled:n.gauge({name:"gossipsub_protocol",help:"Status of enabled protocols",labelNames:["protocol"]}),topicSubscriptionStatus:n.gauge({name:"gossipsub_topic_subscription_status",help:"Status of our subscription to this topic",labelNames:["topicStr"]}),topicPeersCount:n.gauge({name:"gossipsub_topic_peer_count",help:"Number of peers subscribed to each topic",labelNames:["topicStr"]}),meshPeerCounts:n.gauge({name:"gossipsub_mesh_peer_count",help:"Number of peers in our mesh",labelNames:["topicStr"]}),meshPeerInclusionEventsFanout:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_fanout_total",help:"Number of times we include peers in a topic mesh for fanout reasons",labelNames:["topic"]}),meshPeerInclusionEventsRandom:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_random_total",help:"Number of times we include peers in a topic mesh for random reasons",labelNames:["topic"]}),meshPeerInclusionEventsSubscribed:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_subscribed_total",help:"Number of times we include peers in a topic mesh for subscribed reasons",labelNames:["topic"]}),meshPeerInclusionEventsOutbound:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_outbound_total",help:"Number of times we include peers in a topic mesh for outbound reasons",labelNames:["topic"]}),meshPeerInclusionEventsNotEnough:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_not_enough_total",help:"Number of times we include peers in a topic mesh for not_enough reasons",labelNames:["topic"]}),meshPeerInclusionEventsOpportunistic:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_opportunistic_total",help:"Number of times we include peers in a topic mesh for opportunistic reasons",labelNames:["topic"]}),meshPeerInclusionEventsUnknown:n.gauge({name:"gossipsub_mesh_peer_inclusion_events_unknown_total",help:"Number of times we include peers in a topic mesh for unknown reasons",labelNames:["topic"]}),meshPeerChurnEventsDisconnected:n.gauge({name:"gossipsub_peer_churn_events_disconnected_total",help:"Number of times we remove peers in a topic mesh for disconnected reasons",labelNames:["topic"]}),meshPeerChurnEventsBadScore:n.gauge({name:"gossipsub_peer_churn_events_bad_score_total",help:"Number of times we remove peers in a topic mesh for bad_score reasons",labelNames:["topic"]}),meshPeerChurnEventsPrune:n.gauge({name:"gossipsub_peer_churn_events_prune_total",help:"Number of times we remove peers in a topic mesh for prune reasons",labelNames:["topic"]}),meshPeerChurnEventsExcess:n.gauge({name:"gossipsub_peer_churn_events_excess_total",help:"Number of times we remove peers in a topic mesh for excess reasons",labelNames:["topic"]}),meshPeerChurnEventsUnknown:n.gauge({name:"gossipsub_peer_churn_events_unknown_total",help:"Number of times we remove peers in a topic mesh for unknown reasons",labelNames:["topic"]}),peersPerProtocol:n.gauge({name:"gossipsub_peers_per_protocol_count",help:"Peers connected for each topic",labelNames:["protocol"]}),heartbeatDuration:n.histogram({name:"gossipsub_heartbeat_duration_seconds",help:"The time it takes to complete one iteration of the heartbeat",buckets:[.01,.1,1]}),heartbeatSkipped:n.gauge({name:"gossipsub_heartbeat_skipped",help:"Heartbeat run took longer than heartbeat interval so next is skipped"}),acceptedMessagesTotal:n.gauge({name:"gossipsub_accepted_messages_total",help:"Total accepted messages for each topic",labelNames:["topic"]}),ignoredMessagesTotal:n.gauge({name:"gossipsub_ignored_messages_total",help:"Total ignored messages for each topic",labelNames:["topic"]}),rejectedMessagesTotal:n.gauge({name:"gossipsub_rejected_messages_total",help:"Total rejected messages for each topic",labelNames:["topic"]}),unknownValidationResultsTotal:n.gauge({name:"gossipsub_unknown_validation_results_total",help:"Total unknown validation results for each topic",labelNames:["topic"]}),asyncValidationMcacheHit:n.gauge({name:"gossipsub_async_validation_mcache_hit_total",help:"Async validation result reported by the user layer",labelNames:["hit"]}),asyncValidationDelayFromFirstSeenSec:n.histogram({name:"gossipsub_async_validation_delay_from_first_seen",help:"Async validation report delay from first seen in second",buckets:[.01,.03,.1,.3,1,3,10]}),asyncValidationUnknownFirstSeen:n.gauge({name:"gossipsub_async_validation_unknown_first_seen_count_total",help:"Async validation report unknown first seen value for message"}),peerReadStreamError:n.gauge({name:"gossipsub_peer_read_stream_err_count_total",help:"Peer read stream error"}),rpcRecvBytes:n.gauge({name:"gossipsub_rpc_recv_bytes_total",help:"RPC recv"}),rpcRecvCount:n.gauge({name:"gossipsub_rpc_recv_count_total",help:"RPC recv"}),rpcRecvSubscription:n.gauge({name:"gossipsub_rpc_recv_subscription_total",help:"RPC recv"}),rpcRecvMessage:n.gauge({name:"gossipsub_rpc_recv_message_total",help:"RPC recv"}),rpcRecvControl:n.gauge({name:"gossipsub_rpc_recv_control_total",help:"RPC recv"}),rpcRecvIHave:n.gauge({name:"gossipsub_rpc_recv_ihave_total",help:"RPC recv"}),rpcRecvIWant:n.gauge({name:"gossipsub_rpc_recv_iwant_total",help:"RPC recv"}),rpcRecvGraft:n.gauge({name:"gossipsub_rpc_recv_graft_total",help:"RPC recv"}),rpcRecvPrune:n.gauge({name:"gossipsub_rpc_recv_prune_total",help:"RPC recv"}),rpcDataError:n.gauge({name:"gossipsub_rpc_data_err_count_total",help:"RPC data error"}),rpcRecvError:n.gauge({name:"gossipsub_rpc_recv_err_count_total",help:"RPC recv error"}),rpcRecvNotAccepted:n.gauge({name:"gossipsub_rpc_rcv_not_accepted_total",help:"Total count of RPC dropped because acceptFrom() == false"}),rpcSentBytes:n.gauge({name:"gossipsub_rpc_sent_bytes_total",help:"RPC sent"}),rpcSentCount:n.gauge({name:"gossipsub_rpc_sent_count_total",help:"RPC sent"}),rpcSentSubscription:n.gauge({name:"gossipsub_rpc_sent_subscription_total",help:"RPC sent"}),rpcSentMessage:n.gauge({name:"gossipsub_rpc_sent_message_total",help:"RPC sent"}),rpcSentControl:n.gauge({name:"gossipsub_rpc_sent_control_total",help:"RPC sent"}),rpcSentIHave:n.gauge({name:"gossipsub_rpc_sent_ihave_total",help:"RPC sent"}),rpcSentIWant:n.gauge({name:"gossipsub_rpc_sent_iwant_total",help:"RPC sent"}),rpcSentGraft:n.gauge({name:"gossipsub_rpc_sent_graft_total",help:"RPC sent"}),rpcSentPrune:n.gauge({name:"gossipsub_rpc_sent_prune_total",help:"RPC sent"}),rpcSentIDontWant:n.gauge({name:"gossipsub_rpc_sent_idontwant_total",help:"RPC sent"}),msgPublishCount:n.gauge({name:"gossipsub_msg_publish_count_total",help:"Total count of msg published by topic",labelNames:["topic"]}),msgPublishPeersByTopic:n.gauge({name:"gossipsub_msg_publish_peers_total",help:"Total count of peers that we publish a msg to",labelNames:["topic"]}),directPeersPublishedTotal:n.gauge({name:"gossipsub_direct_peers_published_total",help:"Total direct peers that we publish a msg to",labelNames:["topic"]}),floodsubPeersPublishedTotal:n.gauge({name:"gossipsub_floodsub_peers_published_total",help:"Total floodsub peers that we publish a msg to",labelNames:["topic"]}),meshPeersPublishedTotal:n.gauge({name:"gossipsub_mesh_peers_published_total",help:"Total mesh peers that we publish a msg to",labelNames:["topic"]}),fanoutPeersPublishedTotal:n.gauge({name:"gossipsub_fanout_peers_published_total",help:"Total fanout peers that we publish a msg to",labelNames:["topic"]}),msgPublishBytes:n.gauge({name:"gossipsub_msg_publish_bytes_total",help:"Total count of msg publish data.length bytes",labelNames:["topic"]}),msgPublishTime:n.histogram({name:"gossipsub_msg_publish_seconds",help:"Total time in seconds to publish a message",buckets:[.001,.002,.005,.01,.1,.5,1],labelNames:["topic"]}),msgForwardCount:n.gauge({name:"gossipsub_msg_forward_count_total",help:"Total count of msg forwarded by topic",labelNames:["topic"]}),msgForwardPeers:n.gauge({name:"gossipsub_msg_forward_peers_total",help:"Total count of peers that we forward a msg to",labelNames:["topic"]}),msgReceivedPreValidation:n.gauge({name:"gossipsub_msg_received_prevalidation_total",help:"Total count of recv msgs before any validation",labelNames:["topic"]}),msgReceivedError:n.gauge({name:"gossipsub_msg_received_error_total",help:"Total count of recv msgs error",labelNames:["topic"]}),prevalidationInvalidTotal:n.gauge({name:"gossipsub_pre_validation_invalid_total",help:"Total count of invalid messages received",labelNames:["topic"]}),prevalidationValidTotal:n.gauge({name:"gossipsub_pre_validation_valid_total",help:"Total count of valid messages received",labelNames:["topic"]}),prevalidationDuplicateTotal:n.gauge({name:"gossipsub_pre_validation_duplicate_total",help:"Total count of duplicate messages received",labelNames:["topic"]}),prevalidationUnknownTotal:n.gauge({name:"gossipsub_pre_validation_unknown_status_total",help:"Total count of unknown_status messages received",labelNames:["topic"]}),msgReceivedInvalid:n.gauge({name:"gossipsub_msg_received_invalid_total",help:"Tracks specific reason of invalid",labelNames:["error"]}),msgReceivedInvalidByTopic:n.gauge({name:"gossipsub_msg_received_invalid_by_topic_total",help:"Tracks specific invalid message by topic",labelNames:["topic"]}),duplicateMsgDeliveryDelay:n.histogram({name:"gossisub_duplicate_msg_delivery_delay_seconds",help:"Time since the 1st duplicated message validated",labelNames:["topic"],buckets:[.25*g.maxMeshMessageDeliveriesWindowSec,.5*g.maxMeshMessageDeliveriesWindowSec,Number(g.maxMeshMessageDeliveriesWindowSec),2*g.maxMeshMessageDeliveriesWindowSec,4*g.maxMeshMessageDeliveriesWindowSec]}),duplicateMsgLateDelivery:n.gauge({name:"gossisub_duplicate_msg_late_delivery_total",help:"Total count of late duplicate message delivery by topic, which triggers P3 penalty",labelNames:["topic"]}),duplicateMsgIgnored:n.gauge({name:"gossisub_ignored_published_duplicate_msgs_total",help:"Total count of published duplicate message ignored by topic",labelNames:["topic"]}),scoreFnCalls:n.gauge({name:"gossipsub_score_fn_calls_total",help:"Total times score() is called"}),scoreFnRuns:n.gauge({name:"gossipsub_score_fn_runs_total",help:"Total times score() call actually computed computeScore(), no cache"}),scoreCachedDelta:n.histogram({name:"gossipsub_score_cache_delta",help:"Delta of score between cached values that expired",buckets:[10,100,1e3]}),peersByScoreThreshold:n.gauge({name:"gossipsub_peers_by_score_threshold_count",help:"Current count of peers by score threshold",labelNames:["threshold"]}),score:n.avgMinMax({name:"gossipsub_score",help:"Avg min max of gossip scores"}),scoreWeights:n.avgMinMax({name:"gossipsub_score_weights",help:"Separate score weights",labelNames:["topic","p"]}),scorePerMesh:n.avgMinMax({name:"gossipsub_score_per_mesh",help:"Histogram of the scores for each mesh topic",labelNames:["topic"]}),scoringPenalties:n.gauge({name:"gossipsub_scoring_penalties_total",help:"A counter of the kind of penalties being applied to peers",labelNames:["penalty"]}),behaviourPenalty:n.histogram({name:"gossipsub_peer_stat_behaviour_penalty",help:"Current peer stat behaviour_penalty at each scrape",buckets:[.25*g.behaviourPenaltyThreshold,.5*g.behaviourPenaltyThreshold,Number(g.behaviourPenaltyThreshold),2*g.behaviourPenaltyThreshold,4*g.behaviourPenaltyThreshold]}),ihaveRcvIgnored:n.gauge({name:"gossipsub_ihave_rcv_ignored_total",help:"Total received IHAVE messages that we ignore for some reason",labelNames:["reason"]}),ihaveRcvMsgids:n.gauge({name:"gossipsub_ihave_rcv_msgids_total",help:"Total received IHAVE messages by topic",labelNames:["topic"]}),ihaveRcvNotSeenMsgids:n.gauge({name:"gossipsub_ihave_rcv_not_seen_msgids_total",help:"Total messages per topic we do not have, not actual requests",labelNames:["topic"]}),iwantRcvMsgids:n.gauge({name:"gossipsub_iwant_rcv_msgids_total",help:"Total received IWANT messages by topic",labelNames:["topic"]}),iwantRcvDonthaveMsgids:n.gauge({name:"gossipsub_iwant_rcv_dont_have_msgids_total",help:"Total requested messageIDs that we do not have"}),idontwantRcvMsgids:n.gauge({name:"gossipsub_idontwant_rcv_msgids_total",help:"Total received IDONTWANT messages"}),idontwantRcvDonthaveMsgids:n.gauge({name:"gossipsub_idontwant_rcv_dont_have_msgids_total",help:"Total received IDONTWANT messageIDs that we do not have in mcache"}),iwantPromiseStarted:n.gauge({name:"gossipsub_iwant_promise_sent_total",help:"Total count of started IWANT promises"}),iwantPromiseResolved:n.gauge({name:"gossipsub_iwant_promise_resolved_total",help:"Total count of resolved IWANT promises"}),iwantPromiseResolvedFromDuplicate:n.gauge({name:"gossipsub_iwant_promise_resolved_from_duplicate_total",help:"Total count of resolved IWANT promises from duplicate messages"}),iwantPromiseResolvedPeers:n.gauge({name:"gossipsub_iwant_promise_resolved_peers",help:"Total count of peers we have asked IWANT promises that are resolved"}),iwantPromiseBroken:n.gauge({name:"gossipsub_iwant_promise_broken",help:"Total count of broken IWANT promises"}),iwantMessagePruned:n.gauge({name:"gossipsub_iwant_message_pruned",help:"Total count of pruned IWANT messages"}),iwantPromiseDeliveryTime:n.histogram({name:"gossipsub_iwant_promise_delivery_seconds",help:"Histogram of delivery time of resolved IWANT promises",buckets:[.5*g.gossipPromiseExpireSec,Number(g.gossipPromiseExpireSec),2*g.gossipPromiseExpireSec,4*g.gossipPromiseExpireSec]}),iwantPromiseUntracked:n.gauge({name:"gossip_iwant_promise_untracked",help:"Total count of untracked IWANT promise"}),connectedPeersBackoffSec:n.histogram({name:"gossipsub_connected_peers_backoff_seconds",help:"Backoff time in seconds",buckets:[1,2,4,10,20,60,120]}),cacheSize:n.gauge({name:"gossipsub_cache_size",help:"Unbounded cache sizes",labelNames:["cache"]}),mcacheSize:n.gauge({name:"gossipsub_mcache_size",help:"Current mcache msg count"}),mcacheNotValidatedCount:n.gauge({name:"gossipsub_mcache_not_validated_count",help:"Current mcache msg count not validated"}),fastMsgIdCacheCollision:n.gauge({name:"gossipsub_fastmsgid_cache_collision_total",help:"Total count of key collisions on fastmsgid cache put"}),newConnectionCount:n.gauge({name:"gossipsub_new_connection_total",help:"Total new connection by status",labelNames:["status"]}),topicStrToLabel:r,toTopic(_){return this.topicStrToLabel.get(_)??_},onJoin(_){this.topicSubscriptionStatus.set({topicStr:_},1),this.meshPeerCounts.set({topicStr:_},0)},onLeave(_){this.topicSubscriptionStatus.set({topicStr:_},0),this.meshPeerCounts.set({topicStr:_},0)},onAddToMesh(_,x,S){const E=this.toTopic(_);switch(x){case InclusionReason.Fanout:this.meshPeerInclusionEventsFanout.inc({topic:E},S);break;case InclusionReason.Random:this.meshPeerInclusionEventsRandom.inc({topic:E},S);break;case InclusionReason.Subscribed:this.meshPeerInclusionEventsSubscribed.inc({topic:E},S);break;case InclusionReason.Outbound:this.meshPeerInclusionEventsOutbound.inc({topic:E},S);break;case InclusionReason.NotEnough:this.meshPeerInclusionEventsNotEnough.inc({topic:E},S);break;case InclusionReason.Opportunistic:this.meshPeerInclusionEventsOpportunistic.inc({topic:E},S);break;default:this.meshPeerInclusionEventsUnknown.inc({topic:E},S);break}},onRemoveFromMesh(_,x,S){const E=this.toTopic(_);switch(x){case ChurnReason.Dc:this.meshPeerChurnEventsDisconnected.inc({topic:E},S);break;case ChurnReason.BadScore:this.meshPeerChurnEventsBadScore.inc({topic:E},S);break;case ChurnReason.Prune:this.meshPeerChurnEventsPrune.inc({topic:E},S);break;case ChurnReason.Excess:this.meshPeerChurnEventsExcess.inc({topic:E},S);break;default:this.meshPeerChurnEventsUnknown.inc({topic:E},S);break}},onReportValidation(_,x,S){if(this.asyncValidationMcacheHit.inc({hit:_!=null?"hit":"miss"}),_!=null){const E=this.toTopic(_.message.topic);switch(x){case TopicValidatorResult.Accept:this.acceptedMessagesTotal.inc({topic:E});break;case TopicValidatorResult.Ignore:this.ignoredMessagesTotal.inc({topic:E});break;case TopicValidatorResult.Reject:this.rejectedMessagesTotal.inc({topic:E});break;default:this.unknownValidationResultsTotal.inc({topic:E});break}}S!=null?this.asyncValidationDelayFromFirstSeenSec.observe((Date.now()-S)/1e3):this.asyncValidationUnknownFirstSeen.inc()},onScorePenalty(_){this.scoringPenalties.inc({penalty:_},1)},onIhaveRcv(_,x,S){const E=this.toTopic(_);this.ihaveRcvMsgids.inc({topic:E},x),this.ihaveRcvNotSeenMsgids.inc({topic:E},S)},onIwantRcv(_,x){for(const[S,E]of _){const C=this.toTopic(S);this.iwantRcvMsgids.inc({topic:C},E)}this.iwantRcvDonthaveMsgids.inc(x)},onIdontwantRcv(_,x){this.idontwantRcvMsgids.inc(_),this.idontwantRcvDonthaveMsgids.inc(x)},onForwardMsg(_,x){const S=this.toTopic(_);this.msgForwardCount.inc({topic:S},1),this.msgForwardPeers.inc({topic:S},x)},onPublishMsg(_,x,S,E,C){const T=this.toTopic(_);this.msgPublishCount.inc({topic:T},1),this.msgPublishBytes.inc({topic:T},S*E),this.msgPublishPeersByTopic.inc({topic:T},S),this.directPeersPublishedTotal.inc({topic:T},x.direct),this.floodsubPeersPublishedTotal.inc({topic:T},x.floodsub),this.meshPeersPublishedTotal.inc({topic:T},x.mesh),this.fanoutPeersPublishedTotal.inc({topic:T},x.fanout),this.msgPublishTime.observe({topic:T},C/1e3)},onMsgRecvPreValidation(_){const x=this.toTopic(_);this.msgReceivedPreValidation.inc({topic:x},1)},onMsgRecvError(_){const x=this.toTopic(_);this.msgReceivedError.inc({topic:x},1)},onPrevalidationResult(_,x){const S=this.toTopic(_);switch(x){case MessageStatus.duplicate:this.prevalidationDuplicateTotal.inc({topic:S});break;case MessageStatus.invalid:this.prevalidationInvalidTotal.inc({topic:S});break;case MessageStatus.valid:this.prevalidationValidTotal.inc({topic:S});break;default:this.prevalidationUnknownTotal.inc({topic:S});break}},onMsgRecvInvalid(_,x){const S=this.toTopic(_),E=x.reason===RejectReason.Error?x.error:x.reason;this.msgReceivedInvalid.inc({error:E},1),this.msgReceivedInvalidByTopic.inc({topic:S},1)},onDuplicateMsgDelivery(_,x,S){const E=this.toTopic(_);this.duplicateMsgDeliveryDelay.observe({topic:E},x/1e3),S&&this.duplicateMsgLateDelivery.inc({topic:E},1)},onPublishDuplicateMsg(_){const x=this.toTopic(_);this.duplicateMsgIgnored.inc({topic:x},1)},onPeerReadStreamError(){this.peerReadStreamError.inc(1)},onRpcRecvError(){this.rpcRecvError.inc(1)},onRpcDataError(){this.rpcDataError.inc(1)},onRpcRecv(_,x){this.rpcRecvBytes.inc(x),this.rpcRecvCount.inc(1),_.subscriptions!=null&&this.rpcRecvSubscription.inc(_.subscriptions.length),_.messages!=null&&this.rpcRecvMessage.inc(_.messages.length),_.control!=null&&(this.rpcRecvControl.inc(1),_.control.ihave!=null&&this.rpcRecvIHave.inc(_.control.ihave.length),_.control.iwant!=null&&this.rpcRecvIWant.inc(_.control.iwant.length),_.control.graft!=null&&this.rpcRecvGraft.inc(_.control.graft.length),_.control.prune!=null&&this.rpcRecvPrune.inc(_.control.prune.length))},onRpcSent(_,x){if(this.rpcSentBytes.inc(x),this.rpcSentCount.inc(1),_.subscriptions!=null&&this.rpcSentSubscription.inc(_.subscriptions.length),_.messages!=null&&this.rpcSentMessage.inc(_.messages.length),_.control!=null){const S=_.control.ihave?.length??0,E=_.control.iwant?.length??0,C=_.control.graft?.length??0,T=_.control.prune?.length??0,R=_.control.idontwant?.length??0;S>0&&this.rpcSentIHave.inc(S),E>0&&this.rpcSentIWant.inc(E),C>0&&this.rpcSentGraft.inc(C),T>0&&this.rpcSentPrune.inc(T),R>0&&this.rpcSentIDontWant.inc(R),(S>0||E>0||C>0||T>0||R>0)&&this.rpcSentControl.inc(1)}},registerScores(_,x){let S=0,E=0,C=0,T=0;for(const R of _)R>=x.graylistThreshold&&S++,R>=x.publishThreshold&&E++,R>=x.gossipThreshold&&C++,R>=0&&T++;this.peersByScoreThreshold.set({threshold:ScoreThreshold.graylist},S),this.peersByScoreThreshold.set({threshold:ScoreThreshold.publish},E),this.peersByScoreThreshold.set({threshold:ScoreThreshold.gossip},C),this.peersByScoreThreshold.set({threshold:ScoreThreshold.mesh},T),this.score.set(_)},registerScoreWeights(_){for(const[x,S]of _.byTopic)this.scoreWeights.set({topic:x,p:"p1"},S.p1w),this.scoreWeights.set({topic:x,p:"p2"},S.p2w),this.scoreWeights.set({topic:x,p:"p3"},S.p3w),this.scoreWeights.set({topic:x,p:"p3b"},S.p3bw),this.scoreWeights.set({topic:x,p:"p4"},S.p4w);this.scoreWeights.set({p:"p5"},_.p5w),this.scoreWeights.set({p:"p6"},_.p6w),this.scoreWeights.set({p:"p7"},_.p7w)},registerScorePerMesh(_,x){const S=new Map;_.forEach((E,C)=>{const T=this.topicStrToLabel.get(C)??"unknown";let R=S.get(T);R==null&&(R=new Set,S.set(T,R)),E.forEach(A=>R?.add(A))});for(const[E,C]of S){const T=[];C.forEach(R=>{T.push(x.get(R)??0)}),this.scorePerMesh.set({topic:E},T)}}}}class InvalidPeerScoreParamsError extends Error{static name="InvalidPeerScoreParamsError";constructor(r="Invalid peer score params"){super(r),this.name="InvalidPeerScoreParamsError"}}const defaultPeerScoreParams={topics:{},topicScoreCap:10,appSpecificScore:()=>0,appSpecificWeight:10,IPColocationFactorWeight:-5,IPColocationFactorThreshold:10,IPColocationFactorWhitelist:new Set,behaviourPenaltyWeight:-10,behaviourPenaltyThreshold:0,behaviourPenaltyDecay:.2,decayInterval:1e3,decayToZero:.1,retainScore:3600*1e3},defaultTopicScoreParams={topicWeight:.5,timeInMeshWeight:1,timeInMeshQuantum:1,timeInMeshCap:3600,firstMessageDeliveriesWeight:1,firstMessageDeliveriesDecay:.5,firstMessageDeliveriesCap:2e3,meshMessageDeliveriesWeight:-1,meshMessageDeliveriesDecay:.5,meshMessageDeliveriesCap:100,meshMessageDeliveriesThreshold:20,meshMessageDeliveriesWindow:10,meshMessageDeliveriesActivation:5e3,meshFailurePenaltyWeight:-1,meshFailurePenaltyDecay:.5,invalidMessageDeliveriesWeight:-1,invalidMessageDeliveriesDecay:.3};function createPeerScoreParams(n={}){return{...defaultPeerScoreParams,...n,topics:n.topics!=null?Object.entries(n.topics).reduce((r,[g,_])=>(r[g]=createTopicScoreParams(_),r),{}):{}}}function createTopicScoreParams(n={}){return{...defaultTopicScoreParams,...n}}function validatePeerScoreParams(n){for(const[r,g]of Object.entries(n.topics))try{validateTopicScoreParams(g)}catch(_){throw new InvalidPeerScoreParamsError(`invalid score parameters for topic ${r}: ${_.message}`)}if(n.topicScoreCap<0)throw new InvalidPeerScoreParamsError("invalid topic score cap; must be positive (or 0 for no cap)");if(n.appSpecificScore===null||n.appSpecificScore===void 0)throw new InvalidPeerScoreParamsError("missing application specific score function");if(n.IPColocationFactorWeight>0)throw new InvalidPeerScoreParamsError("invalid IPColocationFactorWeight; must be negative (or 0 to disable)");if(n.IPColocationFactorWeight!==0&&n.IPColocationFactorThreshold<1)throw new InvalidPeerScoreParamsError("invalid IPColocationFactorThreshold; must be at least 1");if(n.behaviourPenaltyWeight>0)throw new InvalidPeerScoreParamsError("invalid BehaviourPenaltyWeight; must be negative (or 0 to disable)");if(n.behaviourPenaltyWeight!==0&&(n.behaviourPenaltyDecay<=0||n.behaviourPenaltyDecay>=1))throw new InvalidPeerScoreParamsError("invalid BehaviourPenaltyDecay; must be between 0 and 1");if(n.decayInterval<1e3)throw new InvalidPeerScoreParamsError("invalid DecayInterval; must be at least 1s");if(n.decayToZero<=0||n.decayToZero>=1)throw new InvalidPeerScoreParamsError("invalid DecayToZero; must be between 0 and 1")}function validateTopicScoreParams(n){if(n.topicWeight<0)throw new InvalidPeerScoreParamsError("invalid topic weight; must be >= 0");if(n.timeInMeshQuantum===0)throw new InvalidPeerScoreParamsError("invalid TimeInMeshQuantum; must be non zero");if(n.timeInMeshWeight<0)throw new InvalidPeerScoreParamsError("invalid TimeInMeshWeight; must be positive (or 0 to disable)");if(n.timeInMeshWeight!==0&&n.timeInMeshQuantum<=0)throw new InvalidPeerScoreParamsError("invalid TimeInMeshQuantum; must be positive");if(n.timeInMeshWeight!==0&&n.timeInMeshCap<=0)throw new InvalidPeerScoreParamsError("invalid TimeInMeshCap; must be positive");if(n.firstMessageDeliveriesWeight<0)throw new InvalidPeerScoreParamsError("invallid FirstMessageDeliveriesWeight; must be positive (or 0 to disable)");if(n.firstMessageDeliveriesWeight!==0&&(n.firstMessageDeliveriesDecay<=0||n.firstMessageDeliveriesDecay>=1))throw new InvalidPeerScoreParamsError("invalid FirstMessageDeliveriesDecay; must be between 0 and 1");if(n.firstMessageDeliveriesWeight!==0&&n.firstMessageDeliveriesCap<=0)throw new InvalidPeerScoreParamsError("invalid FirstMessageDeliveriesCap; must be positive");if(n.meshMessageDeliveriesWeight>0)throw new InvalidPeerScoreParamsError("invalid MeshMessageDeliveriesWeight; must be negative (or 0 to disable)");if(n.meshMessageDeliveriesWeight!==0&&(n.meshMessageDeliveriesDecay<=0||n.meshMessageDeliveriesDecay>=1))throw new InvalidPeerScoreParamsError("invalid MeshMessageDeliveriesDecay; must be between 0 and 1");if(n.meshMessageDeliveriesWeight!==0&&n.meshMessageDeliveriesCap<=0)throw new InvalidPeerScoreParamsError("invalid MeshMessageDeliveriesCap; must be positive");if(n.meshMessageDeliveriesWeight!==0&&n.meshMessageDeliveriesThreshold<=0)throw new InvalidPeerScoreParamsError("invalid MeshMessageDeliveriesThreshold; must be positive");if(n.meshMessageDeliveriesWindow<0)throw new InvalidPeerScoreParamsError("invalid MeshMessageDeliveriesWindow; must be non-negative");if(n.meshMessageDeliveriesWeight!==0&&n.meshMessageDeliveriesActivation<1e3)throw new InvalidPeerScoreParamsError("invalid MeshMessageDeliveriesActivation; must be at least 1s");if(n.meshFailurePenaltyWeight>0)throw new InvalidPeerScoreParamsError("invalid MeshFailurePenaltyWeight; must be negative (or 0 to disable)");if(n.meshFailurePenaltyWeight!==0&&(n.meshFailurePenaltyDecay<=0||n.meshFailurePenaltyDecay>=1))throw new InvalidPeerScoreParamsError("invalid MeshFailurePenaltyDecay; must be between 0 and 1");if(n.invalidMessageDeliveriesWeight>0)throw new InvalidPeerScoreParamsError("invalid InvalidMessageDeliveriesWeight; must be negative (or 0 to disable)");if(n.invalidMessageDeliveriesDecay<=0||n.invalidMessageDeliveriesDecay>=1)throw new InvalidPeerScoreParamsError("invalid InvalidMessageDeliveriesDecay; must be between 0 and 1")}const defaultPeerScoreThresholds={gossipThreshold:-10,publishThreshold:-50,graylistThreshold:-80,acceptPXThreshold:10,opportunisticGraftThreshold:20};function createPeerScoreThresholds(n={}){return{...defaultPeerScoreThresholds,...n}}function removeItemsFromSet(n,r,g=()=>!0){const _=new Set;if(r<=0)return _;for(const x of n){if(_.size>=r)break;g(x)&&(_.add(x),n.delete(x))}return _}function removeFirstNItemsFromSet(n,r){return removeItemsFromSet(n,r,()=>!0)}class MapDef extends Map{getDefault;constructor(r){super(),this.getDefault=r}getOrDefault(r){let g=super.get(r);return g===void 0&&(g=this.getDefault(),this.set(r,g)),g}}function computeScore(n,r,g,_){let x=0;Object.entries(r.topics).forEach(([E,C])=>{const T=g.topics[E];if(T===void 0)return;let R=0;if(C.inMesh){let D=C.meshTime/T.timeInMeshQuantum;D>T.timeInMeshCap&&(D=T.timeInMeshCap),R+=D*T.timeInMeshWeight}let A=C.firstMessageDeliveries;if(A>T.firstMessageDeliveriesCap&&(A=T.firstMessageDeliveriesCap),R+=A*T.firstMessageDeliveriesWeight,C.meshMessageDeliveriesActive&&C.meshMessageDeliveries<T.meshMessageDeliveriesThreshold){const D=T.meshMessageDeliveriesThreshold-C.meshMessageDeliveries,N=D*D;R+=N*T.meshMessageDeliveriesWeight}const I=C.meshFailurePenalty;R+=I*T.meshFailurePenaltyWeight;const B=C.invalidMessageDeliveries*C.invalidMessageDeliveries;R+=B*T.invalidMessageDeliveriesWeight,x+=R*T.topicWeight}),g.topicScoreCap>0&&x>g.topicScoreCap&&(x=g.topicScoreCap);const S=g.appSpecificScore(n);if(x+=S*g.appSpecificWeight,r.knownIPs.forEach(E=>{if(g.IPColocationFactorWhitelist.has(E))return;const C=_.get(E),T=C!=null?C.size:0;if(T>g.IPColocationFactorThreshold){const R=T-g.IPColocationFactorThreshold,A=R*R;x+=A*g.IPColocationFactorWeight}}),r.behaviourPenalty>g.behaviourPenaltyThreshold){const E=r.behaviourPenalty-g.behaviourPenaltyThreshold,C=E*E;x+=C*g.behaviourPenaltyWeight}return x}var denque,hasRequiredDenque;function requireDenque(){if(hasRequiredDenque)return denque;hasRequiredDenque=1;function n(r,_){var _=_||{};this._capacity=_.capacity,this._head=0,this._tail=0,Array.isArray(r)?this._fromArray(r):(this._capacityMask=3,this._list=new Array(4))}return n.prototype.peekAt=function(g){var _=g;if(_===(_|0)){var x=this.size();if(!(_>=x||_<-x))return _<0&&(_+=x),_=this._head+_&this._capacityMask,this._list[_]}},n.prototype.get=function(g){return this.peekAt(g)},n.prototype.peek=function(){if(this._head!==this._tail)return this._list[this._head]},n.prototype.peekFront=function(){return this.peek()},n.prototype.peekBack=function(){return this.peekAt(-1)},Object.defineProperty(n.prototype,"length",{get:function(){return this.size()}}),n.prototype.size=function(){return this._head===this._tail?0:this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.unshift=function(g){if(arguments.length===0)return this.size();var _=this._list.length;return this._head=this._head-1+_&this._capacityMask,this._list[this._head]=g,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.pop(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.shift=function(){var g=this._head;if(g!==this._tail){var _=this._list[g];return this._list[g]=void 0,this._head=g+1&this._capacityMask,g<2&&this._tail>1e4&&this._tail<=this._list.length>>>2&&this._shrinkArray(),_}},n.prototype.push=function(g){if(arguments.length===0)return this.size();var _=this._tail;return this._list[_]=g,this._tail=_+1&this._capacityMask,this._tail===this._head&&this._growArray(),this._capacity&&this.size()>this._capacity&&this.shift(),this._head<this._tail?this._tail-this._head:this._capacityMask+1-(this._head-this._tail)},n.prototype.pop=function(){var g=this._tail;if(g!==this._head){var _=this._list.length;this._tail=g-1+_&this._capacityMask;var x=this._list[this._tail];return this._list[this._tail]=void 0,this._head<2&&g>1e4&&g<=_>>>2&&this._shrinkArray(),x}},n.prototype.removeOne=function(g){var _=g;if(_===(_|0)&&this._head!==this._tail){var x=this.size(),S=this._list.length;if(!(_>=x||_<-x)){_<0&&(_+=x),_=this._head+_&this._capacityMask;var E=this._list[_],C;if(g<x/2){for(C=g;C>0;C--)this._list[_]=this._list[_=_-1+S&this._capacityMask];this._list[_]=void 0,this._head=this._head+1+S&this._capacityMask}else{for(C=x-1-g;C>0;C--)this._list[_]=this._list[_=_+1+S&this._capacityMask];this._list[_]=void 0,this._tail=this._tail-1+S&this._capacityMask}return E}}},n.prototype.remove=function(g,_){var x=g,S,E=_;if(x===(x|0)&&this._head!==this._tail){var C=this.size(),T=this._list.length;if(!(x>=C||x<-C||_<1)){if(x<0&&(x+=C),_===1||!_)return S=new Array(1),S[0]=this.removeOne(x),S;if(x===0&&x+_>=C)return S=this.toArray(),this.clear(),S;x+_>C&&(_=C-x);var R;for(S=new Array(_),R=0;R<_;R++)S[R]=this._list[this._head+x+R&this._capacityMask];if(x=this._head+x&this._capacityMask,g+_===C){for(this._tail=this._tail-_+T&this._capacityMask,R=_;R>0;R--)this._list[x=x+1+T&this._capacityMask]=void 0;return S}if(g===0){for(this._head=this._head+_+T&this._capacityMask,R=_-1;R>0;R--)this._list[x=x+1+T&this._capacityMask]=void 0;return S}if(x<C/2){for(this._head=this._head+g+_+T&this._capacityMask,R=g;R>0;R--)this.unshift(this._list[x=x-1+T&this._capacityMask]);for(x=this._head-1+T&this._capacityMask;E>0;)this._list[x=x-1+T&this._capacityMask]=void 0,E--;g<0&&(this._tail=x)}else{for(this._tail=x,x=x+_+T&this._capacityMask,R=C-(_+g);R>0;R--)this.push(this._list[x++]);for(x=this._tail;E>0;)this._list[x=x+1+T&this._capacityMask]=void 0,E--}return this._head<2&&this._tail>1e4&&this._tail<=T>>>2&&this._shrinkArray(),S}}},n.prototype.splice=function(g,_){var x=g;if(x===(x|0)){var S=this.size();if(x<0&&(x+=S),!(x>S))if(arguments.length>2){var E,C,T,R=arguments.length,A=this._list.length,I=2;if(!S||x<S/2){for(C=new Array(x),E=0;E<x;E++)C[E]=this._list[this._head+E&this._capacityMask];for(_===0?(T=[],x>0&&(this._head=this._head+x+A&this._capacityMask)):(T=this.remove(x,_),this._head=this._head+x+A&this._capacityMask);R>I;)this.unshift(arguments[--R]);for(E=x;E>0;E--)this.unshift(C[E-1])}else{C=new Array(S-(x+_));var B=C.length;for(E=0;E<B;E++)C[E]=this._list[this._head+x+_+E&this._capacityMask];for(_===0?(T=[],x!=S&&(this._tail=this._head+x+A&this._capacityMask)):(T=this.remove(x,_),this._tail=this._tail-B+A&this._capacityMask);I<R;)this.push(arguments[I++]);for(E=0;E<B;E++)this.push(C[E])}return T}else return this.remove(x,_)}},n.prototype.clear=function(){this._list=new Array(this._list.length),this._head=0,this._tail=0},n.prototype.isEmpty=function(){return this._head===this._tail},n.prototype.toArray=function(){return this._copyArray(!1)},n.prototype._fromArray=function(g){var _=g.length,x=this._nextPowerOf2(_);this._list=new Array(x),this._capacityMask=x-1,this._tail=_;for(var S=0;S<_;S++)this._list[S]=g[S]},n.prototype._copyArray=function(g,_){var x=this._list,S=x.length,E=this.length;if(_=_|E,_==E&&this._head<this._tail)return this._list.slice(this._head,this._tail);var C=new Array(_),T=0,R;if(g||this._head>this._tail){for(R=this._head;R<S;R++)C[T++]=x[R];for(R=0;R<this._tail;R++)C[T++]=x[R]}else for(R=this._head;R<this._tail;R++)C[T++]=x[R];return C},n.prototype._growArray=function(){if(this._head!=0){var g=this._copyArray(!0,this._list.length<<1);this._tail=this._list.length,this._head=0,this._list=g}else this._tail=this._list.length,this._list.length<<=1;this._capacityMask=this._capacityMask<<1|1},n.prototype._shrinkArray=function(){this._list.length>>>=1,this._capacityMask>>>=1},n.prototype._nextPowerOf2=function(g){var _=Math.log(g)/Math.log(2),x=1<<_+1;return Math.max(x,4)},denque=n,denque}var denqueExports=requireDenque();const Denque=getDefaultExportFromCjs(denqueExports);var DeliveryRecordStatus;(function(n){n[n.unknown=0]="unknown",n[n.valid=1]="valid",n[n.invalid=2]="invalid",n[n.ignored=3]="ignored"})(DeliveryRecordStatus||(DeliveryRecordStatus={}));class MessageDeliveries{records;queue;constructor(){this.records=new Map,this.queue=new Denque}getRecord(r){return this.records.get(r)}ensureRecord(r){let g=this.records.get(r);if(g!=null)return g;g={status:DeliveryRecordStatus.unknown,firstSeenTsMs:Date.now(),validated:0,peers:new Set},this.records.set(r,g);const _={msgId:r,expire:Date.now()+TimeCacheDuration};return this.queue.push(_),g}gc(){const r=Date.now();let g=this.queue.peekFront();for(;g!=null&&g.expire<r;)this.records.delete(g.msgId),this.queue.shift(),g=this.queue.peekFront()}clear(){this.records.clear(),this.queue.clear()}}class PeerScore{params;metrics;peerStats=new Map;peerIPs=new MapDef(()=>new Set);scoreCache=new Map;deliveryRecords=new MessageDeliveries;_backgroundInterval;scoreCacheValidityMs;computeScore;log;constructor(r,g,_,x){this.params=r,this.metrics=g,validatePeerScoreParams(r),this.scoreCacheValidityMs=x.scoreCacheValidityMs,this.computeScore=x.computeScore??computeScore,this.log=_.forComponent("libp2p:gossipsub:score")}get size(){return this.peerStats.size}start(){if(this._backgroundInterval!=null){this.log("Peer score already running");return}this._backgroundInterval=setInterval(()=>{this.background()},this.params.decayInterval),this.log("started")}stop(){if(this._backgroundInterval==null){this.log("Peer score already stopped");return}clearInterval(this._backgroundInterval),delete this._backgroundInterval,this.peerIPs.clear(),this.peerStats.clear(),this.deliveryRecords.clear(),this.log("stopped")}background(){this.refreshScores(),this.deliveryRecords.gc()}dumpPeerScoreStats(){return Object.fromEntries(Array.from(this.peerStats.entries()).map(([r,g])=>[r,g]))}messageFirstSeenTimestampMs(r){const g=this.deliveryRecords.getRecord(r);return g!=null?g.firstSeenTsMs:null}refreshScores(){const r=Date.now(),g=this.params.decayToZero;this.peerStats.forEach((_,x)=>{if(!_.connected){r>_.expire&&(this.removeIPsForPeer(x,_.knownIPs),this.peerStats.delete(x),this.scoreCache.delete(x));return}Object.entries(_.topics).forEach(([S,E])=>{const C=this.params.topics[S];C!==void 0&&(E.firstMessageDeliveries*=C.firstMessageDeliveriesDecay,E.firstMessageDeliveries<g&&(E.firstMessageDeliveries=0),E.meshMessageDeliveries*=C.meshMessageDeliveriesDecay,E.meshMessageDeliveries<g&&(E.meshMessageDeliveries=0),E.meshFailurePenalty*=C.meshFailurePenaltyDecay,E.meshFailurePenalty<g&&(E.meshFailurePenalty=0),E.invalidMessageDeliveries*=C.invalidMessageDeliveriesDecay,E.invalidMessageDeliveries<g&&(E.invalidMessageDeliveries=0),E.inMesh&&(E.meshTime=r-E.graftTime,E.meshTime>C.meshMessageDeliveriesActivation&&(E.meshMessageDeliveriesActive=!0)))}),_.behaviourPenalty*=this.params.behaviourPenaltyDecay,_.behaviourPenalty<g&&(_.behaviourPenalty=0)})}score(r){this.metrics?.scoreFnCalls.inc();const g=this.peerStats.get(r);if(g==null)return 0;const _=Date.now(),x=this.scoreCache.get(r);if(x!=null&&x.cacheUntil>_)return x.score;this.metrics?.scoreFnRuns.inc();const S=this.computeScore(r,g,this.params,this.peerIPs),E=_+this.scoreCacheValidityMs;return x!=null?(this.metrics?.scoreCachedDelta.observe(Math.abs(S-x.score)),x.score=S,x.cacheUntil=E):this.scoreCache.set(r,{score:S,cacheUntil:E}),S}addPenalty(r,g,_){const x=this.peerStats.get(r);x!=null&&(x.behaviourPenalty+=g,this.metrics?.onScorePenalty(_))}addPeer(r){const g={connected:!0,expire:0,topics:{},knownIPs:new Set,behaviourPenalty:0};this.peerStats.set(r,g)}addIP(r,g){const _=this.peerStats.get(r);_?.knownIPs.add(g),this.peerIPs.getOrDefault(g).add(r)}removeIP(r,g){const _=this.peerStats.get(r);_?.knownIPs.delete(g);const x=this.peerIPs.get(g);x!=null&&(x.delete(r),x.size===0&&this.peerIPs.delete(g))}removePeer(r){const g=this.peerStats.get(r);if(g!=null){if(this.score(r)>0){this.removeIPsForPeer(r,g.knownIPs),this.peerStats.delete(r);return}Object.entries(g.topics).forEach(([_,x])=>{x.firstMessageDeliveries=0;const S=this.params.topics[_].meshMessageDeliveriesThreshold;if(x.inMesh&&x.meshMessageDeliveriesActive&&x.meshMessageDeliveries<S){const E=S-x.meshMessageDeliveries;x.meshFailurePenalty+=E*E}x.inMesh=!1,x.meshMessageDeliveriesActive=!1}),g.connected=!1,g.expire=Date.now()+this.params.retainScore}}graft(r,g){const _=this.peerStats.get(r);if(_!=null){const x=this.getPtopicStats(_,g);x!=null&&(x.inMesh=!0,x.graftTime=Date.now(),x.meshTime=0,x.meshMessageDeliveriesActive=!1)}}prune(r,g){const _=this.peerStats.get(r);if(_!=null){const x=this.getPtopicStats(_,g);if(x!=null){const S=this.params.topics[g].meshMessageDeliveriesThreshold;if(x.meshMessageDeliveriesActive&&x.meshMessageDeliveries<S){const E=S-x.meshMessageDeliveries;x.meshFailurePenalty+=E*E}x.meshMessageDeliveriesActive=!1,x.inMesh=!1}}}validateMessage(r){this.deliveryRecords.ensureRecord(r)}deliverMessage(r,g,_){this.markFirstMessageDelivery(r,_);const x=this.deliveryRecords.ensureRecord(g),S=Date.now();if(x.status!==DeliveryRecordStatus.unknown){this.log("unexpected delivery: message from %s was first seen %s ago and has delivery status %s",r,S-x.firstSeenTsMs,DeliveryRecordStatus[x.status]);return}x.status=DeliveryRecordStatus.valid,x.validated=S,x.peers.forEach(E=>{E!==r.toString()&&this.markDuplicateMessageDelivery(E,_)})}rejectInvalidMessage(r,g){this.markInvalidMessageDelivery(r,g)}rejectMessage(r,g,_,x){switch(x){case RejectReason.Error:this.markInvalidMessageDelivery(r,_);return;case RejectReason.Blacklisted:return}const S=this.deliveryRecords.ensureRecord(g);if(S.status!==DeliveryRecordStatus.unknown){this.log("unexpected rejection: message from %s was first seen %s ago and has delivery status %d",r,Date.now()-S.firstSeenTsMs,DeliveryRecordStatus[S.status]);return}if(x===RejectReason.Ignore){S.status=DeliveryRecordStatus.ignored,S.peers.clear();return}S.status=DeliveryRecordStatus.invalid,this.markInvalidMessageDelivery(r,_),S.peers.forEach(E=>{this.markInvalidMessageDelivery(E,_)}),S.peers.clear()}duplicateMessage(r,g,_){const x=this.deliveryRecords.ensureRecord(g);if(!x.peers.has(r))switch(x.status){case DeliveryRecordStatus.unknown:x.peers.add(r);break;case DeliveryRecordStatus.valid:x.peers.add(r),this.markDuplicateMessageDelivery(r,_,x.validated);break;case DeliveryRecordStatus.invalid:this.markInvalidMessageDelivery(r,_);break;case DeliveryRecordStatus.ignored:break}}markInvalidMessageDelivery(r,g){const _=this.peerStats.get(r);if(_!=null){const x=this.getPtopicStats(_,g);x!=null&&(x.invalidMessageDeliveries+=1)}}markFirstMessageDelivery(r,g){const _=this.peerStats.get(r);if(_!=null){const x=this.getPtopicStats(_,g);if(x!=null){let S=this.params.topics[g].firstMessageDeliveriesCap;x.firstMessageDeliveries=Math.min(S,x.firstMessageDeliveries+1),x.inMesh&&(S=this.params.topics[g].meshMessageDeliveriesCap,x.meshMessageDeliveries=Math.min(S,x.meshMessageDeliveries+1))}}}markDuplicateMessageDelivery(r,g,_){const x=this.peerStats.get(r);if(x!=null){const S=_!==void 0?Date.now():0,E=this.getPtopicStats(x,g);if(E!=null&&E.inMesh){const C=this.params.topics[g];if(_!==void 0){const R=S-_,A=R>C.meshMessageDeliveriesWindow;if(this.metrics?.onDuplicateMsgDelivery(g,R,A),A)return}const T=C.meshMessageDeliveriesCap;E.meshMessageDeliveries=Math.min(T,E.meshMessageDeliveries+1)}}}removeIPsForPeer(r,g){for(const _ of g){const x=this.peerIPs.get(_);x!=null&&(x.delete(r),x.size===0&&this.peerIPs.delete(_))}}getPtopicStats(r,g){let _=r.topics[g];return _!==void 0?_:this.params.topics[g]!==void 0?(_={inMesh:!1,graftTime:0,meshTime:0,firstMessageDeliveries:0,meshMessageDeliveries:0,meshMessageDeliveriesActive:!1,meshFailurePenalty:0,invalidMessageDeliveries:0},r.topics[g]=_,_):null}}function computeScoreWeights(n,r,g,_,x){let S=0;const E=new Map;if(Object.entries(r.topics).forEach(([B,D])=>{const N=x.get(B)??"unknown",M=g.topics[B];if(M===void 0)return;let O=E.get(N);O==null&&(O={p1w:0,p2w:0,p3w:0,p3bw:0,p4w:0},E.set(N,O));let L=0,F=0,U=0,j=0,z=0;if(D.inMesh){const fe=Math.max(D.meshTime/M.timeInMeshQuantum,M.timeInMeshCap);L+=fe*M.timeInMeshWeight}let W=D.firstMessageDeliveries;if(W>M.firstMessageDeliveriesCap&&(W=M.firstMessageDeliveriesCap),F+=W*M.firstMessageDeliveriesWeight,D.meshMessageDeliveriesActive&&D.meshMessageDeliveries<M.meshMessageDeliveriesThreshold){const fe=M.meshMessageDeliveriesThreshold-D.meshMessageDeliveries,xe=fe*fe;U+=xe*M.meshMessageDeliveriesWeight}const X=D.meshFailurePenalty;j+=X*M.meshFailurePenaltyWeight;const ie=D.invalidMessageDeliveries*D.invalidMessageDeliveries;z+=ie*M.invalidMessageDeliveriesWeight,S+=(L+F+U+j+z)*M.topicWeight,O.p1w+=L,O.p2w+=F,O.p3w+=U,O.p3bw+=j,O.p4w+=z}),g.topicScoreCap>0&&S>g.topicScoreCap){S=g.topicScoreCap;const B=g.topicScoreCap/S;for(const D of E.values())D.p1w*=B,D.p2w*=B,D.p3w*=B,D.p3bw*=B,D.p4w*=B}let C=0,T=0,R=0;const A=g.appSpecificScore(n);C+=A*g.appSpecificWeight,r.knownIPs.forEach(B=>{if(g.IPColocationFactorWhitelist.has(B))return;const D=_.get(B),N=D!=null?D.size:0;if(N>g.IPColocationFactorThreshold){const M=N-g.IPColocationFactorThreshold,O=M*M;T+=O*g.IPColocationFactorWeight}});const I=r.behaviourPenalty*r.behaviourPenalty;return R+=I*g.behaviourPenaltyWeight,S+=C+T+R,{byTopic:E,p5w:C,p6w:T,p7w:R,score:S}}function computeAllPeersScoreWeights(n,r,g,_,x){const S={byTopic:new Map,p5w:[],p6w:[],p7w:[],score:[]};for(const E of n){const C=r.get(E);if(C!=null){const T=computeScoreWeights(E,C,g,_,x);for(const[R,A]of T.byTopic){let I=S.byTopic.get(R);I==null&&(I={p1w:[],p2w:[],p3w:[],p3bw:[],p4w:[]},S.byTopic.set(R,I)),I.p1w.push(A.p1w),I.p2w.push(A.p2w),I.p3w.push(A.p3w),I.p3bw.push(A.p3bw),I.p4w.push(A.p4w)}S.p5w.push(T.p5w),S.p6w.push(T.p6w),S.p7w.push(T.p7w),S.score.push(T.score)}else S.p5w.push(0),S.p6w.push(0),S.p7w.push(0),S.score.push(0)}return S}class OutboundStream{rawStream;pushable;closeController;maxBufferSize;constructor(r,g,_){this.rawStream=r,this.pushable=pushable(),this.closeController=new AbortController,this.maxBufferSize=_.maxBufferSize??1/0,this.closeController.signal.addEventListener("abort",()=>{r.close().catch(x=>{r.abort(x)})}),pipe(this.pushable,this.rawStream).catch(g)}get protocol(){return this.rawStream.protocol}push(r){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(encode$2.single(r))}pushPrefixed(r){if(this.pushable.readableLength>this.maxBufferSize)throw Error(`OutboundStream buffer full, size > ${this.maxBufferSize}`);this.pushable.push(r)}async close(){this.closeController.abort(),await this.pushable.return()}}class InboundStream{source;rawStream;closeController;constructor(r,g={}){this.rawStream=r,this.closeController=new AbortController,this.closeController.signal.addEventListener("abort",()=>{r.close().catch(_=>{r.abort(_)})}),this.source=pipe(this.rawStream,_=>decode$2(_,g))}async close(){this.closeController.abort()}}class IWantTracer{gossipsubIWantFollowupMs;msgIdToStrFn;metrics;promises=new Map;requestMsByMsg=new Map;requestMsByMsgExpire;constructor(r,g,_){this.gossipsubIWantFollowupMs=r,this.msgIdToStrFn=g,this.metrics=_,this.requestMsByMsgExpire=10*r}get size(){return this.promises.size}get requestMsByMsgSize(){return this.requestMsByMsg.size}addPromise(r,g){const _=Math.floor(Math.random()*g.length),x=g[_],S=this.msgIdToStrFn(x);let E=this.promises.get(S);E==null&&(E=new Map,this.promises.set(S,E));const C=Date.now();E.has(r)||(E.set(r,C+this.gossipsubIWantFollowupMs),this.metrics!=null&&(this.metrics.iwantPromiseStarted.inc(1),this.requestMsByMsg.has(S)||this.requestMsByMsg.set(S,C)))}getBrokenPromises(){const r=Date.now(),g=new Map;let _=0;return this.promises.forEach((x,S)=>{x.forEach((E,C)=>{E<r&&(g.set(C,(g.get(C)??0)+1),x.delete(C),_++)}),x.size===0&&this.promises.delete(S)}),this.metrics?.iwantPromiseBroken.inc(_),g}deliverMessage(r,g=!1){this.trackMessage(r);const _=this.promises.get(r);_!=null&&(this.promises.delete(r),this.metrics!=null&&(this.metrics.iwantPromiseResolved.inc(1),g&&this.metrics.iwantPromiseResolvedFromDuplicate.inc(1),this.metrics.iwantPromiseResolvedPeers.inc(_.size)))}rejectMessage(r,g){switch(this.trackMessage(r),g){case RejectReason.Error:return}this.promises.delete(r)}clear(){this.promises.clear()}prune(){const r=Date.now()-this.requestMsByMsgExpire;let g=0;for(const[_,x]of this.requestMsByMsg.entries())if(x<r)this.requestMsByMsg.delete(_),g++;else break;this.metrics?.iwantMessagePruned.inc(g)}trackMessage(r){if(this.metrics!=null){const g=this.requestMsByMsg.get(r);g!==void 0&&(this.metrics.iwantPromiseDeliveryTime.observe((Date.now()-g)/1e3),this.requestMsByMsg.delete(r))}}}const SignPrefix=fromString("libp2p-pubsub:");async function buildRawMessage(n,r,g,_){switch(n.type){case PublishConfigType.Signing:{const x={from:n.author.toMultihash().bytes,data:_,seqno:randomBytes(8),topic:r,signature:void 0,key:void 0},S=concat([SignPrefix,RPC.Message.encode(x)]);x.signature=await n.privateKey.sign(S),x.key=n.key;const E={type:"signed",from:n.author,data:g,sequenceNumber:BigInt(`0x${toString$3(x.seqno??new Uint8Array(0),"base16")}`),topic:r,signature:x.signature,key:publicKeyFromProtobuf(x.key)};return{raw:x,msg:E}}case PublishConfigType.Anonymous:return{raw:{from:void 0,data:_,seqno:void 0,topic:r,signature:void 0,key:void 0},msg:{type:"unsigned",data:g,topic:r}};default:throw new Error("Unreachable")}}async function validateToRawMessage(n,r){switch(n){case StrictNoSign:return r.signature!=null?{valid:!1,error:ValidateError.SignaturePresent}:r.seqno!=null?{valid:!1,error:ValidateError.SeqnoPresent}:r.key!=null?{valid:!1,error:ValidateError.FromPresent}:{valid:!0,message:{type:"unsigned",topic:r.topic,data:r.data??new Uint8Array(0)}};case StrictSign:{if(r.seqno==null)return{valid:!1,error:ValidateError.InvalidSeqno};if(r.seqno.length!==8)return{valid:!1,error:ValidateError.InvalidSeqno};if(r.signature==null)return{valid:!1,error:ValidateError.InvalidSignature};if(r.from==null)return{valid:!1,error:ValidateError.InvalidPeerId};let g;try{g=peerIdFromMultihash(decode$h(r.from))}catch{return{valid:!1,error:ValidateError.InvalidPeerId}}let _;if(r.key!=null){if(_=publicKeyFromProtobuf(r.key),g.publicKey!==void 0&&!_.equals(g.publicKey))return{valid:!1,error:ValidateError.InvalidPeerId}}else{if(g.publicKey==null)return{valid:!1,error:ValidateError.InvalidPeerId};_=g.publicKey}const x={from:r.from,data:r.data,seqno:r.seqno,topic:r.topic,signature:void 0,key:void 0},S=concat([SignPrefix,RPC.Message.encode(x)]);return await _.verify(S,r.signature)?{valid:!0,message:{type:"signed",from:g,data:r.data??new Uint8Array(0),sequenceNumber:BigInt(`0x${toString$3(r.seqno,"base16")}`),topic:r.topic,signature:r.signature,key:r.key!=null?publicKeyFromProtobuf(r.key):_}}:{valid:!1,error:ValidateError.InvalidSignature}}default:throw new Error("Unreachable")}}function createGossipRpc(n=[],r){return{subscriptions:[],messages:n,control:r!==void 0?{graft:r.graft??[],prune:r.prune??[],ihave:r.ihave??[],iwant:r.iwant??[],idontwant:r.idontwant??[]}:void 0}}function ensureControl(n){return n.control===void 0&&(n.control={graft:[],prune:[],ihave:[],iwant:[],idontwant:[]}),n}function shuffle(n){if(n.length<=1)return n;const r=()=>Math.floor(Math.random()*Math.floor(n.length));for(let g=0;g<n.length;g++){const _=r(),x=n[g];n[g]=n[_],n[_]=x}return n}function messageIdToString(n){return toString$3(n,"base64")}function getPublishConfigFromPeerId(n,r,g){switch(n){case StrictSign:return{type:PublishConfigType.Signing,author:r,key:publicKeyToProtobuf(g.publicKey),privateKey:g};case StrictNoSign:return{type:PublishConfigType.Anonymous};default:throw new Error(`Unknown signature policy "${n}"`)}}const msgId=(n,r)=>{const g=fromString(r.toString(16).padStart(16,"0"),"base16"),_=publicKeyToProtobuf(n),x=new Uint8Array(_.byteLength+g.length);return x.set(_,0),x.set(g,_.byteLength),x};function msgIdFnStrictSign(n){if(n.type!=="signed")throw new Error("expected signed message type");if(n.sequenceNumber==null)throw Error("missing seqno field");return msgId(n.from.publicKey??n.key,n.sequenceNumber)}async function msgIdFnStrictNoSign(n){return sha256$8.encode(n.data)}var Protocol;(function(n){n[n.ip4=4]="ip4",n[n.ip6=41]="ip6"})(Protocol||(Protocol={}));function multiaddrToIPStr(n){for(const r of n.tuples())switch(r[0]){case Protocol.ip4:case Protocol.ip6:return convertToString(r[0],r[1])}return null}class SimpleTimeCache{entries=new Map;validityMs;constructor(r){this.validityMs=r.validityMs}get size(){return this.entries.size}put(r,g){return this.entries.has(r)?!0:(this.entries.set(r,{value:g,validUntilMs:Date.now()+this.validityMs}),!1)}prune(){const r=Date.now();for(const[g,_]of this.entries.entries())if(_.validUntilMs<r)this.entries.delete(g);else break}has(r){return this.entries.has(r)}get(r){const g=this.entries.get(r);return g!=null&&g.validUntilMs>=Date.now()?g.value:void 0}clear(){this.entries.clear()}}var GossipStatusCode;(function(n){n[n.started=0]="started",n[n.stopped=1]="stopped"})(GossipStatusCode||(GossipStatusCode={}));class GossipSub extends TypedEventEmitter{globalSignaturePolicy;multicodecs=[GossipsubIDv12,GossipsubIDv11,GossipsubIDv10];publishConfig;dataTransform;peers=new Set;streamsInbound=new Map;streamsOutbound=new Map;outboundInflightQueue=pushable({objectMode:!0});direct=new Set;floodsubPeers=new Set;seenCache;acceptFromWhitelist=new Map;topics=new Map;subscriptions=new Set;mesh=new Map;fanout=new Map;fanoutLastpub=new Map;gossip=new Map;control=new Map;peerhave=new Map;iasked=new Map;backoff=new Map;outbound=new Map;msgIdFn;fastMsgIdFn;msgIdToStrFn;fastMsgIdCache;publishedMessageIds;mcache;score;topicValidators=new Map;log;heartbeatTicks=0;gossipTracer;idontwantCounts=new Map;idontwants=new Map;components;directPeerInitial=null;static multicodec=GossipsubIDv12;opts;decodeRpcLimits;metrics;status={code:GossipStatusCode.stopped};maxInboundStreams;maxOutboundStreams;runOnLimitedConnection;allowedTopics;heartbeatTimer=null;constructor(r,g={}){super();const _={fallbackToFloodsub:!0,floodPublish:!0,batchPublish:!1,tagMeshPeers:!0,doPX:!1,directPeers:[],D:GossipsubD,Dlo:GossipsubDlo,Dhi:GossipsubDhi,Dscore:GossipsubDscore,Dout:GossipsubDout,Dlazy:GossipsubDlazy,heartbeatInterval:GossipsubHeartbeatInterval,fanoutTTL:GossipsubFanoutTTL,mcacheLength:GossipsubHistoryLength,mcacheGossip:GossipsubHistoryGossip,seenTTL:GossipsubSeenTTL,gossipsubIWantFollowupMs:GossipsubIWantFollowupTime,prunePeers:GossipsubPrunePeers,pruneBackoff:GossipsubPruneBackoff,unsubcribeBackoff:GossipsubUnsubscribeBackoff,graftFloodThreshold:GossipsubGraftFloodThreshold,opportunisticGraftPeers:GossipsubOpportunisticGraftPeers,opportunisticGraftTicks:GossipsubOpportunisticGraftTicks,directConnectTicks:GossipsubDirectConnectTicks,gossipFactor:GossipsubGossipFactor,idontwantMinDataSize:GossipsubIdontwantMinDataSize,idontwantMaxMessages:GossipsubIdontwantMaxMessages,...g,scoreParams:createPeerScoreParams(g.scoreParams),scoreThresholds:createPeerScoreThresholds(g.scoreThresholds)};if(this.components=r,this.decodeRpcLimits=_.decodeRpcLimits??defaultDecodeRpcLimits,this.globalSignaturePolicy=_.globalSignaturePolicy??StrictSign,_.fallbackToFloodsub&&this.multicodecs.push(FloodsubID),this.log=r.logger.forComponent(_.debugName??"libp2p:gossipsub"),this.opts=_,this.direct=new Set(_.directPeers.map(x=>x.id.toString())),this.seenCache=new SimpleTimeCache({validityMs:_.seenTTL}),this.publishedMessageIds=new SimpleTimeCache({validityMs:_.seenTTL}),g.msgIdFn!=null)this.msgIdFn=g.msgIdFn;else switch(this.globalSignaturePolicy){case StrictSign:this.msgIdFn=msgIdFnStrictSign;break;case StrictNoSign:this.msgIdFn=msgIdFnStrictNoSign;break;default:throw new Error(`Invalid globalSignaturePolicy: ${this.globalSignaturePolicy}`)}if(g.fastMsgIdFn!=null&&(this.fastMsgIdFn=g.fastMsgIdFn,this.fastMsgIdCache=new SimpleTimeCache({validityMs:_.seenTTL})),this.msgIdToStrFn=g.msgIdToStrFn??messageIdToString,this.mcache=g.messageCache??new MessageCache(_.mcacheGossip,_.mcacheLength,this.msgIdToStrFn),g.dataTransform!=null&&(this.dataTransform=g.dataTransform),g.metricsRegister!=null){if(g.metricsTopicStrToLabel==null)throw Error("Must set metricsTopicStrToLabel with metrics");const x=Math.max(...Object.values(_.scoreParams.topics).map(E=>E.meshMessageDeliveriesWindow),DEFAULT_METRIC_MESH_MESSAGE_DELIVERIES_WINDOWS),S=getMetrics(g.metricsRegister,g.metricsTopicStrToLabel,{gossipPromiseExpireSec:this.opts.gossipsubIWantFollowupMs/1e3,behaviourPenaltyThreshold:_.scoreParams.behaviourPenaltyThreshold,maxMeshMessageDeliveriesWindowSec:x/1e3});S.mcacheSize.addCollect(()=>{this.onScrapeMetrics(S)});for(const E of this.multicodecs)S.protocolsEnabled.set({protocol:E},1);this.metrics=S}else this.metrics=null;this.gossipTracer=new IWantTracer(this.opts.gossipsubIWantFollowupMs,this.msgIdToStrFn,this.metrics),this.score=new PeerScore(this.opts.scoreParams,this.metrics,this.components.logger,{scoreCacheValidityMs:_.heartbeatInterval}),this.maxInboundStreams=g.maxInboundStreams,this.maxOutboundStreams=g.maxOutboundStreams,this.runOnLimitedConnection=g.runOnLimitedConnection,this.allowedTopics=_.allowedTopics!=null?new Set(_.allowedTopics):null}[Symbol.toStringTag]="@chainsafe/libp2p-gossipsub";[serviceCapabilities]=["@libp2p/pubsub"];[serviceDependencies]=["@libp2p/identify"];getPeers(){return[...this.peers.keys()].map(r=>peerIdFromString$1(r))}isStarted(){return this.status.code===GossipStatusCode.started}async start(){if(this.isStarted())return;this.log("starting"),this.publishConfig=getPublishConfigFromPeerId(this.globalSignaturePolicy,this.components.peerId,this.components.privateKey),this.outboundInflightQueue=pushable({objectMode:!0}),pipe(this.outboundInflightQueue,async S=>{for await(const{peerId:E,connection:C}of S)await this.createOutboundStream(E,C)}).catch(S=>{this.log.error("outbound inflight queue error",S)}),await Promise.all(this.opts.directPeers.map(async S=>{await this.components.peerStore.merge(S.id,{multiaddrs:S.addrs})}));const r=this.components.registrar;await Promise.all(this.multicodecs.map(async S=>r.handle(S,this.onIncomingStream.bind(this),{maxInboundStreams:this.maxInboundStreams,maxOutboundStreams:this.maxOutboundStreams,runOnLimitedConnection:this.runOnLimitedConnection})));const g={onConnect:this.onPeerConnected.bind(this),onDisconnect:this.onPeerDisconnected.bind(this),notifyOnLimitedConnection:this.runOnLimitedConnection},_=await Promise.all(this.multicodecs.map(async S=>r.register(S,g))),x=setTimeout(this.runHeartbeat,GossipsubHeartbeatInitialDelay);this.status={code:GossipStatusCode.started,registrarTopologyIds:_,heartbeatTimeout:x,hearbeatStartMs:Date.now()+GossipsubHeartbeatInitialDelay},this.score.start(),this.directPeerInitial=setTimeout(()=>{Promise.resolve().then(async()=>{await Promise.all(Array.from(this.direct).map(async S=>this.connect(S)))}).catch(S=>{this.log(S)})},GossipsubDirectConnectInitialDelay),this.opts.tagMeshPeers&&(this.addEventListener("gossipsub:graft",this.tagMeshPeer),this.addEventListener("gossipsub:prune",this.untagMeshPeer)),this.log("started")}async stop(){if(this.log("stopping"),this.status.code!==GossipStatusCode.started)return;const{registrarTopologyIds:r}=this.status;this.status={code:GossipStatusCode.stopped},this.opts.tagMeshPeers&&(this.removeEventListener("gossipsub:graft",this.tagMeshPeer),this.removeEventListener("gossipsub:prune",this.untagMeshPeer));const g=this.components.registrar;await Promise.all(this.multicodecs.map(async x=>g.unhandle(x))),r.forEach(x=>{g.unregister(x)}),this.outboundInflightQueue.end();const _=[];for(const x of this.streamsOutbound.values())_.push(x.close());this.streamsOutbound.clear();for(const x of this.streamsInbound.values())_.push(x.close());this.streamsInbound.clear(),await Promise.all(_),this.peers.clear(),this.subscriptions.clear(),this.heartbeatTimer!=null&&(this.heartbeatTimer.cancel(),this.heartbeatTimer=null),this.score.stop(),this.mesh.clear(),this.fanout.clear(),this.fanoutLastpub.clear(),this.gossip.clear(),this.control.clear(),this.peerhave.clear(),this.iasked.clear(),this.backoff.clear(),this.outbound.clear(),this.gossipTracer.clear(),this.seenCache.clear(),this.fastMsgIdCache!=null&&this.fastMsgIdCache.clear(),this.directPeerInitial!=null&&clearTimeout(this.directPeerInitial),this.idontwantCounts.clear(),this.idontwants.clear(),this.log("stopped")}dumpPeerScoreStats(){return this.score.dumpPeerScoreStats()}onIncomingStream({stream:r,connection:g}){if(!this.isStarted())return;const _=g.remotePeer;this.addPeer(_,g.direction,g.remoteAddr),this.createInboundStream(_,r),this.outboundInflightQueue.push({peerId:_,connection:g})}onPeerConnected(r,g){this.metrics?.newConnectionCount.inc({status:g.status}),!(!this.isStarted()||g.status!=="open")&&(this.addPeer(r,g.direction,g.remoteAddr),this.outboundInflightQueue.push({peerId:r,connection:g}))}onPeerDisconnected(r){this.log("connection ended %p",r),this.removePeer(r)}async createOutboundStream(r,g){if(!this.isStarted())return;const _=r.toString();if(this.peers.has(_)&&!this.streamsOutbound.has(_))try{const x=new OutboundStream(await g.newStream(this.multicodecs,{runOnLimitedConnection:this.runOnLimitedConnection}),E=>{this.log.error("outbound pipe error",E)},{maxBufferSize:this.opts.maxOutboundBufferSize});this.log("create outbound stream %p",r),this.streamsOutbound.set(_,x);const S=x.protocol;S===FloodsubID&&this.floodsubPeers.add(_),this.metrics?.peersPerProtocol.inc({protocol:S},1),this.subscriptions.size>0&&(this.log("send subscriptions to",_),this.sendSubscriptions(_,Array.from(this.subscriptions),!0))}catch(x){this.log.error("createOutboundStream error",x)}}createInboundStream(r,g){if(!this.isStarted())return;const _=r.toString();if(!this.peers.has(_))return;const x=this.streamsInbound.get(_);x!==void 0&&(this.log("replacing existing inbound steam %s",_),x.close().catch(E=>{this.log.error(E)})),this.log("create inbound stream %s",_);const S=new InboundStream(g,{maxDataLength:this.opts.maxInboundDataLength});this.streamsInbound.set(_,S),this.pipePeerReadStream(r,S.source).catch(E=>{this.log(E)})}addPeer(r,g,_){const x=r.toString();if(!this.peers.has(x)){this.log("new peer %p",r),this.peers.add(x),this.score.addPeer(x);const S=multiaddrToIPStr(_);S!==null?this.score.addIP(x,S):this.log("Added peer has no IP in current address %s %s",x,_.toString()),this.outbound.has(x)||this.outbound.set(x,g==="outbound")}}removePeer(r){const g=r.toString();if(!this.peers.has(g))return;this.log("delete peer %p",r),this.peers.delete(g);const _=this.streamsOutbound.get(g),x=this.streamsInbound.get(g);_!=null&&this.metrics?.peersPerProtocol.inc({protocol:_.protocol},-1),_?.close().catch(S=>{this.log.error(S)}),x?.close().catch(S=>{this.log.error(S)}),this.streamsOutbound.delete(g),this.streamsInbound.delete(g);for(const S of this.topics.values())S.delete(g);for(const[S,E]of this.mesh)E.delete(g)&&this.metrics?.onRemoveFromMesh(S,ChurnReason.Dc,1);for(const S of this.fanout.values())S.delete(g);this.floodsubPeers.delete(g),this.gossip.delete(g),this.control.delete(g),this.outbound.delete(g),this.idontwantCounts.delete(g),this.idontwants.delete(g),this.score.removePeer(g),this.acceptFromWhitelist.delete(g)}get started(){return this.status.code===GossipStatusCode.started}getMeshPeers(r){const g=this.mesh.get(r);return g!=null?Array.from(g):[]}getSubscribers(r){const g=this.topics.get(r);return(g!=null?Array.from(g):[]).map(_=>peerIdFromString$1(_))}getTopics(){return Array.from(this.subscriptions)}async pipePeerReadStream(r,g){try{await pipe(g,async _=>{for await(const x of _)try{const S=x.subarray(),E=RPC.decode(S,{limits:{subscriptions:this.decodeRpcLimits.maxSubscriptions,messages:this.decodeRpcLimits.maxMessages,control$:{ihave:this.decodeRpcLimits.maxIhaveMessageIDs,iwant:this.decodeRpcLimits.maxIwantMessageIDs,graft:this.decodeRpcLimits.maxControlMessages,prune:this.decodeRpcLimits.maxControlMessages,prune$:{peers:this.decodeRpcLimits.maxPeerInfos},idontwant:this.decodeRpcLimits.maxControlMessages,idontwant$:{messageIDs:this.decodeRpcLimits.maxIdontwantMessageIDs}}}});if(this.metrics?.onRpcRecv(E,S.length),this.opts.awaitRpcHandler)try{await this.handleReceivedRpc(r,E)}catch(C){this.metrics?.onRpcRecvError(),this.log(C)}else this.handleReceivedRpc(r,E).catch(C=>{this.metrics?.onRpcRecvError(),this.log(C)})}catch(S){this.metrics?.onRpcDataError(),this.log(S)}})}catch(_){this.metrics?.onPeerReadStreamError(),this.handlePeerReadStreamError(_,r)}}handlePeerReadStreamError(r,g){this.log.error(r),this.onPeerDisconnected(g)}async handleReceivedRpc(r,g){if(!this.acceptFrom(r.toString())){this.log("received message from unacceptable peer %p",r),this.metrics?.rpcRecvNotAccepted.inc();return}const _=g.subscriptions!=null?g.subscriptions.length:0,x=g.messages!=null?g.messages.length:0;let S=0,E=0,C=0,T=0;if(g.control!=null&&(g.control.ihave!=null&&(S=g.control.ihave.length),g.control.iwant!=null&&(E=g.control.iwant.length),g.control.graft!=null&&(C=g.control.graft.length),g.control.prune!=null&&(T=g.control.prune.length)),this.log(`rpc.from ${r.toString()} subscriptions ${_} messages ${x} ihave ${S} iwant ${E} graft ${C} prune ${T}`),g.subscriptions!=null&&g.subscriptions.length>0){const R=[];g.subscriptions.forEach(A=>{const I=A.topic,B=A.subscribe===!0;if(I!=null){if(this.allowedTopics!=null&&!this.allowedTopics.has(I))return;this.handleReceivedSubscription(r,I,B),R.push({topic:I,subscribe:B})}}),this.safeDispatchEvent("subscription-change",{detail:{peerId:r,subscriptions:R}})}for(const R of g.messages){if(this.allowedTopics!=null&&!this.allowedTopics.has(R.topic))continue;const A=this.handleReceivedMessage(r,R).catch(I=>{this.metrics?.onMsgRecvError(R.topic),this.log(I)});this.opts.awaitRpcMessageHandler&&await A}g.control!=null&&await this.handleControlMessage(r.toString(),g.control)}handleReceivedSubscription(r,g,_){this.log("subscription update from %p topic %s",r,g);let x=this.topics.get(g);x==null&&(x=new Set,this.topics.set(g,x)),_?x.add(r.toString()):x.delete(r.toString())}async handleReceivedMessage(r,g){this.metrics?.onMsgRecvPreValidation(g.topic);const _=await this.validateReceivedMessage(r,g);this.metrics?.onPrevalidationResult(g.topic,_.code);const x=_.code;switch(x){case MessageStatus.duplicate:this.score.duplicateMessage(r.toString(),_.msgIdStr,g.topic),this.gossipTracer.deliverMessage(_.msgIdStr,!0),this.mcache.observeDuplicate(_.msgIdStr,r.toString());return;case MessageStatus.invalid:if(_.msgIdStr!=null){const S=_.msgIdStr;this.score.rejectMessage(r.toString(),S,g.topic,_.reason),this.gossipTracer.rejectMessage(S,_.reason)}else this.score.rejectInvalidMessage(r.toString(),g.topic);this.metrics?.onMsgRecvInvalid(g.topic,_);return;case MessageStatus.valid:this.score.validateMessage(_.messageId.msgIdStr),this.gossipTracer.deliverMessage(_.messageId.msgIdStr),this.mcache.put(_.messageId,g,!this.opts.asyncValidation),this.subscriptions.has(g.topic)&&(!this.components.peerId.equals(r)||this.opts.emitSelf)&&(super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:r,msgId:_.messageId.msgIdStr,msg:_.msg}})),super.dispatchEvent(new CustomEvent("message",{detail:_.msg}))),this.opts.asyncValidation||this.forwardMessage(_.messageId.msgIdStr,g,r.toString());break;default:throw new Error(`Invalid validation result: ${x}`)}}async validateReceivedMessage(r,g){const _=this.fastMsgIdFn?.(g),x=_!==void 0?this.fastMsgIdCache?.get(_):void 0;if(x!=null)return{code:MessageStatus.duplicate,msgIdStr:x};const S=await validateToRawMessage(this.globalSignaturePolicy,g);if(!S.valid)return{code:MessageStatus.invalid,reason:RejectReason.Error,error:S.error};const E=S.message;try{this.dataTransform!=null&&(E.data=this.dataTransform.inboundTransform(g.topic,E.data))}catch(I){return this.log("Invalid message, transform failed",I),{code:MessageStatus.invalid,reason:RejectReason.Error,error:ValidateError.TransformFailed}}const C=await this.msgIdFn(E),T=this.msgIdToStrFn(C),R={msgId:C,msgIdStr:T};if(_!==void 0&&this.fastMsgIdCache!=null&&this.fastMsgIdCache.put(_,T)&&this.metrics?.fastMsgIdCacheCollision.inc(),this.seenCache.has(T))return{code:MessageStatus.duplicate,msgIdStr:T};this.seenCache.put(T),(g.data?.length??0)>=this.opts.idontwantMinDataSize&&this.sendIDontWants(C,g.topic,r.toString());const A=this.topicValidators.get(g.topic);if(A!=null){let I;try{I=await A(r,E)}catch(B){const D=B.code;D===ERR_TOPIC_VALIDATOR_IGNORE&&(I=TopicValidatorResult.Ignore),D===ERR_TOPIC_VALIDATOR_REJECT?I=TopicValidatorResult.Reject:I=TopicValidatorResult.Ignore}if(I!==TopicValidatorResult.Accept)return{code:MessageStatus.invalid,reason:rejectReasonFromAcceptance(I),msgIdStr:T}}return{code:MessageStatus.valid,messageId:R,msg:E}}getScore(r){return this.score.score(r)}sendSubscriptions(r,g,_){this.sendRpc(r,{subscriptions:g.map(x=>({topic:x,subscribe:_})),messages:[]})}async handleControlMessage(r,g){if(g===void 0)return;const _=g.ihave?.length>0?this.handleIHave(r,g.ihave):[],x=g.iwant?.length>0?this.handleIWant(r,g.iwant):[],S=g.graft?.length>0?await this.handleGraft(r,g.graft):[];if(g.prune?.length>0&&await this.handlePrune(r,g.prune),g.idontwant?.length>0&&this.handleIdontwant(r,g.idontwant),_.length===0&&x.length===0&&S.length===0)return;const E=this.sendRpc(r,createGossipRpc(x,{iwant:_,prune:S})),C=_[0]?.messageIDs;C!=null&&(E?this.gossipTracer.addPromise(r,C):this.metrics?.iwantPromiseUntracked.inc(1))}acceptFrom(r){if(this.direct.has(r))return!0;const g=Date.now(),_=this.acceptFromWhitelist.get(r);if(_!=null&&_.messagesAccepted<ACCEPT_FROM_WHITELIST_MAX_MESSAGES&&_.acceptUntil>=g)return _.messagesAccepted+=1,!0;const x=this.score.score(r);return x>=ACCEPT_FROM_WHITELIST_THRESHOLD_SCORE?this.acceptFromWhitelist.set(r,{messagesAccepted:0,acceptUntil:g+ACCEPT_FROM_WHITELIST_DURATION_MS}):this.acceptFromWhitelist.delete(r),x>=this.opts.scoreThresholds.graylistThreshold}handleIHave(r,g){if(g.length===0)return[];const _=this.score.score(r);if(_<this.opts.scoreThresholds.gossipThreshold)return this.log("IHAVE: ignoring peer %s with score below threshold [ score = %d ]",r,_),this.metrics?.ihaveRcvIgnored.inc({reason:IHaveIgnoreReason.LowScore}),[];const x=(this.peerhave.get(r)??0)+1;if(this.peerhave.set(r,x),x>GossipsubMaxIHaveMessages)return this.log("IHAVE: peer %s has advertised too many times (%d) within this heartbeat interval; ignoring",r,x),this.metrics?.ihaveRcvIgnored.inc({reason:IHaveIgnoreReason.MaxIhave}),[];const S=this.iasked.get(r)??0;if(S>=GossipsubMaxIHaveLength)return this.log("IHAVE: peer %s has already advertised too many messages (%d); ignoring",r,S),this.metrics?.ihaveRcvIgnored.inc({reason:IHaveIgnoreReason.MaxIasked}),[];const E=new Map;if(g.forEach(({topicID:R,messageIDs:A})=>{if(R==null||A==null||!this.mesh.has(R))return;let I=0;A.forEach(B=>{const D=this.msgIdToStrFn(B);this.seenCache.has(D)||(E.set(D,B),I++)}),this.metrics?.onIhaveRcv(R,A.length,I)}),E.size===0)return[];let C=E.size;C+S>GossipsubMaxIHaveLength&&(C=GossipsubMaxIHaveLength-S),this.log("IHAVE: Asking for %d out of %d messages from %s",C,E.size,r);let T=Array.from(E.values());return shuffle(T),T=T.slice(0,C),this.iasked.set(r,S+C),[{messageIDs:T}]}handleIWant(r,g){if(g.length===0)return[];const _=this.score.score(r);if(_<this.opts.scoreThresholds.gossipThreshold)return this.log("IWANT: ignoring peer %s with score below threshold [score = %d]",r,_),[];const x=new Map,S=new Map;let E=0;return g.forEach(({messageIDs:C})=>{C?.forEach(T=>{const R=this.msgIdToStrFn(T),A=this.mcache.getWithIWantCount(R,r);if(A==null){E++;return}if(S.set(A.msg.topic,1+(S.get(A.msg.topic)??0)),A.count>GossipsubGossipRetransmission){this.log("IWANT: Peer %s has asked for message %s too many times: ignoring request",r,T);return}x.set(R,A.msg)})}),this.metrics?.onIwantRcv(S,E),x.size===0?(this.log("IWANT: Could not provide any wanted messages to %s",r),[]):(this.log("IWANT: Sending %d messages to %s",x.size,r),Array.from(x.values()))}async handleGraft(r,g){const _=[],x=this.score.score(r),S=Date.now();let E=this.opts.doPX;if(g.forEach(({topicID:T})=>{if(T==null)return;const R=this.mesh.get(T);if(R==null){E=!1;return}if(R.has(r))return;const A=this.backoff.get(T)?.get(r);if(this.direct.has(r))this.log("GRAFT: ignoring request from direct peer %s",r),_.push(T),E=!1;else if(typeof A=="number"&&S<A){this.log("GRAFT: ignoring backed off peer %s",r),this.score.addPenalty(r,1,ScorePenalty.GraftBackoff),E=!1;const I=A+this.opts.graftFloodThreshold-this.opts.pruneBackoff;S<I&&this.score.addPenalty(r,1,ScorePenalty.GraftBackoff),this.addBackoff(r,T),_.push(T)}else x<0?(this.log("GRAFT: ignoring peer %s with negative score: score=%d, topic=%s",r,x,T),_.push(T),E=!1,this.addBackoff(r,T)):R.size>=this.opts.Dhi&&!(this.outbound.get(r)??!1)?(_.push(T),this.addBackoff(r,T)):(this.log("GRAFT: Add mesh link from %s in %s",r,T),this.score.graft(r,T),R.add(r),this.metrics?.onAddToMesh(T,InclusionReason.Subscribed,1));this.safeDispatchEvent("gossipsub:graft",{detail:{peerId:r,topic:T,direction:"inbound"}})}),_.length===0)return[];const C=!1;return Promise.all(_.map(async T=>this.makePrune(r,T,E,C)))}async handlePrune(r,g){const _=this.score.score(r);for(const{topicID:x,backoff:S,peers:E}of g){if(x==null)continue;const C=this.mesh.get(x);if(C==null)return;this.log("PRUNE: Remove mesh link to %s in %s",r,x),this.score.prune(r,x),C.has(r)&&(C.delete(r),this.metrics?.onRemoveFromMesh(x,ChurnReason.Prune,1)),typeof S=="number"&&S>0?this.doAddBackoff(r,x,S*1e3):this.addBackoff(r,x),E!=null&&E.length>0&&(_<this.opts.scoreThresholds.acceptPXThreshold?this.log("PRUNE: ignoring PX from peer %s with insufficient score [score = %d, topic = %s]",r,_,x):await this.pxConnect(E)),this.safeDispatchEvent("gossipsub:prune",{detail:{peerId:r,topic:x,direction:"inbound"}})}}handleIdontwant(r,g){let _=this.idontwantCounts.get(r)??0;if(_>=this.opts.idontwantMaxMessages)return;const x=_;let S=this.idontwants.get(r);S==null&&(S=new Map,this.idontwants.set(r,S));let E=0;e:for(const{messageIDs:T}of g)for(const R of T){if(_>=this.opts.idontwantMaxMessages)break e;_++;const A=this.msgIdToStrFn(R);S.set(A,this.heartbeatTicks),this.mcache.msgs.has(A)||E++}this.idontwantCounts.set(r,_);const C=_-x;this.metrics?.onIdontwantRcv(C,E)}addBackoff(r,g){this.doAddBackoff(r,g,this.opts.pruneBackoff)}doAddBackoff(r,g,_){let x=this.backoff.get(g);x==null&&(x=new Map,this.backoff.set(g,x));const S=Date.now()+_;(x.get(r)??0)<S&&x.set(r,S)}applyIwantPenalties(){this.gossipTracer.getBrokenPromises().forEach((r,g)=>{this.log("peer %s didn't follow up in %d IWANT requests; adding penalty",g,r),this.score.addPenalty(g,r,ScorePenalty.BrokenPromise)})}clearBackoff(){if(this.heartbeatTicks%GossipsubPruneBackoffTicks!==0)return;const r=Date.now();this.backoff.forEach((g,_)=>{g.forEach((x,S)=>{x+BACKOFF_SLACK*this.opts.heartbeatInterval<r&&g.delete(S)}),g.size===0&&this.backoff.delete(_)})}async directConnect(){const r=[];this.direct.forEach(g=>{this.streamsOutbound.has(g)||r.push(g)}),await Promise.all(r.map(async g=>this.connect(g)))}async pxConnect(r){r.length>this.opts.prunePeers&&(shuffle(r),r=r.slice(0,this.opts.prunePeers));const g=[];await Promise.all(r.map(async _=>{if(_.peerID==null)return;const x=peerIdFromMultihash(decode$h(_.peerID)),S=x.toString();if(!this.peers.has(S)){if(_.signedPeerRecord==null){g.push(S);return}try{if(!await this.components.peerStore.consumePeerRecord(_.signedPeerRecord,x)){this.log("bogus peer record obtained through px: could not add peer record to address book");return}g.push(S)}catch{this.log("bogus peer record obtained through px: invalid signature or not a peer record")}}})),g.length!==0&&await Promise.all(g.map(async _=>this.connect(_)))}async connect(r){this.log("Initiating connection with %s",r);const g=peerIdFromString$1(r),_=await this.components.connectionManager.openConnection(g);for(const x of this.multicodecs)for(const S of this.components.registrar.getTopologies(x))S.onConnect?.(g,_)}subscribe(r){if(this.status.code!==GossipStatusCode.started)throw new Error("Pubsub has not started");if(!this.subscriptions.has(r)){this.subscriptions.add(r);for(const g of this.peers.keys())this.sendSubscriptions(g,[r],!0)}this.join(r)}unsubscribe(r){if(this.status.code!==GossipStatusCode.started)throw new Error("Pubsub is not started");const g=this.subscriptions.delete(r);if(this.log("unsubscribe from %s - am subscribed %s",r,g),g)for(const _ of this.peers.keys())this.sendSubscriptions(_,[r],!1);this.leave(r)}join(r){if(this.status.code!==GossipStatusCode.started)throw new Error("Gossipsub has not started");if(this.mesh.has(r))return;this.log("JOIN %s",r),this.metrics?.onJoin(r);const g=new Set,_=this.backoff.get(r),x=this.fanout.get(r);if(x!=null&&(this.fanout.delete(r),this.fanoutLastpub.delete(r),x.forEach(S=>{!this.direct.has(S)&&this.score.score(S)>=0&&_?.has(S)!==!0&&g.add(S)}),this.metrics?.onAddToMesh(r,InclusionReason.Fanout,g.size)),g.size<this.opts.D){const S=g.size;this.getRandomGossipPeers(r,this.opts.D,C=>!g.has(C)&&!this.direct.has(C)&&this.score.score(C)>=0&&_?.has(C)!==!0).forEach(C=>{g.add(C)}),this.metrics?.onAddToMesh(r,InclusionReason.Random,g.size-S)}this.mesh.set(r,g),g.forEach(S=>{this.log("JOIN: Add mesh link to %s in %s",S,r),this.sendGraft(S,r)})}leave(r){if(this.status.code!==GossipStatusCode.started)throw new Error("Gossipsub has not started");this.log("LEAVE %s",r),this.metrics?.onLeave(r);const g=this.mesh.get(r);g!=null&&(Promise.all(Array.from(g).map(async _=>{this.log("LEAVE: Remove mesh link to %s in %s",_,r),await this.sendPrune(_,r)})).catch(_=>{this.log("Error sending prunes to mesh peers",_)}),this.mesh.delete(r))}selectPeersToForward(r,g,_){const x=new Set,S=this.topics.get(r);S!=null&&(this.direct.forEach(C=>{S.has(C)&&g!==C&&!(_?.has(C)??!1)&&x.add(C)}),this.floodsubPeers.forEach(C=>{S.has(C)&&g!==C&&!(_?.has(C)??!1)&&this.score.score(C)>=this.opts.scoreThresholds.publishThreshold&&x.add(C)}));const E=this.mesh.get(r);return E!=null&&E.size>0&&E.forEach(C=>{g!==C&&!(_?.has(C)??!1)&&x.add(C)}),x}selectPeersToPublish(r){const g=new Set,_={direct:0,floodsub:0,mesh:0,fanout:0},x=this.topics.get(r);if(x!=null)if(this.opts.floodPublish)x.forEach(S=>{this.direct.has(S)?(g.add(S),_.direct++):this.score.score(S)>=this.opts.scoreThresholds.publishThreshold&&(g.add(S),_.floodsub++)});else{this.direct.forEach(E=>{x.has(E)&&(g.add(E),_.direct++)}),this.floodsubPeers.forEach(E=>{x.has(E)&&this.score.score(E)>=this.opts.scoreThresholds.publishThreshold&&(g.add(E),_.floodsub++)});const S=this.mesh.get(r);if(S!=null&&S.size>0)S.forEach(E=>{g.add(E),_.mesh++}),S.size<this.opts.D&&this.getRandomGossipPeers(r,this.opts.D-S.size,C=>!S.has(C)&&!this.direct.has(C)&&!this.floodsubPeers.has(C)&&this.score.score(C)>=this.opts.scoreThresholds.publishThreshold).forEach(C=>{g.add(C),_.mesh++});else{const E=this.fanout.get(r);if(E!=null&&E.size>0)E.forEach(C=>{g.add(C),_.fanout++});else{const C=this.getRandomGossipPeers(r,this.opts.D,T=>this.score.score(T)>=this.opts.scoreThresholds.publishThreshold);C.size>0&&(this.fanout.set(r,C),C.forEach(T=>{g.add(T),_.fanout++}))}this.fanoutLastpub.set(r,Date.now())}}return{tosend:g,tosendCount:_}}forwardMessage(r,g,_,x){_!=null&&this.score.deliverMessage(_,r,g.topic);const S=this.selectPeersToForward(g.topic,_,x);S.forEach(E=>{this.sendRpc(E,createGossipRpc([g]))}),this.metrics?.onForwardMsg(g.topic,S.size)}async publish(r,g,_){const x=Date.now(),S=this.dataTransform!=null?this.dataTransform.outboundTransform(r,g):g;if(this.publishConfig==null)throw Error("PublishError.Uninitialized");const{raw:E,msg:C}=await buildRawMessage(this.publishConfig,r,g,S),T=await this.msgIdFn(C),R=this.msgIdToStrFn(T),A=_?.ignoreDuplicatePublishError??this.opts.ignoreDuplicatePublishError;if(this.seenCache.has(R)){if(A)return this.metrics?.onPublishDuplicateMsg(r),{recipients:[]};throw Error("PublishError.Duplicate")}const{tosend:I,tosendCount:B}=this.selectPeersToPublish(r),D=this.opts.emitSelf&&this.subscriptions.has(r),N=_?.allowPublishToZeroTopicPeers??this.opts.allowPublishToZeroTopicPeers;if(I.size===0&&!N&&!D)throw Error("PublishError.NoPeersSubscribedToTopic");this.seenCache.put(R),this.mcache.put({msgId:T,msgIdStr:R},E,!0),this.publishedMessageIds.put(R);const M=_?.batchPublish??this.opts.batchPublish,O=createGossipRpc([E]);if(M)this.sendRpcInBatch(I,O);else for(const F of I)this.sendRpc(F,O)||I.delete(F);const L=Date.now()-x;return this.metrics?.onPublishMsg(r,B,I.size,E.data!=null?E.data.length:0,L),D&&(I.add(this.components.peerId.toString()),super.dispatchEvent(new CustomEvent("gossipsub:message",{detail:{propagationSource:this.components.peerId,msgId:R,msg:C}})),super.dispatchEvent(new CustomEvent("message",{detail:C}))),{recipients:Array.from(I.values()).map(F=>peerIdFromString$1(F))}}sendRpcInBatch(r,g){const _=RPC.encode(g),x=encode$2.single(_);for(const S of r){const E=this.streamsOutbound.get(S);if(E==null){this.log(`Cannot send RPC to ${S} as there is no open stream to it available`),r.delete(S);continue}try{E.pushPrefixed(x)}catch(C){r.delete(S),this.log.error(`Cannot send rpc to ${S}`,C)}this.metrics?.onRpcSent(g,_.length)}}reportMessageValidationResult(r,g,_){let x;if(_===TopicValidatorResult.Accept){if(x=this.mcache.validate(r),x!=null){const{message:E,originatingPeers:C}=x;this.score.deliverMessage(g,r,E.topic),this.forwardMessage(r,x.message,g,C)}}else if(x=this.mcache.remove(r),x!=null){const E=rejectReasonFromAcceptance(_),{message:C,originatingPeers:T}=x;this.score.rejectMessage(g,r,C.topic,E);for(const R of T)this.score.rejectMessage(R,r,C.topic,E)}const S=this.score.messageFirstSeenTimestampMs(r);this.metrics?.onReportValidation(x,_,S)}sendGraft(r,g){const x=createGossipRpc([],{graft:[{topicID:g}]});this.sendRpc(r,x)}async sendPrune(r,g){const x=[await this.makePrune(r,g,this.opts.doPX,!0)],S=createGossipRpc([],{prune:x});this.sendRpc(r,S)}sendIDontWants(r,g,_){const x=this.mesh.get(g);if(x==null)return;const S=new Set(x);S.delete(_);for(const C of S)this.streamsOutbound.get(C)?.protocol!==GossipsubIDv12&&S.delete(C);const E=createGossipRpc([],{idontwant:[{messageIDs:[r]}]});this.sendRpcInBatch(S,E)}sendRpc(r,g){const _=this.streamsOutbound.get(r);if(_==null)return this.log(`Cannot send RPC to ${r} as there is no open stream to it available`),!1;const x=this.control.get(r);x!=null&&(this.piggybackControl(r,g,x),this.control.delete(r));const S=this.gossip.get(r);S!=null&&(this.piggybackGossip(r,g,S),this.gossip.delete(r));const E=RPC.encode(g);try{_.push(E)}catch(C){return this.log.error(`Cannot send rpc to ${r}`,C),x!=null&&this.control.set(r,x),S!=null&&this.gossip.set(r,S),!1}if(this.metrics?.onRpcSent(g,E.length),g.control?.graft!=null)for(const C of g.control?.graft)C.topicID!=null&&this.safeDispatchEvent("gossipsub:graft",{detail:{peerId:r,topic:C.topicID,direction:"outbound"}});if(g.control?.prune!=null)for(const C of g.control?.prune)C.topicID!=null&&this.safeDispatchEvent("gossipsub:prune",{detail:{peerId:r,topic:C.topicID,direction:"outbound"}});return!0}piggybackControl(r,g,_){const x=ensureControl(g);for(const S of _.graft)S.topicID!=null&&(this.mesh.get(S.topicID)?.has(r)??!1)&&x.control.graft.push(S);for(const S of _.prune)S.topicID!=null&&!(this.mesh.get(S.topicID)?.has(r)??!1)&&x.control.prune.push(S)}piggybackGossip(r,g,_){const x=ensureControl(g);x.control.ihave=_}async sendGraftPrune(r,g,_){const x=this.opts.doPX,S=!1;for(const[E,C]of r){const T=C.map(I=>({topicID:I}));let R=[];const A=g.get(E);A!=null&&(R=await Promise.all(A.map(async I=>this.makePrune(E,I,x&&!(_.get(E)??!1),S))),g.delete(E)),this.sendRpc(E,createGossipRpc([],{graft:T,prune:R}))}for(const[E,C]of g){const T=await Promise.all(C.map(async R=>this.makePrune(E,R,x&&!(_.get(E)??!1),S)));this.sendRpc(E,createGossipRpc([],{prune:T}))}}emitGossip(r){const g=this.mcache.getGossipIDs(new Set(r.keys()));for(const[_,x]of r)this.doEmitGossip(_,x,g.get(_)??[])}doEmitGossip(r,g,_){if(_.length===0||(shuffle(_),_.length>GossipsubMaxIHaveLength&&this.log("too many messages for gossip; will truncate IHAVE list (%d messages)",_.length),g.size===0))return;let x=this.opts.Dlazy;const E=this.opts.gossipFactor*g.size;let C=g;E>x&&(x=E),x>C.size?x=C.size:C=shuffle(Array.from(C)).slice(0,x),C.forEach(T=>{let R=_;_.length>GossipsubMaxIHaveLength&&(R=shuffle(R.slice()).slice(0,GossipsubMaxIHaveLength)),this.pushGossip(T,{topicID:r,messageIDs:R})})}flush(){for(const[r,g]of this.gossip.entries())this.gossip.delete(r),this.sendRpc(r,createGossipRpc([],{ihave:g}));for(const[r,g]of this.control.entries()){this.control.delete(r);const _=createGossipRpc([],{graft:g.graft,prune:g.prune});this.sendRpc(r,_)}}pushGossip(r,g){this.log("Add gossip to %s",r);const _=this.gossip.get(r)??[];this.gossip.set(r,_.concat(g))}async makePrune(r,g,_,x){if(this.score.prune(r,g),this.streamsOutbound.get(r)?.protocol===GossipsubIDv10)return{topicID:g,peers:[]};const S=x?this.opts.unsubcribeBackoff:this.opts.pruneBackoff,E=S/1e3;if(this.doAddBackoff(r,g,S),!_)return{topicID:g,peers:[],backoff:E};const C=this.getRandomGossipPeers(g,this.opts.prunePeers,R=>R!==r&&this.score.score(R)>=0),T=await Promise.all(Array.from(C).map(async R=>{const A=peerIdFromString$1(R);let I;try{I=await this.components.peerStore.get(A)}catch(B){if(B.name!=="NotFoundError")throw B}return{peerID:A.toMultihash().bytes,signedPeerRecord:I?.peerRecordEnvelope}}));return{topicID:g,peers:T,backoff:E}}runHeartbeat=()=>{const r=this.metrics?.heartbeatDuration.startTimer();this.heartbeat().catch(g=>{this.log("Error running heartbeat",g)}).finally(()=>{if(r?.(),this.status.code===GossipStatusCode.started){clearTimeout(this.status.heartbeatTimeout);let g=this.opts.heartbeatInterval-(Date.now()-this.status.hearbeatStartMs)%this.opts.heartbeatInterval;g<this.opts.heartbeatInterval*.25&&(g+=this.opts.heartbeatInterval,this.metrics?.heartbeatSkipped.inc()),this.status.heartbeatTimeout=setTimeout(this.runHeartbeat,g)}})};async heartbeat(){const{D:r,Dlo:g,Dhi:_,Dscore:x,Dout:S,fanoutTTL:E}=this.opts;this.heartbeatTicks++;const C=new Map,T=N=>{let M=C.get(N);return M===void 0&&(M=this.score.score(N),C.set(N,M)),M},R=new Map,A=new Map,I=new Map;this.clearBackoff(),this.peerhave.clear(),this.metrics?.cacheSize.set({cache:"iasked"},this.iasked.size),this.iasked.clear(),this.applyIwantPenalties(),this.idontwantCounts.clear();for(const N of this.idontwants.values())for(const[M,O]of N)this.heartbeatTicks-O>=this.opts.mcacheLength&&N.delete(M);this.heartbeatTicks%this.opts.directConnectTicks===0&&await this.directConnect(),this.fastMsgIdCache?.prune(),this.seenCache.prune(),this.gossipTracer.prune(),this.publishedMessageIds.prune();const B=new Map;this.mesh.forEach((N,M)=>{const O=this.topics.get(M),L=new Set,F=new Set;if(B.set(M,F),O!=null){const z=shuffle(Array.from(O)),W=this.backoff.get(M);for(const X of z){const ie=this.streamsOutbound.get(X);if(ie!=null&&this.multicodecs.includes(ie.protocol)&&!N.has(X)&&!this.direct.has(X)){const fe=T(X);W?.has(X)!==!0&&fe>=0&&L.add(X),fe>=this.opts.scoreThresholds.gossipThreshold&&F.add(X)}}}const U=(z,W)=>{this.log("HEARTBEAT: Remove mesh link to %s in %s",z,M),this.addBackoff(z,M),N.delete(z),T(z)>=this.opts.scoreThresholds.gossipThreshold&&F.add(z),this.metrics?.onRemoveFromMesh(M,W,1);const X=A.get(z);X==null?A.set(z,[M]):X.push(M)},j=(z,W)=>{this.log("HEARTBEAT: Add mesh link to %s in %s",z,M),this.score.graft(z,M),N.add(z),F.delete(z),this.metrics?.onAddToMesh(M,W,1);const X=R.get(z);X==null?R.set(z,[M]):X.push(M)};if(N.forEach(z=>{const W=T(z);W<0&&(this.log("HEARTBEAT: Prune peer %s with negative score: score=%d, topic=%s",z,W,M),U(z,ChurnReason.BadScore),I.set(z,!0))}),N.size<g){const z=r-N.size;removeFirstNItemsFromSet(L,z).forEach(X=>{j(X,InclusionReason.NotEnough)})}if(N.size>_){let z=Array.from(N);z.sort((X,ie)=>T(ie)-T(X)),z=z.slice(0,x).concat(shuffle(z.slice(x)));let W=0;if(z.slice(0,r).forEach(X=>{(this.outbound.get(X)??!1)&&W++}),W<S){const X=fe=>{const xe=z[fe];for(let we=fe;we>0;we--)z[we]=z[we-1];z[0]=xe};if(W>0){let fe=W;for(let xe=1;xe<r&&fe>0;xe++)(this.outbound.get(z[xe])??!1)&&(X(xe),fe--)}let ie=r-W;for(let fe=r;fe<z.length&&ie>0;fe++)(this.outbound.get(z[fe])??!1)&&(X(fe),ie--)}z.slice(r).forEach(X=>{U(X,ChurnReason.Excess)})}if(N.size>=g){let z=0;if(N.forEach(W=>{(this.outbound.get(W)??!1)&&z++}),z<S){const W=S-z;removeItemsFromSet(L,W,ie=>this.outbound.get(ie)===!0).forEach(ie=>{j(ie,InclusionReason.Outbound)})}}if(this.heartbeatTicks%this.opts.opportunisticGraftTicks===0&&N.size>1){const z=Array.from(N).sort((ie,fe)=>T(ie)-T(fe)),W=Math.floor(N.size/2),X=T(z[W]);if(X<this.opts.scoreThresholds.opportunisticGraftThreshold){const ie=this.opts.opportunisticGraftPeers,fe=removeItemsFromSet(L,ie,xe=>T(xe)>X);for(const xe of fe)this.log("HEARTBEAT: Opportunistically graft peer %s on topic %s",xe,M),j(xe,InclusionReason.Opportunistic)}}});const D=Date.now();this.fanoutLastpub.forEach((N,M)=>{N+E<D&&(this.fanout.delete(M),this.fanoutLastpub.delete(M))}),this.fanout.forEach((N,M)=>{const O=this.topics.get(M);N.forEach(j=>{(!(O?.has(j)??!1)||T(j)<this.opts.scoreThresholds.publishThreshold)&&N.delete(j)});const L=this.topics.get(M),F=[],U=new Set;if(B.set(M,U),L!=null){const j=shuffle(Array.from(L));for(const z of j){const W=this.streamsOutbound.get(z);if(W!=null&&this.multicodecs.includes(W.protocol)&&!N.has(z)&&!this.direct.has(z)){const X=T(z);X>=this.opts.scoreThresholds.publishThreshold&&F.push(z),X>=this.opts.scoreThresholds.gossipThreshold&&U.add(z)}}}if(N.size<r){const j=r-N.size;F.slice(0,j).forEach(z=>{N.add(z),U?.delete(z)})}}),this.emitGossip(B),await this.sendGraftPrune(R,A,I),this.flush(),this.mcache.shift(),this.dispatchEvent(new CustomEvent("gossipsub:heartbeat"))}getRandomGossipPeers(r,g,_=()=>!0){const x=this.topics.get(r);if(x==null)return new Set;let S=[];return x.forEach(E=>{const C=this.streamsOutbound.get(E);C!=null&&this.multicodecs.includes(C.protocol)&&_(E)&&S.push(E)}),S=shuffle(S),g>0&&S.length>g&&(S=S.slice(0,g)),new Set(S)}onScrapeMetrics(r){r.mcacheSize.set(this.mcache.size),r.mcacheNotValidatedCount.set(this.mcache.notValidatedCount),r.cacheSize.set({cache:"direct"},this.direct.size),r.cacheSize.set({cache:"seenCache"},this.seenCache.size),r.cacheSize.set({cache:"fastMsgIdCache"},this.fastMsgIdCache?.size??0),r.cacheSize.set({cache:"publishedMessageIds"},this.publishedMessageIds.size),r.cacheSize.set({cache:"mcache"},this.mcache.size),r.cacheSize.set({cache:"score"},this.score.size),r.cacheSize.set({cache:"gossipTracer.promises"},this.gossipTracer.size),r.cacheSize.set({cache:"gossipTracer.requests"},this.gossipTracer.requestMsByMsgSize),r.cacheSize.set({cache:"topics"},this.topics.size),r.cacheSize.set({cache:"subscriptions"},this.subscriptions.size),r.cacheSize.set({cache:"mesh"},this.mesh.size),r.cacheSize.set({cache:"fanout"},this.fanout.size),r.cacheSize.set({cache:"peers"},this.peers.size),r.cacheSize.set({cache:"streamsOutbound"},this.streamsOutbound.size),r.cacheSize.set({cache:"streamsInbound"},this.streamsInbound.size),r.cacheSize.set({cache:"acceptFromWhitelist"},this.acceptFromWhitelist.size),r.cacheSize.set({cache:"gossip"},this.gossip.size),r.cacheSize.set({cache:"control"},this.control.size),r.cacheSize.set({cache:"peerhave"},this.peerhave.size),r.cacheSize.set({cache:"outbound"},this.outbound.size);let g=0;const _=Date.now();r.connectedPeersBackoffSec.reset();for(const T of this.backoff.values()){g+=T.size;for(const[R,A]of T.entries())this.peers.has(R)&&r.connectedPeersBackoffSec.observe(Math.max(0,A-_)/1e3)}r.cacheSize.set({cache:"backoff"},g);let x=0;for(const T of this.idontwants.values())x+=T.size;r.cacheSize.set({cache:"idontwants"},x);for(const[T,R]of this.topics)r.topicPeersCount.set({topicStr:T},R.size);for(const[T,R]of this.mesh)r.meshPeerCounts.set({topicStr:T},R.size);const S=[],E=new Map;r.behaviourPenalty.reset();for(const T of this.peers.keys()){const R=this.score.score(T);S.push(R),E.set(T,R),r.behaviourPenalty.observe(this.score.peerStats.get(T)?.behaviourPenalty??0)}r.registerScores(S,this.opts.scoreThresholds),r.registerScorePerMesh(this.mesh,E);const C=computeAllPeersScoreWeights(this.peers.keys(),this.score.peerStats,this.score.params,this.score.peerIPs,r.topicStrToLabel);r.registerScoreWeights(C)}tagMeshPeer=r=>{const{peerId:g,topic:_}=r.detail;this.components.peerStore.merge(peerIdFromString$1(g),{tags:{[_]:{value:100}}}).catch(x=>{this.log.error("Error tagging peer %s with topic %s",g,_,x)})};untagMeshPeer=r=>{const{peerId:g,topic:_}=r.detail;this.components.peerStore.merge(peerIdFromString$1(g),{tags:{[_]:void 0}}).catch(x=>{this.log.error("Error untagging peer %s with topic %s",g,_,x)})}}function gossipsub(n={}){return r=>new GossipSub(r,n)}function createListener(n){throw new Error("Not implemented")}class WebTransportStream extends AbstractStream{writer;reader;constructor(r){super(r),this.writer=r.bidiStream.writable.getWriter(),this.reader=r.bidiStream.readable.getReader(),Promise.resolve().then(async()=>{for(;;){const g=await this.reader.read();if(g.done){r.log("remote closed write");return}g.value!=null&&this.sourcePush(new Uint8ArrayList(g.value))}}).catch(g=>{r.log.error("error reading from stream",g),this.abort(g)}).finally(()=>{this.remoteCloseWrite()}),this.writer.closed.then(()=>{r.log("writer closed")}).catch(g=>{r.log("writer close promise rejected",g)}).finally(()=>{this.remoteCloseRead()})}sendNewStream(r){}async sendData(r,g){for await(const _ of r)this.log("sendData waiting for writer to be ready"),await raceSignal(this.writer.ready,g?.signal),this.writer.write(_).catch(x=>{this.log.error("error sending stream data",x)})}async sendReset(r){this.log("sendReset aborting writer"),await raceSignal(this.writer.abort(),r?.signal),this.log("sendReset aborted writer")}async sendCloseWrite(r){this.log("sendCloseWrite closing writer"),await raceSignal(this.writer.close(),r?.signal),this.log("sendCloseWrite closed writer")}async sendCloseRead(r){this.log("sendCloseRead cancelling reader"),await raceSignal(this.reader.cancel(),r?.signal),this.log("sendCloseRead cancelled reader")}}async function webtransportBiDiStreamToStream(n,r,g,_,x,S){const E=S.forComponent(`libp2p:webtransport:stream:${g}:${r}`),C=new WebTransportStream({bidiStream:n,id:r,direction:g,log:E,onEnd:()=>{const T=_.findIndex(R=>R===C);T!==-1&&_.splice(T,1),x?.(C)}});return C}function inertDuplex(){return{source:{[Symbol.asyncIterator](){return{async next(){return new Promise(()=>{})}}}},sink:async n=>new Promise(()=>{})}}function webtransportMuxer(n,r,g,_){let x=0;const S=g.forComponent("libp2p:webtransport:muxer");return{protocol:"webtransport",createStreamMuxer:E=>{typeof E=="function"&&(E={onIncomingStream:E});const C=[];Promise.resolve().then(async()=>{//! TODO unclear how to add backpressure here?
for(;;){const{done:R,value:A}=await r.read();if(R)break;if(C.length>=_.maxInboundStreams)S(`too many inbound streams open - ${C.length}/${_.maxInboundStreams}, closing new incoming stream`),A.writable.close().catch(I=>{S.error(`failed to close inbound stream that crossed our maxInboundStream limit: ${I.message}`)}),A.readable.cancel().catch(I=>{S.error(`failed to close inbound stream that crossed our maxInboundStream limit: ${I.message}`)});else{const I=await webtransportBiDiStreamToStream(A,String(x++),"inbound",C,E?.onStreamEnd,g);C.push(I),E?.onIncomingStream?.(I)}}}).catch(R=>{S.error("could not create a new stream",R)});const T={protocol:"webtransport",streams:C,newStream:async R=>{S("new outgoing stream",R);const A=await n.createBidirectionalStream(),I=await webtransportBiDiStreamToStream(A,String(x++),E?.direction??"outbound",C,E?.onStreamEnd,g);return C.push(I),I},close:async()=>{S("closing webtransport muxer gracefully");try{n.close()}catch(R){T.abort(R)}},abort:R=>{S("closing webtransport muxer with err:",R);try{n.close()}catch(A){S.error("webtransport session threw error during close",A)}},...inertDuplex()};return T}}}function isSubset(n,r){return r.filter(_=>!!n.find(x=>equals$1(_,x))).length===r.length}const multibaseDecoder=Object.values(bases).map(n=>n.decoder).reduce((n,r)=>n.or(r));function decodeCerthashStr(n){return decode$h(multibaseDecoder.decode(n))}function parseMultiaddr(n){if(!WebTransport$2.matches(n))throw new InvalidMultiaddrError("Invalid multiaddr, was not a WebTransport address");const r=n.stringTuples(),g=r.filter(([E,C])=>E===getProtocol("certhash").code).map(([E,C])=>decodeCerthashStr(C??"")),_=r.filter(([E,C])=>E===getProtocol("p2p").code).map(([E,C])=>peerIdFromString$1(C??""))[0],x=n.toOptions();let S=x.host;return x.family===6&&S?.includes(":")&&(S=`[${S}]`),{url:`https://${S}:${x.port}`,certhashes:g,remotePeer:_}}const WebTransport=globalThis.WebTransport;class WebTransportTransport{log;components;config;metrics;constructor(r,g={}){this.log=r.logger.forComponent("libp2p:webtransport"),this.components=r,this.config={...g,maxInboundStreams:g.maxInboundStreams??1e3,certificates:g.certificates??[]},r.metrics!=null&&(this.metrics={dialerEvents:r.metrics.registerCounterGroup("libp2p_webtransport_dialer_events_total",{label:"event",help:"Total count of WebTransport dialer events by type"})})}[Symbol.toStringTag]="@libp2p/webtransport";[transportSymbol]=!0;[serviceCapabilities]=["@libp2p/transport"];async dial(r,g){g?.signal?.throwIfAborted(),this.log("dialing %s",r),g=g??{};const{url:_,certhashes:x,remotePeer:S}=parseMultiaddr(r);let E,C,T=()=>{},R=!1,A=!1,I=!1;try{this.metrics?.dialerEvents.increment({pending:!0});const B=new WebTransport(`${_}/.well-known/libp2p-webtransport?type=noise`,{serverCertificateHashes:x.map(D=>({algorithm:"sha-256",value:D.digest}))});if(T=D=>{if(!R)try{this.metrics?.dialerEvents.increment({[D]:!0}),B.close()}catch(N){this.log.error("error closing wt session",N)}finally{C!=null&&(C.timeline.close=Date.now()),R=!0}},E=()=>{T(A?"noise_timeout":"ready_timeout")},g.signal?.addEventListener("abort",E,{once:!0}),this.log("wait for session to be ready"),g.onProgress?.(new CustomProgressEvent("webtransport:wait-for-session")),await Promise.race([B.closed,B.ready]),this.log("session became ready"),A=!0,this.metrics?.dialerEvents.increment({ready:!0}),B.closed.catch(D=>{this.log.error("error on remote wt session close",D)}).finally(()=>{T("remote_close")}),I=await raceSignal(this.authenticateWebTransport({wt:B,remotePeer:S,certhashes:x,...g}),g.signal),!I)throw new InvalidCryptoExchangeError$1("Failed to authenticate webtransport");return this.metrics?.dialerEvents.increment({open:!0}),C={close:async()=>{this.log("closing webtransport"),T("close")},abort:D=>{this.log("aborting webtransport due to passed err",D),T("abort")},remoteAddr:r,timeline:{open:Date.now()},log:this.components.logger.forComponent("libp2p:webtransport:maconn"),...inertDuplex()},await g.upgrader.upgradeOutbound(C,{skipEncryption:!0,muxerFactory:webtransportMuxer(B,B.incomingBidirectionalStreams.getReader(),this.components.logger,this.config),skipProtection:!0,onProgress:g.onProgress})}catch(B){throw this.log.error("caught wt session err",B),T(I?"upgrade_error":A?"noise_error":"ready_error"),B}finally{E!=null&&g.signal?.removeEventListener("abort",E)}}async authenticateWebTransport({wt:r,remotePeer:g,certhashes:_,onProgress:x,signal:S}){S?.throwIfAborted(),x?.(new CustomProgressEvent("webtransport:open-authentication-stream"));const E=await r.createBidirectionalStream(),C=E.writable.getWriter(),T=E.readable.getReader(),R={source:async function*(){for(;;){const B=await T.read();if(B.value!=null&&(yield B.value),B.done)break}}(),sink:async B=>{for await(const D of B){await raceSignal(C.ready,S);const N=D instanceof Uint8Array?D:D.subarray();C.write(N).catch(M=>{this.log.error("could not write chunk during authentication of WebTransport stream",M)})}}},A=noise()(this.components);x?.(new CustomProgressEvent("webtransport:secure-outbound-connection"));const{remoteExtensions:I}=await A.secureOutbound(R,{signal:S,remotePeer:g});if(x?.(new CustomProgressEvent("webtransport:close-authentication-stream")),C.close().catch(B=>{this.log.error(`Failed to close authentication stream writer: ${B.message}`)}),T.cancel().catch(B=>{this.log.error(`Failed to close authentication stream reader: ${B.message}`)}),!isSubset(I?.webtransportCerthashes??[],_.map(B=>B.bytes)))throw new InvalidParametersError("Our certhashes are not a subset of the remote's reported certhashes");return!0}createListener(r){return createListener(this.components,{...r,certificates:this.config.certificates,maxInboundStreams:this.config.maxInboundStreams})}listenFilter(){return[]}dialFilter(r){return globalThis.WebTransport==null?[]:r.filter(g=>{if(!WebTransport$2.exactMatch(g))return!1;const{url:_,certhashes:x}=parseMultiaddr(g);return _!=null&&x.length>0})}}function webTransport(n={}){return r=>new WebTransportTransport(r,n)}var Peer;(function(n){let r;n.codec=()=>(r==null&&(r=message((g,_,x={})=>{if(x.lengthDelimited!==!1&&_.fork(),g.publicKey!=null&&g.publicKey.byteLength>0&&(_.uint32(10),_.bytes(g.publicKey)),g.addrs!=null)for(const S of g.addrs)_.uint32(18),_.bytes(S);x.lengthDelimited!==!1&&_.ldelim()},(g,_,x={})=>{const S={publicKey:alloc$1(0),addrs:[]},E=_==null?g.len:g.pos+_;for(;g.pos<E;){const C=g.uint32();switch(C>>>3){case 1:{S.publicKey=g.bytes();break}case 2:{if(x.limits?.addrs!=null&&S.addrs.length===x.limits.addrs)throw new MaxLengthError('Decode error - map field "addrs" had too many elements');S.addrs.push(g.bytes());break}default:{g.skipType(C&7);break}}}return S})),r),n.encode=g=>encodeMessage(g,n.codec()),n.decode=(g,_)=>decodeMessage(g,n.codec(),_)})(Peer||(Peer={}));const TOPIC="_peer-discovery._p2p._pubsub";class PubSubPeerDiscovery extends TypedEventEmitter{[peerDiscoverySymbol]=!0;[Symbol.toStringTag]="@libp2p/pubsub-peer-discovery";interval;listenOnly;topics;intervalId;components;log;constructor(r,g={}){super();const{interval:_,topics:x,listenOnly:S}=g;this.components=r,this.interval=_??1e4,this.listenOnly=S??!1,this.log=r.logger.forComponent("libp2p:discovery:pubsub"),Array.isArray(x)&&x.length>0?this.topics=x:this.topics=[TOPIC],this._onMessage=this._onMessage.bind(this)}isStarted(){return this.intervalId!=null}start(){}afterStart(){if(this.intervalId!=null)return;const r=this.components.pubsub;if(r==null)throw new Error("PubSub not configured");for(const g of this.topics)r.subscribe(g),r.addEventListener("message",this._onMessage);this.listenOnly||(this._broadcast(),this.intervalId=setInterval(()=>{this._broadcast()},this.interval))}beforeStop(){const r=this.components.pubsub;if(r==null)throw new Error("PubSub not configured");for(const g of this.topics)r.unsubscribe(g),r.removeEventListener("message",this._onMessage)}stop(){this.intervalId!=null&&(clearInterval(this.intervalId),this.intervalId=void 0)}_broadcast(){const r=this.components.peerId;if(r.publicKey==null)throw new Error("PeerId was missing public key");const g={publicKey:publicKeyToProtobuf(r.publicKey),addrs:this.components.addressManager.getAddresses().map(S=>S.bytes)},_=Peer.encode(g),x=this.components.pubsub;if(x==null)throw new Error("PubSub not configured");for(const S of this.topics){if(x.getSubscribers(S).length===0){this.log("skipping broadcasting our peer data on topic %s because there are no peers present",S);continue}this.log("broadcasting our peer data on topic %s",S),x.publish(S,_)}}_onMessage(r){if(!this.isStarted())return;const g=r.detail;if(this.topics.includes(g.topic))try{const _=Peer.decode(g.data),x=publicKeyFromProtobuf(_.publicKey),S=peerIdFromPublicKey(x);if(S.equals(this.components.peerId))return;this.log("discovered peer %p on %s",S,g.topic),this.safeDispatchEvent("peer",{detail:{id:S,multiaddrs:_.addrs.map(E=>multiaddr(E))}})}catch(_){this.log.error("error handling incoming message",_)}}}function pubsubPeerDiscovery(n={}){return r=>new PubSubPeerDiscovery(r,n)}const ADRESSES_NŒUDS_RELAI_WS=["/dns4/relai-ws-libp2p.xn--rseau-constellation-bzb.ca/tcp/443/wss/p2p/12D3KooWJDZ7mbpWWGbM9YfjRBqWfraZsvBYFNfZZSvfvxkYoNF3","/dns4/relai-ws-libp2p.xn--rseau-constellation-bzb.ca/tcp/80/ws/p2p/12D3KooWJDZ7mbpWWGbM9YfjRBqWfraZsvBYFNfZZSvfvxkYoNF3"],ADRESSES_NŒUDS_RELAI_RUST=["/ip4/164.90.222.145/udp/9090/webrtc-direct/certhash/uEiAJOkKT64u6jmXV5YxncCoER5WXSO2HYE23Xpap651xMw/p2p/12D3KooWJ7P1yeoxB5mq3TwQh8YgmVhankjtT4rsVGZPUyf617aR","/ip4/164.90.222.145/udp/9091/quic-v1/p2p/12D3KooWJ7P1yeoxB5mq3TwQh8YgmVhankjtT4rsVGZPUyf617aR","/ip4/164.90.222.145/tcp/9092/p2p/12D3KooWJ7P1yeoxB5mq3TwQh8YgmVhankjtT4rsVGZPUyf617aR"],ADRESSES_PUBLIQUES_LIBP2P=["/dnsaddr/bootstrap.libp2p.io/p2p/QmNnooDu7bfjPFoTZYxMNLWUQJyrVwtbZg5gBMjTezGAJN","/dnsaddr/bootstrap.libp2p.io/p2p/QmQCU2EcMqAqQPR2i9bChDtGNJchTbq5TbXJJ16u19uLTa","/dnsaddr/bootstrap.libp2p.io/p2p/QmbLHAnMoJPWSCR5Zhtx6BHJX9KiKNN6tpvbUcqanj75Nb","/dnsaddr/bootstrap.libp2p.io/p2p/QmcZf59bWwK5XFi76CZX8cbJ4BhTzzA3gU1ZjYZcYW3dwt"],ADRESSES_NŒUDS_INITIAUX=[...ADRESSES_PUBLIQUES_LIBP2P,...ADRESSES_NŒUDS_RELAI_RUST,...ADRESSES_NŒUDS_RELAI_WS],résoudreInfoAdresses=n=>{const r=[];for(const g of n){const _=multiaddr(g),x=_.getPeerId();if(!x)continue;(r.find(E=>E.id.toString()===x)||{id:peerIdFromString$1(x),addrs:[]}).addrs.push(_)}return r},obtOptionsLibp2pNavigateur=async()=>{const n=[webSockets({filter:all}),webRTC(),webRTCDirect(),circuitRelayTransport()];return detect()?.name!=="chrome"&&n.push(webTransport()),{addresses:{listen:["/webrtc","/webtransport","/p2p-circuit"]},transports:n,connectionEncrypters:[noise()],streamMuxers:[yamux()],connectionGater:{denyDialMultiaddr:()=>!1},connectionManager:{},peerDiscovery:[bootstrap({list:ADRESSES_NŒUDS_INITIAUX,timeout:0}),pubsubPeerDiscovery({interval:1e3,topics:["constellation._peer-discovery._p2p._pubsub"],listenOnly:!1})],services:{identify:identify(),autoNAT:autoNAT(),dcutr:dcutr(),pubsub:gossipsub({allowPublishToZeroTopicPeers:!0,runOnLimitedConnection:!0,canRelayMessage:!0,directPeers:résoudreInfoAdresses([...ADRESSES_NŒUDS_RELAI_WS,...ADRESSES_NŒUDS_RELAI_RUST]),scoreThresholds:{acceptPXThreshold:0}})}}},obtOptionsLibp2pNode=async()=>{const{tcp:n}=await __vitePreload(async()=>{const{tcp:g}=await import("@libp2p/tcp");return{tcp:g}},[],import.meta.url),{mdns:r}=await __vitePreload(async()=>{const{mdns:g}=await import("@libp2p/mdns");return{mdns:g}},[],import.meta.url);return{addresses:{listen:["/ip4/0.0.0.0/tcp/0/ws","/webrtc","/webtransport","/p2p-circuit","/webrtc-direct"]},transportManager:{faultTolerance:FaultTolerance.NO_FATAL},transports:[webSockets({filter:all}),webRTC(),webTransport(),webRTCDirect(),n(),circuitRelayTransport()],connectionEncrypters:[noise()],streamMuxers:[yamux()],connectionGater:{denyDialMultiaddr:()=>!1},connectionManager:{},peerDiscovery:[r(),bootstrap({list:ADRESSES_NŒUDS_INITIAUX,timeout:0}),pubsubPeerDiscovery({interval:1e4,topics:["constellation._peer-discovery._p2p._pubsub"],listenOnly:!1})],services:{identify:identify(),autoNAT:autoNAT(),dcutr:dcutr(),pubsub:gossipsub({allowPublishToZeroTopicPeers:!0,runOnLimitedConnection:!0,canRelayMessage:!0,directPeers:résoudreInfoAdresses([...ADRESSES_NŒUDS_RELAI_WS,...ADRESSES_NŒUDS_RELAI_RUST]),scoreThresholds:{acceptPXThreshold:0}})}}},obtOptionsLibp2pTravailleurWeb=async()=>({addresses:{listen:["/webrtc","/p2p-circuit"]},transports:[webSockets({filter:all}),webTransport(),circuitRelayTransport()],connectionEncrypters:[noise()],streamMuxers:[yamux()],connectionGater:{denyDialMultiaddr:()=>!1},peerDiscovery:[bootstrap({list:ADRESSES_NŒUDS_INITIAUX,timeout:0})],services:{identify:identify(),pubsub:gossipsub({allowPublishToZeroTopicPeers:!0})}}),obtOptionsLibp2pÉlectionPrincipal=async()=>{const{tcp:n}=await __vitePreload(async()=>{const{tcp:g}=await import("@libp2p/tcp");return{tcp:g}},[],import.meta.url),{mdns:r}=await __vitePreload(async()=>{const{mdns:g}=await import("@libp2p/mdns");return{mdns:g}},[],import.meta.url);return{addresses:{listen:["/ip4/0.0.0.0/tcp/0/ws","/webrtc","/webtransport","/p2p-circuit"]},transports:[webSockets({filter:all}),webRTC(),webTransport(),webRTCDirect(),n(),circuitRelayTransport()],connectionEncrypters:[noise()],streamMuxers:[yamux()],connectionGater:{denyDialMultiaddr:()=>!1},peerDiscovery:[r(),bootstrap({list:ADRESSES_NŒUDS_INITIAUX,timeout:0}),pubsubPeerDiscovery({interval:1e3,topics:["constellation._peer-discovery._p2p._pubsub"],listenOnly:!1})],services:{identify:identify(),autoNAT:autoNAT(),dcutr:dcutr(),pubsub:gossipsub({allowPublishToZeroTopicPeers:!0,runOnLimitedConnection:!0,canRelayMessage:!0})}}},obtConfigLibp2pPlateforme=async()=>{let n;return isBrowser$1||isElectronRenderer?n=await obtOptionsLibp2pNavigateur():isWebWorker?n=await obtOptionsLibp2pTravailleurWeb():isElectronMain?n=await obtOptionsLibp2pÉlectionPrincipal():isNode?n=await obtOptionsLibp2pNode():(console.warn("Plateforme non reconnue. On utilisera la configuration navigateur."),n=await obtOptionsLibp2pNavigateur()),n};async function initSFIP({dossier:n,configLibp2p:r={}}){const g=await obtConfigLibp2pPlateforme(),_=await createLibp2p$1(mergeOptions$9(g,r));_.addEventListener("peer:discovery",async R=>{try{await _.dial(R.detail.id)}catch{}});const x=`${n}/données`,S=`${n}/blocks`,E=isNode||isElectronMain?new(await __vitePreload(async()=>{const{FsBlockstore:R}=await import("blockstore-fs");return{FsBlockstore:R}},[],import.meta.url)).FsBlockstore(S):new IDBBlockstore(S),C=isNode||isElectronMain?new(await __vitePreload(async()=>{const{FsDatastore:R}=await import("datastore-fs");return{FsDatastore:R}},[],import.meta.url)).FsDatastore(x):new IDBDatastore(x);isNode||isElectronMain||(await E.open(),await C.open());const T={blockstore:E,datastore:C,libp2p:_,blockBrokers:[bitswap()]};return await createHelia({...T})}const index=Object.freeze(Object.defineProperty({__proto__:null,initSFIP,obtConfigLibp2pPlateforme,obtOptionsLibp2pNavigateur,obtOptionsLibp2pNode,obtOptionsLibp2pTravailleurWeb,obtOptionsLibp2pÉlectionPrincipal},Symbol.toStringTag,{value:"Module"})),schémaStructureBdProtocoles={type:"object",additionalProperties:{type:"array",items:{type:"string"}},required:[]};class Protocoles extends ComposanteClientDic{constructor({client:r}){super({client:r,clef:"protocoles",schémaBdPrincipale:schémaStructureBdProtocoles})}async établirProtocoles({protocoles:r,idDispositif:g}){g=g||await this.client.obtIdDispositif();const{bd:_,fOublier:x}=await this.obtBd(),S=(await _.allAsJSON())[g]||[];r?(r.some(E=>!S.includes(E))||S.some(E=>!r.includes(E)))&&await _.put(g,r):S.length&&await _.del(g),await x()}async suivreProtocoles({f:r,idCompte:g}){return await this.suivreBdPrincipale({idCompte:g,f:r})}}__decorate([cacheSuivi],Protocoles.prototype,"suivreProtocoles",null);const estOrbiteDB=n=>{if(!n)return!1;const r=n;return!!(r.id&&typeof r.open=="function"&&typeof r.stop=="function"&&r.ipfs)},schémaStructureBdCompte={type:"object",properties:{protocoles:{type:"string",nullable:!0},profil:{type:"string",nullable:!0},motsClefs:{type:"string",nullable:!0},variables:{type:"string",nullable:!0},bds:{type:"string",nullable:!0},projets:{type:"string",nullable:!0},nuées:{type:"string",nullable:!0},favoris:{type:"string",nullable:!0},réseau:{type:"string",nullable:!0},automatisations:{type:"string",nullable:!0}},required:[]},schémaStructureNomsDispositifs={type:"object",additionalProperties:{type:"object",properties:{nom:{type:"string",nullable:!0},type:{type:"string",nullable:!0}}},required:[]},DÉLAI_EXPIRATION_INVITATIONS=1e3*60*5,obtDossierConstellation=async n=>{if(n.dossier&&n.dossier!=="dév"){if(isNode||isElectronMain){const r=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url);r.existsSync(n.dossier)||r.mkdirSync(n.dossier,{recursive:!0})}return n.dossier}if(isNode||isElectronMain){const r=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url),g=(await __vitePreload(async()=>{const{default:S}=await import("env-paths");return{default:S}},[],import.meta.url)).default,_=g("constl",{suffix:""}),x=await join(_.data,n.dossier==="dév"?"constl-dév":"constl");return r.existsSync(x)||r.mkdirSync(x,{recursive:!0}),x}else return"./constl"},join=async(...n)=>{if(isNode||isElectronMain){const{join:r}=await __vitePreload(async()=>{const{join:g}=await Promise.resolve().then(()=>index$1);return{join:g}},void 0,import.meta.url);return r(...n)}else return n.join("/")};class Constellation{_opts;événements;orbite;sfip;épingles;profil;bds;tableaux;variables;réseau;favoris;projets;recherche;motsClefs;automatisations;nuées;licences;protocoles;erreurInitialisation;_orbiteExterne;_sfipExterne;idCompte;encryption;sujet_réseau;motsDePasseRejoindreCompte;ennikkai;verrouObtIdBd;_intervaleVerrou;constructor(r={}){this._opts=r,this.événements=new libExports.TypedEmitter,this.sujet_réseau=r.sujetRéseau||"réseau-constellation",this.motsDePasseRejoindreCompte={},this.verrouObtIdBd=new s$2,this._orbiteExterne=this._sfipExterne=!1,this.encryption=new EncryptionLocalFirst,this.ennikkai=new எண்ணிக்கை({}),this.épingles=new Épingles({client:this}),this.profil=new Profil({client:this}),this.motsClefs=new MotsClefs({client:this}),this.tableaux=new Tableaux({client:this}),this.variables=new Variables({client:this}),this.bds=new BDs({client:this}),this.projets=new Projets({client:this}),this.nuées=new Nuées({client:this}),this.favoris=new Favoris({client:this}),this.automatisations=new Automatisations({client:this}),this.recherche=new Recherche({client:this}),this.licences=new Licences({client:this}),this.réseau=new Réseau({client:this}),this.protocoles=new Protocoles({client:this}),this._initialiser()}async dossier(){return await obtDossierConstellation(this._opts)}async _initialiser(){try{await this.verrouillerDossier({message:this._opts.messageVerrou})}catch(S){this.erreurInitialisation=S,this.événements.emit("erreurInitialisation",S)}const{sfip:r,orbite:g}=await this._générerSFIPetOrbite();this.sfip=r,this.orbite=gestionnaireOrbiteGénéral.obtGestionnaireOrbite({orbite:g}),this.événements.emit("sfipEtOrbitePrêts",{sfip:r,orbite:this.orbite});const _={type:nomType,write:this.orbite.identity.id,nom:"racine"};this.idCompte=await this.obtDeStockageLocal({clef:"idCompte",parCompte:!1})||void 0,this.idCompte||(this.idCompte=await this.créerBdIndépendante({type:"keyvalue",optionsAccès:_,nom:"racine"}),await this.nommerDispositif({type:this.détecterTypeDispositif()}),await this.sauvegarderAuStockageLocal({clef:"idCompte",val:this.idCompte,parCompte:!1})),await this.réseau.initialiser(),await this.protocoles.établirProtocoles({protocoles:this._opts.protocoles}),this.événements.emit("comptePrêt",{idCompte:this.idCompte});const x={type:"compte",base:TOUS,profil:{type:"profil",base:TOUS,fichiers:TOUS},favoris:TOUS};await this.épinglerCompte({idCompte:this.idCompte,options:x})}async épinglerCompte({idCompte:r,options:g={}}){const _=résoudreDéfauts(g,{type:"compte",base:TOUS,profil:{type:"profil",base:TOUS,fichiers:INSTALLÉ},favoris:TOUS});await this.favoris.épinglerFavori({idObjet:r,épingle:_})}async suivreÉpingleCompte({idCompte:r,f:g,idCompteQuiÉpingle:_}){return await this.favoris.suivreÉtatFavori({idObjet:r,f:async x=>{x?.type==="compte"?await g(x):await g(void 0)},idCompte:_})}détecterTypeDispositif(){if(isElectronMain)return"ordinateur";if(isNode)return"serveur";if(isBrowser$1)return["Pad","Kindle","Nexus","Nook","PlayBook"].find(r=>plateforme$1.product?.includes(r))?"tablette":plateforme$1.name?.includes("Mobile")||["Phone","Android","iOS"].find(r=>plateforme$1.os?.family?.includes(r))?"téléphone":"navigateur"}async attendreSfipEtOrbite(){return this.sfip&&this.orbite?{sfip:this.sfip,orbite:this.orbite}:new Promise(r=>{this.événements.once("sfipEtOrbitePrêts",r)})}async attendreInitialisée(){if(this.erreurInitialisation)throw this.erreurInitialisation;return this.idCompte?{idCompte:this.idCompte}:new Promise((r,g)=>{this.événements.once("comptePrêt",r),this.événements.once("erreurInitialisation",g)})}async verrouillerDossier({message:r}){if(isElectronMain||isNode){const _=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url),x=await join(await this.dossier(),"VERROU"),S=new Date;if(!_.existsSync(x))_.writeFileSync(x,r||"");else{const C=_.statSync(x).mtime,T=()=>{if(S.getTime()-C.getTime()>5e3)_.writeFileSync(x,r||"");else{const R=new TextDecoder().decode(_.readFileSync(x));try{const I=JSON.parse(R);if(I.port){const B=new Error(`Ce compte est déjà ouvert en Constellation, et le serveur local est disponible sur le port ${I.port}. Vous pouvez soit vous connecter sur ce port, soit fermer les instances de Constellation qui ouvertes et puis vous ressayer.`);throw B.name=ERREUR_INIT_IPA_DÉJÀ_LANCÉ,B}}catch{}const A=new Error("Constellation est déjà lancée.");throw A.name=ERREUR_INIT_IPA_DÉJÀ_LANCÉ,A}};try{T()}catch{await new Promise(R=>setTimeout(R,5e3)),T()}}this._intervaleVerrou=setInterval(()=>{try{_.utimesSync(x,S,S)}catch{}},5e3)}}async effacerVerrou(){(isElectronMain||isNode)&&(this._intervaleVerrou&&clearInterval(this._intervaleVerrou),(await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url)).rmSync(await join(await this.dossier(),"VERROU")))}async _générerSFIPetOrbite(){const r=await this.dossier(),{orbite:g}=this._opts;let _,x;if(g)if(estOrbiteDB(g))this._sfipExterne=this._orbiteExterne=!0,_=g.ipfs,x=g;else{const{initOrbite:S}=await __vitePreload(async()=>{const{initOrbite:E}=await Promise.resolve().then(()=>orbite);return{initOrbite:E}},void 0,import.meta.url);g.ipfs?(this._sfipExterne=!0,_=g.ipfs):_=await initSFIP({dossier:await join(r,"sfip")}),x=await S({sfip:_,dossierOrbite:g.directory||await join(r,"orbite")}),_=x.ipfs}else{const{initSFIP:S}=await __vitePreload(async()=>{const{initSFIP:C}=await Promise.resolve().then(()=>index);return{initSFIP:C}},void 0,import.meta.url);_=await S({dossier:await join(await this.dossier(),"sfip")});const{initOrbite:E}=await __vitePreload(async()=>{const{initOrbite:C}=await Promise.resolve().then(()=>orbite);return{initOrbite:C}},void 0,import.meta.url);x=await E({sfip:_,dossierOrbite:await join(await this.dossier(),"orbite")})}return{sfip:_,orbite:x}}async obtOptionsAccès(){return{write:await this.obtIdCompte()}}async suivreRésolutionÉpingle({épingle:r,f:g,ignorer:_}){const x=await this.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.base||"TOUS"}),S=r.épingle.profil,E=await this.favoris.estÉpingléSurDispositif({dispositifs:r.épingle.favoris||"AUCUN"}),C={},T=async()=>await g(new Set(Object.values(C).flat().filter(A=>!!A))),R=[];if(x){const A=await this.suivreBd({id:r.idObjet,type:"keyvalue",schéma:schémaStructureBdCompte,f:async I=>{try{const B=await I.allAsJSON();C.base=[r.idObjet,B.automatisations,B.bds,B.favoris,B.motsClefs,B.nuées,B.profil,B.projets,B.protocoles,B.réseau,B.variables].filter(D=>!!D)}catch{return}return await T()}});R.push(A)}if(S){const A=await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:I})=>await this.suivreBd({id:r.idObjet,type:"keyvalue",schéma:schémaStructureBdCompte,f:async B=>await I((await B.allAsJSON()).profil)}),fSuivre:async({id:I,fSuivreBd:B})=>await this.profil.suivreRésolutionÉpingle({épingle:{idObjet:I,épingle:S},f:B}),f:async I=>(C.profil=I?[...I]:[],await T())});R.push(A)}if(E){const A=await suivreBdsDeFonctionListe$1({fListe:async I=>await this.favoris.suivreFavoris({f:I,idCompte:r.idObjet}),fBranche:async(I,B,D)=>await this.favoris.suivreRésolutionÉpingle({épingle:D,f:B,ignorer:_}),f:async I=>(C.favoris=I.map(B=>[...B]).flat(),await T()),fIdBdDeBranche:I=>I.idObjet,fCode:I=>I.idObjet});R.push(A)}return async()=>{await Promise.all(R.map(A=>A()))}}async ouvrirBd({id:r,type:g,options:_}){const{orbite:x}=await this.attendreSfipEtOrbite();return await x.ouvrirBd({id:r,type:g,options:_})}async ouvrirBdTypée({id:r,type:g,schéma:_,options:x}){const{orbite:S}=await this.attendreSfipEtOrbite();return await S.ouvrirBdTypée({id:r,type:g,schéma:_,options:x})}async signer({message:r}){const{orbite:g}=await this.attendreSfipEtOrbite(),_=g.identity,x=await g.identity.sign(_,r),S=g.identity.publicKey;return{signature:x,clefPublique:S}}async vérifierSignature({signature:r,message:g}){if(!r||!r.clefPublique||!r.signature)return!1;const{orbite:_}=await this.attendreSfipEtOrbite();return await _.identity.verify(r.signature,r.clefPublique,g)}async suivreDispositifs({f:r,idCompte:g}){const _=async({id:x})=>{const{orbite:S}=await this.attendreSfipEtOrbite(),{bd:E,fOublier:C}=await S.ouvrirBdTypée({id:x,type:"keyvalue",schéma:schémaStructureBdCompte}),T=E.access,R=T.type;if(R==="ipfs")return await r(T.write),await C(),faisRien$1;if(R==="contrôleur-constellation"){const A=T,I=async()=>{const B=A.gestRôles._rôles[MODÉRATEUR];await r(B)};return A.gestRôles.on("misÀJour",I),I(),async()=>{A.gestRôles.off("misÀJour",I),await C()}}else return await C(),faisRien$1};return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:x})=>g?(await x(g),faisRien$1):await this.suivreIdCompte({f:x}),f:ignorerNonDéfinis$1(r),fSuivre:_})}async nommerDispositif({idDispositif:r,nom:g,type:_}){const x=r||await this.obtIdDispositif(),S=await this.obtIdBd({nom:"nomsDispositifs",racine:await this.obtIdCompte(),type:"keyvalue"}),{bd:E,fOublier:C}=await this.ouvrirBdTypée({id:S,type:"keyvalue",schéma:schémaStructureNomsDispositifs});if(g||_){const T={};g&&(T.nom=g),_&&(T.type=_),await E.set(x,T)}else await E.del(x);await C()}async suivreNomsDispositifs({idCompte:r,f:g}){const _=r||await this.obtIdCompte();return await this.suivreBdDicDeClef({id:_,schéma:schémaStructureNomsDispositifs,clef:"nomsDispositifs",f:g})}async suivreNomDispositif({idCompte:r,idDispositif:g,f:_}){return await this.suivreNomsDispositifs({idCompte:r,f:async x=>{const S=x[g];if(S)return await _(S)}})}async générerInvitationRejoindreCompte(){const r=await this.obtIdCompte(),g=await this.encryption.clefAléatoire();this.motsDePasseRejoindreCompte[g]=Date.now();const _=await this.obtIdDispositif();return{idCompte:r,codeSecret:`${_}:${g}`}}async révoquerInvitationRejoindreCompte({codeSecret:r}){if(r){const g=r.split(":")[1];delete this.motsDePasseRejoindreCompte[g]}else this.motsDePasseRejoindreCompte={}}async considérerRequêteRejoindreCompte({requête:r}){const{idDispositif:g,empreinteVérification:_}=r,x=Date.now();for(const S of Object.keys(this.motsDePasseRejoindreCompte)){const E=this.motsDePasseRejoindreCompte[S];x-E<DÉLAI_EXPIRATION_INVITATIONS&&this.empreinteInvitation({idDispositif:g,codeSecret:S})===_&&(delete this.motsDePasseRejoindreCompte[S],await this.ajouterDispositif({idDispositif:g}))}}empreinteInvitation({idDispositif:r,codeSecret:g}){return Base64.stringify(sha256(r+g))}async demanderEtPuisRejoindreCompte({idCompte:r,codeSecret:g}){await this.réseau.envoyerDemandeRejoindreCompte({codeSecret:g}),await this.rejoindreCompte({idCompte:r})}async ajouterDispositif({idDispositif:r}){const{idCompte:g}=await this.attendreInitialisée(),{bd:_,fOublier:x}=await this.ouvrirBd({id:g});_.access.grant(MODÉRATEUR,r),await x()}async enleverDispositif({idDispositif:r}){const{idCompte:g}=await this.attendreInitialisée(),{bd:_,fOublier:x}=await this.ouvrirBd({id:g});await _.access.revoke(MODÉRATEUR,r),await x()}async rejoindreCompte({idCompte:r}){if(!isValidAddress(r))throw new Error(`Adresse compte "${r}" non valide`);const{bd:g,fOublier:_}=await this.ouvrirBdTypée({id:r,type:"keyvalue",schéma:schémaStructureBdCompte}),x=g.access,S=await this.obtIdDispositif();let E;await new Promise(C=>{x.suivreIdsOrbiteAutoriséesÉcriture(T=>{T.includes(S)&&E().then(_).then(C)}).then(T=>E=T)}),this.idCompte=r,await this.sauvegarderAuStockageLocal({clef:"idCompte",val:r,parCompte:!1}),this.événements.emit("comptePrêt",{idCompte:r})}async donnerAccès({idBd:r,identité:g,rôle:_=MEMBRE}){if(!isValidAddress(g))throw new Error(`Identité "${g}" non valide.`);const{bd:x,fOublier:S}=await this.ouvrirBd({id:r}),E=x.access;E.type===nomType&&await E.grant(_,g),await S()}async suivreIdCompte({f:r}){const g=async({idCompte:_})=>{await r(_)};return this.événements.on("comptePrêt",g),this.idCompte&&await g({idCompte:this.idCompte}),async()=>{this.événements.off("comptePrêt",g)}}async obtIdSFIP(){const{sfip:r}=await this.attendreSfipEtOrbite();return r.libp2p.peerId}async obtIdDispositif(){const{orbite:r}=await this.attendreSfipEtOrbite();return r.identity.id}async obtIdentitéOrbite(){const{orbite:r}=await this.attendreSfipEtOrbite();return r.identity}async obtIdCompte(){const{idCompte:r}=await this.attendreInitialisée();return r}async copierContenuBdDic({bdBase:r,nouvelleBd:g,clef:_,schéma:x}){const S=await r.get(_);if(typeof S!="string")return;const{bd:E,fOublier:C}=await this.ouvrirBdTypée({id:S,type:"keyvalue",schéma:x}),T=await g.get(_);if(!T)throw new Error("La nouvelle BD n'existait pas.");if(typeof T!="string")throw new Error(`${T} n'est pas une adresse Orbite.`);const{bd:R,fOublier:A}=await this.ouvrirBdTypée({id:T,type:"keyvalue",schéma:x}),I=await E.all();await Promise.all(I.map(async B=>{await R.put(B.key,B.value)})),C(),A()}async combinerBds({idBdBase:r,idBd2:g}){const{bd:_,fOublier:x}=await this.ouvrirBd({id:r}),S=_.type;switch(await x(),S){case"keyvalue":{const{bd:E,fOublier:C}=await this.ouvrirBd({id:r,type:"keyvalue"}),{bd:T,fOublier:R}=await this.ouvrirBd({id:g,type:"keyvalue"});await this.combinerBdsDict({bdBase:E,bd2:T}),await C(),await R();break}case"set":{const{bd:E,fOublier:C}=await this.ouvrirBd({id:r,type:"set"}),{bd:T,fOublier:R}=await this.ouvrirBd({id:g,type:"set"});await this.combinerBdsEnsemble({bdBase:E,bd2:T}),await C(),await R();break}default:throw new Error(`Type de BD ${S} non supporté.`)}}async combinerBdsDict({bdBase:r,bd2:g}){const _=Object.fromEntries((await g.all()).map(x=>[x.key,x.value]));for(const[x,S]of Object.entries(_)){const E=await r.get(x);E!==S&&(E===void 0?await r.put(x,S):isValidAddress(E)&&isValidAddress(S)&&await this.combinerBds({idBdBase:E,idBd2:S}))}}async combinerBdsEnsemble({bdBase:r,bd2:g,index:_}){const x=await r.all(),S=await g.all();for(const E of S){const C=E.value;if(_){if(typeof C!="object")throw new Error(`Erreur combinaison ensembles : ${typeof C}`);const T=x.find(R=>typeof R.value=="object"&&_.every(A=>R.value[A]===C[A]));if(!T)await r.add(C);else{const R=T.value;if(!deepEqual$2(R,C)){const A=Object.assign({},R);for(const[I,B]of Object.entries(C))A[I]===void 0?A[I]=B:deepEqual$2(A[I],B)||isValidAddress(A[I])&&isValidAddress(B)&&await this.combinerBds({idBdBase:A[I],idBd2:B});await r.del(T.value),await r.add(A)}}}else x.some(T=>deepEqual$2(T.value,C))||await r.add(C)}}async suivreBd({id:r,f:g,type:_,schéma:x}){if(!isValidAddress(r))throw new Error(`Adresse "${r}" non valide.`);const S=[],E={};let C=!1;const T=()=>{(x?_==="set"?this.ouvrirBdTypée({id:r,type:_,schéma:x}):_==="keyvalue"?this.ouvrirBdTypée({id:r,type:_,schéma:x}):_==="ordered-keyvalue"?this.ouvrirBdTypée({id:r,type:_,schéma:x}):this.ouvrirBd({id:r,type:_}):this.ouvrirBd({id:r})).then(({bd:I,fOublier:B})=>{S.push(B);const D=()=>{const N=v4$3(),M=g(I);(L=>!!L&&!!L.then)(M)&&(E[N]=M,M.then(()=>{delete E[N]}))};I.events.on("update",D),S.push(async()=>{I.events.off("update",D)}),D()}).catch(I=>{if(!C)if(String(I).includes("ipfs unable to find")||String(I).includes("aborted")||String(I).includes("No Promise in Promise.any was resolved"))T();else throw console.error(I),I})};return T(),async()=>{C=!0,await Promise.all(S.map(A=>A())),await Promise.all(Object.values(E))}}async suivreBdDeClef({id:r,clef:g,f:_,fSuivre:x}){return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:E})=>{const C=async T=>{const R=await T.get(g);return await E(R)};return await this.suivreBd({id:r,f:C,type:"keyvalue"})},f:_,fSuivre:x})}async suivreBdDic({id:r,schéma:g,f:_}){const x=async S=>{const E=S?Object.fromEntries((await S.all()).map(C=>[C.key,C.value])):{};await _(E)};return await this.suivreBd({id:r,type:"keyvalue",schéma:g,f:x})}async suivreBdDicOrdonnée({id:r,schéma:g,f:_}){const x=async S=>{const E=await S.all();await _(E)};return await this.suivreBd({id:r,type:"ordered-keyvalue",schéma:g,f:x})}async suivreBdDicDeClef({id:r,clef:g,schéma:_,f:x}){const S=async C=>{await x(C||{})},E=async({id:C,fSuivreBd:T})=>await this.suivreBdDic({id:C,schéma:_,f:T});return await this.suivreBdDeClef({id:r,clef:g,f:S,fSuivre:E})}async suivreBdDicOrdonnéeDeClef({id:r,clef:g,schéma:_,f:x}){const S=async C=>{await x(C||[])},E=async({id:C,fSuivreBd:T})=>await this.suivreBdDicOrdonnée({id:C,schéma:_,f:T});return await this.suivreBdDeClef({id:r,clef:g,f:S,fSuivre:E})}async suivreBdListeDeClef({id:r,clef:g,f:_,schéma:x,renvoyerValeur:S=!0}){if(S){const E=async T=>{await _(T||[])},C=async({id:T,fSuivreBd:R})=>await this.suivreBdListe({id:T,f:R,schéma:x,renvoyerValeur:S});return await this.suivreBdDeClef({id:r,clef:g,f:E,fSuivre:C})}else{const E=async T=>{await _(T||[])},C=async({id:T,fSuivreBd:R})=>await this.suivreBdListe({id:T,f:R,schéma:x,renvoyerValeur:!1});return await this.suivreBdDeClef({id:r,clef:g,f:E,fSuivre:C})}}async suivreBdListe({id:r,f:g,schéma:_,renvoyerValeur:x=!0}){return await this.suivreBd({id:r,type:"set",schéma:_,f:async S=>{const E=x?(await S.all()).map(C=>C.value):await S.all();await g(E)}})}async suivreTypeObjet({idObjet:r,f:g}){const _=async E=>{let C;const{type:T}=E;T?C=["motClef","variable","bd","projet","nuée"].includes(T)?T:void 0:E.bds?C="projet":E.tableaux?C="bd":E.catégorie?C="variable":E.nom&&(C="motClef"),await g(C)},x={type:"object",properties:{type:{type:"string",nullable:!0}},additionalProperties:!0};return await this.suivreBdDic({id:r,schéma:x,f:_})}async suivreEmpreinteTêtesBdRécursive({idBd:r,f:g}){const _=async T=>{const R=await T.log.heads();return R[R.length-1]?.hash||""},x=T=>Base64.stringify(md5(T));return await suivreBdsDeFonctionListe$1({fListe:async T=>await this.suivreBdsRécursives({idBd:r,f:async R=>await T(R)}),f:async T=>{await g(x(T.sort().join()))},fBranche:async(T,R)=>await this.suivreBd({id:T,f:async A=>{const I=await _(A);await R(I)}})})}async suivreBdsDeBdListe({id:r,f:g,fBranche:_,fIdBdDeBranche:x=C=>C,fRéduction:S=C=>[...new Set(C.flat())],fCode:E=C=>C}){return await suivreBdsDeFonctionListe$1({fListe:async T=>await this.suivreBdListe({id:r,f:T}),f:g,fBranche:_,fIdBdDeBranche:x,fRéduction:S,fCode:E})}async suivreBdsDeBdDic({id:r,f:g,fBranche:_,fIdBdDeBranche:x=C=>C,fRéduction:S=C=>[...new Set(C.flat())],fCode:E=C=>C}){return await suivreBdsDeFonctionListe$1({fListe:async T=>await this.suivreBd({id:r,f:async R=>await T((await R.all()).map(A=>A.value))}),f:g,fBranche:_,fIdBdDeBranche:x,fRéduction:S,fCode:E})}async suivreBdsDeFonctionRecherche({fListe:r,f:g,fBranche:_,fIdBdDeBranche:x=C=>C,fRéduction:S=C=>[...new Set(C.flat())],fCode:E=C=>C}){let C;const T=async I=>{C&&await C(I)};return{fOublier:await suivreBdsDeFonctionListe$1({fListe:async I=>{const{fOublier:B,fChangerProfondeur:D}=await r(I);return C=D,B},f:g,fBranche:_,fIdBdDeBranche:x,fRéduction:S,fCode:E}),fChangerProfondeur:T}}async suivreBdSelonCondition({fRacine:r,fCondition:g,f:_}){const x=async({id:S,fSuivreBd:E})=>await g(S,async C=>{E(C?S:void 0)});return await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:S})=>await r(S),f:ignorerNonDéfinis$1(_),fSuivre:x})}async suivreBdsSelonCondition({fListe:r,fCondition:g,f:_}){return await suivreBdsDeFonctionListe$1({fListe:r,f:async E=>{const C=E.filter(T=>T.état).map(T=>T.id);return await _(C)},fBranche:async(E,C)=>await g(E,async R=>await C({id:E,état:R}))})}async obtFichierSFIP({id:r,max:g}){return await toBuffer$2(await this.obtItérableAsyncSFIP({id:r}),g)}async obtItérableAsyncSFIP({id:r}){const{sfip:g}=await this.attendreSfipEtOrbite(),_=unixfs(g),x=r.split("/")[0];return _.cat(CID$1.parse(x))}async ajouterÀSFIP({contenu:r,nomFichier:g}){const{sfip:_}=await this.attendreSfipEtOrbite();return(await unixfs(_).addFile({content:r})).toString()+"/"+g}async obtClefStockageClient({clef:r,parCompte:g=!0}){if(g){const _=await this.obtIdCompte();return`${_.slice(_.length-23,_.length-8)} : ${r}`}return r}async obtDeStockageLocal({clef:r,parCompte:g=!0}){const _=await this.obtClefStockageClient({clef:r,parCompte:g});return(await obtStockageLocal(await this.dossier())).getItem(_)}async sauvegarderAuStockageLocal({clef:r,val:g,parCompte:_=!0}){const x=await this.obtClefStockageClient({clef:r,parCompte:_});return(await obtStockageLocal(await this.dossier())).setItem(x,g)}async effacerDeStockageLocal({clef:r,parCompte:g=!0}){const _=await this.obtClefStockageClient({clef:r,parCompte:g});return(await obtStockageLocal(await this.dossier())).removeItem(_)}async obtIdBd({nom:r,racine:g,type:_}){const x={type:"object",properties:{[r]:{type:"string"}},additionalProperties:!0,required:[]};if(typeof g=="string"&&!adresseOrbiteValide(g))throw new Error(`Adresse ${g} non valide.`);const{bd:S,fOublier:E}=typeof g=="string"?await this.ouvrirBdTypée({id:g,type:"keyvalue",schéma:x}):{bd:g,fOublier:faisRien$1},C=S.address+":"+r;await this.verrouObtIdBd.acquire(C);let T=await S.get(r);const R=await this.obtDeStockageLocal({clef:C});if(typeof T=="string"&&R&&T!==R)try{await this.combinerBds({idBdBase:T,idBd2:R}),await this.effacerBd({id:R}),await this.sauvegarderAuStockageLocal({clef:C,val:T})}catch{}if(typeof T=="string"&&_)try{const{fOublier:A}=await this.ouvrirBd({id:T,type:_});return await A(),this.verrouObtIdBd.release(C),T}catch{throw this.verrouObtIdBd.release(C),new Error("Bd n'existe pas : "+r+" "+T)}if(!T&&_){const A=S.access,{orbite:I}=await this.attendreSfipEtOrbite();if(await A.estAutorisé(I.identity.id)){const D=await this.obtOpsAccès({idBd:S.address});if(T=await this.créerBdIndépendante({type:_,optionsAccès:D}),!T)throw new Error("Bd non générée");await S.set(r,T)}}return typeof T=="string"&&await this.sauvegarderAuStockageLocal({clef:C,val:T}),E&&await E(),this.verrouObtIdBd.release(C),typeof T=="string"?T:void 0}async créerBdIndépendante({type:r,optionsAccès:g,nom:_}){const{orbite:x}=await this.attendreSfipEtOrbite();return g=g||await this.obtOptionsAccès(),await x.créerBdIndépendante({type:r,nom:_,options:{AccessController:ContrôleurConstellation(g)}})}async effacerBd({id:r}){return await this.orbite?.effacerBd({id:r})}async obtOpsAccès({idBd:r}){const{bd:g,fOublier:_}=await this.ouvrirBd({id:r}),x=g.access;return await _(),{address:x.bd.address,write:x.write}}async suivrePermission({idObjet:r,f:g}){const{bd:_,fOublier:x}=await this.ouvrirBd({id:r}),S=_.access,E=S.type;if(E==="ipfs"){const C=await this.obtIdDispositif();return await g(S.write.includes(C)?MEMBRE:void 0),await x(),faisRien$1}else if(E===nomType){const C=async R=>{const A=R.filter(B=>B.idCompte===this.idCompte).map(B=>B.rôle),I=A.includes(MODÉRATEUR)?MODÉRATEUR:A.includes(MEMBRE)?MEMBRE:void 0;await g(I)},T=await S.suivreUtilisateursAutorisés(C);return async()=>{await T(),await x()}}else throw new Error(`Type d'accès ${E} non reconnu.`)}async suivrePermissionÉcrire({id:r,f:g}){const _=async x=>{await g(x!==void 0)};return await this.suivrePermission({idObjet:r,f:_})}async suivreAccèsBd({id:r,f:g}){const _=async x=>{const S=x.access,E=S.type;if(E==="ipfs"){const C=S.write.map(T=>({idCompte:T,rôle:MODÉRATEUR}));await g(C)}else if(E===nomType)return await S.suivreUtilisateursAutorisés(g);return faisRien$1};return await this.suivreBd({id:r,f:_})}async suivreBdsRécursives({idBd:r,f:g}){const _={},x=async()=>{await g(Object.keys(_))},S=new s$2,E=async A=>{delete _[A],await Promise.all(Object.keys(_).map(async I=>{_[I]&&(_[I].requêtes.delete(A),_[I].requêtes.size||await _[I].fOublier())}))},C=["copiéDe"],T=async(A,I)=>{const B=F=>F.map(U=>typeof U=="string"?[U]:Array.isArray(U)?U:typeof U=="object"?Object.values(U):[]).flat().filter(U=>isValidAddress(U)),D=async F=>{let U=[];typeof F=="object"?(U=B(Object.entries(F).filter(W=>!C.includes(W[0])).map(W=>W[1])),U.push(...B(Object.keys(F)))):Array.isArray(F)?U=B(F):typeof F=="string"&&(U=[F]);const j=U.filter(W=>!_[A].sousBds.includes(W)),z=_[A].sousBds.filter(W=>!U.includes(W));_[A].sousBds=U,await Promise.all(z.map(async W=>{_[W]?.requêtes.delete(A),_[W]?.requêtes.size||await _[W]?.fOublier()})),await Promise.all(j.map(async W=>await T(W,A))),x()};if(await S.acquire(A),_[A]){_[A].requêtes.add(I);return}const{bd:N,fOublier:M}=await this.ouvrirBd({id:A}),{type:O}=N;await M(),_[A]={requêtes:new Set([I]),sousBds:[],fOublier:async()=>{await L(),await E(A)}};let L;O==="keyvalue"?L=await this.suivreBdDic({id:A,f:D}):O==="ordered-keyvalue"?L=await this.suivreBdDicOrdonnée({id:A,f:D}):O==="set"?L=await this.suivreBdListe({id:A,f:D}):L=faisRien$1,S.release(A),x()};return await T(r,""),async()=>{await Promise.all(Object.values(_).map(A=>A.fOublier()))}}async fermerCompte(){this.réseau&&await this.réseau.fermer(),this.favoris&&await this.favoris.fermer(),this.automatisations&&await this.automatisations.fermer()}async fermer(){await this.attendreInitialisée();const{orbite:r}=await this.attendreSfipEtOrbite();await(await obtStockageLocal(await this.dossier())).fermer?.(),await this.fermerCompte(),await this.épingles.fermer(),await r.fermer({arrêterOrbite:!this._orbiteExterne}),this.sfip&&!this._sfipExterne&&await this.sfip.stop(),await this.effacerVerrou()}async effacerDispositif(){if(await this.fermer(),indexedDB)if(indexedDB.databases){const r=await indexedDB.databases();await Promise.all(r.map(g=>{g.name&&indexedDB.deleteDatabase(g.name)}))}else console.warn("On a pas pu tout effacer.");else{const r=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url);(await obtStockageLocal(await this.dossier())).clear(),r.rmdirSync(await this.dossier())}}async exporterDispositif({nomFichier:r}){if(isNode||isElectronMain){const g=await __vitePreload(()=>Promise.resolve().then(()=>empty$2),void 0,import.meta.url),_=await __vitePreload(()=>Promise.resolve().then(()=>index$1),void 0,import.meta.url),x=({dossier:E,zip:C})=>{g.readdirSync(E).map(R=>{if(g.statSync(R)?.isDirectory())x({dossier:_.join(E,R),zip:C.folder(R)});else{const I=g.createReadStream(_.join(E,R));C.file(R,I)}})},S=new JSZip;x({dossier:await this.dossier(),zip:S}),await sauvegarderFichierZip({fichierZip:S,nomFichier:r})}else if(indexedDB?.databases){const g=({bd:E,zip:C})=>{const{name:T}=E;if(T){const R=C.folder(T);if(!R)throw new Error(T);const I=indexedDB.open(T).result.objectStoreNames;[...Array(I.length).keys()].map(D=>I.item(D)).filter(D=>!!D).map(D=>R.file(D,new indexedDbStream.IndexedDbReadStream({databaseName:T,objectStoreName:D})))}},_=new JSZip,x=await indexedDB.databases(),S=_.folder("bdIndexe");if(!S)throw new Error("Erreur Bd Indexe...");x.forEach(E=>{g({bd:E,zip:S})}),_.file("stockageLocal",JSON.stringify(await exporterStockageLocal(await this.dossier()))),await sauvegarderFichierZip({fichierZip:_,nomFichier:r})}else throw new Error("Sauvegarde non implémentée.")}async rétablirDispositif(){throw await this.effacerDispositif(),isNode||isElectronMain?new Error("Non implémenté"):new Error("Non implémenté")}static async créer(r={}){const g=new Constellation(r);return await g.attendreInitialisée(),g}}__decorate([cacheSuivi],Constellation.prototype,"suivreDispositifs",null);__decorate([cacheSuivi],Constellation.prototype,"suivreIdCompte",null);__decorate([cacheSuivi],Constellation.prototype,"suivreEmpreinteTêtesBdRécursive",null);__decorate([cacheSuivi],Constellation.prototype,"suivrePermission",null);__decorate([cacheSuivi],Constellation.prototype,"suivrePermissionÉcrire",null);__decorate([cacheSuivi],Constellation.prototype,"suivreAccèsBd",null);__decorate([cacheSuivi],Constellation.prototype,"suivreBdsRécursives",null);class EnveloppeIpa{ipa;_messagesEnAttente;prêt;dicFRetourSuivi;opts;fsMessages;fsErreurs;_verrou;constructor(r,g,_={}){this.fsMessages={},this.fsErreurs={},this.connecterÉcouteurs({fMessage:r,fErreur:g}),this.opts=_ instanceof Constellation?{}:_,_ instanceof Constellation&&(this.ipa=_),this.dicFRetourSuivi={},this.prêt=!1,this._messagesEnAttente=[],this._verrou=new s$2,this.init()}fMessage(r){Object.values(this.fsMessages).forEach(g=>g(r))}fErreur({erreur:r,idRequête:g,code:_}){Object.values(this.fsErreurs).forEach(x=>x({erreur:r,idRequête:g,code:_}))}async init(){if(await this._verrou.acquire("init"),this.ipa)return this._verrou.release("init"),this.ipa;try{this.ipa=await Constellation.créer(this.opts)}catch(r){throw this.fErreur({erreur:r.toString(),code:r.name==="Error"?ERREUR_INIT_IPA:r.name}),this._messagesEnAttente.forEach(g=>this.fErreur({erreur:r.toString(),idRequête:g.idRequête,code:r.name==="Error"?ERREUR_INIT_IPA:r.name})),r}return this._messagesEnAttente.forEach(r=>this._gérerMessage(r)),this.prêt=!0,this._verrou.release("init"),this.ipa}async gérerMessage(r){this.prêt?await this._gérerMessage(r):this.ipa?.erreurInitialisation?this.fErreur({erreur:this.ipa.erreurInitialisation.toString(),idRequête:r.idRequête,code:this.ipa.erreurInitialisation.name==="Error"?ERREUR_INIT_IPA:this.ipa.erreurInitialisation.name}):this._messagesEnAttente.unshift(r)}async _gérerMessage(r){if(!this.ipa){this.fErreur({erreur:"IPA non initialisé",idRequête:r.idRequête,code:ERREUR_INIT_IPA});return}const{type:g}=r;switch(g){case"suivre":{const{idRequête:_,fonction:x,args:S,nomArgFonction:E}=r,C=this.extraireFonctionIPA(x,_);if(!C)return;const T=R=>{const A={type:"suivre",idRequête:_,données:R};this.fMessage(A)};S[E]=T;try{const R=await C(S),A=typeof R=="function"?{fOublier:R}:R;this.dicFRetourSuivi[_]=A;const I={type:"suivrePrêt",idRequête:_};typeof R!="function"&&(I.fonctions=Object.keys(R)),this.fMessage(I)}catch(R){const A=(R instanceof AggregateError?R.errors:[R]).map(I=>I.toString()+I.stack.toString()).join(`
`);this.fErreur({erreur:A,idRequête:_,code:ERREUR_EXÉCUTION_IPA})}break}case"action":{const{idRequête:_,fonction:x,args:S}=r,E=this.extraireFonctionIPA(x,_);if(!E)return;try{const C=await E(S),T={type:"action",idRequête:_,résultat:C};this.fMessage(T)}catch(C){const T=(C instanceof AggregateError?C.errors:[C]).map(R=>R.toString()+R.stack.toString()).join(`
`);this.fErreur({erreur:T,idRequête:_,code:ERREUR_EXÉCUTION_IPA})}break}case"retour":{const{idRequête:_,fonction:x,args:S}=r,E=this.dicFRetourSuivi[_];E&&await E[x](S),x==="fOublier"&&delete this.dicFRetourSuivi[_];break}default:{this.fErreur({erreur:`Type de requête ${g} non reconnu dans message ${r}`,idRequête:r.idRequête,code:ERREUR_EXÉCUTION_IPA});break}}}extraireFonctionIPA(r,g){const _=`Fonction Constellation.${r.join(".")} n'existe pas ou n'est pas une fonction.`;let x=this.ipa;for(const[S,E]of r.entries()){if(typeof x=="object"&&E in x&&x[E])S===r.length-1?x=x[E].bind(x):x=x[E];else{this.fErreur({erreur:_,idRequête:g,code:ERREUR_FONCTION_MANQUANTE});return}if(!x){this.fErreur({erreur:_,idRequête:g,code:ERREUR_FONCTION_MANQUANTE});return}}if(typeof x!="function"){this.fErreur({erreur:_,idRequête:g,code:ERREUR_PAS_UNE_FONCTION});return}return x}connecterÉcouteurs({fMessage:r,fErreur:g}){const _=v4$3();return this.fsMessages[_]=r,this.fsErreurs[_]=g,()=>{delete this.fsMessages[_],delete this.fsErreurs[_]}}async fermer(){await(await this.init()).fermer()}}class MandataireProc extends Mandatairifiable{ipa;constructor(r={}){super(),this.ipa=new EnveloppeIpa(g=>this.recevoirMessageDIpa(g),({erreur:g,idRequête:_,code:x})=>{const S={type:"erreur",idRequête:_,erreur:g,codeErreur:x};this.recevoirMessageDIpa(S)},r)}envoyerMessageÀIpa(r){this.ipa.gérerMessage(r)}}const générerMandataireProc=(n={})=>générerMandataire(new MandataireProc(n));class MandataireTravailleur extends Mandatairifiable{travailleur;constructor(r){super(),this.travailleur=new Worker(new URL("./travailleur.js")),this.travailleur.onerror=g=>{this.recevoirMessageDIpa({type:"erreur",erreur:g.error})},this.travailleur.onmessage=g=>{this.recevoirMessageDIpa(g.data)},this.travailleur.postMessage({type:"init",opts:r})}envoyerMessageÀIpa(r){this.travailleur.postMessage(r)}}const confirmerOptsTravailleur=n=>{const r={};return n?.dossier&&(r.dossier=n.dossier),n?.sujetRéseau&&(r.sujetRéseau=n.sujetRéseau),n?.protocoles&&(r.protocoles=n.protocoles),n?.orbite&&(r.orbite={directory:n.orbite.directory,id:n.orbite.id}),r},générerMandataireTravailleur=(n={})=>générerMandataire(new MandataireTravailleur(n)),créerConstellation=(n={})=>(préparerOrbite(),isNode||isElectronMain?générerMandataireProc(n):isBrowser$1?générerMandataireProc(confirmerOptsTravailleur(n)):isElectronRenderer?(console.warn("Constellation a été initialisée par le processus de rendu d'Électron. Ce n'est pas un gros gros problème, mais nous vous recommandons d'utiliser Constellation dans le processus principal, ce qui est beaucoup plus performant et vous permettra également d'accéder à toutes les fonctionnalités de Constellation telles les sauvegardes et les importations automatisées. Voir la documentation: https://docu.réseau-constellation.ca/avancé/applications/électron.html."),générerMandataireProc(confirmerOptsTravailleur(n))):isWebWorker?(console.warn("Constellation a été initialisée dans un processus de travailleur. J'espère que ça va fonctionner !"),générerMandataireTravailleur(confirmerOptsTravailleur(n))):isReactNative?(console.warn("Constellation n'a pas encore été optimisé pour React Native. Nous utiliserons l'implémentation pour navigateurs."),générerMandataireProc(confirmerOptsTravailleur(n))):(console.warn("Environnement non détecté. On va utiliser la configuration navigateur."),générerMandataireTravailleur(confirmerOptsTravailleur(n)))),constellationNavigateur={install:n=>{const r=créerConstellation();n.config.globalProperties.$constl=r,n.provide("constl",r)}};function useToggleScope(n,r){let g;function _(){g=effectScope(),g.run(()=>r.length?r(()=>{g?.stop(),_()}):r())}watch(n,x=>{x&&!g?_():x||(g?.stop(),g=void 0)},{immediate:!0}),onScopeDispose(()=>{g?.stop()})}const IN_BROWSER=typeof window<"u",SUPPORTS_INTERSECTION=IN_BROWSER&&"IntersectionObserver"in window,SUPPORTS_TOUCH=IN_BROWSER&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);function _classPrivateFieldInitSpec(n,r,g){_checkPrivateRedeclaration(n,r),r.set(n,g)}function _checkPrivateRedeclaration(n,r){if(r.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet(n,r,g){return n.set(_assertClassBrand(n,r),g),g}function _classPrivateFieldGet(n,r){return n.get(_assertClassBrand(n,r))}function _assertClassBrand(n,r,g){if(typeof n=="function"?n===r:n.has(r))return arguments.length<3?r:g;throw new TypeError("Private element is not present on this object")}function getNestedValue(n,r,g){const _=r.length-1;if(_<0)return n===void 0?g:n;for(let x=0;x<_;x++){if(n==null)return g;n=n[r[x]]}return n==null||n[r[_]]===void 0?g:n[r[_]]}function deepEqual(n,r){if(n===r)return!0;if(n instanceof Date&&r instanceof Date&&n.getTime()!==r.getTime()||n!==Object(n)||r!==Object(r))return!1;const g=Object.keys(n);return g.length!==Object.keys(r).length?!1:g.every(_=>deepEqual(n[_],r[_]))}function getObjectValueByPath(n,r,g){return n==null||!r||typeof r!="string"?g:n[r]!==void 0?n[r]:(r=r.replace(/\[(\w+)\]/g,".$1"),r=r.replace(/^\./,""),getNestedValue(n,r.split("."),g))}function getPropertyFromItem(n,r,g){if(r===!0)return n===void 0?g:n;if(r==null||typeof r=="boolean")return g;if(n!==Object(n)){if(typeof r!="function")return g;const x=r(n,g);return typeof x>"u"?g:x}if(typeof r=="string")return getObjectValueByPath(n,r,g);if(Array.isArray(r))return getNestedValue(n,r,g);if(typeof r!="function")return g;const _=r(n,g);return typeof _>"u"?g:_}function createRange(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:n},(g,_)=>r+_)}function convertToUnit(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(n==null||n===""))return isNaN(+n)?String(n):isFinite(+n)?`${Number(n)}${r}`:void 0}function isObject(n){return n!==null&&typeof n=="object"&&!Array.isArray(n)}function isPlainObject$1(n){let r;return n!==null&&typeof n=="object"&&((r=Object.getPrototypeOf(n))===Object.prototype||r===null)}function refElement(n){if(n&&"$el"in n){const r=n.$el;return r?.nodeType===Node.TEXT_NODE?r.nextElementSibling:r}return n}const keyCodes=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16}),keyValues=Object.freeze({enter:"Enter",tab:"Tab",delete:"Delete",esc:"Escape",space:"Space",up:"ArrowUp",down:"ArrowDown",left:"ArrowLeft",right:"ArrowRight",end:"End",home:"Home",del:"Delete",backspace:"Backspace",insert:"Insert",pageup:"PageUp",pagedown:"PageDown",shift:"Shift"});function keys(n){return Object.keys(n)}function has(n,r){return r.every(g=>n.hasOwnProperty(g))}function pick(n,r){const g={},_=new Set(Object.keys(n));for(const x of r)_.has(x)&&(g[x]=n[x]);return g}function pickWithRest(n,r,g){const _=Object.create(null),x=Object.create(null);for(const S in n)r.some(E=>E instanceof RegExp?E.test(S):E===S)&&!g?.some(E=>E===S)?_[S]=n[S]:x[S]=n[S];return[_,x]}function omit(n,r){const g={...n};return r.forEach(_=>delete g[_]),g}function only(n,r){const g={};return r.forEach(_=>g[_]=n[_]),g}const onRE=/^on[^a-z]/,isOn=n=>onRE.test(n),bubblingEvents=["onAfterscriptexecute","onAnimationcancel","onAnimationend","onAnimationiteration","onAnimationstart","onAuxclick","onBeforeinput","onBeforescriptexecute","onChange","onClick","onCompositionend","onCompositionstart","onCompositionupdate","onContextmenu","onCopy","onCut","onDblclick","onFocusin","onFocusout","onFullscreenchange","onFullscreenerror","onGesturechange","onGestureend","onGesturestart","onGotpointercapture","onInput","onKeydown","onKeypress","onKeyup","onLostpointercapture","onMousedown","onMousemove","onMouseout","onMouseover","onMouseup","onMousewheel","onPaste","onPointercancel","onPointerdown","onPointerenter","onPointerleave","onPointermove","onPointerout","onPointerover","onPointerup","onReset","onSelect","onSubmit","onTouchcancel","onTouchend","onTouchmove","onTouchstart","onTransitioncancel","onTransitionend","onTransitionrun","onTransitionstart","onWheel"],compositionIgnoreKeys=["ArrowUp","ArrowDown","ArrowRight","ArrowLeft","Enter","Escape","Tab"," "];function isComposingIgnoreKey(n){return n.isComposing&&compositionIgnoreKeys.includes(n.key)}function filterInputAttrs(n){const[r,g]=pickWithRest(n,[onRE]),_=omit(r,bubblingEvents),[x,S]=pickWithRest(g,["class","style","id",/^data-/]);return Object.assign(x,r),Object.assign(S,_),[x,S]}function wrapInArray(n){return n==null?[]:Array.isArray(n)?n:[n]}function debounce(n,r){let g=0;const _=function(){for(var x=arguments.length,S=new Array(x),E=0;E<x;E++)S[E]=arguments[E];clearTimeout(g),g=setTimeout(()=>n(...S),unref(r))};return _.clear=()=>{clearTimeout(g)},_.immediate=n,_}function clamp(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(r,Math.min(g,n))}function padEnd(n,r){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0";return n+g.repeat(Math.max(0,r-n.length))}function padStart(n,r){return(arguments.length>2&&arguments[2]!==void 0?arguments[2]:"0").repeat(Math.max(0,r-n.length))+n}function chunk(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const g=[];let _=0;for(;_<n.length;)g.push(n.substr(_,r)),_+=r;return g}function humanReadableFileSize(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e3;if(n<r)return`${n} B`;const g=r===1024?["Ki","Mi","Gi"]:["k","M","G"];let _=-1;for(;Math.abs(n)>=r&&_<g.length-1;)n/=r,++_;return`${n.toFixed(1)} ${g[_]}B`}function mergeDeep(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g=arguments.length>2?arguments[2]:void 0;const _={};for(const x in n)_[x]=n[x];for(const x in r){const S=n[x],E=r[x];if(isPlainObject$1(S)&&isPlainObject$1(E)){_[x]=mergeDeep(S,E,g);continue}if(g&&Array.isArray(S)&&Array.isArray(E)){_[x]=g(S,E);continue}_[x]=E}return _}function flattenFragments(n){return n.map(r=>r.type===Fragment?flattenFragments(r.children):r).flat()}function toKebabCase(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(toKebabCase.cache.has(n))return toKebabCase.cache.get(n);const r=n.replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase();return toKebabCase.cache.set(n,r),r}toKebabCase.cache=new Map;function findChildrenWithProvide(n,r){if(!r||typeof r!="object")return[];if(Array.isArray(r))return r.map(g=>findChildrenWithProvide(n,g)).flat(1);if(r.suspense)return findChildrenWithProvide(n,r.ssContent);if(Array.isArray(r.children))return r.children.map(g=>findChildrenWithProvide(n,g)).flat(1);if(r.component){if(Object.getOwnPropertySymbols(r.component.provides).includes(n))return[r.component];if(r.component.subTree)return findChildrenWithProvide(n,r.component.subTree).flat(1)}return[]}var _arr=new WeakMap,_pointer=new WeakMap;class CircularBuffer{constructor(r){_classPrivateFieldInitSpec(this,_arr,[]),_classPrivateFieldInitSpec(this,_pointer,0),this.size=r}push(r){_classPrivateFieldGet(_arr,this)[_classPrivateFieldGet(_pointer,this)]=r,_classPrivateFieldSet(_pointer,this,(_classPrivateFieldGet(_pointer,this)+1)%this.size)}values(){return _classPrivateFieldGet(_arr,this).slice(_classPrivateFieldGet(_pointer,this)).concat(_classPrivateFieldGet(_arr,this).slice(0,_classPrivateFieldGet(_pointer,this)))}}function destructComputed(n){const r=reactive({}),g=computed(n);return watchEffect(()=>{for(const _ in g.value)r[_]=g.value[_]},{flush:"sync"}),toRefs(r)}function includes(n,r){return n.includes(r)}function eventName(n){return n[2].toLowerCase()+n.slice(3)}const EventProp=()=>[Function,Array];function hasEvent(n,r){return r="on"+capitalize(r),!!(n[r]||n[`${r}Once`]||n[`${r}Capture`]||n[`${r}OnceCapture`]||n[`${r}CaptureOnce`])}function callEvent(n){for(var r=arguments.length,g=new Array(r>1?r-1:0),_=1;_<r;_++)g[_-1]=arguments[_];if(Array.isArray(n))for(const x of n)x(...g);else typeof n=="function"&&n(...g)}function focusableChildren(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const g=["button","[href]",'input:not([type="hidden"])',"select","textarea","[tabindex]"].map(_=>`${_}${r?':not([tabindex="-1"])':""}:not([disabled])`).join(", ");return[...n.querySelectorAll(g)]}function getNextElement(n,r,g){let _,x=n.indexOf(document.activeElement);const S=r==="next"?1:-1;do x+=S,_=n[x];while((!_||_.offsetParent==null||!(g?.(_)??!0))&&x<n.length&&x>=0);return _}function focusChild(n,r){const g=focusableChildren(n);if(!r)(n===document.activeElement||!n.contains(document.activeElement))&&g[0]?.focus();else if(r==="first")g[0]?.focus();else if(r==="last")g.at(-1)?.focus();else if(typeof r=="number")g[r]?.focus();else{const _=getNextElement(g,r);_?_.focus():focusChild(n,r==="next"?"first":"last")}}function isEmpty(n){return n==null||typeof n=="string"&&n.trim()===""}function noop$2(){}function matchesSelector(n,r){if(!(IN_BROWSER&&typeof CSS<"u"&&typeof CSS.supports<"u"&&CSS.supports(`selector(${r})`)))return null;try{return!!n&&n.matches(r)}catch{return null}}function ensureValidVNode(n){return n.some(r=>isVNode(r)?r.type===Comment?!1:r.type!==Fragment||ensureValidVNode(r.children):!0)?n:null}function defer(n,r){if(!IN_BROWSER||n===0)return r(),()=>{};const g=window.setTimeout(r,n);return()=>window.clearTimeout(g)}function isClickInsideElement(n,r){const g=n.clientX,_=n.clientY,x=r.getBoundingClientRect(),S=x.left,E=x.top,C=x.right,T=x.bottom;return g>=S&&g<=C&&_>=E&&_<=T}function templateRef(){const n=shallowRef(),r=g=>{n.value=g};return Object.defineProperty(r,"value",{enumerable:!0,get:()=>n.value,set:g=>n.value=g}),Object.defineProperty(r,"el",{enumerable:!0,get:()=>refElement(n.value)}),r}function checkPrintable(n){const r=n.key.length===1,g=!n.ctrlKey&&!n.metaKey&&!n.altKey;return r&&g}const block$2=["top","bottom"],inline$1=["start","end","left","right"];function parseAnchor(n,r){let[g,_]=n.split(" ");return _||(_=includes(block$2,g)?"start":includes(inline$1,g)?"top":"center"),{side:toPhysical(g,r),align:toPhysical(_,r)}}function toPhysical(n,r){return n==="start"?r?"right":"left":n==="end"?r?"left":"right":n}function flipSide(n){return{side:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[n.side],align:n.align}}function flipAlign(n){return{side:n.side,align:{center:"center",top:"bottom",bottom:"top",left:"right",right:"left"}[n.align]}}function flipCorner(n){return{side:n.align,align:n.side}}function getAxis(n){return includes(block$2,n.side)?"y":"x"}class Box{constructor(r){let{x:g,y:_,width:x,height:S}=r;this.x=g,this.y=_,this.width=x,this.height=S}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function getOverflow(n,r){return{x:{before:Math.max(0,r.left-n.left),after:Math.max(0,n.right-r.right)},y:{before:Math.max(0,r.top-n.top),after:Math.max(0,n.bottom-r.bottom)}}}function getTargetBox(n){return Array.isArray(n)?new Box({x:n[0],y:n[1],width:0,height:0}):n.getBoundingClientRect()}function nullifyTransforms(n){const r=n.getBoundingClientRect(),g=getComputedStyle(n),_=g.transform;if(_){let x,S,E,C,T;if(_.startsWith("matrix3d("))x=_.slice(9,-1).split(/, /),S=+x[0],E=+x[5],C=+x[12],T=+x[13];else if(_.startsWith("matrix("))x=_.slice(7,-1).split(/, /),S=+x[0],E=+x[3],C=+x[4],T=+x[5];else return new Box(r);const R=g.transformOrigin,A=r.x-C-(1-S)*parseFloat(R),I=r.y-T-(1-E)*parseFloat(R.slice(R.indexOf(" ")+1)),B=S?r.width/S:n.offsetWidth+1,D=E?r.height/E:n.offsetHeight+1;return new Box({x:A,y:I,width:B,height:D})}else return new Box(r)}function animate(n,r,g){if(typeof n.animate>"u")return{finished:Promise.resolve()};let _;try{_=n.animate(r,g)}catch{return{finished:Promise.resolve()}}return typeof _.finished>"u"&&(_.finished=new Promise(x=>{_.onfinish=()=>{x(_)}})),_}const handlers=new WeakMap;function bindProps(n,r){Object.keys(r).forEach(g=>{if(isOn(g)){const _=eventName(g),x=handlers.get(n);if(r[g]==null)x?.forEach(S=>{const[E,C]=S;E===_&&(n.removeEventListener(_,C),x.delete(S))});else if(!x||![...x].some(S=>S[0]===_&&S[1]===r[g])){n.addEventListener(_,r[g]);const S=x||new Set;S.add([_,r[g]]),handlers.has(n)||handlers.set(n,S)}}else r[g]==null?n.removeAttribute(g):n.setAttribute(g,r[g])})}function unbindProps(n,r){Object.keys(r).forEach(g=>{if(isOn(g)){const _=eventName(g),x=handlers.get(n);x?.forEach(S=>{const[E,C]=S;E===_&&(n.removeEventListener(_,C),x.delete(S))})}else n.removeAttribute(g)})}const mainTRC=2.4,Rco=.2126729,Gco=.7151522,Bco=.072175,normBG=.55,normTXT=.58,revTXT=.57,revBG=.62,blkThrs=.03,blkClmp=1.45,deltaYmin=5e-4,scaleBoW=1.25,scaleWoB=1.25,loConThresh=.078,loConFactor=12.82051282051282,loConOffset=.06,loClip=.001;function APCAcontrast(n,r){const g=(n.r/255)**mainTRC,_=(n.g/255)**mainTRC,x=(n.b/255)**mainTRC,S=(r.r/255)**mainTRC,E=(r.g/255)**mainTRC,C=(r.b/255)**mainTRC;let T=g*Rco+_*Gco+x*Bco,R=S*Rco+E*Gco+C*Bco;if(T<=blkThrs&&(T+=(blkThrs-T)**blkClmp),R<=blkThrs&&(R+=(blkThrs-R)**blkClmp),Math.abs(R-T)<deltaYmin)return 0;let A;if(R>T){const I=(R**normBG-T**normTXT)*scaleBoW;A=I<loClip?0:I<loConThresh?I-I*loConFactor*loConOffset:I-loConOffset}else{const I=(R**revBG-T**revTXT)*scaleWoB;A=I>-loClip?0:I>-loConThresh?I-I*loConFactor*loConOffset:I+loConOffset}return A*100}function consoleWarn(n){}function consoleError(n){}function deprecate(n,r){r=Array.isArray(r)?r.slice(0,-1).map(g=>`'${g}'`).join(", ")+` or '${r.at(-1)}'`:`'${r}'`}const delta$1=.20689655172413793,cielabForwardTransform=n=>n>delta$1**3?Math.cbrt(n):n/(3*delta$1**2)+4/29,cielabReverseTransform=n=>n>delta$1?n**3:3*delta$1**2*(n-4/29);function fromXYZ$1(n){const r=cielabForwardTransform,g=r(n[1]);return[116*g-16,500*(r(n[0]/.95047)-g),200*(g-r(n[2]/1.08883))]}function toXYZ$1(n){const r=cielabReverseTransform,g=(n[0]+16)/116;return[r(g+n[1]/500)*.95047,r(g),r(g-n[2]/200)*1.08883]}const srgbForwardMatrix=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],srgbForwardTransform=n=>n<=.0031308?n*12.92:1.055*n**(1/2.4)-.055,srgbReverseMatrix=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],srgbReverseTransform=n=>n<=.04045?n/12.92:((n+.055)/1.055)**2.4;function fromXYZ(n){const r=Array(3),g=srgbForwardTransform,_=srgbForwardMatrix;for(let x=0;x<3;++x)r[x]=Math.round(clamp(g(_[x][0]*n[0]+_[x][1]*n[1]+_[x][2]*n[2]))*255);return{r:r[0],g:r[1],b:r[2]}}function toXYZ(n){let{r,g,b:_}=n;const x=[0,0,0],S=srgbReverseTransform,E=srgbReverseMatrix;r=S(r/255),g=S(g/255),_=S(_/255);for(let C=0;C<3;++C)x[C]=E[C][0]*r+E[C][1]*g+E[C][2]*_;return x}function isCssColor(n){return!!n&&/^(#|var\(--|(rgb|hsl)a?\()/.test(n)}function isParsableColor(n){return isCssColor(n)&&!/^((rgb|hsl)a?\()?var\(--/.test(n)}const cssColorRe=/^(?<fn>(?:rgb|hsl)a?)\((?<values>.+)\)/,mappers={rgb:(n,r,g,_)=>({r:n,g:r,b:g,a:_}),rgba:(n,r,g,_)=>({r:n,g:r,b:g,a:_}),hsl:(n,r,g,_)=>HSLtoRGB({h:n,s:r,l:g,a:_}),hsla:(n,r,g,_)=>HSLtoRGB({h:n,s:r,l:g,a:_}),hsv:(n,r,g,_)=>HSVtoRGB({h:n,s:r,v:g,a:_}),hsva:(n,r,g,_)=>HSVtoRGB({h:n,s:r,v:g,a:_})};function parseColor(n){if(typeof n=="number")return{r:(n&16711680)>>16,g:(n&65280)>>8,b:n&255};if(typeof n=="string"&&cssColorRe.test(n)){const{groups:r}=n.match(cssColorRe),{fn:g,values:_}=r,x=_.split(/,\s*/).map(S=>S.endsWith("%")&&["hsl","hsla","hsv","hsva"].includes(g)?parseFloat(S)/100:parseFloat(S));return mappers[g](...x)}else if(typeof n=="string"){let r=n.startsWith("#")?n.slice(1):n;return[3,4].includes(r.length)?r=r.split("").map(g=>g+g).join(""):[6,8].includes(r.length),HexToRGB(r)}else if(typeof n=="object"){if(has(n,["r","g","b"]))return n;if(has(n,["h","s","l"]))return HSVtoRGB(HSLtoHSV(n));if(has(n,["h","s","v"]))return HSVtoRGB(n)}throw new TypeError(`Invalid color: ${n==null?n:String(n)||n.constructor.name}
Expected #hex, #hexa, rgb(), rgba(), hsl(), hsla(), object or number`)}function HSVtoRGB(n){const{h:r,s:g,v:_,a:x}=n,S=C=>{const T=(C+r/60)%6;return _-_*g*Math.max(Math.min(T,4-T,1),0)},E=[S(5),S(3),S(1)].map(C=>Math.round(C*255));return{r:E[0],g:E[1],b:E[2],a:x}}function HSLtoRGB(n){return HSVtoRGB(HSLtoHSV(n))}function HSLtoHSV(n){const{h:r,s:g,l:_,a:x}=n,S=_+g*Math.min(_,1-_),E=S===0?0:2-2*_/S;return{h:r,s:E,v:S,a:x}}function toHex(n){const r=Math.round(n).toString(16);return("00".substr(0,2-r.length)+r).toUpperCase()}function RGBtoHex(n){let{r,g,b:_,a:x}=n;return`#${[toHex(r),toHex(g),toHex(_),x!==void 0?toHex(Math.round(x*255)):""].join("")}`}function HexToRGB(n){n=parseHex(n);let[r,g,_,x]=chunk(n,2).map(S=>parseInt(S,16));return x=x===void 0?x:x/255,{r,g,b:_,a:x}}function parseHex(n){return n.startsWith("#")&&(n=n.slice(1)),n=n.replace(/([^0-9a-f])/gi,"F"),(n.length===3||n.length===4)&&(n=n.split("").map(r=>r+r).join("")),n.length!==6&&(n=padEnd(padEnd(n,6),8,"F")),n}function lighten(n,r){const g=fromXYZ$1(toXYZ(n));return g[0]=g[0]+r*10,fromXYZ(toXYZ$1(g))}function darken(n,r){const g=fromXYZ$1(toXYZ(n));return g[0]=g[0]-r*10,fromXYZ(toXYZ$1(g))}function getLuma(n){const r=parseColor(n);return toXYZ(r)[1]}function getForeground(n){const r=Math.abs(APCAcontrast(parseColor(0),parseColor(n)));return Math.abs(APCAcontrast(parseColor(16777215),parseColor(n)))>Math.min(r,50)?"#fff":"#000"}function propsFactory(n,r){return g=>Object.keys(n).reduce((_,x)=>{const E=typeof n[x]=="object"&&n[x]!=null&&!Array.isArray(n[x])?n[x]:{type:n[x]};return g&&x in g?_[x]={...E,default:g[x]}:_[x]=E,r&&!_[x].source&&(_[x].source=r),_},{})}const makeComponentProps=propsFactory({class:[String,Array,Object],style:{type:[String,Array,Object],default:null}},"component");function getCurrentInstance(n,r){const g=getCurrentInstance$1();if(!g)throw new Error(`[Vuetify] ${n} must be called from inside a setup function`);return g}function getCurrentInstanceName(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const r=getCurrentInstance(n).type;return toKebabCase(r?.aliasName||r?.name)}let _uid=0,_map=new WeakMap;function getUid(){const n=getCurrentInstance("getUid");if(_map.has(n))return _map.get(n);{const r=_uid++;return _map.set(n,r),r}}getUid.reset=()=>{_uid=0,_map=new WeakMap};function injectSelf(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstance("injectSelf");const{provides:g}=r;if(g&&n in g)return g[n]}const DefaultsSymbol=Symbol.for("vuetify:defaults");function createDefaults(n){return ref$2(n)}function injectDefaults(){const n=inject$1(DefaultsSymbol);if(!n)throw new Error("[Vuetify] Could not find defaults instance");return n}function provideDefaults(n,r){const g=injectDefaults(),_=ref$2(n),x=computed(()=>{if(unref(r?.disabled))return g.value;const E=unref(r?.scoped),C=unref(r?.reset),T=unref(r?.root);if(_.value==null&&!(E||C||T))return g.value;let R=mergeDeep(_.value,{prev:g.value});if(E)return R;if(C||T){const A=Number(C||1/0);for(let I=0;I<=A&&!(!R||!("prev"in R));I++)R=R.prev;return R&&typeof T=="string"&&T in R&&(R=mergeDeep(mergeDeep(R,{prev:R}),R[T])),R}return R.prev?mergeDeep(R.prev,R):R});return provide(DefaultsSymbol,x),x}function propIsDefined(n,r){return typeof n.props?.[r]<"u"||typeof n.props?.[toKebabCase(r)]<"u"}function internalUseDefaults(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:injectDefaults();const _=getCurrentInstance("useDefaults");if(r=r??_.type.name??_.type.__name,!r)throw new Error("[Vuetify] Could not determine component name");const x=computed(()=>g.value?.[n._as??r]),S=new Proxy(n,{get(T,R){const A=Reflect.get(T,R);return R==="class"||R==="style"?[x.value?.[R],A].filter(I=>I!=null):typeof R=="string"&&!propIsDefined(_.vnode,R)?x.value?.[R]!==void 0?x.value?.[R]:g.value?.global?.[R]!==void 0?g.value?.global?.[R]:A:A}}),E=shallowRef();watchEffect(()=>{if(x.value){const T=Object.entries(x.value).filter(R=>{let[A]=R;return A.startsWith(A[0].toUpperCase())});E.value=T.length?Object.fromEntries(T):void 0}else E.value=void 0});function C(){const T=injectSelf(DefaultsSymbol,_);provide(DefaultsSymbol,computed(()=>E.value?mergeDeep(T?.value??{},E.value):T?.value))}return{props:S,provideSubDefaults:C}}function defineComponent(n){if(n._setup=n._setup??n.setup,!n.name)return n;if(n._setup){n.props=propsFactory(n.props??{},n.name)();const r=Object.keys(n.props).filter(g=>g!=="class"&&g!=="style");n.filterProps=function(_){return pick(_,r)},n.props._as=String,n.setup=function(_,x){const S=injectDefaults();if(!S.value)return n._setup(_,x);const{props:E,provideSubDefaults:C}=internalUseDefaults(_,_._as??n.name,S),T=n._setup(E,x);return C(),T}}return n}function genericComponent(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return r=>(n?defineComponent:defineComponent$1)(r)}function defineFunctionalComponent(n,r){return r.props=n,r}function createSimpleFunctional(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",g=arguments.length>2?arguments[2]:void 0;return genericComponent()({name:g??capitalize(camelize(n.replace(/__/g,"-"))),props:{tag:{type:String,default:r},...makeComponentProps()},setup(_,x){let{slots:S}=x;return()=>h$2(_.tag,{class:[n,_.class],style:_.style},S.default?.())}})}function attachedRoot(n){if(typeof n.getRootNode!="function"){for(;n.parentNode;)n=n.parentNode;return n!==document?null:document}const r=n.getRootNode();return r!==document&&r.getRootNode({composed:!0})!==document?null:r}const standardEasing="cubic-bezier(0.4, 0, 0.2, 1)",deceleratedEasing="cubic-bezier(0.0, 0, 0.2, 1)",acceleratedEasing="cubic-bezier(0.4, 0, 1, 1)";function getScrollParent(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;n;){if(r?isPotentiallyScrollable(n):hasScrollbar(n))return n;n=n.parentElement}return document.scrollingElement}function getScrollParents(n,r){const g=[];if(r&&n&&!r.contains(n))return g;for(;n&&(hasScrollbar(n)&&g.push(n),n!==r);)n=n.parentElement;return g}function hasScrollbar(n){if(!n||n.nodeType!==Node.ELEMENT_NODE)return!1;const r=window.getComputedStyle(n);return r.overflowY==="scroll"||r.overflowY==="auto"&&n.scrollHeight>n.clientHeight}function isPotentiallyScrollable(n){if(!n||n.nodeType!==Node.ELEMENT_NODE)return!1;const r=window.getComputedStyle(n);return["scroll","auto"].includes(r.overflowY)}function isFixedPosition(n){for(;n;){if(window.getComputedStyle(n).position==="fixed")return!0;n=n.offsetParent}return!1}function useRender(n){const r=getCurrentInstance("useRender");r.render=n}function useProxiedModel(n,r,g){let _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:I=>I,x=arguments.length>4&&arguments[4]!==void 0?arguments[4]:I=>I;const S=getCurrentInstance("useProxiedModel"),E=ref$2(n[r]!==void 0?n[r]:g),C=toKebabCase(r),R=computed(C!==r?()=>(n[r],!!((S.vnode.props?.hasOwnProperty(r)||S.vnode.props?.hasOwnProperty(C))&&(S.vnode.props?.hasOwnProperty(`onUpdate:${r}`)||S.vnode.props?.hasOwnProperty(`onUpdate:${C}`)))):()=>(n[r],!!(S.vnode.props?.hasOwnProperty(r)&&S.vnode.props?.hasOwnProperty(`onUpdate:${r}`))));useToggleScope(()=>!R.value,()=>{watch(()=>n[r],I=>{E.value=I})});const A=computed({get(){const I=n[r];return _(R.value?I:E.value)},set(I){const B=x(I),D=toRaw(R.value?n[r]:E.value);D===B||_(D)===I||(E.value=B,S?.emit(`update:${r}`,B))}});return Object.defineProperty(A,"externalValue",{get:()=>R.value?n[r]:E.value}),A}const en$2={badge:"Badge",open:"Open",close:"Close",dismiss:"Dismiss",confirmEdit:{ok:"OK",cancel:"Cancel"},dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},dateRangeInput:{divider:"to"},datePicker:{itemsSelected:"{0} selected",range:{title:"Select dates",header:"Enter dates"},title:"Select date",header:"Enter date",input:{placeholder:"Enter date"}},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more",today:"Today"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action",otp:"Please enter OTP character {0}"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},fileUpload:{title:"Drag and drop files here",divider:"or",browse:"Browse Files"},timePicker:{am:"AM",pm:"PM",title:"Select Time"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Go to page {0}",currentPage:"Page {0}, Current page",first:"First page",last:"Last page"}},stepper:{next:"Next",prev:"Previous"},rating:{ariaLabel:{item:"Rating {0} of {1}"}},loading:"Loading...",infiniteScroll:{loadMore:"Load more",empty:"No more"}},LANG_PREFIX="$vuetify.",replace=(n,r)=>n.replace(/\{(\d+)\}/g,(g,_)=>String(r[+_])),createTranslateFunction=(n,r,g)=>function(_){for(var x=arguments.length,S=new Array(x>1?x-1:0),E=1;E<x;E++)S[E-1]=arguments[E];if(!_.startsWith(LANG_PREFIX))return replace(_,S);const C=_.replace(LANG_PREFIX,""),T=n.value&&g.value[n.value],R=r.value&&g.value[r.value];let A=getObjectValueByPath(T,C,null);return A||(`${_}${n.value}`,A=getObjectValueByPath(R,C,null)),A||(A=_),typeof A!="string"&&(A=_),replace(A,S)};function createNumberFunction(n,r){return(g,_)=>new Intl.NumberFormat([n.value,r.value],_).format(g)}function useProvided(n,r,g){const _=useProxiedModel(n,r,n[r]??g.value);return _.value=n[r]??g.value,watch(g,x=>{n[r]==null&&(_.value=g.value)}),_}function createProvideFunction(n){return r=>{const g=useProvided(r,"locale",n.current),_=useProvided(r,"fallback",n.fallback),x=useProvided(r,"messages",n.messages);return{name:"vuetify",current:g,fallback:_,messages:x,t:createTranslateFunction(g,_,x),n:createNumberFunction(g,_),provide:createProvideFunction({current:g,fallback:_,messages:x})}}}function createVuetifyAdapter(n){const r=shallowRef(n?.locale??"en"),g=shallowRef(n?.fallback??"en"),_=ref$2({en:en$2,...n?.messages});return{name:"vuetify",current:r,fallback:g,messages:_,t:createTranslateFunction(r,g,_),n:createNumberFunction(r,g),provide:createProvideFunction({current:r,fallback:g,messages:_})}}const LocaleSymbol=Symbol.for("vuetify:locale");function isLocaleInstance(n){return n.name!=null}function createLocale(n){const r=n?.adapter&&isLocaleInstance(n?.adapter)?n?.adapter:createVuetifyAdapter(n),g=createRtl(r,n);return{...r,...g}}function useLocale(){const n=inject$1(LocaleSymbol);if(!n)throw new Error("[Vuetify] Could not find injected locale instance");return n}function provideLocale(n){const r=inject$1(LocaleSymbol);if(!r)throw new Error("[Vuetify] Could not find injected locale instance");const g=r.provide(n),_=provideRtl(g,r.rtl,n),x={...g,..._};return provide(LocaleSymbol,x),x}function genDefaults$3(){return{af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!0,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,km:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1}}function createRtl(n,r){const g=ref$2(r?.rtl??genDefaults$3()),_=computed(()=>g.value[n.current.value]??!1);return{isRtl:_,rtl:g,rtlClasses:computed(()=>`v-locale--is-${_.value?"rtl":"ltr"}`)}}function provideRtl(n,r,g){const _=computed(()=>g.rtl??r.value[n.current.value]??!1);return{isRtl:_,rtl:r,rtlClasses:computed(()=>`v-locale--is-${_.value?"rtl":"ltr"}`)}}function useRtl(){const n=inject$1(LocaleSymbol);if(!n)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:n.isRtl,rtlClasses:n.rtlClasses}}const firstDay={"001":1,AD:1,AE:6,AF:6,AG:0,AI:1,AL:1,AM:1,AN:1,AR:1,AS:0,AT:1,AU:1,AX:1,AZ:1,BA:1,BD:0,BE:1,BG:1,BH:6,BM:1,BN:1,BR:0,BS:0,BT:0,BW:0,BY:1,BZ:0,CA:0,CH:1,CL:1,CM:1,CN:1,CO:0,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DM:0,DO:0,DZ:6,EC:1,EE:1,EG:6,ES:1,ET:0,FI:1,FJ:1,FO:1,FR:1,GB:1,"GB-alt-variant":0,GE:1,GF:1,GP:1,GR:1,GT:0,GU:0,HK:0,HN:0,HR:1,HU:1,ID:0,IE:1,IL:0,IN:0,IQ:6,IR:6,IS:1,IT:1,JM:0,JO:6,JP:0,KE:0,KG:1,KH:0,KR:0,KW:6,KZ:1,LA:0,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MH:0,MK:1,MM:0,MN:1,MO:0,MQ:1,MT:0,MV:5,MX:0,MY:1,MZ:0,NI:0,NL:1,NO:1,NP:0,NZ:1,OM:6,PA:0,PE:0,PH:0,PK:0,PL:1,PR:0,PT:0,PY:0,QA:6,RE:1,RO:1,RS:1,RU:1,SA:0,SD:6,SE:1,SG:0,SI:1,SK:1,SM:1,SV:0,SY:6,TH:0,TJ:1,TM:1,TR:1,TT:0,TW:0,UA:1,UM:0,US:0,UY:1,UZ:1,VA:1,VE:0,VI:0,VN:1,WS:0,XK:1,YE:0,ZA:0,ZW:0};function getWeekArray(n,r,g){const _=[];let x=[];const S=startOfMonth(n),E=endOfMonth(n),C=g??firstDay[r.slice(-2).toUpperCase()]??0,T=(S.getDay()-C+7)%7,R=(E.getDay()-C+7)%7;for(let A=0;A<T;A++){const I=new Date(S);I.setDate(I.getDate()-(T-A)),x.push(I)}for(let A=1;A<=E.getDate();A++){const I=new Date(n.getFullYear(),n.getMonth(),A);x.push(I),x.length===7&&(_.push(x),x=[])}for(let A=1;A<7-R;A++){const I=new Date(E);I.setDate(I.getDate()+A),x.push(I)}return x.length>0&&_.push(x),_}function startOfWeek(n,r,g){const _=g??firstDay[r.slice(-2).toUpperCase()]??0,x=new Date(n);for(;x.getDay()!==_;)x.setDate(x.getDate()-1);return x}function endOfWeek(n,r){const g=new Date(n),_=((firstDay[r.slice(-2).toUpperCase()]??0)+6)%7;for(;g.getDay()!==_;)g.setDate(g.getDate()+1);return g}function startOfMonth(n){return new Date(n.getFullYear(),n.getMonth(),1)}function endOfMonth(n){return new Date(n.getFullYear(),n.getMonth()+1,0)}function parseLocalDate(n){const r=n.split("-").map(Number);return new Date(r[0],r[1]-1,r[2])}const _YYYMMDD=/^([12]\d{3}-([1-9]|0[1-9]|1[0-2])-([1-9]|0[1-9]|[12]\d|3[01]))$/;function date(n){if(n==null)return new Date;if(n instanceof Date)return n;if(typeof n=="string"){let r;if(_YYYMMDD.test(n))return parseLocalDate(n);if(r=Date.parse(n),!isNaN(r))return new Date(r)}return null}const sundayJanuarySecond2000=new Date(2e3,0,2);function getWeekdays(n,r){const g=r??firstDay[n.slice(-2).toUpperCase()]??0;return createRange(7).map(_=>{const x=new Date(sundayJanuarySecond2000);return x.setDate(sundayJanuarySecond2000.getDate()+g+_),new Intl.DateTimeFormat(n,{weekday:"narrow"}).format(x)})}function format$1(n,r,g,_){const x=date(n)??new Date,S=_?.[r];if(typeof S=="function")return S(x,r,g);let E={};switch(r){case"fullDate":E={year:"numeric",month:"long",day:"numeric"};break;case"fullDateWithWeekday":E={weekday:"long",year:"numeric",month:"long",day:"numeric"};break;case"normalDate":const C=x.getDate(),T=new Intl.DateTimeFormat(g,{month:"long"}).format(x);return`${C} ${T}`;case"normalDateWithWeekday":E={weekday:"short",day:"numeric",month:"short"};break;case"shortDate":E={month:"short",day:"numeric"};break;case"year":E={year:"numeric"};break;case"month":E={month:"long"};break;case"monthShort":E={month:"short"};break;case"monthAndYear":E={month:"long",year:"numeric"};break;case"monthAndDate":E={month:"long",day:"numeric"};break;case"weekday":E={weekday:"long"};break;case"weekdayShort":E={weekday:"short"};break;case"dayOfMonth":return new Intl.NumberFormat(g).format(x.getDate());case"hours12h":E={hour:"numeric",hour12:!0};break;case"hours24h":E={hour:"numeric",hour12:!1};break;case"minutes":E={minute:"numeric"};break;case"seconds":E={second:"numeric"};break;case"fullTime":E={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime12h":E={hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullTime24h":E={hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"fullDateTime":E={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime12h":E={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"fullDateTime24h":E={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDate":E={year:"numeric",month:"2-digit",day:"2-digit"};break;case"keyboardDateTime":E={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;case"keyboardDateTime12h":E={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!0};break;case"keyboardDateTime24h":E={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1};break;default:E=S??{timeZone:"UTC",timeZoneName:"short"}}return new Intl.DateTimeFormat(g,E).format(x)}function toISO(n,r){const g=n.toJsDate(r),_=g.getFullYear(),x=padStart(String(g.getMonth()+1),2,"0"),S=padStart(String(g.getDate()),2,"0");return`${_}-${x}-${S}`}function parseISO(n){const[r,g,_]=n.split("-").map(Number);return new Date(r,g-1,_)}function addMinutes(n,r){const g=new Date(n);return g.setMinutes(g.getMinutes()+r),g}function addHours(n,r){const g=new Date(n);return g.setHours(g.getHours()+r),g}function addDays(n,r){const g=new Date(n);return g.setDate(g.getDate()+r),g}function addWeeks(n,r){const g=new Date(n);return g.setDate(g.getDate()+r*7),g}function addMonths(n,r){const g=new Date(n);return g.setDate(1),g.setMonth(g.getMonth()+r),g}function getYear(n){return n.getFullYear()}function getMonth(n){return n.getMonth()}function getDate(n){return n.getDate()}function getNextMonth(n){return new Date(n.getFullYear(),n.getMonth()+1,1)}function getPreviousMonth(n){return new Date(n.getFullYear(),n.getMonth()-1,1)}function getHours(n){return n.getHours()}function getMinutes(n){return n.getMinutes()}function startOfYear(n){return new Date(n.getFullYear(),0,1)}function endOfYear(n){return new Date(n.getFullYear(),11,31)}function isWithinRange(n,r){return isAfter(n,r[0])&&isBefore(n,r[1])}function isValid(n){const r=new Date(n);return r instanceof Date&&!isNaN(r.getTime())}function isAfter(n,r){return n.getTime()>r.getTime()}function isAfterDay(n,r){return isAfter(startOfDay(n),startOfDay(r))}function isBefore(n,r){return n.getTime()<r.getTime()}function isEqual(n,r){return n.getTime()===r.getTime()}function isSameDay(n,r){return n.getDate()===r.getDate()&&n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()}function isSameMonth(n,r){return n.getMonth()===r.getMonth()&&n.getFullYear()===r.getFullYear()}function isSameYear(n,r){return n.getFullYear()===r.getFullYear()}function getDiff(n,r,g){const _=new Date(n),x=new Date(r);switch(g){case"years":return _.getFullYear()-x.getFullYear();case"quarters":return Math.floor((_.getMonth()-x.getMonth()+(_.getFullYear()-x.getFullYear())*12)/4);case"months":return _.getMonth()-x.getMonth()+(_.getFullYear()-x.getFullYear())*12;case"weeks":return Math.floor((_.getTime()-x.getTime())/(1e3*60*60*24*7));case"days":return Math.floor((_.getTime()-x.getTime())/(1e3*60*60*24));case"hours":return Math.floor((_.getTime()-x.getTime())/(1e3*60*60));case"minutes":return Math.floor((_.getTime()-x.getTime())/(1e3*60));case"seconds":return Math.floor((_.getTime()-x.getTime())/1e3);default:return _.getTime()-x.getTime()}}function setHours(n,r){const g=new Date(n);return g.setHours(r),g}function setMinutes(n,r){const g=new Date(n);return g.setMinutes(r),g}function setMonth(n,r){const g=new Date(n);return g.setMonth(r),g}function setDate(n,r){const g=new Date(n);return g.setDate(r),g}function setYear(n,r){const g=new Date(n);return g.setFullYear(r),g}function startOfDay(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0)}function endOfDay(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59,999)}class VuetifyDateAdapter{constructor(r){this.locale=r.locale,this.formats=r.formats}date(r){return date(r)}toJsDate(r){return r}toISO(r){return toISO(this,r)}parseISO(r){return parseISO(r)}addMinutes(r,g){return addMinutes(r,g)}addHours(r,g){return addHours(r,g)}addDays(r,g){return addDays(r,g)}addWeeks(r,g){return addWeeks(r,g)}addMonths(r,g){return addMonths(r,g)}getWeekArray(r,g){return getWeekArray(r,this.locale,g?Number(g):void 0)}startOfWeek(r,g){return startOfWeek(r,this.locale,g?Number(g):void 0)}endOfWeek(r){return endOfWeek(r,this.locale)}startOfMonth(r){return startOfMonth(r)}endOfMonth(r){return endOfMonth(r)}format(r,g){return format$1(r,g,this.locale,this.formats)}isEqual(r,g){return isEqual(r,g)}isValid(r){return isValid(r)}isWithinRange(r,g){return isWithinRange(r,g)}isAfter(r,g){return isAfter(r,g)}isAfterDay(r,g){return isAfterDay(r,g)}isBefore(r,g){return!isAfter(r,g)&&!isEqual(r,g)}isSameDay(r,g){return isSameDay(r,g)}isSameMonth(r,g){return isSameMonth(r,g)}isSameYear(r,g){return isSameYear(r,g)}setMinutes(r,g){return setMinutes(r,g)}setHours(r,g){return setHours(r,g)}setMonth(r,g){return setMonth(r,g)}setDate(r,g){return setDate(r,g)}setYear(r,g){return setYear(r,g)}getDiff(r,g,_){return getDiff(r,g,_)}getWeekdays(r){return getWeekdays(this.locale,r?Number(r):void 0)}getYear(r){return getYear(r)}getMonth(r){return getMonth(r)}getDate(r){return getDate(r)}getNextMonth(r){return getNextMonth(r)}getPreviousMonth(r){return getPreviousMonth(r)}getHours(r){return getHours(r)}getMinutes(r){return getMinutes(r)}startOfDay(r){return startOfDay(r)}endOfDay(r){return endOfDay(r)}startOfYear(r){return startOfYear(r)}endOfYear(r){return endOfYear(r)}}const DateOptionsSymbol=Symbol.for("vuetify:date-options"),DateAdapterSymbol=Symbol.for("vuetify:date-adapter");function createDate(n,r){const g=mergeDeep({adapter:VuetifyDateAdapter,locale:{af:"af-ZA",bg:"bg-BG",ca:"ca-ES",ckb:"",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",et:"et-EE",fa:"fa-IR",fi:"fi-FI",hr:"hr-HR",hu:"hu-HU",he:"he-IL",id:"id-ID",it:"it-IT",ja:"ja-JP",ko:"ko-KR",lv:"lv-LV",lt:"lt-LT",nl:"nl-NL",no:"no-NO",pl:"pl-PL",pt:"pt-PT",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",srCyrl:"sr-SP",srLatn:"sr-SP",sv:"sv-SE",th:"th-TH",tr:"tr-TR",az:"az-AZ",uk:"uk-UA",vi:"vi-VN",zhHans:"zh-CN",zhHant:"zh-TW"}},n);return{options:g,instance:createInstance(g,r)}}function createInstance(n,r){const g=reactive(typeof n.adapter=="function"?new n.adapter({locale:n.locale[r.current.value]??r.current.value,formats:n.formats}):n.adapter);return watch(r.current,_=>{g.locale=n.locale[_]??_??g.locale}),g}const breakpoints=["sm","md","lg","xl","xxl"],DisplaySymbol=Symbol.for("vuetify:display"),defaultDisplayOptions={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},parseDisplayOptions=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDisplayOptions;return mergeDeep(defaultDisplayOptions,n)};function getClientWidth(n){return IN_BROWSER&&!n?window.innerWidth:typeof n=="object"&&n.clientWidth||0}function getClientHeight(n){return IN_BROWSER&&!n?window.innerHeight:typeof n=="object"&&n.clientHeight||0}function getPlatform(n){const r=IN_BROWSER&&!n?window.navigator.userAgent:"ssr";function g(N){return!!r.match(N)}const _=g(/android/i),x=g(/iphone|ipad|ipod/i),S=g(/cordova/i),E=g(/electron/i),C=g(/chrome/i),T=g(/edge/i),R=g(/firefox/i),A=g(/opera/i),I=g(/win/i),B=g(/mac/i),D=g(/linux/i);return{android:_,ios:x,cordova:S,electron:E,chrome:C,edge:T,firefox:R,opera:A,win:I,mac:B,linux:D,touch:SUPPORTS_TOUCH,ssr:r==="ssr"}}function createDisplay(n,r){const{thresholds:g,mobileBreakpoint:_}=parseDisplayOptions(n),x=shallowRef(getClientHeight(r)),S=shallowRef(getPlatform(r)),E=reactive({}),C=shallowRef(getClientWidth(r));function T(){x.value=getClientHeight(),C.value=getClientWidth()}function R(){T(),S.value=getPlatform()}return watchEffect(()=>{const A=C.value<g.sm,I=C.value<g.md&&!A,B=C.value<g.lg&&!(I||A),D=C.value<g.xl&&!(B||I||A),N=C.value<g.xxl&&!(D||B||I||A),M=C.value>=g.xxl,O=A?"xs":I?"sm":B?"md":D?"lg":N?"xl":"xxl",L=typeof _=="number"?_:g[_],F=C.value<L;E.xs=A,E.sm=I,E.md=B,E.lg=D,E.xl=N,E.xxl=M,E.smAndUp=!A,E.mdAndUp=!(A||I),E.lgAndUp=!(A||I||B),E.xlAndUp=!(A||I||B||D),E.smAndDown=!(B||D||N||M),E.mdAndDown=!(D||N||M),E.lgAndDown=!(N||M),E.xlAndDown=!M,E.name=O,E.height=x.value,E.width=C.value,E.mobile=F,E.mobileBreakpoint=_,E.platform=S.value,E.thresholds=g}),IN_BROWSER&&window.addEventListener("resize",T,{passive:!0}),{...toRefs(E),update:R,ssr:!!r}}const makeDisplayProps=propsFactory({mobile:{type:Boolean,default:!1},mobileBreakpoint:[Number,String]},"display");function useDisplay(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const g=inject$1(DisplaySymbol);if(!g)throw new Error("Could not find Vuetify display injection");const _=computed(()=>{if(n.mobile!=null)return n.mobile;if(!n.mobileBreakpoint)return g.mobile.value;const S=typeof n.mobileBreakpoint=="number"?n.mobileBreakpoint:g.thresholds.value[n.mobileBreakpoint];return g.width.value<S}),x=computed(()=>r?{[`${r}--mobile`]:_.value}:{});return{...g,displayClasses:x,mobile:_}}const GoToSymbol=Symbol.for("vuetify:goto");function genDefaults$2(){return{container:void 0,duration:300,layout:!1,offset:0,easing:"easeInOutCubic",patterns:{linear:n=>n,easeInQuad:n=>n**2,easeOutQuad:n=>n*(2-n),easeInOutQuad:n=>n<.5?2*n**2:-1+(4-2*n)*n,easeInCubic:n=>n**3,easeOutCubic:n=>--n**3+1,easeInOutCubic:n=>n<.5?4*n**3:(n-1)*(2*n-2)*(2*n-2)+1,easeInQuart:n=>n**4,easeOutQuart:n=>1- --n**4,easeInOutQuart:n=>n<.5?8*n**4:1-8*--n**4,easeInQuint:n=>n**5,easeOutQuint:n=>1+--n**5,easeInOutQuint:n=>n<.5?16*n**5:1+16*--n**5}}}function getContainer(n){return getTarget$1(n)??(document.scrollingElement||document.body)}function getTarget$1(n){return typeof n=="string"?document.querySelector(n):refElement(n)}function getOffset$1(n,r,g){if(typeof n=="number")return r&&g?-n:n;let _=getTarget$1(n),x=0;for(;_;)x+=r?_.offsetLeft:_.offsetTop,_=_.offsetParent;return x}function createGoTo(n,r){return{rtl:r.isRtl,options:mergeDeep(genDefaults$2(),n)}}async function scrollTo(n,r,g,_){const x=g?"scrollLeft":"scrollTop",S=mergeDeep(_?.options??genDefaults$2(),r),E=_?.rtl.value,C=(typeof n=="number"?n:getTarget$1(n))??0,T=S.container==="parent"&&C instanceof HTMLElement?C.parentElement:getContainer(S.container),R=typeof S.easing=="function"?S.easing:S.patterns[S.easing];if(!R)throw new TypeError(`Easing function "${S.easing}" not found.`);let A;if(typeof C=="number")A=getOffset$1(C,g,E);else if(A=getOffset$1(C,g,E)-getOffset$1(T,g,E),S.layout){const N=window.getComputedStyle(C).getPropertyValue("--v-layout-top");N&&(A-=parseInt(N,10))}A+=S.offset,A=clampTarget(T,A,!!E,!!g);const I=T[x]??0;if(A===I)return Promise.resolve(A);const B=performance.now();return new Promise(D=>requestAnimationFrame(function N(M){const L=(M-B)/S.duration,F=Math.floor(I+(A-I)*R(clamp(L,0,1)));if(T[x]=F,L>=1&&Math.abs(F-T[x])<10)return D(A);if(L>2)return D(T[x]);requestAnimationFrame(N)}))}function useGoTo(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=inject$1(GoToSymbol),{isRtl:g}=useRtl();if(!r)throw new Error("[Vuetify] Could not find injected goto instance");const _={...r,rtl:computed(()=>r.rtl.value||g.value)};async function x(S,E){return scrollTo(S,mergeDeep(n,E),!1,_)}return x.horizontal=async(S,E)=>scrollTo(S,mergeDeep(n,E),!0,_),x}function clampTarget(n,r,g,_){const{scrollWidth:x,scrollHeight:S}=n,[E,C]=n===document.scrollingElement?[window.innerWidth,window.innerHeight]:[n.offsetWidth,n.offsetHeight];let T,R;return _?g?(T=-(x-E),R=0):(T=0,R=x-E):(T=0,R=S+-C),Math.max(Math.min(r,R),T)}const aliases={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus",calendar:"mdi-calendar",treeviewCollapse:"mdi-menu-down",treeviewExpand:"mdi-menu-right",eyeDropper:"mdi-eyedropper",upload:"mdi-cloud-upload"},mdi={component:n=>h$2(VClassIcon,{...n,class:"mdi"})},IconValue=[String,Function,Object,Array],IconSymbol=Symbol.for("vuetify:icons"),makeIconProps=propsFactory({icon:{type:IconValue},tag:{type:String,required:!0}},"icon"),VComponentIcon=genericComponent()({name:"VComponentIcon",props:makeIconProps(),setup(n,r){let{slots:g}=r;return()=>{const _=n.icon;return createVNode(n.tag,null,{default:()=>[n.icon?createVNode(_,null,null):g.default?.()]})}}}),VSvgIcon=defineComponent({name:"VSvgIcon",inheritAttrs:!1,props:makeIconProps(),setup(n,r){let{attrs:g}=r;return()=>createVNode(n.tag,mergeProps(g,{style:null}),{default:()=>[createVNode("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[Array.isArray(n.icon)?n.icon.map(_=>Array.isArray(_)?createVNode("path",{d:_[0],"fill-opacity":_[1]},null):createVNode("path",{d:_},null)):createVNode("path",{d:n.icon},null)])]})}});defineComponent({name:"VLigatureIcon",props:makeIconProps(),setup(n){return()=>createVNode(n.tag,null,{default:()=>[n.icon]})}});const VClassIcon=defineComponent({name:"VClassIcon",props:makeIconProps(),setup(n){return()=>createVNode(n.tag,{class:n.icon},null)}});function genDefaults$1(){return{svg:{component:VSvgIcon},class:{component:VClassIcon}}}function createIcons(n){const r=genDefaults$1(),g=n?.defaultSet??"mdi";return g==="mdi"&&!r.mdi&&(r.mdi=mdi),mergeDeep({defaultSet:g,sets:r,aliases:{...aliases,vuetify:["M8.2241 14.2009L12 21L22 3H14.4459L8.2241 14.2009Z",["M7.26303 12.4733L7.00113 12L2 3H12.5261C12.5261 3 12.5261 3 12.5261 3L7.26303 12.4733Z",.6]],"vuetify-outline":"svg:M7.26 12.47 12.53 3H2L7.26 12.47ZM14.45 3 8.22 14.2 12 21 22 3H14.45ZM18.6 5 12 16.88 10.51 14.2 15.62 5ZM7.26 8.35 5.4 5H9.13L7.26 8.35Z","vuetify-play":["m6.376 13.184-4.11-7.192C1.505 4.66 2.467 3 4.003 3h8.532l-.953 1.576-.006.01-.396.677c-.429.732-.214 1.507.194 2.015.404.503 1.092.878 1.869.806a3.72 3.72 0 0 1 1.005.022c.276.053.434.143.523.237.138.146.38.635-.25 2.09-.893 1.63-1.553 1.722-1.847 1.677-.213-.033-.468-.158-.756-.406a4.95 4.95 0 0 1-.8-.927c-.39-.564-1.04-.84-1.66-.846-.625-.006-1.316.27-1.693.921l-.478.826-.911 1.506Z",["M9.093 11.552c.046-.079.144-.15.32-.148a.53.53 0 0 1 .43.207c.285.414.636.847 1.046 1.2.405.35.914.662 1.516.754 1.334.205 2.502-.698 3.48-2.495l.014-.028.013-.03c.687-1.574.774-2.852-.005-3.675-.37-.391-.861-.586-1.333-.676a5.243 5.243 0 0 0-1.447-.044c-.173.016-.393-.073-.54-.257-.145-.18-.127-.316-.082-.392l.393-.672L14.287 3h5.71c1.536 0 2.499 1.659 1.737 2.992l-7.997 13.996c-.768 1.344-2.706 1.344-3.473 0l-3.037-5.314 1.377-2.278.004-.006.004-.007.481-.831Z",.6]]}},n)}const useIcon=n=>{const r=inject$1(IconSymbol);if(!r)throw new Error("Missing Vuetify Icons provide!");return{iconData:computed(()=>{const _=unref(n);if(!_)return{component:VComponentIcon};let x=_;if(typeof x=="string"&&(x=x.trim(),x.startsWith("$")&&(x=r.aliases?.[x.slice(1)])),Array.isArray(x))return{component:VSvgIcon,icon:x};if(typeof x!="string")return{component:VComponentIcon,icon:x};const S=Object.keys(r.sets).find(T=>typeof x=="string"&&x.startsWith(`${T}:`)),E=S?x.slice(S.length+1):x;return{component:r.sets[S??r.defaultSet].component,icon:E}})}},ThemeSymbol=Symbol.for("vuetify:theme"),makeThemeProps=propsFactory({theme:String},"theme");function genDefaults(){return{defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-bright":"#FFFFFF","surface-light":"#EEEEEE","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#1867C0","primary-darken-1":"#1F5592",secondary:"#48A9A6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-bright":"#ccbfd6","surface-light":"#424242","surface-variant":"#a3a3a3","on-surface-variant":"#424242",primary:"#2196F3","primary-darken-1":"#277CC1",secondary:"#54B6B2","secondary-darken-1":"#48A9A6",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":1,"medium-emphasis-opacity":.7,"disabled-opacity":.5,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}}}function parseThemeOptions(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:genDefaults();const r=genDefaults();if(!n)return{...r,isDisabled:!0};const g={};for(const[_,x]of Object.entries(n.themes??{})){const S=x.dark||_==="dark"?r.themes?.dark:r.themes?.light;g[_]=mergeDeep(S,x)}return mergeDeep(r,{...n,themes:g})}function createTheme(n){const r=parseThemeOptions(n),g=ref$2(r.defaultTheme),_=ref$2(r.themes),x=computed(()=>{const A={};for(const[I,B]of Object.entries(_.value)){const D=A[I]={...B,colors:{...B.colors}};if(r.variations)for(const N of r.variations.colors){const M=D.colors[N];if(M)for(const O of["lighten","darken"]){const L=O==="lighten"?lighten:darken;for(const F of createRange(r.variations[O],1))D.colors[`${N}-${O}-${F}`]=RGBtoHex(L(parseColor(M),F))}}for(const N of Object.keys(D.colors)){if(/^on-[a-z]/.test(N)||D.colors[`on-${N}`])continue;const M=`on-${N}`,O=parseColor(D.colors[N]);D.colors[M]=getForeground(O)}}return A}),S=computed(()=>x.value[g.value]),E=computed(()=>{const A=[];S.value?.dark&&createCssClass(A,":root",["color-scheme: dark"]),createCssClass(A,":root",genCssVariables(S.value));for(const[N,M]of Object.entries(x.value))createCssClass(A,`.v-theme--${N}`,[`color-scheme: ${M.dark?"dark":"normal"}`,...genCssVariables(M)]);const I=[],B=[],D=new Set(Object.values(x.value).flatMap(N=>Object.keys(N.colors)));for(const N of D)/^on-[a-z]/.test(N)?createCssClass(B,`.${N}`,[`color: rgb(var(--v-theme-${N})) !important`]):(createCssClass(I,`.bg-${N}`,[`--v-theme-overlay-multiplier: var(--v-theme-${N}-overlay-multiplier)`,`background-color: rgb(var(--v-theme-${N})) !important`,`color: rgb(var(--v-theme-on-${N})) !important`]),createCssClass(B,`.text-${N}`,[`color: rgb(var(--v-theme-${N})) !important`]),createCssClass(B,`.border-${N}`,[`--v-border-color: var(--v-theme-${N})`]));return A.push(...I,...B),A.map((N,M)=>M===0?N:`    ${N}`).join("")});function C(){return{style:[{children:E.value,id:"vuetify-theme-stylesheet",nonce:r.cspNonce||!1}]}}function T(A){if(r.isDisabled)return;const I=A._context.provides.usehead;if(I)if(I.push){const B=I.push(C);IN_BROWSER&&watch(E,()=>{B.patch(C)})}else IN_BROWSER?(I.addHeadObjs(computed(C)),watchEffect(()=>I.updateDOM())):I.addHeadObjs(C());else{let D=function(){if(typeof document<"u"&&!B){const N=document.createElement("style");N.type="text/css",N.id="vuetify-theme-stylesheet",r.cspNonce&&N.setAttribute("nonce",r.cspNonce),B=N,document.head.appendChild(B)}B&&(B.innerHTML=E.value)},B=IN_BROWSER?document.getElementById("vuetify-theme-stylesheet"):null;IN_BROWSER?watch(E,D,{immediate:!0}):D()}}const R=computed(()=>r.isDisabled?void 0:`v-theme--${g.value}`);return{install:T,isDisabled:r.isDisabled,name:g,themes:_,current:S,computedThemes:x,themeClasses:R,styles:E,global:{name:g,current:S}}}function provideTheme(n){getCurrentInstance("provideTheme");const r=inject$1(ThemeSymbol,null);if(!r)throw new Error("Could not find Vuetify theme injection");const g=computed(()=>n.theme??r.name.value),_=computed(()=>r.themes.value[g.value]),x=computed(()=>r.isDisabled?void 0:`v-theme--${g.value}`),S={...r,name:g,current:_,themeClasses:x};return provide(ThemeSymbol,S),S}function useTheme(){getCurrentInstance("useTheme");const n=inject$1(ThemeSymbol,null);if(!n)throw new Error("Could not find Vuetify theme injection");return n}function createCssClass(n,r,g){n.push(`${r} {
`,...g.map(_=>`  ${_};
`),`}
`)}function genCssVariables(n){const r=n.dark?2:1,g=n.dark?1:2,_=[];for(const[x,S]of Object.entries(n.colors)){const E=parseColor(S);_.push(`--v-theme-${x}: ${E.r},${E.g},${E.b}`),x.startsWith("on-")||_.push(`--v-theme-${x}-overlay-multiplier: ${getLuma(S)>.18?r:g}`)}for(const[x,S]of Object.entries(n.variables)){const E=typeof S=="string"&&S.startsWith("#")?parseColor(S):void 0,C=E?`${E.r}, ${E.g}, ${E.b}`:void 0;_.push(`--v-${x}: ${C??S}`)}return _}function useResizeObserver(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"content";const g=templateRef(),_=ref$2();if(IN_BROWSER){const x=new ResizeObserver(S=>{n?.(S,x),S.length&&(r==="content"?_.value=S[0].contentRect:_.value=S[0].target.getBoundingClientRect())});onBeforeUnmount(()=>{x.disconnect()}),watch(()=>g.el,(S,E)=>{E&&(x.unobserve(E),_.value=void 0),S&&x.observe(S)},{flush:"post"})}return{resizeRef:g,contentRect:readonly$2(_)}}const VuetifyLayoutKey=Symbol.for("vuetify:layout"),VuetifyLayoutItemKey=Symbol.for("vuetify:layout-item"),ROOT_ZINDEX=1e3,makeLayoutProps=propsFactory({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),makeLayoutItemProps=propsFactory({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function useLayout(){const n=inject$1(VuetifyLayoutKey);if(!n)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:n.getLayoutItem,mainRect:n.mainRect,mainStyles:n.mainStyles}}function useLayoutItem(n){const r=inject$1(VuetifyLayoutKey);if(!r)throw new Error("[Vuetify] Could not find injected layout");const g=n.id??`layout-item-${getUid()}`,_=getCurrentInstance("useLayoutItem");provide(VuetifyLayoutItemKey,{id:g});const x=shallowRef(!1);onDeactivated(()=>x.value=!0),onActivated(()=>x.value=!1);const{layoutItemStyles:S,layoutItemScrimStyles:E}=r.register(_,{...n,active:computed(()=>x.value?!1:n.active.value),id:g});return onBeforeUnmount(()=>r.unregister(g)),{layoutItemStyles:S,layoutRect:r.layoutRect,layoutItemScrimStyles:E}}const generateLayers=(n,r,g,_)=>{let x={top:0,left:0,right:0,bottom:0};const S=[{id:"",layer:{...x}}];for(const E of n){const C=r.get(E),T=g.get(E),R=_.get(E);if(!C||!T||!R)continue;const A={...x,[C.value]:parseInt(x[C.value],10)+(R.value?parseInt(T.value,10):0)};S.push({id:E,layer:A}),x=A}return S};function createLayout(n){const r=inject$1(VuetifyLayoutKey,null),g=computed(()=>r?r.rootZIndex.value-100:ROOT_ZINDEX),_=ref$2([]),x=reactive(new Map),S=reactive(new Map),E=reactive(new Map),C=reactive(new Map),T=reactive(new Map),{resizeRef:R,contentRect:A}=useResizeObserver(),I=computed(()=>{const W=new Map,X=n.overlaps??[];for(const ie of X.filter(fe=>fe.includes(":"))){const[fe,xe]=ie.split(":");if(!_.value.includes(fe)||!_.value.includes(xe))continue;const we=x.get(fe),G=x.get(xe),J=S.get(fe),q=S.get(xe);!we||!G||!J||!q||(W.set(xe,{position:we.value,amount:parseInt(J.value,10)}),W.set(fe,{position:G.value,amount:-parseInt(q.value,10)}))}return W}),B=computed(()=>{const W=[...new Set([...E.values()].map(ie=>ie.value))].sort((ie,fe)=>ie-fe),X=[];for(const ie of W){const fe=_.value.filter(xe=>E.get(xe)?.value===ie);X.push(...fe)}return generateLayers(X,x,S,C)}),D=computed(()=>!Array.from(T.values()).some(W=>W.value)),N=computed(()=>B.value[B.value.length-1].layer),M=computed(()=>({"--v-layout-left":convertToUnit(N.value.left),"--v-layout-right":convertToUnit(N.value.right),"--v-layout-top":convertToUnit(N.value.top),"--v-layout-bottom":convertToUnit(N.value.bottom),...D.value?void 0:{transition:"none"}})),O=computed(()=>B.value.slice(1).map((W,X)=>{let{id:ie}=W;const{layer:fe}=B.value[X],xe=S.get(ie),we=x.get(ie);return{id:ie,...fe,size:Number(xe.value),position:we.value}})),L=W=>O.value.find(X=>X.id===W),F=getCurrentInstance("createLayout"),U=shallowRef(!1);onMounted(()=>{U.value=!0}),provide(VuetifyLayoutKey,{register:(W,X)=>{let{id:ie,order:fe,position:xe,layoutSize:we,elementSize:G,active:J,disableTransitions:q,absolute:H}=X;E.set(ie,fe),x.set(ie,xe),S.set(ie,we),C.set(ie,J),q&&T.set(ie,q);const Z=findChildrenWithProvide(VuetifyLayoutItemKey,F?.vnode).indexOf(W);Z>-1?_.value.splice(Z,0,ie):_.value.push(ie);const ce=computed(()=>O.value.findIndex(Y=>Y.id===ie)),ue=computed(()=>g.value+B.value.length*2-ce.value*2),se=computed(()=>{const Y=xe.value==="left"||xe.value==="right",be=xe.value==="right",ye=xe.value==="bottom",Ie=G.value??we.value,ke=Ie===0?"%":"px",Ce={[xe.value]:0,zIndex:ue.value,transform:`translate${Y?"X":"Y"}(${(J.value?0:-(Ie===0?100:Ie))*(be||ye?-1:1)}${ke})`,position:H.value||g.value!==ROOT_ZINDEX?"absolute":"fixed",...D.value?void 0:{transition:"none"}};if(!U.value)return Ce;const Ae=O.value[ce.value];if(!Ae)throw new Error(`[Vuetify] Could not find layout item "${ie}"`);const Ne=I.value.get(ie);return Ne&&(Ae[Ne.position]+=Ne.amount),{...Ce,height:Y?`calc(100% - ${Ae.top}px - ${Ae.bottom}px)`:G.value?`${G.value}px`:void 0,left:be?void 0:`${Ae.left}px`,right:be?`${Ae.right}px`:void 0,top:xe.value!=="bottom"?`${Ae.top}px`:void 0,bottom:xe.value!=="top"?`${Ae.bottom}px`:void 0,width:Y?G.value?`${G.value}px`:void 0:`calc(100% - ${Ae.left}px - ${Ae.right}px)`}}),te=computed(()=>({zIndex:ue.value-1}));return{layoutItemStyles:se,layoutItemScrimStyles:te,zIndex:ue}},unregister:W=>{E.delete(W),x.delete(W),S.delete(W),C.delete(W),T.delete(W),_.value=_.value.filter(X=>X!==W)},mainRect:N,mainStyles:M,getLayoutItem:L,items:O,layoutRect:A,rootZIndex:g});const j=computed(()=>["v-layout",{"v-layout--full-height":n.fullHeight}]),z=computed(()=>({zIndex:r?g.value:void 0,position:r?"relative":void 0,overflow:r?"hidden":void 0}));return{layoutClasses:j,layoutStyles:z,getLayoutItem:L,items:O,layoutRect:A,layoutRef:R}}function createVuetify(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:r,...g}=n,_=mergeDeep(r,g),{aliases:x={},components:S={},directives:E={}}=_,C=createDefaults(_.defaults),T=createDisplay(_.display,_.ssr),R=createTheme(_.theme),A=createIcons(_.icons),I=createLocale(_.locale),B=createDate(_.date,I),D=createGoTo(_.goTo,I);return{install:M=>{for(const O in E)M.directive(O,E[O]);for(const O in S)M.component(O,S[O]);for(const O in x)M.component(O,defineComponent({...x[O],name:O,aliasName:x[O].name}));if(R.install(M),M.provide(DefaultsSymbol,C),M.provide(DisplaySymbol,T),M.provide(ThemeSymbol,R),M.provide(IconSymbol,A),M.provide(LocaleSymbol,I),M.provide(DateOptionsSymbol,B.options),M.provide(DateAdapterSymbol,B.instance),M.provide(GoToSymbol,D),IN_BROWSER&&_.ssr)if(M.$nuxt)M.$nuxt.hook("app:suspense:resolve",()=>{T.update()});else{const{mount:O}=M;M.mount=function(){const L=O(...arguments);return nextTick$1(()=>T.update()),M.mount=O,L}}getUid.reset(),M.mixin({computed:{$vuetify(){return reactive({defaults:inject.call(this,DefaultsSymbol),display:inject.call(this,DisplaySymbol),theme:inject.call(this,ThemeSymbol),icons:inject.call(this,IconSymbol),locale:inject.call(this,LocaleSymbol),date:inject.call(this,DateAdapterSymbol)})}}})},defaults:C,display:T,theme:R,icons:A,locale:I,date:B,goTo:D}}const version="3.7.7";createVuetify.version=version;function inject(n){const r=this.$,g=r.parent?.provides??r.vnode.appContext?.provides;if(g&&n in g)return g[n]}const vuetify=createVuetify({theme:{themes:{light:{colors:{primary:"#1867c0",secondary:"#7bc6ff"}}}}});async function loadFonts(){(await __vitePreload(()=>import("./webfontloader-B51hgXmU.js").then(r=>r.w),[],import.meta.url)).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}let getRandomValues$1;const rnds8$1=new Uint8Array(16);function rng$1(){if(!getRandomValues$1&&(getRandomValues$1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues$1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues$1(rnds8$1)}const byteToHex$1=[];for(let n=0;n<256;++n)byteToHex$1.push((n+256).toString(16).slice(1));function unsafeStringify$1(n,r=0){return byteToHex$1[n[r+0]]+byteToHex$1[n[r+1]]+byteToHex$1[n[r+2]]+byteToHex$1[n[r+3]]+"-"+byteToHex$1[n[r+4]]+byteToHex$1[n[r+5]]+"-"+byteToHex$1[n[r+6]]+byteToHex$1[n[r+7]]+"-"+byteToHex$1[n[r+8]]+byteToHex$1[n[r+9]]+"-"+byteToHex$1[n[r+10]]+byteToHex$1[n[r+11]]+byteToHex$1[n[r+12]]+byteToHex$1[n[r+13]]+byteToHex$1[n[r+14]]+byteToHex$1[n[r+15]]}const randomUUID$1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native$2={randomUUID:randomUUID$1};function v4$1(n,r,g){if(native$2.randomUUID&&!r&&!n)return native$2.randomUUID();n=n||{};const _=n.random||(n.rng||rng$1)();return _[6]=_[6]&15|64,_[8]=_[8]&63|128,unsafeStringify$1(_)}function coerce(n){if(n instanceof Uint8Array&&n.constructor.name==="Uint8Array")return n;if(n instanceof ArrayBuffer)return new Uint8Array(n);if(ArrayBuffer.isView(n))return new Uint8Array(n.buffer,n.byteOffset,n.byteLength);throw new Error("Unknown type, must be binary type")}function base(n,r){if(n.length>=255)throw new TypeError("Alphabet too long");for(var g=new Uint8Array(256),_=0;_<g.length;_++)g[_]=255;for(var x=0;x<n.length;x++){var S=n.charAt(x),E=S.charCodeAt(0);if(g[E]!==255)throw new TypeError(S+" is ambiguous");g[E]=x}var C=n.length,T=n.charAt(0),R=Math.log(C)/Math.log(256),A=Math.log(256)/Math.log(C);function I(N){if(N instanceof Uint8Array||(ArrayBuffer.isView(N)?N=new Uint8Array(N.buffer,N.byteOffset,N.byteLength):Array.isArray(N)&&(N=Uint8Array.from(N))),!(N instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(N.length===0)return"";for(var M=0,O=0,L=0,F=N.length;L!==F&&N[L]===0;)L++,M++;for(var U=(F-L)*A+1>>>0,j=new Uint8Array(U);L!==F;){for(var z=N[L],W=0,X=U-1;(z!==0||W<O)&&X!==-1;X--,W++)z+=256*j[X]>>>0,j[X]=z%C>>>0,z=z/C>>>0;if(z!==0)throw new Error("Non-zero carry");O=W,L++}for(var ie=U-O;ie!==U&&j[ie]===0;)ie++;for(var fe=T.repeat(M);ie<U;++ie)fe+=n.charAt(j[ie]);return fe}function B(N){if(typeof N!="string")throw new TypeError("Expected String");if(N.length===0)return new Uint8Array;var M=0;if(N[M]!==" "){for(var O=0,L=0;N[M]===T;)O++,M++;for(var F=(N.length-M)*R+1>>>0,U=new Uint8Array(F);N[M];){var j=g[N.charCodeAt(M)];if(j===255)return;for(var z=0,W=F-1;(j!==0||z<L)&&W!==-1;W--,z++)j+=C*U[W]>>>0,U[W]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");L=z,M++}if(N[M]!==" "){for(var X=F-L;X!==F&&U[X]===0;)X++;for(var ie=new Uint8Array(O+(F-X)),fe=O;X!==F;)ie[fe++]=U[X++];return ie}}}function D(N){var M=B(N);if(M)return M;throw new Error(`Non-${r} character`)}return{encode:I,decodeUnsafe:B,decode:D}}var src=base,_brrp__multiformats_scope_baseX=src;class Encoder{name;prefix;baseEncode;constructor(r,g,_){this.name=r,this.prefix=g,this.baseEncode=_}encode(r){if(r instanceof Uint8Array)return`${this.prefix}${this.baseEncode(r)}`;throw Error("Unknown type, must be binary type")}}class Decoder{name;prefix;baseDecode;prefixCodePoint;constructor(r,g,_){if(this.name=r,this.prefix=g,g.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=g.codePointAt(0),this.baseDecode=_}decode(r){if(typeof r=="string"){if(r.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(r)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(r.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(r){return or$1(this,r)}}class ComposedDecoder{decoders;constructor(r){this.decoders=r}or(r){return or$1(this,r)}decode(r){const g=r[0],_=this.decoders[g];if(_!=null)return _.decode(r);throw RangeError(`Unable to decode multibase string ${JSON.stringify(r)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function or$1(n,r){return new ComposedDecoder({...n.decoders??{[n.prefix]:n},...r.decoders??{[r.prefix]:r}})}class Codec{name;prefix;baseEncode;baseDecode;encoder;decoder;constructor(r,g,_,x){this.name=r,this.prefix=g,this.baseEncode=_,this.baseDecode=x,this.encoder=new Encoder(r,g,_),this.decoder=new Decoder(r,g,x)}encode(r){return this.encoder.encode(r)}decode(r){return this.decoder.decode(r)}}function from({name:n,prefix:r,encode:g,decode:_}){return new Codec(n,r,g,_)}function baseX({name:n,prefix:r,alphabet:g}){const{encode:_,decode:x}=_brrp__multiformats_scope_baseX(g,n);return from({prefix:r,name:n,encode:_,decode:S=>coerce(x(S))})}function decode$1(n,r,g,_){const x={};for(let A=0;A<r.length;++A)x[r[A]]=A;let S=n.length;for(;n[S-1]==="=";)--S;const E=new Uint8Array(S*g/8|0);let C=0,T=0,R=0;for(let A=0;A<S;++A){const I=x[n[A]];if(I===void 0)throw new SyntaxError(`Non-${_} character`);T=T<<g|I,C+=g,C>=8&&(C-=8,E[R++]=255&T>>C)}if(C>=g||255&T<<8-C)throw new SyntaxError("Unexpected end of data");return E}function encode(n,r,g){const _=r[r.length-1]==="=",x=(1<<g)-1;let S="",E=0,C=0;for(let T=0;T<n.length;++T)for(C=C<<8|n[T],E+=8;E>g;)E-=g,S+=r[x&C>>E];if(E!==0&&(S+=r[x&C<<g-E]),_)for(;S.length*g&7;)S+="=";return S}function rfc4648({name:n,prefix:r,bitsPerChar:g,alphabet:_}){return from({prefix:r,name:n,encode(x){return encode(x,_,g)},decode(x){return decode$1(x,_,g,n)}})}rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});let ÉmetteurUneFois$1=class extends eventsExports.EventEmitter{condition;résultatPrêt;fOublier;résultat;f;constructor(r,g){super(),this.condition=g||(()=>!0),this.résultatPrêt=!1,this.f=r,this.initialiser()}async initialiser(){const r=async g=>{await this.condition(g)&&(this.résultat=g,this.résultatPrêt=!0,this.fOublier&&this.lorsquePrêt())};this.fOublier=await this.f(r),this.lorsquePrêt()}lorsquePrêt(){if(this.résultatPrêt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.résultat)}}};const uneFois$1=async function(n,r){const g=new ÉmetteurUneFois$1(n,r);return(await eventsExports.once(g,"fini"))[0]},faisRien=async()=>{},attendreStabilité=n=>{let r=!1,g,_=faisRien;return x=>new Promise(S=>{if(r&&JSON.stringify(x)===g)return;r=!0,_(),g=JSON.stringify(x);const E=setTimeout(()=>S(!0),n);_=()=>{clearTimeout(E),S(!1)}})};class ÉmetteurUneFois extends eventsExports.EventEmitter{condition;résultatPrêt;fOublier;résultat;f;constructor(r,g){super(),this.condition=g||(()=>!0),this.résultatPrêt=!1,this.f=r,this.initialiser()}async initialiser(){const r=async g=>{await this.condition(g)&&(this.résultat=g,this.résultatPrêt=!0,this.fOublier&&this.lorsquePrêt())};this.fOublier=await this.f(r),this.lorsquePrêt()}lorsquePrêt(){if(this.résultatPrêt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.résultat)}}}const suivreBdDeFonction=async({fRacine:n,f:r,fSuivre:g})=>{let _,x,S=!0;const E=await n({fSuivreRacine:async C=>{C===void 0&&S&&(S=!1,await r(void 0)),C!==x&&(x=C,_&&await _(),x?_=await g({id:x,fSuivreBd:r}):(await r(void 0),_=void 0))}});return async()=>{await E(),_&&await _()}},uneFois=async function(n,r){const g=new ÉmetteurUneFois(n,r);return(await eventsExports.once(g,"fini"))[0]},ignorerNonDéfinis=n=>async r=>{if(r!==void 0)return await n(r)},suivreBdsDeFonctionListe=async({fListe:n,f:r,fBranche:g,fIdBdDeBranche:_=E=>E,fRéduction:x=E=>[...new Set(E.flat())],fCode:S=E=>E})=>{const E={},C={};let T=!1;const R=async()=>{if(!T||Object.values(E).length&&Object.values(E).every(L=>!L.déjàÉvaluée))return;const M=Object.values(E).map(L=>L.données).filter(L=>L!==void 0),O=x(M);await r(O)},A=new s$2,B=await n(async M=>{if(await A.acquire("racine"),M.some(z=>typeof S(z)!="string"))throw console.error("Définir fCode si les éléments ne sont pas en format texte (chaînes)."),new Error("Définir fCode si les éléments ne sont pas en format texte (chaînes).");const O=Object.fromEntries(M.map(z=>[S(z),z])),L=Object.keys(E);let F=Object.keys(O).filter(z=>!L.includes(z));const U=L.filter(z=>!Object.keys(O).includes(z)),j=Object.entries(O).filter(z=>!deepEqual$2(C[z[0]],z[1])).map(z=>z[0]);F.push(...j),F=[...new Set(F)],await Promise.all(j.map(async z=>{if(E[z]){const W=E[z].fOublier;W&&await W(),delete E[z]}})),await Promise.all(U.map(async z=>{const W=E[z].fOublier;W&&await W(),delete E[z]})),await Promise.all(F.map(async z=>{E[z]={déjàÉvaluée:!1};const W=O[z];C[z]=W;const X=_(W),fe=await g(X,async xe=>{E[z].données=xe,E[z].déjàÉvaluée=!0,await R()},W);E[z].fOublier=fe})),T=!0,await R(),A.release("racine")});let D;const N=async()=>{await D(),await Promise.all(Object.values(E).map(M=>M.fOublier&&M.fOublier()))};return typeof B=="function"?(D=B,N):(D=B.fOublier,Object.assign({},B,{fOublier:N}))},அங்கீகார_தத_மீதரவு_சாபி$1="அங்கீகறிக்கப்பட்ட தரவுகள்",பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்$1="பங்கேற்பாளர்",பங்கேற்பாளர்_மாறி_அடையாளம்$1="/orbitdb/zdpuAunUaEc6CRX8wAjNixNioB6hF5SYvwJytx4ynm5wQx1vH",தேதி_நெடுவரிசை_அடையாளம்$1="தேதி",தேதி_மாறி_அடையாளம்$1="/orbitdb/zdpuAkz4jAZW5EM3rK7huQoZAE6L26dtpoVd4UYGGyaQkDmTx",மாறிலிகள்$1={அங்கீகார_தத_மீதரவு_சாபி:அங்கீகார_தத_மீதரவு_சாபி$1,பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்:பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்$1,பங்கேற்பாளர்_மாறி_அடையாளம்:பங்கேற்பாளர்_மாறி_அடையாளம்$1,தேதி_நெடுவரிசை_அடையாளம்:தேதி_நெடுவரிசை_அடையாளம்$1,தேதி_மாறி_அடையாளம்:தேதி_மாறி_அடையாளம்$1},குறியீட்டு_இல்லாமல்_வார்ப்புரு$1=n=>(n=deepcopy(n),n.tableaux=n.tableaux.map(r=>({clef:r.clef,cols:r.cols.map(g=>({idColonne:g.idColonne,idVariable:g.idVariable,optionnelle:g.optionnelle}))})),n);let கிளி$1=class fs{விண்மீன்;அட்டவணை_சாபி;குழு_அடையாளம்;வார்ப்புரு;மாறிலிகள்;constructor({விண்மீன்:r,அட்டவணை_சாபி:g,குழு_அடையாளம்:_,வார்ப்புரு:x,மாறிலிகள்:S}){this.விண்மீன்=r,this.அட்டவணை_சாபி=g,this.குழு_அடையாளம்=_,x=fs.வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:x,அட்டவணை_சாபி:g,குழு_அடையாளம்:_,மாறிலிகள்:S}),this.வார்ப்புரு=குறியீட்டு_இல்லாமல்_வார்ப்புரு$1(x),this.மாறிலிகள்=Object.assign({},மாறிலிகள்$1,S)}static வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:r,அட்டவணை_சாபி:g,குழு_அடையாளம்:_,மாறிலிகள்:x}){const S=deepcopy(r),E=S.tableaux.find(T=>T.clef===g);if(!E)throw new Error("அட்டவணை சாபி அட்டவணை வார்ப்புரில் கிடைத்ததில்லை.");return E.cols.find(T=>T.idColonne===(x?.தேதி_நெடுவரிசை_அடையாளம்||தேதி_நெடுவரிசை_அடையாளம்$1))||(E.cols.push({idVariable:x?.தேதி_மாறி_அடையாளம்||தேதி_மாறி_அடையாளம்$1,idColonne:x?.தேதி_நெடுவரிசை_அடையாளம்||தேதி_நெடுவரிசை_அடையாளம்$1}),S.tableaux=S.tableaux.map(T=>T.clef===g?E:T)),S.nuées||(S.nuées=[]),S.nuées.includes(_)||S.nuées.push(_),S}static async உருவாக்கு({விண்மீன்:r,வார்ப்புரு:g,அட்டவணை_சாபி:_,பேற்றோர்:x,மாறிலிகள்:S}){if(!r.nuées||!r.bds)throw new Error("விண்மீன் தயராரானதில்லை");const E=await r.nuées.créerNuée({nuéeParent:x});g=this.வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:g,அட்டவணை_சாபி:_,குழு_அடையாளம்:E,மாறிலிகள்:S});for(const R of g.tableaux){const A=await r.nuées.ajouterTableauNuée({idNuée:E,clefTableau:R.clef});for(const I of R.cols)await r.nuées.ajouterColonneTableauNuée({idTableau:A,idVariable:I.idVariable,idColonne:I.idColonne}),I.index;g.motsClefs&&await r.nuées.ajouterMotsClefsNuée({idNuée:E,idsMotsClefs:g.motsClefs})}const C={licence:g.licence,motsClefs:g.motsClefs,tableaux:g.tableaux.map(R=>R.clef===_?{clef:R.clef,cols:[...R.cols,{idColonne:S?.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்||பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்$1,idVariable:S?.பங்கேற்பாளர்_மாறி_அடையாளம்||பங்கேற்பாளர்_மாறி_அடையாளம்$1}]}:R)},T=await r.bds.créerBdDeSchéma({schéma:C});return await r.nuées.sauvegarderMétadonnéeNuée({idNuée:E,clef:அங்கீகார_தத_மீதரவு_சாபி$1,valeur:T}),E}async அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:r}){return await suivreBdsDeFonctionListe({fListe:async g=>await this.விண்மீன்.nuées.suivreNuéesParents({idNuée:this.குழு_அடையாளம்,f:_=>g([this.குழு_அடையாளம்,..._].reverse())}),f:async g=>await r(g),fBranche:async(g,_)=>await suivreBdDeFonction({fRacine:async({fSuivreRacine:x})=>await this.அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:x,அடையாளம்:g}),f:ignorerNonDéfinis(_),fSuivre:async({id:x,fSuivreBd:S})=>await this.விண்மீன்.bds.suivreDonnéesDeTableauParClef({idBd:x,clefTableau:this.அட்டவணை_சாபி,f:S})})})}async பரிந்துரைகளை_கேள்ளு({செ:r,சந்ததி:g=!0}){return await this.விண்மீன்.nuées.suivreDonnéesTableauNuée({idNuée:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,héritage:g?["descendance","ascendance"]:["ascendance"],f:async _=>{await r(_.map(x=>({பங்கேற்பாளர்:x.idCompte,அடையாளம்:x.élément.id,பரிந்துரை:x.élément.données})))},nRésultatsDésirés:1e3})}async என்_பரிந்துரைகளை_கேள்ளு({செ:r}){return await this.விண்மீன்.bds.suivreDonnéesDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,f:async g=>{const _=await this.விண்மீன்.obtIdCompte();await r(g.map(x=>({பங்கேற்பாளர்:_,அடையாளம்:x.id,பரிந்துரை:x.données})))}})}async பரிந்துரையு({பரிந்துரை:r}){const g=x=>x[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்]?x:{...x,[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்]:Date.now()};return(await this.விண்மீன்.bds.ajouterÉlémentÀTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,vals:g(r)}))[0]}async பரிந்துரையை_நீக்கு({அடையாளம்:r}){return await this.விண்மீன்.bds.effacerÉlémentDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,idÉlément:r})}async பரிந்துரையை_திருத்து({பரிந்துரை:r,அடையாளம்:g}){await this.விண்மீன்.bds.modifierÉlémentDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,vals:r,idÉlément:g})}async அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:r,அடையாளம்:g}){const _=async x=>{const S=x[this.மாறிலிகள்.அங்கீகார_தத_மீதரவு_சாபி];if(typeof S=="string")return await r(S)};return await this.விண்மீன்.nuées.suivreMétadonnéesNuée({idNuée:g||this.குழு_அடையாளம்,f:_,hériter:!1})}async அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு(){return await uneFois(async g=>await this.அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:g}))}async அங்கீகரி({பரிந்துரை:r}){const g=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு(),_=Object.assign({},r.பரிந்துரை,{[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:r.பங்கேற்பாளர்}),S=(await uneFois(async E=>await this.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:E}))).find(E=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(E.données,_));return S?(await this.அங்கீகரிக்கப்பட்ட_உறுப்படியை_திருத்து({பரிந்துரை:r,அடையாளம்:S.id}),S.id):(await this.விண்மீன்.bds.ajouterÉlémentÀTableauParClef({idBd:g,clefTableau:this.அட்டவணை_சாபி,vals:_}))[0]}async அங்கீகரிக்கப்பட்ட_உறுப்படியை_நீக்கு({அடையாளம்:r}){const g=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு();await this.விண்மீன்.bds.effacerÉlémentDeTableauParClef({idBd:g,clefTableau:this.அட்டவணை_சாபி,idÉlément:r})}async அங்கீகரிக்கப்பட்ட_உறுப்படியை_திருத்து({பரிந்துரை:r,அடையாளம்:g}){const _=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு();await this.விண்மீன்.bds.modifierÉlémentDeTableauParClef({idBd:_,clefTableau:this.அட்டவணை_சாபி,idÉlément:g,vals:{...r.பரிந்துரை,[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:r.பங்கேற்பாளர்}})}குறியீட்டு_நெடுவரிசைகள்_சமம்(r,g){return(this.வார்ப்புரு.tableaux.find(x=>x.clef===this.அட்டவணை_சாபி)?.cols.filter(x=>x.index).map(x=>x.idColonne)||[]).every(x=>r[x]===g[x])}async உறுப்படிகளை_கேள்ளு({செ:r,பரிந்துரைகள்:g="எனது"}){const _={அங்கீகரிக்கப்பட்டவை:[],பந்திருரைக்கப்பட்டவை:[]},x=async()=>{const C=[];for(const T of _.பந்திருரைக்கப்பட்டவை){const R=C.find(A=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(A,T));if(R){const A=R[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்],I=T[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்];A&&I&&I>A&&(C.splice(C.indexOf(R),1),C.push(T))}else C.push(T)}for(const T of _.அங்கீகரிக்கப்பட்டவை){const R=C.find(A=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(A,T));R&&C.splice(C.indexOf(R),1),C.push(T)}return await r(C)},E=[await this.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async C=>{_.அங்கீகரிக்கப்பட்டவை=C.map(T=>T.données),await x()}})];if(g==="அனைத்தும்"){const C=await this.பரிந்துரைகளை_கேள்ளு({செ:async T=>{_.பந்திருரைக்கப்பட்டவை=T.map(R=>({[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:R.பங்கேற்பாளர்,...R.பரிந்துரை})),await x()}});E.push(C.fOublier)}else if(g==="எனது"){const C=await this.என்_பரிந்துரைகளை_கேள்ளு({செ:async T=>{_.பந்திருரைக்கப்பட்டவை=T.map(R=>({[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:R.பங்கேற்பாளர்,...R.பரிந்துரை})),await x()}});E.push(C)}return async()=>{await Promise.all(E.map(C=>C()))}}};const மொழிபெயர்ப்பு_அட்டவணை_சாபி="மொழிபெயர்ப்புகள்",சாபி_நெடுவரிசை_அடையாளம்="சாபி",மூல்_மொழி_நெடுவரிசை_அடையாளம்="மூல்_மொழி",இலக்கு_மொழி_நெடுவரிசை_அடையாளம்="இலக்கு_மொழி",மூல்_உரை_நெடுவரிசை_அடையாளம்="மூல்_உரை",மொழிபெயர்ப்பு_நெடுவரிசை_அடையாளம்="மொழிபெயர்ப்பு",கிளிமூக்கு_மூல்_கூட்ட_அடையாளம்="/orbitdb/zdpuAyiNBJZCMSTWynQrRynKCbfz7uJhv892B5Dy1qnyQfwP6",சாபி_மாறி_அடையாளம்="/orbitdb/zdpuAviHxRLaTdUCfJeh1Dw8hbiHkcRsmEkiitX2MXQes3XYY",மூல்_மொழி_மாறி_அடையாளம்="/orbitdb/zdpuAyCPoNvoFVRt4y5uA97d8LLjcXnqs2CaoS6oVvbZwkSou",இலக்கு_மொழி_மாறி_அடையாளம்="/orbitdb/zdpuB35kfHohXZQnFFAMhwFPt78vH7e1NuquQ6KcNMPGQ3Hgj",மூல்_உரை_மாறி_அடையாளம்="/orbitdb/zdpuAwxQnCrzYK3kXtM4MGYfdWhM3rjSb1cyQx4hMSwjHzgf9",மொழிபெயர்ப்பு_மாறி_அடையாளம்="/orbitdb/zdpuB3HFW5njgmT9kxvJoxNq7wG27iCj8GLf3F3iKtfecw8De",மொழியாக்கம்_சிறப்பு_சொல்_அடையாளம்="/orbitdb/zdpuAnASCNyc198pcsxDYCdZoAvfj5EC3iWbeMyK9FRsAaoaS",கிளிமூக்கு_சிறப்பு_சொல்_அடையாளம்="/orbitdb/zdpuAzksPz4pdkBfy1Z74LStFLGPS3njxtD6BEvcPEYdSEv8R",கிளிமூக்கு_தரவுத்தளம்_வார்ப்புரு={motsClefs:[மொழியாக்கம்_சிறப்பு_சொல்_அடையாளம்,கிளிமூக்கு_சிறப்பு_சொல்_அடையாளம்],licence:"ODbl-1_0",tableaux:[{clef:மொழிபெயர்ப்பு_அட்டவணை_சாபி,cols:[{idVariable:சாபி_மாறி_அடையாளம்,idColonne:சாபி_நெடுவரிசை_அடையாளம்,index:!0},{idVariable:மூல்_மொழி_மாறி_அடையாளம்,idColonne:மூல்_மொழி_நெடுவரிசை_அடையாளம்},{idVariable:இலக்கு_மொழி_மாறி_அடையாளம்,idColonne:இலக்கு_மொழி_நெடுவரிசை_அடையாளம்,index:!0},{idVariable:மூல்_உரை_மாறி_அடையாளம்,idColonne:மூல்_உரை_நெடுவரிசை_அடையாளம்},{idVariable:மொழிபெயர்ப்பு_மாறி_அடையாளம்,idColonne:மொழிபெயர்ப்பு_நெடுவரிசை_அடையாளம்},{idVariable:தேதி_மாறி_அடையாளம்$1,idColonne:தேதி_நெடுவரிசை_அடையாளம்$1}]}]},மொழிபெயர்ப்பு_உறுப்படியிலிருந்து_மொழிபெயர்ப்பு_முடிவு=n=>({சாபி:n.données[சாபி_நெடுவரிசை_அடையாளம்],தேதி:new Date(n.données[தேதி_நெடுவரிசை_அடையாளம்$1]),பங்கேற்பாளர்:n.données[பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்$1],மொழிபெயர்ப்பு:n.données[மொழிபெயர்ப்பு_நெடுவரிசை_அடையாளம்],மூல்_உரை:n.données[மூல்_உரை_நெடுவரிசை_அடையாளம்],மூல்_மொழி:n.données[மூல்_மொழி_நெடுவரிசை_அடையாளம்],இலக்கு_மொழி:n.données[இலக்கு_மொழி_நெடுவரிசை_அடையாளம்],கைரேகை:n.id}),பரிந்துரை_உறுப்படியிலிருந்து_பரிந்துரை_முடிவு=n=>({பங்கேற்பாளர்:n.பங்கேற்பாளர்,அடையாளம்:n.அடையாளம்,பரிந்துரை:{சாபி:n.பரிந்துரை[சாபி_நெடுவரிசை_அடையாளம்],தேதி:new Date(n.பரிந்துரை[தேதி_நெடுவரிசை_அடையாளம்$1]),மொழிபெயர்ப்பு:n.பரிந்துரை[மொழிபெயர்ப்பு_நெடுவரிசை_அடையாளம்],மூல்_உரை:n.பரிந்துரை[மூல்_உரை_நெடுவரிசை_அடையாளம்],மூல்_மொழி:n.பரிந்துரை[மூல்_மொழி_நெடுவரிசை_அடையாளம்],இலக்கு_மொழி:n.பரிந்துரை[இலக்கு_மொழி_நெடுவரிசை_அடையாளம்]}}),பரிந்துரை_முடிவிலிருந்து_பரிந்துரை_உறுப்படி=n=>({பங்கேற்பாளர்:n.பங்கேற்பாளர்,அடையாளம்:n.அடையாளம்,பரிந்துரை:{[சாபி_நெடுவரிசை_அடையாளம்]:n.பரிந்துரை.சாபி,[தேதி_நெடுவரிசை_அடையாளம்$1]:n.பரிந்துரை.தேதி.getTime(),[மொழிபெயர்ப்பு_நெடுவரிசை_அடையாளம்]:n.பரிந்துரை.மொழிபெயர்ப்பு,[மூல்_உரை_நெடுவரிசை_அடையாளம்]:n.பரிந்துரை.மூல்_உரை,[மூல்_மொழி_நெடுவரிசை_அடையாளம்]:n.பரிந்துரை.மூல்_மொழி,[இலக்கு_மொழி_நெடுவரிசை_அடையாளம்]:n.பரிந்துரை.இலக்கு_மொழி}}),மொழிபெயர்ப்பு_பட்டியலிலிருந்து_அகராதி=n=>{const r=new Set(n.map(_=>_.சாபி)),g={};for(const _ of r){g[_]||(g[_]={});const x=n.filter(S=>S.சாபி===_);for(const S of x)g[_][S.இலக்கு_மொழி]=S.மொழிபெயர்ப்பு}return g},மொழிபெயர்ப்புகளை_ஒன்றாக்கு=(...n)=>{const r={};for(const g of n)for(const _ of Object.keys(g)){r[_]||(r[_]={});for(const[x,S]of Object.entries(g[_]))r[_][x]=S}return r},மொழிபெயர்ப்பு_அகராதியிலிருந்து_மரம்=n=>{const r={};for(const g in n){const _=g.split(".");for(const x of Object.keys(n[g])){r[x]||(r[x]={});let S=r[x];for(const[E,C]of _.entries())E===_.length-1?S[C]=n[g][x]:((S[C]===void 0||typeof S[C]=="string")&&(S[C]={}),S=S[C])}}return r},மரத்திலிருந்து_மொழிபெயர்ப்பு_அகராதி=n=>{const r={};function*g({ம:_,முன்:x}){x=x||[];for(const[S,E]of Object.entries(_)){const C=[...x,S];if(typeof E=="string")yield{சாபி:C.join("."),மதிப்பு:E};else for(const{சாபி:T,மதிப்பு:R}of g({ம:E,முன்:C}))yield{சாபி:T,மதிப்பு:R}}}for(const _ of Object.keys(n))for(const{சாபி:x,மதிப்பு:S}of g({ம:n[_]}))r[x]||(r[x]={}),r[x][_]=S;return r},எதுமே_செய்யாதே=async()=>{};let கிளிமூக்கு$1=class{மூல்_மொழிபெயர்ப்புகள்;தனித்துவமிக்க_அடையாளம்;மூல்_மொழி;கிளி;constructor({விண்மீன்:r,மூல்_மொழிபெயர்ப்புகள்:g,மூல்_மொழி:_,அடையாளம்:x}){if(this.தனித்துவமிக்க_அடையாளம்=v4$1(),x){if(!r)throw new Error;this.கிளி=new கிளி$1({விண்மீன்:r,அட்டவணை_சாபி:மொழிபெயர்ப்பு_அட்டவணை_சாபி,குழு_அடையாளம்:x,வார்ப்புரு:கிளிமூக்கு_தரவுத்தளம்_வார்ப்புரு})}this.மூல்_மொழிபெயர்ப்புகள்=g||{},this.மூல்_மொழி=_}static async உருவாக்கு({விண்மீன்:r,பேற்றோர்:g=கிளிமூக்கு_மூல்_கூட்ட_அடையாளம்}){return await கிளி$1.உருவாக்கு({விண்மீன்:r,பேற்றோர்:g,வார்ப்புரு:கிளிமூக்கு_தரவுத்தளம்_வார்ப்புரு,அட்டவணை_சாபி:மொழிபெயர்ப்பு_அட்டவணை_சாபி})}async சாபிகளை_கேள்ளு({செ:r,பரிந்துரைகள்:g="வேண்டாம்"}){const _={மூல்:Object.keys(this.மூல்_மொழிபெயர்ப்புகள்),அங்கீகரிக்கப்பட்டவை:[],பரிந்துரைகள்:[]},x=async()=>await r([...new Set([...Object.values(_).flat()])]),S=[],E=await this.அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்புகளை_கேள்ளு({செ:async C=>(_.அங்கீகரிக்கப்பட்டவை=Object.keys(C),await x())});if(S.push(E),g==="எனது"){const C=await this.என்_மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async T=>{_.பரிந்துரைகள்=T.map(R=>R.பரிந்துரை.சாபி),await x()}});S.push(C)}else if(g==="எல்லாம்"){const C=(await this.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async T=>{_.பரிந்துரைகள்=T.map(R=>R.பரிந்துரை.சாபி),await x()}})).fOublier;S.push(C)}return async()=>{await Promise.all(S.map(C=>C()))}}async மொழிகளை_கேள்ளு({பரிந்துரைகள்:r="எனது",செ:g}){const _={மூல்:Object.values(this.மூல்_மொழிபெயர்ப்புகள்).map(E=>Object.keys(E)).flat()},x=async()=>{await g([...new Set(Object.values(_).flat())])};x();const S=[];if(this.கிளி){const E=await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async C=>{_.அங்கீகரிக்கப்பட்டவை=C.map(T=>T.données[இலக்கு_மொழி_நெடுவரிசை_அடையாளம்]),await x()}});S.push(E),r==="எனது"?S.push(await this.என்_மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async C=>{_.பரிந்துரைகள்=C.map(T=>T.பரிந்துரை[இலக்கு_மொழி_நெடுவரிசை_அடையாளம்]),await x()}})):r==="எல்லாம்"&&S.push((await this.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async C=>{_.பரிந்துரைகள்=C.map(T=>T.பரிந்துரை[இலக்கு_மொழி_நெடுவரிசை_அடையாளம்]),await x()}})).fOublier)}return async()=>{await Promise.all(S.map(E=>E()))}}async அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்புகளை_கேள்ளு({செ:r}){const g={உறுப்படிகள்:[]},_=async()=>{const x=மொழிபெயர்ப்புகளை_ஒன்றாக்கு(மொழிபெயர்ப்பு_பட்டியலிலிருந்து_அகராதி(g.உறுப்படிகள்.map(S=>மொழிபெயர்ப்பு_உறுப்படியிலிருந்து_மொழிபெயர்ப்பு_முடிவு(S))),this.மூல்_மொழிபெயர்ப்புகள்);await r(x)};return await _(),this.கிளி?await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async x=>{g.உறுப்படிகள்=x,await _()}}):எதுமே_செய்யாதே}async மொழிபெயர்ப்புகளை_கேள்ளு({செ:r,பரிந்துரைகள்:g="எனது"}){if(await r(this.மூல்_மொழிபெயர்ப்புகள்),!this.கிளி)return எதுமே_செய்யாதே;const _={},x=await this.கிளி.விண்மீன்.obtIdCompte(),S=async()=>{const C=[...new Set([...Object.keys(this.மூல்_மொழிபெயர்ப்புகள்),...(_.அங்கீகரிக்கப்பட்டவை||[]).map(R=>R.சாபி)])],T={};for(const R of C){const A=_.அங்கீகரிக்கப்பட்டவை?.filter(N=>N.சாபி===R)||[],I=_.பரிந்துரைகள்?.filter(N=>N.பரிந்துரை.சாபி===R)||[],B=[...new Set([...I.map(N=>N.பரிந்துரை.இலக்கு_மொழி),...A.map(N=>N.இலக்கு_மொழி)])],D={};for(const N of B){const M=I.filter(F=>F.பரிந்துரை.இலக்கு_மொழி===N).sort((F,U)=>F.பங்கேற்பாளர்===x&&U.பங்கேற்பாளர்!==x||F.பரிந்துரை.தேதி.getTime()>U.பரிந்துரை.தேதி.getTime()?-1:1)[0],O=A.find(F=>F.இலக்கு_மொழி===N),L=M?O&&O.தேதி>M.பரிந்துரை.தேதி.getTime()?O:M.பரிந்துரை:O;L&&(D[N]=L.மொழிபெயர்ப்பு)}T[R]=Object.assign({},this.மூல்_மொழிபெயர்ப்புகள்[R]||{},D)}return await r(T)},E=[];if(this.கிளி){const C=await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async T=>{_.அங்கீகரிக்கப்பட்டவை=T.map(R=>R.données),await S()}});E.push(C)}return g==="எனது"?E.push(await this.என்_மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async C=>{_.பரிந்துரைகள்=C,await S()}})):g==="எல்லாம்"&&E.push((await this.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:async C=>{_.பரிந்துரைகள்=C,await S()}})).fOublier),async()=>{await Promise.all(E.map(C=>C()))}}async மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({சாபி:r,மொழி:g,செ:_}){return this.கிளி?await this.கிளி.பரிந்துரைகளை_கேள்ளு({செ:async x=>await _(x.filter(S=>(!r||S.பரிந்துரை[சாபி_நெடுவரிசை_அடையாளம்]===r)&&(!g||S.பரிந்துரை[இலக்கு_மொழி_நெடுவரிசை_அடையாளம்]===g)).map(பரிந்துரை_உறுப்படியிலிருந்து_பரிந்துரை_முடிவு))}):{fOublier:எதுமே_செய்யாதே,fChangerProfondeur:எதுமே_செய்யாதே}}async என்_மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:r}){return this.கிளி?await this.கிளி.என்_பரிந்துரைகளை_கேள்ளு({செ:g=>{r(g.map(_=>பரிந்துரை_உறுப்படியிலிருந்து_பரிந்துரை_முடிவு(_)))}}):எதுமே_செய்யாதே}async முன்னேற்றத்தை_கேள்ளு({மொழி:r,வகை:g,செ:_}){const x={},S=A=>{const I=[];for(const B of A)I.find(D=>D.பரிந்துரை.சாபி===B.பரிந்துரை.சாபி&&D.பரிந்துரை.இலக்கு_மொழி===B.பரிந்துரை.இலக்கு_மொழி)||I.push(B);return I},E=async()=>{if(x.சாபிகள்)if(g==="சாபி"){const A=x.சாபிகள்.length,I=x.சாபிகள்.filter(D=>x.மொழிபெயர்ப்புகள்?.[D]?.[r]),B=x.பரிந்துரைக்கப்பட்டவை?.filter(D=>D.பரிந்துரை.இலக்கு_மொழி===r&&x.சாபிகள்?.includes(D.பரிந்துரை.சாபி)&&!I.includes(D.பரிந்துரை.சாபி))||[];return await _({மொத்தம்:A,அங்கீகரிக்கப்பட்டவை:I.length,பரிந்துரைக்கப்பட்டவை:S(B).length})}else{if(!x.மொழிபெயர்ப்புகள்||!x.சாபிகள்)return;const A=Object.fromEntries(x.சாபிகள்.map(M=>[M,this.மூல்_மொழி&&x.மொழிபெயர்ப்புகள்?.[M]?.[this.மூல்_மொழி]?.length||(x.மொழிபெயர்ப்புகள்?.[M]?Object.values(x.மொழிபெயர்ப்புகள்?.[M])[0]?.length:0)])),I=Object.values(A).reduce((M,O)=>M+O,0),B=x.சாபிகள்.filter(M=>x.மொழிபெயர்ப்புகள்?.[M]?.[r]),D=Object.entries(x.மொழிபெயர்ப்புகள்).filter(M=>M[1][r]).map(([M,O])=>A[M]).reduce((M,O)=>M+O,0),N=x.பரிந்துரைக்கப்பட்டவை?.filter(M=>M.பரிந்துரை.இலக்கு_மொழி===r&&x.சாபிகள்?.includes(M.பரிந்துரை.சாபி)&&!B.includes(M.பரிந்துரை.சாபி)).map(M=>A[M.பரிந்துரை.சாபி]||0).reduce((M,O)=>M+O,0)||0;return await _({மொத்தம்:I,அங்கீகரிக்கப்பட்டவை:D,பரிந்துரைக்கப்பட்டவை:N})}},C=await Promise.all([this.சாபிகளை_கேள்ளு({செ:async A=>{x.சாபிகள்=A,await E()}}),this.மொழிபெயர்ப்புகளை_கேள்ளு({பரிந்துரைகள்:"வேண்டாம்",செ:async A=>{x.மொழிபெயர்ப்புகள்=A,await E()}})]),T=(await this.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({மொழி:r,செ:async A=>{x.பரிந்துரைக்கப்பட்டவை=A,await E()}})).fOublier;return async()=>{await Promise.all(C.map(A=>A())),await T()}}async மொழிபெயர்ப்பை_பரிந்துரையு({சாபி:r,மொழிபெயர்ப்பு:g,இலக்கு_மொழி:_,மூல்_மொழி:x,மூல்_உரை:S}){if(!this.கிளி)throw new Error;const E={[சாபி_நெடுவரிசை_அடையாளம்]:r,[மொழிபெயர்ப்பு_நெடுவரிசை_அடையாளம்]:g,[இலக்கு_மொழி_நெடுவரிசை_அடையாளம்]:_};x&&(E[மூல்_மொழி_நெடுவரிசை_அடையாளம்]=x),S&&(E[மூல்_உரை_நெடுவரிசை_அடையாளம்]=S),await this.கிளி.பரிந்துரையு({பரிந்துரை:E})}async மொழிபெயர்ப்பு_பரிந்துரையை_நீக்கு({அடையாளம்:r}){if(!this.கிளி)throw new Error;await this.கிளி.பரிந்துரையை_நீக்கு({அடையாளம்:r})}async அங்கீகரி({பரிந்துரை:r}){if(!this.கிளி)throw new Error;return await this.கிளி.அங்கீகரி({பரிந்துரை:பரிந்துரை_முடிவிலிருந்து_பரிந்துரை_உறுப்படி(r)})}async அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்பை_நீக்கு({சாபி:r,இலக்கு_மொழி:g,பொறுமை:_=1e3}){if(!this.கிளி)throw new Error;const x=this.கிளி,S=T=>T.சாபி===r&&T.இலக்கு_மொழி===g,C=(await uneFois$1(async T=>await x.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async R=>await T(R)}),async T=>!!T?.find(R=>S(R.données))||await attendreStabilité(_)(T)))?.find(T=>S(T.données))?.id;if(!C)throw new Error;return await this.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படியை_நீக்கு({அடையாளம்:C})}async பேசு({சாபி:r,மொழி:g,செ:_,பரிந்துரைகள்:x="எனது"}){const S={},E=async()=>{const C=S.மொழிபெயர்ப்புகள்?.[r]?.[g];return await _(C)};return await this.மொழிபெயர்ப்புகளை_கேள்ளு({பரிந்துரைகள்:x,செ:async C=>{S.மொழிபெயர்ப்புகள்=C,await E()}})}};var byteToHex=[];for(var i=0;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(n,r=0){return(byteToHex[n[r+0]]+byteToHex[n[r+1]]+byteToHex[n[r+2]]+byteToHex[n[r+3]]+"-"+byteToHex[n[r+4]]+byteToHex[n[r+5]]+"-"+byteToHex[n[r+6]]+byteToHex[n[r+7]]+"-"+byteToHex[n[r+8]]+byteToHex[n[r+9]]+"-"+byteToHex[n[r+10]]+byteToHex[n[r+11]]+byteToHex[n[r+12]]+byteToHex[n[r+13]]+byteToHex[n[r+14]]+byteToHex[n[r+15]]).toLowerCase()}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}var randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const native$1={randomUUID};function v4(n,r,g){if(native$1.randomUUID&&!r&&!n)return native$1.randomUUID();n=n||{};var _=n.random||(n.rng||rng)();return _[6]=_[6]&15|64,_[8]=_[8]&63|128,unsafeStringify(_)}const குறிப்பின்_மதிப்பை_பெறு=n=>unref(n),அங்கீகார_தத_மீதரவு_சாபி="அங்கீகறிக்கப்பட்ட தரவுகள்",பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்="பங்கேற்பாளர்",பங்கேற்பாளர்_மாறி_அடையாளம்="/orbitdb/zdpuAunUaEc6CRX8wAjNixNioB6hF5SYvwJytx4ynm5wQx1vH",தேதி_நெடுவரிசை_அடையாளம்="தேதி",தேதி_மாறி_அடையாளம்="/orbitdb/zdpuAkz4jAZW5EM3rK7huQoZAE6L26dtpoVd4UYGGyaQkDmTx",மாறிலிகள்={அங்கீகார_தத_மீதரவு_சாபி,பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்,பங்கேற்பாளர்_மாறி_அடையாளம்,தேதி_நெடுவரிசை_அடையாளம்,தேதி_மாறி_அடையாளம்},குறியீட்டு_இல்லாமல்_வார்ப்புரு=n=>(n=deepcopy(n),n.tableaux=n.tableaux.map(r=>({clef:r.clef,cols:r.cols.map(g=>({idColonne:g.idColonne,idVariable:g.idVariable,optionnelle:g.optionnelle}))})),n);class கிளி{விண்மீன்;அட்டவணை_சாபி;குழு_அடையாளம்;வார்ப்புரு;மாறிலிகள்;constructor({விண்மீன்:r,அட்டவணை_சாபி:g,குழு_அடையாளம்:_,வார்ப்புரு:x,மாறிலிகள்:S}){this.விண்மீன்=r,this.அட்டவணை_சாபி=g,this.குழு_அடையாளம்=_,x=கிளி.வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:x,அட்டவணை_சாபி:g,குழு_அடையாளம்:_,மாறிலிகள்:S}),this.வார்ப்புரு=குறியீட்டு_இல்லாமல்_வார்ப்புரு(x),this.மாறிலிகள்=Object.assign({},மாறிலிகள்,S)}static வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:r,அட்டவணை_சாபி:g,குழு_அடையாளம்:_,மாறிலிகள்:x}){const S=deepcopy(r),E=S.tableaux.find(T=>T.clef===g);if(!E)throw new Error("அட்டவணை சாபி அட்டவணை வார்ப்புரில் கிடைத்ததில்லை.");return E.cols.find(T=>T.idColonne===(x?.தேதி_நெடுவரிசை_அடையாளம்||தேதி_நெடுவரிசை_அடையாளம்))||(E.cols.push({idVariable:x?.தேதி_மாறி_அடையாளம்||தேதி_மாறி_அடையாளம்,idColonne:x?.தேதி_நெடுவரிசை_அடையாளம்||தேதி_நெடுவரிசை_அடையாளம்}),S.tableaux=S.tableaux.map(T=>T.clef===g?E:T)),S.nuées||(S.nuées=[]),S.nuées.includes(_)||S.nuées.push(_),S}static async உருவாக்கு({விண்மீன்:r,வார்ப்புரு:g,அட்டவணை_சாபி:_,பேற்றோர்:x,மாறிலிகள்:S}){if(!r.nuées||!r.bds)throw new Error("விண்மீன் தயராரானதில்லை");const E=await r.nuées.créerNuée({nuéeParent:x});g=this.வார்ப்புரு_தயாரிப்பு({வார்ப்புரு:g,அட்டவணை_சாபி:_,குழு_அடையாளம்:E,மாறிலிகள்:S});for(const R of g.tableaux){const A=await r.nuées.ajouterTableauNuée({idNuée:E,clefTableau:R.clef});for(const I of R.cols)await r.nuées.ajouterColonneTableauNuée({idTableau:A,idVariable:I.idVariable,idColonne:I.idColonne}),I.index;g.motsClefs&&await r.nuées.ajouterMotsClefsNuée({idNuée:E,idsMotsClefs:g.motsClefs})}const C={licence:g.licence,motsClefs:g.motsClefs,tableaux:g.tableaux.map(R=>R.clef===_?{clef:R.clef,cols:[...R.cols,{idColonne:S?.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்||பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்,idVariable:S?.பங்கேற்பாளர்_மாறி_அடையாளம்||பங்கேற்பாளர்_மாறி_அடையாளம்}]}:R)},T=await r.bds.créerBdDeSchéma({schéma:C});return await r.nuées.sauvegarderMétadonnéeNuée({idNuée:E,clef:அங்கீகார_தத_மீதரவு_சாபி,valeur:T}),E}async அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:r}){return await suivreBdsDeFonctionListe$1({fListe:async g=>await this.விண்மீன்.nuées.suivreNuéesParents({idNuée:this.குழு_அடையாளம்,f:_=>g([this.குழு_அடையாளம்,..._].reverse())}),f:async g=>await r(g),fBranche:async(g,_)=>await suivreBdDeFonction$1({fRacine:async({fSuivreRacine:x})=>await this.அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:x,அடையாளம்:g}),f:ignorerNonDéfinis$1(_),fSuivre:async({id:x,fSuivreBd:S})=>await this.விண்மீன்.bds.suivreDonnéesDeTableauParClef({idBd:x,clefTableau:this.அட்டவணை_சாபி,f:S})})})}async பரிந்துரைகளை_கேள்ளு({செ:r,சந்ததி:g=!0}){return await this.விண்மீன்.nuées.suivreDonnéesTableauNuée({idNuée:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,héritage:g?["descendance","ascendance"]:["ascendance"],f:async _=>{await r(_.map(x=>({பங்கேற்பாளர்:x.idCompte,அடையாளம்:x.élément.id,பரிந்துரை:x.élément.données})))},nRésultatsDésirés:1e3})}async என்_பரிந்துரைகளை_கேள்ளு({செ:r}){return await this.விண்மீன்.bds.suivreDonnéesDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,f:async g=>{const _=await this.விண்மீன்.obtIdCompte();await r(g.map(x=>({பங்கேற்பாளர்:_,அடையாளம்:x.id,பரிந்துரை:x.données})))}})}async பரிந்துரையு({பரிந்துரை:r}){const g=x=>x[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்]?x:{...x,[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்]:Date.now()};return(await this.விண்மீன்.bds.ajouterÉlémentÀTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,vals:g(r)}))[0]}async பரிந்துரையை_நீக்கு({அடையாளம்:r}){return await this.விண்மீன்.bds.effacerÉlémentDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,idÉlément:r})}async பரிந்துரையை_திருத்து({பரிந்துரை:r,அடையாளம்:g}){await this.விண்மீன்.bds.modifierÉlémentDeTableauUnique({schémaBd:this.வார்ப்புரு,idNuéeUnique:this.குழு_அடையாளம்,clefTableau:this.அட்டவணை_சாபி,vals:r,idÉlément:g})}async அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:r,அடையாளம்:g}){const _=async x=>{const S=x[this.மாறிலிகள்.அங்கீகார_தத_மீதரவு_சாபி];if(typeof S=="string")return await r(S)};return await this.விண்மீன்.nuées.suivreMétadonnéesNuée({idNuée:g||this.குழு_அடையாளம்,f:_,hériter:!1})}async அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு(){return await uneFois$2(async g=>await this.அங்கீகார_தரவுத்தள்ளத்தைப்_கேள்ளு({செ:g}))}async அங்கீகரி({பரிந்துரை:r}){const g=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு(),_=Object.assign({},r.பரிந்துரை,{[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:r.பங்கேற்பாளர்}),S=(await uneFois$2(async E=>await this.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:E}))).find(E=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(E.données,_));return S?(await this.அங்கீகரிக்கப்பட்ட_உறுப்படியை_திருத்து({பரிந்துரை:r,அடையாளம்:S.id}),S.id):(await this.விண்மீன்.bds.ajouterÉlémentÀTableauParClef({idBd:g,clefTableau:this.அட்டவணை_சாபி,vals:_}))[0]}async அங்கீகரிக்கப்பட்ட_உறுப்படியை_நீக்கு({அடையாளம்:r}){const g=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு();await this.விண்மீன்.bds.effacerÉlémentDeTableauParClef({idBd:g,clefTableau:this.அட்டவணை_சாபி,idÉlément:r})}async அங்கீகரிக்கப்பட்ட_உறுப்படியை_திருத்து({பரிந்துரை:r,அடையாளம்:g}){const _=await this.அங்கீகார_தரவுத்தள்ளத்தைப்_பெறு();await this.விண்மீன்.bds.modifierÉlémentDeTableauParClef({idBd:_,clefTableau:this.அட்டவணை_சாபி,idÉlément:g,vals:{...r.பரிந்துரை,[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:r.பங்கேற்பாளர்}})}குறியீட்டு_நெடுவரிசைகள்_சமம்(r,g){return(this.வார்ப்புரு.tableaux.find(x=>x.clef===this.அட்டவணை_சாபி)?.cols.filter(x=>x.index).map(x=>x.idColonne)||[]).every(x=>r[x]===g[x])}async உறுப்படிகளை_கேள்ளு({செ:r,பரிந்துரைகள்:g="எனது"}){const _={அங்கீகரிக்கப்பட்டவை:[],பந்திருரைக்கப்பட்டவை:[]},x=async()=>{const C=[];for(const T of _.பந்திருரைக்கப்பட்டவை){const R=C.find(A=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(A,T));if(R){const A=R[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்],I=T[this.மாறிலிகள்.தேதி_நெடுவரிசை_அடையாளம்];A&&I&&I>A&&(C.splice(C.indexOf(R),1),C.push(T))}else C.push(T)}for(const T of _.அங்கீகரிக்கப்பட்டவை){const R=C.find(A=>this.குறியீட்டு_நெடுவரிசைகள்_சமம்(A,T));R&&C.splice(C.indexOf(R),1),C.push(T)}return await r(C)},E=[await this.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:async C=>{_.அங்கீகரிக்கப்பட்டவை=C.map(T=>T.données),await x()}})];if(g==="அனைத்தும்"){const C=await this.பரிந்துரைகளை_கேள்ளு({செ:async T=>{_.பந்திருரைக்கப்பட்டவை=T.map(R=>({[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:R.பங்கேற்பாளர்,...R.பரிந்துரை})),await x()}});E.push(C.fOublier)}else if(g==="எனது"){const C=await this.என்_பரிந்துரைகளை_கேள்ளு({செ:async T=>{_.பந்திருரைக்கப்பட்டவை=T.map(R=>({[this.மாறிலிகள்.பங்கேற்பாளர்_நெடுவரிசை_அடையாளம்]:R.பங்கேற்பாளர்,...R.பரிந்துரை})),await x()}});E.push(C)}return async()=>{await Promise.all(E.map(C=>C()))}}}const jaqbälKikajtzïkChabäl="chab'äl",jaqbälKikajtzïkTzibanem="tzib'anem",runukMolajKel="/orbitdb/zdpuB2ZNKMRPnn8kwwL9UDY6VNdXxqxTUiEanjJ4Z6HuxEgWU",retalTzibNuchabäl="/orbitdb/zdpuAqGK5ndjkaYFM5wkyEk4S6FpDH5hvpEWLq79edP9MmMpY",runukRucheelRunukChabäl="runukChabäl",runukRucheelRajilanïkChabäl="rajilanïkChabäl",runukRucheelRubiChabäl="rubiChabäl",runukRucheelRutzibanemChabäl="rutzibanemChabäl",runukRucheelRunukGlChabäl="gl",runukRucheelRunukI1Chabäl="i1",runukRucheelRunukI2Chabäl="i2",runukRucheelRunukI3Chabäl="i3",runukRujalojRunukChabäl="/orbitdb/zdpuAqAZSmXwDoEPn4r94LP7yYvaY6kvxofyU2gchbAzkTEjN",runukRujalojRajilanïkChabäl="/orbitdb/zdpuAx2asNr8YFLvEy8nP5u16SshcbMAhyHkZQm3hqEX2CEP6",runukRujalojRubiChabäl="/orbitdb/zdpuAxRf1zitq3gpB6BnMrSuwcMLeFEUuUUGZZyhCwhjNqUjM",runukRujalojRutzibanemChabäl="/orbitdb/zdpuAp5wKQEHAh8L5VGJr4Jdzn5363rX6zZmeFawBS4vRBihV",runukRujalojRunukGlChabäl="/orbitdb/zdpuApxEECg9CrBGKtGqkYMU4zU51q6M1UuRvzz1PhQ5XTQWt",runukRujalojRunukI1Chabäl="/orbitdb/zdpuApSr92X1P9KQS5EzJVrWTqA8RZ4rjZnPJwH5DTNmw35CY",runukRujalojRunukI2Chabäl="/orbitdb/zdpuAv9jLJJzgo5FafC3ZeG2nGggEWttcb8hMbfwwbRQKW1DS",runukRujalojRunukI3Chabäl="/orbitdb/zdpuApqihbDFFCdHudZaM64ahUMDwkpb38fpjw5gqYkP4xGJC",runukRucheelRunukTzib="runukTzib",runukRucheelRajilanïkTzib="rajilanïkTzib",runukRucheelRubiTzib="rubiTzib",runukRucheelRucholanemTzib="rucholanemTzib",runukRucheelRutzibTzib="rutzibTzib",runukRujalojRunukTzib="/orbitdb/zdpuB1o5fEEZFicWiQTL7RE8xv7v7X2SS5A7tNUAXaHQ9c58P",runukRujalojRajilanïkTzib="/orbitdb/zdpuAt4noCPbhfzRAZncCMndUPSCiYS5KnHDCPg17RFqV8qou",runukRujalojRubiTzib="/orbitdb/zdpuApC8sYxrezNAdgNFcLDcrEZhzMi7pv5A7VMZrCCiv2rb6",runukRujalojRucholanemTzib="/orbitdb/zdpuB14vFuP6aHNaXxoeWZvq1NRyx6HCUReoT4sxSk3kAFdZe",runukRujalojRutzibTzib="/orbitdb/zdpuAnXpasEMduNSXHxaeyGdZGmyU4NEwA3SEydj7jCDCY3Kz",RubanikilRuxeelTzij={licence:"ODbl-1_0",motsClefs:[retalTzibNuchabäl],tableaux:[{cols:[{idColonne:runukRucheelRunukChabäl,idVariable:runukRujalojRunukChabäl,index:!0},{idColonne:runukRucheelRajilanïkChabäl,idVariable:runukRujalojRajilanïkChabäl},{idColonne:runukRucheelRubiChabäl,idVariable:runukRujalojRubiChabäl},{idColonne:runukRucheelRutzibanemChabäl,idVariable:runukRujalojRutzibanemChabäl},{idColonne:runukRucheelRunukGlChabäl,idVariable:runukRujalojRunukGlChabäl},{idColonne:runukRucheelRunukI1Chabäl,idVariable:runukRujalojRunukI1Chabäl},{idColonne:runukRucheelRunukI2Chabäl,idVariable:runukRujalojRunukI2Chabäl},{idColonne:runukRucheelRunukI3Chabäl,idVariable:runukRujalojRunukI3Chabäl}],clef:jaqbälKikajtzïkChabäl},{cols:[{idColonne:runukRucheelRunukTzib,idVariable:runukRujalojRunukTzib,index:!0},{idColonne:runukRucheelRajilanïkTzib,idVariable:runukRujalojRajilanïkTzib},{idColonne:runukRucheelRubiTzib,idVariable:runukRujalojRubiTzib},{idColonne:runukRucheelRucholanemTzib,idVariable:runukRujalojRucholanemTzib},{idColonne:runukRucheelRutzibTzib,idVariable:runukRujalojRutzibTzib}],clef:jaqbälKikajtzïkTzibanem}]},tachojmisajKel=({chumil:n})=>{const r=new கிளி({விண்மீன்:n,அட்டவணை_சாபி:jaqbälKikajtzïkChabäl,வார்ப்புரு:RubanikilRuxeelTzij,குழு_அடையாளம்:runukMolajKel}),g=new கிளி({விண்மீன்:n,அட்டவணை_சாபி:jaqbälKikajtzïkTzibanem,வார்ப்புரு:RubanikilRuxeelTzij,குழு_அடையாளம்:runukMolajKel});return{kelChabäl:r,kelTzibanem:g}},kaq$1={aj:"Mayab'","rb'":"Kaqchikel",tz:"ltn",rn:{gl:"kaqc1270",i3:"cak"}},fr$1={aj:"latin","rb'":"français",tz:"ltn",rn:{gl:"stan1290",i1:"fr",i2:"fra",i3:"fra"}},cst$1={aj:"latin","rb'":"castellano",rn:{gl:"stan1288",i1:"es"}},nl={aj:"latin","rb'":"Nederlands",rn:{gl:"dutc1256",i1:"nl"}},en$1={aj:"latin","rb'":"English",rn:{gl:"stan1293",i1:"en",i3:"eng"}},kny={"rb'":"Kanyen'ké:ha",ajilanïk:"latin",rn:{}},sw={aj:"latin","rb'":"Kiswahili",rn:{}},yo={aj:"latin","rb'":"Yorùbá",rn:{gl:"yoru1245",i1:"yo"}},rw={"rb'":"Kinyarwanda",rn:{gl:"kiny1244",i1:"rw"},aj:"latin"},de={"rb'":"Deutsch",rn:{i1:"de",gl:"mode1258"},aj:"latin"},_retamabälChabäl={kaq:kaq$1,fr:fr$1,த:{aj:"தமிழ்","rb'":"தமிழ்",tz:"த",rn:{gl:"tami1289",i1:"ta",i2:"tam",i3:"tam"}},cst:cst$1,nl,en:en$1,پن:{aj:"فارسی","rb'":"پنجابی",tz:"فا",rn:{gl:"west2386",i3:"pnb"}},ਪੰ:{aj:"ਪੰਜਾਬੀ","rb'":"ਪੰਜਾਬੀ",tz:"ਪੰ",rn:{gl:"panj1256",i1:"pa"}},हिं:{aj:"देवनागरी","rb'":"हिंदी",rn:{gl:"",i1:"hi"}},ગુ:{aj:"ગુજરાતી","rb'":"ગુજરાતી",rn:{gl:"guja1252",i1:"gu"}},বাং:{aj:"বাংলা","rb'":"বাংলা",rn:{gl:"beng1280",i1:"bn"}},తె:{"rb'":"తెలుగు",rn:{gl:"telu1262",i1:"te"},aj:"తెలుగు"},ଓଡ଼ି:{"rb'":"ଓଡ଼ିଆ",rn:{},aj:"ଓଡ଼ିଆ"},عرب:{"rb'":"العربية",tz:"عرب",rn:{i1:"ar"}},ار:{aj:"فارسی","rb'":"اردو",tz:"فا",rn:{gl:"urdu1245",i1:"ur"}},ខ្មែរ:{aj:"ខ្មែរ","rb'":"ភាសាខ្មែរ",tz:"ខ្មែរ",rn:{gl:"cent1989",i1:"km"}},فا:{aj:"فارسی","rb'":"فارسی",tz:"فا",rn:{gl:"west2369",i1:"fa"}},म:{aj:"देवनागरी","rb'":"मराठी",rn:{gl:"mara1378",i1:"mr"}},മ:{aj:"മലയാളം","rb'":"മലയാളം",rn:{gl:"mala1464",i1:"ml"}},ने:{aj:"देवनागरी","rb'":"नेपाली",rn:{gl:"nepa1254",i1:"ne"}},ಕ:{"rb'":"ಕನ್ನಡ",aj:"ಕನ್ನಡ",rn:{}},"k'i":{aj:"Mayab'","rb'":"K'iche'",rn:{gl:"kich1262",i3:"quc"}},"tz'u":{aj:"Mayab'","rb'":"Tz'utujil",rn:{gl:"tzut1248",i3:"tzj"}},kny,汉:{aj:"汉语","rb'":"汉语",tz:"汉",rn:{gl:"sini1245",i1:"zh"}},漢:{aj:"汉语","rb'":"漢語",tz:"漢",rn:{gl:"taib1240",i3:"goyu"}},日本:{aj:"汉语","rb'":"日本語",rn:{gl:"nucl1643",i1:"ja"}},sw,yo,rw,de},ltn={"rb'":"latin",ch:"→↓",aj:"latin",tz:"[A-Za-zªºÀ-ÖØ-öø-ʸˠ-ˤᴀ-ᴥᴬ-ᵜᵢ-ᵥᵫ-ᵷᵹ-ᶾḀ-ỿⁱⁿₐ-ₜKÅℲⅎⅠ-ↈⱠ-ⱿꜢ-ꞇꞋ-ꟊꟐꟑꟓꟕ-ꟙꟲ-ꟿꬰ-ꭚꭜ-ꭤꭦ-ꭩﬀ-ﬆＡ-Ｚａ-ｚ]|\uD801[\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]"},_retamabälTzibanem={ltn,த:{"rb'":"தமிழ்",ch:"→↓",aj:"தமிழ்",tz:"[ஂஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹா-ூெ-ைொ-்ௐௗ௦-௺]|\uD807[\uDFC0-\uDFF1\uDFFF]"},فا:{"rb'":"فارسی",ch:"←↓",aj:"فارسی",tz:"[؀-؄؆-؋؍-ؚ؜-؞ؠ-ؿف-يٖ-ٯٱ-ۜ۞-ۿݐ-ݿࡰ-ࢎ࢐࢑࢘-ࣣ࣡-ࣿﭐ-﯂ﯓ-ﴽ﵀-ﶏﶒ-ﷇ﷏ﷰ-﷿ﹰ-ﹴﹶ-ﻼ]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},عرب:{"rb'":"العربية",ch:"←↓",aj:"عربية",tz:"[؀-؄؆-؋؍-ؚ؜-؞ؠ-ؿف-يٖ-ٯٱ-ۜ۞-ۿݐ-ݿࡰ-ࢎ࢐࢑࢘-ࣣ࣡-ࣿﭐ-﯂ﯓ-ﴽ﵀-ﶏﶒ-ﷇ﷏ﷰ-﷿ﹰ-ﹴﹶ-ﻼ]|\uD803[\uDE60-\uDE7E\uDEFD-\uDEFF]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB\uDEF0\uDEF1]"},ਪੰ:{"rb'":"ਪੰਜਾਬੀ",ch:"→↓",aj:"ਪੰਜਾਬੀ",tz:"[ਁ-ਃਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹ਼ਾ-ੂੇੈੋ-੍ੑਖ਼-ੜਫ਼੦-੶]"},ગુ:{"rb'":"ગુજરાતી",ch:"→↓",aj:"ગુજરાતી",tz:"[ઁ-ઃઅ-ઍએ-ઑઓ-નપ-રલળવ-હ઼-ૅે-ૉો-્ૐૠ-ૣ૦-૱ૹ-૿]"},తె:{"rb'":"తెలుగు",ch:"→↓",aj:"తెలుగు",tz:"[ఀ-ఌఎ-ఐఒ-నప-హ఼-ౄె-ైొ-్ౕౖౘ-ౚౝౠ-ౣ౦-౯౷-౿]"},ব:{"rb'":"বাংলা",ch:"→↓",aj:"বাংলা",tz:"[ঀ-ঃঅ-ঌএঐও-নপ-রলশ-হ়-ৄেৈো-ৎৗড়ঢ়য়-ৣ০-৾]"},ខ្មែរ:{"rb'":"ខ្មែរ",ch:"→↓",aj:"ខ្មែរ",tz:"[ក-៝០-៩៰-៹᧠-᧿]"},देव:{"rb'":"देवनागरी",ch:"→↓",aj:"देवनागरी",tz:"[ऀ-ॐॕ-ॣ०-ॿ꣠-ꣿ]|\uD806[\uDF00-\uDF09]"},汉:{"rb'":"汉子",ch:"↓←",aj:"汉",tz:"[⺀-⺙⺛-⻳⼀-⿕々〇〡-〩〸-〻㐀-䶿一-鿿豈-舘並-龎]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},漢:{"rb'":"漢字",ch:"↓←",aj:"汉",tz:"[⺀-⺙⺛-⻳⼀-⿕々〇〡-〩〸-〻㐀-䶿一-鿿豈-舘並-龎]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]"},日本:{"rb'":"日本",ch:"↓←",aj:"汉",tz:"[ぁ-ゖゝ-ゟ]|\uD82C[\uDC01-\uDD1F\uDD32\uDD50-\uDD52]|🈀|[ァ-ヺヽ-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ｯｱ-ﾝ]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00\uDD20-\uDD22\uDD55\uDD64-\uDD67]|[㐀-䶵一-龯]"}};class Nuchabäl{retamabälChabälChumil;retamabälTzibanemChumil;événements;chumil;kelChabäl;kelTzibanem;tamestajKel;constructor({chumil:r}){this.chumil=r,this.retamabälChabälChumil={},this.retamabälTzibanemChumil={},this.événements=new eventsExports.EventEmitter,this._tachojmisajKel()}async _tachojmisajKel(){if(this.chumil){const{kelChabäl:r,kelTzibanem:g}=tachojmisajKel({chumil:this.chumil});this.kelChabäl=r,this.kelTzibanem=g;const _=await r.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:S=>{this.retamabälChabälChumil=tajalPaRubanikilRetamabalChabäl(S),this.xujalRi()}}),x=await g.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:S=>{this.retamabälTzibanemChumil=tajalPaRubanikilRetamabalTzibanem(S),this.xujalRi()}});this.tamestajKel=async()=>{await Promise.all([_(),x()])}}}xujalRi(){this.événements.emit("xujalRi'")}get retamabälChabäl(){return merge(_retamabälChabäl,this.retamabälChabälChumil)}get retamabälTzibanem(){return merge(_retamabälTzibanem,this.retamabälTzibanemChumil)}get konojelChabäl(){return Object.keys(this.retamabälChabäl)}get konojelTzibanem(){return Object.keys(this.retamabälTzibanem)}runukChabäl({chabäl:r,runukulem:g}){const _=Object.keys(this.retamabälChabäl).find(S=>this.retamabälChabäl[S]["rb'"]===r);if(!g||!_)return _;g=g.toLowerCase();const x=this.retamabälChabäl[_].rn;return g==="iso"?[x.i1,x.i2,x.i3].find(S=>S):x[rkxnkNklm[g]||g]}rubiChabäl({runuk:r,runukulem:g}){const _=g?.toLowerCase();let x;return _===void 0?x=this.retamabälChabäl[r]:_==="iso"?x=Object.values(this.retamabälChabäl).find(S=>[S.rn.i1,S.rn.i2,S.rn.i3].some(E=>E===r)):Object.keys(rkxnkNklm).includes(_)&&(x=Object.values(this.retamabälChabäl).find(S=>S.rn[rkxnkNklm[_]]===r)),x?x["rb'"]:void 0}rutzibanemChabäl({runuk:r}){const _=this.retamabälChabäl[r]?.tz;if(_)return _;for(const x in this.konojelTzibanem){const S=this.rutzibTzibanem({runuk:x});if(S&&r.match(new RegExp(S,"g")))return x}}rajilanïkChabäl({runuk:r}){const g=this.retamabälChabäl[r];if(g)return g.aj;const _=this.rutzibanemChabäl({runuk:r});return _?this.rajilanïkTzibanem({runuk:_}):void 0}rubiTzibanem({runuk:r}){const g=this.retamabälTzibanem[r];return g?g["rb'"]:void 0}runukTzibanem({tzibanem:r}){return Object.keys(this.retamabälTzibanem).find(g=>this.retamabälChabäl[g]["rb'"]===r)}rucholanemTzibanem({runuk:r}){return this.retamabälTzibanem[r]?.ch}rutzibTzibanem({runuk:r}){return this.retamabälTzibanem[r]?.tz}rajilanïkTzibanem({runuk:r}){return this.retamabälTzibanem[r]?.aj}tatzeqelbej(r){return this.événements.on("xujalRi'",r),r(),()=>{this.événements.off("xujalRi'",r)}}tatzeqelbejRetamabälChabäl({sm:r}){return this.tatzeqelbej(()=>r(this.retamabälChabäl))}tatzeqelbejRetamabälTzibanem({sm:r}){return this.tatzeqelbej(()=>r(this.retamabälTzibanem))}tatzeqelbejKonojelChabäl({sm:r}){return this.tatzeqelbej(()=>r(this.konojelChabäl))}tatzeqelbejKonojelTzibanem({sm:r}){return this.tatzeqelbej(()=>r(this.konojelTzibanem))}tatzeqelbejRunukChabäl({sm:r,chabäl:g,runukulem:_}){return this.tatzeqelbej(()=>r(this.runukChabäl({chabäl:g,runukulem:_})))}tatzeqelbejRubiChabäl({sm:r,runuk:g,runukulem:_}){return this.tatzeqelbej(()=>r(this.rubiChabäl({runuk:g,runukulem:_})))}tatzeqelbejRutzibanemChabäl({sm:r,runuk:g}){return this.tatzeqelbej(()=>r(this.rutzibanemChabäl({runuk:g})))}tatzeqelbejRajilanïkChabäl({sm:r,runuk:g}){return this.tatzeqelbej(()=>r(this.rajilanïkChabäl({runuk:g})))}tatzeqelbejRubiTzibanem({sm:r,runuk:g}){return this.tatzeqelbej(()=>r(this.rubiTzibanem({runuk:g})))}tatzeqelbejRunukTzibanem({sm:r,tzibanem:g}){return this.tatzeqelbej(()=>r(this.runukTzibanem({tzibanem:g})))}tatzeqelbejRucholanemTzibanem({sm:r,runuk:g}){return this.tatzeqelbej(()=>r(this.rucholanemTzibanem({runuk:g})))}tatzeqelbejRajilanïkTzibanem({sm:r,runuk:g}){return this.tatzeqelbej(()=>r(this.rajilanïkTzibanem({runuk:g})))}async tachilabejTzibanem(r){return await this.kelTzibanem?.பரிந்துரையு({பரிந்துரை:r})}async takulTzibanem(r){return await this.kelTzibanem?.அங்கீகரி({பரிந்துரை:r})}async tachilabejChabäl(r){return await this.kelChabäl?.பரிந்துரையு({பரிந்துரை:r})}async takulChabäl(r){return await this.kelChabäl?.அங்கீகரி({பரிந்துரை:r})}async tatzapij(){this.tamestajKel&&await this.tamestajKel()}}const rkxnkNklm={glottologue:"gl",iso1:"i1",iso2:"i2",iso3:"i3"},tajalPaRubanikilRetamabalChabäl=n=>{const r={};for(const g of n)r[g.données[runukRucheelRunukChabäl]]={aj:g.données[runukRucheelRajilanïkChabäl],"rb'":g.données[runukRucheelRubiChabäl],tz:g.données[runukRucheelRutzibanemChabäl],rn:{gl:g.données[runukRucheelRunukGlChabäl],i1:g.données[runukRucheelRunukI1Chabäl],i2:g.données[runukRucheelRunukI2Chabäl],i3:g.données[runukRucheelRunukI3Chabäl]}};return r},tajalPaRubanikilRetamabalTzibanem=n=>{const r={};for(const g of n)r[g.données[runukRucheelRunukTzib]]={aj:g.données[runukRucheelRajilanïkTzib],"rb'":g.données[runukRucheelRubiTzib],ch:g.données[runukRucheelRucholanemTzib],tz:g.données[runukRucheelRutzibTzib]};return r},மொழி_நினைவி_பெயர்="அமைப்புகள்.மொழிகள்",எண்ணுரு_நினைவி_பெயர்="அமைப்புகள்.எண்ணுரு",விருப்பங்களை_பயன்படுத்து=()=>{const{தேர்ந்தெடுத்தப்பட்ட_மொழிகள்:n,தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:r,நினைவிகள்:g}=inject$1("விருப்பங்கள்");return watchEffect(()=>{localStorage.setItem(g?.மொழி||மொழி_நினைவி_பெயர்,JSON.stringify(n.value))}),watchEffect(()=>{r.value?localStorage.setItem(g?.எண்ணுரு||எண்ணுரு_நினைவி_பெயர்,r.value):localStorage.removeItem(g?.எண்ணுரு||எண்ணுரு_நினைவி_பெயர்)}),{தேர்ந்தெடுத்தப்பட்ட_மொழிகள்:n,தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:r}},விருப்பங்களை_உருவாக்கு=({மொழி:n,மாற்றுமொழிகள்:r=[],நினைவிகள்:g})=>({install:_=>{const x=localStorage.getItem(g?.மொழி||மொழி_நினைவி_பெயர்);let S;try{S=x?JSON.parse(x):void 0}catch{}const E=ref$2(Array.isArray(S)?S:[n,...r]),C=localStorage.getItem(g?.எண்ணுரு||எண்ணுரு_நினைவி_பெயர்),T=ref$2(C||void 0);_.provide("விருப்பங்கள்",{நினைவிகள்:g,தேர்ந்தெடுத்தப்பட்ட_மொழிகள்:E,தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:T})}}),nuchabäl_கண்டுப்பிடி=()=>{const n=inject$1("nuch'ab'äl");if(!n)throw new Error("Nuch'ab'äl கிடைத்ததில்லை.");return n},மொழிகளைப்_பயன்படுத்து=()=>{const n=nuchabäl_கண்டுப்பிடி(),{தேர்ந்தெடுத்தப்பட்ட_மொழிகள்:r}=விருப்பங்களை_பயன்படுத்து(),g=computed(()=>r.value[0]),_=computed(()=>r.value.slice(1));return{மொழி:g,மாற்றுமொழிகள்:_,மொழிகளை_தேர்ந்தெடுக்கொள்ளு:C=>{Array.isArray(C)?C.length&&(r.value=C):r.value=[C,...r.value.filter(T=>T!==C)]},அகராதியிலிருந்து_மொழிபெயர்ப்பு:C=>computed(()=>{if(!C.value)return;for(const R of r.value)if(C.value[R])return C.value[R];const T=n?.rutzibanemChabäl({runuk:r.value[0]});if(T){for(const R of r.value)if(T===n?.rutzibanemChabäl({runuk:R}))return C.value[R]}return Object.values(C.value)[0]}),வலதிலிருந்து_இடது_மொழி:C=>computed(()=>{const T=n?.rutzibanemChabäl({runuk:குறிப்பின்_மதிப்பை_பெறு(C)||g.value});if(!T)return!1;const R=n?.rucholanemTzibanem({runuk:T});return R?R==="←↓":!1})}},மொழிகளை_உருவாக்கு=({மொழி:n,மாற்றுமொழிகள்:r=[],நினைவிகள்:g})=>({install:_=>{const x=_.config.globalProperties.$constl;_.use(விருப்பங்களை_உருவாக்கு({மொழி:n,மாற்றுமொழிகள்:r,நினைவிகள்:g}));const S=new Nuchabäl({chumil:x});_.provide("nuch'ab'äl",S),_.config.globalProperties.$nuchabäl=S}}),எண்ணிக்கையை_கண்டுப்பிடி=()=>{const n=inject$1("எண்ணிக்கை");if(!n)throw new Error("எண்ணிக்கை கிடைத்ததில்லை.");return n},எண்களைப்_பயன்படுத்து=()=>{const n=எண்ணிக்கையை_கண்டுப்பிடி(),r=nuchabäl_கண்டுப்பிடி(),{தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:g}=விருப்பங்களை_பயன்படுத்து(),{மொழி:_}=மொழிகளைப்_பயன்படுத்து(),x=ref$2(r.rajilanïkChabäl({runuk:_.value}));let S;watchEffect(()=>{S&&S(),S=r?.tatzeqelbejRajilanïkChabäl({runuk:_.value,sm:B=>x.value=B})}),onUnmounted(()=>{S&&S()});const E=ref$2(n.முறைமைகள்);let C;watchEffect(()=>{C=n.முறைமைகளை_பின்பற்று({செ:B=>E.value=B})}),onUnmounted(()=>{C&&C()});const T=computed(()=>g.value||x.value||"தமிழ்");return{தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:g,எண்ணுரு:T,எண்ணுரு_முறைமைகள்:E,எண்ணை_வடிவூட்டு:(B,D)=>computed(()=>{const M=குறிப்பின்_மதிப்பை_பெறு(B);if(M!==void 0)try{return n.உரைக்கு({எண்:M,மொழி:D?குறிப்பின்_மதிப்பை_பெறு(D):T.value})}catch{return}}),எண்_எழுத்து_வடிவூட்டு:(B,D)=>computed(()=>[...குறிப்பின்_மதிப்பை_பெறு(B)].map(M=>{if([""," ","+","-","(",")"].includes(M))return M;try{const O=n.எண்ணுக்கு({உரை:M});return n.உரைக்கு({எண்:O,மொழி:D?குறிப்பின்_மதிப்பை_பெறு(D):T.value})}catch{return M}}).join("")),பதிப்பை_வடிவூட்டு:(B,D)=>computed(()=>குறிப்பின்_மதிப்பை_பெறு(B).split(".").map(M=>n.உரைக்கு({எண்:parseInt(M),மொழி:D?குறிப்பின்_மதிப்பை_பெறு(D):T.value})).join("."))}},எண்களை_உருவாக்கு=({மொழி:n,மாற்றுமொழிகள்:r=[],நினைவிகள்:g})=>({install:_=>{const x=_.config.globalProperties.$constl;if(!_.config.globalProperties.$nuchabäl){const C=மொழிகளை_உருவாக்கு({மொழி:n,மாற்றுமொழிகள்:r,நினைவிகள்:g});_.use(C)}const E=new எண்ணிக்கை({விண்மீன்:x});_.provide("எண்ணிக்கை",E),_.config.globalProperties.$எண்ணிக்கை=E}}),கிளியை_கண்டுப்பிடி=()=>{const n=inject$1("கிளிமூக்கு");if(!n)throw new Error("கிளிமூக்கு கிடைத்ததில்லை.");return n};class சேமிக்கப்பட்ட_செய்திகள்{செய்திகள்;பூட்டு;constructor(){this.செய்திகள்={},this.பூட்டு=new s$2}அடையாளமத்தைப்_பெறு({கிளி:r,பரிந்துரைகள்:g}){return{கிளி_அடையாளம்:r.தனித்துவமிக்க_அடையாளம்,விருப்பங்களின்_அடையாளம்:r.தனித்துவமிக்க_அடையாளம்+g}}உருவாக்கு({கிளி:r,பரிந்துரைகள்:g}){const{கிளி_அடையாளம்:_,விருப்பங்களின்_அடையாளம்:x}=this.அடையாளமத்தைப்_பெறு({கிளி:r,பரிந்துரைகள்:g});return this.செய்திகள்[_]||(this.செய்திகள்[_]={கிளி:r,விருப்பங்கள்:{}}),this.செய்திகள்[_].விருப்பங்கள்[x]||(this.செய்திகள்[_].விருப்பங்கள்[x]={செய்திகள்:ref$2({}),கோரிக்கைகள்:new Set,மறந்துவிடு:void 0,விருப்பங்கள்:{பரிந்துரைகள்:g}}),{செய்திகள்:this.செய்திகள்[_].விருப்பங்கள்[x].செய்திகள்,அடையாளம்:{கிளி:_,விருப்பங்கள்:x}}}async கேள்ளு({அடையாளம்:r}){const g=v4(),{கிளி:_}=this.செய்திகள்[r.கிளி],x=JSON.stringify(r);if(await this.பூட்டு.acquire(x),!this.செய்திகள்[r.கிளி]?.விருப்பங்கள்[r.விருப்பங்கள்]?.மறந்துவிடு){const E=this.செய்திகள்[r.கிளி].விருப்பங்கள்[r.விருப்பங்கள்].செய்திகள்,C=await _.மொழிபெயர்ப்புகளை_கேள்ளு({செ:T=>{E.value=மொழிபெயர்ப்பு_அகராதியிலிருந்து_மரம்(T)},பரிந்துரைகள்:this.செய்திகள்[r.கிளி].விருப்பங்கள்[r.விருப்பங்கள்].விருப்பங்கள்.பரிந்துரைகள்});this.செய்திகள்[r.கிளி].விருப்பங்கள்[r.விருப்பங்கள்].மறந்துவிடு=C}const{கோரிக்கைகள்:S}=this.செய்திகள்[r.கிளி].விருப்பங்கள்[r.விருப்பங்கள்];return S.add(g),this.பூட்டு.release(x),g}async மறந்துவிடு({அடையாளம்:r,கோரிக்கை_அடையாளம்:g}){const _=JSON.stringify(r);await this.பூட்டு.acquire(_);const x=this.செய்திகள்[r.கிளி].விருப்பங்கள்[r.விருப்பங்கள்];x&&(x.கோரிக்கைகள்.delete(g),x.கோரிக்கைகள்.size===0&&(x.மறந்துவிடு&&await x.மறந்துவிடு(),delete this.செய்திகள்[r.கிளி].விருப்பங்கள்[r.விருப்பங்கள்]),Object.keys(this.செய்திகள்[r.கிளி].விருப்பங்கள்).length||delete this.செய்திகள்[r.கிளி]),this.பூட்டு.release(_)}}const செய்திகளைப்_பயன்படுத்து=({பரிந்துரைகள்:n="எனது",கிளி:r})=>{r=r||கிளியை_கண்டுப்பிடி();const g=inject$1("செய்திகள்");let _;const{செய்திகள்:x,அடையாளம்:S}=g.உருவாக்கு({கிளி:r,பரிந்துரைகள்:n});return onMounted(async()=>{_=await g.கேள்ளு({அடையாளம்:S})}),onUnmounted(async()=>{_&&await g.மறந்துவிடு({அடையாளம்:S,கோரிக்கை_அடையாளம்:_})}),{செய்திகள்:x}},மொழியாக்கம்_பயன்படுத்து=({பரிந்துரைகள்:n="எனது",கிளி:r}={பரிந்துரைகள்:"எனது"})=>{const{மொழி:g,மாற்றுமொழிகள்:_}=மொழிகளைப்_பயன்படுத்து(),{எண்ணை_வடிவூட்டு:x}=எண்களைப்_பயன்படுத்து(),{செய்திகள்:S}=செய்திகளைப்_பயன்படுத்து({கிளி:r,பரிந்துரைகள்:n}),{கிடைக்கும்_மொழி_குறியீடுகள்:E}=கிடைக்கும்_மொழிகளை_பயன்படுத்து({பரிந்துரைகள்:n,கிளி:r}),C=ref$2([]),T=(I,B,D)=>computed(()=>{const N=மரத்திலிருந்து_மொழிபெயர்ப்பு_அகராதி(S.value||{});if(!N)return C.value.includes(I)||(C.value=[...C.value,I]),I;const M=R.value.find(j=>!!N[I]?.[j]),O=M?N[I][M]:I,L=j=>typeof j=="number"?x(j).value:j.value?j.value:j,F=(j,z)=>{const W=/@:([^\s\p{P}]+(\.[^\s\p{P}]+)*)/gu;j=j.replaceAll(W,function(ie,fe){const xe=R.value.find(G=>!!N[fe]?.[G]);return xe?N[fe][xe]:fe});const X=/{([^{]+)}/g;return Array.isArray(z)?j.replace(X,function(ie,fe){return fe>=z.length?fe:L(z[fe])}):typeof z=="object"?j.replace(X,function(ie,fe){return(fe=z[fe])==null?"":L(fe)||""}):j},U=O.split("|");return U.length<2?F(U[0],typeof B!="number"?B:void 0):F(U[typeof D=="number"?D:typeof B=="number"?B:0]||U[U.length-1],typeof B=="number"?{இ:B,n:B}:B)}),R=computed(()=>[g.value,..._.value,...E.value.filter(I=>I!==g.value&&!_.value.includes(I))]);return{மொ:T,$மொ:(I,B,D)=>T(I,B,D).value,மொழிபெயரப்பில்லாத_சாபிகள்:C}},கிடைக்கும்_மொழிகளை_பயன்படுத்து=({பரிந்துரைகள்:n,கிளி:r}={பரிந்துரைகள்:"எனது"})=>{const g=r||கிளியை_கண்டுப்பிடி(),_=nuchabäl_கண்டுப்பிடி(),x=ref$2([]);let S;onMounted(async()=>{S=await g.மொழிகளை_கேள்ளு({செ:I=>{isEqual$1(I,x.value)||(x.value=I)},பரிந்துரைகள்:n})}),onUnmounted(async()=>{S&&await S()});const E=ref$2([]);let C;onMounted(async()=>{C=_.tatzeqelbejKonojelChabäl({sm:I=>E.value=I})}),onUnmounted(async()=>{C&&C()});const T=computed(()=>[...new Set([...E.value,...x.value])]),R=computed(()=>T.value.map(I=>({குறியீடு:I,மொழி:_.rubiChabäl({runuk:I})})).filter(I=>I.மொழி));return{கிடைக்கும்_மொழி_குறியீடுகள்:T,மொழிகளும்_குறியீடுகளும்:R,மொழியின்_பெயர்:I=>computed(()=>{const B=குறிப்பின்_மதிப்பை_பெறு(I);if(B)return R.value.find(D=>D.குறியீடு===B)?.மொழி})}},மொழி_முன்னேற்றத்தை_பயன்படுத்து=({மொழி:n,வகை:r="வார்த்தை",கிளி:g})=>{const _=g||கிளியை_கண்டுப்பிடி(),x=ref$2();let S;const E=குறிப்பின்_மதிப்பை_பெறு(n);return onMounted(async()=>{E&&(S=await _.முன்னேற்றத்தை_கேள்ளு({மொழி:E,வகை:r,செ:C=>x.value=C}))}),onUnmounted(async()=>{S&&await S()}),isRef(n)&&watchEffect(async()=>{S&&S(),n.value?S=await _.முன்னேற்றத்தை_கேள்ளு({மொழி:n.value,வகை:r,செ:C=>x.value=C}):(x.value=void 0,S=void 0)}),{மொழி_முன்னேற்றம்:x}},சாபிகளை_பயன்படுத்து=({கிளி:n}={})=>{const r=n||கிளியை_கண்டுப்பிடி(),{மொழிபெயரப்பில்லாத_சாபிகள்:g}=மொழியாக்கம்_பயன்படுத்து(),_=ref$2([]);let x;return onMounted(async()=>{x=await r.சாபிகளை_கேள்ளு({செ:E=>_.value=E})}),onUnmounted(async()=>{x&&await x()}),{சாபிகள்:computed(()=>[...new Set([...g.value,..._.value])])}},மொழிபெயர்ப்புகளை_பயன்படுத்து=({கிளி:n}={})=>{const r=n||கிளியை_கண்டுப்பிடி(),g=ref$2({});let _;return onMounted(async()=>{_=await r.அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்புகளை_கேள்ளு({செ:x=>g.value=x})}),onUnmounted(async()=>{_&&await _()}),{அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்புகள்:g}},பரிந்துரைகளை_பயன்படுத்து=({கிளி:n}={})=>{const r=n||கிளியை_கண்டுப்பிடி(),g=ref$2([]);let _;return onMounted(async()=>{_=(await r.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:x=>g.value=x})).fOublier}),onUnmounted(async()=>{_&&await _()}),{பரிந்துரைகள்:g}},கிளிமூக்கை_உருவாக்கு$1=({மொழி:n,மாற்றுமொழிகள்:r=[],கிளி:g,நினைவிகள்:_})=>({install:x=>{if(!x.config.globalProperties.$எண்ணிக்கை){const E=எண்களை_உருவாக்கு({மொழி:n,மாற்றுமொழிகள்:r,நினைவிகள்:_});x.use(E)}x.config.globalProperties.$கிளிமூக்கு=g,x.provide("கிளிமூக்கு",g),x.provide("செய்திகள்",new சேமிக்கப்பட்ட_செய்திகள்)}}),கிளிமூக்கை_பயன்படுத்து=()=>({கிடைக்கும்_மொழிகளை_பயன்படுத்து,மொழி_முன்னேற்றத்தை_பயன்படுத்து,சாபிகளை_பயன்படுத்து,பரிந்துரைகளை_பயன்படுத்து,மொழிபெயர்ப்புகளை_பயன்படுத்து,மொழியாக்கம்_பயன்படுத்து}),கிளிமூக்கை_உருவாக்கு=({மொழி:n,மாற்றுமொழிகள்:r=[],மூல்_மொழி:g,மூல்_மொழிபெயர்ப்புகள்:_,அடையாளம்:x,நினைவிகள்:S,விண்மீன்_சொத்து:E="$constl"})=>({install:C=>{const T=C.config.globalProperties[E];if(x&&!T)throw Error("விண்மீன் கிடைக்கதில்லை.");const R=new கிளிமூக்கு$1({விண்மீன்:T,மூல்_மொழி:g,மூல்_மொழிபெயர்ப்புகள்:மரத்திலிருந்து_மொழிபெயர்ப்பு_அகராதி(_),அடையாளம்:x}),A=கிளிமூக்கை_உருவாக்கு$1({மொழி:n,மாற்றுமொழிகள்:r,கிளி:R,நினைவிகள்:S});C.use(A)}}),fr=JSON.parse(`{"communs":{"constellation":"Constellation","auto":"Automatique","suivant":"Suivant","retour":"Retour","ouvrir":"Ouvrir","oui":"Oui","non":"Non","anonyme":"Anonyme","effacer":"Effacer","télécharger":"Télécharger","étiquetteNom":"Nom","indiceLangue":"Langue","texteAucunNom":"Ajouter un nom ci-dessus","erreurLangue":"Ce texte doit être en {langue}.","rechercher":"Rechercher","autresLangues":"Toutes les langues ({n})","troisPetitsPoints":"...","langagesInformatiques":{"ts":{"nom":"TypeScript","abr":"ts"},"js":{"nom":"JavaScript","abr":"js"},"py":{"nom":"Python","abr":"py"},"julia":{"nom":"Julia","abr":"jl"},"r":{"nom":"R","abr":"R"}},"copier":"Copier","sauvegarder":"Sauvegarder","fermer":"Fermer","annuler":"Annuler","lecteurCodeR2":{"erreurs":{"permission":"Vous devez permettre l'accès à la caméra.","pasDeCaméra":"Il semble que vous n'ayez pas de caméra.","contexteInsécure":"Le contexte est insécure. Rouvrez la page sous https.","caméraUtilisée":"La caméra semble être utilisée par une autre application.","erreurCaméra":"La caméra ne fonctionne pas.","navigNonSupporté":"Ce navigateur n'est pas supporté.","valeurCodeInvalide":"Le code R2 semble être invalide."}}},"navigation":{"accueil":"Accueil","données":"Mes données","recherche":"Explorer","favoris":"Mes favoris","automatisations":"Automatisations","signalements":"Signaler un problème"},"conditions":{"entête":"Conditions d'utilisation","jaccepte":"J'accepte les conditions","p0_1":"Votre utilisation de ce logiciel est assujetie aux conditions suivantes.","p0_2":"Ces conditions ont été écrites par des scientifiques, pas par des avocats. Cela veut aussi dire que vous n'aurez pas besoin d'un avocat pour les comprendre. Suivez les liens ci-dessous vers la licence pour voir les conditions légales de l'utilisation du code.","p0_3":"Ces conditions furent écrites en français. Les traductions dans d'autres langues sont disponibles grâce aux volontaires de la communauté Constellation. N'hésitez pas à nous contacter si vous avez des doutes !","t1":"Général","p1_1":"Ce logiciel (Constellation) est distribué en tant que logiciel à source ouverte, sous la [licence AGPL-3.0](https://www.gnu.org/licenses/agpl-3.0.fr.html). Votre utilisation de ce logiciel est assujetie aux conditions de ladite licence. Entre autres, veuillez prendre note que ceci est un logiciel libre qui vient avec **absolument aucune garantie**. *Caballo regalado, no se le mira el colmillo.*","p1_2":"En outre, toute interaction entre utilisateurs ou utilisatrices et assujetie aux [règles de notre communauté](https://www.contributor-covenant.org/fr/version/2/0/code_of_conduct/).","t2":"Utilisation des données","p2_1":"Les données disponibles à travers Constellation ont été contribuées par d'autres membres de la communauté. Chaque personne, au moment de partager ses données, doit spécifier une licence d'accès ouvert ; celle-ci est indiquée sur chaque base de données. Soyez toujours conscient de respecter les licences appartenant aux données que vous utilisez.","p2_2":"Ne partagez que des données qui vous appartiennent ou dont vous détenez, de la part de la personne à qui elles appartiennent, la permission écrite de les partager sous la licence que vous y spécifierez. Cela va sans dire, mais ne partagez rien d'illégal non plus.","p2_3":"Si quelqu'un d'autre a partagé des données qui vous appartiennent de manière non conforme aux termes de la licence que vous y aviez appliquée et nous résoudrons le problème.","t3":"Vie privée et sécurité","p3_1":"Veuillez prendre note que Constellation est un réseau distribué, ouvert et publique. Tout ce que vous y partagerez (bases de données, votre nom, information de contact) deviendra accessible à tout le réseau.","p3_2":"Ce qui est vrai de tout système informatique l'est encore plus dans le contexte d'un réseau distribué : une fois que de l'information est partagée avec d'autres personnes, vous pouvez toujours la supprimer vous-même, mais il est effectivement impossible de forcer les personnes qui l'ont déjà reçue de la supprimer également (même si vous pouvez toujours leur demander gentillement). **Ne partagez donc que des données que vous voulez partager avec toute la planète Terre. Ne partagez jamais des données confidentielles sur Constellation**.","p3_3":"En revanche, il n'y a pas de serveur central et vous ne partagez que ce que vous décidez de contribuer.","t4":"Crédits","p4_1":"Ce logiciel fut développé par Julien Malard-Adam, ஷீஜா (Sheeja) et les autres contributrices et contributeurs de [Constellation](https://github.com/reseau-constellation/iug).","p4_2":"Les images et l'art proviennent de [unDraw](https://undraw.co/) et de [வள்ளுவர் வள்ளலார் வட்டம்](https://commons.wikimedia.org/wiki/User:Valluvar_Vallalar_Vattam?uselang=ta). Ces derniers sont disponibles selon la licence [CC BY-SA 4.0](https://creativecommons.org/licenses/by-sa/4.0/deed.fr)."},"accueil":{"démarrer":"Démarrer","version":"Version {version}","piedDePage":"Contributeurs Constellation","initialiserCompte":{"titreCheminement":"Avez-vous déjà un compte ?","sousTitreCheminement":"Si oui, vous pouvez vous y connecter.","titreNoms":"Choisissez votre nom","sousTitreNoms":"Le plus de langues, le mieux !","titreImage":"Choisissez une image","titreCompteÀRejoindre":"Connexion","titreMotDePasse":"Code secret","titrePersister":"Persister les données ?","titreCestParti":"C'est tout !","rejoindreAutomatiquement":"Automatique","rejoindreManuellement":"Manuelle","texteEnConnexion":"Connection au réseau Constellation en cours. Assurez-vous que vous êtes bien en ligne.","texteCompteÀRejoindre":"Ouvrez votre compte Constellation sur un autre dispositif déjà connecté, puis choisissez votre compte ci-dessous.","indiceCompte":"Compte","texteCodeSecret":"Sur votre autre dispositif, choisissez « @:pages.compte.ajouterDispositif » et puis entrez le mot de passe ci-dessous.","indiceCodeSecret":"Code secret","indiceComptePasVu":"Vous ne le voyez pas ?","indiceRechercheComptes":"On est en train de rechercher.","indiceEssaieDeConnecter":" Attendez un peu, puis assurez-vous qu'un dispositif déjà connecté à votre compte Constellation est bien en ligne.","indiceMotDePasse":"Code secret","nouveauCompte":"Nouveau compte","connecter":"Connecter compte","texteImage":"Cliquez ci-dessus pour choisir une image de profil (si vous voulez)","plusDInfo":"En savoir plus","textePersister":{"0":"Protégez vos données pour assurer que votre navigateur ne les effacera pas sans votre permission.","1":"Si vous étiez sur un système centralisé, comme les Documents Google ou votre courriel, vos données seraient gardées sur un serveur centralisé, et vous devriez demander permission à ce serveur chaque fois que vous voulez modifier ou même accéder vos propres données.","2":"Constellation, au contraire, est un logiciel local. Vos données demeurent sur votre appareil lui-même. (Eh oui, ça fonctionne même sans Internet !) Le seul hic, c'est que certains navigateurs pensent que tous les systèmes sont centralisés et que c'est pas grave s'ils effacent vos donneés locales pour libérer de l'espace dans la mémoire. Sans demander votre permission, évidemment.","3":"Pour éviter tout risque de larmes plus tard, vous pouvez dire dès maintenant à votre navigateur de ne pas effacer vos données sans votre permission."},"persister":"Protéger","pasPersister":"Peut-être plus tard","déjàPersistées":"Vos données sont déjà protégées !","bienvenu":"Bienvenu à Constellation","sousTitreBienvenu":"On est heureux de vous voir !","cestParti":"C'est parti !"},"page":{"découvrir":{"titre":"Découvrir","données":"Les données","communauté":"Notre communauté"},"connectivité":{"titre":"Connectivité","réseau":{"titre":"Réseau","enLigne":"En ligne","horsLigne":"Déconnecté","connexionsRéseau":"Aucune connexion réseau|{n} connexion réseau|{n} connexions réseau","connexionsDispositifs":"Aucune connexion Constellation|{n} connexion Constellation|{n} connexions Consellation","connecter":"Connecter","connexion":{"titre":"Connexion manuelle"}},"serveurLocal":{"titre":"Accès nœud local","activé":"Activé","désactivé":"Désactivé","requêtes":"Aucune requête en attente|{n} requête en attente|{n} requêtes en attente","gérer":"Gérer"}},"graphiques":{"titre":"Mon activité","bds":"Mes bases de données","projets":"Mes projets","nuées":"Mes nuées","réplications":"Réplications des mes données","connaissances":"Mes connaissances","ajouterConnaissances":"Ajouter des connaissances","réseau":"Mon réseau","sansDonnées":"Il n'y a pas encore assez de données à visualiser"},"apprendre":{"titre":"Apprendre","tutoriel":"Suivre un tutoriel","docu":"La documentation"},"notifications":{"titre":"Notifications","aucune":"Aucune notification","connecterInstallé":{"titre":"Connectez votre compte","sousTitre":"Ne perdez pas vos données !","texteAction":"En savoir plus","détails":"C'est mieux d'installer Constellation sur ordinateur. Cela vous donne :","avantages":{"connexion":{"titre":"Une meilleure connexion","sousTitre":"Retrouvez plus facilement les autres membres du réseau"},"sauvegardes":{"titre":"Des sauvegardes automatisées","sousTitre":"Importez et exportez vos données en continu"},"mémoire":{"titre":"Plus de mémoire","sousTitre":"Hors navigateur, il y a plus d'espace"},"plus":{"titre":"...et beaucoup plus !","sousTitre":"Intégrations avec Python, autogénération d'applis..."}},"étape1":{"titre":"Installer sur ordi","texte":"Premièrement, installez et ouvrez Constellation sur un ordinateur.","télécharger":"Télécharger","apple":{"titre":"Info pour installation sur macOS","texte":"Nous rechignons de payer 100 $ annuellement à Apple  pour le privilège de développer des logiciels pour leur plateforme. Constellation doit donc être installée en tant que programme non vérifié par Apple.","btn":"Voir comment","lienExterne":"https://duckduckgo.com/?q=macos+installer+application+non+sign%C3%A9&t=ffab&atb=v308-1&ia=web"}},"étape2":{"titre":"Connecter votre compte","texte":"Choisissez « Rejoindre un compte » sur l'ordinateur, puis entrez le code que vous générerez ci-dessous.","connecté":"Compte connecté","code":"Générer code"}},"mettreÀJour":{"titre":"Constellation {dispo} est disponible","sousTitre":"Vous êtes sur version {actuelle}","texteAction":"Installer","installer":"Installer maintenant"},"protégerDonnées":{"titre":"Protéger mes données","sousTitre":"Ceci empêchera votre navigateur d'effacer vos données locales  sans votre permission.","texteAction":"Protéger maintenant","protéger":"Protéger"},"utilisationMémoire":{"titre":"Utilisation de mémoire","sousTitre":"{pourcentage}% utilisé","texteAction":"Réviser","btnAction":"Aller aux favoris"}},"récents":{"titre":"Documents récents","nouveau":"Nouveau document","nouvelleBd":"Base de données","nouveauProjet":"Projet","nouvelleNuée":"Science citoyenne","aucunRécent":"Vous n'avez aucun document récemment ouvert.","documentsRécents":"Documents récents","voirPlus":"Voir plus","plusN":"+ {0}"}}},"erreurs":{"init":{"titre":"Constellation n'a pas pu démarrer","explication":"C'est probablement de notre faute. Contactez-nous et nous vous dépannerons !"},"déjàLancé":{"titre":"Constellation est déjà ouverte","explication":"Assurez-vous de fermer toutes les instances de Constellation (ligne de commande, Python ou autre) ouvertes sur votre ordinateur, puis relancez Constellation."},"relancer":"Relancer Constellation"},"imageÉditable":{"imageTropGrande":"L'image est trop grande. Elle doit être inférieure à {tailleMaxKO} KO."},"listeNomsProfil":{"étiquetteNom":"Votre nom"},"kilimukku":{"contribuer":"Contribuer","titre":"Contribuer","sousTitre":"Aidez à traduire l'interface Constellation","langueSource":"Langue source","langueCible":"Langue cible","aucuneTraduction":"[Aucune traduction]","choisirMessage":"Pour commencer, choisissez un message à traduire.","titreSuggestions":"Suggestions","aucuneSuggestion":"Nous n'avons trouvé aucune suggestion communautaire pour ce message.","suggérer":"Suggérer","approuver":"Approuver","suggestions":{"aucuneTrouvée":"Aucune suggestion trouvée"}},"ennikkai":{"nouvelle":{"titre":"Proposition de système d'écriture","instructionNom":"Comment ce système de numération s'appelle-t-il ?","étiquetteNom":"Nom du système","indiceNom":"Par exemple, « ગુજરાતી » ou « देवनागरी »","instructionType":"Ce système de numération est-il positionnel ou exponentiel ?","instructionSymboles":"Inscrire , en ordre croissant, tous les symboles numériques de ce système de numération, en commançant par le 0.","étiquetteTypeSystème":"Type système","étiquetteSymboles":"Symboles numériques","étiquetteSymboleBase":"Symbole","indiceSymboleBase":"Par exemple, « 十 »","étiquetteValeurBase":"Valeur","indiceValeurBase":"Par exemple, « 10 »","instructionBases":"Inscrire les symboles de base, avec leurs valeurs numériques.","instructionUnicode":"Ce système de numération a-t-il un code Unicode existant ?","btnUnicode":"Vérifier en ligne","instructionConfirmation":"Confirmer création du système de numération {nom}.","erreurNomDupliqué":"Ce nom de système de numération existe déjà dans les données.","erreurSymbolesRépétés":"Aucun symbole ne peut être répété."},"type":{"இடஞ்சார்":"Positionnel","அடிமானம்":"Exponentiel"}},"nuchabäl":{"numération":"Numération","expré":"Expression régulière","direction":"Direction","oui":"Oui","non":"Non","écriture":{"système":"Écriture","nouvelle":{"titre":"Proposition de système d'écriture","btn":"Ajouter une écriture","instructionsÉchantillon":"Entrez un peu de texte dans n'importe quelle langue qui s'écrit avec ce système d'écriture.","instructionsDupliquée":"Ce système d'écriture existe peut-être déjà dans Constellation. S'agit-il du {nom} ?","instructionsDirection":"Dans quelle direction cette écriture doit-elle être écrite ?","instructionsNom":"Comment cette écriture s'appelle-t-elle ?","indiceNom":"Écrivez le nom dans l'écriture elle-même. P. ex., « 汉子 »","instructionsCode":"Proposez un code court pour identifier cette écriture.","instructionsNumération":"Quel système de numération cette écriture utilise-t-elle ?","instructionsExpré":"Proposez une expression régulière qui correspond à cette écriture.","btnExpré":"Pour de l'inspiration","confirmation":"Confirmer création de l'écriture {nom}.","btnCréation":"Ajouter écriture","erreurCodeÉcritureExistant":"Ce code existe déjà pour l'écriture {nom}","erreurCodeTropLong":"C'est pas un peu long ?"},"codes":{"nuchabäl":"nuch'ab'äl","i1":"ISO 639-1","i2":"ISO 639-2","i3":"ISO 639-3","gl":"Glottologue"}},"langue":{"nouvelle":{"titre":"Ajout de langue","instructionÉchantillon":"Entrez un peu de texte dans la langue que vous voulez ajouter.","sauterÉchantillon":"Sauter","instructionExistante":"Cette langue existe peut-être déjà dans Constellation. S'agit-il du {nom} ?","instructionÉcritureExistante":"Cette langue semble utiliser l'écriture {nom}. Est-ce bien exacte ?","instructionÉcriture":"Avec quelle écriture cette langue s'écrit-elle ?","instructionNouvelleÉcriture":"Cette langue semble utiliser une écriture qui n'est pas encore dans nos données.","instructionNom":"Comment cette langue s'appelle-t-elle ?","indiceNom":"Écrivez le nom dans la langue elle-même. P. ex., « ᱥᱟᱱᱛᱟᱲᱤ »","instructionCode":"Proposez un code court pour identifier cette langue.","instructionNumération":"Quel système de numération cette langue utilise-t-elle ?","instructionCodes":"Cette langue a-t-elle déjà un code ISO ou Glottologue (optionnel) ?","instructionConfirmation":"Confirmer création de la langue {nom}.","btnAjout":"Ajouter langue","erreurCodeExistant":"Ce code existe déjà pour la langue {langue}.","erreurCodeTropLong":"C'est pas un peu long ?","erreurÉcriture":"Vous devez écrire en {écriture}."}},"suggestion":{"par":"Par :"}},"licences":{"contenu":"Licence contenu","aucune":"Aucune licence","pareilPourContenu":"Même licence pour contenu","détails":{"droits":{"partager":"Vous pouvez distribuer ces données","adapter":"Vous pouvez modifier ces données","usageComercial":"Vous pouvez utiliser ces données à des fins commerciales","usagePrivé":"Vous pouvez modifier et utiliser les données à des fins d'utilisation privée","usageBrevets":"Les contributeurs vous offrent explicitement des droits au brevets"},"limitations":{"aucuneResponsabilité":"Limite la resposabilité des auteurs","aucuneGarantie":"Mentionne qu'aucune garantie n'est offerte ","marqueCommerce":"Exclut explicitement les marques de commerce des permissions octroyées par la licence","brevetExclu":"Exclut explicitement les brevets des permissions octroyées par la licence","sousLicence":"N'autorise pas la concession de sous-licences"},"conditions":{"attribution":"Les auteurs originaux du matériel doivent être mentionnés dans les redistributions","partageÉgal":"Les modifications doivent être partagés sous la même licence","inclureDroitDauteur":"Une notice de droit d'auteur doit être incluse avec le matériel s'il est distribué","indiquerChangements":"Les modifications au matériel doivent être indiquées lorsqu'il est redistribué","partagerCodeSource":"Le code source doit être partagé avec les distributions du matériel","usageRéseau":"L'utilisation du matériel pour offrir des services en ligne est considérée en tant que distribution","ia":"Les modèles d'intelligence artificielle entraînés avec ces données doivent eux aussi être publiés sous licence libre"}},"titrePartageÉgal":"Licence partage égale","infoPartageÉgal":"La licence de la BD que vous copiez précise que ses dérivées doivent utiliser la même licence. Vous ne pouvez donc pas changer celle-ci."},"compte":{"exporterCompte":{"titre":"Exportation de compte","exporter":"Exporter","titreErreur":"Erreur exportation","texteErreur":"Nous n'avons pas pu exporter vos données de compte. Contactez-nous si ça se répète."},"rejoindreCompte":{"titre":"Rejoindre un compte","avertissement":"En vous connectant à un différent compte, les données de votre compte actuel sur ce dispositif seront supprimées.","explication":"Ceci ne supprimera pas votre compte actuel s'il est déjà lié à un autre dispositif."},"effacerCompte":{"titre":"Effacer compte","avertissement":"Cette action est irréversible !","explication":"Ceci effacera toutes les données sur ce dispositif. Si vous avez plusieurs dispositifs liés à ce compte, vous devrez supprimer votre compte sur chacun de ceux-ci.","btnEffacer":"Effacer mon compte"}},"pages":{"compte":{"nouveauContact":"Nouveau contact","compte":{"ajouterDispositif":"Connecter un dispositif"}},"signalements":{"titre":"Vous éprouvez des difficultés ?","sousTitre":"Ne vous en faites pas ; nous sommes là pour vous aider.","bouton":"Signaler sur GitHub","boutonCourriel":"Support par courriel"},"automatisations":{"sousTitre":"Automatisez l'importation ou l'exportation de données","ajouterNouvelle":{"titre":"Nouvelle automatisation","sousTitre":"Exporter ou importer"},"aucune":"Votre compte n'a aucune automatisation pour l'instant."}},"automatisations":{"fréquence":{"unités":{"années":"années","mois":"mois","semaines":"semaines","jours":"jours","heures":"heures","minutes":"minutes","secondes":"secondes","millisecondes":"millisecondes"},"manuelle":"Manuellement","dynamique":"Dynamiquement","fixe":"À intervales fixes","aucune":"Non merci","indiceManuelle":"Lorsque je la déclencherai manuellement.","indiceDynamique":"Automatiquement, chaque fois que les données changeront.","indiceFixe":"Automatiquement, tous les ","indiceAucune":"Je ne veux pas répéter cette action.","pasSurNavig":"Non disponible sur navigateur","pasDeURL":"Non disponible avec source URL"}},"importations":{"carte":{"étiquetteFichier":"Choisissez un fichier...","étiquetteURL":"...ou bien un URL"}},"exportations":{"indice":"Exporter données","carte":{"titreObjetConstellation":"Données à exporter","titreDestination":"Destination","titreFormat":"Format","titreAutomatiser":"Automatiser ?","titreConfirmation":"Confirmation","étiquetteDestination":"Choisir un dossier","étiquetteFormatDoc":"Format d'exportation","étiquetteLangues":"Préférences langues","étiquetteInclureDocuments":"Inclure documents","indiceInclureDocuments":"Si les données incluent des documents tels que des photos ou des vidéos, inclure ceux-ci dans un fichier zip.","automatiser":"Voulez-vous répéter cette exportation dans le future ?"},"format":{"xlsx":"Document Excel (.xlsx)","xls":"Ancien document Excel (.xls)","ods":"Document LibreOffice (.ods)","csv":"Texte (.csv)","txt":"Texte (.txt)"}},"membres":{"contacts":"Contacts","anonyme":"Anonyme","aucunContact":"Aucune information de contact disponible","contact":"Site internet","confiance":{"bloqué":"Bloqué","inconnu":"Inconnu","peuDinteraction":"Peu d'interaction","interactionMoyenne":"Interaction moyenne","beaucoupDinteraction":"Beaucoup d'interaction","connaissance":"Connaissance"}},"bds":{"qualité":{"titre":"Qualité","licenceOuverte":"Licence ouverte","rechercheLicence":"Recherche licence en cours...","licenceNonReconnue":"Licence non reconnue"},"note":{"A":"A","A-":"A-","B":"B","B-":"B-","C+":"C+","C":"C","D":"D","F":"F"},"nouvelle":{"titreCheminement":"Nouvelle base de données","sousTitreCheminement":"Créez un bd vide ou utilisez un gabarit","créerNouvelle":"Nouvelle BD vide","copierDeBd":"Copier une BD existante","copierDeNuée":"À partir d'une nuée","titreNoms":"Le nom de votre BD","sousTitreNoms":"Vous pourrez toujours le modifier plus tard","texteIndiceNom":"Le nom de la base de données","titreDescriptions":"Description de la BD","sousTitreDescriptions":"À quoi votre BD servira-t-elle ?","texteÉtiquetteDescription":"Description de la BD","texteIndiceDescription":"Décrire en quelques phrase ce que la base de données contient.","titreMotsClefs":"Ajoutez des mots-clefs","sousTitreMotsClefs":"Ceux-ci serviront à indexer votre BD","titreLicence":"La licence","sousTitreLicence":"Choisissez la licence sous laquelle vos données seront disponibles","titreStatut":"Statut","sousTitreStatut":"Spécifier l'état de vos données","titreGabaritBd":"Créer de gabarit","sousTitreGabaritBd":"Choisir une BD gabarit","btn":"Nouvelle base de données","titreConfirmation":"Confirmation","sousTitreConfirmation":"Confirmer création BD","texteBtnCréation":"Créer BD","ouvrirAprèsCréation":"Ouvrir la BD"},"copier":{"copierDonnées":"Copier aussi les données"},"recherche":{"étiquette":"Rechercher une base de données","aucunRésultat":"Aucune BD retrouvée"},"aucunMotClef":"Aucun mot-clef"},"tableaux":{"aucun":"Aucun tableau","importer":"Importer données","nouveau":{"titreNoms":"Nom du tableau","sousTitreNoms":"Choisissez un nom pour votre tableau","texteIndiceNom":"Par exemple, « Observations » ou « Sites ».","titreColonnes":"Ajout de colonnes","sousTitreColonnes":"Vous pouvez aussi les ajouter plus tard","ajouterColonne":"Nouvelle colonne","titreConfirmation":"Confirmation","sousTitreConfirmation":"Confirmer création tableau","texteBtnCréation":"Créer tableau"},"règles":{"nouvelle":"Ajouter une règle"},"aucuneDonnée":"Aucune donnée","données":{"titreEffacerSélectionnées":"|Voulez-vous effacer {n} élément ?|Voulez-vous effacer {n} éléments ?","titreEffacer":"Voulez-vous effacer cet élément ?","nePlusConfirmerEffacer":"Ne plus me demander confirmation"}},"nuées":{"nouvelle":{"texteIndiceNom":"Par exemple, « Science citoyenne hydrologie Saint-Laurent ».","ouvrirAprèsCréation":"Ouvrir la nuée","btn":"Nouvelle nuée"},"recherche":{"étiquette":"Rechercher une nuée","aucunRésultat":"Aucune nuée retrouvée"}},"projets":{"nouveau":{"titreNoms":"Le nom de votre projet","titreDescriptions":"Description du projet","titreMotsClefs":"Ajoutez des mots-clefs","titreAjouterBds":"Ajouter des bases de données","titreConfirmation":"Confirmation","sousTitreNoms":"Choisissez un nom pour votre projet","sousTitreDescriptions":"Décrire le genre de données que le projet rassemble","sousTitreMotsClefs":"Ceux-ci serviront à indexer votre projet","sousTitreAjouterBds":"Vous pourrez ajouter d'autres bases de données plus tard","sousTitreConfirmation":"Confirmer création projet","texteIndiceNom":"Par exemple, « Hydrologie de l'asie » ou « Écologie de l'Amazonie »","texteAucuneDescription":"Aucune description de projet","texteÉtiquetteDescription":"Description du projet","texteIndiceDescription":"Décrire en quelques phrase ce que le projet contient.","texteCréer":"Confirmer la création du projet","texteBtnCréation":"Créer projet","ouvrirAprèsCréation":"Ouvrir le projet"}},"colonnes":{"nouvelle":{"titreVariable":"Choisir variable","sousTitreVariable":"Cette variable sera associée avec la colonne","titreIndex":"Index","sousTitreIndex":"Spécifier si c'est une colonne index","index":"Colonne index","titreRègles":"Règles colonne","sousTitreRègles":"Choisir des règles pour la colonne","titreConfirmation":"Confirmation","sousTitreConfirmation":"Confirmer création colonne","texteBtnCréation":"Créer colonne"},"carte":{"titre":"Options colonne","variable":"Variable","règles":"Règles"}},"motsClefs":{"nouveau":{"btn":"Nouveau mot-clef"},"recherche":{"aucunRésultat":"Aucun mot-clef retrouvé","étiquette":"Recherchez un mot-clef"},"éditeurMotsClefs":{"titre":"Mots-clefs associés","indice":"Modifier mots-clefs"}},"données":{"statut":{"carte":{"titre":"Statut des données"},"active":"Active","obsolète":"Obsolète","jouet":"Jouet","interne":"Interne","inclureNouvelle":"Spécifier une alternative ?","info":{"active":"Données prêtes à être utilisées","obsolète":"Données obsolète","jouet":"Données test, sans importance réelle","interne":"Données internes à une autre application"}}},"variables":{"nouvelle":{"titreNoms":"Nom","sousTitreNoms":"Nommer la variable","texteIndiceNom":"Par exemple, « Date d'échantillonage », « Salinité » ou « Espèce ».","titreDescriptions":"Description","sousTitreDescriptions":"Décrire ce que la variable représente","texteÉtiquetteDescription":"Description variable","texteIndiceDescription":"Par exemple, « Date que l'échantillon a été recueilli.  »","titreCatégorie":"Catégorie","sousTitreCatégorie":"Le type de données de la variable","catégorie":"Catégorie","typeListe":"Variable liste","titreUnités":"Unités","sousTitreUnités":"Spécifier les unités (optionnel)","titreRègles":"Règles","sousTitreRègles":"Spécifier les valeurs que cette variable peut prendre","titreConfirmation":"Confirmation","sousTitreConfirmation":"Confirmer la création de la variable","texteBtnCréation":"Créer variable","btn":"Nouvelle variable"},"catégories":{"numérique":"Numérique","horoDatage":"Horodatage","intervaleTemps":"Intervale temps","chaîne":"Chaîne","chaîneNonTraductible":"Chaîne non traductible","booléen":"Booléenne","géojson":"GéoJSON","audio":"Audio","image":"Image","vidéo":"Vidéo","fichier":"Fichier"},"indicesCatégories":{"numérique":"Un chiffre","horoDatage":"Date et heure","intervaleTemps":"Une plage de temps, entre deux horodatages","chaîne":"Du texte","chaîneNonTraductible":"Du texte non traductible","booléen":"Vrai ou faux","géojson":"Données géographiques GéoJSON","audio":"Fichier audio","image":"Fichier image","vidéo":"Fichier vidéo","fichier":"Fichier de n'importe quel format"},"règles":{"nouvelle":"Ajouter une règle","aucune":"Aucune règle spécifiée"},"recherche":{"étiquette":"Rechercher une variable","aucunRésultat":"Aucune variable retrouvée"}},"règles":{"nouvelle":{"titreTypeRègle":"Type de  règle","sousTitreTypeRègle":"Choisir le genre de règle","titreBorneFixeOuDynamique":"Type de borne","sousTitreBorneFixeOuDynamique":"Les bornes peuvent être fixes ou dynamiques","borneFixe":"Borne fixe","borneDynamiqueVariable":"Borne dynamique variable","borneDynamiqueColonne":"Borne dynamique colonne","titreConfirmer":"Confirmation","sousTitreConfirmer":"Confirmer la création de la règle","confirmer":"Créer règle"},"infos":{"existe":"Cette variable ne doit pas contenir de valeurs manquantes","bornes":"Cette variable doit être {op} à {val}","valeurCatégorique":"Valeurs limités selon liste pré-définie"},"types":{"existe":"Valeurs non-manquantes","borne":"Bornes","catégorique":"Catégories"}}}`),kaq={communs:{constellation:"Ch'umil"}},cst={communs:{constellation:"Constelación",suivant:"Siguiente",retour:"Regresar",anonyme:"Anónimo"}},messages={fr,த:JSON.parse('{"communs":{"constellation":"விண்மீன்","suivant":"அடுத்தது","retour":"பின்","erreurLangue":"இந்த உரை {langue} மொழியில் இருக்கவும்.","langagesInformatiques":{"ts":{"abr":"வகை"},"py":{"abr":"பை"},"julia":{"abr":"ஜூ"},"r":{"abr":"ஆர்"}},"copier":"நகல் எடு","sauvegarder":"சேமி","fermer":"முடி","annuler":"ரத்து","pointInterrogation":"?","baseCarteObjet":{"description":"விளக்கம்","sansNom":"பெயர் இல்லாதது","sansDescription":"விளக்கம் ஒன்றும் இல்லை","auteurs":"பங்களிப்பாளர்கள்","ajouterAuteur":"பங்களிப்பாளரை சேரு"}},"navigation":{"accueil":"வரவேற்பு","données":"என் தரவுகள்","recherche":"ஆராயுங்கள்","favoris":"என் பிடித்தவை","automatisations":"தானியங்கல்","signalements":"சிக்கலைப் புகாரளிக்க"},"accueil":{"démarrer":"தொடக்கம்","version":"பதிப்பு {version}","piedDePage":"விண்மீன் பங்களிப்பாளர்கள்","initialiserCompte":{"titreCheminement":"கணக்கு ஏற்கனவே இருக்கிறதா?","sousTitreCheminement":"புதிய கணக்கை உருவாக்கலாமா, ஏற்கனவே இருக்கும் கணக்கில் உள்ளிடலாமா?","titreNoms":"உங்கள் பெயரை உள்ளிடுங்கள்","sousTitreNoms":"எத்தனே மொழி, அவ்வளவு மகிழ்ச்சி!","titreImage":"படத்தை உள்ளிடுங்கள்","titreCompteÀRejoindre":"கணக்கில் உள்ளிடு","titrePersister":"உங்கள் தரவுகளை பாதுகாக்கட்டுமா?","titreCestParti":"அவ்வளவு தான்!","nouveauCompte":"புதிய கணக்கு","connecter":"கணக்கை இணையு","texteImage":"நீங்கள் விரும்பினால், மேலே தொட்டு உங்கள் பயனாளர் படத்தை தேர்ந்தெடுகொங்கள்.","textePersister":{"1":"விண்மீன் உங்கள் கூகல் ஆவணங்கள் அல்லது மின்னஞ்சல் கணக்கு மாதிரி ஒரு மையப்படுத்தப்பட்ட அமைப்பு இருந்தால், உங்கள் தரவுகள் எல்லாம் எங்கோ ஒரு மையப்படுத்தப்பட்ட வழங்கியில் சேமிக்கப்படும். தாங்களின் தரவுகளை திருத்தவும் அல்லது பார்க்கவும் என்றால், இந்த வழங்கியின் அனுமதி அவசியமாக வாங்கிவிட்டு தான் உங்களுக்கு சொந்த தரவுகளுக்கு அணுகல் அனுமதி கிடைக்கும்.","2":"ஆனால் விண்மீன் விநியோகிக்கப்பட்ட ஒரு மென்பொருள் ஆகும். உங்கள் தரவுகள் உங்கள் சாதனத்திலேயே சேமிக்கப்படும் என்பதால் இணையம் தொடர்பு கிடைக்காவிட்டாலும் விண்மீனைப் பயன்படுத்தலாம். ஆனால் இது சில உலாவிகளுக்கு தெரியாததால், சில தடவைகள் உங்கள் சேமிக்கப்பட்ட தரவுகளை அனுமதியில்லாமல் நீக்கும்.","3":"அப்படி துரதிருஷ்டமான ஒரு சந்தர்பம் ஆக கூடாது என்றால், உங்கள் தரவுகளை இப்பொழுதே பாதுகாக்கல்லாம்."},"persister":"இப்பொவே பாதுகாக்கு","pasPersister":"அப்புறமாக பார்க்கிறேன்","déjàPersistées":"உங்கள் தரவுகள் எற்கனவே பாதுகாக்கப்பட்டன","bienvenu":"விண்மீன்க்கு உங்களை வரவேற்கிறோம்","sousTitreBienvenu":"எங்களுக்கு மகிழ்ச்சி!","cestParti":"தொடக்கலாம்"},"connexion":{"afficherCode":"Afficher mon code","numériserCode":"Numériser un code"}},"listeNomsProfil":{"étiquetteNom":"உங்கள் பெயர்","indiceLangue":"பெயரின் மொழி","indiceNom":"உங்கள் பெயர்"},"kilimukku":{"aucuneTraduction":"[மொழிபெயர்ப்பு இல்லை]","titreSuggestions":"பரிந்துரைகள்","aucuneSuggestion":"இந்த செய்திக்காக எந்த பரிந்துரையும் கண்டுப்பிடிக்க முடியவில்லை","suggérer":"பரிந்துரையு","montrer":"வடிக்கட்டி","message":"செய்தியை தேர்ந்தெடு","indiceSuggestion":"உங்கள் பரிந்துரையை இங்கே உள்ளிடுங்கள்","filtre":{"toutes":"அனையும்","nonTraduite":"மொழிப்பெயர்ப்பில்லாமல்","sansSuggestion":"பரிந்துரையில்லாமல்"},"titreApprouvé":"அங்கீகரிக்கப்பட்ட மொழிபெயர்ப்பு","suggestions":{"communautaires":"சமூக பரிந்துரைகள்","automatiques":"தானாக பரிந்துரைகள்","autresLangues":"வேறு மொழிகள்"}},"nuchabäl":{"numération":"எண்கள்","direction":"திசை","nouvelle":{"titre":"புதிய மொழி முன்மொழிவு"},"code":"குறியீடு","codesÉcriture":{"nuchabäl":"நூச்சாபால்","i1":"சீ.அ.நி."}},"licences":{"aucune":"இந்த தரவுகளுக்காக எந்த உரிமத்தையும் கண்டுப்பிடிக்க முடியவில்லை","info":{"CC-BY-SA-4_0":{"nom":"படைப்பாக்க பொதுமங்களை குறிப்பிடுதல் மற்றும் அதே மாதிரி பகிர்தல் ௪,௦","abr":"ப.பொ.கு பகிர்தல் ௪,௦","lien":"https://creativecommons.org/licenses/by-sa/4.0/deed.fr"},"CC-BY-4_0":{"nom":"படைப்பாக்கப் பொதுமங்களை குறிப்பிடுதல் ௪,௦","abr":"ப.பொ.கு ௪,௦","lien":"https://creativecommons.org/licenses/by/4.0/deed.fr"},"CC-0-1_0":{"nom":"படைப்பாக்கப் பொதுமங்கள் ௦ ௧,௦","abr":"ப.பொ ௦ க,௦","lien":"https://creativecommons.org/publicdomain/zero/1.0/deed.fr"},"ODbl-1_0":{"nom":"திறந்த உரிமம் திறந்த தரவு பொதுமங்கள் ௧,௦","abr":"க.த.உரிமம் ௧,௦","lien":"https://opendatacommons.org/licenses/odbl/summary/"},"ODC-BY-1_0":{"nom":"உரிமம் பண்புக்கூறு திறந்த தரவப் பொதுமங்கள் ௧,௦","abr":"தி.த.பொ குறிப்பிடுதல் ௧,௦","lien":"https://opendatacommons.org/licenses/by/summary"},"PDDL":{"nom":"பொது களம் திறந்த தரவுப் பொதுமங்கள்","abr":"பொ.உ.ப உரிமம்","lien":"https://opendatacommons.org/licenses/pddl/summary"},"rvca-open":{"nom":"திறந்த தரவு உரிமம் ரிடோ பள்ளத்தாக்கு பாதுகாப்பு ஆணையம்","abr":"ரி.ப.பா ஆணையம்","lien":"https://rvcagis.github.io/jkan/datasets/rvca-open-licence/"},"0bsd":{"nom":"பெர்க்லி மென்பொருள் பரவல் பூஜ்ஜிய விதி","abr":"பெ.மெ.ப பூஜ்ஜிய விதி","lien":"https://choosealicense.com/licenses/0bsd/"},"afl-3_0":{"nom":"இலவச கல்வி உரிமம்","abr":"இ.க உரிமம்","lien":"https://choosealicense.com/licenses/afl-3.0/"},"agpl-3_0":{"nom":"பொது உரிமம் ஜிஎன்யூ அஃபெரோ ௩,௦","abr":"பொ.உ.ஜிஎன்யூ அஃபெரோ ௩,௦","lien":"https://choosealicense.com/licenses/agpl-3.0/"},"apache-2_0":{"nom":"உரிமம் அப்பாச்சி ௨.௦","abr":"உ.அப்பாச்சி ௨.௦","lien":"https://choosealicense.com/licenses/apache-2.0/"},"artistic-2_0":{"nom":"கலை உரிமம் ௨.௦","abr":"க.உரிமம் ௨.௦","lien":"https://choosealicense.com/licenses/artistic-2.0/"},"bsd-2-clause":{"nom":"எளிமைப்படுத்தப்பட்ட ௨-பிரிவு பெர்க்லி மென்பொருள் பரவல் உரிமம்","abr":"பெ.மெ.ப.உரிமம்","lien":"https://choosealicense.com/licenses/bsd-2-clause/"},"bsd-3-clause-clear":{"nom":"௩-பிரிவு பெர்க்லி மென்பொருள் பரவல் உரிமத்தை அழிக்கவும்","abr":"பெ.மெ.ப.உரிமம் அழிக்கவும்","lien":"https://choosealicense.com/licenses/bsd-3-clause-clear/"},"bsd-3-clause":{"nom":"பெர்க்லி மென்பொருள் பரவல் உரிமம் ௩-புதிய பிரிவு","abr":"பெ.மெ.ப.உ.௩-புதிய பிரிவு","lien":"https://choosealicense.com/licenses/bsd-3-clause/"},"bsd-4-clause":{"nom":"அசல் ௪-பிரிவு பெர்க்லி மென்பொருள் பரவல் உரிமம்","abr":"பெ.மெ.ப.உ அசல் ௪-பிரிவு","lien":"https://choosealicense.com/licenses/bsd-4-clause/"},"bsl-1_0":{"nom":"மென்பொருள் உரிமத்தை அதிகரிக்கவும் ௧.௦","abr":"மெ.உ அதிகரிக்கவும் ௧.௦ ","lien":"https://choosealicense.com/licenses/bsl-1.0/"},"cecill-2_1":{"nom":"இலவச மென்பொருள் உரிமம் சசில்ல வி௨,௧","abr":"இ.மெ.உ.சசில்ல வி௨,௧","lien":"https://choosealicense.com/licenses/cecill-2.1/"},"ecl-2_0":{"nom":"கல்வி சமூக உரிமம் ௨,௦","abr":"க.ச.உரிமம் ௨,௦","lien":"https://choosealicense.com/licenses/ecl-2.0/"},"epl-1_0":{"nom":"பொது உரிமம் கிரகணம் ௧,௦","abr":"பொ.உ.கிரகணம் ௧,௦","lien":"https://choosealicense.com/licenses/epl-1.0/"},"epl-2_0":{"nom":"பொது உரிமம் கிரகணம் ௨,0","abr":"பொ.உ.கிரகணம் ௨,௦","lien":"https://choosealicense.com/licenses/epl-2.0/"},"eupl-1_0":{"nom":"ஐரோப்பிய ஒன்றிய பொது உரிமம் ௧,௧","abr":"ஐ.ஓ.பொ.உரிமம் ௧,௧","lien":"https://choosealicense.com/licenses/eupl-1.1/"},"eupl-1_2":{"nom":"ஐரோப்பிய ஒன்றிய பொது உரிமம் ௧,௨","abr":"ஐ.ஓ.பொ.உரிமம் ௧,௨","lien":"https://choosealicense.com/licenses/eupl-1.2/"},"gpl-2_0":{"nom":"பொது உரிமம் ஜிஎன்யூ வி௨,௦","abr":"பொ.உ. ஜிஎன்யூ வி௨,௦","lien":"https://choosealicense.com/licenses/gpl-2.0/"},"gpl-3_0":{"nom":"பொது உரிமம் ஜிஎன்யூ வி௩,௦","abr":"பொ.உ. ஜிஎன்யூ வி௩,௦","lien":"https://choosealicense.com/licenses/gpl-3.0/"},"isc":{"nom":"உரிமம் இணைய அமைப்புகள் கூட்டமைப்பு","abr":"உ.இ.அ கூட்டமைப்பு","lien":"https://choosealicense.com/licenses/isc/"},"lgpl-2_1":{"nom":"குறைந்த பொது உரிமம் ஜிஎன்யூ வி௨,௧","abr":"கு.பொ.உ ஜிஎன்யூ வி௨,௧","lien":"https://choosealicense.com/licenses/lgpl-2.1/"},"lgpl-3_0":{"nom":"குறைந்த பொது உரிமம்  ஜிஎன்யூ வி௩,௧","abr":"கு.பொ.உ ஜிஎன்யூ வி௩,௧","lien":"https://choosealicense.com/licenses/lgpl-3.0/"},"lppl-1_3c":{"nom":"திட்ட பொது உரிமம் LaTeX வி௧,௩சி","abr":"தி.பொ.உ LaTeX வி௧,௩சி","lien":"https://choosealicense.com/licenses/lppl-1.3c/"},"mit-0":{"nom":"மாசாச்சூசெட்சு தொழில்நுட்பக் கழகம் பண்புக்கூறு இல்லை","abr":"மா.தொ.க பண்புக்கூறு இல்லை","lien":"https://choosealicense.com/licenses/mit-0/"},"mit":{"nom":"மாசாச்சூசெட்சு தொழில்நுட்பக் கழகம்","abr":"மா.தொ.கழகம்","lien":"https://choosealicense.com/licenses/mit/"},"mpl-2_0":{"nom":"பொது உரிமம் மொசில்லா ௨,௦","abr":"பொ.உ.மொசில்லா ௨,௦","lien":"https://choosealicense.com/licenses/mpl-2.0/"},"ms-pl":{"nom":"பொது உரிமம் மைக்ரோசாப்ட்","abr":"பொ.உ மைக்ரோசாப்ட்","lien":"https://choosealicense.com/licenses/ms-pl/"},"ms-rl":{"nom":"பரஸ்பர உரிமம் மைக்ரோசாப்ட்","abr":"ப.உ மைக்ரோசாப்ட்","lien":"https://choosealicense.com/licenses/ms-rl/"},"mulanpsl-2_0":{"nom":"முலான் அனுமதி மென்பொருள் உரிமம், பதிப்பு ௨","abr":"மு.அ.மெ.உ, பதிப்பு ௨","lien":"https://choosealicense.com/licenses/mulanpsl-2.0/"},"ncsa":{"nom":"திறந்த மூல உரிமம் தேசிய மீத்திறன் கணினியியல் பயன்பாட்டு மையம்/இல்லினாய்ஸ் பல்கலைக்கழகம்","abr":"தே.மீ.க.ப மையம்","lien":"https://choosealicense.com/licenses/ncsa/"},"osl-3_0":{"nom":"திறந்த மென்பொருள் உரிமம் ௩,௦","abr":"தி.மெ.உரிமம் ௩,௦","lien":"https://choosealicense.com/licenses/osl-3.0/"},"postgresql":{"nom":"உரிமம் போசுகிரசு","abr":"உ.போசுகிரசு","lien":"https://choosealicense.com/licenses/postgresql/"},"unlicence":{"nom":"பொது களம்","abr":"பொ.களம்","lien":"https://choosealicense.com/licenses/unlicense/"},"upl-1_0":{"nom":"உலகளாவிய அனுமதி உரிமம் ௧,௦","abr":"உ.அ.உரிமம் ௧,௦","lien":"https://choosealicense.com/licenses/upl-1.0/"},"vim":{"nom":"உரிமம் விம்","abr":"உ.விம்","lien":"https://choosealicense.com/licenses/vim/"},"wtfpl":{"nom":"பொது உரிமம் எது வேண்டுமானாலும்","abr":"பொ.உ.எது வேண்டுமானாலும்","lien":"https://choosealicense.com/licenses/wtfpl/"},"zlib":{"nom":"உரிமம் செட்லிப்","abr":"உ.செட்லிப்","lien":"https://choosealicense.com/licenses/zlib/"},"ofl-1_1":{"nom":"திறந்த மூல எழுத்துரு உரிமம் கோடைக்கால மொழியியல் நிறுவனம் ௧,௧","abr":"தி.மூ.எ.உரிமம் கோ.மொ.நி ௧,௧","lien":"https://choosealicense.com/licenses/ofl-1.1/"},"introuvable":{"nom":"உரிமம் கிடைக்கவில்லை","abr":"கிடைக்கவில்லை"}},"droits":{"sousTitre":"உரிமைகள்","aucune":"உரிமை இல்லை","partager":"பகிர்ந்து கொள்ள","adapter":"தகவமைத்துக்கொள்க","usageComercial":"வணிக பயன்பாடு","usagePrivé":"தனிப்பட்ட பயன்பாடு","usageBrevets":"காப்புரிமைகள்"},"conditions":{"sousTitre":"விதிமுறை","aucune":"நிபந்தனைகள் இல்லை","attribution":"விருது","partageÉgal":"அதே உரிமம்","inclureDroitDauteur":"காப்புரிமை","indiquerChangements":"மாற்றங்களைக் குறிக்கவும்","partagerCodeSource":"மூலக் குறியீடு","usageRéseau":"இணையம் பயன்பாடு சேர்க்கப்பட்டுள்ளது","ia":"செயற்கை நுண்ணறிவு"},"limitations":{"sousTitre":"கட்டுப்பாடுகள்","aucune":"வரம்புகள் இல்லை","aucuneResponsabilité":"பொறுப்பு இல்லை","aucuneGarantie":"உத்தரவாதம் இல்லை","marqueCommerce":"வர்த்தக முத்திரைகள்","brevetExclu":"காப்புரிமைகள்","sousLicence":"உரிமம் பெற்றது"},"avertissement":"கீழ்கண்ட தகவல் உரிமச் சுருக்கம் மட்டுமே என்பதால் தகவல்களில் பிழைகள் இருக்கலாம். இது சட்ட ஆலோசனை அல்ல. முழு உரிமத்தையும் படிக்குமாறு நாங்கள் பரிந்துரைக்கிறோம்.","titreAvertissement":"எச்சரிக்கை","lire":"உரிமத்தைப் படி","aucunLien":"இணைப்பு இல்லை","choisir":"ஒரு உரிமத்தைத் தேர்ந்தெடுக்கவும்","jetonAucune":"உரிமமில்லாமல்","carte":{"titre":"உரிமம்"}},"pages":{"signalements":{"titre":"சிரமம் உள்ளதா?","sousTitre":"எங்களுக்கு சொல்லுங்கள், உங்களை மகிழ்ச்சியாக உதவிப்போம்.","bouton":"கிட்ஹபில் புகாரளி","boutonCourriel":"மின்னஞ்சல் அனுப்பு"},"compte":{"titre":"கணக்கு","titreDialogueNoms":"பெயரை உள்ளிடுங்கள்","sousTitreDialogueNoms":"எத்தனை மொழி அவ்வளவு நல்லது","ongletCompte":"கணக்கு","ongletConnexions":"இணைப்புகள்","ongletThème":"விருப்பங்கள்","compte":{"mesDispositifs":"என் சாதனங்கள்","optionsAvancées":"மேம்பட்ட விருப்பங்கள்","titreExporterCompte":"கணக்கை எற்றுமதி செய்யு","sousTitreExporterCompte":"எற்றுமதிக்கப்பட்ட கணக்கு மூலம் கணக்குக்கு அணுகல் மீண்டும் கிடைக்கலாம்","titreRejoindreCompte":"கணக்கில் உள்ளிடு","sousTitreRejoindreCompte":"ஏற்கனவே இருக்கும் கணக்கைச் சேரு","btnRejoindreCompte":"உள்ளிடு","btnExporterCompte":"எற்றுமதி செய்யு","titreEffacerCompte":"கணக்கை நீக்கு","sousTitreEffacerCompte":"இந்த சாதனத்தை நீக்கு","btnEffacerCompte":"கணக்கை நீக்கு"},"connexions":{"Constellation":"விண்மீன்","SFIP":"ச. க. மு.","aucuneSFIP":"தற்காலத்தில் எந்த இணைப்பும் இல்லை","indiceSFIP":"சர்விகிரக கணியக்கோப்பு முறைமை","titreSFIP":"ச. க. மு இணைப்புகள்","titreConstellation":"விண்மீன் இணைப்புகள்","dispositifs":"{nDispositifs} சாதனங்கள், இணையத்தில் {nDispositifsEnLigne}"},"options":{"thèmeNuit":"ஒளி/இருள்","thèmeImages":"படத்தின் வடிவூட்டம்","langue":"இடைமுக மொழி","numération":"எண்ணுறு அமைப்பு","unDraw":"unDraw","வவவ":"வள்ளுவர் வள்ளலார் வட்டம்","entête":"வடிவூட்டம் மற்றும் மொழிகள்","couleurs":"வண்ணங்கள்","culture":"கலாச்சாரம்"}},"mesDonnées":{"titre":"என் தரவுகள்","motsClefs":"சிறப்பு சொற்கள்","variables":"மாறிகள்","tableaux":"அட்டவணைகள்","bds":"தரவு தளங்கள்","projets":"திட்டங்கள்","nuées":"கூட்டங்கள்","nouveauMotClef":"புதிய சிறப்பு சொல்","nouvelleVariable":"புதிய மாறி","nouvelleBd":"புதிய தரவு தளம்","nouveauProjet":"புதிய திட்டம்","nouvelleNuée":"புதிய கூட்டம்"},"recherche":{"titre":"தேடல்"},"automatisations":{"titre":"தானியங்கி"},"favoris":{"titre":"எனது பிடித்தவை"}},"importations":{"carte":{"étiquetteFichier":"ஒரு கோப்பைத் தேர்ந்தெடுகொங்கள்...","étiquetteURL":"...இல்லையென்றால் ஒரு இணைப்பை உள்ளிடுங்கள்"}},"membres":{"contacts":"தொடர்புகள்","confiance":{"bloqué":"தடுக்கப்பட்டது","inconnu":"தெரியாதவர்","peuDinteraction":"கொஞ்சம் நம்பிக்கை","interactionMoyenne":"ஒரளவுக்கு நம்பிக்கை","beaucoupDinteraction":"நன்றான நம்பிக்கை","connaissance":"தெரிந்தவர்","membresDeConfiance":"நம்பிக்கையானவர்கள்","membresBloqués":"தடுத்தப்பட்டவர்கள்","faireConfiance":"நம்பிக்கையானவர்","bloquerPublique":"பொது வழியாக தடுக்கப்பட்டவர்","bloquerPrivé":"தனிப்பட்ட வழியாக தடுக்கப்பட்டவர்","titreCarte":"பயனாளர் நம்பிக்கை","question":"இந்த பயனாளருக்கு எந்த அளவுக்கு நம்பிக்கை கொடுக்க விரும்புகிறீர்கள்?","indiceInconnu":"குறிப்பான நம்பிக்கை இல்லாதவர்.","indiceFaireConfiance":"நீங்கள் இந்த பயனாளரை நம்பிக்கிறீர்கள் என்று பயனாளர் அனைவருக்கும் தெரிந்து விடும். இந்த பயனாளருக்கு மேலே உங்கள் தெரிந்தவரின் நம்பிக்கையும் அதிகரிக்கும்.","indiceBloquerPublique":"நீங்கள் இந்த பயனாளரை தடுத்தீர்கள் என்று பயனாளர் அனைவருக்கும் தெரிந்து விடும். இந்த பயனாளருக்கு மேலே உங்கள் தெரிந்தவர்களின் நம்பிக்கையும் குறைந்து விடும்.","indiceBloquerPrivé":"நீங்கள் இந்த பயனாளரை தடுத்தீர்கள் என்று வேறு யாருக்குமே தெரியாது. உங்கள் கணக்கின் ஒவ்வொரு சாதனத்தில் இந்த பயனாளரை தடுக்க தேவையாக இருக்கும்."},"bds":"தரவு தளங்கள்","projets":"திட்டங்கள்","aucuneBd":"எந்த தரவுத்தளமும் இல்லை","aucunProjet":"எந்த திட்டமும் இல்லை","aucuneNuée":"எந்த கூட்டமும் இல்லை","nuées":"கூட்டங்கள்","moi":"நான் தான்","contact":{"courriel":"மின்னஞ்சல்","téléphone":"தொலைப்பேசி","télégramme":"தெலெகிராம்","whatsapp":"வாட்ஸாப்","autre":"வேறு வகையான தொடர்பு"},"nouvelleInfoContact":{"titre":"உங்கள் தொடர்பு தகவல்கள் உள்ளிடலாம்","avertissement":"இந்த தகவல்கள் பொது அணுகலில் வெளியிடப்படும்","indiceType":"தொரட்பு வகை","indiceAutreType":"தொடர்பு வகையை உள்ளிடுங்கள்","valeur":"உங்கள் தொடர்பை உள்ளிடுங்கள்"},"modifierInfoContact":{"titre":"தொடர்பைத் திருத்தி விடலாம்"},"menuContact":{"contacter":"தொடர்பு கொள்ளு","copier":"நகல் எடு","messageSalut":"வணக்கம்"},"vu":{"ceCompte":"நீங்கள்","enLigne":"இணையத்தில் உள்ளது","àLinstant":"தற்பொழுதே பார்த்தது","ilYAMinutes":"{n} நிமிடங்கள் முன்னால் பார்த்தது | ஒரு நிமிடம் முன்னால் பார்த்தது | {n} நிமிடங்கள் முன்னால் பார்த்தது","ilYAHeures":"{n} மணிநேரம் முன்னால் பார்த்தது | ஒரு மணிநேரம் முன்னால் பார்த்தது | {n} மணிநேரம் முன்னால் பார்த்தது","ilYAJours":"{n} நாட்கள் முன்னால் பார்த்தது | ஒரு நாள் முன்னால் பார்த்தது | {n} நாட்கள் முன்னால் பார்த்தது","ilYASemaines":"{n} வாரங்கள் முன்னால் பார்த்தது | ஒரு வாரம் முன்னால் பார்த்தது | {n} வாரங்கள் முன்னால் பார்த்தது","ilYAMois":"{n} மாதங்கள் முன்னால் பார்த்தது | ஒரு மாதம் முன்னால் பார்த்தது | {n} மாதங்கள் முன்னால் பார்த்தது","ilYALongtemps":"பல மாடங்களாக காணதில்லை"},"recherche":{"étiquette":"Rechercher un membre","aucunRésultat":"Aucun compte retrouvé"}},"bds":{"note":{"A":"அ","A-":"அ-","B":"ஆ","B-":"ஆ-","C+":"இ+","C":"இ","D":"ஈ","F":"உ"},"sansNom":"பெயர் இல்லாத தரவுத்தளம்","motsClefs":"சிறப்பு சொற்கள்","ouvrirBd":"தரவுத்தளத்தைத் திற","info":"தரவுத்தளத் தகவல்கள்","variables":"மாறிகள்","aucuneVariable":"எந்த மாறியும் இல்லை","aucunTableau":"எந்த அட்டவணையும் இல்லை","tableaux":"அட்டவணைகள்","qualité":"தரம்"},"nuées":{"nouvelle":{"ouvrirAprèsCréation":"உருவாக்கும் பின் கூட்டத்துக்கு செல்லு","titreNoms":"கூட்டத்தின் பெயர்","sousTitreNoms":"நீங்கள் வேலை செய்யும் இடத்தின் மொழிகளுக்கு முன்னுரிமை கொடுங்கள்","titreDescriptions":"கூட்டத்தின் விளக்கம்","sousTitreDescriptions":"கூட்டத்தின் நோக்கம் விள்ளக்கும் உரை உள்ளிடுங்கள்","texteÉtiquetteDescription":"கூட்டத்தின் விளக்கம்","texteIndiceDescription":"இந்த தரவு கூட்டத்தில் மூல் நோக்கம் என்ன?","texteAucuneDescription":"மேலே விளக்கத்தை உள்ளிடுங்கள்","titreAutorisation":"கூட்டத்தின் அங்கீகாரம்","sousTitreAutorisation":"யாருக்கும் பரிகும் அனுமதி இருக்கும் என்று குறிப்பிடவும்","parInvitation":"அழைக்கப்பட்ட நபர்கள் மட்டுமே","indiceParInvitation":"நீங்கள் அனுமத்த நபர்களால் மட்டுமே கூட்டத்தில் பங்களிக்க முடியும்.","ouverteÀTous":"திறந்த அணுகல்","indiceOuverteÀTous":"அனைவரும் கூட்டத்தில் பங்கேற்கலாம். வேண்டும் என்றால், குறிப்பான பயனாளர்களை நீங்கள் தடைக்கலாம்.","titreTableaux":"அட்டவணைகள்","sousTitreTableau":"இவற்றை அப்புறமாகவு மாற்றலாம்.","ajoutTableau":"அட்டவணை சேர்தல்","titreConfirmation":"உருவாக்க்ம","sousTitreConfirmation":"கழுவின் தகவல்களை அப்புறமாகவும் திரத்தலாம்","texteCréer":"கூட்டம் உருவாக்கிறதற்கு கீழே அழுத்தவும்","texteBtnCréation":"கூட்டத்தை உருவாக்கு"},"sansNom":"பெயர் இல்லாத கூட்டம்","carteNuée":{"ouvrirNuée":"கூட்டத்தை திற"}},"variables":{"catégories":{"numérique":"எண்","chaîne":"சரம்","chaîneNonTraductible":"மொழிபெயர்க்க முடியாத சரம்"},"sansNom":"பெயர் இல்லாத மாறி","catégorie":"வகை","règles":"விதிகள்"},"dispositifs":{"sansNom":"பெயரில்லாத சாதனம்","ajouter":"சாதனத்தைச் சேரு","ceDispositif":"இதே சாதனம்","inviter":{"titreCheminement":"புதிய சாதன சேர்தல்","sousTitreCheminement":"ரகசீய குறியீட்டாக சாதனத்தை சேரு","manuellement":"கைமுறையாக சேரு","codeR2":"குறியீட்டாக சேரு","titreManuelle":"கைமுறையான சேர்தல்","sousTitreManuelle":"வேறு சாதனத்தில் குறியீட்டை உள்ளிடு","titreCodeR2":"குறியீட்டாக சேரு","sousTitreCodeR2":"புகைப்படக்கருவியை பயன்படுத்து","horsLigne":"நீங்கள் இணையத்தில் இல்லை."},"type":{"téléphone":"கைப்பேசி","navigateur":"உலாவி","tablette":"கைக் கணினி","ordinateur":"கணினி","serveur":"வழங்கி","autre":"தெரியாத வகையான சாதனம்"}},"auteurs":{"carteGérer":{"titre":"பங்களிப்பாளர் சேர்தல்","sousTitre":"இந்த பங்களிப்பாளர்களுக்கு திருத்தம் அங்கீகாரம் உள்ளது","aucunRésultat":"கோரிக்கை படி எந்த பயனாளரும் இல்லை","nouveaux":"சேர்க்கபடும் பங்களிப்பாளர்கள்","ajouterCommeModérateur":"மதிப்பீட்டாளராக சேரு"},"item":{"titre":"எந்த பங்களிப்பாளரும் இல்லை | {n} பங்களிபாளர் | {n} பங்களிபாளர்கள்"}},"motsClefs":{"nouveau":{"titreNoms":"சிறப்பு சொலின் பெயர்","indiceNom":"உதாரணமாக - \\"நீரியல்\\", \\"சமூகவியல்\\", அல்லது \\"குடிமக்கள் அறிவியல்\\"","sousTitreNoms":"எத்தனை மொழிகள் தெரிந்தாலும் உள்ளிடுங்கள்","titreDescriptions":"சிறப்பு சொலின் விளக்கம்","indiceDescription":"எந்த மாதிரி தரவுகளுடன் இணைக்கப்படும்?","sousTitreDescriptions":"இந்த சிறக்கு சொல்லின் பொருள் என்ன?","titreConfirmation":"அவ்வளவு தான்","texteBtnCréation":"உருவாக்கு","sousTitreConfirmation":"சிறப்பு சொலின் தகவல்களை அப்புறமாகவும் திரத்தலாம்","texteCréer":"சிறப்பு சொல் உருவாக்கிறதற்கு கீழே அழுத்தவும்","texteIndiceDescription":"சொலின் விளக்கம்","texteAucuneDescription":"இந்த சிறப்பு சொற்கு மேலே ஒரு விளக்கத்தை உள்ளளிடலாம்"},"gérerMotsClefsObjet":"சிறப்பு சொல் மேலாண்மை","sansNom":"பெயர் இல்லாத சிறப்பு சொல்"},"lienObjet":{"indice":"விண்மீன் இணைப்பு"},"tableaux":{"sansNom":"பெயர் இல்லாத அட்டவணை","nouveau":"புதியது"},"règles":{"types":{"catégorie":"மதிப்பின் வகை"},"infos":{"catégorie":"இந்த மாறியின் மதிப்பு {categorie} வகை இருக்கவும்."}},"réplications":{"réplications":"எந்த நகலும் இல்லை | {n} நகல் | {n} நகல்கள்","réplicationsEnLigne":"(இணையத்தில் {0})","titre":"இந்த தரவின் நகல்கள்","sousTitre":"பிணையத்தில் உள்ள நகல்கள்","dispositifs":"சாதனங்கள் | சாதனம் | சாதனங்கள்","enLigne":"தற்பொழுது இணையத்தில் {n}","membres":"பயனாளர்கள் | பயனாளர் | பயனாளர்கள்","répliquéPar":"நகலெடுத்தவர் | நகலெடுத்தவர் | நகலெடுத்தவர்கள்","représentant":"இவற்றில்","sansFichiers":"கோப்புகள் இல்லாமல்"},"automatisations":{"item":{"titre":"எந்த தானியங்கலும் இல்லை | {n} தானியங்கல் | {n} தானியங்கல்கள்"},"carte":{"titre":"தானியங்கிகள்","importations":"இறக்குமதி","exportations":"ஏற்றுமதி","aucuneImportation":"தற்காலத்தில் எந்த இறக்குமதியும் இல்லை","aucuneExportation":"தற்காலத்தில் எந்த ஏற்றுமதியும் இல்லை","ajouterImportation":"புதிய இறக்குமதியைச் சேரு","ajouterExportation":"புதிய ஏற்றுமதியைச் சேரு"}},"épingler":{"titre":"ஒட்டிக்கொள்ளு","épingler":"ஒட்டிக்கொள்ளு","épinglé":"ஒட்டிக்கொள்ளப்பட்டது","optionsAvancées":"மேம்பட்ட விருப்பங்கள்","dispositifsÉpingle":"ஒட்டிக்கொள்ளும் சாதனங்கள்","dispositifsÉpingleFichier":"கோப்புகளை ஒட்டிக்கொள்ளும் சாதனங்கள்","aucun":"எந்த சாதனமும் இல்லை","indiceAucun":"எந்த சாதனத்திலும் ஒட்டிக்கொள்ள கூடாது","tous":"அனைத்தும் சாதனங்கள்","indiceTous":"உங்கள் அனைத்த சாதனங்களிலும் ஒட்டிக்கொள்ளப்படும்","installé":"நிறுவப்பட்ட சாதனங்கள்","indiceInstallé":"உலாவி தவிர உங்கள் எல்லா சாதனங்களிலும் ஒட்டிக்கொள்ளப்படும்","dispositifsSpécifiques":"குறிப்பிட்ட சாதனங்கள்","indiceDispositifsSpécifiques":"நீங்க குறிப்பிடும் சாதனங்களில் மட்டுமே ஒட்டிக்கொள்ளப்படும்","indiceSélectionnerDispositif":"சாதனங்களைக் குறிப்பிடுங்கள்"},"effacer":{"titre":"உண்மையில் நீக்க விரும்புகிறீர்களா?","avertissement":"ஒருமுறை நீக்கப்பட்டால், இந்த தரவுகள் மறுப்படியும் கிடைக்காது.","explication":"விண்மீன் விநியோகிக்கப்பட்ட ஒரு அமைப்பு இருக்கிறதால், இந்த தரவுகள் உங்கள் கணக்கிலிருந்து மட்டுமே நீக்கப்படும். வேறு பயனாளர்கள் ஏற்கனவே இதின் நகல் செய்து விட்டார்கள் என்பதில், இந்த தரவுகள் இன்னும் விண்மீன் பிணையத்தில் கிடைக்கும் என்று இருக்கலாம்.","effacer":"நீக்கு","indice":"தரவுகளை நீக்கு"},"objet":{"étiquetteNom":"பெயர்","indiceLangue":"மொழி","texteAucunNom":"பெயர் ஒன்றும் இல்லை","titreDialogueNoms":"பெயர்களின் பட்டியல்","sousTitreDialogueNoms":"அதிகமான மொழிகள் நல்லது","indiceDescription":"விளக்கம்","texteAucuneDescription":"எந்த விளக்கமும் இல்லை","titreDialogueDescriptions":"விளக்கம்","sousTitreDialogueDescriptions":"அதிகமான மொழிகள் நல்லது"},"code":{"indice":"நிரலாக்கம்","carte":{"titre":"இந்த தரவுகளுக்காக குறியீட்டை பெறு"},"options":{"langage":"நிரல்மொழி"}}}'),kaq,cst,മ:{communs:{constellation:"നക്ഷത്രസമൂഹം"}},ខ្មែរ:{communs:{constellation:"តារានិករ"}},فا:{communs:{constellation:"هم‌اختران"}},عرب:{communs:{constellation:"كوكبة"}},हिं:{communs:{constellation:"तारामंडल",auto:"स्वचालित",suivant:"अगला",retour:"वापस",ouvrir:"खोलना",oui:"हाँ",non:"ना",effacer:"मिटाना",télécharger:"अधोभारण करना",étiquetteNom:"नाम",indiceLangue:"भाषा",texteAucunNom:"नाम नीचे जोड़ा देना",erreurLangue:"{langue} भाषा में लिखना।",rechercher:"शोधना",autresLangues:"सारे भाषाएँ ({n})",troisPetitsPoints:"...",langagesInformatiques:{py:{abr:"पै"},julia:{abr:"जू"},r:{abr:"आर"}},copier:"प्रतिलिपि लेना",sauvegarder:"रखना"},navigation:{accueil:"स्वागत",données:"मेरे आँकड़े",automatisations:"स्वचालन"},accueil:{démarrer:"प्रारंभ",version:"संस्करण {version}",initialiserCompte:{nouveauCompte:"नया खाता"},page:{graphiques:{bds:"मेरे आँकड़ा संचय"},récents:{nouveau:"नया प्रलेख",nouvelleBd:"आँकड़ा संचय",nouvelleNuée:"नागरिक विज्ञान"}}},kilimukku:{contribuer:"योगदान देना",titreSuggestions:"सुझावें",aucuneSuggestion:"इस संदेश के लिये समुदाय सुझाव कई भी मिली नहीं।",suggérer:"सुझाव करना",suggestions:{communautaires:"समुदाय सुझावें",automatiques:"स्वचालित सुझावें",autresLangues:"दूसरी भाषाओं में"}},compte:{effacerCompte:{titre:"खाता मिटाना"}},pages:{compte:{nouveauContact:"नया संपर्क"}},bds:{nouvelle:{titreCheminement:"नया आँकड़ा संचय"}},tableaux:{nouveau:{titreNoms:"तालिका का नाम"}},nuées:{nouvelle:{texteIndiceNom:'उदाहरण के लिये, "दिल्ली में पानी का नागरिक विज्ञान का कर्यक्रम"।'}}}},URL_SIGNALEMENTS="https://github.com/reseau-constellation/iug/issues",URL_TÉLÉCHARGEMENTS="https://réseau-constellation.ca/#/téléchargements",IPA_TÉLÉCHARGEMENTS="https://api.github.com/repos/reseau-constellation/iug/releases",URL_DOCUMENTATION="https://docu.réseau-constellation.ca",URL_TUTORIELS="https://docu.réseau-constellation.ca/exemples/créationCompte.html",URL_COMMUNAUTÉ="https://matrix.to/#/!poDYzupTbvLiBsnQSr:matrix.org?via=matrix.org",COURRIEL_SIGNALEMENTS="julien.malard@mail.mcgill.ca",MAX_TAILLE_IMAGE=500*1e3,ID_KILIMUKKU_INTERFACE="/orbitdb/zdpuAsViPqnpRhUwN6kL7cSyLFaxSEkK233cJAChJMtc2vwLT",kilimukku=கிளிமூக்கை_உருவாக்கு({மொழி:"fr",மூல்_மொழி:"fr",மூல்_மொழிபெயர்ப்புகள்:messages,அடையாளம்:ID_KILIMUKKU_INTERFACE});var isVue2=!1;let activePinia;const setActivePinia=n=>activePinia=n,piniaSymbol=Symbol();function isPlainObject(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var MutationType;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const n=effectScope(!0),r=n.run(()=>ref$2({}));let g=[],_=[];const x=markRaw({install(S){setActivePinia(x),x._a=S,S.provide(piniaSymbol,x),S.config.globalProperties.$pinia=x,_.forEach(E=>g.push(E)),_=[]},use(S){return!this._a&&!isVue2?_.push(S):g.push(S),this},_p:g,_a:null,_e:n,_s:new Map,state:r});return x}const noop$1=()=>{};function addSubscription(n,r,g,_=noop$1){n.push(r);const x=()=>{const S=n.indexOf(r);S>-1&&(n.splice(S,1),_())};return!g&&getCurrentScope()&&onScopeDispose(x),x}function triggerSubscriptions(n,...r){n.slice().forEach(g=>{g(...r)})}const fallbackRunWithContext=n=>n(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(n,r){n instanceof Map&&r instanceof Map?r.forEach((g,_)=>n.set(_,g)):n instanceof Set&&r instanceof Set&&r.forEach(n.add,n);for(const g in r){if(!r.hasOwnProperty(g))continue;const _=r[g],x=n[g];isPlainObject(x)&&isPlainObject(_)&&n.hasOwnProperty(g)&&!isRef(_)&&!isReactive(_)?n[g]=mergeReactiveObjects(x,_):n[g]=_}return n}const skipHydrateSymbol=Symbol();function shouldHydrate(n){return!isPlainObject(n)||!n.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(n){return!!(isRef(n)&&n.effect)}function createOptionsStore(n,r,g,_){const{state:x,actions:S,getters:E}=r,C=g.state.value[n];let T;function R(){C||(g.state.value[n]=x?x():{});const A=toRefs(g.state.value[n]);return assign$1(A,S,Object.keys(E||{}).reduce((I,B)=>(I[B]=markRaw(computed(()=>{setActivePinia(g);const D=g._s.get(n);return E[B].call(D,D)})),I),{}))}return T=createSetupStore(n,R,r,g,_,!0),T}function createSetupStore(n,r,g={},_,x,S){let E;const C=assign$1({actions:{}},g),T={deep:!0};let R,A,I=[],B=[],D;const N=_.state.value[n];!S&&!N&&(_.state.value[n]={}),ref$2({});let M;function O(ie){let fe;R=A=!1,typeof ie=="function"?(ie(_.state.value[n]),fe={type:MutationType.patchFunction,storeId:n,events:D}):(mergeReactiveObjects(_.state.value[n],ie),fe={type:MutationType.patchObject,payload:ie,storeId:n,events:D});const xe=M=Symbol();nextTick$1().then(()=>{M===xe&&(R=!0)}),A=!0,triggerSubscriptions(I,fe,_.state.value[n])}const L=S?function(){const{state:fe}=g,xe=fe?fe():{};this.$patch(we=>{assign$1(we,xe)})}:noop$1;function F(){E.stop(),I=[],B=[],_._s.delete(n)}const U=(ie,fe="")=>{if(ACTION_MARKER in ie)return ie[ACTION_NAME]=fe,ie;const xe=function(){setActivePinia(_);const we=Array.from(arguments),G=[],J=[];function q(Z){G.push(Z)}function H(Z){J.push(Z)}triggerSubscriptions(B,{args:we,name:xe[ACTION_NAME],store:z,after:q,onError:H});let ve;try{ve=ie.apply(this&&this.$id===n?this:z,we)}catch(Z){throw triggerSubscriptions(J,Z),Z}return ve instanceof Promise?ve.then(Z=>(triggerSubscriptions(G,Z),Z)).catch(Z=>(triggerSubscriptions(J,Z),Promise.reject(Z))):(triggerSubscriptions(G,ve),ve)};return xe[ACTION_MARKER]=!0,xe[ACTION_NAME]=fe,xe},j={_p:_,$id:n,$onAction:addSubscription.bind(null,B),$patch:O,$reset:L,$subscribe(ie,fe={}){const xe=addSubscription(I,ie,fe.detached,()=>we()),we=E.run(()=>watch(()=>_.state.value[n],G=>{(fe.flush==="sync"?A:R)&&ie({storeId:n,type:MutationType.direct,events:D},G)},assign$1({},T,fe)));return xe},$dispose:F},z=reactive(j);_._s.set(n,z);const X=(_._a&&_._a.runWithContext||fallbackRunWithContext)(()=>_._e.run(()=>(E=effectScope()).run(()=>r({action:U}))));for(const ie in X){const fe=X[ie];if(isRef(fe)&&!isComputed(fe)||isReactive(fe))S||(N&&shouldHydrate(fe)&&(isRef(fe)?fe.value=N[ie]:mergeReactiveObjects(fe,N[ie])),_.state.value[n][ie]=fe);else if(typeof fe=="function"){const xe=U(fe,ie);X[ie]=xe,C.actions[ie]=fe}}return assign$1(z,X),assign$1(toRaw(z),X),Object.defineProperty(z,"$state",{get:()=>_.state.value[n],set:ie=>{O(fe=>{assign$1(fe,ie)})}}),_._p.forEach(ie=>{assign$1(z,E.run(()=>ie({store:z,app:_._a,pinia:_,options:C})))}),N&&S&&g.hydrate&&g.hydrate(z.$state,N),R=!0,A=!0,z}/*! #__NO_SIDE_EFFECTS__ */function defineStore(n,r,g){let _,x;const S=typeof r=="function";typeof n=="string"?(_=n,x=S?g:r):(x=n,_=n.id);function E(C,T){const R=hasInjectionContext();return C=C||(R?inject$1(piniaSymbol,null):null),C&&setActivePinia(C),C=activePinia,C._s.has(_)||(S?createSetupStore(_,r,x,C):createOptionsStore(_,x,C)),C._s.get(_)}return E.$id=_,E}function storeToRefs(n){{const r=toRaw(n),g={};for(const _ in r){const x=r[_];x.effect?g[_]=computed({get:()=>n[_],set(S){n[_]=S}}):(isRef(x)||isReactive(x))&&(g[_]=toRef(n,_))}return g}}const suspectProtoRx=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,suspectConstructorRx=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,JsonSigRx=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(n,r){if(n==="__proto__"||n==="constructor"&&r&&typeof r=="object"&&"prototype"in r){warnKeyDropped(n);return}return r}function warnKeyDropped(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function destr(n,r={}){if(typeof n!="string")return n;const g=n.trim();if(n[0]==='"'&&n.endsWith('"')&&!n.includes("\\"))return g.slice(1,-1);if(g.length<=9){const _=g.toLowerCase();if(_==="true")return!0;if(_==="false")return!1;if(_==="undefined")return;if(_==="null")return null;if(_==="nan")return Number.NaN;if(_==="infinity")return Number.POSITIVE_INFINITY;if(_==="-infinity")return Number.NEGATIVE_INFINITY}if(!JsonSigRx.test(n)){if(r.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(suspectProtoRx.test(n)||suspectConstructorRx.test(n)){if(r.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,jsonParseTransform)}return JSON.parse(n)}catch(_){if(r.strict)throw _;return n}}function get(n,r){if(n==null)return;let g=n;for(let _=0;_<r.length;_++){if(g==null||g[r[_]]==null)return;g=g[r[_]]}return g}function set(n,r,g){if(g.length===0)return r;const _=g[0];return g.length>1&&(r=set(typeof n!="object"||n===null||!Object.prototype.hasOwnProperty.call(n,_)?Number.isInteger(Number(g[1]))?[]:{}:n[_],r,Array.prototype.slice.call(g,1))),Number.isInteger(Number(_))&&Array.isArray(n)?n.slice()[_]:Object.assign({},n,{[_]:r})}function unset(n,r){if(n==null||r.length===0)return n;if(r.length===1){if(n==null)return n;if(Number.isInteger(r[0])&&Array.isArray(n))return Array.prototype.slice.call(n,0).splice(r[0],1);const g={};for(const _ in n)g[_]=n[_];return delete g[r[0]],g}if(n[r[0]]==null){if(Number.isInteger(r[0])&&Array.isArray(n))return Array.prototype.concat.call([],n);const g={};for(const _ in n)g[_]=n[_];return g}return set(n,unset(n[r[0]],Array.prototype.slice.call(r,1)),[r[0]])}function deepPickUnsafe(n,r){return r.map(g=>g.split(".")).map(g=>[g,get(n,g)]).filter(g=>g[1]!==void 0).reduce((g,_)=>set(g,_[1],_[0]),{})}function deepOmitUnsafe(n,r){return r.map(g=>g.split(".")).reduce((g,_)=>unset(g,_),n)}function hydrateStore(n,{storage:r,serializer:g,key:_,debug:x,pick:S,omit:E,beforeHydrate:C,afterHydrate:T},R,A=!0){try{A&&C?.(R);const I=r.getItem(_);if(I){const B=g.deserialize(I),D=S?deepPickUnsafe(B,S):B,N=E?deepOmitUnsafe(D,E):D;n.$patch(N)}A&&T?.(R)}catch(I){x&&console.error("[pinia-plugin-persistedstate]",I)}}function persistState(n,{storage:r,serializer:g,key:_,debug:x,pick:S,omit:E}){try{const C=S?deepPickUnsafe(n,S):n,T=E?deepOmitUnsafe(C,E):C,R=g.serialize(T);r.setItem(_,R)}catch(C){x&&console.error("[pinia-plugin-persistedstate]",C)}}function createPersistence(n,r,g){const{pinia:_,store:x,options:{persist:S=g}}=n;if(!S)return;if(!(x.$id in _.state.value)){const T=_._s.get(x.$id.replace("__hot:",""));T&&Promise.resolve().then(()=>T.$persist());return}const C=(Array.isArray(S)?S:S===!0?[{}]:[S]).map(r);x.$hydrate=({runHooks:T=!0}={})=>{C.forEach(R=>{hydrateStore(x,R,n,T)})},x.$persist=()=>{C.forEach(T=>{persistState(x.$state,T)})},C.forEach(T=>{hydrateStore(x,T,n),x.$subscribe((R,A)=>persistState(A,T),{detached:!0})})}function createPersistedState(n={}){return function(r){createPersistence(r,g=>({key:(n.key?n.key:_=>_)(g.key??r.store.$id),debug:g.debug??n.debug??!1,serializer:g.serializer??n.serializer??{serialize:_=>JSON.stringify(_),deserialize:_=>destr(_)},storage:g.storage??n.storage??window.localStorage,beforeHydrate:g.beforeHydrate,afterHydrate:g.afterHydrate,pick:g.pick,omit:g.omit}),n.auto??!1)}}var src_default=createPersistedState();const pinia=createPinia();pinia.use(src_default);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function isESModule(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&isRouteComponent(n.default)}const assign=Object.assign;function applyToParams(n,r){const g={};for(const _ in r){const x=r[_];g[_]=isArray(x)?x.map(n):n(x)}return g}const noop=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(n){return encodeURI(""+n).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(n){return commonEncode(n).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(n){return commonEncode(n).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(n){return encodeQueryValue(n).replace(EQUAL_RE,"%3D")}function encodePath(n){return commonEncode(n).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(n){return n==null?"":encodePath(n).replace(SLASH_RE,"%2F")}function decode(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=n=>n.replace(TRAILING_SLASH_RE,"");function parseURL(n,r,g="/"){let _,x={},S="",E="";const C=r.indexOf("#");let T=r.indexOf("?");return C<T&&C>=0&&(T=-1),T>-1&&(_=r.slice(0,T),S=r.slice(T+1,C>-1?C:r.length),x=n(S)),C>-1&&(_=_||r.slice(0,C),E=r.slice(C,r.length)),_=resolveRelativePath(_??r,g),{fullPath:_+(S&&"?")+S+E,path:_,query:x,hash:decode(E)}}function stringifyURL(n,r){const g=r.query?n(r.query):"";return r.path+(g&&"?")+g+(r.hash||"")}function stripBase(n,r){return!r||!n.toLowerCase().startsWith(r.toLowerCase())?n:n.slice(r.length)||"/"}function isSameRouteLocation(n,r,g){const _=r.matched.length-1,x=g.matched.length-1;return _>-1&&_===x&&isSameRouteRecord(r.matched[_],g.matched[x])&&isSameRouteLocationParams(r.params,g.params)&&n(r.query)===n(g.query)&&r.hash===g.hash}function isSameRouteRecord(n,r){return(n.aliasOf||n)===(r.aliasOf||r)}function isSameRouteLocationParams(n,r){if(Object.keys(n).length!==Object.keys(r).length)return!1;for(const g in n)if(!isSameRouteLocationParamsValue(n[g],r[g]))return!1;return!0}function isSameRouteLocationParamsValue(n,r){return isArray(n)?isEquivalentArray(n,r):isArray(r)?isEquivalentArray(r,n):n===r}function isEquivalentArray(n,r){return isArray(r)?n.length===r.length&&n.every((g,_)=>g===r[_]):n.length===1&&n[0]===r}function resolveRelativePath(n,r){if(n.startsWith("/"))return n;if(!n)return r;const g=r.split("/"),_=n.split("/"),x=_[_.length-1];(x===".."||x===".")&&_.push("");let S=g.length-1,E,C;for(E=0;E<_.length;E++)if(C=_[E],C!==".")if(C==="..")S>1&&S--;else break;return g.slice(0,S).join("/")+"/"+_.slice(E).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(n){n.pop="pop",n.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(n){n.back="back",n.forward="forward",n.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(n){if(!n)if(isBrowser){const r=document.querySelector("base");n=r&&r.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),removeTrailingSlash(n)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(n,r){return n.replace(BEFORE_HASH_RE,"#")+r}function getElementPosition(n,r){const g=document.documentElement.getBoundingClientRect(),_=n.getBoundingClientRect();return{behavior:r.behavior,left:_.left-g.left-(r.left||0),top:_.top-g.top-(r.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(n){let r;if("el"in n){const g=n.el,_=typeof g=="string"&&g.startsWith("#"),x=typeof g=="string"?_?document.getElementById(g.slice(1)):document.querySelector(g):g;if(!x)return;r=getElementPosition(x,n)}else r=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(r):window.scrollTo(r.left!=null?r.left:window.scrollX,r.top!=null?r.top:window.scrollY)}function getScrollKey(n,r){return(history.state?history.state.position-r:-1)+n}const scrollPositions=new Map;function saveScrollPosition(n,r){scrollPositions.set(n,r)}function getSavedScrollPosition(n){const r=scrollPositions.get(n);return scrollPositions.delete(n),r}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(n,r){const{pathname:g,search:_,hash:x}=r,S=n.indexOf("#");if(S>-1){let C=x.includes(n.slice(S))?n.slice(S).length:1,T=x.slice(C);return T[0]!=="/"&&(T="/"+T),stripBase(T,"")}return stripBase(g,n)+_+x}function useHistoryListeners(n,r,g,_){let x=[],S=[],E=null;const C=({state:B})=>{const D=createCurrentLocation(n,location),N=g.value,M=r.value;let O=0;if(B){if(g.value=D,r.value=B,E&&E===N){E=null;return}O=M?B.position-M.position:0}else _(D);x.forEach(L=>{L(g.value,N,{delta:O,type:NavigationType.pop,direction:O?O>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function T(){E=g.value}function R(B){x.push(B);const D=()=>{const N=x.indexOf(B);N>-1&&x.splice(N,1)};return S.push(D),D}function A(){const{history:B}=window;B.state&&B.replaceState(assign({},B.state,{scroll:computeScrollPosition()}),"")}function I(){for(const B of S)B();S=[],window.removeEventListener("popstate",C),window.removeEventListener("beforeunload",A)}return window.addEventListener("popstate",C),window.addEventListener("beforeunload",A,{passive:!0}),{pauseListeners:T,listen:R,destroy:I}}function buildState(n,r,g,_=!1,x=!1){return{back:n,current:r,forward:g,replaced:_,position:window.history.length,scroll:x?computeScrollPosition():null}}function useHistoryStateNavigation(n){const{history:r,location:g}=window,_={value:createCurrentLocation(n,g)},x={value:r.state};x.value||S(_.value,{back:null,current:_.value,forward:null,position:r.length-1,replaced:!0,scroll:null},!0);function S(T,R,A){const I=n.indexOf("#"),B=I>-1?(g.host&&document.querySelector("base")?n:n.slice(I))+T:createBaseLocation()+n+T;try{r[A?"replaceState":"pushState"](R,"",B),x.value=R}catch(D){console.error(D),g[A?"replace":"assign"](B)}}function E(T,R){const A=assign({},r.state,buildState(x.value.back,T,x.value.forward,!0),R,{position:x.value.position});S(T,A,!0),_.value=T}function C(T,R){const A=assign({},x.value,r.state,{forward:T,scroll:computeScrollPosition()});S(A.current,A,!0);const I=assign({},buildState(_.value,T,null),{position:A.position+1},R);S(T,I,!1),_.value=T}return{location:_,state:x,push:C,replace:E}}function createWebHistory(n){n=normalizeBase(n);const r=useHistoryStateNavigation(n),g=useHistoryListeners(n,r.state,r.location,r.replace);function _(S,E=!0){E||g.pauseListeners(),history.go(S)}const x=assign({location:"",base:n,go:_,createHref:createHref.bind(null,n)},r,g);return Object.defineProperty(x,"location",{enumerable:!0,get:()=>r.location.value}),Object.defineProperty(x,"state",{enumerable:!0,get:()=>r.state.value}),x}function createWebHashHistory(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),createWebHistory(n)}function isRouteLocation(n){return typeof n=="string"||n&&typeof n=="object"}function isRouteName(n){return typeof n=="string"||typeof n=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(n,r){return assign(new Error,{type:n,[NavigationFailureSymbol]:!0},r)}function isNavigationFailure(n,r){return n instanceof Error&&NavigationFailureSymbol in n&&(r==null||!!(n.type&r))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(n,r){const g=assign({},BASE_PATH_PARSER_OPTIONS,r),_=[];let x=g.start?"^":"";const S=[];for(const R of n){const A=R.length?[]:[90];g.strict&&!R.length&&(x+="/");for(let I=0;I<R.length;I++){const B=R[I];let D=40+(g.sensitive?.25:0);if(B.type===0)I||(x+="/"),x+=B.value.replace(REGEX_CHARS_RE,"\\$&"),D+=40;else if(B.type===1){const{value:N,repeatable:M,optional:O,regexp:L}=B;S.push({name:N,repeatable:M,optional:O});const F=L||BASE_PARAM_PATTERN;if(F!==BASE_PARAM_PATTERN){D+=10;try{new RegExp(`(${F})`)}catch(j){throw new Error(`Invalid custom RegExp for param "${N}" (${F}): `+j.message)}}let U=M?`((?:${F})(?:/(?:${F}))*)`:`(${F})`;I||(U=O&&R.length<2?`(?:/${U})`:"/"+U),O&&(U+="?"),x+=U,D+=20,O&&(D+=-8),M&&(D+=-20),F===".*"&&(D+=-50)}A.push(D)}_.push(A)}if(g.strict&&g.end){const R=_.length-1;_[R][_[R].length-1]+=.7000000000000001}g.strict||(x+="/?"),g.end?x+="$":g.strict&&!x.endsWith("/")&&(x+="(?:/|$)");const E=new RegExp(x,g.sensitive?"":"i");function C(R){const A=R.match(E),I={};if(!A)return null;for(let B=1;B<A.length;B++){const D=A[B]||"",N=S[B-1];I[N.name]=D&&N.repeatable?D.split("/"):D}return I}function T(R){let A="",I=!1;for(const B of n){(!I||!A.endsWith("/"))&&(A+="/"),I=!1;for(const D of B)if(D.type===0)A+=D.value;else if(D.type===1){const{value:N,repeatable:M,optional:O}=D,L=N in R?R[N]:"";if(isArray(L)&&!M)throw new Error(`Provided param "${N}" is an array but it is not repeatable (* or + modifiers)`);const F=isArray(L)?L.join("/"):L;if(!F)if(O)B.length<2&&(A.endsWith("/")?A=A.slice(0,-1):I=!0);else throw new Error(`Missing required param "${N}"`);A+=F}}return A||"/"}return{re:E,score:_,keys:S,parse:C,stringify:T}}function compareScoreArray(n,r){let g=0;for(;g<n.length&&g<r.length;){const _=r[g]-n[g];if(_)return _;g++}return n.length<r.length?n.length===1&&n[0]===80?-1:1:n.length>r.length?r.length===1&&r[0]===80?1:-1:0}function comparePathParserScore(n,r){let g=0;const _=n.score,x=r.score;for(;g<_.length&&g<x.length;){const S=compareScoreArray(_[g],x[g]);if(S)return S;g++}if(Math.abs(x.length-_.length)===1){if(isLastScoreNegative(_))return 1;if(isLastScoreNegative(x))return-1}return x.length-_.length}function isLastScoreNegative(n){const r=n[n.length-1];return n.length>0&&r[r.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(n){if(!n)return[[]];if(n==="/")return[[ROOT_TOKEN]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function r(D){throw new Error(`ERR (${g})/"${R}": ${D}`)}let g=0,_=g;const x=[];let S;function E(){S&&x.push(S),S=[]}let C=0,T,R="",A="";function I(){R&&(g===0?S.push({type:0,value:R}):g===1||g===2||g===3?(S.length>1&&(T==="*"||T==="+")&&r(`A repeatable param (${R}) must be alone in its segment. eg: '/:ids+.`),S.push({type:1,value:R,regexp:A,repeatable:T==="*"||T==="+",optional:T==="*"||T==="?"})):r("Invalid state to consume buffer"),R="")}function B(){R+=T}for(;C<n.length;){if(T=n[C++],T==="\\"&&g!==2){_=g,g=4;continue}switch(g){case 0:T==="/"?(R&&I(),E()):T===":"?(I(),g=1):B();break;case 4:B(),g=_;break;case 1:T==="("?g=2:VALID_PARAM_RE.test(T)?B():(I(),g=0,T!=="*"&&T!=="?"&&T!=="+"&&C--);break;case 2:T===")"?A[A.length-1]=="\\"?A=A.slice(0,-1)+T:g=3:A+=T;break;case 3:I(),g=0,T!=="*"&&T!=="?"&&T!=="+"&&C--,A="";break;default:r("Unknown state");break}}return g===2&&r(`Unfinished custom RegExp for param "${R}"`),I(),E(),x}function createRouteRecordMatcher(n,r,g){const _=tokensToParser(tokenizePath(n.path),g),x=assign(_,{record:n,parent:r,children:[],alias:[]});return r&&!x.record.aliasOf==!r.record.aliasOf&&r.children.push(x),x}function createRouterMatcher(n,r){const g=[],_=new Map;r=mergeOptions({strict:!1,end:!0,sensitive:!1},r);function x(I){return _.get(I)}function S(I,B,D){const N=!D,M=normalizeRouteRecord(I);M.aliasOf=D&&D.record;const O=mergeOptions(r,I),L=[M];if("alias"in I){const j=typeof I.alias=="string"?[I.alias]:I.alias;for(const z of j)L.push(normalizeRouteRecord(assign({},M,{components:D?D.record.components:M.components,path:z,aliasOf:D?D.record:M})))}let F,U;for(const j of L){const{path:z}=j;if(B&&z[0]!=="/"){const W=B.record.path,X=W[W.length-1]==="/"?"":"/";j.path=B.record.path+(z&&X+z)}if(F=createRouteRecordMatcher(j,B,O),D?D.alias.push(F):(U=U||F,U!==F&&U.alias.push(F),N&&I.name&&!isAliasRecord(F)&&E(I.name)),isMatchable(F)&&T(F),M.children){const W=M.children;for(let X=0;X<W.length;X++)S(W[X],F,D&&D.children[X])}D=D||F}return U?()=>{E(U)}:noop}function E(I){if(isRouteName(I)){const B=_.get(I);B&&(_.delete(I),g.splice(g.indexOf(B),1),B.children.forEach(E),B.alias.forEach(E))}else{const B=g.indexOf(I);B>-1&&(g.splice(B,1),I.record.name&&_.delete(I.record.name),I.children.forEach(E),I.alias.forEach(E))}}function C(){return g}function T(I){const B=findInsertionIndex(I,g);g.splice(B,0,I),I.record.name&&!isAliasRecord(I)&&_.set(I.record.name,I)}function R(I,B){let D,N={},M,O;if("name"in I&&I.name){if(D=_.get(I.name),!D)throw createRouterError(1,{location:I});O=D.record.name,N=assign(paramsFromLocation(B.params,D.keys.filter(U=>!U.optional).concat(D.parent?D.parent.keys.filter(U=>U.optional):[]).map(U=>U.name)),I.params&&paramsFromLocation(I.params,D.keys.map(U=>U.name))),M=D.stringify(N)}else if(I.path!=null)M=I.path,D=g.find(U=>U.re.test(M)),D&&(N=D.parse(M),O=D.record.name);else{if(D=B.name?_.get(B.name):g.find(U=>U.re.test(B.path)),!D)throw createRouterError(1,{location:I,currentLocation:B});O=D.record.name,N=assign({},B.params,I.params),M=D.stringify(N)}const L=[];let F=D;for(;F;)L.unshift(F.record),F=F.parent;return{name:O,path:M,params:N,matched:L,meta:mergeMetaFields(L)}}n.forEach(I=>S(I));function A(){g.length=0,_.clear()}return{addRoute:S,resolve:R,removeRoute:E,clearRoutes:A,getRoutes:C,getRecordMatcher:x}}function paramsFromLocation(n,r){const g={};for(const _ of r)_ in n&&(g[_]=n[_]);return g}function normalizeRouteRecord(n){const r={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:normalizeRecordProps(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(r,"mods",{value:{}}),r}function normalizeRecordProps(n){const r={},g=n.props||!1;if("component"in n)r.default=g;else for(const _ in n.components)r[_]=typeof g=="object"?g[_]:g;return r}function isAliasRecord(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function mergeMetaFields(n){return n.reduce((r,g)=>assign(r,g.meta),{})}function mergeOptions(n,r){const g={};for(const _ in n)g[_]=_ in r?r[_]:n[_];return g}function findInsertionIndex(n,r){let g=0,_=r.length;for(;g!==_;){const S=g+_>>1;comparePathParserScore(n,r[S])<0?_=S:g=S+1}const x=getInsertionAncestor(n);return x&&(_=r.lastIndexOf(x,_-1)),_}function getInsertionAncestor(n){let r=n;for(;r=r.parent;)if(isMatchable(r)&&comparePathParserScore(n,r)===0)return r}function isMatchable({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function parseQuery(n){const r={};if(n===""||n==="?")return r;const _=(n[0]==="?"?n.slice(1):n).split("&");for(let x=0;x<_.length;++x){const S=_[x].replace(PLUS_RE," "),E=S.indexOf("="),C=decode(E<0?S:S.slice(0,E)),T=E<0?null:decode(S.slice(E+1));if(C in r){let R=r[C];isArray(R)||(R=r[C]=[R]),R.push(T)}else r[C]=T}return r}function stringifyQuery(n){let r="";for(let g in n){const _=n[g];if(g=encodeQueryKey(g),_==null){_!==void 0&&(r+=(r.length?"&":"")+g);continue}(isArray(_)?_.map(S=>S&&encodeQueryValue(S)):[_&&encodeQueryValue(_)]).forEach(S=>{S!==void 0&&(r+=(r.length?"&":"")+g,S!=null&&(r+="="+S))})}return r}function normalizeQuery(n){const r={};for(const g in n){const _=n[g];_!==void 0&&(r[g]=isArray(_)?_.map(x=>x==null?null:""+x):_==null?_:""+_)}return r}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let n=[];function r(_){return n.push(_),()=>{const x=n.indexOf(_);x>-1&&n.splice(x,1)}}function g(){n=[]}return{add:r,list:()=>n.slice(),reset:g}}function guardToPromiseFn(n,r,g,_,x,S=E=>E()){const E=_&&(_.enterCallbacks[x]=_.enterCallbacks[x]||[]);return()=>new Promise((C,T)=>{const R=B=>{B===!1?T(createRouterError(4,{from:g,to:r})):B instanceof Error?T(B):isRouteLocation(B)?T(createRouterError(2,{from:r,to:B})):(E&&_.enterCallbacks[x]===E&&typeof B=="function"&&E.push(B),C())},A=S(()=>n.call(_&&_.instances[x],r,g,R));let I=Promise.resolve(A);n.length<3&&(I=I.then(R)),I.catch(B=>T(B))})}function extractComponentsGuards(n,r,g,_,x=S=>S()){const S=[];for(const E of n)for(const C in E.components){let T=E.components[C];if(!(r!=="beforeRouteEnter"&&!E.instances[C]))if(isRouteComponent(T)){const A=(T.__vccOpts||T)[r];A&&S.push(guardToPromiseFn(A,g,_,E,C,x))}else{let R=T();S.push(()=>R.then(A=>{if(!A)throw new Error(`Couldn't resolve component "${C}" at "${E.path}"`);const I=isESModule(A)?A.default:A;E.mods[C]=A,E.components[C]=I;const D=(I.__vccOpts||I)[r];return D&&guardToPromiseFn(D,g,_,E,C,x)()}))}}return S}function useLink$1(n){const r=inject$1(routerKey),g=inject$1(routeLocationKey),_=computed(()=>{const T=unref(n.to);return r.resolve(T)}),x=computed(()=>{const{matched:T}=_.value,{length:R}=T,A=T[R-1],I=g.matched;if(!A||!I.length)return-1;const B=I.findIndex(isSameRouteRecord.bind(null,A));if(B>-1)return B;const D=getOriginalPath(T[R-2]);return R>1&&getOriginalPath(A)===D&&I[I.length-1].path!==D?I.findIndex(isSameRouteRecord.bind(null,T[R-2])):B}),S=computed(()=>x.value>-1&&includesParams(g.params,_.value.params)),E=computed(()=>x.value>-1&&x.value===g.matched.length-1&&isSameRouteLocationParams(g.params,_.value.params));function C(T={}){if(guardEvent(T)){const R=r[unref(n.replace)?"replace":"push"](unref(n.to)).catch(noop);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>R),R}return Promise.resolve()}return{route:_,href:computed(()=>_.value.href),isActive:S,isExactActive:E,navigate:C}}function preferSingleVNode(n){return n.length===1?n[0]:n}const RouterLinkImpl=defineComponent$1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:useLink$1,setup(n,{slots:r}){const g=reactive(useLink$1(n)),{options:_}=inject$1(routerKey),x=computed(()=>({[getLinkClass(n.activeClass,_.linkActiveClass,"router-link-active")]:g.isActive,[getLinkClass(n.exactActiveClass,_.linkExactActiveClass,"router-link-exact-active")]:g.isExactActive}));return()=>{const S=r.default&&preferSingleVNode(r.default(g));return n.custom?S:h$2("a",{"aria-current":g.isExactActive?n.ariaCurrentValue:null,href:g.href,onClick:g.navigate,class:x.value},S)}}}),RouterLink=RouterLinkImpl;function guardEvent(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const r=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(r))return}return n.preventDefault&&n.preventDefault(),!0}}function includesParams(n,r){for(const g in r){const _=r[g],x=n[g];if(typeof _=="string"){if(_!==x)return!1}else if(!isArray(x)||x.length!==_.length||_.some((S,E)=>S!==x[E]))return!1}return!0}function getOriginalPath(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const getLinkClass=(n,r,g)=>n??r??g,RouterViewImpl=defineComponent$1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:r,slots:g}){const _=inject$1(routerViewLocationKey),x=computed(()=>n.route||_.value),S=inject$1(viewDepthKey,0),E=computed(()=>{let R=unref(S);const{matched:A}=x.value;let I;for(;(I=A[R])&&!I.components;)R++;return R}),C=computed(()=>x.value.matched[E.value]);provide(viewDepthKey,computed(()=>E.value+1)),provide(matchedRouteKey,C),provide(routerViewLocationKey,x);const T=ref$2();return watch(()=>[T.value,C.value,n.name],([R,A,I],[B,D,N])=>{A&&(A.instances[I]=R,D&&D!==A&&R&&R===B&&(A.leaveGuards.size||(A.leaveGuards=D.leaveGuards),A.updateGuards.size||(A.updateGuards=D.updateGuards))),R&&A&&(!D||!isSameRouteRecord(A,D)||!B)&&(A.enterCallbacks[I]||[]).forEach(M=>M(R))},{flush:"post"}),()=>{const R=x.value,A=n.name,I=C.value,B=I&&I.components[A];if(!B)return normalizeSlot(g.default,{Component:B,route:R});const D=I.props[A],N=D?D===!0?R.params:typeof D=="function"?D(R):D:null,O=h$2(B,assign({},N,r,{onVnodeUnmounted:L=>{L.component.isUnmounted&&(I.instances[A]=null)},ref:T}));return normalizeSlot(g.default,{Component:O,route:R})||O}}});function normalizeSlot(n,r){if(!n)return null;const g=n(r);return g.length===1?g[0]:g}const RouterView=RouterViewImpl;function createRouter(n){const r=createRouterMatcher(n.routes,n),g=n.parseQuery||parseQuery,_=n.stringifyQuery||stringifyQuery,x=n.history,S=useCallbacks(),E=useCallbacks(),C=useCallbacks(),T=shallowRef(START_LOCATION_NORMALIZED);let R=START_LOCATION_NORMALIZED;isBrowser&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const A=applyToParams.bind(null,Ce=>""+Ce),I=applyToParams.bind(null,encodeParam),B=applyToParams.bind(null,decode);function D(Ce,Ae){let Ne,We;return isRouteName(Ce)?(Ne=r.getRecordMatcher(Ce),We=Ae):We=Ce,r.addRoute(We,Ne)}function N(Ce){const Ae=r.getRecordMatcher(Ce);Ae&&r.removeRoute(Ae)}function M(){return r.getRoutes().map(Ce=>Ce.record)}function O(Ce){return!!r.getRecordMatcher(Ce)}function L(Ce,Ae){if(Ae=assign({},Ae||T.value),typeof Ce=="string"){const _e=parseURL(g,Ce,Ae.path),Oe=r.resolve({path:_e.path},Ae),Ke=x.createHref(_e.fullPath);return assign(_e,Oe,{params:B(Oe.params),hash:decode(_e.hash),redirectedFrom:void 0,href:Ke})}let Ne;if(Ce.path!=null)Ne=assign({},Ce,{path:parseURL(g,Ce.path,Ae.path).path});else{const _e=assign({},Ce.params);for(const Oe in _e)_e[Oe]==null&&delete _e[Oe];Ne=assign({},Ce,{params:I(_e)}),Ae.params=I(Ae.params)}const We=r.resolve(Ne,Ae),Be=Ce.hash||"";We.params=A(B(We.params));const Se=stringifyURL(_,assign({},Ce,{hash:encodeHash(Be),path:We.path})),$e=x.createHref(Se);return assign({fullPath:Se,hash:Be,query:_===stringifyQuery?normalizeQuery(Ce.query):Ce.query||{}},We,{redirectedFrom:void 0,href:$e})}function F(Ce){return typeof Ce=="string"?parseURL(g,Ce,T.value.path):assign({},Ce)}function U(Ce,Ae){if(R!==Ce)return createRouterError(8,{from:Ae,to:Ce})}function j(Ce){return X(Ce)}function z(Ce){return j(assign(F(Ce),{replace:!0}))}function W(Ce){const Ae=Ce.matched[Ce.matched.length-1];if(Ae&&Ae.redirect){const{redirect:Ne}=Ae;let We=typeof Ne=="function"?Ne(Ce):Ne;return typeof We=="string"&&(We=We.includes("?")||We.includes("#")?We=F(We):{path:We},We.params={}),assign({query:Ce.query,hash:Ce.hash,params:We.path!=null?{}:Ce.params},We)}}function X(Ce,Ae){const Ne=R=L(Ce),We=T.value,Be=Ce.state,Se=Ce.force,$e=Ce.replace===!0,_e=W(Ne);if(_e)return X(assign(F(_e),{state:typeof _e=="object"?assign({},Be,_e.state):Be,force:Se,replace:$e}),Ae||Ne);const Oe=Ne;Oe.redirectedFrom=Ae;let Ke;return!Se&&isSameRouteLocation(_,We,Ne)&&(Ke=createRouterError(16,{to:Oe,from:We}),te(We,We,!0,!1)),(Ke?Promise.resolve(Ke):xe(Oe,We)).catch(Me=>isNavigationFailure(Me)?isNavigationFailure(Me,2)?Me:se(Me):ce(Me,Oe,We)).then(Me=>{if(Me){if(isNavigationFailure(Me,2))return X(assign({replace:$e},F(Me.to),{state:typeof Me.to=="object"?assign({},Be,Me.to.state):Be,force:Se}),Ae||Oe)}else Me=G(Oe,We,!0,$e,Be);return we(Oe,We,Me),Me})}function ie(Ce,Ae){const Ne=U(Ce,Ae);return Ne?Promise.reject(Ne):Promise.resolve()}function fe(Ce){const Ae=ye.values().next().value;return Ae&&typeof Ae.runWithContext=="function"?Ae.runWithContext(Ce):Ce()}function xe(Ce,Ae){let Ne;const[We,Be,Se]=extractChangingRecords(Ce,Ae);Ne=extractComponentsGuards(We.reverse(),"beforeRouteLeave",Ce,Ae);for(const _e of We)_e.leaveGuards.forEach(Oe=>{Ne.push(guardToPromiseFn(Oe,Ce,Ae))});const $e=ie.bind(null,Ce,Ae);return Ne.push($e),ke(Ne).then(()=>{Ne=[];for(const _e of S.list())Ne.push(guardToPromiseFn(_e,Ce,Ae));return Ne.push($e),ke(Ne)}).then(()=>{Ne=extractComponentsGuards(Be,"beforeRouteUpdate",Ce,Ae);for(const _e of Be)_e.updateGuards.forEach(Oe=>{Ne.push(guardToPromiseFn(Oe,Ce,Ae))});return Ne.push($e),ke(Ne)}).then(()=>{Ne=[];for(const _e of Se)if(_e.beforeEnter)if(isArray(_e.beforeEnter))for(const Oe of _e.beforeEnter)Ne.push(guardToPromiseFn(Oe,Ce,Ae));else Ne.push(guardToPromiseFn(_e.beforeEnter,Ce,Ae));return Ne.push($e),ke(Ne)}).then(()=>(Ce.matched.forEach(_e=>_e.enterCallbacks={}),Ne=extractComponentsGuards(Se,"beforeRouteEnter",Ce,Ae,fe),Ne.push($e),ke(Ne))).then(()=>{Ne=[];for(const _e of E.list())Ne.push(guardToPromiseFn(_e,Ce,Ae));return Ne.push($e),ke(Ne)}).catch(_e=>isNavigationFailure(_e,8)?_e:Promise.reject(_e))}function we(Ce,Ae,Ne){C.list().forEach(We=>fe(()=>We(Ce,Ae,Ne)))}function G(Ce,Ae,Ne,We,Be){const Se=U(Ce,Ae);if(Se)return Se;const $e=Ae===START_LOCATION_NORMALIZED,_e=isBrowser?history.state:{};Ne&&(We||$e?x.replace(Ce.fullPath,assign({scroll:$e&&_e&&_e.scroll},Be)):x.push(Ce.fullPath,Be)),T.value=Ce,te(Ce,Ae,Ne,$e),se()}let J;function q(){J||(J=x.listen((Ce,Ae,Ne)=>{if(!Ie.listening)return;const We=L(Ce),Be=W(We);if(Be){X(assign(Be,{replace:!0,force:!0}),We).catch(noop);return}R=We;const Se=T.value;isBrowser&&saveScrollPosition(getScrollKey(Se.fullPath,Ne.delta),computeScrollPosition()),xe(We,Se).catch($e=>isNavigationFailure($e,12)?$e:isNavigationFailure($e,2)?(X(assign(F($e.to),{force:!0}),We).then(_e=>{isNavigationFailure(_e,20)&&!Ne.delta&&Ne.type===NavigationType.pop&&x.go(-1,!1)}).catch(noop),Promise.reject()):(Ne.delta&&x.go(-Ne.delta,!1),ce($e,We,Se))).then($e=>{$e=$e||G(We,Se,!1),$e&&(Ne.delta&&!isNavigationFailure($e,8)?x.go(-Ne.delta,!1):Ne.type===NavigationType.pop&&isNavigationFailure($e,20)&&x.go(-1,!1)),we(We,Se,$e)}).catch(noop)}))}let H=useCallbacks(),ve=useCallbacks(),Z;function ce(Ce,Ae,Ne){se(Ce);const We=ve.list();return We.length?We.forEach(Be=>Be(Ce,Ae,Ne)):console.error(Ce),Promise.reject(Ce)}function ue(){return Z&&T.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Ce,Ae)=>{H.add([Ce,Ae])})}function se(Ce){return Z||(Z=!Ce,q(),H.list().forEach(([Ae,Ne])=>Ce?Ne(Ce):Ae()),H.reset()),Ce}function te(Ce,Ae,Ne,We){const{scrollBehavior:Be}=n;if(!isBrowser||!Be)return Promise.resolve();const Se=!Ne&&getSavedScrollPosition(getScrollKey(Ce.fullPath,0))||(We||!Ne)&&history.state&&history.state.scroll||null;return nextTick$1().then(()=>Be(Ce,Ae,Se)).then($e=>$e&&scrollToPosition($e)).catch($e=>ce($e,Ce,Ae))}const Y=Ce=>x.go(Ce);let be;const ye=new Set,Ie={currentRoute:T,listening:!0,addRoute:D,removeRoute:N,clearRoutes:r.clearRoutes,hasRoute:O,getRoutes:M,resolve:L,options:n,push:j,replace:z,go:Y,back:()=>Y(-1),forward:()=>Y(1),beforeEach:S.add,beforeResolve:E.add,afterEach:C.add,onError:ve.add,isReady:ue,install(Ce){const Ae=this;Ce.component("RouterLink",RouterLink),Ce.component("RouterView",RouterView),Ce.config.globalProperties.$router=Ae,Object.defineProperty(Ce.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(T)}),isBrowser&&!be&&T.value===START_LOCATION_NORMALIZED&&(be=!0,j(x.location).catch(Be=>{}));const Ne={};for(const Be in START_LOCATION_NORMALIZED)Object.defineProperty(Ne,Be,{get:()=>T.value[Be],enumerable:!0});Ce.provide(routerKey,Ae),Ce.provide(routeLocationKey,shallowReactive(Ne)),Ce.provide(routerViewLocationKey,T);const We=Ce.unmount;ye.add(Ce),Ce.unmount=function(){ye.delete(Ce),ye.size<1&&(R=START_LOCATION_NORMALIZED,J&&J(),J=null,T.value=START_LOCATION_NORMALIZED,be=!1,Z=!1),We()}}};function ke(Ce){return Ce.reduce((Ae,Ne)=>Ae.then(()=>fe(Ne)),Promise.resolve())}return Ie}function extractChangingRecords(n,r){const g=[],_=[],x=[],S=Math.max(r.matched.length,n.matched.length);for(let E=0;E<S;E++){const C=r.matched[E];C&&(n.matched.find(R=>isSameRouteRecord(R,C))?_.push(C):g.push(C));const T=n.matched[E];T&&(r.matched.find(R=>isSameRouteRecord(R,T))||x.push(T))}return[g,_,x]}function useRouter$1(){return inject$1(routerKey)}const routes=[{path:"/",component:()=>__vitePreload(()=>import("./PageAccueil-BRqJLetL.js"),__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14]),import.meta.url)},{path:"/compte",name:"Compte",component:()=>__vitePreload(()=>import("./PageCompte-BYO05SVJ.js"),__vite__mapDeps([15,13,3,4,5,6,16]),import.meta.url)},{path:encodeURI("/données"),name:"Données",component:()=>__vitePreload(()=>import("./MesDonnées-DcyqpeeX.js"),__vite__mapDeps([17,8,9,10,11,13,18,12,19]),import.meta.url)},{path:encodeURI("/données/bd/:id"),component:()=>__vitePreload(()=>import("./PageBD-ChWNi5ku.js"),__vite__mapDeps([20,7,21,22,10,11,23,18,12,24,5,6,25,9,26,16]),import.meta.url),props:n=>{const{id:r}=n.params;if(typeof r=="string")return{id:decodeURIComponent(r)}}},{path:encodeURI("/données/nuée/:id"),component:()=>__vitePreload(()=>import("./PageNuée-xQJ5PJZp.js"),__vite__mapDeps([27,21,22,10,11,23,18,12,24,5,6,25,9,7,16]),import.meta.url),props:n=>{const{id:r}=n.params;if(typeof r=="string")return{id:decodeURIComponent(r)}}},{path:encodeURI("/données/projet/:id"),component:()=>__vitePreload(()=>import("./PageProjet-dRvFSFxe.js"),__vite__mapDeps([28,7]),import.meta.url),props:n=>{const{id:r}=n.params;if(typeof r=="string")return{id:decodeURIComponent(r)}}},{path:"/recherche",name:"Recherche",component:()=>__vitePreload(()=>import("./PageRecherche-sBdhhqsQ.js"),__vite__mapDeps([29,13,11,23]),import.meta.url)},{path:"/favoris",name:"Favoris",component:()=>__vitePreload(()=>import("./PageFavoris-Dbusoj25.js"),__vite__mapDeps([30,13,26]),import.meta.url)},{path:"/automatisations",name:"Automatisations",component:()=>__vitePreload(()=>import("./PageAutomatisations-CO6ixQt2.js"),__vite__mapDeps([31,22,10,11,23,18,12,24,13]),import.meta.url)},{path:"/signalements",name:"Signalements",component:()=>__vitePreload(()=>import("./PageSignalements-CTosAfTO.js"),__vite__mapDeps([32,13]),import.meta.url)}],routeur=createRouter({history:createWebHashHistory(),routes,scrollBehavior(){return{top:0}}});routeur.afterEach(n=>{const{lg:r}=n.query;if(r&&typeof r=="string"){const{மொழிகளை_தேர்ந்தெடுக்கொள்ளு:g}=மொழிகளைப்_பயன்படுத்து();g(r)}});function incrireCommuns(n){loadFonts(),n.use(pinia),n.use(vuetify),n.use(routeur),n.use(kilimukku)}function inscrireExtentions(n){n.use(constellationNavigateur),incrireCommuns(n)}class Stabilisateur{n;valeurAntérieure;constructor(r=1e3){this.n=r}async stabiliser(r){return deepEqual$2(r,this.valeurAntérieure)?!1:(this.valeurAntérieure=r,new Promise(g=>{setTimeout(()=>g(deepEqual$2(r,this.valeurAntérieure)),this.n)}))}}const débalerRéfsArgs=n=>Object.fromEntries(Object.entries(n).map(([r,g])=>[r,unref(g)])),rechercher=(n,r={})=>{const g=ref$2(),_=ref$2(!0),x=new Stabilisateur,S=Object.values(r).some(I=>isRef(I));let E,C;const T=I=>!!I.fChangerProfondeur,R=computed(()=>{const I=débalerRéfsArgs(r);if(Object.values(I).every(B=>B!==void 0))return I});watchEffect(async()=>{if(_.value=!0,E&&(E(),E=void 0),R.value){if(S&&!await x.stabiliser(R.value))return;const I=await n({...R.value,f:B=>{g.value=B,_.value=!1}});E=I.fOublier,C=T(I)?I.fChangerProfondeur:I.fChangerN}else g.value=void 0,_.value=!1});const A=computed(()=>r.nRésultatsDésirés||r.pronfondeur);return watchEffect(async()=>{C&&A.value&&C(A.value)}),onUnmounted(async()=>{E&&await E()}),{résultats:g,onTravaille:_}},suivre=(n,r={},g)=>{const _=ref$2(g),x=new Stabilisateur;let S;const E=Object.values(r).some(T=>isRef(T)),C=computed(()=>{const T=débalerRéfsArgs(r);if(Object.values(T).every(R=>R!==void 0))return T});return watchEffect(async()=>{if(S&&(S(),S=void 0),C.value){if(E&&S&&!await x.stabiliser(C.value))return;S=await n({...C.value,f:T=>_.value=T})}else _.value=void 0}),onUnmounted(async()=>{S&&await S()}),computed(()=>_.value)};var re$1={exports:{}},constants,hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1;const n="2.0.0",r=256,g=Number.MAX_SAFE_INTEGER||9007199254740991,_=16,x=r-6;return constants={MAX_LENGTH:r,MAX_SAFE_COMPONENT_LENGTH:_,MAX_SAFE_BUILD_LENGTH:x,MAX_SAFE_INTEGER:g,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:n,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},constants}var debug_1,hasRequiredDebug;function requireDebug(){if(hasRequiredDebug)return debug_1;hasRequiredDebug=1;var n={};return debug_1=typeof process$1=="object"&&n&&n.NODE_DEBUG&&/\bsemver\b/i.test(n.NODE_DEBUG)?(...g)=>console.error("SEMVER",...g):()=>{},debug_1}var hasRequiredRe$1;function requireRe$1(){return hasRequiredRe$1||(hasRequiredRe$1=1,function(n,r){const{MAX_SAFE_COMPONENT_LENGTH:g,MAX_SAFE_BUILD_LENGTH:_,MAX_LENGTH:x}=requireConstants(),S=requireDebug();r=n.exports={};const E=r.re=[],C=r.safeRe=[],T=r.src=[],R=r.t={};let A=0;const I="[a-zA-Z0-9-]",B=[["\\s",1],["\\d",x],[I,_]],D=M=>{for(const[O,L]of B)M=M.split(`${O}*`).join(`${O}{0,${L}}`).split(`${O}+`).join(`${O}{1,${L}}`);return M},N=(M,O,L)=>{const F=D(O),U=A++;S(M,U,O),R[M]=U,T[U]=O,E[U]=new RegExp(O,L?"g":void 0),C[U]=new RegExp(F,L?"g":void 0)};N("NUMERICIDENTIFIER","0|[1-9]\\d*"),N("NUMERICIDENTIFIERLOOSE","\\d+"),N("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${I}*`),N("MAINVERSION",`(${T[R.NUMERICIDENTIFIER]})\\.(${T[R.NUMERICIDENTIFIER]})\\.(${T[R.NUMERICIDENTIFIER]})`),N("MAINVERSIONLOOSE",`(${T[R.NUMERICIDENTIFIERLOOSE]})\\.(${T[R.NUMERICIDENTIFIERLOOSE]})\\.(${T[R.NUMERICIDENTIFIERLOOSE]})`),N("PRERELEASEIDENTIFIER",`(?:${T[R.NUMERICIDENTIFIER]}|${T[R.NONNUMERICIDENTIFIER]})`),N("PRERELEASEIDENTIFIERLOOSE",`(?:${T[R.NUMERICIDENTIFIERLOOSE]}|${T[R.NONNUMERICIDENTIFIER]})`),N("PRERELEASE",`(?:-(${T[R.PRERELEASEIDENTIFIER]}(?:\\.${T[R.PRERELEASEIDENTIFIER]})*))`),N("PRERELEASELOOSE",`(?:-?(${T[R.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${T[R.PRERELEASEIDENTIFIERLOOSE]})*))`),N("BUILDIDENTIFIER",`${I}+`),N("BUILD",`(?:\\+(${T[R.BUILDIDENTIFIER]}(?:\\.${T[R.BUILDIDENTIFIER]})*))`),N("FULLPLAIN",`v?${T[R.MAINVERSION]}${T[R.PRERELEASE]}?${T[R.BUILD]}?`),N("FULL",`^${T[R.FULLPLAIN]}$`),N("LOOSEPLAIN",`[v=\\s]*${T[R.MAINVERSIONLOOSE]}${T[R.PRERELEASELOOSE]}?${T[R.BUILD]}?`),N("LOOSE",`^${T[R.LOOSEPLAIN]}$`),N("GTLT","((?:<|>)?=?)"),N("XRANGEIDENTIFIERLOOSE",`${T[R.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),N("XRANGEIDENTIFIER",`${T[R.NUMERICIDENTIFIER]}|x|X|\\*`),N("XRANGEPLAIN",`[v=\\s]*(${T[R.XRANGEIDENTIFIER]})(?:\\.(${T[R.XRANGEIDENTIFIER]})(?:\\.(${T[R.XRANGEIDENTIFIER]})(?:${T[R.PRERELEASE]})?${T[R.BUILD]}?)?)?`),N("XRANGEPLAINLOOSE",`[v=\\s]*(${T[R.XRANGEIDENTIFIERLOOSE]})(?:\\.(${T[R.XRANGEIDENTIFIERLOOSE]})(?:\\.(${T[R.XRANGEIDENTIFIERLOOSE]})(?:${T[R.PRERELEASELOOSE]})?${T[R.BUILD]}?)?)?`),N("XRANGE",`^${T[R.GTLT]}\\s*${T[R.XRANGEPLAIN]}$`),N("XRANGELOOSE",`^${T[R.GTLT]}\\s*${T[R.XRANGEPLAINLOOSE]}$`),N("COERCEPLAIN",`(^|[^\\d])(\\d{1,${g}})(?:\\.(\\d{1,${g}}))?(?:\\.(\\d{1,${g}}))?`),N("COERCE",`${T[R.COERCEPLAIN]}(?:$|[^\\d])`),N("COERCEFULL",T[R.COERCEPLAIN]+`(?:${T[R.PRERELEASE]})?(?:${T[R.BUILD]})?(?:$|[^\\d])`),N("COERCERTL",T[R.COERCE],!0),N("COERCERTLFULL",T[R.COERCEFULL],!0),N("LONETILDE","(?:~>?)"),N("TILDETRIM",`(\\s*)${T[R.LONETILDE]}\\s+`,!0),r.tildeTrimReplace="$1~",N("TILDE",`^${T[R.LONETILDE]}${T[R.XRANGEPLAIN]}$`),N("TILDELOOSE",`^${T[R.LONETILDE]}${T[R.XRANGEPLAINLOOSE]}$`),N("LONECARET","(?:\\^)"),N("CARETTRIM",`(\\s*)${T[R.LONECARET]}\\s+`,!0),r.caretTrimReplace="$1^",N("CARET",`^${T[R.LONECARET]}${T[R.XRANGEPLAIN]}$`),N("CARETLOOSE",`^${T[R.LONECARET]}${T[R.XRANGEPLAINLOOSE]}$`),N("COMPARATORLOOSE",`^${T[R.GTLT]}\\s*(${T[R.LOOSEPLAIN]})$|^$`),N("COMPARATOR",`^${T[R.GTLT]}\\s*(${T[R.FULLPLAIN]})$|^$`),N("COMPARATORTRIM",`(\\s*)${T[R.GTLT]}\\s*(${T[R.LOOSEPLAIN]}|${T[R.XRANGEPLAIN]})`,!0),r.comparatorTrimReplace="$1$2$3",N("HYPHENRANGE",`^\\s*(${T[R.XRANGEPLAIN]})\\s+-\\s+(${T[R.XRANGEPLAIN]})\\s*$`),N("HYPHENRANGELOOSE",`^\\s*(${T[R.XRANGEPLAINLOOSE]})\\s+-\\s+(${T[R.XRANGEPLAINLOOSE]})\\s*$`),N("STAR","(<|>)?=?\\s*\\*"),N("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),N("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(re$1,re$1.exports)),re$1.exports}var parseOptions_1,hasRequiredParseOptions;function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const n=Object.freeze({loose:!0}),r=Object.freeze({});return parseOptions_1=_=>_?typeof _!="object"?n:_:r,parseOptions_1}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const n=/^[0-9]+$/,r=(_,x)=>{const S=n.test(_),E=n.test(x);return S&&E&&(_=+_,x=+x),_===x?0:S&&!E?-1:E&&!S?1:_<x?-1:1};return identifiers={compareIdentifiers:r,rcompareIdentifiers:(_,x)=>r(x,_)},identifiers}var semver$2,hasRequiredSemver$1;function requireSemver$1(){if(hasRequiredSemver$1)return semver$2;hasRequiredSemver$1=1;const n=requireDebug(),{MAX_LENGTH:r,MAX_SAFE_INTEGER:g}=requireConstants(),{safeRe:_,t:x}=requireRe$1(),S=requireParseOptions(),{compareIdentifiers:E}=requireIdentifiers();class C{constructor(R,A){if(A=S(A),R instanceof C){if(R.loose===!!A.loose&&R.includePrerelease===!!A.includePrerelease)return R;R=R.version}else if(typeof R!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof R}".`);if(R.length>r)throw new TypeError(`version is longer than ${r} characters`);n("SemVer",R,A),this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease;const I=R.trim().match(A.loose?_[x.LOOSE]:_[x.FULL]);if(!I)throw new TypeError(`Invalid Version: ${R}`);if(this.raw=R,this.major=+I[1],this.minor=+I[2],this.patch=+I[3],this.major>g||this.major<0)throw new TypeError("Invalid major version");if(this.minor>g||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>g||this.patch<0)throw new TypeError("Invalid patch version");I[4]?this.prerelease=I[4].split(".").map(B=>{if(/^[0-9]+$/.test(B)){const D=+B;if(D>=0&&D<g)return D}return B}):this.prerelease=[],this.build=I[5]?I[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(R){if(n("SemVer.compare",this.version,this.options,R),!(R instanceof C)){if(typeof R=="string"&&R===this.version)return 0;R=new C(R,this.options)}return R.version===this.version?0:this.compareMain(R)||this.comparePre(R)}compareMain(R){return R instanceof C||(R=new C(R,this.options)),E(this.major,R.major)||E(this.minor,R.minor)||E(this.patch,R.patch)}comparePre(R){if(R instanceof C||(R=new C(R,this.options)),this.prerelease.length&&!R.prerelease.length)return-1;if(!this.prerelease.length&&R.prerelease.length)return 1;if(!this.prerelease.length&&!R.prerelease.length)return 0;let A=0;do{const I=this.prerelease[A],B=R.prerelease[A];if(n("prerelease compare",A,I,B),I===void 0&&B===void 0)return 0;if(B===void 0)return 1;if(I===void 0)return-1;if(I===B)continue;return E(I,B)}while(++A)}compareBuild(R){R instanceof C||(R=new C(R,this.options));let A=0;do{const I=this.build[A],B=R.build[A];if(n("build compare",A,I,B),I===void 0&&B===void 0)return 0;if(B===void 0)return 1;if(I===void 0)return-1;if(I===B)continue;return E(I,B)}while(++A)}inc(R,A,I){switch(R){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",A,I);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",A,I);break;case"prepatch":this.prerelease.length=0,this.inc("patch",A,I),this.inc("pre",A,I);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",A,I),this.inc("pre",A,I);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const B=Number(I)?1:0;if(!A&&I===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[B];else{let D=this.prerelease.length;for(;--D>=0;)typeof this.prerelease[D]=="number"&&(this.prerelease[D]++,D=-2);if(D===-1){if(A===this.prerelease.join(".")&&I===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(B)}}if(A){let D=[A,B];I===!1&&(D=[A]),E(this.prerelease[0],A)===0?isNaN(this.prerelease[1])&&(this.prerelease=D):this.prerelease=D}break}default:throw new Error(`invalid increment argument: ${R}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver$2=C,semver$2}var parse_1,hasRequiredParse$1;function requireParse$1(){if(hasRequiredParse$1)return parse_1;hasRequiredParse$1=1;const n=requireSemver$1();return parse_1=(g,_,x=!1)=>{if(g instanceof n)return g;try{return new n(g,_)}catch(S){if(!x)return null;throw S}},parse_1}var valid_1,hasRequiredValid$1;function requireValid$1(){if(hasRequiredValid$1)return valid_1;hasRequiredValid$1=1;const n=requireParse$1();return valid_1=(g,_)=>{const x=n(g,_);return x?x.version:null},valid_1}var clean_1,hasRequiredClean;function requireClean(){if(hasRequiredClean)return clean_1;hasRequiredClean=1;const n=requireParse$1();return clean_1=(g,_)=>{const x=n(g.trim().replace(/^[=v]+/,""),_);return x?x.version:null},clean_1}var inc_1,hasRequiredInc;function requireInc(){if(hasRequiredInc)return inc_1;hasRequiredInc=1;const n=requireSemver$1();return inc_1=(g,_,x,S,E)=>{typeof x=="string"&&(E=S,S=x,x=void 0);try{return new n(g instanceof n?g.version:g,x).inc(_,S,E).version}catch{return null}},inc_1}var diff_1,hasRequiredDiff;function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;const n=requireParse$1();return diff_1=(g,_)=>{const x=n(g,null,!0),S=n(_,null,!0),E=x.compare(S);if(E===0)return null;const C=E>0,T=C?x:S,R=C?S:x,A=!!T.prerelease.length;if(!!R.prerelease.length&&!A)return!R.patch&&!R.minor?"major":T.patch?"patch":T.minor?"minor":"major";const B=A?"pre":"";return x.major!==S.major?B+"major":x.minor!==S.minor?B+"minor":x.patch!==S.patch?B+"patch":"prerelease"},diff_1}var major_1,hasRequiredMajor;function requireMajor(){if(hasRequiredMajor)return major_1;hasRequiredMajor=1;const n=requireSemver$1();return major_1=(g,_)=>new n(g,_).major,major_1}var minor_1,hasRequiredMinor;function requireMinor(){if(hasRequiredMinor)return minor_1;hasRequiredMinor=1;const n=requireSemver$1();return minor_1=(g,_)=>new n(g,_).minor,minor_1}var patch_1,hasRequiredPatch;function requirePatch(){if(hasRequiredPatch)return patch_1;hasRequiredPatch=1;const n=requireSemver$1();return patch_1=(g,_)=>new n(g,_).patch,patch_1}var prerelease_1,hasRequiredPrerelease;function requirePrerelease(){if(hasRequiredPrerelease)return prerelease_1;hasRequiredPrerelease=1;const n=requireParse$1();return prerelease_1=(g,_)=>{const x=n(g,_);return x&&x.prerelease.length?x.prerelease:null},prerelease_1}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const n=requireSemver$1();return compare_1=(g,_,x)=>new n(g,x).compare(new n(_,x)),compare_1}var rcompare_1,hasRequiredRcompare;function requireRcompare(){if(hasRequiredRcompare)return rcompare_1;hasRequiredRcompare=1;const n=requireCompare();return rcompare_1=(g,_,x)=>n(_,g,x),rcompare_1}var compareLoose_1,hasRequiredCompareLoose;function requireCompareLoose(){if(hasRequiredCompareLoose)return compareLoose_1;hasRequiredCompareLoose=1;const n=requireCompare();return compareLoose_1=(g,_)=>n(g,_,!0),compareLoose_1}var compareBuild_1,hasRequiredCompareBuild;function requireCompareBuild(){if(hasRequiredCompareBuild)return compareBuild_1;hasRequiredCompareBuild=1;const n=requireSemver$1();return compareBuild_1=(g,_,x)=>{const S=new n(g,x),E=new n(_,x);return S.compare(E)||S.compareBuild(E)},compareBuild_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;const n=requireCompareBuild();return sort_1=(g,_)=>g.sort((x,S)=>n(x,S,_)),sort_1}var rsort_1,hasRequiredRsort;function requireRsort(){if(hasRequiredRsort)return rsort_1;hasRequiredRsort=1;const n=requireCompareBuild();return rsort_1=(g,_)=>g.sort((x,S)=>n(S,x,_)),rsort_1}var gt_1,hasRequiredGt;function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const n=requireCompare();return gt_1=(g,_,x)=>n(g,_,x)>0,gt_1}var lt_1,hasRequiredLt;function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const n=requireCompare();return lt_1=(g,_,x)=>n(g,_,x)<0,lt_1}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const n=requireCompare();return eq_1=(g,_,x)=>n(g,_,x)===0,eq_1}var neq_1,hasRequiredNeq;function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const n=requireCompare();return neq_1=(g,_,x)=>n(g,_,x)!==0,neq_1}var gte_1,hasRequiredGte;function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const n=requireCompare();return gte_1=(g,_,x)=>n(g,_,x)>=0,gte_1}var lte_1,hasRequiredLte;function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const n=requireCompare();return lte_1=(g,_,x)=>n(g,_,x)<=0,lte_1}var cmp_1,hasRequiredCmp;function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const n=requireEq(),r=requireNeq(),g=requireGt(),_=requireGte(),x=requireLt(),S=requireLte();return cmp_1=(C,T,R,A)=>{switch(T){case"===":return typeof C=="object"&&(C=C.version),typeof R=="object"&&(R=R.version),C===R;case"!==":return typeof C=="object"&&(C=C.version),typeof R=="object"&&(R=R.version),C!==R;case"":case"=":case"==":return n(C,R,A);case"!=":return r(C,R,A);case">":return g(C,R,A);case">=":return _(C,R,A);case"<":return x(C,R,A);case"<=":return S(C,R,A);default:throw new TypeError(`Invalid operator: ${T}`)}},cmp_1}var coerce_1,hasRequiredCoerce;function requireCoerce(){if(hasRequiredCoerce)return coerce_1;hasRequiredCoerce=1;const n=requireSemver$1(),r=requireParse$1(),{safeRe:g,t:_}=requireRe$1();return coerce_1=(S,E)=>{if(S instanceof n)return S;if(typeof S=="number"&&(S=String(S)),typeof S!="string")return null;E=E||{};let C=null;if(!E.rtl)C=S.match(E.includePrerelease?g[_.COERCEFULL]:g[_.COERCE]);else{const D=E.includePrerelease?g[_.COERCERTLFULL]:g[_.COERCERTL];let N;for(;(N=D.exec(S))&&(!C||C.index+C[0].length!==S.length);)(!C||N.index+N[0].length!==C.index+C[0].length)&&(C=N),D.lastIndex=N.index+N[1].length+N[2].length;D.lastIndex=-1}if(C===null)return null;const T=C[2],R=C[3]||"0",A=C[4]||"0",I=E.includePrerelease&&C[5]?`-${C[5]}`:"",B=E.includePrerelease&&C[6]?`+${C[6]}`:"";return r(`${T}.${R}.${A}${I}${B}`,E)},coerce_1}var lrucache,hasRequiredLrucache;function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;class n{constructor(){this.max=1e3,this.map=new Map}get(g){const _=this.map.get(g);if(_!==void 0)return this.map.delete(g),this.map.set(g,_),_}delete(g){return this.map.delete(g)}set(g,_){if(!this.delete(g)&&_!==void 0){if(this.map.size>=this.max){const S=this.map.keys().next().value;this.delete(S)}this.map.set(g,_)}return this}}return lrucache=n,lrucache}var range$1,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range$1;hasRequiredRange=1;const n=/\s+/g;class r{constructor(H,ve){if(ve=x(ve),H instanceof r)return H.loose===!!ve.loose&&H.includePrerelease===!!ve.includePrerelease?H:new r(H.raw,ve);if(H instanceof S)return this.raw=H.value,this.set=[[H]],this.formatted=void 0,this;if(this.options=ve,this.loose=!!ve.loose,this.includePrerelease=!!ve.includePrerelease,this.raw=H.trim().replace(n," "),this.set=this.raw.split("||").map(Z=>this.parseRange(Z.trim())).filter(Z=>Z.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const Z=this.set[0];if(this.set=this.set.filter(ce=>!M(ce[0])),this.set.length===0)this.set=[Z];else if(this.set.length>1){for(const ce of this.set)if(ce.length===1&&O(ce[0])){this.set=[ce];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let H=0;H<this.set.length;H++){H>0&&(this.formatted+="||");const ve=this.set[H];for(let Z=0;Z<ve.length;Z++)Z>0&&(this.formatted+=" "),this.formatted+=ve[Z].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(H){const Z=((this.options.includePrerelease&&D)|(this.options.loose&&N))+":"+H,ce=_.get(Z);if(ce)return ce;const ue=this.options.loose,se=ue?T[R.HYPHENRANGELOOSE]:T[R.HYPHENRANGE];H=H.replace(se,G(this.options.includePrerelease)),E("hyphen replace",H),H=H.replace(T[R.COMPARATORTRIM],A),E("comparator trim",H),H=H.replace(T[R.TILDETRIM],I),E("tilde trim",H),H=H.replace(T[R.CARETTRIM],B),E("caret trim",H);let te=H.split(" ").map(Ie=>F(Ie,this.options)).join(" ").split(/\s+/).map(Ie=>we(Ie,this.options));ue&&(te=te.filter(Ie=>(E("loose invalid filter",Ie,this.options),!!Ie.match(T[R.COMPARATORLOOSE])))),E("range list",te);const Y=new Map,be=te.map(Ie=>new S(Ie,this.options));for(const Ie of be){if(M(Ie))return[Ie];Y.set(Ie.value,Ie)}Y.size>1&&Y.has("")&&Y.delete("");const ye=[...Y.values()];return _.set(Z,ye),ye}intersects(H,ve){if(!(H instanceof r))throw new TypeError("a Range is required");return this.set.some(Z=>L(Z,ve)&&H.set.some(ce=>L(ce,ve)&&Z.every(ue=>ce.every(se=>ue.intersects(se,ve)))))}test(H){if(!H)return!1;if(typeof H=="string")try{H=new C(H,this.options)}catch{return!1}for(let ve=0;ve<this.set.length;ve++)if(J(this.set[ve],H,this.options))return!0;return!1}}range$1=r;const g=requireLrucache(),_=new g,x=requireParseOptions(),S=requireComparator(),E=requireDebug(),C=requireSemver$1(),{safeRe:T,t:R,comparatorTrimReplace:A,tildeTrimReplace:I,caretTrimReplace:B}=requireRe$1(),{FLAG_INCLUDE_PRERELEASE:D,FLAG_LOOSE:N}=requireConstants(),M=q=>q.value==="<0.0.0-0",O=q=>q.value==="",L=(q,H)=>{let ve=!0;const Z=q.slice();let ce=Z.pop();for(;ve&&Z.length;)ve=Z.every(ue=>ce.intersects(ue,H)),ce=Z.pop();return ve},F=(q,H)=>(E("comp",q,H),q=W(q,H),E("caret",q),q=j(q,H),E("tildes",q),q=ie(q,H),E("xrange",q),q=xe(q,H),E("stars",q),q),U=q=>!q||q.toLowerCase()==="x"||q==="*",j=(q,H)=>q.trim().split(/\s+/).map(ve=>z(ve,H)).join(" "),z=(q,H)=>{const ve=H.loose?T[R.TILDELOOSE]:T[R.TILDE];return q.replace(ve,(Z,ce,ue,se,te)=>{E("tilde",q,Z,ce,ue,se,te);let Y;return U(ce)?Y="":U(ue)?Y=`>=${ce}.0.0 <${+ce+1}.0.0-0`:U(se)?Y=`>=${ce}.${ue}.0 <${ce}.${+ue+1}.0-0`:te?(E("replaceTilde pr",te),Y=`>=${ce}.${ue}.${se}-${te} <${ce}.${+ue+1}.0-0`):Y=`>=${ce}.${ue}.${se} <${ce}.${+ue+1}.0-0`,E("tilde return",Y),Y})},W=(q,H)=>q.trim().split(/\s+/).map(ve=>X(ve,H)).join(" "),X=(q,H)=>{E("caret",q,H);const ve=H.loose?T[R.CARETLOOSE]:T[R.CARET],Z=H.includePrerelease?"-0":"";return q.replace(ve,(ce,ue,se,te,Y)=>{E("caret",q,ce,ue,se,te,Y);let be;return U(ue)?be="":U(se)?be=`>=${ue}.0.0${Z} <${+ue+1}.0.0-0`:U(te)?ue==="0"?be=`>=${ue}.${se}.0${Z} <${ue}.${+se+1}.0-0`:be=`>=${ue}.${se}.0${Z} <${+ue+1}.0.0-0`:Y?(E("replaceCaret pr",Y),ue==="0"?se==="0"?be=`>=${ue}.${se}.${te}-${Y} <${ue}.${se}.${+te+1}-0`:be=`>=${ue}.${se}.${te}-${Y} <${ue}.${+se+1}.0-0`:be=`>=${ue}.${se}.${te}-${Y} <${+ue+1}.0.0-0`):(E("no pr"),ue==="0"?se==="0"?be=`>=${ue}.${se}.${te}${Z} <${ue}.${se}.${+te+1}-0`:be=`>=${ue}.${se}.${te}${Z} <${ue}.${+se+1}.0-0`:be=`>=${ue}.${se}.${te} <${+ue+1}.0.0-0`),E("caret return",be),be})},ie=(q,H)=>(E("replaceXRanges",q,H),q.split(/\s+/).map(ve=>fe(ve,H)).join(" ")),fe=(q,H)=>{q=q.trim();const ve=H.loose?T[R.XRANGELOOSE]:T[R.XRANGE];return q.replace(ve,(Z,ce,ue,se,te,Y)=>{E("xRange",q,Z,ce,ue,se,te,Y);const be=U(ue),ye=be||U(se),Ie=ye||U(te),ke=Ie;return ce==="="&&ke&&(ce=""),Y=H.includePrerelease?"-0":"",be?ce===">"||ce==="<"?Z="<0.0.0-0":Z="*":ce&&ke?(ye&&(se=0),te=0,ce===">"?(ce=">=",ye?(ue=+ue+1,se=0,te=0):(se=+se+1,te=0)):ce==="<="&&(ce="<",ye?ue=+ue+1:se=+se+1),ce==="<"&&(Y="-0"),Z=`${ce+ue}.${se}.${te}${Y}`):ye?Z=`>=${ue}.0.0${Y} <${+ue+1}.0.0-0`:Ie&&(Z=`>=${ue}.${se}.0${Y} <${ue}.${+se+1}.0-0`),E("xRange return",Z),Z})},xe=(q,H)=>(E("replaceStars",q,H),q.trim().replace(T[R.STAR],"")),we=(q,H)=>(E("replaceGTE0",q,H),q.trim().replace(T[H.includePrerelease?R.GTE0PRE:R.GTE0],"")),G=q=>(H,ve,Z,ce,ue,se,te,Y,be,ye,Ie,ke)=>(U(Z)?ve="":U(ce)?ve=`>=${Z}.0.0${q?"-0":""}`:U(ue)?ve=`>=${Z}.${ce}.0${q?"-0":""}`:se?ve=`>=${ve}`:ve=`>=${ve}${q?"-0":""}`,U(be)?Y="":U(ye)?Y=`<${+be+1}.0.0-0`:U(Ie)?Y=`<${be}.${+ye+1}.0-0`:ke?Y=`<=${be}.${ye}.${Ie}-${ke}`:q?Y=`<${be}.${ye}.${+Ie+1}-0`:Y=`<=${Y}`,`${ve} ${Y}`.trim()),J=(q,H,ve)=>{for(let Z=0;Z<q.length;Z++)if(!q[Z].test(H))return!1;if(H.prerelease.length&&!ve.includePrerelease){for(let Z=0;Z<q.length;Z++)if(E(q[Z].semver),q[Z].semver!==S.ANY&&q[Z].semver.prerelease.length>0){const ce=q[Z].semver;if(ce.major===H.major&&ce.minor===H.minor&&ce.patch===H.patch)return!0}return!1}return!0};return range$1}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const n=Symbol("SemVer ANY");class r{static get ANY(){return n}constructor(A,I){if(I=g(I),A instanceof r){if(A.loose===!!I.loose)return A;A=A.value}A=A.trim().split(/\s+/).join(" "),E("comparator",A,I),this.options=I,this.loose=!!I.loose,this.parse(A),this.semver===n?this.value="":this.value=this.operator+this.semver.version,E("comp",this)}parse(A){const I=this.options.loose?_[x.COMPARATORLOOSE]:_[x.COMPARATOR],B=A.match(I);if(!B)throw new TypeError(`Invalid comparator: ${A}`);this.operator=B[1]!==void 0?B[1]:"",this.operator==="="&&(this.operator=""),B[2]?this.semver=new C(B[2],this.options.loose):this.semver=n}toString(){return this.value}test(A){if(E("Comparator.test",A,this.options.loose),this.semver===n||A===n)return!0;if(typeof A=="string")try{A=new C(A,this.options)}catch{return!1}return S(A,this.operator,this.semver,this.options)}intersects(A,I){if(!(A instanceof r))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new T(A.value,I).test(this.value):A.operator===""?A.value===""?!0:new T(this.value,I).test(A.semver):(I=g(I),I.includePrerelease&&(this.value==="<0.0.0-0"||A.value==="<0.0.0-0")||!I.includePrerelease&&(this.value.startsWith("<0.0.0")||A.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&A.operator.startsWith(">")||this.operator.startsWith("<")&&A.operator.startsWith("<")||this.semver.version===A.semver.version&&this.operator.includes("=")&&A.operator.includes("=")||S(this.semver,"<",A.semver,I)&&this.operator.startsWith(">")&&A.operator.startsWith("<")||S(this.semver,">",A.semver,I)&&this.operator.startsWith("<")&&A.operator.startsWith(">")))}}comparator=r;const g=requireParseOptions(),{safeRe:_,t:x}=requireRe$1(),S=requireCmp(),E=requireDebug(),C=requireSemver$1(),T=requireRange();return comparator}var satisfies_1,hasRequiredSatisfies;function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const n=requireRange();return satisfies_1=(g,_,x)=>{try{_=new n(_,x)}catch{return!1}return _.test(g)},satisfies_1}var toComparators_1,hasRequiredToComparators;function requireToComparators(){if(hasRequiredToComparators)return toComparators_1;hasRequiredToComparators=1;const n=requireRange();return toComparators_1=(g,_)=>new n(g,_).set.map(x=>x.map(S=>S.value).join(" ").trim().split(" ")),toComparators_1}var maxSatisfying_1,hasRequiredMaxSatisfying;function requireMaxSatisfying(){if(hasRequiredMaxSatisfying)return maxSatisfying_1;hasRequiredMaxSatisfying=1;const n=requireSemver$1(),r=requireRange();return maxSatisfying_1=(_,x,S)=>{let E=null,C=null,T=null;try{T=new r(x,S)}catch{return null}return _.forEach(R=>{T.test(R)&&(!E||C.compare(R)===-1)&&(E=R,C=new n(E,S))}),E},maxSatisfying_1}var minSatisfying_1,hasRequiredMinSatisfying;function requireMinSatisfying(){if(hasRequiredMinSatisfying)return minSatisfying_1;hasRequiredMinSatisfying=1;const n=requireSemver$1(),r=requireRange();return minSatisfying_1=(_,x,S)=>{let E=null,C=null,T=null;try{T=new r(x,S)}catch{return null}return _.forEach(R=>{T.test(R)&&(!E||C.compare(R)===1)&&(E=R,C=new n(E,S))}),E},minSatisfying_1}var minVersion_1,hasRequiredMinVersion;function requireMinVersion(){if(hasRequiredMinVersion)return minVersion_1;hasRequiredMinVersion=1;const n=requireSemver$1(),r=requireRange(),g=requireGt();return minVersion_1=(x,S)=>{x=new r(x,S);let E=new n("0.0.0");if(x.test(E)||(E=new n("0.0.0-0"),x.test(E)))return E;E=null;for(let C=0;C<x.set.length;++C){const T=x.set[C];let R=null;T.forEach(A=>{const I=new n(A.semver.version);switch(A.operator){case">":I.prerelease.length===0?I.patch++:I.prerelease.push(0),I.raw=I.format();case"":case">=":(!R||g(I,R))&&(R=I);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${A.operator}`)}}),R&&(!E||g(E,R))&&(E=R)}return E&&x.test(E)?E:null},minVersion_1}var valid,hasRequiredValid;function requireValid(){if(hasRequiredValid)return valid;hasRequiredValid=1;const n=requireRange();return valid=(g,_)=>{try{return new n(g,_).range||"*"}catch{return null}},valid}var outside_1,hasRequiredOutside;function requireOutside(){if(hasRequiredOutside)return outside_1;hasRequiredOutside=1;const n=requireSemver$1(),r=requireComparator(),{ANY:g}=r,_=requireRange(),x=requireSatisfies(),S=requireGt(),E=requireLt(),C=requireLte(),T=requireGte();return outside_1=(A,I,B,D)=>{A=new n(A,D),I=new _(I,D);let N,M,O,L,F;switch(B){case">":N=S,M=C,O=E,L=">",F=">=";break;case"<":N=E,M=T,O=S,L="<",F="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(x(A,I,D))return!1;for(let U=0;U<I.set.length;++U){const j=I.set[U];let z=null,W=null;if(j.forEach(X=>{X.semver===g&&(X=new r(">=0.0.0")),z=z||X,W=W||X,N(X.semver,z.semver,D)?z=X:O(X.semver,W.semver,D)&&(W=X)}),z.operator===L||z.operator===F||(!W.operator||W.operator===L)&&M(A,W.semver))return!1;if(W.operator===F&&O(A,W.semver))return!1}return!0},outside_1}var gtr_1,hasRequiredGtr;function requireGtr(){if(hasRequiredGtr)return gtr_1;hasRequiredGtr=1;const n=requireOutside();return gtr_1=(g,_,x)=>n(g,_,">",x),gtr_1}var ltr_1,hasRequiredLtr;function requireLtr(){if(hasRequiredLtr)return ltr_1;hasRequiredLtr=1;const n=requireOutside();return ltr_1=(g,_,x)=>n(g,_,"<",x),ltr_1}var intersects_1,hasRequiredIntersects;function requireIntersects(){if(hasRequiredIntersects)return intersects_1;hasRequiredIntersects=1;const n=requireRange();return intersects_1=(g,_,x)=>(g=new n(g,x),_=new n(_,x),g.intersects(_,x)),intersects_1}var simplify,hasRequiredSimplify;function requireSimplify(){if(hasRequiredSimplify)return simplify;hasRequiredSimplify=1;const n=requireSatisfies(),r=requireCompare();return simplify=(g,_,x)=>{const S=[];let E=null,C=null;const T=g.sort((B,D)=>r(B,D,x));for(const B of T)n(B,_,x)?(C=B,E||(E=B)):(C&&S.push([E,C]),C=null,E=null);E&&S.push([E,null]);const R=[];for(const[B,D]of S)B===D?R.push(B):!D&&B===T[0]?R.push("*"):D?B===T[0]?R.push(`<=${D}`):R.push(`${B} - ${D}`):R.push(`>=${B}`);const A=R.join(" || "),I=typeof _.raw=="string"?_.raw:String(_);return A.length<I.length?A:_},simplify}var subset_1,hasRequiredSubset;function requireSubset(){if(hasRequiredSubset)return subset_1;hasRequiredSubset=1;const n=requireRange(),r=requireComparator(),{ANY:g}=r,_=requireSatisfies(),x=requireCompare(),S=(I,B,D={})=>{if(I===B)return!0;I=new n(I,D),B=new n(B,D);let N=!1;e:for(const M of I.set){for(const O of B.set){const L=T(M,O,D);if(N=N||L!==null,L)continue e}if(N)return!1}return!0},E=[new r(">=0.0.0-0")],C=[new r(">=0.0.0")],T=(I,B,D)=>{if(I===B)return!0;if(I.length===1&&I[0].semver===g){if(B.length===1&&B[0].semver===g)return!0;D.includePrerelease?I=E:I=C}if(B.length===1&&B[0].semver===g){if(D.includePrerelease)return!0;B=C}const N=new Set;let M,O;for(const ie of I)ie.operator===">"||ie.operator===">="?M=R(M,ie,D):ie.operator==="<"||ie.operator==="<="?O=A(O,ie,D):N.add(ie.semver);if(N.size>1)return null;let L;if(M&&O){if(L=x(M.semver,O.semver,D),L>0)return null;if(L===0&&(M.operator!==">="||O.operator!=="<="))return null}for(const ie of N){if(M&&!_(ie,String(M),D)||O&&!_(ie,String(O),D))return null;for(const fe of B)if(!_(ie,String(fe),D))return!1;return!0}let F,U,j,z,W=O&&!D.includePrerelease&&O.semver.prerelease.length?O.semver:!1,X=M&&!D.includePrerelease&&M.semver.prerelease.length?M.semver:!1;W&&W.prerelease.length===1&&O.operator==="<"&&W.prerelease[0]===0&&(W=!1);for(const ie of B){if(z=z||ie.operator===">"||ie.operator===">=",j=j||ie.operator==="<"||ie.operator==="<=",M){if(X&&ie.semver.prerelease&&ie.semver.prerelease.length&&ie.semver.major===X.major&&ie.semver.minor===X.minor&&ie.semver.patch===X.patch&&(X=!1),ie.operator===">"||ie.operator===">="){if(F=R(M,ie,D),F===ie&&F!==M)return!1}else if(M.operator===">="&&!_(M.semver,String(ie),D))return!1}if(O){if(W&&ie.semver.prerelease&&ie.semver.prerelease.length&&ie.semver.major===W.major&&ie.semver.minor===W.minor&&ie.semver.patch===W.patch&&(W=!1),ie.operator==="<"||ie.operator==="<="){if(U=A(O,ie,D),U===ie&&U!==O)return!1}else if(O.operator==="<="&&!_(O.semver,String(ie),D))return!1}if(!ie.operator&&(O||M)&&L!==0)return!1}return!(M&&j&&!O&&L!==0||O&&z&&!M&&L!==0||X||W)},R=(I,B,D)=>{if(!I)return B;const N=x(I.semver,B.semver,D);return N>0?I:N<0||B.operator===">"&&I.operator===">="?B:I},A=(I,B,D)=>{if(!I)return B;const N=x(I.semver,B.semver,D);return N<0?I:N>0||B.operator==="<"&&I.operator==="<="?B:I};return subset_1=S,subset_1}var semver$1,hasRequiredSemver;function requireSemver(){if(hasRequiredSemver)return semver$1;hasRequiredSemver=1;const n=requireRe$1(),r=requireConstants(),g=requireSemver$1(),_=requireIdentifiers(),x=requireParse$1(),S=requireValid$1(),E=requireClean(),C=requireInc(),T=requireDiff(),R=requireMajor(),A=requireMinor(),I=requirePatch(),B=requirePrerelease(),D=requireCompare(),N=requireRcompare(),M=requireCompareLoose(),O=requireCompareBuild(),L=requireSort(),F=requireRsort(),U=requireGt(),j=requireLt(),z=requireEq(),W=requireNeq(),X=requireGte(),ie=requireLte(),fe=requireCmp(),xe=requireCoerce(),we=requireComparator(),G=requireRange(),J=requireSatisfies(),q=requireToComparators(),H=requireMaxSatisfying(),ve=requireMinSatisfying(),Z=requireMinVersion(),ce=requireValid(),ue=requireOutside(),se=requireGtr(),te=requireLtr(),Y=requireIntersects(),be=requireSimplify(),ye=requireSubset();return semver$1={parse:x,valid:S,clean:E,inc:C,diff:T,major:R,minor:A,patch:I,prerelease:B,compare:D,rcompare:N,compareLoose:M,compareBuild:O,sort:L,rsort:F,gt:U,lt:j,eq:z,neq:W,gte:X,lte:ie,cmp:fe,coerce:xe,Comparator:we,Range:G,satisfies:J,toComparators:q,maxSatisfying:H,minSatisfying:ve,minVersion:Z,validRange:ce,outside:ue,gtr:se,ltr:te,intersects:Y,simplifyRange:be,subset:ye,SemVer:g,re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:r.SEMVER_SPEC_VERSION,RELEASE_TYPES:r.RELEASE_TYPES,compareIdentifiers:_.compareIdentifiers,rcompareIdentifiers:_.rcompareIdentifiers},semver$1}var semverExports=requireSemver();const semver=getDefaultExportFromCjs(semverExports),utiliserConstellation=()=>{const n=inject$1("constl");if(n)return n;throw new Error("Constellation n'est pas trouvable.")},utiliserServeurLocalConstellation=()=>{const n=inject$1("serveurConstl");if(n)return n;throw new Error("Serveur local Constellation n'est pas trouvable.")},கிளிமூக்கு=()=>{const n=inject$1("கிளிமூக்கு");if(n)return n;throw new Error("Kilimukku n'est pas trouvable.")},utiliserNuchabäl=()=>{const n=inject$1("nuch'ab'äl");if(n)return n;throw new Error("Nuchab'äl n'est pas trouvable.")},enregistrerÉcoute=n=>{let r;const g=new EventEmitter$1;let _;const x=new Promise(S=>{eventsExports.once(g,"prêt").then(()=>{S(_)})});return onMounted(async()=>{_=await n,_ instanceof Function?r=_:r=_?.fOublier,g.emit("prêt")}),onUnmounted(async()=>{r&&await r()}),x};class MultiChercheur{nOuProfondeur;fOublierRecherche;constructor(){this.nOuProfondeur=ref$2(10),onUnmounted(async()=>{this.fOublierRecherche&&await this.fOublierRecherche()})}async lancerRecherche({requête:r,réfRésultat:g,fRecherche:_,fRechercheDéfaut:x}){this.fOublierRecherche&&(await this.fOublierRecherche(),this.fOublierRecherche=void 0);let S,E;const C=R=>!!R.fChangerProfondeur,T=async()=>{if(S&&await S(),r.value){const R=await _({requête:r.value,nOuProfondeur:this.nOuProfondeur.value,réfRésultat:g});R&&(S=R.fOublier,E=C(R)?R.fChangerProfondeur:R.fChangerN)}else if(x){const R=await x({nOuProfondeur:this.nOuProfondeur.value,réfRésultat:g});R&&(S=R.fOublier,E=C(R)?R.fChangerProfondeur:R.fChangerN)}else g.value=[]};watch(r,T),T(),watchEffect(async()=>{E&&E(this.nOuProfondeur.value)}),this.fOublierRecherche=S}}const icôneObjet=n=>{switch(n){case"variable":return"mdi-variable";case"motClef":return"mdi-key";case"tableau":return"mdi-table";case"bd":return"mdi-database-outline";case"projet":return"mdi-folder-outline";case"nuée":return"mdi-account-group-outline"}},détecterLangue=async({texte:n})=>{const{francAll:r}=await __vitePreload(async()=>{const{francAll:C}=await import("./index-4E9mG0c-.js");return{francAll:C}},__vite__mapDeps([33,34]),import.meta.url),g=r(n)[0];if(g[1]>.9&&g[0]!=="und")return g[0];const{francAll:_}=await __vitePreload(async()=>{const{francAll:C}=await import("./index-CCuqkz2u.js");return{francAll:C}},__vite__mapDeps([35,34]),import.meta.url),x=_(n)[0];if(x[1]>.9&&x[0]!=="und")return x[0];const{francAll:S}=await __vitePreload(async()=>{const{francAll:C}=await import("./index-HtnVIHG2.js");return{francAll:C}},__vite__mapDeps([36,34]),import.meta.url),E=S(n)[0];if(E[1]>.9&&E[0]!=="und")return E[0]},icôneStatut=n=>{switch(n){case"active":return"mdi-check";case"obsolète":return"mdi-alert-outline";case"jouet":return"mdi-teddy-bear";case"interne":return"mdi-xml"}},choisirDossier=async()=>{throw new Error("Fonction `choisirDossier` non disponible sur la version navigateur de l'IUG. Utiliser uniquement si `isElectronRenderer === true`.")},demanderAccèsMédia$1=async()=>{throw new Error("Fonction `demanderAccèsMédia` non disponible sur la version navigateur de l'IUG. Utiliser uniquement si `isElectronRenderer === true`.")},redémarrer=async()=>{window.location.reload()},native=globalThis.showSaveFilePicker;async function showSaveFilePicker(n={}){if(native&&!n._preferPolyfill)return native(n);n._name&&(console.warn("deprecated _name, spec now have `suggestedName`"),n.suggestedName=n._name);const{FileSystemFileHandle:r}=await __vitePreload(async()=>{const{FileSystemFileHandle:_}=await Promise.resolve().then(()=>FileSystemFileHandle$1);return{FileSystemFileHandle:_}},void 0,import.meta.url),{FileHandle:g}=await __vitePreload(async()=>{const{FileHandle:_}=await import("./downloader-COlTyOI4.js");return{FileHandle:_}},[],import.meta.url);return new r(new g(n.suggestedName))}globalThis.DataTransferItem&&!DataTransferItem.prototype.getAsFileSystemHandle&&(DataTransferItem.prototype.getAsFileSystemHandle=async function(){const n=this.webkitGetAsEntry(),[{FileHandle:r,FolderHandle:g},{FileSystemDirectoryHandle:_},{FileSystemFileHandle:x}]=await Promise.all([__vitePreload(()=>import("./sandbox-B86QinNO.js"),[],import.meta.url),__vitePreload(()=>Promise.resolve().then(()=>FileSystemDirectoryHandle$2),void 0,import.meta.url),__vitePreload(()=>Promise.resolve().then(()=>FileSystemFileHandle$1),void 0,import.meta.url)]);return n.isFile?new x(new r(n,!1)):new _(new g(n,!1))});const config={ReadableStream:globalThis.ReadableStream,WritableStream:globalThis.WritableStream,TransformStream:globalThis.TransformStream,DOMException:globalThis.DOMException,Blob:globalThis.Blob,File:globalThis.File},{WritableStream}=config;class FileSystemWritableFileStream extends WritableStream{#e;constructor(r){super(r),this.#e=r,Object.setPrototypeOf(this,FileSystemWritableFileStream.prototype),this._closed=!1}async close(){this._closed=!0;const r=this.getWriter(),g=r.close();return r.releaseLock(),g}seek(r){return this.write({type:"seek",position:r})}truncate(r){return this.write({type:"truncate",size:r})}write(r){if(this._closed)return Promise.reject(new TypeError("Cannot write to a CLOSED writable stream"));const g=this.getWriter(),_=g.write(r);return g.releaseLock(),_}}Object.defineProperty(FileSystemWritableFileStream.prototype,Symbol.toStringTag,{value:"FileSystemWritableFileStream",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(FileSystemWritableFileStream.prototype,{close:{enumerable:!0},seek:{enumerable:!0},truncate:{enumerable:!0},write:{enumerable:!0}});globalThis.FileSystemFileHandle&&!globalThis.FileSystemFileHandle.prototype.createWritable&&!globalThis.FileSystemWritableFileStream&&(globalThis.FileSystemWritableFileStream=FileSystemWritableFileStream);const kAdapter$2=Symbol("adapter");class FileSystemHandle{[kAdapter$2];name;kind;constructor(r){this.kind=r.kind,this.name=r.name,this[kAdapter$2]=r}async queryPermission(r={}){const{mode:g="read"}=r,_=this[kAdapter$2];if(_.queryPermission)return _.queryPermission({mode:g});if(g==="read")return"granted";if(g==="readwrite")return _.writable?"granted":"denied";throw new TypeError(`Mode ${g} must be 'read' or 'readwrite'`)}async requestPermission({mode:r="read"}={}){const g=this[kAdapter$2];if(g.requestPermission)return g.requestPermission({mode:r});if(r==="read")return"granted";if(r==="readwrite")return g.writable?"granted":"denied";throw new TypeError(`Mode ${r} must be 'read' or 'readwrite'`)}async remove(r={}){await this[kAdapter$2].remove(r)}async isSameEntry(r){return this===r?!0:!r||typeof r!="object"||this.kind!==r.kind||!r[kAdapter$2]?!1:this[kAdapter$2].isSameEntry(r[kAdapter$2])}}Object.defineProperty(FileSystemHandle.prototype,Symbol.toStringTag,{value:"FileSystemHandle",writable:!1,enumerable:!1,configurable:!0});globalThis.FileSystemHandle&&(globalThis.FileSystemHandle.prototype.queryPermission??=function(n){return"granted"});const errors={INVALID:["seeking position failed.","InvalidStateError"],GONE:["A requested file or directory could not be found at the time an operation was processed.","NotFoundError"],MISMATCH:["The path supplied exists, but was not an entry of requested type.","TypeMismatchError"],MOD_ERR:["The object can not be modified in this way.","InvalidModificationError"],SYNTAX:n=>[`Failed to execute 'write' on 'UnderlyingSinkBase': Invalid params passed. ${n}`,"SyntaxError"],SECURITY:["It was determined that certain files are unsafe for access within a Web application, or that too many calls are being made on file resources.","SecurityError"],DISALLOWED:["The request is not allowed by the user agent or the platform in the current context.","NotAllowedError"]},{GONE:GONE$1,MOD_ERR}=errors,kAdapter$1=Symbol("adapter");let FileSystemDirectoryHandle$1=class Un extends FileSystemHandle{[kAdapter$1];constructor(r){super(r),this[kAdapter$1]=r}async getDirectoryHandle(r,g={}){if(r==="")throw new TypeError("Name can't be an empty string.");if(r==="."||r===".."||r.includes("/"))throw new TypeError("Name contains invalid characters.");g.create=!!g.create;const _=await this[kAdapter$1].getDirectoryHandle(r,g);return new Un(_)}async*entries(){const{FileSystemFileHandle:r}=await __vitePreload(async()=>{const{FileSystemFileHandle:g}=await Promise.resolve().then(()=>FileSystemFileHandle$1);return{FileSystemFileHandle:g}},void 0,import.meta.url);for await(const[g,_]of this[kAdapter$1].entries())yield[_.name,_.kind==="file"?new r(_):new Un(_)]}async*getEntries(){const{FileSystemFileHandle:r}=await __vitePreload(async()=>{const{FileSystemFileHandle:g}=await Promise.resolve().then(()=>FileSystemFileHandle$1);return{FileSystemFileHandle:g}},void 0,import.meta.url);console.warn("deprecated, use .entries() instead");for await(let g of this[kAdapter$1].entries())yield g.kind==="file"?new r(g):new Un(g)}async getFileHandle(r,g={}){const{FileSystemFileHandle:_}=await __vitePreload(async()=>{const{FileSystemFileHandle:S}=await Promise.resolve().then(()=>FileSystemFileHandle$1);return{FileSystemFileHandle:S}},void 0,import.meta.url);if(r==="")throw new TypeError("Name can't be an empty string.");if(r==="."||r===".."||r.includes("/"))throw new TypeError("Name contains invalid characters.");g.create=!!g.create;const x=await this[kAdapter$1].getFileHandle(r,g);return new _(x)}async removeEntry(r,g={}){if(r==="")throw new TypeError("Name can't be an empty string.");if(r==="."||r===".."||r.includes("/"))throw new TypeError("Name contains invalid characters.");return g.recursive=!!g.recursive,this[kAdapter$1].removeEntry(r,g)}async resolve(r){if(await r.isSameEntry(this))return[];const g=[{handle:this,path:[]}];for(;g.length;){let{handle:_,path:x}=g.pop();for await(const S of _.values()){if(await S.isSameEntry(r))return[...x,S.name];S.kind==="directory"&&g.push({handle:S,path:[...x,S.name]})}}return null}async*keys(){for await(const[r]of this[kAdapter$1].entries())yield r}async*values(){for await(const[r,g]of this)yield g}[Symbol.asyncIterator](){return this.entries()}};Object.defineProperty(FileSystemDirectoryHandle$1.prototype,Symbol.toStringTag,{value:"FileSystemDirectoryHandle",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(FileSystemDirectoryHandle$1.prototype,{getDirectoryHandle:{enumerable:!0},entries:{enumerable:!0},getFileHandle:{enumerable:!0},removeEntry:{enumerable:!0}});if(globalThis.FileSystemDirectoryHandle){const n=globalThis.FileSystemDirectoryHandle.prototype;n.resolve=async function(S){if(await S.isSameEntry(this))return[];const E=[{handle:this,path:[]}];for(;E.length;){let{handle:C,path:T}=E.pop();for await(const R of C.values()){if(await R.isSameEntry(S))return[...T,R.name];R.kind==="directory"&&E.push({handle:R,path:[...T,R.name]})}}return null};async function r(x){if(await(await navigator.storage.getDirectory()).resolve(x)===null)throw new DOMException(...GONE$1)}const g=n.entries;n.entries=async function*(){await r(this),yield*g.call(this)},n[Symbol.asyncIterator]=async function*(){yield*this.entries()};const _=n.removeEntry;n.removeEntry=async function(x,S={}){return _.call(this,x,S).catch(async E=>{throw E instanceof DOMException&&E.name==="UnknownError"&&!S.recursive&&!(await g.call(this).next()).done?new DOMException(...MOD_ERR):E})}}const FileSystemDirectoryHandle$2=Object.freeze(Object.defineProperty({__proto__:null,FileSystemDirectoryHandle:FileSystemDirectoryHandle$1,default:FileSystemDirectoryHandle$1},Symbol.toStringTag,{value:"Module"})),{INVALID,SYNTAX,GONE}=errors,kAdapter=Symbol("adapter");class FileSystemFileHandle extends FileSystemHandle{[kAdapter];constructor(r){super(r),this[kAdapter]=r}async createWritable(r={}){return new FileSystemWritableFileStream(await this[kAdapter].createWritable(r))}async getFile(){return this[kAdapter].getFile()}}Object.defineProperty(FileSystemFileHandle.prototype,Symbol.toStringTag,{value:"FileSystemFileHandle",writable:!1,enumerable:!1,configurable:!0});Object.defineProperties(FileSystemFileHandle.prototype,{createWritable:{enumerable:!0},getFile:{enumerable:!0}});if(globalThis.FileSystemFileHandle&&!globalThis.FileSystemFileHandle.prototype.createWritable){const n=new WeakMap;let r;const g=()=>{let x,S;onmessage=async E=>{const C=E.ports[0],T=E.data;switch(T.type){case"open":const R=T.name;let A=await navigator.storage.getDirectory();for(const I of T.path)A=await A.getDirectoryHandle(I);x=await A.getFileHandle(R),S=await x.createSyncAccessHandle();break;case"write":S.write(T.data,{at:T.position}),S.flush();break;case"truncate":S.truncate(T.size);break;case"abort":case"close":S.close();break}C.postMessage(0)}};globalThis.FileSystemFileHandle.prototype.createWritable=async function(x){if(!r){const N=`(${g.toString()})()`,M=new Blob([N],{type:"text/javascript"});r=URL.createObjectURL(M)}const S=new Worker(r,{type:"module"});let E=0;const C=new TextEncoder;let T=await this.getFile().then(N=>N.size);const R=N=>new Promise((M,O)=>{const L=new MessageChannel;L.port1.onmessage=F=>{F.data instanceof Error?O(F.data):M(F.data),L.port1.close(),L.port2.close(),L.port1.onmessage=null},S.postMessage(N,[L.port2])}),A=await navigator.storage.getDirectory(),I=await n.get(this),B=await A.resolve(I);if(B===null)throw new DOMException(...GONE);return await R({type:"open",path:B,name:this.name}),x?.keepExistingData===!1&&(await R({type:"truncate",size:0}),T=0),new FileSystemWritableFileStream({start:N=>{},async write(N){if(N?.constructor===Object?N={...N}:N={type:"write",data:N,position:E},N.type==="write"){if(!("data"in N))throw await R({type:"close"}),new DOMException(...SYNTAX("write requires a data argument"));if(N.position??=E,typeof N.data=="string")N.data=C.encode(N.data);else if(N.data instanceof ArrayBuffer)N.data=new Uint8Array(N.data);else if(!(N.data instanceof Uint8Array)&&ArrayBuffer.isView(N.data))N.data=new Uint8Array(N.data.buffer,N.data.byteOffset,N.data.byteLength);else if(!(N.data instanceof Uint8Array)){const O=await new Response(N.data).arrayBuffer();N.data=new Uint8Array(O)}Number.isInteger(N.position)&&N.position>=0&&(E=N.position),E+=N.data.byteLength,T+=N.data.byteLength}else if(N.type==="seek")if(Number.isInteger(N.position)&&N.position>=0){if(T<N.position)throw new DOMException(...INVALID);console.log("seeking",N),E=N.position;return}else throw await R({type:"close"}),new DOMException(...SYNTAX("seek requires a position argument"));else if(N.type==="truncate")if(Number.isInteger(N.size)&&N.size>=0)T=N.size,E>T&&(E=T);else throw await R({type:"close"}),new DOMException(...SYNTAX("truncate requires a size argument"));await R(N)},async close(){await R({type:"close"}),S.terminate()},async abort(N){await R({type:"abort",reason:N}),S.terminate()}})};const _=FileSystemDirectoryHandle.prototype.getFileHandle;FileSystemDirectoryHandle.prototype.getFileHandle=async function(...x){const S=await _.call(this,...x);return n.set(S,this),S}}const FileSystemFileHandle$1=Object.freeze(Object.defineProperty({__proto__:null,FileSystemFileHandle,default:FileSystemFileHandle},Symbol.toStringTag,{value:"Module"})),ouvrirLien=n=>{window.open(n,"_blank")};async function copier(n){await navigator.clipboard?.writeText(n)}function couleurScore(n){return n==null?{couleur:"grey lighten-2",note:"?"}:(n*=100,n>=95?{couleur:"#1e7145",note:"A"}:n>=90?{couleur:"#00a300",note:"A-"}:n>=85?{couleur:"#99b433",note:"B"}:n>=80?{couleur:"#ffc40d",note:"B-"}:n>=70?{couleur:"#e3a21a",note:"C+"}:n>=60?{couleur:"#da532c",note:"C"}:n>=55?{couleur:"#ee1111",note:"D"}:{couleur:"#b91d47",note:"F"})}const couper=(n,r,g)=>[...n].length<=r?n:n.slice(0,20)+g,ajusterTexteTraductible=({anciennes:n,nouvelles:r})=>{const g=Object.keys(n||{}).filter(x=>!Object.keys(r).includes(x)),_=Object.fromEntries(Object.entries(r).filter(([x,S])=>(n||{})[x]!==S));return{àEffacer:g,àAjouter:_}},plateforme=()=>{if(isElectronRenderer)return{plateforme:"électron",so:void 0};if(isBrowser$1){let n;return platformExports.os?.family?.includes("Windows")?n="windows":platformExports.os?.family?.includes("OS X")?n="mac":platformExports.os?.family&&["Linux","Ubuntu","Debian","Fedora","Red Hat","SuSE"].includes(platformExports.os.family)?n="linux":platformExports.os?.family?.includes("iOS")?n="iOS":platformExports.os?.family?.includes("Android")&&(n="androïde"),{plateforme:"navigateur",so:n}}else return{plateforme:void 0,so:void 0}},sourceImage=n=>computed(()=>{if(n.value)return URL.createObjectURL(new Blob([n.value],{type:"image"}))}),demanderAccèsMédia=async n=>{if(isElectronRenderer)return await demanderAccèsMédia$1()},itérableÀFlux=n=>{const r=n[Symbol.asyncIterator]();return new ReadableStream({async pull(g){const{value:_,done:x}=await r.next();x?g.close():g.enqueue(_)}})},téléchargerFlux=async({flux:n,nom:r,types:g})=>{const _=await showSaveFilePicker({_preferPolyfill:!1,suggestedName:r,types:g});await n.pipeTo(await _.createWritable())},utiliserÉtatInfos=defineStore("Infos",()=>{const n=ref$2([]),r=computed(()=>n.value.sort((S,E)=>S.à>E.à?1:-1));return{infos:r,ajouterInfo:(S,E)=>{const C=E||v4$3();return n.value=[{id:C,info:S,lu:!1,à:Date.now()},...r.value.filter(T=>T.id!==C)],C},lireInfo:S=>{const E=n.value.find(C=>C.id===S);if(!E)throw new Error(`Info avec id ${S} introuvable.`);n.value=[{...E,lu:!0},...r.value.filter(C=>C.id!==S)]},effacerInfo:S=>n.value=r.value.filter(E=>E.id!==S)}}),versionPrésente="1.0.2",obtenirDernièreVersion=async()=>{const n=(await axios.get(IPA_TÉLÉCHARGEMENTS)).data;let r,g;for(const _ of n){const x=_.name;if(semver.gt(x,versionPrésente))for(const S of _.assets){const E=S.name.split(".").pop();E&&extentionCompatible(E)&&(r=x,g=S.browser_download_url)}}return r&&g?{versionPlusRécente:r,urlTéléchargement:g}:void 0},surPlateforme=plateforme(),extentionCompatible=n=>surPlateforme.so==="linux"?n==="deb":surPlateforme.so==="mac"?n==="dmg":surPlateforme.so==="windows"?n==="exe":!1,lancerInfosMisesÀJour=()=>{if(!isElectronRenderer)return;const n=utiliserÉtatInfos(),r=async()=>{const _=await obtenirDernièreVersion();if(_){const{versionPlusRécente:x,urlTéléchargement:S}=_;n.ajouterInfo({type:"mettreÀJour",détails:{dernièreVersionDisponible:x,versionActuelle:versionPrésente,urlTéléchargement:S}},"mettreÀJour")}};let g;onMounted(()=>{g=window.setInterval(r,1e3*60*60*1)}),r(),onUnmounted(()=>{g&&clearInterval(g)})},lancerInfosTélécharger=()=>{if(isElectronRenderer)return;const n=utiliserÉtatInfos(),r=utiliserConstellation(),g=suivre(r.suivreNomsDispositifs),_=computed(()=>g.value&&!!Object.values(g.value).find(S=>S.type==="ordinateur"||S.type==="serveur"));let x;watchEffect(()=>{_.value?n.effacerInfo(x):x||(x=n.ajouterInfo({type:"installer"},"installer"))})},lancerInfosProtégerDonnées=()=>{if(isElectronRenderer)return;const n=utiliserÉtatInfos(),r=async()=>{const _=await navigator.storage.persisted();let x;_?(x&&n.effacerInfo(x),x=void 0):x=n.ajouterInfo({type:"protégerDonnées"},"protégerDonnées")};let g;onMounted(()=>{g=window.setInterval(r,1e3*60)}),r(),onUnmounted(()=>{g&&clearInterval(g)})},lancerInfosUtilisationMémoire=({seuil:n})=>{if(isElectronRenderer)return;const r=utiliserÉtatInfos(),g=async()=>{const{quota:x,usage:S}=await navigator.storage.estimate();let E;x!==void 0&&S!==void 0&&S/x>=n?E=r.ajouterInfo({type:"utilisationMémoire",détails:{utilisation:S,quota:x}},"utilisationMémoire"):(E&&r.effacerInfo(E),E=void 0)};let _;onMounted(()=>{_=window.setInterval(g,1e3*60)}),g(),onUnmounted(()=>{_&&clearInterval(_)})},lancerInfosRequêtesServeurLocal=()=>{if(isBrowser$1)return;const n=utiliserÉtatInfos(),r=utiliserServeurLocalConstellation(),g=suivre(r.suivreRequêtesAuthServeur.bind(r));let _;watchEffect(()=>{if(g.value?.length){const x={type:"requêteServeurLocal",détails:{n:g.value.length}};_=n.ajouterInfo(x,"requêtesServeurLocal")}else _&&(n.effacerInfo(_),_=void 0)})},lancerInfos=()=>{lancerInfosMisesÀJour(),lancerInfosTélécharger(),lancerInfosProtégerDonnées(),lancerInfosUtilisationMémoire({seuil:.9}),lancerInfosRequêtesServeurLocal()},makeBorderProps=propsFactory({border:[Boolean,Number,String]},"border");function useBorder(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{borderClasses:computed(()=>{const _=isRef(n)?n.value:n.border,x=[];if(_===!0||_==="")x.push(`${r}--border`);else if(typeof _=="string"||_===0)for(const S of String(_).split(" "))x.push(`border-${S}`);return x})}}const allowedDensities=[null,"default","comfortable","compact"],makeDensityProps=propsFactory({density:{type:String,default:"default",validator:n=>allowedDensities.includes(n)}},"density");function useDensity(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{densityClasses:computed(()=>`${r}--density-${n.density}`)}}const makeElevationProps=propsFactory({elevation:{type:[Number,String],validator(n){const r=parseInt(n);return!isNaN(r)&&r>=0&&r<=24}}},"elevation");function useElevation(n){return{elevationClasses:computed(()=>{const g=isRef(n)?n.value:n.elevation,_=[];return g==null||_.push(`elevation-${g}`),_})}}const makeRoundedProps=propsFactory({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function useRounded(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{roundedClasses:computed(()=>{const _=isRef(n)?n.value:n.rounded,x=isRef(n)?n.value:n.tile,S=[];if(_===!0||_==="")S.push(`${r}--rounded`);else if(typeof _=="string"||_===0)for(const E of String(_).split(" "))S.push(`rounded-${E}`);else(x||_===!1)&&S.push("rounded-0");return S})}}const makeTagProps=propsFactory({tag:{type:String,default:"div"}},"tag");function useColor(n){return destructComputed(()=>{const r=[],g={};if(n.value.background)if(isCssColor(n.value.background)){if(g.backgroundColor=n.value.background,!n.value.text&&isParsableColor(n.value.background)){const _=parseColor(n.value.background);if(_.a==null||_.a===1){const x=getForeground(_);g.color=x,g.caretColor=x}}}else r.push(`bg-${n.value.background}`);return n.value.text&&(isCssColor(n.value.text)?(g.color=n.value.text,g.caretColor=n.value.text):r.push(`text-${n.value.text}`)),{colorClasses:r,colorStyles:g}})}function useTextColor(n,r){const g=computed(()=>({text:isRef(n)?n.value:r?n[r]:null})),{colorClasses:_,colorStyles:x}=useColor(g);return{textColorClasses:_,textColorStyles:x}}function useBackgroundColor(n,r){const g=computed(()=>({background:isRef(n)?n.value:r?n[r]:null})),{colorClasses:_,colorStyles:x}=useColor(g);return{backgroundColorClasses:_,backgroundColorStyles:x}}const allowedVariants$1=["elevated","flat","tonal","outlined","text","plain"];function genOverlays(n,r){return createVNode(Fragment,null,[n&&createVNode("span",{key:"overlay",class:`${r}__overlay`},null),createVNode("span",{key:"underlay",class:`${r}__underlay`},null)])}const makeVariantProps=propsFactory({color:String,variant:{type:String,default:"elevated",validator:n=>allowedVariants$1.includes(n)}},"variant");function useVariant(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const g=computed(()=>{const{variant:S}=unref(n);return`${r}--variant-${S}`}),{colorClasses:_,colorStyles:x}=useColor(computed(()=>{const{variant:S,color:E}=unref(n);return{[["elevated","flat"].includes(S)?"background":"text"]:E}}));return{colorClasses:_,colorStyles:x,variantClasses:g}}const makeVBtnGroupProps=propsFactory({baseColor:String,divided:Boolean,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeElevationProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps()},"VBtnGroup"),VBtnGroup=genericComponent()({name:"VBtnGroup",props:makeVBtnGroupProps(),setup(n,r){let{slots:g}=r;const{themeClasses:_}=provideTheme(n),{densityClasses:x}=useDensity(n),{borderClasses:S}=useBorder(n),{elevationClasses:E}=useElevation(n),{roundedClasses:C}=useRounded(n);provideDefaults({VBtn:{height:"auto",baseColor:toRef(n,"baseColor"),color:toRef(n,"color"),density:toRef(n,"density"),flat:!0,variant:toRef(n,"variant")}}),useRender(()=>createVNode(n.tag,{class:["v-btn-group",{"v-btn-group--divided":n.divided},_.value,S.value,x.value,E.value,C.value,n.class],style:n.style},g))}}),makeGroupProps=propsFactory({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),makeGroupItemProps=propsFactory({value:null,disabled:Boolean,selectedClass:String},"group-item");function useGroupItem(n,r){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const _=getCurrentInstance("useGroupItem");if(!_)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const x=getUid();provide(Symbol.for(`${r.description}:id`),x);const S=inject$1(r,null);if(!S){if(!g)return S;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${r.description}`)}const E=toRef(n,"value"),C=computed(()=>!!(S.disabled.value||n.disabled));S.register({id:x,value:E,disabled:C},_),onBeforeUnmount(()=>{S.unregister(x)});const T=computed(()=>S.isSelected(x)),R=computed(()=>S.items.value[0].id===x),A=computed(()=>S.items.value[S.items.value.length-1].id===x),I=computed(()=>T.value&&[S.selectedClass.value,n.selectedClass]);return watch(T,B=>{_.emit("group:selected",{value:B})},{flush:"sync"}),{id:x,isSelected:T,isFirst:R,isLast:A,toggle:()=>S.select(x,!T.value),select:B=>S.select(x,B),selectedClass:I,value:E,disabled:C,group:S}}function useGroup(n,r){let g=!1;const _=reactive([]),x=useProxiedModel(n,"modelValue",[],B=>B==null?[]:getIds(_,wrapInArray(B)),B=>{const D=getValues(_,B);return n.multiple?D:D[0]}),S=getCurrentInstance("useGroup");function E(B,D){const N=B,M=Symbol.for(`${r.description}:id`),L=findChildrenWithProvide(M,S?.vnode).indexOf(D);unref(N.value)==null&&(N.value=L,N.useIndexAsValue=!0),L>-1?_.splice(L,0,N):_.push(N)}function C(B){if(g)return;T();const D=_.findIndex(N=>N.id===B);_.splice(D,1)}function T(){const B=_.find(D=>!D.disabled);B&&n.mandatory==="force"&&!x.value.length&&(x.value=[B.id])}onMounted(()=>{T()}),onBeforeUnmount(()=>{g=!0}),onUpdated(()=>{for(let B=0;B<_.length;B++)_[B].useIndexAsValue&&(_[B].value=B)});function R(B,D){const N=_.find(M=>M.id===B);if(!(D&&N?.disabled))if(n.multiple){const M=x.value.slice(),O=M.findIndex(F=>F===B),L=~O;if(D=D??!L,L&&n.mandatory&&M.length<=1||!L&&n.max!=null&&M.length+1>n.max)return;O<0&&D?M.push(B):O>=0&&!D&&M.splice(O,1),x.value=M}else{const M=x.value.includes(B);if(n.mandatory&&M)return;x.value=D??!M?[B]:[]}}function A(B){if(n.multiple,x.value.length){const D=x.value[0],N=_.findIndex(L=>L.id===D);let M=(N+B)%_.length,O=_[M];for(;O.disabled&&M!==N;)M=(M+B)%_.length,O=_[M];if(O.disabled)return;x.value=[_[M].id]}else{const D=_.find(N=>!N.disabled);D&&(x.value=[D.id])}}const I={register:E,unregister:C,selected:x,select:R,disabled:toRef(n,"disabled"),prev:()=>A(_.length-1),next:()=>A(1),isSelected:B=>x.value.includes(B),selectedClass:computed(()=>n.selectedClass),items:computed(()=>_),getItemIndex:B=>getItemIndex(_,B)};return provide(r,I),I}function getItemIndex(n,r){const g=getIds(n,[r]);return g.length?n.findIndex(_=>_.id===g[0]):-1}function getIds(n,r){const g=[];return r.forEach(_=>{const x=n.find(E=>deepEqual(_,E.value)),S=n[_];x?.value!=null?g.push(x.id):S!=null&&g.push(S.id)}),g}function getValues(n,r){const g=[];return r.forEach(_=>{const x=n.findIndex(S=>S.id===_);if(~x){const S=n[x];g.push(S.value!=null?S.value:x)}}),g}const VBtnToggleSymbol=Symbol.for("vuetify:v-btn-toggle"),makeVBtnToggleProps=propsFactory({...makeVBtnGroupProps(),...makeGroupProps()},"VBtnToggle"),VBtnToggle=genericComponent()({name:"VBtnToggle",props:makeVBtnToggleProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const{isSelected:_,next:x,prev:S,select:E,selected:C}=useGroup(n,VBtnToggleSymbol);return useRender(()=>{const T=VBtnGroup.filterProps(n);return createVNode(VBtnGroup,mergeProps({class:["v-btn-toggle",n.class]},T,{style:n.style}),{default:()=>[g.default?.({isSelected:_,next:x,prev:S,select:E,selected:C})]})}),{next:x,prev:S,select:E}}}),makeVDefaultsProviderProps=propsFactory({defaults:Object,disabled:Boolean,reset:[Number,String],root:[Boolean,String],scoped:Boolean},"VDefaultsProvider"),VDefaultsProvider=genericComponent(!1)({name:"VDefaultsProvider",props:makeVDefaultsProviderProps(),setup(n,r){let{slots:g}=r;const{defaults:_,disabled:x,reset:S,root:E,scoped:C}=toRefs(n);return provideDefaults(_,{reset:S,root:E,scoped:C,disabled:x}),()=>g.default?.()}}),predefinedSizes=["x-small","small","default","large","x-large"],makeSizeProps=propsFactory({size:{type:[String,Number],default:"default"}},"size");function useSize(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return destructComputed(()=>{let g,_;return includes(predefinedSizes,n.size)?g=`${r}--size-${n.size}`:n.size&&(_={width:convertToUnit(n.size),height:convertToUnit(n.size)}),{sizeClasses:g,sizeStyles:_}})}const makeVIconProps=propsFactory({color:String,disabled:Boolean,start:Boolean,end:Boolean,icon:IconValue,...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"i"}),...makeThemeProps()},"VIcon"),VIcon=genericComponent()({name:"VIcon",props:makeVIconProps(),setup(n,r){let{attrs:g,slots:_}=r;const x=ref$2(),{themeClasses:S}=provideTheme(n),{iconData:E}=useIcon(computed(()=>x.value||n.icon)),{sizeClasses:C}=useSize(n),{textColorClasses:T,textColorStyles:R}=useTextColor(toRef(n,"color"));return useRender(()=>{const A=_.default?.();A&&(x.value=flattenFragments(A).filter(B=>B.type===Text&&B.children&&typeof B.children=="string")[0]?.children);const I=!!(g.onClick||g.onClickOnce);return createVNode(E.value.component,{tag:n.tag,icon:E.value.icon,class:["v-icon","notranslate",S.value,C.value,T.value,{"v-icon--clickable":I,"v-icon--disabled":n.disabled,"v-icon--start":n.start,"v-icon--end":n.end},n.class],style:[C.value?void 0:{fontSize:convertToUnit(n.size),height:convertToUnit(n.size),width:convertToUnit(n.size)},R.value,n.style],role:I?"button":void 0,"aria-hidden":!I,tabindex:I?n.disabled?-1:0:void 0},{default:()=>[A]})}),{}}});function useIntersectionObserver(n,r){const g=ref$2(),_=shallowRef(!1);if(SUPPORTS_INTERSECTION){const x=new IntersectionObserver(S=>{_.value=!!S.find(E=>E.isIntersecting)},r);onBeforeUnmount(()=>{x.disconnect()}),watch(g,(S,E)=>{E&&(x.unobserve(E),_.value=!1),S&&x.observe(S)},{flush:"post"})}return{intersectionRef:g,isIntersecting:_}}const makeVProgressCircularProps=propsFactory({bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...makeComponentProps(),...makeSizeProps(),...makeTagProps({tag:"div"}),...makeThemeProps()},"VProgressCircular"),VProgressCircular=genericComponent()({name:"VProgressCircular",props:makeVProgressCircularProps(),setup(n,r){let{slots:g}=r;const _=20,x=2*Math.PI*_,S=ref$2(),{themeClasses:E}=provideTheme(n),{sizeClasses:C,sizeStyles:T}=useSize(n),{textColorClasses:R,textColorStyles:A}=useTextColor(toRef(n,"color")),{textColorClasses:I,textColorStyles:B}=useTextColor(toRef(n,"bgColor")),{intersectionRef:D,isIntersecting:N}=useIntersectionObserver(),{resizeRef:M,contentRect:O}=useResizeObserver(),L=computed(()=>Math.max(0,Math.min(100,parseFloat(n.modelValue)))),F=computed(()=>Number(n.width)),U=computed(()=>T.value?Number(n.size):O.value?O.value.width:Math.max(F.value,32)),j=computed(()=>_/(1-F.value/U.value)*2),z=computed(()=>F.value/U.value*j.value),W=computed(()=>convertToUnit((100-L.value)/100*x));return watchEffect(()=>{D.value=S.value,M.value=S.value}),useRender(()=>createVNode(n.tag,{ref:S,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!n.indeterminate,"v-progress-circular--visible":N.value,"v-progress-circular--disable-shrink":n.indeterminate==="disable-shrink"},E.value,C.value,R.value,n.class],style:[T.value,A.value,n.style],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":n.indeterminate?void 0:L.value},{default:()=>[createVNode("svg",{style:{transform:`rotate(calc(-90deg + ${Number(n.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${j.value} ${j.value}`},[createVNode("circle",{class:["v-progress-circular__underlay",I.value],style:B.value,fill:"transparent",cx:"50%",cy:"50%",r:_,"stroke-width":z.value,"stroke-dasharray":x,"stroke-dashoffset":0},null),createVNode("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:_,"stroke-width":z.value,"stroke-dasharray":x,"stroke-dashoffset":W.value},null)]),g.default&&createVNode("div",{class:"v-progress-circular__content"},[g.default({value:L.value})])]})),{}}}),makeDimensionProps=propsFactory({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function useDimension(n){return{dimensionStyles:computed(()=>{const g={},_=convertToUnit(n.height),x=convertToUnit(n.maxHeight),S=convertToUnit(n.maxWidth),E=convertToUnit(n.minHeight),C=convertToUnit(n.minWidth),T=convertToUnit(n.width);return _!=null&&(g.height=_),x!=null&&(g.maxHeight=x),S!=null&&(g.maxWidth=S),E!=null&&(g.minHeight=E),C!=null&&(g.minWidth=C),T!=null&&(g.width=T),g})}}const oppositeMap={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},makeLocationProps=propsFactory({location:String},"location");function useLocation(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g=arguments.length>2?arguments[2]:void 0;const{isRtl:_}=useRtl();return{locationStyles:computed(()=>{if(!n.location)return{};const{side:S,align:E}=parseAnchor(n.location.split(" ").length>1?n.location:`${n.location} center`,_.value);function C(R){return g?g(R):0}const T={};return S!=="center"&&(r?T[oppositeMap[S]]=`calc(100% - ${C(S)}px)`:T[S]=0),E!=="center"?r?T[oppositeMap[E]]=`calc(100% - ${C(E)}px)`:T[E]=0:(S==="center"?T.top=T.left="50%":T[{top:"left",bottom:"left",left:"top",right:"top"}[S]]="50%",T.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[S]),T})}}const makeVProgressLinearProps=propsFactory({absolute:Boolean,active:{type:Boolean,default:!0},bgColor:String,bgOpacity:[Number,String],bufferValue:{type:[Number,String],default:0},bufferColor:String,bufferOpacity:[Number,String],clickable:Boolean,color:String,height:{type:[Number,String],default:4},indeterminate:Boolean,max:{type:[Number,String],default:100},modelValue:{type:[Number,String],default:0},opacity:[Number,String],reverse:Boolean,stream:Boolean,striped:Boolean,roundedBar:Boolean,...makeComponentProps(),...makeLocationProps({location:"top"}),...makeRoundedProps(),...makeTagProps(),...makeThemeProps()},"VProgressLinear"),VProgressLinear=genericComponent()({name:"VProgressLinear",props:makeVProgressLinearProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const _=useProxiedModel(n,"modelValue"),{isRtl:x,rtlClasses:S}=useRtl(),{themeClasses:E}=provideTheme(n),{locationStyles:C}=useLocation(n),{textColorClasses:T,textColorStyles:R}=useTextColor(n,"color"),{backgroundColorClasses:A,backgroundColorStyles:I}=useBackgroundColor(computed(()=>n.bgColor||n.color)),{backgroundColorClasses:B,backgroundColorStyles:D}=useBackgroundColor(computed(()=>n.bufferColor||n.bgColor||n.color)),{backgroundColorClasses:N,backgroundColorStyles:M}=useBackgroundColor(n,"color"),{roundedClasses:O}=useRounded(n),{intersectionRef:L,isIntersecting:F}=useIntersectionObserver(),U=computed(()=>parseFloat(n.max)),j=computed(()=>parseFloat(n.height)),z=computed(()=>clamp(parseFloat(n.bufferValue)/U.value*100,0,100)),W=computed(()=>clamp(parseFloat(_.value)/U.value*100,0,100)),X=computed(()=>x.value!==n.reverse),ie=computed(()=>n.indeterminate?"fade-transition":"slide-x-transition"),fe=IN_BROWSER&&window.matchMedia?.("(forced-colors: active)").matches;function xe(we){if(!L.value)return;const{left:G,right:J,width:q}=L.value.getBoundingClientRect(),H=X.value?q-we.clientX+(J-q):we.clientX-G;_.value=Math.round(H/q*U.value)}return useRender(()=>createVNode(n.tag,{ref:L,class:["v-progress-linear",{"v-progress-linear--absolute":n.absolute,"v-progress-linear--active":n.active&&F.value,"v-progress-linear--reverse":X.value,"v-progress-linear--rounded":n.rounded,"v-progress-linear--rounded-bar":n.roundedBar,"v-progress-linear--striped":n.striped},O.value,E.value,S.value,n.class],style:[{bottom:n.location==="bottom"?0:void 0,top:n.location==="top"?0:void 0,height:n.active?convertToUnit(j.value):0,"--v-progress-linear-height":convertToUnit(j.value),...n.absolute?C.value:{}},n.style],role:"progressbar","aria-hidden":n.active?"false":"true","aria-valuemin":"0","aria-valuemax":n.max,"aria-valuenow":n.indeterminate?void 0:Math.min(parseFloat(_.value),U.value),onClick:n.clickable&&xe},{default:()=>[n.stream&&createVNode("div",{key:"stream",class:["v-progress-linear__stream",T.value],style:{...R.value,[X.value?"left":"right"]:convertToUnit(-j.value),borderTop:`${convertToUnit(j.value/2)} dotted`,opacity:parseFloat(n.bufferOpacity),top:`calc(50% - ${convertToUnit(j.value/4)})`,width:convertToUnit(100-z.value,"%"),"--v-progress-linear-stream-to":convertToUnit(j.value*(X.value?1:-1))}},null),createVNode("div",{class:["v-progress-linear__background",fe?void 0:A.value],style:[I.value,{opacity:parseFloat(n.bgOpacity),width:n.stream?0:void 0}]},null),createVNode("div",{class:["v-progress-linear__buffer",fe?void 0:B.value],style:[D.value,{opacity:parseFloat(n.bufferOpacity),width:convertToUnit(z.value,"%")}]},null),createVNode(Transition,{name:ie.value},{default:()=>[n.indeterminate?createVNode("div",{class:"v-progress-linear__indeterminate"},[["long","short"].map(we=>createVNode("div",{key:we,class:["v-progress-linear__indeterminate",we,fe?void 0:N.value],style:M.value},null))]):createVNode("div",{class:["v-progress-linear__determinate",fe?void 0:N.value],style:[M.value,{width:convertToUnit(W.value,"%")}]},null)]}),g.default&&createVNode("div",{class:"v-progress-linear__content"},[g.default({value:W.value,buffer:z.value})])]})),{}}}),makeLoaderProps=propsFactory({loading:[Boolean,String]},"loader");function useLoader(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{loaderClasses:computed(()=>({[`${r}--loading`]:n.loading}))}}function LoaderSlot(n,r){let{slots:g}=r;return createVNode("div",{class:`${n.name}__loader`},[g.default?.({color:n.color,isActive:n.active})||createVNode(VProgressLinear,{absolute:n.absolute,active:n.active,color:n.color,height:"2",indeterminate:!0},null)])}const positionValues=["static","relative","fixed","absolute","sticky"],makePositionProps=propsFactory({position:{type:String,validator:n=>positionValues.includes(n)}},"position");function usePosition(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{positionClasses:computed(()=>n.position?`${r}--${n.position}`:void 0)}}function useRoute(){const n=getCurrentInstance("useRoute");return computed(()=>n?.proxy?.$route)}function useRouter(){return getCurrentInstance("useRouter")?.proxy?.$router}function useLink(n,r){const g=resolveDynamicComponent("RouterLink"),_=computed(()=>!!(n.href||n.to)),x=computed(()=>_?.value||hasEvent(r,"click")||hasEvent(n,"click"));if(typeof g=="string"||!("useLink"in g)){const I=toRef(n,"href");return{isLink:_,isClickable:x,href:I,linkProps:reactive({href:I})}}const S=computed(()=>({...n,to:toRef(()=>n.to||"")})),E=g.useLink(S.value),C=computed(()=>n.to?E:void 0),T=useRoute(),R=computed(()=>C.value?n.exact?T.value?C.value.isExactActive?.value&&deepEqual(C.value.route.value.query,T.value.query):C.value.isExactActive?.value??!1:C.value.isActive?.value??!1:!1),A=computed(()=>n.to?C.value?.route.value.href:n.href);return{isLink:_,isClickable:x,isActive:R,route:C.value?.route,navigate:C.value?.navigate,href:A,linkProps:reactive({href:A,"aria-current":computed(()=>R.value?"page":void 0)})}}const makeRouterProps=propsFactory({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router");let inTransition=!1;function useBackButton(n,r){let g=!1,_,x;IN_BROWSER&&(nextTick$1(()=>{window.addEventListener("popstate",S),_=n?.beforeEach((E,C,T)=>{inTransition?g?r(T):T():setTimeout(()=>g?r(T):T()),inTransition=!0}),x=n?.afterEach(()=>{inTransition=!1})}),onScopeDispose(()=>{window.removeEventListener("popstate",S),_?.(),x?.()}));function S(E){E.state?.replaced||(g=!0,setTimeout(()=>g=!1))}}function useSelectLink(n,r){watch(()=>n.isActive?.value,g=>{n.isLink.value&&g&&r&&nextTick$1(()=>{r(!0)})},{immediate:!0})}const stopSymbol=Symbol("rippleStop"),DELAY_RIPPLE=80;function transform(n,r){n.style.transform=r,n.style.webkitTransform=r}function isTouchEvent(n){return n.constructor.name==="TouchEvent"}function isKeyboardEvent(n){return n.constructor.name==="KeyboardEvent"}const calculate=function(n,r){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=0,x=0;if(!isKeyboardEvent(n)){const I=r.getBoundingClientRect(),B=isTouchEvent(n)?n.touches[n.touches.length-1]:n;_=B.clientX-I.left,x=B.clientY-I.top}let S=0,E=.3;r._ripple?.circle?(E=.15,S=r.clientWidth/2,S=g.center?S:S+Math.sqrt((_-S)**2+(x-S)**2)/4):S=Math.sqrt(r.clientWidth**2+r.clientHeight**2)/2;const C=`${(r.clientWidth-S*2)/2}px`,T=`${(r.clientHeight-S*2)/2}px`,R=g.center?C:`${_-S}px`,A=g.center?T:`${x-S}px`;return{radius:S,scale:E,x:R,y:A,centerX:C,centerY:T}},ripples={show(n,r){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!r?._ripple?.enabled)return;const _=document.createElement("span"),x=document.createElement("span");_.appendChild(x),_.className="v-ripple__container",g.class&&(_.className+=` ${g.class}`);const{radius:S,scale:E,x:C,y:T,centerX:R,centerY:A}=calculate(n,r,g),I=`${S*2}px`;x.className="v-ripple__animation",x.style.width=I,x.style.height=I,r.appendChild(_);const B=window.getComputedStyle(r);B&&B.position==="static"&&(r.style.position="relative",r.dataset.previousPosition="static"),x.classList.add("v-ripple__animation--enter"),x.classList.add("v-ripple__animation--visible"),transform(x,`translate(${C}, ${T}) scale3d(${E},${E},${E})`),x.dataset.activated=String(performance.now()),setTimeout(()=>{x.classList.remove("v-ripple__animation--enter"),x.classList.add("v-ripple__animation--in"),transform(x,`translate(${R}, ${A}) scale3d(1,1,1)`)},0)},hide(n){if(!n?._ripple?.enabled)return;const r=n.getElementsByClassName("v-ripple__animation");if(r.length===0)return;const g=r[r.length-1];if(g.dataset.isHiding)return;g.dataset.isHiding="true";const _=performance.now()-Number(g.dataset.activated),x=Math.max(250-_,0);setTimeout(()=>{g.classList.remove("v-ripple__animation--in"),g.classList.add("v-ripple__animation--out"),setTimeout(()=>{n.getElementsByClassName("v-ripple__animation").length===1&&n.dataset.previousPosition&&(n.style.position=n.dataset.previousPosition,delete n.dataset.previousPosition),g.parentNode?.parentNode===n&&n.removeChild(g.parentNode)},300)},x)}};function isRippleEnabled(n){return typeof n>"u"||!!n}function rippleShow(n){const r={},g=n.currentTarget;if(!(!g?._ripple||g._ripple.touched||n[stopSymbol])){if(n[stopSymbol]=!0,isTouchEvent(n))g._ripple.touched=!0,g._ripple.isTouch=!0;else if(g._ripple.isTouch)return;if(r.center=g._ripple.centered||isKeyboardEvent(n),g._ripple.class&&(r.class=g._ripple.class),isTouchEvent(n)){if(g._ripple.showTimerCommit)return;g._ripple.showTimerCommit=()=>{ripples.show(n,g,r)},g._ripple.showTimer=window.setTimeout(()=>{g?._ripple?.showTimerCommit&&(g._ripple.showTimerCommit(),g._ripple.showTimerCommit=null)},DELAY_RIPPLE)}else ripples.show(n,g,r)}}function rippleStop(n){n[stopSymbol]=!0}function rippleHide(n){const r=n.currentTarget;if(r?._ripple){if(window.clearTimeout(r._ripple.showTimer),n.type==="touchend"&&r._ripple.showTimerCommit){r._ripple.showTimerCommit(),r._ripple.showTimerCommit=null,r._ripple.showTimer=window.setTimeout(()=>{rippleHide(n)});return}window.setTimeout(()=>{r._ripple&&(r._ripple.touched=!1)}),ripples.hide(r)}}function rippleCancelShow(n){const r=n.currentTarget;r?._ripple&&(r._ripple.showTimerCommit&&(r._ripple.showTimerCommit=null),window.clearTimeout(r._ripple.showTimer))}let keyboardRipple=!1;function keyboardRippleShow(n){!keyboardRipple&&(n.keyCode===keyCodes.enter||n.keyCode===keyCodes.space)&&(keyboardRipple=!0,rippleShow(n))}function keyboardRippleHide(n){keyboardRipple=!1,rippleHide(n)}function focusRippleHide(n){keyboardRipple&&(keyboardRipple=!1,rippleHide(n))}function updateRipple(n,r,g){const{value:_,modifiers:x}=r,S=isRippleEnabled(_);if(S||ripples.hide(n),n._ripple=n._ripple??{},n._ripple.enabled=S,n._ripple.centered=x.center,n._ripple.circle=x.circle,isObject(_)&&_.class&&(n._ripple.class=_.class),S&&!g){if(x.stop){n.addEventListener("touchstart",rippleStop,{passive:!0}),n.addEventListener("mousedown",rippleStop);return}n.addEventListener("touchstart",rippleShow,{passive:!0}),n.addEventListener("touchend",rippleHide,{passive:!0}),n.addEventListener("touchmove",rippleCancelShow,{passive:!0}),n.addEventListener("touchcancel",rippleHide),n.addEventListener("mousedown",rippleShow),n.addEventListener("mouseup",rippleHide),n.addEventListener("mouseleave",rippleHide),n.addEventListener("keydown",keyboardRippleShow),n.addEventListener("keyup",keyboardRippleHide),n.addEventListener("blur",focusRippleHide),n.addEventListener("dragstart",rippleHide,{passive:!0})}else!S&&g&&removeListeners(n)}function removeListeners(n){n.removeEventListener("mousedown",rippleShow),n.removeEventListener("touchstart",rippleShow),n.removeEventListener("touchend",rippleHide),n.removeEventListener("touchmove",rippleCancelShow),n.removeEventListener("touchcancel",rippleHide),n.removeEventListener("mouseup",rippleHide),n.removeEventListener("mouseleave",rippleHide),n.removeEventListener("keydown",keyboardRippleShow),n.removeEventListener("keyup",keyboardRippleHide),n.removeEventListener("dragstart",rippleHide),n.removeEventListener("blur",focusRippleHide)}function mounted$2(n,r){updateRipple(n,r,!1)}function unmounted$2(n){delete n._ripple,removeListeners(n)}function updated(n,r){if(r.value===r.oldValue)return;const g=isRippleEnabled(r.oldValue);updateRipple(n,r,g)}const Ripple={mounted:mounted$2,unmounted:unmounted$2,updated},makeVBtnProps=propsFactory({active:{type:Boolean,default:void 0},activeColor:String,baseColor:String,symbol:{type:null,default:VBtnToggleSymbol},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:IconValue,appendIcon:IconValue,block:Boolean,readonly:Boolean,slim:Boolean,stacked:Boolean,ripple:{type:[Boolean,Object],default:!0},text:String,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeGroupItemProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"button"}),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},"VBtn"),VBtn=genericComponent()({name:"VBtn",props:makeVBtnProps(),emits:{"group:selected":n=>!0},setup(n,r){let{attrs:g,slots:_}=r;const{themeClasses:x}=provideTheme(n),{borderClasses:S}=useBorder(n),{densityClasses:E}=useDensity(n),{dimensionStyles:C}=useDimension(n),{elevationClasses:T}=useElevation(n),{loaderClasses:R}=useLoader(n),{locationStyles:A}=useLocation(n),{positionClasses:I}=usePosition(n),{roundedClasses:B}=useRounded(n),{sizeClasses:D,sizeStyles:N}=useSize(n),M=useGroupItem(n,n.symbol,!1),O=useLink(n,g),L=computed(()=>n.active!==void 0?n.active:O.isLink.value?O.isActive?.value:M?.isSelected.value),F=computed(()=>L.value?n.activeColor??n.color:n.color),U=computed(()=>({color:M?.isSelected.value&&(!O.isLink.value||O.isActive?.value)||!M||O.isActive?.value?F.value??n.baseColor:n.baseColor,variant:n.variant})),{colorClasses:j,colorStyles:z,variantClasses:W}=useVariant(U),X=computed(()=>M?.disabled.value||n.disabled),ie=computed(()=>n.variant==="elevated"&&!(n.disabled||n.flat||n.border)),fe=computed(()=>{if(!(n.value===void 0||typeof n.value=="symbol"))return Object(n.value)===n.value?JSON.stringify(n.value,null,0):n.value});function xe(we){X.value||O.isLink.value&&(we.metaKey||we.ctrlKey||we.shiftKey||we.button!==0||g.target==="_blank")||(O.navigate?.(we),M?.toggle())}return useSelectLink(O,M?.select),useRender(()=>{const we=O.isLink.value?"a":n.tag,G=!!(n.prependIcon||_.prepend),J=!!(n.appendIcon||_.append),q=!!(n.icon&&n.icon!==!0);return withDirectives(createVNode(we,mergeProps({type:we==="a"?void 0:"button",class:["v-btn",M?.selectedClass.value,{"v-btn--active":L.value,"v-btn--block":n.block,"v-btn--disabled":X.value,"v-btn--elevated":ie.value,"v-btn--flat":n.flat,"v-btn--icon":!!n.icon,"v-btn--loading":n.loading,"v-btn--readonly":n.readonly,"v-btn--slim":n.slim,"v-btn--stacked":n.stacked},x.value,S.value,j.value,E.value,T.value,R.value,I.value,B.value,D.value,W.value,n.class],style:[z.value,C.value,A.value,N.value,n.style],"aria-busy":n.loading?!0:void 0,disabled:X.value||void 0,tabindex:n.loading||n.readonly?-1:void 0,onClick:xe,value:fe.value},O.linkProps),{default:()=>[genOverlays(!0,"v-btn"),!n.icon&&G&&createVNode("span",{key:"prepend",class:"v-btn__prepend"},[_.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!n.prependIcon,defaults:{VIcon:{icon:n.prependIcon}}},_.prepend):createVNode(VIcon,{key:"prepend-icon",icon:n.prependIcon},null)]),createVNode("span",{class:"v-btn__content","data-no-activator":""},[!_.default&&q?createVNode(VIcon,{key:"content-icon",icon:n.icon},null):createVNode(VDefaultsProvider,{key:"content-defaults",disabled:!q,defaults:{VIcon:{icon:n.icon}}},{default:()=>[_.default?.()??n.text]})]),!n.icon&&J&&createVNode("span",{key:"append",class:"v-btn__append"},[_.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!n.appendIcon,defaults:{VIcon:{icon:n.appendIcon}}},_.append):createVNode(VIcon,{key:"append-icon",icon:n.appendIcon},null)]),!!n.loading&&createVNode("span",{key:"loader",class:"v-btn__loader"},[_.loader?.()??createVNode(VProgressCircular,{color:typeof n.loading=="boolean"?void 0:n.loading,indeterminate:!0,width:"2"},null)])]}),[[Ripple,!X.value&&n.ripple,"",{center:!!n.icon}]])}),{group:M}}}),VCardActions=genericComponent()({name:"VCardActions",props:makeComponentProps(),setup(n,r){let{slots:g}=r;return provideDefaults({VBtn:{slim:!0,variant:"text"}}),useRender(()=>createVNode("div",{class:["v-card-actions",n.class],style:n.style},[g.default?.()])),{}}}),makeVCardSubtitleProps=propsFactory({opacity:[Number,String],...makeComponentProps(),...makeTagProps()},"VCardSubtitle"),VCardSubtitle=genericComponent()({name:"VCardSubtitle",props:makeVCardSubtitleProps(),setup(n,r){let{slots:g}=r;return useRender(()=>createVNode(n.tag,{class:["v-card-subtitle",n.class],style:[{"--v-card-subtitle-opacity":n.opacity},n.style]},g)),{}}}),VCardTitle=createSimpleFunctional("v-card-title");function useAspectStyles(n){return{aspectStyles:computed(()=>{const r=Number(n.aspectRatio);return r?{paddingBottom:String(1/r*100)+"%"}:void 0})}}const makeVResponsiveProps=propsFactory({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...makeComponentProps(),...makeDimensionProps()},"VResponsive"),VResponsive=genericComponent()({name:"VResponsive",props:makeVResponsiveProps(),setup(n,r){let{slots:g}=r;const{aspectStyles:_}=useAspectStyles(n),{dimensionStyles:x}=useDimension(n);return useRender(()=>createVNode("div",{class:["v-responsive",{"v-responsive--inline":n.inline},n.class],style:[x.value,n.style]},[createVNode("div",{class:"v-responsive__sizer",style:_.value},null),g.additional?.(),g.default&&createVNode("div",{class:["v-responsive__content",n.contentClass]},[g.default()])])),{}}}),makeTransitionProps$1=propsFactory({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:n=>n!==!0}},"transition"),MaybeTransition=(n,r)=>{let{slots:g}=r;const{transition:_,disabled:x,group:S,...E}=n,{component:C=S?TransitionGroup:Transition,...T}=typeof _=="object"?_:{};return h$2(C,mergeProps(typeof _=="string"?{name:x?"":_}:T,typeof _=="string"?{}:Object.fromEntries(Object.entries({disabled:x,group:S}).filter(R=>{let[A,I]=R;return I!==void 0})),E),g)};function mounted$1(n,r){if(!SUPPORTS_INTERSECTION)return;const g=r.modifiers||{},_=r.value,{handler:x,options:S}=typeof _=="object"?_:{handler:_,options:{}},E=new IntersectionObserver(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1?arguments[1]:void 0;const R=n._observe?.[r.instance.$.uid];if(!R)return;const A=C.some(I=>I.isIntersecting);x&&(!g.quiet||R.init)&&(!g.once||A||R.init)&&x(A,C,T),A&&g.once?unmounted$1(n,r):R.init=!0},S);n._observe=Object(n._observe),n._observe[r.instance.$.uid]={init:!1,observer:E},E.observe(n)}function unmounted$1(n,r){const g=n._observe?.[r.instance.$.uid];g&&(g.observer.unobserve(n),delete n._observe[r.instance.$.uid])}const Intersect={mounted:mounted$1,unmounted:unmounted$1},makeVImgProps=propsFactory({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...makeVResponsiveProps(),...makeComponentProps(),...makeRoundedProps(),...makeTransitionProps$1()},"VImg"),VImg=genericComponent()({name:"VImg",directives:{intersect:Intersect},props:makeVImgProps(),emits:{loadstart:n=>!0,load:n=>!0,error:n=>!0},setup(n,r){let{emit:g,slots:_}=r;const{backgroundColorClasses:x,backgroundColorStyles:S}=useBackgroundColor(toRef(n,"color")),{roundedClasses:E}=useRounded(n),C=getCurrentInstance("VImg"),T=shallowRef(""),R=ref$2(),A=shallowRef(n.eager?"loading":"idle"),I=shallowRef(),B=shallowRef(),D=computed(()=>n.src&&typeof n.src=="object"?{src:n.src.src,srcset:n.srcset||n.src.srcset,lazySrc:n.lazySrc||n.src.lazySrc,aspect:Number(n.aspectRatio||n.src.aspect||0)}:{src:n.src,srcset:n.srcset,lazySrc:n.lazySrc,aspect:Number(n.aspectRatio||0)}),N=computed(()=>D.value.aspect||I.value/B.value||0);watch(()=>n.src,()=>{M(A.value!=="idle")}),watch(N,(G,J)=>{!G&&J&&R.value&&j(R.value)}),onBeforeMount(()=>M());function M(G){if(!(n.eager&&G)&&!(SUPPORTS_INTERSECTION&&!G&&!n.eager)){if(A.value="loading",D.value.lazySrc){const J=new Image;J.src=D.value.lazySrc,j(J,null)}D.value.src&&nextTick$1(()=>{g("loadstart",R.value?.currentSrc||D.value.src),setTimeout(()=>{if(!C.isUnmounted)if(R.value?.complete){if(R.value.naturalWidth||L(),A.value==="error")return;N.value||j(R.value,null),A.value==="loading"&&O()}else N.value||j(R.value),F()})})}}function O(){C.isUnmounted||(F(),j(R.value),A.value="loaded",g("load",R.value?.currentSrc||D.value.src))}function L(){C.isUnmounted||(A.value="error",g("error",R.value?.currentSrc||D.value.src))}function F(){const G=R.value;G&&(T.value=G.currentSrc||G.src)}let U=-1;onBeforeUnmount(()=>{clearTimeout(U)});function j(G){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const q=()=>{if(clearTimeout(U),C.isUnmounted)return;const{naturalHeight:H,naturalWidth:ve}=G;H||ve?(I.value=ve,B.value=H):!G.complete&&A.value==="loading"&&J!=null?U=window.setTimeout(q,J):(G.currentSrc.endsWith(".svg")||G.currentSrc.startsWith("data:image/svg+xml"))&&(I.value=1,B.value=1)};q()}const z=computed(()=>({"v-img__img--cover":n.cover,"v-img__img--contain":!n.cover})),W=()=>{if(!D.value.src||A.value==="idle")return null;const G=createVNode("img",{class:["v-img__img",z.value],style:{objectPosition:n.position},src:D.value.src,srcset:D.value.srcset,alt:n.alt,crossorigin:n.crossorigin,referrerpolicy:n.referrerpolicy,draggable:n.draggable,sizes:n.sizes,ref:R,onLoad:O,onError:L},null),J=_.sources?.();return createVNode(MaybeTransition,{transition:n.transition,appear:!0},{default:()=>[withDirectives(J?createVNode("picture",{class:"v-img__picture"},[J,G]):G,[[vShow,A.value==="loaded"]])]})},X=()=>createVNode(MaybeTransition,{transition:n.transition},{default:()=>[D.value.lazySrc&&A.value!=="loaded"&&createVNode("img",{class:["v-img__img","v-img__img--preload",z.value],style:{objectPosition:n.position},src:D.value.lazySrc,alt:n.alt,crossorigin:n.crossorigin,referrerpolicy:n.referrerpolicy,draggable:n.draggable},null)]}),ie=()=>_.placeholder?createVNode(MaybeTransition,{transition:n.transition,appear:!0},{default:()=>[(A.value==="loading"||A.value==="error"&&!_.error)&&createVNode("div",{class:"v-img__placeholder"},[_.placeholder()])]}):null,fe=()=>_.error?createVNode(MaybeTransition,{transition:n.transition,appear:!0},{default:()=>[A.value==="error"&&createVNode("div",{class:"v-img__error"},[_.error()])]}):null,xe=()=>n.gradient?createVNode("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${n.gradient})`}},null):null,we=shallowRef(!1);{const G=watch(N,J=>{J&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{we.value=!0})}),G())})}return useRender(()=>{const G=VResponsive.filterProps(n);return withDirectives(createVNode(VResponsive,mergeProps({class:["v-img",{"v-img--absolute":n.absolute,"v-img--booting":!we.value},x.value,E.value,n.class],style:[{width:convertToUnit(n.width==="auto"?I.value:n.width)},S.value,n.style]},G,{aspectRatio:N.value,"aria-label":n.alt,role:n.alt?"img":void 0}),{additional:()=>createVNode(Fragment,null,[createVNode(W,null,null),createVNode(X,null,null),createVNode(xe,null,null),createVNode(ie,null,null),createVNode(fe,null,null)]),default:_.default}),[[resolveDirective("intersect"),{handler:M,options:n.options},null,{once:!0}]])}),{currentSrc:T,image:R,state:A,naturalWidth:I,naturalHeight:B}}}),makeVAvatarProps=propsFactory({start:Boolean,end:Boolean,icon:IconValue,image:String,text:String,...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeRoundedProps(),...makeSizeProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"flat"})},"VAvatar"),VAvatar=genericComponent()({name:"VAvatar",props:makeVAvatarProps(),setup(n,r){let{slots:g}=r;const{themeClasses:_}=provideTheme(n),{borderClasses:x}=useBorder(n),{colorClasses:S,colorStyles:E,variantClasses:C}=useVariant(n),{densityClasses:T}=useDensity(n),{roundedClasses:R}=useRounded(n),{sizeClasses:A,sizeStyles:I}=useSize(n);return useRender(()=>createVNode(n.tag,{class:["v-avatar",{"v-avatar--start":n.start,"v-avatar--end":n.end},_.value,x.value,S.value,T.value,R.value,A.value,C.value,n.class],style:[E.value,I.value,n.style]},{default:()=>[g.default?createVNode(VDefaultsProvider,{key:"content-defaults",defaults:{VImg:{cover:!0,src:n.image},VIcon:{icon:n.icon}}},{default:()=>[g.default()]}):n.image?createVNode(VImg,{key:"image",src:n.image,alt:"",cover:!0},null):n.icon?createVNode(VIcon,{key:"icon",icon:n.icon},null):n.text,genOverlays(!1,"v-avatar")]})),{}}}),makeCardItemProps=propsFactory({appendAvatar:String,appendIcon:IconValue,prependAvatar:String,prependIcon:IconValue,subtitle:[String,Number],title:[String,Number],...makeComponentProps(),...makeDensityProps()},"VCardItem"),VCardItem=genericComponent()({name:"VCardItem",props:makeCardItemProps(),setup(n,r){let{slots:g}=r;return useRender(()=>{const _=!!(n.prependAvatar||n.prependIcon),x=!!(_||g.prepend),S=!!(n.appendAvatar||n.appendIcon),E=!!(S||g.append),C=!!(n.title!=null||g.title),T=!!(n.subtitle!=null||g.subtitle);return createVNode("div",{class:["v-card-item",n.class],style:n.style},[x&&createVNode("div",{key:"prepend",class:"v-card-item__prepend"},[g.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!_,defaults:{VAvatar:{density:n.density,image:n.prependAvatar},VIcon:{density:n.density,icon:n.prependIcon}}},g.prepend):createVNode(Fragment,null,[n.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar",density:n.density,image:n.prependAvatar},null),n.prependIcon&&createVNode(VIcon,{key:"prepend-icon",density:n.density,icon:n.prependIcon},null)])]),createVNode("div",{class:"v-card-item__content"},[C&&createVNode(VCardTitle,{key:"title"},{default:()=>[g.title?.()??n.title]}),T&&createVNode(VCardSubtitle,{key:"subtitle"},{default:()=>[g.subtitle?.()??n.subtitle]}),g.default?.()]),E&&createVNode("div",{key:"append",class:"v-card-item__append"},[g.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!S,defaults:{VAvatar:{density:n.density,image:n.appendAvatar},VIcon:{density:n.density,icon:n.appendIcon}}},g.append):createVNode(Fragment,null,[n.appendIcon&&createVNode(VIcon,{key:"append-icon",density:n.density,icon:n.appendIcon},null),n.appendAvatar&&createVNode(VAvatar,{key:"append-avatar",density:n.density,image:n.appendAvatar},null)])])])}),{}}}),makeVCardTextProps=propsFactory({opacity:[Number,String],...makeComponentProps(),...makeTagProps()},"VCardText"),VCardText=genericComponent()({name:"VCardText",props:makeVCardTextProps(),setup(n,r){let{slots:g}=r;return useRender(()=>createVNode(n.tag,{class:["v-card-text",n.class],style:[{"--v-card-text-opacity":n.opacity},n.style]},g)),{}}}),makeVCardProps=propsFactory({appendAvatar:String,appendIcon:IconValue,disabled:Boolean,flat:Boolean,hover:Boolean,image:String,link:{type:Boolean,default:void 0},prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},subtitle:[String,Number],text:[String,Number],title:[String,Number],...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},"VCard"),VCard=genericComponent()({name:"VCard",directives:{Ripple},props:makeVCardProps(),setup(n,r){let{attrs:g,slots:_}=r;const{themeClasses:x}=provideTheme(n),{borderClasses:S}=useBorder(n),{colorClasses:E,colorStyles:C,variantClasses:T}=useVariant(n),{densityClasses:R}=useDensity(n),{dimensionStyles:A}=useDimension(n),{elevationClasses:I}=useElevation(n),{loaderClasses:B}=useLoader(n),{locationStyles:D}=useLocation(n),{positionClasses:N}=usePosition(n),{roundedClasses:M}=useRounded(n),O=useLink(n,g),L=computed(()=>n.link!==!1&&O.isLink.value),F=computed(()=>!n.disabled&&n.link!==!1&&(n.link||O.isClickable.value));return useRender(()=>{const U=L.value?"a":n.tag,j=!!(_.title||n.title!=null),z=!!(_.subtitle||n.subtitle!=null),W=j||z,X=!!(_.append||n.appendAvatar||n.appendIcon),ie=!!(_.prepend||n.prependAvatar||n.prependIcon),fe=!!(_.image||n.image),xe=W||ie||X,we=!!(_.text||n.text!=null);return withDirectives(createVNode(U,mergeProps({class:["v-card",{"v-card--disabled":n.disabled,"v-card--flat":n.flat,"v-card--hover":n.hover&&!(n.disabled||n.flat),"v-card--link":F.value},x.value,S.value,E.value,R.value,I.value,B.value,N.value,M.value,T.value,n.class],style:[C.value,A.value,D.value,n.style],onClick:F.value&&O.navigate,tabindex:n.disabled?-1:void 0},O.linkProps),{default:()=>[fe&&createVNode("div",{key:"image",class:"v-card__image"},[_.image?createVNode(VDefaultsProvider,{key:"image-defaults",disabled:!n.image,defaults:{VImg:{cover:!0,src:n.image}}},_.image):createVNode(VImg,{key:"image-img",cover:!0,src:n.image},null)]),createVNode(LoaderSlot,{name:"v-card",active:!!n.loading,color:typeof n.loading=="boolean"?void 0:n.loading},{default:_.loader}),xe&&createVNode(VCardItem,{key:"item",prependAvatar:n.prependAvatar,prependIcon:n.prependIcon,title:n.title,subtitle:n.subtitle,appendAvatar:n.appendAvatar,appendIcon:n.appendIcon},{default:_.item,prepend:_.prepend,title:_.title,subtitle:_.subtitle,append:_.append}),we&&createVNode(VCardText,{key:"text"},{default:()=>[_.text?.()??n.text]}),_.default?.(),_.actions&&createVNode(VCardActions,null,{default:_.actions}),genOverlays(F.value,"v-card")]}),[[resolveDirective("ripple"),F.value&&n.ripple]])}),{}}}),makeTransitionProps=propsFactory({disabled:Boolean,group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:String,origin:String},"transition");function createCssTransition(n,r,g){return genericComponent()({name:n,props:makeTransitionProps({mode:g,origin:r}),setup(_,x){let{slots:S}=x;const E={onBeforeEnter(C){_.origin&&(C.style.transformOrigin=_.origin)},onLeave(C){if(_.leaveAbsolute){const{offsetTop:T,offsetLeft:R,offsetWidth:A,offsetHeight:I}=C;C._transitionInitialStyles={position:C.style.position,top:C.style.top,left:C.style.left,width:C.style.width,height:C.style.height},C.style.position="absolute",C.style.top=`${T}px`,C.style.left=`${R}px`,C.style.width=`${A}px`,C.style.height=`${I}px`}_.hideOnLeave&&C.style.setProperty("display","none","important")},onAfterLeave(C){if(_.leaveAbsolute&&C?._transitionInitialStyles){const{position:T,top:R,left:A,width:I,height:B}=C._transitionInitialStyles;delete C._transitionInitialStyles,C.style.position=T||"",C.style.top=R||"",C.style.left=A||"",C.style.width=I||"",C.style.height=B||""}}};return()=>{const C=_.group?TransitionGroup:Transition;return h$2(C,{name:_.disabled?"":n,css:!_.disabled,..._.group?void 0:{mode:_.mode},..._.disabled?{}:E},S.default)}}})}function createJavascriptTransition(n,r){let g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return genericComponent()({name:n,props:{mode:{type:String,default:g},disabled:Boolean,group:Boolean},setup(_,x){let{slots:S}=x;const E=_.group?TransitionGroup:Transition;return()=>h$2(E,{name:_.disabled?"":n,css:!_.disabled,..._.disabled?{}:r},S.default)}})}function ExpandTransitionGenerator(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const g=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",_=camelize(`offset-${g}`);return{onBeforeEnter(E){E._parent=E.parentNode,E._initialStyle={transition:E.style.transition,overflow:E.style.overflow,[g]:E.style[g]}},onEnter(E){const C=E._initialStyle;E.style.setProperty("transition","none","important"),E.style.overflow="hidden";const T=`${E[_]}px`;E.style[g]="0",E.offsetHeight,E.style.transition=C.transition,n&&E._parent&&E._parent.classList.add(n),requestAnimationFrame(()=>{E.style[g]=T})},onAfterEnter:S,onEnterCancelled:S,onLeave(E){E._initialStyle={transition:"",overflow:E.style.overflow,[g]:E.style[g]},E.style.overflow="hidden",E.style[g]=`${E[_]}px`,E.offsetHeight,requestAnimationFrame(()=>E.style[g]="0")},onAfterLeave:x,onLeaveCancelled:x};function x(E){n&&E._parent&&E._parent.classList.remove(n),S(E)}function S(E){const C=E._initialStyle[g];E.style.overflow=E._initialStyle.overflow,C!=null&&(E.style[g]=C),delete E._initialStyle}}const makeVDialogTransitionProps=propsFactory({target:[Object,Array]},"v-dialog-transition"),VDialogTransition=genericComponent()({name:"VDialogTransition",props:makeVDialogTransitionProps(),setup(n,r){let{slots:g}=r;const _={onBeforeEnter(x){x.style.pointerEvents="none",x.style.visibility="hidden"},async onEnter(x,S){await new Promise(B=>requestAnimationFrame(B)),await new Promise(B=>requestAnimationFrame(B)),x.style.visibility="";const{x:E,y:C,sx:T,sy:R,speed:A}=getDimensions(n.target,x),I=animate(x,[{transform:`translate(${E}px, ${C}px) scale(${T}, ${R})`,opacity:0},{}],{duration:225*A,easing:deceleratedEasing});getChildren(x)?.forEach(B=>{animate(B,[{opacity:0},{opacity:0,offset:.33},{}],{duration:225*2*A,easing:standardEasing})}),I.finished.then(()=>S())},onAfterEnter(x){x.style.removeProperty("pointer-events")},onBeforeLeave(x){x.style.pointerEvents="none"},async onLeave(x,S){await new Promise(B=>requestAnimationFrame(B));const{x:E,y:C,sx:T,sy:R,speed:A}=getDimensions(n.target,x);animate(x,[{},{transform:`translate(${E}px, ${C}px) scale(${T}, ${R})`,opacity:0}],{duration:125*A,easing:acceleratedEasing}).finished.then(()=>S()),getChildren(x)?.forEach(B=>{animate(B,[{},{opacity:0,offset:.2},{opacity:0}],{duration:125*2*A,easing:standardEasing})})},onAfterLeave(x){x.style.removeProperty("pointer-events")}};return()=>n.target?createVNode(Transition,mergeProps({name:"dialog-transition"},_,{css:!1}),g):createVNode(Transition,{name:"dialog-transition"},g)}});function getChildren(n){const r=n.querySelector(":scope > .v-card, :scope > .v-sheet, :scope > .v-list")?.children;return r&&[...r]}function getDimensions(n,r){const g=getTargetBox(n),_=nullifyTransforms(r),[x,S]=getComputedStyle(r).transformOrigin.split(" ").map(L=>parseFloat(L)),[E,C]=getComputedStyle(r).getPropertyValue("--v-overlay-anchor-origin").split(" ");let T=g.left+g.width/2;E==="left"||C==="left"?T-=g.width/2:(E==="right"||C==="right")&&(T+=g.width/2);let R=g.top+g.height/2;E==="top"||C==="top"?R-=g.height/2:(E==="bottom"||C==="bottom")&&(R+=g.height/2);const A=g.width/_.width,I=g.height/_.height,B=Math.max(1,A,I),D=A/B||0,N=I/B||0,M=_.width*_.height/(window.innerWidth*window.innerHeight),O=M>.12?Math.min(1.5,(M-.12)*10+1):1;return{x:T-(x+_.left),y:R-(S+_.top),sx:D,sy:N,speed:O}}createCssTransition("fab-transition","center center","out-in");createCssTransition("dialog-bottom-transition");createCssTransition("dialog-top-transition");const VFadeTransition=createCssTransition("fade-transition"),VScaleTransition=createCssTransition("scale-transition"),VScrollXTransition=createCssTransition("scroll-x-transition");createCssTransition("scroll-x-reverse-transition");const VScrollYTransition=createCssTransition("scroll-y-transition");createCssTransition("scroll-y-reverse-transition");createCssTransition("slide-x-transition");createCssTransition("slide-x-reverse-transition");const VSlideYTransition=createCssTransition("slide-y-transition");createCssTransition("slide-y-reverse-transition");const VExpandTransition=createJavascriptTransition("expand-transition",ExpandTransitionGenerator()),VExpandXTransition=createJavascriptTransition("expand-x-transition",ExpandTransitionGenerator("",!0));function elementToViewport(n,r){return{x:n.x+r.x,y:n.y+r.y}}function getOffset(n,r){return{x:n.x-r.x,y:n.y-r.y}}function anchorToPoint(n,r){if(n.side==="top"||n.side==="bottom"){const{side:g,align:_}=n,x=_==="left"?0:_==="center"?r.width/2:_==="right"?r.width:_,S=g==="top"?0:g==="bottom"?r.height:g;return elementToViewport({x,y:S},r)}else if(n.side==="left"||n.side==="right"){const{side:g,align:_}=n,x=g==="left"?0:g==="right"?r.width:g,S=_==="top"?0:_==="center"?r.height/2:_==="bottom"?r.height:_;return elementToViewport({x,y:S},r)}return elementToViewport({x:r.width/2,y:r.height/2},r)}const locationStrategies={static:staticLocationStrategy,connected:connectedLocationStrategy},makeLocationStrategyProps=propsFactory({locationStrategy:{type:[String,Function],default:"static",validator:n=>typeof n=="function"||n in locationStrategies},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function useLocationStrategies(n,r){const g=ref$2({}),_=ref$2();IN_BROWSER&&useToggleScope(()=>!!(r.isActive.value&&n.locationStrategy),S=>{watch(()=>n.locationStrategy,S),onScopeDispose(()=>{window.removeEventListener("resize",x),_.value=void 0}),window.addEventListener("resize",x,{passive:!0}),typeof n.locationStrategy=="function"?_.value=n.locationStrategy(r,n,g)?.updateLocation:_.value=locationStrategies[n.locationStrategy](r,n,g)?.updateLocation});function x(S){_.value?.(S)}return{contentStyles:g,updateLocation:_}}function staticLocationStrategy(){}function getIntrinsicSize(n,r){const g=nullifyTransforms(n);return r?g.x+=parseFloat(n.style.right||0):g.x-=parseFloat(n.style.left||0),g.y-=parseFloat(n.style.top||0),g}function connectedLocationStrategy(n,r,g){(Array.isArray(n.target.value)||isFixedPosition(n.target.value))&&Object.assign(g.value,{position:"fixed",top:0,[n.isRtl.value?"right":"left"]:0});const{preferredAnchor:x,preferredOrigin:S}=destructComputed(()=>{const N=parseAnchor(r.location,n.isRtl.value),M=r.origin==="overlap"?N:r.origin==="auto"?flipSide(N):parseAnchor(r.origin,n.isRtl.value);return N.side===M.side&&N.align===flipAlign(M).align?{preferredAnchor:flipCorner(N),preferredOrigin:flipCorner(M)}:{preferredAnchor:N,preferredOrigin:M}}),[E,C,T,R]=["minWidth","minHeight","maxWidth","maxHeight"].map(N=>computed(()=>{const M=parseFloat(r[N]);return isNaN(M)?1/0:M})),A=computed(()=>{if(Array.isArray(r.offset))return r.offset;if(typeof r.offset=="string"){const N=r.offset.split(" ").map(parseFloat);return N.length<2&&N.push(0),N}return typeof r.offset=="number"?[r.offset,0]:[0,0]});let I=!1;const B=new ResizeObserver(()=>{I&&D()});watch([n.target,n.contentEl],(N,M)=>{let[O,L]=N,[F,U]=M;F&&!Array.isArray(F)&&B.unobserve(F),O&&!Array.isArray(O)&&B.observe(O),U&&B.unobserve(U),L&&B.observe(L)},{immediate:!0}),onScopeDispose(()=>{B.disconnect()});function D(){if(I=!1,requestAnimationFrame(()=>I=!0),!n.target.value||!n.contentEl.value)return;const N=getTargetBox(n.target.value),M=getIntrinsicSize(n.contentEl.value,n.isRtl.value),O=getScrollParents(n.contentEl.value),L=12;O.length||(O.push(document.documentElement),n.contentEl.value.style.top&&n.contentEl.value.style.left||(M.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),M.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const F=O.reduce((we,G)=>{const J=G.getBoundingClientRect(),q=new Box({x:G===document.documentElement?0:J.x,y:G===document.documentElement?0:J.y,width:G.clientWidth,height:G.clientHeight});return we?new Box({x:Math.max(we.left,q.left),y:Math.max(we.top,q.top),width:Math.min(we.right,q.right)-Math.max(we.left,q.left),height:Math.min(we.bottom,q.bottom)-Math.max(we.top,q.top)}):q},void 0);F.x+=L,F.y+=L,F.width-=L*2,F.height-=L*2;let U={anchor:x.value,origin:S.value};function j(we){const G=new Box(M),J=anchorToPoint(we.anchor,N),q=anchorToPoint(we.origin,G);let{x:H,y:ve}=getOffset(J,q);switch(we.anchor.side){case"top":ve-=A.value[0];break;case"bottom":ve+=A.value[0];break;case"left":H-=A.value[0];break;case"right":H+=A.value[0];break}switch(we.anchor.align){case"top":ve-=A.value[1];break;case"bottom":ve+=A.value[1];break;case"left":H-=A.value[1];break;case"right":H+=A.value[1];break}return G.x+=H,G.y+=ve,G.width=Math.min(G.width,T.value),G.height=Math.min(G.height,R.value),{overflows:getOverflow(G,F),x:H,y:ve}}let z=0,W=0;const X={x:0,y:0},ie={x:!1,y:!1};let fe=-1;for(;!(fe++>10);){const{x:we,y:G,overflows:J}=j(U);z+=we,W+=G,M.x+=we,M.y+=G;{const q=getAxis(U.anchor),H=J.x.before||J.x.after,ve=J.y.before||J.y.after;let Z=!1;if(["x","y"].forEach(ce=>{if(ce==="x"&&H&&!ie.x||ce==="y"&&ve&&!ie.y){const ue={anchor:{...U.anchor},origin:{...U.origin}},se=ce==="x"?q==="y"?flipAlign:flipSide:q==="y"?flipSide:flipAlign;ue.anchor=se(ue.anchor),ue.origin=se(ue.origin);const{overflows:te}=j(ue);(te[ce].before<=J[ce].before&&te[ce].after<=J[ce].after||te[ce].before+te[ce].after<(J[ce].before+J[ce].after)/2)&&(U=ue,Z=ie[ce]=!0)}}),Z)continue}J.x.before&&(z+=J.x.before,M.x+=J.x.before),J.x.after&&(z-=J.x.after,M.x-=J.x.after),J.y.before&&(W+=J.y.before,M.y+=J.y.before),J.y.after&&(W-=J.y.after,M.y-=J.y.after);{const q=getOverflow(M,F);X.x=F.width-q.x.before-q.x.after,X.y=F.height-q.y.before-q.y.after,z+=q.x.before,M.x+=q.x.before,W+=q.y.before,M.y+=q.y.before}break}const xe=getAxis(U.anchor);return Object.assign(g.value,{"--v-overlay-anchor-origin":`${U.anchor.side} ${U.anchor.align}`,transformOrigin:`${U.origin.side} ${U.origin.align}`,top:convertToUnit(pixelRound(W)),left:n.isRtl.value?void 0:convertToUnit(pixelRound(z)),right:n.isRtl.value?convertToUnit(pixelRound(-z)):void 0,minWidth:convertToUnit(xe==="y"?Math.min(E.value,N.width):E.value),maxWidth:convertToUnit(pixelCeil(clamp(X.x,E.value===1/0?0:E.value,T.value))),maxHeight:convertToUnit(pixelCeil(clamp(X.y,C.value===1/0?0:C.value,R.value)))}),{available:X,contentBox:M}}return watch(()=>[x.value,S.value,r.offset,r.minWidth,r.minHeight,r.maxWidth,r.maxHeight],()=>D()),nextTick$1(()=>{const N=D();if(!N)return;const{available:M,contentBox:O}=N;O.height>M.y&&requestAnimationFrame(()=>{D(),requestAnimationFrame(()=>{D()})})}),{updateLocation:D}}function pixelRound(n){return Math.round(n*devicePixelRatio)/devicePixelRatio}function pixelCeil(n){return Math.ceil(n*devicePixelRatio)/devicePixelRatio}let clean=!0;const frames=[];function requestNewFrame(n){!clean||frames.length?(frames.push(n),run()):(clean=!1,n(),run())}let raf=-1;function run(){cancelAnimationFrame(raf),raf=requestAnimationFrame(()=>{const n=frames.shift();n&&n(),frames.length?run():clean=!0})}const scrollStrategies={none:null,close:closeScrollStrategy,block:blockScrollStrategy,reposition:repositionScrollStrategy},makeScrollStrategyProps=propsFactory({scrollStrategy:{type:[String,Function],default:"block",validator:n=>typeof n=="function"||n in scrollStrategies}},"VOverlay-scroll-strategies");function useScrollStrategies(n,r){if(!IN_BROWSER)return;let g;watchEffect(async()=>{g?.stop(),r.isActive.value&&n.scrollStrategy&&(g=effectScope(),await new Promise(_=>setTimeout(_)),g.active&&g.run(()=>{typeof n.scrollStrategy=="function"?n.scrollStrategy(r,n,g):scrollStrategies[n.scrollStrategy]?.(r,n,g)}))}),onScopeDispose(()=>{g?.stop()})}function closeScrollStrategy(n){function r(g){n.isActive.value=!1}bindScroll(n.targetEl.value??n.contentEl.value,r)}function blockScrollStrategy(n,r){const g=n.root.value?.offsetParent,_=[...new Set([...getScrollParents(n.targetEl.value,r.contained?g:void 0),...getScrollParents(n.contentEl.value,r.contained?g:void 0)])].filter(E=>!E.classList.contains("v-overlay-scroll-blocked")),x=window.innerWidth-document.documentElement.offsetWidth,S=(E=>hasScrollbar(E)&&E)(g||document.documentElement);S&&n.root.value.classList.add("v-overlay--scroll-blocked"),_.forEach((E,C)=>{E.style.setProperty("--v-body-scroll-x",convertToUnit(-E.scrollLeft)),E.style.setProperty("--v-body-scroll-y",convertToUnit(-E.scrollTop)),E!==document.documentElement&&E.style.setProperty("--v-scrollbar-offset",convertToUnit(x)),E.classList.add("v-overlay-scroll-blocked")}),onScopeDispose(()=>{_.forEach((E,C)=>{const T=parseFloat(E.style.getPropertyValue("--v-body-scroll-x")),R=parseFloat(E.style.getPropertyValue("--v-body-scroll-y")),A=E.style.scrollBehavior;E.style.scrollBehavior="auto",E.style.removeProperty("--v-body-scroll-x"),E.style.removeProperty("--v-body-scroll-y"),E.style.removeProperty("--v-scrollbar-offset"),E.classList.remove("v-overlay-scroll-blocked"),E.scrollLeft=-T,E.scrollTop=-R,E.style.scrollBehavior=A}),S&&n.root.value.classList.remove("v-overlay--scroll-blocked")})}function repositionScrollStrategy(n,r,g){let _=!1,x=-1,S=-1;function E(C){requestNewFrame(()=>{const T=performance.now();n.updateLocation.value?.(C),_=(performance.now()-T)/(1e3/60)>2})}S=(typeof requestIdleCallback>"u"?C=>C():requestIdleCallback)(()=>{g.run(()=>{bindScroll(n.targetEl.value??n.contentEl.value,C=>{_?(cancelAnimationFrame(x),x=requestAnimationFrame(()=>{x=requestAnimationFrame(()=>{E(C)})})):E(C)})})}),onScopeDispose(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(S),cancelAnimationFrame(x)})}function bindScroll(n,r){const g=[document,...getScrollParents(n)];g.forEach(_=>{_.addEventListener("scroll",r,{passive:!0})}),onScopeDispose(()=>{g.forEach(_=>{_.removeEventListener("scroll",r)})})}const VMenuSymbol=Symbol.for("vuetify:v-menu"),makeDelayProps=propsFactory({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function useDelay(n,r){let g=()=>{};function _(E){g?.();const C=Number(E?n.openDelay:n.closeDelay);return new Promise(T=>{g=defer(C,()=>{r?.(E),T(E)})})}function x(){return _(!0)}function S(){return _(!1)}return{clearDelay:g,runOpenDelay:x,runCloseDelay:S}}const makeActivatorProps=propsFactory({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,...makeDelayProps()},"VOverlay-activator");function useActivator(n,r){let{isActive:g,isTop:_,contentEl:x}=r;const S=getCurrentInstance("useActivator"),E=ref$2();let C=!1,T=!1,R=!0;const A=computed(()=>n.openOnFocus||n.openOnFocus==null&&n.openOnHover),I=computed(()=>n.openOnClick||n.openOnClick==null&&!n.openOnHover&&!A.value),{runOpenDelay:B,runCloseDelay:D}=useDelay(n,ie=>{ie===(n.openOnHover&&C||A.value&&T)&&!(n.openOnHover&&g.value&&!_.value)&&(g.value!==ie&&(R=!0),g.value=ie)}),N=ref$2(),M={onClick:ie=>{ie.stopPropagation(),E.value=ie.currentTarget||ie.target,g.value||(N.value=[ie.clientX,ie.clientY]),g.value=!g.value},onMouseenter:ie=>{ie.sourceCapabilities?.firesTouchEvents||(C=!0,E.value=ie.currentTarget||ie.target,B())},onMouseleave:ie=>{C=!1,D()},onFocus:ie=>{matchesSelector(ie.target,":focus-visible")!==!1&&(T=!0,ie.stopPropagation(),E.value=ie.currentTarget||ie.target,B())},onBlur:ie=>{T=!1,ie.stopPropagation(),D()}},O=computed(()=>{const ie={};return I.value&&(ie.onClick=M.onClick),n.openOnHover&&(ie.onMouseenter=M.onMouseenter,ie.onMouseleave=M.onMouseleave),A.value&&(ie.onFocus=M.onFocus,ie.onBlur=M.onBlur),ie}),L=computed(()=>{const ie={};if(n.openOnHover&&(ie.onMouseenter=()=>{C=!0,B()},ie.onMouseleave=()=>{C=!1,D()}),A.value&&(ie.onFocusin=()=>{T=!0,B()},ie.onFocusout=()=>{T=!1,D()}),n.closeOnContentClick){const fe=inject$1(VMenuSymbol,null);ie.onClick=()=>{g.value=!1,fe?.closeParents()}}return ie}),F=computed(()=>{const ie={};return n.openOnHover&&(ie.onMouseenter=()=>{R&&(C=!0,R=!1,B())},ie.onMouseleave=()=>{C=!1,D()}),ie});watch(_,ie=>{ie&&(n.openOnHover&&!C&&(!A.value||!T)||A.value&&!T&&(!n.openOnHover||!C))&&!x.value?.contains(document.activeElement)&&(g.value=!1)}),watch(g,ie=>{ie||setTimeout(()=>{N.value=void 0})},{flush:"post"});const U=templateRef();watchEffect(()=>{U.value&&nextTick$1(()=>{E.value=U.el})});const j=templateRef(),z=computed(()=>n.target==="cursor"&&N.value?N.value:j.value?j.el:getTarget(n.target,S)||E.value),W=computed(()=>Array.isArray(z.value)?void 0:z.value);let X;return watch(()=>!!n.activator,ie=>{ie&&IN_BROWSER?(X=effectScope(),X.run(()=>{_useActivator(n,S,{activatorEl:E,activatorEvents:O})})):X&&X.stop()},{flush:"post",immediate:!0}),onScopeDispose(()=>{X?.stop()}),{activatorEl:E,activatorRef:U,target:z,targetEl:W,targetRef:j,activatorEvents:O,contentEvents:L,scrimEvents:F}}function _useActivator(n,r,g){let{activatorEl:_,activatorEvents:x}=g;watch(()=>n.activator,(T,R)=>{if(R&&T!==R){const A=C(R);A&&E(A)}T&&nextTick$1(()=>S())},{immediate:!0}),watch(()=>n.activatorProps,()=>{S()}),onScopeDispose(()=>{E()});function S(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C(),R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.activatorProps;T&&bindProps(T,mergeProps(x.value,R))}function E(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C(),R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:n.activatorProps;T&&unbindProps(T,mergeProps(x.value,R))}function C(){let T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n.activator;const R=getTarget(T,r);return _.value=R?.nodeType===Node.ELEMENT_NODE?R:void 0,_.value}}function getTarget(n,r){if(!n)return;let g;if(n==="parent"){let _=r?.proxy?.$el?.parentNode;for(;_?.hasAttribute("data-no-activator");)_=_.parentNode;g=_}else typeof n=="string"?g=document.querySelector(n):"$el"in n?g=n.$el:g=n;return g}function useHydration(){if(!IN_BROWSER)return shallowRef(!1);const{ssr:n}=useDisplay();if(n){const r=shallowRef(!1);return onMounted(()=>{r.value=!0}),r}else return shallowRef(!0)}const makeLazyProps=propsFactory({eager:Boolean},"lazy");function useLazy(n,r){const g=shallowRef(!1),_=computed(()=>g.value||n.eager||r.value);watch(r,()=>g.value=!0);function x(){n.eager||(g.value=!1)}return{isBooted:g,hasContent:_,onAfterLeave:x}}function useScopeId(){const r=getCurrentInstance("useScopeId").vnode.scopeId;return{scopeId:r?{[r]:""}:void 0}}const StackSymbol=Symbol.for("vuetify:stack"),globalStack=reactive([]);function useStack(n,r,g){const _=getCurrentInstance("useStack"),x=!g,S=inject$1(StackSymbol,void 0),E=reactive({activeChildren:new Set});provide(StackSymbol,E);const C=shallowRef(+r.value);useToggleScope(n,()=>{const A=globalStack.at(-1)?.[1];C.value=A?A+10:+r.value,x&&globalStack.push([_.uid,C.value]),S?.activeChildren.add(_.uid),onScopeDispose(()=>{if(x){const I=toRaw(globalStack).findIndex(B=>B[0]===_.uid);globalStack.splice(I,1)}S?.activeChildren.delete(_.uid)})});const T=shallowRef(!0);x&&watchEffect(()=>{const A=globalStack.at(-1)?.[0]===_.uid;setTimeout(()=>T.value=A)});const R=computed(()=>!E.activeChildren.size);return{globalTop:readonly$2(T),localTop:R,stackStyles:computed(()=>({zIndex:C.value}))}}function useTeleport(n){return{teleportTarget:computed(()=>{const g=n();if(g===!0||!IN_BROWSER)return;const _=g===!1?document.body:typeof g=="string"?document.querySelector(g):g;if(_==null)return;let x=[..._.children].find(S=>S.matches(".v-overlay-container"));return x||(x=document.createElement("div"),x.className="v-overlay-container",_.appendChild(x)),x})}}function defaultConditional(){return!0}function checkEvent(n,r,g){if(!n||checkIsActive(n,g)===!1)return!1;const _=attachedRoot(r);if(typeof ShadowRoot<"u"&&_ instanceof ShadowRoot&&_.host===n.target)return!1;const x=(typeof g.value=="object"&&g.value.include||(()=>[]))();return x.push(r),!x.some(S=>S?.contains(n.target))}function checkIsActive(n,r){return(typeof r.value=="object"&&r.value.closeConditional||defaultConditional)(n)}function directive(n,r,g){const _=typeof g.value=="function"?g.value:g.value.handler;n.shadowTarget=n.target,r._clickOutside.lastMousedownWasOutside&&checkEvent(n,r,g)&&setTimeout(()=>{checkIsActive(n,g)&&_&&_(n)},0)}function handleShadow(n,r){const g=attachedRoot(n);r(document),typeof ShadowRoot<"u"&&g instanceof ShadowRoot&&r(g)}const ClickOutside={mounted(n,r){const g=x=>directive(x,n,r),_=x=>{n._clickOutside.lastMousedownWasOutside=checkEvent(x,n,r)};handleShadow(n,x=>{x.addEventListener("click",g,!0),x.addEventListener("mousedown",_,!0)}),n._clickOutside||(n._clickOutside={lastMousedownWasOutside:!1}),n._clickOutside[r.instance.$.uid]={onClick:g,onMousedown:_}},beforeUnmount(n,r){n._clickOutside&&(handleShadow(n,g=>{if(!g||!n._clickOutside?.[r.instance.$.uid])return;const{onClick:_,onMousedown:x}=n._clickOutside[r.instance.$.uid];g.removeEventListener("click",_,!0),g.removeEventListener("mousedown",x,!0)}),delete n._clickOutside[r.instance.$.uid])}};function Scrim(n){const{modelValue:r,color:g,..._}=n;return createVNode(Transition,{name:"fade-transition",appear:!0},{default:()=>[n.modelValue&&createVNode("div",mergeProps({class:["v-overlay__scrim",n.color.backgroundColorClasses.value],style:n.color.backgroundColorStyles.value},_),null)]})}const makeVOverlayProps=propsFactory({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...makeActivatorProps(),...makeComponentProps(),...makeDimensionProps(),...makeLazyProps(),...makeLocationStrategyProps(),...makeScrollStrategyProps(),...makeThemeProps(),...makeTransitionProps$1()},"VOverlay"),VOverlay=genericComponent()({name:"VOverlay",directives:{ClickOutside},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...makeVOverlayProps()},emits:{"click:outside":n=>!0,"update:modelValue":n=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(n,r){let{slots:g,attrs:_,emit:x}=r;const S=getCurrentInstance("VOverlay"),E=ref$2(),C=ref$2(),T=ref$2(),R=useProxiedModel(n,"modelValue"),A=computed({get:()=>R.value,set:ke=>{ke&&n.disabled||(R.value=ke)}}),{themeClasses:I}=provideTheme(n),{rtlClasses:B,isRtl:D}=useRtl(),{hasContent:N,onAfterLeave:M}=useLazy(n,A),O=useBackgroundColor(computed(()=>typeof n.scrim=="string"?n.scrim:null)),{globalTop:L,localTop:F,stackStyles:U}=useStack(A,toRef(n,"zIndex"),n._disableGlobalStack),{activatorEl:j,activatorRef:z,target:W,targetEl:X,targetRef:ie,activatorEvents:fe,contentEvents:xe,scrimEvents:we}=useActivator(n,{isActive:A,isTop:F,contentEl:T}),{teleportTarget:G}=useTeleport(()=>{const ke=n.attach||n.contained;if(ke)return ke;const Ce=j?.value?.getRootNode()||S.proxy?.$el?.getRootNode();return Ce instanceof ShadowRoot?Ce:!1}),{dimensionStyles:J}=useDimension(n),q=useHydration(),{scopeId:H}=useScopeId();watch(()=>n.disabled,ke=>{ke&&(A.value=!1)});const{contentStyles:ve,updateLocation:Z}=useLocationStrategies(n,{isRtl:D,contentEl:T,target:W,isActive:A});useScrollStrategies(n,{root:E,contentEl:T,targetEl:X,isActive:A,updateLocation:Z});function ce(ke){x("click:outside",ke),n.persistent?be():A.value=!1}function ue(ke){return A.value&&L.value&&(!n.scrim||ke.target===C.value||ke instanceof MouseEvent&&ke.shadowTarget===C.value)}IN_BROWSER&&watch(A,ke=>{ke?window.addEventListener("keydown",se):window.removeEventListener("keydown",se)},{immediate:!0}),onBeforeUnmount(()=>{IN_BROWSER&&window.removeEventListener("keydown",se)});function se(ke){ke.key==="Escape"&&L.value&&(n.persistent?be():(A.value=!1,T.value?.contains(document.activeElement)&&j.value?.focus()))}const te=useRouter();useToggleScope(()=>n.closeOnBack,()=>{useBackButton(te,ke=>{L.value&&A.value?(ke(!1),n.persistent?be():A.value=!1):ke()})});const Y=ref$2();watch(()=>A.value&&(n.absolute||n.contained)&&G.value==null,ke=>{if(ke){const Ce=getScrollParent(E.value);Ce&&Ce!==document.scrollingElement&&(Y.value=Ce.scrollTop)}});function be(){n.noClickAnimation||T.value&&animate(T.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:standardEasing})}function ye(){x("afterEnter")}function Ie(){M(),x("afterLeave")}return useRender(()=>createVNode(Fragment,null,[g.activator?.({isActive:A.value,targetRef:ie,props:mergeProps({ref:z},fe.value,n.activatorProps)}),q.value&&N.value&&createVNode(Teleport,{disabled:!G.value,to:G.value},{default:()=>[createVNode("div",mergeProps({class:["v-overlay",{"v-overlay--absolute":n.absolute||n.contained,"v-overlay--active":A.value,"v-overlay--contained":n.contained},I.value,B.value,n.class],style:[U.value,{"--v-overlay-opacity":n.opacity,top:convertToUnit(Y.value)},n.style],ref:E},H,_),[createVNode(Scrim,mergeProps({color:O,modelValue:A.value&&!!n.scrim,ref:C},we.value),null),createVNode(MaybeTransition,{appear:!0,persisted:!0,transition:n.transition,target:W.value,onAfterEnter:ye,onAfterLeave:Ie},{default:()=>[withDirectives(createVNode("div",mergeProps({ref:T,class:["v-overlay__content",n.contentClass],style:[J.value,ve.value]},xe.value,n.contentProps),[g.default?.({isActive:A})]),[[vShow,A.value],[resolveDirective("click-outside"),{handler:ce,closeConditional:ue,include:()=>[j.value]}]])]})])]})])),{activatorEl:j,scrimEl:C,target:W,animateClick:be,contentEl:T,globalTop:L,localTop:F,updateLocation:Z}}}),Refs=Symbol("Forwarded refs");function getDescriptor(n,r){let g=n;for(;g;){const _=Reflect.getOwnPropertyDescriptor(g,r);if(_)return _;g=Object.getPrototypeOf(g)}}function forwardRefs(n){for(var r=arguments.length,g=new Array(r>1?r-1:0),_=1;_<r;_++)g[_-1]=arguments[_];return n[Refs]=g,new Proxy(n,{get(x,S){if(Reflect.has(x,S))return Reflect.get(x,S);if(!(typeof S=="symbol"||S.startsWith("$")||S.startsWith("__"))){for(const E of g)if(E.value&&Reflect.has(E.value,S)){const C=Reflect.get(E.value,S);return typeof C=="function"?C.bind(E.value):C}}},has(x,S){if(Reflect.has(x,S))return!0;if(typeof S=="symbol"||S.startsWith("$")||S.startsWith("__"))return!1;for(const E of g)if(E.value&&Reflect.has(E.value,S))return!0;return!1},set(x,S,E){if(Reflect.has(x,S))return Reflect.set(x,S,E);if(typeof S=="symbol"||S.startsWith("$")||S.startsWith("__"))return!1;for(const C of g)if(C.value&&Reflect.has(C.value,S))return Reflect.set(C.value,S,E);return!1},getOwnPropertyDescriptor(x,S){const E=Reflect.getOwnPropertyDescriptor(x,S);if(E)return E;if(!(typeof S=="symbol"||S.startsWith("$")||S.startsWith("__"))){for(const C of g){if(!C.value)continue;const T=getDescriptor(C.value,S)??("_"in C.value?getDescriptor(C.value._?.setupState,S):void 0);if(T)return T}for(const C of g){const T=C.value&&C.value[Refs];if(!T)continue;const R=T.slice();for(;R.length;){const A=R.shift(),I=getDescriptor(A.value,S);if(I)return I;const B=A.value&&A.value[Refs];B&&R.push(...B)}}}}})}const makeVDialogProps=propsFactory({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...makeVOverlayProps({origin:"center center",scrollStrategy:"block",transition:{component:VDialogTransition},zIndex:2400})},"VDialog"),VDialog=genericComponent()({name:"VDialog",props:makeVDialogProps(),emits:{"update:modelValue":n=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(n,r){let{emit:g,slots:_}=r;const x=useProxiedModel(n,"modelValue"),{scopeId:S}=useScopeId(),E=ref$2();function C(A){const I=A.relatedTarget,B=A.target;if(I!==B&&E.value?.contentEl&&E.value?.globalTop&&![document,E.value.contentEl].includes(B)&&!E.value.contentEl.contains(B)){const D=focusableChildren(E.value.contentEl);if(!D.length)return;const N=D[0],M=D[D.length-1];I===N?M.focus():N.focus()}}onBeforeUnmount(()=>{document.removeEventListener("focusin",C)}),IN_BROWSER&&watch(()=>x.value&&n.retainFocus,A=>{A?document.addEventListener("focusin",C):document.removeEventListener("focusin",C)},{immediate:!0});function T(){g("afterEnter"),E.value?.contentEl&&!E.value.contentEl.contains(document.activeElement)&&E.value.contentEl.focus({preventScroll:!0})}function R(){g("afterLeave")}return watch(x,async A=>{A||(await nextTick$1(),E.value.activatorEl?.focus({preventScroll:!0}))}),useRender(()=>{const A=VOverlay.filterProps(n),I=mergeProps({"aria-haspopup":"dialog"},n.activatorProps),B=mergeProps({tabindex:-1},n.contentProps);return createVNode(VOverlay,mergeProps({ref:E,class:["v-dialog",{"v-dialog--fullscreen":n.fullscreen,"v-dialog--scrollable":n.scrollable},n.class],style:n.style},A,{modelValue:x.value,"onUpdate:modelValue":D=>x.value=D,"aria-modal":"true",activatorProps:I,contentProps:B,height:n.fullscreen?void 0:n.height,width:n.fullscreen?void 0:n.width,maxHeight:n.fullscreen?void 0:n.maxHeight,maxWidth:n.fullscreen?void 0:n.maxWidth,role:"dialog",onAfterEnter:T,onAfterLeave:R},S),{activator:_.activator,default:function(){for(var D=arguments.length,N=new Array(D),M=0;M<D;M++)N[M]=arguments[M];return createVNode(VDefaultsProvider,{root:"VDialog"},{default:()=>[_.default?.(...N)]})}})}),forwardRefs({},E)}}),_hoisted_1$y={class:"text-h4"},_hoisted_2$l={class:"text-h6"},_sfc_main$1x=defineComponent$1({__name:"DialogueErreurInit",setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r(),_=utiliserConstellation(),x=suivre(_.suivreErreurs),S=computed(()=>E.value||C.value),E=computed(()=>x.value?.code===ERREUR_INIT_IPA_DÉJÀ_LANCÉ),C=computed(()=>x.value?.code===ERREUR_INIT_IPA),T=computed(()=>E.value?"erreurs.init.titre":C.value?"erreurs.déjàLancé.titre":""),R=computed(()=>E.value?"erreurs.init.explication":C.value?"erreurs.déjàLancé.explication":"");return(A,I)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":I[1]||(I[1]=B=>S.value=B),persistent:""},{default:withCtx(()=>[createVNode(VCard,{class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardText,{class:"text-center"},{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$y,toDisplayString(unref(g)(T.value)),1),createBaseVNode("p",_hoisted_2$l,toDisplayString(unref(g)(R.value)),1),createVNode(VBtn,{onClick:I[0]||(I[0]=()=>unref(redémarrer)())},{default:withCtx(()=>I[2]||(I[2]=[createTextVNode(toDisplayString("erreurs.relancer"))])),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),changerThèmeVuetify=n=>{const r=useTheme();r.global.name.value=n},utiliserÉtatThème=defineStore("thème",{state:()=>({couleur:"light",thèmeImages:"வவவ",langue:[]}),persist:{afterHydrate:n=>{changerThèmeVuetify(n.store.$state.couleur)}}}),imagesThème={constr:{unDraw:__vitePreload(()=>import("./undraw_under_construction_46pa-DA7afgZS.js"),[],import.meta.url),வவவ:__vitePreload(()=>import("./குயவர்-BxRM1WB_.js"),[],import.meta.url)},docs:{unDraw:__vitePreload(()=>import("./undraw_book_lover_mkck-ozbzo9RJ.js"),[],import.meta.url),வவவ:__vitePreload(()=>import("./சோதிடம்-uGlUv6xp.js"),[],import.meta.url)},recherche:{unDraw:__vitePreload(()=>import("./undraw_not_found_60pq-C5uly-IQ.js"),[],import.meta.url),வவவ:__vitePreload(()=>import("./மீனவர்கள்-B71UgwTJ.js"),[],import.meta.url)},message:{வவவ:__vitePreload(()=>import("./செய்தி_வள்ளுவன்-liS5eiLc.js"),[],import.meta.url)},profilFemme:{unDraw:__vitePreload(()=>import("./undraw_female_avatar_w3jk-5cZ1lzsL.js"),[],import.meta.url),வவவ:{light:__vitePreload(()=>import("./தஞ்சாவூர்_பொம்மை_பெண்-B-xcDvgp.js"),[],import.meta.url),dark:__vitePreload(()=>import("./தஞ்சாவூர்_பொம்மை_பெண்_nuit-DTaCpdFf.js"),[],import.meta.url)}},profilHomme:{unDraw:__vitePreload(()=>import("./undraw_male_avatar_323b-C30wMQ2t.js"),[],import.meta.url),வவவ:{light:__vitePreload(()=>import("./தஞ்சாவூர்_பொம்மை_ஆண்-QixH8A0b.js"),[],import.meta.url),dark:__vitePreload(()=>import("./தஞ்சாவூர்_பொம்மை_ஆண்_nuit-r45-ZOAF.js"),[],import.meta.url)}},automatisation:{unDraw:__vitePreload(()=>import("./undraw_real-time_sync_o57k-JWSPT8ik.js"),[],import.meta.url)},problème:{unDraw:__vitePreload(()=>import("./undraw_towing_6yy4-CHn6TFmD.js"),[],import.meta.url),வவவ:__vitePreload(()=>import("./ஜல்லிக்கட்டு-AaFp6RuC.js"),[],import.meta.url)},favoris:{unDraw:__vitePreload(()=>import("./undraw_Appreciation_re_p6rl-B-b6WoYb.js"),[],import.meta.url),வவவ:__vitePreload(()=>import("./அஞ்சறைப்பெட்டி-ZhuFZlCA.js"),[],import.meta.url)},conditions:{unDraw:__vitePreload(()=>import("./undraw_Terms_re_6ak4-BsPSSSyg.js"),[],import.meta.url),வவவ:__vitePreload(()=>import("./கபடி_ஆட்டம்-S7jhwUYO.js"),[],import.meta.url)},logoBD:{unDraw:__vitePreload(()=>import("./undraw_Projections_re_1mrh-ByUaiJRJ.js"),[],import.meta.url)},dispositif:{unDraw:__vitePreload(()=>import("./undraw_Mobile_re_q4nk-BlWB_yiv.js"),[],import.meta.url)},vide:{unDraw:__vitePreload(()=>import("./undraw_adventure_map_hnin-O9I8uwAL.js"),[],import.meta.url),வவவ:__vitePreload(()=>import("./கிணறு-CaDjS8R_.js"),[],import.meta.url)}},utiliserImagesDéco=function(n){return{obtImageDéco:g=>{const _=utiliserÉtatThème(),{name:x}=useTheme(),{thèmeImages:S}=storeToRefs(_),E=ref$2(),C=computed(()=>S.value);return watchEffect(()=>{if(g==="profil"){const T=["profilFemme","profilHomme"];g=T[Math.floor(Math.random()*T.length)]}if(imagesThème[g]){const T=imagesThème[g][C.value]||Object.values(imagesThème[g])[0];if(T.then)T.then(R=>E.value=R?.default);else{const R=T;(R[x.value]||Object.values(R)[0]).then(A=>E.value=A?.default)}}}),E}}},_sfc_main$1w=defineComponent$1({__name:"ImageProfil",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),_=suivre(g.profil.suivreImage,r.id?{idCompte:r.id}:void 0),x=computed(()=>{if(_.value)return URL.createObjectURL(new Blob([_.value],{type:"image"}))}),{obtImageDéco:S}=utiliserImagesDéco(),E=S("profil");return(C,T)=>(openBlock(),createBlock(VAvatar,mergeProps({image:x.value||unref(E)},r),null,16,["image"]))}});function calculateUpdatedTarget(n){let{selectedElement:r,containerElement:g,isRtl:_,isHorizontal:x}=n;const S=getOffsetSize(x,g),E=getScrollPosition(x,_,g),C=getOffsetSize(x,r),T=getOffsetPosition(x,r),R=C*.4;return E>T?T-R:E+S<T+C?T-S+C+R:E}function calculateCenteredTarget(n){let{selectedElement:r,containerElement:g,isHorizontal:_}=n;const x=getOffsetSize(_,g),S=getOffsetPosition(_,r),E=getOffsetSize(_,r);return S-x/2+E/2}function getScrollSize(n,r){return r?.[n?"scrollWidth":"scrollHeight"]||0}function getClientSize(n,r){return r?.[n?"clientWidth":"clientHeight"]||0}function getScrollPosition(n,r,g){if(!g)return 0;const{scrollLeft:_,offsetWidth:x,scrollWidth:S}=g;return n?r?S-x+_:_:g.scrollTop}function getOffsetSize(n,r){return r?.[n?"offsetWidth":"offsetHeight"]||0}function getOffsetPosition(n,r){return r?.[n?"offsetLeft":"offsetTop"]||0}const VSlideGroupSymbol=Symbol.for("vuetify:v-slide-group"),makeVSlideGroupProps=propsFactory({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:VSlideGroupSymbol},nextIcon:{type:IconValue,default:"$next"},prevIcon:{type:IconValue,default:"$prev"},showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||["always","desktop","mobile"].includes(n)},...makeComponentProps(),...makeDisplayProps({mobile:null}),...makeTagProps(),...makeGroupProps({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),VSlideGroup=genericComponent()({name:"VSlideGroup",props:makeVSlideGroupProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const{isRtl:_}=useRtl(),{displayClasses:x,mobile:S}=useDisplay(n),E=useGroup(n,n.symbol),C=shallowRef(!1),T=shallowRef(0),R=shallowRef(0),A=shallowRef(0),I=computed(()=>n.direction==="horizontal"),{resizeRef:B,contentRect:D}=useResizeObserver(),{resizeRef:N,contentRect:M}=useResizeObserver(),O=useGoTo(),L=computed(()=>({container:B.el,duration:200,easing:"easeOutQuart"})),F=computed(()=>E.selected.value.length?E.items.value.findIndex(te=>te.id===E.selected.value[0]):-1),U=computed(()=>E.selected.value.length?E.items.value.findIndex(te=>te.id===E.selected.value[E.selected.value.length-1]):-1);if(IN_BROWSER){let te=-1;watch(()=>[E.selected.value,D.value,M.value,I.value],()=>{cancelAnimationFrame(te),te=requestAnimationFrame(()=>{if(D.value&&M.value){const Y=I.value?"width":"height";R.value=D.value[Y],A.value=M.value[Y],C.value=R.value+1<A.value}if(F.value>=0&&N.el){const Y=N.el.children[U.value];z(Y,n.centerActive)}})})}const j=shallowRef(!1);function z(te,Y){let be=0;Y?be=calculateCenteredTarget({containerElement:B.el,isHorizontal:I.value,selectedElement:te}):be=calculateUpdatedTarget({containerElement:B.el,isHorizontal:I.value,isRtl:_.value,selectedElement:te}),W(be)}function W(te){if(!IN_BROWSER||!B.el)return;const Y=getOffsetSize(I.value,B.el),be=getScrollPosition(I.value,_.value,B.el);if(!(getScrollSize(I.value,B.el)<=Y||Math.abs(te-be)<16)){if(I.value&&_.value&&B.el){const{scrollWidth:Ie,offsetWidth:ke}=B.el;te=Ie-ke-te}I.value?O.horizontal(te,L.value):O(te,L.value)}}function X(te){const{scrollTop:Y,scrollLeft:be}=te.target;T.value=I.value?be:Y}function ie(te){if(j.value=!0,!(!C.value||!N.el)){for(const Y of te.composedPath())for(const be of N.el.children)if(be===Y){z(be);return}}}function fe(te){j.value=!1}let xe=!1;function we(te){!xe&&!j.value&&!(te.relatedTarget&&N.el?.contains(te.relatedTarget))&&H(),xe=!1}function G(){xe=!0}function J(te){if(!N.el)return;function Y(be){te.preventDefault(),H(be)}I.value?te.key==="ArrowRight"?Y(_.value?"prev":"next"):te.key==="ArrowLeft"&&Y(_.value?"next":"prev"):te.key==="ArrowDown"?Y("next"):te.key==="ArrowUp"&&Y("prev"),te.key==="Home"?Y("first"):te.key==="End"&&Y("last")}function q(te,Y){if(!te)return;let be=te;do be=be?.[Y==="next"?"nextElementSibling":"previousElementSibling"];while(be?.hasAttribute("disabled"));return be}function H(te){if(!N.el)return;let Y;if(!te)Y=focusableChildren(N.el)[0];else if(te==="next"){if(Y=q(N.el.querySelector(":focus"),te),!Y)return H("first")}else if(te==="prev"){if(Y=q(N.el.querySelector(":focus"),te),!Y)return H("last")}else te==="first"?(Y=N.el.firstElementChild,Y?.hasAttribute("disabled")&&(Y=q(Y,"next"))):te==="last"&&(Y=N.el.lastElementChild,Y?.hasAttribute("disabled")&&(Y=q(Y,"prev")));Y&&Y.focus({preventScroll:!0})}function ve(te){const Y=I.value&&_.value?-1:1,be=(te==="prev"?-Y:Y)*R.value;let ye=T.value+be;if(I.value&&_.value&&B.el){const{scrollWidth:Ie,offsetWidth:ke}=B.el;ye+=Ie-ke}W(ye)}const Z=computed(()=>({next:E.next,prev:E.prev,select:E.select,isSelected:E.isSelected})),ce=computed(()=>{switch(n.showArrows){case"always":return!0;case"desktop":return!S.value;case!0:return C.value||Math.abs(T.value)>0;case"mobile":return S.value||C.value||Math.abs(T.value)>0;default:return!S.value&&(C.value||Math.abs(T.value)>0)}}),ue=computed(()=>Math.abs(T.value)>1),se=computed(()=>{if(!B.value)return!1;const te=getScrollSize(I.value,B.el),Y=getClientSize(I.value,B.el);return te-Y-Math.abs(T.value)>1});return useRender(()=>createVNode(n.tag,{class:["v-slide-group",{"v-slide-group--vertical":!I.value,"v-slide-group--has-affixes":ce.value,"v-slide-group--is-overflowing":C.value},x.value,n.class],style:n.style,tabindex:j.value||E.selected.value.length?-1:0,onFocus:we},{default:()=>[ce.value&&createVNode("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!ue.value}],onMousedown:G,onClick:()=>ue.value&&ve("prev")},[g.prev?.(Z.value)??createVNode(VFadeTransition,null,{default:()=>[createVNode(VIcon,{icon:_.value?n.nextIcon:n.prevIcon},null)]})]),createVNode("div",{key:"container",ref:B,class:"v-slide-group__container",onScroll:X},[createVNode("div",{ref:N,class:"v-slide-group__content",onFocusin:ie,onFocusout:fe,onKeydown:J},[g.default?.(Z.value)])]),ce.value&&createVNode("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!se.value}],onMousedown:G,onClick:()=>se.value&&ve("next")},[g.next?.(Z.value)??createVNode(VFadeTransition,null,{default:()=>[createVNode(VIcon,{icon:_.value?n.prevIcon:n.nextIcon},null)]})])]})),{selected:E.selected,scrollTo:ve,scrollOffset:T,focus:H,hasPrev:ue,hasNext:se}}}),VChipGroupSymbol=Symbol.for("vuetify:v-chip-group"),makeVChipGroupProps=propsFactory({column:Boolean,filter:Boolean,valueComparator:{type:Function,default:deepEqual},...makeVSlideGroupProps(),...makeComponentProps(),...makeGroupProps({selectedClass:"v-chip--selected"}),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"tonal"})},"VChipGroup"),VChipGroup=genericComponent()({name:"VChipGroup",props:makeVChipGroupProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const{themeClasses:_}=provideTheme(n),{isSelected:x,select:S,next:E,prev:C,selected:T}=useGroup(n,VChipGroupSymbol);return provideDefaults({VChip:{color:toRef(n,"color"),disabled:toRef(n,"disabled"),filter:toRef(n,"filter"),variant:toRef(n,"variant")}}),useRender(()=>{const R=VSlideGroup.filterProps(n);return createVNode(VSlideGroup,mergeProps(R,{class:["v-chip-group",{"v-chip-group--column":n.column},_.value,n.class],style:n.style}),{default:()=>[g.default?.({isSelected:x,select:S,next:E,prev:C,selected:T.value})]})}),{}}}),makeVChipProps=propsFactory({activeClass:String,appendAvatar:String,appendIcon:IconValue,closable:Boolean,closeIcon:{type:IconValue,default:"$delete"},closeLabel:{type:String,default:"$vuetify.close"},draggable:Boolean,filter:Boolean,filterIcon:{type:IconValue,default:"$complete"},label:Boolean,link:{type:Boolean,default:void 0},pill:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},text:String,modelValue:{type:Boolean,default:!0},onClick:EventProp(),onClickOnce:EventProp(),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeElevationProps(),...makeGroupItemProps(),...makeRoundedProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"span"}),...makeThemeProps(),...makeVariantProps({variant:"tonal"})},"VChip"),VChip=genericComponent()({name:"VChip",directives:{Ripple},props:makeVChipProps(),emits:{"click:close":n=>!0,"update:modelValue":n=>!0,"group:selected":n=>!0,click:n=>!0},setup(n,r){let{attrs:g,emit:_,slots:x}=r;const{t:S}=useLocale(),{borderClasses:E}=useBorder(n),{colorClasses:C,colorStyles:T,variantClasses:R}=useVariant(n),{densityClasses:A}=useDensity(n),{elevationClasses:I}=useElevation(n),{roundedClasses:B}=useRounded(n),{sizeClasses:D}=useSize(n),{themeClasses:N}=provideTheme(n),M=useProxiedModel(n,"modelValue"),O=useGroupItem(n,VChipGroupSymbol,!1),L=useLink(n,g),F=computed(()=>n.link!==!1&&L.isLink.value),U=computed(()=>!n.disabled&&n.link!==!1&&(!!O||n.link||L.isClickable.value)),j=computed(()=>({"aria-label":S(n.closeLabel),onClick(X){X.preventDefault(),X.stopPropagation(),M.value=!1,_("click:close",X)}}));function z(X){_("click",X),U.value&&(L.navigate?.(X),O?.toggle())}function W(X){(X.key==="Enter"||X.key===" ")&&(X.preventDefault(),z(X))}return()=>{const X=L.isLink.value?"a":n.tag,ie=!!(n.appendIcon||n.appendAvatar),fe=!!(ie||x.append),xe=!!(x.close||n.closable),we=!!(x.filter||n.filter)&&O,G=!!(n.prependIcon||n.prependAvatar),J=!!(G||x.prepend),q=!O||O.isSelected.value;return M.value&&withDirectives(createVNode(X,mergeProps({class:["v-chip",{"v-chip--disabled":n.disabled,"v-chip--label":n.label,"v-chip--link":U.value,"v-chip--filter":we,"v-chip--pill":n.pill,[`${n.activeClass}`]:n.activeClass&&L.isActive?.value},N.value,E.value,q?C.value:void 0,A.value,I.value,B.value,D.value,R.value,O?.selectedClass.value,n.class],style:[q?T.value:void 0,n.style],disabled:n.disabled||void 0,draggable:n.draggable,tabindex:U.value?0:void 0,onClick:z,onKeydown:U.value&&!F.value&&W},L.linkProps),{default:()=>[genOverlays(U.value,"v-chip"),we&&createVNode(VExpandXTransition,{key:"filter"},{default:()=>[withDirectives(createVNode("div",{class:"v-chip__filter"},[x.filter?createVNode(VDefaultsProvider,{key:"filter-defaults",disabled:!n.filterIcon,defaults:{VIcon:{icon:n.filterIcon}}},x.filter):createVNode(VIcon,{key:"filter-icon",icon:n.filterIcon},null)]),[[vShow,O.isSelected.value]])]}),J&&createVNode("div",{key:"prepend",class:"v-chip__prepend"},[x.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!G,defaults:{VAvatar:{image:n.prependAvatar,start:!0},VIcon:{icon:n.prependIcon,start:!0}}},x.prepend):createVNode(Fragment,null,[n.prependIcon&&createVNode(VIcon,{key:"prepend-icon",icon:n.prependIcon,start:!0},null),n.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar",image:n.prependAvatar,start:!0},null)])]),createVNode("div",{class:"v-chip__content","data-no-activator":""},[x.default?.({isSelected:O?.isSelected.value,selectedClass:O?.selectedClass.value,select:O?.select,toggle:O?.toggle,value:O?.value.value,disabled:n.disabled})??n.text]),fe&&createVNode("div",{key:"append",class:"v-chip__append"},[x.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!ie,defaults:{VAvatar:{end:!0,image:n.appendAvatar},VIcon:{end:!0,icon:n.appendIcon}}},x.append):createVNode(Fragment,null,[n.appendIcon&&createVNode(VIcon,{key:"append-icon",end:!0,icon:n.appendIcon},null),n.appendAvatar&&createVNode(VAvatar,{key:"append-avatar",end:!0,image:n.appendAvatar},null)])]),xe&&createVNode("button",mergeProps({key:"close",class:"v-chip__close",type:"button","data-testid":"close-chip"},j.value),[x.close?createVNode(VDefaultsProvider,{key:"close-defaults",defaults:{VIcon:{icon:n.closeIcon,size:"x-small"}}},x.close):createVNode(VIcon,{key:"close-icon",icon:n.closeIcon,size:"x-small"},null)])]}),[[resolveDirective("ripple"),U.value&&n.ripple,null]])}}}),makeVTooltipProps=propsFactory({id:String,text:String,...omit(makeVOverlayProps({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),VTooltip=genericComponent()({name:"VTooltip",props:makeVTooltipProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const _=useProxiedModel(n,"modelValue"),{scopeId:x}=useScopeId(),S=getUid(),E=computed(()=>n.id||`v-tooltip-${S}`),C=ref$2(),T=computed(()=>n.location.split(" ").length>1?n.location:n.location+" center"),R=computed(()=>n.origin==="auto"||n.origin==="overlap"||n.origin.split(" ").length>1||n.location.split(" ").length>1?n.origin:n.origin+" center"),A=computed(()=>n.transition?n.transition:_.value?"scale-transition":"fade-transition"),I=computed(()=>mergeProps({"aria-describedby":E.value},n.activatorProps));return useRender(()=>{const B=VOverlay.filterProps(n);return createVNode(VOverlay,mergeProps({ref:C,class:["v-tooltip",n.class],style:n.style,id:E.value},B,{modelValue:_.value,"onUpdate:modelValue":D=>_.value=D,transition:A.value,absolute:!0,location:T.value,origin:R.value,persistent:!0,role:"tooltip",activatorProps:I.value,_disableGlobalStack:!0},x),{activator:g.activator,default:function(){for(var D=arguments.length,N=new Array(D),M=0;M<D;M++)N[M]=arguments[M];return g.default?.(...N)??n.text}})}),forwardRefs({},C)}}),_sfc_main$1v=defineComponent$1({__name:"JetonMembre",props:{compte:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.profil.suivreNoms,{idCompte:r.compte}),C=S(E),T=suivre(g.suivreIdCompte),{résultats:R}=rechercher(g.réseau.suivreConfianceMonRéseauPourMembre,{idCompte:r.compte,profondeur:5}),A=computed(()=>{const D=R.value||0;return D<0?"membres.confiance.bloqué":D===0?"membres.confiance.inconnu":D<.33?"membres.confiance.peuDinteraction":D<.67?"membres.confiance.interactionMoyenne":D<1?"membres.confiance.beaucoupDinteraction":D===1?r.compte===T.value?x("membres.moi"):x("membres.confiance.connaissance"):""}),I=computed(()=>(R.value||0)<0?"mdi-cancel":r.compte===T.value?"mdi-check":"mdi-hands-pray"),B=computed(()=>{const D=R.value||0;return D<0?"error":R.value===1?"success":`rgba(22, 151, 246, ${.1+D*.9})`});return(D,N)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small",label:""},{append:withCtx(()=>[createVNode(VTooltip,{text:unref(x)(A.value),location:"bottom"},{activator:withCtx(({props:M})=>[createVNode(VIcon,mergeProps(M,{color:B.value,size:"small",end:""}),{default:withCtx(()=>[createTextVNode(toDisplayString(I.value),1)]),_:2},1040,["color"])]),_:1},8,["text"]),renderSlot(D.$slots,"post")]),default:withCtx(()=>[createVNode(_sfc_main$1w,{id:D.compte,start:""},null,8,["id"]),createTextVNode(" "+toDisplayString(unref(C)||unref(x)("communs.anonyme"))+" ",1)]),_:3}))}}),makeVDividerProps=propsFactory({color:String,inset:Boolean,length:[Number,String],opacity:[Number,String],thickness:[Number,String],vertical:Boolean,...makeComponentProps(),...makeThemeProps()},"VDivider"),VDivider=genericComponent()({name:"VDivider",props:makeVDividerProps(),setup(n,r){let{attrs:g,slots:_}=r;const{themeClasses:x}=provideTheme(n),{textColorClasses:S,textColorStyles:E}=useTextColor(toRef(n,"color")),C=computed(()=>{const T={};return n.length&&(T[n.vertical?"height":"width"]=convertToUnit(n.length)),n.thickness&&(T[n.vertical?"borderRightWidth":"borderTopWidth"]=convertToUnit(n.thickness)),T});return useRender(()=>{const T=createVNode("hr",{class:[{"v-divider":!0,"v-divider--inset":n.inset,"v-divider--vertical":n.vertical},x.value,S.value,n.class],style:[C.value,E.value,{"--v-border-opacity":n.opacity},n.style],"aria-orientation":!g.role||g.role==="separator"?n.vertical?"vertical":"horizontal":void 0,role:`${g.role||"separator"}`},null);return _.default?createVNode("div",{class:["v-divider__wrapper",{"v-divider__wrapper--vertical":n.vertical,"v-divider__wrapper--inset":n.inset}]},[T,createVNode("div",{class:"v-divider__content"},[_.default()]),T]):T}),{}}}),ListKey=Symbol.for("vuetify:list");function createList(){const n=inject$1(ListKey,{hasPrepend:shallowRef(!1),updateHasPrepend:()=>null}),r={hasPrepend:shallowRef(!1),updateHasPrepend:g=>{g&&(r.hasPrepend.value=g)}};return provide(ListKey,r),n}function useList(){return inject$1(ListKey,null)}const independentActiveStrategy=n=>{const r={activate:g=>{let{id:_,value:x,activated:S}=g;return _=toRaw(_),n&&!x&&S.size===1&&S.has(_)||(x?S.add(_):S.delete(_)),S},in:(g,_,x)=>{let S=new Set;if(g!=null)for(const E of wrapInArray(g))S=r.activate({id:E,value:!0,activated:new Set(S),children:_,parents:x});return S},out:g=>Array.from(g)};return r},independentSingleActiveStrategy=n=>{const r=independentActiveStrategy(n);return{activate:_=>{let{activated:x,id:S,...E}=_;S=toRaw(S);const C=x.has(S)?new Set([S]):new Set;return r.activate({...E,id:S,activated:C})},in:(_,x,S)=>{let E=new Set;if(_!=null){const C=wrapInArray(_);C.length&&(E=r.in(C.slice(0,1),x,S))}return E},out:(_,x,S)=>r.out(_,x,S)}},leafActiveStrategy=n=>{const r=independentActiveStrategy(n);return{activate:_=>{let{id:x,activated:S,children:E,...C}=_;return x=toRaw(x),E.has(x)?S:r.activate({id:x,activated:S,children:E,...C})},in:r.in,out:r.out}},leafSingleActiveStrategy=n=>{const r=independentSingleActiveStrategy(n);return{activate:_=>{let{id:x,activated:S,children:E,...C}=_;return x=toRaw(x),E.has(x)?S:r.activate({id:x,activated:S,children:E,...C})},in:r.in,out:r.out}},singleOpenStrategy={open:n=>{let{id:r,value:g,opened:_,parents:x}=n;if(g){const S=new Set;S.add(r);let E=x.get(r);for(;E!=null;)S.add(E),E=x.get(E);return S}else return _.delete(r),_},select:()=>null},multipleOpenStrategy={open:n=>{let{id:r,value:g,opened:_,parents:x}=n;if(g){let S=x.get(r);for(_.add(r);S!=null&&S!==r;)_.add(S),S=x.get(S);return _}else _.delete(r);return _},select:()=>null},listOpenStrategy={open:multipleOpenStrategy.open,select:n=>{let{id:r,value:g,opened:_,parents:x}=n;if(!g)return _;const S=[];let E=x.get(r);for(;E!=null;)S.push(E),E=x.get(E);return new Set(S)}},independentSelectStrategy=n=>{const r={select:g=>{let{id:_,value:x,selected:S}=g;if(_=toRaw(_),n&&!x){const E=Array.from(S.entries()).reduce((C,T)=>{let[R,A]=T;return A==="on"&&C.push(R),C},[]);if(E.length===1&&E[0]===_)return S}return S.set(_,x?"on":"off"),S},in:(g,_,x)=>{let S=new Map;for(const E of g||[])S=r.select({id:E,value:!0,selected:new Map(S),children:_,parents:x});return S},out:g=>{const _=[];for(const[x,S]of g.entries())S==="on"&&_.push(x);return _}};return r},independentSingleSelectStrategy=n=>{const r=independentSelectStrategy(n);return{select:_=>{let{selected:x,id:S,...E}=_;S=toRaw(S);const C=x.has(S)?new Map([[S,x.get(S)]]):new Map;return r.select({...E,id:S,selected:C})},in:(_,x,S)=>{let E=new Map;return _?.length&&(E=r.in(_.slice(0,1),x,S)),E},out:(_,x,S)=>r.out(_,x,S)}},leafSelectStrategy=n=>{const r=independentSelectStrategy(n);return{select:_=>{let{id:x,selected:S,children:E,...C}=_;return x=toRaw(x),E.has(x)?S:r.select({id:x,selected:S,children:E,...C})},in:r.in,out:r.out}},leafSingleSelectStrategy=n=>{const r=independentSingleSelectStrategy(n);return{select:_=>{let{id:x,selected:S,children:E,...C}=_;return x=toRaw(x),E.has(x)?S:r.select({id:x,selected:S,children:E,...C})},in:r.in,out:r.out}},classicSelectStrategy=n=>{const r={select:g=>{let{id:_,value:x,selected:S,children:E,parents:C}=g;_=toRaw(_);const T=new Map(S),R=[_];for(;R.length;){const I=R.shift();S.set(toRaw(I),x?"on":"off"),E.has(I)&&R.push(...E.get(I))}let A=toRaw(C.get(_));for(;A;){const I=E.get(A),B=I.every(N=>S.get(toRaw(N))==="on"),D=I.every(N=>!S.has(toRaw(N))||S.get(toRaw(N))==="off");S.set(A,B?"on":D?"off":"indeterminate"),A=toRaw(C.get(A))}return n&&!x&&Array.from(S.entries()).reduce((B,D)=>{let[N,M]=D;return M==="on"&&B.push(N),B},[]).length===0?T:S},in:(g,_,x)=>{let S=new Map;for(const E of g||[])S=r.select({id:E,value:!0,selected:new Map(S),children:_,parents:x});return S},out:(g,_)=>{const x=[];for(const[S,E]of g.entries())E==="on"&&!_.has(S)&&x.push(S);return x}};return r},VNestedSymbol=Symbol.for("vuetify:nested"),emptyNested={id:shallowRef(),root:{register:()=>null,unregister:()=>null,parents:ref$2(new Map),children:ref$2(new Map),open:()=>null,openOnSelect:()=>null,activate:()=>null,select:()=>null,activatable:ref$2(!1),selectable:ref$2(!1),opened:ref$2(new Set),activated:ref$2(new Set),selected:ref$2(new Map),selectedValues:ref$2([]),getPath:()=>[]}},makeNestedProps=propsFactory({activatable:Boolean,selectable:Boolean,activeStrategy:[String,Function,Object],selectStrategy:[String,Function,Object],openStrategy:[String,Object],opened:null,activated:null,selected:null,mandatory:Boolean},"nested"),useNested=n=>{let r=!1;const g=ref$2(new Map),_=ref$2(new Map),x=useProxiedModel(n,"opened",n.opened,N=>new Set(N),N=>[...N.values()]),S=computed(()=>{if(typeof n.activeStrategy=="object")return n.activeStrategy;if(typeof n.activeStrategy=="function")return n.activeStrategy(n.mandatory);switch(n.activeStrategy){case"leaf":return leafActiveStrategy(n.mandatory);case"single-leaf":return leafSingleActiveStrategy(n.mandatory);case"independent":return independentActiveStrategy(n.mandatory);case"single-independent":default:return independentSingleActiveStrategy(n.mandatory)}}),E=computed(()=>{if(typeof n.selectStrategy=="object")return n.selectStrategy;if(typeof n.selectStrategy=="function")return n.selectStrategy(n.mandatory);switch(n.selectStrategy){case"single-leaf":return leafSingleSelectStrategy(n.mandatory);case"leaf":return leafSelectStrategy(n.mandatory);case"independent":return independentSelectStrategy(n.mandatory);case"single-independent":return independentSingleSelectStrategy(n.mandatory);case"classic":default:return classicSelectStrategy(n.mandatory)}}),C=computed(()=>{if(typeof n.openStrategy=="object")return n.openStrategy;switch(n.openStrategy){case"list":return listOpenStrategy;case"single":return singleOpenStrategy;case"multiple":default:return multipleOpenStrategy}}),T=useProxiedModel(n,"activated",n.activated,N=>S.value.in(N,g.value,_.value),N=>S.value.out(N,g.value,_.value)),R=useProxiedModel(n,"selected",n.selected,N=>E.value.in(N,g.value,_.value),N=>E.value.out(N,g.value,_.value));onBeforeUnmount(()=>{r=!0});function A(N){const M=[];let O=N;for(;O!=null;)M.unshift(O),O=_.value.get(O);return M}const I=getCurrentInstance("nested"),B=new Set,D={id:shallowRef(),root:{opened:x,activatable:toRef(n,"activatable"),selectable:toRef(n,"selectable"),activated:T,selected:R,selectedValues:computed(()=>{const N=[];for(const[M,O]of R.value.entries())O==="on"&&N.push(M);return N}),register:(N,M,O)=>{if(B.has(N)){A(N).map(String).join(" -> "),A(M).concat(N).map(String).join(" -> ");return}else B.add(N);M&&N!==M&&_.value.set(N,M),O&&g.value.set(N,[]),M!=null&&g.value.set(M,[...g.value.get(M)||[],N])},unregister:N=>{if(r)return;B.delete(N),g.value.delete(N);const M=_.value.get(N);if(M){const O=g.value.get(M)??[];g.value.set(M,O.filter(L=>L!==N))}_.value.delete(N)},open:(N,M,O)=>{I.emit("click:open",{id:N,value:M,path:A(N),event:O});const L=C.value.open({id:N,value:M,opened:new Set(x.value),children:g.value,parents:_.value,event:O});L&&(x.value=L)},openOnSelect:(N,M,O)=>{const L=C.value.select({id:N,value:M,selected:new Map(R.value),opened:new Set(x.value),children:g.value,parents:_.value,event:O});L&&(x.value=L)},select:(N,M,O)=>{I.emit("click:select",{id:N,value:M,path:A(N),event:O});const L=E.value.select({id:N,value:M,selected:new Map(R.value),children:g.value,parents:_.value,event:O});L&&(R.value=L),D.root.openOnSelect(N,M,O)},activate:(N,M,O)=>{if(!n.activatable)return D.root.select(N,!0,O);I.emit("click:activate",{id:N,value:M,path:A(N),event:O});const L=S.value.activate({id:N,value:M,activated:new Set(T.value),children:g.value,parents:_.value,event:O});L&&(T.value=L)},children:g,parents:_,getPath:A}};return provide(VNestedSymbol,D),D.root},useNestedItem=(n,r)=>{const g=inject$1(VNestedSymbol,emptyNested),_=Symbol(getUid()),x=computed(()=>n.value!==void 0?n.value:_),S={...g,id:x,open:(E,C)=>g.root.open(x.value,E,C),openOnSelect:(E,C)=>g.root.openOnSelect(x.value,E,C),isOpen:computed(()=>g.root.opened.value.has(x.value)),parent:computed(()=>g.root.parents.value.get(x.value)),activate:(E,C)=>g.root.activate(x.value,E,C),isActivated:computed(()=>g.root.activated.value.has(toRaw(x.value))),select:(E,C)=>g.root.select(x.value,E,C),isSelected:computed(()=>g.root.selected.value.get(toRaw(x.value))==="on"),isIndeterminate:computed(()=>g.root.selected.value.get(toRaw(x.value))==="indeterminate"),isLeaf:computed(()=>!g.root.children.value.get(x.value)),isGroupActivator:g.isGroupActivator};return onBeforeMount(()=>{!g.isGroupActivator&&g.root.register(x.value,g.id.value,r)}),onBeforeUnmount(()=>{!g.isGroupActivator&&g.root.unregister(x.value)}),r&&provide(VNestedSymbol,S),S},useNestedGroupActivator=()=>{const n=inject$1(VNestedSymbol,emptyNested);provide(VNestedSymbol,{...n,isGroupActivator:!0})};function useSsrBoot(){const n=shallowRef(!1);return onMounted(()=>{window.requestAnimationFrame(()=>{n.value=!0})}),{ssrBootStyles:computed(()=>n.value?void 0:{transition:"none !important"}),isBooted:readonly$2(n)}}const VListGroupActivator=defineComponent({name:"VListGroupActivator",setup(n,r){let{slots:g}=r;return useNestedGroupActivator(),()=>g.default?.()}}),makeVListGroupProps=propsFactory({activeColor:String,baseColor:String,color:String,collapseIcon:{type:IconValue,default:"$collapse"},expandIcon:{type:IconValue,default:"$expand"},prependIcon:IconValue,appendIcon:IconValue,fluid:Boolean,subgroup:Boolean,title:String,value:null,...makeComponentProps(),...makeTagProps()},"VListGroup"),VListGroup=genericComponent()({name:"VListGroup",props:makeVListGroupProps(),setup(n,r){let{slots:g}=r;const{isOpen:_,open:x,id:S}=useNestedItem(toRef(n,"value"),!0),E=computed(()=>`v-list-group--id-${String(S.value)}`),C=useList(),{isBooted:T}=useSsrBoot();function R(D){D.stopPropagation(),x(!_.value,D)}const A=computed(()=>({onClick:R,class:"v-list-group__header",id:E.value})),I=computed(()=>_.value?n.collapseIcon:n.expandIcon),B=computed(()=>({VListItem:{active:_.value,activeColor:n.activeColor,baseColor:n.baseColor,color:n.color,prependIcon:n.prependIcon||n.subgroup&&I.value,appendIcon:n.appendIcon||!n.subgroup&&I.value,title:n.title,value:n.value}}));return useRender(()=>createVNode(n.tag,{class:["v-list-group",{"v-list-group--prepend":C?.hasPrepend.value,"v-list-group--fluid":n.fluid,"v-list-group--subgroup":n.subgroup,"v-list-group--open":_.value},n.class],style:n.style},{default:()=>[g.activator&&createVNode(VDefaultsProvider,{defaults:B.value},{default:()=>[createVNode(VListGroupActivator,null,{default:()=>[g.activator({props:A.value,isOpen:_.value})]})]}),createVNode(MaybeTransition,{transition:{component:VExpandTransition},disabled:!T.value},{default:()=>[withDirectives(createVNode("div",{class:"v-list-group__items",role:"group","aria-labelledby":E.value},[g.default?.()]),[[vShow,_.value]])]})]})),{isOpen:_}}}),makeVListItemSubtitleProps=propsFactory({opacity:[Number,String],...makeComponentProps(),...makeTagProps()},"VListItemSubtitle"),VListItemSubtitle=genericComponent()({name:"VListItemSubtitle",props:makeVListItemSubtitleProps(),setup(n,r){let{slots:g}=r;return useRender(()=>createVNode(n.tag,{class:["v-list-item-subtitle",n.class],style:[{"--v-list-item-subtitle-opacity":n.opacity},n.style]},g)),{}}}),VListItemTitle=createSimpleFunctional("v-list-item-title"),makeVListItemProps=propsFactory({active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:IconValue,baseColor:String,disabled:Boolean,lines:[Boolean,String],link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},slim:Boolean,subtitle:[String,Number],title:[String,Number],value:null,onClick:EventProp(),onClickOnce:EventProp(),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},"VListItem"),VListItem=genericComponent()({name:"VListItem",directives:{Ripple},props:makeVListItemProps(),emits:{click:n=>!0},setup(n,r){let{attrs:g,slots:_,emit:x}=r;const S=useLink(n,g),E=computed(()=>n.value===void 0?S.href.value:n.value),{activate:C,isActivated:T,select:R,isOpen:A,isSelected:I,isIndeterminate:B,isGroupActivator:D,root:N,parent:M,openOnSelect:O,id:L}=useNestedItem(E,!1),F=useList(),U=computed(()=>n.active!==!1&&(n.active||S.isActive?.value||(N.activatable.value?T.value:I.value))),j=computed(()=>n.link!==!1&&S.isLink.value),z=computed(()=>!!F&&(N.selectable.value||N.activatable.value||n.value!=null)),W=computed(()=>!n.disabled&&n.link!==!1&&(n.link||S.isClickable.value||z.value)),X=computed(()=>n.rounded||n.nav),ie=computed(()=>n.color??n.activeColor),fe=computed(()=>({color:U.value?ie.value??n.baseColor:n.baseColor,variant:n.variant}));watch(()=>S.isActive?.value,ye=>{ye&&xe()}),onBeforeMount(()=>{S.isActive?.value&&xe()});function xe(){M.value!=null&&N.open(M.value,!0),O(!0)}const{themeClasses:we}=provideTheme(n),{borderClasses:G}=useBorder(n),{colorClasses:J,colorStyles:q,variantClasses:H}=useVariant(fe),{densityClasses:ve}=useDensity(n),{dimensionStyles:Z}=useDimension(n),{elevationClasses:ce}=useElevation(n),{roundedClasses:ue}=useRounded(X),se=computed(()=>n.lines?`v-list-item--${n.lines}-line`:void 0),te=computed(()=>({isActive:U.value,select:R,isOpen:A.value,isSelected:I.value,isIndeterminate:B.value}));function Y(ye){x("click",ye),W.value&&(S.navigate?.(ye),!D&&(N.activatable.value?C(!T.value,ye):(N.selectable.value||n.value!=null)&&R(!I.value,ye)))}function be(ye){(ye.key==="Enter"||ye.key===" ")&&(ye.preventDefault(),ye.target.dispatchEvent(new MouseEvent("click",ye)))}return useRender(()=>{const ye=j.value?"a":n.tag,Ie=_.title||n.title!=null,ke=_.subtitle||n.subtitle!=null,Ce=!!(n.appendAvatar||n.appendIcon),Ae=!!(Ce||_.append),Ne=!!(n.prependAvatar||n.prependIcon),We=!!(Ne||_.prepend);return F?.updateHasPrepend(We),n.activeColor&&deprecate("active-color",["color","base-color"]),withDirectives(createVNode(ye,mergeProps({class:["v-list-item",{"v-list-item--active":U.value,"v-list-item--disabled":n.disabled,"v-list-item--link":W.value,"v-list-item--nav":n.nav,"v-list-item--prepend":!We&&F?.hasPrepend.value,"v-list-item--slim":n.slim,[`${n.activeClass}`]:n.activeClass&&U.value},we.value,G.value,J.value,ve.value,ce.value,se.value,ue.value,H.value,n.class],style:[q.value,Z.value,n.style],tabindex:W.value?F?-2:0:void 0,"aria-selected":z.value?N.activatable.value?T.value:N.selectable.value?I.value:U.value:void 0,onClick:Y,onKeydown:W.value&&!j.value&&be},S.linkProps),{default:()=>[genOverlays(W.value||U.value,"v-list-item"),We&&createVNode("div",{key:"prepend",class:"v-list-item__prepend"},[_.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!Ne,defaults:{VAvatar:{density:n.density,image:n.prependAvatar},VIcon:{density:n.density,icon:n.prependIcon},VListItemAction:{start:!0}}},{default:()=>[_.prepend?.(te.value)]}):createVNode(Fragment,null,[n.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar",density:n.density,image:n.prependAvatar},null),n.prependIcon&&createVNode(VIcon,{key:"prepend-icon",density:n.density,icon:n.prependIcon},null)]),createVNode("div",{class:"v-list-item__spacer"},null)]),createVNode("div",{class:"v-list-item__content","data-no-activator":""},[Ie&&createVNode(VListItemTitle,{key:"title"},{default:()=>[_.title?.({title:n.title})??n.title]}),ke&&createVNode(VListItemSubtitle,{key:"subtitle"},{default:()=>[_.subtitle?.({subtitle:n.subtitle})??n.subtitle]}),_.default?.(te.value)]),Ae&&createVNode("div",{key:"append",class:"v-list-item__append"},[_.append?createVNode(VDefaultsProvider,{key:"append-defaults",disabled:!Ce,defaults:{VAvatar:{density:n.density,image:n.appendAvatar},VIcon:{density:n.density,icon:n.appendIcon},VListItemAction:{end:!0}}},{default:()=>[_.append?.(te.value)]}):createVNode(Fragment,null,[n.appendIcon&&createVNode(VIcon,{key:"append-icon",density:n.density,icon:n.appendIcon},null),n.appendAvatar&&createVNode(VAvatar,{key:"append-avatar",density:n.density,image:n.appendAvatar},null)]),createVNode("div",{class:"v-list-item__spacer"},null)])]}),[[resolveDirective("ripple"),W.value&&n.ripple]])}),{activate:C,isActivated:T,isGroupActivator:D,isSelected:I,list:F,select:R,root:N,id:L}}}),makeVListSubheaderProps=propsFactory({color:String,inset:Boolean,sticky:Boolean,title:String,...makeComponentProps(),...makeTagProps()},"VListSubheader"),VListSubheader=genericComponent()({name:"VListSubheader",props:makeVListSubheaderProps(),setup(n,r){let{slots:g}=r;const{textColorClasses:_,textColorStyles:x}=useTextColor(toRef(n,"color"));return useRender(()=>{const S=!!(g.default||n.title);return createVNode(n.tag,{class:["v-list-subheader",{"v-list-subheader--inset":n.inset,"v-list-subheader--sticky":n.sticky},_.value,n.class],style:[{textColorStyles:x},n.style]},{default:()=>[S&&createVNode("div",{class:"v-list-subheader__text"},[g.default?.()??n.title])]})}),{}}}),makeVListChildrenProps=propsFactory({items:Array,returnObject:Boolean},"VListChildren"),VListChildren=genericComponent()({name:"VListChildren",props:makeVListChildrenProps(),setup(n,r){let{slots:g}=r;return createList(),()=>g.default?.()??n.items?.map(_=>{let{children:x,props:S,type:E,raw:C}=_;if(E==="divider")return g.divider?.({props:S})??createVNode(VDivider,S,null);if(E==="subheader")return g.subheader?.({props:S})??createVNode(VListSubheader,S,null);const T={subtitle:g.subtitle?A=>g.subtitle?.({...A,item:C}):void 0,prepend:g.prepend?A=>g.prepend?.({...A,item:C}):void 0,append:g.append?A=>g.append?.({...A,item:C}):void 0,title:g.title?A=>g.title?.({...A,item:C}):void 0},R=VListGroup.filterProps(S);return x?createVNode(VListGroup,mergeProps({value:S?.value},R),{activator:A=>{let{props:I}=A;const B={...S,...I,value:n.returnObject?C:S.value};return g.header?g.header({props:B}):createVNode(VListItem,B,T)},default:()=>createVNode(VListChildren,{items:x,returnObject:n.returnObject},g)}):g.item?g.item({props:S}):createVNode(VListItem,mergeProps(S,{value:n.returnObject?C:S.value}),T)})}}),makeItemsProps=propsFactory({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean,valueComparator:{type:Function,default:deepEqual}},"list-items");function transformItem$1(n,r){const g=getPropertyFromItem(r,n.itemTitle,r),_=getPropertyFromItem(r,n.itemValue,g),x=getPropertyFromItem(r,n.itemChildren),S=n.itemProps===!0?typeof r=="object"&&r!=null&&!Array.isArray(r)?"children"in r?omit(r,["children"]):r:void 0:getPropertyFromItem(r,n.itemProps),E={title:g,value:_,...S};return{title:String(E.title??""),value:E.value,props:E,children:Array.isArray(x)?transformItems$1(n,x):void 0,raw:r}}function transformItems$1(n,r){const g=[];for(const _ of r)g.push(transformItem$1(n,_));return g}function useItems(n){const r=computed(()=>transformItems$1(n,n.items)),g=computed(()=>r.value.some(S=>S.value===null));function _(S){return g.value||(S=S.filter(E=>E!==null)),S.map(E=>n.returnObject&&typeof E=="string"?transformItem$1(n,E):r.value.find(C=>n.valueComparator(E,C.value))||transformItem$1(n,E))}function x(S){return n.returnObject?S.map(E=>{let{raw:C}=E;return C}):S.map(E=>{let{value:C}=E;return C})}return{items:r,transformIn:_,transformOut:x}}function isPrimitive(n){return typeof n=="string"||typeof n=="number"||typeof n=="boolean"}function transformItem(n,r){const g=getPropertyFromItem(r,n.itemType,"item"),_=isPrimitive(r)?r:getPropertyFromItem(r,n.itemTitle),x=getPropertyFromItem(r,n.itemValue,void 0),S=getPropertyFromItem(r,n.itemChildren),E=n.itemProps===!0?omit(r,["children"]):getPropertyFromItem(r,n.itemProps),C={title:_,value:x,...E};return{type:g,title:C.title,value:C.value,props:C,children:g==="item"&&S?transformItems(n,S):void 0,raw:r}}function transformItems(n,r){const g=[];for(const _ of r)g.push(transformItem(n,_));return g}function useListItems(n){return{items:computed(()=>transformItems(n,n.items))}}const makeVListProps=propsFactory({baseColor:String,activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,expandIcon:IconValue,collapseIcon:IconValue,lines:{type:[Boolean,String],default:"one"},slim:Boolean,nav:Boolean,"onClick:open":EventProp(),"onClick:select":EventProp(),"onUpdate:opened":EventProp(),...makeNestedProps({selectStrategy:"single-leaf",openStrategy:"list"}),...makeBorderProps(),...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),itemType:{type:String,default:"type"},...makeItemsProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},"VList"),VList=genericComponent()({name:"VList",props:makeVListProps(),emits:{"update:selected":n=>!0,"update:activated":n=>!0,"update:opened":n=>!0,"click:open":n=>!0,"click:activate":n=>!0,"click:select":n=>!0},setup(n,r){let{slots:g}=r;const{items:_}=useListItems(n),{themeClasses:x}=provideTheme(n),{backgroundColorClasses:S,backgroundColorStyles:E}=useBackgroundColor(toRef(n,"bgColor")),{borderClasses:C}=useBorder(n),{densityClasses:T}=useDensity(n),{dimensionStyles:R}=useDimension(n),{elevationClasses:A}=useElevation(n),{roundedClasses:I}=useRounded(n),{children:B,open:D,parents:N,select:M,getPath:O}=useNested(n),L=computed(()=>n.lines?`v-list--${n.lines}-line`:void 0),F=toRef(n,"activeColor"),U=toRef(n,"baseColor"),j=toRef(n,"color");createList(),provideDefaults({VListGroup:{activeColor:F,baseColor:U,color:j,expandIcon:toRef(n,"expandIcon"),collapseIcon:toRef(n,"collapseIcon")},VListItem:{activeClass:toRef(n,"activeClass"),activeColor:F,baseColor:U,color:j,density:toRef(n,"density"),disabled:toRef(n,"disabled"),lines:toRef(n,"lines"),nav:toRef(n,"nav"),slim:toRef(n,"slim"),variant:toRef(n,"variant")}});const z=shallowRef(!1),W=ref$2();function X(J){z.value=!0}function ie(J){z.value=!1}function fe(J){!z.value&&!(J.relatedTarget&&W.value?.contains(J.relatedTarget))&&G()}function xe(J){const q=J.target;if(!(!W.value||["INPUT","TEXTAREA"].includes(q.tagName))){if(J.key==="ArrowDown")G("next");else if(J.key==="ArrowUp")G("prev");else if(J.key==="Home")G("first");else if(J.key==="End")G("last");else return;J.preventDefault()}}function we(J){z.value=!0}function G(J){if(W.value)return focusChild(W.value,J)}return useRender(()=>createVNode(n.tag,{ref:W,class:["v-list",{"v-list--disabled":n.disabled,"v-list--nav":n.nav,"v-list--slim":n.slim},x.value,S.value,C.value,T.value,A.value,L.value,I.value,n.class],style:[E.value,R.value,n.style],tabindex:n.disabled||z.value?-1:0,role:"listbox","aria-activedescendant":void 0,onFocusin:X,onFocusout:ie,onFocus:fe,onKeydown:xe,onMousedown:we},{default:()=>[createVNode(VListChildren,{items:_.value,returnObject:n.returnObject},g)]})),{open:D,select:M,focus:G,children:B,parents:N,getPath:O}}}),makeVListItemActionProps=propsFactory({start:Boolean,end:Boolean,...makeComponentProps(),...makeTagProps()},"VListItemAction"),VListItemAction=genericComponent()({name:"VListItemAction",props:makeVListItemActionProps(),setup(n,r){let{slots:g}=r;return useRender(()=>createVNode(n.tag,{class:["v-list-item-action",{"v-list-item-action--start":n.start,"v-list-item-action--end":n.end},n.class],style:n.style},g)),{}}}),_sfc_main$1u=defineComponent$1({__name:"GroupeSuggestionsTraduction",props:{clef:{},langue:{},suggestions:{}},setup(n){const r=n,{கிடைக்கும்_மொழிகளை_பயன்படுத்து:g,மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{மொழியின்_பெயர்:x}=g(),{$மொ:S}=_(),E=கிளிமூக்கு(),C=x(r.langue),T=async R=>{await E.அங்கீகரி({பரிந்துரை:R})};return(R,A)=>(openBlock(),createBlock(VListGroup,null,{activator:withCtx(({props:I})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(I)),{prepend:withCtx(()=>[createVNode(VAvatar,null,{default:withCtx(()=>[createTextVNode(toDisplayString(R.suggestions?.length),1)]),_:1})]),title:withCtx(()=>[createTextVNode(toDisplayString(unref(S)(R.clef))+" ",1),createVNode(VChip,{class:"ms-2",label:"",variant:"outlined",density:"compact"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)),1)]),_:1})]),subtitle:withCtx(()=>[createTextVNode(toDisplayString(R.clef),1)]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(R.suggestions,I=>(openBlock(),createBlock(VListItem,{key:I.அடையாளம்,onClick:()=>{}},{default:withCtx(()=>[createVNode(_sfc_main$1v,{compte:I.பங்கேற்பாளர்},null,8,["compte"]),createVNode(VChip,{class:"ma-2",variant:"outlined",density:"compact",label:""},{default:withCtx(()=>[createTextVNode(toDisplayString(I.பரிந்துரை.தேதி.toDateString()),1)]),_:2},1024),createVNode(VDivider,{class:"my-2"}),createBaseVNode("div",null,toDisplayString(I.பரிந்துரை.மொழிபெயர்ப்பு),1),A[0]||(A[0]=createBaseVNode("br",null,null,-1)),createVNode(VBtn,{class:"mb-2",variant:"outlined","append-icon":"mdi-check",onClick:()=>T(I)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("kilimukku.approuver")),1)]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1}))}}),makeVContainerProps=propsFactory({fluid:{type:Boolean,default:!1},...makeComponentProps(),...makeDimensionProps(),...makeTagProps()},"VContainer"),VContainer=genericComponent()({name:"VContainer",props:makeVContainerProps(),setup(n,r){let{slots:g}=r;const{rtlClasses:_}=useRtl(),{dimensionStyles:x}=useDimension(n);return useRender(()=>createVNode(n.tag,{class:["v-container",{"v-container--fluid":n.fluid},_.value,n.class],style:[x.value,n.style]},g)),{}}}),breakpointProps=breakpoints.reduce((n,r)=>(n[r]={type:[Boolean,String,Number],default:!1},n),{}),offsetProps=breakpoints.reduce((n,r)=>{const g="offset"+capitalize(r);return n[g]={type:[String,Number],default:null},n},{}),orderProps=breakpoints.reduce((n,r)=>{const g="order"+capitalize(r);return n[g]={type:[String,Number],default:null},n},{}),propMap$1={col:Object.keys(breakpointProps),offset:Object.keys(offsetProps),order:Object.keys(orderProps)};function breakpointClass$1(n,r,g){let _=n;if(!(g==null||g===!1)){if(r){const x=r.replace(n,"");_+=`-${x}`}return n==="col"&&(_="v-"+_),n==="col"&&(g===""||g===!0)||(_+=`-${g}`),_.toLowerCase()}}const ALIGN_SELF_VALUES=["auto","start","end","center","baseline","stretch"],makeVColProps=propsFactory({cols:{type:[Boolean,String,Number],default:!1},...breakpointProps,offset:{type:[String,Number],default:null},...offsetProps,order:{type:[String,Number],default:null},...orderProps,alignSelf:{type:String,default:null,validator:n=>ALIGN_SELF_VALUES.includes(n)},...makeComponentProps(),...makeTagProps()},"VCol"),VCol=genericComponent()({name:"VCol",props:makeVColProps(),setup(n,r){let{slots:g}=r;const _=computed(()=>{const x=[];let S;for(S in propMap$1)propMap$1[S].forEach(C=>{const T=n[C],R=breakpointClass$1(S,C,T);R&&x.push(R)});const E=x.some(C=>C.startsWith("v-col-"));return x.push({"v-col":!E||!n.cols,[`v-col-${n.cols}`]:n.cols,[`offset-${n.offset}`]:n.offset,[`order-${n.order}`]:n.order,[`align-self-${n.alignSelf}`]:n.alignSelf}),x});return()=>h$2(n.tag,{class:[_.value,n.class],style:n.style},g.default?.())}}),ALIGNMENT=["start","end","center"],SPACE=["space-between","space-around","space-evenly"];function makeRowProps(n,r){return breakpoints.reduce((g,_)=>{const x=n+capitalize(_);return g[x]=r(),g},{})}const ALIGN_VALUES=[...ALIGNMENT,"baseline","stretch"],alignValidator=n=>ALIGN_VALUES.includes(n),alignProps=makeRowProps("align",()=>({type:String,default:null,validator:alignValidator})),JUSTIFY_VALUES=[...ALIGNMENT,...SPACE],justifyValidator=n=>JUSTIFY_VALUES.includes(n),justifyProps=makeRowProps("justify",()=>({type:String,default:null,validator:justifyValidator})),ALIGN_CONTENT_VALUES=[...ALIGNMENT,...SPACE,"stretch"],alignContentValidator=n=>ALIGN_CONTENT_VALUES.includes(n),alignContentProps=makeRowProps("alignContent",()=>({type:String,default:null,validator:alignContentValidator})),propMap={align:Object.keys(alignProps),justify:Object.keys(justifyProps),alignContent:Object.keys(alignContentProps)},classMap={align:"align",justify:"justify",alignContent:"align-content"};function breakpointClass(n,r,g){let _=classMap[n];if(g!=null){if(r){const x=r.replace(n,"");_+=`-${x}`}return _+=`-${g}`,_.toLowerCase()}}const makeVRowProps=propsFactory({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:alignValidator},...alignProps,justify:{type:String,default:null,validator:justifyValidator},...justifyProps,alignContent:{type:String,default:null,validator:alignContentValidator},...alignContentProps,...makeComponentProps(),...makeTagProps()},"VRow"),VRow=genericComponent()({name:"VRow",props:makeVRowProps(),setup(n,r){let{slots:g}=r;const _=computed(()=>{const x=[];let S;for(S in propMap)propMap[S].forEach(E=>{const C=n[E],T=breakpointClass(S,E,C);T&&x.push(T)});return x.push({"v-row--no-gutters":n.noGutters,"v-row--dense":n.dense,[`align-${n.align}`]:n.align,[`justify-${n.justify}`]:n.justify,[`align-content-${n.alignContent}`]:n.alignContent}),x});return()=>h$2(n.tag,{class:["v-row",_.value,n.class],style:n.style},g.default?.())}}),VSpacer=createSimpleFunctional("v-spacer","div","VSpacer"),makeVLabelProps=propsFactory({text:String,onClick:EventProp(),...makeComponentProps(),...makeThemeProps()},"VLabel"),VLabel=genericComponent()({name:"VLabel",props:makeVLabelProps(),setup(n,r){let{slots:g}=r;return useRender(()=>createVNode("label",{class:["v-label",{"v-label--clickable":!!n.onClick},n.class],style:n.style,onClick:n.onClick},[n.text,g.default?.()])),{}}}),VSelectionControlGroupSymbol=Symbol.for("vuetify:selection-control-group"),makeSelectionControlGroupProps=propsFactory({color:String,disabled:{type:Boolean,default:null},defaultsTarget:String,error:Boolean,id:String,inline:Boolean,falseIcon:IconValue,trueIcon:IconValue,ripple:{type:[Boolean,Object],default:!0},multiple:{type:Boolean,default:null},name:String,readonly:{type:Boolean,default:null},modelValue:null,type:String,valueComparator:{type:Function,default:deepEqual},...makeComponentProps(),...makeDensityProps(),...makeThemeProps()},"SelectionControlGroup"),makeVSelectionControlGroupProps=propsFactory({...makeSelectionControlGroupProps({defaultsTarget:"VSelectionControl"})},"VSelectionControlGroup"),VSelectionControlGroup=genericComponent()({name:"VSelectionControlGroup",props:makeVSelectionControlGroupProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const _=useProxiedModel(n,"modelValue"),x=getUid(),S=computed(()=>n.id||`v-selection-control-group-${x}`),E=computed(()=>n.name||S.value),C=new Set;return provide(VSelectionControlGroupSymbol,{modelValue:_,forceUpdate:()=>{C.forEach(T=>T())},onForceUpdate:T=>{C.add(T),onScopeDispose(()=>{C.delete(T)})}}),provideDefaults({[n.defaultsTarget]:{color:toRef(n,"color"),disabled:toRef(n,"disabled"),density:toRef(n,"density"),error:toRef(n,"error"),inline:toRef(n,"inline"),modelValue:_,multiple:computed(()=>!!n.multiple||n.multiple==null&&Array.isArray(_.value)),name:E,falseIcon:toRef(n,"falseIcon"),trueIcon:toRef(n,"trueIcon"),readonly:toRef(n,"readonly"),ripple:toRef(n,"ripple"),type:toRef(n,"type"),valueComparator:toRef(n,"valueComparator")}}),useRender(()=>createVNode("div",{class:["v-selection-control-group",{"v-selection-control-group--inline":n.inline},n.class],style:n.style,role:n.type==="radio"?"radiogroup":void 0},[g.default?.()])),{}}}),makeVSelectionControlProps=propsFactory({label:String,baseColor:String,trueValue:null,falseValue:null,value:null,...makeComponentProps(),...makeSelectionControlGroupProps()},"VSelectionControl");function useSelectionControl(n){const r=inject$1(VSelectionControlGroupSymbol,void 0),{densityClasses:g}=useDensity(n),_=useProxiedModel(n,"modelValue"),x=computed(()=>n.trueValue!==void 0?n.trueValue:n.value!==void 0?n.value:!0),S=computed(()=>n.falseValue!==void 0?n.falseValue:!1),E=computed(()=>!!n.multiple||n.multiple==null&&Array.isArray(_.value)),C=computed({get(){const D=r?r.modelValue.value:_.value;return E.value?wrapInArray(D).some(N=>n.valueComparator(N,x.value)):n.valueComparator(D,x.value)},set(D){if(n.readonly)return;const N=D?x.value:S.value;let M=N;E.value&&(M=D?[...wrapInArray(_.value),N]:wrapInArray(_.value).filter(O=>!n.valueComparator(O,x.value))),r?r.modelValue.value=M:_.value=M}}),{textColorClasses:T,textColorStyles:R}=useTextColor(computed(()=>{if(!(n.error||n.disabled))return C.value?n.color:n.baseColor})),{backgroundColorClasses:A,backgroundColorStyles:I}=useBackgroundColor(computed(()=>C.value&&!n.error&&!n.disabled?n.color:n.baseColor)),B=computed(()=>C.value?n.trueIcon:n.falseIcon);return{group:r,densityClasses:g,trueValue:x,falseValue:S,model:C,textColorClasses:T,textColorStyles:R,backgroundColorClasses:A,backgroundColorStyles:I,icon:B}}const VSelectionControl=genericComponent()({name:"VSelectionControl",directives:{Ripple},inheritAttrs:!1,props:makeVSelectionControlProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{attrs:g,slots:_}=r;const{group:x,densityClasses:S,icon:E,model:C,textColorClasses:T,textColorStyles:R,backgroundColorClasses:A,backgroundColorStyles:I,trueValue:B}=useSelectionControl(n),D=getUid(),N=shallowRef(!1),M=shallowRef(!1),O=ref$2(),L=computed(()=>n.id||`input-${D}`),F=computed(()=>!n.disabled&&!n.readonly);x?.onForceUpdate(()=>{O.value&&(O.value.checked=C.value)});function U(X){F.value&&(N.value=!0,matchesSelector(X.target,":focus-visible")!==!1&&(M.value=!0))}function j(){N.value=!1,M.value=!1}function z(X){X.stopPropagation()}function W(X){if(!F.value){O.value&&(O.value.checked=C.value);return}n.readonly&&x&&nextTick$1(()=>x.forceUpdate()),C.value=X.target.checked}return useRender(()=>{const X=_.label?_.label({label:n.label,props:{for:L.value}}):n.label,[ie,fe]=filterInputAttrs(g),xe=createVNode("input",mergeProps({ref:O,checked:C.value,disabled:!!n.disabled,id:L.value,onBlur:j,onFocus:U,onInput:W,"aria-disabled":!!n.disabled,"aria-label":n.label,type:n.type,value:B.value,name:n.name,"aria-checked":n.type==="checkbox"?C.value:void 0},fe),null);return createVNode("div",mergeProps({class:["v-selection-control",{"v-selection-control--dirty":C.value,"v-selection-control--disabled":n.disabled,"v-selection-control--error":n.error,"v-selection-control--focused":N.value,"v-selection-control--focus-visible":M.value,"v-selection-control--inline":n.inline},S.value,n.class]},ie,{style:n.style}),[createVNode("div",{class:["v-selection-control__wrapper",T.value],style:R.value},[_.default?.({backgroundColorClasses:A,backgroundColorStyles:I}),withDirectives(createVNode("div",{class:["v-selection-control__input"]},[_.input?.({model:C,textColorClasses:T,textColorStyles:R,backgroundColorClasses:A,backgroundColorStyles:I,inputNode:xe,icon:E.value,props:{onFocus:U,onBlur:j,id:L.value}})??createVNode(Fragment,null,[E.value&&createVNode(VIcon,{key:"icon",icon:E.value},null),xe])]),[[resolveDirective("ripple"),n.ripple&&[!n.disabled&&!n.readonly,null,["center","circle"]]]])]),X&&createVNode(VLabel,{for:L.value,onClick:z},{default:()=>[X]})])}),{isFocused:N,input:O}}}),makeVCheckboxBtnProps=propsFactory({indeterminate:Boolean,indeterminateIcon:{type:IconValue,default:"$checkboxIndeterminate"},...makeVSelectionControlProps({falseIcon:"$checkboxOff",trueIcon:"$checkboxOn"})},"VCheckboxBtn"),VCheckboxBtn=genericComponent()({name:"VCheckboxBtn",props:makeVCheckboxBtnProps(),emits:{"update:modelValue":n=>!0,"update:indeterminate":n=>!0},setup(n,r){let{slots:g}=r;const _=useProxiedModel(n,"indeterminate"),x=useProxiedModel(n,"modelValue");function S(T){_.value&&(_.value=!1)}const E=computed(()=>_.value?n.indeterminateIcon:n.falseIcon),C=computed(()=>_.value?n.indeterminateIcon:n.trueIcon);return useRender(()=>{const T=omit(VSelectionControl.filterProps(n),["modelValue"]);return createVNode(VSelectionControl,mergeProps(T,{modelValue:x.value,"onUpdate:modelValue":[R=>x.value=R,S],class:["v-checkbox-btn",n.class],style:n.style,type:"checkbox",falseIcon:E.value,trueIcon:C.value,"aria-checked":_.value?"mixed":void 0}),g)}),{}}});function useInputIcon(n){const{t:r}=useLocale();function g(_){let{name:x}=_;const S={prepend:"prependAction",prependInner:"prependAction",append:"appendAction",appendInner:"appendAction",clear:"clear"}[x],E=n[`onClick:${x}`],C=E&&S?r(`$vuetify.input.${S}`,n.label??""):void 0;return createVNode(VIcon,{icon:n[`${x}Icon`],"aria-label":C,onClick:E},null)}return{InputIcon:g}}const makeVMessagesProps=propsFactory({active:Boolean,color:String,messages:{type:[Array,String],default:()=>[]},...makeComponentProps(),...makeTransitionProps$1({transition:{component:VSlideYTransition,leaveAbsolute:!0,group:!0}})},"VMessages"),VMessages=genericComponent()({name:"VMessages",props:makeVMessagesProps(),setup(n,r){let{slots:g}=r;const _=computed(()=>wrapInArray(n.messages)),{textColorClasses:x,textColorStyles:S}=useTextColor(computed(()=>n.color));return useRender(()=>createVNode(MaybeTransition,{transition:n.transition,tag:"div",class:["v-messages",x.value,n.class],style:[S.value,n.style],role:"alert","aria-live":"polite"},{default:()=>[n.active&&_.value.map((E,C)=>createVNode("div",{class:"v-messages__message",key:`${C}-${_.value}`},[g.message?g.message({message:E}):E]))]})),{}}}),makeFocusProps=propsFactory({focused:Boolean,"onUpdate:focused":EventProp()},"focus");function useFocus(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const g=useProxiedModel(n,"focused"),_=computed(()=>({[`${r}--focused`]:g.value}));function x(){g.value=!0}function S(){g.value=!1}return{focusClasses:_,isFocused:g,focus:x,blur:S}}const FormKey=Symbol.for("vuetify:form");function useForm(n){const r=inject$1(FormKey,null);return{...r,isReadonly:computed(()=>!!(n?.readonly??r?.isReadonly.value)),isDisabled:computed(()=>!!(n?.disabled??r?.isDisabled.value))}}const makeValidationProps=propsFactory({disabled:{type:Boolean,default:null},error:Boolean,errorMessages:{type:[Array,String],default:()=>[]},maxErrors:{type:[Number,String],default:1},name:String,label:String,readonly:{type:Boolean,default:null},rules:{type:Array,default:()=>[]},modelValue:null,validateOn:String,validationValue:null,...makeFocusProps()},"validation");function useValidation(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName(),g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:getUid();const _=useProxiedModel(n,"modelValue"),x=computed(()=>n.validationValue===void 0?_.value:n.validationValue),S=useForm(n),E=ref$2([]),C=shallowRef(!0),T=computed(()=>!!(wrapInArray(_.value===""?null:_.value).length||wrapInArray(x.value===""?null:x.value).length)),R=computed(()=>n.errorMessages?.length?wrapInArray(n.errorMessages).concat(E.value).slice(0,Math.max(0,+n.maxErrors)):E.value),A=computed(()=>{let U=(n.validateOn??S.validateOn?.value)||"input";U==="lazy"&&(U="input lazy"),U==="eager"&&(U="input eager");const j=new Set(U?.split(" ")??[]);return{input:j.has("input"),blur:j.has("blur")||j.has("input")||j.has("invalid-input"),invalidInput:j.has("invalid-input"),lazy:j.has("lazy"),eager:j.has("eager")}}),I=computed(()=>n.error||n.errorMessages?.length?!1:n.rules.length?C.value?E.value.length||A.value.lazy?null:!0:!E.value.length:!0),B=shallowRef(!1),D=computed(()=>({[`${r}--error`]:I.value===!1,[`${r}--dirty`]:T.value,[`${r}--disabled`]:S.isDisabled.value,[`${r}--readonly`]:S.isReadonly.value})),N=getCurrentInstance("validation"),M=computed(()=>n.name??unref(g));onBeforeMount(()=>{S.register?.({id:M.value,vm:N,validate:F,reset:O,resetValidation:L})}),onBeforeUnmount(()=>{S.unregister?.(M.value)}),onMounted(async()=>{A.value.lazy||await F(!A.value.eager),S.update?.(M.value,I.value,R.value)}),useToggleScope(()=>A.value.input||A.value.invalidInput&&I.value===!1,()=>{watch(x,()=>{if(x.value!=null)F();else if(n.focused){const U=watch(()=>n.focused,j=>{j||F(),U()})}})}),useToggleScope(()=>A.value.blur,()=>{watch(()=>n.focused,U=>{U||F()})}),watch([I,R],()=>{S.update?.(M.value,I.value,R.value)});async function O(){_.value=null,await nextTick$1(),await L()}async function L(){C.value=!0,A.value.lazy?E.value=[]:await F(!A.value.eager)}async function F(){let U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;const j=[];B.value=!0;for(const z of n.rules){if(j.length>=+(n.maxErrors??1))break;const X=await(typeof z=="function"?z:()=>z)(x.value);if(X!==!0){if(X!==!1&&typeof X!="string"){console.warn(`${X} is not a valid value. Rule functions must return boolean true or a string.`);continue}j.push(X||"")}}return E.value=j,B.value=!1,C.value=U,E.value}return{errorMessages:R,isDirty:T,isDisabled:S.isDisabled,isReadonly:S.isReadonly,isPristine:C,isValid:I,isValidating:B,reset:O,resetValidation:L,validate:F,validationClasses:D}}const makeVInputProps=propsFactory({id:String,appendIcon:IconValue,centerAffix:{type:Boolean,default:!0},prependIcon:IconValue,hideDetails:[Boolean,String],hideSpinButtons:Boolean,hint:String,persistentHint:Boolean,messages:{type:[Array,String],default:()=>[]},direction:{type:String,default:"horizontal",validator:n=>["horizontal","vertical"].includes(n)},"onClick:prepend":EventProp(),"onClick:append":EventProp(),...makeComponentProps(),...makeDensityProps(),...only(makeDimensionProps(),["maxWidth","minWidth","width"]),...makeThemeProps(),...makeValidationProps()},"VInput"),VInput=genericComponent()({name:"VInput",props:{...makeVInputProps()},emits:{"update:modelValue":n=>!0},setup(n,r){let{attrs:g,slots:_,emit:x}=r;const{densityClasses:S}=useDensity(n),{dimensionStyles:E}=useDimension(n),{themeClasses:C}=provideTheme(n),{rtlClasses:T}=useRtl(),{InputIcon:R}=useInputIcon(n),A=getUid(),I=computed(()=>n.id||`input-${A}`),B=computed(()=>`${I.value}-messages`),{errorMessages:D,isDirty:N,isDisabled:M,isReadonly:O,isPristine:L,isValid:F,isValidating:U,reset:j,resetValidation:z,validate:W,validationClasses:X}=useValidation(n,"v-input",I),ie=computed(()=>({id:I,messagesId:B,isDirty:N,isDisabled:M,isReadonly:O,isPristine:L,isValid:F,isValidating:U,reset:j,resetValidation:z,validate:W})),fe=computed(()=>n.errorMessages?.length||!L.value&&D.value.length?D.value:n.hint&&(n.persistentHint||n.focused)?n.hint:n.messages);return useRender(()=>{const xe=!!(_.prepend||n.prependIcon),we=!!(_.append||n.appendIcon),G=fe.value.length>0,J=!n.hideDetails||n.hideDetails==="auto"&&(G||!!_.details);return createVNode("div",{class:["v-input",`v-input--${n.direction}`,{"v-input--center-affix":n.centerAffix,"v-input--hide-spin-buttons":n.hideSpinButtons},S.value,C.value,T.value,X.value,n.class],style:[E.value,n.style]},[xe&&createVNode("div",{key:"prepend",class:"v-input__prepend"},[_.prepend?.(ie.value),n.prependIcon&&createVNode(R,{key:"prepend-icon",name:"prepend"},null)]),_.default&&createVNode("div",{class:"v-input__control"},[_.default?.(ie.value)]),we&&createVNode("div",{key:"append",class:"v-input__append"},[n.appendIcon&&createVNode(R,{key:"append-icon",name:"append"},null),_.append?.(ie.value)]),J&&createVNode("div",{class:"v-input__details"},[createVNode(VMessages,{id:B.value,active:G,messages:fe.value},{message:_.message}),_.details?.(ie.value)])])}),{reset:j,resetValidation:z,validate:W,isValid:F,errorMessages:D}}}),makeVCheckboxProps=propsFactory({...makeVInputProps(),...omit(makeVCheckboxBtnProps(),["inline"])},"VCheckbox"),VCheckbox=genericComponent()({name:"VCheckbox",inheritAttrs:!1,props:makeVCheckboxProps(),emits:{"update:modelValue":n=>!0,"update:focused":n=>!0},setup(n,r){let{attrs:g,slots:_}=r;const x=useProxiedModel(n,"modelValue"),{isFocused:S,focus:E,blur:C}=useFocus(n),T=getUid(),R=computed(()=>n.id||`checkbox-${T}`);return useRender(()=>{const[A,I]=filterInputAttrs(g),B=VInput.filterProps(n),D=VCheckboxBtn.filterProps(n);return createVNode(VInput,mergeProps({class:["v-checkbox",n.class]},A,B,{modelValue:x.value,"onUpdate:modelValue":N=>x.value=N,id:R.value,focused:S.value,style:n.style}),{..._,default:N=>{let{id:M,messagesId:O,isDisabled:L,isReadonly:F,isValid:U}=N;return createVNode(VCheckboxBtn,mergeProps(D,{id:M.value,"aria-describedby":O.value,disabled:L.value,readonly:F.value},I,{error:U.value===!1,modelValue:x.value,"onUpdate:modelValue":j=>x.value=j,onFocus:E,onBlur:C}),_)}})}),{}}}),makeVMenuProps=propsFactory({id:String,submenu:Boolean,...omit(makeVOverlayProps({closeDelay:250,closeOnContentClick:!0,locationStrategy:"connected",location:void 0,openDelay:300,scrim:!1,scrollStrategy:"reposition",transition:{component:VDialogTransition}}),["absolute"])},"VMenu"),VMenu=genericComponent()({name:"VMenu",props:makeVMenuProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const _=useProxiedModel(n,"modelValue"),{scopeId:x}=useScopeId(),{isRtl:S}=useRtl(),E=getUid(),C=computed(()=>n.id||`v-menu-${E}`),T=ref$2(),R=inject$1(VMenuSymbol,null),A=shallowRef(new Set);provide(VMenuSymbol,{register(){A.value.add(E)},unregister(){A.value.delete(E)},closeParents(O){setTimeout(()=>{!A.value.size&&!n.persistent&&(O==null||T.value?.contentEl&&!isClickInsideElement(O,T.value.contentEl))&&(_.value=!1,R?.closeParents())},40)}}),onBeforeUnmount(()=>{R?.unregister(),document.removeEventListener("focusin",I)}),onDeactivated(()=>_.value=!1);async function I(O){const L=O.relatedTarget,F=O.target;await nextTick$1(),_.value&&L!==F&&T.value?.contentEl&&T.value?.globalTop&&![document,T.value.contentEl].includes(F)&&!T.value.contentEl.contains(F)&&focusableChildren(T.value.contentEl)[0]?.focus()}watch(_,O=>{O?(R?.register(),IN_BROWSER&&document.addEventListener("focusin",I,{once:!0})):(R?.unregister(),IN_BROWSER&&document.removeEventListener("focusin",I))},{immediate:!0});function B(O){R?.closeParents(O)}function D(O){if(!n.disabled)if(O.key==="Tab"||O.key==="Enter"&&!n.closeOnContentClick){if(O.key==="Enter"&&(O.target instanceof HTMLTextAreaElement||O.target instanceof HTMLInputElement&&O.target.closest("form")))return;O.key==="Enter"&&O.preventDefault(),getNextElement(focusableChildren(T.value?.contentEl,!1),O.shiftKey?"prev":"next",F=>F.tabIndex>=0)||(_.value=!1,T.value?.activatorEl?.focus())}else n.submenu&&O.key===(S.value?"ArrowRight":"ArrowLeft")&&(_.value=!1,T.value?.activatorEl?.focus())}function N(O){if(n.disabled)return;const L=T.value?.contentEl;L&&_.value?O.key==="ArrowDown"?(O.preventDefault(),O.stopImmediatePropagation(),focusChild(L,"next")):O.key==="ArrowUp"?(O.preventDefault(),O.stopImmediatePropagation(),focusChild(L,"prev")):n.submenu&&(O.key===(S.value?"ArrowRight":"ArrowLeft")?_.value=!1:O.key===(S.value?"ArrowLeft":"ArrowRight")&&(O.preventDefault(),focusChild(L,"first"))):(n.submenu?O.key===(S.value?"ArrowLeft":"ArrowRight"):["ArrowDown","ArrowUp"].includes(O.key))&&(_.value=!0,O.preventDefault(),setTimeout(()=>setTimeout(()=>N(O))))}const M=computed(()=>mergeProps({"aria-haspopup":"menu","aria-expanded":String(_.value),"aria-owns":C.value,onKeydown:N},n.activatorProps));return useRender(()=>{const O=VOverlay.filterProps(n);return createVNode(VOverlay,mergeProps({ref:T,id:C.value,class:["v-menu",n.class],style:n.style},O,{modelValue:_.value,"onUpdate:modelValue":L=>_.value=L,absolute:!0,activatorProps:M.value,location:n.location??(n.submenu?"end":"bottom"),"onClick:outside":B,onKeydown:D},x),{activator:g.activator,default:function(){for(var L=arguments.length,F=new Array(L),U=0;U<L;U++)F[U]=arguments[U];return createVNode(VDefaultsProvider,{root:"VMenu"},{default:()=>[g.default?.(...F)]})}})}),forwardRefs({id:C,ΨopenChildren:A},T)}}),makeVCounterProps=propsFactory({active:Boolean,disabled:Boolean,max:[Number,String],value:{type:[Number,String],default:0},...makeComponentProps(),...makeTransitionProps$1({transition:{component:VSlideYTransition}})},"VCounter"),VCounter=genericComponent()({name:"VCounter",functional:!0,props:makeVCounterProps(),setup(n,r){let{slots:g}=r;const _=computed(()=>n.max?`${n.value} / ${n.max}`:String(n.value));return useRender(()=>createVNode(MaybeTransition,{transition:n.transition},{default:()=>[withDirectives(createVNode("div",{class:["v-counter",{"text-error":n.max&&!n.disabled&&parseFloat(n.value)>parseFloat(n.max)},n.class],style:n.style},[g.default?g.default({counter:_.value,max:n.max,value:n.value}):_.value]),[[vShow,n.active]])]})),{}}}),makeVFieldLabelProps=propsFactory({floating:Boolean,...makeComponentProps()},"VFieldLabel"),VFieldLabel=genericComponent()({name:"VFieldLabel",props:makeVFieldLabelProps(),setup(n,r){let{slots:g}=r;return useRender(()=>createVNode(VLabel,{class:["v-field-label",{"v-field-label--floating":n.floating},n.class],style:n.style,"aria-hidden":n.floating||void 0},g)),{}}}),allowedVariants=["underlined","outlined","filled","solo","solo-inverted","solo-filled","plain"],makeVFieldProps=propsFactory({appendInnerIcon:IconValue,bgColor:String,clearable:Boolean,clearIcon:{type:IconValue,default:"$clear"},active:Boolean,centerAffix:{type:Boolean,default:void 0},color:String,baseColor:String,dirty:Boolean,disabled:{type:Boolean,default:null},error:Boolean,flat:Boolean,label:String,persistentClear:Boolean,prependInnerIcon:IconValue,reverse:Boolean,singleLine:Boolean,variant:{type:String,default:"filled",validator:n=>allowedVariants.includes(n)},"onClick:clear":EventProp(),"onClick:appendInner":EventProp(),"onClick:prependInner":EventProp(),...makeComponentProps(),...makeLoaderProps(),...makeRoundedProps(),...makeThemeProps()},"VField"),VField=genericComponent()({name:"VField",inheritAttrs:!1,props:{id:String,...makeFocusProps(),...makeVFieldProps()},emits:{"update:focused":n=>!0,"update:modelValue":n=>!0},setup(n,r){let{attrs:g,emit:_,slots:x}=r;const{themeClasses:S}=provideTheme(n),{loaderClasses:E}=useLoader(n),{focusClasses:C,isFocused:T,focus:R,blur:A}=useFocus(n),{InputIcon:I}=useInputIcon(n),{roundedClasses:B}=useRounded(n),{rtlClasses:D}=useRtl(),N=computed(()=>n.dirty||n.active),M=computed(()=>!n.singleLine&&!!(n.label||x.label)),O=getUid(),L=computed(()=>n.id||`input-${O}`),F=computed(()=>`${L.value}-messages`),U=ref$2(),j=ref$2(),z=ref$2(),W=computed(()=>["plain","underlined"].includes(n.variant)),{backgroundColorClasses:X,backgroundColorStyles:ie}=useBackgroundColor(toRef(n,"bgColor")),{textColorClasses:fe,textColorStyles:xe}=useTextColor(computed(()=>n.error||n.disabled?void 0:N.value&&T.value?n.color:n.baseColor));watch(N,q=>{if(M.value){const H=U.value.$el,ve=j.value.$el;requestAnimationFrame(()=>{const Z=nullifyTransforms(H),ce=ve.getBoundingClientRect(),ue=ce.x-Z.x,se=ce.y-Z.y-(Z.height/2-ce.height/2),te=ce.width/.75,Y=Math.abs(te-Z.width)>1?{maxWidth:convertToUnit(te)}:void 0,be=getComputedStyle(H),ye=getComputedStyle(ve),Ie=parseFloat(be.transitionDuration)*1e3||150,ke=parseFloat(ye.getPropertyValue("--v-field-label-scale")),Ce=ye.getPropertyValue("color");H.style.visibility="visible",ve.style.visibility="hidden",animate(H,{transform:`translate(${ue}px, ${se}px) scale(${ke})`,color:Ce,...Y},{duration:Ie,easing:standardEasing,direction:q?"normal":"reverse"}).finished.then(()=>{H.style.removeProperty("visibility"),ve.style.removeProperty("visibility")})})}},{flush:"post"});const we=computed(()=>({isActive:N,isFocused:T,controlRef:z,blur:A,focus:R}));function G(q){q.target!==document.activeElement&&q.preventDefault()}function J(q){q.key!=="Enter"&&q.key!==" "||(q.preventDefault(),q.stopPropagation(),n["onClick:clear"]?.(new MouseEvent("click")))}return useRender(()=>{const q=n.variant==="outlined",H=!!(x["prepend-inner"]||n.prependInnerIcon),ve=!!(n.clearable||x.clear)&&!n.disabled,Z=!!(x["append-inner"]||n.appendInnerIcon||ve),ce=()=>x.label?x.label({...we.value,label:n.label,props:{for:L.value}}):n.label;return createVNode("div",mergeProps({class:["v-field",{"v-field--active":N.value,"v-field--appended":Z,"v-field--center-affix":n.centerAffix??!W.value,"v-field--disabled":n.disabled,"v-field--dirty":n.dirty,"v-field--error":n.error,"v-field--flat":n.flat,"v-field--has-background":!!n.bgColor,"v-field--persistent-clear":n.persistentClear,"v-field--prepended":H,"v-field--reverse":n.reverse,"v-field--single-line":n.singleLine,"v-field--no-label":!ce(),[`v-field--variant-${n.variant}`]:!0},S.value,X.value,C.value,E.value,B.value,D.value,n.class],style:[ie.value,n.style],onClick:G},g),[createVNode("div",{class:"v-field__overlay"},null),createVNode(LoaderSlot,{name:"v-field",active:!!n.loading,color:n.error?"error":typeof n.loading=="string"?n.loading:n.color},{default:x.loader}),H&&createVNode("div",{key:"prepend",class:"v-field__prepend-inner"},[n.prependInnerIcon&&createVNode(I,{key:"prepend-icon",name:"prependInner"},null),x["prepend-inner"]?.(we.value)]),createVNode("div",{class:"v-field__field","data-no-activator":""},[["filled","solo","solo-inverted","solo-filled"].includes(n.variant)&&M.value&&createVNode(VFieldLabel,{key:"floating-label",ref:j,class:[fe.value],floating:!0,for:L.value,style:xe.value},{default:()=>[ce()]}),M.value&&createVNode(VFieldLabel,{key:"label",ref:U,for:L.value},{default:()=>[ce()]}),x.default?.({...we.value,props:{id:L.value,class:"v-field__input","aria-describedby":F.value},focus:R,blur:A})]),ve&&createVNode(VExpandXTransition,{key:"clear"},{default:()=>[withDirectives(createVNode("div",{class:"v-field__clearable",onMousedown:ue=>{ue.preventDefault(),ue.stopPropagation()}},[createVNode(VDefaultsProvider,{defaults:{VIcon:{icon:n.clearIcon}}},{default:()=>[x.clear?x.clear({...we.value,props:{onKeydown:J,onFocus:R,onBlur:A,onClick:n["onClick:clear"]}}):createVNode(I,{name:"clear",onKeydown:J,onFocus:R,onBlur:A},null)]})]),[[vShow,n.dirty]])]}),Z&&createVNode("div",{key:"append",class:"v-field__append-inner"},[x["append-inner"]?.(we.value),n.appendInnerIcon&&createVNode(I,{key:"append-icon",name:"appendInner"},null)]),createVNode("div",{class:["v-field__outline",fe.value],style:xe.value},[q&&createVNode(Fragment,null,[createVNode("div",{class:"v-field__outline__start"},null),M.value&&createVNode("div",{class:"v-field__outline__notch"},[createVNode(VFieldLabel,{ref:j,floating:!0,for:L.value},{default:()=>[ce()]})]),createVNode("div",{class:"v-field__outline__end"},null)]),W.value&&M.value&&createVNode(VFieldLabel,{ref:j,floating:!0,for:L.value},{default:()=>[ce()]})])])}),{controlRef:z}}});function filterFieldProps(n){const r=Object.keys(VField.props).filter(g=>!isOn(g)&&g!=="class"&&g!=="style");return pick(n,r)}const activeTypes=["color","file","time","date","datetime-local","week","month"],makeVTextFieldProps=propsFactory({autofocus:Boolean,counter:[Boolean,Number,String],counterValue:[Number,Function],prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,suffix:String,role:String,type:{type:String,default:"text"},modelModifiers:Object,...makeVInputProps(),...makeVFieldProps()},"VTextField"),VTextField=genericComponent()({name:"VTextField",directives:{Intersect},inheritAttrs:!1,props:makeVTextFieldProps(),emits:{"click:control":n=>!0,"mousedown:control":n=>!0,"update:focused":n=>!0,"update:modelValue":n=>!0},setup(n,r){let{attrs:g,emit:_,slots:x}=r;const S=useProxiedModel(n,"modelValue"),{isFocused:E,focus:C,blur:T}=useFocus(n),R=computed(()=>typeof n.counterValue=="function"?n.counterValue(S.value):typeof n.counterValue=="number"?n.counterValue:(S.value??"").toString().length),A=computed(()=>{if(g.maxlength)return g.maxlength;if(!(!n.counter||typeof n.counter!="number"&&typeof n.counter!="string"))return n.counter}),I=computed(()=>["plain","underlined"].includes(n.variant));function B(W,X){!n.autofocus||!W||X[0].target?.focus?.()}const D=ref$2(),N=ref$2(),M=ref$2(),O=computed(()=>activeTypes.includes(n.type)||n.persistentPlaceholder||E.value||n.active);function L(){M.value!==document.activeElement&&M.value?.focus(),E.value||C()}function F(W){_("mousedown:control",W),W.target!==M.value&&(L(),W.preventDefault())}function U(W){L(),_("click:control",W)}function j(W){W.stopPropagation(),L(),nextTick$1(()=>{S.value=null,callEvent(n["onClick:clear"],W)})}function z(W){const X=W.target;if(S.value=X.value,n.modelModifiers?.trim&&["text","search","password","tel","url"].includes(n.type)){const ie=[X.selectionStart,X.selectionEnd];nextTick$1(()=>{X.selectionStart=ie[0],X.selectionEnd=ie[1]})}}return useRender(()=>{const W=!!(x.counter||n.counter!==!1&&n.counter!=null),X=!!(W||x.details),[ie,fe]=filterInputAttrs(g),{modelValue:xe,...we}=VInput.filterProps(n),G=filterFieldProps(n);return createVNode(VInput,mergeProps({ref:D,modelValue:S.value,"onUpdate:modelValue":J=>S.value=J,class:["v-text-field",{"v-text-field--prefixed":n.prefix,"v-text-field--suffixed":n.suffix,"v-input--plain-underlined":I.value},n.class],style:n.style},ie,we,{centerAffix:!I.value,focused:E.value}),{...x,default:J=>{let{id:q,isDisabled:H,isDirty:ve,isReadonly:Z,isValid:ce}=J;return createVNode(VField,mergeProps({ref:N,onMousedown:F,onClick:U,"onClick:clear":j,"onClick:prependInner":n["onClick:prependInner"],"onClick:appendInner":n["onClick:appendInner"],role:n.role},G,{id:q.value,active:O.value||ve.value,dirty:ve.value||n.dirty,disabled:H.value,focused:E.value,error:ce.value===!1}),{...x,default:ue=>{let{props:{class:se,...te}}=ue;const Y=withDirectives(createVNode("input",mergeProps({ref:M,value:S.value,onInput:z,autofocus:n.autofocus,readonly:Z.value,disabled:H.value,name:n.name,placeholder:n.placeholder,size:1,type:n.type,onFocus:L,onBlur:T},te,fe),null),[[resolveDirective("intersect"),{handler:B},null,{once:!0}]]);return createVNode(Fragment,null,[n.prefix&&createVNode("span",{class:"v-text-field__prefix"},[createVNode("span",{class:"v-text-field__prefix__text"},[n.prefix])]),x.default?createVNode("div",{class:se,"data-no-activator":""},[x.default(),Y]):cloneVNode(Y,{class:se}),n.suffix&&createVNode("span",{class:"v-text-field__suffix"},[createVNode("span",{class:"v-text-field__suffix__text"},[n.suffix])])])}})},details:X?J=>createVNode(Fragment,null,[x.details?.(J),W&&createVNode(Fragment,null,[createVNode("span",null,null),createVNode(VCounter,{active:n.persistentCounter||E.value,value:R.value,max:A.value,disabled:n.disabled},x.counter)])]):void 0})}),forwardRefs({},D,N,M)}}),makeVVirtualScrollItemProps=propsFactory({renderless:Boolean,...makeComponentProps()},"VVirtualScrollItem"),VVirtualScrollItem=genericComponent()({name:"VVirtualScrollItem",inheritAttrs:!1,props:makeVVirtualScrollItemProps(),emits:{"update:height":n=>!0},setup(n,r){let{attrs:g,emit:_,slots:x}=r;const{resizeRef:S,contentRect:E}=useResizeObserver(void 0,"border");watch(()=>E.value?.height,C=>{C!=null&&_("update:height",C)}),useRender(()=>n.renderless?createVNode(Fragment,null,[x.default?.({itemRef:S})]):createVNode("div",mergeProps({ref:S,class:["v-virtual-scroll__item",n.class],style:n.style},g),[x.default?.()]))}}),UP=-1,DOWN=1,BUFFER_PX=100,makeVirtualProps=propsFactory({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function useVirtual(n,r){const g=useDisplay(),_=shallowRef(0);watchEffect(()=>{_.value=parseFloat(n.itemHeight||0)});const x=shallowRef(0),S=shallowRef(Math.ceil((parseInt(n.height)||g.height.value)/(_.value||16))||1),E=shallowRef(0),C=shallowRef(0),T=ref$2(),R=ref$2();let A=0;const{resizeRef:I,contentRect:B}=useResizeObserver();watchEffect(()=>{I.value=T.value});const D=computed(()=>T.value===document.documentElement?g.height.value:B.value?.height||parseInt(n.height)||0),N=computed(()=>!!(T.value&&R.value&&D.value&&_.value));let M=Array.from({length:r.value.length}),O=Array.from({length:r.value.length});const L=shallowRef(0);let F=-1;function U(se){return M[se]||_.value}const j=debounce(()=>{const se=performance.now();O[0]=0;const te=r.value.length;for(let Y=1;Y<=te-1;Y++)O[Y]=(O[Y-1]||0)+U(Y-1);L.value=Math.max(L.value,performance.now()-se)},L),z=watch(N,se=>{se&&(z(),A=R.value.offsetTop,j.immediate(),ve(),~F&&nextTick$1(()=>{IN_BROWSER&&window.requestAnimationFrame(()=>{ce(F),F=-1})}))});onScopeDispose(()=>{j.clear()});function W(se,te){const Y=M[se],be=_.value;_.value=be?Math.min(_.value,te):te,(Y!==te||be!==_.value)&&(M[se]=te,j())}function X(se){return se=clamp(se,0,r.value.length-1),O[se]||0}function ie(se){return binaryClosest(O,se)}let fe=0,xe=0,we=0;watch(D,(se,te)=>{te&&(ve(),se<te&&requestAnimationFrame(()=>{xe=0,ve()}))});let G=-1;function J(){if(!T.value||!R.value)return;const se=T.value.scrollTop,te=performance.now();te-we>500?(xe=Math.sign(se-fe),A=R.value.offsetTop):xe=se-fe,fe=se,we=te,window.clearTimeout(G),G=window.setTimeout(q,500),ve()}function q(){!T.value||!R.value||(xe=0,we=0,window.clearTimeout(G),ve())}let H=-1;function ve(){cancelAnimationFrame(H),H=requestAnimationFrame(Z)}function Z(){if(!T.value||!D.value)return;const se=fe-A,te=Math.sign(xe),Y=Math.max(0,se-BUFFER_PX),be=clamp(ie(Y),0,r.value.length),ye=se+D.value+BUFFER_PX,Ie=clamp(ie(ye)+1,be+1,r.value.length);if((te!==UP||be<x.value)&&(te!==DOWN||Ie>S.value)){const ke=X(x.value)-X(be),Ce=X(Ie)-X(S.value);Math.max(ke,Ce)>BUFFER_PX?(x.value=be,S.value=Ie):(be<=0&&(x.value=be),Ie>=r.value.length&&(S.value=Ie))}E.value=X(x.value),C.value=X(r.value.length)-X(S.value)}function ce(se){const te=X(se);!T.value||se&&!te?F=se:T.value.scrollTop=te}const ue=computed(()=>r.value.slice(x.value,S.value).map((se,te)=>({raw:se,index:te+x.value,key:isObject(se)&&"value"in se?se.value:te+x.value})));return watch(r,()=>{M=Array.from({length:r.value.length}),O=Array.from({length:r.value.length}),j.immediate(),ve()},{deep:!0}),{calculateVisibleItems:ve,containerRef:T,markerRef:R,computedItems:ue,paddingTop:E,paddingBottom:C,scrollToIndex:ce,handleScroll:J,handleScrollend:q,handleItemResize:W}}function binaryClosest(n,r){let g=n.length-1,_=0,x=0,S=null,E=-1;if(n[g]<r)return g;for(;_<=g;)if(x=_+g>>1,S=n[x],S>r)g=x-1;else if(S<r)E=x,_=x+1;else return S===r?x:_;return E}const makeVVirtualScrollProps=propsFactory({items:{type:Array,default:()=>[]},renderless:Boolean,...makeVirtualProps(),...makeComponentProps(),...makeDimensionProps()},"VVirtualScroll"),VVirtualScroll=genericComponent()({name:"VVirtualScroll",props:makeVVirtualScrollProps(),setup(n,r){let{slots:g}=r;const _=getCurrentInstance("VVirtualScroll"),{dimensionStyles:x}=useDimension(n),{calculateVisibleItems:S,containerRef:E,markerRef:C,handleScroll:T,handleScrollend:R,handleItemResize:A,scrollToIndex:I,paddingTop:B,paddingBottom:D,computedItems:N}=useVirtual(n,toRef(n,"items"));return useToggleScope(()=>n.renderless,()=>{function M(){const L=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";E.value===document.documentElement?(document[L]("scroll",T,{passive:!0}),document[L]("scrollend",R)):(E.value?.[L]("scroll",T,{passive:!0}),E.value?.[L]("scrollend",R))}onMounted(()=>{E.value=getScrollParent(_.vnode.el,!0),M(!0)}),onScopeDispose(M)}),useRender(()=>{const M=N.value.map(O=>createVNode(VVirtualScrollItem,{key:O.key,renderless:n.renderless,"onUpdate:height":L=>A(O.index,L)},{default:L=>g.default?.({item:O.raw,index:O.index,...L})}));return n.renderless?createVNode(Fragment,null,[createVNode("div",{ref:C,class:"v-virtual-scroll__spacer",style:{paddingTop:convertToUnit(B.value)}},null),M,createVNode("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:convertToUnit(D.value)}},null)]):createVNode("div",{ref:E,class:["v-virtual-scroll",n.class],onScrollPassive:T,onScrollend:R,style:[x.value,n.style]},[createVNode("div",{ref:C,class:"v-virtual-scroll__container",style:{paddingTop:convertToUnit(B.value),paddingBottom:convertToUnit(D.value)}},[M])])}),{calculateVisibleItems:S,scrollToIndex:I}}});function useScrolling(n,r){const g=shallowRef(!1);let _;function x(C){cancelAnimationFrame(_),g.value=!0,_=requestAnimationFrame(()=>{_=requestAnimationFrame(()=>{g.value=!1})})}async function S(){await new Promise(C=>requestAnimationFrame(C)),await new Promise(C=>requestAnimationFrame(C)),await new Promise(C=>requestAnimationFrame(C)),await new Promise(C=>{if(g.value){const T=watch(g,()=>{T(),C()})}else C()})}async function E(C){if(C.key==="Tab"&&r.value?.focus(),!["PageDown","PageUp","Home","End"].includes(C.key))return;const T=n.value?.$el;if(!T)return;(C.key==="Home"||C.key==="End")&&T.scrollTo({top:C.key==="Home"?0:T.scrollHeight,behavior:"smooth"}),await S();const R=T.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(C.key==="PageDown"||C.key==="Home"){const A=T.getBoundingClientRect().top;for(const I of R)if(I.getBoundingClientRect().top>=A){I.focus();break}}else{const A=T.getBoundingClientRect().bottom;for(const I of[...R].reverse())if(I.getBoundingClientRect().bottom<=A){I.focus();break}}}return{onScrollPassive:x,onKeydown:E}}const makeSelectProps=propsFactory({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:IconValue,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...makeItemsProps({itemChildren:!1})},"Select"),makeVSelectProps=propsFactory({...makeSelectProps(),...omit(makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:{component:VDialogTransition}})},"VSelect"),VSelect=genericComponent()({name:"VSelect",props:makeVSelectProps(),emits:{"update:focused":n=>!0,"update:modelValue":n=>!0,"update:menu":n=>!0},setup(n,r){let{slots:g}=r;const{t:_}=useLocale(),x=ref$2(),S=ref$2(),E=ref$2(),C=useProxiedModel(n,"menu"),T=computed({get:()=>C.value,set:ue=>{C.value&&!ue&&S.value?.ΨopenChildren.size||(C.value=ue)}}),{items:R,transformIn:A,transformOut:I}=useItems(n),B=useProxiedModel(n,"modelValue",[],ue=>A(ue===null?[null]:wrapInArray(ue)),ue=>{const se=I(ue);return n.multiple?se:se[0]??null}),D=computed(()=>typeof n.counterValue=="function"?n.counterValue(B.value):typeof n.counterValue=="number"?n.counterValue:B.value.length),N=useForm(n),M=computed(()=>B.value.map(ue=>ue.value)),O=shallowRef(!1),L=computed(()=>T.value?n.closeText:n.openText);let F="",U;const j=computed(()=>n.hideSelected?R.value.filter(ue=>!B.value.some(se=>n.valueComparator(se,ue))):R.value),z=computed(()=>n.hideNoData&&!j.value.length||N.isReadonly.value||N.isDisabled.value),W=computed(()=>({...n.menuProps,activatorProps:{...n.menuProps?.activatorProps||{},"aria-haspopup":"listbox"}})),X=ref$2(),ie=useScrolling(X,x);function fe(ue){n.openOnClear&&(T.value=!0)}function xe(){z.value||(T.value=!T.value)}function we(ue){checkPrintable(ue)&&G(ue)}function G(ue){if(!ue.key||N.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(ue.key)&&ue.preventDefault(),["Enter","ArrowDown"," "].includes(ue.key)&&(T.value=!0),["Escape","Tab"].includes(ue.key)&&(T.value=!1),ue.key==="Home"?X.value?.focus("first"):ue.key==="End"&&X.value?.focus("last");const se=1e3;if(n.multiple||!checkPrintable(ue))return;const te=performance.now();te-U>se&&(F=""),F+=ue.key.toLowerCase(),U=te;const Y=R.value.find(be=>be.title.toLowerCase().startsWith(F));if(Y!==void 0){B.value=[Y];const be=j.value.indexOf(Y);IN_BROWSER&&window.requestAnimationFrame(()=>{be>=0&&E.value?.scrollToIndex(be)})}}function J(ue){let se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!ue.props.disabled)if(n.multiple){const te=B.value.findIndex(be=>n.valueComparator(be.value,ue.value)),Y=se??!~te;if(~te){const be=Y?[...B.value,ue]:[...B.value];be.splice(te,1),B.value=be}else Y&&(B.value=[...B.value,ue])}else{const te=se!==!1;B.value=te?[ue]:[],nextTick$1(()=>{T.value=!1})}}function q(ue){X.value?.$el.contains(ue.relatedTarget)||(T.value=!1)}function H(){n.eager&&E.value?.calculateVisibleItems()}function ve(){O.value&&x.value?.focus()}function Z(ue){O.value=!0}function ce(ue){if(ue==null)B.value=[];else if(matchesSelector(x.value,":autofill")||matchesSelector(x.value,":-webkit-autofill")){const se=R.value.find(te=>te.title===ue);se&&J(se)}else x.value&&(x.value.value="")}return watch(T,()=>{if(!n.hideSelected&&T.value&&B.value.length){const ue=j.value.findIndex(se=>B.value.some(te=>n.valueComparator(te.value,se.value)));IN_BROWSER&&window.requestAnimationFrame(()=>{ue>=0&&E.value?.scrollToIndex(ue)})}}),watch(()=>n.items,(ue,se)=>{T.value||O.value&&!se.length&&ue.length&&(T.value=!0)}),useRender(()=>{const ue=!!(n.chips||g.chip),se=!!(!n.hideNoData||j.value.length||g["prepend-item"]||g["append-item"]||g["no-data"]),te=B.value.length>0,Y=VTextField.filterProps(n),be=te||!O.value&&n.label&&!n.persistentPlaceholder?void 0:n.placeholder;return createVNode(VTextField,mergeProps({ref:x},Y,{modelValue:B.value.map(ye=>ye.props.value).join(", "),"onUpdate:modelValue":ce,focused:O.value,"onUpdate:focused":ye=>O.value=ye,validationValue:B.externalValue,counterValue:D.value,dirty:te,class:["v-select",{"v-select--active-menu":T.value,"v-select--chips":!!n.chips,[`v-select--${n.multiple?"multiple":"single"}`]:!0,"v-select--selected":B.value.length,"v-select--selection-slot":!!g.selection},n.class],style:n.style,inputmode:"none",placeholder:be,"onClick:clear":fe,"onMousedown:control":xe,onBlur:q,onKeydown:G,"aria-label":_(L.value),title:_(L.value)}),{...g,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:S,modelValue:T.value,"onUpdate:modelValue":ye=>T.value=ye,activator:"parent",contentClass:"v-select__content",disabled:z.value,eager:n.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:n.transition,onAfterEnter:H,onAfterLeave:ve},W.value),{default:()=>[se&&createVNode(VList,mergeProps({ref:X,selected:M.value,selectStrategy:n.multiple?"independent":"single-independent",onMousedown:ye=>ye.preventDefault(),onKeydown:we,onFocusin:Z,tabindex:"-1","aria-live":"polite",color:n.itemColor??n.color},ie,n.listProps),{default:()=>[g["prepend-item"]?.(),!j.value.length&&!n.hideNoData&&(g["no-data"]?.()??createVNode(VListItem,{key:"no-data",title:_(n.noDataText)},null)),createVNode(VVirtualScroll,{ref:E,renderless:!0,items:j.value},{default:ye=>{let{item:Ie,index:ke,itemRef:Ce}=ye;const Ae=mergeProps(Ie.props,{ref:Ce,key:Ie.value,onClick:()=>J(Ie,null)});return g.item?.({item:Ie,index:ke,props:Ae})??createVNode(VListItem,mergeProps(Ae,{role:"option"}),{prepend:Ne=>{let{isSelected:We}=Ne;return createVNode(Fragment,null,[n.multiple&&!n.hideSelected?createVNode(VCheckboxBtn,{key:Ie.value,modelValue:We,ripple:!1,tabindex:"-1"},null):void 0,Ie.props.prependAvatar&&createVNode(VAvatar,{image:Ie.props.prependAvatar},null),Ie.props.prependIcon&&createVNode(VIcon,{icon:Ie.props.prependIcon},null)])}})}}),g["append-item"]?.()]})]}),B.value.map((ye,Ie)=>{function ke(We){We.stopPropagation(),We.preventDefault(),J(ye,!1)}const Ce={"onClick:close":ke,onKeydown(We){We.key!=="Enter"&&We.key!==" "||(We.preventDefault(),We.stopPropagation(),ke(We))},onMousedown(We){We.preventDefault(),We.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Ae=ue?!!g.chip:!!g.selection,Ne=Ae?ensureValidVNode(ue?g.chip({item:ye,index:Ie,props:Ce}):g.selection({item:ye,index:Ie})):void 0;if(!(Ae&&!Ne))return createVNode("div",{key:ye.value,class:"v-select__selection"},[ue?g.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:n.closableChips,size:"small",text:ye.title}}},{default:()=>[Ne]}):createVNode(VChip,mergeProps({key:"chip",closable:n.closableChips,size:"small",text:ye.title,disabled:ye.props.disabled},Ce),null):Ne??createVNode("span",{class:"v-select__selection-text"},[ye.title,n.multiple&&Ie<B.value.length-1&&createVNode("span",{class:"v-select__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var ye=arguments.length,Ie=new Array(ye),ke=0;ke<ye;ke++)Ie[ke]=arguments[ke];return createVNode(Fragment,null,[g["append-inner"]?.(...Ie),n.menuIcon?createVNode(VIcon,{class:"v-select__menu-icon",icon:n.menuIcon},null):void 0])}})}),forwardRefs({isFocused:O,menu:T,select:J},x)}}),_sfc_main$1t=defineComponent$1({__name:"GestionnaireTraductions",setup(n){const{mdAndUp:r}=useDisplay(),{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),x=கிளிமூக்கு(),S=ref$2(!1),E=computed(()=>[...new Set(I.value?.map(O=>O.பரிந்துரை.இலக்கு_மொழி))]),C=computed(()=>[...new Set(I.value?.map(O=>O.பரிந்துரை.சாபி))]),T=ref$2([]),R=ref$2([]),{résultats:A}=rechercher(async({f:O})=>await x.மொழிபெயர்ப்பு_பரிந்துரைகளை_கேள்ளு({செ:O})),I=computed(()=>{if(A.value)return A.value.filter(O=>{const{சாபி:L,இலக்கு_மொழி:F,தேதி:U}=O.பரிந்துரை;return!D.value?.find(j=>j.données.சாபி===L&&j.données.இலக்கு_மொழி===F&&U.getTime()>j.données.தேதி)})}),B=computed(()=>{const O=[];return I.value?.forEach(L=>{const F=O.find(U=>U.clef===L.பரிந்துரை.சாபி&&U.langue===L.பரிந்துரை.இலக்கு_மொழி);F?F.suggestions.push(L):O.push({clef:L.பரிந்துரை.சாபி,langue:L.பரிந்துரை.இலக்கு_மொழி,suggestions:[L]})}),O.filter(L=>(!T.value.length||T.value.includes(L.clef))&&(!R.value.length||R.value.includes(L.langue)))}),D=suivre(async({f:O})=>await x.கிளி.அங்கீகரிக்கப்பட்ட_உறுப்படிகளை_கேள்ளு({செ:O})),N=suivre(async({f:O})=>await x.மொழிபெயர்ப்புகளை_கேள்ளு({செ:O})),M=async()=>{const O=JSON.stringify(மொழிபெயர்ப்பு_அகராதியிலிருந்து_மரம்(N.value||{}),void 0,2);FileSaver_minExports.saveAs(new Blob([O],{type:"text/plain;charset=utf-8"}),"traducs.json")};return(O,L)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":L[4]||(L[4]=F=>S.value=F),"max-width":unref(r)?500:300},{activator:withCtx(({props:F})=>[renderSlot(O.$slots,"activator",normalizeProps(guardReactiveProps({props:F})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("kilimukku.gestionnaire.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:L[0]||(L[0]=F=>S.value=!1)})]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"auto"}},{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{class:"pb-0",cols:unref(r)?6:12},{default:withCtx(()=>[createVNode(VSelect,{modelValue:R.value,"onUpdate:modelValue":L[1]||(L[1]=F=>R.value=F),items:E.value,variant:"outlined",multiple:"",chips:"","closable-chips":""},null,8,["modelValue","items"])]),_:1},8,["cols"]),createVNode(VCol,{class:"pb-0",cols:unref(r)?6:12},{default:withCtx(()=>[createVNode(VSelect,{modelValue:T.value,"onUpdate:modelValue":L[2]||(L[2]=F=>T.value=F),items:C.value,variant:"outlined",multiple:"",chips:"","closable-chips":""},null,8,["modelValue","items"])]),_:1},8,["cols"])]),_:1}),createVNode(VList,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(B.value,F=>(openBlock(),createBlock(_sfc_main$1u,mergeProps({ref_for:!0},F,{key:F.clef+F.langue}),null,16))),128))]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VBtn,{"append-icon":"mdi-download",onClick:L[3]||(L[3]=()=>M())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("communs.télécharger")),1)]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),makeVBadgeProps=propsFactory({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:IconValue,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...makeComponentProps(),...makeLocationProps({location:"top end"}),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeTransitionProps$1({transition:"scale-rotate-transition"})},"VBadge"),VBadge=genericComponent()({name:"VBadge",inheritAttrs:!1,props:makeVBadgeProps(),setup(n,r){const{backgroundColorClasses:g,backgroundColorStyles:_}=useBackgroundColor(toRef(n,"color")),{roundedClasses:x}=useRounded(n),{t:S}=useLocale(),{textColorClasses:E,textColorStyles:C}=useTextColor(toRef(n,"textColor")),{themeClasses:T}=useTheme(),{locationStyles:R}=useLocation(n,!0,A=>(n.floating?n.dot?2:4:n.dot?8:12)+(["top","bottom"].includes(A)?+(n.offsetY??0):["left","right"].includes(A)?+(n.offsetX??0):0));return useRender(()=>{const A=Number(n.content),I=!n.max||isNaN(A)?n.content:A<=+n.max?A:`${n.max}+`,[B,D]=pickWithRest(r.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return createVNode(n.tag,mergeProps({class:["v-badge",{"v-badge--bordered":n.bordered,"v-badge--dot":n.dot,"v-badge--floating":n.floating,"v-badge--inline":n.inline},n.class]},D,{style:n.style}),{default:()=>[createVNode("div",{class:"v-badge__wrapper"},[r.slots.default?.(),createVNode(MaybeTransition,{transition:n.transition},{default:()=>[withDirectives(createVNode("span",mergeProps({class:["v-badge__badge",T.value,g.value,x.value,E.value],style:[_.value,C.value,n.inline?{}:R.value],"aria-atomic":"true","aria-label":S(n.label,A),"aria-live":"polite",role:"status"},B),[n.dot?void 0:r.slots.badge?r.slots.badge?.():n.icon?createVNode(VIcon,{icon:n.icon},null):I]),[[vShow,n.modelValue]])]})])]})}),{}}}),_sfc_main$1s=defineComponent$1({__name:"ItemMessageTraduction",props:{clef:{},actif:{type:Boolean},traductionApprouvee:{},traductionLangueSource:{},suggestions:{}},setup(n){const r=n,{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),{எண்ணை_வடிவூட்டு:x}=எண்களைப்_பயன்படுத்து(),S=computed(()=>r.suggestions.length),E=x(S);return(C,T)=>(openBlock(),createBlock(VListItem,{active:C.actif},{append:withCtx(()=>[C.traductionApprouvee?(openBlock(),createBlock(VIcon,{key:0,color:"primary",icon:"mdi-check"})):C.suggestions.length?(openBlock(),createBlock(VBadge,{key:1,content:unref(E),color:"secondary",location:"bottom end"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>T[0]||(T[0]=[createTextVNode("mdi-hand-pointing-up")])),_:1})]),_:1},8,["content"])):createCommentVNode("",!0)]),title:withCtx(()=>[createTextVNode(toDisplayString(C.traductionLangueSource||unref(_)("kilimukku.aucuneTraduction")),1)]),default:withCtx(()=>[createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(C.clef),1)]),_:1})]),_:1},8,["active"]))}}),_hoisted_1$x={key:0},_hoisted_2$k={class:"highlight-yellow"},_hoisted_3$b={key:1},TAILLE_MIN_TEXTE_AVANT=4,_sfc_main$1r=defineComponent$1({__name:"TexteSurlignéRecherche",props:{info:{},maxTaille:{}},setup(n){const r=n,{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),x=computed(()=>{const{texte:S,début:E,fin:C}=r.info,T=S.slice(E,C),R=S.slice(0,r.info.début),A=S.slice(C);if(r.maxTaille){if(r.maxTaille-S.length>=0)return{texteAvant:R,texteSurligné:T,texteAprès:A,coupéAvant:!1,coupéAprès:!1};{const B=Math.min(T.length,r.maxTaille-Math.min(TAILLE_MIN_TEXTE_AVANT,R.length)),D=Math.max(TAILLE_MIN_TEXTE_AVANT,r.maxTaille-B),N=Math.max(0,r.maxTaille-Math.min(D,R.length)-B),M=T.length>B||A.length>N;return{texteAvant:R.slice(Math.max(0,R.length-D),R.length),texteSurligné:T.slice(0,B),texteAprès:A.slice(0,N),coupéAvant:R.length>D,coupéAprès:M}}}else return{texteAvant:R,texteSurligné:T,texteAprès:A,coupéAvant:!1,coupéAprès:!1}});return(S,E)=>(openBlock(),createElementBlock("span",null,[x.value.coupéAvant?(openBlock(),createElementBlock("span",_hoisted_1$x,toDisplayString(unref(_)("communs.troisPetitsPoints")),1)):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString(x.value.texteAvant),1),createBaseVNode("span",_hoisted_2$k,toDisplayString(x.value.texteSurligné),1),createBaseVNode("span",null,toDisplayString(x.value.texteAprès),1),x.value.coupéAprès?(openBlock(),createElementBlock("span",_hoisted_3$b,toDisplayString(unref(_)("communs.troisPetitsPoints")),1)):createCommentVNode("",!0)]))}}),_sfc_main$1q=defineComponent$1({__name:"ItemSuggestionAutomatique",props:{clef:{},texte:{},traduc:{},corresp:{}},emits:["utiliser"],setup(n,{emit:r}){const g=r,_=()=>{g("utiliser")};return(x,S)=>(openBlock(),createBlock(VListItem,{lines:"three",onClick:_},{default:withCtx(()=>[createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(x.clef),1)]),_:1}),createVNode(VDivider,{class:"my-2"}),createVNode(_sfc_main$1r,{info:{type:"texte",texte:x.texte,début:x.corresp.début,fin:x.corresp.fin}},null,8,["info"]),createVNode(VDivider,{class:"my-2"}),createTextVNode(" "+toDisplayString(x.traduc),1)]),_:1}))}}),_sfc_main$1p=defineComponent$1({__name:"ItemSuggestionAutreLangue",props:{traduc:{},lng:{}},emits:["suggerer"],setup(n,{emit:r}){const g=n,_=r,{கிடைக்கும்_மொழிகளை_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{மொழியின்_பெயர்:S}=x(),E=S(computed(()=>g.lng));return(C,T)=>(openBlock(),createBlock(VListItem,{onClick:T[0]||(T[0]=()=>_("suggerer"))},{default:withCtx(()=>[createVNode(VListItemSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)),1)]),_:1}),createVNode(VDivider,{class:"my-1"}),createTextVNode(" "+toDisplayString(C.traduc),1)]),_:1}))}}),_sfc_main$1o=defineComponent$1({__name:"LienObjet",props:{id:{}},setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r(),_=n,x=ref$2(!1),S=async()=>{await copier(_.id),x.value=!0};return(E,C)=>(openBlock(),createBlock(VMenu,null,{activator:withCtx(({props:T})=>[createVNode(VTooltip,{text:unref(g)("lienObjet.indice")},{activator:withCtx(({props:R})=>[createVNode(VBtn,mergeProps(mergeProps(T,R),{icon:"mdi-link",size:"small",variant:"flat"}),null,16)]),_:2},1032,["text"])]),default:withCtx(()=>[createVNode(VList,{onClick:C[0]||(C[0]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[createVNode(VListItem,null,{title:withCtx(()=>[createTextVNode(toDisplayString(E.id),1)]),append:withCtx(()=>[createVNode(VBtn,{icon:x.value?"mdi-check":"mdi-content-copy",size:"small",variant:"flat",onClick:S},null,8,["icon"])]),_:1})]),_:1})]),_:1}))}}),obtIcôneContact=({type:n})=>{switch(n){case"siteInternet":return"mdi-open-in-new";case"whatsapp":return"mdi-whatsapp";case"téléphone":return"mdi-phone";case"télégramme":return"mdi-send";case"courriel":return"mdi-email-outline";default:return"mdi-account-outline"}},utiliserNomEtTypeDispositif=({idDispositif:n,idCompte:r})=>{const g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),S=suivre(g.suivreIdCompte),E=suivre(g.suivreNomDispositif,{idCompte:computed(()=>unref(r)||S.value),idDispositif:n}),C=computed(()=>{if(!E.value)return;const{nom:R,type:A}=E.value;return R||(A?x(nomGénériqueTypeDispositif(A)):void 0)}),T=computed(()=>E.value?.type);return{nomDispositif:C,typeDispositif:T}},nomGénériqueTypeDispositif=n=>{switch(n){case"téléphone":return"dispositifs.type.téléphone";case"navigateur":return"dispositifs.type.navigateur";case"tablette":return"dispositifs.type.tablette";case"ordinateur":return"dispositifs.type.ordinateur";case"serveur":return"dispositifs.type.serveur";default:return"dispositifs.type.autre"}},obtIcôneDispositifDeType=n=>n==="téléphone"?"mdi-cellphone":n==="navigateur"?"mdi-application-outline":n==="tablette"?"mdi-tablet":n==="ordinateur"?"mdi-monitor":n==="serveur"?"mdi-server":"mdi-monitor-cellphone",utiliserIlYA=({vuÀ:n,t:r,clefs:g={enLigne:"membres.vu.enLigne",àLinstant:"membres.vu.àLinstant",ilYAMinutes:"membres.vu.ilYAMinutes",ilYAHeures:"membres.vu.ilYAHeures",ilYAJours:"membres.vu.ilYAJours",ilYASemaines:"membres.vu.ilYASemaines",ilYAMois:"membres.vu.ilYAMois",ilYALongtemps:"membres.vu.ilYALongtemps"}})=>{const _=ref$2(new Date().getTime());let x;onMounted(()=>{x=window.setInterval(()=>{_.value=new Date().getTime()},1e3)}),onUnmounted(()=>{x&&clearInterval(x)});const S=computed(()=>n?_.value-n:void 0),E=computed(()=>S.value===void 0?{ilYA:0,texte:g.enLigne}:S.value<1e3*60*2?{ilYA:0,texte:g.àLinstant}:S.value<1e3*60*60?{ilYA:Math.floor(S.value/(1e3*60)),texte:g.ilYAMinutes}:S.value<1e3*60*60*24?{ilYA:Math.floor(S.value/(1e3*60*60)),texte:g.ilYAHeures}:S.value<1e3*60*60*24*7?{ilYA:Math.floor(S.value/(1e3*60*60*24)),texte:g.ilYAJours}:S.value<1e3*60*60*24*30?{ilYA:Math.floor(S.value/(1e3*60*60*24*7)),texte:g.ilYASemaines}:S.value<1e3*60*60*24*365.25?{ilYA:Math.floor(S.value/(1e3*60*60*24*30)),texte:g.ilYAMois}:{ilYA:0,texte:g.ilYALongtemps}),C=computed(()=>E.value.ilYA||0),T=computed(()=>E.value.ilYA?r(E.value.texte,{n:C.value},E.value.ilYA):r(E.value.texte));return{ilYA:computed(()=>E.value.ilYA),texte:T,ilYAMs:S}},_sfc_main$1n=defineComponent$1({__name:"ItemDispositif",props:{idDispositif:{},idCompte:{},vuA:{}},setup(n){const r=n,{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),x=utiliserConstellation(),{nomDispositif:S,typeDispositif:E}=utiliserNomEtTypeDispositif({idDispositif:r.idDispositif,idCompte:r.idCompte}),C=computed(()=>obtIcôneDispositifDeType(E.value)),{ilYAMs:T,texte:R}=utiliserIlYA({vuÀ:r.vuA,t:_}),A=ref$2();onMounted(async()=>{A.value=await x.obtIdDispositif()});const I=computed(()=>r.idDispositif===A.value?"dispositifs.ceDispositif":R.value),B=computed(()=>{if(T.value===void 0||T.value<=1e3*60*5)return"success";if(T.value<=1e3*60*30)return"warning"});return(D,N)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[B.value?(openBlock(),createBlock(VBadge,{key:0,dot:"",color:B.value,location:"bottom end"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString(C.value),1)]),_:1})]),_:1},8,["color"])):(openBlock(),createBlock(VIcon,{key:1},{default:withCtx(()=>[createTextVNode(toDisplayString(C.value),1)]),_:1}))]),_:1})]),title:withCtx(()=>[createTextVNode(toDisplayString(unref(S)||unref(_)("dispositifs.sansNom")),1)]),subtitle:withCtx(()=>[createTextVNode(toDisplayString(unref(_)(I.value)),1)]),append:withCtx(()=>[createVNode(_sfc_main$1o,{id:D.idDispositif},null,8,["id"])]),default:withCtx(()=>[N[0]||(N[0]=createBaseVNode("p",{class:"mt-4"},null,-1)),D.idCompte?(openBlock(),createBlock(_sfc_main$1v,{key:0,compte:D.idCompte},null,8,["compte"])):createCommentVNode("",!0),renderSlot(D.$slots,"default")]),_:3}))}}),_sfc_main$1m=defineComponent$1({__name:"JetonDispositif",props:{idDispositif:{},idCompte:{}},setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r(),_=n,{nomDispositif:x,typeDispositif:S}=utiliserNomEtTypeDispositif({idDispositif:_.idDispositif,idCompte:_.idCompte}),E=computed(()=>obtIcôneDispositifDeType(S.value));return(C,T)=>(openBlock(),createBlock(VChip,{"prepend-icon":E.value,variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(x)||unref(g)("dispositifs.sansNom")),1)]),_:1},8,["prepend-icon"]))}}),defaultFilter=(n,r,g)=>n==null||r==null?-1:n.toString().toLocaleLowerCase().indexOf(r.toString().toLocaleLowerCase()),makeFilterProps=propsFactory({customFilter:Function,customKeyFilter:Object,filterKeys:[Array,String],filterMode:{type:String,default:"intersection"},noFilter:Boolean},"filter");function filterItems(n,r,g){const _=[],x=g?.default??defaultFilter,S=g?.filterKeys?wrapInArray(g.filterKeys):!1,E=Object.keys(g?.customKeyFilter??{}).length;if(!n?.length)return _;e:for(let C=0;C<n.length;C++){const[T,R=T]=wrapInArray(n[C]),A={},I={};let B=-1;if((r||E>0)&&!g?.noFilter){if(typeof T=="object"){const M=S||Object.keys(R);for(const O of M){const L=getPropertyFromItem(R,O),F=g?.customKeyFilter?.[O];if(B=F?F(L,r,T):x(L,r,T),B!==-1&&B!==!1)F?A[O]=B:I[O]=B;else if(g?.filterMode==="every")continue e}}else B=x(T,r,T),B!==-1&&B!==!1&&(I.title=B);const D=Object.keys(I).length,N=Object.keys(A).length;if(!D&&!N||g?.filterMode==="union"&&N!==E&&!D||g?.filterMode==="intersection"&&(N!==E||!D))continue}_.push({index:C,matches:{...I,...A}})}return _}function useFilter(n,r,g,_){const x=shallowRef([]),S=shallowRef(new Map),E=computed(()=>_?.transform?unref(r).map(T=>[T,_.transform(T)]):unref(r));watchEffect(()=>{const T=typeof g=="function"?g():unref(g),R=typeof T!="string"&&typeof T!="number"?"":String(T),A=filterItems(E.value,R,{customKeyFilter:{...n.customKeyFilter,...unref(_?.customKeyFilter)},default:n.customFilter,filterKeys:n.filterKeys,filterMode:n.filterMode,noFilter:n.noFilter}),I=unref(r),B=[],D=new Map;A.forEach(N=>{let{index:M,matches:O}=N;const L=I[M];B.push(L),D.set(L.value,O)}),x.value=B,S.value=D});function C(T){return S.value.get(T.value)}return{filteredItems:x,filteredMatches:S,getMatches:C}}function highlightResult$1(n,r,g){if(r==null)return n;if(Array.isArray(r))throw new Error("Multiple matches is not implemented");return typeof r=="number"&&~r?createVNode(Fragment,null,[createVNode("span",{class:"v-autocomplete__unmask"},[n.substr(0,r)]),createVNode("span",{class:"v-autocomplete__mask"},[n.substr(r,g)]),createVNode("span",{class:"v-autocomplete__unmask"},[n.substr(r+g)])]):n}const makeVAutocompleteProps=propsFactory({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:Boolean,search:String,...makeFilterProps({filterKeys:["title"]}),...makeSelectProps(),...omit(makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:!1})},"VAutocomplete"),VAutocomplete=genericComponent()({name:"VAutocomplete",props:makeVAutocompleteProps(),emits:{"update:focused":n=>!0,"update:search":n=>!0,"update:modelValue":n=>!0,"update:menu":n=>!0},setup(n,r){let{slots:g}=r;const{t:_}=useLocale(),x=ref$2(),S=shallowRef(!1),E=shallowRef(!0),C=shallowRef(!1),T=ref$2(),R=ref$2(),A=useProxiedModel(n,"menu"),I=computed({get:()=>A.value,set:Be=>{A.value&&!Be&&T.value?.ΨopenChildren.size||(A.value=Be)}}),B=shallowRef(-1),D=computed(()=>x.value?.color),N=computed(()=>I.value?n.closeText:n.openText),{items:M,transformIn:O,transformOut:L}=useItems(n),{textColorClasses:F,textColorStyles:U}=useTextColor(D),j=useProxiedModel(n,"search",""),z=useProxiedModel(n,"modelValue",[],Be=>O(Be===null?[null]:wrapInArray(Be)),Be=>{const Se=L(Be);return n.multiple?Se:Se[0]??null}),W=computed(()=>typeof n.counterValue=="function"?n.counterValue(z.value):typeof n.counterValue=="number"?n.counterValue:z.value.length),X=useForm(n),{filteredItems:ie,getMatches:fe}=useFilter(n,M,()=>E.value?"":j.value),xe=computed(()=>n.hideSelected?ie.value.filter(Be=>!z.value.some(Se=>Se.value===Be.value)):ie.value),we=computed(()=>!!(n.chips||g.chip)),G=computed(()=>we.value||!!g.selection),J=computed(()=>z.value.map(Be=>Be.props.value)),q=computed(()=>(n.autoSelectFirst===!0||n.autoSelectFirst==="exact"&&j.value===xe.value[0]?.title)&&xe.value.length>0&&!E.value&&!C.value),H=computed(()=>n.hideNoData&&!xe.value.length||X.isReadonly.value||X.isDisabled.value),ve=ref$2(),Z=useScrolling(ve,x);function ce(Be){n.openOnClear&&(I.value=!0),j.value=""}function ue(){H.value||(I.value=!0)}function se(Be){H.value||(S.value&&(Be.preventDefault(),Be.stopPropagation()),I.value=!I.value)}function te(Be){Be.key!==" "&&checkPrintable(Be)&&x.value?.focus()}function Y(Be){if(X.isReadonly.value)return;const Se=x.value.selectionStart,$e=z.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(Be.key)&&Be.preventDefault(),["Enter","ArrowDown"].includes(Be.key)&&(I.value=!0),["Escape"].includes(Be.key)&&(I.value=!1),q.value&&["Enter","Tab"].includes(Be.key)&&!z.value.some(_e=>{let{value:Oe}=_e;return Oe===xe.value[0].value})&&We(xe.value[0]),Be.key==="ArrowDown"&&q.value&&ve.value?.focus("next"),["Backspace","Delete"].includes(Be.key)){if(!n.multiple&&G.value&&z.value.length>0&&!j.value)return We(z.value[0],!1);if(~B.value){Be.preventDefault();const _e=B.value;We(z.value[B.value],!1),B.value=_e>=$e-1?$e-2:_e}else Be.key==="Backspace"&&!j.value&&(B.value=$e-1);return}if(n.multiple)if(Be.key==="ArrowLeft"){if(B.value<0&&Se>0)return;const _e=B.value>-1?B.value-1:$e-1;z.value[_e]?B.value=_e:(B.value=-1,x.value.setSelectionRange(j.value?.length,j.value?.length))}else if(Be.key==="ArrowRight"){if(B.value<0)return;const _e=B.value+1;z.value[_e]?B.value=_e:(B.value=-1,x.value.setSelectionRange(0,0))}else~B.value&&checkPrintable(Be)&&(B.value=-1)}function be(Be){if(matchesSelector(x.value,":autofill")||matchesSelector(x.value,":-webkit-autofill")){const Se=M.value.find($e=>$e.title===Be.target.value);Se&&We(Se)}}function ye(){n.eager&&R.value?.calculateVisibleItems()}function Ie(){S.value&&(E.value=!0,x.value?.focus())}function ke(Be){S.value=!0,setTimeout(()=>{C.value=!0})}function Ce(Be){C.value=!1}function Ae(Be){(Be==null||Be===""&&!n.multiple&&!G.value)&&(z.value=[])}const Ne=shallowRef(!1);function We(Be){let Se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!Be||Be.props.disabled))if(n.multiple){const $e=z.value.findIndex(Oe=>n.valueComparator(Oe.value,Be.value)),_e=Se??!~$e;if(~$e){const Oe=_e?[...z.value,Be]:[...z.value];Oe.splice($e,1),z.value=Oe}else _e&&(z.value=[...z.value,Be]);n.clearOnSelect&&(j.value="")}else{const $e=Se!==!1;z.value=$e?[Be]:[],j.value=$e&&!G.value?Be.title:"",nextTick$1(()=>{I.value=!1,E.value=!0})}}return watch(S,(Be,Se)=>{Be!==Se&&(Be?(Ne.value=!0,j.value=n.multiple||G.value?"":String(z.value.at(-1)?.props.title??""),E.value=!0,nextTick$1(()=>Ne.value=!1)):(!n.multiple&&j.value==null&&(z.value=[]),I.value=!1,z.value.some($e=>{let{title:_e}=$e;return _e===j.value})||(j.value=""),B.value=-1))}),watch(j,Be=>{!S.value||Ne.value||(Be&&(I.value=!0),E.value=!Be)}),watch(I,()=>{if(!n.hideSelected&&I.value&&z.value.length){const Be=xe.value.findIndex(Se=>z.value.some($e=>Se.value===$e.value));IN_BROWSER&&window.requestAnimationFrame(()=>{Be>=0&&R.value?.scrollToIndex(Be)})}}),watch(()=>n.items,(Be,Se)=>{I.value||S.value&&!Se.length&&Be.length&&(I.value=!0)}),useRender(()=>{const Be=!!(!n.hideNoData||xe.value.length||g["prepend-item"]||g["append-item"]||g["no-data"]),Se=z.value.length>0,$e=VTextField.filterProps(n);return createVNode(VTextField,mergeProps({ref:x},$e,{modelValue:j.value,"onUpdate:modelValue":[_e=>j.value=_e,Ae],focused:S.value,"onUpdate:focused":_e=>S.value=_e,validationValue:z.externalValue,counterValue:W.value,dirty:Se,onChange:be,class:["v-autocomplete",`v-autocomplete--${n.multiple?"multiple":"single"}`,{"v-autocomplete--active-menu":I.value,"v-autocomplete--chips":!!n.chips,"v-autocomplete--selection-slot":!!G.value,"v-autocomplete--selecting-index":B.value>-1},n.class],style:n.style,readonly:X.isReadonly.value,placeholder:Se?void 0:n.placeholder,"onClick:clear":ce,"onMousedown:control":ue,onKeydown:Y}),{...g,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:T,modelValue:I.value,"onUpdate:modelValue":_e=>I.value=_e,activator:"parent",contentClass:"v-autocomplete__content",disabled:H.value,eager:n.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:n.transition,onAfterEnter:ye,onAfterLeave:Ie},n.menuProps),{default:()=>[Be&&createVNode(VList,mergeProps({ref:ve,selected:J.value,selectStrategy:n.multiple?"independent":"single-independent",onMousedown:_e=>_e.preventDefault(),onKeydown:te,onFocusin:ke,onFocusout:Ce,tabindex:"-1","aria-live":"polite",color:n.itemColor??n.color},Z,n.listProps),{default:()=>[g["prepend-item"]?.(),!xe.value.length&&!n.hideNoData&&(g["no-data"]?.()??createVNode(VListItem,{key:"no-data",title:_(n.noDataText)},null)),createVNode(VVirtualScroll,{ref:R,renderless:!0,items:xe.value},{default:_e=>{let{item:Oe,index:Ke,itemRef:Me}=_e;const Le=mergeProps(Oe.props,{ref:Me,key:Oe.value,active:q.value&&Ke===0?!0:void 0,onClick:()=>We(Oe,null)});return g.item?.({item:Oe,index:Ke,props:Le})??createVNode(VListItem,mergeProps(Le,{role:"option"}),{prepend:ze=>{let{isSelected:Je}=ze;return createVNode(Fragment,null,[n.multiple&&!n.hideSelected?createVNode(VCheckboxBtn,{key:Oe.value,modelValue:Je,ripple:!1,tabindex:"-1"},null):void 0,Oe.props.prependAvatar&&createVNode(VAvatar,{image:Oe.props.prependAvatar},null),Oe.props.prependIcon&&createVNode(VIcon,{icon:Oe.props.prependIcon},null)])},title:()=>E.value?Oe.title:highlightResult$1(Oe.title,fe(Oe)?.title,j.value?.length??0)})}}),g["append-item"]?.()]})]}),z.value.map((_e,Oe)=>{function Ke(Je){Je.stopPropagation(),Je.preventDefault(),We(_e,!1)}const Me={"onClick:close":Ke,onKeydown(Je){Je.key!=="Enter"&&Je.key!==" "||(Je.preventDefault(),Je.stopPropagation(),Ke(Je))},onMousedown(Je){Je.preventDefault(),Je.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Le=we.value?!!g.chip:!!g.selection,ze=Le?ensureValidVNode(we.value?g.chip({item:_e,index:Oe,props:Me}):g.selection({item:_e,index:Oe})):void 0;if(!(Le&&!ze))return createVNode("div",{key:_e.value,class:["v-autocomplete__selection",Oe===B.value&&["v-autocomplete__selection--selected",F.value]],style:Oe===B.value?U.value:{}},[we.value?g.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:n.closableChips,size:"small",text:_e.title}}},{default:()=>[ze]}):createVNode(VChip,mergeProps({key:"chip",closable:n.closableChips,size:"small",text:_e.title,disabled:_e.props.disabled},Me),null):ze??createVNode("span",{class:"v-autocomplete__selection-text"},[_e.title,n.multiple&&Oe<z.value.length-1&&createVNode("span",{class:"v-autocomplete__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var _e=arguments.length,Oe=new Array(_e),Ke=0;Ke<_e;Ke++)Oe[Ke]=arguments[Ke];return createVNode(Fragment,null,[g["append-inner"]?.(...Oe),n.menuIcon?createVNode(VIcon,{class:"v-autocomplete__menu-icon",icon:n.menuIcon,onMousedown:se,onClick:noop$2,"aria-label":_(N.value),title:_(N.value),tabindex:"-1"},null):void 0])}})}),forwardRefs({isFocused:S,isPristine:E,menu:I,search:j,filteredItems:ie,select:We},x)}}),makeVRadioProps=propsFactory({...makeVSelectionControlProps({falseIcon:"$radioOff",trueIcon:"$radioOn"})},"VRadio"),VRadio=genericComponent()({name:"VRadio",props:makeVRadioProps(),setup(n,r){let{slots:g}=r;return useRender(()=>{const _=VSelectionControl.filterProps(n);return createVNode(VSelectionControl,mergeProps(_,{class:["v-radio",n.class],style:n.style,type:"radio"}),g)}),{}}}),makeVRadioGroupProps=propsFactory({height:{type:[Number,String],default:"auto"},...makeVInputProps(),...omit(makeSelectionControlGroupProps(),["multiple"]),trueIcon:{type:IconValue,default:"$radioOn"},falseIcon:{type:IconValue,default:"$radioOff"},type:{type:String,default:"radio"}},"VRadioGroup"),VRadioGroup=genericComponent()({name:"VRadioGroup",inheritAttrs:!1,props:makeVRadioGroupProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{attrs:g,slots:_}=r;const x=getUid(),S=computed(()=>n.id||`radio-group-${x}`),E=useProxiedModel(n,"modelValue");return useRender(()=>{const[C,T]=filterInputAttrs(g),R=VInput.filterProps(n),A=VSelectionControl.filterProps(n),I=_.label?_.label({label:n.label,props:{for:S.value}}):n.label;return createVNode(VInput,mergeProps({class:["v-radio-group",n.class],style:n.style},C,R,{modelValue:E.value,"onUpdate:modelValue":B=>E.value=B,id:S.value}),{..._,default:B=>{let{id:D,messagesId:N,isDisabled:M,isReadonly:O}=B;return createVNode(Fragment,null,[I&&createVNode(VLabel,{id:D.value},{default:()=>[I]}),createVNode(VSelectionControlGroup,mergeProps(A,{id:D.value,"aria-describedby":N.value,defaultsTarget:"VRadio",trueIcon:n.trueIcon,falseIcon:n.falseIcon,type:n.type,disabled:M.value,readonly:O.value,"aria-labelledby":I?D.value:void 0,multiple:!1},T,{modelValue:E.value,"onUpdate:modelValue":L=>E.value=L}),_)])}})}),{}}}),makeVSwitchProps=propsFactory({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...makeVInputProps(),...makeVSelectionControlProps()},"VSwitch"),VSwitch=genericComponent()({name:"VSwitch",inheritAttrs:!1,props:makeVSwitchProps(),emits:{"update:focused":n=>!0,"update:modelValue":n=>!0,"update:indeterminate":n=>!0},setup(n,r){let{attrs:g,slots:_}=r;const x=useProxiedModel(n,"indeterminate"),S=useProxiedModel(n,"modelValue"),{loaderClasses:E}=useLoader(n),{isFocused:C,focus:T,blur:R}=useFocus(n),A=ref$2(),I=IN_BROWSER&&window.matchMedia("(forced-colors: active)").matches,B=computed(()=>typeof n.loading=="string"&&n.loading!==""?n.loading:n.color),D=getUid(),N=computed(()=>n.id||`switch-${D}`);function M(){x.value&&(x.value=!1)}function O(L){L.stopPropagation(),L.preventDefault(),A.value?.input?.click()}return useRender(()=>{const[L,F]=filterInputAttrs(g),U=VInput.filterProps(n),j=VSelectionControl.filterProps(n);return createVNode(VInput,mergeProps({class:["v-switch",{"v-switch--flat":n.flat},{"v-switch--inset":n.inset},{"v-switch--indeterminate":x.value},E.value,n.class]},L,U,{modelValue:S.value,"onUpdate:modelValue":z=>S.value=z,id:N.value,focused:C.value,style:n.style}),{..._,default:z=>{let{id:W,messagesId:X,isDisabled:ie,isReadonly:fe,isValid:xe}=z;const we={model:S,isValid:xe};return createVNode(VSelectionControl,mergeProps({ref:A},j,{modelValue:S.value,"onUpdate:modelValue":[G=>S.value=G,M],id:W.value,"aria-describedby":X.value,type:"checkbox","aria-checked":x.value?"mixed":void 0,disabled:ie.value,readonly:fe.value,onFocus:T,onBlur:R},F),{..._,default:G=>{let{backgroundColorClasses:J,backgroundColorStyles:q}=G;return createVNode("div",{class:["v-switch__track",I?void 0:J.value],style:q.value,onClick:O},[_["track-true"]&&createVNode("div",{key:"prepend",class:"v-switch__track-true"},[_["track-true"](we)]),_["track-false"]&&createVNode("div",{key:"append",class:"v-switch__track-false"},[_["track-false"](we)])])},input:G=>{let{inputNode:J,icon:q,backgroundColorClasses:H,backgroundColorStyles:ve}=G;return createVNode(Fragment,null,[J,createVNode("div",{class:["v-switch__thumb",{"v-switch__thumb--filled":q||n.loading},n.inset||I?void 0:H.value],style:n.inset?void 0:ve.value},[_.thumb?createVNode(VDefaultsProvider,{defaults:{VIcon:{icon:q,size:"x-small"}}},{default:()=>[_.thumb({...we,icon:q})]}):createVNode(VScaleTransition,null,{default:()=>[n.loading?createVNode(LoaderSlot,{name:"v-switch",active:!0,color:xe.value===!1?void 0:B.value},{default:Z=>_.loader?_.loader(Z):createVNode(VProgressCircular,{active:Z.isActive,color:Z.color,indeterminate:!0,size:"16",width:"2"},null)}):q&&createVNode(VIcon,{key:String(q),icon:q,size:"x-small"},null)]})])])}})}})}),{}}}),_hoisted_1$w={class:"font-weight-bold"},_hoisted_2$j={class:"mb-0 text-h6"},_hoisted_3$a={class:"font-weight-bold"},_hoisted_4$7={key:0},_hoisted_5$5={class:"mb-0 text-h6"},_hoisted_6$5={class:"font-weight-bold"},_sfc_main$1l=defineComponent$1({__name:"CarteÉpingler",props:{id:{type:String,required:!0},optionFichiers:{type:Boolean,default:!0}},setup(n){const r=n,g=utiliserConstellation(),{mdAndUp:_}=useDisplay(),{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),E=ref$2(!1),C=ref$2(!1),T=ref$2("TOUS"),R=ref$2("INSTALLÉ"),A=ref$2([]),I=ref$2([]),B=[{titre:S("épingler.aucun"),sousTitre:S("épingler.indiceAucun"),icône:"mdi-cancel",valeur:"AUCUN"},{titre:S("épingler.tous"),sousTitre:S("épingler.indiceTous"),icône:"mdi-devices",valeur:"TOUS"},{titre:S("épingler.installé"),sousTitre:S("épingler.indiceInstallé"),icône:"mdi-monitor",valeur:"INSTALLÉ"},{titre:S("épingler.dispositifsSpécifiques"),sousTitre:S("épingler.indiceDispositifsSpécifiques"),icône:"mdi-monitor-cellphone-star",valeur:"SPÉCIFIQUES"}],D=suivre(g.suivreDispositifs),N=suivre(g.favoris.suivreÉtatFavori,{idObjet:r.id});watch(N,()=>{N.value?typeof N.value.base=="string"&&["TOUS","INSTALLÉ","AUCUN"].includes(N.value.base)?T.value=N.value.base:(T.value="SPÉCIFIQUES",A.value=typeof N.value.base=="string"?[N.value.base]:N.value.base):(T.value="AUCUN",R.value="INSTALLÉ",A.value=[],I.value=[])});const M=ref$2(T.value!=="AUCUN");watchEffect(()=>{M.value?(T.value="TOUS",R.value="INSTALLÉ"):(T.value="AUCUN",R.value="AUCUN")});const O=computed(()=>{if(T.value!=="AUCUN")return T.value==="SPÉCIFIQUES"?A.value:T.value}),L=computed(()=>{if(R.value!=="AUCUN")return R.value==="SPÉCIFIQUES"?I.value:R.value}),F=computed(()=>N.value?O.value!==N.value.base:T.value!=="AUCUN"),U=computed(()=>{const fe=T.value==="SPÉCIFIQUES"?!!A.value.length:!0,xe=R.value==="SPÉCIFIQUES"?!!I.value.length:!0;return fe&&xe&&F.value}),j=computed(()=>{if(!N.value)return!0;const{base:fe}=N.value;return Array.isArray(fe)?isEqual$1(new Set(fe),new Set(A.value)):fe!==T.value}),z=ref$2(!1),W=async()=>{z.value=!0,O.value?(r.id,O.value,L.value&&L.value):await X(),ie()},X=async()=>{await g.favoris.désépinglerFavori({idObjet:r.id})},ie=()=>{E.value=!1,z.value=!1};return(fe,xe)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":xe[7]||(xe[7]=we=>E.value=we),"max-width":unref(_)?500:300},{activator:withCtx(({props:we})=>[renderSlot(fe.$slots,"activator",normalizeProps(guardReactiveProps({props:we})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("épingler.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:ie})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VSwitch,{modelValue:M.value,"onUpdate:modelValue":xe[0]||(xe[0]=we=>M.value=we),color:"primary",label:M.value?unref(S)("épingler.épinglé"):unref(S)("épingler.épingler")},null,8,["modelValue","label"]),createBaseVNode("p",null,[createBaseVNode("span",_hoisted_1$w,toDisplayString(unref(S)("épingler.optionsAvancées")),1),createVNode(VBtn,{icon:C.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:xe[1]||(xe[1]=()=>C.value=!C.value)},null,8,["icon"])]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",null,[createBaseVNode("p",_hoisted_2$j,toDisplayString(unref(S)("épingler.dispositifsÉpingle")),1),createVNode(VRadioGroup,{modelValue:T.value,"onUpdate:modelValue":xe[2]||(xe[2]=we=>T.value=we)},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(B,we=>createVNode(VRadio,{key:we.valeur,value:we.valeur},{label:withCtx(()=>[createBaseVNode("div",null,[createVNode(VListItem,{subtitle:we.sousTitre},{title:withCtx(()=>[createVNode(VIcon,{icon:we.icône,start:"",size:"small"},null,8,["icon"]),createBaseVNode("span",_hoisted_3$a,toDisplayString(we.titre),1)]),_:2},1032,["subtitle"])])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VAutocomplete,{modelValue:A.value,"onUpdate:modelValue":xe[3]||(xe[3]=we=>A.value=we),items:unref(D)||[],disabled:!unref(D),loading:!unref(D),label:unref(S)("épingler.indiceSélectionnerDispositif"),density:"compact",variant:"outlined",multiple:"",chips:"","closable-chips":""},{chip:withCtx(({props:we,item:G})=>[createVNode(_sfc_main$1m,mergeProps(we,{"id-dispositif":G.title}),null,16,["id-dispositif"])]),item:withCtx(({props:we,item:G})=>[createVNode(_sfc_main$1n,mergeProps(we,{"id-dispositif":G.title}),null,16,["id-dispositif"])]),_:1},8,["modelValue","items","disabled","loading","label"]),[[vShow,T.value==="SPÉCIFIQUES"]])]),_:1}),n.optionFichiers?(openBlock(),createElementBlock("span",_hoisted_4$7,[createBaseVNode("p",_hoisted_5$5,toDisplayString(unref(S)("épingler.dispositifsÉpingleFichier")),1),createVNode(VRadioGroup,{modelValue:R.value,"onUpdate:modelValue":xe[4]||(xe[4]=we=>R.value=we),disabled:T.value==="AUCUN"},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(B,we=>createVNode(VRadio,{key:we.valeur,value:we.valeur},{label:withCtx(()=>[createBaseVNode("div",null,[createVNode(VListItem,{subtitle:we.sousTitre},{title:withCtx(()=>[createVNode(VIcon,{icon:we.icône,start:"",size:"small"},null,8,["icon"]),createBaseVNode("span",_hoisted_6$5,toDisplayString(we.titre),1)]),_:2},1032,["subtitle"])])]),_:2},1032,["value"])),64))]),_:1},8,["modelValue","disabled"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VAutocomplete,{modelValue:I.value,"onUpdate:modelValue":xe[5]||(xe[5]=we=>I.value=we),items:unref(D),label:unref(S)("épingler.indiceSélectionnerDispositif"),"hide-details":"",chips:"","closable-chips":"",density:"compact",variant:"outlined",multiple:""},{chip:withCtx(({props:we,item:G})=>[createVNode(_sfc_main$1m,mergeProps(we,{"id-dispositif":G.title}),null,16,["id-dispositif"])]),item:withCtx(({props:we,item:G})=>[createVNode(_sfc_main$1n,mergeProps(we,{"id-dispositif":G.title}),null,16,["id-dispositif"])]),_:1},8,["modelValue","items","label"]),[[vShow,R.value==="SPÉCIFIQUES"]])]),_:1})])):createCommentVNode("",!0)],512),[[vShow,C.value]])]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:ie},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{icon:"mdi-close",end:""})]),_:1}),createVNode(VBtn,{color:"primary",variant:"outlined",loading:z.value,disabled:!U.value||!j.value,onClick:xe[6]||(xe[6]=()=>W())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{icon:"mdi-check",end:""})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$1k=defineComponent$1({__name:"IcôneÉpingle",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),S=suivre(g.favoris.suivreÉtatFavori,{idObjet:r.id}),E=suivre(g.favoris.suivreEstÉpingléSurDispositif,{idObjet:r.id}),C=computed(()=>S.value?E.value?"mdi-pin":"mdi-pin-outline":"mdi-pin-off-outline"),T=computed(()=>S.value?E.value?x("épingles.icône.épingléSurCeDispositif"):x("épingles.icône.épingléSurDAutresDispositifs"):x("épingles.icône.pasÉpinglé"));return(R,A)=>(openBlock(),createBlock(VTooltip,{text:T.value},{activator:withCtx(({props:I})=>[createVNode(VIcon,mergeProps({props:I},{icon:C.value}),null,16,["icon"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString(T.value),1)]),_:1},8,["text"]))}}),_sfc_main$1j=defineComponent$1({__name:"SérieJetons",props:{nMax:{},items:{}},setup(n){const r=n,{எண்ணை_வடிவூட்டு:g}=எண்களைப்_பயன்படுத்து(),_=T=>typeof T=="string"?{id:T}:T,x=computed(()=>r.items?.slice(0,r.nMax).map(_)||[]),S=computed(()=>r.items?.slice(r.nMax).map(_)||[]),E=computed(()=>S.value.length),C=g(E);return(T,R)=>(openBlock(),createElementBlock("span",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(x.value,A=>(openBlock(),createElementBlock("span",{key:A.id},[renderSlot(T.$slots,"jeton",mergeProps({ref_for:!0},A))]))),128)),S.value.length?(openBlock(),createBlock(VMenu,{key:0},{activator:withCtx(({props:A})=>[createVNode(VChip,mergeProps(A,{label:"",variant:"outlined",size:"small",class:"me-2 mb-2"}),{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>R[0]||(R[0]=[createTextVNode("mdi-plus")])),_:1}),createTextVNode(" "+toDisplayString(unref(C)),1)]),_:2},1040)]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(S.value,A=>(openBlock(),createElementBlock("span",{key:A.id},[renderSlot(T.$slots,"itemListe",mergeProps({ref_for:!0},A))]))),128))]),_:3})]),_:3})):createCommentVNode("",!0)]))}}),_sfc_main$1i=defineComponent$1({__name:"ItemMembre",props:{compte:{},montrerAnonymes:{type:Boolean}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.profil.suivreNoms,{idCompte:r.compte}),C=S(E),T=computed(()=>r.montrerAnonymes||C.value);return(R,A)=>withDirectives((openBlock(),createBlock(VListItem,{class:"text-start",density:"compact"},{prepend:withCtx(()=>[createVNode(_sfc_main$1w,{id:R.compte},null,8,["id"])]),title:withCtx(()=>[createTextVNode(toDisplayString(unref(C)||unref(x)("communs.anonyme")),1)]),append:withCtx(()=>[createVNode(_sfc_main$1o,{id:R.compte},null,8,["id"])]),_:1},512)),[[vShow,T.value]])}}),_sfc_main$1h=defineComponent$1({__name:"AuteursObjet",props:{auteurs:{type:Array,default:()=>[]},nMax:{type:Number,default:3}},setup(n){const r=n,g=computed(()=>r.auteurs?.map(_=>({id:_.idCompte,..._})));return(_,x)=>(openBlock(),createBlock(_sfc_main$1j,{items:g.value,"n-max":n.nMax},{jeton:withCtx(({idCompte:S})=>[createVNode(_sfc_main$n,{id:S},{activator:withCtx(({props:E})=>[createVNode(_sfc_main$1v,mergeProps(E,{class:"me-2",compte:S}),null,16,["compte"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:S})=>[createVNode(_sfc_main$n,{id:S},{activator:withCtx(({props:E})=>[createVNode(_sfc_main$1i,mergeProps(E,{compte:S,"montrer-anonymes":!0}),null,16,["compte"])]),_:2},1032,["id"])]),_:1},8,["items","n-max"]))}}),_sfc_main$1g=defineComponent$1({__name:"CarteCopier",setup(n){const{mdAndUp:r}=useDisplay(),g=ref$2(!1);return(_,x)=>(openBlock(),createBlock(VDialog,{modelValue:g.value,"onUpdate:modelValue":x[0]||(x[0]=S=>g.value=S),"max-width":unref(r)?500:300},{activator:withCtx(({props:S})=>[renderSlot(_.$slots,"activator",normalizeProps(guardReactiveProps({props:S})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle)]),_:1}),createVNode(VCardText)]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_hoisted_1$v={class:"text-error"},_hoisted_2$i={class:"text-error font-weight-bold"},_sfc_main$1f=defineComponent$1({__name:"CarteEffacer",props:{titre:{},explication:{}},emits:["effacer"],setup(n,{emit:r}){const{mdAndUp:g}=useDisplay(),_=r,{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),E=ref$2(!1),C=()=>{_("effacer"),E.value=!1};return(T,R)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":R[2]||(R[2]=A=>E.value=A),"max-width":unref(g)?500:300},{activator:withCtx(({props:A})=>[renderSlot(T.$slots,"activator",normalizeProps(guardReactiveProps({props:A})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createBaseVNode("span",_hoisted_1$v,toDisplayString(T.titre||unref(S)("effacer.titre")),1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:R[0]||(R[0]=A=>E.value=!1)})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createBaseVNode("span",_hoisted_2$i,toDisplayString(unref(S)("effacer.avertissement")),1),createTextVNode(" "+toDisplayString(T.explication||unref(S)("effacer.explication")),1)]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:R[1]||(R[1]=A=>E.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("communs.annuler")),1)]),_:1}),createVNode(VBtn,{color:"error",variant:"flat","append-icon":"mdi-delete",onClick:C},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("effacer.effacer")),1)]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_hoisted_1$u={class:"mt-2 font-weight-bold"},_sfc_main$1e=defineComponent$1({__name:"DivisionCarte",props:{titre:{},enAttente:{type:Boolean}},setup(n){return(r,g)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("p",_hoisted_1$u,toDisplayString(r.titre),1),r.enAttente?(openBlock(),createBlock(VProgressLinear,{key:0,class:"mb-2",indeterminate:"",height:1})):(openBlock(),createBlock(VDivider,{key:1,class:"mb-2"}))],64))}}),_sfc_main$1d=defineComponent$1({__name:"JetonContactMembre",props:{type:{},contact:{}},setup(n){const r=n,{எண்_எழுத்து_வடிவூட்டு:g}=எண்களைப்_பயன்படுத்து(),_=computed(()=>obtIcôneContact({type:r.type})),x=g(r.contact),S=computed(()=>{switch(r.type){case"téléphone":case"whatsapp":case"telegram":return x.value;default:return r.contact}});return(E,C)=>(openBlock(),createBlock(VChip,{class:"ma-2",variant:"outlined",label:"","prepend-icon":_.value},{default:withCtx(()=>[createTextVNode(toDisplayString(S.value),1)]),_:1},8,["prepend-icon"]))}}),_hoisted_1$t={key:1},_sfc_main$1c=defineComponent$1({__name:"RésultatRechercheProfil",props:{résultat:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:x}=மொழிகளைப்_பயன்படுத்து(),{$மொ:S}=_(),E=B=>computed(()=>{const{de:D,info:N}=r.résultat.résultatObjectif;if(N.type==="texte"&&D===B)return N}),C=E("nom"),T=E("contact"),R=E("id"),A=suivre(g.profil.suivreNoms,{idCompte:r.résultat.id}),I=x(A);return(B,D)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(_sfc_main$1w,{id:B.résultat.id,start:""},null,8,["id"])]),title:withCtx(()=>[unref(C)?(openBlock(),createBlock(_sfc_main$1r,{key:0,info:unref(C)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$t,toDisplayString(unref(I)||unref(S)("communs.anonyme")),1))]),default:withCtx(()=>[unref(R)?(openBlock(),createBlock(VChip,{key:0,variant:"outlined",label:"",size:"small","prepend-icon":"mdi-link"},{default:withCtx(()=>[createVNode(_sfc_main$1r,{info:unref(R),"max-taille":25},null,8,["info"])]),_:1})):createCommentVNode("",!0),unref(T)&&B.résultat.résultatObjectif.clef?(openBlock(),createBlock(_sfc_main$1d,{key:1,contact:unref(T).texte,type:B.résultat.résultatObjectif.clef},{default:withCtx(()=>[createVNode(_sfc_main$1r,{info:unref(T)},null,8,["info"])]),_:1},8,["contact","type"])):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$1b=defineComponent$1({__name:"GererAuteurs",props:{id:{},auteurs:{},permissionModerateur:{type:Boolean}},emits:["sauvegarder"],setup(n,{emit:r}){const g=n,_=r,{mdAndUp:x}=useDisplay(),{மொழியாக்கம்_பயன்படுத்து:S}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:E}=S(),C=utiliserConstellation(),T=ref$2(!1),R=()=>{T.value=!1},A=ref$2(!1),I=ref$2(),{résultats:B}=rechercher(C.recherche.rechercherProfilsSelonTexte,{texte:I}),D=computed(()=>{const F=B.value;if(F)return F.sort((U,j)=>U.résultatObjectif.score>j.résultatObjectif.score?-1:U.résultatObjectif.score<j.résultatObjectif.score?1:0)}),N=computed(()=>D.value?.filter(F=>M.value.includes(F.id)?!1:A.value?g.auteurs?.find(U=>U.idCompte===F.id)?.rôle!=="MODÉRATEUR":!g.auteurs?.map(U=>U.idCompte).includes(F.id))),M=ref$2([]),O=F=>{M.value=[...M.value,F]},L=F=>{M.value=M.value.filter(U=>U!==F)};return(F,U)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":U[3]||(U[3]=j=>T.value=j),"max-width":unref(x)?500:300},{activator:withCtx(({props:j})=>[renderSlot(F.$slots,"activator",normalizeProps(guardReactiveProps({props:j})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("auteurs.carteGérer.titre")),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("auteurs.carteGérer.sousTitre")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VMenu,null,{activator:withCtx(({props:j})=>[createVNode(VTextField,mergeProps(j,{modelValue:I.value,"onUpdate:modelValue":U[0]||(U[0]=z=>I.value=z),"hide-details":"",variant:"outlined",density:"compact"}),null,16,["modelValue"])]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[N.value?.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("auteurs.carteGérer.aucunRésultat")),1)]),_:1})]),_:1})),(openBlock(!0),createElementBlock(Fragment,null,renderList(N.value,j=>(openBlock(),createBlock(_sfc_main$1c,{key:j.id,résultat:j,onClick:()=>O(j.id)},null,8,["résultat","onClick"]))),128))]),_:1})]),_:1}),createVNode(_sfc_main$1e,{titre:unref(E)("auteurs.carteGérer.nouveaux"),"en-attente":!1},null,8,["titre"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(M.value,j=>(openBlock(),createBlock(_sfc_main$1v,{key:j,compte:j},{post:withCtx(()=>[createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"x-small",onClick:()=>L(j)},null,8,["onClick"])]),_:2},1032,["compte"]))),128)),createVNode(VCheckbox,{modelValue:A.value,"onUpdate:modelValue":U[1]||(U[1]=j=>A.value=j),color:"primary",label:unref(E)("auteurs.carteGérer.ajouterCommeModérateur")},null,8,["modelValue","label"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:R},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>U[4]||(U[4]=[createTextVNode("mdi-close")])),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:!M.value.length,onClick:U[2]||(U[2]=()=>_("sauvegarder"))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>U[5]||(U[5]=[createTextVNode("mdi-check")])),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_sfc_main$1a=defineComponent$1({__name:"GestionnaireEnnikkai",setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r(),{mdAndUp:_}=useDisplay();return(x,S)=>(openBlock(),createBlock(VDialog,{"max-width":unref(_)?700:300,class:"mx-auto"},{activator:withCtx(({props:E})=>[renderSlot(x.$slots,"activator",normalizeProps(guardReactiveProps({props:E})),()=>[createVNode(VListItem,mergeProps(E,{density:"compact","prepend-icon":"mdi-plus",title:unref(g)("ennikkai.ajouter")}),null,16,["title"])])]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>S[0]||(S[0]=[createTextVNode("À faire")])),_:1}),createVNode(VCardText,null,{default:withCtx(()=>S[1]||(S[1]=[createTextVNode("À faire")])),_:1})]),_:1})]),_:3},8,["max-width"]))}}),makeVLocaleProviderProps=propsFactory({locale:String,fallbackLocale:String,messages:Object,rtl:{type:Boolean,default:void 0},...makeComponentProps()},"VLocaleProvider"),VLocaleProvider=genericComponent()({name:"VLocaleProvider",props:makeVLocaleProviderProps(),setup(n,r){let{slots:g}=r;const{rtlClasses:_}=provideLocale(n);return useRender(()=>createVNode("div",{class:["v-locale-provider",_.value,n.class],style:n.style},[g.default?.()])),{}}}),makeVTextareaProps=propsFactory({autoGrow:Boolean,autofocus:Boolean,counter:[Boolean,Number,String],counterValue:Function,prefix:String,placeholder:String,persistentPlaceholder:Boolean,persistentCounter:Boolean,noResize:Boolean,rows:{type:[Number,String],default:5,validator:n=>!isNaN(parseFloat(n))},maxRows:{type:[Number,String],validator:n=>!isNaN(parseFloat(n))},suffix:String,modelModifiers:Object,...makeVInputProps(),...makeVFieldProps()},"VTextarea"),VTextarea=genericComponent()({name:"VTextarea",directives:{Intersect},inheritAttrs:!1,props:makeVTextareaProps(),emits:{"click:control":n=>!0,"mousedown:control":n=>!0,"update:focused":n=>!0,"update:modelValue":n=>!0},setup(n,r){let{attrs:g,emit:_,slots:x}=r;const S=useProxiedModel(n,"modelValue"),{isFocused:E,focus:C,blur:T}=useFocus(n),R=computed(()=>typeof n.counterValue=="function"?n.counterValue(S.value):(S.value||"").toString().length),A=computed(()=>{if(g.maxlength)return g.maxlength;if(!(!n.counter||typeof n.counter!="number"&&typeof n.counter!="string"))return n.counter});function I(we,G){!n.autofocus||!we||G[0].target?.focus?.()}const B=ref$2(),D=ref$2(),N=shallowRef(""),M=ref$2(),O=computed(()=>n.persistentPlaceholder||E.value||n.active);function L(){M.value!==document.activeElement&&M.value?.focus(),E.value||C()}function F(we){L(),_("click:control",we)}function U(we){_("mousedown:control",we)}function j(we){we.stopPropagation(),L(),nextTick$1(()=>{S.value="",callEvent(n["onClick:clear"],we)})}function z(we){const G=we.target;if(S.value=G.value,n.modelModifiers?.trim){const J=[G.selectionStart,G.selectionEnd];nextTick$1(()=>{G.selectionStart=J[0],G.selectionEnd=J[1]})}}const W=ref$2(),X=ref$2(+n.rows),ie=computed(()=>["plain","underlined"].includes(n.variant));watchEffect(()=>{n.autoGrow||(X.value=+n.rows)});function fe(){n.autoGrow&&nextTick$1(()=>{if(!W.value||!D.value)return;const we=getComputedStyle(W.value),G=getComputedStyle(D.value.$el),J=parseFloat(we.getPropertyValue("--v-field-padding-top"))+parseFloat(we.getPropertyValue("--v-input-padding-top"))+parseFloat(we.getPropertyValue("--v-field-padding-bottom")),q=W.value.scrollHeight,H=parseFloat(we.lineHeight),ve=Math.max(parseFloat(n.rows)*H+J,parseFloat(G.getPropertyValue("--v-input-control-height"))),Z=parseFloat(n.maxRows)*H+J||1/0,ce=clamp(q??0,ve,Z);X.value=Math.floor((ce-J)/H),N.value=convertToUnit(ce)})}onMounted(fe),watch(S,fe),watch(()=>n.rows,fe),watch(()=>n.maxRows,fe),watch(()=>n.density,fe);let xe;return watch(W,we=>{we?(xe=new ResizeObserver(fe),xe.observe(W.value)):xe?.disconnect()}),onBeforeUnmount(()=>{xe?.disconnect()}),useRender(()=>{const we=!!(x.counter||n.counter||n.counterValue),G=!!(we||x.details),[J,q]=filterInputAttrs(g),{modelValue:H,...ve}=VInput.filterProps(n),Z=filterFieldProps(n);return createVNode(VInput,mergeProps({ref:B,modelValue:S.value,"onUpdate:modelValue":ce=>S.value=ce,class:["v-textarea v-text-field",{"v-textarea--prefixed":n.prefix,"v-textarea--suffixed":n.suffix,"v-text-field--prefixed":n.prefix,"v-text-field--suffixed":n.suffix,"v-textarea--auto-grow":n.autoGrow,"v-textarea--no-resize":n.noResize||n.autoGrow,"v-input--plain-underlined":ie.value},n.class],style:n.style},J,ve,{centerAffix:X.value===1&&!ie.value,focused:E.value}),{...x,default:ce=>{let{id:ue,isDisabled:se,isDirty:te,isReadonly:Y,isValid:be}=ce;return createVNode(VField,mergeProps({ref:D,style:{"--v-textarea-control-height":N.value},onClick:F,onMousedown:U,"onClick:clear":j,"onClick:prependInner":n["onClick:prependInner"],"onClick:appendInner":n["onClick:appendInner"]},Z,{id:ue.value,active:O.value||te.value,centerAffix:X.value===1&&!ie.value,dirty:te.value||n.dirty,disabled:se.value,focused:E.value,error:be.value===!1}),{...x,default:ye=>{let{props:{class:Ie,...ke}}=ye;return createVNode(Fragment,null,[n.prefix&&createVNode("span",{class:"v-text-field__prefix"},[n.prefix]),withDirectives(createVNode("textarea",mergeProps({ref:M,class:Ie,value:S.value,onInput:z,autofocus:n.autofocus,readonly:Y.value,disabled:se.value,placeholder:n.placeholder,rows:n.rows,name:n.name,onFocus:L,onBlur:T},ke,q),null),[[resolveDirective("intersect"),{handler:I},null,{once:!0}]]),n.autoGrow&&withDirectives(createVNode("textarea",{class:[Ie,"v-textarea__sizer"],id:`${ke.id}-sizer`,"onUpdate:modelValue":Ce=>S.value=Ce,ref:W,readonly:!0,"aria-hidden":"true"},null),[[vModelText,S.value]]),n.suffix&&createVNode("span",{class:"v-text-field__suffix"},[n.suffix])])}})},details:G?ce=>createVNode(Fragment,null,[x.details?.(ce),we&&createVNode(Fragment,null,[createVNode("span",null,null),createVNode(VCounter,{active:n.persistentCounter||E.value,value:R.value,max:A.value,disabled:n.disabled},x.counter)])]):void 0})}),forwardRefs({},B,D,M)}}),_sfc_main$19=defineComponent$1({__name:"ItemNom",props:{langue:{},nom:{},id:{},autorisationModification:{type:Boolean},longue:{type:Boolean}},emits:["changerNom","effacer"],setup(n,{emit:r}){const{கிடைக்கும்_மொழிகளை_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{மொழிகளும்_குறியீடுகளும்:_,மொழியின்_பெயர்:x}=g(),{மொழியாக்கம்_பயன்படுத்து:S}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:E}=S(),{வலதிலிருந்து_இடது_மொழி:C}=மொழிகளைப்_பயன்படுத்து(),{mdAndUp:T}=useDisplay(),R=utiliserNuchabäl(),A=n,I=r,B=ref$2(""),D=ref$2("");onMounted(()=>{B.value=A.nom,D.value=A.langue});const N=C(D),M=x(D),O=computed(()=>{if(!B.value?.length||!D.value)return;const U=R.rutzibTzibanem({runuk:D.value});return U&&!B.value.match(new RegExp(U,"g"))?[E("communs.erreurLangue",{langue:M.value})]:void 0}),L=()=>{I("effacer",{id:A.id})},F=()=>{!D.value||!B.value||O.value?.length||B.value.trim()===A.nom.trim()&&D.value===A.langue||I("changerNom",{id:A.id,nom:B.value,lng:D.value})};return watchEffect(()=>{D.value!==A.langue&&F()}),(U,j)=>(openBlock(),createBlock(VListItem,null,{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(VCol,{key:0,cols:"4"},{default:withCtx(()=>[createVNode(VAutocomplete,{modelValue:D.value,"onUpdate:modelValue":j[0]||(j[0]=z=>D.value=z),class:"pt-1",density:"compact",variant:"underlined","item-title":"மொழி","item-value":"குறியீடு",readonly:!U.autorisationModification,items:unref(_)},{"no-data":withCtx(()=>[createVNode(_sfc_main$1a)]),_:1},8,["modelValue","readonly","items"])]),_:1})):createCommentVNode("",!0),createVNode(VCol,{cols:unref(T)?8:12},{default:withCtx(()=>[createVNode(VLocaleProvider,{rtl:unref(N)},{default:withCtx(()=>[U.longue?(openBlock(),createBlock(VTextarea,{key:1,modelValue:B.value,"onUpdate:modelValue":j[2]||(j[2]=z=>B.value=z),label:unref(T)?"":unref(M),readonly:!U.autorisationModification,rules:O.value,class:"pt-1",density:"compact",variant:"underlined","clear-icon":"mdi-close",clearable:"","auto-grow":"","onClick:clear":L,onBlur:F},null,8,["modelValue","label","readonly","rules"])):(openBlock(),createBlock(VTextField,{key:0,modelValue:B.value,"onUpdate:modelValue":j[1]||(j[1]=z=>B.value=z),label:unref(T)?"":unref(M),readonly:!U.autorisationModification,rules:O.value,class:"pt-1",density:"compact",variant:"underlined","clear-icon":"mdi-close",clearable:"","onClick:clear":L,onBlur:F},null,8,["modelValue","label","readonly","rules"]))]),_:1},8,["rtl"])]),_:1},8,["cols"])]),_:1})]),_:1})]),_:1}))}}),dédoublonnerListe=n=>{const r=new Set;return n.filter(g=>r.has(g)?!1:r.add(g))},utiliserHistoriqueLangues=defineStore("historiqueLangues",()=>{const{மொழி:n,மாற்றுமொழிகள்:r}=மொழிகளைப்_பயன்படுத்து(),g=computed(()=>[n.value,...r.value]),_=ref$2([]),x=computed(()=>dédoublonnerListe([..._.value,...g.value]));return{sélectionner:E=>{_.value=dédoublonnerListe([E,..._.value])},historique:x,sélectionsInterface:g,autresSélections:_}}),_hoisted_1$s={class:"text-overline"},_sfc_main$18=defineComponent$1({__name:"ListeNoms",props:{nomsInitiaux:{},etiquetteNom:{},indiceNom:{},indiceLangue:{},texteAucunNom:{},autorisationModification:{type:Boolean},longue:{type:Boolean}},emits:["ajusterNoms"],setup(n,{emit:r}){const{கிடைக்கும்_மொழிகளை_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{மொழிகளும்_குறியீடுகளும்:_,மொழியின்_பெயர்:x}=g(),{மொழியாக்கம்_பயன்படுத்து:S}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:E}=S(),{வலதிலிருந்து_இடது_மொழி:C}=மொழிகளைப்_பயன்படுத்து(),T=utiliserHistoriqueLangues(),{mdAndUp:R}=useDisplay(),A=utiliserNuchabäl(),I=n,B=r,D=ref$2(I.nomsInitiaux);watchEffect(()=>{D.value=I.nomsInitiaux||{}});const N=ref$2([]);watchEffect(()=>{N.value=Object.entries(D.value||{}).map(([xe,we])=>({lng:xe,nom:we,id:v4$3()}))});const M=computed(()=>_.value.filter(we=>!N.value.some(G=>G.lng===we.குறியீடு)).sort((we,G)=>{const J=T.historique.indexOf(we.குறியீடு),q=T.historique.indexOf(G.குறியீடு);return J>=0?q>=0&&J>q?1:-1:1})),O=()=>{const xe=Object.fromEntries(N.value.map(we=>[we.lng,we.nom]));B("ajusterNoms",xe)},L=({id:xe,nom:we,lng:G})=>{G===j.value&&(j.value=""),N.value=N.value.filter(J=>J.lng!==G||J.id===xe).map(J=>J.id===xe?{lng:G,nom:we,id:J.id}:J),O()},F=({id:xe})=>{N.value=N.value.filter(we=>we.id!==xe),O()},U=ref$2(""),j=ref$2(""),z=x(j),W=C(j);watchEffect(()=>{(!j.value||!M.value.map(xe=>xe.குறியீடு).includes(j.value))&&(j.value=M.value[0]?.குறியீடு)});const X=computed(()=>{if(!U.value?.length||!j.value)return;const xe=A.rutzibTzibanem({runuk:j.value});return xe&&!U.value.match(new RegExp(xe,"g"))?[E("communs.erreurLangue",{langue:z.value})]:void 0}),ie=computed(()=>{if(j.value&&U.value.trim()&&!X.value?.length)return{valNouvelleLangue:j.value.trim(),valNouveauNom:U.value}}),fe=()=>{const xe=ie.value;if(!xe)return;const{valNouveauNom:we,valNouvelleLangue:G}=xe;T.sélectionner(G),N.value=[{nom:we,lng:G,id:v4$3()},...N.value],j.value="",U.value="",O()};return(xe,we)=>(openBlock(),createElementBlock(Fragment,null,[xe.autorisationModification?(openBlock(),createBlock(VList,{key:0,class:"pb-0"},{default:withCtx(()=>[createVNode(VListItem,null,{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:unref(R)?4:12},{default:withCtx(()=>[createVNode(VAutocomplete,{modelValue:j.value,"onUpdate:modelValue":we[0]||(we[0]=G=>j.value=G),class:"pt-1",density:"compact",variant:"underlined","item-title":"மொழி","item-value":"குறியீடு","hide-details":"",items:M.value,label:xe.indiceLangue},{"no-data":withCtx(()=>[createVNode(_sfc_main$1a)]),_:1},8,["modelValue","items","label"])]),_:1},8,["cols"]),createVNode(VCol,{cols:unref(R)?8:12},{default:withCtx(()=>[createVNode(VLocaleProvider,{rtl:unref(W)},{default:withCtx(()=>[xe.longue?(openBlock(),createBlock(VTextarea,{key:1,modelValue:U.value,"onUpdate:modelValue":we[2]||(we[2]=G=>U.value=G),class:"pt-1",density:"compact",variant:"underlined",rows:"2","auto-grow":"",rules:X.value,label:xe.etiquetteNom,hint:xe.indiceNom,onBlur:fe,onKeydown:withKeys(fe,["enter"])},null,8,["modelValue","rules","label","hint"])):(openBlock(),createBlock(VTextField,{key:0,modelValue:U.value,"onUpdate:modelValue":we[1]||(we[1]=G=>U.value=G),class:"pt-1",density:"compact",variant:"underlined",rules:X.value,label:xe.etiquetteNom,hint:xe.indiceNom,onBlur:fe,onKeydown:withKeys(fe,["enter"])},null,8,["modelValue","rules","label","hint"]))]),_:1},8,["rtl"])]),_:1},8,["cols"])]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),withDirectives(createBaseVNode("span",null,[createVNode(VDivider,{class:"mb-2"}),createBaseVNode("p",_hoisted_1$s,toDisplayString(unref(E)("communs.autresLangues",{n:N.value.length})),1),createVNode(VList,{"max-height":xe.longue?100:200,style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VScrollYTransition,{group:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(N.value,G=>(openBlock(),createBlock(_sfc_main$19,{id:G.id,key:G.id,langue:G.lng,nom:G.nom,"autorisation-modification":xe.autorisationModification,longue:xe.longue,onChangerNom:L,onEffacer:F},null,8,["id","langue","nom","autorisation-modification","longue"]))),128))]),_:1})]),_:1},8,["max-height"])],512),[[vShow,N.value.length]])],64))}}),_sfc_main$17=defineComponent$1({__name:"DialogueNoms",props:{titre:{},sousTitre:{},nomsInitiaux:{},etiquetteNom:{},indiceNom:{},indiceLangue:{},texteAucunNom:{},autorisationModification:{type:Boolean},longue:{type:Boolean}},emits:["ajusterNoms"],setup(n,{emit:r}){const{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),{mdAndUp:x}=useDisplay(),S=n,E=r,C=ref$2(!1),T=()=>{C.value=!1,A.value=S.nomsInitiaux||{}},R=()=>{E("ajusterNoms",A.value),C.value=!1},A=ref$2(S.nomsInitiaux||{});watchEffect(()=>{A.value=S.nomsInitiaux||{}});const I=D=>{A.value=D},B=computed(()=>!deepEqual$2(A.value,S.nomsInitiaux));return(D,N)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":N[0]||(N[0]=M=>C.value=M)},{activator:withCtx(({props:M})=>[renderSlot(D.$slots,"activator",normalizeProps(guardReactiveProps({props:M})))]),default:withCtx(()=>[createVNode(VCard,{"min-width":unref(x)?500:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(D.titre),1)]),_:1}),D.sousTitre?(openBlock(),createBlock(VCardSubtitle,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(D.sousTitre),1)]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$18,{"noms-initiaux":D.nomsInitiaux,"texte-aucun-nom":D.texteAucunNom,"indice-langue":D.indiceLangue,"indice-nom":D.indiceNom,"etiquette-nom":D.etiquetteNom,"autorisation-modification":D.autorisationModification,longue:D.longue,onAjusterNoms:I},null,8,["noms-initiaux","texte-aucun-nom","indice-langue","indice-nom","etiquette-nom","autorisation-modification","longue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"text","append-icon":"mdi-close",onClick:T},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("communs.fermer")),1)]),_:1}),D.autorisationModification?(openBlock(),createBlock(VBtn,{key:0,color:"primary",variant:"outlined","append-icon":"mdi-check",disabled:!B.value,onClick:R},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("communs.sauvegarder")),1)]),_:1},8,["disabled"])):createCommentVNode("",!0)]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),rootTypes={actions:"button@2",article:"heading, paragraph",avatar:"avatar",button:"button",card:"image, heading","card-avatar":"image, list-item-avatar",chip:"chip","date-picker":"list-item, heading, divider, date-picker-options, date-picker-days, actions","date-picker-options":"text, avatar@2","date-picker-days":"avatar@28",divider:"divider",heading:"heading",image:"image","list-item":"text","list-item-avatar":"avatar, text","list-item-two-line":"sentences","list-item-avatar-two-line":"avatar, sentences","list-item-three-line":"paragraph","list-item-avatar-three-line":"avatar, paragraph",ossein:"ossein",paragraph:"text@3",sentences:"text@2",subtitle:"text",table:"table-heading, table-thead, table-tbody, table-tfoot","table-heading":"chip, text","table-thead":"heading@6","table-tbody":"table-row-divider@6","table-row-divider":"table-row, divider","table-row":"text@6","table-tfoot":"text@2, avatar@2",text:"text"};function genBone(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return createVNode("div",{class:["v-skeleton-loader__bone",`v-skeleton-loader__${n}`]},[r])}function genBones(n){const[r,g]=n.split("@");return Array.from({length:g}).map(()=>genStructure(r))}function genStructure(n){let r=[];if(!n)return r;const g=rootTypes[n];if(n!==g){if(n.includes(","))return mapBones(n);if(n.includes("@"))return genBones(n);g.includes(",")?r=mapBones(g):g.includes("@")?r=genBones(g):g&&r.push(genStructure(g))}return[genBone(n,r)]}function mapBones(n){return n.replace(/\s/g,"").split(",").map(genStructure)}const makeVSkeletonLoaderProps=propsFactory({boilerplate:Boolean,color:String,loading:Boolean,loadingText:{type:String,default:"$vuetify.loading"},type:{type:[String,Array],default:"ossein"},...makeDimensionProps(),...makeElevationProps(),...makeThemeProps()},"VSkeletonLoader"),VSkeletonLoader=genericComponent()({name:"VSkeletonLoader",props:makeVSkeletonLoaderProps(),setup(n,r){let{slots:g}=r;const{backgroundColorClasses:_,backgroundColorStyles:x}=useBackgroundColor(toRef(n,"color")),{dimensionStyles:S}=useDimension(n),{elevationClasses:E}=useElevation(n),{themeClasses:C}=provideTheme(n),{t:T}=useLocale(),R=computed(()=>genStructure(wrapInArray(n.type).join(",")));return useRender(()=>{const A=!g.default||n.loading,I=n.boilerplate||!A?{}:{ariaLive:"polite",ariaLabel:T(n.loadingText),role:"alert"};return createVNode("div",mergeProps({class:["v-skeleton-loader",{"v-skeleton-loader--boilerplate":n.boilerplate},C.value,_.value,E.value],style:[x.value,A?S.value:{}]},I),[A?R.value:g.default?.()])}),{}}}),_hoisted_1$r={key:0},_sfc_main$16=defineComponent$1({__name:"BaseCarteObjet",props:{id:{},noms:{},descriptions:{},image:{},icone:{},fichiersEpinglables:{type:Boolean},auteurs:{},sauvegardePossible:{type:Boolean}},emits:["ajusterNoms","ajusterDescriptions","effacer","copier","sauvegarder"],setup(n,{emit:r}){const g=n,_=r,x=utiliserConstellation(),{mdAndUp:S,smAndUp:E}=useDisplay(),{மொழியாக்கம்_பயன்படுத்து:C}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:T}=C(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:R}=மொழிகளைப்_பயன்படுத்து(),A=ref$2(!1),I=suivre(x.suivrePermission,{idObjet:g.id}),B=R(computed(()=>g.noms)),D=R(computed(()=>g.descriptions)),N=suivre(x.favoris.suivreÉtatFavori,{idObjet:g.id}),M=computed(()=>N.value),O=async()=>{_("effacer"),A.value=!1},L=async()=>{_("copier"),A.value=!1},F=async()=>{_("sauvegarder"),A.value=!1};return(U,j)=>(openBlock(),createBlock(VDialog,{modelValue:A.value,"onUpdate:modelValue":j[3]||(j[3]=z=>A.value=z)},{activator:withCtx(({props:z})=>[renderSlot(U.$slots,"activator",normalizeProps(guardReactiveProps({props:z})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(S)?700:unref(E)?500:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[U.icone?(openBlock(),createBlock(VAvatar,{key:0,class:"mx-2",icon:U.icone},null,8,["icon"])):U.image?(openBlock(),createBlock(VAvatar,{key:1,class:"mx-2"},{default:withCtx(()=>[createVNode(VImg,{src:U.image},null,8,["src"])]),_:1})):createCommentVNode("",!0),createVNode(_sfc_main$17,{"indice-nom":unref(T)("objet.indiceNom"),"etiquette-nom":unref(T)("objet.étiquetteNom"),"indice-langue":unref(T)("objet.indiceLangue"),"texte-aucun-nom":unref(T)("objet.texteAucunNom"),"noms-initiaux":U.noms,titre:unref(T)("objet.titreDialogueNoms"),"sous-titre":unref(T)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!unref(I),onAjusterNoms:j[0]||(j[0]=z=>_("ajusterNoms",z))},{activator:withCtx(({props:z})=>[createBaseVNode("span",mergeProps(z,{class:"text-h5"}),[U.noms?(openBlock(),createElementBlock("span",_hoisted_1$r,[createTextVNode(toDisplayString(unref(B)||unref(T)("communs.baseCarteObjet.sansNom"))+" ",1),createVNode(VBtn,{icon:unref(I)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])])):(openBlock(),createBlock(VSkeletonLoader,{key:1,type:"list-item"}))],16)]),_:1},8,["indice-nom","etiquette-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(VSpacer),createVNode(_sfc_main$1o,{id:U.id},null,8,["id"]),createVNode(VBtn,{icon:"",variant:"flat",size:"small"},{default:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>j[4]||(j[4]=[createTextVNode("mdi-dots-horizontal")])),_:1}),createVNode(VMenu,{activator:"parent"},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(_sfc_main$1g,{onCopier:L},{activator:withCtx(({props:z})=>[createVNode(VListItem,mergeProps(z,{"prepend-icon":"mdi-content-copy"}),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(T)("communs.copier")),1)]),_:1})]),_:2},1040)]),_:1}),createVNode(_sfc_main$1l,{id:U.id,"option-fichiers":U.fichiersEpinglables},{activator:withCtx(({props:z})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(z)),{prepend:withCtx(()=>[createVNode(_sfc_main$1k,{id:U.id},null,8,["id"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(M.value?unref(T)("épingler.épinglé"):unref(T)("épingler.épingler")),1)]),_:1})]),_:2},1040)]),_:1},8,["id","option-fichiers"]),unref(I)?(openBlock(),createBlock(_sfc_main$1f,{key:0,onEffacer:O},{activator:withCtx(({props:z})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(z)),{prepend:withCtx(()=>[createVNode(VIcon,{icon:"mdi-delete",color:"error"})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(T)("communs.effacer")),1)]),_:1})]),_:2},1040)]),_:1})):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(_sfc_main$1e,{titre:unref(T)("communs.baseCarteObjet.description"),"en-attente":!U.descriptions},null,8,["titre","en-attente"]),U.descriptions?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass({"text-disabled":!unref(D)})},toDisplayString(unref(D)||unref(T)("communs.baseCarteObjet.sansDescription")),3)):(openBlock(),createBlock(VSkeletonLoader,{key:1,type:"list-item"})),createVNode(_sfc_main$17,{"etiquette-nom":unref(T)("objet.étiquetteDescription"),"indice-nom":unref(T)("objet.indiceDescription"),"indice-langue":unref(T)("objet.indiceLangue"),"texte-aucun-nom":unref(T)("objet.texteAucuneDescription"),"noms-initiaux":U.descriptions,titre:unref(T)("objet.titreDialogueDescriptions"),"sous-titre":unref(T)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!unref(I),longue:"",onAjusterNoms:j[1]||(j[1]=z=>_("ajusterDescriptions",z))},{activator:withCtx(({props:z})=>[createVNode(VBtn,mergeProps(z,{icon:unref(I)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),createVNode(_sfc_main$1e,{titre:unref(T)("communs.baseCarteObjet.auteurs"),"en-attente":!U.auteurs},null,8,["titre","en-attente"]),createVNode(_sfc_main$1h,{auteurs:U.auteurs},null,8,["auteurs"]),unref(I)==="MODÉRATEUR"?(openBlock(),createBlock(_sfc_main$1b,{key:2,id:U.id,auteurs:U.auteurs,"permission-moderateur":unref(I)==="MODÉRATEUR"},{activator:withCtx(({props:z})=>[createVNode(VChip,mergeProps(z,{class:"me-2",variant:"outlined","prepend-icon":"mdi-plus",size:"small",label:""}),{default:withCtx(()=>[createTextVNode(toDisplayString(unref(T)("communs.baseCarteObjet.ajouterAuteur")),1)]),_:2},1040)]),_:1},8,["id","auteurs","permission-moderateur"])):createCommentVNode("",!0),renderSlot(U.$slots,"default")]),_:3}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),renderSlot(U.$slots,"pied"),U.sauvegardePossible&&unref(I)?(openBlock(),createBlock(VBtn,{key:0,variant:"flat",color:"primary",onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(T)("communs.sauvegarder")),1)]),_:1})):createCommentVNode("",!0),createVNode(VBtn,{variant:"flat","append-icon":"mdi-close",onClick:j[2]||(j[2]=z=>A.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(T)("communs.fermer")),1)]),_:1})]),_:3})]),_:3},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$15=defineComponent$1({__name:"JetonLicence",props:{licence:{}},setup(n){const r=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),x=n,S=suivre(r.licences.suivreLicences),E=computed(()=>x.licence&&S.value&&Object.keys(S.value).includes(x.licence));return(C,T)=>(openBlock(),createBlock(VChip,{variant:"outlined",label:""},{prepend:withCtx(()=>[createVNode(VIcon,{start:"",color:E.value?"primary":"error"},{default:withCtx(()=>[createTextVNode(toDisplayString(E.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString(E.value?unref(_)(`licences.info.${C.licence}.abr`):C.licence?C.licence:unref(_)("licences.jetonAucune")),1)]),_:1}))}}),_sfc_main$14=defineComponent$1({__name:"ItemMotClef",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.motsClefs.suivreNomsMotClef,{idMotClef:r.id}),C=S(E),T=suivre(g.motsClefs.suivreDescriptionsMotClef,{idMotClef:r.id}),R=S(T);return(A,I)=>(openBlock(),createBlock(VListItem,{class:"text-start","prepend-icon":unref(icôneObjet)("motClef"),density:"compact"},{title:withCtx(()=>[createTextVNode(toDisplayString(unref(C)||unref(x)("motsClefs.sansNom")),1)]),subtitle:withCtx(()=>[createTextVNode(toDisplayString(unref(R)||unref(x)("communs.baseCarteObjet.sansDescription")),1)]),append:withCtx(()=>[createVNode(_sfc_main$1o,{id:A.id},null,8,["id"])]),_:1},8,["prepend-icon"]))}}),_sfc_main$13=defineComponent$1({__name:"JetonMotClef",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.motsClefs.suivreNomsMotClef,{idMotClef:r.id}),C=S(E);return(T,R)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2","prepend-icon":unref(icôneObjet)("motClef"),variant:"outlined",size:"small",label:""},{default:withCtx(()=>[renderSlot(T.$slots,"nom",{},()=>[createTextVNode(toDisplayString(unref(C)||unref(x)("motsClefs.sansNom")),1)]),renderSlot(T.$slots,"default")]),_:3},8,["prepend-icon"]))}}),_hoisted_1$q={class:"text-disabled font-weight-light"},_sfc_main$12=defineComponent$1({__name:"ItemRègle",props:{regle:{},effacable:{type:Boolean},autorisationModifier:{type:Boolean}},emits:["effacer"],setup(n,{emit:r}){const g=n,_=r,{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),E=computed(()=>{switch(g.regle.règle.typeRègle){case"catégorie":return"règles.types.catégorie";case"bornes":return"règles.types.bornes";case"existe":return"règles.types.existe";case"valeurCatégorique":return"règles.types.valeurCatégorique";default:return""}}),C=computed(()=>{const{règle:T}=g.regle;switch(T.typeRègle){case"catégorie":return S("règles.infos.catégorie",{categorie:S(`variables.catégories.${T.détails.catégorie.catégorie}`)});case"bornes":return S("règles.infos.bornes",{val:T.détails.val,op:T.détails.op});case"existe":return"règles.infos.existe";case"valeurCatégorique":return"règles.infos.valeurCatégorique";default:return""}});return(T,R)=>(openBlock(),createBlock(VListItem,null,{title:withCtx(()=>[createTextVNode(toDisplayString(unref(S)(E.value)),1)]),append:withCtx(()=>[T.effacable&&T.autorisationModifier?(openBlock(),createBlock(VIcon,{key:0,icon:"mdi-delete",color:"error",variant:"flat",onClick:R[0]||(R[0]=()=>_("effacer"))})):createCommentVNode("",!0)]),default:withCtx(()=>[createBaseVNode("p",_hoisted_1$q,toDisplayString(unref(S)(C.value)),1)]),_:1}))}}),_sfc_main$11=defineComponent$1({__name:"BtnRetour",props:{visible:{type:Boolean},actif:{type:Boolean}},emits:["retour"],setup(n,{emit:r}){const{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),{isRtl:x}=useRtl(),S=r;return(E,C)=>withDirectives((openBlock(),createBlock(VBtn,{variant:"text",disabled:!E.actif,"prepend-icon":unref(x)?"mdi-chevron-right":"mdi-chevron-left",onClick:C[0]||(C[0]=()=>S("retour"))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("communs.retour")),1)]),_:1},8,["disabled","prepend-icon"])),[[vShow,E.visible]])}}),_sfc_main$10=defineComponent$1({__name:"BtnSuivant",props:{visible:{type:Boolean},actif:{type:Boolean}},emits:["suivant"],setup(n,{emit:r}){const{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),{isRtl:x}=useRtl(),S=r;return(E,C)=>withDirectives((openBlock(),createBlock(VBtn,{color:"primary",variant:"flat",disabled:!E.actif,"append-icon":unref(x)?"mdi-chevron-left":"mdi-chevron-right",onClick:C[0]||(C[0]=()=>S("suivant"))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("communs.suivant")),1)]),_:1},8,["disabled","append-icon"])),[[vShow,E.visible]])}}),_hoisted_1$p={key:0,class:"mx-3"},_sfc_main$$=defineComponent$1({__name:"SélecteurObjet",props:{multiples:{type:Boolean},originaux:{},interdits:{},resultatsRecherche:{},onTravaille:{type:Boolean},texteEtiquetteRecherche:{},texteAucunRésultat:{}},emits:["selectionnee","requete-modifiee"],setup(n,{emit:r}){const g=n,_=r,x=ref$2(g.originaux||[]);watchEffect(()=>{_("selectionnee",x.value)});const S=ref$2("");watchEffect(()=>{_("requete-modifiee",S.value)});const E=computed(()=>g.resultatsRecherche?.filter(R=>!x.value.includes(R.id)).filter(R=>!g.interdits||!g.interdits.includes(R.id))),C=({id:R})=>{g.multiples?x.value=[...x.value,R]:x.value=[R],S.value=""},T=({id:R})=>{x.value=x.value.filter(A=>A!==R)};return(R,A)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(VMenu,{location:"bottom",transition:"slide-y-transition"},{activator:withCtx(({props:I})=>[createVNode(VTextField,mergeProps({modelValue:S.value,"onUpdate:modelValue":A[0]||(A[0]=B=>S.value=B)},I,{class:"pt-2",label:g.texteEtiquetteRecherche,variant:"outlined","prepend-inner-icon":"mdi-magnify","hide-details":"",clearable:""}),{"prepend-inner":withCtx(()=>[!R.multiples&&x.value.length?(openBlock(),createElementBlock("span",_hoisted_1$p,[renderSlot(R.$slots,"jeton-objet",{id:x.value[0],deselectionner:T})])):createCommentVNode("",!0)]),_:2},1040,["modelValue","label"])]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[withDirectives(createVNode(VProgressLinear,{class:"mb-3",height:"1",color:"primary",indeterminate:"",absolute:""},null,512),[[vShow,R.onTravaille]]),createVNode(VFadeTransition,{group:""},{default:withCtx(()=>[withDirectives((openBlock(),createBlock(VListItem,{key:"aucun",class:"text-h6 text-center text-disabled"},{default:withCtx(()=>[createTextVNode(toDisplayString(g.texteAucunRésultat),1)]),_:1})),[[vShow,!E.value?.length]]),(openBlock(!0),createElementBlock(Fragment,null,renderList(E.value,I=>(openBlock(),createElementBlock("span",{key:I.id},[renderSlot(R.$slots,"résultat",{résultat:I,click:()=>C({id:I.id})})]))),128))]),_:3}),createVNode(VDivider),renderSlot(R.$slots,"nouveau",{nouveau:I=>C({id:I})})]),_:3})]),_:3}),R.multiples?(openBlock(),createBlock(VList,{key:0,class:"mt-4"},{default:withCtx(()=>[createVNode(VScrollXTransition,{group:""},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(x.value,I=>(openBlock(),createElementBlock("span",{key:I},[renderSlot(R.$slots,"jeton-objet",{id:I,deselectionner:T})]))),128))]),_:3})]),_:3})):createCommentVNode("",!0)],64))}}),_sfc_main$_=defineComponent$1({__name:"JetonIdObjet",props:{id:{}},setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r();return(_,x)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small",label:""},{append:withCtx(()=>[createVNode(_sfc_main$1o,{id:_.id},null,8,["id"])]),default:withCtx(()=>[renderSlot(_.$slots,"default",{},()=>[createTextVNode(toDisplayString(_.id.slice(7,17)+unref(g)("communs.troisPetitsPoints")),1)])]),_:3}))}}),catégoriesBase=["numérique","horoDatage","intervaleTemps","chaîne","chaîneNonTraductible","booléen","géojson","vidéo","audio","image","fichier"],icôneCatégorieVariable=n=>{if(n.type==="simple")switch(n.catégorie){case"numérique":return"mdi-numeric";case"chaîneNonTraductible":case"chaîne":return"mdi-text-short";case"booléen":return"mdi-order-bool-ascending-variant";case"géojson":return"mdi-map-marker";case"fichier":return"mdi-file";case"vidéo":return"mdi-play-box-outline";case"audio":return"mdi-waveform";case"image":return"mdi-image";case"intervaleTemps":return"mdi-calendar-range-outline";case"horoDatage":return"mdi-calendar-clock";default:return""}else return"mdi-list"},_sfc_main$Z=defineComponent$1({__name:"JetonVariable",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=computed(()=>C.value?icôneCatégorieVariable(C.value):"mdi-variable"),C=suivre(g.variables.suivreCatégorieVariable,{idVariable:r.id}),T=suivre(g.variables.suivreNomsVariable,{idVariable:r.id}),R=S(T);return(A,I)=>(openBlock(),createBlock(VChip,{class:"mb-2 me-2","prepend-icon":E.value,variant:"outlined",label:"",size:"small"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(R)||unref(x)("variables.sansNom"))+" ",1),renderSlot(A.$slots,"default")]),_:3},8,["prepend-icon"]))}}),_hoisted_1$o={key:1},_hoisted_2$h={key:1},_sfc_main$Y=defineComponent$1({__name:"RésultatRechercheBd",props:{résultat:{}},setup(n){const r=n,g=utiliserConstellation(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:_}=மொழிகளைப்_பயன்படுத்து(),{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),E=W=>computed(()=>{const{de:X,info:ie}=r.résultat.résultatObjectif;if(ie.type==="texte"&&X===W)return ie}),C=E("nom"),T=E("descr"),R=E("id"),A=W=>computed(()=>{const{de:X,clef:ie,info:fe}=r.résultat.résultatObjectif;if(fe.type==="résultat"&&X===W&&ie)return fe.info.type==="texte"?{id:ie,info:{type:fe.type,de:fe.de,info:fe.info}}:void 0}),I=A("variable"),B=A("motClef"),D=suivre(g.bds.suivreNomsBd,{idBd:r.résultat.id}),N=_(D),M=suivre(g.bds.suivreDescriptionsBd,{idBd:r.résultat.id}),O=_(M),L=suivre(g.réseau.suivreAuteursVariable,{idVariable:r.résultat.id}),F=suivre(g.bds.suivreImage,{idBd:r.résultat.id}),U=computed(()=>{if(F.value)return URL.createObjectURL(new Blob([F.value],{type:"image"}))}),{obtImageDéco:j}=utiliserImagesDéco(),z=j("logoBD");return(W,X)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":U.value||unref(z)},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[unref(C)?(openBlock(),createBlock(_sfc_main$1r,{key:0,info:unref(C)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$o,toDisplayString(unref(N)||unref(S)("bds.sansNom")),1))]),_:1}),unref(T)||unref(O)?(openBlock(),createBlock(VListItemSubtitle,{key:0},{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(_sfc_main$1r,{key:0,info:unref(T)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$h,toDisplayString(unref(O)),1))]),_:1})):createCommentVNode("",!0),createVNode(VDivider,{class:"my-2"}),createVNode(_sfc_main$1h,{auteurs:unref(L),"n-max":1},null,8,["auteurs"]),unref(R)?(openBlock(),createBlock(_sfc_main$_,{key:1,id:W.résultat.id},{default:withCtx(()=>[createVNode(_sfc_main$1r,{info:unref(R),"max-taille":15},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(I)?(openBlock(),createBlock(_sfc_main$Z,{key:2,id:unref(I).id},{default:withCtx(()=>[createVNode(_sfc_main$1r,{info:unref(I).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0),unref(B)?(openBlock(),createBlock(_sfc_main$13,{key:3,id:unref(B).id},{default:withCtx(()=>[createVNode(_sfc_main$1r,{info:unref(B).info.info},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0)]),_:1},8,["prepend-avatar"]))}}),_sfc_main$X=defineComponent$1({__name:"JetonBd",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.bds.suivreNomsBd,{idBd:r.id}),C=S(E),T=suivre(g.bds.suivreImage,{idBd:r.id}),R=computed(()=>{if(T.value)return URL.createObjectURL(new Blob([T.value],{type:"image"}))}),{obtImageDéco:A}=utiliserImagesDéco(),I=A("logoBD");return(B,D)=>(openBlock(),createBlock(VChip,{variant:"outlined",class:"me-2 mb-2",label:""},{default:withCtx(()=>[createVNode(VAvatar,{start:""},{default:withCtx(()=>[createVNode(VImg,{src:R.value||unref(I)},null,8,["src"])]),_:1}),createTextVNode(" "+toDisplayString(unref(C)||unref(x)("bds.sansNom"))+" ",1),renderSlot(B.$slots,"default")]),_:3}))}}),_sfc_main$W=defineComponent$1({__name:"SélecteurBd",props:{multiples:{type:Boolean},originales:{}},emits:["selectionnee"],setup(n,{emit:r}){const g=defineAsyncComponent(()=>__vitePreload(()=>import("./NouvelleBd-BQNLeiiK.js"),__vite__mapDeps([37,8,9,10,11]),import.meta.url)),_=r,{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),E=utiliserConstellation(),C=ref$2([]);watchEffect(()=>{_("selectionnee",C.value)});const T=ref$2(),{résultats:R,onTravaille:A}=rechercher(E.recherche.rechercherBdsSelonTexte,{texte:T});return(I,B)=>(openBlock(),createBlock(_sfc_main$$,{multiples:I.multiples,originaux:I.originales,"resultats-recherche":unref(R),"on-travaille":unref(A),"texte-etiquette-recherche":unref(S)("bds.recherche.étiquette"),"texte-aucun-résultat":unref(S)("bds.recherche.aucunRésultat"),onSelectionnee:B[0]||(B[0]=D=>C.value=D),onRequeteModifiee:B[1]||(B[1]=D=>T.value=D)},{résultat:withCtx(({résultat:D,click:N})=>[createVNode(_sfc_main$Y,{résultat:D,onClick:N},null,8,["résultat","onClick"])]),"jeton-objet":withCtx(({id:D,deselectionner:N})=>[createVNode(_sfc_main$x,{id:D},{activator:withCtx(({props:M})=>[createVNode(_sfc_main$X,mergeProps({id:D},{props:M}),{default:withCtx(()=>[createVNode(VIcon,{class:"ms-2",icon:"mdi-close",size:"small",variant:"flat",onClick:()=>N({id:D})},null,8,["onClick"])]),_:2},1040,["id"])]),_:2},1032,["id"])]),nouveau:withCtx(({nouveau:D})=>[createVNode(unref(g),{onNouvelle:D},{activator:withCtx(({props:N})=>[createVNode(VListItem,mergeProps(N,{title:unref(S)("bds.nouvelle.btn"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),_:2},1032,["onNouvelle"])]),_:1},8,["multiples","originaux","resultats-recherche","on-travaille","texte-etiquette-recherche","texte-aucun-résultat"]))}}),_sfc_main$V=defineComponent$1({__name:"JetonTableau",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.tableaux.suivreNomsTableau,{idTableau:r.id}),C=S(E);return(T,R)=>(openBlock(),createBlock(VChip,{"prepend-icon":"mdi-table",variant:"outlined",label:""},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)||unref(x)("tableaux.sansNom")),1)]),_:1}))}}),_sfc_main$U=defineComponent$1({__name:"SélecteurTableau",props:{idBd:{}},emits:["selectionne"],setup(n,{emit:r}){const g=n,_=r,x=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:S}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:E}=S(),C=ref$2(),T=computed(()=>C.value||g.idBd),R=suivre(x.bds.suivreTableauxBd,{idBd:T}),A=ref$2();return watchEffect(()=>{_("selectionne",A.value)}),watch(T,()=>A.value=void 0),(I,B)=>(openBlock(),createElementBlock(Fragment,null,[I.idBd?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$W,{key:0,multiples:!1,onSelectionnee:B[0]||(B[0]=D=>C.value=D[0])})),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createVNode(VSelect,{modelValue:A.value,"onUpdate:modelValue":B[1]||(B[1]=D=>A.value=D),class:"mt-4",loading:!unref(R),disabled:!unref(R),items:unref(R),label:unref(E)("tableaux.sélection.étiquette"),"item-value":"id",variant:"outlined"},{selection:withCtx(({item:D})=>[createVNode(_sfc_main$V,{id:D.value},null,8,["id"])]),item:withCtx(({item:D,props:N})=>[createVNode(_sfc_main$M,mergeProps(Object.fromEntries(Object.entries(N).filter(([M,O])=>M!=="title")),{id:D.value}),null,16,["id"])]),_:1},8,["modelValue","loading","disabled","items","label"]),[[vShow,T.value]])]),_:1})],64))}}),handleGesture=n=>{const{touchstartX:r,touchendX:g,touchstartY:_,touchendY:x}=n,S=.5,E=16;n.offsetX=g-r,n.offsetY=x-_,Math.abs(n.offsetY)<S*Math.abs(n.offsetX)&&(n.left&&g<r-E&&n.left(n),n.right&&g>r+E&&n.right(n)),Math.abs(n.offsetX)<S*Math.abs(n.offsetY)&&(n.up&&x<_-E&&n.up(n),n.down&&x>_+E&&n.down(n))};function touchstart(n,r){const g=n.changedTouches[0];r.touchstartX=g.clientX,r.touchstartY=g.clientY,r.start?.({originalEvent:n,...r})}function touchend(n,r){const g=n.changedTouches[0];r.touchendX=g.clientX,r.touchendY=g.clientY,r.end?.({originalEvent:n,...r}),handleGesture(r)}function touchmove(n,r){const g=n.changedTouches[0];r.touchmoveX=g.clientX,r.touchmoveY=g.clientY,r.move?.({originalEvent:n,...r})}function createHandlers(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:n.left,right:n.right,up:n.up,down:n.down,start:n.start,move:n.move,end:n.end};return{touchstart:g=>touchstart(g,r),touchend:g=>touchend(g,r),touchmove:g=>touchmove(g,r)}}function mounted(n,r){const g=r.value,_=g?.parent?n.parentElement:n,x=g?.options??{passive:!0},S=r.instance?.$.uid;if(!_||!S)return;const E=createHandlers(r.value);_._touchHandlers=_._touchHandlers??Object.create(null),_._touchHandlers[S]=E,keys(E).forEach(C=>{_.addEventListener(C,E[C],x)})}function unmounted(n,r){const g=r.value?.parent?n.parentElement:n,_=r.instance?.$.uid;if(!g?._touchHandlers||!_)return;const x=g._touchHandlers[_];keys(x).forEach(S=>{g.removeEventListener(S,x[S])}),delete g._touchHandlers[_]}const Touch={mounted,unmounted},VWindowSymbol=Symbol.for("vuetify:v-window"),VWindowGroupSymbol=Symbol.for("vuetify:v-window-group"),makeVWindowProps=propsFactory({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:n=>typeof n=="boolean"||n==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...makeComponentProps(),...makeTagProps(),...makeThemeProps()},"VWindow"),VWindow=genericComponent()({name:"VWindow",directives:{Touch},props:makeVWindowProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const{themeClasses:_}=provideTheme(n),{isRtl:x}=useRtl(),{t:S}=useLocale(),E=useGroup(n,VWindowGroupSymbol),C=ref$2(),T=computed(()=>x.value?!n.reverse:n.reverse),R=shallowRef(!1),A=computed(()=>{const j=n.direction==="vertical"?"y":"x",W=(T.value?!R.value:R.value)?"-reverse":"";return`v-window-${j}${W}-transition`}),I=shallowRef(0),B=ref$2(void 0),D=computed(()=>E.items.value.findIndex(j=>E.selected.value.includes(j.id)));watch(D,(j,z)=>{const W=E.items.value.length,X=W-1;W<=2?R.value=j<z:j===X&&z===0?R.value=!0:j===0&&z===X?R.value=!1:R.value=j<z}),provide(VWindowSymbol,{transition:A,isReversed:R,transitionCount:I,transitionHeight:B,rootRef:C});const N=computed(()=>n.continuous||D.value!==0),M=computed(()=>n.continuous||D.value!==E.items.value.length-1);function O(){N.value&&E.prev()}function L(){M.value&&E.next()}const F=computed(()=>{const j=[],z={icon:x.value?n.nextIcon:n.prevIcon,class:`v-window__${T.value?"right":"left"}`,onClick:E.prev,"aria-label":S("$vuetify.carousel.prev")};j.push(N.value?g.prev?g.prev({props:z}):createVNode(VBtn,z,null):createVNode("div",null,null));const W={icon:x.value?n.prevIcon:n.nextIcon,class:`v-window__${T.value?"left":"right"}`,onClick:E.next,"aria-label":S("$vuetify.carousel.next")};return j.push(M.value?g.next?g.next({props:W}):createVNode(VBtn,W,null):createVNode("div",null,null)),j}),U=computed(()=>n.touch===!1?n.touch:{...{left:()=>{T.value?O():L()},right:()=>{T.value?L():O()},start:z=>{let{originalEvent:W}=z;W.stopPropagation()}},...n.touch===!0?{}:n.touch});return useRender(()=>withDirectives(createVNode(n.tag,{ref:C,class:["v-window",{"v-window--show-arrows-on-hover":n.showArrows==="hover"},_.value,n.class],style:n.style},{default:()=>[createVNode("div",{class:"v-window__container",style:{height:B.value}},[g.default?.({group:E}),n.showArrows!==!1&&createVNode("div",{class:"v-window__controls"},[F.value])]),g.additional?.({group:E})]}),[[resolveDirective("touch"),U.value]])),{group:E}}}),makeVWindowItemProps=propsFactory({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...makeComponentProps(),...makeGroupItemProps(),...makeLazyProps()},"VWindowItem"),VWindowItem=genericComponent()({name:"VWindowItem",directives:{Touch},props:makeVWindowItemProps(),emits:{"group:selected":n=>!0},setup(n,r){let{slots:g}=r;const _=inject$1(VWindowSymbol),x=useGroupItem(n,VWindowGroupSymbol),{isBooted:S}=useSsrBoot();if(!_||!x)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const E=shallowRef(!1),C=computed(()=>S.value&&(_.isReversed.value?n.reverseTransition!==!1:n.transition!==!1));function T(){!E.value||!_||(E.value=!1,_.transitionCount.value>0&&(_.transitionCount.value-=1,_.transitionCount.value===0&&(_.transitionHeight.value=void 0)))}function R(){E.value||!_||(E.value=!0,_.transitionCount.value===0&&(_.transitionHeight.value=convertToUnit(_.rootRef.value?.clientHeight)),_.transitionCount.value+=1)}function A(){T()}function I(N){E.value&&nextTick$1(()=>{!C.value||!E.value||!_||(_.transitionHeight.value=convertToUnit(N.clientHeight))})}const B=computed(()=>{const N=_.isReversed.value?n.reverseTransition:n.transition;return C.value?{name:typeof N!="string"?_.transition.value:N,onBeforeEnter:R,onAfterEnter:T,onEnterCancelled:A,onBeforeLeave:R,onAfterLeave:T,onLeaveCancelled:A,onEnter:I}:!1}),{hasContent:D}=useLazy(n,x.isSelected);return useRender(()=>createVNode(MaybeTransition,{transition:B.value,disabled:!S.value},{default:()=>[withDirectives(createVNode("div",{class:["v-window-item",x.selectedClass.value,n.class],style:n.style},[D.value&&g.default?.()]),[[vShow,x.isSelected.value]])]})),{groupItem:x}}}),_sfc_main$T=defineComponent$1({__name:"SélecteurColonne",props:{idTableau:{},tableauChangeable:{type:Boolean}},emits:["selectionnee"],setup(n,{emit:r}){const g=n,_=r,x=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:S}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:E}=S(),{mdAndUp:C}=useDisplay(),T=ref$2(!1),R=ref$2(g.idTableau?1:0),A=["Tableau","Colonne"],I=computed(()=>{switch(A[R.value]){case"Tableau":return"tableaux.colonnes.sélecteur.titreTableau";case"Colonne":return"tableaux.colonnes.sélecteur.titreColonne";default:return""}}),B=computed(()=>{switch(A[R.value]){case"Tableau":return"tableaux.colonnes.sélecteur.sousTitreTableau";case"Colonne":return"tableaux.colonnes.sélecteur.sousTitreColonne";default:return""}}),D=()=>{switch(A[R.value]){case"Colonne":z();break;default:R.value++;break}},N=()=>{switch(A[R.value]){default:R.value--;break}},M=computed(()=>{switch(A[R.value]){case"Tableau":return{actif:!!F.value,visible:!0};case"Colonne":return{actif:!!U.value,visible:!0};default:return{actif:!0,visible:!0}}}),O=computed(()=>{switch(A[R.value]){case"Tableau":return{actif:!1,visible:!1};case"Colonne":return{actif:g.tableauChangeable,visible:g.tableauChangeable};default:return{actif:!0,visible:!0}}}),L=ref$2(),F=ref$2(g.idTableau),U=ref$2(),j=suivre(x.tableaux.suivreColonnesTableau,{idTableau:F}),z=()=>{U.value&&F.value&&_("selectionnee",{idTableau:F.value,idColonne:U.value})};return(W,X)=>{const ie=resolveComponent("ItemColonneTableau"),fe=resolveComponent("JetonColonneTableau");return openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":X[4]||(X[4]=xe=>T.value=xe)},{activator:withCtx(({props:xe})=>[renderSlot(W.$slots,"activator",normalizeProps(guardReactiveProps({props:xe})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(C)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(E)(I.value)),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)(B.value)),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:R.value,"onUpdate:modelValue":X[3]||(X[3]=xe=>R.value=xe),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createVNode(_sfc_main$W,{multiples:!1,onSelectionnee:X[0]||(X[0]=xe=>L.value=xe[0])}),createVNode(_sfc_main$U,{"id-bd":L.value,onSelectionne:X[1]||(X[1]=xe=>F.value=xe)},null,8,["id-bd"])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(VSelect,{modelValue:U.value,"onUpdate:modelValue":X[2]||(X[2]=xe=>U.value=xe),items:unref(j)},{item:withCtx(({item:xe})=>[createVNode(ie,{info:xe.raw},null,8,["info"])]),selection:withCtx(({item:xe})=>[createVNode(fe,{info:xe.raw},null,8,["info"])]),_:1},8,["modelValue","items"])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(_sfc_main$11,{visible:O.value.visible,actif:O.value.actif,onRetour:N},null,8,["visible","actif"]),createVNode(VSpacer),createVNode(_sfc_main$10,{visible:M.value.visible,actif:M.value.actif,onSuivant:D},null,8,["visible","actif"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"])}}}),_sfc_main$S=defineComponent$1({__name:"TexteTronqué",props:{texte:{},longueurMax:{}},setup(n){const r=n,{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),x=computed(()=>[...r.texte].length>r.longueurMax?r.texte.slice(0,Math.max(r.longueurMax-3,3))+_("communs.troisPetitsPoints"):r.texte);return(S,E)=>(openBlock(),createBlock(VTooltip,{location:"bottom","open-delay":500,disabled:x.value===S.texte},{activator:withCtx(({props:C})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(C)),toDisplayString(x.value),17)]),default:withCtx(()=>[createTextVNode(" "+toDisplayString(S.texte),1)]),_:1},8,["disabled"]))}}),_hoisted_1$n={key:2},_hoisted_2$g={key:1},_sfc_main$R=defineComponent$1({__name:"RésultatRechercheVariable",props:{résultat:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:x}=மொழிகளைப்_பயன்படுத்து(),{$மொ:S}=_(),E=L=>computed(()=>{const{de:F,info:U}=r.résultat.résultatObjectif;if(U.type==="texte"&&F===L)return U}),C=E("nom"),T=E("descr"),R=E("id"),A=computed(()=>I.value?icôneCatégorieVariable(I.value):"mdi-variable"),I=suivre(g.variables.suivreCatégorieVariable,{idVariable:r.résultat.id}),B=suivre(g.variables.suivreNomsVariable,{idVariable:r.résultat.id}),D=x(B),N=suivre(g.variables.suivreDescriptionsVariable,{idVariable:r.résultat.id}),M=x(N),O=suivre(g.réseau.suivreAuteursVariable,{idVariable:r.résultat.id});return(L,F)=>(openBlock(),createBlock(VListItem,{"prepend-icon":A.value},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[unref(C)?(openBlock(),createBlock(_sfc_main$1r,{key:0,info:unref(C)},null,8,["info"])):unref(B)?(openBlock(),createElementBlock("span",_hoisted_1$n,toDisplayString(unref(D)||unref(S)("variables.aucunNom")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:1,type:"text"}))]),_:1}),unref(T)||unref(M)?(openBlock(),createBlock(VListItemSubtitle,{key:0},{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(_sfc_main$1r,{key:0,info:unref(T)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$g,toDisplayString(unref(M)||unref(S)("variables.aucuneDescription")),1))]),_:1})):createCommentVNode("",!0),createVNode(_sfc_main$1h,{auteurs:unref(O),"n-max":1},null,8,["auteurs"]),createVNode(_sfc_main$_,{id:L.résultat.id},{default:withCtx(()=>[unref(R)?(openBlock(),createBlock(_sfc_main$1r,{key:0,info:unref(R)},null,8,["info"])):(openBlock(),createBlock(_sfc_main$S,{key:1,texte:L.résultat.id.slice(9),"longueur-max":13},null,8,["texte"]))]),_:1},8,["id"])]),_:1},8,["prepend-icon"]))}}),_sfc_main$Q=defineComponent$1({__name:"SélecteurVariable",props:{multiples:{type:Boolean},originales:{},interdites:{}},emits:["selectionnee"],setup(n,{emit:r}){const g=defineAsyncComponent(()=>__vitePreload(()=>import("./NouvelleVariable-BWhJSZg3.js"),__vite__mapDeps([38,19]),import.meta.url)),_=r,{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),E=utiliserConstellation(),C=ref$2([]);watchEffect(()=>{_("selectionnee",C.value)});const T=ref$2(""),{résultats:R,onTravaille:A}=rechercher(E.recherche.rechercherVariablesSelonTexte,{texte:T});return(I,B)=>(openBlock(),createBlock(_sfc_main$$,{multiples:I.multiples,interdits:I.interdites,originaux:I.originales,"resultats-recherche":unref(R),"on-travaille":unref(A),"texte-etiquette-recherche":unref(S)("variables.recherche.étiquette"),"texte-aucun-résultat":unref(S)("variables.recherche.aucunRésultat"),onSelectionnee:B[0]||(B[0]=D=>C.value=D),onRequeteModifiee:B[1]||(B[1]=D=>T.value=D)},{résultat:withCtx(({résultat:D,click:N})=>[createVNode(_sfc_main$R,{résultat:D,onClick:N},null,8,["résultat","onClick"])]),"jeton-objet":withCtx(({id:D,deselectionner:N})=>[createVNode(_sfc_main$O,{id:D},{activator:withCtx(({props:M})=>[createVNode(_sfc_main$Z,mergeProps({id:D},{props:M}),{default:withCtx(()=>[createVNode(VIcon,{class:"ms-2",icon:"mdi-close",size:"small",variant:"flat",onClick:()=>N({id:D})},null,8,["onClick"])]),_:2},1040,["id"])]),_:2},1032,["id"])]),nouveau:withCtx(({nouveau:D})=>[createVNode(unref(g),{onNouvelle:D},{activator:withCtx(({props:N})=>[createVNode(VListItem,mergeProps(N,{title:unref(S)("variables.nouvelle.btn"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),_:2},1032,["onNouvelle"])]),_:1},8,["multiples","interdits","originaux","resultats-recherche","on-travaille","texte-etiquette-recherche","texte-aucun-résultat"]))}});function highlightResult(n,r,g){if(r==null)return n;if(Array.isArray(r))throw new Error("Multiple matches is not implemented");return typeof r=="number"&&~r?createVNode(Fragment,null,[createVNode("span",{class:"v-combobox__unmask"},[n.substr(0,r)]),createVNode("span",{class:"v-combobox__mask"},[n.substr(r,g)]),createVNode("span",{class:"v-combobox__unmask"},[n.substr(r+g)])]):n}const makeVComboboxProps=propsFactory({autoSelectFirst:{type:[Boolean,String]},clearOnSelect:{type:Boolean,default:!0},delimiters:Array,...makeFilterProps({filterKeys:["title"]}),...makeSelectProps({hideNoData:!0,returnObject:!0}),...omit(makeVTextFieldProps({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...makeTransitionProps$1({transition:!1})},"VCombobox"),VCombobox=genericComponent()({name:"VCombobox",props:makeVComboboxProps(),emits:{"update:focused":n=>!0,"update:modelValue":n=>!0,"update:search":n=>!0,"update:menu":n=>!0},setup(n,r){let{emit:g,slots:_}=r;const{t:x}=useLocale(),S=ref$2(),E=shallowRef(!1),C=shallowRef(!0),T=shallowRef(!1),R=ref$2(),A=ref$2(),I=useProxiedModel(n,"menu"),B=computed({get:()=>I.value,set:Se=>{I.value&&!Se&&R.value?.ΨopenChildren.size||(I.value=Se)}}),D=shallowRef(-1);let N=!1;const M=computed(()=>S.value?.color),O=computed(()=>B.value?n.closeText:n.openText),{items:L,transformIn:F,transformOut:U}=useItems(n),{textColorClasses:j,textColorStyles:z}=useTextColor(M),W=useProxiedModel(n,"modelValue",[],Se=>F(wrapInArray(Se)),Se=>{const $e=U(Se);return n.multiple?$e:$e[0]??null}),X=useForm(n),ie=computed(()=>!!(n.chips||_.chip)),fe=computed(()=>ie.value||!!_.selection),xe=shallowRef(!n.multiple&&!fe.value?W.value[0]?.title??"":""),we=computed({get:()=>xe.value,set:Se=>{if(xe.value=Se??"",!n.multiple&&!fe.value&&(W.value=[transformItem$1(n,Se)]),Se&&n.multiple&&n.delimiters?.length){const $e=Se.split(new RegExp(`(?:${n.delimiters.join("|")})+`));$e.length>1&&($e.forEach(_e=>{_e=_e.trim(),_e&&Ae(transformItem$1(n,_e))}),xe.value="")}Se||(D.value=-1),C.value=!Se}}),G=computed(()=>typeof n.counterValue=="function"?n.counterValue(W.value):typeof n.counterValue=="number"?n.counterValue:n.multiple?W.value.length:we.value.length);watch(xe,Se=>{N?nextTick$1(()=>N=!1):E.value&&!B.value&&(B.value=!0),g("update:search",Se)}),watch(W,Se=>{!n.multiple&&!fe.value&&(xe.value=Se[0]?.title??"")});const{filteredItems:J,getMatches:q}=useFilter(n,L,()=>C.value?"":we.value),H=computed(()=>n.hideSelected?J.value.filter(Se=>!W.value.some($e=>$e.value===Se.value)):J.value),ve=computed(()=>W.value.map(Se=>Se.value)),Z=computed(()=>(n.autoSelectFirst===!0||n.autoSelectFirst==="exact"&&we.value===H.value[0]?.title)&&H.value.length>0&&!C.value&&!T.value),ce=computed(()=>n.hideNoData&&!H.value.length||X.isReadonly.value||X.isDisabled.value),ue=ref$2(),se=useScrolling(ue,S);function te(Se){N=!0,n.openOnClear&&(B.value=!0)}function Y(){ce.value||(B.value=!0)}function be(Se){ce.value||(E.value&&(Se.preventDefault(),Se.stopPropagation()),B.value=!B.value)}function ye(Se){Se.key!==" "&&checkPrintable(Se)&&S.value?.focus()}function Ie(Se){if(isComposingIgnoreKey(Se)||X.isReadonly.value)return;const $e=S.value.selectionStart,_e=W.value.length;if(["Enter","ArrowDown","ArrowUp"].includes(Se.key)&&Se.preventDefault(),["Enter","ArrowDown"].includes(Se.key)&&(B.value=!0),["Escape"].includes(Se.key)&&(B.value=!1),["Enter","Escape","Tab"].includes(Se.key)&&(Z.value&&["Enter","Tab"].includes(Se.key)&&!W.value.some(Oe=>{let{value:Ke}=Oe;return Ke===H.value[0].value})&&Ae(J.value[0]),C.value=!0),Se.key==="ArrowDown"&&Z.value&&ue.value?.focus("next"),Se.key==="Enter"&&we.value&&(Ae(transformItem$1(n,we.value)),fe.value&&(xe.value="")),["Backspace","Delete"].includes(Se.key)){if(!n.multiple&&fe.value&&W.value.length>0&&!we.value)return Ae(W.value[0],!1);if(~D.value){Se.preventDefault();const Oe=D.value;Ae(W.value[D.value],!1),D.value=Oe>=_e-1?_e-2:Oe}else Se.key==="Backspace"&&!we.value&&(D.value=_e-1);return}if(n.multiple)if(Se.key==="ArrowLeft"){if(D.value<0&&$e>0)return;const Oe=D.value>-1?D.value-1:_e-1;W.value[Oe]?D.value=Oe:(D.value=-1,S.value.setSelectionRange(we.value.length,we.value.length))}else if(Se.key==="ArrowRight"){if(D.value<0)return;const Oe=D.value+1;W.value[Oe]?D.value=Oe:(D.value=-1,S.value.setSelectionRange(0,0))}else~D.value&&checkPrintable(Se)&&(D.value=-1)}function ke(){n.eager&&A.value?.calculateVisibleItems()}function Ce(){E.value&&(C.value=!0,S.value?.focus())}function Ae(Se){let $e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!(!Se||Se.props.disabled))if(n.multiple){const _e=W.value.findIndex(Ke=>n.valueComparator(Ke.value,Se.value)),Oe=$e??!~_e;if(~_e){const Ke=Oe?[...W.value,Se]:[...W.value];Ke.splice(_e,1),W.value=Ke}else Oe&&(W.value=[...W.value,Se]);n.clearOnSelect&&(we.value="")}else{const _e=$e!==!1;W.value=_e?[Se]:[],xe.value=_e&&!fe.value?Se.title:"",nextTick$1(()=>{B.value=!1,C.value=!0})}}function Ne(Se){E.value=!0,setTimeout(()=>{T.value=!0})}function We(Se){T.value=!1}function Be(Se){(Se==null||Se===""&&!n.multiple&&!fe.value)&&(W.value=[])}return watch(E,(Se,$e)=>{if(!(Se||Se===$e)&&(D.value=-1,B.value=!1,we.value)){if(n.multiple){Ae(transformItem$1(n,we.value));return}if(!fe.value)return;W.value.some(_e=>{let{title:Oe}=_e;return Oe===we.value})?xe.value="":Ae(transformItem$1(n,we.value))}}),watch(B,()=>{if(!n.hideSelected&&B.value&&W.value.length){const Se=H.value.findIndex($e=>W.value.some(_e=>n.valueComparator(_e.value,$e.value)));IN_BROWSER&&window.requestAnimationFrame(()=>{Se>=0&&A.value?.scrollToIndex(Se)})}}),watch(()=>n.items,(Se,$e)=>{B.value||E.value&&!$e.length&&Se.length&&(B.value=!0)}),useRender(()=>{const Se=!!(!n.hideNoData||H.value.length||_["prepend-item"]||_["append-item"]||_["no-data"]),$e=W.value.length>0,_e=VTextField.filterProps(n);return createVNode(VTextField,mergeProps({ref:S},_e,{modelValue:we.value,"onUpdate:modelValue":[Oe=>we.value=Oe,Be],focused:E.value,"onUpdate:focused":Oe=>E.value=Oe,validationValue:W.externalValue,counterValue:G.value,dirty:$e,class:["v-combobox",{"v-combobox--active-menu":B.value,"v-combobox--chips":!!n.chips,"v-combobox--selection-slot":!!fe.value,"v-combobox--selecting-index":D.value>-1,[`v-combobox--${n.multiple?"multiple":"single"}`]:!0},n.class],style:n.style,readonly:X.isReadonly.value,placeholder:$e?void 0:n.placeholder,"onClick:clear":te,"onMousedown:control":Y,onKeydown:Ie}),{..._,default:()=>createVNode(Fragment,null,[createVNode(VMenu,mergeProps({ref:R,modelValue:B.value,"onUpdate:modelValue":Oe=>B.value=Oe,activator:"parent",contentClass:"v-combobox__content",disabled:ce.value,eager:n.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:n.transition,onAfterEnter:ke,onAfterLeave:Ce},n.menuProps),{default:()=>[Se&&createVNode(VList,mergeProps({ref:ue,selected:ve.value,selectStrategy:n.multiple?"independent":"single-independent",onMousedown:Oe=>Oe.preventDefault(),onKeydown:ye,onFocusin:Ne,onFocusout:We,tabindex:"-1","aria-live":"polite",color:n.itemColor??n.color},se,n.listProps),{default:()=>[_["prepend-item"]?.(),!H.value.length&&!n.hideNoData&&(_["no-data"]?.()??createVNode(VListItem,{key:"no-data",title:x(n.noDataText)},null)),createVNode(VVirtualScroll,{ref:A,renderless:!0,items:H.value},{default:Oe=>{let{item:Ke,index:Me,itemRef:Le}=Oe;const ze=mergeProps(Ke.props,{ref:Le,key:Ke.value,active:Z.value&&Me===0?!0:void 0,onClick:()=>Ae(Ke,null)});return _.item?.({item:Ke,index:Me,props:ze})??createVNode(VListItem,mergeProps(ze,{role:"option"}),{prepend:Je=>{let{isSelected:Qe}=Je;return createVNode(Fragment,null,[n.multiple&&!n.hideSelected?createVNode(VCheckboxBtn,{key:Ke.value,modelValue:Qe,ripple:!1,tabindex:"-1"},null):void 0,Ke.props.prependAvatar&&createVNode(VAvatar,{image:Ke.props.prependAvatar},null),Ke.props.prependIcon&&createVNode(VIcon,{icon:Ke.props.prependIcon},null)])},title:()=>C.value?Ke.title:highlightResult(Ke.title,q(Ke)?.title,we.value?.length??0)})}}),_["append-item"]?.()]})]}),W.value.map((Oe,Ke)=>{function Me(Qe){Qe.stopPropagation(),Qe.preventDefault(),Ae(Oe,!1)}const Le={"onClick:close":Me,onKeydown(Qe){Qe.key!=="Enter"&&Qe.key!==" "||(Qe.preventDefault(),Qe.stopPropagation(),Me(Qe))},onMousedown(Qe){Qe.preventDefault(),Qe.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},ze=ie.value?!!_.chip:!!_.selection,Je=ze?ensureValidVNode(ie.value?_.chip({item:Oe,index:Ke,props:Le}):_.selection({item:Oe,index:Ke})):void 0;if(!(ze&&!Je))return createVNode("div",{key:Oe.value,class:["v-combobox__selection",Ke===D.value&&["v-combobox__selection--selected",j.value]],style:Ke===D.value?z.value:{}},[ie.value?_.chip?createVNode(VDefaultsProvider,{key:"chip-defaults",defaults:{VChip:{closable:n.closableChips,size:"small",text:Oe.title}}},{default:()=>[Je]}):createVNode(VChip,mergeProps({key:"chip",closable:n.closableChips,size:"small",text:Oe.title,disabled:Oe.props.disabled},Le),null):Je??createVNode("span",{class:"v-combobox__selection-text"},[Oe.title,n.multiple&&Ke<W.value.length-1&&createVNode("span",{class:"v-combobox__selection-comma"},[createTextVNode(",")])])])})]),"append-inner":function(){for(var Oe=arguments.length,Ke=new Array(Oe),Me=0;Me<Oe;Me++)Ke[Me]=arguments[Me];return createVNode(Fragment,null,[_["append-inner"]?.(...Ke),(!n.hideNoData||n.items.length)&&n.menuIcon?createVNode(VIcon,{class:"v-combobox__menu-icon",icon:n.menuIcon,onMousedown:be,onClick:noop$2,"aria-label":x(O.value),title:x(O.value),tabindex:"-1"},null):void 0])}})}),forwardRefs({isFocused:E,isPristine:C,menu:B,search:we,selectionIndex:D,filteredItems:J,select:Ae},S)}}),_hoisted_1$m={class:"text-center"},_hoisted_2$f={class:"text-center"},_sfc_main$P=defineComponent$1({__name:"NouvelleRègle",props:{source:{},categorieVariable:{}},emits:["sauvegarder"],setup(n,{emit:r}){const g=n,_=r,{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),{mdAndUp:E}=useDisplay(),C=ref$2(!1),T=ref$2(0),R=["TypeRègle","BorneFixeOuDynamique","ValeurBorne","CatégorieFixeOuDynamique","ValeurCatégorie","Confirmer"],A=ref$2(),I=()=>{A.value="existe",T.value=R.indexOf("Confirmer")},B=()=>{A.value="borne",T.value=R.indexOf("BorneFixeOuDynamique")},D=()=>{A.value="catégorique",T.value=R.indexOf("CatégorieFixeOuDynamique")},N=computed(()=>{switch(R[T.value]){case"BorneFixeOuDynamique":return"règles.nouvelle.titreBorneFixeOuDynamique";case"CatégorieFixeOuDynamique":return"règles.nouvelle.titreCatégorieFixeOuDynamique";case"TypeRègle":return"règles.nouvelle.titreTypeRègle";case"Confirmer":return"règles.nouvelle.titreConfirmer";case"ValeurBorne":return"règles.nouvelle.titreValeurBorne";case"ValeurCatégorie":return"règles.nouvelle.titreValeurCatégorie";default:return""}}),M=computed(()=>{switch(R[T.value]){case"BorneFixeOuDynamique":return"règles.nouvelle.sousTitreBorneFixeOuDynamique";case"CatégorieFixeOuDynamique":return"règles.nouvelle.sousTitreCatégorieFixeOuDynamique";case"TypeRègle":return"règles.nouvelle.sousTitreTypeRègle";case"Confirmer":return"règles.nouvelle.sousTitreConfirmer";case"ValeurBorne":return"règles.nouvelle.sousTitreValeurBorne";case"ValeurCatégorie":return"règles.nouvelle.sousTitreValeurCatégorie";default:return""}}),O=()=>{switch(R[T.value]){case"ValeurBorne":T.value=R.indexOf("Confirmer");break;case"ValeurCatégorie":T.value=R.indexOf("Confirmer");break;default:T.value++;break}},L=()=>{switch(R[T.value]){case"BorneFixeOuDynamique":T.value=R.indexOf("TypeRègle");break;case"CatégorieFixeOuDynamique":T.value=R.indexOf("TypeRègle");break;case"Confirmer":T.value=R.indexOf(A.value==="existe"?"TypeRègle":A.value==="borne"?"BorneFixeOuDynamique":"CatégorieFixeOuDynamique");break;default:T.value--;break}},F=computed(()=>{switch(R[T.value]){case"TypeRègle":return{actif:!1,visible:!1};case"BorneFixeOuDynamique":return{actif:!!W.value,visible:!0};case"CatégorieFixeOuDynamique":return{actif:!!G.value,visible:!0};case"ValeurBorne":return{actif:!!ie.value&&!!(W.value==="fixe"?fe.value:W.value==="dynamiqueColonne"?we.value:xe.value?.length),visible:!0};case"ValeurCatégorie":return{actif:G.value==="fixe"?!!J.value:!!q.value,visible:!1};case"Confirmer":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),U=computed(()=>{switch(R[T.value]){case"TypeRègle":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),j=computed(()=>g.source.type==="tableau"?g.source.idTableau:void 0),z=computed(()=>g.categorieVariable==="numérique"||g.categorieVariable==="horoDatage"),W=ref$2(),X=ce=>{W.value=ce,O()},ie=ref$2(),fe=ref$2(),xe=ref$2(),we=ref$2(),G=ref$2(),J=ref$2(),q=ref$2(),H=ce=>{G.value=ce,O()},ve=async ce=>{_("sauvegarder",ce)},Z=async()=>{if(!A.value)throw new Error("Cheminement non défini");if(A.value==="existe")await ve({typeRègle:"existe",détails:{}});else if(A.value==="borne"){if(!ie.value)throw new Error("Opérateur borne non défini");let ce;switch(W.value){case"fixe":{if(!fe.value)throw new Error("Valeur borne fixe non définie");ce={type:"fixe",op:ie.value,val:fe.value};break}case"dynamiqueColonne":{if(!we.value)throw new Error("Valeur borne dynamique colonne non définie");ce={type:"dynamiqueColonne",op:ie.value,val:we.value};break}case"dynamiqueVariable":{if(!xe.value?.length)throw new Error("Valeur borne dynamique variable non définie");ce={type:"dynamiqueVariable",op:ie.value,val:xe.value[0]};break}default:throw new Error(W.value)}await ve({typeRègle:"bornes",détails:ce})}else{let ce;switch(G.value){case"fixe":{if(!J.value)throw new Error("Valeur borne fixe non définie");ce={type:"fixe",options:J.value};break}case"dynamique":{if(!q.value)throw new Error("Valeur borne dynamique colonne non définie");ce={type:"dynamique",...q.value};break}default:throw new Error(G.value)}await ve({typeRègle:"valeurCatégorique",détails:ce})}C.value=!1,T.value=0};return(ce,ue)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ue[16]||(ue[16]=se=>C.value=se)},{activator:withCtx(({props:se})=>[renderSlot(ce.$slots,"activator",normalizeProps(guardReactiveProps({props:se})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","max-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(S)(N.value)),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)(M.value)),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":ue[15]||(ue[15]=se=>T.value=se),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:0},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$m,[createVNode(VBtn,{class:"ma-3",variant:"flat",color:"primary",onClick:ue[0]||(ue[0]=()=>I())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("règles.types.existe")),1)]),_:1}),z.value?(openBlock(),createBlock(VBtn,{key:0,class:"ma-3",variant:"outlined",onClick:ue[1]||(ue[1]=()=>B())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("règles.types.borne")),1)]),_:1})):createCommentVNode("",!0),createCommentVNode("",!0)])]),_:1}),createVNode(VWindowItem,{value:1},{default:withCtx(()=>[createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:ue[3]||(ue[3]=()=>X("fixe"))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("règles.nouvelle.borneFixe")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:ue[4]||(ue[4]=()=>X("dynamiqueVariable"))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("règles.nouvelle.borneDynamiqueVariable")),1)]),_:1}),j.value?(openBlock(),createBlock(VBtn,{key:0,class:"ma-3",variant:"outlined",onClick:ue[5]||(ue[5]=()=>X("dynamiqueColonne"))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("règles.nouvelle.borneDynamiqueColonne")),1)]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VWindowItem,{value:2},{default:withCtx(()=>[createVNode(VSelect,{modelValue:ie.value,"onUpdate:modelValue":ue[6]||(ue[6]=se=>ie.value=se),items:[">",">=","<","<="],variant:"outlined"},null,8,["modelValue"]),W.value==="fixe"?(openBlock(),createBlock(VTextField,{key:0,modelValue:fe.value,"onUpdate:modelValue":ue[7]||(ue[7]=se=>fe.value=se),variant:"outlined"},null,8,["modelValue"])):W.value==="dynamiqueVariable"?(openBlock(),createBlock(_sfc_main$Q,{key:1,multiples:!1,onSelectionnee:ue[8]||(ue[8]=se=>xe.value=se)})):W.value==="dynamiqueColonne"?(openBlock(),createBlock(_sfc_main$T,{key:2,"id-tableau":j.value,"tableau-changeable":!1,onSelectionnee:ue[9]||(ue[9]=se=>we.value=se.idColonne)},null,8,["id-tableau"])):createCommentVNode("",!0)]),_:1}),createVNode(VWindowItem,{value:3},{default:withCtx(()=>[createVNode(VBtn,{class:"ma-3",variant:"outlined",onClick:ue[10]||(ue[10]=()=>H("fixe"))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("règles.nouvelle.catégoriesFixes")),1)]),_:1}),createVNode(VBtn,{class:"ma-3",variant:"outlined",disabled:!j.value,onClick:ue[11]||(ue[11]=()=>H("dynamique"))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("règles.nouvelle.catégoriesDynamique")),1)]),_:1},8,["disabled"])]),_:1}),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[G.value==="fixe"?(openBlock(),createBlock(VCombobox,{key:0,modelValue:J.value,"onUpdate:modelValue":ue[12]||(ue[12]=se=>J.value=se),multiple:"",chips:"",clearable:""},null,8,["modelValue"])):(openBlock(),createBlock(_sfc_main$T,{key:1,"id-tableau":j.value,"tableau-changeable":!0,onSelectionnee:ue[13]||(ue[13]=se=>q.value={tableau:se.idTableau,colonne:se.idColonne})},null,8,["id-tableau"]))]),_:1}),createVNode(VWindowItem,{value:5},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$f,[createVNode(VBtn,{class:"mt-3",variant:"outlined",onClick:ue[14]||(ue[14]=()=>Z())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("règles.nouvelle.confirmer")),1)]),_:1})])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(_sfc_main$11,{visible:U.value.visible,actif:U.value.actif,onRetour:L},null,8,["visible","actif"]),createVNode(VSpacer),createVNode(_sfc_main$10,{visible:F.value.visible,actif:F.value.actif,onSuivant:O},null,8,["visible","actif"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$l={key:0},_sfc_main$O=defineComponent$1({__name:"CarteVariable",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),S=suivre(g.suivrePermission,{idObjet:r.id}),E=suivre(g.variables.suivreNomsVariable,{idVariable:r.id}),C=async W=>{const{àEffacer:X,àAjouter:ie}=ajusterTexteTraductible({anciennes:E.value,nouvelles:W});for(const fe of X)await g.variables.effacerNomVariable({idVariable:r.id,langue:fe});return await g.variables.sauvegarderNomsVariable({idVariable:r.id,noms:ie})},T=suivre(g.variables.suivreDescriptionsVariable,{idVariable:r.id}),R=async W=>{const{àEffacer:X,àAjouter:ie}=ajusterTexteTraductible({anciennes:T.value,nouvelles:W});for(const fe of X)await g.variables.effacerDescriptionVariable({idVariable:r.id,langue:fe});return await g.variables.sauvegarderDescriptionsVariable({idVariable:r.id,descriptions:ie})},A=computed(()=>I.value?icôneCatégorieVariable(I.value):"mdi-variable"),I=suivre(g.variables.suivreCatégorieVariable,{idVariable:r.id}),B=ref$2(!1),D=ref$2(),N=computed(()=>{if(D.value)return{type:B.value?"liste":"simple",catégorie:D.value}});watchEffect(()=>{B.value=I.value?.type==="liste",D.value=I.value?.catégorie});const M=computed(()=>{if(N.value){const{type:W,catégorie:X}=N.value;return W!==I.value?.type||X!==I.value.catégorie}else return!1}),O=async()=>{N.value&&M.value&&await g.variables.sauvegarderCatégorieVariable({idVariable:r.id,catégorie:N.value})},L=suivre(g.réseau.suivreAuteursVariable,{idVariable:r.id}),F=suivre(g.variables.suivreRèglesVariable,{idVariable:r.id}),U=async W=>{await g.variables.ajouterRègleVariable({idVariable:r.id,règle:W})},j=async W=>{await g.variables.effacerRègleVariable({idVariable:r.id,idRègle:W})},z=async()=>{await g.variables.effacerVariable({idVariable:r.id})};return(W,X)=>(openBlock(),createBlock(_sfc_main$16,{id:W.id,noms:unref(E),descriptions:unref(T),auteurs:unref(L),"fichiers-epinglables":!1,"sauvegarde-possible":"",onEffacer:z,onAjusterNoms:X[3]||(X[3]=ie=>C(ie)),onAjusterDescriptions:X[4]||(X[4]=ie=>R(ie)),onSauvegarder:X[5]||(X[5]=()=>O())},{activator:withCtx(({props:ie})=>[renderSlot(W.$slots,"activator",normalizeProps(guardReactiveProps({props:ie})))]),default:withCtx(()=>[createVNode(_sfc_main$1e,{titre:unref(x)("variables.catégorie"),"en-attente":!unref(I)},null,8,["titre","en-attente"]),unref(S)&&unref(I)?(openBlock(),createElementBlock("span",_hoisted_1$l,[createVNode(VSelect,{modelValue:D.value,"onUpdate:modelValue":X[0]||(X[0]=ie=>D.value=ie),items:unref(catégoriesBase),label:unref(x)("variables.catégorie"),variant:"outlined"},{selection:withCtx(({item:ie})=>[createVNode(VIcon,{start:"",icon:unref(icôneCatégorieVariable)({type:"simple",catégorie:ie.raw})||"mdi-variable"},null,8,["icon"]),createTextVNode(" "+toDisplayString(unref(x)(`variables.catégories.${ie.raw}`)),1)]),item:withCtx(({item:ie,props:fe})=>[createVNode(VListItem,mergeProps(fe,{title:unref(x)(`variables.catégories.${ie.raw}`),subtitle:unref(x)(`variables.indicesCatégories.${ie.raw}`),"prepend-icon":unref(icôneCatégorieVariable)({type:"simple",catégorie:ie.raw})||"mdi-variable"}),null,16,["title","subtitle","prepend-icon"])]),_:1},8,["modelValue","items","label"]),createVNode(VCheckbox,{modelValue:B.value,"onUpdate:modelValue":X[1]||(X[1]=ie=>B.value=ie),label:unref(x)("variables.nouvelle.typeListe")},null,8,["modelValue","label"])])):unref(I)?(openBlock(),createBlock(VChip,{key:1,label:"",variant:"outlined","prepend-icon":A.value},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(x)(`variables.catégories.${unref(I).catégorie}`)),1)]),_:1},8,["prepend-icon"])):createCommentVNode("",!0),createVNode(_sfc_main$1e,{titre:unref(x)("variables.règles"),"en-attente":!unref(F)},null,8,["titre","en-attente"]),unref(F)?(openBlock(),createBlock(VList,{key:2},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(F),ie=>(openBlock(),createBlock(_sfc_main$12,{key:ie.id,regle:ie,effacable:!!(unref(S)&&ie.règle.typeRègle!=="catégorie"),"autorisation-modifier":!!unref(S),onEffacer:()=>j(ie.id)},null,8,["regle","effacable","autorisation-modifier","onEffacer"]))),128)),createVNode(VDivider,{class:"mt-2"}),unref(S)?(openBlock(),createBlock(_sfc_main$P,{key:0,source:{type:"variable"},"categorie-variable":D.value,onSauvegarder:X[2]||(X[2]=ie=>U(ie))},{activator:withCtx(({props:ie})=>[createVNode(VListItem,mergeProps(ie,{"prepend-icon":"mdi-plus"}),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(x)("variables.règles.nouvelle")),1)]),_:1})]),_:2},1040)]),_:1},8,["categorie-variable"])):createCommentVNode("",!0)]),_:1})):createCommentVNode("",!0)]),_:3},8,["id","noms","descriptions","auteurs"]))}}),_hoisted_1$k={key:0},_hoisted_2$e={key:0},_sfc_main$N=defineComponent$1({__name:"ItemVariable",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=computed(()=>C.value?icôneCatégorieVariable(C.value):"mdi-variable"),C=suivre(g.variables.suivreCatégorieVariable,{idVariable:r.id}),T=suivre(g.variables.suivreNomsVariable,{idVariable:r.id}),R=S(T),A=suivre(g.variables.suivreDescriptionsVariable,{idVariable:r.id}),I=S(A);return(B,D)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>[createTextVNode(toDisplayString(E.value),1)]),_:1})]),title:withCtx(()=>[renderSlot(B.$slots,"default",{},()=>[unref(T)?(openBlock(),createElementBlock("span",_hoisted_1$k,toDisplayString(unref(R)||unref(x)("variables.sansNom")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:1,type:"list-item-two-line"}))])]),subtitle:withCtx(()=>[renderSlot(B.$slots,"default",{},()=>[unref(I)?(openBlock(),createElementBlock("span",_hoisted_2$e,toDisplayString(unref(I)),1)):createCommentVNode("",!0)])]),append:withCtx(()=>[createVNode(_sfc_main$1o,{id:B.id},null,8,["id"])]),_:3}))}}),_sfc_main$M=defineComponent$1({__name:"ItemTableau",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.tableaux.suivreNomsTableau,{idTableau:r.id}),C=S(E),T=suivre(g.tableaux.suivreVariables,{idTableau:r.id});return(R,A)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>A[0]||(A[0]=[createTextVNode("mdi-table")])),_:1})]),title:withCtx(()=>[createTextVNode(toDisplayString(unref(C)||unref(x)("tableaux.sansNom")),1)]),default:withCtx(()=>[createVNode(_sfc_main$1j,{items:unref(T),"n-max":3},{jeton:withCtx(({id:I})=>[createVNode(_sfc_main$O,{id:I},{activator:withCtx(({props:B})=>[createVNode(_sfc_main$Z,mergeProps(B,{id:I,size:"small"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:I})=>[createVNode(_sfc_main$O,{id:I},{activator:withCtx(({props:B})=>[createVNode(_sfc_main$N,mergeProps(B,{id:I}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"])]),_:1}))}}),_sfc_main$L=defineComponent$1({__name:"IcôneQualitéBd",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),_=suivre(g.bds.suivreQualitéBd,{idBd:r.id}),x=computed(()=>_.value?.total);return(S,E)=>(openBlock(),createBlock(VProgressCircular,{rotate:x.value!==void 0?270:void 0,"model-value":x.value!==void 0?x.value*100:0,indeterminate:x.value===void 0,color:x.value!==void 0?unref(couleurScore)(x.value).couleur:"grey lighten-2",size:25,width:5},null,8,["rotate","model-value","indeterminate","color"]))}}),_hoisted_1$j={class:"ms-2"},_sfc_main$K=defineComponent$1({__name:"TexteQualitéBd",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),S=suivre(g.bds.suivreQualitéBd,{idBd:r.id}),E=computed(()=>S.value?.total);return(C,T)=>(openBlock(),createElementBlock("span",_hoisted_1$j,[createTextVNode(toDisplayString(unref(x)("bds.qualité.titre"))+": ",1),createBaseVNode("span",{style:normalizeStyle(`color:${unref(couleurScore)(E.value!==void 0?E.value:null).couleur}`),class:"font-weight-bold"},toDisplayString(E.value!==void 0?unref(x)("bds.note."+unref(couleurScore)(E.value).note):unref(x)("communs.pointInterrogation")),5)]))}}),_sfc_main$J=defineComponent$1({__name:"JetonQualitéBd",props:{id:{}},setup(n){return(r,g)=>(openBlock(),createBlock(VChip,{variant:"outlined",label:""},{prepend:withCtx(()=>[createVNode(_sfc_main$L,{id:r.id},null,8,["id"])]),default:withCtx(()=>[createVNode(_sfc_main$K,{id:r.id},null,8,["id"])]),_:1}))}}),_hoisted_1$i={key:0,class:"ms-2"},_sfc_main$I=defineComponent$1({__name:"JetonRéplications",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{résultats:S}=rechercher(g.réseau.suivreRéplications,{idObjet:r.id,profondeur:5}),E=computed(()=>S.value?.dispositifs.length||0),C=computed(()=>S.value?.dispositifs.filter(I=>!I.dispositif.vuÀ).length||0),T=suivre(g.suivreIdCompte),R=computed(()=>!!S.value?.membres.find(I=>I.infoMembre.idCompte===T.value)),A=computed(()=>R.value?"mdi-pin":"mdi-pin-outline");return(I,B)=>(openBlock(),createBlock(VChip,{variant:"outlined",label:""},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode(toDisplayString(A.value),1)]),_:1}),createTextVNode(" "+toDisplayString(unref(x)("réplications.réplications",{n:E.value},E.value))+" ",1),E.value>0?(openBlock(),createElementBlock("span",_hoisted_1$i,toDisplayString(unref(x)("réplications.réplicationsEnLigne",[C.value])),1)):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$H=defineComponent$1({__name:"JetonConditionLicence",props:{condition:{}},setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r();return(_,x)=>(openBlock(),createBlock(VTooltip,{location:"bottom"},{activator:withCtx(({props:S})=>[createVNode(VChip,mergeProps(S,{variant:"outlined",size:"small",label:"",class:"ma-1 my-1"}),{default:withCtx(()=>[createVNode(VIcon,{start:"",color:"blue"},{default:withCtx(()=>x[0]||(x[0]=[createTextVNode(" mdi-information-outline ")])),_:1}),createTextVNode(" "+toDisplayString(unref(g)(`licences.conditions.${_.condition}`)),1)]),_:2},1040)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(g)(`licences.détails.conditions.${_.condition}`)),1)]),_:1}))}}),_sfc_main$G=defineComponent$1({__name:"JetonDroitLicence",props:{droit:{}},setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r();return(_,x)=>(openBlock(),createBlock(VTooltip,{location:"bottom"},{activator:withCtx(({props:S})=>[createVNode(VChip,mergeProps(S,{variant:"outlined",size:"small",label:"",class:"ma-1 my-1"}),{default:withCtx(()=>[createVNode(VIcon,{start:"",color:"success"},{default:withCtx(()=>x[0]||(x[0]=[createTextVNode(" mdi-check ")])),_:1}),createTextVNode(" "+toDisplayString(unref(g)(`licences.droits.${_.droit}`)),1)]),_:2},1040)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(g)(`licences.détails.droits.${_.droit}`)),1)]),_:1}))}}),_sfc_main$F=defineComponent$1({__name:"JetonLimitationLicence",props:{limitation:{}},setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r();return(_,x)=>(openBlock(),createBlock(VTooltip,{location:"bottom"},{activator:withCtx(({props:S})=>[createVNode(VChip,mergeProps(S,{variant:"outlined",size:"small",label:"",class:"ma-1 my-1"}),{default:withCtx(()=>[createVNode(VIcon,{start:"",color:"error"},{default:withCtx(()=>x[0]||(x[0]=[createTextVNode(" mdi-close ")])),_:1}),createTextVNode(" "+toDisplayString(unref(g)(`licences.limitations.${_.limitation}`)),1)]),_:2},1040)]),default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(g)(`licences.détails.limitations.${_.limitation}`)),1)]),_:1}))}}),VAlertTitle=createSimpleFunctional("v-alert-title"),allowedTypes=["success","info","warning","error"],makeVAlertProps=propsFactory({border:{type:[Boolean,String],validator:n=>typeof n=="boolean"||["top","end","bottom","start"].includes(n)},borderColor:String,closable:Boolean,closeIcon:{type:IconValue,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:n=>allowedTypes.includes(n)},...makeComponentProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeLocationProps(),...makePositionProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"flat"})},"VAlert"),VAlert=genericComponent()({name:"VAlert",props:makeVAlertProps(),emits:{"click:close":n=>!0,"update:modelValue":n=>!0},setup(n,r){let{emit:g,slots:_}=r;const x=useProxiedModel(n,"modelValue"),S=computed(()=>{if(n.icon!==!1)return n.type?n.icon??`$${n.type}`:n.icon}),E=computed(()=>({color:n.color??n.type,variant:n.variant})),{themeClasses:C}=provideTheme(n),{colorClasses:T,colorStyles:R,variantClasses:A}=useVariant(E),{densityClasses:I}=useDensity(n),{dimensionStyles:B}=useDimension(n),{elevationClasses:D}=useElevation(n),{locationStyles:N}=useLocation(n),{positionClasses:M}=usePosition(n),{roundedClasses:O}=useRounded(n),{textColorClasses:L,textColorStyles:F}=useTextColor(toRef(n,"borderColor")),{t:U}=useLocale(),j=computed(()=>({"aria-label":U(n.closeLabel),onClick(z){x.value=!1,g("click:close",z)}}));return()=>{const z=!!(_.prepend||S.value),W=!!(_.title||n.title),X=!!(_.close||n.closable);return x.value&&createVNode(n.tag,{class:["v-alert",n.border&&{"v-alert--border":!!n.border,[`v-alert--border-${n.border===!0?"start":n.border}`]:!0},{"v-alert--prominent":n.prominent},C.value,T.value,I.value,D.value,M.value,O.value,A.value,n.class],style:[R.value,B.value,N.value,n.style],role:"alert"},{default:()=>[genOverlays(!1,"v-alert"),n.border&&createVNode("div",{key:"border",class:["v-alert__border",L.value],style:F.value},null),z&&createVNode("div",{key:"prepend",class:"v-alert__prepend"},[_.prepend?createVNode(VDefaultsProvider,{key:"prepend-defaults",disabled:!S.value,defaults:{VIcon:{density:n.density,icon:S.value,size:n.prominent?44:28}}},_.prepend):createVNode(VIcon,{key:"prepend-icon",density:n.density,icon:S.value,size:n.prominent?44:28},null)]),createVNode("div",{class:"v-alert__content"},[W&&createVNode(VAlertTitle,{key:"title"},{default:()=>[_.title?.()??n.title]}),_.text?.()??n.text,_.default?.()]),_.append&&createVNode("div",{key:"append",class:"v-alert__append"},[_.append()]),X&&createVNode("div",{key:"close",class:"v-alert__close"},[_.close?createVNode(VDefaultsProvider,{key:"close-defaults",defaults:{VBtn:{icon:n.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[_.close?.({props:j.value})]}):createVNode(VBtn,mergeProps({key:"close-btn",icon:n.closeIcon,size:"x-small",variant:"text"},j.value),null)])]})}}}),_hoisted_1$h={key:0},_hoisted_2$d={key:0},_hoisted_3$9={key:1},_hoisted_4$6={class:"mt-2 mb-0 text-h6"},_hoisted_5$4={key:1,class:"text--disabled"},_hoisted_6$4={class:"mt-2 mb-0 text-h6"},_hoisted_7$3={key:3,class:"text--disabled"},_hoisted_8$3={class:"mt-2 mb-0 text-h6"},_hoisted_9$3={key:5,class:"text--disabled"},_hoisted_10$2={key:1,class:"mb-2 text-center text-disabled"},_sfc_main$E=defineComponent$1({__name:"ChoixLicence",props:{licence:{type:String,required:!1,default:void 0},permissionModifier:{default:!1,type:Boolean}},emits:["changerLicence"],setup(n,{emit:r}){const g=n,_=r,x=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:S}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:E}=S(),C=ref$2(!1),T=ref$2(g.licence);watchEffect(()=>{T.value=g.licence});const R=suivre(x.licences.suivreLicences),A=computed(()=>R.value?Object.keys(R.value):[]),I=computed(()=>T.value?R.value?.[T.value]?.droits:void 0),B=computed(()=>T.value?R.value?.[T.value]?.conditions:void 0),D=computed(()=>T.value?R.value?.[T.value]?.limitations:void 0),N=F=>E(`licences.info.${F||"introuvable"}.nom`),M=F=>E(`licences.info.${F||"introuvable"}.abr`),O=F=>{if(!F)return;const U=`licences.info.${F}.lien`,j=E(U);if(j!==U)return j},L=F=>{const U=O(F);U&&ouvrirLien(U)};return watchEffect(()=>{T.value!==g.licence&&_("changerLicence",T.value)}),(F,U)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(VSelect,{modelValue:T.value,"onUpdate:modelValue":U[0]||(U[0]=j=>T.value=j),items:A.value,variant:"outlined",density:"compact",disabled:!n.permissionModifier},{item:withCtx(({item:j,props:z})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(z)),{title:withCtx(()=>[createVNode(VListItemTitle,{class:normalizeClass({"font-weight-bold":j.value===T.value})},{default:withCtx(()=>[createTextVNode(toDisplayString(N(j.value)),1)]),_:2},1032,["class"])]),subtitle:withCtx(()=>[createTextVNode(toDisplayString(M(j.value)),1)]),_:2},1040)]),selection:withCtx(({item:j})=>[createTextVNode(toDisplayString(M(j.value)),1)]),_:1},8,["modelValue","items","disabled"]),n.licence?(openBlock(),createElementBlock("span",_hoisted_1$h,[createVNode(VAlert,{class:"mb-3",type:"warning",variant:"outlined",density:"compact"},{title:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("licences.titreAvertissement"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:C.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:U[1]||(U[1]=()=>C.value=!C.value)},null,8,["icon"])]),text:withCtx(()=>[createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",null,[createBaseVNode("p",null,toDisplayString(unref(E)("licences.avertissement")),1),createVNode(VBtn,{class:"mx-auto my-3",variant:"outlined",size:"small",disabled:!O(n.licence),onClick:U[2]||(U[2]=j=>L(n.licence))},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>U[3]||(U[3]=[createTextVNode("mdi-scale-balance")])),_:1}),O(n.licence)?(openBlock(),createElementBlock("div",_hoisted_2$d,[createTextVNode(toDisplayString(unref(E)("licences.lire"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>U[4]||(U[4]=[createTextVNode("mdi-open-in-new")])),_:1})])):(openBlock(),createElementBlock("div",_hoisted_3$9,toDisplayString(unref(E)("licences.aucunLien")),1))]),_:1},8,["disabled"])],512),[[vShow,C.value]])]),_:1})]),_:1}),createVNode(VDivider),createBaseVNode("p",_hoisted_4$6,toDisplayString(unref(E)("licences.droits.sousTitre")),1),I.value?I.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_5$4,toDisplayString(unref(E)("licences.droits.aucune")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:0,type:"chip@3"})),(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,j=>(openBlock(),createBlock(_sfc_main$G,{key:j,droit:j},null,8,["droit"]))),128)),createBaseVNode("p",_hoisted_6$4,toDisplayString(unref(E)("licences.conditions.sousTitre")),1),B.value?B.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_7$3,toDisplayString(unref(E)("licences.conditions.aucune")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:2,type:"chip@3"})),(openBlock(!0),createElementBlock(Fragment,null,renderList(B.value,j=>(openBlock(),createBlock(_sfc_main$H,{key:j,condition:j},null,8,["condition"]))),128)),createBaseVNode("p",_hoisted_8$3,toDisplayString(unref(E)("licences.limitations.sousTitre")),1),D.value?D.value.length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_9$3,toDisplayString(unref(E)("licences.limitations.aucune")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:4,type:"chip@3"})),(openBlock(!0),createElementBlock(Fragment,null,renderList(D.value,j=>(openBlock(),createBlock(_sfc_main$F,{key:j,limitation:j},null,8,["limitation"]))),128))])):(openBlock(),createElementBlock("h2",_hoisted_10$2,toDisplayString(n.permissionModifier?unref(E)("licences.choisir"):unref(E)("licences.aucune")),1))],64))}}),_hoisted_1$g={class:"text-h6"},_sfc_main$D=defineComponent$1({__name:"DialogueLicence",props:{licence:{type:String,required:!1,default:void 0},licenceContenu:{type:String,required:!1,default:void 0},permissionModifier:{default:!1,type:Boolean}},emits:["changerLicence"],setup(n,{emit:r}){const g=n,_=r,{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),E=ref$2(!1),C=ref$2(!1),T=ref$2(g.licence);watchEffect(()=>{T.value=g.licence});const R=computed(()=>T.value!==g.licence),A=ref$2(!1),I=ref$2(g.licenceContenu),B=computed(()=>I.value!==g.licenceContenu);watchEffect(()=>{A.value&&(I.value=T.value)});const D=computed(()=>R.value||B.value),N=()=>{T.value&&_("changerLicence",{licence:T.value,licenceContenu:I.value}),E.value=!1},M=()=>{E.value=!1,T.value=g.licence};return(O,L)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":L[8]||(L[8]=F=>E.value=F),scrollable:"","max-width":"500"},{activator:withCtx(({props:F})=>[renderSlot(O.$slots,"activator",normalizeProps(guardReactiveProps({props:F})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex text-h5"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("licences.carte.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:L[0]||(L[0]=F=>E.value=!1)})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$E,{licence:T.value,"permission-modifier":n.permissionModifier,onChangerLicence:L[1]||(L[1]=F=>T.value=F)},null,8,["licence","permission-modifier"]),createVNode(VDivider,{class:"my-4"}),createBaseVNode("p",_hoisted_1$g,toDisplayString(unref(S)("licences.contenu")),1),createVNode(VDialog,{modelValue:C.value,"onUpdate:modelValue":L[6]||(L[6]=F=>C.value=F),disabled:A.value},{activator:withCtx(({props:F})=>[createVNode(_sfc_main$15,mergeProps(F,{class:"mt-2 mx-2",licence:A.value?T.value:I.value,onClick:L[2]||(L[2]=withModifiers(()=>{},["stop"]))}),null,16,["licence"])]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto",scrollable:"","max-width":"500"},{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex text-h5"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("licences.carte.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:L[3]||(L[3]=F=>C.value=!1)})]),_:1}),createVNode(VDivider),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$E,{licence:I.value,"permission-modifier":n.permissionModifier,onChangerLicence:L[4]||(L[4]=F=>I.value=F)},null,8,["licence","permission-modifier"])]),_:1}),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:L[5]||(L[5]=F=>C.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>L[9]||(L[9]=[createTextVNode("mdi-close")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),createVNode(VCheckbox,{modelValue:A.value,"onUpdate:modelValue":L[7]||(L[7]=F=>A.value=F),"hide-details":"",color:"primary",label:unref(S)("licences.pareilPourContenu")},null,8,["modelValue","label"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"outlined",onClick:M},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>L[10]||(L[10]=[createTextVNode("mdi-close")])),_:1})]),_:1}),createVNode(VBtn,{color:"primary",variant:"outlined",disabled:!D.value,onClick:N},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>L[11]||(L[11]=[createTextVNode("mdi-check")])),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:3},8,["modelValue"]))}}),_sfc_main$C=defineComponent$1({__name:"CarteMotClef",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),_=suivre(g.motsClefs.suivreNomsMotClef,{idMotClef:r.id},{}),x=async R=>{const{àEffacer:A,àAjouter:I}=ajusterTexteTraductible({anciennes:_.value,nouvelles:R});for(const B of A)await g.motsClefs.effacerNomMotClef({idMotClef:r.id,langue:B});return await g.motsClefs.sauvegarderNomsMotClef({idMotClef:r.id,noms:I})},S=suivre(g.motsClefs.suivreDescriptionsMotClef,{idMotClef:r.id},{}),E=async R=>{const{àEffacer:A,àAjouter:I}=ajusterTexteTraductible({anciennes:S.value,nouvelles:R});for(const B of A)await g.motsClefs.effacerDescriptionMotClef({id:r.id,langue:B});return await g.motsClefs.sauvegarderDescriptionsMotClef({idMotClef:r.id,descriptions:I})},C=suivre(g.réseau.suivreAuteursMotClef,{idMotClef:r.id}),T=async()=>{await g.motsClefs.effacerMotClef({idMotClef:r.id})};return(R,A)=>(openBlock(),createBlock(_sfc_main$16,{id:R.id,noms:unref(_),descriptions:unref(S),auteurs:unref(C),"fichiers-epinglables":!1,icone:"mdi-key",onAjusterNoms:A[0]||(A[0]=I=>x(I)),onAjusterDescriptions:A[1]||(A[1]=I=>E(I)),onEffacer:T},{activator:withCtx(({props:I})=>[renderSlot(R.$slots,"activator",normalizeProps(guardReactiveProps({props:I})))]),_:3},8,["id","noms","descriptions","auteurs"]))}}),_hoisted_1$f={key:1},_hoisted_2$c={key:1},_hoisted_3$8={class:"mt-2"},_sfc_main$B=defineComponent$1({__name:"RésultatRechercheMotClef",props:{résultat:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:x}=மொழிகளைப்_பயன்படுத்து(),{$மொ:S}=_(),E=M=>computed(()=>{const{de:O,info:L}=r.résultat.résultatObjectif;if(L.type==="texte"&&O===M)return L}),C=E("nom"),T=E("descr"),R=E("id"),A=suivre(g.motsClefs.suivreNomsMotClef,{idMotClef:r.résultat.id}),I=x(A),B=suivre(g.motsClefs.suivreDescriptionsMotClef,{idMotClef:r.résultat.id}),D=x(B),N=suivre(g.réseau.suivreAuteursMotClef,{idMotClef:r.résultat.id});return(M,O)=>(openBlock(),createBlock(VListItem,{"prepend-icon":"mdi-key"},{append:withCtx(()=>[createVNode(_sfc_main$1o,{id:M.résultat.id},null,8,["id"])]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[unref(C)?(openBlock(),createBlock(_sfc_main$1r,{key:0,info:unref(C)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_1$f,toDisplayString(unref(I)||unref(S)("motsClefs.aucunNom")),1))]),_:1}),unref(T)||unref(D)?(openBlock(),createBlock(VListItemSubtitle,{key:0},{default:withCtx(()=>[unref(T)?(openBlock(),createBlock(_sfc_main$1r,{key:0,info:unref(T)},null,8,["info"])):(openBlock(),createElementBlock("span",_hoisted_2$c,toDisplayString(unref(D)),1))]),_:1})):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$8,[createVNode(_sfc_main$1h,{auteurs:unref(N),"n-max":1},null,8,["auteurs"]),unref(R)?(openBlock(),createBlock(_sfc_main$_,{key:0,id:M.résultat.id},{default:withCtx(()=>[createVNode(_sfc_main$1r,{info:unref(R),"max-taille":20},null,8,["info"])]),_:1},8,["id"])):createCommentVNode("",!0)])]),_:1}))}}),_hoisted_1$e={class:"text-center"},_hoisted_2$b={class:"text-h6 font-weight-light mb-2"},_sfc_main$A=defineComponent$1({__name:"NouveauMotClef",emits:["nouveau"],setup(n,{emit:r}){const g=r,_=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),{mdAndUp:E}=useDisplay(),C=ref$2(!1),T=ref$2(0),R=["noms","descriptions","confirmation"],A=computed(()=>{switch(R[T.value]){case"noms":return"motsClefs.nouveau.titreNoms";case"descriptions":return"motsClefs.nouveau.titreDescriptions";case"confirmation":return"motsClefs.nouveau.titreConfirmation";default:return""}}),I=computed(()=>{switch(R[T.value]){case"noms":return"motsClefs.nouveau.sousTitreNoms";case"descriptions":return"motsClefs.nouveau.sousTitreDescriptions";case"confirmation":return"motsClefs.nouveau.sousTitreConfirmation";default:return""}}),B=()=>{switch(R[T.value]){default:T.value--;break}},D=()=>{switch(R[T.value]){default:T.value++;break}},N=computed(()=>{switch(R[T.value]){case"noms":return{actif:!!Object.keys(O.value).length,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),M=computed(()=>{switch(R[T.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!j.value,visible:!0};default:return{actif:!0,visible:!0}}}),O=ref$2({}),L=X=>{O.value=X},F=ref$2({}),U=X=>{F.value=X},j=ref$2(!1),z=async()=>{j.value=!0;const X=await _.motsClefs.créerMotClef();if(!X)throw new Error("Mot clef non créé.");await _.motsClefs.sauvegarderNomsMotClef({idMotClef:X,noms:Object.fromEntries(Object.entries(O.value))}),await _.motsClefs.sauvegarderDescriptionsMotClef({idMotClef:X,descriptions:Object.fromEntries(Object.entries(F.value))}),g("nouveau",X),W()},W=()=>{O.value={},F.value={},T.value=0,j.value=!1,C.value=!1};return(X,ie)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":ie[2]||(ie[2]=fe=>C.value=fe)},{activator:withCtx(({props:fe})=>[renderSlot(X.$slots,"activator",normalizeProps(guardReactiveProps({props:fe})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","min-width":unref(E)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)(A.value))+" ",1),createVNode(VSpacer),createVNode(VBtn,{variant:"flat",size:"small",icon:"mdi-close",onClick:W})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)(I.value)),1)]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindow,{modelValue:T.value,"onUpdate:modelValue":ie[1]||(ie[1]=fe=>T.value=fe)},{default:withCtx(()=>[(openBlock(),createBlock(VWindowItem,{key:0},{default:withCtx(()=>[createVNode(_sfc_main$18,{"texte-aucun-nom":unref(S)("communs.texteAucunNom"),"indice-langue":unref(S)("communs.indiceLangue"),"etiquette-nom":unref(S)("communs.étiquetteNom"),"indice-nom":unref(S)("motsClefs.nouveau.indiceNom"),"noms-initiaux":O.value,"autorisation-modification":!0,onAjusterNoms:L},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:1},{default:withCtx(()=>[createVNode(_sfc_main$18,{"texte-aucun-nom":unref(S)("motsClefs.nouveau.texteAucuneDescription"),"indice-langue":unref(S)("communs.indiceLangue"),"etiquette-nom":unref(S)("motsClefs.nouveau.texteIndiceDescription"),"indice-nom":unref(S)("motsClefs.nouveau.indiceDescription"),"noms-initiaux":F.value,"autorisation-modification":!0,longue:"",onAjusterNoms:U},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1})),(openBlock(),createBlock(VWindowItem,{key:2},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$e,[createBaseVNode("h3",_hoisted_2$b,toDisplayString(unref(S)("motsClefs.nouveau.texteCréer")),1),createBaseVNode("p",null,[createVNode(VBtn,{class:"mt-3",variant:"outlined","append-icon":"mdi-check",loading:j.value,onClick:ie[0]||(ie[0]=()=>z())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("motsClefs.nouveau.texteBtnCréation")),1)]),_:1},8,["loading"])])])]),_:1}))]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(_sfc_main$11,{visible:M.value.visible,actif:M.value.actif,onRetour:B},null,8,["visible","actif"]),createVNode(VSpacer),createVNode(_sfc_main$10,{visible:N.value.visible,actif:N.value.actif,onSuivant:D},null,8,["visible","actif"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$z=defineComponent$1({__name:"SélecteurMotClef",props:{multiples:{type:Boolean},originaux:{}},emits:["selectionnee"],setup(n,{emit:r}){const g=r,{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),S=utiliserConstellation(),E=ref$2([]);watchEffect(()=>{g("selectionnee",E.value)});const C=ref$2(""),{résultats:T,onTravaille:R}=rechercher(S.recherche.rechercherMotsClefsSelonTexte,{texte:C});return(A,I)=>(openBlock(),createBlock(_sfc_main$$,{multiples:A.multiples,originaux:A.originaux,"resultats-recherche":unref(T),"on-travaille":unref(R),"texte-etiquette-recherche":unref(x)("motsClefs.recherche.étiquette"),"texte-aucun-résultat":unref(x)("motsClefs.recherche.aucunRésultat"),onSelectionnee:I[0]||(I[0]=B=>E.value=B),onRequeteModifiee:I[1]||(I[1]=B=>C.value=B)},{résultat:withCtx(({résultat:B,click:D})=>[createVNode(_sfc_main$B,{résultat:B,onClick:D},null,8,["résultat","onClick"])]),"jeton-objet":withCtx(({id:B,deselectionner:D})=>[createVNode(_sfc_main$C,{id:B},{activator:withCtx(({props:N})=>[createVNode(_sfc_main$13,mergeProps({id:B},{props:N}),{default:withCtx(()=>[createVNode(VIcon,{class:"ms-2",icon:"mdi-close",size:"small",variant:"flat",onClick:()=>D({id:B})},null,8,["onClick"])]),_:2},1040,["id"])]),_:2},1032,["id"])]),nouveau:withCtx(({nouveau:B})=>[createVNode(_sfc_main$A,{onNouveau:B},{activator:withCtx(({props:D})=>[createVNode(VListItem,mergeProps(D,{title:unref(x)("motsClefs.nouveau.btn"),"prepend-icon":"mdi-plus"}),null,16,["title"])]),_:2},1032,["onNouveau"])]),_:1},8,["multiples","originaux","resultats-recherche","on-travaille","texte-etiquette-recherche","texte-aucun-résultat"]))}}),_sfc_main$y=defineComponent$1({__name:"ÉditeurMotsClefs",props:{originaux:{}},emits:["sauvegarder"],setup(n,{emit:r}){const{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),{mdAndUp:x}=useDisplay(),S=n,E=r,C=ref$2(!1),T=ref$2(S.originaux),R=D=>T.value=D,A=computed(()=>T.value!==S.originaux),I=()=>{E("sauvegarder",T.value),C.value=!1},B=()=>{T.value=S.originaux,C.value=!1};return(D,N)=>(openBlock(),createBlock(VDialog,{modelValue:C.value,"onUpdate:modelValue":N[1]||(N[1]=M=>C.value=M)},{activator:withCtx(({props:M})=>[createVNode(VTooltip,{text:unref(_)("motsClefs.éditeurMotsClefs.indice"),location:"bottom"},{activator:withCtx(({props:O})=>[createVNode(VBtn,mergeProps({...M,...O},{class:"mb-2",variant:"flat",icon:"mdi-pencil-outline",size:"small"}),null,16)]),_:2},1032,["text"])]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","min-width":unref(x)?750:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("motsClefs.éditeurMotsClefs.titre")),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(_sfc_main$z,{multiples:"",originaux:D.originaux,onSelectionnee:N[0]||(N[0]=M=>R(M))},null,8,["originaux"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{"append-icon":"mdi-close",onClick:B},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("communs.annuler")),1)]),_:1}),createVNode(VBtn,{disabled:!A.value,variant:"outlined",onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("communs.sauvegarder")),1)]),_:1},8,["disabled"])]),_:1})]),_:1},8,["min-width"])]),_:1},8,["modelValue"]))}}),_hoisted_1$d={key:1,class:"mb-2 text-center text-disabled"},_hoisted_2$a={key:3},_hoisted_3$7={key:0,class:"mb-2 text-center text-disabled"},_hoisted_4$5={key:5},_sfc_main$x=defineComponent$1({__name:"CarteBd",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{obtImageDéco:S}=utiliserImagesDéco(),E=suivre(g.suivrePermission,{idObjet:r.id}),C=suivre(g.bds.suivreNomsBd,{idBd:r.id},{}),T=async W=>{const{àEffacer:X,àAjouter:ie}=ajusterTexteTraductible({anciennes:C.value,nouvelles:W});for(const fe of X)await g.bds.effacerNomBd({idBd:r.id,langue:fe});await g.bds.sauvegarderNomsBd({idBd:r.id,noms:ie})},R=suivre(g.bds.suivreDescriptionsBd,{idBd:r.id},{}),A=async W=>{const{àEffacer:X,àAjouter:ie}=ajusterTexteTraductible({anciennes:R.value,nouvelles:W});for(const fe of X)await g.bds.effacerDescriptionBd({idBd:r.id,langue:fe});await g.bds.sauvegarderDescriptionsBd({idBd:r.id,descriptions:ie})},I=sourceImage(suivre(g.bds.suivreImage,{idBd:r.id})),B=S("logoBD"),D=suivre(g.réseau.suivreAuteursBd,{idBd:r.id}),N=suivre(g.bds.suivreLicenceBd,{idBd:r.id}),M=suivre(g.bds.suivreLicenceContenuBd,{idBd:r.id}),O=async({licence:W,licenceContenu:X})=>{await Promise.all([g.bds.changerLicenceBd({idBd:r.id,licence:W}),g.bds.changerLicenceContenuBd({idBd:r.id,licenceContenu:X})])},L=suivre(g.bds.suivreVariablesBd,{idBd:r.id}),F=suivre(g.bds.suivreMotsClefsBd,{idBd:r.id}),U=async W=>{const X=W.filter(fe=>!F.value?.includes(fe)),ie=F.value?.filter(fe=>!W.includes(fe))||[];await g.bds.ajouterMotsClefsBd({idBd:r.id,idsMotsClefs:X}),await Promise.all(ie.map(fe=>g.bds.effacerMotClefBd({idBd:r.id,idMotClef:fe})))},j=suivre(g.bds.suivreTableauxBd,{idBd:r.id}),z=async()=>{await g.bds.effacerBd({idBd:r.id})};return(W,X)=>(openBlock(),createBlock(_sfc_main$16,{id:W.id,noms:unref(C),descriptions:unref(R),image:unref(I)||unref(B),auteurs:unref(D),"fichiers-epinglables":!0,onAjusterNoms:T,onAjusterDescriptions:A,onEffacer:z},{activator:withCtx(({props:ie})=>[renderSlot(W.$slots,"activator",normalizeProps(guardReactiveProps({props:ie})))]),pied:withCtx(()=>[createVNode(VBtn,{variant:"outlined","append-icon":"mdi-open-in-new",color:"primary",onClick:X[2]||(X[2]=ie=>W.$router.push(encodeURI(`/données/bd/${encodeURIComponent(W.id)}`)))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(x)("bds.ouvrirBd")),1)]),_:1})]),default:withCtx(()=>[createVNode(_sfc_main$1e,{titre:unref(x)("bds.info"),"en-attente":!1},null,8,["titre"]),createVNode(_sfc_main$D,{licence:unref(N),"licence-contenu":unref(M),"permission-modifier":!!unref(E),onChangerLicence:O},{activator:withCtx(({props:ie})=>[createVNode(_sfc_main$15,mergeProps(ie,{class:"me-2 mb-2",licence:unref(N)}),null,16,["licence"])]),_:1},8,["licence","licence-contenu","permission-modifier"]),createVNode(_sfc_main$J,{id:W.id,class:"me-2 mb-2"},null,8,["id"]),createVNode(_sfc_main$1l,{id:W.id},{activator:withCtx(({props:ie})=>[createVNode(_sfc_main$I,mergeProps(ie,{id:W.id,class:"me-2 mb-2"}),null,16,["id"])]),_:1},8,["id"]),createVNode(_sfc_main$1e,{titre:unref(x)("bds.variables"),"en-attente":!unref(L)},null,8,["titre","en-attente"]),createVNode(_sfc_main$1j,{"n-max":5,items:unref(L)},{jeton:withCtx(({id:ie})=>[createVNode(_sfc_main$O,{id:ie},{activator:withCtx(({props:fe})=>[createVNode(_sfc_main$Z,mergeProps(fe,{id:ie}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:ie})=>[createVNode(_sfc_main$O,{id:ie},{activator:withCtx(({props:fe})=>[createVNode(_sfc_main$N,mergeProps(fe,{id:ie}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),unref(L)?unref(L).length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_1$d,toDisplayString(unref(x)("bds.aucuneVariable")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:0,type:"chip@3"})),createVNode(_sfc_main$1e,{titre:unref(x)("bds.motsClefs"),"en-attente":!unref(F)},null,8,["titre","en-attente"]),createVNode(_sfc_main$1j,{"n-max":5,items:unref(F)},{jeton:withCtx(({id:ie})=>[createVNode(_sfc_main$C,{id:ie},{activator:withCtx(({props:fe})=>[createVNode(_sfc_main$13,mergeProps(fe,{id:ie}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:ie})=>[createVNode(_sfc_main$C,{id:ie},{activator:withCtx(({props:fe})=>[createVNode(_sfc_main$14,mergeProps(fe,{id:ie}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),unref(F)?(openBlock(),createElementBlock("span",_hoisted_2$a,[unref(F).length?unref(E)?(openBlock(),createBlock(_sfc_main$y,{key:1,originaux:unref(F),onSauvegarder:X[1]||(X[1]=ie=>U(ie))},null,8,["originaux"])):createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_3$7,[createTextVNode(toDisplayString(unref(x)("bds.aucunMotClef"))+" ",1),unref(E)?(openBlock(),createBlock(_sfc_main$y,{key:0,originaux:unref(F),onSauvegarder:X[0]||(X[0]=ie=>U(ie))},null,8,["originaux"])):createCommentVNode("",!0)]))])):(openBlock(),createBlock(VSkeletonLoader,{key:2,type:"chip@3"})),createVNode(_sfc_main$1e,{titre:unref(x)("bds.tableaux"),"en-attente":!unref(j)},null,8,["titre","en-attente"]),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(j),ie=>(openBlock(),createBlock(_sfc_main$M,{id:ie.id,key:ie.clef},null,8,["id"]))),128)),unref(j)?unref(j).length?createCommentVNode("",!0):(openBlock(),createElementBlock("p",_hoisted_4$5,toDisplayString(unref(x)("bds.aucunTableau")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:4,type:"list-item-avatar-two-line@2"}))]),_:3},8,["id","noms","descriptions","image","auteurs"]))}}),_hoisted_1$c={class:"my-2"},_hoisted_2$9={class:"font-weight-bold"},_hoisted_3$6={class:"text-medium-emphasis text-caption"},_hoisted_4$4={class:"font-weight-bold"},_hoisted_5$3={class:"text-medium-emphasis text-caption"},_hoisted_6$3={class:"font-weight-bold"},_hoisted_7$2={class:"text-medium-emphasis text-caption"},_hoisted_8$2={class:"font-weight-bold"},_hoisted_9$2={class:"text-medium-emphasis text-caption"},_sfc_main$w=defineComponent$1({__name:"CarteConfianceMembre",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{mdAndUp:S}=useDisplay(),E=ref$2(!1),C=suivre(g.réseau.suivreFiables),T=suivre(g.réseau.suivreBloqués),R=computed(()=>{if(C.value?.includes(r.id))return"fiable";{const B=T.value?.find(D=>D.idCompte===r.id);return B?B.privé?"bloquéPrivé":"bloquéPublique":"inconnu"}}),A=ref$2(R.value);watchEffect(()=>{A.value=R.value});const I=async()=>{switch(A.value){case"fiable":await g.réseau.faireConfianceAuMembre({idCompte:r.id});break;case"bloquéPublique":case"bloquéPrivé":await g.réseau.bloquerMembre({idCompte:r.id,privé:A.value==="bloquéPrivé"});break;case"inconnu":R.value==="fiable"?await g.réseau.nePlusFaireConfianceAuMembre({idCompte:r.id}):await g.réseau.débloquerMembre({idCompte:r.id});break}};return(B,D)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":D[2]||(D[2]=N=>E.value=N)},{activator:withCtx(({props:N})=>[renderSlot(B.$slots,"activator",normalizeProps(guardReactiveProps({props:N})))]),default:withCtx(()=>[createVNode(VCard,{"max-width":unref(S)?500:300,class:"mx-auto"},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(x)("membres.confiance.titreCarte")),1)]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$c,[createVNode(_sfc_main$1v,{compte:B.id},null,8,["compte"])]),createTextVNode(" "+toDisplayString(unref(x)("membres.confiance.question"))+" ",1),createVNode(VRadioGroup,{modelValue:A.value,"onUpdate:modelValue":D[0]||(D[0]=N=>A.value=N)},{default:withCtx(()=>[createVNode(VRadio,{value:"inconnu",class:"my-2"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_2$9,[createVNode(VIcon,{icon:"mdi-account-question-outline",start:"",size:"small"}),createTextVNode(" "+toDisplayString(unref(x)("membres.confiance.inconnu")),1)]),createBaseVNode("p",_hoisted_3$6,toDisplayString(unref(x)("membres.confiance.indiceInconnu")),1)])]),_:1}),createVNode(VRadio,{value:"fiable",class:"my-2",color:"success"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_4$4,[createVNode(VIcon,{icon:"mdi-account-check",color:"success",start:"",size:"small"}),createTextVNode(" "+toDisplayString(unref(x)("membres.confiance.faireConfiance")),1)]),createBaseVNode("p",_hoisted_5$3,toDisplayString(unref(x)("membres.confiance.indiceFaireConfiance")),1)])]),_:1}),createVNode(VRadio,{value:"bloquéPublique",class:"my-2",color:"error"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_6$3,[createVNode(VIcon,{icon:"mdi-account-cancel",color:"error",size:"small",start:""}),createTextVNode(" "+toDisplayString(unref(x)("membres.confiance.bloquerPublique")),1)]),createBaseVNode("p",_hoisted_7$2,toDisplayString(unref(x)("membres.confiance.indiceBloquerPublique")),1)])]),_:1}),createVNode(VRadio,{value:"bloquéPrivé",class:"my-2",color:"error"},{label:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",_hoisted_8$2,[createVNode(VIcon,{icon:"mdi-account-cancel-outline",color:"error",start:"",size:"small"}),createTextVNode(" "+toDisplayString(unref(x)("membres.confiance.bloquerPrivé")),1)]),createBaseVNode("p",_hoisted_9$2,toDisplayString(unref(x)("membres.confiance.indiceBloquerPrivé")),1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:D[1]||(D[1]=N=>E.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(x)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>D[3]||(D[3]=[createTextVNode("mdi-close")])),_:1})]),_:1}),createVNode(VBtn,{variant:"outlined",color:"primary",disabled:R.value===A.value,onClick:I},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(x)("communs.sauvegarder"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>D[4]||(D[4]=[createTextVNode("mdi-check")])),_:1})]),_:1},8,["disabled"])]),_:1})]),_:1},8,["max-width"])]),_:3},8,["modelValue"]))}}),_sfc_main$v=defineComponent$1({__name:"IcôneConfiance",props:{confiance:{},cestMoi:{type:Boolean}},setup(n){const r=n,g=computed(()=>r.confiance<0?"mdi-cancel":r.cestMoi?"mdi-check":"mdi-hands-pray"),_=computed(()=>r.confiance<0?"error":r.confiance===1?"success":`rgba(22, 151, 246, ${.1+r.confiance*.9})`);return(x,S)=>(openBlock(),createBlock(VIcon,{color:_.value,start:""},{default:withCtx(()=>[createTextVNode(toDisplayString(g.value),1)]),_:1},8,["color"]))}}),_sfc_main$u=defineComponent$1({__name:"JetonConfiance",props:{id:{},styleJeton:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),S=suivre(g.suivreIdCompte),{résultats:E}=rechercher(g.réseau.suivreConfianceMonRéseauPourMembre,{idCompte:r.id,profondeur:5}),C=computed(()=>{const T=E.value||0;return T<0?"membres.confiance.bloqué":T===0?"membres.confiance.inconnu":T<.33?"membres.confiance.peuDinteraction":T<.67?"membres.confiance.interactionMoyenne":T<1?"membres.confiance.beaucoupDinteraction":T===1?r.id===S.value?x("membres.moi"):x("membres.confiance.connaissance"):""});return(T,R)=>T.id!==unref(S)?(openBlock(),createBlock(_sfc_main$w,{key:0,id:T.id},{activator:withCtx(({props:A})=>[T.styleJeton==="icône"?(openBlock(),createBlock(_sfc_main$v,mergeProps({key:0},A,{confiance:unref(E)||0,"cest-moi":T.id===unref(S)}),null,16,["confiance","cest-moi"])):(openBlock(),createBlock(VChip,mergeProps({key:1},A,{label:"",variant:"outlined",size:"small"}),{prepend:withCtx(()=>[createVNode(_sfc_main$v,{confiance:unref(E)||0,"cest-moi":T.id===unref(S)},null,8,["confiance","cest-moi"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString(unref(x)(C.value)),1)]),_:2},1040))]),_:1},8,["id"])):(openBlock(),createBlock(VTooltip,{key:1,text:unref(x)(C.value)},{activator:withCtx(({props:A})=>[T.styleJeton==="icône"?(openBlock(),createBlock(_sfc_main$v,mergeProps({key:0},A,{confiance:unref(E)||0,"cest-moi":T.id===unref(S)}),null,16,["confiance","cest-moi"])):(openBlock(),createBlock(VChip,mergeProps({key:1},A,{label:"",variant:"outlined",size:"small"}),{prepend:withCtx(()=>[createVNode(_sfc_main$v,{confiance:unref(E)||0,"cest-moi":T.id===unref(S)},null,8,["confiance","cest-moi"])]),default:withCtx(()=>[createTextVNode(" "+toDisplayString(unref(x)(C.value)),1)]),_:2},1040))]),_:1},8,["text"]))}}),_sfc_main$t=defineComponent$1({__name:"MenuContactMembre",props:{type:{},contact:{}},setup(n){const r=n,{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),{எண்_எழுத்து_வடிவூட்டு:x}=எண்களைப்_பயன்படுத்து(),S=computed(()=>obtIcôneContact({type:r.type})),E=computed(()=>["siteInternet","télégramme","téléphone","courriel","whatsapp"].includes(r.type)),C=async()=>{await copier(r.contact)},T=x(r.contact,"latin"),R=()=>{switch(r.type){case"siteInternet":ouvrirLien(r.contact);break;case"courriel":ouvrirLien(`mailto://${r.contact}`);break;case"whatsapp":{const A=_("membres.menuContact.messageSalut");ouvrirLien(`whatsapp://send?text=${A}&phone=${T.value}`);break}case"téléphone":{ouvrirLien(`tel://${r.contact}`);break}case"télégrame":{ouvrirLien(`tg://resolve?phone=${T.value}`);break}}};return(A,I)=>(openBlock(),createBlock(VMenu,null,{activator:withCtx(({props:B})=>[renderSlot(A.$slots,"activator",normalizeProps(guardReactiveProps({props:B})))]),default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-content-copy",onClick:C},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("membres.menuContact.copier")),1)]),_:1})]),_:1}),E.value?(openBlock(),createBlock(VListItem,{key:0,"prepend-icon":S.value,onClick:R},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("membres.menuContact.contacter")),1)]),_:1})]),_:1},8,["prepend-icon"])):createCommentVNode("",!0)]),_:1})]),_:3}))}}),_hoisted_1$b={key:0},_hoisted_2$8={key:0},_sfc_main$s=defineComponent$1({__name:"ItemBd",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.bds.suivreNomsBd,{idBd:r.id}),C=S(E),T=suivre(g.bds.suivreDescriptionsBd,{idBd:r.id}),R=S(T),A=suivre(g.bds.suivreImage,{idBd:r.id}),I=computed(()=>{if(A.value)return URL.createObjectURL(new Blob([A.value],{type:"image"}))}),{obtImageDéco:B}=utiliserImagesDéco(),D=B("logoBD"),N=suivre(g.bds.suivreVariablesBd,{idBd:r.id});return(M,O)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":I.value||unref(D),subtitle:unref(R)},{title:withCtx(()=>[renderSlot(M.$slots,"default",{},()=>[unref(E)?(openBlock(),createElementBlock("span",_hoisted_1$b,toDisplayString(unref(C)||unref(x)("bds.sansNom")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:1,type:"list-item-two-line"}))])]),subtitle:withCtx(()=>[renderSlot(M.$slots,"default",{},()=>[unref(T)&&unref(R)?(openBlock(),createElementBlock("span",_hoisted_2$8,toDisplayString(unref(R)),1)):unref(T)?createCommentVNode("",!0):(openBlock(),createBlock(VSkeletonLoader,{key:1,type:"list-item-two-line"}))])]),append:withCtx(()=>[createVNode(_sfc_main$1o,{id:M.id},null,8,["id"])]),default:withCtx(()=>[createVNode(_sfc_main$1j,{"n-max":3,items:unref(N)},{jeton:withCtx(({id:L})=>[createVNode(_sfc_main$O,{id:L},{activator:withCtx(({props:F})=>[createVNode(_sfc_main$Z,mergeProps(F,{id:L,size:"small"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:L})=>[createVNode(_sfc_main$O,{id:L},{activator:withCtx(({props:F})=>[createVNode(_sfc_main$N,mergeProps(F,{id:L}),null,16,["id"])]),_:2},1032,["id"])]),append:withCtx(()=>[createVNode(_sfc_main$1o,{id:M.id},null,8,["id"])]),_:1},8,["items"])]),_:3},8,["prepend-avatar","subtitle"]))}}),_sfc_main$r=defineComponent$1({__name:"ItemNuée",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.nuées.suivreNomsNuée,{idNuée:r.id}),C=S(E),T=suivre(g.nuées.suivreDescriptionsNuée,{idNuée:r.id}),R=S(T),A=suivre(g.nuées.suivreImage,{idNuée:r.id}),I=computed(()=>{if(A.value)return URL.createObjectURL(new Blob([A.value],{type:"image"}))}),{obtImageDéco:B}=utiliserImagesDéco(),D=B("logoBD");return(N,M)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":I.value||unref(D),title:unref(C)||unref(x)("nuées.sansNom"),subtitle:unref(R)||unref(x)("communs.baseCarteObjet.sansDescription")},{append:withCtx(()=>[createVNode(_sfc_main$1o,{id:N.id},null,8,["id"])]),_:1},8,["prepend-avatar","title","subtitle"]))}}),_sfc_main$q=defineComponent$1({__name:"JetonNuée",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.nuées.suivreNomsNuée,{idNuée:r.id}),C=S(E),T=suivre(g.nuées.suivreImage,{idNuée:r.id}),R=computed(()=>{if(T.value)return URL.createObjectURL(new Blob([T.value],{type:"image"}))}),{obtImageDéco:A}=utiliserImagesDéco(),I=A("logoBD");return(B,D)=>(openBlock(),createBlock(VChip,{variant:"outlined",label:""},{default:withCtx(()=>[createVNode(VAvatar,{start:""},{default:withCtx(()=>[createVNode(VImg,{src:R.value||unref(I)},null,8,["src"])]),_:1}),createTextVNode(" "+toDisplayString(unref(C)||unref(x)("nuées.sansNom"))+" ",1),renderSlot(B.$slots,"default")]),_:3}))}}),_sfc_main$p=defineComponent$1({__name:"ItemProjet",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:_}=மொழிகளைப்_பயன்படுத்து(),x=suivre(g.projets.suivreNomsProjet,{idProjet:r.id}),S=_(x),E=suivre(g.projets.suivreDescriptionsProjet,{idProjet:r.id}),C=_(E),T=suivre(g.projets.suivreImage,{idProjet:r.id}),R=computed(()=>{if(T.value)return URL.createObjectURL(new Blob([T.value],{type:"image"}))}),{obtImageDéco:A}=utiliserImagesDéco(),I=A("logoBD"),B=suivre(g.projets.suivreBdsProjet,{idProjet:r.id});return(D,N)=>(openBlock(),createBlock(VListItem,{"prepend-avatar":R.value||unref(I),title:unref(S),subtitle:unref(C)},{default:withCtx(()=>[createVNode(_sfc_main$1j,{"n-max":3,items:unref(B)},{jeton:withCtx(({id:M})=>[createVNode(_sfc_main$x,{id:M},{activator:withCtx(({props:O})=>[createVNode(_sfc_main$X,mergeProps(O,{id:M,size:"small"}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:M})=>[createVNode(_sfc_main$x,{id:M},{activator:withCtx(({props:O})=>[createVNode(_sfc_main$s,mergeProps(O,{id:M}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),renderSlot(D.$slots,"default")]),_:3},8,["prepend-avatar","title","subtitle"]))}}),_sfc_main$o=defineComponent$1({__name:"JetonProjet",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(g.projets.suivreNomsProjet,{idProjet:r.id}),C=S(E),T=suivre(g.projets.suivreImage,{idProjet:r.id}),R=computed(()=>{if(T.value)return URL.createObjectURL(new Blob([T.value],{type:"image"}))}),{obtImageDéco:A}=utiliserImagesDéco(),I=A("logoBD");return(B,D)=>(openBlock(),createBlock(VChip,{variant:"outlined"},{default:withCtx(()=>[createVNode(VAvatar,{start:""},{default:withCtx(()=>[createVNode(VImg,{src:R.value||unref(I)},null,8,["src"])]),_:1}),createTextVNode(" "+toDisplayString(unref(C)||unref(x)("projets.sansNom"))+" ",1),renderSlot(B.$slots,"default")]),_:3}))}}),_hoisted_1$a={class:"mx-4"},_hoisted_2$7={key:2},_hoisted_3$5={key:3,class:"text-center text-disabled"},_hoisted_4$3={key:6,class:"text-disabled"},_hoisted_5$2={key:9,class:"text-center text-disabled"},_hoisted_6$2={key:12,class:"text-center text-disabled"},_sfc_main$n=defineComponent$1({__name:"CarteMembre",props:{id:{}},setup(n){const r=n,g=utiliserConstellation(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),{mdAndUp:S}=useDisplay(),E=ref$2(!1),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:C}=மொழிகளைப்_பயன்படுத்து(),T=suivre(g.profil.suivreNoms,{idCompte:r.id}),R=C(T),A=suivre(g.profil.suivreContacts,{idCompte:r.id}),I=suivre(g.réseau.suivreBdsMembre,{idCompte:r.id}),B=suivre(g.réseau.suivreProjetsMembre,{idCompte:r.id}),D=suivre(g.réseau.suivreNuéesMembre,{idCompte:r.id});return(N,M)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":M[1]||(M[1]=O=>E.value=O),"max-width":unref(S)?500:300},{activator:withCtx(({props:O})=>[renderSlot(N.$slots,"activator",normalizeProps(guardReactiveProps({props:O})))]),default:withCtx(()=>[createVNode(VCard,null,{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createVNode(_sfc_main$1w,{id:N.id},null,8,["id"]),createBaseVNode("span",_hoisted_1$a,toDisplayString(unref(R)||unref(x)("membres.anonyme")),1),unref(S)?(openBlock(),createBlock(_sfc_main$u,{key:0,id:N.id,"style-jeton":"jeton"},null,8,["id"])):createCommentVNode("",!0),createVNode(VSpacer),createVNode(_sfc_main$1o,{id:N.id},null,8,["id"])]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[unref(S)?createCommentVNode("",!0):(openBlock(),createBlock(_sfc_main$u,{key:0,id:N.id,"style-jeton":"jeton"},null,8,["id"])),createVNode(_sfc_main$1e,{titre:unref(x)("membres.contacts"),"en-attente":!unref(A)},null,8,["titre","en-attente"]),unref(A)?unref(A).length?(openBlock(),createElementBlock("span",_hoisted_2$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(A),({type:O,contact:L})=>(openBlock(),createBlock(_sfc_main$t,{key:O,type:O,contact:L},{activator:withCtx(({props:F})=>[createVNode(_sfc_main$1d,mergeProps({ref_for:!0},F,{type:O,contact:L,size:"small"}),null,16,["type","contact"])]),_:2},1032,["type","contact"]))),128))])):(openBlock(),createElementBlock("p",_hoisted_3$5,toDisplayString(unref(x)("membres.aucunContact")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:1,type:"chip@3"})),createVNode(_sfc_main$1e,{titre:unref(x)("membres.bds"),"en-attente":!unref(I)},null,8,["titre","en-attente"]),unref(I)?unref(I).length?(openBlock(),createBlock(_sfc_main$1j,{key:5,items:unref(I),"n-max":2},{jeton:withCtx(({id:O})=>[createVNode(_sfc_main$x,{id:O},{activator:withCtx(({props:L})=>[createVNode(_sfc_main$X,mergeProps(L,{id:O}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:withCtx(({id:O})=>[createVNode(_sfc_main$x,{id:O},{activator:withCtx(({props:L})=>[createVNode(_sfc_main$s,mergeProps(L,{id:O,"montrer-anonymes":!0}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"])):(openBlock(),createElementBlock("p",_hoisted_4$3,toDisplayString(unref(x)("membres.aucuneBd")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:4,type:"chip@3"})),createVNode(_sfc_main$1e,{titre:unref(x)("membres.projets"),"en-attente":!unref(B)},null,8,["titre","en-attente"]),unref(B)?unref(B).length?(openBlock(),createBlock(_sfc_main$1j,{key:8,items:unref(B),"n-max":5},{jeton:withCtx(({id:O})=>[createVNode(_sfc_main$o,{id:O},null,8,["id"])]),itemListe:withCtx(({id:O})=>[createVNode(_sfc_main$p,{id:O,"montrer-anonymes":!0},null,8,["id"])]),_:1},8,["items"])):(openBlock(),createElementBlock("p",_hoisted_5$2,toDisplayString(unref(x)("membres.aucunProjet")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:7,type:"chip@3"})),createVNode(_sfc_main$1e,{titre:unref(x)("membres.nuées"),"en-attente":!unref(D)},null,8,["titre","en-attente"]),unref(D)?unref(D).length?(openBlock(),createBlock(_sfc_main$1j,{key:11,items:unref(D),"n-max":5},{jeton:withCtx(({id:O})=>[createVNode(_sfc_main$q,{id:O},null,8,["id"])]),itemListe:withCtx(({id:O})=>[createVNode(_sfc_main$r,{id:O,"montrer-anonymes":!0},null,8,["id"])]),_:1},8,["items"])):(openBlock(),createElementBlock("p",_hoisted_6$2,toDisplayString(unref(x)("membres.aucuneNuée")),1)):(openBlock(),createBlock(VSkeletonLoader,{key:10,type:"chip@3"}))]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{variant:"flat",onClick:M[0]||(M[0]=O=>E.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(x)("communs.fermer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>M[2]||(M[2]=[createTextVNode("mdi-close")])),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),_hoisted_1$9={class:"mx-3"},_hoisted_2$6={class:"ms-auto"},_sfc_main$m=defineComponent$1({__name:"ItemSuggestionTraduction",props:{suggestion:{}},emits:["utiliser","effacer"],setup(n,{emit:r}){const g=n,_=r,x=utiliserConstellation(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:S}=மொழிகளைப்_பயன்படுத்து(),E=suivre(x.profil.suivreNoms,{idCompte:g.suggestion.பங்கேற்பாளர்}),C=S(E),T=()=>{_("utiliser")},R=()=>{_("effacer")},A=suivre(x.suivreIdCompte),I=computed(()=>g.suggestion.பங்கேற்பாளர்===A.value);return(B,D)=>(openBlock(),createBlock(VListItem,{lines:"three",onClick:T},{default:withCtx(()=>[createVNode(VListItemTitle,{class:"d-flex"},{default:withCtx(()=>[createVNode(_sfc_main$n,{id:B.suggestion.பங்கேற்பாளர்},{activator:withCtx(({props:N})=>[createBaseVNode("span",normalizeProps(guardReactiveProps(N)),[createVNode(_sfc_main$1w,{id:B.suggestion.பங்கேற்பாளர்},null,8,["id"]),createBaseVNode("span",_hoisted_1$9,toDisplayString(unref(C)),1)],16)]),_:1},8,["id"]),createBaseVNode("span",_hoisted_2$6,toDisplayString(B.suggestion.பரிந்துரை.தேதி?.toLocaleDateString()),1)]),_:1}),createVNode(VDivider,{class:"my-2"}),createTextVNode(" "+toDisplayString(B.suggestion.பரிந்துரை.மொழிபெயர்ப்பு)+" ",1),I.value?(openBlock(),createBlock(VListItemAction,{key:0},{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{icon:"",variant:"flat",size:"small",onClick:withModifiers(R,["stop"])},{default:withCtx(()=>[createVNode(VIcon,{color:"error"},{default:withCtx(()=>D[0]||(D[0]=[createTextVNode("mdi-delete")])),_:1})]),_:1})]),_:1})):createCommentVNode("",!0)]),_:1}))}}),_sfc_main$l=defineComponent$1({__name:"ItemLangueProgrès",props:{code:{},selectionnee:{type:Boolean}},setup(n){const r=n,{கிடைக்கும்_மொழிகளை_பயன்படுத்து:g,மொழி_முன்னேற்றத்தை_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{மொழியின்_பெயர்:x}=g(),{மொழி_முன்னேற்றம்:S}=_({மொழி:computed(()=>r.code),வகை:"வார்த்தை"}),E=computed(()=>(S.value?.அங்கீகரிக்கப்பட்டவை||0)/(S.value?.மொத்தம்||0)),C=x(computed(()=>r.code));return(T,R)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[T.selectionnee?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>R[0]||(R[0]=[createTextVNode(" mdi-check-bold ")])),_:1})):createCommentVNode("",!0)]),title:withCtx(()=>[createTextVNode(toDisplayString(unref(C)||T.code),1)]),append:withCtx(()=>[E.value===1?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>R[1]||(R[1]=[createTextVNode(" mdi-check-circle ")])),_:1})):(openBlock(),createBlock(VProgressCircular,{key:1,"model-value":E.value*100,size:"20",color:"primary"},null,8,["model-value"]))]),_:1}))}}),_sfc_main$k=defineComponent$1({__name:"JetonLangue",props:{code:{}},setup(n){const r=n,{கிடைக்கும்_மொழிகளை_பயன்படுத்து:g,மொழி_முன்னேற்றத்தை_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{மொழியின்_பெயர்:x}=g(),{மொழி_முன்னேற்றம்:S}=_({மொழி:r.code,வகை:"வார்த்தை"}),E=computed(()=>(S.value?.அங்கீகரிக்கப்பட்டவை||0)/(S.value?.மொத்தம்||0)),C=x(r.code);return(T,R)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small"},{append:withCtx(()=>[E.value===1?(openBlock(),createBlock(VIcon,{key:0,end:"",color:"primary"},{default:withCtx(()=>R[0]||(R[0]=[createTextVNode(" mdi-check-circle ")])),_:1})):(openBlock(),createBlock(VIcon,{key:1,end:""},{default:withCtx(()=>[createVNode(VProgressCircular,{"model-value":E.value*100,size:"15",color:"primary"},null,8,["model-value"])]),_:1}))]),default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)||T.code)+" ",1)]),_:1}))}}),_sfc_main$j=defineComponent$1({__name:"ItemBaseNumération",props:{val:{},symbole:{}},emits:["effacer","modifier"],setup(n,{emit:r}){const g=r,_=n,{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),E=ref$2(_.val.toString()),C=ref$2(_.symbole);watchEffect(()=>{E.value=computed(()=>_.val.toString()).value});const T=()=>{E.value&&C.value&&g("modifier",{val:parseInt(E.value),symbole:C.value})},R=()=>{g("effacer",{symbole:C.value})};return(A,I)=>(openBlock(),createBlock(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:5,class:"py-0"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:C.value,"onUpdate:modelValue":I[0]||(I[0]=B=>C.value=B),variant:"outlined",density:"compact",label:unref(S)("ennikkai.nouvelle.étiquetteSymboleBase"),hint:unref(S)("ennikkai.nouvelle.indiceSymboleBase"),onBlur:I[1]||(I[1]=()=>T())},null,8,["modelValue","label","hint"])]),_:1}),createVNode(VCol,{cols:5,class:"py-0"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:E.value,"onUpdate:modelValue":I[2]||(I[2]=B=>E.value=B),variant:"outlined",density:"compact",label:unref(S)("ennikkai.nouvelle.étiquetteValeurBase"),hint:unref(S)("ennikkai.nouvelle.indiceValeurBase"),onBlur:I[3]||(I[3]=()=>T())},null,8,["modelValue","label","hint"])]),_:1}),createVNode(VCol,{cols:2,class:"py-0"},{default:withCtx(()=>[createVNode(VBtn,{variant:"flat",size:"small",icon:"mdi-close",onClick:I[4]||(I[4]=()=>R())})]),_:1})]),_:1}))}}),makeVTimelineDividerProps=propsFactory({dotColor:String,fillDot:Boolean,hideDot:Boolean,icon:IconValue,iconColor:String,lineColor:String,...makeComponentProps(),...makeRoundedProps(),...makeSizeProps(),...makeElevationProps()},"VTimelineDivider"),VTimelineDivider=genericComponent()({name:"VTimelineDivider",props:makeVTimelineDividerProps(),setup(n,r){let{slots:g}=r;const{sizeClasses:_,sizeStyles:x}=useSize(n,"v-timeline-divider__dot"),{backgroundColorStyles:S,backgroundColorClasses:E}=useBackgroundColor(toRef(n,"dotColor")),{roundedClasses:C}=useRounded(n,"v-timeline-divider__dot"),{elevationClasses:T}=useElevation(n),{backgroundColorClasses:R,backgroundColorStyles:A}=useBackgroundColor(toRef(n,"lineColor"));return useRender(()=>createVNode("div",{class:["v-timeline-divider",{"v-timeline-divider--fill-dot":n.fillDot},n.class],style:n.style},[createVNode("div",{class:["v-timeline-divider__before",R.value],style:A.value},null),!n.hideDot&&createVNode("div",{key:"dot",class:["v-timeline-divider__dot",T.value,C.value,_.value],style:x.value},[createVNode("div",{class:["v-timeline-divider__inner-dot",E.value,C.value],style:S.value},[g.default?createVNode(VDefaultsProvider,{key:"icon-defaults",disabled:!n.icon,defaults:{VIcon:{color:n.iconColor,icon:n.icon,size:n.size}}},g.default):createVNode(VIcon,{key:"icon",color:n.iconColor,icon:n.icon,size:n.size},null)])]),createVNode("div",{class:["v-timeline-divider__after",R.value],style:A.value},null)])),{}}}),makeVTimelineItemProps=propsFactory({density:String,dotColor:String,fillDot:Boolean,hideDot:Boolean,hideOpposite:{type:Boolean,default:void 0},icon:IconValue,iconColor:String,lineInset:[Number,String],...makeComponentProps(),...makeDimensionProps(),...makeElevationProps(),...makeRoundedProps(),...makeSizeProps(),...makeTagProps()},"VTimelineItem"),VTimelineItem=genericComponent()({name:"VTimelineItem",props:makeVTimelineItemProps(),setup(n,r){let{slots:g}=r;const{dimensionStyles:_}=useDimension(n),x=shallowRef(0),S=ref$2();return watch(S,E=>{E&&(x.value=E.$el.querySelector(".v-timeline-divider__dot")?.getBoundingClientRect().width??0)},{flush:"post"}),useRender(()=>createVNode("div",{class:["v-timeline-item",{"v-timeline-item--fill-dot":n.fillDot},n.class],style:[{"--v-timeline-dot-size":convertToUnit(x.value),"--v-timeline-line-inset":n.lineInset?`calc(var(--v-timeline-dot-size) / 2 + ${convertToUnit(n.lineInset)})`:convertToUnit(0)},n.style]},[createVNode("div",{class:"v-timeline-item__body",style:_.value},[g.default?.()]),createVNode(VTimelineDivider,{ref:S,hideDot:n.hideDot,icon:n.icon,iconColor:n.iconColor,size:n.size,elevation:n.elevation,dotColor:n.dotColor,fillDot:n.fillDot,rounded:n.rounded},{default:g.icon}),n.density!=="compact"&&createVNode("div",{class:"v-timeline-item__opposite"},[!n.hideOpposite&&g.opposite?.()])])),{}}}),makeVTimelineProps=propsFactory({align:{type:String,default:"center",validator:n=>["center","start"].includes(n)},direction:{type:String,default:"vertical",validator:n=>["vertical","horizontal"].includes(n)},justify:{type:String,default:"auto",validator:n=>["auto","center"].includes(n)},side:{type:String,validator:n=>n==null||["start","end"].includes(n)},lineThickness:{type:[String,Number],default:2},lineColor:String,truncateLine:{type:String,validator:n=>["start","end","both"].includes(n)},...only(makeVTimelineItemProps({lineInset:0}),["dotColor","fillDot","hideOpposite","iconColor","lineInset","size"]),...makeComponentProps(),...makeDensityProps(),...makeTagProps(),...makeThemeProps()},"VTimeline"),VTimeline=genericComponent()({name:"VTimeline",props:makeVTimelineProps(),setup(n,r){let{slots:g}=r;const{themeClasses:_}=provideTheme(n),{densityClasses:x}=useDensity(n),{rtlClasses:S}=useRtl();provideDefaults({VTimelineDivider:{lineColor:toRef(n,"lineColor")},VTimelineItem:{density:toRef(n,"density"),dotColor:toRef(n,"dotColor"),fillDot:toRef(n,"fillDot"),hideOpposite:toRef(n,"hideOpposite"),iconColor:toRef(n,"iconColor"),lineColor:toRef(n,"lineColor"),lineInset:toRef(n,"lineInset"),size:toRef(n,"size")}});const E=computed(()=>{const T=n.side?n.side:n.density!=="default"?"end":null;return T&&`v-timeline--side-${T}`}),C=computed(()=>{const T=["v-timeline--truncate-line-start","v-timeline--truncate-line-end"];switch(n.truncateLine){case"both":return T;case"start":return T[0];case"end":return T[1];default:return null}});return useRender(()=>createVNode(n.tag,{class:["v-timeline",`v-timeline--${n.direction}`,`v-timeline--align-${n.align}`,`v-timeline--justify-${n.justify}`,C.value,{"v-timeline--inset-line":!!n.lineInset},_.value,x.value,E.value,S.value,n.class],style:[{"--v-timeline-line-thickness":convertToUnit(n.lineThickness)},n.style]},g)),{}}}),_hoisted_1$8={class:"mb-4"},_sfc_main$i=defineComponent$1({__name:"NouvelleNumération",emits:["suggestion"],setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r(),{mdAndUp:_}=useDisplay(),x=எண்ணிக்கையை_கண்டுப்பிடி(),S=ref$2(!1),E=ref$2(),C=computed(()=>E.value&&x.முறைமைகள்.find(xe=>xe===E.value)?g("ennikkai.erreurNomDupliqué"):!0),T=ref$2();watchEffect(()=>{E.value?.length||(T.value=void 0)});const R=ref$2(),A=ref$2(),I=ref$2(),B=ref$2("https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/numberingSystem"),D=ref$2(),N=computed(()=>D.value?[...D.value].length===[...new Set([...D.value])].length?!0:g("ennikkai.erreurSymbolesRépétés"):!0),M=ref$2(),O=ref$2(),L=()=>{!M.value||!O.value||(U({symbole:M.value,val:parseInt(O.value)}),M.value=O.value=void 0)},F=ref$2({}),U=({symbole:fe,val:xe})=>{F.value={...F.value,[fe]:xe}},j=({symbole:fe})=>{F.value=Object.fromEntries(Object.entries(F.value).filter(([xe,we])=>xe!==fe))},z=ref$2(!1),W=computed(()=>{if(E.value&&T.value&&D.value?.length&&(T.value!=="அடிமானம்"||Object.keys(F.value||[]).length))return{nom:E.value,typeSystème:T.value,symboles:D.value,exposant:I.value,unicode:R.value,décimal:A.value,bases:F.value}}),X=async()=>{const fe=W.value;fe&&(z.value=!0,await x.பரிந்துரையு({குறியீடு:fe.nom,வகை:fe.typeSystème,ஒருங்குறி:fe.unicode,குறிகள்:fe.symboles,அடுக்குக்குறி:fe.exposant,அடிமானங்கள்:fe.bases?JSON.stringify(fe.bases):void 0,பிரிப்பு:fe.décimal}),z.value=!1),ie()},ie=()=>{S.value=!1,E.value=T.value=D.value=R.value=void 0,z.value=!1};return(fe,xe)=>(openBlock(),createBlock(VDialog,{modelValue:S.value,"onUpdate:modelValue":xe[14]||(xe[14]=we=>S.value=we)},{activator:withCtx(({props:we})=>[renderSlot(fe.$slots,"activator",normalizeProps(guardReactiveProps({props:we})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto",width:unref(_)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(g)("ennikkai.nouvelle.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:xe[0]||(xe[0]=()=>ie())})]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"auto"}},{default:withCtx(()=>[createVNode(VTimeline,{side:"end","dot-color":"primary",size:"small","truncate-line":"both",align:"start"},{default:withCtx(()=>[createVNode(VTimelineItem,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(g)("ennikkai.nouvelle.instructionNom"))+" ",1),createVNode(VTextField,{modelValue:E.value,"onUpdate:modelValue":xe[1]||(xe[1]=we=>E.value=we),label:unref(g)("ennikkai.nouvelle.étiquetteNom"),hint:unref(g)("ennikkai.nouvelle.indiceNom"),rules:[C.value],class:"py-2",variant:"outlined"},null,8,["modelValue","label","hint","rules"])]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[E.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(g)("ennikkai.nouvelle.instructionType"))+" ",1),createVNode(VSelect,{modelValue:T.value,"onUpdate:modelValue":xe[2]||(xe[2]=we=>T.value=we),items:[{value:"இடஞ்சார்",title:unref(g)("ennikkai.type.இடஞ்சார்")},{value:"அடிமானம்",title:unref(g)("ennikkai.type.அடிமானம்")}],label:unref(g)("ennikkai.nouvelle.étiquetteTypeSystème"),class:"py-2",variant:"outlined"},null,8,["modelValue","items","label"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[E.value&&T.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(g)("ennikkai.nouvelle.instructionSymboles"))+" ",1),createVNode(VTextField,{modelValue:D.value,"onUpdate:modelValue":xe[3]||(xe[3]=we=>D.value=we),label:unref(g)("ennikkai.nouvelle.étiquetteSymboles"),rules:[N.value],class:"py-2",variant:"outlined"},null,8,["modelValue","label","rules"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[E.value&&T.value==="அடிமானம்"&&D.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$8,toDisplayString(unref(g)("ennikkai.nouvelle.instructionBases")),1),(openBlock(!0),createElementBlock(Fragment,null,renderList(Object.keys(F.value),we=>(openBlock(),createBlock(_sfc_main$j,{key:we,val:F.value[we],symbole:we,onEffacer:xe[4]||(xe[4]=({symbole:G})=>j({symbole:G})),onModifier:xe[5]||(xe[5]=({symbole:G,val:J})=>U({symbole:G,val:J}))},null,8,["val","symbole"]))),128)),createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:5,class:"py-0"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:M.value,"onUpdate:modelValue":xe[6]||(xe[6]=we=>M.value=we),variant:"outlined",density:"compact",label:unref(g)("ennikkai.nouvelle.étiquetteSymboleBase"),hint:unref(g)("ennikkai.nouvelle.indiceSymboleBase"),onBlur:xe[7]||(xe[7]=()=>L())},null,8,["modelValue","label","hint"])]),_:1}),createVNode(VCol,{cols:5,class:"py-0"},{default:withCtx(()=>[createVNode(VTextField,{modelValue:O.value,"onUpdate:modelValue":xe[8]||(xe[8]=we=>O.value=we),variant:"outlined",density:"compact",label:unref(g)("ennikkai.nouvelle.étiquetteValeurBase"),hint:unref(g)("ennikkai.nouvelle.indiceValeurBase"),onBlur:xe[9]||(xe[9]=()=>L())},null,8,["modelValue","label","hint"])]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[(T.value==="இடஞ்சார்"?D.value:Object.keys(F.value).length)?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(unref(g)("ennikkai.nouvelle.instructionUnicode")),1),createVNode(VBtn,{class:"my-2",variant:"outlined","append-icon":"mdi-open-in-new",text:unref(g)("ennikkai.nouvelle.btnUnicode"),onClick:xe[10]||(xe[10]=()=>unref(ouvrirLien)(B.value))},null,8,["text"]),createVNode(VTextField,{modelValue:R.value,"onUpdate:modelValue":xe[11]||(xe[11]=we=>R.value=we),label:unref(g)("ennikkai.nouveau.étiquetteUnicode"),hint:unref(g)("ennikkai.nouveau.indiceUnicode"),class:"py-2",variant:"outlined"},null,8,["modelValue","label","hint"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[W.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(unref(g)("ennikkai.nouvelle.instructionConfirmation")),1),createVNode(VBtn,{class:"mt-2",variant:"outlined",loading:z.value,text:"Confirmer",onClick:xe[12]||(xe[12]=()=>X())},null,8,["loading"])]),_:1})):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VBtn,{disabled:!W.value,text:"Confirmer",onClick:xe[13]||(xe[13]=()=>X())},null,8,["disabled"])]),_:1})]),_:1},8,["width"])]),_:3},8,["modelValue"]))}}),rtlRange="֑-߿יִ-﷽ﹰ-ﻼ",ltrRange="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",rtl=new RegExp("^[^"+ltrRange+"]*["+rtlRange+"]"),ltr=new RegExp("^[^"+rtlRange+"]*["+ltrRange+"]");function direction(n){const r=String(n||"");return rtl.test(r)?"rtl":ltr.test(r)?"ltr":"neutral"}const _sfc_main$h=defineComponent$1({__name:"ItemNumération",props:{code:{}},setup(n){const r=n,{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),{தேர்ந்தெடுத்தப்பட்ட_எண்ணுரு:x,எண்ணை_வடிவூட்டு:S}=எண்களைப்_பயன்படுத்து(),E=S(123.45,r.code);return(C,T)=>(openBlock(),createBlock(VListItem,null,{prepend:withCtx(()=>[C.code===unref(x)?(openBlock(),createBlock(VIcon,{key:0,color:"primary"},{default:withCtx(()=>T[0]||(T[0]=[createTextVNode(" mdi-check-bold ")])),_:1})):createCommentVNode("",!0)]),title:withCtx(()=>[createTextVNode(toDisplayString(C.code||unref(_)("communs.auto")),1)]),append:withCtx(()=>[createTextVNode(toDisplayString(unref(E)),1)]),_:1}))}}),_sfc_main$g=defineComponent$1({__name:"JetonNumération",props:{code:{}},setup(n){const r=n,{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),{எண்ணை_வடிவூட்டு:x}=எண்களைப்_பயன்படுத்து(),S=x(123.45,r.code);return(E,C)=>(openBlock(),createBlock(VChip,{variant:"outlined",size:"small",label:""},{default:withCtx(()=>[renderSlot(E.$slots,"default",{},()=>[createTextVNode(toDisplayString(E.code||unref(_)("communs.auto")),1)]),createTextVNode(" "+toDisplayString(unref(S)),1)]),_:3}))}}),VItemGroupSymbol=Symbol.for("vuetify:v-item-group"),makeVItemGroupProps=propsFactory({...makeComponentProps(),...makeGroupProps({selectedClass:"v-item--selected"}),...makeTagProps(),...makeThemeProps()},"VItemGroup"),VItemGroup=genericComponent()({name:"VItemGroup",props:makeVItemGroupProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const{themeClasses:_}=provideTheme(n),{isSelected:x,select:S,next:E,prev:C,selected:T}=useGroup(n,VItemGroupSymbol);return()=>createVNode(n.tag,{class:["v-item-group",_.value,n.class],style:n.style},{default:()=>[g.default?.({isSelected:x,select:S,next:E,prev:C,selected:T.value})]})}}),VItem=genericComponent()({name:"VItem",props:makeGroupItemProps(),emits:{"group:selected":n=>!0},setup(n,r){let{slots:g}=r;const{isSelected:_,select:x,toggle:S,selectedClass:E,value:C,disabled:T}=useGroupItem(n,VItemGroupSymbol);return()=>g.default?.({isSelected:_.value,selectedClass:E.value,select:x,toggle:S,value:C.value,disabled:T.value})}}),_hoisted_1$7={class:"mb-2"},_sfc_main$f=defineComponent$1({__name:"NouvelleÉcriture",emits:["suggestion"],setup(n,{emit:r}){const g=r,_=utiliserNuchabäl(),{mdAndUp:x}=useDisplay(),{எண்ணுரு_முறைமைகள்:S}=எண்களைப்_பயன்படுத்து(),{மொழியாக்கம்_பயன்படுத்து:E}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:C}=E(),T=ref$2(!1),R=ref$2(),A=ref$2();watchEffect(()=>{R.value?.length||(A.value=void 0)});const I=computed(()=>{if(!A.value)return;const ve=_.konojelTzibanem;let Z,ce=0;for(const ue of ve){const se=_.rutzibTzibanem({runuk:ue});if(!se)continue;A.value.match(new RegExp(se,"g"))&&ue.length>ce&&(Z=ue,ce=ue.length)}return Z}),B=suivre(async({runuk:ve,f:Z})=>{const ce=_.tatzeqelbejRubiTzibanem({runuk:ve,sm:Z});return async()=>ce()},{runuk:I}),D=ref$2(),N=computed(()=>I.value&&I.value===D.value),M=()=>{const ve=I.value;ve&&q({code:ve})},O=ref$2(),L=ref$2();watch(A,()=>{O.value=void 0}),watchEffect(()=>{O.value||(L.value=void 0)});const F=ref$2(),U=ref$2();watch(O,()=>{F.value=void 0}),watchEffect(()=>{F.value||(U.value=void 0)});const j=computed(()=>{const ve=_.konojelTzibanem;if(F.value&&ve.includes(F.value)){const Z=_.rubiTzibanem({runuk:F.value});return C("nuchabäl.écriture.nouvelle.erreurCodeÉcritureExistant",{nom:Z})}return!0}),z=computed(()=>F.value&&[...F.value].length>5?C("nuchabäl.écriture.nouvelle.erreurCodeTropLong"):!0),W=ref$2(),X=computed(()=>{if(!W.value||!A.value)return;const ve=[...A.value].find(ce=>direction(ce)!=="neutral");if(!ve)return;const Z=direction(ve);switch(W.value){case"horizontal-tb":return Z?"←↓":"→↓";case"vertical-rl":return Z?"↓←":"↑→";case"vertical-lr":return Z?"↓→":"↑←";default:return}}),ie=ref$2();watchEffect(()=>{U.value?ie.value=_.rajilanïkTzibanem({runuk:U.value}):ie.value=void 0});const fe=ref$2(),xe=ref$2("https://github.com/node-unicode/unicode-15.0.0/tree/main/Script"),we=ref$2(!1),G=computed(()=>{if(U.value&&L.value&&ie.value&&X.value&&fe.value)return{code:U.value,nom:L.value,numération:ie.value,direction:X.value,expré:fe.value}}),J=async()=>{const ve=G.value;ve&&(await _.tachilabejTzibanem({runukTzib:ve.code,rajilanïkTzib:ve.numération,rubiTzib:ve.nom,rucholanemTzib:ve.direction,rutzibTzib:ve.expré}),q({code:ve.code}))},q=({code:ve})=>{g("suggestion",{code:ve}),H()},H=()=>{T.value=!1,R.value=void 0,A.value=void 0,we.value=!1};return(ve,Z)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":Z[17]||(Z[17]=ce=>T.value=ce)},{activator:withCtx(({props:ce})=>[renderSlot(ve.$slots,"activator",normalizeProps(guardReactiveProps({props:ce})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto",width:unref(x)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)("nuchabäl.écriture.nouvelle.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:Z[0]||(Z[0]=()=>H())})]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"auto"}},{default:withCtx(()=>[createVNode(VTimeline,{side:"end","dot-color":"primary",size:"small","truncate-line":"both",align:"start"},{default:withCtx(()=>[createVNode(VTimelineItem,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$7,toDisplayString(unref(C)("nuchabäl.écriture.nouvelle.instructionsÉchantillon")),1),createVNode(VTextarea,{modelValue:R.value,"onUpdate:modelValue":Z[1]||(Z[1]=ce=>R.value=ce),rows:3,clearable:"",variant:"outlined",onBlur:Z[2]||(Z[2]=ce=>A.value=R.value),onKeydown:Z[3]||(Z[3]=withKeys(ce=>A.value=R.value,["enter"]))},null,8,["modelValue"])]),_:1}),createVNode(VSlideYTransition,null,{default:withCtx(()=>[I.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(unref(C)("nuchabäl.écriture.nouvelle.instructionsDupliquée",{nom:unref(B)})),1),createVNode(VChip,{class:"mt-2 mx-2",variant:"outlined",label:"",size:"large",onClick:Z[4]||(Z[4]=()=>M())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)("nuchabäl.oui")),1)]),_:1}),createVNode(VChip,{class:"mt-2 mx-2",variant:N.value?"tonal":"outlined",label:"",size:"large",color:N.value?"primary":void 0,onClick:Z[5]||(Z[5]=()=>D.value=I.value)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)("nuchabäl.non")),1)]),_:1},8,["variant","color"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VSlideYTransition,null,{default:withCtx(()=>[A.value&&(!I.value||D.value===I.value)?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)("nuchabäl.écriture.nouvelle.instructionsDirection"))+" ",1),createVNode(VItemGroup,{"selected-class":"bg-primary"},{default:withCtx(()=>[createVNode(VContainer,null,{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(["horizontal-tb","vertical-rl","vertical-lr"],ce=>createVNode(VCol,{key:ce,cols:6,class:"d-flex flex-wrap pa-1"},{default:withCtx(()=>[createVNode(VItem,null,{default:withCtx(({selectedClass:ue,toggle:se})=>[createVNode(VLocaleProvider,{rtl:ce.includes("rl")},{default:withCtx(()=>[createVNode(VCard,{class:normalizeClass(["pa-4",ue]),height:"200",width:"200",dark:"",onClick:()=>{se?.(),W.value=ce}},{default:withCtx(()=>[createBaseVNode("div",{style:normalizeStyle({"writing-mode":ce}),dir:"auto"},toDisplayString(unref(couper)(A.value,100,unref(C)("communs.troisPetitsPoints"))),5)]),_:2},1032,["class","onClick"])]),_:2},1032,["rtl"])]),_:2},1024)]),_:2},1024)),64))]),_:1})]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VSlideYTransition,null,{default:withCtx(()=>[X.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)("nuchabäl.écriture.nouvelle.instructionsNom"))+" ",1),createVNode(VTextField,{modelValue:O.value,"onUpdate:modelValue":Z[6]||(Z[6]=ce=>O.value=ce),variant:"outlined",class:"mt-2",hint:unref(C)("nuchabäl.écriture.nouvelle.indiceNom"),onBlur:Z[7]||(Z[7]=()=>L.value=O.value),onKeydown:Z[8]||(Z[8]=withKeys(()=>L.value=O.value,["enter"]))},null,8,["modelValue","hint"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VSlideYTransition,null,{default:withCtx(()=>[L.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)("nuchabäl.écriture.nouvelle.instructionsCode"))+" ",1),createVNode(VTextField,{modelValue:F.value,"onUpdate:modelValue":Z[9]||(Z[9]=ce=>F.value=ce),variant:"outlined",class:"mt-2",rules:[j.value,z.value],onBlur:Z[10]||(Z[10]=()=>U.value=F.value),onKeydown:Z[11]||(Z[11]=withKeys(()=>U.value=F.value,["enter"]))},null,8,["modelValue","rules"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VSlideYTransition,null,{default:withCtx(()=>[U.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(C)("nuchabäl.écriture.nouvelle.instructionsNumération"))+" ",1),createVNode(VAutocomplete,{modelValue:ie.value,"onUpdate:modelValue":Z[13]||(Z[13]=ce=>ie.value=ce),items:unref(S),label:unref(C)("nuchabäl.numération"),variant:"outlined",density:"compact","hide-details":""},{selection:withCtx(({item:ce})=>[createVNode(_sfc_main$g,{code:ce.value},null,8,["code"])]),item:withCtx(({props:ce,item:ue})=>[createVNode(_sfc_main$h,mergeProps(ce,{code:ue.value}),null,16,["code"])]),append:withCtx(()=>[createVNode(_sfc_main$i,{onSuggestion:Z[12]||(Z[12]=({système:ce})=>ie.value=ce)},{activator:withCtx(({props:ce})=>[createVNode(VIcon,mergeProps(ce,{icon:"mdi-plus"}),null,16)]),_:1})]),_:1},8,["modelValue","items","label"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VSlideYTransition,null,{default:withCtx(()=>[ie.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(unref(C)("nuchabäl.écriture.nouvelle.instructionsExpré")),1),createVNode(VBtn,{class:"my-2",variant:"outlined","append-icon":"mdi-open-in-new",text:unref(C)("nuchabäl.écriture.nouvelle.btnExpré"),onClick:Z[14]||(Z[14]=()=>unref(ouvrirLien)(xe.value))},null,8,["text"]),createVNode(VTextField,{modelValue:fe.value,"onUpdate:modelValue":Z[15]||(Z[15]=ce=>fe.value=ce),class:"mt-2",label:unref(C)("nuchabäl.expré"),variant:"outlined",density:"compact","hide-details":""},null,8,["modelValue","label"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VSlideYTransition,null,{default:withCtx(()=>[G.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(unref(C)("nuchabäl.écriture.nouvelle.confirmation",{nom:L.value})),1),createVNode(VBtn,{class:"mt-2",variant:"outlined",loading:we.value,text:unref(C)("nuchabäl.écriture.nouvelle.btnCréation"),onClick:Z[16]||(Z[16]=()=>J())},null,8,["loading","text"])]),_:1})):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$6={class:"mb-2"},_sfc_main$e=defineComponent$1({__name:"ItemÉcriture",props:{code:{}},setup(n){const r=n,{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),x=utiliserNuchabäl(),S=suivre(async({runuk:T,f:R})=>{const A=x.tatzeqelbejRubiTzibanem({runuk:T,sm:R});return async()=>A()},{runuk:computed(()=>r.code)}),E=suivre(async({runuk:T,f:R})=>{const A=x.tatzeqelbejRajilanïkTzibanem({runuk:T,sm:R});return async()=>A()},{runuk:computed(()=>r.code)}),C=suivre(async({runuk:T,f:R})=>{const A=x.tatzeqelbejRucholanemTzibanem({runuk:T,sm:R});return async()=>A()},{runuk:computed(()=>r.code)});return(T,R)=>(openBlock(),createBlock(VListItem,null,{title:withCtx(()=>[createBaseVNode("p",_hoisted_1$6,toDisplayString(unref(S)),1)]),prepend:withCtx(()=>[createVNode(VAvatar,null,{default:withCtx(()=>[createTextVNode(toDisplayString(T.code),1)]),_:1})]),default:withCtx(()=>[unref(E)?(openBlock(),createBlock(_sfc_main$g,{key:0,class:"me-2",code:unref(E)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("nuchabäl.numération")),1)]),_:1},8,["code"])):createCommentVNode("",!0),unref(C)?(openBlock(),createBlock(VChip,{key:1,class:"me-2",variant:"outlined",size:"small",label:""},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("nuchabäl.direction"))+" "+toDisplayString(unref(C)),1)]),_:1})):createCommentVNode("",!0),renderSlot(T.$slots,"default")]),_:3}))}}),_sfc_main$d=defineComponent$1({__name:"JetonÉcriture",props:{code:{}},setup(n){const r=n,g=utiliserNuchabäl(),_=suivre(async({runuk:x,f:S})=>{const E=g.tatzeqelbejRubiTzibanem({runuk:x,sm:S});return async()=>E()},{runuk:computed(()=>r.code)});return(x,S)=>(openBlock(),createBlock(VChip,{label:"",variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)),1)]),_:1}))}}),_sfc_main$c=defineComponent$1({__name:"SélecteurÉcriture",emits:["selectionnee"],setup(n,{emit:r}){const g=r,_=utiliserNuchabäl(),x=suivre(async({f:E})=>{const C=_.tatzeqelbejKonojelTzibanem({sm:E});return async()=>C()}),S=ref$2();return watchEffect(()=>{g("selectionnee",{code:S.value})}),(E,C)=>(openBlock(),createBlock(VSelect,{modelValue:S.value,"onUpdate:modelValue":C[1]||(C[1]=T=>S.value=T),variant:"outlined",items:unref(x)},{item:withCtx(({props:T,item:R})=>[createVNode(_sfc_main$e,mergeProps(T,{code:R.raw}),null,16,["code"])]),selection:withCtx(({item:T})=>[createVNode(_sfc_main$d,{code:T.raw},null,8,["code"])]),append:withCtx(()=>[createVNode(_sfc_main$f,{onSuggestion:C[0]||(C[0]=({code:T})=>S.value=T)},{activator:withCtx(({props:T})=>[createVNode(VIcon,mergeProps({icon:"mdi-plus"},T),null,16)]),_:1})]),_:1},8,["modelValue","items"]))}}),_hoisted_1$5={class:"mb-2"},_hoisted_2$5={key:0,class:"text-end"},_hoisted_3$4={class:"mb-2"},_sfc_main$b=defineComponent$1({__name:"NouvelleLangue",emits:["suggestion"],setup(n,{emit:r}){const g=utiliserNuchabäl(),_=r,{எண்ணுரு_முறைமைகள்:x}=எண்களைப்_பயன்படுத்து(),{மொழியாக்கம்_பயன்படுத்து:S}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:E}=S(),{mdAndUp:C}=useDisplay(),{isRtl:T}=useRtl(),R=ref$2(!1),A=ref$2(),I=ref$2(),B=ref$2(!1);watchEffect(()=>{A.value||(I.value=void 0)}),watchEffect(()=>{A.value&&(B.value=!1)});const D=ref$2();watchEffect(async()=>{if(I.value){const Se=await détecterLangue({texte:I.value});Se&&(D.value=Se);return}D.value=void 0});const N=suivre(async({runuk:Se,runukulem:$e,f:_e})=>{const Oe=g.tatzeqelbejRubiChabäl({runuk:Se,runukulem:$e,sm:_e});return async()=>Oe()},{runuk:D,runukulem:"iso"}),M=suivre(async({chabäl:Se,f:$e})=>{const _e=g.tatzeqelbejRunukChabäl({chabäl:Se,sm:$e});return async()=>_e()},{chabäl:N}),O=ref$2(),L=computed(()=>M.value&&M.value===O.value),F=()=>{const Se=M.value;Se&&We({code:Se})},U=ref$2();watch(A,()=>{U.value=void 0});const j=computed(()=>{if(!I.value)return;const Se=g.konojelTzibanem;let $e,_e=0;for(const Oe of Se){const Ke=g.rutzibTzibanem({runuk:Oe});if(!Ke)continue;I.value.match(new RegExp(Ke,"g"))&&Oe.length>_e&&($e=Oe,_e=Oe.length)}return $e}),z=computed(()=>I.value&&!j.value),W=ref$2();watchEffect(()=>{W.value?U.value=j.value:W.value===!1&&(U.value=void 0)}),watch(A,()=>{W.value=void 0});const X=suivre(async({runuk:Se,f:$e})=>{const _e=g.tatzeqelbejRubiTzibanem({runuk:Se,sm:$e});return async()=>_e()},{runuk:j}),ie=suivre(async({runuk:Se,f:$e})=>{const _e=g.tatzeqelbejRubiTzibanem({runuk:Se,sm:$e});return async()=>_e()},{runuk:U}),fe=ref$2(),xe=ref$2();watch(I,()=>{fe.value=void 0}),watch(U,()=>{fe.value=void 0}),watchEffect(()=>{fe.value||(xe.value=void 0)});const we=ref$2(),G=ref$2();watch(fe,()=>{we.value=void 0}),watchEffect(()=>{we.value||(G.value=void 0)});const J=computed(()=>{const Se=g.konojelChabäl;if(we.value&&Se.includes(we.value)){const $e=g.rubiChabäl({runuk:we.value});return E("nuchabäl.langue.nouvelle.erreurCodeExistant",{langue:$e})}return!0}),q=computed(()=>we.value&&[...we.value].length>5?E("nuchabäl.langue.nouvelle.erreurCodeTropLong"):!0),H=ref$2();watchEffect(()=>{U.value?H.value=g.rajilanïkTzibanem({runuk:U.value}):H.value=void 0});const ve=ref$2(),Z=ref$2(),ce=ref$2(),ue=ref$2(),se=ref$2(),te=ref$2("https://fr.wikipedia.org/wiki/Liste_des_codes_ISO_639-1  "),Y=ref$2("https://fr.wikipedia.org/wiki/Liste_des_codes_ISO_639-2"),be=ref$2("https://iso639-3.sil.org/code_tables/639/data");watchEffect(()=>{xe.value?se.value=`https://glottolog.org/glottolog?name=${xe.value}&namequerytype=part&multilingual=on`:se.value=void 0});const ye=Se=>computed(()=>{if(!U.value||!Se.value)return!0;const $e=g.rutzibTzibanem({runuk:U.value});return $e&&!Se.value.match(new RegExp($e,"g"))?E("nuchabäl.langue.nouvelle.erreurÉcriture",{écriture:ie.value}):!0}),Ie=ye(fe),ke=ye(we),Ce=ref$2(!1),Ae=computed(()=>{if(G.value&&xe.value&&U.value&&H.value)return{code:G.value,nom:xe.value,écriture:U.value,numération:H.value,codeGl:ve.value,codeI1:Z.value,codeI2:ce.value,codeI3:ue.value}}),Ne=async()=>{const Se=Ae.value;Se&&(await g.tachilabejChabäl({rubiChabäl:Se.nom,runukChabäl:Se.code,rutzibanemChabäl:Se.écriture,rajilanïkChabäl:Se.numération,gl:Se.codeGl,i1:Se.codeI1,i2:Se.codeI2,i3:Se.codeI3}),We({code:Se.code}))},We=({code:Se})=>{_("suggestion",{code:Se}),Be()},Be=()=>{R.value=!1,A.value=void 0,I.value=void 0,Ce.value=!1};return(Se,$e)=>(openBlock(),createBlock(VDialog,{modelValue:R.value,"onUpdate:modelValue":$e[27]||($e[27]=_e=>R.value=_e)},{activator:withCtx(({props:_e})=>[renderSlot(Se.$slots,"activator",normalizeProps(guardReactiveProps({props:_e})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto",width:unref(C)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.langue.nouvelle.titre"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",variant:"flat",size:"small",onClick:$e[0]||($e[0]=()=>Be())})]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"auto"}},{default:withCtx(()=>[createVNode(VTimeline,{side:"end","dot-color":"primary",size:"small","truncate-line":"both",align:"start"},{default:withCtx(()=>[createVNode(VTimelineItem,null,{default:withCtx(()=>[createBaseVNode("p",_hoisted_1$5,toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionÉchantillon")),1),createVNode(VTextarea,{modelValue:A.value,"onUpdate:modelValue":$e[1]||($e[1]=_e=>A.value=_e),rows:3,clearable:"",variant:"outlined",onBlur:$e[2]||($e[2]=_e=>I.value=A.value),onKeydown:$e[3]||($e[3]=withKeys(_e=>I.value=A.value,["enter"]))},null,8,["modelValue"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[A.value?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_2$5,[createVNode(VBtn,{variant:"outlined","append-icon":unref(T)?"mdi-arrow-left":"mdi-arrow-right",onClick:$e[4]||($e[4]=()=>{I.value=A.value,B.value=!0})},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.langue.nouvelle.sauterÉchantillon")),1)]),_:1},8,["append-icon"])]))]),_:1})]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[unref(M)?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionExistante",{nom:unref(N)})),1),createVNode(VChip,{class:"mt-2 mx-2",variant:"outlined",label:"",size:"large",onClick:$e[5]||($e[5]=()=>F())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.oui")),1)]),_:1}),createVNode(VChip,{class:"mt-2 mx-2",variant:L.value?"tonal":"outlined",label:"",size:"large",color:L.value?"primary":void 0,onClick:$e[6]||($e[6]=()=>O.value=unref(M))},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.non")),1)]),_:1},8,["variant","color"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[(!unref(M)||L.value)&&j.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(M))+" ",1),createBaseVNode("p",null,toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionÉcritureExistante",{nom:unref(X)||j.value})),1),createVNode(VChipGroup,{modelValue:W.value,"onUpdate:modelValue":$e[7]||($e[7]=_e=>W.value=_e),"selected-class":"text-primary",mandatory:""},{default:withCtx(()=>[createVNode(VChip,{class:"mt-2 mx-2",label:"",size:"large",value:!0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.oui")),1)]),_:1}),createVNode(VChip,{class:"mt-2 mx-2",label:"",size:"large",value:!1},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.non")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[B.value||W.value===!1||!z.value&&I.value&&!j.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionÉcriture")),1),createVNode(_sfc_main$c,{class:"mt-2",onSelectionnee:$e[8]||($e[8]=({code:_e})=>U.value=_e)})]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[z.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionNouvelleÉcriture")),1),createVNode(_sfc_main$f,{onSuggestion:$e[9]||($e[9]=({code:_e})=>U.value=_e)},{activator:withCtx(({props:_e})=>[createVNode(VBtn,mergeProps(_e,{class:"mt-2 mx-2",variant:"outlined"}),{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.écriture.nouvelle.btn")),1)]),_:2},1040)]),_:1})]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[U.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionNom"))+" ",1),createVNode(VTextField,{modelValue:fe.value,"onUpdate:modelValue":$e[10]||($e[10]=_e=>fe.value=_e),variant:"outlined",class:"mt-2",hint:unref(E)("nuchabäl.langue.nouvelle.indiceNom"),rules:[unref(Ie)],onBlur:$e[11]||($e[11]=()=>xe.value=fe.value),onKeydown:$e[12]||($e[12]=withKeys(()=>xe.value=fe.value,["enter"]))},null,8,["modelValue","hint","rules"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[xe.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionCode"))+" ",1),createVNode(VTextField,{modelValue:we.value,"onUpdate:modelValue":$e[13]||($e[13]=_e=>we.value=_e),variant:"outlined",class:"mt-2",rules:[unref(ke),J.value,q.value],onBlur:$e[14]||($e[14]=()=>G.value=we.value),onKeydown:$e[15]||($e[15]=withKeys(()=>G.value=we.value,["enter"]))},null,8,["modelValue","rules"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[G.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionNumération"))+" ",1),createVNode(VAutocomplete,{modelValue:H.value,"onUpdate:modelValue":$e[17]||($e[17]=_e=>H.value=_e),items:unref(x),label:unref(E)("nuchabäl.numération"),variant:"outlined",density:"compact","hide-details":"","prepend-icon":"mdi-abacus"},{selection:withCtx(({item:_e})=>[createVNode(_sfc_main$g,{code:_e.value},null,8,["code"])]),item:withCtx(({props:_e,item:Oe})=>[createVNode(_sfc_main$h,mergeProps(_e,{code:Oe.value}),null,16,["code"])]),append:withCtx(()=>[createVNode(_sfc_main$i,{onSuggestion:$e[16]||($e[16]=({système:_e})=>H.value=_e)},{activator:withCtx(({props:_e})=>[createVNode(VIcon,mergeProps(_e,{icon:"mdi-plus"}),null,16)]),_:1})]),_:1},8,["modelValue","items","label"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[G.value&&H.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",_hoisted_3$4,toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionCodes")),1),createVNode(VTextField,{modelValue:ve.value,"onUpdate:modelValue":$e[19]||($e[19]=_e=>ve.value=_e),variant:"outlined",density:"compact"},{prepend:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.écriture.codes.gl")),1)]),append:withCtx(()=>[se.value?(openBlock(),createBlock(VIcon,{key:0,icon:"mdi-open-in-new",onClick:$e[18]||($e[18]=_e=>unref(ouvrirLien)(se.value))})):createCommentVNode("",!0)]),_:1},8,["modelValue"]),createVNode(VTextField,{modelValue:Z.value,"onUpdate:modelValue":$e[21]||($e[21]=_e=>Z.value=_e),variant:"outlined",density:"compact"},{prepend:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.écriture.codes.i1")),1)]),append:withCtx(()=>[te.value?(openBlock(),createBlock(VIcon,{key:0,icon:"mdi-open-in-new",onClick:$e[20]||($e[20]=_e=>unref(ouvrirLien)(te.value))})):createCommentVNode("",!0)]),_:1},8,["modelValue"]),createVNode(VTextField,{modelValue:ce.value,"onUpdate:modelValue":$e[23]||($e[23]=_e=>ce.value=_e),variant:"outlined",density:"compact"},{prepend:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.écriture.codes.i2")),1)]),append:withCtx(()=>[Y.value?(openBlock(),createBlock(VIcon,{key:0,icon:"mdi-open-in-new",onClick:$e[22]||($e[22]=_e=>unref(ouvrirLien)(Y.value))})):createCommentVNode("",!0)]),_:1},8,["modelValue"]),createVNode(VTextField,{modelValue:ue.value,"onUpdate:modelValue":$e[25]||($e[25]=_e=>ue.value=_e),variant:"outlined",density:"compact"},{prepend:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("nuchabäl.écriture.codes.i3")),1)]),append:withCtx(()=>[be.value?(openBlock(),createBlock(VIcon,{key:0,icon:"mdi-open-in-new",onClick:$e[24]||($e[24]=_e=>unref(ouvrirLien)(be.value))})):createCommentVNode("",!0)]),_:1},8,["modelValue"])]),_:1})):createCommentVNode("",!0)]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[Ae.value?(openBlock(),createBlock(VTimelineItem,{key:0},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(unref(E)("nuchabäl.langue.nouvelle.instructionConfirmation",{nom:xe.value})),1),createVNode(VBtn,{class:"mt-2",variant:"outlined",loading:Ce.value,text:unref(E)("nuchabäl.langue.nouvelle.btnAjout"),onClick:$e[26]||($e[26]=()=>Ne())},null,8,["loading","text"])]),_:1})):createCommentVNode("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$4={key:0},_hoisted_2$4={class:"text-right"},_hoisted_3$3={key:1,class:"text-center"},_hoisted_4$2=["src","width"],_hoisted_5$1={class:"my-2 text-h6 text-disabled"},_hoisted_6$1={class:"text-center"},_hoisted_7$1={class:"text-h4"},_hoisted_8$1={key:0},_hoisted_9$1={key:1,class:"text-center"},_hoisted_10$1=["src","width"],_hoisted_11$1={class:"my-2"},_sfc_main$a=defineComponent$1({__name:"ContribuerTraductions",setup(n){const r=utiliserConstellation(),g=கிளிமூக்கு(),{mdAndUp:_}=useDisplay(),{மொழி:x,மாற்றுமொழிகள்:S}=மொழிகளைப்_பயன்படுத்து(),{கிடைக்கும்_மொழிகளை_பயன்படுத்து:E,சாபிகளை_பயன்படுத்து:C,மொழிபெயர்ப்புகளை_பயன்படுத்து:T,பரிந்துரைகளை_பயன்படுத்து:R,மொழியாக்கம்_பயன்படுத்து:A,மொழி_முன்னேற்றத்தை_பயன்படுத்து:I}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:B}=A(),{எண்ணை_வடிவூட்டு:D}=எண்களைப்_பயன்படுத்து(),{கிடைக்கும்_மொழி_குறியீடுகள்:N,மொழிகளும்_குறியீடுகளும்:M}=E(),O=ref$2(!1),L=ref$2();onMounted(async()=>{L.value=await r.obtIdCompte()});const F=ref$2(),U=ref$2(x.value);watchEffect(()=>{F.value||(F.value=S.value[0]||N.value[0])}),watch(F,(Me,Le)=>{Me===U.value&&Le&&(U.value=Le)}),watch(U,(Me,Le)=>{Me===F.value&&Le&&(F.value=Le)});const j=(Me,Le)=>!!(Me.toLowerCase().includes(Le.toLowerCase())||M.value.find(ze=>ze.குறியீடு===Me)?.மொழி?.toLowerCase().includes(Le.toLowerCase())),z=()=>{const Me=U.value;F.value&&(U.value=F.value,F.value=Me)},{மொழி_முன்னேற்றம்:W}=I({மொழி:U,வகை:"வார்த்தை"}),X=computed(()=>W.value?W.value.அங்கீகரிக்கப்பட்டவை/W.value.மொத்தம்:0),ie=computed(()=>W.value?W.value.பரிந்துரைக்கப்பட்டவை/W.value.மொத்தம்:0),fe=ref$2("nonTraduites"),xe=ref$2(""),{சாபிகள்:we}=C(),G=computed(()=>{if(!we.value)return;let Me=we.value;return(fe.value==="nonTraduites"||fe.value==="sansSuggestion")&&(Me=Me.filter(Le=>!H.value[Le]),fe.value==="sansSuggestion"&&(Me=Me.filter(Le=>!ye.value.find(ze=>ze.பரிந்துரை.சாபி===Le)))),xe.value&&(Me=Me.filter(Le=>Le.toLowerCase().includes(xe.value.toLowerCase())||Object.values(q.value[Le]||{}).some(ze=>ze.toLowerCase().includes(xe.value.toLowerCase())))),Me}),J=ref$2();watch(J,()=>{ce.value=""});const{அங்கீகரிக்கப்பட்ட_மொழிபெயர்ப்புகள்:q}=T({}),H=computed(()=>{const{value:Me}=U;return Me&&Object.fromEntries(Object.keys(q.value).map(Le=>[Le,q.value[Le][Me]]))||{}}),{obtImageDéco:ve}=utiliserImagesDéco(),Z=ve("message"),ce=ref$2(),ue=computed(()=>{if(J.value&&F.value)return q.value[J.value]?.[F.value]}),se=ref$2(!1),te=async()=>{se.value=!0,J.value&&ce.value&&U.value&&await g.மொழிபெயர்ப்பை_பரிந்துரையு({சாபி:J.value,மொழிபெயர்ப்பு:ce.value.trim(),இலக்கு_மொழி:U.value,மூல்_மொழி:F.value,மூல்_உரை:ue.value}),ce.value="",se.value=!1},Y=computed(()=>Ie.value.length||Be.value.length||_e.value?.length),be=ve("vide"),{பரிந்துரைகள்:ye}=R(),Ie=computed(()=>{const{value:Me}=U;return Me&&ye.value.filter(Le=>Le.பரிந்துரை.இலக்கு_மொழி===Me&&Le.பரிந்துரை.சாபி===J.value)||[]}),ke=async Me=>{await g.கிளி?.பரிந்துரையை_நீக்கு({அடையாளம்:Me})},Ce=computed(()=>Ie.value.length),Ae=D(Ce),Ne=suivre(async({f:Me})=>await g.மொழிபெயர்ப்புகளை_கேள்ளு({செ:Me})),We=computed(()=>J.value&&Ne.value?Ne.value[J.value]:[]),Be=computed(()=>{if(!ue.value||!F.value)return[];const Me=ue.value,Le=F.value;return Object.entries(Ne.value||{}).map(([Je,Qe])=>({clef:Je,texte:Qe[Le]})).filter(({clef:Je,texte:Qe})=>!!Qe&&Je!==J.value).map(({clef:Je,texte:Qe})=>({clef:Je,texte:Qe,corresp:search(Qe,Me,Math.floor(Me.length/4))})).filter(({corresp:Je})=>Je.length).map(({clef:Je,texte:Qe,corresp:rt})=>({clef:Je,texte:Qe,corresp:{début:rt[0].start,fin:rt[0].end},traduc:(Ne.value||{})[Je]?.[U.value]})).filter(({traduc:Je})=>!!Je)}),Se=computed(()=>Be.value.length),$e=D(Se),_e=computed(()=>We.value?Object.entries(We.value).map(([Me,Le])=>({lng:Me,traduc:Le})).filter(({lng:Me})=>Me!==U.value&&Me!==F.value):[]),Oe=computed(()=>_e.value.length),Ke=D(Oe);return(Me,Le)=>(openBlock(),createBlock(VDialog,{modelValue:O.value,"onUpdate:modelValue":Le[16]||(Le[16]=ze=>O.value=ze)},{activator:withCtx(({props:ze})=>[renderSlot(Me.$slots,"activator",normalizeProps(guardReactiveProps({props:ze})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto",width:unref(_)?"95%":void 0},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(B)("kilimukku.titre"))+" ",1),createVNode(VSpacer),createVNode(_sfc_main$1t,null,{activator:withCtx(({props:ze})=>[createVNode(VBtn,mergeProps(ze,{icon:"mdi-cogs",size:"small",variant:"flat"}),null,16)]),_:1}),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:Le[0]||(Le[0]=ze=>O.value=!1)})]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(B)("kilimukku.sousTitre")),1)]),_:1}),createVNode(VDivider,{class:"my-3"})]),_:1}),createVNode(VCardText,{class:"overflow-auto"},{default:withCtx(()=>[createVNode(VRow,null,{default:withCtx(()=>[createVNode(VCol,{cols:unref(_)?4:12},{default:withCtx(()=>[createVNode(VAutocomplete,{modelValue:F.value,"onUpdate:modelValue":Le[2]||(Le[2]=ze=>F.value=ze),class:"pt-2",variant:"outlined","hide-details":"",items:unref(N),label:unref(B)("kilimukku.langueSource"),"custom-filter":j},{item:withCtx(({item:ze,props:Je})=>[createVNode(_sfc_main$l,mergeProps(Je,{code:ze.value,selectionnee:!1}),null,16,["code"])]),selection:withCtx(({item:ze})=>[createVNode(_sfc_main$k,{code:ze.value},null,8,["code"])]),append:withCtx(()=>[createVNode(_sfc_main$b,{onClick:Le[1]||(Le[1]=withModifiers(()=>{},["stop"]))},{activator:withCtx(({props:ze})=>[createVNode(VIcon,mergeProps(ze,{icon:"mdi-plus"}),null,16)]),_:1}),createVNode(VDivider)]),_:1},8,["modelValue","items","label"])]),_:1},8,["cols"]),unref(_)?(openBlock(),createBlock(VCol,{key:0,cols:1,class:"text-center"},{default:withCtx(()=>[createVNode(VBtn,{class:"mt-2",icon:"mdi-swap-horizontal",variant:"flat",disabled:!F.value,onClick:Le[3]||(Le[3]=()=>z())},null,8,["disabled"])]),_:1})):createCommentVNode("",!0),createVNode(VCol,{cols:unref(_)?4:12},{default:withCtx(()=>[createVNode(VAutocomplete,{modelValue:U.value,"onUpdate:modelValue":Le[5]||(Le[5]=ze=>U.value=ze),class:normalizeClass({"pt-2":unref(_)}),items:unref(N),label:unref(B)("kilimukku.langueCible"),"custom-filter":j,variant:"outlined","hide-details":""},{item:withCtx(({item:ze,props:Je})=>[createVNode(_sfc_main$l,mergeProps(Je,{code:ze.value,selectionnee:!1}),null,16,["code"])]),selection:withCtx(({item:ze})=>[createVNode(_sfc_main$k,{code:ze.value},null,8,["code"])]),append:withCtx(()=>[createVNode(_sfc_main$b,{onClick:Le[4]||(Le[4]=withModifiers(()=>{},["stop"]))},{activator:withCtx(({props:ze})=>[createVNode(VIcon,mergeProps(ze,{icon:"mdi-plus"}),null,16)]),_:1}),createVNode(VDivider)]),_:1},8,["modelValue","class","items","label"])]),_:1},8,["cols"]),createVNode(VCol,{cols:unref(_)?2:12},{default:withCtx(()=>[createVNode(VSelect,{modelValue:fe.value,"onUpdate:modelValue":Le[6]||(Le[6]=ze=>fe.value=ze),class:normalizeClass({"pt-2":unref(_)}),label:unref(B)("kilimukku.montrer"),items:[{title:unref(B)("kilimukku.filtre.toutes"),value:"toutes"},{title:unref(B)("kilimukku.filtre.nonTraduite"),value:"nonTraduites"},{title:unref(B)("kilimukku.filtre.sansSuggestion"),value:"sansSuggestion"}],variant:"outlined"},null,8,["modelValue","class","label","items"])]),_:1},8,["cols"])]),_:1}),createVNode(VProgressLinear,{absolute:!unref(_),class:normalizeClass({"my-3":unref(_)}),color:"primary","model-value":X.value*100,"buffer-value":(X.value+ie.value)*100},null,8,["absolute","class","model-value","buffer-value"]),createVNode(VRow,{class:"fill-height"},{default:withCtx(()=>[createVNode(VCol,{cols:unref(_)?3:12},{default:withCtx(()=>[unref(_)?(openBlock(),createBlock(VList,{key:0},{default:withCtx(()=>[createVNode(VListItem,{class:"px-0"},{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createVNode(VTextField,{modelValue:xe.value,"onUpdate:modelValue":Le[7]||(Le[7]=ze=>xe.value=ze),class:"mt-2",variant:"outlined",label:unref(B)("communs.rechercher"),"hide-details":"",clearable:"","prepend-inner-icon":"mdi-magnify"},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1})):createCommentVNode("",!0),unref(_)&&F.value?(openBlock(),createBlock(VVirtualScroll,{key:1,items:G.value||[],height:"350px"},{default:withCtx(({item:ze})=>[createVNode(_sfc_main$1s,{actif:ze===J.value,clef:ze,"traduction-approuvee":unref(q)[ze]?.[U.value],"traduction-langue-source":unref(q)[ze]?.[F.value],suggestions:unref(ye).filter(Je=>Je.பரிந்துரை.சாபி===ze&&Je.பரிந்துரை.இலக்கு_மொழி===U.value),onClick:Je=>J.value=ze===J.value?void 0:ze},null,8,["actif","clef","traduction-approuvee","traduction-langue-source","suggestions","onClick"])]),_:1},8,["items"])):F.value?(openBlock(),createBlock(VSelect,{key:2,modelValue:J.value,"onUpdate:modelValue":Le[8]||(Le[8]=ze=>J.value=ze),items:G.value,label:unref(B)("kilimukku.message"),variant:"outlined"},{item:withCtx(({item:ze,props:Je})=>[(openBlock(),createBlock(_sfc_main$1s,mergeProps(Je,{key:ze.value,actif:ze.value===J.value,clef:ze.value,"traduction-approuvee":unref(q)[ze.value]?.[U.value],"traduction-langue-source":unref(q)[ze.value]?.[F.value],suggestions:unref(ye).filter(Qe=>Qe.பரிந்துரை.சாபி===ze.value&&Qe.பரிந்துரை.இலக்கு_மொழி===U.value)}),null,16,["actif","clef","traduction-approuvee","traduction-langue-source","suggestions"]))]),selection:withCtx(({item:ze})=>[createTextVNode(toDisplayString(unref(couper)(unref(q)[ze.value][F.value]||ze.value,20,unref(B)("communs.troisPetitsPoints"))),1)]),_:1},8,["modelValue","items","label"])):createCommentVNode("",!0)]),_:1},8,["cols"]),createVNode(VCol,{cols:unref(_)?J.value?5:9:12,class:"pt-6"},{default:withCtx(()=>[J.value?(openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode(VTextarea,{modelValue:ce.value,"onUpdate:modelValue":Le[9]||(Le[9]=ze=>ce.value=ze),label:unref(B)("kilimukku.indiceSuggestion"),"no-resize":"",variant:"outlined",onKeydown:Le[10]||(Le[10]=withKeys(ze=>(ze.metaKey||ze.ctrlKey)&&te(),["enter"]))},null,8,["modelValue","label"]),createBaseVNode("div",_hoisted_2$4,[createVNode(VBtn,{class:"mx-2",color:"primary",variant:"outlined",disabled:!ce.value,loading:se.value,onClick:Le[11]||(Le[11]=()=>te())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(B)("kilimukku.suggérer"))+" ",1),createVNode(VIcon,{end:""},{default:withCtx(()=>Le[17]||(Le[17]=[createTextVNode("mdi-hand-pointing-up")])),_:1})]),_:1},8,["disabled","loading"]),createVNode(VBtn,{class:"ml-2",variant:"outlined",disabled:!ce.value||se.value,onClick:Le[12]||(Le[12]=ze=>ce.value="")},{default:withCtx(()=>[Le[19]||(Le[19]=createTextVNode(" Effacer ")),createVNode(VIcon,{end:""},{default:withCtx(()=>Le[18]||(Le[18]=[createTextVNode("mdi-close")])),_:1})]),_:1},8,["disabled"])]),createVNode(VTextarea,{modelValue:ue.value,"onUpdate:modelValue":Le[13]||(Le[13]=ze=>ue.value=ze),class:"mt-4","append-inner-icon":"mdi-content-copy",label:"Text original",readonly:"","no-resize":"",variant:"outlined","onClick:appendInner":Le[14]||(Le[14]=ze=>ce.value=ue.value)},null,8,["modelValue"])])):(openBlock(),createElementBlock("div",_hoisted_3$3,[createBaseVNode("img",{src:unref(Z),contain:"",width:unref(_)?400:250},null,8,_hoisted_4$2),createBaseVNode("p",_hoisted_5$1,toDisplayString(unref(B)("kilimukku.choisirMessage")),1)]))]),_:1},8,["cols"]),J.value?(openBlock(),createBlock(VCol,{key:0,cols:unref(_)?4:12,class:"pt-6"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_6$1,[createBaseVNode("h2",_hoisted_7$1,toDisplayString(unref(B)("kilimukku.titreSuggestions")),1)]),Y.value?(openBlock(),createElementBlock("div",_hoisted_8$1,[createVNode(VList,{"max-height":unref(_)?"350px":void 0},{default:withCtx(()=>[createVNode(VListGroup,null,{activator:withCtx(({props:ze})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(ze)),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(B)("kilimukku.suggestions.communautaires"))+" ",1),Ie.value.length?(openBlock(),createBlock(VAvatar,{key:0,class:"mx-2",color:"primary",size:"20"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Ae)),1)]),_:1})):createCommentVNode("",!0)]),_:1})]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ie.value,ze=>(openBlock(),createBlock(_sfc_main$m,{key:ze.அடையாளம்,suggestion:ze,class:"ps-10",onUtiliser:Je=>ce.value=ze.பரிந்துரை.மொழிபெயர்ப்பு,onEffacer:Je=>ke(ze.அடையாளம்)},null,8,["suggestion","onUtiliser","onEffacer"]))),128)),Ie.value.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{title:withCtx(()=>[createTextVNode(toDisplayString(unref(B)("kilimukku.suggestions.aucuneTrouvée")),1)]),_:1}))]),_:1}),createVNode(VListGroup,null,{activator:withCtx(({props:ze})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(ze)),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(B)("kilimukku.suggestions.automatiques"))+" ",1),Be.value.length?(openBlock(),createBlock(VAvatar,{key:0,class:"mx-2",color:"primary",size:"20"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($e)),1)]),_:1})):createCommentVNode("",!0)]),_:1})]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Be.value,({clef:ze,texte:Je,traduc:Qe,corresp:rt})=>(openBlock(),createBlock(_sfc_main$1q,{key:ze,clef:ze,texte:Je,traduc:Qe,corresp:rt,onUtiliser:wt=>ce.value=Qe},null,8,["clef","texte","traduc","corresp","onUtiliser"]))),128)),Be.value.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{title:withCtx(()=>[createTextVNode(toDisplayString(unref(B)("kilimukku.suggestions.aucuneTrouvée")),1)]),_:1}))]),_:1}),createVNode(VListGroup,null,{activator:withCtx(({props:ze})=>[createVNode(VListItem,normalizeProps(guardReactiveProps(ze)),{default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(B)("kilimukku.suggestions.autresLangues"))+" ",1),Oe.value?(openBlock(),createBlock(VAvatar,{key:0,class:"mx-2",color:"primary",size:"20"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(Ke)),1)]),_:1})):createCommentVNode("",!0)]),_:1})]),_:2},1040)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(_e.value,({lng:ze,traduc:Je})=>(openBlock(),createBlock(_sfc_main$1p,{key:ze,lng:ze,traduc:Je,onSuggerer:Qe=>ce.value=Je},null,8,["lng","traduc","onSuggerer"]))),128)),_e.value.length?createCommentVNode("",!0):(openBlock(),createBlock(VListItem,{key:0},{title:withCtx(()=>[createTextVNode(toDisplayString(unref(B)("kilimukku.suggestions.aucuneTrouvée")),1)]),_:1}))]),_:1})]),_:1},8,["max-height"])])):J.value?(openBlock(),createElementBlock("div",_hoisted_9$1,[createBaseVNode("img",{src:unref(be),contain:"",width:unref(_)?300:200,class:"my-4"},null,8,_hoisted_10$1),createBaseVNode("p",_hoisted_11$1,toDisplayString(unref(B)("kilimukku.aucuneSuggestion")),1)])):createCommentVNode("",!0)]),_:1},8,["cols"])):createCommentVNode("",!0)]),_:1})]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VSpacer),createVNode(VBtn,{text:unref(B)("communs.fermer"),"append-icon":"mdi-close",onClick:Le[15]||(Le[15]=ze=>O.value=!1)},null,8,["text"])]),_:1})]),_:1},8,["width"])]),_:3},8,["modelValue"]))}}),_sfc_main$9=defineComponent$1({__name:"MenuLangues",setup(n){const r=utiliserConstellation(),g=ref$2(!1);r.obtIdCompte().then(()=>g.value=!0);const{கிடைக்கும்_மொழிகளை_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{மொழிகளும்_குறியீடுகளும்:x}=_(),{மொழியாக்கம்_பயன்படுத்து:S}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:E}=S(),{isRtl:C}=useRtl(),{மொழி:T,மொழிகளை_தேர்ந்தெடுக்கொள்ளு:R}=மொழிகளைப்_பயன்படுத்து(),A=ref$2(),I=computed(()=>x.value.filter(B=>!A.value||B.குறியீடு.includes(A.value)||B.மொழி.includes(A.value)).map(B=>B.குறியீடு));return(B,D)=>(openBlock(),createBlock(VBtn,{style:normalizeStyle("position: absolute;"+(unref(C)?"left:":"right:")+"20px; top: 20px; z-index:100"),icon:"mdi-earth",size:"small"},{default:withCtx(()=>[createVNode(VIcon,{size:"large"}),createVNode(VMenu,{activator:"parent",offset:"10px","min-width":"225",location:unref(C)?"bottom right":"bottom left"},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(_sfc_main$a,null,{activator:withCtx(({props:N})=>[createVNode(VListItem,mergeProps(N,{disabled:!g.value}),{prepend:withCtx(()=>[createVNode(VIcon,null,{default:withCtx(()=>D[2]||(D[2]=[createTextVNode(" mdi-plus ")])),_:1})]),default:withCtx(()=>[createVNode(VListItemTitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(E)("kilimukku.contribuer")),1)]),_:1})]),_:2},1040,["disabled"])]),_:1}),g.value?(openBlock(),createBlock(VDivider,{key:1})):(openBlock(),createBlock(VProgressLinear,{key:0,height:"1",color:"primary",indeterminate:""})),createVNode(VTextField,{modelValue:A.value,"onUpdate:modelValue":D[0]||(D[0]=N=>A.value=N),density:"compact","prepend-inner-icon":"mdi-magnify",autofocus:"","hide-details":"",onClick:D[1]||(D[1]=withModifiers(()=>{},["stop"]))},null,8,["modelValue"]),createVNode(VList,{class:"overflow-y-auto","max-height":"400px","min-width":"200px"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(I.value,N=>(openBlock(),createBlock(_sfc_main$l,{key:N,code:N,selectionnee:N===unref(T),onClick:()=>unref(R)(N)},null,8,["code","selectionnee","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["location"])]),_:1},8,["style"]))}});var utils={};const Aacute="Á",aacute="á",Abreve="Ă",abreve="ă",ac="∾",acd="∿",acE="∾̳",Acirc="Â",acirc="â",acute="´",Acy="А",acy="а",AElig="Æ",aelig="æ",af="⁡",Afr="𝔄",afr="𝔞",Agrave="À",agrave="à",alefsym="ℵ",aleph="ℵ",Alpha="Α",alpha="α",Amacr="Ā",amacr="ā",amalg="⨿",amp="&",AMP="&",andand="⩕",And="⩓",and="∧",andd="⩜",andslope="⩘",andv="⩚",ang="∠",ange="⦤",angle="∠",angmsdaa="⦨",angmsdab="⦩",angmsdac="⦪",angmsdad="⦫",angmsdae="⦬",angmsdaf="⦭",angmsdag="⦮",angmsdah="⦯",angmsd="∡",angrt="∟",angrtvb="⊾",angrtvbd="⦝",angsph="∢",angst="Å",angzarr="⍼",Aogon="Ą",aogon="ą",Aopf="𝔸",aopf="𝕒",apacir="⩯",ap="≈",apE="⩰",ape="≊",apid="≋",apos="'",ApplyFunction="⁡",approx="≈",approxeq="≊",Aring="Å",aring="å",Ascr="𝒜",ascr="𝒶",Assign="≔",ast="*",asymp="≈",asympeq="≍",Atilde="Ã",atilde="ã",Auml="Ä",auml="ä",awconint="∳",awint="⨑",backcong="≌",backepsilon="϶",backprime="‵",backsim="∽",backsimeq="⋍",Backslash="∖",Barv="⫧",barvee="⊽",barwed="⌅",Barwed="⌆",barwedge="⌅",bbrk="⎵",bbrktbrk="⎶",bcong="≌",Bcy="Б",bcy="б",bdquo="„",becaus="∵",because="∵",Because="∵",bemptyv="⦰",bepsi="϶",bernou="ℬ",Bernoullis="ℬ",Beta="Β",beta="β",beth="ℶ",between="≬",Bfr="𝔅",bfr="𝔟",bigcap="⋂",bigcirc="◯",bigcup="⋃",bigodot="⨀",bigoplus="⨁",bigotimes="⨂",bigsqcup="⨆",bigstar="★",bigtriangledown="▽",bigtriangleup="△",biguplus="⨄",bigvee="⋁",bigwedge="⋀",bkarow="⤍",blacklozenge="⧫",blacksquare="▪",blacktriangle="▴",blacktriangledown="▾",blacktriangleleft="◂",blacktriangleright="▸",blank="␣",blk12="▒",blk14="░",blk34="▓",block$1="█",bne="=⃥",bnequiv="≡⃥",bNot="⫭",bnot="⌐",Bopf="𝔹",bopf="𝕓",bot="⊥",bottom="⊥",bowtie="⋈",boxbox="⧉",boxdl="┐",boxdL="╕",boxDl="╖",boxDL="╗",boxdr="┌",boxdR="╒",boxDr="╓",boxDR="╔",boxh="─",boxH="═",boxhd="┬",boxHd="╤",boxhD="╥",boxHD="╦",boxhu="┴",boxHu="╧",boxhU="╨",boxHU="╩",boxminus="⊟",boxplus="⊞",boxtimes="⊠",boxul="┘",boxuL="╛",boxUl="╜",boxUL="╝",boxur="└",boxuR="╘",boxUr="╙",boxUR="╚",boxv="│",boxV="║",boxvh="┼",boxvH="╪",boxVh="╫",boxVH="╬",boxvl="┤",boxvL="╡",boxVl="╢",boxVL="╣",boxvr="├",boxvR="╞",boxVr="╟",boxVR="╠",bprime="‵",breve="˘",Breve="˘",brvbar="¦",bscr="𝒷",Bscr="ℬ",bsemi="⁏",bsim="∽",bsime="⋍",bsolb="⧅",bsol="\\",bsolhsub="⟈",bull="•",bullet="•",bump="≎",bumpE="⪮",bumpe="≏",Bumpeq="≎",bumpeq="≏",Cacute="Ć",cacute="ć",capand="⩄",capbrcup="⩉",capcap="⩋",cap="∩",Cap="⋒",capcup="⩇",capdot="⩀",CapitalDifferentialD="ⅅ",caps="∩︀",caret="⁁",caron="ˇ",Cayleys="ℭ",ccaps="⩍",Ccaron="Č",ccaron="č",Ccedil="Ç",ccedil="ç",Ccirc="Ĉ",ccirc="ĉ",Cconint="∰",ccups="⩌",ccupssm="⩐",Cdot="Ċ",cdot="ċ",cedil="¸",Cedilla="¸",cemptyv="⦲",cent="¢",centerdot="·",CenterDot="·",cfr="𝔠",Cfr="ℭ",CHcy="Ч",chcy="ч",check="✓",checkmark="✓",Chi="Χ",chi="χ",circ="ˆ",circeq="≗",circlearrowleft="↺",circlearrowright="↻",circledast="⊛",circledcirc="⊚",circleddash="⊝",CircleDot="⊙",circledR="®",circledS="Ⓢ",CircleMinus="⊖",CirclePlus="⊕",CircleTimes="⊗",cir="○",cirE="⧃",cire="≗",cirfnint="⨐",cirmid="⫯",cirscir="⧂",ClockwiseContourIntegral="∲",CloseCurlyDoubleQuote="”",CloseCurlyQuote="’",clubs="♣",clubsuit="♣",colon=":",Colon="∷",Colone="⩴",colone="≔",coloneq="≔",comma=",",commat="@",comp="∁",compfn="∘",complement="∁",complexes="ℂ",cong="≅",congdot="⩭",Congruent="≡",conint="∮",Conint="∯",ContourIntegral="∮",copf="𝕔",Copf="ℂ",coprod="∐",Coproduct="∐",copy="©",COPY="©",copysr="℗",CounterClockwiseContourIntegral="∳",crarr="↵",cross="✗",Cross="⨯",Cscr="𝒞",cscr="𝒸",csub="⫏",csube="⫑",csup="⫐",csupe="⫒",ctdot="⋯",cudarrl="⤸",cudarrr="⤵",cuepr="⋞",cuesc="⋟",cularr="↶",cularrp="⤽",cupbrcap="⩈",cupcap="⩆",CupCap="≍",cup="∪",Cup="⋓",cupcup="⩊",cupdot="⊍",cupor="⩅",cups="∪︀",curarr="↷",curarrm="⤼",curlyeqprec="⋞",curlyeqsucc="⋟",curlyvee="⋎",curlywedge="⋏",curren="¤",curvearrowleft="↶",curvearrowright="↷",cuvee="⋎",cuwed="⋏",cwconint="∲",cwint="∱",cylcty="⌭",dagger="†",Dagger="‡",daleth="ℸ",darr="↓",Darr="↡",dArr="⇓",dash="‐",Dashv="⫤",dashv="⊣",dbkarow="⤏",dblac="˝",Dcaron="Ď",dcaron="ď",Dcy="Д",dcy="д",ddagger="‡",ddarr="⇊",DD="ⅅ",dd="ⅆ",DDotrahd="⤑",ddotseq="⩷",deg="°",Del="∇",Delta="Δ",delta="δ",demptyv="⦱",dfisht="⥿",Dfr="𝔇",dfr="𝔡",dHar="⥥",dharl="⇃",dharr="⇂",DiacriticalAcute="´",DiacriticalDot="˙",DiacriticalDoubleAcute="˝",DiacriticalGrave="`",DiacriticalTilde="˜",diam="⋄",diamond="⋄",Diamond="⋄",diamondsuit="♦",diams="♦",die="¨",DifferentialD="ⅆ",digamma="ϝ",disin="⋲",div="÷",divide="÷",divideontimes="⋇",divonx="⋇",DJcy="Ђ",djcy="ђ",dlcorn="⌞",dlcrop="⌍",dollar="$",Dopf="𝔻",dopf="𝕕",Dot="¨",dot="˙",DotDot="⃜",doteq="≐",doteqdot="≑",DotEqual="≐",dotminus="∸",dotplus="∔",dotsquare="⊡",doublebarwedge="⌆",DoubleContourIntegral="∯",DoubleDot="¨",DoubleDownArrow="⇓",DoubleLeftArrow="⇐",DoubleLeftRightArrow="⇔",DoubleLeftTee="⫤",DoubleLongLeftArrow="⟸",DoubleLongLeftRightArrow="⟺",DoubleLongRightArrow="⟹",DoubleRightArrow="⇒",DoubleRightTee="⊨",DoubleUpArrow="⇑",DoubleUpDownArrow="⇕",DoubleVerticalBar="∥",DownArrowBar="⤓",downarrow="↓",DownArrow="↓",Downarrow="⇓",DownArrowUpArrow="⇵",DownBreve="̑",downdownarrows="⇊",downharpoonleft="⇃",downharpoonright="⇂",DownLeftRightVector="⥐",DownLeftTeeVector="⥞",DownLeftVectorBar="⥖",DownLeftVector="↽",DownRightTeeVector="⥟",DownRightVectorBar="⥗",DownRightVector="⇁",DownTeeArrow="↧",DownTee="⊤",drbkarow="⤐",drcorn="⌟",drcrop="⌌",Dscr="𝒟",dscr="𝒹",DScy="Ѕ",dscy="ѕ",dsol="⧶",Dstrok="Đ",dstrok="đ",dtdot="⋱",dtri="▿",dtrif="▾",duarr="⇵",duhar="⥯",dwangle="⦦",DZcy="Џ",dzcy="џ",dzigrarr="⟿",Eacute="É",eacute="é",easter="⩮",Ecaron="Ě",ecaron="ě",Ecirc="Ê",ecirc="ê",ecir="≖",ecolon="≕",Ecy="Э",ecy="э",eDDot="⩷",Edot="Ė",edot="ė",eDot="≑",ee="ⅇ",efDot="≒",Efr="𝔈",efr="𝔢",eg="⪚",Egrave="È",egrave="è",egs="⪖",egsdot="⪘",el="⪙",Element$1="∈",elinters="⏧",ell="ℓ",els="⪕",elsdot="⪗",Emacr="Ē",emacr="ē",empty="∅",emptyset="∅",EmptySmallSquare="◻",emptyv="∅",EmptyVerySmallSquare="▫",emsp13=" ",emsp14=" ",emsp=" ",ENG="Ŋ",eng="ŋ",ensp=" ",Eogon="Ę",eogon="ę",Eopf="𝔼",eopf="𝕖",epar="⋕",eparsl="⧣",eplus="⩱",epsi="ε",Epsilon="Ε",epsilon="ε",epsiv="ϵ",eqcirc="≖",eqcolon="≕",eqsim="≂",eqslantgtr="⪖",eqslantless="⪕",Equal="⩵",equals="=",EqualTilde="≂",equest="≟",Equilibrium="⇌",equiv="≡",equivDD="⩸",eqvparsl="⧥",erarr="⥱",erDot="≓",escr="ℯ",Escr="ℰ",esdot="≐",Esim="⩳",esim="≂",Eta="Η",eta="η",ETH="Ð",eth="ð",Euml="Ë",euml="ë",euro="€",excl="!",exist="∃",Exists="∃",expectation="ℰ",exponentiale="ⅇ",ExponentialE="ⅇ",fallingdotseq="≒",Fcy="Ф",fcy="ф",female="♀",ffilig="ﬃ",fflig="ﬀ",ffllig="ﬄ",Ffr="𝔉",ffr="𝔣",filig="ﬁ",FilledSmallSquare="◼",FilledVerySmallSquare="▪",fjlig="fj",flat="♭",fllig="ﬂ",fltns="▱",fnof="ƒ",Fopf="𝔽",fopf="𝕗",forall="∀",ForAll="∀",fork="⋔",forkv="⫙",Fouriertrf="ℱ",fpartint="⨍",frac12="½",frac13="⅓",frac14="¼",frac15="⅕",frac16="⅙",frac18="⅛",frac23="⅔",frac25="⅖",frac34="¾",frac35="⅗",frac38="⅜",frac45="⅘",frac56="⅚",frac58="⅝",frac78="⅞",frasl="⁄",frown="⌢",fscr="𝒻",Fscr="ℱ",gacute="ǵ",Gamma="Γ",gamma="γ",Gammad="Ϝ",gammad="ϝ",gap="⪆",Gbreve="Ğ",gbreve="ğ",Gcedil="Ģ",Gcirc="Ĝ",gcirc="ĝ",Gcy="Г",gcy="г",Gdot="Ġ",gdot="ġ",ge="≥",gE="≧",gEl="⪌",gel="⋛",geq="≥",geqq="≧",geqslant="⩾",gescc="⪩",ges="⩾",gesdot="⪀",gesdoto="⪂",gesdotol="⪄",gesl="⋛︀",gesles="⪔",Gfr="𝔊",gfr="𝔤",gg="≫",Gg="⋙",ggg="⋙",gimel="ℷ",GJcy="Ѓ",gjcy="ѓ",gla="⪥",gl="≷",glE="⪒",glj="⪤",gnap="⪊",gnapprox="⪊",gne="⪈",gnE="≩",gneq="⪈",gneqq="≩",gnsim="⋧",Gopf="𝔾",gopf="𝕘",grave="`",GreaterEqual="≥",GreaterEqualLess="⋛",GreaterFullEqual="≧",GreaterGreater="⪢",GreaterLess="≷",GreaterSlantEqual="⩾",GreaterTilde="≳",Gscr="𝒢",gscr="ℊ",gsim="≳",gsime="⪎",gsiml="⪐",gtcc="⪧",gtcir="⩺",gt=">",GT=">",Gt="≫",gtdot="⋗",gtlPar="⦕",gtquest="⩼",gtrapprox="⪆",gtrarr="⥸",gtrdot="⋗",gtreqless="⋛",gtreqqless="⪌",gtrless="≷",gtrsim="≳",gvertneqq="≩︀",gvnE="≩︀",Hacek="ˇ",hairsp=" ",half="½",hamilt="ℋ",HARDcy="Ъ",hardcy="ъ",harrcir="⥈",harr="↔",hArr="⇔",harrw="↭",Hat="^",hbar="ℏ",Hcirc="Ĥ",hcirc="ĥ",hearts="♥",heartsuit="♥",hellip="…",hercon="⊹",hfr="𝔥",Hfr="ℌ",HilbertSpace="ℋ",hksearow="⤥",hkswarow="⤦",hoarr="⇿",homtht="∻",hookleftarrow="↩",hookrightarrow="↪",hopf="𝕙",Hopf="ℍ",horbar="―",HorizontalLine="─",hscr="𝒽",Hscr="ℋ",hslash="ℏ",Hstrok="Ħ",hstrok="ħ",HumpDownHump="≎",HumpEqual="≏",hybull="⁃",hyphen="‐",Iacute="Í",iacute="í",ic="⁣",Icirc="Î",icirc="î",Icy="И",icy="и",Idot="İ",IEcy="Е",iecy="е",iexcl="¡",iff="⇔",ifr="𝔦",Ifr="ℑ",Igrave="Ì",igrave="ì",ii$1="ⅈ",iiiint="⨌",iiint="∭",iinfin="⧜",iiota="℩",IJlig="Ĳ",ijlig="ĳ",Imacr="Ī",imacr="ī",image$1="ℑ",ImaginaryI="ⅈ",imagline="ℐ",imagpart="ℑ",imath="ı",Im="ℑ",imof="⊷",imped="Ƶ",Implies="⇒",incare="℅",infin="∞",infintie="⧝",inodot="ı",intcal="⊺",int="∫",Int="∬",integers="ℤ",Integral="∫",intercal="⊺",Intersection="⋂",intlarhk="⨗",intprod="⨼",InvisibleComma="⁣",InvisibleTimes="⁢",IOcy="Ё",iocy="ё",Iogon="Į",iogon="į",Iopf="𝕀",iopf="𝕚",Iota="Ι",iota="ι",iprod="⨼",iquest="¿",iscr="𝒾",Iscr="ℐ",isin="∈",isindot="⋵",isinE="⋹",isins="⋴",isinsv="⋳",isinv="∈",it$1="⁢",Itilde="Ĩ",itilde="ĩ",Iukcy="І",iukcy="і",Iuml="Ï",iuml="ï",Jcirc="Ĵ",jcirc="ĵ",Jcy="Й",jcy="й",Jfr="𝔍",jfr="𝔧",jmath="ȷ",Jopf="𝕁",jopf="𝕛",Jscr="𝒥",jscr="𝒿",Jsercy="Ј",jsercy="ј",Jukcy="Є",jukcy="є",Kappa="Κ",kappa="κ",kappav="ϰ",Kcedil="Ķ",kcedil="ķ",Kcy="К",kcy="к",Kfr="𝔎",kfr="𝔨",kgreen="ĸ",KHcy="Х",khcy="х",KJcy="Ќ",kjcy="ќ",Kopf="𝕂",kopf="𝕜",Kscr="𝒦",kscr="𝓀",lAarr="⇚",Lacute="Ĺ",lacute="ĺ",laemptyv="⦴",lagran="ℒ",Lambda="Λ",lambda="λ",lang="⟨",Lang="⟪",langd="⦑",langle="⟨",lap="⪅",Laplacetrf="ℒ",laquo="«",larrb="⇤",larrbfs="⤟",larr="←",Larr="↞",lArr="⇐",larrfs="⤝",larrhk="↩",larrlp="↫",larrpl="⤹",larrsim="⥳",larrtl="↢",latail="⤙",lAtail="⤛",lat="⪫",late="⪭",lates="⪭︀",lbarr="⤌",lBarr="⤎",lbbrk="❲",lbrace="{",lbrack="[",lbrke="⦋",lbrksld="⦏",lbrkslu="⦍",Lcaron="Ľ",lcaron="ľ",Lcedil="Ļ",lcedil="ļ",lceil="⌈",lcub="{",Lcy="Л",lcy="л",ldca="⤶",ldquo="“",ldquor="„",ldrdhar="⥧",ldrushar="⥋",ldsh="↲",le="≤",lE="≦",LeftAngleBracket="⟨",LeftArrowBar="⇤",leftarrow="←",LeftArrow="←",Leftarrow="⇐",LeftArrowRightArrow="⇆",leftarrowtail="↢",LeftCeiling="⌈",LeftDoubleBracket="⟦",LeftDownTeeVector="⥡",LeftDownVectorBar="⥙",LeftDownVector="⇃",LeftFloor="⌊",leftharpoondown="↽",leftharpoonup="↼",leftleftarrows="⇇",leftrightarrow="↔",LeftRightArrow="↔",Leftrightarrow="⇔",leftrightarrows="⇆",leftrightharpoons="⇋",leftrightsquigarrow="↭",LeftRightVector="⥎",LeftTeeArrow="↤",LeftTee="⊣",LeftTeeVector="⥚",leftthreetimes="⋋",LeftTriangleBar="⧏",LeftTriangle="⊲",LeftTriangleEqual="⊴",LeftUpDownVector="⥑",LeftUpTeeVector="⥠",LeftUpVectorBar="⥘",LeftUpVector="↿",LeftVectorBar="⥒",LeftVector="↼",lEg="⪋",leg="⋚",leq="≤",leqq="≦",leqslant="⩽",lescc="⪨",les="⩽",lesdot="⩿",lesdoto="⪁",lesdotor="⪃",lesg="⋚︀",lesges="⪓",lessapprox="⪅",lessdot="⋖",lesseqgtr="⋚",lesseqqgtr="⪋",LessEqualGreater="⋚",LessFullEqual="≦",LessGreater="≶",lessgtr="≶",LessLess="⪡",lesssim="≲",LessSlantEqual="⩽",LessTilde="≲",lfisht="⥼",lfloor="⌊",Lfr="𝔏",lfr="𝔩",lg="≶",lgE="⪑",lHar="⥢",lhard="↽",lharu="↼",lharul="⥪",lhblk="▄",LJcy="Љ",ljcy="љ",llarr="⇇",ll="≪",Ll="⋘",llcorner="⌞",Lleftarrow="⇚",llhard="⥫",lltri="◺",Lmidot="Ŀ",lmidot="ŀ",lmoustache="⎰",lmoust="⎰",lnap="⪉",lnapprox="⪉",lne="⪇",lnE="≨",lneq="⪇",lneqq="≨",lnsim="⋦",loang="⟬",loarr="⇽",lobrk="⟦",longleftarrow="⟵",LongLeftArrow="⟵",Longleftarrow="⟸",longleftrightarrow="⟷",LongLeftRightArrow="⟷",Longleftrightarrow="⟺",longmapsto="⟼",longrightarrow="⟶",LongRightArrow="⟶",Longrightarrow="⟹",looparrowleft="↫",looparrowright="↬",lopar="⦅",Lopf="𝕃",lopf="𝕝",loplus="⨭",lotimes="⨴",lowast="∗",lowbar="_",LowerLeftArrow="↙",LowerRightArrow="↘",loz="◊",lozenge="◊",lozf="⧫",lpar="(",lparlt="⦓",lrarr="⇆",lrcorner="⌟",lrhar="⇋",lrhard="⥭",lrm="‎",lrtri="⊿",lsaquo="‹",lscr="𝓁",Lscr="ℒ",lsh="↰",Lsh="↰",lsim="≲",lsime="⪍",lsimg="⪏",lsqb="[",lsquo="‘",lsquor="‚",Lstrok="Ł",lstrok="ł",ltcc="⪦",ltcir="⩹",lt$1="<",LT="<",Lt="≪",ltdot="⋖",lthree="⋋",ltimes="⋉",ltlarr="⥶",ltquest="⩻",ltri="◃",ltrie="⊴",ltrif="◂",ltrPar="⦖",lurdshar="⥊",luruhar="⥦",lvertneqq="≨︀",lvnE="≨︀",macr="¯",male="♂",malt="✠",maltese="✠",map="↦",mapsto="↦",mapstodown="↧",mapstoleft="↤",mapstoup="↥",marker="▮",mcomma="⨩",Mcy="М",mcy="м",mdash="—",mDDot="∺",measuredangle="∡",MediumSpace=" ",Mellintrf="ℳ",Mfr="𝔐",mfr="𝔪",mho="℧",micro="µ",midast="*",midcir="⫰",mid="∣",middot="·",minusb="⊟",minus="−",minusd="∸",minusdu="⨪",MinusPlus="∓",mlcp="⫛",mldr="…",mnplus="∓",models="⊧",Mopf="𝕄",mopf="𝕞",mp="∓",mscr="𝓂",Mscr="ℳ",mstpos="∾",Mu="Μ",mu="μ",multimap="⊸",mumap="⊸",nabla="∇",Nacute="Ń",nacute="ń",nang="∠⃒",nap="≉",napE="⩰̸",napid="≋̸",napos="ŉ",napprox="≉",natural="♮",naturals="ℕ",natur="♮",nbsp=" ",nbump="≎̸",nbumpe="≏̸",ncap="⩃",Ncaron="Ň",ncaron="ň",Ncedil="Ņ",ncedil="ņ",ncong="≇",ncongdot="⩭̸",ncup="⩂",Ncy="Н",ncy="н",ndash="–",nearhk="⤤",nearr="↗",neArr="⇗",nearrow="↗",ne="≠",nedot="≐̸",NegativeMediumSpace="​",NegativeThickSpace="​",NegativeThinSpace="​",NegativeVeryThinSpace="​",nequiv="≢",nesear="⤨",nesim="≂̸",NestedGreaterGreater="≫",NestedLessLess="≪",NewLine=`
`,nexist="∄",nexists="∄",Nfr="𝔑",nfr="𝔫",ngE="≧̸",nge="≱",ngeq="≱",ngeqq="≧̸",ngeqslant="⩾̸",nges="⩾̸",nGg="⋙̸",ngsim="≵",nGt="≫⃒",ngt="≯",ngtr="≯",nGtv="≫̸",nharr="↮",nhArr="⇎",nhpar="⫲",ni="∋",nis="⋼",nisd="⋺",niv="∋",NJcy="Њ",njcy="њ",nlarr="↚",nlArr="⇍",nldr="‥",nlE="≦̸",nle="≰",nleftarrow="↚",nLeftarrow="⇍",nleftrightarrow="↮",nLeftrightarrow="⇎",nleq="≰",nleqq="≦̸",nleqslant="⩽̸",nles="⩽̸",nless="≮",nLl="⋘̸",nlsim="≴",nLt="≪⃒",nlt="≮",nltri="⋪",nltrie="⋬",nLtv="≪̸",nmid="∤",NoBreak="⁠",NonBreakingSpace=" ",nopf="𝕟",Nopf="ℕ",Not="⫬",not="¬",NotCongruent="≢",NotCupCap="≭",NotDoubleVerticalBar="∦",NotElement="∉",NotEqual="≠",NotEqualTilde="≂̸",NotExists="∄",NotGreater="≯",NotGreaterEqual="≱",NotGreaterFullEqual="≧̸",NotGreaterGreater="≫̸",NotGreaterLess="≹",NotGreaterSlantEqual="⩾̸",NotGreaterTilde="≵",NotHumpDownHump="≎̸",NotHumpEqual="≏̸",notin="∉",notindot="⋵̸",notinE="⋹̸",notinva="∉",notinvb="⋷",notinvc="⋶",NotLeftTriangleBar="⧏̸",NotLeftTriangle="⋪",NotLeftTriangleEqual="⋬",NotLess="≮",NotLessEqual="≰",NotLessGreater="≸",NotLessLess="≪̸",NotLessSlantEqual="⩽̸",NotLessTilde="≴",NotNestedGreaterGreater="⪢̸",NotNestedLessLess="⪡̸",notni="∌",notniva="∌",notnivb="⋾",notnivc="⋽",NotPrecedes="⊀",NotPrecedesEqual="⪯̸",NotPrecedesSlantEqual="⋠",NotReverseElement="∌",NotRightTriangleBar="⧐̸",NotRightTriangle="⋫",NotRightTriangleEqual="⋭",NotSquareSubset="⊏̸",NotSquareSubsetEqual="⋢",NotSquareSuperset="⊐̸",NotSquareSupersetEqual="⋣",NotSubset="⊂⃒",NotSubsetEqual="⊈",NotSucceeds="⊁",NotSucceedsEqual="⪰̸",NotSucceedsSlantEqual="⋡",NotSucceedsTilde="≿̸",NotSuperset="⊃⃒",NotSupersetEqual="⊉",NotTilde="≁",NotTildeEqual="≄",NotTildeFullEqual="≇",NotTildeTilde="≉",NotVerticalBar="∤",nparallel="∦",npar="∦",nparsl="⫽⃥",npart="∂̸",npolint="⨔",npr="⊀",nprcue="⋠",nprec="⊀",npreceq="⪯̸",npre="⪯̸",nrarrc="⤳̸",nrarr="↛",nrArr="⇏",nrarrw="↝̸",nrightarrow="↛",nRightarrow="⇏",nrtri="⋫",nrtrie="⋭",nsc="⊁",nsccue="⋡",nsce="⪰̸",Nscr="𝒩",nscr="𝓃",nshortmid="∤",nshortparallel="∦",nsim="≁",nsime="≄",nsimeq="≄",nsmid="∤",nspar="∦",nsqsube="⋢",nsqsupe="⋣",nsub="⊄",nsubE="⫅̸",nsube="⊈",nsubset="⊂⃒",nsubseteq="⊈",nsubseteqq="⫅̸",nsucc="⊁",nsucceq="⪰̸",nsup="⊅",nsupE="⫆̸",nsupe="⊉",nsupset="⊃⃒",nsupseteq="⊉",nsupseteqq="⫆̸",ntgl="≹",Ntilde="Ñ",ntilde="ñ",ntlg="≸",ntriangleleft="⋪",ntrianglelefteq="⋬",ntriangleright="⋫",ntrianglerighteq="⋭",Nu="Ν",nu="ν",num="#",numero="№",numsp=" ",nvap="≍⃒",nvdash="⊬",nvDash="⊭",nVdash="⊮",nVDash="⊯",nvge="≥⃒",nvgt=">⃒",nvHarr="⤄",nvinfin="⧞",nvlArr="⤂",nvle="≤⃒",nvlt="<⃒",nvltrie="⊴⃒",nvrArr="⤃",nvrtrie="⊵⃒",nvsim="∼⃒",nwarhk="⤣",nwarr="↖",nwArr="⇖",nwarrow="↖",nwnear="⤧",Oacute="Ó",oacute="ó",oast="⊛",Ocirc="Ô",ocirc="ô",ocir="⊚",Ocy="О",ocy="о",odash="⊝",Odblac="Ő",odblac="ő",odiv="⨸",odot="⊙",odsold="⦼",OElig="Œ",oelig="œ",ofcir="⦿",Ofr="𝔒",ofr="𝔬",ogon="˛",Ograve="Ò",ograve="ò",ogt="⧁",ohbar="⦵",ohm="Ω",oint="∮",olarr="↺",olcir="⦾",olcross="⦻",oline="‾",olt="⧀",Omacr="Ō",omacr="ō",Omega="Ω",omega="ω",Omicron="Ο",omicron="ο",omid="⦶",ominus="⊖",Oopf="𝕆",oopf="𝕠",opar="⦷",OpenCurlyDoubleQuote="“",OpenCurlyQuote="‘",operp="⦹",oplus="⊕",orarr="↻",Or$1="⩔",or="∨",ord="⩝",order="ℴ",orderof="ℴ",ordf="ª",ordm="º",origof="⊶",oror="⩖",orslope="⩗",orv="⩛",oS="Ⓢ",Oscr="𝒪",oscr="ℴ",Oslash="Ø",oslash="ø",osol="⊘",Otilde="Õ",otilde="õ",otimesas="⨶",Otimes="⨷",otimes="⊗",Ouml="Ö",ouml="ö",ovbar="⌽",OverBar="‾",OverBrace="⏞",OverBracket="⎴",OverParenthesis="⏜",para="¶",parallel="∥",par="∥",parsim="⫳",parsl="⫽",part="∂",PartialD="∂",Pcy="П",pcy="п",percnt="%",period=".",permil="‰",perp="⊥",pertenk="‱",Pfr="𝔓",pfr="𝔭",Phi="Φ",phi="φ",phiv="ϕ",phmmat="ℳ",phone="☎",Pi$1="Π",pi$1="π",pitchfork="⋔",piv="ϖ",planck="ℏ",planckh="ℎ",plankv="ℏ",plusacir="⨣",plusb="⊞",pluscir="⨢",plus="+",plusdo="∔",plusdu="⨥",pluse="⩲",PlusMinus="±",plusmn="±",plussim="⨦",plustwo="⨧",pm="±",Poincareplane="ℌ",pointint="⨕",popf="𝕡",Popf="ℙ",pound="£",prap="⪷",Pr$1="⪻",pr="≺",prcue="≼",precapprox="⪷",prec="≺",preccurlyeq="≼",Precedes="≺",PrecedesEqual="⪯",PrecedesSlantEqual="≼",PrecedesTilde="≾",preceq="⪯",precnapprox="⪹",precneqq="⪵",precnsim="⋨",pre="⪯",prE="⪳",precsim="≾",prime="′",Prime="″",primes="ℙ",prnap="⪹",prnE="⪵",prnsim="⋨",prod="∏",Product="∏",profalar="⌮",profline="⌒",profsurf="⌓",prop="∝",Proportional="∝",Proportion="∷",propto="∝",prsim="≾",prurel="⊰",Pscr="𝒫",pscr="𝓅",Psi="Ψ",psi="ψ",puncsp=" ",Qfr="𝔔",qfr="𝔮",qint="⨌",qopf="𝕢",Qopf="ℚ",qprime="⁗",Qscr="𝒬",qscr="𝓆",quaternions="ℍ",quatint="⨖",quest="?",questeq="≟",quot='"',QUOT='"',rAarr="⇛",race="∽̱",Racute="Ŕ",racute="ŕ",radic="√",raemptyv="⦳",rang="⟩",Rang="⟫",rangd="⦒",range="⦥",rangle="⟩",raquo="»",rarrap="⥵",rarrb="⇥",rarrbfs="⤠",rarrc="⤳",rarr="→",Rarr="↠",rArr="⇒",rarrfs="⤞",rarrhk="↪",rarrlp="↬",rarrpl="⥅",rarrsim="⥴",Rarrtl="⤖",rarrtl="↣",rarrw="↝",ratail="⤚",rAtail="⤜",ratio="∶",rationals="ℚ",rbarr="⤍",rBarr="⤏",RBarr="⤐",rbbrk="❳",rbrace="}",rbrack="]",rbrke="⦌",rbrksld="⦎",rbrkslu="⦐",Rcaron="Ř",rcaron="ř",Rcedil="Ŗ",rcedil="ŗ",rceil="⌉",rcub="}",Rcy="Р",rcy="р",rdca="⤷",rdldhar="⥩",rdquo="”",rdquor="”",rdsh="↳",real="ℜ",realine="ℛ",realpart="ℜ",reals="ℝ",Re="ℜ",rect="▭",reg="®",REG="®",ReverseElement="∋",ReverseEquilibrium="⇋",ReverseUpEquilibrium="⥯",rfisht="⥽",rfloor="⌋",rfr="𝔯",Rfr="ℜ",rHar="⥤",rhard="⇁",rharu="⇀",rharul="⥬",Rho="Ρ",rho="ρ",rhov="ϱ",RightAngleBracket="⟩",RightArrowBar="⇥",rightarrow="→",RightArrow="→",Rightarrow="⇒",RightArrowLeftArrow="⇄",rightarrowtail="↣",RightCeiling="⌉",RightDoubleBracket="⟧",RightDownTeeVector="⥝",RightDownVectorBar="⥕",RightDownVector="⇂",RightFloor="⌋",rightharpoondown="⇁",rightharpoonup="⇀",rightleftarrows="⇄",rightleftharpoons="⇌",rightrightarrows="⇉",rightsquigarrow="↝",RightTeeArrow="↦",RightTee="⊢",RightTeeVector="⥛",rightthreetimes="⋌",RightTriangleBar="⧐",RightTriangle="⊳",RightTriangleEqual="⊵",RightUpDownVector="⥏",RightUpTeeVector="⥜",RightUpVectorBar="⥔",RightUpVector="↾",RightVectorBar="⥓",RightVector="⇀",ring="˚",risingdotseq="≓",rlarr="⇄",rlhar="⇌",rlm="‏",rmoustache="⎱",rmoust="⎱",rnmid="⫮",roang="⟭",roarr="⇾",robrk="⟧",ropar="⦆",ropf="𝕣",Ropf="ℝ",roplus="⨮",rotimes="⨵",RoundImplies="⥰",rpar=")",rpargt="⦔",rppolint="⨒",rrarr="⇉",Rrightarrow="⇛",rsaquo="›",rscr="𝓇",Rscr="ℛ",rsh="↱",Rsh="↱",rsqb="]",rsquo="’",rsquor="’",rthree="⋌",rtimes="⋊",rtri="▹",rtrie="⊵",rtrif="▸",rtriltri="⧎",RuleDelayed="⧴",ruluhar="⥨",rx="℞",Sacute="Ś",sacute="ś",sbquo="‚",scap="⪸",Scaron="Š",scaron="š",Sc="⪼",sc="≻",sccue="≽",sce="⪰",scE="⪴",Scedil="Ş",scedil="ş",Scirc="Ŝ",scirc="ŝ",scnap="⪺",scnE="⪶",scnsim="⋩",scpolint="⨓",scsim="≿",Scy="С",scy="с",sdotb="⊡",sdot="⋅",sdote="⩦",searhk="⤥",searr="↘",seArr="⇘",searrow="↘",sect="§",semi=";",seswar="⤩",setminus="∖",setmn="∖",sext="✶",Sfr="𝔖",sfr="𝔰",sfrown="⌢",sharp="♯",SHCHcy="Щ",shchcy="щ",SHcy="Ш",shcy="ш",ShortDownArrow="↓",ShortLeftArrow="←",shortmid="∣",shortparallel="∥",ShortRightArrow="→",ShortUpArrow="↑",shy="­",Sigma="Σ",sigma="σ",sigmaf="ς",sigmav="ς",sim="∼",simdot="⩪",sime="≃",simeq="≃",simg="⪞",simgE="⪠",siml="⪝",simlE="⪟",simne="≆",simplus="⨤",simrarr="⥲",slarr="←",SmallCircle="∘",smallsetminus="∖",smashp="⨳",smeparsl="⧤",smid="∣",smile="⌣",smt="⪪",smte="⪬",smtes="⪬︀",SOFTcy="Ь",softcy="ь",solbar="⌿",solb="⧄",sol="/",Sopf="𝕊",sopf="𝕤",spades="♠",spadesuit="♠",spar="∥",sqcap="⊓",sqcaps="⊓︀",sqcup="⊔",sqcups="⊔︀",Sqrt="√",sqsub="⊏",sqsube="⊑",sqsubset="⊏",sqsubseteq="⊑",sqsup="⊐",sqsupe="⊒",sqsupset="⊐",sqsupseteq="⊒",square="□",Square="□",SquareIntersection="⊓",SquareSubset="⊏",SquareSubsetEqual="⊑",SquareSuperset="⊐",SquareSupersetEqual="⊒",SquareUnion="⊔",squarf="▪",squ="□",squf="▪",srarr="→",Sscr="𝒮",sscr="𝓈",ssetmn="∖",ssmile="⌣",sstarf="⋆",Star="⋆",star="☆",starf="★",straightepsilon="ϵ",straightphi="ϕ",strns="¯",sub="⊂",Sub="⋐",subdot="⪽",subE="⫅",sube="⊆",subedot="⫃",submult="⫁",subnE="⫋",subne="⊊",subplus="⪿",subrarr="⥹",subset="⊂",Subset="⋐",subseteq="⊆",subseteqq="⫅",SubsetEqual="⊆",subsetneq="⊊",subsetneqq="⫋",subsim="⫇",subsub="⫕",subsup="⫓",succapprox="⪸",succ="≻",succcurlyeq="≽",Succeeds="≻",SucceedsEqual="⪰",SucceedsSlantEqual="≽",SucceedsTilde="≿",succeq="⪰",succnapprox="⪺",succneqq="⪶",succnsim="⋩",succsim="≿",SuchThat="∋",sum="∑",Sum="∑",sung="♪",sup1="¹",sup2="²",sup3="³",sup="⊃",Sup="⋑",supdot="⪾",supdsub="⫘",supE="⫆",supe="⊇",supedot="⫄",Superset="⊃",SupersetEqual="⊇",suphsol="⟉",suphsub="⫗",suplarr="⥻",supmult="⫂",supnE="⫌",supne="⊋",supplus="⫀",supset="⊃",Supset="⋑",supseteq="⊇",supseteqq="⫆",supsetneq="⊋",supsetneqq="⫌",supsim="⫈",supsub="⫔",supsup="⫖",swarhk="⤦",swarr="↙",swArr="⇙",swarrow="↙",swnwar="⤪",szlig="ß",Tab="	",target="⌖",Tau="Τ",tau="τ",tbrk="⎴",Tcaron="Ť",tcaron="ť",Tcedil="Ţ",tcedil="ţ",Tcy="Т",tcy="т",tdot="⃛",telrec="⌕",Tfr="𝔗",tfr="𝔱",there4="∴",therefore="∴",Therefore="∴",Theta="Θ",theta="θ",thetasym="ϑ",thetav="ϑ",thickapprox="≈",thicksim="∼",ThickSpace="  ",ThinSpace=" ",thinsp=" ",thkap="≈",thksim="∼",THORN="Þ",thorn="þ",tilde="˜",Tilde="∼",TildeEqual="≃",TildeFullEqual="≅",TildeTilde="≈",timesbar="⨱",timesb="⊠",times="×",timesd="⨰",tint="∭",toea="⤨",topbot="⌶",topcir="⫱",top$1="⊤",Topf="𝕋",topf="𝕥",topfork="⫚",tosa="⤩",tprime="‴",trade="™",TRADE="™",triangle="▵",triangledown="▿",triangleleft="◃",trianglelefteq="⊴",triangleq="≜",triangleright="▹",trianglerighteq="⊵",tridot="◬",trie="≜",triminus="⨺",TripleDot="⃛",triplus="⨹",trisb="⧍",tritime="⨻",trpezium="⏢",Tscr="𝒯",tscr="𝓉",TScy="Ц",tscy="ц",TSHcy="Ћ",tshcy="ћ",Tstrok="Ŧ",tstrok="ŧ",twixt="≬",twoheadleftarrow="↞",twoheadrightarrow="↠",Uacute="Ú",uacute="ú",uarr="↑",Uarr="↟",uArr="⇑",Uarrocir="⥉",Ubrcy="Ў",ubrcy="ў",Ubreve="Ŭ",ubreve="ŭ",Ucirc="Û",ucirc="û",Ucy="У",ucy="у",udarr="⇅",Udblac="Ű",udblac="ű",udhar="⥮",ufisht="⥾",Ufr="𝔘",ufr="𝔲",Ugrave="Ù",ugrave="ù",uHar="⥣",uharl="↿",uharr="↾",uhblk="▀",ulcorn="⌜",ulcorner="⌜",ulcrop="⌏",ultri="◸",Umacr="Ū",umacr="ū",uml="¨",UnderBar="_",UnderBrace="⏟",UnderBracket="⎵",UnderParenthesis="⏝",Union="⋃",UnionPlus="⊎",Uogon="Ų",uogon="ų",Uopf="𝕌",uopf="𝕦",UpArrowBar="⤒",uparrow="↑",UpArrow="↑",Uparrow="⇑",UpArrowDownArrow="⇅",updownarrow="↕",UpDownArrow="↕",Updownarrow="⇕",UpEquilibrium="⥮",upharpoonleft="↿",upharpoonright="↾",uplus="⊎",UpperLeftArrow="↖",UpperRightArrow="↗",upsi="υ",Upsi="ϒ",upsih="ϒ",Upsilon="Υ",upsilon="υ",UpTeeArrow="↥",UpTee="⊥",upuparrows="⇈",urcorn="⌝",urcorner="⌝",urcrop="⌎",Uring="Ů",uring="ů",urtri="◹",Uscr="𝒰",uscr="𝓊",utdot="⋰",Utilde="Ũ",utilde="ũ",utri="▵",utrif="▴",uuarr="⇈",Uuml="Ü",uuml="ü",uwangle="⦧",vangrt="⦜",varepsilon="ϵ",varkappa="ϰ",varnothing="∅",varphi="ϕ",varpi="ϖ",varpropto="∝",varr="↕",vArr="⇕",varrho="ϱ",varsigma="ς",varsubsetneq="⊊︀",varsubsetneqq="⫋︀",varsupsetneq="⊋︀",varsupsetneqq="⫌︀",vartheta="ϑ",vartriangleleft="⊲",vartriangleright="⊳",vBar="⫨",Vbar="⫫",vBarv="⫩",Vcy="В",vcy="в",vdash="⊢",vDash="⊨",Vdash="⊩",VDash="⊫",Vdashl="⫦",veebar="⊻",vee="∨",Vee="⋁",veeeq="≚",vellip="⋮",verbar="|",Verbar="‖",vert="|",Vert="‖",VerticalBar="∣",VerticalLine="|",VerticalSeparator="❘",VerticalTilde="≀",VeryThinSpace=" ",Vfr="𝔙",vfr="𝔳",vltri="⊲",vnsub="⊂⃒",vnsup="⊃⃒",Vopf="𝕍",vopf="𝕧",vprop="∝",vrtri="⊳",Vscr="𝒱",vscr="𝓋",vsubnE="⫋︀",vsubne="⊊︀",vsupnE="⫌︀",vsupne="⊋︀",Vvdash="⊪",vzigzag="⦚",Wcirc="Ŵ",wcirc="ŵ",wedbar="⩟",wedge="∧",Wedge="⋀",wedgeq="≙",weierp="℘",Wfr="𝔚",wfr="𝔴",Wopf="𝕎",wopf="𝕨",wp="℘",wr="≀",wreath="≀",Wscr="𝒲",wscr="𝓌",xcap="⋂",xcirc="◯",xcup="⋃",xdtri="▽",Xfr="𝔛",xfr="𝔵",xharr="⟷",xhArr="⟺",Xi="Ξ",xi$1="ξ",xlarr="⟵",xlArr="⟸",xmap="⟼",xnis="⋻",xodot="⨀",Xopf="𝕏",xopf="𝕩",xoplus="⨁",xotime="⨂",xrarr="⟶",xrArr="⟹",Xscr="𝒳",xscr="𝓍",xsqcup="⨆",xuplus="⨄",xutri="△",xvee="⋁",xwedge="⋀",Yacute="Ý",yacute="ý",YAcy="Я",yacy="я",Ycirc="Ŷ",ycirc="ŷ",Ycy="Ы",ycy="ы",yen="¥",Yfr="𝔜",yfr="𝔶",YIcy="Ї",yicy="ї",Yopf="𝕐",yopf="𝕪",Yscr="𝒴",yscr="𝓎",YUcy="Ю",yucy="ю",yuml="ÿ",Yuml="Ÿ",Zacute="Ź",zacute="ź",Zcaron="Ž",zcaron="ž",Zcy="З",zcy="з",Zdot="Ż",zdot="ż",zeetrf="ℨ",ZeroWidthSpace="​",Zeta="Ζ",zeta="ζ",zfr="𝔷",Zfr="ℨ",ZHcy="Ж",zhcy="ж",zigrarr="⇝",zopf="𝕫",Zopf="ℤ",Zscr="𝒵",zscr="𝓏",zwj="‍",zwnj="‌",require$$0={Aacute,aacute,Abreve,abreve,ac,acd,acE,Acirc,acirc,acute,Acy,acy,AElig,aelig,af,Afr,afr,Agrave,agrave,alefsym,aleph,Alpha,alpha,Amacr,amacr,amalg,amp,AMP,andand,And,and,andd,andslope,andv,ang,ange,angle,angmsdaa,angmsdab,angmsdac,angmsdad,angmsdae,angmsdaf,angmsdag,angmsdah,angmsd,angrt,angrtvb,angrtvbd,angsph,angst,angzarr,Aogon,aogon,Aopf,aopf,apacir,ap,apE,ape,apid,apos,ApplyFunction,approx,approxeq,Aring,aring,Ascr,ascr,Assign,ast,asymp,asympeq,Atilde,atilde,Auml,auml,awconint,awint,backcong,backepsilon,backprime,backsim,backsimeq,Backslash,Barv,barvee,barwed,Barwed,barwedge,bbrk,bbrktbrk,bcong,Bcy,bcy,bdquo,becaus,because,Because,bemptyv,bepsi,bernou,Bernoullis,Beta,beta,beth,between,Bfr,bfr,bigcap,bigcirc,bigcup,bigodot,bigoplus,bigotimes,bigsqcup,bigstar,bigtriangledown,bigtriangleup,biguplus,bigvee,bigwedge,bkarow,blacklozenge,blacksquare,blacktriangle,blacktriangledown,blacktriangleleft,blacktriangleright,blank,blk12,blk14,blk34,block:block$1,bne,bnequiv,bNot,bnot,Bopf,bopf,bot,bottom,bowtie,boxbox,boxdl,boxdL,boxDl,boxDL,boxdr,boxdR,boxDr,boxDR,boxh,boxH,boxhd,boxHd,boxhD,boxHD,boxhu,boxHu,boxhU,boxHU,boxminus,boxplus,boxtimes,boxul,boxuL,boxUl,boxUL,boxur,boxuR,boxUr,boxUR,boxv,boxV,boxvh,boxvH,boxVh,boxVH,boxvl,boxvL,boxVl,boxVL,boxvr,boxvR,boxVr,boxVR,bprime,breve,Breve,brvbar,bscr,Bscr,bsemi,bsim,bsime,bsolb,bsol,bsolhsub,bull,bullet,bump,bumpE,bumpe,Bumpeq,bumpeq,Cacute,cacute,capand,capbrcup,capcap,cap,Cap,capcup,capdot,CapitalDifferentialD,caps,caret,caron,Cayleys,ccaps,Ccaron,ccaron,Ccedil,ccedil,Ccirc,ccirc,Cconint,ccups,ccupssm,Cdot,cdot,cedil,Cedilla,cemptyv,cent,centerdot,CenterDot,cfr,Cfr,CHcy,chcy,check,checkmark,Chi,chi,circ,circeq,circlearrowleft,circlearrowright,circledast,circledcirc,circleddash,CircleDot,circledR,circledS,CircleMinus,CirclePlus,CircleTimes,cir,cirE,cire,cirfnint,cirmid,cirscir,ClockwiseContourIntegral,CloseCurlyDoubleQuote,CloseCurlyQuote,clubs,clubsuit,colon,Colon,Colone,colone,coloneq,comma,commat,comp,compfn,complement,complexes,cong,congdot,Congruent,conint,Conint,ContourIntegral,copf,Copf,coprod,Coproduct,copy,COPY,copysr,CounterClockwiseContourIntegral,crarr,cross,Cross,Cscr,cscr,csub,csube,csup,csupe,ctdot,cudarrl,cudarrr,cuepr,cuesc,cularr,cularrp,cupbrcap,cupcap,CupCap,cup,Cup,cupcup,cupdot,cupor,cups,curarr,curarrm,curlyeqprec,curlyeqsucc,curlyvee,curlywedge,curren,curvearrowleft,curvearrowright,cuvee,cuwed,cwconint,cwint,cylcty,dagger,Dagger,daleth,darr,Darr,dArr,dash,Dashv,dashv,dbkarow,dblac,Dcaron,dcaron,Dcy,dcy,ddagger,ddarr,DD,dd,DDotrahd,ddotseq,deg,Del,Delta,delta,demptyv,dfisht,Dfr,dfr,dHar,dharl,dharr,DiacriticalAcute,DiacriticalDot,DiacriticalDoubleAcute,DiacriticalGrave,DiacriticalTilde,diam,diamond,Diamond,diamondsuit,diams,die,DifferentialD,digamma,disin,div,divide,divideontimes,divonx,DJcy,djcy,dlcorn,dlcrop,dollar,Dopf,dopf,Dot,dot,DotDot,doteq,doteqdot,DotEqual,dotminus,dotplus,dotsquare,doublebarwedge,DoubleContourIntegral,DoubleDot,DoubleDownArrow,DoubleLeftArrow,DoubleLeftRightArrow,DoubleLeftTee,DoubleLongLeftArrow,DoubleLongLeftRightArrow,DoubleLongRightArrow,DoubleRightArrow,DoubleRightTee,DoubleUpArrow,DoubleUpDownArrow,DoubleVerticalBar,DownArrowBar,downarrow,DownArrow,Downarrow,DownArrowUpArrow,DownBreve,downdownarrows,downharpoonleft,downharpoonright,DownLeftRightVector,DownLeftTeeVector,DownLeftVectorBar,DownLeftVector,DownRightTeeVector,DownRightVectorBar,DownRightVector,DownTeeArrow,DownTee,drbkarow,drcorn,drcrop,Dscr,dscr,DScy,dscy,dsol,Dstrok,dstrok,dtdot,dtri,dtrif,duarr,duhar,dwangle,DZcy,dzcy,dzigrarr,Eacute,eacute,easter,Ecaron,ecaron,Ecirc,ecirc,ecir,ecolon,Ecy,ecy,eDDot,Edot,edot,eDot,ee,efDot,Efr,efr,eg,Egrave,egrave,egs,egsdot,el,Element:Element$1,elinters,ell,els,elsdot,Emacr,emacr,empty,emptyset,EmptySmallSquare,emptyv,EmptyVerySmallSquare,emsp13,emsp14,emsp,ENG,eng,ensp,Eogon,eogon,Eopf,eopf,epar,eparsl,eplus,epsi,Epsilon,epsilon,epsiv,eqcirc,eqcolon,eqsim,eqslantgtr,eqslantless,Equal,equals,EqualTilde,equest,Equilibrium,equiv,equivDD,eqvparsl,erarr,erDot,escr,Escr,esdot,Esim,esim,Eta,eta,ETH,eth,Euml,euml,euro,excl,exist,Exists,expectation,exponentiale,ExponentialE,fallingdotseq,Fcy,fcy,female,ffilig,fflig,ffllig,Ffr,ffr,filig,FilledSmallSquare,FilledVerySmallSquare,fjlig,flat,fllig,fltns,fnof,Fopf,fopf,forall,ForAll,fork,forkv,Fouriertrf,fpartint,frac12,frac13,frac14,frac15,frac16,frac18,frac23,frac25,frac34,frac35,frac38,frac45,frac56,frac58,frac78,frasl,frown,fscr,Fscr,gacute,Gamma,gamma,Gammad,gammad,gap,Gbreve,gbreve,Gcedil,Gcirc,gcirc,Gcy,gcy,Gdot,gdot,ge,gE,gEl,gel,geq,geqq,geqslant,gescc,ges,gesdot,gesdoto,gesdotol,gesl,gesles,Gfr,gfr,gg,Gg,ggg,gimel,GJcy,gjcy,gla,gl,glE,glj,gnap,gnapprox,gne,gnE,gneq,gneqq,gnsim,Gopf,gopf,grave,GreaterEqual,GreaterEqualLess,GreaterFullEqual,GreaterGreater,GreaterLess,GreaterSlantEqual,GreaterTilde,Gscr,gscr,gsim,gsime,gsiml,gtcc,gtcir,gt,GT,Gt,gtdot,gtlPar,gtquest,gtrapprox,gtrarr,gtrdot,gtreqless,gtreqqless,gtrless,gtrsim,gvertneqq,gvnE,Hacek,hairsp,half,hamilt,HARDcy,hardcy,harrcir,harr,hArr,harrw,Hat,hbar,Hcirc,hcirc,hearts,heartsuit,hellip,hercon,hfr,Hfr,HilbertSpace,hksearow,hkswarow,hoarr,homtht,hookleftarrow,hookrightarrow,hopf,Hopf,horbar,HorizontalLine,hscr,Hscr,hslash,Hstrok,hstrok,HumpDownHump,HumpEqual,hybull,hyphen,Iacute,iacute,ic,Icirc,icirc,Icy,icy,Idot,IEcy,iecy,iexcl,iff,ifr,Ifr,Igrave,igrave,ii:ii$1,iiiint,iiint,iinfin,iiota,IJlig,ijlig,Imacr,imacr,image:image$1,ImaginaryI,imagline,imagpart,imath,Im,imof,imped,Implies,incare,in:"∈",infin,infintie,inodot,intcal,int,Int,integers,Integral,intercal,Intersection,intlarhk,intprod,InvisibleComma,InvisibleTimes,IOcy,iocy,Iogon,iogon,Iopf,iopf,Iota,iota,iprod,iquest,iscr,Iscr,isin,isindot,isinE,isins,isinsv,isinv,it:it$1,Itilde,itilde,Iukcy,iukcy,Iuml,iuml,Jcirc,jcirc,Jcy,jcy,Jfr,jfr,jmath,Jopf,jopf,Jscr,jscr,Jsercy,jsercy,Jukcy,jukcy,Kappa,kappa,kappav,Kcedil,kcedil,Kcy,kcy,Kfr,kfr,kgreen,KHcy,khcy,KJcy,kjcy,Kopf,kopf,Kscr,kscr,lAarr,Lacute,lacute,laemptyv,lagran,Lambda,lambda,lang,Lang,langd,langle,lap,Laplacetrf,laquo,larrb,larrbfs,larr,Larr,lArr,larrfs,larrhk,larrlp,larrpl,larrsim,larrtl,latail,lAtail,lat,late,lates,lbarr,lBarr,lbbrk,lbrace,lbrack,lbrke,lbrksld,lbrkslu,Lcaron,lcaron,Lcedil,lcedil,lceil,lcub,Lcy,lcy,ldca,ldquo,ldquor,ldrdhar,ldrushar,ldsh,le,lE,LeftAngleBracket,LeftArrowBar,leftarrow,LeftArrow,Leftarrow,LeftArrowRightArrow,leftarrowtail,LeftCeiling,LeftDoubleBracket,LeftDownTeeVector,LeftDownVectorBar,LeftDownVector,LeftFloor,leftharpoondown,leftharpoonup,leftleftarrows,leftrightarrow,LeftRightArrow,Leftrightarrow,leftrightarrows,leftrightharpoons,leftrightsquigarrow,LeftRightVector,LeftTeeArrow,LeftTee,LeftTeeVector,leftthreetimes,LeftTriangleBar,LeftTriangle,LeftTriangleEqual,LeftUpDownVector,LeftUpTeeVector,LeftUpVectorBar,LeftUpVector,LeftVectorBar,LeftVector,lEg,leg,leq,leqq,leqslant,lescc,les,lesdot,lesdoto,lesdotor,lesg,lesges,lessapprox,lessdot,lesseqgtr,lesseqqgtr,LessEqualGreater,LessFullEqual,LessGreater,lessgtr,LessLess,lesssim,LessSlantEqual,LessTilde,lfisht,lfloor,Lfr,lfr,lg,lgE,lHar,lhard,lharu,lharul,lhblk,LJcy,ljcy,llarr,ll,Ll,llcorner,Lleftarrow,llhard,lltri,Lmidot,lmidot,lmoustache,lmoust,lnap,lnapprox,lne,lnE,lneq,lneqq,lnsim,loang,loarr,lobrk,longleftarrow,LongLeftArrow,Longleftarrow,longleftrightarrow,LongLeftRightArrow,Longleftrightarrow,longmapsto,longrightarrow,LongRightArrow,Longrightarrow,looparrowleft,looparrowright,lopar,Lopf,lopf,loplus,lotimes,lowast,lowbar,LowerLeftArrow,LowerRightArrow,loz,lozenge,lozf,lpar,lparlt,lrarr,lrcorner,lrhar,lrhard,lrm,lrtri,lsaquo,lscr,Lscr,lsh,Lsh,lsim,lsime,lsimg,lsqb,lsquo,lsquor,Lstrok,lstrok,ltcc,ltcir,lt:lt$1,LT,Lt,ltdot,lthree,ltimes,ltlarr,ltquest,ltri,ltrie,ltrif,ltrPar,lurdshar,luruhar,lvertneqq,lvnE,macr,male,malt,maltese,Map:"⤅",map,mapsto,mapstodown,mapstoleft,mapstoup,marker,mcomma,Mcy,mcy,mdash,mDDot,measuredangle,MediumSpace,Mellintrf,Mfr,mfr,mho,micro,midast,midcir,mid,middot,minusb,minus,minusd,minusdu,MinusPlus,mlcp,mldr,mnplus,models,Mopf,mopf,mp,mscr,Mscr,mstpos,Mu,mu,multimap,mumap,nabla,Nacute,nacute,nang,nap,napE,napid,napos,napprox,natural,naturals,natur,nbsp,nbump,nbumpe,ncap,Ncaron,ncaron,Ncedil,ncedil,ncong,ncongdot,ncup,Ncy,ncy,ndash,nearhk,nearr,neArr,nearrow,ne,nedot,NegativeMediumSpace,NegativeThickSpace,NegativeThinSpace,NegativeVeryThinSpace,nequiv,nesear,nesim,NestedGreaterGreater,NestedLessLess,NewLine,nexist,nexists,Nfr,nfr,ngE,nge,ngeq,ngeqq,ngeqslant,nges,nGg,ngsim,nGt,ngt,ngtr,nGtv,nharr,nhArr,nhpar,ni,nis,nisd,niv,NJcy,njcy,nlarr,nlArr,nldr,nlE,nle,nleftarrow,nLeftarrow,nleftrightarrow,nLeftrightarrow,nleq,nleqq,nleqslant,nles,nless,nLl,nlsim,nLt,nlt,nltri,nltrie,nLtv,nmid,NoBreak,NonBreakingSpace,nopf,Nopf,Not,not,NotCongruent,NotCupCap,NotDoubleVerticalBar,NotElement,NotEqual,NotEqualTilde,NotExists,NotGreater,NotGreaterEqual,NotGreaterFullEqual,NotGreaterGreater,NotGreaterLess,NotGreaterSlantEqual,NotGreaterTilde,NotHumpDownHump,NotHumpEqual,notin,notindot,notinE,notinva,notinvb,notinvc,NotLeftTriangleBar,NotLeftTriangle,NotLeftTriangleEqual,NotLess,NotLessEqual,NotLessGreater,NotLessLess,NotLessSlantEqual,NotLessTilde,NotNestedGreaterGreater,NotNestedLessLess,notni,notniva,notnivb,notnivc,NotPrecedes,NotPrecedesEqual,NotPrecedesSlantEqual,NotReverseElement,NotRightTriangleBar,NotRightTriangle,NotRightTriangleEqual,NotSquareSubset,NotSquareSubsetEqual,NotSquareSuperset,NotSquareSupersetEqual,NotSubset,NotSubsetEqual,NotSucceeds,NotSucceedsEqual,NotSucceedsSlantEqual,NotSucceedsTilde,NotSuperset,NotSupersetEqual,NotTilde,NotTildeEqual,NotTildeFullEqual,NotTildeTilde,NotVerticalBar,nparallel,npar,nparsl,npart,npolint,npr,nprcue,nprec,npreceq,npre,nrarrc,nrarr,nrArr,nrarrw,nrightarrow,nRightarrow,nrtri,nrtrie,nsc,nsccue,nsce,Nscr,nscr,nshortmid,nshortparallel,nsim,nsime,nsimeq,nsmid,nspar,nsqsube,nsqsupe,nsub,nsubE,nsube,nsubset,nsubseteq,nsubseteqq,nsucc,nsucceq,nsup,nsupE,nsupe,nsupset,nsupseteq,nsupseteqq,ntgl,Ntilde,ntilde,ntlg,ntriangleleft,ntrianglelefteq,ntriangleright,ntrianglerighteq,Nu,nu,num,numero,numsp,nvap,nvdash,nvDash,nVdash,nVDash,nvge,nvgt,nvHarr,nvinfin,nvlArr,nvle,nvlt,nvltrie,nvrArr,nvrtrie,nvsim,nwarhk,nwarr,nwArr,nwarrow,nwnear,Oacute,oacute,oast,Ocirc,ocirc,ocir,Ocy,ocy,odash,Odblac,odblac,odiv,odot,odsold,OElig,oelig,ofcir,Ofr,ofr,ogon,Ograve,ograve,ogt,ohbar,ohm,oint,olarr,olcir,olcross,oline,olt,Omacr,omacr,Omega,omega,Omicron,omicron,omid,ominus,Oopf,oopf,opar,OpenCurlyDoubleQuote,OpenCurlyQuote,operp,oplus,orarr,Or:Or$1,or,ord,order,orderof,ordf,ordm,origof,oror,orslope,orv,oS,Oscr,oscr,Oslash,oslash,osol,Otilde,otilde,otimesas,Otimes,otimes,Ouml,ouml,ovbar,OverBar,OverBrace,OverBracket,OverParenthesis,para,parallel,par,parsim,parsl,part,PartialD,Pcy,pcy,percnt,period,permil,perp,pertenk,Pfr,pfr,Phi,phi,phiv,phmmat,phone,Pi:Pi$1,pi:pi$1,pitchfork,piv,planck,planckh,plankv,plusacir,plusb,pluscir,plus,plusdo,plusdu,pluse,PlusMinus,plusmn,plussim,plustwo,pm,Poincareplane,pointint,popf,Popf,pound,prap,Pr:Pr$1,pr,prcue,precapprox,prec,preccurlyeq,Precedes,PrecedesEqual,PrecedesSlantEqual,PrecedesTilde,preceq,precnapprox,precneqq,precnsim,pre,prE,precsim,prime,Prime,primes,prnap,prnE,prnsim,prod,Product,profalar,profline,profsurf,prop,Proportional,Proportion,propto,prsim,prurel,Pscr,pscr,Psi,psi,puncsp,Qfr,qfr,qint,qopf,Qopf,qprime,Qscr,qscr,quaternions,quatint,quest,questeq,quot,QUOT,rAarr,race,Racute,racute,radic,raemptyv,rang,Rang,rangd,range,rangle,raquo,rarrap,rarrb,rarrbfs,rarrc,rarr,Rarr,rArr,rarrfs,rarrhk,rarrlp,rarrpl,rarrsim,Rarrtl,rarrtl,rarrw,ratail,rAtail,ratio,rationals,rbarr,rBarr,RBarr,rbbrk,rbrace,rbrack,rbrke,rbrksld,rbrkslu,Rcaron,rcaron,Rcedil,rcedil,rceil,rcub,Rcy,rcy,rdca,rdldhar,rdquo,rdquor,rdsh,real,realine,realpart,reals,Re,rect,reg,REG,ReverseElement,ReverseEquilibrium,ReverseUpEquilibrium,rfisht,rfloor,rfr,Rfr,rHar,rhard,rharu,rharul,Rho,rho,rhov,RightAngleBracket,RightArrowBar,rightarrow,RightArrow,Rightarrow,RightArrowLeftArrow,rightarrowtail,RightCeiling,RightDoubleBracket,RightDownTeeVector,RightDownVectorBar,RightDownVector,RightFloor,rightharpoondown,rightharpoonup,rightleftarrows,rightleftharpoons,rightrightarrows,rightsquigarrow,RightTeeArrow,RightTee,RightTeeVector,rightthreetimes,RightTriangleBar,RightTriangle,RightTriangleEqual,RightUpDownVector,RightUpTeeVector,RightUpVectorBar,RightUpVector,RightVectorBar,RightVector,ring,risingdotseq,rlarr,rlhar,rlm,rmoustache,rmoust,rnmid,roang,roarr,robrk,ropar,ropf,Ropf,roplus,rotimes,RoundImplies,rpar,rpargt,rppolint,rrarr,Rrightarrow,rsaquo,rscr,Rscr,rsh,Rsh,rsqb,rsquo,rsquor,rthree,rtimes,rtri,rtrie,rtrif,rtriltri,RuleDelayed,ruluhar,rx,Sacute,sacute,sbquo,scap,Scaron,scaron,Sc,sc,sccue,sce,scE,Scedil,scedil,Scirc,scirc,scnap,scnE,scnsim,scpolint,scsim,Scy,scy,sdotb,sdot,sdote,searhk,searr,seArr,searrow,sect,semi,seswar,setminus,setmn,sext,Sfr,sfr,sfrown,sharp,SHCHcy,shchcy,SHcy,shcy,ShortDownArrow,ShortLeftArrow,shortmid,shortparallel,ShortRightArrow,ShortUpArrow,shy,Sigma,sigma,sigmaf,sigmav,sim,simdot,sime,simeq,simg,simgE,siml,simlE,simne,simplus,simrarr,slarr,SmallCircle,smallsetminus,smashp,smeparsl,smid,smile,smt,smte,smtes,SOFTcy,softcy,solbar,solb,sol,Sopf,sopf,spades,spadesuit,spar,sqcap,sqcaps,sqcup,sqcups,Sqrt,sqsub,sqsube,sqsubset,sqsubseteq,sqsup,sqsupe,sqsupset,sqsupseteq,square,Square,SquareIntersection,SquareSubset,SquareSubsetEqual,SquareSuperset,SquareSupersetEqual,SquareUnion,squarf,squ,squf,srarr,Sscr,sscr,ssetmn,ssmile,sstarf,Star,star,starf,straightepsilon,straightphi,strns,sub,Sub,subdot,subE,sube,subedot,submult,subnE,subne,subplus,subrarr,subset,Subset,subseteq,subseteqq,SubsetEqual,subsetneq,subsetneqq,subsim,subsub,subsup,succapprox,succ,succcurlyeq,Succeeds,SucceedsEqual,SucceedsSlantEqual,SucceedsTilde,succeq,succnapprox,succneqq,succnsim,succsim,SuchThat,sum,Sum,sung,sup1,sup2,sup3,sup,Sup,supdot,supdsub,supE,supe,supedot,Superset,SupersetEqual,suphsol,suphsub,suplarr,supmult,supnE,supne,supplus,supset,Supset,supseteq,supseteqq,supsetneq,supsetneqq,supsim,supsub,supsup,swarhk,swarr,swArr,swarrow,swnwar,szlig,Tab,target,Tau,tau,tbrk,Tcaron,tcaron,Tcedil,tcedil,Tcy,tcy,tdot,telrec,Tfr,tfr,there4,therefore,Therefore,Theta,theta,thetasym,thetav,thickapprox,thicksim,ThickSpace,ThinSpace,thinsp,thkap,thksim,THORN,thorn,tilde,Tilde,TildeEqual,TildeFullEqual,TildeTilde,timesbar,timesb,times,timesd,tint,toea,topbot,topcir,top:top$1,Topf,topf,topfork,tosa,tprime,trade,TRADE,triangle,triangledown,triangleleft,trianglelefteq,triangleq,triangleright,trianglerighteq,tridot,trie,triminus,TripleDot,triplus,trisb,tritime,trpezium,Tscr,tscr,TScy,tscy,TSHcy,tshcy,Tstrok,tstrok,twixt,twoheadleftarrow,twoheadrightarrow,Uacute,uacute,uarr,Uarr,uArr,Uarrocir,Ubrcy,ubrcy,Ubreve,ubreve,Ucirc,ucirc,Ucy,ucy,udarr,Udblac,udblac,udhar,ufisht,Ufr,ufr,Ugrave,ugrave,uHar,uharl,uharr,uhblk,ulcorn,ulcorner,ulcrop,ultri,Umacr,umacr,uml,UnderBar,UnderBrace,UnderBracket,UnderParenthesis,Union,UnionPlus,Uogon,uogon,Uopf,uopf,UpArrowBar,uparrow,UpArrow,Uparrow,UpArrowDownArrow,updownarrow,UpDownArrow,Updownarrow,UpEquilibrium,upharpoonleft,upharpoonright,uplus,UpperLeftArrow,UpperRightArrow,upsi,Upsi,upsih,Upsilon,upsilon,UpTeeArrow,UpTee,upuparrows,urcorn,urcorner,urcrop,Uring,uring,urtri,Uscr,uscr,utdot,Utilde,utilde,utri,utrif,uuarr,Uuml,uuml,uwangle,vangrt,varepsilon,varkappa,varnothing,varphi,varpi,varpropto,varr,vArr,varrho,varsigma,varsubsetneq,varsubsetneqq,varsupsetneq,varsupsetneqq,vartheta,vartriangleleft,vartriangleright,vBar,Vbar,vBarv,Vcy,vcy,vdash,vDash,Vdash,VDash,Vdashl,veebar,vee,Vee,veeeq,vellip,verbar,Verbar,vert,Vert,VerticalBar,VerticalLine,VerticalSeparator,VerticalTilde,VeryThinSpace,Vfr,vfr,vltri,vnsub,vnsup,Vopf,vopf,vprop,vrtri,Vscr,vscr,vsubnE,vsubne,vsupnE,vsupne,Vvdash,vzigzag,Wcirc,wcirc,wedbar,wedge,Wedge,wedgeq,weierp,Wfr,wfr,Wopf,wopf,wp,wr,wreath,Wscr,wscr,xcap,xcirc,xcup,xdtri,Xfr,xfr,xharr,xhArr,Xi,xi:xi$1,xlarr,xlArr,xmap,xnis,xodot,Xopf,xopf,xoplus,xotime,xrarr,xrArr,Xscr,xscr,xsqcup,xuplus,xutri,xvee,xwedge,Yacute,yacute,YAcy,yacy,Ycirc,ycirc,Ycy,ycy,yen,Yfr,yfr,YIcy,yicy,Yopf,yopf,Yscr,yscr,YUcy,yucy,yuml,Yuml,Zacute,zacute,Zcaron,zcaron,Zcy,zcy,Zdot,zdot,zeetrf,ZeroWidthSpace,Zeta,zeta,zfr,Zfr,ZHcy,zhcy,zigrarr,zopf,Zopf,Zscr,zscr,zwj,zwnj};var entities,hasRequiredEntities;function requireEntities(){return hasRequiredEntities||(hasRequiredEntities=1,entities=require$$0),entities}var regex$4,hasRequiredRegex$4;function requireRegex$4(){return hasRequiredRegex$4||(hasRequiredRegex$4=1,regex$4=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4E\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDF55-\uDF59]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDF3C-\uDF3E]|\uD806[\uDC3B\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/),regex$4}var mdurl={},encode_1,hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode_1;hasRequiredEncode=1;var n={};function r(_){var x,S,E=n[_];if(E)return E;for(E=n[_]=[],x=0;x<128;x++)S=String.fromCharCode(x),/^[0-9a-z]$/i.test(S)?E.push(S):E.push("%"+("0"+x.toString(16).toUpperCase()).slice(-2));for(x=0;x<_.length;x++)E[_.charCodeAt(x)]=_[x];return E}function g(_,x,S){var E,C,T,R,A,I="";for(typeof x!="string"&&(S=x,x=g.defaultChars),typeof S>"u"&&(S=!0),A=r(x),E=0,C=_.length;E<C;E++){if(T=_.charCodeAt(E),S&&T===37&&E+2<C&&/^[0-9a-f]{2}$/i.test(_.slice(E+1,E+3))){I+=_.slice(E,E+3),E+=2;continue}if(T<128){I+=A[T];continue}if(T>=55296&&T<=57343){if(T>=55296&&T<=56319&&E+1<C&&(R=_.charCodeAt(E+1),R>=56320&&R<=57343)){I+=encodeURIComponent(_[E]+_[E+1]),E++;continue}I+="%EF%BF%BD";continue}I+=encodeURIComponent(_[E])}return I}return g.defaultChars=";/?:@&=+$,-_.!~*'()#",g.componentChars="-_.!~*'()",encode_1=g,encode_1}var decode_1,hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode_1;hasRequiredDecode=1;var n={};function r(_){var x,S,E=n[_];if(E)return E;for(E=n[_]=[],x=0;x<128;x++)S=String.fromCharCode(x),E.push(S);for(x=0;x<_.length;x++)S=_.charCodeAt(x),E[S]="%"+("0"+S.toString(16).toUpperCase()).slice(-2);return E}function g(_,x){var S;return typeof x!="string"&&(x=g.defaultChars),S=r(x),_.replace(/(%[a-f0-9]{2})+/gi,function(E){var C,T,R,A,I,B,D,N="";for(C=0,T=E.length;C<T;C+=3){if(R=parseInt(E.slice(C+1,C+3),16),R<128){N+=S[R];continue}if((R&224)===192&&C+3<T&&(A=parseInt(E.slice(C+4,C+6),16),(A&192)===128)){D=R<<6&1984|A&63,D<128?N+="��":N+=String.fromCharCode(D),C+=3;continue}if((R&240)===224&&C+6<T&&(A=parseInt(E.slice(C+4,C+6),16),I=parseInt(E.slice(C+7,C+9),16),(A&192)===128&&(I&192)===128)){D=R<<12&61440|A<<6&4032|I&63,D<2048||D>=55296&&D<=57343?N+="���":N+=String.fromCharCode(D),C+=6;continue}if((R&248)===240&&C+9<T&&(A=parseInt(E.slice(C+4,C+6),16),I=parseInt(E.slice(C+7,C+9),16),B=parseInt(E.slice(C+10,C+12),16),(A&192)===128&&(I&192)===128&&(B&192)===128)){D=R<<18&1835008|A<<12&258048|I<<6&4032|B&63,D<65536||D>1114111?N+="����":(D-=65536,N+=String.fromCharCode(55296+(D>>10),56320+(D&1023))),C+=9;continue}N+="�"}return N})}return g.defaultChars=";/?:@&=+$,#",g.componentChars="",decode_1=g,decode_1}var format,hasRequiredFormat;function requireFormat(){return hasRequiredFormat||(hasRequiredFormat=1,format=function(r){var g="";return g+=r.protocol||"",g+=r.slashes?"//":"",g+=r.auth?r.auth+"@":"",r.hostname&&r.hostname.indexOf(":")!==-1?g+="["+r.hostname+"]":g+=r.hostname||"",g+=r.port?":"+r.port:"",g+=r.pathname||"",g+=r.search||"",g+=r.hash||"",g}),format}var parse,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse;hasRequiredParse=1;function n(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}var r=/^([a-z0-9.+-]+:)/i,g=/:[0-9]*$/,_=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,x=["<",">",'"',"`"," ","\r",`
`,"	"],S=["{","}","|","\\","^","`"].concat(x),E=["'"].concat(S),C=["%","/","?",";","#"].concat(E),T=["/","?","#"],R=255,A=/^[+a-z0-9A-Z_-]{0,63}$/,I=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,B={javascript:!0,"javascript:":!0},D={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function N(M,O){if(M&&M instanceof n)return M;var L=new n;return L.parse(M,O),L}return n.prototype.parse=function(M,O){var L,F,U,j,z,W=M;if(W=W.trim(),!O&&M.split("#").length===1){var X=_.exec(W);if(X)return this.pathname=X[1],X[2]&&(this.search=X[2]),this}var ie=r.exec(W);if(ie&&(ie=ie[0],U=ie.toLowerCase(),this.protocol=ie,W=W.substr(ie.length)),(O||ie||W.match(/^\/\/[^@\/]+@[^@\/]+/))&&(z=W.substr(0,2)==="//",z&&!(ie&&B[ie])&&(W=W.substr(2),this.slashes=!0)),!B[ie]&&(z||ie&&!D[ie])){var fe=-1;for(L=0;L<T.length;L++)j=W.indexOf(T[L]),j!==-1&&(fe===-1||j<fe)&&(fe=j);var xe,we;for(fe===-1?we=W.lastIndexOf("@"):we=W.lastIndexOf("@",fe),we!==-1&&(xe=W.slice(0,we),W=W.slice(we+1),this.auth=xe),fe=-1,L=0;L<C.length;L++)j=W.indexOf(C[L]),j!==-1&&(fe===-1||j<fe)&&(fe=j);fe===-1&&(fe=W.length),W[fe-1]===":"&&fe--;var G=W.slice(0,fe);W=W.slice(fe),this.parseHost(G),this.hostname=this.hostname||"";var J=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!J){var q=this.hostname.split(/\./);for(L=0,F=q.length;L<F;L++){var H=q[L];if(H&&!H.match(A)){for(var ve="",Z=0,ce=H.length;Z<ce;Z++)H.charCodeAt(Z)>127?ve+="x":ve+=H[Z];if(!ve.match(A)){var ue=q.slice(0,L),se=q.slice(L+1),te=H.match(I);te&&(ue.push(te[1]),se.unshift(te[2])),se.length&&(W=se.join(".")+W),this.hostname=ue.join(".");break}}}}this.hostname.length>R&&(this.hostname=""),J&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}var Y=W.indexOf("#");Y!==-1&&(this.hash=W.substr(Y),W=W.slice(0,Y));var be=W.indexOf("?");return be!==-1&&(this.search=W.substr(be),W=W.slice(0,be)),W&&(this.pathname=W),D[U]&&this.hostname&&!this.pathname&&(this.pathname=""),this},n.prototype.parseHost=function(M){var O=g.exec(M);O&&(O=O[0],O!==":"&&(this.port=O.substr(1)),M=M.substr(0,M.length-O.length)),M&&(this.hostname=M)},parse=N,parse}var hasRequiredMdurl;function requireMdurl(){return hasRequiredMdurl||(hasRequiredMdurl=1,mdurl.encode=requireEncode(),mdurl.decode=requireDecode(),mdurl.format=requireFormat(),mdurl.parse=requireParse()),mdurl}var uc_micro={},regex$3,hasRequiredRegex$3;function requireRegex$3(){return hasRequiredRegex$3||(hasRequiredRegex$3=1,regex$3=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/),regex$3}var regex$2,hasRequiredRegex$2;function requireRegex$2(){return hasRequiredRegex$2||(hasRequiredRegex$2=1,regex$2=/[\0-\x1F\x7F-\x9F]/),regex$2}var regex$1,hasRequiredRegex$1;function requireRegex$1(){return hasRequiredRegex$1||(hasRequiredRegex$1=1,regex$1=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/),regex$1}var regex,hasRequiredRegex;function requireRegex(){return hasRequiredRegex||(hasRequiredRegex=1,regex=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/),regex}var hasRequiredUc_micro;function requireUc_micro(){return hasRequiredUc_micro||(hasRequiredUc_micro=1,uc_micro.Any=requireRegex$3(),uc_micro.Cc=requireRegex$2(),uc_micro.Cf=requireRegex$1(),uc_micro.P=requireRegex$4(),uc_micro.Z=requireRegex()),uc_micro}var hasRequiredUtils;function requireUtils(){return hasRequiredUtils||(hasRequiredUtils=1,function(n){function r(q){return Object.prototype.toString.call(q)}function g(q){return r(q)==="[object String]"}var _=Object.prototype.hasOwnProperty;function x(q,H){return _.call(q,H)}function S(q){var H=Array.prototype.slice.call(arguments,1);return H.forEach(function(ve){if(ve){if(typeof ve!="object")throw new TypeError(ve+"must be object");Object.keys(ve).forEach(function(Z){q[Z]=ve[Z]})}}),q}function E(q,H,ve){return[].concat(q.slice(0,H),ve,q.slice(H+1))}function C(q){return!(q>=55296&&q<=57343||q>=64976&&q<=65007||(q&65535)===65535||(q&65535)===65534||q>=0&&q<=8||q===11||q>=14&&q<=31||q>=127&&q<=159||q>1114111)}function T(q){if(q>65535){q-=65536;var H=55296+(q>>10),ve=56320+(q&1023);return String.fromCharCode(H,ve)}return String.fromCharCode(q)}var R=/\\([!"#$%&'()*+,\-.\/:;<=>?@[\\\]^_`{|}~])/g,A=/&([a-z#][a-z0-9]{1,31});/gi,I=new RegExp(R.source+"|"+A.source,"gi"),B=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i,D=requireEntities();function N(q,H){var ve;return x(D,H)?D[H]:H.charCodeAt(0)===35&&B.test(H)&&(ve=H[1].toLowerCase()==="x"?parseInt(H.slice(2),16):parseInt(H.slice(1),10),C(ve))?T(ve):q}function M(q){return q.indexOf("\\")<0?q:q.replace(R,"$1")}function O(q){return q.indexOf("\\")<0&&q.indexOf("&")<0?q:q.replace(I,function(H,ve,Z){return ve||N(H,Z)})}var L=/[&<>"]/,F=/[&<>"]/g,U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function j(q){return U[q]}function z(q){return L.test(q)?q.replace(F,j):q}var W=/[.?*+^$[\]\\(){}|-]/g;function X(q){return q.replace(W,"\\$&")}function ie(q){switch(q){case 9:case 32:return!0}return!1}function fe(q){if(q>=8192&&q<=8202)return!0;switch(q){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}var xe=requireRegex$4();function we(q){return xe.test(q)}function G(q){switch(q){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function J(q){return q=q.trim().replace(/\s+/g," "),"ẞ".toLowerCase()==="Ṿ"&&(q=q.replace(/ẞ/g,"ß")),q.toLowerCase().toUpperCase()}n.lib={},n.lib.mdurl=requireMdurl(),n.lib.ucmicro=requireUc_micro(),n.assign=S,n.isString=g,n.has=x,n.unescapeMd=M,n.unescapeAll=O,n.isValidEntityCode=C,n.fromCodePoint=T,n.escapeHtml=z,n.arrayReplaceAt=E,n.isSpace=ie,n.isWhiteSpace=fe,n.isMdAsciiPunct=G,n.isPunctChar=we,n.escapeRE=X,n.normalizeReference=J}(utils)),utils}var helpers={},parse_link_label,hasRequiredParse_link_label;function requireParse_link_label(){return hasRequiredParse_link_label||(hasRequiredParse_link_label=1,parse_link_label=function(r,g,_){var x,S,E,C,T=-1,R=r.posMax,A=r.pos;for(r.pos=g+1,x=1;r.pos<R;){if(E=r.src.charCodeAt(r.pos),E===93&&(x--,x===0)){S=!0;break}if(C=r.pos,r.md.inline.skipToken(r),E===91){if(C===r.pos-1)x++;else if(_)return r.pos=A,-1}}return S&&(T=r.pos),r.pos=A,T}),parse_link_label}var parse_link_destination,hasRequiredParse_link_destination;function requireParse_link_destination(){if(hasRequiredParse_link_destination)return parse_link_destination;hasRequiredParse_link_destination=1;var n=requireUtils().unescapeAll;return parse_link_destination=function(g,_,x){var S,E,C=_,T={ok:!1,pos:0,lines:0,str:""};if(g.charCodeAt(C)===60){for(C++;C<x;){if(S=g.charCodeAt(C),S===10||S===60)return T;if(S===62)return T.pos=C+1,T.str=n(g.slice(_+1,C)),T.ok=!0,T;if(S===92&&C+1<x){C+=2;continue}C++}return T}for(E=0;C<x&&(S=g.charCodeAt(C),!(S===32||S<32||S===127));){if(S===92&&C+1<x){if(g.charCodeAt(C+1)===32)break;C+=2;continue}if(S===40&&(E++,E>32))return T;if(S===41){if(E===0)break;E--}C++}return _===C||E!==0||(T.str=n(g.slice(_,C)),T.pos=C,T.ok=!0),T},parse_link_destination}var parse_link_title,hasRequiredParse_link_title;function requireParse_link_title(){if(hasRequiredParse_link_title)return parse_link_title;hasRequiredParse_link_title=1;var n=requireUtils().unescapeAll;return parse_link_title=function(g,_,x){var S,E,C=0,T=_,R={ok:!1,pos:0,lines:0,str:""};if(T>=x||(E=g.charCodeAt(T),E!==34&&E!==39&&E!==40))return R;for(T++,E===40&&(E=41);T<x;){if(S=g.charCodeAt(T),S===E)return R.pos=T+1,R.lines=C,R.str=n(g.slice(_+1,T)),R.ok=!0,R;if(S===40&&E===41)return R;S===10?C++:S===92&&T+1<x&&(T++,g.charCodeAt(T)===10&&C++),T++}return R},parse_link_title}var hasRequiredHelpers;function requireHelpers(){return hasRequiredHelpers||(hasRequiredHelpers=1,helpers.parseLinkLabel=requireParse_link_label(),helpers.parseLinkDestination=requireParse_link_destination(),helpers.parseLinkTitle=requireParse_link_title()),helpers}var renderer,hasRequiredRenderer;function requireRenderer(){if(hasRequiredRenderer)return renderer;hasRequiredRenderer=1;var n=requireUtils().assign,r=requireUtils().unescapeAll,g=requireUtils().escapeHtml,_={};_.code_inline=function(S,E,C,T,R){var A=S[E];return"<code"+R.renderAttrs(A)+">"+g(A.content)+"</code>"},_.code_block=function(S,E,C,T,R){var A=S[E];return"<pre"+R.renderAttrs(A)+"><code>"+g(S[E].content)+`</code></pre>
`},_.fence=function(S,E,C,T,R){var A=S[E],I=A.info?r(A.info).trim():"",B="",D="",N,M,O,L,F;return I&&(O=I.split(/(\s+)/g),B=O[0],D=O.slice(2).join("")),C.highlight?N=C.highlight(A.content,B,D)||g(A.content):N=g(A.content),N.indexOf("<pre")===0?N+`
`:I?(M=A.attrIndex("class"),L=A.attrs?A.attrs.slice():[],M<0?L.push(["class",C.langPrefix+B]):(L[M]=L[M].slice(),L[M][1]+=" "+C.langPrefix+B),F={attrs:L},"<pre><code"+R.renderAttrs(F)+">"+N+`</code></pre>
`):"<pre><code"+R.renderAttrs(A)+">"+N+`</code></pre>
`},_.image=function(S,E,C,T,R){var A=S[E];return A.attrs[A.attrIndex("alt")][1]=R.renderInlineAsText(A.children,C,T),R.renderToken(S,E,C)},_.hardbreak=function(S,E,C){return C.xhtmlOut?`<br />
`:`<br>
`},_.softbreak=function(S,E,C){return C.breaks?C.xhtmlOut?`<br />
`:`<br>
`:`
`},_.text=function(S,E){return g(S[E].content)},_.html_block=function(S,E){return S[E].content},_.html_inline=function(S,E){return S[E].content};function x(){this.rules=n({},_)}return x.prototype.renderAttrs=function(E){var C,T,R;if(!E.attrs)return"";for(R="",C=0,T=E.attrs.length;C<T;C++)R+=" "+g(E.attrs[C][0])+'="'+g(E.attrs[C][1])+'"';return R},x.prototype.renderToken=function(E,C,T){var R,A="",I=!1,B=E[C];return B.hidden?"":(B.block&&B.nesting!==-1&&C&&E[C-1].hidden&&(A+=`
`),A+=(B.nesting===-1?"</":"<")+B.tag,A+=this.renderAttrs(B),B.nesting===0&&T.xhtmlOut&&(A+=" /"),B.block&&(I=!0,B.nesting===1&&C+1<E.length&&(R=E[C+1],(R.type==="inline"||R.hidden||R.nesting===-1&&R.tag===B.tag)&&(I=!1))),A+=I?`>
`:">",A)},x.prototype.renderInline=function(S,E,C){for(var T,R="",A=this.rules,I=0,B=S.length;I<B;I++)T=S[I].type,typeof A[T]<"u"?R+=A[T](S,I,E,C,this):R+=this.renderToken(S,I,E);return R},x.prototype.renderInlineAsText=function(S,E,C){for(var T="",R=0,A=S.length;R<A;R++)S[R].type==="text"?T+=S[R].content:S[R].type==="image"?T+=this.renderInlineAsText(S[R].children,E,C):S[R].type==="softbreak"&&(T+=`
`);return T},x.prototype.render=function(S,E,C){var T,R,A,I="",B=this.rules;for(T=0,R=S.length;T<R;T++)A=S[T].type,A==="inline"?I+=this.renderInline(S[T].children,E,C):typeof B[A]<"u"?I+=B[A](S,T,E,C,this):I+=this.renderToken(S,T,E,C);return I},renderer=x,renderer}var ruler,hasRequiredRuler;function requireRuler(){if(hasRequiredRuler)return ruler;hasRequiredRuler=1;function n(){this.__rules__=[],this.__cache__=null}return n.prototype.__find__=function(r){for(var g=0;g<this.__rules__.length;g++)if(this.__rules__[g].name===r)return g;return-1},n.prototype.__compile__=function(){var r=this,g=[""];r.__rules__.forEach(function(_){_.enabled&&_.alt.forEach(function(x){g.indexOf(x)<0&&g.push(x)})}),r.__cache__={},g.forEach(function(_){r.__cache__[_]=[],r.__rules__.forEach(function(x){x.enabled&&(_&&x.alt.indexOf(_)<0||r.__cache__[_].push(x.fn))})})},n.prototype.at=function(r,g,_){var x=this.__find__(r),S=_||{};if(x===-1)throw new Error("Parser rule not found: "+r);this.__rules__[x].fn=g,this.__rules__[x].alt=S.alt||[],this.__cache__=null},n.prototype.before=function(r,g,_,x){var S=this.__find__(r),E=x||{};if(S===-1)throw new Error("Parser rule not found: "+r);this.__rules__.splice(S,0,{name:g,enabled:!0,fn:_,alt:E.alt||[]}),this.__cache__=null},n.prototype.after=function(r,g,_,x){var S=this.__find__(r),E=x||{};if(S===-1)throw new Error("Parser rule not found: "+r);this.__rules__.splice(S+1,0,{name:g,enabled:!0,fn:_,alt:E.alt||[]}),this.__cache__=null},n.prototype.push=function(r,g,_){var x=_||{};this.__rules__.push({name:r,enabled:!0,fn:g,alt:x.alt||[]}),this.__cache__=null},n.prototype.enable=function(r,g){Array.isArray(r)||(r=[r]);var _=[];return r.forEach(function(x){var S=this.__find__(x);if(S<0){if(g)return;throw new Error("Rules manager: invalid rule name "+x)}this.__rules__[S].enabled=!0,_.push(x)},this),this.__cache__=null,_},n.prototype.enableOnly=function(r,g){Array.isArray(r)||(r=[r]),this.__rules__.forEach(function(_){_.enabled=!1}),this.enable(r,g)},n.prototype.disable=function(r,g){Array.isArray(r)||(r=[r]);var _=[];return r.forEach(function(x){var S=this.__find__(x);if(S<0){if(g)return;throw new Error("Rules manager: invalid rule name "+x)}this.__rules__[S].enabled=!1,_.push(x)},this),this.__cache__=null,_},n.prototype.getRules=function(r){return this.__cache__===null&&this.__compile__(),this.__cache__[r]||[]},ruler=n,ruler}var normalize,hasRequiredNormalize;function requireNormalize(){if(hasRequiredNormalize)return normalize;hasRequiredNormalize=1;var n=/\r\n?|\n/g,r=/\0/g;return normalize=function(_){var x;x=_.src.replace(n,`
`),x=x.replace(r,"�"),_.src=x},normalize}var block,hasRequiredBlock;function requireBlock(){return hasRequiredBlock||(hasRequiredBlock=1,block=function(r){var g;r.inlineMode?(g=new r.Token("inline","",0),g.content=r.src,g.map=[0,1],g.children=[],r.tokens.push(g)):r.md.block.parse(r.src,r.md,r.env,r.tokens)}),block}var inline,hasRequiredInline;function requireInline(){return hasRequiredInline||(hasRequiredInline=1,inline=function(r){var g=r.tokens,_,x,S;for(x=0,S=g.length;x<S;x++)_=g[x],_.type==="inline"&&r.md.inline.parse(_.content,r.md,r.env,_.children)}),inline}var linkify$1,hasRequiredLinkify$1;function requireLinkify$1(){if(hasRequiredLinkify$1)return linkify$1;hasRequiredLinkify$1=1;var n=requireUtils().arrayReplaceAt;function r(_){return/^<a[>\s]/i.test(_)}function g(_){return/^<\/a\s*>/i.test(_)}return linkify$1=function(x){var S,E,C,T,R,A,I,B,D,N,M,O,L,F,U,j,z=x.tokens,W;if(x.md.options.linkify){for(E=0,C=z.length;E<C;E++)if(!(z[E].type!=="inline"||!x.md.linkify.pretest(z[E].content)))for(T=z[E].children,L=0,S=T.length-1;S>=0;S--){if(A=T[S],A.type==="link_close"){for(S--;T[S].level!==A.level&&T[S].type!=="link_open";)S--;continue}if(A.type==="html_inline"&&(r(A.content)&&L>0&&L--,g(A.content)&&L++),!(L>0)&&A.type==="text"&&x.md.linkify.test(A.content)){for(D=A.content,W=x.md.linkify.match(D),I=[],O=A.level,M=0,W.length>0&&W[0].index===0&&S>0&&T[S-1].type==="text_special"&&(W=W.slice(1)),B=0;B<W.length;B++)F=W[B].url,U=x.md.normalizeLink(F),x.md.validateLink(U)&&(j=W[B].text,W[B].schema?W[B].schema==="mailto:"&&!/^mailto:/i.test(j)?j=x.md.normalizeLinkText("mailto:"+j).replace(/^mailto:/,""):j=x.md.normalizeLinkText(j):j=x.md.normalizeLinkText("http://"+j).replace(/^http:\/\//,""),N=W[B].index,N>M&&(R=new x.Token("text","",0),R.content=D.slice(M,N),R.level=O,I.push(R)),R=new x.Token("link_open","a",1),R.attrs=[["href",U]],R.level=O++,R.markup="linkify",R.info="auto",I.push(R),R=new x.Token("text","",0),R.content=j,R.level=O,I.push(R),R=new x.Token("link_close","a",-1),R.level=--O,R.markup="linkify",R.info="auto",I.push(R),M=W[B].lastIndex);M<D.length&&(R=new x.Token("text","",0),R.content=D.slice(M),R.level=O,I.push(R)),z[E].children=T=n(T,S,I)}}}},linkify$1}var replacements,hasRequiredReplacements;function requireReplacements(){if(hasRequiredReplacements)return replacements;hasRequiredReplacements=1;var n=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,r=/\((c|tm|r)\)/i,g=/\((c|tm|r)\)/ig,_={c:"©",r:"®",tm:"™"};function x(C,T){return _[T.toLowerCase()]}function S(C){var T,R,A=0;for(T=C.length-1;T>=0;T--)R=C[T],R.type==="text"&&!A&&(R.content=R.content.replace(g,x)),R.type==="link_open"&&R.info==="auto"&&A--,R.type==="link_close"&&R.info==="auto"&&A++}function E(C){var T,R,A=0;for(T=C.length-1;T>=0;T--)R=C[T],R.type==="text"&&!A&&n.test(R.content)&&(R.content=R.content.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1—").replace(/(^|\s)--(?=\s|$)/mg,"$1–").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1–")),R.type==="link_open"&&R.info==="auto"&&A--,R.type==="link_close"&&R.info==="auto"&&A++}return replacements=function(T){var R;if(T.md.options.typographer)for(R=T.tokens.length-1;R>=0;R--)T.tokens[R].type==="inline"&&(r.test(T.tokens[R].content)&&S(T.tokens[R].children),n.test(T.tokens[R].content)&&E(T.tokens[R].children))},replacements}var smartquotes,hasRequiredSmartquotes;function requireSmartquotes(){if(hasRequiredSmartquotes)return smartquotes;hasRequiredSmartquotes=1;var n=requireUtils().isWhiteSpace,r=requireUtils().isPunctChar,g=requireUtils().isMdAsciiPunct,_=/['"]/,x=/['"]/g,S="’";function E(T,R,A){return T.slice(0,R)+A+T.slice(R+1)}function C(T,R){var A,I,B,D,N,M,O,L,F,U,j,z,W,X,ie,fe,xe,we,G,J,q;for(G=[],A=0;A<T.length;A++){for(I=T[A],O=T[A].level,xe=G.length-1;xe>=0&&!(G[xe].level<=O);xe--);if(G.length=xe+1,I.type==="text"){B=I.content,N=0,M=B.length;e:for(;N<M&&(x.lastIndex=N,D=x.exec(B),!!D);){if(ie=fe=!0,N=D.index+1,we=D[0]==="'",F=32,D.index-1>=0)F=B.charCodeAt(D.index-1);else for(xe=A-1;xe>=0&&!(T[xe].type==="softbreak"||T[xe].type==="hardbreak");xe--)if(T[xe].content){F=T[xe].content.charCodeAt(T[xe].content.length-1);break}if(U=32,N<M)U=B.charCodeAt(N);else for(xe=A+1;xe<T.length&&!(T[xe].type==="softbreak"||T[xe].type==="hardbreak");xe++)if(T[xe].content){U=T[xe].content.charCodeAt(0);break}if(j=g(F)||r(String.fromCharCode(F)),z=g(U)||r(String.fromCharCode(U)),W=n(F),X=n(U),X?ie=!1:z&&(W||j||(ie=!1)),W?fe=!1:j&&(X||z||(fe=!1)),U===34&&D[0]==='"'&&F>=48&&F<=57&&(fe=ie=!1),ie&&fe&&(ie=j,fe=z),!ie&&!fe){we&&(I.content=E(I.content,D.index,S));continue}if(fe){for(xe=G.length-1;xe>=0&&(L=G[xe],!(G[xe].level<O));xe--)if(L.single===we&&G[xe].level===O){L=G[xe],we?(J=R.md.options.quotes[2],q=R.md.options.quotes[3]):(J=R.md.options.quotes[0],q=R.md.options.quotes[1]),I.content=E(I.content,D.index,q),T[L.token].content=E(T[L.token].content,L.pos,J),N+=q.length-1,L.token===A&&(N+=J.length-1),B=I.content,M=B.length,G.length=xe;continue e}}ie?G.push({token:A,pos:D.index,single:we,level:O}):fe&&we&&(I.content=E(I.content,D.index,S))}}}}return smartquotes=function(R){var A;if(R.md.options.typographer)for(A=R.tokens.length-1;A>=0;A--)R.tokens[A].type!=="inline"||!_.test(R.tokens[A].content)||C(R.tokens[A].children,R)},smartquotes}var text_join,hasRequiredText_join;function requireText_join(){return hasRequiredText_join||(hasRequiredText_join=1,text_join=function(r){var g,_,x,S,E,C,T=r.tokens;for(g=0,_=T.length;g<_;g++)if(T[g].type==="inline"){for(x=T[g].children,E=x.length,S=0;S<E;S++)x[S].type==="text_special"&&(x[S].type="text");for(S=C=0;S<E;S++)x[S].type==="text"&&S+1<E&&x[S+1].type==="text"?x[S+1].content=x[S].content+x[S+1].content:(S!==C&&(x[C]=x[S]),C++);S!==C&&(x.length=C)}}),text_join}var token,hasRequiredToken;function requireToken(){if(hasRequiredToken)return token;hasRequiredToken=1;function n(r,g,_){this.type=r,this.tag=g,this.attrs=null,this.map=null,this.nesting=_,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}return n.prototype.attrIndex=function(g){var _,x,S;if(!this.attrs)return-1;for(_=this.attrs,x=0,S=_.length;x<S;x++)if(_[x][0]===g)return x;return-1},n.prototype.attrPush=function(g){this.attrs?this.attrs.push(g):this.attrs=[g]},n.prototype.attrSet=function(g,_){var x=this.attrIndex(g),S=[g,_];x<0?this.attrPush(S):this.attrs[x]=S},n.prototype.attrGet=function(g){var _=this.attrIndex(g),x=null;return _>=0&&(x=this.attrs[_][1]),x},n.prototype.attrJoin=function(g,_){var x=this.attrIndex(g);x<0?this.attrPush([g,_]):this.attrs[x][1]=this.attrs[x][1]+" "+_},token=n,token}var state_core,hasRequiredState_core;function requireState_core(){if(hasRequiredState_core)return state_core;hasRequiredState_core=1;var n=requireToken();function r(g,_,x){this.src=g,this.env=x,this.tokens=[],this.inlineMode=!1,this.md=_}return r.prototype.Token=n,state_core=r,state_core}var parser_core,hasRequiredParser_core;function requireParser_core(){if(hasRequiredParser_core)return parser_core;hasRequiredParser_core=1;var n=requireRuler(),r=[["normalize",requireNormalize()],["block",requireBlock()],["inline",requireInline()],["linkify",requireLinkify$1()],["replacements",requireReplacements()],["smartquotes",requireSmartquotes()],["text_join",requireText_join()]];function g(){this.ruler=new n;for(var _=0;_<r.length;_++)this.ruler.push(r[_][0],r[_][1])}return g.prototype.process=function(_){var x,S,E;for(E=this.ruler.getRules(""),x=0,S=E.length;x<S;x++)E[x](_)},g.prototype.State=requireState_core(),parser_core=g,parser_core}var table,hasRequiredTable;function requireTable(){if(hasRequiredTable)return table;hasRequiredTable=1;var n=requireUtils().isSpace;function r(_,x){var S=_.bMarks[x]+_.tShift[x],E=_.eMarks[x];return _.src.slice(S,E)}function g(_){var x=[],S=0,E=_.length,C,T=!1,R=0,A="";for(C=_.charCodeAt(S);S<E;)C===124&&(T?(A+=_.substring(R,S-1),R=S):(x.push(A+_.substring(R,S)),A="",R=S+1)),T=C===92,S++,C=_.charCodeAt(S);return x.push(A+_.substring(R)),x}return table=function(x,S,E,C){var T,R,A,I,B,D,N,M,O,L,F,U,j,z,W,X,ie,fe;if(S+2>E||(D=S+1,x.sCount[D]<x.blkIndent)||x.sCount[D]-x.blkIndent>=4||(A=x.bMarks[D]+x.tShift[D],A>=x.eMarks[D])||(ie=x.src.charCodeAt(A++),ie!==124&&ie!==45&&ie!==58)||A>=x.eMarks[D]||(fe=x.src.charCodeAt(A++),fe!==124&&fe!==45&&fe!==58&&!n(fe))||ie===45&&n(fe))return!1;for(;A<x.eMarks[D];){if(T=x.src.charCodeAt(A),T!==124&&T!==45&&T!==58&&!n(T))return!1;A++}for(R=r(x,S+1),N=R.split("|"),L=[],I=0;I<N.length;I++){if(F=N[I].trim(),!F){if(I===0||I===N.length-1)continue;return!1}if(!/^:?-+:?$/.test(F))return!1;F.charCodeAt(F.length-1)===58?L.push(F.charCodeAt(0)===58?"center":"right"):F.charCodeAt(0)===58?L.push("left"):L.push("")}if(R=r(x,S).trim(),R.indexOf("|")===-1||x.sCount[S]-x.blkIndent>=4||(N=g(R),N.length&&N[0]===""&&N.shift(),N.length&&N[N.length-1]===""&&N.pop(),M=N.length,M===0||M!==L.length))return!1;if(C)return!0;for(z=x.parentType,x.parentType="table",X=x.md.block.ruler.getRules("blockquote"),O=x.push("table_open","table",1),O.map=U=[S,0],O=x.push("thead_open","thead",1),O.map=[S,S+1],O=x.push("tr_open","tr",1),O.map=[S,S+1],I=0;I<N.length;I++)O=x.push("th_open","th",1),L[I]&&(O.attrs=[["style","text-align:"+L[I]]]),O=x.push("inline","",0),O.content=N[I].trim(),O.children=[],O=x.push("th_close","th",-1);for(O=x.push("tr_close","tr",-1),O=x.push("thead_close","thead",-1),D=S+2;D<E&&!(x.sCount[D]<x.blkIndent);D++){for(W=!1,I=0,B=X.length;I<B;I++)if(X[I](x,D,E,!0)){W=!0;break}if(W||(R=r(x,D).trim(),!R)||x.sCount[D]-x.blkIndent>=4)break;for(N=g(R),N.length&&N[0]===""&&N.shift(),N.length&&N[N.length-1]===""&&N.pop(),D===S+2&&(O=x.push("tbody_open","tbody",1),O.map=j=[S+2,0]),O=x.push("tr_open","tr",1),O.map=[D,D+1],I=0;I<M;I++)O=x.push("td_open","td",1),L[I]&&(O.attrs=[["style","text-align:"+L[I]]]),O=x.push("inline","",0),O.content=N[I]?N[I].trim():"",O.children=[],O=x.push("td_close","td",-1);O=x.push("tr_close","tr",-1)}return j&&(O=x.push("tbody_close","tbody",-1),j[1]=D),O=x.push("table_close","table",-1),U[1]=D,x.parentType=z,x.line=D,!0},table}var code,hasRequiredCode;function requireCode(){return hasRequiredCode||(hasRequiredCode=1,code=function(r,g,_){var x,S,E;if(r.sCount[g]-r.blkIndent<4)return!1;for(S=x=g+1;x<_;){if(r.isEmpty(x)){x++;continue}if(r.sCount[x]-r.blkIndent>=4){x++,S=x;continue}break}return r.line=S,E=r.push("code_block","code",0),E.content=r.getLines(g,S,4+r.blkIndent,!1)+`
`,E.map=[g,r.line],!0}),code}var fence,hasRequiredFence;function requireFence(){return hasRequiredFence||(hasRequiredFence=1,fence=function(r,g,_,x){var S,E,C,T,R,A,I,B=!1,D=r.bMarks[g]+r.tShift[g],N=r.eMarks[g];if(r.sCount[g]-r.blkIndent>=4||D+3>N||(S=r.src.charCodeAt(D),S!==126&&S!==96)||(R=D,D=r.skipChars(D,S),E=D-R,E<3)||(I=r.src.slice(R,D),C=r.src.slice(D,N),S===96&&C.indexOf(String.fromCharCode(S))>=0))return!1;if(x)return!0;for(T=g;T++,!(T>=_||(D=R=r.bMarks[T]+r.tShift[T],N=r.eMarks[T],D<N&&r.sCount[T]<r.blkIndent));)if(r.src.charCodeAt(D)===S&&!(r.sCount[T]-r.blkIndent>=4)&&(D=r.skipChars(D,S),!(D-R<E)&&(D=r.skipSpaces(D),!(D<N)))){B=!0;break}return E=r.sCount[g],r.line=T+(B?1:0),A=r.push("fence","code",0),A.info=C,A.content=r.getLines(g+1,T,E,!0),A.markup=I,A.map=[g,r.line],!0}),fence}var blockquote,hasRequiredBlockquote;function requireBlockquote(){if(hasRequiredBlockquote)return blockquote;hasRequiredBlockquote=1;var n=requireUtils().isSpace;return blockquote=function(g,_,x,S){var E,C,T,R,A,I,B,D,N,M,O,L,F,U,j,z,W,X,ie,fe,xe=g.lineMax,we=g.bMarks[_]+g.tShift[_],G=g.eMarks[_];if(g.sCount[_]-g.blkIndent>=4||g.src.charCodeAt(we)!==62)return!1;if(S)return!0;for(M=[],O=[],U=[],j=[],X=g.md.block.ruler.getRules("blockquote"),F=g.parentType,g.parentType="blockquote",D=_;D<x&&(fe=g.sCount[D]<g.blkIndent,we=g.bMarks[D]+g.tShift[D],G=g.eMarks[D],!(we>=G));D++){if(g.src.charCodeAt(we++)===62&&!fe){for(R=g.sCount[D]+1,g.src.charCodeAt(we)===32?(we++,R++,E=!1,z=!0):g.src.charCodeAt(we)===9?(z=!0,(g.bsCount[D]+R)%4===3?(we++,R++,E=!1):E=!0):z=!1,N=R,M.push(g.bMarks[D]),g.bMarks[D]=we;we<G&&(C=g.src.charCodeAt(we),n(C));){C===9?N+=4-(N+g.bsCount[D]+(E?1:0))%4:N++;we++}I=we>=G,O.push(g.bsCount[D]),g.bsCount[D]=g.sCount[D]+1+(z?1:0),U.push(g.sCount[D]),g.sCount[D]=N-R,j.push(g.tShift[D]),g.tShift[D]=we-g.bMarks[D];continue}if(I)break;for(W=!1,T=0,A=X.length;T<A;T++)if(X[T](g,D,x,!0)){W=!0;break}if(W){g.lineMax=D,g.blkIndent!==0&&(M.push(g.bMarks[D]),O.push(g.bsCount[D]),j.push(g.tShift[D]),U.push(g.sCount[D]),g.sCount[D]-=g.blkIndent);break}M.push(g.bMarks[D]),O.push(g.bsCount[D]),j.push(g.tShift[D]),U.push(g.sCount[D]),g.sCount[D]=-1}for(L=g.blkIndent,g.blkIndent=0,ie=g.push("blockquote_open","blockquote",1),ie.markup=">",ie.map=B=[_,0],g.md.block.tokenize(g,_,D),ie=g.push("blockquote_close","blockquote",-1),ie.markup=">",g.lineMax=xe,g.parentType=F,B[1]=g.line,T=0;T<j.length;T++)g.bMarks[T+_]=M[T],g.tShift[T+_]=j[T],g.sCount[T+_]=U[T],g.bsCount[T+_]=O[T];return g.blkIndent=L,!0},blockquote}var hr,hasRequiredHr;function requireHr(){if(hasRequiredHr)return hr;hasRequiredHr=1;var n=requireUtils().isSpace;return hr=function(g,_,x,S){var E,C,T,R,A=g.bMarks[_]+g.tShift[_],I=g.eMarks[_];if(g.sCount[_]-g.blkIndent>=4||(E=g.src.charCodeAt(A++),E!==42&&E!==45&&E!==95))return!1;for(C=1;A<I;){if(T=g.src.charCodeAt(A++),T!==E&&!n(T))return!1;T===E&&C++}return C<3?!1:(S||(g.line=_+1,R=g.push("hr","hr",0),R.map=[_,g.line],R.markup=Array(C+1).join(String.fromCharCode(E))),!0)},hr}var list,hasRequiredList;function requireList(){if(hasRequiredList)return list;hasRequiredList=1;var n=requireUtils().isSpace;function r(x,S){var E,C,T,R;return C=x.bMarks[S]+x.tShift[S],T=x.eMarks[S],E=x.src.charCodeAt(C++),E!==42&&E!==45&&E!==43||C<T&&(R=x.src.charCodeAt(C),!n(R))?-1:C}function g(x,S){var E,C=x.bMarks[S]+x.tShift[S],T=C,R=x.eMarks[S];if(T+1>=R||(E=x.src.charCodeAt(T++),E<48||E>57))return-1;for(;;){if(T>=R)return-1;if(E=x.src.charCodeAt(T++),E>=48&&E<=57){if(T-C>=10)return-1;continue}if(E===41||E===46)break;return-1}return T<R&&(E=x.src.charCodeAt(T),!n(E))?-1:T}function _(x,S){var E,C,T=x.level+2;for(E=S+2,C=x.tokens.length-2;E<C;E++)x.tokens[E].level===T&&x.tokens[E].type==="paragraph_open"&&(x.tokens[E+2].hidden=!0,x.tokens[E].hidden=!0,E+=2)}return list=function(S,E,C,T){var R,A,I,B,D,N,M,O,L,F,U,j,z,W,X,ie,fe,xe,we,G,J,q,H,ve,Z,ce,ue,se=E,te=!1,Y=!0;if(S.sCount[se]-S.blkIndent>=4||S.listIndent>=0&&S.sCount[se]-S.listIndent>=4&&S.sCount[se]<S.blkIndent)return!1;if(T&&S.parentType==="paragraph"&&S.sCount[se]>=S.blkIndent&&(te=!0),(q=g(S,se))>=0){if(M=!0,ve=S.bMarks[se]+S.tShift[se],z=Number(S.src.slice(ve,q-1)),te&&z!==1)return!1}else if((q=r(S,se))>=0)M=!1;else return!1;if(te&&S.skipSpaces(q)>=S.eMarks[se])return!1;if(T)return!0;for(j=S.src.charCodeAt(q-1),U=S.tokens.length,M?(ue=S.push("ordered_list_open","ol",1),z!==1&&(ue.attrs=[["start",z]])):ue=S.push("bullet_list_open","ul",1),ue.map=F=[se,0],ue.markup=String.fromCharCode(j),H=!1,ce=S.md.block.ruler.getRules("list"),fe=S.parentType,S.parentType="list";se<C;){for(J=q,W=S.eMarks[se],N=X=S.sCount[se]+q-(S.bMarks[se]+S.tShift[se]);J<W;){if(R=S.src.charCodeAt(J),R===9)X+=4-(X+S.bsCount[se])%4;else if(R===32)X++;else break;J++}if(A=J,A>=W?D=1:D=X-N,D>4&&(D=1),B=N+D,ue=S.push("list_item_open","li",1),ue.markup=String.fromCharCode(j),ue.map=O=[se,0],M&&(ue.info=S.src.slice(ve,q-1)),G=S.tight,we=S.tShift[se],xe=S.sCount[se],ie=S.listIndent,S.listIndent=S.blkIndent,S.blkIndent=B,S.tight=!0,S.tShift[se]=A-S.bMarks[se],S.sCount[se]=X,A>=W&&S.isEmpty(se+1)?S.line=Math.min(S.line+2,C):S.md.block.tokenize(S,se,C,!0),(!S.tight||H)&&(Y=!1),H=S.line-se>1&&S.isEmpty(S.line-1),S.blkIndent=S.listIndent,S.listIndent=ie,S.tShift[se]=we,S.sCount[se]=xe,S.tight=G,ue=S.push("list_item_close","li",-1),ue.markup=String.fromCharCode(j),se=S.line,O[1]=se,se>=C||S.sCount[se]<S.blkIndent||S.sCount[se]-S.blkIndent>=4)break;for(Z=!1,I=0,L=ce.length;I<L;I++)if(ce[I](S,se,C,!0)){Z=!0;break}if(Z)break;if(M){if(q=g(S,se),q<0)break;ve=S.bMarks[se]+S.tShift[se]}else if(q=r(S,se),q<0)break;if(j!==S.src.charCodeAt(q-1))break}return M?ue=S.push("ordered_list_close","ol",-1):ue=S.push("bullet_list_close","ul",-1),ue.markup=String.fromCharCode(j),F[1]=se,S.line=se,S.parentType=fe,Y&&_(S,U),!0},list}var reference,hasRequiredReference;function requireReference(){if(hasRequiredReference)return reference;hasRequiredReference=1;var n=requireUtils().normalizeReference,r=requireUtils().isSpace;return reference=function(_,x,S,E){var C,T,R,A,I,B,D,N,M,O,L,F,U,j,z,W,X=0,ie=_.bMarks[x]+_.tShift[x],fe=_.eMarks[x],xe=x+1;if(_.sCount[x]-_.blkIndent>=4||_.src.charCodeAt(ie)!==91)return!1;for(;++ie<fe;)if(_.src.charCodeAt(ie)===93&&_.src.charCodeAt(ie-1)!==92){if(ie+1===fe||_.src.charCodeAt(ie+1)!==58)return!1;break}for(A=_.lineMax,z=_.md.block.ruler.getRules("reference"),O=_.parentType,_.parentType="reference";xe<A&&!_.isEmpty(xe);xe++)if(!(_.sCount[xe]-_.blkIndent>3)&&!(_.sCount[xe]<0)){for(j=!1,B=0,D=z.length;B<D;B++)if(z[B](_,xe,A,!0)){j=!0;break}if(j)break}for(U=_.getLines(x,xe,_.blkIndent,!1).trim(),fe=U.length,ie=1;ie<fe;ie++){if(C=U.charCodeAt(ie),C===91)return!1;if(C===93){M=ie;break}else C===10?X++:C===92&&(ie++,ie<fe&&U.charCodeAt(ie)===10&&X++)}if(M<0||U.charCodeAt(M+1)!==58)return!1;for(ie=M+2;ie<fe;ie++)if(C=U.charCodeAt(ie),C===10)X++;else if(!r(C))break;if(L=_.md.helpers.parseLinkDestination(U,ie,fe),!L.ok||(I=_.md.normalizeLink(L.str),!_.md.validateLink(I)))return!1;for(ie=L.pos,X+=L.lines,T=ie,R=X,F=ie;ie<fe;ie++)if(C=U.charCodeAt(ie),C===10)X++;else if(!r(C))break;for(L=_.md.helpers.parseLinkTitle(U,ie,fe),ie<fe&&F!==ie&&L.ok?(W=L.str,ie=L.pos,X+=L.lines):(W="",ie=T,X=R);ie<fe&&(C=U.charCodeAt(ie),!!r(C));)ie++;if(ie<fe&&U.charCodeAt(ie)!==10&&W)for(W="",ie=T,X=R;ie<fe&&(C=U.charCodeAt(ie),!!r(C));)ie++;return ie<fe&&U.charCodeAt(ie)!==10||(N=n(U.slice(1,M)),!N)?!1:(E||(typeof _.env.references>"u"&&(_.env.references={}),typeof _.env.references[N]>"u"&&(_.env.references[N]={title:W,href:I}),_.parentType=O,_.line=x+X+1),!0)},reference}var html_blocks,hasRequiredHtml_blocks;function requireHtml_blocks(){return hasRequiredHtml_blocks||(hasRequiredHtml_blocks=1,html_blocks=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]),html_blocks}var html_re={},hasRequiredHtml_re;function requireHtml_re(){if(hasRequiredHtml_re)return html_re;hasRequiredHtml_re=1;var n="[a-zA-Z_:][a-zA-Z0-9:._-]*",r="[^\"'=<>`\\x00-\\x20]+",g="'[^']*'",_='"[^"]*"',x="(?:"+r+"|"+g+"|"+_+")",S="(?:\\s+"+n+"(?:\\s*=\\s*"+x+")?)",E="<[A-Za-z][A-Za-z0-9\\-]*"+S+"*\\s*\\/?>",C="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",T="<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->",R="<[?][\\s\\S]*?[?]>",A="<![A-Z]+\\s+[^>]*>",I="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",B=new RegExp("^(?:"+E+"|"+C+"|"+T+"|"+R+"|"+A+"|"+I+")"),D=new RegExp("^(?:"+E+"|"+C+")");return html_re.HTML_TAG_RE=B,html_re.HTML_OPEN_CLOSE_TAG_RE=D,html_re}var html_block,hasRequiredHtml_block;function requireHtml_block(){if(hasRequiredHtml_block)return html_block;hasRequiredHtml_block=1;var n=requireHtml_blocks(),r=requireHtml_re().HTML_OPEN_CLOSE_TAG_RE,g=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+n.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(r.source+"\\s*$"),/^$/,!1]];return html_block=function(x,S,E,C){var T,R,A,I,B=x.bMarks[S]+x.tShift[S],D=x.eMarks[S];if(x.sCount[S]-x.blkIndent>=4||!x.md.options.html||x.src.charCodeAt(B)!==60)return!1;for(I=x.src.slice(B,D),T=0;T<g.length&&!g[T][0].test(I);T++);if(T===g.length)return!1;if(C)return g[T][2];if(R=S+1,!g[T][1].test(I)){for(;R<E&&!(x.sCount[R]<x.blkIndent);R++)if(B=x.bMarks[R]+x.tShift[R],D=x.eMarks[R],I=x.src.slice(B,D),g[T][1].test(I)){I.length!==0&&R++;break}}return x.line=R,A=x.push("html_block","",0),A.map=[S,R],A.content=x.getLines(S,R,x.blkIndent,!0),!0},html_block}var heading,hasRequiredHeading;function requireHeading(){if(hasRequiredHeading)return heading;hasRequiredHeading=1;var n=requireUtils().isSpace;return heading=function(g,_,x,S){var E,C,T,R,A=g.bMarks[_]+g.tShift[_],I=g.eMarks[_];if(g.sCount[_]-g.blkIndent>=4||(E=g.src.charCodeAt(A),E!==35||A>=I))return!1;for(C=1,E=g.src.charCodeAt(++A);E===35&&A<I&&C<=6;)C++,E=g.src.charCodeAt(++A);return C>6||A<I&&!n(E)?!1:(S||(I=g.skipSpacesBack(I,A),T=g.skipCharsBack(I,35,A),T>A&&n(g.src.charCodeAt(T-1))&&(I=T),g.line=_+1,R=g.push("heading_open","h"+String(C),1),R.markup="########".slice(0,C),R.map=[_,g.line],R=g.push("inline","",0),R.content=g.src.slice(A,I).trim(),R.map=[_,g.line],R.children=[],R=g.push("heading_close","h"+String(C),-1),R.markup="########".slice(0,C)),!0)},heading}var lheading,hasRequiredLheading;function requireLheading(){return hasRequiredLheading||(hasRequiredLheading=1,lheading=function(r,g,_){var x,S,E,C,T,R,A,I,B,D=g+1,N,M=r.md.block.ruler.getRules("paragraph");if(r.sCount[g]-r.blkIndent>=4)return!1;for(N=r.parentType,r.parentType="paragraph";D<_&&!r.isEmpty(D);D++)if(!(r.sCount[D]-r.blkIndent>3)){if(r.sCount[D]>=r.blkIndent&&(R=r.bMarks[D]+r.tShift[D],A=r.eMarks[D],R<A&&(B=r.src.charCodeAt(R),(B===45||B===61)&&(R=r.skipChars(R,B),R=r.skipSpaces(R),R>=A)))){I=B===61?1:2;break}if(!(r.sCount[D]<0)){for(S=!1,E=0,C=M.length;E<C;E++)if(M[E](r,D,_,!0)){S=!0;break}if(S)break}}return I?(x=r.getLines(g,D,r.blkIndent,!1).trim(),r.line=D+1,T=r.push("heading_open","h"+String(I),1),T.markup=String.fromCharCode(B),T.map=[g,r.line],T=r.push("inline","",0),T.content=x,T.map=[g,r.line-1],T.children=[],T=r.push("heading_close","h"+String(I),-1),T.markup=String.fromCharCode(B),r.parentType=N,!0):!1}),lheading}var paragraph,hasRequiredParagraph;function requireParagraph(){return hasRequiredParagraph||(hasRequiredParagraph=1,paragraph=function(r,g,_){var x,S,E,C,T,R,A=g+1,I=r.md.block.ruler.getRules("paragraph");for(R=r.parentType,r.parentType="paragraph";A<_&&!r.isEmpty(A);A++)if(!(r.sCount[A]-r.blkIndent>3)&&!(r.sCount[A]<0)){for(S=!1,E=0,C=I.length;E<C;E++)if(I[E](r,A,_,!0)){S=!0;break}if(S)break}return x=r.getLines(g,A,r.blkIndent,!1).trim(),r.line=A,T=r.push("paragraph_open","p",1),T.map=[g,r.line],T=r.push("inline","",0),T.content=x,T.map=[g,r.line],T.children=[],T=r.push("paragraph_close","p",-1),r.parentType=R,!0}),paragraph}var state_block,hasRequiredState_block;function requireState_block(){if(hasRequiredState_block)return state_block;hasRequiredState_block=1;var n=requireToken(),r=requireUtils().isSpace;function g(_,x,S,E){var C,T,R,A,I,B,D,N;for(this.src=_,this.md=x,this.env=S,this.tokens=E,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0,this.result="",T=this.src,N=!1,R=A=B=D=0,I=T.length;A<I;A++){if(C=T.charCodeAt(A),!N)if(r(C)){B++,C===9?D+=4-D%4:D++;continue}else N=!0;(C===10||A===I-1)&&(C!==10&&A++,this.bMarks.push(R),this.eMarks.push(A),this.tShift.push(B),this.sCount.push(D),this.bsCount.push(0),N=!1,B=0,D=0,R=A+1)}this.bMarks.push(T.length),this.eMarks.push(T.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}return g.prototype.push=function(_,x,S){var E=new n(_,x,S);return E.block=!0,S<0&&this.level--,E.level=this.level,S>0&&this.level++,this.tokens.push(E),E},g.prototype.isEmpty=function(x){return this.bMarks[x]+this.tShift[x]>=this.eMarks[x]},g.prototype.skipEmptyLines=function(x){for(var S=this.lineMax;x<S&&!(this.bMarks[x]+this.tShift[x]<this.eMarks[x]);x++);return x},g.prototype.skipSpaces=function(x){for(var S,E=this.src.length;x<E&&(S=this.src.charCodeAt(x),!!r(S));x++);return x},g.prototype.skipSpacesBack=function(x,S){if(x<=S)return x;for(;x>S;)if(!r(this.src.charCodeAt(--x)))return x+1;return x},g.prototype.skipChars=function(x,S){for(var E=this.src.length;x<E&&this.src.charCodeAt(x)===S;x++);return x},g.prototype.skipCharsBack=function(x,S,E){if(x<=E)return x;for(;x>E;)if(S!==this.src.charCodeAt(--x))return x+1;return x},g.prototype.getLines=function(x,S,E,C){var T,R,A,I,B,D,N,M=x;if(x>=S)return"";for(D=new Array(S-x),T=0;M<S;M++,T++){for(R=0,N=I=this.bMarks[M],M+1<S||C?B=this.eMarks[M]+1:B=this.eMarks[M];I<B&&R<E;){if(A=this.src.charCodeAt(I),r(A))A===9?R+=4-(R+this.bsCount[M])%4:R++;else if(I-N<this.tShift[M])R++;else break;I++}R>E?D[T]=new Array(R-E+1).join(" ")+this.src.slice(I,B):D[T]=this.src.slice(I,B)}return D.join("")},g.prototype.Token=n,state_block=g,state_block}var parser_block,hasRequiredParser_block;function requireParser_block(){if(hasRequiredParser_block)return parser_block;hasRequiredParser_block=1;var n=requireRuler(),r=[["table",requireTable(),["paragraph","reference"]],["code",requireCode()],["fence",requireFence(),["paragraph","reference","blockquote","list"]],["blockquote",requireBlockquote(),["paragraph","reference","blockquote","list"]],["hr",requireHr(),["paragraph","reference","blockquote","list"]],["list",requireList(),["paragraph","reference","blockquote"]],["reference",requireReference()],["html_block",requireHtml_block(),["paragraph","reference","blockquote"]],["heading",requireHeading(),["paragraph","reference","blockquote"]],["lheading",requireLheading()],["paragraph",requireParagraph()]];function g(){this.ruler=new n;for(var _=0;_<r.length;_++)this.ruler.push(r[_][0],r[_][1],{alt:(r[_][2]||[]).slice()})}return g.prototype.tokenize=function(_,x,S){for(var E,C,T,R=this.ruler.getRules(""),A=R.length,I=x,B=!1,D=_.md.options.maxNesting;I<S&&(_.line=I=_.skipEmptyLines(I),!(I>=S||_.sCount[I]<_.blkIndent));){if(_.level>=D){_.line=S;break}for(T=_.line,C=0;C<A;C++)if(E=R[C](_,I,S,!1),E){if(T>=_.line)throw new Error("block rule didn't increment state.line");break}if(!E)throw new Error("none of the block rules matched");_.tight=!B,_.isEmpty(_.line-1)&&(B=!0),I=_.line,I<S&&_.isEmpty(I)&&(B=!0,I++,_.line=I)}},g.prototype.parse=function(_,x,S,E){var C;_&&(C=new this.State(_,x,S,E),this.tokenize(C,C.line,C.lineMax))},g.prototype.State=requireState_block(),parser_block=g,parser_block}var text,hasRequiredText;function requireText(){if(hasRequiredText)return text;hasRequiredText=1;function n(r){switch(r){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}return text=function(g,_){for(var x=g.pos;x<g.posMax&&!n(g.src.charCodeAt(x));)x++;return x===g.pos?!1:(_||(g.pending+=g.src.slice(g.pos,x)),g.pos=x,!0)},text}var linkify,hasRequiredLinkify;function requireLinkify(){if(hasRequiredLinkify)return linkify;hasRequiredLinkify=1;var n=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;return linkify=function(g,_){var x,S,E,C,T,R,A,I;return!g.md.options.linkify||g.linkLevel>0||(x=g.pos,S=g.posMax,x+3>S)||g.src.charCodeAt(x)!==58||g.src.charCodeAt(x+1)!==47||g.src.charCodeAt(x+2)!==47||(E=g.pending.match(n),!E)||(C=E[1],T=g.md.linkify.matchAtStart(g.src.slice(x-C.length)),!T)||(R=T.url,R.length<=C.length)||(R=R.replace(/\*+$/,""),A=g.md.normalizeLink(R),!g.md.validateLink(A))?!1:(_||(g.pending=g.pending.slice(0,-C.length),I=g.push("link_open","a",1),I.attrs=[["href",A]],I.markup="linkify",I.info="auto",I=g.push("text","",0),I.content=g.md.normalizeLinkText(R),I=g.push("link_close","a",-1),I.markup="linkify",I.info="auto"),g.pos+=R.length-C.length,!0)},linkify}var newline,hasRequiredNewline;function requireNewline(){if(hasRequiredNewline)return newline;hasRequiredNewline=1;var n=requireUtils().isSpace;return newline=function(g,_){var x,S,E,C=g.pos;if(g.src.charCodeAt(C)!==10)return!1;if(x=g.pending.length-1,S=g.posMax,!_)if(x>=0&&g.pending.charCodeAt(x)===32)if(x>=1&&g.pending.charCodeAt(x-1)===32){for(E=x-1;E>=1&&g.pending.charCodeAt(E-1)===32;)E--;g.pending=g.pending.slice(0,E),g.push("hardbreak","br",0)}else g.pending=g.pending.slice(0,-1),g.push("softbreak","br",0);else g.push("softbreak","br",0);for(C++;C<S&&n(g.src.charCodeAt(C));)C++;return g.pos=C,!0},newline}var _escape,hasRequired_escape;function require_escape(){if(hasRequired_escape)return _escape;hasRequired_escape=1;for(var n=requireUtils().isSpace,r=[],g=0;g<256;g++)r.push(0);return"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(_){r[_.charCodeAt(0)]=1}),_escape=function(x,S){var E,C,T,R,A,I=x.pos,B=x.posMax;if(x.src.charCodeAt(I)!==92||(I++,I>=B))return!1;if(E=x.src.charCodeAt(I),E===10){for(S||x.push("hardbreak","br",0),I++;I<B&&(E=x.src.charCodeAt(I),!!n(E));)I++;return x.pos=I,!0}return R=x.src[I],E>=55296&&E<=56319&&I+1<B&&(C=x.src.charCodeAt(I+1),C>=56320&&C<=57343&&(R+=x.src[I+1],I++)),T="\\"+R,S||(A=x.push("text_special","",0),E<256&&r[E]!==0?A.content=R:A.content=T,A.markup=T,A.info="escape"),x.pos=I+1,!0},_escape}var backticks,hasRequiredBackticks;function requireBackticks(){return hasRequiredBackticks||(hasRequiredBackticks=1,backticks=function(r,g){var _,x,S,E,C,T,R,A,I=r.pos,B=r.src.charCodeAt(I);if(B!==96)return!1;for(_=I,I++,x=r.posMax;I<x&&r.src.charCodeAt(I)===96;)I++;if(S=r.src.slice(_,I),R=S.length,r.backticksScanned&&(r.backticks[R]||0)<=_)return g||(r.pending+=S),r.pos+=R,!0;for(T=I;(C=r.src.indexOf("`",T))!==-1;){for(T=C+1;T<x&&r.src.charCodeAt(T)===96;)T++;if(A=T-C,A===R)return g||(E=r.push("code_inline","code",0),E.markup=S,E.content=r.src.slice(I,C).replace(/\n/g," ").replace(/^ (.+) $/,"$1")),r.pos=T,!0;r.backticks[A]=C}return r.backticksScanned=!0,g||(r.pending+=S),r.pos+=R,!0}),backticks}var strikethrough={},hasRequiredStrikethrough;function requireStrikethrough(){if(hasRequiredStrikethrough)return strikethrough;hasRequiredStrikethrough=1,strikethrough.tokenize=function(g,_){var x,S,E,C,T,R=g.pos,A=g.src.charCodeAt(R);if(_||A!==126||(S=g.scanDelims(g.pos,!0),C=S.length,T=String.fromCharCode(A),C<2))return!1;for(C%2&&(E=g.push("text","",0),E.content=T,C--),x=0;x<C;x+=2)E=g.push("text","",0),E.content=T+T,g.delimiters.push({marker:A,length:0,token:g.tokens.length-1,end:-1,open:S.can_open,close:S.can_close});return g.pos+=S.length,!0};function n(r,g){var _,x,S,E,C,T=[],R=g.length;for(_=0;_<R;_++)S=g[_],S.marker===126&&S.end!==-1&&(E=g[S.end],C=r.tokens[S.token],C.type="s_open",C.tag="s",C.nesting=1,C.markup="~~",C.content="",C=r.tokens[E.token],C.type="s_close",C.tag="s",C.nesting=-1,C.markup="~~",C.content="",r.tokens[E.token-1].type==="text"&&r.tokens[E.token-1].content==="~"&&T.push(E.token-1));for(;T.length;){for(_=T.pop(),x=_+1;x<r.tokens.length&&r.tokens[x].type==="s_close";)x++;x--,_!==x&&(C=r.tokens[x],r.tokens[x]=r.tokens[_],r.tokens[_]=C)}}return strikethrough.postProcess=function(g){var _,x=g.tokens_meta,S=g.tokens_meta.length;for(n(g,g.delimiters),_=0;_<S;_++)x[_]&&x[_].delimiters&&n(g,x[_].delimiters)},strikethrough}var emphasis={},hasRequiredEmphasis;function requireEmphasis(){if(hasRequiredEmphasis)return emphasis;hasRequiredEmphasis=1,emphasis.tokenize=function(g,_){var x,S,E,C=g.pos,T=g.src.charCodeAt(C);if(_||T!==95&&T!==42)return!1;for(S=g.scanDelims(g.pos,T===42),x=0;x<S.length;x++)E=g.push("text","",0),E.content=String.fromCharCode(T),g.delimiters.push({marker:T,length:S.length,token:g.tokens.length-1,end:-1,open:S.can_open,close:S.can_close});return g.pos+=S.length,!0};function n(r,g){var _,x,S,E,C,T,R=g.length;for(_=R-1;_>=0;_--)x=g[_],!(x.marker!==95&&x.marker!==42)&&x.end!==-1&&(S=g[x.end],T=_>0&&g[_-1].end===x.end+1&&g[_-1].marker===x.marker&&g[_-1].token===x.token-1&&g[x.end+1].token===S.token+1,C=String.fromCharCode(x.marker),E=r.tokens[x.token],E.type=T?"strong_open":"em_open",E.tag=T?"strong":"em",E.nesting=1,E.markup=T?C+C:C,E.content="",E=r.tokens[S.token],E.type=T?"strong_close":"em_close",E.tag=T?"strong":"em",E.nesting=-1,E.markup=T?C+C:C,E.content="",T&&(r.tokens[g[_-1].token].content="",r.tokens[g[x.end+1].token].content="",_--))}return emphasis.postProcess=function(g){var _,x=g.tokens_meta,S=g.tokens_meta.length;for(n(g,g.delimiters),_=0;_<S;_++)x[_]&&x[_].delimiters&&n(g,x[_].delimiters)},emphasis}var link,hasRequiredLink;function requireLink(){if(hasRequiredLink)return link;hasRequiredLink=1;var n=requireUtils().normalizeReference,r=requireUtils().isSpace;return link=function(_,x){var S,E,C,T,R,A,I,B,D,N="",M="",O=_.pos,L=_.posMax,F=_.pos,U=!0;if(_.src.charCodeAt(_.pos)!==91||(R=_.pos+1,T=_.md.helpers.parseLinkLabel(_,_.pos,!0),T<0))return!1;if(A=T+1,A<L&&_.src.charCodeAt(A)===40){for(U=!1,A++;A<L&&(E=_.src.charCodeAt(A),!(!r(E)&&E!==10));A++);if(A>=L)return!1;if(F=A,I=_.md.helpers.parseLinkDestination(_.src,A,_.posMax),I.ok){for(N=_.md.normalizeLink(I.str),_.md.validateLink(N)?A=I.pos:N="",F=A;A<L&&(E=_.src.charCodeAt(A),!(!r(E)&&E!==10));A++);if(I=_.md.helpers.parseLinkTitle(_.src,A,_.posMax),A<L&&F!==A&&I.ok)for(M=I.str,A=I.pos;A<L&&(E=_.src.charCodeAt(A),!(!r(E)&&E!==10));A++);}(A>=L||_.src.charCodeAt(A)!==41)&&(U=!0),A++}if(U){if(typeof _.env.references>"u")return!1;if(A<L&&_.src.charCodeAt(A)===91?(F=A+1,A=_.md.helpers.parseLinkLabel(_,A),A>=0?C=_.src.slice(F,A++):A=T+1):A=T+1,C||(C=_.src.slice(R,T)),B=_.env.references[n(C)],!B)return _.pos=O,!1;N=B.href,M=B.title}return x||(_.pos=R,_.posMax=T,D=_.push("link_open","a",1),D.attrs=S=[["href",N]],M&&S.push(["title",M]),_.linkLevel++,_.md.inline.tokenize(_),_.linkLevel--,D=_.push("link_close","a",-1)),_.pos=A,_.posMax=L,!0},link}var image,hasRequiredImage;function requireImage(){if(hasRequiredImage)return image;hasRequiredImage=1;var n=requireUtils().normalizeReference,r=requireUtils().isSpace;return image=function(_,x){var S,E,C,T,R,A,I,B,D,N,M,O,L,F="",U=_.pos,j=_.posMax;if(_.src.charCodeAt(_.pos)!==33||_.src.charCodeAt(_.pos+1)!==91||(A=_.pos+2,R=_.md.helpers.parseLinkLabel(_,_.pos+1,!1),R<0))return!1;if(I=R+1,I<j&&_.src.charCodeAt(I)===40){for(I++;I<j&&(E=_.src.charCodeAt(I),!(!r(E)&&E!==10));I++);if(I>=j)return!1;for(L=I,D=_.md.helpers.parseLinkDestination(_.src,I,_.posMax),D.ok&&(F=_.md.normalizeLink(D.str),_.md.validateLink(F)?I=D.pos:F=""),L=I;I<j&&(E=_.src.charCodeAt(I),!(!r(E)&&E!==10));I++);if(D=_.md.helpers.parseLinkTitle(_.src,I,_.posMax),I<j&&L!==I&&D.ok)for(N=D.str,I=D.pos;I<j&&(E=_.src.charCodeAt(I),!(!r(E)&&E!==10));I++);else N="";if(I>=j||_.src.charCodeAt(I)!==41)return _.pos=U,!1;I++}else{if(typeof _.env.references>"u")return!1;if(I<j&&_.src.charCodeAt(I)===91?(L=I+1,I=_.md.helpers.parseLinkLabel(_,I),I>=0?T=_.src.slice(L,I++):I=R+1):I=R+1,T||(T=_.src.slice(A,R)),B=_.env.references[n(T)],!B)return _.pos=U,!1;F=B.href,N=B.title}return x||(C=_.src.slice(A,R),_.md.inline.parse(C,_.md,_.env,O=[]),M=_.push("image","img",0),M.attrs=S=[["src",F],["alt",""]],M.children=O,M.content=C,N&&S.push(["title",N])),_.pos=I,_.posMax=j,!0},image}var autolink,hasRequiredAutolink;function requireAutolink(){if(hasRequiredAutolink)return autolink;hasRequiredAutolink=1;var n=/^([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,r=/^([a-zA-Z][a-zA-Z0-9+.\-]{1,31}):([^<>\x00-\x20]*)$/;return autolink=function(_,x){var S,E,C,T,R,A,I=_.pos;if(_.src.charCodeAt(I)!==60)return!1;for(R=_.pos,A=_.posMax;;){if(++I>=A||(T=_.src.charCodeAt(I),T===60))return!1;if(T===62)break}return S=_.src.slice(R+1,I),r.test(S)?(E=_.md.normalizeLink(S),_.md.validateLink(E)?(x||(C=_.push("link_open","a",1),C.attrs=[["href",E]],C.markup="autolink",C.info="auto",C=_.push("text","",0),C.content=_.md.normalizeLinkText(S),C=_.push("link_close","a",-1),C.markup="autolink",C.info="auto"),_.pos+=S.length+2,!0):!1):n.test(S)?(E=_.md.normalizeLink("mailto:"+S),_.md.validateLink(E)?(x||(C=_.push("link_open","a",1),C.attrs=[["href",E]],C.markup="autolink",C.info="auto",C=_.push("text","",0),C.content=_.md.normalizeLinkText(S),C=_.push("link_close","a",-1),C.markup="autolink",C.info="auto"),_.pos+=S.length+2,!0):!1):!1},autolink}var html_inline,hasRequiredHtml_inline;function requireHtml_inline(){if(hasRequiredHtml_inline)return html_inline;hasRequiredHtml_inline=1;var n=requireHtml_re().HTML_TAG_RE;function r(x){return/^<a[>\s]/i.test(x)}function g(x){return/^<\/a\s*>/i.test(x)}function _(x){var S=x|32;return S>=97&&S<=122}return html_inline=function(S,E){var C,T,R,A,I=S.pos;return!S.md.options.html||(R=S.posMax,S.src.charCodeAt(I)!==60||I+2>=R)||(C=S.src.charCodeAt(I+1),C!==33&&C!==63&&C!==47&&!_(C))||(T=S.src.slice(I).match(n),!T)?!1:(E||(A=S.push("html_inline","",0),A.content=T[0],r(A.content)&&S.linkLevel++,g(A.content)&&S.linkLevel--),S.pos+=T[0].length,!0)},html_inline}var entity,hasRequiredEntity;function requireEntity(){if(hasRequiredEntity)return entity;hasRequiredEntity=1;var n=requireEntities(),r=requireUtils().has,g=requireUtils().isValidEntityCode,_=requireUtils().fromCodePoint,x=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,S=/^&([a-z][a-z0-9]{1,31});/i;return entity=function(C,T){var R,A,I,B,D=C.pos,N=C.posMax;if(C.src.charCodeAt(D)!==38||D+1>=N)return!1;if(R=C.src.charCodeAt(D+1),R===35){if(I=C.src.slice(D).match(x),I)return T||(A=I[1][0].toLowerCase()==="x"?parseInt(I[1].slice(1),16):parseInt(I[1],10),B=C.push("text_special","",0),B.content=g(A)?_(A):_(65533),B.markup=I[0],B.info="entity"),C.pos+=I[0].length,!0}else if(I=C.src.slice(D).match(S),I&&r(n,I[1]))return T||(B=C.push("text_special","",0),B.content=n[I[1]],B.markup=I[0],B.info="entity"),C.pos+=I[0].length,!0;return!1},entity}var balance_pairs,hasRequiredBalance_pairs;function requireBalance_pairs(){if(hasRequiredBalance_pairs)return balance_pairs;hasRequiredBalance_pairs=1;function n(r){var g,_,x,S,E,C,T,R,A={},I=r.length;if(I){var B=0,D=-2,N=[];for(g=0;g<I;g++)if(x=r[g],N.push(0),(r[B].marker!==x.marker||D!==x.token-1)&&(B=g),D=x.token,x.length=x.length||0,!!x.close){for(A.hasOwnProperty(x.marker)||(A[x.marker]=[-1,-1,-1,-1,-1,-1]),E=A[x.marker][(x.open?3:0)+x.length%3],_=B-N[B]-1,C=_;_>E;_-=N[_]+1)if(S=r[_],S.marker===x.marker&&S.open&&S.end<0&&(T=!1,(S.close||x.open)&&(S.length+x.length)%3===0&&(S.length%3!==0||x.length%3!==0)&&(T=!0),!T)){R=_>0&&!r[_-1].open?N[_-1]+1:0,N[g]=g-_+R,N[_]=R,x.open=!1,S.end=g,S.close=!1,C=-1,D=-2;break}C!==-1&&(A[x.marker][(x.open?3:0)+(x.length||0)%3]=C)}}}return balance_pairs=function(g){var _,x=g.tokens_meta,S=g.tokens_meta.length;for(n(g.delimiters),_=0;_<S;_++)x[_]&&x[_].delimiters&&n(x[_].delimiters)},balance_pairs}var fragments_join,hasRequiredFragments_join;function requireFragments_join(){return hasRequiredFragments_join||(hasRequiredFragments_join=1,fragments_join=function(r){var g,_,x=0,S=r.tokens,E=r.tokens.length;for(g=_=0;g<E;g++)S[g].nesting<0&&x--,S[g].level=x,S[g].nesting>0&&x++,S[g].type==="text"&&g+1<E&&S[g+1].type==="text"?S[g+1].content=S[g].content+S[g+1].content:(g!==_&&(S[_]=S[g]),_++);g!==_&&(S.length=_)}),fragments_join}var state_inline,hasRequiredState_inline;function requireState_inline(){if(hasRequiredState_inline)return state_inline;hasRequiredState_inline=1;var n=requireToken(),r=requireUtils().isWhiteSpace,g=requireUtils().isPunctChar,_=requireUtils().isMdAsciiPunct;function x(S,E,C,T){this.src=S,this.env=C,this.md=E,this.tokens=T,this.tokens_meta=Array(T.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}return x.prototype.pushPending=function(){var S=new n("text","",0);return S.content=this.pending,S.level=this.pendingLevel,this.tokens.push(S),this.pending="",S},x.prototype.push=function(S,E,C){this.pending&&this.pushPending();var T=new n(S,E,C),R=null;return C<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),T.level=this.level,C>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],R={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(T),this.tokens_meta.push(R),T},x.prototype.scanDelims=function(S,E){var C=S,T,R,A,I,B,D,N,M,O,L=!0,F=!0,U=this.posMax,j=this.src.charCodeAt(S);for(T=S>0?this.src.charCodeAt(S-1):32;C<U&&this.src.charCodeAt(C)===j;)C++;return A=C-S,R=C<U?this.src.charCodeAt(C):32,N=_(T)||g(String.fromCharCode(T)),O=_(R)||g(String.fromCharCode(R)),D=r(T),M=r(R),M?L=!1:O&&(D||N||(L=!1)),D?F=!1:N&&(M||O||(F=!1)),E?(I=L,B=F):(I=L&&(!F||N),B=F&&(!L||O)),{can_open:I,can_close:B,length:A}},x.prototype.Token=n,state_inline=x,state_inline}var parser_inline,hasRequiredParser_inline;function requireParser_inline(){if(hasRequiredParser_inline)return parser_inline;hasRequiredParser_inline=1;var n=requireRuler(),r=[["text",requireText()],["linkify",requireLinkify()],["newline",requireNewline()],["escape",require_escape()],["backticks",requireBackticks()],["strikethrough",requireStrikethrough().tokenize],["emphasis",requireEmphasis().tokenize],["link",requireLink()],["image",requireImage()],["autolink",requireAutolink()],["html_inline",requireHtml_inline()],["entity",requireEntity()]],g=[["balance_pairs",requireBalance_pairs()],["strikethrough",requireStrikethrough().postProcess],["emphasis",requireEmphasis().postProcess],["fragments_join",requireFragments_join()]];function _(){var x;for(this.ruler=new n,x=0;x<r.length;x++)this.ruler.push(r[x][0],r[x][1]);for(this.ruler2=new n,x=0;x<g.length;x++)this.ruler2.push(g[x][0],g[x][1])}return _.prototype.skipToken=function(x){var S,E,C=x.pos,T=this.ruler.getRules(""),R=T.length,A=x.md.options.maxNesting,I=x.cache;if(typeof I[C]<"u"){x.pos=I[C];return}if(x.level<A){for(E=0;E<R;E++)if(x.level++,S=T[E](x,!0),x.level--,S){if(C>=x.pos)throw new Error("inline rule didn't increment state.pos");break}}else x.pos=x.posMax;S||x.pos++,I[C]=x.pos},_.prototype.tokenize=function(x){for(var S,E,C,T=this.ruler.getRules(""),R=T.length,A=x.posMax,I=x.md.options.maxNesting;x.pos<A;){if(C=x.pos,x.level<I){for(E=0;E<R;E++)if(S=T[E](x,!1),S){if(C>=x.pos)throw new Error("inline rule didn't increment state.pos");break}}if(S){if(x.pos>=A)break;continue}x.pending+=x.src[x.pos++]}x.pending&&x.pushPending()},_.prototype.parse=function(x,S,E,C){var T,R,A,I=new this.State(x,S,E,C);for(this.tokenize(I),R=this.ruler2.getRules(""),A=R.length,T=0;T<A;T++)R[T](I)},_.prototype.State=requireState_inline(),parser_inline=_,parser_inline}var re,hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,re=function(n){var r={};n=n||{},r.src_Any=requireRegex$3().source,r.src_Cc=requireRegex$2().source,r.src_Z=requireRegex().source,r.src_P=requireRegex$4().source,r.src_ZPCc=[r.src_Z,r.src_P,r.src_Cc].join("|"),r.src_ZCc=[r.src_Z,r.src_Cc].join("|");var g="[><｜]";return r.src_pseudo_letter="(?:(?!"+g+"|"+r.src_ZPCc+")"+r.src_Any+")",r.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",r.src_auth="(?:(?:(?!"+r.src_ZCc+"|[@/\\[\\]()]).)+@)?",r.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",r.src_host_terminator="(?=$|"+g+"|"+r.src_ZPCc+")(?!"+(n["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+r.src_ZPCc+"))",r.src_path="(?:[/?#](?:(?!"+r.src_ZCc+"|"+g+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+r.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+r.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+r.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+r.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+r.src_ZCc+"|[']).)+\\'|\\'(?="+r.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+r.src_ZCc+"|[.]|$)|"+(n["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+r.src_ZCc+"|$)|;(?!"+r.src_ZCc+"|$)|\\!+(?!"+r.src_ZCc+"|[!]|$)|\\?(?!"+r.src_ZCc+"|[?]|$))+|\\/)?",r.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',r.src_xn="xn--[a-z0-9\\-]{1,59}",r.src_domain_root="(?:"+r.src_xn+"|"+r.src_pseudo_letter+"{1,63})",r.src_domain="(?:"+r.src_xn+"|(?:"+r.src_pseudo_letter+")|(?:"+r.src_pseudo_letter+"(?:-|"+r.src_pseudo_letter+"){0,61}"+r.src_pseudo_letter+"))",r.src_host="(?:(?:(?:(?:"+r.src_domain+")\\.)*"+r.src_domain+"))",r.tpl_host_fuzzy="(?:"+r.src_ip4+"|(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%)))",r.tpl_host_no_ip_fuzzy="(?:(?:(?:"+r.src_domain+")\\.)+(?:%TLDS%))",r.src_host_strict=r.src_host+r.src_host_terminator,r.tpl_host_fuzzy_strict=r.tpl_host_fuzzy+r.src_host_terminator,r.src_host_port_strict=r.src_host+r.src_port+r.src_host_terminator,r.tpl_host_port_fuzzy_strict=r.tpl_host_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_port_no_ip_fuzzy_strict=r.tpl_host_no_ip_fuzzy+r.src_port+r.src_host_terminator,r.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+r.src_ZPCc+"|>|$))",r.tpl_email_fuzzy="(^|"+g+'|"|\\(|'+r.src_ZCc+")("+r.src_email_name+"@"+r.tpl_host_fuzzy_strict+")",r.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+r.src_ZPCc+"))((?![$+<=>^`|｜])"+r.tpl_host_port_fuzzy_strict+r.src_path+")",r.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|｜]|"+r.src_ZPCc+"))((?![$+<=>^`|｜])"+r.tpl_host_port_no_ip_fuzzy_strict+r.src_path+")",r}),re}var linkifyIt,hasRequiredLinkifyIt;function requireLinkifyIt(){if(hasRequiredLinkifyIt)return linkifyIt;hasRequiredLinkifyIt=1;function n(U){var j=Array.prototype.slice.call(arguments,1);return j.forEach(function(z){z&&Object.keys(z).forEach(function(W){U[W]=z[W]})}),U}function r(U){return Object.prototype.toString.call(U)}function g(U){return r(U)==="[object String]"}function _(U){return r(U)==="[object Object]"}function x(U){return r(U)==="[object RegExp]"}function S(U){return r(U)==="[object Function]"}function E(U){return U.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}var C={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function T(U){return Object.keys(U||{}).reduce(function(j,z){return j||C.hasOwnProperty(z)},!1)}var R={"http:":{validate:function(U,j,z){var W=U.slice(j);return z.re.http||(z.re.http=new RegExp("^\\/\\/"+z.re.src_auth+z.re.src_host_port_strict+z.re.src_path,"i")),z.re.http.test(W)?W.match(z.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(U,j,z){var W=U.slice(j);return z.re.no_http||(z.re.no_http=new RegExp("^"+z.re.src_auth+"(?:localhost|(?:(?:"+z.re.src_domain+")\\.)+"+z.re.src_domain_root+")"+z.re.src_port+z.re.src_host_terminator+z.re.src_path,"i")),z.re.no_http.test(W)?j>=3&&U[j-3]===":"||j>=3&&U[j-3]==="/"?0:W.match(z.re.no_http)[0].length:0}},"mailto:":{validate:function(U,j,z){var W=U.slice(j);return z.re.mailto||(z.re.mailto=new RegExp("^"+z.re.src_email_name+"@"+z.re.src_host_strict,"i")),z.re.mailto.test(W)?W.match(z.re.mailto)[0].length:0}}},A="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",I="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|рф".split("|");function B(U){U.__index__=-1,U.__text_cache__=""}function D(U){return function(j,z){var W=j.slice(z);return U.test(W)?W.match(U)[0].length:0}}function N(){return function(U,j){j.normalize(U)}}function M(U){var j=U.re=requireRe()(U.__opts__),z=U.__tlds__.slice();U.onCompile(),U.__tlds_replaced__||z.push(A),z.push(j.src_xn),j.src_tlds=z.join("|");function W(xe){return xe.replace("%TLDS%",j.src_tlds)}j.email_fuzzy=RegExp(W(j.tpl_email_fuzzy),"i"),j.link_fuzzy=RegExp(W(j.tpl_link_fuzzy),"i"),j.link_no_ip_fuzzy=RegExp(W(j.tpl_link_no_ip_fuzzy),"i"),j.host_fuzzy_test=RegExp(W(j.tpl_host_fuzzy_test),"i");var X=[];U.__compiled__={};function ie(xe,we){throw new Error('(LinkifyIt) Invalid schema "'+xe+'": '+we)}Object.keys(U.__schemas__).forEach(function(xe){var we=U.__schemas__[xe];if(we!==null){var G={validate:null,link:null};if(U.__compiled__[xe]=G,_(we)){x(we.validate)?G.validate=D(we.validate):S(we.validate)?G.validate=we.validate:ie(xe,we),S(we.normalize)?G.normalize=we.normalize:we.normalize?ie(xe,we):G.normalize=N();return}if(g(we)){X.push(xe);return}ie(xe,we)}}),X.forEach(function(xe){U.__compiled__[U.__schemas__[xe]]&&(U.__compiled__[xe].validate=U.__compiled__[U.__schemas__[xe]].validate,U.__compiled__[xe].normalize=U.__compiled__[U.__schemas__[xe]].normalize)}),U.__compiled__[""]={validate:null,normalize:N()};var fe=Object.keys(U.__compiled__).filter(function(xe){return xe.length>0&&U.__compiled__[xe]}).map(E).join("|");U.re.schema_test=RegExp("(^|(?!_)(?:[><｜]|"+j.src_ZPCc+"))("+fe+")","i"),U.re.schema_search=RegExp("(^|(?!_)(?:[><｜]|"+j.src_ZPCc+"))("+fe+")","ig"),U.re.schema_at_start=RegExp("^"+U.re.schema_search.source,"i"),U.re.pretest=RegExp("("+U.re.schema_test.source+")|("+U.re.host_fuzzy_test.source+")|@","i"),B(U)}function O(U,j){var z=U.__index__,W=U.__last_index__,X=U.__text_cache__.slice(z,W);this.schema=U.__schema__.toLowerCase(),this.index=z+j,this.lastIndex=W+j,this.raw=X,this.text=X,this.url=X}function L(U,j){var z=new O(U,j);return U.__compiled__[z.schema].normalize(z,U),z}function F(U,j){if(!(this instanceof F))return new F(U,j);j||T(U)&&(j=U,U={}),this.__opts__=n({},C,j),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=n({},R,U),this.__compiled__={},this.__tlds__=I,this.__tlds_replaced__=!1,this.re={},M(this)}return F.prototype.add=function(j,z){return this.__schemas__[j]=z,M(this),this},F.prototype.set=function(j){return this.__opts__=n(this.__opts__,j),this},F.prototype.test=function(j){if(this.__text_cache__=j,this.__index__=-1,!j.length)return!1;var z,W,X,ie,fe,xe,we,G,J;if(this.re.schema_test.test(j)){for(we=this.re.schema_search,we.lastIndex=0;(z=we.exec(j))!==null;)if(ie=this.testSchemaAt(j,z[2],we.lastIndex),ie){this.__schema__=z[2],this.__index__=z.index+z[1].length,this.__last_index__=z.index+z[0].length+ie;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(G=j.search(this.re.host_fuzzy_test),G>=0&&(this.__index__<0||G<this.__index__)&&(W=j.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(fe=W.index+W[1].length,(this.__index__<0||fe<this.__index__)&&(this.__schema__="",this.__index__=fe,this.__last_index__=W.index+W[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(J=j.indexOf("@"),J>=0&&(X=j.match(this.re.email_fuzzy))!==null&&(fe=X.index+X[1].length,xe=X.index+X[0].length,(this.__index__<0||fe<this.__index__||fe===this.__index__&&xe>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=fe,this.__last_index__=xe))),this.__index__>=0},F.prototype.pretest=function(j){return this.re.pretest.test(j)},F.prototype.testSchemaAt=function(j,z,W){return this.__compiled__[z.toLowerCase()]?this.__compiled__[z.toLowerCase()].validate(j,W,this):0},F.prototype.match=function(j){var z=0,W=[];this.__index__>=0&&this.__text_cache__===j&&(W.push(L(this,z)),z=this.__last_index__);for(var X=z?j.slice(z):j;this.test(X);)W.push(L(this,z)),X=X.slice(this.__last_index__),z+=this.__last_index__;return W.length?W:null},F.prototype.matchAtStart=function(j){if(this.__text_cache__=j,this.__index__=-1,!j.length)return null;var z=this.re.schema_at_start.exec(j);if(!z)return null;var W=this.testSchemaAt(j,z[2],z[0].length);return W?(this.__schema__=z[2],this.__index__=z.index+z[1].length,this.__last_index__=z.index+z[0].length+W,L(this,0)):null},F.prototype.tlds=function(j,z){return j=Array.isArray(j)?j:[j],z?(this.__tlds__=this.__tlds__.concat(j).sort().filter(function(W,X,ie){return W!==ie[X-1]}).reverse(),M(this),this):(this.__tlds__=j.slice(),this.__tlds_replaced__=!0,M(this),this)},F.prototype.normalize=function(j){j.schema||(j.url="http://"+j.url),j.schema==="mailto:"&&!/^mailto:/i.test(j.url)&&(j.url="mailto:"+j.url)},F.prototype.onCompile=function(){},linkifyIt=F,linkifyIt}var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */var punycode=punycode$1.exports,hasRequiredPunycode;function requirePunycode(){return hasRequiredPunycode||(hasRequiredPunycode=1,function(n,r){(function(g){var _=r&&!r.nodeType&&r,x=n&&!n.nodeType&&n,S=typeof commonjsGlobal=="object"&&commonjsGlobal;(S.global===S||S.window===S||S.self===S)&&(g=S);var E,C=2147483647,T=36,R=1,A=26,I=38,B=700,D=72,N=128,M="-",O=/^xn--/,L=/[^\x20-\x7E]/,F=/[\x2E\u3002\uFF0E\uFF61]/g,U={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},j=T-R,z=Math.floor,W=String.fromCharCode,X;function ie(se){throw new RangeError(U[se])}function fe(se,te){for(var Y=se.length,be=[];Y--;)be[Y]=te(se[Y]);return be}function xe(se,te){var Y=se.split("@"),be="";Y.length>1&&(be=Y[0]+"@",se=Y[1]),se=se.replace(F,".");var ye=se.split("."),Ie=fe(ye,te).join(".");return be+Ie}function we(se){for(var te=[],Y=0,be=se.length,ye,Ie;Y<be;)ye=se.charCodeAt(Y++),ye>=55296&&ye<=56319&&Y<be?(Ie=se.charCodeAt(Y++),(Ie&64512)==56320?te.push(((ye&1023)<<10)+(Ie&1023)+65536):(te.push(ye),Y--)):te.push(ye);return te}function G(se){return fe(se,function(te){var Y="";return te>65535&&(te-=65536,Y+=W(te>>>10&1023|55296),te=56320|te&1023),Y+=W(te),Y}).join("")}function J(se){return se-48<10?se-22:se-65<26?se-65:se-97<26?se-97:T}function q(se,te){return se+22+75*(se<26)-((te!=0)<<5)}function H(se,te,Y){var be=0;for(se=Y?z(se/B):se>>1,se+=z(se/te);se>j*A>>1;be+=T)se=z(se/j);return z(be+(j+1)*se/(se+I))}function ve(se){var te=[],Y=se.length,be,ye=0,Ie=N,ke=D,Ce,Ae,Ne,We,Be,Se,$e,_e,Oe;for(Ce=se.lastIndexOf(M),Ce<0&&(Ce=0),Ae=0;Ae<Ce;++Ae)se.charCodeAt(Ae)>=128&&ie("not-basic"),te.push(se.charCodeAt(Ae));for(Ne=Ce>0?Ce+1:0;Ne<Y;){for(We=ye,Be=1,Se=T;Ne>=Y&&ie("invalid-input"),$e=J(se.charCodeAt(Ne++)),($e>=T||$e>z((C-ye)/Be))&&ie("overflow"),ye+=$e*Be,_e=Se<=ke?R:Se>=ke+A?A:Se-ke,!($e<_e);Se+=T)Oe=T-_e,Be>z(C/Oe)&&ie("overflow"),Be*=Oe;be=te.length+1,ke=H(ye-We,be,We==0),z(ye/be)>C-Ie&&ie("overflow"),Ie+=z(ye/be),ye%=be,te.splice(ye++,0,Ie)}return G(te)}function Z(se){var te,Y,be,ye,Ie,ke,Ce,Ae,Ne,We,Be,Se=[],$e,_e,Oe,Ke;for(se=we(se),$e=se.length,te=N,Y=0,Ie=D,ke=0;ke<$e;++ke)Be=se[ke],Be<128&&Se.push(W(Be));for(be=ye=Se.length,ye&&Se.push(M);be<$e;){for(Ce=C,ke=0;ke<$e;++ke)Be=se[ke],Be>=te&&Be<Ce&&(Ce=Be);for(_e=be+1,Ce-te>z((C-Y)/_e)&&ie("overflow"),Y+=(Ce-te)*_e,te=Ce,ke=0;ke<$e;++ke)if(Be=se[ke],Be<te&&++Y>C&&ie("overflow"),Be==te){for(Ae=Y,Ne=T;We=Ne<=Ie?R:Ne>=Ie+A?A:Ne-Ie,!(Ae<We);Ne+=T)Ke=Ae-We,Oe=T-We,Se.push(W(q(We+Ke%Oe,0))),Ae=z(Ke/Oe);Se.push(W(q(Ae,0))),Ie=H(Y,_e,be==ye),Y=0,++be}++Y,++te}return Se.join("")}function ce(se){return xe(se,function(te){return O.test(te)?ve(te.slice(4).toLowerCase()):te})}function ue(se){return xe(se,function(te){return L.test(te)?"xn--"+Z(te):te})}if(E={version:"1.4.1",ucs2:{decode:we,encode:G},decode:ve,encode:Z,toASCII:ue,toUnicode:ce},_&&x)if(n.exports==_)x.exports=E;else for(X in E)E.hasOwnProperty(X)&&(_[X]=E[X]);else g.punycode=E})(punycode)}(punycode$1,punycode$1.exports)),punycode$1.exports}var _default,hasRequired_default;function require_default(){return hasRequired_default||(hasRequired_default=1,_default={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}}),_default}var zero,hasRequiredZero;function requireZero(){return hasRequiredZero||(hasRequiredZero=1,zero={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}}),zero}var commonmark,hasRequiredCommonmark;function requireCommonmark(){return hasRequiredCommonmark||(hasRequiredCommonmark=1,commonmark={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}}),commonmark}var lib,hasRequiredLib;function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1;var n=requireUtils(),r=requireHelpers(),g=requireRenderer(),_=requireParser_core(),x=requireParser_block(),S=requireParser_inline(),E=requireLinkifyIt(),C=requireMdurl(),T=requirePunycode(),R={default:require_default(),zero:requireZero(),commonmark:requireCommonmark()},A=/^(vbscript|javascript|file|data):/,I=/^data:image\/(gif|png|jpeg|webp);/;function B(L){var F=L.trim().toLowerCase();return A.test(F)?!!I.test(F):!0}var D=["http:","https:","mailto:"];function N(L){var F=C.parse(L,!0);if(F.hostname&&(!F.protocol||D.indexOf(F.protocol)>=0))try{F.hostname=T.toASCII(F.hostname)}catch{}return C.encode(C.format(F))}function M(L){var F=C.parse(L,!0);if(F.hostname&&(!F.protocol||D.indexOf(F.protocol)>=0))try{F.hostname=T.toUnicode(F.hostname)}catch{}return C.decode(C.format(F),C.decode.defaultChars+"%")}function O(L,F){if(!(this instanceof O))return new O(L,F);F||n.isString(L)||(F=L||{},L="default"),this.inline=new S,this.block=new x,this.core=new _,this.renderer=new g,this.linkify=new E,this.validateLink=B,this.normalizeLink=N,this.normalizeLinkText=M,this.utils=n,this.helpers=n.assign({},r),this.options={},this.configure(L),F&&this.set(F)}return O.prototype.set=function(L){return n.assign(this.options,L),this},O.prototype.configure=function(L){var F=this,U;if(n.isString(L)&&(U=L,L=R[U],!L))throw new Error('Wrong `markdown-it` preset "'+U+'", check name');if(!L)throw new Error("Wrong `markdown-it` preset, can't be empty");return L.options&&F.set(L.options),L.components&&Object.keys(L.components).forEach(function(j){L.components[j].rules&&F[j].ruler.enableOnly(L.components[j].rules),L.components[j].rules2&&F[j].ruler2.enableOnly(L.components[j].rules2)}),this},O.prototype.enable=function(L,F){var U=[];Array.isArray(L)||(L=[L]),["core","block","inline"].forEach(function(z){U=U.concat(this[z].ruler.enable(L,!0))},this),U=U.concat(this.inline.ruler2.enable(L,!0));var j=L.filter(function(z){return U.indexOf(z)<0});if(j.length&&!F)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+j);return this},O.prototype.disable=function(L,F){var U=[];Array.isArray(L)||(L=[L]),["core","block","inline"].forEach(function(z){U=U.concat(this[z].ruler.disable(L,!0))},this),U=U.concat(this.inline.ruler2.disable(L,!0));var j=L.filter(function(z){return U.indexOf(z)<0});if(j.length&&!F)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+j);return this},O.prototype.use=function(L){var F=[this].concat(Array.prototype.slice.call(arguments,1));return L.apply(L,F),this},O.prototype.parse=function(L,F){if(typeof L!="string")throw new Error("Input data should be a String");var U=new this.core.State(L,this,F);return this.core.process(U),U.tokens},O.prototype.render=function(L,F){return F=F||{},this.renderer.render(this.parse(L,F),this.options,F)},O.prototype.parseInline=function(L,F){var U=new this.core.State(L,this,F);return U.inlineMode=!0,this.core.process(U),U.tokens},O.prototype.renderInline=function(L,F){return F=F||{},this.renderer.render(this.parseInline(L,F),this.options,F)},lib=O,lib}var markdownIt,hasRequiredMarkdownIt;function requireMarkdownIt(){return hasRequiredMarkdownIt||(hasRequiredMarkdownIt=1,markdownIt=requireLib()),markdownIt}var markdownItExports=requireMarkdownIt();const MarkdownIt=getDefaultExportFromCjs(markdownItExports),VueMarkdown=defineComponent$1({name:"VueMarkdown",props:{source:{type:String,required:!0},options:{type:Object,required:!1},plugins:{type:Array,required:!1}},setup(n){const r=ref$2(new MarkdownIt(n.options??{}));for(const _ of n.plugins??[])r.value.use(_);const g=computed(()=>r.value.render(n.source));return()=>h$2("div",{innerHTML:g.value})}}),utiliserÉtatConditions=defineStore("conditions",()=>{const n=ref$2(!1),r=ref$2(),g=ref$2(),_=()=>{n.value=!0},x=()=>{n.value=!1},S=computed(()=>{if(n.value)return!0});return{acceptées:n,langues:r,empreinte:g,accepter:_,refuser:x,acceptationÀJour:S}}),_sfc_main$8=defineComponent$1({__name:"ConditionsUtilisation",setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r(),{mdAndUp:_}=useDisplay(),x=utiliserÉtatConditions(),S=ref$2(x.acceptées),E=ref$2(!1),C=ref$2(!1);watchEffect(()=>{C.value=S.value});const T=()=>{C.value?x.accepter():x.refuser(),C.value&&(E.value=!1)},R=[{clef:"p0_1"},{clef:"p0_2"},{clef:"p0_3"},{titre:!0,clef:"t1"},{clef:"p1_1"},{clef:"p1_2"},{titre:!0,clef:"t2"},{clef:"p2_1"},{clef:"p2_2"},{clef:"p2_3"},{titre:!0,clef:"t3"},{clef:"p3_1"},{clef:"p3_2"},{clef:"p3_3"},{titre:!0,clef:"t4"},{clef:"p4_1"},{clef:"p4_2"}];return(A,I)=>(openBlock(),createBlock(VDialog,{modelValue:E.value,"onUpdate:modelValue":I[3]||(I[3]=B=>E.value=B)},{activator:withCtx(({props:B})=>[renderSlot(A.$slots,"activator",normalizeProps(guardReactiveProps({props:B})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","min-width":unref(_)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"d-flex"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(g)("conditions.entête"))+" ",1),createVNode(VSpacer),createVNode(VBtn,{icon:"mdi-close",size:"small",variant:"flat",onClick:I[0]||(I[0]=B=>E.value=!1)})]),_:1})]),_:1}),createVNode(VCardText,{style:{"overflow-y":"scroll"}},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(R,B=>createVNode(unref(VueMarkdown),{key:B.clef,source:unref(g)(`conditions.${B.clef}`)||"",class:normalizeClass("text-justify "+(B.titre?"text-h6 mt-2":"mt-1"))},null,8,["source","class"])),64))]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(VCheckbox,{modelValue:C.value,"onUpdate:modelValue":I[1]||(I[1]=B=>C.value=B),"hide-details":"",color:"primary",label:unref(g)("conditions.jaccepte"),onChange:I[2]||(I[2]=()=>T())},null,8,["modelValue","label"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}});var imageFileResize,hasRequiredImageFileResize;function requireImageFileResize(){return hasRequiredImageFileResize||(hasRequiredImageFileResize=1,imageFileResize=function({file:n,width:r,height:g,type:_}){return new Promise(function(x,S){let E=["jpg","gif","bmp","png","jpeg","svg"];try{if(n.name&&n.name.split(".").reverse()[0]&&E.includes(n.name.split(".").reverse()[0].toLowerCase())&&n.size&&n.type){let C=_||"jpeg";const T=r||500,R=g||300,A=n.name,I=new FileReader;I.readAsDataURL(n),I.onload=B=>{const D=new Image;D.src=B.target.result,D.onload=()=>{const N=document.createElement("canvas");N.width=T,N.height=R;const M=N.getContext("2d");M.drawImage(D,0,0,T,R),M.canvas.toBlob(O=>{const L=new File([O],A,{type:`image/${C.toLowerCase()}`,lastModified:Date.now()});x(L)},"image/jpeg",1)},I.onerror=N=>S(N)}}else S("File not supported!")}catch(C){console.log("Error while image resize: ",C),S(C)}})}),imageFileResize}var imageFileResizeExports=requireImageFileResize();const convert=getDefaultExportFromCjs(imageFileResizeExports),makeVHoverProps=propsFactory({disabled:Boolean,modelValue:{type:Boolean,default:null},...makeDelayProps()},"VHover"),VHover=genericComponent()({name:"VHover",props:makeVHoverProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const _=useProxiedModel(n,"modelValue"),{runOpenDelay:x,runCloseDelay:S}=useDelay(n,E=>!n.disabled&&(_.value=E));return()=>g.default?.({isHovering:_.value,props:{onMouseenter:x,onMouseleave:S}})}});function useCountdown(n){const r=shallowRef(n());let g=-1;function _(){clearInterval(g)}function x(){_(),nextTick$1(()=>r.value=n())}function S(E){const C=E?getComputedStyle(E):{transitionDuration:.2},T=parseFloat(C.transitionDuration)*1e3||200;if(_(),r.value<=0)return;const R=performance.now();g=window.setInterval(()=>{const A=performance.now()-R+T;r.value=Math.max(n()-A,0),r.value<=0&&_()},T)}return onScopeDispose(_),{clear:_,time:r,start:S,reset:x}}const makeVSnackbarProps=propsFactory({multiLine:Boolean,text:String,timer:[Boolean,String],timeout:{type:[Number,String],default:5e3},vertical:Boolean,...makeLocationProps({location:"bottom"}),...makePositionProps(),...makeRoundedProps(),...makeVariantProps(),...makeThemeProps(),...omit(makeVOverlayProps({transition:"v-snackbar-transition"}),["persistent","noClickAnimation","scrim","scrollStrategy"])},"VSnackbar"),VSnackbar=genericComponent()({name:"VSnackbar",props:makeVSnackbarProps(),emits:{"update:modelValue":n=>!0},setup(n,r){let{slots:g}=r;const _=useProxiedModel(n,"modelValue"),{positionClasses:x}=usePosition(n),{scopeId:S}=useScopeId(),{themeClasses:E}=provideTheme(n),{colorClasses:C,colorStyles:T,variantClasses:R}=useVariant(n),{roundedClasses:A}=useRounded(n),I=useCountdown(()=>Number(n.timeout)),B=ref$2(),D=ref$2(),N=shallowRef(!1),M=shallowRef(0),O=ref$2(),L=inject$1(VuetifyLayoutKey,void 0);useToggleScope(()=>!!L,()=>{const we=useLayout();watchEffect(()=>{O.value=we.mainStyles.value})}),watch(_,U),watch(()=>n.timeout,U),onMounted(()=>{_.value&&U()});let F=-1;function U(){I.reset(),window.clearTimeout(F);const we=Number(n.timeout);if(!_.value||we===-1)return;const G=refElement(D.value);I.start(G),F=window.setTimeout(()=>{_.value=!1},we)}function j(){I.reset(),window.clearTimeout(F)}function z(){N.value=!0,j()}function W(){N.value=!1,U()}function X(we){M.value=we.touches[0].clientY}function ie(we){Math.abs(M.value-we.changedTouches[0].clientY)>50&&(_.value=!1)}function fe(){N.value&&W()}const xe=computed(()=>n.location.split(" ").reduce((we,G)=>(we[`v-snackbar--${G}`]=!0,we),{}));return useRender(()=>{const we=VOverlay.filterProps(n),G=!!(g.default||g.text||n.text);return createVNode(VOverlay,mergeProps({ref:B,class:["v-snackbar",{"v-snackbar--active":_.value,"v-snackbar--multi-line":n.multiLine&&!n.vertical,"v-snackbar--timer":!!n.timer,"v-snackbar--vertical":n.vertical},xe.value,x.value,n.class],style:[O.value,n.style]},we,{modelValue:_.value,"onUpdate:modelValue":J=>_.value=J,contentProps:mergeProps({class:["v-snackbar__wrapper",E.value,C.value,A.value,R.value],style:[T.value],onPointerenter:z,onPointerleave:W},we.contentProps),persistent:!0,noClickAnimation:!0,scrim:!1,scrollStrategy:"none",_disableGlobalStack:!0,onTouchstartPassive:X,onTouchend:ie,onAfterLeave:fe},S),{default:()=>[genOverlays(!1,"v-snackbar"),n.timer&&!N.value&&createVNode("div",{key:"timer",class:"v-snackbar__timer"},[createVNode(VProgressLinear,{ref:D,color:typeof n.timer=="string"?n.timer:"info",max:n.timeout,"model-value":I.time.value},null)]),G&&createVNode("div",{key:"content",class:"v-snackbar__content",role:"status","aria-live":"polite"},[g.text?.()??n.text,g.default?.()]),g.actions&&createVNode(VDefaultsProvider,{defaults:{VBtn:{variant:"text",ripple:!1,slim:!0}}},{default:()=>[createVNode("div",{class:"v-snackbar__actions"},[g.actions({isActive:_})])]})],activator:g.activator})}),forwardRefs({},B)}}),_hoisted_1$3={key:0,class:"align-self-center",style:{height:"100%"}},_hoisted_2$3={class:"my-auto"},_sfc_main$7=defineComponent$1({__name:"ImageEditable",props:{srcImage:{},imgDefaut:{},maxTailleImage:{},tailleAvatar:{},editable:{type:Boolean}},emits:["imageChangee"],setup(n,{emit:r}){const g=n,_=r,{மொழியாக்கம்_பயன்படுத்து:x}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:S}=x(),E=ref$2(),C=()=>{E.value?.click()},T=ref$2(),R=ref$2(),A=ref$2(),I=computed(()=>R.value?R.value.size>g.maxTailleImage:!1),B=()=>{_("imageChangee",void 0)},D=async()=>{E.value?.files?.length&&(T.value=E.value.files[0])},N=M=>new Promise(O=>{const L=URL.createObjectURL(M),F=new Image;F.onload=()=>{O({hauteur:F.height,largeur:F.width})},F.src=L});return watchEffect(async()=>{if(T.value)if(T.value.size>g.maxTailleImage){const{hauteur:M,largeur:O}=await N(T.value),L=M*O*16/(8*1024)/g.maxTailleImage;try{R.value=convert({file:T.value,height:L*M,width:L*O})}catch{R.value=T.value;return}}else R.value=T.value}),watchEffect(async()=>{A.value=await R.value?.arrayBuffer()}),watchEffect(async()=>{if(A.value){const M=T.value?.name.split("/").pop();!I.value&&M&&_("imageChangee",{contenu:A.value,fichier:M})}}),(M,O)=>(openBlock(),createBlock(VRow,{class:"text-center"},{default:withCtx(()=>[createBaseVNode("input",{ref_key:"HTMLChoixFichier",ref:E,type:"file",style:{display:"none"},accept:"image/*",onChange:D},null,544),createVNode(VSnackbar,{modelValue:I.value,"onUpdate:modelValue":O[0]||(O[0]=L=>I.value=L),timeout:"5000",color:"error",outlined:""},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(S)("imageÉditable.imageTropGrande",{tailleMaxKO:M.maxTailleImage/1e3})),1)]),_:1},8,["modelValue"]),createVNode(VCol,{cols:"12"},{default:withCtx(()=>[createVNode(VHover,{disabled:!M.editable},{default:withCtx(({isHovering:L,props:F})=>[createVNode(VAvatar,mergeProps(F,{class:"mb-3",size:M.tailleAvatar,elevation:L?12:2}),{default:withCtx(()=>[createVNode(VImg,{src:M.srcImage||M.imgDefaut},{default:withCtx(()=>[createVNode(VRow,{class:normalizeClass({"ma-0":!0,"on-hover":L,"align-self-center":!0,"fill-height":!0,"flex-column":!0,fond:!0}),style:{"background-color":"black"}},{default:withCtx(()=>[M.editable?(openBlock(),createElementBlock("div",_hoisted_1$3,[createVNode(VRow,{class:"flex-column fill-height ma-0"},{default:withCtx(()=>[createBaseVNode("div",_hoisted_2$3,[createVNode(VBtn,{class:normalizeClass([{"show-btns":L,"mx-2":!0},"align-self-center"]),color:"rgba(255, 255, 255, 0)",icon:"",large:"",onClick:O[1]||(O[1]=()=>C())},{default:withCtx(()=>[createVNode(VIcon,{class:normalizeClass({"show-btns":L}),color:"rgba(255, 255, 255, 0)",large:""},{default:withCtx(()=>O[3]||(O[3]=[createTextVNode(" mdi-camera-outline ")])),_:2},1032,["class"])]),_:2},1032,["class"]),M.srcImage?(openBlock(),createBlock(VBtn,{key:0,class:normalizeClass([{"show-btns":L,"mx-2":!0},"align-self-center"]),color:"rgba(255, 255, 255, 0)",icon:"",large:"",onClick:O[2]||(O[2]=()=>B())},{default:withCtx(()=>[createVNode(VIcon,{class:normalizeClass({"show-btns":L}),color:"rgba(255, 255, 255, 0)",large:""},{default:withCtx(()=>O[4]||(O[4]=[createTextVNode(" mdi-close ")])),_:2},1032,["class"])]),_:2},1032,["class"])):createCommentVNode("",!0)])]),_:2},1024)])):createCommentVNode("",!0)]),_:2},1032,["class"])]),_:2},1032,["src"])]),_:2},1040,["size","elevation"])]),_:1},8,["disabled"])]),_:1})]),_:1}))}}),_export_sfc=(n,r)=>{const g=n.__vccOpts||n;for(const[_,x]of r)g[_]=x;return g},ImageEditable=_export_sfc(_sfc_main$7,[["__scopeId","data-v-f41e403a"]]);var Mr=(n,r,g)=>{if(!r.has(n))throw TypeError("Cannot "+g)},br=(n,r,g)=>(Mr(n,r,"read from private field"),g?g.call(n):r.get(n)),Co=(n,r,g)=>{if(r.has(n))throw TypeError("Cannot add the same private member more than once");r instanceof WeakSet?r.add(n):r.set(n,g)},$o=(n,r,g,_)=>(Mr(n,r,"write to private field"),r.set(n,g),g);const Ar=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"]],_o=[...Ar,["unknown"]].map(n=>n[0]),st=new Map(Ar);function So(n){for(const[r,g]of st)if(n===g)return r;return"unknown"}function Po(n){if(xr(n))return{width:n.naturalWidth,height:n.naturalHeight};if(Rr(n))return{width:n.width.baseVal.value,height:n.height.baseVal.value};if(kr(n))return{width:n.videoWidth,height:n.videoHeight};if(Fr(n))return{width:n.width,height:n.height};if(Wr(n))return{width:n.displayWidth,height:n.displayHeight};if(Ir(n))return{width:n.width,height:n.height};if(Ur(n))return{width:n.width,height:n.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}function xr(n){try{return n instanceof HTMLImageElement}catch{return!1}}function Rr(n){try{return n instanceof SVGImageElement}catch{return!1}}function kr(n){try{return n instanceof HTMLVideoElement}catch{return!1}}function Ir(n){try{return n instanceof HTMLCanvasElement}catch{return!1}}function Fr(n){try{return n instanceof ImageBitmap}catch{return!1}}function Ur(n){try{return n instanceof OffscreenCanvas}catch{return!1}}function Wr(n){try{return n instanceof VideoFrame}catch{return!1}}function jr(n){try{return n instanceof Blob}catch{return!1}}function To(n){try{return n instanceof ImageData}catch{return!1}}function Eo(n,r){try{const g=new OffscreenCanvas(n,r);if(g.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return g;throw void 0}catch{const _=document.createElement("canvas");return _.width=n,_.height=r,_}}async function Lr(n){if(xr(n)&&!await Ao(n))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Rr(n)&&!await xo(n))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Wr(n)&&Ro(n))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(kr(n)&&(n.readyState===0||n.readyState===1))throw new DOMException("Invalid element or state.","InvalidStateError");if(Fr(n)&&Io(n))throw new DOMException("The image source is detached.","InvalidStateError");const{width:r,height:g}=Po(n);if(r===0||g===0)return null;const _=Eo(r,g).getContext("2d");_.drawImage(n,0,0);try{return _.getImageData(0,0,r,g)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Oo(n){let r;try{if(globalThis.createImageBitmap)r=await createImageBitmap(n);else if(globalThis.Image){r=new Image;let g="";try{g=URL.createObjectURL(n),r.src=g,await r.decode()}finally{URL.revokeObjectURL(g)}}else return n}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}return await Lr(r)}function Do(n){const{width:r,height:g}=n;if(r===0||g===0)return null;const _=n.getContext("2d");try{return _.getImageData(0,0,r,g)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Mo(n){if(jr(n))return await Oo(n);if(To(n)){if(ko(n))throw new DOMException("The image data has been detached.","InvalidStateError");return n}return Ir(n)||Ur(n)?Do(n):await Lr(n)}async function Ao(n){try{return await n.decode(),!0}catch{return!1}}async function xo(n){var r;try{return await((r=n.decode)==null?void 0:r.call(n)),!0}catch{return!1}}function Ro(n){return n.format===null}function ko(n){return n.data.buffer.byteLength===0}function Io(n){return n.width===0&&n.height===0}function Cr(n,r){return n instanceof DOMException?new DOMException(`${r}: ${n.message}`,n.name):n instanceof Error?new n.constructor(`${r}: ${n.message}`):new Error(`${r}: ${n}`)}const $r=["Aztec","Codabar","Code128","Code39","Code93","DataBar","DataBarExpanded","DataMatrix","DXFilmEdge","EAN-13","EAN-8","ITF","Linear-Codes","Matrix-Codes","MaxiCode","MicroQRCode","None","PDF417","QRCode","rMQRCode","UPC-A","UPC-E"];function Fo(n){return n.join("|")}function Uo(n){const r=_r(n);let g=0,_=$r.length-1;for(;g<=_;){const x=Math.floor((g+_)/2),S=$r[x],E=_r(S);if(E===r)return S;E<r?g=x+1:_=x-1}return"None"}function _r(n){return n.toLowerCase().replace(/_-\[\]/g,"")}function Wo(n,r){return n.Binarizer[r]}function jo(n,r){return n.CharacterSet[r]}const Lo=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Ho(n){return Lo[n.value]}function Bo(n,r){return n.EanAddOnSymbol[r]}function Vo(n,r){return n.TextMode[r]}const Ee={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!1,validateCode39CheckSum:!1,validateITFCheckSum:!1,returnCodabarStartEnd:!1,returnErrors:!1,eanAddOnSymbol:"Read",textMode:"Plain",characterSet:"Unknown"};function Hr(n,r){return{...r,formats:Fo(r.formats),binarizer:Wo(n,r.binarizer),eanAddOnSymbol:Bo(n,r.eanAddOnSymbol),textMode:Vo(n,r.textMode),characterSet:jo(n,r.characterSet)}}function Br(n){return{...n,format:Uo(n.format),eccLevel:n.eccLevel,contentType:Ho(n.contentType)}}const qo={locateFile:(n,r)=>{const g=n.match(/_(.+?)\.wasm$/);return g?`https://fastly.jsdelivr.net/npm/zxing-wasm@1.1.3/dist/${g[1]}/${n}`:r+n}};let Wt=new WeakMap;function Bt(n,r){var g;const _=Wt.get(n);if(_!=null&&_.modulePromise&&r===void 0)return _.modulePromise;const x=(g=_?.moduleOverrides)!=null?g:qo,S=n({...x});return Wt.set(n,{moduleOverrides:x,modulePromise:S}),S}async function zo(n,r,g=Ee){const _={...Ee,...g},x=await Bt(n),{size:S}=r,E=new Uint8Array(await r.arrayBuffer()),C=x._malloc(S);x.HEAPU8.set(E,C);const T=x.readBarcodesFromImage(C,S,Hr(x,_));x._free(C);const R=[];for(let A=0;A<T.size();++A)R.push(Br(T.get(A)));return R}async function Go(n,r,g=Ee){const _={...Ee,...g},x=await Bt(n),{data:S,width:E,height:C,data:{byteLength:T}}=r,R=x._malloc(T);x.HEAPU8.set(S,R);const A=x.readBarcodesFromPixmap(R,E,C,Hr(x,_));x._free(R);const I=[];for(let B=0;B<A.size();++B)I.push(Br(A.get(B)));return I}({...Ee,formats:[...Ee.formats]});var dt=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return function(r={}){var g=r,_,x;g.ready=new Promise((Ue,He)=>{_=Ue,x=He});var S=Object.assign({},g),E="./this.program",C=typeof window=="object",T=typeof importScripts=="function";typeof process$1=="object"&&typeof process$1.versions=="object"&&process$1.versions.node;var R="";function A(Ue){return g.locateFile?g.locateFile(Ue,R):R+Ue}var I;(C||T)&&(T?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),n&&(R=n),R.indexOf("blob:")!==0?R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1):R="",T&&(I=Ue=>{var He=new XMLHttpRequest;return He.open("GET",Ue,!1),He.responseType="arraybuffer",He.send(null),new Uint8Array(He.response)})),g.print||console.log.bind(console);var B=g.printErr||console.error.bind(console);Object.assign(g,S),S=null,g.arguments&&g.arguments,g.thisProgram&&(E=g.thisProgram),g.quit&&g.quit;var D;g.wasmBinary&&(D=g.wasmBinary),typeof WebAssembly!="object"&&Y("no native wasm support detected");var N,M=!1,O,L,F,U,j,z,W,X;function ie(){var Ue=N.buffer;g.HEAP8=O=new Int8Array(Ue),g.HEAP16=F=new Int16Array(Ue),g.HEAPU8=L=new Uint8Array(Ue),g.HEAPU16=U=new Uint16Array(Ue),g.HEAP32=j=new Int32Array(Ue),g.HEAPU32=z=new Uint32Array(Ue),g.HEAPF32=W=new Float32Array(Ue),g.HEAPF64=X=new Float64Array(Ue)}var fe=[],xe=[],we=[];function G(){if(g.preRun)for(typeof g.preRun=="function"&&(g.preRun=[g.preRun]);g.preRun.length;)H(g.preRun.shift());Be(fe)}function J(){Be(xe)}function q(){if(g.postRun)for(typeof g.postRun=="function"&&(g.postRun=[g.postRun]);g.postRun.length;)Z(g.postRun.shift());Be(we)}function H(Ue){fe.unshift(Ue)}function ve(Ue){xe.unshift(Ue)}function Z(Ue){we.unshift(Ue)}var ce=0,ue=null;function se(Ue){var He;ce++,(He=g.monitorRunDependencies)===null||He===void 0||He.call(g,ce)}function te(Ue){var He;if(ce--,(He=g.monitorRunDependencies)===null||He===void 0||He.call(g,ce),ce==0&&ue){var at=ue;ue=null,at()}}function Y(Ue){var He;(He=g.onAbort)===null||He===void 0||He.call(g,Ue),Ue="Aborted("+Ue+")",B(Ue),M=!0,Ue+=". Build with -sASSERTIONS for more info.";var at=new WebAssembly.RuntimeError(Ue);throw x(at),at}var be="data:application/octet-stream;base64,",ye=Ue=>Ue.startsWith(be),Ie;Ie="zxing_reader.wasm",ye(Ie)||(Ie=A(Ie));function ke(Ue){if(Ue==Ie&&D)return new Uint8Array(D);if(I)return I(Ue);throw"both async and sync fetching of the wasm failed"}function Ce(Ue){return!D&&(C||T)&&typeof fetch=="function"?fetch(Ue,{credentials:"same-origin"}).then(He=>{if(!He.ok)throw"failed to load wasm binary file at '"+Ue+"'";return He.arrayBuffer()}).catch(()=>ke(Ue)):Promise.resolve().then(()=>ke(Ue))}function Ae(Ue,He,at){return Ce(Ue).then(yt=>WebAssembly.instantiate(yt,He)).then(yt=>yt).then(at,yt=>{B(`failed to asynchronously prepare wasm: ${yt}`),Y(yt)})}function Ne(Ue,He,at,yt){return!Ue&&typeof WebAssembly.instantiateStreaming=="function"&&!ye(He)&&typeof fetch=="function"?fetch(He,{credentials:"same-origin"}).then(kt=>{var Mt=WebAssembly.instantiateStreaming(kt,at);return Mt.then(yt,function(Ot){return B(`wasm streaming compile failed: ${Ot}`),B("falling back to ArrayBuffer instantiation"),Ae(He,at,yt)})}):Ae(He,at,yt)}function We(){var Ue={a:xa};function He(yt,kt){return yn=yt.exports,N=yn.ia,ie(),Li=yn.ma,ve(yn.ja),te(),yn}se();function at(yt){He(yt.instance)}if(g.instantiateWasm)try{return g.instantiateWasm(Ue,He)}catch(yt){B(`Module.instantiateWasm callback failed with error: ${yt}`),x(yt)}return Ne(D,Ie,Ue,at).catch(x),{}}var Be=Ue=>{for(;Ue.length>0;)Ue.shift()(g)};g.noExitRuntime;var Se=[],$e=0,_e=Ue=>{var He=new Me(Ue);return He.get_caught()||(He.set_caught(!0),$e--),He.set_rethrown(!1),Se.push(He),es(He.excPtr),He.get_exception_ptr()},Oe=0,Ke=()=>{ln(0,0);var Ue=Se.pop();Qi(Ue.excPtr),Oe=0};function Me(Ue){this.excPtr=Ue,this.ptr=Ue-24,this.set_type=function(He){z[this.ptr+4>>2]=He},this.get_type=function(){return z[this.ptr+4>>2]},this.set_destructor=function(He){z[this.ptr+8>>2]=He},this.get_destructor=function(){return z[this.ptr+8>>2]},this.set_caught=function(He){He=He?1:0,O[this.ptr+12>>0]=He},this.get_caught=function(){return O[this.ptr+12>>0]!=0},this.set_rethrown=function(He){He=He?1:0,O[this.ptr+13>>0]=He},this.get_rethrown=function(){return O[this.ptr+13>>0]!=0},this.init=function(He,at){this.set_adjusted_ptr(0),this.set_type(He),this.set_destructor(at)},this.set_adjusted_ptr=function(He){z[this.ptr+16>>2]=He},this.get_adjusted_ptr=function(){return z[this.ptr+16>>2]},this.get_exception_ptr=function(){var He=rs(this.get_type());if(He)return z[this.excPtr>>2];var at=this.get_adjusted_ptr();return at!==0?at:this.excPtr}}var Le=Ue=>{throw Oe||(Oe=Ue),Oe},ze=Ue=>{var He=Oe;if(!He)return Mn(0),0;var at=new Me(He);at.set_adjusted_ptr(He);var yt=at.get_type();if(!yt)return Mn(0),He;for(var kt in Ue){var Mt=Ue[kt];if(Mt===0||Mt===yt)break;var Ot=at.ptr+16;if(ts(Mt,yt,Ot))return Mn(Mt),He}return Mn(yt),He},Je=()=>ze([]),Qe=Ue=>ze([Ue]),rt=(Ue,He)=>ze([Ue,He]),wt=()=>{var Ue=Se.pop();Ue||Y("no exception to throw");var He=Ue.excPtr;throw Ue.get_rethrown()||(Se.push(Ue),Ue.set_rethrown(!0),Ue.set_caught(!1),$e++),Oe=He,Oe},bt=(Ue,He,at)=>{var yt=new Me(Ue);throw yt.init(He,at),Oe=Ue,$e++,Oe},xt=()=>$e,Et={},Rt=Ue=>{for(;Ue.length;){var He=Ue.pop(),at=Ue.pop();at(He)}};function $t(Ue){return this.fromWireType(j[Ue>>2])}var qt={},Ge={},De={},Ve,Ze=Ue=>{throw new Ve(Ue)},_t=(Ue,He,at)=>{Ue.forEach(function(Ut){De[Ut]=He});function yt(Ut){var Yt=at(Ut);Yt.length!==Ue.length&&Ze("Mismatched type converter count");for(var tr=0;tr<Ue.length;++tr)ir(Ue[tr],Yt[tr])}var kt=new Array(He.length),Mt=[],Ot=0;He.forEach((Ut,Yt)=>{Ge.hasOwnProperty(Ut)?kt[Yt]=Ge[Ut]:(Mt.push(Ut),qt.hasOwnProperty(Ut)||(qt[Ut]=[]),qt[Ut].push(()=>{kt[Yt]=Ge[Ut],++Ot,Ot===Mt.length&&yt(kt)}))}),Mt.length===0&&yt(kt)},ft=Ue=>{var He=Et[Ue];delete Et[Ue];var at=He.rawConstructor,yt=He.rawDestructor,kt=He.fields,Mt=kt.map(Ot=>Ot.getterReturnType).concat(kt.map(Ot=>Ot.setterArgumentType));_t([Ue],Mt,Ot=>{var Ut={};return kt.forEach((Yt,tr)=>{var lr=Yt.fieldName,vr=Ot[tr],Dr=Yt.getter,zr=Yt.getterContext,un=Ot[tr+kt.length],pn=Yt.setter,cn=Yt.setterContext;Ut[lr]={read:Cn=>vr.fromWireType(Dr(zr,Cn)),write:(Cn,er)=>{var dr=[];pn(cn,Cn,un.toWireType(dr,er)),Rt(dr)}}}),[{name:He.name,fromWireType:Yt=>{var tr={};for(var lr in Ut)tr[lr]=Ut[lr].read(Yt);return yt(Yt),tr},toWireType:(Yt,tr)=>{for(var lr in Ut)if(!(lr in tr))throw new TypeError(`Missing field: "${lr}"`);var vr=at();for(lr in Ut)Ut[lr].write(vr,tr[lr]);return Yt!==null&&Yt.push(yt,vr),vr},argPackAdvance:cr,readValueFromPointer:$t,destructorFunction:yt}]})},ht=(Ue,He,at,yt,kt)=>{},zt=()=>{for(var Ue=new Array(256),He=0;He<256;++He)Ue[He]=String.fromCharCode(He);Kt=Ue},Kt,Ft=Ue=>{for(var He="",at=Ue;L[at];)He+=Kt[L[at++]];return He},Jt,jt=Ue=>{throw new Jt(Ue)};function rr(Ue,He){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var yt=He.name;if(Ue||jt(`type "${yt}" must have a positive integer typeid pointer`),Ge.hasOwnProperty(Ue)){if(at.ignoreDuplicateRegistrations)return;jt(`Cannot register type '${yt}' twice`)}if(Ge[Ue]=He,delete De[Ue],qt.hasOwnProperty(Ue)){var kt=qt[Ue];delete qt[Ue],kt.forEach(Mt=>Mt())}}function ir(Ue,He){let at=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!("argPackAdvance"in He))throw new TypeError("registerType registeredInstance requires argPackAdvance");return rr(Ue,He,at)}var cr=8,sr=(Ue,He,at,yt)=>{He=Ft(He),ir(Ue,{name:He,fromWireType:function(kt){return!!kt},toWireType:function(kt,Mt){return Mt?at:yt},argPackAdvance:cr,readValueFromPointer:function(kt){return this.fromWireType(L[kt])},destructorFunction:null})},yr=Ue=>({count:Ue.count,deleteScheduled:Ue.deleteScheduled,preservePointerOnDelete:Ue.preservePointerOnDelete,ptr:Ue.ptr,ptrType:Ue.ptrType,smartPtr:Ue.smartPtr,smartPtrType:Ue.smartPtrType}),ur=Ue=>{function He(at){return at.$$.ptrType.registeredClass.name}jt(He(Ue)+" instance already deleted")},Ye=!1,Fe=Ue=>{},qe=Ue=>{Ue.smartPtr?Ue.smartPtrType.rawDestructor(Ue.smartPtr):Ue.ptrType.registeredClass.rawDestructor(Ue.ptr)},pt=Ue=>{Ue.count.value-=1;var He=Ue.count.value===0;He&&qe(Ue)},St=(Ue,He,at)=>{if(He===at)return Ue;if(at.baseClass===void 0)return null;var yt=St(Ue,He,at.baseClass);return yt===null?null:at.downcast(yt)},Tt={},At=()=>Object.keys(vt).length,ar=()=>{var Ue=[];for(var He in vt)vt.hasOwnProperty(He)&&Ue.push(vt[He]);return Ue},Xe=[],nt=()=>{for(;Xe.length;){var Ue=Xe.pop();Ue.$$.deleteScheduled=!1,Ue.delete()}},ot,et=Ue=>{ot=Ue,Xe.length&&ot&&ot(nt)},mt=()=>{g.getInheritedInstanceCount=At,g.getLiveInheritedInstances=ar,g.flushPendingDeletes=nt,g.setDelayFunction=et},vt={},Ct=(Ue,He)=>{for(He===void 0&&jt("ptr should not be undefined");Ue.baseClass;)He=Ue.upcast(He),Ue=Ue.baseClass;return He},Pt=(Ue,He)=>(He=Ct(Ue,He),vt[He]),It=(Ue,He)=>{(!He.ptrType||!He.ptr)&&Ze("makeClassHandle requires ptr and ptrType");var at=!!He.smartPtrType,yt=!!He.smartPtr;return at!==yt&&Ze("Both smartPtrType and smartPtr must be specified"),He.count={value:1},Dt(Object.create(Ue,{$$:{value:He,writable:!0}}))};function Nt(Ue){var He=this.getPointee(Ue);if(!He)return this.destructor(Ue),null;var at=Pt(this.registeredClass,He);if(at!==void 0){if(at.$$.count.value===0)return at.$$.ptr=He,at.$$.smartPtr=Ue,at.clone();var yt=at.clone();return this.destructor(Ue),yt}function kt(){return this.isSmartPointer?It(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:He,smartPtrType:this,smartPtr:Ue}):It(this.registeredClass.instancePrototype,{ptrType:this,ptr:Ue})}var Mt=this.registeredClass.getActualType(He),Ot=Tt[Mt];if(!Ot)return kt.call(this);var Ut;this.isConst?Ut=Ot.constPointerType:Ut=Ot.pointerType;var Yt=St(He,this.registeredClass,Ut.registeredClass);return Yt===null?kt.call(this):this.isSmartPointer?It(Ut.registeredClass.instancePrototype,{ptrType:Ut,ptr:Yt,smartPtrType:this,smartPtr:Ue}):It(Ut.registeredClass.instancePrototype,{ptrType:Ut,ptr:Yt})}var Dt=Ue=>typeof FinalizationRegistry>"u"?(Dt=He=>He,Ue):(Ye=new FinalizationRegistry(He=>{pt(He.$$)}),Dt=He=>{var at=He.$$,yt=!!at.smartPtr;if(yt){var kt={$$:at};Ye.register(He,kt,He)}return He},Fe=He=>Ye.unregister(He),Dt(Ue)),Ht=()=>{Object.assign(Zt.prototype,{isAliasOf(Ue){if(!(this instanceof Zt)||!(Ue instanceof Zt))return!1;var He=this.$$.ptrType.registeredClass,at=this.$$.ptr;Ue.$$=Ue.$$;for(var yt=Ue.$$.ptrType.registeredClass,kt=Ue.$$.ptr;He.baseClass;)at=He.upcast(at),He=He.baseClass;for(;yt.baseClass;)kt=yt.upcast(kt),yt=yt.baseClass;return He===yt&&at===kt},clone(){if(this.$$.ptr||ur(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var Ue=Dt(Object.create(Object.getPrototypeOf(this),{$$:{value:yr(this.$$)}}));return Ue.$$.count.value+=1,Ue.$$.deleteScheduled=!1,Ue},delete(){this.$$.ptr||ur(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&jt("Object already scheduled for deletion"),Fe(this),pt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||ur(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&jt("Object already scheduled for deletion"),Xe.push(this),Xe.length===1&&ot&&ot(nt),this.$$.deleteScheduled=!0,this}})};function Zt(){}var nr=(Ue,He)=>Object.defineProperty(He,"name",{value:Ue}),Xt=(Ue,He,at)=>{if(Ue[He].overloadTable===void 0){var yt=Ue[He];Ue[He]=function(){return Ue[He].overloadTable.hasOwnProperty(arguments.length)||jt(`Function '${at}' called with an invalid number of arguments (${arguments.length}) - expects one of (${Ue[He].overloadTable})!`),Ue[He].overloadTable[arguments.length].apply(this,arguments)},Ue[He].overloadTable=[],Ue[He].overloadTable[yt.argCount]=yt}},Qt=(Ue,He,at)=>{g.hasOwnProperty(Ue)?((at===void 0||g[Ue].overloadTable!==void 0&&g[Ue].overloadTable[at]!==void 0)&&jt(`Cannot register public name '${Ue}' twice`),Xt(g,Ue,Ue),g.hasOwnProperty(at)&&jt(`Cannot register multiple overloads of a function with the same number of arguments (${at})!`),g[Ue].overloadTable[at]=He):(g[Ue]=He,at!==void 0&&(g[Ue].numArguments=at))},gr=48,sn=57,an=Ue=>{if(Ue===void 0)return"_unknown";Ue=Ue.replace(/[^a-zA-Z0-9_]/g,"$");var He=Ue.charCodeAt(0);return He>=gr&&He<=sn?`_${Ue}`:Ue};function on(Ue,He,at,yt,kt,Mt,Ot,Ut){this.name=Ue,this.constructor=He,this.instancePrototype=at,this.rawDestructor=yt,this.baseClass=kt,this.getActualType=Mt,this.upcast=Ot,this.downcast=Ut,this.pureVirtualFunctions=[]}var gn=(Ue,He,at)=>{for(;He!==at;)He.upcast||jt(`Expected null or instance of ${at.name}, got an instance of ${He.name}`),Ue=He.upcast(Ue),He=He.baseClass;return Ue};function wn(Ue,He){if(He===null)return this.isReference&&jt(`null is not a valid ${this.name}`),0;He.$$||jt(`Cannot pass "${Gn(He)}" as a ${this.name}`),He.$$.ptr||jt(`Cannot pass deleted object as a pointer of type ${this.name}`);var at=He.$$.ptrType.registeredClass,yt=gn(He.$$.ptr,at,this.registeredClass);return yt}function _n(Ue,He){var at;if(He===null)return this.isReference&&jt(`null is not a valid ${this.name}`),this.isSmartPointer?(at=this.rawConstructor(),Ue!==null&&Ue.push(this.rawDestructor,at),at):0;(!He||!He.$$)&&jt(`Cannot pass "${Gn(He)}" as a ${this.name}`),He.$$.ptr||jt(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&He.$$.ptrType.isConst&&jt(`Cannot convert argument of type ${He.$$.smartPtrType?He.$$.smartPtrType.name:He.$$.ptrType.name} to parameter type ${this.name}`);var yt=He.$$.ptrType.registeredClass;if(at=gn(He.$$.ptr,yt,this.registeredClass),this.isSmartPointer)switch(He.$$.smartPtr===void 0&&jt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:He.$$.smartPtrType===this?at=He.$$.smartPtr:jt(`Cannot convert argument of type ${He.$$.smartPtrType?He.$$.smartPtrType.name:He.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:at=He.$$.smartPtr;break;case 2:if(He.$$.smartPtrType===this)at=He.$$.smartPtr;else{var kt=He.clone();at=this.rawShare(at,Pn.toHandle(()=>kt.delete())),Ue!==null&&Ue.push(this.rawDestructor,at)}break;default:jt("Unsupporting sharing policy")}return at}function vn(Ue,He){if(He===null)return this.isReference&&jt(`null is not a valid ${this.name}`),0;He.$$||jt(`Cannot pass "${Gn(He)}" as a ${this.name}`),He.$$.ptr||jt(`Cannot pass deleted object as a pointer of type ${this.name}`),He.$$.ptrType.isConst&&jt(`Cannot convert argument of type ${He.$$.ptrType.name} to parameter type ${this.name}`);var at=He.$$.ptrType.registeredClass,yt=gn(He.$$.ptr,at,this.registeredClass);return yt}function En(Ue){return this.fromWireType(z[Ue>>2])}var xn=()=>{Object.assign(Rn.prototype,{getPointee(Ue){return this.rawGetPointee&&(Ue=this.rawGetPointee(Ue)),Ue},destructor(Ue){var He;(He=this.rawDestructor)===null||He===void 0||He.call(this,Ue)},argPackAdvance:cr,readValueFromPointer:En,deleteObject(Ue){Ue!==null&&Ue.delete()},fromWireType:Nt})};function Rn(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt,tr,lr){this.name=Ue,this.registeredClass=He,this.isReference=at,this.isConst=yt,this.isSmartPointer=kt,this.pointeeType=Mt,this.sharingPolicy=Ot,this.rawGetPointee=Ut,this.rawConstructor=Yt,this.rawShare=tr,this.rawDestructor=lr,!kt&&He.baseClass===void 0?yt?(this.toWireType=wn,this.destructorFunction=null):(this.toWireType=vn,this.destructorFunction=null):this.toWireType=_n}var Ni=(Ue,He,at)=>{g.hasOwnProperty(Ue)||Ze("Replacing nonexistant public symbol"),g[Ue].overloadTable!==void 0&&at!==void 0?g[Ue].overloadTable[at]=He:(g[Ue]=He,g[Ue].argCount=at)},ds=(Ue,He,at)=>{var yt=g["dynCall_"+Ue];return at&&at.length?yt.apply(null,[He].concat(at)):yt.call(null,He)},On=[],Li,fn=Ue=>{var He=On[Ue];return He||(Ue>=On.length&&(On.length=Ue+1),On[Ue]=He=Li.get(Ue)),He},hs=(Ue,He,at)=>{if(Ue.includes("j"))return ds(Ue,He,at);var yt=fn(He).apply(null,at);return yt},ps=(Ue,He)=>{var at=[];return function(){return at.length=0,Object.assign(at,arguments),hs(Ue,He,at)}},In=(Ue,He)=>{Ue=Ft(Ue);function at(){return Ue.includes("j")?ps(Ue,He):fn(He)}var yt=at();return typeof yt!="function"&&jt(`unknown function pointer with signature ${Ue}: ${He}`),yt},gs=(Ue,He)=>{var at=nr(He,function(yt){this.name=He,this.message=yt;var kt=new Error(yt).stack;kt!==void 0&&(this.stack=this.toString()+`
`+kt.replace(/^Error(:[^\n]*)?\n/,""))});return at.prototype=Object.create(Ue.prototype),at.prototype.constructor=at,at.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},at},Vi,qi=Ue=>{var He=Zi(Ue),at=Ft(He);return Bn(He),at},Ln=(Ue,He)=>{var at=[],yt={};function kt(Mt){if(!yt[Mt]&&!Ge[Mt]){if(De[Mt]){De[Mt].forEach(kt);return}at.push(Mt),yt[Mt]=!0}}throw He.forEach(kt),new Vi(`${Ue}: `+at.map(qi).join([", "]))},vs=(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt,tr,lr,vr,Dr)=>{lr=Ft(lr),Mt=In(kt,Mt),Ut&&(Ut=In(Ot,Ut)),tr&&(tr=In(Yt,tr)),Dr=In(vr,Dr);var zr=an(lr);Qt(zr,function(){Ln(`Cannot construct ${lr} due to unbound types`,[yt])}),_t([Ue,He,at],yt?[yt]:[],function(un){un=un[0];var pn,cn;yt?(pn=un.registeredClass,cn=pn.instancePrototype):cn=Zt.prototype;var Cn=nr(lr,function(){if(Object.getPrototypeOf(this)!==er)throw new Jt("Use 'new' to construct "+lr);if(dr.constructor_body===void 0)throw new Jt(lr+" has no accessible constructor");var os=dr.constructor_body[arguments.length];if(os===void 0)throw new Jt(`Tried to invoke ctor of ${lr} with invalid number of parameters (${arguments.length}) - expected (${Object.keys(dr.constructor_body).toString()}) parameters instead!`);return os.apply(this,arguments)}),er=Object.create(cn,{constructor:{value:Cn}});Cn.prototype=er;var dr=new on(lr,Cn,er,Dr,pn,Mt,Ut,tr);if(dr.baseClass){var mn,Sn;(Sn=(mn=dr.baseClass).__derivedClasses)!==null&&Sn!==void 0||(mn.__derivedClasses=[]),dr.baseClass.__derivedClasses.push(dr)}var Dn=new Rn(lr,dr,!0,!1,!1),qn=new Rn(lr+"*",dr,!1,!1,!1),as=new Rn(lr+" const*",dr,!1,!0,!1);return Tt[Ue]={pointerType:qn,constPointerType:as},Ni(zr,Cn),[Dn,qn,as]})},jn=(Ue,He)=>{for(var at=[],yt=0;yt<Ue;yt++)at.push(z[He+yt*4>>2]);return at};function ys(Ue){for(var He=1;He<Ue.length;++He)if(Ue[He]!==null&&Ue[He].destructorFunction===void 0)return!0;return!1}function zn(Ue,He,at,yt,kt,Mt){var Ot=He.length;Ot<2&&jt("argTypes array size mismatch! Must at least get return value and 'this' types!");var Ut=He[1]!==null&&at!==null,Yt=ys(He),tr=He[0].name!=="void",lr=Ot-2,vr=new Array(lr),Dr=[],zr=[],un=function(){arguments.length!==lr&&jt(`function ${Ue} called with ${arguments.length} arguments, expected ${lr}`),zr.length=0;var pn;Dr.length=Ut?2:1,Dr[0]=kt,Ut&&(pn=He[1].toWireType(zr,this),Dr[1]=pn);for(var cn=0;cn<lr;++cn)vr[cn]=He[cn+2].toWireType(zr,arguments[cn]),Dr.push(vr[cn]);var Cn=yt.apply(null,Dr);function er(dr){if(Yt)Rt(zr);else for(var mn=Ut?1:2;mn<He.length;mn++){var Sn=mn===1?pn:vr[mn-2];He[mn].destructorFunction!==null&&He[mn].destructorFunction(Sn)}if(tr)return He[0].fromWireType(dr)}return er(Cn)};return nr(Ue,un)}var bs=(Ue,He,at,yt,kt,Mt)=>{var Ot=jn(He,at);kt=In(yt,kt),_t([],[Ue],function(Ut){Ut=Ut[0];var Yt=`constructor ${Ut.name}`;if(Ut.registeredClass.constructor_body===void 0&&(Ut.registeredClass.constructor_body=[]),Ut.registeredClass.constructor_body[He-1]!==void 0)throw new Jt(`Cannot register multiple constructors with identical number of parameters (${He-1}) for class '${Ut.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Ut.registeredClass.constructor_body[He-1]=()=>{Ln(`Cannot construct ${Ut.name} due to unbound types`,Ot)},_t([],Ot,tr=>(tr.splice(1,0,null),Ut.registeredClass.constructor_body[He-1]=zn(Yt,tr,null,kt,Mt),[])),[]})},Ui=Ue=>{Ue=Ue.trim();const He=Ue.indexOf("(");return He!==-1?Ue.substr(0,He):Ue},ws=(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt)=>{var tr=jn(at,yt);He=Ft(He),He=Ui(He),Mt=In(kt,Mt),_t([],[Ue],function(lr){lr=lr[0];var vr=`${lr.name}.${He}`;He.startsWith("@@")&&(He=Symbol[He.substring(2)]),Ut&&lr.registeredClass.pureVirtualFunctions.push(He);function Dr(){Ln(`Cannot call ${vr} due to unbound types`,tr)}var zr=lr.registeredClass.instancePrototype,un=zr[He];return un===void 0||un.overloadTable===void 0&&un.className!==lr.name&&un.argCount===at-2?(Dr.argCount=at-2,Dr.className=lr.name,zr[He]=Dr):(Xt(zr,He,vr),zr[He].overloadTable[at-2]=Dr),_t([],tr,function(pn){var cn=zn(vr,pn,lr,Mt,Ot);return zr[He].overloadTable===void 0?(cn.argCount=at-2,zr[He]=cn):zr[He].overloadTable[at-2]=cn,[]}),[]})};function _s(){Object.assign(ji.prototype,{get(Ue){return this.allocated[Ue]},has(Ue){return this.allocated[Ue]!==void 0},allocate(Ue){var He=this.freelist.pop()||this.allocated.length;return this.allocated[He]=Ue,He},free(Ue){this.allocated[Ue]=void 0,this.freelist.push(Ue)}})}function ji(){this.allocated=[void 0],this.freelist=[]}var An=new ji,Hn=Ue=>{Ue>=An.reserved&&--An.get(Ue).refcount===0&&An.free(Ue)},xs=()=>{for(var Ue=0,He=An.reserved;He<An.allocated.length;++He)An.allocated[He]!==void 0&&++Ue;return Ue},Ss=()=>{An.allocated.push({value:void 0},{value:null},{value:!0},{value:!1}),An.reserved=An.allocated.length,g.count_emval_handles=xs},Pn={toValue:Ue=>(Ue||jt("Cannot use deleted val. handle = "+Ue),An.get(Ue).value),toHandle:Ue=>{switch(Ue){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:return An.allocate({refcount:1,value:Ue})}}},Es=(Ue,He)=>{He=Ft(He),ir(Ue,{name:He,fromWireType:at=>{var yt=Pn.toValue(at);return Hn(at),yt},toWireType:(at,yt)=>Pn.toHandle(yt),argPackAdvance:cr,readValueFromPointer:$t,destructorFunction:null})},Cs=(Ue,He,at)=>{switch(He){case 1:return at?function(yt){return this.fromWireType(O[yt>>0])}:function(yt){return this.fromWireType(L[yt>>0])};case 2:return at?function(yt){return this.fromWireType(F[yt>>1])}:function(yt){return this.fromWireType(U[yt>>1])};case 4:return at?function(yt){return this.fromWireType(j[yt>>2])}:function(yt){return this.fromWireType(z[yt>>2])};default:throw new TypeError(`invalid integer width (${He}): ${Ue}`)}},Ts=(Ue,He,at,yt)=>{He=Ft(He);function kt(){}kt.values={},ir(Ue,{name:He,constructor:kt,fromWireType:function(Mt){return this.constructor.values[Mt]},toWireType:(Mt,Ot)=>Ot.value,argPackAdvance:cr,readValueFromPointer:Cs(He,at,yt),destructorFunction:null}),Qt(He,kt)},Wn=(Ue,He)=>{var at=Ge[Ue];return at===void 0&&jt(He+" has unknown type "+qi(Ue)),at},ks=(Ue,He,at)=>{var yt=Wn(Ue,"enum");He=Ft(He);var kt=yt.constructor,Mt=Object.create(yt.constructor.prototype,{value:{value:at},constructor:{value:nr(`${yt.name}_${He}`,function(){})}});kt.values[at]=Mt,kt[He]=Mt},Gn=Ue=>{if(Ue===null)return"null";var He=typeof Ue;return He==="object"||He==="array"||He==="function"?Ue.toString():""+Ue},Rs=(Ue,He)=>{switch(He){case 4:return function(at){return this.fromWireType(W[at>>2])};case 8:return function(at){return this.fromWireType(X[at>>3])};default:throw new TypeError(`invalid float width (${He}): ${Ue}`)}},As=(Ue,He,at)=>{He=Ft(He),ir(Ue,{name:He,fromWireType:yt=>yt,toWireType:(yt,kt)=>kt,argPackAdvance:cr,readValueFromPointer:Rs(He,at),destructorFunction:null})},Is=(Ue,He,at,yt,kt,Mt,Ot)=>{var Ut=jn(He,at);Ue=Ft(Ue),Ue=Ui(Ue),kt=In(yt,kt),Qt(Ue,function(){Ln(`Cannot call ${Ue} due to unbound types`,Ut)},He-1),_t([],Ut,function(Yt){var tr=[Yt[0],null].concat(Yt.slice(1));return Ni(Ue,zn(Ue,tr,null,kt,Mt),He-1),[]})},Ps=(Ue,He,at)=>{switch(He){case 1:return at?yt=>O[yt>>0]:yt=>L[yt>>0];case 2:return at?yt=>F[yt>>1]:yt=>U[yt>>1];case 4:return at?yt=>j[yt>>2]:yt=>z[yt>>2];default:throw new TypeError(`invalid integer width (${He}): ${Ue}`)}},Bs=(Ue,He,at,yt,kt)=>{He=Ft(He);var Mt=lr=>lr;if(yt===0){var Ot=32-8*at;Mt=lr=>lr<<Ot>>>Ot}var Ut=He.includes("unsigned"),Yt=(lr,vr)=>{},tr;Ut?tr=function(lr,vr){return Yt(vr,this.name),vr>>>0}:tr=function(lr,vr){return Yt(vr,this.name),vr},ir(Ue,{name:He,fromWireType:Mt,toWireType:tr,argPackAdvance:cr,readValueFromPointer:Ps(He,at,yt!==0),destructorFunction:null})},$s=(Ue,He,at)=>{var yt=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],kt=yt[He];function Mt(Ot){var Ut=z[Ot>>2],Yt=z[Ot+4>>2];return new kt(O.buffer,Yt,Ut)}at=Ft(at),ir(Ue,{name:at,fromWireType:Mt,argPackAdvance:cr,readValueFromPointer:Mt},{ignoreDuplicateRegistrations:!0})},zi=(Ue,He,at,yt)=>{if(!(yt>0))return 0;for(var kt=at,Mt=at+yt-1,Ot=0;Ot<Ue.length;++Ot){var Ut=Ue.charCodeAt(Ot);if(Ut>=55296&&Ut<=57343){var Yt=Ue.charCodeAt(++Ot);Ut=65536+((Ut&1023)<<10)|Yt&1023}if(Ut<=127){if(at>=Mt)break;He[at++]=Ut}else if(Ut<=2047){if(at+1>=Mt)break;He[at++]=192|Ut>>6,He[at++]=128|Ut&63}else if(Ut<=65535){if(at+2>=Mt)break;He[at++]=224|Ut>>12,He[at++]=128|Ut>>6&63,He[at++]=128|Ut&63}else{if(at+3>=Mt)break;He[at++]=240|Ut>>18,He[at++]=128|Ut>>12&63,He[at++]=128|Ut>>6&63,He[at++]=128|Ut&63}}return He[at]=0,at-kt},Ds=(Ue,He,at)=>zi(Ue,L,He,at),Hi=Ue=>{for(var He=0,at=0;at<Ue.length;++at){var yt=Ue.charCodeAt(at);yt<=127?He++:yt<=2047?He+=2:yt>=55296&&yt<=57343?(He+=4,++at):He+=3}return He},Wi=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ns=(Ue,He,at)=>{for(var yt=He+at,kt=He;Ue[kt]&&!(kt>=yt);)++kt;if(kt-He>16&&Ue.buffer&&Wi)return Wi.decode(Ue.subarray(He,kt));for(var Mt="";He<kt;){var Ot=Ue[He++];if(!(Ot&128)){Mt+=String.fromCharCode(Ot);continue}var Ut=Ue[He++]&63;if((Ot&224)==192){Mt+=String.fromCharCode((Ot&31)<<6|Ut);continue}var Yt=Ue[He++]&63;if((Ot&240)==224?Ot=(Ot&15)<<12|Ut<<6|Yt:Ot=(Ot&7)<<18|Ut<<12|Yt<<6|Ue[He++]&63,Ot<65536)Mt+=String.fromCharCode(Ot);else{var tr=Ot-65536;Mt+=String.fromCharCode(55296|tr>>10,56320|tr&1023)}}return Mt},Kn=(Ue,He)=>Ue?Ns(L,Ue,He):"",Ms=(Ue,He)=>{He=Ft(He);var at=He==="std::string";ir(Ue,{name:He,fromWireType(yt){var kt=z[yt>>2],Mt=yt+4,Ot;if(at)for(var Ut=Mt,Yt=0;Yt<=kt;++Yt){var tr=Mt+Yt;if(Yt==kt||L[tr]==0){var lr=tr-Ut,vr=Kn(Ut,lr);Ot===void 0?Ot=vr:(Ot+="\0",Ot+=vr),Ut=tr+1}}else{for(var Dr=new Array(kt),Yt=0;Yt<kt;++Yt)Dr[Yt]=String.fromCharCode(L[Mt+Yt]);Ot=Dr.join("")}return Bn(yt),Ot},toWireType(yt,kt){kt instanceof ArrayBuffer&&(kt=new Uint8Array(kt));var Mt,Ot=typeof kt=="string";Ot||kt instanceof Uint8Array||kt instanceof Uint8ClampedArray||kt instanceof Int8Array||jt("Cannot pass non-string to std::string"),at&&Ot?Mt=Hi(kt):Mt=kt.length;var Ut=Jn(4+Mt+1),Yt=Ut+4;if(z[Ut>>2]=Mt,at&&Ot)Ds(kt,Yt,Mt+1);else if(Ot)for(var tr=0;tr<Mt;++tr){var lr=kt.charCodeAt(tr);lr>255&&(Bn(Yt),jt("String has UTF-16 code units that do not fit in 8 bits")),L[Yt+tr]=lr}else for(var tr=0;tr<Mt;++tr)L[Yt+tr]=kt[tr];return yt!==null&&yt.push(Bn,Ut),Ut},argPackAdvance:cr,readValueFromPointer:En,destructorFunction(yt){Bn(yt)}})},Gi=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Os=(Ue,He)=>{for(var at=Ue,yt=at>>1,kt=yt+He/2;!(yt>=kt)&&U[yt];)++yt;if(at=yt<<1,at-Ue>32&&Gi)return Gi.decode(L.subarray(Ue,at));for(var Mt="",Ot=0;!(Ot>=He/2);++Ot){var Ut=F[Ue+Ot*2>>1];if(Ut==0)break;Mt+=String.fromCharCode(Ut)}return Mt},Ls=(Ue,He,at)=>{var yt;if((yt=at)!==null&&yt!==void 0||(at=2147483647),at<2)return 0;at-=2;for(var kt=He,Mt=at<Ue.length*2?at/2:Ue.length,Ot=0;Ot<Mt;++Ot){var Ut=Ue.charCodeAt(Ot);F[He>>1]=Ut,He+=2}return F[He>>1]=0,He-kt},Fs=Ue=>Ue.length*2,Vs=(Ue,He)=>{for(var at=0,yt="";!(at>=He/4);){var kt=j[Ue+at*4>>2];if(kt==0)break;if(++at,kt>=65536){var Mt=kt-65536;yt+=String.fromCharCode(55296|Mt>>10,56320|Mt&1023)}else yt+=String.fromCharCode(kt)}return yt},qs=(Ue,He,at)=>{var yt;if((yt=at)!==null&&yt!==void 0||(at=2147483647),at<4)return 0;for(var kt=He,Mt=kt+at-4,Ot=0;Ot<Ue.length;++Ot){var Ut=Ue.charCodeAt(Ot);if(Ut>=55296&&Ut<=57343){var Yt=Ue.charCodeAt(++Ot);Ut=65536+((Ut&1023)<<10)|Yt&1023}if(j[He>>2]=Ut,He+=4,He+4>Mt)break}return j[He>>2]=0,He-kt},Us=Ue=>{for(var He=0,at=0;at<Ue.length;++at){var yt=Ue.charCodeAt(at);yt>=55296&&yt<=57343&&++at,He+=4}return He},js=(Ue,He,at)=>{at=Ft(at);var yt,kt,Mt,Ot,Ut;He===2?(yt=Os,kt=Ls,Ot=Fs,Mt=()=>U,Ut=1):He===4&&(yt=Vs,kt=qs,Ot=Us,Mt=()=>z,Ut=2),ir(Ue,{name:at,fromWireType:Yt=>{for(var tr=z[Yt>>2],lr=Mt(),vr,Dr=Yt+4,zr=0;zr<=tr;++zr){var un=Yt+4+zr*He;if(zr==tr||lr[un>>Ut]==0){var pn=un-Dr,cn=yt(Dr,pn);vr===void 0?vr=cn:(vr+="\0",vr+=cn),Dr=un+He}}return Bn(Yt),vr},toWireType:(Yt,tr)=>{typeof tr!="string"&&jt(`Cannot pass non-string to C++ string type ${at}`);var lr=Ot(tr),vr=Jn(4+lr+He);return z[vr>>2]=lr>>Ut,kt(tr,vr+4,lr+He),Yt!==null&&Yt.push(Bn,vr),vr},argPackAdvance:cr,readValueFromPointer:$t,destructorFunction(Yt){Bn(Yt)}})},zs=(Ue,He,at,yt,kt,Mt)=>{Et[Ue]={name:Ft(He),rawConstructor:In(at,yt),rawDestructor:In(kt,Mt),fields:[]}},Hs=(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt,tr)=>{Et[Ue].fields.push({fieldName:Ft(He),getterReturnType:at,getter:In(yt,kt),getterContext:Mt,setterArgumentType:Ot,setter:In(Ut,Yt),setterContext:tr})},Ws=(Ue,He)=>{He=Ft(He),ir(Ue,{isVoid:!0,name:He,argPackAdvance:0,fromWireType:()=>{},toWireType:(at,yt)=>{}})},Xn=[],Gs=(Ue,He,at,yt)=>(Ue=Xn[Ue],He=Pn.toValue(He),Ue(null,He,at,yt)),Ks={},Xs=Ue=>{var He=Ks[Ue];return He===void 0?Ft(Ue):He},Ki=()=>{if(typeof globalThis=="object")return globalThis;function Ue(He){He.$$$embind_global$$$=He;var at=typeof $$$embind_global$$$=="object"&&He.$$$embind_global$$$==He;return at||delete He.$$$embind_global$$$,at}if(typeof $$$embind_global$$$=="object"||(typeof global$1=="object"&&Ue(global$1)?$$$embind_global$$$=global$1:typeof self=="object"&&Ue(self)&&($$$embind_global$$$=self),typeof $$$embind_global$$$=="object"))return $$$embind_global$$$;throw Error("unable to get global object.")},Ys=Ue=>Ue===0?Pn.toHandle(Ki()):(Ue=Xs(Ue),Pn.toHandle(Ki()[Ue])),Js=Ue=>{var He=Xn.length;return Xn.push(Ue),He},Zs=(Ue,He)=>{for(var at=new Array(Ue),yt=0;yt<Ue;++yt)at[yt]=Wn(z[He+yt*4>>2],"parameter "+yt);return at},Qs=Reflect.construct,ea=(Ue,He,at)=>{var yt=[],kt=Ue.toWireType(yt,at);return yt.length&&(z[He>>2]=Pn.toHandle(yt)),kt},ta=(Ue,He,at)=>{var yt=Zs(Ue,He),kt=yt.shift();Ue--;var Mt=new Array(Ue),Ot=(Yt,tr,lr,vr)=>{for(var Dr=0,zr=0;zr<Ue;++zr)Mt[zr]=yt[zr].readValueFromPointer(vr+Dr),Dr+=yt[zr].argPackAdvance;for(var un=at===1?Qs(tr,Mt):tr.apply(Yt,Mt),zr=0;zr<Ue;++zr){var pn,cn;(pn=(cn=yt[zr]).deleteObject)===null||pn===void 0||pn.call(cn,Mt[zr])}return ea(kt,lr,un)},Ut=`methodCaller<(${yt.map(Yt=>Yt.name).join(", ")}) => ${kt.name}>`;return Js(nr(Ut,Ot))},ra=Ue=>{Ue>4&&(An.get(Ue).refcount+=1)},na=Ue=>{var He=Pn.toValue(Ue);Rt(He),Hn(Ue)},ia=(Ue,He)=>{Ue=Wn(Ue,"_emval_take_value");var at=Ue.readValueFromPointer(He);return Pn.toHandle(at)},sa=()=>{Y("")},aa=(Ue,He,at)=>L.copyWithin(Ue,He,He+at),oa=()=>2147483648,ca=Ue=>{var He=N.buffer,at=(Ue-He.byteLength+65535)/65536;try{return N.grow(at),ie(),1}catch{}},la=Ue=>{var He=L.length;Ue>>>=0;var at=oa();if(Ue>at)return!1;for(var yt=(Yt,tr)=>Yt+(tr-Yt%tr)%tr,kt=1;kt<=4;kt*=2){var Mt=He*(1+.2/kt);Mt=Math.min(Mt,Ue+100663296);var Ot=Math.min(at,yt(Math.max(Ue,Mt),65536)),Ut=ca(Ot);if(Ut)return!0}return!1},Yn={},ua=()=>E||"./this.program",Nn=()=>{if(!Nn.strings){var Ue=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",He={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:Ue,_:ua()};for(var at in Yn)Yn[at]===void 0?delete He[at]:He[at]=Yn[at];var yt=[];for(var at in He)yt.push(`${at}=${He[at]}`);Nn.strings=yt}return Nn.strings},fa=(Ue,He)=>{for(var at=0;at<Ue.length;++at)O[He++>>0]=Ue.charCodeAt(at);O[He>>0]=0},da=(Ue,He)=>{var at=0;return Nn().forEach((yt,kt)=>{var Mt=He+at;z[Ue+kt*4>>2]=Mt,fa(yt,Mt),at+=yt.length+1}),0},ha=(Ue,He)=>{var at=Nn();z[Ue>>2]=at.length;var yt=0;return at.forEach(kt=>yt+=kt.length+1),z[He>>2]=yt,0},pa=Ue=>Ue,Fn=Ue=>Ue%4===0&&(Ue%100!==0||Ue%400===0),ma=(Ue,He)=>{for(var at=0,yt=0;yt<=He;at+=Ue[yt++]);return at},Yi=[31,29,31,30,31,30,31,31,30,31,30,31],Ji=[31,28,31,30,31,30,31,31,30,31,30,31],ga=(Ue,He)=>{for(var at=new Date(Ue.getTime());He>0;){var yt=Fn(at.getFullYear()),kt=at.getMonth(),Mt=(yt?Yi:Ji)[kt];if(He>Mt-at.getDate())He-=Mt-at.getDate()+1,at.setDate(1),kt<11?at.setMonth(kt+1):(at.setMonth(0),at.setFullYear(at.getFullYear()+1));else return at.setDate(at.getDate()+He),at}return at};function va(Ue,He,at){var yt=Hi(Ue)+1,kt=new Array(yt);return zi(Ue,kt,0,kt.length),kt}var ya=(Ue,He)=>{O.set(Ue,He)},ba=(Ue,He,at,yt)=>{var kt=z[yt+40>>2],Mt={tm_sec:j[yt>>2],tm_min:j[yt+4>>2],tm_hour:j[yt+8>>2],tm_mday:j[yt+12>>2],tm_mon:j[yt+16>>2],tm_year:j[yt+20>>2],tm_wday:j[yt+24>>2],tm_yday:j[yt+28>>2],tm_isdst:j[yt+32>>2],tm_gmtoff:j[yt+36>>2],tm_zone:kt?Kn(kt):""},Ot=Kn(at),Ut={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Yt in Ut)Ot=Ot.replace(new RegExp(Yt,"g"),Ut[Yt]);var tr=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],lr=["January","February","March","April","May","June","July","August","September","October","November","December"];function vr(er,dr,mn){for(var Sn=typeof er=="number"?er.toString():er||"";Sn.length<dr;)Sn=mn[0]+Sn;return Sn}function Dr(er,dr){return vr(er,dr,"0")}function zr(er,dr){function mn(Dn){return Dn<0?-1:Dn>0?1:0}var Sn;return(Sn=mn(er.getFullYear()-dr.getFullYear()))===0&&(Sn=mn(er.getMonth()-dr.getMonth()))===0&&(Sn=mn(er.getDate()-dr.getDate())),Sn}function un(er){switch(er.getDay()){case 0:return new Date(er.getFullYear()-1,11,29);case 1:return er;case 2:return new Date(er.getFullYear(),0,3);case 3:return new Date(er.getFullYear(),0,2);case 4:return new Date(er.getFullYear(),0,1);case 5:return new Date(er.getFullYear()-1,11,31);case 6:return new Date(er.getFullYear()-1,11,30)}}function pn(er){var dr=ga(new Date(er.tm_year+1900,0,1),er.tm_yday),mn=new Date(dr.getFullYear(),0,4),Sn=new Date(dr.getFullYear()+1,0,4),Dn=un(mn),qn=un(Sn);return zr(Dn,dr)<=0?zr(qn,dr)<=0?dr.getFullYear()+1:dr.getFullYear():dr.getFullYear()-1}var cn={"%a":er=>tr[er.tm_wday].substring(0,3),"%A":er=>tr[er.tm_wday],"%b":er=>lr[er.tm_mon].substring(0,3),"%B":er=>lr[er.tm_mon],"%C":er=>{var dr=er.tm_year+1900;return Dr(dr/100|0,2)},"%d":er=>Dr(er.tm_mday,2),"%e":er=>vr(er.tm_mday,2," "),"%g":er=>pn(er).toString().substring(2),"%G":er=>pn(er),"%H":er=>Dr(er.tm_hour,2),"%I":er=>{var dr=er.tm_hour;return dr==0?dr=12:dr>12&&(dr-=12),Dr(dr,2)},"%j":er=>Dr(er.tm_mday+ma(Fn(er.tm_year+1900)?Yi:Ji,er.tm_mon-1),3),"%m":er=>Dr(er.tm_mon+1,2),"%M":er=>Dr(er.tm_min,2),"%n":()=>`
`,"%p":er=>er.tm_hour>=0&&er.tm_hour<12?"AM":"PM","%S":er=>Dr(er.tm_sec,2),"%t":()=>"	","%u":er=>er.tm_wday||7,"%U":er=>{var dr=er.tm_yday+7-er.tm_wday;return Dr(Math.floor(dr/7),2)},"%V":er=>{var dr=Math.floor((er.tm_yday+7-(er.tm_wday+6)%7)/7);if((er.tm_wday+371-er.tm_yday-2)%7<=2&&dr++,dr){if(dr==53){var mn=(er.tm_wday+371-er.tm_yday)%7;mn!=4&&(mn!=3||!Fn(er.tm_year))&&(dr=1)}}else{dr=52;var Sn=(er.tm_wday+7-er.tm_yday-1)%7;(Sn==4||Sn==5&&Fn(er.tm_year%400-1))&&dr++}return Dr(dr,2)},"%w":er=>er.tm_wday,"%W":er=>{var dr=er.tm_yday+7-(er.tm_wday+6)%7;return Dr(Math.floor(dr/7),2)},"%y":er=>(er.tm_year+1900).toString().substring(2),"%Y":er=>er.tm_year+1900,"%z":er=>{var dr=er.tm_gmtoff,mn=dr>=0;return dr=Math.abs(dr)/60,dr=dr/60*100+dr%60,(mn?"+":"-")+("0000"+dr).slice(-4)},"%Z":er=>er.tm_zone,"%%":()=>"%"};Ot=Ot.replace(/%%/g,"\0\0");for(var Yt in cn)Ot.includes(Yt)&&(Ot=Ot.replace(new RegExp(Yt,"g"),cn[Yt](Mt)));Ot=Ot.replace(/\0\0/g,"%");var Cn=va(Ot);return Cn.length>He?0:(ya(Cn,Ue),Cn.length-1)},wa=(Ue,He,at,yt,kt)=>ba(Ue,He,at,yt);Ve=g.InternalError=class extends Error{constructor(Ue){super(Ue),this.name="InternalError"}},zt(),Jt=g.BindingError=class extends Error{constructor(Ue){super(Ue),this.name="BindingError"}},Ht(),mt(),xn(),Vi=g.UnboundTypeError=gs(Error,"UnboundTypeError"),_s(),Ss();var xa={s:_e,u:Ke,b:Je,g:Qe,q:rt,J:wt,f:bt,V:xt,d:Le,da:ft,Q:ht,_:sr,ca:vs,ba:bs,w:ws,Y:Es,x:Ts,h:ks,L:As,M:Is,t:Bs,o:$s,K:Ms,C:js,A:zs,ea:Hs,$:Ws,R:Gs,ha:Hn,fa:Ys,Z:ta,N:ra,O:na,aa:ia,B:sa,X:aa,W:la,T:da,U:ha,E:La,D:ka,F:Oa,n:Fa,a:Sa,e:Aa,m:Ta,k:Pa,H:Na,v:$a,G:Ma,z:qa,P:ja,l:Ia,j:Ra,c:Ca,p:Ea,I:Da,r:Va,i:Ba,y:Ua,ga:pa,S:wa},yn=We(),Bn=g._free=Ue=>(Bn=g._free=yn.ka)(Ue),Jn=g._malloc=Ue=>(Jn=g._malloc=yn.la)(Ue),Zi=Ue=>(Zi=yn.na)(Ue),ln=(Ue,He)=>(ln=yn.oa)(Ue,He),Mn=Ue=>(Mn=yn.pa)(Ue),dn=()=>(dn=yn.qa)(),hn=Ue=>(hn=yn.ra)(Ue),Qi=Ue=>(Qi=yn.sa)(Ue),es=Ue=>(es=yn.ta)(Ue),ts=(Ue,He,at)=>(ts=yn.ua)(Ue,He,at),rs=Ue=>(rs=yn.va)(Ue);g.dynCall_viijii=(Ue,He,at,yt,kt,Mt,Ot)=>(g.dynCall_viijii=yn.wa)(Ue,He,at,yt,kt,Mt,Ot);var ns=g.dynCall_jiiii=(Ue,He,at,yt,kt)=>(ns=g.dynCall_jiiii=yn.xa)(Ue,He,at,yt,kt);g.dynCall_iiiiij=(Ue,He,at,yt,kt,Mt,Ot)=>(g.dynCall_iiiiij=yn.ya)(Ue,He,at,yt,kt,Mt,Ot),g.dynCall_iiiiijj=(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt)=>(g.dynCall_iiiiijj=yn.za)(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt),g.dynCall_iiiiiijj=(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt,tr)=>(g.dynCall_iiiiiijj=yn.Aa)(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt,tr);function Sa(Ue,He){var at=dn();try{return fn(Ue)(He)}catch(yt){if(hn(at),yt!==yt+0)throw yt;ln(1,0)}}function Ea(Ue,He,at,yt){var kt=dn();try{fn(Ue)(He,at,yt)}catch(Mt){if(hn(kt),Mt!==Mt+0)throw Mt;ln(1,0)}}function Ca(Ue,He,at){var yt=dn();try{fn(Ue)(He,at)}catch(kt){if(hn(yt),kt!==kt+0)throw kt;ln(1,0)}}function Ta(Ue,He,at,yt){var kt=dn();try{return fn(Ue)(He,at,yt)}catch(Mt){if(hn(kt),Mt!==Mt+0)throw Mt;ln(1,0)}}function ka(Ue,He,at,yt,kt){var Mt=dn();try{return fn(Ue)(He,at,yt,kt)}catch(Ot){if(hn(Mt),Ot!==Ot+0)throw Ot;ln(1,0)}}function Ra(Ue,He){var at=dn();try{fn(Ue)(He)}catch(yt){if(hn(at),yt!==yt+0)throw yt;ln(1,0)}}function Aa(Ue,He,at){var yt=dn();try{return fn(Ue)(He,at)}catch(kt){if(hn(yt),kt!==kt+0)throw kt;ln(1,0)}}function Ia(Ue){var He=dn();try{fn(Ue)()}catch(at){if(hn(He),at!==at+0)throw at;ln(1,0)}}function Pa(Ue,He,at,yt,kt){var Mt=dn();try{return fn(Ue)(He,at,yt,kt)}catch(Ot){if(hn(Mt),Ot!==Ot+0)throw Ot;ln(1,0)}}function Ba(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt,tr,lr){var vr=dn();try{fn(Ue)(He,at,yt,kt,Mt,Ot,Ut,Yt,tr,lr)}catch(Dr){if(hn(vr),Dr!==Dr+0)throw Dr;ln(1,0)}}function $a(Ue,He,at,yt,kt,Mt,Ot){var Ut=dn();try{return fn(Ue)(He,at,yt,kt,Mt,Ot)}catch(Yt){if(hn(Ut),Yt!==Yt+0)throw Yt;ln(1,0)}}function Da(Ue,He,at,yt,kt){var Mt=dn();try{fn(Ue)(He,at,yt,kt)}catch(Ot){if(hn(Mt),Ot!==Ot+0)throw Ot;ln(1,0)}}function Na(Ue,He,at,yt,kt,Mt){var Ot=dn();try{return fn(Ue)(He,at,yt,kt,Mt)}catch(Ut){if(hn(Ot),Ut!==Ut+0)throw Ut;ln(1,0)}}function Ma(Ue,He,at,yt,kt,Mt,Ot,Ut){var Yt=dn();try{return fn(Ue)(He,at,yt,kt,Mt,Ot,Ut)}catch(tr){if(hn(Yt),tr!==tr+0)throw tr;ln(1,0)}}function Oa(Ue,He,at,yt){var kt=dn();try{return fn(Ue)(He,at,yt)}catch(Mt){if(hn(kt),Mt!==Mt+0)throw Mt;ln(1,0)}}function La(Ue,He,at,yt){var kt=dn();try{return fn(Ue)(He,at,yt)}catch(Mt){if(hn(kt),Mt!==Mt+0)throw Mt;ln(1,0)}}function Fa(Ue){var He=dn();try{return fn(Ue)()}catch(at){if(hn(He),at!==at+0)throw at;ln(1,0)}}function Va(Ue,He,at,yt,kt,Mt,Ot,Ut){var Yt=dn();try{fn(Ue)(He,at,yt,kt,Mt,Ot,Ut)}catch(tr){if(hn(Yt),tr!==tr+0)throw tr;ln(1,0)}}function qa(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt,tr,lr,vr){var Dr=dn();try{return fn(Ue)(He,at,yt,kt,Mt,Ot,Ut,Yt,tr,lr,vr)}catch(zr){if(hn(Dr),zr!==zr+0)throw zr;ln(1,0)}}function Ua(Ue,He,at,yt,kt,Mt,Ot,Ut,Yt,tr,lr,vr,Dr,zr,un,pn){var cn=dn();try{fn(Ue)(He,at,yt,kt,Mt,Ot,Ut,Yt,tr,lr,vr,Dr,zr,un,pn)}catch(Cn){if(hn(cn),Cn!==Cn+0)throw Cn;ln(1,0)}}function ja(Ue,He,at,yt,kt){var Mt=dn();try{return ns(Ue,He,at,yt,kt)}catch(Ot){if(hn(Mt),Ot!==Ot+0)throw Ot;ln(1,0)}}var Vn;ue=function Ue(){Vn||ss(),Vn||(ue=Ue)};function ss(){if(ce>0||(G(),ce>0))return;function Ue(){Vn||(Vn=!0,g.calledRun=!0,!M&&(J(),_(g),g.onRuntimeInitialized&&g.onRuntimeInitialized(),q()))}g.setStatus?(g.setStatus("Running..."),setTimeout(function(){setTimeout(function(){g.setStatus("")},1),Ue()},1)):Ue()}if(g.preInit)for(typeof g.preInit=="function"&&(g.preInit=[g.preInit]);g.preInit.length>0;)g.preInit.pop()();return ss(),r.ready}})();function Yo(n){return Bt(dt,n)}async function Jo(n,r){return zo(dt,n,r)}async function Qo(n,r){return Go(dt,n,r)}var je;class ut extends EventTarget{constructor(r={}){var g;super(),Co(this,je,void 0);try{const _=(g=r?.formats)==null?void 0:g.filter(x=>x!=="unknown");if(_?.length===0)throw new TypeError("Hint option provided, but is empty.");_?.forEach(x=>{if(!st.has(x))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${x}' is not a valid enum value of type BarcodeFormat.`)}),$o(this,je,_??[]),Yo().then(x=>{this.dispatchEvent(new CustomEvent("load",{detail:x}))}).catch(x=>{this.dispatchEvent(new CustomEvent("error",{detail:x}))})}catch(_){throw Cr(_,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return _o.filter(r=>r!=="unknown")}async detect(r){try{const g=await Mo(r);if(g===null)return[];let _;try{jr(g)?_=await Jo(g,{tryHarder:!0,formats:br(this,je).map(x=>st.get(x))}):_=await Qo(g,{tryHarder:!0,formats:br(this,je).map(x=>st.get(x))})}catch(x){throw console.error(x),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return _.map(x=>{const{topLeft:{x:S,y:E},topRight:{x:C,y:T},bottomLeft:{x:R,y:A},bottomRight:{x:I,y:B}}=x.position,D=Math.min(S,C,R,I),N=Math.min(E,T,A,B),M=Math.max(S,C,R,I),O=Math.max(E,T,A,B);return{boundingBox:new DOMRectReadOnly(D,N,M-D,O-N),rawValue:x.text,format:So(x.format),cornerPoints:[{x:S,y:E},{x:C,y:T},{x:I,y:B},{x:R,y:A}]}})}catch(g){throw Cr(g,"Failed to execute 'detect' on 'BarcodeDetector'")}}}je=new WeakMap;const Vt=(n,r,g="error")=>{let _,x;const S=new Promise((E,C)=>{_=E,x=C,n.addEventListener(r,_),n.addEventListener(g,x)});return S.finally(()=>{n.removeEventListener(r,_),n.removeEventListener(g,x)}),S},Sr=n=>new Promise(r=>setTimeout(r,n));class Vr extends Error{constructor(){super("this browser has no Stream API support"),this.name="StreamApiNotSupportedError"}}class Zo extends Error{constructor(){super("camera access is only permitted in secure context. Use HTTPS or localhost rather than HTTP."),this.name="InsecureContextError"}}class Ko extends Error{constructor(){super("Loading camera stream timed out after 6 seconds. If you are on iOS in PWA mode, this is a known issue (see https://github.com/gruhn/vue-qrcode-reader/issues/298)"),this.name="StreamLoadTimeoutError"}}let qr;async function ei(n){if(window.BarcodeDetector===void 0)return console.debug("[vue-qrcode-reader] Native BarcodeDetector not supported. Will use polyfill."),new ut({formats:n});const r=await window.BarcodeDetector.getSupportedFormats(),g=n.filter(_=>!r.includes(_));return g.length>0?(console.debug(`[vue-qrcode-reader] Native BarcodeDetector does not support formats ${JSON.stringify(g)}. Will use polyfill.`),new ut({formats:n})):(console.debug("[vue-qrcode-reader] Will use native BarcodeDetector."),new window.BarcodeDetector({formats:n}))}async function Nr(n){qr=await ei(n)}const ti=async(n,{detectHandler:r,locateHandler:g,minDelay:_,formats:x})=>{console.debug("[vue-qrcode-reader] start scanning"),await Nr(x);const S=E=>async C=>{if(n.readyState===0)console.debug("[vue-qrcode-reader] stop scanning: video element readyState is 0");else{const{lastScanned:T,contentBefore:R,lastScanHadContent:A}=E;if(C-T<_)window.requestAnimationFrame(S(E));else{const I=await qr.detect(n),B=I.some(M=>!R.includes(M.rawValue));B&&r(I);const D=I.length>0;D&&g(I),!D&&A&&g(I);const N={lastScanned:C,lastScanHadContent:D,contentBefore:B?I.map(M=>M.rawValue):R};window.requestAnimationFrame(S(N))}}};S({lastScanned:performance.now(),contentBefore:[],lastScanHadContent:!1})(performance.now())};var Gr={},Q={};Object.defineProperty(Q,"__esModule",{value:!0});Q.compactObject=Qr;Q.deprecated=fi;var ai=Q.detectBrowser=hi;Q.disableLog=ui;Q.disableWarnings=li;Q.extractVersion=ct;Q.filterStats=pi;Q.log=di;Q.walkStats=lt;Q.wrapPeerConnectionEvent=ci;function oi(n,r,g){return r=ii(r),r in n?Object.defineProperty(n,r,{value:g,enumerable:!0,configurable:!0,writable:!0}):n[r]=g,n}function ii(n){var r=si(n,"string");return pe(r)==="symbol"?r:String(r)}function si(n,r){if(pe(n)!=="object"||n===null)return n;var g=n[Symbol.toPrimitive];if(g!==void 0){var _=g.call(n,r||"default");if(pe(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function pe(n){"@babel/helpers - typeof";return pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},pe(n)}var Yr=!0,Jr=!0;function ct(n,r,g){var _=n.match(r);return _&&_.length>=g&&parseInt(_[g],10)}function ci(n,r,g){if(n.RTCPeerConnection){var _=n.RTCPeerConnection.prototype,x=_.addEventListener;_.addEventListener=function(E,C){if(E!==r)return x.apply(this,arguments);var T=function(R){var A=g(R);A&&(C.handleEvent?C.handleEvent(A):C(A))};return this._eventMap=this._eventMap||{},this._eventMap[r]||(this._eventMap[r]=new Map),this._eventMap[r].set(C,T),x.apply(this,[E,T])};var S=_.removeEventListener;_.removeEventListener=function(E,C){if(E!==r||!this._eventMap||!this._eventMap[r])return S.apply(this,arguments);if(!this._eventMap[r].has(C))return S.apply(this,arguments);var T=this._eventMap[r].get(C);return this._eventMap[r].delete(C),this._eventMap[r].size===0&&delete this._eventMap[r],Object.keys(this._eventMap).length===0&&delete this._eventMap,S.apply(this,[E,T])},Object.defineProperty(_,"on"+r,{get:function(){return this["_on"+r]},set:function(E){this["_on"+r]&&(this.removeEventListener(r,this["_on"+r]),delete this["_on"+r]),E&&this.addEventListener(r,this["_on"+r]=E)},enumerable:!0,configurable:!0})}}function ui(n){return typeof n!="boolean"?new Error("Argument type: "+pe(n)+". Please use a boolean."):(Yr=n,n?"adapter.js logging disabled":"adapter.js logging enabled")}function li(n){return typeof n!="boolean"?new Error("Argument type: "+pe(n)+". Please use a boolean."):(Jr=!n,"adapter.js deprecation warnings "+(n?"disabled":"enabled"))}function di(){if((typeof window>"u"?"undefined":pe(window))==="object"){if(Yr)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function fi(n,r){Jr&&console.warn(n+" is deprecated, please use "+r+" instead.")}function hi(n){var r={browser:null,version:null};if(typeof n>"u"||!n.navigator||!n.navigator.userAgent)return r.browser="Not a browser.",r;var g=n.navigator;if(g.mozGetUserMedia)r.browser="firefox",r.version=ct(g.userAgent,/Firefox\/(\d+)\./,1);else if(g.webkitGetUserMedia||n.isSecureContext===!1&&n.webkitRTCPeerConnection)r.browser="chrome",r.version=ct(g.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.RTCPeerConnection&&g.userAgent.match(/AppleWebKit\/(\d+)\./))r.browser="safari",r.version=ct(g.userAgent,/AppleWebKit\/(\d+)\./,1),r.supportsUnifiedPlan=n.RTCRtpTransceiver&&"currentDirection"in n.RTCRtpTransceiver.prototype;else return r.browser="Not a supported browser.",r;return r}function Pr(n){return Object.prototype.toString.call(n)==="[object Object]"}function Qr(n){return Pr(n)?Object.keys(n).reduce(function(r,g){var _=Pr(n[g]),x=_?Qr(n[g]):n[g],S=_&&!Object.keys(x).length;return x===void 0||S?r:Object.assign(r,oi({},g,x))},{}):n}function lt(n,r,g){!r||g.has(r.id)||(g.set(r.id,r),Object.keys(r).forEach(function(_){_.endsWith("Id")?lt(n,n.get(r[_]),g):_.endsWith("Ids")&&r[_].forEach(function(x){lt(n,n.get(x),g)})}))}function pi(n,r,g){var _=g?"outbound-rtp":"inbound-rtp",x=new Map;if(r===null)return x;var S=[];return n.forEach(function(E){E.type==="track"&&E.trackIdentifier===r.id&&S.push(E)}),S.forEach(function(E){n.forEach(function(C){C.type===_&&C.trackId===E.id&&lt(n,C,x)})}),x}Object.defineProperty(Gr,"__esModule",{value:!0});var mi=Gr.shimGetUserMedia=gi,vi=yi(Q);function Xr(n){if(typeof WeakMap!="function")return null;var r=new WeakMap,g=new WeakMap;return(Xr=function(_){return _?g:r})(n)}function yi(n,r){if(n.__esModule)return n;if(n===null||he(n)!=="object"&&typeof n!="function")return{default:n};var g=Xr(r);if(g&&g.has(n))return g.get(n);var _={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in n)if(S!=="default"&&Object.prototype.hasOwnProperty.call(n,S)){var E=x?Object.getOwnPropertyDescriptor(n,S):null;E&&(E.get||E.set)?Object.defineProperty(_,S,E):_[S]=n[S]}return _.default=n,g&&g.set(n,_),_}function he(n){"@babel/helpers - typeof";return he=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},he(n)}var Tr=vi.log;function gi(n,r){var g=n&&n.navigator;if(g.mediaDevices){var _=function(T){if(he(T)!=="object"||T.mandatory||T.optional)return T;var R={};return Object.keys(T).forEach(function(A){if(!(A==="require"||A==="advanced"||A==="mediaSource")){var I=he(T[A])==="object"?T[A]:{ideal:T[A]};I.exact!==void 0&&typeof I.exact=="number"&&(I.min=I.max=I.exact);var B=function(N,M){return N?N+M.charAt(0).toUpperCase()+M.slice(1):M==="deviceId"?"sourceId":M};if(I.ideal!==void 0){R.optional=R.optional||[];var D={};typeof I.ideal=="number"?(D[B("min",A)]=I.ideal,R.optional.push(D),D={},D[B("max",A)]=I.ideal,R.optional.push(D)):(D[B("",A)]=I.ideal,R.optional.push(D))}I.exact!==void 0&&typeof I.exact!="number"?(R.mandatory=R.mandatory||{},R.mandatory[B("",A)]=I.exact):["min","max"].forEach(function(N){I[N]!==void 0&&(R.mandatory=R.mandatory||{},R.mandatory[B(N,A)]=I[N])})}}),T.advanced&&(R.optional=(R.optional||[]).concat(T.advanced)),R},x=function(T,R){if(r.version>=61)return R(T);if(T=JSON.parse(JSON.stringify(T)),T&&he(T.audio)==="object"){var A=function(N,M,O){M in N&&!(O in N)&&(N[O]=N[M],delete N[M])};T=JSON.parse(JSON.stringify(T)),A(T.audio,"autoGainControl","googAutoGainControl"),A(T.audio,"noiseSuppression","googNoiseSuppression"),T.audio=_(T.audio)}if(T&&he(T.video)==="object"){var I=T.video.facingMode;I=I&&(he(I)==="object"?I:{ideal:I});var B=r.version<66;if(I&&(I.exact==="user"||I.exact==="environment"||I.ideal==="user"||I.ideal==="environment")&&!(g.mediaDevices.getSupportedConstraints&&g.mediaDevices.getSupportedConstraints().facingMode&&!B)){delete T.video.facingMode;var D;if(I.exact==="environment"||I.ideal==="environment"?D=["back","rear"]:(I.exact==="user"||I.ideal==="user")&&(D=["front"]),D)return g.mediaDevices.enumerateDevices().then(function(N){N=N.filter(function(O){return O.kind==="videoinput"});var M=N.find(function(O){return D.some(function(L){return O.label.toLowerCase().includes(L)})});return!M&&N.length&&D.includes("back")&&(M=N[N.length-1]),M&&(T.video.deviceId=I.exact?{exact:M.deviceId}:{ideal:M.deviceId}),T.video=_(T.video),Tr("chrome: "+JSON.stringify(T)),R(T)})}T.video=_(T.video)}return Tr("chrome: "+JSON.stringify(T)),R(T)},S=function(T){return r.version>=64?T:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[T.name]||T.name,message:T.message,constraint:T.constraint||T.constraintName,toString:function(){return this.name+(this.message&&": ")+this.message}}},E=function(T,R,A){x(T,function(I){g.webkitGetUserMedia(I,R,function(B){A&&A(S(B))})})};if(g.getUserMedia=E.bind(g),g.mediaDevices.getUserMedia){var C=g.mediaDevices.getUserMedia.bind(g.mediaDevices);g.mediaDevices.getUserMedia=function(T){return x(T,function(R){return C(R).then(function(A){if(R.audio&&!A.getAudioTracks().length||R.video&&!A.getVideoTracks().length)throw A.getTracks().forEach(function(I){I.stop()}),new DOMException("","NotFoundError");return A},function(A){return Promise.reject(S(A))})})}}}}var Zr={};Object.defineProperty(Zr,"__esModule",{value:!0});var wi=Zr.shimGetUserMedia=$i,bi=Ci(Q);function Kr(n){if(typeof WeakMap!="function")return null;var r=new WeakMap,g=new WeakMap;return(Kr=function(_){return _?g:r})(n)}function Ci(n,r){if(n.__esModule)return n;if(n===null||Pe(n)!=="object"&&typeof n!="function")return{default:n};var g=Kr(r);if(g&&g.has(n))return g.get(n);var _={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in n)if(S!=="default"&&Object.prototype.hasOwnProperty.call(n,S)){var E=x?Object.getOwnPropertyDescriptor(n,S):null;E&&(E.get||E.set)?Object.defineProperty(_,S,E):_[S]=n[S]}return _.default=n,g&&g.set(n,_),_}function Pe(n){"@babel/helpers - typeof";return Pe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Pe(n)}function $i(n,r){var g=n&&n.navigator,_=n&&n.MediaStreamTrack;if(g.getUserMedia=function(T,R,A){bi.deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),g.mediaDevices.getUserMedia(T).then(R,A)},!(r.version>55&&"autoGainControl"in g.mediaDevices.getSupportedConstraints())){var x=function(T,R,A){R in T&&!(A in T)&&(T[A]=T[R],delete T[R])},S=g.mediaDevices.getUserMedia.bind(g.mediaDevices);if(g.mediaDevices.getUserMedia=function(T){return Pe(T)==="object"&&Pe(T.audio)==="object"&&(T=JSON.parse(JSON.stringify(T)),x(T.audio,"autoGainControl","mozAutoGainControl"),x(T.audio,"noiseSuppression","mozNoiseSuppression")),S(T)},_&&_.prototype.getSettings){var E=_.prototype.getSettings;_.prototype.getSettings=function(){var T=E.apply(this,arguments);return x(T,"mozAutoGainControl","autoGainControl"),x(T,"mozNoiseSuppression","noiseSuppression"),T}}if(_&&_.prototype.applyConstraints){var C=_.prototype.applyConstraints;_.prototype.applyConstraints=function(T){return this.kind==="audio"&&Pe(T)==="object"&&(T=JSON.parse(JSON.stringify(T)),x(T,"autoGainControl","mozAutoGainControl"),x(T,"noiseSuppression","mozNoiseSuppression")),C.apply(this,[T])}}}}var oe={};Object.defineProperty(oe,"__esModule",{value:!0});oe.shimAudioContext=xi;oe.shimCallbacksAPI=Ei;oe.shimConstraints=rn;oe.shimCreateOfferLegacy=Ai;var _i=oe.shimGetUserMedia=Oi;oe.shimLocalStreamsAPI=Pi;oe.shimRTCIceServerUrls=Di;oe.shimRemoteStreamsAPI=Ti;oe.shimTrackEventTransceiver=Mi;var en=Si(Q);function tn(n){if(typeof WeakMap!="function")return null;var r=new WeakMap,g=new WeakMap;return(tn=function(_){return _?g:r})(n)}function Si(n,r){if(n.__esModule)return n;if(n===null||me(n)!=="object"&&typeof n!="function")return{default:n};var g=tn(r);if(g&&g.has(n))return g.get(n);var _={},x=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var S in n)if(S!=="default"&&Object.prototype.hasOwnProperty.call(n,S)){var E=x?Object.getOwnPropertyDescriptor(n,S):null;E&&(E.get||E.set)?Object.defineProperty(_,S,E):_[S]=n[S]}return _.default=n,g&&g.set(n,_),_}function me(n){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},me(n)}function Pi(n){if(!(me(n)!=="object"||!n.RTCPeerConnection)){if("getLocalStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in n.RTCPeerConnection.prototype)){var r=n.RTCPeerConnection.prototype.addTrack;n.RTCPeerConnection.prototype.addStream=function(g){var _=this;this._localStreams||(this._localStreams=[]),this._localStreams.includes(g)||this._localStreams.push(g),g.getAudioTracks().forEach(function(x){return r.call(_,x,g)}),g.getVideoTracks().forEach(function(x){return r.call(_,x,g)})},n.RTCPeerConnection.prototype.addTrack=function(g){for(var _=this,x=arguments.length,S=new Array(x>1?x-1:0),E=1;E<x;E++)S[E-1]=arguments[E];return S&&S.forEach(function(C){_._localStreams?_._localStreams.includes(C)||_._localStreams.push(C):_._localStreams=[C]}),r.apply(this,arguments)}}"removeStream"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.removeStream=function(g){var _=this;this._localStreams||(this._localStreams=[]);var x=this._localStreams.indexOf(g);if(x!==-1){this._localStreams.splice(x,1);var S=g.getTracks();this.getSenders().forEach(function(E){S.includes(E.track)&&_.removeTrack(E)})}})}}function Ti(n){if(!(me(n)!=="object"||!n.RTCPeerConnection)&&("getRemoteStreams"in n.RTCPeerConnection.prototype||(n.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in n.RTCPeerConnection.prototype))){Object.defineProperty(n.RTCPeerConnection.prototype,"onaddstream",{get:function(){return this._onaddstream},set:function(g){var _=this;this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=g),this.addEventListener("track",this._onaddstreampoly=function(x){x.streams.forEach(function(S){if(_._remoteStreams||(_._remoteStreams=[]),!_._remoteStreams.includes(S)){_._remoteStreams.push(S);var E=new Event("addstream");E.stream=S,_.dispatchEvent(E)}})})}});var r=n.RTCPeerConnection.prototype.setRemoteDescription;n.RTCPeerConnection.prototype.setRemoteDescription=function(){var g=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(_){_.streams.forEach(function(x){if(g._remoteStreams||(g._remoteStreams=[]),!(g._remoteStreams.indexOf(x)>=0)){g._remoteStreams.push(x);var S=new Event("addstream");S.stream=x,g.dispatchEvent(S)}})}),r.apply(g,arguments)}}}function Ei(n){if(!(me(n)!=="object"||!n.RTCPeerConnection)){var r=n.RTCPeerConnection.prototype,g=r.createOffer,_=r.createAnswer,x=r.setLocalDescription,S=r.setRemoteDescription,E=r.addIceCandidate;r.createOffer=function(T,R){var A=arguments.length>=2?arguments[2]:arguments[0],I=g.apply(this,[A]);return R?(I.then(T,R),Promise.resolve()):I},r.createAnswer=function(T,R){var A=arguments.length>=2?arguments[2]:arguments[0],I=_.apply(this,[A]);return R?(I.then(T,R),Promise.resolve()):I};var C=function(T,R,A){var I=x.apply(this,[T]);return A?(I.then(R,A),Promise.resolve()):I};r.setLocalDescription=C,C=function(T,R,A){var I=S.apply(this,[T]);return A?(I.then(R,A),Promise.resolve()):I},r.setRemoteDescription=C,C=function(T,R,A){var I=E.apply(this,[T]);return A?(I.then(R,A),Promise.resolve()):I},r.addIceCandidate=C}}function Oi(n){var r=n&&n.navigator;if(r.mediaDevices&&r.mediaDevices.getUserMedia){var g=r.mediaDevices,_=g.getUserMedia.bind(g);r.mediaDevices.getUserMedia=function(x){return _(rn(x))}}!r.getUserMedia&&r.mediaDevices&&r.mediaDevices.getUserMedia&&(r.getUserMedia=function(x,S,E){r.mediaDevices.getUserMedia(x).then(S,E)}.bind(r))}function rn(n){return n&&n.video!==void 0?Object.assign({},n,{video:en.compactObject(n.video)}):n}function Di(n){if(n.RTCPeerConnection){var r=n.RTCPeerConnection;n.RTCPeerConnection=function(g,_){if(g&&g.iceServers){for(var x=[],S=0;S<g.iceServers.length;S++){var E=g.iceServers[S];E.urls===void 0&&E.url?(en.deprecated("RTCIceServer.url","RTCIceServer.urls"),E=JSON.parse(JSON.stringify(E)),E.urls=E.url,delete E.url,x.push(E)):x.push(g.iceServers[S])}g.iceServers=x}return new r(g,_)},n.RTCPeerConnection.prototype=r.prototype,"generateCertificate"in r&&Object.defineProperty(n.RTCPeerConnection,"generateCertificate",{get:function(){return r.generateCertificate}})}}function Mi(n){me(n)==="object"&&n.RTCTrackEvent&&"receiver"in n.RTCTrackEvent.prototype&&!("transceiver"in n.RTCTrackEvent.prototype)&&Object.defineProperty(n.RTCTrackEvent.prototype,"transceiver",{get:function(){return{receiver:this.receiver}}})}function Ai(n){var r=n.RTCPeerConnection.prototype.createOffer;n.RTCPeerConnection.prototype.createOffer=function(g){if(g){typeof g.offerToReceiveAudio<"u"&&(g.offerToReceiveAudio=!!g.offerToReceiveAudio);var _=this.getTransceivers().find(function(S){return S.receiver.track.kind==="audio"});g.offerToReceiveAudio===!1&&_?_.direction==="sendrecv"?_.setDirection?_.setDirection("sendonly"):_.direction="sendonly":_.direction==="recvonly"&&(_.setDirection?_.setDirection("inactive"):_.direction="inactive"):g.offerToReceiveAudio===!0&&!_&&this.addTransceiver("audio",{direction:"recvonly"}),typeof g.offerToReceiveVideo<"u"&&(g.offerToReceiveVideo=!!g.offerToReceiveVideo);var x=this.getTransceivers().find(function(S){return S.receiver.track.kind==="video"});g.offerToReceiveVideo===!1&&x?x.direction==="sendrecv"?x.setDirection?x.setDirection("sendonly"):x.direction="sendonly":x.direction==="recvonly"&&(x.setDirection?x.setDirection("inactive"):x.direction="inactive"):g.offerToReceiveVideo===!0&&!x&&this.addTransceiver("video",{direction:"recvonly"})}return r.apply(this,arguments)}}function xi(n){me(n)!=="object"||n.AudioContext||(n.AudioContext=n.webkitAudioContext)}const Ri=n=>{let r=!1,g;return(..._)=>(r||(g=n(_),r=!0),g)};function ae(n,r){if(n===!1)throw new Error(r??"assertion failure")}function Er(n){throw new Error("this code should be unreachable")}const ki=Ri(()=>{const n=ai(window);switch(n.browser){case"chrome":mi(window,n);break;case"firefox":wi(window,n);break;case"safari":_i(window,n);break;default:throw new Vr}});let Te=Promise.resolve({type:"stop",data:{}});async function Or(n,r,g){var _,x,S;if(console.debug("[vue-qrcode-reader] starting camera with constraints: ",JSON.stringify(r)),window.isSecureContext!==!0)throw new Zo;if(((_=navigator?.mediaDevices)==null?void 0:_.getUserMedia)===void 0)throw new Vr;ki(),console.debug("[vue-qrcode-reader] calling getUserMedia");const E=await navigator.mediaDevices.getUserMedia({audio:!1,video:r});n.srcObject!==void 0?n.srcObject=E:n.mozSrcObject!==void 0?n.mozSrcObject=E:window.URL.createObjectURL?n.src=window.URL.createObjectURL(E):window.webkitURL?n.src=window.webkitURL.createObjectURL(E):n.src=E.id,n.play(),console.debug("[vue-qrcode-reader] waiting for video element to load"),await Promise.race([Vt(n,"loadeddata"),Sr(6e3).then(()=>{throw new Ko})]),console.debug("[vue-qrcode-reader] video element loaded"),await Sr(500);const[C]=E.getVideoTracks(),T=(S=(x=C?.getCapabilities)==null?void 0:x.call(C))!=null?S:{};let R=!1;return g&&T.torch&&(await C.applyConstraints({advanced:[{torch:!0}]}),R=!0),console.debug("[vue-qrcode-reader] camera ready"),{type:"start",data:{videoEl:n,stream:E,capabilities:T,constraints:r,isTorchOn:R}}}async function Ii(n,{constraints:r,torch:g,restart:_=!1}){Te=Te.then(S=>{if(S.type==="start"){const{data:{videoEl:E,stream:C,constraints:T,isTorchOn:R}}=S;return!_&&n===E&&r===T&&g===R?S:nn(E,C,R).then(()=>Or(n,r,g))}else if(S.type==="stop"||S.type==="failed")return Or(n,r,g);Er()}).catch(S=>(console.debug(`[vue-qrcode-reader] starting camera failed with "${S}"`),{type:"failed",error:S}));const x=await Te;if(x.type==="stop")throw new Error("Something went wrong with the camera task queue (start task).");if(x.type==="failed")throw x.error;if(x.type==="start")return x.data.capabilities;Er()}async function nn(n,r,g){console.debug("[vue-qrcode-reader] stopping camera"),n.src="",n.srcObject=null,n.load(),await Vt(n,"error");for(const _ of r.getTracks())g!=null||await _.applyConstraints({advanced:[{torch:!1}]}),r.removeTrack(_),_.stop();return{type:"stop",data:{}}}async function it(){if(Te=Te.then(n=>{if(n.type==="stop"||n.type==="failed")return n;const{data:{videoEl:r,stream:g,isTorchOn:_}}=n;return nn(r,g,_)}),(await Te).type==="start")throw new Error("Something went wrong with the camera task queue (stop task).")}const Fi=defineComponent$1({__name:"QrcodeStream",props:{constraints:{default:()=>({facingMode:"environment"})},formats:{default:()=>["qr_code"]},paused:{type:Boolean,default:!1},torch:{type:Boolean,default:!1},track:{type:Function,default:void 0}},emits:["detect","camera-on","camera-off","error"],setup(n,{emit:r}){const g=n,_=r,x=ref$2(g.constraints),S=ref$2(g.formats);watch(()=>g.constraints,(U,j)=>{JSON.stringify(U)!==JSON.stringify(j)&&(x.value=U)},{deep:!0}),watch(()=>g.formats,(U,j)=>{JSON.stringify(U)!==JSON.stringify(j)&&(S.value=U)},{deep:!0});const E=ref$2(),C=ref$2(),T=ref$2(),R=ref$2(!1),A=ref$2(!1);onMounted(()=>{A.value=!0}),onUnmounted(()=>{it()});const I=computed(()=>({torch:g.torch,constraints:x.value,shouldStream:A.value&&!g.paused}));watch(I,async U=>{const j=T.value;ae(j!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus video element should always be defined.");const z=E.value;ae(z!==void 0,"cameraSettings watcher should never be triggered when component is not mounted. Thus canvas should always be defined.");const W=z.getContext("2d");if(ae(W!==null,"if cavnas is defined, canvas 2d context should also be non-null"),U.shouldStream){it(),R.value=!1;try{const X=await Ii(j,U);A.value?(R.value=!0,_("camera-on",X)):await it()}catch(X){_("error",X)}}else z.width=j.videoWidth,z.height=j.videoHeight,W.drawImage(j,0,0,j.videoWidth,j.videoHeight),it(),R.value=!1,_("camera-off")},{deep:!0}),watch(S,async U=>{A.value&&await Nr(U)});const B=computed(()=>I.value.shouldStream&&R.value);watch(B,U=>{if(U){ae(E.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus pause frame canvas is defined"),D(E.value),ae(C.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus tracking canvas is defined"),D(C.value);const j=()=>g.track===void 0?500:40;ae(T.value!==void 0,"shouldScan watcher should only be triggered when component is mounted. Thus video element is defined"),ti(T.value,{detectHandler:z=>_("detect",z),formats:S.value,locateHandler:N,minDelay:j()})}});const D=U=>{const j=U.getContext("2d");ae(j!==null,"canvas 2d context should always be non-null"),j.clearRect(0,0,U.width,U.height)},N=U=>{const j=C.value;ae(j!==void 0,"onLocate handler should only be called when component is mounted. Thus tracking canvas is always defined.");const z=T.value;if(ae(z!==void 0,"onLocate handler should only be called when component is mounted. Thus video element is always defined."),U.length===0||g.track===void 0)D(j);else{const W=z.offsetWidth,X=z.offsetHeight,ie=z.videoWidth,fe=z.videoHeight,xe=Math.max(W/ie,X/fe),we=ie*xe,G=fe*xe,J=we/ie,q=G/fe,H=(W-we)/2,ve=(X-G)/2,Z=({x:te,y:Y})=>({x:Math.floor(te*J),y:Math.floor(Y*q)}),ce=({x:te,y:Y})=>({x:Math.floor(te+H),y:Math.floor(Y+ve)}),ue=U.map(te=>{const{boundingBox:Y,cornerPoints:be}=te,{x:ye,y:Ie}=ce(Z({x:Y.x,y:Y.y})),{x:ke,y:Ce}=Z({x:Y.width,y:Y.height});return{...te,cornerPoints:be.map(Ae=>ce(Z(Ae))),boundingBox:DOMRectReadOnly.fromRect({x:ye,y:Ie,width:ke,height:Ce})}});j.width=z.offsetWidth,j.height=z.offsetHeight;const se=j.getContext("2d");ae(se!==null,"canvas 2d context should always be non-null"),g.track(ue,se)}},M={width:"100%",height:"100%",position:"relative","z-index":"0"},O={width:"100%",height:"100%",position:"absolute",top:"0",left:"0"},L={width:"100%",height:"100%","object-fit":"cover"},F=computed(()=>B.value?L:{...L,visibility:"hidden",position:"absolute"});return(U,j)=>(openBlock(),createElementBlock("div",{style:M},[createBaseVNode("video",{ref_key:"videoRef",ref:T,style:normalizeStyle(F.value),autoplay:"",muted:"",playsinline:""},null,4),withDirectives(createBaseVNode("canvas",{id:"qrcode-stream-pause-frame",ref_key:"pauseFrameRef",ref:E,style:L},null,512),[[vShow,!B.value]]),createBaseVNode("canvas",{id:"qrcode-stream-tracking-layer",ref_key:"trackingLayerRef",ref:C,style:O},null,512),createBaseVNode("div",{style:O},[renderSlot(U.$slots,"default")])]))}}),_sfc_main$6=defineComponent$1({__name:"LecteurCodeR2",props:{schema:{}},emits:["detecte"],setup(n,{emit:r}){const{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),x=new Ajv,S=n,E=r;onMounted(async()=>{isElectronRenderer&&await demanderAccèsMédia()});function C(I,B){if(B)for(const D of I){const{boundingBox:{x:N,y:M,width:O,height:L}}=D;B.lineWidth=2,B.strokeStyle="#007bff",B.strokeRect(N,M,O,L)}}const T=I=>{R.value=void 0;const B=I[0].rawValue;if(S.schema){const D=x.compile(S.schema);try{const N=JSON.parse(B);try{D(N)?E("detecte",{valTexte:B,valJSON:N}):R.value="valeurCodeInvalide"}catch{R.value="valeurCodeInvalide"}}catch{R.value="valeurCodeInvalide"}}else E("detecte",{valTexte:B})},R=ref$2();function A(I){switch(I.name){case"NotAllowedError":R.value="permission";break;case"NotFoundError":R.value="pasDeCaméra";break;case"NotSupportedError":case"InsecureContextError":R.value="contexteInsécure";break;case"NotReadableError":R.value="caméraUtilisée";break;case"OverconstrainedError":R.value="erreurCaméra";break;case"StreamApiNotSupportedError":R.value="navigNonSupporté";break;default:R.value="autreErreur";break}}return(I,B)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(VExpandTransition,null,{default:withCtx(()=>[createVNode(unref(Fi),{track:C,onDetect:B[0]||(B[0]=D=>T(D)),onError:B[1]||(B[1]=D=>A(D))})]),_:1}),createVNode(VExpandTransition,null,{default:withCtx(()=>[R.value?(openBlock(),createBlock(VAlert,{key:0,text:unref(_)(`communs.lecteurCodeR2.erreurs.${R.value}`),type:"error",variant:"tonal",closable:""},null,8,["text"])):createCommentVNode("",!0)]),_:1})],64))}}),schémaCodeR2Connexion={type:"object",properties:{type:{type:"string",const:"connexion"},adresses:{type:"array",items:{type:"string"}}},required:["type","adresses"]},schémaCodeR2AjoutDispositif={type:"object",properties:{type:{type:"string",const:"ajout dispositif"},idCompte:{type:"string"},codeSecret:{type:"string"},adresses:{type:"array",items:{type:"string"},nullable:!0}},required:["type","idCompte","codeSecret"]},_hoisted_1$2={class:"mt-3 text-center text-caption"},_hoisted_2$2={key:0},_hoisted_3$2={class:"my-3 text-disabled"},_hoisted_4$1={key:1},_hoisted_5={class:"mb-4"},_hoisted_6={class:"mb-4"},_hoisted_7={class:"font-weight-bold"},_hoisted_8={class:"mb-4"},_hoisted_9={class:"mb-4"},_hoisted_10={class:"mb-4"},_hoisted_11={key:0,class:"text-center"},_hoisted_12={key:1,class:"text-center"},_hoisted_13={class:"text-center"},_hoisted_14={class:"text-h6 font-weight-light mb-2"},_hoisted_15={class:"text-caption text-grey"},_sfc_main$5=defineComponent$1({__name:"InitialiserCompte",props:{cheminement:{}},setup(n){const r=n,{மொழியாக்கம்_பயன்படுத்து:g}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:_}=g(),{mdAndUp:x}=useDisplay(),{isRtl:S}=useRtl(),{obtImageDéco:E}=utiliserImagesDéco(),C=utiliserConstellation(),T=ref$2(!1),R=["cheminement","noms","image","rejoindreCompte","motDePasse","persister","cestParti"],A=Ce=>R.indexOf(Ce),I=ref$2(r.cheminement===void 0?0:R.indexOf(r.cheminement==="connecter"?"rejoindreCompte":"noms")),B=ref$2(r.cheminement),D=()=>{switch(R[I.value]){case"image":I.value=R.indexOf(isBrowser$1?"persister":"cestParti");break;case"motDePasse":I.value=R.indexOf(isBrowser$1?"persister":"cestParti");break;default:I.value++;break}},N=()=>{switch(R[I.value]){case"rejoindreCompte":I.value=R.indexOf("cheminement");break;case"cestParti":I.value=R.indexOf(isBrowser$1?"persister":B.value==="connecter"?"motDePasse":"image");break;case"persister":I.value=R.indexOf(B.value==="connecter"?"motDePasse":"image");break;default:I.value--;break}},M=computed(()=>{switch(R[I.value]){case"cheminement":return{actif:!1,visible:!1};case"noms":return{actif:Object.keys(z.value).length>0,visible:!0};case"rejoindreCompte":return{actif:!!(J.value&&G.value),visible:!0};case"cestParti":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),O=computed(()=>{const Ce=R[I.value],Ae=r.cheminement!==void 0;switch(Ce){case"rejoindreCompte":case"noms":return{actif:!Ae,visible:!Ae};case"cheminement":return{actif:!1,visible:!1};case"cestParti":return{actif:!ye.value,visible:!0};default:return{actif:!0,visible:!0}}}),L=()=>{B.value="nouveau",I.value=A("noms")},F=()=>{B.value="connecter",I.value=A("rejoindreCompte")},U=computed(()=>{switch(R[I.value]){case"cheminement":return"accueil.initialiserCompte.titreCheminement";case"noms":return"accueil.initialiserCompte.titreNoms";case"image":return"accueil.initialiserCompte.titreImage";case"rejoindreCompte":return _("accueil.initialiserCompte.titreCompteÀRejoindre");case"motDePasse":return"accueil.initialiserCompte.titreMotDePasse";case"persister":return"accueil.initialiserCompte.titrePersister";case"cestParti":return"accueil.initialiserCompte.titreCestParti";default:return""}}),j=computed(()=>{switch(R[I.value]){case"cheminement":return"accueil.initialiserCompte.sousTitreCheminement";case"noms":return"accueil.initialiserCompte.sousTitreNoms";default:return""}}),z=ref$2({}),W=Ce=>{z.value=Ce},X=ref$2(),ie=computed(()=>{if(X.value)return URL.createObjectURL(new Blob([X.value.contenu],{type:"image"}))}),fe=E("profil"),xe=Ce=>{X.value=Ce},we=ref$2("automatique"),G=ref$2(),J=ref$2(),{résultats:q}=rechercher(C.réseau.suivreComptesRéseauEtEnLigne),H=computed(()=>(q.value||[]).filter(Ce=>Ce.idCompte!==ve.value)),ve=suivre(C.suivreIdCompte),Z=suivre(C.réseau.suivreConnexionsPostesSFIP,{}),ce=async({idCompte:Ce,codeSecret:Ae,adresses:Ne})=>{if(Ne)for(const We of Ne)try{await C.réseau.connecterÀAdresse({adresse:We});break}catch{}J.value=Ce,G.value=Ae},ue=async()=>{await navigator.storage.persist()&&(se.value=!0),D()},se=ref$2(!1);navigator.storage.persisted().then(Ce=>se.value=Ce);const te=ref$2(!1),Y=utiliserÉtatConditions(),be=ref$2();__vitePreload(()=>import("./logo-D-tq1ejg.js"),[],import.meta.url).then(Ce=>be.value=Ce.default);const ye=ref$2(!1),Ie=async()=>{if(ye.value=!0,B.value==="nouveau"){for(const[Ce,Ae]of Object.entries(z.value))await C.profil?.sauvegarderNom({langue:Ce,nom:Ae});if(X.value){const{contenu:Ce,fichier:Ae}=X.value;await C.profil?.sauvegarderImage({image:{contenu:new Uint8Array(Ce),nomFichier:Ae}})}await C.profil.initialiser()}else{if(!J.value||!G.value)return;await C.demanderEtPuisRejoindreCompte({idCompte:J.value,codeSecret:G.value})}ye.value=!1},ke=ref$2();return C.suivreIdCompte({f:Ce=>ke.value=Ce}),(Ce,Ae)=>(openBlock(),createBlock(VDialog,{modelValue:T.value,"onUpdate:modelValue":Ae[12]||(Ae[12]=Ne=>T.value=Ne)},{activator:withCtx(({props:Ne})=>[renderSlot(Ce.$slots,"activator",normalizeProps(guardReactiveProps({props:Ne})))]),default:withCtx(()=>[createVNode(VCard,{class:"mx-auto","min-width":unref(x)?500:300},{default:withCtx(()=>[createVNode(VCardItem,null,{default:withCtx(()=>[createVNode(VCardTitle,{class:"text-h5 justify-space-between"},{default:withCtx(()=>[createBaseVNode("span",null,toDisplayString(unref(_)(U.value)),1)]),_:1}),createVNode(VCardSubtitle,null,{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)(j.value)),1)]),_:1})]),_:1}),createVNode(VCardText,null,{default:withCtx(()=>[createVNode(VWindow,{modelValue:I.value,"onUpdate:modelValue":Ae[11]||(Ae[11]=Ne=>I.value=Ne),style:{"overflow-y":"scroll"}},{default:withCtx(()=>[createVNode(VWindowItem,{value:A("cheminement")},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-creation-outline","append-icon":unref(S)?"mdi-chevron-left":"mdi-chevron-right",onClick:L},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("accueil.initialiserCompte.nouveauCompte")),1)]),_:1},8,["append-icon"]),createVNode(VListItem,{"prepend-icon":"mdi-login-variant","append-icon":unref(S)?"mdi-chevron-left":"mdi-chevron-right",onClick:F},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("accueil.initialiserCompte.connecter")),1)]),_:1},8,["append-icon"])]),_:1})]),_:1},8,["value"]),createVNode(VWindowItem,{value:A("noms")},{default:withCtx(()=>[createVNode(_sfc_main$18,{"noms-initiaux":z.value,"etiquette-nom":unref(_)("listeNomsProfil.étiquetteNom"),"indice-nom":unref(_)("listeNomsProfil.indiceNom"),"indice-langue":unref(_)("communs.indiceLangue"),"texte-aucun-nom":unref(_)("communs.texteAucunNom"),"autorisation-modification":"",onAjusterNoms:W},null,8,["noms-initiaux","etiquette-nom","indice-nom","indice-langue","texte-aucun-nom"])]),_:1},8,["value"]),createVNode(VWindowItem,{value:A("image")},{default:withCtx(()=>[createVNode(ImageEditable,{editable:!0,"src-image":ie.value,"img-defaut":unref(fe),"max-taille-image":unref(MAX_TAILLE_IMAGE),"taille-avatar":150,onImageChangee:Ae[0]||(Ae[0]=Ne=>xe(Ne))},null,8,["src-image","img-defaut","max-taille-image"]),createBaseVNode("p",_hoisted_1$2,toDisplayString(unref(_)("accueil.initialiserCompte.texteImage")),1)]),_:1},8,["value"]),createVNode(VWindowItem,{value:A("rejoindreCompte")},{default:withCtx(()=>[createVNode(VBtnToggle,{modelValue:we.value,"onUpdate:modelValue":Ae[1]||(Ae[1]=Ne=>we.value=Ne),color:"primary",class:"mb-2"},{default:withCtx(()=>[createVNode(VBtn,{value:"automatique"},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>Ae[13]||(Ae[13]=[createTextVNode("mdi-qrcode")])),_:1}),createTextVNode(" "+toDisplayString(unref(_)("accueil.initialiserCompte.rejoindreAutomatiquement")),1)]),_:1}),createVNode(VBtn,{value:"manuel"},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>Ae[14]||(Ae[14]=[createTextVNode("mdi-account-search")])),_:1}),createTextVNode(" "+toDisplayString(unref(_)("accueil.initialiserCompte.rejoindreManuellement")),1)]),_:1})]),_:1},8,["modelValue"]),we.value==="manuel"?(openBlock(),createElementBlock("div",_hoisted_2$2,[createVNode(VFadeTransition,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",null,[createTextVNode(toDisplayString(unref(Z))+" ",1),createVNode(VSelect,{modelValue:J.value,"onUpdate:modelValue":Ae[2]||(Ae[2]=Ne=>J.value=Ne),items:H.value.map(Ne=>Ne.idCompte),loading:!H.value.length,disabled:!H.value.length,label:unref(_)("accueil.initialiserCompte.indiceCompte"),variant:"outlined"},{selection:withCtx(({item:Ne})=>[createVNode(_sfc_main$1v,{compte:Ne.value},null,8,["compte"])]),item:withCtx(({item:Ne,props:We})=>[createVNode(_sfc_main$1i,mergeProps(We,{compte:Ne.value,"montrer-anonymes":!0,simple:""}),null,16,["compte"])]),_:1},8,["modelValue","items","loading","disabled","label"]),createBaseVNode("p",_hoisted_3$2,toDisplayString((H.value.length?unref(_)("accueil.initialiserCompte.indiceComptePasVu"):unref(_)("accueil.initialiserCompte.indiceRechercheComptes"))+unref(_)("accueil.initialiserCompte.indiceEssaieDeConnecter")),1)],512),[[vShow,unref(Z)?.length]])]),_:1}),createVNode(VFadeTransition,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",null,toDisplayString(unref(_)("accueil.initialiserCompte.texteEnConnexion")),513),[[vShow,!unref(Z)?.length]])]),_:1})])):(openBlock(),createElementBlock("div",_hoisted_4$1,[createVNode(_sfc_main$6,{schema:unref(schémaCodeR2AjoutDispositif),onDetecte:Ae[3]||(Ae[3]=Ne=>Ne.valJSON&&ce(Ne.valJSON))},null,8,["schema"])]))]),_:1},8,["value"]),createVNode(VWindowItem,{value:4},{default:withCtx(()=>[createBaseVNode("p",_hoisted_5,toDisplayString(unref(_)("accueil.initialiserCompte.texteCodeSecret")),1),createVNode(VTextField,{modelValue:G.value,"onUpdate:modelValue":Ae[4]||(Ae[4]=Ne=>G.value=Ne),label:unref(_)("accueil.initialiserCompte.indiceCodeSecret"),variant:"outlined"},null,8,["modelValue","label"])]),_:1}),createVNode(VWindowItem,{value:A("persister")},{default:withCtx(()=>[createBaseVNode("p",_hoisted_6,toDisplayString(unref(_)("accueil.initialiserCompte.textePersister.0")),1),createBaseVNode("span",_hoisted_7,toDisplayString(unref(_)("accueil.initialiserCompte.plusDInfo")),1),createVNode(VBtn,{icon:te.value?"mdi-chevron-up":"mdi-chevron-down",size:"xsmall",variant:"flat",onClick:Ae[5]||(Ae[5]=()=>te.value=!te.value)},null,8,["icon"]),createVNode(VExpandTransition,null,{default:withCtx(()=>[withDirectives(createBaseVNode("div",null,[createBaseVNode("p",_hoisted_8,toDisplayString(unref(_)("accueil.initialiserCompte.textePersister.1")),1),createBaseVNode("p",_hoisted_9,toDisplayString(unref(_)("accueil.initialiserCompte.textePersister.2")),1),createBaseVNode("p",_hoisted_10,toDisplayString(unref(_)("accueil.initialiserCompte.textePersister.3")),1)],512),[[vShow,te.value]])]),_:1}),se.value?(openBlock(),createElementBlock("div",_hoisted_11,[createVNode(VBtn,{class:"mt-3 mx-3",variant:"outlined",onClick:Ae[6]||(Ae[6]=Ne=>I.value++)},{default:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>Ae[15]||(Ae[15]=[createTextVNode("mdi-check")])),_:1}),createTextVNode(" "+toDisplayString(unref(_)("accueil.initialiserCompte.déjàPersistées")),1)]),_:1})])):(openBlock(),createElementBlock("div",_hoisted_12,[createVNode(VBtn,{class:"mt-3 mx-3",color:"primary",variant:"flat","append-icon":"mdi-content-save-outline",onClick:Ae[7]||(Ae[7]=()=>ue())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("accueil.initialiserCompte.persister")),1)]),_:1}),createVNode(VBtn,{class:"mt-3 mx-3",variant:"outlined","append-icon":"mdi-content-save-off-outline",onClick:Ae[8]||(Ae[8]=Ne=>I.value++)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("accueil.initialiserCompte.pasPersister")),1)]),_:1})]))]),_:1},8,["value"]),createVNode(VWindowItem,{value:A("cestParti")},{default:withCtx(()=>[createVNode(VImg,{class:"mb-4",contain:"",height:"128",src:be.value},null,8,["src"]),createBaseVNode("div",_hoisted_13,[createBaseVNode("h3",_hoisted_14,toDisplayString(unref(_)("accueil.initialiserCompte.bienvenu")),1),createBaseVNode("span",_hoisted_15,toDisplayString(unref(_)("accueil.initialiserCompte.sousTitreBienvenu")),1),createVNode(VCheckbox,{modelValue:unref(Y).acceptées,"onUpdate:modelValue":Ae[9]||(Ae[9]=Ne=>unref(Y).acceptées=Ne),color:"primary","hide-details":"",readonly:""},{label:withCtx(()=>[createVNode(_sfc_main$8,null,{activator:withCtx(({props:Ne})=>[createBaseVNode("div",normalizeProps(guardReactiveProps(Ne)),[createTextVNode(toDisplayString(unref(_)("conditions.jaccepte"))+" ",1),createVNode(VIcon,{end:"",size:"small",icon:"mdi-open-in-new"})],16)]),_:1})]),_:1},8,["modelValue"]),createBaseVNode("p",null,[createVNode(VBtn,{variant:"outlined",disabled:!unref(Y).acceptées,loading:ye.value,onClick:Ae[10]||(Ae[10]=()=>Ie())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(_)("accueil.initialiserCompte.cestParti")),1)]),_:1},8,["disabled","loading"])])])]),_:1},8,["value"])]),_:1},8,["modelValue"])]),_:1}),createVNode(VDivider),createVNode(VCardActions,null,{default:withCtx(()=>[createVNode(_sfc_main$11,{visible:O.value.visible,actif:O.value.actif,onRetour:N},null,8,["visible","actif"]),createVNode(VSpacer),createVNode(_sfc_main$10,{visible:M.value.visible,actif:M.value.actif,onSuivant:D},null,8,["visible","actif"])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),_hoisted_1$1=["width"],_hoisted_2$1=["x1","y1","x2","y2"],_hoisted_3$1=["cx","cy"],_hoisted_4=["to","dur","begin"],_sfc_main$4=defineComponent$1({__name:"LogoAnimé",props:{largeur:{},delai:{},debut:{}},setup(n){const r=n,g=computed(()=>r.delai.toString()+"s"),_=ref$2([{cls:"cls-1",x:70.1742129851985,y:1.87,r:2},{cls:"cls-2",x:67.306684713793,y:16.47,r:5},{cls:"cls-3",x:34.3464829934943,y:10.01,r:3},{cls:"cls-4",x:22.5783740121382,y:31.93,r:3},{cls:"cls-1",x:13.8115094092477,y:56.91,r:2},{cls:"cls-2",x:46.9376282583068,y:69.76,r:6},{cls:"cls-3",x:86.0040169410121,y:61.32,r:4},{cls:"cls-4",x:91.0120944854386,y:54.13,r:2},{cls:"cls-1",x:112.68938567,y:63.71,r:5},{cls:"cls-2",x:100.419159062132,y:66.3,r:2},{cls:"cls-3",x:88.4938654324761,y:82.18,r:4},{cls:"cls-4",x:97.9593284722526,y:84.1,r:3},{cls:"cls-1",x:69.5525695323757,y:90.44,r:5},{cls:"cls-2",x:64.1411605466533,y:94.6,r:2},{cls:"cls-3",x:157.031284111252,y:83.37,r:3},{cls:"cls-4",x:136.188490590752,y:68.42,r:5},{cls:"cls-1",x:142.952888267913,y:53.85,r:2},{cls:"cls-2",x:162.02953761516,y:50.8,r:4},{cls:"cls-3",x:185.910142776055,y:57.71,r:4},{cls:"cls-4",x:137.021896694756,y:38.01,r:5},{cls:"cls-1",x:142.973627909008,y:29.65,r:3}].map(S=>Object.assign({},S,{begin:`${Math.random()*r.debut}s`,i:v4$3()}))),x=ref$2([{x1:70.1742129851985,y1:1.87,x2:34.3464829934943,y2:10.01,i:v4$3()},{x1:67.306684713793,y1:16.47,x2:34.3464829934943,y2:10.01,i:v4$3()},{x1:34.3464829934943,y1:10.01,x2:22.5783740121382,y2:31.93,i:v4$3()},{x1:22.5783740121382,y1:31.93,x2:13.8115094092477,y2:56.91,i:v4$3()},{x1:13.8115094092477,y1:56.91,x2:46.9376282583068,y2:69.76,i:v4$3()},{x1:46.9376282583068,y1:69.76,x2:86.0040169410121,y2:61.32,i:v4$3()},{x1:86.0040169410121,y1:61.32,x2:91.0120944854386,y2:54.13,i:v4$3()},{x1:86.0040169410121,y1:61.32,x2:100.419159062132,y2:66.3,i:v4$3()},{x1:91.0120944854386,y1:54.13,x2:112.68938567,y2:63.71,i:v4$3()},{x1:100.419159062132,y1:66.3,x2:112.68938567,y2:63.71,i:v4$3()},{x1:112.68938567,y1:63.71,x2:97.9593284722526,y2:84.1,i:v4$3()},{x1:97.9593284722526,y1:84.1,x2:88.4938654324761,y2:82.18,i:v4$3()},{x1:88.4938654324761,y1:82.18,x2:69.5525695323757,y2:90.44,i:v4$3()},{x1:69.5525695323757,y1:90.44,x2:64.1411605466533,y2:94.6,i:v4$3()},{x1:112.68938567,y1:63.71,x2:136.188490590752,y2:68.42,i:v4$3()},{x1:136.188490590752,y1:68.42,x2:157.031284111252,y2:83.37,i:v4$3()},{x1:136.188490590752,y1:68.42,x2:142.952888267913,y2:53.85,i:v4$3()},{x1:112.68938567,y1:63.71,x2:142.952888267913,y2:53.85,i:v4$3()},{x1:142.952888267913,y1:53.85,x2:137.021896694756,y2:38.01,i:v4$3()},{x1:91.0120944854386,y1:54.13,x2:137.021896694756,y2:38.01,i:v4$3()},{x1:137.021896694756,y1:38.01,x2:142.973627909008,y2:29.65,i:v4$3()},{x1:137.021896694756,y1:38.01,x2:162.02953761516,y2:50.8,i:v4$3()},{x1:142.952888267913,y1:53.85,x2:162.02953761516,y2:50.8,i:v4$3()},{x1:162.02953761516,y1:50.8,x2:185.910142776055,y2:57.71,i:v4$3()}]);return(S,E)=>(openBlock(),createElementBlock("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -10 200 110",width:S.largeur},[E[0]||(E[0]=createBaseVNode("title",null,"Logo Constellation",-1)),(openBlock(!0),createElementBlock(Fragment,null,renderList(x.value,C=>(openBlock(),createElementBlock("line",{key:C.i,class:"l",x1:C.x1,y1:C.y1,x2:C.x2,y2:C.y2},null,8,_hoisted_2$1))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(_.value,C=>(openBlock(),createElementBlock("circle",{key:C.i,class:normalizeClass(C.cls),cx:C.x,cy:C.y},[createBaseVNode("animate",{attributeName:"r",to:C.r,dur:g.value,begin:C.begin,fill:"freeze",repeatCount:"1"},null,8,_hoisted_4)],10,_hoisted_3$1))),128))],8,_hoisted_1$1))}}),_hoisted_1={class:"text-subtitle-1 text-disabled"},_hoisted_2={class:"my-6",style:{height:"150px"}},_hoisted_3={class:"text-disabled"},_sfc_main$3=defineComponent$1({__name:"AccueilInitial",emits:["entrer"],setup(n,{emit:r}){const{mdAndUp:g}=useDisplay(),{மொழியாக்கம்_பயன்படுத்து:_}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:x}=_(),S=utiliserConstellation(),E="1.0.2",{பதிப்பை_வடிவூட்டு:C}=எண்களைப்_பயன்படுத்து(),T=C(E),R=r,A=()=>R("entrer"),I=ref$2(3),B=ref$2(2),D=ref$2(!1);onMounted(()=>{setTimeout(()=>D.value=!0,(I.value+B.value)*1e3)});const N=ref$2(!1);S.obtIdCompte().then(()=>N.value=!0);const M=suivre(S.profil.suivreInitialisé);return watchEffect(()=>{D.value&&M.value&&A()}),(O,L)=>(openBlock(),createBlock(VContainer,{class:"fill-height"},{default:withCtx(()=>[createVNode(VResponsive,{class:"align-center text-center fill-height"},{default:withCtx(()=>[createVNode(_sfc_main$4,{class:normalizeClass({"my-7":!unref(g)}),largeur:unref(g)?500:250,delai:I.value,debut:B.value},null,8,["class","largeur","delai","debut"]),createBaseVNode("h1",{class:normalizeClass(["mt-6",unref(g)?"text-h1":"text-h3"])},toDisplayString(unref(x)("communs.constellation")),3),createBaseVNode("p",_hoisted_1,toDisplayString(unref(x)("accueil.version",{version:unref(T)})),1),createBaseVNode("div",_hoisted_2,[createVNode(_sfc_main$5,null,{activator:withCtx(({props:F})=>[createVNode(VFadeTransition,mergeProps(F,{"leave-absolute":""}),{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"outlined"},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(x)("accueil.démarrer")),1)]),_:1},512),[[vShow,D.value&&N.value]])]),_:2},1040)]),_:1})]),createBaseVNode("p",_hoisted_3,toDisplayString(unref(x)("accueil.piedDePage")),1)]),_:1})]),_:1}))}});function useSticky(n){let{rootEl:r,isSticky:g,layoutItemStyles:_}=n;const x=shallowRef(!1),S=shallowRef(0),E=computed(()=>{const R=typeof x.value=="boolean"?"top":x.value;return[g.value?{top:"auto",bottom:"auto",height:void 0}:void 0,x.value?{[R]:convertToUnit(S.value)}:{top:_.value.top}]});onMounted(()=>{watch(g,R=>{R?window.addEventListener("scroll",T,{passive:!0}):window.removeEventListener("scroll",T)},{immediate:!0})}),onBeforeUnmount(()=>{window.removeEventListener("scroll",T)});let C=0;function T(){const R=C>window.scrollY?"up":"down",A=r.value.getBoundingClientRect(),I=parseFloat(_.value.top??0),B=window.scrollY-Math.max(0,S.value-I),D=A.height+Math.max(S.value,I)-window.scrollY-window.innerHeight,N=parseFloat(getComputedStyle(r.value).getPropertyValue("--v-body-scroll-y"))||0;A.height<window.innerHeight-I?(x.value="top",S.value=I):R==="up"&&x.value==="bottom"||R==="down"&&x.value==="top"?(S.value=window.scrollY+A.top-N,x.value=!0):R==="down"&&D<=0?(S.value=0,x.value="bottom"):R==="up"&&B<=0&&(N?x.value!=="top"&&(S.value=-B+N+I,x.value="top"):(S.value=A.top+B,x.value="top")),C=window.scrollY}return{isStuck:x,stickyStyles:E}}const HORIZON=100,HISTORY=20;function kineticEnergyToVelocity(n){return(n<0?-1:1)*Math.sqrt(Math.abs(n))*1.41421356237}function calculateImpulseVelocity(n){if(n.length<2)return 0;if(n.length===2)return n[1].t===n[0].t?0:(n[1].d-n[0].d)/(n[1].t-n[0].t);let r=0;for(let g=n.length-1;g>0;g--){if(n[g].t===n[g-1].t)continue;const _=kineticEnergyToVelocity(r),x=(n[g].d-n[g-1].d)/(n[g].t-n[g-1].t);r+=(x-_)*Math.abs(x),g===n.length-1&&(r*=.5)}return kineticEnergyToVelocity(r)*1e3}function useVelocity(){const n={};function r(x){Array.from(x.changedTouches).forEach(S=>{(n[S.identifier]??(n[S.identifier]=new CircularBuffer(HISTORY))).push([x.timeStamp,S])})}function g(x){Array.from(x.changedTouches).forEach(S=>{delete n[S.identifier]})}function _(x){const S=n[x]?.values().reverse();if(!S)throw new Error(`No samples for touch id ${x}`);const E=S[0],C=[],T=[];for(const R of S){if(E[0]-R[0]>HORIZON)break;C.push({t:R[0],d:R[1].clientX}),T.push({t:R[0],d:R[1].clientY})}return{x:calculateImpulseVelocity(C),y:calculateImpulseVelocity(T),get direction(){const{x:R,y:A}=this,[I,B]=[Math.abs(R),Math.abs(A)];return I>B&&R>=0?"right":I>B&&R<=0?"left":B>I&&A>=0?"down":B>I&&A<=0?"up":oops$1()}}}return{addMovement:r,endTouch:g,getVelocity:_}}function oops$1(){throw new Error}function useTouch(n){let{el:r,isActive:g,isTemporary:_,width:x,touchless:S,position:E}=n;onMounted(()=>{window.addEventListener("touchstart",F,{passive:!0}),window.addEventListener("touchmove",U,{passive:!1}),window.addEventListener("touchend",j,{passive:!0})}),onBeforeUnmount(()=>{window.removeEventListener("touchstart",F),window.removeEventListener("touchmove",U),window.removeEventListener("touchend",j)});const C=computed(()=>["left","right"].includes(E.value)),{addMovement:T,endTouch:R,getVelocity:A}=useVelocity();let I=!1;const B=shallowRef(!1),D=shallowRef(0),N=shallowRef(0);let M;function O(W,X){return(E.value==="left"?W:E.value==="right"?document.documentElement.clientWidth-W:E.value==="top"?W:E.value==="bottom"?document.documentElement.clientHeight-W:oops())-(X?x.value:0)}function L(W){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const ie=E.value==="left"?(W-N.value)/x.value:E.value==="right"?(document.documentElement.clientWidth-W-N.value)/x.value:E.value==="top"?(W-N.value)/x.value:E.value==="bottom"?(document.documentElement.clientHeight-W-N.value)/x.value:oops();return X?Math.max(0,Math.min(1,ie)):ie}function F(W){if(S.value)return;const X=W.changedTouches[0].clientX,ie=W.changedTouches[0].clientY,fe=25,xe=E.value==="left"?X<fe:E.value==="right"?X>document.documentElement.clientWidth-fe:E.value==="top"?ie<fe:E.value==="bottom"?ie>document.documentElement.clientHeight-fe:oops(),we=g.value&&(E.value==="left"?X<x.value:E.value==="right"?X>document.documentElement.clientWidth-x.value:E.value==="top"?ie<x.value:E.value==="bottom"?ie>document.documentElement.clientHeight-x.value:oops());(xe||we||g.value&&_.value)&&(M=[X,ie],N.value=O(C.value?X:ie,g.value),D.value=L(C.value?X:ie),I=N.value>-20&&N.value<80,R(W),T(W))}function U(W){const X=W.changedTouches[0].clientX,ie=W.changedTouches[0].clientY;if(I){if(!W.cancelable){I=!1;return}const xe=Math.abs(X-M[0]),we=Math.abs(ie-M[1]);(C.value?xe>we&&xe>3:we>xe&&we>3)?(B.value=!0,I=!1):(C.value?we:xe)>3&&(I=!1)}if(!B.value)return;W.preventDefault(),T(W);const fe=L(C.value?X:ie,!1);D.value=Math.max(0,Math.min(1,fe)),fe>1?N.value=O(C.value?X:ie,!0):fe<0&&(N.value=O(C.value?X:ie,!1))}function j(W){if(I=!1,!B.value)return;T(W),B.value=!1;const X=A(W.changedTouches[0].identifier),ie=Math.abs(X.x),fe=Math.abs(X.y);(C.value?ie>fe&&ie>400:fe>ie&&fe>3)?g.value=X.direction===({left:"right",right:"left",top:"down",bottom:"up"}[E.value]||oops()):g.value=D.value>.5}const z=computed(()=>B.value?{transform:E.value==="left"?`translateX(calc(-100% + ${D.value*x.value}px))`:E.value==="right"?`translateX(calc(100% - ${D.value*x.value}px))`:E.value==="top"?`translateY(calc(-100% + ${D.value*x.value}px))`:E.value==="bottom"?`translateY(calc(100% - ${D.value*x.value}px))`:oops(),transition:"none"}:void 0);return useToggleScope(B,()=>{const W=r.value?.style.transform??null,X=r.value?.style.transition??null;watchEffect(()=>{r.value?.style.setProperty("transform",z.value?.transform||"none"),r.value?.style.setProperty("transition",z.value?.transition||null)}),onScopeDispose(()=>{r.value?.style.setProperty("transform",W),r.value?.style.setProperty("transition",X)})}),{isDragging:B,dragProgress:D,dragStyles:z}}function oops(){throw new Error}const locations=["start","end","left","right","top","bottom"],makeVNavigationDrawerProps=propsFactory({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:n=>locations.includes(n)},sticky:Boolean,...makeBorderProps(),...makeComponentProps(),...makeDelayProps(),...makeDisplayProps({mobile:null}),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"nav"}),...makeThemeProps()},"VNavigationDrawer"),VNavigationDrawer=genericComponent()({name:"VNavigationDrawer",props:makeVNavigationDrawerProps(),emits:{"update:modelValue":n=>!0,"update:rail":n=>!0},setup(n,r){let{attrs:g,emit:_,slots:x}=r;const{isRtl:S}=useRtl(),{themeClasses:E}=provideTheme(n),{borderClasses:C}=useBorder(n),{backgroundColorClasses:T,backgroundColorStyles:R}=useBackgroundColor(toRef(n,"color")),{elevationClasses:A}=useElevation(n),{displayClasses:I,mobile:B}=useDisplay(n),{roundedClasses:D}=useRounded(n),N=useRouter(),M=useProxiedModel(n,"modelValue",null,te=>!!te),{ssrBootStyles:O}=useSsrBoot(),{scopeId:L}=useScopeId(),F=ref$2(),U=shallowRef(!1),{runOpenDelay:j,runCloseDelay:z}=useDelay(n,te=>{U.value=te}),W=computed(()=>n.rail&&n.expandOnHover&&U.value?Number(n.width):Number(n.rail?n.railWidth:n.width)),X=computed(()=>toPhysical(n.location,S.value)),ie=computed(()=>n.persistent),fe=computed(()=>!n.permanent&&(B.value||n.temporary)),xe=computed(()=>n.sticky&&!fe.value&&X.value!=="bottom");useToggleScope(()=>n.expandOnHover&&n.rail!=null,()=>{watch(U,te=>_("update:rail",!te))}),useToggleScope(()=>!n.disableResizeWatcher,()=>{watch(fe,te=>!n.permanent&&nextTick$1(()=>M.value=!te))}),useToggleScope(()=>!n.disableRouteWatcher&&!!N,()=>{watch(N.currentRoute,()=>fe.value&&(M.value=!1))}),watch(()=>n.permanent,te=>{te&&(M.value=!0)}),n.modelValue==null&&!fe.value&&(M.value=n.permanent||!B.value);const{isDragging:we,dragProgress:G}=useTouch({el:F,isActive:M,isTemporary:fe,width:W,touchless:toRef(n,"touchless"),position:X}),J=computed(()=>{const te=fe.value?0:n.rail&&n.expandOnHover?Number(n.railWidth):W.value;return we.value?te*G.value:te}),q=computed(()=>["top","bottom"].includes(n.location)?0:W.value),{layoutItemStyles:H,layoutItemScrimStyles:ve}=useLayoutItem({id:n.name,order:computed(()=>parseInt(n.order,10)),position:X,layoutSize:J,elementSize:q,active:computed(()=>M.value||we.value),disableTransitions:computed(()=>we.value),absolute:computed(()=>n.absolute||xe.value&&typeof Z.value!="string")}),{isStuck:Z,stickyStyles:ce}=useSticky({rootEl:F,isSticky:xe,layoutItemStyles:H}),ue=useBackgroundColor(computed(()=>typeof n.scrim=="string"?n.scrim:null)),se=computed(()=>({...we.value?{opacity:G.value*.2,transition:"none"}:void 0,...ve.value}));return provideDefaults({VList:{bgColor:"transparent"}}),useRender(()=>{const te=x.image||n.image;return createVNode(Fragment,null,[createVNode(n.tag,mergeProps({ref:F,onMouseenter:j,onMouseleave:z,class:["v-navigation-drawer",`v-navigation-drawer--${X.value}`,{"v-navigation-drawer--expand-on-hover":n.expandOnHover,"v-navigation-drawer--floating":n.floating,"v-navigation-drawer--is-hovering":U.value,"v-navigation-drawer--rail":n.rail,"v-navigation-drawer--temporary":fe.value,"v-navigation-drawer--persistent":ie.value,"v-navigation-drawer--active":M.value,"v-navigation-drawer--sticky":xe.value},E.value,T.value,C.value,I.value,A.value,D.value,n.class],style:[R.value,H.value,O.value,ce.value,n.style,["top","bottom"].includes(X.value)?{height:"auto"}:{}]},L,g),{default:()=>[te&&createVNode("div",{key:"image",class:"v-navigation-drawer__img"},[x.image?createVNode(VDefaultsProvider,{key:"image-defaults",disabled:!n.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:n.image}}},x.image):createVNode(VImg,{key:"image-img",alt:"",cover:!0,height:"inherit",src:n.image},null)]),x.prepend&&createVNode("div",{class:"v-navigation-drawer__prepend"},[x.prepend?.()]),createVNode("div",{class:"v-navigation-drawer__content"},[x.default?.()]),x.append&&createVNode("div",{class:"v-navigation-drawer__append"},[x.append?.()])]}),createVNode(Transition,{name:"fade-transition"},{default:()=>[fe.value&&(we.value||M.value)&&!!n.scrim&&createVNode("div",mergeProps({class:["v-navigation-drawer__scrim",ue.backgroundColorClasses.value],style:[se.value,ue.backgroundColorStyles.value],onClick:()=>{ie.value||(M.value=!1)}},L),null)]})])}),{isStuck:Z}}}),_sfc_main$2=defineComponent$1({__name:"NavigationPrincipale",setup(n){const{மொழியாக்கம்_பயன்படுத்து:r}=கிளிமூக்கை_பயன்படுத்து(),{$மொ:g}=r(),_=utiliserConstellation(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:x}=மொழிகளைப்_பயன்படுத்து(),S=suivre(_.profil.suivreNoms,{}),E=x(S),C=ref$2();onMounted(async()=>{C.value=await _.obtIdDispositif()});const{nomDispositif:T,typeDispositif:R}=utiliserNomEtTypeDispositif({idDispositif:C}),A=computed(()=>obtIcôneDispositifDeType(R.value)),I=[{icône:"mdi-home",texte:"navigation.accueil",chemin:"/"},{icône:"mdi-database",texte:"navigation.données",chemin:"/données"},{icône:"mdi-pin",texte:"navigation.favoris",chemin:"/favoris"},{icône:"mdi-magnify",texte:"navigation.recherche",chemin:"/recherche"},{icône:"mdi-lightning-bolt",texte:"navigation.automatisations",chemin:"/automatisations"},{icône:"mdi-bug",texte:"navigation.signalements",chemin:"/signalements"}];return(B,D)=>(openBlock(),createBlock(VNavigationDrawer,{"expand-on-hover":"",permanent:"",rail:""},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{title:unref(E),onClick:D[0]||(D[0]=N=>B.$router.push({path:"/compte"}))},{prepend:withCtx(()=>[createVNode(_sfc_main$1w)]),subtitle:withCtx(()=>[createVNode(VIcon,{start:""},{default:withCtx(()=>[createTextVNode(toDisplayString(A.value),1)]),_:1}),createVNode(_sfc_main$S,{texte:unref(T)||unref(g)("dispositifs.sansNom"),"longueur-max":20},null,8,["texte"])]),_:1},8,["title"])]),_:1}),createVNode(VDivider),createVNode(VList,{density:"compact",class:"align-start",nav:""},{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment,null,renderList(I,N=>createVNode(VListItem,{key:N.chemin,"prepend-icon":N.icône,title:unref(g)(N.texte),onClick:M=>B.$router.push(encodeURI(N.chemin))},null,8,["prepend-icon","title","onClick"])),64))]),_:1})]),_:1}))}}),_sfc_main$1=defineComponent$1({__name:"PagePrincipale",setup(n){return(r,g)=>{const _=resolveComponent("router-view");return openBlock(),createElementBlock("div",null,[createVNode(_sfc_main$2),createVNode(_,null,{default:withCtx(({Component:x})=>[createVNode(Transition,{name:"fade"},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(x)))]),_:2},1024)]),_:1})])}}}),makeVAppProps=propsFactory({...makeComponentProps(),...makeLayoutProps({fullHeight:!0}),...makeThemeProps()},"VApp"),VApp=genericComponent()({name:"VApp",props:makeVAppProps(),setup(n,r){let{slots:g}=r;const _=provideTheme(n),{layoutClasses:x,getLayoutItem:S,items:E,layoutRef:C}=createLayout(n),{rtlClasses:T}=useRtl();return useRender(()=>createVNode("div",{ref:C,class:["v-application",_.themeClasses.value,x.value,T.value,n.class],style:[n.style]},[createVNode("div",{class:"v-application__wrap"},[g.default?.()])])),{getLayoutItem:S,items:E,theme:_}}}),makeVMainProps=propsFactory({scrollable:Boolean,...makeComponentProps(),...makeDimensionProps(),...makeTagProps({tag:"main"})},"VMain"),VMain=genericComponent()({name:"VMain",props:makeVMainProps(),setup(n,r){let{slots:g}=r;const{dimensionStyles:_}=useDimension(n),{mainStyles:x}=useLayout(),{ssrBootStyles:S}=useSsrBoot();return useRender(()=>createVNode(n.tag,{class:["v-main",{"v-main--scrollable":n.scrollable},n.class],style:[x.value,S.value,_.value,n.style]},{default:()=>[n.scrollable?createVNode("div",{class:"v-main__scroller"},[g.default?.()]):g.default?.()]})),{}}}),_sfc_main=defineComponent$1({__name:"App",setup(n){const r=ref$2(!1),{வலதிலிருந்து_இடது_மொழி:g}=மொழிகளைப்_பயன்படுத்து(),_=g();return lancerInfos(),(x,S)=>(openBlock(),createBlock(VApp,null,{default:withCtx(()=>[createVNode(VLocaleProvider,{rtl:unref(_)},{default:withCtx(()=>[createVNode(VMain,null,{default:withCtx(()=>[createVNode(_sfc_main$9),createVNode(_sfc_main$1x),createVNode(VFadeTransition,{"leave-absolute":""},{default:withCtx(()=>[r.value?(openBlock(),createBlock(_sfc_main$1,{key:1})):(openBlock(),createBlock(_sfc_main$3,{key:0,onEntrer:S[0]||(S[0]=E=>r.value=!0)}))]),_:1})]),_:1})]),_:1},8,["rtl"])]),_:1}))}}),app=createApp(_sfc_main);inscrireExtentions(app);app.mount("#app");export{VSwitch as $,VSpacer as A,createBaseVNode as B,createElementBlock as C,VProgressCircular as D,_sfc_main$6 as E,schémaCodeR2Connexion as F,VBtnToggle as G,VIcon as H,VDialog as I,mergeProps as J,utiliserServeurLocalConstellation as K,VListItem as L,renderList as M,Fragment as N,VDivider as O,VBadge as P,VWindow as Q,VWindowItem as R,VList as S,VFadeTransition as T,URL_TUTORIELS as U,VCardTitle as V,createCommentVNode as W,VChip as X,resolveDynamicComponent as Y,VAvatar as Z,__vitePreload as _,openBlock as a,_sfc_main$17 as a$,VSlideYTransition as a0,VMenu as a1,VTextField as a2,withModifiers as a3,copier as a4,VCol as a5,isElectron as a6,VRow as a7,useTheme as a8,URL_COMMUNAUTÉ as a9,VTimeline as aA,VTimelineItem as aB,icôneObjet as aC,utiliserIlYA as aD,VSkeletonLoader as aE,VImg as aF,utiliserImagesDéco as aG,VContainer as aH,_sfc_main$1n as aI,_sfc_main$1w as aJ,_sfc_main$u as aK,VRadioGroup as aL,VRadio as aM,_sfc_main$1e as aN,utiliserÉtatThème as aO,watch as aP,VAutocomplete as aQ,_sfc_main$l as aR,_sfc_main$k as aS,_sfc_main$b as aT,_sfc_main$g as aU,_sfc_main$h as aV,_sfc_main$i as aW,VSelect as aX,obtIcôneContact as aY,MAX_TAILLE_IMAGE as aZ,ImageEditable as a_,normalizeClass as aa,_export_sfc as ab,defineStore as ac,withDirectives as ad,vShow as ae,reactive as af,onBeforeUnmount as ag,rechercher as ah,_sfc_main$1c as ai,_sfc_main$1v as aj,_sfc_main$n as ak,_sfc_main$$ as al,VCheckbox as am,VTooltip as an,VCardActions as ao,_sfc_main$1i as ap,storeToRefs as aq,utiliserÉtatInfos as ar,VListItemTitle as as,VListItemSubtitle as at,VCardSubtitle as au,VExpandTransition as av,VAlert as aw,plateforme as ax,obtenirDernièreVersion as ay,URL_TÉLÉCHARGEMENTS as az,createVNode as b,toRefs as b$,_sfc_main$1o as b0,VSlideGroup as b1,ajusterTexteTraductible as b2,_sfc_main$1d as b3,getCurrentScope as b4,onScopeDispose as b5,readonly$2 as b6,toValue as b7,getCurrentInstance$1 as b8,h$2 as b9,_sfc_main$x as bA,_sfc_main$Y as bB,_sfc_main$p as bC,_sfc_main$r as bD,couleurScore as bE,_sfc_main$D as bF,_sfc_main$W as bG,toRaw as bH,_sfc_main$L as bI,_sfc_main$K as bJ,createSlots as bK,_sfc_main$1f as bL,sourceImage as bM,_sfc_main$S as bN,_sfc_main$13 as bO,_sfc_main$1j as bP,_sfc_main$y as bQ,_sfc_main$1k as bR,_sfc_main$1b as bS,_sfc_main$Z as bT,resolveComponent as bU,_sfc_main$1l as bV,isOn as bW,enregistrerÉcoute as bX,mergeDefaults as bY,useSlots as bZ,inject$1 as b_,onUpdated as ba,propsFactory as bb,makeDimensionProps as bc,makeFocusProps as bd,only as be,makeVFieldProps as bf,genericComponent as bg,useDimension as bh,useFocus as bi,useProxiedModel as bj,useLocale as bk,provideDefaults as bl,nextTick$1 as bm,useRender as bn,filterInputAttrs as bo,VField as bp,VOverlay as bq,focusChild as br,_sfc_main$11 as bs,_sfc_main$10 as bt,VChipGroup as bu,_sfc_main$A as bv,_sfc_main$C as bw,_sfc_main$14 as bx,_sfc_main$O as by,_sfc_main$N as bz,createBlock as c,useElevation as c$,onBeforeMount as c0,normalizeStyle as c1,icôneStatut as c2,_sfc_main$12 as c3,_sfc_main$Q as c4,_sfc_main$P as c5,v4$3 as c6,VHover as c7,idcEtExt as c8,téléchargerFlux as c9,provideTheme as cA,useResizeObserver as cB,createRange as cC,toRef as cD,keyValues as cE,getCurrentInstance as cF,clamp as cG,defineFunctionalComponent as cH,convertToUnit as cI,capitalize as cJ,consoleError as cK,deepEqual as cL,wrapInArray as cM,getObjectValueByPath as cN,isEmpty as cO,makeDisplayProps as cP,makeLoaderProps as cQ,useLoader as cR,useBackgroundColor as cS,LoaderSlot as cT,VCheckboxBtn as cU,EventProp as cV,useDensity as cW,getPropertyFromItem as cX,makeFilterProps as cY,useFilter as cZ,useBorder as c_,itérableÀFlux as ca,commonjsGlobal as cb,require$$0$2 as cc,Buffer$1 as cd,global$1 as ce,shallowRef as cf,adresseOrbiteValide as cg,markRaw as ch,provide as ci,onUnmounted as cj,render as ck,gjv as cl,VTextarea as cm,எண்ணிக்கையை_கண்டுப்பிடி as cn,devinerCatégorie as co,onBeforeUpdate as cp,IconValue as cq,makeBorderProps as cr,makeComponentProps as cs,makeDensityProps as ct,makeElevationProps as cu,makeRoundedProps as cv,makeSizeProps as cw,makeTagProps as cx,makeThemeProps as cy,makeVariantProps as cz,defineComponent$1 as d,getSymbols as d$,useRounded as d0,VDefaultsProvider as d1,VListGroup as d2,makeRouterProps as d3,useLink as d4,useTextColor as d5,makeGroupItemProps as d6,useGroupItem as d7,VSlideGroupSymbol as d8,omit as d9,VCounter as dA,callEvent as dB,axios as dC,_sfc_main$16 as dD,useRouter$1 as dE,_sfc_main$18 as dF,_sfc_main$z as dG,_sfc_main$1r as dH,_sfc_main$1h as dI,_sfc_main$_ as dJ,_sfc_main$X as dK,URL_SIGNALEMENTS as dL,COURRIEL_SIGNALEMENTS as dM,requireStreamBrowserify as dN,isObjectLike as dO,baseGetTag as dP,Symbol$1 as dQ,isArray$1 as dR,isObject$1 as dS,getNative as dT,eq as dU,isPrototype as dV,isArrayLike as dW,arrayLikeKeys as dX,overArg as dY,keys$1 as dZ,root as d_,makeVBtnProps as da,forwardRefs as db,animate as dc,standardEasing as dd,makeVWindowProps as de,makeVWindowItemProps as df,makeVSlideGroupProps as dg,useScopeId as dh,isObject as di,MultiChercheur as dj,_sfc_main$B as dk,_sfc_main$R as dl,isRef as dm,isEqual$1 as dn,useModel as dp,_sfc_main$1m as dq,path as dr,_sfc_main$o as ds,isBrowser$1 as dt,_sfc_main$U as du,choisirDossier as dv,makeVInputProps as dw,humanReadableFileSize as dx,VInput as dy,filterFieldProps as dz,createTextVNode as e,stubArray as e0,arrayPush as e1,baseGetAllKeys as e2,Uint8Array$1 as e3,getTag as e4,nodeUtil as e5,baseUnary as e6,isBuffer as e7,Stack as e8,getAllKeys as e9,baseIsEqual as ea,isLength as eb,isIndex as ec,isArguments as ed,identity as ee,Set$1 as ef,setToArray as eg,SetCache as eh,cacheHas as ei,MapCache as ej,getAugmentedNamespace as ek,empty$2 as el,process$1 as em,requirePathBrowserify as en,requireCryptoBrowserify as eo,config as ep,errors as eq,_sfc_main$E as er,_sfc_main$q as es,catégoriesBase as et,icôneCatégorieVariable as eu,unref as f,getDefaultExportFromCjs as g,VCardItem as h,VBtn as i,ouvrirLien as j,URL_DOCUMENTATION as k,VCardText as l,VCard as m,useDisplay as n,onMounted as o,utiliserConstellation as p,computed as q,ref$2 as r,suivre as s,toDisplayString as t,useRtl as u,watchEffect as v,withCtx as w,renderSlot as x,normalizeProps as y,guardReactiveProps as z,எண்களைப்_பயன்படுத்து as எ,கிளிமூக்கை_பயன்படுத்து as க,மொழிகளைப்_பயன்படுத்து as ம};
//# sourceMappingURL=index-C74te5xO.js.map
