var nr=Object.defineProperty;var ir=(t,e,n)=>e in t?nr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var lt=(t,e,n)=>(ir(t,typeof e!="symbol"?e+"":e,n),n),Jt=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var Zt=(t,e,n)=>(Jt(t,e,"read from private field"),n?n.call(t):e.get(t)),Qt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},er=(t,e,n,a)=>(Jt(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n);import*as fs$2 from"fs";import fs__default,{readFileSync as readFileSync$1}from"fs";import{writeFile}from"fs/promises";function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in t)){const c=Object.getOwnPropertyDescriptor(a,o);c&&Object.defineProperty(t,o,c.get?c:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const l of c.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function a(){if(this instanceof a){var o=[null];o.push.apply(o,arguments);var c=Function.bind.apply(e,o);return new c}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var o=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:function(){return t[a]}})}),n}var browserExports$3={},browser$i={get exports(){return browserExports$3},set exports(t){browserExports$3=t}},process$1=browser$i.exports={},cachedSetTimeout$1,cachedClearTimeout$1;function defaultSetTimout$1(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout$1(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout$1=setTimeout:cachedSetTimeout$1=defaultSetTimout$1}catch{cachedSetTimeout$1=defaultSetTimout$1}try{typeof clearTimeout=="function"?cachedClearTimeout$1=clearTimeout:cachedClearTimeout$1=defaultClearTimeout$1}catch{cachedClearTimeout$1=defaultClearTimeout$1}})();function runTimeout$1(t){if(cachedSetTimeout$1===setTimeout)return setTimeout(t,0);if((cachedSetTimeout$1===defaultSetTimout$1||!cachedSetTimeout$1)&&setTimeout)return cachedSetTimeout$1=setTimeout,setTimeout(t,0);try{return cachedSetTimeout$1(t,0)}catch{try{return cachedSetTimeout$1.call(null,t,0)}catch{return cachedSetTimeout$1.call(this,t,0)}}}function runClearTimeout$1(t){if(cachedClearTimeout$1===clearTimeout)return clearTimeout(t);if((cachedClearTimeout$1===defaultClearTimeout$1||!cachedClearTimeout$1)&&clearTimeout)return cachedClearTimeout$1=clearTimeout,clearTimeout(t);try{return cachedClearTimeout$1(t)}catch{try{return cachedClearTimeout$1.call(null,t)}catch{return cachedClearTimeout$1.call(this,t)}}}var queue$2=[],draining$1=!1,currentQueue$1,queueIndex$1=-1;function cleanUpNextTick$1(){!draining$1||!currentQueue$1||(draining$1=!1,currentQueue$1.length?queue$2=currentQueue$1.concat(queue$2):queueIndex$1=-1,queue$2.length&&drainQueue$1())}function drainQueue$1(){if(!draining$1){var t=runTimeout$1(cleanUpNextTick$1);draining$1=!0;for(var e=queue$2.length;e;){for(currentQueue$1=queue$2,queue$2=[];++queueIndex$1<e;)currentQueue$1&&currentQueue$1[queueIndex$1].run();queueIndex$1=-1,e=queue$2.length}currentQueue$1=null,draining$1=!1,runClearTimeout$1(t)}}process$1.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];queue$2.push(new Item$1(t,e)),queue$2.length===1&&!draining$1&&runTimeout$1(drainQueue$1)};function Item$1(t,e){this.fun=t,this.array=e}Item$1.prototype.run=function(){this.fun.apply(null,this.array)};process$1.title="browser";process$1.browser=!0;process$1.env={};process$1.argv=[];process$1.version="";process$1.versions={};function noop$8(){}process$1.on=noop$8;process$1.addListener=noop$8;process$1.once=noop$8;process$1.off=noop$8;process$1.removeListener=noop$8;process$1.removeAllListeners=noop$8;process$1.emit=noop$8;process$1.prependListener=noop$8;process$1.prependOnceListener=noop$8;process$1.listeners=function(t){return[]};process$1.binding=function(t){throw new Error("process.binding is not supported")};process$1.cwd=function(){return"/"};process$1.chdir=function(t){throw new Error("process.chdir is not supported")};process$1.umask=function(){return 0};var buffer$3={},base64Js={};base64Js.byteLength=byteLength$2;base64Js.toByteArray=toByteArray$1;base64Js.fromByteArray=fromByteArray$1;var lookup$2=[],revLookup$1=[],Arr$1=typeof Uint8Array<"u"?Uint8Array:Array,code$8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code$8.length;i$1<len;++i$1)lookup$2[i$1]=code$8[i$1],revLookup$1[code$8.charCodeAt(i$1)]=i$1;revLookup$1["-".charCodeAt(0)]=62;revLookup$1["_".charCodeAt(0)]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var a=n===e?0:4-n%4;return[n,a]}function byteLength$2(t){var e=getLens(t),n=e[0],a=e[1];return(n+a)*3/4-a}function _byteLength(t,e,n){return(e+n)*3/4-n}function toByteArray$1(t){var e,n=getLens(t),a=n[0],o=n[1],c=new Arr$1(_byteLength(t,a,o)),l=0,u=o>0?a-4:a,d;for(d=0;d<u;d+=4)e=revLookup$1[t.charCodeAt(d)]<<18|revLookup$1[t.charCodeAt(d+1)]<<12|revLookup$1[t.charCodeAt(d+2)]<<6|revLookup$1[t.charCodeAt(d+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=e&255;return o===2&&(e=revLookup$1[t.charCodeAt(d)]<<2|revLookup$1[t.charCodeAt(d+1)]>>4,c[l++]=e&255),o===1&&(e=revLookup$1[t.charCodeAt(d)]<<10|revLookup$1[t.charCodeAt(d+1)]<<4|revLookup$1[t.charCodeAt(d+2)]>>2,c[l++]=e>>8&255,c[l++]=e&255),c}function tripletToBase64$1(t){return lookup$2[t>>18&63]+lookup$2[t>>12&63]+lookup$2[t>>6&63]+lookup$2[t&63]}function encodeChunk$1(t,e,n){for(var a,o=[],c=e;c<n;c+=3)a=(t[c]<<16&16711680)+(t[c+1]<<8&65280)+(t[c+2]&255),o.push(tripletToBase64$1(a));return o.join("")}function fromByteArray$1(t){for(var e,n=t.length,a=n%3,o=[],c=16383,l=0,u=n-a;l<u;l+=c)o.push(encodeChunk$1(t,l,l+c>u?u:l+c));return a===1?(e=t[n-1],o.push(lookup$2[e>>2]+lookup$2[e<<4&63]+"==")):a===2&&(e=(t[n-2]<<8)+t[n-1],o.push(lookup$2[e>>10]+lookup$2[e>>4&63]+lookup$2[e<<2&63]+"=")),o.join("")}var ieee754$2={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$2.read=function(t,e,n,a,o){var c,l,u=o*8-a-1,d=(1<<u)-1,m=d>>1,b=-7,x=n?o-1:0,_=n?-1:1,w=t[e+x];for(x+=_,c=w&(1<<-b)-1,w>>=-b,b+=u;b>0;c=c*256+t[e+x],x+=_,b-=8);for(l=c&(1<<-b)-1,c>>=-b,b+=a;b>0;l=l*256+t[e+x],x+=_,b-=8);if(c===0)c=1-m;else{if(c===d)return l?NaN:(w?-1:1)*(1/0);l=l+Math.pow(2,a),c=c-m}return(w?-1:1)*l*Math.pow(2,c-a)};ieee754$2.write=function(t,e,n,a,o,c){var l,u,d,m=c*8-o-1,b=(1<<m)-1,x=b>>1,_=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=a?0:c-1,S=a?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=b):(l=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-l))<1&&(l--,d*=2),l+x>=1?e+=_/d:e+=_*Math.pow(2,1-x),e*d>=2&&(l++,d/=2),l+x>=b?(u=0,l=b):l+x>=1?(u=(e*d-1)*Math.pow(2,o),l=l+x):(u=e*Math.pow(2,x-1)*Math.pow(2,o),l=0));o>=8;t[n+w]=u&255,w+=S,u/=256,o-=8);for(l=l<<o|u,m+=o;m>0;t[n+w]=l&255,w+=S,l/=256,m-=8);t[n+w-S]|=T*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=base64Js,n=ieee754$2,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=D,t.INSPECT_MAX_BYTES=50;const o=2147483647;t.kMaxLength=o,u.TYPED_ARRAY_SUPPORT=c(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const me=new Uint8Array(1),ne={foo:function(){return 42}};return Object.setPrototypeOf(ne,Uint8Array.prototype),Object.setPrototypeOf(me,ne),me.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function l(me){if(me>o)throw new RangeError('The value "'+me+'" is invalid for option "size"');const ne=new Uint8Array(me);return Object.setPrototypeOf(ne,u.prototype),ne}function u(me,ne,ue){if(typeof me=="number"){if(typeof ne=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(me)}return d(me,ne,ue)}u.poolSize=8192;function d(me,ne,ue){if(typeof me=="string")return _(me,ne);if(ArrayBuffer.isView(me))return S(me);if(me==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof me);if(Ce(me,ArrayBuffer)||me&&Ce(me.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ce(me,SharedArrayBuffer)||me&&Ce(me.buffer,SharedArrayBuffer)))return T(me,ne,ue);if(typeof me=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const _e=me.valueOf&&me.valueOf();if(_e!=null&&_e!==me)return u.from(_e,ne,ue);const Ie=B(me);if(Ie)return Ie;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof me[Symbol.toPrimitive]=="function")return u.from(me[Symbol.toPrimitive]("string"),ne,ue);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof me)}u.from=function(me,ne,ue){return d(me,ne,ue)},Object.setPrototypeOf(u.prototype,Uint8Array.prototype),Object.setPrototypeOf(u,Uint8Array);function m(me){if(typeof me!="number")throw new TypeError('"size" argument must be of type number');if(me<0)throw new RangeError('The value "'+me+'" is invalid for option "size"')}function b(me,ne,ue){return m(me),me<=0?l(me):ne!==void 0?typeof ue=="string"?l(me).fill(ne,ue):l(me).fill(ne):l(me)}u.alloc=function(me,ne,ue){return b(me,ne,ue)};function x(me){return m(me),l(me<0?0:C(me)|0)}u.allocUnsafe=function(me){return x(me)},u.allocUnsafeSlow=function(me){return x(me)};function _(me,ne){if((typeof ne!="string"||ne==="")&&(ne="utf8"),!u.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);const ue=z(me,ne)|0;let _e=l(ue);const Ie=_e.write(me,ne);return Ie!==ue&&(_e=_e.slice(0,Ie)),_e}function w(me){const ne=me.length<0?0:C(me.length)|0,ue=l(ne);for(let _e=0;_e<ne;_e+=1)ue[_e]=me[_e]&255;return ue}function S(me){if(Ce(me,Uint8Array)){const ne=new Uint8Array(me);return T(ne.buffer,ne.byteOffset,ne.byteLength)}return w(me)}function T(me,ne,ue){if(ne<0||me.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(me.byteLength<ne+(ue||0))throw new RangeError('"length" is outside of buffer bounds');let _e;return ne===void 0&&ue===void 0?_e=new Uint8Array(me):ue===void 0?_e=new Uint8Array(me,ne):_e=new Uint8Array(me,ne,ue),Object.setPrototypeOf(_e,u.prototype),_e}function B(me){if(u.isBuffer(me)){const ne=C(me.length)|0,ue=l(ne);return ue.length===0||me.copy(ue,0,0,ne),ue}if(me.length!==void 0)return typeof me.length!="number"||Re(me.length)?l(0):w(me);if(me.type==="Buffer"&&Array.isArray(me.data))return w(me.data)}function C(me){if(me>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return me|0}function D(me){return+me!=me&&(me=0),u.alloc(+me)}u.isBuffer=function(ne){return ne!=null&&ne._isBuffer===!0&&ne!==u.prototype},u.compare=function(ne,ue){if(Ce(ne,Uint8Array)&&(ne=u.from(ne,ne.offset,ne.byteLength)),Ce(ue,Uint8Array)&&(ue=u.from(ue,ue.offset,ue.byteLength)),!u.isBuffer(ne)||!u.isBuffer(ue))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ne===ue)return 0;let _e=ne.length,Ie=ue.length;for(let Ne=0,De=Math.min(_e,Ie);Ne<De;++Ne)if(ne[Ne]!==ue[Ne]){_e=ne[Ne],Ie=ue[Ne];break}return _e<Ie?-1:Ie<_e?1:0},u.isEncoding=function(ne){switch(String(ne).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(ne,ue){if(!Array.isArray(ne))throw new TypeError('"list" argument must be an Array of Buffers');if(ne.length===0)return u.alloc(0);let _e;if(ue===void 0)for(ue=0,_e=0;_e<ne.length;++_e)ue+=ne[_e].length;const Ie=u.allocUnsafe(ue);let Ne=0;for(_e=0;_e<ne.length;++_e){let De=ne[_e];if(Ce(De,Uint8Array))Ne+De.length>Ie.length?(u.isBuffer(De)||(De=u.from(De)),De.copy(Ie,Ne)):Uint8Array.prototype.set.call(Ie,De,Ne);else if(u.isBuffer(De))De.copy(Ie,Ne);else throw new TypeError('"list" argument must be an Array of Buffers');Ne+=De.length}return Ie};function z(me,ne){if(u.isBuffer(me))return me.length;if(ArrayBuffer.isView(me)||Ce(me,ArrayBuffer))return me.byteLength;if(typeof me!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof me);const ue=me.length,_e=arguments.length>2&&arguments[2]===!0;if(!_e&&ue===0)return 0;let Ie=!1;for(;;)switch(ne){case"ascii":case"latin1":case"binary":return ue;case"utf8":case"utf-8":return be(me).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue*2;case"hex":return ue>>>1;case"base64":return Se(me).length;default:if(Ie)return _e?-1:be(me).length;ne=(""+ne).toLowerCase(),Ie=!0}}u.byteLength=z;function U(me,ne,ue){let _e=!1;if((ne===void 0||ne<0)&&(ne=0),ne>this.length||((ue===void 0||ue>this.length)&&(ue=this.length),ue<=0)||(ue>>>=0,ne>>>=0,ue<=ne))return"";for(me||(me="utf8");;)switch(me){case"hex":return q(this,ne,ue);case"utf8":case"utf-8":return y(this,ne,ue);case"ascii":return P(this,ne,ue);case"latin1":case"binary":return H(this,ne,ue);case"base64":return k(this,ne,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,ne,ue);default:if(_e)throw new TypeError("Unknown encoding: "+me);me=(me+"").toLowerCase(),_e=!0}}u.prototype._isBuffer=!0;function Y(me,ne,ue){const _e=me[ne];me[ne]=me[ue],me[ue]=_e}u.prototype.swap16=function(){const ne=this.length;if(ne%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let ue=0;ue<ne;ue+=2)Y(this,ue,ue+1);return this},u.prototype.swap32=function(){const ne=this.length;if(ne%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let ue=0;ue<ne;ue+=4)Y(this,ue,ue+3),Y(this,ue+1,ue+2);return this},u.prototype.swap64=function(){const ne=this.length;if(ne%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let ue=0;ue<ne;ue+=8)Y(this,ue,ue+7),Y(this,ue+1,ue+6),Y(this,ue+2,ue+5),Y(this,ue+3,ue+4);return this},u.prototype.toString=function(){const ne=this.length;return ne===0?"":arguments.length===0?y(this,0,ne):U.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(ne){if(!u.isBuffer(ne))throw new TypeError("Argument must be a Buffer");return this===ne?!0:u.compare(this,ne)===0},u.prototype.inspect=function(){let ne="";const ue=t.INSPECT_MAX_BYTES;return ne=this.toString("hex",0,ue).replace(/(.{2})/g,"$1 ").trim(),this.length>ue&&(ne+=" ... "),"<Buffer "+ne+">"},a&&(u.prototype[a]=u.prototype.inspect),u.prototype.compare=function(ne,ue,_e,Ie,Ne){if(Ce(ne,Uint8Array)&&(ne=u.from(ne,ne.offset,ne.byteLength)),!u.isBuffer(ne))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ne);if(ue===void 0&&(ue=0),_e===void 0&&(_e=ne?ne.length:0),Ie===void 0&&(Ie=0),Ne===void 0&&(Ne=this.length),ue<0||_e>ne.length||Ie<0||Ne>this.length)throw new RangeError("out of range index");if(Ie>=Ne&&ue>=_e)return 0;if(Ie>=Ne)return-1;if(ue>=_e)return 1;if(ue>>>=0,_e>>>=0,Ie>>>=0,Ne>>>=0,this===ne)return 0;let De=Ne-Ie,et=_e-ue;const We=Math.min(De,et),Ke=this.slice(Ie,Ne),xt=ne.slice(ue,_e);for(let tt=0;tt<We;++tt)if(Ke[tt]!==xt[tt]){De=Ke[tt],et=xt[tt];break}return De<et?-1:et<De?1:0};function X(me,ne,ue,_e,Ie){if(me.length===0)return-1;if(typeof ue=="string"?(_e=ue,ue=0):ue>2147483647?ue=2147483647:ue<-2147483648&&(ue=-2147483648),ue=+ue,Re(ue)&&(ue=Ie?0:me.length-1),ue<0&&(ue=me.length+ue),ue>=me.length){if(Ie)return-1;ue=me.length-1}else if(ue<0)if(Ie)ue=0;else return-1;if(typeof ne=="string"&&(ne=u.from(ne,_e)),u.isBuffer(ne))return ne.length===0?-1:O(me,ne,ue,_e,Ie);if(typeof ne=="number")return ne=ne&255,typeof Uint8Array.prototype.indexOf=="function"?Ie?Uint8Array.prototype.indexOf.call(me,ne,ue):Uint8Array.prototype.lastIndexOf.call(me,ne,ue):O(me,[ne],ue,_e,Ie);throw new TypeError("val must be string, number or Buffer")}function O(me,ne,ue,_e,Ie){let Ne=1,De=me.length,et=ne.length;if(_e!==void 0&&(_e=String(_e).toLowerCase(),_e==="ucs2"||_e==="ucs-2"||_e==="utf16le"||_e==="utf-16le")){if(me.length<2||ne.length<2)return-1;Ne=2,De/=2,et/=2,ue/=2}function We(xt,tt){return Ne===1?xt[tt]:xt.readUInt16BE(tt*Ne)}let Ke;if(Ie){let xt=-1;for(Ke=ue;Ke<De;Ke++)if(We(me,Ke)===We(ne,xt===-1?0:Ke-xt)){if(xt===-1&&(xt=Ke),Ke-xt+1===et)return xt*Ne}else xt!==-1&&(Ke-=Ke-xt),xt=-1}else for(ue+et>De&&(ue=De-et),Ke=ue;Ke>=0;Ke--){let xt=!0;for(let tt=0;tt<et;tt++)if(We(me,Ke+tt)!==We(ne,tt)){xt=!1;break}if(xt)return Ke}return-1}u.prototype.includes=function(ne,ue,_e){return this.indexOf(ne,ue,_e)!==-1},u.prototype.indexOf=function(ne,ue,_e){return X(this,ne,ue,_e,!0)},u.prototype.lastIndexOf=function(ne,ue,_e){return X(this,ne,ue,_e,!1)};function J(me,ne,ue,_e){ue=Number(ue)||0;const Ie=me.length-ue;_e?(_e=Number(_e),_e>Ie&&(_e=Ie)):_e=Ie;const Ne=ne.length;_e>Ne/2&&(_e=Ne/2);let De;for(De=0;De<_e;++De){const et=parseInt(ne.substr(De*2,2),16);if(Re(et))return De;me[ue+De]=et}return De}function Z(me,ne,ue,_e){return ke(be(ne,me.length-ue),me,ue,_e)}function se(me,ne,ue,_e){return ke(xe(ne),me,ue,_e)}function ie(me,ne,ue,_e){return ke(Se(ne),me,ue,_e)}function F(me,ne,ue,_e){return ke(ve(ne,me.length-ue),me,ue,_e)}u.prototype.write=function(ne,ue,_e,Ie){if(ue===void 0)Ie="utf8",_e=this.length,ue=0;else if(_e===void 0&&typeof ue=="string")Ie=ue,_e=this.length,ue=0;else if(isFinite(ue))ue=ue>>>0,isFinite(_e)?(_e=_e>>>0,Ie===void 0&&(Ie="utf8")):(Ie=_e,_e=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const Ne=this.length-ue;if((_e===void 0||_e>Ne)&&(_e=Ne),ne.length>0&&(_e<0||ue<0)||ue>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ie||(Ie="utf8");let De=!1;for(;;)switch(Ie){case"hex":return J(this,ne,ue,_e);case"utf8":case"utf-8":return Z(this,ne,ue,_e);case"ascii":case"latin1":case"binary":return se(this,ne,ue,_e);case"base64":return ie(this,ne,ue,_e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,ne,ue,_e);default:if(De)throw new TypeError("Unknown encoding: "+Ie);Ie=(""+Ie).toLowerCase(),De=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function k(me,ne,ue){return ne===0&&ue===me.length?e.fromByteArray(me):e.fromByteArray(me.slice(ne,ue))}function y(me,ne,ue){ue=Math.min(me.length,ue);const _e=[];let Ie=ne;for(;Ie<ue;){const Ne=me[Ie];let De=null,et=Ne>239?4:Ne>223?3:Ne>191?2:1;if(Ie+et<=ue){let We,Ke,xt,tt;switch(et){case 1:Ne<128&&(De=Ne);break;case 2:We=me[Ie+1],(We&192)===128&&(tt=(Ne&31)<<6|We&63,tt>127&&(De=tt));break;case 3:We=me[Ie+1],Ke=me[Ie+2],(We&192)===128&&(Ke&192)===128&&(tt=(Ne&15)<<12|(We&63)<<6|Ke&63,tt>2047&&(tt<55296||tt>57343)&&(De=tt));break;case 4:We=me[Ie+1],Ke=me[Ie+2],xt=me[Ie+3],(We&192)===128&&(Ke&192)===128&&(xt&192)===128&&(tt=(Ne&15)<<18|(We&63)<<12|(Ke&63)<<6|xt&63,tt>65535&&tt<1114112&&(De=tt))}}De===null?(De=65533,et=1):De>65535&&(De-=65536,_e.push(De>>>10&1023|55296),De=56320|De&1023),_e.push(De),Ie+=et}return I(_e)}const A=4096;function I(me){const ne=me.length;if(ne<=A)return String.fromCharCode.apply(String,me);let ue="",_e=0;for(;_e<ne;)ue+=String.fromCharCode.apply(String,me.slice(_e,_e+=A));return ue}function P(me,ne,ue){let _e="";ue=Math.min(me.length,ue);for(let Ie=ne;Ie<ue;++Ie)_e+=String.fromCharCode(me[Ie]&127);return _e}function H(me,ne,ue){let _e="";ue=Math.min(me.length,ue);for(let Ie=ne;Ie<ue;++Ie)_e+=String.fromCharCode(me[Ie]);return _e}function q(me,ne,ue){const _e=me.length;(!ne||ne<0)&&(ne=0),(!ue||ue<0||ue>_e)&&(ue=_e);let Ie="";for(let Ne=ne;Ne<ue;++Ne)Ie+=Le[me[Ne]];return Ie}function j(me,ne,ue){const _e=me.slice(ne,ue);let Ie="";for(let Ne=0;Ne<_e.length-1;Ne+=2)Ie+=String.fromCharCode(_e[Ne]+_e[Ne+1]*256);return Ie}u.prototype.slice=function(ne,ue){const _e=this.length;ne=~~ne,ue=ue===void 0?_e:~~ue,ne<0?(ne+=_e,ne<0&&(ne=0)):ne>_e&&(ne=_e),ue<0?(ue+=_e,ue<0&&(ue=0)):ue>_e&&(ue=_e),ue<ne&&(ue=ne);const Ie=this.subarray(ne,ue);return Object.setPrototypeOf(Ie,u.prototype),Ie};function M(me,ne,ue){if(me%1!==0||me<0)throw new RangeError("offset is not uint");if(me+ne>ue)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(ne,ue,_e){ne=ne>>>0,ue=ue>>>0,_e||M(ne,ue,this.length);let Ie=this[ne],Ne=1,De=0;for(;++De<ue&&(Ne*=256);)Ie+=this[ne+De]*Ne;return Ie},u.prototype.readUintBE=u.prototype.readUIntBE=function(ne,ue,_e){ne=ne>>>0,ue=ue>>>0,_e||M(ne,ue,this.length);let Ie=this[ne+--ue],Ne=1;for(;ue>0&&(Ne*=256);)Ie+=this[ne+--ue]*Ne;return Ie},u.prototype.readUint8=u.prototype.readUInt8=function(ne,ue){return ne=ne>>>0,ue||M(ne,1,this.length),this[ne]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(ne,ue){return ne=ne>>>0,ue||M(ne,2,this.length),this[ne]|this[ne+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(ne,ue){return ne=ne>>>0,ue||M(ne,2,this.length),this[ne]<<8|this[ne+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(ne,ue){return ne=ne>>>0,ue||M(ne,4,this.length),(this[ne]|this[ne+1]<<8|this[ne+2]<<16)+this[ne+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(ne,ue){return ne=ne>>>0,ue||M(ne,4,this.length),this[ne]*16777216+(this[ne+1]<<16|this[ne+2]<<8|this[ne+3])},u.prototype.readBigUInt64LE=je(function(ne){ne=ne>>>0,pe(ne,"offset");const ue=this[ne],_e=this[ne+7];(ue===void 0||_e===void 0)&&ee(ne,this.length-8);const Ie=ue+this[++ne]*2**8+this[++ne]*2**16+this[++ne]*2**24,Ne=this[++ne]+this[++ne]*2**8+this[++ne]*2**16+_e*2**24;return BigInt(Ie)+(BigInt(Ne)<<BigInt(32))}),u.prototype.readBigUInt64BE=je(function(ne){ne=ne>>>0,pe(ne,"offset");const ue=this[ne],_e=this[ne+7];(ue===void 0||_e===void 0)&&ee(ne,this.length-8);const Ie=ue*2**24+this[++ne]*2**16+this[++ne]*2**8+this[++ne],Ne=this[++ne]*2**24+this[++ne]*2**16+this[++ne]*2**8+_e;return(BigInt(Ie)<<BigInt(32))+BigInt(Ne)}),u.prototype.readIntLE=function(ne,ue,_e){ne=ne>>>0,ue=ue>>>0,_e||M(ne,ue,this.length);let Ie=this[ne],Ne=1,De=0;for(;++De<ue&&(Ne*=256);)Ie+=this[ne+De]*Ne;return Ne*=128,Ie>=Ne&&(Ie-=Math.pow(2,8*ue)),Ie},u.prototype.readIntBE=function(ne,ue,_e){ne=ne>>>0,ue=ue>>>0,_e||M(ne,ue,this.length);let Ie=ue,Ne=1,De=this[ne+--Ie];for(;Ie>0&&(Ne*=256);)De+=this[ne+--Ie]*Ne;return Ne*=128,De>=Ne&&(De-=Math.pow(2,8*ue)),De},u.prototype.readInt8=function(ne,ue){return ne=ne>>>0,ue||M(ne,1,this.length),this[ne]&128?(255-this[ne]+1)*-1:this[ne]},u.prototype.readInt16LE=function(ne,ue){ne=ne>>>0,ue||M(ne,2,this.length);const _e=this[ne]|this[ne+1]<<8;return _e&32768?_e|4294901760:_e},u.prototype.readInt16BE=function(ne,ue){ne=ne>>>0,ue||M(ne,2,this.length);const _e=this[ne+1]|this[ne]<<8;return _e&32768?_e|4294901760:_e},u.prototype.readInt32LE=function(ne,ue){return ne=ne>>>0,ue||M(ne,4,this.length),this[ne]|this[ne+1]<<8|this[ne+2]<<16|this[ne+3]<<24},u.prototype.readInt32BE=function(ne,ue){return ne=ne>>>0,ue||M(ne,4,this.length),this[ne]<<24|this[ne+1]<<16|this[ne+2]<<8|this[ne+3]},u.prototype.readBigInt64LE=je(function(ne){ne=ne>>>0,pe(ne,"offset");const ue=this[ne],_e=this[ne+7];(ue===void 0||_e===void 0)&&ee(ne,this.length-8);const Ie=this[ne+4]+this[ne+5]*2**8+this[ne+6]*2**16+(_e<<24);return(BigInt(Ie)<<BigInt(32))+BigInt(ue+this[++ne]*2**8+this[++ne]*2**16+this[++ne]*2**24)}),u.prototype.readBigInt64BE=je(function(ne){ne=ne>>>0,pe(ne,"offset");const ue=this[ne],_e=this[ne+7];(ue===void 0||_e===void 0)&&ee(ne,this.length-8);const Ie=(ue<<24)+this[++ne]*2**16+this[++ne]*2**8+this[++ne];return(BigInt(Ie)<<BigInt(32))+BigInt(this[++ne]*2**24+this[++ne]*2**16+this[++ne]*2**8+_e)}),u.prototype.readFloatLE=function(ne,ue){return ne=ne>>>0,ue||M(ne,4,this.length),n.read(this,ne,!0,23,4)},u.prototype.readFloatBE=function(ne,ue){return ne=ne>>>0,ue||M(ne,4,this.length),n.read(this,ne,!1,23,4)},u.prototype.readDoubleLE=function(ne,ue){return ne=ne>>>0,ue||M(ne,8,this.length),n.read(this,ne,!0,52,8)},u.prototype.readDoubleBE=function(ne,ue){return ne=ne>>>0,ue||M(ne,8,this.length),n.read(this,ne,!1,52,8)};function E(me,ne,ue,_e,Ie,Ne){if(!u.isBuffer(me))throw new TypeError('"buffer" argument must be a Buffer instance');if(ne>Ie||ne<Ne)throw new RangeError('"value" argument is out of bounds');if(ue+_e>me.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(ne,ue,_e,Ie){if(ne=+ne,ue=ue>>>0,_e=_e>>>0,!Ie){const et=Math.pow(2,8*_e)-1;E(this,ne,ue,_e,et,0)}let Ne=1,De=0;for(this[ue]=ne&255;++De<_e&&(Ne*=256);)this[ue+De]=ne/Ne&255;return ue+_e},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(ne,ue,_e,Ie){if(ne=+ne,ue=ue>>>0,_e=_e>>>0,!Ie){const et=Math.pow(2,8*_e)-1;E(this,ne,ue,_e,et,0)}let Ne=_e-1,De=1;for(this[ue+Ne]=ne&255;--Ne>=0&&(De*=256);)this[ue+Ne]=ne/De&255;return ue+_e},u.prototype.writeUint8=u.prototype.writeUInt8=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,1,255,0),this[ue]=ne&255,ue+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,2,65535,0),this[ue]=ne&255,this[ue+1]=ne>>>8,ue+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,2,65535,0),this[ue]=ne>>>8,this[ue+1]=ne&255,ue+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,4,4294967295,0),this[ue+3]=ne>>>24,this[ue+2]=ne>>>16,this[ue+1]=ne>>>8,this[ue]=ne&255,ue+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,4,4294967295,0),this[ue]=ne>>>24,this[ue+1]=ne>>>16,this[ue+2]=ne>>>8,this[ue+3]=ne&255,ue+4};function L(me,ne,ue,_e,Ie){te(ne,_e,Ie,me,ue,7);let Ne=Number(ne&BigInt(4294967295));me[ue++]=Ne,Ne=Ne>>8,me[ue++]=Ne,Ne=Ne>>8,me[ue++]=Ne,Ne=Ne>>8,me[ue++]=Ne;let De=Number(ne>>BigInt(32)&BigInt(4294967295));return me[ue++]=De,De=De>>8,me[ue++]=De,De=De>>8,me[ue++]=De,De=De>>8,me[ue++]=De,ue}function le(me,ne,ue,_e,Ie){te(ne,_e,Ie,me,ue,7);let Ne=Number(ne&BigInt(4294967295));me[ue+7]=Ne,Ne=Ne>>8,me[ue+6]=Ne,Ne=Ne>>8,me[ue+5]=Ne,Ne=Ne>>8,me[ue+4]=Ne;let De=Number(ne>>BigInt(32)&BigInt(4294967295));return me[ue+3]=De,De=De>>8,me[ue+2]=De,De=De>>8,me[ue+1]=De,De=De>>8,me[ue]=De,ue+8}u.prototype.writeBigUInt64LE=je(function(ne,ue=0){return L(this,ne,ue,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=je(function(ne,ue=0){return le(this,ne,ue,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(ne,ue,_e,Ie){if(ne=+ne,ue=ue>>>0,!Ie){const We=Math.pow(2,8*_e-1);E(this,ne,ue,_e,We-1,-We)}let Ne=0,De=1,et=0;for(this[ue]=ne&255;++Ne<_e&&(De*=256);)ne<0&&et===0&&this[ue+Ne-1]!==0&&(et=1),this[ue+Ne]=(ne/De>>0)-et&255;return ue+_e},u.prototype.writeIntBE=function(ne,ue,_e,Ie){if(ne=+ne,ue=ue>>>0,!Ie){const We=Math.pow(2,8*_e-1);E(this,ne,ue,_e,We-1,-We)}let Ne=_e-1,De=1,et=0;for(this[ue+Ne]=ne&255;--Ne>=0&&(De*=256);)ne<0&&et===0&&this[ue+Ne+1]!==0&&(et=1),this[ue+Ne]=(ne/De>>0)-et&255;return ue+_e},u.prototype.writeInt8=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,1,127,-128),ne<0&&(ne=255+ne+1),this[ue]=ne&255,ue+1},u.prototype.writeInt16LE=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,2,32767,-32768),this[ue]=ne&255,this[ue+1]=ne>>>8,ue+2},u.prototype.writeInt16BE=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,2,32767,-32768),this[ue]=ne>>>8,this[ue+1]=ne&255,ue+2},u.prototype.writeInt32LE=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,4,2147483647,-2147483648),this[ue]=ne&255,this[ue+1]=ne>>>8,this[ue+2]=ne>>>16,this[ue+3]=ne>>>24,ue+4},u.prototype.writeInt32BE=function(ne,ue,_e){return ne=+ne,ue=ue>>>0,_e||E(this,ne,ue,4,2147483647,-2147483648),ne<0&&(ne=4294967295+ne+1),this[ue]=ne>>>24,this[ue+1]=ne>>>16,this[ue+2]=ne>>>8,this[ue+3]=ne&255,ue+4},u.prototype.writeBigInt64LE=je(function(ne,ue=0){return L(this,ne,ue,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=je(function(ne,ue=0){return le(this,ne,ue,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Q(me,ne,ue,_e,Ie,Ne){if(ue+_e>me.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("Index out of range")}function ce(me,ne,ue,_e,Ie){return ne=+ne,ue=ue>>>0,Ie||Q(me,ne,ue,4),n.write(me,ne,ue,_e,23,4),ue+4}u.prototype.writeFloatLE=function(ne,ue,_e){return ce(this,ne,ue,!0,_e)},u.prototype.writeFloatBE=function(ne,ue,_e){return ce(this,ne,ue,!1,_e)};function fe(me,ne,ue,_e,Ie){return ne=+ne,ue=ue>>>0,Ie||Q(me,ne,ue,8),n.write(me,ne,ue,_e,52,8),ue+8}u.prototype.writeDoubleLE=function(ne,ue,_e){return fe(this,ne,ue,!0,_e)},u.prototype.writeDoubleBE=function(ne,ue,_e){return fe(this,ne,ue,!1,_e)},u.prototype.copy=function(ne,ue,_e,Ie){if(!u.isBuffer(ne))throw new TypeError("argument should be a Buffer");if(_e||(_e=0),!Ie&&Ie!==0&&(Ie=this.length),ue>=ne.length&&(ue=ne.length),ue||(ue=0),Ie>0&&Ie<_e&&(Ie=_e),Ie===_e||ne.length===0||this.length===0)return 0;if(ue<0)throw new RangeError("targetStart out of bounds");if(_e<0||_e>=this.length)throw new RangeError("Index out of range");if(Ie<0)throw new RangeError("sourceEnd out of bounds");Ie>this.length&&(Ie=this.length),ne.length-ue<Ie-_e&&(Ie=ne.length-ue+_e);const Ne=Ie-_e;return this===ne&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(ue,_e,Ie):Uint8Array.prototype.set.call(ne,this.subarray(_e,Ie),ue),Ne},u.prototype.fill=function(ne,ue,_e,Ie){if(typeof ne=="string"){if(typeof ue=="string"?(Ie=ue,ue=0,_e=this.length):typeof _e=="string"&&(Ie=_e,_e=this.length),Ie!==void 0&&typeof Ie!="string")throw new TypeError("encoding must be a string");if(typeof Ie=="string"&&!u.isEncoding(Ie))throw new TypeError("Unknown encoding: "+Ie);if(ne.length===1){const De=ne.charCodeAt(0);(Ie==="utf8"&&De<128||Ie==="latin1")&&(ne=De)}}else typeof ne=="number"?ne=ne&255:typeof ne=="boolean"&&(ne=Number(ne));if(ue<0||this.length<ue||this.length<_e)throw new RangeError("Out of range index");if(_e<=ue)return this;ue=ue>>>0,_e=_e===void 0?this.length:_e>>>0,ne||(ne=0);let Ne;if(typeof ne=="number")for(Ne=ue;Ne<_e;++Ne)this[Ne]=ne;else{const De=u.isBuffer(ne)?ne:u.from(ne,Ie),et=De.length;if(et===0)throw new TypeError('The value "'+ne+'" is invalid for argument "value"');for(Ne=0;Ne<_e-ue;++Ne)this[Ne+ue]=De[Ne%et]}return this};const oe={};function de(me,ne,ue){oe[me]=class extends ue{constructor(){super(),Object.defineProperty(this,"message",{value:ne.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${me}]`,this.stack,delete this.name}get code(){return me}set code(Ie){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ie,writable:!0})}toString(){return`${this.name} [${me}]: ${this.message}`}}}de("ERR_BUFFER_OUT_OF_BOUNDS",function(me){return me?`${me} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),de("ERR_INVALID_ARG_TYPE",function(me,ne){return`The "${me}" argument must be of type number. Received type ${typeof ne}`},TypeError),de("ERR_OUT_OF_RANGE",function(me,ne,ue){let _e=`The value of "${me}" is out of range.`,Ie=ue;return Number.isInteger(ue)&&Math.abs(ue)>2**32?Ie=ae(String(ue)):typeof ue=="bigint"&&(Ie=String(ue),(ue>BigInt(2)**BigInt(32)||ue<-(BigInt(2)**BigInt(32)))&&(Ie=ae(Ie)),Ie+="n"),_e+=` It must be ${ne}. Received ${Ie}`,_e},RangeError);function ae(me){let ne="",ue=me.length;const _e=me[0]==="-"?1:0;for(;ue>=_e+4;ue-=3)ne=`_${me.slice(ue-3,ue)}${ne}`;return`${me.slice(0,ue)}${ne}`}function he(me,ne,ue){pe(ne,"offset"),(me[ne]===void 0||me[ne+ue]===void 0)&&ee(ne,me.length-(ue+1))}function te(me,ne,ue,_e,Ie,Ne){if(me>ue||me<ne){const De=typeof ne=="bigint"?"n":"";let et;throw Ne>3?ne===0||ne===BigInt(0)?et=`>= 0${De} and < 2${De} ** ${(Ne+1)*8}${De}`:et=`>= -(2${De} ** ${(Ne+1)*8-1}${De}) and < 2 ** ${(Ne+1)*8-1}${De}`:et=`>= ${ne}${De} and <= ${ue}${De}`,new oe.ERR_OUT_OF_RANGE("value",et,me)}he(_e,Ie,Ne)}function pe(me,ne){if(typeof me!="number")throw new oe.ERR_INVALID_ARG_TYPE(ne,"number",me)}function ee(me,ne,ue){throw Math.floor(me)!==me?(pe(me,ue),new oe.ERR_OUT_OF_RANGE(ue||"offset","an integer",me)):ne<0?new oe.ERR_BUFFER_OUT_OF_BOUNDS:new oe.ERR_OUT_OF_RANGE(ue||"offset",`>= ${ue?1:0} and <= ${ne}`,me)}const ge=/[^+/0-9A-Za-z-_]/g;function Ee(me){if(me=me.split("=")[0],me=me.trim().replace(ge,""),me.length<2)return"";for(;me.length%4!==0;)me=me+"=";return me}function be(me,ne){ne=ne||1/0;let ue;const _e=me.length;let Ie=null;const Ne=[];for(let De=0;De<_e;++De){if(ue=me.charCodeAt(De),ue>55295&&ue<57344){if(!Ie){if(ue>56319){(ne-=3)>-1&&Ne.push(239,191,189);continue}else if(De+1===_e){(ne-=3)>-1&&Ne.push(239,191,189);continue}Ie=ue;continue}if(ue<56320){(ne-=3)>-1&&Ne.push(239,191,189),Ie=ue;continue}ue=(Ie-55296<<10|ue-56320)+65536}else Ie&&(ne-=3)>-1&&Ne.push(239,191,189);if(Ie=null,ue<128){if((ne-=1)<0)break;Ne.push(ue)}else if(ue<2048){if((ne-=2)<0)break;Ne.push(ue>>6|192,ue&63|128)}else if(ue<65536){if((ne-=3)<0)break;Ne.push(ue>>12|224,ue>>6&63|128,ue&63|128)}else if(ue<1114112){if((ne-=4)<0)break;Ne.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,ue&63|128)}else throw new Error("Invalid code point")}return Ne}function xe(me){const ne=[];for(let ue=0;ue<me.length;++ue)ne.push(me.charCodeAt(ue)&255);return ne}function ve(me,ne){let ue,_e,Ie;const Ne=[];for(let De=0;De<me.length&&!((ne-=2)<0);++De)ue=me.charCodeAt(De),_e=ue>>8,Ie=ue%256,Ne.push(Ie),Ne.push(_e);return Ne}function Se(me){return e.toByteArray(Ee(me))}function ke(me,ne,ue,_e){let Ie;for(Ie=0;Ie<_e&&!(Ie+ue>=ne.length||Ie>=me.length);++Ie)ne[Ie+ue]=me[Ie];return Ie}function Ce(me,ne){return me instanceof ne||me!=null&&me.constructor!=null&&me.constructor.name!=null&&me.constructor.name===ne.name}function Re(me){return me!==me}const Le=function(){const me="0123456789abcdef",ne=new Array(256);for(let ue=0;ue<16;++ue){const _e=ue*16;for(let Ie=0;Ie<16;++Ie)ne[_e+Ie]=me[ue]+me[Ie]}return ne}();function je(me){return typeof BigInt>"u"?Pe:me}function Pe(){throw new Error("BigInt not supported")}})(buffer$3);window.Buffer=buffer$3.Buffer;window.process=browserExports$3;function makeMap(t,e){const n=Object.create(null),a=t.split(",");for(let o=0;o<a.length;o++)n[a[o]]=!0;return e?o=>!!n[o.toLowerCase()]:o=>!!n[o]}function normalizeStyle(t){if(isArray$9(t)){const e={};for(let n=0;n<t.length;n++){const a=t[n],o=isString$6(a)?parseStringStyle(a):normalizeStyle(a);if(o)for(const c in o)e[c]=o[c]}return e}else{if(isString$6(t))return t;if(isObject$4(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const a=n.split(propertyDelimiterRE);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function normalizeClass(t){let e="";if(isString$6(t))e=t;else if(isArray$9(t))for(let n=0;n<t.length;n++){const a=normalizeClass(t[n]);a&&(e+=a+" ")}else if(isObject$4(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const toDisplayString$1=t=>isString$6(t)?t:t==null?"":isArray$9(t)||isObject$4(t)&&(t.toString===objectToString$2||!isFunction$4(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>e&&e.__v_isRef?replacer(t,e.value):isMap$4(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[a,o])=>(n[`${a} =>`]=o,n),{})}:isSet$4(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject$4(e)&&!isArray$9(e)&&!isPlainObject$2(e)?String(e):e,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend$1=Object.assign,remove=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hasOwnProperty$5=Object.prototype.hasOwnProperty,hasOwn$4=(t,e)=>hasOwnProperty$5.call(t,e),isArray$9=Array.isArray,isMap$4=t=>toTypeString$2(t)==="[object Map]",isSet$4=t=>toTypeString$2(t)==="[object Set]",isFunction$4=t=>typeof t=="function",isString$6=t=>typeof t=="string",isSymbol$3=t=>typeof t=="symbol",isObject$4=t=>t!==null&&typeof t=="object",isPromise=t=>isObject$4(t)&&isFunction$4(t.then)&&isFunction$4(t.catch),objectToString$2=Object.prototype.toString,toTypeString$2=t=>objectToString$2.call(t),toRawType=t=>toTypeString$2(t).slice(8,-1),isPlainObject$2=t=>toTypeString$2(t)==="[object Object]",isIntegerKey=t=>isString$6(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize$1(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},def=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},toNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this.active){let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this.active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let n=0;for(let a=0;a<e.length;a++){const o=e[a];wasTracked(o)&&!newTracked(o)?o.delete(t):e[n++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}e.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,n=null,a){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,a)}run(){if(!this.active)return this.fn();let e=activeEffect,n=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,n){if(shouldTrack&&activeEffect){let a=targetMap.get(t);a||targetMap.set(t,a=new Map);let o=a.get(n);o||a.set(n,o=createDep()),trackEffects(o)}}function trackEffects(t,e){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,n=!wasTracked(t)):n=!t.has(activeEffect),n&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,e,n,a,o,c){const l=targetMap.get(t);if(!l)return;let u=[];if(e==="clear")u=[...l.values()];else if(n==="length"&&isArray$9(t)){const d=toNumber(a);l.forEach((m,b)=>{(b==="length"||b>=d)&&u.push(m)})}else switch(n!==void 0&&u.push(l.get(n)),e){case"add":isArray$9(t)?isIntegerKey(n)&&u.push(l.get("length")):(u.push(l.get(ITERATE_KEY)),isMap$4(t)&&u.push(l.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$9(t)||(u.push(l.get(ITERATE_KEY)),isMap$4(t)&&u.push(l.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$4(t)&&u.push(l.get(ITERATE_KEY));break}if(u.length===1)u[0]&&triggerEffects(u[0]);else{const d=[];for(const m of u)m&&d.push(...m);triggerEffects(createDep(d))}}function triggerEffects(t,e){const n=isArray$9(t)?t:[...t];for(const a of n)a.computed&&triggerEffect(a);for(const a of n)a.computed||triggerEffect(a)}function triggerEffect(t,e){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol$3)),get$2=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const a=toRaw(this);for(let c=0,l=this.length;c<l;c++)track(a,"get",c+"");const o=a[e](...n);return o===-1||o===!1?a[e](...n.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){pauseTracking();const a=toRaw(this)[e].apply(this,n);return resetTracking(),a}}),t}function createGetter(t=!1,e=!1){return function(a,o,c){if(o==="__v_isReactive")return!t;if(o==="__v_isReadonly")return t;if(o==="__v_isShallow")return e;if(o==="__v_raw"&&c===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(a))return a;const l=isArray$9(a);if(!t&&l&&hasOwn$4(arrayInstrumentations,o))return Reflect.get(arrayInstrumentations,o,c);const u=Reflect.get(a,o,c);return(isSymbol$3(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(t||track(a,"get",o),e)?u:isRef(u)?l&&isIntegerKey(o)?u:u.value:isObject$4(u)?t?readonly$3(u):reactive(u):u}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(n,a,o,c){let l=n[a];if(isReadonly(l)&&isRef(l)&&!isRef(o))return!1;if(!t&&(!isShallow(o)&&!isReadonly(o)&&(l=toRaw(l),o=toRaw(o)),!isArray$9(n)&&isRef(l)&&!isRef(o)))return l.value=o,!0;const u=isArray$9(n)&&isIntegerKey(a)?Number(a)<n.length:hasOwn$4(n,a),d=Reflect.set(n,a,o,c);return n===toRaw(c)&&(u?hasChanged(o,l)&&trigger(n,"set",a,o):trigger(n,"add",a,o)),d}}function deleteProperty(t,e){const n=hasOwn$4(t,e);t[e];const a=Reflect.deleteProperty(t,e);return a&&n&&trigger(t,"delete",e,void 0),a}function has$3(t,e){const n=Reflect.has(t,e);return(!isSymbol$3(e)||!builtInSymbols.has(e))&&track(t,"has",e),n}function ownKeys(t){return track(t,"iterate",isArray$9(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get:get$2,set,deleteProperty,has:has$3,ownKeys},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto$3=t=>Reflect.getPrototypeOf(t);function get$1$1(t,e,n=!1,a=!1){t=t.__v_raw;const o=toRaw(t),c=toRaw(e);n||(e!==c&&track(o,"get",e),track(o,"get",c));const{has:l}=getProto$3(o),u=a?toShallow:n?toReadonly:toReactive;if(l.call(o,e))return u(t.get(e));if(l.call(o,c))return u(t.get(c));t!==o&&t.get(e)}function has$1$1(t,e=!1){const n=this.__v_raw,a=toRaw(n),o=toRaw(t);return e||(t!==o&&track(a,"has",t),track(a,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add$1(t){t=toRaw(t);const e=toRaw(this);return getProto$3(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set$1(t,e){e=toRaw(e);const n=toRaw(this),{has:a,get:o}=getProto$3(n);let c=a.call(n,t);c||(t=toRaw(t),c=a.call(n,t));const l=o.call(n,t);return n.set(t,e),c?hasChanged(e,l)&&trigger(n,"set",t,e):trigger(n,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:n,get:a}=getProto$3(e);let o=n.call(e,t);o||(t=toRaw(t),o=n.call(e,t)),a&&a.call(e,t);const c=e.delete(t);return o&&trigger(e,"delete",t,void 0),c}function clear$2(){const t=toRaw(this),e=t.size!==0,n=t.clear();return e&&trigger(t,"clear",void 0,void 0),n}function createForEach(t,e){return function(a,o){const c=this,l=c.__v_raw,u=toRaw(l),d=e?toShallow:t?toReadonly:toReactive;return!t&&track(u,"iterate",ITERATE_KEY),l.forEach((m,b)=>a.call(o,d(m),d(b),c))}}function createIterableMethod(t,e,n){return function(...a){const o=this.__v_raw,c=toRaw(o),l=isMap$4(c),u=t==="entries"||t===Symbol.iterator&&l,d=t==="keys"&&l,m=o[t](...a),b=n?toShallow:e?toReadonly:toReactive;return!e&&track(c,"iterate",d?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:x,done:_}=m.next();return _?{value:x,done:_}:{value:u?[b(x[0]),b(x[1])]:b(x),done:_}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(c){return get$1$1(this,c)},get size(){return size(this)},has:has$1$1,add:add$1,set:set$1,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!1)},e={get(c){return get$1$1(this,c,!1,!0)},get size(){return size(this)},has:has$1$1,add:add$1,set:set$1,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!0)},n={get(c){return get$1$1(this,c,!0)},get size(){return size(this,!0)},has(c){return has$1$1.call(this,c,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},a={get(c){return get$1$1(this,c,!0,!0)},get size(){return size(this,!0)},has(c){return has$1$1.call(this,c,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(c=>{t[c]=createIterableMethod(c,!1,!1),n[c]=createIterableMethod(c,!0,!1),e[c]=createIterableMethod(c,!1,!0),a[c]=createIterableMethod(c,!0,!0)}),[t,n,e,a]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const n=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(a,o,c)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?a:Reflect.get(hasOwn$4(n,o)&&o in a?n:a,o,c)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly$3(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,n,a,o){if(!isObject$4(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const c=o.get(t);if(c)return c;const l=getTargetType(t);if(l===0)return t;const u=new Proxy(t,l===2?a:n);return o.set(t,u),u}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject$4(t)?reactive(t):t,toReadonly=t=>isObject$4(t)?readonly$3(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t),t.dep&&triggerEffects(t.dep)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:toReactive(e),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,n)=>unref(Reflect.get(t,e,n)),set:(t,e,n,a)=>{const o=t[e];return isRef(o)&&!isRef(n)?(o.value=n,!0):Reflect.set(t,e,n,a)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const e=isArray$9(t)?new Array(t.length):{};for(const n in t)e[n]=toRef(t,n);return e}class ObjectRefImpl{constructor(e,n,a){this._object=e,this._key=n,this._defaultValue=a,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function toRef(t,e,n){const a=t[e];return isRef(a)?a:new ObjectRefImpl(t,e,n)}var _a$1;class ComputedRefImpl{constructor(e,n,a,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=a}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a$1="__v_isReadonly";function computed$1(t,e,n=!1){let a,o;const c=isFunction$4(t);return c?(a=t,o=NOOP):(a=t.get,o=t.set),new ComputedRefImpl(a,o,c||!o,n)}function warn$1(t,...e){}function callWithErrorHandling(t,e,n,a){let o;try{o=a?t(...a):t()}catch(c){handleError(c,e,n)}return o}function callWithAsyncErrorHandling(t,e,n,a){if(isFunction$4(t)){const c=callWithErrorHandling(t,e,n,a);return c&&isPromise(c)&&c.catch(l=>{handleError(l,e,n)}),c}const o=[];for(let c=0;c<t.length;c++)o.push(callWithAsyncErrorHandling(t[c],e,n,a));return o}function handleError(t,e,n,a=!0){const o=e?e.vnode:null;if(e){let c=e.parent;const l=e.proxy,u=n;for(;c;){const m=c.ec;if(m){for(let b=0;b<m.length;b++)if(m[b](t,l,u)===!1)return}c=c.parent}const d=e.appContext.config.errorHandler;if(d){callWithErrorHandling(d,null,10,[t,l,u]);return}}logError(t,n,o,a)}function logError(t,e,n,a=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick$3(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,n=queue$1.length;for(;e<n;){const a=e+n>>>1;getId(queue$1[a])<t?e=a+1:n=a}return e}function queueJob(t){(!queue$1.length||!queue$1.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue$1.push(t):queue$1.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue$1.indexOf(t);e>flushIndex&&queue$1.splice(e,1)}function queuePostFlushCb(t){isArray$9(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e=isFlushing?flushIndex+1:0){for(;e<queue$1.length;e++){const n=queue$1[e];n&&n.pre&&(queue$1.splice(e,1),e--,n())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((n,a)=>getId(n)-getId(a)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const n=getId(t)-getId(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue$1.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const n=queue$1[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(t,e,...n){if(t.isUnmounted)return;const a=t.vnode.props||EMPTY_OBJ;let o=n;const c=e.startsWith("update:"),l=c&&e.slice(7);if(l&&l in a){const b=`${l==="modelValue"?"model":l}Modifiers`,{number:x,trim:_}=a[b]||EMPTY_OBJ;_&&(o=n.map(w=>isString$6(w)?w.trim():w)),x&&(o=n.map(toNumber))}let u,d=a[u=toHandlerKey(e)]||a[u=toHandlerKey(camelize(e))];!d&&c&&(d=a[u=toHandlerKey(hyphenate(e))]),d&&callWithAsyncErrorHandling(d,t,6,o);const m=a[u+"Once"];if(m){if(!t.emitted)t.emitted={};else if(t.emitted[u])return;t.emitted[u]=!0,callWithAsyncErrorHandling(m,t,6,o)}}function normalizeEmitsOptions(t,e,n=!1){const a=e.emitsCache,o=a.get(t);if(o!==void 0)return o;const c=t.emits;let l={},u=!1;if(!isFunction$4(t)){const d=m=>{const b=normalizeEmitsOptions(m,e,!0);b&&(u=!0,extend$1(l,b))};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!c&&!u?(isObject$4(t)&&a.set(t,null),null):(isArray$9(c)?c.forEach(d=>l[d]=null):extend$1(l,c),isObject$4(t)&&a.set(t,l),l)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn$4(t,e[0].toLowerCase()+e.slice(1))||hasOwn$4(t,hyphenate(e))||hasOwn$4(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,n){if(!e||t._n)return t;const a=(...o)=>{a._d&&setBlockTracking(-1);const c=setCurrentRenderingInstance(e);let l;try{l=t(...o)}finally{setCurrentRenderingInstance(c),a._d&&setBlockTracking(1)}return l};return a._n=!0,a._c=!0,a._d=!0,a}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:n,proxy:a,withProxy:o,props:c,propsOptions:[l],slots:u,attrs:d,emit:m,render:b,renderCache:x,data:_,setupState:w,ctx:S,inheritAttrs:T}=t;let B,C;const D=setCurrentRenderingInstance(t);try{if(n.shapeFlag&4){const U=o||a;B=normalizeVNode(b.call(U,U,x,c,w,_,S)),C=d}else{const U=e;B=normalizeVNode(U.length>1?U(c,{attrs:d,slots:u,emit:m}):U(c,null)),C=e.props?d:getFunctionalFallthrough(d)}}catch(U){blockStack.length=0,handleError(U,t,1),B=createVNode(Comment)}let z=B;if(C&&T!==!1){const U=Object.keys(C),{shapeFlag:Y}=z;U.length&&Y&7&&(l&&U.some(isModelListener)&&(C=filterModelListeners(C,l)),z=cloneVNode(z,C))}return n.dirs&&(z=cloneVNode(z),z.dirs=z.dirs?z.dirs.concat(n.dirs):n.dirs),n.transition&&(z.transition=n.transition),B=z,setCurrentRenderingInstance(D),B}const getFunctionalFallthrough=t=>{let e;for(const n in t)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=t[n]);return e},filterModelListeners=(t,e)=>{const n={};for(const a in t)(!isModelListener(a)||!(a.slice(9)in e))&&(n[a]=t[a]);return n};function shouldUpdateComponent(t,e,n){const{props:a,children:o,component:c}=t,{props:l,children:u,patchFlag:d}=e,m=c.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return a?hasPropsChanged(a,l,m):!!l;if(d&8){const b=e.dynamicProps;for(let x=0;x<b.length;x++){const _=b[x];if(l[_]!==a[_]&&!isEmitListener(m,_))return!0}}}else return(o||u)&&(!u||!u.$stable)?!0:a===l?!1:a?l?hasPropsChanged(a,l,m):!0:!!l;return!1}function hasPropsChanged(t,e,n){const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!0;for(let o=0;o<a.length;o++){const c=a[o];if(e[c]!==t[c]&&!isEmitListener(n,c))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray$9(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}function provide(t,e){if(currentInstance){let n=currentInstance.provides;const a=currentInstance.parent&&currentInstance.parent.provides;a===n&&(n=currentInstance.provides=Object.create(a)),n[t]=e}}function inject$1(t,e,n=!1){const a=currentInstance||currentRenderingInstance;if(a){const o=a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&isFunction$4(e)?e.call(a.proxy):e}}function watchEffect(t,e){return doWatch(t,null,e)}const INITIAL_WATCHER_VALUE={};function watch(t,e,n){return doWatch(t,e,n)}function doWatch(t,e,{immediate:n,deep:a,flush:o,onTrack:c,onTrigger:l}=EMPTY_OBJ){const u=currentInstance;let d,m=!1,b=!1;if(isRef(t)?(d=()=>t.value,m=isShallow(t)):isReactive(t)?(d=()=>t,a=!0):isArray$9(t)?(b=!0,m=t.some(z=>isReactive(z)||isShallow(z)),d=()=>t.map(z=>{if(isRef(z))return z.value;if(isReactive(z))return traverse(z);if(isFunction$4(z))return callWithErrorHandling(z,u,2)})):isFunction$4(t)?e?d=()=>callWithErrorHandling(t,u,2):d=()=>{if(!(u&&u.isUnmounted))return x&&x(),callWithAsyncErrorHandling(t,u,3,[_])}:d=NOOP,e&&a){const z=d;d=()=>traverse(z())}let x,_=z=>{x=C.onStop=()=>{callWithErrorHandling(z,u,4)}},w;if(isInSSRComponentSetup)if(_=NOOP,e?n&&callWithAsyncErrorHandling(e,u,3,[d(),b?[]:void 0,_]):d(),o==="sync"){const z=useSSRContext();w=z.__watcherHandles||(z.__watcherHandles=[])}else return NOOP;let S=b?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const T=()=>{if(C.active)if(e){const z=C.run();(a||m||(b?z.some((U,Y)=>hasChanged(U,S[Y])):hasChanged(z,S)))&&(x&&x(),callWithAsyncErrorHandling(e,u,3,[z,S===INITIAL_WATCHER_VALUE?void 0:b&&S[0]===INITIAL_WATCHER_VALUE?[]:S,_]),S=z)}else C.run()};T.allowRecurse=!!e;let B;o==="sync"?B=T:o==="post"?B=()=>queuePostRenderEffect(T,u&&u.suspense):(T.pre=!0,u&&(T.id=u.uid),B=()=>queueJob(T));const C=new ReactiveEffect(d,B);e?n?T():S=C.run():o==="post"?queuePostRenderEffect(C.run.bind(C),u&&u.suspense):C.run();const D=()=>{C.stop(),u&&u.scope&&remove(u.scope.effects,C)};return w&&w.push(D),D}function instanceWatch(t,e,n){const a=this.proxy,o=isString$6(t)?t.includes(".")?createPathGetter(a,t):()=>a[t]:t.bind(a,a);let c;isFunction$4(e)?c=e:(c=e.handler,n=e);const l=currentInstance;setCurrentInstance(this);const u=doWatch(o,c.bind(a),n);return l?setCurrentInstance(l):unsetCurrentInstance(),u}function createPathGetter(t,e){const n=e.split(".");return()=>{let a=t;for(let o=0;o<n.length&&a;o++)a=a[n[o]];return a}}function traverse(t,e){if(!isObject$4(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray$9(t))for(let n=0;n<t.length;n++)traverse(t[n],e);else if(isSet$4(t)||isMap$4(t))t.forEach(n=>{traverse(n,e)});else if(isPlainObject$2(t))for(const n in t)traverse(t[n],e);return t}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(t,{slots:e}){const n=getCurrentInstance$1(),a=useTransitionState();let o;return()=>{const c=e.default&&getTransitionRawChildren(e.default(),!0);if(!c||!c.length)return;let l=c[0];if(c.length>1){for(const T of c)if(T.type!==Comment){l=T;break}}const u=toRaw(t),{mode:d}=u;if(a.isLeaving)return emptyPlaceholder(l);const m=getKeepAliveChild(l);if(!m)return emptyPlaceholder(l);const b=resolveTransitionHooks(m,u,a,n);setTransitionHooks(m,b);const x=n.subTree,_=x&&getKeepAliveChild(x);let w=!1;const{getTransitionKey:S}=m.type;if(S){const T=S();o===void 0?o=T:T!==o&&(o=T,w=!0)}if(_&&_.type!==Comment&&(!isSameVNodeType(m,_)||w)){const T=resolveTransitionHooks(_,u,a,n);if(setTransitionHooks(_,T),d==="out-in")return a.isLeaving=!0,T.afterLeave=()=>{a.isLeaving=!1,n.update.active!==!1&&n.update()},emptyPlaceholder(l);d==="in-out"&&m.type!==Comment&&(T.delayLeave=(B,C,D)=>{const z=getLeavingNodesForType(a,_);z[String(_.key)]=_,B._leaveCb=()=>{C(),B._leaveCb=void 0,delete b.delayedLeave},b.delayedLeave=D})}return l}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,e){const{leavingVNodes:n}=t;let a=n.get(e.type);return a||(a=Object.create(null),n.set(e.type,a)),a}function resolveTransitionHooks(t,e,n,a){const{appear:o,mode:c,persisted:l=!1,onBeforeEnter:u,onEnter:d,onAfterEnter:m,onEnterCancelled:b,onBeforeLeave:x,onLeave:_,onAfterLeave:w,onLeaveCancelled:S,onBeforeAppear:T,onAppear:B,onAfterAppear:C,onAppearCancelled:D}=e,z=String(t.key),U=getLeavingNodesForType(n,t),Y=(J,Z)=>{J&&callWithAsyncErrorHandling(J,a,9,Z)},X=(J,Z)=>{const se=Z[1];Y(J,Z),isArray$9(J)?J.every(ie=>ie.length<=1)&&se():J.length<=1&&se()},O={mode:c,persisted:l,beforeEnter(J){let Z=u;if(!n.isMounted)if(o)Z=T||u;else return;J._leaveCb&&J._leaveCb(!0);const se=U[z];se&&isSameVNodeType(t,se)&&se.el._leaveCb&&se.el._leaveCb(),Y(Z,[J])},enter(J){let Z=d,se=m,ie=b;if(!n.isMounted)if(o)Z=B||d,se=C||m,ie=D||b;else return;let F=!1;const k=J._enterCb=y=>{F||(F=!0,y?Y(ie,[J]):Y(se,[J]),O.delayedLeave&&O.delayedLeave(),J._enterCb=void 0)};Z?X(Z,[J,k]):k()},leave(J,Z){const se=String(t.key);if(J._enterCb&&J._enterCb(!0),n.isUnmounting)return Z();Y(x,[J]);let ie=!1;const F=J._leaveCb=k=>{ie||(ie=!0,Z(),k?Y(S,[J]):Y(w,[J]),J._leaveCb=void 0,U[se]===t&&delete U[se])};U[se]=t,_?X(_,[J,F]):F()},clone(J){return resolveTransitionHooks(J,e,n,a)}};return O}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function getTransitionRawChildren(t,e=!1,n){let a=[],o=0;for(let c=0;c<t.length;c++){let l=t[c];const u=n==null?l.key:String(n)+String(l.key!=null?l.key:c);l.type===Fragment?(l.patchFlag&128&&o++,a=a.concat(getTransitionRawChildren(l.children,e,u))):(e||l.type!==Comment)&&a.push(u!=null?cloneVNode(l,{key:u}):l)}if(o>1)for(let c=0;c<a.length;c++)a[c].patchFlag=-2;return a}function defineComponent$1(t){return isFunction$4(t)?{setup:t,name:t.name}:t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,n=currentInstance){const a=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(injectHook(e,a,n),n){let o=n.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(a,e,n,o),o=o.parent}}function injectToKeepAliveRoot(t,e,n,a){const o=injectHook(e,t,a,!0);onUnmounted(()=>{remove(a[e],o)},n)}function injectHook(t,e,n=currentInstance,a=!1){if(n){const o=n[t]||(n[t]=[]),c=e.__weh||(e.__weh=(...l)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const u=callWithAsyncErrorHandling(e,n,t,l);return unsetCurrentInstance(),resetTracking(),u});return a?o.unshift(c):o.push(c),c}}const createHook=t=>(e,n=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...a)=>e(...a),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}function withDirectives(t,e){const n=currentRenderingInstance;if(n===null)return t;const a=getExposeProxy(n)||n.proxy,o=t.dirs||(t.dirs=[]);for(let c=0;c<e.length;c++){let[l,u,d,m=EMPTY_OBJ]=e[c];l&&(isFunction$4(l)&&(l={mounted:l,updated:l}),l.deep&&traverse(u),o.push({dir:l,instance:a,value:u,oldValue:void 0,arg:d,modifiers:m}))}return t}function invokeDirectiveHook(t,e,n,a){const o=t.dirs,c=e&&e.dirs;for(let l=0;l<o.length;l++){const u=o[l];c&&(u.oldValue=c[l].value);let d=u.dir[a];d&&(pauseTracking(),callWithAsyncErrorHandling(d,n,8,[t.el,u,t,e]),resetTracking())}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(t,e){return resolveAsset(COMPONENTS,t,!0,e)||t}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(t){return isString$6(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveDirective(t){return resolveAsset(DIRECTIVES,t)}function resolveAsset(t,e,n=!0,a=!1){const o=currentRenderingInstance||currentInstance;if(o){const c=o.type;if(t===COMPONENTS){const u=getComponentName(c,!1);if(u&&(u===e||u===camelize(e)||u===capitalize$1(camelize(e))))return c}const l=resolve$1(o[t]||c[t],e)||resolve$1(o.appContext[t],e);return!l&&a?c:l}}function resolve$1(t,e){return t&&(t[e]||t[camelize(e)]||t[capitalize$1(camelize(e))])}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick$3.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn$4(t,e),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:n,setupState:a,data:o,props:c,accessCache:l,type:u,appContext:d}=t;let m;if(e[0]!=="$"){const w=l[e];if(w!==void 0)switch(w){case 1:return a[e];case 2:return o[e];case 4:return n[e];case 3:return c[e]}else{if(hasSetupBinding(a,e))return l[e]=1,a[e];if(o!==EMPTY_OBJ&&hasOwn$4(o,e))return l[e]=2,o[e];if((m=t.propsOptions[0])&&hasOwn$4(m,e))return l[e]=3,c[e];if(n!==EMPTY_OBJ&&hasOwn$4(n,e))return l[e]=4,n[e];shouldCacheAccess&&(l[e]=0)}}const b=publicPropertiesMap[e];let x,_;if(b)return e==="$attrs"&&track(t,"get",e),b(t);if((x=u.__cssModules)&&(x=x[e]))return x;if(n!==EMPTY_OBJ&&hasOwn$4(n,e))return l[e]=4,n[e];if(_=d.config.globalProperties,hasOwn$4(_,e))return _[e]},set({_:t},e,n){const{data:a,setupState:o,ctx:c}=t;return hasSetupBinding(o,e)?(o[e]=n,!0):a!==EMPTY_OBJ&&hasOwn$4(a,e)?(a[e]=n,!0):hasOwn$4(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(c[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:a,appContext:o,propsOptions:c}},l){let u;return!!n[l]||t!==EMPTY_OBJ&&hasOwn$4(t,l)||hasSetupBinding(e,l)||(u=c[0])&&hasOwn$4(u,l)||hasOwn$4(a,l)||hasOwn$4(publicPropertiesMap,l)||hasOwn$4(o.config.globalProperties,l)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hasOwn$4(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),n=t.proxy,a=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,t,"bc");const{data:o,computed:c,methods:l,watch:u,provide:d,inject:m,created:b,beforeMount:x,mounted:_,beforeUpdate:w,updated:S,activated:T,deactivated:B,beforeDestroy:C,beforeUnmount:D,destroyed:z,unmounted:U,render:Y,renderTracked:X,renderTriggered:O,errorCaptured:J,serverPrefetch:Z,expose:se,inheritAttrs:ie,components:F,directives:k,filters:y}=e;if(m&&resolveInjections(m,a,null,t.appContext.config.unwrapInjectedRef),l)for(const P in l){const H=l[P];isFunction$4(H)&&(a[P]=H.bind(n))}if(o){const P=o.call(n,n);isObject$4(P)&&(t.data=reactive(P))}if(shouldCacheAccess=!0,c)for(const P in c){const H=c[P],q=isFunction$4(H)?H.bind(n,n):isFunction$4(H.get)?H.get.bind(n,n):NOOP,j=!isFunction$4(H)&&isFunction$4(H.set)?H.set.bind(n):NOOP,M=computed({get:q,set:j});Object.defineProperty(a,P,{enumerable:!0,configurable:!0,get:()=>M.value,set:E=>M.value=E})}if(u)for(const P in u)createWatcher(u[P],a,n,P);if(d){const P=isFunction$4(d)?d.call(n):d;Reflect.ownKeys(P).forEach(H=>{provide(H,P[H])})}b&&callHook$1(b,t,"c");function I(P,H){isArray$9(H)?H.forEach(q=>P(q.bind(n))):H&&P(H.bind(n))}if(I(onBeforeMount,x),I(onMounted,_),I(onBeforeUpdate,w),I(onUpdated,S),I(onActivated,T),I(onDeactivated,B),I(onErrorCaptured,J),I(onRenderTracked,X),I(onRenderTriggered,O),I(onBeforeUnmount,D),I(onUnmounted,U),I(onServerPrefetch,Z),isArray$9(se))if(se.length){const P=t.exposed||(t.exposed={});se.forEach(H=>{Object.defineProperty(P,H,{get:()=>n[H],set:q=>n[H]=q})})}else t.exposed||(t.exposed={});Y&&t.render===NOOP&&(t.render=Y),ie!=null&&(t.inheritAttrs=ie),F&&(t.components=F),k&&(t.directives=k)}function resolveInjections(t,e,n=NOOP,a=!1){isArray$9(t)&&(t=normalizeInject(t));for(const o in t){const c=t[o];let l;isObject$4(c)?"default"in c?l=inject$1(c.from||o,c.default,!0):l=inject$1(c.from||o):l=inject$1(c),isRef(l)&&a?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>l.value,set:u=>l.value=u}):e[o]=l}}function callHook$1(t,e,n){callWithAsyncErrorHandling(isArray$9(t)?t.map(a=>a.bind(e.proxy)):t.bind(e.proxy),e,n)}function createWatcher(t,e,n,a){const o=a.includes(".")?createPathGetter(n,a):()=>n[a];if(isString$6(t)){const c=e[t];isFunction$4(c)&&watch(o,c)}else if(isFunction$4(t))watch(o,t.bind(n));else if(isObject$4(t))if(isArray$9(t))t.forEach(c=>createWatcher(c,e,n,a));else{const c=isFunction$4(t.handler)?t.handler.bind(n):e[t.handler];isFunction$4(c)&&watch(o,c,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:n,extends:a}=e,{mixins:o,optionsCache:c,config:{optionMergeStrategies:l}}=t.appContext,u=c.get(e);let d;return u?d=u:!o.length&&!n&&!a?d=e:(d={},o.length&&o.forEach(m=>mergeOptions$3(d,m,l,!0)),mergeOptions$3(d,e,l)),isObject$4(e)&&c.set(e,d),d}function mergeOptions$3(t,e,n,a=!1){const{mixins:o,extends:c}=e;c&&mergeOptions$3(t,c,n,!0),o&&o.forEach(l=>mergeOptions$3(t,l,n,!0));for(const l in e)if(!(a&&l==="expose")){const u=internalOptionMergeStrats[l]||n&&n[l];t[l]=u?u(t[l],e[l]):e[l]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend$1(isFunction$4(t)?t.call(this,this):t,isFunction$4(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray$9(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend$1(extend$1(Object.create(null),t),e):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const n=extend$1(Object.create(null),t);for(const a in e)n[a]=mergeAsArray(t[a],e[a]);return n}function initProps(t,e,n,a=!1){const o={},c={};def(c,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,o,c);for(const l in t.propsOptions[0])l in o||(o[l]=void 0);n?t.props=a?o:shallowReactive(o):t.type.props?t.props=o:t.props=c,t.attrs=c}function updateProps(t,e,n,a){const{props:o,attrs:c,vnode:{patchFlag:l}}=t,u=toRaw(o),[d]=t.propsOptions;let m=!1;if((a||l>0)&&!(l&16)){if(l&8){const b=t.vnode.dynamicProps;for(let x=0;x<b.length;x++){let _=b[x];if(isEmitListener(t.emitsOptions,_))continue;const w=e[_];if(d)if(hasOwn$4(c,_))w!==c[_]&&(c[_]=w,m=!0);else{const S=camelize(_);o[S]=resolvePropValue(d,u,S,w,t,!1)}else w!==c[_]&&(c[_]=w,m=!0)}}}else{setFullProps(t,e,o,c)&&(m=!0);let b;for(const x in u)(!e||!hasOwn$4(e,x)&&((b=hyphenate(x))===x||!hasOwn$4(e,b)))&&(d?n&&(n[x]!==void 0||n[b]!==void 0)&&(o[x]=resolvePropValue(d,u,x,void 0,t,!0)):delete o[x]);if(c!==u)for(const x in c)(!e||!hasOwn$4(e,x))&&(delete c[x],m=!0)}m&&trigger(t,"set","$attrs")}function setFullProps(t,e,n,a){const[o,c]=t.propsOptions;let l=!1,u;if(e)for(let d in e){if(isReservedProp(d))continue;const m=e[d];let b;o&&hasOwn$4(o,b=camelize(d))?!c||!c.includes(b)?n[b]=m:(u||(u={}))[b]=m:isEmitListener(t.emitsOptions,d)||(!(d in a)||m!==a[d])&&(a[d]=m,l=!0)}if(c){const d=toRaw(n),m=u||EMPTY_OBJ;for(let b=0;b<c.length;b++){const x=c[b];n[x]=resolvePropValue(o,d,x,m[x],t,!hasOwn$4(m,x))}}return l}function resolvePropValue(t,e,n,a,o,c){const l=t[n];if(l!=null){const u=hasOwn$4(l,"default");if(u&&a===void 0){const d=l.default;if(l.type!==Function&&isFunction$4(d)){const{propsDefaults:m}=o;n in m?a=m[n]:(setCurrentInstance(o),a=m[n]=d.call(null,e),unsetCurrentInstance())}else a=d}l[0]&&(c&&!u?a=!1:l[1]&&(a===""||a===hyphenate(n))&&(a=!0))}return a}function normalizePropsOptions(t,e,n=!1){const a=e.propsCache,o=a.get(t);if(o)return o;const c=t.props,l={},u=[];let d=!1;if(!isFunction$4(t)){const b=x=>{d=!0;const[_,w]=normalizePropsOptions(x,e,!0);extend$1(l,_),w&&u.push(...w)};!n&&e.mixins.length&&e.mixins.forEach(b),t.extends&&b(t.extends),t.mixins&&t.mixins.forEach(b)}if(!c&&!d)return isObject$4(t)&&a.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$9(c))for(let b=0;b<c.length;b++){const x=camelize(c[b]);validatePropName(x)&&(l[x]=EMPTY_OBJ)}else if(c)for(const b in c){const x=camelize(b);if(validatePropName(x)){const _=c[b],w=l[x]=isArray$9(_)||isFunction$4(_)?{type:_}:Object.assign({},_);if(w){const S=getTypeIndex(Boolean,w.type),T=getTypeIndex(String,w.type);w[0]=S>-1,w[1]=T<0||S<T,(S>-1||hasOwn$4(w,"default"))&&u.push(x)}}}const m=[l,u];return isObject$4(t)&&a.set(t,m),m}function validatePropName(t){return t[0]!=="$"}function getType(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray$9(e)?e.findIndex(n=>isSameType(n,t)):isFunction$4(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$9(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,e,n)=>{if(e._n)return e;const a=withCtx((...o)=>normalizeSlotValue(e(...o)),n);return a._c=!1,a},normalizeObjectSlots=(t,e,n)=>{const a=t._ctx;for(const o in t){if(isInternalKey(o))continue;const c=t[o];if(isFunction$4(c))e[o]=normalizeSlot$1(o,c,a);else if(c!=null){const l=normalizeSlotValue(c);e[o]=()=>l}}},normalizeVNodeSlots=(t,e)=>{const n=normalizeSlotValue(e);t.slots.default=()=>n},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=toRaw(e),def(e,"_",n)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,n)=>{const{vnode:a,slots:o}=t;let c=!0,l=EMPTY_OBJ;if(a.shapeFlag&32){const u=e._;u?n&&u===1?c=!1:(extend$1(o,e),!n&&u===1&&delete o._):(c=!e.$stable,normalizeObjectSlots(e,o)),l=e}else e&&(normalizeVNodeSlots(t,e),l={default:1});if(c)for(const u in o)!isInternalKey(u)&&!(u in l)&&delete o[u]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(t,e){return function(a,o=null){isFunction$4(a)||(a=Object.assign({},a)),o!=null&&!isObject$4(o)&&(o=null);const c=createAppContext(),l=new Set;let u=!1;const d=c.app={_uid:uid++,_component:a,_props:o,_container:null,_context:c,_instance:null,version:version$m,get config(){return c.config},set config(m){},use(m,...b){return l.has(m)||(m&&isFunction$4(m.install)?(l.add(m),m.install(d,...b)):isFunction$4(m)&&(l.add(m),m(d,...b))),d},mixin(m){return c.mixins.includes(m)||c.mixins.push(m),d},component(m,b){return b?(c.components[m]=b,d):c.components[m]},directive(m,b){return b?(c.directives[m]=b,d):c.directives[m]},mount(m,b,x){if(!u){const _=createVNode(a,o);return _.appContext=c,b&&e?e(_,m):t(_,m,x),u=!0,d._container=m,m.__vue_app__=d,getExposeProxy(_.component)||_.component.proxy}},unmount(){u&&(t(null,d._container),delete d._container.__vue_app__)},provide(m,b){return c.provides[m]=b,d}};return d}}function setRef(t,e,n,a,o=!1){if(isArray$9(t)){t.forEach((_,w)=>setRef(_,e&&(isArray$9(e)?e[w]:e),n,a,o));return}if(isAsyncWrapper(a)&&!o)return;const c=a.shapeFlag&4?getExposeProxy(a.component)||a.component.proxy:a.el,l=o?null:c,{i:u,r:d}=t,m=e&&e.r,b=u.refs===EMPTY_OBJ?u.refs={}:u.refs,x=u.setupState;if(m!=null&&m!==d&&(isString$6(m)?(b[m]=null,hasOwn$4(x,m)&&(x[m]=null)):isRef(m)&&(m.value=null)),isFunction$4(d))callWithErrorHandling(d,u,12,[l,b]);else{const _=isString$6(d),w=isRef(d);if(_||w){const S=()=>{if(t.f){const T=_?hasOwn$4(x,d)?x[d]:b[d]:d.value;o?isArray$9(T)&&remove(T,c):isArray$9(T)?T.includes(c)||T.push(c):_?(b[d]=[c],hasOwn$4(x,d)&&(x[d]=b[d])):(d.value=[c],t.k&&(b[t.k]=d.value))}else _?(b[d]=l,hasOwn$4(x,d)&&(x[d]=l)):w&&(d.value=l,t.k&&(b[t.k]=l))};l?(S.id=-1,queuePostRenderEffect(S,n)):S()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const n=getGlobalThis$1();n.__VUE__=!0;const{insert:a,remove:o,patchProp:c,createElement:l,createText:u,createComment:d,setText:m,setElementText:b,parentNode:x,nextSibling:_,setScopeId:w=NOOP,insertStaticContent:S}=t,T=(te,pe,ee,ge=null,Ee=null,be=null,xe=!1,ve=null,Se=!!pe.dynamicChildren)=>{if(te===pe)return;te&&!isSameVNodeType(te,pe)&&(ge=fe(te),E(te,Ee,be,!0),te=null),pe.patchFlag===-2&&(Se=!1,pe.dynamicChildren=null);const{type:ke,ref:Ce,shapeFlag:Re}=pe;switch(ke){case Text:B(te,pe,ee,ge);break;case Comment:C(te,pe,ee,ge);break;case Static:te==null&&D(pe,ee,ge,xe);break;case Fragment:F(te,pe,ee,ge,Ee,be,xe,ve,Se);break;default:Re&1?Y(te,pe,ee,ge,Ee,be,xe,ve,Se):Re&6?k(te,pe,ee,ge,Ee,be,xe,ve,Se):(Re&64||Re&128)&&ke.process(te,pe,ee,ge,Ee,be,xe,ve,Se,de)}Ce!=null&&Ee&&setRef(Ce,te&&te.ref,be,pe||te,!pe)},B=(te,pe,ee,ge)=>{if(te==null)a(pe.el=u(pe.children),ee,ge);else{const Ee=pe.el=te.el;pe.children!==te.children&&m(Ee,pe.children)}},C=(te,pe,ee,ge)=>{te==null?a(pe.el=d(pe.children||""),ee,ge):pe.el=te.el},D=(te,pe,ee,ge)=>{[te.el,te.anchor]=S(te.children,pe,ee,ge,te.el,te.anchor)},z=({el:te,anchor:pe},ee,ge)=>{let Ee;for(;te&&te!==pe;)Ee=_(te),a(te,ee,ge),te=Ee;a(pe,ee,ge)},U=({el:te,anchor:pe})=>{let ee;for(;te&&te!==pe;)ee=_(te),o(te),te=ee;o(pe)},Y=(te,pe,ee,ge,Ee,be,xe,ve,Se)=>{xe=xe||pe.type==="svg",te==null?X(pe,ee,ge,Ee,be,xe,ve,Se):Z(te,pe,Ee,be,xe,ve,Se)},X=(te,pe,ee,ge,Ee,be,xe,ve)=>{let Se,ke;const{type:Ce,props:Re,shapeFlag:Le,transition:je,dirs:Pe}=te;if(Se=te.el=l(te.type,be,Re&&Re.is,Re),Le&8?b(Se,te.children):Le&16&&J(te.children,Se,null,ge,Ee,be&&Ce!=="foreignObject",xe,ve),Pe&&invokeDirectiveHook(te,null,ge,"created"),Re){for(const ne in Re)ne!=="value"&&!isReservedProp(ne)&&c(Se,ne,null,Re[ne],be,te.children,ge,Ee,ce);"value"in Re&&c(Se,"value",null,Re.value),(ke=Re.onVnodeBeforeMount)&&invokeVNodeHook(ke,ge,te)}O(Se,te,te.scopeId,xe,ge),Pe&&invokeDirectiveHook(te,null,ge,"beforeMount");const me=(!Ee||Ee&&!Ee.pendingBranch)&&je&&!je.persisted;me&&je.beforeEnter(Se),a(Se,pe,ee),((ke=Re&&Re.onVnodeMounted)||me||Pe)&&queuePostRenderEffect(()=>{ke&&invokeVNodeHook(ke,ge,te),me&&je.enter(Se),Pe&&invokeDirectiveHook(te,null,ge,"mounted")},Ee)},O=(te,pe,ee,ge,Ee)=>{if(ee&&w(te,ee),ge)for(let be=0;be<ge.length;be++)w(te,ge[be]);if(Ee){let be=Ee.subTree;if(pe===be){const xe=Ee.vnode;O(te,xe,xe.scopeId,xe.slotScopeIds,Ee.parent)}}},J=(te,pe,ee,ge,Ee,be,xe,ve,Se=0)=>{for(let ke=Se;ke<te.length;ke++){const Ce=te[ke]=ve?cloneIfMounted(te[ke]):normalizeVNode(te[ke]);T(null,Ce,pe,ee,ge,Ee,be,xe,ve)}},Z=(te,pe,ee,ge,Ee,be,xe)=>{const ve=pe.el=te.el;let{patchFlag:Se,dynamicChildren:ke,dirs:Ce}=pe;Se|=te.patchFlag&16;const Re=te.props||EMPTY_OBJ,Le=pe.props||EMPTY_OBJ;let je;ee&&toggleRecurse(ee,!1),(je=Le.onVnodeBeforeUpdate)&&invokeVNodeHook(je,ee,pe,te),Ce&&invokeDirectiveHook(pe,te,ee,"beforeUpdate"),ee&&toggleRecurse(ee,!0);const Pe=Ee&&pe.type!=="foreignObject";if(ke?se(te.dynamicChildren,ke,ve,ee,ge,Pe,be):xe||H(te,pe,ve,null,ee,ge,Pe,be,!1),Se>0){if(Se&16)ie(ve,pe,Re,Le,ee,ge,Ee);else if(Se&2&&Re.class!==Le.class&&c(ve,"class",null,Le.class,Ee),Se&4&&c(ve,"style",Re.style,Le.style,Ee),Se&8){const me=pe.dynamicProps;for(let ne=0;ne<me.length;ne++){const ue=me[ne],_e=Re[ue],Ie=Le[ue];(Ie!==_e||ue==="value")&&c(ve,ue,_e,Ie,Ee,te.children,ee,ge,ce)}}Se&1&&te.children!==pe.children&&b(ve,pe.children)}else!xe&&ke==null&&ie(ve,pe,Re,Le,ee,ge,Ee);((je=Le.onVnodeUpdated)||Ce)&&queuePostRenderEffect(()=>{je&&invokeVNodeHook(je,ee,pe,te),Ce&&invokeDirectiveHook(pe,te,ee,"updated")},ge)},se=(te,pe,ee,ge,Ee,be,xe)=>{for(let ve=0;ve<pe.length;ve++){const Se=te[ve],ke=pe[ve],Ce=Se.el&&(Se.type===Fragment||!isSameVNodeType(Se,ke)||Se.shapeFlag&70)?x(Se.el):ee;T(Se,ke,Ce,null,ge,Ee,be,xe,!0)}},ie=(te,pe,ee,ge,Ee,be,xe)=>{if(ee!==ge){if(ee!==EMPTY_OBJ)for(const ve in ee)!isReservedProp(ve)&&!(ve in ge)&&c(te,ve,ee[ve],null,xe,pe.children,Ee,be,ce);for(const ve in ge){if(isReservedProp(ve))continue;const Se=ge[ve],ke=ee[ve];Se!==ke&&ve!=="value"&&c(te,ve,ke,Se,xe,pe.children,Ee,be,ce)}"value"in ge&&c(te,"value",ee.value,ge.value)}},F=(te,pe,ee,ge,Ee,be,xe,ve,Se)=>{const ke=pe.el=te?te.el:u(""),Ce=pe.anchor=te?te.anchor:u("");let{patchFlag:Re,dynamicChildren:Le,slotScopeIds:je}=pe;je&&(ve=ve?ve.concat(je):je),te==null?(a(ke,ee,ge),a(Ce,ee,ge),J(pe.children,ee,Ce,Ee,be,xe,ve,Se)):Re>0&&Re&64&&Le&&te.dynamicChildren?(se(te.dynamicChildren,Le,ee,Ee,be,xe,ve),(pe.key!=null||Ee&&pe===Ee.subTree)&&traverseStaticChildren(te,pe,!0)):H(te,pe,ee,Ce,Ee,be,xe,ve,Se)},k=(te,pe,ee,ge,Ee,be,xe,ve,Se)=>{pe.slotScopeIds=ve,te==null?pe.shapeFlag&512?Ee.ctx.activate(pe,ee,ge,xe,Se):y(pe,ee,ge,Ee,be,xe,Se):A(te,pe,Se)},y=(te,pe,ee,ge,Ee,be,xe)=>{const ve=te.component=createComponentInstance(te,ge,Ee);if(isKeepAlive(te)&&(ve.ctx.renderer=de),setupComponent(ve),ve.asyncDep){if(Ee&&Ee.registerDep(ve,I),!te.el){const Se=ve.subTree=createVNode(Comment);C(null,Se,pe,ee)}return}I(ve,te,pe,ee,Ee,be,xe)},A=(te,pe,ee)=>{const ge=pe.component=te.component;if(shouldUpdateComponent(te,pe,ee))if(ge.asyncDep&&!ge.asyncResolved){P(ge,pe,ee);return}else ge.next=pe,invalidateJob(ge.update),ge.update();else pe.el=te.el,ge.vnode=pe},I=(te,pe,ee,ge,Ee,be,xe)=>{const ve=()=>{if(te.isMounted){let{next:Ce,bu:Re,u:Le,parent:je,vnode:Pe}=te,me=Ce,ne;toggleRecurse(te,!1),Ce?(Ce.el=Pe.el,P(te,Ce,xe)):Ce=Pe,Re&&invokeArrayFns(Re),(ne=Ce.props&&Ce.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ne,je,Ce,Pe),toggleRecurse(te,!0);const ue=renderComponentRoot(te),_e=te.subTree;te.subTree=ue,T(_e,ue,x(_e.el),fe(_e),te,Ee,be),Ce.el=ue.el,me===null&&updateHOCHostEl(te,ue.el),Le&&queuePostRenderEffect(Le,Ee),(ne=Ce.props&&Ce.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ne,je,Ce,Pe),Ee)}else{let Ce;const{el:Re,props:Le}=pe,{bm:je,m:Pe,parent:me}=te,ne=isAsyncWrapper(pe);if(toggleRecurse(te,!1),je&&invokeArrayFns(je),!ne&&(Ce=Le&&Le.onVnodeBeforeMount)&&invokeVNodeHook(Ce,me,pe),toggleRecurse(te,!0),Re&&he){const ue=()=>{te.subTree=renderComponentRoot(te),he(Re,te.subTree,te,Ee,null)};ne?pe.type.__asyncLoader().then(()=>!te.isUnmounted&&ue()):ue()}else{const ue=te.subTree=renderComponentRoot(te);T(null,ue,ee,ge,te,Ee,be),pe.el=ue.el}if(Pe&&queuePostRenderEffect(Pe,Ee),!ne&&(Ce=Le&&Le.onVnodeMounted)){const ue=pe;queuePostRenderEffect(()=>invokeVNodeHook(Ce,me,ue),Ee)}(pe.shapeFlag&256||me&&isAsyncWrapper(me.vnode)&&me.vnode.shapeFlag&256)&&te.a&&queuePostRenderEffect(te.a,Ee),te.isMounted=!0,pe=ee=ge=null}},Se=te.effect=new ReactiveEffect(ve,()=>queueJob(ke),te.scope),ke=te.update=()=>Se.run();ke.id=te.uid,toggleRecurse(te,!0),ke()},P=(te,pe,ee)=>{pe.component=te;const ge=te.vnode.props;te.vnode=pe,te.next=null,updateProps(te,pe.props,ge,ee),updateSlots(te,pe.children,ee),pauseTracking(),flushPreFlushCbs(),resetTracking()},H=(te,pe,ee,ge,Ee,be,xe,ve,Se=!1)=>{const ke=te&&te.children,Ce=te?te.shapeFlag:0,Re=pe.children,{patchFlag:Le,shapeFlag:je}=pe;if(Le>0){if(Le&128){j(ke,Re,ee,ge,Ee,be,xe,ve,Se);return}else if(Le&256){q(ke,Re,ee,ge,Ee,be,xe,ve,Se);return}}je&8?(Ce&16&&ce(ke,Ee,be),Re!==ke&&b(ee,Re)):Ce&16?je&16?j(ke,Re,ee,ge,Ee,be,xe,ve,Se):ce(ke,Ee,be,!0):(Ce&8&&b(ee,""),je&16&&J(Re,ee,ge,Ee,be,xe,ve,Se))},q=(te,pe,ee,ge,Ee,be,xe,ve,Se)=>{te=te||EMPTY_ARR,pe=pe||EMPTY_ARR;const ke=te.length,Ce=pe.length,Re=Math.min(ke,Ce);let Le;for(Le=0;Le<Re;Le++){const je=pe[Le]=Se?cloneIfMounted(pe[Le]):normalizeVNode(pe[Le]);T(te[Le],je,ee,null,Ee,be,xe,ve,Se)}ke>Ce?ce(te,Ee,be,!0,!1,Re):J(pe,ee,ge,Ee,be,xe,ve,Se,Re)},j=(te,pe,ee,ge,Ee,be,xe,ve,Se)=>{let ke=0;const Ce=pe.length;let Re=te.length-1,Le=Ce-1;for(;ke<=Re&&ke<=Le;){const je=te[ke],Pe=pe[ke]=Se?cloneIfMounted(pe[ke]):normalizeVNode(pe[ke]);if(isSameVNodeType(je,Pe))T(je,Pe,ee,null,Ee,be,xe,ve,Se);else break;ke++}for(;ke<=Re&&ke<=Le;){const je=te[Re],Pe=pe[Le]=Se?cloneIfMounted(pe[Le]):normalizeVNode(pe[Le]);if(isSameVNodeType(je,Pe))T(je,Pe,ee,null,Ee,be,xe,ve,Se);else break;Re--,Le--}if(ke>Re){if(ke<=Le){const je=Le+1,Pe=je<Ce?pe[je].el:ge;for(;ke<=Le;)T(null,pe[ke]=Se?cloneIfMounted(pe[ke]):normalizeVNode(pe[ke]),ee,Pe,Ee,be,xe,ve,Se),ke++}}else if(ke>Le)for(;ke<=Re;)E(te[ke],Ee,be,!0),ke++;else{const je=ke,Pe=ke,me=new Map;for(ke=Pe;ke<=Le;ke++){const We=pe[ke]=Se?cloneIfMounted(pe[ke]):normalizeVNode(pe[ke]);We.key!=null&&me.set(We.key,ke)}let ne,ue=0;const _e=Le-Pe+1;let Ie=!1,Ne=0;const De=new Array(_e);for(ke=0;ke<_e;ke++)De[ke]=0;for(ke=je;ke<=Re;ke++){const We=te[ke];if(ue>=_e){E(We,Ee,be,!0);continue}let Ke;if(We.key!=null)Ke=me.get(We.key);else for(ne=Pe;ne<=Le;ne++)if(De[ne-Pe]===0&&isSameVNodeType(We,pe[ne])){Ke=ne;break}Ke===void 0?E(We,Ee,be,!0):(De[Ke-Pe]=ke+1,Ke>=Ne?Ne=Ke:Ie=!0,T(We,pe[Ke],ee,null,Ee,be,xe,ve,Se),ue++)}const et=Ie?getSequence(De):EMPTY_ARR;for(ne=et.length-1,ke=_e-1;ke>=0;ke--){const We=Pe+ke,Ke=pe[We],xt=We+1<Ce?pe[We+1].el:ge;De[ke]===0?T(null,Ke,ee,xt,Ee,be,xe,ve,Se):Ie&&(ne<0||ke!==et[ne]?M(Ke,ee,xt,2):ne--)}}},M=(te,pe,ee,ge,Ee=null)=>{const{el:be,type:xe,transition:ve,children:Se,shapeFlag:ke}=te;if(ke&6){M(te.component.subTree,pe,ee,ge);return}if(ke&128){te.suspense.move(pe,ee,ge);return}if(ke&64){xe.move(te,pe,ee,de);return}if(xe===Fragment){a(be,pe,ee);for(let Re=0;Re<Se.length;Re++)M(Se[Re],pe,ee,ge);a(te.anchor,pe,ee);return}if(xe===Static){z(te,pe,ee);return}if(ge!==2&&ke&1&&ve)if(ge===0)ve.beforeEnter(be),a(be,pe,ee),queuePostRenderEffect(()=>ve.enter(be),Ee);else{const{leave:Re,delayLeave:Le,afterLeave:je}=ve,Pe=()=>a(be,pe,ee),me=()=>{Re(be,()=>{Pe(),je&&je()})};Le?Le(be,Pe,me):me()}else a(be,pe,ee)},E=(te,pe,ee,ge=!1,Ee=!1)=>{const{type:be,props:xe,ref:ve,children:Se,dynamicChildren:ke,shapeFlag:Ce,patchFlag:Re,dirs:Le}=te;if(ve!=null&&setRef(ve,null,ee,te,!0),Ce&256){pe.ctx.deactivate(te);return}const je=Ce&1&&Le,Pe=!isAsyncWrapper(te);let me;if(Pe&&(me=xe&&xe.onVnodeBeforeUnmount)&&invokeVNodeHook(me,pe,te),Ce&6)Q(te.component,ee,ge);else{if(Ce&128){te.suspense.unmount(ee,ge);return}je&&invokeDirectiveHook(te,null,pe,"beforeUnmount"),Ce&64?te.type.remove(te,pe,ee,Ee,de,ge):ke&&(be!==Fragment||Re>0&&Re&64)?ce(ke,pe,ee,!1,!0):(be===Fragment&&Re&384||!Ee&&Ce&16)&&ce(Se,pe,ee),ge&&L(te)}(Pe&&(me=xe&&xe.onVnodeUnmounted)||je)&&queuePostRenderEffect(()=>{me&&invokeVNodeHook(me,pe,te),je&&invokeDirectiveHook(te,null,pe,"unmounted")},ee)},L=te=>{const{type:pe,el:ee,anchor:ge,transition:Ee}=te;if(pe===Fragment){le(ee,ge);return}if(pe===Static){U(te);return}const be=()=>{o(ee),Ee&&!Ee.persisted&&Ee.afterLeave&&Ee.afterLeave()};if(te.shapeFlag&1&&Ee&&!Ee.persisted){const{leave:xe,delayLeave:ve}=Ee,Se=()=>xe(ee,be);ve?ve(te.el,be,Se):Se()}else be()},le=(te,pe)=>{let ee;for(;te!==pe;)ee=_(te),o(te),te=ee;o(pe)},Q=(te,pe,ee)=>{const{bum:ge,scope:Ee,update:be,subTree:xe,um:ve}=te;ge&&invokeArrayFns(ge),Ee.stop(),be&&(be.active=!1,E(xe,te,pe,ee)),ve&&queuePostRenderEffect(ve,pe),queuePostRenderEffect(()=>{te.isUnmounted=!0},pe),pe&&pe.pendingBranch&&!pe.isUnmounted&&te.asyncDep&&!te.asyncResolved&&te.suspenseId===pe.pendingId&&(pe.deps--,pe.deps===0&&pe.resolve())},ce=(te,pe,ee,ge=!1,Ee=!1,be=0)=>{for(let xe=be;xe<te.length;xe++)E(te[xe],pe,ee,ge,Ee)},fe=te=>te.shapeFlag&6?fe(te.component.subTree):te.shapeFlag&128?te.suspense.next():_(te.anchor||te.el),oe=(te,pe,ee)=>{te==null?pe._vnode&&E(pe._vnode,null,null,!0):T(pe._vnode||null,te,pe,null,null,null,ee),flushPreFlushCbs(),flushPostFlushCbs(),pe._vnode=te},de={p:T,um:E,m:M,r:L,mt:y,mc:J,pc:H,pbc:se,n:fe,o:t};let ae,he;return e&&([ae,he]=e(de)),{render:oe,hydrate:ae,createApp:createAppAPI(oe,ae)}}function toggleRecurse({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function traverseStaticChildren(t,e,n=!1){const a=t.children,o=e.children;if(isArray$9(a)&&isArray$9(o))for(let c=0;c<a.length;c++){const l=a[c];let u=o[c];u.shapeFlag&1&&!u.dynamicChildren&&((u.patchFlag<=0||u.patchFlag===32)&&(u=o[c]=cloneIfMounted(o[c]),u.el=l.el),n||traverseStaticChildren(l,u)),u.type===Text&&(u.el=l.el)}}function getSequence(t){const e=t.slice(),n=[0];let a,o,c,l,u;const d=t.length;for(a=0;a<d;a++){const m=t[a];if(m!==0){if(o=n[n.length-1],t[o]<m){e[a]=o,n.push(a);continue}for(c=0,l=n.length-1;c<l;)u=c+l>>1,t[n[u]]<m?c=u+1:l=u;m<t[n[c]]&&(c>0&&(e[a]=n[c-1]),n[c]=a)}}for(c=n.length,l=n[c-1];c-- >0;)n[c]=l,l=e[l];return n}const isTeleport=t=>t.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,n,a,o,c){return setupBlock(createBaseVNode(t,e,n,a,o,c,!0))}function createBlock(t,e,n,a,o){return setupBlock(createVNode(t,e,n,a,o,!0))}function isVNode$1(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:n})=>t!=null?isString$6(t)||isRef(t)||isFunction$4(t)?{i:currentRenderingInstance,r:t,k:e,f:!!n}:t:null;function createBaseVNode(t,e=null,n=null,a=0,o=null,c=t===Fragment?0:1,l=!1,u=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:c,patchFlag:a,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return u?(normalizeChildren(d,n),c&128&&t.normalize(d)):n&&(d.shapeFlag|=isString$6(n)?8:16),isBlockTreeEnabled>0&&!l&&currentBlock&&(d.patchFlag>0||c&6)&&d.patchFlag!==32&&currentBlock.push(d),d}const createVNode=_createVNode;function _createVNode(t,e=null,n=null,a=0,o=null,c=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode$1(t)){const u=cloneVNode(t,e,!0);return n&&normalizeChildren(u,n),isBlockTreeEnabled>0&&!c&&currentBlock&&(u.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=u:currentBlock.push(u)),u.patchFlag|=-2,u}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:u,style:d}=e;u&&!isString$6(u)&&(e.class=normalizeClass(u)),isObject$4(d)&&(isProxy(d)&&!isArray$9(d)&&(d=extend$1({},d)),e.style=normalizeStyle(d))}const l=isString$6(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$4(t)?4:isFunction$4(t)?2:0;return createBaseVNode(t,e,n,a,o,l,c,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend$1({},t):t:null}function cloneVNode(t,e,n=!1){const{props:a,ref:o,patchFlag:c,children:l}=t,u=e?mergeProps(a||{},e):a;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&normalizeKey(u),ref:e&&e.ref?n&&o?isArray$9(o)?o.concat(normalizeRef(e)):[o,normalizeRef(e)]:normalizeRef(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?c===-1?16:c|16:c,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function createStaticVNode(t,e){const n=createVNode(Static,null,t);return n.staticCount=e,n}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$9(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let n=0;const{shapeFlag:a}=t;if(e==null)e=null;else if(isArray$9(e))n=16;else if(typeof e=="object")if(a&65){const o=e.default;o&&(o._c&&(o._d=!1),normalizeChildren(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$4(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),a&64?(n=16,e=[createTextVNode(e)]):n=8);t.children=e,t.shapeFlag|=n}function mergeProps(...t){const e={};for(let n=0;n<t.length;n++){const a=t[n];for(const o in a)if(o==="class")e.class!==a.class&&(e.class=normalizeClass([e.class,a.class]));else if(o==="style")e.style=normalizeStyle([e.style,a.style]);else if(isOn(o)){const c=e[o],l=a[o];l&&c!==l&&!(isArray$9(c)&&c.includes(l))&&(e[o]=c?[].concat(c,l):l)}else o!==""&&(e[o]=a[o])}return e}function invokeVNodeHook(t,e,n,a=null){callWithAsyncErrorHandling(t,e,7,[n,a])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(t,e,n){const a=t.type,o=(e?e.appContext:t.appContext)||emptyAppContext,c={uid:uid$1++,vnode:t,type:a,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(a,o),emitsOptions:normalizeEmitsOptions(a,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:a.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return c.ctx={_:c},c.root=e?e.root:c,c.emit=emit$1.bind(null,c),t.ce&&t.ce(c),c}let currentInstance=null;const getCurrentInstance$1=()=>currentInstance||currentRenderingInstance,setCurrentInstance=t=>{currentInstance=t,t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:n,children:a}=t.vnode,o=isStatefulComponent(t);initProps(t,n,o,e),initSlots(t,a);const c=o?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,c}function setupStatefulComponent(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:a}=n;if(a){const o=t.setupContext=a.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const c=callWithErrorHandling(a,t,0,[t.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(c)){if(c.then(unsetCurrentInstance,unsetCurrentInstance),e)return c.then(l=>{handleSetupResult(t,l,e)}).catch(l=>{handleError(l,t,0)});t.asyncDep=c}else handleSetupResult(t,c,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,n){isFunction$4(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject$4(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,n)}let compile;function finishComponentSetup(t,e,n){const a=t.type;if(!t.render){if(!e&&compile&&!a.render){const o=a.template||resolveMergedOptions(t).template;if(o){const{isCustomElement:c,compilerOptions:l}=t.appContext.config,{delimiters:u,compilerOptions:d}=a,m=extend$1(extend$1({isCustomElement:c,delimiters:u},l),d);a.render=compile(o,m)}}t.render=a.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(t){return new Proxy(t.attrs,{get(e,n){return track(t,"get","$attrs"),e[n]}})}function createSetupContext(t){const e=a=>{t.exposed=a||{}};let n;return{get attrs(){return n||(n=createAttrsProxy(t))},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](t)},has(e,n){return n in e||n in publicPropertiesMap}}))}function getComponentName(t,e=!0){return isFunction$4(t)?t.displayName||t.name:t.name||e&&t.__name}function isClassComponent(t){return isFunction$4(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup);function h(t,e,n){const a=arguments.length;return a===2?isObject$4(e)&&!isArray$9(e)?isVNode$1(e)?createVNode(t,null,[e]):createVNode(t,e):createVNode(t,null,e):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&isVNode$1(n)&&(n=[n]),createVNode(t,e,n))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject$1(ssrContextKey),version$m="3.2.45",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,a)=>{const o=e?doc.createElementNS(svgNS,t):doc.createElement(t,n?{is:n}:void 0);return t==="select"&&a&&a.multiple!=null&&o.setAttribute("multiple",a.multiple),o},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,a,o,c){const l=n?n.previousSibling:e.lastChild;if(o&&(o===c||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===c||!(o=o.nextSibling)););else{templateContainer.innerHTML=a?`<svg>${t}</svg>`:t;const u=templateContainer.content;if(a){const d=u.firstChild;for(;d.firstChild;)u.appendChild(d.firstChild);u.removeChild(d)}e.insertBefore(u,n)}return[l?l.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function patchClass(t,e,n){const a=t._vtc;a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,n){const a=t.style,o=isString$6(n);if(n&&!o){for(const c in n)setStyle(a,c,n[c]);if(e&&!isString$6(e))for(const c in e)n[c]==null&&setStyle(a,c,"")}else{const c=a.display;o?e!==n&&(a.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(a.display=c)}}const importantRE=/\s*!important$/;function setStyle(t,e,n){if(isArray$9(n))n.forEach(a=>setStyle(t,e,a));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const a=autoPrefix(t,e);importantRE.test(n)?t.setProperty(hyphenate(a),n.replace(importantRE,""),"important"):t[a]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const n=prefixCache[e];if(n)return n;let a=camelize(e);if(a!=="filter"&&a in t)return prefixCache[e]=a;a=capitalize$1(a);for(let o=0;o<prefixes.length;o++){const c=prefixes[o]+a;if(c in t)return prefixCache[e]=c}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,n,a,o){if(a&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,n);else{const c=isSpecialBooleanAttr(e);n==null||c&&!includeBooleanAttr(n)?t.removeAttribute(e):t.setAttribute(e,c?"":n)}}function patchDOMProp(t,e,n,a,o,c,l){if(e==="innerHTML"||e==="textContent"){a&&l(a,o,c),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const d=n??"";(t.value!==d||t.tagName==="OPTION")&&(t.value=d),n==null&&t.removeAttribute(e);return}let u=!1;if(n===""||n==null){const d=typeof t[e];d==="boolean"?n=includeBooleanAttr(n):n==null&&d==="string"?(n="",u=!0):d==="number"&&(n=0,u=!0)}try{t[e]=n}catch{}u&&t.removeAttribute(e)}function addEventListener(t,e,n,a){t.addEventListener(e,n,a)}function removeEventListener(t,e,n,a){t.removeEventListener(e,n,a)}function patchEvent(t,e,n,a,o=null){const c=t._vei||(t._vei={}),l=c[e];if(a&&l)l.value=a;else{const[u,d]=parseName(e);if(a){const m=c[e]=createInvoker(a,o);addEventListener(t,u,m,d)}else l&&(removeEventListener(t,u,l,d),c[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let a;for(;a=t.match(optionsModifierRE);)t=t.slice(0,t.length-a[0].length),e[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(a,n.value),e,5,[a])};return n.value=t,n.attached=getNow(),n}function patchStopImmediatePropagation(t,e){if(isArray$9(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(a=>o=>!o._stopped&&a&&a(o))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,n,a,o=!1,c,l,u,d)=>{e==="class"?patchClass(t,a,o):e==="style"?patchStyle(t,n,a):isOn(e)?isModelListener(e)||patchEvent(t,e,n,a,l):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,a,o))?patchDOMProp(t,e,a,c,l,u,d):(e==="true-value"?t._trueValue=a:e==="false-value"&&(t._falseValue=a),patchAttr(t,e,a,o))};function shouldSetAsProp(t,e,n,a){return a?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction$4(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString$6(n)?!1:e in t}const TRANSITION="transition",ANIMATION="animation",Transition=(t,{slots:e})=>h(BaseTransition,resolveTransitionProps(t),e);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$1({},BaseTransition.props,DOMTransitionPropsValidators),callHook=(t,e=[])=>{isArray$9(t)?t.forEach(n=>n(...e)):t&&t(...e)},hasExplicitCallback=t=>t?isArray$9(t)?t.some(e=>e.length>1):t.length>1:!1;function resolveTransitionProps(t){const e={};for(const F in t)F in DOMTransitionPropsValidators||(e[F]=t[F]);if(t.css===!1)return e;const{name:n="v",type:a,duration:o,enterFromClass:c=`${n}-enter-from`,enterActiveClass:l=`${n}-enter-active`,enterToClass:u=`${n}-enter-to`,appearFromClass:d=c,appearActiveClass:m=l,appearToClass:b=u,leaveFromClass:x=`${n}-leave-from`,leaveActiveClass:_=`${n}-leave-active`,leaveToClass:w=`${n}-leave-to`}=t,S=normalizeDuration(o),T=S&&S[0],B=S&&S[1],{onBeforeEnter:C,onEnter:D,onEnterCancelled:z,onLeave:U,onLeaveCancelled:Y,onBeforeAppear:X=C,onAppear:O=D,onAppearCancelled:J=z}=e,Z=(F,k,y)=>{removeTransitionClass(F,k?b:u),removeTransitionClass(F,k?m:l),y&&y()},se=(F,k)=>{F._isLeaving=!1,removeTransitionClass(F,x),removeTransitionClass(F,w),removeTransitionClass(F,_),k&&k()},ie=F=>(k,y)=>{const A=F?O:D,I=()=>Z(k,F,y);callHook(A,[k,I]),nextFrame(()=>{removeTransitionClass(k,F?d:c),addTransitionClass(k,F?b:u),hasExplicitCallback(A)||whenTransitionEnds(k,a,T,I)})};return extend$1(e,{onBeforeEnter(F){callHook(C,[F]),addTransitionClass(F,c),addTransitionClass(F,l)},onBeforeAppear(F){callHook(X,[F]),addTransitionClass(F,d),addTransitionClass(F,m)},onEnter:ie(!1),onAppear:ie(!0),onLeave(F,k){F._isLeaving=!0;const y=()=>se(F,k);addTransitionClass(F,x),forceReflow(),addTransitionClass(F,_),nextFrame(()=>{F._isLeaving&&(removeTransitionClass(F,x),addTransitionClass(F,w),hasExplicitCallback(U)||whenTransitionEnds(F,a,B,y))}),callHook(U,[F,y])},onEnterCancelled(F){Z(F,!1),callHook(z,[F])},onAppearCancelled(F){Z(F,!0),callHook(J,[F])},onLeaveCancelled(F){se(F),callHook(Y,[F])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$4(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const e=NumberOf(t);return[e,e]}}function NumberOf(t){return toNumber(t)}function addTransitionClass(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function removeTransitionClass(t,e){e.split(/\s+/).forEach(a=>a&&t.classList.remove(a));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,e,n,a){const o=t._endId=++endId,c=()=>{o===t._endId&&a()};if(n)return setTimeout(c,n);const{type:l,timeout:u,propCount:d}=getTransitionInfo(t,e);if(!l)return a();const m=l+"end";let b=0;const x=()=>{t.removeEventListener(m,_),c()},_=w=>{w.target===t&&++b>=d&&x()};setTimeout(()=>{b<d&&x()},u+1),t.addEventListener(m,_)}function getTransitionInfo(t,e){const n=window.getComputedStyle(t),a=S=>(n[S]||"").split(", "),o=a(`${TRANSITION}Delay`),c=a(`${TRANSITION}Duration`),l=getTimeout(o,c),u=a(`${ANIMATION}Delay`),d=a(`${ANIMATION}Duration`),m=getTimeout(u,d);let b=null,x=0,_=0;e===TRANSITION?l>0&&(b=TRANSITION,x=l,_=c.length):e===ANIMATION?m>0&&(b=ANIMATION,x=m,_=d.length):(x=Math.max(l,m),b=x>0?l>m?TRANSITION:ANIMATION:null,_=b?b===TRANSITION?c.length:d.length:0);const w=b===TRANSITION&&/\b(transform|all)(,|$)/.test(a(`${TRANSITION}Property`).toString());return{type:b,timeout:x,propCount:_,hasTransform:w}}function getTimeout(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,a)=>toMs(n)+toMs(t[a])))}function toMs(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=getCurrentInstance$1(),a=useTransitionState();let o,c;return onUpdated(()=>{if(!o.length)return;const l=t.moveClass||`${t.name||"v"}-move`;if(!hasCSSTransform(o[0].el,n.vnode.el,l))return;o.forEach(callPendingCbs),o.forEach(recordPosition);const u=o.filter(applyTranslation);forceReflow(),u.forEach(d=>{const m=d.el,b=m.style;addTransitionClass(m,l),b.transform=b.webkitTransform=b.transitionDuration="";const x=m._moveCb=_=>{_&&_.target!==m||(!_||/transform$/.test(_.propertyName))&&(m.removeEventListener("transitionend",x),m._moveCb=null,removeTransitionClass(m,l))};m.addEventListener("transitionend",x)})}),()=>{const l=toRaw(t),u=resolveTransitionProps(l);let d=l.tag||Fragment;o=c,c=e.default?getTransitionRawChildren(e.default()):[];for(let m=0;m<c.length;m++){const b=c[m];b.key!=null&&setTransitionHooks(b,resolveTransitionHooks(b,u,a,n))}if(o)for(let m=0;m<o.length;m++){const b=o[m];setTransitionHooks(b,resolveTransitionHooks(b,u,a,n)),positionMap.set(b,b.el.getBoundingClientRect())}return createVNode(d,null,c)}}},TransitionGroup=TransitionGroupImpl;function callPendingCbs(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function recordPosition(t){newPositionMap.set(t,t.el.getBoundingClientRect())}function applyTranslation(t){const e=positionMap.get(t),n=newPositionMap.get(t),a=e.left-n.left,o=e.top-n.top;if(a||o){const c=t.el.style;return c.transform=c.webkitTransform=`translate(${a}px,${o}px)`,c.transitionDuration="0s",t}}function hasCSSTransform(t,e,n){const a=t.cloneNode();t._vtc&&t._vtc.forEach(l=>{l.split(/\s+/).forEach(u=>u&&a.classList.remove(u))}),n.split(/\s+/).forEach(l=>l&&a.classList.add(l)),a.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(a);const{hasTransform:c}=getTransitionInfo(a);return o.removeChild(a),c}const getModelAssigner=t=>{const e=t.props["onUpdate:modelValue"]||!1;return isArray$9(e)?n=>invokeArrayFns(e,n):e};function onCompositionStart(t){t.target.composing=!0}function onCompositionEnd(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const vModelText={created(t,{modifiers:{lazy:e,trim:n,number:a}},o){t._assign=getModelAssigner(o);const c=a||o.props&&o.props.type==="number";addEventListener(t,e?"change":"input",l=>{if(l.target.composing)return;let u=t.value;n&&(u=u.trim()),c&&(u=toNumber(u)),t._assign(u)}),n&&addEventListener(t,"change",()=>{t.value=t.value.trim()}),e||(addEventListener(t,"compositionstart",onCompositionStart),addEventListener(t,"compositionend",onCompositionEnd),addEventListener(t,"change",onCompositionEnd))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:a,number:o}},c){if(t._assign=getModelAssigner(c),t.composing||document.activeElement===t&&t.type!=="range"&&(n||a&&t.value.trim()===e||(o||t.type==="number")&&toNumber(t.value)===e))return;const l=e??"";t.value!==l&&(t.value=l)}},vShow={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:a}){!e!=!n&&(a?e?(a.beforeEnter(t),setDisplay(t,!0),a.enter(t)):a.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t._vod:"none"}const rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:n}=e;return e.mount=a=>{const o=normalizeContainer(a);if(!o)return;const c=e._component;!isFunction$4(c)&&!c.render&&!c.template&&(c.template=o.innerHTML),o.innerHTML="";const l=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),l},e};function normalizeContainer(t){return isString$6(t)?document.querySelector(t):t}const _hoisted_1$1=createBaseVNode("br",null,null,-1),_hoisted_2$1=createBaseVNode("label",null," Hashed by node:crypto ",-1),_hoisted_3=createBaseVNode("br",null,null,-1),_hoisted_4=createBaseVNode("br",null,null,-1),_hoisted_5=createBaseVNode("br",null,null,-1),_hoisted_6=createBaseVNode("br",null,null,-1),_hoisted_7=createBaseVNode("code",null,"packages/renderer/src/components/ReactiveHash.vue",-1),_sfc_main$2=defineComponent$1({__name:"ReactiveHash",setup(t){const e=inject$1("constl"),n=inject$1("serveurConstl"),a=ref("Hello World"),o=ref(),c=ref();return onMounted(async()=>{o.value=e&&await e.obtIdCompte(),c.value=n&&await n.initialiser()}),(l,u)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("label",null,[createTextVNode(" Raw value "),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":u[0]||(u[0]=d=>a.value=d),type:"text"},null,512),[[vModelText,a.value]])]),_hoisted_1$1,_hoisted_2$1,_hoisted_3,createBaseVNode("label",null,[createTextVNode(" Id compte Constellation "),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":u[1]||(u[1]=d=>o.value=d),readonly:"",type:"text"},null,512),[[vModelText,o.value]])]),_hoisted_4,createBaseVNode("label",null,[createTextVNode(" Port serveur Constellation "),withDirectives(createBaseVNode("input",{"onUpdate:modelValue":u[2]||(u[2]=d=>c.value=d),readonly:"",type:"text"},null,512),[[vModelText,c.value]])]),_hoisted_5,_hoisted_6,_hoisted_7],64))}}),VDivider$1="";function _classPrivateFieldInitSpec(t,e,n){_checkPrivateRedeclaration$1(t,e),e.set(t,n)}function _checkPrivateRedeclaration$1(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet$1(t,e,n){var a=_classExtractFieldDescriptor$1(t,e,"set");return _classApplyDescriptorSet$1(t,a,n),n}function _classApplyDescriptorSet$1(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function _classPrivateFieldGet$1(t,e){var n=_classExtractFieldDescriptor$1(t,e,"get");return _classApplyDescriptorGet$1(t,n)}function _classExtractFieldDescriptor$1(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function _classApplyDescriptorGet$1(t,e){return e.get?e.get.call(t):e.value}function getNestedValue(t,e,n){const a=e.length-1;if(a<0)return t===void 0?n:t;for(let o=0;o<a;o++){if(t==null)return n;t=t[e[o]]}return t==null||t[e[a]]===void 0?n:t[e[a]]}function getObjectValueByPath(t,e,n){return t==null||!e||typeof e!="string"?n:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),getNestedValue(t,e.split("."),n))}function getPropertyFromItem(t,e,n){if(e==null)return t===void 0?n:t;if(t!==Object(t)){if(typeof e!="function")return n;const o=e(t,n);return typeof o>"u"?n:o}if(typeof e=="string")return getObjectValueByPath(t,e,n);if(Array.isArray(e))return getNestedValue(t,e,n);if(typeof e!="function")return n;const a=e(t,n);return typeof a>"u"?n:a}function createRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(n,a)=>e+a)}function convertToUnit(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(t==null||t===""))return isNaN(+t)?String(t):isFinite(+t)?`${Number(t)}${e}`:void 0}function isObject$3(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}const keyCodes=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function pick(t,e){const n=Object.create(null),a=Object.create(null);for(const o in t)e.some(c=>c instanceof RegExp?c.test(o):c===o)?n[o]=t[o]:a[o]=t[o];return[n,a]}function clamp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(n,t))}function chunk(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let a=0;for(;a<t.length;)n.push(t.substr(a,e)),a+=e;return n}function mergeDeep(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const a={};for(const o in t)a[o]=t[o];for(const o in e){const c=t[o],l=e[o];if(isObject$3(c)&&isObject$3(l)){a[o]=mergeDeep(c,l,n);continue}if(Array.isArray(c)&&Array.isArray(l)&&n){a[o]=n(c,l);continue}a[o]=l}return a}function toKebabCase(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase()}function findChildrenWithProvide(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(n=>findChildrenWithProvide(t,n)).flat(1);if(Array.isArray(e.children))return e.children.map(n=>findChildrenWithProvide(t,n)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return findChildrenWithProvide(t,e.component.subTree).flat(1)}return[]}var _arr=new WeakMap,_pointer=new WeakMap;class CircularBuffer{constructor(e){_classPrivateFieldInitSpec(this,_arr,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_pointer,{writable:!0,value:0}),this.size=e}push(e){_classPrivateFieldGet$1(this,_arr)[_classPrivateFieldGet$1(this,_pointer)]=e,_classPrivateFieldSet$1(this,_pointer,(_classPrivateFieldGet$1(this,_pointer)+1)%this.size)}values(){return _classPrivateFieldGet$1(this,_arr).slice(_classPrivateFieldGet$1(this,_pointer)).concat(_classPrivateFieldGet$1(this,_arr).slice(0,_classPrivateFieldGet$1(this,_pointer)))}}function destructComputed(t){const e=reactive({}),n=computed(t);return watchEffect(()=>{for(const a in n.value)e[a]=n.value[a]},{flush:"sync"}),toRefs(e)}function includes$1(t,e){return t.includes(e)}const EventProp=[Function,Array];function hasEvent(t,e){return e="on"+capitalize$1(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}function toPhysical(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function createMessage(t,e,n){if(n&&(e={__isVue:!0,$parent:n,$options:e}),e){if(e.$_alreadyWarned=e.$_alreadyWarned||[],e.$_alreadyWarned.includes(t))return;e.$_alreadyWarned.push(t)}return`[Vuetify] ${t}`+(e?generateComponentTrace(e):"")}function consoleWarn(t,e,n){const a=createMessage(t,e,n);a!=null&&console.warn(a)}function consoleError(t,e,n){const a=createMessage(t,e,n);a!=null&&console.error(a)}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function formatComponentName(t,e){if(t.$root===t)return"<Root>";const n=typeof t=="function"&&t.cid!=null?t.options:t.__isVue?t.$options||t.constructor.options:t||{};let a=n.name||n._componentTag;const o=n.__file;if(!a&&o){const c=o.match(/([^/\\]+)\.vue$/);a=c?.[1]}return(a?`<${classify(a)}>`:"<Anonymous>")+(o&&e!==!1?` at ${o}`:"")}function generateComponentTrace(t){if(t.__isVue&&t.$parent){const e=[];let n=0;for(;t;){if(e.length>0){const a=e[e.length-1];if(a.constructor===t.constructor){n++,t=t.$parent;continue}else n>0&&(e[e.length-1]=[a,n],n=0)}e.push(t),t=t.$parent}return`

found in

`+e.map((a,o)=>`${o===0?"---> ":" ".repeat(5+o*2)}${Array.isArray(a)?`${formatComponentName(a[0])}... (${a[1]} recursive calls)`:formatComponentName(a)}`).join(`
`)}else return`

(found in ${formatComponentName(t)})`}const srgbForwardMatrix=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],srgbForwardTransform=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,srgbReverseMatrix=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],srgbReverseTransform=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function fromXYZ$1(t){const e=Array(3),n=srgbForwardTransform,a=srgbForwardMatrix;for(let o=0;o<3;++o)e[o]=Math.round(clamp(n(a[o][0]*t[0]+a[o][1]*t[1]+a[o][2]*t[2]))*255);return{r:e[0],g:e[1],b:e[2]}}function toXYZ$1(t){let{r:e,g:n,b:a}=t;const o=[0,0,0],c=srgbReverseTransform,l=srgbReverseMatrix;e=c(e/255),n=c(n/255),a=c(a/255);for(let u=0;u<3;++u)o[u]=l[u][0]*e+l[u][1]*n+l[u][2]*a;return o}const delta=.20689655172413793,cielabForwardTransform=t=>t>delta**3?Math.cbrt(t):t/(3*delta**2)+4/29,cielabReverseTransform=t=>t>delta?t**3:3*delta**2*(t-4/29);function fromXYZ(t){const e=cielabForwardTransform,n=e(t[1]);return[116*n-16,500*(e(t[0]/.95047)-n),200*(n-e(t[2]/1.08883))]}function toXYZ(t){const e=cielabReverseTransform,n=(t[0]+16)/116;return[e(n+t[1]/500)*.95047,e(n),e(n-t[2]/200)*1.08883]}function isCssColor(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function parseColor(t){if(typeof t=="number")return(isNaN(t)||t<0||t>16777215)&&consoleWarn(`'${t}' is not a valid hex color`),{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;[3,4].includes(e.length)?e=e.split("").map(a=>a+a).join(""):[6,8].includes(e.length)||consoleWarn(`'${t}' is not a valid hex(a) color`);const n=parseInt(e,16);return(isNaN(n)||n<0||n>4294967295)&&consoleWarn(`'${t}' is not a valid hex(a) color`),HexToRGB(e)}else throw new TypeError(`Colors can only be numbers or strings, recieved ${t==null?t:t.constructor.name} instead`)}function toHex$3(t){const e=Math.round(t).toString(16);return("00".substr(0,2-e.length)+e).toUpperCase()}function RGBtoHex(t){let{r:e,g:n,b:a,a:o}=t;return`#${[toHex$3(e),toHex$3(n),toHex$3(a),o!==void 0?toHex$3(Math.round(o*255)):"FF"].join("")}`}function HexToRGB(t){let[e,n,a,o]=chunk(t,2).map(c=>parseInt(c,16));return o=o===void 0?o:Math.round(o/255*100)/100,{r:e,g:n,b:a,a:o}}function lighten(t,e){const n=fromXYZ(toXYZ$1(t));return n[0]=n[0]+e*10,fromXYZ$1(toXYZ(n))}function darken(t,e){const n=fromXYZ(toXYZ$1(t));return n[0]=n[0]-e*10,fromXYZ$1(toXYZ(n))}function getLuma(t){const e=parseColor(t);return toXYZ$1(e)[1]}function getCurrentInstance(t,e){const n=getCurrentInstance$1();if(!n)throw new Error(`[Vuetify] ${t} ${e||"must be called from inside a setup function"}`);return n}function getCurrentInstanceName(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=getCurrentInstance(t).type;return toKebabCase(e?.aliasName||e?.name)}let _uid=0,_map=new WeakMap;function getUid(){const t=getCurrentInstance("getUid");if(_map.has(t))return _map.get(t);{const e=_uid++;return _map.set(t,e),e}}getUid.reset=()=>{_uid=0,_map=new WeakMap};function injectSelf(t){const{provides:e}=getCurrentInstance("injectSelf");if(e&&t in e)return e[t]}const DefaultsSymbol=Symbol.for("vuetify:defaults");function createDefaults(t){return ref(t??{})}function useDefaults(){const t=inject$1(DefaultsSymbol);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function provideDefaults(t,e){const n=useDefaults(),a=ref(t),o=computed(()=>{const c=unref(e?.scoped),l=unref(e?.reset),u=unref(e?.root);let d=mergeDeep(a.value,{prev:n.value});if(c)return d;if(l||u){const m=Number(l||1/0);for(let b=0;b<=m&&d.prev;b++)d=d.prev;return d}return mergeDeep(d.prev,d)});return provide(DefaultsSymbol,o),o}function useToggleScope(t,e){let n;watch(t,a=>{if(a&&!n)n=effectScope(),n.run(e);else if(!a){var o;(o=n)==null||o.stop(),n=void 0}},{immediate:!0}),onScopeDispose(()=>{var a;(a=n)==null||a.stop()})}function propsFactory(t,e){return n=>Object.keys(t).reduce((a,o)=>{const l=typeof t[o]=="object"&&t[o]!=null&&!Array.isArray(t[o])?t[o]:{type:t[o]};return n&&o in n?a[o]={...l,default:n[o]}:a[o]=l,e&&!a[o].source&&(a[o].source=e),a},{})}function propIsDefined(t,e){var n,a;return typeof((n=t.props)==null?void 0:n[e])<"u"||typeof((a=t.props)==null?void 0:a[toKebabCase(e)])<"u"}const defineComponent=function(e){return e._setup=e._setup??e.setup,e.name?(e._setup&&(e.props=e.props??{},e.props=propsFactory(e.props,toKebabCase(e.name))(),e.props._as=String,e.setup=function(a,o){const c=getCurrentInstance$1(),l=useDefaults(),u=shallowRef(),d=shallowReactive({...toRaw(a)});watchEffect(()=>{const b=l.value.global,x=l.value[a._as??e.name];if(x){const _=Object.entries(x).filter(w=>{let[S]=w;return S.startsWith(S[0].toUpperCase())});_.length&&(u.value=Object.fromEntries(_))}for(const _ of Object.keys(a)){let w=a[_];propIsDefined(c.vnode,_)||(w=x?.[_]??b?.[_]??a[_]),d[_]!==w&&(d[_]=w)}});const m=e._setup(d,o);return useToggleScope(u,()=>{var b;provideDefaults(mergeDeep(((b=injectSelf(DefaultsSymbol))==null?void 0:b.value)??{},u.value))}),m}),e):(consoleWarn("The component is missing an explicit name, unable to generate default prop value"),e)};function genericComponent(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?defineComponent:defineComponent$1)(e)}function createSimpleFunctional(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return defineComponent({name:n??capitalize$1(camelize(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e}},setup(a,o){let{slots:c}=o;return()=>{var l;return h(a.tag,{class:t},(l=c.default)==null?void 0:l.call(c))}}})}const IN_BROWSER=typeof window<"u",SUPPORTS_INTERSECTION=IN_BROWSER&&"IntersectionObserver"in window,SUPPORTS_TOUCH=IN_BROWSER&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);IN_BROWSER&&typeof CSS<"u"&&CSS.supports("selector(:focus-visible)");function useRender(t){const e=getCurrentInstance("useRender");e.render=t}const mainTRC=2.4,Rco=.2126729,Gco=.7151522,Bco=.072175,normBG=.55,normTXT=.58,revTXT=.57,revBG=.62,blkThrs=.03,blkClmp=1.45,deltaYmin=5e-4,scaleBoW=1.25,scaleWoB=1.25,loConThresh=.078,loConFactor=12.82051282051282,loConOffset=.06,loClip=.001;function APCAcontrast(t,e){const n=(t.r/255)**mainTRC,a=(t.g/255)**mainTRC,o=(t.b/255)**mainTRC,c=(e.r/255)**mainTRC,l=(e.g/255)**mainTRC,u=(e.b/255)**mainTRC;let d=n*Rco+a*Gco+o*Bco,m=c*Rco+l*Gco+u*Bco;if(d<=blkThrs&&(d+=(blkThrs-d)**blkClmp),m<=blkThrs&&(m+=(blkThrs-m)**blkClmp),Math.abs(m-d)<deltaYmin)return 0;let b;if(m>d){const x=(m**normBG-d**normTXT)*scaleBoW;b=x<loClip?0:x<loConThresh?x-x*loConFactor*loConOffset:x-loConOffset}else{const x=(m**revBG-d**revTXT)*scaleWoB;b=x>-loClip?0:x>-loConThresh?x-x*loConFactor*loConOffset:x+loConOffset}return b*100}const ThemeSymbol=Symbol.for("vuetify:theme"),makeThemeProps=propsFactory({theme:String},"theme"),defaultThemeOptions={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function parseThemeOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultThemeOptions;if(!t)return{...defaultThemeOptions,isDisabled:!0};const e={};for(const[o,c]of Object.entries(t.themes??{})){var n,a;const l=c.dark||o==="dark"?(n=defaultThemeOptions.themes)==null?void 0:n.dark:(a=defaultThemeOptions.themes)==null?void 0:a.light;e[o]=mergeDeep(l,c)}return mergeDeep(defaultThemeOptions,{...t,themes:e})}function createTheme(t){const e=reactive(parseThemeOptions(t)),n=ref(e.defaultTheme),a=ref(e.themes),o=computed(()=>{const m={};for(const[b,x]of Object.entries(a.value)){const _=m[b]={...x,colors:{...x.colors}};if(e.variations)for(const w of e.variations.colors){const S=_.colors[w];if(S)for(const T of["lighten","darken"]){const B=T==="lighten"?lighten:darken;for(const C of createRange(e.variations[T],1))_.colors[`${w}-${T}-${C}`]=RGBtoHex(B(parseColor(S),C))}}for(const w of Object.keys(_.colors)){if(/^on-[a-z]/.test(w)||_.colors[`on-${w}`])continue;const S=`on-${w}`,T=parseColor(_.colors[w]),B=Math.abs(APCAcontrast(parseColor(0),T)),C=Math.abs(APCAcontrast(parseColor(16777215),T));_.colors[S]=C>Math.min(B,50)?"#fff":"#000"}}return m}),c=computed(()=>o.value[n.value]),l=computed(()=>{const m=[];c.value.dark&&createCssClass(m,":root",["color-scheme: dark"]);for(const[w,S]of Object.entries(o.value)){const{variables:T,dark:B}=S;createCssClass(m,`.v-theme--${w}`,[`color-scheme: ${B?"dark":"normal"}`,...genCssVariables(S),...Object.keys(T).map(C=>{const D=T[C],z=typeof D=="string"&&D.startsWith("#")?parseColor(D):void 0,U=z?`${z.r}, ${z.g}, ${z.b}`:void 0;return`--v-${C}: ${U??D}`})])}const b=[],x=[],_=new Set(Object.values(o.value).flatMap(w=>Object.keys(w.colors)));for(const w of _)/^on-[a-z]/.test(w)?createCssClass(x,`.${w}`,[`color: rgb(var(--v-theme-${w})) !important`]):(createCssClass(b,`.bg-${w}`,[`--v-theme-overlay-multiplier: var(--v-theme-${w}-overlay-multiplier)`,`background: rgb(var(--v-theme-${w})) !important`,`color: rgb(var(--v-theme-on-${w})) !important`]),createCssClass(x,`.text-${w}`,[`color: rgb(var(--v-theme-${w})) !important`]),createCssClass(x,`.border-${w}`,[`--v-border-color: var(--v-theme-${w})`]));return m.push(...b,...x),m.map((w,S)=>S===0?w:`    ${w}`).join("")});function u(m){const b=m._context.provides.usehead;if(b)b.addHeadObjs(computed(()=>{const x={children:l.value,type:"text/css",id:"vuetify-theme-stylesheet"};return e.cspNonce&&(x.nonce=e.cspNonce),{style:[x]}})),IN_BROWSER&&watchEffect(()=>b.updateDOM());else{let _=function(){if(!e.isDisabled){if(typeof document<"u"&&!x){const w=document.createElement("style");w.type="text/css",w.id="vuetify-theme-stylesheet",e.cspNonce&&w.setAttribute("nonce",e.cspNonce),x=w,document.head.appendChild(x)}x&&(x.innerHTML=l.value)}},x=IN_BROWSER?document.getElementById("vuetify-theme-stylesheet"):null;watch(l,_,{immediate:!0})}}const d=computed(()=>e.isDisabled?void 0:`v-theme--${n.value}`);return{install:u,isDisabled:e.isDisabled,name:n,themes:a,current:c,computedThemes:o,themeClasses:d,styles:l,globalThis:{name:n,current:c}}}function provideTheme(t){getCurrentInstance("provideTheme");const e=inject$1(ThemeSymbol,null);if(!e)throw new Error("Could not find Vuetify theme injection");const n=computed(()=>t.theme??e?.name.value),a=computed(()=>e.isDisabled?void 0:`v-theme--${n.value}`),o={...e,name:n,themeClasses:a};return provide(ThemeSymbol,o),o}function createCssClass(t,e,n){t.push(`${e} {
`,...n.map(a=>`  ${a};
`),`}
`)}function genCssVariables(t){const e=t.dark?2:1,n=t.dark?1:2,a=[];for(const[o,c]of Object.entries(t.colors)){const l=parseColor(c);a.push(`--v-theme-${o}: ${l.r},${l.g},${l.b}`),o.startsWith("on-")||a.push(`--v-theme-${o}-overlay-multiplier: ${getLuma(c)>.18?e:n}`)}return a}function useColor(t){return destructComputed(()=>{const e=[],n={};return t.value.background&&(isCssColor(t.value.background)?n.backgroundColor=t.value.background:e.push(`bg-${t.value.background}`)),t.value.text&&(isCssColor(t.value.text)?(n.color=t.value.text,n.caretColor=t.value.text):e.push(`text-${t.value.text}`)),{colorClasses:e,colorStyles:n}})}function useTextColor(t,e){const n=computed(()=>({text:isRef(t)?t.value:e?t[e]:null})),{colorClasses:a,colorStyles:o}=useColor(n);return{textColorClasses:a,textColorStyles:o}}function useBackgroundColor(t,e){const n=computed(()=>({background:isRef(t)?t.value:e?t[e]:null})),{colorClasses:a,colorStyles:o}=useColor(n);return{backgroundColorClasses:a,backgroundColorStyles:o}}const VDivider=defineComponent({name:"VDivider",props:{color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...makeThemeProps()},setup(t,e){let{attrs:n}=e;const{themeClasses:a}=provideTheme(t),{backgroundColorClasses:o,backgroundColorStyles:c}=useBackgroundColor(toRef(t,"color")),l=computed(()=>{const u={};return t.length&&(u[t.vertical?"maxHeight":"maxWidth"]=convertToUnit(t.length)),t.thickness&&(u[t.vertical?"borderRightWidth":"borderTopWidth"]=convertToUnit(t.thickness)),u});return useRender(()=>createVNode("hr",{class:[{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},a.value,o.value],style:[l.value,c.value],"aria-orientation":!n.role||n.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null)),{}}}),VList$1="",VDefaultsProvider=defineComponent$1({name:"VDefaultsProvider",props:{defaults:Object,reset:[Number,String],root:Boolean,scoped:Boolean},setup(t,e){let{slots:n}=e;const{defaults:a,reset:o,root:c,scoped:l}=toRefs(t);return provideDefaults(a,{reset:o,root:c,scoped:l}),()=>{var u;return(u=n.default)==null?void 0:u.call(n)}}});function createCssTransition(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top center 0",n=arguments.length>2?arguments[2]:void 0;return defineComponent({name:t,props:{group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:{type:String,default:n},origin:{type:String,default:e}},setup(a,o){let{slots:c}=o;return()=>{const l=a.group?TransitionGroup:Transition;return h(l,{name:t,mode:a.mode,onBeforeEnter(u){u.style.transformOrigin=a.origin},onLeave(u){if(a.leaveAbsolute){const{offsetTop:d,offsetLeft:m,offsetWidth:b,offsetHeight:x}=u;u._transitionInitialStyles={position:u.style.position,top:u.style.top,left:u.style.left,width:u.style.width,height:u.style.height},u.style.position="absolute",u.style.top=`${d}px`,u.style.left=`${m}px`,u.style.width=`${b}px`,u.style.height=`${x}px`}a.hideOnLeave&&u.style.setProperty("display","none","important")},onAfterLeave(u){if(a.leaveAbsolute&&u!=null&&u._transitionInitialStyles){const{position:d,top:m,left:b,width:x,height:_}=u._transitionInitialStyles;delete u._transitionInitialStyles,u.style.position=d||"",u.style.top=m||"",u.style.left=b||"",u.style.width=x||"",u.style.height=_||""}}},c.default)}}})}function createJavascriptTransition(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return defineComponent({name:t,props:{mode:{type:String,default:n}},setup(a,o){let{slots:c}=o;return()=>h(Transition,{name:t,...e},c.default)}})}function ExpandTransitionGenerator(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",a=camelize(`offset-${n}`);return{onBeforeEnter(l){l._parent=l.parentNode,l._initialStyle={transition:l.style.transition,overflow:l.style.overflow,[n]:l.style[n]}},onEnter(l){const u=l._initialStyle;l.style.setProperty("transition","none","important"),l.style.overflow="hidden";const d=`${l[a]}px`;l.style[n]="0",l.offsetHeight,l.style.transition=u.transition,t&&l._parent&&l._parent.classList.add(t),requestAnimationFrame(()=>{l.style[n]=d})},onAfterEnter:c,onEnterCancelled:c,onLeave(l){l._initialStyle={transition:"",overflow:l.style.overflow,[n]:l.style[n]},l.style.overflow="hidden",l.style[n]=`${l[a]}px`,l.offsetHeight,requestAnimationFrame(()=>l.style[n]="0")},onAfterLeave:o,onLeaveCancelled:o};function o(l){t&&l._parent&&l._parent.classList.remove(t),c(l)}function c(l){const u=l._initialStyle[n];l.style.overflow=l._initialStyle.overflow,u!=null&&(l.style[n]=u),delete l._initialStyle}}createCssTransition("fab-transition","center center","out-in");createCssTransition("dialog-bottom-transition");createCssTransition("dialog-top-transition");createCssTransition("fade-transition");createCssTransition("scale-transition");createCssTransition("scroll-x-transition");createCssTransition("scroll-x-reverse-transition");createCssTransition("scroll-y-transition");createCssTransition("scroll-y-reverse-transition");createCssTransition("slide-x-transition");createCssTransition("slide-x-reverse-transition");createCssTransition("slide-y-transition");createCssTransition("slide-y-reverse-transition");const VExpandTransition=createJavascriptTransition("expand-transition",ExpandTransitionGenerator());createJavascriptTransition("expand-x-transition",ExpandTransitionGenerator("",!0));const ListKey=Symbol.for("vuetify:list");function createList(){const t=inject$1(ListKey,{hasPrepend:ref(!1),updateHasPrepend:()=>null}),e={hasPrepend:ref(!1),updateHasPrepend:n=>{n&&(e.hasPrepend.value=n)}};return provide(ListKey,e),t}function useList(){return inject$1(ListKey,null)}const aliases$1={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},mdi={component:t=>h(VClassIcon,{...t,class:"mdi"})},IconValue=[String,Function,Object],IconSymbol=Symbol.for("vuetify:icons"),makeIconProps=propsFactory({icon:{type:IconValue},tag:{type:String,required:!0}},"icon"),VComponentIcon=defineComponent({name:"VComponentIcon",props:makeIconProps(),setup(t,e){let{slots:n}=e;return()=>{var a;return createVNode(t.tag,null,{default:()=>[t.icon?createVNode(t.icon,null,null):(a=n.default)==null?void 0:a.call(n)]})}}}),VSvgIcon=defineComponent({name:"VSvgIcon",inheritAttrs:!1,props:makeIconProps(),setup(t,e){let{attrs:n}=e;return()=>createVNode(t.tag,mergeProps(n,{style:null}),{default:()=>[createVNode("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[createVNode("path",{d:t.icon},null)])]})}});defineComponent({name:"VLigatureIcon",props:makeIconProps(),setup(t){return()=>createVNode(t.tag,null,{default:()=>[t.icon]})}});const VClassIcon=defineComponent({name:"VClassIcon",props:makeIconProps(),setup(t){return()=>createVNode(t.tag,{class:t.icon},null)}}),defaultSets={svg:{component:VSvgIcon},class:{component:VClassIcon}};function createIcons(t){return mergeDeep({defaultSet:"mdi",sets:{...defaultSets,mdi},aliases:aliases$1},t)}const useIcon=t=>{const e=inject$1(IconSymbol);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:computed(()=>{const a=isRef(t)?t.value:t.icon;if(!a)return{component:VComponentIcon};let o=a;if(typeof o=="string"&&(o=o.trim(),o.startsWith("$"))){var c;o=(c=e.aliases)==null?void 0:c[o.slice(1)]}if(!o)throw new Error(`Could not find aliased icon "${a}"`);if(typeof o!="string")return{component:VComponentIcon,icon:o};const l=Object.keys(e.sets).find(m=>typeof o=="string"&&o.startsWith(`${m}:`)),u=l?o.slice(l.length+1):o;return{component:e.sets[l??e.defaultSet].component,icon:u}})}},makeTagProps=propsFactory({tag:{type:String,default:"div"}},"tag");function useProxiedModel(t,e,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:x=>x,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:x=>x;const c=getCurrentInstance("useProxiedModel"),l=ref(t[e]!==void 0?t[e]:n),u=toKebabCase(e),m=computed(u!==e?()=>{var x,_,w,S;return t[e],!!(((x=c.vnode.props)!=null&&x.hasOwnProperty(e)||(_=c.vnode.props)!=null&&_.hasOwnProperty(u))&&((w=c.vnode.props)!=null&&w.hasOwnProperty(`onUpdate:${e}`)||(S=c.vnode.props)!=null&&S.hasOwnProperty(`onUpdate:${u}`)))}:()=>{var x,_;return t[e],!!((x=c.vnode.props)!=null&&x.hasOwnProperty(e)&&(_=c.vnode.props)!=null&&_.hasOwnProperty(`onUpdate:${e}`))});useToggleScope(()=>!m.value,()=>{watch(()=>t[e],x=>{l.value=x})});const b=computed({get(){return a(m.value?t[e]:l.value)},set(x){const _=o(x);(m.value?t[e]:l.value)===_||a(m.value?t[e]:l.value)===x||(l.value=_,c?.emit(`update:${e}`,_))}});return Object.defineProperty(b,"externalValue",{get:()=>m.value?t[e]:l.value}),b}const singleOpenStrategy={open:t=>{let{id:e,value:n,opened:a,parents:o}=t;if(n){const c=new Set;c.add(e);let l=o.get(e);for(;l!=null;)c.add(l),l=o.get(l);return c}else return a.delete(e),a},select:()=>null},multipleOpenStrategy={open:t=>{let{id:e,value:n,opened:a,parents:o}=t;if(n){let c=o.get(e);for(a.add(e);c!=null&&c!==e;)a.add(c),c=o.get(c);return a}else a.delete(e);return a},select:()=>null},listOpenStrategy={open:multipleOpenStrategy.open,select:t=>{let{id:e,value:n,opened:a,parents:o}=t;if(!n)return a;const c=[];let l=o.get(e);for(;l!=null;)c.push(l),l=o.get(l);return new Set(c)}},independentSelectStrategy=t=>{const e={select:n=>{let{id:a,value:o,selected:c}=n;if(t&&!o){const l=Array.from(c.entries()).reduce((u,d)=>{let[m,b]=d;return b==="on"?[...u,m]:u},[]);if(l.length===1&&l[0]===a)return c}return c.set(a,o?"on":"off"),c},in:(n,a,o)=>{let c=new Map;for(const l of n||[])c=e.select({id:l,value:!0,selected:new Map(c),children:a,parents:o});return c},out:n=>{const a=[];for(const[o,c]of n.entries())c==="on"&&a.push(o);return a}};return e},independentSingleSelectStrategy=t=>{const e=independentSelectStrategy(t);return{select:a=>{let{selected:o,id:c,...l}=a;const u=o.has(c)?new Map([[c,o.get(c)]]):new Map;return e.select({...l,id:c,selected:u})},in:(a,o,c)=>{let l=new Map;return a!=null&&a.length&&(l=e.in(a.slice(0,1),o,c)),l},out:(a,o,c)=>e.out(a,o,c)}},leafSelectStrategy=t=>{const e=independentSelectStrategy(t);return{select:a=>{let{id:o,selected:c,children:l,...u}=a;return l.has(o)?c:e.select({id:o,selected:c,children:l,...u})},in:e.in,out:e.out}},leafSingleSelectStrategy=t=>{const e=independentSingleSelectStrategy(t);return{select:a=>{let{id:o,selected:c,children:l,...u}=a;return l.has(o)?c:e.select({id:o,selected:c,children:l,...u})},in:e.in,out:e.out}},classicSelectStrategy=t=>{const e={select:n=>{let{id:a,value:o,selected:c,children:l,parents:u}=n;const d=new Map(c),m=[a];for(;m.length;){const x=m.shift();c.set(x,o?"on":"off"),l.has(x)&&m.push(...l.get(x))}let b=u.get(a);for(;b;){const x=l.get(b),_=x.every(S=>c.get(S)==="on"),w=x.every(S=>!c.has(S)||c.get(S)==="off");c.set(b,_?"on":w?"off":"indeterminate"),b=u.get(b)}return t&&!o&&Array.from(c.entries()).reduce((_,w)=>{let[S,T]=w;return T==="on"?[..._,S]:_},[]).length===0?d:c},in:(n,a,o)=>{let c=new Map;for(const l of n||[])c=e.select({id:l,value:!0,selected:new Map(c),children:a,parents:o});return c},out:(n,a)=>{const o=[];for(const[c,l]of n.entries())l==="on"&&!a.has(c)&&o.push(c);return o}};return e},VNestedSymbol=Symbol.for("vuetify:nested"),emptyNested={id:ref(),root:{register:()=>null,unregister:()=>null,parents:ref(new Map),children:ref(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:ref(new Set),selected:ref(new Map),selectedValues:ref([])}},makeNestedProps=propsFactory({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),useNested=t=>{let e=!1;const n=ref(new Map),a=ref(new Map),o=useProxiedModel(t,"opened",t.opened,x=>new Set(x),x=>[...x.values()]),c=computed(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single-leaf":return leafSingleSelectStrategy(t.mandatory);case"leaf":return leafSelectStrategy(t.mandatory);case"independent":return independentSelectStrategy(t.mandatory);case"single-independent":return independentSingleSelectStrategy(t.mandatory);case"classic":default:return classicSelectStrategy(t.mandatory)}}),l=computed(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return listOpenStrategy;case"single":return singleOpenStrategy;case"multiple":default:return multipleOpenStrategy}}),u=useProxiedModel(t,"selected",t.selected,x=>c.value.in(x,n.value,a.value),x=>c.value.out(x,n.value,a.value));onBeforeUnmount(()=>{e=!0});function d(x){const _=[];let w=x;for(;w!=null;)_.unshift(w),w=a.value.get(w);return _}const m=getCurrentInstance("nested"),b={id:ref(),root:{opened:o,selected:u,selectedValues:computed(()=>{const x=[];for(const[_,w]of u.value.entries())w==="on"&&x.push(_);return x}),register:(x,_,w)=>{_&&x!==_&&a.value.set(x,_),w&&n.value.set(x,[]),_!=null&&n.value.set(_,[...n.value.get(_)||[],x])},unregister:x=>{if(e)return;n.value.delete(x);const _=a.value.get(x);if(_){const w=n.value.get(_)??[];n.value.set(_,w.filter(S=>S!==x))}a.value.delete(x),o.value.delete(x)},open:(x,_,w)=>{m.emit("click:open",{id:x,value:_,path:d(x),event:w});const S=l.value.open({id:x,value:_,opened:new Set(o.value),children:n.value,parents:a.value,event:w});S&&(o.value=S)},openOnSelect:(x,_,w)=>{const S=l.value.select({id:x,value:_,selected:new Map(u.value),opened:new Set(o.value),children:n.value,parents:a.value,event:w});S&&(o.value=S)},select:(x,_,w)=>{m.emit("click:select",{id:x,value:_,path:d(x),event:w});const S=c.value.select({id:x,value:_,selected:new Map(u.value),children:n.value,parents:a.value,event:w});S&&(u.value=S),b.root.openOnSelect(x,_,w)},children:n,parents:a}};return provide(VNestedSymbol,b),b.root},useNestedItem=(t,e)=>{const n=inject$1(VNestedSymbol,emptyNested),a=computed(()=>t.value??Symbol(getUid())),o={...n,id:a,open:(c,l)=>n.root.open(a.value,c,l),openOnSelect:(c,l)=>n.root.openOnSelect(a.value,c,l),isOpen:computed(()=>n.root.opened.value.has(a.value)),parent:computed(()=>n.root.parents.value.get(a.value)),select:(c,l)=>n.root.select(a.value,c,l),isSelected:computed(()=>n.root.selected.value.get(a.value)==="on"),isIndeterminate:computed(()=>n.root.selected.value.get(a.value)==="indeterminate"),isLeaf:computed(()=>!n.root.children.value.get(a.value)),isGroupActivator:n.isGroupActivator};return!n.isGroupActivator&&n.root.register(a.value,n.id.value,e),onBeforeUnmount(()=>{!n.isGroupActivator&&n.root.unregister(a.value)}),e&&provide(VNestedSymbol,o),o},useNestedGroupActivator=()=>{const t=inject$1(VNestedSymbol,emptyNested);provide(VNestedSymbol,{...t,isGroupActivator:!0})},VListGroupActivator=defineComponent({name:"VListGroupActivator",setup(t,e){let{slots:n}=e;return useNestedGroupActivator(),()=>{var a;return(a=n.default)==null?void 0:a.call(n)}}}),makeVListGroupProps=propsFactory({activeColor:String,color:String,collapseIcon:{type:IconValue,default:"$collapse"},expandIcon:{type:IconValue,default:"$expand"},prependIcon:IconValue,appendIcon:IconValue,fluid:Boolean,subgroup:Boolean,value:null,...makeTagProps()},"v-list-group"),VListGroup=genericComponent()({name:"VListGroup",props:{title:String,...makeVListGroupProps()},setup(t,e){let{slots:n}=e;const{isOpen:a,open:o,id:c}=useNestedItem(toRef(t,"value"),!0),l=computed(()=>`v-list-group--id-${String(c.value)}`),u=useList();function d(x){o(!a.value,x)}const m=computed(()=>({onClick:d,class:"v-list-group__header",id:l.value})),b=computed(()=>a.value?t.collapseIcon:t.expandIcon);return useRender(()=>{var x;return createVNode(t.tag,{class:["v-list-group",{"v-list-group--prepend":u?.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":a.value}]},{default:()=>[n.activator&&createVNode(VDefaultsProvider,{defaults:{VListItem:{active:a.value,activeColor:t.activeColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&b.value,appendIcon:t.appendIcon||!t.subgroup&&b.value,title:t.title,value:t.value}}},{default:()=>[createVNode(VListGroupActivator,null,{default:()=>[n.activator({props:m.value,isOpen:a})]})]}),createVNode(VExpandTransition,null,{default:()=>[withDirectives(createVNode("div",{class:"v-list-group__items",role:"group","aria-labelledby":l.value},[(x=n.default)==null?void 0:x.call(n)]),[[vShow,a.value]])]})]})}),{}}});function filterListGroupProps(t){return pick(t,Object.keys(VListGroup.props))}const VListItem$1="",VAvatar$1="",VIcon$1="",predefinedSizes=["x-small","small","default","large","x-large"],makeSizeProps=propsFactory({size:{type:[String,Number],default:"default"}},"size");function useSize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return destructComputed(()=>{let n,a;return includes$1(predefinedSizes,t.size)?n=`${e}--size-${t.size}`:t.size&&(a={width:convertToUnit(t.size),height:convertToUnit(t.size)}),{sizeClasses:n,sizeStyles:a}})}const makeVIconProps=propsFactory({color:String,start:Boolean,end:Boolean,icon:IconValue,...makeSizeProps(),...makeTagProps({tag:"i"}),...makeThemeProps()},"v-icon"),VIcon=defineComponent({name:"VIcon",props:makeVIconProps(),setup(t,e){let{attrs:n,slots:a}=e,o;a.default&&(o=computed(()=>{var b,x;const _=(b=a.default)==null?void 0:b.call(a);if(_)return(x=_.filter(w=>w.type===Text&&w.children&&typeof w.children=="string")[0])==null?void 0:x.children}));const{themeClasses:c}=provideTheme(t),{iconData:l}=useIcon(o||t),{sizeClasses:u}=useSize(t),{textColorClasses:d,textColorStyles:m}=useTextColor(toRef(t,"color"));return useRender(()=>{var b;return createVNode(l.value.component,{tag:t.tag,icon:l.value.icon,class:["v-icon","notranslate",c.value,u.value,d.value,{"v-icon--clickable":!!n.onClick,"v-icon--start":t.start,"v-icon--end":t.end}],style:[u.value?void 0:{fontSize:convertToUnit(t.size),height:convertToUnit(t.size),width:convertToUnit(t.size)},m.value],role:n.onClick?"button":void 0,"aria-hidden":!n.onClick},{default:()=>[(b=a.default)==null?void 0:b.call(a)]})}),{}}}),VImg$1="",VResponsive$1="",makeDimensionProps=propsFactory({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function useDimension(t){return{dimensionStyles:computed(()=>({height:convertToUnit(t.height),maxHeight:convertToUnit(t.maxHeight),maxWidth:convertToUnit(t.maxWidth),minHeight:convertToUnit(t.minHeight),minWidth:convertToUnit(t.minWidth),width:convertToUnit(t.width)}))}}function useAspectStyles(t){return{aspectStyles:computed(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const VResponsive=defineComponent({name:"VResponsive",props:{aspectRatio:[String,Number],contentClass:String,...makeDimensionProps()},setup(t,e){let{slots:n}=e;const{aspectStyles:a}=useAspectStyles(t),{dimensionStyles:o}=useDimension(t);return useRender(()=>{var c;return createVNode("div",{class:"v-responsive",style:o.value},[createVNode("div",{class:"v-responsive__sizer",style:a.value},null),(c=n.additional)==null?void 0:c.call(n),n.default&&createVNode("div",{class:["v-responsive__content",t.contentClass]},[n.default()])])}),{}}});function mounted$1(t,e){if(!SUPPORTS_INTERSECTION)return;const n=e.modifiers||{},a=e.value,{handler:o,options:c}=typeof a=="object"?a:{handler:a,options:{}},l=new IntersectionObserver(function(){var u;let d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],m=arguments.length>1?arguments[1]:void 0;const b=(u=t._observe)==null?void 0:u[e.instance.$.uid];if(!b)return;const x=d.some(_=>_.isIntersecting);o&&(!n.quiet||b.init)&&(!n.once||x||b.init)&&o(x,d,m),x&&n.once?unmounted$1(t,e):b.init=!0},c);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:l},l.observe(t)}function unmounted$1(t,e){var n;const a=(n=t._observe)==null?void 0:n[e.instance.$.uid];a&&(a.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const Intersect={mounted:mounted$1,unmounted:unmounted$1},intersect=Intersect,makeTransitionProps=propsFactory({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),MaybeTransition=(t,e)=>{let{slots:n}=e;const{transition:a,...o}=t,{component:c=Transition,...l}=typeof a=="object"?a:{};return h(c,mergeProps(typeof a=="string"?{name:a}:l,o),n)},VImg=defineComponent({name:"VImg",directives:{intersect},props:{aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number],...makeTransitionProps()},emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:n,slots:a}=e;const o=ref(""),c=ref(),l=ref(t.eager?"loading":"idle"),u=ref(),d=ref(),m=computed(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),b=computed(()=>m.value.aspect||u.value/d.value||0);watch(()=>t.src,()=>{x(l.value!=="idle")}),watch(b,(J,Z)=>{!J&&Z&&c.value&&B(c.value)}),onBeforeMount(()=>x());function x(J){if(!(t.eager&&J)&&!(SUPPORTS_INTERSECTION&&!J&&!t.eager)){if(l.value="loading",m.value.lazySrc){const Z=new Image;Z.src=m.value.lazySrc,B(Z,null)}m.value.src&&nextTick$3(()=>{var Z,se;if(n("loadstart",((Z=c.value)==null?void 0:Z.currentSrc)||m.value.src),(se=c.value)!=null&&se.complete){if(c.value.naturalWidth||w(),l.value==="error")return;b.value||B(c.value,null),_()}else b.value||B(c.value),S()})}}function _(){var J;S(),l.value="loaded",n("load",((J=c.value)==null?void 0:J.currentSrc)||m.value.src)}function w(){var J;l.value="error",n("error",((J=c.value)==null?void 0:J.currentSrc)||m.value.src)}function S(){const J=c.value;J&&(o.value=J.currentSrc||J.src)}let T=-1;function B(J){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const se=()=>{clearTimeout(T);const{naturalHeight:ie,naturalWidth:F}=J;ie||F?(u.value=F,d.value=ie):!J.complete&&l.value==="loading"&&Z!=null?T=window.setTimeout(se,Z):(J.currentSrc.endsWith(".svg")||J.currentSrc.startsWith("data:image/svg+xml"))&&(u.value=1,d.value=1)};se()}const C=computed(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),D=()=>{var J;if(!m.value.src||l.value==="idle")return null;const Z=createVNode("img",{class:["v-img__img",C.value],src:m.value.src,srcset:m.value.srcset,alt:"",sizes:t.sizes,ref:c,onLoad:_,onError:w},null),se=(J=a.sources)==null?void 0:J.call(a);return createVNode(MaybeTransition,{transition:t.transition,appear:!0},{default:()=>[withDirectives(se?createVNode("picture",{class:"v-img__picture"},[se,Z]):Z,[[vShow,l.value==="loaded"]])]})},z=()=>createVNode(MaybeTransition,{transition:t.transition},{default:()=>[m.value.lazySrc&&l.value!=="loaded"&&createVNode("img",{class:["v-img__img","v-img__img--preload",C.value],src:m.value.lazySrc,alt:""},null)]}),U=()=>a.placeholder?createVNode(MaybeTransition,{transition:t.transition,appear:!0},{default:()=>[(l.value==="loading"||l.value==="error"&&!a.error)&&createVNode("div",{class:"v-img__placeholder"},[a.placeholder()])]}):null,Y=()=>a.error?createVNode(MaybeTransition,{transition:t.transition,appear:!0},{default:()=>[l.value==="error"&&createVNode("div",{class:"v-img__error"},[a.error()])]}):null,X=()=>t.gradient?createVNode("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,O=ref(!1);{const J=watch(b,Z=>{Z&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{O.value=!0})}),J())})}return useRender(()=>withDirectives(createVNode(VResponsive,{class:["v-img",{"v-img--booting":!O.value}],style:{width:convertToUnit(t.width==="auto"?u.value:t.width)},aspectRatio:b.value,"aria-label":t.alt,role:t.alt?"img":void 0},{additional:()=>createVNode(Fragment,null,[createVNode(D,null,null),createVNode(z,null,null),createVNode(X,null,null),createVNode(U,null,null),createVNode(Y,null,null)]),default:a.default}),[[resolveDirective("intersect"),{handler:x,options:t.options},null,{once:!0}]])),{currentSrc:o,image:c,state:l,naturalWidth:u,naturalHeight:d}}}),allowedVariants=["elevated","flat","tonal","outlined","text","plain"];function genOverlays(t,e){return createVNode(Fragment,null,[t&&createVNode("span",{key:"overlay",class:`${e}__overlay`},null),createVNode("span",{key:"underlay",class:`${e}__underlay`},null)])}const makeVariantProps=propsFactory({color:String,variant:{type:String,default:"elevated",validator:t=>allowedVariants.includes(t)}},"variant");function useVariant(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const n=computed(()=>{const{variant:c}=unref(t);return`${e}--variant-${c}`}),{colorClasses:a,colorStyles:o}=useColor(computed(()=>{const{variant:c,color:l}=unref(t);return{[["elevated","flat"].includes(c)?"background":"text"]:l}}));return{colorClasses:a,colorStyles:o,variantClasses:n}}const allowedDensities=[null,"default","comfortable","compact"],makeDensityProps=propsFactory({density:{type:String,default:"default",validator:t=>allowedDensities.includes(t)}},"density");function useDensity(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{densityClasses:computed(()=>`${e}--density-${t.density}`)}}const makeRoundedProps=propsFactory({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function useRounded(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{roundedClasses:computed(()=>{const a=isRef(t)?t.value:t.rounded,o=[];if(a===!0||a==="")o.push(`${e}--rounded`);else if(typeof a=="string"||a===0)for(const c of String(a).split(" "))o.push(`rounded-${c}`);return o})}}const makeVAvatarProps=propsFactory({start:Boolean,end:Boolean,icon:IconValue,image:String,...makeDensityProps(),...makeRoundedProps(),...makeSizeProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"flat"})},"v-avatar"),VAvatar=defineComponent({name:"VAvatar",props:makeVAvatarProps(),setup(t,e){let{slots:n}=e;const{themeClasses:a}=provideTheme(t),{colorClasses:o,colorStyles:c,variantClasses:l}=useVariant(t),{densityClasses:u}=useDensity(t),{roundedClasses:d}=useRounded(t),{sizeClasses:m,sizeStyles:b}=useSize(t);return useRender(()=>{var x;return createVNode(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},a.value,o.value,u.value,d.value,m.value,l.value],style:[c.value,b.value]},{default:()=>[t.image?createVNode(VImg,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?createVNode(VIcon,{key:"icon",icon:t.icon},null):(x=n.default)==null?void 0:x.call(n),genOverlays(!1,"v-avatar")]})}),{}}}),VListItemSubtitle=createSimpleFunctional("v-list-item-subtitle"),VListItemTitle=createSimpleFunctional("v-list-item-title"),VRipple="",stopSymbol=Symbol("rippleStop"),DELAY_RIPPLE=80;function transform$1(t,e){t.style.transform=e,t.style.webkitTransform=e}function opacity(t,e){t.style.opacity=`calc(${e} * var(--v-theme-overlay-multiplier))`}function isTouchEvent(t){return t.constructor.name==="TouchEvent"}function isKeyboardEvent(t){return t.constructor.name==="KeyboardEvent"}const calculate=function(t,e){var n;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=0,c=0;if(!isKeyboardEvent(t)){const _=e.getBoundingClientRect(),w=isTouchEvent(t)?t.touches[t.touches.length-1]:t;o=w.clientX-_.left,c=w.clientY-_.top}let l=0,u=.3;(n=e._ripple)!=null&&n.circle?(u=.15,l=e.clientWidth/2,l=a.center?l:l+Math.sqrt((o-l)**2+(c-l)**2)/4):l=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const d=`${(e.clientWidth-l*2)/2}px`,m=`${(e.clientHeight-l*2)/2}px`,b=a.center?d:`${o-l}px`,x=a.center?m:`${c-l}px`;return{radius:l,scale:u,x:b,y:x,centerX:d,centerY:m}},ripples={show(t,e){var n;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(e!=null&&(n=e._ripple)!=null&&n.enabled))return;const o=document.createElement("span"),c=document.createElement("span");o.appendChild(c),o.className="v-ripple__container",a.class&&(o.className+=` ${a.class}`);const{radius:l,scale:u,x:d,y:m,centerX:b,centerY:x}=calculate(t,e,a),_=`${l*2}px`;c.className="v-ripple__animation",c.style.width=_,c.style.height=_,e.appendChild(o);const w=window.getComputedStyle(e);w&&w.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),c.classList.add("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--visible"),transform$1(c,`translate(${d}, ${m}) scale3d(${u},${u},${u})`),opacity(c,0),c.dataset.activated=String(performance.now()),setTimeout(()=>{c.classList.remove("v-ripple__animation--enter"),c.classList.add("v-ripple__animation--in"),transform$1(c,`translate(${b}, ${x}) scale3d(1,1,1)`),opacity(c,.08)},0)},hide(t){var e;if(!(t!=null&&(e=t._ripple)!=null&&e.enabled))return;const n=t.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const a=n[n.length-1];if(a.dataset.isHiding)return;a.dataset.isHiding="true";const o=performance.now()-Number(a.dataset.activated),c=Math.max(250-o,0);setTimeout(()=>{a.classList.remove("v-ripple__animation--in"),a.classList.add("v-ripple__animation--out"),opacity(a,0),setTimeout(()=>{t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),a.parentNode&&t.removeChild(a.parentNode)},300)},c)}};function isRippleEnabled(t){return typeof t>"u"||!!t}function rippleShow(t){const e={},n=t.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||t[stopSymbol])){if(t[stopSymbol]=!0,isTouchEvent(t))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(e.center=n._ripple.centered||isKeyboardEvent(t),n._ripple.class&&(e.class=n._ripple.class),isTouchEvent(t)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{ripples.show(t,n,e)},n._ripple.showTimer=window.setTimeout(()=>{var a;n!=null&&(a=n._ripple)!=null&&a.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},DELAY_RIPPLE)}else ripples.show(t,n,e)}}function rippleStop(t){t[stopSymbol]=!0}function rippleHide(t){const e=t.currentTarget;if(!(!e||!e._ripple)){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{rippleHide(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),ripples.hide(e)}}function rippleCancelShow(t){const e=t.currentTarget;!e||!e._ripple||(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let keyboardRipple=!1;function keyboardRippleShow(t){!keyboardRipple&&(t.keyCode===keyCodes.enter||t.keyCode===keyCodes.space)&&(keyboardRipple=!0,rippleShow(t))}function keyboardRippleHide(t){keyboardRipple=!1,rippleHide(t)}function focusRippleHide(t){keyboardRipple&&(keyboardRipple=!1,rippleHide(t))}function updateRipple(t,e,n){const{value:a,modifiers:o}=e,c=isRippleEnabled(a);if(c||ripples.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=c,t._ripple.centered=o.center,t._ripple.circle=o.circle,isObject$3(a)&&a.class&&(t._ripple.class=a.class),c&&!n){if(o.stop){t.addEventListener("touchstart",rippleStop,{passive:!0}),t.addEventListener("mousedown",rippleStop);return}t.addEventListener("touchstart",rippleShow,{passive:!0}),t.addEventListener("touchend",rippleHide,{passive:!0}),t.addEventListener("touchmove",rippleCancelShow,{passive:!0}),t.addEventListener("touchcancel",rippleHide),t.addEventListener("mousedown",rippleShow),t.addEventListener("mouseup",rippleHide),t.addEventListener("mouseleave",rippleHide),t.addEventListener("keydown",keyboardRippleShow),t.addEventListener("keyup",keyboardRippleHide),t.addEventListener("blur",focusRippleHide),t.addEventListener("dragstart",rippleHide,{passive:!0})}else!c&&n&&removeListeners(t)}function removeListeners(t){t.removeEventListener("mousedown",rippleShow),t.removeEventListener("touchstart",rippleShow),t.removeEventListener("touchend",rippleHide),t.removeEventListener("touchmove",rippleCancelShow),t.removeEventListener("touchcancel",rippleHide),t.removeEventListener("mouseup",rippleHide),t.removeEventListener("mouseleave",rippleHide),t.removeEventListener("keydown",keyboardRippleShow),t.removeEventListener("keyup",keyboardRippleHide),t.removeEventListener("dragstart",rippleHide),t.removeEventListener("blur",focusRippleHide)}function mounted(t,e){updateRipple(t,e,!1)}function unmounted(t){delete t._ripple,removeListeners(t)}function updated(t,e){if(e.value===e.oldValue)return;const n=isRippleEnabled(e.oldValue);updateRipple(t,e,n)}const Ripple={mounted,unmounted,updated},makeBorderProps=propsFactory({border:[Boolean,Number,String]},"border");function useBorder(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{borderClasses:computed(()=>{const a=isRef(t)?t.value:t.border,o=[];if(a===!0||a==="")o.push(`${e}--border`);else if(typeof a=="string"||a===0)for(const c of String(a).split(" "))o.push(`border-${c}`);return o})}}const makeElevationProps=propsFactory({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function useElevation(t){return{elevationClasses:computed(()=>{const n=isRef(t)?t.value:t.elevation,a=[];return n==null||a.push(`elevation-${n}`),a})}}function useRouter(){var t,e;return(t=getCurrentInstance("useRouter"))==null||(e=t.proxy)==null?void 0:e.$router}function useLink$1(t,e){const n=resolveDynamicComponent("RouterLink"),a=computed(()=>!!(t.href||t.to)),o=computed(()=>a?.value||hasEvent(e,"click")||hasEvent(t,"click"));if(typeof n=="string")return{isLink:a,isClickable:o,href:toRef(t,"href")};const c=t.to?n.useLink(t):void 0;return{isLink:a,isClickable:o,route:c?.route,navigate:c?.navigate,isActive:c&&computed(()=>{var l,u;return t.exact?(l=c.isExactActive)==null?void 0:l.value:(u=c.isActive)==null?void 0:u.value}),href:computed(()=>t.to?c?.route.value.href:t.href)}}const makeRouterProps=propsFactory({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router"),VListItem=genericComponent()({name:"VListItem",directives:{Ripple},props:{active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:IconValue,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:Boolean,default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:EventProp,onClickOnce:EventProp,...makeBorderProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},emits:{click:t=>!0},setup(t,e){let{attrs:n,slots:a,emit:o}=e;const c=useLink$1(t,n),l=computed(()=>t.value??c.href.value),{select:u,isSelected:d,isIndeterminate:m,isGroupActivator:b,root:x,parent:_,openOnSelect:w}=useNestedItem(l,!1),S=useList(),T=computed(()=>{var P;return t.active!==!1&&(t.active||((P=c.isActive)==null?void 0:P.value)||d.value)}),B=computed(()=>t.link!==!1&&c.isLink.value),C=computed(()=>!t.disabled&&t.link!==!1&&(t.link||c.isClickable.value||t.value!=null&&!!S)),D=computed(()=>t.rounded||t.nav),z=computed(()=>({color:T.value?t.activeColor??t.color:t.color,variant:t.variant}));watch(()=>{var P;return(P=c.isActive)==null?void 0:P.value},P=>{P&&_.value!=null&&x.open(_.value,!0),P&&w(P)},{immediate:!0});const{themeClasses:U}=provideTheme(t),{borderClasses:Y}=useBorder(t),{colorClasses:X,colorStyles:O,variantClasses:J}=useVariant(z),{densityClasses:Z}=useDensity(t),{dimensionStyles:se}=useDimension(t),{elevationClasses:ie}=useElevation(t),{roundedClasses:F}=useRounded(D),k=computed(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),y=computed(()=>({isActive:T.value,select:u,isSelected:d.value,isIndeterminate:m.value}));function A(P){var H;o("click",P),!(b||!C.value)&&((H=c.navigate)==null||H.call(c,P),t.value!=null&&u(!d.value,P))}function I(P){(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),A(P))}return useRender(()=>{var P,H,q,j,M;const E=B.value?"a":t.tag,L=!S||d.value||T.value,le=a.title||t.title,Q=a.subtitle||t.subtitle,ce=!!(a.append||t.appendAvatar||t.appendIcon),fe=!!(a.prepend||t.prependAvatar||t.prependIcon);return S?.updateHasPrepend(fe),withDirectives(createVNode(E,{class:["v-list-item",{"v-list-item--active":T.value,"v-list-item--disabled":t.disabled,"v-list-item--link":C.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!fe&&S?.hasPrepend.value,[`${t.activeClass}`]:t.activeClass&&T.value},U.value,Y.value,L?X.value:void 0,Z.value,ie.value,k.value,F.value,J.value],style:[L?O.value:void 0,se.value],href:c.href.value,tabindex:C.value?0:void 0,onClick:A,onKeydown:C.value&&!B.value&&I},{default:()=>[genOverlays(C.value||T.value,"v-list-item"),fe&&createVNode(VDefaultsProvider,{key:"prepend",defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>[createVNode("div",{class:"v-list-item__prepend"},[t.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar"},null),t.prependIcon&&createVNode(VIcon,{key:"prepend-icon"},null),(P=a.prepend)==null?void 0:P.call(a,y.value)])]}),createVNode("div",{class:"v-list-item__content","data-no-activator":""},[le&&createVNode(VListItemTitle,{key:"title"},{default:()=>[((H=a.title)==null?void 0:H.call(a,{title:t.title}))??t.title]}),Q&&createVNode(VListItemSubtitle,{key:"subtitle"},{default:()=>[((q=a.subtitle)==null?void 0:q.call(a,{subtitle:t.subtitle}))??t.subtitle]}),(j=a.default)==null?void 0:j.call(a,y.value)]),ce&&createVNode(VDefaultsProvider,{key:"append",defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>[createVNode("div",{class:"v-list-item__append"},[(M=a.append)==null?void 0:M.call(a,y.value),t.appendIcon&&createVNode(VIcon,{key:"append-icon"},null),t.appendAvatar&&createVNode(VAvatar,{key:"append-avatar"},null)])]})]}),[[resolveDirective("ripple"),C.value&&t.ripple]])}),{}}}),VListSubheader=defineComponent({name:"VListSubheader",props:{color:String,inset:Boolean,sticky:Boolean,title:String,...makeTagProps()},setup(t,e){let{slots:n}=e;const{textColorClasses:a,textColorStyles:o}=useTextColor(toRef(t,"color"));return useRender(()=>{var c;const l=!!(n.default||t.title);return createVNode(t.tag,{class:["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},a.value],style:{textColorStyles:o}},{default:()=>[l&&createVNode("div",{class:"v-list-subheader__text"},[((c=n.default)==null?void 0:c.call(n))??t.title])]})}),{}}}),VListChildren=genericComponent()({name:"VListChildren",props:{items:Array},setup(t,e){let{slots:n}=e;return createList(),()=>{var a,o;return((a=n.default)==null?void 0:a.call(n))??((o=t.items)==null?void 0:o.map(c=>{let{children:l,props:u,type:d,raw:m}=c;if(d==="divider"){var b;return((b=n.divider)==null?void 0:b.call(n,{props:u}))??createVNode(VDivider,u,null)}if(d==="subheader"){var x;return((x=n.subheader)==null?void 0:x.call(n,{props:u}))??createVNode(VListSubheader,u,{default:n.subheader})}const _={subtitle:n.subtitle?T=>{var B;return(B=n.subtitle)==null?void 0:B.call(n,{...T,item:m})}:void 0,prepend:n.prepend?T=>{var B;return(B=n.prepend)==null?void 0:B.call(n,{...T,item:m})}:void 0,append:n.append?T=>{var B;return(B=n.append)==null?void 0:B.call(n,{...T,item:m})}:void 0,default:n.default?T=>{var B;return(B=n.default)==null?void 0:B.call(n,{...T,item:m})}:void 0,title:n.title?T=>{var B;return(B=n.title)==null?void 0:B.call(n,{...T,item:m})}:void 0},[w,S]=filterListGroupProps(u);return l?createVNode(VListGroup,mergeProps({value:u?.value},w),{activator:T=>{let{props:B}=T;return n.header?n.header({...u,...B}):createVNode(VListItem,mergeProps(u,B),_)},default:()=>createVNode(VListChildren,{items:l},n)}):n.item?n.item(u):createVNode(VListItem,u,_)}))}}}),makeItemsProps=propsFactory({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"item");function transformItem(t,e){const n=getPropertyFromItem(e,t.itemType,"item"),a=typeof e=="string"?e:getPropertyFromItem(e,t.itemTitle),o=getPropertyFromItem(e,t.itemValue,void 0),c=getPropertyFromItem(e,t.itemChildren),l=t.itemProps===!0?pick(e,["children"])[1]:getPropertyFromItem(e,t.itemProps),u={title:a,value:o,...l};return{type:n,title:u.title,value:u.value,props:u,children:n==="item"&&c?transformItems(t,c):void 0,raw:e}}function transformItems(t,e){const n=[];for(const a of e)n.push(transformItem(t,a));return n}function useListItems(t){return{items:computed(()=>transformItems(t,t.items))}}const VList=genericComponent()({name:"VList",props:{activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...makeNestedProps({selectStrategy:"single-leaf",openStrategy:"list"}),...makeBorderProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),itemType:{type:String,default:"type"},...makeItemsProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},emits:{"update:selected":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:n}=e;const{items:a}=useListItems(t),{themeClasses:o}=provideTheme(t),{backgroundColorClasses:c,backgroundColorStyles:l}=useBackgroundColor(toRef(t,"bgColor")),{borderClasses:u}=useBorder(t),{densityClasses:d}=useDensity(t),{dimensionStyles:m}=useDimension(t),{elevationClasses:b}=useElevation(t),{roundedClasses:x}=useRounded(t),{open:_,select:w}=useNested(t),S=computed(()=>t.lines?`v-list--${t.lines}-line`:void 0),T=toRef(t,"activeColor"),B=toRef(t,"color");createList(),provideDefaults({VListGroup:{activeColor:T,color:B},VListItem:{activeClass:toRef(t,"activeClass"),activeColor:T,color:B,density:toRef(t,"density"),disabled:toRef(t,"disabled"),lines:toRef(t,"lines"),nav:toRef(t,"nav"),variant:toRef(t,"variant")}});const C=ref(!1),D=ref();function z(J){C.value=!0}function U(J){C.value=!1}function Y(J){var Z;!C.value&&!(J.relatedTarget&&(Z=D.value)!=null&&Z.contains(J.relatedTarget))&&O()}function X(J){if(D.value){if(J.key==="ArrowDown")O("next");else if(J.key==="ArrowUp")O("prev");else if(J.key==="Home")O("first");else if(J.key==="End")O("last");else return;J.preventDefault()}}function O(J){if(!D.value)return;const Z=[...D.value.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')].filter(y=>!y.hasAttribute("disabled")),se=Z.indexOf(document.activeElement);if(J)if(J==="first"){var F;(F=Z[0])==null||F.focus()}else if(J==="last"){var k;(k=Z.at(-1))==null||k.focus()}else{let y,A=se;const I=J==="next"?1:-1;do A+=I,y=Z[A];while((!y||y.offsetParent==null)&&A<Z.length&&A>=0);y?y.focus():O(J==="next"?"first":"last")}else if(!D.value.contains(document.activeElement)){var ie;(ie=Z[0])==null||ie.focus()}}return useRender(()=>createVNode(t.tag,{ref:D,class:["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav},o.value,c.value,u.value,d.value,b.value,S.value,x.value],style:[l.value,m.value],role:"listbox","aria-activedescendant":void 0,onFocusin:z,onFocusout:U,onFocus:Y,onKeydown:X},{default:()=>[createVNode(VListChildren,{items:a.value},n)]})),{open:_,select:w,focus:O}}}),VNavigationDrawer$1="";function useResizeObserver(t){const e=ref(),n=ref();if(IN_BROWSER){const a=new ResizeObserver(o=>{t?.(o,a),o.length&&(n.value=o[0].contentRect)});onBeforeUnmount(()=>{a.disconnect()}),watch(e,(o,c)=>{c&&(a.unobserve(c),n.value=void 0),o&&a.observe(o)},{flush:"post"})}return{resizeRef:e,contentRect:readonly$3(n)}}const VuetifyLayoutKey=Symbol.for("vuetify:layout"),VuetifyLayoutItemKey=Symbol.for("vuetify:layout-item"),ROOT_ZINDEX=1e3,makeLayoutProps=propsFactory({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),makeLayoutItemProps=propsFactory({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function useLayout(){const t=inject$1(VuetifyLayoutKey);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}function useLayoutItem(t){const e=inject$1(VuetifyLayoutKey);if(!e)throw new Error("[Vuetify] Could not find injected layout");const n=t.id??`layout-item-${getUid()}`,a=getCurrentInstance("useLayoutItem");provide(VuetifyLayoutItemKey,{id:n});const o=ref(!1);onDeactivated(()=>o.value=!0),onActivated(()=>o.value=!1);const{layoutItemStyles:c,layoutItemScrimStyles:l}=e.register(a,{...t,active:computed(()=>o.value?!1:t.active.value),id:n});return onBeforeUnmount(()=>e.unregister(n)),{layoutItemStyles:c,layoutRect:e.layoutRect,layoutItemScrimStyles:l}}const generateLayers=(t,e,n,a)=>{let o={top:0,left:0,right:0,bottom:0};const c=[{id:"",layer:{...o}}];for(const l of t){const u=e.get(l),d=n.get(l),m=a.get(l);if(!u||!d||!m)continue;const b={...o,[u.value]:parseInt(o[u.value],10)+(m.value?parseInt(d.value,10):0)};c.push({id:l,layer:b}),o=b}return c};function createLayout(t){const e=inject$1(VuetifyLayoutKey,null),n=computed(()=>e?e.rootZIndex.value-100:ROOT_ZINDEX),a=ref([]),o=reactive(new Map),c=reactive(new Map),l=reactive(new Map),u=reactive(new Map),d=reactive(new Map),{resizeRef:m,contentRect:b}=useResizeObserver(),x=computed(()=>{const X=new Map,O=t.overlaps??[];for(const J of O.filter(Z=>Z.includes(":"))){const[Z,se]=J.split(":");if(!a.value.includes(Z)||!a.value.includes(se))continue;const ie=o.get(Z),F=o.get(se),k=c.get(Z),y=c.get(se);!ie||!F||!k||!y||(X.set(se,{position:ie.value,amount:parseInt(k.value,10)}),X.set(Z,{position:F.value,amount:-parseInt(y.value,10)}))}return X}),_=computed(()=>{const X=[...new Set([...l.values()].map(J=>J.value))].sort((J,Z)=>J-Z),O=[];for(const J of X){const Z=a.value.filter(se=>{var ie;return((ie=l.get(se))==null?void 0:ie.value)===J});O.push(...Z)}return generateLayers(O,o,c,u)}),w=computed(()=>!Array.from(d.values()).some(X=>X.value)),S=computed(()=>_.value[_.value.length-1].layer),T=computed(()=>({"--v-layout-left":convertToUnit(S.value.left),"--v-layout-right":convertToUnit(S.value.right),"--v-layout-top":convertToUnit(S.value.top),"--v-layout-bottom":convertToUnit(S.value.bottom),...w.value?void 0:{transition:"none"}})),B=computed(()=>_.value.slice(1).map((X,O)=>{let{id:J}=X;const{layer:Z}=_.value[O],se=c.get(J),ie=o.get(J);return{id:J,...Z,size:Number(se.value),position:ie.value}})),C=X=>B.value.find(O=>O.id===X),D=getCurrentInstance("createLayout"),z=ref(!1);onMounted(()=>{z.value=!0}),provide(VuetifyLayoutKey,{register:(X,O)=>{let{id:J,order:Z,position:se,layoutSize:ie,elementSize:F,active:k,disableTransitions:y,absolute:A}=O;l.set(J,Z),o.set(J,se),c.set(J,ie),u.set(J,k),y&&d.set(J,y);const P=findChildrenWithProvide(VuetifyLayoutItemKey,D?.vnode).indexOf(X);P>-1?a.value.splice(P,0,J):a.value.push(J);const H=computed(()=>B.value.findIndex(E=>E.id===J)),q=computed(()=>n.value+_.value.length*2-H.value*2),j=computed(()=>{const E=se.value==="left"||se.value==="right",L=se.value==="right",le=se.value==="bottom",Q={[se.value]:0,zIndex:q.value,transform:`translate${E?"X":"Y"}(${(k.value?0:-110)*(L||le?-1:1)}%)`,position:A.value||n.value!==ROOT_ZINDEX?"absolute":"fixed",...w.value?void 0:{transition:"none"}};if(!z.value)return Q;const ce=B.value[H.value];if(!ce)throw new Error(`[Vuetify] Could not find layout item "${J}"`);const fe=x.value.get(J);return fe&&(ce[fe.position]+=fe.amount),{...Q,height:E?`calc(100% - ${ce.top}px - ${ce.bottom}px)`:F.value?`${F.value}px`:void 0,left:L?void 0:`${ce.left}px`,right:L?`${ce.right}px`:void 0,top:se.value!=="bottom"?`${ce.top}px`:void 0,bottom:se.value!=="top"?`${ce.bottom}px`:void 0,width:E?F.value?`${F.value}px`:void 0:`calc(100% - ${ce.left}px - ${ce.right}px)`}}),M=computed(()=>({zIndex:q.value-1}));return{layoutItemStyles:j,layoutItemScrimStyles:M,zIndex:q}},unregister:X=>{l.delete(X),o.delete(X),c.delete(X),u.delete(X),d.delete(X),a.value=a.value.filter(O=>O!==X)},mainRect:S,mainStyles:T,getLayoutItem:C,items:B,layoutRect:b,rootZIndex:n});const U=computed(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),Y=computed(()=>({zIndex:n.value,position:e?"relative":void 0,overflow:e?"hidden":void 0}));return{layoutClasses:U,layoutStyles:Y,getLayoutItem:C,items:B,layoutRect:b,layoutRef:m}}const DisplaySymbol=Symbol.for("vuetify:display"),defaultDisplayOptions={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},parseDisplayOptions=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDisplayOptions;return mergeDeep(defaultDisplayOptions,t)};function getClientWidth(t){return IN_BROWSER&&!t?window.innerWidth:0}function getClientHeight(t){return IN_BROWSER&&!t?window.innerHeight:0}function getPlatform(){const t=IN_BROWSER?window.navigator.userAgent:"ssr";function e(S){return Boolean(t.match(S))}const n=e(/android/i),a=e(/iphone|ipad|ipod/i),o=e(/cordova/i),c=e(/electron/i),l=e(/chrome/i),u=e(/edge/i),d=e(/firefox/i),m=e(/opera/i),b=e(/win/i),x=e(/mac/i),_=e(/linux/i),w=e(/ssr/i);return{android:n,ios:a,cordova:o,electron:c,chrome:l,edge:u,firefox:d,opera:m,win:b,mac:x,linux:_,touch:SUPPORTS_TOUCH,ssr:w}}function createDisplay(t,e){const{thresholds:n,mobileBreakpoint:a}=parseDisplayOptions(t),o=ref(getClientHeight(e)),c=getPlatform(),l=reactive({}),u=ref(getClientWidth(e));function d(){o.value=getClientHeight(),u.value=getClientWidth()}return watchEffect(()=>{const m=u.value<n.sm,b=u.value<n.md&&!m,x=u.value<n.lg&&!(b||m),_=u.value<n.xl&&!(x||b||m),w=u.value<n.xxl&&!(_||x||b||m),S=u.value>=n.xxl,T=m?"xs":b?"sm":x?"md":_?"lg":w?"xl":"xxl",B=typeof a=="number"?a:n[a],C=c.ssr?c.android||c.ios||c.opera:u.value<B;l.xs=m,l.sm=b,l.md=x,l.lg=_,l.xl=w,l.xxl=S,l.smAndUp=!m,l.mdAndUp=!(m||b),l.lgAndUp=!(m||b||x),l.xlAndUp=!(m||b||x||_),l.smAndDown=!(x||_||w||S),l.mdAndDown=!(_||w||S),l.lgAndDown=!(w||S),l.xlAndDown=!S,l.name=T,l.height=o.value,l.width=u.value,l.mobile=C,l.mobileBreakpoint=a,l.platform=c,l.thresholds=n}),IN_BROWSER&&window.addEventListener("resize",d,{passive:!0}),{...toRefs(l),update:d,ssr:!!e}}function useDisplay(){const t=inject$1(DisplaySymbol);if(!t)throw new Error("Could not find Vuetify display injection");return t}const en={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Goto Page {0}",currentPage:"Page {0}, Current Page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}}},LANG_PREFIX="$vuetify.",replace=(t,e)=>t.replace(/\{(\d+)\}/g,(n,a)=>String(e[+a])),createTranslateFunction=(t,e,n)=>function(a){for(var o=arguments.length,c=new Array(o>1?o-1:0),l=1;l<o;l++)c[l-1]=arguments[l];if(!a.startsWith(LANG_PREFIX))return replace(a,c);const u=a.replace(LANG_PREFIX,""),d=t.value&&n.value[t.value],m=e.value&&n.value[e.value];let b=getObjectValueByPath(d,u,null);return b||(consoleWarn(`Translation key "${a}" not found in "${t.value}", trying fallback locale`),b=getObjectValueByPath(m,u,null)),b||(consoleError(`Translation key "${a}" not found in fallback`),b=a),typeof b!="string"&&(consoleError(`Translation key "${a}" has a non-string value`),b=a),replace(b,c)};function createNumberFunction(t,e){return(n,a)=>new Intl.NumberFormat([t.value,e.value],a).format(n)}function useProvided(t,e,n){const a=useProxiedModel(t,e,t[e]??n.value);return a.value=t[e]??n.value,watch(n,o=>{t[e]==null&&(a.value=n.value)}),a}function createProvideFunction(t){return e=>{const n=useProvided(e,"locale",t.current),a=useProvided(e,"fallback",t.fallback),o=useProvided(e,"messages",t.messages);return{name:"vuetify",current:n,fallback:a,messages:o,t:createTranslateFunction(n,a,o),n:createNumberFunction(n,a),provide:createProvideFunction({current:n,fallback:a,messages:o})}}}function createVuetifyAdapter(t){const e=ref(t?.locale??"en"),n=ref(t?.fallback??"en"),a=ref({en,...t?.messages});return{name:"vuetify",current:e,fallback:n,messages:a,t:createTranslateFunction(e,n,a),n:createNumberFunction(e,n),provide:createProvideFunction({current:e,fallback:n,messages:a})}}const defaultRtl={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!1,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1},LocaleSymbol=Symbol.for("vuetify:locale");function isLocaleInstance(t){return t.name!=null}function createLocale(t){const e=t!=null&&t.adapter&&isLocaleInstance(t?.adapter)?t?.adapter:createVuetifyAdapter(t),n=createRtl(e,t);return{...e,...n}}function createRtl(t,e){const n=ref(e?.rtl??defaultRtl),a=computed(()=>n.value[t.current.value]??!1);return{isRtl:a,rtl:n,rtlClasses:computed(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function useRtl(){const t=inject$1(LocaleSymbol);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}function useSsrBoot(){const t=ref(!1);return onMounted(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:computed(()=>t.value?void 0:{transition:"none !important"}),isBooted:readonly$3(t)}}function useSticky(t){let{rootEl:e,isSticky:n,layoutItemStyles:a}=t;const o=ref(!1),c=ref(0),l=computed(()=>{const m=typeof o.value=="boolean"?"top":o.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,o.value?{[m]:convertToUnit(c.value)}:{top:a.value.top}]});onMounted(()=>{watch(n,m=>{m?window.addEventListener("scroll",d,{passive:!0}):window.removeEventListener("scroll",d)},{immediate:!0})}),onBeforeUnmount(()=>{document.removeEventListener("scroll",d)});let u=0;function d(){const m=u>window.scrollY?"up":"down",b=e.value.getBoundingClientRect(),x=parseFloat(a.value.top??0),_=window.scrollY-Math.max(0,c.value-x),w=b.height+Math.max(c.value,x)-window.scrollY-window.innerHeight;b.height<window.innerHeight-x?(o.value="top",c.value=x):m==="up"&&o.value==="bottom"||m==="down"&&o.value==="top"?(c.value=window.scrollY+b.top,o.value=!0):m==="down"&&w<=0?(c.value=0,o.value="bottom"):m==="up"&&_<=0&&(c.value=b.top+_,o.value="top"),u=window.scrollY}return{isStuck:o,stickyStyles:l}}const HORIZON=100,HISTORY=20;function kineticEnergyToVelocity(t){const e=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*e}function calculateImpulseVelocity(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let e=0;for(let n=t.length-1;n>0;n--){if(t[n].t===t[n-1].t)continue;const a=kineticEnergyToVelocity(e),o=(t[n].d-t[n-1].d)/(t[n].t-t[n-1].t);e+=(o-a)*Math.abs(o),n===t.length-1&&(e*=.5)}return kineticEnergyToVelocity(e)*1e3}function useVelocity(){const t={};function e(o){Array.from(o.changedTouches).forEach(c=>{(t[c.identifier]??(t[c.identifier]=new CircularBuffer(HISTORY))).push([o.timeStamp,c])})}function n(o){Array.from(o.changedTouches).forEach(c=>{delete t[c.identifier]})}function a(o){var c;const l=(c=t[o])==null?void 0:c.values().reverse();if(!l)throw new Error(`No samples for touch id ${o}`);const u=l[0],d=[],m=[];for(const b of l){if(u[0]-b[0]>HORIZON)break;d.push({t:b[0],d:b[1].clientX}),m.push({t:b[0],d:b[1].clientY})}return{x:calculateImpulseVelocity(d),y:calculateImpulseVelocity(m),get direction(){const{x:b,y:x}=this,[_,w]=[Math.abs(b),Math.abs(x)];return _>w&&b>=0?"right":_>w&&b<=0?"left":w>_&&x>=0?"down":w>_&&x<=0?"up":oops$1()}}}return{addMovement:e,endTouch:n,getVelocity:a}}function oops$1(){throw new Error}function useTouch(t){let{isActive:e,isTemporary:n,width:a,touchless:o,position:c}=t;onMounted(()=>{window.addEventListener("touchstart",C,{passive:!0}),window.addEventListener("touchmove",D,{passive:!1}),window.addEventListener("touchend",z,{passive:!0})}),onBeforeUnmount(()=>{window.removeEventListener("touchstart",C),window.removeEventListener("touchmove",D),window.removeEventListener("touchend",z)});const l=computed(()=>c.value!=="bottom"),{addMovement:u,endTouch:d,getVelocity:m}=useVelocity();let b=!1;const x=ref(!1),_=ref(0),w=ref(0);let S;function T(Y,X){return(c.value==="left"?Y:c.value==="right"?document.documentElement.clientWidth-Y:c.value==="bottom"?document.documentElement.clientHeight-Y:oops())-(X?a.value:0)}function B(Y){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const O=c.value==="left"?(Y-w.value)/a.value:c.value==="right"?(document.documentElement.clientWidth-Y-w.value)/a.value:c.value==="bottom"?(document.documentElement.clientHeight-Y-w.value)/a.value:oops();return X?Math.max(0,Math.min(1,O)):O}function C(Y){if(o.value)return;const X=Y.changedTouches[0].clientX,O=Y.changedTouches[0].clientY,J=25,Z=c.value==="left"?X<J:c.value==="right"?X>document.documentElement.clientWidth-J:c.value==="bottom"?O>document.documentElement.clientHeight-J:oops(),se=e.value&&(c.value==="left"?X<a.value:c.value==="right"?X>document.documentElement.clientWidth-a.value:c.value==="bottom"?O>document.documentElement.clientHeight-a.value:oops());(Z||se||e.value&&n.value)&&(b=!0,S=[X,O],w.value=T(l.value?X:O,e.value),_.value=B(l.value?X:O),d(Y),u(Y))}function D(Y){const X=Y.changedTouches[0].clientX,O=Y.changedTouches[0].clientY;if(b){if(!Y.cancelable){b=!1;return}const Z=Math.abs(X-S[0]),se=Math.abs(O-S[1]);(l.value?Z>se&&Z>3:se>Z&&se>3)?(x.value=!0,b=!1):(l.value?se:Z)>3&&(b=!1)}if(!x.value)return;Y.preventDefault(),u(Y);const J=B(l.value?X:O,!1);_.value=Math.max(0,Math.min(1,J)),J>1?w.value=T(l.value?X:O,!0):J<0&&(w.value=T(l.value?X:O,!1))}function z(Y){if(b=!1,!x.value)return;u(Y),x.value=!1;const X=m(Y.changedTouches[0].identifier),O=Math.abs(X.x),J=Math.abs(X.y);(l.value?O>J&&O>400:J>O&&J>3)?e.value=X.direction===({left:"right",right:"left",bottom:"up"}[c.value]||oops()):e.value=_.value>.5}const U=computed(()=>x.value?{transform:c.value==="left"?`translateX(calc(-100% + ${_.value*a.value}px))`:c.value==="right"?`translateX(calc(100% - ${_.value*a.value}px))`:c.value==="bottom"?`translateY(calc(100% - ${_.value*a.value}px))`:oops(),transition:"none"}:void 0);return{isDragging:x,dragProgress:_,dragStyles:U}}function oops(){throw new Error}const locations=["start","end","left","right","bottom"],VNavigationDrawer=defineComponent({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>locations.includes(t)},sticky:Boolean,...makeBorderProps(),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"nav"}),...makeThemeProps()},emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,e){let{attrs:n,emit:a,slots:o}=e;const{isRtl:c}=useRtl(),{themeClasses:l}=provideTheme(t),{borderClasses:u}=useBorder(t),{backgroundColorClasses:d,backgroundColorStyles:m}=useBackgroundColor(toRef(t,"color")),{elevationClasses:b}=useElevation(t),{mobile:x}=useDisplay(),{roundedClasses:_}=useRounded(t),w=useRouter(),S=useProxiedModel(t,"modelValue",null,P=>!!P),{ssrBootStyles:T}=useSsrBoot(),B=ref(),C=ref(!1),D=computed(()=>t.rail&&t.expandOnHover&&C.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),z=computed(()=>toPhysical(t.location,c.value)),U=computed(()=>!t.permanent&&(x.value||t.temporary)),Y=computed(()=>t.sticky&&!U.value&&z.value!=="bottom");t.expandOnHover&&t.rail!=null&&watch(C,P=>a("update:rail",!P)),t.disableResizeWatcher||watch(U,P=>!t.permanent&&nextTick$3(()=>S.value=!P)),!t.disableRouteWatcher&&w&&watch(w.currentRoute,()=>U.value&&(S.value=!1)),watch(()=>t.permanent,P=>{P&&(S.value=!0)}),onBeforeMount(()=>{t.modelValue!=null||U.value||(S.value=t.permanent||!x.value)});const{isDragging:X,dragProgress:O,dragStyles:J}=useTouch({isActive:S,isTemporary:U,width:D,touchless:toRef(t,"touchless"),position:z}),Z=computed(()=>{const P=U.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):D.value;return X.value?P*O.value:P}),{layoutItemStyles:se,layoutRect:ie,layoutItemScrimStyles:F}=useLayoutItem({id:t.name,order:computed(()=>parseInt(t.order,10)),position:z,layoutSize:Z,elementSize:D,active:computed(()=>S.value||X.value),disableTransitions:computed(()=>X.value),absolute:computed(()=>t.absolute||Y.value&&typeof k.value!="string")}),{isStuck:k,stickyStyles:y}=useSticky({rootEl:B,isSticky:Y,layoutItemStyles:se}),A=useBackgroundColor(computed(()=>typeof t.scrim=="string"?t.scrim:null)),I=computed(()=>({...X.value?{opacity:O.value*.2,transition:"none"}:void 0,...ie.value?{left:convertToUnit(ie.value.left),right:convertToUnit(ie.value.right),top:convertToUnit(ie.value.top),bottom:convertToUnit(ie.value.bottom)}:void 0,...F.value}));return provideDefaults({VList:{bgColor:"transparent"}}),useRender(()=>{var P,H,q,j;const M=o.image||t.image;return createVNode(Fragment,null,[createVNode(t.tag,mergeProps({ref:B,onMouseenter:()=>C.value=!0,onMouseleave:()=>C.value=!1,class:["v-navigation-drawer",`v-navigation-drawer--${z.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":C.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":U.value,"v-navigation-drawer--active":S.value,"v-navigation-drawer--sticky":Y.value},l.value,d.value,u.value,b.value,_.value],style:[m.value,se.value,J.value,T.value,y.value]},n),{default:()=>[M&&createVNode("div",{key:"image",class:"v-navigation-drawer__img"},[o.image?(P=o.image)==null?void 0:P.call(o,{image:t.image}):createVNode("img",{src:t.image,alt:""},null)]),o.prepend&&createVNode("div",{class:"v-navigation-drawer__prepend"},[(H=o.prepend)==null?void 0:H.call(o)]),createVNode("div",{class:"v-navigation-drawer__content"},[(q=o.default)==null?void 0:q.call(o)]),o.append&&createVNode("div",{class:"v-navigation-drawer__append"},[(j=o.append)==null?void 0:j.call(o)])]}),createVNode(Transition,{name:"fade-transition"},{default:()=>[U.value&&(X.value||S.value)&&!!t.scrim&&createVNode("div",{class:["v-navigation-drawer__scrim",A.backgroundColorClasses.value],style:[I.value,A.backgroundColorStyles.value],onClick:()=>S.value=!1},null)]})])}),{isStuck:k}}}),_sfc_main$1=defineComponent$1({__name:"NavigationPrincipale",setup(t){const e=inject$1("constl"),n=ref();let a;return onMounted(async()=>{a=await e.profil.suivreImage({f:o=>n.value=o})}),onUnmounted(async()=>{a&&await a()}),(o,c)=>(openBlock(),createBlock(VNavigationDrawer,{"expand-on-hover":"",permanent:"",rail:""},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-avatar":"https://randomuser.me/api/portraits/women/85.jpg",title:"Sandra Adams",subtitle:"sandra_a88@gmailcom"})]),_:1}),createVNode(VDivider),createVNode(VList,{density:"compact",class:"align-start",nav:""},{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-folder",title:"My Files",value:"myfiles"}),createVNode(VListItem,{"prepend-icon":"mdi-account-multiple",title:"Shared with me",value:"shared"}),createVNode(VListItem,{"prepend-icon":"mdi-star",title:"Starred",value:"starred"})]),_:1})]),_:1}))}}),VApp$1="",VApp=defineComponent({name:"VApp",props:{...makeLayoutProps({fullHeight:!0}),...makeThemeProps()},setup(t,e){let{slots:n}=e;const a=provideTheme(t),{layoutClasses:o,layoutStyles:c,getLayoutItem:l,items:u,layoutRef:d}=createLayout(t),{rtlClasses:m}=useRtl();return useRender(()=>{var b;return createVNode("div",{ref:d,class:["v-application",a.themeClasses.value,o.value,m.value],style:c.value},[createVNode("div",{class:"v-application__wrap"},[(b=n.default)==null?void 0:b.call(n)])])}),{getLayoutItem:l,items:u,theme:a}}}),VMain$1="",VMain=defineComponent({name:"VMain",props:{scrollable:Boolean,...makeTagProps({tag:"main"})},setup(t,e){let{slots:n}=e;const{mainStyles:a}=useLayout(),{ssrBootStyles:o}=useSsrBoot();return useRender(()=>{var c,l;return createVNode(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable}],style:[a.value,o.value]},{default:()=>[t.scrollable?createVNode("div",{class:"v-main__scroller"},[(c=n.default)==null?void 0:c.call(n)]):(l=n.default)==null?void 0:l.call(n)]})}),{}}}),_hoisted_1=createBaseVNode("p",null," Julien Malard-Adam ",-1),_hoisted_2=createBaseVNode("legend",null,"Test Node.js API",-1),_sfc_main=defineComponent$1({__name:"App",setup(t){const e="0.2.0";return(n,a)=>{const o=resolveComponent("router-view");return openBlock(),createBlock(VApp,null,{default:withCtx(()=>[createVNode(VMain,null,{default:withCtx(()=>[createVNode(_sfc_main$1),createVNode(o),createBaseVNode("p",null," Version: "+toDisplayString$1(unref(e)),1),_hoisted_1,createBaseVNode("fieldset",null,[_hoisted_2,createVNode(_sfc_main$2)])]),_:1})]),_:1})}}}),scriptRel="modulepreload",assetsURL=function(t){return"/iug/"+t},seen={},__vitePreload=function(e,n,a){if(!n||n.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(n.map(c=>{if(c=assetsURL(c),c in seen)return;seen[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!a)for(let b=o.length-1;b>=0;b--){const x=o[b];if(x.href===c&&(!l||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=l?"stylesheet":scriptRel,l||(m.as="script",m.crossOrigin=""),m.href=c,document.head.appendChild(m),l)return new Promise((b,x)=>{m.addEventListener("load",b),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>e())};function __decorate(t,e,n,a){var o=arguments.length,c=o<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,n):a,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(t,e,n,a);else for(var u=t.length-1;u>=0;u--)(l=t[u])&&(c=(o<3?l(c):o>3?l(e,n,c):l(e,n))||c);return o>3&&c&&Object.defineProperty(e,n,c),c}var toStr$a=Object.prototype.toString,isArguments$4=function(e){var n=toStr$a.call(e),a=n==="[object Arguments]";return a||(a=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&toStr$a.call(e.callee)==="[object Function]"),a},implementation$b,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation$b;hasRequiredImplementation=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=isArguments$4,o=Object.prototype.propertyIsEnumerable,c=!o.call({toString:null},"toString"),l=o.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=function(_){var w=_.constructor;return w&&w.prototype===_},m={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},b=function(){if(typeof window>"u")return!1;for(var _ in window)try{if(!m["$"+_]&&e.call(window,_)&&window[_]!==null&&typeof window[_]=="object")try{d(window[_])}catch{return!0}}catch{return!0}return!1}(),x=function(_){if(typeof window>"u"||!b)return d(_);try{return d(_)}catch{return!1}};t=function(w){var S=w!==null&&typeof w=="object",T=n.call(w)==="[object Function]",B=a(w),C=S&&n.call(w)==="[object String]",D=[];if(!S&&!T&&!B)throw new TypeError("Object.keys called on a non-object");var z=l&&T;if(C&&w.length>0&&!e.call(w,0))for(var U=0;U<w.length;++U)D.push(String(U));if(B&&w.length>0)for(var Y=0;Y<w.length;++Y)D.push(String(Y));else for(var X in w)!(z&&X==="prototype")&&e.call(w,X)&&D.push(String(X));if(c)for(var O=x(w),J=0;J<u.length;++J)!(O&&u[J]==="constructor")&&e.call(w,u[J])&&D.push(u[J]);return D}}return implementation$b=t,implementation$b}var slice$2=Array.prototype.slice,isArgs=isArguments$4,origKeys=Object.keys,keysShim=origKeys?function(e){return origKeys(e)}:requireImplementation(),originalKeys=Object.keys;keysShim.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(a){return isArgs(a)?originalKeys(slice$2.call(a)):originalKeys(a)})}else Object.keys=keysShim;return Object.keys||keysShim};var objectKeys$4=keysShim,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),a=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var o=42;e[n]=o;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var c=Object.getOwnPropertySymbols(e);if(c.length!==1||c[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var l=Object.getOwnPropertyDescriptor(e,n);if(l.value!==o||l.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$5=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},ERROR_MESSAGE$1="Function.prototype.bind called on incompatible ",slice$1=Array.prototype.slice,toStr$9=Object.prototype.toString,funcType="[object Function]",implementation$a=function(e){var n=this;if(typeof n!="function"||toStr$9.call(n)!==funcType)throw new TypeError(ERROR_MESSAGE$1+n);for(var a=slice$1.call(arguments,1),o,c=function(){if(this instanceof o){var b=n.apply(this,a.concat(slice$1.call(arguments)));return Object(b)===b?b:this}else return n.apply(e,a.concat(slice$1.call(arguments)))},l=Math.max(0,n.length-a.length),u=[],d=0;d<l;d++)u.push("$"+d);if(o=Function("binder","return function ("+u.join(",")+"){ return binder.apply(this,arguments); }")(c),n.prototype){var m=function(){};m.prototype=n.prototype,o.prototype=new m,m.prototype=null}return o},implementation$9=implementation$a,functionBind=Function.prototype.bind||implementation$9,bind$2=functionBind,src$a=bind$2.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$2=TypeError,getEvalledConstructor=function(t){try{return $Function('"use strict"; return ('+t+").constructor;")()}catch{}},$gOPD$2=Object.getOwnPropertyDescriptor;if($gOPD$2)try{$gOPD$2({},"")}catch{$gOPD$2=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$2?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$2(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols$4=hasSymbols$5(),getProto$2=Object.getPrototypeOf||function(t){return t.__proto__},needsEval={},TypedArray=typeof Uint8Array>"u"?undefined$1:getProto$2(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$4?getProto$2([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$4?getProto$2(getProto$2([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols$4?undefined$1:getProto$2(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols$4?undefined$1:getProto$2(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$4?getProto$2(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$4?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};try{null.error}catch(t){var errorProto=getProto$2(getProto$2(t));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function t(e){var n;if(e==="%AsyncFunction%")n=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")n=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var a=t("%AsyncGeneratorFunction%");a&&(n=a.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(n=getProto$2(o.prototype))}return INTRINSICS[e]=n,n},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$1=functionBind,hasOwn$3=src$a,$concat$1=bind$1.call(Function.call,Array.prototype.concat),$spliceApply=bind$1.call(Function.apply,Array.prototype.splice),$replace$1=bind$1.call(Function.call,String.prototype.replace),$strSlice=bind$1.call(Function.call,String.prototype.slice),$exec$1=bind$1.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var n=$strSlice(e,0,1),a=$strSlice(e,-1);if(n==="%"&&a!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&n!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var o=[];return $replace$1(e,rePropName,function(c,l,u,d){o[o.length]=u?$replace$1(d,reEscapeChar,"$1"):l||c}),o},getBaseIntrinsic=function(e,n){var a=e,o;if(hasOwn$3(LEGACY_ALIASES,a)&&(o=LEGACY_ALIASES[a],a="%"+o[0]+"%"),hasOwn$3(INTRINSICS,a)){var c=INTRINSICS[a];if(c===needsEval&&(c=doEval(a)),typeof c>"u"&&!n)throw new $TypeError$2("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:a,value:c}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,n){if(typeof e!="string"||e.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec$1(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=stringToPath(e),o=a.length>0?a[0]:"",c=getBaseIntrinsic("%"+o+"%",n),l=c.name,u=c.value,d=!1,m=c.alias;m&&(o=m[0],$spliceApply(a,$concat$1([0,1],m)));for(var b=1,x=!0;b<a.length;b+=1){var _=a[b],w=$strSlice(_,0,1),S=$strSlice(_,-1);if((w==='"'||w==="'"||w==="`"||S==='"'||S==="'"||S==="`")&&w!==S)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((_==="constructor"||!x)&&(d=!0),o+="."+_,l="%"+o+"%",hasOwn$3(INTRINSICS,l))u=INTRINSICS[l];else if(u!=null){if(!(_ in u)){if(!n)throw new $TypeError$2("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD$2&&b+1>=a.length){var T=$gOPD$2(u,_);x=!!T,x&&"get"in T&&!("originalValue"in T.get)?u=T.get:u=u[_]}else x=hasOwn$3(u,_),u=u[_];x&&!d&&(INTRINSICS[l]=u)}}return u},GetIntrinsic$8=getIntrinsic,$defineProperty=GetIntrinsic$8("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function(){if($defineProperty)try{return $defineProperty({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,keys$3=objectKeys$4,hasSymbols$3=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",toStr$8=Object.prototype.toString,concat$4=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction$3=function(t){return typeof t=="function"&&toStr$8.call(t)==="[object Function]"},hasPropertyDescriptors=hasPropertyDescriptors_1(),supportsDescriptors$2=origDefineProperty&&hasPropertyDescriptors,defineProperty$2=function(t,e,n,a){e in t&&(!isFunction$3(a)||!a())||(supportsDescriptors$2?origDefineProperty(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},defineProperties$1=function(t,e){var n=arguments.length>2?arguments[2]:{},a=keys$3(e);hasSymbols$3&&(a=concat$4.call(a,Object.getOwnPropertySymbols(e)));for(var o=0;o<a.length;o+=1)defineProperty$2(t,a[o],e[a[o]],n[a[o]])};defineProperties$1.supportsDescriptors=!!supportsDescriptors$2;var defineProperties_1=defineProperties$1,callBindExports={},callBind$5={get exports(){return callBindExports},set exports(t){callBindExports=t}};(function(t){var e=functionBind,n=getIntrinsic,a=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),c=n("%Reflect.apply%",!0)||e.call(o,a),l=n("%Object.getOwnPropertyDescriptor%",!0),u=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(u)try{u({},"a",{value:1})}catch{u=null}t.exports=function(x){var _=c(e,o,arguments);if(l&&u){var w=l(_,"length");w.configurable&&u(_,"length",{value:1+d(0,x.length-(arguments.length-1))})}return _};var m=function(){return c(e,a,arguments)};u?u(t.exports,"apply",{value:m}):t.exports.apply=m})(callBind$5);var GetIntrinsic$7=getIntrinsic,callBind$4=callBindExports,$indexOf$1=callBind$4(GetIntrinsic$7("String.prototype.indexOf")),callBound$c=function(e,n){var a=GetIntrinsic$7(e,!!n);return typeof a=="function"&&$indexOf$1(e,".prototype.")>-1?callBind$4(a):a},objectKeys$3=objectKeys$4,hasSymbols$2=shams$1(),callBound$b=callBound$c,toObject=Object,$push=callBound$b("Array.prototype.push"),$propIsEnumerable=callBound$b("Object.prototype.propertyIsEnumerable"),originalGetSymbols=hasSymbols$2?Object.getOwnPropertySymbols:null,implementation$8=function(e,n){if(e==null)throw new TypeError("target must be an object");var a=toObject(e);if(arguments.length===1)return a;for(var o=1;o<arguments.length;++o){var c=toObject(arguments[o]),l=objectKeys$3(c),u=hasSymbols$2&&(Object.getOwnPropertySymbols||originalGetSymbols);if(u)for(var d=u(c),m=0;m<d.length;++m){var b=d[m];$propIsEnumerable(c,b)&&$push(l,b)}for(var x=0;x<l.length;++x){var _=l[x];if($propIsEnumerable(c,_)){var w=c[_];a[_]=w}}}return a},implementation$7=implementation$8,lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},a=0;a<e.length;++a)n[e[a]]=e[a];var o=Object.assign({},n),c="";for(var l in o)c+=l;return t!==c},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},polyfill$4=function(){return!Object.assign||lacksProperEnumerationOrder()||assignHasPendingExceptions()?implementation$7:Object.assign},define$3=defineProperties_1,getPolyfill$5=polyfill$4,shim$5=function(){var e=getPolyfill$5();return define$3(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},defineProperties=defineProperties_1,callBind$3=callBindExports,implementation$6=implementation$8,getPolyfill$4=polyfill$4,shim$4=shim$5,polyfill$3=callBind$3.apply(getPolyfill$4()),bound=function(e,n){return polyfill$3(Object,arguments)};defineProperties(bound,{getPolyfill:getPolyfill$4,implementation:implementation$6,shim:shim$4});var object_assign=bound,implementationExports={},implementation$5={get exports(){return implementationExports},set exports(t){implementationExports=t}},functionsHaveNames$1=function(){return typeof function(){}.name=="string"},gOPD$4=Object.getOwnPropertyDescriptor;if(gOPD$4)try{gOPD$4([],"length")}catch{gOPD$4=null}functionsHaveNames$1.functionsHaveConfigurableNames=function(){if(!functionsHaveNames$1()||!gOPD$4)return!1;var e=gOPD$4(function(){},"name");return!!e&&!!e.configurable};var $bind=Function.prototype.bind;functionsHaveNames$1.boundFunctionsHaveNames=function(){return functionsHaveNames$1()&&typeof $bind=="function"&&function(){}.bind().name!==""};var functionsHaveNames_1=functionsHaveNames$1;(function(t){var e=functionsHaveNames_1.functionsHaveConfigurableNames(),n=Object,a=TypeError;t.exports=function(){if(this!=null&&this!==n(this))throw new a("RegExp.prototype.flags getter called on non-object");var c="";return this.hasIndices&&(c+="d"),this.global&&(c+="g"),this.ignoreCase&&(c+="i"),this.multiline&&(c+="m"),this.dotAll&&(c+="s"),this.unicode&&(c+="u"),this.sticky&&(c+="y"),c},e&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})})(implementation$5);var implementation$4=implementationExports,supportsDescriptors$1=defineProperties_1.supportsDescriptors,$gOPD$1=Object.getOwnPropertyDescriptor,polyfill$2=function(){if(supportsDescriptors$1&&/a/mig.flags==="gim"){var e=$gOPD$1(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var n="",a={};if(Object.defineProperty(a,"hasIndices",{get:function(){n+="d"}}),Object.defineProperty(a,"sticky",{get:function(){n+="y"}}),n==="dy")return e.get}}return implementation$4},supportsDescriptors=defineProperties_1.supportsDescriptors,getPolyfill$3=polyfill$2,gOPD$3=Object.getOwnPropertyDescriptor,defineProperty$1=Object.defineProperty,TypeErr=TypeError,getProto$1=Object.getPrototypeOf,regex$1=/a/,shim$3=function(){if(!supportsDescriptors||!getProto$1)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=getPolyfill$3(),n=getProto$1(regex$1),a=gOPD$3(n,"flags");return(!a||a.get!==e)&&defineProperty$1(n,"flags",{configurable:!0,enumerable:!1,get:e}),e},define$2=defineProperties_1,callBind$2=callBindExports,implementation$3=implementationExports,getPolyfill$2=polyfill$2,shim$2=shim$3,flagsBound=callBind$2(getPolyfill$2());define$2(flagsBound,{getPolyfill:getPolyfill$2,implementation:implementation$3,shim:shim$2});var regexp_prototype_flags=flagsBound;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof globalThis.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof globalThis.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch{try{return cachedSetTimeout.call(null,t,0)}catch{return cachedSetTimeout.call(this,t,0)}}}function runClearTimeout(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{return cachedClearTimeout(t)}catch{try{return cachedClearTimeout.call(null,t)}catch{return cachedClearTimeout.call(this,t)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(t)}}function nextTick$2(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];queue.push(new Item(t,e)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(t,e){this.fun=t,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform$1="browser",browser$h=!0,env$1={},argv=[],version$l="",versions={},release={},config$1={};function noop$7(){}var on=noop$7,addListener=noop$7,once$4=noop$7,off=noop$7,removeListener=noop$7,removeAllListeners=noop$7,emit=noop$7;function binding(t){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(t){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance$1=globalThis.performance||{},performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return new Date().getTime()};function hrtime(t){var e=performanceNow.call(performance$1)*.001,n=Math.floor(e),a=Math.floor(e%1*1e9);return t&&(n=n-t[0],a=a-t[1],a<0&&(n--,a+=1e9)),[n,a]}var startTime=new Date;function uptime(){var t=new Date,e=t-startTime;return e/1e3}var browser$1$1={nextTick:nextTick$2,title,browser:browser$h,env:env$1,argv,version:version$l,versions,on,addListener,once:once$4,off,removeListener,removeAllListeners,emit,binding,cwd,chdir,umask,hrtime,platform:platform$1,release,config:config$1,uptime},esGetIteratorExports={},esGetIterator={get exports(){return esGetIteratorExports},set exports(t){esGetIteratorExports=t}},hasSymbols$1=shams$1,shams=function(){return hasSymbols$1()&&!!Symbol.toStringTag},hasToStringTag$9=shams(),callBound$a=callBound$c,$toString$4=callBound$a("Object.prototype.toString"),isStandardArguments=function(e){return hasToStringTag$9&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:$toString$4(e)==="[object Arguments]"},isLegacyArguments=function(e){return isStandardArguments(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&$toString$4(e)!=="[object Array]"&&$toString$4(e.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments$3=supportsStandardArguments?isStandardArguments:isLegacyArguments;const net={},__viteBrowserExternal=Object.freeze(Object.defineProperty({__proto__:null,default:net},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(__viteBrowserExternal);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString$1=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice$2=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf$1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO$1=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function addNumericSeparator(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$test.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var a=t<0?-$floor(-t):$floor(t);if(a!==t){var o=String(a),c=$slice$2.call(e,o.length+1);return $replace.call(o,n,"$&_")+"."+$replace.call($replace.call(c,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(e,n,"$&_")}var utilInspect=require$$0$2,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol$2(inspectCustom)?inspectCustom:null,objectInspect=function t(e,n,a,o){var c=n||{};if(has$2(c,"quoteStyle")&&c.quoteStyle!=="single"&&c.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$2(c,"maxStringLength")&&(typeof c.maxStringLength=="number"?c.maxStringLength<0&&c.maxStringLength!==1/0:c.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var l=has$2(c,"customInspect")?c.customInspect:!0;if(typeof l!="boolean"&&l!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$2(c,"indent")&&c.indent!==null&&c.indent!=="	"&&!(parseInt(c.indent,10)===c.indent&&c.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$2(c,"numericSeparator")&&typeof c.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var u=c.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return inspectString(e,c);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var d=String(e);return u?addNumericSeparator(e,d):d}if(typeof e=="bigint"){var m=String(e)+"n";return u?addNumericSeparator(e,m):m}var b=typeof c.depth>"u"?5:c.depth;if(typeof a>"u"&&(a=0),a>=b&&b>0&&typeof e=="object")return isArray$8(e)?"[Array]":"[Object]";var x=getIndent(c,a);if(typeof o>"u")o=[];else if(indexOf$1(o,e)>=0)return"[Circular]";function _(k,y,A){if(y&&(o=$arrSlice.call(o),o.push(y)),A){var I={depth:c.depth};return has$2(c,"quoteStyle")&&(I.quoteStyle=c.quoteStyle),t(k,I,a+1,o)}return t(k,c,a+1,o)}if(typeof e=="function"&&!isRegExp$2(e)){var w=nameOf(e),S=arrObjKeys(e,_);return"[Function"+(w?": "+w:" (anonymous)")+"]"+(S.length>0?" { "+$join.call(S,", ")+" }":"")}if(isSymbol$2(e)){var T=hasShammedSymbols?$replace.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(e);return typeof e=="object"&&!hasShammedSymbols?markBoxed(T):T}if(isElement(e)){for(var B="<"+$toLowerCase.call(String(e.nodeName)),C=e.attributes||[],D=0;D<C.length;D++)B+=" "+C[D].name+"="+wrapQuotes(quote(C[D].value),"double",c);return B+=">",e.childNodes&&e.childNodes.length&&(B+="..."),B+="</"+$toLowerCase.call(String(e.nodeName))+">",B}if(isArray$8(e)){if(e.length===0)return"[]";var z=arrObjKeys(e,_);return x&&!singleLineValues(z)?"["+indentedJoin(z,x)+"]":"[ "+$join.call(z,", ")+" ]"}if(isError(e)){var U=arrObjKeys(e,_);return!("cause"in Error.prototype)&&"cause"in e&&!isEnumerable.call(e,"cause")?"{ ["+String(e)+"] "+$join.call($concat.call("[cause]: "+_(e.cause),U),", ")+" }":U.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$join.call(U,", ")+" }"}if(typeof e=="object"&&l){if(inspectSymbol&&typeof e[inspectSymbol]=="function"&&utilInspect)return utilInspect(e,{depth:b-a});if(l!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(isMap$3(e)){var Y=[];return mapForEach&&mapForEach.call(e,function(k,y){Y.push(_(y,e,!0)+" => "+_(k,e))}),collectionOf("Map",mapSize.call(e),Y,x)}if(isSet$3(e)){var X=[];return setForEach&&setForEach.call(e,function(k){X.push(_(k,e))}),collectionOf("Set",setSize.call(e),X,x)}if(isWeakMap$1(e))return weakCollectionOf("WeakMap");if(isWeakSet$1(e))return weakCollectionOf("WeakSet");if(isWeakRef(e))return weakCollectionOf("WeakRef");if(isNumber$3(e))return markBoxed(_(Number(e)));if(isBigInt$1(e))return markBoxed(_(bigIntValueOf$1.call(e)));if(isBoolean$4(e))return markBoxed(booleanValueOf.call(e));if(isString$5(e))return markBoxed(_(String(e)));if(!isDate$3(e)&&!isRegExp$2(e)){var O=arrObjKeys(e,_),J=gPO$1?gPO$1(e)===Object.prototype:e instanceof Object||e.constructor===Object,Z=e instanceof Object?"":"null prototype",se=!J&&toStringTag&&Object(e)===e&&toStringTag in e?$slice$2.call(toStr$7(e),8,-1):Z?"Object":"",ie=J||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",F=ie+(se||Z?"["+$join.call($concat.call([],se||[],Z||[]),": ")+"] ":"");return O.length===0?F+"{}":x?F+"{"+indentedJoin(O,x)+"}":F+"{ "+$join.call(O,", ")+" }"}return String(e)};function wrapQuotes(t,e,n){var a=(n.quoteStyle||e)==="double"?'"':"'";return a+t+a}function quote(t){return $replace.call(String(t),/"/g,"&quot;")}function isArray$8(t){return toStr$7(t)==="[object Array]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isDate$3(t){return toStr$7(t)==="[object Date]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isRegExp$2(t){return toStr$7(t)==="[object RegExp]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isError(t){return toStr$7(t)==="[object Error]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isString$5(t){return toStr$7(t)==="[object String]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isNumber$3(t){return toStr$7(t)==="[object Number]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isBoolean$4(t){return toStr$7(t)==="[object Boolean]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isSymbol$2(t){if(hasShammedSymbols)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!symToString)return!1;try{return symToString.call(t),!0}catch{}return!1}function isBigInt$1(t){if(!t||typeof t!="object"||!bigIntValueOf$1)return!1;try{return bigIntValueOf$1.call(t),!0}catch{}return!1}var hasOwn$2=Object.prototype.hasOwnProperty||function(t){return t in this};function has$2(t,e){return hasOwn$2.call(t,e)}function toStr$7(t){return objectToString$1.call(t)}function nameOf(t){if(t.name)return t.name;var e=$match.call(functionToString.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function indexOf$1(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1}function isMap$3(t){if(!mapSize||!t||typeof t!="object")return!1;try{mapSize.call(t);try{setSize.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function isWeakMap$1(t){if(!weakMapHas||!t||typeof t!="object")return!1;try{weakMapHas.call(t,weakMapHas);try{weakSetHas.call(t,weakSetHas)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function isWeakRef(t){if(!weakRefDeref||!t||typeof t!="object")return!1;try{return weakRefDeref.call(t),!0}catch{}return!1}function isSet$3(t){if(!setSize||!t||typeof t!="object")return!1;try{setSize.call(t);try{mapSize.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function isWeakSet$1(t){if(!weakSetHas||!t||typeof t!="object")return!1;try{weakSetHas.call(t,weakSetHas);try{weakMapHas.call(t,weakMapHas)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function isElement(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function inspectString(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,a="... "+n+" more character"+(n>1?"s":"");return inspectString($slice$2.call(t,0,e.maxStringLength),e)+a}var o=$replace.call($replace.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(o,"single",e)}function lowbyte(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+$toUpperCase.call(e.toString(16))}function markBoxed(t){return"Object("+t+")"}function weakCollectionOf(t){return t+" { ? }"}function collectionOf(t,e,n,a){var o=a?indentedJoin(n,a):$join.call(n,", ");return t+" ("+e+") {"+o+"}"}function singleLineValues(t){for(var e=0;e<t.length;e++)if(indexOf$1(t[e],`
`)>=0)return!1;return!0}function getIndent(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=$join.call(Array(t.indent+1)," ");else return null;return{base:n,prev:$join.call(Array(e+1),n)}}function indentedJoin(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+$join.call(t,","+n)+`
`+e.prev}function arrObjKeys(t,e){var n=isArray$8(t),a=[];if(n){a.length=t.length;for(var o=0;o<t.length;o++)a[o]=has$2(t,o)?e(t[o],t):""}var c=typeof gOPS=="function"?gOPS(t):[],l;if(hasShammedSymbols){l={};for(var u=0;u<c.length;u++)l["$"+c[u]]=c[u]}for(var d in t)has$2(t,d)&&(n&&String(Number(d))===d&&d<t.length||hasShammedSymbols&&l["$"+d]instanceof Symbol||($test.call(/[^\w$]/,d)?a.push(e(d,t)+": "+e(t[d],t)):a.push(d+": "+e(t[d],t))));if(typeof gOPS=="function")for(var m=0;m<c.length;m++)isEnumerable.call(t,c[m])&&a.push("["+e(c[m])+"]: "+e(t[c[m]],t));return a}var GetIntrinsic$6=getIntrinsic,callBound$9=callBound$c,inspect$2=objectInspect,$TypeError$1=GetIntrinsic$6("%TypeError%"),$WeakMap$1=GetIntrinsic$6("%WeakMap%",!0),$Map$3=GetIntrinsic$6("%Map%",!0),$weakMapGet=callBound$9("WeakMap.prototype.get",!0),$weakMapSet=callBound$9("WeakMap.prototype.set",!0),$weakMapHas=callBound$9("WeakMap.prototype.has",!0),$mapGet$1=callBound$9("Map.prototype.get",!0),$mapSet=callBound$9("Map.prototype.set",!0),$mapHas$5=callBound$9("Map.prototype.has",!0),listGetNode=function(t,e){for(var n=t,a;(a=n.next)!==null;n=a)if(a.key===e)return n.next=a.next,a.next=t.next,t.next=a,a},listGet=function(t,e){var n=listGetNode(t,e);return n&&n.value},listSet=function(t,e,n){var a=listGetNode(t,e);a?a.value=n:t.next={key:e,next:t.next,value:n}},listHas=function(t,e){return!!listGetNode(t,e)},sideChannel=function(){var e,n,a,o={assert:function(c){if(!o.has(c))throw new $TypeError$1("Side channel does not contain "+inspect$2(c))},get:function(c){if($WeakMap$1&&c&&(typeof c=="object"||typeof c=="function")){if(e)return $weakMapGet(e,c)}else if($Map$3){if(n)return $mapGet$1(n,c)}else if(a)return listGet(a,c)},has:function(c){if($WeakMap$1&&c&&(typeof c=="object"||typeof c=="function")){if(e)return $weakMapHas(e,c)}else if($Map$3){if(n)return $mapHas$5(n,c)}else if(a)return listHas(a,c);return!1},set:function(c,l){$WeakMap$1&&c&&(typeof c=="object"||typeof c=="function")?(e||(e=new $WeakMap$1),$weakMapSet(e,c,l)):$Map$3?(n||(n=new $Map$3),$mapSet(n,c,l)):(a||(a={key:{},next:null}),listSet(a,c,l))}};return o},GetIntrinsic$5=getIntrinsic,has$1=src$a,channel=sideChannel(),$TypeError=GetIntrinsic$5("%TypeError%"),SLOT$1={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof e!="string")throw new $TypeError("`slot` must be a string");if(channel.assert(t),!SLOT$1.has(t,e))throw new $TypeError("`slot` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof e!="string")throw new $TypeError("`slot` must be a string");var n=channel.get(t);return n&&n["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof e!="string")throw new $TypeError("`slot` must be a string");var n=channel.get(t);return!!n&&has$1(n,"$"+e)},set:function(t,e,n){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof e!="string")throw new $TypeError("`slot` must be a string");var a=channel.get(t);a||(a={},channel.set(t,a)),a["$"+e]=n}};Object.freeze&&Object.freeze(SLOT$1);var internalSlot=SLOT$1,SLOT=internalSlot,$SyntaxError=SyntaxError,$StopIteration=typeof StopIteration=="object"?StopIteration:null,stopIterationIterator=function(e){if(!$StopIteration)throw new $SyntaxError("this environment lacks StopIteration");SLOT.set(e,"[[Done]]",!1);var n={next:function(){var o=SLOT.get(this,"[[Iterator]]"),c=SLOT.get(o,"[[Done]]");try{return{done:c,value:c?void 0:o.next()}}catch(l){if(SLOT.set(o,"[[Done]]",!0),l!==$StopIteration)throw l;return{done:!0,value:void 0}}}};return SLOT.set(n,"[[Iterator]]",e),n},isarray$2,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray$2;hasRequiredIsarray=1;var t={}.toString;return isarray$2=Array.isArray||function(e){return t.call(e)=="[object Array]"},isarray$2}var strValue=String.prototype.valueOf,tryStringObject=function(e){try{return strValue.call(e),!0}catch{return!1}},toStr$6=Object.prototype.toString,strClass="[object String]",hasToStringTag$8=shams(),isString$4=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:hasToStringTag$8?tryStringObject(e):toStr$6.call(e)===strClass},$Map$2=typeof Map=="function"&&Map.prototype?Map:null,$Set$3=typeof Set=="function"&&Set.prototype?Set:null,exported$2;$Map$2||(exported$2=function(e){return!1});var $mapHas$4=$Map$2?Map.prototype.has:null,$setHas$4=$Set$3?Set.prototype.has:null;!exported$2&&!$mapHas$4&&(exported$2=function(e){return!1});var isMap$2=exported$2||function(e){if(!e||typeof e!="object")return!1;try{if($mapHas$4.call(e),$setHas$4)try{$setHas$4.call(e)}catch{return!0}return e instanceof $Map$2}catch{}return!1},$Map$1=typeof Map=="function"&&Map.prototype?Map:null,$Set$2=typeof Set=="function"&&Set.prototype?Set:null,exported$1;$Set$2||(exported$1=function(e){return!1});var $mapHas$3=$Map$1?Map.prototype.has:null,$setHas$3=$Set$2?Set.prototype.has:null;!exported$1&&!$setHas$3&&(exported$1=function(e){return!1});var isSet$2=exported$1||function(e){if(!e||typeof e!="object")return!1;try{if($setHas$3.call(e),$mapHas$3)try{$mapHas$3.call(e)}catch{return!0}return e instanceof $Set$2}catch{}return!1},isArguments$2=isArguments$3,getStopIterationIterator=stopIterationIterator;if(hasSymbols$5()||shams$1()){var $iterator=Symbol.iterator;esGetIterator.exports=function(e){if(e!=null&&typeof e[$iterator]<"u")return e[$iterator]();if(isArguments$2(e))return Array.prototype[$iterator].call(e)}}else{var isArray$7=requireIsarray(),isString$3=isString$4,GetIntrinsic$4=getIntrinsic,$Map=GetIntrinsic$4("%Map%",!0),$Set$1=GetIntrinsic$4("%Set%",!0),callBound$8=callBound$c,$arrayPush=callBound$8("Array.prototype.push"),$charCodeAt=callBound$8("String.prototype.charCodeAt"),$stringSlice=callBound$8("String.prototype.slice"),advanceStringIndex=function(e,n){var a=e.length;if(n+1>=a)return n+1;var o=$charCodeAt(e,n);if(o<55296||o>56319)return n+1;var c=$charCodeAt(e,n+1);return c<56320||c>57343?n+1:n+2},getArrayIterator=function(e){var n=0;return{next:function(){var o=n>=e.length,c;return o||(c=e[n],n+=1),{done:o,value:c}}}},getNonCollectionIterator=function(e,n){if(isArray$7(e)||isArguments$2(e))return getArrayIterator(e);if(isString$3(e)){var a=0;return{next:function(){var c=advanceStringIndex(e,a),l=$stringSlice(e,a,c);return a=c,{done:c>e.length,value:l}}}}if(n&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!$Map&&!$Set$1)esGetIterator.exports=function(e){if(e!=null)return getNonCollectionIterator(e,!0)};else{var isMap$1=isMap$2,isSet$1=isSet$2,$mapForEach=callBound$8("Map.prototype.forEach",!0),$setForEach=callBound$8("Set.prototype.forEach",!0);if(typeof browser$1$1>"u"||!browser$1$1.versions||!browser$1$1.versions.node)var $mapIterator=callBound$8("Map.prototype.iterator",!0),$setIterator=callBound$8("Set.prototype.iterator",!0);var $mapAtAtIterator=callBound$8("Map.prototype.@@iterator",!0)||callBound$8("Map.prototype._es6-shim iterator_",!0),$setAtAtIterator=callBound$8("Set.prototype.@@iterator",!0)||callBound$8("Set.prototype._es6-shim iterator_",!0),getCollectionIterator=function(e){if(isMap$1(e)){if($mapIterator)return getStopIterationIterator($mapIterator(e));if($mapAtAtIterator)return $mapAtAtIterator(e);if($mapForEach){var n=[];return $mapForEach(e,function(o,c){$arrayPush(n,[c,o])}),getArrayIterator(n)}}if(isSet$1(e)){if($setIterator)return getStopIterationIterator($setIterator(e));if($setAtAtIterator)return $setAtAtIterator(e);if($setForEach){var a=[];return $setForEach(e,function(o){$arrayPush(a,o)}),getArrayIterator(a)}}};esGetIterator.exports=function(e){return getCollectionIterator(e)||getNonCollectionIterator(e)}}}var numberIsNaN=function(t){return t!==t},implementation$2=function(e,n){return e===0&&n===0?1/e===1/n:!!(e===n||numberIsNaN(e)&&numberIsNaN(n))},implementation$1=implementation$2,polyfill$1=function(){return typeof Object.is=="function"?Object.is:implementation$1},getPolyfill$1=polyfill$1,define$1=defineProperties_1,shim$1=function(){var e=getPolyfill$1();return define$1(Object,{is:e},{is:function(){return Object.is!==e}}),e},define=defineProperties_1,callBind$1=callBindExports,implementation=implementation$2,getPolyfill=polyfill$1,shim=shim$1,polyfill=callBind$1(getPolyfill(),Object);define(polyfill,{getPolyfill,implementation,shim});var objectIs=polyfill,toString$c={}.toString,isarray$1=Array.isArray||function(t){return toString$c.call(t)=="[object Array]"},fnToStr$1=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(t){t!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(e){try{var n=fnToStr$1.call(e);return constructorRegex.test(n)}catch{return!1}},tryFunctionObject=function(e){try{return isES6ClassFn(e)?!1:(fnToStr$1.call(e),!0)}catch{return!1}},toStr$5=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$7=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all$2=document.all;toStr$5.call(all$2)===toStr$5.call(document.all)&&(isDDA=function(e){if((isIE68||!e)&&(typeof e>"u"||typeof e=="object"))try{var n=toStr$5.call(e);return(n===ddaClass||n===ddaClass2||n===ddaClass3||n===objectClass)&&e("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{reflectApply(e,null,badArrayLike)}catch(n){if(n!==isCallableMarker)return!1}return!isES6ClassFn(e)&&tryFunctionObject(e)}:function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(hasToStringTag$7)return tryFunctionObject(e);if(isES6ClassFn(e))return!1;var n=toStr$5.call(e);return n!==fnClass&&n!==genClass&&!/^\[object HTML/.test(n)?!1:tryFunctionObject(e)},isCallable=isCallable$1,toStr$4=Object.prototype.toString,hasOwnProperty$4=Object.prototype.hasOwnProperty,forEachArray=function(e,n,a){for(var o=0,c=e.length;o<c;o++)hasOwnProperty$4.call(e,o)&&(a==null?n(e[o],o,e):n.call(a,e[o],o,e))},forEachString=function(e,n,a){for(var o=0,c=e.length;o<c;o++)a==null?n(e.charAt(o),o,e):n.call(a,e.charAt(o),o,e)},forEachObject=function(e,n,a){for(var o in e)hasOwnProperty$4.call(e,o)&&(a==null?n(e[o],o,e):n.call(a,e[o],o,e))},forEach$4=function(e,n,a){if(!isCallable(n))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=a),toStr$4.call(e)==="[object Array]"?forEachArray(e,n,o):typeof e=="string"?forEachString(e,n,o):forEachObject(e,n,o)},forEach_1=forEach$4,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$2=globalThis,availableTypedArrays$2=function(){for(var e=[],n=0;n<possibleNames.length;n++)typeof g$2[possibleNames[n]]=="function"&&(e[e.length]=possibleNames[n]);return e},GetIntrinsic$3=getIntrinsic,$gOPD=GetIntrinsic$3("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd=$gOPD,forEach$3=forEach_1,availableTypedArrays$1=availableTypedArrays$2,callBound$7=callBound$c,$toString$3=callBound$7("Object.prototype.toString"),hasToStringTag$6=shams(),gOPD$2=gopd,g$1=globalThis,typedArrays$1=availableTypedArrays$1(),$indexOf=callBound$7("Array.prototype.indexOf",!0)||function(e,n){for(var a=0;a<e.length;a+=1)if(e[a]===n)return a;return-1},$slice$1=callBound$7("String.prototype.slice"),toStrTags$1={},getPrototypeOf$2=Object.getPrototypeOf;hasToStringTag$6&&gOPD$2&&getPrototypeOf$2&&forEach$3(typedArrays$1,function(t){var e=new g$1[t];if(Symbol.toStringTag in e){var n=getPrototypeOf$2(e),a=gOPD$2(n,Symbol.toStringTag);if(!a){var o=getPrototypeOf$2(n);a=gOPD$2(o,Symbol.toStringTag)}toStrTags$1[t]=a.get}});var tryTypedArrays$1=function(e){var n=!1;return forEach$3(toStrTags$1,function(a,o){if(!n)try{n=a.call(e)===o}catch{}}),n},isTypedArray$3=function(e){if(!e||typeof e!="object")return!1;if(!hasToStringTag$6||!(Symbol.toStringTag in e)){var n=$slice$1($toString$3(e),8,-1);return $indexOf(typedArrays$1,n)>-1}return gOPD$2?tryTypedArrays$1(e):!1},callBind=callBindExports,callBound$6=callBound$c,GetIntrinsic$2=getIntrinsic,isTypedArray$2=isTypedArray$3,$ArrayBuffer=GetIntrinsic$2("ArrayBuffer",!0),$Float32Array=GetIntrinsic$2("Float32Array",!0),$byteLength$1=callBound$6("ArrayBuffer.prototype.byteLength",!0),abSlice=$ArrayBuffer&&!$byteLength$1&&new $ArrayBuffer().slice,$abSlice=abSlice&&callBind(abSlice),isArrayBuffer$2=$byteLength$1||$abSlice?function(e){if(!e||typeof e!="object")return!1;try{return $byteLength$1?$byteLength$1(e):$abSlice(e,0),!0}catch{return!1}}:$Float32Array?function(e){try{return new $Float32Array(e).buffer===e&&!isTypedArray$2(e)}catch{return!1}}:function(e){return!1},getDay=Date.prototype.getDay,tryDateObject=function(e){try{return getDay.call(e),!0}catch{return!1}},toStr$3=Object.prototype.toString,dateClass="[object Date]",hasToStringTag$5=shams(),isDateObject=function(e){return typeof e!="object"||e===null?!1:hasToStringTag$5?tryDateObject(e):toStr$3.call(e)===dateClass},callBound$5=callBound$c,hasToStringTag$4=shams(),has,$exec,isRegexMarker,badStringifier;if(hasToStringTag$4){has=callBound$5("Object.prototype.hasOwnProperty"),$exec=callBound$5("RegExp.prototype.exec"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},typeof Symbol.toPrimitive=="symbol"&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var $toString$2=callBound$5("Object.prototype.toString"),gOPD$1=Object.getOwnPropertyDescriptor,regexClass="[object RegExp]",isRegex$2=hasToStringTag$4?function(e){if(!e||typeof e!="object")return!1;var n=gOPD$1(e,"lastIndex"),a=n&&has(n,"value");if(!a)return!1;try{$exec(e,badStringifier)}catch(o){return o===isRegexMarker}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:$toString$2(e)===regexClass},callBound$4=callBound$c,$byteLength=callBound$4("SharedArrayBuffer.prototype.byteLength",!0),isSharedArrayBuffer$1=$byteLength?function(e){if(!e||typeof e!="object")return!1;try{return $byteLength(e),!0}catch{return!1}}:function(e){return!1},numToStr=Number.prototype.toString,tryNumberObject=function(e){try{return numToStr.call(e),!0}catch{return!1}},toStr$2=Object.prototype.toString,numClass="[object Number]",hasToStringTag$3=shams(),isNumberObject=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:hasToStringTag$3?tryNumberObject(e):toStr$2.call(e)===numClass},callBound$3=callBound$c,$boolToStr=callBound$3("Boolean.prototype.toString"),$toString$1=callBound$3("Object.prototype.toString"),tryBooleanObject=function(e){try{return $boolToStr(e),!0}catch{return!1}},boolClass="[object Boolean]",hasToStringTag$2=shams(),isBooleanObject=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:hasToStringTag$2&&Symbol.toStringTag in e?tryBooleanObject(e):$toString$1(e)===boolClass},isSymbolExports={},isSymbol$1={get exports(){return isSymbolExports},set exports(t){isSymbolExports=t}},toStr$1=Object.prototype.toString,hasSymbols=hasSymbols$5();if(hasSymbols){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/,isSymbolObject=function(e){return typeof e.valueOf()!="symbol"?!1:symStringRegex.test(symToStr.call(e))};isSymbol$1.exports=function(e){if(typeof e=="symbol")return!0;if(toStr$1.call(e)!=="[object Symbol]")return!1;try{return isSymbolObject(e)}catch{return!1}}}else isSymbol$1.exports=function(e){return!1};var isBigintExports={},isBigint={get exports(){return isBigintExports},set exports(t){isBigintExports=t}},$BigInt=typeof BigInt<"u"&&BigInt,hasBigints=function(){return typeof $BigInt=="function"&&typeof BigInt=="function"&&typeof $BigInt(42)=="bigint"&&typeof BigInt(42)=="bigint"},hasBigInts=hasBigints();if(hasBigInts){var bigIntValueOf=BigInt.prototype.valueOf,tryBigInt=function(e){try{return bigIntValueOf.call(e),!0}catch{}return!1};isBigint.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:tryBigInt(e)}}else isBigint.exports=function(e){return!1};var isString$2=isString$4,isNumber$2=isNumberObject,isBoolean$3=isBooleanObject,isSymbol=isSymbolExports,isBigInt=isBigintExports,whichBoxedPrimitive$1=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(isString$2(e))return"String";if(isNumber$2(e))return"Number";if(isBoolean$3(e))return"Boolean";if(isSymbol(e))return"Symbol";if(isBigInt(e))return"BigInt"},$WeakMap=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,$WeakSet$1=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,exported;$WeakMap||(exported=function(e){return!1});var $mapHas$2=$WeakMap?$WeakMap.prototype.has:null,$setHas$2=$WeakSet$1?$WeakSet$1.prototype.has:null;!exported&&!$mapHas$2&&(exported=function(e){return!1});var isWeakmap=exported||function(e){if(!e||typeof e!="object")return!1;try{if($mapHas$2.call(e,$mapHas$2),$setHas$2)try{$setHas$2.call(e,$setHas$2)}catch{return!0}return e instanceof $WeakMap}catch{}return!1},isWeaksetExports={},isWeakset={get exports(){return isWeaksetExports},set exports(t){isWeaksetExports=t}},GetIntrinsic$1=getIntrinsic,callBound$2=callBound$c,$WeakSet=GetIntrinsic$1("%WeakSet%",!0),$setHas$1=callBound$2("WeakSet.prototype.has",!0);if($setHas$1){var $mapHas$1=callBound$2("WeakMap.prototype.has",!0);isWeakset.exports=function(e){if(!e||typeof e!="object")return!1;try{if($setHas$1(e,$setHas$1),$mapHas$1)try{$mapHas$1(e,$mapHas$1)}catch{return!0}return e instanceof $WeakSet}catch{}return!1}}else isWeakset.exports=function(e){return!1};var isMap=isMap$2,isSet=isSet$2,isWeakMap=isWeakmap,isWeakSet=isWeaksetExports,whichCollection$1=function(e){if(e&&typeof e=="object"){if(isMap(e))return"Map";if(isSet(e))return"Set";if(isWeakMap(e))return"WeakMap";if(isWeakSet(e))return"WeakSet"}return!1},forEach$2=forEach_1,availableTypedArrays=availableTypedArrays$2,callBound$1=callBound$c,gOPD=gopd,$toString=callBound$1("Object.prototype.toString"),hasToStringTag$1=shams(),g=globalThis,typedArrays=availableTypedArrays(),$slice=callBound$1("String.prototype.slice"),toStrTags={},getPrototypeOf$1=Object.getPrototypeOf;hasToStringTag$1&&gOPD&&getPrototypeOf$1&&forEach$2(typedArrays,function(t){if(typeof g[t]=="function"){var e=new g[t];if(Symbol.toStringTag in e){var n=getPrototypeOf$1(e),a=gOPD(n,Symbol.toStringTag);if(!a){var o=getPrototypeOf$1(n);a=gOPD(o,Symbol.toStringTag)}toStrTags[t]=a.get}}});var tryTypedArrays=function(e){var n=!1;return forEach$2(toStrTags,function(a,o){if(!n)try{var c=a.call(e);c===o&&(n=c)}catch{}}),n},isTypedArray$1=isTypedArray$3,whichTypedArray$1=function(e){return isTypedArray$1(e)?!hasToStringTag$1||!(Symbol.toStringTag in e)?$slice($toString(e),8,-1):tryTypedArrays(e):!1},assign$4=object_assign,callBound=callBound$c,flags=regexp_prototype_flags,GetIntrinsic=getIntrinsic,getIterator=esGetIteratorExports,getSideChannel=sideChannel,is$2=objectIs,isArguments$1=isArguments$3,isArray$6=isarray$1,isArrayBuffer$1=isArrayBuffer$2,isDate$2=isDateObject,isRegex$1=isRegex$2,isSharedArrayBuffer=isSharedArrayBuffer$1,objectKeys$2=objectKeys$4,whichBoxedPrimitive=whichBoxedPrimitive$1,whichCollection=whichCollection$1,whichTypedArray=whichTypedArray$1,byteLength$1=callBound("ArrayBuffer.prototype.byteLength",!0)||function(e){return e.byteLength},sabByteLength=callBound("SharedArrayBuffer.prototype.byteLength",!0),$getTime=callBound("Date.prototype.getTime"),gPO=Object.getPrototypeOf,$objToString=callBound("Object.prototype.toString"),$Set=GetIntrinsic("%Set%",!0),$mapHas=callBound("Map.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSize=callBound("Map.prototype.size",!0),$setAdd=callBound("Set.prototype.add",!0),$setDelete=callBound("Set.prototype.delete",!0),$setHas=callBound("Set.prototype.has",!0),$setSize=callBound("Set.prototype.size",!0);function setHasEqualElement(t,e,n,a){for(var o=getIterator(t),c;(c=o.next())&&!c.done;)if(internalDeepEqual(e,c.value,n,a))return $setDelete(t,c.value),!0;return!1}function findLooseMatchingPrimitives(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function mapMightHaveLoosePrim(t,e,n,a,o,c){var l=findLooseMatchingPrimitives(n);if(l!=null)return l;var u=$mapGet(e,l),d=assign$4({},o,{strict:!1});return typeof u>"u"&&!$mapHas(e,l)||!internalDeepEqual(a,u,d,c)?!1:!$mapHas(t,l)&&internalDeepEqual(a,u,d,c)}function setMightHaveLoosePrim(t,e,n){var a=findLooseMatchingPrimitives(n);return a??($setHas(e,a)&&!$setHas(t,a))}function mapHasEqualEntry(t,e,n,a,o,c){for(var l=getIterator(t),u,d;(u=l.next())&&!u.done;)if(d=u.value,internalDeepEqual(n,d,o,c)&&internalDeepEqual(a,$mapGet(e,d),o,c))return $setDelete(t,d),!0;return!1}function internalDeepEqual(t,e,n,a){var o=n||{};if(o.strict?is$2(t,e):t===e)return!0;var c=whichBoxedPrimitive(t),l=whichBoxedPrimitive(e);if(c!==l)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return o.strict?is$2(t,e):t==e;var u=a.has(t),d=a.has(e),m;if(u&&d){if(a.get(t)===a.get(e))return!0}else m={};return u||a.set(t,m),d||a.set(e,m),objEquiv$1(t,e,o,a)}function isBuffer$4(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function setEquiv(t,e,n,a){if($setSize(t)!==$setSize(e))return!1;for(var o=getIterator(t),c=getIterator(e),l,u,d;(l=o.next())&&!l.done;)if(l.value&&typeof l.value=="object")d||(d=new $Set),$setAdd(d,l.value);else if(!$setHas(e,l.value)){if(n.strict||!setMightHaveLoosePrim(t,e,l.value))return!1;d||(d=new $Set),$setAdd(d,l.value)}if(d){for(;(u=c.next())&&!u.done;)if(u.value&&typeof u.value=="object"){if(!setHasEqualElement(d,u.value,n.strict,a))return!1}else if(!n.strict&&!$setHas(t,u.value)&&!setHasEqualElement(d,u.value,n.strict,a))return!1;return $setSize(d)===0}return!0}function mapEquiv(t,e,n,a){if($mapSize(t)!==$mapSize(e))return!1;for(var o=getIterator(t),c=getIterator(e),l,u,d,m,b,x;(l=o.next())&&!l.done;)if(m=l.value[0],b=l.value[1],m&&typeof m=="object")d||(d=new $Set),$setAdd(d,m);else if(x=$mapGet(e,m),typeof x>"u"&&!$mapHas(e,m)||!internalDeepEqual(b,x,n,a)){if(n.strict||!mapMightHaveLoosePrim(t,e,m,b,n,a))return!1;d||(d=new $Set),$setAdd(d,m)}if(d){for(;(u=c.next())&&!u.done;)if(m=u.value[0],x=u.value[1],m&&typeof m=="object"){if(!mapHasEqualEntry(d,t,m,x,n,a))return!1}else if(!n.strict&&(!t.has(m)||!internalDeepEqual($mapGet(t,m),x,n,a))&&!mapHasEqualEntry(d,t,m,x,assign$4({},n,{strict:!1}),a))return!1;return $setSize(d)===0}return!0}function objEquiv$1(t,e,n,a){var o,c;if(typeof t!=typeof e||t==null||e==null||$objToString(t)!==$objToString(e)||isArguments$1(t)!==isArguments$1(e))return!1;var l=isArray$6(t),u=isArray$6(e);if(l!==u)return!1;var d=t instanceof Error,m=e instanceof Error;if(d!==m||(d||m)&&(t.name!==e.name||t.message!==e.message))return!1;var b=isRegex$1(t),x=isRegex$1(e);if(b!==x||(b||x)&&(t.source!==e.source||flags(t)!==flags(e)))return!1;var _=isDate$2(t),w=isDate$2(e);if(_!==w||(_||w)&&$getTime(t)!==$getTime(e)||n.strict&&gPO&&gPO(t)!==gPO(e))return!1;var S=whichTypedArray(t),T=whichTypedArray(e);if((S||T)&&S!==T)return!1;var B=isBuffer$4(t),C=isBuffer$4(e);if(B!==C)return!1;if(B||C){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var D=isArrayBuffer$1(t),z=isArrayBuffer$1(e);if(D!==z)return!1;if(D||z)return byteLength$1(t)!==byteLength$1(e)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(t),new Uint8Array(e),n,a);var U=isSharedArrayBuffer(t),Y=isSharedArrayBuffer(e);if(U!==Y)return!1;if(U||Y)return sabByteLength(t)!==sabByteLength(e)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(t),new Uint8Array(e),n,a);if(typeof t!=typeof e)return!1;var X=objectKeys$2(t),O=objectKeys$2(e);if(X.length!==O.length)return!1;for(X.sort(),O.sort(),o=X.length-1;o>=0;o--)if(X[o]!=O[o])return!1;for(o=X.length-1;o>=0;o--)if(c=X[o],!internalDeepEqual(t[c],e[c],n,a))return!1;var J=whichCollection(t),Z=whichCollection(e);return J!==Z?!1:J==="Set"||Z==="Set"?setEquiv(t,e,n,a):J==="Map"?mapEquiv(t,e,n,a):!0}var deepEqual$2=function(e,n,a){return internalDeepEqual(e,n,a,getSideChannel())},cryptoBrowserify={},browserExports$2={},browser$g={get exports(){return browserExports$2},set exports(t){browserExports$2=t}},safeBufferExports={},safeBuffer$1={get exports(){return safeBufferExports},set exports(t){safeBufferExports=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=buffer$3,a=n.Buffer;function o(l,u){for(var d in l)u[d]=l[d]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=c);function c(l,u,d){return a(l,u,d)}c.prototype=Object.create(a.prototype),o(a,c),c.from=function(l,u,d){if(typeof l=="number")throw new TypeError("Argument must not be a number");return a(l,u,d)},c.alloc=function(l,u,d){if(typeof l!="number")throw new TypeError("Argument must be a number");var m=a(l);return u!==void 0?typeof d=="string"?m.fill(u,d):m.fill(u):m.fill(0),m},c.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return a(l)},c.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(l)}})(safeBuffer$1,safeBufferExports);var MAX_BYTES=65536,MAX_UINT32=4294967295;function oldBrowser$1(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Buffer$J=safeBufferExports.Buffer,crypto$7=globalThis.crypto||globalThis.msCrypto;crypto$7&&crypto$7.getRandomValues?browser$g.exports=randomBytes$4:browser$g.exports=oldBrowser$1;function randomBytes$4(t,e){if(t>MAX_UINT32)throw new RangeError("requested too many random bytes");var n=Buffer$J.allocUnsafe(t);if(t>0)if(t>MAX_BYTES)for(var a=0;a<t;a+=MAX_BYTES)crypto$7.getRandomValues(n.slice(a,a+MAX_BYTES));else crypto$7.getRandomValues(n);return typeof e=="function"?browser$1$1.nextTick(function(){e(null,n)}):n}var inherits_browserExports={},inherits_browser$1={get exports(){return inherits_browserExports},set exports(t){inherits_browserExports=t}};typeof Object.create=="function"?inherits_browser$1.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(e,n){if(n){e.super_=n;var a=function(){};a.prototype=n.prototype,e.prototype=new a,e.prototype.constructor=e}};var readableBrowserExports={},readableBrowser={get exports(){return readableBrowserExports},set exports(t){readableBrowserExports=t}},eventsExports={},events$1={get exports(){return eventsExports},set exports(t){eventsExports=t}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(e,n,a){return Function.prototype.apply.call(e,n,a)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}var NumberIsNaN=Number.isNaN||function(e){return e!==e};function EventEmitter$3(){EventEmitter$3.init.call(this)}events$1.exports=EventEmitter$3;var once_1=eventsExports.once=once$3;EventEmitter$3.EventEmitter=EventEmitter$3;EventEmitter$3.prototype._events=void 0;EventEmitter$3.prototype._eventsCount=0;EventEmitter$3.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(EventEmitter$3,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}});EventEmitter$3.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$3.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(t){return t._maxListeners===void 0?EventEmitter$3.defaultMaxListeners:t._maxListeners}EventEmitter$3.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$3.prototype.emit=function(e){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var o=e==="error",c=this._events;if(c!==void 0)o=o&&c.error===void 0;else if(!o)return!1;if(o){var l;if(n.length>0&&(l=n[0]),l instanceof Error)throw l;var u=new Error("Unhandled error."+(l?" ("+l.message+")":""));throw u.context=l,u}var d=c[e];if(d===void 0)return!1;if(typeof d=="function")ReflectApply(d,this,n);else for(var m=d.length,b=arrayClone(d,m),a=0;a<m;++a)ReflectApply(b[a],this,n);return!0};function _addListener(t,e,n,a){var o,c,l;if(checkListener(n),c=t._events,c===void 0?(c=t._events=Object.create(null),t._eventsCount=0):(c.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),c=t._events),l=c[e]),l===void 0)l=c[e]=n,++t._eventsCount;else if(typeof l=="function"?l=c[e]=a?[n,l]:[l,n]:a?l.unshift(n):l.push(n),o=_getMaxListeners(t),o>0&&l.length>o&&!l.warned){l.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=l.length,ProcessEmitWarning(u)}return t}EventEmitter$3.prototype.addListener=function(e,n){return _addListener(this,e,n,!1)};EventEmitter$3.prototype.on=EventEmitter$3.prototype.addListener;EventEmitter$3.prototype.prependListener=function(e,n){return _addListener(this,e,n,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,e,n){var a={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=onceWrapper.bind(a);return o.listener=n,a.wrapFn=o,o}EventEmitter$3.prototype.once=function(e,n){return checkListener(n),this.on(e,_onceWrap(this,e,n)),this};EventEmitter$3.prototype.prependOnceListener=function(e,n){return checkListener(n),this.prependListener(e,_onceWrap(this,e,n)),this};EventEmitter$3.prototype.removeListener=function(e,n){var a,o,c,l,u;if(checkListener(n),o=this._events,o===void 0)return this;if(a=o[e],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,a.listener||n));else if(typeof a!="function"){for(c=-1,l=a.length-1;l>=0;l--)if(a[l]===n||a[l].listener===n){u=a[l].listener,c=l;break}if(c<0)return this;c===0?a.shift():spliceOne(a,c),a.length===1&&(o[e]=a[0]),o.removeListener!==void 0&&this.emit("removeListener",e,u||n)}return this};EventEmitter$3.prototype.off=EventEmitter$3.prototype.removeListener;EventEmitter$3.prototype.removeAllListeners=function(e){var n,a,o;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[e]),this;if(arguments.length===0){var c=Object.keys(a),l;for(o=0;o<c.length;++o)l=c[o],l!=="removeListener"&&this.removeAllListeners(l);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(e,n[o]);return this};function _listeners(t,e,n){var a=t._events;if(a===void 0)return[];var o=a[e];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?unwrapListeners(o):arrayClone(o,o.length)}EventEmitter$3.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$3.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$3.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):listenerCount$1.call(t,e)};EventEmitter$3.prototype.listenerCount=listenerCount$1;function listenerCount$1(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}EventEmitter$3.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(t,e){for(var n=new Array(e),a=0;a<e;++a)n[a]=t[a];return n}function spliceOne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function unwrapListeners(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function once$3(t,e){return new Promise(function(n,a){function o(l){t.removeListener(e,c),a(l)}function c(){typeof t.removeListener=="function"&&t.removeListener("error",o),n([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,c,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(t,o,{once:!0})})}function addErrorHandlerIfEventEmitter(t,e,n){typeof t.on=="function"&&eventTargetAgnosticAddListener(t,"error",e,n)}function eventTargetAgnosticAddListener(t,e,n,a){if(typeof t.on=="function")a.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(c){a.once&&t.removeEventListener(e,o),n(c)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var streamBrowser=eventsExports.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(_,w){var S=Object.keys(_);if(Object.getOwnPropertySymbols){var T=Object.getOwnPropertySymbols(_);w&&(T=T.filter(function(B){return Object.getOwnPropertyDescriptor(_,B).enumerable})),S.push.apply(S,T)}return S}function e(_){for(var w=1;w<arguments.length;w++){var S=arguments[w]!=null?arguments[w]:{};w%2?t(Object(S),!0).forEach(function(T){n(_,T,S[T])}):Object.getOwnPropertyDescriptors?Object.defineProperties(_,Object.getOwnPropertyDescriptors(S)):t(Object(S)).forEach(function(T){Object.defineProperty(_,T,Object.getOwnPropertyDescriptor(S,T))})}return _}function n(_,w,S){return w in _?Object.defineProperty(_,w,{value:S,enumerable:!0,configurable:!0,writable:!0}):_[w]=S,_}function a(_,w){if(!(_ instanceof w))throw new TypeError("Cannot call a class as a function")}function o(_,w){for(var S=0;S<w.length;S++){var T=w[S];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(_,T.key,T)}}function c(_,w,S){return w&&o(_.prototype,w),S&&o(_,S),_}var l=buffer$3,u=l.Buffer,d=require$$0$2,m=d.inspect,b=m&&m.custom||"inspect";function x(_,w,S){u.prototype.copy.call(_,w,S)}return buffer_list=function(){function _(){a(this,_),this.head=null,this.tail=null,this.length=0}return c(_,[{key:"push",value:function(S){var T={data:S,next:null};this.length>0?this.tail.next=T:this.head=T,this.tail=T,++this.length}},{key:"unshift",value:function(S){var T={data:S,next:this.head};this.length===0&&(this.tail=T),this.head=T,++this.length}},{key:"shift",value:function(){if(this.length!==0){var S=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,S}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(S){if(this.length===0)return"";for(var T=this.head,B=""+T.data;T=T.next;)B+=S+T.data;return B}},{key:"concat",value:function(S){if(this.length===0)return u.alloc(0);for(var T=u.allocUnsafe(S>>>0),B=this.head,C=0;B;)x(B.data,T,C),C+=B.data.length,B=B.next;return T}},{key:"consume",value:function(S,T){var B;return S<this.head.data.length?(B=this.head.data.slice(0,S),this.head.data=this.head.data.slice(S)):S===this.head.data.length?B=this.shift():B=T?this._getString(S):this._getBuffer(S),B}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(S){var T=this.head,B=1,C=T.data;for(S-=C.length;T=T.next;){var D=T.data,z=S>D.length?D.length:S;if(z===D.length?C+=D:C+=D.slice(0,S),S-=z,S===0){z===D.length?(++B,T.next?this.head=T.next:this.head=this.tail=null):(this.head=T,T.data=D.slice(z));break}++B}return this.length-=B,C}},{key:"_getBuffer",value:function(S){var T=u.allocUnsafe(S),B=this.head,C=1;for(B.data.copy(T),S-=B.data.length;B=B.next;){var D=B.data,z=S>D.length?D.length:S;if(D.copy(T,T.length-S,0,z),S-=z,S===0){z===D.length?(++C,B.next?this.head=B.next:this.head=this.tail=null):(this.head=B,B.data=D.slice(z));break}++C}return this.length-=C,T}},{key:b,value:function(S,T){return m(this,e({},T,{depth:0,customInspect:!1}))}}]),_}(),buffer_list}function destroy(t,e){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,browser$1$1.nextTick(emitErrorNT,this,t)):browser$1$1.nextTick(emitErrorNT,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(c){!e&&c?n._writableState?n._writableState.errorEmitted?browser$1$1.nextTick(emitCloseNT,n):(n._writableState.errorEmitted=!0,browser$1$1.nextTick(emitErrorAndCloseNT,n,c)):browser$1$1.nextTick(emitErrorAndCloseNT,n,c):e?(browser$1$1.nextTick(emitCloseNT,n),e(c)):browser$1$1.nextTick(emitCloseNT,n)}),this)}function emitErrorAndCloseNT(t,e){emitErrorNT(t,e),emitCloseNT(t)}function emitCloseNT(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(t,e){t.emit("error",e)}function errorOrDestroy(t,e){var n=t._readableState,a=t._writableState;n&&n.autoDestroy||a&&a.autoDestroy?t.destroy(e):t.emit("error",e)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var codes$1={};function createErrorType(t,e,n){n||(n=Error);function a(c,l,u){return typeof e=="string"?e:e(c,l,u)}var o=function(c){_inheritsLoose(l,c);function l(u,d,m){return c.call(this,a(u,d,m))||this}return l}(n);o.prototype.name=n.name,o.prototype.code=t,codes$1[t]=o}function oneOf(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(a){return String(a)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function startsWith(t,e,n){return t.substr(!n||n<0?0:+n,e.length)===e}function endsWith$1(t,e,n){return(n===void 0||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function includes(t,e,n){return typeof n!="number"&&(n=0),n+e.length>t.length?!1:t.indexOf(e,n)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(t,e,n){var a;typeof e=="string"&&startsWith(e,"not ")?(a="must not be",e=e.replace(/^not /,"")):a="must be";var o;if(endsWith$1(t," argument"))o="The ".concat(t," ").concat(a," ").concat(oneOf(e,"type"));else{var c=includes(t,".")?"property":"argument";o='The "'.concat(t,'" ').concat(c," ").concat(a," ").concat(oneOf(e,"type"))}return o+=". Received type ".concat(typeof n),o},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes$1;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function getHighWaterMark(t,e,n,a){var o=highWaterMarkFrom(e,a,n);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var c=a?n:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(c,o)}return Math.floor(o)}return t.objectMode?16:16*1024}var state={getHighWaterMark},browser$f=deprecate$1;function deprecate$1(t,e){if(config("noDeprecation"))return t;var n=!1;function a(){if(!n){if(config("throwDeprecation"))throw new Error(e);config("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}return a}function config(t){try{if(!globalThis.localStorage)return!1}catch{return!1}var e=globalThis.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=J;function t(ce){var fe=this;this.next=null,this.entry=null,this.finish=function(){Q(fe,ce)}}var e;J.WritableState=X;var n={deprecate:browser$f},a=streamBrowser,o=buffer$3.Buffer,c=globalThis.Uint8Array||function(){};function l(ce){return o.from(ce)}function u(ce){return o.isBuffer(ce)||ce instanceof c}var d=destroy_1,m=state,b=m.getHighWaterMark,x=errorsBrowser.codes,_=x.ERR_INVALID_ARG_TYPE,w=x.ERR_METHOD_NOT_IMPLEMENTED,S=x.ERR_MULTIPLE_CALLBACK,T=x.ERR_STREAM_CANNOT_PIPE,B=x.ERR_STREAM_DESTROYED,C=x.ERR_STREAM_NULL_VALUES,D=x.ERR_STREAM_WRITE_AFTER_END,z=x.ERR_UNKNOWN_ENCODING,U=d.errorOrDestroy;inherits_browserExports(J,a);function Y(){}function X(ce,fe,oe){e=e||require_stream_duplex(),ce=ce||{},typeof oe!="boolean"&&(oe=fe instanceof e),this.objectMode=!!ce.objectMode,oe&&(this.objectMode=this.objectMode||!!ce.writableObjectMode),this.highWaterMark=b(this,ce,"writableHighWaterMark",oe),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var de=ce.decodeStrings===!1;this.decodeStrings=!de,this.defaultEncoding=ce.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ae){I(fe,ae)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=ce.emitClose!==!1,this.autoDestroy=!!ce.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}X.prototype.getBuffer=function(){for(var fe=this.bufferedRequest,oe=[];fe;)oe.push(fe),fe=fe.next;return oe},function(){try{Object.defineProperty(X.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var O;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(O=Function.prototype[Symbol.hasInstance],Object.defineProperty(J,Symbol.hasInstance,{value:function(fe){return O.call(this,fe)?!0:this!==J?!1:fe&&fe._writableState instanceof X}})):O=function(fe){return fe instanceof this};function J(ce){e=e||require_stream_duplex();var fe=this instanceof e;if(!fe&&!O.call(J,this))return new J(ce);this._writableState=new X(ce,this,fe),this.writable=!0,ce&&(typeof ce.write=="function"&&(this._write=ce.write),typeof ce.writev=="function"&&(this._writev=ce.writev),typeof ce.destroy=="function"&&(this._destroy=ce.destroy),typeof ce.final=="function"&&(this._final=ce.final)),a.call(this)}J.prototype.pipe=function(){U(this,new T)};function Z(ce,fe){var oe=new D;U(ce,oe),browser$1$1.nextTick(fe,oe)}function se(ce,fe,oe,de){var ae;return oe===null?ae=new C:typeof oe!="string"&&!fe.objectMode&&(ae=new _("chunk",["string","Buffer"],oe)),ae?(U(ce,ae),browser$1$1.nextTick(de,ae),!1):!0}J.prototype.write=function(ce,fe,oe){var de=this._writableState,ae=!1,he=!de.objectMode&&u(ce);return he&&!o.isBuffer(ce)&&(ce=l(ce)),typeof fe=="function"&&(oe=fe,fe=null),he?fe="buffer":fe||(fe=de.defaultEncoding),typeof oe!="function"&&(oe=Y),de.ending?Z(this,oe):(he||se(this,de,ce,oe))&&(de.pendingcb++,ae=F(this,de,he,ce,fe,oe)),ae},J.prototype.cork=function(){this._writableState.corked++},J.prototype.uncork=function(){var ce=this._writableState;ce.corked&&(ce.corked--,!ce.writing&&!ce.corked&&!ce.bufferProcessing&&ce.bufferedRequest&&q(this,ce))},J.prototype.setDefaultEncoding=function(fe){if(typeof fe=="string"&&(fe=fe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((fe+"").toLowerCase())>-1))throw new z(fe);return this._writableState.defaultEncoding=fe,this},Object.defineProperty(J.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ie(ce,fe,oe){return!ce.objectMode&&ce.decodeStrings!==!1&&typeof fe=="string"&&(fe=o.from(fe,oe)),fe}Object.defineProperty(J.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function F(ce,fe,oe,de,ae,he){if(!oe){var te=ie(fe,de,ae);de!==te&&(oe=!0,ae="buffer",de=te)}var pe=fe.objectMode?1:de.length;fe.length+=pe;var ee=fe.length<fe.highWaterMark;if(ee||(fe.needDrain=!0),fe.writing||fe.corked){var ge=fe.lastBufferedRequest;fe.lastBufferedRequest={chunk:de,encoding:ae,isBuf:oe,callback:he,next:null},ge?ge.next=fe.lastBufferedRequest:fe.bufferedRequest=fe.lastBufferedRequest,fe.bufferedRequestCount+=1}else k(ce,fe,!1,pe,de,ae,he);return ee}function k(ce,fe,oe,de,ae,he,te){fe.writelen=de,fe.writecb=te,fe.writing=!0,fe.sync=!0,fe.destroyed?fe.onwrite(new B("write")):oe?ce._writev(ae,fe.onwrite):ce._write(ae,he,fe.onwrite),fe.sync=!1}function y(ce,fe,oe,de,ae){--fe.pendingcb,oe?(browser$1$1.nextTick(ae,de),browser$1$1.nextTick(L,ce,fe),ce._writableState.errorEmitted=!0,U(ce,de)):(ae(de),ce._writableState.errorEmitted=!0,U(ce,de),L(ce,fe))}function A(ce){ce.writing=!1,ce.writecb=null,ce.length-=ce.writelen,ce.writelen=0}function I(ce,fe){var oe=ce._writableState,de=oe.sync,ae=oe.writecb;if(typeof ae!="function")throw new S;if(A(oe),fe)y(ce,oe,de,fe,ae);else{var he=j(oe)||ce.destroyed;!he&&!oe.corked&&!oe.bufferProcessing&&oe.bufferedRequest&&q(ce,oe),de?browser$1$1.nextTick(P,ce,oe,he,ae):P(ce,oe,he,ae)}}function P(ce,fe,oe,de){oe||H(ce,fe),fe.pendingcb--,de(),L(ce,fe)}function H(ce,fe){fe.length===0&&fe.needDrain&&(fe.needDrain=!1,ce.emit("drain"))}function q(ce,fe){fe.bufferProcessing=!0;var oe=fe.bufferedRequest;if(ce._writev&&oe&&oe.next){var de=fe.bufferedRequestCount,ae=new Array(de),he=fe.corkedRequestsFree;he.entry=oe;for(var te=0,pe=!0;oe;)ae[te]=oe,oe.isBuf||(pe=!1),oe=oe.next,te+=1;ae.allBuffers=pe,k(ce,fe,!0,fe.length,ae,"",he.finish),fe.pendingcb++,fe.lastBufferedRequest=null,he.next?(fe.corkedRequestsFree=he.next,he.next=null):fe.corkedRequestsFree=new t(fe),fe.bufferedRequestCount=0}else{for(;oe;){var ee=oe.chunk,ge=oe.encoding,Ee=oe.callback,be=fe.objectMode?1:ee.length;if(k(ce,fe,!1,be,ee,ge,Ee),oe=oe.next,fe.bufferedRequestCount--,fe.writing)break}oe===null&&(fe.lastBufferedRequest=null)}fe.bufferedRequest=oe,fe.bufferProcessing=!1}J.prototype._write=function(ce,fe,oe){oe(new w("_write()"))},J.prototype._writev=null,J.prototype.end=function(ce,fe,oe){var de=this._writableState;return typeof ce=="function"?(oe=ce,ce=null,fe=null):typeof fe=="function"&&(oe=fe,fe=null),ce!=null&&this.write(ce,fe),de.corked&&(de.corked=1,this.uncork()),de.ending||le(this,de,oe),this},Object.defineProperty(J.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function j(ce){return ce.ending&&ce.length===0&&ce.bufferedRequest===null&&!ce.finished&&!ce.writing}function M(ce,fe){ce._final(function(oe){fe.pendingcb--,oe&&U(ce,oe),fe.prefinished=!0,ce.emit("prefinish"),L(ce,fe)})}function E(ce,fe){!fe.prefinished&&!fe.finalCalled&&(typeof ce._final=="function"&&!fe.destroyed?(fe.pendingcb++,fe.finalCalled=!0,browser$1$1.nextTick(M,ce,fe)):(fe.prefinished=!0,ce.emit("prefinish")))}function L(ce,fe){var oe=j(fe);if(oe&&(E(ce,fe),fe.pendingcb===0&&(fe.finished=!0,ce.emit("finish"),fe.autoDestroy))){var de=ce._readableState;(!de||de.autoDestroy&&de.endEmitted)&&ce.destroy()}return oe}function le(ce,fe,oe){fe.ending=!0,L(ce,fe),oe&&(fe.finished?browser$1$1.nextTick(oe):ce.once("finish",oe)),fe.ended=!0,ce.writable=!1}function Q(ce,fe,oe){var de=ce.entry;for(ce.entry=null;de;){var ae=de.callback;fe.pendingcb--,ae(oe),de=de.next}fe.corkedRequestsFree.next=ce}return Object.defineProperty(J.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(fe){this._writableState&&(this._writableState.destroyed=fe)}}),J.prototype.destroy=d.destroy,J.prototype._undestroy=d.undestroy,J.prototype._destroy=function(ce,fe){fe(ce)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=Object.keys||function(m){var b=[];for(var x in m)b.push(x);return b};_stream_duplex=l;var e=require_stream_readable(),n=require_stream_writable();inherits_browserExports(l,e);for(var a=t(n.prototype),o=0;o<a.length;o++){var c=a[o];l.prototype[c]||(l.prototype[c]=n.prototype[c])}function l(m){if(!(this instanceof l))return new l(m);e.call(this,m),n.call(this,m),this.allowHalfOpen=!0,m&&(m.readable===!1&&(this.readable=!1),m.writable===!1&&(this.writable=!1),m.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",u)))}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function u(){this._writableState.ended||browser$1$1.nextTick(d,this)}function d(m){m.end()}return Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),_stream_duplex}var string_decoder={},Buffer$I=safeBufferExports.Buffer,isEncoding=Buffer$I.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function _normalizeEncoding(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function normalizeEncoding(t){var e=_normalizeEncoding(t);if(typeof e!="string"&&(Buffer$I.isEncoding===isEncoding||!isEncoding(t)))throw new Error("Unknown encoding: "+t);return e||t}var StringDecoder_1=string_decoder.StringDecoder=StringDecoder$1;function StringDecoder$1(t){this.encoding=normalizeEncoding(t);var e;switch(this.encoding){case"utf16le":this.text=utf16Text,this.end=utf16End,e=4;break;case"utf8":this.fillLast=utf8FillLast,e=4;break;case"base64":this.text=base64Text,this.end=base64End,e=3;break;default:this.write=simpleWrite,this.end=simpleEnd;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Buffer$I.allocUnsafe(e)}StringDecoder$1.prototype.write=function(t){if(t.length===0)return"";var e,n;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""};StringDecoder$1.prototype.end=utf8End;StringDecoder$1.prototype.text=utf8Text;StringDecoder$1.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function utf8CheckByte(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function utf8CheckIncomplete(t,e,n){var a=e.length-1;if(a<n)return 0;var o=utf8CheckByte(e[a]);return o>=0?(o>0&&(t.lastNeed=o-1),o):--a<n||o===-2?0:(o=utf8CheckByte(e[a]),o>=0?(o>0&&(t.lastNeed=o-2),o):--a<n||o===-2?0:(o=utf8CheckByte(e[a]),o>=0?(o>0&&(o===2?o=0:t.lastNeed=o-3),o):0))}function utf8CheckExtraBytes(t,e,n){if((e[0]&192)!==128)return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"�"}}function utf8FillLast(t){var e=this.lastTotal-this.lastNeed,n=utf8CheckExtraBytes(this,t);if(n!==void 0)return n;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function utf8Text(t,e){var n=utf8CheckIncomplete(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var a=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,a),t.toString("utf8",e,a)}function utf8End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function utf16Text(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var a=n.charCodeAt(n.length-1);if(a>=55296&&a<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function utf16End(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function base64Text(t,e){var n=(t.length-e)%3;return n===0?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,n===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function base64End(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function simpleWrite(t){return t.toString(this.encoding)}function simpleEnd(t){return t&&t.length?this.write(t):""}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$2(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t.apply(this,a)}}}function noop$6(){}function isRequest$1(t){return t.setHeader&&typeof t.abort=="function"}function eos$1(t,e,n){if(typeof e=="function")return eos$1(t,null,e);e||(e={}),n=once$2(n||noop$6);var a=e.readable||e.readable!==!1&&t.readable,o=e.writable||e.writable!==!1&&t.writable,c=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){o=!1,l=!0,a||n.call(t)},d=t._readableState&&t._readableState.endEmitted,m=function(){a=!1,d=!0,o||n.call(t)},b=function(S){n.call(t,S)},x=function(){var S;if(a&&!d)return(!t._readableState||!t._readableState.ended)&&(S=new ERR_STREAM_PREMATURE_CLOSE),n.call(t,S);if(o&&!l)return(!t._writableState||!t._writableState.ended)&&(S=new ERR_STREAM_PREMATURE_CLOSE),n.call(t,S)},_=function(){t.req.on("finish",u)};return isRequest$1(t)?(t.on("complete",u),t.on("abort",x),t.req?_():t.on("request",_)):o&&!t._writableState&&(t.on("end",c),t.on("close",c)),t.on("end",m),t.on("finish",u),e.error!==!1&&t.on("error",b),t.on("close",x),function(){t.removeListener("complete",u),t.removeListener("abort",x),t.removeListener("request",_),t.req&&t.req.removeListener("finish",u),t.removeListener("end",c),t.removeListener("close",c),t.removeListener("finish",u),t.removeListener("end",m),t.removeListener("error",b),t.removeListener("close",x)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(C,D,z){return D in C?Object.defineProperty(C,D,{value:z,enumerable:!0,configurable:!0,writable:!0}):C[D]=z,C}var n=endOfStream,a=Symbol("lastResolve"),o=Symbol("lastReject"),c=Symbol("error"),l=Symbol("ended"),u=Symbol("lastPromise"),d=Symbol("handlePromise"),m=Symbol("stream");function b(C,D){return{value:C,done:D}}function x(C){var D=C[a];if(D!==null){var z=C[m].read();z!==null&&(C[u]=null,C[a]=null,C[o]=null,D(b(z,!1)))}}function _(C){browser$1$1.nextTick(x,C)}function w(C,D){return function(z,U){C.then(function(){if(D[l]){z(b(void 0,!0));return}D[d](z,U)},U)}}var S=Object.getPrototypeOf(function(){}),T=Object.setPrototypeOf((t={get stream(){return this[m]},next:function(){var D=this,z=this[c];if(z!==null)return Promise.reject(z);if(this[l])return Promise.resolve(b(void 0,!0));if(this[m].destroyed)return new Promise(function(O,J){browser$1$1.nextTick(function(){D[c]?J(D[c]):O(b(void 0,!0))})});var U=this[u],Y;if(U)Y=new Promise(w(U,this));else{var X=this[m].read();if(X!==null)return Promise.resolve(b(X,!1));Y=new Promise(this[d])}return this[u]=Y,Y}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var D=this;return new Promise(function(z,U){D[m].destroy(null,function(Y){if(Y){U(Y);return}z(b(void 0,!0))})})}),t),S),B=function(D){var z,U=Object.create(T,(z={},e(z,m,{value:D,writable:!0}),e(z,a,{value:null,writable:!0}),e(z,o,{value:null,writable:!0}),e(z,c,{value:null,writable:!0}),e(z,l,{value:D._readableState.endEmitted,writable:!0}),e(z,d,{value:function(X,O){var J=U[m].read();J?(U[u]=null,U[a]=null,U[o]=null,X(b(J,!1))):(U[a]=X,U[o]=O)},writable:!0}),z));return U[u]=null,n(D,function(Y){if(Y&&Y.code!=="ERR_STREAM_PREMATURE_CLOSE"){var X=U[o];X!==null&&(U[u]=null,U[a]=null,U[o]=null,X(Y)),U[c]=Y;return}var O=U[a];O!==null&&(U[u]=null,U[a]=null,U[o]=null,O(b(void 0,!0))),U[l]=!0}),D.on("readable",_.bind(null,U)),U};return async_iterator=B,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=Z;var t;Z.ReadableState=J,eventsExports.EventEmitter;var e=function(te,pe){return te.listeners(pe).length},n=streamBrowser,a=buffer$3.Buffer,o=globalThis.Uint8Array||function(){};function c(he){return a.from(he)}function l(he){return a.isBuffer(he)||he instanceof o}var u=require$$0$2,d;u&&u.debuglog?d=u.debuglog("stream"):d=function(){};var m=requireBuffer_list(),b=destroy_1,x=state,_=x.getHighWaterMark,w=errorsBrowser.codes,S=w.ERR_INVALID_ARG_TYPE,T=w.ERR_STREAM_PUSH_AFTER_EOF,B=w.ERR_METHOD_NOT_IMPLEMENTED,C=w.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,D,z,U;inherits_browserExports(Z,n);var Y=b.errorOrDestroy,X=["error","close","destroy","pause","resume"];function O(he,te,pe){if(typeof he.prependListener=="function")return he.prependListener(te,pe);!he._events||!he._events[te]?he.on(te,pe):Array.isArray(he._events[te])?he._events[te].unshift(pe):he._events[te]=[pe,he._events[te]]}function J(he,te,pe){t=t||require_stream_duplex(),he=he||{},typeof pe!="boolean"&&(pe=te instanceof t),this.objectMode=!!he.objectMode,pe&&(this.objectMode=this.objectMode||!!he.readableObjectMode),this.highWaterMark=_(this,he,"readableHighWaterMark",pe),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=he.emitClose!==!1,this.autoDestroy=!!he.autoDestroy,this.destroyed=!1,this.defaultEncoding=he.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,he.encoding&&(D||(D=string_decoder.StringDecoder),this.decoder=new D(he.encoding),this.encoding=he.encoding)}function Z(he){if(t=t||require_stream_duplex(),!(this instanceof Z))return new Z(he);var te=this instanceof t;this._readableState=new J(he,this,te),this.readable=!0,he&&(typeof he.read=="function"&&(this._read=he.read),typeof he.destroy=="function"&&(this._destroy=he.destroy)),n.call(this)}Object.defineProperty(Z.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(te){this._readableState&&(this._readableState.destroyed=te)}}),Z.prototype.destroy=b.destroy,Z.prototype._undestroy=b.undestroy,Z.prototype._destroy=function(he,te){te(he)},Z.prototype.push=function(he,te){var pe=this._readableState,ee;return pe.objectMode?ee=!0:typeof he=="string"&&(te=te||pe.defaultEncoding,te!==pe.encoding&&(he=a.from(he,te),te=""),ee=!0),se(this,he,te,!1,ee)},Z.prototype.unshift=function(he){return se(this,he,null,!0,!1)};function se(he,te,pe,ee,ge){d("readableAddChunk",te);var Ee=he._readableState;if(te===null)Ee.reading=!1,I(he,Ee);else{var be;if(ge||(be=F(Ee,te)),be)Y(he,be);else if(Ee.objectMode||te&&te.length>0)if(typeof te!="string"&&!Ee.objectMode&&Object.getPrototypeOf(te)!==a.prototype&&(te=c(te)),ee)Ee.endEmitted?Y(he,new C):ie(he,Ee,te,!0);else if(Ee.ended)Y(he,new T);else{if(Ee.destroyed)return!1;Ee.reading=!1,Ee.decoder&&!pe?(te=Ee.decoder.write(te),Ee.objectMode||te.length!==0?ie(he,Ee,te,!1):q(he,Ee)):ie(he,Ee,te,!1)}else ee||(Ee.reading=!1,q(he,Ee))}return!Ee.ended&&(Ee.length<Ee.highWaterMark||Ee.length===0)}function ie(he,te,pe,ee){te.flowing&&te.length===0&&!te.sync?(te.awaitDrain=0,he.emit("data",pe)):(te.length+=te.objectMode?1:pe.length,ee?te.buffer.unshift(pe):te.buffer.push(pe),te.needReadable&&P(he)),q(he,te)}function F(he,te){var pe;return!l(te)&&typeof te!="string"&&te!==void 0&&!he.objectMode&&(pe=new S("chunk",["string","Buffer","Uint8Array"],te)),pe}Z.prototype.isPaused=function(){return this._readableState.flowing===!1},Z.prototype.setEncoding=function(he){D||(D=string_decoder.StringDecoder);var te=new D(he);this._readableState.decoder=te,this._readableState.encoding=this._readableState.decoder.encoding;for(var pe=this._readableState.buffer.head,ee="";pe!==null;)ee+=te.write(pe.data),pe=pe.next;return this._readableState.buffer.clear(),ee!==""&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this};var k=1073741824;function y(he){return he>=k?he=k:(he--,he|=he>>>1,he|=he>>>2,he|=he>>>4,he|=he>>>8,he|=he>>>16,he++),he}function A(he,te){return he<=0||te.length===0&&te.ended?0:te.objectMode?1:he!==he?te.flowing&&te.length?te.buffer.head.data.length:te.length:(he>te.highWaterMark&&(te.highWaterMark=y(he)),he<=te.length?he:te.ended?te.length:(te.needReadable=!0,0))}Z.prototype.read=function(he){d("read",he),he=parseInt(he,10);var te=this._readableState,pe=he;if(he!==0&&(te.emittedReadable=!1),he===0&&te.needReadable&&((te.highWaterMark!==0?te.length>=te.highWaterMark:te.length>0)||te.ended))return d("read: emitReadable",te.length,te.ended),te.length===0&&te.ended?oe(this):P(this),null;if(he=A(he,te),he===0&&te.ended)return te.length===0&&oe(this),null;var ee=te.needReadable;d("need readable",ee),(te.length===0||te.length-he<te.highWaterMark)&&(ee=!0,d("length less than watermark",ee)),te.ended||te.reading?(ee=!1,d("reading or ended",ee)):ee&&(d("do read"),te.reading=!0,te.sync=!0,te.length===0&&(te.needReadable=!0),this._read(te.highWaterMark),te.sync=!1,te.reading||(he=A(pe,te)));var ge;return he>0?ge=fe(he,te):ge=null,ge===null?(te.needReadable=te.length<=te.highWaterMark,he=0):(te.length-=he,te.awaitDrain=0),te.length===0&&(te.ended||(te.needReadable=!0),pe!==he&&te.ended&&oe(this)),ge!==null&&this.emit("data",ge),ge};function I(he,te){if(d("onEofChunk"),!te.ended){if(te.decoder){var pe=te.decoder.end();pe&&pe.length&&(te.buffer.push(pe),te.length+=te.objectMode?1:pe.length)}te.ended=!0,te.sync?P(he):(te.needReadable=!1,te.emittedReadable||(te.emittedReadable=!0,H(he)))}}function P(he){var te=he._readableState;d("emitReadable",te.needReadable,te.emittedReadable),te.needReadable=!1,te.emittedReadable||(d("emitReadable",te.flowing),te.emittedReadable=!0,browser$1$1.nextTick(H,he))}function H(he){var te=he._readableState;d("emitReadable_",te.destroyed,te.length,te.ended),!te.destroyed&&(te.length||te.ended)&&(he.emit("readable"),te.emittedReadable=!1),te.needReadable=!te.flowing&&!te.ended&&te.length<=te.highWaterMark,ce(he)}function q(he,te){te.readingMore||(te.readingMore=!0,browser$1$1.nextTick(j,he,te))}function j(he,te){for(;!te.reading&&!te.ended&&(te.length<te.highWaterMark||te.flowing&&te.length===0);){var pe=te.length;if(d("maybeReadMore read 0"),he.read(0),pe===te.length)break}te.readingMore=!1}Z.prototype._read=function(he){Y(this,new B("_read()"))},Z.prototype.pipe=function(he,te){var pe=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=he;break;case 1:ee.pipes=[ee.pipes,he];break;default:ee.pipes.push(he);break}ee.pipesCount+=1,d("pipe count=%d opts=%j",ee.pipesCount,te);var ge=(!te||te.end!==!1)&&he!==browser$1$1.stdout&&he!==browser$1$1.stderr,Ee=ge?xe:Pe;ee.endEmitted?browser$1$1.nextTick(Ee):pe.once("end",Ee),he.on("unpipe",be);function be(me,ne){d("onunpipe"),me===pe&&ne&&ne.hasUnpiped===!1&&(ne.hasUnpiped=!0,ke())}function xe(){d("onend"),he.end()}var ve=M(pe);he.on("drain",ve);var Se=!1;function ke(){d("cleanup"),he.removeListener("close",Le),he.removeListener("finish",je),he.removeListener("drain",ve),he.removeListener("error",Re),he.removeListener("unpipe",be),pe.removeListener("end",xe),pe.removeListener("end",Pe),pe.removeListener("data",Ce),Se=!0,ee.awaitDrain&&(!he._writableState||he._writableState.needDrain)&&ve()}pe.on("data",Ce);function Ce(me){d("ondata");var ne=he.write(me);d("dest.write",ne),ne===!1&&((ee.pipesCount===1&&ee.pipes===he||ee.pipesCount>1&&ae(ee.pipes,he)!==-1)&&!Se&&(d("false write response, pause",ee.awaitDrain),ee.awaitDrain++),pe.pause())}function Re(me){d("onerror",me),Pe(),he.removeListener("error",Re),e(he,"error")===0&&Y(he,me)}O(he,"error",Re);function Le(){he.removeListener("finish",je),Pe()}he.once("close",Le);function je(){d("onfinish"),he.removeListener("close",Le),Pe()}he.once("finish",je);function Pe(){d("unpipe"),pe.unpipe(he)}return he.emit("pipe",pe),ee.flowing||(d("pipe resume"),pe.resume()),he};function M(he){return function(){var pe=he._readableState;d("pipeOnDrain",pe.awaitDrain),pe.awaitDrain&&pe.awaitDrain--,pe.awaitDrain===0&&e(he,"data")&&(pe.flowing=!0,ce(he))}}Z.prototype.unpipe=function(he){var te=this._readableState,pe={hasUnpiped:!1};if(te.pipesCount===0)return this;if(te.pipesCount===1)return he&&he!==te.pipes?this:(he||(he=te.pipes),te.pipes=null,te.pipesCount=0,te.flowing=!1,he&&he.emit("unpipe",this,pe),this);if(!he){var ee=te.pipes,ge=te.pipesCount;te.pipes=null,te.pipesCount=0,te.flowing=!1;for(var Ee=0;Ee<ge;Ee++)ee[Ee].emit("unpipe",this,{hasUnpiped:!1});return this}var be=ae(te.pipes,he);return be===-1?this:(te.pipes.splice(be,1),te.pipesCount-=1,te.pipesCount===1&&(te.pipes=te.pipes[0]),he.emit("unpipe",this,pe),this)},Z.prototype.on=function(he,te){var pe=n.prototype.on.call(this,he,te),ee=this._readableState;return he==="data"?(ee.readableListening=this.listenerCount("readable")>0,ee.flowing!==!1&&this.resume()):he==="readable"&&!ee.endEmitted&&!ee.readableListening&&(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,d("on readable",ee.length,ee.reading),ee.length?P(this):ee.reading||browser$1$1.nextTick(L,this)),pe},Z.prototype.addListener=Z.prototype.on,Z.prototype.removeListener=function(he,te){var pe=n.prototype.removeListener.call(this,he,te);return he==="readable"&&browser$1$1.nextTick(E,this),pe},Z.prototype.removeAllListeners=function(he){var te=n.prototype.removeAllListeners.apply(this,arguments);return(he==="readable"||he===void 0)&&browser$1$1.nextTick(E,this),te};function E(he){var te=he._readableState;te.readableListening=he.listenerCount("readable")>0,te.resumeScheduled&&!te.paused?te.flowing=!0:he.listenerCount("data")>0&&he.resume()}function L(he){d("readable nexttick read 0"),he.read(0)}Z.prototype.resume=function(){var he=this._readableState;return he.flowing||(d("resume"),he.flowing=!he.readableListening,le(this,he)),he.paused=!1,this};function le(he,te){te.resumeScheduled||(te.resumeScheduled=!0,browser$1$1.nextTick(Q,he,te))}function Q(he,te){d("resume",te.reading),te.reading||he.read(0),te.resumeScheduled=!1,he.emit("resume"),ce(he),te.flowing&&!te.reading&&he.read(0)}Z.prototype.pause=function(){return d("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(d("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function ce(he){var te=he._readableState;for(d("flow",te.flowing);te.flowing&&he.read()!==null;);}Z.prototype.wrap=function(he){var te=this,pe=this._readableState,ee=!1;he.on("end",function(){if(d("wrapped end"),pe.decoder&&!pe.ended){var be=pe.decoder.end();be&&be.length&&te.push(be)}te.push(null)}),he.on("data",function(be){if(d("wrapped data"),pe.decoder&&(be=pe.decoder.write(be)),!(pe.objectMode&&be==null)&&!(!pe.objectMode&&(!be||!be.length))){var xe=te.push(be);xe||(ee=!0,he.pause())}});for(var ge in he)this[ge]===void 0&&typeof he[ge]=="function"&&(this[ge]=function(xe){return function(){return he[xe].apply(he,arguments)}}(ge));for(var Ee=0;Ee<X.length;Ee++)he.on(X[Ee],this.emit.bind(this,X[Ee]));return this._read=function(be){d("wrapped _read",be),ee&&(ee=!1,he.resume())},this},typeof Symbol=="function"&&(Z.prototype[Symbol.asyncIterator]=function(){return z===void 0&&(z=requireAsync_iterator()),z(this)}),Object.defineProperty(Z.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Z.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Z.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(te){this._readableState&&(this._readableState.flowing=te)}}),Z._fromList=fe,Object.defineProperty(Z.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function fe(he,te){if(te.length===0)return null;var pe;return te.objectMode?pe=te.buffer.shift():!he||he>=te.length?(te.decoder?pe=te.buffer.join(""):te.buffer.length===1?pe=te.buffer.first():pe=te.buffer.concat(te.length),te.buffer.clear()):pe=te.buffer.consume(he,te.decoder),pe}function oe(he){var te=he._readableState;d("endReadable",te.endEmitted),te.endEmitted||(te.ended=!0,browser$1$1.nextTick(de,te,he))}function de(he,te){if(d("endReadableNT",he.endEmitted,he.length),!he.endEmitted&&he.length===0&&(he.endEmitted=!0,te.readable=!1,te.emit("end"),he.autoDestroy)){var pe=te._writableState;(!pe||pe.autoDestroy&&pe.finished)&&te.destroy()}}typeof Symbol=="function"&&(Z.from=function(he,te){return U===void 0&&(U=requireFromBrowser()),U(Z,he,te)});function ae(he,te){for(var pe=0,ee=he.length;pe<ee;pe++)if(he[pe]===te)return pe;return-1}return _stream_readable}var _stream_transform=Transform$8,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex$1=require_stream_duplex();inherits_browserExports(Transform$8,Duplex$1);function afterTransform$1(t,e){var n=this._transformState;n.transforming=!1;var a=n.writecb;if(a===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),a(t);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function Transform$8(t){if(!(this instanceof Transform$8))return new Transform$8(t);Duplex$1.call(this,t),this._transformState={afterTransform:afterTransform$1.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",prefinish$1)}function prefinish$1(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,n){done$1(t,e,n)}):done$1(this,null,null)}Transform$8.prototype.push=function(t,e){return this._transformState.needTransform=!1,Duplex$1.prototype.push.call(this,t,e)};Transform$8.prototype._transform=function(t,e,n){n(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$8.prototype._write=function(t,e,n){var a=this._transformState;if(a.writecb=n,a.writechunk=t,a.writeencoding=e,!a.transforming){var o=this._readableState;(a.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Transform$8.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Transform$8.prototype._destroy=function(t,e){Duplex$1.prototype._destroy.call(this,t,function(n){e(n)})};function done$1(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(t._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return t.push(null)}var _stream_passthrough=PassThrough$1,Transform$7=_stream_transform;inherits_browserExports(PassThrough$1,Transform$7);function PassThrough$1(t){if(!(this instanceof PassThrough$1))return new PassThrough$1(t);Transform$7.call(this,t)}PassThrough$1.prototype._transform=function(t,e,n){n(null,t)};var eos;function once$1(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop$5(t){if(t)throw t}function isRequest(t){return t.setHeader&&typeof t.abort=="function"}function destroyer(t,e,n,a){a=once$1(a);var o=!1;t.on("close",function(){o=!0}),eos===void 0&&(eos=endOfStream),eos(t,{readable:e,writable:n},function(l){if(l)return a(l);o=!0,a()});var c=!1;return function(l){if(!o&&!c){if(c=!0,isRequest(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();a(l||new ERR_STREAM_DESTROYED("pipe"))}}}function call(t){t()}function pipe(t,e){return t.pipe(e)}function popCallback(t){return!t.length||typeof t[t.length-1]!="function"?noop$5:t.pop()}function pipeline(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=popCallback(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ERR_MISSING_ARGS("streams");var o,c=e.map(function(l,u){var d=u<e.length-1,m=u>0;return destroyer(l,d,m,function(b){o||(o=b),b&&c.forEach(call),!d&&(c.forEach(call),a(o))})});return e.reduce(pipe)}var pipeline_1=pipeline;(function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=_stream_transform,e.PassThrough=_stream_passthrough,e.finished=endOfStream,e.pipeline=pipeline_1})(readableBrowser,readableBrowserExports);var Buffer$H=safeBufferExports.Buffer,Transform$6=readableBrowserExports.Transform,inherits$w=inherits_browserExports;function throwIfNotStringOrBuffer(t,e){if(!Buffer$H.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function HashBase$2(t){Transform$6.call(this),this._block=Buffer$H.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits$w(HashBase$2,Transform$6);HashBase$2.prototype._transform=function(t,e,n){var a=null;try{this.update(t,e)}catch(o){a=o}n(a)};HashBase$2.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(n){e=n}t(e)};HashBase$2.prototype.update=function(t,e){if(throwIfNotStringOrBuffer(t,"Data"),this._finalized)throw new Error("Digest already called");Buffer$H.isBuffer(t)||(t=Buffer$H.from(t,e));for(var n=this._block,a=0;this._blockOffset+t.length-a>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=t[a++];this._update(),this._blockOffset=0}for(;a<t.length;)n[this._blockOffset++]=t[a++];for(var c=0,l=t.length*8;l>0;++c)this._length[c]+=l,l=this._length[c]/4294967296|0,l>0&&(this._length[c]-=4294967296*l);return this};HashBase$2.prototype._update=function(){throw new Error("_update is not implemented")};HashBase$2.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return e};HashBase$2.prototype._digest=function(){throw new Error("_digest is not implemented")};var hashBase=HashBase$2,inherits$v=inherits_browserExports,HashBase$1=hashBase,Buffer$G=safeBufferExports.Buffer,ARRAY16$1=new Array(16);function MD5$3(){HashBase$1.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}inherits$v(MD5$3,HashBase$1);MD5$3.prototype._update=function(){for(var t=ARRAY16$1,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var n=this._a,a=this._b,o=this._c,c=this._d;n=fnF(n,a,o,c,t[0],3614090360,7),c=fnF(c,n,a,o,t[1],3905402710,12),o=fnF(o,c,n,a,t[2],606105819,17),a=fnF(a,o,c,n,t[3],3250441966,22),n=fnF(n,a,o,c,t[4],4118548399,7),c=fnF(c,n,a,o,t[5],1200080426,12),o=fnF(o,c,n,a,t[6],2821735955,17),a=fnF(a,o,c,n,t[7],4249261313,22),n=fnF(n,a,o,c,t[8],1770035416,7),c=fnF(c,n,a,o,t[9],2336552879,12),o=fnF(o,c,n,a,t[10],4294925233,17),a=fnF(a,o,c,n,t[11],2304563134,22),n=fnF(n,a,o,c,t[12],1804603682,7),c=fnF(c,n,a,o,t[13],4254626195,12),o=fnF(o,c,n,a,t[14],2792965006,17),a=fnF(a,o,c,n,t[15],1236535329,22),n=fnG(n,a,o,c,t[1],4129170786,5),c=fnG(c,n,a,o,t[6],3225465664,9),o=fnG(o,c,n,a,t[11],643717713,14),a=fnG(a,o,c,n,t[0],3921069994,20),n=fnG(n,a,o,c,t[5],3593408605,5),c=fnG(c,n,a,o,t[10],38016083,9),o=fnG(o,c,n,a,t[15],3634488961,14),a=fnG(a,o,c,n,t[4],3889429448,20),n=fnG(n,a,o,c,t[9],568446438,5),c=fnG(c,n,a,o,t[14],3275163606,9),o=fnG(o,c,n,a,t[3],4107603335,14),a=fnG(a,o,c,n,t[8],1163531501,20),n=fnG(n,a,o,c,t[13],2850285829,5),c=fnG(c,n,a,o,t[2],4243563512,9),o=fnG(o,c,n,a,t[7],1735328473,14),a=fnG(a,o,c,n,t[12],2368359562,20),n=fnH(n,a,o,c,t[5],4294588738,4),c=fnH(c,n,a,o,t[8],2272392833,11),o=fnH(o,c,n,a,t[11],1839030562,16),a=fnH(a,o,c,n,t[14],4259657740,23),n=fnH(n,a,o,c,t[1],2763975236,4),c=fnH(c,n,a,o,t[4],1272893353,11),o=fnH(o,c,n,a,t[7],4139469664,16),a=fnH(a,o,c,n,t[10],3200236656,23),n=fnH(n,a,o,c,t[13],681279174,4),c=fnH(c,n,a,o,t[0],3936430074,11),o=fnH(o,c,n,a,t[3],3572445317,16),a=fnH(a,o,c,n,t[6],76029189,23),n=fnH(n,a,o,c,t[9],3654602809,4),c=fnH(c,n,a,o,t[12],3873151461,11),o=fnH(o,c,n,a,t[15],530742520,16),a=fnH(a,o,c,n,t[2],3299628645,23),n=fnI(n,a,o,c,t[0],4096336452,6),c=fnI(c,n,a,o,t[7],1126891415,10),o=fnI(o,c,n,a,t[14],2878612391,15),a=fnI(a,o,c,n,t[5],4237533241,21),n=fnI(n,a,o,c,t[12],1700485571,6),c=fnI(c,n,a,o,t[3],2399980690,10),o=fnI(o,c,n,a,t[10],4293915773,15),a=fnI(a,o,c,n,t[1],2240044497,21),n=fnI(n,a,o,c,t[8],1873313359,6),c=fnI(c,n,a,o,t[15],4264355552,10),o=fnI(o,c,n,a,t[6],2734768916,15),a=fnI(a,o,c,n,t[13],1309151649,21),n=fnI(n,a,o,c,t[4],4149444226,6),c=fnI(c,n,a,o,t[11],3174756917,10),o=fnI(o,c,n,a,t[2],718787259,15),a=fnI(a,o,c,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+a|0,this._c=this._c+o|0,this._d=this._d+c|0};MD5$3.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Buffer$G.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function rotl$2(t,e){return t<<e|t>>>32-e}function fnF(t,e,n,a,o,c,l){return rotl$2(t+(e&n|~e&a)+o+c|0,l)+e|0}function fnG(t,e,n,a,o,c,l){return rotl$2(t+(e&a|n&~a)+o+c|0,l)+e|0}function fnH(t,e,n,a,o,c,l){return rotl$2(t+(e^n^a)+o+c|0,l)+e|0}function fnI(t,e,n,a,o,c,l){return rotl$2(t+(n^(e|~a))+o+c|0,l)+e|0}var md5_js=MD5$3,Buffer$F=buffer$3.Buffer,inherits$u=inherits_browserExports,HashBase=hashBase,ARRAY16=new Array(16),zl$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr$1=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr$1=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl$1=[0,1518500249,1859775393,2400959708,2840853838],hr$1=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160$4(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}inherits$u(RIPEMD160$4,HashBase);RIPEMD160$4.prototype._update=function(){for(var t=ARRAY16,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var n=this._a|0,a=this._b|0,o=this._c|0,c=this._d|0,l=this._e|0,u=this._a|0,d=this._b|0,m=this._c|0,b=this._d|0,x=this._e|0,_=0;_<80;_+=1){var w,S;_<16?(w=fn1$1(n,a,o,c,l,t[zl$1[_]],hl$1[0],sl$1[_]),S=fn5$1(u,d,m,b,x,t[zr$1[_]],hr$1[0],sr$1[_])):_<32?(w=fn2$1(n,a,o,c,l,t[zl$1[_]],hl$1[1],sl$1[_]),S=fn4$1(u,d,m,b,x,t[zr$1[_]],hr$1[1],sr$1[_])):_<48?(w=fn3$1(n,a,o,c,l,t[zl$1[_]],hl$1[2],sl$1[_]),S=fn3$1(u,d,m,b,x,t[zr$1[_]],hr$1[2],sr$1[_])):_<64?(w=fn4$1(n,a,o,c,l,t[zl$1[_]],hl$1[3],sl$1[_]),S=fn2$1(u,d,m,b,x,t[zr$1[_]],hr$1[3],sr$1[_])):(w=fn5$1(n,a,o,c,l,t[zl$1[_]],hl$1[4],sl$1[_]),S=fn1$1(u,d,m,b,x,t[zr$1[_]],hr$1[4],sr$1[_])),n=l,l=c,c=rotl$1(o,10),o=a,a=w,u=x,x=b,b=rotl$1(m,10),m=d,d=S}var T=this._b+o+b|0;this._b=this._c+c+x|0,this._c=this._d+l+u|0,this._d=this._e+n+d|0,this._e=this._a+a+m|0,this._a=T};RIPEMD160$4.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Buffer$F.alloc?Buffer$F.alloc(20):new Buffer$F(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function rotl$1(t,e){return t<<e|t>>>32-e}function fn1$1(t,e,n,a,o,c,l,u){return rotl$1(t+(e^n^a)+c+l|0,u)+o|0}function fn2$1(t,e,n,a,o,c,l,u){return rotl$1(t+(e&n|~e&a)+c+l|0,u)+o|0}function fn3$1(t,e,n,a,o,c,l,u){return rotl$1(t+((e|~n)^a)+c+l|0,u)+o|0}function fn4$1(t,e,n,a,o,c,l,u){return rotl$1(t+(e&a|n&~a)+c+l|0,u)+o|0}function fn5$1(t,e,n,a,o,c,l,u){return rotl$1(t+(e^(n|~a))+c+l|0,u)+o|0}var ripemd160$1=RIPEMD160$4,sha_jsExports={},sha_js={get exports(){return sha_jsExports},set exports(t){sha_jsExports=t}},Buffer$E=safeBufferExports.Buffer;function Hash$7(t,e){this._block=Buffer$E.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Hash$7.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Buffer$E.from(t,e));for(var n=this._block,a=this._blockSize,o=t.length,c=this._len,l=0;l<o;){for(var u=c%a,d=Math.min(o-l,a-u),m=0;m<d;m++)n[u+m]=t[l+m];c+=d,l+=d,c%a===0&&this._update(n)}return this._len+=o,this};Hash$7.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=this._len*8;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var a=(n&4294967295)>>>0,o=(n-a)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var c=this._hash();return t?c.toString(t):c};Hash$7.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var hash$4=Hash$7,inherits$t=inherits_browserExports,Hash$6=hash$4,Buffer$D=safeBufferExports.Buffer,K$4=[1518500249,1859775393,-1894007588,-899497514],W$5=new Array(80);function Sha(){this.init(),this._w=W$5,Hash$6.call(this,64,56)}inherits$t(Sha,Hash$6);Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5$1(t){return t<<5|t>>>27}function rotl30$1(t){return t<<30|t>>>2}function ft$1(t,e,n,a){return t===0?e&n|~e&a:t===2?e&n|e&a|n&a:e^n^a}Sha.prototype._update=function(t){for(var e=this._w,n=this._a|0,a=this._b|0,o=this._c|0,c=this._d|0,l=this._e|0,u=0;u<16;++u)e[u]=t.readInt32BE(u*4);for(;u<80;++u)e[u]=e[u-3]^e[u-8]^e[u-14]^e[u-16];for(var d=0;d<80;++d){var m=~~(d/20),b=rotl5$1(n)+ft$1(m,a,o,c)+l+e[d]+K$4[m]|0;l=c,c=o,o=rotl30$1(a),a=n,n=b}this._a=n+this._a|0,this._b=a+this._b|0,this._c=o+this._c|0,this._d=c+this._d|0,this._e=l+this._e|0};Sha.prototype._hash=function(){var t=Buffer$D.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var sha$7=Sha,inherits$s=inherits_browserExports,Hash$5=hash$4,Buffer$C=safeBufferExports.Buffer,K$3=[1518500249,1859775393,-1894007588,-899497514],W$4=new Array(80);function Sha1(){this.init(),this._w=W$4,Hash$5.call(this,64,56)}inherits$s(Sha1,Hash$5);Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(t){return t<<1|t>>>31}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,e,n,a){return t===0?e&n|~e&a:t===2?e&n|e&a|n&a:e^n^a}Sha1.prototype._update=function(t){for(var e=this._w,n=this._a|0,a=this._b|0,o=this._c|0,c=this._d|0,l=this._e|0,u=0;u<16;++u)e[u]=t.readInt32BE(u*4);for(;u<80;++u)e[u]=rotl1(e[u-3]^e[u-8]^e[u-14]^e[u-16]);for(var d=0;d<80;++d){var m=~~(d/20),b=rotl5(n)+ft(m,a,o,c)+l+e[d]+K$3[m]|0;l=c,c=o,o=rotl30(a),a=n,n=b}this._a=n+this._a|0,this._b=a+this._b|0,this._c=o+this._c|0,this._d=c+this._d|0,this._e=l+this._e|0};Sha1.prototype._hash=function(){var t=Buffer$C.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var sha1$1=Sha1,inherits$r=inherits_browserExports,Hash$4=hash$4,Buffer$B=safeBufferExports.Buffer,K$2=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W$3=new Array(64);function Sha256$1(){this.init(),this._w=W$3,Hash$4.call(this,64,56)}inherits$r(Sha256$1,Hash$4);Sha256$1.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch(t,e,n){return n^t&(e^n)}function maj$1(t,e,n){return t&e|n&(t|e)}function sigma0$1(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function sigma1$1(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function gamma0(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function gamma1(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}Sha256$1.prototype._update=function(t){for(var e=this._w,n=this._a|0,a=this._b|0,o=this._c|0,c=this._d|0,l=this._e|0,u=this._f|0,d=this._g|0,m=this._h|0,b=0;b<16;++b)e[b]=t.readInt32BE(b*4);for(;b<64;++b)e[b]=gamma1(e[b-2])+e[b-7]+gamma0(e[b-15])+e[b-16]|0;for(var x=0;x<64;++x){var _=m+sigma1$1(l)+ch(l,u,d)+K$2[x]+e[x]|0,w=sigma0$1(n)+maj$1(n,a,o)|0;m=d,d=u,u=l,l=c+_|0,c=o,o=a,a=n,n=_+w|0}this._a=n+this._a|0,this._b=a+this._b|0,this._c=o+this._c|0,this._d=c+this._d|0,this._e=l+this._e|0,this._f=u+this._f|0,this._g=d+this._g|0,this._h=m+this._h|0};Sha256$1.prototype._hash=function(){var t=Buffer$B.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var sha256$8=Sha256$1,inherits$q=inherits_browserExports,Sha256=sha256$8,Hash$3=hash$4,Buffer$A=safeBufferExports.Buffer,W$2=new Array(64);function Sha224(){this.init(),this._w=W$2,Hash$3.call(this,64,56)}inherits$q(Sha224,Sha256);Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Sha224.prototype._hash=function(){var t=Buffer$A.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var sha224$1=Sha224,inherits$p=inherits_browserExports,Hash$2=hash$4,Buffer$z=safeBufferExports.Buffer,K$1=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W$1=new Array(160);function Sha512(){this.init(),this._w=W$1,Hash$2.call(this,128,112)}inherits$p(Sha512,Hash$2);Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch(t,e,n){return n^t&(e^n)}function maj(t,e,n){return t&e|n&(t|e)}function sigma0(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function sigma1(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function Gamma0(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Gamma0l(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Gamma1(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Gamma1l(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function getCarry(t,e){return t>>>0<e>>>0?1:0}Sha512.prototype._update=function(t){for(var e=this._w,n=this._ah|0,a=this._bh|0,o=this._ch|0,c=this._dh|0,l=this._eh|0,u=this._fh|0,d=this._gh|0,m=this._hh|0,b=this._al|0,x=this._bl|0,_=this._cl|0,w=this._dl|0,S=this._el|0,T=this._fl|0,B=this._gl|0,C=this._hl|0,D=0;D<32;D+=2)e[D]=t.readInt32BE(D*4),e[D+1]=t.readInt32BE(D*4+4);for(;D<160;D+=2){var z=e[D-30],U=e[D-15*2+1],Y=Gamma0(z,U),X=Gamma0l(U,z);z=e[D-2*2],U=e[D-2*2+1];var O=Gamma1(z,U),J=Gamma1l(U,z),Z=e[D-7*2],se=e[D-7*2+1],ie=e[D-16*2],F=e[D-16*2+1],k=X+se|0,y=Y+Z+getCarry(k,X)|0;k=k+J|0,y=y+O+getCarry(k,J)|0,k=k+F|0,y=y+ie+getCarry(k,F)|0,e[D]=y,e[D+1]=k}for(var A=0;A<160;A+=2){y=e[A],k=e[A+1];var I=maj(n,a,o),P=maj(b,x,_),H=sigma0(n,b),q=sigma0(b,n),j=sigma1(l,S),M=sigma1(S,l),E=K$1[A],L=K$1[A+1],le=Ch(l,u,d),Q=Ch(S,T,B),ce=C+M|0,fe=m+j+getCarry(ce,C)|0;ce=ce+Q|0,fe=fe+le+getCarry(ce,Q)|0,ce=ce+L|0,fe=fe+E+getCarry(ce,L)|0,ce=ce+k|0,fe=fe+y+getCarry(ce,k)|0;var oe=q+P|0,de=H+I+getCarry(oe,q)|0;m=d,C=B,d=u,B=T,u=l,T=S,S=w+ce|0,l=c+fe+getCarry(S,w)|0,c=o,w=_,o=a,_=x,a=n,x=b,b=ce+oe|0,n=fe+de+getCarry(b,ce)|0}this._al=this._al+b|0,this._bl=this._bl+x|0,this._cl=this._cl+_|0,this._dl=this._dl+w|0,this._el=this._el+S|0,this._fl=this._fl+T|0,this._gl=this._gl+B|0,this._hl=this._hl+C|0,this._ah=this._ah+n+getCarry(this._al,b)|0,this._bh=this._bh+a+getCarry(this._bl,x)|0,this._ch=this._ch+o+getCarry(this._cl,_)|0,this._dh=this._dh+c+getCarry(this._dl,w)|0,this._eh=this._eh+l+getCarry(this._el,S)|0,this._fh=this._fh+u+getCarry(this._fl,T)|0,this._gh=this._gh+d+getCarry(this._gl,B)|0,this._hh=this._hh+m+getCarry(this._hl,C)|0};Sha512.prototype._hash=function(){var t=Buffer$z.allocUnsafe(64);function e(n,a,o){t.writeInt32BE(n,o),t.writeInt32BE(a,o+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var sha512$3=Sha512,inherits$o=inherits_browserExports,SHA512$2=sha512$3,Hash$1=hash$4,Buffer$y=safeBufferExports.Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash$1.call(this,128,112)}inherits$o(Sha384,SHA512$2);Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Sha384.prototype._hash=function(){var t=Buffer$y.allocUnsafe(48);function e(n,a,o){t.writeInt32BE(n,o),t.writeInt32BE(a,o+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var sha384$2=Sha384,exports=sha_js.exports=function(e){e=e.toLowerCase();var n=exports[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n};exports.sha=sha$7;exports.sha1=sha1$1;exports.sha224=sha224$1;exports.sha256=sha256$8;exports.sha384=sha384$2;exports.sha512=sha512$3;var util$9={},types={},toStr=Object.prototype.toString,fnToStr=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(e){if(typeof e!="function")return!1;if(isFnRegex.test(fnToStr.call(e)))return!0;if(!hasToStringTag){var n=toStr.call(e);return n==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var a=getGeneratorFunc();GeneratorFunction=a?getProto(a):!1}return getProto(e)===GeneratorFunction};(function(t){var e=isArguments$3,n=isGeneratorFunction,a=whichTypedArray$1,o=isTypedArray$3;function c(ve){return ve.call.bind(ve)}var l=typeof BigInt<"u",u=typeof Symbol<"u",d=c(Object.prototype.toString),m=c(Number.prototype.valueOf),b=c(String.prototype.valueOf),x=c(Boolean.prototype.valueOf);if(l)var _=c(BigInt.prototype.valueOf);if(u)var w=c(Symbol.prototype.valueOf);function S(ve,Se){if(typeof ve!="object")return!1;try{return Se(ve),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=n,t.isTypedArray=o;function T(ve){return typeof Promise<"u"&&ve instanceof Promise||ve!==null&&typeof ve=="object"&&typeof ve.then=="function"&&typeof ve.catch=="function"}t.isPromise=T;function B(ve){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ve):o(ve)||L(ve)}t.isArrayBufferView=B;function C(ve){return a(ve)==="Uint8Array"}t.isUint8Array=C;function D(ve){return a(ve)==="Uint8ClampedArray"}t.isUint8ClampedArray=D;function z(ve){return a(ve)==="Uint16Array"}t.isUint16Array=z;function U(ve){return a(ve)==="Uint32Array"}t.isUint32Array=U;function Y(ve){return a(ve)==="Int8Array"}t.isInt8Array=Y;function X(ve){return a(ve)==="Int16Array"}t.isInt16Array=X;function O(ve){return a(ve)==="Int32Array"}t.isInt32Array=O;function J(ve){return a(ve)==="Float32Array"}t.isFloat32Array=J;function Z(ve){return a(ve)==="Float64Array"}t.isFloat64Array=Z;function se(ve){return a(ve)==="BigInt64Array"}t.isBigInt64Array=se;function ie(ve){return a(ve)==="BigUint64Array"}t.isBigUint64Array=ie;function F(ve){return d(ve)==="[object Map]"}F.working=typeof Map<"u"&&F(new Map);function k(ve){return typeof Map>"u"?!1:F.working?F(ve):ve instanceof Map}t.isMap=k;function y(ve){return d(ve)==="[object Set]"}y.working=typeof Set<"u"&&y(new Set);function A(ve){return typeof Set>"u"?!1:y.working?y(ve):ve instanceof Set}t.isSet=A;function I(ve){return d(ve)==="[object WeakMap]"}I.working=typeof WeakMap<"u"&&I(new WeakMap);function P(ve){return typeof WeakMap>"u"?!1:I.working?I(ve):ve instanceof WeakMap}t.isWeakMap=P;function H(ve){return d(ve)==="[object WeakSet]"}H.working=typeof WeakSet<"u"&&H(new WeakSet);function q(ve){return H(ve)}t.isWeakSet=q;function j(ve){return d(ve)==="[object ArrayBuffer]"}j.working=typeof ArrayBuffer<"u"&&j(new ArrayBuffer);function M(ve){return typeof ArrayBuffer>"u"?!1:j.working?j(ve):ve instanceof ArrayBuffer}t.isArrayBuffer=M;function E(ve){return d(ve)==="[object DataView]"}E.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&E(new DataView(new ArrayBuffer(1),0,1));function L(ve){return typeof DataView>"u"?!1:E.working?E(ve):ve instanceof DataView}t.isDataView=L;var le=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Q(ve){return d(ve)==="[object SharedArrayBuffer]"}function ce(ve){return typeof le>"u"?!1:(typeof Q.working>"u"&&(Q.working=Q(new le)),Q.working?Q(ve):ve instanceof le)}t.isSharedArrayBuffer=ce;function fe(ve){return d(ve)==="[object AsyncFunction]"}t.isAsyncFunction=fe;function oe(ve){return d(ve)==="[object Map Iterator]"}t.isMapIterator=oe;function de(ve){return d(ve)==="[object Set Iterator]"}t.isSetIterator=de;function ae(ve){return d(ve)==="[object Generator]"}t.isGeneratorObject=ae;function he(ve){return d(ve)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=he;function te(ve){return S(ve,m)}t.isNumberObject=te;function pe(ve){return S(ve,b)}t.isStringObject=pe;function ee(ve){return S(ve,x)}t.isBooleanObject=ee;function ge(ve){return l&&S(ve,_)}t.isBigIntObject=ge;function Ee(ve){return u&&S(ve,w)}t.isSymbolObject=Ee;function be(ve){return te(ve)||pe(ve)||ee(ve)||ge(ve)||Ee(ve)}t.isBoxedPrimitive=be;function xe(ve){return typeof Uint8Array<"u"&&(M(ve)||ce(ve))}t.isAnyArrayBuffer=xe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ve){Object.defineProperty(t,ve,{enumerable:!1,value:function(){throw new Error(ve+" is not supported in userland")}})})})(types);var isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(t){var e=Object.getOwnPropertyDescriptors||function(L){for(var le=Object.keys(L),Q={},ce=0;ce<le.length;ce++)Q[le[ce]]=Object.getOwnPropertyDescriptor(L,le[ce]);return Q},n=/%[sdj%]/g;t.format=function(E){if(!Y(E)){for(var L=[],le=0;le<arguments.length;le++)L.push(l(arguments[le]));return L.join(" ")}for(var le=1,Q=arguments,ce=Q.length,fe=String(E).replace(n,function(de){if(de==="%%")return"%";if(le>=ce)return de;switch(de){case"%s":return String(Q[le++]);case"%d":return Number(Q[le++]);case"%j":try{return JSON.stringify(Q[le++])}catch{return"[Circular]"}default:return de}}),oe=Q[le];le<ce;oe=Q[++le])D(oe)||!Z(oe)?fe+=" "+oe:fe+=" "+l(oe);return fe},t.deprecate=function(E,L){if(typeof browser$1$1<"u"&&browser$1$1.noDeprecation===!0)return E;if(typeof browser$1$1>"u")return function(){return t.deprecate(E,L).apply(this,arguments)};var le=!1;function Q(){if(!le){if(browser$1$1.throwDeprecation)throw new Error(L);browser$1$1.traceDeprecation?console.trace(L):console.error(L),le=!0}return E.apply(this,arguments)}return Q};var a={},o=/^$/;if({}.NODE_DEBUG){var c={}.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+c+"$","i")}t.debuglog=function(E){if(E=E.toUpperCase(),!a[E])if(o.test(E)){var L=browser$1$1.pid;a[E]=function(){var le=t.format.apply(t,arguments);console.error("%s %d: %s",E,L,le)}}else a[E]=function(){};return a[E]};function l(E,L){var le={seen:[],stylize:d};return arguments.length>=3&&(le.depth=arguments[2]),arguments.length>=4&&(le.colors=arguments[3]),C(L)?le.showHidden=L:L&&t._extend(le,L),O(le.showHidden)&&(le.showHidden=!1),O(le.depth)&&(le.depth=2),O(le.colors)&&(le.colors=!1),O(le.customInspect)&&(le.customInspect=!0),le.colors&&(le.stylize=u),b(le,E,le.depth)}t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function u(E,L){var le=l.styles[L];return le?"\x1B["+l.colors[le][0]+"m"+E+"\x1B["+l.colors[le][1]+"m":E}function d(E,L){return E}function m(E){var L={};return E.forEach(function(le,Q){L[le]=!0}),L}function b(E,L,le){if(E.customInspect&&L&&F(L.inspect)&&L.inspect!==t.inspect&&!(L.constructor&&L.constructor.prototype===L)){var Q=L.inspect(le,E);return Y(Q)||(Q=b(E,Q,le)),Q}var ce=x(E,L);if(ce)return ce;var fe=Object.keys(L),oe=m(fe);if(E.showHidden&&(fe=Object.getOwnPropertyNames(L)),ie(L)&&(fe.indexOf("message")>=0||fe.indexOf("description")>=0))return _(L);if(fe.length===0){if(F(L)){var de=L.name?": "+L.name:"";return E.stylize("[Function"+de+"]","special")}if(J(L))return E.stylize(RegExp.prototype.toString.call(L),"regexp");if(se(L))return E.stylize(Date.prototype.toString.call(L),"date");if(ie(L))return _(L)}var ae="",he=!1,te=["{","}"];if(B(L)&&(he=!0,te=["[","]"]),F(L)){var pe=L.name?": "+L.name:"";ae=" [Function"+pe+"]"}if(J(L)&&(ae=" "+RegExp.prototype.toString.call(L)),se(L)&&(ae=" "+Date.prototype.toUTCString.call(L)),ie(L)&&(ae=" "+_(L)),fe.length===0&&(!he||L.length==0))return te[0]+ae+te[1];if(le<0)return J(L)?E.stylize(RegExp.prototype.toString.call(L),"regexp"):E.stylize("[Object]","special");E.seen.push(L);var ee;return he?ee=w(E,L,le,oe,fe):ee=fe.map(function(ge){return S(E,L,le,oe,ge,he)}),E.seen.pop(),T(ee,ae,te)}function x(E,L){if(O(L))return E.stylize("undefined","undefined");if(Y(L)){var le="'"+JSON.stringify(L).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return E.stylize(le,"string")}if(U(L))return E.stylize(""+L,"number");if(C(L))return E.stylize(""+L,"boolean");if(D(L))return E.stylize("null","null")}function _(E){return"["+Error.prototype.toString.call(E)+"]"}function w(E,L,le,Q,ce){for(var fe=[],oe=0,de=L.length;oe<de;++oe)H(L,String(oe))?fe.push(S(E,L,le,Q,String(oe),!0)):fe.push("");return ce.forEach(function(ae){ae.match(/^\d+$/)||fe.push(S(E,L,le,Q,ae,!0))}),fe}function S(E,L,le,Q,ce,fe){var oe,de,ae;if(ae=Object.getOwnPropertyDescriptor(L,ce)||{value:L[ce]},ae.get?ae.set?de=E.stylize("[Getter/Setter]","special"):de=E.stylize("[Getter]","special"):ae.set&&(de=E.stylize("[Setter]","special")),H(Q,ce)||(oe="["+ce+"]"),de||(E.seen.indexOf(ae.value)<0?(D(le)?de=b(E,ae.value,null):de=b(E,ae.value,le-1),de.indexOf(`
`)>-1&&(fe?de=de.split(`
`).map(function(he){return"  "+he}).join(`
`).slice(2):de=`
`+de.split(`
`).map(function(he){return"   "+he}).join(`
`))):de=E.stylize("[Circular]","special")),O(oe)){if(fe&&ce.match(/^\d+$/))return de;oe=JSON.stringify(""+ce),oe.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(oe=oe.slice(1,-1),oe=E.stylize(oe,"name")):(oe=oe.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),oe=E.stylize(oe,"string"))}return oe+": "+de}function T(E,L,le){var Q=E.reduce(function(ce,fe){return fe.indexOf(`
`)>=0,ce+fe.replace(/\u001b\[\d\d?m/g,"").length+1},0);return Q>60?le[0]+(L===""?"":L+`
 `)+" "+E.join(`,
  `)+" "+le[1]:le[0]+L+" "+E.join(", ")+" "+le[1]}t.types=types;function B(E){return Array.isArray(E)}t.isArray=B;function C(E){return typeof E=="boolean"}t.isBoolean=C;function D(E){return E===null}t.isNull=D;function z(E){return E==null}t.isNullOrUndefined=z;function U(E){return typeof E=="number"}t.isNumber=U;function Y(E){return typeof E=="string"}t.isString=Y;function X(E){return typeof E=="symbol"}t.isSymbol=X;function O(E){return E===void 0}t.isUndefined=O;function J(E){return Z(E)&&y(E)==="[object RegExp]"}t.isRegExp=J,t.types.isRegExp=J;function Z(E){return typeof E=="object"&&E!==null}t.isObject=Z;function se(E){return Z(E)&&y(E)==="[object Date]"}t.isDate=se,t.types.isDate=se;function ie(E){return Z(E)&&(y(E)==="[object Error]"||E instanceof Error)}t.isError=ie,t.types.isNativeError=ie;function F(E){return typeof E=="function"}t.isFunction=F;function k(E){return E===null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||typeof E=="symbol"||typeof E>"u"}t.isPrimitive=k,t.isBuffer=isBufferBrowser;function y(E){return Object.prototype.toString.call(E)}function A(E){return E<10?"0"+E.toString(10):E.toString(10)}var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var E=new Date,L=[A(E.getHours()),A(E.getMinutes()),A(E.getSeconds())].join(":");return[E.getDate(),I[E.getMonth()],L].join(" ")}t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=inherits_browserExports,t._extend=function(E,L){if(!L||!Z(L))return E;for(var le=Object.keys(L),Q=le.length;Q--;)E[le[Q]]=L[le[Q]];return E};function H(E,L){return Object.prototype.hasOwnProperty.call(E,L)}var q=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(L){if(typeof L!="function")throw new TypeError('The "original" argument must be of type Function');if(q&&L[q]){var le=L[q];if(typeof le!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(le,q,{value:le,enumerable:!1,writable:!1,configurable:!0}),le}function le(){for(var Q,ce,fe=new Promise(function(ae,he){Q=ae,ce=he}),oe=[],de=0;de<arguments.length;de++)oe.push(arguments[de]);oe.push(function(ae,he){ae?ce(ae):Q(he)});try{L.apply(this,oe)}catch(ae){ce(ae)}return fe}return Object.setPrototypeOf(le,Object.getPrototypeOf(L)),q&&Object.defineProperty(le,q,{value:le,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(le,e(L))},t.promisify.custom=q;function j(E,L){if(!E){var le=new Error("Promise was rejected with a falsy value");le.reason=E,E=le}return L(E)}function M(E){if(typeof E!="function")throw new TypeError('The "original" argument must be of type Function');function L(){for(var le=[],Q=0;Q<arguments.length;Q++)le.push(arguments[Q]);var ce=le.pop();if(typeof ce!="function")throw new TypeError("The last argument must be of type Function");var fe=this,oe=function(){return ce.apply(fe,arguments)};E.apply(this,le).then(function(de){browser$1$1.nextTick(oe.bind(null,null,de))},function(de){browser$1$1.nextTick(j.bind(null,de,oe))})}return Object.setPrototypeOf(L,Object.getPrototypeOf(E)),Object.defineProperties(L,e(E)),L}t.callbackify=M})(util$9);var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init$1(){inited=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)lookup$1[e]=t[e],revLookup[t.charCodeAt(e)]=e;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(t){inited||init$1();var e,n,a,o,c,l,u=t.length;if(u%4>0)throw new Error("Invalid string. Length must be a multiple of 4");c=t[u-2]==="="?2:t[u-1]==="="?1:0,l=new Arr(u*3/4-c),a=c>0?u-4:u;var d=0;for(e=0,n=0;e<a;e+=4,n+=3)o=revLookup[t.charCodeAt(e)]<<18|revLookup[t.charCodeAt(e+1)]<<12|revLookup[t.charCodeAt(e+2)]<<6|revLookup[t.charCodeAt(e+3)],l[d++]=o>>16&255,l[d++]=o>>8&255,l[d++]=o&255;return c===2?(o=revLookup[t.charCodeAt(e)]<<2|revLookup[t.charCodeAt(e+1)]>>4,l[d++]=o&255):c===1&&(o=revLookup[t.charCodeAt(e)]<<10|revLookup[t.charCodeAt(e+1)]<<4|revLookup[t.charCodeAt(e+2)]>>2,l[d++]=o>>8&255,l[d++]=o&255),l}function tripletToBase64(t){return lookup$1[t>>18&63]+lookup$1[t>>12&63]+lookup$1[t>>6&63]+lookup$1[t&63]}function encodeChunk(t,e,n){for(var a,o=[],c=e;c<n;c+=3)a=(t[c]<<16)+(t[c+1]<<8)+t[c+2],o.push(tripletToBase64(a));return o.join("")}function fromByteArray(t){inited||init$1();for(var e,n=t.length,a=n%3,o="",c=[],l=16383,u=0,d=n-a;u<d;u+=l)c.push(encodeChunk(t,u,u+l>d?d:u+l));return a===1?(e=t[n-1],o+=lookup$1[e>>2],o+=lookup$1[e<<4&63],o+="=="):a===2&&(e=(t[n-2]<<8)+t[n-1],o+=lookup$1[e>>10],o+=lookup$1[e>>4&63],o+=lookup$1[e<<2&63],o+="="),c.push(o),c.join("")}function read$9(t,e,n,a,o){var c,l,u=o*8-a-1,d=(1<<u)-1,m=d>>1,b=-7,x=n?o-1:0,_=n?-1:1,w=t[e+x];for(x+=_,c=w&(1<<-b)-1,w>>=-b,b+=u;b>0;c=c*256+t[e+x],x+=_,b-=8);for(l=c&(1<<-b)-1,c>>=-b,b+=a;b>0;l=l*256+t[e+x],x+=_,b-=8);if(c===0)c=1-m;else{if(c===d)return l?NaN:(w?-1:1)*(1/0);l=l+Math.pow(2,a),c=c-m}return(w?-1:1)*l*Math.pow(2,c-a)}function write$4(t,e,n,a,o,c){var l,u,d,m=c*8-o-1,b=(1<<m)-1,x=b>>1,_=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=a?0:c-1,S=a?1:-1,T=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,l=b):(l=Math.floor(Math.log(e)/Math.LN2),e*(d=Math.pow(2,-l))<1&&(l--,d*=2),l+x>=1?e+=_/d:e+=_*Math.pow(2,1-x),e*d>=2&&(l++,d/=2),l+x>=b?(u=0,l=b):l+x>=1?(u=(e*d-1)*Math.pow(2,o),l=l+x):(u=e*Math.pow(2,x-1)*Math.pow(2,o),l=0));o>=8;t[n+w]=u&255,w+=S,u/=256,o-=8);for(l=l<<o|u,m+=o;m>0;t[n+w]=l&255,w+=S,l/=256,m-=8);t[n+w-S]|=T*128}var toString$b={}.toString,isArray$5=Array.isArray||function(t){return toString$b.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer$x.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer$x.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer$x.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Buffer$x.prototype):(t===null&&(t=new Buffer$x(e)),t.length=e),t}function Buffer$x(t,e,n){if(!Buffer$x.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer$x))return new Buffer$x(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe$3(this,t)}return from$a(this,t,e,n)}Buffer$x.poolSize=8192;Buffer$x._augment=function(t){return t.__proto__=Buffer$x.prototype,t};function from$a(t,e,n,a){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?fromArrayBuffer(t,e,n,a):typeof e=="string"?fromString$8(t,e,n):fromObject(t,e)}Buffer$x.from=function(t,e,n){return from$a(null,t,e,n)};Buffer$x.TYPED_ARRAY_SUPPORT&&(Buffer$x.prototype.__proto__=Uint8Array.prototype,Buffer$x.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer$x[Symbol.species]);function assertSize$1(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc$2(t,e,n,a){return assertSize$1(e),e<=0?createBuffer(t,e):n!==void 0?typeof a=="string"?createBuffer(t,e).fill(n,a):createBuffer(t,e).fill(n):createBuffer(t,e)}Buffer$x.alloc=function(t,e,n){return alloc$2(null,t,e,n)};function allocUnsafe$3(t,e){if(assertSize$1(e),t=createBuffer(t,e<0?0:checked(e)|0),!Buffer$x.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}Buffer$x.allocUnsafe=function(t){return allocUnsafe$3(null,t)};Buffer$x.allocUnsafeSlow=function(t){return allocUnsafe$3(null,t)};function fromString$8(t,e,n){if((typeof n!="string"||n==="")&&(n="utf8"),!Buffer$x.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var a=byteLength(e,n)|0;t=createBuffer(t,a);var o=t.write(e,n);return o!==a&&(t=t.slice(0,o)),t}function fromArrayLike(t,e){var n=e.length<0?0:checked(e.length)|0;t=createBuffer(t,n);for(var a=0;a<n;a+=1)t[a]=e[a]&255;return t}function fromArrayBuffer(t,e,n,a){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(a||0))throw new RangeError("'length' is out of bounds");return n===void 0&&a===void 0?e=new Uint8Array(e):a===void 0?e=new Uint8Array(e,n):e=new Uint8Array(e,n,a),Buffer$x.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Buffer$x.prototype):t=fromArrayLike(t,e),t}function fromObject(t,e){if(internalIsBuffer(e)){var n=checked(e.length)|0;return t=createBuffer(t,n),t.length===0||e.copy(t,0,0,n),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if(e.type==="Buffer"&&isArray$5(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return t|0}Buffer$x.isBuffer=isBuffer$3;function internalIsBuffer(t){return!!(t!=null&&t._isBuffer)}Buffer$x.compare=function(e,n){if(!internalIsBuffer(e)||!internalIsBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var a=e.length,o=n.length,c=0,l=Math.min(a,o);c<l;++c)if(e[c]!==n[c]){a=e[c],o=n[c];break}return a<o?-1:o<a?1:0};Buffer$x.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer$x.concat=function(e,n){if(!isArray$5(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Buffer$x.alloc(0);var a;if(n===void 0)for(n=0,a=0;a<e.length;++a)n+=e[a].length;var o=Buffer$x.allocUnsafe(n),c=0;for(a=0;a<e.length;++a){var l=e[a];if(!internalIsBuffer(l))throw new TypeError('"list" argument must be an Array of Buffers');l.copy(o,c),c+=l.length}return o};function byteLength(t,e){if(internalIsBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var a=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes$1(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return base64ToBytes$1(t).length;default:if(a)return utf8ToBytes$1(t).length;e=(""+e).toLowerCase(),a=!0}}Buffer$x.byteLength=byteLength;function slowToString(t,e,n){var a=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,e>>>=0,n<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,e,n);case"utf8":case"utf-8":return utf8Slice$1(this,e,n);case"ascii":return asciiSlice(this,e,n);case"latin1":case"binary":return latin1Slice(this,e,n);case"base64":return base64Slice(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,n);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}Buffer$x.prototype._isBuffer=!0;function swap(t,e,n){var a=t[e];t[e]=t[n],t[n]=a}Buffer$x.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)swap(this,n,n+1);return this};Buffer$x.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)swap(this,n,n+3),swap(this,n+1,n+2);return this};Buffer$x.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)swap(this,n,n+7),swap(this,n+1,n+6),swap(this,n+2,n+5),swap(this,n+3,n+4);return this};Buffer$x.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?utf8Slice$1(this,0,e):slowToString.apply(this,arguments)};Buffer$x.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Buffer$x.compare(this,e)===0};Buffer$x.prototype.inspect=function(){var e="",n=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"};Buffer$x.prototype.compare=function(e,n,a,o,c){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),a===void 0&&(a=e?e.length:0),o===void 0&&(o=0),c===void 0&&(c=this.length),n<0||a>e.length||o<0||c>this.length)throw new RangeError("out of range index");if(o>=c&&n>=a)return 0;if(o>=c)return-1;if(n>=a)return 1;if(n>>>=0,a>>>=0,o>>>=0,c>>>=0,this===e)return 0;for(var l=c-o,u=a-n,d=Math.min(l,u),m=this.slice(o,c),b=e.slice(n,a),x=0;x<d;++x)if(m[x]!==b[x]){l=m[x],u=b[x];break}return l<u?-1:u<l?1:0};function bidirectionalIndexOf(t,e,n,a,o){if(t.length===0)return-1;if(typeof n=="string"?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0)if(o)n=0;else return-1;if(typeof e=="string"&&(e=Buffer$x.from(e,a)),internalIsBuffer(e))return e.length===0?-1:arrayIndexOf(t,e,n,a,o);if(typeof e=="number")return e=e&255,Buffer$x.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):arrayIndexOf(t,[e],n,a,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,n,a,o){var c=1,l=t.length,u=e.length;if(a!==void 0&&(a=String(a).toLowerCase(),a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(t.length<2||e.length<2)return-1;c=2,l/=2,u/=2,n/=2}function d(w,S){return c===1?w[S]:w.readUInt16BE(S*c)}var m;if(o){var b=-1;for(m=n;m<l;m++)if(d(t,m)===d(e,b===-1?0:m-b)){if(b===-1&&(b=m),m-b+1===u)return b*c}else b!==-1&&(m-=m-b),b=-1}else for(n+u>l&&(n=l-u),m=n;m>=0;m--){for(var x=!0,_=0;_<u;_++)if(d(t,m+_)!==d(e,_)){x=!1;break}if(x)return m}return-1}Buffer$x.prototype.includes=function(e,n,a){return this.indexOf(e,n,a)!==-1};Buffer$x.prototype.indexOf=function(e,n,a){return bidirectionalIndexOf(this,e,n,a,!0)};Buffer$x.prototype.lastIndexOf=function(e,n,a){return bidirectionalIndexOf(this,e,n,a,!1)};function hexWrite(t,e,n,a){n=Number(n)||0;var o=t.length-n;a?(a=Number(a),a>o&&(a=o)):a=o;var c=e.length;if(c%2!==0)throw new TypeError("Invalid hex string");a>c/2&&(a=c/2);for(var l=0;l<a;++l){var u=parseInt(e.substr(l*2,2),16);if(isNaN(u))return l;t[n+l]=u}return l}function utf8Write(t,e,n,a){return blitBuffer(utf8ToBytes$1(e,t.length-n),t,n,a)}function asciiWrite(t,e,n,a){return blitBuffer(asciiToBytes(e),t,n,a)}function latin1Write(t,e,n,a){return asciiWrite(t,e,n,a)}function base64Write(t,e,n,a){return blitBuffer(base64ToBytes$1(e),t,n,a)}function ucs2Write(t,e,n,a){return blitBuffer(utf16leToBytes(e,t.length-n),t,n,a)}Buffer$x.prototype.write=function(e,n,a,o){if(n===void 0)o="utf8",a=this.length,n=0;else if(a===void 0&&typeof n=="string")o=n,a=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(a)?(a=a|0,o===void 0&&(o="utf8")):(o=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var c=this.length-n;if((a===void 0||a>c)&&(a=c),e.length>0&&(a<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var l=!1;;)switch(o){case"hex":return hexWrite(this,e,n,a);case"utf8":case"utf-8":return utf8Write(this,e,n,a);case"ascii":return asciiWrite(this,e,n,a);case"latin1":case"binary":return latin1Write(this,e,n,a);case"base64":return base64Write(this,e,n,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,n,a);default:if(l)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),l=!0}};Buffer$x.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(t,e,n){return e===0&&n===t.length?fromByteArray(t):fromByteArray(t.slice(e,n))}function utf8Slice$1(t,e,n){n=Math.min(t.length,n);for(var a=[],o=e;o<n;){var c=t[o],l=null,u=c>239?4:c>223?3:c>191?2:1;if(o+u<=n){var d,m,b,x;switch(u){case 1:c<128&&(l=c);break;case 2:d=t[o+1],(d&192)===128&&(x=(c&31)<<6|d&63,x>127&&(l=x));break;case 3:d=t[o+1],m=t[o+2],(d&192)===128&&(m&192)===128&&(x=(c&15)<<12|(d&63)<<6|m&63,x>2047&&(x<55296||x>57343)&&(l=x));break;case 4:d=t[o+1],m=t[o+2],b=t[o+3],(d&192)===128&&(m&192)===128&&(b&192)===128&&(x=(c&15)<<18|(d&63)<<12|(m&63)<<6|b&63,x>65535&&x<1114112&&(l=x))}}l===null?(l=65533,u=1):l>65535&&(l-=65536,a.push(l>>>10&1023|55296),l=56320|l&1023),a.push(l),o+=u}return decodeCodePointsArray$1(a)}var MAX_ARGUMENTS_LENGTH$1=4096;function decodeCodePointsArray$1(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH$1)return String.fromCharCode.apply(String,t);for(var n="",a=0;a<e;)n+=String.fromCharCode.apply(String,t.slice(a,a+=MAX_ARGUMENTS_LENGTH$1));return n}function asciiSlice(t,e,n){var a="";n=Math.min(t.length,n);for(var o=e;o<n;++o)a+=String.fromCharCode(t[o]&127);return a}function latin1Slice(t,e,n){var a="";n=Math.min(t.length,n);for(var o=e;o<n;++o)a+=String.fromCharCode(t[o]);return a}function hexSlice(t,e,n){var a=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>a)&&(n=a);for(var o="",c=e;c<n;++c)o+=toHex$2(t[c]);return o}function utf16leSlice(t,e,n){for(var a=t.slice(e,n),o="",c=0;c<a.length;c+=2)o+=String.fromCharCode(a[c]+a[c+1]*256);return o}Buffer$x.prototype.slice=function(e,n){var a=this.length;e=~~e,n=n===void 0?a:~~n,e<0?(e+=a,e<0&&(e=0)):e>a&&(e=a),n<0?(n+=a,n<0&&(n=0)):n>a&&(n=a),n<e&&(n=e);var o;if(Buffer$x.TYPED_ARRAY_SUPPORT)o=this.subarray(e,n),o.__proto__=Buffer$x.prototype;else{var c=n-e;o=new Buffer$x(c,void 0);for(var l=0;l<c;++l)o[l]=this[l+e]}return o};function checkOffset(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}Buffer$x.prototype.readUIntLE=function(e,n,a){e=e|0,n=n|0,a||checkOffset(e,n,this.length);for(var o=this[e],c=1,l=0;++l<n&&(c*=256);)o+=this[e+l]*c;return o};Buffer$x.prototype.readUIntBE=function(e,n,a){e=e|0,n=n|0,a||checkOffset(e,n,this.length);for(var o=this[e+--n],c=1;n>0&&(c*=256);)o+=this[e+--n]*c;return o};Buffer$x.prototype.readUInt8=function(e,n){return n||checkOffset(e,1,this.length),this[e]};Buffer$x.prototype.readUInt16LE=function(e,n){return n||checkOffset(e,2,this.length),this[e]|this[e+1]<<8};Buffer$x.prototype.readUInt16BE=function(e,n){return n||checkOffset(e,2,this.length),this[e]<<8|this[e+1]};Buffer$x.prototype.readUInt32LE=function(e,n){return n||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer$x.prototype.readUInt32BE=function(e,n){return n||checkOffset(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer$x.prototype.readIntLE=function(e,n,a){e=e|0,n=n|0,a||checkOffset(e,n,this.length);for(var o=this[e],c=1,l=0;++l<n&&(c*=256);)o+=this[e+l]*c;return c*=128,o>=c&&(o-=Math.pow(2,8*n)),o};Buffer$x.prototype.readIntBE=function(e,n,a){e=e|0,n=n|0,a||checkOffset(e,n,this.length);for(var o=n,c=1,l=this[e+--o];o>0&&(c*=256);)l+=this[e+--o]*c;return c*=128,l>=c&&(l-=Math.pow(2,8*n)),l};Buffer$x.prototype.readInt8=function(e,n){return n||checkOffset(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Buffer$x.prototype.readInt16LE=function(e,n){n||checkOffset(e,2,this.length);var a=this[e]|this[e+1]<<8;return a&32768?a|4294901760:a};Buffer$x.prototype.readInt16BE=function(e,n){n||checkOffset(e,2,this.length);var a=this[e+1]|this[e]<<8;return a&32768?a|4294901760:a};Buffer$x.prototype.readInt32LE=function(e,n){return n||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer$x.prototype.readInt32BE=function(e,n){return n||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer$x.prototype.readFloatLE=function(e,n){return n||checkOffset(e,4,this.length),read$9(this,e,!0,23,4)};Buffer$x.prototype.readFloatBE=function(e,n){return n||checkOffset(e,4,this.length),read$9(this,e,!1,23,4)};Buffer$x.prototype.readDoubleLE=function(e,n){return n||checkOffset(e,8,this.length),read$9(this,e,!0,52,8)};Buffer$x.prototype.readDoubleBE=function(e,n){return n||checkOffset(e,8,this.length),read$9(this,e,!1,52,8)};function checkInt(t,e,n,a,o,c){if(!internalIsBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<c)throw new RangeError('"value" argument is out of bounds');if(n+a>t.length)throw new RangeError("Index out of range")}Buffer$x.prototype.writeUIntLE=function(e,n,a,o){if(e=+e,n=n|0,a=a|0,!o){var c=Math.pow(2,8*a)-1;checkInt(this,e,n,a,c,0)}var l=1,u=0;for(this[n]=e&255;++u<a&&(l*=256);)this[n+u]=e/l&255;return n+a};Buffer$x.prototype.writeUIntBE=function(e,n,a,o){if(e=+e,n=n|0,a=a|0,!o){var c=Math.pow(2,8*a)-1;checkInt(this,e,n,a,c,0)}var l=a-1,u=1;for(this[n+l]=e&255;--l>=0&&(u*=256);)this[n+l]=e/u&255;return n+a};Buffer$x.prototype.writeUInt8=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,1,255,0),Buffer$x.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e&255,n+1};function objectWriteUInt16(t,e,n,a){e<0&&(e=65535+e+1);for(var o=0,c=Math.min(t.length-n,2);o<c;++o)t[n+o]=(e&255<<8*(a?o:1-o))>>>(a?o:1-o)*8}Buffer$x.prototype.writeUInt16LE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,2,65535,0),Buffer$x.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2};Buffer$x.prototype.writeUInt16BE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,2,65535,0),Buffer$x.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):objectWriteUInt16(this,e,n,!1),n+2};function objectWriteUInt32(t,e,n,a){e<0&&(e=4294967295+e+1);for(var o=0,c=Math.min(t.length-n,4);o<c;++o)t[n+o]=e>>>(a?o:3-o)*8&255}Buffer$x.prototype.writeUInt32LE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,4,4294967295,0),Buffer$x.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e&255):objectWriteUInt32(this,e,n,!0),n+4};Buffer$x.prototype.writeUInt32BE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,4,4294967295,0),Buffer$x.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):objectWriteUInt32(this,e,n,!1),n+4};Buffer$x.prototype.writeIntLE=function(e,n,a,o){if(e=+e,n=n|0,!o){var c=Math.pow(2,8*a-1);checkInt(this,e,n,a,c-1,-c)}var l=0,u=1,d=0;for(this[n]=e&255;++l<a&&(u*=256);)e<0&&d===0&&this[n+l-1]!==0&&(d=1),this[n+l]=(e/u>>0)-d&255;return n+a};Buffer$x.prototype.writeIntBE=function(e,n,a,o){if(e=+e,n=n|0,!o){var c=Math.pow(2,8*a-1);checkInt(this,e,n,a,c-1,-c)}var l=a-1,u=1,d=0;for(this[n+l]=e&255;--l>=0&&(u*=256);)e<0&&d===0&&this[n+l+1]!==0&&(d=1),this[n+l]=(e/u>>0)-d&255;return n+a};Buffer$x.prototype.writeInt8=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,1,127,-128),Buffer$x.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=e&255,n+1};Buffer$x.prototype.writeInt16LE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,2,32767,-32768),Buffer$x.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2};Buffer$x.prototype.writeInt16BE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,2,32767,-32768),Buffer$x.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):objectWriteUInt16(this,e,n,!1),n+2};Buffer$x.prototype.writeInt32LE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,4,2147483647,-2147483648),Buffer$x.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):objectWriteUInt32(this,e,n,!0),n+4};Buffer$x.prototype.writeInt32BE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer$x.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):objectWriteUInt32(this,e,n,!1),n+4};function checkIEEE754(t,e,n,a,o,c){if(n+a>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(t,e,n,a,o){return o||checkIEEE754(t,e,n,4),write$4(t,e,n,a,23,4),n+4}Buffer$x.prototype.writeFloatLE=function(e,n,a){return writeFloat(this,e,n,!0,a)};Buffer$x.prototype.writeFloatBE=function(e,n,a){return writeFloat(this,e,n,!1,a)};function writeDouble(t,e,n,a,o){return o||checkIEEE754(t,e,n,8),write$4(t,e,n,a,52,8),n+8}Buffer$x.prototype.writeDoubleLE=function(e,n,a){return writeDouble(this,e,n,!0,a)};Buffer$x.prototype.writeDoubleBE=function(e,n,a){return writeDouble(this,e,n,!1,a)};Buffer$x.prototype.copy=function(e,n,a,o){if(a||(a=0),!o&&o!==0&&(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<a&&(o=a),o===a||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-a&&(o=e.length-n+a);var c=o-a,l;if(this===e&&a<n&&n<o)for(l=c-1;l>=0;--l)e[l+n]=this[l+a];else if(c<1e3||!Buffer$x.TYPED_ARRAY_SUPPORT)for(l=0;l<c;++l)e[l+n]=this[l+a];else Uint8Array.prototype.set.call(e,this.subarray(a,a+c),n);return c};Buffer$x.prototype.fill=function(e,n,a,o){if(typeof e=="string"){if(typeof n=="string"?(o=n,n=0,a=this.length):typeof a=="string"&&(o=a,a=this.length),e.length===1){var c=e.charCodeAt(0);c<256&&(e=c)}if(o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!Buffer$x.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else typeof e=="number"&&(e=e&255);if(n<0||this.length<n||this.length<a)throw new RangeError("Out of range index");if(a<=n)return this;n=n>>>0,a=a===void 0?this.length:a>>>0,e||(e=0);var l;if(typeof e=="number")for(l=n;l<a;++l)this[l]=e;else{var u=internalIsBuffer(e)?e:utf8ToBytes$1(new Buffer$x(e,o).toString()),d=u.length;for(l=0;l<a-n;++l)this[l+n]=u[l%d]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex$2(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes$1(t,e){e=e||1/0;for(var n,a=t.length,o=null,c=[],l=0;l<a;++l){if(n=t.charCodeAt(l),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&c.push(239,191,189);continue}else if(l+1===a){(e-=3)>-1&&c.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&c.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&c.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;c.push(n)}else if(n<2048){if((e-=2)<0)break;c.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;c.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;c.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return c}function asciiToBytes(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n)&255);return e}function utf16leToBytes(t,e){for(var n,a,o,c=[],l=0;l<t.length&&!((e-=2)<0);++l)n=t.charCodeAt(l),a=n>>8,o=n%256,c.push(o),c.push(a);return c}function base64ToBytes$1(t){return toByteArray(base64clean(t))}function blitBuffer(t,e,n,a){for(var o=0;o<a&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function isnan(t){return t!==t}function isBuffer$3(t){return t!=null&&(!!t._isBuffer||isFastBuffer(t)||isSlowBuffer(t))}function isFastBuffer(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function isSlowBuffer(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&isFastBuffer(t.slice(0,0))}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};BufferList.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n};BufferList.prototype.concat=function(t){if(this.length===0)return buffer$3.Buffer.alloc(0);if(this.length===1)return this.head.data;for(var e=buffer$3.Buffer.allocUnsafe(t>>>0),n=this.head,a=0;n;)n.data.copy(e,a),a+=n.data.length,n=n.next;return e};Readable.ReadableState=ReadableState;var debug$1=util$9.debuglog("stream");util$9.inherits(Readable,eventsExports);function prependListener(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}function listenerCount(t,e){return t.listeners(e).length}function ReadableState(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof Duplex&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,a=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:a,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new StringDecoder_1(t.encoding),this.encoding=t.encoding)}function Readable(t){if(!(this instanceof Readable))return new Readable(t);this._readableState=new ReadableState(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),eventsExports.call(this)}Readable.prototype.push=function(t,e){var n=this._readableState;return!n.objectMode&&typeof t=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=Buffer$x.from(t,e),e="")),readableAddChunk(this,n,t,e,!1)};Readable.prototype.unshift=function(t){var e=this._readableState;return readableAddChunk(this,e,t,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(t,e,n,a,o){var c=chunkInvalid(e,n);if(c)t.emit("error",c);else if(n===null)e.reading=!1,onEofChunk(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!o){var l=new Error("stream.push() after EOF");t.emit("error",l)}else if(e.endEmitted&&o){var u=new Error("stream.unshift() after end event");t.emit("error",u)}else{var d;e.decoder&&!o&&!a&&(n=e.decoder.write(n),d=!e.objectMode&&n.length===0),o||(e.reading=!1),d||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&emitReadable(t))),maybeReadMore(t,e)}else o||(e.reading=!1);return needMoreData(e)}function needMoreData(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}Readable.prototype.setEncoding=function(t){return this._readableState.decoder=new StringDecoder_1(t),this._readableState.encoding=t,this};var MAX_HWM=8388608;function computeNewHighWaterMark(t){return t>=MAX_HWM?t=MAX_HWM:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function howMuchToRead(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=computeNewHighWaterMark(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Readable.prototype.read=function(t){debug$1("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return debug$1("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?endReadable(this):emitReadable(this),null;if(t=howMuchToRead(t,e),t===0&&e.ended)return e.length===0&&endReadable(this),null;var a=e.needReadable;debug$1("need readable",a),(e.length===0||e.length-t<e.highWaterMark)&&(a=!0,debug$1("length less than watermark",a)),e.ended||e.reading?(a=!1,debug$1("reading or ended",a)):a&&(debug$1("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=howMuchToRead(n,e)));var o;return t>0?o=fromList(t,e):o=null,o===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&endReadable(this)),o!==null&&this.emit("data",o),o};function chunkInvalid(t,e){var n=null;return!Buffer$x.isBuffer(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!t.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,emitReadable(t)}}function emitReadable(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(debug$1("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?browserExports$3.nextTick(emitReadable_,t):emitReadable_(t))}function emitReadable_(t){debug$1("emit readable"),t.emit("readable"),flow(t)}function maybeReadMore(t,e){e.readingMore||(e.readingMore=!0,browserExports$3.nextTick(maybeReadMore_,t,e))}function maybeReadMore_(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(debug$1("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}Readable.prototype._read=function(t){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(t,e){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t);break}a.pipesCount+=1,debug$1("pipe count=%d opts=%j",a.pipesCount,e);var o=!e||e.end!==!1,c=o?u:b;a.endEmitted?browserExports$3.nextTick(c):n.once("end",c),t.on("unpipe",l);function l(C){debug$1("onunpipe"),C===n&&b()}function u(){debug$1("onend"),t.end()}var d=pipeOnDrain(n);t.on("drain",d);var m=!1;function b(){debug$1("cleanup"),t.removeListener("close",S),t.removeListener("finish",T),t.removeListener("drain",d),t.removeListener("error",w),t.removeListener("unpipe",l),n.removeListener("end",u),n.removeListener("end",b),n.removeListener("data",_),m=!0,a.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&d()}var x=!1;n.on("data",_);function _(C){debug$1("ondata"),x=!1;var D=t.write(C);D===!1&&!x&&((a.pipesCount===1&&a.pipes===t||a.pipesCount>1&&indexOf(a.pipes,t)!==-1)&&!m&&(debug$1("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,x=!0),n.pause())}function w(C){debug$1("onerror",C),B(),t.removeListener("error",w),listenerCount(t,"error")===0&&t.emit("error",C)}prependListener(t,"error",w);function S(){t.removeListener("finish",T),B()}t.once("close",S);function T(){debug$1("onfinish"),t.removeListener("close",S),B()}t.once("finish",T);function B(){debug$1("unpipe"),n.unpipe(t)}return t.emit("pipe",n),a.flowing||(debug$1("pipe resume"),n.resume()),t};function pipeOnDrain(t){return function(){var e=t._readableState;debug$1("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&t.listeners("data").length&&(e.flowing=!0,flow(t))}}Readable.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,a=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<a;o++)n[o].emit("unpipe",this);return this}var c=indexOf(e.pipes,t);return c===-1?this:(e.pipes.splice(c,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)};Readable.prototype.on=function(t,e){var n=eventsExports.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var a=this._readableState;!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&emitReadable(this):browserExports$3.nextTick(nReadingNextTick,this))}return n};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(t){debug$1("readable nexttick read 0"),t.read(0)}Readable.prototype.resume=function(){var t=this._readableState;return t.flowing||(debug$1("resume"),t.flowing=!0,resume(this,t)),this};function resume(t,e){e.resumeScheduled||(e.resumeScheduled=!0,browserExports$3.nextTick(resume_,t,e))}function resume_(t,e){e.reading||(debug$1("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),flow(t),e.flowing&&!e.reading&&t.read(0)}Readable.prototype.pause=function(){return debug$1("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug$1("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(t){var e=t._readableState;for(debug$1("flow",e.flowing);e.flowing&&t.read()!==null;);}Readable.prototype.wrap=function(t){var e=this._readableState,n=!1,a=this;t.on("end",function(){if(debug$1("wrapped end"),e.decoder&&!e.ended){var l=e.decoder.end();l&&l.length&&a.push(l)}a.push(null)}),t.on("data",function(l){if(debug$1("wrapped data"),e.decoder&&(l=e.decoder.write(l)),!(e.objectMode&&l==null)&&!(!e.objectMode&&(!l||!l.length))){var u=a.push(l);u||(n=!0,t.pause())}});for(var o in t)this[o]===void 0&&typeof t[o]=="function"&&(this[o]=function(l){return function(){return t[l].apply(t,arguments)}}(o));var c=["error","close","destroy","pause","resume"];return forEach$1(c,function(l){t.on(l,a.emit.bind(a,l))}),a._read=function(l){debug$1("wrapped _read",l),n&&(n=!1,t.resume())},a};Readable._fromList=fromList;function fromList(t,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.head.data:n=e.buffer.concat(e.length),e.buffer.clear()):n=fromListPartial(t,e.buffer,e.decoder),n}function fromListPartial(t,e,n){var a;return t<e.head.data.length?(a=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?a=e.shift():a=n?copyFromBufferString(t,e):copyFromBuffer(t,e),a}function copyFromBufferString(t,e){var n=e.head,a=1,o=n.data;for(t-=o.length;n=n.next;){var c=n.data,l=t>c.length?c.length:t;if(l===c.length?o+=c:o+=c.slice(0,t),t-=l,t===0){l===c.length?(++a,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=c.slice(l));break}++a}return e.length-=a,o}function copyFromBuffer(t,e){var n=Buffer$x.allocUnsafe(t),a=e.head,o=1;for(a.data.copy(n),t-=a.data.length;a=a.next;){var c=a.data,l=t>c.length?c.length:t;if(c.copy(n,n.length-t,0,l),t-=l,t===0){l===c.length?(++o,a.next?e.head=a.next:e.head=e.tail=null):(e.head=a,a.data=c.slice(l));break}++o}return e.length-=o,n}function endReadable(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,browserExports$3.nextTick(endReadableNT,e,t))}function endReadableNT(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function forEach$1(t,e){for(var n=0,a=t.length;n<a;n++)e(t[n],n)}function indexOf(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1}Writable.WritableState=WritableState;util$9.inherits(Writable,eventsExports.EventEmitter);function nop(){}function WriteReq(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function WritableState(t,e){Object.defineProperty(this,"buffer",{get:util$9.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof Duplex&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,a=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:a,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(c){onwrite(e,c)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,n=[];e;)n.push(e),e=e.next;return n};function Writable(t){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(t);this._writableState=new WritableState(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),eventsExports.EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(t,e){var n=new Error("write after end");t.emit("error",n),browserExports$3.nextTick(e,n)}function validChunk(t,e,n,a){var o=!0,c=!1;return n===null?c=new TypeError("May not write null values to stream"):!buffer$3.Buffer.isBuffer(n)&&typeof n!="string"&&n!==void 0&&!e.objectMode&&(c=new TypeError("Invalid non-string/buffer chunk")),c&&(t.emit("error",c),browserExports$3.nextTick(a,c),o=!1),o}Writable.prototype.write=function(t,e,n){var a=this._writableState,o=!1;return typeof e=="function"&&(n=e,e=null),buffer$3.Buffer.isBuffer(t)?e="buffer":e||(e=a.defaultEncoding),typeof n!="function"&&(n=nop),a.ended?writeAfterEnd(this,n):validChunk(this,a,t,n)&&(a.pendingcb++,o=writeOrBuffer(this,a,t,e,n)),o};Writable.prototype.cork=function(){var t=this._writableState;t.corked++};Writable.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&clearBuffer(this,t))};Writable.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function decodeChunk(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=buffer$3.Buffer.from(e,n)),e}function writeOrBuffer(t,e,n,a,o){n=decodeChunk(e,n,a),buffer$3.Buffer.isBuffer(n)&&(a="buffer");var c=e.objectMode?1:n.length;e.length+=c;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest=new WriteReq(n,a,o),u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else doWrite(t,e,!1,c,n,a,o);return l}function doWrite(t,e,n,a,o,c,l){e.writelen=a,e.writecb=l,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,c,e.onwrite),e.sync=!1}function onwriteError(t,e,n,a,o){--e.pendingcb,n?browserExports$3.nextTick(o,a):o(a),t._writableState.errorEmitted=!0,t.emit("error",a)}function onwriteStateUpdate(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function onwrite(t,e){var n=t._writableState,a=n.sync,o=n.writecb;if(onwriteStateUpdate(n),e)onwriteError(t,n,a,e,o);else{var c=needFinish(n);!c&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&clearBuffer(t,n),a?browserExports$3.nextTick(afterWrite,t,n,c,o):afterWrite(t,n,c,o)}}function afterWrite(t,e,n,a){n||onwriteDrain(t,e),e.pendingcb--,a(),finishMaybe(t,e)}function onwriteDrain(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function clearBuffer(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var a=e.bufferedRequestCount,o=new Array(a),c=e.corkedRequestsFree;c.entry=n;for(var l=0;n;)o[l]=n,n=n.next,l+=1;doWrite(t,e,!0,e.length,o,"",c.finish),e.pendingcb++,e.lastBufferedRequest=null,c.next?(e.corkedRequestsFree=c.next,c.next=null):e.corkedRequestsFree=new CorkedRequest(e)}else{for(;n;){var u=n.chunk,d=n.encoding,m=n.callback,b=e.objectMode?1:u.length;if(doWrite(t,e,!1,b,u,d,m),n=n.next,e.writing)break}n===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}Writable.prototype._write=function(t,e,n){n(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(t,e,n){var a=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null),t!=null&&this.write(t,e),a.corked&&(a.corked=1,this.uncork()),!a.ending&&!a.finished&&endWritable(this,a,n)};function needFinish(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function prefinish(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function finishMaybe(t,e){var n=needFinish(e);return n&&(e.pendingcb===0?(prefinish(t,e),e.finished=!0,t.emit("finish")):prefinish(t,e)),n}function endWritable(t,e,n){e.ending=!0,finishMaybe(t,e),n&&(e.finished?browserExports$3.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function CorkedRequest(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var a=e.entry;for(e.entry=null;a;){var o=a.callback;t.pendingcb--,o(n),a=a.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}util$9.inherits(Duplex,Readable);var keys$2=Object.keys(Writable.prototype);for(var v=0;v<keys$2.length;v++){var method=keys$2[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(t){if(!(this instanceof Duplex))return new Duplex(t);Readable.call(this,t),Writable.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||browserExports$3.nextTick(onEndNT,this)}function onEndNT(t){t.end()}util$9.inherits(Transform$5,Duplex);function TransformState(t){this.afterTransform=function(e,n){return afterTransform(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(t,e,n){var a=t._transformState;a.transforming=!1;var o=a.writecb;if(!o)return t.emit("error",new Error("no writecb in Transform class"));a.writechunk=null,a.writecb=null,n!=null&&t.push(n),o(e);var c=t._readableState;c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&t._read(c.highWaterMark)}function Transform$5(t){if(!(this instanceof Transform$5))return new Transform$5(t);Duplex.call(this,t),this._transformState=new TransformState(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){done(e,n)}):done(e)})}Transform$5.prototype.push=function(t,e){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,t,e)};Transform$5.prototype._transform=function(t,e,n){throw new Error("Not implemented")};Transform$5.prototype._write=function(t,e,n){var a=this._transformState;if(a.writecb=n,a.writechunk=t,a.writeencoding=e,!a.transforming){var o=this._readableState;(a.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Transform$5.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function done(t,e){if(e)return t.emit("error",e);var n=t._writableState,a=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(a.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}util$9.inherits(PassThrough,Transform$5);function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);Transform$5.call(this,t)}PassThrough.prototype._transform=function(t,e,n){n(null,t)};util$9.inherits(Stream,eventsExports);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform$5;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){eventsExports.call(this)}Stream.prototype.pipe=function(t,e){var n=this;function a(b){t.writable&&t.write(b)===!1&&n.pause&&n.pause()}n.on("data",a);function o(){n.readable&&n.resume&&n.resume()}t.on("drain",o),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",l),n.on("close",u));var c=!1;function l(){c||(c=!0,t.end())}function u(){c||(c=!0,typeof t.destroy=="function"&&t.destroy())}function d(b){if(m(),eventsExports.listenerCount(this,"error")===0)throw b}n.on("error",d),t.on("error",d);function m(){n.removeListener("data",a),t.removeListener("drain",o),n.removeListener("end",l),n.removeListener("close",u),n.removeListener("error",d),t.removeListener("error",d),n.removeListener("end",m),n.removeListener("close",m),t.removeListener("close",m)}return n.on("end",m),n.on("close",m),t.on("close",m),t.emit("pipe",n),t};const stream$2=Object.freeze(Object.defineProperty({__proto__:null,Duplex,PassThrough,Readable,Stream,Transform:Transform$5,Writable,default:Stream},Symbol.toStringTag,{value:"Module"})),require$$1$3=getAugmentedNamespace(stream$2);var Buffer$w=safeBufferExports.Buffer,Transform$4=require$$1$3.Transform,StringDecoder=string_decoder.StringDecoder,inherits$n=inherits_browserExports;function CipherBase$1(t){Transform$4.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}inherits$n(CipherBase$1,Transform$4);CipherBase$1.prototype.update=function(t,e,n){typeof t=="string"&&(t=Buffer$w.from(t,e));var a=this._update(t);return this.hashMode?this:(n&&(a=this._toString(a,n)),a)};CipherBase$1.prototype.setAutoPadding=function(){};CipherBase$1.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};CipherBase$1.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};CipherBase$1.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};CipherBase$1.prototype._transform=function(t,e,n){var a;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(o){a=o}finally{n(a)}};CipherBase$1.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(n){e=n}t(e)};CipherBase$1.prototype._finalOrDigest=function(t){var e=this.__final()||Buffer$w.alloc(0);return t&&(e=this._toString(e,t,!0)),e};CipherBase$1.prototype._toString=function(t,e,n){if(this._decoder||(this._decoder=new StringDecoder(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var a=this._decoder.write(t);return n&&(a+=this._decoder.end()),a};var cipherBase=CipherBase$1,inherits$m=inherits_browserExports,MD5$2=md5_js,RIPEMD160$3=ripemd160$1,sha$6=sha_jsExports,Base$5=cipherBase;function Hash(t){Base$5.call(this,"digest"),this._hash=t}inherits$m(Hash,Base$5);Hash.prototype._update=function(t){this._hash.update(t)};Hash.prototype._final=function(){return this._hash.digest()};var browser$e=function(e){return e=e.toLowerCase(),e==="md5"?new MD5$2:e==="rmd160"||e==="ripemd160"?new RIPEMD160$3:new Hash(sha$6(e))},inherits$l=inherits_browserExports,Buffer$v=safeBufferExports.Buffer,Base$4=cipherBase,ZEROS$2=Buffer$v.alloc(128),blocksize=64;function Hmac$3(t,e){Base$4.call(this,"digest"),typeof e=="string"&&(e=Buffer$v.from(e)),this._alg=t,this._key=e,e.length>blocksize?e=t(e):e.length<blocksize&&(e=Buffer$v.concat([e,ZEROS$2],blocksize));for(var n=this._ipad=Buffer$v.allocUnsafe(blocksize),a=this._opad=Buffer$v.allocUnsafe(blocksize),o=0;o<blocksize;o++)n[o]=e[o]^54,a[o]=e[o]^92;this._hash=[n]}inherits$l(Hmac$3,Base$4);Hmac$3.prototype._update=function(t){this._hash.push(t)};Hmac$3.prototype._final=function(){var t=this._alg(Buffer$v.concat(this._hash));return this._alg(Buffer$v.concat([this._opad,t]))};var legacy=Hmac$3,MD5$1=md5_js,md5$2=function(t){return new MD5$1().update(t).digest()},inherits$k=inherits_browserExports,Legacy=legacy,Base$3=cipherBase,Buffer$u=safeBufferExports.Buffer,md5$1=md5$2,RIPEMD160$2=ripemd160$1,sha$5=sha_jsExports,ZEROS$1=Buffer$u.alloc(128);function Hmac$2(t,e){Base$3.call(this,"digest"),typeof e=="string"&&(e=Buffer$u.from(e));var n=t==="sha512"||t==="sha384"?128:64;if(this._alg=t,this._key=e,e.length>n){var a=t==="rmd160"?new RIPEMD160$2:sha$5(t);e=a.update(e).digest()}else e.length<n&&(e=Buffer$u.concat([e,ZEROS$1],n));for(var o=this._ipad=Buffer$u.allocUnsafe(n),c=this._opad=Buffer$u.allocUnsafe(n),l=0;l<n;l++)o[l]=e[l]^54,c[l]=e[l]^92;this._hash=t==="rmd160"?new RIPEMD160$2:sha$5(t),this._hash.update(o)}inherits$k(Hmac$2,Base$3);Hmac$2.prototype._update=function(t){this._hash.update(t)};Hmac$2.prototype._final=function(){var t=this._hash.digest(),e=this._alg==="rmd160"?new RIPEMD160$2:sha$5(this._alg);return e.update(this._opad).update(t).digest()};var browser$d=function(e,n){return e=e.toLowerCase(),e==="rmd160"||e==="ripemd160"?new Hmac$2("rmd160",n):e==="md5"?new Legacy(md5$1,n):new Hmac$2(e,n)},algosExports={},algos={get exports(){return algosExports},set exports(t){algosExports=t}};const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$7={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$2={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$7,sha224,sha384:sha384$1,sha512:sha512$2,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};(function(t){t.exports=require$$6})(algos);var browser$c={},MAX_ALLOC=Math.pow(2,30)-1,precondition=function(t,e){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if(typeof e!="number")throw new TypeError("Key length not a number");if(e<0||e>MAX_ALLOC||e!==e)throw new TypeError("Bad key length")},defaultEncoding$2;if(globalThis.process&&globalThis.process.browser)defaultEncoding$2="utf-8";else if(globalThis.process&&globalThis.process.version){var pVersionMajor=parseInt(browser$1$1.version.split(".")[0].slice(1),10);defaultEncoding$2=pVersionMajor>=6?"utf-8":"binary"}else defaultEncoding$2="utf-8";var defaultEncoding_1=defaultEncoding$2,Buffer$t=safeBufferExports.Buffer,toBuffer$4=function(t,e,n){if(Buffer$t.isBuffer(t))return t;if(typeof t=="string")return Buffer$t.from(t,e);if(ArrayBuffer.isView(t))return Buffer$t.from(t.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")},md5=md5$2,RIPEMD160$1=ripemd160$1,sha$4=sha_jsExports,Buffer$s=safeBufferExports.Buffer,checkParameters$1=precondition,defaultEncoding$1=defaultEncoding_1,toBuffer$3=toBuffer$4,ZEROS=Buffer$s.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac$1(t,e,n){var a=getDigest(t),o=t==="sha512"||t==="sha384"?128:64;e.length>o?e=a(e):e.length<o&&(e=Buffer$s.concat([e,ZEROS],o));for(var c=Buffer$s.allocUnsafe(o+sizes[t]),l=Buffer$s.allocUnsafe(o+sizes[t]),u=0;u<o;u++)c[u]=e[u]^54,l[u]=e[u]^92;var d=Buffer$s.allocUnsafe(o+n+4);c.copy(d,0,0,o),this.ipad1=d,this.ipad2=c,this.opad=l,this.alg=t,this.blocksize=o,this.hash=a,this.size=sizes[t]}Hmac$1.prototype.run=function(t,e){t.copy(e,this.blocksize);var n=this.hash(e);return n.copy(this.opad,this.blocksize),this.hash(this.opad)};function getDigest(t){function e(a){return sha$4(t).update(a).digest()}function n(a){return new RIPEMD160$1().update(a).digest()}return t==="rmd160"||t==="ripemd160"?n:t==="md5"?md5:e}function pbkdf2$3(t,e,n,a,o){checkParameters$1(n,a),t=toBuffer$3(t,defaultEncoding$1,"Password"),e=toBuffer$3(e,defaultEncoding$1,"Salt"),o=o||"sha1";var c=new Hmac$1(o,t,e.length),l=Buffer$s.allocUnsafe(a),u=Buffer$s.allocUnsafe(e.length+4);e.copy(u,0,0,e.length);for(var d=0,m=sizes[o],b=Math.ceil(a/m),x=1;x<=b;x++){u.writeUInt32BE(x,e.length);for(var _=c.run(u,c.ipad1),w=_,S=1;S<n;S++){w=c.run(w,c.ipad2);for(var T=0;T<m;T++)_[T]^=w[T]}_.copy(l,d),d+=m}return l}var syncBrowser=pbkdf2$3,Buffer$r=safeBufferExports.Buffer,checkParameters=precondition,defaultEncoding=defaultEncoding_1,sync$1=syncBrowser,toBuffer$2=toBuffer$4,ZERO_BUF,subtle=globalThis.crypto&&globalThis.crypto.subtle,toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},checks=[];function checkNative(t){if(globalThis.process&&!globalThis.process.browser||!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(checks[t]!==void 0)return checks[t];ZERO_BUF=ZERO_BUF||Buffer$r.alloc(8);var e=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,t).then(function(){return!0}).catch(function(){return!1});return checks[t]=e,e}var nextTick$1;function getNextTick(){return nextTick$1||(globalThis.process&&globalThis.process.nextTick?nextTick$1=globalThis.process.nextTick:globalThis.queueMicrotask?nextTick$1=globalThis.queueMicrotask:globalThis.setImmediate?nextTick$1=globalThis.setImmediate:nextTick$1=globalThis.setTimeout,nextTick$1)}function browserPbkdf2(t,e,n,a,o){return subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(c){return subtle.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:o}},c,a<<3)}).then(function(c){return Buffer$r.from(c)})}function resolvePromise(t,e){t.then(function(n){getNextTick()(function(){e(null,n)})},function(n){getNextTick()(function(){e(n)})})}var async=function(t,e,n,a,o,c){typeof o=="function"&&(c=o,o=void 0),o=o||"sha1";var l=toBrowser[o.toLowerCase()];if(!l||typeof globalThis.Promise!="function"){getNextTick()(function(){var u;try{u=sync$1(t,e,n,a,o)}catch(d){return c(d)}c(null,u)});return}if(checkParameters(n,a),t=toBuffer$2(t,defaultEncoding,"Password"),e=toBuffer$2(e,defaultEncoding,"Salt"),typeof c!="function")throw new Error("No callback provided to pbkdf2");resolvePromise(checkNative(l).then(function(u){return u?browserPbkdf2(t,e,n,a,l):sync$1(t,e,n,a,o)}),c)};browser$c.pbkdf2=async;browser$c.pbkdf2Sync=syncBrowser;var browser$b={},des$2={},utils$r={};utils$r.readUInt32BE=function(e,n){var a=e[0+n]<<24|e[1+n]<<16|e[2+n]<<8|e[3+n];return a>>>0};utils$r.writeUInt32BE=function(e,n,a){e[0+a]=n>>>24,e[1+a]=n>>>16&255,e[2+a]=n>>>8&255,e[3+a]=n&255};utils$r.ip=function(e,n,a,o){for(var c=0,l=0,u=6;u>=0;u-=2){for(var d=0;d<=24;d+=8)c<<=1,c|=n>>>d+u&1;for(var d=0;d<=24;d+=8)c<<=1,c|=e>>>d+u&1}for(var u=6;u>=0;u-=2){for(var d=1;d<=25;d+=8)l<<=1,l|=n>>>d+u&1;for(var d=1;d<=25;d+=8)l<<=1,l|=e>>>d+u&1}a[o+0]=c>>>0,a[o+1]=l>>>0};utils$r.rip=function(e,n,a,o){for(var c=0,l=0,u=0;u<4;u++)for(var d=24;d>=0;d-=8)c<<=1,c|=n>>>d+u&1,c<<=1,c|=e>>>d+u&1;for(var u=4;u<8;u++)for(var d=24;d>=0;d-=8)l<<=1,l|=n>>>d+u&1,l<<=1,l|=e>>>d+u&1;a[o+0]=c>>>0,a[o+1]=l>>>0};utils$r.pc1=function(e,n,a,o){for(var c=0,l=0,u=7;u>=5;u--){for(var d=0;d<=24;d+=8)c<<=1,c|=n>>d+u&1;for(var d=0;d<=24;d+=8)c<<=1,c|=e>>d+u&1}for(var d=0;d<=24;d+=8)c<<=1,c|=n>>d+u&1;for(var u=1;u<=3;u++){for(var d=0;d<=24;d+=8)l<<=1,l|=n>>d+u&1;for(var d=0;d<=24;d+=8)l<<=1,l|=e>>d+u&1}for(var d=0;d<=24;d+=8)l<<=1,l|=e>>d+u&1;a[o+0]=c>>>0,a[o+1]=l>>>0};utils$r.r28shl=function(e,n){return e<<n&268435455|e>>>28-n};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$r.pc2=function(e,n,a,o){for(var c=0,l=0,u=pc2table.length>>>1,d=0;d<u;d++)c<<=1,c|=e>>>pc2table[d]&1;for(var d=u;d<pc2table.length;d++)l<<=1,l|=n>>>pc2table[d]&1;a[o+0]=c>>>0,a[o+1]=l>>>0};utils$r.expand=function(e,n,a){var o=0,c=0;o=(e&1)<<5|e>>>27;for(var l=23;l>=15;l-=4)o<<=6,o|=e>>>l&63;for(var l=11;l>=3;l-=4)c|=e>>>l&63,c<<=6;c|=(e&31)<<1|e>>>31,n[a+0]=o>>>0,n[a+1]=c>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$r.substitute=function(e,n){for(var a=0,o=0;o<4;o++){var c=e>>>18-o*6&63,l=sTable[o*64+c];a<<=4,a|=l}for(var o=0;o<4;o++){var c=n>>>18-o*6&63,l=sTable[4*64+o*64+c];a<<=4,a|=l}return a>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];utils$r.permute=function(e){for(var n=0,a=0;a<permuteTable.length;a++)n<<=1,n|=e>>>permuteTable[a]&1;return n>>>0};utils$r.padSplit=function(e,n,a){for(var o=e.toString(2);o.length<n;)o="0"+o;for(var c=[],l=0;l<n;l+=a)c.push(o.slice(l,l+a));return c.join(" ")};var minimalisticAssert$1=assert$q;function assert$q(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$q.equal=function(e,n,a){if(e!=n)throw new Error(a||"Assertion failed: "+e+" != "+n)};var assert$p=minimalisticAssert$1;function Cipher$3(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}var cipher=Cipher$3;Cipher$3.prototype._init=function(){};Cipher$3.prototype.update=function(e){return e.length===0?[]:this.type==="decrypt"?this._updateDecrypt(e):this._updateEncrypt(e)};Cipher$3.prototype._buffer=function(e,n){for(var a=Math.min(this.buffer.length-this.bufferOff,e.length-n),o=0;o<a;o++)this.buffer[this.bufferOff+o]=e[n+o];return this.bufferOff+=a,a};Cipher$3.prototype._flushBuffer=function(e,n){return this._update(this.buffer,0,e,n),this.bufferOff=0,this.blockSize};Cipher$3.prototype._updateEncrypt=function(e){var n=0,a=0,o=(this.bufferOff+e.length)/this.blockSize|0,c=new Array(o*this.blockSize);this.bufferOff!==0&&(n+=this._buffer(e,n),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(c,a)));for(var l=e.length-(e.length-n)%this.blockSize;n<l;n+=this.blockSize)this._update(e,n,c,a),a+=this.blockSize;for(;n<e.length;n++,this.bufferOff++)this.buffer[this.bufferOff]=e[n];return c};Cipher$3.prototype._updateDecrypt=function(e){for(var n=0,a=0,o=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,c=new Array(o*this.blockSize);o>0;o--)n+=this._buffer(e,n),a+=this._flushBuffer(c,a);return n+=this._buffer(e,n),c};Cipher$3.prototype.final=function(e){var n;e&&(n=this.update(e));var a;return this.type==="encrypt"?a=this._finalEncrypt():a=this._finalDecrypt(),n?n.concat(a):a};Cipher$3.prototype._pad=function(e,n){if(n===0)return!1;for(;n<e.length;)e[n++]=0;return!0};Cipher$3.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e};Cipher$3.prototype._unpad=function(e){return e};Cipher$3.prototype._finalDecrypt=function(){assert$p.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)};var assert$o=minimalisticAssert$1,inherits$j=inherits_browserExports,utils$q=utils$r,Cipher$2=cipher;function DESState(){this.tmp=new Array(2),this.keys=null}function DES$3(t){Cipher$2.call(this,t);var e=new DESState;this._desState=e,this.deriveKeys(e,t.key)}inherits$j(DES$3,Cipher$2);var des$1=DES$3;DES$3.create=function(e){return new DES$3(e)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES$3.prototype.deriveKeys=function(e,n){e.keys=new Array(16*2),assert$o.equal(n.length,this.blockSize,"Invalid key length");var a=utils$q.readUInt32BE(n,0),o=utils$q.readUInt32BE(n,4);utils$q.pc1(a,o,e.tmp,0),a=e.tmp[0],o=e.tmp[1];for(var c=0;c<e.keys.length;c+=2){var l=shiftTable[c>>>1];a=utils$q.r28shl(a,l),o=utils$q.r28shl(o,l),utils$q.pc2(a,o,e.keys,c)}};DES$3.prototype._update=function(e,n,a,o){var c=this._desState,l=utils$q.readUInt32BE(e,n),u=utils$q.readUInt32BE(e,n+4);utils$q.ip(l,u,c.tmp,0),l=c.tmp[0],u=c.tmp[1],this.type==="encrypt"?this._encrypt(c,l,u,c.tmp,0):this._decrypt(c,l,u,c.tmp,0),l=c.tmp[0],u=c.tmp[1],utils$q.writeUInt32BE(a,l,o),utils$q.writeUInt32BE(a,u,o+4)};DES$3.prototype._pad=function(e,n){for(var a=e.length-n,o=n;o<e.length;o++)e[o]=a;return!0};DES$3.prototype._unpad=function(e){for(var n=e[e.length-1],a=e.length-n;a<e.length;a++)assert$o.equal(e[a],n);return e.slice(0,e.length-n)};DES$3.prototype._encrypt=function(e,n,a,o,c){for(var l=n,u=a,d=0;d<e.keys.length;d+=2){var m=e.keys[d],b=e.keys[d+1];utils$q.expand(u,e.tmp,0),m^=e.tmp[0],b^=e.tmp[1];var x=utils$q.substitute(m,b),_=utils$q.permute(x),w=u;u=(l^_)>>>0,l=w}utils$q.rip(u,l,o,c)};DES$3.prototype._decrypt=function(e,n,a,o,c){for(var l=a,u=n,d=e.keys.length-2;d>=0;d-=2){var m=e.keys[d],b=e.keys[d+1];utils$q.expand(l,e.tmp,0),m^=e.tmp[0],b^=e.tmp[1];var x=utils$q.substitute(m,b),_=utils$q.permute(x),w=l;l=(u^_)>>>0,u=w}utils$q.rip(l,u,o,c)};var cbc$1={},assert$n=minimalisticAssert$1,inherits$i=inherits_browserExports,proto={};function CBCState(t){assert$n.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}function instantiate(t){function e(c){t.call(this,c),this._cbcInit()}inherits$i(e,t);for(var n=Object.keys(proto),a=0;a<n.length;a++){var o=n[a];e.prototype[o]=proto[o]}return e.create=function(l){return new e(l)},e}cbc$1.instantiate=instantiate;proto._cbcInit=function(){var e=new CBCState(this.options.iv);this._cbcState=e};proto._update=function(e,n,a,o){var c=this._cbcState,l=this.constructor.super_.prototype,u=c.iv;if(this.type==="encrypt"){for(var d=0;d<this.blockSize;d++)u[d]^=e[n+d];l._update.call(this,u,0,a,o);for(var d=0;d<this.blockSize;d++)u[d]=a[o+d]}else{l._update.call(this,e,n,a,o);for(var d=0;d<this.blockSize;d++)a[o+d]^=u[d];for(var d=0;d<this.blockSize;d++)u[d]=e[n+d]}};var assert$m=minimalisticAssert$1,inherits$h=inherits_browserExports,Cipher$1=cipher,DES$2=des$1;function EDEState(t,e){assert$m.equal(e.length,24,"Invalid key length");var n=e.slice(0,8),a=e.slice(8,16),o=e.slice(16,24);t==="encrypt"?this.ciphers=[DES$2.create({type:"encrypt",key:n}),DES$2.create({type:"decrypt",key:a}),DES$2.create({type:"encrypt",key:o})]:this.ciphers=[DES$2.create({type:"decrypt",key:o}),DES$2.create({type:"encrypt",key:a}),DES$2.create({type:"decrypt",key:n})]}function EDE(t){Cipher$1.call(this,t);var e=new EDEState(this.type,this.options.key);this._edeState=e}inherits$h(EDE,Cipher$1);var ede=EDE;EDE.create=function(e){return new EDE(e)};EDE.prototype._update=function(e,n,a,o){var c=this._edeState;c.ciphers[0]._update(e,n,a,o),c.ciphers[1]._update(a,o,a,o),c.ciphers[2]._update(a,o,a,o)};EDE.prototype._pad=DES$2.prototype._pad;EDE.prototype._unpad=DES$2.prototype._unpad;des$2.utils=utils$r;des$2.Cipher=cipher;des$2.DES=des$1;des$2.CBC=cbc$1;des$2.EDE=ede;var CipherBase=cipherBase,des=des$2,inherits$g=inherits_browserExports,Buffer$q=safeBufferExports.Buffer,modes$4={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};modes$4.des=modes$4["des-cbc"];modes$4.des3=modes$4["des-ede3-cbc"];var browserifyDes=DES$1;inherits$g(DES$1,CipherBase);function DES$1(t){CipherBase.call(this);var e=t.mode.toLowerCase(),n=modes$4[e],a;t.decrypt?a="decrypt":a="encrypt";var o=t.key;Buffer$q.isBuffer(o)||(o=Buffer$q.from(o)),(e==="des-ede"||e==="des-ede-cbc")&&(o=Buffer$q.concat([o,o.slice(0,8)]));var c=t.iv;Buffer$q.isBuffer(c)||(c=Buffer$q.from(c)),this._des=n.create({key:o,iv:c,type:a})}DES$1.prototype._update=function(t){return Buffer$q.from(this._des.update(t))};DES$1.prototype._final=function(){return Buffer$q.from(this._des.final())};var browser$a={},encrypter={},ecb={};ecb.encrypt=function(t,e){return t._cipher.encryptBlock(e)};ecb.decrypt=function(t,e){return t._cipher.decryptBlock(e)};var cbc={},bufferXor=function(e,n){for(var a=Math.min(e.length,n.length),o=new Buffer$x(a),c=0;c<a;++c)o[c]=e[c]^n[c];return o},xor$7=bufferXor;cbc.encrypt=function(t,e){var n=xor$7(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev};cbc.decrypt=function(t,e){var n=t._prev;t._prev=e;var a=t._cipher.decryptBlock(e);return xor$7(a,n)};var cfb={},Buffer$p=safeBufferExports.Buffer,xor$6=bufferXor;function encryptStart(t,e,n){var a=e.length,o=xor$6(e,t._cache);return t._cache=t._cache.slice(a),t._prev=Buffer$p.concat([t._prev,n?e:o]),o}cfb.encrypt=function(t,e,n){for(var a=Buffer$p.allocUnsafe(0),o;e.length;)if(t._cache.length===0&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=Buffer$p.allocUnsafe(0)),t._cache.length<=e.length)o=t._cache.length,a=Buffer$p.concat([a,encryptStart(t,e.slice(0,o),n)]),e=e.slice(o);else{a=Buffer$p.concat([a,encryptStart(t,e,n)]);break}return a};var cfb8={},Buffer$o=safeBufferExports.Buffer;function encryptByte$1(t,e,n){var a=t._cipher.encryptBlock(t._prev),o=a[0]^e;return t._prev=Buffer$o.concat([t._prev.slice(1),Buffer$o.from([n?e:o])]),o}cfb8.encrypt=function(t,e,n){for(var a=e.length,o=Buffer$o.allocUnsafe(a),c=-1;++c<a;)o[c]=encryptByte$1(t,e[c],n);return o};var cfb1={},Buffer$n=safeBufferExports.Buffer;function encryptByte(t,e,n){for(var a,o=-1,c=8,l=0,u,d;++o<c;)a=t._cipher.encryptBlock(t._prev),u=e&1<<7-o?128:0,d=a[0]^u,l+=(d&128)>>o%8,t._prev=shiftIn(t._prev,n?u:d);return l}function shiftIn(t,e){var n=t.length,a=-1,o=Buffer$n.allocUnsafe(t.length);for(t=Buffer$n.concat([t,Buffer$n.from([e])]);++a<n;)o[a]=t[a]<<1|t[a+1]>>7;return o}cfb1.encrypt=function(t,e,n){for(var a=e.length,o=Buffer$n.allocUnsafe(a),c=-1;++c<a;)o[c]=encryptByte(t,e[c],n);return o};var ofb={},xor$5=bufferXor;function getBlock$1(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}ofb.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=Buffer$x.concat([t._cache,getBlock$1(t)]);var n=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),xor$5(e,n)};var ctr={};function incr32$2(t){for(var e=t.length,n;e--;)if(n=t.readUInt8(e),n===255)t.writeUInt8(0,e);else{n++,t.writeUInt8(n,e);break}}var incr32_1=incr32$2,xor$4=bufferXor,Buffer$m=safeBufferExports.Buffer,incr32$1=incr32_1;function getBlock(t){var e=t._cipher.encryptBlockRaw(t._prev);return incr32$1(t._prev),e}var blockSize=16;ctr.encrypt=function(t,e){var n=Math.ceil(e.length/blockSize),a=t._cache.length;t._cache=Buffer$m.concat([t._cache,Buffer$m.allocUnsafe(n*blockSize)]);for(var o=0;o<n;o++){var c=getBlock(t),l=a+o*blockSize;t._cache.writeUInt32BE(c[0],l+0),t._cache.writeUInt32BE(c[1],l+4),t._cache.writeUInt32BE(c[2],l+8),t._cache.writeUInt32BE(c[3],l+12)}var u=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),xor$4(e,u)};const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2$1={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modeModules={ECB:ecb,CBC:cbc,CFB:cfb,CFB8:cfb8,CFB1:cfb1,OFB:ofb,CTR:ctr,GCM:ctr},modes$3=require$$2$1;for(var key$4 in modes$3)modes$3[key$4].module=modeModules[modes$3[key$4].mode];var modes_1=modes$3,aes$6={},Buffer$l=safeBufferExports.Buffer;function asUInt32Array(t){Buffer$l.isBuffer(t)||(t=Buffer$l.from(t));for(var e=t.length/4|0,n=new Array(e),a=0;a<e;a++)n[a]=t.readUInt32BE(a*4);return n}function scrubVec(t){for(var e=0;e<t.length;t++)t[e]=0}function cryptBlock(t,e,n,a,o){for(var c=n[0],l=n[1],u=n[2],d=n[3],m=t[0]^e[0],b=t[1]^e[1],x=t[2]^e[2],_=t[3]^e[3],w,S,T,B,C=4,D=1;D<o;D++)w=c[m>>>24]^l[b>>>16&255]^u[x>>>8&255]^d[_&255]^e[C++],S=c[b>>>24]^l[x>>>16&255]^u[_>>>8&255]^d[m&255]^e[C++],T=c[x>>>24]^l[_>>>16&255]^u[m>>>8&255]^d[b&255]^e[C++],B=c[_>>>24]^l[m>>>16&255]^u[b>>>8&255]^d[x&255]^e[C++],m=w,b=S,x=T,_=B;return w=(a[m>>>24]<<24|a[b>>>16&255]<<16|a[x>>>8&255]<<8|a[_&255])^e[C++],S=(a[b>>>24]<<24|a[x>>>16&255]<<16|a[_>>>8&255]<<8|a[m&255])^e[C++],T=(a[x>>>24]<<24|a[_>>>16&255]<<16|a[m>>>8&255]<<8|a[b&255])^e[C++],B=(a[_>>>24]<<24|a[m>>>16&255]<<16|a[b>>>8&255]<<8|a[x&255])^e[C++],w=w>>>0,S=S>>>0,T=T>>>0,B=B>>>0,[w,S,T,B]}var RCON=[0,1,2,4,8,16,32,64,128,27,54],G=function(){for(var t=new Array(256),e=0;e<256;e++)e<128?t[e]=e<<1:t[e]=e<<1^283;for(var n=[],a=[],o=[[],[],[],[]],c=[[],[],[],[]],l=0,u=0,d=0;d<256;++d){var m=u^u<<1^u<<2^u<<3^u<<4;m=m>>>8^m&255^99,n[l]=m,a[m]=l;var b=t[l],x=t[b],_=t[x],w=t[m]*257^m*16843008;o[0][l]=w<<24|w>>>8,o[1][l]=w<<16|w>>>16,o[2][l]=w<<8|w>>>24,o[3][l]=w,w=_*16843009^x*65537^b*257^l*16843008,c[0][m]=w<<24|w>>>8,c[1][m]=w<<16|w>>>16,c[2][m]=w<<8|w>>>24,c[3][m]=w,l===0?l=u=1:(l=b^t[t[t[_^b]]],u^=t[t[u]])}return{SBOX:n,INV_SBOX:a,SUB_MIX:o,INV_SUB_MIX:c}}();function AES(t){this._key=asUInt32Array(t),this._reset()}AES.blockSize=4*4;AES.keySize=256/8;AES.prototype.blockSize=AES.blockSize;AES.prototype.keySize=AES.keySize;AES.prototype._reset=function(){for(var t=this._key,e=t.length,n=e+6,a=(n+1)*4,o=[],c=0;c<e;c++)o[c]=t[c];for(c=e;c<a;c++){var l=o[c-1];c%e===0?(l=l<<8|l>>>24,l=G.SBOX[l>>>24]<<24|G.SBOX[l>>>16&255]<<16|G.SBOX[l>>>8&255]<<8|G.SBOX[l&255],l^=RCON[c/e|0]<<24):e>6&&c%e===4&&(l=G.SBOX[l>>>24]<<24|G.SBOX[l>>>16&255]<<16|G.SBOX[l>>>8&255]<<8|G.SBOX[l&255]),o[c]=o[c-e]^l}for(var u=[],d=0;d<a;d++){var m=a-d,b=o[m-(d%4?0:4)];d<4||m<=4?u[d]=b:u[d]=G.INV_SUB_MIX[0][G.SBOX[b>>>24]]^G.INV_SUB_MIX[1][G.SBOX[b>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[b>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[b&255]]}this._nRounds=n,this._keySchedule=o,this._invKeySchedule=u};AES.prototype.encryptBlockRaw=function(t){return t=asUInt32Array(t),cryptBlock(t,this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)};AES.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),n=Buffer$l.allocUnsafe(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n};AES.prototype.decryptBlock=function(t){t=asUInt32Array(t);var e=t[1];t[1]=t[3],t[3]=e;var n=cryptBlock(t,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds),a=Buffer$l.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[1],12),a};AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)};aes$6.AES=AES;var Buffer$k=safeBufferExports.Buffer,ZEROES=Buffer$k.alloc(16,0);function toArray$2(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function fromArray$1(t){var e=Buffer$k.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function GHASH$1(t){this.h=t,this.state=Buffer$k.alloc(16,0),this.cache=Buffer$k.allocUnsafe(0)}GHASH$1.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()};GHASH$1.prototype._multiply=function(){for(var t=toArray$2(this.h),e=[0,0,0,0],n,a,o,c=-1;++c<128;){for(a=(this.state[~~(c/8)]&1<<7-c%8)!==0,a&&(e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3]),o=(t[3]&1)!==0,n=3;n>0;n--)t[n]=t[n]>>>1|(t[n-1]&1)<<31;t[0]=t[0]>>>1,o&&(t[0]=t[0]^225<<24)}this.state=fromArray$1(e)};GHASH$1.prototype.update=function(t){this.cache=Buffer$k.concat([this.cache,t]);for(var e;this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)};GHASH$1.prototype.final=function(t,e){return this.cache.length&&this.ghash(Buffer$k.concat([this.cache,ZEROES],16)),this.ghash(fromArray$1([0,t,0,e])),this.state};var ghash=GHASH$1,aes$5=aes$6,Buffer$j=safeBufferExports.Buffer,Transform$3=cipherBase,inherits$f=inherits_browserExports,GHASH=ghash,xor$3=bufferXor,incr32=incr32_1;function xorTest(t,e){var n=0;t.length!==e.length&&n++;for(var a=Math.min(t.length,e.length),o=0;o<a;++o)n+=t[o]^e[o];return n}function calcIv(t,e,n){if(e.length===12)return t._finID=Buffer$j.concat([e,Buffer$j.from([0,0,0,1])]),Buffer$j.concat([e,Buffer$j.from([0,0,0,2])]);var a=new GHASH(n),o=e.length,c=o%16;a.update(e),c&&(c=16-c,a.update(Buffer$j.alloc(c,0))),a.update(Buffer$j.alloc(8,0));var l=o*8,u=Buffer$j.alloc(8);u.writeUIntBE(l,0,8),a.update(u),t._finID=a.state;var d=Buffer$j.from(t._finID);return incr32(d),d}function StreamCipher$3(t,e,n,a){Transform$3.call(this);var o=Buffer$j.alloc(4,0);this._cipher=new aes$5.AES(e);var c=this._cipher.encryptBlock(o);this._ghash=new GHASH(c),n=calcIv(this,n,c),this._prev=Buffer$j.from(n),this._cache=Buffer$j.allocUnsafe(0),this._secCache=Buffer$j.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}inherits$f(StreamCipher$3,Transform$3);StreamCipher$3.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=Buffer$j.alloc(e,0),this._ghash.update(e))}this._called=!0;var n=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(n),this._len+=t.length,n};StreamCipher$3.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=xor$3(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()};StreamCipher$3.prototype.getAuthTag=function(){if(this._decrypt||!Buffer$j.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};StreamCipher$3.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e};StreamCipher$3.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length};var authCipher=StreamCipher$3,aes$4=aes$6,Buffer$i=safeBufferExports.Buffer,Transform$2=cipherBase,inherits$e=inherits_browserExports;function StreamCipher$2(t,e,n,a){Transform$2.call(this),this._cipher=new aes$4.AES(e),this._prev=Buffer$i.from(n),this._cache=Buffer$i.allocUnsafe(0),this._secCache=Buffer$i.allocUnsafe(0),this._decrypt=a,this._mode=t}inherits$e(StreamCipher$2,Transform$2);StreamCipher$2.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)};StreamCipher$2.prototype._final=function(){this._cipher.scrub()};var streamCipher=StreamCipher$2,Buffer$h=safeBufferExports.Buffer,MD5=md5_js;function EVP_BytesToKey(t,e,n,a){if(Buffer$h.isBuffer(t)||(t=Buffer$h.from(t,"binary")),e&&(Buffer$h.isBuffer(e)||(e=Buffer$h.from(e,"binary")),e.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=n/8,c=Buffer$h.alloc(o),l=Buffer$h.alloc(a||0),u=Buffer$h.alloc(0);o>0||a>0;){var d=new MD5;d.update(u),d.update(t),e&&d.update(e),u=d.digest();var m=0;if(o>0){var b=c.length-o;m=Math.min(o,u.length),u.copy(c,b,0,m),o-=m}if(m<u.length&&a>0){var x=l.length-a,_=Math.min(a,u.length-m);u.copy(l,x,m,m+_),a-=_}}return u.fill(0),{key:c,iv:l}}var evp_bytestokey=EVP_BytesToKey,MODES$1=modes_1,AuthCipher$1=authCipher,Buffer$g=safeBufferExports.Buffer,StreamCipher$1=streamCipher,Transform$1=cipherBase,aes$3=aes$6,ebtk$2=evp_bytestokey,inherits$d=inherits_browserExports;function Cipher(t,e,n){Transform$1.call(this),this._cache=new Splitter$1,this._cipher=new aes$3.AES(e),this._prev=Buffer$g.from(n),this._mode=t,this._autopadding=!0}inherits$d(Cipher,Transform$1);Cipher.prototype._update=function(t){this._cache.add(t);for(var e,n,a=[];e=this._cache.get();)n=this._mode.encrypt(this,e),a.push(n);return Buffer$g.concat(a)};var PADDING=Buffer$g.alloc(16,16);Cipher.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(PADDING))throw this._cipher.scrub(),new Error("data not multiple of block length")};Cipher.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function Splitter$1(){this.cache=Buffer$g.allocUnsafe(0)}Splitter$1.prototype.add=function(t){this.cache=Buffer$g.concat([this.cache,t])};Splitter$1.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null};Splitter$1.prototype.flush=function(){for(var t=16-this.cache.length,e=Buffer$g.allocUnsafe(t),n=-1;++n<t;)e.writeUInt8(t,n);return Buffer$g.concat([this.cache,e])};function createCipheriv$1(t,e,n){var a=MODES$1[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if(typeof e=="string"&&(e=Buffer$g.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if(typeof n=="string"&&(n=Buffer$g.from(n)),a.mode!=="GCM"&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);return a.type==="stream"?new StreamCipher$1(a.module,e,n):a.type==="auth"?new AuthCipher$1(a.module,e,n):new Cipher(a.module,e,n)}function createCipher$2(t,e){var n=MODES$1[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var a=ebtk$2(e,!1,n.key,n.iv);return createCipheriv$1(t,a.key,a.iv)}encrypter.createCipheriv=createCipheriv$1;encrypter.createCipher=createCipher$2;var decrypter={},AuthCipher=authCipher,Buffer$f=safeBufferExports.Buffer,MODES=modes_1,StreamCipher=streamCipher,Transform=cipherBase,aes$2=aes$6,ebtk$1=evp_bytestokey,inherits$c=inherits_browserExports;function Decipher(t,e,n){Transform.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes$2.AES(e),this._prev=Buffer$f.from(n),this._mode=t,this._autopadding=!0}inherits$c(Decipher,Transform);Decipher.prototype._update=function(t){this._cache.add(t);for(var e,n,a=[];e=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,e),a.push(n);return Buffer$f.concat(a)};Decipher.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return unpad(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")};Decipher.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function Splitter(){this.cache=Buffer$f.allocUnsafe(0)}Splitter.prototype.add=function(t){this.cache=Buffer$f.concat([this.cache,t])};Splitter.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null};Splitter.prototype.flush=function(){if(this.cache.length)return this.cache};function unpad(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var n=-1;++n<e;)if(t[n+(16-e)]!==e)throw new Error("unable to decrypt data");if(e!==16)return t.slice(0,16-e)}function createDecipheriv$1(t,e,n){var a=MODES[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if(typeof n=="string"&&(n=Buffer$f.from(n)),a.mode!=="GCM"&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);if(typeof e=="string"&&(e=Buffer$f.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return a.type==="stream"?new StreamCipher(a.module,e,n,!0):a.type==="auth"?new AuthCipher(a.module,e,n,!0):new Decipher(a.module,e,n)}function createDecipher$1(t,e){var n=MODES[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var a=ebtk$1(e,!1,n.key,n.iv);return createDecipheriv$1(t,a.key,a.iv)}decrypter.createDecipher=createDecipher$1;decrypter.createDecipheriv=createDecipheriv$1;var ciphers$2=encrypter,deciphers=decrypter,modes$2=require$$2$1;function getCiphers$1(){return Object.keys(modes$2)}browser$a.createCipher=browser$a.Cipher=ciphers$2.createCipher;browser$a.createCipheriv=browser$a.Cipheriv=ciphers$2.createCipheriv;browser$a.createDecipher=browser$a.Decipher=deciphers.createDecipher;browser$a.createDecipheriv=browser$a.Decipheriv=deciphers.createDecipheriv;browser$a.listCiphers=browser$a.getCiphers=getCiphers$1;var modes$1={};(function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}})(modes$1);var DES=browserifyDes,aes$1=browser$a,aesModes=modes_1,desModes=modes$1,ebtk=evp_bytestokey;function createCipher$1(t,e){t=t.toLowerCase();var n,a;if(aesModes[t])n=aesModes[t].key,a=aesModes[t].iv;else if(desModes[t])n=desModes[t].key*8,a=desModes[t].iv;else throw new TypeError("invalid suite type");var o=ebtk(e,!1,n,a);return createCipheriv(t,o.key,o.iv)}function createDecipher(t,e){t=t.toLowerCase();var n,a;if(aesModes[t])n=aesModes[t].key,a=aesModes[t].iv;else if(desModes[t])n=desModes[t].key*8,a=desModes[t].iv;else throw new TypeError("invalid suite type");var o=ebtk(e,!1,n,a);return createDecipheriv(t,o.key,o.iv)}function createCipheriv(t,e,n){if(t=t.toLowerCase(),aesModes[t])return aes$1.createCipheriv(t,e,n);if(desModes[t])return new DES({key:e,iv:n,mode:t});throw new TypeError("invalid suite type")}function createDecipheriv(t,e,n){if(t=t.toLowerCase(),aesModes[t])return aes$1.createDecipheriv(t,e,n);if(desModes[t])return new DES({key:e,iv:n,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}function getCiphers(){return Object.keys(desModes).concat(aes$1.getCiphers())}browser$b.createCipher=browser$b.Cipher=createCipher$1;browser$b.createCipheriv=browser$b.Cipheriv=createCipheriv;browser$b.createDecipher=browser$b.Decipher=createDecipher;browser$b.createDecipheriv=browser$b.Decipheriv=createDecipheriv;browser$b.listCiphers=browser$b.getCiphers=getCiphers;var browser$9={},bnExports$4={},bn$4={get exports(){return bnExports$4},set exports(t){bnExports$4=t}};(function(t){(function(e,n){function a(ie,F){if(!ie)throw new Error(F||"Assertion failed")}function o(ie,F){ie.super_=F;var k=function(){};k.prototype=F.prototype,ie.prototype=new k,ie.prototype.constructor=ie}function c(ie,F,k){if(c.isBN(ie))return ie;this.negative=0,this.words=null,this.length=0,this.red=null,ie!==null&&((F==="le"||F==="be")&&(k=F,F=10),this._init(ie||0,F||10,k||"be"))}typeof e=="object"?e.exports=c:n.BN=c,c.BN=c,c.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$2.Buffer}catch{}c.isBN=function(F){return F instanceof c?!0:F!==null&&typeof F=="object"&&F.constructor.wordSize===c.wordSize&&Array.isArray(F.words)},c.max=function(F,k){return F.cmp(k)>0?F:k},c.min=function(F,k){return F.cmp(k)<0?F:k},c.prototype._init=function(F,k,y){if(typeof F=="number")return this._initNumber(F,k,y);if(typeof F=="object")return this._initArray(F,k,y);k==="hex"&&(k=16),a(k===(k|0)&&k>=2&&k<=36),F=F.toString().replace(/\s+/g,"");var A=0;F[0]==="-"&&(A++,this.negative=1),A<F.length&&(k===16?this._parseHex(F,A,y):(this._parseBase(F,k,A),y==="le"&&this._initArray(this.toArray(),k,y)))},c.prototype._initNumber=function(F,k,y){F<0&&(this.negative=1,F=-F),F<67108864?(this.words=[F&67108863],this.length=1):F<4503599627370496?(this.words=[F&67108863,F/67108864&67108863],this.length=2):(a(F<9007199254740992),this.words=[F&67108863,F/67108864&67108863,1],this.length=3),y==="le"&&this._initArray(this.toArray(),k,y)},c.prototype._initArray=function(F,k,y){if(a(typeof F.length=="number"),F.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(F.length/3),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var I,P,H=0;if(y==="be")for(A=F.length-1,I=0;A>=0;A-=3)P=F[A]|F[A-1]<<8|F[A-2]<<16,this.words[I]|=P<<H&67108863,this.words[I+1]=P>>>26-H&67108863,H+=24,H>=26&&(H-=26,I++);else if(y==="le")for(A=0,I=0;A<F.length;A+=3)P=F[A]|F[A+1]<<8|F[A+2]<<16,this.words[I]|=P<<H&67108863,this.words[I+1]=P>>>26-H&67108863,H+=24,H>=26&&(H-=26,I++);return this.strip()};function u(ie,F){var k=ie.charCodeAt(F);return k>=65&&k<=70?k-55:k>=97&&k<=102?k-87:k-48&15}function d(ie,F,k){var y=u(ie,k);return k-1>=F&&(y|=u(ie,k-1)<<4),y}c.prototype._parseHex=function(F,k,y){this.length=Math.ceil((F.length-k)/6),this.words=new Array(this.length);for(var A=0;A<this.length;A++)this.words[A]=0;var I=0,P=0,H;if(y==="be")for(A=F.length-1;A>=k;A-=2)H=d(F,k,A)<<I,this.words[P]|=H&67108863,I>=18?(I-=18,P+=1,this.words[P]|=H>>>26):I+=8;else{var q=F.length-k;for(A=q%2===0?k+1:k;A<F.length;A+=2)H=d(F,k,A)<<I,this.words[P]|=H&67108863,I>=18?(I-=18,P+=1,this.words[P]|=H>>>26):I+=8}this.strip()};function m(ie,F,k,y){for(var A=0,I=Math.min(ie.length,k),P=F;P<I;P++){var H=ie.charCodeAt(P)-48;A*=y,H>=49?A+=H-49+10:H>=17?A+=H-17+10:A+=H}return A}c.prototype._parseBase=function(F,k,y){this.words=[0],this.length=1;for(var A=0,I=1;I<=67108863;I*=k)A++;A--,I=I/k|0;for(var P=F.length-y,H=P%A,q=Math.min(P,P-H)+y,j=0,M=y;M<q;M+=A)j=m(F,M,M+A,k),this.imuln(I),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j);if(H!==0){var E=1;for(j=m(F,M,F.length,k),M=0;M<H;M++)E*=k;this.imuln(E),this.words[0]+j<67108864?this.words[0]+=j:this._iaddn(j)}this.strip()},c.prototype.copy=function(F){F.words=new Array(this.length);for(var k=0;k<this.length;k++)F.words[k]=this.words[k];F.length=this.length,F.negative=this.negative,F.red=this.red},c.prototype.clone=function(){var F=new c(null);return this.copy(F),F},c.prototype._expand=function(F){for(;this.length<F;)this.words[this.length++]=0;return this},c.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},c.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],_=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(F,k){F=F||10,k=k|0||1;var y;if(F===16||F==="hex"){y="";for(var A=0,I=0,P=0;P<this.length;P++){var H=this.words[P],q=((H<<A|I)&16777215).toString(16);I=H>>>24-A&16777215,I!==0||P!==this.length-1?y=b[6-q.length]+q+y:y=q+y,A+=2,A>=26&&(A-=26,P--)}for(I!==0&&(y=I.toString(16)+y);y.length%k!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}if(F===(F|0)&&F>=2&&F<=36){var j=x[F],M=_[F];y="";var E=this.clone();for(E.negative=0;!E.isZero();){var L=E.modn(M).toString(F);E=E.idivn(M),E.isZero()?y=L+y:y=b[j-L.length]+L+y}for(this.isZero()&&(y="0"+y);y.length%k!==0;)y="0"+y;return this.negative!==0&&(y="-"+y),y}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var F=this.words[0];return this.length===2?F+=this.words[1]*67108864:this.length===3&&this.words[2]===1?F+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-F:F},c.prototype.toJSON=function(){return this.toString(16)},c.prototype.toBuffer=function(F,k){return a(typeof l<"u"),this.toArrayLike(l,F,k)},c.prototype.toArray=function(F,k){return this.toArrayLike(Array,F,k)},c.prototype.toArrayLike=function(F,k,y){var A=this.byteLength(),I=y||Math.max(1,A);a(A<=I,"byte array longer than desired length"),a(I>0,"Requested array length <= 0"),this.strip();var P=k==="le",H=new F(I),q,j,M=this.clone();if(P){for(j=0;!M.isZero();j++)q=M.andln(255),M.iushrn(8),H[j]=q;for(;j<I;j++)H[j]=0}else{for(j=0;j<I-A;j++)H[j]=0;for(j=0;!M.isZero();j++)q=M.andln(255),M.iushrn(8),H[I-j-1]=q}return H},Math.clz32?c.prototype._countBits=function(F){return 32-Math.clz32(F)}:c.prototype._countBits=function(F){var k=F,y=0;return k>=4096&&(y+=13,k>>>=13),k>=64&&(y+=7,k>>>=7),k>=8&&(y+=4,k>>>=4),k>=2&&(y+=2,k>>>=2),y+k},c.prototype._zeroBits=function(F){if(F===0)return 26;var k=F,y=0;return k&8191||(y+=13,k>>>=13),k&127||(y+=7,k>>>=7),k&15||(y+=4,k>>>=4),k&3||(y+=2,k>>>=2),k&1||y++,y},c.prototype.bitLength=function(){var F=this.words[this.length-1],k=this._countBits(F);return(this.length-1)*26+k};function w(ie){for(var F=new Array(ie.bitLength()),k=0;k<F.length;k++){var y=k/26|0,A=k%26;F[k]=(ie.words[y]&1<<A)>>>A}return F}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var F=0,k=0;k<this.length;k++){var y=this._zeroBits(this.words[k]);if(F+=y,y!==26)break}return F},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(F){return this.negative!==0?this.abs().inotn(F).iaddn(1):this.clone()},c.prototype.fromTwos=function(F){return this.testn(F-1)?this.notn(F).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(F){for(;this.length<F.length;)this.words[this.length++]=0;for(var k=0;k<F.length;k++)this.words[k]=this.words[k]|F.words[k];return this.strip()},c.prototype.ior=function(F){return a((this.negative|F.negative)===0),this.iuor(F)},c.prototype.or=function(F){return this.length>F.length?this.clone().ior(F):F.clone().ior(this)},c.prototype.uor=function(F){return this.length>F.length?this.clone().iuor(F):F.clone().iuor(this)},c.prototype.iuand=function(F){var k;this.length>F.length?k=F:k=this;for(var y=0;y<k.length;y++)this.words[y]=this.words[y]&F.words[y];return this.length=k.length,this.strip()},c.prototype.iand=function(F){return a((this.negative|F.negative)===0),this.iuand(F)},c.prototype.and=function(F){return this.length>F.length?this.clone().iand(F):F.clone().iand(this)},c.prototype.uand=function(F){return this.length>F.length?this.clone().iuand(F):F.clone().iuand(this)},c.prototype.iuxor=function(F){var k,y;this.length>F.length?(k=this,y=F):(k=F,y=this);for(var A=0;A<y.length;A++)this.words[A]=k.words[A]^y.words[A];if(this!==k)for(;A<k.length;A++)this.words[A]=k.words[A];return this.length=k.length,this.strip()},c.prototype.ixor=function(F){return a((this.negative|F.negative)===0),this.iuxor(F)},c.prototype.xor=function(F){return this.length>F.length?this.clone().ixor(F):F.clone().ixor(this)},c.prototype.uxor=function(F){return this.length>F.length?this.clone().iuxor(F):F.clone().iuxor(this)},c.prototype.inotn=function(F){a(typeof F=="number"&&F>=0);var k=Math.ceil(F/26)|0,y=F%26;this._expand(k),y>0&&k--;for(var A=0;A<k;A++)this.words[A]=~this.words[A]&67108863;return y>0&&(this.words[A]=~this.words[A]&67108863>>26-y),this.strip()},c.prototype.notn=function(F){return this.clone().inotn(F)},c.prototype.setn=function(F,k){a(typeof F=="number"&&F>=0);var y=F/26|0,A=F%26;return this._expand(y+1),k?this.words[y]=this.words[y]|1<<A:this.words[y]=this.words[y]&~(1<<A),this.strip()},c.prototype.iadd=function(F){var k;if(this.negative!==0&&F.negative===0)return this.negative=0,k=this.isub(F),this.negative^=1,this._normSign();if(this.negative===0&&F.negative!==0)return F.negative=0,k=this.isub(F),F.negative=1,k._normSign();var y,A;this.length>F.length?(y=this,A=F):(y=F,A=this);for(var I=0,P=0;P<A.length;P++)k=(y.words[P]|0)+(A.words[P]|0)+I,this.words[P]=k&67108863,I=k>>>26;for(;I!==0&&P<y.length;P++)k=(y.words[P]|0)+I,this.words[P]=k&67108863,I=k>>>26;if(this.length=y.length,I!==0)this.words[this.length]=I,this.length++;else if(y!==this)for(;P<y.length;P++)this.words[P]=y.words[P];return this},c.prototype.add=function(F){var k;return F.negative!==0&&this.negative===0?(F.negative=0,k=this.sub(F),F.negative^=1,k):F.negative===0&&this.negative!==0?(this.negative=0,k=F.sub(this),this.negative=1,k):this.length>F.length?this.clone().iadd(F):F.clone().iadd(this)},c.prototype.isub=function(F){if(F.negative!==0){F.negative=0;var k=this.iadd(F);return F.negative=1,k._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(F),this.negative=1,this._normSign();var y=this.cmp(F);if(y===0)return this.negative=0,this.length=1,this.words[0]=0,this;var A,I;y>0?(A=this,I=F):(A=F,I=this);for(var P=0,H=0;H<I.length;H++)k=(A.words[H]|0)-(I.words[H]|0)+P,P=k>>26,this.words[H]=k&67108863;for(;P!==0&&H<A.length;H++)k=(A.words[H]|0)+P,P=k>>26,this.words[H]=k&67108863;if(P===0&&H<A.length&&A!==this)for(;H<A.length;H++)this.words[H]=A.words[H];return this.length=Math.max(this.length,H),A!==this&&(this.negative=1),this.strip()},c.prototype.sub=function(F){return this.clone().isub(F)};function S(ie,F,k){k.negative=F.negative^ie.negative;var y=ie.length+F.length|0;k.length=y,y=y-1|0;var A=ie.words[0]|0,I=F.words[0]|0,P=A*I,H=P&67108863,q=P/67108864|0;k.words[0]=H;for(var j=1;j<y;j++){for(var M=q>>>26,E=q&67108863,L=Math.min(j,F.length-1),le=Math.max(0,j-ie.length+1);le<=L;le++){var Q=j-le|0;A=ie.words[Q]|0,I=F.words[le]|0,P=A*I+E,M+=P/67108864|0,E=P&67108863}k.words[j]=E|0,q=M|0}return q!==0?k.words[j]=q|0:k.length--,k.strip()}var T=function(F,k,y){var A=F.words,I=k.words,P=y.words,H=0,q,j,M,E=A[0]|0,L=E&8191,le=E>>>13,Q=A[1]|0,ce=Q&8191,fe=Q>>>13,oe=A[2]|0,de=oe&8191,ae=oe>>>13,he=A[3]|0,te=he&8191,pe=he>>>13,ee=A[4]|0,ge=ee&8191,Ee=ee>>>13,be=A[5]|0,xe=be&8191,ve=be>>>13,Se=A[6]|0,ke=Se&8191,Ce=Se>>>13,Re=A[7]|0,Le=Re&8191,je=Re>>>13,Pe=A[8]|0,me=Pe&8191,ne=Pe>>>13,ue=A[9]|0,_e=ue&8191,Ie=ue>>>13,Ne=I[0]|0,De=Ne&8191,et=Ne>>>13,We=I[1]|0,Ke=We&8191,xt=We>>>13,tt=I[2]|0,st=tt&8191,It=tt>>>13,yt=I[3]|0,ut=yt&8191,At=yt>>>13,ht=I[4]|0,nt=ht&8191,Tt=ht>>>13,dt=I[5]|0,it=dt&8191,Bt=dt>>>13,pt=I[6]|0,rt=pt&8191,Ct=pt>>>13,we=I[7]|0,Be=we&8191,Me=we>>>13,re=I[8]|0,ye=re&8191,Ae=re>>>13,$e=I[9]|0,Te=$e&8191,Oe=$e>>>13;y.negative=F.negative^k.negative,y.length=19,q=Math.imul(L,De),j=Math.imul(L,et),j=j+Math.imul(le,De)|0,M=Math.imul(le,et);var Fe=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,q=Math.imul(ce,De),j=Math.imul(ce,et),j=j+Math.imul(fe,De)|0,M=Math.imul(fe,et),q=q+Math.imul(L,Ke)|0,j=j+Math.imul(L,xt)|0,j=j+Math.imul(le,Ke)|0,M=M+Math.imul(le,xt)|0;var Ue=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,q=Math.imul(de,De),j=Math.imul(de,et),j=j+Math.imul(ae,De)|0,M=Math.imul(ae,et),q=q+Math.imul(ce,Ke)|0,j=j+Math.imul(ce,xt)|0,j=j+Math.imul(fe,Ke)|0,M=M+Math.imul(fe,xt)|0,q=q+Math.imul(L,st)|0,j=j+Math.imul(L,It)|0,j=j+Math.imul(le,st)|0,M=M+Math.imul(le,It)|0;var ze=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(ze>>>26)|0,ze&=67108863,q=Math.imul(te,De),j=Math.imul(te,et),j=j+Math.imul(pe,De)|0,M=Math.imul(pe,et),q=q+Math.imul(de,Ke)|0,j=j+Math.imul(de,xt)|0,j=j+Math.imul(ae,Ke)|0,M=M+Math.imul(ae,xt)|0,q=q+Math.imul(ce,st)|0,j=j+Math.imul(ce,It)|0,j=j+Math.imul(fe,st)|0,M=M+Math.imul(fe,It)|0,q=q+Math.imul(L,ut)|0,j=j+Math.imul(L,At)|0,j=j+Math.imul(le,ut)|0,M=M+Math.imul(le,At)|0;var He=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(He>>>26)|0,He&=67108863,q=Math.imul(ge,De),j=Math.imul(ge,et),j=j+Math.imul(Ee,De)|0,M=Math.imul(Ee,et),q=q+Math.imul(te,Ke)|0,j=j+Math.imul(te,xt)|0,j=j+Math.imul(pe,Ke)|0,M=M+Math.imul(pe,xt)|0,q=q+Math.imul(de,st)|0,j=j+Math.imul(de,It)|0,j=j+Math.imul(ae,st)|0,M=M+Math.imul(ae,It)|0,q=q+Math.imul(ce,ut)|0,j=j+Math.imul(ce,At)|0,j=j+Math.imul(fe,ut)|0,M=M+Math.imul(fe,At)|0,q=q+Math.imul(L,nt)|0,j=j+Math.imul(L,Tt)|0,j=j+Math.imul(le,nt)|0,M=M+Math.imul(le,Tt)|0;var qe=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(qe>>>26)|0,qe&=67108863,q=Math.imul(xe,De),j=Math.imul(xe,et),j=j+Math.imul(ve,De)|0,M=Math.imul(ve,et),q=q+Math.imul(ge,Ke)|0,j=j+Math.imul(ge,xt)|0,j=j+Math.imul(Ee,Ke)|0,M=M+Math.imul(Ee,xt)|0,q=q+Math.imul(te,st)|0,j=j+Math.imul(te,It)|0,j=j+Math.imul(pe,st)|0,M=M+Math.imul(pe,It)|0,q=q+Math.imul(de,ut)|0,j=j+Math.imul(de,At)|0,j=j+Math.imul(ae,ut)|0,M=M+Math.imul(ae,At)|0,q=q+Math.imul(ce,nt)|0,j=j+Math.imul(ce,Tt)|0,j=j+Math.imul(fe,nt)|0,M=M+Math.imul(fe,Tt)|0,q=q+Math.imul(L,it)|0,j=j+Math.imul(L,Bt)|0,j=j+Math.imul(le,it)|0,M=M+Math.imul(le,Bt)|0;var Xe=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,q=Math.imul(ke,De),j=Math.imul(ke,et),j=j+Math.imul(Ce,De)|0,M=Math.imul(Ce,et),q=q+Math.imul(xe,Ke)|0,j=j+Math.imul(xe,xt)|0,j=j+Math.imul(ve,Ke)|0,M=M+Math.imul(ve,xt)|0,q=q+Math.imul(ge,st)|0,j=j+Math.imul(ge,It)|0,j=j+Math.imul(Ee,st)|0,M=M+Math.imul(Ee,It)|0,q=q+Math.imul(te,ut)|0,j=j+Math.imul(te,At)|0,j=j+Math.imul(pe,ut)|0,M=M+Math.imul(pe,At)|0,q=q+Math.imul(de,nt)|0,j=j+Math.imul(de,Tt)|0,j=j+Math.imul(ae,nt)|0,M=M+Math.imul(ae,Tt)|0,q=q+Math.imul(ce,it)|0,j=j+Math.imul(ce,Bt)|0,j=j+Math.imul(fe,it)|0,M=M+Math.imul(fe,Bt)|0,q=q+Math.imul(L,rt)|0,j=j+Math.imul(L,Ct)|0,j=j+Math.imul(le,rt)|0,M=M+Math.imul(le,Ct)|0;var Ze=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,q=Math.imul(Le,De),j=Math.imul(Le,et),j=j+Math.imul(je,De)|0,M=Math.imul(je,et),q=q+Math.imul(ke,Ke)|0,j=j+Math.imul(ke,xt)|0,j=j+Math.imul(Ce,Ke)|0,M=M+Math.imul(Ce,xt)|0,q=q+Math.imul(xe,st)|0,j=j+Math.imul(xe,It)|0,j=j+Math.imul(ve,st)|0,M=M+Math.imul(ve,It)|0,q=q+Math.imul(ge,ut)|0,j=j+Math.imul(ge,At)|0,j=j+Math.imul(Ee,ut)|0,M=M+Math.imul(Ee,At)|0,q=q+Math.imul(te,nt)|0,j=j+Math.imul(te,Tt)|0,j=j+Math.imul(pe,nt)|0,M=M+Math.imul(pe,Tt)|0,q=q+Math.imul(de,it)|0,j=j+Math.imul(de,Bt)|0,j=j+Math.imul(ae,it)|0,M=M+Math.imul(ae,Bt)|0,q=q+Math.imul(ce,rt)|0,j=j+Math.imul(ce,Ct)|0,j=j+Math.imul(fe,rt)|0,M=M+Math.imul(fe,Ct)|0,q=q+Math.imul(L,Be)|0,j=j+Math.imul(L,Me)|0,j=j+Math.imul(le,Be)|0,M=M+Math.imul(le,Me)|0;var at=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(at>>>26)|0,at&=67108863,q=Math.imul(me,De),j=Math.imul(me,et),j=j+Math.imul(ne,De)|0,M=Math.imul(ne,et),q=q+Math.imul(Le,Ke)|0,j=j+Math.imul(Le,xt)|0,j=j+Math.imul(je,Ke)|0,M=M+Math.imul(je,xt)|0,q=q+Math.imul(ke,st)|0,j=j+Math.imul(ke,It)|0,j=j+Math.imul(Ce,st)|0,M=M+Math.imul(Ce,It)|0,q=q+Math.imul(xe,ut)|0,j=j+Math.imul(xe,At)|0,j=j+Math.imul(ve,ut)|0,M=M+Math.imul(ve,At)|0,q=q+Math.imul(ge,nt)|0,j=j+Math.imul(ge,Tt)|0,j=j+Math.imul(Ee,nt)|0,M=M+Math.imul(Ee,Tt)|0,q=q+Math.imul(te,it)|0,j=j+Math.imul(te,Bt)|0,j=j+Math.imul(pe,it)|0,M=M+Math.imul(pe,Bt)|0,q=q+Math.imul(de,rt)|0,j=j+Math.imul(de,Ct)|0,j=j+Math.imul(ae,rt)|0,M=M+Math.imul(ae,Ct)|0,q=q+Math.imul(ce,Be)|0,j=j+Math.imul(ce,Me)|0,j=j+Math.imul(fe,Be)|0,M=M+Math.imul(fe,Me)|0,q=q+Math.imul(L,ye)|0,j=j+Math.imul(L,Ae)|0,j=j+Math.imul(le,ye)|0,M=M+Math.imul(le,Ae)|0;var Je=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(Je>>>26)|0,Je&=67108863,q=Math.imul(_e,De),j=Math.imul(_e,et),j=j+Math.imul(Ie,De)|0,M=Math.imul(Ie,et),q=q+Math.imul(me,Ke)|0,j=j+Math.imul(me,xt)|0,j=j+Math.imul(ne,Ke)|0,M=M+Math.imul(ne,xt)|0,q=q+Math.imul(Le,st)|0,j=j+Math.imul(Le,It)|0,j=j+Math.imul(je,st)|0,M=M+Math.imul(je,It)|0,q=q+Math.imul(ke,ut)|0,j=j+Math.imul(ke,At)|0,j=j+Math.imul(Ce,ut)|0,M=M+Math.imul(Ce,At)|0,q=q+Math.imul(xe,nt)|0,j=j+Math.imul(xe,Tt)|0,j=j+Math.imul(ve,nt)|0,M=M+Math.imul(ve,Tt)|0,q=q+Math.imul(ge,it)|0,j=j+Math.imul(ge,Bt)|0,j=j+Math.imul(Ee,it)|0,M=M+Math.imul(Ee,Bt)|0,q=q+Math.imul(te,rt)|0,j=j+Math.imul(te,Ct)|0,j=j+Math.imul(pe,rt)|0,M=M+Math.imul(pe,Ct)|0,q=q+Math.imul(de,Be)|0,j=j+Math.imul(de,Me)|0,j=j+Math.imul(ae,Be)|0,M=M+Math.imul(ae,Me)|0,q=q+Math.imul(ce,ye)|0,j=j+Math.imul(ce,Ae)|0,j=j+Math.imul(fe,ye)|0,M=M+Math.imul(fe,Ae)|0,q=q+Math.imul(L,Te)|0,j=j+Math.imul(L,Oe)|0,j=j+Math.imul(le,Te)|0,M=M+Math.imul(le,Oe)|0;var Qe=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,q=Math.imul(_e,Ke),j=Math.imul(_e,xt),j=j+Math.imul(Ie,Ke)|0,M=Math.imul(Ie,xt),q=q+Math.imul(me,st)|0,j=j+Math.imul(me,It)|0,j=j+Math.imul(ne,st)|0,M=M+Math.imul(ne,It)|0,q=q+Math.imul(Le,ut)|0,j=j+Math.imul(Le,At)|0,j=j+Math.imul(je,ut)|0,M=M+Math.imul(je,At)|0,q=q+Math.imul(ke,nt)|0,j=j+Math.imul(ke,Tt)|0,j=j+Math.imul(Ce,nt)|0,M=M+Math.imul(Ce,Tt)|0,q=q+Math.imul(xe,it)|0,j=j+Math.imul(xe,Bt)|0,j=j+Math.imul(ve,it)|0,M=M+Math.imul(ve,Bt)|0,q=q+Math.imul(ge,rt)|0,j=j+Math.imul(ge,Ct)|0,j=j+Math.imul(Ee,rt)|0,M=M+Math.imul(Ee,Ct)|0,q=q+Math.imul(te,Be)|0,j=j+Math.imul(te,Me)|0,j=j+Math.imul(pe,Be)|0,M=M+Math.imul(pe,Me)|0,q=q+Math.imul(de,ye)|0,j=j+Math.imul(de,Ae)|0,j=j+Math.imul(ae,ye)|0,M=M+Math.imul(ae,Ae)|0,q=q+Math.imul(ce,Te)|0,j=j+Math.imul(ce,Oe)|0,j=j+Math.imul(fe,Te)|0,M=M+Math.imul(fe,Oe)|0;var gt=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(gt>>>26)|0,gt&=67108863,q=Math.imul(_e,st),j=Math.imul(_e,It),j=j+Math.imul(Ie,st)|0,M=Math.imul(Ie,It),q=q+Math.imul(me,ut)|0,j=j+Math.imul(me,At)|0,j=j+Math.imul(ne,ut)|0,M=M+Math.imul(ne,At)|0,q=q+Math.imul(Le,nt)|0,j=j+Math.imul(Le,Tt)|0,j=j+Math.imul(je,nt)|0,M=M+Math.imul(je,Tt)|0,q=q+Math.imul(ke,it)|0,j=j+Math.imul(ke,Bt)|0,j=j+Math.imul(Ce,it)|0,M=M+Math.imul(Ce,Bt)|0,q=q+Math.imul(xe,rt)|0,j=j+Math.imul(xe,Ct)|0,j=j+Math.imul(ve,rt)|0,M=M+Math.imul(ve,Ct)|0,q=q+Math.imul(ge,Be)|0,j=j+Math.imul(ge,Me)|0,j=j+Math.imul(Ee,Be)|0,M=M+Math.imul(Ee,Me)|0,q=q+Math.imul(te,ye)|0,j=j+Math.imul(te,Ae)|0,j=j+Math.imul(pe,ye)|0,M=M+Math.imul(pe,Ae)|0,q=q+Math.imul(de,Te)|0,j=j+Math.imul(de,Oe)|0,j=j+Math.imul(ae,Te)|0,M=M+Math.imul(ae,Oe)|0;var vt=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(vt>>>26)|0,vt&=67108863,q=Math.imul(_e,ut),j=Math.imul(_e,At),j=j+Math.imul(Ie,ut)|0,M=Math.imul(Ie,At),q=q+Math.imul(me,nt)|0,j=j+Math.imul(me,Tt)|0,j=j+Math.imul(ne,nt)|0,M=M+Math.imul(ne,Tt)|0,q=q+Math.imul(Le,it)|0,j=j+Math.imul(Le,Bt)|0,j=j+Math.imul(je,it)|0,M=M+Math.imul(je,Bt)|0,q=q+Math.imul(ke,rt)|0,j=j+Math.imul(ke,Ct)|0,j=j+Math.imul(Ce,rt)|0,M=M+Math.imul(Ce,Ct)|0,q=q+Math.imul(xe,Be)|0,j=j+Math.imul(xe,Me)|0,j=j+Math.imul(ve,Be)|0,M=M+Math.imul(ve,Me)|0,q=q+Math.imul(ge,ye)|0,j=j+Math.imul(ge,Ae)|0,j=j+Math.imul(Ee,ye)|0,M=M+Math.imul(Ee,Ae)|0,q=q+Math.imul(te,Te)|0,j=j+Math.imul(te,Oe)|0,j=j+Math.imul(pe,Te)|0,M=M+Math.imul(pe,Oe)|0;var _t=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(_t>>>26)|0,_t&=67108863,q=Math.imul(_e,nt),j=Math.imul(_e,Tt),j=j+Math.imul(Ie,nt)|0,M=Math.imul(Ie,Tt),q=q+Math.imul(me,it)|0,j=j+Math.imul(me,Bt)|0,j=j+Math.imul(ne,it)|0,M=M+Math.imul(ne,Bt)|0,q=q+Math.imul(Le,rt)|0,j=j+Math.imul(Le,Ct)|0,j=j+Math.imul(je,rt)|0,M=M+Math.imul(je,Ct)|0,q=q+Math.imul(ke,Be)|0,j=j+Math.imul(ke,Me)|0,j=j+Math.imul(Ce,Be)|0,M=M+Math.imul(Ce,Me)|0,q=q+Math.imul(xe,ye)|0,j=j+Math.imul(xe,Ae)|0,j=j+Math.imul(ve,ye)|0,M=M+Math.imul(ve,Ae)|0,q=q+Math.imul(ge,Te)|0,j=j+Math.imul(ge,Oe)|0,j=j+Math.imul(Ee,Te)|0,M=M+Math.imul(Ee,Oe)|0;var bt=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(bt>>>26)|0,bt&=67108863,q=Math.imul(_e,it),j=Math.imul(_e,Bt),j=j+Math.imul(Ie,it)|0,M=Math.imul(Ie,Bt),q=q+Math.imul(me,rt)|0,j=j+Math.imul(me,Ct)|0,j=j+Math.imul(ne,rt)|0,M=M+Math.imul(ne,Ct)|0,q=q+Math.imul(Le,Be)|0,j=j+Math.imul(Le,Me)|0,j=j+Math.imul(je,Be)|0,M=M+Math.imul(je,Me)|0,q=q+Math.imul(ke,ye)|0,j=j+Math.imul(ke,Ae)|0,j=j+Math.imul(Ce,ye)|0,M=M+Math.imul(Ce,Ae)|0,q=q+Math.imul(xe,Te)|0,j=j+Math.imul(xe,Oe)|0,j=j+Math.imul(ve,Te)|0,M=M+Math.imul(ve,Oe)|0;var St=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(St>>>26)|0,St&=67108863,q=Math.imul(_e,rt),j=Math.imul(_e,Ct),j=j+Math.imul(Ie,rt)|0,M=Math.imul(Ie,Ct),q=q+Math.imul(me,Be)|0,j=j+Math.imul(me,Me)|0,j=j+Math.imul(ne,Be)|0,M=M+Math.imul(ne,Me)|0,q=q+Math.imul(Le,ye)|0,j=j+Math.imul(Le,Ae)|0,j=j+Math.imul(je,ye)|0,M=M+Math.imul(je,Ae)|0,q=q+Math.imul(ke,Te)|0,j=j+Math.imul(ke,Oe)|0,j=j+Math.imul(Ce,Te)|0,M=M+Math.imul(Ce,Oe)|0;var $t=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+($t>>>26)|0,$t&=67108863,q=Math.imul(_e,Be),j=Math.imul(_e,Me),j=j+Math.imul(Ie,Be)|0,M=Math.imul(Ie,Me),q=q+Math.imul(me,ye)|0,j=j+Math.imul(me,Ae)|0,j=j+Math.imul(ne,ye)|0,M=M+Math.imul(ne,Ae)|0,q=q+Math.imul(Le,Te)|0,j=j+Math.imul(Le,Oe)|0,j=j+Math.imul(je,Te)|0,M=M+Math.imul(je,Oe)|0;var wt=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(wt>>>26)|0,wt&=67108863,q=Math.imul(_e,ye),j=Math.imul(_e,Ae),j=j+Math.imul(Ie,ye)|0,M=Math.imul(Ie,Ae),q=q+Math.imul(me,Te)|0,j=j+Math.imul(me,Oe)|0,j=j+Math.imul(ne,Te)|0,M=M+Math.imul(ne,Oe)|0;var Ge=(H+q|0)+((j&8191)<<13)|0;H=(M+(j>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,q=Math.imul(_e,Te),j=Math.imul(_e,Oe),j=j+Math.imul(Ie,Te)|0,M=Math.imul(Ie,Oe);var Ye=(H+q|0)+((j&8191)<<13)|0;return H=(M+(j>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,P[0]=Fe,P[1]=Ue,P[2]=ze,P[3]=He,P[4]=qe,P[5]=Xe,P[6]=Ze,P[7]=at,P[8]=Je,P[9]=Qe,P[10]=gt,P[11]=vt,P[12]=_t,P[13]=bt,P[14]=St,P[15]=$t,P[16]=wt,P[17]=Ge,P[18]=Ye,H!==0&&(P[19]=H,y.length++),y};Math.imul||(T=S);function B(ie,F,k){k.negative=F.negative^ie.negative,k.length=ie.length+F.length;for(var y=0,A=0,I=0;I<k.length-1;I++){var P=A;A=0;for(var H=y&67108863,q=Math.min(I,F.length-1),j=Math.max(0,I-ie.length+1);j<=q;j++){var M=I-j,E=ie.words[M]|0,L=F.words[j]|0,le=E*L,Q=le&67108863;P=P+(le/67108864|0)|0,Q=Q+H|0,H=Q&67108863,P=P+(Q>>>26)|0,A+=P>>>26,P&=67108863}k.words[I]=H,y=P,P=A}return y!==0?k.words[I]=y:k.length--,k.strip()}function C(ie,F,k){var y=new D;return y.mulp(ie,F,k)}c.prototype.mulTo=function(F,k){var y,A=this.length+F.length;return this.length===10&&F.length===10?y=T(this,F,k):A<63?y=S(this,F,k):A<1024?y=B(this,F,k):y=C(this,F,k),y};function D(ie,F){this.x=ie,this.y=F}D.prototype.makeRBT=function(F){for(var k=new Array(F),y=c.prototype._countBits(F)-1,A=0;A<F;A++)k[A]=this.revBin(A,y,F);return k},D.prototype.revBin=function(F,k,y){if(F===0||F===y-1)return F;for(var A=0,I=0;I<k;I++)A|=(F&1)<<k-I-1,F>>=1;return A},D.prototype.permute=function(F,k,y,A,I,P){for(var H=0;H<P;H++)A[H]=k[F[H]],I[H]=y[F[H]]},D.prototype.transform=function(F,k,y,A,I,P){this.permute(P,F,k,y,A,I);for(var H=1;H<I;H<<=1)for(var q=H<<1,j=Math.cos(2*Math.PI/q),M=Math.sin(2*Math.PI/q),E=0;E<I;E+=q)for(var L=j,le=M,Q=0;Q<H;Q++){var ce=y[E+Q],fe=A[E+Q],oe=y[E+Q+H],de=A[E+Q+H],ae=L*oe-le*de;de=L*de+le*oe,oe=ae,y[E+Q]=ce+oe,A[E+Q]=fe+de,y[E+Q+H]=ce-oe,A[E+Q+H]=fe-de,Q!==q&&(ae=j*L-M*le,le=j*le+M*L,L=ae)}},D.prototype.guessLen13b=function(F,k){var y=Math.max(k,F)|1,A=y&1,I=0;for(y=y/2|0;y;y=y>>>1)I++;return 1<<I+1+A},D.prototype.conjugate=function(F,k,y){if(!(y<=1))for(var A=0;A<y/2;A++){var I=F[A];F[A]=F[y-A-1],F[y-A-1]=I,I=k[A],k[A]=-k[y-A-1],k[y-A-1]=-I}},D.prototype.normalize13b=function(F,k){for(var y=0,A=0;A<k/2;A++){var I=Math.round(F[2*A+1]/k)*8192+Math.round(F[2*A]/k)+y;F[A]=I&67108863,I<67108864?y=0:y=I/67108864|0}return F},D.prototype.convert13b=function(F,k,y,A){for(var I=0,P=0;P<k;P++)I=I+(F[P]|0),y[2*P]=I&8191,I=I>>>13,y[2*P+1]=I&8191,I=I>>>13;for(P=2*k;P<A;++P)y[P]=0;a(I===0),a((I&-8192)===0)},D.prototype.stub=function(F){for(var k=new Array(F),y=0;y<F;y++)k[y]=0;return k},D.prototype.mulp=function(F,k,y){var A=2*this.guessLen13b(F.length,k.length),I=this.makeRBT(A),P=this.stub(A),H=new Array(A),q=new Array(A),j=new Array(A),M=new Array(A),E=new Array(A),L=new Array(A),le=y.words;le.length=A,this.convert13b(F.words,F.length,H,A),this.convert13b(k.words,k.length,M,A),this.transform(H,P,q,j,A,I),this.transform(M,P,E,L,A,I);for(var Q=0;Q<A;Q++){var ce=q[Q]*E[Q]-j[Q]*L[Q];j[Q]=q[Q]*L[Q]+j[Q]*E[Q],q[Q]=ce}return this.conjugate(q,j,A),this.transform(q,j,le,P,A,I),this.conjugate(le,P,A),this.normalize13b(le,A),y.negative=F.negative^k.negative,y.length=F.length+k.length,y.strip()},c.prototype.mul=function(F){var k=new c(null);return k.words=new Array(this.length+F.length),this.mulTo(F,k)},c.prototype.mulf=function(F){var k=new c(null);return k.words=new Array(this.length+F.length),C(this,F,k)},c.prototype.imul=function(F){return this.clone().mulTo(F,this)},c.prototype.imuln=function(F){a(typeof F=="number"),a(F<67108864);for(var k=0,y=0;y<this.length;y++){var A=(this.words[y]|0)*F,I=(A&67108863)+(k&67108863);k>>=26,k+=A/67108864|0,k+=I>>>26,this.words[y]=I&67108863}return k!==0&&(this.words[y]=k,this.length++),this},c.prototype.muln=function(F){return this.clone().imuln(F)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(F){var k=w(F);if(k.length===0)return new c(1);for(var y=this,A=0;A<k.length&&k[A]===0;A++,y=y.sqr());if(++A<k.length)for(var I=y.sqr();A<k.length;A++,I=I.sqr())k[A]!==0&&(y=y.mul(I));return y},c.prototype.iushln=function(F){a(typeof F=="number"&&F>=0);var k=F%26,y=(F-k)/26,A=67108863>>>26-k<<26-k,I;if(k!==0){var P=0;for(I=0;I<this.length;I++){var H=this.words[I]&A,q=(this.words[I]|0)-H<<k;this.words[I]=q|P,P=H>>>26-k}P&&(this.words[I]=P,this.length++)}if(y!==0){for(I=this.length-1;I>=0;I--)this.words[I+y]=this.words[I];for(I=0;I<y;I++)this.words[I]=0;this.length+=y}return this.strip()},c.prototype.ishln=function(F){return a(this.negative===0),this.iushln(F)},c.prototype.iushrn=function(F,k,y){a(typeof F=="number"&&F>=0);var A;k?A=(k-k%26)/26:A=0;var I=F%26,P=Math.min((F-I)/26,this.length),H=67108863^67108863>>>I<<I,q=y;if(A-=P,A=Math.max(0,A),q){for(var j=0;j<P;j++)q.words[j]=this.words[j];q.length=P}if(P!==0)if(this.length>P)for(this.length-=P,j=0;j<this.length;j++)this.words[j]=this.words[j+P];else this.words[0]=0,this.length=1;var M=0;for(j=this.length-1;j>=0&&(M!==0||j>=A);j--){var E=this.words[j]|0;this.words[j]=M<<26-I|E>>>I,M=E&H}return q&&M!==0&&(q.words[q.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},c.prototype.ishrn=function(F,k,y){return a(this.negative===0),this.iushrn(F,k,y)},c.prototype.shln=function(F){return this.clone().ishln(F)},c.prototype.ushln=function(F){return this.clone().iushln(F)},c.prototype.shrn=function(F){return this.clone().ishrn(F)},c.prototype.ushrn=function(F){return this.clone().iushrn(F)},c.prototype.testn=function(F){a(typeof F=="number"&&F>=0);var k=F%26,y=(F-k)/26,A=1<<k;if(this.length<=y)return!1;var I=this.words[y];return!!(I&A)},c.prototype.imaskn=function(F){a(typeof F=="number"&&F>=0);var k=F%26,y=(F-k)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=y)return this;if(k!==0&&y++,this.length=Math.min(y,this.length),k!==0){var A=67108863^67108863>>>k<<k;this.words[this.length-1]&=A}return this.strip()},c.prototype.maskn=function(F){return this.clone().imaskn(F)},c.prototype.iaddn=function(F){return a(typeof F=="number"),a(F<67108864),F<0?this.isubn(-F):this.negative!==0?this.length===1&&(this.words[0]|0)<F?(this.words[0]=F-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(F),this.negative=1,this):this._iaddn(F)},c.prototype._iaddn=function(F){this.words[0]+=F;for(var k=0;k<this.length&&this.words[k]>=67108864;k++)this.words[k]-=67108864,k===this.length-1?this.words[k+1]=1:this.words[k+1]++;return this.length=Math.max(this.length,k+1),this},c.prototype.isubn=function(F){if(a(typeof F=="number"),a(F<67108864),F<0)return this.iaddn(-F);if(this.negative!==0)return this.negative=0,this.iaddn(F),this.negative=1,this;if(this.words[0]-=F,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var k=0;k<this.length&&this.words[k]<0;k++)this.words[k]+=67108864,this.words[k+1]-=1;return this.strip()},c.prototype.addn=function(F){return this.clone().iaddn(F)},c.prototype.subn=function(F){return this.clone().isubn(F)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(F,k,y){var A=F.length+y,I;this._expand(A);var P,H=0;for(I=0;I<F.length;I++){P=(this.words[I+y]|0)+H;var q=(F.words[I]|0)*k;P-=q&67108863,H=(P>>26)-(q/67108864|0),this.words[I+y]=P&67108863}for(;I<this.length-y;I++)P=(this.words[I+y]|0)+H,H=P>>26,this.words[I+y]=P&67108863;if(H===0)return this.strip();for(a(H===-1),H=0,I=0;I<this.length;I++)P=-(this.words[I]|0)+H,H=P>>26,this.words[I]=P&67108863;return this.negative=1,this.strip()},c.prototype._wordDiv=function(F,k){var y=this.length-F.length,A=this.clone(),I=F,P=I.words[I.length-1]|0,H=this._countBits(P);y=26-H,y!==0&&(I=I.ushln(y),A.iushln(y),P=I.words[I.length-1]|0);var q=A.length-I.length,j;if(k!=="mod"){j=new c(null),j.length=q+1,j.words=new Array(j.length);for(var M=0;M<j.length;M++)j.words[M]=0}var E=A.clone()._ishlnsubmul(I,1,q);E.negative===0&&(A=E,j&&(j.words[q]=1));for(var L=q-1;L>=0;L--){var le=(A.words[I.length+L]|0)*67108864+(A.words[I.length+L-1]|0);for(le=Math.min(le/P|0,67108863),A._ishlnsubmul(I,le,L);A.negative!==0;)le--,A.negative=0,A._ishlnsubmul(I,1,L),A.isZero()||(A.negative^=1);j&&(j.words[L]=le)}return j&&j.strip(),A.strip(),k!=="div"&&y!==0&&A.iushrn(y),{div:j||null,mod:A}},c.prototype.divmod=function(F,k,y){if(a(!F.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var A,I,P;return this.negative!==0&&F.negative===0?(P=this.neg().divmod(F,k),k!=="mod"&&(A=P.div.neg()),k!=="div"&&(I=P.mod.neg(),y&&I.negative!==0&&I.iadd(F)),{div:A,mod:I}):this.negative===0&&F.negative!==0?(P=this.divmod(F.neg(),k),k!=="mod"&&(A=P.div.neg()),{div:A,mod:P.mod}):this.negative&F.negative?(P=this.neg().divmod(F.neg(),k),k!=="div"&&(I=P.mod.neg(),y&&I.negative!==0&&I.isub(F)),{div:P.div,mod:I}):F.length>this.length||this.cmp(F)<0?{div:new c(0),mod:this}:F.length===1?k==="div"?{div:this.divn(F.words[0]),mod:null}:k==="mod"?{div:null,mod:new c(this.modn(F.words[0]))}:{div:this.divn(F.words[0]),mod:new c(this.modn(F.words[0]))}:this._wordDiv(F,k)},c.prototype.div=function(F){return this.divmod(F,"div",!1).div},c.prototype.mod=function(F){return this.divmod(F,"mod",!1).mod},c.prototype.umod=function(F){return this.divmod(F,"mod",!0).mod},c.prototype.divRound=function(F){var k=this.divmod(F);if(k.mod.isZero())return k.div;var y=k.div.negative!==0?k.mod.isub(F):k.mod,A=F.ushrn(1),I=F.andln(1),P=y.cmp(A);return P<0||I===1&&P===0?k.div:k.div.negative!==0?k.div.isubn(1):k.div.iaddn(1)},c.prototype.modn=function(F){a(F<=67108863);for(var k=(1<<26)%F,y=0,A=this.length-1;A>=0;A--)y=(k*y+(this.words[A]|0))%F;return y},c.prototype.idivn=function(F){a(F<=67108863);for(var k=0,y=this.length-1;y>=0;y--){var A=(this.words[y]|0)+k*67108864;this.words[y]=A/F|0,k=A%F}return this.strip()},c.prototype.divn=function(F){return this.clone().idivn(F)},c.prototype.egcd=function(F){a(F.negative===0),a(!F.isZero());var k=this,y=F.clone();k.negative!==0?k=k.umod(F):k=k.clone();for(var A=new c(1),I=new c(0),P=new c(0),H=new c(1),q=0;k.isEven()&&y.isEven();)k.iushrn(1),y.iushrn(1),++q;for(var j=y.clone(),M=k.clone();!k.isZero();){for(var E=0,L=1;!(k.words[0]&L)&&E<26;++E,L<<=1);if(E>0)for(k.iushrn(E);E-- >0;)(A.isOdd()||I.isOdd())&&(A.iadd(j),I.isub(M)),A.iushrn(1),I.iushrn(1);for(var le=0,Q=1;!(y.words[0]&Q)&&le<26;++le,Q<<=1);if(le>0)for(y.iushrn(le);le-- >0;)(P.isOdd()||H.isOdd())&&(P.iadd(j),H.isub(M)),P.iushrn(1),H.iushrn(1);k.cmp(y)>=0?(k.isub(y),A.isub(P),I.isub(H)):(y.isub(k),P.isub(A),H.isub(I))}return{a:P,b:H,gcd:y.iushln(q)}},c.prototype._invmp=function(F){a(F.negative===0),a(!F.isZero());var k=this,y=F.clone();k.negative!==0?k=k.umod(F):k=k.clone();for(var A=new c(1),I=new c(0),P=y.clone();k.cmpn(1)>0&&y.cmpn(1)>0;){for(var H=0,q=1;!(k.words[0]&q)&&H<26;++H,q<<=1);if(H>0)for(k.iushrn(H);H-- >0;)A.isOdd()&&A.iadd(P),A.iushrn(1);for(var j=0,M=1;!(y.words[0]&M)&&j<26;++j,M<<=1);if(j>0)for(y.iushrn(j);j-- >0;)I.isOdd()&&I.iadd(P),I.iushrn(1);k.cmp(y)>=0?(k.isub(y),A.isub(I)):(y.isub(k),I.isub(A))}var E;return k.cmpn(1)===0?E=A:E=I,E.cmpn(0)<0&&E.iadd(F),E},c.prototype.gcd=function(F){if(this.isZero())return F.abs();if(F.isZero())return this.abs();var k=this.clone(),y=F.clone();k.negative=0,y.negative=0;for(var A=0;k.isEven()&&y.isEven();A++)k.iushrn(1),y.iushrn(1);do{for(;k.isEven();)k.iushrn(1);for(;y.isEven();)y.iushrn(1);var I=k.cmp(y);if(I<0){var P=k;k=y,y=P}else if(I===0||y.cmpn(1)===0)break;k.isub(y)}while(!0);return y.iushln(A)},c.prototype.invm=function(F){return this.egcd(F).a.umod(F)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(F){return this.words[0]&F},c.prototype.bincn=function(F){a(typeof F=="number");var k=F%26,y=(F-k)/26,A=1<<k;if(this.length<=y)return this._expand(y+1),this.words[y]|=A,this;for(var I=A,P=y;I!==0&&P<this.length;P++){var H=this.words[P]|0;H+=I,I=H>>>26,H&=67108863,this.words[P]=H}return I!==0&&(this.words[P]=I,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(F){var k=F<0;if(this.negative!==0&&!k)return-1;if(this.negative===0&&k)return 1;this.strip();var y;if(this.length>1)y=1;else{k&&(F=-F),a(F<=67108863,"Number is too big");var A=this.words[0]|0;y=A===F?0:A<F?-1:1}return this.negative!==0?-y|0:y},c.prototype.cmp=function(F){if(this.negative!==0&&F.negative===0)return-1;if(this.negative===0&&F.negative!==0)return 1;var k=this.ucmp(F);return this.negative!==0?-k|0:k},c.prototype.ucmp=function(F){if(this.length>F.length)return 1;if(this.length<F.length)return-1;for(var k=0,y=this.length-1;y>=0;y--){var A=this.words[y]|0,I=F.words[y]|0;if(A!==I){A<I?k=-1:A>I&&(k=1);break}}return k},c.prototype.gtn=function(F){return this.cmpn(F)===1},c.prototype.gt=function(F){return this.cmp(F)===1},c.prototype.gten=function(F){return this.cmpn(F)>=0},c.prototype.gte=function(F){return this.cmp(F)>=0},c.prototype.ltn=function(F){return this.cmpn(F)===-1},c.prototype.lt=function(F){return this.cmp(F)===-1},c.prototype.lten=function(F){return this.cmpn(F)<=0},c.prototype.lte=function(F){return this.cmp(F)<=0},c.prototype.eqn=function(F){return this.cmpn(F)===0},c.prototype.eq=function(F){return this.cmp(F)===0},c.red=function(F){return new Z(F)},c.prototype.toRed=function(F){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),F.convertTo(this)._forceRed(F)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(F){return this.red=F,this},c.prototype.forceRed=function(F){return a(!this.red,"Already a number in reduction context"),this._forceRed(F)},c.prototype.redAdd=function(F){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,F)},c.prototype.redIAdd=function(F){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,F)},c.prototype.redSub=function(F){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,F)},c.prototype.redISub=function(F){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,F)},c.prototype.redShl=function(F){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,F)},c.prototype.redMul=function(F){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.mul(this,F)},c.prototype.redIMul=function(F){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,F),this.red.imul(this,F)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(F){return a(this.red&&!F.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,F)};var z={k256:null,p224:null,p192:null,p25519:null};function U(ie,F){this.name=ie,this.p=new c(F,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}U.prototype._tmp=function(){var F=new c(null);return F.words=new Array(Math.ceil(this.n/13)),F},U.prototype.ireduce=function(F){var k=F,y;do this.split(k,this.tmp),k=this.imulK(k),k=k.iadd(this.tmp),y=k.bitLength();while(y>this.n);var A=y<this.n?-1:k.ucmp(this.p);return A===0?(k.words[0]=0,k.length=1):A>0?k.isub(this.p):k.strip!==void 0?k.strip():k._strip(),k},U.prototype.split=function(F,k){F.iushrn(this.n,0,k)},U.prototype.imulK=function(F){return F.imul(this.k)};function Y(){U.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(Y,U),Y.prototype.split=function(F,k){for(var y=4194303,A=Math.min(F.length,9),I=0;I<A;I++)k.words[I]=F.words[I];if(k.length=A,F.length<=9){F.words[0]=0,F.length=1;return}var P=F.words[9];for(k.words[k.length++]=P&y,I=10;I<F.length;I++){var H=F.words[I]|0;F.words[I-10]=(H&y)<<4|P>>>22,P=H}P>>>=22,F.words[I-10]=P,P===0&&F.length>10?F.length-=10:F.length-=9},Y.prototype.imulK=function(F){F.words[F.length]=0,F.words[F.length+1]=0,F.length+=2;for(var k=0,y=0;y<F.length;y++){var A=F.words[y]|0;k+=A*977,F.words[y]=k&67108863,k=A*64+(k/67108864|0)}return F.words[F.length-1]===0&&(F.length--,F.words[F.length-1]===0&&F.length--),F};function X(){U.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(X,U);function O(){U.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(O,U);function J(){U.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(J,U),J.prototype.imulK=function(F){for(var k=0,y=0;y<F.length;y++){var A=(F.words[y]|0)*19+k,I=A&67108863;A>>>=26,F.words[y]=I,k=A}return k!==0&&(F.words[F.length++]=k),F},c._prime=function(F){if(z[F])return z[F];var k;if(F==="k256")k=new Y;else if(F==="p224")k=new X;else if(F==="p192")k=new O;else if(F==="p25519")k=new J;else throw new Error("Unknown prime "+F);return z[F]=k,k};function Z(ie){if(typeof ie=="string"){var F=c._prime(ie);this.m=F.p,this.prime=F}else a(ie.gtn(1),"modulus must be greater than 1"),this.m=ie,this.prime=null}Z.prototype._verify1=function(F){a(F.negative===0,"red works only with positives"),a(F.red,"red works only with red numbers")},Z.prototype._verify2=function(F,k){a((F.negative|k.negative)===0,"red works only with positives"),a(F.red&&F.red===k.red,"red works only with red numbers")},Z.prototype.imod=function(F){return this.prime?this.prime.ireduce(F)._forceRed(this):F.umod(this.m)._forceRed(this)},Z.prototype.neg=function(F){return F.isZero()?F.clone():this.m.sub(F)._forceRed(this)},Z.prototype.add=function(F,k){this._verify2(F,k);var y=F.add(k);return y.cmp(this.m)>=0&&y.isub(this.m),y._forceRed(this)},Z.prototype.iadd=function(F,k){this._verify2(F,k);var y=F.iadd(k);return y.cmp(this.m)>=0&&y.isub(this.m),y},Z.prototype.sub=function(F,k){this._verify2(F,k);var y=F.sub(k);return y.cmpn(0)<0&&y.iadd(this.m),y._forceRed(this)},Z.prototype.isub=function(F,k){this._verify2(F,k);var y=F.isub(k);return y.cmpn(0)<0&&y.iadd(this.m),y},Z.prototype.shl=function(F,k){return this._verify1(F),this.imod(F.ushln(k))},Z.prototype.imul=function(F,k){return this._verify2(F,k),this.imod(F.imul(k))},Z.prototype.mul=function(F,k){return this._verify2(F,k),this.imod(F.mul(k))},Z.prototype.isqr=function(F){return this.imul(F,F.clone())},Z.prototype.sqr=function(F){return this.mul(F,F)},Z.prototype.sqrt=function(F){if(F.isZero())return F.clone();var k=this.m.andln(3);if(a(k%2===1),k===3){var y=this.m.add(new c(1)).iushrn(2);return this.pow(F,y)}for(var A=this.m.subn(1),I=0;!A.isZero()&&A.andln(1)===0;)I++,A.iushrn(1);a(!A.isZero());var P=new c(1).toRed(this),H=P.redNeg(),q=this.m.subn(1).iushrn(1),j=this.m.bitLength();for(j=new c(2*j*j).toRed(this);this.pow(j,q).cmp(H)!==0;)j.redIAdd(H);for(var M=this.pow(j,A),E=this.pow(F,A.addn(1).iushrn(1)),L=this.pow(F,A),le=I;L.cmp(P)!==0;){for(var Q=L,ce=0;Q.cmp(P)!==0;ce++)Q=Q.redSqr();a(ce<le);var fe=this.pow(M,new c(1).iushln(le-ce-1));E=E.redMul(fe),M=fe.redSqr(),L=L.redMul(M),le=ce}return E},Z.prototype.invm=function(F){var k=F._invmp(this.m);return k.negative!==0?(k.negative=0,this.imod(k).redNeg()):this.imod(k)},Z.prototype.pow=function(F,k){if(k.isZero())return new c(1).toRed(this);if(k.cmpn(1)===0)return F.clone();var y=4,A=new Array(1<<y);A[0]=new c(1).toRed(this),A[1]=F;for(var I=2;I<A.length;I++)A[I]=this.mul(A[I-1],F);var P=A[0],H=0,q=0,j=k.bitLength()%26;for(j===0&&(j=26),I=k.length-1;I>=0;I--){for(var M=k.words[I],E=j-1;E>=0;E--){var L=M>>E&1;if(P!==A[0]&&(P=this.sqr(P)),L===0&&H===0){q=0;continue}H<<=1,H|=L,q++,!(q!==y&&(I!==0||E!==0))&&(P=this.mul(P,A[H]),q=0,H=0)}j=26}return P},Z.prototype.convertTo=function(F){var k=F.umod(this.m);return k===F?k.clone():k},Z.prototype.convertFrom=function(F){var k=F.clone();return k.red=null,k},c.mont=function(F){return new se(F)};function se(ie){Z.call(this,ie),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(se,Z),se.prototype.convertTo=function(F){return this.imod(F.ushln(this.shift))},se.prototype.convertFrom=function(F){var k=this.imod(F.mul(this.rinv));return k.red=null,k},se.prototype.imul=function(F,k){if(F.isZero()||k.isZero())return F.words[0]=0,F.length=1,F;var y=F.imul(k),A=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=y.isub(A).iushrn(this.shift),P=I;return I.cmp(this.m)>=0?P=I.isub(this.m):I.cmpn(0)<0&&(P=I.iadd(this.m)),P._forceRed(this)},se.prototype.mul=function(F,k){if(F.isZero()||k.isZero())return new c(0)._forceRed(this);var y=F.mul(k),A=y.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),I=y.isub(A).iushrn(this.shift),P=I;return I.cmp(this.m)>=0?P=I.isub(this.m):I.cmpn(0)<0&&(P=I.iadd(this.m)),P._forceRed(this)},se.prototype.invm=function(F){var k=this.imod(F._invmp(this.m).mul(this.r2));return k._forceRed(this)}})(t,commonjsGlobal)})(bn$4);var brorandExports={},brorand={get exports(){return brorandExports},set exports(t){brorandExports=t}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorandExports;hasRequiredBrorand=1;var t;brorand.exports=function(o){return t||(t=new e(null)),t.generate(o)};function e(a){this.rand=a}if(brorandExports.Rand=e,e.prototype.generate=function(o){return this._rand(o)},e.prototype._rand=function(o){if(this.rand.getBytes)return this.rand.getBytes(o);for(var c=new Uint8Array(o),l=0;l<c.length;l++)c[l]=this.rand.getByte();return c},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(o){var c=new Uint8Array(o);return self.crypto.getRandomValues(c),c}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(o){var c=new Uint8Array(o);return self.msCrypto.getRandomValues(c),c}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var n=requireCryptoBrowserify();if(typeof n.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(o){return n.randomBytes(o)}}catch{}return brorandExports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var t=bnExports$4,e=requireBrorand();function n(a){this.rand=a||new e.Rand}return mr=n,n.create=function(o){return new n(o)},n.prototype._randbelow=function(o){var c=o.bitLength(),l=Math.ceil(c/8);do var u=new t(this.rand.generate(l));while(u.cmp(o)>=0);return u},n.prototype._randrange=function(o,c){var l=c.sub(o);return o.add(this._randbelow(l))},n.prototype.test=function(o,c,l){var u=o.bitLength(),d=t.mont(o),m=new t(1).toRed(d);c||(c=Math.max(1,u/48|0));for(var b=o.subn(1),x=0;!b.testn(x);x++);for(var _=o.shrn(x),w=b.toRed(d),S=!0;c>0;c--){var T=this._randrange(new t(2),b);l&&l(T);var B=T.toRed(d).redPow(_);if(!(B.cmp(m)===0||B.cmp(w)===0)){for(var C=1;C<x;C++){if(B=B.redSqr(),B.cmp(m)===0)return!1;if(B.cmp(w)===0)break}if(C===x)return!1}}return S},n.prototype.getDivisor=function(o,c){var l=o.bitLength(),u=t.mont(o),d=new t(1).toRed(u);c||(c=Math.max(1,l/48|0));for(var m=o.subn(1),b=0;!m.testn(b);b++);for(var x=o.shrn(b),_=m.toRed(u);c>0;c--){var w=this._randrange(new t(2),m),S=o.gcd(w);if(S.cmpn(1)!==0)return S;var T=w.toRed(u).redPow(x);if(!(T.cmp(d)===0||T.cmp(_)===0)){for(var B=1;B<b;B++){if(T=T.redSqr(),T.cmp(d)===0)return T.fromRed().subn(1).gcd(o);if(T.cmp(_)===0)break}if(B===b)return T=T.redSqr(),T.fromRed().subn(1).gcd(o)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var t=browserExports$2;generatePrime=B,B.simpleSieve=S,B.fermatTest=T;var e=bnExports$4,n=new e(24),a=requireMr(),o=new a,c=new e(1),l=new e(2),u=new e(5);new e(16),new e(8);var d=new e(10),m=new e(3);new e(7);var b=new e(11),x=new e(4);new e(12);var _=null;function w(){if(_!==null)return _;var C=1048576,D=[];D[0]=2;for(var z=1,U=3;U<C;U+=2){for(var Y=Math.ceil(Math.sqrt(U)),X=0;X<z&&D[X]<=Y&&U%D[X]!==0;X++);z!==X&&D[X]<=Y||(D[z++]=U)}return _=D,D}function S(C){for(var D=w(),z=0;z<D.length;z++)if(C.modn(D[z])===0)return C.cmpn(D[z])===0;return!0}function T(C){var D=e.mont(C);return l.toRed(D).redPow(C.subn(1)).fromRed().cmpn(1)===0}function B(C,D){if(C<16)return D===2||D===5?new e([140,123]):new e([140,39]);D=new e(D);for(var z,U;;){for(z=new e(t(Math.ceil(C/8)));z.bitLength()>C;)z.ishrn(1);if(z.isEven()&&z.iadd(c),z.testn(1)||z.iadd(l),D.cmp(l)){if(!D.cmp(u))for(;z.mod(d).cmp(m);)z.iadd(x)}else for(;z.mod(n).cmp(b);)z.iadd(x);if(U=z.shrn(1),S(U)&&S(z)&&T(U)&&T(z)&&o.test(U)&&o.test(z))return z}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$2={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var t=bnExports$4,e=requireMr(),n=new e,a=new t(24),o=new t(11),c=new t(10),l=new t(3),u=new t(7),d=requireGeneratePrime(),m=browserExports$2;dh=S;function b(B,C){return C=C||"utf8",Buffer$x.isBuffer(B)||(B=new Buffer$x(B,C)),this._pub=new t(B),this}function x(B,C){return C=C||"utf8",Buffer$x.isBuffer(B)||(B=new Buffer$x(B,C)),this._priv=new t(B),this}var _={};function w(B,C){var D=C.toString("hex"),z=[D,B.toString(16)].join("_");if(z in _)return _[z];var U=0;if(B.isEven()||!d.simpleSieve||!d.fermatTest(B)||!n.test(B))return U+=1,D==="02"||D==="05"?U+=8:U+=4,_[z]=U,U;n.test(B.shrn(1))||(U+=2);var Y;switch(D){case"02":B.mod(a).cmp(o)&&(U+=8);break;case"05":Y=B.mod(c),Y.cmp(l)&&Y.cmp(u)&&(U+=8);break;default:U+=4}return _[z]=U,U}function S(B,C,D){this.setGenerator(C),this.__prime=new t(B),this._prime=t.mont(this.__prime),this._primeLen=B.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,D?(this.setPublicKey=b,this.setPrivateKey=x):this._primeCode=8}Object.defineProperty(S.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=w(this.__prime,this.__gen)),this._primeCode}}),S.prototype.generateKeys=function(){return this._priv||(this._priv=new t(m(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},S.prototype.computeSecret=function(B){B=new t(B),B=B.toRed(this._prime);var C=B.redPow(this._priv).fromRed(),D=new Buffer$x(C.toArray()),z=this.getPrime();if(D.length<z.length){var U=new Buffer$x(z.length-D.length);U.fill(0),D=Buffer$x.concat([U,D])}return D},S.prototype.getPublicKey=function(C){return T(this._pub,C)},S.prototype.getPrivateKey=function(C){return T(this._priv,C)},S.prototype.getPrime=function(B){return T(this.__prime,B)},S.prototype.getGenerator=function(B){return T(this._gen,B)},S.prototype.setGenerator=function(B,C){return C=C||"utf8",Buffer$x.isBuffer(B)||(B=new Buffer$x(B,C)),this.__gen=B,this._gen=new t(B),this};function T(B,C){var D=new Buffer$x(B.toArray());return C?D.toString(C):D}return dh}var hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$9;hasRequiredBrowser$3=1;var t=requireGeneratePrime(),e=require$$1$2,n=requireDh();function a(l){var u=new Buffer$x(e[l].prime,"hex"),d=new Buffer$x(e[l].gen,"hex");return new n(u,d)}var o={binary:!0,hex:!0,base64:!0};function c(l,u,d,m){return Buffer$x.isBuffer(u)||o[u]===void 0?c(l,"binary",u,d):(u=u||"binary",m=m||"binary",d=d||new Buffer$x([2]),Buffer$x.isBuffer(d)||(d=new Buffer$x(d,m)),typeof l=="number"?new n(t(l,d),d,!0):(Buffer$x.isBuffer(l)||(l=new Buffer$x(l,u)),new n(l,d,!0)))}return browser$9.DiffieHellmanGroup=browser$9.createDiffieHellmanGroup=browser$9.getDiffieHellman=a,browser$9.createDiffieHellman=browser$9.DiffieHellman=c,browser$9}var signExports={},sign$2={get exports(){return signExports},set exports(t){signExports=t}},bnExports$3={},bn$3={get exports(){return bnExports$3},set exports(t){bnExports$3=t}};(function(t){(function(e,n){function a(k,y){if(!k)throw new Error(y||"Assertion failed")}function o(k,y){k.super_=y;var A=function(){};A.prototype=y.prototype,k.prototype=new A,k.prototype.constructor=k}function c(k,y,A){if(c.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((y==="le"||y==="be")&&(A=y,y=10),this._init(k||0,y||10,A||"be"))}typeof e=="object"?e.exports=c:n.BN=c,c.BN=c,c.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$2.Buffer}catch{}c.isBN=function(y){return y instanceof c?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===c.wordSize&&Array.isArray(y.words)},c.max=function(y,A){return y.cmp(A)>0?y:A},c.min=function(y,A){return y.cmp(A)<0?y:A},c.prototype._init=function(y,A,I){if(typeof y=="number")return this._initNumber(y,A,I);if(typeof y=="object")return this._initArray(y,A,I);A==="hex"&&(A=16),a(A===(A|0)&&A>=2&&A<=36),y=y.toString().replace(/\s+/g,"");var P=0;y[0]==="-"&&(P++,this.negative=1),P<y.length&&(A===16?this._parseHex(y,P,I):(this._parseBase(y,A,P),I==="le"&&this._initArray(this.toArray(),A,I)))},c.prototype._initNumber=function(y,A,I){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(a(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),I==="le"&&this._initArray(this.toArray(),A,I)},c.prototype._initArray=function(y,A,I){if(a(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var H,q,j=0;if(I==="be")for(P=y.length-1,H=0;P>=0;P-=3)q=y[P]|y[P-1]<<8|y[P-2]<<16,this.words[H]|=q<<j&67108863,this.words[H+1]=q>>>26-j&67108863,j+=24,j>=26&&(j-=26,H++);else if(I==="le")for(P=0,H=0;P<y.length;P+=3)q=y[P]|y[P+1]<<8|y[P+2]<<16,this.words[H]|=q<<j&67108863,this.words[H+1]=q>>>26-j&67108863,j+=24,j>=26&&(j-=26,H++);return this._strip()};function u(k,y){var A=k.charCodeAt(y);if(A>=48&&A<=57)return A-48;if(A>=65&&A<=70)return A-55;if(A>=97&&A<=102)return A-87;a(!1,"Invalid character in "+k)}function d(k,y,A){var I=u(k,A);return A-1>=y&&(I|=u(k,A-1)<<4),I}c.prototype._parseHex=function(y,A,I){this.length=Math.ceil((y.length-A)/6),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var H=0,q=0,j;if(I==="be")for(P=y.length-1;P>=A;P-=2)j=d(y,A,P)<<H,this.words[q]|=j&67108863,H>=18?(H-=18,q+=1,this.words[q]|=j>>>26):H+=8;else{var M=y.length-A;for(P=M%2===0?A+1:A;P<y.length;P+=2)j=d(y,A,P)<<H,this.words[q]|=j&67108863,H>=18?(H-=18,q+=1,this.words[q]|=j>>>26):H+=8}this._strip()};function m(k,y,A,I){for(var P=0,H=0,q=Math.min(k.length,A),j=y;j<q;j++){var M=k.charCodeAt(j)-48;P*=I,M>=49?H=M-49+10:M>=17?H=M-17+10:H=M,a(M>=0&&H<I,"Invalid character"),P+=H}return P}c.prototype._parseBase=function(y,A,I){this.words=[0],this.length=1;for(var P=0,H=1;H<=67108863;H*=A)P++;P--,H=H/A|0;for(var q=y.length-I,j=q%P,M=Math.min(q,q-j)+I,E=0,L=I;L<M;L+=P)E=m(y,L,L+P,A),this.imuln(H),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(j!==0){var le=1;for(E=m(y,L,y.length,A),L=0;L<j;L++)le*=A;this.imuln(le),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}this._strip()},c.prototype.copy=function(y){y.words=new Array(this.length);for(var A=0;A<this.length;A++)y.words[A]=this.words[A];y.length=this.length,y.negative=this.negative,y.red=this.red};function b(k,y){k.words=y.words,k.length=y.length,k.negative=y.negative,k.red=y.red}if(c.prototype._move=function(y){b(y,this)},c.prototype.clone=function(){var y=new c(null);return this.copy(y),y},c.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},c.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{c.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{c.prototype.inspect=x}else c.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(y,A){y=y||10,A=A|0||1;var I;if(y===16||y==="hex"){I="";for(var P=0,H=0,q=0;q<this.length;q++){var j=this.words[q],M=((j<<P|H)&16777215).toString(16);H=j>>>24-P&16777215,P+=2,P>=26&&(P-=26,q--),H!==0||q!==this.length-1?I=_[6-M.length]+M+I:I=M+I}for(H!==0&&(I=H.toString(16)+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}if(y===(y|0)&&y>=2&&y<=36){var E=w[y],L=S[y];I="";var le=this.clone();for(le.negative=0;!le.isZero();){var Q=le.modrn(L).toString(y);le=le.idivn(L),le.isZero()?I=Q+I:I=_[E-Q.length]+Q+I}for(this.isZero()&&(I="0"+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},c.prototype.toJSON=function(){return this.toString(16,2)},l&&(c.prototype.toBuffer=function(y,A){return this.toArrayLike(l,y,A)}),c.prototype.toArray=function(y,A){return this.toArrayLike(Array,y,A)};var T=function(y,A){return y.allocUnsafe?y.allocUnsafe(A):new y(A)};c.prototype.toArrayLike=function(y,A,I){this._strip();var P=this.byteLength(),H=I||Math.max(1,P);a(P<=H,"byte array longer than desired length"),a(H>0,"Requested array length <= 0");var q=T(y,H),j=A==="le"?"LE":"BE";return this["_toArrayLike"+j](q,P),q},c.prototype._toArrayLikeLE=function(y,A){for(var I=0,P=0,H=0,q=0;H<this.length;H++){var j=this.words[H]<<q|P;y[I++]=j&255,I<y.length&&(y[I++]=j>>8&255),I<y.length&&(y[I++]=j>>16&255),q===6?(I<y.length&&(y[I++]=j>>24&255),P=0,q=0):(P=j>>>24,q+=2)}if(I<y.length)for(y[I++]=P;I<y.length;)y[I++]=0},c.prototype._toArrayLikeBE=function(y,A){for(var I=y.length-1,P=0,H=0,q=0;H<this.length;H++){var j=this.words[H]<<q|P;y[I--]=j&255,I>=0&&(y[I--]=j>>8&255),I>=0&&(y[I--]=j>>16&255),q===6?(I>=0&&(y[I--]=j>>24&255),P=0,q=0):(P=j>>>24,q+=2)}if(I>=0)for(y[I--]=P;I>=0;)y[I--]=0},Math.clz32?c.prototype._countBits=function(y){return 32-Math.clz32(y)}:c.prototype._countBits=function(y){var A=y,I=0;return A>=4096&&(I+=13,A>>>=13),A>=64&&(I+=7,A>>>=7),A>=8&&(I+=4,A>>>=4),A>=2&&(I+=2,A>>>=2),I+A},c.prototype._zeroBits=function(y){if(y===0)return 26;var A=y,I=0;return A&8191||(I+=13,A>>>=13),A&127||(I+=7,A>>>=7),A&15||(I+=4,A>>>=4),A&3||(I+=2,A>>>=2),A&1||I++,I},c.prototype.bitLength=function(){var y=this.words[this.length-1],A=this._countBits(y);return(this.length-1)*26+A};function B(k){for(var y=new Array(k.bitLength()),A=0;A<y.length;A++){var I=A/26|0,P=A%26;y[A]=k.words[I]>>>P&1}return y}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,A=0;A<this.length;A++){var I=this._zeroBits(this.words[A]);if(y+=I,I!==26)break}return y},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},c.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var A=0;A<y.length;A++)this.words[A]=this.words[A]|y.words[A];return this._strip()},c.prototype.ior=function(y){return a((this.negative|y.negative)===0),this.iuor(y)},c.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},c.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},c.prototype.iuand=function(y){var A;this.length>y.length?A=y:A=this;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]&y.words[I];return this.length=A.length,this._strip()},c.prototype.iand=function(y){return a((this.negative|y.negative)===0),this.iuand(y)},c.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},c.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},c.prototype.iuxor=function(y){var A,I;this.length>y.length?(A=this,I=y):(A=y,I=this);for(var P=0;P<I.length;P++)this.words[P]=A.words[P]^I.words[P];if(this!==A)for(;P<A.length;P++)this.words[P]=A.words[P];return this.length=A.length,this._strip()},c.prototype.ixor=function(y){return a((this.negative|y.negative)===0),this.iuxor(y)},c.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},c.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},c.prototype.inotn=function(y){a(typeof y=="number"&&y>=0);var A=Math.ceil(y/26)|0,I=y%26;this._expand(A),I>0&&A--;for(var P=0;P<A;P++)this.words[P]=~this.words[P]&67108863;return I>0&&(this.words[P]=~this.words[P]&67108863>>26-I),this._strip()},c.prototype.notn=function(y){return this.clone().inotn(y)},c.prototype.setn=function(y,A){a(typeof y=="number"&&y>=0);var I=y/26|0,P=y%26;return this._expand(I+1),A?this.words[I]=this.words[I]|1<<P:this.words[I]=this.words[I]&~(1<<P),this._strip()},c.prototype.iadd=function(y){var A;if(this.negative!==0&&y.negative===0)return this.negative=0,A=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,A=this.isub(y),y.negative=1,A._normSign();var I,P;this.length>y.length?(I=this,P=y):(I=y,P=this);for(var H=0,q=0;q<P.length;q++)A=(I.words[q]|0)+(P.words[q]|0)+H,this.words[q]=A&67108863,H=A>>>26;for(;H!==0&&q<I.length;q++)A=(I.words[q]|0)+H,this.words[q]=A&67108863,H=A>>>26;if(this.length=I.length,H!==0)this.words[this.length]=H,this.length++;else if(I!==this)for(;q<I.length;q++)this.words[q]=I.words[q];return this},c.prototype.add=function(y){var A;return y.negative!==0&&this.negative===0?(y.negative=0,A=this.sub(y),y.negative^=1,A):y.negative===0&&this.negative!==0?(this.negative=0,A=y.sub(this),this.negative=1,A):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},c.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var A=this.iadd(y);return y.negative=1,A._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var I=this.cmp(y);if(I===0)return this.negative=0,this.length=1,this.words[0]=0,this;var P,H;I>0?(P=this,H=y):(P=y,H=this);for(var q=0,j=0;j<H.length;j++)A=(P.words[j]|0)-(H.words[j]|0)+q,q=A>>26,this.words[j]=A&67108863;for(;q!==0&&j<P.length;j++)A=(P.words[j]|0)+q,q=A>>26,this.words[j]=A&67108863;if(q===0&&j<P.length&&P!==this)for(;j<P.length;j++)this.words[j]=P.words[j];return this.length=Math.max(this.length,j),P!==this&&(this.negative=1),this._strip()},c.prototype.sub=function(y){return this.clone().isub(y)};function C(k,y,A){A.negative=y.negative^k.negative;var I=k.length+y.length|0;A.length=I,I=I-1|0;var P=k.words[0]|0,H=y.words[0]|0,q=P*H,j=q&67108863,M=q/67108864|0;A.words[0]=j;for(var E=1;E<I;E++){for(var L=M>>>26,le=M&67108863,Q=Math.min(E,y.length-1),ce=Math.max(0,E-k.length+1);ce<=Q;ce++){var fe=E-ce|0;P=k.words[fe]|0,H=y.words[ce]|0,q=P*H+le,L+=q/67108864|0,le=q&67108863}A.words[E]=le|0,M=L|0}return M!==0?A.words[E]=M|0:A.length--,A._strip()}var D=function(y,A,I){var P=y.words,H=A.words,q=I.words,j=0,M,E,L,le=P[0]|0,Q=le&8191,ce=le>>>13,fe=P[1]|0,oe=fe&8191,de=fe>>>13,ae=P[2]|0,he=ae&8191,te=ae>>>13,pe=P[3]|0,ee=pe&8191,ge=pe>>>13,Ee=P[4]|0,be=Ee&8191,xe=Ee>>>13,ve=P[5]|0,Se=ve&8191,ke=ve>>>13,Ce=P[6]|0,Re=Ce&8191,Le=Ce>>>13,je=P[7]|0,Pe=je&8191,me=je>>>13,ne=P[8]|0,ue=ne&8191,_e=ne>>>13,Ie=P[9]|0,Ne=Ie&8191,De=Ie>>>13,et=H[0]|0,We=et&8191,Ke=et>>>13,xt=H[1]|0,tt=xt&8191,st=xt>>>13,It=H[2]|0,yt=It&8191,ut=It>>>13,At=H[3]|0,ht=At&8191,nt=At>>>13,Tt=H[4]|0,dt=Tt&8191,it=Tt>>>13,Bt=H[5]|0,pt=Bt&8191,rt=Bt>>>13,Ct=H[6]|0,we=Ct&8191,Be=Ct>>>13,Me=H[7]|0,re=Me&8191,ye=Me>>>13,Ae=H[8]|0,$e=Ae&8191,Te=Ae>>>13,Oe=H[9]|0,Fe=Oe&8191,Ue=Oe>>>13;I.negative=y.negative^A.negative,I.length=19,M=Math.imul(Q,We),E=Math.imul(Q,Ke),E=E+Math.imul(ce,We)|0,L=Math.imul(ce,Ke);var ze=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(ze>>>26)|0,ze&=67108863,M=Math.imul(oe,We),E=Math.imul(oe,Ke),E=E+Math.imul(de,We)|0,L=Math.imul(de,Ke),M=M+Math.imul(Q,tt)|0,E=E+Math.imul(Q,st)|0,E=E+Math.imul(ce,tt)|0,L=L+Math.imul(ce,st)|0;var He=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(He>>>26)|0,He&=67108863,M=Math.imul(he,We),E=Math.imul(he,Ke),E=E+Math.imul(te,We)|0,L=Math.imul(te,Ke),M=M+Math.imul(oe,tt)|0,E=E+Math.imul(oe,st)|0,E=E+Math.imul(de,tt)|0,L=L+Math.imul(de,st)|0,M=M+Math.imul(Q,yt)|0,E=E+Math.imul(Q,ut)|0,E=E+Math.imul(ce,yt)|0,L=L+Math.imul(ce,ut)|0;var qe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(qe>>>26)|0,qe&=67108863,M=Math.imul(ee,We),E=Math.imul(ee,Ke),E=E+Math.imul(ge,We)|0,L=Math.imul(ge,Ke),M=M+Math.imul(he,tt)|0,E=E+Math.imul(he,st)|0,E=E+Math.imul(te,tt)|0,L=L+Math.imul(te,st)|0,M=M+Math.imul(oe,yt)|0,E=E+Math.imul(oe,ut)|0,E=E+Math.imul(de,yt)|0,L=L+Math.imul(de,ut)|0,M=M+Math.imul(Q,ht)|0,E=E+Math.imul(Q,nt)|0,E=E+Math.imul(ce,ht)|0,L=L+Math.imul(ce,nt)|0;var Xe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,M=Math.imul(be,We),E=Math.imul(be,Ke),E=E+Math.imul(xe,We)|0,L=Math.imul(xe,Ke),M=M+Math.imul(ee,tt)|0,E=E+Math.imul(ee,st)|0,E=E+Math.imul(ge,tt)|0,L=L+Math.imul(ge,st)|0,M=M+Math.imul(he,yt)|0,E=E+Math.imul(he,ut)|0,E=E+Math.imul(te,yt)|0,L=L+Math.imul(te,ut)|0,M=M+Math.imul(oe,ht)|0,E=E+Math.imul(oe,nt)|0,E=E+Math.imul(de,ht)|0,L=L+Math.imul(de,nt)|0,M=M+Math.imul(Q,dt)|0,E=E+Math.imul(Q,it)|0,E=E+Math.imul(ce,dt)|0,L=L+Math.imul(ce,it)|0;var Ze=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,M=Math.imul(Se,We),E=Math.imul(Se,Ke),E=E+Math.imul(ke,We)|0,L=Math.imul(ke,Ke),M=M+Math.imul(be,tt)|0,E=E+Math.imul(be,st)|0,E=E+Math.imul(xe,tt)|0,L=L+Math.imul(xe,st)|0,M=M+Math.imul(ee,yt)|0,E=E+Math.imul(ee,ut)|0,E=E+Math.imul(ge,yt)|0,L=L+Math.imul(ge,ut)|0,M=M+Math.imul(he,ht)|0,E=E+Math.imul(he,nt)|0,E=E+Math.imul(te,ht)|0,L=L+Math.imul(te,nt)|0,M=M+Math.imul(oe,dt)|0,E=E+Math.imul(oe,it)|0,E=E+Math.imul(de,dt)|0,L=L+Math.imul(de,it)|0,M=M+Math.imul(Q,pt)|0,E=E+Math.imul(Q,rt)|0,E=E+Math.imul(ce,pt)|0,L=L+Math.imul(ce,rt)|0;var at=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(at>>>26)|0,at&=67108863,M=Math.imul(Re,We),E=Math.imul(Re,Ke),E=E+Math.imul(Le,We)|0,L=Math.imul(Le,Ke),M=M+Math.imul(Se,tt)|0,E=E+Math.imul(Se,st)|0,E=E+Math.imul(ke,tt)|0,L=L+Math.imul(ke,st)|0,M=M+Math.imul(be,yt)|0,E=E+Math.imul(be,ut)|0,E=E+Math.imul(xe,yt)|0,L=L+Math.imul(xe,ut)|0,M=M+Math.imul(ee,ht)|0,E=E+Math.imul(ee,nt)|0,E=E+Math.imul(ge,ht)|0,L=L+Math.imul(ge,nt)|0,M=M+Math.imul(he,dt)|0,E=E+Math.imul(he,it)|0,E=E+Math.imul(te,dt)|0,L=L+Math.imul(te,it)|0,M=M+Math.imul(oe,pt)|0,E=E+Math.imul(oe,rt)|0,E=E+Math.imul(de,pt)|0,L=L+Math.imul(de,rt)|0,M=M+Math.imul(Q,we)|0,E=E+Math.imul(Q,Be)|0,E=E+Math.imul(ce,we)|0,L=L+Math.imul(ce,Be)|0;var Je=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Je>>>26)|0,Je&=67108863,M=Math.imul(Pe,We),E=Math.imul(Pe,Ke),E=E+Math.imul(me,We)|0,L=Math.imul(me,Ke),M=M+Math.imul(Re,tt)|0,E=E+Math.imul(Re,st)|0,E=E+Math.imul(Le,tt)|0,L=L+Math.imul(Le,st)|0,M=M+Math.imul(Se,yt)|0,E=E+Math.imul(Se,ut)|0,E=E+Math.imul(ke,yt)|0,L=L+Math.imul(ke,ut)|0,M=M+Math.imul(be,ht)|0,E=E+Math.imul(be,nt)|0,E=E+Math.imul(xe,ht)|0,L=L+Math.imul(xe,nt)|0,M=M+Math.imul(ee,dt)|0,E=E+Math.imul(ee,it)|0,E=E+Math.imul(ge,dt)|0,L=L+Math.imul(ge,it)|0,M=M+Math.imul(he,pt)|0,E=E+Math.imul(he,rt)|0,E=E+Math.imul(te,pt)|0,L=L+Math.imul(te,rt)|0,M=M+Math.imul(oe,we)|0,E=E+Math.imul(oe,Be)|0,E=E+Math.imul(de,we)|0,L=L+Math.imul(de,Be)|0,M=M+Math.imul(Q,re)|0,E=E+Math.imul(Q,ye)|0,E=E+Math.imul(ce,re)|0,L=L+Math.imul(ce,ye)|0;var Qe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,M=Math.imul(ue,We),E=Math.imul(ue,Ke),E=E+Math.imul(_e,We)|0,L=Math.imul(_e,Ke),M=M+Math.imul(Pe,tt)|0,E=E+Math.imul(Pe,st)|0,E=E+Math.imul(me,tt)|0,L=L+Math.imul(me,st)|0,M=M+Math.imul(Re,yt)|0,E=E+Math.imul(Re,ut)|0,E=E+Math.imul(Le,yt)|0,L=L+Math.imul(Le,ut)|0,M=M+Math.imul(Se,ht)|0,E=E+Math.imul(Se,nt)|0,E=E+Math.imul(ke,ht)|0,L=L+Math.imul(ke,nt)|0,M=M+Math.imul(be,dt)|0,E=E+Math.imul(be,it)|0,E=E+Math.imul(xe,dt)|0,L=L+Math.imul(xe,it)|0,M=M+Math.imul(ee,pt)|0,E=E+Math.imul(ee,rt)|0,E=E+Math.imul(ge,pt)|0,L=L+Math.imul(ge,rt)|0,M=M+Math.imul(he,we)|0,E=E+Math.imul(he,Be)|0,E=E+Math.imul(te,we)|0,L=L+Math.imul(te,Be)|0,M=M+Math.imul(oe,re)|0,E=E+Math.imul(oe,ye)|0,E=E+Math.imul(de,re)|0,L=L+Math.imul(de,ye)|0,M=M+Math.imul(Q,$e)|0,E=E+Math.imul(Q,Te)|0,E=E+Math.imul(ce,$e)|0,L=L+Math.imul(ce,Te)|0;var gt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(gt>>>26)|0,gt&=67108863,M=Math.imul(Ne,We),E=Math.imul(Ne,Ke),E=E+Math.imul(De,We)|0,L=Math.imul(De,Ke),M=M+Math.imul(ue,tt)|0,E=E+Math.imul(ue,st)|0,E=E+Math.imul(_e,tt)|0,L=L+Math.imul(_e,st)|0,M=M+Math.imul(Pe,yt)|0,E=E+Math.imul(Pe,ut)|0,E=E+Math.imul(me,yt)|0,L=L+Math.imul(me,ut)|0,M=M+Math.imul(Re,ht)|0,E=E+Math.imul(Re,nt)|0,E=E+Math.imul(Le,ht)|0,L=L+Math.imul(Le,nt)|0,M=M+Math.imul(Se,dt)|0,E=E+Math.imul(Se,it)|0,E=E+Math.imul(ke,dt)|0,L=L+Math.imul(ke,it)|0,M=M+Math.imul(be,pt)|0,E=E+Math.imul(be,rt)|0,E=E+Math.imul(xe,pt)|0,L=L+Math.imul(xe,rt)|0,M=M+Math.imul(ee,we)|0,E=E+Math.imul(ee,Be)|0,E=E+Math.imul(ge,we)|0,L=L+Math.imul(ge,Be)|0,M=M+Math.imul(he,re)|0,E=E+Math.imul(he,ye)|0,E=E+Math.imul(te,re)|0,L=L+Math.imul(te,ye)|0,M=M+Math.imul(oe,$e)|0,E=E+Math.imul(oe,Te)|0,E=E+Math.imul(de,$e)|0,L=L+Math.imul(de,Te)|0,M=M+Math.imul(Q,Fe)|0,E=E+Math.imul(Q,Ue)|0,E=E+Math.imul(ce,Fe)|0,L=L+Math.imul(ce,Ue)|0;var vt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(vt>>>26)|0,vt&=67108863,M=Math.imul(Ne,tt),E=Math.imul(Ne,st),E=E+Math.imul(De,tt)|0,L=Math.imul(De,st),M=M+Math.imul(ue,yt)|0,E=E+Math.imul(ue,ut)|0,E=E+Math.imul(_e,yt)|0,L=L+Math.imul(_e,ut)|0,M=M+Math.imul(Pe,ht)|0,E=E+Math.imul(Pe,nt)|0,E=E+Math.imul(me,ht)|0,L=L+Math.imul(me,nt)|0,M=M+Math.imul(Re,dt)|0,E=E+Math.imul(Re,it)|0,E=E+Math.imul(Le,dt)|0,L=L+Math.imul(Le,it)|0,M=M+Math.imul(Se,pt)|0,E=E+Math.imul(Se,rt)|0,E=E+Math.imul(ke,pt)|0,L=L+Math.imul(ke,rt)|0,M=M+Math.imul(be,we)|0,E=E+Math.imul(be,Be)|0,E=E+Math.imul(xe,we)|0,L=L+Math.imul(xe,Be)|0,M=M+Math.imul(ee,re)|0,E=E+Math.imul(ee,ye)|0,E=E+Math.imul(ge,re)|0,L=L+Math.imul(ge,ye)|0,M=M+Math.imul(he,$e)|0,E=E+Math.imul(he,Te)|0,E=E+Math.imul(te,$e)|0,L=L+Math.imul(te,Te)|0,M=M+Math.imul(oe,Fe)|0,E=E+Math.imul(oe,Ue)|0,E=E+Math.imul(de,Fe)|0,L=L+Math.imul(de,Ue)|0;var _t=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(_t>>>26)|0,_t&=67108863,M=Math.imul(Ne,yt),E=Math.imul(Ne,ut),E=E+Math.imul(De,yt)|0,L=Math.imul(De,ut),M=M+Math.imul(ue,ht)|0,E=E+Math.imul(ue,nt)|0,E=E+Math.imul(_e,ht)|0,L=L+Math.imul(_e,nt)|0,M=M+Math.imul(Pe,dt)|0,E=E+Math.imul(Pe,it)|0,E=E+Math.imul(me,dt)|0,L=L+Math.imul(me,it)|0,M=M+Math.imul(Re,pt)|0,E=E+Math.imul(Re,rt)|0,E=E+Math.imul(Le,pt)|0,L=L+Math.imul(Le,rt)|0,M=M+Math.imul(Se,we)|0,E=E+Math.imul(Se,Be)|0,E=E+Math.imul(ke,we)|0,L=L+Math.imul(ke,Be)|0,M=M+Math.imul(be,re)|0,E=E+Math.imul(be,ye)|0,E=E+Math.imul(xe,re)|0,L=L+Math.imul(xe,ye)|0,M=M+Math.imul(ee,$e)|0,E=E+Math.imul(ee,Te)|0,E=E+Math.imul(ge,$e)|0,L=L+Math.imul(ge,Te)|0,M=M+Math.imul(he,Fe)|0,E=E+Math.imul(he,Ue)|0,E=E+Math.imul(te,Fe)|0,L=L+Math.imul(te,Ue)|0;var bt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(bt>>>26)|0,bt&=67108863,M=Math.imul(Ne,ht),E=Math.imul(Ne,nt),E=E+Math.imul(De,ht)|0,L=Math.imul(De,nt),M=M+Math.imul(ue,dt)|0,E=E+Math.imul(ue,it)|0,E=E+Math.imul(_e,dt)|0,L=L+Math.imul(_e,it)|0,M=M+Math.imul(Pe,pt)|0,E=E+Math.imul(Pe,rt)|0,E=E+Math.imul(me,pt)|0,L=L+Math.imul(me,rt)|0,M=M+Math.imul(Re,we)|0,E=E+Math.imul(Re,Be)|0,E=E+Math.imul(Le,we)|0,L=L+Math.imul(Le,Be)|0,M=M+Math.imul(Se,re)|0,E=E+Math.imul(Se,ye)|0,E=E+Math.imul(ke,re)|0,L=L+Math.imul(ke,ye)|0,M=M+Math.imul(be,$e)|0,E=E+Math.imul(be,Te)|0,E=E+Math.imul(xe,$e)|0,L=L+Math.imul(xe,Te)|0,M=M+Math.imul(ee,Fe)|0,E=E+Math.imul(ee,Ue)|0,E=E+Math.imul(ge,Fe)|0,L=L+Math.imul(ge,Ue)|0;var St=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(St>>>26)|0,St&=67108863,M=Math.imul(Ne,dt),E=Math.imul(Ne,it),E=E+Math.imul(De,dt)|0,L=Math.imul(De,it),M=M+Math.imul(ue,pt)|0,E=E+Math.imul(ue,rt)|0,E=E+Math.imul(_e,pt)|0,L=L+Math.imul(_e,rt)|0,M=M+Math.imul(Pe,we)|0,E=E+Math.imul(Pe,Be)|0,E=E+Math.imul(me,we)|0,L=L+Math.imul(me,Be)|0,M=M+Math.imul(Re,re)|0,E=E+Math.imul(Re,ye)|0,E=E+Math.imul(Le,re)|0,L=L+Math.imul(Le,ye)|0,M=M+Math.imul(Se,$e)|0,E=E+Math.imul(Se,Te)|0,E=E+Math.imul(ke,$e)|0,L=L+Math.imul(ke,Te)|0,M=M+Math.imul(be,Fe)|0,E=E+Math.imul(be,Ue)|0,E=E+Math.imul(xe,Fe)|0,L=L+Math.imul(xe,Ue)|0;var $t=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+($t>>>26)|0,$t&=67108863,M=Math.imul(Ne,pt),E=Math.imul(Ne,rt),E=E+Math.imul(De,pt)|0,L=Math.imul(De,rt),M=M+Math.imul(ue,we)|0,E=E+Math.imul(ue,Be)|0,E=E+Math.imul(_e,we)|0,L=L+Math.imul(_e,Be)|0,M=M+Math.imul(Pe,re)|0,E=E+Math.imul(Pe,ye)|0,E=E+Math.imul(me,re)|0,L=L+Math.imul(me,ye)|0,M=M+Math.imul(Re,$e)|0,E=E+Math.imul(Re,Te)|0,E=E+Math.imul(Le,$e)|0,L=L+Math.imul(Le,Te)|0,M=M+Math.imul(Se,Fe)|0,E=E+Math.imul(Se,Ue)|0,E=E+Math.imul(ke,Fe)|0,L=L+Math.imul(ke,Ue)|0;var wt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(wt>>>26)|0,wt&=67108863,M=Math.imul(Ne,we),E=Math.imul(Ne,Be),E=E+Math.imul(De,we)|0,L=Math.imul(De,Be),M=M+Math.imul(ue,re)|0,E=E+Math.imul(ue,ye)|0,E=E+Math.imul(_e,re)|0,L=L+Math.imul(_e,ye)|0,M=M+Math.imul(Pe,$e)|0,E=E+Math.imul(Pe,Te)|0,E=E+Math.imul(me,$e)|0,L=L+Math.imul(me,Te)|0,M=M+Math.imul(Re,Fe)|0,E=E+Math.imul(Re,Ue)|0,E=E+Math.imul(Le,Fe)|0,L=L+Math.imul(Le,Ue)|0;var Ge=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,M=Math.imul(Ne,re),E=Math.imul(Ne,ye),E=E+Math.imul(De,re)|0,L=Math.imul(De,ye),M=M+Math.imul(ue,$e)|0,E=E+Math.imul(ue,Te)|0,E=E+Math.imul(_e,$e)|0,L=L+Math.imul(_e,Te)|0,M=M+Math.imul(Pe,Fe)|0,E=E+Math.imul(Pe,Ue)|0,E=E+Math.imul(me,Fe)|0,L=L+Math.imul(me,Ue)|0;var Ye=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,M=Math.imul(Ne,$e),E=Math.imul(Ne,Te),E=E+Math.imul(De,$e)|0,L=Math.imul(De,Te),M=M+Math.imul(ue,Fe)|0,E=E+Math.imul(ue,Ue)|0,E=E+Math.imul(_e,Fe)|0,L=L+Math.imul(_e,Ue)|0;var ct=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(ct>>>26)|0,ct&=67108863,M=Math.imul(Ne,Fe),E=Math.imul(Ne,Ue),E=E+Math.imul(De,Fe)|0,L=Math.imul(De,Ue);var ot=(j+M|0)+((E&8191)<<13)|0;return j=(L+(E>>>13)|0)+(ot>>>26)|0,ot&=67108863,q[0]=ze,q[1]=He,q[2]=qe,q[3]=Xe,q[4]=Ze,q[5]=at,q[6]=Je,q[7]=Qe,q[8]=gt,q[9]=vt,q[10]=_t,q[11]=bt,q[12]=St,q[13]=$t,q[14]=wt,q[15]=Ge,q[16]=Ye,q[17]=ct,q[18]=ot,j!==0&&(q[19]=j,I.length++),I};Math.imul||(D=C);function z(k,y,A){A.negative=y.negative^k.negative,A.length=k.length+y.length;for(var I=0,P=0,H=0;H<A.length-1;H++){var q=P;P=0;for(var j=I&67108863,M=Math.min(H,y.length-1),E=Math.max(0,H-k.length+1);E<=M;E++){var L=H-E,le=k.words[L]|0,Q=y.words[E]|0,ce=le*Q,fe=ce&67108863;q=q+(ce/67108864|0)|0,fe=fe+j|0,j=fe&67108863,q=q+(fe>>>26)|0,P+=q>>>26,q&=67108863}A.words[H]=j,I=q,q=P}return I!==0?A.words[H]=I:A.length--,A._strip()}function U(k,y,A){return z(k,y,A)}c.prototype.mulTo=function(y,A){var I,P=this.length+y.length;return this.length===10&&y.length===10?I=D(this,y,A):P<63?I=C(this,y,A):P<1024?I=z(this,y,A):I=U(this,y,A),I},c.prototype.mul=function(y){var A=new c(null);return A.words=new Array(this.length+y.length),this.mulTo(y,A)},c.prototype.mulf=function(y){var A=new c(null);return A.words=new Array(this.length+y.length),U(this,y,A)},c.prototype.imul=function(y){return this.clone().mulTo(y,this)},c.prototype.imuln=function(y){var A=y<0;A&&(y=-y),a(typeof y=="number"),a(y<67108864);for(var I=0,P=0;P<this.length;P++){var H=(this.words[P]|0)*y,q=(H&67108863)+(I&67108863);I>>=26,I+=H/67108864|0,I+=q>>>26,this.words[P]=q&67108863}return I!==0&&(this.words[P]=I,this.length++),A?this.ineg():this},c.prototype.muln=function(y){return this.clone().imuln(y)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(y){var A=B(y);if(A.length===0)return new c(1);for(var I=this,P=0;P<A.length&&A[P]===0;P++,I=I.sqr());if(++P<A.length)for(var H=I.sqr();P<A.length;P++,H=H.sqr())A[P]!==0&&(I=I.mul(H));return I},c.prototype.iushln=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26,P=67108863>>>26-A<<26-A,H;if(A!==0){var q=0;for(H=0;H<this.length;H++){var j=this.words[H]&P,M=(this.words[H]|0)-j<<A;this.words[H]=M|q,q=j>>>26-A}q&&(this.words[H]=q,this.length++)}if(I!==0){for(H=this.length-1;H>=0;H--)this.words[H+I]=this.words[H];for(H=0;H<I;H++)this.words[H]=0;this.length+=I}return this._strip()},c.prototype.ishln=function(y){return a(this.negative===0),this.iushln(y)},c.prototype.iushrn=function(y,A,I){a(typeof y=="number"&&y>=0);var P;A?P=(A-A%26)/26:P=0;var H=y%26,q=Math.min((y-H)/26,this.length),j=67108863^67108863>>>H<<H,M=I;if(P-=q,P=Math.max(0,P),M){for(var E=0;E<q;E++)M.words[E]=this.words[E];M.length=q}if(q!==0)if(this.length>q)for(this.length-=q,E=0;E<this.length;E++)this.words[E]=this.words[E+q];else this.words[0]=0,this.length=1;var L=0;for(E=this.length-1;E>=0&&(L!==0||E>=P);E--){var le=this.words[E]|0;this.words[E]=L<<26-H|le>>>H,L=le&j}return M&&L!==0&&(M.words[M.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},c.prototype.ishrn=function(y,A,I){return a(this.negative===0),this.iushrn(y,A,I)},c.prototype.shln=function(y){return this.clone().ishln(y)},c.prototype.ushln=function(y){return this.clone().iushln(y)},c.prototype.shrn=function(y){return this.clone().ishrn(y)},c.prototype.ushrn=function(y){return this.clone().iushrn(y)},c.prototype.testn=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26,P=1<<A;if(this.length<=I)return!1;var H=this.words[I];return!!(H&P)},c.prototype.imaskn=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=I)return this;if(A!==0&&I++,this.length=Math.min(I,this.length),A!==0){var P=67108863^67108863>>>A<<A;this.words[this.length-1]&=P}return this._strip()},c.prototype.maskn=function(y){return this.clone().imaskn(y)},c.prototype.iaddn=function(y){return a(typeof y=="number"),a(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<=y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},c.prototype._iaddn=function(y){this.words[0]+=y;for(var A=0;A<this.length&&this.words[A]>=67108864;A++)this.words[A]-=67108864,A===this.length-1?this.words[A+1]=1:this.words[A+1]++;return this.length=Math.max(this.length,A+1),this},c.prototype.isubn=function(y){if(a(typeof y=="number"),a(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var A=0;A<this.length&&this.words[A]<0;A++)this.words[A]+=67108864,this.words[A+1]-=1;return this._strip()},c.prototype.addn=function(y){return this.clone().iaddn(y)},c.prototype.subn=function(y){return this.clone().isubn(y)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(y,A,I){var P=y.length+I,H;this._expand(P);var q,j=0;for(H=0;H<y.length;H++){q=(this.words[H+I]|0)+j;var M=(y.words[H]|0)*A;q-=M&67108863,j=(q>>26)-(M/67108864|0),this.words[H+I]=q&67108863}for(;H<this.length-I;H++)q=(this.words[H+I]|0)+j,j=q>>26,this.words[H+I]=q&67108863;if(j===0)return this._strip();for(a(j===-1),j=0,H=0;H<this.length;H++)q=-(this.words[H]|0)+j,j=q>>26,this.words[H]=q&67108863;return this.negative=1,this._strip()},c.prototype._wordDiv=function(y,A){var I=this.length-y.length,P=this.clone(),H=y,q=H.words[H.length-1]|0,j=this._countBits(q);I=26-j,I!==0&&(H=H.ushln(I),P.iushln(I),q=H.words[H.length-1]|0);var M=P.length-H.length,E;if(A!=="mod"){E=new c(null),E.length=M+1,E.words=new Array(E.length);for(var L=0;L<E.length;L++)E.words[L]=0}var le=P.clone()._ishlnsubmul(H,1,M);le.negative===0&&(P=le,E&&(E.words[M]=1));for(var Q=M-1;Q>=0;Q--){var ce=(P.words[H.length+Q]|0)*67108864+(P.words[H.length+Q-1]|0);for(ce=Math.min(ce/q|0,67108863),P._ishlnsubmul(H,ce,Q);P.negative!==0;)ce--,P.negative=0,P._ishlnsubmul(H,1,Q),P.isZero()||(P.negative^=1);E&&(E.words[Q]=ce)}return E&&E._strip(),P._strip(),A!=="div"&&I!==0&&P.iushrn(I),{div:E||null,mod:P}},c.prototype.divmod=function(y,A,I){if(a(!y.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var P,H,q;return this.negative!==0&&y.negative===0?(q=this.neg().divmod(y,A),A!=="mod"&&(P=q.div.neg()),A!=="div"&&(H=q.mod.neg(),I&&H.negative!==0&&H.iadd(y)),{div:P,mod:H}):this.negative===0&&y.negative!==0?(q=this.divmod(y.neg(),A),A!=="mod"&&(P=q.div.neg()),{div:P,mod:q.mod}):this.negative&y.negative?(q=this.neg().divmod(y.neg(),A),A!=="div"&&(H=q.mod.neg(),I&&H.negative!==0&&H.isub(y)),{div:q.div,mod:H}):y.length>this.length||this.cmp(y)<0?{div:new c(0),mod:this}:y.length===1?A==="div"?{div:this.divn(y.words[0]),mod:null}:A==="mod"?{div:null,mod:new c(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new c(this.modrn(y.words[0]))}:this._wordDiv(y,A)},c.prototype.div=function(y){return this.divmod(y,"div",!1).div},c.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},c.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},c.prototype.divRound=function(y){var A=this.divmod(y);if(A.mod.isZero())return A.div;var I=A.div.negative!==0?A.mod.isub(y):A.mod,P=y.ushrn(1),H=y.andln(1),q=I.cmp(P);return q<0||H===1&&q===0?A.div:A.div.negative!==0?A.div.isubn(1):A.div.iaddn(1)},c.prototype.modrn=function(y){var A=y<0;A&&(y=-y),a(y<=67108863);for(var I=(1<<26)%y,P=0,H=this.length-1;H>=0;H--)P=(I*P+(this.words[H]|0))%y;return A?-P:P},c.prototype.modn=function(y){return this.modrn(y)},c.prototype.idivn=function(y){var A=y<0;A&&(y=-y),a(y<=67108863);for(var I=0,P=this.length-1;P>=0;P--){var H=(this.words[P]|0)+I*67108864;this.words[P]=H/y|0,I=H%y}return this._strip(),A?this.ineg():this},c.prototype.divn=function(y){return this.clone().idivn(y)},c.prototype.egcd=function(y){a(y.negative===0),a(!y.isZero());var A=this,I=y.clone();A.negative!==0?A=A.umod(y):A=A.clone();for(var P=new c(1),H=new c(0),q=new c(0),j=new c(1),M=0;A.isEven()&&I.isEven();)A.iushrn(1),I.iushrn(1),++M;for(var E=I.clone(),L=A.clone();!A.isZero();){for(var le=0,Q=1;!(A.words[0]&Q)&&le<26;++le,Q<<=1);if(le>0)for(A.iushrn(le);le-- >0;)(P.isOdd()||H.isOdd())&&(P.iadd(E),H.isub(L)),P.iushrn(1),H.iushrn(1);for(var ce=0,fe=1;!(I.words[0]&fe)&&ce<26;++ce,fe<<=1);if(ce>0)for(I.iushrn(ce);ce-- >0;)(q.isOdd()||j.isOdd())&&(q.iadd(E),j.isub(L)),q.iushrn(1),j.iushrn(1);A.cmp(I)>=0?(A.isub(I),P.isub(q),H.isub(j)):(I.isub(A),q.isub(P),j.isub(H))}return{a:q,b:j,gcd:I.iushln(M)}},c.prototype._invmp=function(y){a(y.negative===0),a(!y.isZero());var A=this,I=y.clone();A.negative!==0?A=A.umod(y):A=A.clone();for(var P=new c(1),H=new c(0),q=I.clone();A.cmpn(1)>0&&I.cmpn(1)>0;){for(var j=0,M=1;!(A.words[0]&M)&&j<26;++j,M<<=1);if(j>0)for(A.iushrn(j);j-- >0;)P.isOdd()&&P.iadd(q),P.iushrn(1);for(var E=0,L=1;!(I.words[0]&L)&&E<26;++E,L<<=1);if(E>0)for(I.iushrn(E);E-- >0;)H.isOdd()&&H.iadd(q),H.iushrn(1);A.cmp(I)>=0?(A.isub(I),P.isub(H)):(I.isub(A),H.isub(P))}var le;return A.cmpn(1)===0?le=P:le=H,le.cmpn(0)<0&&le.iadd(y),le},c.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var A=this.clone(),I=y.clone();A.negative=0,I.negative=0;for(var P=0;A.isEven()&&I.isEven();P++)A.iushrn(1),I.iushrn(1);do{for(;A.isEven();)A.iushrn(1);for(;I.isEven();)I.iushrn(1);var H=A.cmp(I);if(H<0){var q=A;A=I,I=q}else if(H===0||I.cmpn(1)===0)break;A.isub(I)}while(!0);return I.iushln(P)},c.prototype.invm=function(y){return this.egcd(y).a.umod(y)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(y){return this.words[0]&y},c.prototype.bincn=function(y){a(typeof y=="number");var A=y%26,I=(y-A)/26,P=1<<A;if(this.length<=I)return this._expand(I+1),this.words[I]|=P,this;for(var H=P,q=I;H!==0&&q<this.length;q++){var j=this.words[q]|0;j+=H,H=j>>>26,j&=67108863,this.words[q]=j}return H!==0&&(this.words[q]=H,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(y){var A=y<0;if(this.negative!==0&&!A)return-1;if(this.negative===0&&A)return 1;this._strip();var I;if(this.length>1)I=1;else{A&&(y=-y),a(y<=67108863,"Number is too big");var P=this.words[0]|0;I=P===y?0:P<y?-1:1}return this.negative!==0?-I|0:I},c.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var A=this.ucmp(y);return this.negative!==0?-A|0:A},c.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var A=0,I=this.length-1;I>=0;I--){var P=this.words[I]|0,H=y.words[I]|0;if(P!==H){P<H?A=-1:P>H&&(A=1);break}}return A},c.prototype.gtn=function(y){return this.cmpn(y)===1},c.prototype.gt=function(y){return this.cmp(y)===1},c.prototype.gten=function(y){return this.cmpn(y)>=0},c.prototype.gte=function(y){return this.cmp(y)>=0},c.prototype.ltn=function(y){return this.cmpn(y)===-1},c.prototype.lt=function(y){return this.cmp(y)===-1},c.prototype.lten=function(y){return this.cmpn(y)<=0},c.prototype.lte=function(y){return this.cmp(y)<=0},c.prototype.eqn=function(y){return this.cmpn(y)===0},c.prototype.eq=function(y){return this.cmp(y)===0},c.red=function(y){return new ie(y)},c.prototype.toRed=function(y){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(y){return this.red=y,this},c.prototype.forceRed=function(y){return a(!this.red,"Already a number in reduction context"),this._forceRed(y)},c.prototype.redAdd=function(y){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},c.prototype.redIAdd=function(y){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},c.prototype.redSub=function(y){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},c.prototype.redISub=function(y){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},c.prototype.redShl=function(y){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},c.prototype.redMul=function(y){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},c.prototype.redIMul=function(y){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(y){return a(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var Y={k256:null,p224:null,p192:null,p25519:null};function X(k,y){this.name=k,this.p=new c(y,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var y=new c(null);return y.words=new Array(Math.ceil(this.n/13)),y},X.prototype.ireduce=function(y){var A=y,I;do this.split(A,this.tmp),A=this.imulK(A),A=A.iadd(this.tmp),I=A.bitLength();while(I>this.n);var P=I<this.n?-1:A.ucmp(this.p);return P===0?(A.words[0]=0,A.length=1):P>0?A.isub(this.p):A.strip!==void 0?A.strip():A._strip(),A},X.prototype.split=function(y,A){y.iushrn(this.n,0,A)},X.prototype.imulK=function(y){return y.imul(this.k)};function O(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(O,X),O.prototype.split=function(y,A){for(var I=4194303,P=Math.min(y.length,9),H=0;H<P;H++)A.words[H]=y.words[H];if(A.length=P,y.length<=9){y.words[0]=0,y.length=1;return}var q=y.words[9];for(A.words[A.length++]=q&I,H=10;H<y.length;H++){var j=y.words[H]|0;y.words[H-10]=(j&I)<<4|q>>>22,q=j}q>>>=22,y.words[H-10]=q,q===0&&y.length>10?y.length-=10:y.length-=9},O.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var A=0,I=0;I<y.length;I++){var P=y.words[I]|0;A+=P*977,y.words[I]=A&67108863,A=P*64+(A/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function J(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(J,X);function Z(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Z,X);function se(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(se,X),se.prototype.imulK=function(y){for(var A=0,I=0;I<y.length;I++){var P=(y.words[I]|0)*19+A,H=P&67108863;P>>>=26,y.words[I]=H,A=P}return A!==0&&(y.words[y.length++]=A),y},c._prime=function(y){if(Y[y])return Y[y];var A;if(y==="k256")A=new O;else if(y==="p224")A=new J;else if(y==="p192")A=new Z;else if(y==="p25519")A=new se;else throw new Error("Unknown prime "+y);return Y[y]=A,A};function ie(k){if(typeof k=="string"){var y=c._prime(k);this.m=y.p,this.prime=y}else a(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}ie.prototype._verify1=function(y){a(y.negative===0,"red works only with positives"),a(y.red,"red works only with red numbers")},ie.prototype._verify2=function(y,A){a((y.negative|A.negative)===0,"red works only with positives"),a(y.red&&y.red===A.red,"red works only with red numbers")},ie.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(b(y,y.umod(this.m)._forceRed(this)),y)},ie.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},ie.prototype.add=function(y,A){this._verify2(y,A);var I=y.add(A);return I.cmp(this.m)>=0&&I.isub(this.m),I._forceRed(this)},ie.prototype.iadd=function(y,A){this._verify2(y,A);var I=y.iadd(A);return I.cmp(this.m)>=0&&I.isub(this.m),I},ie.prototype.sub=function(y,A){this._verify2(y,A);var I=y.sub(A);return I.cmpn(0)<0&&I.iadd(this.m),I._forceRed(this)},ie.prototype.isub=function(y,A){this._verify2(y,A);var I=y.isub(A);return I.cmpn(0)<0&&I.iadd(this.m),I},ie.prototype.shl=function(y,A){return this._verify1(y),this.imod(y.ushln(A))},ie.prototype.imul=function(y,A){return this._verify2(y,A),this.imod(y.imul(A))},ie.prototype.mul=function(y,A){return this._verify2(y,A),this.imod(y.mul(A))},ie.prototype.isqr=function(y){return this.imul(y,y.clone())},ie.prototype.sqr=function(y){return this.mul(y,y)},ie.prototype.sqrt=function(y){if(y.isZero())return y.clone();var A=this.m.andln(3);if(a(A%2===1),A===3){var I=this.m.add(new c(1)).iushrn(2);return this.pow(y,I)}for(var P=this.m.subn(1),H=0;!P.isZero()&&P.andln(1)===0;)H++,P.iushrn(1);a(!P.isZero());var q=new c(1).toRed(this),j=q.redNeg(),M=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new c(2*E*E).toRed(this);this.pow(E,M).cmp(j)!==0;)E.redIAdd(j);for(var L=this.pow(E,P),le=this.pow(y,P.addn(1).iushrn(1)),Q=this.pow(y,P),ce=H;Q.cmp(q)!==0;){for(var fe=Q,oe=0;fe.cmp(q)!==0;oe++)fe=fe.redSqr();a(oe<ce);var de=this.pow(L,new c(1).iushln(ce-oe-1));le=le.redMul(de),L=de.redSqr(),Q=Q.redMul(L),ce=oe}return le},ie.prototype.invm=function(y){var A=y._invmp(this.m);return A.negative!==0?(A.negative=0,this.imod(A).redNeg()):this.imod(A)},ie.prototype.pow=function(y,A){if(A.isZero())return new c(1).toRed(this);if(A.cmpn(1)===0)return y.clone();var I=4,P=new Array(1<<I);P[0]=new c(1).toRed(this),P[1]=y;for(var H=2;H<P.length;H++)P[H]=this.mul(P[H-1],y);var q=P[0],j=0,M=0,E=A.bitLength()%26;for(E===0&&(E=26),H=A.length-1;H>=0;H--){for(var L=A.words[H],le=E-1;le>=0;le--){var Q=L>>le&1;if(q!==P[0]&&(q=this.sqr(q)),Q===0&&j===0){M=0;continue}j<<=1,j|=Q,M++,!(M!==I&&(H!==0||le!==0))&&(q=this.mul(q,P[j]),M=0,j=0)}E=26}return q},ie.prototype.convertTo=function(y){var A=y.umod(this.m);return A===y?A.clone():A},ie.prototype.convertFrom=function(y){var A=y.clone();return A.red=null,A},c.mont=function(y){return new F(y)};function F(k){ie.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(F,ie),F.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},F.prototype.convertFrom=function(y){var A=this.imod(y.mul(this.rinv));return A.red=null,A},F.prototype.imul=function(y,A){if(y.isZero()||A.isZero())return y.words[0]=0,y.length=1,y;var I=y.imul(A),P=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=I.isub(P).iushrn(this.shift),q=H;return H.cmp(this.m)>=0?q=H.isub(this.m):H.cmpn(0)<0&&(q=H.iadd(this.m)),q._forceRed(this)},F.prototype.mul=function(y,A){if(y.isZero()||A.isZero())return new c(0)._forceRed(this);var I=y.mul(A),P=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=I.isub(P).iushrn(this.shift),q=H;return H.cmp(this.m)>=0?q=H.isub(this.m):H.cmpn(0)<0&&(q=H.iadd(this.m)),q._forceRed(this)},F.prototype.invm=function(y){var A=this.imod(y._invmp(this.m).mul(this.r2));return A._forceRed(this)}})(t,commonjsGlobal)})(bn$3);var BN$d=bnExports$3,randomBytes$3=browserExports$2;function blind(t){var e=getr(t),n=e.toRed(BN$d.mont(t.modulus)).redPow(new BN$d(t.publicExponent)).fromRed();return{blinder:n,unblinder:e.invm(t.modulus)}}function getr(t){var e=t.modulus.byteLength(),n;do n=new BN$d(randomBytes$3(e));while(n.cmp(t.modulus)>=0||!n.umod(t.prime1)||!n.umod(t.prime2));return n}function crt$2(t,e){var n=blind(e),a=e.modulus.byteLength(),o=new BN$d(t).mul(n.blinder).umod(e.modulus),c=o.toRed(BN$d.mont(e.prime1)),l=o.toRed(BN$d.mont(e.prime2)),u=e.coefficient,d=e.prime1,m=e.prime2,b=c.redPow(e.exponent1).fromRed(),x=l.redPow(e.exponent2).fromRed(),_=b.isub(x).imul(u).umod(d).imul(m);return x.iadd(_).imul(n.unblinder).umod(e.modulus).toArrayLike(Buffer$x,"be",a)}crt$2.getr=getr;var browserifyRsa=crt$2,elliptic$3={};const name$6="elliptic",version$k="6.5.4",description="EC cryptography",main$1="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$1={name:name$6,version:version$k,description,main:main$1,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$p={},utils$o={};(function(t){var e=t;function n(c,l){if(Array.isArray(c))return c.slice();if(!c)return[];var u=[];if(typeof c!="string"){for(var d=0;d<c.length;d++)u[d]=c[d]|0;return u}if(l==="hex"){c=c.replace(/[^a-z0-9]+/ig,""),c.length%2!==0&&(c="0"+c);for(var d=0;d<c.length;d+=2)u.push(parseInt(c[d]+c[d+1],16))}else for(var d=0;d<c.length;d++){var m=c.charCodeAt(d),b=m>>8,x=m&255;b?u.push(b,x):u.push(x)}return u}e.toArray=n;function a(c){return c.length===1?"0"+c:c}e.zero2=a;function o(c){for(var l="",u=0;u<c.length;u++)l+=a(c[u].toString(16));return l}e.toHex=o,e.encode=function(l,u){return u==="hex"?o(l):l}})(utils$o);(function(t){var e=t,n=bnExports$4,a=minimalisticAssert$1,o=utils$o;e.assert=a,e.toArray=o.toArray,e.zero2=o.zero2,e.toHex=o.toHex,e.encode=o.encode;function c(b,x,_){var w=new Array(Math.max(b.bitLength(),_)+1);w.fill(0);for(var S=1<<x+1,T=b.clone(),B=0;B<w.length;B++){var C,D=T.andln(S-1);T.isOdd()?(D>(S>>1)-1?C=(S>>1)-D:C=D,T.isubn(C)):C=0,w[B]=C,T.iushrn(1)}return w}e.getNAF=c;function l(b,x){var _=[[],[]];b=b.clone(),x=x.clone();for(var w=0,S=0,T;b.cmpn(-w)>0||x.cmpn(-S)>0;){var B=b.andln(3)+w&3,C=x.andln(3)+S&3;B===3&&(B=-1),C===3&&(C=-1);var D;B&1?(T=b.andln(7)+w&7,(T===3||T===5)&&C===2?D=-B:D=B):D=0,_[0].push(D);var z;C&1?(T=x.andln(7)+S&7,(T===3||T===5)&&B===2?z=-C:z=C):z=0,_[1].push(z),2*w===D+1&&(w=1-w),2*S===z+1&&(S=1-S),b.iushrn(1),x.iushrn(1)}return _}e.getJSF=l;function u(b,x,_){var w="_"+x;b.prototype[x]=function(){return this[w]!==void 0?this[w]:this[w]=_.call(this)}}e.cachedProperty=u;function d(b){return typeof b=="string"?e.toArray(b,"hex"):b}e.parseBytes=d;function m(b){return new n(b,"hex","le")}e.intFromLE=m})(utils$p);var curve={},BN$c=bnExports$4,utils$n=utils$p,getNAF$1=utils$n.getNAF,getJSF$1=utils$n.getJSF,assert$l=utils$n.assert;function BaseCurve$1(t,e){this.type=t,this.p=new BN$c(e.p,16),this.red=e.prime?BN$c.red(e.prime):BN$c.mont(this.p),this.zero=new BN$c(0).toRed(this.red),this.one=new BN$c(1).toRed(this.red),this.two=new BN$c(2).toRed(this.red),this.n=e.n&&new BN$c(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$8=BaseCurve$1;BaseCurve$1.prototype.point=function(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function(e,n){assert$l(e.precomputed);var a=e._getDoubles(),o=getNAF$1(n,1,this._bitLength),c=(1<<a.step+1)-(a.step%2===0?2:1);c/=3;var l=[],u,d;for(u=0;u<o.length;u+=a.step){d=0;for(var m=u+a.step-1;m>=u;m--)d=(d<<1)+o[m];l.push(d)}for(var b=this.jpoint(null,null,null),x=this.jpoint(null,null,null),_=c;_>0;_--){for(u=0;u<l.length;u++)d=l[u],d===_?x=x.mixedAdd(a.points[u]):d===-_&&(x=x.mixedAdd(a.points[u].neg()));b=b.add(x)}return b.toP()};BaseCurve$1.prototype._wnafMul=function(e,n){var a=4,o=e._getNAFPoints(a);a=o.wnd;for(var c=o.points,l=getNAF$1(n,a,this._bitLength),u=this.jpoint(null,null,null),d=l.length-1;d>=0;d--){for(var m=0;d>=0&&l[d]===0;d--)m++;if(d>=0&&m++,u=u.dblp(m),d<0)break;var b=l[d];assert$l(b!==0),e.type==="affine"?b>0?u=u.mixedAdd(c[b-1>>1]):u=u.mixedAdd(c[-b-1>>1].neg()):b>0?u=u.add(c[b-1>>1]):u=u.add(c[-b-1>>1].neg())}return e.type==="affine"?u.toP():u};BaseCurve$1.prototype._wnafMulAdd=function(e,n,a,o,c){var l=this._wnafT1,u=this._wnafT2,d=this._wnafT3,m=0,b,x,_;for(b=0;b<o;b++){_=n[b];var w=_._getNAFPoints(e);l[b]=w.wnd,u[b]=w.points}for(b=o-1;b>=1;b-=2){var S=b-1,T=b;if(l[S]!==1||l[T]!==1){d[S]=getNAF$1(a[S],l[S],this._bitLength),d[T]=getNAF$1(a[T],l[T],this._bitLength),m=Math.max(d[S].length,m),m=Math.max(d[T].length,m);continue}var B=[n[S],null,null,n[T]];n[S].y.cmp(n[T].y)===0?(B[1]=n[S].add(n[T]),B[2]=n[S].toJ().mixedAdd(n[T].neg())):n[S].y.cmp(n[T].y.redNeg())===0?(B[1]=n[S].toJ().mixedAdd(n[T]),B[2]=n[S].add(n[T].neg())):(B[1]=n[S].toJ().mixedAdd(n[T]),B[2]=n[S].toJ().mixedAdd(n[T].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],D=getJSF$1(a[S],a[T]);for(m=Math.max(D[0].length,m),d[S]=new Array(m),d[T]=new Array(m),x=0;x<m;x++){var z=D[0][x]|0,U=D[1][x]|0;d[S][x]=C[(z+1)*3+(U+1)],d[T][x]=0,u[S]=B}}var Y=this.jpoint(null,null,null),X=this._wnafT4;for(b=m;b>=0;b--){for(var O=0;b>=0;){var J=!0;for(x=0;x<o;x++)X[x]=d[x][b]|0,X[x]!==0&&(J=!1);if(!J)break;O++,b--}if(b>=0&&O++,Y=Y.dblp(O),b<0)break;for(x=0;x<o;x++){var Z=X[x];Z!==0&&(Z>0?_=u[x][Z-1>>1]:Z<0&&(_=u[x][-Z-1>>1].neg()),_.type==="affine"?Y=Y.mixedAdd(_):Y=Y.add(_))}}for(b=0;b<o;b++)u[b]=null;return c?Y:Y.toP()};function BasePoint$1(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function(e,n){e=utils$n.toArray(e,n);var a=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*a){e[0]===6?assert$l(e[e.length-1]%2===0):e[0]===7&&assert$l(e[e.length-1]%2===1);var o=this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));return o}else if((e[0]===2||e[0]===3)&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),e[0]===3);throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function(e){return this.encode(e,!0)};BasePoint$1.prototype._encode=function(e){var n=this.curve.p.byteLength(),a=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",n))};BasePoint$1.prototype.encode=function(e,n){return utils$n.encode(this._encode(n),e)};BasePoint$1.prototype.precompute=function(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};BasePoint$1.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};BasePoint$1.prototype._getDoubles=function(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],o=this,c=0;c<n;c+=e){for(var l=0;l<e;l++)o=o.dbl();a.push(o)}return{step:e,points:a}};BasePoint$1.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],a=(1<<e)-1,o=a===1?null:this.dbl(),c=1;c<a;c++)n[c]=n[c-1].add(o);return{wnd:e,points:n}};BasePoint$1.prototype._getBeta=function(){return null};BasePoint$1.prototype.dblp=function(e){for(var n=this,a=0;a<e;a++)n=n.dbl();return n};var utils$m=utils$p,BN$b=bnExports$4,inherits$b=inherits_browserExports,Base$2=base$8,assert$k=utils$m.assert;function ShortCurve$1(t){Base$2.call(this,"short",t),this.a=new BN$b(t.a,16).toRed(this.red),this.b=new BN$b(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$b(ShortCurve$1,Base$2);var short=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,a;if(e.beta)n=new BN$b(e.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);n=o[0].cmp(o[1])<0?o[0]:o[1],n=n.toRed(this.red)}if(e.lambda)a=new BN$b(e.lambda,16);else{var c=this._getEndoRoots(this.n);this.g.mul(c[0]).x.cmp(this.g.x.redMul(n))===0?a=c[0]:(a=c[1],assert$k(this.g.mul(a).x.cmp(this.g.x.redMul(n))===0))}var l;return e.basis?l=e.basis.map(function(u){return{a:new BN$b(u.a,16),b:new BN$b(u.b,16)}}):l=this._getEndoBasis(a),{beta:n,lambda:a,basis:l}}};ShortCurve$1.prototype._getEndoRoots=function(e){var n=e===this.p?this.red:BN$b.mont(e),a=new BN$b(2).toRed(n).redInvm(),o=a.redNeg(),c=new BN$b(3).toRed(n).redNeg().redSqrt().redMul(a),l=o.redAdd(c).fromRed(),u=o.redSub(c).fromRed();return[l,u]};ShortCurve$1.prototype._getEndoBasis=function(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),a=e,o=this.n.clone(),c=new BN$b(1),l=new BN$b(0),u=new BN$b(0),d=new BN$b(1),m,b,x,_,w,S,T,B=0,C,D;a.cmpn(0)!==0;){var z=o.div(a);C=o.sub(z.mul(a)),D=u.sub(z.mul(c));var U=d.sub(z.mul(l));if(!x&&C.cmp(n)<0)m=T.neg(),b=c,x=C.neg(),_=D;else if(x&&++B===2)break;T=C,o=a,a=C,u=c,c=D,d=l,l=U}w=C.neg(),S=D;var Y=x.sqr().add(_.sqr()),X=w.sqr().add(S.sqr());return X.cmp(Y)>=0&&(w=m,S=b),x.negative&&(x=x.neg(),_=_.neg()),w.negative&&(w=w.neg(),S=S.neg()),[{a:x,b:_},{a:w,b:S}]};ShortCurve$1.prototype._endoSplit=function(e){var n=this.endo.basis,a=n[0],o=n[1],c=o.b.mul(e).divRound(this.n),l=a.b.neg().mul(e).divRound(this.n),u=c.mul(a.a),d=l.mul(o.a),m=c.mul(a.b),b=l.mul(o.b),x=e.sub(u).sub(d),_=m.add(b).neg();return{k1:x,k2:_}};ShortCurve$1.prototype.pointFromX=function(e,n){e=new BN$b(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var c=o.fromRed().isOdd();return(n&&!c||!n&&c)&&(o=o.redNeg()),this.point(e,o)};ShortCurve$1.prototype.validate=function(e){if(e.inf)return!0;var n=e.x,a=e.y,o=this.a.redMul(n),c=n.redSqr().redMul(n).redIAdd(o).redIAdd(this.b);return a.redSqr().redISub(c).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function(e,n,a){for(var o=this._endoWnafT1,c=this._endoWnafT2,l=0;l<e.length;l++){var u=this._endoSplit(n[l]),d=e[l],m=d._getBeta();u.k1.negative&&(u.k1.ineg(),d=d.neg(!0)),u.k2.negative&&(u.k2.ineg(),m=m.neg(!0)),o[l*2]=d,o[l*2+1]=m,c[l*2]=u.k1,c[l*2+1]=u.k2}for(var b=this._wnafMulAdd(1,o,c,l*2,a),x=0;x<l*2;x++)o[x]=null,c[x]=null;return b};function Point$5(t,e,n,a){Base$2.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$b(e,16),this.y=new BN$b(n,16),a&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$b(Point$5,Base$2.BasePoint);ShortCurve$1.prototype.point=function(e,n,a){return new Point$5(this,e,n,a)};ShortCurve$1.prototype.pointFromJSON=function(e,n){return Point$5.fromJSON(this,e,n)};Point$5.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,o=function(c){return a.point(c.x.redMul(a.endo.beta),c.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(o)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(o)}}}return n}};Point$5.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$5.fromJSON=function(e,n,a){typeof n=="string"&&(n=JSON.parse(n));var o=e.point(n[0],n[1],a);if(!n[2])return o;function c(u){return e.point(u[0],u[1],a)}var l=n[2];return o.precomputed={beta:null,doubles:l.doubles&&{step:l.doubles.step,points:[o].concat(l.doubles.points.map(c))},naf:l.naf&&{wnd:l.naf.wnd,points:[o].concat(l.naf.points.map(c))}},o};Point$5.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$5.prototype.isInfinity=function(){return this.inf};Point$5.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var a=n.redSqr().redISub(this.x).redISub(e.x),o=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point$5.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,a=this.x.redSqr(),o=e.redInvm(),c=a.redAdd(a).redIAdd(a).redIAdd(n).redMul(o),l=c.redSqr().redISub(this.x.redAdd(this.x)),u=c.redMul(this.x.redSub(l)).redISub(this.y);return this.curve.point(l,u)};Point$5.prototype.getX=function(){return this.x.fromRed()};Point$5.prototype.getY=function(){return this.y.fromRed()};Point$5.prototype.mul=function(e){return e=new BN$b(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$5.prototype.mulAdd=function(e,n,a){var o=[this,n],c=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,c):this.curve._wnafMulAdd(1,o,c,2)};Point$5.prototype.jmulAdd=function(e,n,a){var o=[this,n],c=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,c,!0):this.curve._wnafMulAdd(1,o,c,2,!0)};Point$5.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$5.prototype.neg=function(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,o=function(c){return c.neg()};n.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(o)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(o)}}}return n};Point$5.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint$1(t,e,n,a){Base$2.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&a===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$b(0)):(this.x=new BN$b(e,16),this.y=new BN$b(n,16),this.z=new BN$b(a,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$b(JPoint$1,Base$2.BasePoint);ShortCurve$1.prototype.jpoint=function(e,n,a){return new JPoint$1(this,e,n,a)};JPoint$1.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),a=this.x.redMul(n),o=this.y.redMul(n).redMul(e);return this.curve.point(a,o)};JPoint$1.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),a=this.z.redSqr(),o=this.x.redMul(n),c=e.x.redMul(a),l=this.y.redMul(n.redMul(e.z)),u=e.y.redMul(a.redMul(this.z)),d=o.redSub(c),m=l.redSub(u);if(d.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=d.redSqr(),x=b.redMul(d),_=o.redMul(b),w=m.redSqr().redIAdd(x).redISub(_).redISub(_),S=m.redMul(_.redISub(w)).redISub(l.redMul(x)),T=this.z.redMul(e.z).redMul(d);return this.curve.jpoint(w,S,T)};JPoint$1.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),a=this.x,o=e.x.redMul(n),c=this.y,l=e.y.redMul(n).redMul(this.z),u=a.redSub(o),d=c.redSub(l);if(u.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var m=u.redSqr(),b=m.redMul(u),x=a.redMul(m),_=d.redSqr().redIAdd(b).redISub(x).redISub(x),w=d.redMul(x.redISub(_)).redISub(c.redMul(b)),S=this.z.redMul(u);return this.curve.jpoint(_,w,S)};JPoint$1.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var a=this;for(n=0;n<e;n++)a=a.dbl();return a}var o=this.curve.a,c=this.curve.tinv,l=this.x,u=this.y,d=this.z,m=d.redSqr().redSqr(),b=u.redAdd(u);for(n=0;n<e;n++){var x=l.redSqr(),_=b.redSqr(),w=_.redSqr(),S=x.redAdd(x).redIAdd(x).redIAdd(o.redMul(m)),T=l.redMul(_),B=S.redSqr().redISub(T.redAdd(T)),C=T.redISub(B),D=S.redMul(C);D=D.redIAdd(D).redISub(w);var z=b.redMul(d);n+1<e&&(m=m.redMul(w)),l=B,d=z,b=D}return this.curve.jpoint(l,b.redMul(c),d)};JPoint$1.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint$1.prototype._zeroDbl=function(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),c=this.y.redSqr(),l=c.redSqr(),u=this.x.redAdd(c).redSqr().redISub(o).redISub(l);u=u.redIAdd(u);var d=o.redAdd(o).redIAdd(o),m=d.redSqr().redISub(u).redISub(u),b=l.redIAdd(l);b=b.redIAdd(b),b=b.redIAdd(b),e=m,n=d.redMul(u.redISub(m)).redISub(b),a=this.y.redAdd(this.y)}else{var x=this.x.redSqr(),_=this.y.redSqr(),w=_.redSqr(),S=this.x.redAdd(_).redSqr().redISub(x).redISub(w);S=S.redIAdd(S);var T=x.redAdd(x).redIAdd(x),B=T.redSqr(),C=w.redIAdd(w);C=C.redIAdd(C),C=C.redIAdd(C),e=B.redISub(S).redISub(S),n=T.redMul(S.redISub(e)).redISub(C),a=this.y.redMul(this.z),a=a.redIAdd(a)}return this.curve.jpoint(e,n,a)};JPoint$1.prototype._threeDbl=function(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),c=this.y.redSqr(),l=c.redSqr(),u=this.x.redAdd(c).redSqr().redISub(o).redISub(l);u=u.redIAdd(u);var d=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),m=d.redSqr().redISub(u).redISub(u);e=m;var b=l.redIAdd(l);b=b.redIAdd(b),b=b.redIAdd(b),n=d.redMul(u.redISub(m)).redISub(b),a=this.y.redAdd(this.y)}else{var x=this.z.redSqr(),_=this.y.redSqr(),w=this.x.redMul(_),S=this.x.redSub(x).redMul(this.x.redAdd(x));S=S.redAdd(S).redIAdd(S);var T=w.redIAdd(w);T=T.redIAdd(T);var B=T.redAdd(T);e=S.redSqr().redISub(B),a=this.y.redAdd(this.z).redSqr().redISub(_).redISub(x);var C=_.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),n=S.redMul(T.redISub(e)).redISub(C)}return this.curve.jpoint(e,n,a)};JPoint$1.prototype._dbl=function(){var e=this.curve.a,n=this.x,a=this.y,o=this.z,c=o.redSqr().redSqr(),l=n.redSqr(),u=a.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(e.redMul(c)),m=n.redAdd(n);m=m.redIAdd(m);var b=m.redMul(u),x=d.redSqr().redISub(b.redAdd(b)),_=b.redISub(x),w=u.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var S=d.redMul(_).redISub(w),T=a.redAdd(a).redMul(o);return this.curve.jpoint(x,S,T)};JPoint$1.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr(),o=n.redSqr(),c=e.redAdd(e).redIAdd(e),l=c.redSqr(),u=this.x.redAdd(n).redSqr().redISub(e).redISub(o);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(l);var d=u.redSqr(),m=o.redIAdd(o);m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var b=c.redIAdd(u).redSqr().redISub(l).redISub(d).redISub(m),x=n.redMul(b);x=x.redIAdd(x),x=x.redIAdd(x);var _=this.x.redMul(d).redISub(x);_=_.redIAdd(_),_=_.redIAdd(_);var w=this.y.redMul(b.redMul(m.redISub(b)).redISub(u.redMul(d)));w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var S=this.z.redAdd(u).redSqr().redISub(a).redISub(d);return this.curve.jpoint(_,w,S)};JPoint$1.prototype.mul=function(e,n){return e=new BN$b(e,n),this.curve._wnafMul(this,e)};JPoint$1.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),a=e.z.redSqr();if(this.x.redMul(a).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var o=n.redMul(this.z),c=a.redMul(e.z);return this.y.redMul(c).redISub(e.y.redMul(o)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function(e){var n=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(a)===0)return!0;for(var o=e.clone(),c=this.curve.redN.redMul(n);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(c),this.x.cmp(a)===0)return!0}};JPoint$1.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var BN$a=bnExports$4,inherits$a=inherits_browserExports,Base$1=base$8,utils$l=utils$p;function MontCurve(t){Base$1.call(this,"mont",t),this.a=new BN$a(t.a,16).toRed(this.red),this.b=new BN$a(t.b,16).toRed(this.red),this.i4=new BN$a(4).toRed(this.red).redInvm(),this.two=new BN$a(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$a(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function(e){var n=e.normalize().x,a=n.redSqr(),o=a.redMul(n).redAdd(a.redMul(this.a)).redAdd(n),c=o.redSqrt();return c.redSqr().cmp(o)===0};function Point$4(t,e,n){Base$1.BasePoint.call(this,t,"projective"),e===null&&n===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$a(e,16),this.z=new BN$a(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$a(Point$4,Base$1.BasePoint);MontCurve.prototype.decodePoint=function(e,n){return this.point(utils$l.toArray(e,n),1)};MontCurve.prototype.point=function(e,n){return new Point$4(this,e,n)};MontCurve.prototype.pointFromJSON=function(e){return Point$4.fromJSON(this,e)};Point$4.prototype.precompute=function(){};Point$4.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$4.fromJSON=function(e,n){return new Point$4(e,n[0],n[1]||e.one)};Point$4.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$4.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Point$4.prototype.dbl=function(){var e=this.x.redAdd(this.z),n=e.redSqr(),a=this.x.redSub(this.z),o=a.redSqr(),c=n.redSub(o),l=n.redMul(o),u=c.redMul(o.redAdd(this.curve.a24.redMul(c)));return this.curve.point(l,u)};Point$4.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.diffAdd=function(e,n){var a=this.x.redAdd(this.z),o=this.x.redSub(this.z),c=e.x.redAdd(e.z),l=e.x.redSub(e.z),u=l.redMul(a),d=c.redMul(o),m=n.z.redMul(u.redAdd(d).redSqr()),b=n.x.redMul(u.redISub(d).redSqr());return this.curve.point(m,b)};Point$4.prototype.mul=function(e){for(var n=e.clone(),a=this,o=this.curve.point(null,null),c=this,l=[];n.cmpn(0)!==0;n.iushrn(1))l.push(n.andln(1));for(var u=l.length-1;u>=0;u--)l[u]===0?(a=a.diffAdd(o,c),o=o.dbl()):(o=a.diffAdd(o,c),a=a.dbl());return o};Point$4.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Point$4.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$4.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var utils$k=utils$p,BN$9=bnExports$4,inherits$9=inherits_browserExports,Base=base$8,assert$j=utils$k.assert;function EdwardsCurve(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",t),this.a=new BN$9(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$9(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$9(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$j(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}inherits$9(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};EdwardsCurve.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};EdwardsCurve.prototype.jpoint=function(e,n,a,o){return this.point(e,n,a,o)};EdwardsCurve.prototype.pointFromX=function(e,n){e=new BN$9(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr(),o=this.c2.redSub(this.a.redMul(a)),c=this.one.redSub(this.c2.redMul(this.d).redMul(a)),l=o.redMul(c.redInvm()),u=l.redSqrt();if(u.redSqr().redSub(l).cmp(this.zero)!==0)throw new Error("invalid point");var d=u.fromRed().isOdd();return(n&&!d||!n&&d)&&(u=u.redNeg()),this.point(e,u)};EdwardsCurve.prototype.pointFromY=function(e,n){e=new BN$9(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr(),o=a.redSub(this.c2),c=a.redMul(this.d).redMul(this.c2).redSub(this.a),l=o.redMul(c.redInvm());if(l.cmp(this.zero)===0){if(n)throw new Error("invalid point");return this.point(this.zero,e)}var u=l.redSqrt();if(u.redSqr().redSub(l).cmp(this.zero)!==0)throw new Error("invalid point");return u.fromRed().isOdd()!==n&&(u=u.redNeg()),this.point(u,e)};EdwardsCurve.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var n=e.x.redSqr(),a=e.y.redSqr(),o=n.redMul(this.a).redAdd(a),c=this.c2.redMul(this.one.redAdd(this.d.redMul(n).redMul(a)));return o.cmp(c)===0};function Point$3(t,e,n,a,o){Base.BasePoint.call(this,t,"projective"),e===null&&n===null&&a===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$9(e,16),this.y=new BN$9(n,16),this.z=a?new BN$9(a,16):this.curve.one,this.t=o&&new BN$9(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$9(Point$3,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function(e){return Point$3.fromJSON(this,e)};EdwardsCurve.prototype.point=function(e,n,a,o){return new Point$3(this,e,n,a,o)};Point$3.fromJSON=function(e,n){return new Point$3(e,n[0],n[1],n[2])};Point$3.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point$3.prototype._extDbl=function(){var e=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr();a=a.redIAdd(a);var o=this.curve._mulA(e),c=this.x.redAdd(this.y).redSqr().redISub(e).redISub(n),l=o.redAdd(n),u=l.redSub(a),d=o.redSub(n),m=c.redMul(u),b=l.redMul(d),x=c.redMul(d),_=u.redMul(l);return this.curve.point(m,b,_,x)};Point$3.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),a=this.y.redSqr(),o,c,l,u,d,m;if(this.curve.twisted){u=this.curve._mulA(n);var b=u.redAdd(a);this.zOne?(o=e.redSub(n).redSub(a).redMul(b.redSub(this.curve.two)),c=b.redMul(u.redSub(a)),l=b.redSqr().redSub(b).redSub(b)):(d=this.z.redSqr(),m=b.redSub(d).redISub(d),o=e.redSub(n).redISub(a).redMul(m),c=b.redMul(u.redSub(a)),l=b.redMul(m))}else u=n.redAdd(a),d=this.curve._mulC(this.z).redSqr(),m=u.redSub(d).redSub(d),o=this.curve._mulC(e.redISub(u)).redMul(m),c=this.curve._mulC(u).redMul(n.redISub(a)),l=u.redMul(m);return this.curve.point(o,c,l)};Point$3.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point$3.prototype._extAdd=function(e){var n=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),a=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),o=this.t.redMul(this.curve.dd).redMul(e.t),c=this.z.redMul(e.z.redAdd(e.z)),l=a.redSub(n),u=c.redSub(o),d=c.redAdd(o),m=a.redAdd(n),b=l.redMul(u),x=d.redMul(m),_=l.redMul(m),w=u.redMul(d);return this.curve.point(b,x,w,_)};Point$3.prototype._projAdd=function(e){var n=this.z.redMul(e.z),a=n.redSqr(),o=this.x.redMul(e.x),c=this.y.redMul(e.y),l=this.curve.d.redMul(o).redMul(c),u=a.redSub(l),d=a.redAdd(l),m=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(c),b=n.redMul(u).redMul(m),x,_;return this.curve.twisted?(x=n.redMul(d).redMul(c.redSub(this.curve._mulA(o))),_=u.redMul(d)):(x=n.redMul(d).redMul(c.redSub(o)),_=this.curve._mulC(u).redMul(d)),this.curve.point(b,x,_)};Point$3.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Point$3.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Point$3.prototype.mulAdd=function(e,n,a){return this.curve._wnafMulAdd(1,[this,n],[e,a],2,!1)};Point$3.prototype.jmulAdd=function(e,n,a){return this.curve._wnafMulAdd(1,[this,n],[e,a],2,!0)};Point$3.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Point$3.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point$3.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Point$3.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Point$3.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Point$3.prototype.eqXToP=function(e){var n=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(n)===0)return!0;for(var a=e.clone(),o=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),a.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Point$3.prototype.toP=Point$3.prototype.normalize;Point$3.prototype.mixedAdd=Point$3.prototype.add;(function(t){var e=t;e.base=base$8,e.short=short,e.mont=mont,e.edwards=edwards})(curve);var curves$1={},hash$3={},utils$j={},assert$i=minimalisticAssert$1,inherits$8=inherits_browserExports;utils$j.inherits=inherits$8;function isSurrogatePair(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function toArray$1(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),o=0;o<t.length;o+=2)n.push(parseInt(t[o]+t[o+1],16))}else for(var a=0,o=0;o<t.length;o++){var c=t.charCodeAt(o);c<128?n[a++]=c:c<2048?(n[a++]=c>>6|192,n[a++]=c&63|128):isSurrogatePair(t,o)?(c=65536+((c&1023)<<10)+(t.charCodeAt(++o)&1023),n[a++]=c>>18|240,n[a++]=c>>12&63|128,n[a++]=c>>6&63|128,n[a++]=c&63|128):(n[a++]=c>>12|224,n[a++]=c>>6&63|128,n[a++]=c&63|128)}else for(o=0;o<t.length;o++)n[o]=t[o]|0;return n}utils$j.toArray=toArray$1;function toHex$1(t){for(var e="",n=0;n<t.length;n++)e+=zero2(t[n].toString(16));return e}utils$j.toHex=toHex$1;function htonl(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}utils$j.htonl=htonl;function toHex32(t,e){for(var n="",a=0;a<t.length;a++){var o=t[a];e==="little"&&(o=htonl(o)),n+=zero8(o.toString(16))}return n}utils$j.toHex32=toHex32;function zero2(t){return t.length===1?"0"+t:t}utils$j.zero2=zero2;function zero8(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}utils$j.zero8=zero8;function join32(t,e,n,a){var o=n-e;assert$i(o%4===0);for(var c=new Array(o/4),l=0,u=e;l<c.length;l++,u+=4){var d;a==="big"?d=t[u]<<24|t[u+1]<<16|t[u+2]<<8|t[u+3]:d=t[u+3]<<24|t[u+2]<<16|t[u+1]<<8|t[u],c[l]=d>>>0}return c}utils$j.join32=join32;function split32(t,e){for(var n=new Array(t.length*4),a=0,o=0;a<t.length;a++,o+=4){var c=t[a];e==="big"?(n[o]=c>>>24,n[o+1]=c>>>16&255,n[o+2]=c>>>8&255,n[o+3]=c&255):(n[o+3]=c>>>24,n[o+2]=c>>>16&255,n[o+1]=c>>>8&255,n[o]=c&255)}return n}utils$j.split32=split32;function rotr32$1(t,e){return t>>>e|t<<32-e}utils$j.rotr32=rotr32$1;function rotl32$2(t,e){return t<<e|t>>>32-e}utils$j.rotl32=rotl32$2;function sum32$3(t,e){return t+e>>>0}utils$j.sum32=sum32$3;function sum32_3$1(t,e,n){return t+e+n>>>0}utils$j.sum32_3=sum32_3$1;function sum32_4$2(t,e,n,a){return t+e+n+a>>>0}utils$j.sum32_4=sum32_4$2;function sum32_5$2(t,e,n,a,o){return t+e+n+a+o>>>0}utils$j.sum32_5=sum32_5$2;function sum64$1(t,e,n,a){var o=t[e],c=t[e+1],l=a+c>>>0,u=(l<a?1:0)+n+o;t[e]=u>>>0,t[e+1]=l}utils$j.sum64=sum64$1;function sum64_hi$1(t,e,n,a){var o=e+a>>>0,c=(o<e?1:0)+t+n;return c>>>0}utils$j.sum64_hi=sum64_hi$1;function sum64_lo$1(t,e,n,a){var o=e+a;return o>>>0}utils$j.sum64_lo=sum64_lo$1;function sum64_4_hi$1(t,e,n,a,o,c,l,u){var d=0,m=e;m=m+a>>>0,d+=m<e?1:0,m=m+c>>>0,d+=m<c?1:0,m=m+u>>>0,d+=m<u?1:0;var b=t+n+o+l+d;return b>>>0}utils$j.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(t,e,n,a,o,c,l,u){var d=e+a+c+u;return d>>>0}utils$j.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(t,e,n,a,o,c,l,u,d,m){var b=0,x=e;x=x+a>>>0,b+=x<e?1:0,x=x+c>>>0,b+=x<c?1:0,x=x+u>>>0,b+=x<u?1:0,x=x+m>>>0,b+=x<m?1:0;var _=t+n+o+l+d+b;return _>>>0}utils$j.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(t,e,n,a,o,c,l,u,d,m){var b=e+a+c+u+m;return b>>>0}utils$j.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(t,e,n){var a=e<<32-n|t>>>n;return a>>>0}utils$j.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(t,e,n){var a=t<<32-n|e>>>n;return a>>>0}utils$j.rotr64_lo=rotr64_lo$1;function shr64_hi$1(t,e,n){return t>>>n}utils$j.shr64_hi=shr64_hi$1;function shr64_lo$1(t,e,n){var a=t<<32-n|e>>>n;return a>>>0}utils$j.shr64_lo=shr64_lo$1;var common$8={},utils$i=utils$j,assert$h=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$8.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(e,n){if(e=utils$i.toArray(e,n),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var a=e.length%this._delta8;this.pending=e.slice(e.length-a,e.length),this.pending.length===0&&(this.pending=null),e=utils$i.join32(e,0,e.length-a,this.endian);for(var o=0;o<e.length;o+=this._delta32)this._update(e,o,o+this._delta32)}return this};BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$h(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,n=this._delta8,a=n-(e+this.padLength)%n,o=new Array(a+this.padLength);o[0]=128;for(var c=1;c<a;c++)o[c]=0;if(e<<=3,this.endian==="big"){for(var l=8;l<this.padLength;l++)o[c++]=0;o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=e>>>24&255,o[c++]=e>>>16&255,o[c++]=e>>>8&255,o[c++]=e&255}else for(o[c++]=e&255,o[c++]=e>>>8&255,o[c++]=e>>>16&255,o[c++]=e>>>24&255,o[c++]=0,o[c++]=0,o[c++]=0,o[c++]=0,l=8;l<this.padLength;l++)o[c++]=0;return o};var sha$3={},common$7={},utils$h=utils$j,rotr32=utils$h.rotr32;function ft_1$1(t,e,n,a){if(t===0)return ch32$1(e,n,a);if(t===1||t===3)return p32(e,n,a);if(t===2)return maj32$1(e,n,a)}common$7.ft_1=ft_1$1;function ch32$1(t,e,n){return t&e^~t&n}common$7.ch32=ch32$1;function maj32$1(t,e,n){return t&e^t&n^e&n}common$7.maj32=maj32$1;function p32(t,e,n){return t^e^n}common$7.p32=p32;function s0_256$1(t){return rotr32(t,2)^rotr32(t,13)^rotr32(t,22)}common$7.s0_256=s0_256$1;function s1_256$1(t){return rotr32(t,6)^rotr32(t,11)^rotr32(t,25)}common$7.s1_256=s1_256$1;function g0_256$1(t){return rotr32(t,7)^rotr32(t,18)^t>>>3}common$7.g0_256=g0_256$1;function g1_256$1(t){return rotr32(t,17)^rotr32(t,19)^t>>>10}common$7.g1_256=g1_256$1;var utils$g=utils$j,common$6=common$8,shaCommon$1=common$7,rotl32$1=utils$g.rotl32,sum32$2=utils$g.sum32,sum32_5$1=utils$g.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$6.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$g.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(e,n){for(var a=this.W,o=0;o<16;o++)a[o]=e[n+o];for(;o<a.length;o++)a[o]=rotl32$1(a[o-3]^a[o-8]^a[o-14]^a[o-16],1);var c=this.h[0],l=this.h[1],u=this.h[2],d=this.h[3],m=this.h[4];for(o=0;o<a.length;o++){var b=~~(o/20),x=sum32_5$1(rotl32$1(c,5),ft_1(b,l,u,d),m,a[o],sha1_K[b]);m=d,d=u,u=rotl32$1(l,30),l=c,c=x}this.h[0]=sum32$2(this.h[0],c),this.h[1]=sum32$2(this.h[1],l),this.h[2]=sum32$2(this.h[2],u),this.h[3]=sum32$2(this.h[3],d),this.h[4]=sum32$2(this.h[4],m)};SHA1.prototype._digest=function(e){return e==="hex"?utils$g.toHex32(this.h,"big"):utils$g.split32(this.h,"big")};var utils$f=utils$j,common$5=common$8,shaCommon=common$7,assert$g=minimalisticAssert$1,sum32$1=utils$f.sum32,sum32_4$1=utils$f.sum32_4,sum32_5=utils$f.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$5.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$f.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(e,n){for(var a=this.W,o=0;o<16;o++)a[o]=e[n+o];for(;o<a.length;o++)a[o]=sum32_4$1(g1_256(a[o-2]),a[o-7],g0_256(a[o-15]),a[o-16]);var c=this.h[0],l=this.h[1],u=this.h[2],d=this.h[3],m=this.h[4],b=this.h[5],x=this.h[6],_=this.h[7];for(assert$g(this.k.length===a.length),o=0;o<a.length;o++){var w=sum32_5(_,s1_256(m),ch32(m,b,x),this.k[o],a[o]),S=sum32$1(s0_256(c),maj32(c,l,u));_=x,x=b,b=m,m=sum32$1(d,w),d=u,u=l,l=c,c=sum32$1(w,S)}this.h[0]=sum32$1(this.h[0],c),this.h[1]=sum32$1(this.h[1],l),this.h[2]=sum32$1(this.h[2],u),this.h[3]=sum32$1(this.h[3],d),this.h[4]=sum32$1(this.h[4],m),this.h[5]=sum32$1(this.h[5],b),this.h[6]=sum32$1(this.h[6],x),this.h[7]=sum32$1(this.h[7],_)};SHA256$1.prototype._digest=function(e){return e==="hex"?utils$f.toHex32(this.h,"big"):utils$f.split32(this.h,"big")};var utils$e=utils$j,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$e.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(e){return e==="hex"?utils$e.toHex32(this.h.slice(0,7),"big"):utils$e.split32(this.h.slice(0,7),"big")};var utils$d=utils$j,common$4=common$8,assert$f=minimalisticAssert$1,rotr64_hi=utils$d.rotr64_hi,rotr64_lo=utils$d.rotr64_lo,shr64_hi=utils$d.shr64_hi,shr64_lo=utils$d.shr64_lo,sum64=utils$d.sum64,sum64_hi=utils$d.sum64_hi,sum64_lo=utils$d.sum64_lo,sum64_4_hi=utils$d.sum64_4_hi,sum64_4_lo=utils$d.sum64_4_lo,sum64_5_hi=utils$d.sum64_5_hi,sum64_5_lo=utils$d.sum64_5_lo,BlockHash$1=common$4.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$d.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function(e,n){for(var a=this.W,o=0;o<32;o++)a[o]=e[n+o];for(;o<a.length;o+=2){var c=g1_512_hi(a[o-4],a[o-3]),l=g1_512_lo(a[o-4],a[o-3]),u=a[o-14],d=a[o-13],m=g0_512_hi(a[o-30],a[o-29]),b=g0_512_lo(a[o-30],a[o-29]),x=a[o-32],_=a[o-31];a[o]=sum64_4_hi(c,l,u,d,m,b,x,_),a[o+1]=sum64_4_lo(c,l,u,d,m,b,x,_)}};SHA512$1.prototype._update=function(e,n){this._prepareBlock(e,n);var a=this.W,o=this.h[0],c=this.h[1],l=this.h[2],u=this.h[3],d=this.h[4],m=this.h[5],b=this.h[6],x=this.h[7],_=this.h[8],w=this.h[9],S=this.h[10],T=this.h[11],B=this.h[12],C=this.h[13],D=this.h[14],z=this.h[15];assert$f(this.k.length===a.length);for(var U=0;U<a.length;U+=2){var Y=D,X=z,O=s1_512_hi(_,w),J=s1_512_lo(_,w),Z=ch64_hi(_,w,S,T,B),se=ch64_lo(_,w,S,T,B,C),ie=this.k[U],F=this.k[U+1],k=a[U],y=a[U+1],A=sum64_5_hi(Y,X,O,J,Z,se,ie,F,k,y),I=sum64_5_lo(Y,X,O,J,Z,se,ie,F,k,y);Y=s0_512_hi(o,c),X=s0_512_lo(o,c),O=maj64_hi(o,c,l,u,d),J=maj64_lo(o,c,l,u,d,m);var P=sum64_hi(Y,X,O,J),H=sum64_lo(Y,X,O,J);D=B,z=C,B=S,C=T,S=_,T=w,_=sum64_hi(b,x,A,I),w=sum64_lo(x,x,A,I),b=d,x=m,d=l,m=u,l=o,u=c,o=sum64_hi(A,I,P,H),c=sum64_lo(A,I,P,H)}sum64(this.h,0,o,c),sum64(this.h,2,l,u),sum64(this.h,4,d,m),sum64(this.h,6,b,x),sum64(this.h,8,_,w),sum64(this.h,10,S,T),sum64(this.h,12,B,C),sum64(this.h,14,D,z)};SHA512$1.prototype._digest=function(e){return e==="hex"?utils$d.toHex32(this.h,"big"):utils$d.split32(this.h,"big")};function ch64_hi(t,e,n,a,o){var c=t&n^~t&o;return c<0&&(c+=4294967296),c}function ch64_lo(t,e,n,a,o,c){var l=e&a^~e&c;return l<0&&(l+=4294967296),l}function maj64_hi(t,e,n,a,o){var c=t&n^t&o^n&o;return c<0&&(c+=4294967296),c}function maj64_lo(t,e,n,a,o,c){var l=e&a^e&c^a&c;return l<0&&(l+=4294967296),l}function s0_512_hi(t,e){var n=rotr64_hi(t,e,28),a=rotr64_hi(e,t,2),o=rotr64_hi(e,t,7),c=n^a^o;return c<0&&(c+=4294967296),c}function s0_512_lo(t,e){var n=rotr64_lo(t,e,28),a=rotr64_lo(e,t,2),o=rotr64_lo(e,t,7),c=n^a^o;return c<0&&(c+=4294967296),c}function s1_512_hi(t,e){var n=rotr64_hi(t,e,14),a=rotr64_hi(t,e,18),o=rotr64_hi(e,t,9),c=n^a^o;return c<0&&(c+=4294967296),c}function s1_512_lo(t,e){var n=rotr64_lo(t,e,14),a=rotr64_lo(t,e,18),o=rotr64_lo(e,t,9),c=n^a^o;return c<0&&(c+=4294967296),c}function g0_512_hi(t,e){var n=rotr64_hi(t,e,1),a=rotr64_hi(t,e,8),o=shr64_hi(t,e,7),c=n^a^o;return c<0&&(c+=4294967296),c}function g0_512_lo(t,e){var n=rotr64_lo(t,e,1),a=rotr64_lo(t,e,8),o=shr64_lo(t,e,7),c=n^a^o;return c<0&&(c+=4294967296),c}function g1_512_hi(t,e){var n=rotr64_hi(t,e,19),a=rotr64_hi(e,t,29),o=shr64_hi(t,e,6),c=n^a^o;return c<0&&(c+=4294967296),c}function g1_512_lo(t,e){var n=rotr64_lo(t,e,19),a=rotr64_lo(e,t,29),o=shr64_lo(t,e,6),c=n^a^o;return c<0&&(c+=4294967296),c}var utils$c=utils$j,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$c.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(e){return e==="hex"?utils$c.toHex32(this.h.slice(0,12),"big"):utils$c.split32(this.h.slice(0,12),"big")};sha$3.sha1=_1;sha$3.sha224=_224;sha$3.sha256=_256;sha$3.sha384=_384;sha$3.sha512=_512;var ripemd={},utils$b=utils$j,common$3=common$8,rotl32=utils$b.rotl32,sum32=utils$b.sum32,sum32_3=utils$b.sum32_3,sum32_4=utils$b.sum32_4,BlockHash=common$3.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$b.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(e,n){for(var a=this.h[0],o=this.h[1],c=this.h[2],l=this.h[3],u=this.h[4],d=a,m=o,b=c,x=l,_=u,w=0;w<80;w++){var S=sum32(rotl32(sum32_4(a,f(w,o,c,l),e[r[w]+n],K(w)),s$1[w]),u);a=u,u=l,l=rotl32(c,10),c=o,o=S,S=sum32(rotl32(sum32_4(d,f(79-w,m,b,x),e[rh[w]+n],Kh(w)),sh[w]),_),d=_,_=x,x=rotl32(b,10),b=m,m=S}S=sum32_3(this.h[1],c,x),this.h[1]=sum32_3(this.h[2],l,_),this.h[2]=sum32_3(this.h[3],u,d),this.h[3]=sum32_3(this.h[4],a,m),this.h[4]=sum32_3(this.h[0],o,b),this.h[0]=S};RIPEMD160.prototype._digest=function(e){return e==="hex"?utils$b.toHex32(this.h,"little"):utils$b.split32(this.h,"little")};function f(t,e,n,a){return t<=15?e^n^a:t<=31?e&n|~e&a:t<=47?(e|~n)^a:t<=63?e&a|n&~a:e^(n|~a)}function K(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$a=utils$j,assert$e=minimalisticAssert$1;function Hmac(t,e,n){if(!(this instanceof Hmac))return new Hmac(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(utils$a.toArray(e,n))}var hmac$1=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$e(e.length<=this.blockSize);for(var n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new this.Hash().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function(e,n){return this.inner.update(e,n),this};Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=utils$j,e.common=common$8,e.sha=sha$3,e.ripemd=ripemd,e.hmac=hmac$1,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash$3);var secp256k1$1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$1}(function(t){var e=t,n=hash$3,a=curve,o=utils$p,c=o.assert;function l(m){m.type==="short"?this.curve=new a.short(m):m.type==="edwards"?this.curve=new a.edwards(m):this.curve=new a.mont(m),this.g=this.curve.g,this.n=this.curve.n,this.hash=m.hash,c(this.g.validate(),"Invalid curve"),c(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=l;function u(m,b){Object.defineProperty(e,m,{configurable:!0,enumerable:!0,get:function(){var x=new l(b);return Object.defineProperty(e,m,{configurable:!0,enumerable:!0,value:x}),x}})}u("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),u("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),u("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),u("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),u("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),u("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),u("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var d;try{d=requireSecp256k1()}catch{d=void 0}u("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",d]})})(curves$1);var hash$2=hash$3,utils$9=utils$o,assert$d=minimalisticAssert$1;function HmacDRBG$1(t){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils$9.toArray(t.entropy,t.entropyEnc||"hex"),n=utils$9.toArray(t.nonce,t.nonceEnc||"hex"),a=utils$9.toArray(t.pers,t.persEnc||"hex");assert$d(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,a)}var hmacDrbg$1=HmacDRBG$1;HmacDRBG$1.prototype._init=function(e,n,a){var o=e.concat(n).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var c=0;c<this.V.length;c++)this.K[c]=0,this.V[c]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function(){return new hash$2.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function(e,n,a,o){typeof n!="string"&&(o=a,a=n,n=null),e=utils$9.toArray(e,n),a=utils$9.toArray(a,o),assert$d(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(a||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function(e,n,a,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(o=a,a=n,n=null),a&&(a=utils$9.toArray(a,o||"hex"),this._update(a));for(var c=[];c.length<e;)this.V=this._hmac().update(this.V).digest(),c=c.concat(this.V);var l=c.slice(0,e);return this._update(a),this._reseed++,utils$9.encode(l,n)};var BN$8=bnExports$4,utils$8=utils$p,assert$c=utils$8.assert;function KeyPair$3(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$3=KeyPair$3;KeyPair$3.fromPublic=function(e,n,a){return n instanceof KeyPair$3?n:new KeyPair$3(e,{pub:n,pubEnc:a})};KeyPair$3.fromPrivate=function(e,n,a){return n instanceof KeyPair$3?n:new KeyPair$3(e,{priv:n,privEnc:a})};KeyPair$3.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};KeyPair$3.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function(e,n){this.priv=new BN$8(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?assert$c(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$c(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};KeyPair$3.prototype.derive=function(e){return e.validate()||assert$c(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$3.prototype.sign=function(e,n,a){return this.ec.sign(e,this,n,a)};KeyPair$3.prototype.verify=function(e,n){return this.ec.verify(e,n,this)};KeyPair$3.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$7=bnExports$4,utils$7=utils$p,assert$b=utils$7.assert;function Signature$5(t,e){if(t instanceof Signature$5)return t;this._importDER(t,e)||(assert$b(t.r&&t.s,"Signature without r or s"),this.r=new BN$7(t.r,16),this.s=new BN$7(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature$2=Signature$5;function Position$1(){this.place=0}function getLength$1(t,e){var n=t[e.place++];if(!(n&128))return n;var a=n&15;if(a===0||a>4)return!1;for(var o=0,c=0,l=e.place;c<a;c++,l++)o<<=8,o|=t[l],o>>>=0;return o<=127?!1:(e.place=l,o)}function rmPadding$1(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}Signature$5.prototype._importDER=function(e,n){e=utils$7.toArray(e,n);var a=new Position$1;if(e[a.place++]!==48)return!1;var o=getLength$1(e,a);if(o===!1||o+a.place!==e.length||e[a.place++]!==2)return!1;var c=getLength$1(e,a);if(c===!1)return!1;var l=e.slice(a.place,c+a.place);if(a.place+=c,e[a.place++]!==2)return!1;var u=getLength$1(e,a);if(u===!1||e.length!==u+a.place)return!1;var d=e.slice(a.place,u+a.place);if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;if(d[0]===0)if(d[1]&128)d=d.slice(1);else return!1;return this.r=new BN$7(l),this.s=new BN$7(d),this.recoveryParam=null,!0};function constructLength$1(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}Signature$5.prototype.toDER=function(e){var n=this.r.toArray(),a=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),a[0]&128&&(a=[0].concat(a)),n=rmPadding$1(n),a=rmPadding$1(a);!a[0]&&!(a[1]&128);)a=a.slice(1);var o=[2];constructLength$1(o,n.length),o=o.concat(n),o.push(2),constructLength$1(o,a.length);var c=o.concat(a),l=[48];return constructLength$1(l,c.length),l=l.concat(c),utils$7.encode(l,e)};var ec$3,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec$3;hasRequiredEc=1;var t=bnExports$4,e=hmacDrbg$1,n=utils$p,a=curves$1,o=requireBrorand(),c=n.assert,l=key$3,u=signature$2;function d(m){if(!(this instanceof d))return new d(m);typeof m=="string"&&(c(Object.prototype.hasOwnProperty.call(a,m),"Unknown curve "+m),m=a[m]),m instanceof a.PresetCurve&&(m={curve:m}),this.curve=m.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=m.curve.g,this.g.precompute(m.curve.n.bitLength()+1),this.hash=m.hash||m.curve.hash}return ec$3=d,d.prototype.keyPair=function(b){return new l(this,b)},d.prototype.keyFromPrivate=function(b,x){return l.fromPrivate(this,b,x)},d.prototype.keyFromPublic=function(b,x){return l.fromPublic(this,b,x)},d.prototype.genKeyPair=function(b){b||(b={});for(var x=new e({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||o(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()}),_=this.n.byteLength(),w=this.n.sub(new t(2));;){var S=new t(x.generate(_));if(!(S.cmp(w)>0))return S.iaddn(1),this.keyFromPrivate(S)}},d.prototype._truncateToN=function(b,x){var _=b.byteLength()*8-this.n.bitLength();return _>0&&(b=b.ushrn(_)),!x&&b.cmp(this.n)>=0?b.sub(this.n):b},d.prototype.sign=function(b,x,_,w){typeof _=="object"&&(w=_,_=null),w||(w={}),x=this.keyFromPrivate(x,_),b=this._truncateToN(new t(b,16));for(var S=this.n.byteLength(),T=x.getPrivate().toArray("be",S),B=b.toArray("be",S),C=new e({hash:this.hash,entropy:T,nonce:B,pers:w.pers,persEnc:w.persEnc||"utf8"}),D=this.n.sub(new t(1)),z=0;;z++){var U=w.k?w.k(z):new t(C.generate(this.n.byteLength()));if(U=this._truncateToN(U,!0),!(U.cmpn(1)<=0||U.cmp(D)>=0)){var Y=this.g.mul(U);if(!Y.isInfinity()){var X=Y.getX(),O=X.umod(this.n);if(O.cmpn(0)!==0){var J=U.invm(this.n).mul(O.mul(x.getPrivate()).iadd(b));if(J=J.umod(this.n),J.cmpn(0)!==0){var Z=(Y.getY().isOdd()?1:0)|(X.cmp(O)!==0?2:0);return w.canonical&&J.cmp(this.nh)>0&&(J=this.n.sub(J),Z^=1),new u({r:O,s:J,recoveryParam:Z})}}}}}},d.prototype.verify=function(b,x,_,w){b=this._truncateToN(new t(b,16)),_=this.keyFromPublic(_,w),x=new u(x,"hex");var S=x.r,T=x.s;if(S.cmpn(1)<0||S.cmp(this.n)>=0||T.cmpn(1)<0||T.cmp(this.n)>=0)return!1;var B=T.invm(this.n),C=B.mul(b).umod(this.n),D=B.mul(S).umod(this.n),z;return this.curve._maxwellTrick?(z=this.g.jmulAdd(C,_.getPublic(),D),z.isInfinity()?!1:z.eqXToP(S)):(z=this.g.mulAdd(C,_.getPublic(),D),z.isInfinity()?!1:z.getX().umod(this.n).cmp(S)===0)},d.prototype.recoverPubKey=function(m,b,x,_){c((3&x)===x,"The recovery param is more than two bits"),b=new u(b,_);var w=this.n,S=new t(m),T=b.r,B=b.s,C=x&1,D=x>>1;if(T.cmp(this.curve.p.umod(this.curve.n))>=0&&D)throw new Error("Unable to find sencond key candinate");D?T=this.curve.pointFromX(T.add(this.curve.n),C):T=this.curve.pointFromX(T,C);var z=b.r.invm(w),U=w.sub(S).mul(z).umod(w),Y=B.mul(z).umod(w);return this.g.mulAdd(U,T,Y)},d.prototype.getKeyRecoveryParam=function(m,b,x,_){if(b=new u(b,_),b.recoveryParam!==null)return b.recoveryParam;for(var w=0;w<4;w++){var S;try{S=this.recoverPubKey(m,b,w)}catch{continue}if(S.eq(x))return w}throw new Error("Unable to find valid recovery factor")},ec$3}var utils$6=utils$p,assert$a=utils$6.assert,parseBytes$2=utils$6.parseBytes,cachedProperty$1=utils$6.cachedProperty;function KeyPair$2(t,e){this.eddsa=t,this._secret=parseBytes$2(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes$2(e.pub)}KeyPair$2.fromPublic=function(e,n){return n instanceof KeyPair$2?n:new KeyPair$2(e,{pub:n})};KeyPair$2.fromSecret=function(e,n){return n instanceof KeyPair$2?n:new KeyPair$2(e,{secret:n})};KeyPair$2.prototype.secret=function(){return this._secret};cachedProperty$1(KeyPair$2,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$2,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$2,"privBytes",function(){var e=this.eddsa,n=this.hash(),a=e.encodingLength-1,o=n.slice(0,e.encodingLength);return o[0]&=248,o[a]&=127,o[a]|=64,o});cachedProperty$1(KeyPair$2,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$2,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$2,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$2.prototype.sign=function(e){return assert$a(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};KeyPair$2.prototype.verify=function(e,n){return this.eddsa.verify(e,n,this)};KeyPair$2.prototype.getSecret=function(e){return assert$a(this._secret,"KeyPair is public only"),utils$6.encode(this.secret(),e)};KeyPair$2.prototype.getPublic=function(e){return utils$6.encode(this.pubBytes(),e)};var key$2=KeyPair$2,BN$6=bnExports$4,utils$5=utils$p,assert$9=utils$5.assert,cachedProperty=utils$5.cachedProperty,parseBytes$1=utils$5.parseBytes;function Signature$4(t,e){this.eddsa=t,typeof e!="object"&&(e=parseBytes$1(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),assert$9(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof BN$6&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}cachedProperty(Signature$4,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$4,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$4,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$4,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Signature$4.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Signature$4.prototype.toHex=function(){return utils$5.encode(this.toBytes(),"hex").toUpperCase()};var signature$1=Signature$4,hash$1=hash$3,curves=curves$1,utils$4=utils$p,assert$8=utils$4.assert,parseBytes=utils$4.parseBytes,KeyPair$1=key$2,Signature$3=signature$1;function EDDSA(t){if(assert$8(t==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(t);t=curves[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=hash$1.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function(e,n){e=parseBytes(e);var a=this.keyFromSecret(n),o=this.hashInt(a.messagePrefix(),e),c=this.g.mul(o),l=this.encodePoint(c),u=this.hashInt(l,a.pubBytes(),e).mul(a.priv()),d=o.add(u).umod(this.curve.n);return this.makeSignature({R:c,S:d,Rencoded:l})};EDDSA.prototype.verify=function(e,n,a){e=parseBytes(e),n=this.makeSignature(n);var o=this.keyFromPublic(a),c=this.hashInt(n.Rencoded(),o.pubBytes(),e),l=this.g.mul(n.S()),u=n.R().add(o.pub().mul(c));return u.eq(l)};EDDSA.prototype.hashInt=function(){for(var e=this.hash(),n=0;n<arguments.length;n++)e.update(arguments[n]);return utils$4.intFromLE(e.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function(e){return KeyPair$1.fromPublic(this,e)};EDDSA.prototype.keyFromSecret=function(e){return KeyPair$1.fromSecret(this,e)};EDDSA.prototype.makeSignature=function(e){return e instanceof Signature$3?e:new Signature$3(this,e)};EDDSA.prototype.encodePoint=function(e){var n=e.getY().toArray("le",this.encodingLength);return n[this.encodingLength-1]|=e.getX().isOdd()?128:0,n};EDDSA.prototype.decodePoint=function(e){e=utils$4.parseBytes(e);var n=e.length-1,a=e.slice(0,n).concat(e[n]&-129),o=(e[n]&128)!==0,c=utils$4.intFromLE(a);return this.curve.pointFromY(c,o)};EDDSA.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function(e){return utils$4.intFromLE(e)};EDDSA.prototype.isPoint=function(e){return e instanceof this.pointClass};var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(t){var e=t;e.version=require$$0$1.version,e.utils=utils$p,e.rand=requireBrorand(),e.curve=curve,e.curves=curves$1,e.ec=requireEc(),e.eddsa=eddsa}(elliptic$3)),elliptic$3}var bnExports$2={},bn$2={get exports(){return bnExports$2},set exports(t){bnExports$2=t}};(function(t){(function(e,n){function a(k,y){if(!k)throw new Error(y||"Assertion failed")}function o(k,y){k.super_=y;var A=function(){};A.prototype=y.prototype,k.prototype=new A,k.prototype.constructor=k}function c(k,y,A){if(c.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((y==="le"||y==="be")&&(A=y,y=10),this._init(k||0,y||10,A||"be"))}typeof e=="object"?e.exports=c:n.BN=c,c.BN=c,c.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$2.Buffer}catch{}c.isBN=function(y){return y instanceof c?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===c.wordSize&&Array.isArray(y.words)},c.max=function(y,A){return y.cmp(A)>0?y:A},c.min=function(y,A){return y.cmp(A)<0?y:A},c.prototype._init=function(y,A,I){if(typeof y=="number")return this._initNumber(y,A,I);if(typeof y=="object")return this._initArray(y,A,I);A==="hex"&&(A=16),a(A===(A|0)&&A>=2&&A<=36),y=y.toString().replace(/\s+/g,"");var P=0;y[0]==="-"&&(P++,this.negative=1),P<y.length&&(A===16?this._parseHex(y,P,I):(this._parseBase(y,A,P),I==="le"&&this._initArray(this.toArray(),A,I)))},c.prototype._initNumber=function(y,A,I){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(a(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),I==="le"&&this._initArray(this.toArray(),A,I)},c.prototype._initArray=function(y,A,I){if(a(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var H,q,j=0;if(I==="be")for(P=y.length-1,H=0;P>=0;P-=3)q=y[P]|y[P-1]<<8|y[P-2]<<16,this.words[H]|=q<<j&67108863,this.words[H+1]=q>>>26-j&67108863,j+=24,j>=26&&(j-=26,H++);else if(I==="le")for(P=0,H=0;P<y.length;P+=3)q=y[P]|y[P+1]<<8|y[P+2]<<16,this.words[H]|=q<<j&67108863,this.words[H+1]=q>>>26-j&67108863,j+=24,j>=26&&(j-=26,H++);return this._strip()};function u(k,y){var A=k.charCodeAt(y);if(A>=48&&A<=57)return A-48;if(A>=65&&A<=70)return A-55;if(A>=97&&A<=102)return A-87;a(!1,"Invalid character in "+k)}function d(k,y,A){var I=u(k,A);return A-1>=y&&(I|=u(k,A-1)<<4),I}c.prototype._parseHex=function(y,A,I){this.length=Math.ceil((y.length-A)/6),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var H=0,q=0,j;if(I==="be")for(P=y.length-1;P>=A;P-=2)j=d(y,A,P)<<H,this.words[q]|=j&67108863,H>=18?(H-=18,q+=1,this.words[q]|=j>>>26):H+=8;else{var M=y.length-A;for(P=M%2===0?A+1:A;P<y.length;P+=2)j=d(y,A,P)<<H,this.words[q]|=j&67108863,H>=18?(H-=18,q+=1,this.words[q]|=j>>>26):H+=8}this._strip()};function m(k,y,A,I){for(var P=0,H=0,q=Math.min(k.length,A),j=y;j<q;j++){var M=k.charCodeAt(j)-48;P*=I,M>=49?H=M-49+10:M>=17?H=M-17+10:H=M,a(M>=0&&H<I,"Invalid character"),P+=H}return P}c.prototype._parseBase=function(y,A,I){this.words=[0],this.length=1;for(var P=0,H=1;H<=67108863;H*=A)P++;P--,H=H/A|0;for(var q=y.length-I,j=q%P,M=Math.min(q,q-j)+I,E=0,L=I;L<M;L+=P)E=m(y,L,L+P,A),this.imuln(H),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(j!==0){var le=1;for(E=m(y,L,y.length,A),L=0;L<j;L++)le*=A;this.imuln(le),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}this._strip()},c.prototype.copy=function(y){y.words=new Array(this.length);for(var A=0;A<this.length;A++)y.words[A]=this.words[A];y.length=this.length,y.negative=this.negative,y.red=this.red};function b(k,y){k.words=y.words,k.length=y.length,k.negative=y.negative,k.red=y.red}if(c.prototype._move=function(y){b(y,this)},c.prototype.clone=function(){var y=new c(null);return this.copy(y),y},c.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},c.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{c.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{c.prototype.inspect=x}else c.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(y,A){y=y||10,A=A|0||1;var I;if(y===16||y==="hex"){I="";for(var P=0,H=0,q=0;q<this.length;q++){var j=this.words[q],M=((j<<P|H)&16777215).toString(16);H=j>>>24-P&16777215,P+=2,P>=26&&(P-=26,q--),H!==0||q!==this.length-1?I=_[6-M.length]+M+I:I=M+I}for(H!==0&&(I=H.toString(16)+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}if(y===(y|0)&&y>=2&&y<=36){var E=w[y],L=S[y];I="";var le=this.clone();for(le.negative=0;!le.isZero();){var Q=le.modrn(L).toString(y);le=le.idivn(L),le.isZero()?I=Q+I:I=_[E-Q.length]+Q+I}for(this.isZero()&&(I="0"+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},c.prototype.toJSON=function(){return this.toString(16,2)},l&&(c.prototype.toBuffer=function(y,A){return this.toArrayLike(l,y,A)}),c.prototype.toArray=function(y,A){return this.toArrayLike(Array,y,A)};var T=function(y,A){return y.allocUnsafe?y.allocUnsafe(A):new y(A)};c.prototype.toArrayLike=function(y,A,I){this._strip();var P=this.byteLength(),H=I||Math.max(1,P);a(P<=H,"byte array longer than desired length"),a(H>0,"Requested array length <= 0");var q=T(y,H),j=A==="le"?"LE":"BE";return this["_toArrayLike"+j](q,P),q},c.prototype._toArrayLikeLE=function(y,A){for(var I=0,P=0,H=0,q=0;H<this.length;H++){var j=this.words[H]<<q|P;y[I++]=j&255,I<y.length&&(y[I++]=j>>8&255),I<y.length&&(y[I++]=j>>16&255),q===6?(I<y.length&&(y[I++]=j>>24&255),P=0,q=0):(P=j>>>24,q+=2)}if(I<y.length)for(y[I++]=P;I<y.length;)y[I++]=0},c.prototype._toArrayLikeBE=function(y,A){for(var I=y.length-1,P=0,H=0,q=0;H<this.length;H++){var j=this.words[H]<<q|P;y[I--]=j&255,I>=0&&(y[I--]=j>>8&255),I>=0&&(y[I--]=j>>16&255),q===6?(I>=0&&(y[I--]=j>>24&255),P=0,q=0):(P=j>>>24,q+=2)}if(I>=0)for(y[I--]=P;I>=0;)y[I--]=0},Math.clz32?c.prototype._countBits=function(y){return 32-Math.clz32(y)}:c.prototype._countBits=function(y){var A=y,I=0;return A>=4096&&(I+=13,A>>>=13),A>=64&&(I+=7,A>>>=7),A>=8&&(I+=4,A>>>=4),A>=2&&(I+=2,A>>>=2),I+A},c.prototype._zeroBits=function(y){if(y===0)return 26;var A=y,I=0;return A&8191||(I+=13,A>>>=13),A&127||(I+=7,A>>>=7),A&15||(I+=4,A>>>=4),A&3||(I+=2,A>>>=2),A&1||I++,I},c.prototype.bitLength=function(){var y=this.words[this.length-1],A=this._countBits(y);return(this.length-1)*26+A};function B(k){for(var y=new Array(k.bitLength()),A=0;A<y.length;A++){var I=A/26|0,P=A%26;y[A]=k.words[I]>>>P&1}return y}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,A=0;A<this.length;A++){var I=this._zeroBits(this.words[A]);if(y+=I,I!==26)break}return y},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},c.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var A=0;A<y.length;A++)this.words[A]=this.words[A]|y.words[A];return this._strip()},c.prototype.ior=function(y){return a((this.negative|y.negative)===0),this.iuor(y)},c.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},c.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},c.prototype.iuand=function(y){var A;this.length>y.length?A=y:A=this;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]&y.words[I];return this.length=A.length,this._strip()},c.prototype.iand=function(y){return a((this.negative|y.negative)===0),this.iuand(y)},c.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},c.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},c.prototype.iuxor=function(y){var A,I;this.length>y.length?(A=this,I=y):(A=y,I=this);for(var P=0;P<I.length;P++)this.words[P]=A.words[P]^I.words[P];if(this!==A)for(;P<A.length;P++)this.words[P]=A.words[P];return this.length=A.length,this._strip()},c.prototype.ixor=function(y){return a((this.negative|y.negative)===0),this.iuxor(y)},c.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},c.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},c.prototype.inotn=function(y){a(typeof y=="number"&&y>=0);var A=Math.ceil(y/26)|0,I=y%26;this._expand(A),I>0&&A--;for(var P=0;P<A;P++)this.words[P]=~this.words[P]&67108863;return I>0&&(this.words[P]=~this.words[P]&67108863>>26-I),this._strip()},c.prototype.notn=function(y){return this.clone().inotn(y)},c.prototype.setn=function(y,A){a(typeof y=="number"&&y>=0);var I=y/26|0,P=y%26;return this._expand(I+1),A?this.words[I]=this.words[I]|1<<P:this.words[I]=this.words[I]&~(1<<P),this._strip()},c.prototype.iadd=function(y){var A;if(this.negative!==0&&y.negative===0)return this.negative=0,A=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,A=this.isub(y),y.negative=1,A._normSign();var I,P;this.length>y.length?(I=this,P=y):(I=y,P=this);for(var H=0,q=0;q<P.length;q++)A=(I.words[q]|0)+(P.words[q]|0)+H,this.words[q]=A&67108863,H=A>>>26;for(;H!==0&&q<I.length;q++)A=(I.words[q]|0)+H,this.words[q]=A&67108863,H=A>>>26;if(this.length=I.length,H!==0)this.words[this.length]=H,this.length++;else if(I!==this)for(;q<I.length;q++)this.words[q]=I.words[q];return this},c.prototype.add=function(y){var A;return y.negative!==0&&this.negative===0?(y.negative=0,A=this.sub(y),y.negative^=1,A):y.negative===0&&this.negative!==0?(this.negative=0,A=y.sub(this),this.negative=1,A):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},c.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var A=this.iadd(y);return y.negative=1,A._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var I=this.cmp(y);if(I===0)return this.negative=0,this.length=1,this.words[0]=0,this;var P,H;I>0?(P=this,H=y):(P=y,H=this);for(var q=0,j=0;j<H.length;j++)A=(P.words[j]|0)-(H.words[j]|0)+q,q=A>>26,this.words[j]=A&67108863;for(;q!==0&&j<P.length;j++)A=(P.words[j]|0)+q,q=A>>26,this.words[j]=A&67108863;if(q===0&&j<P.length&&P!==this)for(;j<P.length;j++)this.words[j]=P.words[j];return this.length=Math.max(this.length,j),P!==this&&(this.negative=1),this._strip()},c.prototype.sub=function(y){return this.clone().isub(y)};function C(k,y,A){A.negative=y.negative^k.negative;var I=k.length+y.length|0;A.length=I,I=I-1|0;var P=k.words[0]|0,H=y.words[0]|0,q=P*H,j=q&67108863,M=q/67108864|0;A.words[0]=j;for(var E=1;E<I;E++){for(var L=M>>>26,le=M&67108863,Q=Math.min(E,y.length-1),ce=Math.max(0,E-k.length+1);ce<=Q;ce++){var fe=E-ce|0;P=k.words[fe]|0,H=y.words[ce]|0,q=P*H+le,L+=q/67108864|0,le=q&67108863}A.words[E]=le|0,M=L|0}return M!==0?A.words[E]=M|0:A.length--,A._strip()}var D=function(y,A,I){var P=y.words,H=A.words,q=I.words,j=0,M,E,L,le=P[0]|0,Q=le&8191,ce=le>>>13,fe=P[1]|0,oe=fe&8191,de=fe>>>13,ae=P[2]|0,he=ae&8191,te=ae>>>13,pe=P[3]|0,ee=pe&8191,ge=pe>>>13,Ee=P[4]|0,be=Ee&8191,xe=Ee>>>13,ve=P[5]|0,Se=ve&8191,ke=ve>>>13,Ce=P[6]|0,Re=Ce&8191,Le=Ce>>>13,je=P[7]|0,Pe=je&8191,me=je>>>13,ne=P[8]|0,ue=ne&8191,_e=ne>>>13,Ie=P[9]|0,Ne=Ie&8191,De=Ie>>>13,et=H[0]|0,We=et&8191,Ke=et>>>13,xt=H[1]|0,tt=xt&8191,st=xt>>>13,It=H[2]|0,yt=It&8191,ut=It>>>13,At=H[3]|0,ht=At&8191,nt=At>>>13,Tt=H[4]|0,dt=Tt&8191,it=Tt>>>13,Bt=H[5]|0,pt=Bt&8191,rt=Bt>>>13,Ct=H[6]|0,we=Ct&8191,Be=Ct>>>13,Me=H[7]|0,re=Me&8191,ye=Me>>>13,Ae=H[8]|0,$e=Ae&8191,Te=Ae>>>13,Oe=H[9]|0,Fe=Oe&8191,Ue=Oe>>>13;I.negative=y.negative^A.negative,I.length=19,M=Math.imul(Q,We),E=Math.imul(Q,Ke),E=E+Math.imul(ce,We)|0,L=Math.imul(ce,Ke);var ze=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(ze>>>26)|0,ze&=67108863,M=Math.imul(oe,We),E=Math.imul(oe,Ke),E=E+Math.imul(de,We)|0,L=Math.imul(de,Ke),M=M+Math.imul(Q,tt)|0,E=E+Math.imul(Q,st)|0,E=E+Math.imul(ce,tt)|0,L=L+Math.imul(ce,st)|0;var He=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(He>>>26)|0,He&=67108863,M=Math.imul(he,We),E=Math.imul(he,Ke),E=E+Math.imul(te,We)|0,L=Math.imul(te,Ke),M=M+Math.imul(oe,tt)|0,E=E+Math.imul(oe,st)|0,E=E+Math.imul(de,tt)|0,L=L+Math.imul(de,st)|0,M=M+Math.imul(Q,yt)|0,E=E+Math.imul(Q,ut)|0,E=E+Math.imul(ce,yt)|0,L=L+Math.imul(ce,ut)|0;var qe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(qe>>>26)|0,qe&=67108863,M=Math.imul(ee,We),E=Math.imul(ee,Ke),E=E+Math.imul(ge,We)|0,L=Math.imul(ge,Ke),M=M+Math.imul(he,tt)|0,E=E+Math.imul(he,st)|0,E=E+Math.imul(te,tt)|0,L=L+Math.imul(te,st)|0,M=M+Math.imul(oe,yt)|0,E=E+Math.imul(oe,ut)|0,E=E+Math.imul(de,yt)|0,L=L+Math.imul(de,ut)|0,M=M+Math.imul(Q,ht)|0,E=E+Math.imul(Q,nt)|0,E=E+Math.imul(ce,ht)|0,L=L+Math.imul(ce,nt)|0;var Xe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,M=Math.imul(be,We),E=Math.imul(be,Ke),E=E+Math.imul(xe,We)|0,L=Math.imul(xe,Ke),M=M+Math.imul(ee,tt)|0,E=E+Math.imul(ee,st)|0,E=E+Math.imul(ge,tt)|0,L=L+Math.imul(ge,st)|0,M=M+Math.imul(he,yt)|0,E=E+Math.imul(he,ut)|0,E=E+Math.imul(te,yt)|0,L=L+Math.imul(te,ut)|0,M=M+Math.imul(oe,ht)|0,E=E+Math.imul(oe,nt)|0,E=E+Math.imul(de,ht)|0,L=L+Math.imul(de,nt)|0,M=M+Math.imul(Q,dt)|0,E=E+Math.imul(Q,it)|0,E=E+Math.imul(ce,dt)|0,L=L+Math.imul(ce,it)|0;var Ze=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,M=Math.imul(Se,We),E=Math.imul(Se,Ke),E=E+Math.imul(ke,We)|0,L=Math.imul(ke,Ke),M=M+Math.imul(be,tt)|0,E=E+Math.imul(be,st)|0,E=E+Math.imul(xe,tt)|0,L=L+Math.imul(xe,st)|0,M=M+Math.imul(ee,yt)|0,E=E+Math.imul(ee,ut)|0,E=E+Math.imul(ge,yt)|0,L=L+Math.imul(ge,ut)|0,M=M+Math.imul(he,ht)|0,E=E+Math.imul(he,nt)|0,E=E+Math.imul(te,ht)|0,L=L+Math.imul(te,nt)|0,M=M+Math.imul(oe,dt)|0,E=E+Math.imul(oe,it)|0,E=E+Math.imul(de,dt)|0,L=L+Math.imul(de,it)|0,M=M+Math.imul(Q,pt)|0,E=E+Math.imul(Q,rt)|0,E=E+Math.imul(ce,pt)|0,L=L+Math.imul(ce,rt)|0;var at=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(at>>>26)|0,at&=67108863,M=Math.imul(Re,We),E=Math.imul(Re,Ke),E=E+Math.imul(Le,We)|0,L=Math.imul(Le,Ke),M=M+Math.imul(Se,tt)|0,E=E+Math.imul(Se,st)|0,E=E+Math.imul(ke,tt)|0,L=L+Math.imul(ke,st)|0,M=M+Math.imul(be,yt)|0,E=E+Math.imul(be,ut)|0,E=E+Math.imul(xe,yt)|0,L=L+Math.imul(xe,ut)|0,M=M+Math.imul(ee,ht)|0,E=E+Math.imul(ee,nt)|0,E=E+Math.imul(ge,ht)|0,L=L+Math.imul(ge,nt)|0,M=M+Math.imul(he,dt)|0,E=E+Math.imul(he,it)|0,E=E+Math.imul(te,dt)|0,L=L+Math.imul(te,it)|0,M=M+Math.imul(oe,pt)|0,E=E+Math.imul(oe,rt)|0,E=E+Math.imul(de,pt)|0,L=L+Math.imul(de,rt)|0,M=M+Math.imul(Q,we)|0,E=E+Math.imul(Q,Be)|0,E=E+Math.imul(ce,we)|0,L=L+Math.imul(ce,Be)|0;var Je=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Je>>>26)|0,Je&=67108863,M=Math.imul(Pe,We),E=Math.imul(Pe,Ke),E=E+Math.imul(me,We)|0,L=Math.imul(me,Ke),M=M+Math.imul(Re,tt)|0,E=E+Math.imul(Re,st)|0,E=E+Math.imul(Le,tt)|0,L=L+Math.imul(Le,st)|0,M=M+Math.imul(Se,yt)|0,E=E+Math.imul(Se,ut)|0,E=E+Math.imul(ke,yt)|0,L=L+Math.imul(ke,ut)|0,M=M+Math.imul(be,ht)|0,E=E+Math.imul(be,nt)|0,E=E+Math.imul(xe,ht)|0,L=L+Math.imul(xe,nt)|0,M=M+Math.imul(ee,dt)|0,E=E+Math.imul(ee,it)|0,E=E+Math.imul(ge,dt)|0,L=L+Math.imul(ge,it)|0,M=M+Math.imul(he,pt)|0,E=E+Math.imul(he,rt)|0,E=E+Math.imul(te,pt)|0,L=L+Math.imul(te,rt)|0,M=M+Math.imul(oe,we)|0,E=E+Math.imul(oe,Be)|0,E=E+Math.imul(de,we)|0,L=L+Math.imul(de,Be)|0,M=M+Math.imul(Q,re)|0,E=E+Math.imul(Q,ye)|0,E=E+Math.imul(ce,re)|0,L=L+Math.imul(ce,ye)|0;var Qe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,M=Math.imul(ue,We),E=Math.imul(ue,Ke),E=E+Math.imul(_e,We)|0,L=Math.imul(_e,Ke),M=M+Math.imul(Pe,tt)|0,E=E+Math.imul(Pe,st)|0,E=E+Math.imul(me,tt)|0,L=L+Math.imul(me,st)|0,M=M+Math.imul(Re,yt)|0,E=E+Math.imul(Re,ut)|0,E=E+Math.imul(Le,yt)|0,L=L+Math.imul(Le,ut)|0,M=M+Math.imul(Se,ht)|0,E=E+Math.imul(Se,nt)|0,E=E+Math.imul(ke,ht)|0,L=L+Math.imul(ke,nt)|0,M=M+Math.imul(be,dt)|0,E=E+Math.imul(be,it)|0,E=E+Math.imul(xe,dt)|0,L=L+Math.imul(xe,it)|0,M=M+Math.imul(ee,pt)|0,E=E+Math.imul(ee,rt)|0,E=E+Math.imul(ge,pt)|0,L=L+Math.imul(ge,rt)|0,M=M+Math.imul(he,we)|0,E=E+Math.imul(he,Be)|0,E=E+Math.imul(te,we)|0,L=L+Math.imul(te,Be)|0,M=M+Math.imul(oe,re)|0,E=E+Math.imul(oe,ye)|0,E=E+Math.imul(de,re)|0,L=L+Math.imul(de,ye)|0,M=M+Math.imul(Q,$e)|0,E=E+Math.imul(Q,Te)|0,E=E+Math.imul(ce,$e)|0,L=L+Math.imul(ce,Te)|0;var gt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(gt>>>26)|0,gt&=67108863,M=Math.imul(Ne,We),E=Math.imul(Ne,Ke),E=E+Math.imul(De,We)|0,L=Math.imul(De,Ke),M=M+Math.imul(ue,tt)|0,E=E+Math.imul(ue,st)|0,E=E+Math.imul(_e,tt)|0,L=L+Math.imul(_e,st)|0,M=M+Math.imul(Pe,yt)|0,E=E+Math.imul(Pe,ut)|0,E=E+Math.imul(me,yt)|0,L=L+Math.imul(me,ut)|0,M=M+Math.imul(Re,ht)|0,E=E+Math.imul(Re,nt)|0,E=E+Math.imul(Le,ht)|0,L=L+Math.imul(Le,nt)|0,M=M+Math.imul(Se,dt)|0,E=E+Math.imul(Se,it)|0,E=E+Math.imul(ke,dt)|0,L=L+Math.imul(ke,it)|0,M=M+Math.imul(be,pt)|0,E=E+Math.imul(be,rt)|0,E=E+Math.imul(xe,pt)|0,L=L+Math.imul(xe,rt)|0,M=M+Math.imul(ee,we)|0,E=E+Math.imul(ee,Be)|0,E=E+Math.imul(ge,we)|0,L=L+Math.imul(ge,Be)|0,M=M+Math.imul(he,re)|0,E=E+Math.imul(he,ye)|0,E=E+Math.imul(te,re)|0,L=L+Math.imul(te,ye)|0,M=M+Math.imul(oe,$e)|0,E=E+Math.imul(oe,Te)|0,E=E+Math.imul(de,$e)|0,L=L+Math.imul(de,Te)|0,M=M+Math.imul(Q,Fe)|0,E=E+Math.imul(Q,Ue)|0,E=E+Math.imul(ce,Fe)|0,L=L+Math.imul(ce,Ue)|0;var vt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(vt>>>26)|0,vt&=67108863,M=Math.imul(Ne,tt),E=Math.imul(Ne,st),E=E+Math.imul(De,tt)|0,L=Math.imul(De,st),M=M+Math.imul(ue,yt)|0,E=E+Math.imul(ue,ut)|0,E=E+Math.imul(_e,yt)|0,L=L+Math.imul(_e,ut)|0,M=M+Math.imul(Pe,ht)|0,E=E+Math.imul(Pe,nt)|0,E=E+Math.imul(me,ht)|0,L=L+Math.imul(me,nt)|0,M=M+Math.imul(Re,dt)|0,E=E+Math.imul(Re,it)|0,E=E+Math.imul(Le,dt)|0,L=L+Math.imul(Le,it)|0,M=M+Math.imul(Se,pt)|0,E=E+Math.imul(Se,rt)|0,E=E+Math.imul(ke,pt)|0,L=L+Math.imul(ke,rt)|0,M=M+Math.imul(be,we)|0,E=E+Math.imul(be,Be)|0,E=E+Math.imul(xe,we)|0,L=L+Math.imul(xe,Be)|0,M=M+Math.imul(ee,re)|0,E=E+Math.imul(ee,ye)|0,E=E+Math.imul(ge,re)|0,L=L+Math.imul(ge,ye)|0,M=M+Math.imul(he,$e)|0,E=E+Math.imul(he,Te)|0,E=E+Math.imul(te,$e)|0,L=L+Math.imul(te,Te)|0,M=M+Math.imul(oe,Fe)|0,E=E+Math.imul(oe,Ue)|0,E=E+Math.imul(de,Fe)|0,L=L+Math.imul(de,Ue)|0;var _t=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(_t>>>26)|0,_t&=67108863,M=Math.imul(Ne,yt),E=Math.imul(Ne,ut),E=E+Math.imul(De,yt)|0,L=Math.imul(De,ut),M=M+Math.imul(ue,ht)|0,E=E+Math.imul(ue,nt)|0,E=E+Math.imul(_e,ht)|0,L=L+Math.imul(_e,nt)|0,M=M+Math.imul(Pe,dt)|0,E=E+Math.imul(Pe,it)|0,E=E+Math.imul(me,dt)|0,L=L+Math.imul(me,it)|0,M=M+Math.imul(Re,pt)|0,E=E+Math.imul(Re,rt)|0,E=E+Math.imul(Le,pt)|0,L=L+Math.imul(Le,rt)|0,M=M+Math.imul(Se,we)|0,E=E+Math.imul(Se,Be)|0,E=E+Math.imul(ke,we)|0,L=L+Math.imul(ke,Be)|0,M=M+Math.imul(be,re)|0,E=E+Math.imul(be,ye)|0,E=E+Math.imul(xe,re)|0,L=L+Math.imul(xe,ye)|0,M=M+Math.imul(ee,$e)|0,E=E+Math.imul(ee,Te)|0,E=E+Math.imul(ge,$e)|0,L=L+Math.imul(ge,Te)|0,M=M+Math.imul(he,Fe)|0,E=E+Math.imul(he,Ue)|0,E=E+Math.imul(te,Fe)|0,L=L+Math.imul(te,Ue)|0;var bt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(bt>>>26)|0,bt&=67108863,M=Math.imul(Ne,ht),E=Math.imul(Ne,nt),E=E+Math.imul(De,ht)|0,L=Math.imul(De,nt),M=M+Math.imul(ue,dt)|0,E=E+Math.imul(ue,it)|0,E=E+Math.imul(_e,dt)|0,L=L+Math.imul(_e,it)|0,M=M+Math.imul(Pe,pt)|0,E=E+Math.imul(Pe,rt)|0,E=E+Math.imul(me,pt)|0,L=L+Math.imul(me,rt)|0,M=M+Math.imul(Re,we)|0,E=E+Math.imul(Re,Be)|0,E=E+Math.imul(Le,we)|0,L=L+Math.imul(Le,Be)|0,M=M+Math.imul(Se,re)|0,E=E+Math.imul(Se,ye)|0,E=E+Math.imul(ke,re)|0,L=L+Math.imul(ke,ye)|0,M=M+Math.imul(be,$e)|0,E=E+Math.imul(be,Te)|0,E=E+Math.imul(xe,$e)|0,L=L+Math.imul(xe,Te)|0,M=M+Math.imul(ee,Fe)|0,E=E+Math.imul(ee,Ue)|0,E=E+Math.imul(ge,Fe)|0,L=L+Math.imul(ge,Ue)|0;var St=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(St>>>26)|0,St&=67108863,M=Math.imul(Ne,dt),E=Math.imul(Ne,it),E=E+Math.imul(De,dt)|0,L=Math.imul(De,it),M=M+Math.imul(ue,pt)|0,E=E+Math.imul(ue,rt)|0,E=E+Math.imul(_e,pt)|0,L=L+Math.imul(_e,rt)|0,M=M+Math.imul(Pe,we)|0,E=E+Math.imul(Pe,Be)|0,E=E+Math.imul(me,we)|0,L=L+Math.imul(me,Be)|0,M=M+Math.imul(Re,re)|0,E=E+Math.imul(Re,ye)|0,E=E+Math.imul(Le,re)|0,L=L+Math.imul(Le,ye)|0,M=M+Math.imul(Se,$e)|0,E=E+Math.imul(Se,Te)|0,E=E+Math.imul(ke,$e)|0,L=L+Math.imul(ke,Te)|0,M=M+Math.imul(be,Fe)|0,E=E+Math.imul(be,Ue)|0,E=E+Math.imul(xe,Fe)|0,L=L+Math.imul(xe,Ue)|0;var $t=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+($t>>>26)|0,$t&=67108863,M=Math.imul(Ne,pt),E=Math.imul(Ne,rt),E=E+Math.imul(De,pt)|0,L=Math.imul(De,rt),M=M+Math.imul(ue,we)|0,E=E+Math.imul(ue,Be)|0,E=E+Math.imul(_e,we)|0,L=L+Math.imul(_e,Be)|0,M=M+Math.imul(Pe,re)|0,E=E+Math.imul(Pe,ye)|0,E=E+Math.imul(me,re)|0,L=L+Math.imul(me,ye)|0,M=M+Math.imul(Re,$e)|0,E=E+Math.imul(Re,Te)|0,E=E+Math.imul(Le,$e)|0,L=L+Math.imul(Le,Te)|0,M=M+Math.imul(Se,Fe)|0,E=E+Math.imul(Se,Ue)|0,E=E+Math.imul(ke,Fe)|0,L=L+Math.imul(ke,Ue)|0;var wt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(wt>>>26)|0,wt&=67108863,M=Math.imul(Ne,we),E=Math.imul(Ne,Be),E=E+Math.imul(De,we)|0,L=Math.imul(De,Be),M=M+Math.imul(ue,re)|0,E=E+Math.imul(ue,ye)|0,E=E+Math.imul(_e,re)|0,L=L+Math.imul(_e,ye)|0,M=M+Math.imul(Pe,$e)|0,E=E+Math.imul(Pe,Te)|0,E=E+Math.imul(me,$e)|0,L=L+Math.imul(me,Te)|0,M=M+Math.imul(Re,Fe)|0,E=E+Math.imul(Re,Ue)|0,E=E+Math.imul(Le,Fe)|0,L=L+Math.imul(Le,Ue)|0;var Ge=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,M=Math.imul(Ne,re),E=Math.imul(Ne,ye),E=E+Math.imul(De,re)|0,L=Math.imul(De,ye),M=M+Math.imul(ue,$e)|0,E=E+Math.imul(ue,Te)|0,E=E+Math.imul(_e,$e)|0,L=L+Math.imul(_e,Te)|0,M=M+Math.imul(Pe,Fe)|0,E=E+Math.imul(Pe,Ue)|0,E=E+Math.imul(me,Fe)|0,L=L+Math.imul(me,Ue)|0;var Ye=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,M=Math.imul(Ne,$e),E=Math.imul(Ne,Te),E=E+Math.imul(De,$e)|0,L=Math.imul(De,Te),M=M+Math.imul(ue,Fe)|0,E=E+Math.imul(ue,Ue)|0,E=E+Math.imul(_e,Fe)|0,L=L+Math.imul(_e,Ue)|0;var ct=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(ct>>>26)|0,ct&=67108863,M=Math.imul(Ne,Fe),E=Math.imul(Ne,Ue),E=E+Math.imul(De,Fe)|0,L=Math.imul(De,Ue);var ot=(j+M|0)+((E&8191)<<13)|0;return j=(L+(E>>>13)|0)+(ot>>>26)|0,ot&=67108863,q[0]=ze,q[1]=He,q[2]=qe,q[3]=Xe,q[4]=Ze,q[5]=at,q[6]=Je,q[7]=Qe,q[8]=gt,q[9]=vt,q[10]=_t,q[11]=bt,q[12]=St,q[13]=$t,q[14]=wt,q[15]=Ge,q[16]=Ye,q[17]=ct,q[18]=ot,j!==0&&(q[19]=j,I.length++),I};Math.imul||(D=C);function z(k,y,A){A.negative=y.negative^k.negative,A.length=k.length+y.length;for(var I=0,P=0,H=0;H<A.length-1;H++){var q=P;P=0;for(var j=I&67108863,M=Math.min(H,y.length-1),E=Math.max(0,H-k.length+1);E<=M;E++){var L=H-E,le=k.words[L]|0,Q=y.words[E]|0,ce=le*Q,fe=ce&67108863;q=q+(ce/67108864|0)|0,fe=fe+j|0,j=fe&67108863,q=q+(fe>>>26)|0,P+=q>>>26,q&=67108863}A.words[H]=j,I=q,q=P}return I!==0?A.words[H]=I:A.length--,A._strip()}function U(k,y,A){return z(k,y,A)}c.prototype.mulTo=function(y,A){var I,P=this.length+y.length;return this.length===10&&y.length===10?I=D(this,y,A):P<63?I=C(this,y,A):P<1024?I=z(this,y,A):I=U(this,y,A),I},c.prototype.mul=function(y){var A=new c(null);return A.words=new Array(this.length+y.length),this.mulTo(y,A)},c.prototype.mulf=function(y){var A=new c(null);return A.words=new Array(this.length+y.length),U(this,y,A)},c.prototype.imul=function(y){return this.clone().mulTo(y,this)},c.prototype.imuln=function(y){var A=y<0;A&&(y=-y),a(typeof y=="number"),a(y<67108864);for(var I=0,P=0;P<this.length;P++){var H=(this.words[P]|0)*y,q=(H&67108863)+(I&67108863);I>>=26,I+=H/67108864|0,I+=q>>>26,this.words[P]=q&67108863}return I!==0&&(this.words[P]=I,this.length++),A?this.ineg():this},c.prototype.muln=function(y){return this.clone().imuln(y)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(y){var A=B(y);if(A.length===0)return new c(1);for(var I=this,P=0;P<A.length&&A[P]===0;P++,I=I.sqr());if(++P<A.length)for(var H=I.sqr();P<A.length;P++,H=H.sqr())A[P]!==0&&(I=I.mul(H));return I},c.prototype.iushln=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26,P=67108863>>>26-A<<26-A,H;if(A!==0){var q=0;for(H=0;H<this.length;H++){var j=this.words[H]&P,M=(this.words[H]|0)-j<<A;this.words[H]=M|q,q=j>>>26-A}q&&(this.words[H]=q,this.length++)}if(I!==0){for(H=this.length-1;H>=0;H--)this.words[H+I]=this.words[H];for(H=0;H<I;H++)this.words[H]=0;this.length+=I}return this._strip()},c.prototype.ishln=function(y){return a(this.negative===0),this.iushln(y)},c.prototype.iushrn=function(y,A,I){a(typeof y=="number"&&y>=0);var P;A?P=(A-A%26)/26:P=0;var H=y%26,q=Math.min((y-H)/26,this.length),j=67108863^67108863>>>H<<H,M=I;if(P-=q,P=Math.max(0,P),M){for(var E=0;E<q;E++)M.words[E]=this.words[E];M.length=q}if(q!==0)if(this.length>q)for(this.length-=q,E=0;E<this.length;E++)this.words[E]=this.words[E+q];else this.words[0]=0,this.length=1;var L=0;for(E=this.length-1;E>=0&&(L!==0||E>=P);E--){var le=this.words[E]|0;this.words[E]=L<<26-H|le>>>H,L=le&j}return M&&L!==0&&(M.words[M.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},c.prototype.ishrn=function(y,A,I){return a(this.negative===0),this.iushrn(y,A,I)},c.prototype.shln=function(y){return this.clone().ishln(y)},c.prototype.ushln=function(y){return this.clone().iushln(y)},c.prototype.shrn=function(y){return this.clone().ishrn(y)},c.prototype.ushrn=function(y){return this.clone().iushrn(y)},c.prototype.testn=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26,P=1<<A;if(this.length<=I)return!1;var H=this.words[I];return!!(H&P)},c.prototype.imaskn=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=I)return this;if(A!==0&&I++,this.length=Math.min(I,this.length),A!==0){var P=67108863^67108863>>>A<<A;this.words[this.length-1]&=P}return this._strip()},c.prototype.maskn=function(y){return this.clone().imaskn(y)},c.prototype.iaddn=function(y){return a(typeof y=="number"),a(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<=y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},c.prototype._iaddn=function(y){this.words[0]+=y;for(var A=0;A<this.length&&this.words[A]>=67108864;A++)this.words[A]-=67108864,A===this.length-1?this.words[A+1]=1:this.words[A+1]++;return this.length=Math.max(this.length,A+1),this},c.prototype.isubn=function(y){if(a(typeof y=="number"),a(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var A=0;A<this.length&&this.words[A]<0;A++)this.words[A]+=67108864,this.words[A+1]-=1;return this._strip()},c.prototype.addn=function(y){return this.clone().iaddn(y)},c.prototype.subn=function(y){return this.clone().isubn(y)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(y,A,I){var P=y.length+I,H;this._expand(P);var q,j=0;for(H=0;H<y.length;H++){q=(this.words[H+I]|0)+j;var M=(y.words[H]|0)*A;q-=M&67108863,j=(q>>26)-(M/67108864|0),this.words[H+I]=q&67108863}for(;H<this.length-I;H++)q=(this.words[H+I]|0)+j,j=q>>26,this.words[H+I]=q&67108863;if(j===0)return this._strip();for(a(j===-1),j=0,H=0;H<this.length;H++)q=-(this.words[H]|0)+j,j=q>>26,this.words[H]=q&67108863;return this.negative=1,this._strip()},c.prototype._wordDiv=function(y,A){var I=this.length-y.length,P=this.clone(),H=y,q=H.words[H.length-1]|0,j=this._countBits(q);I=26-j,I!==0&&(H=H.ushln(I),P.iushln(I),q=H.words[H.length-1]|0);var M=P.length-H.length,E;if(A!=="mod"){E=new c(null),E.length=M+1,E.words=new Array(E.length);for(var L=0;L<E.length;L++)E.words[L]=0}var le=P.clone()._ishlnsubmul(H,1,M);le.negative===0&&(P=le,E&&(E.words[M]=1));for(var Q=M-1;Q>=0;Q--){var ce=(P.words[H.length+Q]|0)*67108864+(P.words[H.length+Q-1]|0);for(ce=Math.min(ce/q|0,67108863),P._ishlnsubmul(H,ce,Q);P.negative!==0;)ce--,P.negative=0,P._ishlnsubmul(H,1,Q),P.isZero()||(P.negative^=1);E&&(E.words[Q]=ce)}return E&&E._strip(),P._strip(),A!=="div"&&I!==0&&P.iushrn(I),{div:E||null,mod:P}},c.prototype.divmod=function(y,A,I){if(a(!y.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var P,H,q;return this.negative!==0&&y.negative===0?(q=this.neg().divmod(y,A),A!=="mod"&&(P=q.div.neg()),A!=="div"&&(H=q.mod.neg(),I&&H.negative!==0&&H.iadd(y)),{div:P,mod:H}):this.negative===0&&y.negative!==0?(q=this.divmod(y.neg(),A),A!=="mod"&&(P=q.div.neg()),{div:P,mod:q.mod}):this.negative&y.negative?(q=this.neg().divmod(y.neg(),A),A!=="div"&&(H=q.mod.neg(),I&&H.negative!==0&&H.isub(y)),{div:q.div,mod:H}):y.length>this.length||this.cmp(y)<0?{div:new c(0),mod:this}:y.length===1?A==="div"?{div:this.divn(y.words[0]),mod:null}:A==="mod"?{div:null,mod:new c(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new c(this.modrn(y.words[0]))}:this._wordDiv(y,A)},c.prototype.div=function(y){return this.divmod(y,"div",!1).div},c.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},c.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},c.prototype.divRound=function(y){var A=this.divmod(y);if(A.mod.isZero())return A.div;var I=A.div.negative!==0?A.mod.isub(y):A.mod,P=y.ushrn(1),H=y.andln(1),q=I.cmp(P);return q<0||H===1&&q===0?A.div:A.div.negative!==0?A.div.isubn(1):A.div.iaddn(1)},c.prototype.modrn=function(y){var A=y<0;A&&(y=-y),a(y<=67108863);for(var I=(1<<26)%y,P=0,H=this.length-1;H>=0;H--)P=(I*P+(this.words[H]|0))%y;return A?-P:P},c.prototype.modn=function(y){return this.modrn(y)},c.prototype.idivn=function(y){var A=y<0;A&&(y=-y),a(y<=67108863);for(var I=0,P=this.length-1;P>=0;P--){var H=(this.words[P]|0)+I*67108864;this.words[P]=H/y|0,I=H%y}return this._strip(),A?this.ineg():this},c.prototype.divn=function(y){return this.clone().idivn(y)},c.prototype.egcd=function(y){a(y.negative===0),a(!y.isZero());var A=this,I=y.clone();A.negative!==0?A=A.umod(y):A=A.clone();for(var P=new c(1),H=new c(0),q=new c(0),j=new c(1),M=0;A.isEven()&&I.isEven();)A.iushrn(1),I.iushrn(1),++M;for(var E=I.clone(),L=A.clone();!A.isZero();){for(var le=0,Q=1;!(A.words[0]&Q)&&le<26;++le,Q<<=1);if(le>0)for(A.iushrn(le);le-- >0;)(P.isOdd()||H.isOdd())&&(P.iadd(E),H.isub(L)),P.iushrn(1),H.iushrn(1);for(var ce=0,fe=1;!(I.words[0]&fe)&&ce<26;++ce,fe<<=1);if(ce>0)for(I.iushrn(ce);ce-- >0;)(q.isOdd()||j.isOdd())&&(q.iadd(E),j.isub(L)),q.iushrn(1),j.iushrn(1);A.cmp(I)>=0?(A.isub(I),P.isub(q),H.isub(j)):(I.isub(A),q.isub(P),j.isub(H))}return{a:q,b:j,gcd:I.iushln(M)}},c.prototype._invmp=function(y){a(y.negative===0),a(!y.isZero());var A=this,I=y.clone();A.negative!==0?A=A.umod(y):A=A.clone();for(var P=new c(1),H=new c(0),q=I.clone();A.cmpn(1)>0&&I.cmpn(1)>0;){for(var j=0,M=1;!(A.words[0]&M)&&j<26;++j,M<<=1);if(j>0)for(A.iushrn(j);j-- >0;)P.isOdd()&&P.iadd(q),P.iushrn(1);for(var E=0,L=1;!(I.words[0]&L)&&E<26;++E,L<<=1);if(E>0)for(I.iushrn(E);E-- >0;)H.isOdd()&&H.iadd(q),H.iushrn(1);A.cmp(I)>=0?(A.isub(I),P.isub(H)):(I.isub(A),H.isub(P))}var le;return A.cmpn(1)===0?le=P:le=H,le.cmpn(0)<0&&le.iadd(y),le},c.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var A=this.clone(),I=y.clone();A.negative=0,I.negative=0;for(var P=0;A.isEven()&&I.isEven();P++)A.iushrn(1),I.iushrn(1);do{for(;A.isEven();)A.iushrn(1);for(;I.isEven();)I.iushrn(1);var H=A.cmp(I);if(H<0){var q=A;A=I,I=q}else if(H===0||I.cmpn(1)===0)break;A.isub(I)}while(!0);return I.iushln(P)},c.prototype.invm=function(y){return this.egcd(y).a.umod(y)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(y){return this.words[0]&y},c.prototype.bincn=function(y){a(typeof y=="number");var A=y%26,I=(y-A)/26,P=1<<A;if(this.length<=I)return this._expand(I+1),this.words[I]|=P,this;for(var H=P,q=I;H!==0&&q<this.length;q++){var j=this.words[q]|0;j+=H,H=j>>>26,j&=67108863,this.words[q]=j}return H!==0&&(this.words[q]=H,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(y){var A=y<0;if(this.negative!==0&&!A)return-1;if(this.negative===0&&A)return 1;this._strip();var I;if(this.length>1)I=1;else{A&&(y=-y),a(y<=67108863,"Number is too big");var P=this.words[0]|0;I=P===y?0:P<y?-1:1}return this.negative!==0?-I|0:I},c.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var A=this.ucmp(y);return this.negative!==0?-A|0:A},c.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var A=0,I=this.length-1;I>=0;I--){var P=this.words[I]|0,H=y.words[I]|0;if(P!==H){P<H?A=-1:P>H&&(A=1);break}}return A},c.prototype.gtn=function(y){return this.cmpn(y)===1},c.prototype.gt=function(y){return this.cmp(y)===1},c.prototype.gten=function(y){return this.cmpn(y)>=0},c.prototype.gte=function(y){return this.cmp(y)>=0},c.prototype.ltn=function(y){return this.cmpn(y)===-1},c.prototype.lt=function(y){return this.cmp(y)===-1},c.prototype.lten=function(y){return this.cmpn(y)<=0},c.prototype.lte=function(y){return this.cmp(y)<=0},c.prototype.eqn=function(y){return this.cmpn(y)===0},c.prototype.eq=function(y){return this.cmp(y)===0},c.red=function(y){return new ie(y)},c.prototype.toRed=function(y){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(y){return this.red=y,this},c.prototype.forceRed=function(y){return a(!this.red,"Already a number in reduction context"),this._forceRed(y)},c.prototype.redAdd=function(y){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},c.prototype.redIAdd=function(y){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},c.prototype.redSub=function(y){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},c.prototype.redISub=function(y){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},c.prototype.redShl=function(y){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},c.prototype.redMul=function(y){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},c.prototype.redIMul=function(y){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(y){return a(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var Y={k256:null,p224:null,p192:null,p25519:null};function X(k,y){this.name=k,this.p=new c(y,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var y=new c(null);return y.words=new Array(Math.ceil(this.n/13)),y},X.prototype.ireduce=function(y){var A=y,I;do this.split(A,this.tmp),A=this.imulK(A),A=A.iadd(this.tmp),I=A.bitLength();while(I>this.n);var P=I<this.n?-1:A.ucmp(this.p);return P===0?(A.words[0]=0,A.length=1):P>0?A.isub(this.p):A.strip!==void 0?A.strip():A._strip(),A},X.prototype.split=function(y,A){y.iushrn(this.n,0,A)},X.prototype.imulK=function(y){return y.imul(this.k)};function O(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(O,X),O.prototype.split=function(y,A){for(var I=4194303,P=Math.min(y.length,9),H=0;H<P;H++)A.words[H]=y.words[H];if(A.length=P,y.length<=9){y.words[0]=0,y.length=1;return}var q=y.words[9];for(A.words[A.length++]=q&I,H=10;H<y.length;H++){var j=y.words[H]|0;y.words[H-10]=(j&I)<<4|q>>>22,q=j}q>>>=22,y.words[H-10]=q,q===0&&y.length>10?y.length-=10:y.length-=9},O.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var A=0,I=0;I<y.length;I++){var P=y.words[I]|0;A+=P*977,y.words[I]=A&67108863,A=P*64+(A/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function J(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(J,X);function Z(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Z,X);function se(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(se,X),se.prototype.imulK=function(y){for(var A=0,I=0;I<y.length;I++){var P=(y.words[I]|0)*19+A,H=P&67108863;P>>>=26,y.words[I]=H,A=P}return A!==0&&(y.words[y.length++]=A),y},c._prime=function(y){if(Y[y])return Y[y];var A;if(y==="k256")A=new O;else if(y==="p224")A=new J;else if(y==="p192")A=new Z;else if(y==="p25519")A=new se;else throw new Error("Unknown prime "+y);return Y[y]=A,A};function ie(k){if(typeof k=="string"){var y=c._prime(k);this.m=y.p,this.prime=y}else a(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}ie.prototype._verify1=function(y){a(y.negative===0,"red works only with positives"),a(y.red,"red works only with red numbers")},ie.prototype._verify2=function(y,A){a((y.negative|A.negative)===0,"red works only with positives"),a(y.red&&y.red===A.red,"red works only with red numbers")},ie.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(b(y,y.umod(this.m)._forceRed(this)),y)},ie.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},ie.prototype.add=function(y,A){this._verify2(y,A);var I=y.add(A);return I.cmp(this.m)>=0&&I.isub(this.m),I._forceRed(this)},ie.prototype.iadd=function(y,A){this._verify2(y,A);var I=y.iadd(A);return I.cmp(this.m)>=0&&I.isub(this.m),I},ie.prototype.sub=function(y,A){this._verify2(y,A);var I=y.sub(A);return I.cmpn(0)<0&&I.iadd(this.m),I._forceRed(this)},ie.prototype.isub=function(y,A){this._verify2(y,A);var I=y.isub(A);return I.cmpn(0)<0&&I.iadd(this.m),I},ie.prototype.shl=function(y,A){return this._verify1(y),this.imod(y.ushln(A))},ie.prototype.imul=function(y,A){return this._verify2(y,A),this.imod(y.imul(A))},ie.prototype.mul=function(y,A){return this._verify2(y,A),this.imod(y.mul(A))},ie.prototype.isqr=function(y){return this.imul(y,y.clone())},ie.prototype.sqr=function(y){return this.mul(y,y)},ie.prototype.sqrt=function(y){if(y.isZero())return y.clone();var A=this.m.andln(3);if(a(A%2===1),A===3){var I=this.m.add(new c(1)).iushrn(2);return this.pow(y,I)}for(var P=this.m.subn(1),H=0;!P.isZero()&&P.andln(1)===0;)H++,P.iushrn(1);a(!P.isZero());var q=new c(1).toRed(this),j=q.redNeg(),M=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new c(2*E*E).toRed(this);this.pow(E,M).cmp(j)!==0;)E.redIAdd(j);for(var L=this.pow(E,P),le=this.pow(y,P.addn(1).iushrn(1)),Q=this.pow(y,P),ce=H;Q.cmp(q)!==0;){for(var fe=Q,oe=0;fe.cmp(q)!==0;oe++)fe=fe.redSqr();a(oe<ce);var de=this.pow(L,new c(1).iushln(ce-oe-1));le=le.redMul(de),L=de.redSqr(),Q=Q.redMul(L),ce=oe}return le},ie.prototype.invm=function(y){var A=y._invmp(this.m);return A.negative!==0?(A.negative=0,this.imod(A).redNeg()):this.imod(A)},ie.prototype.pow=function(y,A){if(A.isZero())return new c(1).toRed(this);if(A.cmpn(1)===0)return y.clone();var I=4,P=new Array(1<<I);P[0]=new c(1).toRed(this),P[1]=y;for(var H=2;H<P.length;H++)P[H]=this.mul(P[H-1],y);var q=P[0],j=0,M=0,E=A.bitLength()%26;for(E===0&&(E=26),H=A.length-1;H>=0;H--){for(var L=A.words[H],le=E-1;le>=0;le--){var Q=L>>le&1;if(q!==P[0]&&(q=this.sqr(q)),Q===0&&j===0){M=0;continue}j<<=1,j|=Q,M++,!(M!==I&&(H!==0||le!==0))&&(q=this.mul(q,P[j]),M=0,j=0)}E=26}return q},ie.prototype.convertTo=function(y){var A=y.umod(this.m);return A===y?A.clone():A},ie.prototype.convertFrom=function(y){var A=y.clone();return A.red=null,A},c.mont=function(y){return new F(y)};function F(k){ie.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(F,ie),F.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},F.prototype.convertFrom=function(y){var A=this.imod(y.mul(this.rinv));return A.red=null,A},F.prototype.imul=function(y,A){if(y.isZero()||A.isZero())return y.words[0]=0,y.length=1,y;var I=y.imul(A),P=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=I.isub(P).iushrn(this.shift),q=H;return H.cmp(this.m)>=0?q=H.isub(this.m):H.cmpn(0)<0&&(q=H.iadd(this.m)),q._forceRed(this)},F.prototype.mul=function(y,A){if(y.isZero()||A.isZero())return new c(0)._forceRed(this);var I=y.mul(A),P=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=I.isub(P).iushrn(this.shift),q=H;return H.cmp(this.m)>=0?q=H.isub(this.m):H.cmpn(0)<0&&(q=H.iadd(this.m)),q._forceRed(this)},F.prototype.invm=function(y){var A=this.imod(y._invmp(this.m).mul(this.r2));return A._forceRed(this)}})(t,commonjsGlobal)})(bn$2);var asn1$6={},asn1$5={},api$2={},encoders={},buffer$2=buffer$3,Buffer$e=buffer$2.Buffer,safer={},key$1;for(key$1 in buffer$2)buffer$2.hasOwnProperty(key$1)&&(key$1==="SlowBuffer"||key$1==="Buffer"||(safer[key$1]=buffer$2[key$1]));var Safer=safer.Buffer={};for(key$1 in Buffer$e)Buffer$e.hasOwnProperty(key$1)&&(key$1==="allocUnsafe"||key$1==="allocUnsafeSlow"||(Safer[key$1]=Buffer$e[key$1]));safer.Buffer.prototype=Buffer$e.prototype;(!Safer.from||Safer.from===Uint8Array.from)&&(Safer.from=function(t,e,n){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Buffer$e(t,e,n)});Safer.alloc||(Safer.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var a=Buffer$e(t);return!e||e.length===0?a.fill(0):typeof n=="string"?a.fill(e,n):a.fill(e),a});if(!safer.kStringMaxLength)try{safer.kStringMaxLength=browser$1$1.binding("buffer").kStringMaxLength}catch{}safer.constants||(safer.constants={MAX_LENGTH:safer.kMaxLength},safer.kStringMaxLength&&(safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength));var safer_1=safer,reporter={};const inherits$7=inherits_browserExports;function Reporter$2(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}reporter.Reporter=Reporter$2;Reporter$2.prototype.isError=function(e){return e instanceof ReporterError};Reporter$2.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Reporter$2.prototype.restore=function(e){const n=this._reporterState;n.obj=e.obj,n.path=n.path.slice(0,e.pathLen)};Reporter$2.prototype.enterKey=function(e){return this._reporterState.path.push(e)};Reporter$2.prototype.exitKey=function(e){const n=this._reporterState;n.path=n.path.slice(0,e-1)};Reporter$2.prototype.leaveKey=function(e,n,a){const o=this._reporterState;this.exitKey(e),o.obj!==null&&(o.obj[n]=a)};Reporter$2.prototype.path=function(){return this._reporterState.path.join("/")};Reporter$2.prototype.enterObject=function(){const e=this._reporterState,n=e.obj;return e.obj={},n};Reporter$2.prototype.leaveObject=function(e){const n=this._reporterState,a=n.obj;return n.obj=e,a};Reporter$2.prototype.error=function(e){let n;const a=this._reporterState,o=e instanceof ReporterError;if(o?n=e:n=new ReporterError(a.path.map(function(c){return"["+JSON.stringify(c)+"]"}).join(""),e.message||e,e.stack),!a.options.partial)throw n;return o||a.errors.push(n),n};Reporter$2.prototype.wrapResult=function(e){const n=this._reporterState;return n.options.partial?{result:this.isError(e)?null:e,errors:n.errors}:e};function ReporterError(t,e){this.path=t,this.rethrow(e)}inherits$7(ReporterError,Error);ReporterError.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(n){this.stack=n.stack}return this};var buffer$1={};const inherits$6=inherits_browserExports,Reporter$1=reporter.Reporter,Buffer$d=safer_1.Buffer;function DecoderBuffer$2(t,e){if(Reporter$1.call(this,e),!Buffer$d.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}inherits$6(DecoderBuffer$2,Reporter$1);buffer$1.DecoderBuffer=DecoderBuffer$2;DecoderBuffer$2.isDecoderBuffer=function(e){return e instanceof DecoderBuffer$2?!0:typeof e=="object"&&Buffer$d.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};DecoderBuffer$2.prototype.save=function(){return{offset:this.offset,reporter:Reporter$1.prototype.save.call(this)}};DecoderBuffer$2.prototype.restore=function(e){const n=new DecoderBuffer$2(this.base);return n.offset=e.offset,n.length=this.offset,this.offset=e.offset,Reporter$1.prototype.restore.call(this,e.reporter),n};DecoderBuffer$2.prototype.isEmpty=function(){return this.offset===this.length};DecoderBuffer$2.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};DecoderBuffer$2.prototype.skip=function(e,n){if(!(this.offset+e<=this.length))return this.error(n||"DecoderBuffer overrun");const a=new DecoderBuffer$2(this.base);return a._reporterState=this._reporterState,a.offset=this.offset,a.length=this.offset+e,this.offset+=e,a};DecoderBuffer$2.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function EncoderBuffer$1(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(n){return EncoderBuffer$1.isEncoderBuffer(n)||(n=new EncoderBuffer$1(n,e)),this.length+=n.length,n},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=Buffer$d.byteLength(t);else if(Buffer$d.isBuffer(t))this.value=t,this.length=t.length;else return e.error("Unsupported type: "+typeof t)}buffer$1.EncoderBuffer=EncoderBuffer$1;EncoderBuffer$1.isEncoderBuffer=function(e){return e instanceof EncoderBuffer$1?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};EncoderBuffer$1.prototype.join=function(e,n){return e||(e=Buffer$d.alloc(this.length)),n||(n=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(a){a.join(e,n),n+=a.length}):(typeof this.value=="number"?e[n]=this.value:typeof this.value=="string"?e.write(this.value,n):Buffer$d.isBuffer(this.value)&&this.value.copy(e,n),n+=this.length)),e};const Reporter=reporter.Reporter,EncoderBuffer=buffer$1.EncoderBuffer,DecoderBuffer$1=buffer$1.DecoderBuffer,assert$7=minimalisticAssert$1,tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods$1=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags),overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node$2(t,e,n){const a={};this._baseState=a,a.name=n,a.enc=t,a.parent=e||null,a.children=null,a.tag=null,a.args=null,a.reverseArgs=null,a.choice=null,a.optional=!1,a.any=!1,a.obj=!1,a.use=null,a.useDecoder=null,a.key=null,a.default=null,a.explicit=null,a.implicit=null,a.contains=null,a.parent||(a.children=[],this._wrap())}var node$1=Node$2;const stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node$2.prototype.clone=function(){const e=this._baseState,n={};stateProps.forEach(function(o){n[o]=e[o]});const a=new this.constructor(n.parent);return a._baseState=n,a};Node$2.prototype._wrap=function(){const e=this._baseState;methods$1.forEach(function(n){this[n]=function(){const o=new this.constructor(this);return e.children.push(o),o[n].apply(o,arguments)}},this)};Node$2.prototype._init=function(e){const n=this._baseState;assert$7(n.parent===null),e.call(this),n.children=n.children.filter(function(a){return a._baseState.parent===this},this),assert$7.equal(n.children.length,1,"Root node can have only one child")};Node$2.prototype._useArgs=function(e){const n=this._baseState,a=e.filter(function(o){return o instanceof this.constructor},this);e=e.filter(function(o){return!(o instanceof this.constructor)},this),a.length!==0&&(assert$7(n.children===null),n.children=a,a.forEach(function(o){o._baseState.parent=this},this)),e.length!==0&&(assert$7(n.args===null),n.args=e,n.reverseArgs=e.map(function(o){if(typeof o!="object"||o.constructor!==Object)return o;const c={};return Object.keys(o).forEach(function(l){l==(l|0)&&(l|=0);const u=o[l];c[u]=l}),c}))};overrided.forEach(function(t){Node$2.prototype[t]=function(){const n=this._baseState;throw new Error(t+" not implemented for encoding: "+n.enc)}});tags.forEach(function(t){Node$2.prototype[t]=function(){const n=this._baseState,a=Array.prototype.slice.call(arguments);return assert$7(n.tag===null),n.tag=t,this._useArgs(a),this}});Node$2.prototype.use=function(e){assert$7(e);const n=this._baseState;return assert$7(n.use===null),n.use=e,this};Node$2.prototype.optional=function(){const e=this._baseState;return e.optional=!0,this};Node$2.prototype.def=function(e){const n=this._baseState;return assert$7(n.default===null),n.default=e,n.optional=!0,this};Node$2.prototype.explicit=function(e){const n=this._baseState;return assert$7(n.explicit===null&&n.implicit===null),n.explicit=e,this};Node$2.prototype.implicit=function(e){const n=this._baseState;return assert$7(n.explicit===null&&n.implicit===null),n.implicit=e,this};Node$2.prototype.obj=function(){const e=this._baseState,n=Array.prototype.slice.call(arguments);return e.obj=!0,n.length!==0&&this._useArgs(n),this};Node$2.prototype.key=function(e){const n=this._baseState;return assert$7(n.key===null),n.key=e,this};Node$2.prototype.any=function(){const e=this._baseState;return e.any=!0,this};Node$2.prototype.choice=function(e){const n=this._baseState;return assert$7(n.choice===null),n.choice=e,this._useArgs(Object.keys(e).map(function(a){return e[a]})),this};Node$2.prototype.contains=function(e){const n=this._baseState;return assert$7(n.use===null),n.contains=e,this};Node$2.prototype._decode=function(e,n){const a=this._baseState;if(a.parent===null)return e.wrapResult(a.children[0]._decode(e,n));let o=a.default,c=!0,l=null;if(a.key!==null&&(l=e.enterKey(a.key)),a.optional){let d=null;if(a.explicit!==null?d=a.explicit:a.implicit!==null?d=a.implicit:a.tag!==null&&(d=a.tag),d===null&&!a.any){const m=e.save();try{a.choice===null?this._decodeGeneric(a.tag,e,n):this._decodeChoice(e,n),c=!0}catch{c=!1}e.restore(m)}else if(c=this._peekTag(e,d,a.any),e.isError(c))return c}let u;if(a.obj&&c&&(u=e.enterObject()),c){if(a.explicit!==null){const m=this._decodeTag(e,a.explicit);if(e.isError(m))return m;e=m}const d=e.offset;if(a.use===null&&a.choice===null){let m;a.any&&(m=e.save());const b=this._decodeTag(e,a.implicit!==null?a.implicit:a.tag,a.any);if(e.isError(b))return b;a.any?o=e.raw(m):e=b}if(n&&n.track&&a.tag!==null&&n.track(e.path(),d,e.length,"tagged"),n&&n.track&&a.tag!==null&&n.track(e.path(),e.offset,e.length,"content"),a.any||(a.choice===null?o=this._decodeGeneric(a.tag,e,n):o=this._decodeChoice(e,n)),e.isError(o))return o;if(!a.any&&a.choice===null&&a.children!==null&&a.children.forEach(function(b){b._decode(e,n)}),a.contains&&(a.tag==="octstr"||a.tag==="bitstr")){const m=new DecoderBuffer$1(o);o=this._getUse(a.contains,e._reporterState.obj)._decode(m,n)}}return a.obj&&c&&(o=e.leaveObject(u)),a.key!==null&&(o!==null||c===!0)?e.leaveKey(l,a.key,o):l!==null&&e.exitKey(l),o};Node$2.prototype._decodeGeneric=function(e,n,a){const o=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(n,e,o.args[0],a):/str$/.test(e)?this._decodeStr(n,e,a):e==="objid"&&o.args?this._decodeObjid(n,o.args[0],o.args[1],a):e==="objid"?this._decodeObjid(n,null,null,a):e==="gentime"||e==="utctime"?this._decodeTime(n,e,a):e==="null_"?this._decodeNull(n,a):e==="bool"?this._decodeBool(n,a):e==="objDesc"?this._decodeStr(n,e,a):e==="int"||e==="enum"?this._decodeInt(n,o.args&&o.args[0],a):o.use!==null?this._getUse(o.use,n._reporterState.obj)._decode(n,a):n.error("unknown tag: "+e)};Node$2.prototype._getUse=function(e,n){const a=this._baseState;return a.useDecoder=this._use(e,n),assert$7(a.useDecoder._baseState.parent===null),a.useDecoder=a.useDecoder._baseState.children[0],a.implicit!==a.useDecoder._baseState.implicit&&(a.useDecoder=a.useDecoder.clone(),a.useDecoder._baseState.implicit=a.implicit),a.useDecoder};Node$2.prototype._decodeChoice=function(e,n){const a=this._baseState;let o=null,c=!1;return Object.keys(a.choice).some(function(l){const u=e.save(),d=a.choice[l];try{const m=d._decode(e,n);if(e.isError(m))return!1;o={type:l,value:m},c=!0}catch{return e.restore(u),!1}return!0},this),c?o:e.error("Choice not matched")};Node$2.prototype._createEncoderBuffer=function(e){return new EncoderBuffer(e,this.reporter)};Node$2.prototype._encode=function(e,n,a){const o=this._baseState;if(o.default!==null&&o.default===e)return;const c=this._encodeValue(e,n,a);if(c!==void 0&&!this._skipDefault(c,n,a))return c};Node$2.prototype._encodeValue=function(e,n,a){const o=this._baseState;if(o.parent===null)return o.children[0]._encode(e,n||new Reporter);let c=null;if(this.reporter=n,o.optional&&e===void 0)if(o.default!==null)e=o.default;else return;let l=null,u=!1;if(o.any)c=this._createEncoderBuffer(e);else if(o.choice)c=this._encodeChoice(e,n);else if(o.contains)l=this._getUse(o.contains,a)._encode(e,n),u=!0;else if(o.children)l=o.children.map(function(d){if(d._baseState.tag==="null_")return d._encode(null,n,e);if(d._baseState.key===null)return n.error("Child should have a key");const m=n.enterKey(d._baseState.key);if(typeof e!="object")return n.error("Child expected, but input is not object");const b=d._encode(e[d._baseState.key],n,e);return n.leaveKey(m),b},this).filter(function(d){return d}),l=this._createEncoderBuffer(l);else if(o.tag==="seqof"||o.tag==="setof"){if(!(o.args&&o.args.length===1))return n.error("Too many args for : "+o.tag);if(!Array.isArray(e))return n.error("seqof/setof, but data is not Array");const d=this.clone();d._baseState.implicit=null,l=this._createEncoderBuffer(e.map(function(m){const b=this._baseState;return this._getUse(b.args[0],e)._encode(m,n)},d))}else o.use!==null?c=this._getUse(o.use,a)._encode(e,n):(l=this._encodePrimitive(o.tag,e),u=!0);if(!o.any&&o.choice===null){const d=o.implicit!==null?o.implicit:o.tag,m=o.implicit===null?"universal":"context";d===null?o.use===null&&n.error("Tag could be omitted only for .use()"):o.use===null&&(c=this._encodeComposite(d,u,m,l))}return o.explicit!==null&&(c=this._encodeComposite(o.explicit,!1,"context",c)),c};Node$2.prototype._encodeChoice=function(e,n){const a=this._baseState,o=a.choice[e.type];return o||assert$7(!1,e.type+" not found in "+JSON.stringify(Object.keys(a.choice))),o._encode(e.value,n)};Node$2.prototype._encodePrimitive=function(e,n){const a=this._baseState;if(/str$/.test(e))return this._encodeStr(n,e);if(e==="objid"&&a.args)return this._encodeObjid(n,a.reverseArgs[0],a.args[1]);if(e==="objid")return this._encodeObjid(n,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(n,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(n,a.args&&a.reverseArgs[0]);if(e==="bool")return this._encodeBool(n);if(e==="objDesc")return this._encodeStr(n,e);throw new Error("Unsupported tag: "+e)};Node$2.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};Node$2.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var der$2={};(function(t){function e(n){const a={};return Object.keys(n).forEach(function(o){(o|0)==o&&(o=o|0);const c=n[o];a[c]=o}),a}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e(t.tag)})(der$2);const inherits$5=inherits_browserExports,Buffer$c=safer_1.Buffer,Node$1=node$1,der$1=der$2;function DEREncoder$1(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new DERNode$1,this.tree._init(t.body)}var der_1$1=DEREncoder$1;DEREncoder$1.prototype.encode=function(e,n){return this.tree._encode(e,n).join()};function DERNode$1(t){Node$1.call(this,"der",t)}inherits$5(DERNode$1,Node$1);DERNode$1.prototype._encodeComposite=function(e,n,a,o){const c=encodeTag$1(e,n,a,this.reporter);if(o.length<128){const d=Buffer$c.alloc(2);return d[0]=c,d[1]=o.length,this._createEncoderBuffer([d,o])}let l=1;for(let d=o.length;d>=256;d>>=8)l++;const u=Buffer$c.alloc(1+1+l);u[0]=c,u[1]=128|l;for(let d=1+l,m=o.length;m>0;d--,m>>=8)u[d]=m&255;return this._createEncoderBuffer([u,o])};DERNode$1.prototype._encodeStr=function(e,n){if(n==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(n==="bmpstr"){const a=Buffer$c.alloc(e.length*2);for(let o=0;o<e.length;o++)a.writeUInt16BE(e.charCodeAt(o),o*2);return this._createEncoderBuffer(a)}else return n==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):n==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(n)?this._createEncoderBuffer(e):n==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+n+" unsupported")};DERNode$1.prototype._encodeObjid=function(e,n,a){if(typeof e=="string"){if(!n)return this.reporter.error("string objid given, but no values map found");if(!n.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=n[e].split(/[\s.]+/g);for(let u=0;u<e.length;u++)e[u]|=0}else if(Array.isArray(e)){e=e.slice();for(let u=0;u<e.length;u++)e[u]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!a){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let o=0;for(let u=0;u<e.length;u++){let d=e[u];for(o++;d>=128;d>>=7)o++}const c=Buffer$c.alloc(o);let l=c.length-1;for(let u=e.length-1;u>=0;u--){let d=e[u];for(c[l--]=d&127;(d>>=7)>0;)c[l--]=128|d&127}return this._createEncoderBuffer(c)};function two(t){return t<10?"0"+t:t}DERNode$1.prototype._encodeTime=function(e,n){let a;const o=new Date(e);return n==="gentime"?a=[two(o.getUTCFullYear()),two(o.getUTCMonth()+1),two(o.getUTCDate()),two(o.getUTCHours()),two(o.getUTCMinutes()),two(o.getUTCSeconds()),"Z"].join(""):n==="utctime"?a=[two(o.getUTCFullYear()%100),two(o.getUTCMonth()+1),two(o.getUTCDate()),two(o.getUTCHours()),two(o.getUTCMinutes()),two(o.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+n+" time is not supported yet"),this._encodeStr(a,"octstr")};DERNode$1.prototype._encodeNull=function(){return this._createEncoderBuffer("")};DERNode$1.prototype._encodeInt=function(e,n){if(typeof e=="string"){if(!n)return this.reporter.error("String int or enum given, but no values map");if(!n.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=n[e]}if(typeof e!="number"&&!Buffer$c.isBuffer(e)){const c=e.toArray();!e.sign&&c[0]&128&&c.unshift(0),e=Buffer$c.from(c)}if(Buffer$c.isBuffer(e)){let c=e.length;e.length===0&&c++;const l=Buffer$c.alloc(c);return e.copy(l),e.length===0&&(l[0]=0),this._createEncoderBuffer(l)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let a=1;for(let c=e;c>=256;c>>=8)a++;const o=new Array(a);for(let c=o.length-1;c>=0;c--)o[c]=e&255,e>>=8;return o[0]&128&&o.unshift(0),this._createEncoderBuffer(Buffer$c.from(o))};DERNode$1.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};DERNode$1.prototype._use=function(e,n){return typeof e=="function"&&(e=e(n)),e._getEncoder("der").tree};DERNode$1.prototype._skipDefault=function(e,n,a){const o=this._baseState;let c;if(o.default===null)return!1;const l=e.join();if(o.defaultBuffer===void 0&&(o.defaultBuffer=this._encodeValue(o.default,n,a).join()),l.length!==o.defaultBuffer.length)return!1;for(c=0;c<l.length;c++)if(l[c]!==o.defaultBuffer[c])return!1;return!0};function encodeTag$1(t,e,n,a){let o;if(t==="seqof"?t="seq":t==="setof"&&(t="set"),der$1.tagByName.hasOwnProperty(t))o=der$1.tagByName[t];else if(typeof t=="number"&&(t|0)===t)o=t;else return a.error("Unknown tag: "+t);return o>=31?a.error("Multi-octet tag encoding unsupported"):(e||(o|=32),o|=der$1.tagClassByName[n||"universal"]<<6,o)}const inherits$4=inherits_browserExports,DEREncoder=der_1$1;function PEMEncoder(t){DEREncoder.call(this,t),this.enc="pem"}inherits$4(PEMEncoder,DEREncoder);var pem$2=PEMEncoder;PEMEncoder.prototype.encode=function(e,n){const o=DEREncoder.prototype.encode.call(this,e).toString("base64"),c=["-----BEGIN "+n.label+"-----"];for(let l=0;l<o.length;l+=64)c.push(o.slice(l,l+64));return c.push("-----END "+n.label+"-----"),c.join(`
`)};(function(t){const e=t;e.der=der_1$1,e.pem=pem$2})(encoders);var decoders$1={};const inherits$3=inherits_browserExports,bignum=bnExports$4,DecoderBuffer=buffer$1.DecoderBuffer,Node=node$1,der=der$2;function DERDecoder$1(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new DERNode,this.tree._init(t.body)}var der_1=DERDecoder$1;DERDecoder$1.prototype.decode=function(e,n){return DecoderBuffer.isDecoderBuffer(e)||(e=new DecoderBuffer(e,n)),this.tree._decode(e,n)};function DERNode(t){Node.call(this,"der",t)}inherits$3(DERNode,Node);DERNode.prototype._peekTag=function(e,n,a){if(e.isEmpty())return!1;const o=e.save(),c=derDecodeTag(e,'Failed to peek tag: "'+n+'"');return e.isError(c)?c:(e.restore(o),c.tag===n||c.tagStr===n||c.tagStr+"of"===n||a)};DERNode.prototype._decodeTag=function(e,n,a){const o=derDecodeTag(e,'Failed to decode tag of "'+n+'"');if(e.isError(o))return o;let c=derDecodeLen(e,o.primitive,'Failed to get length of "'+n+'"');if(e.isError(c))return c;if(!a&&o.tag!==n&&o.tagStr!==n&&o.tagStr+"of"!==n)return e.error('Failed to match tag: "'+n+'"');if(o.primitive||c!==null)return e.skip(c,'Failed to match body of: "'+n+'"');const l=e.save(),u=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(u)?u:(c=e.offset-l.offset,e.restore(l),e.skip(c,'Failed to match body of: "'+n+'"'))};DERNode.prototype._skipUntilEnd=function(e,n){for(;;){const a=derDecodeTag(e,n);if(e.isError(a))return a;const o=derDecodeLen(e,a.primitive,n);if(e.isError(o))return o;let c;if(a.primitive||o!==null?c=e.skip(o):c=this._skipUntilEnd(e,n),e.isError(c))return c;if(a.tagStr==="end")break}};DERNode.prototype._decodeList=function(e,n,a,o){const c=[];for(;!e.isEmpty();){const l=this._peekTag(e,"end");if(e.isError(l))return l;const u=a.decode(e,"der",o);if(e.isError(u)&&l)break;c.push(u)}return c};DERNode.prototype._decodeStr=function(e,n){if(n==="bitstr"){const a=e.readUInt8();return e.isError(a)?a:{unused:a,data:e.raw()}}else if(n==="bmpstr"){const a=e.raw();if(a.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let o="";for(let c=0;c<a.length/2;c++)o+=String.fromCharCode(a.readUInt16BE(c*2));return o}else if(n==="numstr"){const a=e.raw().toString("ascii");return this._isNumstr(a)?a:e.error("Decoding of string type: numstr unsupported characters")}else{if(n==="octstr")return e.raw();if(n==="objDesc")return e.raw();if(n==="printstr"){const a=e.raw().toString("ascii");return this._isPrintstr(a)?a:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(n)?e.raw().toString():e.error("Decoding of string type: "+n+" unsupported")}};DERNode.prototype._decodeObjid=function(e,n,a){let o;const c=[];let l=0,u=0;for(;!e.isEmpty();)u=e.readUInt8(),l<<=7,l|=u&127,u&128||(c.push(l),l=0);u&128&&c.push(l);const d=c[0]/40|0,m=c[0]%40;if(a?o=c:o=[d,m].concat(c.slice(1)),n){let b=n[o.join(" ")];b===void 0&&(b=n[o.join(".")]),b!==void 0&&(o=b)}return o};DERNode.prototype._decodeTime=function(e,n){const a=e.raw().toString();let o,c,l,u,d,m;if(n==="gentime")o=a.slice(0,4)|0,c=a.slice(4,6)|0,l=a.slice(6,8)|0,u=a.slice(8,10)|0,d=a.slice(10,12)|0,m=a.slice(12,14)|0;else if(n==="utctime")o=a.slice(0,2)|0,c=a.slice(2,4)|0,l=a.slice(4,6)|0,u=a.slice(6,8)|0,d=a.slice(8,10)|0,m=a.slice(10,12)|0,o<70?o=2e3+o:o=1900+o;else return e.error("Decoding "+n+" time is not supported yet");return Date.UTC(o,c-1,l,u,d,m,0)};DERNode.prototype._decodeNull=function(){return null};DERNode.prototype._decodeBool=function(e){const n=e.readUInt8();return e.isError(n)?n:n!==0};DERNode.prototype._decodeInt=function(e,n){const a=e.raw();let o=new bignum(a);return n&&(o=n[o.toString(10)]||o),o};DERNode.prototype._use=function(e,n){return typeof e=="function"&&(e=e(n)),e._getDecoder("der").tree};function derDecodeTag(t,e){let n=t.readUInt8(e);if(t.isError(n))return n;const a=der.tagClass[n>>6],o=(n&32)===0;if((n&31)===31){let l=n;for(n=0;(l&128)===128;){if(l=t.readUInt8(e),t.isError(l))return l;n<<=7,n|=l&127}}else n&=31;const c=der.tag[n];return{cls:a,primitive:o,tag:n,tagStr:c}}function derDecodeLen(t,e,n){let a=t.readUInt8(n);if(t.isError(a))return a;if(!e&&a===128)return null;if(!(a&128))return a;const o=a&127;if(o>4)return t.error("length octect is too long");a=0;for(let c=0;c<o;c++){a<<=8;const l=t.readUInt8(n);if(t.isError(l))return l;a|=l}return a}const inherits$2=inherits_browserExports,Buffer$b=safer_1.Buffer,DERDecoder=der_1;function PEMDecoder(t){DERDecoder.call(this,t),this.enc="pem"}inherits$2(PEMDecoder,DERDecoder);var pem$1=PEMDecoder;PEMDecoder.prototype.decode=function(e,n){const a=e.toString().split(/[\r\n]+/g),o=n.label.toUpperCase(),c=/^-----(BEGIN|END) ([^-]+)-----$/;let l=-1,u=-1;for(let b=0;b<a.length;b++){const x=a[b].match(c);if(x!==null&&x[2]===o)if(l===-1){if(x[1]!=="BEGIN")break;l=b}else{if(x[1]!=="END")break;u=b;break}}if(l===-1||u===-1)throw new Error("PEM section not found for: "+o);const d=a.slice(l+1,u).join("");d.replace(/[^a-z0-9+/=]+/gi,"");const m=Buffer$b.from(d,"base64");return DERDecoder.prototype.decode.call(this,m,n)};(function(t){const e=t;e.der=der_1,e.pem=pem$1})(decoders$1);(function(t){const e=encoders,n=decoders$1,a=inherits_browserExports,o=t;o.define=function(u,d){return new c(u,d)};function c(l,u){this.name=l,this.body=u,this.decoders={},this.encoders={}}c.prototype._createNamed=function(u){const d=this.name;function m(b){this._initNamed(b,d)}return a(m,u),m.prototype._initNamed=function(x,_){u.call(this,x,_)},new m(this)},c.prototype._getDecoder=function(u){return u=u||"der",this.decoders.hasOwnProperty(u)||(this.decoders[u]=this._createNamed(n[u])),this.decoders[u]},c.prototype.decode=function(u,d,m){return this._getDecoder(d).decode(u,m)},c.prototype._getEncoder=function(u){return u=u||"der",this.encoders.hasOwnProperty(u)||(this.encoders[u]=this._createNamed(e[u])),this.encoders[u]},c.prototype.encode=function(u,d,m){return this._getEncoder(d).encode(u,m)}})(api$2);var base$7={};(function(t){const e=t;e.Reporter=reporter.Reporter,e.DecoderBuffer=buffer$1.DecoderBuffer,e.EncoderBuffer=buffer$1.EncoderBuffer,e.Node=node$1})(base$7);var constants={};(function(t){const e=t;e._reverse=function(a){const o={};return Object.keys(a).forEach(function(c){(c|0)==c&&(c=c|0);const l=a[c];o[l]=c}),o},e.der=der$2})(constants);(function(t){const e=t;e.bignum=bnExports$4,e.define=api$2.define,e.base=base$7,e.constants=constants,e.decoders=decoders$1,e.encoders=encoders})(asn1$5);var asn=asn1$5,Time=asn.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),AttributeTypeValue=asn.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),AlgorithmIdentifier$1=asn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1),this.key("subjectPublicKey").bitstr())}),RelativeDistinguishedName=asn.define("RelativeDistinguishedName",function(){this.setof(AttributeTypeValue)}),RDNSequence=asn.define("RDNSequence",function(){this.seqof(RelativeDistinguishedName)}),Name=asn.define("Name",function(){this.choice({rdnSequence:this.use(RDNSequence)})}),Validity=asn.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Time),this.key("notAfter").use(Time))}),Extension=asn.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),TBSCertificate=asn.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier$1),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())}),X509Certificate=asn.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier$1),this.key("signatureValue").bitstr())}),certificate=X509Certificate,asn1$4=asn1$5;asn1$6.certificate=certificate;var RSAPrivateKey=asn1$4.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$6.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1$4.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$6.RSAPublicKey=RSAPublicKey;var PublicKey$1=asn1$4.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});asn1$6.PublicKey=PublicKey$1;var AlgorithmIdentifier=asn1$4.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),PrivateKeyInfo=asn1$4.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});asn1$6.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1$4.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$6.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1$4.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$6.DSAPrivateKey=DSAPrivateKey;asn1$6.DSAparam=asn1$4.define("DSAparam",function(){this.int()});var ECPrivateKey=asn1$4.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});asn1$6.ECPrivateKey=ECPrivateKey;var ECParameters=asn1$4.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});asn1$6.signature=asn1$4.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});const require$$1$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,evp=evp_bytestokey,ciphers$1=browser$a,Buffer$a=safeBufferExports.Buffer,fixProc$1=function(t,e){var n=t.toString(),a=n.match(findProc),o;if(a){var l="aes"+a[1],u=Buffer$a.from(a[2],"hex"),d=Buffer$a.from(a[3].replace(/[\r\n]/g,""),"base64"),m=evp(e,u.slice(0,8),parseInt(a[1],10)).key,b=[],x=ciphers$1.createDecipheriv(l,m,u);b.push(x.update(d)),b.push(x.final()),o=Buffer$a.concat(b)}else{var c=n.match(fullRegex);o=Buffer$a.from(c[2].replace(/[\r\n]/g,""),"base64")}var _=n.match(startRegex)[1];return{tag:_,data:o}},asn1$3=asn1$6,aesid=require$$1$1,fixProc=fixProc$1,ciphers=browser$a,compat=browser$c,Buffer$9=safeBufferExports.Buffer,parseAsn1=parseKeys$2;function parseKeys$2(t){var e;typeof t=="object"&&!Buffer$9.isBuffer(t)&&(e=t.passphrase,t=t.key),typeof t=="string"&&(t=Buffer$9.from(t));var n=fixProc(t,e),a=n.tag,o=n.data,c,l;switch(a){case"CERTIFICATE":l=asn1$3.certificate.decode(o,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=asn1$3.PublicKey.decode(o,"der")),c=l.algorithm.algorithm.join("."),c){case"1.2.840.113549.1.1.1":return asn1$3.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=asn1$3.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+c)}case"ENCRYPTED PRIVATE KEY":o=asn1$3.EncryptedPrivateKey.decode(o,"der"),o=decrypt$4(o,e);case"PRIVATE KEY":switch(l=asn1$3.PrivateKey.decode(o,"der"),c=l.algorithm.algorithm.join("."),c){case"1.2.840.113549.1.1.1":return asn1$3.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:asn1$3.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=asn1$3.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+c)}case"RSA PUBLIC KEY":return asn1$3.RSAPublicKey.decode(o,"der");case"RSA PRIVATE KEY":return asn1$3.RSAPrivateKey.decode(o,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1$3.DSAPrivateKey.decode(o,"der")};case"EC PRIVATE KEY":return o=asn1$3.ECPrivateKey.decode(o,"der"),{curve:o.parameters.value,privateKey:o.privateKey};default:throw new Error("unknown key type "+a)}}parseKeys$2.signature=asn1$3.signature;function decrypt$4(t,e){var n=t.algorithm.decrypt.kde.kdeparams.salt,a=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=aesid[t.algorithm.decrypt.cipher.algo.join(".")],c=t.algorithm.decrypt.cipher.iv,l=t.subjectPrivateKey,u=parseInt(o.split("-")[1],10)/8,d=compat.pbkdf2Sync(e,n,a,u,"sha1"),m=ciphers.createDecipheriv(o,d,c),b=[];return b.push(m.update(l)),b.push(m.final()),Buffer$9.concat(b)}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return signExports;hasRequiredSign=1;var t=safeBufferExports.Buffer,e=browser$d,n=browserifyRsa,a=requireElliptic().ec,o=bnExports$2,c=parseAsn1,l=require$$4;function u(B,C,D,z,U){var Y=c(C);if(Y.curve){if(z!=="ecdsa"&&z!=="ecdsa/rsa")throw new Error("wrong private key type");return d(B,Y)}else if(Y.type==="dsa"){if(z!=="dsa")throw new Error("wrong private key type");return m(B,Y,D)}else if(z!=="rsa"&&z!=="ecdsa/rsa")throw new Error("wrong private key type");B=t.concat([U,B]);for(var X=Y.modulus.byteLength(),O=[0,1];B.length+O.length+1<X;)O.push(255);O.push(0);for(var J=-1;++J<B.length;)O.push(B[J]);var Z=n(O,Y);return Z}function d(B,C){var D=l[C.curve.join(".")];if(!D)throw new Error("unknown curve "+C.curve.join("."));var z=new a(D),U=z.keyFromPrivate(C.privateKey),Y=U.sign(B);return t.from(Y.toDER())}function m(B,C,D){for(var z=C.params.priv_key,U=C.params.p,Y=C.params.q,X=C.params.g,O=new o(0),J,Z=_(B,Y).mod(Y),se=!1,ie=x(z,Y,B,D);se===!1;)J=S(Y,ie,D),O=T(X,J,U,Y),se=J.invm(Y).imul(Z.add(z.mul(O))).mod(Y),se.cmpn(0)===0&&(se=!1,O=new o(0));return b(O,se)}function b(B,C){B=B.toArray(),C=C.toArray(),B[0]&128&&(B=[0].concat(B)),C[0]&128&&(C=[0].concat(C));var D=B.length+C.length+4,z=[48,D,2,B.length];return z=z.concat(B,[2,C.length],C),t.from(z)}function x(B,C,D,z){if(B=t.from(B.toArray()),B.length<C.byteLength()){var U=t.alloc(C.byteLength()-B.length);B=t.concat([U,B])}var Y=D.length,X=w(D,C),O=t.alloc(Y);O.fill(1);var J=t.alloc(Y);return J=e(z,J).update(O).update(t.from([0])).update(B).update(X).digest(),O=e(z,J).update(O).digest(),J=e(z,J).update(O).update(t.from([1])).update(B).update(X).digest(),O=e(z,J).update(O).digest(),{k:J,v:O}}function _(B,C){var D=new o(B),z=(B.length<<3)-C.bitLength();return z>0&&D.ishrn(z),D}function w(B,C){B=_(B,C),B=B.mod(C);var D=t.from(B.toArray());if(D.length<C.byteLength()){var z=t.alloc(C.byteLength()-D.length);D=t.concat([z,D])}return D}function S(B,C,D){var z,U;do{for(z=t.alloc(0);z.length*8<B.bitLength();)C.v=e(D,C.k).update(C.v).digest(),z=t.concat([z,C.v]);U=_(z,B),C.k=e(D,C.k).update(C.v).update(t.from([0])).digest(),C.v=e(D,C.k).update(C.v).digest()}while(U.cmp(B)!==-1);return U}function T(B,C,D,z){return B.toRed(o.mont(D)).redPow(C).fromRed().mod(z)}return sign$2.exports=u,signExports.getKey=x,signExports.makeKey=S,signExports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var t=safeBufferExports.Buffer,e=bnExports$2,n=requireElliptic().ec,a=parseAsn1,o=require$$4;function c(m,b,x,_,w){var S=a(x);if(S.type==="ec"){if(_!=="ecdsa"&&_!=="ecdsa/rsa")throw new Error("wrong public key type");return l(m,b,S)}else if(S.type==="dsa"){if(_!=="dsa")throw new Error("wrong public key type");return u(m,b,S)}else if(_!=="rsa"&&_!=="ecdsa/rsa")throw new Error("wrong public key type");b=t.concat([w,b]);for(var T=S.modulus.byteLength(),B=[1],C=0;b.length+B.length+2<T;)B.push(255),C++;B.push(0);for(var D=-1;++D<b.length;)B.push(b[D]);B=t.from(B);var z=e.mont(S.modulus);m=new e(m).toRed(z),m=m.redPow(new e(S.publicExponent)),m=t.from(m.fromRed().toArray());var U=C<8?1:0;for(T=Math.min(m.length,B.length),m.length!==B.length&&(U=1),D=-1;++D<T;)U|=m[D]^B[D];return U===0}function l(m,b,x){var _=o[x.data.algorithm.curve.join(".")];if(!_)throw new Error("unknown curve "+x.data.algorithm.curve.join("."));var w=new n(_),S=x.data.subjectPrivateKey.data;return w.verify(b,m,S)}function u(m,b,x){var _=x.data.p,w=x.data.q,S=x.data.g,T=x.data.pub_key,B=a.signature.decode(m,"der"),C=B.s,D=B.r;d(C,w),d(D,w);var z=e.mont(_),U=C.invm(w),Y=S.toRed(z).redPow(new e(b).mul(U).mod(w)).fromRed().mul(T.toRed(z).redPow(D.mul(U).mod(w)).fromRed()).mod(_).mod(w);return Y.cmp(D)===0}function d(m,b){if(m.cmpn(0)<=0)throw new Error("invalid sig");if(m.cmp(b)>=b)throw new Error("invalid sig")}return verify_1=c,verify_1}var browser$8,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$8;hasRequiredBrowser$2=1;var t=safeBufferExports.Buffer,e=browser$e,n=readableBrowserExports,a=inherits_browserExports,o=requireSign(),c=requireVerify(),l=require$$6;Object.keys(l).forEach(function(x){l[x].id=t.from(l[x].id,"hex"),l[x.toLowerCase()]=l[x]});function u(x){n.Writable.call(this);var _=l[x];if(!_)throw new Error("Unknown message digest");this._hashType=_.hash,this._hash=e(_.hash),this._tag=_.id,this._signType=_.sign}a(u,n.Writable),u.prototype._write=function(_,w,S){this._hash.update(_),S()},u.prototype.update=function(_,w){return typeof _=="string"&&(_=t.from(_,w)),this._hash.update(_),this},u.prototype.sign=function(_,w){this.end();var S=this._hash.digest(),T=o(S,_,this._hashType,this._signType,this._tag);return w?T.toString(w):T};function d(x){n.Writable.call(this);var _=l[x];if(!_)throw new Error("Unknown message digest");this._hash=e(_.hash),this._tag=_.id,this._signType=_.sign}a(d,n.Writable),d.prototype._write=function(_,w,S){this._hash.update(_),S()},d.prototype.update=function(_,w){return typeof _=="string"&&(_=t.from(_,w)),this._hash.update(_),this},d.prototype.verify=function(_,w,S){typeof w=="string"&&(w=t.from(w,S)),this.end();var T=this._hash.digest();return c(w,T,_,this._signType,this._tag)};function m(x){return new u(x)}function b(x){return new d(x)}return browser$8={Sign:m,Verify:b,createSign:m,createVerify:b},browser$8}var browser$7,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$7;hasRequiredBrowser$1=1;var t=requireElliptic(),e=bnExports$4;browser$7=function(l){return new a(l)};var n={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};n.p224=n.secp224r1,n.p256=n.secp256r1=n.prime256v1,n.p192=n.secp192r1=n.prime192v1,n.p384=n.secp384r1,n.p521=n.secp521r1;function a(c){this.curveType=n[c],this.curveType||(this.curveType={name:c}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}a.prototype.generateKeys=function(c,l){return this.keys=this.curve.genKeyPair(),this.getPublicKey(c,l)},a.prototype.computeSecret=function(c,l,u){l=l||"utf8",Buffer$x.isBuffer(c)||(c=new Buffer$x(c,l));var d=this.curve.keyFromPublic(c).getPublic(),m=d.mul(this.keys.getPrivate()).getX();return o(m,u,this.curveType.byteLength)},a.prototype.getPublicKey=function(c,l){var u=this.keys.getPublic(l==="compressed",!0);return l==="hybrid"&&(u[u.length-1]%2?u[0]=7:u[0]=6),o(u,c)},a.prototype.getPrivateKey=function(c){return o(this.keys.getPrivate(),c)},a.prototype.setPublicKey=function(c,l){return l=l||"utf8",Buffer$x.isBuffer(c)||(c=new Buffer$x(c,l)),this.keys._importPublic(c),this},a.prototype.setPrivateKey=function(c,l){l=l||"utf8",Buffer$x.isBuffer(c)||(c=new Buffer$x(c,l));var u=new e(c);return u=u.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(u),this};function o(c,l,u){Array.isArray(c)||(c=c.toArray());var d=new Buffer$x(c);if(u&&d.length<u){var m=new Buffer$x(u-d.length);m.fill(0),d=Buffer$x.concat([m,d])}return l?d.toString(l):d}return browser$7}var browser$6={},createHash$2=browser$e,Buffer$8=safeBufferExports.Buffer,mgf$2=function(t,e){for(var n=Buffer$8.alloc(0),a=0,o;n.length<e;)o=i2ops(a++),n=Buffer$8.concat([n,createHash$2("sha1").update(t).update(o).digest()]);return n.slice(0,e)};function i2ops(t){var e=Buffer$8.allocUnsafe(4);return e.writeUInt32BE(t,0),e}var xor$2=function(e,n){for(var a=e.length,o=-1;++o<a;)e[o]^=n[o];return e},BN$5=bnExports$4,Buffer$7=safeBufferExports.Buffer;function withPublic$2(t,e){return Buffer$7.from(t.toRed(BN$5.mont(e.modulus)).redPow(new BN$5(e.publicExponent)).fromRed().toArray())}var withPublic_1=withPublic$2,parseKeys$1=parseAsn1,randomBytes$2=browserExports$2,createHash$1=browser$e,mgf$1=mgf$2,xor$1=xor$2,BN$4=bnExports$4,withPublic$1=withPublic_1,crt$1=browserifyRsa,Buffer$6=safeBufferExports.Buffer,publicEncrypt=function(e,n,a){var o;e.padding?o=e.padding:a?o=1:o=4;var c=parseKeys$1(e),l;if(o===4)l=oaep$1(c,n);else if(o===1)l=pkcs1$2(c,n,a);else if(o===3){if(l=new BN$4(n),l.cmp(c.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return a?crt$1(l,c):withPublic$1(l,c)};function oaep$1(t,e){var n=t.modulus.byteLength(),a=e.length,o=createHash$1("sha1").update(Buffer$6.alloc(0)).digest(),c=o.length,l=2*c;if(a>n-l-2)throw new Error("message too long");var u=Buffer$6.alloc(n-a-l-2),d=n-c-1,m=randomBytes$2(c),b=xor$1(Buffer$6.concat([o,u,Buffer$6.alloc(1,1),e],d),mgf$1(m,d)),x=xor$1(m,mgf$1(b,c));return new BN$4(Buffer$6.concat([Buffer$6.alloc(1),x,b],n))}function pkcs1$2(t,e,n){var a=e.length,o=t.modulus.byteLength();if(a>o-11)throw new Error("message too long");var c;return n?c=Buffer$6.alloc(o-a-3,255):c=nonZero(o-a-3),new BN$4(Buffer$6.concat([Buffer$6.from([0,n?1:2]),c,Buffer$6.alloc(1),e],o))}function nonZero(t){for(var e=Buffer$6.allocUnsafe(t),n=0,a=randomBytes$2(t*2),o=0,c;n<t;)o===a.length&&(a=randomBytes$2(t*2),o=0),c=a[o++],c&&(e[n++]=c);return e}var parseKeys=parseAsn1,mgf=mgf$2,xor=xor$2,BN$3=bnExports$4,crt=browserifyRsa,createHash=browser$e,withPublic=withPublic_1,Buffer$5=safeBufferExports.Buffer,privateDecrypt=function(e,n,a){var o;e.padding?o=e.padding:a?o=1:o=4;var c=parseKeys(e),l=c.modulus.byteLength();if(n.length>l||new BN$3(n).cmp(c.modulus)>=0)throw new Error("decryption error");var u;a?u=withPublic(new BN$3(n),c):u=crt(n,c);var d=Buffer$5.alloc(l-u.length);if(u=Buffer$5.concat([d,u],l),o===4)return oaep(c,u);if(o===1)return pkcs1$1(c,u,a);if(o===3)return u;throw new Error("unknown padding")};function oaep(t,e){var n=t.modulus.byteLength(),a=createHash("sha1").update(Buffer$5.alloc(0)).digest(),o=a.length;if(e[0]!==0)throw new Error("decryption error");var c=e.slice(1,o+1),l=e.slice(o+1),u=xor(c,mgf(l,o)),d=xor(l,mgf(u,n-o-1));if(compare$4(a,d.slice(0,o)))throw new Error("decryption error");for(var m=o;d[m]===0;)m++;if(d[m++]!==1)throw new Error("decryption error");return d.slice(m)}function pkcs1$1(t,e,n){for(var a=e.slice(0,2),o=2,c=0;e[o++]!==0;)if(o>=e.length){c++;break}var l=e.slice(2,o-1);if((a.toString("hex")!=="0002"&&!n||a.toString("hex")!=="0001"&&n)&&c++,l.length<8&&c++,c)throw new Error("decryption error");return e.slice(o)}function compare$4(t,e){t=Buffer$5.from(t),e=Buffer$5.from(e);var n=0,a=t.length;t.length!==e.length&&(n++,a=Math.min(t.length,e.length));for(var o=-1;++o<a;)n+=t[o]^e[o];return n}(function(t){t.publicEncrypt=publicEncrypt,t.privateDecrypt=privateDecrypt,t.privateEncrypt=function(n,a){return t.publicEncrypt(n,a,!0)},t.publicDecrypt=function(n,a){return t.privateDecrypt(n,a,!0)}})(browser$6);var browser$5={};function oldBrowser(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var safeBuffer=safeBufferExports,randombytes=browserExports$2,Buffer$4=safeBuffer.Buffer,kBufferMaxLength=safeBuffer.kMaxLength,crypto$6=globalThis.crypto||globalThis.msCrypto,kMaxUint32=Math.pow(2,32)-1;function assertOffset(t,e){if(typeof t!="number"||t!==t)throw new TypeError("offset must be a number");if(t>kMaxUint32||t<0)throw new TypeError("offset must be a uint32");if(t>kBufferMaxLength||t>e)throw new RangeError("offset out of range")}function assertSize(t,e,n){if(typeof t!="number"||t!==t)throw new TypeError("size must be a number");if(t>kMaxUint32||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>kBufferMaxLength)throw new RangeError("buffer too small")}crypto$6&&crypto$6.getRandomValues||!browser$1$1.browser?(browser$5.randomFill=randomFill,browser$5.randomFillSync=randomFillSync):(browser$5.randomFill=oldBrowser,browser$5.randomFillSync=oldBrowser);function randomFill(t,e,n,a){if(!Buffer$4.isBuffer(t)&&!(t instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof e=="function")a=e,e=0,n=t.length;else if(typeof n=="function")a=n,n=t.length-e;else if(typeof a!="function")throw new TypeError('"cb" argument must be a function');return assertOffset(e,t.length),assertSize(n,e,t.length),actualFill(t,e,n,a)}function actualFill(t,e,n,a){if(browser$1$1.browser){var o=t.buffer,c=new Uint8Array(o,e,n);if(crypto$6.getRandomValues(c),a){browser$1$1.nextTick(function(){a(null,t)});return}return t}if(a){randombytes(n,function(u,d){if(u)return a(u);d.copy(t,e),a(null,t)});return}var l=randombytes(n);return l.copy(t,e),t}function randomFillSync(t,e,n){if(typeof e>"u"&&(e=0),!Buffer$4.isBuffer(t)&&!(t instanceof globalThis.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return assertOffset(e,t.length),n===void 0&&(n=t.length-e),assertSize(n,e,t.length),actualFill(t,e,n)}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=browserExports$2,cryptoBrowserify.createHash=cryptoBrowserify.Hash=browser$e,cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=browser$d;var t=algosExports,e=Object.keys(t),n=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return n};var a=browser$c;cryptoBrowserify.pbkdf2=a.pbkdf2,cryptoBrowserify.pbkdf2Sync=a.pbkdf2Sync;var o=browser$b;cryptoBrowserify.Cipher=o.Cipher,cryptoBrowserify.createCipher=o.createCipher,cryptoBrowserify.Cipheriv=o.Cipheriv,cryptoBrowserify.createCipheriv=o.createCipheriv,cryptoBrowserify.Decipher=o.Decipher,cryptoBrowserify.createDecipher=o.createDecipher,cryptoBrowserify.Decipheriv=o.Decipheriv,cryptoBrowserify.createDecipheriv=o.createDecipheriv,cryptoBrowserify.getCiphers=o.getCiphers,cryptoBrowserify.listCiphers=o.listCiphers;var c=requireBrowser$3();cryptoBrowserify.DiffieHellmanGroup=c.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=c.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=c.getDiffieHellman,cryptoBrowserify.createDiffieHellman=c.createDiffieHellman,cryptoBrowserify.DiffieHellman=c.DiffieHellman;var l=requireBrowser$2();cryptoBrowserify.createSign=l.createSign,cryptoBrowserify.Sign=l.Sign,cryptoBrowserify.createVerify=l.createVerify,cryptoBrowserify.Verify=l.Verify,cryptoBrowserify.createECDH=requireBrowser$1();var u=browser$6;cryptoBrowserify.publicEncrypt=u.publicEncrypt,cryptoBrowserify.privateEncrypt=u.privateEncrypt,cryptoBrowserify.publicDecrypt=u.publicDecrypt,cryptoBrowserify.privateDecrypt=u.privateDecrypt;var d=browser$5;return cryptoBrowserify.randomFill=d.randomFill,cryptoBrowserify.randomFillSync=d.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var cryptoBrowserifyExports=requireCryptoBrowserify();const crypto$5=getDefaultExportFromCjs(cryptoBrowserifyExports),nodeCrypto=_mergeNamespaces({__proto__:null,default:crypto$5},[cryptoBrowserifyExports]);function normalizeArray(t,e){for(var n=0,a=t.length-1;a>=0;a--){var o=t[a];o==="."?t.splice(a,1):o===".."?(t.splice(a,1),n++):n&&(t.splice(a,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(t){return splitPathRe.exec(t).slice(1)};function resolve(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var a=n>=0?arguments[n]:"/";if(typeof a!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!a)continue;t=a+"/"+t,e=a.charAt(0)==="/"}return t=normalizeArray(filter$1(t.split("/"),function(o){return!!o}),!e).join("/"),(e?"/":"")+t||"."}function normalize(t){var e=isAbsolute(t),n=substr(t,-1)==="/";return t=normalizeArray(filter$1(t.split("/"),function(a){return!!a}),!e).join("/"),!t&&!e&&(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function isAbsolute(t){return t.charAt(0)==="/"}function join$1(){var t=Array.prototype.slice.call(arguments,0);return normalize(filter$1(t,function(e,n){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function relative$2(t,e){t=resolve(t).substr(1),e=resolve(e).substr(1);function n(m){for(var b=0;b<m.length&&m[b]==="";b++);for(var x=m.length-1;x>=0&&m[x]==="";x--);return b>x?[]:m.slice(b,x-b+1)}for(var a=n(t.split("/")),o=n(e.split("/")),c=Math.min(a.length,o.length),l=c,u=0;u<c;u++)if(a[u]!==o[u]){l=u;break}for(var d=[],u=l;u<a.length;u++)d.push("..");return d=d.concat(o.slice(l)),d.join("/")}var sep="/",delimiter=":";function dirname(t){var e=splitPath(t),n=e[0],a=e[1];return!n&&!a?".":(a&&(a=a.substr(0,a.length-1)),n+a)}function basename(t,e){var n=splitPath(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function extname(t){return splitPath(t)[3]}const path={extname,basename,dirname,sep,delimiter,relative:relative$2,join:join$1,isAbsolute,normalize,resolve};function filter$1(t,e){if(t.filter)return t.filter(e);for(var n=[],a=0;a<t.length;a++)e(t[a],a,t)&&n.push(t[a]);return n}var substr="ab".substr(-1)==="b"?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)};const path$1=Object.freeze(Object.defineProperty({__proto__:null,basename,default:path,delimiter,dirname,extname,isAbsolute,join:join$1,normalize,relative:relative$2,resolve,sep},Symbol.toStringTag,{value:"Module"})),pEachSeries=async(t,e)=>{let n=0;for(const a of t)if(await e(await a,n++)===pEachSeries.stop)break;return t};pEachSeries.stop=Symbol("pEachSeries.stop");var eventemitter3Exports={},eventemitter3={get exports(){return eventemitter3Exports},set exports(t){eventemitter3Exports=t}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function o(d,m,b){this.fn=d,this.context=m,this.once=b||!1}function c(d,m,b,x,_){if(typeof b!="function")throw new TypeError("The listener must be a function");var w=new o(b,x||d,_),S=n?n+m:m;return d._events[S]?d._events[S].fn?d._events[S]=[d._events[S],w]:d._events[S].push(w):(d._events[S]=w,d._eventsCount++),d}function l(d,m){--d._eventsCount===0?d._events=new a:delete d._events[m]}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var m=[],b,x;if(this._eventsCount===0)return m;for(x in b=this._events)e.call(b,x)&&m.push(n?x.slice(1):x);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(b)):m},u.prototype.listeners=function(m){var b=n?n+m:m,x=this._events[b];if(!x)return[];if(x.fn)return[x.fn];for(var _=0,w=x.length,S=new Array(w);_<w;_++)S[_]=x[_].fn;return S},u.prototype.listenerCount=function(m){var b=n?n+m:m,x=this._events[b];return x?x.fn?1:x.length:0},u.prototype.emit=function(m,b,x,_,w,S){var T=n?n+m:m;if(!this._events[T])return!1;var B=this._events[T],C=arguments.length,D,z;if(B.fn){switch(B.once&&this.removeListener(m,B.fn,void 0,!0),C){case 1:return B.fn.call(B.context),!0;case 2:return B.fn.call(B.context,b),!0;case 3:return B.fn.call(B.context,b,x),!0;case 4:return B.fn.call(B.context,b,x,_),!0;case 5:return B.fn.call(B.context,b,x,_,w),!0;case 6:return B.fn.call(B.context,b,x,_,w,S),!0}for(z=1,D=new Array(C-1);z<C;z++)D[z-1]=arguments[z];B.fn.apply(B.context,D)}else{var U=B.length,Y;for(z=0;z<U;z++)switch(B[z].once&&this.removeListener(m,B[z].fn,void 0,!0),C){case 1:B[z].fn.call(B[z].context);break;case 2:B[z].fn.call(B[z].context,b);break;case 3:B[z].fn.call(B[z].context,b,x);break;case 4:B[z].fn.call(B[z].context,b,x,_);break;default:if(!D)for(Y=1,D=new Array(C-1);Y<C;Y++)D[Y-1]=arguments[Y];B[z].fn.apply(B[z].context,D)}}return!0},u.prototype.on=function(m,b,x){return c(this,m,b,x,!1)},u.prototype.once=function(m,b,x){return c(this,m,b,x,!0)},u.prototype.removeListener=function(m,b,x,_){var w=n?n+m:m;if(!this._events[w])return this;if(!b)return l(this,w),this;var S=this._events[w];if(S.fn)S.fn===b&&(!_||S.once)&&(!x||S.context===x)&&l(this,w);else{for(var T=0,B=[],C=S.length;T<C;T++)(S[T].fn!==b||_&&!S[T].once||x&&S[T].context!==x)&&B.push(S[T]);B.length?this._events[w]=B.length===1?B[0]:B:l(this,w)}return this},u.prototype.removeAllListeners=function(m){var b;return m?(b=n?n+m:m,this._events[b]&&l(this,b)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u})(eventemitter3);let TimeoutError$3=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},AbortError$4=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const getDOMException$1=t=>globalThis.DOMException===void 0?new AbortError$4(t):new DOMException(t),getAbortedReason$1=t=>{const e=t.reason===void 0?getDOMException$1("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException$1(e)};function pTimeout(t,e,n,a){let o;const c=new Promise((l,u)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){l(t);return}if(a={customTimers:{setTimeout,clearTimeout},...a},a.signal){const{signal:d}=a;d.aborted&&u(getAbortedReason$1(d)),d.addEventListener("abort",()=>{u(getAbortedReason$1(d))})}o=a.customTimers.setTimeout.call(void 0,()=>{if(typeof n=="function"){try{l(n())}catch(b){u(b)}return}const d=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,m=n instanceof Error?n:new TimeoutError$3(d);typeof t.cancel=="function"&&t.cancel(),u(m)},e),(async()=>{try{l(await t)}catch(d){u(d)}finally{a.customTimers.clearTimeout.call(void 0,o)}})()});return c.clear=()=>{clearTimeout(o),o=void 0},c}function lowerBound(t,e,n){let a=0,o=t.length;for(;o>0;){const c=Math.trunc(o/2);let l=a+c;n(t[l],e)<=0?(a=++l,o-=c+1):o=c}return a}var __classPrivateFieldGet$2=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(t):a?a.value:e.get(t)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(e,n){n={priority:0,...n};const a={priority:n.priority,run:e};if(this.size&&__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f")[this.size-1].priority>=n.priority){__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").push(a);return}const o=lowerBound(__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f"),a,(c,l)=>l.priority-c.priority);__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").splice(o,0,a)}dequeue(){const e=__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").shift();return e?.run}filter(e){return __classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return __classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet$1=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},__classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(t):a?a.value:e.get(t)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pendingCount,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_emitEvents,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_onEvent;const timeoutError=new TimeoutError$3;let AbortError$3=class extends Error{};class PQueue extends eventemitter3Exports{constructor(e){var n,a,o,c;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pendingCount.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(a=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(c=(o=e.interval)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""}\` (${typeof e.interval})`);__classPrivateFieldSet$1(this,_PQueue_carryoverConcurrencyCount,e.carryoverConcurrencyCount,"f"),__classPrivateFieldSet$1(this,_PQueue_isIntervalIgnored,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),__classPrivateFieldSet$1(this,_PQueue_intervalCap,e.intervalCap,"f"),__classPrivateFieldSet$1(this,_PQueue_interval,e.interval,"f"),__classPrivateFieldSet$1(this,_PQueue_queue,new e.queueClass,"f"),__classPrivateFieldSet$1(this,_PQueue_queueClass,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,__classPrivateFieldSet$1(this,_PQueue_throwOnTimeout,e.throwOnTimeout===!0,"f"),__classPrivateFieldSet$1(this,_PQueue_isPaused,e.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet$1(this,_PQueue_concurrency,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);__classPrivateFieldSet$1(this,_PQueue_concurrency,e,"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(e,n={}){return new Promise((a,o)=>{const c=async()=>{var l,u,d;__classPrivateFieldSet$1(this,_PQueue_pendingCount,(u=__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f"),u++,u),"f"),__classPrivateFieldSet$1(this,_PQueue_intervalCount,(d=__classPrivateFieldGet$1(this,_PQueue_intervalCount,"f"),d++,d),"f");try{if(!((l=n.signal)===null||l===void 0)&&l.aborted){o(new AbortError$3("The task was aborted."));return}const b=await(this.timeout===void 0&&n.timeout===void 0?e({signal:n.signal}):pTimeout(Promise.resolve(e({signal:n.signal})),n.timeout===void 0?this.timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?__classPrivateFieldGet$1(this,_PQueue_throwOnTimeout,"f"):n.throwOnTimeout)&&o(timeoutError)}));a(b),this.emit("completed",b)}catch(m){o(m),this.emit("error",m)}__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_next).call(this)};__classPrivateFieldGet$1(this,_PQueue_queue,"f").enqueue(c,n),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async a=>this.add(a,n)))}start(){return __classPrivateFieldGet$1(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet$1(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet$1(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet$1(this,_PQueue_queue,new(__classPrivateFieldGet$1(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet$1(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(e){__classPrivateFieldGet$1(this,_PQueue_queue,"f").size<e||await __classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet$1(this,_PQueue_queue,"f").size<e)}async onIdle(){__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet$1(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet$1(this,_PQueue_queue,"f").size}sizeBy(e){return __classPrivateFieldGet$1(this,_PQueue_queue,"f").filter(e).length}get pending(){return __classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")}get isPaused(){return __classPrivateFieldGet$1(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pendingCount=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function(){return __classPrivateFieldGet$1(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet$1(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet$1(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function(){return __classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")<__classPrivateFieldGet$1(this,_PQueue_concurrency,"f")},_PQueue_next=function(){var e;__classPrivateFieldSet$1(this,_PQueue_pendingCount,(e=__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f"),e--,e),"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_emitEvents=function(){this.emit("empty"),__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")===0&&this.emit("idle")},_PQueue_onResumeInterval=function(){__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet$1(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function(){const e=Date.now();if(__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")===void 0){const n=__classPrivateFieldGet$1(this,_PQueue_intervalEnd,"f")-e;if(n<0)__classPrivateFieldSet$1(this,_PQueue_intervalCount,__classPrivateFieldGet$1(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f"):0,"f");else return __classPrivateFieldGet$1(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet$1(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},n),"f"),!0}return!1},_PQueue_tryToStartAnother=function(){if(__classPrivateFieldGet$1(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet$1(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")),__classPrivateFieldSet$1(this,_PQueue_intervalId,void 0,"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_emitEvents).call(this),!1;if(!__classPrivateFieldGet$1(this,_PQueue_isPaused,"f")){const e=!__classPrivateFieldGet$1(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet$1(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet$1(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const n=__classPrivateFieldGet$1(this,_PQueue_queue,"f").dequeue();return n?(this.emit("active"),n(),e&&__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function(){__classPrivateFieldGet$1(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet$1(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet$1(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet$1(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet$1(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function(){__classPrivateFieldGet$1(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")),__classPrivateFieldSet$1(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet$1(this,_PQueue_intervalCount,__classPrivateFieldGet$1(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f"):0,"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function(){for(;__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_onEvent=async function(e,n){return new Promise(a=>{const o=()=>{n&&!n()||(this.off(e,o),a())};this.on(e,o)})};class Index{constructor(e){this.id=e,this._index=[]}get(){return this._index}async updateIndex(e,n){this._index=e.values}}function indentString(t,e=1,n={}){const{indent:a=" ",includeEmptyLines:o=!1}=n;if(typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(e<0)throw new RangeError(`Expected \`count\` to be at least 0, got \`${e}\``);if(typeof a!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof a}\``);if(e===0)return t;const c=o?/^/gm:/^(?!\s*$)/gm;return t.replace(c,a.repeat(e))}function escapeStringRegexp(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const extractPathRegex=/\s+at.*[(\s](.*)\)?/,pathRegex=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/,homeDir=typeof net.homedir>"u"?"":net.homedir().replace(/\\/g,"/");function cleanStack(t,{pretty:e=!1,basePath:n}={}){const a=n&&new RegExp(`(at | \\()${escapeStringRegexp(n.replace(/\\/g,"/"))}`,"g");if(typeof t=="string")return t.replace(/\\/g,"/").split(`
`).filter(o=>{const c=o.match(extractPathRegex);if(c===null||!c[1])return!0;const l=c[1];return l.includes(".app/Contents/Resources/electron.asar")||l.includes(".app/Contents/Resources/default_app.asar")||l.includes("node_modules/electron/dist/resources/electron.asar")||l.includes("node_modules/electron/dist/resources/default_app.asar")?!1:!pathRegex.test(l)}).filter(o=>o.trim()!=="").map(o=>(a&&(o=o.replace(a,"$1")),e&&(o=o.replace(extractPathRegex,(c,l)=>c.replace(l,l.replace(homeDir,"~")))),o)).join(`
`)}const cleanInternalStack=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");var Yt,tr;let AggregateError$1=(tr=class extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);n=n.map(o=>o instanceof Error?o:o!==null&&typeof o=="object"?Object.assign(new Error(o.message),o):new Error(o));let a=n.map(o=>typeof o.stack=="string"&&o.stack.length>0?cleanInternalStack(cleanStack(o.stack)):String(o)).join(`
`);a=`
`+indentString(a,4);super(a);Qt(this,Yt,void 0);lt(this,"name","AggregateError");er(this,Yt,n)}get errors(){return Zt(this,Yt).slice()}},Yt=new WeakMap,tr),AbortError$2=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const getDOMException=t=>globalThis.DOMException===void 0?new AbortError$2(t):new DOMException(t),getAbortedReason=t=>{const e=t.reason===void 0?getDOMException("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException(e)};async function pMap$1(t,e,{concurrency:n=Number.POSITIVE_INFINITY,stopOnError:a=!0,signal:o}={}){return new Promise((c,l)=>{if(t[Symbol.iterator]===void 0&&t[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof t})`);if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(n)||n===Number.POSITIVE_INFINITY)&&n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);const u=[],d=[],m=new Map;let b=!1,x=!1,_=!1,w=0,S=0;const T=t[Symbol.iterator]===void 0?t[Symbol.asyncIterator]():t[Symbol.iterator](),B=D=>{b=!0,x=!0,l(D)};o&&(o.aborted&&B(getAbortedReason(o)),o.addEventListener("abort",()=>{B(getAbortedReason(o))}));const C=async()=>{if(x)return;const D=await T.next(),z=S;if(S++,D.done){if(_=!0,w===0&&!x){if(!a&&d.length>0){B(new AggregateError$1(d));return}if(x=!0,m.size===0){c(u);return}const U=[];for(const[Y,X]of u.entries())m.get(Y)!==pMapSkip&&U.push(X);c(U)}return}w++,(async()=>{try{const U=await D.value;if(x)return;const Y=await e(U,z);Y===pMapSkip&&m.set(z,Y),u[z]=Y,w--,await C()}catch(U){if(a)B(U);else{d.push(U),w--;try{await C()}catch(Y){B(Y)}}}})()};(async()=>{for(let D=0;D<n;D++){try{await C()}catch(z){B(z);break}if(_||b)break}})()})}const pMapSkip=Symbol("skip");class GSet{constructor(e){}append(e){}merge(e){}get(e){}has(e){}get values(){}get length(){}}class LamportClock{constructor(e,n){this.id=e,this.time=n||0}tick(){return new LamportClock(this.id,++this.time)}merge(e){return this.time=Math.max(this.time,e.time),new LamportClock(this.id,this.time)}clone(){return new LamportClock(this.id,this.time)}static compare(e,n){const a=e.time-n.time;return a===0&&e.id!==n.id?e.id<n.id?-1:1:a}}var encode_1$6=encode$t,MSB$5=128,REST$5=127,MSBALL$4=~REST$5,INT$4=Math.pow(2,31);function encode$t(t,e,n){e=e||[],n=n||0;for(var a=n;t>=INT$4;)e[n++]=t&255|MSB$5,t/=128;for(;t&MSBALL$4;)e[n++]=t&255|MSB$5,t>>>=7;return e[n]=t|0,encode$t.bytes=n-a+1,e}var decode$u=read$8,MSB$1$4=128,REST$1$4=127;function read$8(t,a){var n=0,a=a||0,o=0,c=a,l,u=t.length;do{if(c>=u)throw read$8.bytes=0,new RangeError("Could not decode varint");l=t[c++],n+=o<28?(l&REST$1$4)<<o:(l&REST$1$4)*Math.pow(2,o),o+=7}while(l>=MSB$1$4);return read$8.bytes=c-a,n}var N1$4=Math.pow(2,7),N2$4=Math.pow(2,14),N3$4=Math.pow(2,21),N4$4=Math.pow(2,28),N5$4=Math.pow(2,35),N6$4=Math.pow(2,42),N7$4=Math.pow(2,49),N8$4=Math.pow(2,56),N9$4=Math.pow(2,63),length$4=function(t){return t<N1$4?1:t<N2$4?2:t<N3$4?3:t<N4$4?4:t<N5$4?5:t<N6$4?6:t<N7$4?7:t<N8$4?8:t<N9$4?9:10},varint$4={encode:encode_1$6,decode:decode$u,encodingLength:length$4},_brrp_varint$3=varint$4;const decode$t=(t,e=0)=>[_brrp_varint$3.decode(t,e),_brrp_varint$3.decode.bytes],encodeTo$3=(t,e,n=0)=>(_brrp_varint$3.encode(t,e,n),e),encodingLength$3=t=>_brrp_varint$3.encodingLength(t),equals$6=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},coerce$5=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},create$6=(t,e)=>{const n=e.byteLength,a=encodingLength$3(t),o=a+encodingLength$3(n),c=new Uint8Array(o+n);return encodeTo$3(t,c,0),encodeTo$3(n,c,a),c.set(e,o),new Digest$3(t,n,e,c)},decode$s=t=>{const e=coerce$5(t),[n,a]=decode$t(e),[o,c]=decode$t(e.subarray(a)),l=e.subarray(a+c);if(l.byteLength!==o)throw new Error("Incorrect length");return new Digest$3(n,o,l,e)},equals$5=(t,e)=>{if(t===e)return!0;{const n=e;return t.code===n.code&&t.size===n.size&&n.bytes instanceof Uint8Array&&equals$6(t.bytes,n.bytes)}};let Digest$3=class{constructor(e,n,a,o){this.code=e,this.size=n,this.digest=a,this.bytes=o}};function base$6(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),l=c.charCodeAt(0);if(n[l]!==255)throw new TypeError(c+" is ambiguous");n[l]=o}var u=t.length,d=t.charAt(0),m=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function x(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var T=0,B=0,C=0,D=S.length;C!==D&&S[C]===0;)C++,T++;for(var z=(D-C)*b+1>>>0,U=new Uint8Array(z);C!==D;){for(var Y=S[C],X=0,O=z-1;(Y!==0||X<B)&&O!==-1;O--,X++)Y+=256*U[O]>>>0,U[O]=Y%u>>>0,Y=Y/u>>>0;if(Y!==0)throw new Error("Non-zero carry");B=X,C++}for(var J=z-B;J!==z&&U[J]===0;)J++;for(var Z=d.repeat(T);J<z;++J)Z+=t.charAt(U[J]);return Z}function _(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var T=0;if(S[T]!==" "){for(var B=0,C=0;S[T]===d;)B++,T++;for(var D=(S.length-T)*m+1>>>0,z=new Uint8Array(D);S[T];){var U=n[S.charCodeAt(T)];if(U===255)return;for(var Y=0,X=D-1;(U!==0||Y<C)&&X!==-1;X--,Y++)U+=u*z[X]>>>0,z[X]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");C=Y,T++}if(S[T]!==" "){for(var O=D-C;O!==D&&z[O]===0;)O++;for(var J=new Uint8Array(B+(D-O)),Z=B;O!==D;)J[Z++]=z[O++];return J}}}function w(S){var T=_(S);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:x,decodeUnsafe:_,decode:w}}var src$9=base$6,_brrp__multiformats_scope_baseX$5=src$9;let Encoder$6=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$6=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$5(this,e)}},ComposedDecoder$5=class{constructor(e){this.decoders=e}or(e){return or$5(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$5=(t,e)=>new ComposedDecoder$5({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$6=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$6(e,n,a),this.decoder=new Decoder$6(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$9=({name:t,prefix:e,encode:n,decode:a})=>new Codec$6(t,e,n,a),baseX$5=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$5(n,e);return from$9({prefix:t,name:e,encode:a,decode:c=>coerce$5(o(c))})},decode$r=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let c=t.length;for(;t[c-1]==="=";)--c;const l=new Uint8Array(c*n/8|0);let u=0,d=0,m=0;for(let b=0;b<c;++b){const x=o[t[b]];if(x===void 0)throw new SyntaxError(`Non-${a} character`);d=d<<n|x,u+=n,u>=8&&(u-=8,l[m++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},encode$s=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let c="",l=0,u=0;for(let d=0;d<t.length;++d)for(u=u<<8|t[d],l+=8;l>n;)l-=n,c+=e[o&u>>l];if(l&&(c+=e[o&u<<n-l]),a)for(;c.length*n&7;)c+="=";return c},rfc4648$5=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$9({prefix:e,name:t,encode(o){return encode$s(o,a,n)},decode(o){return decode$r(o,a,n,t)}}),base58btc$5=baseX$5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$7=rfc4648$5({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$5({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$5({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$5({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$5({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$5({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$5({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$5({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$5({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const format$5=(t,e)=>{const{bytes:n,version:a}=t;switch(a){case 0:return toStringV0$2(n,baseCache$1(t),e||base58btc$5.encoder);default:return toStringV1$2(n,baseCache$1(t),e||base32$7.encoder)}},cache$3=new WeakMap,baseCache$1=t=>{const e=cache$3.get(t);if(e==null){const n=new Map;return cache$3.set(t,n),n}return e};let CID$2=class{constructor(e,n,a,o){this.code=n,this.version=e,this.multihash=a,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:n}=this;if(e!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$2.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:n}=this.multihash,a=create$6(e,n);return CID$2.createV1(this.code,a)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID$2.equals(this,e)}static equals(e,n){const a=n;return a&&e.code===a.code&&e.version===a.version&&equals$5(e.multihash,a.multihash)}toString(e){return format$5(this,e)}toJSON(){return{"/":format$5(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const n=e;if(n instanceof CID$2)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:a,code:o,multihash:c,bytes:l}=n;return new CID$2(a,o,c,l||encodeCID$2(a,o,c.bytes))}else if(n[cidSymbol$2]===!0){const{version:a,multihash:o,code:c}=n,l=decode$s(o);return CID$2.create(a,c,l)}else return null}static create(e,n,a){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(a.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(n!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new CID$2(e,n,a,a.bytes)}case 1:{const o=encodeCID$2(e,n,a.bytes);return new CID$2(e,n,a,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$2.create(0,DAG_PB_CODE$2,e)}static createV1(e,n){return CID$2.create(1,e,n)}static decode(e){const[n,a]=CID$2.decodeFirst(e);if(a.length)throw new Error("Incorrect length");return n}static decodeFirst(e){const n=CID$2.inspectBytes(e),a=n.size-n.multihashSize,o=coerce$5(e.subarray(a,a+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const c=o.subarray(n.multihashSize-n.digestSize),l=new Digest$3(n.multihashCode,n.digestSize,c,o);return[n.version===0?CID$2.createV0(l):CID$2.createV1(n.codec,l),e.subarray(n.size)]}static inspectBytes(e){let n=0;const a=()=>{const[x,_]=decode$t(e.subarray(n));return n+=_,x};let o=a(),c=DAG_PB_CODE$2;if(o===18?(o=0,n=0):c=a(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const l=n,u=a(),d=a(),m=n+d,b=m-l;return{version:o,codec:c,multihashCode:u,digestSize:d,multihashSize:b,size:m}}static parse(e,n){const[a,o]=parseCIDtoBytes$2(e,n),c=CID$2.decode(o);if(c.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$1(c).set(a,e),c}};const parseCIDtoBytes$2=(t,e)=>{switch(t[0]){case"Q":{const n=e||base58btc$5;return[base58btc$5.prefix,n.decode(`${base58btc$5.prefix}${t}`)]}case base58btc$5.prefix:{const n=e||base58btc$5;return[base58btc$5.prefix,n.decode(t)]}case base32$7.prefix:{const n=e||base32$7;return[base32$7.prefix,n.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0$2=(t,e,n)=>{const{prefix:a}=n;if(a!==base58btc$5.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=e.get(a);if(o==null){const c=n.encode(t).slice(1);return e.set(a,c),c}else return o},toStringV1$2=(t,e,n)=>{const{prefix:a}=n,o=e.get(a);if(o==null){const c=n.encode(t);return e.set(a,c),c}else return o},DAG_PB_CODE$2=112,SHA_256_CODE$2=18,encodeCID$2=(t,e,n)=>{const a=encodingLength$3(t),o=a+encodingLength$3(e),c=new Uint8Array(o+n.byteLength);return encodeTo$3(t,c,0),encodeTo$3(e,c,a),c.set(n,o),c},cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),from$8=({name:t,code:e,encode:n})=>new Hasher$2(t,e,n);let Hasher$2=class{constructor(e,n,a){this.name=e,this.code=n,this.encode=a}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?create$6(this.code,n):n.then(a=>create$6(this.code,a))}else throw Error("Unknown type, must be binary type")}};function readonly$2({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*linksWithin(t,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(const[n,a]of e.entries()){const o=[...t,n],c=CID$2.asCID(a);c?yield[o.join("/"),c]:typeof a=="object"&&(yield*links$1(a,o))}else{const n=CID$2.asCID(e);n?yield[t.join("/"),n]:yield*links$1(e,t)}}function*links$1(t,e){if(t==null||t instanceof Uint8Array)return;const n=CID$2.asCID(t);n&&(yield[e.join("/"),n]);for(const[a,o]of Object.entries(t)){const c=[...e,a];yield*linksWithin(c,o)}}function*treeWithin(t,e){if(Array.isArray(e))for(const[n,a]of e.entries()){const o=[...t,n];yield o.join("/"),typeof a=="object"&&!CID$2.asCID(a)&&(yield*tree$1(a,o))}else yield*tree$1(e,t)}function*tree$1(t,e){if(!(t==null||typeof t!="object"))for(const[n,a]of Object.entries(t)){const o=[...e,n];yield o.join("/"),a!=null&&!(a instanceof Uint8Array)&&typeof a=="object"&&!CID$2.asCID(a)&&(yield*treeWithin(o,a))}}function get$1(t,e){let n=t;for(const[a,o]of e.entries()){if(n=n[o],n==null)throw new Error(`Object has no property at ${e.slice(0,a+1).map(l=>`[${JSON.stringify(l)}]`).join("")}`);const c=CID$2.asCID(n);if(c)return{value:c,remaining:e.slice(a+1).join("/")}}return{value:n}}let Block$1=class{constructor({cid:e,bytes:n,value:a}){if(!e||!n||typeof a>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=n,this.value=a,this.asBlock=this,Object.defineProperties(this,{cid:readonly$2(),bytes:readonly$2(),value:readonly$2(),asBlock:readonly$2()})}links(){return links$1(this.value,[])}tree(){return tree$1(this.value,[])}get(e="/"){return get$1(this.value,e.split("/").filter(Boolean))}};async function encode$r({value:t,codec:e,hasher:n}){if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!n)throw new Error("Missing required argument: codec or hasher");const a=e.encode(t),o=await n.digest(a),c=CID$2.create(1,e.code,o);return new Block$1({value:t,bytes:a,cid:c})}async function decode$q({bytes:t,codec:e,hasher:n}){if(!t)throw new Error('Missing required argument "bytes"');if(!e||!n)throw new Error("Missing required argument: codec or hasher");const a=e.decode(t),o=await n.digest(t),c=CID$2.create(1,e.code,o);return new Block$1({value:a,bytes:t,cid:c})}const textDecoder$2=new TextDecoder;function decodeVarint(t,e){let n=0;for(let a=0;;a+=7){if(a>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const o=t[e++];if(n+=a<28?(o&127)<<a:(o&127)*2**a,o<128)break}return[n,e]}function decodeBytes(t,e){let n;[n,e]=decodeVarint(t,e);const a=e+n;if(n<0||a<0)throw new Error("protobuf: invalid length");if(a>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,a),a]}function decodeKey(t,e){let n;return[n,e]=decodeVarint(t,e),[n&7,n>>3,e]}function decodeLink(t){const e={},n=t.length;let a=0;for(;a<n;){let o,c;if([o,c,a]=decodeKey(t,a),c===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,a]=decodeBytes(t,a)}else if(c===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let l;[l,a]=decodeBytes(t,a),e.Name=textDecoder$2.decode(l)}else if(c===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,a]=decodeVarint(t,a)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${c}`)}if(a>n)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(t){const e=t.length;let n=0,a,o=!1,c;for(;n<e;){let u,d;if([u,d,n]=decodeKey(t,n),u!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${u}`);if(d===1){if(c)throw new Error("protobuf: (PBNode) duplicate Data section");[c,n]=decodeBytes(t,n),a&&(o=!0)}else if(d===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");a||(a=[]);let m;[m,n]=decodeBytes(t,n),a.push(decodeLink(m))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${d}`)}if(n>e)throw new Error("protobuf: (PBNode) unexpected end of data");const l={};return c&&(l.Data=c),l.Links=a||[],l}const textEncoder$4=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(t,e){let n=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");n=encodeVarint(e,n,t.Tsize)-1,e[n]=24}if(typeof t.Name=="string"){const a=textEncoder$4.encode(t.Name);n-=a.length,e.set(a,n),n=encodeVarint(e,n,a.length)-1,e[n]=18}return t.Hash&&(n-=t.Hash.length,e.set(t.Hash,n),n=encodeVarint(e,n,t.Hash.length)-1,e[n]=10),e.length-n}function encodeNode(t){const e=sizeNode(t),n=new Uint8Array(e);let a=e;if(t.Data&&(a-=t.Data.length,n.set(t.Data,a),a=encodeVarint(n,a,t.Data.length)-1,n[a]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){const c=encodeLink(t.Links[o],n.subarray(0,a));a-=c,a=encodeVarint(n,a,c)-1,n[a]=18}return n}function sizeLink(t){let e=0;if(t.Hash){const n=t.Hash.length;e+=1+n+sov(n)}if(typeof t.Name=="string"){const n=textEncoder$4.encode(t.Name).length;e+=1+n+sov(n)}return typeof t.Tsize=="number"&&(e+=1+sov(t.Tsize)),e}function sizeNode(t){let e=0;if(t.Data){const n=t.Data.length;e+=1+n+sov(n)}if(t.Links)for(const n of t.Links){const a=sizeLink(n);e+=1+a+sov(a)}return e}function encodeVarint(t,e,n){e-=sov(n);const a=e;for(;n>=maxUInt32;)t[e++]=n&127|128,n/=128;for(;n>=128;)t[e++]=n&127|128,n>>>=7;return t[e]=n,a}function sov(t){return t%2===0&&t++,Math.floor((len64(t)+6)/7)}function len64(t){let e=0;return t>=maxInt32&&(t=Math.floor(t/maxInt32),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+len8tab[t]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$3=new TextEncoder;function linkComparator(t,e){if(t===e)return 0;const n=t.Name?textEncoder$3.encode(t.Name):[],a=e.Name?textEncoder$3.encode(e.Name):[];let o=n.length,c=a.length;for(let l=0,u=Math.min(o,c);l<u;++l)if(n[l]!==a[l]){o=n[l],c=a[l];break}return o<c?-1:c<o?1:0}function hasOnlyProperties(t,e){return!Object.keys(t).some(n=>!e.includes(n))}function asLink(t){if(typeof t.asCID=="object"){const n=CID$2.asCID(t);if(!n)throw new TypeError("Invalid DAG-PB form");return{Hash:n}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let n=CID$2.asCID(t.Hash);try{n||(typeof t.Hash=="string"?n=CID$2.parse(t.Hash):t.Hash instanceof Uint8Array&&(n=CID$2.decode(t.Hash)))}catch(a){throw new TypeError(`Invalid DAG-PB form: ${a.message}`)}n&&(e.Hash=n)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function prepare(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=textEncoder$3.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(asLink),e.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function validate(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(t,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const n=t.Links[e];if(!n||typeof n!="object"||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hasOnlyProperties(n,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(n.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(n.Hash==null||!n.Hash["/"]||n.Hash["/"]!==n.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(n.Name!==void 0&&typeof n.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(n.Tsize!==void 0){if(typeof n.Tsize!="number"||n.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(n.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&linkComparator(n,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(t,e=[]){return prepare({Data:t,Links:e})}function createLink(t,e,n){return asLink({Hash:n,Name:t,Tsize:e})}const name$5="dag-pb",code$7=112;function encode$q(t){validate(t);const e={};return t.Links&&(e.Links=t.Links.map(n=>{const a={};return n.Hash&&(a.Hash=n.Hash.bytes),n.Name!==void 0&&(a.Name=n.Name),n.Tsize!==void 0&&(a.Tsize=n.Tsize),a})),t.Data&&(e.Data=t.Data),encodeNode(e)}function decode$p(t){const e=decodeNode(t),n={};return e.Data&&(n.Data=e.Data),e.Links&&(n.Links=e.Links.map(a=>{const o={};try{o.Hash=CID$2.decode(a.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return a.Name!==void 0&&(o.Name=a.Name),a.Tsize!==void 0&&(o.Tsize=a.Tsize),o})),n}const dagPb=Object.freeze(Object.defineProperty({__proto__:null,code:code$7,createLink,createNode,decode:decode$p,encode:encode$q,name:name$5,prepare,validate},Symbol.toStringTag,{value:"Module"})),typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is$1(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(isBuffer$2(t))return"Buffer";const n=getObjectType(t);return n||"Object"}function isBuffer$2(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function getObjectType(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,n,a){this.major=e,this.majorEncoded=e<<5,this.name=n,this.terminal=a}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,n,a){this.type=e,this.value=n,this.encodedLength=a,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$1=new TextDecoder,textEncoder$2=new TextEncoder;function isBuffer$1(t){return useBuffer&&globalThis.Buffer.isBuffer(t)}function asU8A(t){return t instanceof Uint8Array?isBuffer$1(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const toString$a=useBuffer?(t,e,n)=>n-e>64?globalThis.Buffer.from(t.subarray(e,n)).toString("utf8"):utf8Slice(t,e,n):(t,e,n)=>n-e>64?textDecoder$1.decode(t.subarray(e,n)):utf8Slice(t,e,n),fromString$7=useBuffer?t=>t.length>64?globalThis.Buffer.from(t):utf8ToBytes(t):t=>t.length>64?textEncoder$2.encode(t):utf8ToBytes(t),fromArray=t=>Uint8Array.from(t),slice=useBuffer?(t,e,n)=>isBuffer$1(t)?new Uint8Array(t.subarray(e,n)):t.slice(e,n):(t,e,n)=>t.slice(e,n),concat$3=useBuffer?(t,e)=>(t=t.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),asU8A(globalThis.Buffer.concat(t,e))):(t,e)=>{const n=new Uint8Array(e);let a=0;for(let o of t)a+o.length>n.length&&(o=o.subarray(0,n.length-a)),n.set(o,a),a+=o.length;return n},alloc$1=useBuffer?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function compare$3(t,e){if(isBuffer$1(t)&&isBuffer$1(e))return t.compare(e);for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}function utf8ToBytes(t,e=1/0){let n;const a=t.length;let o=null;const c=[];for(let l=0;l<a;++l){if(n=t.charCodeAt(l),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&c.push(239,191,189);continue}else if(l+1===a){(e-=3)>-1&&c.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&c.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&c.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;c.push(n)}else if(n<2048){if((e-=2)<0)break;c.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;c.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;c.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return c}function utf8Slice(t,e,n){const a=[];for(;e<n;){const o=t[e];let c=null,l=o>239?4:o>223?3:o>191?2:1;if(e+l<=n){let u,d,m,b;switch(l){case 1:o<128&&(c=o);break;case 2:u=t[e+1],(u&192)===128&&(b=(o&31)<<6|u&63,b>127&&(c=b));break;case 3:u=t[e+1],d=t[e+2],(u&192)===128&&(d&192)===128&&(b=(o&15)<<12|(u&63)<<6|d&63,b>2047&&(b<55296||b>57343)&&(c=b));break;case 4:u=t[e+1],d=t[e+2],m=t[e+3],(u&192)===128&&(d&192)===128&&(m&192)===128&&(b=(o&15)<<18|(u&63)<<12|(d&63)<<6|m&63,b>65535&&b<1114112&&(c=b))}}c===null?(c=65533,l=1):c>65535&&(c-=65536,a.push(c>>>10&1023|55296),c=56320|c&1023),a.push(c),e+=l}return decodeCodePointsArray(a)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(t){const e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);let n="",a=0;for(;a<e;)n+=String.fromCharCode.apply(String,t.slice(a,a+=MAX_ARGUMENTS_LENGTH));return n}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let n=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const o=n.length-(this.maxCursor-this.cursor)-1;n.set(e,o)}else{if(n){const o=n.length-(this.maxCursor-this.cursor)-1;o<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(n=alloc$1(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let n;if(this.chunks.length===1){const a=this.chunks[0];e&&this.cursor>a.length/2?(n=this.cursor===a.length?a:a.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=slice(a,0,this.cursor)}else n=concat$3(this.chunks,this.cursor);return e&&this.reset(),n}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(t,e,n){if(t.length-e<n)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(t,e,n){assertEnoughData(t,e,1);const a=t[e];if(n.strict===!0&&a<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return a}function readUint16(t,e,n){assertEnoughData(t,e,2);const a=t[e]<<8|t[e+1];if(n.strict===!0&&a<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return a}function readUint32(t,e,n){assertEnoughData(t,e,4);const a=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(n.strict===!0&&a<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return a}function readUint64(t,e,n){assertEnoughData(t,e,8);const a=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],c=(BigInt(a)<<BigInt(32))+BigInt(o);if(n.strict===!0&&c<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(c<=Number.MAX_SAFE_INTEGER)return Number(c);if(n.allowBigInt===!0)return c;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(t,e,n,a){return new Token(Type.uint,readUint8(t,e+1,a),2)}function decodeUint16(t,e,n,a){return new Token(Type.uint,readUint16(t,e+1,a),3)}function decodeUint32(t,e,n,a){return new Token(Type.uint,readUint32(t,e+1,a),5)}function decodeUint64(t,e,n,a){return new Token(Type.uint,readUint64(t,e+1,a),9)}function encodeUint(t,e){return encodeUintValue(t,0,e.value)}function encodeUintValue(t,e,n){if(n<uintBoundaries[0]){const a=Number(n);t.push([e|a])}else if(n<uintBoundaries[1]){const a=Number(n);t.push([e|24,a])}else if(n<uintBoundaries[2]){const a=Number(n);t.push([e|25,a>>>8,a&255])}else if(n<uintBoundaries[3]){const a=Number(n);t.push([e|26,a>>>24&255,a>>>16&255,a>>>8&255,a&255])}else{const a=BigInt(n);if(a<uintBoundaries[4]){const o=[e|27,0,0,0,0,0,0,0];let c=Number(a&BigInt(4294967295)),l=Number(a>>BigInt(32)&BigInt(4294967295));o[8]=c&255,c=c>>8,o[7]=c&255,c=c>>8,o[6]=c&255,c=c>>8,o[5]=c&255,o[4]=l&255,l=l>>8,o[3]=l&255,l=l>>8,o[2]=l&255,l=l>>8,o[1]=l&255,t.push(o)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,n){return e.value<n.value?-1:e.value>n.value?1:0};function decodeNegint8(t,e,n,a){return new Token(Type.negint,-1-readUint8(t,e+1,a),2)}function decodeNegint16(t,e,n,a){return new Token(Type.negint,-1-readUint16(t,e+1,a),3)}function decodeNegint32(t,e,n,a){return new Token(Type.negint,-1-readUint32(t,e+1,a),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o!="bigint"){const c=-1-o;if(c>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,c,9)}if(a.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(t,e){const n=e.value,a=typeof n=="bigint"?n*neg1b-pos1b:n*-1-1;encodeUintValue(t,e.type.majorEncoded,a)}encodeNegint.encodedSize=function(e){const n=e.value,a=typeof n=="bigint"?n*neg1b-pos1b:n*-1-1;return a<uintBoundaries[0]?1:a<uintBoundaries[1]?2:a<uintBoundaries[2]?3:a<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,n){return e.value<n.value?1:e.value>n.value?-1:0};function toToken$3(t,e,n,a){assertEnoughData(t,e,n+a);const o=slice(t,e+n,e+n+a);return new Token(Type.bytes,o,n+a)}function decodeBytesCompact(t,e,n,a){return toToken$3(t,e,1,n)}function decodeBytes8(t,e,n,a){return toToken$3(t,e,2,readUint8(t,e+1,a))}function decodeBytes16(t,e,n,a){return toToken$3(t,e,3,readUint16(t,e+1,a))}function decodeBytes32(t,e,n,a){return toToken$3(t,e,5,readUint32(t,e+1,a))}function decodeBytes64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(t,e,9,o)}function tokenBytes(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Type.string?fromString$7(t.value):t.value),t.encodedBytes}function encodeBytes(t,e){const n=tokenBytes(e);encodeUintValue(t,e.type.majorEncoded,n.length),t.push(n)}encodeBytes.encodedSize=function(e){const n=tokenBytes(e);return encodeUintValue.encodedSize(n.length)+n.length};encodeBytes.compareTokens=function(e,n){return compareBytes(tokenBytes(e),tokenBytes(n))};function compareBytes(t,e){return t.length<e.length?-1:t.length>e.length?1:compare$3(t,e)}function toToken$2(t,e,n,a,o){const c=n+a;assertEnoughData(t,e,c);const l=new Token(Type.string,toString$a(t,e+n,e+c),c);return o.retainStringBytes===!0&&(l.byteValue=slice(t,e+n,e+c)),l}function decodeStringCompact(t,e,n,a){return toToken$2(t,e,1,n,a)}function decodeString8(t,e,n,a){return toToken$2(t,e,2,readUint8(t,e+1,a),a)}function decodeString16(t,e,n,a){return toToken$2(t,e,3,readUint16(t,e+1,a),a)}function decodeString32(t,e,n,a){return toToken$2(t,e,5,readUint32(t,e+1,a),a)}function decodeString64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(t,e,9,o,a)}const encodeString=encodeBytes;function toToken$1(t,e,n,a){return new Token(Type.array,a,n)}function decodeArrayCompact(t,e,n,a){return toToken$1(t,e,1,n)}function decodeArray8(t,e,n,a){return toToken$1(t,e,2,readUint8(t,e+1,a))}function decodeArray16(t,e,n,a){return toToken$1(t,e,3,readUint16(t,e+1,a))}function decodeArray32(t,e,n,a){return toToken$1(t,e,5,readUint32(t,e+1,a))}function decodeArray64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(t,e,9,o)}function decodeArrayIndefinite(t,e,n,a){if(a.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(t,e,1,1/0)}function encodeArray(t,e){encodeUintValue(t,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(t,e,n,a){return new Token(Type.map,a,n)}function decodeMapCompact(t,e,n,a){return toToken(t,e,1,n)}function decodeMap8(t,e,n,a){return toToken(t,e,2,readUint8(t,e+1,a))}function decodeMap16(t,e,n,a){return toToken(t,e,3,readUint16(t,e+1,a))}function decodeMap32(t,e,n,a){return toToken(t,e,5,readUint32(t,e+1,a))}function decodeMap64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(t,e,9,o)}function decodeMapIndefinite(t,e,n,a){if(a.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(t,e,1,1/0)}function encodeMap(t,e){encodeUintValue(t,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(t,e,n,a){return new Token(Type.tag,n,1)}function decodeTag8(t,e,n,a){return new Token(Type.tag,readUint8(t,e+1,a),2)}function decodeTag16(t,e,n,a){return new Token(Type.tag,readUint16(t,e+1,a),3)}function decodeTag32(t,e,n,a){return new Token(Type.tag,readUint32(t,e+1,a),5)}function decodeTag64(t,e,n,a){return new Token(Type.tag,readUint64(t,e+1,a),9)}function encodeTag(t,e){encodeUintValue(t,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(t,e,n,a){if(a.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return a.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(t,e,n,a){if(a.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(t,e,n){if(n){if(n.allowNaN===!1&&Number.isNaN(t))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(n.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,t,e)}function decodeFloat16(t,e,n,a){return createToken(readFloat16(t,e+1),3,a)}function decodeFloat32(t,e,n,a){return createToken(readFloat32(t,e+1),5,a)}function decodeFloat64(t,e,n,a){return createToken(readFloat64(t,e+1),9,a)}function encodeFloat(t,e,n){const a=e.value;if(a===!1)t.push([Type.float.majorEncoded|MINOR_FALSE]);else if(a===!0)t.push([Type.float.majorEncoded|MINOR_TRUE]);else if(a===null)t.push([Type.float.majorEncoded|MINOR_NULL]);else if(a===void 0)t.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let o,c=!1;(!n||n.float64!==!0)&&(encodeFloat16(a),o=readFloat16(ui8a,1),a===o||Number.isNaN(a)?(ui8a[0]=249,t.push(ui8a.slice(0,3)),c=!0):(encodeFloat32(a),o=readFloat32(ui8a,1),a===o&&(ui8a[0]=250,t.push(ui8a.slice(0,5)),c=!0))),c||(encodeFloat64(a),o=readFloat64(ui8a,1),ui8a[0]=251,t.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,n){const a=e.value;if(a===!1||a===!0||a===null||a===void 0)return 1;if(!n||n.float64!==!0){encodeFloat16(a);let o=readFloat16(ui8a,1);if(a===o||Number.isNaN(a))return 3;if(encodeFloat32(a),o=readFloat32(ui8a,1),a===o)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(t){if(t===1/0)dataView.setUint16(0,31744,!1);else if(t===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(t))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,t);const e=dataView.getUint32(0),n=(e&2139095040)>>23,a=e&8388607;if(n===255)dataView.setUint16(0,31744,!1);else if(n===0)dataView.setUint16(0,(t&2147483648)>>16|a>>13,!1);else{const o=n-127;o<-24?dataView.setUint16(0,0):o<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):dataView.setUint16(0,(e&2147483648)>>16|o+15<<10|a>>13,!1)}}}function readFloat16(t,e){if(t.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const n=(t[e]<<8)+t[e+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const a=n>>10&31,o=n&1023;let c;return a===0?c=o*2**-24:a!==31?c=(o+1024)*2**(a-25):c=o===0?1/0:NaN,n&32768?-c:c}function encodeFloat32(t){dataView.setFloat32(0,t,!1)}function readFloat32(t,e){if(t.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,4).getFloat32(0,!1)}function encodeFloat64(t){dataView.setFloat64(0,t,!1)}function readFloat64(t,e){if(t.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(t,e,n){throw new Error(`${decodeErrPrefix} encountered invalid minor (${n}) for major ${t[e]>>>5}`)}function errorer(t){return()=>{throw new Error(`${decodeErrPrefix} ${t}`)}}const jump=[];for(let t=0;t<=23;t++)jump[t]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let t=32;t<=55;t++)jump[t]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let t=64;t<=87;t++)jump[t]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)jump[t]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)jump[t]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let t=160;t<=183;t++)jump[t]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let t=192;t<=215;t++)jump[t]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let t=224;t<=243;t++)jump[t]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let t=0;t<24;t++)quick[t]=new Token(Type.uint,t,1);for(let t=-1;t>=-24;t--)quick[31-t]=new Token(Type.negint,t,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(t){switch(t.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return t.value.length?void 0:fromArray([64]);case Type.string:return t.value===""?fromArray([96]):void 0;case Type.array:return t.value===0?fromArray([128]):void 0;case Type.map:return t.value===0?fromArray([160]):void 0;case Type.uint:return t.value<24?fromArray([Number(t.value)]):void 0;case Type.negint:if(t.value>=-24)return fromArray([31-Number(t.value)])}}const defaultEncodeOptions={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const t=[];return t[Type.uint.major]=encodeUint,t[Type.negint.major]=encodeNegint,t[Type.bytes.major]=encodeBytes,t[Type.string.major]=encodeString,t[Type.array.major]=encodeArray,t[Type.map.major]=encodeMap,t[Type.tag.major]=encodeTag,t[Type.float.major]=encodeFloat,t}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,n){this.obj=e,this.parent=n}includes(e){let n=this;do if(n.obj===e)return!0;while(n=n.parent);return!1}static createCheck(e,n){if(e&&e.includes(n))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(n,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(t,e,n,a){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Token(Type.float,t):t>=0?new Token(Type.uint,t):new Token(Type.negint,t)},bigint(t,e,n,a){return t>=BigInt(0)?new Token(Type.uint,t):new Token(Type.negint,t)},Uint8Array(t,e,n,a){return new Token(Type.bytes,t)},string(t,e,n,a){return new Token(Type.string,t)},boolean(t,e,n,a){return t?simpleTokens.true:simpleTokens.false},null(t,e,n,a){return simpleTokens.null},undefined(t,e,n,a){return simpleTokens.undefined},ArrayBuffer(t,e,n,a){return new Token(Type.bytes,new Uint8Array(t))},DataView(t,e,n,a){return new Token(Type.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,n,a){if(!t.length)return n.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;a=Ref.createCheck(a,t);const o=[];let c=0;for(const l of t)o[c++]=objectToTokens(l,n,a);return n.addBreakTokens?[new Token(Type.array,t.length),o,new Token(Type.break)]:[new Token(Type.array,t.length),o]},Object(t,e,n,a){const o=e!=="Object",c=o?t.keys():Object.keys(t),l=o?t.size:c.length;if(!l)return n.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;a=Ref.createCheck(a,t);const u=[];let d=0;for(const m of c)u[d++]=[objectToTokens(m,n,a),objectToTokens(o?t.get(m):t[m],n,a)];return sortMapEntries(u,n),n.addBreakTokens?[new Token(Type.map,l),u,new Token(Type.break)]:[new Token(Type.map,l),u]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${t}Array`]=typeEncoders.DataView;function objectToTokens(t,e={},n){const a=is$1(t),o=e&&e.typeEncoders&&e.typeEncoders[a]||typeEncoders[a];if(typeof o=="function"){const l=o(t,a,e,n);if(l!=null)return l}const c=typeEncoders[a];if(!c)throw new Error(`${encodeErrPrefix} unsupported type: ${a}`);return c(t,a,e,n)}function sortMapEntries(t,e){e.mapSorter&&t.sort(e.mapSorter)}function mapSorter(t,e){const n=Array.isArray(t[0])?t[0][0]:t[0],a=Array.isArray(e[0])?e[0][0]:e[0];if(n.type!==a.type)return n.type.compare(a.type);const o=n.type.major,c=cborEncoders[o].compareTokens(n,a);return c===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),c}function tokensToEncoded(t,e,n,a){if(Array.isArray(e))for(const o of e)tokensToEncoded(t,o,n,a);else n[e.type.major](t,e,a)}function encodeCustom(t,e,n){const a=objectToTokens(t,n);if(!Array.isArray(a)&&n.quickEncodeToken){const o=n.quickEncodeToken(a);if(o)return o;const c=e[a.type.major];if(c.encodedSize){const l=c.encodedSize(a,n),u=new Bl(l);if(c(u,a,n),u.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${a} was wrong`);return asU8A(u.chunks[0])}}return buf.reset(),tokensToEncoded(buf,a,e,n),buf.toBytes(!0)}function encode$p(t,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(t,cborEncoders,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,n={}){this.pos=0,this.data=e,this.options=n}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let n=quick[e];if(n===void 0){const a=jump[e];if(!a)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const o=e&31;n=a(this.data,this.pos,o,this.options)}return this.pos+=n.encodedLength,n}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(t,e,n){const a=[];for(let o=0;o<t.value;o++){const c=tokensToObject(e,n);if(c===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(c===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${t.value})`);a[o]=c}return a}function tokenToMap(t,e,n){const a=n.useMaps===!0,o=a?void 0:{},c=a?new Map:void 0;for(let l=0;l<t.value;l++){const u=tokensToObject(e,n);if(u===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(u===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${l} [no key], expected ${t.value})`);if(a!==!0&&typeof u!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof u})`);if(n.rejectDuplicateMapKeys===!0&&(a&&c.has(u)||!a&&u in o))throw new Error(`${decodeErrPrefix} found repeat map key "${u}"`);const d=tokensToObject(e,n);if(d===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${l} [no value], expected ${t.value})`);a?c.set(u,d):o[u]=d}return a?c:o}function tokensToObject(t,e){if(t.done())return DONE;const n=t.next();if(n.type===Type.break)return BREAK;if(n.type.terminal)return n.value;if(n.type===Type.array)return tokenToArray(n,t,e);if(n.type===Type.map)return tokenToMap(n,t,e);if(n.type===Type.tag){if(e.tags&&typeof e.tags[n.value]=="function"){const a=tokensToObject(t,e);return e.tags[n.value](a)}throw new Error(`${decodeErrPrefix} tag not supported (${n.value})`)}throw new Error("unsupported")}function decode$o(t,e){if(!(t instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const n=e.tokenizer||new Tokeniser(t,e),a=tokensToObject(n,e);if(a===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(a===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!n.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return a}const CID_CBOR_TAG$2=42;function cidEncoder$2(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=CID$2.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG$2),new Token(Type.bytes,n)]}function undefinedEncoder$2(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$2(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$2={float64:!0,typeEncoders:{Object:cidEncoder$2,undefined:undefinedEncoder$2,number:numberEncoder$2}};function cidDecoder$2(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$2.decode(t.subarray(1))}const decodeOptions$2={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions$2.tags[CID_CBOR_TAG$2]=cidDecoder$2;const name$4="dag-cbor",code$6=113,encode$o=t=>encode$p(t,encodeOptions$2),decode$n=t=>decode$o(t,decodeOptions$2),dagCbor$1=Object.freeze(Object.defineProperty({__proto__:null,code:code$6,decode:decode$n,encode:encode$o,name:name$4},Symbol.toStringTag,{value:"Module"})),sha$2=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$6=from$8({name:"sha2-256",code:18,encode:sha$2("SHA-256")});from$8({name:"sha2-512",code:19,encode:sha$2("SHA-512")});const mhtype="sha2-256",defaultBase$2=base58btc$5,unsupportedCodecError=()=>new Error("unsupported codec"),cidifyString=t=>t&&(Array.isArray(t)?t.map(cidifyString):CID$2.parse(t)),stringifyCid=(t,e={})=>{if(!t||typeof t=="string")return t;if(Array.isArray(t))return t.map(stringifyCid);const n=e.base||defaultBase$2;return t.toString(n)},codecCodes={[code$7]:dagPb,[code$6]:dagCbor$1},codecMap={raw:dagCbor$1,"dag-pb":dagPb,"dag-cbor":dagCbor$1};async function read$7(t,e,n={}){e=cidifyString(stringifyCid(e));const a=codecCodes[e.code];if(!a)throw unsupportedCodecError();const o=await t.block.get(e,{timeout:n.timeout}),c=await decode$q({bytes:o,codec:a,hasher:sha256$6});if(c.cid.code===code$7)return JSON.parse(new TextDecoder().decode(c.value.Data));if(c.cid.code===code$6){const l=c.value;return(n.links||[]).forEach(d=>{l[d]&&(l[d]=stringifyCid(l[d],n))}),l}}async function write$3(t,e,n,a={}){a.format==="dag-pb"&&(e=a.format);const o=codecMap[e];if(!o)throw unsupportedCodecError();o.code===code$7&&(n=typeof n=="string"?n:JSON.stringify(n),n={Data:new TextEncoder().encode(n),Links:[]}),o.code===code$6&&(a.links||[]).forEach(d=>{n[d]&&(n[d]=cidifyString(n[d]))});const c=await encode$r({value:n,codec:o,hasher:sha256$6});return await t.block.put(c.bytes,{cid:c.cid.bytes,version:c.cid.version,format:e,mhtype,pin:a.pin,timeout:a.timeout}),(o.code===code$7?c.cid.toV0():c.cid).toString(a.base||defaultBase$2)}function difference$1(t,e,n){const a={},o={},c=u=>o[n?u[n]:u]=!0;t.forEach(c);const l=(u,d)=>{const m=o[n?d[n]:d]!==void 0,b=a[n?d[n]:d]!==void 0;return!m&&!b&&(u.push(d),a[n?d[n]:d]=!0),u};return e.reduce(l,[])}function findUniques(t,e){const n={},a=c=>n[c],o=c=>n[e?c[e]:c]=c;return t.forEach(o),Object.keys(n).map(a)}const isDefined$2=t=>t!=null;var defaults$4={space:"",cycles:!1,replacer:(t,e)=>e,stringify:JSON.stringify},util$8={isArray:Array.isArray,assign:Object.assign,isObject:t=>typeof t=="object",isFunction:t=>typeof t=="function",isBoolean:t=>typeof t=="boolean",isRegex:t=>t instanceof RegExp,keys:Object.keys};const DEFAULTS=defaults$4,isFunction$2=util$8.isFunction,isBoolean$2=util$8.isBoolean,isObject$2=util$8.isObject,isArray$4=util$8.isArray,isRegex=util$8.isRegex,assign$3=util$8.assign,keys$1=util$8.keys;function serialize$1(t){return t==null?t:isRegex(t)?t.toString():t.toJSON?t.toJSON():t}function stringifyDeterministic(t,e){e=e||assign$3({},DEFAULTS),isFunction$2(e)&&(e={compare:e});const n=e.space||DEFAULTS.space,a=isBoolean$2(e.cycles)?e.cycles:DEFAULTS.cycles,o=e.replacer||DEFAULTS.replacer,c=e.stringify||DEFAULTS.stringify,l=e.compare&&function(d){return function(m){return function(b,x){const _={key:b,value:m[b]},w={key:x,value:m[x]};return d(_,w)}}}(e.compare);a||c(t);const u=[];return function d(m,b,x,_){const w=n?`
`+new Array(_+1).join(n):"",S=n?": ":":";if(x=serialize$1(x),x=o.call(m,b,x),x!==void 0){if(!isObject$2(x)||x===null)return c(x);if(isArray$4(x)){const T=[];for(let B=0;B<x.length;B++){const C=d(x,B,x[B],_+1)||c(null);T.push(w+n+C)}return"["+T.join(",")+w+"]"}else{if(a){if(u.indexOf(x)!==-1)return c("[Circular]");u.push(x)}const T=keys$1(x).sort(l&&l(x)),B=[];for(let C=0;C<T.length;C++){const D=T[C],z=d(x,D,x[D],_+1);if(!z)continue;const U=c(D)+S+z;B.push(w+n+U)}return u.splice(u.indexOf(x),1),"{"+B.join(",")+w+"}"}}}({"":t},"",t,0)}var lib$1=stringifyDeterministic;const IpfsNotDefinedError=()=>new Error("Ipfs instance not defined"),IPLD_LINKS$1=["next","refs"],getWriteFormatForVersion=t=>t===0?"dag-pb":"dag-cbor",getWriteFormat=t=>Entry.isEntry(t)?getWriteFormatForVersion(t.v):getWriteFormatForVersion(t);class Entry{static async create(e,n,a,o,c=[],l,u=[],d){if(!isDefined$2(e))throw IpfsNotDefinedError();if(!isDefined$2(n))throw new Error("Identity is required, cannot create entry");if(!isDefined$2(a))throw new Error("Entry requires an id");if(!isDefined$2(o))throw new Error("Entry requires data");if(!isDefined$2(c)||!Array.isArray(c))throw new Error("'next' argument is not an array");const m=w=>w.hash?w.hash:w,b=c.filter(isDefined$2).map(m),x={hash:null,id:a,payload:o,next:b,refs:u,v:2,clock:l||new LamportClock(n.publicKey)},_=await n.provider.sign(n,Entry.toBuffer(x));return x.key=n.publicKey,x.identity=n.toJSON(),x.sig=_,x.hash=await Entry.toMultihash(e,x,d),x}static async verify(e,n){if(!e)throw new Error("Identity-provider is required, cannot verify entry");if(!Entry.isEntry(n))throw new Error("Invalid Log entry");if(!n.key)throw new Error("Entry doesn't have a key");if(!n.sig)throw new Error("Entry doesn't have a signature");const a=Entry.toEntry(n,{presigned:!0}),o=n.v<1?"v0":"v1";return e.verify(n.sig,n.key,Entry.toBuffer(a),o)}static toBuffer(e){const n=e.v===0?JSON.stringify(e):lib$1(e);return Buffer$x.from(n)}static async toMultihash(e,n,a=!1){if(!e)throw IpfsNotDefinedError();if(!Entry.isEntry(n))throw new Error("Invalid object format, cannot generate entry hash");const o=Entry.toEntry(n);return write$3(e,getWriteFormat(o.v),o,{links:IPLD_LINKS$1,pin:a})}static toEntry(e,{presigned:n=!1,includeHash:a=!1}={}){const o={hash:a?e.hash:null,id:e.id,payload:e.payload,next:e.next},c=e.v;return c>1&&(o.refs=e.refs),o.v=e.v,o.clock=new LamportClock(e.clock.id,e.clock.time),n||(o.key=e.key,c>0&&(o.identity=e.identity),o.sig=e.sig),o}static async fromMultihash(e,n){if(!e)throw IpfsNotDefinedError();if(!n)throw new Error(`Invalid hash: ${n}`);const a=await read$7(e,n,{links:IPLD_LINKS$1}),o=Entry.toEntry(a);return o.hash=n,o}static isEntry(e){return e&&e.id!==void 0&&e.next!==void 0&&e.payload!==void 0&&e.v!==void 0&&e.hash!==void 0&&e.clock!==void 0&&(e.refs!==void 0||e.v<2)}static compare(e,n){const a=LamportClock.compare(e.clock,n.clock);return a===0?e.clock.id<n.clock.id?-1:1:a}static isEqual(e,n){return e.hash===n.hash}static isParent(e,n){return n.next.indexOf(e.hash)>-1}static findChildren(e,n){let a=[],o=n.find(l=>Entry.isParent(e,l)),c=e;for(;o;)a.push(o),c=o,o=n.find(l=>Entry.isParent(c,l));return a=a.sort((l,u)=>l.clock.time>u.clock.time),a}}async function pDoWhilst(t,e){const n=await t();if(e(n))return pDoWhilst(t,e)}const{isEntry:isEntry$1,fromMultihash}=Entry,hasItems=t=>t&&t.length>0;class EntryIO{static async fetchParallel(e,n,{length:a,exclude:o=[],shouldExclude:c,timeout:l,concurrency:u,onProgressCallback:d}){const m=async w=>EntryIO.fetchAll(e,w,{length:a,exclude:o,shouldExclude:c,timeout:l,onProgressCallback:d,concurrency:u}),b=(w,S)=>w.concat(S),x=w=>w.reduce(b,[]),_=await pMap$1(n,m,{concurrency:Math.max(u||n.length,1)});return x(_)}static async fetchAll(e,n,{length:a=-1,exclude:o=[],shouldExclude:c,timeout:l,onProgressCallback:u,onStartProgressCallback:d,concurrency:m=32,delay:b=0}={}){const x=[],_={},w={},S=Array.isArray(n)?{0:n.slice()}:{0:[n]};let T=0,B=0,C=0;c=c||(()=>!1);const D=()=>Object.values(S).find(hasItems)!==void 0,z=(J,Z)=>{!w[J]&&!c(J)&&(S[Z]||(S[Z]=[]),S[Z].includes(J)||S[Z].push(J),w[J]=!0)},U=(J=1)=>{const Z=(se,ie,F)=>{const k=S[ie];for(;k.length>0&&se.length<J;){const y=k.shift();se.push(y)}return k.length===0&&delete S[ie],se};return Object.keys(S).reduce(Z,[])},Y=J=>{_[J.hash||J]=!0},X=async J=>{if(!(!J||_[J]||c(J)))return new Promise(async(Z,se)=>{const ie=l&&l>0?setTimeout(()=>{console.warn(`Warning: Couldn't fetch entry '${J}', request timed out (${l}ms)`),Z()},l):null,F=k=>{if(isEntry$1(k)&&!_[k.hash]&&!c(k.hash)){const y=k.clock.time;B=Math.max(B,y),C=x.length>0?Math.min(x[x.length-1].clock.time,C):B;const A=x.length>=a&&y>=C,I=P=>B-y+(P+1)*P;(a<0||x.length<a||A)&&!c(k.hash)&&!_[k.hash]&&(x.push(k),_[k.hash]=!0,u&&u(k)),a<0?(k.next.forEach(z),k.refs&&k.refs.forEach(z)):((x.length<a||y>C||y===C&&!_[k.hash]&&!c(k.hash))&&k.next.forEach(P=>z(P,I(0))),k.refs&&x.length+k.refs.length<=a&&k.refs.forEach((P,H)=>z(P,I(H))))}};d&&d(J,null,0,x.length);try{const k=await fromMultihash(e,J);b>0&&await((A=0)=>new Promise(I=>setTimeout(I,A)))(b),F(k),Z()}catch(k){se(k)}finally{clearTimeout(ie)}})},O=async()=>{if(T<m){const J=U(m);T+=J.length,await pMap$1(J,X,{concurrency:m}),T-=J.length}};return o.forEach(Y),await pDoWhilst(O,D),x}}function LastWriteWins$2(t,e){const n=(c,l)=>c,a=(c,l)=>SortByClockId(c,l,n);return((c,l)=>SortByClocks(c,l,a))(t,e)}function SortByEntryHash(t,e){const n=(c,l)=>c.hash<l.hash?-1:1,a=(c,l)=>SortByClockId(c,l,n);return((c,l)=>SortByClocks(c,l,a))(t,e)}function SortByClocks(t,e,n){const a=LamportClock.compare(t.clock,e.clock);return a===0?n(t,e):a}function SortByClockId(t,e,n){return t.clock.id===e.clock.id?n(t,e):t.clock.id<e.clock.id?-1:1}function NoZeroes$2(t){const e=`Your log's tiebreaker function, ${t.name}, has returned zero and therefore cannot be`;return(a,o)=>{const c=t(a,o);if(c===0)throw Error(e);return c}}const Sorting={SortByClocks,SortByClockId,LastWriteWins:LastWriteWins$2,SortByEntryHash,NoZeroes:NoZeroes$2},IPFSNotDefinedError=()=>new Error("IPFS instance not defined"),LogNotDefinedError=()=>new Error("Log instance not defined"),NotALogError=()=>new Error("Given argument is not an instance of Log"),LtOrLteMustBeStringOrArray=()=>new Error("lt or lte must be a string or array of Entries"),{LastWriteWins:LastWriteWins$1,NoZeroes:NoZeroes$1}=Sorting,{fetchAll,fetchParallel}=EntryIO,{compare:compare$2,isEntry}=Entry,IPLD_LINKS=["heads"],last=(t,e)=>t.slice(t.length-Math.min(t.length,e),t.length);class LogIO{static async toMultihash(e,n,{format:a}={}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw LogNotDefinedError();if(isDefined$2(a)||(a="dag-cbor"),n.values.length<1)throw new Error("Can't serialize an empty log");return write$3(e,a,n.toJSON(),{links:IPLD_LINKS})}static async fromMultihash(e,n,{length:a=-1,exclude:o=[],shouldExclude:c,timeout:l,concurrency:u,sortFn:d,onProgressCallback:m}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw new Error(`Invalid hash: ${n}`);const b=await read$7(e,n,{links:IPLD_LINKS});if(!b.heads||!b.id)throw NotALogError();d=d||NoZeroes$1(LastWriteWins$1);const x=B=>b.heads.includes(B.hash),_=await fetchAll(e,b.heads,{length:a,exclude:o,shouldExclude:c,timeout:l,concurrency:u,onProgressCallback:m}),w=b.id,S=a>-1?last(_.sort(d),a):_,T=S.filter(x);return{logId:w,entries:S,heads:T}}static async fromEntryHash(e,n,{length:a=-1,exclude:o=[],shouldExclude:c,timeout:l,concurrency:u,sortFn:d,onProgressCallback:m}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw new Error("'hash' must be defined");const b=Array.isArray(n)?n:[n];a=a>-1?Math.max(a,1):a;const x=await fetchParallel(e,b,{length:a,exclude:o,shouldExclude:c,timeout:l,concurrency:u,onProgressCallback:m});return d=d||NoZeroes$1(LastWriteWins$1),{entries:a>-1?last(x.sort(d),a):x}}static async fromJSON(e,n,{length:a=-1,timeout:o,concurrency:c,onProgressCallback:l}){if(!isDefined$2(e))throw IPFSNotDefinedError();const{id:u,heads:d}=n,m=d.map(_=>_.hash),x=(await fetchParallel(e,m,{length:a,timeout:o,concurrency:c,onProgressCallback:l})).sort(compare$2);return{logId:u,entries:x,heads:d}}static async fromEntry(e,n,{length:a=-1,exclude:o=[],shouldExclude:c,timeout:l,concurrency:u,onProgressCallback:d}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw new Error("'sourceEntries' must be defined");if(!Array.isArray(n)&&!isEntry(n))throw new Error("'sourceEntries' argument must be an array of Entry instances or a single Entry");Array.isArray(n)||(n=[n]),a=a>-1?Math.max(a,n.length):a;const m=n.map(D=>D.hash),b=await fetchParallel(e,m,{length:a,exclude:o,shouldExclude:c,timeout:l,concurrency:u,onProgressCallback:d}),x=n.concat(b).concat(o),_=findUniques(x,"hash").sort(compare$2),w=_.slice(a>-1?-a:-_.length),S=difference$1(w,n,"hash"),B=((D,z)=>{const U=D.slice(z.length,D.length);return z.concat(U)})(w,S);return{logId:B[B.length-1].id,entries:B}}}let AccessController$1=class{async canAppend(e,n){return!0}};class EntryIndex{constructor(e={}){this._cache=e}set(e,n){this._cache[e]=n}get(e){return this._cache[e]}delete(e){return delete this._cache[e]}add(e){this._cache=Object.assign(this._cache,e)}get length(){return Object.values(this._cache).length}}const{LastWriteWins,NoZeroes}=Sorting,randomId=()=>new Date().getTime().toString(),getHash=t=>t.hash,flatMap$1=(t,e)=>t.concat(e),getNextPointers=t=>t.next,maxClockTimeReducer=(t,e)=>Math.max(t,e.clock.time),uniqueEntriesReducer=(t,e)=>(t[e.hash]=e,t);class Log extends GSet{constructor(e,n,{logId:a,access:o,entries:c,heads:l,clock:u,sortFn:d,concurrency:m}={}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw new Error("Identity is required");if(isDefined$2(o)||(o=new AccessController$1),isDefined$2(c)&&!Array.isArray(c))throw new Error("'entries' argument must be an array of Entry instances");if(isDefined$2(l)&&!Array.isArray(l))throw new Error("'heads' argument must be an array");isDefined$2(d)||(d=LastWriteWins),super(),this._sortFn=NoZeroes(d),this._storage=e,this._id=a||randomId(),this._access=o,this._identity=n;const b=(c||[]).reduce(uniqueEntriesReducer,{});this._entryIndex=new EntryIndex(b),c=Object.values(b)||[],l=l||Log.findHeads(c),this._headsIndex=l.reduce(uniqueEntriesReducer,{}),this._nextsIndex={};const x=w=>w.next.forEach(S=>this._nextsIndex[S]=w.hash);c.forEach(x),this._length=c.length;const _=Math.max(u?u.time:0,this.heads.reduce(maxClockTimeReducer,0));this._clock=new LamportClock(this._identity.publicKey,_),this.joinConcurrency=m||16}get id(){return this._id}get clock(){return this._clock}get length(){return this._length}get values(){return Object.values(this.traverse(this.heads)).reverse()}get heads(){return Object.values(this._headsIndex).sort(this._sortFn).reverse()}get tails(){return Log.findTails(this.values)}get tailHashes(){return Log.findTailHashes(this.values)}setIdentity(e){this._identity=e;const n=Math.max(this.clock.time,this.heads.reduce(maxClockTimeReducer,0));this._clock=new LamportClock(this._identity.publicKey,n)}get(e){return this._entryIndex.get(e)}has(e){return this._entryIndex.get(e.hash||e)!==void 0}traverse(e,n=-1,a){let o=e.sort(this._sortFn).reverse(),c={};const l={};let u=0;const d=x=>this.get(x),m=x=>{!x||c[x.hash]||(o=[x,...o].sort(this._sortFn).reverse(),c[x.hash]=!0)},b=x=>{l[x.hash]=x,c[x.hash]=!0,u++};for(;o.length>0&&(u<n||n<0);){const x=o.shift();if(b(x),a&&a===x.hash)break;x.next.map(d).filter(isDefined$2).forEach(m)}return o=[],c={},l}async append(e,n=1,a=!1){const o=Math.max(this.clock.time,this.heads.reduce(maxClockTimeReducer,0))+1;this._clock=new LamportClock(this.clock.id,o);const c=Object.values(this.traverse(this.heads,Math.max(n,this.heads.length))),u=(w=>{const S=new Set;for(let T=1;T<=w;T*=2){const B=Math.min(T-1,c.length-1);S.add(c[B])}return S})(Math.min(n,c.length));c.length<n&&c[c.length-1]&&u.add(c[c.length-1]);const d=Object.keys(this.heads.reverse().reduce(uniqueEntriesReducer,{})),m=w=>!d.includes(w),b=Array.from(u).map(getHash).filter(m),x=await Entry.create(this._storage,this._identity,this.id,e,d,this.clock,b,a);if(!await this._access.canAppend(x,this._identity.provider))throw new Error(`Could not append entry, key "${this._identity.id}" is not allowed to write to the log`);return this._entryIndex.set(x.hash,x),d.forEach(w=>this._nextsIndex[w]=x.hash),this._headsIndex={},this._headsIndex[x.hash]=x,this._length++,x}iterator({gt:e=void 0,gte:n=void 0,lt:a=void 0,lte:o=void 0,amount:c=-1}={}){if(c===0)return function*(){}();if(typeof o=="string"&&(o=[this.get(o)]),typeof a=="string"&&(a=[this.get(this.get(a).next[0])]),o&&!Array.isArray(o)||a&&!Array.isArray(a))throw LtOrLteMustBeStringOrArray();const l=(o||a||this.heads).filter(isDefined$2),u=n?this.get(n).hash:e?this.get(e).hash:null,d=u?-1:c||-1,m=this.traverse(l,d,u);let b=Object.values(m);return e&&b.pop(),(e||n)&&c>-1&&(b=b.slice(b.length-c,b.length)),function*(){for(const x in b)yield b[x]}()}async join(e,n=-1){if(!isDefined$2(e))throw LogNotDefinedError();if(!Log.isLog(e))throw NotALogError();if(this.id!==e.id)return;const a=Log.difference(e,this),o=this._identity.provider,c=async S=>{if(!await this._access.canAppend(S,o))throw new Error(`Could not append entry, key "${S.identity.id}" is not allowed to write to the log`)},l=async S=>{const T=await Entry.verify(o,S),B=S.identity?S.identity.publicKey:S.key;if(!T)throw new Error(`Could not validate signature "${S.sig}" for entry "${S.hash}" and key "${B}"`)},u=Object.values(a);await pMap$1(u,async S=>{await c(S),await l(S)},{concurrency:this.joinConcurrency});const d=S=>{this.get(S.hash)||this._length++,S.next.forEach(B=>this._nextsIndex[B]=S.hash)};Object.values(a).forEach(d),this._entryIndex.add(a);const m=S=>!x.find(T=>T===S.hash),b=S=>!this._nextsIndex[S.hash],x=Object.values(a).map(getNextPointers).reduce(flatMap$1,[]),_=Log.findHeads(Object.values(Object.assign({},this._headsIndex,e._headsIndex))).filter(m).filter(b).reduce(uniqueEntriesReducer,{});if(this._headsIndex=_,n>-1){let S=this.values;S=S.slice(-n),this._entryIndex=null,this._entryIndex=new EntryIndex(S.reduce(uniqueEntriesReducer,{})),this._headsIndex=Log.findHeads(S).reduce(uniqueEntriesReducer,{}),this._length=this._entryIndex.length}const w=Object.values(this._headsIndex).reduce(maxClockTimeReducer,0);return this._clock=new LamportClock(this.clock.id,Math.max(this.clock.time,w)),this}toJSON(){return{id:this.id,heads:this.heads.sort(this._sortFn).reverse().map(getHash)}}toSnapshot(){return{id:this.id,heads:this.heads,values:this.values}}toBuffer(){return Buffer$x.from(JSON.stringify(this.toJSON()))}toString(e){return this.values.slice().reverse().map((n,a)=>{const c=Entry.findChildren(n,this.values).length;let l=new Array(Math.max(c-1,0));return l=c>1?l.fill("  "):l,l=c>0?l.concat(["└─"]):l,l.join("")+(e?e(n.payload):n.payload)}).join(`
`)}static isLog(e){return e.id!==void 0&&e.heads!==void 0&&e._entryIndex!==void 0}toMultihash({format:e}={}){return LogIO.toMultihash(this._storage,this,{format:e})}static async fromMultihash(e,n,a,{access:o,length:c=-1,exclude:l=[],shouldExclude:u,timeout:d,concurrency:m,sortFn:b,onProgressCallback:x}={}){const{logId:_,entries:w,heads:S}=await LogIO.fromMultihash(e,a,{length:c,exclude:l,shouldExclude:u,timeout:d,onProgressCallback:x,concurrency:m,sortFn:b});return new Log(e,n,{logId:_,access:o,entries:w,heads:S,sortFn:b})}static async fromEntryHash(e,n,a,{logId:o,access:c,length:l=-1,exclude:u=[],shouldExclude:d,timeout:m,concurrency:b,sortFn:x,onProgressCallback:_}={}){const{entries:w}=await LogIO.fromEntryHash(e,a,{length:l,exclude:u,shouldExclude:d,timeout:m,concurrency:b,onProgressCallback:_});return new Log(e,n,{logId:o,access:c,entries:w,sortFn:x})}static async fromJSON(e,n,a,{access:o,length:c=-1,timeout:l,sortFn:u,onProgressCallback:d}={}){const{logId:m,entries:b}=await LogIO.fromJSON(e,a,{length:c,timeout:l,onProgressCallback:d});return new Log(e,n,{logId:m,access:o,entries:b,sortFn:u})}static async fromEntry(e,n,a,{access:o,length:c=-1,exclude:l=[],timeout:u,concurrency:d,sortFn:m,onProgressCallback:b}={}){const{logId:x,entries:_}=await LogIO.fromEntry(e,a,{length:c,exclude:l,timeout:u,concurrency:d,onProgressCallback:b});return new Log(e,n,{logId:x,access:o,entries:_,sortFn:m})}static findHeads(e){const n=(l,u,d,m)=>{const b=x=>l[x]=u.hash;return u.next.forEach(b),l},a=e.reduce(n,{}),o=l=>a[l.hash]===void 0,c=(l,u)=>l.clock.id>u.clock.id;return e.filter(o).sort(c)}static findTails(e){const n={},a=[],o={};let c=[];const l=x=>{x.next.length===0&&a.push(x);const _=w=>{n[w]||(n[w]=[]),n[w].push(x)};x.next.forEach(_),c=c.concat(x.next),o[x.hash]=!0};e.forEach(l);const u=(x,_,w,S)=>x.concat(findUniques(_,"hash")),d=x=>o[x]===void 0,m=x=>n[x],b=c.filter(d).map(m).reduce(u,[]).concat(a);return findUniques(b,"hash").sort(Entry.compare)}static findTailHashes(e){const n={},a=c=>n[c.hash]=!0,o=(c,l,u,d)=>{const m=b=>{n[b]===void 0&&c.splice(0,0,b)};return l.next.reverse().forEach(m),c};return e.forEach(a),e.reduce(o,[])}static difference(e,n){const a=Object.keys(e._headsIndex),o={},c={},l=u=>{!o[u]&&!n.get(u)&&(a.push(u),o[u]=!0)};for(;a.length>0;){const u=a.shift(),d=e.get(u);d&&!n.get(u)&&d.id===n.id&&(c[d.hash]=d,o[d.hash]=!0,d.next.concat(d.refs).forEach(l))}return c}}const getNextAndRefsUnion=t=>[...new Set([...t.next,...t.refs])],flatMap=(t,e)=>t.concat(e),defaultConcurrency=32;class Replicator{constructor(e,n){this._store=e,this._concurrency=n||defaultConcurrency,this._q=new PQueue({concurrency:this._concurrency}),this._logs=[],this._fetching={},this._fetched={},this._q.on("idle",async()=>{const a=this._logs.slice();if(this._logs=[],this.onReplicationComplete&&a.length>0&&this._store._oplog)try{await this.onReplicationComplete(a),a.forEach(o=>o.values.forEach(c=>delete this._fetched[c.hash]))}catch(o){console.error(o)}})}get tasksRunning(){return this._q.pending}get tasksQueued(){return this._q.size}get unfinished(){return Object.keys(this._fetching)}async load(e){try{this._addToQueue(e)}catch(n){console.error(n)}}async _addToQueue(e){const n=o=>o&&this._store._oplog&&(this._store._oplog.has(o)||this._fetching[o]!==void 0||this._fetched[o]),a=o=>(this._fetching[o.hash||o]=!0,async()=>{o.hash&&this.onReplicationQueued&&this.onReplicationQueued(o);try{const c=await this._replicateLog(o);this._logs.push(c)}catch(c){throw console.error(c),c}delete this._fetching[o.hash||o]});if(e.length>0){const o=e.filter(c=>!n(c.hash||c)).map(c=>a(c));o.length>0&&this._q.addAll(o)}}async stop(){this._q.pause(),this._q.clear(),await this._q.onIdle(),this._logs=[],this._fetching={},this._fetched={}}async _replicateLog(e){const n=e.hash||e,a=u=>{this._fetched[u.hash]=!0,this.onReplicationProgress&&this.onReplicationProgress(u)},o=u=>u&&u!==n&&this._store._oplog&&(this._store._oplog.has(u)||this._fetching[u]!==void 0||this._fetched[u]!==void 0),c=await Log.fromEntryHash(this._store._ipfs,this._store.identity,n,{logId:this._store.id,access:this._store.access,length:-1,exclude:[],shouldExclude:o,concurrency:this._concurrency,onProgressCallback:a}),l=c.values.map(getNextAndRefsUnion).reduce(flatMap,[]);try{this._addToQueue(l)}catch(u){throw console.error(u),u}return c}}class ReplicationInfo{constructor(){this.progress=0,this.max=0}reset(){this.progress=0,this.max=0}}const fs$1=fs__default,format$4=util$9.format,EventEmitter$2=eventsExports.EventEmitter;let isElectronRenderer$1=browser$1$1.type&&browser$1$1.type==="renderer",isNodejs=!!(!isElectronRenderer$1&&browser$1$1.version);const LogLevels$1={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"};let GlobalLogLevel=LogLevels$1.DEBUG,GlobalLogfile=null,GlobalEvents=new EventEmitter$2,Colors={Black:0,Red:1,Green:2,Yellow:3,Blue:4,Magenta:5,Cyan:6,Grey:7,White:9,Default:9};isNodejs||(Colors={Black:"Black",Red:"IndianRed",Green:"LimeGreen",Yellow:"Orange",Blue:"RoyalBlue",Magenta:"Orchid",Cyan:"SkyBlue",Grey:"DimGrey",White:"White",Default:"Black"});const loglevelColors=[Colors.Cyan,Colors.Green,Colors.Yellow,Colors.Red,Colors.Default],defaultOptions={useColors:!0,color:Colors.Default,showTimestamp:!0,useLocalTime:!1,showLevel:!0,filename:GlobalLogfile,appendFile:!0};let Logger$1=class{constructor(e,n){this.category=e;let a={};Object.assign(a,defaultOptions),Object.assign(a,n),this.options=a,this.debug=this.debug.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}debug(){this._shouldLog(LogLevels$1.DEBUG)&&this._write(LogLevels$1.DEBUG,format$4.apply(null,arguments))}log(){this._shouldLog(LogLevels$1.DEBUG)&&this.debug.apply(this,arguments)}info(){this._shouldLog(LogLevels$1.INFO)&&this._write(LogLevels$1.INFO,format$4.apply(null,arguments))}warn(){this._shouldLog(LogLevels$1.WARN)&&this._write(LogLevels$1.WARN,format$4.apply(null,arguments))}error(){this._shouldLog(LogLevels$1.ERROR)&&this._write(LogLevels$1.ERROR,format$4.apply(null,arguments))}_write(e,n){(this.options.filename||GlobalLogfile)&&!this.fileWriter&&isNodejs&&(this.fileWriter=fs$1.openSync(this.options.filename||GlobalLogfile,this.options.appendFile?"a+":"w+"));let a=this._format(e,n),o=this._createLogMessage(e,n),c=this._createLogMessage(e,n,a.timestamp,a.level,a.category,a.text);this.fileWriter&&isNodejs&&fs$1.writeSync(this.fileWriter,o+`
`,null,"utf-8"),isNodejs||!this.options.useColors?(console.log(c),GlobalEvents.emit("data",this.category,e,n)):e===LogLevels$1.ERROR?this.options.showTimestamp&&this.options.showLevel?console.error(c,a.timestamp,a.level,a.category,a.text):this.options.showTimestamp&&!this.options.showLevel?console.error(c,a.timestamp,a.category,a.text):!this.options.showTimestamp&&this.options.showLevel?console.error(c,a.level,a.category,a.text):console.error(c,a.category,a.text):this.options.showTimestamp&&this.options.showLevel?console.log(c,a.timestamp,a.level,a.category,a.text):this.options.showTimestamp&&!this.options.showLevel?console.log(c,a.timestamp,a.category,a.text):!this.options.showTimestamp&&this.options.showLevel?console.log(c,a.level,a.category,a.text):console.log(c,a.category,a.text)}_format(e,n){let a="",o="",c="",l=": ";if(this.options.useColors){const u=Object.keys(LogLevels$1).map(m=>LogLevels$1[m]).indexOf(e),d=this.options.color;isNodejs?(this.options.showTimestamp&&(a="\x1B[3"+Colors.Grey+"m"),this.options.showLevel&&(o="\x1B[3"+loglevelColors[u]+";22m"),c="\x1B[3"+d+";1m",l="\x1B[0m: "):(this.options.showTimestamp&&(a="color:"+Colors.Grey),this.options.showLevel&&(o="color:"+loglevelColors[u]),c="color:"+d+"; font-weight: bold")}return{timestamp:a,level:o,category:c,text:l}}_createLogMessage(e,n,a,o,c,l){a=a||"",o=o||"",c=c||"",l=l||": ",!isNodejs&&this.options.useColors&&(this.options.showTimestamp&&(a="%c"),this.options.showLevel&&(o="%c"),c="%c",l=": %c");let u="";return this.options.showTimestamp&&!this.options.useLocalTime&&(u+=""+new Date().toISOString()+" "),this.options.showTimestamp&&this.options.useLocalTime&&(u+=""+new Date().toLocaleString()+" "),u=a+u,this.options.showLevel&&(u+=o+"["+e+"]"+(e===LogLevels$1.INFO||e===LogLevels$1.WARN?" ":"")+" "),u+=c+this.category,u+=l+n,u}_shouldLog(e){let n=typeof browser$1$1<"u"&&browser$1$1.env!==void 0&&{}.LOG!==void 0?{}.LOG.toUpperCase():null;n=typeof window<"u"&&window.LOG?window.LOG.toUpperCase():n;const a=n||GlobalLogLevel,o=Object.keys(LogLevels$1).map(u=>LogLevels$1[u]),c=o.indexOf(e),l=o.indexOf(a);return c>=l}};var src$8={Colors,LogLevels:LogLevels$1,setLogLevel:t=>{GlobalLogLevel=t},setLogfile:t=>{GlobalLogfile=t},create:(t,e)=>new Logger$1(t,e),forceBrowserMode:t=>isNodejs=!t,events:GlobalEvents};const logger$o=src$8.create("orbit-db.store",{color:src$8.Colors.Blue});src$8.setLogLevel("ERROR");const DefaultOptions={Index,maxHistory:-1,fetchEntryTimeout:null,referenceCount:32,replicationConcurrency:32,syncLocal:!1,sortFn:void 0};class Store{constructor(e,n,a,o){if(!n)throw new Error("Identity required");const c=Object.assign({},DefaultOptions);Object.assign(c,o),this.options=c,this._type="store",this.id=a.toString(),this.identity=n,this.address=a,this.dbname=a.path||"",this.events=new eventsExports.EventEmitter,this.remoteHeadsPath=path.join(this.id,"_remoteHeads"),this.localHeadsPath=path.join(this.id,"_localHeads"),this.snapshotPath=path.join(this.id,"snapshot"),this.queuePath=path.join(this.id,"queue"),this.manifestPath=path.join(this.id,"_manifest"),this._ipfs=e,this._cache=o.cache;const l={canAppend:u=>u.identity.publicKey===n.publicKey};this.access=o.accessController||l,this._oplog=new Log(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._queue=new PQueue({concurrency:1}),this._index=new this.options.Index(this.address.root),this._replicationStatus=new ReplicationInfo,this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0};try{const u=async b=>{this._recalculateReplicationMax(b.clock?b.clock.time:0),this.events.emit("replicate",this.address.toString(),b)},d=async b=>{const x=this.replicationStatus.progress,_=this.replicationStatus.max;this._recalculateReplicationStatus(b.clock.time),(this._oplog.length+1>this.replicationStatus.progress||this.replicationStatus.progress>x||this.replicationStatus.max>_)&&this.events.emit("replicate.progress",this.address.toString(),b.hash,b,this.replicationStatus.progress,this.replicationStatus.max)},m=async b=>{const x=async()=>{try{if(this._oplog&&b.length>0){for(const w of b)await this._oplog.join(w);const _=this._oplog.heads;await this._cache.set(this.remoteHeadsPath,_),logger$o.debug(`Saved heads ${_.length} [${_.map(w=>w.hash).join(", ")}]`),await this._updateIndex(),this._oplog.length>this.replicationStatus.progress&&this._recalculateReplicationStatus(this._oplog.length),this.events.emit("replicated",this.address.toString(),b.length,this)}}catch(_){console.error(_)}};await this._queue.add(x.bind(this))};this._replicator=new Replicator(this,this.options.replicationConcurrency),this._loader=this._replicator,this._replicator.onReplicationQueued=u,this._replicator.onReplicationProgress=d,this._replicator.onReplicationComplete=m}catch(u){console.error("Store Error:",u)}this.events.on("replicated.progress",(u,d,m,b,x)=>{this._procEntry(m)}),this.events.on("write",(u,d,m)=>{this._procEntry(d)})}get all(){return Array.isArray(this._index._index)?this._index._index:Object.keys(this._index._index).map(e=>this._index._index[e])}get index(){return this._index._index}get type(){return this._type}get key(){return this._key}get replicationStatus(){return this._replicationStatus}setIdentity(e){this.identity=e,this._oplog.setIdentity(e)}async close(){await this._replicator.stop(),await this._queue.onIdle(),this._replicationStatus.reset(),this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0},this.options.onClose&&await this.options.onClose(this),this.access.close&&await this.access.close();for(const e in this.events._events)this.events.removeAllListeners(e);return this._oplog=null,this.events.emit("closed",this.address.toString()),Promise.resolve()}async drop(){this.options.onDrop&&await this.options.onDrop(this),await this._cache.del(this.localHeadsPath),await this._cache.del(this.remoteHeadsPath),await this._cache.del(this.snapshotPath),await this._cache.del(this.queuePath),await this._cache.del(this.manifestPath),await this.close(),this._index=new this.options.Index(this.address.root),this._oplog=new Log(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._cache=this.options.cache}async load(e,n={}){typeof e=="object"&&(n=e,e=void 0),e=e||this.options.maxHistory;const a=n.fetchEntryTimeout||this.options.fetchEntryTimeout;this.options.onLoad&&await this.options.onLoad(this);const o=await this._cache.get(this.localHeadsPath)||[],c=await this._cache.get(this.remoteHeadsPath)||[],l=o.concat(c);l.length>0&&this.events.emit("load",this.address.toString(),l),l.forEach(d=>this._recalculateReplicationMax(d.clock.time));const u=await Log.fromEntryHash(this._ipfs,this.identity,l.map(d=>d.hash),{logId:this.id,access:this.access,sortFn:this.options.sortFn,length:e,onProgressCallback:this._onLoadProgress.bind(this),timeout:a,concurrency:this.options.replicationConcurrency});this._oplog=u,l.length>0&&await this._updateIndex(),this.events.emit("ready",this.address.toString(),this._oplog.heads)}async sync(e){return this._stats.syncRequestsReceieved+=1,logger$o.debug(`Sync request #${this._stats.syncRequestsReceieved} ${e.length}`),e.length===0?void 0:pEachSeries(e,async a=>{if(!a)return console.warn("Warning: Given input entry was 'null'."),Promise.resolve(null);const o=this.identity.provider;if(!o)throw new Error("Identity-provider is required, cannot verify entry");if(!await this.access.canAppend(a,o))return console.warn("Warning: Given input entry is not allowed in this log and was discarded (no write access)."),Promise.resolve(null);const l=Entry.toEntry(a);return await write$3(this._ipfs,getWriteFormat(l),l,{links:IPLD_LINKS$1,onlyHash:!0})!==a.hash&&console.warn(`"WARNING! Head hash didn't match the contents`),a}).then(async a=>this._replicator.load(a.filter(o=>o!==null)))}loadMoreFrom(e,n){this._replicator.load(n)}async saveSnapshot(){const e=this._replicator.unfinished,n=this._oplog.toSnapshot(),a=Buffer$x.from(JSON.stringify({id:n.id,heads:n.heads,size:n.values.length,values:n.values,type:this.type})),o=await this._ipfs.add(a);return o.hash=o.cid.toString(),await this._cache.set(this.snapshotPath,o),await this._cache.set(this.queuePath,e),logger$o.debug(`Saved snapshot: ${o.hash}, queue length: ${e.length}`),[o]}async loadFromSnapshot(e){this.options.onLoad&&await this.options.onLoad(this),this.events.emit("load",this.address.toString());const n=(c,l)=>Math.max(c,l.clock.time),a=await this._cache.get(this.queuePath);this.sync(a||[]);const o=await this._cache.get(this.snapshotPath);if(o){const c=[];for await(const d of this._ipfs.cat(o.hash))c.push(d);const l=Buffer$x.concat(c),u=JSON.parse(l.toString());this._recalculateReplicationMax(u.values.reduce(n,0)),u&&(this._oplog=await Log.fromJSON(this._ipfs,this.identity,u,{access:this.access,sortFn:this.options.sortFn,length:-1,timeout:1e3,onProgressCallback:this._onLoadProgress.bind(this)}),await this._updateIndex(),this.events.emit("replicated",this.address.toString())),this.events.emit("ready",this.address.toString(),this._oplog.heads)}else throw new Error(`Snapshot for ${this.address} not found!`);return this}async _updateIndex(){await this._index.updateIndex(this._oplog)}async syncLocal(){const e=await this._cache.get(this.localHeadsPath)||[],n=await this._cache.get(this.remoteHeadsPath)||[],a=e.concat(n);for(let o=0;o<a.length;o++){const c=a[o];if(!this._oplog.heads.includes(c)){await this.load();break}}}async _addOperation(e,{onProgressCallback:n,pin:a=!1}={}){async function o(){if(this._oplog){this.options.syncLocal&&await this.syncLocal();const c=await this._oplog.append(e,this.options.referenceCount,a);return this._recalculateReplicationStatus(c.clock.time),await this._cache.set(this.localHeadsPath,[c]),await this._updateIndex(),this.events.emit("write",this.address.toString(),c,this._oplog.heads),n&&n(c),c.hash}}return this._queue.add(o.bind(this))}_addOperationBatch(e,n,a,o){throw new Error("Not implemented!")}_procEntry(e){const{payload:n,hash:a}=e,{op:o}=n;o?this.events.emit(`log.op.${o}`,this.address.toString(),a,n):this.events.emit("log.op.none",this.address.toString(),a,n),this.events.emit("log.op",o,this.address.toString(),a,n)}_recalculateReplicationProgress(){this._replicationStatus.progress=Math.max(Math.min(this._replicationStatus.progress+1,this._replicationStatus.max),this._oplog?this._oplog.length:0)}_recalculateReplicationMax(e){this._replicationStatus.max=Math.max.apply(null,[this.replicationStatus.max,this._oplog?this._oplog.length:0,e||0])}_recalculateReplicationStatus(e){this._recalculateReplicationMax(e),this._recalculateReplicationProgress()}_onLoadProgress(e){this._recalculateReplicationStatus(e.clock.time),this.events.emit("load.progress",this.address.toString(),e.hash,e,this.replicationStatus.progress,this.replicationStatus.max)}}class EventIndex{constructor(){this._index=null}get(){return this._index?this._index.values:[]}updateIndex(e){this._index=e}}class EventStore extends Store{constructor(e,n,a,o={}){o.Index===void 0&&Object.assign(o,{Index:EventIndex}),super(e,n,a,o),this._type="eventlog",this.events.on("log.op.ADD",(c,l,u)=>{this.events.emit("db.append",u.value)})}add(e,n={}){return this._addOperation({op:"ADD",key:null,value:e},n)}get(e){return this.iterator({gte:e,limit:1}).collect()[0]}iterator(e){const n=this._query(e);let a=0;return{[Symbol.iterator](){return this},next(){let c={value:null,done:!0};return a<n.length&&(c={value:n[a],done:!1},a++),c},collect:()=>n}}_query(e){e||(e={});const n=e.limit?e.limit>-1?e.limit:this._index.get().length:1,a=this._index.get().slice();let o=[];return e.gt||e.gte?o=this._read(a,e.gt?e.gt:e.gte,n,!!e.gte):o=this._read(a.reverse(),e.lt?e.lt:e.lte,n,e.lte||!e.lt).reverse(),e.reverse&&o.reverse(),o}_read(e,n,a,o){const c=e.map(d=>d.hash).indexOf(n);let l=Math.max(c,0);return l+=o?0:1,e.slice(l).slice(0,a)}}class FeedIndex{constructor(){this._index={}}get(){return Object.keys(this._index).map(e=>this._index[e])}updateIndex(e){this._index={},e.values.reduce((n,a)=>(n.includes(a.hash)||(n.push(a.hash),a.payload.op==="ADD"?this._index[a.hash]=a:a.payload.op==="DEL"&&delete this._index[a.payload.value]),n),[])}}class FeedStore extends EventStore{constructor(e,n,a,o){o||(o={}),o.Index||Object.assign(o,{Index:FeedIndex}),super(e,n,a,o),this._type="feed"}remove(e,n={}){return this.del(e,n)}del(e,n={}){const a={op:"DEL",key:null,value:e};return this._addOperation(a,n)}}class KeyValueIndex{constructor(){this._index={}}get(e){return this._index[e]}updateIndex(e){const n=e.values,a={};for(let o=n.length-1;o>=0;o--){const c=n[o];if(!a[c.payload.key]){if(a[c.payload.key]=!0,c.payload.op==="PUT"){this._index[c.payload.key]=c.payload.value;continue}if(c.payload.op==="DEL"){delete this._index[c.payload.key];continue}}}}}class KeyValueStore extends Store{constructor(e,n,a,o){const c=Object.assign({},{Index:KeyValueIndex});Object.assign(c,o),super(e,n,a,c),this._type="keyvalue"}get all(){return this._index._index}get(e){return this._index.get(e)}set(e,n,a={}){return this.put(e,n,a)}put(e,n,a={}){return this._addOperation({op:"PUT",key:e,value:n},a)}del(e,n={}){return this._addOperation({op:"DEL",key:e,value:null},n)}}const deepEqual$1=(t,e)=>{const n=Object.getOwnPropertyNames(t),a=Object.getOwnPropertyNames(e);if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++){const c=n[o];if(t[c]!==e[c])return!1}return!0},sum$2=(t,e)=>t+e;class GCounter{constructor(e,n){this.id=e,this._counters=n||{},this._counters[this.id]=this._counters[this.id]?this._counters[this.id]:0}get value(){return Object.values(this._counters).reduce(sum$2,0)}increment(e){e&&e<1||(e==null&&(e=1),this._counters[this.id]=this._counters[this.id]+e)}merge(e){Object.entries(e._counters).forEach(([n,a])=>{this._counters[n]=Math.max(this._counters[n]||0,a)})}toJSON(){return{id:this.id,counters:this._counters}}isEqual(e){return GCounter.isEqual(this,e)}static from(e){return new GCounter(e.id,e.counters)}static isEqual(e,n){return e.id!==n.id?!1:deepEqual$1(e._counters,n._counters)}}class CounterIndex{constructor(e){this._index=new GCounter(e)}get(){return this._index}updateIndex(e){if(this._index){const n=o=>o.payload.value.counters,a=o=>this._index.merge({_counters:o});e.values.filter(o=>o&&o.payload.op==="COUNTER").map(n).forEach(a)}}}class CounterStore extends Store{constructor(e,n,a,o={}){o.Index||Object.assign(o,{Index:CounterIndex}),super(e,n,a,o),this._index=new this.options.Index(this.identity.publicKey),this._type="counter"}get value(){return this._index.get().value}inc(e,n={}){const a=new GCounter(this.identity.publicKey,Object.assign({},this._index.get()._counters));return a.increment(e),this._addOperation({op:"COUNTER",key:null,value:a.toJSON()},n)}}class DocumentIndex{constructor(){this._index={}}get(e,n=!1){return n?this._index[e]:this._index[e]?this._index[e].payload.value:null}updateIndex(e,n){const a=(o,c,l)=>{if(c.payload.op==="PUTALL"&&c.payload.docs[Symbol.iterator])for(const u of c.payload.docs)u&&o[u.key]!==!0&&(o[u.key]=!0,this._index[u.key]={payload:{op:"PUT",key:u.key,value:u.value}});else o[c.payload.key]!==!0&&(o[c.payload.key]=!0,c.payload.op==="PUT"?this._index[c.payload.key]=c:c.payload.op==="DEL"&&delete this._index[c.payload.key]);return n&&n(c,l),o};e.values.slice().reverse().reduce(a,{})}}var pMap=(t,e,n)=>new Promise((a,o)=>{n=Object.assign({concurrency:1/0},n);const c=n.concurrency;if(c<1)throw new TypeError("Expected `concurrency` to be a number from 1 and up");const l=[],u=t[Symbol.iterator]();let d=!1,m=!1,b=0,x=0;const _=()=>{if(d)return;const w=u.next(),S=x;if(x++,w.done){m=!0,b===0&&a(l);return}b++,Promise.resolve(w.value).then(T=>e(T,S)).then(T=>{l[S]=T,b--,_()},T=>{d=!0,o(T)})};for(let w=0;w<c&&(_(),!m);w++);});const replaceAll=(t,e,n)=>t.toString().split(e).join(n);class DocumentStore extends Store{constructor(e,n,a,o){o||(o={}),o.indexBy||Object.assign(o,{indexBy:"_id"}),o.Index||Object.assign(o,{Index:DocumentIndex}),super(e,n,a,o),this._type="docstore"}get(e,n=!1){e=e.toString();const a=e.split(" ");e=a.length>1?replaceAll(e,"."," ").toLowerCase():e.toLowerCase();const o=u=>a.length>1?replaceAll(u,"."," ").toLowerCase().indexOf(e)!==-1:u.toLowerCase().indexOf(e)!==-1,c=u=>this._index.get(u),l=u=>n?u.indexOf(e)!==-1:o(u);return Object.keys(this._index._index).filter(l).map(c)}query(e,n={}){const a=n.fullOp||!1;return Object.keys(this._index._index).map(o=>this._index.get(o,a)).filter(e)}batchPut(e,n){return pMap(e,(o,c)=>this._addOperationBatch({op:"PUT",key:o[this.options.indexBy],value:o},!0,c===e.length-1,n),{concurrency:1}).then(()=>this.saveSnapshot())}put(e,n={}){if(!e[this.options.indexBy])throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUT",key:e[this.options.indexBy],value:e},n)}putAll(e,n={}){if(Array.isArray(e)||(e=[e]),!e.every(a=>a[this.options.indexBy]))throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUTALL",docs:e.map(a=>({key:a[this.options.indexBy],value:a}))},n)}del(e,n={}){if(!this._index.get(e))throw new Error(`No entry with key '${e}' in the database`);return this._addOperation({op:"DEL",key:e,value:null},n)}}var pReduce$1=(t,e,n)=>new Promise((a,o)=>{const c=t[Symbol.iterator]();let l=0;const u=d=>{const m=c.next();if(m.done){a(d);return}Promise.all([d,m.value]).then(b=>{u(e(b[0],b[1],l++))}).catch(o)};u(n)}),distExports={},dist$1={get exports(){return distExports},set exports(t){distExports=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=util$9,a=Object.prototype.toString,o=d=>m=>typeof m===d,c=d=>{const m=a.call(d).slice(8,-1);return m||null},l=d=>m=>c(m)===d;function u(d){if(d===null)return"null";if(d===!0||d===!1)return"boolean";const m=typeof d;if(m==="undefined")return"undefined";if(m==="string")return"string";if(m==="number")return"number";if(m==="symbol")return"symbol";if(u.function_(d))return"Function";if(Array.isArray(d))return"Array";if(Buffer$x.isBuffer(d))return"Buffer";const b=c(d);if(b)return b;if(d instanceof String||d instanceof Boolean||d instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}(function(d){const m=Z=>typeof Z=="object";d.undefined=o("undefined"),d.string=o("string"),d.number=o("number"),d.function_=o("function"),d.null_=Z=>Z===null,d.class_=Z=>d.function_(Z)&&Z.toString().startsWith("class "),d.boolean=Z=>Z===!0||Z===!1,d.symbol=o("symbol"),d.array=Array.isArray,d.buffer=Buffer$x.isBuffer,d.nullOrUndefined=Z=>d.null_(Z)||d.undefined(Z),d.object=Z=>!d.nullOrUndefined(Z)&&(d.function_(Z)||m(Z)),d.iterable=Z=>!d.nullOrUndefined(Z)&&d.function_(Z[Symbol.iterator]),d.generator=Z=>d.iterable(Z)&&d.function_(Z.next)&&d.function_(Z.throw),d.nativePromise=l("Promise");const b=Z=>!d.null_(Z)&&m(Z)&&d.function_(Z.then)&&d.function_(Z.catch);d.promise=Z=>d.nativePromise(Z)||b(Z);const x=Z=>se=>d.function_(se)&&d.function_(se.constructor)&&se.constructor.name===Z;d.generatorFunction=x("GeneratorFunction"),d.asyncFunction=x("AsyncFunction"),d.boundFunction=Z=>d.function_(Z)&&!Z.hasOwnProperty("prototype"),d.regExp=l("RegExp"),d.date=l("Date"),d.error=l("Error"),d.map=l("Map"),d.set=l("Set"),d.weakMap=l("WeakMap"),d.weakSet=l("WeakSet"),d.int8Array=l("Int8Array"),d.uint8Array=l("Uint8Array"),d.uint8ClampedArray=l("Uint8ClampedArray"),d.int16Array=l("Int16Array"),d.uint16Array=l("Uint16Array"),d.int32Array=l("Int32Array"),d.uint32Array=l("Uint32Array"),d.float32Array=l("Float32Array"),d.float64Array=l("Float64Array"),d.arrayBuffer=l("ArrayBuffer"),d.sharedArrayBuffer=l("SharedArrayBuffer"),d.dataView=l("DataView"),d.directInstanceOf=(Z,se)=>d.object(Z)&&d.object(se)&&Object.getPrototypeOf(Z)===se.prototype,d.truthy=Z=>Boolean(Z),d.falsy=Z=>!Z,d.nan=Z=>Number.isNaN(Z);const _=new Set(["undefined","string","number","boolean","symbol"]);d.primitive=Z=>d.null_(Z)||_.has(typeof Z),d.integer=Z=>Number.isInteger(Z),d.safeInteger=Z=>Number.isSafeInteger(Z),d.plainObject=Z=>{let se;return c(Z)==="Object"&&(se=Object.getPrototypeOf(Z),se===null||se===Object.getPrototypeOf({}))};const w=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"]);d.typedArray=Z=>{const se=c(Z);return se===null?!1:w.has(se)};const S=Z=>d.safeInteger(Z)&&Z>-1;d.arrayLike=Z=>!d.nullOrUndefined(Z)&&!d.function_(Z)&&S(Z.length),d.inRange=(Z,se)=>{if(d.number(se))return Z>=Math.min(0,se)&&Z<=Math.max(se,0);if(d.array(se)&&se.length===2)return Z>=Math.min.apply(null,se)&&Z<=Math.max.apply(null,se);throw new TypeError(`Invalid range: ${n.inspect(se)}`)};const T=1,B=["innerHTML","ownerDocument","style","attributes","nodeValue"];d.domElement=Z=>d.object(Z)&&Z.nodeType===T&&d.string(Z.nodeName)&&!d.plainObject(Z)&&B.every(se=>se in Z),d.nodeStream=Z=>!d.nullOrUndefined(Z)&&m(Z)&&d.function_(Z.pipe),d.infinite=Z=>Z===1/0||Z===-1/0;const C=Z=>se=>d.integer(se)&&Math.abs(se%2)===Z;d.even=C(0),d.odd=C(1);const D=Z=>d.string(Z)&&/\S/.test(Z)===!1,z=Z=>(d.string(Z)||d.array(Z))&&Z.length===0,U=Z=>!d.map(Z)&&!d.set(Z)&&d.object(Z)&&Object.keys(Z).length===0,Y=Z=>(d.map(Z)||d.set(Z))&&Z.size===0;d.empty=Z=>d.falsy(Z)||z(Z)||U(Z)||Y(Z),d.emptyOrWhitespace=Z=>d.empty(Z)||D(Z);const X=(Z,se,ie)=>{const F=Array.prototype.slice.call(ie,1);if(d.function_(se)===!1)throw new TypeError(`Invalid predicate: ${n.inspect(se)}`);if(F.length===0)throw new TypeError("Invalid number of values");return Z.call(F,se)};function O(Z){return X(Array.prototype.some,Z,arguments)}d.any=O;function J(Z){return X(Array.prototype.every,Z,arguments)}d.all=J})(u||(u={})),Object.defineProperties(u,{class:{value:u.class_},function:{value:u.function_},null:{value:u.null_}}),e.default=u,t.exports=u,t.exports.default=u})(dist$1,distExports);const pReduce=pReduce$1,is=distExports;var pSeries=t=>{const e=[];for(const n of t){const a=is(n);if(a!=="Function")return Promise.reject(new TypeError(`Expected task to be a \`Function\`, received \`${a}\``))}return pReduce(t,(n,a)=>Promise.resolve().then(a).then(o=>{e.push(o)})).then(()=>e)};const difference=(t,e)=>new Set([...t].filter(n=>!e.has(n))),DEFAULT_OPTIONS={start:!0,pollInterval:1e3};class IpfsPubsubPeerMonitor extends eventsExports{constructor(e,n,a){super(),this._pubsub=e,this._topic=n,this._options=Object.assign({},DEFAULT_OPTIONS,a),this._peers=[],this._interval=null,this._options.start&&this.start()}get started(){return this._interval!==null}set started(e){throw new Error("'started' is read-only")}start(){this._interval&&this.stop(),this._interval=setInterval(this._pollPeers.bind(this),this._options.pollInterval),this._pollPeers()}stop(){clearInterval(this._interval),this._interval=null,this.removeAllListeners("error"),this.removeAllListeners("join"),this.removeAllListeners("leave")}async getPeers(){return this._peers=await this._pubsub.peers(this._topic),this._peers.slice()}hasPeer(e){return this._peers.includes(e)}async _pollPeers(){try{const e=await this._pubsub.peers(this._topic);IpfsPubsubPeerMonitor._emitJoinsAndLeaves(new Set(this._peers),new Set(e),this),this._peers=e}catch(e){clearInterval(this._interval),this.emit("error",e)}}static _emitJoinsAndLeaves(e,n,a){const o=l=>a.emit("join",l),c=l=>a.emit("leave",l);difference(n,e).forEach(o),difference(e,n).forEach(c)}}const logger$n=src$8.create("pubsub",{color:src$8.Colors.Yellow});src$8.setLogLevel("ERROR");const maxTopicsOpen=256;let topicsOpenCount=0;class IPFSPubsub{constructor(e,n){this._ipfs=e,this._id=n,this._subscriptions={},this._ipfs.pubsub===null&&logger$n.error("The provided version of ipfs doesn't have pubsub support. Messages will not be exchanged."),this._handleMessage=this._handleMessage.bind(this),this._ipfs.setMaxListeners&&this._ipfs.setMaxListeners(maxTopicsOpen)}async subscribe(e,n,a,o={}){if(!this._subscriptions[e]&&this._ipfs.pubsub){await this._ipfs.pubsub.subscribe(e,this._handleMessage,o);const c=new IpfsPubsubPeerMonitor(this._ipfs.pubsub,e);c.on("join",l=>{logger$n.debug(`Peer joined ${e}:`),logger$n.debug(l),this._subscriptions[e]?a(e,l):(logger$n.warn("Peer joined a room we don't have a subscription for"),logger$n.warn(e,l))}),c.on("leave",l=>logger$n.debug(`Peer ${l} left ${e}`)),c.on("error",l=>logger$n.error(l)),this._subscriptions[e]={topicMonitor:c,onMessage:n,onNewPeer:a},topicsOpenCount++,logger$n.debug("Topics open:",topicsOpenCount)}}async unsubscribe(e){this._subscriptions[e]&&(await this._ipfs.pubsub.unsubscribe(e,this._handleMessage),this._subscriptions[e].topicMonitor.stop(),delete this._subscriptions[e],logger$n.debug(`Unsubscribed from '${e}'`),topicsOpenCount--,logger$n.debug("Topics open:",topicsOpenCount))}publish(e,n,a={}){if(this._subscriptions[e]&&this._ipfs.pubsub){let o;Buffer$x.isBuffer(n)||typeof n=="string"?o=n:o=JSON.stringify(n),this._ipfs.pubsub.publish(e,Buffer$x.from(o),a)}}async disconnect(){const e=Object.keys(this._subscriptions);await pSeries(e.map(n=>this.unsubscribe.bind(this,n))),this._subscriptions={}}async _handleMessage(e){if(String(e.from)===this._id)return;let n;const a=e.topic?e.topic:e.topicIDs[0];try{n=JSON.parse(Buffer$x.from(e.data).toString())}catch{n=e.data}const o=this._subscriptions[a];o&&o.onMessage&&n&&await o.onMessage(a,n,e.from)}}const logger$m=src$8.create("cache",{color:src$8.Colors.Magenta});src$8.setLogLevel("ERROR");class Cache{constructor(e){this._store=e}get status(){return this._store.status}async close(){if(!this._store)throw new Error("No cache store found to close");this.status==="open"&&await this._store.close()}async open(){if(!this._store)throw new Error("No cache store found to open");this.status!=="open"&&await this._store.open()}async get(e){try{return JSON.parse(await this._store.get(e))}catch(n){if(n.code==="LEVEL_NOT_FOUND"||n.cause!==void 0&&n.cause.code==="LEVEL_NOT_FOUND")return null;throw n}}async set(e,n){await this._store.put(e,JSON.stringify(n)),logger$m.debug(`cache: Set ${e} to ${JSON.stringify(n)}`)}load(){}destroy(){}async del(e){await this._store.del(e)}}var browserLevel={},abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function(...e){const n=e.reduce((a,o)=>Object.assign(a,o),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,n){super(e||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$2={};let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$3}=buffer$3||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$3.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const n=this.encode(e);return Buffer$3.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$3.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:n}=textEndec();return new ViewFormat$2({encode:a=>e.encode(this.encode(a)),decode:a=>this.decode(n.decode(a)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer:Buffer$2}=buffer$3||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$1,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$7=t=>t;encodings$2.utf8=new UTF8Format$1({encode:function(t){return Buffer$2.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?textDecoder.decode(t):String(t)},decode:identity$7,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:function(t){return textDecoder.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$2.from(t.buffer,t.byteOffset,t.byteLength):Buffer$2.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});encodings$2.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$2.buffer=new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$2.from(t.buffer,t.byteOffset,t.byteLength):Buffer$2.from(String(t),"utf8")},decode:identity$7,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:Buffer$2.from(String(t),"utf8")},decode:function(t){return Buffer$2.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});encodings$2.view=new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:identity$7,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$2.from(t.buffer,t.byteOffset,t.byteLength):Buffer$2.from(String(t),"utf8")},decode:identity$7,name:`${this.name}+buffer`})}});encodings$2.hex=new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:Buffer$2.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});encodings$2.base64=new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:Buffer$2.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings$1=encodings$2,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(e){if(Array.isArray(e)){if(!e.every(n=>validFormats.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const n in encodings$1)try{this.encoding(n)}catch(a){if(a.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw a}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let n=this[kEncodings].get(e);if(n===void 0){if(typeof e=="string"&&e!==""){if(n=lookup[e],!n)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");n=from$7(e)}const{name:a,format:o}=n;if(!this[kFormats].has(o))if(this[kFormats].has("view"))n=n.createViewTranscoder();else if(this[kFormats].has("buffer"))n=n.createBufferTranscoder();else if(this[kFormats].has("utf8"))n=n.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${a}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const c of[e,a,n.name,n.commonName])this[kEncodings].set(c,n)}return n}};levelTranscoder.Transcoder=Transcoder$1;function from$7(t){if(t instanceof Encoding)return t;const e="type"in t&&typeof t.type=="string"?t.type:void 0,n=t.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(t)){case"view":return new ViewFormat({...t,name:n});case"utf8":return new UTF8Format({...t,name:n});case"buffer":return new BufferFormat({...t,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const aliases={binary:encodings$1.buffer,"utf-8":encodings$1.utf8},lookup={...encodings$1,...aliases};let anonymousCount=0;var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),nextTick=nextTickBrowser$1;catering.fromCallback=function(t,e){if(t===void 0){var n=new Promise(function(a,o){t=function(c,l){c?o(c):a(l)}});t[e!==void 0?e:"promise"]=n}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};catering.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(n){nextTick(()=>e(null,n))}).catch(function(n){nextTick(()=>e(n))})};var abstractIterator={},common$2={};common$2.getCallback=function(t,e){return typeof t=="function"?t:e};common$2.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common$2,kPromise$3=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$4=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,n,a){if(typeof e!="object"||e===null){const o=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${o}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=n[kKeyEncoding$1],this[kValueEncoding$1]=n[kValueEncoding$1],this[kLegacy]=a,this[kLimit]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!n.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let n;if(e===void 0)n=new Promise((a,o)=>{e=(c,l,u)=>{c?o(c):this[kLegacy]?l===void 0&&u===void 0?a():a([l,u]):a(l)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),n}_next(e){this.nextTick(e)}nextv(e,n,a){return a=getCallback$2(n,a),a=fromCallback$3(a,kPromise$3),n=getOptions$2(n,emptyOptions$1),Number.isInteger(e)?(this[kClosing]?this.nextTick(a,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(a,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=a,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,n,this[kHandleMany$1])),a[kPromise$3]):(this.nextTick(a,new TypeError("The first argument 'size' must be an integer")),a[kPromise$3])}_nextv(e,n,a){const o=[],c=(l,u,d)=>{if(l)return a(l);if(this[kLegacy]?u===void 0&&d===void 0:u===void 0)return a(null,o);o.push(this[kLegacy]?[u,d]:u),o.length===e?a(null,o):this._next(c)};this._next(c)}all(e,n){return n=getCallback$2(e,n),n=fromCallback$3(n,kPromise$3),e=getOptions$2(e,emptyOptions$1),this[kClosing]?this.nextTick(n,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(n,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=n,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),n[kPromise$3]}_all(e,n){let a=this[kCount];const o=[],c=()=>{const u=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-a):1e3;u<=0?this.nextTick(n,null,o):this._nextv(u,emptyOptions$1,l)},l=(u,d)=>{u?n(u):d.length===0?n(null,o):(o.push.apply(o,d),a+=d.length,c())};c()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$4:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,n,a){this[kAutoClose]?this.close(e.bind(null,n,a)):e(n,a)}seek(e,n){if(n=getOptions$2(n,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const a=this.db.keyEncoding(n.keyEncoding||this[kKeyEncoding$1]),o=a.format;n.keyEncoding!==o&&(n={...n,keyEncoding:o});const c=this.db.prefixKey(a.encode(e),o);this._seek(c,n)}}}_seek(e,n){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$3(e,kPromise$3),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$3]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const n of e)n()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(e,n){super(e,n,!0),this[kKeys]=n.keys!==!1,this[kValues]=n.values!==!1}[kHandleOne$1](e,n,a){const o=this[kFinishWork]();if(e)return o(e);try{n=this[kKeys]&&n!==void 0?this[kKeyEncoding$1].decode(n):void 0,a=this[kValues]&&a!==void 0?this[kValueEncoding$1].decode(a):void 0}catch(c){return o(new IteratorDecodeError("entry",c))}n===void 0&&a===void 0||this[kCount]++,o(null,n,a)}[kHandleMany$1](e,n){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(const o of n){const c=o[0],l=o[1];o[0]=this[kKeys]&&c!==void 0?this[kKeyEncoding$1].decode(c):void 0,o[1]=this[kValues]&&l!==void 0?this[kValueEncoding$1].decode(l):void 0}}catch(o){return this[kReturnMany](a,new IteratorDecodeError("entries",o))}this[kCount]+=n.length,this[kReturnMany](a,null,n)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},AbstractKeyIterator$2=class extends CommonIterator{constructor(e,n){super(e,n,!1)}[kHandleOne$1](e,n){const a=this[kFinishWork]();if(e)return a(e);try{n=n!==void 0?this[kKeyEncoding$1].decode(n):void 0}catch(o){return a(new IteratorDecodeError("key",o))}n!==void 0&&this[kCount]++,a(null,n)}[kHandleMany$1](e,n){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(let o=0;o<n.length;o++){const c=n[o];n[o]=c!==void 0?this[kKeyEncoding$1].decode(c):void 0}}catch(o){return this[kReturnMany](a,new IteratorDecodeError("keys",o))}this[kCount]+=n.length,this[kReturnMany](a,null,n)}},AbstractValueIterator$2=class extends CommonIterator{constructor(e,n){super(e,n,!1)}[kHandleOne$1](e,n){const a=this[kFinishWork]();if(e)return a(e);try{n=n!==void 0?this[kValueEncoding$1].decode(n):void 0}catch(o){return a(new IteratorDecodeError("value",o))}n!==void 0&&this[kCount]++,a(null,n)}[kHandleMany$1](e,n){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(let o=0;o<n.length;o++){const c=n[o];n[o]=c!==void 0?this[kValueEncoding$1].decode(c):void 0}}catch(o){return this[kReturnMany](a,new IteratorDecodeError("values",o))}this[kCount]+=n.length,this[kReturnMany](a,null,n)}};class IteratorDecodeError extends ModuleError$6{constructor(e,n){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:n})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,t.split(" ")[0],{get(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$1{constructor(e,n){super(e,n),this[kIterator]=e.iterator({...n,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$1{constructor(e,n){super(e,n),this[kIterator]=e.iterator({...n,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const t of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=t===DefaultKeyIterator$1,n=e?a=>a[0]:a=>a[1];t.prototype._next=function(a){this[kCallback]=a,this[kIterator].next(this[kHandleOne])},t.prototype[kHandleOne]=function(a,o,c){const l=this[kCallback];a?l(a):l(null,e?o:c)},t.prototype._nextv=function(a,o,c){this[kCallback]=c,this[kIterator].nextv(a,o,this[kHandleMany])},t.prototype._all=function(a,o){this[kCallback]=o,this[kIterator].all(a,this[kHandleMany])},t.prototype[kHandleMany]=function(a,o){const c=this[kCallback];a?c(a):c(null,o.map(n))},t.prototype._seek=function(a,o){this[kIterator].seek(a,o)},t.prototype._close=function(a){this[kIterator].close(a)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.iterator(n),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.keys(n),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.values(n),this.db.defer(()=>this[kUndefer$1]())}};for(const t of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])t.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},t.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,n,a){this[kNut]!==null?this[kNut].nextv(e,n,a):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,n,a)):this.nextTick(a,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,n){this[kNut]!==null?this[kNut].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(e,n)):this.nextTick(n,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,n){this[kNut]!==null?this[kNut]._seek(e,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,n))},t.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common$2,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(e){if(typeof e!="object"||e===null){const n=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,n,a){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const o=this.db._checkKey(e)||this.db._checkValue(n);if(o)throw o;const c=a&&a.sublevel!=null?a.sublevel:this.db,l=a,u=c.keyEncoding(a&&a.keyEncoding),d=c.valueEncoding(a&&a.valueEncoding),m=u.format;a={...a,keyEncoding:m,valueEncoding:d.format},c!==this.db&&(a.sublevel=null);const b=c.prefixKey(u.encode(e),m),x=d.encode(n);return this._put(b,x,a),this[kOperations$1].push({...l,type:"put",key:e,value:n}),this}_put(e,n,a){}del(e,n){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const a=this.db._checkKey(e);if(a)throw a;const o=n&&n.sublevel!=null?n.sublevel:this.db,c=n,l=o.keyEncoding(n&&n.keyEncoding),u=l.format;return n={...n,keyEncoding:u},o!==this.db&&(n.sublevel=null),this._del(o.prefixKey(l.encode(e),u),n),this[kOperations$1].push({...c,type:"del",key:e}),this}_del(e,n){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,n){return n=getCallback$1(e,n),n=fromCallback$2(n,kPromise$2),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(n,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[kStatus$1]="writing",this._write(e,a=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>n(a)),a||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),n[kPromise$2]}_write(e,n){}close(e){return e=fromCallback$2(e,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$2]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const n of e)n()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,n,a){this[kEncoded].push({...a,type:"put",key:e,value:n})}_del(e,n){this[kEncoded].push({...n,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,n){this.db.status==="opening"?this.db.defer(()=>this._write(e,n)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(n):this.db._batch(this[kEncoded],e,n):this.nextTick(n,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty$3=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(t,e){const n={};for(const a in t)if(hasOwnProperty$3.call(t,a)&&!(a==="keyEncoding"||a==="valueEncoding")){if(a==="start"||a==="end")throw new ModuleError$2(`The legacy range option '${a}' has been removed`,{code:"LEVEL_LEGACY"});if(a==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(a)?n[a]=e.encode(t[a]):n[a]=t[a]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:globalThis):t=>(promise||(promise=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const t=queueMicrotask_1;return nextTickBrowser=function(e,...n){n.length===0?t(e):t(()=>e(...n))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:n}=abstractIterator,a=Symbol("unfix"),o=Symbol("iterator"),c=Symbol("handleOne"),l=Symbol("handleMany"),u=Symbol("callback");class d extends t{constructor(_,w,S,T){super(_,w),this[o]=S,this[a]=T,this[c]=this[c].bind(this),this[l]=this[l].bind(this),this[u]=null}[c](_,w,S){const T=this[u];if(_)return T(_);w!==void 0&&(w=this[a](w)),T(_,w,S)}[l](_,w){const S=this[u];if(_)return S(_);for(const T of w){const B=T[0];B!==void 0&&(T[0]=this[a](B))}S(_,w)}}class m extends e{constructor(_,w,S,T){super(_,w),this[o]=S,this[a]=T,this[c]=this[c].bind(this),this[l]=this[l].bind(this),this[u]=null}[c](_,w){const S=this[u];if(_)return S(_);w!==void 0&&(w=this[a](w)),S(_,w)}[l](_,w){const S=this[u];if(_)return S(_);for(let T=0;T<w.length;T++){const B=w[T];B!==void 0&&(w[T]=this[a](B))}S(_,w)}}class b extends n{constructor(_,w,S){super(_,w),this[o]=S}}for(const x of[d,m])x.prototype._next=function(_){this[u]=_,this[o].next(this[c])},x.prototype._nextv=function(_,w,S){this[u]=S,this[o].nextv(_,w,this[l])},x.prototype._all=function(_,w){this[u]=w,this[o].all(_,this[l])};for(const x of[b])x.prototype._next=function(_){this[o].next(_)},x.prototype._nextv=function(_,w,S){this[o].nextv(_,w,S)},x.prototype._all=function(_,w){this[o].all(_,w)};for(const x of[d,m,b])x.prototype._seek=function(_,w){this[o].seek(_,w)},x.prototype._close=function(_){this[o].close(_)};return abstractSublevelIterator.AbstractSublevelIterator=d,abstractSublevelIterator.AbstractSublevelKeyIterator=m,abstractSublevelIterator.AbstractSublevelValueIterator=b,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const t=moduleError,{Buffer:e}=buffer$3||{},{AbstractSublevelIterator:n,AbstractSublevelKeyIterator:a,AbstractSublevelValueIterator:o}=requireAbstractSublevelIterator(),c=Symbol("prefix"),l=Symbol("upperBound"),u=Symbol("prefixRange"),d=Symbol("parent"),m=Symbol("unfix"),b=new TextEncoder,x={separator:"!"};abstractSublevel=function({AbstractLevel:C}){class D extends C{static defaults(U){if(typeof U=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(U&&U.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return U==null?x:U.separator?U:{...U,separator:"!"}}constructor(U,Y,X){const{separator:O,manifest:J,...Z}=D.defaults(X);Y=B(Y,O);const se=O.charCodeAt(0)+1,ie=U[d]||U;if(!b.encode(Y).every(y=>y>se&&y<127))throw new t(`Prefix must use bytes > ${se} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(_(ie,J),Z);const F=(U.prefix||"")+O+Y+O,k=F.slice(0,-1)+String.fromCharCode(se);this[d]=ie,this[c]=new S(F),this[l]=new S(k),this[m]=new T,this.nextTick=ie.nextTick}prefixKey(U,Y){if(Y==="utf8")return this[c].utf8+U;if(U.byteLength===0)return this[c][Y];if(Y==="view"){const X=this[c].view,O=new Uint8Array(X.byteLength+U.byteLength);return O.set(X,0),O.set(U,X.byteLength),O}else{const X=this[c].buffer;return e.concat([X,U],X.byteLength+U.byteLength)}}[u](U,Y){U.gte!==void 0?U.gte=this.prefixKey(U.gte,Y):U.gt!==void 0?U.gt=this.prefixKey(U.gt,Y):U.gte=this[c][Y],U.lte!==void 0?U.lte=this.prefixKey(U.lte,Y):U.lt!==void 0?U.lt=this.prefixKey(U.lt,Y):U.lte=this[l][Y]}get prefix(){return this[c].utf8}get db(){return this[d]}_open(U,Y){this[d].open({passive:!0},Y)}_put(U,Y,X,O){this[d].put(U,Y,X,O)}_get(U,Y,X){this[d].get(U,Y,X)}_getMany(U,Y,X){this[d].getMany(U,Y,X)}_del(U,Y,X){this[d].del(U,Y,X)}_batch(U,Y,X){this[d].batch(U,Y,X)}_clear(U,Y){this[u](U,U.keyEncoding),this[d].clear(U,Y)}_iterator(U){this[u](U,U.keyEncoding);const Y=this[d].iterator(U),X=this[m].get(this[c].utf8.length,U.keyEncoding);return new n(this,U,Y,X)}_keys(U){this[u](U,U.keyEncoding);const Y=this[d].keys(U),X=this[m].get(this[c].utf8.length,U.keyEncoding);return new a(this,U,Y,X)}_values(U){this[u](U,U.keyEncoding);const Y=this[d].values(U);return new o(this,U,Y)}}return{AbstractSublevel:D}};const _=function(C,D){return{...C.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...D,encodings:{utf8:w(C,"utf8"),buffer:w(C,"buffer"),view:w(C,"view")}}},w=function(C,D){return C.supports.encodings[D]?C.keyEncoding(D).name===D:!1};class S{constructor(D){this.utf8=D,this.view=b.encode(D),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class T{constructor(){this.cache=new Map}get(D,z){let U=this.cache.get(z);return U===void 0&&(z==="view"?U=function(Y,X){return X.subarray(Y)}.bind(null,D):U=function(Y,X){return X.slice(Y)}.bind(null,D),this.cache.set(z,U)),U}}const B=function(C,D){let z=0,U=C.length;for(;z<U&&C[z]===D;)z++;for(;U>z&&C[U-1]===D;)U--;return C.slice(z,U)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter:EventEmitter$1}=eventsExports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common$2,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop$3=()=>{};let AbstractLevel$1=class extends EventEmitter$1{constructor(e,n){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");n=getOptions(n);const{keyEncoding:a,valueEncoding:o,passive:c,...l}=n;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=l,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(a||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(o||"utf8");for(const u of this[kTranscoder].encodings())this.supports.encodings[u.commonName]||(this.supports.encodings[u.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop$3)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e??this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e??this[kValueEncoding])}open(e,n){n=getCallback(e,n),n=fromCallback$1(n,kPromise$1),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const a=o=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,o?()=>a(o):a):this[kStatus]!=="open"?n(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:o})):n()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,a):this.nextTick(a):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,o=>{if(o){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),a(o)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),a()})):this[kStatus]==="open"?this.nextTick(a):this.once(kLanded,()=>this.open(e,n)),n[kPromise$1]}_open(e,n){this.nextTick(n)}close(e){e=fromCallback$1(e,kPromise$1);const n=a=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,a?n(a):n):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:a})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const a=o=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),n(o)};this[kCloseResources](()=>{this._close(o=>{if(o)return a(o);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),n()})})}else this[kStatus]==="closed"?this.nextTick(n):this.once(kLanded,()=>this.close(e));return e[kPromise$1]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let n=this[kResources].size,a=!0;const o=()=>{--n===0&&(a?this.nextTick(e):e())};for(const c of this[kResources])c.close(o);a=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,n,a){if(a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(a,o),a[kPromise$1];const c=this.keyEncoding(n.keyEncoding),l=this.valueEncoding(n.valueEncoding),u=c.format,d=l.format;return(n.keyEncoding!==u||n.valueEncoding!==d)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:d})),this._get(this.prefixKey(c.encode(e),u),n,(m,b)=>{if(m)return(m.code==="LEVEL_NOT_FOUND"||m.notFound||/NotFound/i.test(m))&&(m.code||(m.code="LEVEL_NOT_FOUND"),m.notFound||(m.notFound=!0),m.status||(m.status=404)),a(m);try{b=l.decode(b)}catch(x){return a(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:x}))}a(null,b)}),a[kPromise$1]}_get(e,n,a){this.nextTick(a,new Error("NotFound"))}getMany(e,n,a){if(a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];if(!Array.isArray(e))return this.nextTick(a,new TypeError("The first argument 'keys' must be an array")),a[kPromise$1];if(e.length===0)return this.nextTick(a,null,[]),a[kPromise$1];const o=this.keyEncoding(n.keyEncoding),c=this.valueEncoding(n.valueEncoding),l=o.format,u=c.format;(n.keyEncoding!==l||n.valueEncoding!==u)&&(n=Object.assign({},n,{keyEncoding:l,valueEncoding:u}));const d=new Array(e.length);for(let m=0;m<e.length;m++){const b=e[m],x=this._checkKey(b);if(x)return this.nextTick(a,x),a[kPromise$1];d[m]=this.prefixKey(o.encode(b),l)}return this._getMany(d,n,(m,b)=>{if(m)return a(m);try{for(let x=0;x<b.length;x++)b[x]!==void 0&&(b[x]=c.decode(b[x]))}catch(x){return a(new ModuleError$1(`Could not decode one or more of ${b.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:x}))}a(null,b)}),a[kPromise$1]}_getMany(e,n,a){this.nextTick(a,null,new Array(e.length).fill(void 0))}put(e,n,a,o){if(o=getCallback(a,o),o=fromCallback$1(o,kPromise$1),a=getOptions(a,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,n,a,o)),o[kPromise$1];if(maybeError(this,o))return o[kPromise$1];const c=this._checkKey(e)||this._checkValue(n);if(c)return this.nextTick(o,c),o[kPromise$1];const l=this.keyEncoding(a.keyEncoding),u=this.valueEncoding(a.valueEncoding),d=l.format,m=u.format;(a.keyEncoding!==d||a.valueEncoding!==m)&&(a=Object.assign({},a,{keyEncoding:d,valueEncoding:m}));const b=this.prefixKey(l.encode(e),d),x=u.encode(n);return this._put(b,x,a,_=>{if(_)return o(_);this.emit("put",e,n),o()}),o[kPromise$1]}_put(e,n,a,o){this.nextTick(o)}del(e,n,a){if(a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(a,o),a[kPromise$1];const c=this.keyEncoding(n.keyEncoding),l=c.format;return n.keyEncoding!==l&&(n=Object.assign({},n,{keyEncoding:l})),this._del(this.prefixKey(c.encode(e),l),n,u=>{if(u)return a(u);this.emit("del",e),a()}),a[kPromise$1]}_del(e,n,a){this.nextTick(a)}batch(e,n,a){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?a=e:a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];if(!Array.isArray(e))return this.nextTick(a,new TypeError("The first argument 'operations' must be an array")),a[kPromise$1];if(e.length===0)return this.nextTick(a),a[kPromise$1];const o=new Array(e.length),{keyEncoding:c,valueEncoding:l,...u}=n;for(let d=0;d<e.length;d++){if(typeof e[d]!="object"||e[d]===null)return this.nextTick(a,new TypeError("A batch operation must be an object")),a[kPromise$1];const m=Object.assign({},e[d]);if(m.type!=="put"&&m.type!=="del")return this.nextTick(a,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),a[kPromise$1];const b=this._checkKey(m.key);if(b)return this.nextTick(a,b),a[kPromise$1];const x=m.sublevel!=null?m.sublevel:this,_=x.keyEncoding(m.keyEncoding||c),w=_.format;if(m.key=x.prefixKey(_.encode(m.key),w),m.keyEncoding=w,m.type==="put"){const S=this._checkValue(m.value);if(S)return this.nextTick(a,S),a[kPromise$1];const T=x.valueEncoding(m.valueEncoding||l);m.value=T.encode(m.value),m.valueEncoding=T.format}x!==this&&(m.sublevel=null),o[d]=m}return this._batch(o,u,d=>{if(d)return a(d);this.emit("batch",e),a()}),a[kPromise$1]}_batch(e,n,a){this.nextTick(a)}sublevel(e,n){return this._sublevel(e,AbstractSublevel.defaults(n))}_sublevel(e,n){return new AbstractSublevel(this,e,n)}prefixKey(e,n){return e}clear(e,n){if(n=getCallback(e,n),n=fromCallback$1(n,kPromise$1),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];const a=e,o=this.keyEncoding(e.keyEncoding);return e=rangeOptions(e,o),e.keyEncoding=o.format,e.limit===0?this.nextTick(n):this._clear(e,c=>{if(c)return n(c);this.emit("clear",a),n()}),n[kPromise$1]}_clear(e,n){this.nextTick(n)}iterator(e){const n=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,n),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=n.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const n=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,n),e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=n.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const n=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,n),e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=n.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const n of e)n()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(t,e){return t[kStatus]!=="open"?(t.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(t,e,n){if(typeof e!="number")throw new Error("second argument must be a Number");let a,o,c,l,u,d=!0,m;Array.isArray(t)?(a=[],c=o=t.length):(l=Object.keys(t),a={},c=o=l.length);function b(_){function w(){n&&n(_,a),n=null}d?queueMicrotask$1(w):w()}function x(_,w,S){if(a[_]=S,w&&(u=!0),--c===0||w)b(w);else if(!u&&m<o){let T;l?(T=l[m],m+=1,t[T](function(B,C){x(T,B,C)})):(T=m,m+=1,t[T](function(B,C){x(T,B,C)}))}}m=e,c?l?l.some(function(_,w){return t[_](function(S,T){x(_,S,T)}),w===e-1}):t.some(function(_,w){return _(function(S,T){x(w,S,T)}),w===e-1}):b(null),d=!1}var iterator={},keyRange=function(e){const n=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,a=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,o=e.gte===void 0,c=e.lte===void 0;return n!==void 0&&a!==void 0?IDBKeyRange.bound(n,a,o,c):n!==void 0?IDBKeyRange.lowerBound(n,o):a!==void 0?IDBKeyRange.upperBound(a,c):null};const textEncoder=new TextEncoder;var deserialize$2=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):textEncoder.encode(t)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};let Iterator$1=class extends AbstractIterator{constructor(e,n,a){super(e,a),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=a,this[kCurrentOptions]={...a},this[kPosition]=void 0,this[kLocation$1]=n,this[kFirst]=!0}_nextv(e,n,a){if(this[kFirst]=!1,this[kFinished])return this.nextTick(a,null,[]);if(this[kCache].length>0)return e=Math.min(e,this[kCache].length),this.nextTick(a,null,this[kCache].splice(0,e));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let o;try{o=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(a,null,[])}const c=this.db.db.transaction([this[kLocation$1]],"readonly"),l=c.objectStore(this[kLocation$1]),u=[];if(this[kOptions].reverse){const d=!this[kOptions].values&&l.openKeyCursor?"openKeyCursor":"openCursor";l[d](o,"prev").onsuccess=m=>{const b=m.target.result;if(b){const{key:x,value:_}=b;this[kPosition]=x,u.push([this[kOptions].keys&&x!==void 0?deserialize$1(x):void 0,this[kOptions].values&&_!==void 0?deserialize$1(_):void 0]),u.length<e?b.continue():maybeCommit(c)}else this[kFinished]=!0}}else{let d,m;const b=()=>{if(d===void 0||m===void 0)return;const x=Math.max(d.length,m.length);x===0||e===1/0?this[kFinished]=!0:this[kPosition]=d[x-1],u.length=x;for(let _=0;_<x;_++){const w=d[_],S=m[_];u[_]=[this[kOptions].keys&&w!==void 0?deserialize$1(w):void 0,this[kOptions].values&&S!==void 0?deserialize$1(S):void 0]}maybeCommit(c)};this[kOptions].keys||e<1/0?l.getAllKeys(o,e<1/0?e:void 0).onsuccess=x=>{d=x.target.result,b()}:(d=[],this.nextTick(b)),this[kOptions].values?l.getAll(o,e<1/0?e:void 0).onsuccess=x=>{m=x.target.result,b()}:(m=[],this.nextTick(b))}c.onabort=()=>{a(c.error||new Error("aborted by user")),a=null},c.oncomplete=()=>{a(null,u),a=null}}_next(e){if(this[kCache].length>0){const[n,a]=this[kCache].shift();this.nextTick(e,null,n,a)}else if(this[kFinished])this.nextTick(e);else{let n=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,n=1),this._nextv(n,emptyOptions,(a,o)=>{if(a)return e(a);this[kCache]=o,this._next(e)})}}_all(e,n){this[kFirst]=!1;const a=this[kCache].splice(0,this[kCache].length),o=this.limit-this.count-a.length;if(o<=0)return this.nextTick(n,null,a);this._nextv(o,emptyOptions,(c,l)=>{if(c)return n(c);a.length>0&&(l=a.concat(l)),n(null,l)})}_seek(e,n){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let a;try{a=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}a!==null&&!a.includes(e)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=e:this[kCurrentOptions].gte=e}};iterator.Iterator=Iterator$1;function maybeCommit(t){typeof t.commit=="function"&&t.commit()}var clear$1=function(e,n,a,o,c){if(o.limit===0)return e.nextTick(c);const l=e.db.transaction([n],"readwrite"),u=l.objectStore(n);let d=0;l.oncomplete=function(){c()},l.onabort=function(){c(l.error||new Error("aborted by user"))};const m=u.openKeyCursor?"openKeyCursor":"openCursor",b=o.reverse?"prev":"next";u[m](a,b).onsuccess=function(x){const _=x.target.result;_&&(u.delete(_.key).onsuccess=function(){(o.limit<=0||++d<o.limit)&&_.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(e,n,a){if(typeof n=="function"||typeof a=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:o,version:c,...l}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},l),typeof e!="string")throw new Error("constructor requires a location string argument");this[kLocation]=e,this[kNamePrefix]=o??DEFAULT_PREFIX,this[kVersion]=parseInt(c||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(e,n){const a=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);a.onerror=function(){n(a.error||new Error("unknown error"))},a.onsuccess=()=>{this[kIDB]=a.result,n()},a.onupgradeneeded=o=>{const c=o.target.result;c.objectStoreNames.contains(this[kLocation])||c.createObjectStore(this[kLocation])}}[kStore](e){return this[kIDB].transaction([this[kLocation]],e).objectStore(this[kLocation])}[kOnComplete](e,n){const a=e.transaction;a.onabort=function(){n(a.error||new Error("aborted by user"))},a.oncomplete=function(){n(null,e.result)}}_get(e,n,a){const o=this[kStore]("readonly");let c;try{c=o.get(e)}catch(l){return this.nextTick(a,l)}this[kOnComplete](c,function(l,u){if(l)return a(l);if(u===void 0)return a(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));a(null,deserialize(u))})}_getMany(e,n,a){const o=this[kStore]("readonly"),c=e.map(l=>u=>{let d;try{d=o.get(l)}catch(m){return u(m)}d.onsuccess=()=>{const m=d.result;u(null,m===void 0?m:deserialize(m))},d.onerror=m=>{m.stopPropagation(),u(d.error)}});parallel(c,16,a)}_del(e,n,a){const o=this[kStore]("readwrite");let c;try{c=o.delete(e)}catch(l){return this.nextTick(a,l)}this[kOnComplete](c,a)}_put(e,n,a,o){const c=this[kStore]("readwrite");let l;try{l=c.put(n,e)}catch(u){return this.nextTick(o,u)}this[kOnComplete](l,o)}_iterator(e){return new Iterator(this,this[kLocation],e)}_batch(e,n,a){const o=this[kStore]("readwrite"),c=o.transaction;let l=0,u;c.onabort=function(){a(u||c.error||new Error("aborted by user"))},c.oncomplete=function(){a()};function d(){const m=e[l++],b=m.key;let x;try{x=m.type==="del"?o.delete(b):o.put(m.value,b)}catch(_){u=_,c.abort();return}l<e.length?x.onsuccess=d:typeof c.commit=="function"&&c.commit()}d()}_clear(e,n){let a,o;try{a=createKeyRange(e)}catch{return this.nextTick(n)}if(e.limit>=0)return clear(this,this[kLocation],a,e,n);try{const c=this[kStore]("readwrite");o=a?c.delete(a):c.clear()}catch(c){return this.nextTick(n,c)}this[kOnComplete](o,n)}_close(e){this[kIDB].close(),this.nextTick(e)}}BrowserLevel.destroy=function(t,e,n){typeof e=="function"&&(n=e,e=DEFAULT_PREFIX),n=fromCallback(n,kPromise);const a=indexedDB.deleteDatabase(e+t);return a.onsuccess=function(){n()},a.onerror=function(o){n(o)},n[kPromise]};browserLevel.BrowserLevel=BrowserLevel;var Level=browserLevel.BrowserLevel;const webcrypto={get(t=globalThis){const e=t.crypto;if(e==null||e.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};var forge$m={options:{usePureJavaScript:!1}},utilExports={},util$7={get exports(){return utilExports},set exports(t){utilExports=t}},api$1={},baseN$1=api$1,_reverseAlphabets={};api$1.encode=function(t,e,n){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var a="";if(!(t instanceof Uint8Array))a=_encodeWithByteBuffer(t,e);else{var o=0,c=e.length,l=e.charAt(0),u=[0];for(o=0;o<t.length;++o){for(var d=0,m=t[o];d<u.length;++d)m+=u[d]<<8,u[d]=m%c,m=m/c|0;for(;m>0;)u.push(m%c),m=m/c|0}for(o=0;t[o]===0&&o<t.length-1;++o)a+=l;for(o=u.length-1;o>=0;--o)a+=e[u[o]]}if(n){var b=new RegExp(".{1,"+n+"}","g");a=a.match(b).join(`\r
`)}return a};api$1.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var n=_reverseAlphabets[e];if(!n){n=_reverseAlphabets[e]=[];for(var a=0;a<e.length;++a)n[e.charCodeAt(a)]=a}t=t.replace(/\s/g,"");for(var o=e.length,c=e.charAt(0),l=[0],a=0;a<t.length;a++){var u=n[t.charCodeAt(a)];if(u===void 0)return;for(var d=0,m=u;d<l.length;++d)m+=l[d]*o,l[d]=m&255,m>>=8;for(;m>0;)l.push(m&255),m>>=8}for(var b=0;t[b]===c&&b<t.length-1;++b)l.push(0);return typeof Buffer$x<"u"?Buffer$x.from(l.reverse()):new Uint8Array(l.reverse())};function _encodeWithByteBuffer(t,e){var n=0,a=e.length,o=e.charAt(0),c=[0];for(n=0;n<t.length();++n){for(var l=0,u=t.at(n);l<c.length;++l)u+=c[l]<<8,c[l]=u%a,u=u/a|0;for(;u>0;)c.push(u%a),u=u/a|0}var d="";for(n=0;t.at(n)===0&&n<t.length()-1;++n)d+=o;for(n=c.length-1;n>=0;--n)d+=e[c[n]];return d}var forge$l=forge$m,baseN=baseN$1,util$6=util$7.exports=forge$l.util=forge$l.util||{};(function(){if(typeof browser$1$1<"u"&&browser$1$1.nextTick&&!browser$1$1.browser){util$6.nextTick=browser$1$1.nextTick,typeof setImmediate=="function"?util$6.setImmediate=setImmediate:util$6.setImmediate=util$6.nextTick;return}if(typeof setImmediate=="function"){util$6.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$6.nextTick=function(l){return setImmediate(l)};return}if(util$6.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(u){if(u.source===window&&u.data===t){u.stopPropagation();var d=e.slice();e.length=0,d.forEach(function(m){m()})}};var t="forge.setImmediate",e=[];util$6.setImmediate=function(u){e.push(u),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),a=!0,o=document.createElement("div"),e=[];new MutationObserver(function(){var u=e.slice();e.length=0,u.forEach(function(d){d()})}).observe(o,{attributes:!0});var c=util$6.setImmediate;util$6.setImmediate=function(u){Date.now()-n>15?(n=Date.now(),c(u)):(e.push(u),e.length===1&&o.setAttribute("a",a=!a))}}util$6.nextTick=util$6.setImmediate})();util$6.isNodejs=typeof browser$1$1<"u"&&browser$1$1.versions&&browser$1$1.versions.node;util$6.globalScope=function(){return util$6.isNodejs?globalThis:typeof self>"u"?window:self}();util$6.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};util$6.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};util$6.isArrayBufferView=function(t){return t&&util$6.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function _checkBitsParam(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}util$6.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(util$6.isArrayBuffer(t)||util$6.isArrayBufferView(t))if(typeof Buffer$x<"u"&&t instanceof Buffer$x)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var n=0;n<e.length;++n)this.putByte(e[n])}}else(t instanceof ByteStringBuffer||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}util$6.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$6.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$6.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$6.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$6.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};util$6.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this};util$6.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};util$6.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(util$6.encodeUtf8(t))};util$6.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$6.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$6.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$6.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};util$6.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};util$6.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};util$6.ByteStringBuffer.prototype.putInt=function(t,e){_checkBitsParam(e);var n="";do e-=8,n+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(n)};util$6.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};util$6.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};util$6.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$6.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};util$6.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};util$6.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};util$6.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};util$6.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};util$6.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};util$6.ByteStringBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};util$6.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};util$6.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};util$6.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};util$6.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};util$6.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};util$6.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$6.ByteStringBuffer.prototype.copy=function(){var t=util$6.createBuffer(this.data);return t.read=this.read,t};util$6.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$6.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$6.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};util$6.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t};util$6.ByteStringBuffer.prototype.toString=function(){return util$6.decodeUtf8(this.bytes())};function DataBuffer(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var n=util$6.isArrayBuffer(t),a=util$6.isArrayBufferView(t);if(n||a){n?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}util$6.DataBuffer=DataBuffer;util$6.DataBuffer.prototype.length=function(){return this.write-this.read};util$6.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$6.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),a=new Uint8Array(this.length()+e);return a.set(n),this.data=new DataView(a.buffer),this};util$6.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};util$6.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this};util$6.DataBuffer.prototype.putBytes=function(t,e){if(util$6.isArrayBufferView(t)){var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=n.byteLength-n.byteOffset;this.accommodate(a);var o=new Uint8Array(this.data.buffer,this.write);return o.set(n),this.write+=a,this}if(util$6.isArrayBuffer(t)){var n=new Uint8Array(t);this.accommodate(n.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(n,this.write),this.write+=n.byteLength,this}if(t instanceof util$6.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&util$6.isArrayBufferView(t.data)){var n=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(n.byteLength);var o=new Uint8Array(t.data.byteLength,this.write);return o.set(n),this.write+=n.byteLength,this}if(t instanceof util$6.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var c;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),c=new Uint8Array(this.data.buffer,this.write),this.write+=util$6.binary.hex.decode(t,c,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),c=new Uint8Array(this.data.buffer,this.write),this.write+=util$6.binary.base64.decode(t,c,this.write),this;if(e==="utf8"&&(t=util$6.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),c=new Uint8Array(this.data.buffer,this.write),this.write+=util$6.binary.raw.decode(c),this;if(e==="utf16")return this.accommodate(t.length*2),c=new Uint16Array(this.data.buffer,this.write),this.write+=util$6.text.utf16.encode(c),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};util$6.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};util$6.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};util$6.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};util$6.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};util$6.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};util$6.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};util$6.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};util$6.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};util$6.DataBuffer.prototype.putInt=function(t,e){_checkBitsParam(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};util$6.DataBuffer.prototype.putSignedInt=function(t,e){return _checkBitsParam(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};util$6.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$6.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};util$6.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};util$6.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};util$6.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};util$6.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};util$6.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};util$6.DataBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};util$6.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};util$6.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};util$6.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};util$6.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};util$6.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};util$6.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$6.DataBuffer.prototype.copy=function(){return new util$6.DataBuffer(this)};util$6.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};util$6.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$6.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};util$6.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t};util$6.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return util$6.binary.raw.encode(e);if(t==="hex")return util$6.binary.hex.encode(e);if(t==="base64")return util$6.binary.base64.encode(e);if(t==="utf8")return util$6.text.utf8.decode(e);if(t==="utf16")return util$6.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};util$6.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=util$6.encodeUtf8(t)),new util$6.ByteBuffer(t)};util$6.fillString=function(t,e){for(var n="";e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return n};util$6.xorBytes=function(t,e,n){for(var a="",o="",c="",l=0,u=0;n>0;--n,++l)o=t.charCodeAt(l)^e.charCodeAt(l),u>=10&&(a+=c,c="",u=0),c+=String.fromCharCode(o),++u;return a+=c,a};util$6.hexToBytes=function(t){var e="",n=0;for(t.length&!0&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e};util$6.bytesToHex=function(t){return util$6.createBuffer(t).toHex()};util$6.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$6.encode64=function(t,e){for(var n="",a="",o,c,l,u=0;u<t.length;)o=t.charCodeAt(u++),c=t.charCodeAt(u++),l=t.charCodeAt(u++),n+=_base64.charAt(o>>2),n+=_base64.charAt((o&3)<<4|c>>4),isNaN(c)?n+="==":(n+=_base64.charAt((c&15)<<2|l>>6),n+=isNaN(l)?"=":_base64.charAt(l&63)),e&&n.length>e&&(a+=n.substr(0,e)+`\r
`,n=n.substr(e));return a+=n,a};util$6.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",n,a,o,c,l=0;l<t.length;)n=_base64Idx[t.charCodeAt(l++)-43],a=_base64Idx[t.charCodeAt(l++)-43],o=_base64Idx[t.charCodeAt(l++)-43],c=_base64Idx[t.charCodeAt(l++)-43],e+=String.fromCharCode(n<<2|a>>4),o!==64&&(e+=String.fromCharCode((a&15)<<4|o>>2),c!==64&&(e+=String.fromCharCode((o&3)<<6|c)));return e};util$6.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};util$6.decodeUtf8=function(t){return decodeURIComponent(escape(t))};util$6.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$6.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};util$6.binary.raw.decode=function(t,e,n){var a=e;a||(a=new Uint8Array(t.length)),n=n||0;for(var o=n,c=0;c<t.length;++c)a[o++]=t.charCodeAt(c);return e?o-n:a};util$6.binary.hex.encode=util$6.bytesToHex;util$6.binary.hex.decode=function(t,e,n){var a=e;a||(a=new Uint8Array(Math.ceil(t.length/2))),n=n||0;var o=0,c=n;for(t.length&1&&(o=1,a[c++]=parseInt(t[0],16));o<t.length;o+=2)a[c++]=parseInt(t.substr(o,2),16);return e?c-n:a};util$6.binary.base64.encode=function(t,e){for(var n="",a="",o,c,l,u=0;u<t.byteLength;)o=t[u++],c=t[u++],l=t[u++],n+=_base64.charAt(o>>2),n+=_base64.charAt((o&3)<<4|c>>4),isNaN(c)?n+="==":(n+=_base64.charAt((c&15)<<2|l>>6),n+=isNaN(l)?"=":_base64.charAt(l&63)),e&&n.length>e&&(a+=n.substr(0,e)+`\r
`,n=n.substr(e));return a+=n,a};util$6.binary.base64.decode=function(t,e,n){var a=e;a||(a=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var o,c,l,u,d=0,m=n;d<t.length;)o=_base64Idx[t.charCodeAt(d++)-43],c=_base64Idx[t.charCodeAt(d++)-43],l=_base64Idx[t.charCodeAt(d++)-43],u=_base64Idx[t.charCodeAt(d++)-43],a[m++]=o<<2|c>>4,l!==64&&(a[m++]=(c&15)<<4|l>>2,u!==64&&(a[m++]=(l&3)<<6|u));return e?m-n:a.subarray(0,m)};util$6.binary.base58.encode=function(t,e){return util$6.binary.baseN.encode(t,_base58,e)};util$6.binary.base58.decode=function(t,e){return util$6.binary.baseN.decode(t,_base58,e)};util$6.text={utf8:{},utf16:{}};util$6.text.utf8.encode=function(t,e,n){t=util$6.encodeUtf8(t);var a=e;a||(a=new Uint8Array(t.length)),n=n||0;for(var o=n,c=0;c<t.length;++c)a[o++]=t.charCodeAt(c);return e?o-n:a};util$6.text.utf8.decode=function(t){return util$6.decodeUtf8(String.fromCharCode.apply(null,t))};util$6.text.utf16.encode=function(t,e,n){var a=e;a||(a=new Uint8Array(t.length*2));var o=new Uint16Array(a.buffer);n=n||0;for(var c=n,l=n,u=0;u<t.length;++u)o[l++]=t.charCodeAt(u),c+=2;return e?c-n:a};util$6.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};util$6.deflate=function(t,e,n){if(e=util$6.decode64(t.deflate(util$6.encode64(e)).rval),n){var a=2,o=e.charCodeAt(1);o&32&&(a=6),e=e.substring(a,e.length-4)}return e};util$6.inflate=function(t,e,n){var a=t.inflate(util$6.encode64(e)).rval;return a===null?null:util$6.decode64(a)};var _setStorageObject=function(t,e,n){if(!t)throw new Error("WebStorage not available.");var a;if(n===null?a=t.removeItem(e):(n=util$6.encode64(JSON.stringify(n)),a=t.setItem(e,n)),typeof a<"u"&&a.rval!==!0){var o=new Error(a.error.message);throw o.id=a.error.id,o.name=a.error.name,o}},_getStorageObject=function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(n.rval===null){if(n.error){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(util$6.decode64(n))),n},_setItem=function(t,e,n,a){var o=_getStorageObject(t,e);o===null&&(o={}),o[n]=a,_setStorageObject(t,e,o)},_getItem=function(t,e,n){var a=_getStorageObject(t,e);return a!==null&&(a=n in a?a[n]:null),a},_removeItem=function(t,e,n){var a=_getStorageObject(t,e);if(a!==null&&n in a){delete a[n];var o=!0;for(var c in a){o=!1;break}o&&(a=null),_setStorageObject(t,e,a)}},_clearItems=function(t,e){_setStorageObject(t,e,null)},_callStorageFunction=function(t,e,n){var a=null;typeof n>"u"&&(n=["web","flash"]);var o,c=!1,l=null;for(var u in n){o=n[u];try{if(o==="flash"||o==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");a=t.apply(this,e),c=o==="flash"}(o==="web"||o==="both")&&(e[0]=localStorage,a=t.apply(this,e),c=!0)}catch(d){l=d}if(c)break}if(!c)throw l;return a};util$6.setItem=function(t,e,n,a,o){_callStorageFunction(_setItem,arguments,o)};util$6.getItem=function(t,e,n,a){return _callStorageFunction(_getItem,arguments,a)};util$6.removeItem=function(t,e,n,a){_callStorageFunction(_removeItem,arguments,a)};util$6.clearItems=function(t,e,n){_callStorageFunction(_clearItems,arguments,n)};util$6.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};util$6.format=function(t){for(var e=/%./g,n,a,o=0,c=[],l=0;n=e.exec(t);){a=t.substring(l,e.lastIndex-2),a.length>0&&c.push(a),l=e.lastIndex;var u=n[0][1];switch(u){case"s":case"o":o<arguments.length?c.push(arguments[o+++1]):c.push("<?>");break;case"%":c.push("%");break;default:c.push("<%"+u+"?>")}}return c.push(t.substring(l)),c.join("")};util$6.formatNumber=function(t,e,n,a){var o=t,c=isNaN(e=Math.abs(e))?2:e,l=n===void 0?",":n,u=a===void 0?".":a,d=o<0?"-":"",m=parseInt(o=Math.abs(+o||0).toFixed(c),10)+"",b=m.length>3?m.length%3:0;return d+(b?m.substr(0,b)+u:"")+m.substr(b).replace(/(\d{3})(?=\d)/g,"$1"+u)+(c?l+Math.abs(o-m).toFixed(c).slice(2):"")};util$6.formatSize=function(t){return t>=1073741824?t=util$6.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=util$6.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=util$6.formatNumber(t/1024,0)+" KiB":t=util$6.formatNumber(t,0)+" bytes",t};util$6.bytesFromIP=function(t){return t.indexOf(".")!==-1?util$6.bytesFromIPv4(t):t.indexOf(":")!==-1?util$6.bytesFromIPv6(t):null};util$6.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=util$6.createBuffer(),n=0;n<t.length;++n){var a=parseInt(t[n],10);if(isNaN(a))return null;e.putByte(a)}return e.getBytes()};util$6.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(l){return l.length===0&&++e,!0});for(var n=(8-t.length+e)*2,a=util$6.createBuffer(),o=0;o<8;++o){if(!t[o]||t[o].length===0){a.fillWithByte(0,n),n=0;continue}var c=util$6.hexToBytes(t[o]);c.length<2&&a.putByte(0),a.putBytes(c)}return a.getBytes()};util$6.bytesToIP=function(t){return t.length===4?util$6.bytesToIPv4(t):t.length===16?util$6.bytesToIPv6(t):null};util$6.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")};util$6.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],n=[],a=0,o=0;o<t.length;o+=2){for(var c=util$6.bytesToHex(t[o]+t[o+1]);c[0]==="0"&&c!=="0";)c=c.substr(1);if(c==="0"){var l=n[n.length-1],u=e.length;!l||u!==l.end+1?n.push({start:u,end:u}):(l.end=u,l.end-l.start>n[a].end-n[a].start&&(a=n.length-1))}e.push(c)}if(n.length>0){var d=n[a];d.end-d.start>0&&(e.splice(d.start,d.end-d.start+1,""),d.start===0&&e.unshift(""),d.end===7&&e.push(""))}return e.join(":")};util$6.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in util$6&&!t.update)return e(null,util$6.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$6.cores=navigator.hardwareConcurrency,e(null,util$6.cores);if(typeof Worker>"u")return util$6.cores=1,e(null,util$6.cores);if(typeof Blob>"u")return util$6.cores=2,e(null,util$6.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(l){var u=Date.now(),d=u+4;self.postMessage({st:u,et:d})})}.toString(),")()"],{type:"application/javascript"}));a([],5,16);function a(l,u,d){if(u===0){var m=Math.floor(l.reduce(function(b,x){return b+x},0)/l.length);return util$6.cores=Math.max(1,m),URL.revokeObjectURL(n),e(null,util$6.cores)}o(d,function(b,x){l.push(c(d,x)),a(l,u-1,d)})}function o(l,u){for(var d=[],m=[],b=0;b<l;++b){var x=new Worker(n);x.addEventListener("message",function(_){if(m.push(_.data),m.length===l){for(var w=0;w<l;++w)d[w].terminate();u(null,m)}}),d.push(x)}for(var b=0;b<l;++b)d[b].postMessage(b)}function c(l,u){for(var d=[],m=0;m<l;++m)for(var b=u[m],x=d[m]=[],_=0;_<l;++_)if(m!==_){var w=u[_];(b.st>w.st&&b.st<w.et||w.st>b.st&&w.st<b.et)&&x.push(_)}return d.reduce(function(S,T){return Math.max(S,T.length)},0)}};var forge$k=forge$m;forge$k.cipher=forge$k.cipher||{};forge$k.cipher.algorithms=forge$k.cipher.algorithms||{};forge$k.cipher.createCipher=function(t,e){var n=t;if(typeof n=="string"&&(n=forge$k.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new forge$k.cipher.BlockCipher({algorithm:n,key:e,decrypt:!1})};forge$k.cipher.createDecipher=function(t,e){var n=t;if(typeof n=="string"&&(n=forge$k.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new forge$k.cipher.BlockCipher({algorithm:n,key:e,decrypt:!0})};forge$k.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),forge$k.cipher.algorithms[t]=e};forge$k.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in forge$k.cipher.algorithms?forge$k.cipher.algorithms[t]:null};var BlockCipher=forge$k.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};BlockCipher.prototype.start=function(t){t=t||{};var e={};for(var n in t)e[n]=t[n];e.decrypt=this._decrypt,this._finish=!1,this._input=forge$k.util.createBuffer(),this.output=t.output||forge$k.util.createBuffer(),this.mode.start(e)};BlockCipher.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return t(this.blockSize,n,!1)},this.mode.unpad=function(n){return t(this.blockSize,n,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))};var forge$j=forge$m;forge$j.cipher=forge$j.cipher||{};var modes=forge$j.cipher.modes=forge$j.cipher.modes||{};modes.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes.ecb.prototype.start=function(t){};modes.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a])};modes.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a])};modes.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};modes.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),a=t.at(n-1);return a>this.blockSize<<2?!1:(t.truncate(a),!0)};modes.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=transformIV(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=this._prev[a]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a]);this._prev=this._outBlock};modes.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._prev[a]^this._outBlock[a]);this._prev=this._inBlock.slice(0)};modes.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};modes.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),a=t.at(n-1);return a>this.blockSize<<2?!1:(t.truncate(a),!0)};modes.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.cfb.prototype.encrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32()^this._outBlock[o],e.putInt32(this._inBlock[o]);return}var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(c>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0};modes.cfb.prototype.decrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32(),e.putInt32(this._inBlock[o]^this._outBlock[o]);return}var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(c>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0};modes.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.ofb.prototype.encrypt=function(t,e,n){var a=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];return}var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(c>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0};modes.ofb.prototype.decrypt=modes.ofb.prototype.encrypt;modes.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.ctr.prototype.encrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(c>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes.ctr.prototype.decrypt=modes.ctr.prototype.encrypt;modes.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=forge$j.util.createBuffer(t.iv);this._cipherLength=0;var n;if("additionalData"in t?n=forge$j.util.createBuffer(t.additionalData):n=forge$j.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=forge$j.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=e.length();if(a===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(a*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,n=forge$j.util.createBuffer(n),this._aDataLength=from64To32(n.length()*8);var o=n.length()%this.blockSize;for(o&&n.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};modes.gcm.prototype.encrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var c=(this.blockSize-a)%this.blockSize;c>0&&(c=this.blockSize-c),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(c<=0||n){if(n){var l=a%this.blockSize;this._cipherLength+=l,this._partialOutput.truncate(this.blockSize-l)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),c>0&&!n)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(c-this._partialBytes)),this._partialBytes=c,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes.gcm.prototype.decrypt=function(t,e,n){var a=t.length();if(a<this.blockSize&&!(n&&a>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);a<this.blockSize?this._cipherLength+=a%this.blockSize:this._cipherLength+=this.blockSize};modes.gcm.prototype.afterFinish=function(t,e){var n=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=forge$j.util.createBuffer();var a=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,a);var o=[];this.cipher.encrypt(this._j0,o);for(var c=0;c<this._ints;++c)this.tag.putInt32(this._s[c]^o[c]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};modes.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],a=e.slice(0),o=0;o<128;++o){var c=t[o/32|0]&1<<31-o%32;c&&(n[0]^=a[0],n[1]^=a[1],n[2]^=a[2],n[3]^=a[3]),this.pow(a,a)}return n};modes.gcm.prototype.pow=function(t,e){for(var n=t[3]&1,a=3;a>0;--a)e[a]=t[a]>>>1|(t[a-1]&1)<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)};modes.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var a=n/8|0,o=t[a]>>>(7-n%8)*4&15,c=this._m[n][o];e[0]^=c[0],e[1]^=c[1],e[2]^=c[2],e[3]^=c[3]}return e};modes.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)};modes.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,a=4*n,o=16*n,c=new Array(o),l=0;l<o;++l){var u=[0,0,0,0],d=l/a|0,m=(a-1-l%a)*e;u[d]=1<<e-1<<m,c[l]=this.generateSubHashTable(this.multiply(u,t),e)}return c};modes.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,a=n>>>1,o=new Array(n);o[a]=t.slice(0);for(var c=a>>>1;c>0;)this.pow(o[2*c],o[c]=[]),c>>=1;for(c=2;c<a;){for(var l=1;l<c;++l){var u=o[c],d=o[l];o[c+l]=[u[0]^d[0],u[1]^d[1],u[2]^d[2],u[3]^d[3]]}c*=2}for(o[0]=[0,0,0,0],c=a+1;c<n;++c){var m=o[c^a];o[c]=[t[0]^m[0],t[1]^m[1],t[2]^m[2],t[3]^m[3]]}return o};function transformIV(t,e){if(typeof t=="string"&&(t=forge$j.util.createBuffer(t)),forge$j.util.isArray(t)&&t.length>4){var n=t;t=forge$j.util.createBuffer();for(var a=0;a<n.length;++a)t.putByte(n[a])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!forge$j.util.isArray(t)){for(var o=[],c=e/4,a=0;a<c;++a)o.push(t.getInt32());t=o}return t}function inc32(t){t[t.length-1]=t[t.length-1]+1&4294967295}function from64To32(t){return[t/4294967296|0,t&4294967295]}var forge$i=forge$m;forge$i.aes=forge$i.aes||{};forge$i.aes.startEncrypting=function(t,e,n,a){var o=_createCipher$1({key:t,output:n,decrypt:!1,mode:a});return o.start(e),o};forge$i.aes.createEncryptionCipher=function(t,e){return _createCipher$1({key:t,output:null,decrypt:!1,mode:e})};forge$i.aes.startDecrypting=function(t,e,n,a){var o=_createCipher$1({key:t,output:n,decrypt:!0,mode:a});return o.start(e),o};forge$i.aes.createDecryptionCipher=function(t,e){return _createCipher$1({key:t,output:null,decrypt:!0,mode:e})};forge$i.aes.Algorithm=function(t,e){init||initialize();var n=this;n.name=t,n.mode=new e({blockSize:16,cipher:{encrypt:function(a,o){return _updateBlock$1(n._w,a,o,!1)},decrypt:function(a,o){return _updateBlock$1(n._w,a,o,!0)}}}),n._init=!1};forge$i.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,n;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=forge$i.util.createBuffer(e);else if(forge$i.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){n=e,e=forge$i.util.createBuffer();for(var a=0;a<n.length;++a)e.putByte(n[a])}if(!forge$i.util.isArray(e)){n=e,e=[];var o=n.length();if(o===16||o===24||o===32){o=o>>>2;for(var a=0;a<o;++a)e.push(n.getInt32())}}if(!forge$i.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var c=this.mode.name,l=["CFB","OFB","CTR","GCM"].indexOf(c)!==-1;this._w=_expandKey(e,t.decrypt&&!l),this._init=!0}};forge$i.aes._expandKey=function(t,e){return init||initialize(),_expandKey(t,e)};forge$i.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$i.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$i.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$i.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$i.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$i.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$i.cipher.modes.gcm);function registerAlgorithm$1(t,e){var n=function(){return new forge$i.aes.Algorithm(t,e)};forge$i.cipher.registerAlgorithm(t,n)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var e=0;e<4;++e)mix[e]=new Array(256),imix[e]=new Array(256);for(var n=0,a=0,o,c,l,u,d,m,b,e=0;e<256;++e){u=a^a<<1^a<<2^a<<3^a<<4,u=u>>8^u&255^99,sbox[n]=u,isbox[u]=n,d=t[u],o=t[n],c=t[o],l=t[c],m=d<<24^u<<16^u<<8^(u^d),b=(o^c^l)<<24^(n^l)<<16^(n^c^l)<<8^(n^o^l);for(var x=0;x<4;++x)mix[x][n]=m,imix[x][u]=b,m=m<<24|m>>>8,b=b<<24|b>>>8;n===0?n=a=1:(n=o^t[t[t[o^l]]],a^=t[t[a]])}}function _expandKey(t,e){for(var n=t.slice(0),a,o=1,c=n.length,l=c+6+1,u=Nb*l,d=c;d<u;++d)a=n[d-1],d%c===0?(a=sbox[a>>>16&255]<<24^sbox[a>>>8&255]<<16^sbox[a&255]<<8^sbox[a>>>24]^rcon[o]<<24,o++):c>6&&d%c===4&&(a=sbox[a>>>24]<<24^sbox[a>>>16&255]<<16^sbox[a>>>8&255]<<8^sbox[a&255]),n[d]=n[d-c]^a;if(e){var m,b=imix[0],x=imix[1],_=imix[2],w=imix[3],S=n.slice(0);u=n.length;for(var d=0,T=u-Nb;d<u;d+=Nb,T-=Nb)if(d===0||d===u-Nb)S[d]=n[T],S[d+1]=n[T+3],S[d+2]=n[T+2],S[d+3]=n[T+1];else for(var B=0;B<Nb;++B)m=n[T+B],S[d+(3&-B)]=b[sbox[m>>>24]]^x[sbox[m>>>16&255]]^_[sbox[m>>>8&255]]^w[sbox[m&255]];n=S}return n}function _updateBlock$1(t,e,n,a){var o=t.length/4-1,c,l,u,d,m;a?(c=imix[0],l=imix[1],u=imix[2],d=imix[3],m=isbox):(c=mix[0],l=mix[1],u=mix[2],d=mix[3],m=sbox);var b,x,_,w,S,T,B;b=e[0]^t[0],x=e[a?3:1]^t[1],_=e[2]^t[2],w=e[a?1:3]^t[3];for(var C=3,D=1;D<o;++D)S=c[b>>>24]^l[x>>>16&255]^u[_>>>8&255]^d[w&255]^t[++C],T=c[x>>>24]^l[_>>>16&255]^u[w>>>8&255]^d[b&255]^t[++C],B=c[_>>>24]^l[w>>>16&255]^u[b>>>8&255]^d[x&255]^t[++C],w=c[w>>>24]^l[b>>>16&255]^u[x>>>8&255]^d[_&255]^t[++C],b=S,x=T,_=B;n[0]=m[b>>>24]<<24^m[x>>>16&255]<<16^m[_>>>8&255]<<8^m[w&255]^t[++C],n[a?3:1]=m[x>>>24]<<24^m[_>>>16&255]<<16^m[w>>>8&255]<<8^m[b&255]^t[++C],n[2]=m[_>>>24]<<24^m[w>>>16&255]<<16^m[b>>>8&255]<<8^m[x&255]^t[++C],n[a?1:3]=m[w>>>24]<<24^m[b>>>16&255]<<16^m[x>>>8&255]<<8^m[_&255]^t[++C]}function _createCipher$1(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="AES-"+e,a;t.decrypt?a=forge$i.cipher.createDecipher(n,t.key):a=forge$i.cipher.createCipher(n,t.key);var o=a.start;return a.start=function(c,l){var u=null;l instanceof forge$i.util.ByteBuffer&&(u=l,l={}),l=l||{},l.output=u,l.iv=c,o.call(a,l)},a}function base$5(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),l=c.charCodeAt(0);if(n[l]!==255)throw new TypeError(c+" is ambiguous");n[l]=o}var u=t.length,d=t.charAt(0),m=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function x(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var T=0,B=0,C=0,D=S.length;C!==D&&S[C]===0;)C++,T++;for(var z=(D-C)*b+1>>>0,U=new Uint8Array(z);C!==D;){for(var Y=S[C],X=0,O=z-1;(Y!==0||X<B)&&O!==-1;O--,X++)Y+=256*U[O]>>>0,U[O]=Y%u>>>0,Y=Y/u>>>0;if(Y!==0)throw new Error("Non-zero carry");B=X,C++}for(var J=z-B;J!==z&&U[J]===0;)J++;for(var Z=d.repeat(T);J<z;++J)Z+=t.charAt(U[J]);return Z}function _(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var T=0;if(S[T]!==" "){for(var B=0,C=0;S[T]===d;)B++,T++;for(var D=(S.length-T)*m+1>>>0,z=new Uint8Array(D);S[T];){var U=n[S.charCodeAt(T)];if(U===255)return;for(var Y=0,X=D-1;(U!==0||Y<C)&&X!==-1;X--,Y++)U+=u*z[X]>>>0,z[X]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");C=Y,T++}if(S[T]!==" "){for(var O=D-C;O!==D&&z[O]===0;)O++;for(var J=new Uint8Array(B+(D-O)),Z=B;O!==D;)J[Z++]=z[O++];return J}}}function w(S){var T=_(S);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:x,decodeUnsafe:_,decode:w}}var src$7=base$5,_brrp__multiformats_scope_baseX$4=src$7;const coerce$4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$6=t=>new TextEncoder().encode(t),toString$9=t=>new TextDecoder().decode(t);let Encoder$5=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$5=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$4(this,e)}},ComposedDecoder$4=class{constructor(e){this.decoders=e}or(e){return or$4(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$4=(t,e)=>new ComposedDecoder$4({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$5=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$5(e,n,a),this.decoder=new Decoder$5(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$6=({name:t,prefix:e,encode:n,decode:a})=>new Codec$5(t,e,n,a),baseX$4=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$4(n,e);return from$6({prefix:t,name:e,encode:a,decode:c=>coerce$4(o(c))})},decode$m=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let c=t.length;for(;t[c-1]==="=";)--c;const l=new Uint8Array(c*n/8|0);let u=0,d=0,m=0;for(let b=0;b<c;++b){const x=o[t[b]];if(x===void 0)throw new SyntaxError(`Non-${a} character`);d=d<<n|x,u+=n,u>=8&&(u-=8,l[m++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},encode$n=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let c="",l=0,u=0;for(let d=0;d<t.length;++d)for(u=u<<8|t[d],l+=8;l>n;)l-=n,c+=e[o&u>>l];if(l&&(c+=e[o&u<<n-l]),a)for(;c.length*n&7;)c+="=";return c},rfc4648$4=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$6({prefix:e,name:t,encode(o){return encode$n(o,a,n)},decode(o){return decode$m(o,a,n,t)}}),identity$6=from$6({prefix:"\0",name:"identity",encode:t=>toString$9(t),decode:t=>fromString$6(t)}),identityBase$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$6},Symbol.toStringTag,{value:"Module"})),base2$4=rfc4648$4({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$5=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$4},Symbol.toStringTag,{value:"Module"})),base8$4=rfc4648$4({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$5=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$4},Symbol.toStringTag,{value:"Module"})),base10$4=baseX$4({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$5=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$4},Symbol.toStringTag,{value:"Module"})),base16$4=rfc4648$4({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$2=rfc4648$4({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$5=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$4,base16upper:base16upper$2},Symbol.toStringTag,{value:"Module"})),base32$5=rfc4648$4({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$2=rfc4648$4({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$2=rfc4648$4({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$2=rfc4648$4({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$2=rfc4648$4({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$2=rfc4648$4({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$2=rfc4648$4({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$2=rfc4648$4({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$2=rfc4648$4({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$6=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$5,base32hex:base32hex$2,base32hexpad:base32hexpad$2,base32hexpadupper:base32hexpadupper$2,base32hexupper:base32hexupper$2,base32pad:base32pad$2,base32padupper:base32padupper$2,base32upper:base32upper$2,base32z:base32z$2},Symbol.toStringTag,{value:"Module"})),base36$4=baseX$4({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$2=baseX$4({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$5=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$4,base36upper:base36upper$2},Symbol.toStringTag,{value:"Module"})),base58btc$4=baseX$4({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$2=baseX$4({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$2=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$4,base58flickr:base58flickr$2},Symbol.toStringTag,{value:"Module"})),base64$9=rfc4648$4({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$2=rfc4648$4({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$2=rfc4648$4({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$2=rfc4648$4({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$a=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$9,base64pad:base64pad$2,base64url:base64url$2,base64urlpad:base64urlpad$2},Symbol.toStringTag,{value:"Module"})),alphabet$2=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars$2=alphabet$2.reduce((t,e,n)=>(t[n]=e,t),[]),alphabetCharsToBytes$2=alphabet$2.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function encode$m(t){return t.reduce((e,n)=>(e+=alphabetBytesToChars$2[n],e),"")}function decode$l(t){const e=[];for(const n of t){const a=alphabetCharsToBytes$2[n.codePointAt(0)];if(a===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(a)}return new Uint8Array(e)}const base256emoji$4=from$6({prefix:"🚀",name:"base256emoji",encode:encode$m,decode:decode$l}),base256emoji$5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$4},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$2={...identityBase$2,...base2$5,...base8$5,...base10$5,...base16$5,...base32$6,...base36$5,...base58$2,...base64$a,...base256emoji$5};function asUint8Array$2(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function alloc(t=0){return globalThis.Buffer?.alloc!=null?asUint8Array$2(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function allocUnsafe$2(t=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array$2(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec$4(t,e,n,a){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:a}}}const string$2=createCodec$4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$2=createCodec$4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=allocUnsafe$2(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BASES$2={utf8:string$2,"utf-8":string$2,hex:bases$2.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...bases$2};function toString$8(t,e="utf8"){const n=BASES$2[e];if(n==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function fromString$5(t,e="utf8"){const n=BASES$2[e];if(n==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$2(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function assign$2(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}function createError(t,e,n){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");n||(n={}),typeof e=="object"&&(n=e,e=""),e&&(n.code=e);try{return assign$2(t,n)}catch{n.message=t.message,n.stack=t.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),assign$2(new o,n)}}var errCode=createError,minimal={},aspromise=asPromise;function asPromise(t,e){for(var n=new Array(arguments.length-1),a=0,o=2,c=!0;o<arguments.length;)n[a++]=arguments[o++];return new Promise(function(u,d){n[a]=function(b){if(c)if(c=!1,b)d(b);else{for(var x=new Array(arguments.length-1),_=0;_<x.length;)x[_++]=arguments[_];u.apply(null,x)}};try{t.apply(e||null,n)}catch(m){c&&(c=!1,d(m))}})}var base64$8={};(function(t){var e=t;e.length=function(u){var d=u.length;if(!d)return 0;for(var m=0;--d%4>1&&u.charAt(d)==="=";)++m;return Math.ceil(u.length*3)/4-m};for(var n=new Array(64),a=new Array(123),o=0;o<64;)a[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(u,d,m){for(var b=null,x=[],_=0,w=0,S;d<m;){var T=u[d++];switch(w){case 0:x[_++]=n[T>>2],S=(T&3)<<4,w=1;break;case 1:x[_++]=n[S|T>>4],S=(T&15)<<2,w=2;break;case 2:x[_++]=n[S|T>>6],x[_++]=n[T&63],w=0;break}_>8191&&((b||(b=[])).push(String.fromCharCode.apply(String,x)),_=0)}return w&&(x[_++]=n[S],x[_++]=61,w===1&&(x[_++]=61)),b?(_&&b.push(String.fromCharCode.apply(String,x.slice(0,_))),b.join("")):String.fromCharCode.apply(String,x.slice(0,_))};var c="invalid encoding";e.decode=function(u,d,m){for(var b=m,x=0,_,w=0;w<u.length;){var S=u.charCodeAt(w++);if(S===61&&x>1)break;if((S=a[S])===void 0)throw Error(c);switch(x){case 0:_=S,x=1;break;case 1:d[m++]=_<<2|(S&48)>>4,_=S,x=2;break;case 2:d[m++]=(_&15)<<4|(S&60)>>2,_=S,x=3;break;case 3:d[m++]=(_&3)<<6|S,x=0;break}}if(x===1)throw Error(c);return m-b},e.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}})(base64$8);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,n,a){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:n,ctx:a||this}),this};EventEmitter.prototype.off=function(e,n){if(e===void 0)this._listeners={};else if(n===void 0)this._listeners[e]=[];else for(var a=this._listeners[e],o=0;o<a.length;)a[o].fn===n?a.splice(o,1):++o;return this};EventEmitter.prototype.emit=function(e){var n=this._listeners[e];if(n){for(var a=[],o=1;o<arguments.length;)a.push(arguments[o++]);for(o=0;o<n.length;)n[o].fn.apply(n[o++].ctx,a)}return this};var float=factory(factory);function factory(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),a=n[3]===128;function o(d,m,b){e[0]=d,m[b]=n[0],m[b+1]=n[1],m[b+2]=n[2],m[b+3]=n[3]}function c(d,m,b){e[0]=d,m[b]=n[3],m[b+1]=n[2],m[b+2]=n[1],m[b+3]=n[0]}t.writeFloatLE=a?o:c,t.writeFloatBE=a?c:o;function l(d,m){return n[0]=d[m],n[1]=d[m+1],n[2]=d[m+2],n[3]=d[m+3],e[0]}function u(d,m){return n[3]=d[m],n[2]=d[m+1],n[1]=d[m+2],n[0]=d[m+3],e[0]}t.readFloatLE=a?l:u,t.readFloatBE=a?u:l}():function(){function e(a,o,c,l){var u=o<0?1:0;if(u&&(o=-o),o===0)a(1/o>0?0:2147483648,c,l);else if(isNaN(o))a(2143289344,c,l);else if(o>34028234663852886e22)a((u<<31|2139095040)>>>0,c,l);else if(o<11754943508222875e-54)a((u<<31|Math.round(o/1401298464324817e-60))>>>0,c,l);else{var d=Math.floor(Math.log(o)/Math.LN2),m=Math.round(o*Math.pow(2,-d)*8388608)&8388607;a((u<<31|d+127<<23|m)>>>0,c,l)}}t.writeFloatLE=e.bind(null,writeUintLE$1),t.writeFloatBE=e.bind(null,writeUintBE$1);function n(a,o,c){var l=a(o,c),u=(l>>31)*2+1,d=l>>>23&255,m=l&8388607;return d===255?m?NaN:u*(1/0):d===0?u*1401298464324817e-60*m:u*Math.pow(2,d-150)*(m+8388608)}t.readFloatLE=n.bind(null,readUintLE$1),t.readFloatBE=n.bind(null,readUintBE$1)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),a=n[7]===128;function o(d,m,b){e[0]=d,m[b]=n[0],m[b+1]=n[1],m[b+2]=n[2],m[b+3]=n[3],m[b+4]=n[4],m[b+5]=n[5],m[b+6]=n[6],m[b+7]=n[7]}function c(d,m,b){e[0]=d,m[b]=n[7],m[b+1]=n[6],m[b+2]=n[5],m[b+3]=n[4],m[b+4]=n[3],m[b+5]=n[2],m[b+6]=n[1],m[b+7]=n[0]}t.writeDoubleLE=a?o:c,t.writeDoubleBE=a?c:o;function l(d,m){return n[0]=d[m],n[1]=d[m+1],n[2]=d[m+2],n[3]=d[m+3],n[4]=d[m+4],n[5]=d[m+5],n[6]=d[m+6],n[7]=d[m+7],e[0]}function u(d,m){return n[7]=d[m],n[6]=d[m+1],n[5]=d[m+2],n[4]=d[m+3],n[3]=d[m+4],n[2]=d[m+5],n[1]=d[m+6],n[0]=d[m+7],e[0]}t.readDoubleLE=a?l:u,t.readDoubleBE=a?u:l}():function(){function e(a,o,c,l,u,d){var m=l<0?1:0;if(m&&(l=-l),l===0)a(0,u,d+o),a(1/l>0?0:2147483648,u,d+c);else if(isNaN(l))a(0,u,d+o),a(2146959360,u,d+c);else if(l>17976931348623157e292)a(0,u,d+o),a((m<<31|2146435072)>>>0,u,d+c);else{var b;if(l<22250738585072014e-324)b=l/5e-324,a(b>>>0,u,d+o),a((m<<31|b/4294967296)>>>0,u,d+c);else{var x=Math.floor(Math.log(l)/Math.LN2);x===1024&&(x=1023),b=l*Math.pow(2,-x),a(b*4503599627370496>>>0,u,d+o),a((m<<31|x+1023<<20|b*1048576&1048575)>>>0,u,d+c)}}}t.writeDoubleLE=e.bind(null,writeUintLE$1,0,4),t.writeDoubleBE=e.bind(null,writeUintBE$1,4,0);function n(a,o,c,l,u){var d=a(l,u+o),m=a(l,u+c),b=(m>>31)*2+1,x=m>>>20&2047,_=4294967296*(m&1048575)+d;return x===2047?_?NaN:b*(1/0):x===0?b*5e-324*_:b*Math.pow(2,x-1075)*(_+4503599627370496)}t.readDoubleLE=n.bind(null,readUintLE$1,0,4),t.readDoubleBE=n.bind(null,readUintBE$1,4,0)}(),t}function writeUintLE$1(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function writeUintBE$1(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=t&255}function readUintLE$1(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE$1(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$5={};(function(t){var e=t;e.length=function(a){for(var o=0,c=0,l=0;l<a.length;++l)c=a.charCodeAt(l),c<128?o+=1:c<2048?o+=2:(c&64512)===55296&&(a.charCodeAt(l+1)&64512)===56320?(++l,o+=4):o+=3;return o},e.read=function(a,o,c){var l=c-o;if(l<1)return"";for(var u=null,d=[],m=0,b;o<c;)b=a[o++],b<128?d[m++]=b:b>191&&b<224?d[m++]=(b&31)<<6|a[o++]&63:b>239&&b<365?(b=((b&7)<<18|(a[o++]&63)<<12|(a[o++]&63)<<6|a[o++]&63)-65536,d[m++]=55296+(b>>10),d[m++]=56320+(b&1023)):d[m++]=(b&15)<<12|(a[o++]&63)<<6|a[o++]&63,m>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,d)),m=0);return u?(m&&u.push(String.fromCharCode.apply(String,d.slice(0,m))),u.join("")):String.fromCharCode.apply(String,d.slice(0,m))},e.write=function(a,o,c){for(var l=c,u,d,m=0;m<a.length;++m)u=a.charCodeAt(m),u<128?o[c++]=u:u<2048?(o[c++]=u>>6|192,o[c++]=u&63|128):(u&64512)===55296&&((d=a.charCodeAt(m+1))&64512)===56320?(u=65536+((u&1023)<<10)+(d&1023),++m,o[c++]=u>>18|240,o[c++]=u>>12&63|128,o[c++]=u>>6&63|128,o[c++]=u&63|128):(o[c++]=u>>12|224,o[c++]=u>>6&63|128,o[c++]=u&63|128);return c-l}})(utf8$5);var pool_1=pool;function pool(t,e,n){var a=n||8192,o=a>>>1,c=null,l=a;return function(d){if(d<1||d>o)return t(d);l+d>a&&(c=t(a),l=0);var m=e.call(c,l,l+=d);return l&7&&(l=(l|7)+1),m}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var t=requireMinimal();function e(c,l){this.lo=c>>>0,this.hi=l>>>0}var n=e.zero=new e(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var a=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(l){if(l===0)return n;var u=l<0;u&&(l=-l);var d=l>>>0,m=(l-d)/4294967296>>>0;return u&&(m=~m>>>0,d=~d>>>0,++d>4294967295&&(d=0,++m>4294967295&&(m=0))),new e(d,m)},e.from=function(l){if(typeof l=="number")return e.fromNumber(l);if(t.isString(l))if(t.Long)l=t.Long.fromString(l);else return e.fromNumber(parseInt(l,10));return l.low||l.high?new e(l.low>>>0,l.high>>>0):n},e.prototype.toNumber=function(l){if(!l&&this.hi>>>31){var u=~this.lo+1>>>0,d=~this.hi>>>0;return u||(d=d+1>>>0),-(u+d*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(l){return t.Long?new t.Long(this.lo|0,this.hi|0,Boolean(l)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(l)}};var o=String.prototype.charCodeAt;return e.fromHash=function(l){return l===a?n:new e((o.call(l,0)|o.call(l,1)<<8|o.call(l,2)<<16|o.call(l,3)<<24)>>>0,(o.call(l,4)|o.call(l,5)<<8|o.call(l,6)<<16|o.call(l,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var l=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^l)>>>0,this.lo=(this.lo<<1^l)>>>0,this},e.prototype.zzDecode=function(){var l=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^l)>>>0,this.hi=(this.hi>>>1^l)>>>0,this},e.prototype.length=function(){var l=this.lo,u=(this.lo>>>28|this.hi<<4)>>>0,d=this.hi>>>24;return d===0?u===0?l<16384?l<128?1:2:l<2097152?3:4:u<16384?u<128?5:6:u<2097152?7:8:d<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(t){var e=t;e.asPromise=aspromise,e.base64=base64$8,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$5,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=Boolean(typeof globalThis<"u"&&globalThis&&globalThis.process&&globalThis.process.versions&&globalThis.process.versions.node),e.global=e.isNode&&globalThis||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(c){return typeof c=="number"&&isFinite(c)&&Math.floor(c)===c},e.isString=function(c){return typeof c=="string"||c instanceof String},e.isObject=function(c){return c&&typeof c=="object"},e.isset=e.isSet=function(c,l){var u=c[l];return u!=null&&c.hasOwnProperty(l)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(c){return typeof c=="number"?e.Buffer?e._Buffer_allocUnsafe(c):new e.Array(c):e.Buffer?e._Buffer_from(c):typeof Uint8Array>"u"?c:new Uint8Array(c)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(c){return c?e.LongBits.from(c).toHash():e.LongBits.zeroHash},e.longFromHash=function(c,l){var u=e.LongBits.fromHash(c);return e.Long?e.Long.fromBits(u.lo,u.hi,l):u.toNumber(Boolean(l))};function n(o,c,l){for(var u=Object.keys(c),d=0;d<u.length;++d)(o[u[d]]===void 0||!l)&&(o[u[d]]=c[u[d]]);return o}e.merge=n,e.lcFirst=function(c){return c.charAt(0).toLowerCase()+c.substring(1)};function a(o){function c(l,u){if(!(this instanceof c))return new c(l,u);Object.defineProperty(this,"message",{get:function(){return l}}),Error.captureStackTrace?Error.captureStackTrace(this,c):Object.defineProperty(this,"stack",{value:new Error().stack||""}),u&&n(this,u)}return c.prototype=Object.create(Error.prototype,{constructor:{value:c,writable:!0,enumerable:!1,configurable:!0},name:{get(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),c}e.newError=a,e.ProtocolError=a("ProtocolError"),e.oneOfGetter=function(c){for(var l={},u=0;u<c.length;++u)l[c[u]]=1;return function(){for(var d=Object.keys(this),m=d.length-1;m>-1;--m)if(l[d[m]]===1&&this[d[m]]!==void 0&&this[d[m]]!==null)return d[m]}},e.oneOfSetter=function(c){return function(l){for(var u=0;u<c.length;++u)c[u]!==l&&delete this[c[u]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(l,u){return new o(l,u)},e._Buffer_allocUnsafe=o.allocUnsafe||function(l){return new o(l)}}}(minimal)),minimal}var reader$1=Reader$1,util$5=requireMinimal(),BufferReader$1,LongBits$1=util$5.LongBits,utf8$4=util$5.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array=typeof Uint8Array<"u"?function t(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function t(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$5=function t(){return util$5.Buffer?function(n){return(Reader$1.create=function(o){return util$5.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(n)}:create_array};Reader$1.create=create$5();Reader$1.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice;Reader$1.prototype.uint32=function t(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function t(){return this.uint32()|0};Reader$1.prototype.sint32=function t(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var t=new LongBits$1(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function t(){return this.uint32()!==0};function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$1(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function t(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function t(){var e=this.uint32(),n=this.pos,a=this.pos+e;if(a>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(n,a):n===a?new this.buf.constructor(0):this._slice.call(this.buf,n,a)};Reader$1.prototype.string=function t(){var e=this.bytes();return utf8$4.read(e,0,e.length)};Reader$1.prototype.skip=function t(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create$5(),BufferReader$1._configure();var e=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader$1;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$4=requireMinimal();function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$4.Buffer&&(BufferReader.prototype._slice=util$4.Buffer.prototype.slice)};BufferReader.prototype.string=function t(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var writer$1=Writer$1,util$3=requireMinimal(),BufferWriter$1,LongBits=util$3.LongBits,base64$7=util$3.base64,utf8$3=util$3.utf8;function Op(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function noop$2(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$4=function t(){return util$3.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$4();Writer$1.alloc=function t(e){return new util$3.Array(e)};util$3.Array!==Array&&(Writer$1.alloc=util$3.pool(Writer$1.alloc,util$3.Array.prototype.subarray));Writer$1.prototype._push=function t(e,n,a){return this.tail=this.tail.next=new Op(e,n,a),this.len+=n,this};function writeByte(t,e,n){e[n]=t&255}function writeVarint32(t,e,n){for(;t>127;)e[n++]=t&127|128,t>>>=7;e[n]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function t(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function t(e){return e<0?this._push(writeVarint64,10,LongBits.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function t(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(t,e,n){for(;t.hi;)e[n++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=t.lo&127|128,t.lo=t.lo>>>7;e[n++]=t.lo}Writer$1.prototype.uint64=function t(e){var n=LongBits.from(e);return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function t(e){var n=LongBits.from(e).zzEncode();return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.bool=function t(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}Writer$1.prototype.fixed32=function t(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function t(e){var n=LongBits.from(e);return this._push(writeFixed32,4,n.lo)._push(writeFixed32,4,n.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function t(e){return this._push(util$3.float.writeFloatLE,4,e)};Writer$1.prototype.double=function t(e){return this._push(util$3.float.writeDoubleLE,8,e)};var writeBytes=util$3.Array.prototype.set?function t(e,n,a){n.set(e,a)}:function t(e,n,a){for(var o=0;o<e.length;++o)n[a+o]=e[o]};Writer$1.prototype.bytes=function t(e){var n=e.length>>>0;if(!n)return this._push(writeByte,1,0);if(util$3.isString(e)){var a=Writer$1.alloc(n=base64$7.length(e));base64$7.decode(e,a,0),e=a}return this.uint32(n)._push(writeBytes,n,e)};Writer$1.prototype.string=function t(e){var n=utf8$3.length(e);return n?this.uint32(n)._push(utf8$3.write,n,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function t(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function t(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function t(){var e=this.head,n=this.tail,a=this.len;return this.reset().uint32(a),a&&(this.tail.next=e.next,this.tail=n,this.len+=a),this};Writer$1.prototype.finish=function t(){for(var e=this.head.next,n=this.constructor.alloc(this.len),a=0;e;)e.fn(e.val,n,a),a+=e.len,e=e.next;return n};Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create$4(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer$1;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$2=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$2._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$2.Buffer&&util$2.Buffer.prototype instanceof Uint8Array&&util$2.Buffer.prototype.set.name==="set"?function(e,n,a){n.set(e,a)}:function(e,n,a){if(e.copy)e.copy(n,a,0,e.length);else for(var o=0;o<e.length;)n[a++]=e[o++]}};BufferWriter.prototype.bytes=function t(e){util$2.isString(e)&&(e=util$2._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(BufferWriter.writeBytesBuffer,n,e),this};function writeStringBuffer(t,e,n){t.length<40?util$2.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}BufferWriter.prototype.string=function t(e){var n=util$2.Buffer.byteLength(e);return this.uint32(n),n&&this._push(writeStringBuffer,n,e),this};BufferWriter._configure();var minimalExports=requireMinimal();const util$1=getDefaultExportFromCjs(minimalExports);function configure(){util$1._configure(),reader$1._configure(reader_buffer),writer$1._configure(writer_buffer)}configure();const methods=["uint64","int64","sint64","fixed64","sfixed64"];function patchReader(t){for(const e of methods){if(t[e]==null)continue;const n=t[e];t[e]=function(){return BigInt(n.call(this).toString())}}return t}function reader(t){return patchReader(new reader$1(t))}function patchWriter(t){for(const e of methods){if(t[e]==null)continue;const n=t[e];t[e]=function(a){return n.call(this,a.toString())}}return t}function writer(){return patchWriter(writer$1.create())}function decodeMessage(t,e){const n=reader(t instanceof Uint8Array?t:t.subarray());return e.decode(n)}function encodeMessage(t,e){const n=writer();return e.encode(t,n,{lengthDelimited:!1}),n.finish()}var CODEC_TYPES;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec$3(t,e,n,a){return{name:t,type:e,encode:n,decode:a}}function enumeration(t){function e(o){if(t[o.toString()]==null)throw new Error("Invalid enum value");return t[o]}const n=function(c,l){const u=e(c);l.int32(u)},a=function(c){const l=c.int32();return e(l)};return createCodec$3("enum",CODEC_TYPES.VARINT,n,a)}function message(t,e){return createCodec$3("message",CODEC_TYPES.LENGTH_DELIMITED,t,e)}var KeyType$1;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(KeyType$1||(KeyType$1={}));var __KeyTypeValues;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(__KeyTypeValues||(__KeyTypeValues={}));(function(t){t.codec=()=>enumeration(__KeyTypeValues)})(KeyType$1||(KeyType$1={}));var PublicKey;(function(t){let e;t.codec=()=>(e==null&&(e=message((n,a,o={})=>{o.lengthDelimited!==!1&&a.fork(),n.Type!=null&&(a.uint32(8),KeyType$1.codec().encode(n.Type,a)),n.Data!=null&&(a.uint32(18),a.bytes(n.Data)),o.lengthDelimited!==!1&&a.ldelim()},(n,a)=>{const o={},c=a==null?n.len:n.pos+a;for(;n.pos<c;){const l=n.uint32();switch(l>>>3){case 1:o.Type=KeyType$1.codec().decode(n);break;case 2:o.Data=n.bytes();break;default:n.skipType(l&7);break}}return o})),e),t.encode=n=>encodeMessage(n,t.codec()),t.decode=n=>decodeMessage(n,t.codec())})(PublicKey||(PublicKey={}));var PrivateKey;(function(t){let e;t.codec=()=>(e==null&&(e=message((n,a,o={})=>{o.lengthDelimited!==!1&&a.fork(),n.Type!=null&&(a.uint32(8),KeyType$1.codec().encode(n.Type,a)),n.Data!=null&&(a.uint32(18),a.bytes(n.Data)),o.lengthDelimited!==!1&&a.ldelim()},(n,a)=>{const o={},c=a==null?n.len:n.pos+a;for(;n.pos<c;){const l=n.uint32();switch(l>>>3){case 1:o.Type=KeyType$1.codec().decode(n);break;case 2:o.Data=n.bytes();break;default:n.skipType(l&7);break}}return o})),e),t.encode=n=>encodeMessage(n,t.codec()),t.decode=n=>decodeMessage(n,t.codec())})(PrivateKey||(PrivateKey={}));var forge$h=forge$m;forge$h.pki=forge$h.pki||{};var oids$1=forge$h.pki.oids=forge$h.oids=forge$h.oids||{};function _IN(t,e){oids$1[t]=e,oids$1[e]=t}function _I_(t,e){oids$1[t]=e}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$g=forge$m,asn1$2=forge$g.asn1=forge$g.asn1||{};asn1$2.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$2.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$2.create=function(t,e,n,a,o){if(forge$g.util.isArray(a)){for(var c=[],l=0;l<a.length;++l)a[l]!==void 0&&c.push(a[l]);a=c}var u={tagClass:t,type:e,constructed:n,composed:n||forge$g.util.isArray(a),value:a};return o&&"bitStringContents"in o&&(u.bitStringContents=o.bitStringContents,u.original=asn1$2.copy(u)),u};asn1$2.copy=function(t,e){var n;if(forge$g.util.isArray(t)){n=[];for(var a=0;a<t.length;++a)n.push(asn1$2.copy(t[a],e));return n}return typeof t=="string"?t:(n={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:asn1$2.copy(t.value,e)},e&&!e.excludeBitStringContents&&(n.bitStringContents=t.bitStringContents),n)};asn1$2.equals=function(t,e,n){if(forge$g.util.isArray(t)){if(!forge$g.util.isArray(e)||t.length!==e.length)return!1;for(var a=0;a<t.length;++a)if(!asn1$2.equals(t[a],e[a]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var o=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&asn1$2.equals(t.value,e.value);return n&&n.includeBitStringContents&&(o=o&&t.bitStringContents===e.bitStringContents),o};asn1$2.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var n,a=e&128;return a?n=t.getInt((e&127)<<3):n=e,n}};function _checkBufferLength(t,e,n){if(n>e){var a=new Error("Too few bytes to parse DER.");throw a.available=t.length(),a.remaining=e,a.requested=n,a}}var _getValueLength=function(t,e){var n=t.getByte();if(e--,n!==128){var a,o=n&128;if(!o)a=n;else{var c=n&127;_checkBufferLength(t,e,c),a=t.getInt(c<<3)}if(a<0)throw new Error("Negative length: "+a);return a}};asn1$2.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=forge$g.util.createBuffer(t));var n=t.length(),a=_fromDer(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=n,o.remaining=t.length(),o}return a};function _fromDer(t,e,n,a){var o;_checkBufferLength(t,e,2);var c=t.getByte();e--;var l=c&192,u=c&31;o=t.length();var d=_getValueLength(t,e);if(e-=o-t.length(),d!==void 0&&d>e){if(a.strict){var m=new Error("Too few bytes to read ASN.1 value.");throw m.available=t.length(),m.remaining=e,m.requested=d,m}d=e}var b,x,_=(c&32)===32;if(_)if(b=[],d===void 0)for(;;){if(_checkBufferLength(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}o=t.length(),b.push(_fromDer(t,e,n+1,a)),e-=o-t.length()}else for(;d>0;)o=t.length(),b.push(_fromDer(t,d,n+1,a)),e-=o-t.length(),d-=o-t.length();if(b===void 0&&l===asn1$2.Class.UNIVERSAL&&u===asn1$2.Type.BITSTRING&&(x=t.bytes(d)),b===void 0&&a.decodeBitStrings&&l===asn1$2.Class.UNIVERSAL&&u===asn1$2.Type.BITSTRING&&d>1){var w=t.read,S=e,T=0;if(u===asn1$2.Type.BITSTRING&&(_checkBufferLength(t,e,1),T=t.getByte(),e--),T===0)try{o=t.length();var B={strict:!0,decodeBitStrings:!0},C=_fromDer(t,e,n+1,B),D=o-t.length();e-=D,u==asn1$2.Type.BITSTRING&&D++;var z=C.tagClass;D===d&&(z===asn1$2.Class.UNIVERSAL||z===asn1$2.Class.CONTEXT_SPECIFIC)&&(b=[C])}catch{}b===void 0&&(t.read=w,e=S)}if(b===void 0){if(d===void 0){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");d=e}if(u===asn1$2.Type.BMPSTRING)for(b="";d>0;d-=2)_checkBufferLength(t,e,2),b+=String.fromCharCode(t.getInt16()),e-=2;else b=t.getBytes(d),e-=d}var U=x===void 0?null:{bitStringContents:x};return asn1$2.create(l,u,_,b,U)}asn1$2.toDer=function(t){var e=forge$g.util.createBuffer(),n=t.tagClass|t.type,a=forge$g.util.createBuffer(),o=!1;if("bitStringContents"in t&&(o=!0,t.original&&(o=asn1$2.equals(t,t.original))),o)a.putBytes(t.bitStringContents);else if(t.composed){t.constructed?n|=32:a.putByte(0);for(var c=0;c<t.value.length;++c)t.value[c]!==void 0&&a.putBuffer(asn1$2.toDer(t.value[c]))}else if(t.type===asn1$2.Type.BMPSTRING)for(var c=0;c<t.value.length;++c)a.putInt16(t.value.charCodeAt(c));else t.type===asn1$2.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?a.putBytes(t.value.substr(1)):a.putBytes(t.value);if(e.putByte(n),a.length()<=127)e.putByte(a.length()&127);else{var l=a.length(),u="";do u+=String.fromCharCode(l&255),l=l>>>8;while(l>0);e.putByte(u.length|128);for(var c=u.length-1;c>=0;--c)e.putByte(u.charCodeAt(c))}return e.putBuffer(a),e};asn1$2.oidToDer=function(t){var e=t.split("."),n=forge$g.util.createBuffer();n.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var a,o,c,l,u=2;u<e.length;++u){a=!0,o=[],c=parseInt(e[u],10);do l=c&127,c=c>>>7,a||(l|=128),o.push(l),a=!1;while(c>0);for(var d=o.length-1;d>=0;--d)n.putByte(o[d])}return n};asn1$2.derToOid=function(t){var e;typeof t=="string"&&(t=forge$g.util.createBuffer(t));var n=t.getByte();e=Math.floor(n/40)+"."+n%40;for(var a=0;t.length()>0;)n=t.getByte(),a=a<<7,n&128?a+=n&127:(e+="."+(a+n),a=0);return e};asn1$2.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var a=parseInt(t.substr(2,2),10)-1,o=parseInt(t.substr(4,2),10),c=parseInt(t.substr(6,2),10),l=parseInt(t.substr(8,2),10),u=0;if(t.length>11){var d=t.charAt(10),m=10;d!=="+"&&d!=="-"&&(u=parseInt(t.substr(10,2),10),m+=2)}if(e.setUTCFullYear(n,a,o),e.setUTCHours(c,l,u,0),m&&(d=t.charAt(m),d==="+"||d==="-")){var b=parseInt(t.substr(m+1,2),10),x=parseInt(t.substr(m+4,2),10),_=b*60+x;_*=6e4,d==="+"?e.setTime(+e-_):e.setTime(+e+_)}return e};asn1$2.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),a=parseInt(t.substr(4,2),10)-1,o=parseInt(t.substr(6,2),10),c=parseInt(t.substr(8,2),10),l=parseInt(t.substr(10,2),10),u=parseInt(t.substr(12,2),10),d=0,m=0,b=!1;t.charAt(t.length-1)==="Z"&&(b=!0);var x=t.length-5,_=t.charAt(x);if(_==="+"||_==="-"){var w=parseInt(t.substr(x+1,2),10),S=parseInt(t.substr(x+4,2),10);m=w*60+S,m*=6e4,_==="+"&&(m*=-1),b=!0}return t.charAt(14)==="."&&(d=parseFloat(t.substr(14),10)*1e3),b?(e.setUTCFullYear(n,a,o),e.setUTCHours(c,l,u,d),e.setTime(+e+m)):(e.setFullYear(n,a,o),e.setHours(c,l,u,d)),e};asn1$2.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var a=0;a<n.length;++a)n[a].length<2&&(e+="0"),e+=n[a];return e+="Z",e};asn1$2.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var a=0;a<n.length;++a)n[a].length<2&&(e+="0"),e+=n[a];return e+="Z",e};asn1$2.integerToDer=function(t){var e=forge$g.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=t,n};asn1$2.derToInteger=function(t){typeof t=="string"&&(t=forge$g.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};asn1$2.validate=function(t,e,n,a){var o=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(o=!0,e.value&&forge$g.util.isArray(e.value))for(var c=0,l=0;o&&l<e.value.length;++l)o=e.value[l].optional||!1,t.value[c]&&(o=asn1$2.validate(t.value[c],e.value[l],n,a),o?++c:e.value[l].optional&&(o=!0)),!o&&a&&a.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(o&&n&&(e.capture&&(n[e.capture]=t.value),e.captureAsn1&&(n[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(n[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)n[e.captureBitStringValue]="";else{var u=t.bitStringContents.charCodeAt(0);if(u!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else a&&a.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else a&&(t.tagClass!==e.tagClass&&a.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&a.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return o};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$2.prettyPrint=function(t,e,n){var a="";e=e||0,n=n||2,e>0&&(a+=`
`);for(var o="",c=0;c<e*n;++c)o+=" ";switch(a+=o+"Tag: ",t.tagClass){case asn1$2.Class.UNIVERSAL:a+="Universal:";break;case asn1$2.Class.APPLICATION:a+="Application:";break;case asn1$2.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case asn1$2.Class.PRIVATE:a+="Private:";break}if(t.tagClass===asn1$2.Class.UNIVERSAL)switch(a+=t.type,t.type){case asn1$2.Type.NONE:a+=" (None)";break;case asn1$2.Type.BOOLEAN:a+=" (Boolean)";break;case asn1$2.Type.INTEGER:a+=" (Integer)";break;case asn1$2.Type.BITSTRING:a+=" (Bit string)";break;case asn1$2.Type.OCTETSTRING:a+=" (Octet string)";break;case asn1$2.Type.NULL:a+=" (Null)";break;case asn1$2.Type.OID:a+=" (Object Identifier)";break;case asn1$2.Type.ODESC:a+=" (Object Descriptor)";break;case asn1$2.Type.EXTERNAL:a+=" (External or Instance of)";break;case asn1$2.Type.REAL:a+=" (Real)";break;case asn1$2.Type.ENUMERATED:a+=" (Enumerated)";break;case asn1$2.Type.EMBEDDED:a+=" (Embedded PDV)";break;case asn1$2.Type.UTF8:a+=" (UTF8)";break;case asn1$2.Type.ROID:a+=" (Relative Object Identifier)";break;case asn1$2.Type.SEQUENCE:a+=" (Sequence)";break;case asn1$2.Type.SET:a+=" (Set)";break;case asn1$2.Type.PRINTABLESTRING:a+=" (Printable String)";break;case asn1$2.Type.IA5String:a+=" (IA5String (ASCII))";break;case asn1$2.Type.UTCTIME:a+=" (UTC time)";break;case asn1$2.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case asn1$2.Type.BMPSTRING:a+=" (BMP String)";break}else a+=t.type;if(a+=`
`,a+=o+"Constructed: "+t.constructed+`
`,t.composed){for(var l=0,u="",c=0;c<t.value.length;++c)t.value[c]!==void 0&&(l+=1,u+=asn1$2.prettyPrint(t.value[c],e+1,n),c+1<t.value.length&&(u+=","));a+=o+"Sub values: "+l+u}else{if(a+=o+"Value: ",t.type===asn1$2.Type.OID){var d=asn1$2.derToOid(t.value);a+=d,forge$g.pki&&forge$g.pki.oids&&d in forge$g.pki.oids&&(a+=" ("+forge$g.pki.oids[d]+") ")}if(t.type===asn1$2.Type.INTEGER)try{a+=asn1$2.derToInteger(t.value)}catch{a+="0x"+forge$g.util.bytesToHex(t.value)}else if(t.type===asn1$2.Type.BITSTRING){if(t.value.length>1?a+="0x"+forge$g.util.bytesToHex(t.value.slice(1)):a+="(none)",t.value.length>0){var m=t.value.charCodeAt(0);m==1?a+=" (1 unused bit shown)":m>1&&(a+=" ("+m+" unused bits shown)")}}else if(t.type===asn1$2.Type.OCTETSTRING)_nonLatinRegex.test(t.value)||(a+="("+t.value+") "),a+="0x"+forge$g.util.bytesToHex(t.value);else if(t.type===asn1$2.Type.UTF8)try{a+=forge$g.util.decodeUtf8(t.value)}catch(b){if(b.message==="URI malformed")a+="0x"+forge$g.util.bytesToHex(t.value)+" (malformed UTF8)";else throw b}else t.type===asn1$2.Type.PRINTABLESTRING||t.type===asn1$2.Type.IA5String?a+=t.value:_nonLatinRegex.test(t.value)?a+="0x"+forge$g.util.bytesToHex(t.value):t.value.length===0?a+="[null]":a+=t.value}return a};var forge$f=forge$m;forge$f.des=forge$f.des||{};forge$f.des.startEncrypting=function(t,e,n,a){var o=_createCipher({key:t,output:n,decrypt:!1,mode:a||(e===null?"ECB":"CBC")});return o.start(e),o};forge$f.des.createEncryptionCipher=function(t,e){return _createCipher({key:t,output:null,decrypt:!1,mode:e})};forge$f.des.startDecrypting=function(t,e,n,a){var o=_createCipher({key:t,output:n,decrypt:!0,mode:a||(e===null?"ECB":"CBC")});return o.start(e),o};forge$f.des.createDecryptionCipher=function(t,e){return _createCipher({key:t,output:null,decrypt:!0,mode:e})};forge$f.des.Algorithm=function(t,e){var n=this;n.name=t,n.mode=new e({blockSize:8,cipher:{encrypt:function(a,o){return _updateBlock(n._keys,a,o,!1)},decrypt:function(a,o){return _updateBlock(n._keys,a,o,!0)}}}),n._init=!1};forge$f.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=forge$f.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=_createKeys(e),this._init=!0}};registerAlgorithm("DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$f.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$f.cipher.modes.ctr);function registerAlgorithm(t,e){var n=function(){return new forge$f.des.Algorithm(t,e)};forge$f.cipher.registerAlgorithm(t,n)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],c=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],l=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],u=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],d=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],m=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],b=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],x=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],_=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],w=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],S=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],T=t.length()>8?3:1,B=[],C=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],D=0,z,U=0;U<T;U++){var Y=t.getInt32(),X=t.getInt32();z=(Y>>>4^X)&252645135,X^=z,Y^=z<<4,z=(X>>>-16^Y)&65535,Y^=z,X^=z<<-16,z=(Y>>>2^X)&858993459,X^=z,Y^=z<<2,z=(X>>>-16^Y)&65535,Y^=z,X^=z<<-16,z=(Y>>>1^X)&1431655765,X^=z,Y^=z<<1,z=(X>>>8^Y)&16711935,Y^=z,X^=z<<8,z=(Y>>>1^X)&1431655765,X^=z,Y^=z<<1,z=Y<<8|X>>>20&240,Y=X<<24|X<<8&16711680|X>>>8&65280|X>>>24&240,X=z;for(var O=0;O<C.length;++O){C[O]?(Y=Y<<2|Y>>>26,X=X<<2|X>>>26):(Y=Y<<1|Y>>>27,X=X<<1|X>>>27),Y&=-15,X&=-15;var J=e[Y>>>28]|n[Y>>>24&15]|a[Y>>>20&15]|o[Y>>>16&15]|c[Y>>>12&15]|l[Y>>>8&15]|u[Y>>>4&15],Z=d[X>>>28]|m[X>>>24&15]|b[X>>>20&15]|x[X>>>16&15]|_[X>>>12&15]|w[X>>>8&15]|S[X>>>4&15];z=(Z>>>16^J)&65535,B[D++]=J^z,B[D++]=Z^z<<16}}return B}function _updateBlock(t,e,n,a){var o=t.length===32?3:9,c;o===3?c=a?[30,-2,-2]:[0,32,2]:c=a?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var l,u=e[0],d=e[1];l=(u>>>4^d)&252645135,d^=l,u^=l<<4,l=(u>>>16^d)&65535,d^=l,u^=l<<16,l=(d>>>2^u)&858993459,u^=l,d^=l<<2,l=(d>>>8^u)&16711935,u^=l,d^=l<<8,l=(u>>>1^d)&1431655765,d^=l,u^=l<<1,u=u<<1|u>>>31,d=d<<1|d>>>31;for(var m=0;m<o;m+=3){for(var b=c[m+1],x=c[m+2],_=c[m];_!=b;_+=x){var w=d^t[_],S=(d>>>4|d<<28)^t[_+1];l=u,u=d,d=l^(spfunction2[w>>>24&63]|spfunction4[w>>>16&63]|spfunction6[w>>>8&63]|spfunction8[w&63]|spfunction1[S>>>24&63]|spfunction3[S>>>16&63]|spfunction5[S>>>8&63]|spfunction7[S&63])}l=u,u=d,d=l}u=u>>>1|u<<31,d=d>>>1|d<<31,l=(u>>>1^d)&1431655765,d^=l,u^=l<<1,l=(d>>>8^u)&16711935,u^=l,d^=l<<8,l=(d>>>2^u)&858993459,u^=l,d^=l<<2,l=(u>>>16^d)&65535,d^=l,u^=l<<16,l=(u>>>4^d)&252645135,d^=l,u^=l<<4,n[0]=u,n[1]=d}function _createCipher(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="DES-"+e,a;t.decrypt?a=forge$f.cipher.createDecipher(n,t.key):a=forge$f.cipher.createCipher(n,t.key);var o=a.start;return a.start=function(c,l){var u=null;l instanceof forge$f.util.ByteBuffer&&(u=l,l={}),l=l||{},l.output=u,l.iv=c,o.call(a,l)},a}var forge$e=forge$m;forge$e.md=forge$e.md||{};forge$e.md.algorithms=forge$e.md.algorithms||{};var forge$d=forge$m,hmac=forge$d.hmac=forge$d.hmac||{};hmac.create=function(){var t=null,e=null,n=null,a=null,o={};return o.start=function(c,l){if(c!==null)if(typeof c=="string")if(c=c.toLowerCase(),c in forge$d.md.algorithms)e=forge$d.md.algorithms[c].create();else throw new Error('Unknown hash algorithm "'+c+'"');else e=c;if(l===null)l=t;else{if(typeof l=="string")l=forge$d.util.createBuffer(l);else if(forge$d.util.isArray(l)){var u=l;l=forge$d.util.createBuffer();for(var d=0;d<u.length;++d)l.putByte(u[d])}var m=l.length();m>e.blockLength&&(e.start(),e.update(l.bytes()),l=e.digest()),n=forge$d.util.createBuffer(),a=forge$d.util.createBuffer(),m=l.length();for(var d=0;d<m;++d){var u=l.at(d);n.putByte(54^u),a.putByte(92^u)}if(m<e.blockLength)for(var u=e.blockLength-m,d=0;d<u;++d)n.putByte(54),a.putByte(92);t=l,n=n.bytes(),a=a.bytes()}e.start(),e.update(n)},o.update=function(c){e.update(c)},o.getMac=function(){var c=e.digest().bytes();return e.start(),e.update(a),e.update(c),e.digest()},o.digest=o.getMac,o};var forge$c=forge$m,pkcs5=forge$c.pkcs5=forge$c.pkcs5||{},crypto$4;forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&(crypto$4=requireCryptoBrowserify());var pbkdf2$2=forge$c.pbkdf2=pkcs5.pbkdf2=function(t,e,n,a,o,c){if(typeof o=="function"&&(c=o,o=null),forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&crypto$4.pbkdf2&&(o===null||typeof o!="object")&&(crypto$4.pbkdf2Sync.length>4||!o||o==="sha1"))return typeof o!="string"&&(o="sha1"),t=Buffer$x.from(t,"binary"),e=Buffer$x.from(e,"binary"),c?crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2(t,e,n,a,function(z,U){if(z)return c(z);c(null,U.toString("binary"))}):crypto$4.pbkdf2(t,e,n,a,o,function(z,U){if(z)return c(z);c(null,U.toString("binary"))}):crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2Sync(t,e,n,a).toString("binary"):crypto$4.pbkdf2Sync(t,e,n,a,o).toString("binary");if((typeof o>"u"||o===null)&&(o="sha1"),typeof o=="string"){if(!(o in forge$c.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=forge$c.md[o].create()}var l=o.digestLength;if(a>4294967295*l){var u=new Error("Derived key is too long.");if(c)return c(u);throw u}var d=Math.ceil(a/l),m=a-(d-1)*l,b=forge$c.hmac.create();b.start(o,t);var x="",_,w,S;if(!c){for(var T=1;T<=d;++T){b.start(null,null),b.update(e),b.update(forge$c.util.int32ToBytes(T)),_=S=b.digest().getBytes();for(var B=2;B<=n;++B)b.start(null,null),b.update(S),w=b.digest().getBytes(),_=forge$c.util.xorBytes(_,w,l),S=w;x+=T<d?_:_.substr(0,m)}return x}var T=1,B;function C(){if(T>d)return c(null,x);b.start(null,null),b.update(e),b.update(forge$c.util.int32ToBytes(T)),_=S=b.digest().getBytes(),B=2,D()}function D(){if(B<=n)return b.start(null,null),b.update(S),w=b.digest().getBytes(),_=forge$c.util.xorBytes(_,w,l),S=w,++B,forge$c.util.setImmediate(D);x+=T<d?_:_.substr(0,m),++T,C()}C()},forge$b=forge$m,pem=forge$b.pem=forge$b.pem||{};pem.encode=function(t,e){e=e||{};var n="-----BEGIN "+t.type+`-----\r
`,a;if(t.procType&&(a={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},n+=foldHeader(a)),t.contentDomain&&(a={name:"Content-Domain",values:[t.contentDomain]},n+=foldHeader(a)),t.dekInfo&&(a={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&a.values.push(t.dekInfo.parameters),n+=foldHeader(a)),t.headers)for(var o=0;o<t.headers.length;++o)n+=foldHeader(t.headers[o]);return t.procType&&(n+=`\r
`),n+=forge$b.util.encode64(t.body,e.maxline||64)+`\r
`,n+="-----END "+t.type+`-----\r
`,n};pem.decode=function(t){for(var e=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/,c;c=n.exec(t),!!c;){var l=c[1];l==="NEW CERTIFICATE REQUEST"&&(l="CERTIFICATE REQUEST");var u={type:l,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$b.util.decode64(c[3])};if(e.push(u),!!c[2]){for(var d=c[2].split(o),m=0;c&&m<d.length;){for(var b=d[m].replace(/\s+$/,""),x=m+1;x<d.length;++x){var _=d[x];if(!/\s/.test(_[0]))break;b+=_,m=x}if(c=b.match(a),c){for(var w={name:c[1],values:[]},S=c[2].split(","),T=0;T<S.length;++T)w.values.push(ltrim(S[T]));if(u.procType)if(!u.contentDomain&&w.name==="Content-Domain")u.contentDomain=S[0]||"";else if(!u.dekInfo&&w.name==="DEK-Info"){if(w.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:S[0],parameters:S[1]||null}}else u.headers.push(w);else{if(w.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(w.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:S[0],type:S[1]}}}++m}if(u.procType==="ENCRYPTED"&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function foldHeader(t){for(var e=t.name+": ",n=[],a=function(d,m){return" "+m},o=0;o<t.values.length;++o)n.push(t.values[o].replace(/^(\S+\r\n)/,a));e+=n.join(",")+`\r
`;for(var c=0,l=-1,o=0;o<e.length;++o,++c)if(c>65&&l!==-1){var u=e[l];u===","?(++l,e=e.substr(0,l)+`\r
 `+e.substr(l)):e=e.substr(0,l)+`\r
`+u+e.substr(l+1),c=o-l-1,l=-1,++o}else(e[o]===" "||e[o]==="	"||e[o]===",")&&(l=o);return e}function ltrim(t){return t.replace(/^\s+/,"")}var forge$a=forge$m,sha256$5=forge$a.sha256=forge$a.sha256||{};forge$a.md.sha256=forge$a.md.algorithms.sha256=sha256$5;sha256$5.create=function(){_initialized$2||_init$2();var t=null,e=forge$a.util.createBuffer(),n=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var o=a.messageLengthSize/4,c=0;c<o;++c)a.fullMessageLength.push(0);return e=forge$a.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a},a.start(),a.update=function(o,c){c==="utf8"&&(o=forge$a.util.encodeUtf8(o));var l=o.length;a.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var u=a.fullMessageLength.length-1;u>=0;--u)a.fullMessageLength[u]+=l[1],l[1]=l[0]+(a.fullMessageLength[u]/4294967296>>>0),a.fullMessageLength[u]=a.fullMessageLength[u]>>>0,l[0]=l[1]/4294967296>>>0;return e.putBytes(o),_update$2(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),a},a.digest=function(){var o=forge$a.util.createBuffer();o.putBytes(e.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,l=c&a.blockLength-1;o.putBytes(_padding$2.substr(0,a.blockLength-l));for(var u,d,m=a.fullMessageLength[0]*8,b=0;b<a.fullMessageLength.length-1;++b)u=a.fullMessageLength[b+1]*8,d=u/4294967296>>>0,m+=d,o.putInt32(m>>>0),m=u>>>0;o.putInt32(m);var x={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};_update$2(x,n,o);var _=forge$a.util.createBuffer();return _.putInt32(x.h0),_.putInt32(x.h1),_.putInt32(x.h2),_.putInt32(x.h3),_.putInt32(x.h4),_.putInt32(x.h5),_.putInt32(x.h6),_.putInt32(x.h7),_},a};var _padding$2=null,_initialized$2=!1,_k$1=null;function _init$2(){_padding$2=String.fromCharCode(128),_padding$2+=forge$a.util.fillString(String.fromCharCode(0),64),_k$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$2=!0}function _update$2(t,e,n){for(var a,o,c,l,u,d,m,b,x,_,w,S,T,B,C,D=n.length();D>=64;){for(m=0;m<16;++m)e[m]=n.getInt32();for(;m<64;++m)a=e[m-2],a=(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,o=e[m-15],o=(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,e[m]=a+e[m-7]+o+e[m-16]|0;for(b=t.h0,x=t.h1,_=t.h2,w=t.h3,S=t.h4,T=t.h5,B=t.h6,C=t.h7,m=0;m<64;++m)l=(S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7),u=B^S&(T^B),c=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10),d=b&x|_&(b^x),a=C+l+u+_k$1[m]+e[m],o=c+d,C=B,B=T,T=S,S=w+a>>>0,w=_,_=x,x=b,b=a+o>>>0;t.h0=t.h0+b|0,t.h1=t.h1+x|0,t.h2=t.h2+_|0,t.h3=t.h3+w|0,t.h4=t.h4+S|0,t.h5=t.h5+T|0,t.h6=t.h6+B|0,t.h7=t.h7+C|0,D-=64}}var forge$9=forge$m,_crypto$1=null;forge$9.util.isNodejs&&!forge$9.options.usePureJavaScript&&!browser$1$1.versions["node-webkit"]&&(_crypto$1=requireCryptoBrowserify());var prng=forge$9.prng=forge$9.prng||{};prng.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=t.md,a=new Array(32),o=0;o<32;++o)a[o]=n.create();e.pools=a,e.pool=0,e.generate=function(m,b){if(!b)return e.generateSync(m);var x=e.plugin.cipher,_=e.plugin.increment,w=e.plugin.formatKey,S=e.plugin.formatSeed,T=forge$9.util.createBuffer();e.key=null,B();function B(C){if(C)return b(C);if(T.length()>=m)return b(null,T.getBytes(m));if(e.generated>1048575&&(e.key=null),e.key===null)return forge$9.util.nextTick(function(){c(B)});var D=x(e.key,e.seed);e.generated+=D.length,T.putBytes(D),e.key=w(x(e.key,_(e.seed))),e.seed=S(x(e.key,e.seed)),forge$9.util.setImmediate(B)}},e.generateSync=function(m){var b=e.plugin.cipher,x=e.plugin.increment,_=e.plugin.formatKey,w=e.plugin.formatSeed;e.key=null;for(var S=forge$9.util.createBuffer();S.length()<m;){e.generated>1048575&&(e.key=null),e.key===null&&l();var T=b(e.key,e.seed);e.generated+=T.length,S.putBytes(T),e.key=_(b(e.key,x(e.seed))),e.seed=w(b(e.key,e.seed))}return S.getBytes(m)};function c(m){if(e.pools[0].messageLength>=32)return u(),m();var b=32-e.pools[0].messageLength<<5;e.seedFile(b,function(x,_){if(x)return m(x);e.collect(_),u(),m()})}function l(){if(e.pools[0].messageLength>=32)return u();var m=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(m)),u()}function u(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var m=e.plugin.md.create();m.update(e.keyBytes);for(var b=1,x=0;x<32;++x)e.reseeds%b===0&&(m.update(e.pools[x].digest().getBytes()),e.pools[x].start()),b=b<<1;e.keyBytes=m.digest().getBytes(),m.start(),m.update(e.keyBytes);var _=m.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(_),e.generated=0}function d(m){var b=null,x=forge$9.util.globalScope,_=x.crypto||x.msCrypto;_&&_.getRandomValues&&(b=function(Y){return _.getRandomValues(Y)});var w=forge$9.util.createBuffer();if(b)for(;w.length()<m;){var S=Math.max(1,Math.min(m-w.length(),65536)/4),T=new Uint32Array(Math.floor(S));try{b(T);for(var B=0;B<T.length;++B)w.putInt32(T[B])}catch(Y){if(!(typeof QuotaExceededError<"u"&&Y instanceof QuotaExceededError))throw Y}}if(w.length()<m)for(var C,D,z,U=Math.floor(Math.random()*65536);w.length()<m;){D=16807*(U&65535),C=16807*(U>>16),D+=(C&32767)<<16,D+=C>>15,D=(D&2147483647)+(D>>31),U=D&4294967295;for(var B=0;B<3;++B)z=U>>>(B<<3),z^=Math.floor(Math.random()*256),w.putByte(z&255)}return w.getBytes(m)}return _crypto$1?(e.seedFile=function(m,b){_crypto$1.randomBytes(m,function(x,_){if(x)return b(x);b(null,_.toString())})},e.seedFileSync=function(m){return _crypto$1.randomBytes(m).toString()}):(e.seedFile=function(m,b){try{b(null,d(m))}catch(x){b(x)}},e.seedFileSync=d),e.collect=function(m){for(var b=m.length,x=0;x<b;++x)e.pools[e.pool].update(m.substr(x,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(m,b){for(var x="",_=0;_<b;_+=8)x+=String.fromCharCode(m>>_&255);e.collect(x)},e.registerWorker=function(m){if(m===self)e.seedFile=function(x,_){function w(S){var T=S.data;T.forge&&T.forge.prng&&(self.removeEventListener("message",w),_(T.forge.prng.err,T.forge.prng.bytes))}self.addEventListener("message",w),self.postMessage({forge:{prng:{needed:x}}})};else{var b=function(x){var _=x.data;_.forge&&_.forge.prng&&e.seedFile(_.forge.prng.needed,function(w,S){m.postMessage({forge:{prng:{err:w,bytes:S}}})})};m.addEventListener("message",b)}},e};var forge$8=forge$m;(function(){forge$8.random&&forge$8.random.getBytes||function(t){var e={},n=new Array(4),a=forge$8.util.createBuffer();e.formatKey=function(x){var _=forge$8.util.createBuffer(x);return x=new Array(4),x[0]=_.getInt32(),x[1]=_.getInt32(),x[2]=_.getInt32(),x[3]=_.getInt32(),forge$8.aes._expandKey(x,!1)},e.formatSeed=function(x){var _=forge$8.util.createBuffer(x);return x=new Array(4),x[0]=_.getInt32(),x[1]=_.getInt32(),x[2]=_.getInt32(),x[3]=_.getInt32(),x},e.cipher=function(x,_){return forge$8.aes._updateBlock(x,_,n,!1),a.putInt32(n[0]),a.putInt32(n[1]),a.putInt32(n[2]),a.putInt32(n[3]),a.getBytes()},e.increment=function(x){return++x[3],x},e.md=forge$8.md.sha256;function o(){var x=forge$8.prng.create(e);return x.getBytes=function(_,w){return x.generate(_,w)},x.getBytesSync=function(_){return x.generate(_)},x}var c=o(),l=null,u=forge$8.util.globalScope,d=u.crypto||u.msCrypto;if(d&&d.getRandomValues&&(l=function(x){return d.getRandomValues(x)}),!forge$8.util.isNodejs&&!l){if(c.collectInt(+new Date,32),typeof navigator<"u"){var m="";for(var b in navigator)try{typeof navigator[b]=="string"&&(m+=navigator[b])}catch{}c.collect(m),m=null}t&&(t().mousemove(function(x){c.collectInt(x.clientX,16),c.collectInt(x.clientY,16)}),t().keypress(function(x){c.collectInt(x.charCode,8)}))}if(!forge$8.random)forge$8.random=c;else for(var b in c)forge$8.random[b]=c[b];forge$8.random.createInstance=o}(typeof jQuery<"u"?jQuery:null)})();var forge$7=forge$m,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],rol=function(t,e){return t<<e&65535|(t&65535)>>16-e},ror=function(t,e){return(t&65535)>>e|t<<16-e&65535};forge$7.rc2=forge$7.rc2||{};forge$7.rc2.expandKey=function(t,e){typeof t=="string"&&(t=forge$7.util.createBuffer(t)),e=e||128;var n=t,a=t.length(),o=e,c=Math.ceil(o/8),l=255>>(o&7),u;for(u=a;u<128;u++)n.putByte(piTable[n.at(u-1)+n.at(u-a)&255]);for(n.setAt(128-c,piTable[n.at(128-c)&l]),u=127-c;u>=0;u--)n.setAt(u,piTable[n.at(u+1)^n.at(u+c)]);return n};var createCipher=function(t,e,n){var a=!1,o=null,c=null,l=null,u,d,m,b,x=[];for(t=forge$7.rc2.expandKey(t,e),m=0;m<64;m++)x.push(t.getInt16Le());n?(u=function(S){for(m=0;m<4;m++)S[m]+=x[b]+(S[(m+3)%4]&S[(m+2)%4])+(~S[(m+3)%4]&S[(m+1)%4]),S[m]=rol(S[m],s[m]),b++},d=function(S){for(m=0;m<4;m++)S[m]+=x[S[(m+3)%4]&63]}):(u=function(S){for(m=3;m>=0;m--)S[m]=ror(S[m],s[m]),S[m]-=x[b]+(S[(m+3)%4]&S[(m+2)%4])+(~S[(m+3)%4]&S[(m+1)%4]),b--},d=function(S){for(m=3;m>=0;m--)S[m]-=x[S[(m+3)%4]&63]});var _=function(S){var T=[];for(m=0;m<4;m++){var B=o.getInt16Le();l!==null&&(n?B^=l.getInt16Le():l.putInt16Le(B)),T.push(B&65535)}b=n?0:63;for(var C=0;C<S.length;C++)for(var D=0;D<S[C][0];D++)S[C][1](T);for(m=0;m<4;m++)l!==null&&(n?l.putInt16Le(T[m]):T[m]^=l.getInt16Le()),c.putInt16Le(T[m])},w=null;return w={start:function(S,T){S&&typeof S=="string"&&(S=forge$7.util.createBuffer(S)),a=!1,o=forge$7.util.createBuffer(),c=T||new forge$7.util.createBuffer,l=S,w.output=c},update:function(S){for(a||o.putBuffer(S);o.length()>=8;)_([[5,u],[1,d],[6,u],[1,d],[5,u]])},finish:function(S){var T=!0;if(n)if(S)T=S(8,o,!n);else{var B=o.length()===8?8:8-o.length();o.fillWithByte(B,B)}if(T&&(a=!0,w.update()),!n&&(T=o.length()===0,T))if(S)T=S(8,c,!n);else{var C=c.length(),D=c.at(C-1);D>C?T=!1:c.truncate(D)}return T}},w};forge$7.rc2.startEncrypting=function(t,e,n){var a=forge$7.rc2.createEncryptionCipher(t,128);return a.start(e,n),a};forge$7.rc2.createEncryptionCipher=function(t,e){return createCipher(t,e,!0)};forge$7.rc2.startDecrypting=function(t,e,n){var a=forge$7.rc2.createDecryptionCipher(t,128);return a.start(e,n),a};forge$7.rc2.createDecryptionCipher=function(t,e){return createCipher(t,e,!1)};var forge$6=forge$m;forge$6.jsbn=forge$6.jsbn||{};var dbits;function BigInteger$2(t,e,n){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,n):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}forge$6.jsbn.BigInteger=BigInteger$2;function nbi(){return new BigInteger$2(null)}function am1(t,e,n,a,o,c){for(;--c>=0;){var l=e*this.data[t++]+n.data[a]+o;o=Math.floor(l/67108864),n.data[a++]=l&67108863}return o}function am2(t,e,n,a,o,c){for(var l=e&32767,u=e>>15;--c>=0;){var d=this.data[t]&32767,m=this.data[t++]>>15,b=u*d+m*l;d=l*d+((b&32767)<<15)+n.data[a]+(o&1073741823),o=(d>>>30)+(b>>>15)+u*m+(o>>>30),n.data[a++]=d&1073741823}return o}function am3(t,e,n,a,o,c){for(var l=e&16383,u=e>>14;--c>=0;){var d=this.data[t]&16383,m=this.data[t++]>>14,b=u*d+m*l;d=l*d+((b&16383)<<14)+n.data[a]+o,o=(d>>28)+(b>>14)+u*m,n.data[a++]=d&268435455}return o}typeof navigator>"u"?(BigInteger$2.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$2.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$2.prototype.am=am1,dbits=26):(BigInteger$2.prototype.am=am3,dbits=28);BigInteger$2.prototype.DB=dbits;BigInteger$2.prototype.DM=(1<<dbits)-1;BigInteger$2.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$2.prototype.FV=Math.pow(2,BI_FP);BigInteger$2.prototype.F1=BI_FP-dbits;BigInteger$2.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var n=BI_RC[t.charCodeAt(e)];return n??-1}function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==256)n=8;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var a=t.length,o=!1,c=0;--a>=0;){var l=n==8?t[a]&255:intAt(t,a);if(l<0){t.charAt(a)=="-"&&(o=!0);continue}o=!1,c==0?this.data[this.t++]=l:c+n>this.DB?(this.data[this.t-1]|=(l&(1<<this.DB-c)-1)<<c,this.data[this.t++]=l>>this.DB-c):this.data[this.t-1]|=l<<c,c+=n,c>=this.DB&&(c-=this.DB)}n==8&&t[0]&128&&(this.s=-1,c>0&&(this.data[this.t-1]|=(1<<this.DB-c)-1<<c)),this.clamp(),o&&BigInteger$2.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var n=(1<<e)-1,a,o=!1,c="",l=this.t,u=this.DB-l*this.DB%e;if(l-- >0)for(u<this.DB&&(a=this.data[l]>>u)>0&&(o=!0,c=int2char(a));l>=0;)u<e?(a=(this.data[l]&(1<<u)-1)<<e-u,a|=this.data[--l]>>(u+=this.DB-e)):(a=this.data[l]>>(u-=e)&n,u<=0&&(u+=this.DB,--l)),a>0&&(o=!0),o&&(c+=int2char(a));return o?c:"0"}function bnNegate(){var t=nbi();return BigInteger$2.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this.data[n]-t.data[n])!=0)return e;return 0}function nbits(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var n=t%this.DB,a=this.DB-n,o=(1<<a)-1,c=Math.floor(t/this.DB),l=this.s<<n&this.DM,u;for(u=this.t-1;u>=0;--u)e.data[u+c+1]=this.data[u]>>a|l,l=(this.data[u]&o)<<n;for(u=c-1;u>=0;--u)e.data[u]=0;e.data[c]=l,e.t=this.t+c+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var a=t%this.DB,o=this.DB-a,c=(1<<a)-1;e.data[0]=this.data[n]>>a;for(var l=n+1;l<this.t;++l)e.data[l-n-1]|=(this.data[l]&c)<<o,e.data[l-n]=this.data[l]>>a;a>0&&(e.data[this.t-n-1]|=(this.s&c)<<o),e.t=this.t-n,e.clamp()}function bnpSubTo(t,e){for(var n=0,a=0,o=Math.min(t.t,this.t);n<o;)a+=this.data[n]-t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;if(t.t<this.t){for(a-=t.s;n<this.t;)a+=this.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;n<t.t;)a-=t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a-=t.s}e.s=a<0?-1:0,a<-1?e.data[n++]=this.DV+a:a>0&&(e.data[n++]=a),e.t=n,e.clamp()}function bnpMultiplyTo(t,e){var n=this.abs(),a=t.abs(),o=n.t;for(e.t=o+a.t;--o>=0;)e.data[o]=0;for(o=0;o<a.t;++o)e.data[o+n.t]=n.am(0,a.data[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger$2.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var a=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,a,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,n){var a=t.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=nbi());var c=nbi(),l=this.s,u=t.s,d=this.DB-nbits(a.data[a.t-1]);d>0?(a.lShiftTo(d,c),o.lShiftTo(d,n)):(a.copyTo(c),o.copyTo(n));var m=c.t,b=c.data[m-1];if(b!=0){var x=b*(1<<this.F1)+(m>1?c.data[m-2]>>this.F2:0),_=this.FV/x,w=(1<<this.F1)/x,S=1<<this.F2,T=n.t,B=T-m,C=e??nbi();for(c.dlShiftTo(B,C),n.compareTo(C)>=0&&(n.data[n.t++]=1,n.subTo(C,n)),BigInteger$2.ONE.dlShiftTo(m,C),C.subTo(c,c);c.t<m;)c.data[c.t++]=0;for(;--B>=0;){var D=n.data[--T]==b?this.DM:Math.floor(n.data[T]*_+(n.data[T-1]+S)*w);if((n.data[T]+=c.am(0,D,n,B,0,m))<D)for(c.dlShiftTo(B,C),n.subTo(C,n);n.data[T]<--D;)n.subTo(C,n)}e!=null&&(n.drShiftTo(m,e),l!=u&&BigInteger$2.ZERO.subTo(e,e)),n.t=m,n.clamp(),d>0&&n.rShiftTo(d,n),l<0&&BigInteger$2.ZERO.subTo(n,n)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger$2.ZERO)>0&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger$2.ZERO)>0&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t.data[e]&32767,a=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t.data[n]+=this.m.am(0,a,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(t,e){if(t>4294967295||t<1)return BigInteger$2.ONE;var n=nbi(),a=nbi(),o=e.convert(this),c=nbits(t)-1;for(o.copyTo(n);--c>=0;)if(e.sqrTo(n,a),(t&1<<c)>0)e.mulTo(a,o,n);else{var l=n;n=a,a=l}return e.revert(n)}function bnModPowInt(t,e){var n;return t<256||e.isEven()?n=new Classic(e):n=new Montgomery(e),this.exp(t,n)}BigInteger$2.prototype.copyTo=bnpCopyTo;BigInteger$2.prototype.fromInt=bnpFromInt;BigInteger$2.prototype.fromString=bnpFromString;BigInteger$2.prototype.clamp=bnpClamp;BigInteger$2.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$2.prototype.drShiftTo=bnpDRShiftTo;BigInteger$2.prototype.lShiftTo=bnpLShiftTo;BigInteger$2.prototype.rShiftTo=bnpRShiftTo;BigInteger$2.prototype.subTo=bnpSubTo;BigInteger$2.prototype.multiplyTo=bnpMultiplyTo;BigInteger$2.prototype.squareTo=bnpSquareTo;BigInteger$2.prototype.divRemTo=bnpDivRemTo;BigInteger$2.prototype.invDigit=bnpInvDigit;BigInteger$2.prototype.isEven=bnpIsEven;BigInteger$2.prototype.exp=bnpExp;BigInteger$2.prototype.toString=bnToString;BigInteger$2.prototype.negate=bnNegate;BigInteger$2.prototype.abs=bnAbs;BigInteger$2.prototype.compareTo=bnCompareTo;BigInteger$2.prototype.bitLength=bnBitLength;BigInteger$2.prototype.mod=bnMod;BigInteger$2.prototype.modPowInt=bnModPowInt;BigInteger$2.ZERO=nbv(0);BigInteger$2.ONE=nbv(1);function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),a=nbv(n),o=nbi(),c=nbi(),l="";for(this.divRemTo(a,o,c);o.signum()>0;)l=(n+c.intValue()).toString(t).substr(1)+l,o.divRemTo(a,o,c);return c.intValue().toString(t)+l}function bnpFromRadix(t,e){this.fromInt(0),e==null&&(e=10);for(var n=this.chunkSize(e),a=Math.pow(e,n),o=!1,c=0,l=0,u=0;u<t.length;++u){var d=intAt(t,u);if(d<0){t.charAt(u)=="-"&&this.signum()==0&&(o=!0);continue}l=e*l+d,++c>=n&&(this.dMultiply(a),this.dAddOffset(l,0),c=0,l=0)}c>0&&(this.dMultiply(Math.pow(e,c)),this.dAddOffset(l,0)),o&&BigInteger$2.ZERO.subTo(this,this)}function bnpFromNumber(t,e,n){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(BigInteger$2.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger$2.ONE.shiftLeft(t-1),this);else{var a=new Array,o=t&7;a.length=(t>>3)+1,e.nextBytes(a),o>0?a[0]&=(1<<o)-1:a[0]=0,this.fromString(a,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var n=this.DB-t*this.DB%8,a,o=0;if(t-- >0)for(n<this.DB&&(a=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[o++]=a|this.s<<this.DB-n);t>=0;)n<8?(a=(this.data[t]&(1<<n)-1)<<8-n,a|=this.data[--t]>>(n+=this.DB-8)):(a=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),a&128&&(a|=-256),o==0&&(this.s&128)!=(a&128)&&++o,(o>0||a!=this.s)&&(e[o++]=a);return e}function bnEquals(t){return this.compareTo(t)==0}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,e,n){var a,o,c=Math.min(t.t,this.t);for(a=0;a<c;++a)n.data[a]=e(this.data[a],t.data[a]);if(t.t<this.t){for(o=t.s&this.DM,a=c;a<this.t;++a)n.data[a]=e(this.data[a],o);n.t=this.t}else{for(o=this.s&this.DM,a=c;a<t.t;++a)n.data[a]=e(o,t.data[a]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e}function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var e=nbi();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function bnShiftRight(t){var e=nbi();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function lbit(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+lbit(this.data[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function bnBitCount(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=cbit(this.data[n]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function bnpChangeBit(t,e){var n=BigInteger$2.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){for(var n=0,a=0,o=Math.min(t.t,this.t);n<o;)a+=this.data[n]+t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;if(t.t<this.t){for(a+=t.s;n<this.t;)a+=this.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;n<t.t;)a+=t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a+=t.s}e.s=a<0?-1:0,a>0?e.data[n++]=a:a<-1&&(e.data[n++]=this.DV+a),e.t=n,e.clamp()}function bnAdd(t){var e=nbi();return this.addTo(t,e),e}function bnSubtract(t){var e=nbi();return this.subTo(t,e),e}function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e}function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e}function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e}function bnDivideAndRemainder(t){var e=nbi(),n=nbi();return this.divRemTo(t,e,n),new Array(e,n)}function bnpDMultiply(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,n){t.multiplyTo(e,n)}function nSqrTo(t,e){t.squareTo(e)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,n){var a=Math.min(this.t+t.t,e);for(n.s=0,n.t=a;a>0;)n.data[--a]=0;var o;for(o=n.t-this.t;a<o;++a)n.data[a+this.t]=this.am(0,t.data[a],n,a,0,this.t);for(o=Math.min(t.t,e);a<o;++a)this.am(0,t.data[a],n,a,0,e-a);n.clamp()}function bnpMultiplyUpperTo(t,e,n){--e;var a=n.t=this.t+t.t-e;for(n.s=0;--a>=0;)n.data[a]=0;for(a=Math.max(e-this.t,0);a<t.t;++a)n.data[this.t+a-e]=this.am(e-a,t.data[a],n,0,0,this.t+a-e);n.clamp(),n.drShiftTo(1,n)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger$2.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)}function barrettMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(t,e){var n=t.bitLength(),a,o=nbv(1),c;if(n<=0)return o;n<18?a=1:n<48?a=3:n<144?a=4:n<768?a=5:a=6,n<8?c=new Classic(e):e.isEven()?c=new Barrett(e):c=new Montgomery(e);var l=new Array,u=3,d=a-1,m=(1<<a)-1;if(l[1]=c.convert(this),a>1){var b=nbi();for(c.sqrTo(l[1],b);u<=m;)l[u]=nbi(),c.mulTo(b,l[u-2],l[u]),u+=2}var x=t.t-1,_,w=!0,S=nbi(),T;for(n=nbits(t.data[x])-1;x>=0;){for(n>=d?_=t.data[x]>>n-d&m:(_=(t.data[x]&(1<<n+1)-1)<<d-n,x>0&&(_|=t.data[x-1]>>this.DB+n-d)),u=a;!(_&1);)_>>=1,--u;if((n-=u)<0&&(n+=this.DB,--x),w)l[_].copyTo(o),w=!1;else{for(;u>1;)c.sqrTo(o,S),c.sqrTo(S,o),u-=2;u>0?c.sqrTo(o,S):(T=o,o=S,S=T),c.mulTo(S,l[_],o)}for(;x>=0&&!(t.data[x]&1<<n);)c.sqrTo(o,S),T=o,o=S,S=T,--n<0&&(n=this.DB-1,--x)}return c.revert(o)}function bnGCD(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var a=e;e=n,n=a}var o=e.getLowestSetBit(),c=n.getLowestSetBit();if(c<0)return e;for(o<c&&(c=o),c>0&&(e.rShiftTo(c,e),n.rShiftTo(c,n));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return c>0&&n.lShiftTo(c,n),n}function bnpModInt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(e==0)n=this.data[0]%t;else for(var a=this.t-1;a>=0;--a)n=(e*n+this.data[a])%t;return n}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return BigInteger$2.ZERO;for(var n=t.clone(),a=this.clone(),o=nbv(1),c=nbv(0),l=nbv(0),u=nbv(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!c.isEven())&&(o.addTo(this,o),c.subTo(t,c)),o.rShiftTo(1,o)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);for(;a.isEven();)a.rShiftTo(1,a),e?((!l.isEven()||!u.isEven())&&(l.addTo(this,l),u.subTo(t,u)),l.rShiftTo(1,l)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(a)>=0?(n.subTo(a,n),e&&o.subTo(l,o),c.subTo(u,c)):(a.subTo(n,a),e&&l.subTo(o,l),u.subTo(c,u))}if(a.compareTo(BigInteger$2.ONE)!=0)return BigInteger$2.ZERO;if(u.compareTo(t)>=0)return u.subtract(t);if(u.signum()<0)u.addTo(t,u);else return u;return u.signum()<0?u.add(t):u}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var e,n=this.abs();if(n.t==1&&n.data[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(n.data[0]==lowprimes[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<lowprimes.length;){for(var a=lowprimes[e],o=e+1;o<lowprimes.length&&a<lplim;)a*=lowprimes[o++];for(a=n.modInt(a);e<o;)if(a%lowprimes[e++]==0)return!1}return n.millerRabin(t)}function bnpMillerRabin(t){var e=this.subtract(BigInteger$2.ONE),n=e.getLowestSetBit();if(n<=0)return!1;for(var a=e.shiftRight(n),o=bnGetPrng(),c,l=0;l<t;++l){do c=new BigInteger$2(this.bitLength(),o);while(c.compareTo(BigInteger$2.ONE)<=0||c.compareTo(e)>=0);var u=c.modPow(a,this);if(u.compareTo(BigInteger$2.ONE)!=0&&u.compareTo(e)!=0){for(var d=1;d++<n&&u.compareTo(e)!=0;)if(u=u.modPowInt(2,this),u.compareTo(BigInteger$2.ONE)==0)return!1;if(u.compareTo(e)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}BigInteger$2.prototype.chunkSize=bnpChunkSize;BigInteger$2.prototype.toRadix=bnpToRadix;BigInteger$2.prototype.fromRadix=bnpFromRadix;BigInteger$2.prototype.fromNumber=bnpFromNumber;BigInteger$2.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$2.prototype.changeBit=bnpChangeBit;BigInteger$2.prototype.addTo=bnpAddTo;BigInteger$2.prototype.dMultiply=bnpDMultiply;BigInteger$2.prototype.dAddOffset=bnpDAddOffset;BigInteger$2.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$2.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$2.prototype.modInt=bnpModInt;BigInteger$2.prototype.millerRabin=bnpMillerRabin;BigInteger$2.prototype.clone=bnClone;BigInteger$2.prototype.intValue=bnIntValue;BigInteger$2.prototype.byteValue=bnByteValue;BigInteger$2.prototype.shortValue=bnShortValue;BigInteger$2.prototype.signum=bnSigNum;BigInteger$2.prototype.toByteArray=bnToByteArray;BigInteger$2.prototype.equals=bnEquals;BigInteger$2.prototype.min=bnMin;BigInteger$2.prototype.max=bnMax;BigInteger$2.prototype.and=bnAnd;BigInteger$2.prototype.or=bnOr;BigInteger$2.prototype.xor=bnXor;BigInteger$2.prototype.andNot=bnAndNot;BigInteger$2.prototype.not=bnNot;BigInteger$2.prototype.shiftLeft=bnShiftLeft;BigInteger$2.prototype.shiftRight=bnShiftRight;BigInteger$2.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$2.prototype.bitCount=bnBitCount;BigInteger$2.prototype.testBit=bnTestBit;BigInteger$2.prototype.setBit=bnSetBit;BigInteger$2.prototype.clearBit=bnClearBit;BigInteger$2.prototype.flipBit=bnFlipBit;BigInteger$2.prototype.add=bnAdd;BigInteger$2.prototype.subtract=bnSubtract;BigInteger$2.prototype.multiply=bnMultiply;BigInteger$2.prototype.divide=bnDivide;BigInteger$2.prototype.remainder=bnRemainder;BigInteger$2.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$2.prototype.modPow=bnModPow;BigInteger$2.prototype.modInverse=bnModInverse;BigInteger$2.prototype.pow=bnPow;BigInteger$2.prototype.gcd=bnGCD;BigInteger$2.prototype.isProbablePrime=bnIsProbablePrime;var forge$5=forge$m,sha1=forge$5.sha1=forge$5.sha1||{};forge$5.md.sha1=forge$5.md.algorithms.sha1=sha1;sha1.create=function(){_initialized$1||_init$1();var t=null,e=forge$5.util.createBuffer(),n=new Array(80),a={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var o=a.messageLengthSize/4,c=0;c<o;++c)a.fullMessageLength.push(0);return e=forge$5.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},a},a.start(),a.update=function(o,c){c==="utf8"&&(o=forge$5.util.encodeUtf8(o));var l=o.length;a.messageLength+=l,l=[l/4294967296>>>0,l>>>0];for(var u=a.fullMessageLength.length-1;u>=0;--u)a.fullMessageLength[u]+=l[1],l[1]=l[0]+(a.fullMessageLength[u]/4294967296>>>0),a.fullMessageLength[u]=a.fullMessageLength[u]>>>0,l[0]=l[1]/4294967296>>>0;return e.putBytes(o),_update$1(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),a},a.digest=function(){var o=forge$5.util.createBuffer();o.putBytes(e.bytes());var c=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,l=c&a.blockLength-1;o.putBytes(_padding$1.substr(0,a.blockLength-l));for(var u,d,m=a.fullMessageLength[0]*8,b=0;b<a.fullMessageLength.length-1;++b)u=a.fullMessageLength[b+1]*8,d=u/4294967296>>>0,m+=d,o.putInt32(m>>>0),m=u>>>0;o.putInt32(m);var x={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};_update$1(x,n,o);var _=forge$5.util.createBuffer();return _.putInt32(x.h0),_.putInt32(x.h1),_.putInt32(x.h2),_.putInt32(x.h3),_.putInt32(x.h4),_},a};var _padding$1=null,_initialized$1=!1;function _init$1(){_padding$1=String.fromCharCode(128),_padding$1+=forge$5.util.fillString(String.fromCharCode(0),64),_initialized$1=!0}function _update$1(t,e,n){for(var a,o,c,l,u,d,m,b,x=n.length();x>=64;){for(o=t.h0,c=t.h1,l=t.h2,u=t.h3,d=t.h4,b=0;b<16;++b)a=n.getInt32(),e[b]=a,m=u^c&(l^u),a=(o<<5|o>>>27)+m+d+1518500249+a,d=u,u=l,l=(c<<30|c>>>2)>>>0,c=o,o=a;for(;b<20;++b)a=e[b-3]^e[b-8]^e[b-14]^e[b-16],a=a<<1|a>>>31,e[b]=a,m=u^c&(l^u),a=(o<<5|o>>>27)+m+d+1518500249+a,d=u,u=l,l=(c<<30|c>>>2)>>>0,c=o,o=a;for(;b<32;++b)a=e[b-3]^e[b-8]^e[b-14]^e[b-16],a=a<<1|a>>>31,e[b]=a,m=c^l^u,a=(o<<5|o>>>27)+m+d+1859775393+a,d=u,u=l,l=(c<<30|c>>>2)>>>0,c=o,o=a;for(;b<40;++b)a=e[b-6]^e[b-16]^e[b-28]^e[b-32],a=a<<2|a>>>30,e[b]=a,m=c^l^u,a=(o<<5|o>>>27)+m+d+1859775393+a,d=u,u=l,l=(c<<30|c>>>2)>>>0,c=o,o=a;for(;b<60;++b)a=e[b-6]^e[b-16]^e[b-28]^e[b-32],a=a<<2|a>>>30,e[b]=a,m=c&l|u&(c^l),a=(o<<5|o>>>27)+m+d+2400959708+a,d=u,u=l,l=(c<<30|c>>>2)>>>0,c=o,o=a;for(;b<80;++b)a=e[b-6]^e[b-16]^e[b-28]^e[b-32],a=a<<2|a>>>30,e[b]=a,m=c^l^u,a=(o<<5|o>>>27)+m+d+3395469782+a,d=u,u=l,l=(c<<30|c>>>2)>>>0,c=o,o=a;t.h0=t.h0+o|0,t.h1=t.h1+c|0,t.h2=t.h2+l|0,t.h3=t.h3+u|0,t.h4=t.h4+d|0,x-=64}}var forge$4=forge$m,pkcs1=forge$4.pkcs1=forge$4.pkcs1||{};pkcs1.encode_rsa_oaep=function(t,e,n){var a,o,c,l;typeof n=="string"?(a=n,o=arguments[3]||void 0,c=arguments[4]||void 0):n&&(a=n.label||void 0,o=n.seed||void 0,c=n.md||void 0,n.mgf1&&n.mgf1.md&&(l=n.mgf1.md)),c?c.start():c=forge$4.md.sha1.create(),l||(l=c);var u=Math.ceil(t.n.bitLength()/8),d=u-2*c.digestLength-2;if(e.length>d){var m=new Error("RSAES-OAEP input message length is too long.");throw m.length=e.length,m.maxLength=d,m}a||(a=""),c.update(a,"raw");for(var b=c.digest(),x="",_=d-e.length,w=0;w<_;w++)x+="\0";var S=b.getBytes()+x+""+e;if(!o)o=forge$4.random.getBytes(c.digestLength);else if(o.length!==c.digestLength){var m=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw m.seedLength=o.length,m.digestLength=c.digestLength,m}var T=rsa_mgf1(o,u-c.digestLength-1,l),B=forge$4.util.xorBytes(S,T,S.length),C=rsa_mgf1(B,c.digestLength,l),D=forge$4.util.xorBytes(o,C,o.length);return"\0"+D+B};pkcs1.decode_rsa_oaep=function(t,e,n){var a,o,c;typeof n=="string"?(a=n,o=arguments[3]||void 0):n&&(a=n.label||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(c=n.mgf1.md));var l=Math.ceil(t.n.bitLength()/8);if(e.length!==l){var B=new Error("RSAES-OAEP encoded message length is invalid.");throw B.length=e.length,B.expectedLength=l,B}if(o===void 0?o=forge$4.md.sha1.create():o.start(),c||(c=o),l<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var u=o.digest().getBytes(),d=e.charAt(0),m=e.substring(1,o.digestLength+1),b=e.substring(1+o.digestLength),x=rsa_mgf1(b,o.digestLength,c),_=forge$4.util.xorBytes(m,x,m.length),w=rsa_mgf1(_,l-o.digestLength-1,c),S=forge$4.util.xorBytes(b,w,b.length),T=S.substring(0,o.digestLength),B=d!=="\0",C=0;C<o.digestLength;++C)B|=u.charAt(C)!==T.charAt(C);for(var D=1,z=o.digestLength,U=o.digestLength;U<S.length;U++){var Y=S.charCodeAt(U),X=Y&1^1,O=D?65534:0;B|=Y&O,D=D&X,z+=D}if(B||S.charCodeAt(z)!==1)throw new Error("Invalid RSAES-OAEP padding.");return S.substring(z+1)};function rsa_mgf1(t,e,n){n||(n=forge$4.md.sha1.create());for(var a="",o=Math.ceil(e/n.digestLength),c=0;c<o;++c){var l=String.fromCharCode(c>>24&255,c>>16&255,c>>8&255,c&255);n.start(),n.update(t+l),a+=n.digest().getBytes()}return a.substring(0,e)}var forge$3=forge$m;(function(){if(forge$3.prime)return;var t=forge$3.prime=forge$3.prime||{},e=forge$3.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],a=new e(null);a.fromInt(30);var o=function(x,_){return x|_};t.generateProbablePrime=function(x,_,w){typeof _=="function"&&(w=_,_={}),_=_||{};var S=_.algorithm||"PRIMEINC";typeof S=="string"&&(S={name:S}),S.options=S.options||{};var T=_.prng||forge$3.random,B={nextBytes:function(C){for(var D=T.getBytesSync(C.length),z=0;z<C.length;++z)C[z]=D.charCodeAt(z)}};if(S.name==="PRIMEINC")return c(x,B,S.options,w);throw new Error("Invalid prime generation algorithm: "+S.name)};function c(x,_,w,S){return"workers"in w?d(x,_,w,S):l(x,_,w,S)}function l(x,_,w,S){var T=m(x,_),B=0,C=b(T.bitLength());"millerRabinTests"in w&&(C=w.millerRabinTests);var D=10;"maxBlockTime"in w&&(D=w.maxBlockTime),u(T,x,_,B,C,D,S)}function u(x,_,w,S,T,B,C){var D=+new Date;do{if(x.bitLength()>_&&(x=m(_,w)),x.isProbablePrime(T))return C(null,x);x.dAddOffset(n[S++%8],0)}while(B<0||+new Date-D<B);forge$3.util.setImmediate(function(){u(x,_,w,S,T,B,C)})}function d(x,_,w,S){if(typeof Worker>"u")return l(x,_,w,S);var T=m(x,_),B=w.workers,C=w.workLoad||100,D=C*30/8,z=w.workerScript||"forge/prime.worker.js";if(B===-1)return forge$3.util.estimateCores(function(Y,X){Y&&(X=2),B=X-1,U()});U();function U(){B=Math.max(1,B);for(var Y=[],X=0;X<B;++X)Y[X]=new Worker(z);for(var X=0;X<B;++X)Y[X].addEventListener("message",J);var O=!1;function J(Z){if(!O){var se=Z.data;if(se.found){for(var ie=0;ie<Y.length;++ie)Y[ie].terminate();return O=!0,S(null,new e(se.prime,16))}T.bitLength()>x&&(T=m(x,_));var F=T.toString(16);Z.target.postMessage({hex:F,workLoad:C}),T.dAddOffset(D,0)}}}}function m(x,_){var w=new e(x,_),S=x-1;return w.testBit(S)||w.bitwiseTo(e.ONE.shiftLeft(S),o,w),w.dAddOffset(31-w.mod(a).byteValue(),0),w}function b(x){return x<=100?27:x<=150?18:x<=200?15:x<=250?12:x<=300?9:x<=350?8:x<=400?7:x<=500?6:x<=600?5:x<=800?4:x<=1250?3:2}})();var forge$2=forge$m;if(typeof BigInteger$1>"u")var BigInteger$1=forge$2.jsbn.BigInteger;var _crypto=forge$2.util.isNodejs?requireCryptoBrowserify():null,asn1$1=forge$2.asn1,util=forge$2.util;forge$2.pki=forge$2.pki||{};forge$2.pki.rsa=forge$2.rsa=forge$2.rsa||{};var pki$1=forge$2.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator=forge$2.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(t){var e;if(t.algorithm in pki$1.oids)e=pki$1.oids[t.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=t.algorithm,n}var a=asn1$1.oidToDer(e).getBytes(),o=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]),c=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);c.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,a)),c.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,""));var l=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,t.digest().getBytes());return o.value.push(c),o.value.push(l),asn1$1.toDer(o).getBytes()},_modPow=function(t,e,n){if(n)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(BigInteger$1.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(BigInteger$1.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var a;do a=new BigInteger$1(forge$2.util.bytesToHex(forge$2.random.getBytes(e.n.bitLength()/8)),16);while(a.compareTo(e.n)>=0||!a.gcd(e.n).equals(BigInteger$1.ONE));t=t.multiply(a.modPow(e.e,e.n)).mod(e.n);for(var o=t.mod(e.p).modPow(e.dP,e.p),c=t.mod(e.q).modPow(e.dQ,e.q);o.compareTo(c)<0;)o=o.add(e.p);var l=o.subtract(c).multiply(e.qInv).mod(e.p).multiply(e.q).add(c);return l=l.multiply(a.modInverse(e.n)).mod(e.n),l};pki$1.rsa.encrypt=function(t,e,n){var a=n,o,c=Math.ceil(e.n.bitLength()/8);n!==!1&&n!==!0?(a=n===2,o=_encodePkcs1_v1_5(t,e,n)):(o=forge$2.util.createBuffer(),o.putBytes(t));for(var l=new BigInteger$1(o.toHex(),16),u=_modPow(l,e,a),d=u.toString(16),m=forge$2.util.createBuffer(),b=c-Math.ceil(d.length/2);b>0;)m.putByte(0),--b;return m.putBytes(forge$2.util.hexToBytes(d)),m.getBytes()};pki$1.rsa.decrypt=function(t,e,n,a){var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var c=new Error("Encrypted message length is invalid.");throw c.length=t.length,c.expected=o,c}var l=new BigInteger$1(forge$2.util.createBuffer(t).toHex(),16);if(l.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var u=_modPow(l,e,n),d=u.toString(16),m=forge$2.util.createBuffer(),b=o-Math.ceil(d.length/2);b>0;)m.putByte(0),--b;return m.putBytes(forge$2.util.hexToBytes(d)),a!==!1?_decodePkcs1_v1_5(m.getBytes(),e,n):m.getBytes()};pki$1.rsa.createKeyPairGenerationState=function(t,e,n){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,n=n||{};var a=n.prng||forge$2.random,o={nextBytes:function(u){for(var d=a.getBytesSync(u.length),m=0;m<u.length;++m)u[m]=d.charCodeAt(m)}},c=n.algorithm||"PRIMEINC",l;if(c==="PRIMEINC")l={algorithm:c,state:0,bits:t,rng:o,eInt:e||65537,e:new BigInteger$1(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},l.e.fromInt(l.eInt);else throw new Error("Invalid key generation algorithm: "+c);return l};pki$1.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new BigInteger$1(null);n.fromInt(30);for(var a=0,o=function(x,_){return x|_},c=+new Date,l,u=0;t.keys===null&&(e<=0||u<e);){if(t.state===0){var d=t.p===null?t.pBits:t.qBits,m=d-1;t.pqState===0?(t.num=new BigInteger$1(d,t.rng),t.num.testBit(m)||t.num.bitwiseTo(BigInteger$1.ONE.shiftLeft(m),o,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),a=0,++t.pqState):t.pqState===1?t.num.bitLength()>d?t.pqState=0:t.num.isProbablePrime(_getMillerRabinTests(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(GCD_30_DELTA[a++%8],0):t.pqState===2?t.pqState=t.num.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(BigInteger$1.ONE),t.q1=t.q.subtract(BigInteger$1.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(BigInteger$1.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var b=t.e.modInverse(t.phi);t.keys={privateKey:pki$1.rsa.setPrivateKey(t.n,t.e,b,t.p,t.q,b.mod(t.p1),b.mod(t.q1),t.q.modInverse(t.p)),publicKey:pki$1.rsa.setPublicKey(t.n,t.e)}}l=+new Date,u+=l-c,c=l}return t.keys!==null};pki$1.rsa.generateKeyPair=function(t,e,n,a){if(arguments.length===1?typeof t=="object"?(n=t,t=void 0):typeof t=="function"&&(a=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(a=e,e=void 0):typeof e!="number"&&(n=e,e=void 0):(n=t,a=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof n=="function"&&(a=n,n=void 0):(a=n,n=e,e=void 0)),n=n||{},t===void 0&&(t=n.bits||2048),e===void 0&&(e=n.e||65537),!n.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(a){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(u,d,m){if(u)return a(u);a(null,{privateKey:pki$1.privateKeyFromPem(m),publicKey:pki$1.publicKeyFromPem(d)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_intToUint8Array(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(u){return util.globalScope.crypto.subtle.exportKey("pkcs8",u.privateKey)}).then(void 0,function(u){a(u)}).then(function(u){if(u){var d=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(u)));a(null,{privateKey:d,publicKey:pki$1.setRsaPublicKey(d.n,d.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var o=util.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_intToUint8Array(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);o.oncomplete=function(u){var d=u.target.result,m=util.globalScope.msCrypto.subtle.exportKey("pkcs8",d.privateKey);m.oncomplete=function(b){var x=b.target.result,_=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(x)));a(null,{privateKey:_,publicKey:pki$1.setRsaPublicKey(_.n,_.e)})},m.onerror=function(b){a(b)}},o.onerror=function(u){a(u)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var c=_crypto.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$1.privateKeyFromPem(c.privateKey),publicKey:pki$1.publicKeyFromPem(c.publicKey)}}}var l=pki$1.rsa.createKeyPairGenerationState(t,e,n);if(!a)return pki$1.rsa.stepKeyPairGenerationState(l,0),l.keys;_generateKeyPair(l,n,a)};pki$1.setRsaPublicKey=pki$1.rsa.setPublicKey=function(t,e){var n={n:t,e};return n.encrypt=function(a,o,c){if(typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSAES-PKCS1-V1_5"),o==="RSAES-PKCS1-V1_5")o={encode:function(u,d,m){return _encodePkcs1_v1_5(u,d,2).getBytes()}};else if(o==="RSA-OAEP"||o==="RSAES-OAEP")o={encode:function(u,d){return forge$2.pkcs1.encode_rsa_oaep(d,u,c)}};else if(["RAW","NONE","NULL",null].indexOf(o)!==-1)o={encode:function(u){return u}};else if(typeof o=="string")throw new Error('Unsupported encryption scheme: "'+o+'".');var l=o.encode(a,n,!0);return pki$1.rsa.encrypt(l,n,!0)},n.verify=function(a,o,c,l){typeof c=="string"?c=c.toUpperCase():c===void 0&&(c="RSASSA-PKCS1-V1_5"),l===void 0&&(l={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in l||(l._parseAllDigestBytes=!0),c==="RSASSA-PKCS1-V1_5"?c={verify:function(d,m){m=_decodePkcs1_v1_5(m,n,!0);var b=asn1$1.fromDer(m,{parseAllBytes:l._parseAllDigestBytes}),x={},_=[];if(!asn1$1.validate(b,digestInfoValidator,x,_)){var w=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw w.errors=_,w}var S=asn1$1.derToOid(x.algorithmIdentifier);if(!(S===forge$2.oids.md2||S===forge$2.oids.md5||S===forge$2.oids.sha1||S===forge$2.oids.sha224||S===forge$2.oids.sha256||S===forge$2.oids.sha384||S===forge$2.oids.sha512||S===forge$2.oids["sha512-224"]||S===forge$2.oids["sha512-256"])){var w=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw w.oid=S,w}if((S===forge$2.oids.md2||S===forge$2.oids.md5)&&!("parameters"in x))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return d===x.digest}}:(c==="NONE"||c==="NULL"||c===null)&&(c={verify:function(d,m){return m=_decodePkcs1_v1_5(m,n,!0),d===m}});var u=pki$1.rsa.decrypt(o,n,!0,!1);return c.verify(a,u,n.n.bitLength())},n};pki$1.setRsaPrivateKey=pki$1.rsa.setPrivateKey=function(t,e,n,a,o,c,l,u){var d={n:t,e,d:n,p:a,q:o,dP:c,dQ:l,qInv:u};return d.decrypt=function(m,b,x){typeof b=="string"?b=b.toUpperCase():b===void 0&&(b="RSAES-PKCS1-V1_5");var _=pki$1.rsa.decrypt(m,d,!1,!1);if(b==="RSAES-PKCS1-V1_5")b={decode:_decodePkcs1_v1_5};else if(b==="RSA-OAEP"||b==="RSAES-OAEP")b={decode:function(w,S){return forge$2.pkcs1.decode_rsa_oaep(S,w,x)}};else if(["RAW","NONE","NULL",null].indexOf(b)!==-1)b={decode:function(w){return w}};else throw new Error('Unsupported encryption scheme: "'+b+'".');return b.decode(_,d,!1)},d.sign=function(m,b){var x=!1;typeof b=="string"&&(b=b.toUpperCase()),b===void 0||b==="RSASSA-PKCS1-V1_5"?(b={encode:emsaPkcs1v15encode},x=1):(b==="NONE"||b==="NULL"||b===null)&&(b={encode:function(){return m}},x=1);var _=b.encode(m,d.n.bitLength());return pki$1.rsa.encrypt(_,d,x)},d};pki$1.wrapRsaPrivateKey=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,asn1$1.toDer(t).getBytes())])};pki$1.privateKeyFromAsn1=function(t){var e={},n=[];if(asn1$1.validate(t,privateKeyValidator,e,n)&&(t=asn1$1.fromDer(forge$2.util.createBuffer(e.privateKey))),e={},n=[],!asn1$1.validate(t,rsaPrivateKeyValidator,e,n)){var a=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw a.errors=n,a}var o,c,l,u,d,m,b,x;return o=forge$2.util.createBuffer(e.privateKeyModulus).toHex(),c=forge$2.util.createBuffer(e.privateKeyPublicExponent).toHex(),l=forge$2.util.createBuffer(e.privateKeyPrivateExponent).toHex(),u=forge$2.util.createBuffer(e.privateKeyPrime1).toHex(),d=forge$2.util.createBuffer(e.privateKeyPrime2).toHex(),m=forge$2.util.createBuffer(e.privateKeyExponent1).toHex(),b=forge$2.util.createBuffer(e.privateKeyExponent2).toHex(),x=forge$2.util.createBuffer(e.privateKeyCoefficient).toHex(),pki$1.setRsaPrivateKey(new BigInteger$1(o,16),new BigInteger$1(c,16),new BigInteger$1(l,16),new BigInteger$1(u,16),new BigInteger$1(d,16),new BigInteger$1(m,16),new BigInteger$1(b,16),new BigInteger$1(x,16))};pki$1.privateKeyToAsn1=pki$1.privateKeyToRSAPrivateKey=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.e)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.d)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.p)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.q)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.dP)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.dQ)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.qInv))])};pki$1.publicKeyFromAsn1=function(t){var e={},n=[];if(asn1$1.validate(t,publicKeyValidator,e,n)){var a=asn1$1.derToOid(e.publicKeyOid);if(a!==pki$1.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=a,o}t=e.rsaPublicKey}if(n=[],!asn1$1.validate(t,rsaPublicKeyValidator,e,n)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=n,o}var c=forge$2.util.createBuffer(e.publicKeyModulus).toHex(),l=forge$2.util.createBuffer(e.publicKeyExponent).toHex();return pki$1.setRsaPublicKey(new BigInteger$1(c,16),new BigInteger$1(l,16))};pki$1.publicKeyToAsn1=pki$1.publicKeyToSubjectPublicKeyInfo=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,[pki$1.publicKeyToRSAPublicKey(t)])])};pki$1.publicKeyToRSAPublicKey=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.e))])};function _encodePkcs1_v1_5(t,e,n){var a=forge$2.util.createBuffer(),o=Math.ceil(e.n.bitLength()/8);if(t.length>o-11){var c=new Error("Message is too long for PKCS#1 v1.5 padding.");throw c.length=t.length,c.max=o-11,c}a.putByte(0),a.putByte(n);var l=o-3-t.length,u;if(n===0||n===1){u=n===0?0:255;for(var d=0;d<l;++d)a.putByte(u)}else for(;l>0;){for(var m=0,b=forge$2.random.getBytes(l),d=0;d<l;++d)u=b.charCodeAt(d),u===0?++m:a.putByte(u);l=m}return a.putByte(0),a.putBytes(t),a}function _decodePkcs1_v1_5(t,e,n,a){var o=Math.ceil(e.n.bitLength()/8),c=forge$2.util.createBuffer(t),l=c.getByte(),u=c.getByte();if(l!==0||n&&u!==0&&u!==1||!n&&u!=2||n&&u===0&&typeof a>"u")throw new Error("Encryption block is invalid.");var d=0;if(u===0){d=o-3-a;for(var m=0;m<d;++m)if(c.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(u===1)for(d=0;c.length()>1;){if(c.getByte()!==255){--c.read;break}++d}else if(u===2)for(d=0;c.length()>1;){if(c.getByte()===0){--c.read;break}++d}var b=c.getByte();if(b!==0||d!==o-3-c.length())throw new Error("Encryption block is invalid.");return c.getBytes()}function _generateKeyPair(t,e,n){typeof e=="function"&&(n=e,e={}),e=e||{};var a={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(a.prng=e.prng),o();function o(){c(t.pBits,function(u,d){if(u)return n(u);if(t.p=d,t.q!==null)return l(u,t.q);c(t.qBits,l)})}function c(u,d){forge$2.prime.generateProbablePrime(u,a,d)}function l(u,d){if(u)return n(u);if(t.q=d,t.p.compareTo(t.q)<0){var m=t.p;t.p=t.q,t.q=m}if(t.p.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.p=null,o();return}if(t.q.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.q=null,c(t.qBits,l);return}if(t.p1=t.p.subtract(BigInteger$1.ONE),t.q1=t.q.subtract(BigInteger$1.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.p=t.q=null,o();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,c(t.qBits,l);return}var b=t.e.modInverse(t.phi);t.keys={privateKey:pki$1.rsa.setPrivateKey(t.n,t.e,b,t.p,t.q,b.mod(t.p1),b.mod(t.q1),t.q.modInverse(t.p)),publicKey:pki$1.rsa.setPublicKey(t.n,t.e)},n(null,t.keys)}}function _bnToBytes(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var n=forge$2.util.hexToBytes(e);return n.length>1&&(n.charCodeAt(0)===0&&!(n.charCodeAt(1)&128)||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}function _getMillerRabinTests(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function _detectNodeCrypto(t){return forge$2.util.isNodejs&&typeof _crypto[t]=="function"}function _detectSubtleCrypto(t){return typeof util.globalScope<"u"&&typeof util.globalScope.crypto=="object"&&typeof util.globalScope.crypto.subtle=="object"&&typeof util.globalScope.crypto.subtle[t]=="function"}function _detectSubtleMsCrypto(t){return typeof util.globalScope<"u"&&typeof util.globalScope.msCrypto=="object"&&typeof util.globalScope.msCrypto.subtle=="object"&&typeof util.globalScope.msCrypto.subtle[t]=="function"}function _intToUint8Array(t){for(var e=forge$2.util.hexToBytes(t.toString(16)),n=new Uint8Array(e.length),a=0;a<e.length;++a)n[a]=e.charCodeAt(a);return n}var forge$1=forge$m;if(typeof BigInteger>"u")var BigInteger=forge$1.jsbn.BigInteger;var asn1=forge$1.asn1,pki=forge$1.pki=forge$1.pki||{};pki.pbe=forge$1.pbe=forge$1.pbe||{};var oids=pki.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki.encryptPrivateKeyInfo=function(t,e,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var a=forge$1.random.getBytesSync(n.saltSize),o=n.count,c=asn1.integerToDer(o),l,u,d;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var m,b,x;switch(n.algorithm){case"aes128":l=16,m=16,b=oids["aes128-CBC"],x=forge$1.aes.createEncryptionCipher;break;case"aes192":l=24,m=16,b=oids["aes192-CBC"],x=forge$1.aes.createEncryptionCipher;break;case"aes256":l=32,m=16,b=oids["aes256-CBC"],x=forge$1.aes.createEncryptionCipher;break;case"des":l=8,m=8,b=oids.desCBC,x=forge$1.des.createEncryptionCipher;break;default:var _=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw _.algorithm=n.algorithm,_}var w="hmacWith"+n.prfAlgorithm.toUpperCase(),S=prfAlgorithmToMessageDigest(w),T=forge$1.pkcs5.pbkdf2(e,a,o,l,S),B=forge$1.random.getBytesSync(m),C=x(T);C.start(B),C.update(asn1.toDer(t)),C.finish(),d=C.output.getBytes();var D=createPbkdf2Params(a,c,l,w);u=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBES2).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBKDF2).getBytes()),D]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(b).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,B)])])])}else if(n.algorithm==="3des"){l=24;var z=new forge$1.util.ByteBuffer(a),T=pki.pbe.generatePkcs12Key(e,z,1,o,l),B=pki.pbe.generatePkcs12Key(e,z,2,o,l),C=forge$1.des.createEncryptionCipher(T);C.start(B),C.update(asn1.toDer(t)),C.finish(),d=C.output.getBytes(),u=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,a),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,c.getBytes())])])}else{var _=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw _.algorithm=n.algorithm,_}var U=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[u,asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,d)]);return U};pki.decryptPrivateKeyInfo=function(t,e){var n=null,a={},o=[];if(!asn1.validate(t,encryptedPrivateKeyValidator,a,o)){var c=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=o,c}var l=asn1.derToOid(a.encryptionOid),u=pki.pbe.getCipher(l,a.encryptionParams,e),d=forge$1.util.createBuffer(a.encryptedData);return u.update(d),u.finish()&&(n=asn1.fromDer(u.output)),n};pki.encryptedPrivateKeyToPem=function(t,e){var n={type:"ENCRYPTED PRIVATE KEY",body:asn1.toDer(t).getBytes()};return forge$1.pem.encode(n,{maxline:e})};pki.encryptedPrivateKeyFromPem=function(t){var e=forge$1.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1.fromDer(e.body)};pki.encryptRsaPrivateKey=function(t,e,n){if(n=n||{},!n.legacy){var a=pki.wrapRsaPrivateKey(pki.privateKeyToAsn1(t));return a=pki.encryptPrivateKeyInfo(a,e,n),pki.encryptedPrivateKeyToPem(a)}var o,c,l,u;switch(n.algorithm){case"aes128":o="AES-128-CBC",l=16,c=forge$1.random.getBytesSync(16),u=forge$1.aes.createEncryptionCipher;break;case"aes192":o="AES-192-CBC",l=24,c=forge$1.random.getBytesSync(16),u=forge$1.aes.createEncryptionCipher;break;case"aes256":o="AES-256-CBC",l=32,c=forge$1.random.getBytesSync(16),u=forge$1.aes.createEncryptionCipher;break;case"3des":o="DES-EDE3-CBC",l=24,c=forge$1.random.getBytesSync(8),u=forge$1.des.createEncryptionCipher;break;case"des":o="DES-CBC",l=8,c=forge$1.random.getBytesSync(8),u=forge$1.des.createEncryptionCipher;break;default:var d=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw d.algorithm=n.algorithm,d}var m=forge$1.pbe.opensslDeriveBytes(e,c.substr(0,8),l),b=u(m);b.start(c),b.update(asn1.toDer(pki.privateKeyToAsn1(t))),b.finish();var x={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:o,parameters:forge$1.util.bytesToHex(c).toUpperCase()},body:b.output.getBytes()};return forge$1.pem.encode(x)};pki.decryptRsaPrivateKey=function(t,e){var n=null,a=forge$1.pem.decode(t)[0];if(a.type!=="ENCRYPTED PRIVATE KEY"&&a.type!=="PRIVATE KEY"&&a.type!=="RSA PRIVATE KEY"){var o=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw o.headerType=o,o}if(a.procType&&a.procType.type==="ENCRYPTED"){var c,l;switch(a.dekInfo.algorithm){case"DES-CBC":c=8,l=forge$1.des.createDecryptionCipher;break;case"DES-EDE3-CBC":c=24,l=forge$1.des.createDecryptionCipher;break;case"AES-128-CBC":c=16,l=forge$1.aes.createDecryptionCipher;break;case"AES-192-CBC":c=24,l=forge$1.aes.createDecryptionCipher;break;case"AES-256-CBC":c=32,l=forge$1.aes.createDecryptionCipher;break;case"RC2-40-CBC":c=5,l=function(x){return forge$1.rc2.createDecryptionCipher(x,40)};break;case"RC2-64-CBC":c=8,l=function(x){return forge$1.rc2.createDecryptionCipher(x,64)};break;case"RC2-128-CBC":c=16,l=function(x){return forge$1.rc2.createDecryptionCipher(x,128)};break;default:var o=new Error('Could not decrypt private key; unsupported encryption algorithm "'+a.dekInfo.algorithm+'".');throw o.algorithm=a.dekInfo.algorithm,o}var u=forge$1.util.hexToBytes(a.dekInfo.parameters),d=forge$1.pbe.opensslDeriveBytes(e,u.substr(0,8),c),m=l(d);if(m.start(u),m.update(forge$1.util.createBuffer(a.body)),m.finish())n=m.output.getBytes();else return n}else n=a.body;return a.type==="ENCRYPTED PRIVATE KEY"?n=pki.decryptPrivateKeyInfo(asn1.fromDer(n),e):n=asn1.fromDer(n),n!==null&&(n=pki.privateKeyFromAsn1(n)),n};pki.pbe.generatePkcs12Key=function(t,e,n,a,o,c){var l,u;if(typeof c>"u"||c===null){if(!("sha1"in forge$1.md))throw new Error('"sha1" hash algorithm unavailable.');c=forge$1.md.sha1.create()}var d=c.digestLength,m=c.blockLength,b=new forge$1.util.ByteBuffer,x=new forge$1.util.ByteBuffer;if(t!=null){for(u=0;u<t.length;u++)x.putInt16(t.charCodeAt(u));x.putInt16(0)}var _=x.length(),w=e.length(),S=new forge$1.util.ByteBuffer;S.fillWithByte(n,m);var T=m*Math.ceil(w/m),B=new forge$1.util.ByteBuffer;for(u=0;u<T;u++)B.putByte(e.at(u%w));var C=m*Math.ceil(_/m),D=new forge$1.util.ByteBuffer;for(u=0;u<C;u++)D.putByte(x.at(u%_));var z=B;z.putBuffer(D);for(var U=Math.ceil(o/d),Y=1;Y<=U;Y++){var X=new forge$1.util.ByteBuffer;X.putBytes(S.bytes()),X.putBytes(z.bytes());for(var O=0;O<a;O++)c.start(),c.update(X.getBytes()),X=c.digest();var J=new forge$1.util.ByteBuffer;for(u=0;u<m;u++)J.putByte(X.at(u%d));var Z=Math.ceil(w/m)+Math.ceil(_/m),se=new forge$1.util.ByteBuffer;for(l=0;l<Z;l++){var ie=new forge$1.util.ByteBuffer(z.getBytes(m)),F=511;for(u=J.length()-1;u>=0;u--)F=F>>8,F+=J.at(u)+ie.at(u),ie.setAt(u,F&255);se.putBuffer(ie)}z=se,b.putBuffer(X)}return b.truncate(b.length()-o),b};pki.pbe.getCipher=function(t,e,n){switch(t){case pki.oids.pkcs5PBES2:return pki.pbe.getCipherForPBES2(t,e,n);case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki.pbe.getCipherForPKCS12PBE(t,e,n);default:var a=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw a.oid=t,a.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],a}};pki.pbe.getCipherForPBES2=function(t,e,n){var a={},o=[];if(!asn1.validate(e,PBES2AlgorithmsValidator,a,o)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=o,c}if(t=asn1.derToOid(a.kdfOid),t!==pki.oids.pkcs5PBKDF2){var c=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw c.oid=t,c.supportedOids=["pkcs5PBKDF2"],c}if(t=asn1.derToOid(a.encOid),t!==pki.oids["aes128-CBC"]&&t!==pki.oids["aes192-CBC"]&&t!==pki.oids["aes256-CBC"]&&t!==pki.oids["des-EDE3-CBC"]&&t!==pki.oids.desCBC){var c=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw c.oid=t,c.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],c}var l=a.kdfSalt,u=forge$1.util.createBuffer(a.kdfIterationCount);u=u.getInt(u.length()<<3);var d,m;switch(pki.oids[t]){case"aes128-CBC":d=16,m=forge$1.aes.createDecryptionCipher;break;case"aes192-CBC":d=24,m=forge$1.aes.createDecryptionCipher;break;case"aes256-CBC":d=32,m=forge$1.aes.createDecryptionCipher;break;case"des-EDE3-CBC":d=24,m=forge$1.des.createDecryptionCipher;break;case"desCBC":d=8,m=forge$1.des.createDecryptionCipher;break}var b=prfOidToMessageDigest(a.prfOid),x=forge$1.pkcs5.pbkdf2(n,l,u,d,b),_=a.encIv,w=m(x);return w.start(_),w};pki.pbe.getCipherForPKCS12PBE=function(t,e,n){var a={},o=[];if(!asn1.validate(e,pkcs12PbeParamsValidator,a,o)){var c=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw c.errors=o,c}var l=forge$1.util.createBuffer(a.salt),u=forge$1.util.createBuffer(a.iterations);u=u.getInt(u.length()<<3);var d,m,b;switch(t){case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:d=24,m=8,b=forge$1.des.startDecrypting;break;case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:d=5,m=8,b=function(T,B){var C=forge$1.rc2.createDecryptionCipher(T,40);return C.start(B,null),C};break;default:var c=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw c.oid=t,c}var x=prfOidToMessageDigest(a.prfOid),_=pki.pbe.generatePkcs12Key(n,l,1,u,d,x);x.start();var w=pki.pbe.generatePkcs12Key(n,l,2,u,m,x);return b(_,w)};pki.pbe.opensslDeriveBytes=function(t,e,n,a){if(typeof a>"u"||a===null){if(!("md5"in forge$1.md))throw new Error('"md5" hash algorithm unavailable.');a=forge$1.md.md5.create()}e===null&&(e="");for(var o=[hash(a,t+e)],c=16,l=1;c<n;++l,c+=16)o.push(hash(a,o[l-1]+t+e));return o.join("").substr(0,n)};function hash(t,e){return t.start().update(e).digest().getBytes()}function prfOidToMessageDigest(t){var e;if(!t)e="hmacWithSHA1";else if(e=pki.oids[asn1.derToOid(t)],!e){var n=new Error("Unsupported PRF OID.");throw n.oid=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return prfAlgorithmToMessageDigest(e)}function prfAlgorithmToMessageDigest(t){var e=forge$1.md;switch(t){case"hmacWithSHA224":e=forge$1.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function createPbkdf2Params(t,e,n,a){var o=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,t),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,e.getBytes())]);return a!=="hmacWithSHA1"&&o.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$1.util.hexToBytes(n.toString(16))),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(pki.oids[a]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),o}function concat$2(t,e){e==null&&(e=t.reduce((o,c)=>o+c.length,0));const n=allocUnsafe$2(e);let a=0;for(const o of t)n.set(o,a),a+=o.length;return asUint8Array$2(n)}function bigIntegerToUintBase64url(t,e){let n=Uint8Array.from(t.abs().toByteArray());if(n=n[0]===0?n.subarray(1):n,e!=null){if(n.length>e)throw new Error("byte array longer than desired length");n=concat$2([new Uint8Array(e-n.length),n])}return toString$8(n,"base64url")}function base64urlToBigInteger(t){const e=base64urlToBuffer(t);return new forge$m.jsbn.BigInteger(toString$8(e,"base16"),16)}function base64urlToBuffer(t,e){let n=fromString$5(t,"base64urlpad");if(e!=null){if(n.length>e)throw new Error("byte array longer than desired length");n=concat$2([new Uint8Array(e-n.length),n])}return n}function equals$4(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const bits={"P-256":256,"P-384":384,"P-521":521},curveTypes=Object.keys(bits);curveTypes.join(" / ");function base$4(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),l=c.charCodeAt(0);if(n[l]!==255)throw new TypeError(c+" is ambiguous");n[l]=o}var u=t.length,d=t.charAt(0),m=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function x(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var T=0,B=0,C=0,D=S.length;C!==D&&S[C]===0;)C++,T++;for(var z=(D-C)*b+1>>>0,U=new Uint8Array(z);C!==D;){for(var Y=S[C],X=0,O=z-1;(Y!==0||X<B)&&O!==-1;O--,X++)Y+=256*U[O]>>>0,U[O]=Y%u>>>0,Y=Y/u>>>0;if(Y!==0)throw new Error("Non-zero carry");B=X,C++}for(var J=z-B;J!==z&&U[J]===0;)J++;for(var Z=d.repeat(T);J<z;++J)Z+=t.charAt(U[J]);return Z}function _(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var T=0;if(S[T]!==" "){for(var B=0,C=0;S[T]===d;)B++,T++;for(var D=(S.length-T)*m+1>>>0,z=new Uint8Array(D);S[T];){var U=n[S.charCodeAt(T)];if(U===255)return;for(var Y=0,X=D-1;(U!==0||Y<C)&&X!==-1;X--,Y++)U+=u*z[X]>>>0,z[X]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");C=Y,T++}if(S[T]!==" "){for(var O=D-C;O!==D&&z[O]===0;)O++;for(var J=new Uint8Array(B+(D-O)),Z=B;O!==D;)J[Z++]=z[O++];return J}}}function w(S){var T=_(S);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:x,decodeUnsafe:_,decode:w}}var src$6=base$4,_brrp__multiformats_scope_baseX$3=src$6;const coerce$3=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let Encoder$4=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$4=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$3(this,e)}},ComposedDecoder$3=class{constructor(e){this.decoders=e}or(e){return or$3(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$3=(t,e)=>new ComposedDecoder$3({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$4=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$4(e,n,a),this.decoder=new Decoder$4(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$5=({name:t,prefix:e,encode:n,decode:a})=>new Codec$4(t,e,n,a),baseX$3=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$3(n,e);return from$5({prefix:t,name:e,encode:a,decode:c=>coerce$3(o(c))})},decode$k=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let c=t.length;for(;t[c-1]==="=";)--c;const l=new Uint8Array(c*n/8|0);let u=0,d=0,m=0;for(let b=0;b<c;++b){const x=o[t[b]];if(x===void 0)throw new SyntaxError(`Non-${a} character`);d=d<<n|x,u+=n,u>=8&&(u-=8,l[m++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},encode$l=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let c="",l=0,u=0;for(let d=0;d<t.length;++d)for(u=u<<8|t[d],l+=8;l>n;)l-=n,c+=e[o&u>>l];if(l&&(c+=e[o&u<<n-l]),a)for(;c.length*n&7;)c+="=";return c},rfc4648$3=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$5({prefix:e,name:t,encode(o){return encode$l(o,a,n)},decode(o){return decode$k(o,a,n,t)}}),base64$6=rfc4648$3({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648$3({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648$3({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648$3({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function create$3(t){const e=t?.algorithm??"AES-GCM";let n=t?.keyLength??16;const a=t?.nonceLength??12,o=t?.digest??"SHA-256",c=t?.saltLength??16,l=t?.iterations??32767,u=webcrypto.get();n*=8;async function d(x,_){const w=u.getRandomValues(new Uint8Array(c)),S=u.getRandomValues(new Uint8Array(a)),T={name:e,iv:S};typeof _=="string"&&(_=fromString$5(_));const B={name:"PBKDF2",salt:w,iterations:l,hash:{name:o}},C=await u.subtle.importKey("raw",_,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),D=await u.subtle.deriveKey(B,C,{name:e,length:n},!0,["encrypt"]),z=await u.subtle.encrypt(T,D,x);return concat$2([w,T.iv,new Uint8Array(z)])}async function m(x,_){const w=x.subarray(0,c),S=x.subarray(c,c+a),T=x.subarray(c+a),B={name:e,iv:S};typeof _=="string"&&(_=fromString$5(_));const C={name:"PBKDF2",salt:w,iterations:l,hash:{name:o}},D=await u.subtle.importKey("raw",_,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),z=await u.subtle.deriveKey(C,D,{name:e,length:n},!0,["decrypt"]),U=await u.subtle.decrypt(B,z,T);return new Uint8Array(U)}return{encrypt:d,decrypt:m}}async function importer(t,e){const n=base64$6.decode(t);return await create$3().decrypt(n,e)}var encode_1$5=encode$k,MSB$4=128,REST$4=127,MSBALL$3=~REST$4,INT$3=Math.pow(2,31);function encode$k(t,e,n){e=e||[],n=n||0;for(var a=n;t>=INT$3;)e[n++]=t&255|MSB$4,t/=128;for(;t&MSBALL$3;)e[n++]=t&255|MSB$4,t>>>=7;return e[n]=t|0,encode$k.bytes=n-a+1,e}var decode$j=read$6,MSB$1$3=128,REST$1$3=127;function read$6(t,a){var n=0,a=a||0,o=0,c=a,l,u=t.length;do{if(c>=u)throw read$6.bytes=0,new RangeError("Could not decode varint");l=t[c++],n+=o<28?(l&REST$1$3)<<o:(l&REST$1$3)*Math.pow(2,o),o+=7}while(l>=MSB$1$3);return read$6.bytes=c-a,n}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$3=function(t){return t<N1$3?1:t<N2$3?2:t<N3$3?3:t<N4$3?4:t<N5$3?5:t<N6$3?6:t<N7$3?7:t<N8$3?8:t<N9$3?9:10},varint$3={encode:encode_1$5,decode:decode$j,encodingLength:length$3},_brrp_varint$2=varint$3;const encodeTo$2=(t,e,n=0)=>(_brrp_varint$2.encode(t,e,n),e),encodingLength$2=t=>_brrp_varint$2.encodingLength(t),create$2=(t,e)=>{const n=e.byteLength,a=encodingLength$2(t),o=a+encodingLength$2(n),c=new Uint8Array(o+n);return encodeTo$2(t,c,0),encodeTo$2(n,c,a),c.set(e,o),new Digest$2(t,n,e,c)};let Digest$2=class{constructor(e,n,a,o){this.code=e,this.size=n,this.digest=a,this.bytes=o}};const from$4=({name:t,code:e,encode:n})=>new Hasher$1(t,e,n);let Hasher$1=class{constructor(e,n,a){this.name=e,this.code=n,this.encode=a}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?create$2(this.code,n):n.then(a=>create$2(this.code,a))}else throw Error("Unknown type, must be binary type")}};const sha$1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$4=from$4({name:"sha2-256",code:18,encode:sha$1("SHA-256")});from$4({name:"sha2-512",code:19,encode:sha$1("SHA-512")});var forge=forge$m,sha512$1=forge.sha512=forge.sha512||{};forge.md.sha512=forge.md.algorithms.sha512=sha512$1;var sha384=forge.sha384=forge.sha512.sha384=forge.sha512.sha384||{};sha384.create=function(){return sha512$1.create("SHA-384")};forge.md.sha384=forge.md.algorithms.sha384=sha384;forge.sha512.sha256=forge.sha512.sha256||{create:function(){return sha512$1.create("SHA-512/256")}};forge.md["sha512/256"]=forge.md.algorithms["sha512/256"]=forge.sha512.sha256;forge.sha512.sha224=forge.sha512.sha224||{create:function(){return sha512$1.create("SHA-512/224")}};forge.md["sha512/224"]=forge.md.algorithms["sha512/224"]=forge.sha512.sha224;sha512$1.create=function(t){if(_initialized||_init(),typeof t>"u"&&(t="SHA-512"),!(t in _states))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=_states[t],n=null,a=forge.util.createBuffer(),o=new Array(80),c=0;c<80;++c)o[c]=new Array(2);var l=64;switch(t){case"SHA-384":l=48;break;case"SHA-512/256":l=32;break;case"SHA-512/224":l=28;break}var u={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:l,messageLength:0,fullMessageLength:null,messageLengthSize:16};return u.start=function(){u.messageLength=0,u.fullMessageLength=u.messageLength128=[];for(var d=u.messageLengthSize/4,m=0;m<d;++m)u.fullMessageLength.push(0);a=forge.util.createBuffer(),n=new Array(e.length);for(var m=0;m<e.length;++m)n[m]=e[m].slice(0);return u},u.start(),u.update=function(d,m){m==="utf8"&&(d=forge.util.encodeUtf8(d));var b=d.length;u.messageLength+=b,b=[b/4294967296>>>0,b>>>0];for(var x=u.fullMessageLength.length-1;x>=0;--x)u.fullMessageLength[x]+=b[1],b[1]=b[0]+(u.fullMessageLength[x]/4294967296>>>0),u.fullMessageLength[x]=u.fullMessageLength[x]>>>0,b[0]=b[1]/4294967296>>>0;return a.putBytes(d),_update(n,o,a),(a.read>2048||a.length()===0)&&a.compact(),u},u.digest=function(){var d=forge.util.createBuffer();d.putBytes(a.bytes());var m=u.fullMessageLength[u.fullMessageLength.length-1]+u.messageLengthSize,b=m&u.blockLength-1;d.putBytes(_padding.substr(0,u.blockLength-b));for(var x,_,w=u.fullMessageLength[0]*8,S=0;S<u.fullMessageLength.length-1;++S)x=u.fullMessageLength[S+1]*8,_=x/4294967296>>>0,w+=_,d.putInt32(w>>>0),w=x>>>0;d.putInt32(w);for(var T=new Array(n.length),S=0;S<n.length;++S)T[S]=n[S].slice(0);_update(T,o,d);var B=forge.util.createBuffer(),C;t==="SHA-512"?C=T.length:t==="SHA-384"?C=T.length-2:C=T.length-4;for(var S=0;S<C;++S)B.putInt32(T[S][0]),(S!==C-1||t!=="SHA-512/224")&&B.putInt32(T[S][1]);return B},u};var _padding=null,_initialized=!1,_k=null,_states=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),128),_k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized=!0}function _update(t,e,n){for(var a,o,c,l,u,d,m,b,x,_,w,S,T,B,C,D,z,U,Y,X,O,J,Z,se,ie,F,k,y,A,I,P,H,q,j,M,E=n.length();E>=128;){for(A=0;A<16;++A)e[A][0]=n.getInt32()>>>0,e[A][1]=n.getInt32()>>>0;for(;A<80;++A)H=e[A-2],I=H[0],P=H[1],a=((I>>>19|P<<13)^(P>>>29|I<<3)^I>>>6)>>>0,o=((I<<13|P>>>19)^(P<<3|I>>>29)^(I<<26|P>>>6))>>>0,j=e[A-15],I=j[0],P=j[1],c=((I>>>1|P<<31)^(I>>>8|P<<24)^I>>>7)>>>0,l=((I<<31|P>>>1)^(I<<24|P>>>8)^(I<<25|P>>>7))>>>0,q=e[A-7],M=e[A-16],P=o+q[1]+l+M[1],e[A][0]=a+q[0]+c+M[0]+(P/4294967296>>>0)>>>0,e[A][1]=P>>>0;for(T=t[0][0],B=t[0][1],C=t[1][0],D=t[1][1],z=t[2][0],U=t[2][1],Y=t[3][0],X=t[3][1],O=t[4][0],J=t[4][1],Z=t[5][0],se=t[5][1],ie=t[6][0],F=t[6][1],k=t[7][0],y=t[7][1],A=0;A<80;++A)m=((O>>>14|J<<18)^(O>>>18|J<<14)^(J>>>9|O<<23))>>>0,b=((O<<18|J>>>14)^(O<<14|J>>>18)^(J<<23|O>>>9))>>>0,x=(ie^O&(Z^ie))>>>0,_=(F^J&(se^F))>>>0,u=((T>>>28|B<<4)^(B>>>2|T<<30)^(B>>>7|T<<25))>>>0,d=((T<<4|B>>>28)^(B<<30|T>>>2)^(B<<25|T>>>7))>>>0,w=(T&C|z&(T^C))>>>0,S=(B&D|U&(B^D))>>>0,P=y+b+_+_k[A][1]+e[A][1],a=k+m+x+_k[A][0]+e[A][0]+(P/4294967296>>>0)>>>0,o=P>>>0,P=d+S,c=u+w+(P/4294967296>>>0)>>>0,l=P>>>0,k=ie,y=F,ie=Z,F=se,Z=O,se=J,P=X+o,O=Y+a+(P/4294967296>>>0)>>>0,J=P>>>0,Y=z,X=U,z=C,U=D,C=T,D=B,P=o+l,T=a+c+(P/4294967296>>>0)>>>0,B=P>>>0;P=t[0][1]+B,t[0][0]=t[0][0]+T+(P/4294967296>>>0)>>>0,t[0][1]=P>>>0,P=t[1][1]+D,t[1][0]=t[1][0]+C+(P/4294967296>>>0)>>>0,t[1][1]=P>>>0,P=t[2][1]+U,t[2][0]=t[2][0]+z+(P/4294967296>>>0)>>>0,t[2][1]=P>>>0,P=t[3][1]+X,t[3][0]=t[3][0]+Y+(P/4294967296>>>0)>>>0,t[3][1]=P>>>0,P=t[4][1]+J,t[4][0]=t[4][0]+O+(P/4294967296>>>0)>>>0,t[4][1]=P>>>0,P=t[5][1]+se,t[5][0]=t[5][0]+Z+(P/4294967296>>>0)>>>0,t[5][1]=P>>>0,P=t[6][1]+F,t[6][0]=t[6][0]+ie+(P/4294967296>>>0)>>>0,t[6][1]=P>>>0,P=t[7][1]+y,t[7][0]=t[7][0]+k+(P/4294967296>>>0)>>>0,t[7][1]=P>>>0,E-=128}}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_3n=BigInt(3),_8n=BigInt(8),CURVE$1=Object.freeze({a:_0n$1,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n$1,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),divNearest=(t,e)=>(t+e/_2n$1)/e,endo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=CURVE$1,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),a=-_1n$1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=n,l=BigInt("0x100000000000000000000000000000000"),u=divNearest(c*t,e),d=divNearest(-a*t,e);let m=mod$1(t-u*n-d*o,e),b=mod$1(-u*a-d*c,e);const x=m>l,_=b>l;if(x&&(m=e-m),_&&(b=e-b),m>l||b>l)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:x,k1:m,k2neg:_,k2:b}}},fieldLen=32,groupLen=32,hashLen=32,compressedLen=fieldLen+1,uncompressedLen=2*fieldLen+1;function weierstrass(t){const{a:e,b:n}=CURVE$1,a=mod$1(t*t),o=mod$1(a*t);return mod$1(o+e*t+n)}const USE_ENDOMORPHISM=CURVE$1.a===_0n$1;class ShaError extends Error{constructor(e){super(e)}}function assertJacPoint(t){if(!(t instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(e,n,a){this.x=e,this.y=n,this.z=a}static fromAffine(e){if(!(e instanceof Point$2))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Point$2.ZERO)?JacobianPoint.ZERO:new JacobianPoint(e.x,e.y,_1n$1)}static toAffineBatch(e){const n=invertBatch$1(e.map(a=>a.z));return e.map((a,o)=>a.toAffine(n[o]))}static normalizeZ(e){return JacobianPoint.toAffineBatch(e).map(JacobianPoint.fromAffine)}equals(e){assertJacPoint(e);const{x:n,y:a,z:o}=this,{x:c,y:l,z:u}=e,d=mod$1(o*o),m=mod$1(u*u),b=mod$1(n*m),x=mod$1(c*d),_=mod$1(mod$1(a*u)*m),w=mod$1(mod$1(l*o)*d);return b===x&&_===w}negate(){return new JacobianPoint(this.x,mod$1(-this.y),this.z)}double(){const{x:e,y:n,z:a}=this,o=mod$1(e*e),c=mod$1(n*n),l=mod$1(c*c),u=e+c,d=mod$1(_2n$1*(mod$1(u*u)-o-l)),m=mod$1(_3n*o),b=mod$1(m*m),x=mod$1(b-_2n$1*d),_=mod$1(m*(d-x)-_8n*l),w=mod$1(_2n$1*n*a);return new JacobianPoint(x,_,w)}add(e){assertJacPoint(e);const{x:n,y:a,z:o}=this,{x:c,y:l,z:u}=e;if(c===_0n$1||l===_0n$1)return this;if(n===_0n$1||a===_0n$1)return e;const d=mod$1(o*o),m=mod$1(u*u),b=mod$1(n*m),x=mod$1(c*d),_=mod$1(mod$1(a*u)*m),w=mod$1(mod$1(l*o)*d),S=mod$1(x-b),T=mod$1(w-_);if(S===_0n$1)return T===_0n$1?this.double():JacobianPoint.ZERO;const B=mod$1(S*S),C=mod$1(S*B),D=mod$1(b*B),z=mod$1(T*T-C-_2n$1*D),U=mod$1(T*(D-z)-_*C),Y=mod$1(o*u*S);return new JacobianPoint(z,U,Y)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=JacobianPoint.ZERO;if(typeof e=="bigint"&&e===_0n$1)return n;let a=normalizeScalar$1(e);if(a===_1n$1)return this;if(!USE_ENDOMORPHISM){let x=n,_=this;for(;a>_0n$1;)a&_1n$1&&(x=x.add(_)),_=_.double(),a>>=_1n$1;return x}let{k1neg:o,k1:c,k2neg:l,k2:u}=endo.splitScalar(a),d=n,m=n,b=this;for(;c>_0n$1||u>_0n$1;)c&_1n$1&&(d=d.add(b)),u&_1n$1&&(m=m.add(b)),b=b.double(),c>>=_1n$1,u>>=_1n$1;return o&&(d=d.negate()),l&&(m=m.negate()),m=new JacobianPoint(mod$1(m.x*endo.beta),m.y,m.z),d.add(m)}precomputeWindow(e){const n=USE_ENDOMORPHISM?128/e+1:256/e+1,a=[];let o=this,c=o;for(let l=0;l<n;l++){c=o,a.push(c);for(let u=1;u<2**(e-1);u++)c=c.add(o),a.push(c);o=c.double()}return a}wNAF(e,n){!n&&this.equals(JacobianPoint.BASE)&&(n=Point$2.BASE);const a=n&&n._WINDOW_SIZE||1;if(256%a)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let o=n&&pointPrecomputes$1.get(n);o||(o=this.precomputeWindow(a),n&&a!==1&&(o=JacobianPoint.normalizeZ(o),pointPrecomputes$1.set(n,o)));let c=JacobianPoint.ZERO,l=JacobianPoint.BASE;const u=1+(USE_ENDOMORPHISM?128/a:256/a),d=2**(a-1),m=BigInt(2**a-1),b=2**a,x=BigInt(a);for(let _=0;_<u;_++){const w=_*d;let S=Number(e&m);e>>=x,S>d&&(S-=b,e+=_1n$1);const T=w,B=w+Math.abs(S)-1,C=_%2!==0,D=S<0;S===0?l=l.add(constTimeNegate(C,o[T])):c=c.add(constTimeNegate(D,o[B]))}return{p:c,f:l}}multiply(e,n){let a=normalizeScalar$1(e),o,c;if(USE_ENDOMORPHISM){const{k1neg:l,k1:u,k2neg:d,k2:m}=endo.splitScalar(a);let{p:b,f:x}=this.wNAF(u,n),{p:_,f:w}=this.wNAF(m,n);b=constTimeNegate(l,b),_=constTimeNegate(d,_),_=new JacobianPoint(mod$1(_.x*endo.beta),_.y,_.z),o=b.add(_),c=x.add(w)}else{const{p:l,f:u}=this.wNAF(a,n);o=l,c=u}return JacobianPoint.normalizeZ([o,c])[0]}toAffine(e){const{x:n,y:a,z:o}=this,c=this.equals(JacobianPoint.ZERO);e==null&&(e=c?_8n:invert$1(o));const l=e,u=mod$1(l*l),d=mod$1(u*l),m=mod$1(n*u),b=mod$1(a*d),x=mod$1(o*l);if(c)return Point$2.ZERO;if(x!==_1n$1)throw new Error("invZ was invalid");return new Point$2(m,b)}}JacobianPoint.BASE=new JacobianPoint(CURVE$1.Gx,CURVE$1.Gy,_1n$1);JacobianPoint.ZERO=new JacobianPoint(_0n$1,_1n$1,_0n$1);function constTimeNegate(t,e){const n=e.negate();return t?n:e}const pointPrecomputes$1=new WeakMap;let Point$2=class{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,pointPrecomputes$1.delete(this)}hasEvenY(){return this.y%_2n$1===_0n$1}static fromCompressedHex(e){const n=e.length===32,a=bytesToNumber(n?e:e.subarray(1));if(!isValidFieldElement(a))throw new Error("Point is not on curve");const o=weierstrass(a);let c=sqrtMod(o);const l=(c&_1n$1)===_1n$1;n?l&&(c=mod$1(-c)):(e[0]&1)===1!==l&&(c=mod$1(-c));const u=new Point$2(a,c);return u.assertValidity(),u}static fromUncompressedHex(e){const n=bytesToNumber(e.subarray(1,fieldLen+1)),a=bytesToNumber(e.subarray(fieldLen+1,fieldLen*2+1)),o=new Point$2(n,a);return o.assertValidity(),o}static fromHex(e){const n=ensureBytes$1(e),a=n.length,o=n[0];if(a===fieldLen)return this.fromCompressedHex(n);if(a===compressedLen&&(o===2||o===3))return this.fromCompressedHex(n);if(a===uncompressedLen&&o===4)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${a}`)}static fromPrivateKey(e){return Point$2.BASE.multiply(normalizePrivateKey(e))}static fromSignature(e,n,a){const{r:o,s:c}=normalizeSignature(n);if(![0,1,2,3].includes(a))throw new Error("Cannot recover: invalid recovery bit");const l=truncateHash(ensureBytes$1(e)),{n:u}=CURVE$1,d=a===2||a===3?o+u:o,m=invert$1(d,u),b=mod$1(-l*m,u),x=mod$1(c*m,u),_=a&1?"03":"02",w=Point$2.fromHex(_+numTo32bStr(d)),S=Point$2.BASE.multiplyAndAddUnsafe(w,b,x);if(!S)throw new Error("Cannot recover signature: point at infinify");return S.assertValidity(),S}toRawBytes(e=!1){return hexToBytes$2(this.toHex(e))}toHex(e=!1){const n=numTo32bStr(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:a}=this;if(!isValidFieldElement(n)||!isValidFieldElement(a))throw new Error(e);const o=mod$1(a*a),c=weierstrass(n);if(mod$1(o-c)!==_0n$1)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Point$2(this.x,mod$1(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(e){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return JacobianPoint.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,a){const o=JacobianPoint.fromAffine(this),c=n===_0n$1||n===_1n$1||this!==Point$2.BASE?o.multiplyUnsafe(n):o.multiply(n),l=JacobianPoint.fromAffine(e).multiplyUnsafe(a),u=c.add(l);return u.equals(JacobianPoint.ZERO)?void 0:u.toAffine()}};Point$2.BASE=new Point$2(CURVE$1.Gx,CURVE$1.Gy);Point$2.ZERO=new Point$2(_0n$1,_0n$1);function sliceDER(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function parseDERInt(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${bytesToHex$2(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(n[0]===0&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(n),left:t.subarray(e+2)}}function parseDERSignature(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${bytesToHex$2(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=parseDERInt(t.subarray(2)),{data:a,left:o}=parseDERInt(n);if(o.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex$2(o)}`);return{r:e,s:a}}let Signature$2=class{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,a="Signature.fromCompact";if(typeof e!="string"&&!n)throw new TypeError(`${a}: Expected string or Uint8Array`);const o=n?bytesToHex$2(e):e;if(o.length!==128)throw new Error(`${a}: Expected 64-byte hex`);return new Signature$2(hexToNumber(o.slice(0,64)),hexToNumber(o.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if(typeof e!="string"&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:a,s:o}=parseDERSignature(n?e:hexToBytes$2(e));return new Signature$2(a,o)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!isWithinCurveOrder(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=CURVE$1.n>>_1n$1;return this.s>e}normalizeS(){return this.hasHighS()?new Signature$2(this.r,mod$1(-this.s,CURVE$1.n)):this}toDERRawBytes(){return hexToBytes$2(this.toDERHex())}toDERHex(){const e=sliceDER(numberToHexUnpadded(this.s)),n=sliceDER(numberToHexUnpadded(this.r)),a=e.length/2,o=n.length/2,c=numberToHexUnpadded(a),l=numberToHexUnpadded(o);return`30${numberToHexUnpadded(o+a+4)}02${l}${n}02${c}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes$2(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}};function concatBytes$1(...t){if(!t.every(a=>a instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((a,o)=>a+o.length,0),n=new Uint8Array(e);for(let a=0,o=0;a<t.length;a++){const c=t[a];n.set(c,o),o+=c.length}return n}const hexes$1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$2(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=hexes$1[t[n]];return e}const POW_2_256$1=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(_0n$1<=t&&t<POW_2_256$1))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function numTo32b(t){const e=hexToBytes$2(numTo32bStr(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function numberToHexUnpadded(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function hexToNumber(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function hexToBytes$2(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const a=n*2,o=t.slice(a,a+2),c=Number.parseInt(o,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");e[n]=c}return e}function bytesToNumber(t){return hexToNumber(bytesToHex$2(t))}function ensureBytes$1(t){return t instanceof Uint8Array?Uint8Array.from(t):hexToBytes$2(t)}function normalizeScalar$1(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&isWithinCurveOrder(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod$1(t,e=CURVE$1.P){const n=t%e;return n>=_0n$1?n:e+n}function pow2$1(t,e){const{P:n}=CURVE$1;let a=t;for(;e-- >_0n$1;)a*=a,a%=n;return a}function sqrtMod(t){const{P:e}=CURVE$1,n=BigInt(6),a=BigInt(11),o=BigInt(22),c=BigInt(23),l=BigInt(44),u=BigInt(88),d=t*t*t%e,m=d*d*t%e,b=pow2$1(m,_3n)*m%e,x=pow2$1(b,_3n)*m%e,_=pow2$1(x,_2n$1)*d%e,w=pow2$1(_,a)*_%e,S=pow2$1(w,o)*w%e,T=pow2$1(S,l)*S%e,B=pow2$1(T,u)*T%e,C=pow2$1(B,l)*S%e,D=pow2$1(C,_3n)*m%e,z=pow2$1(D,c)*w%e,U=pow2$1(z,n)*d%e,Y=pow2$1(U,_2n$1);if(Y*Y%e!==t)throw new Error("Cannot find square root");return Y}function invert$1(t,e=CURVE$1.P){if(t===_0n$1||e<=_0n$1)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=mod$1(t,e),a=e,o=_0n$1,c=_1n$1;for(;n!==_0n$1;){const u=a/n,d=a%n,m=o-c*u;a=n,n=d,o=c,c=m}if(a!==_1n$1)throw new Error("invert: does not exist");return mod$1(o,e)}function invertBatch$1(t,e=CURVE$1.P){const n=new Array(t.length),a=t.reduce((c,l,u)=>l===_0n$1?c:(n[u]=c,mod$1(c*l,e)),_1n$1),o=invert$1(a,e);return t.reduceRight((c,l,u)=>l===_0n$1?c:(n[u]=mod$1(c*n[u],e),mod$1(c*l,e)),o),n}function bits2int_2(t){const e=t.length*8-groupLen*8,n=bytesToNumber(t);return e>0?n>>BigInt(e):n}function truncateHash(t,e=!1){const n=bits2int_2(t);if(e)return n;const{n:a}=CURVE$1;return n>=a?n-a:n}let _sha256Sync,_hmacSha256Sync;class HmacDrbg{constructor(e,n){if(this.hashLen=e,this.qByteLen=n,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return utils$3.hmacSha256(this.k,...e)}hmacSync(...e){return _hmacSha256Sync(this.k,...e)}checkSync(){if(typeof _hmacSha256Sync!="function")throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const a=this.v.slice();n.push(a),e+=this.v.length}return concatBytes$1(...n)}generateSync(){this.checkSync(),this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const a=this.v.slice();n.push(a),e+=this.v.length}return concatBytes$1(...n)}}function isWithinCurveOrder(t){return _0n$1<t&&t<CURVE$1.n}function isValidFieldElement(t){return _0n$1<t&&t<CURVE$1.P}function kmdToSig(t,e,n,a=!0){const{n:o}=CURVE$1,c=truncateHash(t,!0);if(!isWithinCurveOrder(c))return;const l=invert$1(c,o),u=Point$2.BASE.multiply(c),d=mod$1(u.x,o);if(d===_0n$1)return;const m=mod$1(l*mod$1(e+n*d,o),o);if(m===_0n$1)return;let b=new Signature$2(d,m),x=(u.x===b.r?0:2)|Number(u.y&_1n$1);return a&&b.hasHighS()&&(b=b.normalizeS(),x^=1),{sig:b,recovery:x}}function normalizePrivateKey(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*groupLen)throw new Error("Expected 32 bytes of private key");e=hexToNumber(t)}else if(t instanceof Uint8Array){if(t.length!==groupLen)throw new Error("Expected 32 bytes of private key");e=bytesToNumber(t)}else throw new TypeError("Expected valid private key");if(!isWithinCurveOrder(e))throw new Error("Expected private key: 0 < key < n");return e}function normalizePublicKey(t){return t instanceof Point$2?(t.assertValidity(),t):Point$2.fromHex(t)}function normalizeSignature(t){if(t instanceof Signature$2)return t.assertValidity(),t;try{return Signature$2.fromDER(t)}catch{return Signature$2.fromCompact(t)}}function getPublicKey$1(t,e=!1){return Point$2.fromPrivateKey(t).toRawBytes(e)}function bits2int(t){const e=t.length>fieldLen?t.slice(0,fieldLen):t;return bytesToNumber(e)}function bits2octets(t){const e=bits2int(t),n=mod$1(e,CURVE$1.n);return int2octets(n<_0n$1?e:n)}function int2octets(t){return numTo32b(t)}function initSigArgs(t,e,n){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);const a=ensureBytes$1(t),o=normalizePrivateKey(e),c=[int2octets(o),bits2octets(a)];if(n!=null){n===!0&&(n=utils$3.randomBytes(fieldLen));const d=ensureBytes$1(n);if(d.length!==fieldLen)throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);c.push(d)}const l=concatBytes$1(...c),u=bits2int(a);return{seed:l,m:u,d:o}}function finalizeSig(t,e){const{sig:n,recovery:a}=t,{der:o,recovered:c}=Object.assign({canonical:!0,der:!0},e),l=o?n.toDERRawBytes():n.toCompactRawBytes();return c?[l,a]:l}async function sign$1(t,e,n={}){const{seed:a,m:o,d:c}=initSigArgs(t,e,n.extraEntropy),l=new HmacDrbg(hashLen,groupLen);await l.reseed(a);let u;for(;!(u=kmdToSig(await l.generate(),o,c,n.canonical));)await l.reseed();return finalizeSig(u,n)}const vopts={strict:!0};function verify$3(t,e,n,a=vopts){let o;try{o=normalizeSignature(t),e=ensureBytes$1(e)}catch{return!1}const{r:c,s:l}=o;if(a.strict&&o.hasHighS())return!1;const u=truncateHash(e);let d;try{d=normalizePublicKey(n)}catch{return!1}const{n:m}=CURVE$1,b=invert$1(l,m),x=mod$1(u*b,m),_=mod$1(c*b,m),w=Point$2.BASE.multiplyAndAddUnsafe(d,x,_);return w?mod$1(w.x,m)===c:!1}Point$2.BASE._setWindowSize(8);const crypto$3={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},TAGGED_HASH_PREFIXES={},utils$3={bytesToHex:bytesToHex$2,hexToBytes:hexToBytes$2,concatBytes:concatBytes$1,mod:mod$1,invert:invert$1,isValidPrivateKey(t){try{return normalizePrivateKey(t),!0}catch{return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:t=>{t=ensureBytes$1(t);const e=groupLen+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const n=mod$1(bytesToNumber(t),CURVE$1.n-_1n$1)+_1n$1;return numTo32b(n)},randomBytes:(t=32)=>{if(crypto$3.web)return crypto$3.web.getRandomValues(new Uint8Array(t));if(crypto$3.node){const{randomBytes:e}=crypto$3.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$3.hashToPrivateKey(utils$3.randomBytes(groupLen+8)),precompute(t=8,e=Point$2.BASE){const n=e===Point$2.BASE?e:new Point$2(e.x,e.y);return n._setWindowSize(t),n.multiply(_3n),n},sha256:async(...t)=>{if(crypto$3.web){const e=await crypto$3.web.subtle.digest("SHA-256",concatBytes$1(...t));return new Uint8Array(e)}else if(crypto$3.node){const{createHash:e}=crypto$3.node,n=e("sha256");return t.forEach(a=>n.update(a)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(crypto$3.web){const n=await crypto$3.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),a=concatBytes$1(...e),o=await crypto$3.web.subtle.sign("HMAC",n,a);return new Uint8Array(o)}else if(crypto$3.node){const{createHmac:n}=crypto$3.node,a=n("sha256",t);return e.forEach(o=>a.update(o)),Uint8Array.from(a.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let n=TAGGED_HASH_PREFIXES[t];if(n===void 0){const a=await utils$3.sha256(Uint8Array.from(t,o=>o.charCodeAt(0)));n=concatBytes$1(a,a),TAGGED_HASH_PREFIXES[t]=n}return utils$3.sha256(n,...e)},taggedHashSync:(t,...e)=>{if(typeof _sha256Sync!="function")throw new ShaError("sha256Sync is undefined, you need to set it");let n=TAGGED_HASH_PREFIXES[t];if(n===void 0){const a=_sha256Sync(Uint8Array.from(t,o=>o.charCodeAt(0)));n=concatBytes$1(a,a),TAGGED_HASH_PREFIXES[t]=n}return _sha256Sync(n,...e)},_JacobianPoint:JacobianPoint};Object.defineProperties(utils$3,{sha256Sync:{configurable:!1,get(){return _sha256Sync},set(t){_sha256Sync||(_sha256Sync=t)}},hmacSha256Sync:{configurable:!1,get(){return _hmacSha256Sync},set(t){_hmacSha256Sync||(_hmacSha256Sync=t)}}});function randomBytes$1(t){if(isNaN(t)||t<=0)throw errCode(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return utils$3.randomBytes(t)}function pkcs1ToJwk(t){const e=forge$m.asn1.fromDer(toString$8(t,"ascii")),n=forge$m.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:bigIntegerToUintBase64url(n.n),e:bigIntegerToUintBase64url(n.e),d:bigIntegerToUintBase64url(n.d),p:bigIntegerToUintBase64url(n.p),q:bigIntegerToUintBase64url(n.q),dp:bigIntegerToUintBase64url(n.dP),dq:bigIntegerToUintBase64url(n.dQ),qi:bigIntegerToUintBase64url(n.qInv),alg:"RS256"}}function jwkToPkcs1(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw errCode(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const e=forge$m.pki.privateKeyToAsn1({n:base64urlToBigInteger(t.n),e:base64urlToBigInteger(t.e),d:base64urlToBigInteger(t.d),p:base64urlToBigInteger(t.p),q:base64urlToBigInteger(t.q),dP:base64urlToBigInteger(t.dp),dQ:base64urlToBigInteger(t.dq),qInv:base64urlToBigInteger(t.qi)});return fromString$5(forge$m.asn1.toDer(e).getBytes(),"ascii")}function pkixToJwk(t){const e=forge$m.asn1.fromDer(toString$8(t,"ascii")),n=forge$m.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:bigIntegerToUintBase64url(n.n),e:bigIntegerToUintBase64url(n.e)}}function jwkToPkix(t){if(t.n==null||t.e==null)throw errCode(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const e=forge$m.pki.publicKeyToAsn1({n:base64urlToBigInteger(t.n),e:base64urlToBigInteger(t.e)});return fromString$5(forge$m.asn1.toDer(e).getBytes(),"ascii")}function convert$1(t,e){return e.map(n=>base64urlToBigInteger(t[n]))}function jwk2priv(t){return forge$m.pki.setRsaPrivateKey(...convert$1(t,["n","e","d","p","q","dp","dq","qi"]))}function jwk2pub(t){return forge$m.pki.setRsaPublicKey(...convert$1(t,["n","e"]))}async function generateKey$2(t){const e=await webcrypto.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),n=await exportKey(e);return{privateKey:n[0],publicKey:n[1]}}async function unmarshalPrivateKey$1(t){const n=[await webcrypto.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await derivePublicFromPrivate(t)],a=await exportKey({privateKey:n[0],publicKey:n[1]});return{privateKey:a[0],publicKey:a[1]}}async function hashAndSign$2(t,e){const n=await webcrypto.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),a=await webcrypto.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,Uint8Array.from(e));return new Uint8Array(a,0,a.byteLength)}async function hashAndVerify$2(t,e,n){const a=await webcrypto.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await webcrypto.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},a,e,n)}async function exportKey(t){if(t.privateKey==null||t.publicKey==null)throw errCode(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([webcrypto.get().subtle.exportKey("jwk",t.privateKey),webcrypto.get().subtle.exportKey("jwk",t.publicKey)])}async function derivePublicFromPrivate(t){return await webcrypto.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function convertKey(t,e,n,a){const o=e?jwk2pub(t):jwk2priv(t),c=toString$8(Uint8Array.from(n),"ascii"),l=a(c,o);return fromString$5(l,"ascii")}function encrypt$2(t,e){return convertKey(t,!0,e,(n,a)=>a.encrypt(n))}function decrypt$3(t,e){return convertKey(t,!1,e,(n,a)=>a.decrypt(n))}async function exporter(t,e){const a=await create$3().encrypt(t,e);return base64$6.encode(a)}class RsaPublicKey{constructor(e){this._key=e}async verify(e,n){return await hashAndVerify$2(this._key,n,e)}marshal(){return jwkToPkix(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}encrypt(e){return encrypt$2(this._key,e)}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}}class RsaPrivateKey{constructor(e,n){this._key=e,this._publicKey=n}genSecret(){return randomBytes$1(16)}async sign(e){return await hashAndSign$2(this._key,e)}get public(){if(this._publicKey==null)throw errCode(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new RsaPublicKey(this._publicKey)}decrypt(e){return decrypt$3(this._key,e)}marshal(){return jwkToPkcs1(this._key)}get bytes(){return PrivateKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}async id(){const e=await this.public.hash();return toString$8(e,"base58btc")}async export(e,n="pkcs-8"){if(n==="pkcs-8"){const a=new forge$m.util.ByteBuffer(this.marshal()),o=forge$m.asn1.fromDer(a),c=forge$m.pki.privateKeyFromAsn1(o),l={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return forge$m.pki.encryptRsaPrivateKey(c,e,l)}else{if(n==="libp2p-key")return await exporter(this.bytes,e);throw errCode(new Error(`export format '${n}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}}async function unmarshalRsaPrivateKey(t){const e=pkcs1ToJwk(t),n=await unmarshalPrivateKey$1(e);return new RsaPrivateKey(n.privateKey,n.publicKey)}function unmarshalRsaPublicKey(t){const e=pkixToJwk(t);return new RsaPublicKey(e)}async function fromJwk(t){const e=await unmarshalPrivateKey$1(t);return new RsaPrivateKey(e.privateKey,e.publicKey)}async function generateKeyPair$3(t){const e=await generateKey$2(t);return new RsaPrivateKey(e.privateKey,e.publicKey)}const RSA=Object.freeze(Object.defineProperty({__proto__:null,RsaPrivateKey,RsaPublicKey,fromJwk,generateKeyPair:generateKeyPair$3,unmarshalRsaPrivateKey,unmarshalRsaPublicKey},Symbol.toStringTag,{value:"Module"})),base58btc$3=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const code$5=0,name$3="identity",encode$j=coerce$3,digest$1=t=>create$2(code$5,encode$j(t)),identity$5={code:code$5,name:name$3,encode:encode$j,digest:digest$1};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),CU_O=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),CURVE=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:CU_O,n:CU_O,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const SQRT_AD_MINUS_ONE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),INVSQRT_A_MINUS_D=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ONE_MINUS_D_SQ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D_MINUS_ONE_SQ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class ExtendedPoint{constructor(e,n,a,o){this.x=e,this.y=n,this.z=a,this.t=o}static fromAffine(e){if(!(e instanceof Point$1))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Point$1.ZERO)?ExtendedPoint.ZERO:new ExtendedPoint(e.x,e.y,_1n,mod(e.x*e.y))}static toAffineBatch(e){const n=invertBatch(e.map(a=>a.z));return e.map((a,o)=>a.toAffine(n[o]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){assertExtPoint(e);const{x:n,y:a,z:o}=this,{x:c,y:l,z:u}=e,d=mod(n*u),m=mod(c*o),b=mod(a*u),x=mod(l*o);return d===m&&b===x}negate(){return new ExtendedPoint(mod(-this.x),this.y,this.z,mod(-this.t))}double(){const{x:e,y:n,z:a}=this,{a:o}=CURVE,c=mod(e*e),l=mod(n*n),u=mod(_2n*mod(a*a)),d=mod(o*c),m=e+n,b=mod(mod(m*m)-c-l),x=d+l,_=x-u,w=d-l,S=mod(b*_),T=mod(x*w),B=mod(b*w),C=mod(_*x);return new ExtendedPoint(S,T,C,B)}add(e){assertExtPoint(e);const{x:n,y:a,z:o,t:c}=this,{x:l,y:u,z:d,t:m}=e,b=mod((a-n)*(u+l)),x=mod((a+n)*(u-l)),_=mod(x-b);if(_===_0n)return this.double();const w=mod(o*_2n*m),S=mod(c*_2n*d),T=S+w,B=x+b,C=S-w,D=mod(T*_),z=mod(B*C),U=mod(T*C),Y=mod(_*B);return new ExtendedPoint(D,z,Y,U)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const n=1+256/e,a=[];let o=this,c=o;for(let l=0;l<n;l++){c=o,a.push(c);for(let u=1;u<2**(e-1);u++)c=c.add(o),a.push(c);o=c.double()}return a}wNAF(e,n){!n&&this.equals(ExtendedPoint.BASE)&&(n=Point$1.BASE);const a=n&&n._WINDOW_SIZE||1;if(256%a)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let o=n&&pointPrecomputes.get(n);o||(o=this.precomputeWindow(a),n&&a!==1&&(o=ExtendedPoint.normalizeZ(o),pointPrecomputes.set(n,o)));let c=ExtendedPoint.ZERO,l=ExtendedPoint.ZERO;const u=1+256/a,d=2**(a-1),m=BigInt(2**a-1),b=2**a,x=BigInt(a);for(let _=0;_<u;_++){const w=_*d;let S=Number(e&m);if(e>>=x,S>d&&(S-=b,e+=_1n),S===0){let T=o[w];_%2&&(T=T.negate()),l=l.add(T)}else{let T=o[w+Math.abs(S)-1];S<0&&(T=T.negate()),c=c.add(T)}}return ExtendedPoint.normalizeZ([c,l])[0]}multiply(e,n){return this.wNAF(normalizeScalar(e,CURVE.l),n)}multiplyUnsafe(e){let n=normalizeScalar(e,CURVE.l,!1);const a=ExtendedPoint.BASE,o=ExtendedPoint.ZERO;if(n===_0n)return o;if(this.equals(o)||n===_1n)return this;if(this.equals(a))return this.wNAF(n);let c=o,l=this;for(;n>_0n;)n&_1n&&(c=c.add(l)),l=l.double(),n>>=_1n;return c}isSmallOrder(){return this.multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO)}isTorsionFree(){return this.multiplyUnsafe(CURVE.l).equals(ExtendedPoint.ZERO)}toAffine(e=invert(this.z)){const{x:n,y:a,z:o}=this,c=mod(n*e),l=mod(a*e);if(mod(o*e)!==_1n)throw new Error("invZ was invalid");return new Point$1(c,l)}fromRistrettoBytes(){legacyRist()}toRistrettoBytes(){legacyRist()}fromRistrettoHash(){legacyRist()}}ExtendedPoint.BASE=new ExtendedPoint(CURVE.Gx,CURVE.Gy,_1n,mod(CURVE.Gx*CURVE.Gy));ExtendedPoint.ZERO=new ExtendedPoint(_0n,_1n,_1n,_0n);function assertExtPoint(t){if(!(t instanceof ExtendedPoint))throw new TypeError("ExtendedPoint expected")}function assertRstPoint(t){if(!(t instanceof RistrettoPoint))throw new TypeError("RistrettoPoint expected")}function legacyRist(){throw new Error("Legacy method: switch to RistrettoPoint")}class RistrettoPoint{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:n}=CURVE,a=mod(SQRT_M1*e*e),o=mod((a+_1n)*ONE_MINUS_D_SQ);let c=BigInt(-1);const l=mod((c-n*a)*mod(a+n));let{isValid:u,value:d}=uvRatio(o,l),m=mod(d*e);edIsNegative(m)||(m=mod(-m)),u||(d=m),u||(c=a);const b=mod(c*(a-_1n)*D_MINUS_ONE_SQ-l),x=d*d,_=mod((d+d)*l),w=mod(b*SQRT_AD_MINUS_ONE),S=mod(_1n-x),T=mod(_1n+x);return new ExtendedPoint(mod(_*T),mod(S*w),mod(w*T),mod(_*S))}static hashToCurve(e){e=ensureBytes(e,64);const n=bytes255ToNumberLE(e.slice(0,32)),a=this.calcElligatorRistrettoMap(n),o=bytes255ToNumberLE(e.slice(32,64)),c=this.calcElligatorRistrettoMap(o);return new RistrettoPoint(a.add(c))}static fromHex(e){e=ensureBytes(e,32);const{a:n,d:a}=CURVE,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",c=bytes255ToNumberLE(e);if(!equalBytes(numberTo32BytesLE(c),e)||edIsNegative(c))throw new Error(o);const l=mod(c*c),u=mod(_1n+n*l),d=mod(_1n-n*l),m=mod(u*u),b=mod(d*d),x=mod(n*a*m-b),{isValid:_,value:w}=invertSqrt(mod(x*b)),S=mod(w*d),T=mod(w*S*x);let B=mod((c+c)*S);edIsNegative(B)&&(B=mod(-B));const C=mod(u*T),D=mod(B*C);if(!_||edIsNegative(D)||C===_0n)throw new Error(o);return new RistrettoPoint(new ExtendedPoint(B,C,_1n,D))}toRawBytes(){let{x:e,y:n,z:a,t:o}=this.ep;const c=mod(mod(a+n)*mod(a-n)),l=mod(e*n),u=mod(l*l),{value:d}=invertSqrt(mod(c*u)),m=mod(d*c),b=mod(d*l),x=mod(m*b*o);let _;if(edIsNegative(o*x)){let S=mod(n*SQRT_M1),T=mod(e*SQRT_M1);e=S,n=T,_=mod(m*INVSQRT_A_MINUS_D)}else _=b;edIsNegative(e*x)&&(n=mod(-n));let w=mod((a-n)*_);return edIsNegative(w)&&(w=mod(-w)),numberTo32BytesLE(w)}toHex(){return bytesToHex$1(this.toRawBytes())}toString(){return this.toHex()}equals(e){assertRstPoint(e);const n=this.ep,a=e.ep,o=mod(n.x*a.y)===mod(n.y*a.x),c=mod(n.y*a.y)===mod(n.x*a.x);return o||c}add(e){return assertRstPoint(e),new RistrettoPoint(this.ep.add(e.ep))}subtract(e){return assertRstPoint(e),new RistrettoPoint(this.ep.subtract(e.ep))}multiply(e){return new RistrettoPoint(this.ep.multiply(e))}multiplyUnsafe(e){return new RistrettoPoint(this.ep.multiplyUnsafe(e))}}RistrettoPoint.BASE=new RistrettoPoint(ExtendedPoint.BASE);RistrettoPoint.ZERO=new RistrettoPoint(ExtendedPoint.ZERO);const pointPrecomputes=new WeakMap;let Point$1=class{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,pointPrecomputes.delete(this)}static fromHex(e,n=!0){const{d:a,P:o}=CURVE;e=ensureBytes(e,32);const c=e.slice();c[31]=e[31]&-129;const l=bytesToNumberLE(c);if(n&&l>=o)throw new Error("Expected 0 < hex < P");if(!n&&l>=POW_2_256)throw new Error("Expected 0 < hex < 2**256");const u=mod(l*l),d=mod(u-_1n),m=mod(a*u+_1n);let{isValid:b,value:x}=uvRatio(d,m);if(!b)throw new Error("Point.fromHex: invalid y coordinate");const _=(x&_1n)===_1n;return(e[31]&128)!==0!==_&&(x=mod(-x)),new Point$1(x,l)}static async fromPrivateKey(e){return(await getExtendedPublicKey(e)).point}toRawBytes(){const e=numberTo32BytesLE(this.y);return e[31]|=this.x&_1n?128:0,e}toHex(){return bytesToHex$1(this.toRawBytes())}toX25519(){const{y:e}=this,n=mod((_1n+e)*invert(_1n-e));return numberTo32BytesLE(n)}isTorsionFree(){return ExtendedPoint.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Point$1(mod(-this.x),this.y)}add(e){return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ExtendedPoint.fromAffine(this).multiply(e,this).toAffine()}};Point$1.BASE=new Point$1(CURVE.Gx,CURVE.Gy);Point$1.ZERO=new Point$1(_0n,_1n);let Signature$1=class{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromHex(e){const n=ensureBytes(e,64),a=Point$1.fromHex(n.slice(0,32),!1),o=bytesToNumberLE(n.slice(32,64));return new Signature$1(a,o)}assertValidity(){const{r:e,s:n}=this;if(!(e instanceof Point$1))throw new Error("Expected Point instance");return normalizeScalar(n,CURVE.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(numberTo32BytesLE(this.s),32),e}toHex(){return bytesToHex$1(this.toRawBytes())}};function concatBytes(...t){if(!t.every(a=>a instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(t.length===1)return t[0];const e=t.reduce((a,o)=>a+o.length,0),n=new Uint8Array(e);for(let a=0,o=0;a<t.length;a++){const c=t[a];n.set(c,o),o+=c.length}return n}const hexes=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$1(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=hexes[t[n]];return e}function hexToBytes$1(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const a=n*2,o=t.slice(a,a+2),c=Number.parseInt(o,16);if(Number.isNaN(c)||c<0)throw new Error("Invalid byte sequence");e[n]=c}return e}function numberTo32BytesBE(t){const n=t.toString(16).padStart(64,"0");return hexToBytes$1(n)}function numberTo32BytesLE(t){return numberTo32BytesBE(t).reverse()}function edIsNegative(t){return(mod(t)&_1n)===_1n}function bytesToNumberLE(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+bytesToHex$1(Uint8Array.from(t).reverse()))}const MAX_255B=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function bytes255ToNumberLE(t){return mod(bytesToNumberLE(t)&MAX_255B)}function mod(t,e=CURVE.P){const n=t%e;return n>=_0n?n:e+n}function invert(t,e=CURVE.P){if(t===_0n||e<=_0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=mod(t,e),a=e,o=_0n,c=_1n;for(;n!==_0n;){const u=a/n,d=a%n,m=o-c*u;a=n,n=d,o=c,c=m}if(a!==_1n)throw new Error("invert: does not exist");return mod(o,e)}function invertBatch(t,e=CURVE.P){const n=new Array(t.length),a=t.reduce((c,l,u)=>l===_0n?c:(n[u]=c,mod(c*l,e)),_1n),o=invert(a,e);return t.reduceRight((c,l,u)=>l===_0n?c:(n[u]=mod(c*n[u],e),mod(c*l,e)),o),n}function pow2(t,e){const{P:n}=CURVE;let a=t;for(;e-- >_0n;)a*=a,a%=n;return a}function pow_2_252_3(t){const{P:e}=CURVE,n=BigInt(5),a=BigInt(10),o=BigInt(20),c=BigInt(40),l=BigInt(80),d=t*t%e*t%e,m=pow2(d,_2n)*d%e,b=pow2(m,_1n)*t%e,x=pow2(b,n)*b%e,_=pow2(x,a)*x%e,w=pow2(_,o)*_%e,S=pow2(w,c)*w%e,T=pow2(S,l)*S%e,B=pow2(T,l)*S%e,C=pow2(B,a)*x%e;return{pow_p_5_8:pow2(C,_2n)*t%e,b2:d}}function uvRatio(t,e){const n=mod(e*e*e),a=mod(n*n*e),o=pow_2_252_3(t*a).pow_p_5_8;let c=mod(t*n*o);const l=mod(e*c*c),u=c,d=mod(c*SQRT_M1),m=l===t,b=l===mod(-t),x=l===mod(-t*SQRT_M1);return m&&(c=u),(b||x)&&(c=d),edIsNegative(c)&&(c=mod(-c)),{isValid:m||b,value:c}}function invertSqrt(t){return uvRatio(_1n,t)}function modlLE(t){return mod(bytesToNumberLE(t),CURVE.l)}function equalBytes(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ensureBytes(t,e){const n=t instanceof Uint8Array?Uint8Array.from(t):hexToBytes$1(t);if(typeof e=="number"&&n.length!==e)throw new Error(`Expected ${e} bytes`);return n}function normalizeScalar(t,e,n=!0){if(!e)throw new TypeError("Specify max value");if(typeof t=="number"&&Number.isSafeInteger(t)&&(t=BigInt(t)),typeof t=="bigint"&&t<e){if(n){if(_0n<t)return t}else if(_0n<=t)return t}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function adjustBytes25519(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function checkPrivateKey(t){if(t=typeof t=="bigint"||typeof t=="number"?numberTo32BytesBE(normalizeScalar(t,POW_2_256)):ensureBytes(t),t.length!==32)throw new Error("Expected 32 bytes");return t}function getKeyFromHash(t){const e=adjustBytes25519(t.slice(0,32)),n=t.slice(32,64),a=modlLE(e),o=Point$1.BASE.multiply(a),c=o.toRawBytes();return{head:e,prefix:n,scalar:a,point:o,pointBytes:c}}let _sha512Sync;async function getExtendedPublicKey(t){return getKeyFromHash(await utils$2.sha512(checkPrivateKey(t)))}async function getPublicKey(t){return(await getExtendedPublicKey(t)).pointBytes}async function sign(t,e){t=ensureBytes(t);const{prefix:n,scalar:a,pointBytes:o}=await getExtendedPublicKey(e),c=modlLE(await utils$2.sha512(n,t)),l=Point$1.BASE.multiply(c),u=modlLE(await utils$2.sha512(l.toRawBytes(),o,t)),d=mod(c+u*a,CURVE.l);return new Signature$1(l,d).toRawBytes()}function prepareVerification(t,e,n){e=ensureBytes(e),n instanceof Point$1||(n=Point$1.fromHex(n,!1));const{r:a,s:o}=t instanceof Signature$1?t.assertValidity():Signature$1.fromHex(t),c=ExtendedPoint.BASE.multiplyUnsafe(o);return{r:a,s:o,SB:c,pub:n,msg:e}}function finishVerification(t,e,n,a){const o=modlLE(a),c=ExtendedPoint.fromAffine(t).multiplyUnsafe(o);return ExtendedPoint.fromAffine(e).add(c).subtract(n).multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO)}async function verify$2(t,e,n){const{r:a,SB:o,msg:c,pub:l}=prepareVerification(t,e,n),u=await utils$2.sha512(a.toRawBytes(),l.toRawBytes(),c);return finishVerification(l,a,o,u)}Point$1.BASE._setWindowSize(8);const crypto$2={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},utils$2={bytesToHex:bytesToHex$1,hexToBytes:hexToBytes$1,concatBytes,getExtendedPublicKey,mod,invert,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if(t=ensureBytes(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return mod(bytesToNumberLE(t),CURVE.l-_1n)+_1n},randomBytes:(t=32)=>{if(crypto$2.web)return crypto$2.web.getRandomValues(new Uint8Array(t));if(crypto$2.node){const{randomBytes:e}=crypto$2.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$2.randomBytes(32),sha512:async(...t)=>{const e=concatBytes(...t);if(crypto$2.web){const n=await crypto$2.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(n)}else{if(crypto$2.node)return Uint8Array.from(crypto$2.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Point$1.BASE){const n=e.equals(Point$1.BASE)?e:new Point$1(e.x,e.y);return n._setWindowSize(t),n.multiply(_2n),n},sha512Sync:void 0};Object.defineProperties(utils$2,{sha512Sync:{configurable:!1,get(){return _sha512Sync},set(t){_sha512Sync||(_sha512Sync=t)}}});const PUBLIC_KEY_BYTE_LENGTH=32,PRIVATE_KEY_BYTE_LENGTH=64,KEYS_BYTE_LENGTH=32;async function generateKey$1(){const t=utils$2.randomPrivateKey(),e=await getPublicKey(t);return{privateKey:concatKeys(t,e),publicKey:e}}async function generateKeyFromSeed(t){if(t.length!==KEYS_BYTE_LENGTH)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,n=await getPublicKey(e);return{privateKey:concatKeys(e,n),publicKey:n}}async function hashAndSign$1(t,e){const n=t.subarray(0,KEYS_BYTE_LENGTH);return await sign(e,n)}async function hashAndVerify$1(t,e,n){return await verify$2(e,n,t)}function concatKeys(t,e){const n=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH);for(let a=0;a<KEYS_BYTE_LENGTH;a++)n[a]=t[a],n[KEYS_BYTE_LENGTH+a]=e[a];return n}class Ed25519PublicKey{constructor(e){this._key=ensureKey(e,PUBLIC_KEY_BYTE_LENGTH)}async verify(e,n){return await hashAndVerify$1(this._key,n,e)}marshal(){return this._key}get bytes(){return PublicKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}}class Ed25519PrivateKey{constructor(e,n){this._key=ensureKey(e,PRIVATE_KEY_BYTE_LENGTH),this._publicKey=ensureKey(n,PUBLIC_KEY_BYTE_LENGTH)}async sign(e){return await hashAndSign$1(this._key,e)}get public(){return new Ed25519PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}async id(){const e=await identity$5.digest(this.public.bytes);return base58btc$3.encode(e.bytes).substring(1)}async export(e,n="libp2p-key"){if(n==="libp2p-key")return await exporter(this.bytes,e);throw errCode(new Error(`export format '${n}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalEd25519PrivateKey(t){if(t.length>PRIVATE_KEY_BYTE_LENGTH){t=ensureKey(t,PRIVATE_KEY_BYTE_LENGTH+PUBLIC_KEY_BYTE_LENGTH);const a=t.subarray(0,PRIVATE_KEY_BYTE_LENGTH),o=t.subarray(PRIVATE_KEY_BYTE_LENGTH,t.length);return new Ed25519PrivateKey(a,o)}t=ensureKey(t,PRIVATE_KEY_BYTE_LENGTH);const e=t.subarray(0,PRIVATE_KEY_BYTE_LENGTH),n=t.subarray(PUBLIC_KEY_BYTE_LENGTH);return new Ed25519PrivateKey(e,n)}function unmarshalEd25519PublicKey(t){return t=ensureKey(t,PUBLIC_KEY_BYTE_LENGTH),new Ed25519PublicKey(t)}async function generateKeyPair$2(){const{privateKey:t,publicKey:e}=await generateKey$1();return new Ed25519PrivateKey(t,e)}async function generateKeyPairFromSeed(t){const{privateKey:e,publicKey:n}=await generateKeyFromSeed(t);return new Ed25519PrivateKey(e,n)}function ensureKey(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw errCode(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}const Ed25519=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey,Ed25519PublicKey,generateKeyPair:generateKeyPair$2,generateKeyPairFromSeed,unmarshalEd25519PrivateKey,unmarshalEd25519PublicKey},Symbol.toStringTag,{value:"Module"}));function generateKey(){return utils$3.randomPrivateKey()}async function hashAndSign(t,e){const{digest:n}=await sha256$4.digest(e);try{return await sign$1(n,t)}catch(a){throw errCode(a,"ERR_INVALID_INPUT")}}async function hashAndVerify(t,e,n){try{const{digest:a}=await sha256$4.digest(n);return verify$3(e,a,t)}catch(a){throw errCode(a,"ERR_INVALID_INPUT")}}function compressPublicKey(t){return Point$2.fromHex(t).toRawBytes(!0)}function validatePrivateKey(t){try{getPublicKey$1(t,!0)}catch(e){throw errCode(e,"ERR_INVALID_PRIVATE_KEY")}}function validatePublicKey(t){try{Point$2.fromHex(t)}catch(e){throw errCode(e,"ERR_INVALID_PUBLIC_KEY")}}function computePublicKey$1(t){try{return getPublicKey$1(t,!0)}catch(e){throw errCode(e,"ERR_INVALID_PRIVATE_KEY")}}class Secp256k1PublicKey{constructor(e){validatePublicKey(e),this._key=e}async verify(e,n){return await hashAndVerify(this._key,n,e)}marshal(){return compressPublicKey(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}}class Secp256k1PrivateKey{constructor(e,n){this._key=e,this._publicKey=n??computePublicKey$1(e),validatePrivateKey(this._key),validatePublicKey(this._publicKey)}async sign(e){return await hashAndSign(this._key,e)}get public(){return new Secp256k1PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}async id(){const e=await this.public.hash();return toString$8(e,"base58btc")}async export(e,n="libp2p-key"){if(n==="libp2p-key")return await exporter(this.bytes,e);throw errCode(new Error(`export format '${n}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalSecp256k1PrivateKey(t){return new Secp256k1PrivateKey(t)}function unmarshalSecp256k1PublicKey(t){return new Secp256k1PublicKey(t)}async function generateKeyPair$1(){const t=await generateKey();return new Secp256k1PrivateKey(t)}const Secp256k1=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey,Secp256k1PublicKey,generateKeyPair:generateKeyPair$1,unmarshalSecp256k1PrivateKey,unmarshalSecp256k1PublicKey},Symbol.toStringTag,{value:"Module"})),supportedKeys={rsa:RSA,ed25519:Ed25519,secp256k1:Secp256k1};function unsupportedKey(t){const e=Object.keys(supportedKeys).join(" / ");return errCode(new Error(`invalid or unsupported key type ${t}. Must be ${e}`),"ERR_UNSUPPORTED_KEY_TYPE")}function typeToKey(t){if(t=t.toLowerCase(),t==="rsa"||t==="ed25519"||t==="secp256k1")return supportedKeys[t];throw unsupportedKey(t)}async function generateKeyPair(t,e){return await typeToKey(t).generateKeyPair(e??2048)}function unmarshalPublicKey(t){const e=PublicKey.decode(t),n=e.Data??new Uint8Array;switch(e.Type){case KeyType$1.RSA:return supportedKeys.rsa.unmarshalRsaPublicKey(n);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PublicKey(n);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(n);default:throw unsupportedKey(e.Type??"RSA")}}function marshalPublicKey(t,e){return e=(e??"rsa").toLowerCase(),typeToKey(e),t.bytes}async function unmarshalPrivateKey(t){const e=PrivateKey.decode(t),n=e.Data??new Uint8Array;switch(e.Type){case KeyType$1.RSA:return await supportedKeys.rsa.unmarshalRsaPrivateKey(n);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PrivateKey(n);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(n);default:throw unsupportedKey(e.Type??"RSA")}}function marshalPrivateKey(t,e){return e=(e??"rsa").toLowerCase(),typeToKey(e),t.bytes}async function importKey(t,e){try{const o=await importer(t,e);return await unmarshalPrivateKey(o)}catch{}const n=forge$m.pki.decryptRsaPrivateKey(t,e);if(n===null)throw errCode(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let a=forge$m.asn1.toDer(forge$m.pki.privateKeyToAsn1(n));return a=fromString$5(a.getBytes(),"ascii"),await supportedKeys.rsa.unmarshalRsaPrivateKey(a)}const errors={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function assert$6(t,e){if(!t)throw new Error(e)}function isUint8Array(t,e,n){if(assert$6(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),n!==void 0)if(Array.isArray(n)){const a=n.join(", "),o=`Expected ${t} to be an Uint8Array with length [${a}]`;assert$6(n.includes(e.length),o)}else{const a=`Expected ${t} to be an Uint8Array with length ${n}`;assert$6(e.length===n,a)}}function isCompressed(t){assert$6(toTypeString$1(t)==="Boolean","Expected compressed to be a Boolean")}function getAssertedOutput(t=n=>new Uint8Array(n),e){return typeof t=="function"&&(t=t(e)),isUint8Array("output",t,e),t}function toTypeString$1(t){return Object.prototype.toString.call(t).slice(8,-1)}var lib=t=>({contextRandomize(e){switch(assert$6(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&isUint8Array("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(errors.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return isUint8Array("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(isUint8Array("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(errors.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,n){switch(isUint8Array("private key",e,32),isUint8Array("tweak",n,32),t.privateKeyTweakAdd(e,n)){case 0:return e;case 1:throw new Error(errors.TWEAK_ADD)}},privateKeyTweakMul(e,n){switch(isUint8Array("private key",e,32),isUint8Array("tweak",n,32),t.privateKeyTweakMul(e,n)){case 0:return e;case 1:throw new Error(errors.TWEAK_MUL)}},publicKeyVerify(e){return isUint8Array("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,n=!0,a){switch(isUint8Array("private key",e,32),isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyCreate(a,e)){case 0:return a;case 1:throw new Error(errors.SECKEY_INVALID);case 2:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyConvert(e,n=!0,a){switch(isUint8Array("public key",e,[33,65]),isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyConvert(a,e)){case 0:return a;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyNegate(e,n=!0,a){switch(isUint8Array("public key",e,[33,65]),isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyNegate(a,e)){case 0:return a;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.IMPOSSIBLE_CASE);case 3:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyCombine(e,n=!0,a){assert$6(Array.isArray(e),"Expected public keys to be an Array"),assert$6(e.length>0,"Expected public keys array will have more than zero items");for(const o of e)isUint8Array("public key",o,[33,65]);switch(isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyCombine(a,e)){case 0:return a;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.PUBKEY_COMBINE);case 3:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,n,a=!0,o){switch(isUint8Array("public key",e,[33,65]),isUint8Array("tweak",n,32),isCompressed(a),o=getAssertedOutput(o,a?33:65),t.publicKeyTweakAdd(o,e,n)){case 0:return o;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.TWEAK_ADD)}},publicKeyTweakMul(e,n,a=!0,o){switch(isUint8Array("public key",e,[33,65]),isUint8Array("tweak",n,32),isCompressed(a),o=getAssertedOutput(o,a?33:65),t.publicKeyTweakMul(o,e,n)){case 0:return o;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.TWEAK_MUL)}},signatureNormalize(e){switch(isUint8Array("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(errors.SIG_PARSE)}},signatureExport(e,n){isUint8Array("signature",e,64),n=getAssertedOutput(n,72);const a={output:n,outputlen:72};switch(t.signatureExport(a,e)){case 0:return n.slice(0,a.outputlen);case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.IMPOSSIBLE_CASE)}},signatureImport(e,n){switch(isUint8Array("signature",e),n=getAssertedOutput(n,64),t.signatureImport(n,e)){case 0:return n;case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.IMPOSSIBLE_CASE)}},ecdsaSign(e,n,a={},o){isUint8Array("message",e,32),isUint8Array("private key",n,32),assert$6(toTypeString$1(a)==="Object","Expected options to be an Object"),a.data!==void 0&&isUint8Array("options.data",a.data),a.noncefn!==void 0&&assert$6(toTypeString$1(a.noncefn)==="Function","Expected options.noncefn to be a Function"),o=getAssertedOutput(o,64);const c={signature:o,recid:null};switch(t.ecdsaSign(c,e,n,a.data,a.noncefn)){case 0:return c;case 1:throw new Error(errors.SIGN);case 2:throw new Error(errors.IMPOSSIBLE_CASE)}},ecdsaVerify(e,n,a){switch(isUint8Array("signature",e,64),isUint8Array("message",n,32),isUint8Array("public key",a,[33,65]),t.ecdsaVerify(e,n,a)){case 0:return!0;case 3:return!1;case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.PUBKEY_PARSE)}},ecdsaRecover(e,n,a,o=!0,c){switch(isUint8Array("signature",e,64),assert$6(toTypeString$1(n)==="Number"&&n>=0&&n<=3,"Expected recovery id to be a Number within interval [0, 3]"),isUint8Array("message",a,32),isCompressed(o),c=getAssertedOutput(c,o?33:65),t.ecdsaRecover(c,e,n,a)){case 0:return c;case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.RECOVER);case 3:throw new Error(errors.IMPOSSIBLE_CASE)}},ecdh(e,n,a={},o){switch(isUint8Array("public key",e,[33,65]),isUint8Array("private key",n,32),assert$6(toTypeString$1(a)==="Object","Expected options to be an Object"),a.data!==void 0&&isUint8Array("options.data",a.data),a.hashfn!==void 0?(assert$6(toTypeString$1(a.hashfn)==="Function","Expected options.hashfn to be a Function"),a.xbuf!==void 0&&isUint8Array("options.xbuf",a.xbuf,32),a.ybuf!==void 0&&isUint8Array("options.ybuf",a.ybuf,32),isUint8Array("output",o)):o=getAssertedOutput(o,32),t.ecdh(o,e,n,a.data,a.hashfn,a.xbuf,a.ybuf)){case 0:return o;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.ECDH)}}});const EC$5=requireElliptic().ec,ec$2=new EC$5("secp256k1"),ecparams=ec$2.curve,BN$2=ecparams.n.constructor;function loadCompressedPublicKey(t,e){let n=new BN$2(e);if(n.cmp(ecparams.p)>=0)return null;n=n.toRed(ecparams.red);let a=n.redSqr().redIMul(n).redIAdd(ecparams.b).redSqrt();return t===3!==a.isOdd()&&(a=a.redNeg()),ec$2.keyPair({pub:{x:n,y:a}})}function loadUncompressedPublicKey(t,e,n){let a=new BN$2(e),o=new BN$2(n);if(a.cmp(ecparams.p)>=0||o.cmp(ecparams.p)>=0||(a=a.toRed(ecparams.red),o=o.toRed(ecparams.red),(t===6||t===7)&&o.isOdd()!==(t===7)))return null;const c=a.redSqr().redIMul(a);return o.redSqr().redISub(c.redIAdd(ecparams.b)).isZero()?ec$2.keyPair({pub:{x:a,y:o}}):null}function loadPublicKey(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:loadCompressedPublicKey(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:loadUncompressedPublicKey(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function savePublicKey(t,e){const n=e.encode(null,t.length===33);for(let a=0;a<t.length;++a)t[a]=n[a]}var elliptic$2={contextRandomize(){return 0},privateKeyVerify(t){const e=new BN$2(t);return e.cmp(ecparams.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new BN$2(t),n=ecparams.n.sub(e).umod(ecparams.n).toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakAdd(t,e){const n=new BN$2(e);if(n.cmp(ecparams.n)>=0||(n.iadd(new BN$2(t)),n.cmp(ecparams.n)>=0&&n.isub(ecparams.n),n.isZero()))return 1;const a=n.toArrayLike(Uint8Array,"be",32);return t.set(a),0},privateKeyTweakMul(t,e){let n=new BN$2(e);if(n.cmp(ecparams.n)>=0||n.isZero())return 1;n.imul(new BN$2(t)),n.cmp(ecparams.n)>=0&&(n=n.umod(ecparams.n));const a=n.toArrayLike(Uint8Array,"be",32);return t.set(a),0},publicKeyVerify(t){return loadPublicKey(t)===null?1:0},publicKeyCreate(t,e){const n=new BN$2(e);if(n.cmp(ecparams.n)>=0||n.isZero())return 1;const a=ec$2.keyFromPrivate(e).getPublic();return savePublicKey(t,a),0},publicKeyConvert(t,e){const n=loadPublicKey(e);if(n===null)return 1;const a=n.getPublic();return savePublicKey(t,a),0},publicKeyNegate(t,e){const n=loadPublicKey(e);if(n===null)return 1;const a=n.getPublic();return a.y=a.y.redNeg(),savePublicKey(t,a),0},publicKeyCombine(t,e){const n=new Array(e.length);for(let o=0;o<e.length;++o)if(n[o]=loadPublicKey(e[o]),n[o]===null)return 1;let a=n[0].getPublic();for(let o=1;o<n.length;++o)a=a.add(n[o].pub);return a.isInfinity()?2:(savePublicKey(t,a),0)},publicKeyTweakAdd(t,e,n){const a=loadPublicKey(e);if(a===null)return 1;if(n=new BN$2(n),n.cmp(ecparams.n)>=0)return 2;const o=a.getPublic().add(ecparams.g.mul(n));return o.isInfinity()?2:(savePublicKey(t,o),0)},publicKeyTweakMul(t,e,n){const a=loadPublicKey(e);if(a===null)return 1;if(n=new BN$2(n),n.cmp(ecparams.n)>=0||n.isZero())return 2;const o=a.getPublic().mul(n);return savePublicKey(t,o),0},signatureNormalize(t){const e=new BN$2(t.subarray(0,32)),n=new BN$2(t.subarray(32,64));return e.cmp(ecparams.n)>=0||n.cmp(ecparams.n)>=0?1:(n.cmp(ec$2.nh)===1&&t.set(ecparams.n.sub(n).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const n=e.subarray(0,32),a=e.subarray(32,64);if(new BN$2(n).cmp(ecparams.n)>=0||new BN$2(a).cmp(ecparams.n)>=0)return 1;const{output:o}=t;let c=o.subarray(4,4+33);c[0]=0,c.set(n,1);let l=33,u=0;for(;l>1&&c[u]===0&&!(c[u+1]&128);--l,++u);if(c=c.subarray(u),c[0]&128||l>1&&c[0]===0&&!(c[1]&128))return 1;let d=o.subarray(6+33,6+33+33);d[0]=0,d.set(a,1);let m=33,b=0;for(;m>1&&d[b]===0&&!(d[b+1]&128);--m,++b);return d=d.subarray(b),d[0]&128||m>1&&d[0]===0&&!(d[1]&128)?1:(t.outputlen=6+l+m,o[0]=48,o[1]=t.outputlen-2,o[2]=2,o[3]=c.length,o.set(c,4),o[4+l]=2,o[5+l]=d.length,o.set(d,6+l),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const n=e[3];if(n===0||5+n>=e.length||e[4+n]!==2)return 1;const a=e[5+n];if(a===0||6+n+a!==e.length||e[4]&128||n>1&&e[4]===0&&!(e[5]&128)||e[n+6]&128||a>1&&e[n+6]===0&&!(e[n+7]&128))return 1;let o=e.subarray(4,4+n);if(o.length===33&&o[0]===0&&(o=o.subarray(1)),o.length>32)return 1;let c=e.subarray(6+n);if(c.length===33&&c[0]===0&&(c=c.slice(1)),c.length>32)throw new Error("S length is too long");let l=new BN$2(o);l.cmp(ecparams.n)>=0&&(l=new BN$2(0));let u=new BN$2(e.subarray(6+n));return u.cmp(ecparams.n)>=0&&(u=new BN$2(0)),t.set(l.toArrayLike(Uint8Array,"be",32),0),t.set(u.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,n,a,o){if(o){const u=o;o=d=>{const m=u(e,n,null,a,d);if(!(m instanceof Uint8Array&&m.length===32))throw new Error("This is the way");return new BN$2(m)}}const c=new BN$2(n);if(c.cmp(ecparams.n)>=0||c.isZero())return 1;let l;try{l=ec$2.sign(e,n,{canonical:!0,k:o,pers:a})}catch{return 1}return t.signature.set(l.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(l.s.toArrayLike(Uint8Array,"be",32),32),t.recid=l.recoveryParam,0},ecdsaVerify(t,e,n){const a={r:t.subarray(0,32),s:t.subarray(32,64)},o=new BN$2(a.r),c=new BN$2(a.s);if(o.cmp(ecparams.n)>=0||c.cmp(ecparams.n)>=0)return 1;if(c.cmp(ec$2.nh)===1||o.isZero()||c.isZero())return 3;const l=loadPublicKey(n);if(l===null)return 2;const u=l.getPublic();return ec$2.verify(e,a,u)?0:3},ecdsaRecover(t,e,n,a){const o={r:e.slice(0,32),s:e.slice(32,64)},c=new BN$2(o.r),l=new BN$2(o.s);if(c.cmp(ecparams.n)>=0||l.cmp(ecparams.n)>=0)return 1;if(c.isZero()||l.isZero())return 2;let u;try{u=ec$2.recoverPubKey(a,o,n)}catch{return 2}return savePublicKey(t,u),0},ecdh(t,e,n,a,o,c,l){const u=loadPublicKey(e);if(u===null)return 1;const d=new BN$2(n);if(d.cmp(ecparams.n)>=0||d.isZero())return 2;const m=u.getPublic().mul(d);if(o===void 0){const b=m.encode(null,!0),x=ec$2.hash().update(b).digest();for(let _=0;_<32;++_)t[_]=x[_]}else{c||(c=new Uint8Array(32));const b=m.getX().toArray("be",32);for(let S=0;S<32;++S)c[S]=b[S];l||(l=new Uint8Array(32));const x=m.getY().toArray("be",32);for(let S=0;S<32;++S)l[S]=x[S];const _=o(c,l,a);if(!(_ instanceof Uint8Array&&_.length===t.length))return 2;t.set(_)}return 0}},elliptic$1=lib(elliptic$2),events=eventsExports,inherits$1=inherits_browserExports,lru=LRU;function LRU(t){if(!(this instanceof LRU))return new LRU(t);typeof t=="number"&&(t={max:t}),t||(t={}),events.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=t.max||1e3,this.maxAge=t.maxAge||0}inherits$1(LRU,events.EventEmitter);Object.defineProperty(LRU.prototype,"keys",{get:function(){return Object.keys(this.cache)}});LRU.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};LRU.prototype.remove=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];return delete this.cache[t],this._unlink(t,e.prev,e.next),e.value}};LRU.prototype._unlink=function(t,e,n){this.length--,this.length===0?this.head=this.tail=null:this.head===t?(this.head=e,this.cache[this.head].next=null):this.tail===t?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[e].next=n,this.cache[n].prev=e)};LRU.prototype.peek=function(t){if(this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return e.value}};LRU.prototype.set=function(t,e){typeof t!="string"&&(t=""+t);var n;if(this.cache.hasOwnProperty(t)){if(n=this.cache[t],n.value=e,this.maxAge&&(n.modified=Date.now()),t===this.head)return e;this._unlink(t,n.prev,n.next)}else n={value:e,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[t]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=t),this.head=t,this.tail||(this.tail=t),e};LRU.prototype._checkAge=function(t,e){return this.maxAge&&Date.now()-e.modified>this.maxAge?(this.remove(t),this.emit("evict",{key:t,value:e.value}),!1):!0};LRU.prototype.get=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return this.head!==t&&(t===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=t,e.prev=this.head,e.next=null,this.head=t),e.value}};LRU.prototype.evict=function(){if(this.tail){var t=this.tail,e=this.remove(this.tail);this.emit("evict",{key:t,value:e})}};var ellipticExports=requireElliptic();const elliptic=getDefaultExportFromCjs(ellipticExports),{ec:EC$4}=elliptic,verify$1=async(t,e,n)=>{if(!t)throw new Error("No signature given");if(!e)throw new Error("Given publicKey was undefined");if(!n)throw new Error("Given input data was undefined");let a=!1;const o=new EC$4("secp256k1"),c=o.keyPair({pub:e,pubEnc:"hex"});try{a=o.verify(n,t,c)}catch{}return Promise.resolve(a)},v0=Object.freeze(Object.defineProperty({__proto__:null,verify:verify$1},Symbol.toStringTag,{value:"Module"})),unmarshal$1=supportedKeys.secp256k1.unmarshalSecp256k1PublicKey,verify=async(t,e,n)=>{if(!t)throw new Error("No signature given");if(!e)throw new Error("Given publicKey was undefined");if(!n)throw new Error("Given input data was undefined");safeBufferExports.Buffer.isBuffer(n)||(n=safeBufferExports.Buffer.from(n));const a=(c,l,u)=>c.verify(l,u);let o=!1;try{const c=unmarshal$1(safeBufferExports.Buffer.from(e,"hex"));o=await a(c,n,safeBufferExports.Buffer.from(t,"hex"))}catch{}return Promise.resolve(o)},v1=Object.freeze(Object.defineProperty({__proto__:null,verify},Symbol.toStringTag,{value:"Module"})),verifiers$1={v0,v1},verifier=t=>verifiers$1[t],{ec:EC$3}=elliptic,ec$1=new EC$3("secp256k1"),unmarshal=supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey;function createStore(t="./keystore"){return fs__default&&fs__default.mkdirSync&&fs__default.mkdirSync(t,{recursive:!0}),new Level(t,{})}const verifiedCache=new lru(1e3);class Keystore{constructor(e={}){typeof e=="string"?this._store=createStore(e):typeof e.open=="function"?this._store=e:typeof e.store=="string"?this._store=createStore(e.store):this._store=e.store||createStore(),this._cache=e.cache||new lru(100)}async open(){if(!this._store)throw new Error("Keystore: No store found to open");await this._store.open()}async close(){this._store&&await this._store.close()}async hasKey(e){if(!e)throw new Error("id needed to check a key");if(this._store.status&&this._store.status!=="open")return null;let n=!1;try{const a=this._cache.get(e)||await this._store.get(e);n=a!=null}catch{console.error("Error: ENOENT: no such file or directory")}return n}async createKey(e,{entropy:n}={}){if(!e)throw new Error("id needed to create a key");if(this._store.status&&this._store.status!=="open")return null;const a=ec$1.genKeyPair({entropy:n}).getPrivate().toArrayLike(safeBufferExports.Buffer),o=safeBufferExports.Buffer.alloc(32);a.copy(o,o.length-a.length);const c=await unmarshal(o),l=c.public.marshal(),u=elliptic$1.publicKeyConvert(safeBufferExports.Buffer.from(l),!1),d={publicKey:safeBufferExports.Buffer.from(u).toString("hex"),privateKey:safeBufferExports.Buffer.from(c.marshal()).toString("hex")};try{await this._store.put(e,JSON.stringify(d))}catch(m){console.log(m)}return this._cache.set(e,d),c}async getKey(e){if(!e)throw new Error("id needed to get a key");if(this._store||await this.open(),this._store.status&&this._store.status!=="open")return null;const n=this._cache.get(e);let a;try{a=n||await this._store.get(e)}catch{}if(!a)return;const o=n||JSON.parse(a);if(o)return n||this._cache.set(e,o),unmarshal(safeBufferExports.Buffer.from(o.privateKey,"hex"))}async sign(e,n){if(!e)throw new Error("No signing key given");if(!n)throw new Error("Given input data was undefined");return safeBufferExports.Buffer.isBuffer(n)||(n=safeBufferExports.Buffer.from(n)),safeBufferExports.Buffer.from(await e.sign(n)).toString("hex")}getPublic(e,n={}){const a=["hex","buffer"],o=typeof n.decompress>"u"?!0:n.decompress,c=n.format||"hex";if(a.indexOf(c)===-1)throw new Error("Supported formats are `hex` and `buffer`");let l=e.public.marshal();return o&&(l=elliptic$1.publicKeyConvert(safeBufferExports.Buffer.from(l),!1)),l=safeBufferExports.Buffer.from(l),c==="buffer"?l:l.toString("hex")}async verify(e,n,a,o="v1"){return Keystore.verify(e,n,a,o)}static async verify(e,n,a,o="v1"){const c=verifiedCache.get(e);let l=!1;if(c){const u=(d,m,b)=>{let x;return b==="v0"?x=safeBufferExports.Buffer.compare(safeBufferExports.Buffer.alloc(30,d),safeBufferExports.Buffer.alloc(30,m))===0:x=safeBufferExports.Buffer.isBuffer(m)?safeBufferExports.Buffer.compare(d,m)===0:d===m,x};l=c.publicKey===n&&u(c.data,a,o)}else{const u=await verifier(o).verify(e,n,a);l=u,u&&verifiedCache.set(e,{publicKey:n,data:a})}return l}}const isDefined$1=t=>t!=null;class Identity{constructor(e,n,a,o,c,l){if(!isDefined$1(e))throw new Error("Identity id is required");if(!isDefined$1(n))throw new Error("Invalid public key");if(!isDefined$1(a))throw new Error("Signature of the id (idSignature) is required");if(!isDefined$1(o))throw new Error("Signature of (publicKey + idSignature) is required");if(!isDefined$1(c))throw new Error("Identity type is required");if(!isDefined$1(l))throw new Error("Identity provider is required");this._id=e,this._publicKey=n,this._signatures=Object.assign({},{id:a},{publicKey:o}),this._type=c,this._provider=l}get id(){return this._id}get publicKey(){return this._publicKey}get signatures(){return this._signatures}get type(){return this._type}get provider(){return this._provider}toJSON(){return{id:this.id,publicKey:this.publicKey,signatures:this.signatures,type:this.type}}static isIdentity(e){return e.id!==void 0&&e.publicKey!==void 0&&e.signatures!==void 0&&e.signatures.id!==void 0&&e.signatures.publicKey!==void 0&&e.type!==void 0}static toJSON(e){return{id:e.id,publicKey:e.publicKey,signatures:e.signatures,type:e.type}}}class IdentityProvider{async getId(e){}async signIdentity(e,n){}static async verifyIdentity(e){}static get type(){throw new Error("'static get type ()' needs to be defined in the inheriting class")}get type(){return this.constructor.type}}const type$5="orbitdb";class OrbitDBIdentityProvider extends IdentityProvider{constructor(e){if(super(),!e)throw new Error("OrbitDBIdentityProvider requires a keystore");this._keystore=e}static get type(){return type$5}async getId(e={}){const n=e.id;if(!n)throw new Error("id is required");const a=this._keystore,o=await a.getKey(n)||await a.createKey(n);return Buffer$x.from(o.public.marshal()).toString("hex")}async signIdentity(e,n={}){const a=n.id;if(!a)throw new Error("id is required");const o=this._keystore,c=await o.getKey(a);if(!c)throw new Error(`Signing key for '${a}' not found`);return o.sign(c,e)}static async verifyIdentity(e){return Keystore.verify(e.signatures.publicKey,e.id,e.publicKey+e.signatures.id)}}function _catch(t,e){try{var n=t()}catch(a){return e(a)}return n&&n.then?n.then(void 0,e):n}function inMemoryCache(){const t=new Map;return function(e,n){try{let o=function(l){if(a)return l;const u=t.get(e.didUrl);return u!==void 0?u:Promise.resolve(n()).then(function(d){var m;return((m=d.didResolutionMetadata)==null?void 0:m.error)!=="notFound"&&t.set(e.didUrl,d),d})},a;const c=function(){if(e.params&&e.params["no-cache"]==="true")return Promise.resolve(n()).then(function(l){return a=1,l})}();return Promise.resolve(c&&c.then?c.then(o):o(c))}catch(a){return Promise.reject(a)}}}function noCache(t,e){return e()}const PCT_ENCODED="(?:%[0-9a-fA-F]{2})",ID_CHAR=`(?:[a-zA-Z0-9._-]|${PCT_ENCODED})`,METHOD="([a-z0-9]+)",METHOD_ID=`((?:${ID_CHAR}*:)*(${ID_CHAR}+))`,PARAM_CHAR="[a-zA-Z0-9_.:%-]",PARAM=`;${PARAM_CHAR}+=${PARAM_CHAR}*`,PARAMS=`((${PARAM})*)`,PATH="(/[^#?]*)?",QUERY="([?][^#]*)?",FRAGMENT="(#.*)?",DID_MATCHER=new RegExp(`^did:${METHOD}:${METHOD_ID}${PARAMS}${PATH}${QUERY}${FRAGMENT}$`);function parse$2(t){if(t===""||!t)return null;const e=t.match(DID_MATCHER);if(e){const n={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:t};if(e[4]){const a=e[4].slice(1).split(";");n.params={};for(const o of a){const c=o.split("=");n.params[c[0]]=c[1]}}return e[6]&&(n.path=e[6]),e[7]&&(n.query=e[7].slice(1)),e[8]&&(n.fragment=e[8].slice(1)),n}return null}const EMPTY_RESULT={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function wrapLegacyResolver(t){return function(e,n,a){try{return Promise.resolve(_catch(function(){return Promise.resolve(t(e,n,a)).then(function(o){return{...EMPTY_RESULT,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:o}})},function(o){return{...EMPTY_RESULT,didResolutionMetadata:{error:"notFound",message:o.toString()}}}))}catch(o){return Promise.reject(o)}}}class Resolver{constructor(e={},n={}){this.registry=void 0,this.cache=void 0,this.registry=e,this.cache=n.cache===!0?inMemoryCache():n.cache||noCache,n.legacyResolvers&&Object.keys(n.legacyResolvers).map(a=>{this.registry[a]||(this.registry[a]=wrapLegacyResolver(n.legacyResolvers[a]))})}resolve(e,n={}){try{const a=this,o=parse$2(e);if(o===null)return Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"invalidDid"}});const c=a.registry[o.method];return c?Promise.resolve(a.cache(o,()=>c(o.did,o,a,n))):Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(a){return Promise.reject(a)}}}function asUint8Array$1(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe$1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function concat$1(t,e){e||(e=t.reduce((o,c)=>o+c.length,0));const n=allocUnsafe$1(e);let a=0;for(const o of t)n.set(o,a),a+=o.length;return asUint8Array$1(n)}function base$3(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),l=c.charCodeAt(0);if(n[l]!==255)throw new TypeError(c+" is ambiguous");n[l]=o}var u=t.length,d=t.charAt(0),m=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function x(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var T=0,B=0,C=0,D=S.length;C!==D&&S[C]===0;)C++,T++;for(var z=(D-C)*b+1>>>0,U=new Uint8Array(z);C!==D;){for(var Y=S[C],X=0,O=z-1;(Y!==0||X<B)&&O!==-1;O--,X++)Y+=256*U[O]>>>0,U[O]=Y%u>>>0,Y=Y/u>>>0;if(Y!==0)throw new Error("Non-zero carry");B=X,C++}for(var J=z-B;J!==z&&U[J]===0;)J++;for(var Z=d.repeat(T);J<z;++J)Z+=t.charAt(U[J]);return Z}function _(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var T=0;if(S[T]!==" "){for(var B=0,C=0;S[T]===d;)B++,T++;for(var D=(S.length-T)*m+1>>>0,z=new Uint8Array(D);S[T];){var U=n[S.charCodeAt(T)];if(U===255)return;for(var Y=0,X=D-1;(U!==0||Y<C)&&X!==-1;X--,Y++)U+=u*z[X]>>>0,z[X]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");C=Y,T++}if(S[T]!==" "){for(var O=D-C;O!==D&&z[O]===0;)O++;for(var J=new Uint8Array(B+(D-O)),Z=B;O!==D;)J[Z++]=z[O++];return J}}}function w(S){var T=_(S);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:x,decodeUnsafe:_,decode:w}}var src$5=base$3,_brrp__multiformats_scope_baseX$2=src$5;const equals$3=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},coerce$2=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$4=t=>new TextEncoder().encode(t),toString$7=t=>new TextDecoder().decode(t);let Encoder$3=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$3=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}},ComposedDecoder$2=class{constructor(e){this.decoders=e}or(e){return or$2(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$2=(t,e)=>new ComposedDecoder$2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$3=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$3(e,n,a),this.decoder=new Decoder$3(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$3=({name:t,prefix:e,encode:n,decode:a})=>new Codec$3(t,e,n,a),baseX$2=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$2(n,e);return from$3({prefix:t,name:e,encode:a,decode:c=>coerce$2(o(c))})},decode$i=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let c=t.length;for(;t[c-1]==="=";)--c;const l=new Uint8Array(c*n/8|0);let u=0,d=0,m=0;for(let b=0;b<c;++b){const x=o[t[b]];if(x===void 0)throw new SyntaxError(`Non-${a} character`);d=d<<n|x,u+=n,u>=8&&(u-=8,l[m++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},encode$i=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let c="",l=0,u=0;for(let d=0;d<t.length;++d)for(u=u<<8|t[d],l+=8;l>n;)l-=n,c+=e[o&u>>l];if(l&&(c+=e[o&u<<n-l]),a)for(;c.length*n&7;)c+="=";return c},rfc4648$2=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$3({prefix:e,name:t,encode(o){return encode$i(o,a,n)},decode(o){return decode$i(o,a,n,t)}}),identity$4=from$3({prefix:"\0",name:"identity",encode:t=>toString$7(t),decode:t=>fromString$4(t)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$4},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),base10$2=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base32$3=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$4=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$3,base32hex:base32hex$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32hexupper:base32hexupper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32upper:base32upper$1,base32z:base32z$1},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$2,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base64$4=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$5=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$4,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars$1=alphabet$1.reduce((t,e,n)=>(t[n]=e,t),[]),alphabetCharsToBytes$1=alphabet$1.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function encode$h(t){return t.reduce((e,n)=>(e+=alphabetBytesToChars$1[n],e),"")}function decode$h(t){const e=[];for(const n of t){const a=alphabetCharsToBytes$1[n.codePointAt(0)];if(a===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(a)}return new Uint8Array(e)}const base256emoji$2=from$3({prefix:"🚀",name:"base256emoji",encode:encode$h,decode:decode$h}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"}));var encode_1$4=encode$g,MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$g(t,e,n){e=e||[],n=n||0;for(var a=n;t>=INT$2;)e[n++]=t&255|MSB$3,t/=128;for(;t&MSBALL$2;)e[n++]=t&255|MSB$3,t>>>=7;return e[n]=t|0,encode$g.bytes=n-a+1,e}var decode$g=read$5,MSB$1$2=128,REST$1$2=127;function read$5(t,a){var n=0,a=a||0,o=0,c=a,l,u=t.length;do{if(c>=u)throw read$5.bytes=0,new RangeError("Could not decode varint");l=t[c++],n+=o<28?(l&REST$1$2)<<o:(l&REST$1$2)*Math.pow(2,o),o+=7}while(l>=MSB$1$2);return read$5.bytes=c-a,n}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$2=function(t){return t<N1$2?1:t<N2$2?2:t<N3$2?3:t<N4$2?4:t<N5$2?5:t<N6$2?6:t<N7$2?7:t<N8$2?8:t<N9$2?9:10},varint$2={encode:encode_1$4,decode:decode$g,encodingLength:length$2},_brrp_varint$1=varint$2;const decode$f=(t,e=0)=>[_brrp_varint$1.decode(t,e),_brrp_varint$1.decode.bytes],encodeTo$1=(t,e,n=0)=>(_brrp_varint$1.encode(t,e,n),e),encodingLength$1=t=>_brrp_varint$1.encodingLength(t),create$1=(t,e)=>{const n=e.byteLength,a=encodingLength$1(t),o=a+encodingLength$1(n),c=new Uint8Array(o+n);return encodeTo$1(t,c,0),encodeTo$1(n,c,a),c.set(e,o),new Digest$1(t,n,e,c)},decode$e=t=>{const e=coerce$2(t),[n,a]=decode$f(e),[o,c]=decode$f(e.subarray(a)),l=e.subarray(a+c);if(l.byteLength!==o)throw new Error("Incorrect length");return new Digest$1(n,o,l,e)},equals$2=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&equals$3(t.bytes,e.bytes);let Digest$1=class{constructor(e,n,a,o){this.code=e,this.size=n,this.digest=a,this.bytes=o}};const from$2=({name:t,code:e,encode:n})=>new Hasher(t,e,n);class Hasher{constructor(e,n,a){this.name=e,this.code=n,this.encode=a}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?create$1(this.code,n):n.then(a=>create$1(this.code,a))}else throw Error("Unknown type, must be binary type")}}const sha=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$3=from$2({name:"sha2-256",code:18,encode:sha("SHA-256")});from$2({name:"sha2-512",code:19,encode:sha("SHA-512")});const code$4=0,name$2="identity",encode$f=coerce$2,digest=t=>create$1(code$4,encode$f(t)),identity$3={code:code$4,name:name$2,encode:encode$f,digest};new TextEncoder;new TextDecoder;let CID$1=class{constructor(e,n,a,o){this.code=n,this.version=e,this.multihash=a,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:n}=this;if(e!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$1.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:n}=this.multihash,a=create$1(e,n);return CID$1.createV1(this.code,a)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$2(this.multihash,e.multihash)}toString(e){const{bytes:n,version:a,_baseCache:o}=this;switch(a){case 0:return toStringV0$1(n,o,e||base58btc$2.encoder);default:return toStringV1$1(n,o,e||base32$3.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol$1]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$1)return e;if(e!=null&&e.asCID===e){const{version:n,code:a,multihash:o,bytes:c}=e;return new CID$1(n,a,o,c||encodeCID$1(n,a,o.bytes))}else if(e!=null&&e[cidSymbol$1]===!0){const{version:n,multihash:a,code:o}=e,c=decode$e(a);return CID$1.create(n,o,c)}else return null}static create(e,n,a){if(typeof n!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(n!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new CID$1(e,n,a,a.bytes)}case 1:{const o=encodeCID$1(e,n,a.bytes);return new CID$1(e,n,a,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$1.create(0,DAG_PB_CODE$1,e)}static createV1(e,n){return CID$1.create(1,e,n)}static decode(e){const[n,a]=CID$1.decodeFirst(e);if(a.length)throw new Error("Incorrect length");return n}static decodeFirst(e){const n=CID$1.inspectBytes(e),a=n.size-n.multihashSize,o=coerce$2(e.subarray(a,a+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const c=o.subarray(n.multihashSize-n.digestSize),l=new Digest$1(n.multihashCode,n.digestSize,c,o);return[n.version===0?CID$1.createV0(l):CID$1.createV1(n.codec,l),e.subarray(n.size)]}static inspectBytes(e){let n=0;const a=()=>{const[x,_]=decode$f(e.subarray(n));return n+=_,x};let o=a(),c=DAG_PB_CODE$1;if(o===18?(o=0,n=0):o===1&&(c=a()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const l=n,u=a(),d=a(),m=n+d,b=m-l;return{version:o,codec:c,multihashCode:u,digestSize:d,multihashSize:b,size:m}}static parse(e,n){const[a,o]=parseCIDtoBytes$1(e,n),c=CID$1.decode(o);return c._baseCache.set(a,e),c}};const parseCIDtoBytes$1=(t,e)=>{switch(t[0]){case"Q":{const n=e||base58btc$2;return[base58btc$2.prefix,n.decode(`${base58btc$2.prefix}${t}`)]}case base58btc$2.prefix:{const n=e||base58btc$2;return[base58btc$2.prefix,n.decode(t)]}case base32$3.prefix:{const n=e||base32$3;return[base32$3.prefix,n.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0$1=(t,e,n)=>{const{prefix:a}=n;if(a!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=e.get(a);if(o==null){const c=n.encode(t).slice(1);return e.set(a,c),c}else return o},toStringV1$1=(t,e,n)=>{const{prefix:a}=n,o=e.get(a);if(o==null){const c=n.encode(t);return e.set(a,c),c}else return o},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$1=(t,e,n)=>{const a=encodingLength$1(t),o=a+encodingLength$1(e),c=new Uint8Array(o+n.byteLength);return encodeTo$1(t,c,0),encodeTo$1(e,c,a),c.set(n,o),c},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$j="0.0.0-dev",deprecate=(t,e)=>{if(t.test(version$j))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$4,...base36$3,...base58$1,...base64$5,...base256emoji$3};function createCodec$2(t,e,n,a){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:a}}}const string$1=createCodec$2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$1=createCodec$2("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=allocUnsafe$1(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};function fromString$3(t,e="utf8"){const n=BASES$1[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function toString$6(t,e="utf8"){const n=BASES$1[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}var sha256$2={},binary={},int={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(u,d){var m=u>>>16&65535,b=u&65535,x=d>>>16&65535,_=d&65535;return b*_+(m*_+b*x<<16>>>0)|0}t.mul=Math.imul||e;function n(u,d){return u+d|0}t.add=n;function a(u,d){return u-d|0}t.sub=a;function o(u,d){return u<<d|u>>>32-d}t.rotl=o;function c(u,d){return u<<32-d|u>>>d}t.rotr=c;function l(u){return typeof u=="number"&&isFinite(u)&&Math.floor(u)===u}t.isInteger=Number.isInteger||l,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(u){return t.isInteger(u)&&u>=-t.MAX_SAFE_INTEGER&&u<=t.MAX_SAFE_INTEGER}})(int);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int;function readInt16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(t,e,n){return e===void 0&&(e=new Uint8Array(2)),n===void 0&&(n=0),e[n+0]=t>>>8,e[n+1]=t>>>0,e}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(t,e,n){return e===void 0&&(e=new Uint8Array(2)),n===void 0&&(n=0),e[n+0]=t>>>0,e[n+1]=t>>>8,e}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}binary.readInt32BE=readInt32BE;function readUint32BE(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}binary.readInt32LE=readInt32LE;function readUint32LE(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE$1(t,e,n){return e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0),e[n+0]=t>>>24,e[n+1]=t>>>16,e[n+2]=t>>>8,e[n+3]=t>>>0,e}binary.writeUint32BE=writeUint32BE$1;binary.writeInt32BE=writeUint32BE$1;function writeUint32LE(t,e,n){return e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0),e[n+0]=t>>>0,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24,e}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE$1(t,e){e===void 0&&(e=0);var n=readInt32BE(t,e),a=readInt32BE(t,e+4);return n*4294967296+a-(a>>31)*4294967296}binary.readInt64BE=readInt64BE$1;function readUint64BE(t,e){e===void 0&&(e=0);var n=readUint32BE(t,e),a=readUint32BE(t,e+4);return n*4294967296+a}binary.readUint64BE=readUint64BE;function readInt64LE(t,e){e===void 0&&(e=0);var n=readInt32LE(t,e),a=readInt32LE(t,e+4);return a*4294967296+n-(n>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(t,e){e===void 0&&(e=0);var n=readUint32LE(t,e),a=readUint32LE(t,e+4);return a*4294967296+n}binary.readUint64LE=readUint64LE;function writeUint64BE(t,e,n){return e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0),writeUint32BE$1(t/4294967296>>>0,e,n),writeUint32BE$1(t>>>0,e,n+4),e}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(t,e,n){return e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0),writeUint32LE(t>>>0,e,n),writeUint32LE(t/4294967296>>>0,e,n+4),e}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE(t,e,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var a=0,o=1,c=t/8+n-1;c>=n;c--)a+=e[c]*o,o*=256;return a}binary.readUintBE=readUintBE;function readUintLE(t,e,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var a=0,o=1,c=n;c<n+t/8;c++)a+=e[c]*o,o*=256;return a}binary.readUintLE=readUintLE;function writeUintBE(t,e,n,a){if(n===void 0&&(n=new Uint8Array(t/8)),a===void 0&&(a=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,c=t/8+a-1;c>=a;c--)n[c]=e/o&255,o*=256;return n}binary.writeUintBE=writeUintBE;function writeUintLE(t,e,n,a){if(n===void 0&&(n=new Uint8Array(t/8)),a===void 0&&(a=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,c=a;c<a+t/8;c++)n[c]=e/o&255,o*=256;return n}binary.writeUintLE=writeUintLE;function readFloat32BE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(e)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(e,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(e)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(e,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(t,e,n){e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat32(n,t),e}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(t,e,n){e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat32(n,t,!0),e}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(t,e,n){e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat64(n,t),e}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(t,e,n){e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat64(n,t,!0),e}binary.writeFloat64LE=writeFloat64LE;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(t){for(var e=0;e<t.length;e++)t[e]=0;return t}wipe$1.wipe=wipe;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,n=wipe$1;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var a=function(){function u(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},u.prototype.update=function(d,m){if(m===void 0&&(m=d.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var b=0;if(this._bytesHashed+=m,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&m>0;)this._buffer[this._bufferLength++]=d[b++],m--;this._bufferLength===this.blockSize&&(c(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(m>=this.blockSize&&(b=c(this._temp,this._state,d,b,m),m%=this.blockSize);m>0;)this._buffer[this._bufferLength++]=d[b++],m--;return this},u.prototype.finish=function(d){if(!this._finished){var m=this._bytesHashed,b=this._bufferLength,x=m/536870912|0,_=m<<3,w=m%64<56?64:128;this._buffer[b]=128;for(var S=b+1;S<w-8;S++)this._buffer[S]=0;e.writeUint32BE(x,this._buffer,w-8),e.writeUint32BE(_,this._buffer,w-4),c(this._temp,this._state,this._buffer,0,w),this._finished=!0}for(var S=0;S<this.digestLength/4;S++)e.writeUint32BE(this._state[S],d,S*4);return this},u.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(d){return this._state.set(d.state),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(d){n.wipe(d.state),d.buffer&&n.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},u}();t.SHA256=a;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function c(u,d,m,b,x){for(;x>=64;){for(var _=d[0],w=d[1],S=d[2],T=d[3],B=d[4],C=d[5],D=d[6],z=d[7],U=0;U<16;U++){var Y=b+U*4;u[U]=e.readUint32BE(m,Y)}for(var U=16;U<64;U++){var X=u[U-2],O=(X>>>17|X<<32-17)^(X>>>19|X<<32-19)^X>>>10;X=u[U-15];var J=(X>>>7|X<<32-7)^(X>>>18|X<<32-18)^X>>>3;u[U]=(O+u[U-7]|0)+(J+u[U-16]|0)}for(var U=0;U<64;U++){var O=(((B>>>6|B<<26)^(B>>>11|B<<21)^(B>>>25|B<<7))+(B&C^~B&D)|0)+(z+(o[U]+u[U]|0)|0)|0,J=((_>>>2|_<<32-2)^(_>>>13|_<<32-13)^(_>>>22|_<<32-22))+(_&w^_&S^w&S)|0;z=D,D=C,C=B,B=T+O|0,T=S,S=w,w=_,_=O+J|0}d[0]+=_,d[1]+=w,d[2]+=S,d[3]+=T,d[4]+=B,d[5]+=C,d[6]+=D,d[7]+=z,b+=64,x-=64}return b}function l(u){var d=new a;d.update(u);var m=d.digest();return d.clean(),m}t.hash=l})(sha256$2);var sha3Exports={},sha3$1={get exports(){return sha3Exports},set exports(t){sha3Exports=t}};(function(t){(function(){var e="input is invalid type",n="finalize already called",a=typeof window=="object",o=a?window:{};o.JS_SHA3_NO_WINDOW&&(a=!1);var c=!a&&typeof self=="object",l=!o.JS_SHA3_NO_NODE_JS&&typeof browser$1$1=="object"&&browser$1$1.versions&&browser$1$1.versions.node;l?o=globalThis:c&&(o=self);var u=!o.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,d=!o.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",m="0123456789abcdef".split(""),b=[31,7936,2031616,520093696],x=[4,1024,262144,67108864],_=[1,256,65536,16777216],w=[6,1536,393216,100663296],S=[0,8,16,24],T=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],B=[224,256,384,512],C=[128,256],D=["hex","buffer","arrayBuffer","array","digest"],z={128:168,256:136};(o.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(Q){return Object.prototype.toString.call(Q)==="[object Array]"}),d&&(o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(Q){return typeof Q=="object"&&Q.buffer&&Q.buffer.constructor===ArrayBuffer});for(var U=function(Q,ce,fe){return function(oe){return new E(Q,ce,Q).update(oe)[fe]()}},Y=function(Q,ce,fe){return function(oe,de){return new E(Q,ce,de).update(oe)[fe]()}},X=function(Q,ce,fe){return function(oe,de,ae,he){return y["cshake"+Q].update(oe,de,ae,he)[fe]()}},O=function(Q,ce,fe){return function(oe,de,ae,he){return y["kmac"+Q].update(oe,de,ae,he)[fe]()}},J=function(Q,ce,fe,oe){for(var de=0;de<D.length;++de){var ae=D[de];Q[ae]=ce(fe,oe,ae)}return Q},Z=function(Q,ce){var fe=U(Q,ce,"hex");return fe.create=function(){return new E(Q,ce,Q)},fe.update=function(oe){return fe.create().update(oe)},J(fe,U,Q,ce)},se=function(Q,ce){var fe=Y(Q,ce,"hex");return fe.create=function(oe){return new E(Q,ce,oe)},fe.update=function(oe,de){return fe.create(de).update(oe)},J(fe,Y,Q,ce)},ie=function(Q,ce){var fe=z[Q],oe=X(Q,ce,"hex");return oe.create=function(de,ae,he){return!ae&&!he?y["shake"+Q].create(de):new E(Q,ce,de).bytepad([ae,he],fe)},oe.update=function(de,ae,he,te){return oe.create(ae,he,te).update(de)},J(oe,X,Q,ce)},F=function(Q,ce){var fe=z[Q],oe=O(Q,ce,"hex");return oe.create=function(de,ae,he){return new L(Q,ce,ae).bytepad(["KMAC",he],fe).bytepad([de],fe)},oe.update=function(de,ae,he,te){return oe.create(de,he,te).update(ae)},J(oe,O,Q,ce)},k=[{name:"keccak",padding:_,bits:B,createMethod:Z},{name:"sha3",padding:w,bits:B,createMethod:Z},{name:"shake",padding:b,bits:C,createMethod:se},{name:"cshake",padding:x,bits:C,createMethod:ie},{name:"kmac",padding:x,bits:C,createMethod:F}],y={},A=[],I=0;I<k.length;++I)for(var P=k[I],H=P.bits,q=0;q<H.length;++q){var j=P.name+"_"+H[q];if(A.push(j),y[j]=P.createMethod(H[q],P.padding),P.name!=="sha3"){var M=P.name+H[q];A.push(M),y[M]=y[j]}}function E(Q,ce,fe){this.blocks=[],this.s=[],this.padding=ce,this.outputBits=fe,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(Q<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=fe>>5,this.extraBytes=(fe&31)>>3;for(var oe=0;oe<50;++oe)this.s[oe]=0}E.prototype.update=function(Q){if(this.finalized)throw new Error(n);var ce,fe=typeof Q;if(fe!=="string"){if(fe==="object"){if(Q===null)throw new Error(e);if(d&&Q.constructor===ArrayBuffer)Q=new Uint8Array(Q);else if(!Array.isArray(Q)&&(!d||!ArrayBuffer.isView(Q)))throw new Error(e)}else throw new Error(e);ce=!0}for(var oe=this.blocks,de=this.byteCount,ae=Q.length,he=this.blockCount,te=0,pe=this.s,ee,ge;te<ae;){if(this.reset)for(this.reset=!1,oe[0]=this.block,ee=1;ee<he+1;++ee)oe[ee]=0;if(ce)for(ee=this.start;te<ae&&ee<de;++te)oe[ee>>2]|=Q[te]<<S[ee++&3];else for(ee=this.start;te<ae&&ee<de;++te)ge=Q.charCodeAt(te),ge<128?oe[ee>>2]|=ge<<S[ee++&3]:ge<2048?(oe[ee>>2]|=(192|ge>>6)<<S[ee++&3],oe[ee>>2]|=(128|ge&63)<<S[ee++&3]):ge<55296||ge>=57344?(oe[ee>>2]|=(224|ge>>12)<<S[ee++&3],oe[ee>>2]|=(128|ge>>6&63)<<S[ee++&3],oe[ee>>2]|=(128|ge&63)<<S[ee++&3]):(ge=65536+((ge&1023)<<10|Q.charCodeAt(++te)&1023),oe[ee>>2]|=(240|ge>>18)<<S[ee++&3],oe[ee>>2]|=(128|ge>>12&63)<<S[ee++&3],oe[ee>>2]|=(128|ge>>6&63)<<S[ee++&3],oe[ee>>2]|=(128|ge&63)<<S[ee++&3]);if(this.lastByteIndex=ee,ee>=de){for(this.start=ee-de,this.block=oe[he],ee=0;ee<he;++ee)pe[ee]^=oe[ee];le(pe),this.reset=!0}else this.start=ee}return this},E.prototype.encode=function(Q,ce){var fe=Q&255,oe=1,de=[fe];for(Q=Q>>8,fe=Q&255;fe>0;)de.unshift(fe),Q=Q>>8,fe=Q&255,++oe;return ce?de.push(oe):de.unshift(oe),this.update(de),de.length},E.prototype.encodeString=function(Q){var ce,fe=typeof Q;if(fe!=="string"){if(fe==="object"){if(Q===null)throw new Error(e);if(d&&Q.constructor===ArrayBuffer)Q=new Uint8Array(Q);else if(!Array.isArray(Q)&&(!d||!ArrayBuffer.isView(Q)))throw new Error(e)}else throw new Error(e);ce=!0}var oe=0,de=Q.length;if(ce)oe=de;else for(var ae=0;ae<Q.length;++ae){var he=Q.charCodeAt(ae);he<128?oe+=1:he<2048?oe+=2:he<55296||he>=57344?oe+=3:(he=65536+((he&1023)<<10|Q.charCodeAt(++ae)&1023),oe+=4)}return oe+=this.encode(oe*8),this.update(Q),oe},E.prototype.bytepad=function(Q,ce){for(var fe=this.encode(ce),oe=0;oe<Q.length;++oe)fe+=this.encodeString(Q[oe]);var de=ce-fe%ce,ae=[];return ae.length=de,this.update(ae),this},E.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var Q=this.blocks,ce=this.lastByteIndex,fe=this.blockCount,oe=this.s;if(Q[ce>>2]|=this.padding[ce&3],this.lastByteIndex===this.byteCount)for(Q[0]=Q[fe],ce=1;ce<fe+1;++ce)Q[ce]=0;for(Q[fe-1]|=2147483648,ce=0;ce<fe;++ce)oe[ce]^=Q[ce];le(oe)}},E.prototype.toString=E.prototype.hex=function(){this.finalize();for(var Q=this.blockCount,ce=this.s,fe=this.outputBlocks,oe=this.extraBytes,de=0,ae=0,he="",te;ae<fe;){for(de=0;de<Q&&ae<fe;++de,++ae)te=ce[de],he+=m[te>>4&15]+m[te&15]+m[te>>12&15]+m[te>>8&15]+m[te>>20&15]+m[te>>16&15]+m[te>>28&15]+m[te>>24&15];ae%Q===0&&(le(ce),de=0)}return oe&&(te=ce[de],he+=m[te>>4&15]+m[te&15],oe>1&&(he+=m[te>>12&15]+m[te>>8&15]),oe>2&&(he+=m[te>>20&15]+m[te>>16&15])),he},E.prototype.arrayBuffer=function(){this.finalize();var Q=this.blockCount,ce=this.s,fe=this.outputBlocks,oe=this.extraBytes,de=0,ae=0,he=this.outputBits>>3,te;oe?te=new ArrayBuffer(fe+1<<2):te=new ArrayBuffer(he);for(var pe=new Uint32Array(te);ae<fe;){for(de=0;de<Q&&ae<fe;++de,++ae)pe[ae]=ce[de];ae%Q===0&&le(ce)}return oe&&(pe[de]=ce[de],te=te.slice(0,he)),te},E.prototype.buffer=E.prototype.arrayBuffer,E.prototype.digest=E.prototype.array=function(){this.finalize();for(var Q=this.blockCount,ce=this.s,fe=this.outputBlocks,oe=this.extraBytes,de=0,ae=0,he=[],te,pe;ae<fe;){for(de=0;de<Q&&ae<fe;++de,++ae)te=ae<<2,pe=ce[de],he[te]=pe&255,he[te+1]=pe>>8&255,he[te+2]=pe>>16&255,he[te+3]=pe>>24&255;ae%Q===0&&le(ce)}return oe&&(te=ae<<2,pe=ce[de],he[te]=pe&255,oe>1&&(he[te+1]=pe>>8&255),oe>2&&(he[te+2]=pe>>16&255)),he};function L(Q,ce,fe){E.call(this,Q,ce,fe)}L.prototype=new E,L.prototype.finalize=function(){return this.encode(this.outputBits,!0),E.prototype.finalize.call(this)};var le=function(Q){var ce,fe,oe,de,ae,he,te,pe,ee,ge,Ee,be,xe,ve,Se,ke,Ce,Re,Le,je,Pe,me,ne,ue,_e,Ie,Ne,De,et,We,Ke,xt,tt,st,It,yt,ut,At,ht,nt,Tt,dt,it,Bt,pt,rt,Ct,we,Be,Me,re,ye,Ae,$e,Te,Oe,Fe,Ue,ze,He,qe,Xe,Ze;for(oe=0;oe<48;oe+=2)de=Q[0]^Q[10]^Q[20]^Q[30]^Q[40],ae=Q[1]^Q[11]^Q[21]^Q[31]^Q[41],he=Q[2]^Q[12]^Q[22]^Q[32]^Q[42],te=Q[3]^Q[13]^Q[23]^Q[33]^Q[43],pe=Q[4]^Q[14]^Q[24]^Q[34]^Q[44],ee=Q[5]^Q[15]^Q[25]^Q[35]^Q[45],ge=Q[6]^Q[16]^Q[26]^Q[36]^Q[46],Ee=Q[7]^Q[17]^Q[27]^Q[37]^Q[47],be=Q[8]^Q[18]^Q[28]^Q[38]^Q[48],xe=Q[9]^Q[19]^Q[29]^Q[39]^Q[49],ce=be^(he<<1|te>>>31),fe=xe^(te<<1|he>>>31),Q[0]^=ce,Q[1]^=fe,Q[10]^=ce,Q[11]^=fe,Q[20]^=ce,Q[21]^=fe,Q[30]^=ce,Q[31]^=fe,Q[40]^=ce,Q[41]^=fe,ce=de^(pe<<1|ee>>>31),fe=ae^(ee<<1|pe>>>31),Q[2]^=ce,Q[3]^=fe,Q[12]^=ce,Q[13]^=fe,Q[22]^=ce,Q[23]^=fe,Q[32]^=ce,Q[33]^=fe,Q[42]^=ce,Q[43]^=fe,ce=he^(ge<<1|Ee>>>31),fe=te^(Ee<<1|ge>>>31),Q[4]^=ce,Q[5]^=fe,Q[14]^=ce,Q[15]^=fe,Q[24]^=ce,Q[25]^=fe,Q[34]^=ce,Q[35]^=fe,Q[44]^=ce,Q[45]^=fe,ce=pe^(be<<1|xe>>>31),fe=ee^(xe<<1|be>>>31),Q[6]^=ce,Q[7]^=fe,Q[16]^=ce,Q[17]^=fe,Q[26]^=ce,Q[27]^=fe,Q[36]^=ce,Q[37]^=fe,Q[46]^=ce,Q[47]^=fe,ce=ge^(de<<1|ae>>>31),fe=Ee^(ae<<1|de>>>31),Q[8]^=ce,Q[9]^=fe,Q[18]^=ce,Q[19]^=fe,Q[28]^=ce,Q[29]^=fe,Q[38]^=ce,Q[39]^=fe,Q[48]^=ce,Q[49]^=fe,ve=Q[0],Se=Q[1],rt=Q[11]<<4|Q[10]>>>28,Ct=Q[10]<<4|Q[11]>>>28,De=Q[20]<<3|Q[21]>>>29,et=Q[21]<<3|Q[20]>>>29,He=Q[31]<<9|Q[30]>>>23,qe=Q[30]<<9|Q[31]>>>23,dt=Q[40]<<18|Q[41]>>>14,it=Q[41]<<18|Q[40]>>>14,st=Q[2]<<1|Q[3]>>>31,It=Q[3]<<1|Q[2]>>>31,ke=Q[13]<<12|Q[12]>>>20,Ce=Q[12]<<12|Q[13]>>>20,we=Q[22]<<10|Q[23]>>>22,Be=Q[23]<<10|Q[22]>>>22,We=Q[33]<<13|Q[32]>>>19,Ke=Q[32]<<13|Q[33]>>>19,Xe=Q[42]<<2|Q[43]>>>30,Ze=Q[43]<<2|Q[42]>>>30,$e=Q[5]<<30|Q[4]>>>2,Te=Q[4]<<30|Q[5]>>>2,yt=Q[14]<<6|Q[15]>>>26,ut=Q[15]<<6|Q[14]>>>26,Re=Q[25]<<11|Q[24]>>>21,Le=Q[24]<<11|Q[25]>>>21,Me=Q[34]<<15|Q[35]>>>17,re=Q[35]<<15|Q[34]>>>17,xt=Q[45]<<29|Q[44]>>>3,tt=Q[44]<<29|Q[45]>>>3,ue=Q[6]<<28|Q[7]>>>4,_e=Q[7]<<28|Q[6]>>>4,Oe=Q[17]<<23|Q[16]>>>9,Fe=Q[16]<<23|Q[17]>>>9,At=Q[26]<<25|Q[27]>>>7,ht=Q[27]<<25|Q[26]>>>7,je=Q[36]<<21|Q[37]>>>11,Pe=Q[37]<<21|Q[36]>>>11,ye=Q[47]<<24|Q[46]>>>8,Ae=Q[46]<<24|Q[47]>>>8,Bt=Q[8]<<27|Q[9]>>>5,pt=Q[9]<<27|Q[8]>>>5,Ie=Q[18]<<20|Q[19]>>>12,Ne=Q[19]<<20|Q[18]>>>12,Ue=Q[29]<<7|Q[28]>>>25,ze=Q[28]<<7|Q[29]>>>25,nt=Q[38]<<8|Q[39]>>>24,Tt=Q[39]<<8|Q[38]>>>24,me=Q[48]<<14|Q[49]>>>18,ne=Q[49]<<14|Q[48]>>>18,Q[0]=ve^~ke&Re,Q[1]=Se^~Ce&Le,Q[10]=ue^~Ie&De,Q[11]=_e^~Ne&et,Q[20]=st^~yt&At,Q[21]=It^~ut&ht,Q[30]=Bt^~rt&we,Q[31]=pt^~Ct&Be,Q[40]=$e^~Oe&Ue,Q[41]=Te^~Fe&ze,Q[2]=ke^~Re&je,Q[3]=Ce^~Le&Pe,Q[12]=Ie^~De&We,Q[13]=Ne^~et&Ke,Q[22]=yt^~At&nt,Q[23]=ut^~ht&Tt,Q[32]=rt^~we&Me,Q[33]=Ct^~Be&re,Q[42]=Oe^~Ue&He,Q[43]=Fe^~ze&qe,Q[4]=Re^~je&me,Q[5]=Le^~Pe&ne,Q[14]=De^~We&xt,Q[15]=et^~Ke&tt,Q[24]=At^~nt&dt,Q[25]=ht^~Tt&it,Q[34]=we^~Me&ye,Q[35]=Be^~re&Ae,Q[44]=Ue^~He&Xe,Q[45]=ze^~qe&Ze,Q[6]=je^~me&ve,Q[7]=Pe^~ne&Se,Q[16]=We^~xt&ue,Q[17]=Ke^~tt&_e,Q[26]=nt^~dt&st,Q[27]=Tt^~it&It,Q[36]=Me^~ye&Bt,Q[37]=re^~Ae&pt,Q[46]=He^~Xe&$e,Q[47]=qe^~Ze&Te,Q[8]=me^~ve&ke,Q[9]=ne^~Se&Ce,Q[18]=xt^~ue&Ie,Q[19]=tt^~_e&Ne,Q[28]=dt^~st&yt,Q[29]=it^~It&ut,Q[38]=ye^~Bt&rt,Q[39]=Ae^~pt&Ct,Q[48]=Xe^~$e&Oe,Q[49]=Ze^~Te&Fe,Q[0]^=T[oe],Q[1]^=T[oe+1]};if(u)t.exports=y;else for(I=0;I<A.length;++I)o[A[I]]=y[A[I]]})()})(sha3$1);const sha3=sha3Exports;var ed25519={},random={},system={},browser$4={};Object.defineProperty(browser$4,"__esModule",{value:!0});browser$4.BrowserRandomSource=void 0;const QUOTA=65536;class BrowserRandomSource{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const n=new Uint8Array(e);for(let a=0;a<n.length;a+=QUOTA)this._crypto.getRandomValues(n.subarray(a,a+Math.min(n.length-a,QUOTA)));return n}}browser$4.BrowserRandomSource=BrowserRandomSource;function commonjsRequire$1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var node={};Object.defineProperty(node,"__esModule",{value:!0});node.NodeRandomSource=void 0;const wipe_1$2=wipe$1;class NodeRandomSource{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof commonjsRequire$1<"u"){const e=requireCryptoBrowserify();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let n=this._crypto.randomBytes(e);if(n.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const a=new Uint8Array(e);for(let o=0;o<a.length;o++)a[o]=n[o];return(0,wipe_1$2.wipe)(n),a}}node.NodeRandomSource=NodeRandomSource;Object.defineProperty(system,"__esModule",{value:!0});system.SystemRandomSource=void 0;const browser_1=browser$4,node_1=node;class SystemRandomSource{constructor(){if(this.isAvailable=!1,this.name="",this._source=new browser_1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new node_1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}system.SystemRandomSource=SystemRandomSource;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=system,n=binary,a=wipe$1;t.defaultRandomSource=new e.SystemRandomSource;function o(m,b=t.defaultRandomSource){return b.randomBytes(m)}t.randomBytes=o;function c(m=t.defaultRandomSource){const b=o(4,m),x=(0,n.readUint32LE)(b);return(0,a.wipe)(b),x}t.randomUint32=c;const l="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function u(m,b=l,x=t.defaultRandomSource){if(b.length<2)throw new Error("randomString charset is too short");if(b.length>256)throw new Error("randomString charset is too long");let _="";const w=b.length,S=256-256%w;for(;m>0;){const T=o(Math.ceil(m*256/S),x);for(let B=0;B<T.length&&m>0;B++){const C=T[B];C<S&&(_+=b.charAt(C%w),m--)}(0,a.wipe)(T)}return _}t.randomString=u;function d(m,b=l,x=t.defaultRandomSource){const _=Math.ceil(m/(Math.log(b.length)/Math.LN2));return u(_,b,x)}t.randomStringForEntropy=d})(random);var sha512={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,n=wipe$1;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var a=function(){function u(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return u.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},u.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},u.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},u.prototype.update=function(d,m){if(m===void 0&&(m=d.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var b=0;if(this._bytesHashed+=m,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&m>0;)this._buffer[this._bufferLength++]=d[b++],m--;this._bufferLength===this.blockSize&&(c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(m>=this.blockSize&&(b=c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,d,b,m),m%=this.blockSize);m>0;)this._buffer[this._bufferLength++]=d[b++],m--;return this},u.prototype.finish=function(d){if(!this._finished){var m=this._bytesHashed,b=this._bufferLength,x=m/536870912|0,_=m<<3,w=m%128<112?128:256;this._buffer[b]=128;for(var S=b+1;S<w-8;S++)this._buffer[S]=0;e.writeUint32BE(x,this._buffer,w-8),e.writeUint32BE(_,this._buffer,w-4),c(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,w),this._finished=!0}for(var S=0;S<this.digestLength/8;S++)e.writeUint32BE(this._stateHi[S],d,S*8),e.writeUint32BE(this._stateLo[S],d,S*8+4);return this},u.prototype.digest=function(){var d=new Uint8Array(this.digestLength);return this.finish(d),d},u.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},u.prototype.restoreState=function(d){return this._stateHi.set(d.stateHi),this._stateLo.set(d.stateLo),this._bufferLength=d.bufferLength,d.buffer&&this._buffer.set(d.buffer),this._bytesHashed=d.bytesHashed,this._finished=!1,this},u.prototype.cleanSavedState=function(d){n.wipe(d.stateHi),n.wipe(d.stateLo),d.buffer&&n.wipe(d.buffer),d.bufferLength=0,d.bytesHashed=0},u}();t.SHA512=a;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function c(u,d,m,b,x,_,w){for(var S=m[0],T=m[1],B=m[2],C=m[3],D=m[4],z=m[5],U=m[6],Y=m[7],X=b[0],O=b[1],J=b[2],Z=b[3],se=b[4],ie=b[5],F=b[6],k=b[7],y,A,I,P,H,q,j,M;w>=128;){for(var E=0;E<16;E++){var L=8*E+_;u[E]=e.readUint32BE(x,L),d[E]=e.readUint32BE(x,L+4)}for(var E=0;E<80;E++){var le=S,Q=T,ce=B,fe=C,oe=D,de=z,ae=U,he=Y,te=X,pe=O,ee=J,ge=Z,Ee=se,be=ie,xe=F,ve=k;if(y=Y,A=k,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=(D>>>14|se<<32-14)^(D>>>18|se<<32-18)^(se>>>41-32|D<<32-(41-32)),A=(se>>>14|D<<32-14)^(se>>>18|D<<32-18)^(D>>>41-32|se<<32-(41-32)),H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,y=D&z^~D&U,A=se&ie^~se&F,H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,y=o[E*2],A=o[E*2+1],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,y=u[E%16],A=d[E%16],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,I=j&65535|M<<16,P=H&65535|q<<16,y=I,A=P,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=(S>>>28|X<<32-28)^(X>>>34-32|S<<32-(34-32))^(X>>>39-32|S<<32-(39-32)),A=(X>>>28|S<<32-28)^(S>>>34-32|X<<32-(34-32))^(S>>>39-32|X<<32-(39-32)),H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,y=S&T^S&B^T&B,A=X&O^X&J^O&J,H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,he=j&65535|M<<16,ve=H&65535|q<<16,y=fe,A=ge,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=I,A=P,H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,fe=j&65535|M<<16,ge=H&65535|q<<16,T=le,B=Q,C=ce,D=fe,z=oe,U=de,Y=ae,S=he,O=te,J=pe,Z=ee,se=ge,ie=Ee,F=be,k=xe,X=ve,E%16===15)for(var L=0;L<16;L++)y=u[L],A=d[L],H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=u[(L+9)%16],A=d[(L+9)%16],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,I=u[(L+1)%16],P=d[(L+1)%16],y=(I>>>1|P<<32-1)^(I>>>8|P<<32-8)^I>>>7,A=(P>>>1|I<<32-1)^(P>>>8|I<<32-8)^(P>>>7|I<<32-7),H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,I=u[(L+14)%16],P=d[(L+14)%16],y=(I>>>19|P<<32-19)^(P>>>61-32|I<<32-(61-32))^I>>>6,A=(P>>>19|I<<32-19)^(I>>>61-32|P<<32-(61-32))^(P>>>6|I<<32-6),H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,u[L]=j&65535|M<<16,d[L]=H&65535|q<<16}y=S,A=X,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=m[0],A=b[0],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,m[0]=S=j&65535|M<<16,b[0]=X=H&65535|q<<16,y=T,A=O,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=m[1],A=b[1],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,m[1]=T=j&65535|M<<16,b[1]=O=H&65535|q<<16,y=B,A=J,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=m[2],A=b[2],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,m[2]=B=j&65535|M<<16,b[2]=J=H&65535|q<<16,y=C,A=Z,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=m[3],A=b[3],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,m[3]=C=j&65535|M<<16,b[3]=Z=H&65535|q<<16,y=D,A=se,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=m[4],A=b[4],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,m[4]=D=j&65535|M<<16,b[4]=se=H&65535|q<<16,y=z,A=ie,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=m[5],A=b[5],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,m[5]=z=j&65535|M<<16,b[5]=ie=H&65535|q<<16,y=U,A=F,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=m[6],A=b[6],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,m[6]=U=j&65535|M<<16,b[6]=F=H&65535|q<<16,y=Y,A=k,H=A&65535,q=A>>>16,j=y&65535,M=y>>>16,y=m[7],A=b[7],H+=A&65535,q+=A>>>16,j+=y&65535,M+=y>>>16,q+=H>>>16,j+=q>>>16,M+=j>>>16,m[7]=Y=j&65535|M<<16,b[7]=k=H&65535|q<<16,_+=128,w-=128}return _}function l(u){var d=new a;d.update(u);var m=d.digest();return d.clean(),m}t.hash=l})(sha512);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=random,n=sha512,a=wipe$1;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function o(fe){const oe=new Float64Array(16);if(fe)for(let de=0;de<fe.length;de++)oe[de]=fe[de];return oe}const c=new Uint8Array(32);c[0]=9;const l=o(),u=o([1]),d=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),m=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),b=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),x=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function w(fe,oe){for(let de=0;de<16;de++)fe[de]=oe[de]|0}function S(fe){let oe=1;for(let de=0;de<16;de++){let ae=fe[de]+oe+65535;oe=Math.floor(ae/65536),fe[de]=ae-oe*65536}fe[0]+=oe-1+37*(oe-1)}function T(fe,oe,de){const ae=~(de-1);for(let he=0;he<16;he++){const te=ae&(fe[he]^oe[he]);fe[he]^=te,oe[he]^=te}}function B(fe,oe){const de=o(),ae=o();for(let he=0;he<16;he++)ae[he]=oe[he];S(ae),S(ae),S(ae);for(let he=0;he<2;he++){de[0]=ae[0]-65517;for(let pe=1;pe<15;pe++)de[pe]=ae[pe]-65535-(de[pe-1]>>16&1),de[pe-1]&=65535;de[15]=ae[15]-32767-(de[14]>>16&1);const te=de[15]>>16&1;de[14]&=65535,T(ae,de,1-te)}for(let he=0;he<16;he++)fe[2*he]=ae[he]&255,fe[2*he+1]=ae[he]>>8}function C(fe,oe){let de=0;for(let ae=0;ae<32;ae++)de|=fe[ae]^oe[ae];return(1&de-1>>>8)-1}function D(fe,oe){const de=new Uint8Array(32),ae=new Uint8Array(32);return B(de,fe),B(ae,oe),C(de,ae)}function z(fe){const oe=new Uint8Array(32);return B(oe,fe),oe[0]&1}function U(fe,oe){for(let de=0;de<16;de++)fe[de]=oe[2*de]+(oe[2*de+1]<<8);fe[15]&=32767}function Y(fe,oe,de){for(let ae=0;ae<16;ae++)fe[ae]=oe[ae]+de[ae]}function X(fe,oe,de){for(let ae=0;ae<16;ae++)fe[ae]=oe[ae]-de[ae]}function O(fe,oe,de){let ae,he,te=0,pe=0,ee=0,ge=0,Ee=0,be=0,xe=0,ve=0,Se=0,ke=0,Ce=0,Re=0,Le=0,je=0,Pe=0,me=0,ne=0,ue=0,_e=0,Ie=0,Ne=0,De=0,et=0,We=0,Ke=0,xt=0,tt=0,st=0,It=0,yt=0,ut=0,At=de[0],ht=de[1],nt=de[2],Tt=de[3],dt=de[4],it=de[5],Bt=de[6],pt=de[7],rt=de[8],Ct=de[9],we=de[10],Be=de[11],Me=de[12],re=de[13],ye=de[14],Ae=de[15];ae=oe[0],te+=ae*At,pe+=ae*ht,ee+=ae*nt,ge+=ae*Tt,Ee+=ae*dt,be+=ae*it,xe+=ae*Bt,ve+=ae*pt,Se+=ae*rt,ke+=ae*Ct,Ce+=ae*we,Re+=ae*Be,Le+=ae*Me,je+=ae*re,Pe+=ae*ye,me+=ae*Ae,ae=oe[1],pe+=ae*At,ee+=ae*ht,ge+=ae*nt,Ee+=ae*Tt,be+=ae*dt,xe+=ae*it,ve+=ae*Bt,Se+=ae*pt,ke+=ae*rt,Ce+=ae*Ct,Re+=ae*we,Le+=ae*Be,je+=ae*Me,Pe+=ae*re,me+=ae*ye,ne+=ae*Ae,ae=oe[2],ee+=ae*At,ge+=ae*ht,Ee+=ae*nt,be+=ae*Tt,xe+=ae*dt,ve+=ae*it,Se+=ae*Bt,ke+=ae*pt,Ce+=ae*rt,Re+=ae*Ct,Le+=ae*we,je+=ae*Be,Pe+=ae*Me,me+=ae*re,ne+=ae*ye,ue+=ae*Ae,ae=oe[3],ge+=ae*At,Ee+=ae*ht,be+=ae*nt,xe+=ae*Tt,ve+=ae*dt,Se+=ae*it,ke+=ae*Bt,Ce+=ae*pt,Re+=ae*rt,Le+=ae*Ct,je+=ae*we,Pe+=ae*Be,me+=ae*Me,ne+=ae*re,ue+=ae*ye,_e+=ae*Ae,ae=oe[4],Ee+=ae*At,be+=ae*ht,xe+=ae*nt,ve+=ae*Tt,Se+=ae*dt,ke+=ae*it,Ce+=ae*Bt,Re+=ae*pt,Le+=ae*rt,je+=ae*Ct,Pe+=ae*we,me+=ae*Be,ne+=ae*Me,ue+=ae*re,_e+=ae*ye,Ie+=ae*Ae,ae=oe[5],be+=ae*At,xe+=ae*ht,ve+=ae*nt,Se+=ae*Tt,ke+=ae*dt,Ce+=ae*it,Re+=ae*Bt,Le+=ae*pt,je+=ae*rt,Pe+=ae*Ct,me+=ae*we,ne+=ae*Be,ue+=ae*Me,_e+=ae*re,Ie+=ae*ye,Ne+=ae*Ae,ae=oe[6],xe+=ae*At,ve+=ae*ht,Se+=ae*nt,ke+=ae*Tt,Ce+=ae*dt,Re+=ae*it,Le+=ae*Bt,je+=ae*pt,Pe+=ae*rt,me+=ae*Ct,ne+=ae*we,ue+=ae*Be,_e+=ae*Me,Ie+=ae*re,Ne+=ae*ye,De+=ae*Ae,ae=oe[7],ve+=ae*At,Se+=ae*ht,ke+=ae*nt,Ce+=ae*Tt,Re+=ae*dt,Le+=ae*it,je+=ae*Bt,Pe+=ae*pt,me+=ae*rt,ne+=ae*Ct,ue+=ae*we,_e+=ae*Be,Ie+=ae*Me,Ne+=ae*re,De+=ae*ye,et+=ae*Ae,ae=oe[8],Se+=ae*At,ke+=ae*ht,Ce+=ae*nt,Re+=ae*Tt,Le+=ae*dt,je+=ae*it,Pe+=ae*Bt,me+=ae*pt,ne+=ae*rt,ue+=ae*Ct,_e+=ae*we,Ie+=ae*Be,Ne+=ae*Me,De+=ae*re,et+=ae*ye,We+=ae*Ae,ae=oe[9],ke+=ae*At,Ce+=ae*ht,Re+=ae*nt,Le+=ae*Tt,je+=ae*dt,Pe+=ae*it,me+=ae*Bt,ne+=ae*pt,ue+=ae*rt,_e+=ae*Ct,Ie+=ae*we,Ne+=ae*Be,De+=ae*Me,et+=ae*re,We+=ae*ye,Ke+=ae*Ae,ae=oe[10],Ce+=ae*At,Re+=ae*ht,Le+=ae*nt,je+=ae*Tt,Pe+=ae*dt,me+=ae*it,ne+=ae*Bt,ue+=ae*pt,_e+=ae*rt,Ie+=ae*Ct,Ne+=ae*we,De+=ae*Be,et+=ae*Me,We+=ae*re,Ke+=ae*ye,xt+=ae*Ae,ae=oe[11],Re+=ae*At,Le+=ae*ht,je+=ae*nt,Pe+=ae*Tt,me+=ae*dt,ne+=ae*it,ue+=ae*Bt,_e+=ae*pt,Ie+=ae*rt,Ne+=ae*Ct,De+=ae*we,et+=ae*Be,We+=ae*Me,Ke+=ae*re,xt+=ae*ye,tt+=ae*Ae,ae=oe[12],Le+=ae*At,je+=ae*ht,Pe+=ae*nt,me+=ae*Tt,ne+=ae*dt,ue+=ae*it,_e+=ae*Bt,Ie+=ae*pt,Ne+=ae*rt,De+=ae*Ct,et+=ae*we,We+=ae*Be,Ke+=ae*Me,xt+=ae*re,tt+=ae*ye,st+=ae*Ae,ae=oe[13],je+=ae*At,Pe+=ae*ht,me+=ae*nt,ne+=ae*Tt,ue+=ae*dt,_e+=ae*it,Ie+=ae*Bt,Ne+=ae*pt,De+=ae*rt,et+=ae*Ct,We+=ae*we,Ke+=ae*Be,xt+=ae*Me,tt+=ae*re,st+=ae*ye,It+=ae*Ae,ae=oe[14],Pe+=ae*At,me+=ae*ht,ne+=ae*nt,ue+=ae*Tt,_e+=ae*dt,Ie+=ae*it,Ne+=ae*Bt,De+=ae*pt,et+=ae*rt,We+=ae*Ct,Ke+=ae*we,xt+=ae*Be,tt+=ae*Me,st+=ae*re,It+=ae*ye,yt+=ae*Ae,ae=oe[15],me+=ae*At,ne+=ae*ht,ue+=ae*nt,_e+=ae*Tt,Ie+=ae*dt,Ne+=ae*it,De+=ae*Bt,et+=ae*pt,We+=ae*rt,Ke+=ae*Ct,xt+=ae*we,tt+=ae*Be,st+=ae*Me,It+=ae*re,yt+=ae*ye,ut+=ae*Ae,te+=38*ne,pe+=38*ue,ee+=38*_e,ge+=38*Ie,Ee+=38*Ne,be+=38*De,xe+=38*et,ve+=38*We,Se+=38*Ke,ke+=38*xt,Ce+=38*tt,Re+=38*st,Le+=38*It,je+=38*yt,Pe+=38*ut,he=1,ae=te+he+65535,he=Math.floor(ae/65536),te=ae-he*65536,ae=pe+he+65535,he=Math.floor(ae/65536),pe=ae-he*65536,ae=ee+he+65535,he=Math.floor(ae/65536),ee=ae-he*65536,ae=ge+he+65535,he=Math.floor(ae/65536),ge=ae-he*65536,ae=Ee+he+65535,he=Math.floor(ae/65536),Ee=ae-he*65536,ae=be+he+65535,he=Math.floor(ae/65536),be=ae-he*65536,ae=xe+he+65535,he=Math.floor(ae/65536),xe=ae-he*65536,ae=ve+he+65535,he=Math.floor(ae/65536),ve=ae-he*65536,ae=Se+he+65535,he=Math.floor(ae/65536),Se=ae-he*65536,ae=ke+he+65535,he=Math.floor(ae/65536),ke=ae-he*65536,ae=Ce+he+65535,he=Math.floor(ae/65536),Ce=ae-he*65536,ae=Re+he+65535,he=Math.floor(ae/65536),Re=ae-he*65536,ae=Le+he+65535,he=Math.floor(ae/65536),Le=ae-he*65536,ae=je+he+65535,he=Math.floor(ae/65536),je=ae-he*65536,ae=Pe+he+65535,he=Math.floor(ae/65536),Pe=ae-he*65536,ae=me+he+65535,he=Math.floor(ae/65536),me=ae-he*65536,te+=he-1+37*(he-1),he=1,ae=te+he+65535,he=Math.floor(ae/65536),te=ae-he*65536,ae=pe+he+65535,he=Math.floor(ae/65536),pe=ae-he*65536,ae=ee+he+65535,he=Math.floor(ae/65536),ee=ae-he*65536,ae=ge+he+65535,he=Math.floor(ae/65536),ge=ae-he*65536,ae=Ee+he+65535,he=Math.floor(ae/65536),Ee=ae-he*65536,ae=be+he+65535,he=Math.floor(ae/65536),be=ae-he*65536,ae=xe+he+65535,he=Math.floor(ae/65536),xe=ae-he*65536,ae=ve+he+65535,he=Math.floor(ae/65536),ve=ae-he*65536,ae=Se+he+65535,he=Math.floor(ae/65536),Se=ae-he*65536,ae=ke+he+65535,he=Math.floor(ae/65536),ke=ae-he*65536,ae=Ce+he+65535,he=Math.floor(ae/65536),Ce=ae-he*65536,ae=Re+he+65535,he=Math.floor(ae/65536),Re=ae-he*65536,ae=Le+he+65535,he=Math.floor(ae/65536),Le=ae-he*65536,ae=je+he+65535,he=Math.floor(ae/65536),je=ae-he*65536,ae=Pe+he+65535,he=Math.floor(ae/65536),Pe=ae-he*65536,ae=me+he+65535,he=Math.floor(ae/65536),me=ae-he*65536,te+=he-1+37*(he-1),fe[0]=te,fe[1]=pe,fe[2]=ee,fe[3]=ge,fe[4]=Ee,fe[5]=be,fe[6]=xe,fe[7]=ve,fe[8]=Se,fe[9]=ke,fe[10]=Ce,fe[11]=Re,fe[12]=Le,fe[13]=je,fe[14]=Pe,fe[15]=me}function J(fe,oe){O(fe,oe,oe)}function Z(fe,oe){const de=o();let ae;for(ae=0;ae<16;ae++)de[ae]=oe[ae];for(ae=253;ae>=0;ae--)J(de,de),ae!==2&&ae!==4&&O(de,de,oe);for(ae=0;ae<16;ae++)fe[ae]=de[ae]}function se(fe,oe){const de=o();let ae;for(ae=0;ae<16;ae++)de[ae]=oe[ae];for(ae=250;ae>=0;ae--)J(de,de),ae!==1&&O(de,de,oe);for(ae=0;ae<16;ae++)fe[ae]=de[ae]}function ie(fe,oe){const de=o(),ae=o(),he=o(),te=o(),pe=o(),ee=o(),ge=o(),Ee=o(),be=o();X(de,fe[1],fe[0]),X(be,oe[1],oe[0]),O(de,de,be),Y(ae,fe[0],fe[1]),Y(be,oe[0],oe[1]),O(ae,ae,be),O(he,fe[3],oe[3]),O(he,he,m),O(te,fe[2],oe[2]),Y(te,te,te),X(pe,ae,de),X(ee,te,he),Y(ge,te,he),Y(Ee,ae,de),O(fe[0],pe,ee),O(fe[1],Ee,ge),O(fe[2],ge,ee),O(fe[3],pe,Ee)}function F(fe,oe,de){for(let ae=0;ae<4;ae++)T(fe[ae],oe[ae],de)}function k(fe,oe){const de=o(),ae=o(),he=o();Z(he,oe[2]),O(de,oe[0],he),O(ae,oe[1],he),B(fe,ae),fe[31]^=z(de)<<7}function y(fe,oe,de){w(fe[0],l),w(fe[1],u),w(fe[2],u),w(fe[3],l);for(let ae=255;ae>=0;--ae){const he=de[ae/8|0]>>(ae&7)&1;F(fe,oe,he),ie(oe,fe),ie(fe,fe),F(fe,oe,he)}}function A(fe,oe){const de=[o(),o(),o(),o()];w(de[0],b),w(de[1],x),w(de[2],u),O(de[3],b,x),y(fe,de,oe)}function I(fe){if(fe.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const oe=(0,n.hash)(fe);oe[0]&=248,oe[31]&=127,oe[31]|=64;const de=new Uint8Array(32),ae=[o(),o(),o(),o()];A(ae,oe),k(de,ae);const he=new Uint8Array(64);return he.set(fe),he.set(de,32),{publicKey:de,secretKey:he}}t.generateKeyPairFromSeed=I;function P(fe){const oe=(0,e.randomBytes)(32,fe),de=I(oe);return(0,a.wipe)(oe),de}t.generateKeyPair=P;function H(fe){if(fe.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(fe.subarray(32))}t.extractPublicKeyFromSecretKey=H;const q=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function j(fe,oe){let de,ae,he,te;for(ae=63;ae>=32;--ae){for(de=0,he=ae-32,te=ae-12;he<te;++he)oe[he]+=de-16*oe[ae]*q[he-(ae-32)],de=Math.floor((oe[he]+128)/256),oe[he]-=de*256;oe[he]+=de,oe[ae]=0}for(de=0,he=0;he<32;he++)oe[he]+=de-(oe[31]>>4)*q[he],de=oe[he]>>8,oe[he]&=255;for(he=0;he<32;he++)oe[he]-=de*q[he];for(ae=0;ae<32;ae++)oe[ae+1]+=oe[ae]>>8,fe[ae]=oe[ae]&255}function M(fe){const oe=new Float64Array(64);for(let de=0;de<64;de++)oe[de]=fe[de];for(let de=0;de<64;de++)fe[de]=0;j(fe,oe)}function E(fe,oe){const de=new Float64Array(64),ae=[o(),o(),o(),o()],he=(0,n.hash)(fe.subarray(0,32));he[0]&=248,he[31]&=127,he[31]|=64;const te=new Uint8Array(64);te.set(he.subarray(32),32);const pe=new n.SHA512;pe.update(te.subarray(32)),pe.update(oe);const ee=pe.digest();pe.clean(),M(ee),A(ae,ee),k(te,ae),pe.reset(),pe.update(te.subarray(0,32)),pe.update(fe.subarray(32)),pe.update(oe);const ge=pe.digest();M(ge);for(let Ee=0;Ee<32;Ee++)de[Ee]=ee[Ee];for(let Ee=0;Ee<32;Ee++)for(let be=0;be<32;be++)de[Ee+be]+=ge[Ee]*he[be];return j(te.subarray(32),de),te}t.sign=E;function L(fe,oe){const de=o(),ae=o(),he=o(),te=o(),pe=o(),ee=o(),ge=o();return w(fe[2],u),U(fe[1],oe),J(he,fe[1]),O(te,he,d),X(he,he,fe[2]),Y(te,fe[2],te),J(pe,te),J(ee,pe),O(ge,ee,pe),O(de,ge,he),O(de,de,te),se(de,de),O(de,de,he),O(de,de,te),O(de,de,te),O(fe[0],de,te),J(ae,fe[0]),O(ae,ae,te),D(ae,he)&&O(fe[0],fe[0],_),J(ae,fe[0]),O(ae,ae,te),D(ae,he)?-1:(z(fe[0])===oe[31]>>7&&X(fe[0],l,fe[0]),O(fe[3],fe[0],fe[1]),0)}function le(fe,oe,de){const ae=new Uint8Array(32),he=[o(),o(),o(),o()],te=[o(),o(),o(),o()];if(de.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(L(te,fe))return!1;const pe=new n.SHA512;pe.update(de.subarray(0,32)),pe.update(fe),pe.update(oe);const ee=pe.digest();return M(ee),y(he,te,ee),A(te,de.subarray(32)),ie(he,te),k(ae,he),!C(de,ae)}t.verify=le;function Q(fe){let oe=[o(),o(),o(),o()];if(L(oe,fe))throw new Error("Ed25519: invalid public key");let de=o(),ae=o(),he=oe[1];Y(de,u,he),X(ae,u,he),Z(ae,ae),O(de,de,ae);let te=new Uint8Array(32);return B(te,de),te}t.convertPublicKeyToX25519=Q;function ce(fe){const oe=(0,n.hash)(fe.subarray(0,32));oe[0]&=248,oe[31]&=127,oe[31]|=64;const de=new Uint8Array(oe.subarray(0,32));return(0,a.wipe)(oe),de}t.convertSecretKeyToX25519=ce})(ed25519);var dist={};Object.defineProperty(dist,"__esModule",{value:!0});dist.bech32m=bech32=dist.bech32=void 0;const ALPHABET="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(let t=0;t<ALPHABET.length;t++){const e=ALPHABET.charAt(t);ALPHABET_MAP[e]=t}function polymodStep(t){const e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function prefixChk(t){let e=1;for(let n=0;n<t.length;++n){const a=t.charCodeAt(n);if(a<33||a>126)return"Invalid prefix ("+t+")";e=polymodStep(e)^a>>5}e=polymodStep(e);for(let n=0;n<t.length;++n){const a=t.charCodeAt(n);e=polymodStep(e)^a&31}return e}function convert(t,e,n,a){let o=0,c=0;const l=(1<<n)-1,u=[];for(let d=0;d<t.length;++d)for(o=o<<e|t[d],c+=e;c>=n;)c-=n,u.push(o>>c&l);if(a)c>0&&u.push(o<<n-c&l);else{if(c>=e)return"Excess padding";if(o<<n-c&l)return"Non-zero padding"}return u}function toWords(t){return convert(t,8,5,!0)}function fromWordsUnsafe(t){const e=convert(t,5,8,!1);if(Array.isArray(e))return e}function fromWords(t){const e=convert(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function getLibraryFromEncoding(t){let e;t==="bech32"?e=1:e=734539939;function n(l,u,d){if(d=d||90,l.length+7+u.length>d)throw new TypeError("Exceeds length limit");l=l.toLowerCase();let m=prefixChk(l);if(typeof m=="string")throw new Error(m);let b=l+"1";for(let x=0;x<u.length;++x){const _=u[x];if(_>>5)throw new Error("Non 5-bit word");m=polymodStep(m)^_,b+=ALPHABET.charAt(_)}for(let x=0;x<6;++x)m=polymodStep(m);m^=e;for(let x=0;x<6;++x){const _=m>>(5-x)*5&31;b+=ALPHABET.charAt(_)}return b}function a(l,u){if(u=u||90,l.length<8)return l+" too short";if(l.length>u)return"Exceeds length limit";const d=l.toLowerCase(),m=l.toUpperCase();if(l!==d&&l!==m)return"Mixed-case string "+l;l=d;const b=l.lastIndexOf("1");if(b===-1)return"No separator character for "+l;if(b===0)return"Missing prefix for "+l;const x=l.slice(0,b),_=l.slice(b+1);if(_.length<6)return"Data too short";let w=prefixChk(x);if(typeof w=="string")return w;const S=[];for(let T=0;T<_.length;++T){const B=_.charAt(T),C=ALPHABET_MAP[B];if(C===void 0)return"Unknown character "+B;w=polymodStep(w)^C,!(T+6>=_.length)&&S.push(C)}return w!==e?"Invalid checksum for "+l:{prefix:x,words:S}}function o(l,u){const d=a(l,u);if(typeof d=="object")return d}function c(l,u){const d=a(l,u);if(typeof d=="object")return d;throw new Error(d)}return{decodeUnsafe:o,decode:c,encode:n,toWords,fromWordsUnsafe,fromWords}}var bech32=dist.bech32=getLibraryFromEncoding("bech32");dist.bech32m=getLibraryFromEncoding("bech32m");var x25519={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=random,n=wipe$1;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function a(U){const Y=new Float64Array(16);if(U)for(let X=0;X<U.length;X++)Y[X]=U[X];return Y}const o=new Uint8Array(32);o[0]=9;const c=a([56129,1]);function l(U){let Y=1;for(let X=0;X<16;X++){let O=U[X]+Y+65535;Y=Math.floor(O/65536),U[X]=O-Y*65536}U[0]+=Y-1+37*(Y-1)}function u(U,Y,X){const O=~(X-1);for(let J=0;J<16;J++){const Z=O&(U[J]^Y[J]);U[J]^=Z,Y[J]^=Z}}function d(U,Y){const X=a(),O=a();for(let J=0;J<16;J++)O[J]=Y[J];l(O),l(O),l(O);for(let J=0;J<2;J++){X[0]=O[0]-65517;for(let se=1;se<15;se++)X[se]=O[se]-65535-(X[se-1]>>16&1),X[se-1]&=65535;X[15]=O[15]-32767-(X[14]>>16&1);const Z=X[15]>>16&1;X[14]&=65535,u(O,X,1-Z)}for(let J=0;J<16;J++)U[2*J]=O[J]&255,U[2*J+1]=O[J]>>8}function m(U,Y){for(let X=0;X<16;X++)U[X]=Y[2*X]+(Y[2*X+1]<<8);U[15]&=32767}function b(U,Y,X){for(let O=0;O<16;O++)U[O]=Y[O]+X[O]}function x(U,Y,X){for(let O=0;O<16;O++)U[O]=Y[O]-X[O]}function _(U,Y,X){let O,J,Z=0,se=0,ie=0,F=0,k=0,y=0,A=0,I=0,P=0,H=0,q=0,j=0,M=0,E=0,L=0,le=0,Q=0,ce=0,fe=0,oe=0,de=0,ae=0,he=0,te=0,pe=0,ee=0,ge=0,Ee=0,be=0,xe=0,ve=0,Se=X[0],ke=X[1],Ce=X[2],Re=X[3],Le=X[4],je=X[5],Pe=X[6],me=X[7],ne=X[8],ue=X[9],_e=X[10],Ie=X[11],Ne=X[12],De=X[13],et=X[14],We=X[15];O=Y[0],Z+=O*Se,se+=O*ke,ie+=O*Ce,F+=O*Re,k+=O*Le,y+=O*je,A+=O*Pe,I+=O*me,P+=O*ne,H+=O*ue,q+=O*_e,j+=O*Ie,M+=O*Ne,E+=O*De,L+=O*et,le+=O*We,O=Y[1],se+=O*Se,ie+=O*ke,F+=O*Ce,k+=O*Re,y+=O*Le,A+=O*je,I+=O*Pe,P+=O*me,H+=O*ne,q+=O*ue,j+=O*_e,M+=O*Ie,E+=O*Ne,L+=O*De,le+=O*et,Q+=O*We,O=Y[2],ie+=O*Se,F+=O*ke,k+=O*Ce,y+=O*Re,A+=O*Le,I+=O*je,P+=O*Pe,H+=O*me,q+=O*ne,j+=O*ue,M+=O*_e,E+=O*Ie,L+=O*Ne,le+=O*De,Q+=O*et,ce+=O*We,O=Y[3],F+=O*Se,k+=O*ke,y+=O*Ce,A+=O*Re,I+=O*Le,P+=O*je,H+=O*Pe,q+=O*me,j+=O*ne,M+=O*ue,E+=O*_e,L+=O*Ie,le+=O*Ne,Q+=O*De,ce+=O*et,fe+=O*We,O=Y[4],k+=O*Se,y+=O*ke,A+=O*Ce,I+=O*Re,P+=O*Le,H+=O*je,q+=O*Pe,j+=O*me,M+=O*ne,E+=O*ue,L+=O*_e,le+=O*Ie,Q+=O*Ne,ce+=O*De,fe+=O*et,oe+=O*We,O=Y[5],y+=O*Se,A+=O*ke,I+=O*Ce,P+=O*Re,H+=O*Le,q+=O*je,j+=O*Pe,M+=O*me,E+=O*ne,L+=O*ue,le+=O*_e,Q+=O*Ie,ce+=O*Ne,fe+=O*De,oe+=O*et,de+=O*We,O=Y[6],A+=O*Se,I+=O*ke,P+=O*Ce,H+=O*Re,q+=O*Le,j+=O*je,M+=O*Pe,E+=O*me,L+=O*ne,le+=O*ue,Q+=O*_e,ce+=O*Ie,fe+=O*Ne,oe+=O*De,de+=O*et,ae+=O*We,O=Y[7],I+=O*Se,P+=O*ke,H+=O*Ce,q+=O*Re,j+=O*Le,M+=O*je,E+=O*Pe,L+=O*me,le+=O*ne,Q+=O*ue,ce+=O*_e,fe+=O*Ie,oe+=O*Ne,de+=O*De,ae+=O*et,he+=O*We,O=Y[8],P+=O*Se,H+=O*ke,q+=O*Ce,j+=O*Re,M+=O*Le,E+=O*je,L+=O*Pe,le+=O*me,Q+=O*ne,ce+=O*ue,fe+=O*_e,oe+=O*Ie,de+=O*Ne,ae+=O*De,he+=O*et,te+=O*We,O=Y[9],H+=O*Se,q+=O*ke,j+=O*Ce,M+=O*Re,E+=O*Le,L+=O*je,le+=O*Pe,Q+=O*me,ce+=O*ne,fe+=O*ue,oe+=O*_e,de+=O*Ie,ae+=O*Ne,he+=O*De,te+=O*et,pe+=O*We,O=Y[10],q+=O*Se,j+=O*ke,M+=O*Ce,E+=O*Re,L+=O*Le,le+=O*je,Q+=O*Pe,ce+=O*me,fe+=O*ne,oe+=O*ue,de+=O*_e,ae+=O*Ie,he+=O*Ne,te+=O*De,pe+=O*et,ee+=O*We,O=Y[11],j+=O*Se,M+=O*ke,E+=O*Ce,L+=O*Re,le+=O*Le,Q+=O*je,ce+=O*Pe,fe+=O*me,oe+=O*ne,de+=O*ue,ae+=O*_e,he+=O*Ie,te+=O*Ne,pe+=O*De,ee+=O*et,ge+=O*We,O=Y[12],M+=O*Se,E+=O*ke,L+=O*Ce,le+=O*Re,Q+=O*Le,ce+=O*je,fe+=O*Pe,oe+=O*me,de+=O*ne,ae+=O*ue,he+=O*_e,te+=O*Ie,pe+=O*Ne,ee+=O*De,ge+=O*et,Ee+=O*We,O=Y[13],E+=O*Se,L+=O*ke,le+=O*Ce,Q+=O*Re,ce+=O*Le,fe+=O*je,oe+=O*Pe,de+=O*me,ae+=O*ne,he+=O*ue,te+=O*_e,pe+=O*Ie,ee+=O*Ne,ge+=O*De,Ee+=O*et,be+=O*We,O=Y[14],L+=O*Se,le+=O*ke,Q+=O*Ce,ce+=O*Re,fe+=O*Le,oe+=O*je,de+=O*Pe,ae+=O*me,he+=O*ne,te+=O*ue,pe+=O*_e,ee+=O*Ie,ge+=O*Ne,Ee+=O*De,be+=O*et,xe+=O*We,O=Y[15],le+=O*Se,Q+=O*ke,ce+=O*Ce,fe+=O*Re,oe+=O*Le,de+=O*je,ae+=O*Pe,he+=O*me,te+=O*ne,pe+=O*ue,ee+=O*_e,ge+=O*Ie,Ee+=O*Ne,be+=O*De,xe+=O*et,ve+=O*We,Z+=38*Q,se+=38*ce,ie+=38*fe,F+=38*oe,k+=38*de,y+=38*ae,A+=38*he,I+=38*te,P+=38*pe,H+=38*ee,q+=38*ge,j+=38*Ee,M+=38*be,E+=38*xe,L+=38*ve,J=1,O=Z+J+65535,J=Math.floor(O/65536),Z=O-J*65536,O=se+J+65535,J=Math.floor(O/65536),se=O-J*65536,O=ie+J+65535,J=Math.floor(O/65536),ie=O-J*65536,O=F+J+65535,J=Math.floor(O/65536),F=O-J*65536,O=k+J+65535,J=Math.floor(O/65536),k=O-J*65536,O=y+J+65535,J=Math.floor(O/65536),y=O-J*65536,O=A+J+65535,J=Math.floor(O/65536),A=O-J*65536,O=I+J+65535,J=Math.floor(O/65536),I=O-J*65536,O=P+J+65535,J=Math.floor(O/65536),P=O-J*65536,O=H+J+65535,J=Math.floor(O/65536),H=O-J*65536,O=q+J+65535,J=Math.floor(O/65536),q=O-J*65536,O=j+J+65535,J=Math.floor(O/65536),j=O-J*65536,O=M+J+65535,J=Math.floor(O/65536),M=O-J*65536,O=E+J+65535,J=Math.floor(O/65536),E=O-J*65536,O=L+J+65535,J=Math.floor(O/65536),L=O-J*65536,O=le+J+65535,J=Math.floor(O/65536),le=O-J*65536,Z+=J-1+37*(J-1),J=1,O=Z+J+65535,J=Math.floor(O/65536),Z=O-J*65536,O=se+J+65535,J=Math.floor(O/65536),se=O-J*65536,O=ie+J+65535,J=Math.floor(O/65536),ie=O-J*65536,O=F+J+65535,J=Math.floor(O/65536),F=O-J*65536,O=k+J+65535,J=Math.floor(O/65536),k=O-J*65536,O=y+J+65535,J=Math.floor(O/65536),y=O-J*65536,O=A+J+65535,J=Math.floor(O/65536),A=O-J*65536,O=I+J+65535,J=Math.floor(O/65536),I=O-J*65536,O=P+J+65535,J=Math.floor(O/65536),P=O-J*65536,O=H+J+65535,J=Math.floor(O/65536),H=O-J*65536,O=q+J+65535,J=Math.floor(O/65536),q=O-J*65536,O=j+J+65535,J=Math.floor(O/65536),j=O-J*65536,O=M+J+65535,J=Math.floor(O/65536),M=O-J*65536,O=E+J+65535,J=Math.floor(O/65536),E=O-J*65536,O=L+J+65535,J=Math.floor(O/65536),L=O-J*65536,O=le+J+65535,J=Math.floor(O/65536),le=O-J*65536,Z+=J-1+37*(J-1),U[0]=Z,U[1]=se,U[2]=ie,U[3]=F,U[4]=k,U[5]=y,U[6]=A,U[7]=I,U[8]=P,U[9]=H,U[10]=q,U[11]=j,U[12]=M,U[13]=E,U[14]=L,U[15]=le}function w(U,Y){_(U,Y,Y)}function S(U,Y){const X=a();for(let O=0;O<16;O++)X[O]=Y[O];for(let O=253;O>=0;O--)w(X,X),O!==2&&O!==4&&_(X,X,Y);for(let O=0;O<16;O++)U[O]=X[O]}function T(U,Y){const X=new Uint8Array(32),O=new Float64Array(80),J=a(),Z=a(),se=a(),ie=a(),F=a(),k=a();for(let P=0;P<31;P++)X[P]=U[P];X[31]=U[31]&127|64,X[0]&=248,m(O,Y);for(let P=0;P<16;P++)Z[P]=O[P];J[0]=ie[0]=1;for(let P=254;P>=0;--P){const H=X[P>>>3]>>>(P&7)&1;u(J,Z,H),u(se,ie,H),b(F,J,se),x(J,J,se),b(se,Z,ie),x(Z,Z,ie),w(ie,F),w(k,J),_(J,se,J),_(se,Z,F),b(F,J,se),x(J,J,se),w(Z,J),x(se,ie,k),_(J,se,c),b(J,J,ie),_(se,se,J),_(J,ie,k),_(ie,Z,O),w(Z,F),u(J,Z,H),u(se,ie,H)}for(let P=0;P<16;P++)O[P+16]=J[P],O[P+32]=se[P],O[P+48]=Z[P],O[P+64]=ie[P];const y=O.subarray(32),A=O.subarray(16);S(y,y),_(A,A,y);const I=new Uint8Array(32);return d(I,A),I}t.scalarMult=T;function B(U){return T(U,o)}t.scalarMultBase=B;function C(U){if(U.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const Y=new Uint8Array(U);return{publicKey:B(Y),secretKey:Y}}t.generateKeyPairFromSeed=C;function D(U){const Y=(0,e.randomBytes)(32,U),X=C(Y);return(0,n.wipe)(Y),X}t.generateKeyPair=D;function z(U,Y,X=!1){if(U.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(Y.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const O=T(U,Y);if(X){let J=0;for(let Z=0;Z<O.length;Z++)J|=O[Z];if(J===0)throw new Error("X25519: invalid shared key")}return O}t.sharedKey=z})(x25519);var xchacha20poly1305={},xchacha20={},chacha={};Object.defineProperty(chacha,"__esModule",{value:!0});var binary_1$1=binary,wipe_1$1=wipe$1,ROUNDS$1=20;function core(t,e,n){for(var a=1634760805,o=857760878,c=2036477234,l=1797285236,u=n[3]<<24|n[2]<<16|n[1]<<8|n[0],d=n[7]<<24|n[6]<<16|n[5]<<8|n[4],m=n[11]<<24|n[10]<<16|n[9]<<8|n[8],b=n[15]<<24|n[14]<<16|n[13]<<8|n[12],x=n[19]<<24|n[18]<<16|n[17]<<8|n[16],_=n[23]<<24|n[22]<<16|n[21]<<8|n[20],w=n[27]<<24|n[26]<<16|n[25]<<8|n[24],S=n[31]<<24|n[30]<<16|n[29]<<8|n[28],T=e[3]<<24|e[2]<<16|e[1]<<8|e[0],B=e[7]<<24|e[6]<<16|e[5]<<8|e[4],C=e[11]<<24|e[10]<<16|e[9]<<8|e[8],D=e[15]<<24|e[14]<<16|e[13]<<8|e[12],z=a,U=o,Y=c,X=l,O=u,J=d,Z=m,se=b,ie=x,F=_,k=w,y=S,A=T,I=B,P=C,H=D,q=0;q<ROUNDS$1;q+=2)z=z+O|0,A^=z,A=A>>>32-16|A<<16,ie=ie+A|0,O^=ie,O=O>>>32-12|O<<12,U=U+J|0,I^=U,I=I>>>32-16|I<<16,F=F+I|0,J^=F,J=J>>>32-12|J<<12,Y=Y+Z|0,P^=Y,P=P>>>32-16|P<<16,k=k+P|0,Z^=k,Z=Z>>>32-12|Z<<12,X=X+se|0,H^=X,H=H>>>32-16|H<<16,y=y+H|0,se^=y,se=se>>>32-12|se<<12,Y=Y+Z|0,P^=Y,P=P>>>32-8|P<<8,k=k+P|0,Z^=k,Z=Z>>>32-7|Z<<7,X=X+se|0,H^=X,H=H>>>32-8|H<<8,y=y+H|0,se^=y,se=se>>>32-7|se<<7,U=U+J|0,I^=U,I=I>>>32-8|I<<8,F=F+I|0,J^=F,J=J>>>32-7|J<<7,z=z+O|0,A^=z,A=A>>>32-8|A<<8,ie=ie+A|0,O^=ie,O=O>>>32-7|O<<7,z=z+J|0,H^=z,H=H>>>32-16|H<<16,k=k+H|0,J^=k,J=J>>>32-12|J<<12,U=U+Z|0,A^=U,A=A>>>32-16|A<<16,y=y+A|0,Z^=y,Z=Z>>>32-12|Z<<12,Y=Y+se|0,I^=Y,I=I>>>32-16|I<<16,ie=ie+I|0,se^=ie,se=se>>>32-12|se<<12,X=X+O|0,P^=X,P=P>>>32-16|P<<16,F=F+P|0,O^=F,O=O>>>32-12|O<<12,Y=Y+se|0,I^=Y,I=I>>>32-8|I<<8,ie=ie+I|0,se^=ie,se=se>>>32-7|se<<7,X=X+O|0,P^=X,P=P>>>32-8|P<<8,F=F+P|0,O^=F,O=O>>>32-7|O<<7,U=U+Z|0,A^=U,A=A>>>32-8|A<<8,y=y+A|0,Z^=y,Z=Z>>>32-7|Z<<7,z=z+J|0,H^=z,H=H>>>32-8|H<<8,k=k+H|0,J^=k,J=J>>>32-7|J<<7;binary_1$1.writeUint32LE(z+a|0,t,0),binary_1$1.writeUint32LE(U+o|0,t,4),binary_1$1.writeUint32LE(Y+c|0,t,8),binary_1$1.writeUint32LE(X+l|0,t,12),binary_1$1.writeUint32LE(O+u|0,t,16),binary_1$1.writeUint32LE(J+d|0,t,20),binary_1$1.writeUint32LE(Z+m|0,t,24),binary_1$1.writeUint32LE(se+b|0,t,28),binary_1$1.writeUint32LE(ie+x|0,t,32),binary_1$1.writeUint32LE(F+_|0,t,36),binary_1$1.writeUint32LE(k+w|0,t,40),binary_1$1.writeUint32LE(y+S|0,t,44),binary_1$1.writeUint32LE(A+T|0,t,48),binary_1$1.writeUint32LE(I+B|0,t,52),binary_1$1.writeUint32LE(P+C|0,t,56),binary_1$1.writeUint32LE(H+D|0,t,60)}function streamXOR$1(t,e,n,a,o){if(o===void 0&&(o=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(a.length<n.length)throw new Error("ChaCha: destination is shorter than source");var c,l;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");c=new Uint8Array(16),l=c.length-e.length,c.set(e,l)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");c=e,l=o}for(var u=new Uint8Array(64),d=0;d<n.length;d+=64){core(u,c,t);for(var m=d;m<d+64&&m<n.length;m++)a[m]=n[m]^u[m-d];incrementCounter(c,0,l)}return wipe_1$1.wipe(u),o===0&&wipe_1$1.wipe(c),a}chacha.streamXOR=streamXOR$1;function stream$1(t,e,n,a){return a===void 0&&(a=0),wipe_1$1.wipe(n),streamXOR$1(t,e,n,n,a)}chacha.stream=stream$1;function incrementCounter(t,e,n){for(var a=1;n--;)a=a+(t[e]&255)|0,t[e]=a&255,a>>>=8,e++;if(a>0)throw new Error("ChaCha: counter overflow")}Object.defineProperty(xchacha20,"__esModule",{value:!0});var binary_1=binary,wipe_1=wipe$1,chacha_1=chacha,ROUNDS=20;function streamXOR(t,e,n,a){if(e.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var o=hchacha(t,e.subarray(0,16),new Uint8Array(32)),c=new Uint8Array(12);c.set(e.subarray(16),4);var l=chacha_1.streamXOR(o,c,n,a);return wipe_1.wipe(o),l}xchacha20.streamXOR=streamXOR;function stream(t,e,n){return wipe_1.wipe(n),streamXOR(t,e,n,n)}xchacha20.stream=stream;function hchacha(t,e,n){for(var a=1634760805,o=857760878,c=2036477234,l=1797285236,u=t[3]<<24|t[2]<<16|t[1]<<8|t[0],d=t[7]<<24|t[6]<<16|t[5]<<8|t[4],m=t[11]<<24|t[10]<<16|t[9]<<8|t[8],b=t[15]<<24|t[14]<<16|t[13]<<8|t[12],x=t[19]<<24|t[18]<<16|t[17]<<8|t[16],_=t[23]<<24|t[22]<<16|t[21]<<8|t[20],w=t[27]<<24|t[26]<<16|t[25]<<8|t[24],S=t[31]<<24|t[30]<<16|t[29]<<8|t[28],T=e[3]<<24|e[2]<<16|e[1]<<8|e[0],B=e[7]<<24|e[6]<<16|e[5]<<8|e[4],C=e[11]<<24|e[10]<<16|e[9]<<8|e[8],D=e[15]<<24|e[14]<<16|e[13]<<8|e[12],z=a,U=o,Y=c,X=l,O=u,J=d,Z=m,se=b,ie=x,F=_,k=w,y=S,A=T,I=B,P=C,H=D,q=0;q<ROUNDS;q+=2)z=z+O|0,A^=z,A=A>>>32-16|A<<16,ie=ie+A|0,O^=ie,O=O>>>32-12|O<<12,U=U+J|0,I^=U,I=I>>>32-16|I<<16,F=F+I|0,J^=F,J=J>>>32-12|J<<12,Y=Y+Z|0,P^=Y,P=P>>>32-16|P<<16,k=k+P|0,Z^=k,Z=Z>>>32-12|Z<<12,X=X+se|0,H^=X,H=H>>>32-16|H<<16,y=y+H|0,se^=y,se=se>>>32-12|se<<12,Y=Y+Z|0,P^=Y,P=P>>>32-8|P<<8,k=k+P|0,Z^=k,Z=Z>>>32-7|Z<<7,X=X+se|0,H^=X,H=H>>>32-8|H<<8,y=y+H|0,se^=y,se=se>>>32-7|se<<7,U=U+J|0,I^=U,I=I>>>32-8|I<<8,F=F+I|0,J^=F,J=J>>>32-7|J<<7,z=z+O|0,A^=z,A=A>>>32-8|A<<8,ie=ie+A|0,O^=ie,O=O>>>32-7|O<<7,z=z+J|0,H^=z,H=H>>>32-16|H<<16,k=k+H|0,J^=k,J=J>>>32-12|J<<12,U=U+Z|0,A^=U,A=A>>>32-16|A<<16,y=y+A|0,Z^=y,Z=Z>>>32-12|Z<<12,Y=Y+se|0,I^=Y,I=I>>>32-16|I<<16,ie=ie+I|0,se^=ie,se=se>>>32-12|se<<12,X=X+O|0,P^=X,P=P>>>32-16|P<<16,F=F+P|0,O^=F,O=O>>>32-12|O<<12,Y=Y+se|0,I^=Y,I=I>>>32-8|I<<8,ie=ie+I|0,se^=ie,se=se>>>32-7|se<<7,X=X+O|0,P^=X,P=P>>>32-8|P<<8,F=F+P|0,O^=F,O=O>>>32-7|O<<7,U=U+Z|0,A^=U,A=A>>>32-8|A<<8,y=y+A|0,Z^=y,Z=Z>>>32-7|Z<<7,z=z+J|0,H^=z,H=H>>>32-8|H<<8,k=k+H|0,J^=k,J=J>>>32-7|J<<7;return binary_1.writeUint32LE(z,n,0),binary_1.writeUint32LE(U,n,4),binary_1.writeUint32LE(Y,n,8),binary_1.writeUint32LE(X,n,12),binary_1.writeUint32LE(A,n,16),binary_1.writeUint32LE(I,n,20),binary_1.writeUint32LE(P,n,24),binary_1.writeUint32LE(H,n,28),n}xchacha20.hchacha=hchacha;var chacha20poly1305={},poly1305={},constantTime={};Object.defineProperty(constantTime,"__esModule",{value:!0});function select(t,e,n){return~(t-1)&e|t-1&n}constantTime.select=select;function lessOrEqual(t,e){return(t|0)-(e|0)-1>>>31&1}constantTime.lessOrEqual=lessOrEqual;function compare$1(t,e){if(t.length!==e.length)return 0;for(var n=0,a=0;a<t.length;a++)n|=t[a]^e[a];return 1&n-1>>>8}constantTime.compare=compare$1;function equal$1(t,e){return t.length===0||e.length===0?!1:compare$1(t,e)!==0}constantTime.equal=equal$1;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=constantTime,n=wipe$1;t.DIGEST_LENGTH=16;var a=function(){function l(u){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var d=u[0]|u[1]<<8;this._r[0]=d&8191;var m=u[2]|u[3]<<8;this._r[1]=(d>>>13|m<<3)&8191;var b=u[4]|u[5]<<8;this._r[2]=(m>>>10|b<<6)&7939;var x=u[6]|u[7]<<8;this._r[3]=(b>>>7|x<<9)&8191;var _=u[8]|u[9]<<8;this._r[4]=(x>>>4|_<<12)&255,this._r[5]=_>>>1&8190;var w=u[10]|u[11]<<8;this._r[6]=(_>>>14|w<<2)&8191;var S=u[12]|u[13]<<8;this._r[7]=(w>>>11|S<<5)&8065;var T=u[14]|u[15]<<8;this._r[8]=(S>>>8|T<<8)&8191,this._r[9]=T>>>5&127,this._pad[0]=u[16]|u[17]<<8,this._pad[1]=u[18]|u[19]<<8,this._pad[2]=u[20]|u[21]<<8,this._pad[3]=u[22]|u[23]<<8,this._pad[4]=u[24]|u[25]<<8,this._pad[5]=u[26]|u[27]<<8,this._pad[6]=u[28]|u[29]<<8,this._pad[7]=u[30]|u[31]<<8}return l.prototype._blocks=function(u,d,m){for(var b=this._fin?0:2048,x=this._h[0],_=this._h[1],w=this._h[2],S=this._h[3],T=this._h[4],B=this._h[5],C=this._h[6],D=this._h[7],z=this._h[8],U=this._h[9],Y=this._r[0],X=this._r[1],O=this._r[2],J=this._r[3],Z=this._r[4],se=this._r[5],ie=this._r[6],F=this._r[7],k=this._r[8],y=this._r[9];m>=16;){var A=u[d+0]|u[d+1]<<8;x+=A&8191;var I=u[d+2]|u[d+3]<<8;_+=(A>>>13|I<<3)&8191;var P=u[d+4]|u[d+5]<<8;w+=(I>>>10|P<<6)&8191;var H=u[d+6]|u[d+7]<<8;S+=(P>>>7|H<<9)&8191;var q=u[d+8]|u[d+9]<<8;T+=(H>>>4|q<<12)&8191,B+=q>>>1&8191;var j=u[d+10]|u[d+11]<<8;C+=(q>>>14|j<<2)&8191;var M=u[d+12]|u[d+13]<<8;D+=(j>>>11|M<<5)&8191;var E=u[d+14]|u[d+15]<<8;z+=(M>>>8|E<<8)&8191,U+=E>>>5|b;var L=0,le=L;le+=x*Y,le+=_*(5*y),le+=w*(5*k),le+=S*(5*F),le+=T*(5*ie),L=le>>>13,le&=8191,le+=B*(5*se),le+=C*(5*Z),le+=D*(5*J),le+=z*(5*O),le+=U*(5*X),L+=le>>>13,le&=8191;var Q=L;Q+=x*X,Q+=_*Y,Q+=w*(5*y),Q+=S*(5*k),Q+=T*(5*F),L=Q>>>13,Q&=8191,Q+=B*(5*ie),Q+=C*(5*se),Q+=D*(5*Z),Q+=z*(5*J),Q+=U*(5*O),L+=Q>>>13,Q&=8191;var ce=L;ce+=x*O,ce+=_*X,ce+=w*Y,ce+=S*(5*y),ce+=T*(5*k),L=ce>>>13,ce&=8191,ce+=B*(5*F),ce+=C*(5*ie),ce+=D*(5*se),ce+=z*(5*Z),ce+=U*(5*J),L+=ce>>>13,ce&=8191;var fe=L;fe+=x*J,fe+=_*O,fe+=w*X,fe+=S*Y,fe+=T*(5*y),L=fe>>>13,fe&=8191,fe+=B*(5*k),fe+=C*(5*F),fe+=D*(5*ie),fe+=z*(5*se),fe+=U*(5*Z),L+=fe>>>13,fe&=8191;var oe=L;oe+=x*Z,oe+=_*J,oe+=w*O,oe+=S*X,oe+=T*Y,L=oe>>>13,oe&=8191,oe+=B*(5*y),oe+=C*(5*k),oe+=D*(5*F),oe+=z*(5*ie),oe+=U*(5*se),L+=oe>>>13,oe&=8191;var de=L;de+=x*se,de+=_*Z,de+=w*J,de+=S*O,de+=T*X,L=de>>>13,de&=8191,de+=B*Y,de+=C*(5*y),de+=D*(5*k),de+=z*(5*F),de+=U*(5*ie),L+=de>>>13,de&=8191;var ae=L;ae+=x*ie,ae+=_*se,ae+=w*Z,ae+=S*J,ae+=T*O,L=ae>>>13,ae&=8191,ae+=B*X,ae+=C*Y,ae+=D*(5*y),ae+=z*(5*k),ae+=U*(5*F),L+=ae>>>13,ae&=8191;var he=L;he+=x*F,he+=_*ie,he+=w*se,he+=S*Z,he+=T*J,L=he>>>13,he&=8191,he+=B*O,he+=C*X,he+=D*Y,he+=z*(5*y),he+=U*(5*k),L+=he>>>13,he&=8191;var te=L;te+=x*k,te+=_*F,te+=w*ie,te+=S*se,te+=T*Z,L=te>>>13,te&=8191,te+=B*J,te+=C*O,te+=D*X,te+=z*Y,te+=U*(5*y),L+=te>>>13,te&=8191;var pe=L;pe+=x*y,pe+=_*k,pe+=w*F,pe+=S*ie,pe+=T*se,L=pe>>>13,pe&=8191,pe+=B*Z,pe+=C*J,pe+=D*O,pe+=z*X,pe+=U*Y,L+=pe>>>13,pe&=8191,L=(L<<2)+L|0,L=L+le|0,le=L&8191,L=L>>>13,Q+=L,x=le,_=Q,w=ce,S=fe,T=oe,B=de,C=ae,D=he,z=te,U=pe,d+=16,m-=16}this._h[0]=x,this._h[1]=_,this._h[2]=w,this._h[3]=S,this._h[4]=T,this._h[5]=B,this._h[6]=C,this._h[7]=D,this._h[8]=z,this._h[9]=U},l.prototype.finish=function(u,d){d===void 0&&(d=0);var m=new Uint16Array(10),b,x,_,w;if(this._leftover){for(w=this._leftover,this._buffer[w++]=1;w<16;w++)this._buffer[w]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(b=this._h[1]>>>13,this._h[1]&=8191,w=2;w<10;w++)this._h[w]+=b,b=this._h[w]>>>13,this._h[w]&=8191;for(this._h[0]+=b*5,b=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=b,b=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=b,m[0]=this._h[0]+5,b=m[0]>>>13,m[0]&=8191,w=1;w<10;w++)m[w]=this._h[w]+b,b=m[w]>>>13,m[w]&=8191;for(m[9]-=1<<13,x=(b^1)-1,w=0;w<10;w++)m[w]&=x;for(x=~x,w=0;w<10;w++)this._h[w]=this._h[w]&x|m[w];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,_=this._h[0]+this._pad[0],this._h[0]=_&65535,w=1;w<8;w++)_=(this._h[w]+this._pad[w]|0)+(_>>>16)|0,this._h[w]=_&65535;return u[d+0]=this._h[0]>>>0,u[d+1]=this._h[0]>>>8,u[d+2]=this._h[1]>>>0,u[d+3]=this._h[1]>>>8,u[d+4]=this._h[2]>>>0,u[d+5]=this._h[2]>>>8,u[d+6]=this._h[3]>>>0,u[d+7]=this._h[3]>>>8,u[d+8]=this._h[4]>>>0,u[d+9]=this._h[4]>>>8,u[d+10]=this._h[5]>>>0,u[d+11]=this._h[5]>>>8,u[d+12]=this._h[6]>>>0,u[d+13]=this._h[6]>>>8,u[d+14]=this._h[7]>>>0,u[d+15]=this._h[7]>>>8,this._finished=!0,this},l.prototype.update=function(u){var d=0,m=u.length,b;if(this._leftover){b=16-this._leftover,b>m&&(b=m);for(var x=0;x<b;x++)this._buffer[this._leftover+x]=u[d+x];if(m-=b,d+=b,this._leftover+=b,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(m>=16&&(b=m-m%16,this._blocks(u,d,b),d+=b,m-=b),m){for(var x=0;x<m;x++)this._buffer[this._leftover+x]=u[d+x];this._leftover+=m}return this},l.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var u=new Uint8Array(16);return this.finish(u),u},l.prototype.clean=function(){return n.wipe(this._buffer),n.wipe(this._r),n.wipe(this._h),n.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},l}();t.Poly1305=a;function o(l,u){var d=new a(l);d.update(u);var m=d.digest();return d.clean(),m}t.oneTimeAuth=o;function c(l,u){return l.length!==t.DIGEST_LENGTH||u.length!==t.DIGEST_LENGTH?!1:e.equal(l,u)}t.equal=c})(poly1305);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=chacha,n=poly1305,a=wipe$1,o=binary,c=constantTime;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var l=new Uint8Array(16),u=function(){function d(m){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,m.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(m)}return d.prototype.seal=function(m,b,x,_){if(m.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var w=new Uint8Array(16);w.set(m,w.length-m.length);var S=new Uint8Array(32);e.stream(this._key,w,S,4);var T=b.length+this.tagLength,B;if(_){if(_.length!==T)throw new Error("ChaCha20Poly1305: incorrect destination length");B=_}else B=new Uint8Array(T);return e.streamXOR(this._key,w,b,B,4),this._authenticate(B.subarray(B.length-this.tagLength,B.length),S,B.subarray(0,B.length-this.tagLength),x),a.wipe(w),B},d.prototype.open=function(m,b,x,_){if(m.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(b.length<this.tagLength)return null;var w=new Uint8Array(16);w.set(m,w.length-m.length);var S=new Uint8Array(32);e.stream(this._key,w,S,4);var T=new Uint8Array(this.tagLength);if(this._authenticate(T,S,b.subarray(0,b.length-this.tagLength),x),!c.equal(T,b.subarray(b.length-this.tagLength,b.length)))return null;var B=b.length-this.tagLength,C;if(_){if(_.length!==B)throw new Error("ChaCha20Poly1305: incorrect destination length");C=_}else C=new Uint8Array(B);return e.streamXOR(this._key,w,b.subarray(0,b.length-this.tagLength),C,4),a.wipe(w),C},d.prototype.clean=function(){return a.wipe(this._key),this},d.prototype._authenticate=function(m,b,x,_){var w=new n.Poly1305(b);_&&(w.update(_),_.length%16>0&&w.update(l.subarray(_.length%16))),w.update(x),x.length%16>0&&w.update(l.subarray(x.length%16));var S=new Uint8Array(8);_&&o.writeUint64LE(_.length,S),w.update(S),o.writeUint64LE(x.length,S),w.update(S);for(var T=w.digest(),B=0;B<T.length;B++)m[B]=T[B];w.clean(),a.wipe(T),a.wipe(S)},d}();t.ChaCha20Poly1305=u})(chacha20poly1305);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=xchacha20,n=chacha20poly1305,a=wipe$1;t.KEY_LENGTH=32,t.NONCE_LENGTH=24,t.TAG_LENGTH=16;var o=function(){function c(l){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,l.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(l)}return c.prototype.seal=function(l,u,d,m){if(l.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var b=e.hchacha(this._key,l.subarray(0,16),new Uint8Array(32)),x=new Uint8Array(12);x.set(l.subarray(16),4);var _=new n.ChaCha20Poly1305(b),w=_.seal(x,u,d,m);return a.wipe(b),a.wipe(x),_.clean(),w},c.prototype.open=function(l,u,d,m){if(l.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(u.length<this.tagLength)return null;var b=e.hchacha(this._key,l.subarray(0,16),new Uint8Array(32)),x=new Uint8Array(12);x.set(l.subarray(16),4);var _=new n.ChaCha20Poly1305(b),w=_.open(x,u,d,m);return a.wipe(b),a.wipe(x),_.clean(),w},c.prototype.clean=function(){return a.wipe(this._key),this},c}();t.XChaCha20Poly1305=o})(xchacha20poly1305);function bytesToBase64url(t){return toString$6(t,"base64url")}function base64ToBytes(t){const e=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return fromString$3(e,"base64url")}function base58ToBytes(t){return fromString$3(t,"base58btc")}function bytesToBase58(t){return toString$6(t,"base58btc")}function hexToBytes(t){const e=t.startsWith("0x")?t.substring(2):t;return fromString$3(e.toLowerCase(),"base16")}function encodeBase64url(t){return bytesToBase64url(fromString$3(t))}function decodeBase64url(t){return toString$6(base64ToBytes(t))}function bytesToHex(t){return toString$6(t,"base16")}function stringToBytes$1(t){return fromString$3(t)}function sha256$1(t){const e=typeof t=="string"?fromString$3(t):t;return sha256$2.hash(e)}function keccak(t){return new Uint8Array(sha3.keccak_256.arrayBuffer(t))}function toEthereumAddress(t){const e=fromString$3(t.slice(2),"base16");return`0x${toString$6(keccak(e).slice(-20),"base16")}`}function writeUint32BE(t,e=new Uint8Array(4)){const n=fromString$3(t.toString(),"base10");return e.set(n,4-n.length),e}const lengthAndInput=t=>concat$1([writeUint32BE(t.length),t]);function concatKDF(t,e,n,a,o){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const c=concat$1([lengthAndInput(fromString$3(n)),lengthAndInput(typeof a>"u"?new Uint8Array(0):a),lengthAndInput(typeof o>"u"?new Uint8Array(0):o),writeUint32BE(e)]),l=1;return sha256$2.hash(concat$1([writeUint32BE(l),t,c]))}new elliptic.ec("secp256k1");new elliptic.ec("p256");const zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function rotl(t,e){return t<<e|t>>>32-e}function fn1(t,e,n,a,o,c,l,u){return rotl(t+(e^n^a)+c+l|0,u)+o|0}function fn2(t,e,n,a,o,c,l,u){return rotl(t+(e&n|~e&a)+c+l|0,u)+o|0}function fn3(t,e,n,a,o,c,l,u){return rotl(t+((e|~n)^a)+c+l|0,u)+o|0}function fn4(t,e,n,a,o,c,l,u){return rotl(t+(e&a|n&~a)+c+l|0,u)+o|0}function fn5(t,e,n,a,o,c,l,u){return rotl(t+(e^(n|~a))+c+l|0,u)+o|0}class Ripemd160{constructor(e=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=n=>{if(this._finalized)throw new Error("Digest already called");const a=this._block;let o=0;for(;this._blockOffset+n.length-o>=this._blockSize;){for(let c=this._blockOffset;c<this._blockSize;)a[c++]=n[o++];this._update(),this._blockOffset=0}for(;o<n.length;)a[this._blockOffset++]=n[o++];for(let c=0,l=n.length*8;l>0;++c)this._length[c]+=l,l=this._length[c]/4294967296|0,l>0&&(this._length[c]-=4294967296*l);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;const n=this._digest();this._block.fill(0),this._blockOffset=0;for(let a=0;a<4;++a)this._length[a]=0;return n},this._update=()=>{const n=new Array(16),a=new DataView(this._block.buffer);for(let T=0;T<16;++T)n[T]=n[T]=a.getInt32(T*4,!0);let o=this._a|0,c=this._b|0,l=this._c|0,u=this._d|0,d=this._e|0,m=this._a|0,b=this._b|0,x=this._c|0,_=this._d|0,w=this._e|0;for(let T=0;T<80;T+=1){let B,C;T<16?(B=fn1(o,c,l,u,d,n[zl[T]],hl[0],sl[T]),C=fn5(m,b,x,_,w,n[zr[T]],hr[0],sr[T])):T<32?(B=fn2(o,c,l,u,d,n[zl[T]],hl[1],sl[T]),C=fn4(m,b,x,_,w,n[zr[T]],hr[1],sr[T])):T<48?(B=fn3(o,c,l,u,d,n[zl[T]],hl[2],sl[T]),C=fn3(m,b,x,_,w,n[zr[T]],hr[2],sr[T])):T<64?(B=fn4(o,c,l,u,d,n[zl[T]],hl[3],sl[T]),C=fn2(m,b,x,_,w,n[zr[T]],hr[3],sr[T])):(B=fn5(o,c,l,u,d,n[zl[T]],hl[4],sl[T]),C=fn1(m,b,x,_,w,n[zr[T]],hr[4],sr[T])),o=d,d=u,u=rotl(l,10),l=c,c=B,m=w,w=_,_=rotl(x,10),x=b,b=C}const S=this._b+l+_|0;this._b=this._c+u+w|0,this._c=this._d+d+m|0,this._d=this._e+o+b|0,this._e=this._a+c+x|0,this._a=S},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);const n=new DataView(this._block.buffer);n.setUint32(56,this._length[0],!0),n.setUint32(60,this._length[1],!0),this._block=new Uint8Array(n.buffer),this._update();const a=new DataView(new Uint8Array(20).buffer);return a.setInt32(0,this._a,!0),a.setInt32(4,this._b,!0),a.setInt32(8,this._c,!0),a.setInt32(12,this._d,!0),a.setInt32(16,this._e,!0),new Uint8Array(a.buffer)},this._block=new Uint8Array(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}}const publicKeyToAddress$1=(t,e)=>{const n=toString$6(base58ToBytes(e).slice(0,1),"hex"),a=fromString$3(t,"hex"),o=new Ripemd160().update(sha256$1(a)).digest(),c=n+toString$6(o,"hex"),l=sha256$1(fromString$3(c,"hex")),u=sha256$1(l),d=toString$6(u,"hex").substring(0,8),m=c+d;return bytesToBase58(fromString$3(m,"hex"))},EC$2=elliptic.ec,publicKeyToAddress=(t,e)=>{const a=new EC$2("secp256k1").keyFromPublic(t,"hex").getPublic().encode("hex",!0),o=fromString$3(a,"hex"),c=new Ripemd160().update(sha256$1(o)).digest(),l=bech32.toWords(c);return bech32.encode(e,l).replace(e,"")},verifyBlockchainAccountId=(t,e)=>{if(e){const n=e.split(":");switch(n[0]){case"bip122":n[n.length-1]=publicKeyToAddress$1(t,n[n.length-1]);break;case"cosmos":n[n.length-1]=publicKeyToAddress(t,n[1]);break;case"eip155":n[n.length-1]=toEthereumAddress(t);break;default:return!1}return n.join(":").toLowerCase()===e.toLowerCase()}return!1},secp256k1=new elliptic.ec("secp256k1"),secp256r1=new elliptic.ec("p256");function toSignatureObject(t,e=!1){const n=base64ToBytes(t);if(n.length!==(e?65:64))throw new Error("wrong signature length");const a=bytesToHex(n.slice(0,32)),o=bytesToHex(n.slice(32,64)),c={r:a,s:o};return e&&(c.recoveryParam=n[64]),c}function extractPublicKeyBytes(t){if(t.publicKeyBase58)return base58ToBytes(t.publicKeyBase58);if(t.publicKeyBase64)return base64ToBytes(t.publicKeyBase64);if(t.publicKeyHex)return hexToBytes(t.publicKeyHex);if(t.publicKeyJwk&&t.publicKeyJwk.crv==="secp256k1"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return hexToBytes(secp256k1.keyFromPublic({x:bytesToHex(base64ToBytes(t.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.crv==="P-256"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return hexToBytes(secp256r1.keyFromPublic({x:bytesToHex(base64ToBytes(t.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.kty==="OKP"&&t.publicKeyJwk.crv==="Ed25519"&&t.publicKeyJwk.x)return base64ToBytes(t.publicKeyJwk.x);if(t.publicKeyMultibase){const{base16:e,base58btc:n,base64:a,base64url:o}=bases$1;return e.decoder.or(n.decoder.or(a.decoder.or(o.decoder))).decode(t.publicKeyMultibase)}return new Uint8Array}function verifyES256(t,e,n){const a=sha256$1(t),o=toSignatureObject(e),l=n.filter(({ethereumAddress:u,blockchainAccountId:d})=>typeof u>"u"&&typeof d>"u").find(u=>{try{const d=extractPublicKeyBytes(u);return secp256r1.keyFromPublic(d).verify(a,o)}catch{return!1}});if(!l)throw new Error("invalid_signature: Signature invalid for JWT");return l}function verifyES256K(t,e,n){const a=sha256$1(t),o=toSignatureObject(e),c=n.filter(({ethereumAddress:d,blockchainAccountId:m})=>typeof d>"u"&&typeof m>"u"),l=n.filter(({ethereumAddress:d,blockchainAccountId:m})=>typeof d<"u"||typeof m<"u");let u=c.find(d=>{try{const m=extractPublicKeyBytes(d);return secp256k1.keyFromPublic(m).verify(a,o)}catch{return!1}});if(!u&&l.length>0&&(u=verifyRecoverableES256K(t,e,l)),!u)throw new Error("invalid_signature: Signature invalid for JWT");return u}function verifyRecoverableES256K(t,e,n){let a;if(e.length>86)a=[toSignatureObject(e,!0)];else{const l=toSignatureObject(e,!1);a=[{...l,recoveryParam:0},{...l,recoveryParam:1}]}const o=l=>{const u=sha256$1(t),d=secp256k1.recoverPubKey(u,l,l.recoveryParam),m=d.encode("hex"),b=d.encode("hex",!0),x=toEthereumAddress(m).toLowerCase();return n.find(w=>{var S,T,B;const C=bytesToHex(extractPublicKeyBytes(w));return C===m||C===b||((S=w.ethereumAddress)==null?void 0:S.toLowerCase())===x||((T=w.blockchainAccountId)==null||(B=T.split("@eip155"))==null?void 0:B[0].toLowerCase())===x||verifyBlockchainAccountId(m,w.blockchainAccountId)})},c=a.map(o).filter(l=>typeof l<"u");if(c.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return c[0]}function verifyEd25519(t,e,n){const a=stringToBytes$1(t),o=base64ToBytes(e),c=n.find(l=>ed25519.verify(extractPublicKeyBytes(l),a,o));if(!c)throw new Error("invalid_signature: Signature invalid for JWT");return c}const algorithms={ES256:verifyES256,ES256K:verifyES256K,"ES256K-R":verifyRecoverableES256K,Ed25519:verifyEd25519,EdDSA:verifyEd25519};function VerifierAlgorithm(t){const e=algorithms[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}VerifierAlgorithm.toSignatureObject=toSignatureObject;function decodeJWS(t){const e=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(e)return{header:JSON.parse(decodeBase64url(e[1])),payload:e[2],signature:e[3],data:`${e[1]}.${e[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function verifyJWSDecoded({header:t,data:e,signature:n},a){return Array.isArray(a)||(a=[a]),VerifierAlgorithm(t.alg)(e,n,a)}function verifyJWS(t,e){const n=decodeJWS(t);return verifyJWSDecoded(n,e)}const _iteratorSymbol=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function _settle(t,e,n){if(!t.s){if(n instanceof _Pact)if(n.s)e&1&&(e=n.s),n=n.v;else{n.o=_settle.bind(null,t,e);return}if(n&&n.then){n.then(_settle.bind(null,t,e),_settle.bind(null,t,2));return}t.s=e,t.v=n;const a=t.o;a&&a(t)}}const _Pact=function(){function t(){}return t.prototype.then=function(e,n){const a=new t,o=this.s;if(o){const c=o&1?e:n;if(c){try{_settle(a,1,c(this.v))}catch(l){_settle(a,2,l)}return a}else return this}return this.o=function(c){try{const l=c.v;c.s&1?_settle(a,1,e?e(l):l):n?_settle(a,1,n(l)):_settle(a,2,l)}catch(l){_settle(a,2,l)}},a},t}();function _isSettledPact(t){return t instanceof _Pact&&t.s&1}function _forTo(t,e,n){var a=-1,o,c;function l(u){try{for(;++a<t.length&&(!n||!n());)if(u=e(a),u&&u.then)if(_isSettledPact(u))u=u.v;else{u.then(l,c||(c=_settle.bind(null,o=new _Pact,2)));return}o?_settle(o,1,u):o=u}catch(d){_settle(o||(o=new _Pact),2,d)}}return l(),o}function _forOf(t,e,n){if(typeof t[_iteratorSymbol]=="function"){let b=function(x){try{for(;!(o=a.next()).done&&(!n||!n());)if(x=e(o.value),x&&x.then)if(_isSettledPact(x))x=x.v;else{x.then(b,l||(l=_settle.bind(null,c=new _Pact,2)));return}c?_settle(c,1,x):c=x}catch(_){_settle(c||(c=new _Pact),2,_)}};var a=t[_iteratorSymbol](),o,c,l;if(b(),a.return){var u=function(x){try{o.done||a.return()}catch{}return x};if(c&&c.then)return c.then(u,function(x){throw u(x)});u()}return c}if(!("length"in t))throw new TypeError("Object is not iterable");for(var d=[],m=0;m<t.length;m++)d.push(t[m]);return _forTo(d,function(b){return e(d[b])},n)}function encodeJWE({ciphertext:t,tag:e,iv:n,protectedHeader:a,recipient:o},c){const l={protected:a,iv:bytesToBase64url(n),ciphertext:bytesToBase64url(t),tag:bytesToBase64url(e)};return c&&(l.aad=bytesToBase64url(c)),o&&(l.recipients=[o]),l}const createJWE=function(t,e,n={},a){try{if(e[0].alg==="dir"){if(e.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(e[0].encrypt(t,n,a)).then(function(o){return encodeJWE(o,a)})}else{const o=e[0].enc;if(!e.reduce((d,m)=>d&&m.enc===o,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let c,l;const u=_forOf(e,function(d){const m=function(){return c?Promise.resolve(d.encryptCek==null?void 0:d.encryptCek(c)).then(function(b){if(b){var x,_;(x=l)==null||(_=x.recipients)==null||_.push(b)}}):Promise.resolve(d.encrypt(t,n,a)).then(function(b){c=b.cek,l=encodeJWE(b,a)})}();if(m&&m.then)return m.then(function(){})});return Promise.resolve(u&&u.then?u.then(function(){return l}):l)}}catch(o){return Promise.reject(o)}},resolveX25519Encrypters=function(t,e){try{const n=function(o,c=[]){try{return Promise.resolve(e.resolve(o)).then(function({didResolutionMetadata:l,didDocument:u}){function d(){var x,_;const w=(x=u.keyAgreement)==null||(_=x.map(T=>typeof T=="string"?[...u.publicKey||[],...u.verificationMethod||[]].find(B=>B.id===T):T))==null?void 0:_.filter(T=>typeof T<"u"),S=w?.filter(T=>T.type==="X25519KeyAgreementKey2019"&&Boolean(T.publicKeyBase58))||[];if(!S.length&&!m.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);return S.map(T=>x25519Encrypter(base58ToBytes(T.publicKeyBase58),T.id)).concat(...m)}if(c.push(o),l!=null&&l.error||u==null)throw new Error(`resolver_error: Could not resolve ${o}: ${l.error}, ${l.message}`);let m=[];if(!u.controller&&!u.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);const b=function(){if(u.controller){let x=Array.isArray(u.controller)?u.controller:[u.controller];x=x.filter(w=>!c.includes(w));const _=x.map(w=>n(w,c).catch(()=>[]));return Promise.resolve(Promise.all(_)).then(function(w){m=[].concat(...w)})}}();return b&&b.then?b.then(d):d(b)})}catch(l){return Promise.reject(l)}},a=t.map(o=>n(o));return Promise.resolve(Promise.all(a)).then(function(o){return[].concat(...o)})}catch(n){return Promise.reject(n)}};function xc20pEncrypter(t){const e=new xchacha20poly1305.XChaCha20Poly1305(t);return(n,a)=>{const o=random.randomBytes(e.nonceLength),c=e.seal(o,n,a);return{ciphertext:c.subarray(0,c.length-e.tagLength),tag:c.subarray(c.length-e.tagLength),iv:o}}}function xc20pDirEncrypter(t){const e=function(c,l={},u){try{const d=encodeBase64url(JSON.stringify(Object.assign({alg:o},l,{enc:a}))),m=fromString$3(u?`${d}.${bytesToBase64url(u)}`:d);return Promise.resolve({...n(c,m),protectedHeader:d})}catch(d){return Promise.reject(d)}},n=xc20pEncrypter(t),a="XC20P",o="dir";return{alg:o,enc:a,encrypt:e}}function x25519Encrypter(t,e){const n=function(u,d={},m){try{Object.assign(d,{alg:void 0});const b=random.randomBytes(32);return Promise.resolve(xc20pDirEncrypter(b).encrypt(u,d,m)).then(function(x){return Promise.resolve(a(b)).then(function(_){return{...x,recipient:_,cek:b}})})}catch(b){return Promise.reject(b)}},a=function(u){try{const d=x25519.generateKeyPair(),m=x25519.sharedKey(d.secretKey,t),b=concatKDF(m,c,o),x=xc20pEncrypter(b)(u),_={encrypted_key:bytesToBase64url(x.ciphertext),header:{alg:o,iv:bytesToBase64url(x.iv),tag:bytesToBase64url(x.tag),epk:{kty:"OKP",crv:l,x:bytesToBase64url(d.publicKey)}}};return e&&(_.header.kid=e),Promise.resolve(_)}catch(d){return Promise.reject(d)}},o="ECDH-ES+XC20PKW",l="X25519";return{alg:o,enc:"XC20P",encrypt:n,encryptCek:a}}const readonly=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),links=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(const[n,a]of Object.entries(t)){const o=[...e,n];if(a!=null&&typeof a=="object")if(Array.isArray(a))for(const[c,l]of a.entries()){const u=[...o,c],d=CID$1.asCID(l);d?yield[u.join("/"),d]:typeof l=="object"&&(yield*links(l,u))}else{const c=CID$1.asCID(a);c?yield[o.join("/"),c]:yield*links(a,o)}}},tree=function*(t,e){if(t!=null)for(const[n,a]of Object.entries(t)){const o=[...e,n];if(yield o.join("/"),a!=null&&!(a instanceof Uint8Array)&&typeof a=="object"&&!CID$1.asCID(a))if(Array.isArray(a))for(const[c,l]of a.entries()){const u=[...o,c];yield u.join("/"),typeof l=="object"&&!CID$1.asCID(l)&&(yield*tree(l,u))}else yield*tree(a,o)}},get=(t,e)=>{let n=t;for(const[a,o]of e.entries()){if(n=n[o],n==null)throw new Error(`Object has no property at ${e.slice(0,a+1).map(l=>`[${JSON.stringify(l)}]`).join("")}`);const c=CID$1.asCID(n);if(c)return{value:c,remaining:e.slice(a+1).join("/")}}return{value:n}};class Block{constructor({cid:e,bytes:n,value:a}){if(!e||!n||typeof a>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=n,this.value=a,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(e="/"){return get(this.value,e.split("/").filter(Boolean))}}const encode$e=async({value:t,codec:e,hasher:n})=>{if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!n)throw new Error("Missing required argument: codec or hasher");const a=e.encode(t),o=await n.digest(a),c=CID$1.create(1,e.code,o);return new Block({value:t,bytes:a,cid:c})},decode$d=async({bytes:t,codec:e,hasher:n})=>{if(!t)throw new Error('Missing required argument "bytes"');if(!e||!n)throw new Error("Missing required argument: codec or hasher");const a=e.decode(t),o=await n.digest(t),c=CID$1.create(1,e.code,o);return new Block({value:a,bytes:t,cid:c})},CID_CBOR_TAG$1=42;function cidEncoder$1(t){if(t.asCID!==t)return null;const e=CID$1.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG$1),new Token(Type.bytes,n)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder$1(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(t.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG$1]=cidDecoder$1;const name$1="dag-cbor",code$3=113,encode$d=t=>encode$p(t,encodeOptions$1),decode$c=t=>decode$o(t,decodeOptions$1),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,code:code$3,decode:decode$c,encode:encode$d,name:name$1},Symbol.toStringTag,{value:"Module"})),ENC_BLOCK_SIZE=24;async function encodePayload(t){const e=await encode$e({value:t,codec:dagCBOR,hasher:sha256$3});return{cid:e.cid,linkedBlock:e.bytes}}function pad(t,e=ENC_BLOCK_SIZE){const n=(e-t.length%e)%e,a=new Uint8Array(t.length+n);return a.set(t,0),a}async function encodeIdentityCID(t){return(await encode$e({value:t,codec:dagCBOR,hasher:identity$3})).cid}function decodeIdentityCID(t){if(t=CID$1.asCID(t),t.code!==code$3)throw new Error("CID codec must be dag-cbor");if(t.multihash.code!==identity$3.code)throw new Error("CID must use identity multihash");return decode$c(t.multihash.digest)}async function prepareCleartext(t,e){return pad((await encodeIdentityCID(t)).bytes,e)}function decodeCleartext(t){return decodeIdentityCID(CID$1.decodeFirst(t)[0])}const abortedReasonSymbol=Symbol("aborted");function abortable(t,e){if(e.aborted)return Promise.reject(abortedReasonSymbol);let n;const a=new Promise((o,c)=>{n=c});return e.addEventListener("abort",()=>{n(abortedReasonSymbol)}),Promise.race([t,a])}let nanoid$1=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const ABORT_REQUEST_METHOD="utils_abort_request";var ERROR_CODE;(function(t){t[t.PARSE_ERROR=-32700]="PARSE_ERROR",t[t.INVALID_REQUEST=-32600]="INVALID_REQUEST",t[t.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",t[t.INVALID_PARAMS=-32602]="INVALID_PARAMS",t[t.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(ERROR_CODE||(ERROR_CODE={}));const ERROR_MESSAGE={[ERROR_CODE.PARSE_ERROR]:"Parse error",[ERROR_CODE.INVALID_REQUEST]:"Invalid request",[ERROR_CODE.METHOD_NOT_FOUND]:"Method not found",[ERROR_CODE.INVALID_PARAMS]:"Invalid params",[ERROR_CODE.INTERNAL_ERROR]:"Internal error"};function isServerError(t){return-32e3>=t&&t>=-32099}function getErrorMessage(t){return ERROR_MESSAGE[t.toString()]??(isServerError(t)?"Server error":"Application error")}class RPCError extends Error{static fromObject(e){return new RPCError(e.code,e.message,e.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(e,n,a){super(),Object.setPrototypeOf(this,RPCError.prototype),this.code=e,this.data=a,this.message=n??getErrorMessage(e)}}function createErrorFactory(t){const e=ERROR_MESSAGE[t];return function(a){return new RPCError(t,e,a)}}createErrorFactory(ERROR_CODE.PARSE_ERROR);createErrorFactory(ERROR_CODE.INVALID_REQUEST);createErrorFactory(ERROR_CODE.METHOD_NOT_FOUND);createErrorFactory(ERROR_CODE.INVALID_PARAMS);createErrorFactory(ERROR_CODE.INTERNAL_ERROR);function _checkPrivateRedeclaration(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classApplyDescriptorGet(t,e){return e.get?e.get.call(t):e.value}function _classApplyDescriptorSet(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function _classExtractFieldDescriptor(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function _classPrivateFieldGet(t,e){var n=_classExtractFieldDescriptor(t,e,"get");return _classApplyDescriptorGet(t,n)}function _classPrivateFieldInit(t,e,n){_checkPrivateRedeclaration(t,e),e.set(t,n)}function _classPrivateFieldSet(t,e,n){var a=_classExtractFieldDescriptor(t,e,"set");return _classApplyDescriptorSet(t,a,n),n}var _connection=new WeakMap;class RPCClient{get connection(){return _classPrivateFieldGet(this,_connection)}createID(){return nanoid$1()}request(e,n=void 0,a={}){const{signal:o}=a;if(o?.aborted)return Promise.reject(abortedReasonSymbol);const c=this.createID(),l=_classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",id:c,method:e,params:n}).then(u=>{if(u==null)throw new Error("Missing response");if(u.error!=null)throw RPCError.fromObject(u.error);return u.result});return o==null?l:(o.addEventListener("abort",()=>{this.notify(ABORT_REQUEST_METHOD,{id:c})}),abortable(l,o))}async notify(e,n=void 0){await _classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",method:e,params:n})}constructor(e){_classPrivateFieldInit(this,_connection,{writable:!0,value:void 0}),_classPrivateFieldSet(this,_connection,e)}}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){return hasRequiredIdentifiers||(hasRequiredIdentifiers=1,identifiers={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}),identifiers}var utilities={},style,hasRequiredStyle;function requireStyle(){return hasRequiredStyle||(hasRequiredStyle=1,style={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}),style}var converter={},transformers={},hasRequiredTransformers;function requireTransformers(){if(hasRequiredTransformers)return transformers;hasRequiredTransformers=1;const t=commonjsGlobal,e=4294967292,n=4294967293,a=4294967294,o=4294967295,c=[0,1,3,7,15,31,63,127,255,511,1023],l=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),d=[];u.forEach(x=>{d.push(x.charCodeAt(0))}),transformers.utf8={encode(x){const _=[];return x.forEach(w=>{if(w>=0&&w<=127)_.push(w);else if(w<=2047)_.push(192+(w>>6&c[5])),_.push(128+(w&c[6]));else if(w<55296||w>57343&&w<=65535)_.push(224+(w>>12&c[4])),_.push(128+(w>>6&c[6])),_.push(128+(w&c[6]));else if(w>=65536&&w<=1114111){const S=w>>16&c[5];_.push(240+(S>>2)),_.push(128+((S&c[2])<<4)+(w>>12&c[4])),_.push(128+(w>>6&c[6])),_.push(128+(w&c[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${w}`)}),Buffer$x.from(_)},decode(x,_){function w(Z,se){if((se&192)!==128)return n;const ie=((Z&c[5])<<6)+(se&c[6]);return ie<128?e:ie}function S(Z,se,ie){if((ie&192)!==128||(se&192)!==128)return n;const F=((Z&c[4])<<12)+((se&c[6])<<6)+(ie&c[6]);return F<2048?e:F>=55296&&F<=57343?a:F}function T(Z,se,ie,F){if((F&192)!==128||(ie&192)!==128||(se&192)!==128)return n;const k=(((Z&c[3])<<2)+(se>>4&c[2])<<16)+((se&c[4])<<12)+((ie&c[6])<<6)+(F&c[6]);return k<65536?e:k>1114111?a:k}let B,C,D,z,U,Y;const X=x.length;let O=_?3:0;const J=[];for(;O<X;){C=x[O],B=o;const Z=!0;for(;Z;){if(C>=0&&C<=127){B=C,Y=1;break}if(D=O+1,D<X&&C>=194&&C<=223){B=w(C,x[D]),Y=2;break}if(z=O+2,z<X&&C>=224&&C<=239){B=S(C,x[D],x[z]),Y=3;break}if(U=O+3,U<X&&C>=240&&C<=244){B=T(C,x[D],x[z],x[U]),Y=4;break}break}if(B>1114111){const se=`byte[${O}]`;throw B===o?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${se}`):B===n?new RangeError(`utf8.decode: illegal trailing byte found at: ${se}`):B===a?new RangeError(`utf8.decode: code point out of range found at: ${se}`):B===e?new RangeError(`utf8.decode: non-shortest form found at: ${se}`):new RangeError(`utf8.decode: unrecognized error found at: ${se}`)}J.push(B),O+=Y}return J}},transformers.utf16be={encode(x){const _=[];let w,S,T;for(let B=0;B<x.length;B+=1)if(w=x[B],w>=0&&w<=55295||w>=57344&&w<=65535)_.push(w>>8&c[8]),_.push(w&c[8]);else if(w>=65536&&w<=1114111)T=w-65536,S=55296+(T>>10),T=56320+(T&c[10]),_.push(S>>8&c[8]),_.push(S&c[8]),_.push(T>>8&c[8]),_.push(T&c[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${B}]: ${w}`);return Buffer$x.from(_)},decode(x,_){if(x.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${x.length}`);const w=[],S=x.length;let T=_?2:0,B=0,C,D,z,U,Y,X;for(;T<S;){for(;;){if(z=T+1,z<S){if(Y=(x[T]<<8)+x[z],Y<55296||Y>57343){C=Y,D=2;break}if(U=T+3,U<S&&(X=(x[T+2]<<8)+x[U],Y<=56319&&X>=56320&&X<=57343)){C=65536+(Y-55296<<10)+(X-56320),D=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${T}]`)}w[B++]=C,T+=D}return w}},transformers.utf16le={encode(x){const _=[];let w,S,T;for(let B=0;B<x.length;B+=1)if(w=x[B],w>=0&&w<=55295||w>=57344&&w<=65535)_.push(w&c[8]),_.push(w>>8&c[8]);else if(w>=65536&&w<=1114111)T=w-65536,S=55296+(T>>10),T=56320+(T&c[10]),_.push(S&c[8]),_.push(S>>8&c[8]),_.push(T&c[8]),_.push(T>>8&c[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${B}]: ${w}`);return Buffer$x.from(_)},decode(x,_){if(x.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${x.length}`);const w=[],S=x.length;let T=_?2:0,B=0,C,D,z,U,Y,X;for(;T<S;){for(;;){if(z=T+1,z<S){if(Y=(x[z]<<8)+x[T],Y<55296||Y>57343){C=Y,D=2;break}if(U=T+3,U<S&&(X=(x[U]<<8)+x[T+2],Y<=56319&&X>=56320&&X<=57343)){C=65536+(Y-55296<<10)+(X-56320),D=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${T}]`)}w[B++]=C,T+=D}return w}},transformers.utf32be={encode(x){const _=Buffer$x.alloc(x.length*4);let w=0;return x.forEach(S=>{if(S>=55296&&S<=57343||S>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${w/4}]: ${S}`);_[w++]=S>>24&c[8],_[w++]=S>>16&c[8],_[w++]=S>>8&c[8],_[w++]=S&c[8]}),_},decode(x,_){if(x.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${x.length}`);const w=[];let S=_?4:0;for(;S<x.length;S+=4){const T=(x[S]<<24)+(x[S+1]<<16)+(x[S+2]<<8)+x[S+3];if(T>=55296&&T<=57343||T>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${S/4}]: ${T}`);w.push(T)}return w}},transformers.utf32le={encode(x){const _=Buffer$x.alloc(x.length*4);let w=0;return x.forEach(S=>{if(S>=55296&&S<=57343||S>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${w/4}]: ${S}`);_[w++]=S&c[8],_[w++]=S>>8&c[8],_[w++]=S>>16&c[8],_[w++]=S>>24&c[8]}),_},decode(x,_){if(x.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${x.length}`);const w=[];let S=_?4:0;for(;S<x.length;S+=4){const T=(x[S+3]<<24)+(x[S+2]<<16)+(x[S+1]<<8)+x[S];if(T>=55296&&T<=57343||T>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${S/4}]: ${T}`);w.push(T)}return w}},transformers.uint7={encode(x){const _=Buffer$x.alloc(x.length);for(let w=0;w<x.length;w+=1){if(x[w]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${w}]: ${x[w]}`);_[w]=x[w]}return _},decode(x){const _=[];for(let w=0;w<x.length;w+=1){if(x[w]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${w}]: ${x[w]}`);_[w]=x[w]}return _}},transformers.uint8={encode(x){const _=Buffer$x.alloc(x.length);for(let w=0;w<x.length;w+=1){if(x[w]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${w}]: ${x[w]}`);_[w]=x[w]}return _},decode(x){const _=[];for(let w=0;w<x.length;w+=1)_[w]=x[w];return _}},transformers.uint16be={encode(x){const _=Buffer$x.alloc(x.length*2);let w=0;return x.forEach(S=>{if(S>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${w/2}]: ${S}`);_[w++]=S>>8&c[8],_[w++]=S&c[8]}),_},decode(x){if(x.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${x.length}`);const _=[];for(let w=0;w<x.length;w+=2)_.push((x[w]<<8)+x[w+1]);return _}},transformers.uint16le={encode(x){const _=Buffer$x.alloc(x.length*2);let w=0;return x.forEach(S=>{if(S>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${w/2}]: ${S}`);_[w++]=S&c[8],_[w++]=S>>8&c[8]}),_},decode(x){if(x.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${x.length}`);const _=[];for(let w=0;w<x.length;w+=2)_.push((x[w+1]<<8)+x[w]);return _}},transformers.uint32be={encode(x){const _=Buffer$x.alloc(x.length*4);let w=0;return x.forEach(S=>{_[w++]=S>>24&c[8],_[w++]=S>>16&c[8],_[w++]=S>>8&c[8],_[w++]=S&c[8]}),_},decode(x){if(x.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${x.length}`);const _=[];for(let w=0;w<x.length;w+=4)_.push((x[w]<<24)+(x[w+1]<<16)+(x[w+2]<<8)+x[w+3]);return _}},transformers.uint32le={encode(x){const _=Buffer$x.alloc(x.length*4);let w=0;return x.forEach(S=>{_[w++]=S&c[8],_[w++]=S>>8&c[8],_[w++]=S>>16&c[8],_[w++]=S>>24&c[8]}),_},decode(x){if(x.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${x.length}`);const _=[];for(let w=0;w<x.length;w+=4)_.push((x[w+3]<<24)+(x[w+2]<<16)+(x[w+1]<<8)+x[w]);return _}},transformers.string={encode(x){return t.utf16le.encode(x).toString("utf16le")},decode(x){return t.utf16le.decode(Buffer$x.from(x,"utf16le"),0)}},transformers.escaped={encode(x){const _=[];for(let w=0;w<x.length;w+=1){const S=x[w];if(S===96)_.push(S),_.push(S);else if(S===10)_.push(S);else if(S>=32&&S<=126)_.push(S);else{let T="";if(S>=0&&S<=31)T+=`\`x${l[S]}`;else if(S>=127&&S<=255)T+=`\`x${l[S]}`;else if(S>=256&&S<=65535)T+=`\`u${l[S>>8&c[8]]}${l[S&c[8]]}`;else if(S>=65536&&S<=4294967295){T+="`u{";const C=S>>24&c[8];C>0&&(T+=l[C]),T+=`${l[S>>16&c[8]]+l[S>>8&c[8]]+l[S&c[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");Buffer$x.from(T).forEach(C=>{_.push(C)})}}return Buffer$x.from(_)},decode(x){function _(X){return X>=48&&X<=57||X>=65&&X<=70||X>=97&&X<=102}function w(X,O,J){const Z={char:null,nexti:X+2,error:!0};if(X+1<O&&_(J[X])&&_(J[X+1])){const se=String.fromCodePoint(J[X],J[X+1]);Z.char=parseInt(se,16),Number.isNaN(Z.char)||(Z.error=!1)}return Z}function S(X,O,J){const Z={char:null,nexti:X+4,error:!0};if(X+3<O&&_(J[X])&&_(J[X+1])&&_(J[X+2])&&_(J[X+3])){const se=String.fromCodePoint(J[X],J[X+1],J[X+2],J[X+3]);Z.char=parseInt(se,16),Number.isNaN(Z.char)||(Z.error=!1)}return Z}function T(X,O,J){const Z={char:null,nexti:X+4,error:!0};let se="";for(;X<O&&_(J[X]);)se+=String.fromCodePoint(J[X]),X+=1;return Z.char=parseInt(se,16),J[X]===125&&!Number.isNaN(Z.char)&&(Z.error=!1),Z.nexti=X+1,Z}const B=[],C=x.length;let D,z,U,Y=0;for(;Y<C;){for(;;){if(U=!0,x[Y]!==96){B.push(x[Y]),Y+=1,U=!1;break}if(D=Y+1,D>=C)break;if(x[D]===96){B.push(96),Y+=2,U=!1;break}if(x[D]===120){if(z=w(D+1,C,x),z.error)break;B.push(z.char),Y=z.nexti,U=!1;break}if(x[D]===117){if(x[D+1]===123){if(z=T(D+2,C,x),z.error)break;B.push(z.char),Y=z.nexti,U=!1;break}if(z=S(D+1,C,x),z.error)break;B.push(z.char),Y=z.nexti,U=!1;break}break}if(U)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${Y}]`)}return B}};const m=13,b=10;return transformers.lineEnds={crlf(x){const _=[];let w=0;for(;w<x.length;)switch(x[w]){case m:w+1<x.length&&x[w+1]===b?w+=2:w+=1,_.push(m),_.push(b);break;case b:_.push(m),_.push(b),w+=1;break;default:_.push(x[w]),w+=1;break}return _.length>0&&_[_.length-1]!==b&&(_.push(m),_.push(b)),_},lf(x){const _=[];let w=0;for(;w<x.length;)switch(x[w]){case m:w+1<x.length&&x[w+1]===b?w+=2:w+=1,_.push(b);break;case b:_.push(b),w+=1;break;default:_.push(x[w]),w+=1;break}return _.length>0&&_[_.length-1]!==b&&_.push(b),_}},transformers.base64={encode(x){if(x.length===0)return Buffer$x.alloc(0);let _,w,S,T=x.length%3;T=T>0?3-T:0;let B=(x.length+T)/3;const C=Buffer$x.alloc(B*4);T>0&&(B-=1),_=0,w=0;for(let D=0;D<B;D+=1)S=x[_++]<<16,S+=x[_++]<<8,S+=x[_++],C[w++]=d[S>>18&c[6]],C[w++]=d[S>>12&c[6]],C[w++]=d[S>>6&c[6]],C[w++]=d[S&c[6]];if(T===0)return C;if(T===1)return S=x[_++]<<16,S+=x[_]<<8,C[w++]=d[S>>18&c[6]],C[w++]=d[S>>12&c[6]],C[w++]=d[S>>6&c[6]],C[w]=d[64],C;if(T===2)return S=x[_]<<16,C[w++]=d[S>>18&c[6]],C[w++]=d[S>>12&c[6]],C[w++]=d[64],C[w]=d[64],C},decode(x){function _(Y){const X=[];let O=0;for(let J=0;J<Y.length;J+=1){const Z=Y[J],se=!0;for(;se&&!(Z===32||Z===9||Z===10||Z===13);){if(Z>=65&&Z<=90){X.push(Z-65);break}if(Z>=97&&Z<=122){X.push(Z-71);break}if(Z>=48&&Z<=57){X.push(Z+4);break}if(Z===43){X.push(62);break}if(Z===47){X.push(63);break}if(Z===61){X.push(64),O+=1;break}throw new RangeError(`base64.decode: invalid character buf[${J}]: ${Z}`)}}if(X.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${X.length}`);switch(O){case 0:break;case 1:if(X[X.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(X[X.length-1]!==64||X[X.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${O}`)}return{tail:O,buf:Buffer$x.from(X)}}if(x.length===0)return Buffer$x.alloc(0);const w=_(x),{tail:S}=w,T=w.buf;let B,C,D,z=T.length/4;const U=Buffer$x.alloc(z*3-S);S>0&&(z-=1),C=0,B=0;for(let Y=0;Y<z;Y+=1)D=T[B++]<<18,D+=T[B++]<<12,D+=T[B++]<<6,D+=T[B++],U[C++]=D>>16&c[8],U[C++]=D>>8&c[8],U[C++]=D&c[8];return S===1&&(D=T[B++]<<18,D+=T[B++]<<12,D+=T[B]<<6,U[C++]=D>>16&c[8],U[C]=D>>8&c[8]),S===2&&(D=T[B++]<<18,D+=T[B++]<<12,U[C]=D>>16&c[8]),U},toString(x){if(x.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${x.length}`);let _="",w=0;function S(B,C,D,z){switch(w){case 76:_+=`\r
${B}${C}${D}${z}`,w=4;break;case 75:_+=`${B}\r
${C}${D}${z}`,w=3;break;case 74:_+=`${B+C}\r
${D}${z}`,w=2;break;case 73:_+=`${B+C+D}\r
${z}`,w=1;break;default:_+=B+C+D+z,w+=4;break}}function T(B){return B>=65&&B<=90||B>=97&&B<=122||B>=48&&B<=57||B===43||B===47||B===61}for(let B=0;B<x.length;B+=4){for(let C=B;C<B+4;C+=1)if(!T(x[C]))throw new RangeError(`base64.toString: buf[${C}]: ${x[C]} : not valid base64 character code`);S(String.fromCharCode(x[B]),String.fromCharCode(x[B+1]),String.fromCharCode(x[B+2]),String.fromCharCode(x[B+3]))}return _}},transformers}var hasRequiredConverter;function requireConverter(){if(hasRequiredConverter)return converter;hasRequiredConverter=1;const t=commonjsGlobal,e=requireTransformers(),n="UTF8",a="UTF16",o="UTF16BE",c="UTF16LE",l="UTF32",u="UTF32BE",d="UTF32LE",m="UINT7",b="ASCII",x="BINARY",_="UINT8",w="UINT16",S="UINT16LE",T="UINT16BE",B="UINT32",C="UINT32LE",D="UINT32BE",z="ESCAPED",U="STRING",Y=function(k){k.type=n;const y=k.data;k.bom=0,y.length>=3&&y[0]===239&&y[1]===187&&y[2]===191&&(k.bom=3)},X=function(k){const y=k.data;switch(k.bom=0,k.type){case a:k.type=o,y.length>=2&&(y[0]===254&&y[1]===255?k.bom=2:y[0]===255&&y[1]===254&&(k.type=c,k.bom=2));break;case o:if(k.type=o,y.length>=2){if(y[0]===254&&y[1]===255)k.bom=2;else if(y[0]===255&&y[1]===254)throw new TypeError(`src type: "${o}" specified but BOM is for "${c}"`)}break;case c:if(k.type=c,y.length>=0){if(y[0]===254&&y[1]===255)throw new TypeError(`src type: "${c}" specified but BOM is for "${o}"`);y[0]===255&&y[1]===254&&(k.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${k.type}" unrecognized`)}},O=function(k){const y=k.data;switch(k.bom=0,k.type){case l:k.type=u,y.length>=4&&(y[0]===0&&y[1]===0&&y[2]===254&&y[3]===255&&(k.bom=4),y[0]===255&&y[1]===254&&y[2]===0&&y[3]===0&&(k.type=d,k.bom=4));break;case u:if(k.type=u,y.length>=4&&(y[0]===0&&y[1]===0&&y[2]===254&&y[3]===255&&(k.bom=4),y[0]===255&&y[1]===254&&y[2]===0&&y[3]===0))throw new TypeError(`src type: ${u} specified but BOM is for ${d}"`);break;case d:if(k.type=d,y.length>=4){if(y[0]===0&&y[1]===0&&y[2]===254&&y[3]===255)throw new TypeError(`src type: "${d}" specified but BOM is for "${u}"`);y[0]===255&&y[1]===254&&y[2]===0&&y[3]===0&&(k.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${k.type}" unrecognized`)}},J=function(k,y){function A(P){const H={type:"",base64:!1},j=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(P);return j&&(j[2]&&(H.type=j[2].toUpperCase()),j[1]&&(H.base64=!0)),H}if(typeof k!="string"||k==="")throw new TypeError(`type: "${k}" not recognized`);const I=A(k.toUpperCase());if(I.base64){if(I.type===U)throw new TypeError(`type: "${k} "BASE64:" prefix not allowed with type ${U}`);if(Buffer$x.isBuffer(y))I.data=e.base64.decode(y);else if(typeof y=="string"){const P=Buffer$x.from(y,"ascii");I.data=e.base64.decode(P)}else throw new TypeError(`type: "${k} unrecognized data type: typeof(data): ${typeof y}`)}else I.data=y;switch(I.type){case n:Y(I);break;case a:case o:case c:X(I);break;case l:case u:case d:O(I);break;case w:I.type=T;break;case B:I.type=D;break;case b:I.type=m;break;case x:I.type=_;break;case m:case _:case S:case T:case C:case D:case U:case z:break;default:throw new TypeError(`type: "${k}" not recognized`)}if(I.type===U){if(typeof I.data!="string")throw new TypeError(`type: "${k}" but data is not a string`)}else if(!Buffer$x.isBuffer(I.data))throw new TypeError(`type: "${k}" but data is not a Buffer`);return I},Z=function(k,y){function A(P){let H,q;const j={crlf:!1,lf:!1,base64:!1,type:""},M=!0;for(;M;){if(q=P,H=P.slice(0,5),H==="CRLF:"){j.crlf=!0,q=P.slice(5);break}if(H=P.slice(0,3),H==="LF:"){j.lf=!0,q=P.slice(3);break}break}return H=q.split(":"),H.length===1?j.type=H[0]:H.length===2&&H[1]==="BASE64"&&(j.base64=!0,j.type=H[0]),j}if(!Array.isArray(y))throw new TypeError(`dst chars: not array: "${typeof y}`);if(typeof k!="string")throw new TypeError(`dst type: not string: "${typeof k}`);const I=A(k.toUpperCase());switch(I.type){case n:case o:case c:case u:case d:case m:case _:case S:case T:case C:case D:case z:break;case U:if(I.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${U}`);break;case b:I.type=m;break;case x:I.type=_;break;case a:I.type=o;break;case l:I.type=u;break;case w:I.type=T;break;case B:I.type=D;break;default:throw new TypeError(`dst type unrecognized: "${k}" : must have form [crlf:|lf:]type[:base64]`)}return I},se=function(k,y){switch(k){case n:return e.utf8.encode(y);case o:return e.utf16be.encode(y);case c:return e.utf16le.encode(y);case u:return e.utf32be.encode(y);case d:return e.utf32le.encode(y);case m:return e.uint7.encode(y);case _:return e.uint8.encode(y);case T:return e.uint16be.encode(y);case S:return e.uint16le.encode(y);case D:return e.uint32be.encode(y);case C:return e.uint32le.encode(y);case U:return e.string.encode(y);case z:return e.escaped.encode(y);default:throw new TypeError(`encode type "${k}" not recognized`)}},ie=function(k){switch(k.type){case n:return e.utf8.decode(k.data,k.bom);case c:return e.utf16le.decode(k.data,k.bom);case o:return e.utf16be.decode(k.data,k.bom);case u:return e.utf32be.decode(k.data,k.bom);case d:return e.utf32le.decode(k.data,k.bom);case m:return e.uint7.decode(k.data);case _:return e.uint8.decode(k.data);case T:return e.uint16be.decode(k.data);case S:return e.uint16le.decode(k.data);case D:return e.uint32be.decode(k.data);case C:return e.uint32le.decode(k.data);case U:return e.string.decode(k.data);case z:return e.escaped.decode(k.data);default:throw new TypeError(`decode type "${k.type}" not recognized`)}};return converter.decode=function(k,y){const A=J(k,y);return ie(A)},converter.encode=function(k,y){let A,I;const P=Z(k,y);return P.crlf?(A=e.lineEnds.crlf(y),I=se(P.type,A)):P.lf?(A=e.lineEnds.lf(y),I=se(P.type,A)):I=se(P.type,y),P.base64&&(I=e.base64.encode(I)),I},converter.convert=function(k,y,A){return t.encode(A,t.decode(k,y))},converter}var emitcss,hasRequiredEmitcss;function requireEmitcss(){return hasRequiredEmitcss||(hasRequiredEmitcss=1,emitcss=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}),emitcss}var hasRequiredUtilities;function requireUtilities(){if(hasRequiredUtilities)return utilities;hasRequiredUtilities=1;const t=requireStyle(),e=requireConverter(),n=requireEmitcss(),a=requireIdentifiers(),o="utilities.js: ",c=commonjsGlobal,l=function(d,m,b){let x,_=m;const w=!0;for(;w;){if(d<=0){_=0,x=0;break}if(typeof _!="number"){_=0,x=d;break}if(_>=d){_=d,x=d;break}if(typeof b!="number"){x=d;break}if(x=_+b,x>d){x=d;break}break}return{beg:_,end:x}};utilities.htmlToPage=function(d,m){let b;if(typeof d!="string")throw new Error(`${o}htmlToPage: input HTML is not a string`);typeof m!="string"?b="htmlToPage":b=m;let x="";return x+=`<!DOCTYPE html>
`,x+=`<html lang="en">
`,x+=`<head>
`,x+=`<meta charset="utf-8">
`,x+=`<title>${b}</title>
`,x+=`<style>
`,x+=n(),x+=`</style>
`,x+=`</head>
<body>
`,x+=`<p>${new Date}</p>
`,x+=d,x+=`</body>
</html>
`,x},utilities.parserResultToHtml=function(d,m){let b=null;typeof m=="string"&&m!==""&&(b=m);let x,_;d.success===!0?x=`<span class="${t.CLASS_MATCH}">true</span>`:x=`<span class="${t.CLASS_NOMATCH}">false</span>`,d.state===a.EMPTY?_=`<span class="${t.CLASS_EMPTY}">EMPTY</span>`:d.state===a.MATCH?_=`<span class="${t.CLASS_MATCH}">MATCH</span>`:d.state===a.NOMATCH?_=`<span class="${t.CLASS_NOMATCH}">NOMATCH</span>`:_=`<span class="${t.CLASS_NOMATCH}">unrecognized</span>`;let w="";return w+=`<table class="${t.CLASS_STATE}">
`,b&&(w+=`<caption>${b}</caption>
`),w+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,w+=`<tr><td>parser success</td><td>${x}</td>
`,w+=`<td><span class="${t.CLASS_MATCH}">true</span> if the parse succeeded,
`,w+=` <span class="${t.CLASS_NOMATCH}">false</span> otherwise`,w+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,w+=`<tr><td>parser state</td><td>${_}</td>
`,w+=`<td><span class="${t.CLASS_EMPTY}">EMPTY</span>, `,w+=`<span class="${t.CLASS_MATCH}">MATCH</span> or 
`,w+=`<span class="${t.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,w+=`<tr><td>string length</td><td>${d.length}</td><td>length of the input (sub)string</td></tr>
`,w+=`<tr><td>matched length</td><td>${d.matched}</td><td>number of input string characters matched</td></tr>
`,w+=`<tr><td>max matched</td><td>${d.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,w+=`<tr><td>max tree depth</td><td>${d.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,w+=`<tr><td>node hits</td><td>${d.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,w+=`<tr><td>input length</td><td>${d.inputLength}</td><td>length of full input string</td></tr>
`,w+=`<tr><td>sub-string begin</td><td>${d.subBegin}</td><td>sub-string first character index</td></tr>
`,w+=`<tr><td>sub-string end</td><td>${d.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,w+=`<tr><td>sub-string length</td><td>${d.subLength}</td><td>sub-string length</td></tr>
`,w+=`</table>
`,w},utilities.charsToString=function(d,m,b){let x,_;if(typeof m=="number"){if(m>=d.length)return"";x=m<0?0:m}else x=0;if(typeof b=="number"){if(b<=0)return"";_=b>d.length-x?d.length:x+b}else _=d.length;return x<_?e.encode("UTF16LE",d.slice(x,_)).toString("utf16le"):""},utilities.stringToChars=function(d){return e.decode("STRING",d)},utilities.opcodeToString=function(d){let m="unknown";switch(d){case a.ALT:m="ALT";break;case a.CAT:m="CAT";break;case a.RNM:m="RNM";break;case a.UDT:m="UDT";break;case a.AND:m="AND";break;case a.NOT:m="NOT";break;case a.REP:m="REP";break;case a.TRG:m="TRG";break;case a.TBS:m="TBS";break;case a.TLS:m="TLS";break;case a.BKR:m="BKR";break;case a.BKA:m="BKA";break;case a.BKN:m="BKN";break;case a.ABG:m="ABG";break;case a.AEN:m="AEN";break;default:throw new Error("unrecognized opcode")}return m},utilities.stateToString=function(d){let m="unknown";switch(d){case a.ACTIVE:m="ACTIVE";break;case a.MATCH:m="MATCH";break;case a.EMPTY:m="EMPTY";break;case a.NOMATCH:m="NOMATCH";break;default:throw new Error("unrecognized state")}return m},utilities.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],utilities.charToHex=function(d){let m=d.toString(16).toUpperCase();switch(m.length){case 1:case 3:case 7:m=`0${m}`;break;case 2:case 6:m=`00${m}`;break;case 4:break;case 5:m=`000${m}`;break;default:throw new Error("unrecognized option")}return m},utilities.charsToDec=function(d,m,b){let x="";if(!Array.isArray(d))throw new Error(`${o}charsToDec: input must be an array of integers`);const _=l(d.length,m,b);if(_.end>_.beg){x+=d[_.beg];for(let w=_.beg+1;w<_.end;w+=1)x+=`,${d[w]}`}return x},utilities.charsToHex=function(d,m,b){let x="";if(!Array.isArray(d))throw new Error(`${o}charsToHex: input must be an array of integers`);const _=l(d.length,m,b);if(_.end>_.beg){x+=`\\x${c.charToHex(d[_.beg])}`;for(let w=_.beg+1;w<_.end;w+=1)x+=`,\\x${c.charToHex(d[w])}`}return x},utilities.charsToHtmlEntities=function(d,m,b){let x="";if(!Array.isArray(d))throw new Error(`${o}charsToHex: input must be an array of integers`);const _=l(d.length,m,b);if(_.end>_.beg)for(let w=_.beg;w<_.end;w+=1)x+=`&#x${d[w].toString(16)};`;return x};function u(d){return!(d>=55296&&d<=57343||d>1114111)}return utilities.charsToUnicode=function(d,m,b){let x="";if(!Array.isArray(d))throw new Error(`${o}charsToUnicode: input must be an array of integers`);const _=l(d.length,m,b);if(_.end>_.beg)for(let w=_.beg;w<_.end;w+=1)u(d[w])?x+=`&#${d[w]};`:x+=` U+${c.charToHex(d[w])}`;return x},utilities.charsToJsUnicode=function(d,m,b){let x="";if(!Array.isArray(d))throw new Error(`${o}charsToJsUnicode: input must be an array of integers`);const _=l(d.length,m,b);if(_.end>_.beg){x+=`\\u${c.charToHex(d[_.beg])}`;for(let w=_.beg+1;w<_.end;w+=1)x+=`,\\u${c.charToHex(d[w])}`}return x},utilities.charsToAscii=function(d,m,b){let x="";if(!Array.isArray(d))throw new Error(`${o}charsToAscii: input must be an array of integers`);const _=l(d.length,m,b);for(let w=_.beg;w<_.end;w+=1){const S=d[w];S>=32&&S<=126?x+=String.fromCharCode(S):x+=`\\x${c.charToHex(S)}`}return x},utilities.charsToAsciiHtml=function(d,m,b){if(!Array.isArray(d))throw new Error(`${o}charsToAsciiHtml: input must be an array of integers`);let x="",_;const w=l(d.length,m,b);for(let S=w.beg;S<w.end;S+=1)_=d[S],_<32||_===127?x+=`<span class="${t.CLASS_CTRLCHAR}">${c.asciiChars[_]}</span>`:_>127?x+=`<span class="${t.CLASS_CTRLCHAR}">U+${c.charToHex(_)}</span>`:x+=c.asciiChars[_];return x},utilities.stringToAsciiHtml=function(d){const m=e.decode("STRING",d);return this.charsToAsciiHtml(m)},utilities}var ast,hasRequiredAst;function requireAst(){return hasRequiredAst||(hasRequiredAst=1,ast=function(){const e=requireIdentifiers(),n=requireUtilities(),a="ast.js: ",o=this;let c=null,l=null,u=null,d=0;const m=[],b=[],x=[],_=[];this.callbacks=[],this.astObject="astObject",this.init=function(T,B,C){x.length=0,_.length=0,m.length=0,d=0,c=T,l=B,u=C;let D;const z=[];for(D=0;D<c.length;D+=1)z.push(c[D].lower);for(D=0;D<l.length;D+=1)z.push(l[D].lower);for(d=c.length+l.length,D=0;D<d;D+=1)m[D]=!1,b[D]=null;for(const U in o.callbacks){const Y=U.toLowerCase();if(D=z.indexOf(Y),D<0)throw new Error(`${a}init: node '${U}' not a rule or udt name`);typeof o.callbacks[U]=="function"&&(m[D]=!0,b[D]=o.callbacks[U]),o.callbacks[U]===!0&&(m[D]=!0)}},this.ruleDefined=function(T){return m[T]!==!1},this.udtDefined=function(T){return m[c.length+T]!==!1},this.down=function(T,B){const C=_.length;return x.push(C),_.push({name:B,thisIndex:C,thatIndex:null,state:e.SEM_PRE,callbackIndex:T,phraseIndex:null,phraseLength:null,stack:x.length}),C},this.up=function(T,B,C,D){const z=_.length,U=x.pop();return _.push({name:B,thisIndex:z,thatIndex:U,state:e.SEM_POST,callbackIndex:T,phraseIndex:C,phraseLength:D,stack:x.length}),_[U].thatIndex=z,_[U].phraseIndex=C,_[U].phraseLength=D,z},this.translate=function(T){let B,C,D;for(let z=0;z<_.length;z+=1)D=_[z],C=b[D.callbackIndex],D.state===e.SEM_PRE?C!==null&&(B=C(e.SEM_PRE,u,D.phraseIndex,D.phraseLength,T),B===e.SEM_SKIP&&(z=D.thatIndex)):C!==null&&C(e.SEM_POST,u,D.phraseIndex,D.phraseLength,T)},this.setLength=function(T){_.length=T,T>0?x.length=_[T-1].stack:x.length=0},this.getLength=function(){return _.length};function w(S){let T="";for(let B=0;B<S;B+=1)T+=" ";return T}this.toXml=function(T){let B=n.charsToDec,C="decimal integer character codes";if(typeof T=="string"&&T.length>=3){const U=T.slice(0,3).toLowerCase();U==="asc"?(B=n.charsToAscii,C="ASCII for printing characters, hex for non-printing"):U==="hex"?(B=n.charsToHex,C="hexadecimal integer character codes"):U==="uni"&&(B=n.charsToUnicode,C="Unicode UTF-32 integer character codes")}let D="",z=0;return D+=`<?xml version="1.0" encoding="utf-8"?>
`,D+=`<root nodes="${_.length/2}" characters="${u.length}">
`,D+=`<!-- input string, ${C} -->
`,D+=w(z+2),D+=B(u),D+=`
`,_.forEach(U=>{U.state===e.SEM_PRE?(z+=1,D+=w(z),D+=`<node name="${U.name}" index="${U.phraseIndex}" length="${U.phraseLength}">
`,D+=w(z+2),D+=B(u,U.phraseIndex,U.phraseLength),D+=`
`):(D+=w(z),D+=`</node><!-- name="${U.name}" -->
`,z-=1)}),D+=`</root>
`,D},this.phrases=function(){const T={};let B,C;for(B=0;B<_.length;B+=1)C=_[B],C.state===e.SEM_PRE&&(Array.isArray(T[C.name])||(T[C.name]=[]),T[C.name].push({index:C.phraseIndex,length:C.phraseLength}));return T}}),ast}var circularBuffer,hasRequiredCircularBuffer;function requireCircularBuffer(){return hasRequiredCircularBuffer||(hasRequiredCircularBuffer=1,circularBuffer=function(){const e="circular-buffer.js: ";let n=-1,a=0;this.init=function(c){if(typeof c!="number"||c<=0)throw new Error(`${e}init: circular buffer size must an integer > 0`);a=Math.ceil(c),n=-1},this.increment=function(){return n+=1,(n+a)%a},this.maxSize=function(){return a},this.items=function(){return n+1},this.getListIndex=function(c){return n===-1||c<0||c>n||n-c>=a?-1:(c+a)%a},this.forEach=function(c){if(n!==-1){if(n<a){for(let l=0;l<=n;l+=1)c(l,l);return}for(let l=n-a+1;l<=n;l+=1){const u=(l+a)%a;c(u,l)}}}}),circularBuffer}var parser$2,hasRequiredParser$1;function requireParser$1(){return hasRequiredParser$1||(hasRequiredParser$1=1,parser$2=function(){const e=requireIdentifiers(),n=requireUtilities(),a="parser.js: ",o=this;let c;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let l=null,u=null,d,m,b,x,_=0,w=0,S=0,T=null,B=null,C=null,D=null,z=null,U=0,Y=1/0,X=1/0;const O=function(me,ne,ue){const _e=`${a}evaluateRule(): `;if(me>=C.length)throw new Error(`${_e}rule index: ${me} out of range`);if(ne>=b)throw new Error(`${_e}phrase index: ${ne} out of range`);const{length:Ie}=l;l.push({type:e.RNM,index:me}),c(Ie,ne,ue),l.pop()},J=function(Pe,me,ne){const ue=`${a}evaluateUdt(): `;if(Pe>=D.length)throw new Error(`${ue}udt index: ${Pe} out of range`);if(me>=b)throw new Error(`${ue}phrase index: ${me} out of range`);const{length:_e}=l;l.push({type:e.UDT,empty:D[Pe].empty,index:Pe}),c(_e,me,ne),l.pop()},Z=function(){_=0,w=0,S=0,U=0,x=[{lookAround:e.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],C=null,D=null,u=null,d=0,m=0,b=0,T=null,B=null,z=null,l=null},se=function(){const Pe=[],me=function(){const ue={};C.forEach(_e=>{_e.isBkr&&(ue[_e.lower]=null)}),D.length>0&&D.forEach(_e=>{_e.isBkr&&(ue[_e.lower]=null)}),Pe.push(ue)},ne=function(){const ue=Pe[Pe.length-1],_e={};for(const Ie in ue)_e[Ie]=ue[Ie];return _e};this.push=function(){Pe.push(ne())},this.pop=function(_e){let Ie=_e;if(Ie||(Ie=Pe.length-1),Ie<1||Ie>Pe.length)throw new Error(`${a}backRef.pop(): bad length: ${Ie}`);return Pe.length=Ie,Pe[Pe.length-1]},this.length=function(){return Pe.length},this.savePhrase=function(_e,Ie,Ne){Pe[Pe.length-1][_e]={phraseIndex:Ie,phraseLength:Ne}},this.getPhrase=function(ue){return Pe[Pe.length-1][ue]},me()},ie=function(){const me=this;this.state=e.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=x[x.length-1],this.uFrame=new se,this.pFrame=new se,this.evaluateRule=O,this.evaluateUdt=J,this.refresh=function(){me.state=e.ACTIVE,me.phraseLength=0,me.lookAround=x[x.length-1]}},F=function(){return x[x.length-1]},k=function(){return x.length>1},y=function(){return x[x.length-1].lookAround===e.LOOKAROUND_BEHIND},A=function(){const Pe=`${a}initializeAst(): `,me=!0;for(;me;){if(o.ast===void 0){o.ast=null;break}if(o.ast===null)break;if(o.ast.astObject!=="astObject")throw new Error(`${Pe}ast object not recognized`);break}o.ast!==null&&o.ast.init(C,D,u)},I=function(){const Pe=`${a}initializeTrace(): `,me=!0;for(;me;){if(o.trace===void 0){o.trace=null;break}if(o.trace===null)break;if(o.trace.traceObject!=="traceObject")throw new Error(`${Pe}trace object not recognized`);break}o.trace!==null&&o.trace.init(C,D,u)},P=function(){const Pe=`${a}initializeStats(): `,me=!0;for(;me;){if(o.stats===void 0){o.stats=null;break}if(o.stats===null)break;if(o.stats.statsObject!=="statsObject")throw new Error(`${Pe}stats object not recognized`);break}o.stats!==null&&o.stats.init(C,D)},H=function(Pe){const me=`${a}initializeGrammar(): `;if(!Pe)throw new Error(`${me}grammar object undefined`);if(Pe.grammarObject!=="grammarObject")throw new Error(`${me}bad grammar object`);C=Pe.rules,D=Pe.udts},q=function(Pe){const me=`${a}initializeStartRule(): `;let ne=null;if(typeof Pe=="number"){if(Pe>=C.length)throw new Error(`${me}start rule index too large: max: ${C.length}: index: ${Pe}`);ne=Pe}else if(typeof Pe=="string"){const ue=Pe.toLowerCase();for(let _e=0;_e<C.length;_e+=1)if(ue===C[_e].lower){ne=C[_e].index;break}if(ne===null)throw new Error(`${me}start rule name '${Pe}' not recognized`)}else throw new Error(`${me}type of start rule '${typeof Pe}' not recognized`);return ne},j=function(me,ne,ue){const _e=`${a}initializeInputChars(): `;let Ie=me,Ne=ne,De=ue;if(Ie===void 0)throw new Error(`${_e}input string is undefined`);if(Ie===null)throw new Error(`${_e}input string is null`);if(typeof Ie=="string")Ie=n.stringToChars(Ie);else if(!Array.isArray(Ie))throw new Error(`${_e}input string is not a string or array`);if(Ie.length>0&&typeof Ie[0]!="number")throw new Error(`${_e}input string not an array of integers`);if(typeof Ne!="number")Ne=0;else if(Ne=Math.floor(Ne),Ne<0||Ne>Ie.length)throw new Error(`${_e}input beginning index out of range: ${Ne}`);if(typeof De!="number")De=Ie.length-Ne;else if(De=Math.floor(De),De<0||De>Ie.length-Ne)throw new Error(`${_e}input length out of range: ${De}`);u=Ie,d=Ne,m=De,b=d+m},M=function(){const Pe=`${a}initializeCallbacks(): `;let me;for(T=[],B=[],me=0;me<C.length;me+=1)T[me]=null;for(me=0;me<D.length;me+=1)B[me]=null;let ne;const ue=[];for(me=0;me<C.length;me+=1)ue.push(C[me].lower);for(me=0;me<D.length;me+=1)ue.push(D[me].lower);for(const _e in o.callbacks){if(me=ue.indexOf(_e.toLowerCase()),me<0)throw new Error(`${Pe}syntax callback '${_e}' not a rule or udt name`);if(ne=o.callbacks[_e],ne||(ne=null),typeof ne=="function"||ne===null)me<C.length?T[me]=ne:B[me-C.length]=ne;else throw new Error(`${Pe}syntax callback[${_e}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(me=0;me<D.length;me+=1)if(B[me]===null)throw new Error(`${Pe}all UDT callbacks must be defined. UDT callback[${D[me].lower}] not a function reference`)};this.setMaxTreeDepth=function(Pe){if(typeof Pe!="number")throw new Error(`parser: max tree depth must be integer > 0: ${Pe}`);if(Y=Math.floor(Pe),Y<=0)throw new Error(`parser: max tree depth must be integer > 0: ${Pe}`)},this.setMaxNodeHits=function(Pe){if(typeof Pe!="number")throw new Error(`parser: max node hits must be integer > 0: ${Pe}`);if(X=Math.floor(Pe),X<=0)throw new Error(`parser: max node hits must be integer > 0: ${Pe}`)};const E=function(Pe,me,ne){let ue;const _e=`${a}parse(): `;H(Pe);const Ie=q(me);M(),I(),P(),A();const Ne=new ie;switch(ne!=null&&(z=ne),l=[{type:e.RNM,index:Ie}],c(0,d,Ne),l=null,Ne.state){case e.ACTIVE:throw new Error(`${_e}final state should never be 'ACTIVE'`);case e.NOMATCH:ue=!1;break;case e.EMPTY:case e.MATCH:Ne.phraseLength===m?ue=!0:ue=!1;break;default:throw new Error("unrecognized state")}return{success:ue,state:Ne.state,length:m,matched:Ne.phraseLength,maxMatched:U,maxTreeDepth:w,nodeHits:S,inputLength:u.length,subBegin:d,subEnd:b,subLength:m}};this.parseSubstring=function(me,ne,ue,_e,Ie,Ne){return Z(),j(ue,_e,Ie),E(me,ne,Ne)},this.parse=function(me,ne,ue,_e){return Z(),j(ue,0,ue.length),E(me,ne,_e)};const L=function(Pe,me,ne){const ue=l[Pe];for(let _e=0;_e<ue.children.length&&(c(ue.children[_e],me,ne),ne.state===e.NOMATCH);_e+=1);},le=function(Pe,me,ne){let ue,_e,Ie,Ne;const De=l[Pe],et=ne.uFrame.length(),We=ne.pFrame.length();o.ast&&(_e=o.ast.getLength()),ue=!0,Ie=me,Ne=0;for(let Ke=0;Ke<De.children.length;Ke+=1)if(c(De.children[Ke],Ie,ne),ne.state===e.NOMATCH){ue=!1;break}else Ie+=ne.phraseLength,Ne+=ne.phraseLength;ue?(ne.state=Ne===0?e.EMPTY:e.MATCH,ne.phraseLength=Ne):(ne.state=e.NOMATCH,ne.phraseLength=0,ne.uFrame.pop(et),ne.pFrame.pop(We),o.ast&&o.ast.setLength(_e))},Q=function(Pe,me,ne){let ue,_e,Ie,Ne;const De=l[Pe];_e=me,Ie=0,Ne=0;const et=ne.uFrame.length(),We=ne.pFrame.length();o.ast&&(ue=o.ast.getLength());const Ke=!0;for(;Ke&&!(_e>=b||(c(Pe+1,_e,ne),ne.state===e.NOMATCH)||ne.state===e.EMPTY||(Ne+=1,Ie+=ne.phraseLength,_e+=ne.phraseLength,Ne===De.max)););ne.state===e.EMPTY||Ne>=De.min?(ne.state=Ie===0?e.EMPTY:e.MATCH,ne.phraseLength=Ie):(ne.state=e.NOMATCH,ne.phraseLength=0,ne.uFrame.pop(et),ne.pFrame.pop(We),o.ast&&o.ast.setLength(ue))},ce=function(Pe,me,ne,ue){if(me.phraseLength>ne){let _e=`${a}opRNM(${Pe.name}): callback function error: `;throw _e+=`sysData.phraseLength: ${me.phraseLength}`,_e+=` must be <= remaining chars: ${ne}`,new Error(_e)}switch(me.state){case e.ACTIVE:if(ue!==!0)throw new Error(`${a}opRNM(${Pe.name}): callback function return error. ACTIVE state not allowed.`);break;case e.EMPTY:me.phraseLength=0;break;case e.MATCH:me.phraseLength===0&&(me.state=e.EMPTY);break;case e.NOMATCH:me.phraseLength=0;break;default:throw new Error(`${a}opRNM(${Pe.name}): callback function return error. Unrecognized return state: ${me.state}`)}},fe=function(Pe,me,ne){let ue,_e,Ie,Ne,De,et;const We=l[Pe],Ke=C[We.index],xt=T[Ke.index],tt=!k();if(tt&&(_e=o.ast&&o.ast.ruleDefined(We.index),_e&&(ue=o.ast.getLength(),o.ast.down(We.index,C[We.index].name)),Ne=ne.uFrame.length(),De=ne.pFrame.length(),ne.uFrame.push(),ne.pFrame.push(),et=ne.pFrame,ne.pFrame=new se),xt===null)Ie=l,l=Ke.opcodes,c(0,me,ne),l=Ie;else{const st=b-me;ne.ruleIndex=Ke.index,xt(ne,u,me,z),ce(Ke,ne,st,!0),ne.state===e.ACTIVE&&(Ie=l,l=Ke.opcodes,c(0,me,ne),l=Ie,ne.ruleIndex=Ke.index,xt(ne,u,me,z),ce(Ke,ne,st,!1))}tt&&(_e&&(ne.state===e.NOMATCH?o.ast.setLength(ue):o.ast.up(We.index,Ke.name,me,ne.phraseLength)),ne.pFrame=et,ne.state===e.NOMATCH?(ne.uFrame.pop(Ne),ne.pFrame.pop(De)):Ke.isBkr&&(ne.pFrame.savePhrase(Ke.lower,me,ne.phraseLength),ne.uFrame.savePhrase(Ke.lower,me,ne.phraseLength)))},oe=function(Pe,me,ne){if(me.phraseLength>ne){let ue=`${a}opUDT(${Pe.name}): callback function error: `;throw ue+=`sysData.phraseLength: ${me.phraseLength}`,ue+=` must be <= remaining chars: ${ne}`,new Error(ue)}switch(me.state){case e.ACTIVE:throw new Error(`${a}opUDT(${Pe.name}): callback function return error. ACTIVE state not allowed.`);case e.EMPTY:if(Pe.empty===!1)throw new Error(`${a}opUDT(${Pe.name}): callback function return error. May not return EMPTY.`);me.phraseLength=0;break;case e.MATCH:if(me.phraseLength===0){if(Pe.empty===!1)throw new Error(`${a}opUDT(${Pe.name}): callback function return error. May not return EMPTY.`);me.state=e.EMPTY}break;case e.NOMATCH:me.phraseLength=0;break;default:throw new Error(`${a}opUDT(${Pe.name}): callback function return error. Unrecognized return state: ${me.state}`)}},de=function(Pe,me,ne){let ue,_e,Ie,Ne,De,et;const We=l[Pe],Ke=D[We.index];ne.UdtIndex=Ke.index;const xt=!k();xt&&(Ie=o.ast&&o.ast.udtDefined(We.index),Ie&&(_e=C.length+We.index,ue=o.ast.getLength(),o.ast.down(_e,Ke.name)),Ne=ne.uFrame.length(),De=ne.pFrame.length(),ne.uFrame.push(),ne.pFrame.push(),et=ne.pFrame,ne.pFrame=new se);const tt=b-me;B[We.index](ne,u,me,z),oe(Ke,ne,tt),xt&&(Ie&&(ne.state===e.NOMATCH?o.ast.setLength(ue):o.ast.up(_e,Ke.name,me,ne.phraseLength)),ne.pFrame=et,ne.state===e.NOMATCH?(ne.uFrame.pop(Ne),ne.pFrame.pop(De)):Ke.isBkr&&(ne.pFrame.savePhrase(Ke.lower,me,ne.phraseLength),ne.uFrame.savePhrase(Ke.lower,me,ne.phraseLength)))},ae=function(Pe,me,ne){x.push({lookAround:e.LOOKAROUND_AHEAD,anchor:me,charsEnd:b,charsLength:m}),b=u.length,m=u.length-d,c(Pe+1,me,ne);const ue=x.pop();switch(b=ue.charsEnd,m=ue.charsLength,ne.phraseLength=0,ne.state){case e.EMPTY:ne.state=e.EMPTY;break;case e.MATCH:ne.state=e.EMPTY;break;case e.NOMATCH:ne.state=e.NOMATCH;break;default:throw new Error(`opAND: invalid state ${ne.state}`)}},he=function(Pe,me,ne){x.push({lookAround:e.LOOKAROUND_AHEAD,anchor:me,charsEnd:b,charsLength:m}),b=u.length,m=u.length-d,c(Pe+1,me,ne);const ue=x.pop();switch(b=ue.charsEnd,m=ue.charsLength,ne.phraseLength=0,ne.state){case e.EMPTY:case e.MATCH:ne.state=e.NOMATCH;break;case e.NOMATCH:ne.state=e.EMPTY;break;default:throw new Error(`opNOT: invalid state ${ne.state}`)}},te=function(Pe,me,ne){const ue=l[Pe];ne.state=e.NOMATCH,me<b&&ue.min<=u[me]&&u[me]<=ue.max&&(ne.state=e.MATCH,ne.phraseLength=1)},pe=function(Pe,me,ne){let ue;const _e=l[Pe],Ie=_e.string.length;if(ne.state=e.NOMATCH,me+Ie<=b){for(ue=0;ue<Ie;ue+=1)if(u[me+ue]!==_e.string[ue])return;ne.state=e.MATCH,ne.phraseLength=Ie}},ee=function(Pe,me,ne){let ue,_e;const Ie=l[Pe];ne.state=e.NOMATCH;const Ne=Ie.string.length;if(Ne===0){ne.state=e.EMPTY;return}if(me+Ne<=b){for(ue=0;ue<Ne;ue+=1)if(_e=u[me+ue],_e>=65&&_e<=90&&(_e+=32),_e!==Ie.string[ue])return;ne.state=e.MATCH,ne.phraseLength=Ne}},ge=function(Pe,me,ne){ne.state=e.NOMATCH,ne.phraseLength=0,ne.state=me===0?e.EMPTY:e.NOMATCH},Ee=function(Pe,me,ne){ne.state=e.NOMATCH,ne.phraseLength=0,ne.state=me===u.length?e.EMPTY:e.NOMATCH},be=function(Pe,me,ne){let ue,_e,Ie,Ne;const De=l[Pe];ne.state=e.NOMATCH,De.index<C.length?Ne=C[De.index].lower:Ne=D[De.index-C.length].lower;const et=De.bkrMode===e.BKR_MODE_PM?ne.pFrame.getPhrase(Ne):ne.uFrame.getPhrase(Ne),We=De.bkrCase===e.BKR_MODE_CI;if(et===null)return;const Ke=et.phraseIndex,xt=et.phraseLength;if(xt===0){ne.state=e.EMPTY;return}if(me+xt<=b){if(We){for(ue=0;ue<xt;ue+=1)if(_e=u[me+ue],Ie=u[Ke+ue],_e>=65&&_e<=90&&(_e+=32),Ie>=65&&Ie<=90&&(Ie+=32),_e!==Ie)return;ne.state=e.MATCH,ne.phraseLength=xt}else for(ue=0;ue<xt;ue+=1)if(_e=u[me+ue],Ie=u[Ke+ue],_e!==Ie)return;ne.state=e.MATCH,ne.phraseLength=xt}},xe=function(Pe,me,ne){switch(x.push({lookAround:e.LOOKAROUND_BEHIND,anchor:me}),c(Pe+1,me,ne),x.pop(),ne.phraseLength=0,ne.state){case e.EMPTY:ne.state=e.EMPTY;break;case e.MATCH:ne.state=e.EMPTY;break;case e.NOMATCH:ne.state=e.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${ne.state}`)}},ve=function(Pe,me,ne){switch(x.push({lookAround:e.LOOKAROUND_BEHIND,anchor:me}),c(Pe+1,me,ne),x.pop(),ne.phraseLength=0,ne.state){case e.EMPTY:case e.MATCH:ne.state=e.NOMATCH;break;case e.NOMATCH:ne.state=e.EMPTY;break;default:throw new Error(`opBKN: invalid state ${ne.state}`)}},Se=function(Pe,me,ne){let ue,_e,Ie,Ne;const De=l[Pe],et=ne.uFrame.length(),We=ne.pFrame.length();o.ast&&(_e=o.ast.getLength()),ue=!0,Ie=me,Ne=0;for(let Ke=De.children.length-1;Ke>=0;Ke-=1)if(c(De.children[Ke],Ie,ne),Ie-=ne.phraseLength,Ne+=ne.phraseLength,ne.state===e.NOMATCH){ue=!1;break}ue?(ne.state=Ne===0?e.EMPTY:e.MATCH,ne.phraseLength=Ne):(ne.state=e.NOMATCH,ne.phraseLength=0,ne.uFrame.pop(et),ne.pFrame.pop(We),o.ast&&o.ast.setLength(_e))},ke=function(Pe,me,ne){let ue,_e,Ie,Ne;const De=l[Pe];_e=me,Ie=0,Ne=0;const et=ne.uFrame.length(),We=ne.pFrame.length();o.ast&&(ue=o.ast.getLength());const Ke=!0;for(;Ke&&!(_e<=0||(c(Pe+1,_e,ne),ne.state===e.NOMATCH)||ne.state===e.EMPTY||(Ne+=1,Ie+=ne.phraseLength,_e-=ne.phraseLength,Ne===De.max)););ne.state===e.EMPTY||Ne>=De.min?(ne.state=Ie===0?e.EMPTY:e.MATCH,ne.phraseLength=Ie):(ne.state=e.NOMATCH,ne.phraseLength=0,ne.uFrame.pop(et),ne.pFrame.pop(We),o.ast&&o.ast.setLength(ue))},Ce=function(Pe,me,ne){const ue=l[Pe];if(ne.state=e.NOMATCH,ne.phraseLength=0,me>0){const _e=u[me-1];ue.min<=_e&&_e<=ue.max&&(ne.state=e.MATCH,ne.phraseLength=1)}},Re=function(Pe,me,ne){let ue;const _e=l[Pe];ne.state=e.NOMATCH;const Ie=_e.string.length,Ne=me-Ie;if(Ne>=0){for(ue=0;ue<Ie;ue+=1)if(u[Ne+ue]!==_e.string[ue])return;ne.state=e.MATCH,ne.phraseLength=Ie}},Le=function(Pe,me,ne){let ue;const _e=l[Pe];ne.state=e.NOMATCH;const Ie=_e.string.length;if(Ie===0){ne.state=e.EMPTY;return}const Ne=me-Ie;if(Ne>=0){for(let De=0;De<Ie;De+=1)if(ue=u[Ne+De],ue>=65&&ue<=90&&(ue+=32),ue!==_e.string[De])return;ne.state=e.MATCH,ne.phraseLength=Ie}},je=function(Pe,me,ne){let ue,_e,Ie,Ne;const De=l[Pe];ne.state=e.NOMATCH,ne.phraseLength=0,De.index<C.length?Ne=C[De.index].lower:Ne=D[De.index-C.length].lower;const et=De.bkrMode===e.BKR_MODE_PM?ne.pFrame.getPhrase(Ne):ne.uFrame.getPhrase(Ne),We=De.bkrCase===e.BKR_MODE_CI;if(et===null)return;const Ke=et.phraseIndex,xt=et.phraseLength;if(xt===0){ne.state=e.EMPTY,ne.phraseLength=0;return}const tt=me-xt;if(tt>=0){if(We){for(ue=0;ue<xt;ue+=1)if(_e=u[tt+ue],Ie=u[Ke+ue],_e>=65&&_e<=90&&(_e+=32),Ie>=65&&Ie<=90&&(Ie+=32),_e!==Ie)return;ne.state=e.MATCH,ne.phraseLength=xt}else for(ue=0;ue<xt;ue+=1)if(_e=u[tt+ue],Ie=u[Ke+ue],_e!==Ie)return;ne.state=e.MATCH,ne.phraseLength=xt}};c=function(me,ne,ue){let _e=!0;const Ie=l[me];if(S+=1,S>X)throw new Error(`parser: maximum number of node hits exceeded: ${X}`);if(_+=1,_>w&&(w=_,w>Y))throw new Error(`parser: maximum parse tree depth exceeded: ${Y}`);if(ue.refresh(),o.trace!==null){const Ne=F();o.trace.down(Ie,ue.state,ne,ue.phraseLength,Ne.anchor,Ne.lookAround)}if(y())switch(Ie.type){case e.ALT:L(me,ne,ue);break;case e.CAT:Se(me,ne,ue);break;case e.REP:ke(me,ne,ue);break;case e.RNM:fe(me,ne,ue);break;case e.UDT:de(me,ne,ue);break;case e.AND:ae(me,ne,ue);break;case e.NOT:he(me,ne,ue);break;case e.TRG:Ce(me,ne,ue);break;case e.TBS:Re(me,ne,ue);break;case e.TLS:Le(me,ne,ue);break;case e.BKR:je(me,ne,ue);break;case e.BKA:xe(me,ne,ue);break;case e.BKN:ve(me,ne,ue);break;case e.ABG:ge(me,ne,ue);break;case e.AEN:Ee(me,ne,ue);break;default:_e=!1;break}else switch(Ie.type){case e.ALT:L(me,ne,ue);break;case e.CAT:le(me,ne,ue);break;case e.REP:Q(me,ne,ue);break;case e.RNM:fe(me,ne,ue);break;case e.UDT:de(me,ne,ue);break;case e.AND:ae(me,ne,ue);break;case e.NOT:he(me,ne,ue);break;case e.TRG:te(me,ne,ue);break;case e.TBS:pe(me,ne,ue);break;case e.TLS:ee(me,ne,ue);break;case e.BKR:be(me,ne,ue);break;case e.BKA:xe(me,ne,ue);break;case e.BKN:ve(me,ne,ue);break;case e.ABG:ge(me,ne,ue);break;case e.AEN:Ee(me,ne,ue);break;default:_e=!1;break}if(!k()&&ne+ue.phraseLength>U&&(U=ne+ue.phraseLength),o.stats!==null&&o.stats.collect(Ie,ue),o.trace!==null){const Ne=F();o.trace.up(Ie,ue.state,ne,ue.phraseLength,Ne.anchor,Ne.lookAround)}return _-=1,_e}}),parser$2}var stats,hasRequiredStats;function requireStats(){return hasRequiredStats||(hasRequiredStats=1,stats=function(){const e=requireIdentifiers(),n=requireUtilities(),a=requireStyle(),o="stats.js: ";let c=[],l=[];const u=[];let d;const m=[],b=[];this.statsObject="statsObject";const x="stats",_=function(X,O){return X.lower<O.lower?-1:X.lower>O.lower?1:0},w=function(X,O){return X.total<O.total?1:X.total>O.total?-1:_(X,O)},S=function(X,O){return X.index<O.index?-1:X.index>O.index?1:0},T=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},B=function(){u.length=0,d=new T,u[e.ALT]=new T,u[e.CAT]=new T,u[e.REP]=new T,u[e.RNM]=new T,u[e.TRG]=new T,u[e.TBS]=new T,u[e.TLS]=new T,u[e.UDT]=new T,u[e.AND]=new T,u[e.NOT]=new T,u[e.BKR]=new T,u[e.BKA]=new T,u[e.BKN]=new T,u[e.ABG]=new T,u[e.AEN]=new T,m.length=0;for(let X=0;X<c.length;X+=1)m.push({empty:0,match:0,nomatch:0,total:0,name:c[X].name,lower:c[X].lower,index:c[X].index});if(l.length>0){b.length=0;for(let X=0;X<l.length;X+=1)b.push({empty:0,match:0,nomatch:0,total:0,name:l[X].name,lower:l[X].lower,index:l[X].index})}},C=function(X,O){switch(X.total+=1,O){case e.EMPTY:X.empty+=1;break;case e.MATCH:X.match+=1;break;case e.NOMATCH:X.nomatch+=1;break;default:throw new Error(`${o}collect(): incStat(): unrecognized state: ${O}`)}},D=function(X,O){let J="";return J+="<tr>",J+=`<td class="${a.CLASS_ACTIVE}">${X}</td>`,J+=`<td class="${a.CLASS_EMPTY}">${O.empty}</td>`,J+=`<td class="${a.CLASS_MATCH}">${O.match}</td>`,J+=`<td class="${a.CLASS_NOMATCH}">${O.nomatch}</td>`,J+=`<td class="${a.CLASS_ACTIVE}">${O.total}</td>`,J+=`</tr>
`,J},z=function(){let X="";return X+=D("ALT",u[e.ALT]),X+=D("CAT",u[e.CAT]),X+=D("REP",u[e.REP]),X+=D("RNM",u[e.RNM]),X+=D("TRG",u[e.TRG]),X+=D("TBS",u[e.TBS]),X+=D("TLS",u[e.TLS]),X+=D("UDT",u[e.UDT]),X+=D("AND",u[e.AND]),X+=D("NOT",u[e.NOT]),X+=D("BKR",u[e.BKR]),X+=D("BKA",u[e.BKA]),X+=D("BKN",u[e.BKN]),X+=D("ABG",u[e.ABG]),X+=D("AEN",u[e.AEN]),X+=D("totals",d),X},U=function(){let X="";X+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,X+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let O=0;O<c.length;O+=1)m[O].total>0&&(X+="<tr>",X+=`<td class="${a.CLASS_ACTIVE}">${m[O].name}</td>`,X+=`<td class="${a.CLASS_EMPTY}">${m[O].empty}</td>`,X+=`<td class="${a.CLASS_MATCH}">${m[O].match}</td>`,X+=`<td class="${a.CLASS_NOMATCH}">${m[O].nomatch}</td>`,X+=`<td class="${a.CLASS_ACTIVE}">${m[O].total}</td>`,X+=`</tr>
`);if(l.length>0){X+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,X+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let O=0;O<l.length;O+=1)b[O].total>0&&(X+="<tr>",X+=`<td class="${a.CLASS_ACTIVE}">${b[O].name}</td>`,X+=`<td class="${a.CLASS_EMPTY}">${b[O].empty}</td>`,X+=`<td class="${a.CLASS_MATCH}">${b[O].match}</td>`,X+=`<td class="${a.CLASS_NOMATCH}">${b[O].nomatch}</td>`,X+=`<td class="${a.CLASS_ACTIVE}">${b[O].total}</td>`,X+=`</tr>
`)}return X};this.validate=function(X){let O=!1;return typeof X=="string"&&x===X&&(O=!0),O},this.init=function(X,O){c=X,l=O,B()},this.collect=function(X,O){C(d,O.state,O.phraseLength),C(u[X.type],O.state,O.phraseLength),X.type===e.RNM&&C(m[X.index],O.state,O.phraseLength),X.type===e.UDT&&C(b[X.index],O.state,O.phraseLength)},this.toHtml=function(X,O){let J="";J+=`<table class="${a.CLASS_STATS}">
`,typeof O=="string"&&(J+=`<caption>${O}</caption>
`),J+=`<tr><th class="${a.CLASS_ACTIVE}">ops</th>
`,J+=`<th class="${a.CLASS_EMPTY}">EMPTY</th>
`,J+=`<th class="${a.CLASS_MATCH}">MATCH</th>
`,J+=`<th class="${a.CLASS_NOMATCH}">NOMATCH</th>
`,J+=`<th class="${a.CLASS_ACTIVE}">totals</th></tr>
`;const Z=!0;for(;Z;){if(X===void 0){J+=z();break}if(X===null){J+=z();break}if(X==="ops"){J+=z();break}if(X==="index"){m.sort(S),b.length>0&&b.sort(S),J+=z(),J+=U();break}if(X==="hits"){m.sort(w),b.length>0&&b.sort(S),J+=z(),J+=U();break}if(X==="alpha"){m.sort(_),b.length>0&&b.sort(_),J+=z(),J+=U();break}break}return J+=`</table>
`,J},this.toHtmlPage=function(X,O,J){return n.htmlToPage(this.toHtml(X,O),J)}}),stats}var trace,hasRequiredTrace;function requireTrace(){return hasRequiredTrace||(hasRequiredTrace=1,trace=function(){const e=requireUtilities(),n=requireStyle(),a=new(requireCircularBuffer()),o=requireIdentifiers(),c="trace.js: ",l=this,u=16,d=10,m=8,b=32,x=80,_=5,w=[];let S=5e3,T=-1,B=0,C=0;const D=[];let z=null,U=null,Y=null;const X=[],O=[],J=`<span class="${n.CLASS_LINEEND}">&bull;</span>`,Z=`<span class="${n.CLASS_LINEEND}">&hellip;</span>`,se=`<span class="${n.CLASS_EMPTY}">&#120634;</span>`,ie=function(){const oe=function(ae){X[o.ALT]=ae,X[o.CAT]=ae,X[o.REP]=ae,X[o.TLS]=ae,X[o.TBS]=ae,X[o.TRG]=ae,X[o.AND]=ae,X[o.NOT]=ae,X[o.BKR]=ae,X[o.BKA]=ae,X[o.BKN]=ae,X[o.ABG]=ae,X[o.AEN]=ae};let de=0;for(const ae in l.filter.operators)de+=1;if(de===0){oe(!1);return}for(const ae in l.filter.operators){const he=ae.toUpperCase();if(he==="<ALL>"){oe(!0);return}if(he==="<NONE>"){oe(!1);return}}oe(!1);for(const ae in l.filter.operators){const he=ae.toUpperCase();if(he==="ALT")X[o.ALT]=l.filter.operators[ae]===!0;else if(he==="CAT")X[o.CAT]=l.filter.operators[ae]===!0;else if(he==="REP")X[o.REP]=l.filter.operators[ae]===!0;else if(he==="AND")X[o.AND]=l.filter.operators[ae]===!0;else if(he==="NOT")X[o.NOT]=l.filter.operators[ae]===!0;else if(he==="TLS")X[o.TLS]=l.filter.operators[ae]===!0;else if(he==="TBS")X[o.TBS]=l.filter.operators[ae]===!0;else if(he==="TRG")X[o.TRG]=l.filter.operators[ae]===!0;else if(he==="BKR")X[o.BKR]=l.filter.operators[ae]===!0;else if(he==="BKA")X[o.BKA]=l.filter.operators[ae]===!0;else if(he==="BKN")X[o.BKN]=l.filter.operators[ae]===!0;else if(he==="ABG")X[o.ABG]=l.filter.operators[ae]===!0;else if(he==="AEN")X[o.AEN]=l.filter.operators[ae]===!0;else throw new Error(`${c}initOpratorFilter: '${ae}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},F=function(){const oe=function(te){X[o.RNM]=te,X[o.UDT]=te;const pe=U.length+Y.length;O.length=0;for(let ee=0;ee<pe;ee+=1)O.push(te)};let de,ae;const he=[];for(ae=0;ae<U.length;ae+=1)he.push(U[ae].lower);for(ae=0;ae<Y.length;ae+=1)he.push(Y[ae].lower);O.length=0,de=0;for(const te in l.filter.rules)de+=1;if(de===0){oe(!0);return}for(const te in l.filter.rules){const pe=te.toLowerCase();if(pe==="<all>"){oe(!0);return}if(pe==="<none>"){oe(!1);return}}oe(!1),X[o.RNM]=!0,X[o.UDT]=!0;for(const te in l.filter.rules){const pe=te.toLowerCase();if(ae=he.indexOf(pe),ae<0)throw new Error(`${c}initRuleFilter: '${te}' not a valid rule or udt name`);O[ae]=l.filter.rules[te]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(oe,de){if(T=-1,typeof oe=="number"&&oe>0)S=Math.ceil(oe);else{S=0;return}typeof de=="number"&&(T=Math.floor(de),T<0&&(T=-1))},this.getMaxRecords=function(){return S},this.getLastRecord=function(){return T},this.init=function(oe,de,ae){w.length=0,D.length=0,B=0,C=0,z=ae,U=oe,Y=de,ie(),F(),a.init(S)};const k=function(oe){let de=!1;return oe.type===o.RNM?X[oe.type]&&O[oe.index]?de=!0:de=!1:oe.type===o.UDT?X[oe.type]&&O[U.length+oe.index]?de=!0:de=!1:de=X[oe.type],de},y=function(oe){return T===-1||oe<=T};this.down=function(oe,de,ae,he,te,pe){y(B)&&k(oe)&&(D.push(B),w[a.increment()]={dirUp:!1,depth:C,thisLine:B,thatLine:void 0,opcode:oe,state:de,phraseIndex:ae,phraseLength:he,lookAnchor:te,lookAround:pe},B+=1,C+=1)},this.up=function(oe,de,ae,he,te,pe){if(y(B)&&k(oe)){const ee=B,ge=D.pop(),Ee=a.getListIndex(ge);Ee!==-1&&(w[Ee].thatLine=ee),C-=1,w[a.increment()]={dirUp:!0,depth:C,thisLine:ee,thatLine:ge,opcode:oe,state:de,phraseIndex:ae,phraseLength:he,lookAnchor:te,lookAround:pe},B+=1}};const A=function(){function oe(ne,ue){let _e,Ie,Ne;if(ue)switch(ne.op={id:ue.type,name:e.opcodeToString(ue.type)},ne.opData=void 0,ue.type){case o.RNM:ne.opData=U[ue.index].name;break;case o.UDT:ne.opData=Y[ue.index].name;break;case o.BKR:ue.index<U.length?_e=U[ue.index].name:_e=Y[ue.index-U.length].name,Ie=ue.bkrCase===o.BKR_MODE_CI?"%i":"%s",Ne=ue.bkrMode===o.BKR_MODE_UM?"%u":"%p",ne.opData=`\\\\${Ie}${Ne}${_e}`;break;case o.TLS:ne.opData=[];for(let De=0;De<ue.string.length;De+=1)ne.opData.push(ue.string[De]);break;case o.TBS:ne.opData=[];for(let De=0;De<ue.string.length;De+=1)ne.opData.push(ue.string[De]);break;case o.TRG:ne.opData=[ue.min,ue.max];break;case o.REP:ne.opData=[ue.min,ue.max];break;default:throw new Error("unrecognized opcode")}else ne.op={id:void 0,name:void 0},ne.opData=void 0}function de(ne,ue,_e){return ne===o.MATCH?{index:ue,length:_e}:ne===o.NOMATCH?{index:ue,length:0}:ne===o.EMPTY?{index:ue,length:0}:null}let ae=-1;function he(ne,ue,_e){const Ie={id:ae++,branch:-1,parent:ne,up:!1,down:!1,depth:_e,children:[]};return ue?(Ie.down=!0,Ie.state={id:ue.state,name:e.stateToString(ue.state)},Ie.phrase=null,oe(Ie,ue.opcode)):(Ie.state={id:void 0,name:void 0},Ie.phrase=de(),oe(Ie,void 0)),Ie}function te(ne,ue){ue&&(ne.up=!0,ne.state={id:ue.state,name:e.stateToString(ue.state)},ne.phrase=de(ue.state,ue.phraseIndex,ue.phraseLength),ne.down||oe(ne,ue.opcode))}let pe=0,ee=-1,ge=1;function Ee(ne){if(ee+=1,ne.branch=ge,ee>C&&(C=ee),ne.children.length===0)pe+=1;else for(let ue=0;ue<ne.children.length;ue+=1)ue>0&&(ge+=1),ne.children[ue].leftMost=!1,ne.children[ue].rightMost=!1,ne.leftMost&&(ne.children[ue].leftMost=ue===0),ne.rightMost&&(ne.children[ue].rightMost=ue===ne.children.length-1),Ee(ne.children[ue]);ee-=1}function be(ne,ue){let _e;const Ie={};if(Ie.id=ne.id,Ie.branch=ne.branch,Ie.leftMost=ne.leftMost,Ie.rightMost=ne.rightMost,_e=ne.state.name?ne.state.name:"ACTIVE",Ie.state={id:ne.state.id,name:_e},_e=ne.op.name?ne.op.name:"?",Ie.op={id:ne.op.id,name:_e},typeof ne.opData=="string")Ie.opData=ne.opData;else if(Array.isArray(ne.opData)){Ie.opData=[];for(let Ne=0;Ne<ne.opData.length;Ne+=1)Ie.opData[Ne]=ne.opData[Ne]}else Ie.opData=void 0;ne.phrase?Ie.phrase={index:ne.phrase.index,length:ne.phrase.length}:Ie.phrase=null,Ie.depth=ne.depth,Ie.children=[];for(let Ne=0;Ne<ne.children.length;Ne+=1)ne.children.length-1,Ie.children[Ne]=be(ne.children[Ne]);return Ie}const xe=[];let ve,Se,ke,Ce,Re=!0;const Le=he(null,null,-1);for(xe.push(Le),Se=Le,a.forEach(ne=>{if(Ce=w[ne],Re&&(Re=!1,Ce.depth>0)){const ue=Ce.dirUp?Ce.depth+1:Ce.depth;for(let _e=0;_e<ue;_e+=1)ke=Se,Se=he(Se,null,_e),xe.push(Se),ke.children.push(Se)}Ce.dirUp?(Se=xe.pop(),te(Se,Ce),Se=xe[xe.length-1]):(ke=Se,Se=he(Se,Ce,Ce.depth),xe.push(Se),ke.children.push(Se))});xe.length>1;)Se=xe.pop(),te(Se,null);if(Le.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(xe.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");ve=Le.children[0];let je=ve;for(;ve&&!ve.down&&!ve.up;)je=ve,ve=ve.children[0];ve=je,ve.leftMost=!0,ve.rightMost=!0,Ee(ve),ve.branch=0;const Pe={};Pe.string=[];for(let ne=0;ne<z.length;ne+=1)Pe.string[ne]=z[ne];Pe.rules=[];for(let ne=0;ne<U.length;ne+=1)Pe.rules[ne]=U[ne].name;Pe.udts=[];for(let ne=0;ne<Y.length;ne+=1)Pe.udts[ne]=Y[ne].name;Pe.id={},Pe.id.ALT={id:o.ALT,name:"ALT"},Pe.id.CAT={id:o.CAT,name:"CAT"},Pe.id.REP={id:o.REP,name:"REP"},Pe.id.RNM={id:o.RNM,name:"RNM"},Pe.id.TLS={id:o.TLS,name:"TLS"},Pe.id.TBS={id:o.TBS,name:"TBS"},Pe.id.TRG={id:o.TRG,name:"TRG"},Pe.id.UDT={id:o.UDT,name:"UDT"},Pe.id.AND={id:o.AND,name:"AND"},Pe.id.NOT={id:o.NOT,name:"NOT"},Pe.id.BKR={id:o.BKR,name:"BKR"},Pe.id.BKA={id:o.BKA,name:"BKA"},Pe.id.BKN={id:o.BKN,name:"BKN"},Pe.id.ABG={id:o.ABG,name:"ABG"},Pe.id.AEN={id:o.AEN,name:"AEN"},Pe.id.ACTIVE={id:o.ACTIVE,name:"ACTIVE"},Pe.id.MATCH={id:o.MATCH,name:"MATCH"},Pe.id.EMPTY={id:o.EMPTY,name:"EMPTY"},Pe.id.NOMATCH={id:o.NOMATCH,name:"NOMATCH"},Pe.treeDepth=C,Pe.leafNodes=pe;let me;return ve.down?ve.up?me="none":me="right":ve.up?me="left":me="both",Pe.branchesIncomplete=me,Pe.tree=be(ve,ve.depth),Pe};this.toTree=function(oe){const de=A();return oe?JSON.stringify(de):de},this.toHtmlPage=function(oe,de,ae){return e.htmlToPage(this.toHtml(oe,de),ae)};const I=function(oe,de){let ae;switch(oe){case u:ae="hexadecimal";break;case d:ae="decimal";break;case m:ae="ASCII";break;case b:ae="UNICODE";break;default:throw new Error(`${c}htmlHeader: unrecognized mode: ${oe}`)}let he="";return he+=`<p>display mode: ${ae}</p>
`,he+=`<table class="${n.CLASS_TRACE}">
`,typeof de=="string"&&(he+=`<caption>${de}</caption>`),he},P=function(){let oe="";return oe+=`</table>
`,oe+=`<p class="${n.CLASS_MONOSPACE}">legend:<br>
`,oe+=`(a)&nbsp;-&nbsp;line number<br>
`,oe+=`(b)&nbsp;-&nbsp;matching line number<br>
`,oe+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,oe+=`(d)&nbsp;-&nbsp;phrase length<br>
`,oe+=`(e)&nbsp;-&nbsp;tree depth<br>
`,oe+=`(f)&nbsp;-&nbsp;operator state<br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,oe+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,oe+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${x} characters of the phrase being matched<br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_MATCH}">matched characters</span><br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${se} empty string<br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${J} end of input string<br>
`,oe+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${Z} input string display truncated<br>
`,oe+=`</p>
`,oe+=`<p class="${n.CLASS_MONOSPACE}">
`,oe+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,oe+=`ALT - alternation<br>
`,oe+=`CAT - concatenation<br>
`,oe+=`REP - repetition<br>
`,oe+=`RNM - rule name<br>
`,oe+=`TRG - terminal range<br>
`,oe+=`TLS - terminal literal string (case insensitive)<br>
`,oe+=`TBS - terminal binary string (case sensitive)<br>
`,oe+=`<br>
`,oe+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,oe+=`UDT - user-defined terminal<br>
`,oe+=`AND - positive look ahead<br>
`,oe+=`NOT - negative look ahead<br>
`,oe+=`BKA - positive look behind<br>
`,oe+=`BKN - negative look behind<br>
`,oe+=`BKR - back reference<br>
`,oe+=`ABG - anchor - begin of input string<br>
`,oe+=`AEN - anchor - end of input string<br>
`,oe+=`</p>
`,oe};this.indent=function(oe){let de="";for(let ae=0;ae<oe;ae+=1)de+=".";return de};const H=function(oe,de){let ae="";if(de.type===o.TRG)if(oe===u||oe===b){let he=de.min.toString(16).toUpperCase();he.length%2!==0&&(he=`0${he}`),ae+=oe===u?"%x":"U+",ae+=he,he=de.max.toString(16).toUpperCase(),he.length%2!==0&&(he=`0${he}`),ae+=`&ndash;${he}`}else ae=`%d${de.min.toString(10)}&ndash;${de.max.toString(10)}`;return ae},q=function(oe,de){let ae="";if(de.type===o.REP)if(oe===u){let he=de.min.toString(16).toUpperCase();he.length%2!==0&&(he=`0${he}`),ae=`x${he}`,de.max<1/0?(he=de.max.toString(16).toUpperCase(),he.length%2!==0&&(he=`0${he}`)):he="inf",ae+=`&ndash;${he}`}else de.max<1/0?ae=`${de.min.toString(10)}&ndash;${de.max.toString(10)}`:ae=`${de.min.toString(10)}&ndash;inf`;return ae},j=function(oe,de){let ae="";if(de.type===o.TBS){const he=Math.min(de.string.length,_*2);if(oe===u||oe===b){ae+=oe===u?"%x":"U+";for(let te=0;te<he;te+=1){let pe;te>0&&(ae+="."),pe=de.string[te].toString(16).toUpperCase(),pe.length%2!==0&&(pe=`0${pe}`),ae+=pe}}else{ae="%d";for(let te=0;te<he;te+=1)te>0&&(ae+="."),ae+=de.string[te].toString(10)}he<de.string.length&&(ae+=Z)}return ae},M=function(oe,de){let ae="";if(de.type===o.TLS){const he=Math.min(de.string.length,_);if(oe===u||oe===d){let te,pe,ee;oe===u?(ae="%x",ee=16):(ae="%d",ee=10);for(let ge=0;ge<he;ge+=1)ge>0&&(ae+="."),pe=de.string[ge],pe>=97&&pe<=122?(te=pe-32,ae+=`${te.toString(ee)}/${pe.toString(ee)}`.toUpperCase()):pe>=65&&pe<=90?(te=pe,pe+=32,ae+=`${te.toString(ee)}/${pe.toString(ee)}`.toUpperCase()):ae+=pe.toString(ee).toUpperCase();he<de.string.length&&(ae+=Z)}else{ae='"';for(let te=0;te<he;te+=1)ae+=e.asciiChars[de.string[te]];he<de.string.length&&(ae+=Z),ae+='"'}}return ae},E=function(oe,de,ae,he,te){if(he===0)return"";let pe="";const ee=te?",":"";switch(oe){case u:pe=ee+e.charsToHex(de,ae,he);break;case d:if(te)return`,${e.charsToDec(de,ae,he)}`;pe=ee+e.charsToDec(de,ae,he);break;case b:pe=e.charsToUnicode(de,ae,he);break;case m:default:pe=e.charsToAsciiHtml(de,ae,he);break}return pe},L=function(oe,de,ae,he,te,pe){let ee="",ge,Ee,be,xe,ve=J;const Se=`<span class="${n.CLASS_LOOKBEHIND}">`,ke=`<span class="${n.CLASS_REMAINDER}">`,Ce="</span>";let Re=!1;switch(ae){case o.EMPTY:ee+=se;case o.NOMATCH:case o.MATCH:case o.ACTIVE:ge=he-te,Ee=pe-ge,be=pe,xe=de.length-be;break;default:throw new Error("unrecognized state")}return ve=J,Ee>x?(Ee=x,ve=Z,xe=0):Ee+xe>x&&(ve=Z,xe=x-Ee),Ee>0&&(ee+=Se,ee+=E(oe,de,ge,Ee,Re),ee+=Ce,Re=!0),xe>0&&(ee+=ke,ee+=E(oe,de,be,xe,Re),ee+=Ce),ee+ve},le=function(oe,de,ae,he,te,pe){let ee="",ge,Ee,be,xe,ve=J;const Se=`<span class="${n.CLASS_REMAINDER}">`,ke="</span>";let Ce=!1;switch(ae){case o.EMPTY:ee+=se;case o.NOMATCH:case o.ACTIVE:ge=he,Ee=0,be=he,xe=de.length-be;break;case o.MATCH:ge=he,Ee=te,be=he+Ee,xe=de.length-be;break;default:throw new Error("unrecognized state")}return ve=J,Ee>x?(Ee=x,ve=Z,xe=0):Ee+xe>x&&(ve=Z,xe=x-Ee),Ee>0&&(ee+=pe,ee+=E(oe,de,ge,Ee,Ce),ee+=ke,Ce=!0),xe>0&&(ee+=Se,ee+=E(oe,de,be,xe,Ce),ee+=ke),ee+ve},Q=function(oe,de,ae,he,te){const pe=`<span class="${n.CLASS_LOOKAHEAD}">`;return le(oe,de,ae,he,te,pe)},ce=function(oe,de,ae,he,te){const pe=`<span class="${n.CLASS_MATCH}">`;return le(oe,de,ae,he,te,pe)},fe=function(oe){if(U===null)return"";let de="",ae,he,te,pe,ee,ge;return de+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",de+=`<th>operator</th><th>phrase</th></tr>
`,a.forEach(Ee=>{const be=w[Ee];switch(ae=be.thisLine,he=be.thatLine!==void 0?be.thatLine:"--",te=!1,pe=!1,ee=!1,be.lookAround===o.LOOKAROUND_AHEAD&&(te=!0,ee=!0,ge=be.lookAnchor),(be.opcode.type===o.AND||be.opcode.type===o.NOT)&&(te=!0,ee=!0,ge=be.phraseIndex),be.lookAround===o.LOOKAROUND_BEHIND&&(pe=!0,ee=!0,ge=be.lookAnchor),(be.opcode.type===o.BKA||be.opcode.type===o.BKN)&&(pe=!0,ee=!0,ge=be.phraseIndex),de+="<tr>",de+=`<td>${ae}</td><td>${he}</td>`,de+=`<td>${be.phraseIndex}</td>`,de+=`<td>${be.phraseLength}</td>`,de+=`<td>${be.depth}</td>`,de+="<td>",be.state){case o.ACTIVE:de+=`<span class="${n.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case o.MATCH:de+=`<span class="${n.CLASS_MATCH}">&uarr;M</span>`;break;case o.NOMATCH:de+=`<span class="${n.CLASS_NOMATCH}">&uarr;N</span>`;break;case o.EMPTY:de+=`<span class="${n.CLASS_EMPTY}">&uarr;E</span>`;break;default:de+=`<span class="${n.CLASS_ACTIVE}">--</span>`;break}if(de+="</td>",de+="<td>",de+=l.indent(be.depth),te?de+=`<span class="${n.CLASS_LOOKAHEAD}">`:pe&&(de+=`<span class="${n.CLASS_LOOKBEHIND}">`),de+=e.opcodeToString(be.opcode.type),be.opcode.type===o.RNM&&(de+=`(${U[be.opcode.index].name}) `),be.opcode.type===o.BKR){const xe=be.opcode.bkrCase===o.BKR_MODE_CI?"%i":"%s",ve=be.opcode.bkrMode===o.BKR_MODE_UM?"%u":"%p";de+=`(\\${xe}${ve}${U[be.opcode.index].name}) `}be.opcode.type===o.UDT&&(de+=`(${Y[be.opcode.index].name}) `),be.opcode.type===o.TRG&&(de+=`(${H(oe,be.opcode)}) `),be.opcode.type===o.TBS&&(de+=`(${j(oe,be.opcode)}) `),be.opcode.type===o.TLS&&(de+=`(${M(oe,be.opcode)}) `),be.opcode.type===o.REP&&(de+=`(${q(oe,be.opcode)}) `),ee&&(de+="</span>"),de+="</td>",de+="<td>",pe?de+=L(oe,z,be.state,be.phraseIndex,be.phraseLength,ge):te?de+=Q(oe,z,be.state,be.phraseIndex,be.phraseLength):de+=ce(oe,z,be.state,be.phraseIndex,be.phraseLength),de+=`</td></tr>
`}),de+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",de+=`<th>operator</th><th>phrase</th></tr>
`,de+=`</table>
`,de};this.toHtml=function(oe,de){let ae=m;if(typeof oe=="string"&&oe.length>=3){const te=oe.toLowerCase().slice(0,3);te==="hex"?ae=u:te==="dec"?ae=d:te==="uni"&&(ae=b)}let he="";return he+=I(ae,de),he+=fe(ae),he+=P(),he}}),trace}var nodeExports,hasRequiredNodeExports;function requireNodeExports(){return hasRequiredNodeExports||(hasRequiredNodeExports=1,nodeExports={ast:requireAst(),circular:requireCircularBuffer(),ids:requireIdentifiers(),parser:requireParser$1(),stats:requireStats(),trace:requireTrace(),utils:requireUtilities(),emitcss:requireEmitcss(),style:requireStyle()}),nodeExports}var scannerGrammar,hasRequiredScannerGrammar;function requireScannerGrammar(){return hasRequiredScannerGrammar||(hasRequiredScannerGrammar=1,scannerGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let n="";return n+=`file = *line [last-line]
`,n+=`line = line-text end
`,n+=`line-text = *(valid/invalid)
`,n+=`last-line = 1*(valid/invalid)
`,n+=`valid = %d32-126 / %d9
`,n+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,n+=`end = CRLF / LF / CR
`,n+=`CRLF = %d13.10
`,n+=`LF = %d10
`,n+=`CR = %d13
`,n}}),scannerGrammar}var scannerCallbacks={},hasRequiredScannerCallbacks;function requireScannerCallbacks(){if(hasRequiredScannerCallbacks)return scannerCallbacks;hasRequiredScannerCallbacks=1;const t=requireIdentifiers(),e=requireUtilities();function n(x,_,w,S,T){return x===t.SEM_PRE?(T.endLength=0,T.textLength=0,T.invalidCount=0):T.lines.push({lineNo:T.lines.length,beginChar:w,length:S,textLength:T.textLength,endType:T.endType,invalidChars:T.invalidCount}),t.SEM_OK}function a(x,_,w,S,T){return x===t.SEM_PRE&&(T.textLength=S),t.SEM_OK}function o(x,_,w,S,T){return x===t.SEM_PRE?(T.endLength=0,T.textLength=0,T.invalidCount=0):T.strict?(T.lines.push({lineNo:T.lines.length,beginChar:w,length:S,textLength:S,endType:"none",invalidChars:T.invalidCount}),T.errors.push({line:T.lineNo,char:w+S,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(_.push(10),T.lines.push({lineNo:T.lines.length,beginChar:w,length:S+1,textLength:S,endType:"LF",invalidChars:T.invalidCount})),t.SEM_OK}function c(x,_,w,S,T){return x===t.SEM_PRE&&T.errors.push({line:T.lineNo,char:w,msg:`invalid character found '\\x${e.charToHex(_[w])}'`}),t.SEM_OK}function l(x,_,w,S,T){return x===t.SEM_POST&&(T.lineNo+=1),t.SEM_OK}function u(x,_,w,S,T){return x===t.SEM_PRE&&(T.endType="LF",T.strict&&T.errors.push({line:T.lineNo,char:w,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),t.SEM_OK}function d(x,_,w,S,T){return x===t.SEM_PRE&&(T.endType="CR",T.strict&&T.errors.push({line:T.lineNo,char:w,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),t.SEM_OK}function m(x,_,w,S,T){return x===t.SEM_PRE&&(T.endType="CRLF"),t.SEM_OK}const b=[];return b.line=n,b["line-text"]=a,b["last-line"]=o,b.invalid=c,b.end=l,b.lf=u,b.cr=d,b.crlf=m,scannerCallbacks.callbacks=b,scannerCallbacks}var scanner,hasRequiredScanner;function requireScanner(){return hasRequiredScanner||(hasRequiredScanner=1,scanner=function(e,n,a,o){const c="scanner.js: ",l=requireNodeExports(),u=new(requireScannerGrammar()),{callbacks:d}=requireScannerCallbacks(),m=[],b=new l.parser;if(b.ast=new l.ast,b.ast.callbacks=d,o){if(o.traceObject!=="traceObject")throw new TypeError(`${c}trace argument is not a trace object`);b.trace=o}if(b.parse(u,"file",e).success!==!0){n.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}const _={lines:m,lineNo:0,errors:n,strict:!!a};return b.ast.translate(_),m}),scanner}var syntaxCallbacks,hasRequiredSyntaxCallbacks;function requireSyntaxCallbacks(){return hasRequiredSyntaxCallbacks||(hasRequiredSyntaxCallbacks=1,syntaxCallbacks=function(){const e="syntax-callbacks.js: ",n=requireNodeExports(),a=n.ids;let o;const c=function(M,E,L,le){switch(M.state){case a.ACTIVE:le.altStack=[],le.repCount=0;break;case a.EMPTY:le.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case a.MATCH:le.ruleCount===0&&le.errors.push({line:0,char:0,msg:"no rules defined"});break;case a.NOMATCH:throw new Error(`${e}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${e}synFile: unrecognized case.`)}},l=function(j,M,E,L){switch(j.state){case a.ACTIVE:L.altStack.length=0,o={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},L.altStack.push(o);break;case a.EMPTY:throw new Error(`${e}synRule: EMPTY: rule cannot be empty`);case a.NOMATCH:break;case a.MATCH:L.ruleCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},u=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},d=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},m=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},b=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.strict&&L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},x=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.strict&&L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},_=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.strict&&L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},w=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.strict&&L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},S=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.strict&&L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},T=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.strict&&L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},B=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:if(L.strict){const le=n.utils.charsToString(M,E,j.phraseLength);L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:`Back reference operator(${le}) found - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},C=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:if(L.strict){const le=n.utils.charsToString(M,E,j.phraseLength);L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:`UDT operator found(${le}) - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},D=function(j,M,E){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o.tlsOpen=E;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},z=function(j,M,E,L){switch(j.state){case a.ACTIVE:L.stringTabChar=!1;break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.stringTabChar!==!1&&L.errors.push({line:L.findLine(L.lines,L.stringTabChar),char:L.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},U=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.stringTabChar=E;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},Y=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:L.errors.push({line:L.findLine(L.lines,o.tlsOpen),char:o.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),o.basicError=!0,o.tlsOpen=null;break;case a.MATCH:o.tlsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},X=function(j,M,E){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o.clsOpen=E;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},O=function(j,M,E,L){switch(j.state){case a.ACTIVE:L.stringTabChar=!1;break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.stringTabChar!==!1&&L.errors.push({line:L.findLine(L.lines,L.stringTabChar),char:L.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},J=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:L.errors.push({line:L.findLine(L.lines,o.clsOpen),char:o.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),o.clsOpen=null,o.basicError=!0;break;case a.MATCH:L.strict&&L.errors.push({line:L.findLine(L.lines,o.clsOpen),char:o.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),o.clsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},Z=function(j,M,E){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o.prosValOpen=E;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},se=function(j,M,E,L){switch(j.state){case a.ACTIVE:L.stringTabChar=!1;break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.stringTabChar!==!1&&L.errors.push({line:L.findLine(L.lines,L.stringTabChar),char:L.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},ie=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:L.errors.push({line:L.findLine(L.lines,o.prosValOpen),char:o.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),o.basicError=!0,o.prosValOpen=null;break;case a.MATCH:L.errors.push({line:L.findLine(L.lines,o.prosValOpen),char:o.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),o.prosValOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},F=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o={groupOpen:E,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},L.altStack.push(o);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},k=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:L.errors.push({line:L.findLine(L.lines,o.groupOpen),char:o.groupOpen,msg:'Group "(...)" opened but not closed.'}),o=L.altStack.pop(),o.groupError=!0;break;case a.MATCH:o=L.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},y=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o={groupOpen:null,groupError:!1,optionOpen:E,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},L.altStack.push(o);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},A=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:L.errors.push({line:L.findLine(L.lines,o.optionOpen),char:o.optionOpen,msg:'Option "[...]" opened but not closed.'}),o=L.altStack.pop(),o.optionError=!0;break;case a.MATCH:o=L.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},I=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o.basicError===!1&&L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},P=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:if(j.phraseLength===1&&L.strict){const le=M[E]===13?"CR":"LF";L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:`Line end '${le}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},H=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:L.errors.push({line:L.findLine(L.lines,E,L.charsLength),char:E,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},q=function(j,M,E,L){switch(j.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:L.repCount+=1;break;case a.MATCH:L.repCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=b,this.callbacks.basicelementerr=I,this.callbacks.clsclose=J,this.callbacks.clsopen=X,this.callbacks.clsstring=O,this.callbacks.definedaserror=m,this.callbacks.file=c,this.callbacks.groupclose=k,this.callbacks.groupopen=F,this.callbacks.lineenderror=H,this.callbacks.lineend=P,this.callbacks.notop=x,this.callbacks.optionclose=A,this.callbacks.optionopen=y,this.callbacks.prosvalclose=ie,this.callbacks.prosvalopen=Z,this.callbacks.prosvalstring=se,this.callbacks.repetition=q,this.callbacks.rule=l,this.callbacks.ruleerror=u,this.callbacks.rulenameerror=d,this.callbacks.stringtab=U,this.callbacks.tlsclose=Y,this.callbacks.tlsopen=D,this.callbacks.tlsstring=z,this.callbacks.udtop=C,this.callbacks.bkaop=_,this.callbacks.bknop=w,this.callbacks.bkrop=B,this.callbacks.abgop=S,this.callbacks.aenop=T}),syntaxCallbacks}var semanticCallbacks,hasRequiredSemanticCallbacks;function requireSemanticCallbacks(){return hasRequiredSemanticCallbacks||(hasRequiredSemanticCallbacks=1,semanticCallbacks=function(){const e=requireNodeExports(),n=e.ids,a=function(){this.names=[],this.add=function(be){let xe=-1;return this.get(be)===-1&&(xe={name:be,lower:be.toLowerCase(),index:this.names.length},this.names.push(xe)),xe},this.get=function(be){let xe=-1;const ve=be.toLowerCase();for(let Se=0;Se<this.names.length;Se+=1)if(this.names[Se].lower===ve){xe=this.names[Se];break}return xe}},o=function(Ee,be,xe){let ve=0;for(let Se=be;Se<be+xe;Se+=1)ve=10*ve+Ee[Se]-48;return ve},c=function(Ee,be,xe){let ve=0;for(let Se=be;Se<be+xe;Se+=1)ve=2*ve+Ee[Se]-48;return ve},l=function(Ee,be,xe){let ve=0;for(let Se=be;Se<be+xe;Se+=1){let ke=Ee[Se];if(ke>=48&&ke<=57)ke-=48;else if(ke>=65&&ke<=70)ke-=55;else if(ke>=97&&ke<=102)ke-=87;else throw new Error("hexnum out of range");ve=16*ve+ke}return ve};function u(ge,Ee,be,xe,ve){const Se=n.SEM_OK;if(ge===n.SEM_PRE)ve.ruleNames=new a,ve.udtNames=new a,ve.rules=[],ve.udts=[],ve.rulesLineMap=[],ve.opcodes=[],ve.altStack=[],ve.topStack=null,ve.topRule=null;else if(ge===n.SEM_POST){let ke;ve.rules.forEach(Ce=>{Ce.isBkr=!1,Ce.opcodes.forEach(Re=>{Re.type===n.RNM&&(ke=ve.ruleNames.get(Re.index.name),ke===-1?(ve.errors.push({line:ve.findLine(ve.lines,Re.index.phraseIndex,ve.charsLength),char:Re.index.phraseIndex,msg:`Rule name '${Re.index.name}' used but not defined.`}),Re.index=-1):Re.index=ke.index)})}),ve.udts.forEach(Ce=>{Ce.isBkr=!1}),ve.rules.forEach(Ce=>{Ce.opcodes.forEach(Re=>{Re.type===n.BKR&&(Ce.hasBkr=!0,ke=ve.ruleNames.get(Re.index.name),ke!==-1?(ve.rules[ke.index].isBkr=!0,Re.index=ke.index):(ke=ve.udtNames.get(Re.index.name),ke!==-1?(ve.udts[ke.index].isBkr=!0,Re.index=ve.rules.length+ke.index):(ve.errors.push({line:ve.findLine(ve.lines,Re.index.phraseIndex,ve.charsLength),char:Re.index.phraseIndex,msg:`Back reference name '${Re.index.name}' refers to undefined rule or unamed UDT.`}),Re.index=-1)))})})}return Se}function d(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_PRE&&(ve.altStack.length=0,ve.topStack=null,ve.rulesLineMap.push({line:ve.findLine(ve.lines,be,ve.charsLength),char:be})),Se}function m(ge,Ee,be,xe,ve){const Se=n.SEM_OK;if(ge===n.SEM_PRE)ve.ruleName="",ve.definedas="";else if(ge===n.SEM_POST){let ke;ve.definedas==="="?(ke=ve.ruleNames.add(ve.ruleName),ke===-1?(ve.definedas=null,ve.errors.push({line:ve.findLine(ve.lines,be,ve.charsLength),char:be,msg:`Rule name '${ve.ruleName}' previously defined.`})):(ve.topRule={name:ke.name,lower:ke.lower,opcodes:[],index:ke.index},ve.rules.push(ve.topRule),ve.opcodes=ve.topRule.opcodes)):(ke=ve.ruleNames.get(ve.ruleName),ke===-1?(ve.definedas=null,ve.errors.push({line:ve.findLine(ve.lines,be,ve.charsLength),char:be,msg:`Rule name '${ve.ruleName}' for incremental alternate not previously defined.`})):(ve.topRule=ve.rules[ke.index],ve.opcodes=ve.topRule.opcodes))}return Se}function b(ge,Ee,be,xe,ve){let Se=n.SEM_OK;if(ge===n.SEM_PRE)for(;;){if(ve.definedas===null){Se=n.SEM_SKIP;break}if(ve.topStack===null){if(ve.definedas==="="){ve.topStack={alt:{type:n.ALT,children:[]},cat:null},ve.altStack.push(ve.topStack),ve.opcodes.push(ve.topStack.alt);break}ve.topStack={alt:ve.opcodes[0],cat:null},ve.altStack.push(ve.topStack);break}ve.topStack={alt:{type:n.ALT,children:[]},cat:null},ve.altStack.push(ve.topStack),ve.opcodes.push(ve.topStack.alt);break}else ge===n.SEM_POST&&(ve.altStack.pop(),ve.altStack.length>0?ve.topStack=ve.altStack[ve.altStack.length-1]:ve.topStack=null);return Se}function x(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_PRE?(ve.topStack.alt.children.push(ve.opcodes.length),ve.topStack.cat={type:n.CAT,children:[]},ve.opcodes.push(ve.topStack.cat)):ge===n.SEM_POST&&(ve.topStack.cat=null),Se}function _(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_PRE&&ve.topStack.cat.children.push(ve.opcodes.length),Se}function w(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.opcodes.push({type:n.REP,min:0,max:1,char:be}),Se}function S(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_PRE&&(ve.ruleName=e.utils.charsToString(Ee,be,xe)),Se}function T(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.definedas="="),Se}function B(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.definedas="=/"),Se}function C(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_PRE?(ve.min=0,ve.max=1/0,ve.topRep={type:n.REP,min:0,max:1/0},ve.opcodes.push(ve.topRep)):ge===n.SEM_POST&&(ve.min>ve.max&&ve.errors.push({line:ve.findLine(ve.lines,be,ve.charsLength),char:be,msg:`repetition min cannot be greater than max: min: ${ve.min}: max: ${ve.max}`}),ve.topRep.min=ve.min,ve.topRep.max=ve.max),Se}function D(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.min=o(Ee,be,xe)),Se}function z(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.max=o(Ee,be,xe)),Se}function U(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.max=o(Ee,be,xe),ve.min=ve.max),Se}function Y(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.opcodes.push({type:n.AND}),Se}function X(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.opcodes.push({type:n.NOT}),Se}function O(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.opcodes.push({type:n.RNM,index:{phraseIndex:be,name:e.utils.charsToString(Ee,be,xe)}}),Se}function J(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.opcodes.push({type:n.ABG}),Se}function Z(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.opcodes.push({type:n.AEN}),Se}function se(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.opcodes.push({type:n.BKA}),Se}function ie(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.opcodes.push({type:n.BKN}),Se}function F(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_PRE?(ve.ci=!0,ve.cs=!1,ve.um=!0,ve.pm=!1):ge===n.SEM_POST&&ve.opcodes.push({type:n.BKR,bkrCase:ve.cs===!0?n.BKR_MODE_CS:n.BKR_MODE_CI,bkrMode:ve.pm===!0?n.BKR_MODE_PM:n.BKR_MODE_UM,index:{phraseIndex:ve.bkrname.phraseIndex,name:e.utils.charsToString(Ee,ve.bkrname.phraseIndex,ve.bkrname.phraseLength)}}),Se}function k(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.ci=!0),Se}function y(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.cs=!0),Se}function A(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.um=!0),Se}function I(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.pm=!0),Se}function P(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.bkrname={phraseIndex:be,phraseLength:xe}),Se}function H(ge,Ee,be,xe,ve){const Se=n.SEM_OK;if(ge===n.SEM_POST){const ke=e.utils.charsToString(Ee,be,xe);let Ce=ve.udtNames.add(ke);if(Ce===-1){if(Ce=ve.udtNames.get(ke),Ce===-1)throw new Error("semUdtEmpty: name look up error")}else ve.udts.push({name:Ce.name,lower:Ce.lower,index:Ce.index,empty:!0});ve.opcodes.push({type:n.UDT,empty:!0,index:Ce.index})}return Se}function q(ge,Ee,be,xe,ve){const Se=n.SEM_OK;if(ge===n.SEM_POST){const ke=e.utils.charsToString(Ee,be,xe);let Ce=ve.udtNames.add(ke);if(Ce===-1){if(Ce=ve.udtNames.get(ke),Ce===-1)throw new Error("semUdtNonEmpty: name look up error")}else ve.udts.push({name:Ce.name,lower:Ce.lower,index:Ce.index,empty:!1});ve.opcodes.push({type:n.UDT,empty:!1,index:Ce.index,syntax:null,semantic:null})}return Se}function j(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_PRE&&(ve.tlscase=!0),Se}function M(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&xe>0&&(Ee[be+1]===83||Ee[be+1]===115)&&(ve.tlscase=!1),Se}function E(ge,Ee,be,xe,ve){const Se=n.SEM_OK;if(ge===n.SEM_POST)if(ve.tlscase){const ke=Ee.slice(be,be+xe);for(let Ce=0;Ce<ke.length;Ce+=1)ke[Ce]>=65&&ke[Ce]<=90&&(ke[Ce]+=32);ve.opcodes.push({type:n.TLS,string:ke})}else ve.opcodes.push({type:n.TBS,string:Ee.slice(be,be+xe)});return Se}function L(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(xe<=2?ve.opcodes.push({type:n.TLS,string:[]}):ve.opcodes.push({type:n.TBS,string:Ee.slice(be+1,be+xe-1)})),Se}function le(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_PRE?ve.tbsstr=[]:ge===n.SEM_POST&&ve.opcodes.push({type:n.TBS,string:ve.tbsstr}),Se}function Q(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_PRE?(ve.min=0,ve.max=0):ge===n.SEM_POST&&(ve.min>ve.max&&ve.errors.push({line:ve.findLine(ve.lines,be,ve.charsLength),char:be,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${ve.min}: max: ${ve.max}`}),ve.opcodes.push({type:n.TRG,min:ve.min,max:ve.max})),Se}function ce(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.min=o(Ee,be,xe)),Se}function fe(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.max=o(Ee,be,xe)),Se}function oe(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.min=c(Ee,be,xe)),Se}function de(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.max=c(Ee,be,xe)),Se}function ae(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.min=l(Ee,be,xe)),Se}function he(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&(ve.max=l(Ee,be,xe)),Se}function te(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.tbsstr.push(o(Ee,be,xe)),Se}function pe(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.tbsstr.push(c(Ee,be,xe)),Se}function ee(ge,Ee,be,xe,ve){const Se=n.SEM_OK;return ge===n.SEM_POST&&ve.tbsstr.push(l(Ee,be,xe)),Se}this.callbacks=[],this.callbacks.abgop=J,this.callbacks.aenop=Z,this.callbacks.alternation=b,this.callbacks.andop=Y,this.callbacks.bmax=de,this.callbacks.bmin=oe,this.callbacks.bkaop=se,this.callbacks.bknop=ie,this.callbacks.bkrop=F,this.callbacks["bkr-name"]=P,this.callbacks.bstring=pe,this.callbacks.clsop=L,this.callbacks.ci=k,this.callbacks.cs=y,this.callbacks.um=A,this.callbacks.pm=I,this.callbacks.concatenation=x,this.callbacks.defined=T,this.callbacks.dmax=fe,this.callbacks.dmin=ce,this.callbacks.dstring=te,this.callbacks.file=u,this.callbacks.incalt=B,this.callbacks.notop=X,this.callbacks.optionopen=w,this.callbacks["rep-max"]=z,this.callbacks["rep-min"]=D,this.callbacks["rep-min-max"]=U,this.callbacks.repetition=_,this.callbacks.repop=C,this.callbacks.rnmop=O,this.callbacks.rule=d,this.callbacks.rulelookup=m,this.callbacks.rulename=S,this.callbacks.tbsop=le,this.callbacks.tlscase=M,this.callbacks.tlsstring=E,this.callbacks.tlsop=j,this.callbacks.trgop=Q,this.callbacks["udt-empty"]=H,this.callbacks["udt-non-empty"]=q,this.callbacks.xmax=he,this.callbacks.xmin=ae,this.callbacks.xstring=ee}),semanticCallbacks}var sabnfGrammar,hasRequiredSabnfGrammar;function requireSabnfGrammar(){return hasRequiredSabnfGrammar||(hasRequiredSabnfGrammar=1,sabnfGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let n="";return n+=`;
`,n+=`; ABNF for JavaScript APG 2.0 SABNF
`,n+=`; RFC 5234 with some restrictions and additions.
`,n+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,n+=`;  - accepts %s"string" as a case-sensitive string
`,n+=`;  - accepts %i"string" as a case-insensitive string
`,n+=`;  - accepts "string" as a case-insensitive string
`,n+=`;
`,n+=`; Some restrictions:
`,n+=`;   1. Rules must begin at first character of each line.
`,n+=`;      Indentations on first rule and rules thereafter are not allowed.
`,n+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,n+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,n+=`;      However, a working parser cannot be generated from them.
`,n+=`;
`,n+=`; Super set (SABNF) additions:
`,n+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,n+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,n+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,n+=`;      e.g. &%d13 or &rule or !(A / B)
`,n+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,n+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,n+=`;      u_name may be used as an element but no rule definition is given.
`,n+=`;      e.g. rule = A / u_myUdt
`,n+=`;           A = "a"
`,n+=`;      would be a valid grammar.
`,n+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,n+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,n+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,n+=`; New 12/26/2015
`,n+=`;   4. Look-behind operators are accepted as element prefixes.
`,n+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,n+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,n+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,n+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,n+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,n+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,n+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,n+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,n+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,n+=`;      Back reference modifiers can be used to specify case and mode.
`,n+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,n+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,n+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,n+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,n+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,n+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,n+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,n+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,n+=`;
`,n+=`File            = *(BlankLine / Rule / RuleError)
`,n+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,n+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,n+=`                / (LineEndError LineEnd))
`,n+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,n+=`RuleNameTest    = RuleName/RuleNameError
`,n+=`RuleName        = alphanum
`,n+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,n+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,n+=`DefinedAsError  = 1*2%d33-126
`,n+=`DefinedAs       = IncAlt / Defined
`,n+=`Defined         = %d61
`,n+=`IncAlt          = %d61.47
`,n+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,n+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,n+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,n+=`Concatenation   = Repetition *(CatOp Repetition)
`,n+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,n+=`Modifier        = (Predicate [RepOp])
`,n+=`                / RepOp
`,n+=`Predicate       = BkaOp
`,n+=`                / BknOp
`,n+=`                / AndOp
`,n+=`                / NotOp
`,n+=`BasicElement    = UdtOp
`,n+=`                / RnmOp
`,n+=`                / TrgOp
`,n+=`                / TbsOp
`,n+=`                / TlsOp
`,n+=`                / ClsOp
`,n+=`                / BkrOp
`,n+=`                / AbgOp
`,n+=`                / AenOp
`,n+=`                / ProsVal
`,n+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,n+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,n+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,n+=`GroupOpen       = %d40 owsp
`,n+=`GroupClose      = owsp %d41
`,n+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,n+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,n+=`OptionOpen      = %d91 owsp
`,n+=`OptionClose     = owsp %d93
`,n+=`RnmOp           = alphanum
`,n+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,n+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,n+=`cs              = '%s'
`,n+=`ci              = '%i'
`,n+=`um              = '%u'
`,n+=`pm              = '%p'
`,n+=`bkr-name        = uname / ename / rname
`,n+=`rname           = alphanum
`,n+=`uname           = %d117.95 alphanum
`,n+=`ename           = %d101.95 alphanum
`,n+=`UdtOp           = udt-empty
`,n+=`                / udt-non-empty
`,n+=`udt-non-empty   = %d117.95 alphanum
`,n+=`udt-empty       = %d101.95 alphanum
`,n+=`RepOp           = (rep-min StarOp rep-max)
`,n+=`                / (rep-min StarOp)
`,n+=`                / (StarOp rep-max)
`,n+=`                / StarOp
`,n+=`                / rep-min-max
`,n+=`AltOp           = %d47 owsp
`,n+=`CatOp           = wsp
`,n+=`StarOp          = %d42
`,n+=`AndOp           = %d38
`,n+=`NotOp           = %d33
`,n+=`BkaOp           = %d38.38
`,n+=`BknOp           = %d33.33
`,n+=`AbgOp           = %d37.94
`,n+=`AenOp           = %d37.36
`,n+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,n+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,n+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,n+=`TlsCase         = ["%i" / "%s"]
`,n+=`TlsOpen         = %d34
`,n+=`TlsClose        = %d34
`,n+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,n+=`StringTab       = %d9
`,n+=`ClsOp           = ClsOpen ClsString ClsClose
`,n+=`ClsOpen         = %d39
`,n+=`ClsClose        = %d39
`,n+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,n+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,n+=`ProsValOpen     = %d60
`,n+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,n+=`ProsValClose    = %d62
`,n+=`rep-min         = rep-num
`,n+=`rep-min-max     = rep-num
`,n+=`rep-max         = rep-num
`,n+=`rep-num         = 1*(%d48-57)
`,n+=`dString         = dnum
`,n+=`xString         = xnum
`,n+=`bString         = bnum
`,n+=`Dec             = (%d68/%d100)
`,n+=`Hex             = (%d88/%d120)
`,n+=`Bin             = (%d66/%d98)
`,n+=`dmin            = dnum
`,n+=`dmax            = dnum
`,n+=`bmin            = bnum
`,n+=`bmax            = bnum
`,n+=`xmin            = xnum
`,n+=`xmax            = xnum
`,n+=`dnum            = 1*(%d48-57)
`,n+=`bnum            = 1*%d48-49
`,n+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,n+=`;
`,n+=`; Basics
`,n+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,n+=`owsp            = *space
`,n+=`wsp             = 1*space
`,n+=`space           = %d32
`,n+=`                / %d9
`,n+=`                / comment
`,n+=`                / LineContinue
`,n+=`comment         = %d59 *(%d32-126 / %d9)
`,n+=`LineEnd         = %d13.10
`,n+=`                / %d10
`,n+=`                / %d13
`,n+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,n}}),sabnfGrammar}var parser$1,hasRequiredParser;function requireParser(){return hasRequiredParser||(hasRequiredParser=1,parser$1=function(){const e="parser: ",n=requireNodeExports(),a=n.ids,o=new(requireSyntaxCallbacks()),c=new(requireSemanticCallbacks()),l=new(requireSabnfGrammar()),u=new n.parser;u.ast=new n.ast,u.callbacks=o.callbacks,u.ast.callbacks=c.callbacks;const d=function(_,w,S){if(w<0||w>=S)return-1;for(let T=0;T<_.length;T+=1)if(w>=_[T].beginChar&&w<_[T].beginChar+_[T].length)return T;return-1},m=function(_,w){let S=-1;if(w<_.length){for(let T=w;T<_.length;T+=1)if(_[T]!==null){S=_[T];break}}return S},b=function(_){_.forEach(w=>{const S=[],T=[];let B=0;w.opcodes.forEach(C=>{C.type===a.ALT&&C.children.length===1||C.type===a.CAT&&C.children.length===1||C.type===a.REP&&C.min===1&&C.max===1?T.push(null):(T.push(B),S.push(C),B+=1)}),T.push(B),S.forEach(C=>{if(C.type===a.ALT||C.type===a.CAT)for(let D=0;D<C.children.length;D+=1)C.children[D]=m(T,C.children[D])}),w.opcodes=S})};this.syntax=function(_,w,S,T,B){if(B){if(B.traceObject!=="traceObject")throw new TypeError(`${e}trace argument is not a trace object`);u.trace=B}const C={};C.errors=S,C.strict=!!T,C.lines=w,C.findLine=d,C.charsLength=_.length,C.ruleCount=0,u.parse(l,"file",_,C).success||S.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(_,w,S){const T={};return T.errors=S,T.lines=w,T.findLine=d,T.charsLength=_.length,u.ast.translate(T),S.length?null:(b(T.rules),{rules:T.rules,udts:T.udts,lineMap:T.rulesLineMap})},this.generateSource=function(_,w,S,T,B){let C="",D,z,U,Y=0,X=1/0,O=0;const J=[],Z=[];let se=0,ie=0,F=0,k=0,y=0,A=0,I=0,P=0,H=0,q=0,j=0,M=0,E=0,L=0,le=0;S.forEach(fe=>{J.push(fe.lower),Y+=fe.opcodes.length,fe.opcodes.forEach(oe=>{switch(oe.type){case a.ALT:se+=1;break;case a.CAT:ie+=1;break;case a.RNM:F+=1;break;case a.UDT:k+=1;break;case a.REP:y+=1;break;case a.AND:A+=1;break;case a.NOT:I+=1;break;case a.BKA:M+=1;break;case a.BKN:E+=1;break;case a.BKR:j+=1;break;case a.ABG:L+=1;break;case a.AEN:le+=1;break;case a.TLS:for(P+=1,D=0;D<oe.string.length;D+=1)oe.string[D]<X&&(X=oe.string[D]),oe.string[D]>O&&(O=oe.string[D]);break;case a.TBS:for(H+=1,D=0;D<oe.string.length;D+=1)oe.string[D]<X&&(X=oe.string[D]),oe.string[D]>O&&(O=oe.string[D]);break;case a.TRG:q+=1,oe.min<X&&(X=oe.min),oe.max>O&&(O=oe.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),J.sort(),T.length>0&&(T.forEach(fe=>{Z.push(fe.lower)}),Z.sort());let Q="module.exports";B&&typeof B=="string"&&(Q=`let ${B}`),C+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
`,C+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,C+=`//
`,C+=`// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
`,C+=`${Q} = function grammar(){
`,C+="  // ```\n",C+=`  // SUMMARY
`,C+=`  //      rules = ${S.length}
`,C+=`  //       udts = ${T.length}
`,C+=`  //    opcodes = ${Y}
`,C+=`  //        ---   ABNF original opcodes
`,C+=`  //        ALT = ${se}
`,C+=`  //        CAT = ${ie}
`,C+=`  //        REP = ${y}
`,C+=`  //        RNM = ${F}
`,C+=`  //        TLS = ${P}
`,C+=`  //        TBS = ${H}
`,C+=`  //        TRG = ${q}
`,C+=`  //        ---   SABNF superset opcodes
`,C+=`  //        UDT = ${k}
`,C+=`  //        AND = ${A}
`,C+=`  //        NOT = ${I}
`,C+=`  //        BKA = ${M}
`,C+=`  //        BKN = ${E}
`,C+=`  //        BKR = ${j}
`,C+=`  //        ABG = ${L}
`,C+=`  //        AEN = ${le}
`,C+="  // characters = [",P+H+q===0?C+=" none defined ]":C+=`${X} - ${O}]`,k>0&&(C+=" + user defined"),C+=`
`,C+="  // ```\n",C+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,C+=`  this.grammarObject = 'grammarObject';
`,C+=`
`,C+=`  /* RULES */
`,C+=`  this.rules = [];
`,S.forEach((fe,oe)=>{let de="  this.rules[";de+=oe,de+="] = {name: '",de+=fe.name,de+="', lower: '",de+=fe.lower,de+="', index: ",de+=fe.index,de+=", isBkr: ",de+=fe.isBkr,de+=`};
`,C+=de}),C+=`
`,C+=`  /* UDTS */
`,C+=`  this.udts = [];
`,T.length>0&&T.forEach((fe,oe)=>{let de="  this.udts[";de+=oe,de+="] = {name: '",de+=fe.name,de+="', lower: '",de+=fe.lower,de+="', index: ",de+=fe.index,de+=", empty: ",de+=fe.empty,de+=", isBkr: ",de+=fe.isBkr,de+=`};
`,C+=de}),C+=`
`,C+=`  /* OPCODES */
`,S.forEach((fe,oe)=>{oe>0&&(C+=`
`),C+=`  /* ${fe.name} */
`,C+=`  this.rules[${oe}].opcodes = [];
`,fe.opcodes.forEach((de,ae)=>{let he;switch(de.type){case a.ALT:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}, children: [${de.children.toString()}]};// ALT
`;break;case a.CAT:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}, children: [${de.children.toString()}]};// CAT
`;break;case a.RNM:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}, index: ${de.index}};// RNM(${S[de.index].name})
`;break;case a.BKR:de.index>=S.length?(z=T[de.index-S.length].name,U=T[de.index-S.length].lower):(z=S[de.index].name,U=S[de.index].lower),he="%i",de.bkrCase===a.BKR_MODE_CS&&(he="%s"),de.bkrMode===a.BKR_MODE_UM?he+="%u":he+="%p",z=he+z,C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}, index: ${de.index}, lower: '${U}', bkrCase: ${de.bkrCase}, bkrMode: ${de.bkrMode}};// BKR(\\${z})
`;break;case a.UDT:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}, empty: ${de.empty}, index: ${de.index}};// UDT(${T[de.index].name})
`;break;case a.REP:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}, min: ${de.min}, max: ${de.max}};// REP
`;break;case a.AND:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}};// AND
`;break;case a.NOT:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}};// NOT
`;break;case a.ABG:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}};// ABG(%^)
`;break;case a.AEN:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}};// AEN(%$)
`;break;case a.BKA:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}};// BKA
`;break;case a.BKN:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}};// BKN
`;break;case a.TLS:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}, string: [${de.string.toString()}]};// TLS
`;break;case a.TBS:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}, string: [${de.string.toString()}]};// TBS
`;break;case a.TRG:C+=`  this.rules[${oe}].opcodes[${ae}] = {type: ${de.type}, min: ${de.min}, max: ${de.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),C+=`
`,C+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",C+=`  this.toString = function toString(){
`,C+=`    let str = "";
`;let ce;return w.forEach(fe=>{const oe=fe.beginChar+fe.length;ce="",C+='    str += "';for(let de=fe.beginChar;de<oe;de+=1){switch(_[de]){case 9:ce=" ";break;case 10:ce="\\n";break;case 13:ce="\\r";break;case 34:ce='\\"';break;case 92:ce="\\\\";break;default:ce=String.fromCharCode(_[de]);break}C+=ce}C+=`";
`}),C+=`    return str;
`,C+=`  }
`,C+=`}
`,C},this.generateObject=function(_,w,S){const T={},B=[],C=[],D=_.slice(0);return T.grammarObject="grammarObject",w.forEach(z=>{B.push(z.lower)}),B.sort(),S.length>0&&(S.forEach(z=>{C.push(z.lower)}),C.sort()),T.callbacks=[],B.forEach(z=>{T.callbacks[z]=!1}),S.length>0&&C.forEach(z=>{T.callbacks[z]=!1}),T.rules=w,T.udts=S,T.toString=function(){return D},T}}),parser$1}var ruleAttributes,hasRequiredRuleAttributes;function requireRuleAttributes(){return hasRequiredRuleAttributes||(hasRequiredRuleAttributes=1,ruleAttributes=function(){const e=requireIdentifiers(),n="rule-attributes.js";let a=null;function o(se){return se.left||se.nested||se.right||se.cyclic?!1:se.empty}function c(se){return!!(se.left||se.nested||se.right||se.cyclic)}function l(se,ie){let F=0,k=0,y=0;for(F=0;F<ie;F+=1)if(se[F].nested)return!0;for(F=0;F<ie;F+=1)if(se[F].right&&!se[F].leaf){for(k=F+1;k<ie;k+=1)if(!o(se[k]))return!0}for(F=ie-1;F>=0;F-=1)if(se[F].left&&!se[F].leaf){for(k=F-1;k>=0;k-=1)if(!o(se[k]))return!0}for(F=0;F<ie;F+=1)if(!se[F].empty&&!c(se[F])){for(k=F+1;k<ie;k+=1)if(c(se[k])){for(y=k+1;y<ie;y+=1)if(!se[y].empty&&!c(se[y]))return!0}}return!1}function u(se,ie){for(let F=0;F<ie;F+=1)if(!se[F].cyclic)return!1;return!0}function d(se,ie){for(let F=0;F<ie;F+=1){if(se[F].left)return!0;if(!se[F].empty)return!1}return!1}function m(se,ie){for(let F=ie-1;F>=0;F-=1){if(se[F].right)return!0;if(!se[F].empty)return!1}return!1}function b(se,ie){for(let F=0;F<ie;F+=1)if(!se[F].empty)return!1;return!0}function x(se,ie){for(let F=0;F<ie;F+=1)if(!se[F].finite)return!1;return!0}function _(se,ie,F,k){let y=0;const A=ie[F],I=A.children.length,P=[];for(y=0;y<I;y+=1)P.push(se.attrGen());for(y=0;y<I;y+=1)T(se,ie,A.children[y],P[y]);k.left=d(P,I),k.right=m(P,I),k.nested=l(P,I),k.empty=b(P,I),k.finite=x(P,I),k.cyclic=u(P,I)}function w(se,ie,F,k){let y=0;const A=ie[F],I=A.children.length,P=[];for(y=0;y<I;y+=1)P.push(se.attrGen());for(y=0;y<I;y+=1)T(se,ie,A.children[y],P[y]);for(k.left=!1,k.right=!1,k.nested=!1,k.empty=!1,k.finite=!1,k.cyclic=!1,y=0;y<I;y+=1)P[y].left&&(k.left=!0),P[y].nested&&(k.nested=!0),P[y].right&&(k.right=!0),P[y].empty&&(k.empty=!0),P[y].finite&&(k.finite=!0),P[y].cyclic&&(k.cyclic=!0)}function S(se,ie,F,k){const y=ie[F];y.index>=se.ruleCount?(k.empty=se.udts[y.index-se.ruleCount].empty,k.finite=!0):(B(se,y.index,k),k.left=!1,k.nested=!1,k.right=!1,k.cyclic=!1)}function T(se,ie,F,k){se.attrInit(k);const y=ie[F];switch(y.type){case e.ALT:w(se,ie,F,k);break;case e.CAT:_(se,ie,F,k);break;case e.REP:T(se,ie,F+1,k),y.min===0&&(k.empty=!0,k.finite=!0);break;case e.RNM:B(se,ie[F].index,k);break;case e.BKR:S(se,ie,F,k);break;case e.AND:case e.NOT:case e.BKA:case e.BKN:T(se,ie,F+1,k),k.empty=!0;break;case e.TLS:k.empty=!ie[F].string.length,k.finite=!0,k.cyclic=!1;break;case e.TBS:case e.TRG:k.empty=!1,k.finite=!0,k.cyclic=!1;break;case e.UDT:k.empty=y.empty,k.finite=!0,k.cyclic=!1;break;case e.ABG:case e.AEN:k.empty=!0,k.finite=!0,k.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${y}`)}}function B(se,ie,F){const k=se.attrsWorking[ie];k.isComplete?se.attrCopy(F,k):k.isOpen?ie===se.startRule?ie===se.startRule&&(F.left=!0,F.right=!0,F.cyclic=!0,F.leaf=!0):F.finite=!0:(k.isOpen=!0,T(se,k.rule.opcodes,0,F),k.left=F.left,k.right=F.right,k.nested=F.nested,k.empty=F.empty,k.finite=F.finite,k.cyclic=F.cyclic,k.leaf=!1,k.isOpen=!1,k.isComplete=!0)}const C=se=>{a=se;let ie=0,F=0;const k=a.attrGen();for(ie=0;ie<a.ruleCount;ie+=1){for(F=0;F<a.ruleCount;F+=1)a.attrInit(a.attrsWorking[F]);a.startRule=ie,B(a,ie,k),a.attrCopy(a.attrs[ie],a.attrsWorking[ie])}a.attributesComplete=!0;let y=null;for(ie=0;ie<a.ruleCount;ie+=1)if(y=a.attrs[ie],y.left||!y.finite||y.cyclic){const A=a.attrGen(y.rule);a.attrCopy(A,y),a.attrsErrors.push(A),a.attrsErrorCount+=1}},D=se=>se?"t":"f",z=se=>se?"e":"f",U=se=>se?"t":"e",Y=(se,ie,F,k)=>{let y=`${se}:${ie}:`;return y+=`${z(F.left)} `,y+=`${D(F.nested)} `,y+=`${D(F.right)} `,y+=`${z(F.cyclic)} `,y+=`${U(F.finite)} `,y+=`${D(F.empty)}:`,y+=`${a.typeToString(k.recursiveType)}:`,y+=k.recursiveType===e.ATTR_MR?k.groupNumber:"-",y+=`:${F.rule.name}
`,y},X=()=>{let se=`LEGEND - t=true, f=false, e=error
`;return se+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,se},O=()=>{let se=null,ie=null,F="";if(F+=`RULE ATTRIBUTES WITH ERRORS
`,F+=X(),a.attrsErrorCount)for(let k=0;k<a.attrsErrorCount;k+=1)se=a.attrsErrors[k],ie=a.ruleDeps[se.rule.index],F+=Y(k,se.rule.index,se,ie);else F+=`<none>
`;return F},J=se=>{let ie=0,F=0,k=null,y=null,A="",{ruleIndexes:I}=a;for(se===97?I=a.ruleAlphaIndexes:se===116&&(I=a.ruleTypeIndexes),ie=0;ie<a.ruleCount;ie+=1)F=I[ie],k=a.attrs[F],y=a.ruleDeps[F],A+=Y(ie,F,k,y);return A};return{ruleAttributes:C,showAttributes:(se="index")=>{if(!a.attributesComplete)throw new Error(`${n}:showAttributes: attributes not available`);let ie="";const F=`RULE ATTRIBUTES
`;return se.charCodeAt(0)===97?(ie+=`alphabetical by rule name
`,ie+=F,ie+=X(),ie+=J(97)):se.charCodeAt(0)===116?(ie+=`ordered by rule type
`,ie+=F,ie+=X(),ie+=J(116)):(ie+=`ordered by rule index
`,ie+=F,ie+=X(),ie+=J()),ie},showAttributeErrors:O}}()),ruleAttributes}var ruleDependencies,hasRequiredRuleDependencies;function requireRuleDependencies(){return hasRequiredRuleDependencies||(hasRequiredRuleDependencies=1,ruleDependencies=(()=>{const t=requireIdentifiers();let e=null;const n=(l,u,d,m)=>{let b=0,x=0;const _=u[d];m[d]=!0;const w=_.rule.opcodes;for(b=0;b<w.length;b+=1){const S=w[b];if(S.type===t.RNM)for(_.refersTo[S.index]=!0,m[S.index]||n(l,u,S.index,m),x=0;x<l;x+=1)u[S.index].refersTo[x]&&(_.refersTo[x]=!0);else S.type===t.UDT?_.refersToUdt[S.index]=!0:S.type===t.BKR&&(S.index<l?(_.refersTo[S.index]=!0,m[S.index]||n(l,u,S.index,m)):_.refersToUdt[l-S.index]=!0)}},a=l=>{e=l;let u=0,d=0,m=0,b=null,x=null,_=!1;e.dependenciesComplete=!1;const w=e.falseArray(e.ruleCount);for(u=0;u<e.ruleCount;u+=1)e.falsifyArray(w),n(e.ruleCount,e.ruleDeps,u,w);for(u=0;u<e.ruleCount;u+=1)for(d=0;d<e.ruleCount;d+=1)u!==d&&e.ruleDeps[d].refersTo[u]&&(e.ruleDeps[u].referencedBy[d]=!0);for(u=0;u<e.ruleCount;u+=1)e.ruleDeps[u].recursiveType=t.ATTR_N,e.ruleDeps[u].refersTo[u]&&(e.ruleDeps[u].recursiveType=t.ATTR_R);for(m=-1,u=0;u<e.ruleCount;u+=1)if(b=e.ruleDeps[u],b.recursiveType===t.ATTR_R)for(_=!0,d=0;d<e.ruleCount;d+=1)u!==d&&(x=e.ruleDeps[d],x.recursiveType===t.ATTR_R&&b.refersTo[d]&&x.refersTo[u]&&(_&&(m+=1,b.recursiveType=t.ATTR_MR,b.groupNumber=m,_=!1),x.recursiveType=t.ATTR_MR,x.groupNumber=m));e.isMutuallyRecursive=m>-1,e.ruleAlphaIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesType),e.isMutuallyRecursive&&e.ruleTypeIndexes.sort(e.compRulesGroup),e.udtCount&&e.udtAlphaIndexes.sort(e.compUdtsAlpha),e.dependenciesComplete=!0},o=(l=null)=>{let u=0,d=0,m=0,b=0;const x=e.ruleCount-1,_=e.udtCount-1,w=100;let S="",T="";const B="=> ",C="<= ";let D=!1,z=null,{ruleIndexes:U}=e,{udtIndexes:Y}=e;for(l===97?(U=e.ruleAlphaIndexes,Y=e.udtAlphaIndexes):l===116&&(U=e.ruleTypeIndexes,Y=e.udtAlphaIndexes),u=0;u<e.ruleCount;u+=1){for(z=e.ruleDeps[U[u]],T=`${U[u]}:${e.typeToString(z.recursiveType)}:`,e.isMutuallyRecursive&&(T+=z.groupNumber>-1?z.groupNumber:"-",T+=":"),T+=" ",S+=`${T+e.rules[U[u]].name}
`,D=!0,m=0,b=S.length,S+=T,d=0;d<e.ruleCount;d+=1)z.refersTo[U[d]]&&(D?(S+=B,D=!1,S+=e.ruleDeps[U[d]].rule.name):S+=`, ${e.ruleDeps[U[d]].rule.name}`,m+=1),S.length-b>w&&d!==x&&(S+=`
${T}${B}`,b=S.length);if(e.udtCount)for(d=0;d<e.udtCount;d+=1)z.refersToUdt[Y[d]]&&(D?(S+=B,D=!1,S+=e.udts[Y[d]].name):S+=`, ${e.udts[Y[d]].name}`,m+=1),S.length-b>w&&d!==_&&(S+=`
${T}${B}`,b=S.length);for(m===0&&(S+=`=> <none>
`),D===!1&&(S+=`
`),D=!0,m=0,b=S.length,S+=T,d=0;d<e.ruleCount;d+=1)z.referencedBy[U[d]]&&(D?(S+=C,D=!1,S+=e.ruleDeps[U[d]].rule.name):S+=`, ${e.ruleDeps[U[d]].rule.name}`,m+=1),S.length-b>w&&d!==x&&(S+=`
${T}${B}`,b=S.length);m===0&&(S+=`<= <none>
`),D===!1&&(S+=`
`),S+=`
`}return S};return{ruleDependencies:a,showRuleDependencies:(l="index")=>{let u=`RULE DEPENDENCIES(index:type:[group number:])
`;return u+=`=> refers to rule names
`,u+=`<= referenced by rule names
`,e.dependenciesComplete&&(l.charCodeAt(0)===97?(u+=`alphabetical by rule name
`,u+=o(97)):l.charCodeAt(0)===116?(u+=`ordered by rule type
`,u+=o(116)):(u+=`ordered by rule index
`,u+=o(null))),u}}})()),ruleDependencies}var attributes,hasRequiredAttributes;function requireAttributes(){return hasRequiredAttributes||(hasRequiredAttributes=1,attributes=function(){const e=requireIdentifiers(),{ruleAttributes:n,showAttributes:a,showAttributeErrors:o}=requireRuleAttributes(),{ruleDependencies:c,showRuleDependencies:l}=requireRuleDependencies();class u{constructor(b,x){this.rules=b,this.udts=x,this.ruleCount=b.length,this.udtCount=x.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let _=0;_<this.ruleCount;_+=1)this.attrs.push(this.attrGen(this.rules[_])),this.attrsWorking.push(this.attrGen(this.rules[_])),this.ruleDeps.push(this.rdGen(b[_],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(b){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:b}}attrInit(b){b.left=!1,b.nested=!1,b.right=!1,b.empty=!1,b.finite=!1,b.cyclic=!1,b.leaf=!1,b.isOpen=!1,b.isComplete=!1}attrCopy(b,x){b.left=x.left,b.nested=x.nested,b.right=x.right,b.empty=x.empty,b.finite=x.finite,b.cyclic=x.cyclic,b.leaf=x.leaf,b.isOpen=x.isOpen,b.isComplete=x.isComplete,b.rule=x.rule}rdGen(b,x,_){return{rule:b,recursiveType:e.ATTR_N,groupNumber:-1,refersTo:this.falseArray(x),refersToUdt:this.falseArray(_),referencedBy:this.falseArray(x)}}typeToString(b){switch(b){case e.ATTR_N:return" N";case e.ATTR_R:return" R";case e.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(b){const x=[];if(b>0)for(let _=0;_<b;_+=1)x.push(!1);return x}falsifyArray(b){for(let x=0;x<b.length;x+=1)b[x]=!1}indexArray(b){const x=[];if(b>0)for(let _=0;_<b;_+=1)x.push(_);return x}compRulesAlpha(b,x){return this.rules[b].lower<this.rules[x].lower?-1:this.rules[b].lower>this.rules[x].lower?1:0}compUdtsAlpha(b,x){return this.udts[b].lower<this.udts[x].lower?-1:this.udts[b].lower>this.udts[x].lower?1:0}compRulesType(b,x){return this.ruleDeps[b].recursiveType<this.ruleDeps[x].recursiveType?-1:this.ruleDeps[b].recursiveType>this.ruleDeps[x].recursiveType?1:0}compRulesGroup(b,x){if(this.ruleDeps[b].recursiveType===e.ATTR_MR&&this.ruleDeps[x].recursiveType===e.ATTR_MR){if(this.ruleDeps[b].groupNumber<this.ruleDeps[x].groupNumber)return-1;if(this.ruleDeps[b].groupNumber>this.ruleDeps[x].groupNumber)return 1}return 0}}return{attributes:function(b=[],x=[],_=[],w=[]){const S=new u(b,x);return c(S),n(S),S.attrsErrorCount&&w.push({line:0,char:0,msg:`${S.attrsErrorCount} attribute errors`}),S.attrsErrorCount},showAttributes:a,showAttributeErrors:o,showRuleDependencies:l}}()),attributes}var showRules,hasRequiredShowRules;function requireShowRules(){return hasRequiredShowRules||(hasRequiredShowRules=1,showRules=function(){const e="show-rules.js";return function(o=[],c=[],l="index"){const u="showRules";let d=[],m=[];const b=[],x=[],_=o,w=c,S=o.length,T=c.length;let B="RULE/UDT NAMES",C;function D(U,Y){return _[U].lower<_[Y].lower?-1:_[U].lower>_[Y].lower?1:0}function z(U,Y){return w[U].lower<w[Y].lower?-1:w[U].lower>w[Y].lower?1:0}if(!(Array.isArray(o)&&o.length))throw new Error(`${e}:${u}: rules arg must be array with length > 0`);if(!Array.isArray(c))throw new Error(`${e}:${u}: udts arg must be array`);for(C=0;C<S;C+=1)b.push(C);if(d=b.slice(0),d.sort(D),T){for(C=0;C<T;C+=1)x.push(C);m=x.slice(0),m.sort(z)}if(l.charCodeAt(0)===97){for(B+=` - alphabetical by rule/UDT name
`,C=0;C<S;C+=1)B+=`${C}: ${d[C]}: ${_[d[C]].name}
`;if(T)for(C=0;C<T;C+=1)B+=`${C}: ${m[C]}: ${w[m[C]].name}
`}else{for(B+=` - ordered by rule/UDT index
`,C=0;C<S;C+=1)B+=`${C}: ${_[C].name}
`;if(T)for(C=0;C<T;C+=1)B+=`${C}: ${w[C].name}
`}return B}}()),showRules}var api=function t(e){const n="api.js: ",a=this,o=requireNodeExports(),c=requireConverter(),l=requireScanner(),u=new(requireParser()),{attributes:d,showAttributes:m,showAttributeErrors:b,showRuleDependencies:x}=requireAttributes(),_=requireShowRules(),w=function(se,ie,F){const I=`<span class="${o.style.CLASS_CTRLCHAR}">`,P="</span>",H=`<span class="${o.style.CLASS_NOMATCH}">`,q="</span>";let j,M="";const E=!0;for(;E&&!(!Array.isArray(se)||se.length===0);){if(typeof ie!="number")throw new Error("abnfToHtml: beg must be type number");if(ie>=se.length)break;typeof F!="number"||ie+F>=se.length?j=se.length:j=ie+F;let L=0;for(let le=ie;le<j;le+=1){const Q=se[le];if(Q>=32&&Q<=126)switch(L===1?(M+=P,L=0):L===2&&(M+=q,L=0),Q){case 32:M+="&nbsp;";break;case 60:M+="&lt;";break;case 62:M+="&gt;";break;case 38:M+="&amp;";break;case 34:M+="&quot;";break;case 39:M+="&#039;";break;case 92:M+="&#092;";break;default:M+=String.fromCharCode(Q);break}else Q===9||Q===10||Q===13?(L===0?(M+=I,L=1):L===2&&(M+=q+I,L=1),Q===9&&(M+="TAB"),Q===10&&(M+="LF"),Q===13&&(M+="CR")):(L===0?(M+=H,L=2):L===1&&(M+=P+H,L=2),M+=`\\x${o.utils.charToHex(Q)}`)}L===2&&(M+=q),L===1&&(M+=P);break}return M},S=function(se,ie,F){let k="";for(let y=ie;y<ie+F;y+=1){const A=se[y];if(A>=32&&A<=126)k+=String.fromCharCode(A);else switch(A){case 9:k+="\\t";break;case 10:k+="\\n";break;case 13:k+="\\r";break;default:k+="\\unknown";break}}return k},T=function(se){let ie="Annotated Input Grammar";return se.forEach(F=>{ie+=`
`,ie+=`line no: ${F.lineNo}`,ie+=` : char index: ${F.beginChar}`,ie+=` : length: ${F.length}`,ie+=` : abnf: ${S(a.chars,F.beginChar,F.length)}`}),ie+=`
`,ie},B=function(se){let ie="";return ie+=`<table class="${o.style.CLASS_GRAMMAR}">
`,ie+=`<caption>Annotated Input Grammar</caption>
`,ie+="<tr>",ie+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",ie+=`</tr>
`,se.forEach(k=>{ie+="<tr>",ie+=`<td>${k.lineNo}`,ie+=`</td><td>${k.beginChar}`,ie+=`</td><td>${k.length}`,ie+=`</td><td>${w(a.chars,k.beginChar,k.length)}`,ie+="</td>",ie+=`</tr>
`}),ie+=`</table>
`,ie},C=function(se,ie,F,k){const[y]=o;let A="";const I=`<span class="${y.CLASS_NOMATCH}">&raquo;</span>`;return A+=`<p><table class="${y.CLASS_GRAMMAR}">
`,k&&typeof k=="string"&&(A+=`<caption>${k}</caption>
`),A+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,se.forEach(P=>{let H,q,j,M,E,L="",le="";ie.length===0?(E=I,q=0):(H=ie[P.line],j=H.beginChar,P.char>j&&(L=w(F,j,P.char-j)),j=P.char,M=H.beginChar+H.length,j<M&&(le=w(F,j,M-j)),E=L+I+le,q=P.char-H.beginChar,A+="<tr>",A+=`<td>${P.line}</td><td>${H.beginChar}</td><td>${q}</td><td>${E}</td>`,A+=`</tr>
`,A+="<tr>",A+=`<td colspan="3"></td><td>&uarr;:&nbsp;${o.utils.stringToAsciiHtml(P.msg)}</td>`,A+=`</tr>
`)}),A+=`</table></p>
`,A},D=function(se,ie,F){let k,y,A,I;return k="",se.forEach(P=>{y=ie[P.line],k+=`${y.lineNo}: `,k+=`${y.beginChar}: `,k+=`${P.char-y.beginChar}: `,A=y.beginChar,I=P.char-y.beginChar,k+=S(F,A,I),k+=" >> ",A=P.char,I=y.beginChar+y.length-P.char,k+=S(F,A,I),k+=`
`,k+=`${y.lineNo}: `,k+=`${y.beginChar}: `,k+=`${P.char-y.beginChar}: `,k+="error: ",k+=P.msg,k+=`
`}),k};let z=!1,U=!1,Y=!1,X=!1,O=0,J;if(this.errors=[],Buffer$x.isBuffer(e))this.chars=c.decode("BINARY",e);else if(Array.isArray(e))this.chars=e.slice();else if(typeof e=="string")this.chars=c.decode("STRING",e);else throw new Error(`${n}input source is not a string, byte Buffer or character array`);this.sabnf=c.encode("STRING",this.chars),this.scan=function(se,ie){this.lines=l(this.chars,this.errors,se,ie),z=!0},this.parse=function(se,ie){if(!z)throw new Error(`${n}grammar not scanned`);u.syntax(this.chars,this.lines,this.errors,se,ie),U=!0},this.translate=function(){if(!U)throw new Error(`${n}grammar not scanned and parsed`);const se=u.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=se.rules,this.udts=se.udts,J=se.lineMap,Y=!0)},this.attributes=function(){if(!Y)throw new Error(`${n}grammar not scanned, parsed and translated`);return O=d(this.rules,this.udts,J,this.errors),X=!0,O},this.generate=function(se){if(this.lines=l(this.chars,this.errors,se),this.errors.length||(u.syntax(this.chars,this.lines,this.errors,se),this.errors.length))return;const ie=u.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=ie.rules,this.udts=ie.udts,J=ie.lineMap,O=d(this.rules,this.udts,J,this.errors),X=!0)},this.displayRules=function(se="index"){if(!Y)throw new Error(`${n}grammar not scanned, parsed and translated`);return _(this.rules,this.udts,se)},this.displayRuleDependencies=function(se="index"){if(!X)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return x(se)},this.displayAttributes=function(se="index"){if(!X)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return O&&b(se),m(se)},this.displayAttributeErrors=function(){if(!X)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return b()},this.toSource=function(se){if(!X)throw new Error(`${n}can't generate parser source - must be preceeded by call to attributes()`);if(O)throw new Error(`${n}can't generate parser source - attributes have ${O} errors`);return u.generateSource(this.chars,this.lines,this.rules,this.udts,se)},this.toObject=function(){if(!X)throw new Error(`${n}can't generate parser source - must be preceeded by call to attributes()`);if(O)throw new Error(`${n}can't generate parser source - attributes have ${O} errors`);return u.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return D(this.errors,this.lines,this.chars)},this.errorsToHtml=function(se){return C(this.errors,this.lines,this.chars,se)},this.linesToAscii=function(){return T(this.lines)},this.linesToHtml=function(){return B(this.lines)}},nodeExportsExports=requireNodeExports();const apgLib=getDefaultExportFromCjs(nodeExportsExports),GRAMMAR=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = dnsauthority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = *( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 4501

dnsauthority    = host [ ":" port ]
                             ; See RFC 3986 for the
                             ; definition of "host" and "port".

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`;class ParsedMessage{constructor(e){const n=new api(GRAMMAR);if(n.generate(),n.errors.length)throw console.error(n.errorsToAscii()),console.error(n.linesToAscii()),console.log(n.displayAttributeErrors()),new Error("ABNF grammar has errors");const a=n.toObject(),o=new apgLib.parser;o.ast=new apgLib.ast;const c=apgLib.ids,l=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.domain=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks.domain=l;const u=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.address=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks.address=u;const d=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.statement=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks.statement=d;const m=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.uri||(J.uri=apgLib.utils.charsToString(Y,X,O))),Z};o.ast.callbacks.uri=m;const b=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.version=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks.version=b;const x=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.chainId=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks["chain-id"]=x;const _=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.nonce=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks.nonce=_;const w=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.issuedAt=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks["issued-at"]=w;const S=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.expirationTime=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks["expiration-time"]=S;const T=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.notBefore=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks["not-before"]=T;const B=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.requestId=apgLib.utils.charsToString(Y,X,O)),Z};o.ast.callbacks["request-id"]=B;const C=function(U,Y,X,O,J){const Z=c.SEM_OK;return U===c.SEM_PRE&&(J.resources=apgLib.utils.charsToString(Y,X,O).slice(3).split(`
- `)),Z};o.ast.callbacks.resources=C;const D=o.parse(a,"sign-in-with-ethereum",e);if(!D.success)throw new Error(`Invalid message: ${JSON.stringify(D)}`);const z={};o.ast.translate(z);for(const[U,Y]of Object.entries(z))this[U]=Y}}function _extends(){return _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_extends.apply(this,arguments)}var CAIP2={name:"chainId",regex:"[-:a-zA-Z0-9]{5,41}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP10={name:"accountId",regex:"[-:a-zA-Z0-9]{7,106}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"},2:{name:"address",regex:"[a-zA-Z0-9]{1,64}"}}}},AssetName$1={name:"assetName",regex:"[-:a-zA-Z0-9]{5,73}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,64}"}}}},CAIP19AssetType={name:"assetType",regex:"[-:a-zA-Z0-9]{11,115}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1}}},CAIP19AssetId={name:"assetId",regex:"[-:a-zA-Z0-9]{13,148}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1,2:{name:"tokenId",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP={2:CAIP2,10:CAIP10,19:{assetName:AssetName$1,assetType:CAIP19AssetType,assetId:CAIP19AssetId}};function splitParams(t,e){return t.split(e.parameters.delimiter)}function getParams(t,e){var n=splitParams(t,e),a={};return n.forEach(function(o,c){a[e.parameters.values[c].name]=o}),a}function joinParams(t,e){return Object.values(e.parameters.values).map(function(n){var a=t[n.name];return typeof a=="string"?a:joinParams(a,n)}).join(e.parameters.delimiter)}function isValidId(t,e){if(!new RegExp(e.regex).test(t))return!1;var n=splitParams(t,e);if(n.length!==Object.keys(e.parameters.values).length)return!1;var a=n.map(function(o,c){return new RegExp(e.parameters.values[c].regex).test(o)}).filter(function(o){return!!o});return a.length===n.length}var ChainId=function(){function t(n){typeof n=="string"&&(n=t.parse(n)),this.namespace=n.namespace,this.reference=n.reference}t.parse=function(a){if(!isValidId(a,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+a);return new t(getParams(a,this.spec)).toJSON()},t.format=function(a){return joinParams(a,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},t}();ChainId.spec=CAIP[2];var AccountId=function(){function t(n){typeof n=="string"&&(n=t.parse(n)),this.chainId=new ChainId(n.chainId),this.address=n.address}t.parse=function(a){if(!isValidId(a,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+a);var o=getParams(a,this.spec),c=o.namespace,l=o.reference,u=o.address,d=new ChainId({namespace:c,reference:l});return new t({chainId:d,address:u}).toJSON()},t.format=function(a){var o=new ChainId(a.chainId),c=_extends({},o.toJSON(),{address:a.address});return joinParams(c,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{chainId:this.chainId.toJSON(),address:this.address}},t}();AccountId.spec=CAIP[10];var ErrorTypes;(function(t){t.INVALID_SIGNATURE="Invalid signature.",t.EXPIRED_MESSAGE="Expired message.",t.MALFORMED_SESSION="Malformed session."})(ErrorTypes||(ErrorTypes={}));var SignatureType;(function(t){t.PERSONAL_SIGNATURE="Personal signature"})(SignatureType||(SignatureType={}));class SiwxMessage{static fromCacao(e){const n=AccountId.parse(e.p.iss.replace("did:pkh:","")),a=new this({domain:e.p.domain,address:n.address,uri:e.p.aud,version:e.p.version,chainId:new ChainId(n.chainId).reference});return e.p.statement&&(a.statement=e.p.statement),e.p.nonce&&(a.nonce=e.p.nonce),e.p.iat&&(a.issuedAt=e.p.iat),e.p.exp&&(a.expirationTime=e.p.exp),e.p.nbf&&(a.notBefore=e.p.nbf),e.p.requestId&&(a.requestId=e.p.requestId),e.p.resources&&(a.resources=e.p.resources),e.s&&(e.s.s&&(a.signature=e.s.s),e.s.t==="eip191"&&(a.type=SignatureType.PERSONAL_SIGNATURE)),a}toMessage(e){return asString(this,e)}constructor(e){if(this.statement=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.resources=void 0,this.signature=void 0,typeof e=="string"){const n=new ParsedMessage(e);this.domain=n.domain,this.address=n.address,this.statement=n.statement,this.uri=n.uri,this.version=n.version,this.nonce=n.nonce,this.issuedAt=n.issuedAt,this.expirationTime=n.expirationTime,this.notBefore=n.notBefore,this.requestId=n.requestId,this.chainId=n.chainId,this.resources=n.resources}else Object.assign(this,e)}}function asLegacyChainIdString(t,e){const n=`${t.domain} wants you to sign in with your ${e} account:`,a=`URI: ${t.uri}`;let o=[n,t.address].join(`
`);const c=`Version: ${t.version}`;t.nonce||(t.nonce=(Math.random()+1).toString(36).substring(4));const l=`Nonce: ${t.nonce}`,u=[a,c,l];if(t.issuedAt&&Date.parse(t.issuedAt),t.issuedAt=t.issuedAt?t.issuedAt:new Date().toISOString(),u.push(`Issued At: ${t.issuedAt}`),t.expirationTime){const m=`Expiration Time: ${t.expirationTime}`;u.push(m)}t.notBefore&&u.push(`Not Before: ${t.notBefore}`),t.requestId&&u.push(`Request ID: ${t.requestId}`),t.chainId&&u.push(`Chain ID: ${t.chainId}`),t.resources&&u.push(["Resources:",...t.resources.map(m=>`- ${m}`)].join(`
`));const d=u.join(`
`);return t.statement&&(o=[o,t.statement].join(`

`)),[o,d].join(`

`)}function asString(t,e){const n=`${t.domain} wants you to sign in with your ${e} account:`,a=`URI: ${t.uri}`;let o=[n,t.address].join(`
`);const c=`Version: ${t.version}`;t.nonce||(t.nonce=(Math.random()+1).toString(36).substring(4));const l=`Nonce: ${t.nonce}`,u=`Chain ID: ${t.chainId}`,d=[a,c,u,l];if(t.issuedAt&&Date.parse(t.issuedAt),t.issuedAt=t.issuedAt?t.issuedAt:new Date().toISOString(),d.push(`Issued At: ${t.issuedAt}`),t.expirationTime){const b=`Expiration Time: ${t.expirationTime}`;d.push(b)}t.notBefore&&d.push(`Not Before: ${t.notBefore}`),t.requestId&&d.push(`Request ID: ${t.requestId}`),t.resources&&t.resources.length>=1&&d.push(["Resources:",...t.resources.map(b=>`- ${b}`)].join(`
`));const m=d.join(`
`);return t.statement&&(o=[o,t.statement].join(`

`)),[o,m].join(`

`)}class SiweMessage extends SiwxMessage{toMessage(){return super.toMessage("Ethereum")}signMessage(){let e;switch(this.type){case SignatureType.PERSONAL_SIGNATURE:{e=this.toMessage();break}default:{e=this.toMessage();break}}return e}}const CID_CBOR_TAG=42;function cidEncoder(t){if(t.asCID!==t)return null;const e=CID$1.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,n)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(t.subarray(1))}const decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name="dag-cbor",code$2=113,encode$c=t=>encode$p(t,encodeOptions),decode$b=t=>decode$o(t,decodeOptions),dagCbor=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,decode:decode$b,encode:encode$c,name},Symbol.toStringTag,{value:"Module"})),CLOCK_SKEW_DEFAULT_SEC=5*60;new Date("2022-09-20").valueOf();var Cacao;(function(t){function e(l){const u={h:{t:"eip4361"},p:{domain:l.domain,iat:l.issuedAt,iss:`did:pkh:eip155:${l.chainId}:${l.address}`,aud:l.uri,version:l.version,nonce:l.nonce}};return l.signature&&(u.s={t:"eip191",s:l.signature}),l.notBefore&&(u.p.nbf=l.notBefore),l.expirationTime&&(u.p.exp=l.expirationTime),l.statement&&(u.p.statement=l.statement),l.requestId&&(u.p.requestId=l.requestId),l.resources&&(u.p.resources=l.resources),u}t.fromSiweMessage=e;function n(l){const u={h:{t:"caip122"},p:{domain:l.domain,iat:l.issuedAt,iss:`did:pkh:solana:${l.chainId}:${l.address}`,aud:l.uri,version:l.version,nonce:l.nonce}};return l.signature&&(u.s={t:"solana:ed25519",s:l.signature}),l.notBefore&&(u.p.nbf=l.notBefore),l.expirationTime&&(u.p.exp=l.expirationTime),l.statement&&(u.p.statement=l.statement),l.requestId&&(u.p.requestId=l.requestId),l.resources&&(u.p.resources=l.resources),u}t.fromSiwsMessage=n;function a(l){const u={h:{t:"caip122"},p:{domain:l.domain,iat:l.issuedAt,iss:`did:pkh:tezos:${l.chainId}:${l.address}`,aud:l.uri,version:l.version,nonce:l.nonce}};return l.signature&&(u.s={t:"tezos:ed25519",s:l.signature}),l.notBefore&&(u.p.nbf=l.notBefore),l.expirationTime&&(u.p.exp=l.expirationTime),l.statement&&(u.p.statement=l.statement),l.requestId&&(u.p.requestId=l.requestId),l.resources&&(u.p.resources=l.resources),u}t.fromSiwTezosMessage=a;async function o(l){return(await decode$d({bytes:l,codec:dagCbor,hasher:sha256$3})).value}t.fromBlockBytes=o;async function c(l,u={}){assertSigned(l);const d=u.verifiers[l.s.t];if(!d)throw new Error("Unsupported CACAO signature type, register the needed verifier");return d(l,u)}t.verify=c})(Cacao||(Cacao={}));var CacaoBlock;(function(t){function e(n){return encode$e({value:n,codec:dagCbor,hasher:sha256$3})}t.fromCacao=e})(CacaoBlock||(CacaoBlock={}));function assertSigned(t){if(t.s===null||t.s===void 0)throw new Error("CACAO does not have a signature")}function verifyTimeChecks(t,e){const n=e.atTime?e.atTime.getTime():Date.now(),a=(e.clockSkewSecs??CLOCK_SKEW_DEFAULT_SEC)*1e3;if(Date.parse(t.p.iat)>n+a||Date.parse(t.p.nbf)>n+a)throw new Error("CACAO is not valid yet");const o=e.revocationPhaseOutSecs?e.revocationPhaseOutSecs*1e3:0;if(!e.disableExpirationCheck&&Date.parse(t.p.exp)+o+a<n)throw new Error("CACAO has expired")}const version$i="logger/5.7.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,n){const a=e.toLowerCase();LogLevels[a]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(_logLevel>LogLevels[a])&&console.log.apply(console,n)}debug(...e){this._log(Logger.levels.DEBUG,e)}info(...e){this._log(Logger.levels.INFO,e)}warn(...e){this._log(Logger.levels.WARNING,e)}makeError(e,n,a){if(_censorErrors)return this.makeError("censored error",n,{});n||(n=Logger.errors.UNKNOWN_ERROR),a||(a={});const o=[];Object.keys(a).forEach(d=>{const m=a[d];try{if(m instanceof Uint8Array){let b="";for(let x=0;x<m.length;x++)b+=HEX[m[x]>>4],b+=HEX[m[x]&15];o.push(d+"=Uint8Array(0x"+b+")")}else o.push(d+"="+JSON.stringify(m))}catch{o.push(d+"="+JSON.stringify(a[d].toString()))}}),o.push(`code=${n}`),o.push(`version=${this.version}`);const c=e;let l="";switch(n){case ErrorCode.NUMERIC_FAULT:{l="NUMERIC_FAULT";const d=e;switch(d){case"overflow":case"underflow":case"division-by-zero":l+="-"+d;break;case"negative-power":case"negative-width":l+="-unsupported";break;case"unbound-bitwise-result":l+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:l=n;break}l&&(e+=" [ See: https://links.ethers.org/v5-errors-"+l+" ]"),o.length&&(e+=" ("+o.join(", ")+")");const u=new Error(e);return u.reason=c,u.code=n,Object.keys(a).forEach(function(d){u[d]=a[d]}),u}throwError(e,n,a){throw this.makeError(e,n,a)}throwArgumentError(e,n,a){return this.throwError(e,Logger.errors.INVALID_ARGUMENT,{argument:n,value:a})}assert(e,n,a,o){e||this.throwError(n,a,o)}assertArgument(e,n,a,o){e||this.throwArgumentError(n,a,o)}checkNormalize(e){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(e,n){typeof e=="number"&&(n==null&&(n="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(n,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(n,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,n,a){a?a=": "+a:a="",e<n&&this.throwError("missing argument"+a,Logger.errors.MISSING_ARGUMENT,{count:e,expectedCount:n}),e>n&&this.throwError("too many arguments"+a,Logger.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:n})}checkNew(e,n){(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:n.name})}checkAbstract(e,n){e===n?this.throwError("cannot instantiate abstract class "+JSON.stringify(n.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:n.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$i)),_globalLogger}static setCensorship(e,n){if(!e&&n&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!e)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!e,_permanentCensorErrors=!!n}static setLogLevel(e){const n=LogLevels[e.toLowerCase()];if(n==null){Logger.globalLogger().warn("invalid log level - "+e);return}_logLevel=n}static from(e){return new Logger(e)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const version$h="bytes/5.7.0",logger$l=new Logger(version$h);function isHexable(t){return!!t.toHexString}function addSlice(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function isBytesLike(t){return isHexString(t)&&!(t.length%2)||isBytes(t)}function isInteger(t){return typeof t=="number"&&t==t&&t%1===0}function isBytes(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!isInteger(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const n=t[e];if(!isInteger(n)||n<0||n>=256)return!1}return!0}function arrayify(t,e){if(e||(e={}),typeof t=="number"){logger$l.checkSafeUint53(t,"invalid arrayify value");const n=[];for(;t;)n.unshift(t&255),t=parseInt(String(t/256));return n.length===0&&n.push(0),addSlice(new Uint8Array(n))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t)&&(t=t.toHexString()),isHexString(t)){let n=t.substring(2);n.length%2&&(e.hexPad==="left"?n="0"+n:e.hexPad==="right"?n+="0":logger$l.throwArgumentError("hex data is odd-length","value",t));const a=[];for(let o=0;o<n.length;o+=2)a.push(parseInt(n.substring(o,o+2),16));return addSlice(new Uint8Array(a))}return isBytes(t)?addSlice(new Uint8Array(t)):logger$l.throwArgumentError("invalid arrayify value","value",t)}function concat(t){const e=t.map(o=>arrayify(o)),n=e.reduce((o,c)=>o+c.length,0),a=new Uint8Array(n);return e.reduce((o,c)=>(a.set(c,o),o+c.length),0),addSlice(a)}function stripZeros(t){let e=arrayify(t);if(e.length===0)return e;let n=0;for(;n<e.length&&e[n]===0;)n++;return n&&(e=e.slice(n)),e}function zeroPad(t,e){t=arrayify(t),t.length>e&&logger$l.throwArgumentError("value out of range","value",arguments[0]);const n=new Uint8Array(e);return n.set(t,e-t.length),addSlice(n)}function isHexString(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const HexCharacters="0123456789abcdef";function hexlify(t,e){if(e||(e={}),typeof t=="number"){logger$l.checkSafeUint53(t,"invalid hexlify value");let n="";for(;t;)n=HexCharacters[t&15]+n,t=Math.floor(t/16);return n.length?(n.length%2&&(n="0"+n),"0x"+n):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t))return t.toHexString();if(isHexString(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":logger$l.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(isBytes(t)){let n="0x";for(let a=0;a<t.length;a++){let o=t[a];n+=HexCharacters[(o&240)>>4]+HexCharacters[o&15]}return n}return logger$l.throwArgumentError("invalid hexlify value","value",t)}function hexDataLength(t){if(typeof t!="string")t=hexlify(t);else if(!isHexString(t)||t.length%2)return null;return(t.length-2)/2}function hexDataSlice(t,e,n){return typeof t!="string"?t=hexlify(t):(!isHexString(t)||t.length%2)&&logger$l.throwArgumentError("invalid hexData","value",t),e=2+2*e,n!=null?"0x"+t.substring(e,2+2*n):"0x"+t.substring(e)}function hexConcat(t){let e="0x";return t.forEach(n=>{e+=hexlify(n).substring(2)}),e}function hexZeroPad(t,e){for(typeof t!="string"?t=hexlify(t):isHexString(t)||logger$l.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&logger$l.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function splitSignature(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(t)){let n=arrayify(t);n.length===64?(e.v=27+(n[32]>>7),n[32]&=127,e.r=hexlify(n.slice(0,32)),e.s=hexlify(n.slice(32,64))):n.length===65?(e.r=hexlify(n.slice(0,32)),e.s=hexlify(n.slice(32,64)),e.v=n[64]):logger$l.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:logger$l.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(n[32]|=128),e._vs=hexlify(n.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const o=zeroPad(arrayify(e._vs),32);e._vs=hexlify(o);const c=o[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=c:e.recoveryParam!==c&&logger$l.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),o[0]&=127;const l=hexlify(o);e.s==null?e.s=l:e.s!==l&&logger$l.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?logger$l.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const o=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==o&&logger$l.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!isHexString(e.r)?logger$l.throwArgumentError("signature missing or invalid r","signature",t):e.r=hexZeroPad(e.r,32),e.s==null||!isHexString(e.s)?logger$l.throwArgumentError("signature missing or invalid s","signature",t):e.s=hexZeroPad(e.s,32);const n=arrayify(e.s);n[0]>=128&&logger$l.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(n[0]|=128);const a=hexlify(n);e._vs&&(isHexString(e._vs)||logger$l.throwArgumentError("signature invalid _vs","signature",t),e._vs=hexZeroPad(e._vs,32)),e._vs==null?e._vs=a:e._vs!==a&&logger$l.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function joinSignature(t){return t=splitSignature(t),hexlify(concat([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}var bnExports$1={},bn$1={get exports(){return bnExports$1},set exports(t){bnExports$1=t}};(function(t){(function(e,n){function a(k,y){if(!k)throw new Error(y||"Assertion failed")}function o(k,y){k.super_=y;var A=function(){};A.prototype=y.prototype,k.prototype=new A,k.prototype.constructor=k}function c(k,y,A){if(c.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((y==="le"||y==="be")&&(A=y,y=10),this._init(k||0,y||10,A||"be"))}typeof e=="object"?e.exports=c:n.BN=c,c.BN=c,c.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$2.Buffer}catch{}c.isBN=function(y){return y instanceof c?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===c.wordSize&&Array.isArray(y.words)},c.max=function(y,A){return y.cmp(A)>0?y:A},c.min=function(y,A){return y.cmp(A)<0?y:A},c.prototype._init=function(y,A,I){if(typeof y=="number")return this._initNumber(y,A,I);if(typeof y=="object")return this._initArray(y,A,I);A==="hex"&&(A=16),a(A===(A|0)&&A>=2&&A<=36),y=y.toString().replace(/\s+/g,"");var P=0;y[0]==="-"&&(P++,this.negative=1),P<y.length&&(A===16?this._parseHex(y,P,I):(this._parseBase(y,A,P),I==="le"&&this._initArray(this.toArray(),A,I)))},c.prototype._initNumber=function(y,A,I){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(a(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),I==="le"&&this._initArray(this.toArray(),A,I)},c.prototype._initArray=function(y,A,I){if(a(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var H,q,j=0;if(I==="be")for(P=y.length-1,H=0;P>=0;P-=3)q=y[P]|y[P-1]<<8|y[P-2]<<16,this.words[H]|=q<<j&67108863,this.words[H+1]=q>>>26-j&67108863,j+=24,j>=26&&(j-=26,H++);else if(I==="le")for(P=0,H=0;P<y.length;P+=3)q=y[P]|y[P+1]<<8|y[P+2]<<16,this.words[H]|=q<<j&67108863,this.words[H+1]=q>>>26-j&67108863,j+=24,j>=26&&(j-=26,H++);return this._strip()};function u(k,y){var A=k.charCodeAt(y);if(A>=48&&A<=57)return A-48;if(A>=65&&A<=70)return A-55;if(A>=97&&A<=102)return A-87;a(!1,"Invalid character in "+k)}function d(k,y,A){var I=u(k,A);return A-1>=y&&(I|=u(k,A-1)<<4),I}c.prototype._parseHex=function(y,A,I){this.length=Math.ceil((y.length-A)/6),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var H=0,q=0,j;if(I==="be")for(P=y.length-1;P>=A;P-=2)j=d(y,A,P)<<H,this.words[q]|=j&67108863,H>=18?(H-=18,q+=1,this.words[q]|=j>>>26):H+=8;else{var M=y.length-A;for(P=M%2===0?A+1:A;P<y.length;P+=2)j=d(y,A,P)<<H,this.words[q]|=j&67108863,H>=18?(H-=18,q+=1,this.words[q]|=j>>>26):H+=8}this._strip()};function m(k,y,A,I){for(var P=0,H=0,q=Math.min(k.length,A),j=y;j<q;j++){var M=k.charCodeAt(j)-48;P*=I,M>=49?H=M-49+10:M>=17?H=M-17+10:H=M,a(M>=0&&H<I,"Invalid character"),P+=H}return P}c.prototype._parseBase=function(y,A,I){this.words=[0],this.length=1;for(var P=0,H=1;H<=67108863;H*=A)P++;P--,H=H/A|0;for(var q=y.length-I,j=q%P,M=Math.min(q,q-j)+I,E=0,L=I;L<M;L+=P)E=m(y,L,L+P,A),this.imuln(H),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(j!==0){var le=1;for(E=m(y,L,y.length,A),L=0;L<j;L++)le*=A;this.imuln(le),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}this._strip()},c.prototype.copy=function(y){y.words=new Array(this.length);for(var A=0;A<this.length;A++)y.words[A]=this.words[A];y.length=this.length,y.negative=this.negative,y.red=this.red};function b(k,y){k.words=y.words,k.length=y.length,k.negative=y.negative,k.red=y.red}if(c.prototype._move=function(y){b(y,this)},c.prototype.clone=function(){var y=new c(null);return this.copy(y),y},c.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},c.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{c.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{c.prototype.inspect=x}else c.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(y,A){y=y||10,A=A|0||1;var I;if(y===16||y==="hex"){I="";for(var P=0,H=0,q=0;q<this.length;q++){var j=this.words[q],M=((j<<P|H)&16777215).toString(16);H=j>>>24-P&16777215,P+=2,P>=26&&(P-=26,q--),H!==0||q!==this.length-1?I=_[6-M.length]+M+I:I=M+I}for(H!==0&&(I=H.toString(16)+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}if(y===(y|0)&&y>=2&&y<=36){var E=w[y],L=S[y];I="";var le=this.clone();for(le.negative=0;!le.isZero();){var Q=le.modrn(L).toString(y);le=le.idivn(L),le.isZero()?I=Q+I:I=_[E-Q.length]+Q+I}for(this.isZero()&&(I="0"+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},c.prototype.toJSON=function(){return this.toString(16,2)},l&&(c.prototype.toBuffer=function(y,A){return this.toArrayLike(l,y,A)}),c.prototype.toArray=function(y,A){return this.toArrayLike(Array,y,A)};var T=function(y,A){return y.allocUnsafe?y.allocUnsafe(A):new y(A)};c.prototype.toArrayLike=function(y,A,I){this._strip();var P=this.byteLength(),H=I||Math.max(1,P);a(P<=H,"byte array longer than desired length"),a(H>0,"Requested array length <= 0");var q=T(y,H),j=A==="le"?"LE":"BE";return this["_toArrayLike"+j](q,P),q},c.prototype._toArrayLikeLE=function(y,A){for(var I=0,P=0,H=0,q=0;H<this.length;H++){var j=this.words[H]<<q|P;y[I++]=j&255,I<y.length&&(y[I++]=j>>8&255),I<y.length&&(y[I++]=j>>16&255),q===6?(I<y.length&&(y[I++]=j>>24&255),P=0,q=0):(P=j>>>24,q+=2)}if(I<y.length)for(y[I++]=P;I<y.length;)y[I++]=0},c.prototype._toArrayLikeBE=function(y,A){for(var I=y.length-1,P=0,H=0,q=0;H<this.length;H++){var j=this.words[H]<<q|P;y[I--]=j&255,I>=0&&(y[I--]=j>>8&255),I>=0&&(y[I--]=j>>16&255),q===6?(I>=0&&(y[I--]=j>>24&255),P=0,q=0):(P=j>>>24,q+=2)}if(I>=0)for(y[I--]=P;I>=0;)y[I--]=0},Math.clz32?c.prototype._countBits=function(y){return 32-Math.clz32(y)}:c.prototype._countBits=function(y){var A=y,I=0;return A>=4096&&(I+=13,A>>>=13),A>=64&&(I+=7,A>>>=7),A>=8&&(I+=4,A>>>=4),A>=2&&(I+=2,A>>>=2),I+A},c.prototype._zeroBits=function(y){if(y===0)return 26;var A=y,I=0;return A&8191||(I+=13,A>>>=13),A&127||(I+=7,A>>>=7),A&15||(I+=4,A>>>=4),A&3||(I+=2,A>>>=2),A&1||I++,I},c.prototype.bitLength=function(){var y=this.words[this.length-1],A=this._countBits(y);return(this.length-1)*26+A};function B(k){for(var y=new Array(k.bitLength()),A=0;A<y.length;A++){var I=A/26|0,P=A%26;y[A]=k.words[I]>>>P&1}return y}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,A=0;A<this.length;A++){var I=this._zeroBits(this.words[A]);if(y+=I,I!==26)break}return y},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},c.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var A=0;A<y.length;A++)this.words[A]=this.words[A]|y.words[A];return this._strip()},c.prototype.ior=function(y){return a((this.negative|y.negative)===0),this.iuor(y)},c.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},c.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},c.prototype.iuand=function(y){var A;this.length>y.length?A=y:A=this;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]&y.words[I];return this.length=A.length,this._strip()},c.prototype.iand=function(y){return a((this.negative|y.negative)===0),this.iuand(y)},c.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},c.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},c.prototype.iuxor=function(y){var A,I;this.length>y.length?(A=this,I=y):(A=y,I=this);for(var P=0;P<I.length;P++)this.words[P]=A.words[P]^I.words[P];if(this!==A)for(;P<A.length;P++)this.words[P]=A.words[P];return this.length=A.length,this._strip()},c.prototype.ixor=function(y){return a((this.negative|y.negative)===0),this.iuxor(y)},c.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},c.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},c.prototype.inotn=function(y){a(typeof y=="number"&&y>=0);var A=Math.ceil(y/26)|0,I=y%26;this._expand(A),I>0&&A--;for(var P=0;P<A;P++)this.words[P]=~this.words[P]&67108863;return I>0&&(this.words[P]=~this.words[P]&67108863>>26-I),this._strip()},c.prototype.notn=function(y){return this.clone().inotn(y)},c.prototype.setn=function(y,A){a(typeof y=="number"&&y>=0);var I=y/26|0,P=y%26;return this._expand(I+1),A?this.words[I]=this.words[I]|1<<P:this.words[I]=this.words[I]&~(1<<P),this._strip()},c.prototype.iadd=function(y){var A;if(this.negative!==0&&y.negative===0)return this.negative=0,A=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,A=this.isub(y),y.negative=1,A._normSign();var I,P;this.length>y.length?(I=this,P=y):(I=y,P=this);for(var H=0,q=0;q<P.length;q++)A=(I.words[q]|0)+(P.words[q]|0)+H,this.words[q]=A&67108863,H=A>>>26;for(;H!==0&&q<I.length;q++)A=(I.words[q]|0)+H,this.words[q]=A&67108863,H=A>>>26;if(this.length=I.length,H!==0)this.words[this.length]=H,this.length++;else if(I!==this)for(;q<I.length;q++)this.words[q]=I.words[q];return this},c.prototype.add=function(y){var A;return y.negative!==0&&this.negative===0?(y.negative=0,A=this.sub(y),y.negative^=1,A):y.negative===0&&this.negative!==0?(this.negative=0,A=y.sub(this),this.negative=1,A):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},c.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var A=this.iadd(y);return y.negative=1,A._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var I=this.cmp(y);if(I===0)return this.negative=0,this.length=1,this.words[0]=0,this;var P,H;I>0?(P=this,H=y):(P=y,H=this);for(var q=0,j=0;j<H.length;j++)A=(P.words[j]|0)-(H.words[j]|0)+q,q=A>>26,this.words[j]=A&67108863;for(;q!==0&&j<P.length;j++)A=(P.words[j]|0)+q,q=A>>26,this.words[j]=A&67108863;if(q===0&&j<P.length&&P!==this)for(;j<P.length;j++)this.words[j]=P.words[j];return this.length=Math.max(this.length,j),P!==this&&(this.negative=1),this._strip()},c.prototype.sub=function(y){return this.clone().isub(y)};function C(k,y,A){A.negative=y.negative^k.negative;var I=k.length+y.length|0;A.length=I,I=I-1|0;var P=k.words[0]|0,H=y.words[0]|0,q=P*H,j=q&67108863,M=q/67108864|0;A.words[0]=j;for(var E=1;E<I;E++){for(var L=M>>>26,le=M&67108863,Q=Math.min(E,y.length-1),ce=Math.max(0,E-k.length+1);ce<=Q;ce++){var fe=E-ce|0;P=k.words[fe]|0,H=y.words[ce]|0,q=P*H+le,L+=q/67108864|0,le=q&67108863}A.words[E]=le|0,M=L|0}return M!==0?A.words[E]=M|0:A.length--,A._strip()}var D=function(y,A,I){var P=y.words,H=A.words,q=I.words,j=0,M,E,L,le=P[0]|0,Q=le&8191,ce=le>>>13,fe=P[1]|0,oe=fe&8191,de=fe>>>13,ae=P[2]|0,he=ae&8191,te=ae>>>13,pe=P[3]|0,ee=pe&8191,ge=pe>>>13,Ee=P[4]|0,be=Ee&8191,xe=Ee>>>13,ve=P[5]|0,Se=ve&8191,ke=ve>>>13,Ce=P[6]|0,Re=Ce&8191,Le=Ce>>>13,je=P[7]|0,Pe=je&8191,me=je>>>13,ne=P[8]|0,ue=ne&8191,_e=ne>>>13,Ie=P[9]|0,Ne=Ie&8191,De=Ie>>>13,et=H[0]|0,We=et&8191,Ke=et>>>13,xt=H[1]|0,tt=xt&8191,st=xt>>>13,It=H[2]|0,yt=It&8191,ut=It>>>13,At=H[3]|0,ht=At&8191,nt=At>>>13,Tt=H[4]|0,dt=Tt&8191,it=Tt>>>13,Bt=H[5]|0,pt=Bt&8191,rt=Bt>>>13,Ct=H[6]|0,we=Ct&8191,Be=Ct>>>13,Me=H[7]|0,re=Me&8191,ye=Me>>>13,Ae=H[8]|0,$e=Ae&8191,Te=Ae>>>13,Oe=H[9]|0,Fe=Oe&8191,Ue=Oe>>>13;I.negative=y.negative^A.negative,I.length=19,M=Math.imul(Q,We),E=Math.imul(Q,Ke),E=E+Math.imul(ce,We)|0,L=Math.imul(ce,Ke);var ze=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(ze>>>26)|0,ze&=67108863,M=Math.imul(oe,We),E=Math.imul(oe,Ke),E=E+Math.imul(de,We)|0,L=Math.imul(de,Ke),M=M+Math.imul(Q,tt)|0,E=E+Math.imul(Q,st)|0,E=E+Math.imul(ce,tt)|0,L=L+Math.imul(ce,st)|0;var He=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(He>>>26)|0,He&=67108863,M=Math.imul(he,We),E=Math.imul(he,Ke),E=E+Math.imul(te,We)|0,L=Math.imul(te,Ke),M=M+Math.imul(oe,tt)|0,E=E+Math.imul(oe,st)|0,E=E+Math.imul(de,tt)|0,L=L+Math.imul(de,st)|0,M=M+Math.imul(Q,yt)|0,E=E+Math.imul(Q,ut)|0,E=E+Math.imul(ce,yt)|0,L=L+Math.imul(ce,ut)|0;var qe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(qe>>>26)|0,qe&=67108863,M=Math.imul(ee,We),E=Math.imul(ee,Ke),E=E+Math.imul(ge,We)|0,L=Math.imul(ge,Ke),M=M+Math.imul(he,tt)|0,E=E+Math.imul(he,st)|0,E=E+Math.imul(te,tt)|0,L=L+Math.imul(te,st)|0,M=M+Math.imul(oe,yt)|0,E=E+Math.imul(oe,ut)|0,E=E+Math.imul(de,yt)|0,L=L+Math.imul(de,ut)|0,M=M+Math.imul(Q,ht)|0,E=E+Math.imul(Q,nt)|0,E=E+Math.imul(ce,ht)|0,L=L+Math.imul(ce,nt)|0;var Xe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,M=Math.imul(be,We),E=Math.imul(be,Ke),E=E+Math.imul(xe,We)|0,L=Math.imul(xe,Ke),M=M+Math.imul(ee,tt)|0,E=E+Math.imul(ee,st)|0,E=E+Math.imul(ge,tt)|0,L=L+Math.imul(ge,st)|0,M=M+Math.imul(he,yt)|0,E=E+Math.imul(he,ut)|0,E=E+Math.imul(te,yt)|0,L=L+Math.imul(te,ut)|0,M=M+Math.imul(oe,ht)|0,E=E+Math.imul(oe,nt)|0,E=E+Math.imul(de,ht)|0,L=L+Math.imul(de,nt)|0,M=M+Math.imul(Q,dt)|0,E=E+Math.imul(Q,it)|0,E=E+Math.imul(ce,dt)|0,L=L+Math.imul(ce,it)|0;var Ze=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,M=Math.imul(Se,We),E=Math.imul(Se,Ke),E=E+Math.imul(ke,We)|0,L=Math.imul(ke,Ke),M=M+Math.imul(be,tt)|0,E=E+Math.imul(be,st)|0,E=E+Math.imul(xe,tt)|0,L=L+Math.imul(xe,st)|0,M=M+Math.imul(ee,yt)|0,E=E+Math.imul(ee,ut)|0,E=E+Math.imul(ge,yt)|0,L=L+Math.imul(ge,ut)|0,M=M+Math.imul(he,ht)|0,E=E+Math.imul(he,nt)|0,E=E+Math.imul(te,ht)|0,L=L+Math.imul(te,nt)|0,M=M+Math.imul(oe,dt)|0,E=E+Math.imul(oe,it)|0,E=E+Math.imul(de,dt)|0,L=L+Math.imul(de,it)|0,M=M+Math.imul(Q,pt)|0,E=E+Math.imul(Q,rt)|0,E=E+Math.imul(ce,pt)|0,L=L+Math.imul(ce,rt)|0;var at=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(at>>>26)|0,at&=67108863,M=Math.imul(Re,We),E=Math.imul(Re,Ke),E=E+Math.imul(Le,We)|0,L=Math.imul(Le,Ke),M=M+Math.imul(Se,tt)|0,E=E+Math.imul(Se,st)|0,E=E+Math.imul(ke,tt)|0,L=L+Math.imul(ke,st)|0,M=M+Math.imul(be,yt)|0,E=E+Math.imul(be,ut)|0,E=E+Math.imul(xe,yt)|0,L=L+Math.imul(xe,ut)|0,M=M+Math.imul(ee,ht)|0,E=E+Math.imul(ee,nt)|0,E=E+Math.imul(ge,ht)|0,L=L+Math.imul(ge,nt)|0,M=M+Math.imul(he,dt)|0,E=E+Math.imul(he,it)|0,E=E+Math.imul(te,dt)|0,L=L+Math.imul(te,it)|0,M=M+Math.imul(oe,pt)|0,E=E+Math.imul(oe,rt)|0,E=E+Math.imul(de,pt)|0,L=L+Math.imul(de,rt)|0,M=M+Math.imul(Q,we)|0,E=E+Math.imul(Q,Be)|0,E=E+Math.imul(ce,we)|0,L=L+Math.imul(ce,Be)|0;var Je=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Je>>>26)|0,Je&=67108863,M=Math.imul(Pe,We),E=Math.imul(Pe,Ke),E=E+Math.imul(me,We)|0,L=Math.imul(me,Ke),M=M+Math.imul(Re,tt)|0,E=E+Math.imul(Re,st)|0,E=E+Math.imul(Le,tt)|0,L=L+Math.imul(Le,st)|0,M=M+Math.imul(Se,yt)|0,E=E+Math.imul(Se,ut)|0,E=E+Math.imul(ke,yt)|0,L=L+Math.imul(ke,ut)|0,M=M+Math.imul(be,ht)|0,E=E+Math.imul(be,nt)|0,E=E+Math.imul(xe,ht)|0,L=L+Math.imul(xe,nt)|0,M=M+Math.imul(ee,dt)|0,E=E+Math.imul(ee,it)|0,E=E+Math.imul(ge,dt)|0,L=L+Math.imul(ge,it)|0,M=M+Math.imul(he,pt)|0,E=E+Math.imul(he,rt)|0,E=E+Math.imul(te,pt)|0,L=L+Math.imul(te,rt)|0,M=M+Math.imul(oe,we)|0,E=E+Math.imul(oe,Be)|0,E=E+Math.imul(de,we)|0,L=L+Math.imul(de,Be)|0,M=M+Math.imul(Q,re)|0,E=E+Math.imul(Q,ye)|0,E=E+Math.imul(ce,re)|0,L=L+Math.imul(ce,ye)|0;var Qe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,M=Math.imul(ue,We),E=Math.imul(ue,Ke),E=E+Math.imul(_e,We)|0,L=Math.imul(_e,Ke),M=M+Math.imul(Pe,tt)|0,E=E+Math.imul(Pe,st)|0,E=E+Math.imul(me,tt)|0,L=L+Math.imul(me,st)|0,M=M+Math.imul(Re,yt)|0,E=E+Math.imul(Re,ut)|0,E=E+Math.imul(Le,yt)|0,L=L+Math.imul(Le,ut)|0,M=M+Math.imul(Se,ht)|0,E=E+Math.imul(Se,nt)|0,E=E+Math.imul(ke,ht)|0,L=L+Math.imul(ke,nt)|0,M=M+Math.imul(be,dt)|0,E=E+Math.imul(be,it)|0,E=E+Math.imul(xe,dt)|0,L=L+Math.imul(xe,it)|0,M=M+Math.imul(ee,pt)|0,E=E+Math.imul(ee,rt)|0,E=E+Math.imul(ge,pt)|0,L=L+Math.imul(ge,rt)|0,M=M+Math.imul(he,we)|0,E=E+Math.imul(he,Be)|0,E=E+Math.imul(te,we)|0,L=L+Math.imul(te,Be)|0,M=M+Math.imul(oe,re)|0,E=E+Math.imul(oe,ye)|0,E=E+Math.imul(de,re)|0,L=L+Math.imul(de,ye)|0,M=M+Math.imul(Q,$e)|0,E=E+Math.imul(Q,Te)|0,E=E+Math.imul(ce,$e)|0,L=L+Math.imul(ce,Te)|0;var gt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(gt>>>26)|0,gt&=67108863,M=Math.imul(Ne,We),E=Math.imul(Ne,Ke),E=E+Math.imul(De,We)|0,L=Math.imul(De,Ke),M=M+Math.imul(ue,tt)|0,E=E+Math.imul(ue,st)|0,E=E+Math.imul(_e,tt)|0,L=L+Math.imul(_e,st)|0,M=M+Math.imul(Pe,yt)|0,E=E+Math.imul(Pe,ut)|0,E=E+Math.imul(me,yt)|0,L=L+Math.imul(me,ut)|0,M=M+Math.imul(Re,ht)|0,E=E+Math.imul(Re,nt)|0,E=E+Math.imul(Le,ht)|0,L=L+Math.imul(Le,nt)|0,M=M+Math.imul(Se,dt)|0,E=E+Math.imul(Se,it)|0,E=E+Math.imul(ke,dt)|0,L=L+Math.imul(ke,it)|0,M=M+Math.imul(be,pt)|0,E=E+Math.imul(be,rt)|0,E=E+Math.imul(xe,pt)|0,L=L+Math.imul(xe,rt)|0,M=M+Math.imul(ee,we)|0,E=E+Math.imul(ee,Be)|0,E=E+Math.imul(ge,we)|0,L=L+Math.imul(ge,Be)|0,M=M+Math.imul(he,re)|0,E=E+Math.imul(he,ye)|0,E=E+Math.imul(te,re)|0,L=L+Math.imul(te,ye)|0,M=M+Math.imul(oe,$e)|0,E=E+Math.imul(oe,Te)|0,E=E+Math.imul(de,$e)|0,L=L+Math.imul(de,Te)|0,M=M+Math.imul(Q,Fe)|0,E=E+Math.imul(Q,Ue)|0,E=E+Math.imul(ce,Fe)|0,L=L+Math.imul(ce,Ue)|0;var vt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(vt>>>26)|0,vt&=67108863,M=Math.imul(Ne,tt),E=Math.imul(Ne,st),E=E+Math.imul(De,tt)|0,L=Math.imul(De,st),M=M+Math.imul(ue,yt)|0,E=E+Math.imul(ue,ut)|0,E=E+Math.imul(_e,yt)|0,L=L+Math.imul(_e,ut)|0,M=M+Math.imul(Pe,ht)|0,E=E+Math.imul(Pe,nt)|0,E=E+Math.imul(me,ht)|0,L=L+Math.imul(me,nt)|0,M=M+Math.imul(Re,dt)|0,E=E+Math.imul(Re,it)|0,E=E+Math.imul(Le,dt)|0,L=L+Math.imul(Le,it)|0,M=M+Math.imul(Se,pt)|0,E=E+Math.imul(Se,rt)|0,E=E+Math.imul(ke,pt)|0,L=L+Math.imul(ke,rt)|0,M=M+Math.imul(be,we)|0,E=E+Math.imul(be,Be)|0,E=E+Math.imul(xe,we)|0,L=L+Math.imul(xe,Be)|0,M=M+Math.imul(ee,re)|0,E=E+Math.imul(ee,ye)|0,E=E+Math.imul(ge,re)|0,L=L+Math.imul(ge,ye)|0,M=M+Math.imul(he,$e)|0,E=E+Math.imul(he,Te)|0,E=E+Math.imul(te,$e)|0,L=L+Math.imul(te,Te)|0,M=M+Math.imul(oe,Fe)|0,E=E+Math.imul(oe,Ue)|0,E=E+Math.imul(de,Fe)|0,L=L+Math.imul(de,Ue)|0;var _t=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(_t>>>26)|0,_t&=67108863,M=Math.imul(Ne,yt),E=Math.imul(Ne,ut),E=E+Math.imul(De,yt)|0,L=Math.imul(De,ut),M=M+Math.imul(ue,ht)|0,E=E+Math.imul(ue,nt)|0,E=E+Math.imul(_e,ht)|0,L=L+Math.imul(_e,nt)|0,M=M+Math.imul(Pe,dt)|0,E=E+Math.imul(Pe,it)|0,E=E+Math.imul(me,dt)|0,L=L+Math.imul(me,it)|0,M=M+Math.imul(Re,pt)|0,E=E+Math.imul(Re,rt)|0,E=E+Math.imul(Le,pt)|0,L=L+Math.imul(Le,rt)|0,M=M+Math.imul(Se,we)|0,E=E+Math.imul(Se,Be)|0,E=E+Math.imul(ke,we)|0,L=L+Math.imul(ke,Be)|0,M=M+Math.imul(be,re)|0,E=E+Math.imul(be,ye)|0,E=E+Math.imul(xe,re)|0,L=L+Math.imul(xe,ye)|0,M=M+Math.imul(ee,$e)|0,E=E+Math.imul(ee,Te)|0,E=E+Math.imul(ge,$e)|0,L=L+Math.imul(ge,Te)|0,M=M+Math.imul(he,Fe)|0,E=E+Math.imul(he,Ue)|0,E=E+Math.imul(te,Fe)|0,L=L+Math.imul(te,Ue)|0;var bt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(bt>>>26)|0,bt&=67108863,M=Math.imul(Ne,ht),E=Math.imul(Ne,nt),E=E+Math.imul(De,ht)|0,L=Math.imul(De,nt),M=M+Math.imul(ue,dt)|0,E=E+Math.imul(ue,it)|0,E=E+Math.imul(_e,dt)|0,L=L+Math.imul(_e,it)|0,M=M+Math.imul(Pe,pt)|0,E=E+Math.imul(Pe,rt)|0,E=E+Math.imul(me,pt)|0,L=L+Math.imul(me,rt)|0,M=M+Math.imul(Re,we)|0,E=E+Math.imul(Re,Be)|0,E=E+Math.imul(Le,we)|0,L=L+Math.imul(Le,Be)|0,M=M+Math.imul(Se,re)|0,E=E+Math.imul(Se,ye)|0,E=E+Math.imul(ke,re)|0,L=L+Math.imul(ke,ye)|0,M=M+Math.imul(be,$e)|0,E=E+Math.imul(be,Te)|0,E=E+Math.imul(xe,$e)|0,L=L+Math.imul(xe,Te)|0,M=M+Math.imul(ee,Fe)|0,E=E+Math.imul(ee,Ue)|0,E=E+Math.imul(ge,Fe)|0,L=L+Math.imul(ge,Ue)|0;var St=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(St>>>26)|0,St&=67108863,M=Math.imul(Ne,dt),E=Math.imul(Ne,it),E=E+Math.imul(De,dt)|0,L=Math.imul(De,it),M=M+Math.imul(ue,pt)|0,E=E+Math.imul(ue,rt)|0,E=E+Math.imul(_e,pt)|0,L=L+Math.imul(_e,rt)|0,M=M+Math.imul(Pe,we)|0,E=E+Math.imul(Pe,Be)|0,E=E+Math.imul(me,we)|0,L=L+Math.imul(me,Be)|0,M=M+Math.imul(Re,re)|0,E=E+Math.imul(Re,ye)|0,E=E+Math.imul(Le,re)|0,L=L+Math.imul(Le,ye)|0,M=M+Math.imul(Se,$e)|0,E=E+Math.imul(Se,Te)|0,E=E+Math.imul(ke,$e)|0,L=L+Math.imul(ke,Te)|0,M=M+Math.imul(be,Fe)|0,E=E+Math.imul(be,Ue)|0,E=E+Math.imul(xe,Fe)|0,L=L+Math.imul(xe,Ue)|0;var $t=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+($t>>>26)|0,$t&=67108863,M=Math.imul(Ne,pt),E=Math.imul(Ne,rt),E=E+Math.imul(De,pt)|0,L=Math.imul(De,rt),M=M+Math.imul(ue,we)|0,E=E+Math.imul(ue,Be)|0,E=E+Math.imul(_e,we)|0,L=L+Math.imul(_e,Be)|0,M=M+Math.imul(Pe,re)|0,E=E+Math.imul(Pe,ye)|0,E=E+Math.imul(me,re)|0,L=L+Math.imul(me,ye)|0,M=M+Math.imul(Re,$e)|0,E=E+Math.imul(Re,Te)|0,E=E+Math.imul(Le,$e)|0,L=L+Math.imul(Le,Te)|0,M=M+Math.imul(Se,Fe)|0,E=E+Math.imul(Se,Ue)|0,E=E+Math.imul(ke,Fe)|0,L=L+Math.imul(ke,Ue)|0;var wt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(wt>>>26)|0,wt&=67108863,M=Math.imul(Ne,we),E=Math.imul(Ne,Be),E=E+Math.imul(De,we)|0,L=Math.imul(De,Be),M=M+Math.imul(ue,re)|0,E=E+Math.imul(ue,ye)|0,E=E+Math.imul(_e,re)|0,L=L+Math.imul(_e,ye)|0,M=M+Math.imul(Pe,$e)|0,E=E+Math.imul(Pe,Te)|0,E=E+Math.imul(me,$e)|0,L=L+Math.imul(me,Te)|0,M=M+Math.imul(Re,Fe)|0,E=E+Math.imul(Re,Ue)|0,E=E+Math.imul(Le,Fe)|0,L=L+Math.imul(Le,Ue)|0;var Ge=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,M=Math.imul(Ne,re),E=Math.imul(Ne,ye),E=E+Math.imul(De,re)|0,L=Math.imul(De,ye),M=M+Math.imul(ue,$e)|0,E=E+Math.imul(ue,Te)|0,E=E+Math.imul(_e,$e)|0,L=L+Math.imul(_e,Te)|0,M=M+Math.imul(Pe,Fe)|0,E=E+Math.imul(Pe,Ue)|0,E=E+Math.imul(me,Fe)|0,L=L+Math.imul(me,Ue)|0;var Ye=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,M=Math.imul(Ne,$e),E=Math.imul(Ne,Te),E=E+Math.imul(De,$e)|0,L=Math.imul(De,Te),M=M+Math.imul(ue,Fe)|0,E=E+Math.imul(ue,Ue)|0,E=E+Math.imul(_e,Fe)|0,L=L+Math.imul(_e,Ue)|0;var ct=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(ct>>>26)|0,ct&=67108863,M=Math.imul(Ne,Fe),E=Math.imul(Ne,Ue),E=E+Math.imul(De,Fe)|0,L=Math.imul(De,Ue);var ot=(j+M|0)+((E&8191)<<13)|0;return j=(L+(E>>>13)|0)+(ot>>>26)|0,ot&=67108863,q[0]=ze,q[1]=He,q[2]=qe,q[3]=Xe,q[4]=Ze,q[5]=at,q[6]=Je,q[7]=Qe,q[8]=gt,q[9]=vt,q[10]=_t,q[11]=bt,q[12]=St,q[13]=$t,q[14]=wt,q[15]=Ge,q[16]=Ye,q[17]=ct,q[18]=ot,j!==0&&(q[19]=j,I.length++),I};Math.imul||(D=C);function z(k,y,A){A.negative=y.negative^k.negative,A.length=k.length+y.length;for(var I=0,P=0,H=0;H<A.length-1;H++){var q=P;P=0;for(var j=I&67108863,M=Math.min(H,y.length-1),E=Math.max(0,H-k.length+1);E<=M;E++){var L=H-E,le=k.words[L]|0,Q=y.words[E]|0,ce=le*Q,fe=ce&67108863;q=q+(ce/67108864|0)|0,fe=fe+j|0,j=fe&67108863,q=q+(fe>>>26)|0,P+=q>>>26,q&=67108863}A.words[H]=j,I=q,q=P}return I!==0?A.words[H]=I:A.length--,A._strip()}function U(k,y,A){return z(k,y,A)}c.prototype.mulTo=function(y,A){var I,P=this.length+y.length;return this.length===10&&y.length===10?I=D(this,y,A):P<63?I=C(this,y,A):P<1024?I=z(this,y,A):I=U(this,y,A),I},c.prototype.mul=function(y){var A=new c(null);return A.words=new Array(this.length+y.length),this.mulTo(y,A)},c.prototype.mulf=function(y){var A=new c(null);return A.words=new Array(this.length+y.length),U(this,y,A)},c.prototype.imul=function(y){return this.clone().mulTo(y,this)},c.prototype.imuln=function(y){var A=y<0;A&&(y=-y),a(typeof y=="number"),a(y<67108864);for(var I=0,P=0;P<this.length;P++){var H=(this.words[P]|0)*y,q=(H&67108863)+(I&67108863);I>>=26,I+=H/67108864|0,I+=q>>>26,this.words[P]=q&67108863}return I!==0&&(this.words[P]=I,this.length++),A?this.ineg():this},c.prototype.muln=function(y){return this.clone().imuln(y)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(y){var A=B(y);if(A.length===0)return new c(1);for(var I=this,P=0;P<A.length&&A[P]===0;P++,I=I.sqr());if(++P<A.length)for(var H=I.sqr();P<A.length;P++,H=H.sqr())A[P]!==0&&(I=I.mul(H));return I},c.prototype.iushln=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26,P=67108863>>>26-A<<26-A,H;if(A!==0){var q=0;for(H=0;H<this.length;H++){var j=this.words[H]&P,M=(this.words[H]|0)-j<<A;this.words[H]=M|q,q=j>>>26-A}q&&(this.words[H]=q,this.length++)}if(I!==0){for(H=this.length-1;H>=0;H--)this.words[H+I]=this.words[H];for(H=0;H<I;H++)this.words[H]=0;this.length+=I}return this._strip()},c.prototype.ishln=function(y){return a(this.negative===0),this.iushln(y)},c.prototype.iushrn=function(y,A,I){a(typeof y=="number"&&y>=0);var P;A?P=(A-A%26)/26:P=0;var H=y%26,q=Math.min((y-H)/26,this.length),j=67108863^67108863>>>H<<H,M=I;if(P-=q,P=Math.max(0,P),M){for(var E=0;E<q;E++)M.words[E]=this.words[E];M.length=q}if(q!==0)if(this.length>q)for(this.length-=q,E=0;E<this.length;E++)this.words[E]=this.words[E+q];else this.words[0]=0,this.length=1;var L=0;for(E=this.length-1;E>=0&&(L!==0||E>=P);E--){var le=this.words[E]|0;this.words[E]=L<<26-H|le>>>H,L=le&j}return M&&L!==0&&(M.words[M.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},c.prototype.ishrn=function(y,A,I){return a(this.negative===0),this.iushrn(y,A,I)},c.prototype.shln=function(y){return this.clone().ishln(y)},c.prototype.ushln=function(y){return this.clone().iushln(y)},c.prototype.shrn=function(y){return this.clone().ishrn(y)},c.prototype.ushrn=function(y){return this.clone().iushrn(y)},c.prototype.testn=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26,P=1<<A;if(this.length<=I)return!1;var H=this.words[I];return!!(H&P)},c.prototype.imaskn=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=I)return this;if(A!==0&&I++,this.length=Math.min(I,this.length),A!==0){var P=67108863^67108863>>>A<<A;this.words[this.length-1]&=P}return this._strip()},c.prototype.maskn=function(y){return this.clone().imaskn(y)},c.prototype.iaddn=function(y){return a(typeof y=="number"),a(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<=y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},c.prototype._iaddn=function(y){this.words[0]+=y;for(var A=0;A<this.length&&this.words[A]>=67108864;A++)this.words[A]-=67108864,A===this.length-1?this.words[A+1]=1:this.words[A+1]++;return this.length=Math.max(this.length,A+1),this},c.prototype.isubn=function(y){if(a(typeof y=="number"),a(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var A=0;A<this.length&&this.words[A]<0;A++)this.words[A]+=67108864,this.words[A+1]-=1;return this._strip()},c.prototype.addn=function(y){return this.clone().iaddn(y)},c.prototype.subn=function(y){return this.clone().isubn(y)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(y,A,I){var P=y.length+I,H;this._expand(P);var q,j=0;for(H=0;H<y.length;H++){q=(this.words[H+I]|0)+j;var M=(y.words[H]|0)*A;q-=M&67108863,j=(q>>26)-(M/67108864|0),this.words[H+I]=q&67108863}for(;H<this.length-I;H++)q=(this.words[H+I]|0)+j,j=q>>26,this.words[H+I]=q&67108863;if(j===0)return this._strip();for(a(j===-1),j=0,H=0;H<this.length;H++)q=-(this.words[H]|0)+j,j=q>>26,this.words[H]=q&67108863;return this.negative=1,this._strip()},c.prototype._wordDiv=function(y,A){var I=this.length-y.length,P=this.clone(),H=y,q=H.words[H.length-1]|0,j=this._countBits(q);I=26-j,I!==0&&(H=H.ushln(I),P.iushln(I),q=H.words[H.length-1]|0);var M=P.length-H.length,E;if(A!=="mod"){E=new c(null),E.length=M+1,E.words=new Array(E.length);for(var L=0;L<E.length;L++)E.words[L]=0}var le=P.clone()._ishlnsubmul(H,1,M);le.negative===0&&(P=le,E&&(E.words[M]=1));for(var Q=M-1;Q>=0;Q--){var ce=(P.words[H.length+Q]|0)*67108864+(P.words[H.length+Q-1]|0);for(ce=Math.min(ce/q|0,67108863),P._ishlnsubmul(H,ce,Q);P.negative!==0;)ce--,P.negative=0,P._ishlnsubmul(H,1,Q),P.isZero()||(P.negative^=1);E&&(E.words[Q]=ce)}return E&&E._strip(),P._strip(),A!=="div"&&I!==0&&P.iushrn(I),{div:E||null,mod:P}},c.prototype.divmod=function(y,A,I){if(a(!y.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var P,H,q;return this.negative!==0&&y.negative===0?(q=this.neg().divmod(y,A),A!=="mod"&&(P=q.div.neg()),A!=="div"&&(H=q.mod.neg(),I&&H.negative!==0&&H.iadd(y)),{div:P,mod:H}):this.negative===0&&y.negative!==0?(q=this.divmod(y.neg(),A),A!=="mod"&&(P=q.div.neg()),{div:P,mod:q.mod}):this.negative&y.negative?(q=this.neg().divmod(y.neg(),A),A!=="div"&&(H=q.mod.neg(),I&&H.negative!==0&&H.isub(y)),{div:q.div,mod:H}):y.length>this.length||this.cmp(y)<0?{div:new c(0),mod:this}:y.length===1?A==="div"?{div:this.divn(y.words[0]),mod:null}:A==="mod"?{div:null,mod:new c(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new c(this.modrn(y.words[0]))}:this._wordDiv(y,A)},c.prototype.div=function(y){return this.divmod(y,"div",!1).div},c.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},c.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},c.prototype.divRound=function(y){var A=this.divmod(y);if(A.mod.isZero())return A.div;var I=A.div.negative!==0?A.mod.isub(y):A.mod,P=y.ushrn(1),H=y.andln(1),q=I.cmp(P);return q<0||H===1&&q===0?A.div:A.div.negative!==0?A.div.isubn(1):A.div.iaddn(1)},c.prototype.modrn=function(y){var A=y<0;A&&(y=-y),a(y<=67108863);for(var I=(1<<26)%y,P=0,H=this.length-1;H>=0;H--)P=(I*P+(this.words[H]|0))%y;return A?-P:P},c.prototype.modn=function(y){return this.modrn(y)},c.prototype.idivn=function(y){var A=y<0;A&&(y=-y),a(y<=67108863);for(var I=0,P=this.length-1;P>=0;P--){var H=(this.words[P]|0)+I*67108864;this.words[P]=H/y|0,I=H%y}return this._strip(),A?this.ineg():this},c.prototype.divn=function(y){return this.clone().idivn(y)},c.prototype.egcd=function(y){a(y.negative===0),a(!y.isZero());var A=this,I=y.clone();A.negative!==0?A=A.umod(y):A=A.clone();for(var P=new c(1),H=new c(0),q=new c(0),j=new c(1),M=0;A.isEven()&&I.isEven();)A.iushrn(1),I.iushrn(1),++M;for(var E=I.clone(),L=A.clone();!A.isZero();){for(var le=0,Q=1;!(A.words[0]&Q)&&le<26;++le,Q<<=1);if(le>0)for(A.iushrn(le);le-- >0;)(P.isOdd()||H.isOdd())&&(P.iadd(E),H.isub(L)),P.iushrn(1),H.iushrn(1);for(var ce=0,fe=1;!(I.words[0]&fe)&&ce<26;++ce,fe<<=1);if(ce>0)for(I.iushrn(ce);ce-- >0;)(q.isOdd()||j.isOdd())&&(q.iadd(E),j.isub(L)),q.iushrn(1),j.iushrn(1);A.cmp(I)>=0?(A.isub(I),P.isub(q),H.isub(j)):(I.isub(A),q.isub(P),j.isub(H))}return{a:q,b:j,gcd:I.iushln(M)}},c.prototype._invmp=function(y){a(y.negative===0),a(!y.isZero());var A=this,I=y.clone();A.negative!==0?A=A.umod(y):A=A.clone();for(var P=new c(1),H=new c(0),q=I.clone();A.cmpn(1)>0&&I.cmpn(1)>0;){for(var j=0,M=1;!(A.words[0]&M)&&j<26;++j,M<<=1);if(j>0)for(A.iushrn(j);j-- >0;)P.isOdd()&&P.iadd(q),P.iushrn(1);for(var E=0,L=1;!(I.words[0]&L)&&E<26;++E,L<<=1);if(E>0)for(I.iushrn(E);E-- >0;)H.isOdd()&&H.iadd(q),H.iushrn(1);A.cmp(I)>=0?(A.isub(I),P.isub(H)):(I.isub(A),H.isub(P))}var le;return A.cmpn(1)===0?le=P:le=H,le.cmpn(0)<0&&le.iadd(y),le},c.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var A=this.clone(),I=y.clone();A.negative=0,I.negative=0;for(var P=0;A.isEven()&&I.isEven();P++)A.iushrn(1),I.iushrn(1);do{for(;A.isEven();)A.iushrn(1);for(;I.isEven();)I.iushrn(1);var H=A.cmp(I);if(H<0){var q=A;A=I,I=q}else if(H===0||I.cmpn(1)===0)break;A.isub(I)}while(!0);return I.iushln(P)},c.prototype.invm=function(y){return this.egcd(y).a.umod(y)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(y){return this.words[0]&y},c.prototype.bincn=function(y){a(typeof y=="number");var A=y%26,I=(y-A)/26,P=1<<A;if(this.length<=I)return this._expand(I+1),this.words[I]|=P,this;for(var H=P,q=I;H!==0&&q<this.length;q++){var j=this.words[q]|0;j+=H,H=j>>>26,j&=67108863,this.words[q]=j}return H!==0&&(this.words[q]=H,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(y){var A=y<0;if(this.negative!==0&&!A)return-1;if(this.negative===0&&A)return 1;this._strip();var I;if(this.length>1)I=1;else{A&&(y=-y),a(y<=67108863,"Number is too big");var P=this.words[0]|0;I=P===y?0:P<y?-1:1}return this.negative!==0?-I|0:I},c.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var A=this.ucmp(y);return this.negative!==0?-A|0:A},c.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var A=0,I=this.length-1;I>=0;I--){var P=this.words[I]|0,H=y.words[I]|0;if(P!==H){P<H?A=-1:P>H&&(A=1);break}}return A},c.prototype.gtn=function(y){return this.cmpn(y)===1},c.prototype.gt=function(y){return this.cmp(y)===1},c.prototype.gten=function(y){return this.cmpn(y)>=0},c.prototype.gte=function(y){return this.cmp(y)>=0},c.prototype.ltn=function(y){return this.cmpn(y)===-1},c.prototype.lt=function(y){return this.cmp(y)===-1},c.prototype.lten=function(y){return this.cmpn(y)<=0},c.prototype.lte=function(y){return this.cmp(y)<=0},c.prototype.eqn=function(y){return this.cmpn(y)===0},c.prototype.eq=function(y){return this.cmp(y)===0},c.red=function(y){return new ie(y)},c.prototype.toRed=function(y){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(y){return this.red=y,this},c.prototype.forceRed=function(y){return a(!this.red,"Already a number in reduction context"),this._forceRed(y)},c.prototype.redAdd=function(y){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},c.prototype.redIAdd=function(y){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},c.prototype.redSub=function(y){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},c.prototype.redISub=function(y){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},c.prototype.redShl=function(y){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},c.prototype.redMul=function(y){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},c.prototype.redIMul=function(y){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(y){return a(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var Y={k256:null,p224:null,p192:null,p25519:null};function X(k,y){this.name=k,this.p=new c(y,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var y=new c(null);return y.words=new Array(Math.ceil(this.n/13)),y},X.prototype.ireduce=function(y){var A=y,I;do this.split(A,this.tmp),A=this.imulK(A),A=A.iadd(this.tmp),I=A.bitLength();while(I>this.n);var P=I<this.n?-1:A.ucmp(this.p);return P===0?(A.words[0]=0,A.length=1):P>0?A.isub(this.p):A.strip!==void 0?A.strip():A._strip(),A},X.prototype.split=function(y,A){y.iushrn(this.n,0,A)},X.prototype.imulK=function(y){return y.imul(this.k)};function O(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(O,X),O.prototype.split=function(y,A){for(var I=4194303,P=Math.min(y.length,9),H=0;H<P;H++)A.words[H]=y.words[H];if(A.length=P,y.length<=9){y.words[0]=0,y.length=1;return}var q=y.words[9];for(A.words[A.length++]=q&I,H=10;H<y.length;H++){var j=y.words[H]|0;y.words[H-10]=(j&I)<<4|q>>>22,q=j}q>>>=22,y.words[H-10]=q,q===0&&y.length>10?y.length-=10:y.length-=9},O.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var A=0,I=0;I<y.length;I++){var P=y.words[I]|0;A+=P*977,y.words[I]=A&67108863,A=P*64+(A/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function J(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(J,X);function Z(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Z,X);function se(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(se,X),se.prototype.imulK=function(y){for(var A=0,I=0;I<y.length;I++){var P=(y.words[I]|0)*19+A,H=P&67108863;P>>>=26,y.words[I]=H,A=P}return A!==0&&(y.words[y.length++]=A),y},c._prime=function(y){if(Y[y])return Y[y];var A;if(y==="k256")A=new O;else if(y==="p224")A=new J;else if(y==="p192")A=new Z;else if(y==="p25519")A=new se;else throw new Error("Unknown prime "+y);return Y[y]=A,A};function ie(k){if(typeof k=="string"){var y=c._prime(k);this.m=y.p,this.prime=y}else a(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}ie.prototype._verify1=function(y){a(y.negative===0,"red works only with positives"),a(y.red,"red works only with red numbers")},ie.prototype._verify2=function(y,A){a((y.negative|A.negative)===0,"red works only with positives"),a(y.red&&y.red===A.red,"red works only with red numbers")},ie.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(b(y,y.umod(this.m)._forceRed(this)),y)},ie.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},ie.prototype.add=function(y,A){this._verify2(y,A);var I=y.add(A);return I.cmp(this.m)>=0&&I.isub(this.m),I._forceRed(this)},ie.prototype.iadd=function(y,A){this._verify2(y,A);var I=y.iadd(A);return I.cmp(this.m)>=0&&I.isub(this.m),I},ie.prototype.sub=function(y,A){this._verify2(y,A);var I=y.sub(A);return I.cmpn(0)<0&&I.iadd(this.m),I._forceRed(this)},ie.prototype.isub=function(y,A){this._verify2(y,A);var I=y.isub(A);return I.cmpn(0)<0&&I.iadd(this.m),I},ie.prototype.shl=function(y,A){return this._verify1(y),this.imod(y.ushln(A))},ie.prototype.imul=function(y,A){return this._verify2(y,A),this.imod(y.imul(A))},ie.prototype.mul=function(y,A){return this._verify2(y,A),this.imod(y.mul(A))},ie.prototype.isqr=function(y){return this.imul(y,y.clone())},ie.prototype.sqr=function(y){return this.mul(y,y)},ie.prototype.sqrt=function(y){if(y.isZero())return y.clone();var A=this.m.andln(3);if(a(A%2===1),A===3){var I=this.m.add(new c(1)).iushrn(2);return this.pow(y,I)}for(var P=this.m.subn(1),H=0;!P.isZero()&&P.andln(1)===0;)H++,P.iushrn(1);a(!P.isZero());var q=new c(1).toRed(this),j=q.redNeg(),M=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new c(2*E*E).toRed(this);this.pow(E,M).cmp(j)!==0;)E.redIAdd(j);for(var L=this.pow(E,P),le=this.pow(y,P.addn(1).iushrn(1)),Q=this.pow(y,P),ce=H;Q.cmp(q)!==0;){for(var fe=Q,oe=0;fe.cmp(q)!==0;oe++)fe=fe.redSqr();a(oe<ce);var de=this.pow(L,new c(1).iushln(ce-oe-1));le=le.redMul(de),L=de.redSqr(),Q=Q.redMul(L),ce=oe}return le},ie.prototype.invm=function(y){var A=y._invmp(this.m);return A.negative!==0?(A.negative=0,this.imod(A).redNeg()):this.imod(A)},ie.prototype.pow=function(y,A){if(A.isZero())return new c(1).toRed(this);if(A.cmpn(1)===0)return y.clone();var I=4,P=new Array(1<<I);P[0]=new c(1).toRed(this),P[1]=y;for(var H=2;H<P.length;H++)P[H]=this.mul(P[H-1],y);var q=P[0],j=0,M=0,E=A.bitLength()%26;for(E===0&&(E=26),H=A.length-1;H>=0;H--){for(var L=A.words[H],le=E-1;le>=0;le--){var Q=L>>le&1;if(q!==P[0]&&(q=this.sqr(q)),Q===0&&j===0){M=0;continue}j<<=1,j|=Q,M++,!(M!==I&&(H!==0||le!==0))&&(q=this.mul(q,P[j]),M=0,j=0)}E=26}return q},ie.prototype.convertTo=function(y){var A=y.umod(this.m);return A===y?A.clone():A},ie.prototype.convertFrom=function(y){var A=y.clone();return A.red=null,A},c.mont=function(y){return new F(y)};function F(k){ie.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(F,ie),F.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},F.prototype.convertFrom=function(y){var A=this.imod(y.mul(this.rinv));return A.red=null,A},F.prototype.imul=function(y,A){if(y.isZero()||A.isZero())return y.words[0]=0,y.length=1,y;var I=y.imul(A),P=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=I.isub(P).iushrn(this.shift),q=H;return H.cmp(this.m)>=0?q=H.isub(this.m):H.cmpn(0)<0&&(q=H.iadd(this.m)),q._forceRed(this)},F.prototype.mul=function(y,A){if(y.isZero()||A.isZero())return new c(0)._forceRed(this);var I=y.mul(A),P=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=I.isub(P).iushrn(this.shift),q=H;return H.cmp(this.m)>=0?q=H.isub(this.m):H.cmpn(0)<0&&(q=H.iadd(this.m)),q._forceRed(this)},F.prototype.invm=function(y){var A=this.imod(y._invmp(this.m).mul(this.r2));return A._forceRed(this)}})(t,commonjsGlobal)})(bn$1);const _BN=bnExports$1,version$g="bignumber/5.7.0";var BN$1=_BN.BN;const logger$k=new Logger(version$g),_constructorGuard$1={},MAX_SAFE=9007199254740991;let _warnedToStringRadix=!1;class BigNumber{constructor(e,n){e!==_constructorGuard$1&&logger$k.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=n,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return toBigNumber(toBN(this).fromTwos(e))}toTwos(e){return toBigNumber(toBN(this).toTwos(e))}abs(){return this._hex[0]==="-"?BigNumber.from(this._hex.substring(1)):this}add(e){return toBigNumber(toBN(this).add(toBN(e)))}sub(e){return toBigNumber(toBN(this).sub(toBN(e)))}div(e){return BigNumber.from(e).isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(e)))}mul(e){return toBigNumber(toBN(this).mul(toBN(e)))}mod(e){const n=toBN(e);return n.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(n))}pow(e){const n=toBN(e);return n.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(n))}and(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(n))}or(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(n))}xor(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(n))}mask(e){return(this.isNegative()||e<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(e))}eq(e){return toBN(this).eq(toBN(e))}lt(e){return toBN(this).lt(toBN(e))}lte(e){return toBN(this).lte(toBN(e))}gt(e){return toBN(this).gt(toBN(e))}gte(e){return toBN(this).gte(toBN(e))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$k.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$k.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$k.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$k.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof BigNumber)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard$1,toHex(e)):e.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard$1,toHex(new BN$1(e))):logger$k.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&throwFault("underflow","BigNumber.from",e),(e>=MAX_SAFE||e<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",e),BigNumber.from(String(e));const n=e;if(typeof n=="bigint")return BigNumber.from(n.toString());if(isBytes(n))return BigNumber.from(hexlify(n));if(n)if(n.toHexString){const a=n.toHexString();if(typeof a=="string")return BigNumber.from(a)}else{let a=n._hex;if(a==null&&n.type==="BigNumber"&&(a=n.hex),typeof a=="string"&&(isHexString(a)||a[0]==="-"&&isHexString(a.substring(1))))return BigNumber.from(a)}return logger$k.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function toHex(t){if(typeof t!="string")return toHex(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&logger$k.throwArgumentError("invalid hex","value",t),t=toHex(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function toBigNumber(t){return BigNumber.from(toHex(t))}function toBN(t){const e=BigNumber.from(t).toHexString();return e[0]==="-"?new BN$1("-"+e.substring(3),16):new BN$1(e.substring(2),16)}function throwFault(t,e,n){const a={fault:t,operation:e};return n!=null&&(a.value=n),logger$k.throwError(t,Logger.errors.NUMERIC_FAULT,a)}function _base36To16(t){return new BN$1(t,36).toString(16)}function keccak256(t){return"0x"+sha3.keccak_256(arrayify(t))}const version$f="rlp/5.7.0",logger$j=new Logger(version$f);function arrayifyInteger(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function _encode(t){if(Array.isArray(t)){let a=[];if(t.forEach(function(c){a=a.concat(_encode(c))}),a.length<=55)return a.unshift(192+a.length),a;const o=arrayifyInteger(a.length);return o.unshift(247+o.length),o.concat(a)}isBytesLike(t)||logger$j.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(arrayify(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=arrayifyInteger(e.length);return n.unshift(183+n.length),n.concat(e)}function encode$b(t){return hexlify(_encode(t))}const version$e="address/5.7.0",logger$i=new Logger(version$e);function getChecksumAddress(t){isHexString(t,20)||logger$i.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let o=0;o<40;o++)n[o]=e[o].charCodeAt(0);const a=arrayify(keccak256(n));for(let o=0;o<40;o+=2)a[o>>1]>>4>=8&&(e[o]=e[o].toUpperCase()),(a[o>>1]&15)>=8&&(e[o+1]=e[o+1].toUpperCase());return"0x"+e.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const ibanLookup={};for(let t=0;t<10;t++)ibanLookup[String(t)]=String(t);for(let t=0;t<26;t++)ibanLookup[String.fromCharCode(65+t)]=String(10+t);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(a=>ibanLookup[a]).join("");for(;e.length>=safeDigits;){let a=e.substring(0,safeDigits);e=parseInt(a,10)%97+e.substring(a.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}function getAddress(t){let e=null;if(typeof t!="string"&&logger$i.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=getChecksumAddress(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&logger$i.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==ibanChecksum(t)&&logger$i.throwArgumentError("bad icap checksum","address",t),e=_base36To16(t.substring(4));e.length<40;)e="0"+e;e=getChecksumAddress("0x"+e)}else logger$i.throwArgumentError("invalid address","address",t);return e}const version$d="properties/5.7.0";var __awaiter$5=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(b){try{m(a.next(b))}catch(x){l(x)}}function d(b){try{m(a.throw(b))}catch(x){l(x)}}function m(b){b.done?c(b.value):o(b.value).then(u,d)}m((a=a.apply(t,e||[])).next())})};const logger$h=new Logger(version$d);function defineReadOnly(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}function resolveProperties(t){return __awaiter$5(this,void 0,void 0,function*(){const e=Object.keys(t).map(a=>{const o=t[a];return Promise.resolve(o).then(c=>({key:a,value:c}))});return(yield Promise.all(e)).reduce((a,o)=>(a[o.key]=o.value,a),{})})}function checkProperties(t,e){(!t||typeof t!="object")&&logger$h.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(n=>{e[n]||logger$h.throwArgumentError("invalid object key - "+n,"transaction:"+n,t)})}function shallowCopy(t){const e={};for(const n in t)e[n]=t[n];return e}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(t){if(t==null||opaque[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let n=0;n<e.length;n++){let a=null;try{a=t[e[n]]}catch{continue}if(!_isFrozen(a))return!1}return!0}return logger$h.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function _deepCopy(t){if(_isFrozen(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>deepCopy$1(e)));if(typeof t=="object"){const e={};for(const n in t){const a=t[n];a!==void 0&&defineReadOnly(e,n,deepCopy$1(a))}return e}return logger$h.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function deepCopy$1(t){return _deepCopy(t)}class Description{constructor(e){for(const n in e)this[n]=deepCopy$1(e[n])}}const version$c="abstract-provider/5.7.0";var __awaiter$4=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(b){try{m(a.next(b))}catch(x){l(x)}}function d(b){try{m(a.throw(b))}catch(x){l(x)}}function m(b){b.done?c(b.value):o(b.value).then(u,d)}m((a=a.apply(t,e||[])).next())})};const logger$g=new Logger(version$c);class Provider{constructor(){logger$g.checkAbstract(new.target,Provider),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$4(this,void 0,void 0,function*(){const{block:e,gasPrice:n}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(l=>null)});let a=null,o=null,c=null;return e&&e.baseFeePerGas&&(a=e.baseFeePerGas,c=BigNumber.from("1500000000"),o=e.baseFeePerGas.mul(2).add(c)),{lastBaseFeePerGas:a,maxFeePerGas:o,maxPriorityFeePerGas:c,gasPrice:n}})}addListener(e,n){return this.on(e,n)}removeListener(e,n){return this.off(e,n)}static isProvider(e){return!!(e&&e._isProvider)}}const version$b="abstract-signer/5.7.0";var __awaiter$3=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(b){try{m(a.next(b))}catch(x){l(x)}}function d(b){try{m(a.throw(b))}catch(x){l(x)}}function m(b){b.done?c(b.value):o(b.value).then(u,d)}m((a=a.apply(t,e||[])).next())})};const logger$f=new Logger(version$b),allowedTransactionKeys$1=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$f.checkAbstract(new.target,Signer),defineReadOnly(this,"_isSigner",!0)}getBalance(e){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const n=yield resolveProperties(this.checkTransaction(e));return yield this.provider.estimateGas(n)})}call(e,n){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("call");const a=yield resolveProperties(this.checkTransaction(e));return yield this.provider.call(a,n)})}sendTransaction(e){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const n=yield this.populateTransaction(e),a=yield this.signTransaction(n);return yield this.provider.sendTransaction(a)})}getChainId(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const a in e)allowedTransactionKeys$1.indexOf(a)===-1&&logger$f.throwArgumentError("invalid transaction key: "+a,"transaction",e);const n=shallowCopy(e);return n.from==null?n.from=this.getAddress():n.from=Promise.all([Promise.resolve(n.from),this.getAddress()]).then(a=>(a[0].toLowerCase()!==a[1].toLowerCase()&&logger$f.throwArgumentError("from address mismatch","transaction",e),a[0])),n}populateTransaction(e){return __awaiter$3(this,void 0,void 0,function*(){const n=yield resolveProperties(this.checkTransaction(e));n.to!=null&&(n.to=Promise.resolve(n.to).then(o=>__awaiter$3(this,void 0,void 0,function*(){if(o==null)return null;const c=yield this.resolveName(o);return c==null&&logger$f.throwArgumentError("provided ENS name resolves to null","tx.to",o),c})),n.to.catch(o=>{}));const a=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||a)?logger$f.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(n.type===0||n.type===1)&&a&&logger$f.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1)n.gasPrice==null&&(n.gasPrice=this.getGasPrice());else{const o=yield this.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const c=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=c,n.maxPriorityFeePerGas=c}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(a&&logger$f.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):logger$f.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else n.type===2&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return n.nonce==null&&(n.nonce=this.getTransactionCount("pending")),n.gasLimit==null&&(n.gasLimit=this.estimateGas(n).catch(o=>{if(forwardErrors.indexOf(o.code)>=0)throw o;return logger$f.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:o,tx:n})})),n.chainId==null?n.chainId=this.getChainId():n.chainId=Promise.all([Promise.resolve(n.chainId),this.getChainId()]).then(o=>(o[1]!==0&&o[0]!==o[1]&&logger$f.throwArgumentError("chainId address mismatch","transaction",e),o[0])),yield resolveProperties(n)})}_checkProvider(e){this.provider||logger$f.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}const version$a="strings/5.7.0",logger$e=new Logger(version$a);var UnicodeNormalizationForm;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function toUtf8Bytes(t,e=UnicodeNormalizationForm.current){e!=UnicodeNormalizationForm.current&&(logger$e.checkNormalize(),t=t.normalize(e));let n=[];for(let a=0;a<t.length;a++){const o=t.charCodeAt(a);if(o<128)n.push(o);else if(o<2048)n.push(o>>6|192),n.push(o&63|128);else if((o&64512)==55296){a++;const c=t.charCodeAt(a);if(a>=t.length||(c&64512)!==56320)throw new Error("invalid utf-8 string");const l=65536+((o&1023)<<10)+(c&1023);n.push(l>>18|240),n.push(l>>12&63|128),n.push(l>>6&63|128),n.push(l&63|128)}else n.push(o>>12|224),n.push(o>>6&63|128),n.push(o&63|128)}return arrayify(n)}function id(t){return keccak256(toUtf8Bytes(t))}const version$9="hash/5.7.0",messagePrefix=`Ethereum Signed Message:
`;function hashMessage(t){return typeof t=="string"&&(t=toUtf8Bytes(t)),keccak256(concat([toUtf8Bytes(messagePrefix),toUtf8Bytes(String(t.length)),t]))}var __awaiter$2=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(b){try{m(a.next(b))}catch(x){l(x)}}function d(b){try{m(a.throw(b))}catch(x){l(x)}}function m(b){b.done?c(b.value):o(b.value).then(u,d)}m((a=a.apply(t,e||[])).next())})};const logger$d=new Logger(version$9),padding=new Uint8Array(32);padding.fill(0);const NegativeOne=BigNumber.from(-1),Zero=BigNumber.from(0),One=BigNumber.from(1),MaxUint256=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(t){const e=arrayify(t),n=e.length%32;return n?hexConcat([e,padding.slice(n)]):hexlify(e)}const hexTrue=hexZeroPad(One.toHexString(),32),hexFalse=hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(t){return function(e){return typeof e!="string"&&logger$d.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(t){try{return BigNumber.from(t).toString()}catch{}return logger$d.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return getAddress(t).toLowerCase()}catch{}return logger$d.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=arrayify(t);if(e.length!==32)throw new Error("bad length");return hexlify(e)}catch{}return logger$d.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function getBaseEncoder(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const n=e[1]==="",a=parseInt(e[2]||"256");(a%8!==0||a>256||e[2]&&e[2]!==String(a))&&logger$d.throwArgumentError("invalid numeric width","type",t);const o=MaxUint256.mask(n?a-1:a),c=n?o.add(One).mul(NegativeOne):Zero;return function(l){const u=BigNumber.from(l);return(u.lt(c)||u.gt(o))&&logger$d.throwArgumentError(`value out-of-bounds for ${t}`,"value",l),hexZeroPad(u.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return(n===0||n>32||e[1]!==String(n))&&logger$d.throwArgumentError("invalid bytes width","type",t),function(a){return arrayify(a).length!==n&&logger$d.throwArgumentError(`invalid length for ${t}`,"value",a),hexPadRight(a)}}}switch(t){case"address":return function(e){return hexZeroPad(getAddress(e),32)};case"bool":return function(e){return e?hexTrue:hexFalse};case"bytes":return function(e){return keccak256(e)};case"string":return function(e){return id(e)}}return null}function encodeType(t,e){return`${t}(${e.map(({name:n,type:a})=>a+" "+n).join(",")})`}class TypedDataEncoder{constructor(e){defineReadOnly(this,"types",Object.freeze(deepCopy$1(e))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const n={},a={},o={};Object.keys(e).forEach(u=>{n[u]={},a[u]=[],o[u]={}});for(const u in e){const d={};e[u].forEach(m=>{d[m.name]&&logger$d.throwArgumentError(`duplicate variable name ${JSON.stringify(m.name)} in ${JSON.stringify(u)}`,"types",e),d[m.name]=!0;const b=m.type.match(/^([^\x5b]*)(\x5b|$)/)[1];b===u&&logger$d.throwArgumentError(`circular type reference to ${JSON.stringify(b)}`,"types",e),!getBaseEncoder(b)&&(a[b]||logger$d.throwArgumentError(`unknown type ${JSON.stringify(b)}`,"types",e),a[b].push(u),n[u][b]=!0)})}const c=Object.keys(a).filter(u=>a[u].length===0);c.length===0?logger$d.throwArgumentError("missing primary type","types",e):c.length>1&&logger$d.throwArgumentError(`ambiguous primary types or unused types: ${c.map(u=>JSON.stringify(u)).join(", ")}`,"types",e),defineReadOnly(this,"primaryType",c[0]);function l(u,d){d[u]&&logger$d.throwArgumentError(`circular type reference to ${JSON.stringify(u)}`,"types",e),d[u]=!0,Object.keys(n[u]).forEach(m=>{a[m]&&(l(m,d),Object.keys(d).forEach(b=>{o[b][m]=!0}))}),delete d[u]}l(this.primaryType,{});for(const u in o){const d=Object.keys(o[u]);d.sort(),this._types[u]=encodeType(u,e[u])+d.map(m=>encodeType(m,e[m])).join("")}}getEncoder(e){let n=this._encoderCache[e];return n||(n=this._encoderCache[e]=this._getEncoder(e)),n}_getEncoder(e){{const o=getBaseEncoder(e);if(o)return o}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const o=n[1],c=this.getEncoder(o),l=parseInt(n[3]);return u=>{l>=0&&u.length!==l&&logger$d.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",u);let d=u.map(c);return this._types[o]&&(d=d.map(keccak256)),keccak256(hexConcat(d))}}const a=this.types[e];if(a){const o=id(this._types[e]);return c=>{const l=a.map(({name:u,type:d})=>{const m=this.getEncoder(d)(c[u]);return this._types[d]?keccak256(m):m});return l.unshift(o),hexConcat(l)}}return logger$d.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const n=this._types[e];return n||logger$d.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return keccak256(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,a){if(getBaseEncoder(e))return a(e,n);const o=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(o){const l=o[1],u=parseInt(o[3]);return u>=0&&n.length!==u&&logger$d.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",n),n.map(d=>this._visit(l,d,a))}const c=this.types[e];return c?c.reduce((l,{name:u,type:d})=>(l[u]=this._visit(d,n[u],a),l),{}):logger$d.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new TypedDataEncoder(e)}static getPrimaryType(e){return TypedDataEncoder.from(e).primaryType}static hashStruct(e,n,a){return TypedDataEncoder.from(n).hashStruct(e,a)}static hashDomain(e){const n=[];for(const a in e){const o=domainFieldTypes[a];o||logger$d.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(a)}`,"domain",e),n.push({name:a,type:o})}return n.sort((a,o)=>domainFieldNames.indexOf(a.name)-domainFieldNames.indexOf(o.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,a){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(e),TypedDataEncoder.from(n).hash(a)])}static hash(e,n,a){return keccak256(TypedDataEncoder.encode(e,n,a))}static resolveNames(e,n,a,o){return __awaiter$2(this,void 0,void 0,function*(){e=shallowCopy(e);const c={};e.verifyingContract&&!isHexString(e.verifyingContract,20)&&(c[e.verifyingContract]="0x");const l=TypedDataEncoder.from(n);l.visit(a,(u,d)=>(u==="address"&&!isHexString(d,20)&&(c[d]="0x"),d));for(const u in c)c[u]=yield o(u);return e.verifyingContract&&c[e.verifyingContract]&&(e.verifyingContract=c[e.verifyingContract]),a=l.visit(a,(u,d)=>u==="address"&&c[d]?c[d]:d),{domain:e,value:a}})}static getPayload(e,n,a){TypedDataEncoder.hashDomain(e);const o={},c=[];domainFieldNames.forEach(d=>{const m=e[d];m!=null&&(o[d]=domainChecks[d](m),c.push({name:d,type:domainFieldTypes[d]}))});const l=TypedDataEncoder.from(n),u=shallowCopy(n);return u.EIP712Domain?logger$d.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",n):u.EIP712Domain=c,l.encode(a),{types:u,domain:o,primaryType:l.primaryType,message:l.visit(a,(d,m)=>{if(d.match(/^bytes(\d*)/))return hexlify(arrayify(m));if(d.match(/^u?int/))return BigNumber.from(m).toString();switch(d){case"address":return m.toLowerCase();case"bool":return!!m;case"string":return typeof m!="string"&&logger$d.throwArgumentError("invalid string","value",m),m}return logger$d.throwArgumentError("unsupported type","type",d)})}}}class BaseX{constructor(e){defineReadOnly(this,"alphabet",e),defineReadOnly(this,"base",e.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",e.charAt(0));for(let n=0;n<e.length;n++)this._alphabetMap[e.charAt(n)]=n}encode(e){let n=arrayify(e);if(n.length===0)return"";let a=[0];for(let c=0;c<n.length;++c){let l=n[c];for(let u=0;u<a.length;++u)l+=a[u]<<8,a[u]=l%this.base,l=l/this.base|0;for(;l>0;)a.push(l%this.base),l=l/this.base|0}let o="";for(let c=0;n[c]===0&&c<n.length-1;++c)o+=this._leader;for(let c=a.length-1;c>=0;--c)o+=this.alphabet[a[c]];return o}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let n=[];if(e.length===0)return new Uint8Array(n);n.push(0);for(let a=0;a<e.length;a++){let o=this._alphabetMap[e[a]];if(o===void 0)throw new Error("Non-base"+this.base+" character");let c=o;for(let l=0;l<n.length;++l)c+=n[l]*this.base,n[l]=c&255,c>>=8;for(;c>0;)n.push(c&255),c>>=8}for(let a=0;e[a]===this._leader&&a<e.length-1;++a)n.push(0);return arrayify(new Uint8Array(n.reverse()))}}new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var SupportedAlgorithm;(function(t){t.sha256="sha256",t.sha512="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$8="sha2/5.7.0",logger$c=new Logger(version$8);function ripemd160(t){return"0x"+hash$3.ripemd160().update(arrayify(t)).digest("hex")}function sha256(t){return"0x"+hash$3.sha256().update(arrayify(t)).digest("hex")}function computeHmac(t,e,n){return SupportedAlgorithm[t]||logger$c.throwError("unsupported algorithm "+t,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+hash$3.hmac(hash$3[t],arrayify(e)).update(arrayify(n)).digest("hex")}function pbkdf2$1(t,e,n,a,o){t=arrayify(t),e=arrayify(e);let c,l=1;const u=new Uint8Array(a),d=new Uint8Array(e.length+4);d.set(e);let m,b;for(let x=1;x<=l;x++){d[e.length]=x>>24&255,d[e.length+1]=x>>16&255,d[e.length+2]=x>>8&255,d[e.length+3]=x&255;let _=arrayify(computeHmac(o,t,d));c||(c=_.length,b=new Uint8Array(c),l=Math.ceil(a/c),m=a-(l-1)*c),b.set(_);for(let T=1;T<n;T++){_=arrayify(computeHmac(o,t,_));for(let B=0;B<c;B++)b[B]^=_[B]}const w=(x-1)*c,S=x===l?m:c;u.set(arrayify(b).slice(0,S),w)}return hexlify(u)}var bnExports={},bn={get exports(){return bnExports},set exports(t){bnExports=t}};(function(t){(function(e,n){function a(k,y){if(!k)throw new Error(y||"Assertion failed")}function o(k,y){k.super_=y;var A=function(){};A.prototype=y.prototype,k.prototype=new A,k.prototype.constructor=k}function c(k,y,A){if(c.isBN(k))return k;this.negative=0,this.words=null,this.length=0,this.red=null,k!==null&&((y==="le"||y==="be")&&(A=y,y=10),this._init(k||0,y||10,A||"be"))}typeof e=="object"?e.exports=c:n.BN=c,c.BN=c,c.wordSize=26;var l;try{typeof window<"u"&&typeof window.Buffer<"u"?l=window.Buffer:l=require$$0$2.Buffer}catch{}c.isBN=function(y){return y instanceof c?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===c.wordSize&&Array.isArray(y.words)},c.max=function(y,A){return y.cmp(A)>0?y:A},c.min=function(y,A){return y.cmp(A)<0?y:A},c.prototype._init=function(y,A,I){if(typeof y=="number")return this._initNumber(y,A,I);if(typeof y=="object")return this._initArray(y,A,I);A==="hex"&&(A=16),a(A===(A|0)&&A>=2&&A<=36),y=y.toString().replace(/\s+/g,"");var P=0;y[0]==="-"&&(P++,this.negative=1),P<y.length&&(A===16?this._parseHex(y,P,I):(this._parseBase(y,A,P),I==="le"&&this._initArray(this.toArray(),A,I)))},c.prototype._initNumber=function(y,A,I){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(a(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),I==="le"&&this._initArray(this.toArray(),A,I)},c.prototype._initArray=function(y,A,I){if(a(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var H,q,j=0;if(I==="be")for(P=y.length-1,H=0;P>=0;P-=3)q=y[P]|y[P-1]<<8|y[P-2]<<16,this.words[H]|=q<<j&67108863,this.words[H+1]=q>>>26-j&67108863,j+=24,j>=26&&(j-=26,H++);else if(I==="le")for(P=0,H=0;P<y.length;P+=3)q=y[P]|y[P+1]<<8|y[P+2]<<16,this.words[H]|=q<<j&67108863,this.words[H+1]=q>>>26-j&67108863,j+=24,j>=26&&(j-=26,H++);return this._strip()};function u(k,y){var A=k.charCodeAt(y);if(A>=48&&A<=57)return A-48;if(A>=65&&A<=70)return A-55;if(A>=97&&A<=102)return A-87;a(!1,"Invalid character in "+k)}function d(k,y,A){var I=u(k,A);return A-1>=y&&(I|=u(k,A-1)<<4),I}c.prototype._parseHex=function(y,A,I){this.length=Math.ceil((y.length-A)/6),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var H=0,q=0,j;if(I==="be")for(P=y.length-1;P>=A;P-=2)j=d(y,A,P)<<H,this.words[q]|=j&67108863,H>=18?(H-=18,q+=1,this.words[q]|=j>>>26):H+=8;else{var M=y.length-A;for(P=M%2===0?A+1:A;P<y.length;P+=2)j=d(y,A,P)<<H,this.words[q]|=j&67108863,H>=18?(H-=18,q+=1,this.words[q]|=j>>>26):H+=8}this._strip()};function m(k,y,A,I){for(var P=0,H=0,q=Math.min(k.length,A),j=y;j<q;j++){var M=k.charCodeAt(j)-48;P*=I,M>=49?H=M-49+10:M>=17?H=M-17+10:H=M,a(M>=0&&H<I,"Invalid character"),P+=H}return P}c.prototype._parseBase=function(y,A,I){this.words=[0],this.length=1;for(var P=0,H=1;H<=67108863;H*=A)P++;P--,H=H/A|0;for(var q=y.length-I,j=q%P,M=Math.min(q,q-j)+I,E=0,L=I;L<M;L+=P)E=m(y,L,L+P,A),this.imuln(H),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E);if(j!==0){var le=1;for(E=m(y,L,y.length,A),L=0;L<j;L++)le*=A;this.imuln(le),this.words[0]+E<67108864?this.words[0]+=E:this._iaddn(E)}this._strip()},c.prototype.copy=function(y){y.words=new Array(this.length);for(var A=0;A<this.length;A++)y.words[A]=this.words[A];y.length=this.length,y.negative=this.negative,y.red=this.red};function b(k,y){k.words=y.words,k.length=y.length,k.negative=y.negative,k.red=y.red}if(c.prototype._move=function(y){b(y,this)},c.prototype.clone=function(){var y=new c(null);return this.copy(y),y},c.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},c.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},c.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{c.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{c.prototype.inspect=x}else c.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var _=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],w=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],S=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];c.prototype.toString=function(y,A){y=y||10,A=A|0||1;var I;if(y===16||y==="hex"){I="";for(var P=0,H=0,q=0;q<this.length;q++){var j=this.words[q],M=((j<<P|H)&16777215).toString(16);H=j>>>24-P&16777215,P+=2,P>=26&&(P-=26,q--),H!==0||q!==this.length-1?I=_[6-M.length]+M+I:I=M+I}for(H!==0&&(I=H.toString(16)+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}if(y===(y|0)&&y>=2&&y<=36){var E=w[y],L=S[y];I="";var le=this.clone();for(le.negative=0;!le.isZero();){var Q=le.modrn(L).toString(y);le=le.idivn(L),le.isZero()?I=Q+I:I=_[E-Q.length]+Q+I}for(this.isZero()&&(I="0"+I);I.length%A!==0;)I="0"+I;return this.negative!==0&&(I="-"+I),I}a(!1,"Base should be between 2 and 36")},c.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},c.prototype.toJSON=function(){return this.toString(16,2)},l&&(c.prototype.toBuffer=function(y,A){return this.toArrayLike(l,y,A)}),c.prototype.toArray=function(y,A){return this.toArrayLike(Array,y,A)};var T=function(y,A){return y.allocUnsafe?y.allocUnsafe(A):new y(A)};c.prototype.toArrayLike=function(y,A,I){this._strip();var P=this.byteLength(),H=I||Math.max(1,P);a(P<=H,"byte array longer than desired length"),a(H>0,"Requested array length <= 0");var q=T(y,H),j=A==="le"?"LE":"BE";return this["_toArrayLike"+j](q,P),q},c.prototype._toArrayLikeLE=function(y,A){for(var I=0,P=0,H=0,q=0;H<this.length;H++){var j=this.words[H]<<q|P;y[I++]=j&255,I<y.length&&(y[I++]=j>>8&255),I<y.length&&(y[I++]=j>>16&255),q===6?(I<y.length&&(y[I++]=j>>24&255),P=0,q=0):(P=j>>>24,q+=2)}if(I<y.length)for(y[I++]=P;I<y.length;)y[I++]=0},c.prototype._toArrayLikeBE=function(y,A){for(var I=y.length-1,P=0,H=0,q=0;H<this.length;H++){var j=this.words[H]<<q|P;y[I--]=j&255,I>=0&&(y[I--]=j>>8&255),I>=0&&(y[I--]=j>>16&255),q===6?(I>=0&&(y[I--]=j>>24&255),P=0,q=0):(P=j>>>24,q+=2)}if(I>=0)for(y[I--]=P;I>=0;)y[I--]=0},Math.clz32?c.prototype._countBits=function(y){return 32-Math.clz32(y)}:c.prototype._countBits=function(y){var A=y,I=0;return A>=4096&&(I+=13,A>>>=13),A>=64&&(I+=7,A>>>=7),A>=8&&(I+=4,A>>>=4),A>=2&&(I+=2,A>>>=2),I+A},c.prototype._zeroBits=function(y){if(y===0)return 26;var A=y,I=0;return A&8191||(I+=13,A>>>=13),A&127||(I+=7,A>>>=7),A&15||(I+=4,A>>>=4),A&3||(I+=2,A>>>=2),A&1||I++,I},c.prototype.bitLength=function(){var y=this.words[this.length-1],A=this._countBits(y);return(this.length-1)*26+A};function B(k){for(var y=new Array(k.bitLength()),A=0;A<y.length;A++){var I=A/26|0,P=A%26;y[A]=k.words[I]>>>P&1}return y}c.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,A=0;A<this.length;A++){var I=this._zeroBits(this.words[A]);if(y+=I,I!==26)break}return y},c.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},c.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},c.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},c.prototype.isNeg=function(){return this.negative!==0},c.prototype.neg=function(){return this.clone().ineg()},c.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},c.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var A=0;A<y.length;A++)this.words[A]=this.words[A]|y.words[A];return this._strip()},c.prototype.ior=function(y){return a((this.negative|y.negative)===0),this.iuor(y)},c.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},c.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},c.prototype.iuand=function(y){var A;this.length>y.length?A=y:A=this;for(var I=0;I<A.length;I++)this.words[I]=this.words[I]&y.words[I];return this.length=A.length,this._strip()},c.prototype.iand=function(y){return a((this.negative|y.negative)===0),this.iuand(y)},c.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},c.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},c.prototype.iuxor=function(y){var A,I;this.length>y.length?(A=this,I=y):(A=y,I=this);for(var P=0;P<I.length;P++)this.words[P]=A.words[P]^I.words[P];if(this!==A)for(;P<A.length;P++)this.words[P]=A.words[P];return this.length=A.length,this._strip()},c.prototype.ixor=function(y){return a((this.negative|y.negative)===0),this.iuxor(y)},c.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},c.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},c.prototype.inotn=function(y){a(typeof y=="number"&&y>=0);var A=Math.ceil(y/26)|0,I=y%26;this._expand(A),I>0&&A--;for(var P=0;P<A;P++)this.words[P]=~this.words[P]&67108863;return I>0&&(this.words[P]=~this.words[P]&67108863>>26-I),this._strip()},c.prototype.notn=function(y){return this.clone().inotn(y)},c.prototype.setn=function(y,A){a(typeof y=="number"&&y>=0);var I=y/26|0,P=y%26;return this._expand(I+1),A?this.words[I]=this.words[I]|1<<P:this.words[I]=this.words[I]&~(1<<P),this._strip()},c.prototype.iadd=function(y){var A;if(this.negative!==0&&y.negative===0)return this.negative=0,A=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,A=this.isub(y),y.negative=1,A._normSign();var I,P;this.length>y.length?(I=this,P=y):(I=y,P=this);for(var H=0,q=0;q<P.length;q++)A=(I.words[q]|0)+(P.words[q]|0)+H,this.words[q]=A&67108863,H=A>>>26;for(;H!==0&&q<I.length;q++)A=(I.words[q]|0)+H,this.words[q]=A&67108863,H=A>>>26;if(this.length=I.length,H!==0)this.words[this.length]=H,this.length++;else if(I!==this)for(;q<I.length;q++)this.words[q]=I.words[q];return this},c.prototype.add=function(y){var A;return y.negative!==0&&this.negative===0?(y.negative=0,A=this.sub(y),y.negative^=1,A):y.negative===0&&this.negative!==0?(this.negative=0,A=y.sub(this),this.negative=1,A):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},c.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var A=this.iadd(y);return y.negative=1,A._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var I=this.cmp(y);if(I===0)return this.negative=0,this.length=1,this.words[0]=0,this;var P,H;I>0?(P=this,H=y):(P=y,H=this);for(var q=0,j=0;j<H.length;j++)A=(P.words[j]|0)-(H.words[j]|0)+q,q=A>>26,this.words[j]=A&67108863;for(;q!==0&&j<P.length;j++)A=(P.words[j]|0)+q,q=A>>26,this.words[j]=A&67108863;if(q===0&&j<P.length&&P!==this)for(;j<P.length;j++)this.words[j]=P.words[j];return this.length=Math.max(this.length,j),P!==this&&(this.negative=1),this._strip()},c.prototype.sub=function(y){return this.clone().isub(y)};function C(k,y,A){A.negative=y.negative^k.negative;var I=k.length+y.length|0;A.length=I,I=I-1|0;var P=k.words[0]|0,H=y.words[0]|0,q=P*H,j=q&67108863,M=q/67108864|0;A.words[0]=j;for(var E=1;E<I;E++){for(var L=M>>>26,le=M&67108863,Q=Math.min(E,y.length-1),ce=Math.max(0,E-k.length+1);ce<=Q;ce++){var fe=E-ce|0;P=k.words[fe]|0,H=y.words[ce]|0,q=P*H+le,L+=q/67108864|0,le=q&67108863}A.words[E]=le|0,M=L|0}return M!==0?A.words[E]=M|0:A.length--,A._strip()}var D=function(y,A,I){var P=y.words,H=A.words,q=I.words,j=0,M,E,L,le=P[0]|0,Q=le&8191,ce=le>>>13,fe=P[1]|0,oe=fe&8191,de=fe>>>13,ae=P[2]|0,he=ae&8191,te=ae>>>13,pe=P[3]|0,ee=pe&8191,ge=pe>>>13,Ee=P[4]|0,be=Ee&8191,xe=Ee>>>13,ve=P[5]|0,Se=ve&8191,ke=ve>>>13,Ce=P[6]|0,Re=Ce&8191,Le=Ce>>>13,je=P[7]|0,Pe=je&8191,me=je>>>13,ne=P[8]|0,ue=ne&8191,_e=ne>>>13,Ie=P[9]|0,Ne=Ie&8191,De=Ie>>>13,et=H[0]|0,We=et&8191,Ke=et>>>13,xt=H[1]|0,tt=xt&8191,st=xt>>>13,It=H[2]|0,yt=It&8191,ut=It>>>13,At=H[3]|0,ht=At&8191,nt=At>>>13,Tt=H[4]|0,dt=Tt&8191,it=Tt>>>13,Bt=H[5]|0,pt=Bt&8191,rt=Bt>>>13,Ct=H[6]|0,we=Ct&8191,Be=Ct>>>13,Me=H[7]|0,re=Me&8191,ye=Me>>>13,Ae=H[8]|0,$e=Ae&8191,Te=Ae>>>13,Oe=H[9]|0,Fe=Oe&8191,Ue=Oe>>>13;I.negative=y.negative^A.negative,I.length=19,M=Math.imul(Q,We),E=Math.imul(Q,Ke),E=E+Math.imul(ce,We)|0,L=Math.imul(ce,Ke);var ze=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(ze>>>26)|0,ze&=67108863,M=Math.imul(oe,We),E=Math.imul(oe,Ke),E=E+Math.imul(de,We)|0,L=Math.imul(de,Ke),M=M+Math.imul(Q,tt)|0,E=E+Math.imul(Q,st)|0,E=E+Math.imul(ce,tt)|0,L=L+Math.imul(ce,st)|0;var He=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(He>>>26)|0,He&=67108863,M=Math.imul(he,We),E=Math.imul(he,Ke),E=E+Math.imul(te,We)|0,L=Math.imul(te,Ke),M=M+Math.imul(oe,tt)|0,E=E+Math.imul(oe,st)|0,E=E+Math.imul(de,tt)|0,L=L+Math.imul(de,st)|0,M=M+Math.imul(Q,yt)|0,E=E+Math.imul(Q,ut)|0,E=E+Math.imul(ce,yt)|0,L=L+Math.imul(ce,ut)|0;var qe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(qe>>>26)|0,qe&=67108863,M=Math.imul(ee,We),E=Math.imul(ee,Ke),E=E+Math.imul(ge,We)|0,L=Math.imul(ge,Ke),M=M+Math.imul(he,tt)|0,E=E+Math.imul(he,st)|0,E=E+Math.imul(te,tt)|0,L=L+Math.imul(te,st)|0,M=M+Math.imul(oe,yt)|0,E=E+Math.imul(oe,ut)|0,E=E+Math.imul(de,yt)|0,L=L+Math.imul(de,ut)|0,M=M+Math.imul(Q,ht)|0,E=E+Math.imul(Q,nt)|0,E=E+Math.imul(ce,ht)|0,L=L+Math.imul(ce,nt)|0;var Xe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,M=Math.imul(be,We),E=Math.imul(be,Ke),E=E+Math.imul(xe,We)|0,L=Math.imul(xe,Ke),M=M+Math.imul(ee,tt)|0,E=E+Math.imul(ee,st)|0,E=E+Math.imul(ge,tt)|0,L=L+Math.imul(ge,st)|0,M=M+Math.imul(he,yt)|0,E=E+Math.imul(he,ut)|0,E=E+Math.imul(te,yt)|0,L=L+Math.imul(te,ut)|0,M=M+Math.imul(oe,ht)|0,E=E+Math.imul(oe,nt)|0,E=E+Math.imul(de,ht)|0,L=L+Math.imul(de,nt)|0,M=M+Math.imul(Q,dt)|0,E=E+Math.imul(Q,it)|0,E=E+Math.imul(ce,dt)|0,L=L+Math.imul(ce,it)|0;var Ze=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,M=Math.imul(Se,We),E=Math.imul(Se,Ke),E=E+Math.imul(ke,We)|0,L=Math.imul(ke,Ke),M=M+Math.imul(be,tt)|0,E=E+Math.imul(be,st)|0,E=E+Math.imul(xe,tt)|0,L=L+Math.imul(xe,st)|0,M=M+Math.imul(ee,yt)|0,E=E+Math.imul(ee,ut)|0,E=E+Math.imul(ge,yt)|0,L=L+Math.imul(ge,ut)|0,M=M+Math.imul(he,ht)|0,E=E+Math.imul(he,nt)|0,E=E+Math.imul(te,ht)|0,L=L+Math.imul(te,nt)|0,M=M+Math.imul(oe,dt)|0,E=E+Math.imul(oe,it)|0,E=E+Math.imul(de,dt)|0,L=L+Math.imul(de,it)|0,M=M+Math.imul(Q,pt)|0,E=E+Math.imul(Q,rt)|0,E=E+Math.imul(ce,pt)|0,L=L+Math.imul(ce,rt)|0;var at=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(at>>>26)|0,at&=67108863,M=Math.imul(Re,We),E=Math.imul(Re,Ke),E=E+Math.imul(Le,We)|0,L=Math.imul(Le,Ke),M=M+Math.imul(Se,tt)|0,E=E+Math.imul(Se,st)|0,E=E+Math.imul(ke,tt)|0,L=L+Math.imul(ke,st)|0,M=M+Math.imul(be,yt)|0,E=E+Math.imul(be,ut)|0,E=E+Math.imul(xe,yt)|0,L=L+Math.imul(xe,ut)|0,M=M+Math.imul(ee,ht)|0,E=E+Math.imul(ee,nt)|0,E=E+Math.imul(ge,ht)|0,L=L+Math.imul(ge,nt)|0,M=M+Math.imul(he,dt)|0,E=E+Math.imul(he,it)|0,E=E+Math.imul(te,dt)|0,L=L+Math.imul(te,it)|0,M=M+Math.imul(oe,pt)|0,E=E+Math.imul(oe,rt)|0,E=E+Math.imul(de,pt)|0,L=L+Math.imul(de,rt)|0,M=M+Math.imul(Q,we)|0,E=E+Math.imul(Q,Be)|0,E=E+Math.imul(ce,we)|0,L=L+Math.imul(ce,Be)|0;var Je=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Je>>>26)|0,Je&=67108863,M=Math.imul(Pe,We),E=Math.imul(Pe,Ke),E=E+Math.imul(me,We)|0,L=Math.imul(me,Ke),M=M+Math.imul(Re,tt)|0,E=E+Math.imul(Re,st)|0,E=E+Math.imul(Le,tt)|0,L=L+Math.imul(Le,st)|0,M=M+Math.imul(Se,yt)|0,E=E+Math.imul(Se,ut)|0,E=E+Math.imul(ke,yt)|0,L=L+Math.imul(ke,ut)|0,M=M+Math.imul(be,ht)|0,E=E+Math.imul(be,nt)|0,E=E+Math.imul(xe,ht)|0,L=L+Math.imul(xe,nt)|0,M=M+Math.imul(ee,dt)|0,E=E+Math.imul(ee,it)|0,E=E+Math.imul(ge,dt)|0,L=L+Math.imul(ge,it)|0,M=M+Math.imul(he,pt)|0,E=E+Math.imul(he,rt)|0,E=E+Math.imul(te,pt)|0,L=L+Math.imul(te,rt)|0,M=M+Math.imul(oe,we)|0,E=E+Math.imul(oe,Be)|0,E=E+Math.imul(de,we)|0,L=L+Math.imul(de,Be)|0,M=M+Math.imul(Q,re)|0,E=E+Math.imul(Q,ye)|0,E=E+Math.imul(ce,re)|0,L=L+Math.imul(ce,ye)|0;var Qe=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,M=Math.imul(ue,We),E=Math.imul(ue,Ke),E=E+Math.imul(_e,We)|0,L=Math.imul(_e,Ke),M=M+Math.imul(Pe,tt)|0,E=E+Math.imul(Pe,st)|0,E=E+Math.imul(me,tt)|0,L=L+Math.imul(me,st)|0,M=M+Math.imul(Re,yt)|0,E=E+Math.imul(Re,ut)|0,E=E+Math.imul(Le,yt)|0,L=L+Math.imul(Le,ut)|0,M=M+Math.imul(Se,ht)|0,E=E+Math.imul(Se,nt)|0,E=E+Math.imul(ke,ht)|0,L=L+Math.imul(ke,nt)|0,M=M+Math.imul(be,dt)|0,E=E+Math.imul(be,it)|0,E=E+Math.imul(xe,dt)|0,L=L+Math.imul(xe,it)|0,M=M+Math.imul(ee,pt)|0,E=E+Math.imul(ee,rt)|0,E=E+Math.imul(ge,pt)|0,L=L+Math.imul(ge,rt)|0,M=M+Math.imul(he,we)|0,E=E+Math.imul(he,Be)|0,E=E+Math.imul(te,we)|0,L=L+Math.imul(te,Be)|0,M=M+Math.imul(oe,re)|0,E=E+Math.imul(oe,ye)|0,E=E+Math.imul(de,re)|0,L=L+Math.imul(de,ye)|0,M=M+Math.imul(Q,$e)|0,E=E+Math.imul(Q,Te)|0,E=E+Math.imul(ce,$e)|0,L=L+Math.imul(ce,Te)|0;var gt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(gt>>>26)|0,gt&=67108863,M=Math.imul(Ne,We),E=Math.imul(Ne,Ke),E=E+Math.imul(De,We)|0,L=Math.imul(De,Ke),M=M+Math.imul(ue,tt)|0,E=E+Math.imul(ue,st)|0,E=E+Math.imul(_e,tt)|0,L=L+Math.imul(_e,st)|0,M=M+Math.imul(Pe,yt)|0,E=E+Math.imul(Pe,ut)|0,E=E+Math.imul(me,yt)|0,L=L+Math.imul(me,ut)|0,M=M+Math.imul(Re,ht)|0,E=E+Math.imul(Re,nt)|0,E=E+Math.imul(Le,ht)|0,L=L+Math.imul(Le,nt)|0,M=M+Math.imul(Se,dt)|0,E=E+Math.imul(Se,it)|0,E=E+Math.imul(ke,dt)|0,L=L+Math.imul(ke,it)|0,M=M+Math.imul(be,pt)|0,E=E+Math.imul(be,rt)|0,E=E+Math.imul(xe,pt)|0,L=L+Math.imul(xe,rt)|0,M=M+Math.imul(ee,we)|0,E=E+Math.imul(ee,Be)|0,E=E+Math.imul(ge,we)|0,L=L+Math.imul(ge,Be)|0,M=M+Math.imul(he,re)|0,E=E+Math.imul(he,ye)|0,E=E+Math.imul(te,re)|0,L=L+Math.imul(te,ye)|0,M=M+Math.imul(oe,$e)|0,E=E+Math.imul(oe,Te)|0,E=E+Math.imul(de,$e)|0,L=L+Math.imul(de,Te)|0,M=M+Math.imul(Q,Fe)|0,E=E+Math.imul(Q,Ue)|0,E=E+Math.imul(ce,Fe)|0,L=L+Math.imul(ce,Ue)|0;var vt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(vt>>>26)|0,vt&=67108863,M=Math.imul(Ne,tt),E=Math.imul(Ne,st),E=E+Math.imul(De,tt)|0,L=Math.imul(De,st),M=M+Math.imul(ue,yt)|0,E=E+Math.imul(ue,ut)|0,E=E+Math.imul(_e,yt)|0,L=L+Math.imul(_e,ut)|0,M=M+Math.imul(Pe,ht)|0,E=E+Math.imul(Pe,nt)|0,E=E+Math.imul(me,ht)|0,L=L+Math.imul(me,nt)|0,M=M+Math.imul(Re,dt)|0,E=E+Math.imul(Re,it)|0,E=E+Math.imul(Le,dt)|0,L=L+Math.imul(Le,it)|0,M=M+Math.imul(Se,pt)|0,E=E+Math.imul(Se,rt)|0,E=E+Math.imul(ke,pt)|0,L=L+Math.imul(ke,rt)|0,M=M+Math.imul(be,we)|0,E=E+Math.imul(be,Be)|0,E=E+Math.imul(xe,we)|0,L=L+Math.imul(xe,Be)|0,M=M+Math.imul(ee,re)|0,E=E+Math.imul(ee,ye)|0,E=E+Math.imul(ge,re)|0,L=L+Math.imul(ge,ye)|0,M=M+Math.imul(he,$e)|0,E=E+Math.imul(he,Te)|0,E=E+Math.imul(te,$e)|0,L=L+Math.imul(te,Te)|0,M=M+Math.imul(oe,Fe)|0,E=E+Math.imul(oe,Ue)|0,E=E+Math.imul(de,Fe)|0,L=L+Math.imul(de,Ue)|0;var _t=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(_t>>>26)|0,_t&=67108863,M=Math.imul(Ne,yt),E=Math.imul(Ne,ut),E=E+Math.imul(De,yt)|0,L=Math.imul(De,ut),M=M+Math.imul(ue,ht)|0,E=E+Math.imul(ue,nt)|0,E=E+Math.imul(_e,ht)|0,L=L+Math.imul(_e,nt)|0,M=M+Math.imul(Pe,dt)|0,E=E+Math.imul(Pe,it)|0,E=E+Math.imul(me,dt)|0,L=L+Math.imul(me,it)|0,M=M+Math.imul(Re,pt)|0,E=E+Math.imul(Re,rt)|0,E=E+Math.imul(Le,pt)|0,L=L+Math.imul(Le,rt)|0,M=M+Math.imul(Se,we)|0,E=E+Math.imul(Se,Be)|0,E=E+Math.imul(ke,we)|0,L=L+Math.imul(ke,Be)|0,M=M+Math.imul(be,re)|0,E=E+Math.imul(be,ye)|0,E=E+Math.imul(xe,re)|0,L=L+Math.imul(xe,ye)|0,M=M+Math.imul(ee,$e)|0,E=E+Math.imul(ee,Te)|0,E=E+Math.imul(ge,$e)|0,L=L+Math.imul(ge,Te)|0,M=M+Math.imul(he,Fe)|0,E=E+Math.imul(he,Ue)|0,E=E+Math.imul(te,Fe)|0,L=L+Math.imul(te,Ue)|0;var bt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(bt>>>26)|0,bt&=67108863,M=Math.imul(Ne,ht),E=Math.imul(Ne,nt),E=E+Math.imul(De,ht)|0,L=Math.imul(De,nt),M=M+Math.imul(ue,dt)|0,E=E+Math.imul(ue,it)|0,E=E+Math.imul(_e,dt)|0,L=L+Math.imul(_e,it)|0,M=M+Math.imul(Pe,pt)|0,E=E+Math.imul(Pe,rt)|0,E=E+Math.imul(me,pt)|0,L=L+Math.imul(me,rt)|0,M=M+Math.imul(Re,we)|0,E=E+Math.imul(Re,Be)|0,E=E+Math.imul(Le,we)|0,L=L+Math.imul(Le,Be)|0,M=M+Math.imul(Se,re)|0,E=E+Math.imul(Se,ye)|0,E=E+Math.imul(ke,re)|0,L=L+Math.imul(ke,ye)|0,M=M+Math.imul(be,$e)|0,E=E+Math.imul(be,Te)|0,E=E+Math.imul(xe,$e)|0,L=L+Math.imul(xe,Te)|0,M=M+Math.imul(ee,Fe)|0,E=E+Math.imul(ee,Ue)|0,E=E+Math.imul(ge,Fe)|0,L=L+Math.imul(ge,Ue)|0;var St=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(St>>>26)|0,St&=67108863,M=Math.imul(Ne,dt),E=Math.imul(Ne,it),E=E+Math.imul(De,dt)|0,L=Math.imul(De,it),M=M+Math.imul(ue,pt)|0,E=E+Math.imul(ue,rt)|0,E=E+Math.imul(_e,pt)|0,L=L+Math.imul(_e,rt)|0,M=M+Math.imul(Pe,we)|0,E=E+Math.imul(Pe,Be)|0,E=E+Math.imul(me,we)|0,L=L+Math.imul(me,Be)|0,M=M+Math.imul(Re,re)|0,E=E+Math.imul(Re,ye)|0,E=E+Math.imul(Le,re)|0,L=L+Math.imul(Le,ye)|0,M=M+Math.imul(Se,$e)|0,E=E+Math.imul(Se,Te)|0,E=E+Math.imul(ke,$e)|0,L=L+Math.imul(ke,Te)|0,M=M+Math.imul(be,Fe)|0,E=E+Math.imul(be,Ue)|0,E=E+Math.imul(xe,Fe)|0,L=L+Math.imul(xe,Ue)|0;var $t=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+($t>>>26)|0,$t&=67108863,M=Math.imul(Ne,pt),E=Math.imul(Ne,rt),E=E+Math.imul(De,pt)|0,L=Math.imul(De,rt),M=M+Math.imul(ue,we)|0,E=E+Math.imul(ue,Be)|0,E=E+Math.imul(_e,we)|0,L=L+Math.imul(_e,Be)|0,M=M+Math.imul(Pe,re)|0,E=E+Math.imul(Pe,ye)|0,E=E+Math.imul(me,re)|0,L=L+Math.imul(me,ye)|0,M=M+Math.imul(Re,$e)|0,E=E+Math.imul(Re,Te)|0,E=E+Math.imul(Le,$e)|0,L=L+Math.imul(Le,Te)|0,M=M+Math.imul(Se,Fe)|0,E=E+Math.imul(Se,Ue)|0,E=E+Math.imul(ke,Fe)|0,L=L+Math.imul(ke,Ue)|0;var wt=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(wt>>>26)|0,wt&=67108863,M=Math.imul(Ne,we),E=Math.imul(Ne,Be),E=E+Math.imul(De,we)|0,L=Math.imul(De,Be),M=M+Math.imul(ue,re)|0,E=E+Math.imul(ue,ye)|0,E=E+Math.imul(_e,re)|0,L=L+Math.imul(_e,ye)|0,M=M+Math.imul(Pe,$e)|0,E=E+Math.imul(Pe,Te)|0,E=E+Math.imul(me,$e)|0,L=L+Math.imul(me,Te)|0,M=M+Math.imul(Re,Fe)|0,E=E+Math.imul(Re,Ue)|0,E=E+Math.imul(Le,Fe)|0,L=L+Math.imul(Le,Ue)|0;var Ge=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,M=Math.imul(Ne,re),E=Math.imul(Ne,ye),E=E+Math.imul(De,re)|0,L=Math.imul(De,ye),M=M+Math.imul(ue,$e)|0,E=E+Math.imul(ue,Te)|0,E=E+Math.imul(_e,$e)|0,L=L+Math.imul(_e,Te)|0,M=M+Math.imul(Pe,Fe)|0,E=E+Math.imul(Pe,Ue)|0,E=E+Math.imul(me,Fe)|0,L=L+Math.imul(me,Ue)|0;var Ye=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,M=Math.imul(Ne,$e),E=Math.imul(Ne,Te),E=E+Math.imul(De,$e)|0,L=Math.imul(De,Te),M=M+Math.imul(ue,Fe)|0,E=E+Math.imul(ue,Ue)|0,E=E+Math.imul(_e,Fe)|0,L=L+Math.imul(_e,Ue)|0;var ct=(j+M|0)+((E&8191)<<13)|0;j=(L+(E>>>13)|0)+(ct>>>26)|0,ct&=67108863,M=Math.imul(Ne,Fe),E=Math.imul(Ne,Ue),E=E+Math.imul(De,Fe)|0,L=Math.imul(De,Ue);var ot=(j+M|0)+((E&8191)<<13)|0;return j=(L+(E>>>13)|0)+(ot>>>26)|0,ot&=67108863,q[0]=ze,q[1]=He,q[2]=qe,q[3]=Xe,q[4]=Ze,q[5]=at,q[6]=Je,q[7]=Qe,q[8]=gt,q[9]=vt,q[10]=_t,q[11]=bt,q[12]=St,q[13]=$t,q[14]=wt,q[15]=Ge,q[16]=Ye,q[17]=ct,q[18]=ot,j!==0&&(q[19]=j,I.length++),I};Math.imul||(D=C);function z(k,y,A){A.negative=y.negative^k.negative,A.length=k.length+y.length;for(var I=0,P=0,H=0;H<A.length-1;H++){var q=P;P=0;for(var j=I&67108863,M=Math.min(H,y.length-1),E=Math.max(0,H-k.length+1);E<=M;E++){var L=H-E,le=k.words[L]|0,Q=y.words[E]|0,ce=le*Q,fe=ce&67108863;q=q+(ce/67108864|0)|0,fe=fe+j|0,j=fe&67108863,q=q+(fe>>>26)|0,P+=q>>>26,q&=67108863}A.words[H]=j,I=q,q=P}return I!==0?A.words[H]=I:A.length--,A._strip()}function U(k,y,A){return z(k,y,A)}c.prototype.mulTo=function(y,A){var I,P=this.length+y.length;return this.length===10&&y.length===10?I=D(this,y,A):P<63?I=C(this,y,A):P<1024?I=z(this,y,A):I=U(this,y,A),I},c.prototype.mul=function(y){var A=new c(null);return A.words=new Array(this.length+y.length),this.mulTo(y,A)},c.prototype.mulf=function(y){var A=new c(null);return A.words=new Array(this.length+y.length),U(this,y,A)},c.prototype.imul=function(y){return this.clone().mulTo(y,this)},c.prototype.imuln=function(y){var A=y<0;A&&(y=-y),a(typeof y=="number"),a(y<67108864);for(var I=0,P=0;P<this.length;P++){var H=(this.words[P]|0)*y,q=(H&67108863)+(I&67108863);I>>=26,I+=H/67108864|0,I+=q>>>26,this.words[P]=q&67108863}return I!==0&&(this.words[P]=I,this.length++),A?this.ineg():this},c.prototype.muln=function(y){return this.clone().imuln(y)},c.prototype.sqr=function(){return this.mul(this)},c.prototype.isqr=function(){return this.imul(this.clone())},c.prototype.pow=function(y){var A=B(y);if(A.length===0)return new c(1);for(var I=this,P=0;P<A.length&&A[P]===0;P++,I=I.sqr());if(++P<A.length)for(var H=I.sqr();P<A.length;P++,H=H.sqr())A[P]!==0&&(I=I.mul(H));return I},c.prototype.iushln=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26,P=67108863>>>26-A<<26-A,H;if(A!==0){var q=0;for(H=0;H<this.length;H++){var j=this.words[H]&P,M=(this.words[H]|0)-j<<A;this.words[H]=M|q,q=j>>>26-A}q&&(this.words[H]=q,this.length++)}if(I!==0){for(H=this.length-1;H>=0;H--)this.words[H+I]=this.words[H];for(H=0;H<I;H++)this.words[H]=0;this.length+=I}return this._strip()},c.prototype.ishln=function(y){return a(this.negative===0),this.iushln(y)},c.prototype.iushrn=function(y,A,I){a(typeof y=="number"&&y>=0);var P;A?P=(A-A%26)/26:P=0;var H=y%26,q=Math.min((y-H)/26,this.length),j=67108863^67108863>>>H<<H,M=I;if(P-=q,P=Math.max(0,P),M){for(var E=0;E<q;E++)M.words[E]=this.words[E];M.length=q}if(q!==0)if(this.length>q)for(this.length-=q,E=0;E<this.length;E++)this.words[E]=this.words[E+q];else this.words[0]=0,this.length=1;var L=0;for(E=this.length-1;E>=0&&(L!==0||E>=P);E--){var le=this.words[E]|0;this.words[E]=L<<26-H|le>>>H,L=le&j}return M&&L!==0&&(M.words[M.length++]=L),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},c.prototype.ishrn=function(y,A,I){return a(this.negative===0),this.iushrn(y,A,I)},c.prototype.shln=function(y){return this.clone().ishln(y)},c.prototype.ushln=function(y){return this.clone().iushln(y)},c.prototype.shrn=function(y){return this.clone().ishrn(y)},c.prototype.ushrn=function(y){return this.clone().iushrn(y)},c.prototype.testn=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26,P=1<<A;if(this.length<=I)return!1;var H=this.words[I];return!!(H&P)},c.prototype.imaskn=function(y){a(typeof y=="number"&&y>=0);var A=y%26,I=(y-A)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=I)return this;if(A!==0&&I++,this.length=Math.min(I,this.length),A!==0){var P=67108863^67108863>>>A<<A;this.words[this.length-1]&=P}return this._strip()},c.prototype.maskn=function(y){return this.clone().imaskn(y)},c.prototype.iaddn=function(y){return a(typeof y=="number"),a(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<=y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},c.prototype._iaddn=function(y){this.words[0]+=y;for(var A=0;A<this.length&&this.words[A]>=67108864;A++)this.words[A]-=67108864,A===this.length-1?this.words[A+1]=1:this.words[A+1]++;return this.length=Math.max(this.length,A+1),this},c.prototype.isubn=function(y){if(a(typeof y=="number"),a(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var A=0;A<this.length&&this.words[A]<0;A++)this.words[A]+=67108864,this.words[A+1]-=1;return this._strip()},c.prototype.addn=function(y){return this.clone().iaddn(y)},c.prototype.subn=function(y){return this.clone().isubn(y)},c.prototype.iabs=function(){return this.negative=0,this},c.prototype.abs=function(){return this.clone().iabs()},c.prototype._ishlnsubmul=function(y,A,I){var P=y.length+I,H;this._expand(P);var q,j=0;for(H=0;H<y.length;H++){q=(this.words[H+I]|0)+j;var M=(y.words[H]|0)*A;q-=M&67108863,j=(q>>26)-(M/67108864|0),this.words[H+I]=q&67108863}for(;H<this.length-I;H++)q=(this.words[H+I]|0)+j,j=q>>26,this.words[H+I]=q&67108863;if(j===0)return this._strip();for(a(j===-1),j=0,H=0;H<this.length;H++)q=-(this.words[H]|0)+j,j=q>>26,this.words[H]=q&67108863;return this.negative=1,this._strip()},c.prototype._wordDiv=function(y,A){var I=this.length-y.length,P=this.clone(),H=y,q=H.words[H.length-1]|0,j=this._countBits(q);I=26-j,I!==0&&(H=H.ushln(I),P.iushln(I),q=H.words[H.length-1]|0);var M=P.length-H.length,E;if(A!=="mod"){E=new c(null),E.length=M+1,E.words=new Array(E.length);for(var L=0;L<E.length;L++)E.words[L]=0}var le=P.clone()._ishlnsubmul(H,1,M);le.negative===0&&(P=le,E&&(E.words[M]=1));for(var Q=M-1;Q>=0;Q--){var ce=(P.words[H.length+Q]|0)*67108864+(P.words[H.length+Q-1]|0);for(ce=Math.min(ce/q|0,67108863),P._ishlnsubmul(H,ce,Q);P.negative!==0;)ce--,P.negative=0,P._ishlnsubmul(H,1,Q),P.isZero()||(P.negative^=1);E&&(E.words[Q]=ce)}return E&&E._strip(),P._strip(),A!=="div"&&I!==0&&P.iushrn(I),{div:E||null,mod:P}},c.prototype.divmod=function(y,A,I){if(a(!y.isZero()),this.isZero())return{div:new c(0),mod:new c(0)};var P,H,q;return this.negative!==0&&y.negative===0?(q=this.neg().divmod(y,A),A!=="mod"&&(P=q.div.neg()),A!=="div"&&(H=q.mod.neg(),I&&H.negative!==0&&H.iadd(y)),{div:P,mod:H}):this.negative===0&&y.negative!==0?(q=this.divmod(y.neg(),A),A!=="mod"&&(P=q.div.neg()),{div:P,mod:q.mod}):this.negative&y.negative?(q=this.neg().divmod(y.neg(),A),A!=="div"&&(H=q.mod.neg(),I&&H.negative!==0&&H.isub(y)),{div:q.div,mod:H}):y.length>this.length||this.cmp(y)<0?{div:new c(0),mod:this}:y.length===1?A==="div"?{div:this.divn(y.words[0]),mod:null}:A==="mod"?{div:null,mod:new c(this.modrn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new c(this.modrn(y.words[0]))}:this._wordDiv(y,A)},c.prototype.div=function(y){return this.divmod(y,"div",!1).div},c.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},c.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},c.prototype.divRound=function(y){var A=this.divmod(y);if(A.mod.isZero())return A.div;var I=A.div.negative!==0?A.mod.isub(y):A.mod,P=y.ushrn(1),H=y.andln(1),q=I.cmp(P);return q<0||H===1&&q===0?A.div:A.div.negative!==0?A.div.isubn(1):A.div.iaddn(1)},c.prototype.modrn=function(y){var A=y<0;A&&(y=-y),a(y<=67108863);for(var I=(1<<26)%y,P=0,H=this.length-1;H>=0;H--)P=(I*P+(this.words[H]|0))%y;return A?-P:P},c.prototype.modn=function(y){return this.modrn(y)},c.prototype.idivn=function(y){var A=y<0;A&&(y=-y),a(y<=67108863);for(var I=0,P=this.length-1;P>=0;P--){var H=(this.words[P]|0)+I*67108864;this.words[P]=H/y|0,I=H%y}return this._strip(),A?this.ineg():this},c.prototype.divn=function(y){return this.clone().idivn(y)},c.prototype.egcd=function(y){a(y.negative===0),a(!y.isZero());var A=this,I=y.clone();A.negative!==0?A=A.umod(y):A=A.clone();for(var P=new c(1),H=new c(0),q=new c(0),j=new c(1),M=0;A.isEven()&&I.isEven();)A.iushrn(1),I.iushrn(1),++M;for(var E=I.clone(),L=A.clone();!A.isZero();){for(var le=0,Q=1;!(A.words[0]&Q)&&le<26;++le,Q<<=1);if(le>0)for(A.iushrn(le);le-- >0;)(P.isOdd()||H.isOdd())&&(P.iadd(E),H.isub(L)),P.iushrn(1),H.iushrn(1);for(var ce=0,fe=1;!(I.words[0]&fe)&&ce<26;++ce,fe<<=1);if(ce>0)for(I.iushrn(ce);ce-- >0;)(q.isOdd()||j.isOdd())&&(q.iadd(E),j.isub(L)),q.iushrn(1),j.iushrn(1);A.cmp(I)>=0?(A.isub(I),P.isub(q),H.isub(j)):(I.isub(A),q.isub(P),j.isub(H))}return{a:q,b:j,gcd:I.iushln(M)}},c.prototype._invmp=function(y){a(y.negative===0),a(!y.isZero());var A=this,I=y.clone();A.negative!==0?A=A.umod(y):A=A.clone();for(var P=new c(1),H=new c(0),q=I.clone();A.cmpn(1)>0&&I.cmpn(1)>0;){for(var j=0,M=1;!(A.words[0]&M)&&j<26;++j,M<<=1);if(j>0)for(A.iushrn(j);j-- >0;)P.isOdd()&&P.iadd(q),P.iushrn(1);for(var E=0,L=1;!(I.words[0]&L)&&E<26;++E,L<<=1);if(E>0)for(I.iushrn(E);E-- >0;)H.isOdd()&&H.iadd(q),H.iushrn(1);A.cmp(I)>=0?(A.isub(I),P.isub(H)):(I.isub(A),H.isub(P))}var le;return A.cmpn(1)===0?le=P:le=H,le.cmpn(0)<0&&le.iadd(y),le},c.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var A=this.clone(),I=y.clone();A.negative=0,I.negative=0;for(var P=0;A.isEven()&&I.isEven();P++)A.iushrn(1),I.iushrn(1);do{for(;A.isEven();)A.iushrn(1);for(;I.isEven();)I.iushrn(1);var H=A.cmp(I);if(H<0){var q=A;A=I,I=q}else if(H===0||I.cmpn(1)===0)break;A.isub(I)}while(!0);return I.iushln(P)},c.prototype.invm=function(y){return this.egcd(y).a.umod(y)},c.prototype.isEven=function(){return(this.words[0]&1)===0},c.prototype.isOdd=function(){return(this.words[0]&1)===1},c.prototype.andln=function(y){return this.words[0]&y},c.prototype.bincn=function(y){a(typeof y=="number");var A=y%26,I=(y-A)/26,P=1<<A;if(this.length<=I)return this._expand(I+1),this.words[I]|=P,this;for(var H=P,q=I;H!==0&&q<this.length;q++){var j=this.words[q]|0;j+=H,H=j>>>26,j&=67108863,this.words[q]=j}return H!==0&&(this.words[q]=H,this.length++),this},c.prototype.isZero=function(){return this.length===1&&this.words[0]===0},c.prototype.cmpn=function(y){var A=y<0;if(this.negative!==0&&!A)return-1;if(this.negative===0&&A)return 1;this._strip();var I;if(this.length>1)I=1;else{A&&(y=-y),a(y<=67108863,"Number is too big");var P=this.words[0]|0;I=P===y?0:P<y?-1:1}return this.negative!==0?-I|0:I},c.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var A=this.ucmp(y);return this.negative!==0?-A|0:A},c.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var A=0,I=this.length-1;I>=0;I--){var P=this.words[I]|0,H=y.words[I]|0;if(P!==H){P<H?A=-1:P>H&&(A=1);break}}return A},c.prototype.gtn=function(y){return this.cmpn(y)===1},c.prototype.gt=function(y){return this.cmp(y)===1},c.prototype.gten=function(y){return this.cmpn(y)>=0},c.prototype.gte=function(y){return this.cmp(y)>=0},c.prototype.ltn=function(y){return this.cmpn(y)===-1},c.prototype.lt=function(y){return this.cmp(y)===-1},c.prototype.lten=function(y){return this.cmpn(y)<=0},c.prototype.lte=function(y){return this.cmp(y)<=0},c.prototype.eqn=function(y){return this.cmpn(y)===0},c.prototype.eq=function(y){return this.cmp(y)===0},c.red=function(y){return new ie(y)},c.prototype.toRed=function(y){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},c.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},c.prototype._forceRed=function(y){return this.red=y,this},c.prototype.forceRed=function(y){return a(!this.red,"Already a number in reduction context"),this._forceRed(y)},c.prototype.redAdd=function(y){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},c.prototype.redIAdd=function(y){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},c.prototype.redSub=function(y){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},c.prototype.redISub=function(y){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},c.prototype.redShl=function(y){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},c.prototype.redMul=function(y){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},c.prototype.redIMul=function(y){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},c.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},c.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},c.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},c.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},c.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},c.prototype.redPow=function(y){return a(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var Y={k256:null,p224:null,p192:null,p25519:null};function X(k,y){this.name=k,this.p=new c(y,16),this.n=this.p.bitLength(),this.k=new c(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}X.prototype._tmp=function(){var y=new c(null);return y.words=new Array(Math.ceil(this.n/13)),y},X.prototype.ireduce=function(y){var A=y,I;do this.split(A,this.tmp),A=this.imulK(A),A=A.iadd(this.tmp),I=A.bitLength();while(I>this.n);var P=I<this.n?-1:A.ucmp(this.p);return P===0?(A.words[0]=0,A.length=1):P>0?A.isub(this.p):A.strip!==void 0?A.strip():A._strip(),A},X.prototype.split=function(y,A){y.iushrn(this.n,0,A)},X.prototype.imulK=function(y){return y.imul(this.k)};function O(){X.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(O,X),O.prototype.split=function(y,A){for(var I=4194303,P=Math.min(y.length,9),H=0;H<P;H++)A.words[H]=y.words[H];if(A.length=P,y.length<=9){y.words[0]=0,y.length=1;return}var q=y.words[9];for(A.words[A.length++]=q&I,H=10;H<y.length;H++){var j=y.words[H]|0;y.words[H-10]=(j&I)<<4|q>>>22,q=j}q>>>=22,y.words[H-10]=q,q===0&&y.length>10?y.length-=10:y.length-=9},O.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var A=0,I=0;I<y.length;I++){var P=y.words[I]|0;A+=P*977,y.words[I]=A&67108863,A=P*64+(A/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function J(){X.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(J,X);function Z(){X.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Z,X);function se(){X.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(se,X),se.prototype.imulK=function(y){for(var A=0,I=0;I<y.length;I++){var P=(y.words[I]|0)*19+A,H=P&67108863;P>>>=26,y.words[I]=H,A=P}return A!==0&&(y.words[y.length++]=A),y},c._prime=function(y){if(Y[y])return Y[y];var A;if(y==="k256")A=new O;else if(y==="p224")A=new J;else if(y==="p192")A=new Z;else if(y==="p25519")A=new se;else throw new Error("Unknown prime "+y);return Y[y]=A,A};function ie(k){if(typeof k=="string"){var y=c._prime(k);this.m=y.p,this.prime=y}else a(k.gtn(1),"modulus must be greater than 1"),this.m=k,this.prime=null}ie.prototype._verify1=function(y){a(y.negative===0,"red works only with positives"),a(y.red,"red works only with red numbers")},ie.prototype._verify2=function(y,A){a((y.negative|A.negative)===0,"red works only with positives"),a(y.red&&y.red===A.red,"red works only with red numbers")},ie.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):(b(y,y.umod(this.m)._forceRed(this)),y)},ie.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},ie.prototype.add=function(y,A){this._verify2(y,A);var I=y.add(A);return I.cmp(this.m)>=0&&I.isub(this.m),I._forceRed(this)},ie.prototype.iadd=function(y,A){this._verify2(y,A);var I=y.iadd(A);return I.cmp(this.m)>=0&&I.isub(this.m),I},ie.prototype.sub=function(y,A){this._verify2(y,A);var I=y.sub(A);return I.cmpn(0)<0&&I.iadd(this.m),I._forceRed(this)},ie.prototype.isub=function(y,A){this._verify2(y,A);var I=y.isub(A);return I.cmpn(0)<0&&I.iadd(this.m),I},ie.prototype.shl=function(y,A){return this._verify1(y),this.imod(y.ushln(A))},ie.prototype.imul=function(y,A){return this._verify2(y,A),this.imod(y.imul(A))},ie.prototype.mul=function(y,A){return this._verify2(y,A),this.imod(y.mul(A))},ie.prototype.isqr=function(y){return this.imul(y,y.clone())},ie.prototype.sqr=function(y){return this.mul(y,y)},ie.prototype.sqrt=function(y){if(y.isZero())return y.clone();var A=this.m.andln(3);if(a(A%2===1),A===3){var I=this.m.add(new c(1)).iushrn(2);return this.pow(y,I)}for(var P=this.m.subn(1),H=0;!P.isZero()&&P.andln(1)===0;)H++,P.iushrn(1);a(!P.isZero());var q=new c(1).toRed(this),j=q.redNeg(),M=this.m.subn(1).iushrn(1),E=this.m.bitLength();for(E=new c(2*E*E).toRed(this);this.pow(E,M).cmp(j)!==0;)E.redIAdd(j);for(var L=this.pow(E,P),le=this.pow(y,P.addn(1).iushrn(1)),Q=this.pow(y,P),ce=H;Q.cmp(q)!==0;){for(var fe=Q,oe=0;fe.cmp(q)!==0;oe++)fe=fe.redSqr();a(oe<ce);var de=this.pow(L,new c(1).iushln(ce-oe-1));le=le.redMul(de),L=de.redSqr(),Q=Q.redMul(L),ce=oe}return le},ie.prototype.invm=function(y){var A=y._invmp(this.m);return A.negative!==0?(A.negative=0,this.imod(A).redNeg()):this.imod(A)},ie.prototype.pow=function(y,A){if(A.isZero())return new c(1).toRed(this);if(A.cmpn(1)===0)return y.clone();var I=4,P=new Array(1<<I);P[0]=new c(1).toRed(this),P[1]=y;for(var H=2;H<P.length;H++)P[H]=this.mul(P[H-1],y);var q=P[0],j=0,M=0,E=A.bitLength()%26;for(E===0&&(E=26),H=A.length-1;H>=0;H--){for(var L=A.words[H],le=E-1;le>=0;le--){var Q=L>>le&1;if(q!==P[0]&&(q=this.sqr(q)),Q===0&&j===0){M=0;continue}j<<=1,j|=Q,M++,!(M!==I&&(H!==0||le!==0))&&(q=this.mul(q,P[j]),M=0,j=0)}E=26}return q},ie.prototype.convertTo=function(y){var A=y.umod(this.m);return A===y?A.clone():A},ie.prototype.convertFrom=function(y){var A=y.clone();return A.red=null,A},c.mont=function(y){return new F(y)};function F(k){ie.call(this,k),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new c(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(F,ie),F.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},F.prototype.convertFrom=function(y){var A=this.imod(y.mul(this.rinv));return A.red=null,A},F.prototype.imul=function(y,A){if(y.isZero()||A.isZero())return y.words[0]=0,y.length=1,y;var I=y.imul(A),P=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=I.isub(P).iushrn(this.shift),q=H;return H.cmp(this.m)>=0?q=H.isub(this.m):H.cmpn(0)<0&&(q=H.iadd(this.m)),q._forceRed(this)},F.prototype.mul=function(y,A){if(y.isZero()||A.isZero())return new c(0)._forceRed(this);var I=y.mul(A),P=I.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),H=I.isub(P).iushrn(this.shift),q=H;return H.cmp(this.m)>=0?q=H.isub(this.m):H.cmpn(0)<0&&(q=H.iadd(this.m)),q._forceRed(this)},F.prototype.invm=function(y){var A=this.imod(y._invmp(this.m).mul(this.r2));return A._forceRed(this)}})(t,commonjsGlobal)})(bn);const BN=bnExports;function createCommonjsModule(t,e,n){return n={path:e,exports:{},require:function(a,o){return commonjsRequire(a,o??n.path)}},t(n,n.exports),n.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert$2;function assert$2(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$2.equal=function t(e,n,a){if(e!=n)throw new Error(a||"Assertion failed: "+e+" != "+n)};var utils_1=createCommonjsModule(function(t,e){var n=e;function a(l,u){if(Array.isArray(l))return l.slice();if(!l)return[];var d=[];if(typeof l!="string"){for(var m=0;m<l.length;m++)d[m]=l[m]|0;return d}if(u==="hex"){l=l.replace(/[^a-z0-9]+/ig,""),l.length%2!==0&&(l="0"+l);for(var m=0;m<l.length;m+=2)d.push(parseInt(l[m]+l[m+1],16))}else for(var m=0;m<l.length;m++){var b=l.charCodeAt(m),x=b>>8,_=b&255;x?d.push(x,_):d.push(_)}return d}n.toArray=a;function o(l){return l.length===1?"0"+l:l}n.zero2=o;function c(l){for(var u="",d=0;d<l.length;d++)u+=o(l[d].toString(16));return u}n.toHex=c,n.encode=function(u,d){return d==="hex"?c(u):u}}),utils_1$1=createCommonjsModule(function(t,e){var n=e;n.assert=minimalisticAssert,n.toArray=utils_1.toArray,n.zero2=utils_1.zero2,n.toHex=utils_1.toHex,n.encode=utils_1.encode;function a(d,m,b){var x=new Array(Math.max(d.bitLength(),b)+1);x.fill(0);for(var _=1<<m+1,w=d.clone(),S=0;S<x.length;S++){var T,B=w.andln(_-1);w.isOdd()?(B>(_>>1)-1?T=(_>>1)-B:T=B,w.isubn(T)):T=0,x[S]=T,w.iushrn(1)}return x}n.getNAF=a;function o(d,m){var b=[[],[]];d=d.clone(),m=m.clone();for(var x=0,_=0,w;d.cmpn(-x)>0||m.cmpn(-_)>0;){var S=d.andln(3)+x&3,T=m.andln(3)+_&3;S===3&&(S=-1),T===3&&(T=-1);var B;S&1?(w=d.andln(7)+x&7,(w===3||w===5)&&T===2?B=-S:B=S):B=0,b[0].push(B);var C;T&1?(w=m.andln(7)+_&7,(w===3||w===5)&&S===2?C=-T:C=T):C=0,b[1].push(C),2*x===B+1&&(x=1-x),2*_===C+1&&(_=1-_),d.iushrn(1),m.iushrn(1)}return b}n.getJSF=o;function c(d,m,b){var x="_"+m;d.prototype[m]=function(){return this[x]!==void 0?this[x]:this[x]=b.call(this)}}n.cachedProperty=c;function l(d){return typeof d=="string"?n.toArray(d,"hex"):d}n.parseBytes=l;function u(d){return new BN(d,"hex","le")}n.intFromLE=u}),getNAF=utils_1$1.getNAF,getJSF=utils_1$1.getJSF,assert$1$1=utils_1$1.assert;function BaseCurve(t,e){this.type=t,this.p=new BN(e.p,16),this.red=e.prime?BN.red(e.prime):BN.mont(this.p),this.zero=new BN(0).toRed(this.red),this.one=new BN(1).toRed(this.red),this.two=new BN(2).toRed(this.red),this.n=e.n&&new BN(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$2=BaseCurve;BaseCurve.prototype.point=function t(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function t(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function t(e,n){assert$1$1(e.precomputed);var a=e._getDoubles(),o=getNAF(n,1,this._bitLength),c=(1<<a.step+1)-(a.step%2===0?2:1);c/=3;var l=[],u,d;for(u=0;u<o.length;u+=a.step){d=0;for(var m=u+a.step-1;m>=u;m--)d=(d<<1)+o[m];l.push(d)}for(var b=this.jpoint(null,null,null),x=this.jpoint(null,null,null),_=c;_>0;_--){for(u=0;u<l.length;u++)d=l[u],d===_?x=x.mixedAdd(a.points[u]):d===-_&&(x=x.mixedAdd(a.points[u].neg()));b=b.add(x)}return b.toP()};BaseCurve.prototype._wnafMul=function t(e,n){var a=4,o=e._getNAFPoints(a);a=o.wnd;for(var c=o.points,l=getNAF(n,a,this._bitLength),u=this.jpoint(null,null,null),d=l.length-1;d>=0;d--){for(var m=0;d>=0&&l[d]===0;d--)m++;if(d>=0&&m++,u=u.dblp(m),d<0)break;var b=l[d];assert$1$1(b!==0),e.type==="affine"?b>0?u=u.mixedAdd(c[b-1>>1]):u=u.mixedAdd(c[-b-1>>1].neg()):b>0?u=u.add(c[b-1>>1]):u=u.add(c[-b-1>>1].neg())}return e.type==="affine"?u.toP():u};BaseCurve.prototype._wnafMulAdd=function t(e,n,a,o,c){var l=this._wnafT1,u=this._wnafT2,d=this._wnafT3,m=0,b,x,_;for(b=0;b<o;b++){_=n[b];var w=_._getNAFPoints(e);l[b]=w.wnd,u[b]=w.points}for(b=o-1;b>=1;b-=2){var S=b-1,T=b;if(l[S]!==1||l[T]!==1){d[S]=getNAF(a[S],l[S],this._bitLength),d[T]=getNAF(a[T],l[T],this._bitLength),m=Math.max(d[S].length,m),m=Math.max(d[T].length,m);continue}var B=[n[S],null,null,n[T]];n[S].y.cmp(n[T].y)===0?(B[1]=n[S].add(n[T]),B[2]=n[S].toJ().mixedAdd(n[T].neg())):n[S].y.cmp(n[T].y.redNeg())===0?(B[1]=n[S].toJ().mixedAdd(n[T]),B[2]=n[S].add(n[T].neg())):(B[1]=n[S].toJ().mixedAdd(n[T]),B[2]=n[S].toJ().mixedAdd(n[T].neg()));var C=[-3,-1,-5,-7,0,7,5,1,3],D=getJSF(a[S],a[T]);for(m=Math.max(D[0].length,m),d[S]=new Array(m),d[T]=new Array(m),x=0;x<m;x++){var z=D[0][x]|0,U=D[1][x]|0;d[S][x]=C[(z+1)*3+(U+1)],d[T][x]=0,u[S]=B}}var Y=this.jpoint(null,null,null),X=this._wnafT4;for(b=m;b>=0;b--){for(var O=0;b>=0;){var J=!0;for(x=0;x<o;x++)X[x]=d[x][b]|0,X[x]!==0&&(J=!1);if(!J)break;O++,b--}if(b>=0&&O++,Y=Y.dblp(O),b<0)break;for(x=0;x<o;x++){var Z=X[x];Z!==0&&(Z>0?_=u[x][Z-1>>1]:Z<0&&(_=u[x][-Z-1>>1].neg()),_.type==="affine"?Y=Y.mixedAdd(_):Y=Y.add(_))}}for(b=0;b<o;b++)u[b]=null;return c?Y:Y.toP()};function BasePoint(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function t(){throw new Error("Not implemented")};BasePoint.prototype.validate=function t(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function t(e,n){e=utils_1$1.toArray(e,n);var a=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*a){e[0]===6?assert$1$1(e[e.length-1]%2===0):e[0]===7&&assert$1$1(e[e.length-1]%2===1);var o=this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));return o}else if((e[0]===2||e[0]===3)&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),e[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function t(e){return this.encode(e,!0)};BasePoint.prototype._encode=function t(e){var n=this.curve.p.byteLength(),a=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",n))};BasePoint.prototype.encode=function t(e,n){return utils_1$1.encode(this._encode(n),e)};BasePoint.prototype.precompute=function t(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};BasePoint.prototype._hasDoubles=function t(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};BasePoint.prototype._getDoubles=function t(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],o=this,c=0;c<n;c+=e){for(var l=0;l<e;l++)o=o.dbl();a.push(o)}return{step:e,points:a}};BasePoint.prototype._getNAFPoints=function t(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],a=(1<<e)-1,o=a===1?null:this.dbl(),c=1;c<a;c++)n[c]=n[c-1].add(o);return{wnd:e,points:n}};BasePoint.prototype._getBeta=function t(){return null};BasePoint.prototype.dblp=function t(e){for(var n=this,a=0;a<e;a++)n=n.dbl();return n};var inherits_browser=createCommonjsModule(function(t){typeof Object.create=="function"?t.exports=function(n,a){a&&(n.super_=a,n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(n,a){if(a){n.super_=a;var o=function(){};o.prototype=a.prototype,n.prototype=new o,n.prototype.constructor=n}}}),assert$2$1=utils_1$1.assert;function ShortCurve(t){base$2.call(this,"short",t),this.a=new BN(t.a,16).toRed(this.red),this.b=new BN(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve,base$2);var short_1=ShortCurve;ShortCurve.prototype._getEndomorphism=function t(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,a;if(e.beta)n=new BN(e.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);n=o[0].cmp(o[1])<0?o[0]:o[1],n=n.toRed(this.red)}if(e.lambda)a=new BN(e.lambda,16);else{var c=this._getEndoRoots(this.n);this.g.mul(c[0]).x.cmp(this.g.x.redMul(n))===0?a=c[0]:(a=c[1],assert$2$1(this.g.mul(a).x.cmp(this.g.x.redMul(n))===0))}var l;return e.basis?l=e.basis.map(function(u){return{a:new BN(u.a,16),b:new BN(u.b,16)}}):l=this._getEndoBasis(a),{beta:n,lambda:a,basis:l}}};ShortCurve.prototype._getEndoRoots=function t(e){var n=e===this.p?this.red:BN.mont(e),a=new BN(2).toRed(n).redInvm(),o=a.redNeg(),c=new BN(3).toRed(n).redNeg().redSqrt().redMul(a),l=o.redAdd(c).fromRed(),u=o.redSub(c).fromRed();return[l,u]};ShortCurve.prototype._getEndoBasis=function t(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),a=e,o=this.n.clone(),c=new BN(1),l=new BN(0),u=new BN(0),d=new BN(1),m,b,x,_,w,S,T,B=0,C,D;a.cmpn(0)!==0;){var z=o.div(a);C=o.sub(z.mul(a)),D=u.sub(z.mul(c));var U=d.sub(z.mul(l));if(!x&&C.cmp(n)<0)m=T.neg(),b=c,x=C.neg(),_=D;else if(x&&++B===2)break;T=C,o=a,a=C,u=c,c=D,d=l,l=U}w=C.neg(),S=D;var Y=x.sqr().add(_.sqr()),X=w.sqr().add(S.sqr());return X.cmp(Y)>=0&&(w=m,S=b),x.negative&&(x=x.neg(),_=_.neg()),w.negative&&(w=w.neg(),S=S.neg()),[{a:x,b:_},{a:w,b:S}]};ShortCurve.prototype._endoSplit=function t(e){var n=this.endo.basis,a=n[0],o=n[1],c=o.b.mul(e).divRound(this.n),l=a.b.neg().mul(e).divRound(this.n),u=c.mul(a.a),d=l.mul(o.a),m=c.mul(a.b),b=l.mul(o.b),x=e.sub(u).sub(d),_=m.add(b).neg();return{k1:x,k2:_}};ShortCurve.prototype.pointFromX=function t(e,n){e=new BN(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var c=o.fromRed().isOdd();return(n&&!c||!n&&c)&&(o=o.redNeg()),this.point(e,o)};ShortCurve.prototype.validate=function t(e){if(e.inf)return!0;var n=e.x,a=e.y,o=this.a.redMul(n),c=n.redSqr().redMul(n).redIAdd(o).redIAdd(this.b);return a.redSqr().redISub(c).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function t(e,n,a){for(var o=this._endoWnafT1,c=this._endoWnafT2,l=0;l<e.length;l++){var u=this._endoSplit(n[l]),d=e[l],m=d._getBeta();u.k1.negative&&(u.k1.ineg(),d=d.neg(!0)),u.k2.negative&&(u.k2.ineg(),m=m.neg(!0)),o[l*2]=d,o[l*2+1]=m,c[l*2]=u.k1,c[l*2+1]=u.k2}for(var b=this._wnafMulAdd(1,o,c,l*2,a),x=0;x<l*2;x++)o[x]=null,c[x]=null;return b};function Point(t,e,n,a){base$2.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN(e,16),this.y=new BN(n,16),a&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point,base$2.BasePoint);ShortCurve.prototype.point=function t(e,n,a){return new Point(this,e,n,a)};ShortCurve.prototype.pointFromJSON=function t(e,n){return Point.fromJSON(this,e,n)};Point.prototype._getBeta=function t(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,o=function(c){return a.point(c.x.redMul(a.endo.beta),c.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(o)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(o)}}}return n}};Point.prototype.toJSON=function t(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point.fromJSON=function t(e,n,a){typeof n=="string"&&(n=JSON.parse(n));var o=e.point(n[0],n[1],a);if(!n[2])return o;function c(u){return e.point(u[0],u[1],a)}var l=n[2];return o.precomputed={beta:null,doubles:l.doubles&&{step:l.doubles.step,points:[o].concat(l.doubles.points.map(c))},naf:l.naf&&{wnd:l.naf.wnd,points:[o].concat(l.naf.points.map(c))}},o};Point.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function t(){return this.inf};Point.prototype.add=function t(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var a=n.redSqr().redISub(this.x).redISub(e.x),o=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point.prototype.dbl=function t(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,a=this.x.redSqr(),o=e.redInvm(),c=a.redAdd(a).redIAdd(a).redIAdd(n).redMul(o),l=c.redSqr().redISub(this.x.redAdd(this.x)),u=c.redMul(this.x.redSub(l)).redISub(this.y);return this.curve.point(l,u)};Point.prototype.getX=function t(){return this.x.fromRed()};Point.prototype.getY=function t(){return this.y.fromRed()};Point.prototype.mul=function t(e){return e=new BN(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point.prototype.mulAdd=function t(e,n,a){var o=[this,n],c=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,c):this.curve._wnafMulAdd(1,o,c,2)};Point.prototype.jmulAdd=function t(e,n,a){var o=[this,n],c=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,c,!0):this.curve._wnafMulAdd(1,o,c,2,!0)};Point.prototype.eq=function t(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point.prototype.neg=function t(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,o=function(c){return c.neg()};n.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(o)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(o)}}}return n};Point.prototype.toJ=function t(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint(t,e,n,a){base$2.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&a===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN(0)):(this.x=new BN(e,16),this.y=new BN(n,16),this.z=new BN(a,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint,base$2.BasePoint);ShortCurve.prototype.jpoint=function t(e,n,a){return new JPoint(this,e,n,a)};JPoint.prototype.toP=function t(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),a=this.x.redMul(n),o=this.y.redMul(n).redMul(e);return this.curve.point(a,o)};JPoint.prototype.neg=function t(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function t(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),a=this.z.redSqr(),o=this.x.redMul(n),c=e.x.redMul(a),l=this.y.redMul(n.redMul(e.z)),u=e.y.redMul(a.redMul(this.z)),d=o.redSub(c),m=l.redSub(u);if(d.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=d.redSqr(),x=b.redMul(d),_=o.redMul(b),w=m.redSqr().redIAdd(x).redISub(_).redISub(_),S=m.redMul(_.redISub(w)).redISub(l.redMul(x)),T=this.z.redMul(e.z).redMul(d);return this.curve.jpoint(w,S,T)};JPoint.prototype.mixedAdd=function t(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),a=this.x,o=e.x.redMul(n),c=this.y,l=e.y.redMul(n).redMul(this.z),u=a.redSub(o),d=c.redSub(l);if(u.cmpn(0)===0)return d.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var m=u.redSqr(),b=m.redMul(u),x=a.redMul(m),_=d.redSqr().redIAdd(b).redISub(x).redISub(x),w=d.redMul(x.redISub(_)).redISub(c.redMul(b)),S=this.z.redMul(u);return this.curve.jpoint(_,w,S)};JPoint.prototype.dblp=function t(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var a=this;for(n=0;n<e;n++)a=a.dbl();return a}var o=this.curve.a,c=this.curve.tinv,l=this.x,u=this.y,d=this.z,m=d.redSqr().redSqr(),b=u.redAdd(u);for(n=0;n<e;n++){var x=l.redSqr(),_=b.redSqr(),w=_.redSqr(),S=x.redAdd(x).redIAdd(x).redIAdd(o.redMul(m)),T=l.redMul(_),B=S.redSqr().redISub(T.redAdd(T)),C=T.redISub(B),D=S.redMul(C);D=D.redIAdd(D).redISub(w);var z=b.redMul(d);n+1<e&&(m=m.redMul(w)),l=B,d=z,b=D}return this.curve.jpoint(l,b.redMul(c),d)};JPoint.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function t(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),c=this.y.redSqr(),l=c.redSqr(),u=this.x.redAdd(c).redSqr().redISub(o).redISub(l);u=u.redIAdd(u);var d=o.redAdd(o).redIAdd(o),m=d.redSqr().redISub(u).redISub(u),b=l.redIAdd(l);b=b.redIAdd(b),b=b.redIAdd(b),e=m,n=d.redMul(u.redISub(m)).redISub(b),a=this.y.redAdd(this.y)}else{var x=this.x.redSqr(),_=this.y.redSqr(),w=_.redSqr(),S=this.x.redAdd(_).redSqr().redISub(x).redISub(w);S=S.redIAdd(S);var T=x.redAdd(x).redIAdd(x),B=T.redSqr(),C=w.redIAdd(w);C=C.redIAdd(C),C=C.redIAdd(C),e=B.redISub(S).redISub(S),n=T.redMul(S.redISub(e)).redISub(C),a=this.y.redMul(this.z),a=a.redIAdd(a)}return this.curve.jpoint(e,n,a)};JPoint.prototype._threeDbl=function t(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),c=this.y.redSqr(),l=c.redSqr(),u=this.x.redAdd(c).redSqr().redISub(o).redISub(l);u=u.redIAdd(u);var d=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),m=d.redSqr().redISub(u).redISub(u);e=m;var b=l.redIAdd(l);b=b.redIAdd(b),b=b.redIAdd(b),n=d.redMul(u.redISub(m)).redISub(b),a=this.y.redAdd(this.y)}else{var x=this.z.redSqr(),_=this.y.redSqr(),w=this.x.redMul(_),S=this.x.redSub(x).redMul(this.x.redAdd(x));S=S.redAdd(S).redIAdd(S);var T=w.redIAdd(w);T=T.redIAdd(T);var B=T.redAdd(T);e=S.redSqr().redISub(B),a=this.y.redAdd(this.z).redSqr().redISub(_).redISub(x);var C=_.redSqr();C=C.redIAdd(C),C=C.redIAdd(C),C=C.redIAdd(C),n=S.redMul(T.redISub(e)).redISub(C)}return this.curve.jpoint(e,n,a)};JPoint.prototype._dbl=function t(){var e=this.curve.a,n=this.x,a=this.y,o=this.z,c=o.redSqr().redSqr(),l=n.redSqr(),u=a.redSqr(),d=l.redAdd(l).redIAdd(l).redIAdd(e.redMul(c)),m=n.redAdd(n);m=m.redIAdd(m);var b=m.redMul(u),x=d.redSqr().redISub(b.redAdd(b)),_=b.redISub(x),w=u.redSqr();w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var S=d.redMul(_).redISub(w),T=a.redAdd(a).redMul(o);return this.curve.jpoint(x,S,T)};JPoint.prototype.trpl=function t(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr(),o=n.redSqr(),c=e.redAdd(e).redIAdd(e),l=c.redSqr(),u=this.x.redAdd(n).redSqr().redISub(e).redISub(o);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(l);var d=u.redSqr(),m=o.redIAdd(o);m=m.redIAdd(m),m=m.redIAdd(m),m=m.redIAdd(m);var b=c.redIAdd(u).redSqr().redISub(l).redISub(d).redISub(m),x=n.redMul(b);x=x.redIAdd(x),x=x.redIAdd(x);var _=this.x.redMul(d).redISub(x);_=_.redIAdd(_),_=_.redIAdd(_);var w=this.y.redMul(b.redMul(m.redISub(b)).redISub(u.redMul(d)));w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var S=this.z.redAdd(u).redSqr().redISub(a).redISub(d);return this.curve.jpoint(_,w,S)};JPoint.prototype.mul=function t(e,n){return e=new BN(e,n),this.curve._wnafMul(this,e)};JPoint.prototype.eq=function t(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),a=e.z.redSqr();if(this.x.redMul(a).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var o=n.redMul(this.z),c=a.redMul(e.z);return this.y.redMul(c).redISub(e.y.redMul(o)).cmpn(0)===0};JPoint.prototype.eqXToP=function t(e){var n=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(a)===0)return!0;for(var o=e.clone(),c=this.curve.redN.redMul(n);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(c),this.x.cmp(a)===0)return!0}};JPoint.prototype.inspect=function t(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule(function(t,e){var n=e;n.base=base$2,n.short=short_1,n.mont=null,n.edwards=null}),curves_1=createCommonjsModule(function(t,e){var n=e,a=utils_1$1.assert;function o(u){u.type==="short"?this.curve=new curve_1.short(u):u.type==="edwards"?this.curve=new curve_1.edwards(u):this.curve=new curve_1.mont(u),this.g=this.curve.g,this.n=this.curve.n,this.hash=u.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=o;function c(u,d){Object.defineProperty(n,u,{configurable:!0,enumerable:!0,get:function(){var m=new o(d);return Object.defineProperty(n,u,{configurable:!0,enumerable:!0,value:m}),m}})}c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$3.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$3.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$3.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$3.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$3.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var l;try{l=null.crash()}catch{l=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$3.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",l]})});function HmacDRBG(t){if(!(this instanceof HmacDRBG))return new HmacDRBG(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils_1.toArray(t.entropy,t.entropyEnc||"hex"),n=utils_1.toArray(t.nonce,t.nonceEnc||"hex"),a=utils_1.toArray(t.pers,t.persEnc||"hex");minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,a)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function t(e,n,a){var o=e.concat(n).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var c=0;c<this.V.length;c++)this.K[c]=0,this.V[c]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function t(){return new hash$3.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function t(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG.prototype.reseed=function t(e,n,a,o){typeof n!="string"&&(o=a,a=n,n=null),e=utils_1.toArray(e,n),a=utils_1.toArray(a,o),minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(a||[])),this._reseed=1};HmacDRBG.prototype.generate=function t(e,n,a,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(o=a,a=n,n=null),a&&(a=utils_1.toArray(a,o||"hex"),this._update(a));for(var c=[];c.length<e;)this.V=this._hmac().update(this.V).digest(),c=c.concat(this.V);var l=c.slice(0,e);return this._update(a),this._reseed++,utils_1.encode(l,n)};var assert$3=utils_1$1.assert;function KeyPair(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function t(e,n,a){return n instanceof KeyPair?n:new KeyPair(e,{pub:n,pubEnc:a})};KeyPair.fromPrivate=function t(e,n,a){return n instanceof KeyPair?n:new KeyPair(e,{priv:n,privEnc:a})};KeyPair.prototype.validate=function t(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair.prototype.getPublic=function t(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};KeyPair.prototype.getPrivate=function t(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair.prototype._importPrivate=function t(e,n){this.priv=new BN(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair.prototype._importPublic=function t(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?assert$3(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};KeyPair.prototype.derive=function t(e){return e.validate()||assert$3(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair.prototype.sign=function t(e,n,a){return this.ec.sign(e,this,n,a)};KeyPair.prototype.verify=function t(e,n){return this.ec.verify(e,n,this)};KeyPair.prototype.inspect=function t(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4=utils_1$1.assert;function Signature(t,e){if(t instanceof Signature)return t;this._importDER(t,e)||(assert$4(t.r&&t.s,"Signature without r or s"),this.r=new BN(t.r,16),this.s=new BN(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature=Signature;function Position(){this.place=0}function getLength(t,e){var n=t[e.place++];if(!(n&128))return n;var a=n&15;if(a===0||a>4)return!1;for(var o=0,c=0,l=e.place;c<a;c++,l++)o<<=8,o|=t[l],o>>>=0;return o<=127?!1:(e.place=l,o)}function rmPadding(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}Signature.prototype._importDER=function t(e,n){e=utils_1$1.toArray(e,n);var a=new Position;if(e[a.place++]!==48)return!1;var o=getLength(e,a);if(o===!1||o+a.place!==e.length||e[a.place++]!==2)return!1;var c=getLength(e,a);if(c===!1)return!1;var l=e.slice(a.place,c+a.place);if(a.place+=c,e[a.place++]!==2)return!1;var u=getLength(e,a);if(u===!1||e.length!==u+a.place)return!1;var d=e.slice(a.place,u+a.place);if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;if(d[0]===0)if(d[1]&128)d=d.slice(1);else return!1;return this.r=new BN(l),this.s=new BN(d),this.recoveryParam=null,!0};function constructLength(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}Signature.prototype.toDER=function t(e){var n=this.r.toArray(),a=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),a[0]&128&&(a=[0].concat(a)),n=rmPadding(n),a=rmPadding(a);!a[0]&&!(a[1]&128);)a=a.slice(1);var o=[2];constructLength(o,n.length),o=o.concat(n),o.push(2),constructLength(o,a.length);var c=o.concat(a),l=[48];return constructLength(l,c.length),l=l.concat(c),utils_1$1.encode(l,e)};var rand=function(){throw new Error("unsupported")},assert$5=utils_1$1.assert;function EC(t){if(!(this instanceof EC))return new EC(t);typeof t=="string"&&(assert$5(Object.prototype.hasOwnProperty.call(curves_1,t),"Unknown curve "+t),t=curves_1[t]),t instanceof curves_1.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ec=EC;EC.prototype.keyPair=function t(e){return new key(this,e)};EC.prototype.keyFromPrivate=function t(e,n){return key.fromPrivate(this,e,n)};EC.prototype.keyFromPublic=function t(e,n){return key.fromPublic(this,e,n)};EC.prototype.genKeyPair=function t(e){e||(e={});for(var n=new hmacDrbg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),a=this.n.byteLength(),o=this.n.sub(new BN(2));;){var c=new BN(n.generate(a));if(!(c.cmp(o)>0))return c.iaddn(1),this.keyFromPrivate(c)}};EC.prototype._truncateToN=function t(e,n){var a=e.byteLength()*8-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!n&&e.cmp(this.n)>=0?e.sub(this.n):e};EC.prototype.sign=function t(e,n,a,o){typeof a=="object"&&(o=a,a=null),o||(o={}),n=this.keyFromPrivate(n,a),e=this._truncateToN(new BN(e,16));for(var c=this.n.byteLength(),l=n.getPrivate().toArray("be",c),u=e.toArray("be",c),d=new hmacDrbg({hash:this.hash,entropy:l,nonce:u,pers:o.pers,persEnc:o.persEnc||"utf8"}),m=this.n.sub(new BN(1)),b=0;;b++){var x=o.k?o.k(b):new BN(d.generate(this.n.byteLength()));if(x=this._truncateToN(x,!0),!(x.cmpn(1)<=0||x.cmp(m)>=0)){var _=this.g.mul(x);if(!_.isInfinity()){var w=_.getX(),S=w.umod(this.n);if(S.cmpn(0)!==0){var T=x.invm(this.n).mul(S.mul(n.getPrivate()).iadd(e));if(T=T.umod(this.n),T.cmpn(0)!==0){var B=(_.getY().isOdd()?1:0)|(w.cmp(S)!==0?2:0);return o.canonical&&T.cmp(this.nh)>0&&(T=this.n.sub(T),B^=1),new signature({r:S,s:T,recoveryParam:B})}}}}}};EC.prototype.verify=function t(e,n,a,o){e=this._truncateToN(new BN(e,16)),a=this.keyFromPublic(a,o),n=new signature(n,"hex");var c=n.r,l=n.s;if(c.cmpn(1)<0||c.cmp(this.n)>=0||l.cmpn(1)<0||l.cmp(this.n)>=0)return!1;var u=l.invm(this.n),d=u.mul(e).umod(this.n),m=u.mul(c).umod(this.n),b;return this.curve._maxwellTrick?(b=this.g.jmulAdd(d,a.getPublic(),m),b.isInfinity()?!1:b.eqXToP(c)):(b=this.g.mulAdd(d,a.getPublic(),m),b.isInfinity()?!1:b.getX().umod(this.n).cmp(c)===0)};EC.prototype.recoverPubKey=function(t,e,n,a){assert$5((3&n)===n,"The recovery param is more than two bits"),e=new signature(e,a);var o=this.n,c=new BN(t),l=e.r,u=e.s,d=n&1,m=n>>1;if(l.cmp(this.curve.p.umod(this.curve.n))>=0&&m)throw new Error("Unable to find sencond key candinate");m?l=this.curve.pointFromX(l.add(this.curve.n),d):l=this.curve.pointFromX(l,d);var b=e.r.invm(o),x=o.sub(c).mul(b).umod(o),_=u.mul(b).umod(o);return this.g.mulAdd(x,l,_)};EC.prototype.getKeyRecoveryParam=function(t,e,n,a){if(e=new signature(e,a),e.recoveryParam!==null)return e.recoveryParam;for(var o=0;o<4;o++){var c;try{c=this.recoverPubKey(t,e,o)}catch{continue}if(c.eq(n))return o}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule(function(t,e){var n=e;n.version="6.5.4",n.utils=utils_1$1,n.rand=function(){throw new Error("unsupported")},n.curve=curve_1,n.curves=curves_1,n.ec=ec,n.eddsa=null}),EC$1=elliptic_1.ec;const version$7="signing-key/5.7.0",logger$b=new Logger(version$7);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1("secp256k1")),_curve}class SigningKey{constructor(e){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify(e)),hexDataLength(this.privateKey)!==32&&logger$b.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const n=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+n.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+n.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(e){const n=getCurve().keyFromPublic(arrayify(this.publicKey)),a=getCurve().keyFromPublic(arrayify(e));return"0x"+n.pub.add(a.pub).encodeCompressed("hex")}signDigest(e){const n=getCurve().keyFromPrivate(arrayify(this.privateKey)),a=arrayify(e);a.length!==32&&logger$b.throwArgumentError("bad digest length","digest",e);const o=n.sign(a,{canonical:!0});return splitSignature({recoveryParam:o.recoveryParam,r:hexZeroPad("0x"+o.r.toString(16),32),s:hexZeroPad("0x"+o.s.toString(16),32)})}computeSharedSecret(e){const n=getCurve().keyFromPrivate(arrayify(this.privateKey)),a=getCurve().keyFromPublic(arrayify(computePublicKey(e)));return hexZeroPad("0x"+n.derive(a.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function recoverPublicKey(t,e){const n=splitSignature(e),a={r:arrayify(n.r),s:arrayify(n.s)};return"0x"+getCurve().recoverPubKey(arrayify(t),a,n.recoveryParam).encode("hex",!1)}function computePublicKey(t,e){const n=arrayify(t);if(n.length===32){const a=new SigningKey(n);return e?"0x"+getCurve().keyFromPrivate(n).getPublic(!0,"hex"):a.publicKey}else{if(n.length===33)return e?hexlify(n):"0x"+getCurve().keyFromPublic(n).getPublic(!1,"hex");if(n.length===65)return e?"0x"+getCurve().keyFromPublic(n).getPublic(!0,"hex"):hexlify(n)}return logger$b.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version$6="transactions/5.7.0",logger$a=new Logger(version$6);var TransactionTypes;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress(t){const e=computePublicKey(t);return getAddress(hexDataSlice(keccak256(hexDataSlice(e,1)),12))}function recoverAddress(t,e){return computeAddress(recoverPublicKey(arrayify(t),e))}function formatNumber(t,e){const n=stripZeros(BigNumber.from(t).toHexString());return n.length>32&&logger$a.throwArgumentError("invalid length for "+e,"transaction:"+e,t),n}function accessSetify(t,e){return{address:getAddress(t),storageKeys:(e||[]).map((n,a)=>(hexDataLength(n)!==32&&logger$a.throwArgumentError("invalid access list storageKey",`accessList[${t}:${a}]`,n),n.toLowerCase()))}}function accessListify(t){if(Array.isArray(t))return t.map((n,a)=>Array.isArray(n)?(n.length>2&&logger$a.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${a}]`,n),accessSetify(n[0],n[1])):accessSetify(n.address,n.storageKeys));const e=Object.keys(t).map(n=>{const a=t[n].reduce((o,c)=>(o[c]=!0,o),{});return accessSetify(n,Object.keys(a).sort())});return e.sort((n,a)=>n.address.localeCompare(a.address)),e}function formatAccessList(t){return accessListify(t).map(e=>[e.address,e.storageKeys])}function _serializeEip1559(t,e){if(t.gasPrice!=null){const a=BigNumber.from(t.gasPrice),o=BigNumber.from(t.maxFeePerGas||0);a.eq(o)||logger$a.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:a,maxFeePerGas:o})}const n=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(t.maxFeePerGas||0,"maxFeePerGas"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const a=splitSignature(e);n.push(formatNumber(a.recoveryParam,"recoveryParam")),n.push(stripZeros(a.r)),n.push(stripZeros(a.s))}return hexConcat(["0x02",encode$b(n)])}function _serializeEip2930(t,e){const n=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.gasPrice||0,"gasPrice"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const a=splitSignature(e);n.push(formatNumber(a.recoveryParam,"recoveryParam")),n.push(stripZeros(a.r)),n.push(stripZeros(a.s))}return hexConcat(["0x01",encode$b(n)])}function _serialize(t,e){checkProperties(t,allowedTransactionKeys);const n=[];transactionFields.forEach(function(l){let u=t[l.name]||[];const d={};l.numeric&&(d.hexPad="left"),u=arrayify(hexlify(u,d)),l.length&&u.length!==l.length&&u.length>0&&logger$a.throwArgumentError("invalid length for "+l.name,"transaction:"+l.name,u),l.maxLength&&(u=stripZeros(u),u.length>l.maxLength&&logger$a.throwArgumentError("invalid length for "+l.name,"transaction:"+l.name,u)),n.push(hexlify(u))});let a=0;if(t.chainId!=null?(a=t.chainId,typeof a!="number"&&logger$a.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!isBytesLike(e)&&e.v>28&&(a=Math.floor((e.v-35)/2)),a!==0&&(n.push(hexlify(a)),n.push("0x"),n.push("0x")),!e)return encode$b(n);const o=splitSignature(e);let c=27+o.recoveryParam;return a!==0?(n.pop(),n.pop(),n.pop(),c+=a*2+8,o.v>28&&o.v!==c&&logger$a.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):o.v!==c&&logger$a.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),n.push(hexlify(c)),n.push(stripZeros(arrayify(o.r))),n.push(stripZeros(arrayify(o.s))),encode$b(n)}function serialize(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&logger$a.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),_serialize(t,e);switch(t.type){case 1:return _serializeEip2930(t,e);case 2:return _serializeEip1559(t,e)}return logger$a.throwError(`unsupported transaction type: ${t.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}const version$5="wordlists/5.7.0",logger$9=new Logger(version$5);class Wordlist{constructor(e){logger$9.checkAbstract(new.target,Wordlist),defineReadOnly(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const n=[];for(let a=0;a<2048;a++){const o=e.getWord(a);if(a!==e.getWordIndex(o))return"0x";n.push(o)}return id(n.join(`
`)+`
`)}static register(e,n){n||(n=e.locale)}}const words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist=null;function loadWords(t){if(wordlist==null&&(wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wordlist.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw wordlist=null,new Error("BIP39 Wordlist for en (English) FAILED")}class LangEn extends Wordlist{constructor(){super("en")}getWord(e){return loadWords(this),wordlist[e]}getWordIndex(e){return loadWords(this),wordlist.indexOf(e)}}const langEn=new LangEn;Wordlist.register(langEn);const wordlists={en:langEn},version$4="hdnode/5.7.0",logger$8=new Logger(version$4),N=BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MasterSecret=toUtf8Bytes("Bitcoin seed"),HardenedBit=2147483648;function getUpperMask(t){return(1<<t)-1<<8-t}function getLowerMask(t){return(1<<t)-1}function bytes32(t){return hexZeroPad(hexlify(t),32)}function base58check(t){return Base58.encode(concat([t,hexDataSlice(sha256(sha256(t)),0,4)]))}function getWordlist(t){if(t==null)return wordlists.en;if(typeof t=="string"){const e=wordlists[t];return e==null&&logger$8.throwArgumentError("unknown locale","wordlist",t),e}return t}const _constructorGuard={},defaultPath="m/44'/60'/0'/0/0";class HDNode{constructor(e,n,a,o,c,l,u,d){if(e!==_constructorGuard)throw new Error("HDNode constructor cannot be called directly");if(n){const m=new SigningKey(n);defineReadOnly(this,"privateKey",m.privateKey),defineReadOnly(this,"publicKey",m.compressedPublicKey)}else defineReadOnly(this,"privateKey",null),defineReadOnly(this,"publicKey",hexlify(a));defineReadOnly(this,"parentFingerprint",o),defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160(sha256(this.publicKey)),0,4)),defineReadOnly(this,"address",computeAddress(this.publicKey)),defineReadOnly(this,"chainCode",c),defineReadOnly(this,"index",l),defineReadOnly(this,"depth",u),d==null?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",null)):typeof d=="string"?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",d)):(defineReadOnly(this,"mnemonic",d),defineReadOnly(this,"path",d.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return base58check(concat([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify(this.depth),this.parentFingerprint,hexZeroPad(hexlify(this.index),4),this.chainCode,this.privateKey!=null?concat(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let n=this.path;n&&(n+="/"+(e&~HardenedBit));const a=new Uint8Array(37);if(e&HardenedBit){if(!this.privateKey)throw new Error("cannot derive child of neutered node");a.set(arrayify(this.privateKey),1),n&&(n+="'")}else a.set(arrayify(this.publicKey));for(let x=24;x>=0;x-=8)a[33+(x>>3)]=e>>24-x&255;const o=arrayify(computeHmac(SupportedAlgorithm.sha512,this.chainCode,a)),c=o.slice(0,32),l=o.slice(32);let u=null,d=null;this.privateKey?u=bytes32(BigNumber.from(c).add(this.privateKey).mod(N)):d=new SigningKey(hexlify(c))._addPoint(this.publicKey);let m=n;const b=this.mnemonic;return b&&(m=Object.freeze({phrase:b.phrase,path:n,locale:b.locale||"en"})),new HDNode(_constructorGuard,u,d,this.fingerprint,bytes32(l),e,this.depth+1,m)}derivePath(e){const n=e.split("/");if(n.length===0||n[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);n[0]==="m"&&n.shift();let a=this;for(let o=0;o<n.length;o++){const c=n[o];if(c.match(/^[0-9]+'$/)){const l=parseInt(c.substring(0,c.length-1));if(l>=HardenedBit)throw new Error("invalid path index - "+c);a=a._derive(HardenedBit+l)}else if(c.match(/^[0-9]+$/)){const l=parseInt(c);if(l>=HardenedBit)throw new Error("invalid path index - "+c);a=a._derive(l)}else throw new Error("invalid path component - "+c)}return a}static _fromSeed(e,n){const a=arrayify(e);if(a.length<16||a.length>64)throw new Error("invalid seed");const o=arrayify(computeHmac(SupportedAlgorithm.sha512,MasterSecret,a));return new HDNode(_constructorGuard,bytes32(o.slice(0,32)),null,"0x00000000",bytes32(o.slice(32)),0,0,n)}static fromMnemonic(e,n,a){return a=getWordlist(a),e=entropyToMnemonic(mnemonicToEntropy(e,a),a),HDNode._fromSeed(mnemonicToSeed(e,n),{phrase:e,path:"m",locale:a.locale})}static fromSeed(e){return HDNode._fromSeed(e,null)}static fromExtendedKey(e){const n=Base58.decode(e);(n.length!==82||base58check(n.slice(0,78))!==e)&&logger$8.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const a=n[4],o=hexlify(n.slice(5,9)),c=parseInt(hexlify(n.slice(9,13)).substring(2),16),l=hexlify(n.slice(13,45)),u=n.slice(45,78);switch(hexlify(n.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard,null,hexlify(u),o,l,c,a,null);case"0x0488ade4":case"0x04358394 ":if(u[0]!==0)break;return new HDNode(_constructorGuard,hexlify(u.slice(1)),null,o,l,c,a,null)}return logger$8.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed(t,e){e||(e="");const n=toUtf8Bytes("mnemonic"+e,UnicodeNormalizationForm.NFKD);return pbkdf2$1(toUtf8Bytes(t,UnicodeNormalizationForm.NFKD),n,2048,64,"sha512")}function mnemonicToEntropy(t,e){e=getWordlist(e),logger$8.checkNormalize();const n=e.split(t);if(n.length%3!==0)throw new Error("invalid mnemonic");const a=arrayify(new Uint8Array(Math.ceil(11*n.length/8)));let o=0;for(let m=0;m<n.length;m++){let b=e.getWordIndex(n[m].normalize("NFKD"));if(b===-1)throw new Error("invalid mnemonic");for(let x=0;x<11;x++)b&1<<10-x&&(a[o>>3]|=1<<7-o%8),o++}const c=32*n.length/3,l=n.length/3,u=getUpperMask(l);if((arrayify(sha256(a.slice(0,c/8)))[0]&u)!==(a[a.length-1]&u))throw new Error("invalid checksum");return hexlify(a.slice(0,c/8))}function entropyToMnemonic(t,e){if(e=getWordlist(e),t=arrayify(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const n=[0];let a=11;for(let l=0;l<t.length;l++)a>8?(n[n.length-1]<<=8,n[n.length-1]|=t[l],a-=8):(n[n.length-1]<<=a,n[n.length-1]|=t[l]>>8-a,n.push(t[l]&getLowerMask(8-a)),a+=3);const o=t.length/4,c=arrayify(sha256(t))[0]&getUpperMask(o);return n[n.length-1]<<=o,n[n.length-1]|=c>>8-o,e.join(n.map(l=>e.getWord(l)))}const version$3="random/5.7.0",logger$7=new Logger(version$3);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")}const anyGlobal=getGlobal();let crypto$1=anyGlobal.crypto||anyGlobal.msCrypto;(!crypto$1||!crypto$1.getRandomValues)&&(logger$7.warn("WARNING: Missing strong random number source"),crypto$1={getRandomValues:function(t){return logger$7.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function randomBytes(t){(t<=0||t>1024||t%1||t!=t)&&logger$7.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return crypto$1.getRandomValues(e),arrayify(e)}var aesJsExports={},aesJs={get exports(){return aesJsExports},set exports(t){aesJsExports=t}};(function(t,e){(function(n){function a(M){return parseInt(M)===M}function o(M){if(!a(M.length))return!1;for(var E=0;E<M.length;E++)if(!a(M[E])||M[E]<0||M[E]>255)return!1;return!0}function c(M,E){if(M.buffer&&ArrayBuffer.isView(M)&&M.name==="Uint8Array")return E&&(M.slice?M=M.slice():M=Array.prototype.slice.call(M)),M;if(Array.isArray(M)){if(!o(M))throw new Error("Array contains invalid value: "+M);return new Uint8Array(M)}if(a(M.length)&&o(M))return new Uint8Array(M);throw new Error("unsupported array-like object")}function l(M){return new Uint8Array(M)}function u(M,E,L,le,Q){(le!=null||Q!=null)&&(M.slice?M=M.slice(le,Q):M=Array.prototype.slice.call(M,le,Q)),E.set(M,L)}var d=function(){function M(L){var le=[],Q=0;for(L=encodeURI(L);Q<L.length;){var ce=L.charCodeAt(Q++);ce===37?(le.push(parseInt(L.substr(Q,2),16)),Q+=2):le.push(ce)}return c(le)}function E(L){for(var le=[],Q=0;Q<L.length;){var ce=L[Q];ce<128?(le.push(String.fromCharCode(ce)),Q++):ce>191&&ce<224?(le.push(String.fromCharCode((ce&31)<<6|L[Q+1]&63)),Q+=2):(le.push(String.fromCharCode((ce&15)<<12|(L[Q+1]&63)<<6|L[Q+2]&63)),Q+=3)}return le.join("")}return{toBytes:M,fromBytes:E}}(),m=function(){function M(le){for(var Q=[],ce=0;ce<le.length;ce+=2)Q.push(parseInt(le.substr(ce,2),16));return Q}var E="0123456789abcdef";function L(le){for(var Q=[],ce=0;ce<le.length;ce++){var fe=le[ce];Q.push(E[(fe&240)>>4]+E[fe&15])}return Q.join("")}return{toBytes:M,fromBytes:L}}(),b={16:10,24:12,32:14},x=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],_=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],w=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],S=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],T=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],B=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],C=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],D=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],z=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],U=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],Y=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],X=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],O=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],J=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Z=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function se(M){for(var E=[],L=0;L<M.length;L+=4)E.push(M[L]<<24|M[L+1]<<16|M[L+2]<<8|M[L+3]);return E}var ie=function(M){if(!(this instanceof ie))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:c(M,!0)}),this._prepare()};ie.prototype._prepare=function(){var M=b[this.key.length];if(M==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var E=0;E<=M;E++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var L=(M+1)*4,le=this.key.length/4,Q=se(this.key),ce,E=0;E<le;E++)ce=E>>2,this._Ke[ce][E%4]=Q[E],this._Kd[M-ce][E%4]=Q[E];for(var fe=0,oe=le,de;oe<L;){if(de=Q[le-1],Q[0]^=_[de>>16&255]<<24^_[de>>8&255]<<16^_[de&255]<<8^_[de>>24&255]^x[fe]<<24,fe+=1,le!=8)for(var E=1;E<le;E++)Q[E]^=Q[E-1];else{for(var E=1;E<le/2;E++)Q[E]^=Q[E-1];de=Q[le/2-1],Q[le/2]^=_[de&255]^_[de>>8&255]<<8^_[de>>16&255]<<16^_[de>>24&255]<<24;for(var E=le/2+1;E<le;E++)Q[E]^=Q[E-1]}for(var E=0,ae,he;E<le&&oe<L;)ae=oe>>2,he=oe%4,this._Ke[ae][he]=Q[E],this._Kd[M-ae][he]=Q[E++],oe++}for(var ae=1;ae<M;ae++)for(var he=0;he<4;he++)de=this._Kd[ae][he],this._Kd[ae][he]=X[de>>24&255]^O[de>>16&255]^J[de>>8&255]^Z[de&255]},ie.prototype.encrypt=function(M){if(M.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var E=this._Ke.length-1,L=[0,0,0,0],le=se(M),Q=0;Q<4;Q++)le[Q]^=this._Ke[0][Q];for(var ce=1;ce<E;ce++){for(var Q=0;Q<4;Q++)L[Q]=S[le[Q]>>24&255]^T[le[(Q+1)%4]>>16&255]^B[le[(Q+2)%4]>>8&255]^C[le[(Q+3)%4]&255]^this._Ke[ce][Q];le=L.slice()}for(var fe=l(16),oe,Q=0;Q<4;Q++)oe=this._Ke[E][Q],fe[4*Q]=(_[le[Q]>>24&255]^oe>>24)&255,fe[4*Q+1]=(_[le[(Q+1)%4]>>16&255]^oe>>16)&255,fe[4*Q+2]=(_[le[(Q+2)%4]>>8&255]^oe>>8)&255,fe[4*Q+3]=(_[le[(Q+3)%4]&255]^oe)&255;return fe},ie.prototype.decrypt=function(M){if(M.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var E=this._Kd.length-1,L=[0,0,0,0],le=se(M),Q=0;Q<4;Q++)le[Q]^=this._Kd[0][Q];for(var ce=1;ce<E;ce++){for(var Q=0;Q<4;Q++)L[Q]=D[le[Q]>>24&255]^z[le[(Q+3)%4]>>16&255]^U[le[(Q+2)%4]>>8&255]^Y[le[(Q+1)%4]&255]^this._Kd[ce][Q];le=L.slice()}for(var fe=l(16),oe,Q=0;Q<4;Q++)oe=this._Kd[E][Q],fe[4*Q]=(w[le[Q]>>24&255]^oe>>24)&255,fe[4*Q+1]=(w[le[(Q+3)%4]>>16&255]^oe>>16)&255,fe[4*Q+2]=(w[le[(Q+2)%4]>>8&255]^oe>>8)&255,fe[4*Q+3]=(w[le[(Q+1)%4]&255]^oe)&255;return fe};var F=function(M){if(!(this instanceof F))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ie(M)};F.prototype.encrypt=function(M){if(M=c(M),M.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var E=l(M.length),L=l(16),le=0;le<M.length;le+=16)u(M,L,0,le,le+16),L=this._aes.encrypt(L),u(L,E,le);return E},F.prototype.decrypt=function(M){if(M=c(M),M.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var E=l(M.length),L=l(16),le=0;le<M.length;le+=16)u(M,L,0,le,le+16),L=this._aes.decrypt(L),u(L,E,le);return E};var k=function(M,E){if(!(this instanceof k))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!E)E=l(16);else if(E.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=c(E,!0),this._aes=new ie(M)};k.prototype.encrypt=function(M){if(M=c(M),M.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var E=l(M.length),L=l(16),le=0;le<M.length;le+=16){u(M,L,0,le,le+16);for(var Q=0;Q<16;Q++)L[Q]^=this._lastCipherblock[Q];this._lastCipherblock=this._aes.encrypt(L),u(this._lastCipherblock,E,le)}return E},k.prototype.decrypt=function(M){if(M=c(M),M.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var E=l(M.length),L=l(16),le=0;le<M.length;le+=16){u(M,L,0,le,le+16),L=this._aes.decrypt(L);for(var Q=0;Q<16;Q++)E[le+Q]=L[Q]^this._lastCipherblock[Q];u(M,this._lastCipherblock,0,le,le+16)}return E};var y=function(M,E,L){if(!(this instanceof y))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!E)E=l(16);else if(E.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");L||(L=1),this.segmentSize=L,this._shiftRegister=c(E,!0),this._aes=new ie(M)};y.prototype.encrypt=function(M){if(M.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var E=c(M,!0),L,le=0;le<E.length;le+=this.segmentSize){L=this._aes.encrypt(this._shiftRegister);for(var Q=0;Q<this.segmentSize;Q++)E[le+Q]^=L[Q];u(this._shiftRegister,this._shiftRegister,0,this.segmentSize),u(E,this._shiftRegister,16-this.segmentSize,le,le+this.segmentSize)}return E},y.prototype.decrypt=function(M){if(M.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var E=c(M,!0),L,le=0;le<E.length;le+=this.segmentSize){L=this._aes.encrypt(this._shiftRegister);for(var Q=0;Q<this.segmentSize;Q++)E[le+Q]^=L[Q];u(this._shiftRegister,this._shiftRegister,0,this.segmentSize),u(M,this._shiftRegister,16-this.segmentSize,le,le+this.segmentSize)}return E};var A=function(M,E){if(!(this instanceof A))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!E)E=l(16);else if(E.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=c(E,!0),this._lastPrecipherIndex=16,this._aes=new ie(M)};A.prototype.encrypt=function(M){for(var E=c(M,!0),L=0;L<E.length;L++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),E[L]^=this._lastPrecipher[this._lastPrecipherIndex++];return E},A.prototype.decrypt=A.prototype.encrypt;var I=function(M){if(!(this instanceof I))throw Error("Counter must be instanitated with `new`");M!==0&&!M&&(M=1),typeof M=="number"?(this._counter=l(16),this.setValue(M)):this.setBytes(M)};I.prototype.setValue=function(M){if(typeof M!="number"||parseInt(M)!=M)throw new Error("invalid counter value (must be an integer)");for(var E=15;E>=0;--E)this._counter[E]=M%256,M=M>>8},I.prototype.setBytes=function(M){if(M=c(M,!0),M.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=M},I.prototype.increment=function(){for(var M=15;M>=0;M--)if(this._counter[M]===255)this._counter[M]=0;else{this._counter[M]++;break}};var P=function(M,E){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",E instanceof I||(E=new I(E)),this._counter=E,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ie(M)};P.prototype.encrypt=function(M){for(var E=c(M,!0),L=0;L<E.length;L++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),E[L]^=this._remainingCounter[this._remainingCounterIndex++];return E},P.prototype.decrypt=P.prototype.encrypt;function H(M){M=c(M,!0);var E=16-M.length%16,L=l(M.length+E);u(M,L);for(var le=M.length;le<L.length;le++)L[le]=E;return L}function q(M){if(M=c(M,!0),M.length<16)throw new Error("PKCS#7 invalid length");var E=M[M.length-1];if(E>16)throw new Error("PKCS#7 padding byte out of range");for(var L=M.length-E,le=0;le<E;le++)if(M[L+le]!==E)throw new Error("PKCS#7 invalid padding byte");var Q=l(L);return u(M,Q,0,0,L),Q}var j={AES:ie,Counter:I,ModeOfOperation:{ecb:F,cbc:k,cfb:y,ofb:A,ctr:P},utils:{hex:m,utf8:d},padding:{pkcs7:{pad:H,strip:q}},_arrayTest:{coerceArray:c,createArray:l,copyArray:u}};t.exports=j})()})(aesJs);const aes=aesJsExports,version$2="json-wallets/5.7.0";function looseArrayify(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),arrayify(t)}function zpad(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function getPassword(t){return typeof t=="string"?toUtf8Bytes(t,UnicodeNormalizationForm.NFKC):arrayify(t)}function searchPath(t,e){let n=t;const a=e.toLowerCase().split("/");for(let o=0;o<a.length;o++){let c=null;for(const l in n)if(l.toLowerCase()===a[o]){c=n[l];break}if(c===null)return null;n=c}return n}function uuidV4(t){const e=arrayify(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=hexlify(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const logger$6=new Logger(version$2);class CrowdsaleAccount extends Description{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function decrypt$2(t,e){const n=JSON.parse(t);e=getPassword(e);const a=getAddress(searchPath(n,"ethaddr")),o=looseArrayify(searchPath(n,"encseed"));(!o||o.length%16!==0)&&logger$6.throwArgumentError("invalid encseed","json",t);const c=arrayify(pbkdf2$1(e,e,2e3,32,"sha256")).slice(0,16),l=o.slice(0,16),u=o.slice(16),d=new aes.ModeOfOperation.cbc(c,l),m=aes.padding.pkcs7.strip(arrayify(d.decrypt(u)));let b="";for(let w=0;w<m.length;w++)b+=String.fromCharCode(m[w]);const x=toUtf8Bytes(b),_=keccak256(x);return new CrowdsaleAccount({_isCrowdsaleAccount:!0,address:a,privateKey:_})}function isCrowdsaleWallet(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function isKeystoreWallet(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}var scryptExports={},scrypt$1={get exports(){return scryptExports},set exports(t){scryptExports=t}};(function(t,e){(function(n){function o(T){const B=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let C=1779033703,D=3144134277,z=1013904242,U=2773480762,Y=1359893119,X=2600822924,O=528734635,J=1541459225;const Z=new Uint32Array(64);function se(P){let H=0,q=P.length;for(;q>=64;){let j=C,M=D,E=z,L=U,le=Y,Q=X,ce=O,fe=J,oe,de,ae,he,te;for(de=0;de<16;de++)ae=H+de*4,Z[de]=(P[ae]&255)<<24|(P[ae+1]&255)<<16|(P[ae+2]&255)<<8|P[ae+3]&255;for(de=16;de<64;de++)oe=Z[de-2],he=(oe>>>17|oe<<32-17)^(oe>>>19|oe<<32-19)^oe>>>10,oe=Z[de-15],te=(oe>>>7|oe<<32-7)^(oe>>>18|oe<<32-18)^oe>>>3,Z[de]=(he+Z[de-7]|0)+(te+Z[de-16]|0)|0;for(de=0;de<64;de++)he=(((le>>>6|le<<32-6)^(le>>>11|le<<32-11)^(le>>>25|le<<32-25))+(le&Q^~le&ce)|0)+(fe+(B[de]+Z[de]|0)|0)|0,te=((j>>>2|j<<32-2)^(j>>>13|j<<32-13)^(j>>>22|j<<32-22))+(j&M^j&E^M&E)|0,fe=ce,ce=Q,Q=le,le=L+he|0,L=E,E=M,M=j,j=he+te|0;C=C+j|0,D=D+M|0,z=z+E|0,U=U+L|0,Y=Y+le|0,X=X+Q|0,O=O+ce|0,J=J+fe|0,H+=64,q-=64}}se(T);let ie,F=T.length%64,k=T.length/536870912|0,y=T.length<<3,A=F<56?56:120,I=T.slice(T.length-F,T.length);for(I.push(128),ie=F+1;ie<A;ie++)I.push(0);return I.push(k>>>24&255),I.push(k>>>16&255),I.push(k>>>8&255),I.push(k>>>0&255),I.push(y>>>24&255),I.push(y>>>16&255),I.push(y>>>8&255),I.push(y>>>0&255),se(I),[C>>>24&255,C>>>16&255,C>>>8&255,C>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,z>>>24&255,z>>>16&255,z>>>8&255,z>>>0&255,U>>>24&255,U>>>16&255,U>>>8&255,U>>>0&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y>>>0&255,X>>>24&255,X>>>16&255,X>>>8&255,X>>>0&255,O>>>24&255,O>>>16&255,O>>>8&255,O>>>0&255,J>>>24&255,J>>>16&255,J>>>8&255,J>>>0&255]}function c(T,B,C){T=T.length<=64?T:o(T);const D=64+B.length+4,z=new Array(D),U=new Array(64);let Y,X=[];for(Y=0;Y<64;Y++)z[Y]=54;for(Y=0;Y<T.length;Y++)z[Y]^=T[Y];for(Y=0;Y<B.length;Y++)z[64+Y]=B[Y];for(Y=D-4;Y<D;Y++)z[Y]=0;for(Y=0;Y<64;Y++)U[Y]=92;for(Y=0;Y<T.length;Y++)U[Y]^=T[Y];function O(){for(let J=D-1;J>=D-4;J--){if(z[J]++,z[J]<=255)return;z[J]=0}}for(;C>=32;)O(),X=X.concat(o(U.concat(o(z)))),C-=32;return C>0&&(O(),X=X.concat(o(U.concat(o(z))).slice(0,C))),X}function l(T,B,C,D,z){let U;for(b(T,(2*C-1)*16,z,0,16),U=0;U<2*C;U++)m(T,U*16,z,16),d(z,D),b(z,0,T,B+U*16,16);for(U=0;U<C;U++)b(T,B+U*2*16,T,U*16,16);for(U=0;U<C;U++)b(T,B+(U*2+1)*16,T,(U+C)*16,16)}function u(T,B){return T<<B|T>>>32-B}function d(T,B){b(T,0,B,0,16);for(let C=8;C>0;C-=2)B[4]^=u(B[0]+B[12],7),B[8]^=u(B[4]+B[0],9),B[12]^=u(B[8]+B[4],13),B[0]^=u(B[12]+B[8],18),B[9]^=u(B[5]+B[1],7),B[13]^=u(B[9]+B[5],9),B[1]^=u(B[13]+B[9],13),B[5]^=u(B[1]+B[13],18),B[14]^=u(B[10]+B[6],7),B[2]^=u(B[14]+B[10],9),B[6]^=u(B[2]+B[14],13),B[10]^=u(B[6]+B[2],18),B[3]^=u(B[15]+B[11],7),B[7]^=u(B[3]+B[15],9),B[11]^=u(B[7]+B[3],13),B[15]^=u(B[11]+B[7],18),B[1]^=u(B[0]+B[3],7),B[2]^=u(B[1]+B[0],9),B[3]^=u(B[2]+B[1],13),B[0]^=u(B[3]+B[2],18),B[6]^=u(B[5]+B[4],7),B[7]^=u(B[6]+B[5],9),B[4]^=u(B[7]+B[6],13),B[5]^=u(B[4]+B[7],18),B[11]^=u(B[10]+B[9],7),B[8]^=u(B[11]+B[10],9),B[9]^=u(B[8]+B[11],13),B[10]^=u(B[9]+B[8],18),B[12]^=u(B[15]+B[14],7),B[13]^=u(B[12]+B[15],9),B[14]^=u(B[13]+B[12],13),B[15]^=u(B[14]+B[13],18);for(let C=0;C<16;++C)T[C]+=B[C]}function m(T,B,C,D){for(let z=0;z<D;z++)C[z]^=T[B+z]}function b(T,B,C,D,z){for(;z--;)C[D++]=T[B++]}function x(T){if(!T||typeof T.length!="number")return!1;for(let B=0;B<T.length;B++){const C=T[B];if(typeof C!="number"||C%1||C<0||C>=256)return!1}return!0}function _(T,B){if(typeof T!="number"||T%1)throw new Error("invalid "+B);return T}function w(T,B,C,D,z,U,Y){if(C=_(C,"N"),D=_(D,"r"),z=_(z,"p"),U=_(U,"dkLen"),C===0||C&C-1)throw new Error("N must be power of 2");if(C>2147483647/128/D)throw new Error("N too large");if(D>2147483647/128/z)throw new Error("r too large");if(!x(T))throw new Error("password must be an array or buffer");if(T=Array.prototype.slice.call(T),!x(B))throw new Error("salt must be an array or buffer");B=Array.prototype.slice.call(B);let X=c(T,B,z*128*D);const O=new Uint32Array(z*32*D);for(let le=0;le<O.length;le++){const Q=le*4;O[le]=(X[Q+3]&255)<<24|(X[Q+2]&255)<<16|(X[Q+1]&255)<<8|(X[Q+0]&255)<<0}const J=new Uint32Array(64*D),Z=new Uint32Array(32*D*C),se=32*D,ie=new Uint32Array(16),F=new Uint32Array(16),k=z*C*2;let y=0,A=null,I=!1,P=0,H=0,q,j;const M=Y?parseInt(1e3/D):4294967295,E=typeof setImmediate<"u"?setImmediate:setTimeout,L=function(){if(I)return Y(new Error("cancelled"),y/k);let le;switch(P){case 0:j=H*32*D,b(O,j,J,0,se),P=1,q=0;case 1:le=C-q,le>M&&(le=M);for(let ce=0;ce<le;ce++)b(J,0,Z,(q+ce)*se,se),l(J,se,D,ie,F);if(q+=le,y+=le,Y){const ce=parseInt(1e3*y/k);if(ce!==A){if(I=Y(null,y/k),I)break;A=ce}}if(q<C)break;q=0,P=2;case 2:le=C-q,le>M&&(le=M);for(let ce=0;ce<le;ce++){const fe=(2*D-1)*16,oe=J[fe]&C-1;m(Z,oe*se,J,se),l(J,se,D,ie,F)}if(q+=le,y+=le,Y){const ce=parseInt(1e3*y/k);if(ce!==A){if(I=Y(null,y/k),I)break;A=ce}}if(q<C)break;if(b(J,0,O,j,se),H++,H<z){P=0;break}X=[];for(let ce=0;ce<O.length;ce++)X.push(O[ce]>>0&255),X.push(O[ce]>>8&255),X.push(O[ce]>>16&255),X.push(O[ce]>>24&255);const Q=c(T,X,U);return Y&&Y(null,1,Q),Q}Y&&E(L)};if(!Y)for(;;){const le=L();if(le!=null)return le}L()}const S={scrypt:function(T,B,C,D,z,U,Y){return new Promise(function(X,O){let J=0;Y&&Y(0),w(T,B,C,D,z,U,function(Z,se,ie){if(Z)O(Z);else if(ie)Y&&J!==1&&Y(1),X(new Uint8Array(ie));else if(Y&&se!==J)return J=se,Y(se)})})},syncScrypt:function(T,B,C,D,z,U){return new Uint8Array(w(T,B,C,D,z,U))}};t.exports=S})()})(scrypt$1);const scrypt=scryptExports;var __awaiter$1=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(b){try{m(a.next(b))}catch(x){l(x)}}function d(b){try{m(a.throw(b))}catch(x){l(x)}}function m(b){b.done?c(b.value):o(b.value).then(u,d)}m((a=a.apply(t,e||[])).next())})};const logger$5=new Logger(version$2);function hasMnemonic$1(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function _decrypt(t,e,n){if(searchPath(t,"crypto/cipher")==="aes-128-ctr"){const o=looseArrayify(searchPath(t,"crypto/cipherparams/iv")),c=new aes.Counter(o),l=new aes.ModeOfOperation.ctr(e,c);return arrayify(l.decrypt(n))}return null}function _getAccount(t,e){const n=looseArrayify(searchPath(t,"crypto/ciphertext"));if(hexlify(keccak256(concat([e.slice(16,32),n]))).substring(2)!==searchPath(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const o=_decrypt(t,e.slice(0,16),n);o||logger$5.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const c=e.slice(32,64),l=computeAddress(o);if(t.address){let d=t.address.toLowerCase();if(d.substring(0,2)!=="0x"&&(d="0x"+d),getAddress(d)!==l)throw new Error("address mismatch")}const u={_isKeystoreAccount:!0,address:l,privateKey:hexlify(o)};if(searchPath(t,"x-ethers/version")==="0.1"){const d=looseArrayify(searchPath(t,"x-ethers/mnemonicCiphertext")),m=looseArrayify(searchPath(t,"x-ethers/mnemonicCounter")),b=new aes.Counter(m),x=new aes.ModeOfOperation.ctr(c,b),_=searchPath(t,"x-ethers/path")||defaultPath,w=searchPath(t,"x-ethers/locale")||"en",S=arrayify(x.decrypt(d));try{const T=entropyToMnemonic(S,w),B=HDNode.fromMnemonic(T,null,w).derivePath(_);if(B.privateKey!=u.privateKey)throw new Error("mnemonic mismatch");u.mnemonic=B.mnemonic}catch(T){if(T.code!==Logger.errors.INVALID_ARGUMENT||T.argument!=="wordlist")throw T}}return new KeystoreAccount(u)}function pbkdf2Sync(t,e,n,a,o){return arrayify(pbkdf2$1(t,e,n,a,o))}function pbkdf2(t,e,n,a,o){return Promise.resolve(pbkdf2Sync(t,e,n,a,o))}function _computeKdfKey(t,e,n,a,o){const c=getPassword(e),l=searchPath(t,"crypto/kdf");if(l&&typeof l=="string"){const u=function(d,m){return logger$5.throwArgumentError("invalid key-derivation function parameters",d,m)};if(l.toLowerCase()==="scrypt"){const d=looseArrayify(searchPath(t,"crypto/kdfparams/salt")),m=parseInt(searchPath(t,"crypto/kdfparams/n")),b=parseInt(searchPath(t,"crypto/kdfparams/r")),x=parseInt(searchPath(t,"crypto/kdfparams/p"));(!m||!b||!x)&&u("kdf",l),m&m-1&&u("N",m);const _=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return _!==32&&u("dklen",_),a(c,d,m,b,x,64,o)}else if(l.toLowerCase()==="pbkdf2"){const d=looseArrayify(searchPath(t,"crypto/kdfparams/salt"));let m=null;const b=searchPath(t,"crypto/kdfparams/prf");b==="hmac-sha256"?m="sha256":b==="hmac-sha512"?m="sha512":u("prf",b);const x=parseInt(searchPath(t,"crypto/kdfparams/c")),_=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return _!==32&&u("dklen",_),n(c,d,x,_,m)}}return logger$5.throwArgumentError("unsupported key-derivation function","kdf",l)}function decryptSync(t,e){const n=JSON.parse(t),a=_computeKdfKey(n,e,pbkdf2Sync,scrypt.syncScrypt);return _getAccount(n,a)}function decrypt$1(t,e,n){return __awaiter$1(this,void 0,void 0,function*(){const a=JSON.parse(t),o=yield _computeKdfKey(a,e,pbkdf2,scrypt.scrypt,n);return _getAccount(a,o)})}function encrypt$1(t,e,n,a){try{if(getAddress(t.address)!==computeAddress(t.privateKey))throw new Error("address/privateKey mismatch");if(hasMnemonic$1(t)){const B=t.mnemonic;if(HDNode.fromMnemonic(B.phrase,null,B.locale).derivePath(B.path||defaultPath).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(B){return Promise.reject(B)}typeof n=="function"&&!a&&(a=n,n={}),n||(n={});const o=arrayify(t.privateKey),c=getPassword(e);let l=null,u=null,d=null;if(hasMnemonic$1(t)){const B=t.mnemonic;l=arrayify(mnemonicToEntropy(B.phrase,B.locale||"en")),u=B.path||defaultPath,d=B.locale||"en"}let m=n.client;m||(m="ethers.js");let b=null;n.salt?b=arrayify(n.salt):b=randomBytes(32);let x=null;if(n.iv){if(x=arrayify(n.iv),x.length!==16)throw new Error("invalid iv")}else x=randomBytes(16);let _=null;if(n.uuid){if(_=arrayify(n.uuid),_.length!==16)throw new Error("invalid uuid")}else _=randomBytes(16);let w=1<<17,S=8,T=1;return n.scrypt&&(n.scrypt.N&&(w=n.scrypt.N),n.scrypt.r&&(S=n.scrypt.r),n.scrypt.p&&(T=n.scrypt.p)),scrypt.scrypt(c,b,w,S,T,64,a).then(B=>{B=arrayify(B);const C=B.slice(0,16),D=B.slice(16,32),z=B.slice(32,64),U=new aes.Counter(x),Y=new aes.ModeOfOperation.ctr(C,U),X=arrayify(Y.encrypt(o)),O=keccak256(concat([D,X])),J={address:t.address.substring(2).toLowerCase(),id:uuidV4(_),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(x).substring(2)},ciphertext:hexlify(X).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(b).substring(2),n:w,dklen:32,p:T,r:S},mac:O.substring(2)}};if(l){const Z=randomBytes(16),se=new aes.Counter(Z),ie=new aes.ModeOfOperation.ctr(z,se),F=arrayify(ie.encrypt(l)),k=new Date,y=k.getUTCFullYear()+"-"+zpad(k.getUTCMonth()+1,2)+"-"+zpad(k.getUTCDate(),2)+"T"+zpad(k.getUTCHours(),2)+"-"+zpad(k.getUTCMinutes(),2)+"-"+zpad(k.getUTCSeconds(),2)+".0Z";J["x-ethers"]={client:m,gethFilename:"UTC--"+y+"--"+J.address,mnemonicCounter:hexlify(Z).substring(2),mnemonicCiphertext:hexlify(F).substring(2),path:u,locale:d,version:"0.1"}}return JSON.stringify(J)})}function decryptJsonWallet(t,e,n){if(isCrowdsaleWallet(t)){n&&n(0);const a=decrypt$2(t,e);return n&&n(1),Promise.resolve(a)}return isKeystoreWallet(t)?decrypt$1(t,e,n):Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(t,e){if(isCrowdsaleWallet(t))return decrypt$2(t,e);if(isKeystoreWallet(t))return decryptSync(t,e);throw new Error("invalid JSON wallet")}const version$1="wallet/5.7.0";var __awaiter=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(c){return c instanceof n?c:new n(function(l){l(c)})}return new(n||(n=Promise))(function(c,l){function u(b){try{m(a.next(b))}catch(x){l(x)}}function d(b){try{m(a.throw(b))}catch(x){l(x)}}function m(b){b.done?c(b.value):o(b.value).then(u,d)}m((a=a.apply(t,e||[])).next())})};const logger$4=new Logger(version$1);function isAccount(t){return t!=null&&isHexString(t.privateKey,32)&&t.address!=null}function hasMnemonic(t){const e=t.mnemonic;return e&&e.phrase}class Wallet extends Signer{constructor(e,n){if(super(),isAccount(e)){const a=new SigningKey(e.privateKey);if(defineReadOnly(this,"_signingKey",()=>a),defineReadOnly(this,"address",computeAddress(this.publicKey)),this.address!==getAddress(e.address)&&logger$4.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),hasMnemonic(e)){const o=e.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:o.phrase,path:o.path||defaultPath,locale:o.locale||"en"}));const c=this.mnemonic,l=HDNode.fromMnemonic(c.phrase,null,c.locale).derivePath(c.path);computeAddress(l.privateKey)!==this.address&&logger$4.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey.isSigningKey(e))e.curve!=="secp256k1"&&logger$4.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const a=new SigningKey(e);defineReadOnly(this,"_signingKey",()=>a)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress(this.publicKey))}n&&!Provider.isProvider(n)&&logger$4.throwArgumentError("invalid provider","provider",n),defineReadOnly(this,"provider",n||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Wallet(this,e)}signTransaction(e){return resolveProperties(e).then(n=>{n.from!=null&&(getAddress(n.from)!==this.address&&logger$4.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete n.from);const a=this._signingKey().signDigest(keccak256(serialize(n)));return serialize(n,a)})}signMessage(e){return __awaiter(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage(e)))})}_signTypedData(e,n,a){return __awaiter(this,void 0,void 0,function*(){const o=yield TypedDataEncoder.resolveNames(e,n,a,c=>(this.provider==null&&logger$4.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:c}),this.provider.resolveName(c)));return joinSignature(this._signingKey().signDigest(TypedDataEncoder.hash(o.domain,n,o.value)))})}encrypt(e,n,a){if(typeof n=="function"&&!a&&(a=n,n={}),a&&typeof a!="function")throw new Error("invalid callback");return n||(n={}),encrypt$1(this,e,n,a)}static createRandom(e){let n=randomBytes(16);e||(e={}),e.extraEntropy&&(n=arrayify(hexDataSlice(keccak256(concat([n,e.extraEntropy])),0,16)));const a=entropyToMnemonic(n,e.locale);return Wallet.fromMnemonic(a,e.path,e.locale)}static fromEncryptedJson(e,n,a){return decryptJsonWallet(e,n,a).then(o=>new Wallet(o))}static fromEncryptedJsonSync(e,n){return new Wallet(decryptJsonWalletSync(e,n))}static fromMnemonic(e,n,a){return n||(n=defaultPath),new Wallet(HDNode.fromMnemonic(e,null,a).derivePath(n))}}function verifyMessage(t,e){return recoverAddress(hashMessage(t),e)}function getEIP191Verifier(){return{eip191:async(t,e)=>{verifyEIP191Signature(t,e)}}}const LEGACY_CHAIN_ID_REORG_DATE=new Date("2022-09-20").valueOf();function verifyEIP191Signature(t,e){assertSigned(t),verifyTimeChecks(t,e);const a=[verifyMessage(SiweMessage.fromCacao(t).toMessage(),t.s.s).toLowerCase()];if(Date.parse(t.p.iat)<=LEGACY_CHAIN_ID_REORG_DATE){const c=verifyMessage(asLegacyChainIdString(SiweMessage.fromCacao(t),"Ethereum"),t.s.s).toLowerCase();a.push(c)}const o=AccountId.parse(t.p.iss.replace("did:pkh:","")).address.toLowerCase();if(!a.includes(o))throw new Error("Signature does not belong to issuer")}function asUint8Array(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec$1(t,e,n,a){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:a}}}const string=createCodec$1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii=createCodec$1("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=allocUnsafe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BASES={utf8:string,"utf-8":string,hex:bases$1.base16,latin1:ascii,ascii,binary:ascii,...bases$1};function toString$5(t,e="utf8"){const n=BASES[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function fromString$2(t,e="utf8"){const n=BASES[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function randomString(){return toString$5(random.randomBytes(16),"base64")}const B64="base64pad",B64_URL="base64url";function encodeBase64(t){return toString$5(t,B64)}function encodeBase64Url(t){return toString$5(t,B64_URL)}function decodeBase64(t){return fromString$2(t,B64)}function base64urlToJSON(t){return JSON.parse(toString$5(fromString$2(t,B64_URL)))}function fromDagJWS(t){if(t.signatures.length>1)throw new Error("Cant convert to compact jws");return`${t.signatures[0].protected}.${t.payload}.${t.signatures[0].signature}`}function didWithTime(t,e){if(e){const n=e.toISOString().split(".")[0]+"Z";return`${t}?versionTime=${n}`}else return t}function extractControllers(t){return t?Array.isArray(t)?t:[t]:[]}const verifiers={...getEIP191Verifier()};function isResolver(t){return"registry"in t&&"cache"in t}class DID{get capability(){if(!this._capability)throw new Error("DID has no capability attached");return this._capability}get hasCapability(){return this._capability!=null}get parent(){if(!this._parentId)throw new Error("DID has no parent DID");return this._parentId}get hasParent(){return this._parentId!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}get authenticated(){return this._id!=null}withCapability(e){return new DID({provider:this._client?.connection,resolver:this._resolver,capability:e,parent:this._parentId})}setProvider(e){if(this._client==null)this._client=new RPCClient(e);else if(this._client.connection!==e)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(e,n){this._resolver=isResolver(e)?e:new Resolver(e,n)}async authenticate({provider:e,paths:n=[],aud:a}={}){if(e!=null&&this.setProvider(e),this._client==null)throw new Error("No provider available");const o=randomString(),c=await this._client.request("did_authenticate",{nonce:o,aud:a,paths:n}),{kid:l}=await this.verifyJWS(c),u=base64urlToJSON(c.payload);if(!l.includes(u.did))throw new Error("Invalid authencation response, kid mismatch");if(u.nonce!==o)throw new Error("Invalid authencation response, wrong nonce");if(u.aud!==a)throw new Error("Invalid authencation response, wrong aud");if(u.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=u.did,this._id}async createJWS(e,n={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");if(this._capability){const o=this._capability.p.exp;if(o&&Date.parse(o)<Date.now())throw new Error("Capability is expired, cannot create a valid signature");const c=await CacaoBlock.fromCacao(this._capability),l=CID$1.asCID(c.cid);if(!l)throw new Error("Capability CID of the JWS cannot be set to the capability payload cid as they are incompatible");n.protected=n.protected||{},n.protected.cap=`ipfs://${l?.toString()}`}const{jws:a}=await this._client.request("did_createJWS",{did:this._id,...n,payload:e});return a}async createDagJWS(e,n={}){const{cid:a,linkedBlock:o}=await encodePayload(e),c=encodeBase64Url(a.bytes);Object.assign(n,{linkedBlock:encodeBase64(o)});const l=await this.createJWS(c,n),u=CID$1.asCID(a);if(!u)throw new Error("CID of the JWS cannot be set to the encoded payload cid as they are incompatible");if(l.link=u,this._capability){const d=await CacaoBlock.fromCacao(this._capability);return{jws:l,linkedBlock:o,cacaoBlock:d.bytes}}return{jws:l,linkedBlock:o}}async verifyJWS(e,n={}){n=Object.assign({verifiers},n),typeof e!="string"&&(e=fromDagJWS(e));const a=base64urlToJSON(e.split(".")[0]).kid;if(!a)throw new Error('No "kid" found in jws');const o=await this.resolve(a);if(!n.disableTimecheck){const m=o.didDocumentMetadata?.nextUpdate;if(m){const x=n.revocationPhaseOutSecs?n.revocationPhaseOutSecs*1e3:0,_=new Date(m).valueOf()+x;if(!(n.atTime&&n.atTime.getTime()<_))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${a}`)}const b=o.didDocumentMetadata?.updated;if(b&&n.atTime&&n.atTime.getTime()<new Date(b).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${a}`)}const l=o.didDocument?.id;if(n.issuer&&n.issuer===n.capability?.p.iss&&l===n.capability.p.aud){if(!n.verifiers)throw new Error("Registered verifiers needed for CACAO");await Cacao.verify(n.capability,{disableExpirationCheck:n.disableTimecheck,atTime:n.atTime?n.atTime:void 0,revocationPhaseOutSecs:n.revocationPhaseOutSecs,verifiers:n.verifiers??{}})}else if(n.issuer&&n.issuer!==l){const m=didWithTime(n.issuer,n.atTime),x=(await this.resolve(m)).didDocument?.controller,_=extractControllers(x);if(n.capability?.s&&n.capability.p.aud===l&&_.includes(n.capability.p.iss))await Cacao.verify(n.capability,{atTime:n.atTime?n.atTime:void 0,revocationPhaseOutSecs:n.revocationPhaseOutSecs,verifiers:n.verifiers??{}});else if(!(l?_.includes(l):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${a}`)}const u=o.didDocument?.verificationMethod||[];verifyJWS(e,u);let d;try{d=base64urlToJSON(e.split(".")[1])}catch{}return{kid:a,payload:d,didResolutionResult:o}}async createJWE(e,n,a={}){const o=await resolveX25519Encrypters(n,this._resolver);return createJWE(e,o,a.protectedHeader,a.aad)}async createDagJWE(e,n,a={}){const o=await prepareCleartext(e);return this.createJWE(o,n,a)}async decryptJWE(e,n={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");const{cleartext:a}=await this._client.request("did_decryptJWE",{did:this._id,...n,jwe:e});return decodeBase64(a)}async decryptDagJWE(e){const n=await this.decryptJWE(e);return decodeCleartext(n)}async resolve(e){const n=await this._resolver.resolve(e);if(n.didResolutionMetadata.error){const{error:a,message:o}=n.didResolutionMetadata,c=o?`, ${o}`:"";throw new Error(`Failed to resolve ${e}: ${a}${c}`)}return n}constructor({provider:e,resolver:n={},resolverOptions:a,capability:o,parent:c}={}){if(e!=null&&(this._client=new RPCClient(e)),o){if(this._capability=o,this._parentId=this._capability.p.iss,c&&this._parentId!==c)throw new Error("Capability issuer and parent not equal")}else c&&(this._parentId=c);this.setResolver(n,a)}}const TYPE="DID";class DIDIdentityProvider extends IdentityProvider{constructor({didProvider:e}){super(),this.did=new DID({resolver:DIDIdentityProvider.did._resolver,provider:e})}static get type(){return TYPE}async getId({space:e}){return this.did.authenticated||await this.did.authenticate(),this.did.id}async signIdentity(e,{space:n}){this.did.authenticated||await this.did.authenticate();const a=toString$8(fromString$5(e,"base16"),"base64url"),o=await this.did.createJWS(a);return`${o.signatures[0].protected}..${o.signatures[0].signature}`}static setDIDResolver(e){this.did?this.did.setResolver(e):this.did=new DID({resolver:e})}static async verifyIdentity(e){if(!this.did)throw new Error("The DID resolver must first be set with setDIDResolver()");const n=e.publicKey+e.signatures.id;try{const a=toString$8(fromString$5(n,"base16"),"base64url"),[o,c]=e.signatures.publicKey.split(".."),l=[o,a,c].join(".");await this.did.verifyJWS(l)}catch{return!1}return!0}}const type$4="ethereum";class EthIdentityProvider extends IdentityProvider{constructor(e={}){super(),this.wallet=e.wallet}static get type(){return type$4}async getId(e={}){return this.wallet||(this.wallet=await this._createWallet(e)),this.wallet.getAddress()}async signIdentity(e,n={}){const a=this.wallet;if(!a)throw new Error("wallet is required");return a.signMessage(e)}static async verifyIdentity(e){return verifyMessage(e.publicKey+e.signatures.id,e.signatures.publicKey)===e.id}async _createWallet(e={}){if(e.mnemonicOpts){if(!e.mnemonicOpts.mnemonic)throw new Error("mnemonic is required");return Wallet.fromMnemonic(e.mnemonicOpts.mnemonic,e.mnemonicOpts.path,e.mnemonicOpts.wordlist)}if(e.encryptedJsonOpts){if(!e.encryptedJsonOpts.json)throw new Error("encrypted json is required");if(!e.encryptedJsonOpts.password)throw new Error("password for encrypted json is required");return Wallet.fromEncryptedJson(e.encryptedJsonOpts.json,e.encryptedJsonOpts.password,e.encryptedJsonOpts.progressCallback)}return Wallet.createRandom()}}const defaultType="orbitdb",identityKeysPath=path.join("./orbitdb","identity","identitykeys"),supportedTypes$1={orbitdb:OrbitDBIdentityProvider,[DIDIdentityProvider.type]:DIDIdentityProvider,[EthIdentityProvider.type]:EthIdentityProvider},getHandlerFor$1=t=>{if(!Identities.isSupported(t))throw new Error(`IdentityProvider type '${t}' is not supported`);return supportedTypes$1[t]};class Identities{constructor(e){this._keystore=e.keystore,this._signingKeystore=e.signingKeystore||this._keystore,this._knownIdentities=e.cache||new lru(e.cacheSize||100)}static get IdentityProvider(){return IdentityProvider}get keystore(){return this._keystore}get signingKeystore(){return this._signingKeystore}async sign(e,n){const a=await this.keystore.getKey(e.id);if(!a)throw new Error("Private signing key not found from Keystore");return await this.keystore.sign(a,n)}async verify(e,n,a,o="v1"){return this.keystore.verify(e,n,a,o)}async createIdentity(e={}){const n=e.keystore||this.keystore,a=e.type||defaultType,o=a===defaultType?new OrbitDBIdentityProvider(e.signingKeystore||n):new(getHandlerFor$1(a))(e),c=await o.getId(e);e.migrate&&await e.migrate({targetStore:n._store,targetId:c});const{publicKey:l,idSignature:u}=await this.signId(c),d=await o.signIdentity(l+u,e);return new Identity(c,l,u,d,a,this)}async signId(e){const n=this.keystore,a=await n.getKey(e)||await n.createKey(e),o=n.getPublic(a),c=await n.sign(a,e);return{publicKey:o,idSignature:c}}async verifyIdentity(e){if(!Identity.isIdentity(e))return!1;const n=this._knownIdentities.get(e.signatures.id);if(n)return e.id===n.id&&e.publicKey===n.publicKey&&e.signatures.id===n.signatures.id&&e.signatures.publicKey===n.signatures.publicKey;if(!await this.keystore.verify(e.signatures.id,e.publicKey,e.id))return!1;const c=await getHandlerFor$1(e.type).verifyIdentity(e);return c&&this._knownIdentities.set(e.signatures.id,Identity.toJSON(e)),c}static async verifyIdentity(e){return!Identity.isIdentity(e)||!await Keystore.verify(e.signatures.id,e.publicKey,e.id)?!1:getHandlerFor$1(e.type).verifyIdentity(e)}static async createIdentity(e={}){return e.keystore||(e.keystore=new Keystore(e.identityKeysPath||identityKeysPath)),e.signingKeystore||(e.signingKeysPath?e.signingKeystore=new Keystore(e.signingKeysPath):e.signingKeystore=e.keystore),await e.keystore.open(),await e.signingKeystore.open(),e=Object.assign({},{type:defaultType},e),new Identities(e).createIdentity(e)}static isSupported(e){return Object.keys(supportedTypes$1).includes(e)}static addIdentityProvider(e){if(!e)throw new Error("IdentityProvider class needs to be given as an option");if(!e.type||typeof e.type!="string")throw new Error("Given IdentityProvider class needs to implement: static get type() { /* return a string */ }.");supportedTypes$1[e.type]=e}static removeIdentityProvider(e){delete supportedTypes$1[e]}}class AccessController extends eventsExports.EventEmitter{static async create(e,n){}static get type(){throw new Error("'static get type ()' needs to be defined in the inheriting class")}get type(){return this.constructor.type}get address(){}async canAppend(e,n){}async grant(e,n){return!1}async revoke(e,n){return!1}async load(e){}async save(){}async close(){}}class AccessControllerManifest{constructor(e,n={}){this.type=e,this.params=n}static async resolve(e,n,a={}){if(a.skipManifest){if(!a.type)throw new Error("No manifest, access-controller type required");return new AccessControllerManifest(a.type,{address:n})}else{n.indexOf("/ipfs")===0&&(n=n.split("/")[2]);const{type:o,params:c}=await read$7(e,n);return new AccessControllerManifest(o,c)}}static async create(e,n,a){return a.skipManifest?a.address:write$3(e,"dag-cbor",{type:n,params:a})}}const type$3="legacy-ipfs";class LegacyIPFSAccessController extends AccessController{constructor(e,n){super(),this._ipfs=e,this._write=Array.from(n.write||[])}static get type(){return type$3}get write(){return this._write}async canAppend(e,n){const a=e.key;return!!(this.write.includes(a)||this.write.includes("*"))}async load(e){e.indexOf("/ipfs")===0&&(e=e.split("/")[2]);try{const n=await read$7(this._ipfs,e);this._write=n.write}catch(n){console.log("LegacyIPFSAccessController.load ERROR:",n)}}async save(e){let n;const a={admin:[],write:this.write,read:[]};try{n=await write$3(this._ipfs,"raw",safeBufferExports.Buffer.from(JSON.stringify(a,null,2)),{format:"dag-pb"})}catch(o){console.log("LegacyIPFSAccessController.save ERROR:",o)}return{address:n,skipManifest:!0}}static async create(e,n={}){return n={...n,write:n.write||[e.identity.publicKey]},new LegacyIPFSAccessController(e._ipfs,n)}}const read$4=async(t,e,n={})=>{const a=await read$7(t,e,n);return typeof a.write=="string"?JSON.parse(a.write):a.write},write$2=write$3,type$2="ipfs";class IPFSAccessController extends AccessController{constructor(e,n){super(),this._ipfs=e,this._write=Array.from(n.write||[])}static get type(){return type$2}get write(){return this._write}async canAppend(e,n){const a=e.identity.id;return this.write.includes(a)||this.write.includes("*")?n.verifyIdentity(e.identity):!1}async load(e){e.indexOf("/ipfs")===0&&(e=e.split("/")[2]);try{this._write=await read$4(this._ipfs,e)}catch(n){console.log("IPFSAccessController.load ERROR:",n)}}async save(){let e;try{e=await write$2(this._ipfs,"dag-cbor",{write:JSON.stringify(this.write,null,2)})}catch(n){console.log("IPFSAccessController.save ERROR:",n)}return{address:e}}static async create(e,n={}){return n={...n,write:n.write||[e.identity.id]},new IPFSAccessController(e._ipfs,n)}}async function pMapSeries(t,e){const n=[];let a=0;for(const o of t)n.push(await e(await o,a++));return n}const ensureAddress$1=t=>t.toString().split("/").pop()==="_access"?t:path.join(t,"/_access"),type$1="orbitdb";class OrbitDBAccessController extends AccessController{constructor(e,n){super(),this._orbitdb=e,this._db=null,this._options=n||{}}static get type(){return type$1}get address(){return this._db.address}async canAppend(e,n){const a=new Set([...this.get("write"),...this.get("admin")]);return a.has(e.identity.id)||a.has("*")?await n.verifyIdentity(e.identity):!1}get capabilities(){if(this._db){const e=this._db.index,n=a=>{const o=a[0];e[o]=new Set([...e[o]||[],...a[1]])};return Object.entries({...e,admin:new Set([...e.admin||[],...this._db.access.write])}).forEach(n),e}return{}}get(e){return this.capabilities[e]||new Set([])}async close(){await this._db.close()}async load(e){this._db&&await this._db.close(),this._db=await this._orbitdb.keyvalue(ensureAddress$1(e),{accessController:{type:"ipfs",write:this._options.admin||[this._orbitdb.identity.id]},sync:!0}),this._db.events.on("ready",this._onUpdate.bind(this)),this._db.events.on("write",this._onUpdate.bind(this)),this._db.events.on("replicated",this._onUpdate.bind(this)),await this._db.load()}async save(){return{address:this._db.address.toString()}}async hasCapability(e,n){const a=new Set(this.get(e));return a.has(n.id)||a.has("*")}async grant(e,n){const a=new Set([...this._db.get(e)||[],n]);await this._db.put(e,Array.from(a.values()))}async revoke(e,n){const a=new Set(this._db.get(e)||[]);a.delete(n),a.size>0?await this._db.put(e,Array.from(a.values())):await this._db.del(e)}_onUpdate(){this.emit("updated")}static async create(e,n={}){const a=new OrbitDBAccessController(e,n);return await a.load(n.address||n.name||"default-access-controller"),n.write&&!n.address&&await pMapSeries(n.write,async o=>a.grant("write",o)),a}}const supportedTypes={"legacy-ipfs":LegacyIPFSAccessController,ipfs:IPFSAccessController,orbitdb:OrbitDBAccessController},getHandlerFor=t=>{if(!AccessControllers$1.isSupported(t))throw new Error(`AccessController type '${t}' is not supported`);return supportedTypes[t]};let AccessControllers$1=class{static get AccessController(){return AccessController}static isSupported(e){return Object.keys(supportedTypes).includes(e)}static addAccessController(e){if(!e.AccessController)throw new Error("AccessController class needs to be given as an option");if(!e.AccessController.type||typeof e.AccessController.type!="string")throw new Error("Given AccessController class needs to implement: static get type() { /* return a string */}.");supportedTypes[e.AccessController.type]=e.AccessController}static addAccessControllers(e){const n=e.AccessControllers;if(!n)throw new Error("AccessController classes need to be given as an option");n.forEach(a=>{AccessControllers$1.addAccessController({AccessController:a})})}static removeAccessController(e){delete supportedTypes[e]}static async resolve(e,n,a={}){const{type:o,params:c}=await AccessControllerManifest.resolve(e._ipfs,n,a),u=await getHandlerFor(o).create(e,Object.assign({},a,c));return await u.load(c.address),u}static async create(e,n,a={}){const l=await(await getHandlerFor(n).create(e,a)).save();return await AccessControllerManifest.create(e._ipfs,n,l)}};const notEmpty=t=>t!==""&&t!==" ";class OrbitDBAddress{constructor(e,n){this.root=e,this.path=n}toString(){return OrbitDBAddress.join(this.root,this.path)}static isValid(e){e=e.toString().replace(/\\/g,"/");const n=(l,u)=>!((u===0||u===1)&&e.toString().indexOf("/orbit")===0&&l==="orbitdb"),a=e.toString().split("/").filter(n).filter(notEmpty);let o;const c=l=>{const u=["zd","Qm","ba","k5"];for(const d of u)if(l.indexOf(d)>-1)return!0;return!1};try{o=c(a[0])?CID$1.parse(a[0]).toString():null}catch{return!1}return o!==null}static parse(e){if(!e)throw new Error(`Not a valid OrbitDB address: ${e}`);if(!OrbitDBAddress.isValid(e))throw new Error(`Not a valid OrbitDB address: ${e}`);e=e.toString().replace(/\\/g,"/");const n=e.toString().split("/").filter((a,o)=>!((o===0||o===1)&&e.toString().indexOf("/orbit")===0&&a==="orbitdb")).filter(a=>a!==""&&a!==" ");return new OrbitDBAddress(n[0],n.slice(1,n.length).join("/"))}static join(...e){return(path.posix||path).join("/orbitdb",...e)}}const createDBManifest=async(t,e,n,a,o)=>{const c=Object.assign({name:e,type:n,accessController:(path.posix||path).join("/ipfs",a)},o.meta!==void 0?{meta:o.meta}:{});return write$3(t,o.format||"dag-cbor",c,o)},PROTOCOL="ipfs-pubsub-direct-channel/v1",encode$a=t=>{let e=t;return safeBufferExports.Buffer.isBuffer(e)||(e=safeBufferExports.Buffer.from(e)),e},waitForPeers=async(t,e,n,a)=>{const o=async()=>{const c=await t.pubsub.peers(n),l=e.map(m=>String(m)),u=c.map(m=>String(m));return l.map(m=>u.includes(m)).filter(m=>m===!1).length===0};return await o()?Promise.resolve():new Promise((c,l)=>{const u=setInterval(async()=>{try{a()?clearInterval(u):await o()&&(clearInterval(u),c())}catch(d){l(d)}},100)})},getPeerID=async t=>(await t.id()).id;class DirectChannel extends eventsExports{constructor(e,n){if(super(),this._ipfs=e,!e.pubsub)throw new Error("This IPFS node does not support pubsub.");if(this._closed=!1,this._isClosed=()=>this._closed,this._receiverID=n,!this._receiverID)throw new Error("Receiver ID was undefined")}get id(){return this._id}get peers(){return this._peers}async connect(){await waitForPeers(this._ipfs,[this._receiverID],this._id,this._isClosed)}async send(e){if(this._closed)return;const n=encode$a(e);await this._ipfs.pubsub.publish(this._id,n)}close(){this._closed=!0,this.removeAllListeners("message"),this._ipfs.pubsub.unsubscribe(this._id,this._messageHandler)}async _setup(){this._senderID=await getPeerID(this._ipfs),this._peers=Array.from([this._senderID,this._receiverID]).sort(),this._id="/"+PROTOCOL+"/"+this._peers.join("/"),this._messageHandler=e=>{e&&String(e.from)===String(this._receiverID)&&this.emit("message",e)}}async _openChannel(){this._closed=!1,await this._setup(),await this._ipfs.pubsub.subscribe(this._id,this._messageHandler)}static async open(e,n){const a=new DirectChannel(e,n);return await a._openChannel(),a}}const logger$3=src$8.create("exchange-heads",{color:src$8.Colors.Yellow});src$8.setLogLevel("ERROR");const getHeadsForDatabase=async t=>{if(!(t&&t._cache))return[];const e=await t._cache.get(t.localHeadsPath)||[],n=await t._cache.get(t.remoteHeadsPath)||[];return[...e,...n]},exchangeHeads=async(t,e,n,a,o,c,l)=>{const u=b=>{const x=JSON.parse(Buffer$x.from(b.data).toString()),{address:_,heads:w}=x;c(_,w)};let d=o(n);if(!d)try{logger$3.debug(`Create a channel to ${n}`),d=await DirectChannel.open(t,n),d.on("message",u),logger$3.debug(`Channel created to ${n}`),l(d)}catch(b){logger$3.error(b)}await d.connect(),logger$3.debug(`Connected to ${n}`);const m=await getHeadsForDatabase(a(e));return logger$3.debug(`Send latest heads of '${e}':
`,JSON.stringify(m.map(b=>b.hash),null,2)),m&&await d.send(JSON.stringify({address:e,heads:m})),d},isDefined=t=>t!=null;class Storage{constructor(e,n={}){const a={createIfMissing:!0,errorIfExists:!1,compression:!0,cacheSize:8388608};this.storage=e,this.preCreate=n.preCreate?n.preCreate:()=>{};const o=Object.assign({},n,a);delete o.preCreate,this.options={down:o}}async createStore(e="./orbitdb",n={}){this.options.up=n,await this.preCreate(e,this.options),this.storage||fs$2&&fs$2.mkdirSync&&fs$2.mkdirSync(e,{recursive:!0});const a=new Level(e,n);return await a.open(),a}async destroy(e){!this.storage||!this.storage.destroy||await this.storage.destory(e._db.location)}async preCreate(e,n){}}const Storage$1=(t,e)=>new Storage(t,e);function isElectron$2(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof browser$1$1<"u"&&typeof browser$1$1.versions=="object"&&browser$1$1.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var isElectron_1=isElectron$2;const isEnvWithDom=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,isElectron$1=isElectron_1(),isBrowser$2=isEnvWithDom&&!isElectron$1,isElectronMain=isElectron$1&&!isEnvWithDom,isElectronRenderer=isElectron$1&&isEnvWithDom,isNode=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!isElectron$1,isWebWorker$1=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"];const isReactNative$1=typeof navigator<"u"&&navigator.product==="ReactNative",fs=!isElectronMain&&(typeof window=="object"||typeof self=="object")?null:fs$2,logger$2=src$8.create("orbit-db");src$8.setLogLevel("ERROR");async function migrate(t,e,n){let a=e.cache||(t.caches[e.directory]?t.caches[e.directory].cache:null),o;if(!a){const d=(path.posix||path).join(t.directory,n.root,n.path);if(fs&&fs.existsSync&&!fs.existsSync(d))return;o=await t.storage.createStore(d),a=new Cache(o)}if(!await a.get("_localHeads"))return;const l=n.toString();logger$2.debug("Attempting to migrate from old cache location");const u=["_remoteHeads","_localHeads","snapshot","queue"];for(const d in u)try{const m=path.join(l,u[d]),b=await a.get(u[d]);b&&await e.cache.set(m,b)}catch(m){logger$2.debug(m.message)}await e.cache.set(path.join(l,"_manifest"),n.root),o&&await o.close()}const migrations=[migrate],run=async(t,e,n)=>{for(let a=0;a<migrations.length;a++)await migrations[a](t,e,n)},logger$1=src$8.create("orbit-db");src$8.setLogLevel("ERROR");const databaseTypes={counter:CounterStore,eventlog:EventStore,feed:FeedStore,docstore:DocumentStore,keyvalue:KeyValueStore},defaultTimeout=3e4;let AccessControllers=AccessControllers$1;class OrbitDB{constructor(e,n,a={}){if(!isDefined(e))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(!isDefined(n))throw new Error("identity is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");this._ipfs=e,this.identity=n,this.id=a.peerId,this._pubsub=a.offline?null:new(a.broker?a.broker:IPFSPubsub)(this._ipfs,this.id),this.directory=a.directory||"./orbitdb",this.storage=a.storage,this._directConnections={},this.caches={},this.caches[this.directory]={cache:a.cache,handlers:new Set},this.keystore=a.keystore,this.stores={},AccessControllers=a.AccessControllers||AccessControllers}static get Pubsub(){return IPFSPubsub}static get Cache(){return Cache}static get Keystore(){return Keystore}static get Identities(){return Identities}static get AccessControllers(){return AccessControllers}static get Storage(){return Storage$1}static get OrbitDBAddress(){return OrbitDBAddress}static get Store(){return Store}static get EventStore(){return EventStore}static get FeedStore(){return FeedStore}static get KeyValueStore(){return KeyValueStore}static get CounterStore(){return CounterStore}static get DocumentStore(){return DocumentStore}get cache(){return this.caches[this.directory].cache}static async createInstance(e,n={}){if(!isDefined(e))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(n.offline===void 0&&(n.offline=!1),n.offline&&!n.id)throw new Error("Offline mode requires passing an `id` in the options");const{id:a}=n.id||n.offline?{id:n.id}:await e.id();if(n.directory||(n.directory="./orbitdb"),!n.storage){const c={};n.storage=Storage$1(null,c)}if(n.identity&&n.identity.provider.keystore&&(n.keystore=n.identity.provider.keystore),!n.keystore){const c=path.join(n.directory,typeof a!="object"?a:a.toString(),"/keystore"),l=await n.storage.createStore(c);n.keystore=new Keystore(l)}if(n.identity||(n.identity=await Identities.createIdentity({id:a,keystore:n.keystore})),!n.cache){const c=path.join(n.directory,typeof a!="object"?a:a.toString(),"/cache"),l=await n.storage.createStore(c);n.cache=new Cache(l)}const o=Object.assign({},n,{peerId:typeof a!="object"?a:a.toString()});return new OrbitDB(e,n.identity,o)}async feed(e,n={}){return n=Object.assign({create:!0,type:"feed"},n),this.open(e,n)}async log(e,n={}){return n=Object.assign({create:!0,type:"eventlog"},n),this.open(e,n)}async eventlog(e,n={}){return this.log(e,n)}async keyvalue(e,n={}){return n=Object.assign({create:!0,type:"keyvalue"},n),this.open(e,n)}async kvstore(e,n={}){return this.keyvalue(e,n)}async counter(e,n={}){return n=Object.assign({create:!0,type:"counter"},n),this.open(e,n)}async docs(e,n={}){return n=Object.assign({create:!0,type:"docstore"},n),this.open(e,n)}async docstore(e,n={}){return this.docs(e,n)}async disconnect(){for(const a of Object.values(this._directConnections))a.close();this._directConnections={},this._pubsub&&await this._pubsub.disconnect(),await this.keystore.close();const e=Object.values(this.stores);for(const a of e)await a.close();this.stores={};const n=Object.values(this.caches);for(const a of n)await a.cache.close();this.caches={},this.stores={}}async stop(){await this.disconnect()}async _createCache(e){const n=await this.storage.createStore(e);return new Cache(n)}async _createStore(e,n,a){const o=databaseTypes[e];if(!o)throw new Error(`Invalid database type '${e}'`);let c;a.accessControllerAddress&&(c=await AccessControllers.resolve(this,a.accessControllerAddress,a.accessController));const l=Object.assign({replicate:!0},a,{accessController:c,cache:a.cache,onClose:this._onClose.bind(this),onDrop:this._onDrop.bind(this),onLoad:this._onLoad.bind(this)}),u=a.identity||this.identity,d=new o(this._ipfs,u,n,l);d.events.on("write",this._onWrite.bind(this));const m=n.toString();return this.stores[m]=d,l.replicate&&this._pubsub&&await this._pubsub.subscribe(m,this._onMessage.bind(this),this._onPeerConnected.bind(this)),d}_onWrite(e,n,a){if(!a)throw new Error("'heads' not defined");this._pubsub&&this._pubsub.publish(e,a)}async _onMessage(e,n,a){const o=this.stores[e];try{logger$1.debug(`Received ${n.length} heads for '${e}':
`,JSON.stringify(n.map(c=>c.hash),null,2)),o&&n&&(n.length>0&&await o.sync(n),o.events.emit("peer.exchanged",a,e,n))}catch(c){logger$1.error(c)}}async _onPeerConnected(e,n){logger$1.debug(`New peer '${n}' connected to '${e}'`);const a=u=>this.stores[u],o=u=>this._directConnections[u],c=u=>{this._directConnections[u._receiverID]=u},l=(u,d)=>this._onMessage(u,d,n);await exchangeHeads(this._ipfs,e,n,a,o,l,c),a(e)&&a(e).events.emit("peer",n)}async _onClose(e){const n=e.address.toString();logger$1.debug(`Close ${n}`),this._pubsub&&await this._pubsub.unsubscribe(n);const a=e&&e.options.directory?e.options.directory:this.directory,o=this.caches[a];o&&o.handlers.has(n)&&(o.handlers.delete(n),o.handlers.size||await o.cache.close()),delete this.stores[n]}async _onDrop(e){const n=e.address.toString(),a=e&&e.options.directory?e.options.directory:this.directory;await this._requestCache(n,a,e._cache)}async _onLoad(e){const n=e.address.toString(),a=e&&e.options.directory?e.options.directory:this.directory;await this._requestCache(n,a,e._cache),this.stores[n]=e}async _determineAddress(e,n,a={}){if(!OrbitDB.isValidType(n))throw new Error(`Invalid database type '${n}'`);if(OrbitDBAddress.isValid(e))throw new Error("Given database name is an address. Please give only the name of the database!");a.accessController=Object.assign({},{name:e,type:"ipfs"},a.accessController);const o=await AccessControllers.create(this,a.accessController.type,a.accessController||{}),c=await createDBManifest(this._ipfs,e,n,o,a);return OrbitDBAddress.parse(OrbitDBAddress.join(c,e))}async create(e,n,a={}){logger$1.debug("create()"),logger$1.debug(`Creating database '${e}' as ${n}`);const o=await this._determineAddress(e,n,a);if(a.cache=await this._requestCache(o.toString(),a.directory),await this._haveLocalData(a.cache,o)&&!a.overwrite)throw new Error(`Database '${o}' already exists!`);return await this._migrate({...a,directory:this.directory},o),await this._addManifestToCache(a.cache,o),logger$1.debug(`Created database '${o}'`),this.open(o,a)}async determineAddress(e,n,a={}){const o=Object.assign({},{onlyHash:!0},a);return this._determineAddress(e,n,o)}async _requestCache(e,n,a){const o=n||this.directory;if(!this.caches[o]){const l=a||await this._createCache(o);this.caches[o]={cache:l,handlers:new Set}}this.caches[o].handlers.add(e);const c=this.caches[o].cache;return c&&await c.open(),c}async open(e,n={}){if(logger$1.debug("open()"),n=Object.assign({localOnly:!1,create:!1},n),logger$1.debug(`Open database '${e}'`),!OrbitDBAddress.isValid(e))if(n.create){if(n.create&&!n.type)throw new Error(`Database type not provided! Provide a type with 'options.type' (${OrbitDB.databaseTypes.join("|")})`);return logger$1.warn(`Not a valid OrbitDB address '${e}', creating the database`),n.overwrite=n.overwrite?n.overwrite:!0,this.create(e,n.type,n)}else throw new Error("'options.create' set to 'false'. If you want to create a database, set 'options.create' to 'true'.");const a=OrbitDBAddress.parse(e);n.cache=await this._requestCache(a.toString(),n.directory);const o=await this._haveLocalData(n.cache,a);if(logger$1.debug((o?"Found":"Didn't find")+` database '${a}'`),n.localOnly&&!o)throw logger$1.warn(`Database '${a}' doesn't exist!`),new Error(`Database '${a}' doesn't exist!`);logger$1.debug(`Loading Manifest for '${a}'`);let c;try{c=await read$7(this._ipfs,a.root,{timeout:n.timeout||defaultTimeout}),logger$1.debug(`Manifest for '${a}':
${JSON.stringify(c,null,2)}`)}catch(l){throw l.name==="TimeoutError"&&l.code==="ERR_TIMEOUT"?(console.error(l),new Error("ipfs unable to find and fetch manifest for this address.")):l}if(c.name!==a.path&&logger$1.warn(`Manifest name '${c.name}' and path name '${a.path}' do not match`),n.type&&c.type!==n.type)throw new Error(`Database '${a}' is type '${c.type}' but was opened as '${n.type}'`);return await this._addManifestToCache(n.cache,a),n=Object.assign({},n,{accessControllerAddress:c.accessController,meta:c.meta}),this._createStore(n.type||c.type,a,n)}async _addManifestToCache(e,n){await e.set(path.join(n.toString(),"_manifest"),n.root),logger$1.debug(`Saved manifest to IPFS as '${n.root}'`)}async _haveLocalData(e,n){if(!e)return!1;const a=n.toString(),o=await e.get(path.join(a,"_manifest"));return o!=null}async _migrate(e,n){await run(this,e,n)}static get databaseTypes(){return Object.keys(databaseTypes)}static isValidType(e){return Object.keys(databaseTypes).includes(e)}static addDatabaseType(e,n){if(databaseTypes[e])throw new Error(`Type already exists: ${e}`);databaseTypes[e]=n}static getDatabaseTypes(){return databaseTypes}static isValidAddress(e){return OrbitDBAddress.isValid(e)}static parseAddress(e){return OrbitDBAddress.parse(e)}}OrbitDB.prototype.AccessControllers=AccessControllers;OrbitDB.prototype.Identities=Identities;OrbitDB.prototype.Keystore=Keystore;let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let t=0;t<256;++t)byteToHex.push((t+256).toString(16).slice(1));function unsafeStringify(t,e=0){return(byteToHex[t[e+0]]+byteToHex[t[e+1]]+byteToHex[t[e+2]]+byteToHex[t[e+3]]+"-"+byteToHex[t[e+4]]+byteToHex[t[e+5]]+"-"+byteToHex[t[e+6]]+byteToHex[t[e+7]]+"-"+byteToHex[t[e+8]]+byteToHex[t[e+9]]+"-"+byteToHex[t[e+10]]+byteToHex[t[e+11]]+byteToHex[t[e+12]]+byteToHex[t[e+13]]+byteToHex[t[e+14]]+byteToHex[t[e+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(t,e,n){if(native.randomUUID&&!e&&!t)return native.randomUUID();t=t||{};const a=t.random||(t.rng||rng)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=a[o];return e}return unsafeStringify(a)}class SemaphoreItem{constructor(e){this.queue=[],this.max=e,this.count=0}get canAcquire(){return this.count<this.max}acquire(){return this.canAcquire?(this.count++,Promise.resolve()):new Promise(e=>{this.queue.push(e)})}release(){const e=this.queue.shift();e?setTimeout(e,0):this.count--}}const defaultKey="_default";class Semaphore{constructor(e=1){this.semaphoreItems={},this.max=e}_getSemaphoreInstance(e=defaultKey){return this.semaphoreItems[e]||(this.semaphoreItems[e]=new SemaphoreItem(this.max)),this.semaphoreItems[e]}_tidy(e=defaultKey){this._getSemaphoreInstance(e).count==0&&delete this.semaphoreItems[e]}canAcquire(e=defaultKey){return this._getSemaphoreInstance(e).canAcquire}acquire(e=defaultKey){return this._getSemaphoreInstance(e).acquire()}release(e=defaultKey){this._getSemaphoreInstance(e).release(),this._tidy(e)}count(e=defaultKey){return this.semaphoreItems[e]?this.semaphoreItems[e].count:0}hasTasks(e=defaultKey){return this.count(e)>0}async request(e,n=defaultKey){try{return await this.acquire(n),await e()}finally{this.release(n)}}async requestIfAvailable(e,n=defaultKey){return this.canAcquire(n)?this.request(e,n):null}}var src$4=Semaphore;const verrouOuvertureBd$1=new src$4;class AccesseurBdOrbite{constructor(){lt(this,"bds");lt(this,"requètes");this.bds={},this.requètes={}}async ouvrirBd(e,n,a){const o=this._obtClef(e,n);verrouOuvertureBd$1.acquire(o),this.requètes[o]||(this.requètes[o]=new Set),this.requètes[o].add(a);const c=this.bds[o];if(c)return verrouOuvertureBd$1.release(o),c;const l=await e.open(n);return await l.load(),this.bds[o]=l,verrouOuvertureBd$1.release(o),l}async fermerBd(e,n,a){const o=this._obtClef(e,n);verrouOuvertureBd$1.acquire(o),this.requètes[o].delete(a),this.requètes[o].size||(await this.bds[o].close(),delete this.bds[o],delete this.requètes[o]),verrouOuvertureBd$1.release(o)}_obtClef(e,n){const a=e.identity.id;return n+a}}const accesseurBdOrbite=new AccesseurBdOrbite,MODÉRATEUR="MODÉRATEUR",MEMBRE="MEMBRE",rôles=[MODÉRATEUR,MEMBRE],événementsSuiviBd=["ready","write","replicated"],suivreBdAccès=async(t,e)=>{const n=()=>{const o=t.iterator({limit:-1}).collect().map(c=>c.payload.value);e(o)};t.events.setMaxListeners(100);for(const o of événementsSuiviBd)t.events.on(o,n);return n(),async()=>{événementsSuiviBd.forEach(o=>{t.events.off(o,n)})}};class AccèsUtilisateur extends eventsExports.EventEmitter{constructor(n,a){super();lt(this,"orbite");lt(this,"idBd");lt(this,"bd");lt(this,"idBdAccès");lt(this,"bdAccès");lt(this,"oublierSuivi");lt(this,"autorisés");lt(this,"accès");lt(this,"idRequète");lt(this,"prêt");this.orbite=n,this.idBd=a,this.autorisés=[],this.idRequète=v4(),this.prêt=!1}async initialiser(){this.bd=await accesseurBdOrbite.ouvrirBd(this.orbite,this.idBd,this.idRequète),this.accès=this.bd.access,this.bdAccès=this.accès.bd,this.idBdAccès=this.bdAccès.id,this.oublierSuivi=await suivreBdAccès(this.bdAccès,async n=>{await this._miseÀJour(n)}),this.prêt=!0}async _miseÀJour(n){const a=[];n=[{id:this.accès._premierMod,rôle:MODÉRATEUR},...n],n.forEach(o=>{a.push(o.id)}),this.autorisés=a,this.emit("misÀJour")}async fermer(){this.oublierSuivi&&this.oublierSuivi(),this.prêt&&await accesseurBdOrbite.fermerBd(this.orbite,this.idBd,this.idRequète)}}class GestionnaireAccès extends eventsExports.EventEmitter{constructor(n){super();lt(this,"_rôles");lt(this,"_rôlesIdOrbite");lt(this,"_rôlesUtilisateurs");lt(this,"_miseÀJourEnCours");lt(this,"orbite");this._rôles={[MODÉRATEUR]:[],[MEMBRE]:[]},this._rôlesIdOrbite={[MODÉRATEUR]:[],[MEMBRE]:[]},this._rôlesUtilisateurs={[MODÉRATEUR]:{},[MEMBRE]:{}},this._miseÀJourEnCours=!1,this.orbite=n}async estUnMembre(n){return this._miseÀJourEnCours&&await once_1(this,"misÀJour"),this._rôles[MEMBRE].includes(n)}async estUnModérateur(n){return this._miseÀJourEnCours&&await once_1(this,"misÀJour"),this._rôles[MODÉRATEUR].includes(n)}async estAutorisé(n){return await this.estUnModérateur(n)||await this.estUnMembre(n)}async ajouterÉléments(n){this._miseÀJourEnCours=!0,await Promise.all(n.map(async a=>{const{rôle:o,id:c}=a;if(OrbitDB.isValidAddress(c)){if(!this._rôlesUtilisateurs[o][c]){const l=new AccèsUtilisateur(this.orbite,c);l.on("misÀJour",()=>this._mettreRôlesÀJour()),this._rôlesUtilisateurs[o][c]=l,await l.initialiser()}}else this._rôlesIdOrbite[o].includes(c)||(this._rôlesIdOrbite[o].push(c),this._mettreRôlesÀJour())})),this._miseÀJourEnCours=!1,this._mettreRôlesÀJour(),this.emit("misÀJour")}_mettreRôlesÀJour(){const n={MODÉRATEUR:[],MEMBRE:[]};for(const[a,o]of Object.entries(this._rôlesIdOrbite)){const c=n[a];o.forEach(l=>{c.includes(l)||c.push(l)})}for(const[a,o]of Object.entries(this._rôlesUtilisateurs)){const c=n[a];Object.values(o).forEach(l=>{l.autorisés.forEach(u=>{c.includes(u)||c.push(u)})})}this._rôles=n}async fermer(){const n=Object.values(this._rôlesUtilisateurs).map(a=>Object.values(a)).flat();await Promise.all(n.map(a=>a.fermer()))}}const ensureAddress=t=>t.toString().split("/").pop()==="_access"?t:path.join(t,"/_access"),nomType="controlleur-constellation";class ContrôleurConstellation extends AccessControllers$1.AccessController{constructor(n,a){super();lt(this,"bd");lt(this,"nom");lt(this,"_orbitdb");lt(this,"_premierMod");lt(this,"_adresseBd");lt(this,"idRequète");lt(this,"gestRôles");this._orbitdb=n,this._premierMod=a.premierMod,this._adresseBd=a.address,this.nom=a.nom,this.idRequète=v4(),this.gestRôles=new GestionnaireAccès(this._orbitdb),this.gestRôles.on("misÀJour",()=>this.emit("misÀJour"))}static get type(){return nomType}get address(){return this.bd.id}async estUnMembre(n){return await this.gestRôles.estUnMembre(n)}async estUnModérateur(n){return await this.gestRôles.estUnModérateur(n)}async estAutorisé(n){return await this.gestRôles.estAutorisé(n)}async suivreUtilisateursAutorisés(n){const a=async()=>{const c=Object.keys(this.gestRôles._rôlesUtilisateurs[MODÉRATEUR]).map(m=>({idBdCompte:m,rôle:MODÉRATEUR})),l=c.map(m=>m.idBdCompte),u=Object.keys(this.gestRôles._rôlesUtilisateurs[MEMBRE]).map(m=>({idBdCompte:m,rôle:MEMBRE})).filter(m=>!l.includes(m.idBdCompte)),d=[...c,...u];await n(d)};return this.gestRôles.on("misÀJour",a),await a(),async()=>{this.gestRôles.off("misÀJour",a)}}async suivreIdsOrbiteAutoriséesÉcriture(n){const a=()=>{n([...this.gestRôles._rôles.MEMBRE,...this.gestRôles._rôles.MODÉRATEUR])};return this.gestRôles.on("misÀJour",a),a(),async()=>{this.gestRôles.off("misÀJour",a)}}async canAppend(n,a){const o=async()=>await a.verifyIdentity(n.identity);return await this.estAutorisé(n.identity.id)?await o():!1}async _miseÀJourBdAccès(){let n=this.bd.iterator({limit:-1}).collect().map(a=>a.payload.value);n=[{rôle:MODÉRATEUR,id:this._premierMod},...n],await this.gestRôles.ajouterÉléments(n)}async close(){await accesseurBdOrbite.fermerBd(this._orbitdb,this.bd.id,this.idRequète),await this.gestRôles.fermer()}async load(n){const a=OrbitDB.isValidAddress(n);let o;a?o=n:o=(await this._orbitdb.determineAddress(ensureAddress(n),"feed",this._createOrbitOpts(a))).toString(),this.bd=await accesseurBdOrbite.ouvrirBd(this._orbitdb,o,this.idRequète),suivreBdAccès(this.bd,()=>this._miseÀJourBdAccès())}_createOrbitOpts(n=!1){const a={type:"controlleur-accès-constellation",premierMod:this._premierMod};return n?{}:{accessController:a}}async save(){return{address:(this._adresseBd||await this._orbitdb.determineAddress(`${this.nom}/_access`,"feed",this._createOrbitOpts())).toString(),premierMod:this._premierMod,nom:this.nom}}async grant(n,a){if(!rôles.includes(n))throw new Error(`Erreur: Le rôle ${n} n'existe pas.`);if(!this.gestRôles._rôles[n].includes(a))try{const o={rôle:n,id:a};await this.bd.add(o)}catch(o){const c=o;throw c.toString().includes("not append entry")?new Error(`Erreur : Le rôle ${n} ne peut pas être octroyé à ${a}.`):c}}async revoke(n,a){const o=this.bd.iterator({limit:-1}).collect().find(l=>l.payload.value.rôle===n&&l.payload.value.id===a);if(!o)throw new Error(`Erreur : Le rôle ${n} n'existait pas pour ${a}.`);const c=o.hash;await this.bd.remove(c)}static async create(n,a){return a.premierMod||(a.premierMod=n.identity.id),a.nom=a.nom||v4(),new ContrôleurConstellation(n,a)}}const type="controlleur-accès-constellation";class ContrôleurAccès extends eventsExports.EventEmitter{constructor(n,a){super();lt(this,"_premierMod");lt(this,"orbitdb");lt(this,"gestAccès");lt(this,"dernierAppel");this.orbitdb=n,this._premierMod=a.premierMod,this.gestAccès=new GestionnaireAccès(this.orbitdb),this.dernierAppel=Date.now()}static get type(){return type}async estUnModérateurPatient(n){return await this.gestAccès.estUnModérateur(n)?!0:new Promise(o=>{const c=()=>{setTimeout(async()=>{await this.gestAccès.estUnModérateur(n)?o(!0):Date.now()-this.dernierAppel>1e3?o(!1):c()},100)};c()})}get premierMod(){return this._premierMod}async canAppend(n,a){const o=n.identity.id,{rôle:c,id:l}=n.payload.value,u=this.estUnModérateurPatient(o),d=rôles.includes(c),m=async()=>a.verifyIdentity(n.identity);return d&&await u&&await m()?(c===MODÉRATEUR&&(await this.gestAccès.ajouterÉléments([{id:l,rôle:MODÉRATEUR}]),this.dernierAppel=Date.now()),!0):!1}async load(){await this.gestAccès.ajouterÉléments([{id:this._premierMod,rôle:MODÉRATEUR}])}async save(){return{premierMod:this.premierMod}}static async create(n,a={}){const o=a.premierMod;if(!o)throw new Error("Contrôle d'accès: premier modérateur requis");return new ContrôleurAccès(n,{premierMod:o})}}const enregistrerContrôleurs=()=>{AccessControllers$1.addAccessController({AccessController:ContrôleurConstellation}),AccessControllers$1.addAccessController({AccessController:ContrôleurAccès})};enregistrerContrôleurs();var jszip_minExports={},jszip_min={get exports(){return jszip_minExports},set exports(t){jszip_minExports=t}};(function(t,e){(function(n){t.exports=n()})(function(){return function n(a,o,c){function l(m,b){if(!o[m]){if(!a[m]){var x=typeof commonjsRequire$1=="function"&&commonjsRequire$1;if(!b&&x)return x(m,!0);if(u)return u(m,!0);var _=new Error("Cannot find module '"+m+"'");throw _.code="MODULE_NOT_FOUND",_}var w=o[m]={exports:{}};a[m][0].call(w.exports,function(S){var T=a[m][1][S];return l(T||S)},w,w.exports,n,a,o,c)}return o[m].exports}for(var u=typeof commonjsRequire$1=="function"&&commonjsRequire$1,d=0;d<c.length;d++)l(c[d]);return l}({1:[function(n,a,o){var c=n("./utils"),l=n("./support"),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(d){for(var m,b,x,_,w,S,T,B=[],C=0,D=d.length,z=D,U=c.getTypeOf(d)!=="string";C<d.length;)z=D-C,x=U?(m=d[C++],b=C<D?d[C++]:0,C<D?d[C++]:0):(m=d.charCodeAt(C++),b=C<D?d.charCodeAt(C++):0,C<D?d.charCodeAt(C++):0),_=m>>2,w=(3&m)<<4|b>>4,S=1<z?(15&b)<<2|x>>6:64,T=2<z?63&x:64,B.push(u.charAt(_)+u.charAt(w)+u.charAt(S)+u.charAt(T));return B.join("")},o.decode=function(d){var m,b,x,_,w,S,T=0,B=0,C="data:";if(d.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var D,z=3*(d=d.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(d.charAt(d.length-1)===u.charAt(64)&&z--,d.charAt(d.length-2)===u.charAt(64)&&z--,z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(D=l.uint8array?new Uint8Array(0|z):new Array(0|z);T<d.length;)m=u.indexOf(d.charAt(T++))<<2|(_=u.indexOf(d.charAt(T++)))>>4,b=(15&_)<<4|(w=u.indexOf(d.charAt(T++)))>>2,x=(3&w)<<6|(S=u.indexOf(d.charAt(T++))),D[B++]=m,w!==64&&(D[B++]=b),S!==64&&(D[B++]=x);return D}},{"./support":30,"./utils":32}],2:[function(n,a,o){var c=n("./external"),l=n("./stream/DataWorker"),u=n("./stream/Crc32Probe"),d=n("./stream/DataLengthProbe");function m(b,x,_,w,S){this.compressedSize=b,this.uncompressedSize=x,this.crc32=_,this.compression=w,this.compressedContent=S}m.prototype={getContentWorker:function(){var b=new l(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new d("data_length")),x=this;return b.on("end",function(){if(this.streamInfo.data_length!==x.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new l(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(b,x,_){return b.pipe(new u).pipe(new d("uncompressedSize")).pipe(x.compressWorker(_)).pipe(new d("compressedSize")).withStreamInfo("compression",x)},a.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,a,o){var c=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,a,o){var c=n("./utils"),l=function(){for(var u,d=[],m=0;m<256;m++){u=m;for(var b=0;b<8;b++)u=1&u?3988292384^u>>>1:u>>>1;d[m]=u}return d}();a.exports=function(u,d){return u!==void 0&&u.length?c.getTypeOf(u)!=="string"?function(m,b,x,_){var w=l,S=_+x;m^=-1;for(var T=_;T<S;T++)m=m>>>8^w[255&(m^b[T])];return-1^m}(0|d,u,u.length,0):function(m,b,x,_){var w=l,S=_+x;m^=-1;for(var T=_;T<S;T++)m=m>>>8^w[255&(m^b.charCodeAt(T))];return-1^m}(0|d,u,u.length,0):0}},{"./utils":32}],5:[function(n,a,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,a,o){var c=null;c=typeof Promise<"u"?Promise:n("lie"),a.exports={Promise:c}},{lie:37}],7:[function(n,a,o){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",l=n("pako"),u=n("./utils"),d=n("./stream/GenericWorker"),m=c?"uint8array":"array";function b(x,_){d.call(this,"FlateWorker/"+x),this._pako=null,this._pakoAction=x,this._pakoOptions=_,this.meta={}}o.magic="\b\0",u.inherits(b,d),b.prototype.processChunk=function(x){this.meta=x.meta,this._pako===null&&this._createPako(),this._pako.push(u.transformTo(m,x.data),!1)},b.prototype.flush=function(){d.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){d.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new l[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var x=this;this._pako.onData=function(_){x.push({data:_,meta:x.meta})}},o.compressWorker=function(x){return new b("Deflate",x)},o.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,a,o){function c(w,S){var T,B="";for(T=0;T<S;T++)B+=String.fromCharCode(255&w),w>>>=8;return B}function l(w,S,T,B,C,D){var z,U,Y=w.file,X=w.compression,O=D!==m.utf8encode,J=u.transformTo("string",D(Y.name)),Z=u.transformTo("string",m.utf8encode(Y.name)),se=Y.comment,ie=u.transformTo("string",D(se)),F=u.transformTo("string",m.utf8encode(se)),k=Z.length!==Y.name.length,y=F.length!==se.length,A="",I="",P="",H=Y.dir,q=Y.date,j={crc32:0,compressedSize:0,uncompressedSize:0};S&&!T||(j.crc32=w.crc32,j.compressedSize=w.compressedSize,j.uncompressedSize=w.uncompressedSize);var M=0;S&&(M|=8),O||!k&&!y||(M|=2048);var E=0,L=0;H&&(E|=16),C==="UNIX"?(L=798,E|=function(Q,ce){var fe=Q;return Q||(fe=ce?16893:33204),(65535&fe)<<16}(Y.unixPermissions,H)):(L=20,E|=function(Q){return 63&(Q||0)}(Y.dosPermissions)),z=q.getUTCHours(),z<<=6,z|=q.getUTCMinutes(),z<<=5,z|=q.getUTCSeconds()/2,U=q.getUTCFullYear()-1980,U<<=4,U|=q.getUTCMonth()+1,U<<=5,U|=q.getUTCDate(),k&&(I=c(1,1)+c(b(J),4)+Z,A+="up"+c(I.length,2)+I),y&&(P=c(1,1)+c(b(ie),4)+F,A+="uc"+c(P.length,2)+P);var le="";return le+=`
\0`,le+=c(M,2),le+=X.magic,le+=c(z,2),le+=c(U,2),le+=c(j.crc32,4),le+=c(j.compressedSize,4),le+=c(j.uncompressedSize,4),le+=c(J.length,2),le+=c(A.length,2),{fileRecord:x.LOCAL_FILE_HEADER+le+J+A,dirRecord:x.CENTRAL_FILE_HEADER+c(L,2)+le+c(ie.length,2)+"\0\0\0\0"+c(E,4)+c(B,4)+J+A+ie}}var u=n("../utils"),d=n("../stream/GenericWorker"),m=n("../utf8"),b=n("../crc32"),x=n("../signature");function _(w,S,T,B){d.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=S,this.zipPlatform=T,this.encodeFileName=B,this.streamFiles=w,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}u.inherits(_,d),_.prototype.push=function(w){var S=w.meta.percent||0,T=this.entriesCount,B=this._sources.length;this.accumulate?this.contentBuffer.push(w):(this.bytesWritten+=w.data.length,d.prototype.push.call(this,{data:w.data,meta:{currentFile:this.currentFile,percent:T?(S+100*(T-B-1))/T:100}}))},_.prototype.openedSource=function(w){this.currentSourceOffset=this.bytesWritten,this.currentFile=w.file.name;var S=this.streamFiles&&!w.file.dir;if(S){var T=l(w,S,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:T.fileRecord,meta:{percent:0}})}else this.accumulate=!0},_.prototype.closedSource=function(w){this.accumulate=!1;var S=this.streamFiles&&!w.file.dir,T=l(w,S,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(T.dirRecord),S)this.push({data:function(B){return x.DATA_DESCRIPTOR+c(B.crc32,4)+c(B.compressedSize,4)+c(B.uncompressedSize,4)}(w),meta:{percent:100}});else for(this.push({data:T.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},_.prototype.flush=function(){for(var w=this.bytesWritten,S=0;S<this.dirRecords.length;S++)this.push({data:this.dirRecords[S],meta:{percent:100}});var T=this.bytesWritten-w,B=function(C,D,z,U,Y){var X=u.transformTo("string",Y(U));return x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(C,2)+c(C,2)+c(D,4)+c(z,4)+c(X.length,2)+X}(this.dirRecords.length,T,w,this.zipComment,this.encodeFileName);this.push({data:B,meta:{percent:100}})},_.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},_.prototype.registerPrevious=function(w){this._sources.push(w);var S=this;return w.on("data",function(T){S.processChunk(T)}),w.on("end",function(){S.closedSource(S.previous.streamInfo),S._sources.length?S.prepareNextSource():S.end()}),w.on("error",function(T){S.error(T)}),this},_.prototype.resume=function(){return!!d.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},_.prototype.error=function(w){var S=this._sources;if(!d.prototype.error.call(this,w))return!1;for(var T=0;T<S.length;T++)try{S[T].error(w)}catch{}return!0},_.prototype.lock=function(){d.prototype.lock.call(this);for(var w=this._sources,S=0;S<w.length;S++)w[S].lock()},a.exports=_},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,a,o){var c=n("../compressions"),l=n("./ZipFileWorker");o.generateWorker=function(u,d,m){var b=new l(d.streamFiles,m,d.platform,d.encodeFileName),x=0;try{u.forEach(function(_,w){x++;var S=function(D,z){var U=D||z,Y=c[U];if(!Y)throw new Error(U+" is not a valid compression method !");return Y}(w.options.compression,d.compression),T=w.options.compressionOptions||d.compressionOptions||{},B=w.dir,C=w.date;w._compressWorker(S,T).withStreamInfo("file",{name:_,dir:B,date:C,comment:w.comment||"",unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions}).pipe(b)}),b.entriesCount=x}catch(_){b.error(_)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,a,o){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var l=new c;for(var u in this)typeof this[u]!="function"&&(l[u]=this[u]);return l}}(c.prototype=n("./object")).loadAsync=n("./load"),c.support=n("./support"),c.defaults=n("./defaults"),c.version="3.10.1",c.loadAsync=function(l,u){return new c().loadAsync(l,u)},c.external=n("./external"),a.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,a,o){var c=n("./utils"),l=n("./external"),u=n("./utf8"),d=n("./zipEntries"),m=n("./stream/Crc32Probe"),b=n("./nodejsUtils");function x(_){return new l.Promise(function(w,S){var T=_.decompressed.getContentWorker().pipe(new m);T.on("error",function(B){S(B)}).on("end",function(){T.streamInfo.crc32!==_.decompressed.crc32?S(new Error("Corrupted zip : CRC32 mismatch")):w()}).resume()})}a.exports=function(_,w){var S=this;return w=c.extend(w||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:u.utf8decode}),b.isNode&&b.isStream(_)?l.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",_,!0,w.optimizedBinaryString,w.base64).then(function(T){var B=new d(w);return B.load(T),B}).then(function(T){var B=[l.Promise.resolve(T)],C=T.files;if(w.checkCRC32)for(var D=0;D<C.length;D++)B.push(x(C[D]));return l.Promise.all(B)}).then(function(T){for(var B=T.shift(),C=B.files,D=0;D<C.length;D++){var z=C[D],U=z.fileNameStr,Y=c.resolve(z.fileNameStr);S.file(Y,z.decompressed,{binary:!0,optimizedBinaryString:!0,date:z.date,dir:z.dir,comment:z.fileCommentStr.length?z.fileCommentStr:null,unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions,createFolders:w.createFolders}),z.dir||(S.file(Y).unsafeOriginalName=U)}return B.zipComment.length&&(S.comment=B.zipComment),S})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,a,o){var c=n("../utils"),l=n("../stream/GenericWorker");function u(d,m){l.call(this,"Nodejs stream input adapter for "+d),this._upstreamEnded=!1,this._bindStream(m)}c.inherits(u,l),u.prototype._bindStream=function(d){var m=this;(this._stream=d).pause(),d.on("data",function(b){m.push({data:b,meta:{percent:0}})}).on("error",function(b){m.isPaused?this.generatedError=b:m.error(b)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},u.prototype.pause=function(){return!!l.prototype.pause.call(this)&&(this._stream.pause(),!0)},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=u},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,a,o){var c=n("readable-stream").Readable;function l(u,d,m){c.call(this,d),this._helper=u;var b=this;u.on("data",function(x,_){b.push(x)||b._helper.pause(),m&&m(_)}).on("error",function(x){b.emit("error",x)}).on("end",function(){b.push(null)})}n("../utils").inherits(l,c),l.prototype._read=function(){this._helper.resume()},a.exports=l},{"../utils":32,"readable-stream":16}],14:[function(n,a,o){a.exports={isNode:typeof Buffer$x<"u",newBufferFrom:function(c,l){if(Buffer$x.from&&Buffer$x.from!==Uint8Array.from)return Buffer$x.from(c,l);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer$x(c,l)},allocBuffer:function(c){if(Buffer$x.alloc)return Buffer$x.alloc(c);var l=new Buffer$x(c);return l.fill(0),l},isBuffer:function(c){return Buffer$x.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(n,a,o){function c(Y,X,O){var J,Z=u.getTypeOf(X),se=u.extend(O||{},b);se.date=se.date||new Date,se.compression!==null&&(se.compression=se.compression.toUpperCase()),typeof se.unixPermissions=="string"&&(se.unixPermissions=parseInt(se.unixPermissions,8)),se.unixPermissions&&16384&se.unixPermissions&&(se.dir=!0),se.dosPermissions&&16&se.dosPermissions&&(se.dir=!0),se.dir&&(Y=C(Y)),se.createFolders&&(J=B(Y))&&D.call(this,J,!0);var ie=Z==="string"&&se.binary===!1&&se.base64===!1;O&&O.binary!==void 0||(se.binary=!ie),(X instanceof x&&X.uncompressedSize===0||se.dir||!X||X.length===0)&&(se.base64=!1,se.binary=!0,X="",se.compression="STORE",Z="string");var F=null;F=X instanceof x||X instanceof d?X:S.isNode&&S.isStream(X)?new T(Y,X):u.prepareContent(Y,X,se.binary,se.optimizedBinaryString,se.base64);var k=new _(Y,F,se);this.files[Y]=k}var l=n("./utf8"),u=n("./utils"),d=n("./stream/GenericWorker"),m=n("./stream/StreamHelper"),b=n("./defaults"),x=n("./compressedObject"),_=n("./zipObject"),w=n("./generate"),S=n("./nodejsUtils"),T=n("./nodejs/NodejsStreamInputAdapter"),B=function(Y){Y.slice(-1)==="/"&&(Y=Y.substring(0,Y.length-1));var X=Y.lastIndexOf("/");return 0<X?Y.substring(0,X):""},C=function(Y){return Y.slice(-1)!=="/"&&(Y+="/"),Y},D=function(Y,X){return X=X!==void 0?X:b.createFolders,Y=C(Y),this.files[Y]||c.call(this,Y,null,{dir:!0,createFolders:X}),this.files[Y]};function z(Y){return Object.prototype.toString.call(Y)==="[object RegExp]"}var U={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Y){var X,O,J;for(X in this.files)J=this.files[X],(O=X.slice(this.root.length,X.length))&&X.slice(0,this.root.length)===this.root&&Y(O,J)},filter:function(Y){var X=[];return this.forEach(function(O,J){Y(O,J)&&X.push(J)}),X},file:function(Y,X,O){if(arguments.length!==1)return Y=this.root+Y,c.call(this,Y,X,O),this;if(z(Y)){var J=Y;return this.filter(function(se,ie){return!ie.dir&&J.test(se)})}var Z=this.files[this.root+Y];return Z&&!Z.dir?Z:null},folder:function(Y){if(!Y)return this;if(z(Y))return this.filter(function(Z,se){return se.dir&&Y.test(Z)});var X=this.root+Y,O=D.call(this,X),J=this.clone();return J.root=O.name,J},remove:function(Y){Y=this.root+Y;var X=this.files[Y];if(X||(Y.slice(-1)!=="/"&&(Y+="/"),X=this.files[Y]),X&&!X.dir)delete this.files[Y];else for(var O=this.filter(function(Z,se){return se.name.slice(0,Y.length)===Y}),J=0;J<O.length;J++)delete this.files[O[J].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Y){var X,O={};try{if((O=u.extend(Y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:l.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");u.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var J=O.comment||this.comment||"";X=w.generateWorker(this,O,J)}catch(Z){(X=new d("error")).error(Z)}return new m(X,O.type||"string",O.mimeType)},generateAsync:function(Y,X){return this.generateInternalStream(Y).accumulate(X)},generateNodeStream:function(Y,X){return(Y=Y||{}).type||(Y.type="nodebuffer"),this.generateInternalStream(Y).toNodejsStream(X)}};a.exports=U},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,a,o){a.exports=n("stream")},{stream:void 0}],17:[function(n,a,o){var c=n("./DataReader");function l(u){c.call(this,u);for(var d=0;d<this.data.length;d++)u[d]=255&u[d]}n("../utils").inherits(l,c),l.prototype.byteAt=function(u){return this.data[this.zero+u]},l.prototype.lastIndexOfSignature=function(u){for(var d=u.charCodeAt(0),m=u.charCodeAt(1),b=u.charCodeAt(2),x=u.charCodeAt(3),_=this.length-4;0<=_;--_)if(this.data[_]===d&&this.data[_+1]===m&&this.data[_+2]===b&&this.data[_+3]===x)return _-this.zero;return-1},l.prototype.readAndCheckSignature=function(u){var d=u.charCodeAt(0),m=u.charCodeAt(1),b=u.charCodeAt(2),x=u.charCodeAt(3),_=this.readData(4);return d===_[0]&&m===_[1]&&b===_[2]&&x===_[3]},l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return[];var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},a.exports=l},{"../utils":32,"./DataReader":18}],18:[function(n,a,o){var c=n("../utils");function l(u){this.data=u,this.length=u.length,this.index=0,this.zero=0}l.prototype={checkOffset:function(u){this.checkIndex(this.index+u)},checkIndex:function(u){if(this.length<this.zero+u||u<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+u+"). Corrupted zip ?")},setIndex:function(u){this.checkIndex(u),this.index=u},skip:function(u){this.setIndex(this.index+u)},byteAt:function(){},readInt:function(u){var d,m=0;for(this.checkOffset(u),d=this.index+u-1;d>=this.index;d--)m=(m<<8)+this.byteAt(d);return this.index+=u,m},readString:function(u){return c.transformTo("string",this.readData(u))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var u=this.readInt(4);return new Date(Date.UTC(1980+(u>>25&127),(u>>21&15)-1,u>>16&31,u>>11&31,u>>5&63,(31&u)<<1))}},a.exports=l},{"../utils":32}],19:[function(n,a,o){var c=n("./Uint8ArrayReader");function l(u){c.call(this,u)}n("../utils").inherits(l,c),l.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},a.exports=l},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,a,o){var c=n("./DataReader");function l(u){c.call(this,u)}n("../utils").inherits(l,c),l.prototype.byteAt=function(u){return this.data.charCodeAt(this.zero+u)},l.prototype.lastIndexOfSignature=function(u){return this.data.lastIndexOf(u)-this.zero},l.prototype.readAndCheckSignature=function(u){return u===this.readData(4)},l.prototype.readData=function(u){this.checkOffset(u);var d=this.data.slice(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},a.exports=l},{"../utils":32,"./DataReader":18}],21:[function(n,a,o){var c=n("./ArrayReader");function l(u){c.call(this,u)}n("../utils").inherits(l,c),l.prototype.readData=function(u){if(this.checkOffset(u),u===0)return new Uint8Array(0);var d=this.data.subarray(this.zero+this.index,this.zero+this.index+u);return this.index+=u,d},a.exports=l},{"../utils":32,"./ArrayReader":17}],22:[function(n,a,o){var c=n("../utils"),l=n("../support"),u=n("./ArrayReader"),d=n("./StringReader"),m=n("./NodeBufferReader"),b=n("./Uint8ArrayReader");a.exports=function(x){var _=c.getTypeOf(x);return c.checkSupport(_),_!=="string"||l.uint8array?_==="nodebuffer"?new m(x):l.uint8array?new b(c.transformTo("uint8array",x)):new u(c.transformTo("array",x)):new d(x)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,a,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,a,o){var c=n("./GenericWorker"),l=n("../utils");function u(d){c.call(this,"ConvertWorker to "+d),this.destType=d}l.inherits(u,c),u.prototype.processChunk=function(d){this.push({data:l.transformTo(this.destType,d.data),meta:d.meta})},a.exports=u},{"../utils":32,"./GenericWorker":28}],25:[function(n,a,o){var c=n("./GenericWorker"),l=n("../crc32");function u(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(u,c),u.prototype.processChunk=function(d){this.streamInfo.crc32=l(d.data,this.streamInfo.crc32||0),this.push(d)},a.exports=u},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,a,o){var c=n("../utils"),l=n("./GenericWorker");function u(d){l.call(this,"DataLengthProbe for "+d),this.propName=d,this.withStreamInfo(d,0)}c.inherits(u,l),u.prototype.processChunk=function(d){if(d){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+d.data.length}l.prototype.processChunk.call(this,d)},a.exports=u},{"../utils":32,"./GenericWorker":28}],27:[function(n,a,o){var c=n("../utils"),l=n("./GenericWorker");function u(d){l.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,d.then(function(b){m.dataIsReady=!0,m.data=b,m.max=b&&b.length||0,m.type=c.getTypeOf(b),m.isPaused||m._tickAndRepeat()},function(b){m.error(b)})}c.inherits(u,l),u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this.data=null},u.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},u.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},u.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var d=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":d=this.data.substring(this.index,m);break;case"uint8array":d=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":d=this.data.slice(this.index,m)}return this.index=m,this.push({data:d,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=u},{"../utils":32,"./GenericWorker":28}],28:[function(n,a,o){function c(l){this.name=l||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(l){this.emit("data",l)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(l){this.emit("error",l)}return!0},error:function(l){return!this.isFinished&&(this.isPaused?this.generatedError=l:(this.isFinished=!0,this.emit("error",l),this.previous&&this.previous.error(l),this.cleanUp()),!0)},on:function(l,u){return this._listeners[l].push(u),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(l,u){if(this._listeners[l])for(var d=0;d<this._listeners[l].length;d++)this._listeners[l][d].call(this,u)},pipe:function(l){return l.registerPrevious(this)},registerPrevious:function(l){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=l.streamInfo,this.mergeStreamInfo(),this.previous=l;var u=this;return l.on("data",function(d){u.processChunk(d)}),l.on("end",function(){u.end()}),l.on("error",function(d){u.error(d)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var l=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),l=!0),this.previous&&this.previous.resume(),!l},flush:function(){},processChunk:function(l){this.push(l)},withStreamInfo:function(l,u){return this.extraStreamInfo[l]=u,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var l in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,l)&&(this.streamInfo[l]=this.extraStreamInfo[l])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var l="Worker "+this.name;return this.previous?this.previous+" -> "+l:l}},a.exports=c},{}],29:[function(n,a,o){var c=n("../utils"),l=n("./ConvertWorker"),u=n("./GenericWorker"),d=n("../base64"),m=n("../support"),b=n("../external"),x=null;if(m.nodestream)try{x=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function _(S,T){return new b.Promise(function(B,C){var D=[],z=S._internalType,U=S._outputType,Y=S._mimeType;S.on("data",function(X,O){D.push(X),T&&T(O)}).on("error",function(X){D=[],C(X)}).on("end",function(){try{var X=function(O,J,Z){switch(O){case"blob":return c.newBlob(c.transformTo("arraybuffer",J),Z);case"base64":return d.encode(J);default:return c.transformTo(O,J)}}(U,function(O,J){var Z,se=0,ie=null,F=0;for(Z=0;Z<J.length;Z++)F+=J[Z].length;switch(O){case"string":return J.join("");case"array":return Array.prototype.concat.apply([],J);case"uint8array":for(ie=new Uint8Array(F),Z=0;Z<J.length;Z++)ie.set(J[Z],se),se+=J[Z].length;return ie;case"nodebuffer":return Buffer$x.concat(J);default:throw new Error("concat : unsupported type '"+O+"'")}}(z,D),Y);B(X)}catch(O){C(O)}D=[]}).resume()})}function w(S,T,B){var C=T;switch(T){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=T,this._mimeType=B,c.checkSupport(C),this._worker=S.pipe(new l(C)),S.lock()}catch(D){this._worker=new u("error"),this._worker.error(D)}}w.prototype={accumulate:function(S){return _(this,S)},on:function(S,T){var B=this;return S==="data"?this._worker.on(S,function(C){T.call(B,C.data,C.meta)}):this._worker.on(S,function(){c.delay(T,arguments,B)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(S){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new x(this,{objectMode:this._outputType!=="nodebuffer"},S)}},a.exports=w},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,a,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer$x<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var c=new ArrayBuffer(0);try{o.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);l.append(c),o.blob=l.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(n,a,o){for(var c=n("./utils"),l=n("./support"),u=n("./nodejsUtils"),d=n("./stream/GenericWorker"),m=new Array(256),b=0;b<256;b++)m[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;m[254]=m[254]=1;function x(){d.call(this,"utf-8 decode"),this.leftOver=null}function _(){d.call(this,"utf-8 encode")}o.utf8encode=function(w){return l.nodebuffer?u.newBufferFrom(w,"utf-8"):function(S){var T,B,C,D,z,U=S.length,Y=0;for(D=0;D<U;D++)(64512&(B=S.charCodeAt(D)))==55296&&D+1<U&&(64512&(C=S.charCodeAt(D+1)))==56320&&(B=65536+(B-55296<<10)+(C-56320),D++),Y+=B<128?1:B<2048?2:B<65536?3:4;for(T=l.uint8array?new Uint8Array(Y):new Array(Y),D=z=0;z<Y;D++)(64512&(B=S.charCodeAt(D)))==55296&&D+1<U&&(64512&(C=S.charCodeAt(D+1)))==56320&&(B=65536+(B-55296<<10)+(C-56320),D++),B<128?T[z++]=B:(B<2048?T[z++]=192|B>>>6:(B<65536?T[z++]=224|B>>>12:(T[z++]=240|B>>>18,T[z++]=128|B>>>12&63),T[z++]=128|B>>>6&63),T[z++]=128|63&B);return T}(w)},o.utf8decode=function(w){return l.nodebuffer?c.transformTo("nodebuffer",w).toString("utf-8"):function(S){var T,B,C,D,z=S.length,U=new Array(2*z);for(T=B=0;T<z;)if((C=S[T++])<128)U[B++]=C;else if(4<(D=m[C]))U[B++]=65533,T+=D-1;else{for(C&=D===2?31:D===3?15:7;1<D&&T<z;)C=C<<6|63&S[T++],D--;1<D?U[B++]=65533:C<65536?U[B++]=C:(C-=65536,U[B++]=55296|C>>10&1023,U[B++]=56320|1023&C)}return U.length!==B&&(U.subarray?U=U.subarray(0,B):U.length=B),c.applyFromCharCode(U)}(w=c.transformTo(l.uint8array?"uint8array":"array",w))},c.inherits(x,d),x.prototype.processChunk=function(w){var S=c.transformTo(l.uint8array?"uint8array":"array",w.data);if(this.leftOver&&this.leftOver.length){if(l.uint8array){var T=S;(S=new Uint8Array(T.length+this.leftOver.length)).set(this.leftOver,0),S.set(T,this.leftOver.length)}else S=this.leftOver.concat(S);this.leftOver=null}var B=function(D,z){var U;for((z=z||D.length)>D.length&&(z=D.length),U=z-1;0<=U&&(192&D[U])==128;)U--;return U<0||U===0?z:U+m[D[U]]>z?U:z}(S),C=S;B!==S.length&&(l.uint8array?(C=S.subarray(0,B),this.leftOver=S.subarray(B,S.length)):(C=S.slice(0,B),this.leftOver=S.slice(B,S.length))),this.push({data:o.utf8decode(C),meta:w.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=x,c.inherits(_,d),_.prototype.processChunk=function(w){this.push({data:o.utf8encode(w.data),meta:w.meta})},o.Utf8EncodeWorker=_},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,a,o){var c=n("./support"),l=n("./base64"),u=n("./nodejsUtils"),d=n("./external");function m(T){return T}function b(T,B){for(var C=0;C<T.length;++C)B[C]=255&T.charCodeAt(C);return B}n("setimmediate"),o.newBlob=function(T,B){o.checkSupport("blob");try{return new Blob([T],{type:B})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(T),C.getBlob(B)}catch{throw new Error("Bug : can't construct the Blob.")}}};var x={stringifyByChunk:function(T,B,C){var D=[],z=0,U=T.length;if(U<=C)return String.fromCharCode.apply(null,T);for(;z<U;)B==="array"||B==="nodebuffer"?D.push(String.fromCharCode.apply(null,T.slice(z,Math.min(z+C,U)))):D.push(String.fromCharCode.apply(null,T.subarray(z,Math.min(z+C,U)))),z+=C;return D.join("")},stringifyByChar:function(T){for(var B="",C=0;C<T.length;C++)B+=String.fromCharCode(T[C]);return B},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,u.allocBuffer(1)).length===1}catch{return!1}}()}};function _(T){var B=65536,C=o.getTypeOf(T),D=!0;if(C==="uint8array"?D=x.applyCanBeUsed.uint8array:C==="nodebuffer"&&(D=x.applyCanBeUsed.nodebuffer),D)for(;1<B;)try{return x.stringifyByChunk(T,C,B)}catch{B=Math.floor(B/2)}return x.stringifyByChar(T)}function w(T,B){for(var C=0;C<T.length;C++)B[C]=T[C];return B}o.applyFromCharCode=_;var S={};S.string={string:m,array:function(T){return b(T,new Array(T.length))},arraybuffer:function(T){return S.string.uint8array(T).buffer},uint8array:function(T){return b(T,new Uint8Array(T.length))},nodebuffer:function(T){return b(T,u.allocBuffer(T.length))}},S.array={string:_,array:m,arraybuffer:function(T){return new Uint8Array(T).buffer},uint8array:function(T){return new Uint8Array(T)},nodebuffer:function(T){return u.newBufferFrom(T)}},S.arraybuffer={string:function(T){return _(new Uint8Array(T))},array:function(T){return w(new Uint8Array(T),new Array(T.byteLength))},arraybuffer:m,uint8array:function(T){return new Uint8Array(T)},nodebuffer:function(T){return u.newBufferFrom(new Uint8Array(T))}},S.uint8array={string:_,array:function(T){return w(T,new Array(T.length))},arraybuffer:function(T){return T.buffer},uint8array:m,nodebuffer:function(T){return u.newBufferFrom(T)}},S.nodebuffer={string:_,array:function(T){return w(T,new Array(T.length))},arraybuffer:function(T){return S.nodebuffer.uint8array(T).buffer},uint8array:function(T){return w(T,new Uint8Array(T.length))},nodebuffer:m},o.transformTo=function(T,B){if(B=B||"",!T)return B;o.checkSupport(T);var C=o.getTypeOf(B);return S[C][T](B)},o.resolve=function(T){for(var B=T.split("/"),C=[],D=0;D<B.length;D++){var z=B[D];z==="."||z===""&&D!==0&&D!==B.length-1||(z===".."?C.pop():C.push(z))}return C.join("/")},o.getTypeOf=function(T){return typeof T=="string"?"string":Object.prototype.toString.call(T)==="[object Array]"?"array":c.nodebuffer&&u.isBuffer(T)?"nodebuffer":c.uint8array&&T instanceof Uint8Array?"uint8array":c.arraybuffer&&T instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(T){if(!c[T.toLowerCase()])throw new Error(T+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(T){var B,C,D="";for(C=0;C<(T||"").length;C++)D+="\\x"+((B=T.charCodeAt(C))<16?"0":"")+B.toString(16).toUpperCase();return D},o.delay=function(T,B,C){setImmediate(function(){T.apply(C||null,B||[])})},o.inherits=function(T,B){function C(){}C.prototype=B.prototype,T.prototype=new C},o.extend=function(){var T,B,C={};for(T=0;T<arguments.length;T++)for(B in arguments[T])Object.prototype.hasOwnProperty.call(arguments[T],B)&&C[B]===void 0&&(C[B]=arguments[T][B]);return C},o.prepareContent=function(T,B,C,D,z){return d.Promise.resolve(B).then(function(U){return c.blob&&(U instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(U))!==-1)&&typeof FileReader<"u"?new d.Promise(function(Y,X){var O=new FileReader;O.onload=function(J){Y(J.target.result)},O.onerror=function(J){X(J.target.error)},O.readAsArrayBuffer(U)}):U}).then(function(U){var Y=o.getTypeOf(U);return Y?(Y==="arraybuffer"?U=o.transformTo("uint8array",U):Y==="string"&&(z?U=l.decode(U):C&&D!==!0&&(U=function(X){return b(X,c.uint8array?new Uint8Array(X.length):new Array(X.length))}(U))),U):d.Promise.reject(new Error("Can't read the data of '"+T+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,a,o){var c=n("./reader/readerFor"),l=n("./utils"),u=n("./signature"),d=n("./zipEntry"),m=n("./support");function b(x){this.files=[],this.loadOptions=x}b.prototype={checkSignature:function(x){if(!this.reader.readAndCheckSignature(x)){this.reader.index-=4;var _=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+l.pretty(_)+", expected "+l.pretty(x)+")")}},isSignature:function(x,_){var w=this.reader.index;this.reader.setIndex(x);var S=this.reader.readString(4)===_;return this.reader.setIndex(w),S},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var x=this.reader.readData(this.zipCommentLength),_=m.uint8array?"uint8array":"array",w=l.transformTo(_,x);this.zipComment=this.loadOptions.decodeFileName(w)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var x,_,w,S=this.zip64EndOfCentralSize-44;0<S;)x=this.reader.readInt(2),_=this.reader.readInt(4),w=this.reader.readData(_),this.zip64ExtensibleData[x]={id:x,length:_,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var x,_;for(x=0;x<this.files.length;x++)_=this.files[x],this.reader.setIndex(_.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),_.readLocalPart(this.reader),_.handleUTF8(),_.processAttributes()},readCentralDir:function(){var x;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(u.CENTRAL_FILE_HEADER);)(x=new d({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(x);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var x=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(x<0)throw this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(x);var _=x;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,(x=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(x),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var w=this.centralDirOffset+this.centralDirSize;this.zip64&&(w+=20,w+=12+this.zip64EndOfCentralSize);var S=_-w;if(0<S)this.isSignature(_,u.CENTRAL_FILE_HEADER)||(this.reader.zero=S);else if(S<0)throw new Error("Corrupted zip: missing "+Math.abs(S)+" bytes.")},prepareReader:function(x){this.reader=c(x)},load:function(x){this.prepareReader(x),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,a,o){var c=n("./reader/readerFor"),l=n("./utils"),u=n("./compressedObject"),d=n("./crc32"),m=n("./utf8"),b=n("./compressions"),x=n("./support");function _(w,S){this.options=w,this.loadOptions=S}_.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(w){var S,T;if(w.skip(22),this.fileNameLength=w.readInt(2),T=w.readInt(2),this.fileName=w.readData(this.fileNameLength),w.skip(T),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((S=function(B){for(var C in b)if(Object.prototype.hasOwnProperty.call(b,C)&&b[C].magic===B)return b[C];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+l.pretty(this.compressionMethod)+" unknown (inner file : "+l.transformTo("string",this.fileName)+")");this.decompressed=new u(this.compressedSize,this.uncompressedSize,this.crc32,S,w.readData(this.compressedSize))},readCentralPart:function(w){this.versionMadeBy=w.readInt(2),w.skip(2),this.bitFlag=w.readInt(2),this.compressionMethod=w.readString(2),this.date=w.readDate(),this.crc32=w.readInt(4),this.compressedSize=w.readInt(4),this.uncompressedSize=w.readInt(4);var S=w.readInt(2);if(this.extraFieldsLength=w.readInt(2),this.fileCommentLength=w.readInt(2),this.diskNumberStart=w.readInt(2),this.internalFileAttributes=w.readInt(2),this.externalFileAttributes=w.readInt(4),this.localHeaderOffset=w.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");w.skip(S),this.readExtraFields(w),this.parseZIP64ExtraField(w),this.fileComment=w.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var w=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),w==0&&(this.dosPermissions=63&this.externalFileAttributes),w==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var w=c(this.extraFields[1].value);this.uncompressedSize===l.MAX_VALUE_32BITS&&(this.uncompressedSize=w.readInt(8)),this.compressedSize===l.MAX_VALUE_32BITS&&(this.compressedSize=w.readInt(8)),this.localHeaderOffset===l.MAX_VALUE_32BITS&&(this.localHeaderOffset=w.readInt(8)),this.diskNumberStart===l.MAX_VALUE_32BITS&&(this.diskNumberStart=w.readInt(4))}},readExtraFields:function(w){var S,T,B,C=w.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});w.index+4<C;)S=w.readInt(2),T=w.readInt(2),B=w.readData(T),this.extraFields[S]={id:S,length:T,value:B};w.setIndex(C)},handleUTF8:function(){var w=x.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var S=this.findExtraFieldUnicodePath();if(S!==null)this.fileNameStr=S;else{var T=l.transformTo(w,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(T)}var B=this.findExtraFieldUnicodeComment();if(B!==null)this.fileCommentStr=B;else{var C=l.transformTo(w,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var w=this.extraFields[28789];if(w){var S=c(w.value);return S.readInt(1)!==1||d(this.fileName)!==S.readInt(4)?null:m.utf8decode(S.readData(w.length-5))}return null},findExtraFieldUnicodeComment:function(){var w=this.extraFields[25461];if(w){var S=c(w.value);return S.readInt(1)!==1||d(this.fileComment)!==S.readInt(4)?null:m.utf8decode(S.readData(w.length-5))}return null}},a.exports=_},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,a,o){function c(S,T,B){this.name=S,this.dir=B.dir,this.date=B.date,this.comment=B.comment,this.unixPermissions=B.unixPermissions,this.dosPermissions=B.dosPermissions,this._data=T,this._dataBinary=B.binary,this.options={compression:B.compression,compressionOptions:B.compressionOptions}}var l=n("./stream/StreamHelper"),u=n("./stream/DataWorker"),d=n("./utf8"),m=n("./compressedObject"),b=n("./stream/GenericWorker");c.prototype={internalStream:function(S){var T=null,B="string";try{if(!S)throw new Error("No output type specified.");var C=(B=S.toLowerCase())==="string"||B==="text";B!=="binarystring"&&B!=="text"||(B="string"),T=this._decompressWorker();var D=!this._dataBinary;D&&!C&&(T=T.pipe(new d.Utf8EncodeWorker)),!D&&C&&(T=T.pipe(new d.Utf8DecodeWorker))}catch(z){(T=new b("error")).error(z)}return new l(T,B,"")},async:function(S,T){return this.internalStream(S).accumulate(T)},nodeStream:function(S,T){return this.internalStream(S||"nodebuffer").toNodejsStream(T)},_compressWorker:function(S,T){if(this._data instanceof m&&this._data.compression.magic===S.magic)return this._data.getCompressedWorker();var B=this._decompressWorker();return this._dataBinary||(B=B.pipe(new d.Utf8EncodeWorker)),m.createWorkerFrom(B,S,T)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof b?this._data:new u(this._data)}};for(var x=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],_=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},w=0;w<x.length;w++)c.prototype[x[w]]=_;a.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,a,o){(function(c){var l,u,d=c.MutationObserver||c.WebKitMutationObserver;if(d){var m=0,b=new d(S),x=c.document.createTextNode("");b.observe(x,{characterData:!0}),l=function(){x.data=m=++m%2}}else if(c.setImmediate||c.MessageChannel===void 0)l="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var T=c.document.createElement("script");T.onreadystatechange=function(){S(),T.onreadystatechange=null,T.parentNode.removeChild(T),T=null},c.document.documentElement.appendChild(T)}:function(){setTimeout(S,0)};else{var _=new c.MessageChannel;_.port1.onmessage=S,l=function(){_.port2.postMessage(0)}}var w=[];function S(){var T,B;u=!0;for(var C=w.length;C;){for(B=w,w=[],T=-1;++T<C;)B[T]();C=w.length}u=!1}a.exports=function(T){w.push(T)!==1||u||l()}}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,a,o){var c=n("immediate");function l(){}var u={},d=["REJECTED"],m=["FULFILLED"],b=["PENDING"];function x(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,C!==l&&T(this,C)}function _(C,D,z){this.promise=C,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}function w(C,D,z){c(function(){var U;try{U=D(z)}catch(Y){return u.reject(C,Y)}U===C?u.reject(C,new TypeError("Cannot resolve promise with itself")):u.resolve(C,U)})}function S(C){var D=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof D=="function")return function(){D.apply(C,arguments)}}function T(C,D){var z=!1;function U(O){z||(z=!0,u.reject(C,O))}function Y(O){z||(z=!0,u.resolve(C,O))}var X=B(function(){D(Y,U)});X.status==="error"&&U(X.value)}function B(C,D){var z={};try{z.value=C(D),z.status="success"}catch(U){z.status="error",z.value=U}return z}(a.exports=x).prototype.finally=function(C){if(typeof C!="function")return this;var D=this.constructor;return this.then(function(z){return D.resolve(C()).then(function(){return z})},function(z){return D.resolve(C()).then(function(){throw z})})},x.prototype.catch=function(C){return this.then(null,C)},x.prototype.then=function(C,D){if(typeof C!="function"&&this.state===m||typeof D!="function"&&this.state===d)return this;var z=new this.constructor(l);return this.state!==b?w(z,this.state===m?C:D,this.outcome):this.queue.push(new _(z,C,D)),z},_.prototype.callFulfilled=function(C){u.resolve(this.promise,C)},_.prototype.otherCallFulfilled=function(C){w(this.promise,this.onFulfilled,C)},_.prototype.callRejected=function(C){u.reject(this.promise,C)},_.prototype.otherCallRejected=function(C){w(this.promise,this.onRejected,C)},u.resolve=function(C,D){var z=B(S,D);if(z.status==="error")return u.reject(C,z.value);var U=z.value;if(U)T(C,U);else{C.state=m,C.outcome=D;for(var Y=-1,X=C.queue.length;++Y<X;)C.queue[Y].callFulfilled(D)}return C},u.reject=function(C,D){C.state=d,C.outcome=D;for(var z=-1,U=C.queue.length;++z<U;)C.queue[z].callRejected(D);return C},x.resolve=function(C){return C instanceof this?C:u.resolve(new this(l),C)},x.reject=function(C){var D=new this(l);return u.reject(D,C)},x.all=function(C){var D=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=C.length,U=!1;if(!z)return this.resolve([]);for(var Y=new Array(z),X=0,O=-1,J=new this(l);++O<z;)Z(C[O],O);return J;function Z(se,ie){D.resolve(se).then(function(F){Y[ie]=F,++X!==z||U||(U=!0,u.resolve(J,Y))},function(F){U||(U=!0,u.reject(J,F))})}},x.race=function(C){var D=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=C.length,U=!1;if(!z)return this.resolve([]);for(var Y=-1,X=new this(l);++Y<z;)O=C[Y],D.resolve(O).then(function(J){U||(U=!0,u.resolve(X,J))},function(J){U||(U=!0,u.reject(X,J))});var O;return X}},{immediate:36}],38:[function(n,a,o){var c={};(0,n("./lib/utils/common").assign)(c,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),a.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,a,o){var c=n("./zlib/deflate"),l=n("./utils/common"),u=n("./utils/strings"),d=n("./zlib/messages"),m=n("./zlib/zstream"),b=Object.prototype.toString,x=0,_=-1,w=0,S=8;function T(C){if(!(this instanceof T))return new T(C);this.options=l.assign({level:_,method:S,chunkSize:16384,windowBits:15,memLevel:8,strategy:w,to:""},C||{});var D=this.options;D.raw&&0<D.windowBits?D.windowBits=-D.windowBits:D.gzip&&0<D.windowBits&&D.windowBits<16&&(D.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var z=c.deflateInit2(this.strm,D.level,D.method,D.windowBits,D.memLevel,D.strategy);if(z!==x)throw new Error(d[z]);if(D.header&&c.deflateSetHeader(this.strm,D.header),D.dictionary){var U;if(U=typeof D.dictionary=="string"?u.string2buf(D.dictionary):b.call(D.dictionary)==="[object ArrayBuffer]"?new Uint8Array(D.dictionary):D.dictionary,(z=c.deflateSetDictionary(this.strm,U))!==x)throw new Error(d[z]);this._dict_set=!0}}function B(C,D){var z=new T(D);if(z.push(C,!0),z.err)throw z.msg||d[z.err];return z.result}T.prototype.push=function(C,D){var z,U,Y=this.strm,X=this.options.chunkSize;if(this.ended)return!1;U=D===~~D?D:D===!0?4:0,typeof C=="string"?Y.input=u.string2buf(C):b.call(C)==="[object ArrayBuffer]"?Y.input=new Uint8Array(C):Y.input=C,Y.next_in=0,Y.avail_in=Y.input.length;do{if(Y.avail_out===0&&(Y.output=new l.Buf8(X),Y.next_out=0,Y.avail_out=X),(z=c.deflate(Y,U))!==1&&z!==x)return this.onEnd(z),!(this.ended=!0);Y.avail_out!==0&&(Y.avail_in!==0||U!==4&&U!==2)||(this.options.to==="string"?this.onData(u.buf2binstring(l.shrinkBuf(Y.output,Y.next_out))):this.onData(l.shrinkBuf(Y.output,Y.next_out)))}while((0<Y.avail_in||Y.avail_out===0)&&z!==1);return U===4?(z=c.deflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===x):U!==2||(this.onEnd(x),!(Y.avail_out=0))},T.prototype.onData=function(C){this.chunks.push(C)},T.prototype.onEnd=function(C){C===x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},o.Deflate=T,o.deflate=B,o.deflateRaw=function(C,D){return(D=D||{}).raw=!0,B(C,D)},o.gzip=function(C,D){return(D=D||{}).gzip=!0,B(C,D)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,a,o){var c=n("./zlib/inflate"),l=n("./utils/common"),u=n("./utils/strings"),d=n("./zlib/constants"),m=n("./zlib/messages"),b=n("./zlib/zstream"),x=n("./zlib/gzheader"),_=Object.prototype.toString;function w(T){if(!(this instanceof w))return new w(T);this.options=l.assign({chunkSize:16384,windowBits:0,to:""},T||{});var B=this.options;B.raw&&0<=B.windowBits&&B.windowBits<16&&(B.windowBits=-B.windowBits,B.windowBits===0&&(B.windowBits=-15)),!(0<=B.windowBits&&B.windowBits<16)||T&&T.windowBits||(B.windowBits+=32),15<B.windowBits&&B.windowBits<48&&!(15&B.windowBits)&&(B.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var C=c.inflateInit2(this.strm,B.windowBits);if(C!==d.Z_OK)throw new Error(m[C]);this.header=new x,c.inflateGetHeader(this.strm,this.header)}function S(T,B){var C=new w(B);if(C.push(T,!0),C.err)throw C.msg||m[C.err];return C.result}w.prototype.push=function(T,B){var C,D,z,U,Y,X,O=this.strm,J=this.options.chunkSize,Z=this.options.dictionary,se=!1;if(this.ended)return!1;D=B===~~B?B:B===!0?d.Z_FINISH:d.Z_NO_FLUSH,typeof T=="string"?O.input=u.binstring2buf(T):_.call(T)==="[object ArrayBuffer]"?O.input=new Uint8Array(T):O.input=T,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new l.Buf8(J),O.next_out=0,O.avail_out=J),(C=c.inflate(O,d.Z_NO_FLUSH))===d.Z_NEED_DICT&&Z&&(X=typeof Z=="string"?u.string2buf(Z):_.call(Z)==="[object ArrayBuffer]"?new Uint8Array(Z):Z,C=c.inflateSetDictionary(this.strm,X)),C===d.Z_BUF_ERROR&&se===!0&&(C=d.Z_OK,se=!1),C!==d.Z_STREAM_END&&C!==d.Z_OK)return this.onEnd(C),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&C!==d.Z_STREAM_END&&(O.avail_in!==0||D!==d.Z_FINISH&&D!==d.Z_SYNC_FLUSH)||(this.options.to==="string"?(z=u.utf8border(O.output,O.next_out),U=O.next_out-z,Y=u.buf2string(O.output,z),O.next_out=U,O.avail_out=J-U,U&&l.arraySet(O.output,O.output,z,U,0),this.onData(Y)):this.onData(l.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(se=!0)}while((0<O.avail_in||O.avail_out===0)&&C!==d.Z_STREAM_END);return C===d.Z_STREAM_END&&(D=d.Z_FINISH),D===d.Z_FINISH?(C=c.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===d.Z_OK):D!==d.Z_SYNC_FLUSH||(this.onEnd(d.Z_OK),!(O.avail_out=0))},w.prototype.onData=function(T){this.chunks.push(T)},w.prototype.onEnd=function(T){T===d.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=T,this.msg=this.strm.msg},o.Inflate=w,o.inflate=S,o.inflateRaw=function(T,B){return(B=B||{}).raw=!0,S(T,B)},o.ungzip=S},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,a,o){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(d){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var b=m.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var x in b)b.hasOwnProperty(x)&&(d[x]=b[x])}}return d},o.shrinkBuf=function(d,m){return d.length===m?d:d.subarray?d.subarray(0,m):(d.length=m,d)};var l={arraySet:function(d,m,b,x,_){if(m.subarray&&d.subarray)d.set(m.subarray(b,b+x),_);else for(var w=0;w<x;w++)d[_+w]=m[b+w]},flattenChunks:function(d){var m,b,x,_,w,S;for(m=x=0,b=d.length;m<b;m++)x+=d[m].length;for(S=new Uint8Array(x),m=_=0,b=d.length;m<b;m++)w=d[m],S.set(w,_),_+=w.length;return S}},u={arraySet:function(d,m,b,x,_){for(var w=0;w<x;w++)d[_+w]=m[b+w]},flattenChunks:function(d){return[].concat.apply([],d)}};o.setTyped=function(d){d?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,l)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,u))},o.setTyped(c)},{}],42:[function(n,a,o){var c=n("./common"),l=!0,u=!0;try{String.fromCharCode.apply(null,[0])}catch{l=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u=!1}for(var d=new c.Buf8(256),m=0;m<256;m++)d[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function b(x,_){if(_<65537&&(x.subarray&&u||!x.subarray&&l))return String.fromCharCode.apply(null,c.shrinkBuf(x,_));for(var w="",S=0;S<_;S++)w+=String.fromCharCode(x[S]);return w}d[254]=d[254]=1,o.string2buf=function(x){var _,w,S,T,B,C=x.length,D=0;for(T=0;T<C;T++)(64512&(w=x.charCodeAt(T)))==55296&&T+1<C&&(64512&(S=x.charCodeAt(T+1)))==56320&&(w=65536+(w-55296<<10)+(S-56320),T++),D+=w<128?1:w<2048?2:w<65536?3:4;for(_=new c.Buf8(D),T=B=0;B<D;T++)(64512&(w=x.charCodeAt(T)))==55296&&T+1<C&&(64512&(S=x.charCodeAt(T+1)))==56320&&(w=65536+(w-55296<<10)+(S-56320),T++),w<128?_[B++]=w:(w<2048?_[B++]=192|w>>>6:(w<65536?_[B++]=224|w>>>12:(_[B++]=240|w>>>18,_[B++]=128|w>>>12&63),_[B++]=128|w>>>6&63),_[B++]=128|63&w);return _},o.buf2binstring=function(x){return b(x,x.length)},o.binstring2buf=function(x){for(var _=new c.Buf8(x.length),w=0,S=_.length;w<S;w++)_[w]=x.charCodeAt(w);return _},o.buf2string=function(x,_){var w,S,T,B,C=_||x.length,D=new Array(2*C);for(w=S=0;w<C;)if((T=x[w++])<128)D[S++]=T;else if(4<(B=d[T]))D[S++]=65533,w+=B-1;else{for(T&=B===2?31:B===3?15:7;1<B&&w<C;)T=T<<6|63&x[w++],B--;1<B?D[S++]=65533:T<65536?D[S++]=T:(T-=65536,D[S++]=55296|T>>10&1023,D[S++]=56320|1023&T)}return b(D,S)},o.utf8border=function(x,_){var w;for((_=_||x.length)>x.length&&(_=x.length),w=_-1;0<=w&&(192&x[w])==128;)w--;return w<0||w===0?_:w+d[x[w]]>_?w:_}},{"./common":41}],43:[function(n,a,o){a.exports=function(c,l,u,d){for(var m=65535&c|0,b=c>>>16&65535|0,x=0;u!==0;){for(u-=x=2e3<u?2e3:u;b=b+(m=m+l[d++]|0)|0,--x;);m%=65521,b%=65521}return m|b<<16|0}},{}],44:[function(n,a,o){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,a,o){var c=function(){for(var l,u=[],d=0;d<256;d++){l=d;for(var m=0;m<8;m++)l=1&l?3988292384^l>>>1:l>>>1;u[d]=l}return u}();a.exports=function(l,u,d,m){var b=c,x=m+d;l^=-1;for(var _=m;_<x;_++)l=l>>>8^b[255&(l^u[_])];return-1^l}},{}],46:[function(n,a,o){var c,l=n("../utils/common"),u=n("./trees"),d=n("./adler32"),m=n("./crc32"),b=n("./messages"),x=0,_=4,w=0,S=-2,T=-1,B=4,C=2,D=8,z=9,U=286,Y=30,X=19,O=2*U+1,J=15,Z=3,se=258,ie=se+Z+1,F=42,k=113,y=1,A=2,I=3,P=4;function H(ee,ge){return ee.msg=b[ge],ge}function q(ee){return(ee<<1)-(4<ee?9:0)}function j(ee){for(var ge=ee.length;0<=--ge;)ee[ge]=0}function M(ee){var ge=ee.state,Ee=ge.pending;Ee>ee.avail_out&&(Ee=ee.avail_out),Ee!==0&&(l.arraySet(ee.output,ge.pending_buf,ge.pending_out,Ee,ee.next_out),ee.next_out+=Ee,ge.pending_out+=Ee,ee.total_out+=Ee,ee.avail_out-=Ee,ge.pending-=Ee,ge.pending===0&&(ge.pending_out=0))}function E(ee,ge){u._tr_flush_block(ee,0<=ee.block_start?ee.block_start:-1,ee.strstart-ee.block_start,ge),ee.block_start=ee.strstart,M(ee.strm)}function L(ee,ge){ee.pending_buf[ee.pending++]=ge}function le(ee,ge){ee.pending_buf[ee.pending++]=ge>>>8&255,ee.pending_buf[ee.pending++]=255&ge}function Q(ee,ge){var Ee,be,xe=ee.max_chain_length,ve=ee.strstart,Se=ee.prev_length,ke=ee.nice_match,Ce=ee.strstart>ee.w_size-ie?ee.strstart-(ee.w_size-ie):0,Re=ee.window,Le=ee.w_mask,je=ee.prev,Pe=ee.strstart+se,me=Re[ve+Se-1],ne=Re[ve+Se];ee.prev_length>=ee.good_match&&(xe>>=2),ke>ee.lookahead&&(ke=ee.lookahead);do if(Re[(Ee=ge)+Se]===ne&&Re[Ee+Se-1]===me&&Re[Ee]===Re[ve]&&Re[++Ee]===Re[ve+1]){ve+=2,Ee++;do;while(Re[++ve]===Re[++Ee]&&Re[++ve]===Re[++Ee]&&Re[++ve]===Re[++Ee]&&Re[++ve]===Re[++Ee]&&Re[++ve]===Re[++Ee]&&Re[++ve]===Re[++Ee]&&Re[++ve]===Re[++Ee]&&Re[++ve]===Re[++Ee]&&ve<Pe);if(be=se-(Pe-ve),ve=Pe-se,Se<be){if(ee.match_start=ge,ke<=(Se=be))break;me=Re[ve+Se-1],ne=Re[ve+Se]}}while((ge=je[ge&Le])>Ce&&--xe!=0);return Se<=ee.lookahead?Se:ee.lookahead}function ce(ee){var ge,Ee,be,xe,ve,Se,ke,Ce,Re,Le,je=ee.w_size;do{if(xe=ee.window_size-ee.lookahead-ee.strstart,ee.strstart>=je+(je-ie)){for(l.arraySet(ee.window,ee.window,je,je,0),ee.match_start-=je,ee.strstart-=je,ee.block_start-=je,ge=Ee=ee.hash_size;be=ee.head[--ge],ee.head[ge]=je<=be?be-je:0,--Ee;);for(ge=Ee=je;be=ee.prev[--ge],ee.prev[ge]=je<=be?be-je:0,--Ee;);xe+=je}if(ee.strm.avail_in===0)break;if(Se=ee.strm,ke=ee.window,Ce=ee.strstart+ee.lookahead,Re=xe,Le=void 0,Le=Se.avail_in,Re<Le&&(Le=Re),Ee=Le===0?0:(Se.avail_in-=Le,l.arraySet(ke,Se.input,Se.next_in,Le,Ce),Se.state.wrap===1?Se.adler=d(Se.adler,ke,Le,Ce):Se.state.wrap===2&&(Se.adler=m(Se.adler,ke,Le,Ce)),Se.next_in+=Le,Se.total_in+=Le,Le),ee.lookahead+=Ee,ee.lookahead+ee.insert>=Z)for(ve=ee.strstart-ee.insert,ee.ins_h=ee.window[ve],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ve+1])&ee.hash_mask;ee.insert&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ve+Z-1])&ee.hash_mask,ee.prev[ve&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ve,ve++,ee.insert--,!(ee.lookahead+ee.insert<Z)););}while(ee.lookahead<ie&&ee.strm.avail_in!==0)}function fe(ee,ge){for(var Ee,be;;){if(ee.lookahead<ie){if(ce(ee),ee.lookahead<ie&&ge===x)return y;if(ee.lookahead===0)break}if(Ee=0,ee.lookahead>=Z&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+Z-1])&ee.hash_mask,Ee=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),Ee!==0&&ee.strstart-Ee<=ee.w_size-ie&&(ee.match_length=Q(ee,Ee)),ee.match_length>=Z)if(be=u._tr_tally(ee,ee.strstart-ee.match_start,ee.match_length-Z),ee.lookahead-=ee.match_length,ee.match_length<=ee.max_lazy_match&&ee.lookahead>=Z){for(ee.match_length--;ee.strstart++,ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+Z-1])&ee.hash_mask,Ee=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart,--ee.match_length!=0;);ee.strstart++}else ee.strstart+=ee.match_length,ee.match_length=0,ee.ins_h=ee.window[ee.strstart],ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+1])&ee.hash_mask;else be=u._tr_tally(ee,0,ee.window[ee.strstart]),ee.lookahead--,ee.strstart++;if(be&&(E(ee,!1),ee.strm.avail_out===0))return y}return ee.insert=ee.strstart<Z-1?ee.strstart:Z-1,ge===_?(E(ee,!0),ee.strm.avail_out===0?I:P):ee.last_lit&&(E(ee,!1),ee.strm.avail_out===0)?y:A}function oe(ee,ge){for(var Ee,be,xe;;){if(ee.lookahead<ie){if(ce(ee),ee.lookahead<ie&&ge===x)return y;if(ee.lookahead===0)break}if(Ee=0,ee.lookahead>=Z&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+Z-1])&ee.hash_mask,Ee=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),ee.prev_length=ee.match_length,ee.prev_match=ee.match_start,ee.match_length=Z-1,Ee!==0&&ee.prev_length<ee.max_lazy_match&&ee.strstart-Ee<=ee.w_size-ie&&(ee.match_length=Q(ee,Ee),ee.match_length<=5&&(ee.strategy===1||ee.match_length===Z&&4096<ee.strstart-ee.match_start)&&(ee.match_length=Z-1)),ee.prev_length>=Z&&ee.match_length<=ee.prev_length){for(xe=ee.strstart+ee.lookahead-Z,be=u._tr_tally(ee,ee.strstart-1-ee.prev_match,ee.prev_length-Z),ee.lookahead-=ee.prev_length-1,ee.prev_length-=2;++ee.strstart<=xe&&(ee.ins_h=(ee.ins_h<<ee.hash_shift^ee.window[ee.strstart+Z-1])&ee.hash_mask,Ee=ee.prev[ee.strstart&ee.w_mask]=ee.head[ee.ins_h],ee.head[ee.ins_h]=ee.strstart),--ee.prev_length!=0;);if(ee.match_available=0,ee.match_length=Z-1,ee.strstart++,be&&(E(ee,!1),ee.strm.avail_out===0))return y}else if(ee.match_available){if((be=u._tr_tally(ee,0,ee.window[ee.strstart-1]))&&E(ee,!1),ee.strstart++,ee.lookahead--,ee.strm.avail_out===0)return y}else ee.match_available=1,ee.strstart++,ee.lookahead--}return ee.match_available&&(be=u._tr_tally(ee,0,ee.window[ee.strstart-1]),ee.match_available=0),ee.insert=ee.strstart<Z-1?ee.strstart:Z-1,ge===_?(E(ee,!0),ee.strm.avail_out===0?I:P):ee.last_lit&&(E(ee,!1),ee.strm.avail_out===0)?y:A}function de(ee,ge,Ee,be,xe){this.good_length=ee,this.max_lazy=ge,this.nice_length=Ee,this.max_chain=be,this.func=xe}function ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new l.Buf16(2*O),this.dyn_dtree=new l.Buf16(2*(2*Y+1)),this.bl_tree=new l.Buf16(2*(2*X+1)),j(this.dyn_ltree),j(this.dyn_dtree),j(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new l.Buf16(J+1),this.heap=new l.Buf16(2*U+1),j(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new l.Buf16(2*U+1),j(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function he(ee){var ge;return ee&&ee.state?(ee.total_in=ee.total_out=0,ee.data_type=C,(ge=ee.state).pending=0,ge.pending_out=0,ge.wrap<0&&(ge.wrap=-ge.wrap),ge.status=ge.wrap?F:k,ee.adler=ge.wrap===2?0:1,ge.last_flush=x,u._tr_init(ge),w):H(ee,S)}function te(ee){var ge=he(ee);return ge===w&&function(Ee){Ee.window_size=2*Ee.w_size,j(Ee.head),Ee.max_lazy_match=c[Ee.level].max_lazy,Ee.good_match=c[Ee.level].good_length,Ee.nice_match=c[Ee.level].nice_length,Ee.max_chain_length=c[Ee.level].max_chain,Ee.strstart=0,Ee.block_start=0,Ee.lookahead=0,Ee.insert=0,Ee.match_length=Ee.prev_length=Z-1,Ee.match_available=0,Ee.ins_h=0}(ee.state),ge}function pe(ee,ge,Ee,be,xe,ve){if(!ee)return S;var Se=1;if(ge===T&&(ge=6),be<0?(Se=0,be=-be):15<be&&(Se=2,be-=16),xe<1||z<xe||Ee!==D||be<8||15<be||ge<0||9<ge||ve<0||B<ve)return H(ee,S);be===8&&(be=9);var ke=new ae;return(ee.state=ke).strm=ee,ke.wrap=Se,ke.gzhead=null,ke.w_bits=be,ke.w_size=1<<ke.w_bits,ke.w_mask=ke.w_size-1,ke.hash_bits=xe+7,ke.hash_size=1<<ke.hash_bits,ke.hash_mask=ke.hash_size-1,ke.hash_shift=~~((ke.hash_bits+Z-1)/Z),ke.window=new l.Buf8(2*ke.w_size),ke.head=new l.Buf16(ke.hash_size),ke.prev=new l.Buf16(ke.w_size),ke.lit_bufsize=1<<xe+6,ke.pending_buf_size=4*ke.lit_bufsize,ke.pending_buf=new l.Buf8(ke.pending_buf_size),ke.d_buf=1*ke.lit_bufsize,ke.l_buf=3*ke.lit_bufsize,ke.level=ge,ke.strategy=ve,ke.method=Ee,te(ee)}c=[new de(0,0,0,0,function(ee,ge){var Ee=65535;for(Ee>ee.pending_buf_size-5&&(Ee=ee.pending_buf_size-5);;){if(ee.lookahead<=1){if(ce(ee),ee.lookahead===0&&ge===x)return y;if(ee.lookahead===0)break}ee.strstart+=ee.lookahead,ee.lookahead=0;var be=ee.block_start+Ee;if((ee.strstart===0||ee.strstart>=be)&&(ee.lookahead=ee.strstart-be,ee.strstart=be,E(ee,!1),ee.strm.avail_out===0)||ee.strstart-ee.block_start>=ee.w_size-ie&&(E(ee,!1),ee.strm.avail_out===0))return y}return ee.insert=0,ge===_?(E(ee,!0),ee.strm.avail_out===0?I:P):(ee.strstart>ee.block_start&&(E(ee,!1),ee.strm.avail_out),y)}),new de(4,4,8,4,fe),new de(4,5,16,8,fe),new de(4,6,32,32,fe),new de(4,4,16,16,oe),new de(8,16,32,32,oe),new de(8,16,128,128,oe),new de(8,32,128,256,oe),new de(32,128,258,1024,oe),new de(32,258,258,4096,oe)],o.deflateInit=function(ee,ge){return pe(ee,ge,D,15,8,0)},o.deflateInit2=pe,o.deflateReset=te,o.deflateResetKeep=he,o.deflateSetHeader=function(ee,ge){return ee&&ee.state?ee.state.wrap!==2?S:(ee.state.gzhead=ge,w):S},o.deflate=function(ee,ge){var Ee,be,xe,ve;if(!ee||!ee.state||5<ge||ge<0)return ee?H(ee,S):S;if(be=ee.state,!ee.output||!ee.input&&ee.avail_in!==0||be.status===666&&ge!==_)return H(ee,ee.avail_out===0?-5:S);if(be.strm=ee,Ee=be.last_flush,be.last_flush=ge,be.status===F)if(be.wrap===2)ee.adler=0,L(be,31),L(be,139),L(be,8),be.gzhead?(L(be,(be.gzhead.text?1:0)+(be.gzhead.hcrc?2:0)+(be.gzhead.extra?4:0)+(be.gzhead.name?8:0)+(be.gzhead.comment?16:0)),L(be,255&be.gzhead.time),L(be,be.gzhead.time>>8&255),L(be,be.gzhead.time>>16&255),L(be,be.gzhead.time>>24&255),L(be,be.level===9?2:2<=be.strategy||be.level<2?4:0),L(be,255&be.gzhead.os),be.gzhead.extra&&be.gzhead.extra.length&&(L(be,255&be.gzhead.extra.length),L(be,be.gzhead.extra.length>>8&255)),be.gzhead.hcrc&&(ee.adler=m(ee.adler,be.pending_buf,be.pending,0)),be.gzindex=0,be.status=69):(L(be,0),L(be,0),L(be,0),L(be,0),L(be,0),L(be,be.level===9?2:2<=be.strategy||be.level<2?4:0),L(be,3),be.status=k);else{var Se=D+(be.w_bits-8<<4)<<8;Se|=(2<=be.strategy||be.level<2?0:be.level<6?1:be.level===6?2:3)<<6,be.strstart!==0&&(Se|=32),Se+=31-Se%31,be.status=k,le(be,Se),be.strstart!==0&&(le(be,ee.adler>>>16),le(be,65535&ee.adler)),ee.adler=1}if(be.status===69)if(be.gzhead.extra){for(xe=be.pending;be.gzindex<(65535&be.gzhead.extra.length)&&(be.pending!==be.pending_buf_size||(be.gzhead.hcrc&&be.pending>xe&&(ee.adler=m(ee.adler,be.pending_buf,be.pending-xe,xe)),M(ee),xe=be.pending,be.pending!==be.pending_buf_size));)L(be,255&be.gzhead.extra[be.gzindex]),be.gzindex++;be.gzhead.hcrc&&be.pending>xe&&(ee.adler=m(ee.adler,be.pending_buf,be.pending-xe,xe)),be.gzindex===be.gzhead.extra.length&&(be.gzindex=0,be.status=73)}else be.status=73;if(be.status===73)if(be.gzhead.name){xe=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>xe&&(ee.adler=m(ee.adler,be.pending_buf,be.pending-xe,xe)),M(ee),xe=be.pending,be.pending===be.pending_buf_size)){ve=1;break}ve=be.gzindex<be.gzhead.name.length?255&be.gzhead.name.charCodeAt(be.gzindex++):0,L(be,ve)}while(ve!==0);be.gzhead.hcrc&&be.pending>xe&&(ee.adler=m(ee.adler,be.pending_buf,be.pending-xe,xe)),ve===0&&(be.gzindex=0,be.status=91)}else be.status=91;if(be.status===91)if(be.gzhead.comment){xe=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>xe&&(ee.adler=m(ee.adler,be.pending_buf,be.pending-xe,xe)),M(ee),xe=be.pending,be.pending===be.pending_buf_size)){ve=1;break}ve=be.gzindex<be.gzhead.comment.length?255&be.gzhead.comment.charCodeAt(be.gzindex++):0,L(be,ve)}while(ve!==0);be.gzhead.hcrc&&be.pending>xe&&(ee.adler=m(ee.adler,be.pending_buf,be.pending-xe,xe)),ve===0&&(be.status=103)}else be.status=103;if(be.status===103&&(be.gzhead.hcrc?(be.pending+2>be.pending_buf_size&&M(ee),be.pending+2<=be.pending_buf_size&&(L(be,255&ee.adler),L(be,ee.adler>>8&255),ee.adler=0,be.status=k)):be.status=k),be.pending!==0){if(M(ee),ee.avail_out===0)return be.last_flush=-1,w}else if(ee.avail_in===0&&q(ge)<=q(Ee)&&ge!==_)return H(ee,-5);if(be.status===666&&ee.avail_in!==0)return H(ee,-5);if(ee.avail_in!==0||be.lookahead!==0||ge!==x&&be.status!==666){var ke=be.strategy===2?function(Ce,Re){for(var Le;;){if(Ce.lookahead===0&&(ce(Ce),Ce.lookahead===0)){if(Re===x)return y;break}if(Ce.match_length=0,Le=u._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++,Le&&(E(Ce,!1),Ce.strm.avail_out===0))return y}return Ce.insert=0,Re===_?(E(Ce,!0),Ce.strm.avail_out===0?I:P):Ce.last_lit&&(E(Ce,!1),Ce.strm.avail_out===0)?y:A}(be,ge):be.strategy===3?function(Ce,Re){for(var Le,je,Pe,me,ne=Ce.window;;){if(Ce.lookahead<=se){if(ce(Ce),Ce.lookahead<=se&&Re===x)return y;if(Ce.lookahead===0)break}if(Ce.match_length=0,Ce.lookahead>=Z&&0<Ce.strstart&&(je=ne[Pe=Ce.strstart-1])===ne[++Pe]&&je===ne[++Pe]&&je===ne[++Pe]){me=Ce.strstart+se;do;while(je===ne[++Pe]&&je===ne[++Pe]&&je===ne[++Pe]&&je===ne[++Pe]&&je===ne[++Pe]&&je===ne[++Pe]&&je===ne[++Pe]&&je===ne[++Pe]&&Pe<me);Ce.match_length=se-(me-Pe),Ce.match_length>Ce.lookahead&&(Ce.match_length=Ce.lookahead)}if(Ce.match_length>=Z?(Le=u._tr_tally(Ce,1,Ce.match_length-Z),Ce.lookahead-=Ce.match_length,Ce.strstart+=Ce.match_length,Ce.match_length=0):(Le=u._tr_tally(Ce,0,Ce.window[Ce.strstart]),Ce.lookahead--,Ce.strstart++),Le&&(E(Ce,!1),Ce.strm.avail_out===0))return y}return Ce.insert=0,Re===_?(E(Ce,!0),Ce.strm.avail_out===0?I:P):Ce.last_lit&&(E(Ce,!1),Ce.strm.avail_out===0)?y:A}(be,ge):c[be.level].func(be,ge);if(ke!==I&&ke!==P||(be.status=666),ke===y||ke===I)return ee.avail_out===0&&(be.last_flush=-1),w;if(ke===A&&(ge===1?u._tr_align(be):ge!==5&&(u._tr_stored_block(be,0,0,!1),ge===3&&(j(be.head),be.lookahead===0&&(be.strstart=0,be.block_start=0,be.insert=0))),M(ee),ee.avail_out===0))return be.last_flush=-1,w}return ge!==_?w:be.wrap<=0?1:(be.wrap===2?(L(be,255&ee.adler),L(be,ee.adler>>8&255),L(be,ee.adler>>16&255),L(be,ee.adler>>24&255),L(be,255&ee.total_in),L(be,ee.total_in>>8&255),L(be,ee.total_in>>16&255),L(be,ee.total_in>>24&255)):(le(be,ee.adler>>>16),le(be,65535&ee.adler)),M(ee),0<be.wrap&&(be.wrap=-be.wrap),be.pending!==0?w:1)},o.deflateEnd=function(ee){var ge;return ee&&ee.state?(ge=ee.state.status)!==F&&ge!==69&&ge!==73&&ge!==91&&ge!==103&&ge!==k&&ge!==666?H(ee,S):(ee.state=null,ge===k?H(ee,-3):w):S},o.deflateSetDictionary=function(ee,ge){var Ee,be,xe,ve,Se,ke,Ce,Re,Le=ge.length;if(!ee||!ee.state||(ve=(Ee=ee.state).wrap)===2||ve===1&&Ee.status!==F||Ee.lookahead)return S;for(ve===1&&(ee.adler=d(ee.adler,ge,Le,0)),Ee.wrap=0,Le>=Ee.w_size&&(ve===0&&(j(Ee.head),Ee.strstart=0,Ee.block_start=0,Ee.insert=0),Re=new l.Buf8(Ee.w_size),l.arraySet(Re,ge,Le-Ee.w_size,Ee.w_size,0),ge=Re,Le=Ee.w_size),Se=ee.avail_in,ke=ee.next_in,Ce=ee.input,ee.avail_in=Le,ee.next_in=0,ee.input=ge,ce(Ee);Ee.lookahead>=Z;){for(be=Ee.strstart,xe=Ee.lookahead-(Z-1);Ee.ins_h=(Ee.ins_h<<Ee.hash_shift^Ee.window[be+Z-1])&Ee.hash_mask,Ee.prev[be&Ee.w_mask]=Ee.head[Ee.ins_h],Ee.head[Ee.ins_h]=be,be++,--xe;);Ee.strstart=be,Ee.lookahead=Z-1,ce(Ee)}return Ee.strstart+=Ee.lookahead,Ee.block_start=Ee.strstart,Ee.insert=Ee.lookahead,Ee.lookahead=0,Ee.match_length=Ee.prev_length=Z-1,Ee.match_available=0,ee.next_in=ke,ee.input=Ce,ee.avail_in=Se,Ee.wrap=ve,w},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,a,o){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,a,o){a.exports=function(c,l){var u,d,m,b,x,_,w,S,T,B,C,D,z,U,Y,X,O,J,Z,se,ie,F,k,y,A;u=c.state,d=c.next_in,y=c.input,m=d+(c.avail_in-5),b=c.next_out,A=c.output,x=b-(l-c.avail_out),_=b+(c.avail_out-257),w=u.dmax,S=u.wsize,T=u.whave,B=u.wnext,C=u.window,D=u.hold,z=u.bits,U=u.lencode,Y=u.distcode,X=(1<<u.lenbits)-1,O=(1<<u.distbits)-1;e:do{z<15&&(D+=y[d++]<<z,z+=8,D+=y[d++]<<z,z+=8),J=U[D&X];t:for(;;){if(D>>>=Z=J>>>24,z-=Z,(Z=J>>>16&255)===0)A[b++]=65535&J;else{if(!(16&Z)){if(!(64&Z)){J=U[(65535&J)+(D&(1<<Z)-1)];continue t}if(32&Z){u.mode=12;break e}c.msg="invalid literal/length code",u.mode=30;break e}se=65535&J,(Z&=15)&&(z<Z&&(D+=y[d++]<<z,z+=8),se+=D&(1<<Z)-1,D>>>=Z,z-=Z),z<15&&(D+=y[d++]<<z,z+=8,D+=y[d++]<<z,z+=8),J=Y[D&O];r:for(;;){if(D>>>=Z=J>>>24,z-=Z,!(16&(Z=J>>>16&255))){if(!(64&Z)){J=Y[(65535&J)+(D&(1<<Z)-1)];continue r}c.msg="invalid distance code",u.mode=30;break e}if(ie=65535&J,z<(Z&=15)&&(D+=y[d++]<<z,(z+=8)<Z&&(D+=y[d++]<<z,z+=8)),w<(ie+=D&(1<<Z)-1)){c.msg="invalid distance too far back",u.mode=30;break e}if(D>>>=Z,z-=Z,(Z=b-x)<ie){if(T<(Z=ie-Z)&&u.sane){c.msg="invalid distance too far back",u.mode=30;break e}if(k=C,(F=0)===B){if(F+=S-Z,Z<se){for(se-=Z;A[b++]=C[F++],--Z;);F=b-ie,k=A}}else if(B<Z){if(F+=S+B-Z,(Z-=B)<se){for(se-=Z;A[b++]=C[F++],--Z;);if(F=0,B<se){for(se-=Z=B;A[b++]=C[F++],--Z;);F=b-ie,k=A}}}else if(F+=B-Z,Z<se){for(se-=Z;A[b++]=C[F++],--Z;);F=b-ie,k=A}for(;2<se;)A[b++]=k[F++],A[b++]=k[F++],A[b++]=k[F++],se-=3;se&&(A[b++]=k[F++],1<se&&(A[b++]=k[F++]))}else{for(F=b-ie;A[b++]=A[F++],A[b++]=A[F++],A[b++]=A[F++],2<(se-=3););se&&(A[b++]=A[F++],1<se&&(A[b++]=A[F++]))}break}}break}}while(d<m&&b<_);d-=se=z>>3,D&=(1<<(z-=se<<3))-1,c.next_in=d,c.next_out=b,c.avail_in=d<m?m-d+5:5-(d-m),c.avail_out=b<_?_-b+257:257-(b-_),u.hold=D,u.bits=z}},{}],49:[function(n,a,o){var c=n("../utils/common"),l=n("./adler32"),u=n("./crc32"),d=n("./inffast"),m=n("./inftrees"),b=1,x=2,_=0,w=-2,S=1,T=852,B=592;function C(F){return(F>>>24&255)+(F>>>8&65280)+((65280&F)<<8)+((255&F)<<24)}function D(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z(F){var k;return F&&F.state?(k=F.state,F.total_in=F.total_out=k.total=0,F.msg="",k.wrap&&(F.adler=1&k.wrap),k.mode=S,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new c.Buf32(T),k.distcode=k.distdyn=new c.Buf32(B),k.sane=1,k.back=-1,_):w}function U(F){var k;return F&&F.state?((k=F.state).wsize=0,k.whave=0,k.wnext=0,z(F)):w}function Y(F,k){var y,A;return F&&F.state?(A=F.state,k<0?(y=0,k=-k):(y=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?w:(A.window!==null&&A.wbits!==k&&(A.window=null),A.wrap=y,A.wbits=k,U(F))):w}function X(F,k){var y,A;return F?(A=new D,(F.state=A).window=null,(y=Y(F,k))!==_&&(F.state=null),y):w}var O,J,Z=!0;function se(F){if(Z){var k;for(O=new c.Buf32(512),J=new c.Buf32(32),k=0;k<144;)F.lens[k++]=8;for(;k<256;)F.lens[k++]=9;for(;k<280;)F.lens[k++]=7;for(;k<288;)F.lens[k++]=8;for(m(b,F.lens,0,288,O,0,F.work,{bits:9}),k=0;k<32;)F.lens[k++]=5;m(x,F.lens,0,32,J,0,F.work,{bits:5}),Z=!1}F.lencode=O,F.lenbits=9,F.distcode=J,F.distbits=5}function ie(F,k,y,A){var I,P=F.state;return P.window===null&&(P.wsize=1<<P.wbits,P.wnext=0,P.whave=0,P.window=new c.Buf8(P.wsize)),A>=P.wsize?(c.arraySet(P.window,k,y-P.wsize,P.wsize,0),P.wnext=0,P.whave=P.wsize):(A<(I=P.wsize-P.wnext)&&(I=A),c.arraySet(P.window,k,y-A,I,P.wnext),(A-=I)?(c.arraySet(P.window,k,y-A,A,0),P.wnext=A,P.whave=P.wsize):(P.wnext+=I,P.wnext===P.wsize&&(P.wnext=0),P.whave<P.wsize&&(P.whave+=I))),0}o.inflateReset=U,o.inflateReset2=Y,o.inflateResetKeep=z,o.inflateInit=function(F){return X(F,15)},o.inflateInit2=X,o.inflate=function(F,k){var y,A,I,P,H,q,j,M,E,L,le,Q,ce,fe,oe,de,ae,he,te,pe,ee,ge,Ee,be,xe=0,ve=new c.Buf8(4),Se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!F||!F.state||!F.output||!F.input&&F.avail_in!==0)return w;(y=F.state).mode===12&&(y.mode=13),H=F.next_out,I=F.output,j=F.avail_out,P=F.next_in,A=F.input,q=F.avail_in,M=y.hold,E=y.bits,L=q,le=j,ge=_;e:for(;;)switch(y.mode){case S:if(y.wrap===0){y.mode=13;break}for(;E<16;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if(2&y.wrap&&M===35615){ve[y.check=0]=255&M,ve[1]=M>>>8&255,y.check=u(y.check,ve,2,0),E=M=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&M)<<8)+(M>>8))%31){F.msg="incorrect header check",y.mode=30;break}if((15&M)!=8){F.msg="unknown compression method",y.mode=30;break}if(E-=4,ee=8+(15&(M>>>=4)),y.wbits===0)y.wbits=ee;else if(ee>y.wbits){F.msg="invalid window size",y.mode=30;break}y.dmax=1<<ee,F.adler=y.check=1,y.mode=512&M?10:12,E=M=0;break;case 2:for(;E<16;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if(y.flags=M,(255&y.flags)!=8){F.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){F.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=M>>8&1),512&y.flags&&(ve[0]=255&M,ve[1]=M>>>8&255,y.check=u(y.check,ve,2,0)),E=M=0,y.mode=3;case 3:for(;E<32;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}y.head&&(y.head.time=M),512&y.flags&&(ve[0]=255&M,ve[1]=M>>>8&255,ve[2]=M>>>16&255,ve[3]=M>>>24&255,y.check=u(y.check,ve,4,0)),E=M=0,y.mode=4;case 4:for(;E<16;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}y.head&&(y.head.xflags=255&M,y.head.os=M>>8),512&y.flags&&(ve[0]=255&M,ve[1]=M>>>8&255,y.check=u(y.check,ve,2,0)),E=M=0,y.mode=5;case 5:if(1024&y.flags){for(;E<16;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}y.length=M,y.head&&(y.head.extra_len=M),512&y.flags&&(ve[0]=255&M,ve[1]=M>>>8&255,y.check=u(y.check,ve,2,0)),E=M=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&(q<(Q=y.length)&&(Q=q),Q&&(y.head&&(ee=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),c.arraySet(y.head.extra,A,P,Q,ee)),512&y.flags&&(y.check=u(y.check,A,Q,P)),q-=Q,P+=Q,y.length-=Q),y.length))break e;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(q===0)break e;for(Q=0;ee=A[P+Q++],y.head&&ee&&y.length<65536&&(y.head.name+=String.fromCharCode(ee)),ee&&Q<q;);if(512&y.flags&&(y.check=u(y.check,A,Q,P)),q-=Q,P+=Q,ee)break e}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(q===0)break e;for(Q=0;ee=A[P+Q++],y.head&&ee&&y.length<65536&&(y.head.comment+=String.fromCharCode(ee)),ee&&Q<q;);if(512&y.flags&&(y.check=u(y.check,A,Q,P)),q-=Q,P+=Q,ee)break e}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;E<16;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if(M!==(65535&y.check)){F.msg="header crc mismatch",y.mode=30;break}E=M=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),F.adler=y.check=0,y.mode=12;break;case 10:for(;E<32;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}F.adler=y.check=C(M),E=M=0,y.mode=11;case 11:if(y.havedict===0)return F.next_out=H,F.avail_out=j,F.next_in=P,F.avail_in=q,y.hold=M,y.bits=E,2;F.adler=y.check=1,y.mode=12;case 12:if(k===5||k===6)break e;case 13:if(y.last){M>>>=7&E,E-=7&E,y.mode=27;break}for(;E<3;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}switch(y.last=1&M,E-=1,3&(M>>>=1)){case 0:y.mode=14;break;case 1:if(se(y),y.mode=20,k!==6)break;M>>>=2,E-=2;break e;case 2:y.mode=17;break;case 3:F.msg="invalid block type",y.mode=30}M>>>=2,E-=2;break;case 14:for(M>>>=7&E,E-=7&E;E<32;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if((65535&M)!=(M>>>16^65535)){F.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&M,E=M=0,y.mode=15,k===6)break e;case 15:y.mode=16;case 16:if(Q=y.length){if(q<Q&&(Q=q),j<Q&&(Q=j),Q===0)break e;c.arraySet(I,A,P,Q,H),q-=Q,P+=Q,j-=Q,H+=Q,y.length-=Q;break}y.mode=12;break;case 17:for(;E<14;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if(y.nlen=257+(31&M),M>>>=5,E-=5,y.ndist=1+(31&M),M>>>=5,E-=5,y.ncode=4+(15&M),M>>>=4,E-=4,286<y.nlen||30<y.ndist){F.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;E<3;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}y.lens[Se[y.have++]]=7&M,M>>>=3,E-=3}for(;y.have<19;)y.lens[Se[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,Ee={bits:y.lenbits},ge=m(0,y.lens,0,19,y.lencode,0,y.work,Ee),y.lenbits=Ee.bits,ge){F.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;de=(xe=y.lencode[M&(1<<y.lenbits)-1])>>>16&255,ae=65535&xe,!((oe=xe>>>24)<=E);){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if(ae<16)M>>>=oe,E-=oe,y.lens[y.have++]=ae;else{if(ae===16){for(be=oe+2;E<be;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if(M>>>=oe,E-=oe,y.have===0){F.msg="invalid bit length repeat",y.mode=30;break}ee=y.lens[y.have-1],Q=3+(3&M),M>>>=2,E-=2}else if(ae===17){for(be=oe+3;E<be;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}E-=oe,ee=0,Q=3+(7&(M>>>=oe)),M>>>=3,E-=3}else{for(be=oe+7;E<be;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}E-=oe,ee=0,Q=11+(127&(M>>>=oe)),M>>>=7,E-=7}if(y.have+Q>y.nlen+y.ndist){F.msg="invalid bit length repeat",y.mode=30;break}for(;Q--;)y.lens[y.have++]=ee}}if(y.mode===30)break;if(y.lens[256]===0){F.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,Ee={bits:y.lenbits},ge=m(b,y.lens,0,y.nlen,y.lencode,0,y.work,Ee),y.lenbits=Ee.bits,ge){F.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,Ee={bits:y.distbits},ge=m(x,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,Ee),y.distbits=Ee.bits,ge){F.msg="invalid distances set",y.mode=30;break}if(y.mode=20,k===6)break e;case 20:y.mode=21;case 21:if(6<=q&&258<=j){F.next_out=H,F.avail_out=j,F.next_in=P,F.avail_in=q,y.hold=M,y.bits=E,d(F,le),H=F.next_out,I=F.output,j=F.avail_out,P=F.next_in,A=F.input,q=F.avail_in,M=y.hold,E=y.bits,y.mode===12&&(y.back=-1);break}for(y.back=0;de=(xe=y.lencode[M&(1<<y.lenbits)-1])>>>16&255,ae=65535&xe,!((oe=xe>>>24)<=E);){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if(de&&!(240&de)){for(he=oe,te=de,pe=ae;de=(xe=y.lencode[pe+((M&(1<<he+te)-1)>>he)])>>>16&255,ae=65535&xe,!(he+(oe=xe>>>24)<=E);){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}M>>>=he,E-=he,y.back+=he}if(M>>>=oe,E-=oe,y.back+=oe,y.length=ae,de===0){y.mode=26;break}if(32&de){y.back=-1,y.mode=12;break}if(64&de){F.msg="invalid literal/length code",y.mode=30;break}y.extra=15&de,y.mode=22;case 22:if(y.extra){for(be=y.extra;E<be;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}y.length+=M&(1<<y.extra)-1,M>>>=y.extra,E-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;de=(xe=y.distcode[M&(1<<y.distbits)-1])>>>16&255,ae=65535&xe,!((oe=xe>>>24)<=E);){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if(!(240&de)){for(he=oe,te=de,pe=ae;de=(xe=y.distcode[pe+((M&(1<<he+te)-1)>>he)])>>>16&255,ae=65535&xe,!(he+(oe=xe>>>24)<=E);){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}M>>>=he,E-=he,y.back+=he}if(M>>>=oe,E-=oe,y.back+=oe,64&de){F.msg="invalid distance code",y.mode=30;break}y.offset=ae,y.extra=15&de,y.mode=24;case 24:if(y.extra){for(be=y.extra;E<be;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}y.offset+=M&(1<<y.extra)-1,M>>>=y.extra,E-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){F.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(j===0)break e;if(Q=le-j,y.offset>Q){if((Q=y.offset-Q)>y.whave&&y.sane){F.msg="invalid distance too far back",y.mode=30;break}ce=Q>y.wnext?(Q-=y.wnext,y.wsize-Q):y.wnext-Q,Q>y.length&&(Q=y.length),fe=y.window}else fe=I,ce=H-y.offset,Q=y.length;for(j<Q&&(Q=j),j-=Q,y.length-=Q;I[H++]=fe[ce++],--Q;);y.length===0&&(y.mode=21);break;case 26:if(j===0)break e;I[H++]=y.length,j--,y.mode=21;break;case 27:if(y.wrap){for(;E<32;){if(q===0)break e;q--,M|=A[P++]<<E,E+=8}if(le-=j,F.total_out+=le,y.total+=le,le&&(F.adler=y.check=y.flags?u(y.check,I,le,H-le):l(y.check,I,le,H-le)),le=j,(y.flags?M:C(M))!==y.check){F.msg="incorrect data check",y.mode=30;break}E=M=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;E<32;){if(q===0)break e;q--,M+=A[P++]<<E,E+=8}if(M!==(4294967295&y.total)){F.msg="incorrect length check",y.mode=30;break}E=M=0}y.mode=29;case 29:ge=1;break e;case 30:ge=-3;break e;case 31:return-4;case 32:default:return w}return F.next_out=H,F.avail_out=j,F.next_in=P,F.avail_in=q,y.hold=M,y.bits=E,(y.wsize||le!==F.avail_out&&y.mode<30&&(y.mode<27||k!==4))&&ie(F,F.output,F.next_out,le-F.avail_out)?(y.mode=31,-4):(L-=F.avail_in,le-=F.avail_out,F.total_in+=L,F.total_out+=le,y.total+=le,y.wrap&&le&&(F.adler=y.check=y.flags?u(y.check,I,le,F.next_out-le):l(y.check,I,le,F.next_out-le)),F.data_type=y.bits+(y.last?64:0)+(y.mode===12?128:0)+(y.mode===20||y.mode===15?256:0),(L==0&&le===0||k===4)&&ge===_&&(ge=-5),ge)},o.inflateEnd=function(F){if(!F||!F.state)return w;var k=F.state;return k.window&&(k.window=null),F.state=null,_},o.inflateGetHeader=function(F,k){var y;return F&&F.state&&2&(y=F.state).wrap?((y.head=k).done=!1,_):w},o.inflateSetDictionary=function(F,k){var y,A=k.length;return F&&F.state?(y=F.state).wrap!==0&&y.mode!==11?w:y.mode===11&&l(1,k,A,0)!==y.check?-3:ie(F,k,A,A)?(y.mode=31,-4):(y.havedict=1,_):w},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,a,o){var c=n("../utils/common"),l=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],u=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(b,x,_,w,S,T,B,C){var D,z,U,Y,X,O,J,Z,se,ie=C.bits,F=0,k=0,y=0,A=0,I=0,P=0,H=0,q=0,j=0,M=0,E=null,L=0,le=new c.Buf16(16),Q=new c.Buf16(16),ce=null,fe=0;for(F=0;F<=15;F++)le[F]=0;for(k=0;k<w;k++)le[x[_+k]]++;for(I=ie,A=15;1<=A&&le[A]===0;A--);if(A<I&&(I=A),A===0)return S[T++]=20971520,S[T++]=20971520,C.bits=1,0;for(y=1;y<A&&le[y]===0;y++);for(I<y&&(I=y),F=q=1;F<=15;F++)if(q<<=1,(q-=le[F])<0)return-1;if(0<q&&(b===0||A!==1))return-1;for(Q[1]=0,F=1;F<15;F++)Q[F+1]=Q[F]+le[F];for(k=0;k<w;k++)x[_+k]!==0&&(B[Q[x[_+k]]++]=k);if(O=b===0?(E=ce=B,19):b===1?(E=l,L-=257,ce=u,fe-=257,256):(E=d,ce=m,-1),F=y,X=T,H=k=M=0,U=-1,Y=(j=1<<(P=I))-1,b===1&&852<j||b===2&&592<j)return 1;for(;;){for(J=F-H,se=B[k]<O?(Z=0,B[k]):B[k]>O?(Z=ce[fe+B[k]],E[L+B[k]]):(Z=96,0),D=1<<F-H,y=z=1<<P;S[X+(M>>H)+(z-=D)]=J<<24|Z<<16|se|0,z!==0;);for(D=1<<F-1;M&D;)D>>=1;if(D!==0?(M&=D-1,M+=D):M=0,k++,--le[F]==0){if(F===A)break;F=x[_+B[k]]}if(I<F&&(M&Y)!==U){for(H===0&&(H=I),X+=y,q=1<<(P=F-H);P+H<A&&!((q-=le[P+H])<=0);)P++,q<<=1;if(j+=1<<P,b===1&&852<j||b===2&&592<j)return 1;S[U=M&Y]=I<<24|P<<16|X-T|0}}return M!==0&&(S[X+M]=F-H<<24|64<<16|0),C.bits=I,0}},{"../utils/common":41}],51:[function(n,a,o){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,a,o){var c=n("../utils/common"),l=0,u=1;function d(xe){for(var ve=xe.length;0<=--ve;)xe[ve]=0}var m=0,b=29,x=256,_=x+1+b,w=30,S=19,T=2*_+1,B=15,C=16,D=7,z=256,U=16,Y=17,X=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],J=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Z=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ie=new Array(2*(_+2));d(ie);var F=new Array(2*w);d(F);var k=new Array(512);d(k);var y=new Array(256);d(y);var A=new Array(b);d(A);var I,P,H,q=new Array(w);function j(xe,ve,Se,ke,Ce){this.static_tree=xe,this.extra_bits=ve,this.extra_base=Se,this.elems=ke,this.max_length=Ce,this.has_stree=xe&&xe.length}function M(xe,ve){this.dyn_tree=xe,this.max_code=0,this.stat_desc=ve}function E(xe){return xe<256?k[xe]:k[256+(xe>>>7)]}function L(xe,ve){xe.pending_buf[xe.pending++]=255&ve,xe.pending_buf[xe.pending++]=ve>>>8&255}function le(xe,ve,Se){xe.bi_valid>C-Se?(xe.bi_buf|=ve<<xe.bi_valid&65535,L(xe,xe.bi_buf),xe.bi_buf=ve>>C-xe.bi_valid,xe.bi_valid+=Se-C):(xe.bi_buf|=ve<<xe.bi_valid&65535,xe.bi_valid+=Se)}function Q(xe,ve,Se){le(xe,Se[2*ve],Se[2*ve+1])}function ce(xe,ve){for(var Se=0;Se|=1&xe,xe>>>=1,Se<<=1,0<--ve;);return Se>>>1}function fe(xe,ve,Se){var ke,Ce,Re=new Array(B+1),Le=0;for(ke=1;ke<=B;ke++)Re[ke]=Le=Le+Se[ke-1]<<1;for(Ce=0;Ce<=ve;Ce++){var je=xe[2*Ce+1];je!==0&&(xe[2*Ce]=ce(Re[je]++,je))}}function oe(xe){var ve;for(ve=0;ve<_;ve++)xe.dyn_ltree[2*ve]=0;for(ve=0;ve<w;ve++)xe.dyn_dtree[2*ve]=0;for(ve=0;ve<S;ve++)xe.bl_tree[2*ve]=0;xe.dyn_ltree[2*z]=1,xe.opt_len=xe.static_len=0,xe.last_lit=xe.matches=0}function de(xe){8<xe.bi_valid?L(xe,xe.bi_buf):0<xe.bi_valid&&(xe.pending_buf[xe.pending++]=xe.bi_buf),xe.bi_buf=0,xe.bi_valid=0}function ae(xe,ve,Se,ke){var Ce=2*ve,Re=2*Se;return xe[Ce]<xe[Re]||xe[Ce]===xe[Re]&&ke[ve]<=ke[Se]}function he(xe,ve,Se){for(var ke=xe.heap[Se],Ce=Se<<1;Ce<=xe.heap_len&&(Ce<xe.heap_len&&ae(ve,xe.heap[Ce+1],xe.heap[Ce],xe.depth)&&Ce++,!ae(ve,ke,xe.heap[Ce],xe.depth));)xe.heap[Se]=xe.heap[Ce],Se=Ce,Ce<<=1;xe.heap[Se]=ke}function te(xe,ve,Se){var ke,Ce,Re,Le,je=0;if(xe.last_lit!==0)for(;ke=xe.pending_buf[xe.d_buf+2*je]<<8|xe.pending_buf[xe.d_buf+2*je+1],Ce=xe.pending_buf[xe.l_buf+je],je++,ke===0?Q(xe,Ce,ve):(Q(xe,(Re=y[Ce])+x+1,ve),(Le=O[Re])!==0&&le(xe,Ce-=A[Re],Le),Q(xe,Re=E(--ke),Se),(Le=J[Re])!==0&&le(xe,ke-=q[Re],Le)),je<xe.last_lit;);Q(xe,z,ve)}function pe(xe,ve){var Se,ke,Ce,Re=ve.dyn_tree,Le=ve.stat_desc.static_tree,je=ve.stat_desc.has_stree,Pe=ve.stat_desc.elems,me=-1;for(xe.heap_len=0,xe.heap_max=T,Se=0;Se<Pe;Se++)Re[2*Se]!==0?(xe.heap[++xe.heap_len]=me=Se,xe.depth[Se]=0):Re[2*Se+1]=0;for(;xe.heap_len<2;)Re[2*(Ce=xe.heap[++xe.heap_len]=me<2?++me:0)]=1,xe.depth[Ce]=0,xe.opt_len--,je&&(xe.static_len-=Le[2*Ce+1]);for(ve.max_code=me,Se=xe.heap_len>>1;1<=Se;Se--)he(xe,Re,Se);for(Ce=Pe;Se=xe.heap[1],xe.heap[1]=xe.heap[xe.heap_len--],he(xe,Re,1),ke=xe.heap[1],xe.heap[--xe.heap_max]=Se,xe.heap[--xe.heap_max]=ke,Re[2*Ce]=Re[2*Se]+Re[2*ke],xe.depth[Ce]=(xe.depth[Se]>=xe.depth[ke]?xe.depth[Se]:xe.depth[ke])+1,Re[2*Se+1]=Re[2*ke+1]=Ce,xe.heap[1]=Ce++,he(xe,Re,1),2<=xe.heap_len;);xe.heap[--xe.heap_max]=xe.heap[1],function(ne,ue){var _e,Ie,Ne,De,et,We,Ke=ue.dyn_tree,xt=ue.max_code,tt=ue.stat_desc.static_tree,st=ue.stat_desc.has_stree,It=ue.stat_desc.extra_bits,yt=ue.stat_desc.extra_base,ut=ue.stat_desc.max_length,At=0;for(De=0;De<=B;De++)ne.bl_count[De]=0;for(Ke[2*ne.heap[ne.heap_max]+1]=0,_e=ne.heap_max+1;_e<T;_e++)ut<(De=Ke[2*Ke[2*(Ie=ne.heap[_e])+1]+1]+1)&&(De=ut,At++),Ke[2*Ie+1]=De,xt<Ie||(ne.bl_count[De]++,et=0,yt<=Ie&&(et=It[Ie-yt]),We=Ke[2*Ie],ne.opt_len+=We*(De+et),st&&(ne.static_len+=We*(tt[2*Ie+1]+et)));if(At!==0){do{for(De=ut-1;ne.bl_count[De]===0;)De--;ne.bl_count[De]--,ne.bl_count[De+1]+=2,ne.bl_count[ut]--,At-=2}while(0<At);for(De=ut;De!==0;De--)for(Ie=ne.bl_count[De];Ie!==0;)xt<(Ne=ne.heap[--_e])||(Ke[2*Ne+1]!==De&&(ne.opt_len+=(De-Ke[2*Ne+1])*Ke[2*Ne],Ke[2*Ne+1]=De),Ie--)}}(xe,ve),fe(Re,me,xe.bl_count)}function ee(xe,ve,Se){var ke,Ce,Re=-1,Le=ve[1],je=0,Pe=7,me=4;for(Le===0&&(Pe=138,me=3),ve[2*(Se+1)+1]=65535,ke=0;ke<=Se;ke++)Ce=Le,Le=ve[2*(ke+1)+1],++je<Pe&&Ce===Le||(je<me?xe.bl_tree[2*Ce]+=je:Ce!==0?(Ce!==Re&&xe.bl_tree[2*Ce]++,xe.bl_tree[2*U]++):je<=10?xe.bl_tree[2*Y]++:xe.bl_tree[2*X]++,Re=Ce,me=(je=0)===Le?(Pe=138,3):Ce===Le?(Pe=6,3):(Pe=7,4))}function ge(xe,ve,Se){var ke,Ce,Re=-1,Le=ve[1],je=0,Pe=7,me=4;for(Le===0&&(Pe=138,me=3),ke=0;ke<=Se;ke++)if(Ce=Le,Le=ve[2*(ke+1)+1],!(++je<Pe&&Ce===Le)){if(je<me)for(;Q(xe,Ce,xe.bl_tree),--je!=0;);else Ce!==0?(Ce!==Re&&(Q(xe,Ce,xe.bl_tree),je--),Q(xe,U,xe.bl_tree),le(xe,je-3,2)):je<=10?(Q(xe,Y,xe.bl_tree),le(xe,je-3,3)):(Q(xe,X,xe.bl_tree),le(xe,je-11,7));Re=Ce,me=(je=0)===Le?(Pe=138,3):Ce===Le?(Pe=6,3):(Pe=7,4)}}d(q);var Ee=!1;function be(xe,ve,Se,ke){le(xe,(m<<1)+(ke?1:0),3),function(Ce,Re,Le,je){de(Ce),je&&(L(Ce,Le),L(Ce,~Le)),c.arraySet(Ce.pending_buf,Ce.window,Re,Le,Ce.pending),Ce.pending+=Le}(xe,ve,Se,!0)}o._tr_init=function(xe){Ee||(function(){var ve,Se,ke,Ce,Re,Le=new Array(B+1);for(Ce=ke=0;Ce<b-1;Ce++)for(A[Ce]=ke,ve=0;ve<1<<O[Ce];ve++)y[ke++]=Ce;for(y[ke-1]=Ce,Ce=Re=0;Ce<16;Ce++)for(q[Ce]=Re,ve=0;ve<1<<J[Ce];ve++)k[Re++]=Ce;for(Re>>=7;Ce<w;Ce++)for(q[Ce]=Re<<7,ve=0;ve<1<<J[Ce]-7;ve++)k[256+Re++]=Ce;for(Se=0;Se<=B;Se++)Le[Se]=0;for(ve=0;ve<=143;)ie[2*ve+1]=8,ve++,Le[8]++;for(;ve<=255;)ie[2*ve+1]=9,ve++,Le[9]++;for(;ve<=279;)ie[2*ve+1]=7,ve++,Le[7]++;for(;ve<=287;)ie[2*ve+1]=8,ve++,Le[8]++;for(fe(ie,_+1,Le),ve=0;ve<w;ve++)F[2*ve+1]=5,F[2*ve]=ce(ve,5);I=new j(ie,O,x+1,_,B),P=new j(F,J,0,w,B),H=new j(new Array(0),Z,0,S,D)}(),Ee=!0),xe.l_desc=new M(xe.dyn_ltree,I),xe.d_desc=new M(xe.dyn_dtree,P),xe.bl_desc=new M(xe.bl_tree,H),xe.bi_buf=0,xe.bi_valid=0,oe(xe)},o._tr_stored_block=be,o._tr_flush_block=function(xe,ve,Se,ke){var Ce,Re,Le=0;0<xe.level?(xe.strm.data_type===2&&(xe.strm.data_type=function(je){var Pe,me=4093624447;for(Pe=0;Pe<=31;Pe++,me>>>=1)if(1&me&&je.dyn_ltree[2*Pe]!==0)return l;if(je.dyn_ltree[18]!==0||je.dyn_ltree[20]!==0||je.dyn_ltree[26]!==0)return u;for(Pe=32;Pe<x;Pe++)if(je.dyn_ltree[2*Pe]!==0)return u;return l}(xe)),pe(xe,xe.l_desc),pe(xe,xe.d_desc),Le=function(je){var Pe;for(ee(je,je.dyn_ltree,je.l_desc.max_code),ee(je,je.dyn_dtree,je.d_desc.max_code),pe(je,je.bl_desc),Pe=S-1;3<=Pe&&je.bl_tree[2*se[Pe]+1]===0;Pe--);return je.opt_len+=3*(Pe+1)+5+5+4,Pe}(xe),Ce=xe.opt_len+3+7>>>3,(Re=xe.static_len+3+7>>>3)<=Ce&&(Ce=Re)):Ce=Re=Se+5,Se+4<=Ce&&ve!==-1?be(xe,ve,Se,ke):xe.strategy===4||Re===Ce?(le(xe,2+(ke?1:0),3),te(xe,ie,F)):(le(xe,4+(ke?1:0),3),function(je,Pe,me,ne){var ue;for(le(je,Pe-257,5),le(je,me-1,5),le(je,ne-4,4),ue=0;ue<ne;ue++)le(je,je.bl_tree[2*se[ue]+1],3);ge(je,je.dyn_ltree,Pe-1),ge(je,je.dyn_dtree,me-1)}(xe,xe.l_desc.max_code+1,xe.d_desc.max_code+1,Le+1),te(xe,xe.dyn_ltree,xe.dyn_dtree)),oe(xe),ke&&de(xe)},o._tr_tally=function(xe,ve,Se){return xe.pending_buf[xe.d_buf+2*xe.last_lit]=ve>>>8&255,xe.pending_buf[xe.d_buf+2*xe.last_lit+1]=255&ve,xe.pending_buf[xe.l_buf+xe.last_lit]=255&Se,xe.last_lit++,ve===0?xe.dyn_ltree[2*Se]++:(xe.matches++,ve--,xe.dyn_ltree[2*(y[Se]+x+1)]++,xe.dyn_dtree[2*E(ve)]++),xe.last_lit===xe.lit_bufsize-1},o._tr_align=function(xe){le(xe,2,3),Q(xe,z,ie),function(ve){ve.bi_valid===16?(L(ve,ve.bi_buf),ve.bi_buf=0,ve.bi_valid=0):8<=ve.bi_valid&&(ve.pending_buf[ve.pending++]=255&ve.bi_buf,ve.bi_buf>>=8,ve.bi_valid-=8)}(xe)}},{"../utils/common":41}],53:[function(n,a,o){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,a,o){(function(c){(function(l,u){if(!l.setImmediate){var d,m,b,x,_=1,w={},S=!1,T=l.document,B=Object.getPrototypeOf&&Object.getPrototypeOf(l);B=B&&B.setTimeout?B:l,d={}.toString.call(l.process)==="[object process]"?function(U){browser$1$1.nextTick(function(){D(U)})}:function(){if(l.postMessage&&!l.importScripts){var U=!0,Y=l.onmessage;return l.onmessage=function(){U=!1},l.postMessage("","*"),l.onmessage=Y,U}}()?(x="setImmediate$"+Math.random()+"$",l.addEventListener?l.addEventListener("message",z,!1):l.attachEvent("onmessage",z),function(U){l.postMessage(x+U,"*")}):l.MessageChannel?((b=new MessageChannel).port1.onmessage=function(U){D(U.data)},function(U){b.port2.postMessage(U)}):T&&"onreadystatechange"in T.createElement("script")?(m=T.documentElement,function(U){var Y=T.createElement("script");Y.onreadystatechange=function(){D(U),Y.onreadystatechange=null,m.removeChild(Y),Y=null},m.appendChild(Y)}):function(U){setTimeout(D,0,U)},B.setImmediate=function(U){typeof U!="function"&&(U=new Function(""+U));for(var Y=new Array(arguments.length-1),X=0;X<Y.length;X++)Y[X]=arguments[X+1];var O={callback:U,args:Y};return w[_]=O,d(_),_++},B.clearImmediate=C}function C(U){delete w[U]}function D(U){if(S)setTimeout(D,0,U);else{var Y=w[U];if(Y){S=!0;try{(function(X){var O=X.callback,J=X.args;switch(J.length){case 0:O();break;case 1:O(J[0]);break;case 2:O(J[0],J[1]);break;case 3:O(J[0],J[1],J[2]);break;default:O.apply(u,J)}})(Y)}finally{C(U),S=!1}}}}function z(U){U.source===l&&typeof U.data=="string"&&U.data.indexOf(x)===0&&D(+U.data.slice(x.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);const JSZip=jszip_minExports;var FileSaver_minExports={},FileSaver_min={get exports(){return FileSaver_minExports},set exports(t){FileSaver_minExports=t}};(function(t,e){(function(n,a){a()})(commonjsGlobal,function(){function n(m,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(m.type)?new Blob(["\uFEFF",m],{type:m.type}):m}function a(m,b,x){var _=new XMLHttpRequest;_.open("GET",m),_.responseType="blob",_.onload=function(){d(_.response,b,x)},_.onerror=function(){console.error("could not download file")},_.send()}function o(m){var b=new XMLHttpRequest;b.open("HEAD",m,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function c(m){try{m.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),m.dispatchEvent(b)}}var l=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof globalThis=="object"&&globalThis.global===globalThis?globalThis:void 0,u=l.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=l.saveAs||(typeof window!="object"||window!==l?function(){}:"download"in HTMLAnchorElement.prototype&&!u?function(m,b,x){var _=l.URL||l.webkitURL,w=document.createElement("a");b=b||m.name||"download",w.download=b,w.rel="noopener",typeof m=="string"?(w.href=m,w.origin===location.origin?c(w):o(w.href)?a(m,b,x):c(w,w.target="_blank")):(w.href=_.createObjectURL(m),setTimeout(function(){_.revokeObjectURL(w.href)},4e4),setTimeout(function(){c(w)},0))}:"msSaveOrOpenBlob"in navigator?function(m,b,x){if(b=b||m.name||"download",typeof m!="string")navigator.msSaveOrOpenBlob(n(m,x),b);else if(o(m))a(m,b,x);else{var _=document.createElement("a");_.href=m,_.target="_blank",setTimeout(function(){c(_)})}}:function(m,b,x,_){if(_=_||open("","_blank"),_&&(_.document.title=_.document.body.innerText="downloading..."),typeof m=="string")return a(m,b,x);var w=m.type==="application/octet-stream",S=/constructor/i.test(l.HTMLElement)||l.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||w&&S||u)&&typeof FileReader<"u"){var B=new FileReader;B.onloadend=function(){var z=B.result;z=T?z:z.replace(/^data:[^;]*;/,"data:attachment/file;"),_?_.location.href=z:location=z,_=null},B.readAsDataURL(m)}else{var C=l.URL||l.webkitURL,D=C.createObjectURL(m);_?_.location=D:location.href=D,_=null,setTimeout(function(){C.revokeObjectURL(D)},4e4)}});l.saveAs=d.saveAs=d,t.exports=d})})(FileSaver_min);const saveAs$1=FileSaver_minExports;function traduire(t,e){const n=e.find(o=>t[o]!==void 0);return n?t[n]:void 0}async function zipper(t,e,n){n.endsWith(".zip")||(n=`${n}.zip`);const a=new JSZip;for(const c of t)a.file(c.nom,c.octets);const o=a.folder("sfip");for(const c of e)o.file(c.nom,c.octets);if(typeof window>"u"){const c=await a.generateAsync({type:"arraybuffer"});fs__default.mkdirSync(path.dirname(n),{recursive:!0}),await fs__default.promises.writeFile(n,Buffer$x.from(c),"binary")}else{const c=await a.generateAsync({type:"blob"});saveAs$1(c,n)}}function cidValide(t){if(typeof t=="string")try{return CID$1.parse(t),!0}catch{return!1}return!1}async function toBuffer$1(t,e){let n=new Uint8Array(0);for await(const a of t)if(n=concat$2([n,a],n.length+a.length),e!==void 0&&n.length>e)return null;return n}function adresseOrbiteValide(t){return typeof t=="string"&&t.startsWith("/orbitdb/")&&OrbitDB.isValidAddress(t)}class ÉmetteurUneFois extends eventsExports.EventEmitter{constructor(n,a){super();lt(this,"doitExister");lt(this,"résultatPrêt");lt(this,"fOublier");lt(this,"résultat");lt(this,"f");this.doitExister=a,this.résultatPrêt=!1,this.f=n,this.initialiser()}async initialiser(){const n=async a=>{(!this.doitExister||a)&&(this.résultat=a,this.résultatPrêt=!0,this.fOublier&&this.lorsquePrêt())};this.fOublier=await this.f(n),this.lorsquePrêt()}lorsquePrêt(){if(this.résultatPrêt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.résultat)}}}const uneFois=async function(t,e=!1){const n=new ÉmetteurUneFois(t,e);return(await once_1(n,"fini"))[0]},faisRien=async()=>{};var TYPES_STATUT;(function(t){t.INTERNE="interne",t.BÊTA="bêta",t.ACTIVE="active",t.OBSOLÈTE="obsolète"})(TYPES_STATUT||(TYPES_STATUT={}));class Épingles{constructor({client:e}){lt(this,"client");lt(this,"requètes");lt(this,"fsOublier");this.client=e,this.requètes=[],this.fsOublier={}}async épinglerBd({id:e,récursif:n=!0,fichiers:a=!0}){await this.directementÉpinglée({id:e})||await this._épingler({id:e,récursif:n,fichiers:a})}async désépinglerBd({id:e}){await Promise.all(this.requètes.filter(a=>a.id===e).map(async a=>await a.fOublier()));const n=this.requètes.filter(a=>a.parent===e);this.requètes=this.requètes.filter(a=>a.id!==e),this.requètes=this.requètes.filter(a=>a.parent!==e),await Promise.all(n.map(async a=>{this.requètes.filter(o=>o.id===a.id&&o.parent!==e).length||await this.désépinglerBd({id:a.id})}))}async épinglée({id:e}){return this.requètes.some(n=>n.id===e)}async épingléeParParent({id:e,parent:n}){return this.requètes.some(a=>a.id===e&&a.parent===n)}async directementÉpinglée({id:e}){return await this.épingléeParParent({id:e})}async épingles(){return new Set(this.requètes.map(e=>e.id))}async _épingler({id:e,récursif:n,fichiers:a,parent:o}){if(await this.épingléeParParent({id:e,parent:o}))return;const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:e});if(this.requètes.push({id:e,parent:o,fOublier:l}),n){const u=async d=>{let m=[];typeof d=="object"?(m=Object.values(d).filter(x=>typeof x=="string"),m.push(...Object.keys(d).filter(x=>typeof x=="string"))):Array.isArray(d)?m=d:typeof d=="string"&&(m=[d]);const b=m.filter(x=>adresseOrbiteValide(x));a&&m.filter(_=>cidValide(_)&&!b.includes(_)).forEach(_=>{this.client.sfip.pin.add(_);const w=async()=>{try{await this.client.sfip.pin.rm(_)}catch{}};this.requètes.push({id:_,parent:e,fOublier:w})}),await Promise.all(b.map(async x=>await this._épingler({id:x,récursif:n,fichiers:a,parent:e})))};if(c.type==="keyvalue"){const d=await this.client.suivreBdDic({id:e,f:u});this.fsOublier[e]=d}else if(c.type==="feed"){const d=await this.client.suivreBdListe({id:e,f:u});this.fsOublier[e]=d}}}async toutDésépingler(){const e=await this.épingles();await Promise.all([...e].map(async n=>{await this.désépinglerBd({id:n})}))}async fermer(){await Promise.all(Object.values(this.fsOublier).map(e=>e()))}}class CacheSuivi{constructor(){lt(this,"verrou");lt(this,"_cacheSuivi");lt(this,"_cacheRecherche");this.verrou=new src$4,this._cacheSuivi={},this._cacheRecherche={}}async suivre({adresseFonction:e,idClient:n,fOriginale:a,args:o,ceciOriginal:c}){const l=Object.entries(o).find(_=>typeof _[1]=="function")?.[0],u=o[l],d=Object.fromEntries(Object.entries(o).filter(_=>typeof _[1]!="function"));if(Object.keys(o).length!==Object.keys(d).length+1)throw new Error("Plus d'un argument pour "+e+" est une fonction : "+JSON.stringify(o));const m=this.générerCodeCache({adresseFonction:e,idClient:n,argsClefs:d}),b=v4();if(await this.verrou.acquire(m),this._cacheSuivi[m])this._cacheSuivi[m].requètes[b]=u,Object.keys(this._cacheSuivi[m]).includes("val")&&await u(this._cacheSuivi[m].val);else{this._cacheSuivi[m]={requètes:{[b]:u}};const _=async T=>{if(!this._cacheSuivi[m])return;this._cacheSuivi[m].val=T;const B=Object.values(this._cacheSuivi[m].requètes);await Promise.all(B.map(C=>C(T)))},w={...d,[l]:_},S=await a.apply(c,[w]);this._cacheSuivi[m].fOublier=S}const x=async()=>{await this.oublierSuivi({codeCache:m,idRequète:b})};return this.verrou.release(m),x}async suivreRecherche({adresseFonction:e,nomArgTaille:n,idClient:a,fOriginale:o,args:c,ceciOriginal:l,par:u}){const d=Object.entries(c).find(D=>typeof D[1]=="function")?.[0],m=c[d],b=Object.fromEntries(Object.entries(c).filter(D=>typeof D[1]!="function"));if(Object.keys(c).length!==Object.keys(b).length+1)throw new Error("Plus d'un argument pour "+e+" est une fonction : "+JSON.stringify(c));const x=Object.fromEntries(Object.entries(c).filter(D=>D[0]!==n)),_=c[n];if(_===void 0)throw new Error(`Aucun argument de nom ${n} n'a été passé à la fonction ${e}.`);if(typeof _!="number")throw new Error(`Argument ${n} n'est pas un nombre dans la fonction ${e}.`);const w=this.générerCodeCache({adresseFonction:e,idClient:a,argsClefs:x}),S=v4();await this.verrou.acquire(w);const T=D=>{if(!this._cacheRecherche[w])return;this._cacheRecherche[w].val=D;const z=Object.values(this._cacheRecherche[w].requètes);u==="profondeur"?z.forEach(U=>U.f(D.filter(Y=>Y.profondeur<=U.taille))):z.forEach(U=>U.f(D.slice(0,U.taille)))};if(this._cacheRecherche[w])this._cacheRecherche[w].requètes[S]={f:m,taille:_},Object.keys(this._cacheRecherche[w]).includes("val")&&T(this._cacheRecherche[w].val);else{this._cacheRecherche[w]={requètes:{[S]:{f:m,taille:_}},taillePrésente:_};const D={...x,[d]:T,[n]:_};if(u==="profondeur"){const{fOublier:z,fChangerProfondeur:U}=await o.apply(l,[D]);this._cacheRecherche[w].fs={fOublier:z,fChangerTaille:U}}else{const{fOublier:z,fChangerN:U}=await o.apply(l,[D]);this._cacheRecherche[w].fs={fOublier:z,fChangerTaille:U}}}const B=async()=>{await this.oublierRecherche({codeCache:w,idRequète:S})},C=D=>{const z=this._cacheRecherche[w].requètes[S].taille;if(D===z)return;this._cacheRecherche[w].requètes[S].taille=D,T(this._cacheRecherche[w].val);const U=Math.max(...Object.values(this._cacheRecherche[w].requètes).map(O=>O.taille)),{taillePrésente:Y}=this._cacheRecherche[w],{fChangerTaille:X}=this._cacheRecherche[w].fs;U!==Y&&X(U)};return this.verrou.release(w),{fOublier:B,[u==="profondeur"?"fChangerProfondeur":"fChangerN"]:C}}async oublierSuivi({codeCache:e,idRequète:n}){if(await this.verrou.acquire(e),this._cacheSuivi[e]===void 0)return;const{requètes:a,fOublier:o}=this._cacheSuivi[e];delete a[n],Object.keys(a).length||(await o(),delete this._cacheSuivi[e]),this.verrou.release(e)}async oublierRecherche({codeCache:e,idRequète:n}){if(await this.verrou.acquire(e),this._cacheRecherche[e]===void 0)return;const{requètes:a,fs:o}=this._cacheRecherche[e];delete a[n],Object.keys(a).length||(await o.fOublier(),delete this._cacheRecherche[e]),this.verrou.release(e)}générerCodeCache({adresseFonction:e,idClient:n,argsClefs:a}){const o=e+"-"+n+"-"+JSON.stringify(a);return crypto$5.createHash("md5").update(o).digest("hex")}}const cacheSuivi=(t,e,n)=>envelopper({nom:e,descripteur:n}),cacheRechercheParNRésultats=(t,e,n)=>envelopper({nom:e,descripteur:n,recherche:"nRésultats"}),cacheRechercheParProfondeur=(t,e,n)=>envelopper({nom:e,descripteur:n,recherche:"profondeur"}),envelopper=({nom:t,descripteur:e,recherche:n,nomArgTaille:a})=>{const o=e.value;if(typeof o=="function")e.value=function(...c){if(c.length>1)throw new Error("Args trop longs");const l=this.client?this.client:this;try{return n?(a=a||(n==="profondeur"?"profondeur":"nRésultatsDésirés"),cache$2.suivreRecherche({adresseFonction:this.constructor.name+"."+t,idClient:l.idBdCompte,fOriginale:o,args:c[0],ceciOriginal:this,par:n,nomArgTaille:a})):cache$2.suivre({adresseFonction:this.constructor.name+"."+t,idClient:l.idBdCompte,fOriginale:o,args:c[0],ceciOriginal:this})}catch(u){throw console.error(`Erreur: ${u}`),u}};else throw new Error("L'objet décoré n'est pas une fonction");return e},cache$2=new CacheSuivi,MAX_TAILLE_IMAGE$2=500*1e3,MAX_TAILLE_IMAGE_VIS$2=1500*1e3;class Profil{constructor({client:e,id:n}){lt(this,"client");lt(this,"idBd");this.client=e,this.idBd=n}async suivreCourriel({f:e,idBdProfil:n}){return n=n||this.idBd,await this.client.suivreBd({id:n,f:async a=>{const o=a.get("courriel");await e(o||null)}})}async sauvegarderCourriel({courriel:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.set("courriel",e),await a()}async effacerCourriel(){const{bd:e,fOublier:n}=await this.client.ouvrirBd({id:this.idBd});await e.del("courriel"),await n()}async suivreNoms({f:e,idBdProfil:n}){return n=n||this.idBd,await this.client.suivreBdDicDeClef({id:n,clef:"noms",f:e})}async sauvegarderNom({langue:e,nom:n}){const a=await this.client.obtIdBd({nom:"noms",racine:this.idBd,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${this.idBd}.`);const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a});await o.set(e,n),await c()}async effacerNom({langue:e}){const n=await this.client.obtIdBd({nom:"noms",racine:this.idBd,type:"kvstore"});if(!n)throw new Error(`Permission de modification refusée pour BD ${this.idBd}.`);const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:n});await a.del(e),await o()}async sauvegarderImage({image:e}){let n;if(e.size!==void 0){if(e.size>MAX_TAILLE_IMAGE$2)throw new Error("Taille maximale excédée");n=await e.arrayBuffer()}else n=e;const a=await this.client.ajouterÀSFIP({fichier:n}),{bd:o,fOublier:c}=await this.client.ouvrirBd({id:this.idBd});await o.set("image",a),await c()}async effacerImage(){const{bd:e,fOublier:n}=await this.client.ouvrirBd({id:this.idBd});await e.del("image"),await n()}async suivreImage({f:e,idBdProfil:n}){return n=n||this.idBd,await this.client.suivreBd({id:n,f:async a=>{const o=a.get("image");if(!o)await e(null);else{const c=await this.client.obtFichierSFIP({id:o,max:MAX_TAILLE_IMAGE_VIS$2});await e(c)}}})}}__decorate([cacheSuivi],Profil.prototype,"suivreCourriel",null);__decorate([cacheSuivi],Profil.prototype,"suivreNoms",null);__decorate([cacheSuivi],Profil.prototype,"suivreImage",null);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XLSX={};XLSX.version="0.19.1";var current_codepage=1200,$cptable,VALID_ANSI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],CS2CP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},set_ansi=function(t){VALID_ANSI.indexOf(t)!=-1&&(CS2CP[0]=t)};function reset_ansi(){set_ansi(1252)}var set_cp=function(t){current_codepage=t,set_ansi(t)};function reset_cp(){set_cp(1200),reset_ansi()}function char_codes(t){for(var e=[],n=0,a=t.length;n<a;++n)e[n]=t.charCodeAt(n);return e}function utf16leread(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function utf16beread(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var debom=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return e==255&&n==254?utf16leread(t.slice(2)):e==254&&n==255?utf16beread(t.slice(2)):e==65279?t.slice(1):t},_getchar=function t(e){return String.fromCharCode(e)},_getansi=function t(e){return String.fromCharCode(e)},DENSE=null,Base64_map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Base64_encode(t){for(var e="",n=0,a=0,o=0,c=0,l=0,u=0,d=0,m=0;m<t.length;)n=t.charCodeAt(m++),c=n>>2,a=t.charCodeAt(m++),l=(n&3)<<4|a>>4,o=t.charCodeAt(m++),u=(a&15)<<2|o>>6,d=o&63,isNaN(a)?u=d=64:isNaN(o)&&(d=64),e+=Base64_map.charAt(c)+Base64_map.charAt(l)+Base64_map.charAt(u)+Base64_map.charAt(d);return e}function Base64_encode_pass(t){for(var e="",n=0,a=0,o=0,c=0,l=0,u=0,d=0,m=0;m<t.length;)n=t.charCodeAt(m++),n>255&&(n=95),c=n>>2,a=t.charCodeAt(m++),a>255&&(a=95),l=(n&3)<<4|a>>4,o=t.charCodeAt(m++),o>255&&(o=95),u=(a&15)<<2|o>>6,d=o&63,isNaN(a)?u=d=64:isNaN(o)&&(d=64),e+=Base64_map.charAt(c)+Base64_map.charAt(l)+Base64_map.charAt(u)+Base64_map.charAt(d);return e}function Base64_decode(t){var e="",n=0,a=0,o=0,c=0,l=0,u=0,d=0;t=t.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var m=0;m<t.length;)c=Base64_map.indexOf(t.charAt(m++)),l=Base64_map.indexOf(t.charAt(m++)),n=c<<2|l>>4,e+=String.fromCharCode(n),u=Base64_map.indexOf(t.charAt(m++)),a=(l&15)<<4|u>>2,u!==64&&(e+=String.fromCharCode(a)),d=Base64_map.indexOf(t.charAt(m++)),o=(u&3)<<6|d,d!==64&&(e+=String.fromCharCode(o));return e}var has_buf=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Buffer_from=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}(),buf_utf16le=function(){if(typeof Buffer>"u")return!1;var t=Buffer_from([65,0]);if(!t)return!1;var e=t.toString("utf16le");return e.length==1}();function new_raw_buf(t){return has_buf?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function new_unsafe_buf(t){return has_buf?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var s2a=function t(e){return has_buf?Buffer_from(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function s2ab(t){if(typeof ArrayBuffer>"u")return s2a(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),a=0;a!=t.length;++a)n[a]=t.charCodeAt(a)&255;return e}function a2s(t){if(Array.isArray(t))return t.map(function(a){return String.fromCharCode(a)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function a2u(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function ab2a(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return ab2a(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var bconcat=has_buf?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Buffer_from(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var a=new Uint8Array(n),o=0;for(e=0,n=0;e<t.length;n+=o,++e)o=t[e].length,t[e]instanceof Uint8Array?a.set(t[e],n):typeof t[e]=="string"?a.set(new Uint8Array(s2a(t[e])),n):a.set(new Uint8Array(t[e]),n);return a}return[].concat.apply([],t.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function utf8decode(t){for(var e=[],n=0,a=t.length+250,o=new_raw_buf(t.length+255),c=0;c<t.length;++c){var l=t.charCodeAt(c);if(l<128)o[n++]=l;else if(l<2048)o[n++]=192|l>>6&31,o[n++]=128|l&63;else if(l>=55296&&l<57344){l=(l&1023)+64;var u=t.charCodeAt(++c)&1023;o[n++]=240|l>>8&7,o[n++]=128|l>>2&63,o[n++]=128|u>>6&15|(l&3)<<4,o[n++]=128|u&63}else o[n++]=224|l>>12&15,o[n++]=128|l>>6&63,o[n++]=128|l&63;n>a&&(e.push(o.slice(0,n)),n=0,o=new_raw_buf(65535),a=65530)}return e.push(o.slice(0,n)),bconcat(e)}var chr0=/\u0000/g,chr1=/[\u0001-\u0006]/g;function _strrev(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function pad0(t,e){var n=""+t;return n.length>=e?n:fill("0",e-n.length)+n}function pad_(t,e){var n=""+t;return n.length>=e?n:fill(" ",e-n.length)+n}function rpad_(t,e){var n=""+t;return n.length>=e?n:n+fill(" ",e-n.length)}function pad0r1(t,e){var n=""+Math.round(t);return n.length>=e?n:fill("0",e-n.length)+n}function pad0r2(t,e){var n=""+t;return n.length>=e?n:fill("0",e-n.length)+n}var p2_32=Math.pow(2,32);function pad0r(t,e){if(t>p2_32||t<-p2_32)return pad0r1(t,e);var n=Math.round(t);return pad0r2(n,e)}function SSF_isgeneral(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SSF_init_table(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var table_fmt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},SSF_default_map={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SSF_default_str={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function SSF_frac(t,e,n){for(var a=t<0?-1:1,o=t*a,c=0,l=1,u=0,d=1,m=0,b=0,x=Math.floor(o);m<e&&(x=Math.floor(o),u=x*l+c,b=x*m+d,!(o-x<5e-8));)o=1/(o-x),c=l,l=u,d=m,m=b;if(b>e&&(m>e?(b=d,u=c):(b=m,u=l)),!n)return[0,a*u,b];var _=Math.floor(a*u/b);return[_,a*u-_*b,b]}function SSF_parse_date_code(t,e,n){if(t>2958465||t<0)return null;var a=t|0,o=Math.floor(86400*(t-a)),c=0,l=[],u={D:a,T:o,u:86400*(t-a)-o,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(u.u)<1e-6&&(u.u=0),e&&e.date1904&&(a+=1462),u.u>.9999&&(u.u=0,++o==86400&&(u.T=o=0,++a,++u.D)),a===60)l=n?[1317,10,29]:[1900,2,29],c=3;else if(a===0)l=n?[1317,8,29]:[1900,1,0],c=6;else{a>60&&--a;var d=new Date(1900,0,1);d.setDate(d.getDate()+a-1),l=[d.getFullYear(),d.getMonth()+1,d.getDate()],c=d.getDay(),a<60&&(c=(c+6)%7),n&&(c=SSF_fix_hijri(d,l))}return u.y=l[0],u.m=l[1],u.d=l[2],u.S=o%60,o=Math.floor(o/60),u.M=o%60,o=Math.floor(o/60),u.H=o,u.q=c,u}var SSFbasedate=new Date(1899,11,31,0,0,0),SSFdnthresh=SSFbasedate.getTime(),SSFbase1904=new Date(1900,2,1,0,0,0);function datenum_local(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=SSFbase1904&&(n+=24*60*60*1e3),(n-(SSFdnthresh+(t.getTimezoneOffset()-SSFbasedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function SSF_strip_decimal(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function SSF_normalize_exp(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SSF_small_exp(t){var e=t<0?12:11,n=SSF_strip_decimal(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function SSF_large_exp(t){var e=SSF_strip_decimal(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function SSF_general_num(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=SSF_small_exp(t):e===10?n=t.toFixed(10).substr(0,12):n=SSF_large_exp(t),SSF_strip_decimal(SSF_normalize_exp(n.toUpperCase()))}function SSF_general(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):SSF_general_num(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return SSF_format(14,datenum_local(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function SSF_fix_hijri(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function SSF_write_date(t,e,n,a){var o="",c=0,l=0,u=n.y,d,m=0;switch(t){case 98:u=n.y+543;case 121:switch(e.length){case 1:case 2:d=u%100,m=2;break;default:d=u%1e4,m=4;break}break;case 109:switch(e.length){case 1:case 2:d=n.m,m=e.length;break;case 3:return months[n.m-1][1];case 5:return months[n.m-1][0];default:return months[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:d=n.d,m=e.length;break;case 3:return days[n.q][0];default:return days[n.q][1]}break;case 104:switch(e.length){case 1:case 2:d=1+(n.H+11)%12,m=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:d=n.H,m=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:d=n.M,m=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?pad0(n.S,e.length):(a>=2?l=a===3?1e3:100:l=a===1?10:1,c=Math.round(l*(n.S+n.u)),c>=60*l&&(c=0),e==="s"?c===0?"0":""+c/l:(o=pad0(c,2+a),e==="ss"?o.substr(0,2):"."+o.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":d=n.D*24+n.H;break;case"[m]":case"[mm]":d=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":d=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}m=e.length===3?1:2;break;case 101:d=u,m=1;break}var b=m>0?pad0(d,m):"";return b}function commaify(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,a=t.substr(0,n);n!=t.length;n+=e)a+=(a.length>0?",":"")+t.substr(n,e);return a}var pct1=/%/g;function write_num_pct(t,e,n){var a=e.replace(pct1,""),o=e.length-a.length;return write_num(t,a,n*Math.pow(10,2*o))+fill("%",o)}function write_num_cm(t,e,n){for(var a=e.length-1;e.charCodeAt(a-1)===44;)--a;return write_num(t,e.substr(0,a),n/Math.pow(10,3*(e.length-a)))}function write_num_exp(t,e){var n,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+write_num_exp(t,-e);var o=t.indexOf(".");o===-1&&(o=t.indexOf("E"));var c=Math.floor(Math.log(e)*Math.LOG10E)%o;if(c<0&&(c+=o),n=(e/Math.pow(10,c)).toPrecision(a+1+(o+c)%o),n.indexOf("e")===-1){var l=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(l-n.length+c):n+="E+"+(l-c);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,o)+"."+n.substr(2+o),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,d,m,b){return d+m+b.substr(0,(o+c)%o)+"."+b.substr(c)+"E"})}else n=e.toExponential(a);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var frac1=/# (\?+)( ?)\/( ?)(\d+)/;function write_num_f1(t,e,n){var a=parseInt(t[4],10),o=Math.round(e*a),c=Math.floor(o/a),l=o-c*a,u=a;return n+(c===0?"":""+c)+" "+(l===0?fill(" ",t[1].length+1+t[4].length):pad_(l,t[1].length)+t[2]+"/"+t[3]+pad0(u,t[4].length))}function write_num_f2(t,e,n){return n+(e===0?"":""+e)+fill(" ",t[1].length+2+t[4].length)}var dec1=/^#*0*\.([0#]+)/,closeparen=/\).*[0#]/,phone=/\(###\) ###\\?-####/;function hashq(t){for(var e="",n,a=0;a!=t.length;++a)switch(n=t.charCodeAt(a)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function rnd(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function dec(t,e){var n=t-Math.floor(t),a=Math.pow(10,e);return e<(""+Math.round(n*a)).length?0:Math.round(n*a)}function carry(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function flr(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function write_num_flt(t,e,n){if(t.charCodeAt(0)===40&&!e.match(closeparen)){var a=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?write_num_flt("n",a,n):"("+write_num_flt("n",a,-n)+")"}if(e.charCodeAt(e.length-1)===44)return write_num_cm(t,e,n);if(e.indexOf("%")!==-1)return write_num_pct(t,e,n);if(e.indexOf("E")!==-1)return write_num_exp(e,n);if(e.charCodeAt(0)===36)return"$"+write_num_flt(t,e.substr(e.charAt(1)==" "?2:1),n);var o,c,l,u,d=Math.abs(n),m=n<0?"-":"";if(e.match(/^00+$/))return m+pad0r(d,e.length);if(e.match(/^[#?]+$/))return o=pad0r(n,0),o==="0"&&(o=""),o.length>e.length?o:hashq(e.substr(0,e.length-o.length))+o;if(c=e.match(frac1))return write_num_f1(c,d,m);if(e.match(/^#+0+$/))return m+pad0r(d,e.length-e.indexOf("0"));if(c=e.match(dec1))return o=rnd(n,c[1].length).replace(/^([^\.]+)$/,"$1."+hashq(c[1])).replace(/\.$/,"."+hashq(c[1])).replace(/\.(\d*)$/,function(S,T){return"."+T+fill("0",hashq(c[1]).length-T.length)}),e.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),c=e.match(/^(0*)\.(#*)$/))return m+rnd(d,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=e.match(/^#{1,3},##0(\.?)$/))return m+commaify(pad0r(d,0));if(c=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+write_num_flt(t,e,-n):commaify(""+(Math.floor(n)+carry(n,c[1].length)))+"."+pad0(dec(n,c[1].length),c[1].length);if(c=e.match(/^#,#*,#0/))return write_num_flt(t,e.replace(/^#,#*,/,""),n);if(c=e.match(/^([0#]+)(\\?-([0#]+))+$/))return o=_strrev(write_num_flt(t,e.replace(/[\\-]/g,""),n)),l=0,_strrev(_strrev(e.replace(/\\/g,"")).replace(/[0#]/g,function(S){return l<o.length?o.charAt(l++):S==="0"?"0":""}));if(e.match(phone))return o=write_num_flt(t,"##########",n),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var b="";if(c=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(c[4].length,7),u=SSF_frac(d,Math.pow(10,l)-1,!1),o=""+m,b=write_num("n",c[1],u[1]),b.charAt(b.length-1)==" "&&(b=b.substr(0,b.length-1)+"0"),o+=b+c[2]+"/"+c[3],b=rpad_(u[2],l),b.length<c[4].length&&(b=hashq(c[4].substr(c[4].length-b.length))+b),o+=b,o;if(c=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(c[1].length,c[4].length),7),u=SSF_frac(d,Math.pow(10,l)-1,!0),m+(u[0]||(u[1]?"":"0"))+" "+(u[1]?pad_(u[1],l)+c[2]+"/"+c[3]+rpad_(u[2],l):fill(" ",2*l+1+c[2].length+c[3].length));if(c=e.match(/^[#0?]+$/))return o=pad0r(n,0),e.length<=o.length?o:hashq(e.substr(0,e.length-o.length))+o;if(c=e.match(/^([#0?]+)\.([#0]+)$/)){o=""+n.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),l=o.indexOf(".");var x=e.indexOf(".")-l,_=e.length-o.length-x;return hashq(e.substr(0,x)+o+e.substr(e.length-_))}if(c=e.match(/^00,000\.([#0]*0)$/))return l=dec(n,c[1].length),n<0?"-"+write_num_flt(t,e,-n):commaify(flr(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(S){return"00,"+(S.length<3?pad0(0,3-S.length):"")+S})+"."+pad0(l,c[1].length);switch(e){case"###,##0.00":return write_num_flt(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var w=commaify(pad0r(d,0));return w!=="0"?m+w:"";case"###,###.00":return write_num_flt(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return write_num_flt(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function write_num_cm2(t,e,n){for(var a=e.length-1;e.charCodeAt(a-1)===44;)--a;return write_num(t,e.substr(0,a),n/Math.pow(10,3*(e.length-a)))}function write_num_pct2(t,e,n){var a=e.replace(pct1,""),o=e.length-a.length;return write_num(t,a,n*Math.pow(10,2*o))+fill("%",o)}function write_num_exp2(t,e){var n,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+write_num_exp2(t,-e);var o=t.indexOf(".");o===-1&&(o=t.indexOf("E"));var c=Math.floor(Math.log(e)*Math.LOG10E)%o;if(c<0&&(c+=o),n=(e/Math.pow(10,c)).toPrecision(a+1+(o+c)%o),!n.match(/[Ee]/)){var l=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(l-n.length+c):n+="E+"+(l-c),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(u,d,m,b){return d+m+b.substr(0,(o+c)%o)+"."+b.substr(c)+"E"})}else n=e.toExponential(a);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function write_num_int(t,e,n){if(t.charCodeAt(0)===40&&!e.match(closeparen)){var a=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?write_num_int("n",a,n):"("+write_num_int("n",a,-n)+")"}if(e.charCodeAt(e.length-1)===44)return write_num_cm2(t,e,n);if(e.indexOf("%")!==-1)return write_num_pct2(t,e,n);if(e.indexOf("E")!==-1)return write_num_exp2(e,n);if(e.charCodeAt(0)===36)return"$"+write_num_int(t,e.substr(e.charAt(1)==" "?2:1),n);var o,c,l,u,d=Math.abs(n),m=n<0?"-":"";if(e.match(/^00+$/))return m+pad0(d,e.length);if(e.match(/^[#?]+$/))return o=""+n,n===0&&(o=""),o.length>e.length?o:hashq(e.substr(0,e.length-o.length))+o;if(c=e.match(frac1))return write_num_f2(c,d,m);if(e.match(/^#+0+$/))return m+pad0(d,e.length-e.indexOf("0"));if(c=e.match(dec1))return o=(""+n).replace(/^([^\.]+)$/,"$1."+hashq(c[1])).replace(/\.$/,"."+hashq(c[1])),o=o.replace(/\.(\d*)$/,function(S,T){return"."+T+fill("0",hashq(c[1]).length-T.length)}),e.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),c=e.match(/^(0*)\.(#*)$/))return m+(""+d).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=e.match(/^#{1,3},##0(\.?)$/))return m+commaify(""+d);if(c=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+write_num_int(t,e,-n):commaify(""+n)+"."+fill("0",c[1].length);if(c=e.match(/^#,#*,#0/))return write_num_int(t,e.replace(/^#,#*,/,""),n);if(c=e.match(/^([0#]+)(\\?-([0#]+))+$/))return o=_strrev(write_num_int(t,e.replace(/[\\-]/g,""),n)),l=0,_strrev(_strrev(e.replace(/\\/g,"")).replace(/[0#]/g,function(S){return l<o.length?o.charAt(l++):S==="0"?"0":""}));if(e.match(phone))return o=write_num_int(t,"##########",n),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var b="";if(c=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(c[4].length,7),u=SSF_frac(d,Math.pow(10,l)-1,!1),o=""+m,b=write_num("n",c[1],u[1]),b.charAt(b.length-1)==" "&&(b=b.substr(0,b.length-1)+"0"),o+=b+c[2]+"/"+c[3],b=rpad_(u[2],l),b.length<c[4].length&&(b=hashq(c[4].substr(c[4].length-b.length))+b),o+=b,o;if(c=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return l=Math.min(Math.max(c[1].length,c[4].length),7),u=SSF_frac(d,Math.pow(10,l)-1,!0),m+(u[0]||(u[1]?"":"0"))+" "+(u[1]?pad_(u[1],l)+c[2]+"/"+c[3]+rpad_(u[2],l):fill(" ",2*l+1+c[2].length+c[3].length));if(c=e.match(/^[#0?]+$/))return o=""+n,e.length<=o.length?o:hashq(e.substr(0,e.length-o.length))+o;if(c=e.match(/^([#0]+)\.([#0]+)$/)){o=""+n.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),l=o.indexOf(".");var x=e.indexOf(".")-l,_=e.length-o.length-x;return hashq(e.substr(0,x)+o+e.substr(e.length-_))}if(c=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+write_num_int(t,e,-n):commaify(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(S){return"00,"+(S.length<3?pad0(0,3-S.length):"")+S})+"."+pad0(0,c[1].length);switch(e){case"###,###":case"##,###":case"#,###":var w=commaify(""+d);return w!=="0"?m+w:"";default:if(e.match(/\.[0#?]*$/))return write_num_int(t,e.slice(0,e.lastIndexOf(".")),n)+hashq(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function write_num(t,e,n){return(n|0)===n?write_num_int(t,e,n):write_num_flt(t,e,n)}function SSF_split_fmt(t){for(var e=[],n=!1,a=0,o=0;a<t.length;++a)switch(t.charCodeAt(a)){case 34:n=!n;break;case 95:case 42:case 92:++a;break;case 59:e[e.length]=t.substr(o,a-o),o=a+1}if(e[e.length]=t.substr(o),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var SSF_abstime=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fmt_is_date(t){for(var e=0,n="",a="";e<t.length;)switch(n=t.charAt(e)){case"G":SSF_isgeneral(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(a=n;t.charAt(e++)!=="]"&&e<t.length;)a+=t.charAt(e);if(a.match(SSF_abstime))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function eval_fmt(t,e,n,a){for(var o=[],c="",l=0,u="",d="t",m,b,x,_="H";l<t.length;)switch(u=t.charAt(l)){case"G":if(!SSF_isgeneral(t,l))throw new Error("unrecognized character "+u+" in "+t);o[o.length]={t:"G",v:"General"},l+=7;break;case'"':for(c="";(x=t.charCodeAt(++l))!==34&&l<t.length;)c+=String.fromCharCode(x);o[o.length]={t:"t",v:c},++l;break;case"\\":var w=t.charAt(++l),S=w==="("||w===")"?w:"t";o[o.length]={t:S,v:w},++l;break;case"_":o[o.length]={t:"t",v:" "},l+=2;break;case"@":o[o.length]={t:"T",v:e},++l;break;case"B":case"b":if(t.charAt(l+1)==="1"||t.charAt(l+1)==="2"){if(m==null&&(m=SSF_parse_date_code(e,n,t.charAt(l+1)==="2"),m==null))return"";o[o.length]={t:"X",v:t.substr(l,2)},d=u,l+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":u=u.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||m==null&&(m=SSF_parse_date_code(e,n),m==null))return"";for(c=u;++l<t.length&&t.charAt(l).toLowerCase()===u;)c+=u;u==="m"&&d.toLowerCase()==="h"&&(u="M"),u==="h"&&(u=_),o[o.length]={t:u,v:c},d=u;break;case"A":case"a":case"上":var T={t:u,v:u};if(m==null&&(m=SSF_parse_date_code(e,n)),t.substr(l,3).toUpperCase()==="A/P"?(m!=null&&(T.v=m.H>=12?t.charAt(l+2):u),T.t="T",_="h",l+=3):t.substr(l,5).toUpperCase()==="AM/PM"?(m!=null&&(T.v=m.H>=12?"PM":"AM"),T.t="T",l+=5,_="h"):t.substr(l,5).toUpperCase()==="上午/下午"?(m!=null&&(T.v=m.H>=12?"下午":"上午"),T.t="T",l+=5,_="h"):(T.t="t",++l),m==null&&T.t==="T")return"";o[o.length]=T,d=u;break;case"[":for(c=u;t.charAt(l++)!=="]"&&l<t.length;)c+=t.charAt(l);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(SSF_abstime)){if(m==null&&(m=SSF_parse_date_code(e,n),m==null))return"";o[o.length]={t:"Z",v:c.toLowerCase()},d=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(t)||(o[o.length]={t:"t",v:c}));break;case".":if(m!=null){for(c=u;++l<t.length&&(u=t.charAt(l))==="0";)c+=u;o[o.length]={t:"s",v:c};break}case"0":case"#":for(c=u;++l<t.length&&"0#?.,E+-%".indexOf(u=t.charAt(l))>-1;)c+=u;o[o.length]={t:"n",v:c};break;case"?":for(c=u;t.charAt(++l)===u;)c+=u;o[o.length]={t:u,v:c},d=u;break;case"*":++l,(t.charAt(l)==" "||t.charAt(l)=="*")&&++l;break;case"(":case")":o[o.length]={t:a===1?"t":u,v:u},++l;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=u;l<t.length&&"0123456789".indexOf(t.charAt(++l))>-1;)c+=t.charAt(l);o[o.length]={t:"D",v:c};break;case" ":o[o.length]={t:u,v:u},++l;break;case"$":o[o.length]={t:"t",v:"$"},++l;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(u)===-1)throw new Error("unrecognized character "+u+" in "+t);o[o.length]={t:"t",v:u},++l;break}var B=0,C=0,D;for(l=o.length-1,d="t";l>=0;--l)switch(o[l].t){case"h":case"H":o[l].t=_,d="h",B<1&&(B=1);break;case"s":(D=o[l].v.match(/\.0+$/))&&(C=Math.max(C,D[0].length-1)),B<3&&(B=3);case"d":case"y":case"M":case"e":d=o[l].t;break;case"m":d==="s"&&(o[l].t="M",B<2&&(B=2));break;case"X":break;case"Z":B<1&&o[l].v.match(/[Hh]/)&&(B=1),B<2&&o[l].v.match(/[Mm]/)&&(B=2),B<3&&o[l].v.match(/[Ss]/)&&(B=3)}switch(B){case 0:break;case 1:m.u>=.5&&(m.u=0,++m.S),m.S>=60&&(m.S=0,++m.M),m.M>=60&&(m.M=0,++m.H);break;case 2:m.u>=.5&&(m.u=0,++m.S),m.S>=60&&(m.S=0,++m.M);break}var z="",U;for(l=0;l<o.length;++l)switch(o[l].t){case"t":case"T":case" ":case"D":break;case"X":o[l].v="",o[l].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[l].v=SSF_write_date(o[l].t.charCodeAt(0),o[l].v,m,C),o[l].t="t";break;case"n":case"?":for(U=l+1;o[U]!=null&&((u=o[U].t)==="?"||u==="D"||(u===" "||u==="t")&&o[U+1]!=null&&(o[U+1].t==="?"||o[U+1].t==="t"&&o[U+1].v==="/")||o[l].t==="("&&(u===" "||u==="n"||u===")")||u==="t"&&(o[U].v==="/"||o[U].v===" "&&o[U+1]!=null&&o[U+1].t=="?"));)o[l].v+=o[U].v,o[U]={v:"",t:";"},++U;z+=o[l].v,l=U-1;break;case"G":o[l].t="t",o[l].v=SSF_general(e,n);break}var Y="",X,O;if(z.length>0){z.charCodeAt(0)==40?(X=e<0&&z.charCodeAt(0)===45?-e:e,O=write_num("n",z,X)):(X=e<0&&a>1?-e:e,O=write_num("n",z,X),X<0&&o[0]&&o[0].t=="t"&&(O=O.substr(1),o[0].v="-"+o[0].v)),U=O.length-1;var J=o.length;for(l=0;l<o.length;++l)if(o[l]!=null&&o[l].t!="t"&&o[l].v.indexOf(".")>-1){J=l;break}var Z=o.length;if(J===o.length&&O.indexOf("E")===-1){for(l=o.length-1;l>=0;--l)o[l]==null||"n?".indexOf(o[l].t)===-1||(U>=o[l].v.length-1?(U-=o[l].v.length,o[l].v=O.substr(U+1,o[l].v.length)):U<0?o[l].v="":(o[l].v=O.substr(0,U+1),U=-1),o[l].t="t",Z=l);U>=0&&Z<o.length&&(o[Z].v=O.substr(0,U+1)+o[Z].v)}else if(J!==o.length&&O.indexOf("E")===-1){for(U=O.indexOf(".")-1,l=J;l>=0;--l)if(!(o[l]==null||"n?".indexOf(o[l].t)===-1)){for(b=o[l].v.indexOf(".")>-1&&l===J?o[l].v.indexOf(".")-1:o[l].v.length-1,Y=o[l].v.substr(b+1);b>=0;--b)U>=0&&(o[l].v.charAt(b)==="0"||o[l].v.charAt(b)==="#")&&(Y=O.charAt(U--)+Y);o[l].v=Y,o[l].t="t",Z=l}for(U>=0&&Z<o.length&&(o[Z].v=O.substr(0,U+1)+o[Z].v),U=O.indexOf(".")+1,l=J;l<o.length;++l)if(!(o[l]==null||"n?(".indexOf(o[l].t)===-1&&l!==J)){for(b=o[l].v.indexOf(".")>-1&&l===J?o[l].v.indexOf(".")+1:0,Y=o[l].v.substr(0,b);b<o[l].v.length;++b)U<O.length&&(Y+=O.charAt(U++));o[l].v=Y,o[l].t="t",Z=l}}}for(l=0;l<o.length;++l)o[l]!=null&&"n?".indexOf(o[l].t)>-1&&(X=a>1&&e<0&&l>0&&o[l-1].v==="-"?-e:e,o[l].v=write_num(o[l].t,o[l].v,X),o[l].t="t");var se="";for(l=0;l!==o.length;++l)o[l]!=null&&(se+=o[l].v);return se}var cfregex2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function chkcond(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function choose_fmt(t,e){var n=SSF_split_fmt(t),a=n.length,o=n[a-1].indexOf("@");if(a<4&&o>-1&&--a,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||o>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=o>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=o>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=o>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var c=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[a,c];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var l=n[0].match(cfregex2),u=n[1].match(cfregex2);return chkcond(e,l)?[a,n[0]]:chkcond(e,u)?[a,n[1]]:[a,n[l!=null&&u!=null?2:1]]}return[a,c]}function SSF_format(t,e,n){n==null&&(n={});var a="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?a=n.dateNF:a=t;break;case"number":t==14&&n.dateNF?a=n.dateNF:a=(n.table!=null?n.table:table_fmt)[t],a==null&&(a=n.table&&n.table[SSF_default_map[t]]||table_fmt[SSF_default_map[t]]),a==null&&(a=SSF_default_str[t]||"General");break}if(SSF_isgeneral(a,0))return SSF_general(e,n);e instanceof Date&&(e=datenum_local(e,n.date1904));var o=choose_fmt(a,e);if(SSF_isgeneral(o[1]))return SSF_general(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return eval_fmt(o[1],e,n,o[0])}function SSF_load(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(table_fmt[n]==null){e<0&&(e=n);continue}if(table_fmt[n]==t){e=n;break}}e<0&&(e=391)}return table_fmt[e]=t,e}function SSF_load_table(t){for(var e=0;e!=392;++e)t[e]!==void 0&&SSF_load(t[e],e)}function make_ssf(){table_fmt=SSF_init_table()}var SSFImplicit={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dateNFregex=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dateNF_regex(t){var e=typeof t=="number"?table_fmt[t]:t;return e=e.replace(dateNFregex,"(\\d+)"),new RegExp("^"+e+"$")}function dateNF_fix(t,e,n){var a=-1,o=-1,c=-1,l=-1,u=-1,d=-1;(e.match(dateNFregex)||[]).forEach(function(x,_){var w=parseInt(n[_+1],10);switch(x.toLowerCase().charAt(0)){case"y":a=w;break;case"d":c=w;break;case"h":l=w;break;case"s":d=w;break;case"m":l>=0?u=w:o=w;break}}),d>=0&&u==-1&&o>=0&&(u=o,o=-1);var m=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(o>=1?o:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);m.length==7&&(m="0"+m),m.length==8&&(m="20"+m);var b=("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2);return l==-1&&u==-1&&d==-1?m:a==-1&&o==-1&&c==-1?b:m+"T"+b}var bad_formats={"d.m":"d\\.m"};function SSF__load(t,e){return SSF_load(bad_formats[t]||t,e)}var CRC32=function(){var t={};t.version="1.2.0";function e(){for(var O=0,J=new Array(256),Z=0;Z!=256;++Z)O=Z,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,O=O&1?-306674912^O>>>1:O>>>1,J[Z]=O;return typeof Int32Array<"u"?new Int32Array(J):J}var n=e();function a(O){var J=0,Z=0,se=0,ie=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(se=0;se!=256;++se)ie[se]=O[se];for(se=0;se!=256;++se)for(Z=O[se],J=256+se;J<4096;J+=256)Z=ie[J]=Z>>>8^O[Z&255];var F=[];for(se=1;se!=16;++se)F[se-1]=typeof Int32Array<"u"?ie.subarray(se*256,se*256+256):ie.slice(se*256,se*256+256);return F}var o=a(n),c=o[0],l=o[1],u=o[2],d=o[3],m=o[4],b=o[5],x=o[6],_=o[7],w=o[8],S=o[9],T=o[10],B=o[11],C=o[12],D=o[13],z=o[14];function U(O,J){for(var Z=J^-1,se=0,ie=O.length;se<ie;)Z=Z>>>8^n[(Z^O.charCodeAt(se++))&255];return~Z}function Y(O,J){for(var Z=J^-1,se=O.length-15,ie=0;ie<se;)Z=z[O[ie++]^Z&255]^D[O[ie++]^Z>>8&255]^C[O[ie++]^Z>>16&255]^B[O[ie++]^Z>>>24]^T[O[ie++]]^S[O[ie++]]^w[O[ie++]]^_[O[ie++]]^x[O[ie++]]^b[O[ie++]]^m[O[ie++]]^d[O[ie++]]^u[O[ie++]]^l[O[ie++]]^c[O[ie++]]^n[O[ie++]];for(se+=15;ie<se;)Z=Z>>>8^n[(Z^O[ie++])&255];return~Z}function X(O,J){for(var Z=J^-1,se=0,ie=O.length,F=0,k=0;se<ie;)F=O.charCodeAt(se++),F<128?Z=Z>>>8^n[(Z^F)&255]:F<2048?(Z=Z>>>8^n[(Z^(192|F>>6&31))&255],Z=Z>>>8^n[(Z^(128|F&63))&255]):F>=55296&&F<57344?(F=(F&1023)+64,k=O.charCodeAt(se++)&1023,Z=Z>>>8^n[(Z^(240|F>>8&7))&255],Z=Z>>>8^n[(Z^(128|F>>2&63))&255],Z=Z>>>8^n[(Z^(128|k>>6&15|(F&3)<<4))&255],Z=Z>>>8^n[(Z^(128|k&63))&255]):(Z=Z>>>8^n[(Z^(224|F>>12&15))&255],Z=Z>>>8^n[(Z^(128|F>>6&63))&255],Z=Z>>>8^n[(Z^(128|F&63))&255]);return~Z}return t.table=n,t.bstr=U,t.buf=Y,t.str=X,t}(),CFB=function t(){var e={};e.version="1.2.2";function n(re,ye){for(var Ae=re.split("/"),$e=ye.split("/"),Te=0,Oe=0,Fe=Math.min(Ae.length,$e.length);Te<Fe;++Te){if(Oe=Ae[Te].length-$e[Te].length)return Oe;if(Ae[Te]!=$e[Te])return Ae[Te]<$e[Te]?-1:1}return Ae.length-$e.length}function a(re){if(re.charAt(re.length-1)=="/")return re.slice(0,-1).indexOf("/")===-1?re:a(re.slice(0,-1));var ye=re.lastIndexOf("/");return ye===-1?re:re.slice(0,ye+1)}function o(re){if(re.charAt(re.length-1)=="/")return o(re.slice(0,-1));var ye=re.lastIndexOf("/");return ye===-1?re:re.slice(ye+1)}function c(re,ye){typeof ye=="string"&&(ye=new Date(ye));var Ae=ye.getHours();Ae=Ae<<6|ye.getMinutes(),Ae=Ae<<5|ye.getSeconds()>>>1,re.write_shift(2,Ae);var $e=ye.getFullYear()-1980;$e=$e<<4|ye.getMonth()+1,$e=$e<<5|ye.getDate(),re.write_shift(2,$e)}function l(re){var ye=re.read_shift(2)&65535,Ae=re.read_shift(2)&65535,$e=new Date,Te=Ae&31;Ae>>>=5;var Oe=Ae&15;Ae>>>=4,$e.setMilliseconds(0),$e.setFullYear(Ae+1980),$e.setMonth(Oe-1),$e.setDate(Te);var Fe=ye&31;ye>>>=5;var Ue=ye&63;return ye>>>=6,$e.setHours(ye),$e.setMinutes(Ue),$e.setSeconds(Fe<<1),$e}function u(re){prep_blob(re,0);for(var ye={},Ae=0;re.l<=re.length-4;){var $e=re.read_shift(2),Te=re.read_shift(2),Oe=re.l+Te,Fe={};switch($e){case 21589:Ae=re.read_shift(1),Ae&1&&(Fe.mtime=re.read_shift(4)),Te>5&&(Ae&2&&(Fe.atime=re.read_shift(4)),Ae&4&&(Fe.ctime=re.read_shift(4))),Fe.mtime&&(Fe.mt=new Date(Fe.mtime*1e3));break;case 1:{var Ue=re.read_shift(4),ze=re.read_shift(4);Fe.usz=ze*Math.pow(2,32)+Ue,Ue=re.read_shift(4),ze=re.read_shift(4),Fe.csz=ze*Math.pow(2,32)+Ue}break}re.l=Oe,ye[$e]=Fe}return ye}var d;function m(){return d||(d=_fs)}function b(re,ye){if(re[0]==80&&re[1]==75)return It(re,ye);if((re[0]|32)==109&&(re[1]|32)==105)return Bt(re,ye);if(re.length<512)throw new Error("CFB file size "+re.length+" < 512");var Ae=3,$e=512,Te=0,Oe=0,Fe=0,Ue=0,ze=0,He=[],qe=re.slice(0,512);prep_blob(qe,0);var Xe=x(qe);switch(Ae=Xe[0],Ae){case 3:$e=512;break;case 4:$e=4096;break;case 0:if(Xe[1]==0)return It(re,ye);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ae)}$e!==512&&(qe=re.slice(0,$e),prep_blob(qe,28));var Ze=re.slice(0,$e);_(qe,Ae);var at=qe.read_shift(4,"i");if(Ae===3&&at!==0)throw new Error("# Directory Sectors: Expected 0 saw "+at);qe.l+=4,Fe=qe.read_shift(4,"i"),qe.l+=4,qe.chk("00100000","Mini Stream Cutoff Size: "),Ue=qe.read_shift(4,"i"),Te=qe.read_shift(4,"i"),ze=qe.read_shift(4,"i"),Oe=qe.read_shift(4,"i");for(var Je=-1,Qe=0;Qe<109&&(Je=qe.read_shift(4,"i"),!(Je<0));++Qe)He[Qe]=Je;var gt=w(re,$e);B(ze,Oe,gt,$e,He);var vt=D(gt,Fe,He,$e);Fe<vt.length&&(vt[Fe].name="!Directory"),Te>0&&Ue!==k&&(vt[Ue].name="!MiniFAT"),vt[He[0]].name="!FAT",vt.fat_addrs=He,vt.ssz=$e;var _t={},bt=[],St=[],$t=[];z(Fe,vt,gt,bt,Te,_t,St,Ue),S(St,$t,bt),bt.shift();var wt={FileIndex:St,FullPaths:$t};return ye&&ye.raw&&(wt.raw={header:Ze,sectors:gt}),wt}function x(re){if(re[re.l]==80&&re[re.l+1]==75)return[0,0];re.chk(y,"Header Signature: "),re.l+=16;var ye=re.read_shift(2,"u");return[re.read_shift(2,"u"),ye]}function _(re,ye){var Ae=9;switch(re.l+=2,Ae=re.read_shift(2)){case 9:if(ye!=3)throw new Error("Sector Shift: Expected 9 saw "+Ae);break;case 12:if(ye!=4)throw new Error("Sector Shift: Expected 12 saw "+Ae);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ae)}re.chk("0600","Mini Sector Shift: "),re.chk("000000000000","Reserved: ")}function w(re,ye){for(var Ae=Math.ceil(re.length/ye)-1,$e=[],Te=1;Te<Ae;++Te)$e[Te-1]=re.slice(Te*ye,(Te+1)*ye);return $e[Ae-1]=re.slice(Ae*ye),$e}function S(re,ye,Ae){for(var $e=0,Te=0,Oe=0,Fe=0,Ue=0,ze=Ae.length,He=[],qe=[];$e<ze;++$e)He[$e]=qe[$e]=$e,ye[$e]=Ae[$e];for(;Ue<qe.length;++Ue)$e=qe[Ue],Te=re[$e].L,Oe=re[$e].R,Fe=re[$e].C,He[$e]===$e&&(Te!==-1&&He[Te]!==Te&&(He[$e]=He[Te]),Oe!==-1&&He[Oe]!==Oe&&(He[$e]=He[Oe])),Fe!==-1&&(He[Fe]=$e),Te!==-1&&$e!=He[$e]&&(He[Te]=He[$e],qe.lastIndexOf(Te)<Ue&&qe.push(Te)),Oe!==-1&&$e!=He[$e]&&(He[Oe]=He[$e],qe.lastIndexOf(Oe)<Ue&&qe.push(Oe));for($e=1;$e<ze;++$e)He[$e]===$e&&(Oe!==-1&&He[Oe]!==Oe?He[$e]=He[Oe]:Te!==-1&&He[Te]!==Te&&(He[$e]=He[Te]));for($e=1;$e<ze;++$e)if(re[$e].type!==0){if(Ue=$e,Ue!=He[Ue])do Ue=He[Ue],ye[$e]=ye[Ue]+"/"+ye[$e];while(Ue!==0&&He[Ue]!==-1&&Ue!=He[Ue]);He[$e]=-1}for(ye[0]+="/",$e=1;$e<ze;++$e)re[$e].type!==2&&(ye[$e]+="/")}function T(re,ye,Ae){for(var $e=re.start,Te=re.size,Oe=[],Fe=$e;Ae&&Te>0&&Fe>=0;)Oe.push(ye.slice(Fe*F,Fe*F+F)),Te-=F,Fe=__readInt32LE(Ae,Fe*4);return Oe.length===0?new_buf(0):bconcat(Oe).slice(0,re.size)}function B(re,ye,Ae,$e,Te){var Oe=k;if(re===k){if(ye!==0)throw new Error("DIFAT chain shorter than expected")}else if(re!==-1){var Fe=Ae[re],Ue=($e>>>2)-1;if(!Fe)return;for(var ze=0;ze<Ue&&(Oe=__readInt32LE(Fe,ze*4))!==k;++ze)Te.push(Oe);ye>=1&&B(__readInt32LE(Fe,$e-4),ye-1,Ae,$e,Te)}}function C(re,ye,Ae,$e,Te){var Oe=[],Fe=[];Te||(Te=[]);var Ue=$e-1,ze=0,He=0;for(ze=ye;ze>=0;){Te[ze]=!0,Oe[Oe.length]=ze,Fe.push(re[ze]);var qe=Ae[Math.floor(ze*4/$e)];if(He=ze*4&Ue,$e<4+He)throw new Error("FAT boundary crossed: "+ze+" 4 "+$e);if(!re[qe])break;ze=__readInt32LE(re[qe],He)}return{nodes:Oe,data:__toBuffer([Fe])}}function D(re,ye,Ae,$e){var Te=re.length,Oe=[],Fe=[],Ue=[],ze=[],He=$e-1,qe=0,Xe=0,Ze=0,at=0;for(qe=0;qe<Te;++qe)if(Ue=[],Ze=qe+ye,Ze>=Te&&(Ze-=Te),!Fe[Ze]){ze=[];var Je=[];for(Xe=Ze;Xe>=0;){Je[Xe]=!0,Fe[Xe]=!0,Ue[Ue.length]=Xe,ze.push(re[Xe]);var Qe=Ae[Math.floor(Xe*4/$e)];if(at=Xe*4&He,$e<4+at)throw new Error("FAT boundary crossed: "+Xe+" 4 "+$e);if(!re[Qe]||(Xe=__readInt32LE(re[Qe],at),Je[Xe]))break}Oe[Ze]={nodes:Ue,data:__toBuffer([ze])}}return Oe}function z(re,ye,Ae,$e,Te,Oe,Fe,Ue){for(var ze=0,He=$e.length?2:0,qe=ye[re].data,Xe=0,Ze=0,at;Xe<qe.length;Xe+=128){var Je=qe.slice(Xe,Xe+128);prep_blob(Je,64),Ze=Je.read_shift(2),at=__utf16le(Je,0,Ze-He),$e.push(at);var Qe={name:at,type:Je.read_shift(1),color:Je.read_shift(1),L:Je.read_shift(4,"i"),R:Je.read_shift(4,"i"),C:Je.read_shift(4,"i"),clsid:Je.read_shift(16),state:Je.read_shift(4,"i"),start:0,size:0},gt=Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2);gt!==0&&(Qe.ct=U(Je,Je.l-8));var vt=Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2)+Je.read_shift(2);vt!==0&&(Qe.mt=U(Je,Je.l-8)),Qe.start=Je.read_shift(4,"i"),Qe.size=Je.read_shift(4,"i"),Qe.size<0&&Qe.start<0&&(Qe.size=Qe.type=0,Qe.start=k,Qe.name=""),Qe.type===5?(ze=Qe.start,Te>0&&ze!==k&&(ye[ze].name="!StreamData")):Qe.size>=4096?(Qe.storage="fat",ye[Qe.start]===void 0&&(ye[Qe.start]=C(Ae,Qe.start,ye.fat_addrs,ye.ssz)),ye[Qe.start].name=Qe.name,Qe.content=ye[Qe.start].data.slice(0,Qe.size)):(Qe.storage="minifat",Qe.size<0?Qe.size=0:ze!==k&&Qe.start!==k&&ye[ze]&&(Qe.content=T(Qe,ye[ze].data,(ye[Ue]||{}).data))),Qe.content&&prep_blob(Qe.content,0),Oe[at]=Qe,Fe.push(Qe)}}function U(re,ye){return new Date((__readUInt32LE(re,ye+4)/1e7*Math.pow(2,32)+__readUInt32LE(re,ye)/1e7-11644473600)*1e3)}function Y(re,ye){return m(),b(d.readFileSync(re),ye)}function X(re,ye){var Ae=ye&&ye.type;switch(Ae||has_buf&&Buffer.isBuffer(re)&&(Ae="buffer"),Ae||"base64"){case"file":return Y(re,ye);case"base64":return b(s2a(Base64_decode(re)),ye);case"binary":return b(s2a(re),ye)}return b(re,ye)}function O(re,ye){var Ae=ye||{},$e=Ae.root||"Root Entry";if(re.FullPaths||(re.FullPaths=[]),re.FileIndex||(re.FileIndex=[]),re.FullPaths.length!==re.FileIndex.length)throw new Error("inconsistent CFB structure");re.FullPaths.length===0&&(re.FullPaths[0]=$e+"/",re.FileIndex[0]={name:$e,type:5}),Ae.CLSID&&(re.FileIndex[0].clsid=Ae.CLSID),J(re)}function J(re){var ye="Sh33tJ5";if(!CFB.find(re,"/"+ye)){var Ae=new_buf(4);Ae[0]=55,Ae[1]=Ae[3]=50,Ae[2]=54,re.FileIndex.push({name:ye,type:2,content:Ae,size:4,L:69,R:69,C:69}),re.FullPaths.push(re.FullPaths[0]+ye),Z(re)}}function Z(re,ye){O(re);for(var Ae=!1,$e=!1,Te=re.FullPaths.length-1;Te>=0;--Te){var Oe=re.FileIndex[Te];switch(Oe.type){case 0:$e?Ae=!0:(re.FileIndex.pop(),re.FullPaths.pop());break;case 1:case 2:case 5:$e=!0,isNaN(Oe.R*Oe.L*Oe.C)&&(Ae=!0),Oe.R>-1&&Oe.L>-1&&Oe.R==Oe.L&&(Ae=!0);break;default:Ae=!0;break}}if(!(!Ae&&!ye)){var Fe=new Date(1987,1,19),Ue=0,ze=Object.create?Object.create(null):{},He=[];for(Te=0;Te<re.FullPaths.length;++Te)ze[re.FullPaths[Te]]=!0,re.FileIndex[Te].type!==0&&He.push([re.FullPaths[Te],re.FileIndex[Te]]);for(Te=0;Te<He.length;++Te){var qe=a(He[Te][0]);for($e=ze[qe];!$e;){for(;a(qe)&&!ze[a(qe)];)qe=a(qe);He.push([qe,{name:o(qe).replace("/",""),type:1,clsid:I,ct:Fe,mt:Fe,content:null}]),ze[qe]=!0,qe=a(He[Te][0]),$e=ze[qe]}}for(He.sort(function(at,Je){return n(at[0],Je[0])}),re.FullPaths=[],re.FileIndex=[],Te=0;Te<He.length;++Te)re.FullPaths[Te]=He[Te][0],re.FileIndex[Te]=He[Te][1];for(Te=0;Te<He.length;++Te){var Xe=re.FileIndex[Te],Ze=re.FullPaths[Te];if(Xe.name=o(Ze).replace("/",""),Xe.L=Xe.R=Xe.C=-(Xe.color=1),Xe.size=Xe.content?Xe.content.length:0,Xe.start=0,Xe.clsid=Xe.clsid||I,Te===0)Xe.C=He.length>1?1:-1,Xe.size=0,Xe.type=5;else if(Ze.slice(-1)=="/"){for(Ue=Te+1;Ue<He.length&&a(re.FullPaths[Ue])!=Ze;++Ue);for(Xe.C=Ue>=He.length?-1:Ue,Ue=Te+1;Ue<He.length&&a(re.FullPaths[Ue])!=a(Ze);++Ue);Xe.R=Ue>=He.length?-1:Ue,Xe.type=1}else a(re.FullPaths[Te+1]||"")==a(Ze)&&(Xe.R=Te+1),Xe.type=2}}}function se(re,ye){var Ae=ye||{};if(Ae.fileType=="mad")return pt(re,Ae);switch(Z(re),Ae.fileType){case"zip":return ut(re,Ae)}var $e=function(at){for(var Je=0,Qe=0,gt=0;gt<at.FileIndex.length;++gt){var vt=at.FileIndex[gt];if(vt.content){var _t=vt.content.length;_t>0&&(_t<4096?Je+=_t+63>>6:Qe+=_t+511>>9)}}for(var bt=at.FullPaths.length+3>>2,St=Je+7>>3,$t=Je+127>>7,wt=St+Qe+bt+$t,Ge=wt+127>>7,Ye=Ge<=109?0:Math.ceil((Ge-109)/127);wt+Ge+Ye+127>>7>Ge;)Ye=++Ge<=109?0:Math.ceil((Ge-109)/127);var ct=[1,Ye,Ge,$t,bt,Qe,Je,0];return at.FileIndex[0].size=Je<<6,ct[7]=(at.FileIndex[0].start=ct[0]+ct[1]+ct[2]+ct[3]+ct[4]+ct[5])+(ct[6]+7>>3),ct}(re),Te=new_buf($e[7]<<9),Oe=0,Fe=0;{for(Oe=0;Oe<8;++Oe)Te.write_shift(1,A[Oe]);for(Oe=0;Oe<8;++Oe)Te.write_shift(2,0);for(Te.write_shift(2,62),Te.write_shift(2,3),Te.write_shift(2,65534),Te.write_shift(2,9),Te.write_shift(2,6),Oe=0;Oe<3;++Oe)Te.write_shift(2,0);for(Te.write_shift(4,0),Te.write_shift(4,$e[2]),Te.write_shift(4,$e[0]+$e[1]+$e[2]+$e[3]-1),Te.write_shift(4,0),Te.write_shift(4,1<<12),Te.write_shift(4,$e[3]?$e[0]+$e[1]+$e[2]-1:k),Te.write_shift(4,$e[3]),Te.write_shift(-4,$e[1]?$e[0]-1:k),Te.write_shift(4,$e[1]),Oe=0;Oe<109;++Oe)Te.write_shift(-4,Oe<$e[2]?$e[1]+Oe:-1)}if($e[1])for(Fe=0;Fe<$e[1];++Fe){for(;Oe<236+Fe*127;++Oe)Te.write_shift(-4,Oe<$e[2]?$e[1]+Oe:-1);Te.write_shift(-4,Fe===$e[1]-1?k:Fe+1)}var Ue=function(at){for(Fe+=at;Oe<Fe-1;++Oe)Te.write_shift(-4,Oe+1);at&&(++Oe,Te.write_shift(-4,k))};for(Fe=Oe=0,Fe+=$e[1];Oe<Fe;++Oe)Te.write_shift(-4,P.DIFSECT);for(Fe+=$e[2];Oe<Fe;++Oe)Te.write_shift(-4,P.FATSECT);Ue($e[3]),Ue($e[4]);for(var ze=0,He=0,qe=re.FileIndex[0];ze<re.FileIndex.length;++ze)qe=re.FileIndex[ze],qe.content&&(He=qe.content.length,!(He<4096)&&(qe.start=Fe,Ue(He+511>>9)));for(Ue($e[6]+7>>3);Te.l&511;)Te.write_shift(-4,P.ENDOFCHAIN);for(Fe=Oe=0,ze=0;ze<re.FileIndex.length;++ze)qe=re.FileIndex[ze],qe.content&&(He=qe.content.length,!(!He||He>=4096)&&(qe.start=Fe,Ue(He+63>>6)));for(;Te.l&511;)Te.write_shift(-4,P.ENDOFCHAIN);for(Oe=0;Oe<$e[4]<<2;++Oe){var Xe=re.FullPaths[Oe];if(!Xe||Xe.length===0){for(ze=0;ze<17;++ze)Te.write_shift(4,0);for(ze=0;ze<3;++ze)Te.write_shift(4,-1);for(ze=0;ze<12;++ze)Te.write_shift(4,0);continue}qe=re.FileIndex[Oe],Oe===0&&(qe.start=qe.size?qe.start-1:k);var Ze=Oe===0&&Ae.root||qe.name;if(Ze.length>32&&(console.error("Name "+Ze+" will be truncated to "+Ze.slice(0,32)),Ze=Ze.slice(0,32)),He=2*(Ze.length+1),Te.write_shift(64,Ze,"utf16le"),Te.write_shift(2,He),Te.write_shift(1,qe.type),Te.write_shift(1,qe.color),Te.write_shift(-4,qe.L),Te.write_shift(-4,qe.R),Te.write_shift(-4,qe.C),qe.clsid)Te.write_shift(16,qe.clsid,"hex");else for(ze=0;ze<4;++ze)Te.write_shift(4,0);Te.write_shift(4,qe.state||0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,0),Te.write_shift(4,qe.start),Te.write_shift(4,qe.size),Te.write_shift(4,0)}for(Oe=1;Oe<re.FileIndex.length;++Oe)if(qe=re.FileIndex[Oe],qe.size>=4096)if(Te.l=qe.start+1<<9,has_buf&&Buffer.isBuffer(qe.content))qe.content.copy(Te,Te.l,0,qe.size),Te.l+=qe.size+511&-512;else{for(ze=0;ze<qe.size;++ze)Te.write_shift(1,qe.content[ze]);for(;ze&511;++ze)Te.write_shift(1,0)}for(Oe=1;Oe<re.FileIndex.length;++Oe)if(qe=re.FileIndex[Oe],qe.size>0&&qe.size<4096)if(has_buf&&Buffer.isBuffer(qe.content))qe.content.copy(Te,Te.l,0,qe.size),Te.l+=qe.size+63&-64;else{for(ze=0;ze<qe.size;++ze)Te.write_shift(1,qe.content[ze]);for(;ze&63;++ze)Te.write_shift(1,0)}if(has_buf)Te.l=Te.length;else for(;Te.l<Te.length;)Te.write_shift(1,0);return Te}function ie(re,ye){var Ae=re.FullPaths.map(function(ze){return ze.toUpperCase()}),$e=Ae.map(function(ze){var He=ze.split("/");return He[He.length-(ze.slice(-1)=="/"?2:1)]}),Te=!1;ye.charCodeAt(0)===47?(Te=!0,ye=Ae[0].slice(0,-1)+ye):Te=ye.indexOf("/")!==-1;var Oe=ye.toUpperCase(),Fe=Te===!0?Ae.indexOf(Oe):$e.indexOf(Oe);if(Fe!==-1)return re.FileIndex[Fe];var Ue=!Oe.match(chr1);for(Oe=Oe.replace(chr0,""),Ue&&(Oe=Oe.replace(chr1,"!")),Fe=0;Fe<Ae.length;++Fe)if((Ue?Ae[Fe].replace(chr1,"!"):Ae[Fe]).replace(chr0,"")==Oe||(Ue?$e[Fe].replace(chr1,"!"):$e[Fe]).replace(chr0,"")==Oe)return re.FileIndex[Fe];return null}var F=64,k=-2,y="d0cf11e0a1b11ae1",A=[208,207,17,224,161,177,26,225],I="00000000000000000000000000000000",P={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:k,FREESECT:-1,HEADER_SIGNATURE:y,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:I,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function H(re,ye,Ae){m();var $e=se(re,Ae);d.writeFileSync(ye,$e)}function q(re){for(var ye=new Array(re.length),Ae=0;Ae<re.length;++Ae)ye[Ae]=String.fromCharCode(re[Ae]);return ye.join("")}function j(re,ye){var Ae=se(re,ye);switch(ye&&ye.type||"buffer"){case"file":return m(),d.writeFileSync(ye.filename,Ae),Ae;case"binary":return typeof Ae=="string"?Ae:q(Ae);case"base64":return Base64_encode(typeof Ae=="string"?Ae:q(Ae));case"buffer":if(has_buf)return Buffer.isBuffer(Ae)?Ae:Buffer_from(Ae);case"array":return typeof Ae=="string"?s2a(Ae):Ae}return Ae}var M;function E(re){try{var ye=re.InflateRaw,Ae=new ye;if(Ae._processChunk(new Uint8Array([3,0]),Ae._finishFlushFlag),Ae.bytesRead)M=re;else throw new Error("zlib does not expose bytesRead")}catch($e){console.error("cannot use native zlib: "+($e.message||$e))}}function L(re,ye){if(!M)return tt(re,ye);var Ae=M.InflateRaw,$e=new Ae,Te=$e._processChunk(re.slice(re.l),$e._finishFlushFlag);return re.l+=$e.bytesRead,Te}function le(re){return M?M.deflateRawSync(re):_e(re)}var Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],fe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function oe(re){var ye=(re<<1|re<<11)&139536|(re<<5|re<<15)&558144;return(ye>>16|ye>>8|ye)&255}for(var de=typeof Uint8Array<"u",ae=de?new Uint8Array(1<<8):[],he=0;he<1<<8;++he)ae[he]=oe(he);function te(re,ye){var Ae=ae[re&255];return ye<=8?Ae>>>8-ye:(Ae=Ae<<8|ae[re>>8&255],ye<=16?Ae>>>16-ye:(Ae=Ae<<8|ae[re>>16&255],Ae>>>24-ye))}function pe(re,ye){var Ae=ye&7,$e=ye>>>3;return(re[$e]|(Ae<=6?0:re[$e+1]<<8))>>>Ae&3}function ee(re,ye){var Ae=ye&7,$e=ye>>>3;return(re[$e]|(Ae<=5?0:re[$e+1]<<8))>>>Ae&7}function ge(re,ye){var Ae=ye&7,$e=ye>>>3;return(re[$e]|(Ae<=4?0:re[$e+1]<<8))>>>Ae&15}function Ee(re,ye){var Ae=ye&7,$e=ye>>>3;return(re[$e]|(Ae<=3?0:re[$e+1]<<8))>>>Ae&31}function be(re,ye){var Ae=ye&7,$e=ye>>>3;return(re[$e]|(Ae<=1?0:re[$e+1]<<8))>>>Ae&127}function xe(re,ye,Ae){var $e=ye&7,Te=ye>>>3,Oe=(1<<Ae)-1,Fe=re[Te]>>>$e;return Ae<8-$e||(Fe|=re[Te+1]<<8-$e,Ae<16-$e)||(Fe|=re[Te+2]<<16-$e,Ae<24-$e)||(Fe|=re[Te+3]<<24-$e),Fe&Oe}function ve(re,ye,Ae){var $e=ye&7,Te=ye>>>3;return $e<=5?re[Te]|=(Ae&7)<<$e:(re[Te]|=Ae<<$e&255,re[Te+1]=(Ae&7)>>8-$e),ye+3}function Se(re,ye,Ae){var $e=ye&7,Te=ye>>>3;return Ae=(Ae&1)<<$e,re[Te]|=Ae,ye+1}function ke(re,ye,Ae){var $e=ye&7,Te=ye>>>3;return Ae<<=$e,re[Te]|=Ae&255,Ae>>>=8,re[Te+1]=Ae,ye+8}function Ce(re,ye,Ae){var $e=ye&7,Te=ye>>>3;return Ae<<=$e,re[Te]|=Ae&255,Ae>>>=8,re[Te+1]=Ae&255,re[Te+2]=Ae>>>8,ye+16}function Re(re,ye){var Ae=re.length,$e=2*Ae>ye?2*Ae:ye+5,Te=0;if(Ae>=ye)return re;if(has_buf){var Oe=new_unsafe_buf($e);if(re.copy)re.copy(Oe);else for(;Te<re.length;++Te)Oe[Te]=re[Te];return Oe}else if(de){var Fe=new Uint8Array($e);if(Fe.set)Fe.set(re);else for(;Te<Ae;++Te)Fe[Te]=re[Te];return Fe}return re.length=$e,re}function Le(re){for(var ye=new Array(re),Ae=0;Ae<re;++Ae)ye[Ae]=0;return ye}function je(re,ye,Ae){var $e=1,Te=0,Oe=0,Fe=0,Ue=0,ze=re.length,He=de?new Uint16Array(32):Le(32);for(Oe=0;Oe<32;++Oe)He[Oe]=0;for(Oe=ze;Oe<Ae;++Oe)re[Oe]=0;ze=re.length;var qe=de?new Uint16Array(ze):Le(ze);for(Oe=0;Oe<ze;++Oe)He[Te=re[Oe]]++,$e<Te&&($e=Te),qe[Oe]=0;for(He[0]=0,Oe=1;Oe<=$e;++Oe)He[Oe+16]=Ue=Ue+He[Oe-1]<<1;for(Oe=0;Oe<ze;++Oe)Ue=re[Oe],Ue!=0&&(qe[Oe]=He[Ue+16]++);var Xe=0;for(Oe=0;Oe<ze;++Oe)if(Xe=re[Oe],Xe!=0)for(Ue=te(qe[Oe],$e)>>$e-Xe,Fe=(1<<$e+4-Xe)-1;Fe>=0;--Fe)ye[Ue|Fe<<Xe]=Xe&15|Oe<<4;return $e}var Pe=de?new Uint16Array(512):Le(512),me=de?new Uint16Array(32):Le(32);if(!de){for(var ne=0;ne<512;++ne)Pe[ne]=0;for(ne=0;ne<32;++ne)me[ne]=0}(function(){for(var re=[],ye=0;ye<32;ye++)re.push(5);je(re,me,32);var Ae=[];for(ye=0;ye<=143;ye++)Ae.push(8);for(;ye<=255;ye++)Ae.push(9);for(;ye<=279;ye++)Ae.push(7);for(;ye<=287;ye++)Ae.push(8);je(Ae,Pe,288)})();var ue=function(){for(var ye=de?new Uint8Array(32768):[],Ae=0,$e=0;Ae<fe.length-1;++Ae)for(;$e<fe[Ae+1];++$e)ye[$e]=Ae;for(;$e<32768;++$e)ye[$e]=29;var Te=de?new Uint8Array(259):[];for(Ae=0,$e=0;Ae<ce.length-1;++Ae)for(;$e<ce[Ae+1];++$e)Te[$e]=Ae;function Oe(Ue,ze){for(var He=0;He<Ue.length;){var qe=Math.min(65535,Ue.length-He),Xe=He+qe==Ue.length;for(ze.write_shift(1,+Xe),ze.write_shift(2,qe),ze.write_shift(2,~qe&65535);qe-- >0;)ze[ze.l++]=Ue[He++]}return ze.l}function Fe(Ue,ze){for(var He=0,qe=0,Xe=de?new Uint16Array(32768):[];qe<Ue.length;){var Ze=Math.min(65535,Ue.length-qe);if(Ze<10){for(He=ve(ze,He,+(qe+Ze==Ue.length)),He&7&&(He+=8-(He&7)),ze.l=He/8|0,ze.write_shift(2,Ze),ze.write_shift(2,~Ze&65535);Ze-- >0;)ze[ze.l++]=Ue[qe++];He=ze.l*8;continue}He=ve(ze,He,+(qe+Ze==Ue.length)+2);for(var at=0;Ze-- >0;){var Je=Ue[qe];at=(at<<5^Je)&32767;var Qe=-1,gt=0;if((Qe=Xe[at])&&(Qe|=qe&-32768,Qe>qe&&(Qe-=32768),Qe<qe))for(;Ue[Qe+gt]==Ue[qe+gt]&&gt<250;)++gt;if(gt>2){Je=Te[gt],Je<=22?He=ke(ze,He,ae[Je+1]>>1)-1:(ke(ze,He,3),He+=5,ke(ze,He,ae[Je-23]>>5),He+=3);var vt=Je<8?0:Je-4>>2;vt>0&&(Ce(ze,He,gt-ce[Je]),He+=vt),Je=ye[qe-Qe],He=ke(ze,He,ae[Je]>>3),He-=3;var _t=Je<4?0:Je-2>>1;_t>0&&(Ce(ze,He,qe-Qe-fe[Je]),He+=_t);for(var bt=0;bt<gt;++bt)Xe[at]=qe&32767,at=(at<<5^Ue[qe])&32767,++qe;Ze-=gt-1}else Je<=143?Je=Je+48:He=Se(ze,He,1),He=ke(ze,He,ae[Je]),Xe[at]=qe&32767,++qe}He=ke(ze,He,0)-1}return ze.l=(He+7)/8|0,ze.l}return function(ze,He){return ze.length<8?Oe(ze,He):Fe(ze,He)}}();function _e(re){var ye=new_buf(50+Math.floor(re.length*1.1)),Ae=ue(re,ye);return ye.slice(0,Ae)}var Ie=de?new Uint16Array(32768):Le(32768),Ne=de?new Uint16Array(32768):Le(32768),De=de?new Uint16Array(128):Le(128),et=1,We=1;function Ke(re,ye){var Ae=Ee(re,ye)+257;ye+=5;var $e=Ee(re,ye)+1;ye+=5;var Te=ge(re,ye)+4;ye+=4;for(var Oe=0,Fe=de?new Uint8Array(19):Le(19),Ue=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ze=1,He=de?new Uint8Array(8):Le(8),qe=de?new Uint8Array(8):Le(8),Xe=Fe.length,Ze=0;Ze<Te;++Ze)Fe[Q[Ze]]=Oe=ee(re,ye),ze<Oe&&(ze=Oe),He[Oe]++,ye+=3;var at=0;for(He[0]=0,Ze=1;Ze<=ze;++Ze)qe[Ze]=at=at+He[Ze-1]<<1;for(Ze=0;Ze<Xe;++Ze)(at=Fe[Ze])!=0&&(Ue[Ze]=qe[at]++);var Je=0;for(Ze=0;Ze<Xe;++Ze)if(Je=Fe[Ze],Je!=0){at=ae[Ue[Ze]]>>8-Je;for(var Qe=(1<<7-Je)-1;Qe>=0;--Qe)De[at|Qe<<Je]=Je&7|Ze<<3}var gt=[];for(ze=1;gt.length<Ae+$e;)switch(at=De[be(re,ye)],ye+=at&7,at>>>=3){case 16:for(Oe=3+pe(re,ye),ye+=2,at=gt[gt.length-1];Oe-- >0;)gt.push(at);break;case 17:for(Oe=3+ee(re,ye),ye+=3;Oe-- >0;)gt.push(0);break;case 18:for(Oe=11+be(re,ye),ye+=7;Oe-- >0;)gt.push(0);break;default:gt.push(at),ze<at&&(ze=at);break}var vt=gt.slice(0,Ae),_t=gt.slice(Ae);for(Ze=Ae;Ze<286;++Ze)vt[Ze]=0;for(Ze=$e;Ze<30;++Ze)_t[Ze]=0;return et=je(vt,Ie,286),We=je(_t,Ne,30),ye}function xt(re,ye){if(re[0]==3&&!(re[1]&3))return[new_raw_buf(ye),2];for(var Ae=0,$e=0,Te=new_unsafe_buf(ye||1<<18),Oe=0,Fe=Te.length>>>0,Ue=0,ze=0;!($e&1);){if($e=ee(re,Ae),Ae+=3,$e>>>1)$e>>1==1?(Ue=9,ze=5):(Ae=Ke(re,Ae),Ue=et,ze=We);else{Ae&7&&(Ae+=8-(Ae&7));var He=re[Ae>>>3]|re[(Ae>>>3)+1]<<8;if(Ae+=32,He>0)for(!ye&&Fe<Oe+He&&(Te=Re(Te,Oe+He),Fe=Te.length);He-- >0;)Te[Oe++]=re[Ae>>>3],Ae+=8;continue}for(;;){!ye&&Fe<Oe+32767&&(Te=Re(Te,Oe+32767),Fe=Te.length);var qe=xe(re,Ae,Ue),Xe=$e>>>1==1?Pe[qe]:Ie[qe];if(Ae+=Xe&15,Xe>>>=4,!(Xe>>>8&255))Te[Oe++]=Xe;else{if(Xe==256)break;Xe-=257;var Ze=Xe<8?0:Xe-4>>2;Ze>5&&(Ze=0);var at=Oe+ce[Xe];Ze>0&&(at+=xe(re,Ae,Ze),Ae+=Ze),qe=xe(re,Ae,ze),Xe=$e>>>1==1?me[qe]:Ne[qe],Ae+=Xe&15,Xe>>>=4;var Je=Xe<4?0:Xe-2>>1,Qe=fe[Xe];for(Je>0&&(Qe+=xe(re,Ae,Je),Ae+=Je),!ye&&Fe<at&&(Te=Re(Te,at+100),Fe=Te.length);Oe<at;)Te[Oe]=Te[Oe-Qe],++Oe}}}return ye?[Te,Ae+7>>>3]:[Te.slice(0,Oe),Ae+7>>>3]}function tt(re,ye){var Ae=re.slice(re.l||0),$e=xt(Ae,ye);return re.l+=$e[1],$e[0]}function st(re,ye){if(re)typeof console<"u"&&console.error(ye);else throw new Error(ye)}function It(re,ye){var Ae=re;prep_blob(Ae,0);var $e=[],Te=[],Oe={FileIndex:$e,FullPaths:Te};O(Oe,{root:ye.root});for(var Fe=Ae.length-4;(Ae[Fe]!=80||Ae[Fe+1]!=75||Ae[Fe+2]!=5||Ae[Fe+3]!=6)&&Fe>=0;)--Fe;Ae.l=Fe+4,Ae.l+=4;var Ue=Ae.read_shift(2);Ae.l+=6;var ze=Ae.read_shift(4);for(Ae.l=ze,Fe=0;Fe<Ue;++Fe){Ae.l+=20;var He=Ae.read_shift(4),qe=Ae.read_shift(4),Xe=Ae.read_shift(2),Ze=Ae.read_shift(2),at=Ae.read_shift(2);Ae.l+=8;var Je=Ae.read_shift(4),Qe=u(Ae.slice(Ae.l+Xe,Ae.l+Xe+Ze));Ae.l+=Xe+Ze+at;var gt=Ae.l;Ae.l=Je+4,Qe&&Qe[1]&&((Qe[1]||{}).usz&&(qe=Qe[1].usz),(Qe[1]||{}).csz&&(He=Qe[1].csz)),yt(Ae,He,qe,Oe,Qe),Ae.l=gt}return Oe}function yt(re,ye,Ae,$e,Te){re.l+=2;var Oe=re.read_shift(2),Fe=re.read_shift(2),Ue=l(re);if(Oe&8257)throw new Error("Unsupported ZIP encryption");for(var ze=re.read_shift(4),He=re.read_shift(4),qe=re.read_shift(4),Xe=re.read_shift(2),Ze=re.read_shift(2),at="",Je=0;Je<Xe;++Je)at+=String.fromCharCode(re[re.l++]);if(Ze){var Qe=u(re.slice(re.l,re.l+Ze));(Qe[21589]||{}).mt&&(Ue=Qe[21589].mt),(Qe[1]||{}).usz&&(qe=Qe[1].usz),(Qe[1]||{}).csz&&(He=Qe[1].csz),Te&&((Te[21589]||{}).mt&&(Ue=Te[21589].mt),(Te[1]||{}).usz&&(qe=Qe[1].usz),(Te[1]||{}).csz&&(He=Qe[1].csz))}re.l+=Ze;var gt=re.slice(re.l,re.l+He);switch(Fe){case 8:gt=L(re,qe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Fe)}var vt=!1;Oe&8&&(ze=re.read_shift(4),ze==134695760&&(ze=re.read_shift(4),vt=!0),He=re.read_shift(4),qe=re.read_shift(4)),He!=ye&&st(vt,"Bad compressed size: "+ye+" != "+He),qe!=Ae&&st(vt,"Bad uncompressed size: "+Ae+" != "+qe),Ct($e,at,gt,{unsafe:!0,mt:Ue})}function ut(re,ye){var Ae=ye||{},$e=[],Te=[],Oe=new_buf(1),Fe=Ae.compression?8:0,Ue=0,ze=0,He=0,qe=0,Xe=0,Ze=re.FullPaths[0],at=Ze,Je=re.FileIndex[0],Qe=[],gt=0;for(ze=1;ze<re.FullPaths.length;++ze)if(at=re.FullPaths[ze].slice(Ze.length),Je=re.FileIndex[ze],!(!Je.size||!Je.content||at=="Sh33tJ5")){var vt=qe,_t=new_buf(at.length);for(He=0;He<at.length;++He)_t.write_shift(1,at.charCodeAt(He)&127);_t=_t.slice(0,_t.l),Qe[Xe]=typeof Je.content=="string"?CRC32.bstr(Je.content,0):CRC32.buf(Je.content,0);var bt=typeof Je.content=="string"?s2a(Je.content):Je.content;Fe==8&&(bt=le(bt)),Oe=new_buf(30),Oe.write_shift(4,67324752),Oe.write_shift(2,20),Oe.write_shift(2,Ue),Oe.write_shift(2,Fe),Je.mt?c(Oe,Je.mt):Oe.write_shift(4,0),Oe.write_shift(-4,Qe[Xe]),Oe.write_shift(4,bt.length),Oe.write_shift(4,Je.content.length),Oe.write_shift(2,_t.length),Oe.write_shift(2,0),qe+=Oe.length,$e.push(Oe),qe+=_t.length,$e.push(_t),qe+=bt.length,$e.push(bt),Oe=new_buf(46),Oe.write_shift(4,33639248),Oe.write_shift(2,0),Oe.write_shift(2,20),Oe.write_shift(2,Ue),Oe.write_shift(2,Fe),Oe.write_shift(4,0),Oe.write_shift(-4,Qe[Xe]),Oe.write_shift(4,bt.length),Oe.write_shift(4,Je.content.length),Oe.write_shift(2,_t.length),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(4,0),Oe.write_shift(4,vt),gt+=Oe.l,Te.push(Oe),gt+=_t.length,Te.push(_t),++Xe}return Oe=new_buf(22),Oe.write_shift(4,101010256),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,Xe),Oe.write_shift(2,Xe),Oe.write_shift(4,gt),Oe.write_shift(4,qe),Oe.write_shift(2,0),bconcat([bconcat($e),bconcat(Te),Oe])}var At={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ht(re,ye){if(re.ctype)return re.ctype;var Ae=re.name||"",$e=Ae.match(/\.([^\.]+)$/);return $e&&At[$e[1]]||ye&&($e=(Ae=ye).match(/[\.\\]([^\.\\])+$/),$e&&At[$e[1]])?At[$e[1]]:"application/octet-stream"}function nt(re){for(var ye=Base64_encode(re),Ae=[],$e=0;$e<ye.length;$e+=76)Ae.push(ye.slice($e,$e+76));return Ae.join(`\r
`)+`\r
`}function Tt(re){var ye=re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(He){var qe=He.charCodeAt(0).toString(16).toUpperCase();return"="+(qe.length==1?"0"+qe:qe)});ye=ye.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ye.charAt(0)==`
`&&(ye="=0D"+ye.slice(1)),ye=ye.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ae=[],$e=ye.split(`\r
`),Te=0;Te<$e.length;++Te){var Oe=$e[Te];if(Oe.length==0){Ae.push("");continue}for(var Fe=0;Fe<Oe.length;){var Ue=76,ze=Oe.slice(Fe,Fe+Ue);ze.charAt(Ue-1)=="="?Ue--:ze.charAt(Ue-2)=="="?Ue-=2:ze.charAt(Ue-3)=="="&&(Ue-=3),ze=Oe.slice(Fe,Fe+Ue),Fe+=Ue,Fe<Oe.length&&(ze+="="),Ae.push(ze)}}return Ae.join(`\r
`)}function dt(re){for(var ye=[],Ae=0;Ae<re.length;++Ae){for(var $e=re[Ae];Ae<=re.length&&$e.charAt($e.length-1)=="=";)$e=$e.slice(0,$e.length-1)+re[++Ae];ye.push($e)}for(var Te=0;Te<ye.length;++Te)ye[Te]=ye[Te].replace(/[=][0-9A-Fa-f]{2}/g,function(Oe){return String.fromCharCode(parseInt(Oe.slice(1),16))});return s2a(ye.join(`\r
`))}function it(re,ye,Ae){for(var $e="",Te="",Oe="",Fe,Ue=0;Ue<10;++Ue){var ze=ye[Ue];if(!ze||ze.match(/^\s*$/))break;var He=ze.match(/^(.*?):\s*([^\s].*)$/);if(He)switch(He[1].toLowerCase()){case"content-location":$e=He[2].trim();break;case"content-type":Oe=He[2].trim();break;case"content-transfer-encoding":Te=He[2].trim();break}}switch(++Ue,Te.toLowerCase()){case"base64":Fe=s2a(Base64_decode(ye.slice(Ue).join("")));break;case"quoted-printable":Fe=dt(ye.slice(Ue));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Te)}var qe=Ct(re,$e.slice(Ae.length),Fe,{unsafe:!0});Oe&&(qe.ctype=Oe)}function Bt(re,ye){if(q(re.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ae=ye&&ye.root||"",$e=(has_buf&&Buffer.isBuffer(re)?re.toString("binary"):q(re)).split(`\r
`),Te=0,Oe="";for(Te=0;Te<$e.length;++Te)if(Oe=$e[Te],!!/^Content-Location:/i.test(Oe)&&(Oe=Oe.slice(Oe.indexOf("file")),Ae||(Ae=Oe.slice(0,Oe.lastIndexOf("/")+1)),Oe.slice(0,Ae.length)!=Ae))for(;Ae.length>0&&(Ae=Ae.slice(0,Ae.length-1),Ae=Ae.slice(0,Ae.lastIndexOf("/")+1),Oe.slice(0,Ae.length)!=Ae););var Fe=($e[1]||"").match(/boundary="(.*?)"/);if(!Fe)throw new Error("MAD cannot find boundary");var Ue="--"+(Fe[1]||""),ze=[],He=[],qe={FileIndex:ze,FullPaths:He};O(qe);var Xe,Ze=0;for(Te=0;Te<$e.length;++Te){var at=$e[Te];at!==Ue&&at!==Ue+"--"||(Ze++&&it(qe,$e.slice(Xe,Te),Ae),Xe=Te)}return qe}function pt(re,ye){var Ae=ye||{},$e=Ae.boundary||"SheetJS";$e="------="+$e;for(var Te=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+$e.slice(2)+'"',"","",""],Oe=re.FullPaths[0],Fe=Oe,Ue=re.FileIndex[0],ze=1;ze<re.FullPaths.length;++ze)if(Fe=re.FullPaths[ze].slice(Oe.length),Ue=re.FileIndex[ze],!(!Ue.size||!Ue.content||Fe=="Sh33tJ5")){Fe=Fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(gt){return"_x"+gt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(gt){return"_u"+gt.charCodeAt(0).toString(16)+"_"});for(var He=Ue.content,qe=has_buf&&Buffer.isBuffer(He)?He.toString("binary"):q(He),Xe=0,Ze=Math.min(1024,qe.length),at=0,Je=0;Je<=Ze;++Je)(at=qe.charCodeAt(Je))>=32&&at<128&&++Xe;var Qe=Xe>=Ze*4/5;Te.push($e),Te.push("Content-Location: "+(Ae.root||"file:///C:/SheetJS/")+Fe),Te.push("Content-Transfer-Encoding: "+(Qe?"quoted-printable":"base64")),Te.push("Content-Type: "+ht(Ue,Fe)),Te.push(""),Te.push(Qe?Tt(qe):nt(qe))}return Te.push($e+`--\r
`),Te.join(`\r
`)}function rt(re){var ye={};return O(ye,re),ye}function Ct(re,ye,Ae,$e){var Te=$e&&$e.unsafe;Te||O(re);var Oe=!Te&&CFB.find(re,ye);if(!Oe){var Fe=re.FullPaths[0];ye.slice(0,Fe.length)==Fe?Fe=ye:(Fe.slice(-1)!="/"&&(Fe+="/"),Fe=(Fe+ye).replace("//","/")),Oe={name:o(ye),type:2},re.FileIndex.push(Oe),re.FullPaths.push(Fe),Te||CFB.utils.cfb_gc(re)}return Oe.content=Ae,Oe.size=Ae?Ae.length:0,$e&&($e.CLSID&&(Oe.clsid=$e.CLSID),$e.mt&&(Oe.mt=$e.mt),$e.ct&&(Oe.ct=$e.ct)),Oe}function we(re,ye){O(re);var Ae=CFB.find(re,ye);if(Ae){for(var $e=0;$e<re.FileIndex.length;++$e)if(re.FileIndex[$e]==Ae)return re.FileIndex.splice($e,1),re.FullPaths.splice($e,1),!0}return!1}function Be(re,ye,Ae){O(re);var $e=CFB.find(re,ye);if($e){for(var Te=0;Te<re.FileIndex.length;++Te)if(re.FileIndex[Te]==$e)return re.FileIndex[Te].name=o(Ae),re.FullPaths[Te]=Ae,!0}return!1}function Me(re){Z(re,!0)}return e.find=ie,e.read=X,e.parse=b,e.write=j,e.writeFile=H,e.utils={cfb_new:rt,cfb_add:Ct,cfb_del:we,cfb_mov:Be,cfb_gc:Me,ReadShift,CheckField,prep_blob,bconcat,use_zlib:E,_deflateRaw:_e,_inflateRaw:tt,consts:P},e}(),_fs;function set_fs(t){_fs=t}function blobify(t){return typeof t=="string"?s2ab(t):Array.isArray(t)?a2u(t):t}function write_dl(t,e,n){if(typeof _fs<"u"&&_fs.writeFileSync)return n?_fs.writeFileSync(t,e,n):_fs.writeFileSync(t,e);if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=s2ab(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var a=n=="utf8"?utf8write(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,t);if(typeof Blob<"u"){var o=new Blob([blobify(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(o,t);if(typeof saveAs<"u")return saveAs(o,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var c=URL.createObjectURL(o);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),chrome.downloads.download({url:c,filename:t,saveAs:!0});var l=document.createElement("a");if(l.download!=null)return l.download=t,l.href=c,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(c)},6e4),c}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var u=File(t);return u.open("w"),u.encoding="binary",Array.isArray(e)&&(e=a2s(e)),u.write(e),u.close(),e}catch(d){if(!d.message||!d.message.match(/onstruct/))throw d}throw new Error("cannot save file "+t)}function read_binary(t){if(typeof _fs<"u")return _fs.readFileSync(t);if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+t)}function keys(t){for(var e=Object.keys(t),n=[],a=0;a<e.length;++a)Object.prototype.hasOwnProperty.call(t,e[a])&&n.push(e[a]);return n}function evert_key(t,e){for(var n=[],a=keys(t),o=0;o!==a.length;++o)n[t[a[o]][e]]==null&&(n[t[a[o]][e]]=a[o]);return n}function evert(t){for(var e=[],n=keys(t),a=0;a!==n.length;++a)e[t[n[a]]]=n[a];return e}function evert_num(t){for(var e=[],n=keys(t),a=0;a!==n.length;++a)e[t[n[a]]]=parseInt(n[a],10);return e}function evert_arr(t){for(var e=[],n=keys(t),a=0;a!==n.length;++a)e[t[n[a]]]==null&&(e[t[n[a]]]=[]),e[t[n[a]]].push(n[a]);return e}var basedate=new Date(1899,11,30,0,0,0);function datenum(t,e){var n=t.getTime();e&&(n-=1462*24*60*60*1e3);var a=basedate.getTime()+(t.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4;return(n-a)/(24*60*60*1e3)}var refdate=new Date,dnthresh=basedate.getTime()+(refdate.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4,refoffset=refdate.getTimezoneOffset();function numdate(t){var e=new Date;return e.setTime(t*24*60*60*1e3+dnthresh),e.getTimezoneOffset()!==refoffset&&e.setTime(e.getTime()+(e.getTimezoneOffset()-refoffset)*6e4),e}function parse_isodur(t){var e=0,n=0,a=!1,o=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!o)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var c=1;c!=o.length;++c)if(o[c]){switch(n=1,c>3&&(a=!0),o[c].slice(o[c].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+o[c].slice(o[c].length-1));case"D":n*=24;case"H":n*=60;case"M":if(a)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=n*parseInt(o[c],10)}return e}var good_pd_date_1=new Date("2017-02-19T19:06:09.000Z"),good_pd_date=isNaN(good_pd_date_1.getFullYear())?new Date("2/19/17"):good_pd_date_1,good_pd=good_pd_date.getFullYear()==2017;function parseDate(t,e){var n=new Date(t);if(good_pd)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(good_pd_date.getFullYear()==1917&&!isNaN(n.getFullYear())){var a=n.getFullYear();return t.indexOf(""+a)>-1||n.setFullYear(n.getFullYear()+100),n}var o=t.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+o[0],+o[1]-1,+o[2],+o[3]||0,+o[4]||0,+o[5]||0);return t.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function cc2str(t,e){if(has_buf&&Buffer.isBuffer(t)){if(e&&buf_utf16le){if(t[0]==255&&t[1]==254)return utf8write(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return utf8write(utf16beread(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return utf8write(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return utf8write(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(c){return n[c]||c})}catch{}for(var a=[],o=0;o!=t.length;++o)a.push(String.fromCharCode(t[o]));return a.join("")}function dup(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=dup(t[n]));return e}function fill(t,e){for(var n="";n.length<e;)n+=t;return n}function fuzzynum(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,a=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(a))||(a=a.replace(/[(](.*)[)]/,function(o,c){return n=-n,c}),!isNaN(e=Number(a)))?e/n:e}var FDRE1=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/;function fuzzytime1(t){return t[2]?t[3]?t[4]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[4],parseFloat(t[3])*1e3):new Date(1899,11,30,t[7]=="p"?12:0,+t[1],+t[2],parseFloat(t[3])*1e3):t[5]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[5],t[6]?parseFloat(t[6])*1e3:0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],0,0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),0,0,0)}var lower_months=["january","february","march","april","may","june","july","august","september","october","november","december"];function fuzzydate(t){var e=t.toLowerCase(),n=e.replace(/\s+/g," ").trim(),a=n.match(FDRE1);if(a)return fuzzytime1(a);var o=new Date(t),c=new Date(NaN),l=o.getYear();o.getMonth();var u=o.getDate();if(isNaN(u))return c;if(e.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(e=e.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),e.length>3&&lower_months.indexOf(e)==-1)return c}else if(e.replace(/[ap]m?/,"").match(/[a-z]/))return c;return l<0||l>8099||t.match(/[^-0-9:,\/\\]/)?c:o}var split_regex=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(n,a,o){if(t||typeof a=="string")return n.split(a);for(var c=n.split(a),l=[c[0]],u=1;u<c.length;++u)l.push(o),l.push(c[u]);return l}}();function getdatastr(t){return t?t.content&&t.type?cc2str(t.content,!0):t.data?debom(t.data):t.asNodeBuffer&&has_buf?debom(t.asNodeBuffer().toString("binary")):t.asBinary?debom(t.asBinary()):t._data&&t._data.getContent?debom(cc2str(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function getdatabin(t){if(!t)return null;if(t.data)return char_codes(t.data);if(t.asNodeBuffer&&has_buf)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?char_codes(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function getdata(t){return t&&t.name.slice(-4)===".bin"?getdatabin(t):getdatastr(t)}function safegetzipfile(t,e){for(var n=t.FullPaths||keys(t.files),a=e.toLowerCase().replace(/[\/]/g,"\\"),o=a.replace(/\\/g,"/"),c=0;c<n.length;++c){var l=n[c].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==l||o==l)return t.files?t.files[n[c]]:t.FileIndex[c]}return null}function getzipfile(t,e){var n=safegetzipfile(t,e);if(n==null)throw new Error("Cannot find file "+e+" in zip");return n}function getzipdata(t,e,n){if(!n)return getdata(getzipfile(t,e));if(!e)return null;try{return getzipdata(t,e)}catch{return null}}function getzipstr(t,e,n){if(!n)return getdatastr(getzipfile(t,e));if(!e)return null;try{return getzipstr(t,e)}catch{return null}}function getzipbin(t,e,n){if(!n)return getdatabin(getzipfile(t,e));if(!e)return null;try{return getzipbin(t,e)}catch{return null}}function zipentries(t){for(var e=t.FullPaths||keys(t.files),n=[],a=0;a<e.length;++a)e[a].slice(-1)!="/"&&n.push(e[a].replace(/^Root Entry[\/]/,""));return n.sort()}function zip_add_file(t,e,n){if(t.FullPaths){if(typeof n=="string"){var a;return has_buf?a=Buffer_from(n):a=utf8decode(n),CFB.utils.cfb_add(t,e,a)}CFB.utils.cfb_add(t,e,n)}else t.file(e,n)}function zip_new(){return CFB.utils.cfb_new()}function zip_read(t,e){switch(e.type){case"base64":return CFB.read(t,{type:"base64"});case"binary":return CFB.read(t,{type:"binary"});case"buffer":case"array":return CFB.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function resolve_path(t,e){if(t.charAt(0)=="/")return t.slice(1);var n=e.split("/");e.slice(-1)!="/"&&n.pop();for(var a=t.split("/");a.length!==0;){var o=a.shift();o===".."?n.pop():o!=="."&&n.push(o)}return n.join("/")}var XML_HEADER=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,attregexg=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,tagregex1=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,tagregex2=/<[^>]*>/g,tagregex=XML_HEADER.match(tagregex1)?tagregex1:tagregex2,nsregex=/<\w*:/,nsregex2=/<(\/?)\w+:/;function parsexmltag(t,e,n){for(var a={},o=0,c=0;o!==t.length&&!((c=t.charCodeAt(o))===32||c===10||c===13);++o);if(e||(a[0]=t.slice(0,o)),o===t.length)return a;var l=t.match(attregexg),u=0,d="",m=0,b="",x="",_=1;if(l)for(m=0;m!=l.length;++m){for(x=l[m],c=0;c!=x.length&&x.charCodeAt(c)!==61;++c);for(b=x.slice(0,c).trim();x.charCodeAt(c+1)==32;)++c;for(_=(o=x.charCodeAt(c+1))==34||o==39?1:0,d=x.slice(c+1+_,x.length-_),u=0;u!=b.length&&b.charCodeAt(u)!==58;++u);if(u===b.length)b.indexOf("_")>0&&(b=b.slice(0,b.indexOf("_"))),a[b]=d,n||(a[b.toLowerCase()]=d);else{var w=(u===5&&b.slice(0,5)==="xmlns"?"xmlns":"")+b.slice(u+1);if(a[w]&&b.slice(u-3,u)=="ext")continue;a[w]=d,n||(a[w.toLowerCase()]=d)}}return a}function strip_ns(t){return t.replace(nsregex2,"<$1")}var encodings={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rencoding=evert(encodings),unescapexml=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;function n(a){var o=a+"",c=o.indexOf("<![CDATA[");if(c==-1)return o.replace(t,function(u,d){return encodings[u]||String.fromCharCode(parseInt(d,u.indexOf("x")>-1?16:10))||u}).replace(e,function(u,d){return String.fromCharCode(parseInt(d,16))});var l=o.indexOf("]]>");return n(o.slice(0,c))+o.slice(c+9,l)+n(o.slice(l+3))}return function(o,c){var l=n(o);return c?l.replace(/\r\n/g,`
`):l}}(),decregex=/[&<>'"]/g,charegex=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function escapexml(t){var e=t+"";return e.replace(decregex,function(n){return rencoding[n]}).replace(charegex,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function escapexmltag(t){return escapexml(t).replace(/ /g,"_x0020_")}var htmlcharegex=/[\u0000-\u001f]/g;function escapehtml(t){var e=t+"";return e.replace(decregex,function(n){return rencoding[n]}).replace(/\n/g,"<br/>").replace(htmlcharegex,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function escapexlml(t){var e=t+"";return e.replace(decregex,function(n){return rencoding[n]}).replace(htmlcharegex,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}var xlml_fixstr=function(){var t=/&#(\d+);/g;function e(n,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(t,e)}}();function xlml_unfixstr(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function parsexmlbool(t){switch(t){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function utf8reada(t){for(var e="",n=0,a=0,o=0,c=0,l=0,u=0;n<t.length;){if(a=t.charCodeAt(n++),a<128){e+=String.fromCharCode(a);continue}if(o=t.charCodeAt(n++),a>191&&a<224){l=(a&31)<<6,l|=o&63,e+=String.fromCharCode(l);continue}if(c=t.charCodeAt(n++),a<240){e+=String.fromCharCode((a&15)<<12|(o&63)<<6|c&63);continue}l=t.charCodeAt(n++),u=((a&7)<<18|(o&63)<<12|(c&63)<<6|l&63)-65536,e+=String.fromCharCode(55296+(u>>>10&1023)),e+=String.fromCharCode(56320+(u&1023))}return e}function utf8readb(t){var e=new_raw_buf(2*t.length),n,a,o=1,c=0,l=0,u;for(a=0;a<t.length;a+=o)o=1,(u=t.charCodeAt(a))<128?n=u:u<224?(n=(u&31)*64+(t.charCodeAt(a+1)&63),o=2):u<240?(n=(u&15)*4096+(t.charCodeAt(a+1)&63)*64+(t.charCodeAt(a+2)&63),o=3):(o=4,n=(u&7)*262144+(t.charCodeAt(a+1)&63)*4096+(t.charCodeAt(a+2)&63)*64+(t.charCodeAt(a+3)&63),n-=65536,l=55296+(n>>>10&1023),n=56320+(n&1023)),l!==0&&(e[c++]=l&255,e[c++]=l>>>8,l=0),e[c++]=n%256,e[c++]=n>>>8;return e.slice(0,c).toString("ucs2")}function utf8readc(t){return Buffer_from(t,"binary").toString("utf8")}var utf8corpus="foo bar bazâð£",utf8read=has_buf&&(utf8readc(utf8corpus)==utf8reada(utf8corpus)&&utf8readc||utf8readb(utf8corpus)==utf8reada(utf8corpus)&&utf8readb)||utf8reada,utf8write=has_buf?function(t){return Buffer_from(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,a=0,o=0;n<t.length;)switch(a=t.charCodeAt(n++),!0){case a<128:e.push(String.fromCharCode(a));break;case a<2048:e.push(String.fromCharCode(192+(a>>6))),e.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,o=t.charCodeAt(n++)-56320+(a<<10),e.push(String.fromCharCode(240+(o>>18&7))),e.push(String.fromCharCode(144+(o>>12&63))),e.push(String.fromCharCode(128+(o>>6&63))),e.push(String.fromCharCode(128+(o&63)));break;default:e.push(String.fromCharCode(224+(a>>12))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)))}return e.join("")},matchtag=function(){var t={};return function(n,a){var o=n+"|"+(a||"");return t[o]?t[o]:t[o]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",a||"")}}(),htmldecode=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var a=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),o=0;o<t.length;++o)a=a.replace(t[o][0],t[o][1]);return a}}(),vtregex=function(){var t={};return function(n){return t[n]!==void 0?t[n]:t[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}}(),vtvregex=/<\/?(?:vt:)?variant>/g,vtmregex=/<(?:vt:)([^>]*)>([\s\S]*)</;function parseVector(t,e){var n=parsexmltag(t),a=t.match(vtregex(n.baseType))||[],o=[];if(a.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+a.length+" != "+n.size);return o}return a.forEach(function(c){var l=c.replace(vtvregex,"").match(vtmregex);l&&o.push({v:utf8read(l[2]),t:l[1]})}),o}var wtregex=/(^\s|\s$|\n)/;function writetag(t,e){return"<"+t+(e.match(wtregex)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function wxt_helper(t){return keys(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function writextag(t,e,n){return"<"+t+(n!=null?wxt_helper(n):"")+(e!=null?(e.match(wtregex)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function write_w3cdtf(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function write_vt(t,e){switch(typeof t){case"string":var n=writextag("vt:lpwstr",escapexml(t));return e&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return writextag((t|0)==t?"vt:i4":"vt:r8",escapexml(String(t)));case"boolean":return writextag("vt:bool",t?"true":"false")}if(t instanceof Date)return writextag("vt:filetime",write_w3cdtf(t));throw new Error("Unable to serialize "+t)}function xlml_normalize(t){if(has_buf&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return utf8read(a2s(ab2a(t)));throw new Error("Bad input format: expected Buffer or string")}var xlmlregex=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/](?:[^>=]|="[^"]*?")*)?>/mg,XMLNS={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},XMLNS_main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],XLMLNS={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function read_double_le(t,e){for(var n=1-2*(t[e+7]>>>7),a=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),o=t[e+6]&15,c=5;c>=0;--c)o=o*256+t[e+c];return a==2047?o==0?n*(1/0):NaN:(a==0?a=-1022:(a-=1023,o+=Math.pow(2,52)),n*Math.pow(2,a-52)*o)}function write_double_le(t,e,n){var a=(e<0||1/e==-1/0?1:0)<<7,o=0,c=0,l=a?-e:e;isFinite(l)?l==0?o=c=0:(o=Math.floor(Math.log(l)/Math.LN2),c=l*Math.pow(2,52-o),o<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?o=-1022:(c-=Math.pow(2,52),o+=1023)):(o=2047,c=isNaN(e)?26985:0);for(var u=0;u<=5;++u,c/=256)t[n+u]=c&255;t[n+6]=(o&15)<<4|c&15,t[n+7]=o>>4|a}var ___toBuffer=function(t){for(var e=[],n=10240,a=0;a<t[0].length;++a)if(t[0][a])for(var o=0,c=t[0][a].length;o<c;o+=n)e.push.apply(e,t[0][a].slice(o,o+n));return e},__toBuffer=has_buf?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Buffer_from(e)})):___toBuffer(t)}:___toBuffer,___utf16le=function(t,e,n){for(var a=[],o=e;o<n;o+=2)a.push(String.fromCharCode(__readUInt16LE(t,o)));return a.join("").replace(chr0,"")},__utf16le=has_buf?function(t,e,n){return!Buffer.isBuffer(t)||!buf_utf16le?___utf16le(t,e,n):t.toString("utf16le",e,n).replace(chr0,"")}:___utf16le,___hexlify=function(t,e,n){for(var a=[],o=e;o<e+n;++o)a.push(("0"+t[o].toString(16)).slice(-2));return a.join("")},__hexlify=has_buf?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):___hexlify(t,e,n)}:___hexlify,___utf8=function(t,e,n){for(var a=[],o=e;o<n;o++)a.push(String.fromCharCode(__readUInt8(t,o)));return a.join("")},__utf8=has_buf?function t(e,n,a){return Buffer.isBuffer(e)?e.toString("utf8",n,a):___utf8(e,n,a)}:___utf8,___lpstr=function(t,e){var n=__readUInt32LE(t,e);return n>0?__utf8(t,e+4,e+4+n-1):""},__lpstr=___lpstr,___cpstr=function(t,e){var n=__readUInt32LE(t,e);return n>0?__utf8(t,e+4,e+4+n-1):""},__cpstr=___cpstr,___lpwstr=function(t,e){var n=2*__readUInt32LE(t,e);return n>0?__utf8(t,e+4,e+4+n-1):""},__lpwstr=___lpwstr,___lpp4=function t(e,n){var a=__readUInt32LE(e,n);return a>0?__utf16le(e,n+4,n+4+a):""},__lpp4=___lpp4,___8lpp4=function(t,e){var n=__readUInt32LE(t,e);return n>0?__utf8(t,e+4,e+4+n):""},__8lpp4=___8lpp4,___double=function(t,e){return read_double_le(t,e)},__double=___double,is_buf=function t(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};has_buf&&(__lpstr=function(e,n){if(!Buffer.isBuffer(e))return ___lpstr(e,n);var a=e.readUInt32LE(n);return a>0?e.toString("utf8",n+4,n+4+a-1):""},__cpstr=function(e,n){if(!Buffer.isBuffer(e))return ___cpstr(e,n);var a=e.readUInt32LE(n);return a>0?e.toString("utf8",n+4,n+4+a-1):""},__lpwstr=function(e,n){if(!Buffer.isBuffer(e)||!buf_utf16le)return ___lpwstr(e,n);var a=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+a-1)},__lpp4=function(e,n){if(!Buffer.isBuffer(e)||!buf_utf16le)return ___lpp4(e,n);var a=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+a)},__8lpp4=function(e,n){if(!Buffer.isBuffer(e))return ___8lpp4(e,n);var a=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+a)},__double=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):___double(e,n)},is_buf=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var __readUInt8=function(t,e){return t[e]},__readUInt16LE=function(t,e){return t[e+1]*(1<<8)+t[e]},__readInt16LE=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},__readUInt32LE=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},__readInt32LE=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},__readInt32BE=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function ReadShift(t,e){var n="",a,o,c=[],l,u,d,m;switch(e){case"dbcs":if(m=this.l,has_buf&&Buffer.isBuffer(this)&&buf_utf16le)n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(d=0;d<t;++d)n+=String.fromCharCode(__readUInt16LE(this,m)),m+=2;t*=2;break;case"utf8":n=__utf8(this,this.l,this.l+t);break;case"utf16le":t*=2,n=__utf16le(this,this.l,this.l+t);break;case"wstr":return ReadShift.call(this,t,"dbcs");case"lpstr-ansi":n=__lpstr(this,this.l),t=4+__readUInt32LE(this,this.l);break;case"lpstr-cp":n=__cpstr(this,this.l),t=4+__readUInt32LE(this,this.l);break;case"lpwstr":n=__lpwstr(this,this.l),t=4+2*__readUInt32LE(this,this.l);break;case"lpp4":t=4+__readUInt32LE(this,this.l),n=__lpp4(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+__readUInt32LE(this,this.l),n=__8lpp4(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(l=__readUInt8(this,this.l+t++))!==0;)c.push(_getchar(l));n=c.join("");break;case"_wstr":for(t=0,n="";(l=__readUInt16LE(this,this.l+t))!==0;)c.push(_getchar(l)),t+=2;t+=2,n=c.join("");break;case"dbcs-cont":for(n="",m=this.l,d=0;d<t;++d){if(this.lens&&this.lens.indexOf(m)!==-1)return l=__readUInt8(this,m),this.l=m+1,u=ReadShift.call(this,t-d,l?"dbcs-cont":"sbcs-cont"),c.join("")+u;c.push(_getchar(__readUInt16LE(this,m))),m+=2}n=c.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",m=this.l,d=0;d!=t;++d){if(this.lens&&this.lens.indexOf(m)!==-1)return l=__readUInt8(this,m),this.l=m+1,u=ReadShift.call(this,t-d,l?"dbcs-cont":"sbcs-cont"),c.join("")+u;c.push(_getchar(__readUInt8(this,m))),m+=1}n=c.join("");break;default:switch(t){case 1:return a=__readUInt8(this,this.l),this.l++,a;case 2:return a=(e==="i"?__readInt16LE:__readUInt16LE)(this,this.l),this.l+=2,a;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(a=(t>0?__readInt32LE:__readInt32BE)(this,this.l),this.l+=4,a):(o=__readUInt32LE(this,this.l),this.l+=4,o);case 8:case-8:if(e==="f")return t==8?o=__double(this,this.l):o=__double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,o;t=8;case 16:n=__hexlify(this,this.l,t);break}}return this.l+=t,n}var __writeUInt32LE=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},__writeInt32LE=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},__writeUInt16LE=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function WriteShift(t,e,n){var a=0,o=0;if(n==="dbcs"){for(o=0;o!=e.length;++o)__writeUInt16LE(this,e.charCodeAt(o),this.l+2*o);a=2*e.length}else if(n==="sbcs"||n=="cpstr"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),o=0;o!=e.length;++o)this[this.l+o]=e.charCodeAt(o)&255;a=e.length}else if(n==="hex"){for(;o<t;++o)this[this.l++]=parseInt(e.slice(2*o,2*o+2),16)||0;return this}else if(n==="utf16le"){var c=Math.min(this.l+t,this.length);for(o=0;o<Math.min(e.length,t);++o){var l=e.charCodeAt(o);this[this.l++]=l&255,this[this.l++]=l>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(t){case 1:a=1,this[this.l]=e&255;break;case 2:a=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:a=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:a=4,__writeUInt32LE(this,e,this.l);break;case 8:if(a=8,n==="f"){write_double_le(this,e,this.l);break}case 16:break;case-4:a=4,__writeInt32LE(this,e,this.l);break}return this.l+=a,this}function CheckField(t,e){var n=__hexlify(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function prep_blob(t,e){t.l=e,t.read_shift=ReadShift,t.chk=CheckField,t.write_shift=WriteShift}function parsenoop(t,e){t.l+=e}function new_buf(t){var e=new_raw_buf(t);return prep_blob(e,0),e}function recordhopper(t,e,n){if(t){var a,o,c;prep_blob(t,t.l||0);for(var l=t.length,u=0,d=0;t.l<l;){u=t.read_shift(1),u&128&&(u=(u&127)+((t.read_shift(1)&127)<<7));var m=XLSBRecordEnum[u]||XLSBRecordEnum[65535];for(a=t.read_shift(1),c=a&127,o=1;o<4&&a&128;++o)c+=((a=t.read_shift(1))&127)<<7*o;d=t.l+c;var b=m.f&&m.f(t,c,n);if(t.l=d,e(b,m,u))return}}}function buf_array(){var t=[],e=has_buf?256:2048,n=function(m){var b=new_buf(m);return prep_blob(b,0),b},a=n(e),o=function(){a&&(a.l&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&t.push(a)),a=null)},c=function(m){return a&&m<a.length-a.l?a:(o(),a=n(Math.max(m+1,e)))},l=function(){return o(),bconcat(t)},u=function(m){o(),a=m,a.l==null&&(a.l=a.length),c(e)};return{next:c,push:u,end:l,_bufs:t}}function write_record(t,e,n,a){var o=+e,c;if(!isNaN(o)){a||(a=XLSBRecordEnum[o].p||(n||[]).length||0),c=1+(o>=128?1:0)+1,a>=128&&++c,a>=16384&&++c,a>=2097152&&++c;var l=t.next(c);o<=127?l.write_shift(1,o):(l.write_shift(1,(o&127)+128),l.write_shift(1,o>>7));for(var u=0;u!=4;++u)if(a>=128)l.write_shift(1,(a&127)+128),a>>=7;else{l.write_shift(1,a);break}a>0&&is_buf(n)&&t.push(n)}}function shift_cell_xls(t,e,n){var a=dup(t);if(e.s?(a.cRel&&(a.c+=e.s.c),a.rRel&&(a.r+=e.s.r)):(a.cRel&&(a.c+=e.c),a.rRel&&(a.r+=e.r)),!n||n.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function shift_range_xls(t,e,n){var a=dup(t);return a.s=shift_cell_xls(a.s,e.s,n),a.e=shift_cell_xls(a.e,e.s,n),a}function encode_cell_xls(t,e){if(t.cRel&&t.c<0)for(t=dup(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=dup(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=encode_cell(t);return!t.cRel&&t.cRel!=null&&(n=fix_col(n)),!t.rRel&&t.rRel!=null&&(n=fix_row(n)),n}function encode_range_xls(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+encode_col(t.s.c)+":"+(t.e.cRel?"":"$")+encode_col(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+encode_row(t.s.r)+":"+(t.e.rRel?"":"$")+encode_row(t.e.r):encode_cell_xls(t.s,e.biff)+":"+encode_cell_xls(t.e,e.biff)}function decode_row(t){return parseInt(unfix_row(t),10)-1}function encode_row(t){return""+(t+1)}function fix_row(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function unfix_row(t){return t.replace(/\$(\d+)$/,"$1")}function decode_col(t){for(var e=unfix_col(t),n=0,a=0;a!==e.length;++a)n=26*n+e.charCodeAt(a)-64;return n-1}function encode_col(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function fix_col(t){return t.replace(/^([A-Z])/,"$$$1")}function unfix_col(t){return t.replace(/^\$([A-Z])/,"$1")}function split_cell(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function decode_cell(t){for(var e=0,n=0,a=0;a<t.length;++a){var o=t.charCodeAt(a);o>=48&&o<=57?e=10*e+(o-48):o>=65&&o<=90&&(n=26*n+(o-64))}return{c:n-1,r:e-1}}function encode_cell(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function decode_range(t){var e=t.indexOf(":");return e==-1?{s:decode_cell(t),e:decode_cell(t)}:{s:decode_cell(t.slice(0,e)),e:decode_cell(t.slice(e+1))}}function encode_range(t,e){return typeof e>"u"||typeof e=="number"?encode_range(t.s,t.e):(typeof t!="string"&&(t=encode_cell(t)),typeof e!="string"&&(e=encode_cell(e)),t==e?t:t+":"+e)}function fix_range(t){var e=decode_range(t);return"$"+encode_col(e.s.c)+"$"+encode_row(e.s.r)+":$"+encode_col(e.e.c)+"$"+encode_row(e.e.r)}function formula_quote_sheet_name(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t.replace(/'/g,"''")+"'":t}function safe_decode_range(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,a=0,o=0,c=t.length;for(n=0;a<c&&!((o=t.charCodeAt(a)-64)<1||o>26);++a)n=26*n+o;for(e.s.c=--n,n=0;a<c&&!((o=t.charCodeAt(a)-48)<0||o>9);++a)n=10*n+o;if(e.s.r=--n,a===c||o!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++a,n=0;a!=c&&!((o=t.charCodeAt(a)-64)<1||o>26);++a)n=26*n+o;for(e.e.c=--n,n=0;a!=c&&!((o=t.charCodeAt(a)-48)<0||o>9);++a)n=10*n+o;return e.e.r=--n,e}function safe_format_cell(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=SSF_format(t.z,n?datenum(e):e)}catch{}try{return t.w=SSF_format((t.XF||{}).numFmtId||(n?14:0),n?datenum(e):e)}catch{return""+e}}function format_cell(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?BErr[t.v]||t.v:e==null?safe_format_cell(t,t.v):safe_format_cell(t,e))}function sheet_to_workbook(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",a={};return a[n]=t,{SheetNames:[n],Sheets:a}}function sheet_add_aoa(t,e,n){var a=n||{},o=t?t["!data"]!=null:a.dense,c=t||{};o&&!c["!data"]&&(c["!data"]=[]);var l=0,u=0;if(c&&a.origin!=null){if(typeof a.origin=="number")l=a.origin;else{var d=typeof a.origin=="string"?decode_cell(a.origin):a.origin;l=d.r,u=d.c}c["!ref"]||(c["!ref"]="A1:A1")}var m={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var b=safe_decode_range(c["!ref"]);m.s.c=b.s.c,m.s.r=b.s.r,m.e.c=Math.max(m.e.c,b.e.c),m.e.r=Math.max(m.e.r,b.e.r),l==-1&&(m.e.r=l=b.e.r+1)}for(var x=[],_=0;_!=e.length;++_)if(e[_]){if(!Array.isArray(e[_]))throw new Error("aoa_to_sheet expects an array of arrays");var w=l+_,S=""+(w+1);o&&(c["!data"][w]||(c["!data"][w]=[]),x=c["!data"][w]);for(var T=0;T!=e[_].length;++T)if(!(typeof e[_][T]>"u")){var B={v:e[_][T]},C=u+T;if(m.s.r>w&&(m.s.r=w),m.s.c>C&&(m.s.c=C),m.e.r<w&&(m.e.r=w),m.e.c<C&&(m.e.c=C),e[_][T]&&typeof e[_][T]=="object"&&!Array.isArray(e[_][T])&&!(e[_][T]instanceof Date))B=e[_][T];else if(Array.isArray(B.v)&&(B.f=e[_][T][1],B.v=B.v[0]),B.v===null)if(B.f)B.t="n";else if(a.nullError)B.t="e",B.v=0;else if(a.sheetStubs)B.t="z";else continue;else typeof B.v=="number"?B.t="n":typeof B.v=="boolean"?B.t="b":B.v instanceof Date?(B.z=a.dateNF||table_fmt[14],a.cellDates?(B.t="d",B.w=SSF_format(B.z,datenum(B.v,a.date1904))):(B.t="n",B.v=datenum(B.v,a.date1904),B.w=SSF_format(B.z,B.v))):B.t="s";if(o)x[C]&&x[C].z&&(B.z=x[C].z),x[C]=B;else{var D=encode_col(C)+S;c[D]&&c[D].z&&(B.z=c[D].z),c[D]=B}}}return m.s.c<1e7&&(c["!ref"]=encode_range(m)),c}function aoa_to_sheet(t,e){return sheet_add_aoa(null,t,e)}function parse_Int32LE(t){return t.read_shift(4,"i")}function write_UInt32LE(t,e){return e||(e=new_buf(4)),e.write_shift(4,t),e}function parse_XLWideString(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function write_XLWideString(t,e){var n=!1;return e==null&&(n=!0,e=new_buf(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function parse_StrRun(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function write_StrRun(t,e){return e||(e=new_buf(4)),e.write_shift(2,t.ich||0),e.write_shift(2,t.ifnt||0),e}function parse_RichStr(t,e){var n=t.l,a=t.read_shift(1),o=parse_XLWideString(t),c=[],l={t:o,h:o};if(a&1){for(var u=t.read_shift(4),d=0;d!=u;++d)c.push(parse_StrRun(t));l.r=c}else l.r=[{ich:0,ifnt:0}];return t.l=n+e,l}function write_RichStr(t,e){var n=!1;return e==null&&(n=!0,e=new_buf(15+4*t.t.length)),e.write_shift(1,0),write_XLWideString(t.t,e),n?e.slice(0,e.l):e}var parse_BrtCommentText=parse_RichStr;function write_BrtCommentText(t,e){var n=!1;return e==null&&(n=!0,e=new_buf(23+4*t.t.length)),e.write_shift(1,1),write_XLWideString(t.t,e),e.write_shift(4,1),write_StrRun({ich:0,ifnt:0},e),n?e.slice(0,e.l):e}function parse_XLSBCell(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function write_XLSBCell(t,e){return e==null&&(e=new_buf(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function parse_XLSBShortCell(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function write_XLSBShortCell(t,e){return e==null&&(e=new_buf(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var parse_XLSBCodeName=parse_XLWideString,write_XLSBCodeName=write_XLWideString;function parse_XLNullableWideString(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function write_XLNullableWideString(t,e){var n=!1;return e==null&&(n=!0,e=new_buf(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var parse_XLNameWideString=parse_XLWideString,parse_RelID=parse_XLNullableWideString,write_RelID=write_XLNullableWideString;function parse_RkNumber(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,a=e[0]&2;t.l+=4;var o=a===0?__double([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):__readInt32LE(e,0)>>2;return n?o/100:o}function write_RkNumber(t,e){e==null&&(e=new_buf(4));var n=0,a=0,o=t*100;if(t==(t|0)&&t>=-(1<<29)&&t<1<<29?a=1:o==(o|0)&&o>=-(1<<29)&&o<1<<29&&(a=1,n=1),a)e.write_shift(-4,((n?o:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function parse_RfX(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function write_RfX(t,e){return e||(e=new_buf(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var parse_UncheckedRfX=parse_RfX,write_UncheckedRfX=write_RfX;function parse_Xnum(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function write_Xnum(t,e){return(e||new_buf(8)).write_shift(8,t,"f")}function parse_BrtColor(t){var e={},n=t.read_shift(1),a=n>>>1,o=t.read_shift(1),c=t.read_shift(2,"i"),l=t.read_shift(1),u=t.read_shift(1),d=t.read_shift(1);switch(t.l++,a){case 0:e.auto=1;break;case 1:e.index=o;var m=XLSIcv[o];m&&(e.rgb=rgb2Hex(m));break;case 2:e.rgb=rgb2Hex([l,u,d]);break;case 3:e.theme=o;break}return c!=0&&(e.tint=c>0?c/32767:c/32768),e}function write_BrtColor(t,e){if(e||(e=new_buf(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var a=t.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),e.write_shift(1,parseInt(a.slice(0,2),16)),e.write_shift(1,parseInt(a.slice(2,4),16)),e.write_shift(1,parseInt(a.slice(4,6),16)),e.write_shift(1,255)}return e}function parse_FontFlags(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function write_FontFlags(t,e){e||(e=new_buf(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}function parse_ClipboardFormatOrString(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=t.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function parse_ClipboardFormatOrAnsiString(t){return parse_ClipboardFormatOrString(t,1)}function parse_ClipboardFormatOrUnicodeString(t){return parse_ClipboardFormatOrString(t,2)}var VT_I2=2,VT_I4=3,VT_BOOL=11,VT_VARIANT=12,VT_UI4=19,VT_FILETIME=64,VT_BLOB=65,VT_CF=71,VT_VECTOR_VARIANT=4108,VT_VECTOR_LPSTR=4126,VT_STRING=80,VT_USTR=81,VT_CUSTOM=[VT_STRING,VT_USTR],DocSummaryPIDDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Category",t:VT_STRING},3:{n:"PresentationFormat",t:VT_STRING},4:{n:"ByteCount",t:VT_I4},5:{n:"LineCount",t:VT_I4},6:{n:"ParagraphCount",t:VT_I4},7:{n:"SlideCount",t:VT_I4},8:{n:"NoteCount",t:VT_I4},9:{n:"HiddenCount",t:VT_I4},10:{n:"MultimediaClipCount",t:VT_I4},11:{n:"ScaleCrop",t:VT_BOOL},12:{n:"HeadingPairs",t:VT_VECTOR_VARIANT},13:{n:"TitlesOfParts",t:VT_VECTOR_LPSTR},14:{n:"Manager",t:VT_STRING},15:{n:"Company",t:VT_STRING},16:{n:"LinksUpToDate",t:VT_BOOL},17:{n:"CharacterCount",t:VT_I4},19:{n:"SharedDoc",t:VT_BOOL},22:{n:"HyperlinksChanged",t:VT_BOOL},23:{n:"AppVersion",t:VT_I4,p:"version"},24:{n:"DigSig",t:VT_BLOB},26:{n:"ContentType",t:VT_STRING},27:{n:"ContentStatus",t:VT_STRING},28:{n:"Language",t:VT_STRING},29:{n:"Version",t:VT_STRING},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},SummaryPIDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Title",t:VT_STRING},3:{n:"Subject",t:VT_STRING},4:{n:"Author",t:VT_STRING},5:{n:"Keywords",t:VT_STRING},6:{n:"Comments",t:VT_STRING},7:{n:"Template",t:VT_STRING},8:{n:"LastAuthor",t:VT_STRING},9:{n:"RevNumber",t:VT_STRING},10:{n:"EditTime",t:VT_FILETIME},11:{n:"LastPrinted",t:VT_FILETIME},12:{n:"CreatedDate",t:VT_FILETIME},13:{n:"ModifiedDate",t:VT_FILETIME},14:{n:"PageCount",t:VT_I4},15:{n:"WordCount",t:VT_I4},16:{n:"CharCount",t:VT_I4},17:{n:"Thumbnail",t:VT_CF},18:{n:"Application",t:VT_STRING},19:{n:"DocSecurity",t:VT_I4},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},CountryEnum={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},XLSFillPattern=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rgbify(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var _XLSIcv=rgbify([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XLSIcv=dup(_XLSIcv),BErr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},RBErr={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},XLSLblBuiltIn=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],ct2type={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},CT_LIST={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function new_ct(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function parse_ct(t){var e=new_ct();if(!t||!t.match)return e;var n={};if((t.match(tagregex)||[]).forEach(function(a){var o=parsexmltag(a);switch(o[0].replace(nsregex,"<")){case"<?xml":break;case"<Types":e.xmlns=o["xmlns"+(o[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[o.Extension.toLowerCase()]=o.ContentType;break;case"<Override":e[ct2type[o.ContentType]]!==void 0&&e[ct2type[o.ContentType]].push(o.PartName);break}}),e.xmlns!==XMLNS.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}function write_ct(t,e,n){var a=evert_arr(ct2type),o=[],c;n||(o[o.length]=XML_HEADER,o[o.length]=writextag("Types",null,{xmlns:XMLNS.CT,"xmlns:xsd":XMLNS.xsd,"xmlns:xsi":XMLNS.xsi}),o=o.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(m){return writextag("Default",null,{Extension:m[0],ContentType:m[1]})})));var l=function(m){t[m]&&t[m].length>0&&(c=t[m][0],o[o.length]=writextag("Override",null,{PartName:(c[0]=="/"?"":"/")+c,ContentType:CT_LIST[m][e.bookType]||CT_LIST[m].xlsx}))},u=function(m){(t[m]||[]).forEach(function(b){o[o.length]=writextag("Override",null,{PartName:(b[0]=="/"?"":"/")+b,ContentType:CT_LIST[m][e.bookType]||CT_LIST[m].xlsx})})},d=function(m){(t[m]||[]).forEach(function(b){o[o.length]=writextag("Override",null,{PartName:(b[0]=="/"?"":"/")+b,ContentType:a[m][0]})})};return l("workbooks"),u("sheets"),u("charts"),d("themes"),["strs","styles"].forEach(l),["coreprops","extprops","custprops"].forEach(d),d("vba"),d("comments"),d("threadedcomments"),d("drawings"),u("metadata"),d("people"),!n&&o.length>2&&(o[o.length]="</Types>",o[1]=o[1].replace("/>",">")),o.join("")}var RELS={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function get_rels_path(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function parse_rels(t,e){var n={"!id":{}};if(!t)return n;e.charAt(0)!=="/"&&(e="/"+e);var a={};return(t.match(tagregex)||[]).forEach(function(o){var c=parsexmltag(o);if(c[0]==="<Relationship"){var l={};l.Type=c.Type,l.Target=c.Target,l.Id=c.Id,c.TargetMode&&(l.TargetMode=c.TargetMode);var u=c.TargetMode==="External"?c.Target:resolve_path(c.Target,e);n[u]=l,a[c.Id]=l}}),n["!id"]=a,n}function write_rels(t){var e=[XML_HEADER,writextag("Relationships",null,{xmlns:XMLNS.RELS})];return keys(t["!id"]).forEach(function(n){e[e.length]=writextag("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function add_rels(t,e,n,a,o,c){if(o||(o={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,o.Id="rId"+e,o.Type=a,o.Target=n,c?o.TargetMode=c:[RELS.HLINK,RELS.XPATH,RELS.XMISS].indexOf(o.Type)>-1&&(o.TargetMode="External"),t["!id"][o.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][o.Id]=o,t[("/"+o.Target).replace("//","/")]=o,e}var CT_ODS="application/vnd.oasis.opendocument.spreadsheet";function parse_manifest(t,e){for(var n=xlml_normalize(t),a,o;a=xlmlregex.exec(n);)switch(a[3]){case"manifest":break;case"file-entry":if(o=parsexmltag(a[0],!1),o.path=="/"&&o.type!==CT_ODS)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw a}}function write_manifest(t){var e=[XML_HEADER];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function write_rdf_type(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf_has(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf(t){var e=[XML_HEADER];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(write_rdf_type(t[n][0],t[n][1])),e.push(write_rdf_has("",t[n][0]));return e.push(write_rdf_type("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function write_meta_ods(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XLSX.version+"</meta:generator></office:meta></office:document-meta>"}var CORE_PROPS=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],CORE_PROPS_REGEX=function(){for(var t=new Array(CORE_PROPS.length),e=0;e<CORE_PROPS.length;++e){var n=CORE_PROPS[e],a="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return t}();function parse_core_props(t){var e={};t=utf8read(t);for(var n=0;n<CORE_PROPS.length;++n){var a=CORE_PROPS[n],o=t.match(CORE_PROPS_REGEX[n]);o!=null&&o.length>0&&(e[a[1]]=unescapexml(o[1])),a[2]==="date"&&e[a[1]]&&(e[a[1]]=parseDate(e[a[1]]))}return e}function cp_doit(t,e,n,a,o){o[t]!=null||e==null||e===""||(o[t]=e,e=escapexml(e),a[a.length]=n?writextag(t,e,n):writetag(t,e))}function write_core_props(t,e){var n=e||{},a=[XML_HEADER,writextag("cp:coreProperties",null,{"xmlns:cp":XMLNS.CORE_PROPS,"xmlns:dc":XMLNS.dc,"xmlns:dcterms":XMLNS.dcterms,"xmlns:dcmitype":XMLNS.dcmitype,"xmlns:xsi":XMLNS.xsi})],o={};if(!t&&!n.Props)return a.join("");t&&(t.CreatedDate!=null&&cp_doit("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:write_w3cdtf(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},a,o),t.ModifiedDate!=null&&cp_doit("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:write_w3cdtf(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},a,o));for(var c=0;c!=CORE_PROPS.length;++c){var l=CORE_PROPS[c],u=n.Props&&n.Props[l[1]]!=null?n.Props[l[1]]:t?t[l[1]]:null;u===!0?u="1":u===!1?u="0":typeof u=="number"&&(u=String(u)),u!=null&&cp_doit(l[0],u,null,a,o)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var EXT_PROPS=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PseudoPropsPairs=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function load_props_pairs(t,e,n,a){var o=[];if(typeof t=="string")o=parseVector(t,a);else for(var c=0;c<t.length;++c)o=o.concat(t[c].map(function(b){return{v:b}}));var l=typeof e=="string"?parseVector(e,a).map(function(b){return b.v}):e,u=0,d=0;if(l.length>0)for(var m=0;m!==o.length;m+=2){switch(d=+o[m+1].v,o[m].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":n.Worksheets=d,n.SheetNames=l.slice(u,u+d);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":n.NamedRanges=d,n.DefinedNames=l.slice(u,u+d);break;case"Charts":case"Diagramme":n.Chartsheets=d,n.ChartNames=l.slice(u,u+d);break}u+=d}}function parse_ext_props(t,e,n){var a={};return e||(e={}),t=utf8read(t),EXT_PROPS.forEach(function(o){var c=(t.match(matchtag(o[0]))||[])[1];switch(o[2]){case"string":c&&(e[o[1]]=unescapexml(c));break;case"bool":e[o[1]]=c==="true";break;case"raw":var l=t.match(new RegExp("<"+o[0]+"[^>]*>([\\s\\S]*?)</"+o[0]+">"));l&&l.length>0&&(a[o[1]]=l[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&load_props_pairs(a.HeadingPairs,a.TitlesOfParts,e,n),e}function write_ext_props(t){var e=[],n=writextag;return t||(t={}),t.Application="SheetJS",e[e.length]=XML_HEADER,e[e.length]=writextag("Properties",null,{xmlns:XMLNS.EXT_PROPS,"xmlns:vt":XMLNS.vt}),EXT_PROPS.forEach(function(a){if(t[a[1]]!==void 0){var o;switch(a[2]){case"string":o=escapexml(String(t[a[1]]));break;case"bool":o=t[a[1]]?"true":"false";break}o!==void 0&&(e[e.length]=n(a[0],o))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(a){return"<vt:lpstr>"+escapexml(a)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var custregex=/<[^>]+>[^<]*/g;function parse_cust_props(t,e){var n={},a="",o=t.match(custregex);if(o)for(var c=0;c!=o.length;++c){var l=o[c],u=parsexmltag(l);switch(strip_ns(u[0])){case"<?xml":break;case"<Properties":break;case"<property":a=unescapexml(u.name);break;case"</property>":a=null;break;default:if(l.indexOf("<vt:")===0){var d=l.split(">"),m=d[0].slice(4),b=d[1];switch(m){case"lpstr":case"bstr":case"lpwstr":n[a]=unescapexml(b);break;case"bool":n[a]=parsexmlbool(b);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[a]=parseInt(b,10);break;case"r4":case"r8":case"decimal":n[a]=parseFloat(b);break;case"filetime":case"date":n[a]=parseDate(b);break;case"cy":case"error":n[a]=unescapexml(b);break;default:if(m.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",l,m,d)}}else if(l.slice(0,2)!=="</"){if(e.WTF)throw new Error(l)}}}return n}function write_cust_props(t){var e=[XML_HEADER,writextag("Properties",null,{xmlns:XMLNS.CUST_PROPS,"xmlns:vt":XMLNS.vt})];if(!t)return e.join("");var n=1;return keys(t).forEach(function(o){++n,e[e.length]=writextag("property",write_vt(t[o],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:escapexml(o)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var XLMLDocPropsMap={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},evert_XLMLDPM;function xlml_set_prop(t,e,n){evert_XLMLDPM||(evert_XLMLDPM=evert(XLMLDocPropsMap)),e=evert_XLMLDPM[e]||e,t[e]=n}function xlml_write_docprops(t,e){var n=[];return keys(XLMLDocPropsMap).map(function(a){for(var o=0;o<CORE_PROPS.length;++o)if(CORE_PROPS[o][1]==a)return CORE_PROPS[o];for(o=0;o<EXT_PROPS.length;++o)if(EXT_PROPS[o][1]==a)return EXT_PROPS[o];throw a}).forEach(function(a){if(t[a[1]]!=null){var o=e&&e.Props&&e.Props[a[1]]!=null?e.Props[a[1]]:t[a[1]];switch(a[2]){case"date":o=new Date(o).toISOString().replace(/\.\d*Z/,"Z");break}typeof o=="number"?o=String(o):o===!0||o===!1?o=o?"1":"0":o instanceof Date&&(o=new Date(o).toISOString().replace(/\.\d*Z/,"")),n.push(writetag(XLMLDocPropsMap[a[1]]||a[1],o))}}),writextag("DocumentProperties",n.join(""),{xmlns:XLMLNS.o})}function xlml_write_custprops(t,e){var n=["Worksheets","SheetNames"],a="CustomDocumentProperties",o=[];return t&&keys(t).forEach(function(c){if(Object.prototype.hasOwnProperty.call(t,c)){for(var l=0;l<CORE_PROPS.length;++l)if(c==CORE_PROPS[l][1])return;for(l=0;l<EXT_PROPS.length;++l)if(c==EXT_PROPS[l][1])return;for(l=0;l<n.length;++l)if(c==n[l])return;var u=t[c],d="string";typeof u=="number"?(d="float",u=String(u)):u===!0||u===!1?(d="boolean",u=u?"1":"0"):u=String(u),o.push(writextag(escapexmltag(c),u,{"dt:dt":d}))}}),e&&keys(e).forEach(function(c){if(Object.prototype.hasOwnProperty.call(e,c)&&!(t&&Object.prototype.hasOwnProperty.call(t,c))){var l=e[c],u="string";typeof l=="number"?(u="float",l=String(l)):l===!0||l===!1?(u="boolean",l=l?"1":"0"):l instanceof Date?(u="dateTime.tz",l=l.toISOString()):l=String(l),o.push(writextag(escapexmltag(c),l,{"dt:dt":u}))}}),"<"+a+' xmlns="'+XLMLNS.o+'">'+o.join("")+"</"+a+">"}function parse_FILETIME(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function write_FILETIME(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,a=n%Math.pow(2,32),o=(n-a)/Math.pow(2,32);a*=1e7,o*=1e7;var c=a/Math.pow(2,32)|0;c>0&&(a=a%Math.pow(2,32),o+=c);var l=new_buf(8);return l.write_shift(4,a),l.write_shift(4,o),l}function parse_lpstr(t,e,n){var a=t.l,o=t.read_shift(0,"lpstr-cp");if(n)for(;t.l-a&3;)++t.l;return o}function parse_lpwstr(t,e,n){var a=t.read_shift(0,"lpwstr");return n&&(t.l+=4-(a.length+1&3)&3),a}function parse_VtStringBase(t,e,n){return e===31?parse_lpwstr(t):parse_lpstr(t,e,n)}function parse_VtString(t,e,n){return parse_VtStringBase(t,e,n===!1?0:4)}function parse_VtUnalignedString(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return parse_VtStringBase(t,e,0)}function parse_VtVecLpwstrValue(t){for(var e=t.read_shift(4),n=[],a=0;a!=e;++a){var o=t.l;n[a]=t.read_shift(0,"lpwstr").replace(chr0,""),t.l-o&2&&(t.l+=2)}return n}function parse_VtVecUnalignedLpstrValue(t){for(var e=t.read_shift(4),n=[],a=0;a!=e;++a)n[a]=t.read_shift(0,"lpstr-cp").replace(chr0,"");return n}function parse_VtHeadingPair(t){var e=t.l,n=parse_TypedPropertyValue(t,VT_USTR);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var a=parse_TypedPropertyValue(t,VT_I4);return[n,a]}function parse_VtVecHeadingPairValue(t){for(var e=t.read_shift(4),n=[],a=0;a<e/2;++a)n.push(parse_VtHeadingPair(t));return n}function parse_dictionary(t,e){for(var n=t.read_shift(4),a={},o=0;o!=n;++o){var c=t.read_shift(4),l=t.read_shift(4);a[c]=t.read_shift(l,e===1200?"utf16le":"utf8").replace(chr0,"").replace(chr1,"!"),e===1200&&l%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>2+1<<2),a}function parse_BLOB(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),n}function parse_ClipboardData(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function parse_TypedPropertyValue(t,e,n){var a=t.read_shift(2),o,c=n||{};if(t.l+=2,e!==VT_VARIANT&&a!==e&&VT_CUSTOM.indexOf(e)===-1&&!((e&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+e+" saw "+a);switch(e===VT_VARIANT?a:e){case 2:return o=t.read_shift(2,"i"),c.raw||(t.l+=2),o;case 3:return o=t.read_shift(4,"i"),o;case 11:return t.read_shift(4)!==0;case 19:return o=t.read_shift(4),o;case 30:return parse_lpstr(t,a,4).replace(chr0,"");case 31:return parse_lpwstr(t);case 64:return parse_FILETIME(t);case 65:return parse_BLOB(t);case 71:return parse_ClipboardData(t);case 80:return parse_VtString(t,a,!c.raw).replace(chr0,"");case 81:return parse_VtUnalignedString(t,a).replace(chr0,"");case 4108:return parse_VtVecHeadingPairValue(t);case 4126:case 4127:return a==4127?parse_VtVecLpwstrValue(t):parse_VtVecUnalignedLpstrValue(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+a)}}function write_TypedPropertyValue(t,e){var n=new_buf(4),a=new_buf(4);switch(n.write_shift(4,t==80?31:t),t){case 3:a.write_shift(-4,e);break;case 5:a=new_buf(8),a.write_shift(8,e,"f");break;case 11:a.write_shift(4,e?1:0);break;case 64:a=write_FILETIME(e);break;case 31:case 80:for(a=new_buf(4+2*(e.length+1)+(e.length%2?0:2)),a.write_shift(4,e.length+1),a.write_shift(0,e,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return bconcat([n,a])}function parse_PropertySet(t,e){var n=t.l,a=t.read_shift(4),o=t.read_shift(4),c=[],l=0,u=0,d=-1,m={};for(l=0;l!=o;++l){var b=t.read_shift(4),x=t.read_shift(4);c[l]=[b,x+n]}c.sort(function(D,z){return D[1]-z[1]});var _={};for(l=0;l!=o;++l){if(t.l!==c[l][1]){var w=!0;if(l>0&&e)switch(e[c[l-1][0]].t){case 2:t.l+2===c[l][1]&&(t.l+=2,w=!1);break;case 80:t.l<=c[l][1]&&(t.l=c[l][1],w=!1);break;case 4108:t.l<=c[l][1]&&(t.l=c[l][1],w=!1);break}if((!e||l==0)&&t.l<=c[l][1]&&(w=!1,t.l=c[l][1]),w)throw new Error("Read Error: Expected address "+c[l][1]+" at "+t.l+" :"+l)}if(e){if(c[l][0]==0&&c.length>l+1&&c[l][1]==c[l+1][1])continue;var S=e[c[l][0]];if(_[S.n]=parse_TypedPropertyValue(t,S.t,{raw:!0}),S.p==="version"&&(_[S.n]=String(_[S.n]>>16)+"."+("0000"+String(_[S.n]&65535)).slice(-4)),S.n=="CodePage")switch(_[S.n]){case 0:_[S.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:set_cp(u=_[S.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+_[S.n])}}else if(c[l][0]===1){if(u=_.CodePage=parse_TypedPropertyValue(t,VT_I2),set_cp(u),d!==-1){var T=t.l;t.l=c[d][1],m=parse_dictionary(t,u),t.l=T}}else if(c[l][0]===0){if(u===0){d=l,t.l=c[l+1][1];continue}m=parse_dictionary(t,u)}else{var B=m[c[l][0]],C;switch(t[t.l]){case 65:t.l+=4,C=parse_BLOB(t);break;case 30:t.l+=4,C=parse_VtString(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,C=parse_VtString(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,C=t.read_shift(4,"i");break;case 19:t.l+=4,C=t.read_shift(4);break;case 5:t.l+=4,C=t.read_shift(8,"f");break;case 11:t.l+=4,C=parsebool(t,4);break;case 64:t.l+=4,C=parseDate(parse_FILETIME(t));break;default:throw new Error("unparsed value: "+t[t.l])}_[B]=C}}return t.l=n+a,_}var XLSPSSkip=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function guess_property_type(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function write_PropertySet(t,e,n){var a=new_buf(8),o=[],c=[],l=8,u=0,d=new_buf(8),m=new_buf(8);if(d.write_shift(4,2),d.write_shift(4,1200),m.write_shift(4,1),c.push(d),o.push(m),l+=8+d.length,!e){m=new_buf(8),m.write_shift(4,0),o.unshift(m);var b=[new_buf(4)];for(b[0].write_shift(4,t.length),u=0;u<t.length;++u){var x=t[u][0];for(d=new_buf(4+4+2*(x.length+1)+(x.length%2?0:2)),d.write_shift(4,u+2),d.write_shift(4,x.length+1),d.write_shift(0,x,"dbcs");d.l!=d.length;)d.write_shift(1,0);b.push(d)}d=bconcat(b),c.unshift(d),l+=8+d.length}for(u=0;u<t.length;++u)if(!(e&&!e[t[u][0]])&&!(XLSPSSkip.indexOf(t[u][0])>-1||PseudoPropsPairs.indexOf(t[u][0])>-1)&&t[u][1]!=null){var _=t[u][1],w=0;if(e){w=+e[t[u][0]];var S=n[w];if(S.p=="version"&&typeof _=="string"){var T=_.split(".");_=(+T[0]<<16)+(+T[1]||0)}d=write_TypedPropertyValue(S.t,_)}else{var B=guess_property_type(_);B==-1&&(B=31,_=String(_)),d=write_TypedPropertyValue(B,_)}c.push(d),m=new_buf(8),m.write_shift(4,e?w:2+u),o.push(m),l+=8+d.length}var C=8*(c.length+1);for(u=0;u<c.length;++u)o[u].write_shift(4,C),C+=c[u].length;return a.write_shift(4,l),a.write_shift(4,c.length),bconcat([a].concat(o).concat(c))}function parse_PropertySetStream(t,e,n){var a=t.content;if(!a)return{};prep_blob(a,0);var o,c,l,u,d=0;a.chk("feff","Byte Order: "),a.read_shift(2);var m=a.read_shift(4),b=a.read_shift(16);if(b!==CFB.utils.consts.HEADER_CLSID&&b!==n)throw new Error("Bad PropertySet CLSID "+b);if(o=a.read_shift(4),o!==1&&o!==2)throw new Error("Unrecognized #Sets: "+o);if(c=a.read_shift(16),u=a.read_shift(4),o===1&&u!==a.l)throw new Error("Length mismatch: "+u+" !== "+a.l);o===2&&(l=a.read_shift(16),d=a.read_shift(4));var x=parse_PropertySet(a,e),_={SystemIdentifier:m};for(var w in x)_[w]=x[w];if(_.FMTID=c,o===1)return _;if(d-a.l==2&&(a.l+=2),a.l!==d)throw new Error("Length mismatch 2: "+a.l+" !== "+d);var S;try{S=parse_PropertySet(a,null)}catch{}for(w in S)_[w]=S[w];return _.FMTID=[c,l],_}function write_PropertySetStream(t,e,n,a,o,c){var l=new_buf(o?68:48),u=[l];l.write_shift(2,65534),l.write_shift(2,0),l.write_shift(4,842412599),l.write_shift(16,CFB.utils.consts.HEADER_CLSID,"hex"),l.write_shift(4,o?2:1),l.write_shift(16,e,"hex"),l.write_shift(4,o?68:48);var d=write_PropertySet(t,n,a);if(u.push(d),o){var m=write_PropertySet(o,null,null);l.write_shift(16,c,"hex"),l.write_shift(4,68+d.length),u.push(m)}return bconcat(u)}function parsenoop2(t,e){return t.read_shift(e),null}function writezeroes(t,e){e||(e=new_buf(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function parslurp(t,e,n){for(var a=[],o=t.l+e;t.l<o;)a.push(n(t,o-t.l));if(o!==t.l)throw new Error("Slurp error");return a}function parsebool(t,e){return t.read_shift(e)===1}function writebool(t,e){return e||(e=new_buf(2)),e.write_shift(2,+!!t),e}function parseuint16(t){return t.read_shift(2,"u")}function writeuint16(t,e){return e||(e=new_buf(2)),e.write_shift(2,t),e}function parseuint16a(t,e){return parslurp(t,e,parseuint16)}function parse_Bes(t){var e=t.read_shift(1),n=t.read_shift(1);return n===1?e:e===1}function write_Bes(t,e,n){return n||(n=new_buf(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function parse_ShortXLUnicodeString(t,e,n){var a=t.read_shift(n&&n.biff>=12?2:1),o="sbcs-cont",c=current_codepage;if(n&&n.biff>=8&&(current_codepage=1200),!n||n.biff==8){var l=t.read_shift(1);l&&(o="dbcs-cont")}else n.biff==12&&(o="wstr");n.biff>=2&&n.biff<=5&&(o="cpstr");var u=a?t.read_shift(a,o):"";return current_codepage=c,u}function parse_XLUnicodeRichExtendedString(t){var e=current_codepage;current_codepage=1200;var n=t.read_shift(2),a=t.read_shift(1),o=a&4,c=a&8,l=1+(a&1),u=0,d,m={};c&&(u=t.read_shift(2)),o&&(d=t.read_shift(4));var b=l==2?"dbcs-cont":"sbcs-cont",x=n===0?"":t.read_shift(n,b);return c&&(t.l+=4*u),o&&(t.l+=d),m.t=x,c||(m.raw="<t>"+m.t+"</t>",m.r=m.t),current_codepage=e,m}function write_XLUnicodeRichExtendedString(t){var e=t.t||"",n=new_buf(3+0);n.write_shift(2,e.length),n.write_shift(1,1);var a=new_buf(2*e.length);a.write_shift(2*e.length,e,"utf16le");var o=[n,a];return bconcat(o)}function parse_XLUnicodeStringNoCch(t,e,n){var a;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var o=t.read_shift(1);return o===0?a=t.read_shift(e,"sbcs-cont"):a=t.read_shift(e,"dbcs-cont"),a}function parse_XLUnicodeString(t,e,n){var a=t.read_shift(n&&n.biff==2?1:2);return a===0?(t.l++,""):parse_XLUnicodeStringNoCch(t,a,n)}function parse_XLUnicodeString2(t,e,n){if(n.biff>5)return parse_XLUnicodeString(t,e,n);var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function write_XLUnicodeString(t,e,n){return n||(n=new_buf(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function parse_ControlInfo(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function parse_URLMoniker(t){var e=t.read_shift(4),n=t.l,a=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),t.l=n);var o=t.read_shift((a?e-24:e)>>1,"utf16le").replace(chr0,"");return a&&(t.l+=24),o}function parse_FileMoniker(t){for(var e=t.read_shift(2),n="";e-- >0;)n+="../";var a=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var o=t.read_shift(4);if(o===0)return n+a.replace(/\\/g,"/");var c=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var l=t.read_shift(c>>1,"utf16le").replace(chr0,"");return n+l}function parse_HyperlinkMoniker(t,e){var n=t.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return parse_URLMoniker(t);case"0303000000000000c000000000000046":return parse_FileMoniker(t);default:throw new Error("Unsupported Moniker "+n)}}function parse_HyperlinkString(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(chr0,""):"";return n}function write_HyperlinkString(t,e){e||(e=new_buf(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function parse_Hyperlink(t,e){var n=t.l+e,a=t.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var o=t.read_shift(2);t.l+=2;var c,l,u,d,m="",b,x;o&16&&(c=parse_HyperlinkString(t,n-t.l)),o&128&&(l=parse_HyperlinkString(t,n-t.l)),(o&257)===257&&(u=parse_HyperlinkString(t,n-t.l)),(o&257)===1&&(d=parse_HyperlinkMoniker(t,n-t.l)),o&8&&(m=parse_HyperlinkString(t,n-t.l)),o&32&&(b=t.read_shift(16)),o&64&&(x=parse_FILETIME(t)),t.l=n;var _=l||u||d||"";_&&m&&(_+="#"+m),_||(_="#"+m),o&2&&_.charAt(0)=="/"&&_.charAt(1)!="/"&&(_="file://"+_);var w={Target:_};return b&&(w.guid=b),x&&(w.time=x),c&&(w.Tooltip=c),w}function write_Hyperlink(t){var e=new_buf(512),n=0,a=t.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var o=a.indexOf("#"),c=o>-1?31:23;switch(a.charAt(0)){case"#":c=28;break;case".":c&=-3;break}e.write_shift(4,2),e.write_shift(4,c);var l=[8,6815827,6619237,4849780,83];for(n=0;n<l.length;++n)e.write_shift(4,l[n]);if(c==28)a=a.slice(1),write_HyperlinkString(a,e);else if(c&2){for(l="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<l.length;++n)e.write_shift(1,parseInt(l[n],16));var u=o>-1?a.slice(0,o):a;for(e.write_shift(4,2*(u.length+1)),n=0;n<u.length;++n)e.write_shift(2,u.charCodeAt(n));e.write_shift(2,0),c&8&&write_HyperlinkString(o>-1?a.slice(o+1):"",e)}else{for(l="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<l.length;++n)e.write_shift(1,parseInt(l[n],16));for(var d=0;a.slice(d*3,d*3+3)=="../"||a.slice(d*3,d*3+3)=="..\\";)++d;for(e.write_shift(2,d),e.write_shift(4,a.length-3*d+1),n=0;n<a.length-3*d;++n)e.write_shift(1,a.charCodeAt(n+3*d)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function parse_LongRGBA(t){var e=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(1);return[e,n,a,o]}function parse_LongRGB(t,e){var n=parse_LongRGBA(t);return n[3]=0,n}function parse_XLSCell(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{r:e,c:n,ixfe:a}}function write_XLSCell(t,e,n,a){return a||(a=new_buf(6)),a.write_shift(2,t),a.write_shift(2,e),a.write_shift(2,n||0),a}function parse_frtHeader(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function parse_OptXLUnicodeString(t,e,n){return e===0?"":parse_XLUnicodeString2(t,e,n)}function parse_XTI(t,e,n){var a=n.biff>8?4:2,o=t.read_shift(a),c=t.read_shift(a,"i"),l=t.read_shift(a,"i");return[o,c,l]}function parse_RkRec(t){var e=t.read_shift(2),n=parse_RkNumber(t);return[e,n]}function parse_AddinUdf(t,e,n){t.l+=4,e-=4;var a=t.l+e,o=parse_ShortXLUnicodeString(t,e,n),c=t.read_shift(2);if(a-=t.l,c!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+c);return t.l+=c,o}function parse_Ref8U(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2);return{s:{c:a,r:e},e:{c:o,r:n}}}function write_Ref8U(t,e){return e||(e=new_buf(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function parse_RefU(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(1),o=t.read_shift(1);return{s:{c:a,r:e},e:{c:o,r:n}}}var parse_Ref=parse_RefU;function parse_FtCmo(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return t.l+=12,[n,e,a]}function parse_FtNts(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function parse_FtCf(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function parse_FtSkip(t){t.l+=2,t.l+=t.read_shift(2)}var FtTab={0:parse_FtSkip,4:parse_FtSkip,5:parse_FtSkip,6:parse_FtSkip,7:parse_FtCf,8:parse_FtSkip,9:parse_FtSkip,10:parse_FtSkip,11:parse_FtSkip,12:parse_FtSkip,13:parse_FtNts,14:parse_FtSkip,15:parse_FtSkip,16:parse_FtSkip,17:parse_FtSkip,18:parse_FtSkip,19:parse_FtSkip,20:parse_FtSkip,21:parse_FtCmo};function parse_FtArray(t,e){for(var n=t.l+e,a=[];t.l<n;){var o=t.read_shift(2);t.l-=2;try{a.push(FtTab[o](t,n-t.l))}catch{return t.l=n,a}}return t.l!=n&&(t.l=n),a}function parse_BOF(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function write_BOF(t,e,n){var a=1536,o=16;switch(n.bookType){case"biff8":break;case"biff5":a=1280,o=8;break;case"biff4":a=4,o=6;break;case"biff3":a=3,o=6;break;case"biff2":a=2,o=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var c=new_buf(o);return c.write_shift(2,a),c.write_shift(2,e),o>4&&c.write_shift(2,29282),o>6&&c.write_shift(2,1997),o>8&&(c.write_shift(2,49161),c.write_shift(2,1),c.write_shift(2,1798),c.write_shift(2,0)),c}function parse_InterfaceHdr(t,e){return e===0||t.read_shift(2),1200}function parse_WriteAccess(t,e,n){if(n.enc)return t.l+=e,"";var a=t.l,o=parse_XLUnicodeString2(t,0,n);return t.read_shift(e+a-t.l),o}function write_WriteAccess(t,e){var n=!e||e.biff==8,a=new_buf(n?112:54);for(a.write_shift(e.biff==8?2:1,7),n&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(n?0:536870912));a.l<a.length;)a.write_shift(1,n?0:32);return a}function parse_WsBool(t,e,n){var a=n&&n.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function parse_BoundSheet8(t,e,n){var a=t.read_shift(4),o=t.read_shift(1)&3,c=t.read_shift(1);switch(c){case 0:c="Worksheet";break;case 1:c="Macrosheet";break;case 2:c="Chartsheet";break;case 6:c="VBAModule";break}var l=parse_ShortXLUnicodeString(t,0,n);return l.length===0&&(l="Sheet1"),{pos:a,hs:o,dt:c,name:l}}function write_BoundSheet8(t,e){var n=!e||e.biff>=8?2:1,a=new_buf(8+n*t.name.length);a.write_shift(4,t.pos),a.write_shift(1,t.hs||0),a.write_shift(1,t.dt),a.write_shift(1,t.name.length),e.biff>=8&&a.write_shift(1,1),a.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var o=a.slice(0,a.l);return o.l=a.l,o}function parse_SST(t,e){for(var n=t.l+e,a=t.read_shift(4),o=t.read_shift(4),c=[],l=0;l!=o&&t.l<n;++l)c.push(parse_XLUnicodeRichExtendedString(t));return c.Count=a,c.Unique=o,c}function write_SST(t,e){var n=new_buf(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var a=[],o=0;o<t.length;++o)a[o]=write_XLUnicodeRichExtendedString(t[o]);var c=bconcat([n].concat(a));return c.parts=[n.length].concat(a.map(function(l){return l.length})),c}function parse_ExtSST(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function parse_Row(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var a=t.read_shift(1);return t.l+=3,a&7&&(e.level=a&7),a&32&&(e.hidden=!0),a&64&&(e.hpt=n/20),e}function parse_ForceFullCalculation(t){var e=parse_frtHeader(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return n!==0}function parse_RecalcId(t){return t.read_shift(2),t.read_shift(4)}function parse_DefaultRowHeight(t,e,n){var a=0;n&&n.biff==2||(a=t.read_shift(2));var o=t.read_shift(2);n&&n.biff==2&&(a=1-(o>>15),o&=32767);var c={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[c,o]}function parse_Window1(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2),d=t.read_shift(2),m=t.read_shift(2);return{Pos:[e,n],Dim:[a,o],Flags:c,CurTab:l,FirstTab:u,Selected:d,TabRatio:m}}function write_Window1(){var t=new_buf(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function parse_Window2(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var a=t.read_shift(2);return{RTL:a&64}}function write_Window2(t){var e=new_buf(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function parse_Pane(){}function parse_Font(t,e,n){var a={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return a.name=parse_ShortXLUnicodeString(t,0,n),a}function write_Font(t,e){var n=t.name||"Arial",a=e&&e.biff==5,o=a?15+n.length:16+2*n.length,c=new_buf(o);return c.write_shift(2,(t.sz||12)*20),c.write_shift(4,0),c.write_shift(2,400),c.write_shift(4,0),c.write_shift(2,0),c.write_shift(1,n.length),a||c.write_shift(1,1),c.write_shift((a?1:2)*n.length,n,a?"sbcs":"utf16le"),c}function parse_LabelSst(t){var e=parse_XLSCell(t);return e.isst=t.read_shift(4),e}function write_LabelSst(t,e,n,a){var o=new_buf(10);return write_XLSCell(t,e,a,o),o.write_shift(4,n),o}function parse_Label(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=t.l+e,o=parse_XLSCell(t);n.biff==2&&t.l++;var c=parse_XLUnicodeString(t,a-t.l,n);return o.val=c,o}function write_Label(t,e,n,a,o){var c=!o||o.biff==8,l=new_buf(6+2+ +c+(1+c)*n.length);return write_XLSCell(t,e,a,l),l.write_shift(2,n.length),c&&l.write_shift(1,1),l.write_shift((1+c)*n.length,n,c?"utf16le":"sbcs"),l}function parse_Format(t,e,n){var a=t.read_shift(2),o=parse_XLUnicodeString2(t,0,n);return[a,o]}function write_Format(t,e,n,a){var o=n&&n.biff==5;a||(a=new_buf(o?3+e.length:5+2*e.length)),a.write_shift(2,t),a.write_shift(o?1:2,e.length),o||a.write_shift(1,1),a.write_shift((o?1:2)*e.length,e,o?"sbcs":"utf16le");var c=a.length>a.l?a.slice(0,a.l):a;return c.l==null&&(c.l=c.length),c}var parse_BIFF2Format=parse_XLUnicodeString2;function parse_Dimensions(t,e,n){var a=t.l+e,o=n.biff==8||!n.biff?4:2,c=t.read_shift(o),l=t.read_shift(o),u=t.read_shift(2),d=t.read_shift(2);return t.l=a,{s:{r:c,c:u},e:{r:l,c:d}}}function write_Dimensions(t,e){var n=e.biff==8||!e.biff?4:2,a=new_buf(2*n+6);return a.write_shift(n,t.s.r),a.write_shift(n,t.e.r+1),a.write_shift(2,t.s.c),a.write_shift(2,t.e.c+1),a.write_shift(2,0),a}function parse_RK(t){var e=t.read_shift(2),n=t.read_shift(2),a=parse_RkRec(t);return{r:e,c:n,ixfe:a[0],rknum:a[1]}}function parse_MulRk(t,e){for(var n=t.l+e-2,a=t.read_shift(2),o=t.read_shift(2),c=[];t.l<n;)c.push(parse_RkRec(t));if(t.l!==n)throw new Error("MulRK read error");var l=t.read_shift(2);if(c.length!=l-o+1)throw new Error("MulRK length mismatch");return{r:a,c:o,C:l,rkrec:c}}function parse_MulBlank(t,e){for(var n=t.l+e-2,a=t.read_shift(2),o=t.read_shift(2),c=[];t.l<n;)c.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var l=t.read_shift(2);if(c.length!=l-o+1)throw new Error("MulBlank length mismatch");return{r:a,c:o,C:l,ixfe:c}}function parse_CellStyleXF(t,e,n,a){var o={},c=t.read_shift(4),l=t.read_shift(4),u=t.read_shift(4),d=t.read_shift(2);return o.patternType=XLSFillPattern[u>>26],a.cellStyles&&(o.alc=c&7,o.fWrap=c>>3&1,o.alcV=c>>4&7,o.fJustLast=c>>7&1,o.trot=c>>8&255,o.cIndent=c>>16&15,o.fShrinkToFit=c>>20&1,o.iReadOrder=c>>22&2,o.fAtrNum=c>>26&1,o.fAtrFnt=c>>27&1,o.fAtrAlc=c>>28&1,o.fAtrBdr=c>>29&1,o.fAtrPat=c>>30&1,o.fAtrProt=c>>31&1,o.dgLeft=l&15,o.dgRight=l>>4&15,o.dgTop=l>>8&15,o.dgBottom=l>>12&15,o.icvLeft=l>>16&127,o.icvRight=l>>23&127,o.grbitDiag=l>>30&3,o.icvTop=u&127,o.icvBottom=u>>7&127,o.icvDiag=u>>14&127,o.dgDiag=u>>21&15,o.icvFore=d&127,o.icvBack=d>>7&127,o.fsxButton=d>>14&1),o}function parse_XF(t,e,n){var a={};return a.ifnt=t.read_shift(2),a.numFmtId=t.read_shift(2),a.flags=t.read_shift(2),a.fStyle=a.flags>>2&1,e-=6,a.data=parse_CellStyleXF(t,e,a.fStyle,n),a}function write_XF(t,e,n,a){var o=n&&n.biff==5;a||(a=new_buf(o?16:20)),a.write_shift(2,0),t.style?(a.write_shift(2,t.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,t.numFmtId||0),a.write_shift(2,e<<4));var c=0;return t.numFmtId>0&&o&&(c|=1024),a.write_shift(4,c),a.write_shift(4,0),o||a.write_shift(4,0),a.write_shift(2,0),a}function parse_Guts(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function write_Guts(t){var e=new_buf(8);return e.write_shift(4,0),e.write_shift(2,t[0]?t[0]+1:0),e.write_shift(2,t[1]?t[1]+1:0),e}function parse_BoolErr(t,e,n){var a=parse_XLSCell(t);(n.biff==2||e==9)&&++t.l;var o=parse_Bes(t);return a.val=o,a.t=o===!0||o===!1?"b":"e",a}function write_BoolErr(t,e,n,a,o,c){var l=new_buf(8);return write_XLSCell(t,e,a,l),write_Bes(n,c,l),l}function parse_Number(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=parse_XLSCell(t),o=parse_Xnum(t);return a.val=o,a}function write_Number(t,e,n,a){var o=new_buf(14);return write_XLSCell(t,e,a,o),write_Xnum(n,o),o}var parse_XLHeaderFooter=parse_OptXLUnicodeString;function parse_SupBook(t,e,n){var a=t.l+e,o=t.read_shift(2),c=t.read_shift(2);if(n.sbcch=c,c==1025||c==14849)return[c,o];if(c<1||c>255)throw new Error("Unexpected SupBook type: "+c);for(var l=parse_XLUnicodeStringNoCch(t,c),u=[];a>t.l;)u.push(parse_XLUnicodeString(t));return[c,o,l,u]}function parse_ExternName(t,e,n){var a=t.read_shift(2),o,c={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return n.sbcch===14849&&(o=parse_AddinUdf(t,e-2,n)),c.body=o||t.read_shift(e-2),typeof o=="string"&&(c.Name=o),c}function parse_Lbl(t,e,n){var a=t.l+e,o=t.read_shift(2),c=t.read_shift(1),l=t.read_shift(1),u=t.read_shift(n&&n.biff==2?1:2),d=0;(!n||n.biff>=5)&&(n.biff!=5&&(t.l+=2),d=t.read_shift(2),n.biff==5&&(t.l+=2),t.l+=4);var m=parse_XLUnicodeStringNoCch(t,l,n);o&32&&(m=XLSLblBuiltIn[m.charCodeAt(0)]);var b=a-t.l;n&&n.biff==2&&--b;var x=a==t.l||u===0||!(b>0)?[]:parse_NameParsedFormula(t,b,n,u);return{chKey:c,Name:m,itab:d,rgce:x}}function parse_ExternSheet(t,e,n){if(n.biff<8)return parse_BIFF5ExternSheet(t,e,n);for(var a=[],o=t.l+e,c=t.read_shift(n.biff>8?4:2);c--!==0;)a.push(parse_XTI(t,n.biff>8?12:6,n));if(t.l!=o)throw new Error("Bad ExternSheet: "+t.l+" != "+o);return a}function parse_BIFF5ExternSheet(t,e,n){t[t.l+1]==3&&t[t.l]++;var a=parse_ShortXLUnicodeString(t,e,n);return a.charCodeAt(0)==3?a.slice(1):a}function parse_NameCmt(t,e,n){if(n.biff<8){t.l+=e;return}var a=t.read_shift(2),o=t.read_shift(2),c=parse_XLUnicodeStringNoCch(t,a,n),l=parse_XLUnicodeStringNoCch(t,o,n);return[c,l]}function parse_ShrFmla(t,e,n){var a=parse_RefU(t);t.l++;var o=t.read_shift(1);return e-=8,[parse_SharedParsedFormula(t,e,n),o,a]}function parse_Array(t,e,n){var a=parse_Ref(t);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[a,parse_ArrayParsedFormula(t,e,n)]}function parse_MTRSettings(t){var e=t.read_shift(4)!==0,n=t.read_shift(4)!==0,a=t.read_shift(4);return[e,n,a]}function parse_NoteSh(t,e,n){if(!(n.biff<8)){var a=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2),l=t.read_shift(2),u=parse_XLUnicodeString2(t,0,n);return n.biff<8&&t.read_shift(1),[{r:a,c:o},u,l,c]}}function parse_Note(t,e,n){return parse_NoteSh(t,e,n)}function parse_MergeCells(t,e){for(var n=[],a=t.read_shift(2);a--;)n.push(parse_Ref8U(t));return n}function write_MergeCells(t){var e=new_buf(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)write_Ref8U(t[n],e);return e}function parse_Obj(t,e,n){if(n&&n.biff<8)return parse_BIFF5Obj(t,e,n);var a=parse_FtCmo(t),o=parse_FtArray(t,e-22,a[1]);return{cmo:a,ft:o}}var parse_BIFF5OT={8:function(t,e){var n=t.l+e;t.l+=10;var a=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var o=t.read_shift(1);return t.l+=o,t.l=n,{fmt:a}}};function parse_BIFF5Obj(t,e,n){t.l+=4;var a=t.read_shift(2),o=t.read_shift(2),c=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var l=[];return l.push((parse_BIFF5OT[a]||parsenoop)(t,e,n)),{cmo:[o,a,c],ft:l}}function parse_TxO(t,e,n){var a=t.l,o="";try{t.l+=4;var c=(n.lastobj||{cmo:[0,0]}).cmo[1],l;[0,5,7,11,12,14].indexOf(c)==-1?t.l+=6:l=parse_ControlInfo(t,6,n);var u=t.read_shift(2);t.read_shift(2),parseuint16(t,2);var d=t.read_shift(2);t.l+=d;for(var m=1;m<t.lens.length-1;++m){if(t.l-a!=t.lens[m])throw new Error("TxO: bad continue record");var b=t[t.l],x=parse_XLUnicodeStringNoCch(t,t.lens[m+1]-t.lens[m]-1);if(o+=x,o.length>=(b?u:2*u))break}if(o.length!==u&&o.length!==u*2)throw new Error("cchText: "+u+" != "+o.length);return t.l=a+e,{t:o}}catch{return t.l=a+e,{t:o}}}function parse_HLink(t,e){var n=parse_Ref8U(t);t.l+=16;var a=parse_Hyperlink(t,e-24);return[n,a]}function write_HLink(t){var e=new_buf(24),n=decode_cell(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),o=0;o<16;++o)e.write_shift(1,parseInt(a[o],16));return bconcat([e,write_Hyperlink(t[1])])}function parse_HLinkTooltip(t,e){t.read_shift(2);var n=parse_Ref8U(t),a=t.read_shift((e-10)/2,"dbcs-cont");return a=a.replace(chr0,""),[n,a]}function write_HLinkTooltip(t){var e=t[1].Tooltip,n=new_buf(10+2*(e.length+1));n.write_shift(2,2048);var a=decode_cell(t[0]);n.write_shift(2,a.r),n.write_shift(2,a.r),n.write_shift(2,a.c),n.write_shift(2,a.c);for(var o=0;o<e.length;++o)n.write_shift(2,e.charCodeAt(o));return n.write_shift(2,0),n}function parse_Country(t){var e=[0,0],n;return n=t.read_shift(2),e[0]=CountryEnum[n]||n,n=t.read_shift(2),e[1]=CountryEnum[n]||n,e}function write_Country(t){return t||(t=new_buf(4)),t.write_shift(2,1),t.write_shift(2,1),t}function parse_ClrtClient(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(parse_LongRGB(t));return n}function parse_Palette(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(parse_LongRGB(t));return n}function parse_XFCRC(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function parse_ColInfo(t,e,n){if(!n.cellStyles)return parsenoop(t,e);var a=n&&n.biff>=12?4:2,o=t.read_shift(a),c=t.read_shift(a),l=t.read_shift(a),u=t.read_shift(a),d=t.read_shift(2);a==2&&(t.l+=2);var m={s:o,e:c,w:l,ixfe:u,flags:d};return(n.biff>=5||!n.biff)&&(m.level=d>>8&7),m}function write_ColInfo(t,e){var n=new_buf(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var a=0;return t.hidden&&(a|=1),n.write_shift(1,a),a=t.level||0,n.write_shift(1,a),n.write_shift(2,0),n}function parse_Setup(t,e){var n={};return e<32||(t.l+=16,n.header=parse_Xnum(t),n.footer=parse_Xnum(t),t.l+=2),n}function parse_ShtProps(t,e,n){var a={area:!1};if(n.biff!=5)return t.l+=e,a;var o=t.read_shift(1);return t.l+=3,o&16&&(a.area=!0),a}function write_RRTabId(t){for(var e=new_buf(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}var parse_Blank=parse_XLSCell,parse_Scl=parseuint16a,parse_String=parse_XLUnicodeString;function parse_ImData(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(4),o={fmt:e,env:n,len:a,data:t.slice(t.l,t.l+a)};return t.l+=a,o}function parse_BIFF2STR(t,e,n){n.biffguess&&n.biff==5&&(n.biff=2);var a=parse_XLSCell(t);++t.l;var o=parse_XLUnicodeString2(t,e-7,n);return a.t="str",a.val=o,a}function parse_BIFF2NUM(t){var e=parse_XLSCell(t);++t.l;var n=parse_Xnum(t);return e.t="n",e.val=n,e}function write_BIFF2NUM(t,e,n){var a=new_buf(15);return write_BIFF2Cell(a,t,e),a.write_shift(8,n,"f"),a}function parse_BIFF2INT(t){var e=parse_XLSCell(t);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function write_BIFF2INT(t,e,n){var a=new_buf(9);return write_BIFF2Cell(a,t,e),a.write_shift(2,n),a}function parse_BIFF2STRING(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function parse_BIFF2FONTXTRA(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function parse_RString(t,e,n){var a=t.l+e,o=parse_XLSCell(t),c=t.read_shift(2),l=parse_XLUnicodeStringNoCch(t,c,n);return t.l=a,o.t="str",o.val=l,o}var DBF_SUPPORTED_VERSIONS=[2,3,48,49,131,139,140,245],DBF=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=evert({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(u,d){var m=[],b=new_raw_buf(1);switch(d.type){case"base64":b=s2a(Base64_decode(u));break;case"binary":b=s2a(u);break;case"buffer":case"array":b=u;break}prep_blob(b,0);var x=b.read_shift(1),_=!!(x&136),w=!1,S=!1;switch(x){case 2:break;case 3:break;case 48:w=!0,_=!0;break;case 49:w=!0,_=!0;break;case 131:break;case 139:break;case 140:S=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+x.toString(16))}var T=0,B=521;x==2&&(T=b.read_shift(2)),b.l+=3,x!=2&&(T=b.read_shift(4)),T>1048576&&(T=1e6),x!=2&&(B=b.read_shift(2));var C=b.read_shift(2);d.codepage,x!=2&&(b.l+=16,b.read_shift(1),b[b.l]!==0&&t[b[b.l]],b.l+=1,b.l+=2),S&&(b.l+=36);for(var D=[],z={},U=Math.min(b.length,x==2?521:B-10-(w?264:0)),Y=S?32:11;b.l<U&&b[b.l]!=13;)switch(z={},z.name=a2s(b.slice(b.l,b.l+Y)).replace(/[\u0000\r\n].*$/g,""),b.l+=Y,z.type=String.fromCharCode(b.read_shift(1)),x!=2&&!S&&(z.offset=b.read_shift(4)),z.len=b.read_shift(1),x==2&&(z.offset=b.read_shift(2)),z.dec=b.read_shift(1),z.name.length&&D.push(z),x!=2&&(b.l+=S?13:14),z.type){case"B":(!w||z.len!=8)&&d.WTF&&console.log("Skipping "+z.name+":"+z.type);break;case"G":case"P":d.WTF&&console.log("Skipping "+z.name+":"+z.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+z.type)}if(b[b.l]!==13&&(b.l=B-1),b.read_shift(1)!==13)throw new Error("DBF Terminator not found "+b.l+" "+b[b.l]);b.l=B;var X=0,O=0;for(m[0]=[],O=0;O!=D.length;++O)m[0][O]=D[O].name;for(;T-- >0;){if(b[b.l]===42){b.l+=C;continue}for(++b.l,m[++X]=[],O=0,O=0;O!=D.length;++O){var J=b.slice(b.l,b.l+D[O].len);b.l+=D[O].len,prep_blob(J,0);var Z=a2s(J);switch(D[O].type){case"C":Z.trim().length&&(m[X][O]=Z.replace(/\s+$/,""));break;case"D":Z.length===8?m[X][O]=new Date(+Z.slice(0,4),+Z.slice(4,6)-1,+Z.slice(6,8)):m[X][O]=Z;break;case"F":m[X][O]=parseFloat(Z.trim());break;case"+":case"I":m[X][O]=S?J.read_shift(-4,"i")^2147483648:J.read_shift(4,"i");break;case"L":switch(Z.trim().toUpperCase()){case"Y":case"T":m[X][O]=!0;break;case"N":case"F":m[X][O]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Z+"|")}break;case"M":if(!_)throw new Error("DBF Unexpected MEMO for type "+x.toString(16));m[X][O]="##MEMO##"+(S?parseInt(Z.trim(),10):J.read_shift(4));break;case"N":Z=Z.replace(/\u0000/g,"").trim(),Z&&Z!="."&&(m[X][O]=+Z||0);break;case"@":m[X][O]=new Date(J.read_shift(-8,"f")-621356832e5);break;case"T":m[X][O]=new Date((J.read_shift(4)-2440588)*864e5+J.read_shift(4));break;case"Y":m[X][O]=J.read_shift(4,"i")/1e4+J.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":m[X][O]=-J.read_shift(-8,"f");break;case"B":if(w&&D[O].len==8){m[X][O]=J.read_shift(8,"f");break}case"G":case"P":J.l+=D[O].len;break;case"0":if(D[O].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+D[O].type)}}}if(x!=2&&b.l<b.length&&b[b.l++]!=26)throw new Error("DBF EOF Marker missing "+(b.l-1)+" of "+b.length+" "+b[b.l-1].toString(16));return d&&d.sheetRows&&(m=m.slice(0,d.sheetRows)),d.DBF=D,m}function a(u,d){var m=d||{};m.dateNF||(m.dateNF="yyyymmdd");var b=aoa_to_sheet(n(u,m),m);return b["!cols"]=m.DBF.map(function(x){return{wch:x.len,DBF:x}}),delete m.DBF,b}function o(u,d){try{var m=sheet_to_workbook(a(u,d),d);return m.bookType="dbf",m}catch(b){if(d&&d.WTF)throw b}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function l(u,d){var m=d||{},b=current_codepage;if(+m.codepage>=0&&set_cp(+m.codepage),m.type=="string")throw new Error("Cannot write DBF to JS string");var x=buf_array(),_=sheet_to_json(u,{header:1,raw:!0,cellDates:!0}),w=_[0],S=_.slice(1),T=u["!cols"]||[],B=0,C=0,D=0,z=1;for(B=0;B<w.length;++B){if(((T[B]||{}).DBF||{}).name){w[B]=T[B].DBF.name,++D;continue}if(w[B]!=null){if(++D,typeof w[B]=="number"&&(w[B]=w[B].toString(10)),typeof w[B]!="string")throw new Error("DBF Invalid column name "+w[B]+" |"+typeof w[B]+"|");if(w.indexOf(w[B])!==B){for(C=0;C<1024;++C)if(w.indexOf(w[B]+"_"+C)==-1){w[B]+="_"+C;break}}}}var U=safe_decode_range(u["!ref"]),Y=[],X=[],O=[];for(B=0;B<=U.e.c-U.s.c;++B){var J="",Z="",se=0,ie=[];for(C=0;C<S.length;++C)S[C][B]!=null&&ie.push(S[C][B]);if(ie.length==0||w[B]==null){Y[B]="?";continue}for(C=0;C<ie.length;++C){switch(typeof ie[C]){case"number":Z="B";break;case"string":Z="C";break;case"boolean":Z="L";break;case"object":Z=ie[C]instanceof Date?"D":"C";break;default:Z="C"}se=Math.max(se,String(ie[C]).length),J=J&&J!=Z?"C":Z}se>250&&(se=250),Z=((T[B]||{}).DBF||{}).type,Z=="C"&&T[B].DBF.len>se&&(se=T[B].DBF.len),J=="B"&&Z=="N"&&(J="N",O[B]=T[B].DBF.dec,se=T[B].DBF.len),X[B]=J=="C"||Z=="N"?se:c[J]||0,z+=X[B],Y[B]=J}var F=x.next(32);for(F.write_shift(4,318902576),F.write_shift(4,S.length),F.write_shift(2,296+32*D),F.write_shift(2,z),B=0;B<4;++B)F.write_shift(4,0);var k=+e[current_codepage]||3;for(F.write_shift(4,0|k<<8),t[k]!=+m.codepage&&(m.codepage&&console.error("DBF Unsupported codepage "+current_codepage+", using 1252"),current_codepage=1252),B=0,C=0;B<w.length;++B)if(w[B]!=null){var y=x.next(32),A=(w[B].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);y.write_shift(1,A,"sbcs"),y.write_shift(1,Y[B]=="?"?"C":Y[B],"sbcs"),y.write_shift(4,C),y.write_shift(1,X[B]||c[Y[B]]||0),y.write_shift(1,O[B]||0),y.write_shift(1,2),y.write_shift(4,0),y.write_shift(1,0),y.write_shift(4,0),y.write_shift(4,0),C+=X[B]||c[Y[B]]||0}var I=x.next(264);for(I.write_shift(4,13),B=0;B<65;++B)I.write_shift(4,0);for(B=0;B<S.length;++B){var P=x.next(z);for(P.write_shift(1,0),C=0;C<w.length;++C)if(w[C]!=null)switch(Y[C]){case"L":P.write_shift(1,S[B][C]==null?63:S[B][C]?84:70);break;case"B":P.write_shift(8,S[B][C]||0,"f");break;case"N":var H="0";for(typeof S[B][C]=="number"&&(H=S[B][C].toFixed(O[C]||0)),H.length>X[C]&&(H=H.slice(0,X[C])),D=0;D<X[C]-H.length;++D)P.write_shift(1,32);P.write_shift(1,H,"sbcs");break;case"D":S[B][C]?(P.write_shift(4,("0000"+S[B][C].getFullYear()).slice(-4),"sbcs"),P.write_shift(2,("00"+(S[B][C].getMonth()+1)).slice(-2),"sbcs"),P.write_shift(2,("00"+S[B][C].getDate()).slice(-2),"sbcs")):P.write_shift(8,"00000000","sbcs");break;case"C":var q=P.l,j=String(S[B][C]!=null?S[B][C]:"").slice(0,X[C]);for(P.write_shift(1,j,"cpstr"),q+=X[C]-P.l,D=0;D<q;++D)P.write_shift(1,32);break}}return current_codepage=b,x.next(1).write_shift(1,26),x.end()}return{to_workbook:o,to_sheet:a,from_sheet:l}}(),SYLK=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+keys(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(x,_){var w=t[_];return typeof w=="number"?_getansi(w):w},a=function(x,_,w){var S=_.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return S==59?x:_getansi(S)};t["|"]=254;function o(x,_){switch(_.type){case"base64":return c(Base64_decode(x),_);case"binary":return c(x,_);case"buffer":return c(has_buf&&Buffer.isBuffer(x)?x.toString("binary"):a2s(x),_);case"array":return c(cc2str(x),_)}throw new Error("Unrecognized type "+_.type)}function c(x,_){var w=x.split(/[\n\r]+/),S=-1,T=-1,B=0,C=0,D=[],z=[],U=null,Y={},X=[],O=[],J=[],Z=0,se,ie={Workbook:{WBProps:{},Names:[]}};for(+_.codepage>=0&&set_cp(+_.codepage);B!==w.length;++B){Z=0;var F=w[B].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(e,n),k=F.replace(/;;/g,"\0").split(";").map(function(oe){return oe.replace(/\u0000/g,";")}),y=k[0],A;if(F.length>0)switch(y){case"ID":break;case"E":break;case"B":break;case"O":for(C=1;C<k.length;++C)switch(k[C].charAt(0)){case"V":{var I=parseInt(k[C].slice(1),10);I>=1&&I<=4&&(ie.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(k[1].charAt(0)){case"P":z.push(F.slice(3).replace(/;;/g,";"));break}break;case"NN":{var P={Sheet:0};for(C=1;C<k.length;++C)switch(k[C].charAt(0)){case"N":P.Name=k[C].slice(1);break;case"E":P.Ref=(_&&_.sheet||"Sheet1")+"!"+rc_to_a1(k[C].slice(1));break}ie.Workbook.Names.push(P)}break;case"C":var H=!1,q=!1,j=!1,M=!1,E=-1,L=-1,le="",Q="z";for(C=1;C<k.length;++C)switch(k[C].charAt(0)){case"A":break;case"X":T=parseInt(k[C].slice(1),10)-1,q=!0;break;case"Y":for(S=parseInt(k[C].slice(1),10)-1,q||(T=0),se=D.length;se<=S;++se)D[se]=[];break;case"K":A=k[C].slice(1),A.charAt(0)==='"'?(A=A.slice(1,A.length-1),Q="s"):A==="TRUE"||A==="FALSE"?(A=A==="TRUE",Q="b"):isNaN(fuzzynum(A))?isNaN(fuzzydate(A).getDate())||(A=parseDate(A),Q="d",_.cellDates||(Q="n",A=datenum(A,ie.Workbook.WBProps.date1904))):(A=fuzzynum(A),Q="n",U!==null&&fmt_is_date(U)&&_.cellDates&&(A=numdate(ie.Workbook.WBProps.date1904?A+1462:A),Q="d")),H=!0;break;case"E":M=!0,le=rc_to_a1(k[C].slice(1),{r:S,c:T});break;case"S":j=!0;break;case"G":break;case"R":E=parseInt(k[C].slice(1),10)-1;break;case"C":L=parseInt(k[C].slice(1),10)-1;break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+F)}if(H&&(D[S][T]?(D[S][T].t=Q,D[S][T].v=A):D[S][T]={t:Q,v:A},U&&(D[S][T].z=U),_.cellText!==!1&&U&&(D[S][T].w=SSF_format(D[S][T].z,D[S][T].v,{date1904:ie.Workbook.WBProps.date1904})),U=null),j){if(M)throw new Error("SYLK shared formula cannot have own formula");var ce=E>-1&&D[E][L];if(!ce||!ce[1])throw new Error("SYLK shared formula cannot find base");le=shift_formula_str(ce[1],{r:S-E,c:T-L})}le&&(D[S][T]?D[S][T].f=le:D[S][T]={t:"n",f:le});break;case"F":var fe=0;for(C=1;C<k.length;++C)switch(k[C].charAt(0)){case"X":T=parseInt(k[C].slice(1),10)-1,++fe;break;case"Y":for(S=parseInt(k[C].slice(1),10)-1,se=D.length;se<=S;++se)D[se]=[];break;case"M":Z=parseInt(k[C].slice(1),10)/20;break;case"F":break;case"G":break;case"P":U=z[parseInt(k[C].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(J=k[C].slice(1).split(" "),se=parseInt(J[0],10);se<=parseInt(J[1],10);++se)Z=parseInt(J[2],10),O[se-1]=Z===0?{hidden:!0}:{wch:Z};break;case"C":T=parseInt(k[C].slice(1),10)-1,O[T]||(O[T]={});break;case"R":S=parseInt(k[C].slice(1),10)-1,X[S]||(X[S]={}),Z>0?(X[S].hpt=Z,X[S].hpx=pt2px(Z)):Z===0&&(X[S].hidden=!0);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+F)}fe<1&&(U=null);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+F)}}return X.length>0&&(Y["!rows"]=X),O.length>0&&(Y["!cols"]=O),O.forEach(function(oe){process_col(oe)}),_&&_.sheetRows&&(D=D.slice(0,_.sheetRows)),[D,Y,ie]}function l(x,_){var w=o(x,_),S=w[0],T=w[1],B=w[2],C=dup(_);C.date1904=(((B||{}).Workbook||{}).WBProps||{}).date1904;var D=aoa_to_sheet(S,C);keys(T).forEach(function(U){D[U]=T[U]});var z=sheet_to_workbook(D,_);return keys(B).forEach(function(U){z[U]=B[U]}),z.bookType="sylk",z}function u(x,_,w,S){var T="C;Y"+(w+1)+";X"+(S+1)+";K";switch(x.t){case"n":T+=x.v||0,x.f&&!x.F&&(T+=";E"+a1_to_rc(x.f,{r:w,c:S}));break;case"b":T+=x.v?"TRUE":"FALSE";break;case"e":T+=x.w||x.v;break;case"d":T+='"'+(x.w||x.v)+'"';break;case"s":T+='"'+(x.v==null?"":String(x.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return T}function d(x,_){_.forEach(function(w,S){var T="F;W"+(S+1)+" "+(S+1)+" ";w.hidden?T+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=width2px(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=px2char(w.wpx)),typeof w.wch=="number"&&(T+=Math.round(w.wch))),T.charAt(T.length-1)!=" "&&x.push(T)})}function m(x,_){_.forEach(function(w,S){var T="F;";w.hidden?T+="M0;":w.hpt?T+="M"+20*w.hpt+";":w.hpx&&(T+="M"+20*px2pt(w.hpx)+";"),T.length>2&&x.push(T+"R"+(S+1))})}function b(x,_,w){var S=["ID;PSheetJS;N;E"],T=[],B=safe_decode_range(x["!ref"]),C,D=x["!data"]!=null,z=`\r
`,U=(((w||{}).Workbook||{}).WBProps||{}).date1904;S.push("P;PGeneral"),S.push("F;P0;DG0G8;M255"),x["!cols"]&&d(S,x["!cols"]),x["!rows"]&&m(S,x["!rows"]),S.push("B;Y"+(B.e.r-B.s.r+1)+";X"+(B.e.c-B.s.c+1)+";D"+[B.s.c,B.s.r,B.e.c,B.e.r].join(" ")),S.push("O;L;D;B"+(U?";V4":"")+";K47;G100 0.001");for(var Y=B.s.r;Y<=B.e.r;++Y)if(!(D&&!x["!data"][Y])){for(var X=[],O=B.s.c;O<=B.e.c;++O)C=D?x["!data"][Y][O]:x[encode_col(O)+encode_row(Y)],!(!C||C.v==null&&(!C.f||C.F))&&X.push(u(C,x,Y,O));T.push(X.join(z))}return S.join(z)+z+T.join(z)+z+"E"+z}return{to_workbook:l,from_sheet:b}}(),DIF=function(){function t(u,d){switch(d.type){case"base64":return e(Base64_decode(u),d);case"binary":return e(u,d);case"buffer":return e(has_buf&&Buffer.isBuffer(u)?u.toString("binary"):a2s(u),d);case"array":return e(cc2str(u),d)}throw new Error("Unrecognized type "+d.type)}function e(u,d){for(var m=u.split(`
`),b=-1,x=-1,_=0,w=[];_!==m.length;++_){if(m[_].trim()==="BOT"){w[++b]=[],x=0;continue}if(!(b<0)){var S=m[_].trim().split(","),T=S[0],B=S[1];++_;for(var C=m[_]||"";(C.match(/["]/g)||[]).length&1&&_<m.length-1;)C+=`
`+m[++_];switch(C=C.trim(),+T){case-1:if(C==="BOT"){w[++b]=[],x=0;continue}else if(C!=="EOD")throw new Error("Unrecognized DIF special command "+C);break;case 0:C==="TRUE"?w[b][x]=!0:C==="FALSE"?w[b][x]=!1:isNaN(fuzzynum(B))?isNaN(fuzzydate(B).getDate())?w[b][x]=B:w[b][x]=parseDate(B):w[b][x]=fuzzynum(B),++x;break;case 1:C=C.slice(1,C.length-1),C=C.replace(/""/g,'"'),C&&C.match(/^=".*"$/)&&(C=C.slice(2,-1)),w[b][x++]=C!==""?C:null;break}if(C==="EOD")break}}return d&&d.sheetRows&&(w=w.slice(0,d.sheetRows)),w}function n(u,d){return aoa_to_sheet(t(u,d),d)}function a(u,d){var m=sheet_to_workbook(n(u,d),d);return m.bookType="dif",m}function o(u,d){return"0,"+String(u)+`\r
`+d}function c(u){return`1,0\r
"`+u.replace(/"/g,'""')+'"'}function l(u){for(var d=safe_decode_range(u["!ref"]),m=u["!data"]!=null,b=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(d.e.r-d.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(d.e.c-d.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],x=d.s.r;x<=d.e.r;++x){for(var _=m?u["!data"][x]:[],w=`-1,0\r
BOT\r
`,S=d.s.c;S<=d.e.c;++S){var T=m?_&&_[S]:u[encode_cell({r:x,c:S})];if(T==null){w+=`1,0\r
""\r
`;continue}switch(T.t){case"n":T.w!=null?w+="0,"+T.w+`\r
V`:T.v!=null?w+=o(T.v,"V"):T.f!=null&&!T.F?w+=c("="+T.f):w+=`1,0\r
""`;break;case"b":w+=T.v?o(1,"TRUE"):o(0,"FALSE");break;case"s":w+=c(isNaN(+T.v)?T.v:'="'+T.v+'"');break;case"d":T.w||(T.w=SSF_format(T.z||table_fmt[14],datenum(parseDate(T.v)))),w+=o(T.w,"V");break;default:w+=`1,0\r
""`}w+=`\r
`}b.push(w)}return b.join("")+`-1,0\r
EOD`}return{to_workbook:a,to_sheet:n,from_sheet:l}}(),ETH=function(){function t(x){return x.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(x){return x.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(x,_){for(var w=x.split(`
`),S=-1,T=-1,B=0,C=[];B!==w.length;++B){var D=w[B].trim().split(":");if(D[0]==="cell"){var z=decode_cell(D[1]);if(C.length<=z.r)for(S=C.length;S<=z.r;++S)C[S]||(C[S]=[]);switch(S=z.r,T=z.c,D[2]){case"t":C[S][T]=t(D[3]);break;case"v":C[S][T]=+D[3];break;case"vtf":var U=D[D.length-1];case"vtc":switch(D[3]){case"nl":C[S][T]=!!+D[4];break;default:C[S][T]=+D[4];break}D[2]=="vtf"&&(C[S][T]=[C[S][T],U])}}}return _&&_.sheetRows&&(C=C.slice(0,_.sheetRows)),C}function a(x,_){return aoa_to_sheet(n(x,_),_)}function o(x,_){return sheet_to_workbook(a(x,_),_)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),l=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,u=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),d="--SocialCalcSpreadsheetControlSave--";function m(x){if(!x||!x["!ref"])return"";for(var _=[],w=[],S,T="",B=decode_range(x["!ref"]),C=x["!data"]!=null,D=B.s.r;D<=B.e.r;++D)for(var z=B.s.c;z<=B.e.c;++z)if(T=encode_cell({r:D,c:z}),S=C?(x["!data"][D]||[])[z]:x[T],!(!S||S.v==null||S.t==="z")){switch(w=["cell",T,"t"],S.t){case"s":case"str":w.push(e(S.v));break;case"n":S.f?(w[2]="vtf",w[3]="n",w[4]=S.v,w[5]=e(S.f)):(w[2]="v",w[3]=S.v);break;case"b":w[2]="vt"+(S.f?"f":"c"),w[3]="nl",w[4]=S.v?"1":"0",w[5]=e(S.f||(S.v?"TRUE":"FALSE"));break;case"d":var U=datenum(parseDate(S.v));w[2]="vtc",w[3]="nd",w[4]=""+U,w[5]=S.w||SSF_format(S.z||table_fmt[14],U);break;case"e":continue}_.push(w.join(":"))}return _.push("sheet:c:"+(B.e.c-B.s.c+1)+":r:"+(B.e.r-B.s.r+1)+":tvf:1"),_.push("valueformat:1:text-wiki"),_.join(`
`)}function b(x){return[c,l,u,l,m(x),d].join(`
`)}return{to_workbook:o,to_sheet:a,from_sheet:b}}(),PRN=function(){function t(b,x,_,w,S){S.raw?x[_][w]=b:b===""||(b==="TRUE"?x[_][w]=!0:b==="FALSE"?x[_][w]=!1:isNaN(fuzzynum(b))?isNaN(fuzzydate(b).getDate())?x[_][w]=b:x[_][w]=parseDate(b):x[_][w]=fuzzynum(b))}function e(b,x){var _=x||{},w=[];if(!b||b.length===0)return w;for(var S=b.split(/[\r\n]/),T=S.length-1;T>=0&&S[T].length===0;)--T;for(var B=10,C=0,D=0;D<=T;++D)C=S[D].indexOf(" "),C==-1?C=S[D].length:C++,B=Math.max(B,C);for(D=0;D<=T;++D){w[D]=[];var z=0;for(t(S[D].slice(0,B).trim(),w,D,z,_),z=1;z<=(S[D].length-B)/10+1;++z)t(S[D].slice(B+(z-1)*10,B+z*10).trim(),w,D,z,_)}return _.sheetRows&&(w=w.slice(0,_.sheetRows)),w}var n={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function o(b){for(var x={},_=!1,w=0,S=0;w<b.length;++w)(S=b.charCodeAt(w))==34?_=!_:!_&&S in n&&(x[S]=(x[S]||0)+1);S=[];for(w in x)Object.prototype.hasOwnProperty.call(x,w)&&S.push([x[w],w]);if(!S.length){x=a;for(w in x)Object.prototype.hasOwnProperty.call(x,w)&&S.push([x[w],w])}return S.sort(function(T,B){return T[0]-B[0]||a[T[1]]-a[B[1]]}),n[S.pop()[1]]||44}function c(b,x){var _=x||{},w="",S={};_.dense&&(S["!data"]=[]);var T={s:{c:0,r:0},e:{c:0,r:0}};b.slice(0,4)=="sep="?b.charCodeAt(5)==13&&b.charCodeAt(6)==10?(w=b.charAt(4),b=b.slice(7)):b.charCodeAt(5)==13||b.charCodeAt(5)==10?(w=b.charAt(4),b=b.slice(6)):w=o(b.slice(0,1024)):_&&_.FS?w=_.FS:w=o(b.slice(0,1024));var B=0,C=0,D=0,z=0,U=0,Y=w.charCodeAt(0),X=!1,O=0,J=b.charCodeAt(0),Z=_.dateNF!=null?dateNF_regex(_.dateNF):null;function se(){var ie=b.slice(z,U);ie.slice(-1)=="\r"&&(ie=ie.slice(0,-1));var F={};if(ie.charAt(0)=='"'&&ie.charAt(ie.length-1)=='"'&&(ie=ie.slice(1,-1).replace(/""/g,'"')),ie.length===0)F.t="z";else if(_.raw)F.t="s",F.v=ie;else if(ie.trim().length===0)F.t="s",F.v=ie;else if(ie.charCodeAt(0)==61)ie.charCodeAt(1)==34&&ie.charCodeAt(ie.length-1)==34?(F.t="s",F.v=ie.slice(2,-1).replace(/""/g,'"')):fuzzyfmla(ie)?(F.t="n",F.f=ie.slice(1)):(F.t="s",F.v=ie);else if(ie=="TRUE")F.t="b",F.v=!0;else if(ie=="FALSE")F.t="b",F.v=!1;else if(!isNaN(D=fuzzynum(ie)))F.t="n",_.cellText!==!1&&(F.w=ie),F.v=D;else if(!isNaN((D=fuzzydate(ie)).getDate())||Z&&ie.match(Z)){F.z=_.dateNF||table_fmt[14];var k=0;Z&&ie.match(Z)&&(ie=dateNF_fix(ie,_.dateNF,ie.match(Z)||[]),k=1,D=parseDate(ie,k)),_.cellDates?(F.t="d",F.v=D):(F.t="n",F.v=datenum(D)),_.cellText!==!1&&(F.w=SSF_format(F.z,F.v instanceof Date?datenum(F.v):F.v)),_.cellNF||delete F.z}else F.t="s",F.v=ie;if(F.t=="z"||(_.dense?(S["!data"][B]||(S["!data"][B]=[]),S["!data"][B][C]=F):S[encode_cell({c:C,r:B})]=F),z=U+1,J=b.charCodeAt(z),T.e.c<C&&(T.e.c=C),T.e.r<B&&(T.e.r=B),O==Y)++C;else if(C=0,++B,_.sheetRows&&_.sheetRows<=B)return!0}e:for(;U<b.length;++U)switch(O=b.charCodeAt(U)){case 34:J===34&&(X=!X);break;case 13:if(X)break;b.charCodeAt(U+1)==10&&++U;case Y:case 10:if(!X&&se())break e;break}return U-z>0&&se(),S["!ref"]=encode_range(T),S}function l(b,x){return!(x&&x.PRN)||x.FS||b.slice(0,4)=="sep="||b.indexOf("	")>=0||b.indexOf(",")>=0||b.indexOf(";")>=0?c(b,x):aoa_to_sheet(e(b,x),x)}function u(b,x){var _="",w=x.type=="string"?[0,0,0,0]:firstbyte(b,x);switch(x.type){case"base64":_=Base64_decode(b);break;case"binary":_=b;break;case"buffer":x.codepage==65001?_=b.toString("utf8"):x.codepage&&typeof $cptable<"u"?_=$cptable.utils.decode(x.codepage,b):_=has_buf&&Buffer.isBuffer(b)?b.toString("binary"):a2s(b);break;case"array":_=cc2str(b);break;case"string":_=b;break;default:throw new Error("Unrecognized type "+x.type)}return w[0]==239&&w[1]==187&&w[2]==191?_=utf8read(_.slice(3)):x.type!="string"&&x.type!="buffer"&&x.codepage==65001?_=utf8read(_):x.type=="binary"&&typeof $cptable<"u"&&x.codepage&&(_=$cptable.utils.decode(x.codepage,$cptable.utils.encode(28591,_))),_.slice(0,19)=="socialcalc:version:"?ETH.to_sheet(x.type=="string"?_:utf8read(_),x):l(_,x)}function d(b,x){return sheet_to_workbook(u(b,x),x)}function m(b){for(var x=[],_=safe_decode_range(b["!ref"]),w,S=b["!data"]!=null,T=_.s.r;T<=_.e.r;++T){for(var B=[],C=_.s.c;C<=_.e.c;++C){var D=encode_cell({r:T,c:C});if(w=S?(b["!data"][T]||[])[C]:b[D],!w||w.v==null){B.push("          ");continue}for(var z=(w.w||(format_cell(w),w.w)||"").slice(0,10);z.length<10;)z+=" ";B.push(z+(C===0?" ":""))}x.push(B.join(""))}return x.join(`
`)}return{to_workbook:d,to_sheet:u,from_sheet:m}}();function read_wb_ID(t,e){var n=e||{},a=!!n.WTF;n.WTF=!0;try{var o=SYLK.to_workbook(t,n);return n.WTF=a,o}catch(c){if(n.WTF=a,!c.message.match(/SYLK bad record ID/)&&a)throw c;return PRN.to_workbook(t,e)}}var WK_=function(){function t(le,Q,ce){if(le){prep_blob(le,le.l||0);for(var fe=ce.Enum||M;le.l<le.length;){var oe=le.read_shift(2),de=fe[oe]||fe[65535],ae=le.read_shift(2),he=le.l+ae,te=de.f&&de.f(le,ae,ce);if(le.l=he,Q(te,de,oe))return}}}function e(le,Q){switch(Q.type){case"base64":return n(s2a(Base64_decode(le)),Q);case"binary":return n(s2a(le),Q);case"buffer":case"array":return n(le,Q)}throw"Unsupported type "+Q.type}function n(le,Q){if(!le)return le;var ce=Q||{},fe={},oe="Sheet1",de="",ae=0,he={},te=[],pe=[],ee=[];ce.dense&&(ee=fe["!data"]=[]);var ge={s:{r:0,c:0},e:{r:0,c:0}},Ee=ce.sheetRows||0;if(le[4]==81&&le[5]==80&&le[6]==87)return L(le,Q);if(le[2]==0&&(le[3]==8||le[3]==9)&&le.length>=16&&le[14]==5&&le[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(le[2]==2)ce.Enum=M,t(le,function(Se,ke,Ce){switch(Ce){case 0:ce.vers=Se,Se>=4096&&(ce.qpro=!0);break;case 255:ce.vers=Se,ce.works=!0;break;case 6:ge=Se;break;case 204:Se&&(de=Se);break;case 222:de=Se;break;case 15:case 51:(!ce.qpro&&!ce.works||Ce==51)&&Se[1].v.charCodeAt(0)<48&&(Se[1].v=Se[1].v.slice(1)),(ce.works||ce.works2)&&(Se[1].v=Se[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:Ce==14&&(Se[2]&112)==112&&(Se[2]&15)>1&&(Se[2]&15)<15&&(Se[1].z=ce.dateNF||table_fmt[14],ce.cellDates&&(Se[1].t="d",Se[1].v=numdate(Se[1].v))),ce.qpro&&Se[3]>ae&&(fe["!ref"]=encode_range(ge),he[oe]=fe,te.push(oe),fe={},ce.dense&&(ee=fe["!data"]=[]),ge={s:{r:0,c:0},e:{r:0,c:0}},ae=Se[3],oe=de||"Sheet"+(ae+1),de="");var Re=ce.dense?(ee[Se[0].r]||[])[Se[0].c]:fe[encode_cell(Se[0])];if(Re){Re.t=Se[1].t,Re.v=Se[1].v,Se[1].z!=null&&(Re.z=Se[1].z),Se[1].f!=null&&(Re.f=Se[1].f);break}ce.dense?(ee[Se[0].r]||(ee[Se[0].r]=[]),ee[Se[0].r][Se[0].c]=Se[1]):fe[encode_cell(Se[0])]=Se[1];break;case 21509:ce.works2=!0;break}},ce);else if(le[2]==26||le[2]==14)ce.Enum=E,le[2]==14&&(ce.qpro=!0,le.l=0),t(le,function(Se,ke,Ce){switch(Ce){case 204:oe=Se;break;case 22:Se[1].v.charCodeAt(0)<48&&(Se[1].v=Se[1].v.slice(1)),Se[1].v=Se[1].v.replace(/\x0F./g,function(Re){return String.fromCharCode(Re.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if(Se[3]>ae&&(fe["!ref"]=encode_range(ge),he[oe]=fe,te.push(oe),fe={},ce.dense&&(ee=fe["!data"]=[]),ge={s:{r:0,c:0},e:{r:0,c:0}},ae=Se[3],oe="Sheet"+(ae+1)),Ee>0&&Se[0].r>=Ee)break;ce.dense?(ee[Se[0].r]||(ee[Se[0].r]=[]),ee[Se[0].r][Se[0].c]=Se[1]):fe[encode_cell(Se[0])]=Se[1],ge.e.c<Se[0].c&&(ge.e.c=Se[0].c),ge.e.r<Se[0].r&&(ge.e.r=Se[0].r);break;case 27:Se[14e3]&&(pe[Se[14e3][0]]=Se[14e3][1]);break;case 1537:pe[Se[0]]=Se[1],Se[0]==ae&&(oe=Se[1]);break}},ce);else throw new Error("Unrecognized LOTUS BOF "+le[2]);if(fe["!ref"]=encode_range(ge),he[de||oe]=fe,te.push(de||oe),!pe.length)return{SheetNames:te,Sheets:he};for(var be={},xe=[],ve=0;ve<pe.length;++ve)he[te[ve]]?(xe.push(pe[ve]||te[ve]),be[pe[ve]]=he[pe[ve]]||he[te[ve]]):(xe.push(pe[ve]),be[pe[ve]]={"!ref":"A1"});return{SheetNames:xe,Sheets:be}}function a(le,Q){var ce=Q||{};if(+ce.codepage>=0&&set_cp(+ce.codepage),ce.type=="string")throw new Error("Cannot write WK1 to JS string");var fe=buf_array(),oe=safe_decode_range(le["!ref"]),de=le["!data"]!=null,ae=[];write_biff_rec(fe,0,c(1030)),write_biff_rec(fe,6,d(oe));for(var he=Math.min(oe.e.r,8191),te=oe.s.c;te<=oe.e.c;++te)ae[te]=encode_col(te);for(var pe=oe.s.r;pe<=he;++pe){var ee=encode_row(pe);for(te=oe.s.c;te<=oe.e.c;++te){var ge=de?(le["!data"][pe]||[])[te]:le[ae[te]+ee];if(!(!ge||ge.t=="z"))if(ge.t=="n")(ge.v|0)==ge.v&&ge.v>=-32768&&ge.v<=32767?write_biff_rec(fe,13,S(pe,te,ge.v)):write_biff_rec(fe,14,B(pe,te,ge.v));else{var Ee=format_cell(ge);write_biff_rec(fe,15,x(pe,te,Ee.slice(0,239)))}}}return write_biff_rec(fe,1),fe.end()}function o(le,Q){var ce=Q||{};if(+ce.codepage>=0&&set_cp(+ce.codepage),ce.type=="string")throw new Error("Cannot write WK3 to JS string");var fe=buf_array();write_biff_rec(fe,0,l(le));for(var oe=0,de=0;oe<le.SheetNames.length;++oe)(le.Sheets[le.SheetNames[oe]]||{})["!ref"]&&write_biff_rec(fe,27,j(le.SheetNames[oe],de++));var ae=0;for(oe=0;oe<le.SheetNames.length;++oe){var he=le.Sheets[le.SheetNames[oe]];if(!(!he||!he["!ref"])){for(var te=safe_decode_range(he["!ref"]),pe=he["!data"]!=null,ee=[],ge=Math.min(te.e.r,8191),Ee=te.s.r;Ee<=ge;++Ee)for(var be=encode_row(Ee),xe=te.s.c;xe<=te.e.c;++xe){Ee===te.s.r&&(ee[xe]=encode_col(xe));var ve=ee[xe]+be,Se=pe?(he["!data"][Ee]||[])[xe]:he[ve];if(!(!Se||Se.t=="z"))if(Se.t=="n")write_biff_rec(fe,23,ie(Ee,xe,ae,Se.v));else{var ke=format_cell(Se);write_biff_rec(fe,22,J(Ee,xe,ae,ke.slice(0,239)))}}++ae}}return write_biff_rec(fe,1),fe.end()}function c(le){var Q=new_buf(2);return Q.write_shift(2,le),Q}function l(le){var Q=new_buf(26);Q.write_shift(2,4096),Q.write_shift(2,4),Q.write_shift(4,0);for(var ce=0,fe=0,oe=0,de=0;de<le.SheetNames.length;++de){var ae=le.SheetNames[de],he=le.Sheets[ae];if(!(!he||!he["!ref"])){++oe;var te=decode_range(he["!ref"]);ce<te.e.r&&(ce=te.e.r),fe<te.e.c&&(fe=te.e.c)}}return ce>8191&&(ce=8191),Q.write_shift(2,ce),Q.write_shift(1,oe),Q.write_shift(1,fe),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(1,1),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(4,0),Q}function u(le,Q,ce){var fe={s:{c:0,r:0},e:{c:0,r:0}};return Q==8&&ce.qpro?(fe.s.c=le.read_shift(1),le.l++,fe.s.r=le.read_shift(2),fe.e.c=le.read_shift(1),le.l++,fe.e.r=le.read_shift(2),fe):(fe.s.c=le.read_shift(2),fe.s.r=le.read_shift(2),Q==12&&ce.qpro&&(le.l+=2),fe.e.c=le.read_shift(2),fe.e.r=le.read_shift(2),Q==12&&ce.qpro&&(le.l+=2),fe.s.c==65535&&(fe.s.c=fe.e.c=fe.s.r=fe.e.r=0),fe)}function d(le){var Q=new_buf(8);return Q.write_shift(2,le.s.c),Q.write_shift(2,le.s.r),Q.write_shift(2,le.e.c),Q.write_shift(2,le.e.r),Q}function m(le,Q,ce){var fe=[{c:0,r:0},{t:"n",v:0},0,0];return ce.qpro&&ce.vers!=20768?(fe[0].c=le.read_shift(1),fe[3]=le.read_shift(1),fe[0].r=le.read_shift(2),le.l+=2):ce.works?(fe[0].c=le.read_shift(2),fe[0].r=le.read_shift(2),fe[2]=le.read_shift(2)):(fe[2]=le.read_shift(1),fe[0].c=le.read_shift(2),fe[0].r=le.read_shift(2)),fe}function b(le,Q,ce){var fe=le.l+Q,oe=m(le,Q,ce);if(oe[1].t="s",ce.vers==20768){le.l++;var de=le.read_shift(1);return oe[1].v=le.read_shift(de,"utf8"),oe}return ce.qpro&&le.l++,oe[1].v=le.read_shift(fe-le.l,"cstr"),oe}function x(le,Q,ce){var fe=new_buf(7+ce.length);fe.write_shift(1,255),fe.write_shift(2,Q),fe.write_shift(2,le),fe.write_shift(1,39);for(var oe=0;oe<fe.length;++oe){var de=ce.charCodeAt(oe);fe.write_shift(1,de>=128?95:de)}return fe.write_shift(1,0),fe}function _(le,Q,ce){var fe=le.l+Q,oe=m(le,Q,ce);if(oe[1].t="s",ce.vers==20768){var de=le.read_shift(1);return oe[1].v=le.read_shift(de,"utf8"),oe}return oe[1].v=le.read_shift(fe-le.l,"cstr"),oe}function w(le,Q,ce){var fe=m(le,Q,ce);return fe[1].v=le.read_shift(2,"i"),fe}function S(le,Q,ce){var fe=new_buf(7);return fe.write_shift(1,255),fe.write_shift(2,Q),fe.write_shift(2,le),fe.write_shift(2,ce,"i"),fe}function T(le,Q,ce){var fe=m(le,Q,ce);return fe[1].v=le.read_shift(8,"f"),fe}function B(le,Q,ce){var fe=new_buf(13);return fe.write_shift(1,255),fe.write_shift(2,Q),fe.write_shift(2,le),fe.write_shift(8,ce,"f"),fe}function C(le,Q,ce){var fe=le.l+Q,oe=m(le,Q,ce);if(oe[1].v=le.read_shift(8,"f"),ce.qpro)le.l=fe;else{var de=le.read_shift(2);Y(le.slice(le.l,le.l+de),oe),le.l+=de}return oe}function D(le,Q,ce){var fe=Q&32768;return Q&=-32769,Q=(fe?le:0)+(Q>=8192?Q-16384:Q),(fe?"":"$")+(ce?encode_col(Q):encode_row(Q))}var z={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],63:["ROUND",2],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},U=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function Y(le,Q){prep_blob(le,0);for(var ce=[],fe=0,oe="",de="",ae="",he="";le.l<le.length;){var te=le[le.l++];switch(te){case 0:ce.push(le.read_shift(8,"f"));break;case 1:de=D(Q[0].c,le.read_shift(2),!0),oe=D(Q[0].r,le.read_shift(2),!1),ce.push(de+oe);break;case 2:{var pe=D(Q[0].c,le.read_shift(2),!0),ee=D(Q[0].r,le.read_shift(2),!1);de=D(Q[0].c,le.read_shift(2),!0),oe=D(Q[0].r,le.read_shift(2),!1),ce.push(pe+ee+":"+de+oe)}break;case 3:if(le.l<le.length){console.error("WK1 premature formula end");return}break;case 4:ce.push("("+ce.pop()+")");break;case 5:ce.push(le.read_shift(2));break;case 6:{for(var ge="";te=le[le.l++];)ge+=String.fromCharCode(te);ce.push('"'+ge.replace(/"/g,'""')+'"')}break;case 8:ce.push("-"+ce.pop());break;case 23:ce.push("+"+ce.pop());break;case 22:ce.push("NOT("+ce.pop()+")");break;case 20:case 21:he=ce.pop(),ae=ce.pop(),ce.push(["AND","OR"][te-20]+"("+ae+","+he+")");break;default:if(te<32&&U[te])he=ce.pop(),ae=ce.pop(),ce.push(ae+U[te]+he);else if(z[te]){if(fe=z[te][1],fe==69&&(fe=le[le.l++]),fe>ce.length){console.error("WK1 bad formula parse 0x"+te.toString(16)+":|"+ce.join("|")+"|");return}var Ee=ce.slice(-fe);ce.length-=fe,ce.push(z[te][0]+"("+Ee.join(",")+")")}else return te<=7?console.error("WK1 invalid opcode "+te.toString(16)):te<=24?console.error("WK1 unsupported op "+te.toString(16)):te<=30?console.error("WK1 invalid opcode "+te.toString(16)):te<=115?console.error("WK1 unsupported function opcode "+te.toString(16)):console.error("WK1 unrecognized opcode "+te.toString(16))}}ce.length==1?Q[1].f=""+ce[0]:console.error("WK1 bad formula parse |"+ce.join("|")+"|")}function X(le){var Q=[{c:0,r:0},{t:"n",v:0},0];return Q[0].r=le.read_shift(2),Q[3]=le[le.l++],Q[0].c=le[le.l++],Q}function O(le,Q){var ce=X(le);return ce[1].t="s",ce[1].v=le.read_shift(Q-4,"cstr"),ce}function J(le,Q,ce,fe){var oe=new_buf(6+fe.length);oe.write_shift(2,le),oe.write_shift(1,ce),oe.write_shift(1,Q),oe.write_shift(1,39);for(var de=0;de<fe.length;++de){var ae=fe.charCodeAt(de);oe.write_shift(1,ae>=128?95:ae)}return oe.write_shift(1,0),oe}function Z(le,Q){var ce=X(le);ce[1].v=le.read_shift(2);var fe=ce[1].v>>1;if(ce[1].v&1)switch(fe&7){case 0:fe=(fe>>3)*5e3;break;case 1:fe=(fe>>3)*500;break;case 2:fe=(fe>>3)/20;break;case 3:fe=(fe>>3)/200;break;case 4:fe=(fe>>3)/2e3;break;case 5:fe=(fe>>3)/2e4;break;case 6:fe=(fe>>3)/16;break;case 7:fe=(fe>>3)/64;break}return ce[1].v=fe,ce}function se(le,Q){var ce=X(le),fe=le.read_shift(4),oe=le.read_shift(4),de=le.read_shift(2);if(de==65535)return fe===0&&oe===3221225472?(ce[1].t="e",ce[1].v=15):fe===0&&oe===3489660928?(ce[1].t="e",ce[1].v=42):ce[1].v=0,ce;var ae=de&32768;return de=(de&32767)-16446,ce[1].v=(1-ae*2)*(oe*Math.pow(2,de+32)+fe*Math.pow(2,de)),ce}function ie(le,Q,ce,fe){var oe=new_buf(14);if(oe.write_shift(2,le),oe.write_shift(1,ce),oe.write_shift(1,Q),fe==0)return oe.write_shift(4,0),oe.write_shift(4,0),oe.write_shift(2,65535),oe;var de=0,ae=0,he=0,te=0;return fe<0&&(de=1,fe=-fe),ae=Math.log2(fe)|0,fe/=Math.pow(2,ae-31),te=fe>>>0,te&2147483648||(fe/=2,++ae,te=fe>>>0),fe-=te,te|=2147483648,te>>>=0,fe*=Math.pow(2,32),he=fe>>>0,oe.write_shift(4,he),oe.write_shift(4,te),ae+=16383+(de?32768:0),oe.write_shift(2,ae),oe}function F(le,Q){var ce=se(le);return le.l+=Q-14,ce}function k(le,Q){var ce=X(le),fe=le.read_shift(4);return ce[1].v=fe>>6,ce}function y(le,Q){var ce=X(le),fe=le.read_shift(8,"f");return ce[1].v=fe,ce}function A(le,Q){var ce=y(le);return le.l+=Q-12,ce}function I(le,Q){return le[le.l+Q-1]==0?le.read_shift(Q,"cstr"):""}function P(le,Q){var ce=le[le.l++];ce>Q-1&&(ce=Q-1);for(var fe="";fe.length<ce;)fe+=String.fromCharCode(le[le.l++]);return fe}function H(le,Q,ce){if(!(!ce.qpro||Q<21)){var fe=le.read_shift(1);le.l+=17,le.l+=1,le.l+=2;var oe=le.read_shift(Q-21,"cstr");return[fe,oe]}}function q(le,Q){for(var ce={},fe=le.l+Q;le.l<fe;){var oe=le.read_shift(2);if(oe==14e3){for(ce[oe]=[0,""],ce[oe][0]=le.read_shift(2);le[le.l];)ce[oe][1]+=String.fromCharCode(le[le.l]),le.l++;le.l++}}return ce}function j(le,Q){var ce=new_buf(5+le.length);ce.write_shift(2,14e3),ce.write_shift(2,Q);for(var fe=0;fe<le.length;++fe){var oe=le.charCodeAt(fe);ce[ce.l++]=oe>127?95:oe}return ce[ce.l++]=0,ce}var M={0:{n:"BOF",f:parseuint16},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:u},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:w},14:{n:"NUMBER",f:T},15:{n:"LABEL",f:b},16:{n:"FORMULA",f:C},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:_},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:I},222:{n:"SHEETNAMELP",f:P},255:{n:"BOF",f:parseuint16},65535:{n:""}},E={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:O},23:{n:"NUMBER17",f:se},24:{n:"NUMBER18",f:Z},25:{n:"FORMULA19",f:F},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:q},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:k},38:{n:"??"},39:{n:"NUMBER27",f:y},40:{n:"FORMULA28",f:A},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:I},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:H},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};function L(le,Q){prep_blob(le,0);var ce=Q||{},fe={};ce.dense&&(fe["!data"]=[]);var oe=[],de="",ae={s:{r:-1,c:-1},e:{r:-1,c:-1}},he=0,te=0,pe=0,ee=0,ge={SheetNames:[],Sheets:{}};e:for(;le.l<le.length;){var Ee=le.read_shift(2),be=le.read_shift(2),xe=le.slice(le.l,le.l+be);switch(prep_blob(xe,0),Ee){case 1:if(xe.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 1025:break;case 1026:break;case 1031:for(xe.l+=12;xe.l<xe.length;)he=xe.read_shift(2),te=xe.read_shift(1),oe.push(xe.read_shift(he,"cstr"));break;case 1032:break;case 1537:{var ve=xe.read_shift(2);fe={},ce.dense&&(fe["!data"]=[]),ae.s.c=xe.read_shift(2),ae.e.c=xe.read_shift(2),ae.s.r=xe.read_shift(4),ae.e.r=xe.read_shift(4),xe.l+=4,xe.l+2<xe.length&&(he=xe.read_shift(2),te=xe.read_shift(1),de=he==0?"":xe.read_shift(he,"cstr")),de||(de=encode_col(ve))}break;case 1538:{if(ae.s.c>255||ae.s.r>999999)break;ae.e.c<ae.s.c&&(ae.e.c=ae.s.c),ae.e.r<ae.s.r&&(ae.e.r=ae.s.r),fe["!ref"]=encode_range(ae),book_append_sheet(ge,fe,de)}break;case 2561:pe=xe.read_shift(2),ae.e.c<pe&&(ae.e.c=pe),ae.s.c>pe&&(ae.s.c=pe),ee=xe.read_shift(4),ae.s.r>ee&&(ae.s.r=ee),ee=xe.read_shift(4),ae.e.r<ee&&(ae.e.r=ee);break;case 3073:{ee=xe.read_shift(4),he=xe.read_shift(4),ae.s.r>ee&&(ae.s.r=ee),ae.e.r<ee+he-1&&(ae.e.r=ee+he-1);for(var Se=encode_col(pe);xe.l<xe.length;){var ke={t:"z"},Ce=xe.read_shift(1);Ce&128&&(xe.l+=2);var Re=Ce&64?xe.read_shift(2)-1:0;switch(Ce&31){case 1:break;case 2:ke={t:"n",v:xe.read_shift(2)};break;case 3:ke={t:"n",v:xe.read_shift(2,"i")};break;case 5:ke={t:"n",v:xe.read_shift(8,"f")};break;case 7:ke={t:"s",v:oe[te=xe.read_shift(4)-1]};break;case 8:ke={t:"n",v:xe.read_shift(8,"f")},xe.l+=2,xe.l+=4;break;default:throw"Unrecognized QPW cell type "+(Ce&31)}var Le=0;if(Ce&32)switch(Ce&31){case 2:Le=xe.read_shift(2);break;case 3:Le=xe.read_shift(2,"i");break;case 7:Le=xe.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(Ce&31)}for(!ce.sheetStubs&&ke.t=="z"||(fe["!data"]!=null?(fe["!data"][ee]||(fe["!data"][ee]=[]),fe["!data"][ee][pe]=ke):fe[Se+encode_row(ee)]=ke),++ee,--he;Re-- >0&&he>=0;){if(Ce&32)switch(Ce&31){case 2:ke={t:"n",v:ke.v+Le&65535};break;case 3:ke={t:"n",v:ke.v+Le&65535},ke.v>32767&&(ke.v-=65536);break;case 7:ke={t:"s",v:oe[te=te+Le>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(Ce&31)}else switch(Ce&31){case 1:ke={t:"z"};break;case 2:ke={t:"n",v:xe.read_shift(2)};break;case 7:ke={t:"s",v:oe[te=xe.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(Ce&31)}!ce.sheetStubs&&ke.t=="z"||(fe["!data"]!=null?(fe["!data"][ee]||(fe["!data"][ee]=[]),fe["!data"][ee][pe]=ke):fe[Se+encode_row(ee)]=ke),++ee,--he}}}break}le.l+=be}return ge}return{sheet_to_wk1:a,book_to_wk3:o,to_workbook:e}}();function parse_rpr(t){var e={},n=t.match(tagregex),a=0,o=!1;if(n)for(;a!=n.length;++a){var c=parsexmltag(n[a]);switch(c[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!c.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(c.val=="1")break;e.cp=CS2CP[parseInt(c.val,10)];break;case"<outline":if(!c.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=c.val;break;case"<sz":e.sz=c.val;break;case"<strike":if(!c.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!c.val)break;switch(c.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(c.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(c.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":c.rgb&&(e.color=c.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=c.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=c.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;default:if(c[0].charCodeAt(1)!==47&&!o)throw new Error("Unrecognized rich format "+c[0])}}return e}var parse_rs=function(){var t=matchtag("t"),e=matchtag("rPr");function n(c){var l=c.match(t);if(!l)return{t:"s",v:""};var u={t:"s",v:unescapexml(l[1])},d=c.match(e);return d&&(u.s=parse_rpr(d[1])),u}var a=/<(?:\w+:)?r>/g,o=/<\/(?:\w+:)?r>/;return function(l){return l.replace(a,"").split(o).map(n).filter(function(u){return u.v})}}(),rs_to_html=function t(){var e=/(\r\n|\n)/g;function n(o,c,l){var u=[];o.u&&u.push("text-decoration: underline;"),o.uval&&u.push("text-underline-style:"+o.uval+";"),o.sz&&u.push("font-size:"+o.sz+"pt;"),o.outline&&u.push("text-effect: outline;"),o.shadow&&u.push("text-shadow: auto;"),c.push('<span style="'+u.join("")+'">'),o.b&&(c.push("<b>"),l.push("</b>")),o.i&&(c.push("<i>"),l.push("</i>")),o.strike&&(c.push("<s>"),l.push("</s>"));var d=o.valign||"";return d=="superscript"||d=="super"?d="sup":d=="subscript"&&(d="sub"),d!=""&&(c.push("<"+d+">"),l.push("</"+d+">")),l.push("</span>"),o}function a(o){var c=[[],o.v,[]];return o.v?(o.s&&n(o.s,c[0],c[2]),c[0].join("")+c[1].replace(e,"<br/>")+c[2].join("")):""}return function(c){return c.map(a).join("")}}(),sitregex=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,sirregex=/<(?:\w+:)?r>/,sirphregex=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function parse_si(t,e){var n=e?e.cellHTML:!0,a={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=unescapexml(utf8read(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),a.r=utf8read(t),n&&(a.h=escapehtml(a.t))):t.match(sirregex)&&(a.r=utf8read(t),a.t=unescapexml(utf8read((t.replace(sirphregex,"").match(sitregex)||[]).join("").replace(tagregex,"")),!0),n&&(a.h=rs_to_html(parse_rs(a.r)))),a):{t:""}}var sstr0=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,sstr1=/<(?:\w+:)?(?:si|sstItem)>/g,sstr2=/<\/(?:\w+:)?(?:si|sstItem)>/;function parse_sst_xml(t,e){var n=[],a="";if(!t)return n;var o=t.match(sstr0);if(o){a=o[2].replace(sstr1,"").split(sstr2);for(var c=0;c!=a.length;++c){var l=parse_si(a[c].trim(),e);l!=null&&(n[n.length]=l)}o=parsexmltag(o[1]),n.Count=o.count,n.Unique=o.uniqueCount}return n}var straywsregex=/^\s|\s$|[\t\n\r]/;function write_sst_xml(t,e){if(!e.bookSST)return"";var n=[XML_HEADER];n[n.length]=writextag("sst",null,{xmlns:XMLNS_main[0],count:t.Count,uniqueCount:t.Unique});for(var a=0;a!=t.length;++a)if(t[a]!=null){var o=t[a],c="<si>";o.r?c+=o.r:(c+="<t",o.t||(o.t=""),typeof o.t!="string"&&(o.t=String(o.t)),o.t.match(straywsregex)&&(c+=' xml:space="preserve"'),c+=">"+escapexml(o.t)+"</t>"),c+="</si>",n[n.length]=c}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_BrtBeginSst(t){return[t.read_shift(4),t.read_shift(4)]}function parse_sst_bin(t,e){var n=[],a=!1;return recordhopper(t,function(c,l,u){switch(u){case 159:n.Count=c[0],n.Unique=c[1];break;case 19:n.push(c);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(l.T,!a||e.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}function write_BrtBeginSst(t,e){return e||(e=new_buf(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var write_BrtSSTItem=write_RichStr;function write_sst_bin(t){var e=buf_array();write_record(e,159,write_BrtBeginSst(t));for(var n=0;n<t.length;++n)write_record(e,19,write_BrtSSTItem(t[n]));return write_record(e,160),e.end()}function _JS2ANSI(t){for(var e=[],n=t.split(""),a=0;a<n.length;++a)e[a]=n[a].charCodeAt(0);return e}function parse_CRYPTOVersion(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function parse_DataSpaceVersionInfo(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=parse_CRYPTOVersion(t,4),e.U=parse_CRYPTOVersion(t,4),e.W=parse_CRYPTOVersion(t,4),e}function parse_DataSpaceMapEntry(t){for(var e=t.read_shift(4),n=t.l+e-4,a={},o=t.read_shift(4),c=[];o-- >0;)c.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(a.name=t.read_shift(0,"lpp4"),a.comps=c,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return a}function parse_DataSpaceMap(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(parse_DataSpaceMapEntry(t));return e}function parse_DataSpaceDefinition(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function parse_TransformInfoHeader(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=parse_CRYPTOVersion(t,4),e.U=parse_CRYPTOVersion(t,4),e.W=parse_CRYPTOVersion(t,4),e}function parse_Primary(t){var e=parse_TransformInfoHeader(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function parse_EncryptionHeader(t,e){var n=t.l+e,a={};a.Flags=t.read_shift(4)&63,t.l+=4,a.AlgID=t.read_shift(4);var o=!1;switch(a.AlgID){case 26126:case 26127:case 26128:o=a.Flags==36;break;case 26625:o=a.Flags==4;break;case 0:o=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!o)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=t.read_shift(4),a.KeySize=t.read_shift(4),a.ProviderType=t.read_shift(4),t.l+=8,a.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,a}function parse_EncryptionVerifier(t,e){var n={},a=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,a),t.l=a,n}function parse_EncryptionInfo(t){var e=parse_CRYPTOVersion(t);switch(e.Minor){case 2:return[e.Minor,parse_EncInfoStd(t)];case 3:return[e.Minor,parse_EncInfoExt()];case 4:return[e.Minor,parse_EncInfoAgl(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function parse_EncInfoStd(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),a=parse_EncryptionHeader(t,n),o=parse_EncryptionVerifier(t,t.length-t.l);return{t:"Std",h:a,v:o}}function parse_EncInfoExt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function parse_EncInfoAgl(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),a={};return n.replace(tagregex,function(c){var l=parsexmltag(c);switch(strip_ns(l[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(u){a[u]=l[u]});break;case"<dataIntegrity":a.encryptedHmacKey=l.encryptedHmacKey,a.encryptedHmacValue=l.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=l.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(l);break;default:throw l[0]}}),a}function parse_RC4CryptoHeader(t,e){var n={},a=n.EncryptionVersionInfo=parse_CRYPTOVersion(t,4);if(e-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);n.Flags=t.read_shift(4),e-=4;var o=t.read_shift(4);return e-=4,n.EncryptionHeader=parse_EncryptionHeader(t,o),e-=o,n.EncryptionVerifier=parse_EncryptionVerifier(t,e),n}function parse_RC4Header(t){var e={},n=e.EncryptionVersionInfo=parse_CRYPTOVersion(t,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function crypto_CreatePasswordVerifier_Method1(t){var e=0,n,a=_JS2ANSI(t),o=a.length+1,c,l,u,d,m;for(n=new_raw_buf(o),n[0]=a.length,c=1;c!=o;++c)n[c]=a[c-1];for(c=o-1;c>=0;--c)l=n[c],u=e&16384?1:0,d=e<<1&32767,m=u|d,e=m^l;return e^52811}var crypto_CreateXorArray_Method1=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(l){return(l/2|l*128)&255},o=function(l,u){return a(l^u)},c=function(l){for(var u=e[l.length-1],d=104,m=l.length-1;m>=0;--m)for(var b=l[m],x=0;x!=7;++x)b&64&&(u^=n[d]),b*=2,--d;return u};return function(l){for(var u=_JS2ANSI(l),d=c(u),m=u.length,b=new_raw_buf(16),x=0;x!=16;++x)b[x]=0;var _,w,S;for((m&1)===1&&(_=d>>8,b[m]=o(t[0],_),--m,_=d&255,w=u[u.length-1],b[m]=o(w,_));m>0;)--m,_=d>>8,b[m]=o(u[m],_),--m,_=d&255,b[m]=o(u[m],_);for(m=15,S=15-u.length;S>0;)_=d>>8,b[m]=o(t[S],_),--m,--S,_=d&255,b[m]=o(u[m],_),--m,--S;return b}}(),crypto_DecryptData_Method1=function(t,e,n,a,o){o||(o=e),a||(a=crypto_CreateXorArray_Method1(t));var c,l;for(c=0;c!=e.length;++c)l=e[c],l^=a[n],l=(l>>5|l<<3)&255,o[c]=l,++n;return[o,n,a]},crypto_MakeXorDecryptor=function(t){var e=0,n=crypto_CreateXorArray_Method1(t);return function(a){var o=crypto_DecryptData_Method1("",a,e,n);return e=o[1],o[0]}};function parse_XORObfuscation(t,e,n,a){var o={key:parseuint16(t),verificationBytes:parseuint16(t)};return n.password&&(o.verifier=crypto_CreatePasswordVerifier_Method1(n.password)),a.valid=o.verificationBytes===o.verifier,a.valid&&(a.insitu=crypto_MakeXorDecryptor(n.password)),o}function parse_FilePassHeader(t,e,n){var a=n||{};return a.Info=t.read_shift(2),t.l-=2,a.Info===1?a.Data=parse_RC4Header(t):a.Data=parse_RC4CryptoHeader(t,e),a}function parse_FilePass(t,e,n){var a={Type:n.biff>=8?t.read_shift(2):0};return a.Type?parse_FilePassHeader(t,e-2,a):parse_XORObfuscation(t,n.biff>=8?e:e-2,n,a),a}function rtf_to_sheet(t,e){switch(e.type){case"base64":return rtf_to_sheet_str(Base64_decode(t),e);case"binary":return rtf_to_sheet_str(t,e);case"buffer":return rtf_to_sheet_str(has_buf&&Buffer.isBuffer(t)?t.toString("binary"):a2s(t),e);case"array":return rtf_to_sheet_str(cc2str(t),e)}throw new Error("Unrecognized type "+e.type)}function rtf_to_sheet_str(t,e){var n=e||{},a={},o=n.dense;o&&(a["!data"]=[]);var c=t.match(/\\trowd[\s\S]*?\\row\b/g);if(!c)throw new Error("RTF missing table");var l={s:{c:0,r:0},e:{c:0,r:c.length-1}},u=[];return c.forEach(function(d,m){o&&(u=a["!data"][m]=[]);for(var b=/\\[\w\-]+\b/g,x=0,_,w=-1,S=[];(_=b.exec(d))!=null;){var T=d.slice(x,b.lastIndex-_[0].length);switch(T.charCodeAt(0)==32&&(T=T.slice(1)),T.length&&S.push(T),_[0]){case"\\cell":if(++w,S.length){var B={v:S.join(""),t:"s"};B.v=="TRUE"||B.v=="FALSE"?(B.v=B.v=="TRUE",B.t="b"):isNaN(fuzzynum(B.v))||(B.t="n",n.cellText!==!1&&(B.w=B.v),B.v=fuzzynum(B.v)),o?u[w]=B:a[encode_cell({r:m,c:w})]=B}S=[];break;case"\\par":S.push(`
`);break}x=b.lastIndex}w>l.e.c&&(l.e.c=w)}),a["!ref"]=encode_range(l),a}function rtf_to_workbook(t,e){var n=sheet_to_workbook(rtf_to_sheet(t,e),e);return n.bookType="rtf",n}function sheet_to_rtf(t,e){var n=["{\\rtf1\\ansi"];if(!t["!ref"])return n[0]+"}";for(var a=safe_decode_range(t["!ref"]),o,c=t["!data"]!=null,l=[],u=a.s.r;u<=a.e.r;++u){n.push("\\trowd\\trautofit1");for(var d=a.s.c;d<=a.e.c;++d)n.push("\\cellx"+(d+1));for(n.push("\\pard\\intbl"),c&&(l=t["!data"][u]||[]),d=a.s.c;d<=a.e.c;++d){var m=encode_cell({r:u,c:d});if(o=c?l[d]:t[m],!o||o.v==null&&(!o.f||o.F)){n.push(" \\cell");continue}n.push(" "+(o.w||(format_cell(o),o.w)||"").replace(/[\r\n]/g,"\\par ")),n.push("\\cell")}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}function hex2RGB(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function rgb2Hex(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function rgb2HSL(t){var e=t[0]/255,n=t[1]/255,a=t[2]/255,o=Math.max(e,n,a),c=Math.min(e,n,a),l=o-c;if(l===0)return[0,0,e];var u=0,d=0,m=o+c;switch(d=l/(m>1?2-m:m),o){case e:u=((n-a)/l+6)%6;break;case n:u=(a-e)/l+2;break;case a:u=(e-n)/l+4;break}return[u/6,d,m/2]}function hsl2RGB(t){var e=t[0],n=t[1],a=t[2],o=n*2*(a<.5?a:1-a),c=a-o/2,l=[c,c,c],u=6*e,d;if(n!==0)switch(u|0){case 0:case 6:d=o*u,l[0]+=o,l[1]+=d;break;case 1:d=o*(2-u),l[0]+=d,l[1]+=o;break;case 2:d=o*(u-2),l[1]+=o,l[2]+=d;break;case 3:d=o*(4-u),l[1]+=d,l[2]+=o;break;case 4:d=o*(u-4),l[2]+=o,l[0]+=d;break;case 5:d=o*(6-u),l[2]+=d,l[0]+=o;break}for(var m=0;m!=3;++m)l[m]=Math.round(l[m]*255);return l}function rgb_tint(t,e){if(e===0)return t;var n=rgb2HSL(hex2RGB(t));return e<0?n[2]=n[2]*(1+e):n[2]=1-(1-n[2])*(1-e),rgb2Hex(hsl2RGB(n))}var DEF_MDW=6,MAX_MDW=15,MIN_MDW=1,MDW=DEF_MDW;function width2px(t){return Math.floor((t+Math.round(128/MDW)/256)*MDW)}function px2char(t){return Math.floor((t-5)/MDW*100+.5)/100}function char2width(t){return Math.round((t*MDW+5)/MDW*256)/256}function cycle_width(t){return char2width(px2char(width2px(t)))}function find_mdw_colw(t){var e=Math.abs(t-cycle_width(t)),n=MDW;if(e>.005)for(MDW=MIN_MDW;MDW<MAX_MDW;++MDW)Math.abs(t-cycle_width(t))<=e&&(e=Math.abs(t-cycle_width(t)),n=MDW);MDW=n}function process_col(t){t.width?(t.wpx=width2px(t.width),t.wch=px2char(t.wpx),t.MDW=MDW):t.wpx?(t.wch=px2char(t.wpx),t.width=char2width(t.wch),t.MDW=MDW):typeof t.wch=="number"&&(t.width=char2width(t.wch),t.wpx=width2px(t.width),t.MDW=MDW),t.customWidth&&delete t.customWidth}var DEF_PPI=96,PPI=DEF_PPI;function px2pt(t){return t*96/PPI}function pt2px(t){return t*PPI/96}var XLMLPatternTypeMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function parse_borders(t,e,n,a){e.Borders=[];var o={},c=!1;(t[0].match(tagregex)||[]).forEach(function(l){var u=parsexmltag(l);switch(strip_ns(u[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":o={},u.diagonalUp&&(o.diagonalUp=parsexmlbool(u.diagonalUp)),u.diagonalDown&&(o.diagonalDown=parsexmlbool(u.diagonalDown)),e.Borders.push(o);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":c=!0;break;case"</ext>":c=!1;break;default:if(a&&a.WTF&&!c)throw new Error("unrecognized "+u[0]+" in borders")}})}function parse_fills(t,e,n,a){e.Fills=[];var o={},c=!1;(t[0].match(tagregex)||[]).forEach(function(l){var u=parsexmltag(l);switch(strip_ns(u[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":o={},e.Fills.push(o);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(o),o={};break;case"<patternFill":case"<patternFill>":u.patternType&&(o.patternType=u.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":o.bgColor||(o.bgColor={}),u.indexed&&(o.bgColor.indexed=parseInt(u.indexed,10)),u.theme&&(o.bgColor.theme=parseInt(u.theme,10)),u.tint&&(o.bgColor.tint=parseFloat(u.tint)),u.rgb&&(o.bgColor.rgb=u.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":o.fgColor||(o.fgColor={}),u.theme&&(o.fgColor.theme=parseInt(u.theme,10)),u.tint&&(o.fgColor.tint=parseFloat(u.tint)),u.rgb!=null&&(o.fgColor.rgb=u.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":c=!0;break;case"</ext>":c=!1;break;default:if(a&&a.WTF&&!c)throw new Error("unrecognized "+u[0]+" in fills")}})}function parse_fonts(t,e,n,a){e.Fonts=[];var o={},c=!1;(t[0].match(tagregex)||[]).forEach(function(l){var u=parsexmltag(l);switch(strip_ns(u[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(o),o={};break;case"<name":u.val&&(o.name=utf8read(u.val));break;case"<name/>":case"</name>":break;case"<b":o.bold=u.val?parsexmlbool(u.val):1;break;case"<b/>":o.bold=1;break;case"<i":o.italic=u.val?parsexmlbool(u.val):1;break;case"<i/>":o.italic=1;break;case"<u":switch(u.val){case"none":o.underline=0;break;case"single":o.underline=1;break;case"double":o.underline=2;break;case"singleAccounting":o.underline=33;break;case"doubleAccounting":o.underline=34;break}break;case"<u/>":o.underline=1;break;case"<strike":o.strike=u.val?parsexmlbool(u.val):1;break;case"<strike/>":o.strike=1;break;case"<outline":o.outline=u.val?parsexmlbool(u.val):1;break;case"<outline/>":o.outline=1;break;case"<shadow":o.shadow=u.val?parsexmlbool(u.val):1;break;case"<shadow/>":o.shadow=1;break;case"<condense":o.condense=u.val?parsexmlbool(u.val):1;break;case"<condense/>":o.condense=1;break;case"<extend":o.extend=u.val?parsexmlbool(u.val):1;break;case"<extend/>":o.extend=1;break;case"<sz":u.val&&(o.sz=+u.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":u.val&&(o.vertAlign=u.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":u.val&&(o.family=parseInt(u.val,10));break;case"<family/>":case"</family>":break;case"<scheme":u.val&&(o.scheme=u.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(u.val=="1")break;u.codepage=CS2CP[parseInt(u.val,10)];break;case"<color":if(o.color||(o.color={}),u.auto&&(o.color.auto=parsexmlbool(u.auto)),u.rgb)o.color.rgb=u.rgb.slice(-6);else if(u.indexed){o.color.index=parseInt(u.indexed,10);var d=XLSIcv[o.color.index];o.color.index==81&&(d=XLSIcv[1]),d||(d=XLSIcv[1]),o.color.rgb=d[0].toString(16)+d[1].toString(16)+d[2].toString(16)}else u.theme&&(o.color.theme=parseInt(u.theme,10),u.tint&&(o.color.tint=parseFloat(u.tint)),u.theme&&n.themeElements&&n.themeElements.clrScheme&&(o.color.rgb=rgb_tint(n.themeElements.clrScheme[o.color.theme].rgb,o.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":c=!0;break;case"</AlternateContent>":c=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":c=!0;break;case"</ext>":c=!1;break;default:if(a&&a.WTF&&!c)throw new Error("unrecognized "+u[0]+" in fonts")}})}function parse_numFmts(t,e,n){e.NumberFmt=[];for(var a=keys(table_fmt),o=0;o<a.length;++o)e.NumberFmt[a[o]]=table_fmt[a[o]];var c=t[0].match(tagregex);if(c)for(o=0;o<c.length;++o){var l=parsexmltag(c[o]);switch(strip_ns(l[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var u=unescapexml(utf8read(l.formatCode)),d=parseInt(l.numFmtId,10);if(e.NumberFmt[d]=u,d>0){if(d>392){for(d=392;d>60&&e.NumberFmt[d]!=null;--d);e.NumberFmt[d]=u}SSF__load(u,d)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+l[0]+" in numFmts")}}}function write_numFmts(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&(e[e.length]=writextag("numFmt",null,{numFmtId:a,formatCode:escapexml(t[a])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=writextag("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var cellXF_uint=["numFmtId","fillId","fontId","borderId","xfId"],cellXF_bool=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function parse_cellXfs(t,e,n){e.CellXf=[];var a,o=!1;(t[0].match(tagregex)||[]).forEach(function(c){var l=parsexmltag(c),u=0;switch(strip_ns(l[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=l,delete a[0],u=0;u<cellXF_uint.length;++u)a[cellXF_uint[u]]&&(a[cellXF_uint[u]]=parseInt(a[cellXF_uint[u]],10));for(u=0;u<cellXF_bool.length;++u)a[cellXF_bool[u]]&&(a[cellXF_bool[u]]=parsexmlbool(a[cellXF_bool[u]]));if(e.NumberFmt&&a.numFmtId>392){for(u=392;u>60;--u)if(e.NumberFmt[a.numFmtId]==e.NumberFmt[u]){a.numFmtId=u;break}}e.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var d={};l.vertical&&(d.vertical=l.vertical),l.horizontal&&(d.horizontal=l.horizontal),l.textRotation!=null&&(d.textRotation=l.textRotation),l.indent&&(d.indent=l.indent),l.wrapText&&(d.wrapText=parsexmlbool(l.wrapText)),a.alignment=d;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":o=!0;break;case"</AlternateContent>":o=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;default:if(n&&n.WTF&&!o)throw new Error("unrecognized "+l[0]+" in cellXfs")}})}function write_cellXfs(t){var e=[];return e[e.length]=writextag("cellXfs",null),t.forEach(function(n){e[e.length]=writextag("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=writextag("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var parse_sty_xml=function t(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,o=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,c=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(u,d,m){var b={};if(!u)return b;u=u.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var x;return(x=u.match(e))&&parse_numFmts(x,b,m),(x=u.match(o))&&parse_fonts(x,b,d,m),(x=u.match(a))&&parse_fills(x,b,d,m),(x=u.match(c))&&parse_borders(x,b,d,m),(x=u.match(n))&&parse_cellXfs(x,b,m),b}}();function write_sty_xml(t,e){var n=[XML_HEADER,writextag("styleSheet",null,{xmlns:XMLNS_main[0],"xmlns:vt":XMLNS.vt})],a;return t.SSF&&(a=write_numFmts(t.SSF))!=null&&(n[n.length]=a),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=write_cellXfs(e.cellXfs))&&(n[n.length]=a),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_BrtFmt(t,e){var n=t.read_shift(2),a=parse_XLWideString(t);return[n,a]}function write_BrtFmt(t,e,n){n||(n=new_buf(6+4*e.length)),n.write_shift(2,t),write_XLWideString(e,n);var a=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),a}function parse_BrtFont(t,e,n){var a={};a.sz=t.read_shift(2)/20;var o=parse_FontFlags(t);o.fItalic&&(a.italic=1),o.fCondense&&(a.condense=1),o.fExtend&&(a.extend=1),o.fShadow&&(a.shadow=1),o.fOutline&&(a.outline=1),o.fStrikeout&&(a.strike=1);var c=t.read_shift(2);switch(c===700&&(a.bold=1),t.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var l=t.read_shift(1);l!=0&&(a.underline=l);var u=t.read_shift(1);u>0&&(a.family=u);var d=t.read_shift(1);switch(d>0&&(a.charset=d),t.l++,a.color=parse_BrtColor(t),t.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=parse_XLWideString(t),a}function write_BrtFont(t,e){e||(e=new_buf(25+4*32)),e.write_shift(2,t.sz*20),write_FontFlags(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),write_BrtColor(t.color,e);var a=0;return t.scheme=="major"&&(a=1),t.scheme=="minor"&&(a=2),e.write_shift(1,a),write_XLWideString(t.name,e),e.length>e.l?e.slice(0,e.l):e}var XLSBFillPTNames=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rev_XLSBFillPTNames,parse_BrtFill=parsenoop;function write_BrtFill(t,e){e||(e=new_buf(4*3+8*7+16*1)),rev_XLSBFillPTNames||(rev_XLSBFillPTNames=evert(XLSBFillPTNames));var n=rev_XLSBFillPTNames[t.patternType];n==null&&(n=40),e.write_shift(4,n);var a=0;if(n!=40)for(write_BrtColor({auto:1},e),write_BrtColor({auto:1},e);a<12;++a)e.write_shift(4,0);else{for(;a<4;++a)e.write_shift(4,0);for(;a<12;++a)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function parse_BrtXF(t,e){var n=t.l+e,a=t.read_shift(2),o=t.read_shift(2);return t.l=n,{ixfe:a,numFmtId:o}}function write_BrtXF(t,e,n){n||(n=new_buf(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var a=0;return n.write_shift(1,a),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function write_Blxf(t,e){return e||(e=new_buf(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var parse_BrtBorder=parsenoop;function write_BrtBorder(t,e){return e||(e=new_buf(51)),e.write_shift(1,0),write_Blxf(null,e),write_Blxf(null,e),write_Blxf(null,e),write_Blxf(null,e),write_Blxf(null,e),e.length>e.l?e.slice(0,e.l):e}function write_BrtStyle(t,e){return e||(e=new_buf(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,+t.builtinId),e.write_shift(1,0),write_XLNullableWideString(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function write_BrtBeginTableStyles(t,e,n){var a=new_buf(2052);return a.write_shift(4,t),write_XLNullableWideString(e,a),write_XLNullableWideString(n,a),a.length>a.l?a.slice(0,a.l):a}function parse_sty_bin(t,e,n){var a={};a.NumberFmt=[];for(var o in table_fmt)a.NumberFmt[o]=table_fmt[o];a.CellXf=[],a.Fonts=[];var c=[],l=!1;return recordhopper(t,function(d,m,b){switch(b){case 44:a.NumberFmt[d[0]]=d[1],SSF__load(d[1],d[0]);break;case 43:a.Fonts.push(d),d.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(d.color.rgb=rgb_tint(e.themeElements.clrScheme[d.color.theme].rgb,d.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:c[c.length-1]==617&&a.CellXf.push(d);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:c.push(b),l=!0;break;case 38:c.pop(),l=!1;break;default:if(m.T>0)c.push(b);else if(m.T<0)c.pop();else if(!l||n.WTF&&c[c.length-1]!=37)throw new Error("Unexpected record 0x"+b.toString(16))}}),a}function write_FMTS_bin(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)e[o]!=null&&++n}),n!=0&&(write_record(t,615,write_UInt32LE(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)e[o]!=null&&write_record(t,44,write_BrtFmt(o,e[o]))}),write_record(t,616))}}function write_FONTS_bin(t){var e=1;write_record(t,611,write_UInt32LE(e)),write_record(t,43,write_BrtFont({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),write_record(t,612)}function write_FILLS_bin(t){var e=2;write_record(t,603,write_UInt32LE(e)),write_record(t,45,write_BrtFill({patternType:"none"})),write_record(t,45,write_BrtFill({patternType:"gray125"})),write_record(t,604)}function write_BORDERS_bin(t){var e=1;write_record(t,613,write_UInt32LE(e)),write_record(t,46,write_BrtBorder()),write_record(t,614)}function write_CELLSTYLEXFS_bin(t){var e=1;write_record(t,626,write_UInt32LE(e)),write_record(t,47,write_BrtXF({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),write_record(t,627)}function write_CELLXFS_bin(t,e){write_record(t,617,write_UInt32LE(e.length)),e.forEach(function(n){write_record(t,47,write_BrtXF(n,0))}),write_record(t,618)}function write_STYLES_bin(t){var e=1;write_record(t,619,write_UInt32LE(e)),write_record(t,48,write_BrtStyle({xfId:0,builtinId:0,name:"Normal"})),write_record(t,620)}function write_DXFS_bin(t){var e=0;write_record(t,505,write_UInt32LE(e)),write_record(t,506)}function write_TABLESTYLES_bin(t){var e=0;write_record(t,508,write_BrtBeginTableStyles(e,"TableStyleMedium9","PivotStyleMedium4")),write_record(t,509)}function write_sty_bin(t,e){var n=buf_array();return write_record(n,278),write_FMTS_bin(n,t.SSF),write_FONTS_bin(n),write_FILLS_bin(n),write_BORDERS_bin(n),write_CELLSTYLEXFS_bin(n),write_CELLXFS_bin(n,e.cellXfs),write_STYLES_bin(n),write_DXFS_bin(n),write_TABLESTYLES_bin(n),write_record(n,279),n.end()}var XLSXThemeClrScheme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function parse_clrScheme(t,e,n){e.themeElements.clrScheme=[];var a={};(t[0].match(tagregex)||[]).forEach(function(o){var c=parsexmltag(o);switch(c[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=c.val;break;case"<a:sysClr":a.rgb=c.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":c[0].charAt(1)==="/"?(e.themeElements.clrScheme[XLSXThemeClrScheme.indexOf(c[0])]=a,a={}):a.name=c[0].slice(3,c[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+c[0]+" in clrScheme")}})}function parse_fontScheme(){}function parse_fmtScheme(){}var clrsregex=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,fntsregex=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,fmtsregex=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function parse_themeElements(t,e,n){e.themeElements={};var a;[["clrScheme",clrsregex,parse_clrScheme],["fontScheme",fntsregex,parse_fontScheme],["fmtScheme",fmtsregex,parse_fmtScheme]].forEach(function(o){if(!(a=t.match(o[1])))throw new Error(o[0]+" not found in themeElements");o[2](a,e,n)})}var themeltregex=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function parse_theme_xml(t,e){(!t||t.length===0)&&(t=write_theme());var n,a={};if(!(n=t.match(themeltregex)))throw new Error("themeElements not found in theme");return parse_themeElements(n[0],a,e),a.raw=t,a}function write_theme(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[XML_HEADER];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function parse_Theme(t,e,n){var a=t.l+e,o=t.read_shift(4);if(o!==124226){if(!n.cellStyles){t.l=a;return}var c=t.slice(t.l);t.l=a;var l;try{l=zip_read(c,{type:"array"})}catch{return}var u=getzipstr(l,"theme/theme/theme1.xml",!0);if(u)return parse_theme_xml(u,n)}}function parse_ColorTheme(t){return t.read_shift(4)}function parse_FullColorExt(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=parse_IcvXF(t,4);break;case 2:e.xclrValue=parse_LongRGBA(t);break;case 3:e.xclrValue=parse_ColorTheme(t);break;case 4:t.l+=4;break}return t.l+=8,e}function parse_IcvXF(t,e){return parsenoop(t,e)}function parse_XFExtGradient(t,e){return parsenoop(t,e)}function parse_ExtProp(t){var e=t.read_shift(2),n=t.read_shift(2)-4,a=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=parse_FullColorExt(t);break;case 6:a[1]=parse_XFExtGradient(t,n);break;case 14:case 15:a[1]=t.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return a}function parse_XFExt(t,e){var n=t.l+e;t.l+=2;var a=t.read_shift(2);t.l+=2;for(var o=t.read_shift(2),c=[];o-- >0;)c.push(parse_ExtProp(t,n-t.l));return{ixfe:a,ext:c}}function update_xfext(t,e){e.forEach(function(n){switch(n[0]){}})}function parse_BrtMdtinfo(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:parse_XLWideString(t)}}function write_BrtMdtinfo(t){var e=new_buf(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),write_XLWideString(t.name,e),e.slice(0,e.l)}function parse_BrtMdb(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function write_BrtMdb(t){var e=new_buf(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function write_BrtBeginEsfmd(t,e){var n=new_buf(8+2*e.length);return n.write_shift(4,t),write_XLWideString(e,n),n.slice(0,n.l)}function parse_BrtBeginEsmdb(t){return t.l+=4,t.read_shift(4)!=0}function write_BrtBeginEsmdb(t,e){var n=new_buf(8);return n.write_shift(4,t),n.write_shift(4,e?1:0),n}function parse_xlmeta_bin(t,e,n){var a={Types:[],Cell:[],Value:[]},o=n||{},c=[],l=!1,u=2;return recordhopper(t,function(d,m,b){switch(b){case 335:a.Types.push({name:d.name});break;case 51:d.forEach(function(x){u==1?a.Cell.push({type:a.Types[x[0]-1].name,index:x[1]}):u==0&&a.Value.push({type:a.Types[x[0]-1].name,index:x[1]})});break;case 337:u=d?1:0;break;case 338:u=2;break;case 35:c.push(b),l=!0;break;case 36:c.pop(),l=!1;break;default:if(!m.T){if(!l||o.WTF&&c[c.length-1]!=35)throw new Error("Unexpected record 0x"+b.toString(16))}}}),a}function write_xlmeta_bin(){var t=buf_array();return write_record(t,332),write_record(t,334,write_UInt32LE(1)),write_record(t,335,write_BrtMdtinfo({name:"XLDAPR",version:12e4,flags:3496657072})),write_record(t,336),write_record(t,339,write_BrtBeginEsfmd(1,"XLDAPR")),write_record(t,52),write_record(t,35,write_UInt32LE(514)),write_record(t,4096,write_UInt32LE(0)),write_record(t,4097,writeuint16(1)),write_record(t,36),write_record(t,53),write_record(t,340),write_record(t,337,write_BrtBeginEsmdb(1,!0)),write_record(t,51,write_BrtMdb([[1,0]])),write_record(t,338),write_record(t,333),t.end()}function parse_xlmeta_xml(t,e,n){var a={Types:[],Cell:[],Value:[]};if(!t)return a;var o=!1,c=2,l;return t.replace(tagregex,function(u){var d=parsexmltag(u);switch(strip_ns(d[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:d.name});break;case"</metadataType>":break;case"<futureMetadata":for(var m=0;m<a.Types.length;++m)a.Types[m].name==d.name&&(l=a.Types[m]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":c==1?a.Cell.push({type:a.Types[d.t-1].name,index:+d.v}):c==0&&a.Value.push({type:a.Types[d.t-1].name,index:+d.v});break;case"</rc>":break;case"<cellMetadata":c=1;break;case"</cellMetadata>":c=2;break;case"<valueMetadata":c=0;break;case"</valueMetadata>":c=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;case"<rvb":if(!l)break;l.offsets||(l.offsets=[]),l.offsets.push(+d.i);break;default:if(!o&&n?.WTF)throw new Error("unrecognized "+d[0]+" in metadata")}return u}),a}function write_xlmeta_xml(){var t=[XML_HEADER];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function parse_cc_xml(t){var e=[];if(!t)return e;var n=1;return(t.match(tagregex)||[]).forEach(function(a){var o=parsexmltag(a);switch(o[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete o[0],o.i?n=o.i:o.i=n,e.push(o);break}}),e}function parse_BrtCalcChainItem$(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=encode_cell(n);var a=t.read_shift(1);return a&2&&(e.l="1"),a&8&&(e.a="1"),e}function parse_cc_bin(t,e,n){var a=[];return recordhopper(t,function(c,l,u){switch(u){case 63:a.push(c);break;default:if(!l.T)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}function parse_xlink_xml(){}function parse_xlink_bin(t,e,n,a){if(!t)return t;var o=a||{},c=!1;recordhopper(t,function(u,d,m){switch(m){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:c=!0;break;case 36:c=!1;break;default:if(!d.T){if(!c||o.WTF)throw new Error("Unexpected record 0x"+m.toString(16))}}},o)}function parse_drawing(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}function write_vml(t,e){var n=[21600,21600],a=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),o=[writextag("xml",null,{"xmlns:v":XLMLNS.v,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:mv":XLMLNS.mv}).replace(/\/>/,">"),writextag("o:shapelayout",writextag("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"})],c=65536*t,l=e||[];return l.length>0&&o.push(writextag("v:shapetype",[writextag("v:stroke",null,{joinstyle:"miter"}),writextag("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:n.join(","),"o:spt":202,path:a})),l.forEach(function(u){++c,o.push(write_vml_comment(u,c))}),o.push("</xml>"),o.join("")}function write_vml_comment(t,e){var n=decode_cell(t[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var o=a.type=="gradient"?writextag("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,c=writextag("v:fill",o,a),l={on:"t",obscured:"t"};return["<v:shape"+wxt_helper({id:"_x0000_s"+e,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(t[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",c,writextag("v:shadow",null,l),writextag("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",writetag("x:Anchor",[n.c+1,0,n.r+1,0,n.c+3,20,n.r+5,20].join(",")),writetag("x:AutoFill","False"),writetag("x:Row",String(n.r)),writetag("x:Column",String(n.c)),t[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function sheet_insert_comments(t,e,n,a){var o=t["!data"]!=null,c;e.forEach(function(l){var u=decode_cell(l.ref);if(o?(t["!data"][u.r]||(t["!data"][u.r]=[]),c=t["!data"][u.r][u.c]):c=t[l.ref],!c){c={t:"z"},o?t["!data"][u.r][u.c]=c:t[l.ref]=c;var d=safe_decode_range(t["!ref"]||"BDWGO1000001:A1");d.s.r>u.r&&(d.s.r=u.r),d.e.r<u.r&&(d.e.r=u.r),d.s.c>u.c&&(d.s.c=u.c),d.e.c<u.c&&(d.e.c=u.c);var m=encode_range(d);t["!ref"]=m}c.c||(c.c=[]);var b={a:l.author,t:l.t,r:l.r,T:n};l.h&&(b.h=l.h);for(var x=c.c.length-1;x>=0;--x){if(!n&&c.c[x].T)return;n&&!c.c[x].T&&c.c.splice(x,1)}if(n&&a){for(x=0;x<a.length;++x)if(b.a==a[x].id){b.a=a[x].name||b.a;break}}c.c.push(b)})}function parse_comments_xml(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],a=[],o=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);o&&o[1]&&o[1].split(/<\/\w*:?author>/).forEach(function(l){if(!(l===""||l.trim()==="")){var u=l.match(/<(?:\w+:)?author[^>]*>(.*)/);u&&n.push(u[1])}});var c=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return c&&c[1]&&c[1].split(/<\/\w*:?comment>/).forEach(function(l){if(!(l===""||l.trim()==="")){var u=l.match(/<(?:\w+:)?comment[^>]*>/);if(u){var d=parsexmltag(u[0]),m={author:d.authorId&&n[d.authorId]||"sheetjsghost",ref:d.ref,guid:d.guid},b=decode_cell(d.ref);if(!(e.sheetRows&&e.sheetRows<=b.r)){var x=l.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),_=!!x&&!!x[1]&&parse_si(x[1])||{r:"",t:"",h:""};m.r=_.r,_.r=="<t></t>"&&(_.t=_.h=""),m.t=(_.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(m.h=_.h),a.push(m)}}}}),a}function write_comments_xml(t){var e=[XML_HEADER,writextag("comments",null,{xmlns:XMLNS_main[0]})],n=[];return e.push("<authors>"),t.forEach(function(a){a[1].forEach(function(o){var c=escapexml(o.a);n.indexOf(c)==-1&&(n.push(c),e.push("<author>"+c+"</author>")),o.T&&o.ID&&n.indexOf("tc="+o.ID)==-1&&(n.push("tc="+o.ID),e.push("<author>tc="+o.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(a){var o=0,c=[],l=0;if(a[1][0]&&a[1][0].T&&a[1][0].ID&&(o=n.indexOf("tc="+a[1][0].ID)),a[1].forEach(function(m){m.a&&(o=n.indexOf(escapexml(m.a))),m.T&&++l,c.push(m.t==null?"":escapexml(m.t))}),l===0)a[1].forEach(function(m){e.push('<comment ref="'+a[0]+'" authorId="'+n.indexOf(escapexml(m.a))+'"><text>'),e.push(writetag("t",m.t==null?"":escapexml(m.t))),e.push("</text></comment>")});else{e.push('<comment ref="'+a[0]+'" authorId="'+o+'"><text>');for(var u=`Comment:
    `+c[0]+`
`,d=1;d<c.length;++d)u+=`Reply:
    `+c[d]+`
`;e.push(writetag("t",escapexml(u))),e.push("</text></comment>")}}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function parse_tcmnt_xml(t,e){var n=[],a=!1,o={},c=0;return t.replace(tagregex,function(u,d){var m=parsexmltag(u);switch(strip_ns(m[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":o={author:m.personId,guid:m.id,ref:m.ref,T:1};break;case"</threadedComment>":o.t!=null&&n.push(o);break;case"<text>":case"<text":c=d+u.length;break;case"</text>":o.t=t.slice(c,d).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&e.WTF)throw new Error("unrecognized "+m[0]+" in threaded comments")}return u}),n}function write_tcmnt_xml(t,e,n){var a=[XML_HEADER,writextag("ThreadedComments",null,{xmlns:XMLNS.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(o){var c="";(o[1]||[]).forEach(function(l,u){if(!l.T){delete l.ID;return}l.a&&e.indexOf(l.a)==-1&&e.push(l.a);var d={ref:o[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};u==0?c=d.id:d.parentId=c,l.ID=d.id,l.a&&(d.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(l.a)).slice(-12)+"}"),a.push(writextag("threadedComment",writetag("text",l.t||""),d))})}),a.push("</ThreadedComments>"),a.join("")}function parse_people_xml(t,e){var n=[],a=!1;return t.replace(tagregex,function(c){var l=parsexmltag(c);switch(strip_ns(l[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:l.displayname,id:l.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&e.WTF)throw new Error("unrecognized "+l[0]+" in threaded comments")}return c}),n}function write_people_xml(t){var e=[XML_HEADER,writextag("personList",null,{xmlns:XMLNS.TCMNT,"xmlns:x":XMLNS_main[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,a){e.push(writextag("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function parse_BrtBeginComment(t){var e={};e.iauthor=t.read_shift(4);var n=parse_UncheckedRfX(t);return e.rfx=n.s,e.ref=encode_cell(n.s),t.l+=16,e}function write_BrtBeginComment(t,e){return e==null&&(e=new_buf(36)),e.write_shift(4,t[1].iauthor),write_UncheckedRfX(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var parse_BrtCommentAuthor=parse_XLWideString;function write_BrtCommentAuthor(t){return write_XLWideString(t.slice(0,54))}function parse_comments_bin(t,e){var n=[],a=[],o={},c=!1;return recordhopper(t,function(u,d,m){switch(m){case 632:a.push(u);break;case 635:o=u;break;case 637:o.t=u.t,o.h=u.h,o.r=u.r;break;case 636:if(o.author=a[o.iauthor],delete o.iauthor,e.sheetRows&&o.rfx&&e.sheetRows<=o.rfx.r)break;o.t||(o.t=""),delete o.rfx,n.push(o);break;case 3072:break;case 35:c=!0;break;case 36:c=!1;break;case 37:break;case 38:break;default:if(!d.T){if(!c||e.WTF)throw new Error("Unexpected record 0x"+m.toString(16))}}}),n}function write_comments_bin(t){var e=buf_array(),n=[];return write_record(e,628),write_record(e,630),t.forEach(function(a){a[1].forEach(function(o){n.indexOf(o.a)>-1||(n.push(o.a.slice(0,54)),write_record(e,632,write_BrtCommentAuthor(o.a)))})}),write_record(e,631),write_record(e,633),t.forEach(function(a){a[1].forEach(function(o){o.iauthor=n.indexOf(o.a);var c={s:decode_cell(a[0]),e:decode_cell(a[0])};write_record(e,635,write_BrtBeginComment([c,o])),o.t&&o.t.length>0&&write_record(e,637,write_BrtCommentText(o)),write_record(e,636),delete o.iauthor})}),write_record(e,634),write_record(e,629),e.end()}var CT_VBA="application/vnd.ms-office.vbaProject";function make_vba_xls(t){var e=CFB.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(n,a){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var o=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");CFB.utils.cfb_add(e,o,t.FileIndex[a].content)}}),CFB.write(e)}function fill_vba_xls(t,e){e.FullPaths.forEach(function(n,a){if(a!=0){var o=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");o.slice(-1)!=="/"&&CFB.utils.cfb_add(t,o,e.FileIndex[a].content)}})}var VBAFMTS=["xlsb","xlsm","xlam","biff8","xla"];function parse_ds_bin(){return{"!type":"dialog"}}function parse_ds_xml(){return{"!type":"dialog"}}function parse_ms_bin(){return{"!type":"macro"}}function parse_ms_xml(){return{"!type":"macro"}}var rc_to_a1=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(a,o,c,l){var u=!1,d=!1;c.length==0?d=!0:c.charAt(0)=="["&&(d=!0,c=c.slice(1,-1)),l.length==0?u=!0:l.charAt(0)=="["&&(u=!0,l=l.slice(1,-1));var m=c.length>0?parseInt(c,10)|0:0,b=l.length>0?parseInt(l,10)|0:0;return u?b+=e.c:--b,d?m+=e.r:--m,o+(u?"":"$")+encode_col(b)+(d?"":"$")+encode_row(m)}return function(o,c){return e=c,o.replace(t,n)}}(),crefregex=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1_to_rc=function(){return function(e,n){return e.replace(crefregex,function(a,o,c,l,u,d){var m=decode_col(l)-(c?0:n.c),b=decode_row(d)-(u?0:n.r),x=u=="$"?b+1:b==0?"":"["+b+"]",_=c=="$"?m+1:m==0?"":"["+m+"]";return o+"R"+x+"C"+_})}}();function shift_formula_str(t,e){return t.replace(crefregex,function(n,a,o,c,l,u){return a+(o=="$"?o+c:encode_col(decode_col(c)+e.c))+(l=="$"?l+u:encode_row(decode_row(u)+e.r))})}function shift_formula_xlsx(t,e,n){var a=decode_range(e),o=a.s,c=decode_cell(n),l={r:c.r-o.r,c:c.c-o.c};return shift_formula_str(t,l)}function fuzzyfmla(t){return t.length!=1}function _xlfn(t){return t.replace(/_xlfn\./g,"")}function parseread1(t){t.l+=1}function parse_ColRelU(t,e){var n=t.read_shift(e==1?1:2);return[n&16383,n>>14&1,n>>15&1]}function parse_RgceArea(t,e,n){var a=2;if(n){if(n.biff>=2&&n.biff<=5)return parse_RgceArea_BIFF2(t);n.biff==12&&(a=4)}var o=t.read_shift(a),c=t.read_shift(a),l=parse_ColRelU(t,2),u=parse_ColRelU(t,2);return{s:{r:o,c:l[0],cRel:l[1],rRel:l[2]},e:{r:c,c:u[0],cRel:u[1],rRel:u[2]}}}function parse_RgceArea_BIFF2(t){var e=parse_ColRelU(t,2),n=parse_ColRelU(t,2),a=t.read_shift(1),o=t.read_shift(1);return{s:{r:e[0],c:a,cRel:e[1],rRel:e[2]},e:{r:n[0],c:o,cRel:n[1],rRel:n[2]}}}function parse_RgceAreaRel(t,e,n){if(n.biff<8)return parse_RgceArea_BIFF2(t);var a=t.read_shift(n.biff==12?4:2),o=t.read_shift(n.biff==12?4:2),c=parse_ColRelU(t,2),l=parse_ColRelU(t,2);return{s:{r:a,c:c[0],cRel:c[1],rRel:c[2]},e:{r:o,c:l[0],cRel:l[1],rRel:l[2]}}}function parse_RgceLoc(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return parse_RgceLoc_BIFF2(t);var a=t.read_shift(n&&n.biff==12?4:2),o=parse_ColRelU(t,2);return{r:a,c:o[0],cRel:o[1],rRel:o[2]}}function parse_RgceLoc_BIFF2(t){var e=parse_ColRelU(t,2),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function parse_RgceElfLoc(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function parse_RgceLocRel(t,e,n){var a=n&&n.biff?n.biff:8;if(a>=2&&a<=5)return parse_RgceLocRel_BIFF2(t);var o=t.read_shift(a>=12?4:2),c=t.read_shift(2),l=(c&16384)>>14,u=(c&32768)>>15;if(c&=16383,u==1)for(;o>524287;)o-=1048576;if(l==1)for(;c>8191;)c=c-16384;return{r:o,c,cRel:l,rRel:u}}function parse_RgceLocRel_BIFF2(t){var e=t.read_shift(2),n=t.read_shift(1),a=(e&32768)>>15,o=(e&16384)>>14;return e&=16383,a==1&&e>=8192&&(e=e-16384),o==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:o,rRel:a}}function parse_PtgArea(t,e,n){var a=(t[t.l++]&96)>>5,o=parse_RgceArea(t,n.biff>=2&&n.biff<=5?6:8,n);return[a,o]}function parse_PtgArea3d(t,e,n){var a=(t[t.l++]&96)>>5,o=t.read_shift(2,"i"),c=8;if(n)switch(n.biff){case 5:t.l+=12,c=6;break;case 12:c=12;break}var l=parse_RgceArea(t,c,n);return[a,o,l]}function parse_PtgAreaErr(t,e,n){var a=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[a]}function parse_PtgAreaErr3d(t,e,n){var a=(t[t.l++]&96)>>5,o=t.read_shift(2),c=8;if(n)switch(n.biff){case 5:t.l+=12,c=6;break;case 12:c=12;break}return t.l+=c,[a,o]}function parse_PtgAreaN(t,e,n){var a=(t[t.l++]&96)>>5,o=parse_RgceAreaRel(t,e-1,n);return[a,o]}function parse_PtgArray(t,e,n){var a=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[a]}function parse_PtgAttrBaxcel(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function parse_PtgAttrChoose(t,e,n){t.l+=2;for(var a=t.read_shift(n&&n.biff==2?1:2),o=[],c=0;c<=a;++c)o.push(t.read_shift(n&&n.biff==2?1:2));return o}function parse_PtgAttrGoto(t,e,n){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(n&&n.biff==2?1:2)]}function parse_PtgAttrIf(t,e,n){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(n&&n.biff==2?1:2)]}function parse_PtgAttrIfError(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function parse_PtgAttrSemi(t,e,n){var a=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[a]}function parse_PtgAttrSpaceType(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function parse_PtgAttrSpace(t){return t.read_shift(2),parse_PtgAttrSpaceType(t)}function parse_PtgAttrSpaceSemi(t){return t.read_shift(2),parse_PtgAttrSpaceType(t)}function parse_PtgRef(t,e,n){var a=(t[t.l]&96)>>5;t.l+=1;var o=parse_RgceLoc(t,0,n);return[a,o]}function parse_PtgRefN(t,e,n){var a=(t[t.l]&96)>>5;t.l+=1;var o=parse_RgceLocRel(t,0,n);return[a,o]}function parse_PtgRef3d(t,e,n){var a=(t[t.l]&96)>>5;t.l+=1;var o=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var c=parse_RgceLoc(t,0,n);return[a,o,c]}function parse_PtgFunc(t,e,n){var a=(t[t.l]&96)>>5;t.l+=1;var o=t.read_shift(n&&n.biff<=3?1:2);return[FtabArgc[o],Ftab[o],a]}function parse_PtgFuncVar(t,e,n){var a=t[t.l++],o=t.read_shift(1),c=n&&n.biff<=3?[a==88?-1:0,t.read_shift(1)]:parsetab(t);return[o,(c[0]===0?Ftab:Cetab)[c[1]]]}function parsetab(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function parse_PtgAttrSum(t,e,n){t.l+=n&&n.biff==2?3:4}function parse_PtgExp(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var a=t.read_shift(2),o=t.read_shift(n&&n.biff==2?1:2);return[a,o]}function parse_PtgErr(t){return t.l++,BErr[t.read_shift(1)]}function parse_PtgInt(t){return t.l++,t.read_shift(2)}function parse_PtgBool(t){return t.l++,t.read_shift(1)!==0}function parse_PtgNum(t){return t.l++,parse_Xnum(t)}function parse_PtgStr(t,e,n){return t.l++,parse_ShortXLUnicodeString(t,e-1,n)}function parse_SerAr(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=parsebool(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=BErr[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=parse_Xnum(t);break;case 2:n[1]=parse_XLUnicodeString2(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function parse_PtgExtraMem(t,e,n){for(var a=t.read_shift(n.biff==12?4:2),o=[],c=0;c!=a;++c)o.push((n.biff==12?parse_UncheckedRfX:parse_Ref8U)(t));return o}function parse_PtgExtraArray(t,e,n){var a=0,o=0;n.biff==12?(a=t.read_shift(4),o=t.read_shift(4)):(o=1+t.read_shift(1),a=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--a,--o==0&&(o=256));for(var c=0,l=[];c!=a&&(l[c]=[]);++c)for(var u=0;u!=o;++u)l[c][u]=parse_SerAr(t,n.biff);return l}function parse_PtgName(t,e,n){var a=t.read_shift(1)>>>5&3,o=!n||n.biff>=8?4:2,c=t.read_shift(o);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[a,0,c]}function parse_PtgNameX(t,e,n){if(n.biff==5)return parse_PtgNameX_BIFF5(t);var a=t.read_shift(1)>>>5&3,o=t.read_shift(2),c=t.read_shift(4);return[a,o,c]}function parse_PtgNameX_BIFF5(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var a=t.read_shift(2);return t.l+=12,[e,n,a]}function parse_PtgMemArea(t,e,n){var a=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var o=t.read_shift(n&&n.biff==2?1:2);return[a,o]}function parse_PtgMemFunc(t,e,n){var a=t.read_shift(1)>>>5&3,o=t.read_shift(n&&n.biff==2?1:2);return[a,o]}function parse_PtgRefErr(t,e,n){var a=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[a]}function parse_PtgRefErr3d(t,e,n){var a=(t[t.l++]&96)>>5,o=t.read_shift(2),c=4;if(n)switch(n.biff){case 5:c=15;break;case 12:c=6;break}return t.l+=c,[a,o]}var parse_PtgMemErr=parsenoop,parse_PtgMemNoMem=parsenoop,parse_PtgTbl=parsenoop;function parse_PtgElfLoc(t,e,n){return t.l+=2,[parse_RgceElfLoc(t)]}function parse_PtgElfNoop(t){return t.l+=6,[]}var parse_PtgElfCol=parse_PtgElfLoc,parse_PtgElfColS=parse_PtgElfNoop,parse_PtgElfColSV=parse_PtgElfNoop,parse_PtgElfColV=parse_PtgElfLoc;function parse_PtgElfLel(t){return t.l+=2,[parseuint16(t),t.read_shift(2)&1]}var parse_PtgElfRadical=parse_PtgElfLoc,parse_PtgElfRadicalLel=parse_PtgElfLel,parse_PtgElfRadicalS=parse_PtgElfNoop,parse_PtgElfRw=parse_PtgElfLoc,parse_PtgElfRwV=parse_PtgElfLoc,PtgListRT=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function parse_PtgList(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(4),o=t.read_shift(2),c=t.read_shift(2),l=PtgListRT[n>>2&31];return{ixti:e,coltype:n&3,rt:l,idx:a,c:o,C:c}}function parse_PtgSxName(t){return t.l+=2,[t.read_shift(4)]}function parse_PtgSheet(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function parse_PtgEndSheet(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function parse_PtgMemAreaN(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function parse_PtgMemNoMemN(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function parse_PtgAttrNoop(t){return t.l+=4,[0,0]}var PtgTypes={1:{n:"PtgExp",f:parse_PtgExp},2:{n:"PtgTbl",f:parse_PtgTbl},3:{n:"PtgAdd",f:parseread1},4:{n:"PtgSub",f:parseread1},5:{n:"PtgMul",f:parseread1},6:{n:"PtgDiv",f:parseread1},7:{n:"PtgPower",f:parseread1},8:{n:"PtgConcat",f:parseread1},9:{n:"PtgLt",f:parseread1},10:{n:"PtgLe",f:parseread1},11:{n:"PtgEq",f:parseread1},12:{n:"PtgGe",f:parseread1},13:{n:"PtgGt",f:parseread1},14:{n:"PtgNe",f:parseread1},15:{n:"PtgIsect",f:parseread1},16:{n:"PtgUnion",f:parseread1},17:{n:"PtgRange",f:parseread1},18:{n:"PtgUplus",f:parseread1},19:{n:"PtgUminus",f:parseread1},20:{n:"PtgPercent",f:parseread1},21:{n:"PtgParen",f:parseread1},22:{n:"PtgMissArg",f:parseread1},23:{n:"PtgStr",f:parse_PtgStr},26:{n:"PtgSheet",f:parse_PtgSheet},27:{n:"PtgEndSheet",f:parse_PtgEndSheet},28:{n:"PtgErr",f:parse_PtgErr},29:{n:"PtgBool",f:parse_PtgBool},30:{n:"PtgInt",f:parse_PtgInt},31:{n:"PtgNum",f:parse_PtgNum},32:{n:"PtgArray",f:parse_PtgArray},33:{n:"PtgFunc",f:parse_PtgFunc},34:{n:"PtgFuncVar",f:parse_PtgFuncVar},35:{n:"PtgName",f:parse_PtgName},36:{n:"PtgRef",f:parse_PtgRef},37:{n:"PtgArea",f:parse_PtgArea},38:{n:"PtgMemArea",f:parse_PtgMemArea},39:{n:"PtgMemErr",f:parse_PtgMemErr},40:{n:"PtgMemNoMem",f:parse_PtgMemNoMem},41:{n:"PtgMemFunc",f:parse_PtgMemFunc},42:{n:"PtgRefErr",f:parse_PtgRefErr},43:{n:"PtgAreaErr",f:parse_PtgAreaErr},44:{n:"PtgRefN",f:parse_PtgRefN},45:{n:"PtgAreaN",f:parse_PtgAreaN},46:{n:"PtgMemAreaN",f:parse_PtgMemAreaN},47:{n:"PtgMemNoMemN",f:parse_PtgMemNoMemN},57:{n:"PtgNameX",f:parse_PtgNameX},58:{n:"PtgRef3d",f:parse_PtgRef3d},59:{n:"PtgArea3d",f:parse_PtgArea3d},60:{n:"PtgRefErr3d",f:parse_PtgRefErr3d},61:{n:"PtgAreaErr3d",f:parse_PtgAreaErr3d},255:{}},PtgDupes={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ptg18={1:{n:"PtgElfLel",f:parse_PtgElfLel},2:{n:"PtgElfRw",f:parse_PtgElfRw},3:{n:"PtgElfCol",f:parse_PtgElfCol},6:{n:"PtgElfRwV",f:parse_PtgElfRwV},7:{n:"PtgElfColV",f:parse_PtgElfColV},10:{n:"PtgElfRadical",f:parse_PtgElfRadical},11:{n:"PtgElfRadicalS",f:parse_PtgElfRadicalS},13:{n:"PtgElfColS",f:parse_PtgElfColS},15:{n:"PtgElfColSV",f:parse_PtgElfColSV},16:{n:"PtgElfRadicalLel",f:parse_PtgElfRadicalLel},25:{n:"PtgList",f:parse_PtgList},29:{n:"PtgSxName",f:parse_PtgSxName},255:{}},Ptg19={0:{n:"PtgAttrNoop",f:parse_PtgAttrNoop},1:{n:"PtgAttrSemi",f:parse_PtgAttrSemi},2:{n:"PtgAttrIf",f:parse_PtgAttrIf},4:{n:"PtgAttrChoose",f:parse_PtgAttrChoose},8:{n:"PtgAttrGoto",f:parse_PtgAttrGoto},16:{n:"PtgAttrSum",f:parse_PtgAttrSum},32:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},33:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},64:{n:"PtgAttrSpace",f:parse_PtgAttrSpace},65:{n:"PtgAttrSpaceSemi",f:parse_PtgAttrSpaceSemi},128:{n:"PtgAttrIfError",f:parse_PtgAttrIfError},255:{}};function parse_RgbExtra(t,e,n,a){if(a.biff<8)return parsenoop(t,e);for(var o=t.l+e,c=[],l=0;l!==n.length;++l)switch(n[l][0]){case"PtgArray":n[l][1]=parse_PtgExtraArray(t,0,a),c.push(n[l][1]);break;case"PtgMemArea":n[l][2]=parse_PtgExtraMem(t,n[l][1],a),c.push(n[l][2]);break;case"PtgExp":a&&a.biff==12&&(n[l][1][1]=t.read_shift(4),c.push(n[l][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[l][0]}return e=o-t.l,e!==0&&c.push(parsenoop(t,e)),c}function parse_Rgce(t,e,n){for(var a=t.l+e,o,c,l=[];a!=t.l;)e=a-t.l,c=t[t.l],o=PtgTypes[c]||PtgTypes[PtgDupes[c]],(c===24||c===25)&&(o=(c===24?Ptg18:Ptg19)[t[t.l+1]]),!o||!o.f?parsenoop(t,e):l.push([o.n,o.f(t,e,n)]);return l}function stringify_array(t){for(var e=[],n=0;n<t.length;++n){for(var a=t[n],o=[],c=0;c<a.length;++c){var l=a[c];if(l)switch(l[0]){case 2:o.push('"'+l[1].replace(/"/g,'""')+'"');break;default:o.push(l[1])}else o.push("")}e.push(o.join(","))}return e.join(";")}var PtgBinOp={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function make_3d_range(t,e){var n=t.lastIndexOf("!"),a=e.lastIndexOf("!");return n==-1&&a==-1?t+":"+e:n>0&&a>0&&t.slice(0,n).toLowerCase()==e.slice(0,a).toLowerCase()?t+":"+e.slice(a+1):(console.error("Cannot hydrate range",t,e),t+":"+e)}function get_ixti_raw(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var a=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!a)return"SH33TJSERR1";var o="";if(n.biff>8)switch(t[a[0]][0]){case 357:return o=a[1]==-1?"#REF":t.SheetNames[a[1]],a[1]==a[2]?o:o+":"+t.SheetNames[a[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[a[0]][0];case 355:default:return"SH33TJSSRC"+t[a[0]][0]}switch(t[a[0]][0][0]){case 1025:return o=a[1]==-1?"#REF":t.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?o:o+":"+t.SheetNames[a[2]];case 14849:return t[a[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return t[a[0]][0][3]?(o=a[1]==-1?"#REF":t[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?o:o+":"+t[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function get_ixti(t,e,n){var a=get_ixti_raw(t,e,n);return a=="#REF"?a:formula_quote_sheet_name(a,n)}function stringify_formula(t,e,n,a,o){var c=o&&o.biff||8,l={s:{c:0,r:0},e:{c:0,r:0}},u=[],d,m,b,x=0,_=0,w,S="";if(!t[0]||!t[0][0])return"";for(var T=-1,B="",C=0,D=t[0].length;C<D;++C){var z=t[0][C];switch(z[0]){case"PtgUminus":u.push("-"+u.pop());break;case"PtgUplus":u.push("+"+u.pop());break;case"PtgPercent":u.push(u.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(d=u.pop(),m=u.pop(),T>=0){switch(t[0][T][1][0]){case 0:B=fill(" ",t[0][T][1][1]);break;case 1:B=fill("\r",t[0][T][1][1]);break;default:if(B="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][T][1][0])}m=m+B,T=-1}u.push(m+PtgBinOp[z[0]]+d);break;case"PtgIsect":d=u.pop(),m=u.pop(),u.push(m+" "+d);break;case"PtgUnion":d=u.pop(),m=u.pop(),u.push(m+","+d);break;case"PtgRange":d=u.pop(),m=u.pop(),u.push(make_3d_range(m,d));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":b=shift_cell_xls(z[1][1],l,o),u.push(encode_cell_xls(b,c));break;case"PtgRefN":b=n?shift_cell_xls(z[1][1],n,o):z[1][1],u.push(encode_cell_xls(b,c));break;case"PtgRef3d":x=z[1][1],b=shift_cell_xls(z[1][2],l,o),S=get_ixti(a,x,o),u.push(S+"!"+encode_cell_xls(b,c));break;case"PtgFunc":case"PtgFuncVar":var U=z[1][0],Y=z[1][1];U||(U=0),U&=127;var X=U==0?[]:u.slice(-U);u.length-=U,Y==="User"&&(Y=X.shift()),u.push(Y+"("+X.join(",")+")");break;case"PtgBool":u.push(z[1]?"TRUE":"FALSE");break;case"PtgInt":u.push(z[1]);break;case"PtgNum":u.push(String(z[1]));break;case"PtgStr":u.push('"'+z[1].replace(/"/g,'""')+'"');break;case"PtgErr":u.push(z[1]);break;case"PtgAreaN":w=shift_range_xls(z[1][1],n?{s:n}:l,o),u.push(encode_range_xls(w,o));break;case"PtgArea":w=shift_range_xls(z[1][1],l,o),u.push(encode_range_xls(w,o));break;case"PtgArea3d":x=z[1][1],w=z[1][2],S=get_ixti(a,x,o),u.push(S+"!"+encode_range_xls(w,o));break;case"PtgAttrSum":u.push("SUM("+u.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":_=z[1][2];var O=(a.names||[])[_-1]||(a[0]||[])[_],J=O?O.Name:"SH33TJSNAME"+String(_);J&&J.slice(0,6)=="_xlfn."&&!o.xlfn&&(J=J.slice(6)),u.push(J);break;case"PtgNameX":var Z=z[1][1];_=z[1][2];var se;if(o.biff<=5)Z<0&&(Z=-Z),a[Z]&&(se=a[Z][_]);else{var ie="";if(((a[Z]||[])[0]||[])[0]==14849||(((a[Z]||[])[0]||[])[0]==1025?a[Z][_]&&a[Z][_].itab>0&&(ie=a.SheetNames[a[Z][_].itab-1]+"!"):ie=a.SheetNames[_-1]+"!"),a[Z]&&a[Z][_])ie+=a[Z][_].Name;else if(a[0]&&a[0][_])ie+=a[0][_].Name;else{var F=(get_ixti_raw(a,Z,o)||"").split(";;");F[_-1]?ie=F[_-1]:ie+="SH33TJSERRX"}u.push(ie);break}se||(se={Name:"SH33TJSERRY"}),u.push(se.Name);break;case"PtgParen":var k="(",y=")";if(T>=0){switch(B="",t[0][T][1][0]){case 2:k=fill(" ",t[0][T][1][1])+k;break;case 3:k=fill("\r",t[0][T][1][1])+k;break;case 4:y=fill(" ",t[0][T][1][1])+y;break;case 5:y=fill("\r",t[0][T][1][1])+y;break;default:if(o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][T][1][0])}T=-1}u.push(k+u.pop()+y);break;case"PtgRefErr":u.push("#REF!");break;case"PtgRefErr3d":u.push("#REF!");break;case"PtgExp":b={c:z[1][1],r:z[1][0]};var A={c:n.c,r:n.r};if(a.sharedf[encode_cell(b)]){var I=a.sharedf[encode_cell(b)];u.push(stringify_formula(I,l,A,a,o))}else{var P=!1;for(d=0;d!=a.arrayf.length;++d)if(m=a.arrayf[d],!(b.c<m[0].s.c||b.c>m[0].e.c)&&!(b.r<m[0].s.r||b.r>m[0].e.r)){u.push(stringify_formula(m[1],l,A,a,o)),P=!0;break}P||u.push(z[1])}break;case"PtgArray":u.push("{"+stringify_array(z[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":T=C;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":u.push("");break;case"PtgAreaErr":u.push("#REF!");break;case"PtgAreaErr3d":u.push("#REF!");break;case"PtgList":u.push("Table"+z[1].idx+"[#"+z[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(z));default:throw new Error("Unrecognized Formula Token: "+String(z))}var H=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(o.biff!=3&&T>=0&&H.indexOf(t[0][C][0])==-1){z=t[0][T];var q=!0;switch(z[1][0]){case 4:q=!1;case 0:B=fill(" ",z[1][1]);break;case 5:q=!1;case 1:B=fill("\r",z[1][1]);break;default:if(B="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+z[1][0])}u.push((q?B:"")+u.pop()+(q?"":B)),T=-1}}if(u.length>1&&o.WTF)throw new Error("bad formula stack");return u[0]=="TRUE"?!0:u[0]=="FALSE"?!1:u[0]}function parse_ArrayParsedFormula(t,e,n){var a=t.l+e,o=n.biff==2?1:2,c,l=t.read_shift(o);if(l==65535)return[[],parsenoop(t,e-2)];var u=parse_Rgce(t,l,n);return e!==l+o&&(c=parse_RgbExtra(t,e-l-o,u,n)),t.l=a,[u,c]}function parse_XLSCellParsedFormula(t,e,n){var a=t.l+e,o=n.biff==2?1:2,c,l=t.read_shift(o);if(l==65535)return[[],parsenoop(t,e-2)];var u=parse_Rgce(t,l,n);return e!==l+o&&(c=parse_RgbExtra(t,e-l-o,u,n)),t.l=a,[u,c]}function parse_NameParsedFormula(t,e,n,a){var o=t.l+e,c=parse_Rgce(t,a,n),l;return o!==t.l&&(l=parse_RgbExtra(t,o-t.l,c,n)),[c,l]}function parse_SharedParsedFormula(t,e,n){var a=t.l+e,o,c=t.read_shift(2),l=parse_Rgce(t,c,n);return c==65535?[[],parsenoop(t,e-2)]:(e!==c+2&&(o=parse_RgbExtra(t,a-c-2,l,n)),[l,o])}function parse_FormulaValue(t){var e;if(__readUInt16LE(t,t.l+6)!==65535)return[parse_Xnum(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function write_FormulaValue(t){if(t==null){var e=new_buf(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return write_Xnum(t);return write_Xnum(0)}function parse_Formula(t,e,n){var a=t.l+e,o=parse_XLSCell(t);n.biff==2&&++t.l;var c=parse_FormulaValue(t),l=t.read_shift(1);n.biff!=2&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var u=parse_XLSCellParsedFormula(t,a-t.l,n);return{cell:o,val:c[0],formula:u,shared:l>>3&1,tt:c[1]}}function write_Formula(t,e,n,a,o){var c=write_XLSCell(e,n,o),l=write_FormulaValue(t.v),u=new_buf(6),d=33;u.write_shift(2,d),u.write_shift(4,0);for(var m=new_buf(t.bf.length),b=0;b<t.bf.length;++b)m[b]=t.bf[b];var x=bconcat([c,l,u,m]);return x}function parse_XLSBParsedFormula(t,e,n){var a=t.read_shift(4),o=parse_Rgce(t,a,n),c=t.read_shift(4),l=c>0?parse_RgbExtra(t,c,o,n):null;return[o,l]}var parse_XLSBArrayParsedFormula=parse_XLSBParsedFormula,parse_XLSBCellParsedFormula=parse_XLSBParsedFormula,parse_XLSBNameParsedFormula=parse_XLSBParsedFormula,parse_XLSBSharedParsedFormula=parse_XLSBParsedFormula;function write_XLSBFormulaNum(t){if((t|0)==t&&t<Math.pow(2,16)&&t>=0){var e=new_buf(11);return e.write_shift(4,3),e.write_shift(1,30),e.write_shift(2,t),e.write_shift(4,0),e}var n=new_buf(17);return n.write_shift(4,11),n.write_shift(1,31),n.write_shift(8,t),n.write_shift(4,0),n}function write_XLSBFormulaErr(t){var e=new_buf(10);return e.write_shift(4,2),e.write_shift(1,28),e.write_shift(1,t),e.write_shift(4,0),e}function write_XLSBFormulaBool(t){var e=new_buf(10);return e.write_shift(4,2),e.write_shift(1,29),e.write_shift(1,t?1:0),e.write_shift(4,0),e}function write_XLSBFormulaStr(t){var e=new_buf(7);e.write_shift(4,3+2*t.length),e.write_shift(1,23),e.write_shift(2,t.length);var n=new_buf(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=new_buf(4);return a.write_shift(4,0),bconcat([e,n,a])}function write_XLSBFormulaRef(t){var e=decode_cell(t),n=new_buf(15);return n.write_shift(4,7),n.write_shift(1,4|1<<5),n.write_shift(4,e.r),n.write_shift(2,e.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),n.write_shift(4,0),n}function write_XLSBFormulaRef3D(t,e){var n=t.lastIndexOf("!"),a=t.slice(0,n);t=t.slice(n+1);var o=decode_cell(t);a.charAt(0)=="'"&&(a=a.slice(1,-1).replace(/''/g,"'"));var c=new_buf(17);return c.write_shift(4,9),c.write_shift(1,26|1<<5),c.write_shift(2,2+e.SheetNames.map(function(l){return l.toLowerCase()}).indexOf(a.toLowerCase())),c.write_shift(4,o.r),c.write_shift(2,o.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),c.write_shift(4,0),c}function write_XLSBFormulaRefErr3D(t,e){var n=t.lastIndexOf("!"),a=t.slice(0,n);t=t.slice(n+1),a.charAt(0)=="'"&&(a=a.slice(1,-1).replace(/''/g,"'"));var o=new_buf(17);return o.write_shift(4,9),o.write_shift(1,28|1<<5),o.write_shift(2,2+e.SheetNames.map(function(c){return c.toLowerCase()}).indexOf(a.toLowerCase())),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(4,0),o}function write_XLSBFormulaRange(t){var e=t.split(":"),n=e[0],a=new_buf(23);a.write_shift(4,15),n=e[0];var o=decode_cell(n);return a.write_shift(1,4|1<<5),a.write_shift(4,o.r),a.write_shift(2,o.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),a.write_shift(4,0),n=e[1],o=decode_cell(n),a.write_shift(1,4|1<<5),a.write_shift(4,o.r),a.write_shift(2,o.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),a.write_shift(4,0),a.write_shift(1,17),a.write_shift(4,0),a}function write_XLSBFormulaRangeWS(t,e){var n=t.lastIndexOf("!"),a=t.slice(0,n);t=t.slice(n+1),a.charAt(0)=="'"&&(a=a.slice(1,-1).replace(/''/g,"'"));var o=t.split(":");l=o[0];var c=new_buf(27);c.write_shift(4,19);var l=o[0],u=decode_cell(l);return c.write_shift(1,26|1<<5),c.write_shift(2,2+e.SheetNames.map(function(d){return d.toLowerCase()}).indexOf(a.toLowerCase())),c.write_shift(4,u.r),c.write_shift(2,u.c|(l.charAt(0)=="$"?0:1)<<14|(l.match(/\$\d/)?0:1)<<15),l=o[1],u=decode_cell(l),c.write_shift(1,26|1<<5),c.write_shift(2,2+e.SheetNames.map(function(d){return d.toLowerCase()}).indexOf(a.toLowerCase())),c.write_shift(4,u.r),c.write_shift(2,u.c|(l.charAt(0)=="$"?0:1)<<14|(l.match(/\$\d/)?0:1)<<15),c.write_shift(1,17),c.write_shift(4,0),c}function write_XLSBFormulaArea3D(t,e){var n=t.lastIndexOf("!"),a=t.slice(0,n);t=t.slice(n+1),a.charAt(0)=="'"&&(a=a.slice(1,-1).replace(/''/g,"'"));var o=decode_range(t),c=new_buf(23);return c.write_shift(4,15),c.write_shift(1,27|1<<5),c.write_shift(2,2+e.SheetNames.map(function(l){return l.toLowerCase()}).indexOf(a.toLowerCase())),c.write_shift(4,o.s.r),c.write_shift(4,o.e.r),c.write_shift(2,o.s.c),c.write_shift(2,o.e.c),c.write_shift(4,0),c}function write_XLSBFormula(t,e){if(typeof t=="number")return write_XLSBFormulaNum(t);if(typeof t=="boolean")return write_XLSBFormulaBool(t);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(t))return write_XLSBFormulaErr(+RBErr[t]);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef(t);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRange(t);if(t.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaArea3D(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef3D(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRangeWS(t,e);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(t))return write_XLSBFormulaRefErr3D(t,e);if(/^".*"$/.test(t))return write_XLSBFormulaStr(t);if(/^[+-]\d+$/.test(t))return write_XLSBFormulaNum(parseInt(t,10));throw"Formula |"+t+"| not supported for XLSB"}var write_XLSBNameParsedFormula=write_XLSBFormula,Cetab={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Ftab={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FtabArgc={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function ods_to_csf_formula(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,n){return n.replace(/\./g,"")}),t=t.replace(/\$'([^']|'')+'/g,function(e){return e.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(e,n){return n.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?e:n}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function csf_to_ods_formula(t){var e="of:="+t.replace(crefregex,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function ods_to_csf_3D(t){t=t.replace(/\$'([^']|'')+'/g,function(a){return a.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(a,o){return o.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?a:o});var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function csf_to_ods_3D(t){return t.replace(/!/,".")}var strs={},_ssfopts={},browser_has_Map=typeof Map<"u";function get_sst_id(t,e,n){var a=0,o=t.length;if(n){if(browser_has_Map?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var c=browser_has_Map?n.get(e):n[e];a<c.length;++a)if(t[c[a]].t===e)return t.Count++,c[a]}}else for(;a<o;++a)if(t[a].t===e)return t.Count++,a;return t[o]={t:e},t.Count++,t.Unique++,n&&(browser_has_Map?(n.has(e)||n.set(e,[]),n.get(e).push(o)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(o))),o}function col_obj_w(t,e){var n={min:t+1,max:t+1},a=-1;return e.MDW&&(MDW=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?a=px2char(e.wpx):e.wch!=null&&(a=e.wch),a>-1?(n.width=char2width(a),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function default_margins(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(n=[1,1,1,1,.5,.5]),t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function get_cell_style(t,e,n){var a=n.revssf[e.z!=null?e.z:"General"],o=60,c=t.length;if(a==null&&n.ssf){for(;o<392;++o)if(n.ssf[o]==null){SSF__load(e.z,o),n.ssf[o]=e.z,n.revssf[e.z]=a=o;break}}for(o=0;o!=c;++o)if(t[o].numFmtId===a)return o;return t[c]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},c}function safe_format(t,e,n,a,o,c){try{a.cellNF&&(t.z=table_fmt[e])}catch(u){if(a.WTF)throw u}if(!(t.t==="z"&&!a.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=parseDate(t.v)),(!a||a.cellText!==!1)&&t.t!=="z")try{if(table_fmt[e]==null&&SSF__load(SSFImplicit[e]||"General",e),t.t==="e")t.w=t.w||BErr[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=SSF_general_num(t.v);else if(t.t==="d"){var l=datenum(t.v);(l|0)===l?t.w=l.toString(10):t.w=SSF_general_num(l)}else{if(t.v===void 0)return"";t.w=SSF_general(t.v,_ssfopts)}else t.t==="d"?t.w=SSF_format(e,datenum(t.v),_ssfopts):t.w=SSF_format(e,t.v,_ssfopts)}catch(u){if(a.WTF)throw u}if(a.cellStyles&&n!=null)try{t.s=c.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=rgb_tint(o.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),a.WTF&&(t.s.fgColor.raw_rgb=o.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=rgb_tint(o.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),a.WTF&&(t.s.bgColor.raw_rgb=o.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(u){if(a.WTF&&c.Fills)throw u}}}function check_ws(t,e,n){if(t&&t["!ref"]){var a=safe_decode_range(t["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function parse_ws_xml_dim(t,e){var n=safe_decode_range(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=encode_range(n))}var mergecregex=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sheetdataregex=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,hlinkregex=/<(?:\w:)?hyperlink [^>]*>/mg,dimregex=/"(\w*:\w*)"/,colregex=/<(?:\w:)?col\b[^>]*[\/]?>/g,afregex=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,marginregex=/<(?:\w:)?pageMargins[^>]*\/>/g,sheetprregex=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,sheetprregex2=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,svsregex=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function parse_ws_xml(t,e,n,a,o,c,l){if(!t)return t;a||(a={"!id":{}});var u={};e.dense&&(u["!data"]=[]);var d={s:{r:2e6,c:2e6},e:{r:0,c:0}},m="",b="",x=t.match(sheetdataregex);x?(m=t.slice(0,x.index),b=t.slice(x.index+x[0].length)):m=b=t;var _=m.match(sheetprregex);_?parse_ws_xml_sheetpr(_[0],u,o,n):(_=m.match(sheetprregex2))&&parse_ws_xml_sheetpr2(_[0],_[1]||"",u,o,n);var w=(m.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(w>0){var S=m.slice(w,w+50).match(dimregex);S&&!(e&&e.nodim)&&parse_ws_xml_dim(u,S[1])}var T=m.match(svsregex);T&&T[1]&&parse_ws_xml_sheetviews(T[1],o);var B=[];if(e.cellStyles){var C=m.match(colregex);C&&parse_ws_xml_cols(B,C)}x&&parse_ws_xml_data(x[1],u,e,d,c,l);var D=b.match(afregex);D&&(u["!autofilter"]=parse_ws_xml_autofilter(D[0]));var z=[],U=b.match(mergecregex);if(U)for(w=0;w!=U.length;++w)z[w]=safe_decode_range(U[w].slice(U[w].indexOf('"')+1));var Y=b.match(hlinkregex);Y&&parse_ws_xml_hlinks(u,Y,a);var X=b.match(marginregex);if(X&&(u["!margins"]=parse_ws_xml_margins(parsexmltag(X[0]))),e&&e.nodim&&(d.s.c=d.s.r=0),!u["!ref"]&&d.e.c>=d.s.c&&d.e.r>=d.s.r&&(u["!ref"]=encode_range(d)),e.sheetRows>0&&u["!ref"]){var O=safe_decode_range(u["!ref"]);e.sheetRows<=+O.e.r&&(O.e.r=e.sheetRows-1,O.e.r>d.e.r&&(O.e.r=d.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>d.e.c&&(O.e.c=d.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),u["!fullref"]=u["!ref"],u["!ref"]=encode_range(O))}return B.length>0&&(u["!cols"]=B),z.length>0&&(u["!merges"]=z),u}function write_ws_xml_merges(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+encode_range(t[n])+'"/>';return e+"</mergeCells>"}function parse_ws_xml_sheetpr(t,e,n,a){var o=parsexmltag(t);n.Sheets[a]||(n.Sheets[a]={}),o.codeName&&(n.Sheets[a].CodeName=unescapexml(utf8read(o.codeName)))}function parse_ws_xml_sheetpr2(t,e,n,a,o){parse_ws_xml_sheetpr(t.slice(0,t.indexOf(">")),n,a,o)}function write_ws_xml_sheetpr(t,e,n,a,o){var c=!1,l={},u=null;if(a.bookType!=="xlsx"&&e.vbaraw){var d=e.SheetNames[n];try{e.Workbook&&(d=e.Workbook.Sheets[n].CodeName||d)}catch{}c=!0,l.codeName=utf8write(escapexml(d))}if(t&&t["!outline"]){var m={summaryBelow:1,summaryRight:1};t["!outline"].above&&(m.summaryBelow=0),t["!outline"].left&&(m.summaryRight=0),u=(u||"")+writextag("outlinePr",null,m)}!c&&!u||(o[o.length]=writextag("sheetPr",u,l))}var sheetprot_deffalse=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sheetprot_deftrue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function write_ws_xml_protection(t){var e={sheet:1};return sheetprot_deffalse.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),sheetprot_deftrue.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=crypto_CreatePasswordVerifier_Method1(t.password).toString(16).toUpperCase()),writextag("sheetProtection",null,e)}function parse_ws_xml_hlinks(t,e,n){for(var a=t["!data"]!=null,o=0;o!=e.length;++o){var c=parsexmltag(utf8read(e[o]),!0);if(!c.ref)return;var l=((n||{})["!id"]||[])[c.id];l?(c.Target=l.Target,c.location&&(c.Target+="#"+unescapexml(c.location))):(c.Target="#"+unescapexml(c.location),l={Target:c.Target,TargetMode:"Internal"}),c.Rel=l,c.tooltip&&(c.Tooltip=c.tooltip,delete c.tooltip);for(var u=safe_decode_range(c.ref),d=u.s.r;d<=u.e.r;++d)for(var m=u.s.c;m<=u.e.c;++m){var b=encode_col(m)+encode_row(d);a?(t["!data"][d]||(t["!data"][d]=[]),t["!data"][d][m]||(t["!data"][d][m]={t:"z",v:void 0}),t["!data"][d][m].l=c):(t[b]||(t[b]={t:"z",v:void 0}),t[b].l=c)}}}function parse_ws_xml_margins(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(n){t[n]&&(e[n]=parseFloat(t[n]))}),e}function write_ws_xml_margins(t){return default_margins(t),writextag("pageMargins",null,t)}function parse_ws_xml_cols(t,e){for(var n=!1,a=0;a!=e.length;++a){var o=parsexmltag(e[a],!0);o.hidden&&(o.hidden=parsexmlbool(o.hidden));var c=parseInt(o.min,10)-1,l=parseInt(o.max,10)-1;for(o.outlineLevel&&(o.level=+o.outlineLevel||0),delete o.min,delete o.max,o.width=+o.width,!n&&o.width&&(n=!0,find_mdw_colw(o.width)),process_col(o);c<=l;)t[c++]=dup(o)}}function write_ws_xml_cols(t,e){for(var n=["<cols>"],a,o=0;o!=e.length;++o)(a=e[o])&&(n[n.length]=writextag("col",null,col_obj_w(o,a)));return n[n.length]="</cols>",n.join("")}function parse_ws_xml_autofilter(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function write_ws_xml_autofilter(t,e,n,a){var o=typeof t.ref=="string"?t.ref:encode_range(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var c=n.Workbook.Names,l=decode_range(o);l.s.r==l.e.r&&(l.e.r=decode_range(e["!ref"]).e.r,o=encode_range(l));for(var u=0;u<c.length;++u){var d=c[u];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==a){d.Ref=formula_quote_sheet_name(n.SheetNames[a])+"!"+fix_range(o);break}}return u==c.length&&c.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+n.SheetNames[a]+"'!"+o}),writextag("autoFilter",null,{ref:o})}var sviewregex=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/g;function parse_ws_xml_sheetviews(t,e){e.Views||(e.Views=[{}]),(t.match(sviewregex)||[]).forEach(function(n,a){var o=parsexmltag(n);e.Views[a]||(e.Views[a]={}),+o.zoomScale&&(e.Views[a].zoom=+o.zoomScale),o.rightToLeft&&parsexmlbool(o.rightToLeft)&&(e.Views[a].RTL=!0)})}function write_ws_xml_sheetviews(t,e,n,a){var o={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(o.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),writextag("sheetViews",writextag("sheetView",null,o),{})}function write_ws_xml_cell(t,e,n,a){if(t.c&&n["!comments"].push([e,t.c]),(t.v===void 0||t.t==="z"&&!(a||{}).sheetStubs)&&typeof t.f!="string"&&typeof t.z>"u")return"";var o="",c=t.t,l=t.v;if(t.t!=="z")switch(t.t){case"b":o=t.v?"1":"0";break;case"n":o=""+t.v;break;case"e":o=BErr[t.v];break;case"d":a&&a.cellDates?o=parseDate(t.v,-1).toISOString():(t=dup(t),t.t="n",o=""+(t.v=datenum(parseDate(t.v)))),typeof t.z>"u"&&(t.z=table_fmt[14]);break;default:o=t.v;break}var u=t.t=="z"||t.v==null?"":writetag("v",escapexml(o)),d={r:e},m=get_cell_style(a.cellXfs,t,a);switch(m!==0&&(d.s=m),t.t){case"n":break;case"d":d.t="d";break;case"b":d.t="b";break;case"e":d.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){u=writetag("v",""+get_sst_id(a.Strings,t.v,a.revStrings)),d.t="s";break}else d.t="str";break}if(t.t!=c&&(t.t=c,t.v=l),typeof t.f=="string"&&t.f){var b=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;u=writextag("f",escapexml(t.f),b)+(t.v!=null?u:"")}return t.l&&(t.l.display=escapexml(o),n["!links"].push([e,t.l])),t.D&&(d.cm=1),writextag("c",u,d)}var parse_ws_xml_data=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,o=/ref=["']([^"']*)["']/,c=matchtag("v"),l=matchtag("f");return function(d,m,b,x,_,w){for(var S=0,T="",B=[],C=[],D=0,z=0,U=0,Y="",X,O,J=0,Z=0,se,ie,F=0,k=0,y=Array.isArray(w.CellXf),A,I=[],P=[],H=m["!data"]!=null,q=[],j={},M=!1,E=!!b.sheetStubs,L=d.split(e),le=0,Q=L.length;le!=Q;++le){T=L[le].trim();var ce=T.length;if(ce===0)continue;var fe=0;e:for(S=0;S<ce;++S)switch(T[S]){case">":if(T[S-1]!="/"){++S;break e}if(b&&b.cellStyles){if(O=parsexmltag(T.slice(fe,S),!0),J=O.r!=null?parseInt(O.r,10):J+1,Z=-1,b.sheetRows&&b.sheetRows<J)continue;j={},M=!1,O.ht&&(M=!0,j.hpt=parseFloat(O.ht),j.hpx=pt2px(j.hpt)),O.hidden&&parsexmlbool(O.hidden)&&(M=!0,j.hidden=!0),O.outlineLevel!=null&&(M=!0,j.level=+O.outlineLevel),M&&(q[J-1]=j)}break;case"<":fe=S;break}if(fe>=S)break;if(O=parsexmltag(T.slice(fe,S),!0),J=O.r!=null?parseInt(O.r,10):J+1,Z=-1,!(b.sheetRows&&b.sheetRows<J)){b.nodim||(x.s.r>J-1&&(x.s.r=J-1),x.e.r<J-1&&(x.e.r=J-1)),b&&b.cellStyles&&(j={},M=!1,O.ht&&(M=!0,j.hpt=parseFloat(O.ht),j.hpx=pt2px(j.hpt)),O.hidden&&parsexmlbool(O.hidden)&&(M=!0,j.hidden=!0),O.outlineLevel!=null&&(M=!0,j.level=+O.outlineLevel),M&&(q[J-1]=j)),B=T.slice(S).split(t);for(var oe=0;oe!=B.length&&B[oe].trim().charAt(0)=="<";++oe);for(B=B.slice(oe),S=0;S!=B.length;++S)if(T=B[S].trim(),T.length!==0){if(C=T.match(n),D=S,z=0,U=0,T="<c "+(T.slice(0,1)=="<"?">":"")+T,C!=null&&C.length===2){for(D=0,Y=C[1],z=0;z!=Y.length&&!((U=Y.charCodeAt(z)-64)<1||U>26);++z)D=26*D+U;--D,Z=D}else++Z;for(z=0;z!=T.length&&T.charCodeAt(z)!==62;++z);if(++z,O=parsexmltag(T.slice(0,z),!0),O.r||(O.r=encode_cell({r:J-1,c:Z})),Y=T.slice(z),X={t:""},(C=Y.match(c))!=null&&C[1]!==""&&(X.v=unescapexml(C[1])),b.cellFormula){if((C=Y.match(l))!=null&&C[1]!==""){if(X.f=unescapexml(utf8read(C[1]),!0),b.xlfn||(X.f=_xlfn(X.f)),C[0].indexOf('t="array"')>-1)X.F=(Y.match(o)||[])[1],X.F.indexOf(":")>-1&&I.push([safe_decode_range(X.F),X.F]);else if(C[0].indexOf('t="shared"')>-1){ie=parsexmltag(C[0]);var de=unescapexml(utf8read(C[1]));b.xlfn||(de=_xlfn(de)),P[parseInt(ie.si,10)]=[ie,de,O.r]}}else(C=Y.match(/<f[^>]*\/>/))&&(ie=parsexmltag(C[0]),P[ie.si]&&(X.f=shift_formula_xlsx(P[ie.si][1],P[ie.si][2],O.r)));var ae=decode_cell(O.r);for(z=0;z<I.length;++z)ae.r>=I[z][0].s.r&&ae.r<=I[z][0].e.r&&ae.c>=I[z][0].s.c&&ae.c<=I[z][0].e.c&&(X.F=I[z][1])}if(O.t==null&&X.v===void 0)if(X.f||X.F)X.v=0,X.t="n";else if(E)X.t="z";else continue;else X.t=O.t||"n";switch(x.s.c>Z&&(x.s.c=Z),x.e.c<Z&&(x.e.c=Z),X.t){case"n":if(X.v==""||X.v==null){if(!E)continue;X.t="z"}else X.v=parseFloat(X.v);break;case"s":if(typeof X.v>"u"){if(!E)continue;X.t="z"}else se=strs[parseInt(X.v,10)],X.v=se.t,X.r=se.r,b.cellHTML&&(X.h=se.h);break;case"str":X.t="s",X.v=X.v!=null?unescapexml(utf8read(X.v),!0):"",b.cellHTML&&(X.h=escapehtml(X.v));break;case"inlineStr":C=Y.match(a),X.t="s",C!=null&&(se=parse_si(C[1]))?(X.v=se.t,b.cellHTML&&(X.h=se.h)):X.v="";break;case"b":X.v=parsexmlbool(X.v);break;case"d":b.cellDates?X.v=parseDate(X.v,1):(X.v=datenum(parseDate(X.v,1)),X.t="n");break;case"e":(!b||b.cellText!==!1)&&(X.w=X.v),X.v=RBErr[X.v];break}if(F=k=0,A=null,y&&O.s!==void 0&&(A=w.CellXf[O.s],A!=null&&(A.numFmtId!=null&&(F=A.numFmtId),b.cellStyles&&A.fillId!=null&&(k=A.fillId))),safe_format(X,F,k,b,_,w),b.cellDates&&y&&X.t=="n"&&fmt_is_date(table_fmt[F])&&(X.t="d",X.v=numdate(X.v)),O.cm&&b.xlmeta){var he=(b.xlmeta.Cell||[])[+O.cm-1];he&&he.type=="XLDAPR"&&(X.D=!0)}var te;b.nodim&&(te=decode_cell(O.r),x.s.r>te.r&&(x.s.r=te.r),x.e.r<te.r&&(x.e.r=te.r)),H?(te=decode_cell(O.r),m["!data"][te.r]||(m["!data"][te.r]=[]),m["!data"][te.r][te.c]=X):m[O.r]=X}}}q.length>0&&(m["!rows"]=q)}}();function write_ws_xml_data(t,e,n,a){var o=[],c=[],l=safe_decode_range(t["!ref"]),u="",d,m="",b=[],x=0,_=0,w=t["!rows"],S=t["!data"]!=null,T={r:m},B,C=-1;for(_=l.s.c;_<=l.e.c;++_)b[_]=encode_col(_);for(x=l.s.r;x<=l.e.r;++x){for(c=[],m=encode_row(x),_=l.s.c;_<=l.e.c;++_){d=b[_]+m;var D=S?(t["!data"][x]||[])[_]:t[d];D!==void 0&&(u=write_ws_xml_cell(D,d,t,e))!=null&&c.push(u)}(c.length>0||w&&w[x])&&(T={r:m},w&&w[x]&&(B=w[x],B.hidden&&(T.hidden=1),C=-1,B.hpx?C=px2pt(B.hpx):B.hpt&&(C=B.hpt),C>-1&&(T.ht=C,T.customHeight=1),B.level&&(T.outlineLevel=B.level)),o[o.length]=writextag("row",c.join(""),T))}if(w)for(;x<w.length;++x)w&&w[x]&&(T={r:x+1},B=w[x],B.hidden&&(T.hidden=1),C=-1,B.hpx?C=px2pt(B.hpx):B.hpt&&(C=B.hpt),C>-1&&(T.ht=C,T.customHeight=1),B.level&&(T.outlineLevel=B.level),o[o.length]=writextag("row","",T));return o.join("")}function write_ws_xml(t,e,n,a){var o=[XML_HEADER,writextag("worksheet",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r})],c=n.SheetNames[t],l=0,u="",d=n.Sheets[c];d==null&&(d={});var m=d["!ref"]||"A1",b=safe_decode_range(m);if(b.e.c>16383||b.e.r>1048575){if(e.WTF)throw new Error("Range "+m+" exceeds format limit A1:XFD1048576");b.e.c=Math.min(b.e.c,16383),b.e.r=Math.min(b.e.c,1048575),m=encode_range(b)}a||(a={}),d["!comments"]=[];var x=[];write_ws_xml_sheetpr(d,n,t,e,o),o[o.length]=writextag("dimension",null,{ref:m}),o[o.length]=write_ws_xml_sheetviews(d,e,t,n),e.sheetFormat&&(o[o.length]=writextag("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),d["!cols"]!=null&&d["!cols"].length>0&&(o[o.length]=write_ws_xml_cols(d,d["!cols"])),o[l=o.length]="<sheetData/>",d["!links"]=[],d["!ref"]!=null&&(u=write_ws_xml_data(d,e),u.length>0&&(o[o.length]=u)),o.length>l+1&&(o[o.length]="</sheetData>",o[l]=o[l].replace("/>",">")),d["!protect"]&&(o[o.length]=write_ws_xml_protection(d["!protect"])),d["!autofilter"]!=null&&(o[o.length]=write_ws_xml_autofilter(d["!autofilter"],d,n,t)),d["!merges"]!=null&&d["!merges"].length>0&&(o[o.length]=write_ws_xml_merges(d["!merges"]));var _=-1,w,S=-1;return d["!links"].length>0&&(o[o.length]="<hyperlinks>",d["!links"].forEach(function(T){T[1].Target&&(w={ref:T[0]},T[1].Target.charAt(0)!="#"&&(S=add_rels(a,-1,escapexml(T[1].Target).replace(/#.*$/,""),RELS.HLINK),w["r:id"]="rId"+S),(_=T[1].Target.indexOf("#"))>-1&&(w.location=escapexml(T[1].Target.slice(_+1))),T[1].Tooltip&&(w.tooltip=escapexml(T[1].Tooltip)),w.display=T[1].display,o[o.length]=writextag("hyperlink",null,w))}),o[o.length]="</hyperlinks>"),delete d["!links"],d["!margins"]!=null&&(o[o.length]=write_ws_xml_margins(d["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(o[o.length]=writetag("ignoredErrors",writextag("ignoredError",null,{numberStoredAsText:1,sqref:m}))),x.length>0&&(S=add_rels(a,-1,"../drawings/drawing"+(t+1)+".xml",RELS.DRAW),o[o.length]=writextag("drawing",null,{"r:id":"rId"+S}),d["!drawing"]=x),d["!comments"].length>0&&(S=add_rels(a,-1,"../drawings/vmlDrawing"+(t+1)+".vml",RELS.VML),o[o.length]=writextag("legacyDrawing",null,{"r:id":"rId"+S}),d["!legacy"]=S),o.length>1&&(o[o.length]="</worksheet>",o[1]=o[1].replace("/>",">")),o.join("")}function parse_BrtRowHdr(t,e){var n={},a=t.l+e;n.r=t.read_shift(4),t.l+=4;var o=t.read_shift(2);t.l+=1;var c=t.read_shift(1);return t.l=a,c&7&&(n.level=c&7),c&16&&(n.hidden=!0),c&32&&(n.hpt=o/20),n}function write_BrtRowHdr(t,e,n){var a=new_buf(145),o=(n["!rows"]||[])[t]||{};a.write_shift(4,t),a.write_shift(4,0);var c=320;o.hpx?c=px2pt(o.hpx)*20:o.hpt&&(c=o.hpt*20),a.write_shift(2,c),a.write_shift(1,0);var l=0;o.level&&(l|=o.level),o.hidden&&(l|=16),(o.hpx||o.hpt)&&(l|=32),a.write_shift(1,l),a.write_shift(1,0);var u=0,d=a.l;a.l+=4;for(var m={r:t,c:0},b=n["!data"]!=null,x=0;x<16;++x)if(!(e.s.c>x+1<<10||e.e.c<x<<10)){for(var _=-1,w=-1,S=x<<10;S<x+1<<10;++S){m.c=S;var T=b?(n["!data"][m.r]||[])[m.c]:n[encode_cell(m)];T&&(_<0&&(_=S),w=S)}_<0||(++u,a.write_shift(4,_),a.write_shift(4,w))}var B=a.l;return a.l=d,a.write_shift(4,u),a.l=B,a.length>a.l?a.slice(0,a.l):a}function write_row_header(t,e,n,a){var o=write_BrtRowHdr(a,n,e);(o.length>17||(e["!rows"]||[])[a])&&write_record(t,0,o)}var parse_BrtWsDim=parse_UncheckedRfX,write_BrtWsDim=write_UncheckedRfX;function parse_BrtWsFmtInfo(){}function parse_BrtWsProp(t,e){var n={},a=t[t.l];return++t.l,n.above=!(a&64),n.left=!(a&128),t.l+=18,n.name=parse_XLSBCodeName(t),n}function write_BrtWsProp(t,e,n){n==null&&(n=new_buf(84+4*t.length));var a=192;e&&(e.above&&(a&=-65),e.left&&(a&=-129)),n.write_shift(1,a);for(var o=1;o<3;++o)n.write_shift(1,0);return write_BrtColor({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),write_XLSBCodeName(t,n),n.slice(0,n.l)}function parse_BrtCellBlank(t){var e=parse_XLSBCell(t);return[e]}function write_BrtCellBlank(t,e,n){return n==null&&(n=new_buf(8)),write_XLSBCell(e,n)}function parse_BrtShortBlank(t){var e=parse_XLSBShortCell(t);return[e]}function write_BrtShortBlank(t,e,n){return n==null&&(n=new_buf(4)),write_XLSBShortCell(e,n)}function parse_BrtCellBool(t){var e=parse_XLSBCell(t),n=t.read_shift(1);return[e,n,"b"]}function write_BrtCellBool(t,e,n){return n==null&&(n=new_buf(9)),write_XLSBCell(e,n),n.write_shift(1,t.v?1:0),n}function parse_BrtShortBool(t){var e=parse_XLSBShortCell(t),n=t.read_shift(1);return[e,n,"b"]}function write_BrtShortBool(t,e,n){return n==null&&(n=new_buf(5)),write_XLSBShortCell(e,n),n.write_shift(1,t.v?1:0),n}function parse_BrtCellError(t){var e=parse_XLSBCell(t),n=t.read_shift(1);return[e,n,"e"]}function write_BrtCellError(t,e,n){return n==null&&(n=new_buf(9)),write_XLSBCell(e,n),n.write_shift(1,t.v),n}function parse_BrtShortError(t){var e=parse_XLSBShortCell(t),n=t.read_shift(1);return[e,n,"e"]}function write_BrtShortError(t,e,n){return n==null&&(n=new_buf(8)),write_XLSBShortCell(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function parse_BrtCellIsst(t){var e=parse_XLSBCell(t),n=t.read_shift(4);return[e,n,"s"]}function write_BrtCellIsst(t,e,n){return n==null&&(n=new_buf(12)),write_XLSBCell(e,n),n.write_shift(4,e.v),n}function parse_BrtShortIsst(t){var e=parse_XLSBShortCell(t),n=t.read_shift(4);return[e,n,"s"]}function write_BrtShortIsst(t,e,n){return n==null&&(n=new_buf(8)),write_XLSBShortCell(e,n),n.write_shift(4,e.v),n}function parse_BrtCellReal(t){var e=parse_XLSBCell(t),n=parse_Xnum(t);return[e,n,"n"]}function write_BrtCellReal(t,e,n){return n==null&&(n=new_buf(16)),write_XLSBCell(e,n),write_Xnum(t.v,n),n}function parse_BrtShortReal(t){var e=parse_XLSBShortCell(t),n=parse_Xnum(t);return[e,n,"n"]}function write_BrtShortReal(t,e,n){return n==null&&(n=new_buf(12)),write_XLSBShortCell(e,n),write_Xnum(t.v,n),n}function parse_BrtCellRk(t){var e=parse_XLSBCell(t),n=parse_RkNumber(t);return[e,n,"n"]}function write_BrtCellRk(t,e,n){return n==null&&(n=new_buf(12)),write_XLSBCell(e,n),write_RkNumber(t.v,n),n}function parse_BrtShortRk(t){var e=parse_XLSBShortCell(t),n=parse_RkNumber(t);return[e,n,"n"]}function write_BrtShortRk(t,e,n){return n==null&&(n=new_buf(8)),write_XLSBShortCell(e,n),write_RkNumber(t.v,n),n}function parse_BrtCellRString(t){var e=parse_XLSBCell(t),n=parse_RichStr(t);return[e,n,"is"]}function parse_BrtCellSt(t){var e=parse_XLSBCell(t),n=parse_XLWideString(t);return[e,n,"str"]}function write_BrtCellSt(t,e,n){var a=t.v==null?"":String(t.v);return n==null&&(n=new_buf(12+4*t.v.length)),write_XLSBCell(e,n),write_XLWideString(a,n),n.length>n.l?n.slice(0,n.l):n}function parse_BrtShortSt(t){var e=parse_XLSBShortCell(t),n=parse_XLWideString(t);return[e,n,"str"]}function write_BrtShortSt(t,e,n){var a=t.v==null?"":String(t.v);return n==null&&(n=new_buf(8+4*a.length)),write_XLSBShortCell(e,n),write_XLWideString(a,n),n.length>n.l?n.slice(0,n.l):n}function parse_BrtFmlaBool(t,e,n){var a=t.l+e,o=parse_XLSBCell(t);o.r=n["!row"];var c=t.read_shift(1),l=[o,c,"b"];if(n.cellFormula){t.l+=2;var u=parse_XLSBCellParsedFormula(t,a-t.l,n);l[3]=stringify_formula(u,null,o,n.supbooks,n)}else t.l=a;return l}function parse_BrtFmlaError(t,e,n){var a=t.l+e,o=parse_XLSBCell(t);o.r=n["!row"];var c=t.read_shift(1),l=[o,c,"e"];if(n.cellFormula){t.l+=2;var u=parse_XLSBCellParsedFormula(t,a-t.l,n);l[3]=stringify_formula(u,null,o,n.supbooks,n)}else t.l=a;return l}function parse_BrtFmlaNum(t,e,n){var a=t.l+e,o=parse_XLSBCell(t);o.r=n["!row"];var c=parse_Xnum(t),l=[o,c,"n"];if(n.cellFormula){t.l+=2;var u=parse_XLSBCellParsedFormula(t,a-t.l,n);l[3]=stringify_formula(u,null,o,n.supbooks,n)}else t.l=a;return l}function parse_BrtFmlaString(t,e,n){var a=t.l+e,o=parse_XLSBCell(t);o.r=n["!row"];var c=parse_XLWideString(t),l=[o,c,"str"];if(n.cellFormula){t.l+=2;var u=parse_XLSBCellParsedFormula(t,a-t.l,n);l[3]=stringify_formula(u,null,o,n.supbooks,n)}else t.l=a;return l}var parse_BrtMergeCell=parse_UncheckedRfX,write_BrtMergeCell=write_UncheckedRfX;function write_BrtBeginMergeCells(t,e){return e==null&&(e=new_buf(4)),e.write_shift(4,t),e}function parse_BrtHLink(t,e){var n=t.l+e,a=parse_UncheckedRfX(t),o=parse_XLNullableWideString(t),c=parse_XLWideString(t),l=parse_XLWideString(t),u=parse_XLWideString(t);t.l=n;var d={rfx:a,relId:o,loc:c,display:u};return l&&(d.Tooltip=l),d}function write_BrtHLink(t,e){var n=new_buf(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));write_UncheckedRfX({s:decode_cell(t[0]),e:decode_cell(t[0])},n),write_RelID("rId"+e,n);var a=t[1].Target.indexOf("#"),o=a==-1?"":t[1].Target.slice(a+1);return write_XLWideString(o||"",n),write_XLWideString(t[1].Tooltip||"",n),write_XLWideString("",n),n.slice(0,n.l)}function parse_BrtPane(){}function parse_BrtArrFmla(t,e,n){var a=t.l+e,o=parse_RfX(t),c=t.read_shift(1),l=[o];if(l[2]=c,n.cellFormula){var u=parse_XLSBArrayParsedFormula(t,a-t.l,n);l[1]=u}else t.l=a;return l}function parse_BrtShrFmla(t,e,n){var a=t.l+e,o=parse_UncheckedRfX(t),c=[o];if(n.cellFormula){var l=parse_XLSBSharedParsedFormula(t,a-t.l,n);c[1]=l,t.l=a}else t.l=a;return c}function write_BrtColInfo(t,e,n){n==null&&(n=new_buf(18));var a=col_obj_w(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(a.width||10)*256),n.write_shift(4,0);var o=0;return e.hidden&&(o|=1),typeof a.width=="number"&&(o|=2),e.level&&(o|=e.level<<8),n.write_shift(2,o),n}var BrtMarginKeys=["left","right","top","bottom","header","footer"];function parse_BrtMargins(t){var e={};return BrtMarginKeys.forEach(function(n){e[n]=parse_Xnum(t)}),e}function write_BrtMargins(t,e){return e==null&&(e=new_buf(6*8)),default_margins(t),BrtMarginKeys.forEach(function(n){write_Xnum(t[n],e)}),e}function parse_BrtBeginWsView(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function write_BrtBeginWsView(t,e,n){n==null&&(n=new_buf(30));var a=924;return(((e||{}).Views||[])[0]||{}).RTL&&(a|=32),n.write_shift(2,a),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function write_BrtCellIgnoreEC(t){var e=new_buf(24);return e.write_shift(4,4),e.write_shift(4,1),write_UncheckedRfX(t,e),e}function write_BrtSheetProtection(t,e){return e==null&&(e=new_buf(16*4+2)),e.write_shift(2,t.password?crypto_CreatePasswordVerifier_Method1(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function parse_BrtDVal(){}function parse_BrtDVal14(){}function parse_ws_bin(t,e,n,a,o,c,l){if(!t)return t;var u=e||{};a||(a={"!id":{}});var d={};u.dense&&(d["!data"]=[]);var m,b={s:{r:2e6,c:2e6},e:{r:0,c:0}},x=!1,_=!1,w,S,T,B,C,D,z,U,Y,X=[];u.biff=12,u["!row"]=0;var O=0,J=!1,Z=[],se={},ie=u.supbooks||o.supbooks||[[]];if(ie.sharedf=se,ie.arrayf=Z,ie.SheetNames=o.SheetNames||o.Sheets.map(function(H){return H.name}),!u.supbooks&&(u.supbooks=ie,o.Names))for(var F=0;F<o.Names.length;++F)ie[0][F+1]=o.Names[F];var k=[],y=[],A=!1;XLSBRecordEnum[16]={n:"BrtShortReal",f:parse_BrtShortReal};var I;if(recordhopper(t,function(q,j,M){if(!_)switch(M){case 148:m=q;break;case 0:w=q,u.sheetRows&&u.sheetRows<=w.r&&(_=!0),U=encode_row(B=w.r),u["!row"]=w.r,(q.hidden||q.hpt||q.level!=null)&&(q.hpt&&(q.hpx=pt2px(q.hpt)),y[q.r]=q);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(S={t:q[2]},q[2]){case"n":S.v=q[1];break;case"s":z=strs[q[1]],S.v=z.t,S.r=z.r;break;case"b":S.v=!!q[1];break;case"e":S.v=q[1],u.cellText!==!1&&(S.w=BErr[S.v]);break;case"str":S.t="s",S.v=q[1];break;case"is":S.t="s",S.v=q[1].t;break}if((T=l.CellXf[q[0].iStyleRef])&&safe_format(S,T.numFmtId,null,u,c,l),C=q[0].c==-1?C+1:q[0].c,u.dense?(d["!data"][B]||(d["!data"][B]=[]),d["!data"][B][C]=S):d[encode_col(C)+U]=S,u.cellFormula){for(J=!1,O=0;O<Z.length;++O){var E=Z[O];w.r>=E[0].s.r&&w.r<=E[0].e.r&&C>=E[0].s.c&&C<=E[0].e.c&&(S.F=encode_range(E[0]),J=!0)}!J&&q.length>3&&(S.f=q[3])}if(b.s.r>w.r&&(b.s.r=w.r),b.s.c>C&&(b.s.c=C),b.e.r<w.r&&(b.e.r=w.r),b.e.c<C&&(b.e.c=C),u.cellDates&&T&&S.t=="n"&&fmt_is_date(table_fmt[T.numFmtId])){var L=SSF_parse_date_code(S.v);L&&(S.t="d",S.v=new Date(L.y,L.m-1,L.d,L.H,L.M,L.S,L.u))}I&&(I.type=="XLDAPR"&&(S.D=!0),I=void 0);break;case 1:case 12:if(!u.sheetStubs||x)break;S={t:"z",v:void 0},C=q[0].c==-1?C+1:q[0].c,u.dense?(d["!data"][B]||(d["!data"][B]=[]),d["!data"][B][C]=S):d[encode_col(C)+U]=S,b.s.r>w.r&&(b.s.r=w.r),b.s.c>C&&(b.s.c=C),b.e.r<w.r&&(b.e.r=w.r),b.e.c<C&&(b.e.c=C),I&&(I.type=="XLDAPR"&&(S.D=!0),I=void 0);break;case 176:X.push(q);break;case 49:I=((u.xlmeta||{}).Cell||[])[q-1];break;case 494:var le=a["!id"][q.relId];for(le?(q.Target=le.Target,q.loc&&(q.Target+="#"+q.loc),q.Rel=le):q.relId==""&&(q.Target="#"+q.loc),B=q.rfx.s.r;B<=q.rfx.e.r;++B)for(C=q.rfx.s.c;C<=q.rfx.e.c;++C)u.dense?(d["!data"][B]||(d["!data"][B]=[]),d["!data"][B][C]||(d["!data"][B][C]={t:"z",v:void 0}),d["!data"][B][C].l=q):(D=encode_col(C)+encode_row(B),d[D]||(d[D]={t:"z",v:void 0}),d[D].l=q);break;case 426:if(!u.cellFormula)break;Z.push(q),Y=u.dense?d["!data"][B][C]:d[encode_col(C)+U],Y.f=stringify_formula(q[1],b,{r:w.r,c:C},ie,u),Y.F=encode_range(q[0]);break;case 427:if(!u.cellFormula)break;se[encode_cell(q[0].s)]=q[1],Y=u.dense?d["!data"][B][C]:d[encode_col(C)+U],Y.f=stringify_formula(q[1],b,{r:w.r,c:C},ie,u);break;case 60:if(!u.cellStyles)break;for(;q.e>=q.s;)k[q.e--]={width:q.w/256,hidden:!!(q.flags&1),level:q.level},A||(A=!0,find_mdw_colw(q.w/256)),process_col(k[q.e+1]);break;case 161:d["!autofilter"]={ref:encode_range(q)};break;case 476:d["!margins"]=q;break;case 147:o.Sheets[n]||(o.Sheets[n]={}),q.name&&(o.Sheets[n].CodeName=q.name),(q.above||q.left)&&(d["!outline"]={above:q.above,left:q.left});break;case 137:o.Views||(o.Views=[{}]),o.Views[0]||(o.Views[0]={}),q.RTL&&(o.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:x=!0;break;case 36:x=!1;break;case 37:x=!0;break;case 38:x=!1;break;default:if(!j.T){if(!x||u.WTF)throw new Error("Unexpected record 0x"+M.toString(16))}}},u),delete u.supbooks,delete u["!row"],!d["!ref"]&&(b.s.r<2e6||m&&(m.e.r>0||m.e.c>0||m.s.r>0||m.s.c>0))&&(d["!ref"]=encode_range(m||b)),u.sheetRows&&d["!ref"]){var P=safe_decode_range(d["!ref"]);u.sheetRows<=+P.e.r&&(P.e.r=u.sheetRows-1,P.e.r>b.e.r&&(P.e.r=b.e.r),P.e.r<P.s.r&&(P.s.r=P.e.r),P.e.c>b.e.c&&(P.e.c=b.e.c),P.e.c<P.s.c&&(P.s.c=P.e.c),d["!fullref"]=d["!ref"],d["!ref"]=encode_range(P))}return X.length>0&&(d["!merges"]=X),k.length>0&&(d["!cols"]=k),y.length>0&&(d["!rows"]=y),d}function write_ws_bin_cell(t,e,n,a,o,c,l){var u={r:n,c:a};if(e.c&&c["!comments"].push([encode_cell(u),e.c]),e.v===void 0)return!1;var d="";switch(e.t){case"b":d=e.v?"1":"0";break;case"d":e=dup(e),e.z=e.z||table_fmt[14],e.v=datenum(parseDate(e.v)),e.t="n";break;case"n":case"e":d=""+e.v;break;default:d=e.v;break}switch(u.s=get_cell_style(o.cellXfs,e,o),e.l&&c["!links"].push([encode_cell(u),e.l]),e.t){case"s":case"str":return o.bookSST?(d=get_sst_id(o.Strings,e.v==null?"":String(e.v),o.revStrings),u.t="s",u.v=d,l?write_record(t,18,write_BrtShortIsst(e,u)):write_record(t,7,write_BrtCellIsst(e,u))):(u.t="str",l?write_record(t,17,write_BrtShortSt(e,u)):write_record(t,6,write_BrtCellSt(e,u))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?l?write_record(t,13,write_BrtShortRk(e,u)):write_record(t,2,write_BrtCellRk(e,u)):l?write_record(t,16,write_BrtShortReal(e,u)):write_record(t,5,write_BrtCellReal(e,u)),!0;case"b":return u.t="b",l?write_record(t,15,write_BrtShortBool(e,u)):write_record(t,4,write_BrtCellBool(e,u)),!0;case"e":return u.t="e",l?write_record(t,14,write_BrtShortError(e,u)):write_record(t,3,write_BrtCellError(e,u)),!0}return l?write_record(t,12,write_BrtShortBlank(e,u)):write_record(t,1,write_BrtCellBlank(e,u)),!0}function write_CELLTABLE(t,e,n,a){var o=safe_decode_range(e["!ref"]||"A1"),c,l="",u=[];write_record(t,145);var d=e["!data"]!=null,m=o.e.r;e["!rows"]&&(m=Math.max(o.e.r,e["!rows"].length-1));for(var b=o.s.r;b<=m;++b){l=encode_row(b),write_row_header(t,e,o,b);var x=!1;if(b<=o.e.r)for(var _=o.s.c;_<=o.e.c;++_){b===o.s.r&&(u[_]=encode_col(_)),c=u[_]+l;var w=d?(e["!data"][b]||[])[_]:e[c];if(!w){x=!1;continue}x=write_ws_bin_cell(t,w,b,_,a,e,x)}}write_record(t,146)}function write_MERGECELLS(t,e){!e||!e["!merges"]||(write_record(t,177,write_BrtBeginMergeCells(e["!merges"].length)),e["!merges"].forEach(function(n){write_record(t,176,write_BrtMergeCell(n))}),write_record(t,178))}function write_COLINFOS(t,e){!e||!e["!cols"]||(write_record(t,390),e["!cols"].forEach(function(n,a){n&&write_record(t,60,write_BrtColInfo(a,n))}),write_record(t,391))}function write_IGNOREECS(t,e){!e||!e["!ref"]||(write_record(t,648),write_record(t,649,write_BrtCellIgnoreEC(safe_decode_range(e["!ref"]))),write_record(t,650))}function write_HLINKS(t,e,n){e["!links"].forEach(function(a){if(a[1].Target){var o=add_rels(n,-1,a[1].Target.replace(/#.*$/,""),RELS.HLINK);write_record(t,494,write_BrtHLink(a,o))}}),delete e["!links"]}function write_LEGACYDRAWING(t,e,n,a){if(e["!comments"].length>0){var o=add_rels(a,-1,"../drawings/vmlDrawing"+(n+1)+".vml",RELS.VML);write_record(t,551,write_RelID("rId"+o)),e["!legacy"]=o}}function write_AUTOFILTER(t,e,n,a){if(e["!autofilter"]){var o=e["!autofilter"],c=typeof o.ref=="string"?o.ref:encode_range(o.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var l=n.Workbook.Names,u=decode_range(c);u.s.r==u.e.r&&(u.e.r=decode_range(e["!ref"]).e.r,c=encode_range(u));for(var d=0;d<l.length;++d){var m=l[d];if(m.Name=="_xlnm._FilterDatabase"&&m.Sheet==a){m.Ref=formula_quote_sheet_name(n.SheetNames[a])+"!"+fix_range(c);break}}d==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:formula_quote_sheet_name(n.SheetNames[a])+"!"+fix_range(c)}),write_record(t,161,write_UncheckedRfX(safe_decode_range(c))),write_record(t,162)}}function write_WSVIEWS2(t,e,n){write_record(t,133),write_record(t,137,write_BrtBeginWsView(e,n)),write_record(t,138),write_record(t,134)}function write_SHEETPROTECT(t,e){e["!protect"]&&write_record(t,535,write_BrtSheetProtection(e["!protect"]))}function write_ws_bin(t,e,n,a){var o=buf_array(),c=n.SheetNames[t],l=n.Sheets[c]||{},u=c;try{n&&n.Workbook&&(u=n.Workbook.Sheets[t].CodeName||u)}catch{}var d=safe_decode_range(l["!ref"]||"A1");if(d.e.c>16383||d.e.r>1048575){if(e.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");d.e.c=Math.min(d.e.c,16383),d.e.r=Math.min(d.e.c,1048575)}return l["!links"]=[],l["!comments"]=[],write_record(o,129),(n.vbaraw||l["!outline"])&&write_record(o,147,write_BrtWsProp(u,l["!outline"])),write_record(o,148,write_BrtWsDim(d)),write_WSVIEWS2(o,l,n.Workbook),write_COLINFOS(o,l),write_CELLTABLE(o,l,t,e),write_SHEETPROTECT(o,l),write_AUTOFILTER(o,l,n,t),write_MERGECELLS(o,l),write_HLINKS(o,l,a),l["!margins"]&&write_record(o,476,write_BrtMargins(l["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&write_IGNOREECS(o,l),write_LEGACYDRAWING(o,l,t,a),write_record(o,130),o.end()}function parse_Cache(t){var e=[],n=t.match(/^<c:numCache>/),a;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(c){var l=c.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);l&&(e[+l[1]]=n?+l[2]:l[2])});var o=unescapexml((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(c){a=c.replace(/<.*?>/g,"")}),[e,o,a]}function parse_chart(t,e,n,a,o,c){var l=c||{"!type":"chart"};if(!t)return c;var u=0,d=0,m="A",b={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(x){var _=parse_Cache(x);b.s.r=b.s.c=0,b.e.c=u,m=encode_col(u),_[0].forEach(function(w,S){l["!data"]?(l["!data"][S]||(l["!data"][S]=[]),l["!data"][S][u]={t:"n",v:w,z:_[1]}):l[m+encode_row(S)]={t:"n",v:w,z:_[1]},d=S}),b.e.r<d&&(b.e.r=d),++u}),u>0&&(l["!ref"]=encode_range(b)),l}function parse_cs_xml(t,e,n,a,o){if(!t)return t;a||(a={"!id":{}});var c={"!type":"chart","!drawel":null,"!rel":""},l,u=t.match(sheetprregex);return u&&parse_ws_xml_sheetpr(u[0],c,o,n),(l=t.match(/drawing r:id="(.*?)"/))&&(c["!rel"]=l[1]),a["!id"][c["!rel"]]&&(c["!drawel"]=a["!id"][c["!rel"]]),c}function parse_BrtCsProp(t,e){t.l+=10;var n=parse_XLWideString(t);return{name:n}}function parse_cs_bin(t,e,n,a,o){if(!t)return t;a||(a={"!id":{}});var c={"!type":"chart","!drawel":null,"!rel":""},l=!1;return recordhopper(t,function(d,m,b){switch(b){case 550:c["!rel"]=d;break;case 651:o.Sheets[n]||(o.Sheets[n]={}),d.name&&(o.Sheets[n].CodeName=d.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!(m.T>0)){if(!(m.T<0)){if(!l||e.WTF)throw new Error("Unexpected record 0x"+b.toString(16))}}}},e),a["!id"][c["!rel"]]&&(c["!drawel"]=a["!id"][c["!rel"]]),c}var WBPropsDef=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],WBViewDef=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],SheetDef=[],CalcPrDef=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function push_defaults_array(t,e){for(var n=0;n!=t.length;++n)for(var a=t[n],o=0;o!=e.length;++o){var c=e[o];if(a[c[0]]==null)a[c[0]]=c[1];else switch(c[2]){case"bool":typeof a[c[0]]=="string"&&(a[c[0]]=parsexmlbool(a[c[0]]));break;case"int":typeof a[c[0]]=="string"&&(a[c[0]]=parseInt(a[c[0]],10));break}}}function push_defaults(t,e){for(var n=0;n!=e.length;++n){var a=e[n];if(t[a[0]]==null)t[a[0]]=a[1];else switch(a[2]){case"bool":typeof t[a[0]]=="string"&&(t[a[0]]=parsexmlbool(t[a[0]]));break;case"int":typeof t[a[0]]=="string"&&(t[a[0]]=parseInt(t[a[0]],10));break}}}function parse_wb_defaults(t){push_defaults(t.WBProps,WBPropsDef),push_defaults(t.CalcPr,CalcPrDef),push_defaults_array(t.WBView,WBViewDef),push_defaults_array(t.Sheets,SheetDef),_ssfopts.date1904=parsexmlbool(t.WBProps.date1904)}function safe1904(t){return!t.Workbook||!t.Workbook.WBProps?"false":parsexmlbool(t.Workbook.WBProps.date1904)?"true":"false"}var badchars=":][*?/\\".split("");function check_ws_name(t,e){if(t.length>31){if(e)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return badchars.forEach(function(a){if(t.indexOf(a)!=-1){if(!e)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}}),n}function check_wb_names(t,e,n){t.forEach(function(a,o){check_ws_name(a);for(var c=0;c<o;++c)if(a==t[c])throw new Error("Duplicate Sheet Name: "+a);if(n){var l=e&&e[o]&&e[o].CodeName||a;if(l.charCodeAt(0)==95&&l.length>22)throw new Error("Bad Code Name: Worksheet"+l)}})}function check_wb(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];check_wb_names(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)check_ws(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n);t.SheetNames.forEach(function(a,o){var c=t.Sheets[a];if(!(!c||!c["!autofilter"])){var l;t.Workbook||(t.Workbook={}),t.Workbook.Names||(t.Workbook.Names=[]),t.Workbook.Names.forEach(function(d){d.Name=="_xlnm._FilterDatabase"&&d.Sheet==o&&(l=d)});var u=formula_quote_sheet_name(a)+"!"+fix_range(c["!autofilter"].ref);l?l.Ref=u:t.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:o,Ref:u})}})}var wbnsregex=/<\w+:workbook/;function parse_wb_xml(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,o="xmlns",c={},l=0;if(t.replace(tagregex,function(d,m){var b=parsexmltag(d);switch(strip_ns(b[0])){case"<?xml":break;case"<workbook":d.match(wbnsregex)&&(o="xmlns"+d.match(/<(\w+):/)[1]),n.xmlns=b[o];break;case"</workbook>":break;case"<fileVersion":delete b[0],n.AppVersion=b;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":WBPropsDef.forEach(function(x){if(b[x[0]]!=null)switch(x[2]){case"bool":n.WBProps[x[0]]=parsexmlbool(b[x[0]]);break;case"int":n.WBProps[x[0]]=parseInt(b[x[0]],10);break;default:n.WBProps[x[0]]=b[x[0]]}}),b.codeName&&(n.WBProps.CodeName=utf8read(b.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete b[0],n.WBView.push(b);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(b.state){case"hidden":b.Hidden=1;break;case"veryHidden":b.Hidden=2;break;default:b.Hidden=0}delete b.state,b.name=unescapexml(utf8read(b.name)),delete b[0],n.Sheets.push(b);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":c={},c.Name=utf8read(b.name),b.comment&&(c.Comment=b.comment),b.localSheetId&&(c.Sheet=+b.localSheetId),parsexmlbool(b.hidden||"0")&&(c.Hidden=!0),l=m+d.length;break;case"</definedName>":c.Ref=unescapexml(utf8read(t.slice(l,m))),n.Names.push(c);break;case"<definedName/>":break;case"<calcPr":delete b[0],n.CalcPr=b;break;case"<calcPr/>":delete b[0],n.CalcPr=b;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&e.WTF)throw new Error("unrecognized "+b[0]+" in workbook")}return d}),XMLNS_main.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return parse_wb_defaults(n),n}function write_wb_xml(t){var e=[XML_HEADER];e[e.length]=writextag("workbook",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(WBPropsDef.forEach(function(u){t.Workbook.WBProps[u[0]]!=null&&t.Workbook.WBProps[u[0]]!=u[1]&&(a[u[0]]=t.Workbook.WBProps[u[0]])}),t.Workbook.WBProps.CodeName&&(a.codeName=t.Workbook.WBProps.CodeName,delete a.CodeName)),e[e.length]=writextag("workbookPr",null,a);var o=t.Workbook&&t.Workbook.Sheets||[],c=0;if(o&&o[0]&&o[0].Hidden){for(e[e.length]="<bookViews>",c=0;c!=t.SheetNames.length&&!(!o[c]||!o[c].Hidden);++c);c==t.SheetNames.length&&(c=0),e[e.length]='<workbookView firstSheet="'+c+'" activeTab="'+c+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",c=0;c!=t.SheetNames.length;++c){var l={name:escapexml(t.SheetNames[c].slice(0,31))};if(l.sheetId=""+(c+1),l["r:id"]="rId"+(c+1),o[c])switch(o[c].Hidden){case 1:l.state="hidden";break;case 2:l.state="veryHidden";break}e[e.length]=writextag("sheet",null,l)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(u){var d={name:u.Name};u.Comment&&(d.comment=u.Comment),u.Sheet!=null&&(d.localSheetId=""+u.Sheet),u.Hidden&&(d.hidden="1"),u.Ref&&(e[e.length]=writextag("definedName",escapexml(u.Ref),d))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function parse_BrtBundleSh(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=parse_RelID(t),n.name=parse_XLWideString(t),n}function write_BrtBundleSh(t,e){return e||(e=new_buf(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),write_RelID(t.strRelID,e),write_XLWideString(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function parse_BrtWbProp(t,e){var n={},a=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var o=e>8?parse_XLWideString(t):"";return o.length>0&&(n.CodeName=o),n.autoCompressPictures=!!(a&65536),n.backupFile=!!(a&64),n.checkCompatibility=!!(a&4096),n.date1904=!!(a&1),n.filterPrivacy=!!(a&8),n.hidePivotFieldList=!!(a&1024),n.promptedSolutions=!!(a&16),n.publishItems=!!(a&2048),n.refreshAllConnections=!!(a&262144),n.saveExternalLinkValues=!!(a&128),n.showBorderUnselectedTables=!!(a&4),n.showInkAnnotation=!!(a&32),n.showObjects=["all","placeholders","none"][a>>13&3],n.showPivotChartFilter=!!(a&32768),n.updateLinks=["userSet","never","always"][a>>8&3],n}function write_BrtWbProp(t,e){e||(e=new_buf(72));var n=0;return t&&(t.date1904&&(n|=1),t.filterPrivacy&&(n|=8)),e.write_shift(4,n),e.write_shift(4,0),write_XLSBCodeName(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function parse_BrtFRTArchID$(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function parse_BrtName(t,e,n){var a=t.l+e,o=t.read_shift(4);t.l+=1;var c=t.read_shift(4),l=parse_XLNameWideString(t),u=parse_XLSBNameParsedFormula(t,0,n),d=parse_XLNullableWideString(t);o&32&&(l="_xlnm."+l),t.l=a;var m={Name:l,Ptg:u,Flags:o};return c<268435455&&(m.Sheet=c),d&&(m.Comment=d),m}function write_BrtName(t,e){var n=new_buf(9),a=0,o=t.Name;XLSLblBuiltIn.indexOf(o)>-1&&(a|=32,o=o.slice(6)),n.write_shift(4,a),n.write_shift(1,0),n.write_shift(4,t.Sheet==null?4294967295:t.Sheet);var c=[n,write_XLWideString(o),write_XLSBNameParsedFormula(t.Ref,e)];if(t.Comment)c.push(write_XLNullableWideString(t.Comment));else{var l=new_buf(4);l.write_shift(4,4294967295),c.push(l)}return bconcat(c)}function parse_wb_bin(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],o=!1;e||(e={}),e.biff=12;var c=[],l=[[]];return l.SheetNames=[],l.XTI=[],XLSBRecordEnum[16]={n:"BrtFRTArchID$",f:parse_BrtFRTArchID$},recordhopper(t,function(d,m,b){switch(b){case 156:l.SheetNames.push(d.name),n.Sheets.push(d);break;case 153:n.WBProps=d;break;case 39:d.Sheet!=null&&(e.SID=d.Sheet),d.Ref=stringify_formula(d.Ptg,null,null,l,e),delete e.SID,delete d.Ptg,c.push(d);break;case 1036:break;case 357:case 358:case 355:case 667:l[0].length?l.push([b,d]):l[0]=[b,d],l[l.length-1].XTI=[];break;case 362:l.length===0&&(l[0]=[],l[0].XTI=[]),l[l.length-1].XTI=l[l.length-1].XTI.concat(d),l.XTI=l.XTI.concat(d);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(b),o=!0;break;case 36:a.pop(),o=!1;break;case 37:a.push(b),o=!0;break;case 38:a.pop(),o=!1;break;case 16:break;default:if(!m.T){if(!o||e.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+b.toString(16))}}},e),parse_wb_defaults(n),n.Names=c,n.supbooks=l,n}function write_BUNDLESHS(t,e){write_record(t,143);for(var n=0;n!=e.SheetNames.length;++n){var a=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,o={Hidden:a,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};write_record(t,156,write_BrtBundleSh(o))}write_record(t,144)}function write_BrtFileVersion(t,e){e||(e=new_buf(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return write_XLWideString("SheetJS",e),write_XLWideString(XLSX.version,e),write_XLWideString(XLSX.version,e),write_XLWideString("7262",e),e.length>e.l?e.slice(0,e.l):e}function write_BrtBookView(t,e){e||(e=new_buf(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function write_BOOKVIEWS(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,a=0,o=-1,c=-1;a<n.length;++a)!n[a]||!n[a].Hidden&&o==-1?o=a:n[a].Hidden==1&&c==-1&&(c=a);c>o||(write_record(t,135),write_record(t,158,write_BrtBookView(o)),write_record(t,136))}}function write_BRTNAMES(t,e){!e.Workbook||!e.Workbook.Names||e.Workbook.Names.forEach(function(n){try{if(n.Flags&14)return;write_record(t,39,write_BrtName(n,e))}catch{console.error("Could not serialize defined name "+JSON.stringify(n))}})}function write_SELF_EXTERNS_xlsb(t){var e=t.SheetNames.length,n=new_buf(12*e+28);n.write_shift(4,e+2),n.write_shift(4,0),n.write_shift(4,-2),n.write_shift(4,-2),n.write_shift(4,0),n.write_shift(4,-1),n.write_shift(4,-1);for(var a=0;a<e;++a)n.write_shift(4,0),n.write_shift(4,a),n.write_shift(4,a);return n}function write_EXTERNALS_xlsb(t,e){write_record(t,353),write_record(t,357),write_record(t,362,write_SELF_EXTERNS_xlsb(e)),write_record(t,354)}function write_wb_bin(t,e){var n=buf_array();return write_record(n,131),write_record(n,128,write_BrtFileVersion()),write_record(n,153,write_BrtWbProp(t.Workbook&&t.Workbook.WBProps||null)),write_BOOKVIEWS(n,t),write_BUNDLESHS(n,t),write_EXTERNALS_xlsb(n,t),(t.Workbook||{}).Names&&write_BRTNAMES(n,t),write_record(n,132),n.end()}function parse_wb(t,e,n){return e.slice(-4)===".bin"?parse_wb_bin(t,n):parse_wb_xml(t,n)}function parse_ws(t,e,n,a,o,c,l,u){return e.slice(-4)===".bin"?parse_ws_bin(t,a,n,o,c,l,u):parse_ws_xml(t,a,n,o,c,l,u)}function parse_cs(t,e,n,a,o,c,l,u){return e.slice(-4)===".bin"?parse_cs_bin(t,a,n,o,c):parse_cs_xml(t,a,n,o,c)}function parse_ms(t,e,n,a,o,c,l,u){return e.slice(-4)===".bin"?parse_ms_bin():parse_ms_xml()}function parse_ds(t,e,n,a,o,c,l,u){return e.slice(-4)===".bin"?parse_ds_bin():parse_ds_xml()}function parse_sty(t,e,n,a){return e.slice(-4)===".bin"?parse_sty_bin(t,n,a):parse_sty_xml(t,n,a)}function parse_sst(t,e,n){return e.slice(-4)===".bin"?parse_sst_bin(t,n):parse_sst_xml(t,n)}function parse_cmnt(t,e,n){return e.slice(-4)===".bin"?parse_comments_bin(t,n):parse_comments_xml(t,n)}function parse_cc(t,e,n){return e.slice(-4)===".bin"?parse_cc_bin(t):parse_cc_xml(t)}function parse_xlink(t,e,n,a){return n.slice(-4)===".bin"?parse_xlink_bin(t,e,n,a):void 0}function parse_xlmeta(t,e,n){return e.slice(-4)===".bin"?parse_xlmeta_bin(t,e,n):parse_xlmeta_xml(t,e,n)}var attregexg2=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,attregex2=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xlml_parsexmltag(t,e){var n=t.split(/\s+/),a=[];if(e||(a[0]=n[0]),n.length===1)return a;var o=t.match(attregexg2),c,l,u,d;if(o)for(d=0;d!=o.length;++d)c=o[d].match(attregex2),(l=c[1].indexOf(":"))===-1?a[c[1]]=c[2].slice(1,c[2].length-1):(c[1].slice(0,6)==="xmlns:"?u="xmlns"+c[1].slice(6):u=c[1].slice(l+1),a[u]=c[2].slice(1,c[2].length-1));return a}function xlml_parsexmltagobj(t){var e=t.split(/\s+/),n={};if(e.length===1)return n;var a=t.match(attregexg2),o,c,l,u;if(a)for(u=0;u!=a.length;++u)o=a[u].match(attregex2),(c=o[1].indexOf(":"))===-1?n[o[1]]=o[2].slice(1,o[2].length-1):(o[1].slice(0,6)==="xmlns:"?l="xmlns"+o[1].slice(6):l=o[1].slice(c+1),n[l]=o[2].slice(1,o[2].length-1));return n}var XLMLFormatMap;function xlml_format(t,e){var n=XLMLFormatMap[t]||unescapexml(t);return n==="General"?SSF_general(e):SSF_format(n,e)}function xlml_set_custprop(t,e,n,a){var o=a;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":o=parsexmlbool(a);break;case"i2":case"int":o=parseInt(a,10);break;case"r4":case"float":o=parseFloat(a);break;case"date":case"dateTime.tz":o=parseDate(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[unescapexml(e)]=o}function safe_format_xlml(t,e,n){if(t.t!=="z"){if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||BErr[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=SSF_general_num(t.v):t.w=SSF_general(t.v):t.w=xlml_format(e||"General",t.v)}catch(c){if(n.WTF)throw c}try{var a=XLMLFormatMap[e]||e||"General";if(n.cellNF&&(t.z=a),n.cellDates&&t.t=="n"&&fmt_is_date(a)){var o=SSF_parse_date_code(t.v);o&&(t.t="d",t.v=new Date(o.y,o.m-1,o.d,o.H,o.M,o.S,o.u))}}catch(c){if(n.WTF)throw c}}}function process_style_xlml(t,e,n){if(n.cellStyles&&e.Interior){var a=e.Interior;a.Pattern&&(a.patternType=XLMLPatternTypeMap[a.Pattern]||a.Pattern)}t[e.ID]=e}function parse_xlml_data(t,e,n,a,o,c,l,u,d,m){var b="General",x=a.StyleID,_={};m=m||{};var w=[],S=0;for(x===void 0&&u&&(x=u.StyleID),x===void 0&&l&&(x=l.StyleID);c[x]!==void 0&&(c[x].nf&&(b=c[x].nf),c[x].Interior&&w.push(c[x].Interior),!!c[x].Parent);)x=c[x].Parent;switch(n.Type){case"Boolean":a.t="b",a.v=parsexmlbool(t);break;case"String":a.t="s",a.r=xlml_fixstr(unescapexml(t)),a.v=t.indexOf("<")>-1?unescapexml(e||t).replace(/<.*?>/g,""):a.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),a.v=(parseDate(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=unescapexml(t):a.v<60&&(a.v=a.v-1),(!b||b=="General")&&(b="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+t),a.t||(a.t="n");break;case"Error":a.t="e",a.v=RBErr[t],m.cellText!==!1&&(a.w=t);break;default:t==""&&e==""?a.t="z":(a.t="s",a.v=xlml_fixstr(e||t));break}if(safe_format_xlml(a,b,m),m.cellFormula!==!1)if(a.Formula){var T=unescapexml(a.Formula);T.charCodeAt(0)==61&&(T=T.slice(1)),a.f=rc_to_a1(T,o),delete a.Formula,a.ArrayRange=="RC"?a.F=rc_to_a1("RC:RC",o):a.ArrayRange&&(a.F=rc_to_a1(a.ArrayRange,o),d.push([safe_decode_range(a.F),a.F]))}else for(S=0;S<d.length;++S)o.r>=d[S][0].s.r&&o.r<=d[S][0].e.r&&o.c>=d[S][0].s.c&&o.c<=d[S][0].e.c&&(a.F=d[S][1]);m.cellStyles&&(w.forEach(function(B){!_.patternType&&B.patternType&&(_.patternType=B.patternType)}),a.s=_),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function xlml_prefix_dname(t){return XLSLblBuiltIn.indexOf("_xlnm."+t)>-1?"_xlnm."+t:t}function xlml_clean_comment(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function parse_xlml_xml(t,e){var n=e||{};make_ssf();var a=debom(xlml_normalize(t));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(a=utf8read(a));var o=a.slice(0,1024).toLowerCase(),c=!1;if(o=o.replace(/".*?"/g,""),(o.indexOf(">")&1023)>Math.min(o.indexOf(",")&1023,o.indexOf(";")&1023)){var l=dup(n);return l.type="string",PRN.to_workbook(a,l)}if(o.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(xe){o.indexOf("<"+xe)>=0&&(c=!0)}),c)return html_to_workbook(a,n);XLMLFormatMap={"General Number":"General","General Date":table_fmt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":table_fmt[15],"Short Date":table_fmt[14],"Long Time":table_fmt[19],"Medium Time":table_fmt[18],"Short Time":table_fmt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:table_fmt[2],Standard:table_fmt[4],Percent:table_fmt[10],Scientific:table_fmt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var u,d=[],m,b={},x=[],_={},w="";n.dense&&(_["!data"]=[]);var S={},T={},B=xlml_parsexmltag('<Data ss:Type="String">'),C=0,D=0,z=0,U={s:{r:2e6,c:2e6},e:{r:0,c:0}},Y={},X={},O="",J=0,Z=[],se={},ie={},F=0,k=[],y=[],A={},I=[],P,H=!1,q=[],j=[],M={},E=0,L=0,le={Sheets:[],WBProps:{date1904:!1}},Q={};xlmlregex.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var ce="";u=xlmlregex.exec(a);)switch(u[3]=(ce=u[3]).toLowerCase()){case"data":if(ce=="data"){if(u[1]==="/"){if((m=d.pop())[0]!==u[3])throw new Error("Bad state: "+m.join("|"))}else u[0].charAt(u[0].length-2)!=="/"&&d.push([u[3],!0]);break}if(d[d.length-1][1])break;u[1]==="/"?parse_xlml_data(a.slice(C,u.index),O,B,d[d.length-1][0]=="comment"?A:S,{c:D,r:z},Y,I[D],T,q,n):(O="",B=xlml_parsexmltag(u[0]),C=u.index+u[0].length);break;case"cell":if(u[1]==="/")if(y.length>0&&(S.c=y),(!n.sheetRows||n.sheetRows>z)&&S.v!==void 0&&(n.dense?(_["!data"][z]||(_["!data"][z]=[]),_["!data"][z][D]=S):_[encode_col(D)+encode_row(z)]=S),S.HRef&&(S.l={Target:unescapexml(S.HRef)},S.HRefScreenTip&&(S.l.Tooltip=S.HRefScreenTip),delete S.HRef,delete S.HRefScreenTip),(S.MergeAcross||S.MergeDown)&&(E=D+(parseInt(S.MergeAcross,10)|0),L=z+(parseInt(S.MergeDown,10)|0),(E>D||L>z)&&Z.push({s:{c:D,r:z},e:{c:E,r:L}})),!n.sheetStubs)S.MergeAcross?D=E+1:++D;else if(S.MergeAcross||S.MergeDown){for(var fe=D;fe<=E;++fe)for(var oe=z;oe<=L;++oe)(fe>D||oe>z)&&(n.dense?(_["!data"][oe]||(_["!data"][oe]=[]),_["!data"][oe][fe]={t:"z"}):_[encode_col(fe)+encode_row(oe)]={t:"z"});D=E+1}else++D;else S=xlml_parsexmltagobj(u[0]),S.Index&&(D=+S.Index-1),D<U.s.c&&(U.s.c=D),D>U.e.c&&(U.e.c=D),u[0].slice(-2)==="/>"&&++D,y=[];break;case"row":u[1]==="/"||u[0].slice(-2)==="/>"?(z<U.s.r&&(U.s.r=z),z>U.e.r&&(U.e.r=z),u[0].slice(-2)==="/>"&&(T=xlml_parsexmltag(u[0]),T.Index&&(z=+T.Index-1)),D=0,++z):(T=xlml_parsexmltag(u[0]),T.Index&&(z=+T.Index-1),M={},(T.AutoFitHeight=="0"||T.Height)&&(M.hpx=parseInt(T.Height,10),M.hpt=px2pt(M.hpx),j[z]=M),T.Hidden=="1"&&(M.hidden=!0,j[z]=M));break;case"worksheet":if(u[1]==="/"){if((m=d.pop())[0]!==u[3])throw new Error("Bad state: "+m.join("|"));x.push(w),U.s.r<=U.e.r&&U.s.c<=U.e.c&&(_["!ref"]=encode_range(U),n.sheetRows&&n.sheetRows<=U.e.r&&(_["!fullref"]=_["!ref"],U.e.r=n.sheetRows-1,_["!ref"]=encode_range(U))),Z.length&&(_["!merges"]=Z),I.length>0&&(_["!cols"]=I),j.length>0&&(_["!rows"]=j),b[w]=_}else U={s:{r:2e6,c:2e6},e:{r:0,c:0}},z=D=0,d.push([u[3],!1]),m=xlml_parsexmltag(u[0]),w=unescapexml(m.Name),_={},n.dense&&(_["!data"]=[]),Z=[],q=[],j=[],Q={name:w,Hidden:0},le.Sheets.push(Q);break;case"table":if(u[1]==="/"){if((m=d.pop())[0]!==u[3])throw new Error("Bad state: "+m.join("|"))}else{if(u[0].slice(-2)=="/>")break;d.push([u[3],!1]),I=[],H=!1}break;case"style":u[1]==="/"?process_style_xlml(Y,X,n):X=xlml_parsexmltag(u[0]);break;case"numberformat":X.nf=unescapexml(xlml_parsexmltag(u[0]).Format||"General"),XLMLFormatMap[X.nf]&&(X.nf=XLMLFormatMap[X.nf]);for(var de=0;de!=392&&table_fmt[de]!=X.nf;++de);if(de==392){for(de=57;de!=392;++de)if(table_fmt[de]==null){SSF__load(X.nf,de);break}}break;case"column":if(d[d.length-1][0]!=="table"||u[1]==="/")break;if(P=xlml_parsexmltag(u[0]),P.Hidden&&(P.hidden=!0,delete P.Hidden),P.Width&&(P.wpx=parseInt(P.Width,10)),!H&&P.wpx>10){H=!0,MDW=DEF_MDW;for(var ae=0;ae<I.length;++ae)I[ae]&&process_col(I[ae])}H&&process_col(P),I[P.Index-1||I.length]=P;for(var he=0;he<+P.Span;++he)I[I.length]=dup(P);break;case"namedrange":if(u[1]==="/")break;le.Names||(le.Names=[]);var te=parsexmltag(u[0]),pe={Name:xlml_prefix_dname(te.Name),Ref:rc_to_a1(te.RefersTo.slice(1),{r:0,c:0})};le.Sheets.length>0&&(pe.Sheet=le.Sheets.length-1),le.Names.push(pe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(u[0].slice(-2)==="/>")break;u[1]==="/"?O+=a.slice(J,u.index):J=u.index+u[0].length;break;case"interior":if(!n.cellStyles)break;X.Interior=xlml_parsexmltag(u[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(u[0].slice(-2)==="/>")break;u[1]==="/"?xlml_set_prop(se,ce,a.slice(F,u.index)):F=u.index+u[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(u[1]==="/"){if((m=d.pop())[0]!==u[3])throw new Error("Bad state: "+m.join("|"))}else d.push([u[3],!1]);break;case"comment":if(u[1]==="/"){if((m=d.pop())[0]!==u[3])throw new Error("Bad state: "+m.join("|"));xlml_clean_comment(A),y.push(A)}else d.push([u[3],!1]),m=xlml_parsexmltag(u[0]),A={a:m.Author};break;case"autofilter":if(u[1]==="/"){if((m=d.pop())[0]!==u[3])throw new Error("Bad state: "+m.join("|"))}else if(u[0].charAt(u[0].length-2)!=="/"){var ee=xlml_parsexmltag(u[0]);_["!autofilter"]={ref:rc_to_a1(ee.Range).replace(/\$/g,"")},d.push([u[3],!0])}break;case"name":break;case"datavalidation":if(u[1]==="/"){if((m=d.pop())[0]!==u[3])throw new Error("Bad state: "+m.join("|"))}else u[0].charAt(u[0].length-2)!=="/"&&d.push([u[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(u[1]==="/"){if((m=d.pop())[0]!==u[3])throw new Error("Bad state: "+m.join("|"))}else u[0].charAt(u[0].length-2)!=="/"&&d.push([u[3],!0]);break;case"null":break;default:if(d.length==0&&u[3]=="document"||d.length==0&&u[3]=="uof")return parse_fods(a,n);var ge=!0;switch(d[d.length-1][0]){case"officedocumentsettings":switch(u[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ge=!1}break;case"componentoptions":switch(u[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ge=!1}break;case"excelworkbook":switch(u[3]){case"date1904":le.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ge=!1}break;case"workbookoptions":switch(u[3]){case"owcversion":break;case"height":break;case"width":break;default:ge=!1}break;case"worksheetoptions":switch(u[3]){case"visible":if(u[0].slice(-2)!=="/>")if(u[1]==="/")switch(a.slice(F,u.index)){case"SheetHidden":Q.Hidden=1;break;case"SheetVeryHidden":Q.Hidden=2;break}else F=u.index+u[0].length;break;case"header":_["!margins"]||default_margins(_["!margins"]={},"xlml"),isNaN(+parsexmltag(u[0]).Margin)||(_["!margins"].header=+parsexmltag(u[0]).Margin);break;case"footer":_["!margins"]||default_margins(_["!margins"]={},"xlml"),isNaN(+parsexmltag(u[0]).Margin)||(_["!margins"].footer=+parsexmltag(u[0]).Margin);break;case"pagemargins":var Ee=parsexmltag(u[0]);_["!margins"]||default_margins(_["!margins"]={},"xlml"),isNaN(+Ee.Top)||(_["!margins"].top=+Ee.Top),isNaN(+Ee.Left)||(_["!margins"].left=+Ee.Left),isNaN(+Ee.Right)||(_["!margins"].right=+Ee.Right),isNaN(+Ee.Bottom)||(_["!margins"].bottom=+Ee.Bottom);break;case"displayrighttoleft":le.Views||(le.Views=[]),le.Views[0]||(le.Views[0]={}),le.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":_["!outline"]||(_["!outline"]={}),_["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":_["!outline"]||(_["!outline"]={}),_["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ge=!1}break;case"pivottable":case"pivotcache":switch(u[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ge=!1}break;case"pagebreaks":switch(u[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ge=!1}break;case"autofilter":switch(u[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ge=!1}break;case"querytable":switch(u[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ge=!1}break;case"datavalidation":switch(u[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ge=!1}break;case"sorting":case"conditionalformatting":switch(u[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ge=!1}break;case"mapinfo":case"schema":case"data":switch(u[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ge=!1}break;case"smarttags":break;default:ge=!1;break}if(ge||u[3].match(/!\[CDATA/))break;if(!d[d.length-1][1])throw"Unrecognized tag: "+u[3]+"|"+d.join("|");if(d[d.length-1][0]==="customdocumentproperties"){if(u[0].slice(-2)==="/>")break;u[1]==="/"?xlml_set_custprop(ie,ce,k,a.slice(F,u.index)):(k=u,F=u.index+u[0].length);break}if(n.WTF)throw"Unrecognized tag: "+u[3]+"|"+d.join("|")}var be={};return!n.bookSheets&&!n.bookProps&&(be.Sheets=b),be.SheetNames=x,be.Workbook=le,be.SSF=dup(table_fmt),be.Props=se,be.Custprops=ie,be.bookType="xlml",be}function parse_xlml(t,e){switch(fix_read_opts(e=e||{}),e.type||"base64"){case"base64":return parse_xlml_xml(Base64_decode(t),e);case"binary":case"buffer":case"file":return parse_xlml_xml(t,e);case"array":return parse_xlml_xml(a2s(t),e)}}function write_props_xlml(t,e){var n=[];return t.Props&&n.push(xlml_write_docprops(t.Props,e)),t.Custprops&&n.push(xlml_write_custprops(t.Props,t.Custprops)),n.join("")}function write_wb_xlml(t){return(((t||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function write_sty_xlml(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(a,o){var c=[];c.push(writextag("NumberFormat",null,{"ss:Format":escapexml(table_fmt[a.numFmtId])}));var l={"ss:ID":"s"+(21+o)};n.push(writextag("Style",c.join(""),l))}),writextag("Styles",n.join(""))}function write_name_xlml(t){return writextag("NamedRange",null,{"ss:Name":t.Name.slice(0,6)=="_xlnm."?t.Name.slice(6):t.Name,"ss:RefersTo":"="+a1_to_rc(t.Ref,{r:0,c:0})})}function write_names_xlml(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],a=0;a<e.length;++a){var o=e[a];o.Sheet==null&&(o.Name.match(/^_xlfn\./)||n.push(write_name_xlml(o)))}return writextag("Names",n.join(""))}function write_ws_xlml_names(t,e,n,a){if(!t||!((a||{}).Workbook||{}).Names)return"";for(var o=a.Workbook.Names,c=[],l=0;l<o.length;++l){var u=o[l];u.Sheet==n&&(u.Name.match(/^_xlfn\./)||c.push(write_name_xlml(u)))}return c.join("")}function write_ws_xlml_wsopts(t,e,n,a){if(!t)return"";var o=[];if(t["!margins"]&&(o.push("<PageSetup>"),t["!margins"].header&&o.push(writextag("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&o.push(writextag("Footer",null,{"x:Margin":t["!margins"].footer})),o.push(writextag("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),o.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[n])if(a.Workbook.Sheets[n].Hidden)o.push(writextag("Visible",a.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var c=0;c<n&&!(a.Workbook.Sheets[c]&&!a.Workbook.Sheets[c].Hidden);++c);c==n&&o.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&o.push("<DisplayRightToLeft/>"),t["!protect"]&&(o.push(writetag("ProtectContents","True")),t["!protect"].objects&&o.push(writetag("ProtectObjects","True")),t["!protect"].scenarios&&o.push(writetag("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?o.push(writetag("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&o.push(writetag("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(l){t["!protect"][l[0]]&&o.push("<"+l[1]+"/>")})),o.length==0?"":writextag("WorksheetOptions",o.join(""),{xmlns:XLMLNS.x})}function write_ws_xlml_comment(t){return t.map(function(e){var n=xlml_unfixstr(e.t||""),a=writextag("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return writextag("Comment",a,{"ss:Author":e.a})}).join("")}function write_ws_xlml_cell(t,e,n,a,o,c,l){if(!t||t.v==null&&t.f==null)return"";var u={};if(t.f&&(u["ss:Formula"]="="+escapexml(a1_to_rc(t.f,l))),t.F&&t.F.slice(0,e.length)==e){var d=decode_cell(t.F.slice(e.length+1));u["ss:ArrayRange"]="RC:R"+(d.r==l.r?"":"["+(d.r-l.r)+"]")+"C"+(d.c==l.c?"":"["+(d.c-l.c)+"]")}if(t.l&&t.l.Target&&(u["ss:HRef"]=escapexml(t.l.Target),t.l.Tooltip&&(u["x:HRefScreenTip"]=escapexml(t.l.Tooltip))),n["!merges"])for(var m=n["!merges"],b=0;b!=m.length;++b)m[b].s.c!=l.c||m[b].s.r!=l.r||(m[b].e.c>m[b].s.c&&(u["ss:MergeAcross"]=m[b].e.c-m[b].s.c),m[b].e.r>m[b].s.r&&(u["ss:MergeDown"]=m[b].e.r-m[b].s.r));var x="",_="";switch(t.t){case"z":if(!a.sheetStubs)return"";break;case"n":x="Number",_=String(t.v);break;case"b":x="Boolean",_=t.v?"1":"0";break;case"e":x="Error",_=BErr[t.v];break;case"d":x="DateTime",_=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||table_fmt[14]);break;case"s":x="String",_=escapexlml(t.v||"");break}var w=get_cell_style(a.cellXfs,t,a);u["ss:StyleID"]="s"+(21+w),u["ss:Index"]=l.c+1;var S=t.v!=null?_:"",T=t.t=="z"?"":'<Data ss:Type="'+x+'">'+S+"</Data>";return(t.c||[]).length>0&&(T+=write_ws_xlml_comment(t.c)),writextag("Cell",T,u)}function write_ws_xlml_row(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=pt2px(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function write_ws_xlml_table(t,e,n,a){if(!t["!ref"])return"";var o=safe_decode_range(t["!ref"]),c=t["!merges"]||[],l=0,u=[];t["!cols"]&&t["!cols"].forEach(function(B,C){process_col(B);var D=!!B.width,z=col_obj_w(C,B),U={"ss:Index":C+1};D&&(U["ss:Width"]=width2px(z.width)),B.hidden&&(U["ss:Hidden"]="1"),u.push(writextag("Column",null,U))});for(var d=t["!data"]!=null,m=o.s.r;m<=o.e.r;++m){for(var b=[write_ws_xlml_row(m,(t["!rows"]||[])[m])],x=o.s.c;x<=o.e.c;++x){var _=!1;for(l=0;l!=c.length;++l)if(!(c[l].s.c>x)&&!(c[l].s.r>m)&&!(c[l].e.c<x)&&!(c[l].e.r<m)){(c[l].s.c!=x||c[l].s.r!=m)&&(_=!0);break}if(!_){var w={r:m,c:x},S=encode_col(x)+encode_row(m),T=d?(t["!data"][m]||[])[x]:t[S];b.push(write_ws_xlml_cell(T,S,t,e,n,a,w))}}b.push("</Row>"),b.length>2&&u.push(b.join(""))}return u.join("")}function write_ws_xlml(t,e,n){var a=[],o=n.SheetNames[t],c=n.Sheets[o],l=c?write_ws_xlml_names(c,e,t,n):"";return l.length>0&&a.push("<Names>"+l+"</Names>"),l=c?write_ws_xlml_table(c,e,t,n):"",l.length>0&&a.push("<Table>"+l+"</Table>"),a.push(write_ws_xlml_wsopts(c,e,t,n)),c["!autofilter"]&&a.push('<AutoFilter x:Range="'+a1_to_rc(fix_range(c["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),a.join("")}function write_xlml(t,e){e||(e={}),t.SSF||(t.SSF=dup(table_fmt)),t.SSF&&(make_ssf(),SSF_load_table(t.SSF),e.revssf=evert_num(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],get_cell_style(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(write_props_xlml(t,e)),n.push(write_wb_xlml(t)),n.push(""),n.push("");for(var a=0;a<t.SheetNames.length;++a)n.push(writextag("Worksheet",write_ws_xlml(a,e,t),{"ss:Name":escapexml(t.SheetNames[a])}));return n[2]=write_sty_xlml(t,e),n[3]=write_names_xlml(t),XML_HEADER+writextag("Workbook",n.join(""),{xmlns:XLMLNS.ss,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:ss":XLMLNS.ss,"xmlns:dt":XLMLNS.dt,"xmlns:html":XLMLNS.html})}function parse_compobj(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=parse_ClipboardFormatOrAnsiString(n),n.length-n.l<=4)return e;var a=n.read_shift(4);if(a==0||a>40||(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(a=n.read_shift(4),a!==1907505652)||(e.UnicodeClipboardFormat=parse_ClipboardFormatOrUnicodeString(n),a=n.read_shift(4),a==0||a>40))return e;n.l-=4,e.Reserved2=n.read_shift(0,"lpwstr")}var CONTINUE_RT=[60,1084,2066,2165,2175];function slurp(t,e,n,a,o){var c=a,l=[],u=n.slice(n.l,n.l+c);if(o&&o.enc&&o.enc.insitu&&u.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:o.enc.insitu(u)}l.push(u),n.l+=c;for(var d=__readUInt16LE(n,n.l),m=XLSRecordEnum[d],b=0;m!=null&&CONTINUE_RT.indexOf(d)>-1;)c=__readUInt16LE(n,n.l+2),b=n.l+4,d==2066?b+=4:(d==2165||d==2175)&&(b+=12),u=n.slice(b,n.l+4+c),l.push(u),n.l+=4+c,m=XLSRecordEnum[d=__readUInt16LE(n,n.l)];var x=bconcat(l);prep_blob(x,0);var _=0;x.lens=[];for(var w=0;w<l.length;++w)x.lens.push(_),_+=l[w].length;if(x.length<a)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+x.length+" < "+a;return e.f(x,x.length,o)}function safe_format_xf(t,e,n){if(t.t!=="z"&&t.XF){var a=0;try{a=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=table_fmt[a])}catch(c){if(e.WTF)throw c}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||BErr[t.v]:a===0||a=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=SSF_general_num(t.v):t.w=SSF_general(t.v):t.w=SSF_format(a,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(c){if(e.WTF)throw c}if(e.cellDates&&a&&t.t=="n"&&fmt_is_date(table_fmt[a]||String(a))){var o=SSF_parse_date_code(t.v);o&&(t.t="d",t.v=new Date(o.y,o.m-1,o.d,o.H,o.M,o.S,o.u))}}}function make_cell(t,e,n){return{v:t,ixfe:e,t:n}}function parse_workbook(t,e){var n={opts:{}},a={},o={};e.dense&&(o["!data"]=[]);var c={},l={},u=null,d=[],m="",b={},x,_="",w,S,T,B,C={},D=[],z,U,Y=[],X=[],O={Sheets:[],WBProps:{date1904:!1},Views:[{}]},J={},Z=function(_e){return _e<8?XLSIcv[_e]:_e<64&&X[_e-8]||XLSIcv[_e]},se=function(_e,Ie,Ne){var De=Ie.XF.data;if(!(!De||!De.patternType||!Ne||!Ne.cellStyles)){Ie.s={},Ie.s.patternType=De.patternType;var et;(et=rgb2Hex(Z(De.icvFore)))&&(Ie.s.fgColor={rgb:et}),(et=rgb2Hex(Z(De.icvBack)))&&(Ie.s.bgColor={rgb:et})}},ie=function(_e,Ie,Ne){if(!(M>1)&&!(Ne.sheetRows&&_e.r>=Ne.sheetRows)){if(Ne.cellStyles&&Ie.XF&&Ie.XF.data&&se(_e,Ie,Ne),delete Ie.ixfe,delete Ie.XF,x=_e,_=encode_cell(_e),(!l||!l.s||!l.e)&&(l={s:{r:0,c:0},e:{r:0,c:0}}),_e.r<l.s.r&&(l.s.r=_e.r),_e.c<l.s.c&&(l.s.c=_e.c),_e.r+1>l.e.r&&(l.e.r=_e.r+1),_e.c+1>l.e.c&&(l.e.c=_e.c+1),Ne.cellFormula&&Ie.f){for(var De=0;De<D.length;++De)if(!(D[De][0].s.c>_e.c||D[De][0].s.r>_e.r)&&!(D[De][0].e.c<_e.c||D[De][0].e.r<_e.r)){Ie.F=encode_range(D[De][0]),(D[De][0].s.c!=_e.c||D[De][0].s.r!=_e.r)&&delete Ie.f,Ie.f&&(Ie.f=""+stringify_formula(D[De][1],l,_e,q,F));break}}Ne.dense?(o["!data"][_e.r]||(o["!data"][_e.r]=[]),o["!data"][_e.r][_e.c]=Ie):o[_]=Ie}},F={enc:!1,sbcch:0,snames:[],sharedf:C,arrayf:D,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(F.password=e.password);var k,y=[],A=[],I=[],P=[],H=!1,q=[];q.SheetNames=F.snames,q.sharedf=F.sharedf,q.arrayf=F.arrayf,q.names=[],q.XTI=[];var j=0,M=0,E=0,L=[],le=[],Q;F.codepage=1200,set_cp(1200);for(var ce=!1;t.l<t.length-1;){var fe=t.l,oe=t.read_shift(2);if(oe===0&&j===10)break;var de=t.l===t.length?0:t.read_shift(2),ae=XLSRecordEnum[oe];if(M==0&&[9,521,1033,2057].indexOf(oe)==-1)break;if(ae&&ae.f){if(e.bookSheets&&j===133&&oe!==133)break;if(j=oe,ae.r===2||ae.r==12){var he=t.read_shift(2);if(de-=2,!F.enc&&he!==oe&&((he&255)<<8|he>>8)!==oe)throw new Error("rt mismatch: "+he+"!="+oe);ae.r==12&&(t.l+=10,de-=10)}var te={};if(oe===10?te=ae.f(t,de,F):te=slurp(oe,ae,t,de,F),M==0&&[9,521,1033,2057].indexOf(j)===-1)continue;switch(oe){case 34:n.opts.Date1904=O.WBProps.date1904=te;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(F.enc||(t.l=0),F.enc=te,!e.password)throw new Error("File is password-protected");if(te.valid==null)throw new Error("Encryption scheme unsupported");if(!te.valid)throw new Error("Password is incorrect");break;case 92:F.lastuser=te;break;case 66:var pe=Number(te);switch(pe){case 21010:pe=1200;break;case 32768:pe=1e4;break;case 32769:pe=1252;break}set_cp(F.codepage=pe),ce=!0;break;case 317:F.rrtabid=te;break;case 25:F.winlocked=te;break;case 439:n.opts.RefreshAll=te;break;case 12:n.opts.CalcCount=te;break;case 16:n.opts.CalcDelta=te;break;case 17:n.opts.CalcIter=te;break;case 13:n.opts.CalcMode=te;break;case 14:n.opts.CalcPrecision=te;break;case 95:n.opts.CalcSaveRecalc=te;break;case 15:F.CalcRefMode=te;break;case 2211:n.opts.FullCalc=te;break;case 129:te.fDialog&&(o["!type"]="dialog"),te.fBelow||((o["!outline"]||(o["!outline"]={})).above=!0),te.fRight||((o["!outline"]||(o["!outline"]={})).left=!0);break;case 224:Y.push(te);break;case 430:q.push([te]),q[q.length-1].XTI=[];break;case 35:case 547:q[q.length-1].push(te);break;case 24:case 536:Q={Name:te.Name,Ref:stringify_formula(te.rgce,l,null,q,F)},te.itab>0&&(Q.Sheet=te.itab-1),q.names.push(Q),q[0]||(q[0]=[],q[0].XTI=[]),q[q.length-1].push(te),te.Name=="_xlnm._FilterDatabase"&&te.itab>0&&te.rgce&&te.rgce[0]&&te.rgce[0][0]&&te.rgce[0][0][0]=="PtgArea3d"&&(le[te.itab-1]={ref:encode_range(te.rgce[0][0][1][2])});break;case 22:F.ExternCount=te;break;case 23:q.length==0&&(q[0]=[],q[0].XTI=[]),q[q.length-1].XTI=q[q.length-1].XTI.concat(te),q.XTI=q.XTI.concat(te);break;case 2196:if(F.biff<8)break;Q!=null&&(Q.Comment=te[1]);break;case 18:o["!protect"]=te;break;case 19:te!==0&&F.WTF&&console.error("Password verifier: "+te);break;case 133:c[te.pos]=te,F.snames.push(te.name);break;case 10:{if(--M)break;if(l.e){if(l.e.r>0&&l.e.c>0){if(l.e.r--,l.e.c--,o["!ref"]=encode_range(l),e.sheetRows&&e.sheetRows<=l.e.r){var ee=l.e.r;l.e.r=e.sheetRows-1,o["!fullref"]=o["!ref"],o["!ref"]=encode_range(l),l.e.r=ee}l.e.r++,l.e.c++}y.length>0&&(o["!merges"]=y),A.length>0&&(o["!objects"]=A),I.length>0&&(o["!cols"]=I),P.length>0&&(o["!rows"]=P),O.Sheets.push(J)}m===""?b=o:a[m]=o,o={},e.dense&&(o["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(F.biff===8&&(F.biff={9:2,521:3,1033:4}[oe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[te.BIFFVer]||8),F.biffguess=te.BIFFVer==0,te.BIFFVer==0&&te.dt==4096&&(F.biff=5,ce=!0,set_cp(F.codepage=28591)),F.biff==8&&te.BIFFVer==0&&te.dt==16&&(F.biff=2),M++)break;if(o={},e.dense&&(o["!data"]=[]),F.biff<8&&!ce&&(ce=!0,set_cp(F.codepage=e.codepage||1252)),F.biff<5||te.BIFFVer==0&&te.dt==4096){m===""&&(m="Sheet1"),l={s:{r:0,c:0},e:{r:0,c:0}};var ge={pos:t.l-de,name:m};c[ge.pos]=ge,F.snames.push(m)}else m=(c[fe]||{name:""}).name;te.dt==32&&(o["!type"]="chart"),te.dt==64&&(o["!type"]="macro"),y=[],A=[],F.arrayf=D=[],I=[],P=[],H=!1,J={Hidden:(c[fe]||{hs:0}).hs,name:m}}break;case 515:case 3:case 2:o["!type"]=="chart"&&(e.dense?(o["!data"][te.r]||[])[te.c]:o[encode_col(te.c)+encode_row(te.r)])&&++te.c,z={ixfe:te.ixfe,XF:Y[te.ixfe]||{},v:te.val,t:"n"},E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie({c:te.c,r:te.r},z,e);break;case 5:case 517:z={ixfe:te.ixfe,XF:Y[te.ixfe],v:te.val,t:te.t},E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie({c:te.c,r:te.r},z,e);break;case 638:z={ixfe:te.ixfe,XF:Y[te.ixfe],v:te.rknum,t:"n"},E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie({c:te.c,r:te.r},z,e);break;case 189:for(var Ee=te.c;Ee<=te.C;++Ee){var be=te.rkrec[Ee-te.c][0];z={ixfe:be,XF:Y[be],v:te.rkrec[Ee-te.c][1],t:"n"},E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie({c:Ee,r:te.r},z,e)}break;case 6:case 518:case 1030:{if(te.val=="String"){u=te;break}if(z=make_cell(te.val,te.cell.ixfe,te.tt),z.XF=Y[z.ixfe],e.cellFormula){var xe=te.formula;if(xe&&xe[0]&&xe[0][0]&&xe[0][0][0]=="PtgExp"){var ve=xe[0][0][1][0],Se=xe[0][0][1][1],ke=encode_cell({r:ve,c:Se});C[ke]?z.f=""+stringify_formula(te.formula,l,te.cell,q,F):z.F=((e.dense?(o["!data"][ve]||[])[Se]:o[ke])||{}).F}else z.f=""+stringify_formula(te.formula,l,te.cell,q,F)}E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie(te.cell,z,e),u=te}break;case 7:case 519:if(u)u.val=te,z=make_cell(te,u.cell.ixfe,"s"),z.XF=Y[z.ixfe],e.cellFormula&&(z.f=""+stringify_formula(u.formula,l,u.cell,q,F)),E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie(u.cell,z,e),u=null;else throw new Error("String record expects Formula");break;case 33:case 545:{D.push(te);var Ce=encode_cell(te[0].s);if(w=e.dense?(o["!data"][te[0].s.r]||[])[te[0].s.c]:o[Ce],e.cellFormula&&w){if(!u||!Ce||!w)break;w.f=""+stringify_formula(te[1],l,te[0],q,F),w.F=encode_range(te[0])}}break;case 1212:{if(!e.cellFormula)break;if(_){if(!u)break;C[encode_cell(u.cell)]=te[0],w=e.dense?(o["!data"][u.cell.r]||[])[u.cell.c]:o[encode_cell(u.cell)],(w||{}).f=""+stringify_formula(te[0],l,x,q,F)}}break;case 253:z=make_cell(d[te.isst].t,te.ixfe,"s"),d[te.isst].h&&(z.h=d[te.isst].h),z.XF=Y[z.ixfe],E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie({c:te.c,r:te.r},z,e);break;case 513:e.sheetStubs&&(z={ixfe:te.ixfe,XF:Y[te.ixfe],t:"z"},E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie({c:te.c,r:te.r},z,e));break;case 190:if(e.sheetStubs)for(var Re=te.c;Re<=te.C;++Re){var Le=te.ixfe[Re-te.c];z={ixfe:Le,XF:Y[Le],t:"z"},E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie({c:Re,r:te.r},z,e)}break;case 214:case 516:case 4:z=make_cell(te.val,te.ixfe,"s"),z.XF=Y[z.ixfe],E>0&&(z.z=L[z.ixfe>>8&63]),safe_format_xf(z,e,n.opts.Date1904),ie({c:te.c,r:te.r},z,e);break;case 0:case 512:M===1&&(l=te);break;case 252:d=te;break;case 1054:if(F.biff==4){L[E++]=te[1];for(var je=0;je<E+163&&table_fmt[je]!=te[1];++je);je>=163&&SSF__load(te[1],E+163)}else SSF__load(te[1],te[0]);break;case 30:{L[E++]=te;for(var Pe=0;Pe<E+163&&table_fmt[Pe]!=te;++Pe);Pe>=163&&SSF__load(te,E+163)}break;case 229:y=y.concat(te);break;case 93:A[te.cmo[0]]=F.lastobj=te;break;case 438:F.lastobj.TxO=te;break;case 127:F.lastobj.ImData=te;break;case 440:for(B=te[0].s.r;B<=te[0].e.r;++B)for(T=te[0].s.c;T<=te[0].e.c;++T)w=e.dense?(o["!data"][B]||[])[T]:o[encode_cell({c:T,r:B})],w&&(w.l=te[1]);break;case 2048:for(B=te[0].s.r;B<=te[0].e.r;++B)for(T=te[0].s.c;T<=te[0].e.c;++T)w=e.dense?(o["!data"][B]||[])[T]:o[encode_cell({c:T,r:B})],w&&w.l&&(w.l.Tooltip=te[1]);break;case 28:{if(F.biff<=5&&F.biff>=2)break;w=e.dense?(o["!data"][te[0].r]||[])[te[0].c]:o[encode_cell(te[0])];var me=A[te[2]];w||(e.dense?(o["!data"][te[0].r]||(o["!data"][te[0].r]=[]),w=o["!data"][te[0].r][te[0].c]={t:"z"}):w=o[encode_cell(te[0])]={t:"z"},l.e.r=Math.max(l.e.r,te[0].r),l.s.r=Math.min(l.s.r,te[0].r),l.e.c=Math.max(l.e.c,te[0].c),l.s.c=Math.min(l.s.c,te[0].c)),w.c||(w.c=[]),S={a:te[1],t:me.TxO.t},w.c.push(S)}break;case 2173:update_xfext(Y[te.ixfe],te.ext);break;case 125:{if(!F.cellStyles)break;for(;te.e>=te.s;)I[te.e--]={width:te.w/256,level:te.level||0,hidden:!!(te.flags&1)},H||(H=!0,find_mdw_colw(te.w/256)),process_col(I[te.e+1])}break;case 520:{var ne={};te.level!=null&&(P[te.r]=ne,ne.level=te.level),te.hidden&&(P[te.r]=ne,ne.hidden=!0),te.hpt&&(P[te.r]=ne,ne.hpt=te.hpt,ne.hpx=pt2px(te.hpt))}break;case 38:case 39:case 40:case 41:o["!margins"]||default_margins(o["!margins"]={}),o["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[oe]]=te;break;case 161:o["!margins"]||default_margins(o["!margins"]={}),o["!margins"].header=te.header,o["!margins"].footer=te.footer;break;case 574:te.RTL&&(O.Views[0].RTL=!0);break;case 146:X=te;break;case 2198:k=te;break;case 140:U=te;break;case 442:m?J.CodeName=te||J.name:O.WBProps.CodeName=te||"ThisWorkbook";break}}else ae||console.error("Missing Info for XLS Record 0x"+oe.toString(16)),t.l+=de}return n.SheetNames=keys(c).sort(function(ue,_e){return Number(ue)-Number(_e)}).map(function(ue){return c[ue].name}),e.bookSheets||(n.Sheets=a),!n.SheetNames.length&&b["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=b)):n.Preamble=b,n.Sheets&&le.forEach(function(ue,_e){n.Sheets[n.SheetNames[_e]]["!autofilter"]=ue}),n.Strings=d,n.SSF=dup(table_fmt),F.enc&&(n.Encryption=F.enc),k&&(n.Themes=k),n.Metadata={},U!==void 0&&(n.Metadata.Country=U),q.names.length>0&&(O.Names=q.names),n.Workbook=O,n}var PSCLSID={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function parse_xls_props(t,e,n){var a=CFB.find(t,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var o=parse_PropertySetStream(a,DocSummaryPIDDSI,PSCLSID.DSI);for(var c in o)e[c]=o[c]}catch(m){if(n.WTF)throw m}var l=CFB.find(t,"/!SummaryInformation");if(l&&l.size>0)try{var u=parse_PropertySetStream(l,SummaryPIDSI,PSCLSID.SI);for(var d in u)e[d]==null&&(e[d]=u[d])}catch(m){if(n.WTF)throw m}e.HeadingPairs&&e.TitlesOfParts&&(load_props_pairs(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function write_xls_props(t,e){var n=[],a=[],o=[],c=0,l,u=evert_key(DocSummaryPIDDSI,"n"),d=evert_key(SummaryPIDSI,"n");if(t.Props)for(l=keys(t.Props),c=0;c<l.length;++c)(Object.prototype.hasOwnProperty.call(u,l[c])?n:Object.prototype.hasOwnProperty.call(d,l[c])?a:o).push([l[c],t.Props[l[c]]]);if(t.Custprops)for(l=keys(t.Custprops),c=0;c<l.length;++c)Object.prototype.hasOwnProperty.call(t.Props||{},l[c])||(Object.prototype.hasOwnProperty.call(u,l[c])?n:Object.prototype.hasOwnProperty.call(d,l[c])?a:o).push([l[c],t.Custprops[l[c]]]);var m=[];for(c=0;c<o.length;++c)XLSPSSkip.indexOf(o[c][0])>-1||PseudoPropsPairs.indexOf(o[c][0])>-1||o[c][1]!=null&&m.push(o[c]);a.length&&CFB.utils.cfb_add(e,"/SummaryInformation",write_PropertySetStream(a,PSCLSID.SI,d,SummaryPIDSI)),(n.length||m.length)&&CFB.utils.cfb_add(e,"/DocumentSummaryInformation",write_PropertySetStream(n,PSCLSID.DSI,u,DocSummaryPIDDSI,m.length?m:null,PSCLSID.UDI))}function parse_xlscfb(t,e){e||(e={}),fix_read_opts(e),reset_cp(),e.codepage&&set_ansi(e.codepage);var n,a;if(t.FullPaths){if(CFB.find(t,"/encryption"))throw new Error("File is password-protected");n=CFB.find(t,"!CompObj"),a=CFB.find(t,"/Workbook")||CFB.find(t,"/Book")}else{switch(e.type){case"base64":t=s2a(Base64_decode(t));break;case"binary":t=s2a(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}prep_blob(t,0),a={content:t}}var o,c;if(n&&parse_compobj(n),e.bookProps&&!e.bookSheets)o={};else{var l=has_buf?"buffer":"array";if(a&&a.content)o=parse_workbook(a.content,e);else if((c=CFB.find(t,"PerfectOffice_MAIN"))&&c.content)o=WK_.to_workbook(c.content,(e.type=l,e));else if((c=CFB.find(t,"NativeContent_MAIN"))&&c.content)o=WK_.to_workbook(c.content,(e.type=l,e));else throw(c=CFB.find(t,"MN0"))&&c.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&CFB.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(o.vbaraw=make_vba_xls(t))}var u={};return t.FullPaths&&parse_xls_props(t,u,e),o.Props=o.Custprops=u,e.bookFiles&&(o.cfb=t),o}function write_xlscfb(t,e){var n=e||{},a=CFB.utils.cfb_new({root:"R"}),o="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":o="/Workbook",n.biff=8;break;case"biff5":o="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return CFB.utils.cfb_add(a,o,write_biff_buf(t,n)),n.biff==8&&(t.Props||t.Custprops)&&write_xls_props(t,a),n.biff==8&&t.vbaraw&&fill_vba_xls(a,CFB.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),a}var XLSBRecordEnum={0:{f:parse_BrtRowHdr},1:{f:parse_BrtCellBlank},2:{f:parse_BrtCellRk},3:{f:parse_BrtCellError},4:{f:parse_BrtCellBool},5:{f:parse_BrtCellReal},6:{f:parse_BrtCellSt},7:{f:parse_BrtCellIsst},8:{f:parse_BrtFmlaString},9:{f:parse_BrtFmlaNum},10:{f:parse_BrtFmlaBool},11:{f:parse_BrtFmlaError},12:{f:parse_BrtShortBlank},13:{f:parse_BrtShortRk},14:{f:parse_BrtShortError},15:{f:parse_BrtShortBool},16:{f:parse_BrtShortReal},17:{f:parse_BrtShortSt},18:{f:parse_BrtShortIsst},19:{f:parse_RichStr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:parse_BrtName},40:{},42:{},43:{f:parse_BrtFont},44:{f:parse_BrtFmt},45:{f:parse_BrtFill},46:{f:parse_BrtBorder},47:{f:parse_BrtXF},48:{},49:{f:parse_Int32LE},50:{},51:{f:parse_BrtMdb},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:parse_ColInfo},62:{f:parse_BrtCellRString},63:{f:parse_BrtCalcChainItem$},64:{f:parse_BrtDVal},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:parsenoop,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:parse_BrtBeginWsView},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:parse_BrtWsProp},148:{f:parse_BrtWsDim,p:16},151:{f:parse_BrtPane},152:{},153:{f:parse_BrtWbProp},154:{},155:{},156:{f:parse_BrtBundleSh},157:{},158:{},159:{T:1,f:parse_BrtBeginSst},160:{T:-1},161:{T:1,f:parse_UncheckedRfX},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:parse_BrtMergeCell},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:parse_BrtMdtinfo},336:{T:-1},337:{f:parse_BrtBeginEsmdb,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:parse_RelID},357:{},358:{},359:{},360:{T:1},361:{},362:{f:parse_ExternSheet},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:parse_BrtArrFmla},427:{f:parse_BrtShrFmla},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:parse_BrtMargins},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:parse_BrtWsFmtInfo},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:parse_BrtHLink},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:parse_RelID},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:parse_BrtCommentAuthor},633:{T:1},634:{T:-1},635:{T:1,f:parse_BrtBeginComment},636:{T:-1},637:{f:parse_BrtCommentText},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:parse_BrtCsProp},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:parse_BrtDVal14},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},XLSRecordEnum={6:{f:parse_Formula},10:{f:parsenoop2},12:{f:parseuint16},13:{f:parseuint16},14:{f:parsebool},15:{f:parsebool},16:{f:parse_Xnum},17:{f:parsebool},18:{f:parsebool},19:{f:parseuint16},20:{f:parse_XLHeaderFooter},21:{f:parse_XLHeaderFooter},23:{f:parse_ExternSheet},24:{f:parse_Lbl},25:{f:parsebool},26:{},27:{},28:{f:parse_Note},29:{},34:{f:parsebool},35:{f:parse_ExternName},38:{f:parse_Xnum},39:{f:parse_Xnum},40:{f:parse_Xnum},41:{f:parse_Xnum},42:{f:parsebool},43:{f:parsebool},47:{f:parse_FilePass},49:{f:parse_Font},51:{f:parseuint16},60:{},61:{f:parse_Window1},64:{f:parsebool},65:{f:parse_Pane},66:{f:parseuint16},77:{},80:{},81:{},82:{},85:{f:parseuint16},89:{},90:{},91:{},92:{f:parse_WriteAccess},93:{f:parse_Obj},94:{},95:{f:parsebool},96:{},97:{},99:{f:parsebool},125:{f:parse_ColInfo},128:{f:parse_Guts},129:{f:parse_WsBool},130:{f:parseuint16},131:{f:parsebool},132:{f:parsebool},133:{f:parse_BoundSheet8},134:{},140:{f:parse_Country},141:{f:parseuint16},144:{},146:{f:parse_Palette},151:{},152:{},153:{},154:{},155:{},156:{f:parseuint16},157:{},158:{},160:{f:parse_Scl},161:{f:parse_Setup},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:parse_MulRk},190:{f:parse_MulBlank},193:{f:parsenoop2},197:{},198:{},199:{},200:{},201:{},202:{f:parsebool},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:parseuint16},220:{},221:{f:parsebool},222:{},224:{f:parse_XF},225:{f:parse_InterfaceHdr},226:{f:parsenoop2},227:{},229:{f:parse_MergeCells},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:parse_SST},253:{f:parse_LabelSst},255:{f:parse_ExtSST},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:parseuint16a},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:parsebool},353:{f:parsenoop2},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:parse_SupBook},431:{f:parsebool},432:{},433:{},434:{},437:{},438:{f:parse_TxO},439:{f:parsebool},440:{f:parse_HLink},441:{},442:{f:parse_XLUnicodeString},443:{},444:{f:parseuint16},445:{},446:{},448:{f:parsenoop2},449:{f:parse_RecalcId,r:2},450:{f:parsenoop2},512:{f:parse_Dimensions},513:{f:parse_Blank},515:{f:parse_Number},516:{f:parse_Label},517:{f:parse_BoolErr},519:{f:parse_String},520:{f:parse_Row},523:{},545:{f:parse_Array},549:{f:parse_DefaultRowHeight},566:{},574:{f:parse_Window2},638:{f:parse_RK},659:{},1048:{},1054:{f:parse_Format},1084:{},1212:{f:parse_ShrFmla},2048:{f:parse_HLinkTooltip},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:parse_BOF},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:parsenoop2},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:parse_XFCRC,r:12},2173:{f:parse_XFExt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:parsebool,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:parse_NameCmt,r:12},2197:{},2198:{f:parse_Theme,r:12},2199:{},2200:{},2201:{},2202:{f:parse_MTRSettings,r:12},2203:{f:parsenoop2},2204:{},2205:{},2206:{},2207:{},2211:{f:parse_ForceFullCalculation},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:parseuint16},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:parse_ShtProps},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:parse_ClrtClient},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:parse_Dimensions},1:{},2:{f:parse_BIFF2INT},3:{f:parse_BIFF2NUM},4:{f:parse_BIFF2STR},5:{f:parse_BoolErr},7:{f:parse_BIFF2STRING},8:{},9:{f:parse_BOF},11:{},22:{f:parseuint16},30:{f:parse_BIFF2Format},31:{},32:{},33:{f:parse_Array},36:{},37:{f:parse_DefaultRowHeight},50:{f:parse_BIFF2FONTXTRA},62:{},52:{},67:{},68:{f:parseuint16},69:{},86:{},126:{},127:{f:parse_ImData},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:parse_RString},223:{},234:{},354:{},421:{},518:{f:parse_Formula},521:{f:parse_BOF},536:{f:parse_Lbl},547:{f:parse_ExternName},561:{},579:{},1030:{f:parse_Formula},1033:{f:parse_BOF},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function write_biff_rec(t,e,n,a){var o=e;if(!isNaN(o)){var c=a||(n||[]).length||0,l=t.next(4);l.write_shift(2,o),l.write_shift(2,c),c>0&&is_buf(n)&&t.push(n)}}function write_biff_continue(t,e,n,a){var o=a||(n||[]).length||0;if(o<=8224)return write_biff_rec(t,e,n,o);var c=e;if(!isNaN(c)){for(var l=n.parts||[],u=0,d=0,m=0;m+(l[u]||8224)<=8224;)m+=l[u]||8224,u++;var b=t.next(4);for(b.write_shift(2,c),b.write_shift(2,m),t.push(n.slice(d,d+m)),d+=m;d<o;){for(b=t.next(4),b.write_shift(2,60),m=0;m+(l[u]||8224)<=8224;)m+=l[u]||8224,u++;b.write_shift(2,m),t.push(n.slice(d,d+m)),d+=m}}}function write_BIFF2Cell(t,e,n){return t||(t=new_buf(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function write_BIFF2BERR(t,e,n,a){var o=new_buf(9);return write_BIFF2Cell(o,t,e),write_Bes(n,a||"b",o),o}function write_BIFF2LABEL(t,e,n){var a=new_buf(8+2*n.length);return write_BIFF2Cell(a,t,e),a.write_shift(1,n.length),a.write_shift(n.length,n,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function write_ws_biff2_cell(t,e,n,a){if(e.v!=null)switch(e.t){case"d":case"n":var o=e.t=="d"?datenum(parseDate(e.v)):e.v;o==(o|0)&&o>=0&&o<65536?write_biff_rec(t,2,write_BIFF2INT(n,a,o)):write_biff_rec(t,3,write_BIFF2NUM(n,a,o));return;case"b":case"e":write_biff_rec(t,5,write_BIFF2BERR(n,a,e.v,e.t));return;case"s":case"str":write_biff_rec(t,4,write_BIFF2LABEL(n,a,e.v==null?"":String(e.v).slice(0,255)));return}write_biff_rec(t,1,write_BIFF2Cell(null,n,a))}function write_ws_biff2(t,e,n,a){var o=e["!data"]!=null,c=safe_decode_range(e["!ref"]||"A1"),l="",u=[];if(c.e.c>255||c.e.r>16383){if(a.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");c.e.c=Math.min(c.e.c,255),c.e.r=Math.min(c.e.c,16383)}for(var d=[],m=c.s.c;m<=c.e.c;++m)u[m]=encode_col(m);for(var b=c.s.r;b<=c.e.r;++b)for(o&&(d=e["!data"][b]||[]),l=encode_row(b),m=c.s.c;m<=c.e.c;++m){var x=o?d[m]:e[u[m]+l];x&&write_ws_biff2_cell(t,x,b,m)}}function write_biff2_buf(t,e){for(var n=e||{},a=buf_array(),o=0,c=0;c<t.SheetNames.length;++c)t.SheetNames[c]==n.sheet&&(o=c);if(o==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return write_biff_rec(a,n.biff==4?1033:n.biff==3?521:9,write_BOF(t,16,n)),write_ws_biff2(a,t.Sheets[t.SheetNames[o]],o,n),write_biff_rec(a,10),a.end()}function write_FONTS_biff8(t,e,n){write_biff_rec(t,49,write_Font({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function write_FMTS_biff8(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)e[o]!=null&&write_biff_rec(t,1054,write_Format(o,e[o],n))})}function write_FEAT(t,e){var n=new_buf(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),write_biff_rec(t,2151,n),n=new_buf(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),write_Ref8U(safe_decode_range(e["!ref"]||"A1"),n),n.write_shift(4,4),write_biff_rec(t,2152,n)}function write_CELLXFS_biff8(t,e){for(var n=0;n<16;++n)write_biff_rec(t,224,write_XF({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(a){write_biff_rec(t,224,write_XF(a,0,e))})}function write_ws_biff8_hlinks(t,e){for(var n=0;n<e["!links"].length;++n){var a=e["!links"][n];write_biff_rec(t,440,write_HLink(a)),a[1].Tooltip&&write_biff_rec(t,2048,write_HLinkTooltip(a))}delete e["!links"]}function write_ws_cols_biff8(t,e){if(e){var n=0;e.forEach(function(a,o){++n<=256&&a&&write_biff_rec(t,125,write_ColInfo(col_obj_w(o,a),o))})}}function write_ws_biff8_cell(t,e,n,a,o){var c=16+get_cell_style(o.cellXfs,e,o);if(e.v==null&&!e.bf){write_biff_rec(t,513,write_XLSCell(n,a,c));return}if(e.bf)write_biff_rec(t,6,write_Formula(e,n,a,o,c));else switch(e.t){case"d":case"n":var l=e.t=="d"?datenum(parseDate(e.v)):e.v;write_biff_rec(t,515,write_Number(n,a,l,c));break;case"b":case"e":write_biff_rec(t,517,write_BoolErr(n,a,e.v,c,o,e.t));break;case"s":case"str":if(o.bookSST){var u=get_sst_id(o.Strings,e.v==null?"":String(e.v),o.revStrings);write_biff_rec(t,253,write_LabelSst(n,a,u,c))}else write_biff_rec(t,516,write_Label(n,a,(e.v==null?"":String(e.v)).slice(0,255),c,o));break;default:write_biff_rec(t,513,write_XLSCell(n,a,c))}}function write_ws_biff8(t,e,n){var a=buf_array(),o=n.SheetNames[t],c=n.Sheets[o]||{},l=(n||{}).Workbook||{},u=(l.Sheets||[])[t]||{},d=c["!data"]!=null,m=e.biff==8,b,x="",_=[],w=safe_decode_range(c["!ref"]||"A1"),S=m?65536:16384;if(w.e.c>255||w.e.r>=S){if(e.WTF)throw new Error("Range "+(c["!ref"]||"A1")+" exceeds format limit A1:IV16384");w.e.c=Math.min(w.e.c,255),w.e.r=Math.min(w.e.c,S-1)}write_biff_rec(a,2057,write_BOF(n,16,e)),write_biff_rec(a,13,writeuint16(1)),write_biff_rec(a,12,writeuint16(100)),write_biff_rec(a,15,writebool(!0)),write_biff_rec(a,17,writebool(!1)),write_biff_rec(a,16,write_Xnum(.001)),write_biff_rec(a,95,writebool(!0)),write_biff_rec(a,42,writebool(!1)),write_biff_rec(a,43,writebool(!1)),write_biff_rec(a,130,writeuint16(1)),write_biff_rec(a,128,write_Guts([0,0])),write_biff_rec(a,131,writebool(!1)),write_biff_rec(a,132,writebool(!1)),m&&write_ws_cols_biff8(a,c["!cols"]),write_biff_rec(a,512,write_Dimensions(w,e)),m&&(c["!links"]=[]);for(var T=[],B=[],C=w.s.c;C<=w.e.c;++C)_[C]=encode_col(C);for(var D=w.s.r;D<=w.e.r;++D)for(d&&(B=c["!data"][D]||[]),x=encode_row(D),C=w.s.c;C<=w.e.c;++C){b=_[C]+x;var z=d?B[C]:c[b];z&&(write_ws_biff8_cell(a,z,D,C,e),m&&z.l&&c["!links"].push([b,z.l]),m&&z.c&&T.push([b,z.c]))}var U=u.CodeName||u.name||o;return m&&write_biff_rec(a,574,write_Window2((l.Views||[])[0])),m&&(c["!merges"]||[]).length&&write_biff_rec(a,229,write_MergeCells(c["!merges"])),m&&write_ws_biff8_hlinks(a,c),write_biff_rec(a,442,write_XLUnicodeString(U)),m&&write_FEAT(a,c),write_biff_rec(a,10),a.end()}function write_biff8_global(t,e,n){var a=buf_array(),o=(t||{}).Workbook||{},c=o.Sheets||[],l=o.WBProps||{},u=n.biff==8,d=n.biff==5;if(write_biff_rec(a,2057,write_BOF(t,5,n)),n.bookType=="xla"&&write_biff_rec(a,135),write_biff_rec(a,225,u?writeuint16(1200):null),write_biff_rec(a,193,writezeroes(2)),d&&write_biff_rec(a,191),d&&write_biff_rec(a,192),write_biff_rec(a,226),write_biff_rec(a,92,write_WriteAccess("SheetJS",n)),write_biff_rec(a,66,writeuint16(u?1200:1252)),u&&write_biff_rec(a,353,writeuint16(0)),u&&write_biff_rec(a,448),write_biff_rec(a,317,write_RRTabId(t.SheetNames.length)),u&&t.vbaraw&&write_biff_rec(a,211),u&&t.vbaraw){var m=l.CodeName||"ThisWorkbook";write_biff_rec(a,442,write_XLUnicodeString(m))}write_biff_rec(a,156,writeuint16(17)),write_biff_rec(a,25,writebool(!1)),write_biff_rec(a,18,writebool(!1)),write_biff_rec(a,19,writeuint16(0)),u&&write_biff_rec(a,431,writebool(!1)),u&&write_biff_rec(a,444,writeuint16(0)),write_biff_rec(a,61,write_Window1()),write_biff_rec(a,64,writebool(!1)),write_biff_rec(a,141,writeuint16(0)),write_biff_rec(a,34,writebool(safe1904(t)=="true")),write_biff_rec(a,14,writebool(!0)),u&&write_biff_rec(a,439,writebool(!1)),write_biff_rec(a,218,writeuint16(0)),write_FONTS_biff8(a,t,n),write_FMTS_biff8(a,t.SSF,n),write_CELLXFS_biff8(a,n),u&&write_biff_rec(a,352,writebool(!1));var b=a.end(),x=buf_array();u&&write_biff_rec(x,140,write_Country()),u&&n.Strings&&write_biff_continue(x,252,write_SST(n.Strings)),write_biff_rec(x,10);var _=x.end(),w=buf_array(),S=0,T=0;for(T=0;T<t.SheetNames.length;++T)S+=(u?12:11)+(u?2:1)*t.SheetNames[T].length;var B=b.length+S+_.length;for(T=0;T<t.SheetNames.length;++T){var C=c[T]||{};write_biff_rec(w,133,write_BoundSheet8({pos:B,hs:C.Hidden||0,dt:0,name:t.SheetNames[T]},n)),B+=e[T].length}var D=w.end();if(S!=D.length)throw new Error("BS8 "+S+" != "+D.length);var z=[];return b.length&&z.push(b),D.length&&z.push(D),_.length&&z.push(_),bconcat(z)}function write_biff8_buf(t,e){var n=e||{},a=[];t&&!t.SSF&&(t.SSF=dup(table_fmt)),t&&t.SSF&&(make_ssf(),SSF_load_table(t.SSF),n.revssf=evert_num(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,fix_write_opts(n),n.cellXfs=[],get_cell_style(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var o=0;o<t.SheetNames.length;++o)a[a.length]=write_ws_biff8(o,n,t);return a.unshift(write_biff8_global(t,a,n)),bconcat(a)}function write_biff_buf(t,e){for(var n=0;n<=t.SheetNames.length;++n){var a=t.Sheets[t.SheetNames[n]];if(!(!a||!a["!ref"])){var o=decode_range(a["!ref"]);o.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var c=e||{};switch(c.biff||2){case 8:case 5:return write_biff8_buf(t,e);case 4:case 3:case 2:return write_biff2_buf(t,e)}throw new Error("invalid type "+c.bookType+" for BIFF")}function html_to_sheet(t,e){var n=e||{},a=n.dense!=null?n.dense:DENSE,o={};a&&(o["!data"]=[]),t=t.replace(/<!--.*?-->/g,"");var c=t.match(/<table/i);if(!c)throw new Error("Invalid HTML: could not find <table>");var l=t.match(/<\/table/i),u=c.index,d=l&&l.index||t.length,m=split_regex(t.slice(u,d),/(:?<tr[^>]*>)/i,"<tr>"),b=-1,x=0,_=0,w=0,S={s:{r:1e7,c:1e7},e:{r:0,c:0}},T=[];for(u=0;u<m.length;++u){var B=m[u].trim(),C=B.slice(0,3).toLowerCase();if(C=="<tr"){if(++b,n.sheetRows&&n.sheetRows<=b){--b;break}x=0;continue}if(!(C!="<td"&&C!="<th")){var D=B.split(/<\/t[dh]>/i);for(d=0;d<D.length;++d){var z=D[d].trim();if(z.match(/<t[dh]/i)){for(var U=z,Y=0;U.charAt(0)=="<"&&(Y=U.indexOf(">"))>-1;)U=U.slice(Y+1);for(var X=0;X<T.length;++X){var O=T[X];O.s.c==x&&O.s.r<b&&b<=O.e.r&&(x=O.e.c+1,X=-1)}var J=parsexmltag(z.slice(0,z.indexOf(">")));w=J.colspan?+J.colspan:1,((_=+J.rowspan)>1||w>1)&&T.push({s:{r:b,c:x},e:{r:b+(_||1)-1,c:x+w-1}});var Z=J.t||J["data-t"]||"";if(!U.length){x+=w;continue}if(U=htmldecode(U),S.s.r>b&&(S.s.r=b),S.e.r<b&&(S.e.r=b),S.s.c>x&&(S.s.c=x),S.e.c<x&&(S.e.c=x),!U.length){x+=w;continue}var se={t:"s",v:U};n.raw||!U.trim().length||Z=="s"||(U==="TRUE"?se={t:"b",v:!0}:U==="FALSE"?se={t:"b",v:!1}:isNaN(fuzzynum(U))?isNaN(fuzzydate(U).getDate())||(se={t:"d",v:parseDate(U)},n.cellDates||(se={t:"n",v:datenum(se.v)}),se.z=n.dateNF||table_fmt[14]):se={t:"n",v:fuzzynum(U)}),a?(o["!data"][b]||(o["!data"][b]=[]),o["!data"][b][x]=se):o[encode_cell({r:b,c:x})]=se,x+=w}}}}return o["!ref"]=encode_range(S),T.length&&(o["!merges"]=T),o}function make_html_row(t,e,n,a){for(var o=t["!merges"]||[],c=[],l={},u=t["!data"]!=null,d=e.s.c;d<=e.e.c;++d){for(var m=0,b=0,x=0;x<o.length;++x)if(!(o[x].s.r>n||o[x].s.c>d)&&!(o[x].e.r<n||o[x].e.c<d)){if(o[x].s.r<n||o[x].s.c<d){m=-1;break}m=o[x].e.r-o[x].s.r+1,b=o[x].e.c-o[x].s.c+1;break}if(!(m<0)){var _=encode_col(d)+encode_row(n),w=u?(t["!data"][n]||[])[d]:t[_],S=w&&w.v!=null&&(w.h||escapehtml(w.w||(format_cell(w),w.w)||""))||"";l={},m>1&&(l.rowspan=m),b>1&&(l.colspan=b),a.editable?S='<span contenteditable="true">'+S+"</span>":w&&(l["data-t"]=w&&w.t||"z",w.v!=null&&(l["data-v"]=w.v),w.z!=null&&(l["data-z"]=w.z),w.l&&(w.l.Target||"#").charAt(0)!="#"&&(S='<a href="'+w.l.Target+'">'+S+"</a>")),l.id=(a.id||"sjs")+"-"+_,c.push(writextag("td",S,l))}}var T="<tr>";return T+c.join("")+"</tr>"}var HTML_BEGIN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HTML_END="</body></html>";function html_to_workbook(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1){var a=sheet_to_workbook(html_to_sheet(n[0],e),e);return a.bookType="html",a}var o=book_new();return n.forEach(function(c,l){book_append_sheet(o,html_to_sheet(c,e),"Sheet"+(l+1))}),o.bookType="html",o}function make_html_preamble(t,e,n){var a=[];return a.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function sheet_to_html(t,e){var n=e||{},a=n.header!=null?n.header:HTML_BEGIN,o=n.footer!=null?n.footer:HTML_END,c=[a],l=decode_range(t["!ref"]);c.push(make_html_preamble(t,l,n));for(var u=l.s.r;u<=l.e.r;++u)c.push(make_html_row(t,l,u,n));return c.push("</table>"+o),c.join("")}function sheet_add_dom(t,e,n){var a=e.rows;if(!a)throw"Unsupported origin when "+e.tagName+" is not a TABLE";var o=n||{},c=t["!data"]!=null,l=0,u=0;if(o.origin!=null)if(typeof o.origin=="number")l=o.origin;else{var d=typeof o.origin=="string"?decode_cell(o.origin):o.origin;l=d.r,u=d.c}var m=Math.min(o.sheetRows||1e7,a.length),b={s:{r:0,c:0},e:{r:l,c:u}};if(t["!ref"]){var x=decode_range(t["!ref"]);b.s.r=Math.min(b.s.r,x.s.r),b.s.c=Math.min(b.s.c,x.s.c),b.e.r=Math.max(b.e.r,x.e.r),b.e.c=Math.max(b.e.c,x.e.c),l==-1&&(b.e.r=l=x.e.r+1)}var _=[],w=0,S=t["!rows"]||(t["!rows"]=[]),T=0,B=0,C=0,D=0,z=0,U=0;for(t["!cols"]||(t["!cols"]=[]);T<a.length&&B<m;++T){var Y=a[T];if(is_dom_element_hidden(Y)){if(o.display)continue;S[B]={hidden:!0}}var X=Y.cells;for(C=D=0;C<X.length;++C){var O=X[C];if(!(o.display&&is_dom_element_hidden(O))){var J=O.hasAttribute("data-v")?O.getAttribute("data-v"):O.hasAttribute("v")?O.getAttribute("v"):htmldecode(O.innerHTML),Z=O.getAttribute("data-z")||O.getAttribute("z");for(w=0;w<_.length;++w){var se=_[w];se.s.c==D+u&&se.s.r<B+l&&B+l<=se.e.r&&(D=se.e.c+1-u,w=-1)}U=+O.getAttribute("colspan")||1,((z=+O.getAttribute("rowspan")||1)>1||U>1)&&_.push({s:{r:B+l,c:D+u},e:{r:B+l+(z||1)-1,c:D+u+(U||1)-1}});var ie={t:"s",v:J},F=O.getAttribute("data-t")||O.getAttribute("t")||"";J!=null&&(J.length==0?ie.t=F||"z":o.raw||J.trim().length==0||F=="s"||(J==="TRUE"?ie={t:"b",v:!0}:J==="FALSE"?ie={t:"b",v:!1}:isNaN(fuzzynum(J))?isNaN(fuzzydate(J).getDate())||(ie={t:"d",v:parseDate(J)},o.cellDates||(ie={t:"n",v:datenum(ie.v)}),ie.z=o.dateNF||table_fmt[14]):ie={t:"n",v:fuzzynum(J)})),ie.z===void 0&&Z!=null&&(ie.z=Z);var k="",y=O.getElementsByTagName("A");if(y&&y.length)for(var A=0;A<y.length&&!(y[A].hasAttribute("href")&&(k=y[A].getAttribute("href"),k.charAt(0)!="#"));++A);k&&k.charAt(0)!="#"&&k.slice(0,11).toLowerCase()!="javascript:"&&(ie.l={Target:k}),c?(t["!data"][B+l]||(t["!data"][B+l]=[]),t["!data"][B+l][D+u]=ie):t[encode_cell({c:D+u,r:B+l})]=ie,b.e.c<D+u&&(b.e.c=D+u),D+=U}}++B}return _.length&&(t["!merges"]=(t["!merges"]||[]).concat(_)),b.e.r=Math.max(b.e.r,B-1+l),t["!ref"]=encode_range(b),B>=m&&(t["!fullref"]=encode_range((b.e.r=a.length-T+B-1+l,b))),t}function parse_dom_table(t,e){var n=e||{},a={};return n.dense&&(a["!data"]=[]),sheet_add_dom(a,t,e)}function table_to_book(t,e){var n=sheet_to_workbook(parse_dom_table(t,e),e);return n}function is_dom_element_hidden(t){var e="",n=get_get_computed_style_function(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function get_get_computed_style_function(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function parse_text_p(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,o){return Array(parseInt(o,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=unescapexml(e.replace(/<[^>]*>/g,""));return[n]}function parse_ods_styles(t,e,n){var a=n||{},o=xlml_normalize(t);xlmlregex.lastIndex=0,o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");for(var c,l,u="",d="",m,b=0,x=-1,_="";c=xlmlregex.exec(o);)switch(c[3]=c[3].replace(/_.*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":c[1]==="/"?(l["truncate-on-overflow"]=="false"&&(u.match(/h/)?u=u.replace(/h+/,"[$&]"):u.match(/m/)?u=u.replace(/m+/,"[$&]"):u.match(/s/)&&(u=u.replace(/s+/,"[$&]"))),a[l.name]=u,u=""):c[0].charAt(c[0].length-2)!=="/"&&(u="",l=parsexmltag(c[0],!1));break;case"boolean-style":c[1]==="/"?(a[l.name]="General",u=""):c[0].charAt(c[0].length-2)!=="/"&&(u="",l=parsexmltag(c[0],!1));break;case"boolean":u+="General";break;case"text":c[1]==="/"?(_=o.slice(x,xlmlregex.lastIndex-c[0].length),_=="%"&&l[0]=="<number:percentage-style"?u+="%":u+='"'+_.replace(/"/g,'""')+'"'):c[0].charAt(c[0].length-2)!=="/"&&(x=xlmlregex.lastIndex);break;case"day":switch(m=parsexmltag(c[0],!1),m.style){case"short":u+="d";break;case"long":u+="dd";break;default:u+="dd";break}break;case"day-of-week":switch(m=parsexmltag(c[0],!1),m.style){case"short":u+="ddd";break;case"long":u+="dddd";break;default:u+="ddd";break}break;case"era":switch(m=parsexmltag(c[0],!1),m.style){case"short":u+="ee";break;case"long":u+="eeee";break;default:u+="eeee";break}break;case"hours":switch(m=parsexmltag(c[0],!1),m.style){case"short":u+="h";break;case"long":u+="hh";break;default:u+="hh";break}break;case"minutes":switch(m=parsexmltag(c[0],!1),m.style){case"short":u+="m";break;case"long":u+="mm";break;default:u+="mm";break}break;case"month":switch(m=parsexmltag(c[0],!1),m.textual&&(u+="mm"),m.style){case"short":u+="m";break;case"long":u+="mm";break;default:u+="m";break}break;case"seconds":{switch(m=parsexmltag(c[0],!1),m.style){case"short":u+="s";break;case"long":u+="ss";break;default:u+="ss";break}m["decimal-places"]&&(u+="."+fill("0",+m["decimal-places"]))}break;case"year":switch(m=parsexmltag(c[0],!1),m.style){case"short":u+="yy";break;case"long":u+="yyyy";break;default:u+="yy";break}break;case"am-pm":u+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+c[3]);break;case"fill-character":c[1]==="/"?(_=o.slice(x,xlmlregex.lastIndex-c[0].length),u+='"'+_.replace(/"/g,'""')+'"*'):c[0].charAt(c[0].length-2)!=="/"&&(x=xlmlregex.lastIndex);break;case"scientific-number":m=parsexmltag(c[0],!1),u+="0."+fill("0",+m["min-decimal-places"]||+m["decimal-places"]||2)+fill("?",+m["decimal-places"]-+m["min-decimal-places"]||0)+"E"+(parsexmlbool(m["forced-exponent-sign"])?"+":"")+fill("0",+m["min-exponent-digits"]||2);break;case"fraction":m=parsexmltag(c[0],!1),+m["min-integer-digits"]?u+=fill("0",+m["min-integer-digits"]):u+="#",u+=" ",u+=fill("?",+m["min-numerator-digits"]||1),u+="/",+m["denominator-value"]?u+=m["denominator-value"]:u+=fill("?",+m["min-denominator-digits"]||1);break;case"currency-symbol":c[1]==="/"?u+='"'+o.slice(x,xlmlregex.lastIndex-c[0].length).replace(/"/g,'""')+'"':c[0].charAt(c[0].length-2)!=="/"?x=xlmlregex.lastIndex:u+="$";break;case"text-properties":switch(m=parsexmltag(c[0],!1),(m.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":u="[Red]"+u;break}break;case"text-content":u+="@";break;case"map":m=parsexmltag(c[0],!1),unescapexml(m.condition)=="value()>=0"?u=a[m["apply-style-name"]]+";"+u:console.error("ODS number format may be incorrect: "+m.condition);break;case"number":if(c[1]==="/")break;m=parsexmltag(c[0],!1),d="",d+=fill("0",+m["min-integer-digits"]||1),parsexmlbool(m.grouping)&&(d=commaify(fill("#",Math.max(0,4-d.length))+d)),(+m["min-decimal-places"]||+m["decimal-places"])&&(d+="."),+m["min-decimal-places"]&&(d+=fill("0",+m["min-decimal-places"]||1)),+m["decimal-places"]-(+m["min-decimal-places"]||0)&&(d+=fill("0",+m["decimal-places"]-(+m["min-decimal-places"]||0))),u+=d;break;case"embedded-text":c[1]==="/"?b==0?u+='"'+o.slice(x,xlmlregex.lastIndex-c[0].length).replace(/"/g,'""')+'"':u=u.slice(0,b)+'"'+o.slice(x,xlmlregex.lastIndex-c[0].length).replace(/"/g,'""')+'"'+u.slice(b):c[0].charAt(c[0].length-2)!=="/"&&(x=xlmlregex.lastIndex,b=-+parsexmltag(c[0],!1).position||0);break}return a}function parse_content_xml(t,e,n){var a=e||{},o=xlml_normalize(t),c=[],l,u,d,m="",b=0,x,_,w={},S=[],T={};a.dense&&(T["!data"]=[]);var B,C,D={value:""},z="",U=0,Y=[],X=-1,O=-1,J={s:{r:1e6,c:1e7},e:{r:0,c:0}},Z=0,se=n||{},ie={},F=[],k={},y=0,A=0,I=[],P=1,H=1,q=[],j={Names:[],WBProps:{}},M={},E=["",""],L=[],le={},Q="",ce=0,fe=!1,oe=!1,de=0,ae=0;for(xlmlregex.lastIndex=0,o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");B=xlmlregex.exec(o);)switch(B[3]=B[3].replace(/_.*$/,"")){case"table":case"工作表":B[1]==="/"?(J.e.c>=J.s.c&&J.e.r>=J.s.r?T["!ref"]=encode_range(J):T["!ref"]="A1:A1",a.sheetRows>0&&a.sheetRows<=J.e.r&&(T["!fullref"]=T["!ref"],J.e.r=a.sheetRows-1,T["!ref"]=encode_range(J)),F.length&&(T["!merges"]=F),I.length&&(T["!rows"]=I),x.name=x.名称||x.name,typeof JSON<"u"&&JSON.stringify(x),S.push(x.name),w[x.name]=T,oe=!1):B[0].charAt(B[0].length-2)!=="/"&&(x=parsexmltag(B[0],!1),X=O=-1,J.s.r=J.s.c=1e7,J.e.r=J.e.c=0,T={},a.dense&&(T["!data"]=[]),F=[],I=[],oe=!0);break;case"table-row-group":B[1]==="/"?--Z:++Z;break;case"table-row":case"行":if(B[1]==="/"){X+=P,P=1;break}if(_=parsexmltag(B[0],!1),_.行号?X=_.行号-1:X==-1&&(X=0),P=+_["number-rows-repeated"]||1,P<10)for(de=0;de<P;++de)Z>0&&(I[X+de]={level:Z});O=-1;break;case"covered-table-cell":B[1]!=="/"&&++O,a.sheetStubs&&(a.dense?(T["!data"][X]||(T["!data"][X]=[]),T["!data"][X][O]={t:"z"}):T[encode_cell({r:X,c:O})]={t:"z"}),z="",Y=[];break;case"table-cell":case"数据":if(B[0].charAt(B[0].length-2)==="/")++O,D=parsexmltag(B[0],!1),H=parseInt(D["number-columns-repeated"]||"1",10),C={t:"z",v:null},D.formula&&a.cellFormula!=!1&&(C.f=ods_to_csf_formula(unescapexml(D.formula))),D["style-name"]&&ie[D["style-name"]]&&(C.z=ie[D["style-name"]]),(D.数据类型||D["value-type"])=="string"&&(C.t="s",C.v=unescapexml(D["string-value"]||""),a.dense?(T["!data"][X]||(T["!data"][X]=[]),T["!data"][X][O]=C):T[encode_col(O)+encode_row(X)]=C),O+=H-1;else if(B[1]!=="/"){++O,z="",U=0,Y=[],H=1;var he=P?X+P-1:X;if(O>J.e.c&&(J.e.c=O),O<J.s.c&&(J.s.c=O),X<J.s.r&&(J.s.r=X),he>J.e.r&&(J.e.r=he),D=parsexmltag(B[0],!1),L=[],le={},C={t:D.数据类型||D["value-type"],v:null},D["style-name"]&&ie[D["style-name"]]&&(C.z=ie[D["style-name"]]),a.cellFormula)if(D.formula&&(D.formula=unescapexml(D.formula)),D["number-matrix-columns-spanned"]&&D["number-matrix-rows-spanned"]&&(y=parseInt(D["number-matrix-rows-spanned"],10)||0,A=parseInt(D["number-matrix-columns-spanned"],10)||0,k={s:{r:X,c:O},e:{r:X+y-1,c:O+A-1}},C.F=encode_range(k),q.push([k,C.F])),D.formula)C.f=ods_to_csf_formula(D.formula);else for(de=0;de<q.length;++de)X>=q[de][0].s.r&&X<=q[de][0].e.r&&O>=q[de][0].s.c&&O<=q[de][0].e.c&&(C.F=q[de][1]);switch((D["number-columns-spanned"]||D["number-rows-spanned"])&&(y=parseInt(D["number-rows-spanned"],10)||0,A=parseInt(D["number-columns-spanned"],10)||0,k={s:{r:X,c:O},e:{r:X+y-1,c:O+A-1}},F.push(k)),D["number-columns-repeated"]&&(H=parseInt(D["number-columns-repeated"],10)),C.t){case"boolean":C.t="b",C.v=parsexmlbool(D["boolean-value"])||+D["boolean-value"]>=1;break;case"float":C.t="n",C.v=parseFloat(D.value);break;case"percentage":C.t="n",C.v=parseFloat(D.value);break;case"currency":C.t="n",C.v=parseFloat(D.value);break;case"date":C.t="d",C.v=parseDate(D["date-value"]),a.cellDates||(C.t="n",C.v=datenum(C.v,j.WBProps.date1904)-ae),C.z||(C.z="m/d/yy");break;case"time":C.t="n",C.v=parse_isodur(D["time-value"])/86400,a.cellDates&&(C.t="d",C.v=numdate(C.v)),C.z||(C.z="HH:MM:SS");break;case"number":C.t="n",C.v=parseFloat(D.数据数值);break;default:if(C.t==="string"||C.t==="text"||!C.t)C.t="s",D["string-value"]!=null&&(z=unescapexml(D["string-value"]),Y=[]);else throw new Error("Unsupported value type "+C.t)}}else{if(fe=!1,C.t==="s"&&(C.v=z||"",Y.length&&(C.R=Y),fe=U==0),M.Target&&(C.l=M),L.length>0&&(C.c=L,L=[]),z&&a.cellText!==!1&&(C.w=z),fe&&(C.t="z",delete C.v),(!fe||a.sheetStubs)&&!(a.sheetRows&&a.sheetRows<=X))for(var te=0;te<P;++te){if(H=parseInt(D["number-columns-repeated"]||"1",10),a.dense)for(T["!data"][X+te]||(T["!data"][X+te]=[]),T["!data"][X+te][O]=te==0?C:dup(C);--H>0;)T["!data"][X+te][O+H]=dup(C);else for(T[encode_cell({r:X+te,c:O})]=C;--H>0;)T[encode_cell({r:X+te,c:O+H})]=dup(C);J.e.c<=O&&(J.e.c=O)}H=parseInt(D["number-columns-repeated"]||"1",10),O+=H-1,H=0,C={},z="",Y=[]}M={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(B[1]==="/"){if((l=c.pop())[0]!==B[3])throw"Bad state: "+l}else B[0].charAt(B[0].length-2)!=="/"&&c.push([B[3],!0]);break;case"annotation":if(B[1]==="/"){if((l=c.pop())[0]!==B[3])throw"Bad state: "+l;le.t=z,Y.length&&(le.R=Y),le.a=Q,L.push(le)}else B[0].charAt(B[0].length-2)!=="/"&&c.push([B[3],!1]);Q="",ce=0,z="",U=0,Y=[];break;case"creator":B[1]==="/"?Q=o.slice(ce,B.index):ce=B.index+B[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(B[1]==="/"){if((l=c.pop())[0]!==B[3])throw"Bad state: "+l}else B[0].charAt(B[0].length-2)!=="/"&&c.push([B[3],!1]);z="",U=0,Y=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(B[1]==="/"){var pe=xlmlregex.lastIndex;parse_ods_styles(o.slice(d,xlmlregex.lastIndex),e,se),xlmlregex.lastIndex=pe}else B[0].charAt(B[0].length-2)!=="/"&&(d=xlmlregex.lastIndex-B[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var ee=parsexmltag(B[0],!1);ee.family=="table-cell"&&se[ee["data-style-name"]]&&(ie[ee.name]=se[ee["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(B[0].slice(-2)==="/>")break;if(B[1]==="/")switch(c[c.length-1][0]){case"number-style":case"date-style":case"time-style":m+=o.slice(b,B.index);break}else b=B.index+B[0].length;break;case"named-range":u=parsexmltag(B[0],!1),E=ods_to_csf_3D(u["cell-range-address"]);var ge={Name:u.name,Ref:E[0]+"!"+E[1]};oe&&(ge.Sheet=S.length),j.Names.push(ge);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(u=parsexmltag(B[0],!1),u["date-value"]){case"1904-01-01":j.WBProps.date1904=!0;case"1900-01-01":ae=0}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(c[c.length-1][0])>-1)break;if(B[1]==="/"&&(!D||!D["string-value"])){var Ee=parse_text_p(o.slice(U,B.index));z=(z.length>0?z+`
`:"")+Ee[0]}else parsexmltag(B[0],!1),U=B.index+B[0].length;break;case"s":break;case"database-range":if(B[1]==="/")break;try{E=ods_to_csf_3D(parsexmltag(B[0])["target-range-address"]),w[E[0]]["!autofilter"]={ref:E[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(B[1]!=="/"){if(M=parsexmltag(B[0],!1),!M.href)break;M.Target=unescapexml(M.href),delete M.href,M.Target.charAt(0)=="#"&&M.Target.indexOf(".")>-1?(E=ods_to_csf_3D(M.Target.slice(1)),M.Target="#"+E[0]+"!"+E[1]):M.Target.match(/^\.\.[\\\/]/)&&(M.Target=M.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(B[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(a.WTF)throw new Error(B)}}var be={Sheets:w,SheetNames:S,Workbook:j};return a.bookSheets&&delete be.Sheets,be}function parse_ods(t,e){e=e||{},safegetzipfile(t,"META-INF/manifest.xml")&&parse_manifest(getzipdata(t,"META-INF/manifest.xml"),e);var n=getzipstr(t,"styles.xml"),a=n&&parse_ods_styles(utf8read(n)),o=getzipstr(t,"content.xml");if(!o)throw new Error("Missing content.xml in ODS / UOF file");var c=parse_content_xml(utf8read(o),e,a);return safegetzipfile(t,"meta.xml")&&(c.Props=parse_core_props(getzipdata(t,"meta.xml"))),c.bookType="ods",c}function parse_fods(t,e){var n=parse_content_xml(t,e);return n.bookType="fods",n}var write_styles_ods=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return XML_HEADER+e}}();function write_number_format_ods(t,e){var n="number",a="",o={"style:name":e},c="",l=0;t=t.replace(/"[$]"/g,"$");e:{if(t.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+t),t=t.slice(0,t.indexOf(";"))),t=="@"){n="text",a="<number:text-content/>";break e}if(t.indexOf(/\$/)>-1&&(n="currency"),t[l]=='"'){for(c="";t[++l]!='"'||t[++l]=='"';)c+=t[l];--l,t[l+1]=="*"?(l++,a+="<number:fill-character>"+escapexml(c.replace(/""/g,'"'))+"</number:fill-character>"):a+="<number:text>"+escapexml(c.replace(/""/g,'"'))+"</number:text>",t=t.slice(l+1),l=0}var u=t.match(/# (\?+)\/(\?+)/);if(u){a+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":u[1].length,"number:max-denominator-value":Math.max(+u[1].replace(/./g,"9"),+u[2].replace(/./g,"9"))});break e}if(u=t.match(/# (\?+)\/(\d+)/)){a+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":u[1].length,"number:denominator-value":+u[2]});break e}if(u=t.match(/(\d+)(|\.\d+)%/)){n="percentage",a+=writextag("number:number",null,{"number:decimal-places":u[2]&&u.length-1||0,"number:min-decimal-places":u[2]&&u.length-1||0,"number:min-integer-digits":u[1].length})+"<number:text>%</number:text>";break e}var d=!1;if(["y","m","d"].indexOf(t[0])>-1){n="date";t:for(;l<t.length;++l)switch(c=t[l].toLowerCase()){case"h":case"s":d=!0,--l;break t;case"m":r:for(var m=l+1;m<t.length;++m)switch(t[m]){case"y":case"d":break r;case"h":case"s":d=!0,--l;break t}case"y":case"d":for(;(t[++l]||"").toLowerCase()==c[0];)c+=c[0];switch(--l,c){case"y":case"yy":a+="<number:year/>";break;case"yyy":case"yyyy":a+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":a+='<number:month number:style="'+(c.length%2?"short":"long")+'" number:textual="'+(c.length>=3?"true":"false")+'"/>';break;case"d":case"dd":a+='<number:day number:style="'+(c.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":a+='<number:day-of-week number:style="'+(c.length%2?"short":"long")+'"/>';break}break;case'"':for(;t[++l]!='"'||t[++l]=='"';)c+=t[l];--l,a+="<number:text>"+escapexml(c.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":a+="<number:text>"+escapexml(c)+"</number:text>";break;default:console.error("unrecognized character "+c+" in ODF format "+t)}if(!d)break e;t=t.slice(l+1),l=0}if(t.match(/^\[?[hms]/)){for(n=="number"&&(n="time"),t.match(/\[/)&&(t=t.replace(/[\[\]]/g,""),o["number:truncate-on-overflow"]="false");l<t.length;++l)switch(c=t[l].toLowerCase()){case"h":case"m":case"s":for(;(t[++l]||"").toLowerCase()==c[0];)c+=c[0];switch(--l,c){case"h":case"hh":a+='<number:hours number:style="'+(c.length%2?"short":"long")+'"/>';break;case"m":case"mm":a+='<number:minutes number:style="'+(c.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(t[l+1]==".")do c+=t[l+1],++l;while(t[l+1]=="0");a+='<number:seconds number:style="'+(c.match("ss")?"long":"short")+'"'+(c.match(/\./)?' number:decimal-places="'+(c.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;t[++l]!='"'||t[++l]=='"';)c+=t[l];--l,a+="<number:text>"+escapexml(c.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":a+="<number:text>"+escapexml(c)+"</number:text>";break;case"a":if(t.slice(l,l+3).toLowerCase()=="a/p"){a+="<number:am-pm/>",l+=2;break}if(t.slice(l,l+5).toLowerCase()=="am/pm"){a+="<number:am-pm/>",l+=4;break}default:console.error("unrecognized character "+c+" in ODF format "+t)}break e}if(t.indexOf(/\$/)>-1&&(n="currency"),t[0]=="$"&&(a+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',t=t.slice(1),l=0),l=0,t[l]=='"'){for(;t[++l]!='"'||t[++l]=='"';)c+=t[l];--l,t[l+1]=="*"?(l++,a+="<number:fill-character>"+escapexml(c.replace(/""/g,'"'))+"</number:fill-character>"):a+="<number:text>"+escapexml(c.replace(/""/g,'"'))+"</number:text>",t=t.slice(l+1),l=0}var b=t.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!b||!b[0])console.error("Could not find numeric part of "+t);else{var x=b[1].replace(/,/g,"");a+="<number:"+(b[3]?"scientific-":"")+'number number:min-integer-digits="'+(x.indexOf("0")==-1?"0":x.length-x.indexOf("0"))+'"'+(b[0].indexOf(",")>-1?' number:grouping="true"':"")+(b[2]&&' number:decimal-places="'+(b[2].length-1)+'"'||' number:decimal-places="0"')+(b[3]&&b[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(b[3]?' number:min-exponent-digits="'+b[3].match(/0+/)[0].length+'"':"")+"></number:"+(b[3]?"scientific-":"")+"number>",l=b.index+b[0].length}if(t[l]=='"'){for(c="";t[++l]!='"'||t[++l]=='"';)c+=t[l];--l,a+="<number:text>"+escapexml(c.replace(/""/g,'"'))+"</number:text>"}}return a?writextag("number:"+n+"-style",a,o):(console.error("Could not generate ODS number format for |"+t+"|"),"")}function write_names_ods(t,e,n){var a=t.filter(function(o){return o.Sheet==(n==-1?null:n)});return a.length?`      <table:named-expressions>
`+a.map(function(o){var c=csf_to_ods_3D(o.Ref);return"        "+writextag("table:named-range",null,{"table:name":o.Name,"table:cell-range-address":c,"table:base-cell-address":c.replace(/[\.]?[^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var write_content_ods=function(){var t=function(c){return escapexml(c).replace(/  +/g,function(l){return'<text:s text:c="'+l.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,a=function(c,l,u,d,m){var b=[];b.push('      <table:table table:name="'+escapexml(l.SheetNames[u])+`" table:style-name="ta1">
`);var x=0,_=0,w=decode_range(c["!ref"]||"A1"),S=c["!merges"]||[],T=0,B=c["!data"]!=null;if(c["!cols"])for(_=0;_<=w.e.c;++_)b.push("        <table:table-column"+(c["!cols"][_]?' table:style-name="co'+c["!cols"][_].ods+'"':"")+`></table:table-column>
`);var C="",D=c["!rows"]||[];for(x=0;x<w.s.r;++x)C=D[x]?' table:style-name="ro'+D[x].ods+'"':"",b.push("        <table:table-row"+C+`></table:table-row>
`);for(;x<=w.e.r;++x){for(C=D[x]?' table:style-name="ro'+D[x].ods+'"':"",b.push("        <table:table-row"+C+`>
`),_=0;_<w.s.c;++_)b.push(e);for(;_<=w.e.c;++_){var z=!1,U={},Y="";for(T=0;T!=S.length;++T)if(!(S[T].s.c>_)&&!(S[T].s.r>x)&&!(S[T].e.c<_)&&!(S[T].e.r<x)){(S[T].s.c!=_||S[T].s.r!=x)&&(z=!0),U["table:number-columns-spanned"]=S[T].e.c-S[T].s.c+1,U["table:number-rows-spanned"]=S[T].e.r-S[T].s.r+1;break}if(z){b.push(n);continue}var X=encode_cell({r:x,c:_}),O=B?(c["!data"][x]||[])[_]:c[X];if(O&&O.f&&(U["table:formula"]=escapexml(csf_to_ods_formula(O.f)),O.F&&O.F.slice(0,X.length)==X)){var J=decode_range(O.F);U["table:number-matrix-columns-spanned"]=J.e.c-J.s.c+1,U["table:number-matrix-rows-spanned"]=J.e.r-J.s.r+1}if(!O){b.push(e);continue}switch(O.t){case"b":Y=O.v?"TRUE":"FALSE",U["office:value-type"]="boolean",U["office:boolean-value"]=O.v?"true":"false";break;case"n":Y=O.w||String(O.v||0),U["office:value-type"]="float",U["office:value"]=O.v||0;break;case"s":case"str":Y=O.v==null?"":O.v,U["office:value-type"]="string";break;case"d":Y=O.w||parseDate(O.v).toISOString(),U["office:value-type"]="date",U["office:date-value"]=parseDate(O.v).toISOString(),U["table:style-name"]="ce1";break;default:b.push(e);continue}var Z=t(Y);if(O.l&&O.l.Target){var se=O.l.Target;se=se.charAt(0)=="#"?"#"+csf_to_ods_3D(se.slice(1)):se,se.charAt(0)!="#"&&!se.match(/^\w+:/)&&(se="../"+se),Z=writextag("text:a",Z,{"xlink:href":se.replace(/&/g,"&amp;")})}m[O.z]&&(U["table:style-name"]="ce"+m[O.z].slice(1)),b.push("          "+writextag("table:table-cell",writextag("text:p",Z,{}),U)+`
`)}b.push(`        </table:table-row>
`)}return(l.Workbook||{}).Names&&b.push(write_names_ods(l.Workbook.Names,l.SheetNames,u)),b.push(`      </table:table>
`),b.join("")},o=function(c,l){c.push(` <office:automatic-styles>
`);var u=0;l.SheetNames.map(function(x){return l.Sheets[x]}).forEach(function(x){if(x&&x["!cols"]){for(var _=0;_<x["!cols"].length;++_)if(x["!cols"][_]){var w=x["!cols"][_];if(w.width==null&&w.wpx==null&&w.wch==null)continue;process_col(w),w.ods=u;var S=x["!cols"][_].wpx+"px";c.push('  <style:style style:name="co'+u+`" style:family="table-column">
`),c.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+S+`"/>
`),c.push(`  </style:style>
`),++u}}});var d=0;l.SheetNames.map(function(x){return l.Sheets[x]}).forEach(function(x){if(x&&x["!rows"]){for(var _=0;_<x["!rows"].length;++_)if(x["!rows"][_]){x["!rows"][_].ods=d;var w=x["!rows"][_].hpx+"px";c.push('  <style:style style:name="ro'+d+`" style:family="table-row">
`),c.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+w+`"/>
`),c.push(`  </style:style>
`),++d}}}),c.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),c.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),c.push(`  </style:style>
`),c.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),c.push(`   <number:month number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:day number:style="long"/>
`),c.push(`   <number:text>/</number:text>
`),c.push(`   <number:year/>
`),c.push(`  </number:date-style>
`);var m={},b=69;return l.SheetNames.map(function(x){return l.Sheets[x]}).forEach(function(x){if(x)for(var _=x["!data"]!=null,w=decode_range(x["!ref"]),S=0;S<=w.e.r;++S)for(var T=0;T<=w.e.c;++T){var B=_?(x["!data"][S]||[])[T]:x[encode_cell({r:S,c:T})];if(!(!B||!B.z||B.z.toLowerCase()=="general")&&!m[B.z]){var C=write_number_format_ods(B.z,"N"+b);C&&(m[B.z]="N"+b,++b,c.push(C+`
`))}}}),c.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),keys(m).forEach(function(x){c.push('<style:style style:name="ce'+m[x].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+m[x]+`"/>
`)}),c.push(` </office:automatic-styles>
`),m};return function(l,u){var d=[XML_HEADER],m=wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),b=wxt_helper({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});u.bookType=="fods"?(d.push("<office:document"+m+b+`>
`),d.push(write_meta_ods().replace(/<office:document-meta.*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):d.push("<office:document-content"+m+`>
`);var x=o(d,l);d.push(`  <office:body>
`),d.push(`    <office:spreadsheet>
`),((l.Workbook||{}).WBProps||{}).date1904&&d.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var _=0;_!=l.SheetNames.length;++_)d.push(a(l.Sheets[l.SheetNames[_]],l,_,u,x));return(l.Workbook||{}).Names&&d.push(write_names_ods(l.Workbook.Names,l.SheetNames,-1)),d.push(`    </office:spreadsheet>
`),d.push(`  </office:body>
`),u.bookType=="fods"?d.push("</office:document>"):d.push("</office:document-content>"),d.join("")}}();function write_ods(t,e){if(e.bookType=="fods")return write_content_ods(t,e);var n=zip_new(),a="",o=[],c=[];return a="mimetype",zip_add_file(n,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",zip_add_file(n,a,write_content_ods(t,e)),o.push([a,"text/xml"]),c.push([a,"ContentFile"]),a="styles.xml",zip_add_file(n,a,write_styles_ods(t,e)),o.push([a,"text/xml"]),c.push([a,"StylesFile"]),a="meta.xml",zip_add_file(n,a,XML_HEADER+write_meta_ods()),o.push([a,"text/xml"]),c.push([a,"MetadataFile"]),a="manifest.rdf",zip_add_file(n,a,write_rdf(c)),o.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",zip_add_file(n,a,write_manifest(o)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var subarray=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function u8_to_dataview(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function u8str(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):utf8read(a2s(t))}function stru8(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):s2a(utf8write(t))}function u8concat(t){for(var e=0,n=0;n<t.length;++n)e+=t[n].length;var a=new Uint8Array(e),o=0;for(n=0;n<t.length;++n){var c=t[n],l=c.length;if(l<250)for(var u=0;u<l;++u)a[o++]=c[u];else a.set(c,o),o+=l}return a}function popcnt(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function readDecimal128LE(t,e){for(var n=(t[e+15]&127)<<7|t[e+14]>>1,a=t[e+14]&1,o=e+13;o>=e;--o)a=a*256+t[o];return(t[e+15]&128?-a:a)*Math.pow(10,n-6176)}function writeDecimal128LE(t,e,n){var a=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-16,o=n/Math.pow(10,a-6176);t[e+15]|=a>>7,t[e+14]|=(a&127)<<1;for(var c=0;o>=1;++c,o/=256)t[e+c]=o&255;t[e+15]|=n>=0?0:128}function parse_varint49(t,e){var n=e.l,a=t[n]&127;e:if(t[n++]>=128&&(a|=(t[n]&127)<<7,t[n++]<128||(a|=(t[n]&127)<<14,t[n++]<128)||(a|=(t[n]&127)<<21,t[n++]<128)||(a+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(a+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(a+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e.l=n,a}function write_varint49(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e[subarray](0,n)}function parse_packed_varints(t){for(var e={l:0},n=[];e.l<t.length;)n.push(parse_varint49(t,e));return n}function write_packed_varints(t){return u8concat(t.map(function(e){return write_varint49(e)}))}function varint_to_i32(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function parse_shallow(t){for(var e=[],n={l:0};n.l<t.length;){var a=n.l,o=parse_varint49(t,n),c=o&7;o=o/8|0;var l,u=n.l;switch(c){case 0:{for(;t[u++]>=128;);l=t[subarray](n.l,u),n.l=u}break;case 1:l=t[subarray](u,u+8),n.l=u+8;break;case 2:{var d=parse_varint49(t,n);l=t[subarray](n.l,n.l+d),n.l+=d}break;case 5:l=t[subarray](u,u+4),n.l=u+4;break;default:throw new Error("PB Type ".concat(c," for Field ").concat(o," at offset ").concat(a))}var m={data:l,type:c};e[o]==null&&(e[o]=[]),e[o].push(m)}return e}function write_shallow(t){var e=[];return t.forEach(function(n,a){a!=0&&n.forEach(function(o){o.data&&(e.push(write_varint49(a*8+o.type)),o.type==2&&e.push(write_varint49(o.data.length)),e.push(o.data))})}),u8concat(e)}function mappa(t,e){return t?.map(function(n){return e(n.data)})||[]}function parse_iwa_file(t){for(var e,n=[],a={l:0};a.l<t.length;){var o=parse_varint49(t,a),c=parse_shallow(t[subarray](a.l,a.l+o));a.l+=o;var l={id:varint_to_i32(c[1][0].data),messages:[]};c[2].forEach(function(u){var d=parse_shallow(u.data),m=varint_to_i32(d[3][0].data);l.messages.push({meta:d,data:t[subarray](a.l,a.l+m)}),a.l+=m}),(e=c[3])!=null&&e[0]&&(l.merge=varint_to_i32(c[3][0].data)>>>0>0),n.push(l)}return n}function write_iwa_file(t){var e=[];return t.forEach(function(n){var a=[[],[{data:write_varint49(n.id),type:0}],[]];n.merge!=null&&(a[3]=[{data:write_varint49(+!!n.merge),type:0}]);var o=[];n.messages.forEach(function(l){o.push(l.data),l.meta[3]=[{type:0,data:write_varint49(l.data.length)}],a[2].push({data:write_shallow(l.meta),type:2})});var c=write_shallow(a);e.push(write_varint49(c.length)),e.push(c),o.forEach(function(l){return e.push(l)})}),u8concat(e)}function parse_snappy_chunk(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n={l:0},a=parse_varint49(e,n),o=[],c=n.l;c<e.length;){var l=e[c]&3;if(l==0){var u=e[c++]>>2;if(u<60)++u;else{var d=u-59;u=e[c],d>1&&(u|=e[c+1]<<8),d>2&&(u|=e[c+2]<<16),d>3&&(u|=e[c+3]<<24),u>>>=0,u++,c+=d}o.push(e[subarray](c,c+u)),c+=u;continue}else{var m=0,b=0;if(l==1?(b=(e[c]>>2&7)+4,m=(e[c++]&224)<<3,m|=e[c++]):(b=(e[c++]>>2)+1,l==2?(m=e[c]|e[c+1]<<8,c+=2):(m=(e[c]|e[c+1]<<8|e[c+2]<<16|e[c+3]<<24)>>>0,c+=4)),m==0)throw new Error("Invalid offset 0");for(var x=o.length-1,_=m;x>=0&&_>=o[x].length;)_-=o[x].length,--x;if(x<0)if(_==0)_=o[x=0].length;else throw new Error("Invalid offset beyond length");if(b<_)o.push(o[x][subarray](o[x].length-_,o[x].length-_+b));else{for(_>0&&(o.push(o[x][subarray](o[x].length-_)),b-=_),++x;b>=o[x].length;)o.push(o[x]),b-=o[x].length,++x;b&&o.push(o[x][subarray](0,b))}o.length>25&&(o=[u8concat(o)])}}for(var w=0,S=0;S<o.length;++S)w+=o[S].length;if(w!=a)throw new Error("Unexpected length: ".concat(w," != ").concat(a));return o}function decompress_iwa_file(t){Array.isArray(t)&&(t=new Uint8Array(t));for(var e=[],n=0;n<t.length;){var a=t[n++],o=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push.apply(e,parse_snappy_chunk(a,t[subarray](n,n+o))),n+=o}if(n!==t.length)throw new Error("data is not a valid framed stream!");return e.length==1?e[0]:u8concat(e)}function compress_iwa_file(t){for(var e=[],n=0;n<t.length;){var a=Math.min(t.length-n,268435455),o=new Uint8Array(4);e.push(o);var c=write_varint49(a),l=c.length;e.push(c),a<=60?(l++,e.push(new Uint8Array([a-1<<2]))):a<=256?(l+=2,e.push(new Uint8Array([240,a-1&255]))):a<=65536?(l+=3,e.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(l+=4,e.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(l+=5,e.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),e.push(t[subarray](n,n+a)),l+=a,o[0]=0,o[1]=l&255,o[2]=l>>8&255,o[3]=l>>16&255,n+=a}return u8concat(e)}var numbers_lut_new=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[]}};function numbers_format_cell(t,e,n,a,o){var c,l,u,d,m=e&255,b=e>>8,x=b>=5?o:a;e:if(n&(b>4?8:4)&&t.t=="n"&&m==7){var _=(c=x[7])!=null&&c[0]?varint_to_i32(x[7][0].data):-1;if(_==-1)break e;var w=(l=x[15])!=null&&l[0]?varint_to_i32(x[15][0].data):-1,S=(u=x[16])!=null&&u[0]?varint_to_i32(x[16][0].data):-1,T=(d=x[40])!=null&&d[0]?varint_to_i32(x[40][0].data):-1,B=t.v,C=B;t:if(T){if(B==0){w=S=2;break t}B>=604800?w=1:B>=86400?w=2:B>=3600?w=4:B>=60?w=8:B>=1?w=16:w=32,Math.floor(B)!=B?S=32:B%60?S=16:B%3600?S=8:B%86400?S=4:B%604800&&(S=2),S<w&&(S=w)}if(w==-1||S==-1)break e;var D=[],z=[];w==1&&(C=B/604800,S==1?z.push('d"d"'):(C|=0,B-=604800*C),D.push(C+(_==2?" week"+(C==1?"":"s"):_==1?"w":""))),w<=2&&S>=2&&(C=B/86400,S>2&&(C|=0,B-=86400*C),z.push('d"d"'),D.push(C+(_==2?" day"+(C==1?"":"s"):_==1?"d":""))),w<=4&&S>=4&&(C=B/3600,S>4&&(C|=0,B-=3600*C),z.push((w>=4?"[h]":"h")+'"h"'),D.push(C+(_==2?" hour"+(C==1?"":"s"):_==1?"h":""))),w<=8&&S>=8&&(C=B/60,S>8&&(C|=0,B-=60*C),z.push((w>=8?"[m]":"m")+'"m"'),_==0?D.push((w==8&&S==8||C>=10?"":"0")+C):D.push(C+(_==2?" minute"+(C==1?"":"s"):_==1?"m":""))),w<=16&&S>=16&&(C=B,S>16&&(C|=0,B-=C),z.push((w>=16?"[s]":"s")+'"s"'),_==0?D.push((S==16&&w==16||C>=10?"":"0")+C):D.push(C+(_==2?" second"+(C==1?"":"s"):_==1?"s":""))),S>=32&&(C=Math.round(1e3*B),w<32&&z.push('.000"ms"'),_==0?D.push((C>=100?"":C>=10?"0":"00")+C):D.push(C+(_==2?" millisecond"+(C==1?"":"s"):_==1?"ms":""))),t.w=D.join(_==0?":":" "),t.z=z.join(_==0?'":"':" "),_==0&&(t.w=t.w.replace(/:(\d\d\d)$/,".$1"))}}function parse_old_storage(t,e,n){var a=u8_to_dataview(t),o=a.getUint32(4,!0),c=-1,l=-1,u=-1,d=NaN,m=new Date(2001,0,1),b=n>1?12:8;o&2&&(u=a.getUint32(b,!0),b+=4),b+=popcnt(o&(n>1?3468:396))*4,o&512&&(c=a.getUint32(b,!0),b+=4),b+=popcnt(o&(n>1?12288:4096))*4,o&16&&(l=a.getUint32(b,!0),b+=4),o&32&&(d=a.getFloat64(b,!0),b+=8),o&64&&(m.setTime(m.getTime()+a.getFloat64(b,!0)*1e3),b+=8),n>1&&(o=a.getUint32(8,!0)>>>16,o&255&&(u==-1&&(u=a.getUint32(b,!0)),b+=4));var x,_=t[n>=4?1:2];switch(_){case 0:return;case 2:x={t:"n",v:d};break;case 3:x={t:"s",v:e.sst[l]};break;case 5:x={t:"d",v:m};break;case 6:x={t:"b",v:d>0};break;case 7:x={t:"n",v:d};break;case 8:x={t:"e",v:0};break;case 9:if(c>-1)x={t:"s",v:e.rsst[c]};else throw new Error("Unsupported cell type ".concat(t[subarray](0,4)));break;default:throw new Error("Unsupported cell type ".concat(t[subarray](0,4)))}return u>-1&&numbers_format_cell(x,_|n<<8,o,e.ofmt[u],e.nfmt[u]),_==7&&(x.v/=86400),x}function parse_new_storage(t,e){var n=u8_to_dataview(t);n.getUint32(4,!0);var a=n.getUint32(8,!0),o=12,c=-1,l=-1,u=-1,d=NaN,m=NaN,b=new Date(2001,0,1);a&1&&(d=readDecimal128LE(t,o),o+=16),a&2&&(m=n.getFloat64(o,!0),o+=8),a&4&&(b.setTime(b.getTime()+n.getFloat64(o,!0)*1e3),o+=8),a&8&&(l=n.getUint32(o,!0),o+=4),a&16&&(c=n.getUint32(o,!0),o+=4);var x,_=t[1];switch(_){case 0:return;case 2:x={t:"n",v:d};break;case 3:x={t:"s",v:e.sst[l]};break;case 5:x={t:"d",v:b};break;case 6:x={t:"b",v:m>0};break;case 7:x={t:"n",v:m};break;case 8:x={t:"e",v:0};break;case 9:x={t:"s",v:e.rsst[c]};break;case 10:x={t:"n",v:d};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t[subarray](0,4)))}return o+=popcnt(a&8160)*4,a&516096&&(u==-1&&(u=n.getUint32(o,!0)),o+=4),u>-1&&numbers_format_cell(x,_|5<<8,a>>13,e.ofmt[u],e.nfmt[u]),_==7&&(x.v/=86400),x}function write_new_storage(t,e){var n=new Uint8Array(32),a=u8_to_dataview(n),o=12,c=0;switch(n[0]=5,t.t){case"n":n[1]=2,writeDecimal128LE(n,o,t.v),c|=1,o+=16;break;case"b":n[1]=6,a.setFloat64(o,t.v?1:0,!0),c|=2,o+=8;break;case"s":var l=t.v==null?"":String(t.v),u=e.indexOf(l);u==-1&&(e[u=e.length]=l),n[1]=3,a.setUint32(o,u,!0),c|=8,o+=4;break;default:throw"unsupported cell type "+t.t}return a.setUint32(8,c,!0),n[subarray](0,o)}function write_old_storage(t,e){var n=new Uint8Array(32),a=u8_to_dataview(n),o=12,c=0;switch(n[0]=4,t.t){case"n":n[2]=2,a.setFloat64(o,t.v,!0),c|=32,o+=8;break;case"b":n[2]=6,a.setFloat64(o,t.v?1:0,!0),c|=32,o+=8;break;case"s":var l=t.v==null?"":String(t.v),u=e.indexOf(l);u==-1&&(e[u=e.length]=l),n[2]=3,a.setUint32(o,u,!0),c|=16,o+=4;break;default:throw"unsupported cell type "+t.t}return a.setUint32(8,c,!0),n[subarray](0,o)}function parse_cell_storage(t,e){switch(t[0]){case 0:case 1:case 2:case 3:case 4:return parse_old_storage(t,e,t[0]);case 5:return parse_new_storage(t,e);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function parse_TSP_Reference(t){var e=parse_shallow(t);return varint_to_i32(e[1][0].data)}function write_TSP_Reference(t){return write_shallow([[],[{type:0,data:write_varint49(t)}]])}function numbers_add_oref(t,e){var n,a=(n=t.messages[0].meta[5])!=null&&n[0]?parse_packed_varints(t.messages[0].meta[5][0].data):[],o=a.indexOf(e);o==-1&&(a.push(e),t.messages[0].meta[5]=[{type:2,data:write_packed_varints(a)}])}function numbers_del_oref(t,e){var n,a=(n=t.messages[0].meta[5])!=null&&n[0]?parse_packed_varints(t.messages[0].meta[5][0].data):[];t.messages[0].meta[5]=[{type:2,data:write_packed_varints(a.filter(function(o){return o!=e}))}]}function parse_TST_TableDataList(t,e){var n=parse_shallow(e.data),a=varint_to_i32(n[1][0].data),o=n[3],c=[];return(o||[]).forEach(function(l){var u=parse_shallow(l.data);if(u[1]){var d=varint_to_i32(u[1][0].data)>>>0;switch(a){case 1:c[d]=u8str(u[3][0].data);break;case 8:{var m=t[parse_TSP_Reference(u[9][0].data)][0],b=parse_shallow(m.data),x=t[parse_TSP_Reference(b[1][0].data)][0],_=varint_to_i32(x.meta[1][0].data);if(_!=2001)throw new Error("2000 unexpected reference to ".concat(_));var w=parse_shallow(x.data);c[d]=w[3].map(function(S){return u8str(S.data)}).join("")}break;case 2:c[d]=parse_shallow(u[6][0].data);break;default:throw a}}}),c}function parse_TST_TileRowInfo(t,e){var n,a,o,c,l,u,d,m,b,x,_,w,S,T,B=parse_shallow(t),C=varint_to_i32(B[1][0].data)>>>0,D=varint_to_i32(B[2][0].data)>>>0,z=((a=(n=B[8])==null?void 0:n[0])==null?void 0:a.data)&&varint_to_i32(B[8][0].data)>0||!1,U,Y;if((c=(o=B[7])==null?void 0:o[0])!=null&&c.data&&e!=0)U=(u=(l=B[7])==null?void 0:l[0])==null?void 0:u.data,Y=(m=(d=B[6])==null?void 0:d[0])==null?void 0:m.data;else if((x=(b=B[4])==null?void 0:b[0])!=null&&x.data&&e!=1)U=(w=(_=B[4])==null?void 0:_[0])==null?void 0:w.data,Y=(T=(S=B[3])==null?void 0:S[0])==null?void 0:T.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var X=z?4:1,O=u8_to_dataview(U),J=[],Z=0;Z<U.length/2;++Z){var se=O.getUint16(Z*2,!0);se<65535&&J.push([Z,se])}if(J.length!=D)throw"Expected ".concat(D," cells, found ").concat(J.length);var ie=[];for(Z=0;Z<J.length-1;++Z)ie[J[Z][0]]=Y[subarray](J[Z][1]*X,J[Z+1][1]*X);return J.length>=1&&(ie[J[J.length-1][0]]=Y[subarray](J[J.length-1][1]*X)),{R:C,cells:ie}}function parse_TST_Tile(t,e){var n,a=parse_shallow(e.data),o=-1;(n=a?.[7])!=null&&n[0]&&(varint_to_i32(a[7][0].data)>>>0?o=1:o=0);var c=mappa(a[5],function(l){return parse_TST_TileRowInfo(l,o)});return{nrows:varint_to_i32(a[4][0].data)>>>0,data:c.reduce(function(l,u){return l[u.R]||(l[u.R]=[]),u.cells.forEach(function(d,m){if(l[u.R][m])throw new Error("Duplicate cell r=".concat(u.R," c=").concat(m));l[u.R][m]=d}),l},[])}}function parse_TST_TableModelArchive(t,e,n){var a,o,c,l,u,d,m=parse_shallow(e.data),b={s:{r:0,c:0},e:{r:0,c:0}};if(b.e.r=(varint_to_i32(m[6][0].data)>>>0)-1,b.e.r<0)throw new Error("Invalid row varint ".concat(m[6][0].data));if(b.e.c=(varint_to_i32(m[7][0].data)>>>0)-1,b.e.c<0)throw new Error("Invalid col varint ".concat(m[7][0].data));n["!ref"]=encode_range(b);var x=n["!data"]!=null,_=n,w=parse_shallow(m[4][0].data),S=numbers_lut_new();(a=w[4])!=null&&a[0]&&(S.sst=parse_TST_TableDataList(t,t[parse_TSP_Reference(w[4][0].data)][0])),(o=w[11])!=null&&o[0]&&(S.ofmt=parse_TST_TableDataList(t,t[parse_TSP_Reference(w[11][0].data)][0])),(c=w[17])!=null&&c[0]&&(S.rsst=parse_TST_TableDataList(t,t[parse_TSP_Reference(w[17][0].data)][0])),(l=w[22])!=null&&l[0]&&(S.nfmt=parse_TST_TableDataList(t,t[parse_TSP_Reference(w[22][0].data)][0]));var T=parse_shallow(w[3][0].data),B=0;if(T[1].forEach(function(z){var U=parse_shallow(z.data),Y=t[parse_TSP_Reference(U[2][0].data)][0],X=varint_to_i32(Y.meta[1][0].data);if(X!=6002)throw new Error("6001 unexpected reference to ".concat(X));var O=parse_TST_Tile(t,Y);O.data.forEach(function(J,Z){J.forEach(function(se,ie){var F=parse_cell_storage(se,S);F&&(x?(_["!data"][B+Z]||(_["!data"][B+Z]=[]),_["!data"][B+Z][ie]=F):n[encode_col(ie)+encode_row(B+Z)]=F)})}),B+=O.nrows}),(u=w[13])!=null&&u[0]){var C=t[parse_TSP_Reference(w[13][0].data)][0],D=varint_to_i32(C.meta[1][0].data);if(D!=6144)throw new Error("Expected merge type 6144, found ".concat(D));n["!merges"]=(d=parse_shallow(C.data))==null?void 0:d[1].map(function(z){var U=parse_shallow(z.data),Y=u8_to_dataview(parse_shallow(U[1][0].data)[1][0].data),X=u8_to_dataview(parse_shallow(U[2][0].data)[1][0].data);return{s:{r:Y.getUint16(0,!0),c:Y.getUint16(2,!0)},e:{r:Y.getUint16(0,!0)+X.getUint16(0,!0)-1,c:Y.getUint16(2,!0)+X.getUint16(2,!0)-1}}})}}function parse_TST_TableInfoArchive(t,e,n){var a=parse_shallow(e.data),o={"!ref":"A1"};n?.dense&&(o["!data"]=[]);var c=t[parse_TSP_Reference(a[2][0].data)],l=varint_to_i32(c[0].meta[1][0].data);if(l!=6001)throw new Error("6000 unexpected reference to ".concat(l));return parse_TST_TableModelArchive(t,c[0],o),o}function parse_TN_SheetArchive(t,e,n){var a,o=parse_shallow(e.data),c={name:(a=o[1])!=null&&a[0]?u8str(o[1][0].data):"",sheets:[]},l=mappa(o[2],parse_TSP_Reference);return l.forEach(function(u){t[u].forEach(function(d){var m=varint_to_i32(d.meta[1][0].data);m==6e3&&c.sheets.push(parse_TST_TableInfoArchive(t,d,n))})}),c}function parse_TN_DocumentArchive(t,e,n){var a,o=book_new(),c=parse_shallow(e.data);if((a=c[2])!=null&&a[0])throw new Error("Keynote presentations are not supported");var l=mappa(c[1],parse_TSP_Reference);if(l.forEach(function(u){t[u].forEach(function(d){var m=varint_to_i32(d.meta[1][0].data);if(m==2){var b=parse_TN_SheetArchive(t,d,n);b.sheets.forEach(function(x,_){book_append_sheet(o,x,_==0?b.name:b.name+"_"+_,!0)})}})}),o.SheetNames.length==0)throw new Error("Empty NUMBERS file");return o.bookType="numbers",o}function parse_numbers_iwa(t,e){var n,a,o,c,l,u,d,m={},b=[];if(t.FullPaths.forEach(function(_){if(_.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(_){if(_.name.match(/\.iwa$/)&&_.content[0]==0){var w;try{w=decompress_iwa_file(_.content)}catch(T){return console.log("?? "+_.content.length+" "+(T.message||T))}var S;try{S=parse_iwa_file(w)}catch(T){return console.log("## "+(T.message||T))}S.forEach(function(T){m[T.id]=T.messages,b.push(T.id)})}}),!b.length)throw new Error("File has no messages");if((o=(a=(n=m?.[1])==null?void 0:n[0].meta)==null?void 0:a[1])!=null&&o[0].data&&varint_to_i32(m[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var x=((d=(u=(l=(c=m?.[1])==null?void 0:c[0])==null?void 0:l.meta)==null?void 0:u[1])==null?void 0:d[0].data)&&varint_to_i32(m[1][0].meta[1][0].data)==1&&m[1][0];if(x||b.forEach(function(_){m[_].forEach(function(w){var S=varint_to_i32(w.meta[1][0].data)>>>0;if(S==1)if(!x)x=w;else throw new Error("Document has multiple roots")})}),!x)throw new Error("Cannot find Document root");return parse_TN_DocumentArchive(m,x,e)}function write_TST_TileRowInfo(t,e,n){var a,o,c=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(1)}]];if(!((a=c[6])!=null&&a[0])||!((o=c[7])!=null&&o[0]))throw"Mutation only works on post-BNC storages!";var l=0;if(c[7][0].data.length<2*t.length){var u=new Uint8Array(2*t.length);u.set(c[7][0].data),c[7][0].data=u}if(c[4][0].data.length<2*t.length){var d=new Uint8Array(2*t.length);d.set(c[4][0].data),c[4][0].data=d}for(var m=u8_to_dataview(c[7][0].data),b=0,x=[],_=u8_to_dataview(c[4][0].data),w=0,S=[],T=n?4:1,B=0;B<t.length;++B){if(t[B]==null){m.setUint16(B*2,65535,!0),_.setUint16(B*2,65535);continue}m.setUint16(B*2,b/T,!0),_.setUint16(B*2,w/T,!0);var C,D;switch(typeof t[B]){case"string":C=write_new_storage({t:"s",v:t[B]},e),D=write_old_storage({t:"s",v:t[B]},e);break;case"number":C=write_new_storage({t:"n",v:t[B]},e),D=write_old_storage({t:"n",v:t[B]},e);break;case"boolean":C=write_new_storage({t:"b",v:t[B]},e),D=write_old_storage({t:"b",v:t[B]},e);break;default:if(t[B]instanceof Date){C=write_new_storage({t:"s",v:t[B].toISOString()},e),D=write_old_storage({t:"s",v:t[B].toISOString()},e);break}throw new Error("Unsupported value "+t[B])}x.push(C),b+=C.length,S.push(D),w+=D.length,++l}for(c[2][0].data=write_varint49(l),c[5][0].data=write_varint49(5);B<c[7][0].data.length/2;++B)m.setUint16(B*2,65535,!0),_.setUint16(B*2,65535,!0);return c[6][0].data=u8concat(x),c[3][0].data=u8concat(S),c[8]=[{type:0,data:write_varint49(n?1:0)}],c}function write_iwam(t,e){return{meta:[[],[{type:0,data:write_varint49(t)}]],data:e}}function get_unique_msgid(t,e){e.last||(e.last=927262);for(var n=e.last;n<2e6;++n)if(!e[n])return e[e.last=n]=t,n;throw new Error("Too many messages")}function build_numbers_deps(t){var e={},n=[];return t.FileIndex.map(function(a,o){return[a,t.FullPaths[o]]}).forEach(function(a){var o=a[0],c=a[1];o.type==2&&o.name.match(/\.iwa/)&&o.content[0]==0&&parse_iwa_file(decompress_iwa_file(o.content)).forEach(function(l){n.push(l.id),e[l.id]={deps:[],location:c,type:varint_to_i32(l.messages[0].meta[1][0].data)}})}),t.FileIndex.forEach(function(a){a.name.match(/\.iwa/)&&a.content[0]==0&&parse_iwa_file(decompress_iwa_file(a.content)).forEach(function(o){o.messages.forEach(function(c){[5,6].forEach(function(l){c.meta[l]&&c.meta[l].forEach(function(u){e[o.id].deps.push(varint_to_i32(u.data))})})})})}),e}function write_numbers_iwa(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=CFB.read(e.numbers,{type:"base64"}),a=build_numbers_deps(n),o=numbers_iwa_find(n,a,1);if(o==null)throw"Could not find message ".concat(1," in Numbers template");var c=mappa(parse_shallow(o.messages[0].data)[1],parse_TSP_Reference);if(c.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return t.SheetNames.forEach(function(l,u){u>=1&&(numbers_add_ws(n,a,u+1),o=numbers_iwa_find(n,a,1),c=mappa(parse_shallow(o.messages[0].data)[1],parse_TSP_Reference)),write_numbers_ws(n,a,t.Sheets[l],l,u,c[u])}),n}function numbers_iwa_doit(t,e,n,a){var o=CFB.find(t,e[n].location);if(!o)throw"Could not find ".concat(e[n].location," in Numbers template");var c=parse_iwa_file(decompress_iwa_file(o.content)),l=c.find(function(u){return u.id==n});a(l,c),o.content=compress_iwa_file(write_iwa_file(c)),o.size=o.content.length}function numbers_iwa_find(t,e,n){var a=CFB.find(t,e[n].location);if(!a)throw"Could not find ".concat(e[n].location," in Numbers template");var o=parse_iwa_file(decompress_iwa_file(a.content)),c=o.find(function(l){return l.id==n});return c}function numbers_add_ws(t,e,n){var a=-1,o=-1,c={};numbers_iwa_doit(t,e,1,function(m,b){var x=parse_shallow(m.messages[0].data);a=parse_TSP_Reference(parse_shallow(m.messages[0].data)[1][0].data),o=get_unique_msgid({deps:[1],location:e[a].location,type:2},e),c[a]=o,numbers_add_oref(m,o),x[1].push({type:2,data:write_TSP_Reference(o)});var _=numbers_iwa_find(t,e,a);_.id=o,e[1].location==e[o].location?b.push(_):numbers_iwa_doit(t,e,o,function(w,S){return S.push(_)}),m.messages[0].data=write_shallow(x)});var l=-1;numbers_iwa_doit(t,e,o,function(m,b){for(var x=parse_shallow(m.messages[0].data),_=3;_<=69;++_)delete x[_];var w=mappa(x[2],parse_TSP_Reference);w.forEach(function(B){return numbers_del_oref(m,B)}),l=get_unique_msgid({deps:[o],location:e[w[0]].location,type:e[w[0]].type},e),numbers_add_oref(m,l),c[w[0]]=l,x[2]=[{type:2,data:write_TSP_Reference(l)}];var S=numbers_iwa_find(t,e,w[0]);if(S.id=l,e[w[0]].location==e[o].location)b.push(S);else{var T=e[o].location;T=T.replace(/^Root Entry\//,""),T=T.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,e,2,function(B){var C=parse_shallow(B.messages[0].data),D=C[3].findIndex(function(U){var Y,X,O=parse_shallow(U.data);return(Y=O[3])!=null&&Y[0]?u8str(O[3][0].data)==T:!!((X=O[2])!=null&&X[0]&&u8str(O[2][0].data)==T)}),z=parse_shallow(C[3][D].data);z[6]||(z[6]=[]),z[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(l)}]])}),C[3][D].data=write_shallow(z),B.messages[0].data=write_shallow(C)}),numbers_iwa_doit(t,e,l,function(B,C){return C.push(S)})}m.messages[0].data=write_shallow(x)});var u=-1;numbers_iwa_doit(t,e,l,function(m,b){for(var x=parse_shallow(m.messages[0].data),_=parse_shallow(x[1][0].data),w=3;w<=69;++w)delete _[w];var S=parse_TSP_Reference(_[2][0].data);_[2][0].data=write_TSP_Reference(c[S]),x[1][0].data=write_shallow(_);var T=parse_TSP_Reference(x[2][0].data);numbers_del_oref(m,T),u=get_unique_msgid({deps:[l],location:e[T].location,type:e[T].type},e),numbers_add_oref(m,u),c[T]=u,x[2][0].data=write_TSP_Reference(u);var B=numbers_iwa_find(t,e,T);B.id=u,e[l].location==e[u].location?b.push(B):numbers_iwa_doit(t,e,u,function(C,D){return D.push(B)}),m.messages[0].data=write_shallow(x)});var d=e[u].location;d=d.replace(/^Root Entry\//,""),d=d.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,e,u,function(m,b){var x,_,w=parse_shallow(m.messages[0].data),S=u8str(w[1][0].data),T=S.replace(/-[A-Z0-9]*/,"-".concat(n.toString(16).padStart(4,"0")));if(w[1][0].data=stru8(T),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(X){return delete w[X]}),w[45]){var B=parse_shallow(w[45][0].data),C=parse_TSP_Reference(B[1][0].data);numbers_del_oref(m,C),delete w[45]}if(w[70]){var D=parse_shallow(w[70][0].data);(x=D[2])==null||x.forEach(function(X){var O=parse_shallow(X.data);[2,3].map(function(J){return O[J][0]}).forEach(function(J){var Z=parse_shallow(J.data);if(Z[8]){var se=parse_TSP_Reference(Z[8][0].data);numbers_del_oref(m,se)}})}),delete w[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(X){if(w[X]){var O=parse_TSP_Reference(w[X][0].data);delete w[X],numbers_del_oref(m,O)}});var z=parse_shallow(w[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(X){var O;if((O=z[X])!=null&&O[0]){var J=parse_TSP_Reference(z[X][0].data),Z=get_unique_msgid({deps:[u],location:e[J].location,type:e[J].type},e);numbers_del_oref(m,J),numbers_add_oref(m,Z),c[J]=Z;var se=numbers_iwa_find(t,e,J);if(se.id=Z,e[J].location==e[u].location)b.push(se);else{e[Z].location=e[J].location.replace(J.toString(),Z.toString()),e[Z].location==e[J].location&&(e[Z].location=e[Z].location.replace(/\.iwa/,"-".concat(Z,".iwa"))),CFB.utils.cfb_add(t,e[Z].location,compress_iwa_file(write_iwa_file([se])));var ie=e[Z].location;ie=ie.replace(/^Root Entry\//,""),ie=ie.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,e,2,function(F){var k=parse_shallow(F.messages[0].data);k[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Z)}],[{type:2,data:stru8(ie.replace(/-.*$/,""))}],[{type:2,data:stru8(ie)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),k[1]=[{type:0,data:write_varint49(Math.max(Z+1,varint_to_i32(k[1][0].data)))}];var y=k[3].findIndex(function(I){var P,H,q=parse_shallow(I.data);return(P=q[3])!=null&&P[0]?u8str(q[3][0].data)==d:!!((H=q[2])!=null&&H[0]&&u8str(q[2][0].data)==d)}),A=parse_shallow(k[3][y].data);A[6]||(A[6]=[]),A[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Z)}]])}),k[3][y].data=write_shallow(A),F.messages[0].data=write_shallow(k)})}z[X][0].data=write_TSP_Reference(Z)}});var U=parse_shallow(z[1][0].data);(_=U[2])==null||_.forEach(function(X){var O=parse_TSP_Reference(X.data),J=get_unique_msgid({deps:[u],location:e[O].location,type:e[O].type},e);numbers_del_oref(m,O),numbers_add_oref(m,J),c[O]=J;var Z=numbers_iwa_find(t,e,O);if(Z.id=J,e[O].location==e[u].location)b.push(Z);else{e[J].location=e[O].location.replace(O.toString(),J.toString()),e[J].location==e[O].location&&(e[J].location=e[J].location.replace(/\.iwa/,"-".concat(J,".iwa"))),CFB.utils.cfb_add(t,e[J].location,compress_iwa_file(write_iwa_file([Z])));var se=e[J].location;se=se.replace(/^Root Entry\//,""),se=se.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,e,2,function(ie){var F=parse_shallow(ie.messages[0].data);F[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(J)}],[{type:2,data:stru8(se.replace(/-.*$/,""))}],[{type:2,data:stru8(se)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),F[1]=[{type:0,data:write_varint49(Math.max(J+1,varint_to_i32(F[1][0].data)))}];var k=F[3].findIndex(function(A){var I,P,H=parse_shallow(A.data);return(I=H[3])!=null&&I[0]?u8str(H[3][0].data)==d:!!((P=H[2])!=null&&P[0]&&u8str(H[2][0].data)==d)}),y=parse_shallow(F[3][k].data);y[6]||(y[6]=[]),y[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(J)}]])}),F[3][k].data=write_shallow(y),ie.messages[0].data=write_shallow(F)})}X.data=write_TSP_Reference(J)}),z[1][0].data=write_shallow(U);var Y=parse_shallow(z[3][0].data);Y[1].forEach(function(X){var O=parse_shallow(X.data),J=parse_TSP_Reference(O[2][0].data),Z=c[J];if(!c[J]){Z=get_unique_msgid({deps:[u],location:"",type:e[J].type},e),e[Z].location="Root Entry/Index/Tables/Tile-".concat(Z,".iwa"),c[J]=Z;var se=numbers_iwa_find(t,e,J);se.id=Z,numbers_del_oref(m,J),numbers_add_oref(m,Z),CFB.utils.cfb_add(t,"/Index/Tables/Tile-".concat(Z,".iwa"),compress_iwa_file(write_iwa_file([se]))),numbers_iwa_doit(t,e,2,function(ie){var F=parse_shallow(ie.messages[0].data);F[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Z)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(Z))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),F[1]=[{type:0,data:write_varint49(Math.max(Z+1,varint_to_i32(F[1][0].data)))}];var k=F[3].findIndex(function(A){var I,P,H=parse_shallow(A.data);return(I=H[3])!=null&&I[0]?u8str(H[3][0].data)==d:!!((P=H[2])!=null&&P[0]&&u8str(H[2][0].data)==d)}),y=parse_shallow(F[3][k].data);y[6]||(y[6]=[]),y[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Z)}]])}),F[3][k].data=write_shallow(y),ie.messages[0].data=write_shallow(F)})}O[2][0].data=write_TSP_Reference(Z),X.data=write_shallow(O)}),z[3][0].data=write_shallow(Y)}w[4][0].data=write_shallow(z),m.messages[0].data=write_shallow(w)})}function write_numbers_ws(t,e,n,a,o,c){var l=[];numbers_iwa_doit(t,e,c,function(m){var b=parse_shallow(m.messages[0].data);b[1]=[{type:2,data:stru8(a)}],l=mappa(b[2],parse_TSP_Reference),m.messages[0].data=write_shallow(b)});var u=numbers_iwa_find(t,e,l[0]),d=parse_TSP_Reference(parse_shallow(u.messages[0].data)[2][0].data);numbers_iwa_doit(t,e,d,function(m,b){return write_numbers_tma(t,e,n,m,b,d)})}var USE_WIDE_ROWS=!0;function write_numbers_tma(t,e,n,a,o,c){var l=decode_range(n["!ref"]);l.s.r=l.s.c=0;var u=!1;l.e.c>999&&(u=!0,l.e.c=999),l.e.r>999999&&(u=!0,l.e.r=999999),u&&console.error("Truncating to ".concat(encode_range(l)));var d=sheet_to_json(n,{range:l,header:1}),m=["~Sh33tJ5~"],b=e[c].location;b=b.replace(/^Root Entry\//,""),b=b.replace(/^Index\//,"").replace(/\.iwa$/,"");var x=parse_shallow(a.messages[0].data);{x[6][0].data=write_varint49(l.e.r+1),x[7][0].data=write_varint49(l.e.c+1),delete x[46];var _=parse_shallow(x[4][0].data);{var w=parse_TSP_Reference(parse_shallow(_[1][0].data)[2][0].data);numbers_iwa_doit(t,e,w,function(y,A){var I,P=parse_shallow(y.messages[0].data);if((I=P?.[2])!=null&&I[0])for(var H=0;H<d.length;++H){var q=parse_shallow(P[2][0].data);q[1][0].data=write_varint49(H),q[4][0].data=write_varint49(d[H].length),P[2][H]={type:P[2][0].type,data:write_shallow(q)}}y.messages[0].data=write_shallow(P)});var S=parse_TSP_Reference(_[2][0].data);numbers_iwa_doit(t,e,S,function(y,A){for(var I=parse_shallow(y.messages[0].data),P=0;P<=l.e.c;++P){var H=parse_shallow(I[2][0].data);H[1][0].data=write_varint49(P),H[4][0].data=write_varint49(l.e.r+1),I[2][P]={type:I[2][0].type,data:write_shallow(H)}}y.messages[0].data=write_shallow(I)});var T=parse_shallow(_[9][0].data);T[1]=[];var B=parse_shallow(_[3][0].data);{var C=256;B[2]=[{type:0,data:write_varint49(C)}];var D=parse_TSP_Reference(parse_shallow(B[1][0].data)[2][0].data),z=function(){var y=numbers_iwa_find(t,e,2),A=parse_shallow(y.messages[0].data),I=A[3].filter(function(P){return varint_to_i32(parse_shallow(P.data)[1][0].data)==D});return I?.length?varint_to_i32(parse_shallow(I[0].data)[12][0].data):0}();CFB.utils.cfb_del(t,e[D].location),numbers_iwa_doit(t,e,2,function(y){var A=parse_shallow(y.messages[0].data);A[3]=A[3].filter(function(H){return varint_to_i32(parse_shallow(H.data)[1][0].data)!=D});var I=A[3].findIndex(function(H){var q,j,M=parse_shallow(H.data);return(q=M[3])!=null&&q[0]?u8str(M[3][0].data)==b:!!((j=M[2])!=null&&j[0]&&u8str(M[2][0].data)==b)}),P=parse_shallow(A[3][I].data);P[6]||(P[6]=[]),P[6]=P[6].filter(function(H){return varint_to_i32(parse_shallow(H.data)[1][0].data)!=D}),A[3][I].data=write_shallow(P),y.messages[0].data=write_shallow(A)}),numbers_del_oref(a,D),B[1]=[];for(var U=Math.ceil((l.e.r+1)/C),Y=0;Y<U;++Y){var X=get_unique_msgid({deps:[],location:"",type:6002},e);e[X].location="Root Entry/Index/Tables/Tile-".concat(X,".iwa");for(var O=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min(l.e.r+1,(Y+1)*C))}],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min((Y+1)*C,l.e.r+1)-Y*C)}],[],[{type:0,data:write_varint49(5)}],[{type:0,data:write_varint49(1)}],[{type:0,data:write_varint49(1)}]],J=Y*C;J<=Math.min(l.e.r,(Y+1)*C-1);++J){var Z=write_TST_TileRowInfo(d[J],m,USE_WIDE_ROWS);Z[1][0].data=write_varint49(J-Y*C),O[5].push({data:write_shallow(Z),type:2})}B[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Y)}],[{type:2,data:write_TSP_Reference(X)}]])});var se={id:X,messages:[write_iwam(6002,write_shallow(O))]},ie=compress_iwa_file(write_iwa_file([se]));CFB.utils.cfb_add(t,"/Index/Tables/Tile-".concat(X,".iwa"),ie),numbers_iwa_doit(t,e,2,function(y){var A=parse_shallow(y.messages[0].data);A[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(X)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(X))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(z)}]])}),A[1]=[{type:0,data:write_varint49(Math.max(X+1,varint_to_i32(A[1][0].data)))}];var I=A[3].findIndex(function(H){var q,j,M=parse_shallow(H.data);return(q=M[3])!=null&&q[0]?u8str(M[3][0].data)==b:!!((j=M[2])!=null&&j[0]&&u8str(M[2][0].data)==b)}),P=parse_shallow(A[3][I].data);P[6]||(P[6]=[]),P[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(X)}]])}),A[3][I].data=write_shallow(P),y.messages[0].data=write_shallow(A)}),numbers_add_oref(a,X),T[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Y*C)}],[{type:0,data:write_varint49(Y)}]])})}}if(_[3][0].data=write_shallow(B),_[9][0].data=write_shallow(T),_[10]=[{type:2,data:new Uint8Array([])}],n["!merges"]){var F=get_unique_msgid({type:6144,deps:[c],location:e[c].location},e);o.push({id:F,messages:[write_iwam(6144,write_shallow([[],n["!merges"].map(function(y){return{type:2,data:write_shallow([[],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([y.s.r,y.s.c]).buffer)}]])}],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([y.e.r-y.s.r+1,y.e.c-y.s.c+1]).buffer)}]])}]])}})]))]}),_[13]=[{type:2,data:write_TSP_Reference(F)}],numbers_iwa_doit(t,e,2,function(y){var A=parse_shallow(y.messages[0].data),I=A[3].findIndex(function(H){var q,j,M=parse_shallow(H.data);return(q=M[3])!=null&&q[0]?u8str(M[3][0].data)==b:!!((j=M[2])!=null&&j[0]&&u8str(M[2][0].data)==b)}),P=parse_shallow(A[3][I].data);P[6]||(P[6]=[]),P[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(F)}]])}),A[3][I].data=write_shallow(P),y.messages[0].data=write_shallow(A)}),numbers_add_oref(a,F)}else delete _[13];var k=parse_TSP_Reference(_[4][0].data);numbers_iwa_doit(t,e,k,function(y){var A=parse_shallow(y.messages[0].data);A[3]=[],m.forEach(function(I,P){P!=0&&A[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(P)}],[{type:0,data:write_varint49(1)}],[{type:2,data:stru8(I)}]])})}),y.messages[0].data=write_shallow(A)})}x[4][0].data=write_shallow(_)}a.messages[0].data=write_shallow(x)}function fix_opts_func(t){return function(n){for(var a=0;a!=t.length;++a){var o=t[a];n[o[0]]===void 0&&(n[o[0]]=o[1]),o[2]==="n"&&(n[o[0]]=Number(n[o[0]]))}}}function fix_read_opts(t){fix_opts_func([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function fix_write_opts(t){fix_opts_func([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function get_sheet_type(t){return RELS.WS.indexOf(t)>-1?"sheet":t==RELS.CS?"chart":t==RELS.DS?"dialog":t==RELS.MS?"macro":t&&t.length?t:"sheet"}function safe_parse_wbrels(t,e){if(!t)return 0;try{t=e.map(function(a){return a.id||(a.id=a.strRelID),[a.name,t["!id"][a.id].Target,get_sheet_type(t["!id"][a.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function safe_parse_sheet(t,e,n,a,o,c,l,u,d,m,b,x){try{c[a]=parse_rels(getzipstr(t,n,!0),e);var _=getzipdata(t,e),w;switch(u){case"sheet":w=parse_ws(_,e,o,d,c[a],m,b,x);break;case"chart":if(w=parse_cs(_,e,o,d,c[a],m,b,x),!w||!w["!drawel"])break;var S=resolve_path(w["!drawel"].Target,e),T=get_rels_path(S),B=parse_drawing(getzipstr(t,S,!0),parse_rels(getzipstr(t,T,!0),S)),C=resolve_path(B,S),D=get_rels_path(C);w=parse_chart(getzipstr(t,C,!0),C,d,parse_rels(getzipstr(t,D,!0),C),m,w);break;case"macro":w=parse_ms(_,e,o,d,c[a],m,b,x);break;case"dialog":w=parse_ds(_,e,o,d,c[a],m,b,x);break;default:throw new Error("Unrecognized sheet type "+u)}l[a]=w;var z=[],U=[];c&&c[a]&&keys(c[a]).forEach(function(Y){var X="";if(c[a][Y].Type==RELS.CMNT){if(X=resolve_path(c[a][Y].Target,e),z=parse_cmnt(getzipdata(t,X,!0),X,d),!z||!z.length)return;sheet_insert_comments(w,z,!1)}c[a][Y].Type==RELS.TCMNT&&(X=resolve_path(c[a][Y].Target,e),U=U.concat(parse_tcmnt_xml(getzipdata(t,X,!0),d)))}),U&&U.length&&sheet_insert_comments(w,U,!0,d.people||[])}catch(Y){if(d.WTF)throw Y}}function strip_front_slash(t){return t.charAt(0)=="/"?t.slice(1):t}function parse_zip(t,e){if(make_ssf(),e=e||{},fix_read_opts(e),safegetzipfile(t,"META-INF/manifest.xml")||safegetzipfile(t,"objectdata.xml"))return parse_ods(t,e);if(safegetzipfile(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof parse_numbers_iwa<"u"){if(t.FileIndex)return parse_numbers_iwa(t,e);var n=CFB.utils.cfb_new();return zipentries(t).forEach(function(A){zip_add_file(n,A,getzipbin(t,A))}),parse_numbers_iwa(n,e)}throw new Error("Unsupported NUMBERS file")}if(!safegetzipfile(t,"[Content_Types].xml")){if(safegetzipfile(t,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(safegetzipfile(t,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var a=CFB.find(t,"Index.zip");if(a)return e=dup(e),delete e.type,typeof a.content=="string"&&(e.type="binary"),typeof Bun<"u"&&Buffer.isBuffer(a.content)?readSync(new Uint8Array(a.content),e):readSync(a.content,e);throw new Error("Unsupported ZIP file")}var o=zipentries(t),c=parse_ct(getzipstr(t,"[Content_Types].xml")),l=!1,u,d;if(c.workbooks.length===0&&(d="xl/workbook.xml",getzipdata(t,d,!0)&&c.workbooks.push(d)),c.workbooks.length===0){if(d="xl/workbook.bin",!getzipdata(t,d,!0))throw new Error("Could not find workbook");c.workbooks.push(d),l=!0}c.workbooks[0].slice(-3)=="bin"&&(l=!0);var m={},b={};if(!e.bookSheets&&!e.bookProps){if(strs=[],c.sst)try{strs=parse_sst(getzipdata(t,strip_front_slash(c.sst)),c.sst,e)}catch(A){if(e.WTF)throw A}e.cellStyles&&c.themes.length&&(m=parse_theme_xml(getzipstr(t,c.themes[0].replace(/^\//,""),!0)||"",e)),c.style&&(b=parse_sty(getzipdata(t,strip_front_slash(c.style)),c.style,m,e))}c.links.map(function(A){try{var I=parse_rels(getzipstr(t,get_rels_path(strip_front_slash(A))),A);return parse_xlink(getzipdata(t,strip_front_slash(A)),I,A,e)}catch{}});var x=parse_wb(getzipdata(t,strip_front_slash(c.workbooks[0])),c.workbooks[0],e),_={},w="";c.coreprops.length&&(w=getzipdata(t,strip_front_slash(c.coreprops[0]),!0),w&&(_=parse_core_props(w)),c.extprops.length!==0&&(w=getzipdata(t,strip_front_slash(c.extprops[0]),!0),w&&parse_ext_props(w,_,e)));var S={};(!e.bookSheets||e.bookProps)&&c.custprops.length!==0&&(w=getzipstr(t,strip_front_slash(c.custprops[0]),!0),w&&(S=parse_cust_props(w,e)));var T={};if((e.bookSheets||e.bookProps)&&(x.Sheets?u=x.Sheets.map(function(I){return I.name}):_.Worksheets&&_.SheetNames.length>0&&(u=_.SheetNames),e.bookProps&&(T.Props=_,T.Custprops=S),e.bookSheets&&typeof u<"u"&&(T.SheetNames=u),e.bookSheets?T.SheetNames:e.bookProps))return T;u={};var B={};e.bookDeps&&c.calcchain&&(B=parse_cc(getzipdata(t,strip_front_slash(c.calcchain)),c.calcchain));var C=0,D={},z,U;{var Y=x.Sheets;_.Worksheets=Y.length,_.SheetNames=[];for(var X=0;X!=Y.length;++X)_.SheetNames[X]=Y[X].name}var O=l?"bin":"xml",J=c.workbooks[0].lastIndexOf("/"),Z=(c.workbooks[0].slice(0,J+1)+"_rels/"+c.workbooks[0].slice(J+1)+".rels").replace(/^\//,"");safegetzipfile(t,Z)||(Z="xl/_rels/workbook."+O+".rels");var se=parse_rels(getzipstr(t,Z,!0),Z.replace(/_rels.*/,"s5s"));(c.metadata||[]).length>=1&&(e.xlmeta=parse_xlmeta(getzipdata(t,strip_front_slash(c.metadata[0])),c.metadata[0],e)),(c.people||[]).length>=1&&(e.people=parse_people_xml(getzipdata(t,strip_front_slash(c.people[0])),e)),se&&(se=safe_parse_wbrels(se,x.Sheets));var ie=getzipdata(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(C=0;C!=_.Worksheets;++C){var F="sheet";if(se&&se[C]?(z="xl/"+se[C][1].replace(/[\/]?xl\//,""),safegetzipfile(t,z)||(z=se[C][1]),safegetzipfile(t,z)||(z=Z.replace(/_rels\/.*$/,"")+se[C][1]),F=se[C][2]):(z="xl/worksheets/sheet"+(C+1-ie)+"."+O,z=z.replace(/sheet0\./,"sheet.")),U=z.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(C!=e.sheets)continue e;break;case"string":if(_.SheetNames[C].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var k=!1,y=0;y!=e.sheets.length;++y)typeof e.sheets[y]=="number"&&e.sheets[y]==C&&(k=1),typeof e.sheets[y]=="string"&&e.sheets[y].toLowerCase()==_.SheetNames[C].toLowerCase()&&(k=1);if(!k)continue e}}safe_parse_sheet(t,z,U,_.SheetNames[C],C,D,u,F,e,x,m,b)}return T={Directory:c,Workbook:x,Props:_,Custprops:S,Deps:B,Sheets:u,SheetNames:_.SheetNames,Strings:strs,Styles:b,Themes:m,SSF:dup(table_fmt)},e&&e.bookFiles&&(t.files?(T.keys=o,T.files=t.files):(T.keys=[],T.files={},t.FullPaths.forEach(function(A,I){A=A.replace(/^Root Entry[\/]/,""),T.keys.push(A),T.files[A]=t.FileIndex[I]}))),e&&e.bookVBA&&(c.vba.length>0?T.vbaraw=getzipdata(t,strip_front_slash(c.vba[0]),!0):c.defaults&&c.defaults.bin===CT_VBA&&(T.vbaraw=getzipdata(t,"xl/vbaProject.bin",!0))),T.bookType=l?"xlsb":"xlsx",T}function parse_xlsxcfb(t,e){var n=e||{},a="Workbook",o=CFB.find(t,a);try{if(a="/!DataSpaces/Version",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(parse_DataSpaceVersionInfo(o.content),a="/!DataSpaces/DataSpaceMap",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);var c=parse_DataSpaceMap(o.content);if(c.length!==1||c[0].comps.length!==1||c[0].comps[0].t!==0||c[0].name!=="StrongEncryptionDataSpace"||c[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=parse_DataSpaceDefinition(o.content);if(l.length!=1||l[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);parse_Primary(o.content)}catch{}if(a="/EncryptionInfo",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);var u=parse_EncryptionInfo(o.content);if(a="/EncryptedPackage",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(u[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(u[1],o.content,n.password||"",n);if(u[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(u[1],o.content,n.password||"",n);throw new Error("File is password-protected")}function write_zip_xlsb(t,e){t&&!t.SSF&&(t.SSF=dup(table_fmt)),t&&t.SSF&&(make_ssf(),SSF_load_table(t.SSF),e.revssf=evert_num(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,browser_has_Map?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="bin",a=!0,o=new_ct();fix_write_opts(e=e||{});var c=zip_new(),l="",u=0;if(e.cellXfs=[],get_cell_style(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),l="docProps/core.xml",zip_add_file(c,l,write_core_props(t.Props,e)),o.coreprops.push(l),add_rels(e.rels,2,l,RELS.CORE_PROPS),l="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var d=[],m=0;m<t.SheetNames.length;++m)(t.Workbook.Sheets[m]||{}).Hidden!=2&&d.push(t.SheetNames[m]);t.Props.SheetNames=d}for(t.Props.Worksheets=t.Props.SheetNames.length,zip_add_file(c,l,write_ext_props(t.Props)),o.extprops.push(l),add_rels(e.rels,3,l,RELS.EXT_PROPS),t.Custprops!==t.Props&&keys(t.Custprops||{}).length>0&&(l="docProps/custom.xml",zip_add_file(c,l,write_cust_props(t.Custprops)),o.custprops.push(l),add_rels(e.rels,4,l,RELS.CUST_PROPS)),u=1;u<=t.SheetNames.length;++u){var b={"!id":{}},x=t.Sheets[t.SheetNames[u-1]],_=(x||{})["!type"]||"sheet";switch(_){case"chart":default:l="xl/worksheets/sheet"+u+"."+n,zip_add_file(c,l,write_ws_bin(u-1,e,t,b)),o.sheets.push(l),add_rels(e.wbrels,-1,"worksheets/sheet"+u+"."+n,RELS.WS[0])}if(x){var w=x["!comments"],S=!1,T="";w&&w.length>0&&(T="xl/comments"+u+"."+n,zip_add_file(c,T,write_comments_bin(w)),o.comments.push(T),add_rels(b,-1,"../comments"+u+"."+n,RELS.CMNT),S=!0),x["!legacy"]&&S&&zip_add_file(c,"xl/drawings/vmlDrawing"+u+".vml",write_vml(u,x["!comments"])),delete x["!comments"],delete x["!legacy"]}b["!id"].rId1&&zip_add_file(c,get_rels_path(l),write_rels(b))}e.Strings!=null&&e.Strings.length>0&&(l="xl/sharedStrings."+n,zip_add_file(c,l,write_sst_bin(e.Strings)),o.strs.push(l),add_rels(e.wbrels,-1,"sharedStrings."+n,RELS.SST)),l="xl/workbook."+n,zip_add_file(c,l,write_wb_bin(t)),o.workbooks.push(l),add_rels(e.rels,1,l,RELS.WB),l="xl/theme/theme1.xml";var B=write_theme(t.Themes,e);return zip_add_file(c,l,B),o.themes.push(l),add_rels(e.wbrels,-1,"theme/theme1.xml",RELS.THEME),l="xl/styles."+n,zip_add_file(c,l,write_sty_bin(t,e)),o.styles.push(l),add_rels(e.wbrels,-1,"styles."+n,RELS.STY),t.vbaraw&&a&&(l="xl/vbaProject.bin",zip_add_file(c,l,t.vbaraw),o.vba.push(l),add_rels(e.wbrels,-1,"vbaProject.bin",RELS.VBA)),l="xl/metadata."+n,zip_add_file(c,l,write_xlmeta_bin()),o.metadata.push(l),add_rels(e.wbrels,-1,"metadata."+n,RELS.XLMETA),zip_add_file(c,"[Content_Types].xml",write_ct(o,e)),zip_add_file(c,"_rels/.rels",write_rels(e.rels)),zip_add_file(c,"xl/_rels/workbook."+n+".rels",write_rels(e.wbrels)),delete e.revssf,delete e.ssf,c}function write_zip_xlsx(t,e){t&&!t.SSF&&(t.SSF=dup(table_fmt)),t&&t.SSF&&(make_ssf(),SSF_load_table(t.SSF),e.revssf=evert_num(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,browser_has_Map?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",a=VBAFMTS.indexOf(e.bookType)>-1,o=new_ct();fix_write_opts(e=e||{});var c=zip_new(),l="",u=0;if(e.cellXfs=[],get_cell_style(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),l="docProps/core.xml",zip_add_file(c,l,write_core_props(t.Props,e)),o.coreprops.push(l),add_rels(e.rels,2,l,RELS.CORE_PROPS),l="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var d=[],m=0;m<t.SheetNames.length;++m)(t.Workbook.Sheets[m]||{}).Hidden!=2&&d.push(t.SheetNames[m]);t.Props.SheetNames=d}t.Props.Worksheets=t.Props.SheetNames.length,zip_add_file(c,l,write_ext_props(t.Props)),o.extprops.push(l),add_rels(e.rels,3,l,RELS.EXT_PROPS),t.Custprops!==t.Props&&keys(t.Custprops||{}).length>0&&(l="docProps/custom.xml",zip_add_file(c,l,write_cust_props(t.Custprops)),o.custprops.push(l),add_rels(e.rels,4,l,RELS.CUST_PROPS));var b=["SheetJ5"];for(e.tcid=0,u=1;u<=t.SheetNames.length;++u){var x={"!id":{}},_=t.Sheets[t.SheetNames[u-1]],w=(_||{})["!type"]||"sheet";switch(w){case"chart":default:l="xl/worksheets/sheet"+u+"."+n,zip_add_file(c,l,write_ws_xml(u-1,e,t,x)),o.sheets.push(l),add_rels(e.wbrels,-1,"worksheets/sheet"+u+"."+n,RELS.WS[0])}if(_){var S=_["!comments"],T=!1,B="";if(S&&S.length>0){var C=!1;S.forEach(function(D){D[1].forEach(function(z){z.T==!0&&(C=!0)})}),C&&(B="xl/threadedComments/threadedComment"+u+".xml",zip_add_file(c,B,write_tcmnt_xml(S,b,e)),o.threadedcomments.push(B),add_rels(x,-1,"../threadedComments/threadedComment"+u+".xml",RELS.TCMNT)),B="xl/comments"+u+"."+n,zip_add_file(c,B,write_comments_xml(S)),o.comments.push(B),add_rels(x,-1,"../comments"+u+"."+n,RELS.CMNT),T=!0}_["!legacy"]&&T&&zip_add_file(c,"xl/drawings/vmlDrawing"+u+".vml",write_vml(u,_["!comments"])),delete _["!comments"],delete _["!legacy"]}x["!id"].rId1&&zip_add_file(c,get_rels_path(l),write_rels(x))}return e.Strings!=null&&e.Strings.length>0&&(l="xl/sharedStrings."+n,zip_add_file(c,l,write_sst_xml(e.Strings,e)),o.strs.push(l),add_rels(e.wbrels,-1,"sharedStrings."+n,RELS.SST)),l="xl/workbook."+n,zip_add_file(c,l,write_wb_xml(t)),o.workbooks.push(l),add_rels(e.rels,1,l,RELS.WB),l="xl/theme/theme1.xml",zip_add_file(c,l,write_theme(t.Themes,e)),o.themes.push(l),add_rels(e.wbrels,-1,"theme/theme1.xml",RELS.THEME),l="xl/styles."+n,zip_add_file(c,l,write_sty_xml(t,e)),o.styles.push(l),add_rels(e.wbrels,-1,"styles."+n,RELS.STY),t.vbaraw&&a&&(l="xl/vbaProject.bin",zip_add_file(c,l,t.vbaraw),o.vba.push(l),add_rels(e.wbrels,-1,"vbaProject.bin",RELS.VBA)),l="xl/metadata."+n,zip_add_file(c,l,write_xlmeta_xml()),o.metadata.push(l),add_rels(e.wbrels,-1,"metadata."+n,RELS.XLMETA),b.length>1&&(l="xl/persons/person.xml",zip_add_file(c,l,write_people_xml(b)),o.people.push(l),add_rels(e.wbrels,-1,"persons/person.xml",RELS.PEOPLE)),zip_add_file(c,"[Content_Types].xml",write_ct(o,e)),zip_add_file(c,"_rels/.rels",write_rels(e.rels)),zip_add_file(c,"xl/_rels/workbook."+n+".rels",write_rels(e.wbrels)),delete e.revssf,delete e.ssf,c}function firstbyte(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Base64_decode(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function read_cfb(t,e){return CFB.find(t,"EncryptedPackage")?parse_xlsxcfb(t,e):parse_xlscfb(t,e)}function read_zip(t,e){var n,a=t,o=e||{};return o.type||(o.type=has_buf&&Buffer.isBuffer(t)?"buffer":"base64"),n=zip_read(a,o),parse_zip(n,o)}function read_plaintext(t,e){var n=0;e:for(;n<t.length;)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return parse_xlml(t.slice(n),e);default:break e}return PRN.to_workbook(t,e)}function read_plaintext_raw(t,e){var n="",a=firstbyte(t,e);switch(e.type){case"base64":n=Base64_decode(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=cc2str(t);break;default:throw new Error("Unrecognized type "+e.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(n=utf8read(n)),e.type="binary",read_plaintext(n,e)}function read_utf16(t,e){var n=t;return e.type=="base64"&&(n=Base64_decode(n)),n=utf16leread(n.slice(2)),e.type="binary",read_plaintext(n,e)}function bstrify(t){return t.match(/[^\x00-\x7F]/)?utf8write(t):t}function read_prn(t,e,n,a){return a?(n.type="string",PRN.to_workbook(t,n)):PRN.to_workbook(e,n)}function readSync(t,e){reset_cp();var n=e||{};if(n.codepage&&typeof $cptable>"u"&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return readSync(new Uint8Array(t),(n=dup(n),n.type="array",n));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var a=t,o=[0,0,0,0],c=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),_ssfopts={},n.dateNF&&(_ssfopts.dateNF=n.dateNF),n.type||(n.type=has_buf&&Buffer.isBuffer(t)?"buffer":"base64"),n.type=="file"&&(n.type=has_buf?"buffer":"binary",a=read_binary(t),typeof Uint8Array<"u"&&!has_buf&&(n.type="array")),n.type=="string"&&(c=!0,n.type="binary",n.codepage=65001,a=bstrify(t)),n.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var l=new ArrayBuffer(3),u=new Uint8Array(l);if(u.foo="bar",!u.foo)return n=dup(n),n.type="array",readSync(ab2a(a),n)}switch((o=firstbyte(a,n))[0]){case 208:if(o[1]===207&&o[2]===17&&o[3]===224&&o[4]===161&&o[5]===177&&o[6]===26&&o[7]===225)return read_cfb(CFB.read(a,n),n);break;case 9:if(o[1]<=8)return parse_xlscfb(a,n);break;case 60:return parse_xlml(a,n);case 73:if(o[1]===73&&o[2]===42&&o[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(o[1]===68)return read_wb_ID(a,n);break;case 84:if(o[1]===65&&o[2]===66&&o[3]===76)return DIF.to_workbook(a,n);break;case 80:return o[1]===75&&o[2]<9&&o[3]<9?read_zip(a,n):read_prn(t,a,n,c);case 239:return o[3]===60?parse_xlml(a,n):read_prn(t,a,n,c);case 255:if(o[1]===254)return read_utf16(a,n);if(o[1]===0&&o[2]===2&&o[3]===0)return WK_.to_workbook(a,n);break;case 0:if(o[1]===0&&(o[2]>=2&&o[3]===0||o[2]===0&&(o[3]===8||o[3]===9)))return WK_.to_workbook(a,n);break;case 3:case 131:case 139:case 140:return DBF.to_workbook(a,n);case 123:if(o[1]===92&&o[2]===114&&o[3]===116)return rtf_to_workbook(a,n);break;case 10:case 13:case 32:return read_plaintext_raw(a,n);case 137:if(o[1]===80&&o[2]===78&&o[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(o[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(o[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(o[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return DBF_SUPPORTED_VERSIONS.indexOf(o[0])>-1&&o[2]<=12&&o[3]<=31?DBF.to_workbook(a,n):read_prn(t,a,n,c)}function readFileSync(t,e){var n=e||{};return n.type="file",readSync(t,n)}function write_cfb_ctr(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return write_dl(e.file,CFB.write(t,{type:has_buf?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return CFB.write(t,e)}function write_zip(t,e){switch(e.bookType){case"ods":return write_ods(t,e);case"numbers":return write_numbers_iwa(t,e);case"xlsb":return write_zip_xlsb(t,e);default:return write_zip_xlsx(t,e)}}function write_zip_type(t,e){var n=dup(e||{}),a=write_zip(t,n);return write_zip_denouement(a,n)}function write_zip_denouement(t,e){var n={},a=has_buf?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=a;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=a;break;default:throw new Error("Unrecognized type "+e.type)}var o=t.FullPaths?CFB.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof o=="string"){if(e.type=="binary"||e.type=="base64")return o;o=new Uint8Array(s2ab(o))}return e.password&&typeof encrypt_agile<"u"?write_cfb_ctr(encrypt_agile(o,e.password),e):e.type==="file"?write_dl(e.file,o):e.type=="string"?utf8read(o):o}function write_cfb_type(t,e){var n=e||{},a=write_xlscfb(t,n);return write_cfb_ctr(a,n)}function write_string_type(t,e,n){n||(n="");var a=n+t;switch(e.type){case"base64":return Base64_encode(utf8write(a));case"binary":return utf8write(a);case"string":return t;case"file":return write_dl(e.file,a,"utf8");case"buffer":return has_buf?Buffer_from(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):write_string_type(a,{type:"binary"}).split("").map(function(o){return o.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function write_stxt_type(t,e){switch(e.type){case"base64":return Base64_encode_pass(t);case"binary":return t;case"string":return t;case"file":return write_dl(e.file,t,"binary");case"buffer":return has_buf?Buffer_from(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function write_binary_type(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",a=0;a<t.length;++a)n+=String.fromCharCode(t[a]);return e.type=="base64"?Base64_encode(n):e.type=="string"?utf8read(n):n;case"file":return write_dl(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function writeSync(t,e){reset_cp(),check_wb(t);var n=dup(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var a=writeSync(t,n);return n.type="array",s2ab(a)}var o=0;if(n.sheet&&(typeof n.sheet=="number"?o=n.sheet:o=t.SheetNames.indexOf(n.sheet),!t.SheetNames[o]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return write_string_type(write_xlml(t,n),n);case"slk":case"sylk":return write_string_type(SYLK.from_sheet(t.Sheets[t.SheetNames[o]],n,t),n);case"htm":case"html":return write_string_type(sheet_to_html(t.Sheets[t.SheetNames[o]],n),n);case"txt":return write_stxt_type(sheet_to_txt(t.Sheets[t.SheetNames[o]],n),n);case"csv":return write_string_type(sheet_to_csv(t.Sheets[t.SheetNames[o]],n),n,"\uFEFF");case"dif":return write_string_type(DIF.from_sheet(t.Sheets[t.SheetNames[o]],n),n);case"dbf":return write_binary_type(DBF.from_sheet(t.Sheets[t.SheetNames[o]],n),n);case"prn":return write_string_type(PRN.from_sheet(t.Sheets[t.SheetNames[o]],n),n);case"rtf":return write_string_type(sheet_to_rtf(t.Sheets[t.SheetNames[o]]),n);case"eth":return write_string_type(ETH.from_sheet(t.Sheets[t.SheetNames[o]],n),n);case"fods":return write_string_type(write_ods(t,n),n);case"wk1":return write_binary_type(WK_.sheet_to_wk1(t.Sheets[t.SheetNames[o]],n),n);case"wk3":return write_binary_type(WK_.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),write_binary_type(write_biff_buf(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),write_cfb_type(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return write_zip_type(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function resolve_book_type(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function writeFileSync(t,e,n){var a=n||{};return a.type="file",a.file=e,resolve_book_type(a),writeSync(t,a)}function make_json_row(t,e,n,a,o,c,l){var u=encode_row(n),d=l.defval,m=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),b=!0,x=t["!data"]!=null,_=o===1?[]:{};if(o!==1)if(Object.defineProperty)try{Object.defineProperty(_,"__rowNum__",{value:n,enumerable:!1})}catch{_.__rowNum__=n}else _.__rowNum__=n;if(!x||t["!data"][n])for(var w=e.s.c;w<=e.e.c;++w){var S=x?(t["!data"][n]||[])[w]:t[a[w]+u];if(S===void 0||S.t===void 0){if(d===void 0)continue;c[w]!=null&&(_[c[w]]=d);continue}var T=S.v;switch(S.t){case"z":if(T==null)break;continue;case"e":T=T==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+S.t)}if(c[w]!=null){if(T==null)if(S.t=="e"&&T===null)_[c[w]]=null;else if(d!==void 0)_[c[w]]=d;else if(m&&T===null)_[c[w]]=null;else continue;else _[c[w]]=m&&(S.t!=="n"||S.t==="n"&&l.rawNumbers!==!1)?T:format_cell(S,T,l);T!=null&&(b=!1)}}return{row:_,isempty:b}}function sheet_to_json(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},a=0,o=1,c=[],l=0,u="",d={s:{r:0,c:0},e:{r:0,c:0}},m=e||{},b=m.range!=null?m.range:t["!ref"];switch(m.header===1?a=1:m.header==="A"?a=2:Array.isArray(m.header)?a=3:m.header==null&&(a=0),typeof b){case"string":d=safe_decode_range(b);break;case"number":d=safe_decode_range(t["!ref"]),d.s.r=b;break;default:d=b}a>0&&(o=0);var x=encode_row(d.s.r),_=[],w=[],S=0,T=0,B=t["!data"]!=null,C=d.s.r,D=0,z={};B&&!t["!data"][C]&&(t["!data"][C]=[]);var U=m.skipHidden&&t["!cols"]||[],Y=m.skipHidden&&t["!rows"]||[];for(D=d.s.c;D<=d.e.c;++D)if(!(U[D]||{}).hidden)switch(_[D]=encode_col(D),n=B?t["!data"][C][D]:t[_[D]+x],a){case 1:c[D]=D-d.s.c;break;case 2:c[D]=_[D];break;case 3:c[D]=m.header[D-d.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),u=l=format_cell(n,null,m),T=z[l]||0,!T)z[l]=1;else{do u=l+"_"+T++;while(z[u]);z[l]=T,z[u]=1}c[D]=u}for(C=d.s.r+o;C<=d.e.r;++C)if(!(Y[C]||{}).hidden){var X=make_json_row(t,d,C,_,a,c,m);(X.isempty===!1||(a===1?m.blankrows!==!1:m.blankrows))&&(w[S++]=X.row)}return w.length=S,w}var qreg=/"/g;function make_csv_row(t,e,n,a,o,c,l,u){for(var d=!0,m=[],b="",x=encode_row(n),_=t["!data"]!=null,w=_&&t["!data"][n]||[],S=e.s.c;S<=e.e.c;++S)if(a[S]){var T=_?w[S]:t[a[S]+x];if(T==null)b="";else if(T.v!=null){d=!1,b=""+(u.rawNumbers&&T.t=="n"?T.v:format_cell(T,null,u));for(var B=0,C=0;B!==b.length;++B)if((C=b.charCodeAt(B))===o||C===c||C===34||u.forceQuotes){b='"'+b.replace(qreg,'""')+'"';break}b=="ID"&&(b='"ID"')}else T.f!=null&&!T.F?(d=!1,b="="+T.f,b.indexOf(",")>=0&&(b='"'+b.replace(qreg,'""')+'"')):b="";m.push(b)}return u.blankrows===!1&&d?null:m.join(l)}function sheet_to_csv(t,e){var n=[],a=e??{};if(t==null||t["!ref"]==null)return"";for(var o=safe_decode_range(t["!ref"]),c=a.FS!==void 0?a.FS:",",l=c.charCodeAt(0),u=a.RS!==void 0?a.RS:`
`,d=u.charCodeAt(0),m=new RegExp((c=="|"?"\\|":c)+"+$"),b="",x=[],_=a.skipHidden&&t["!cols"]||[],w=a.skipHidden&&t["!rows"]||[],S=o.s.c;S<=o.e.c;++S)(_[S]||{}).hidden||(x[S]=encode_col(S));for(var T=0,B=o.s.r;B<=o.e.r;++B)(w[B]||{}).hidden||(b=make_csv_row(t,o,B,x,l,d,c,a),b!=null&&(a.strip&&(b=b.replace(m,"")),(b||a.blankrows!==!1)&&n.push((T++?u:"")+b)));return n.join("")}function sheet_to_txt(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=sheet_to_csv(t,e);return n}function sheet_to_formulae(t){var e="",n,a="";if(t==null||t["!ref"]==null)return[];var o=safe_decode_range(t["!ref"]),c="",l=[],u,d=[],m=t["!data"]!=null;for(u=o.s.c;u<=o.e.c;++u)l[u]=encode_col(u);for(var b=o.s.r;b<=o.e.r;++b)for(c=encode_row(b),u=o.s.c;u<=o.e.c;++u)if(e=l[u]+c,n=m?(t["!data"][b]||[])[u]:t[e],a="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;a=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)a=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)a=""+n.v;else if(n.t=="b")a=n.v?"TRUE":"FALSE";else if(n.w!==void 0)a="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?a="'"+n.v:a=""+n.v}}d[d.length]=e+"="+a}return d}function sheet_add_json(t,e,n){var a=n||{},o=t?t["!data"]!=null:a.dense,c=+!a.skipHeader,l=t||{};!t&&o&&(l["!data"]=[]);var u=0,d=0;if(l&&a.origin!=null)if(typeof a.origin=="number")u=a.origin;else{var m=typeof a.origin=="string"?decode_cell(a.origin):a.origin;u=m.r,d=m.c}var b={s:{c:0,r:0},e:{c:d,r:u+e.length-1+c}};if(l["!ref"]){var x=safe_decode_range(l["!ref"]);b.e.c=Math.max(b.e.c,x.e.c),b.e.r=Math.max(b.e.r,x.e.r),u==-1&&(u=x.e.r+1,b.e.r=u+e.length-1+c)}else u==-1&&(u=0,b.e.r=e.length-1+c);var _=a.header||[],w=0,S=[];e.forEach(function(B,C){o&&!l["!data"][u+C+c]&&(l["!data"][u+C+c]=[]),o&&(S=l["!data"][u+C+c]),keys(B).forEach(function(D){(w=_.indexOf(D))==-1&&(_[w=_.length]=D);var z=B[D],U="z",Y="",X=o?"":encode_col(d+w)+encode_row(u+C+c),O=o?S[d+w]:l[X];z&&typeof z=="object"&&!(z instanceof Date)?o?S[d+w]=z:l[X]=z:(typeof z=="number"?U="n":typeof z=="boolean"?U="b":typeof z=="string"?U="s":z instanceof Date?(U="d",a.cellDates||(U="n",z=datenum(z)),Y=O!=null&&O.z&&fmt_is_date(O.z)?O.z:a.dateNF||table_fmt[14]):z===null&&a.nullError&&(U="e",z=0),O?(O.t=U,O.v=z,delete O.w,delete O.R,Y&&(O.z=Y)):o?S[d+w]=O={t:U,v:z}:l[X]=O={t:U,v:z},Y&&(O.z=Y))})}),b.e.c=Math.max(b.e.c,d+_.length-1);var T=encode_row(u);if(o&&!l["!data"][u]&&(l["!data"][u]=[]),c)for(w=0;w<_.length;++w)o?l["!data"][u][w+d]={t:"s",v:_[w]}:l[encode_col(w+d)+T]={t:"s",v:_[w]};return l["!ref"]=encode_range(b),l}function json_to_sheet(t,e){return sheet_add_json(null,t,e)}function ws_get_cell_stub(t,e,n){if(typeof e=="string"){if(t["!data"]!=null){var a=decode_cell(e);return t["!data"][a.r]||(t["!data"][a.r]=[]),t["!data"][a.r][a.c]||(t["!data"][a.r][a.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?ws_get_cell_stub(t,encode_cell(e)):ws_get_cell_stub(t,encode_col(n||0)+encode_row(e))}function wb_sheet_idx(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function book_new(){return{SheetNames:[],Sheets:{}}}function book_append_sheet(t,e,n,a){var o=1;if(!n)for(;o<=65535&&t.SheetNames.indexOf(n="Sheet"+o)!=-1;++o,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&t.SheetNames.indexOf(n)>=0){var c=n.match(/(^.*?)(\d+)$/);o=c&&+c[2]||0;var l=c&&c[1]||n;for(++o;o<=65535&&t.SheetNames.indexOf(n=l+o)!=-1;++o);}if(check_ws_name(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function book_set_sheet_visibility(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var a=wb_sheet_idx(t,e);switch(t.Workbook.Sheets[a]||(t.Workbook.Sheets[a]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[a].Hidden=n}function cell_set_number_format(t,e){return t.z=e,t}function cell_set_hyperlink(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function cell_set_internal_link(t,e,n){return cell_set_hyperlink(t,"#"+e,n)}function cell_add_comment(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function sheet_set_array_formula(t,e,n,a){for(var o=typeof e!="string"?e:safe_decode_range(e),c=typeof e=="string"?e:encode_range(e),l=o.s.r;l<=o.e.r;++l)for(var u=o.s.c;u<=o.e.c;++u){var d=ws_get_cell_stub(t,l,u);d.t="n",d.F=c,delete d.v,l==o.s.r&&u==o.s.c&&(d.f=n,a&&(d.D=!0))}var m=decode_range(t["!ref"]);return m.s.r>o.s.r&&(m.s.r=o.s.r),m.s.c>o.s.c&&(m.s.c=o.s.c),m.e.r<o.e.r&&(m.e.r=o.e.r),m.e.c<o.e.c&&(m.e.c=o.e.c),t["!ref"]=encode_range(m),t}var utils$1={encode_col,encode_row,encode_cell,encode_range,decode_col,decode_row,split_cell,decode_cell,decode_range,format_cell,sheet_add_aoa,sheet_add_json,sheet_add_dom,aoa_to_sheet,json_to_sheet,table_to_sheet:parse_dom_table,table_to_book,sheet_to_csv,sheet_to_txt,sheet_to_json,sheet_to_html,sheet_to_formulae,sheet_to_row_object_array:sheet_to_json,sheet_get_cell:ws_get_cell_stub,book_new,book_append_sheet,book_set_sheet_visibility,cell_set_number_format,cell_set_hyperlink,cell_set_internal_link,cell_add_comment,sheet_set_array_formula,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};async function toBuffer(t){let e=new Uint8Array(0);for await(const n of t)e=concat$2([e,n],e.length+n.length);return e}const MAX_TAILLE_IMAGE$1=500*1e3,MAX_TAILLE_IMAGE_VIS$1=1500*1e3;class BDs{constructor({client:e,id:n}){lt(this,"client");lt(this,"idBd");this.client=e,this.idBd=n}async suivreBds({f:e,idBdBdsCompte:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async créerBd({licence:e,ajouter:n=!0}){const a=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a});await o.set("type","bd"),await o.set("licence",e);const u={address:o.access.address},d=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:u});await o.set("noms",d);const m=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:u});await o.set("descriptions",m);const b=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:u});await o.set("tableaux",b);const x=await this.client.créerBdIndépendante({type:"feed",optionsAccès:u});await o.set("motsClefs",x);const _=await this.client.créerBdIndépendante({type:"feed",optionsAccès:u});if(await o.set("nuées",_),await o.set("statut",{statut:TYPES_STATUT.ACTIVE}),n){const{bd:w,fOublier:S}=await this.client.ouvrirBd({id:this.idBd});await w.add(a),S()}return await c(),a}async ajouterÀMesBds({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async enleverDeMesBds({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a()}async copierBd({id:e,ajouterÀMesBds:n=!0,copierDonnées:a=!0}){const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:e}),l=o.get("licence"),u=await this.créerBd({licence:l,ajouter:n}),{bd:d,fOublier:m}=await this.client.ouvrirBd({id:u}),b=o.get("noms"),{bd:x,fOublier:_}=await this.client.ouvrirBd({id:b}),w=ClientConstellation.obtObjetdeBdDic({bd:x});await this.ajouterNomsBd({id:u,noms:w});const S=o.get("descriptions"),{bd:T,fOublier:B}=await this.client.ouvrirBd({id:S}),C=ClientConstellation.obtObjetdeBdDic({bd:T});await this.ajouterDescriptionsBd({id:u,descriptions:C}),_(),B();const D=o.get("motsClefs"),{bd:z,fOublier:U}=await this.client.ouvrirBd({id:D}),Y=ClientConstellation.obtÉlémentsDeBdListe({bd:z});await this.ajouterMotsClefsBd({idBd:u,idsMotsClefs:Y});const X=o.get("nuées"),{bd:O,fOublier:J}=await this.client.ouvrirBd({id:X}),Z=ClientConstellation.obtÉlémentsDeBdListe({bd:O});await this.rejoindreNuées({idBd:u,idsNuées:Z});const se=o.get("tableaux"),ie=d.get("tableaux"),{bd:F,fOublier:k}=await this.client.ouvrirBd({id:ie}),{bd:y,fOublier:A}=await this.client.ouvrirBd({id:se}),I=ClientConstellation.obtObjetdeBdDic({bd:y});for(const q of Object.keys(I)){const j=await this.client.tableaux.copierTableau({id:q,idBd:u,copierDonnées:a});await F.set(j,I[q])}const P=o.get("statut")||{statut:TYPES_STATUT.ACTIVE};await d.set("statut",P);const H=o.get("image");return H&&await d.set("image",H),await d.set("copiéDe",{id:e}),await c(),k(),m(),A(),U(),J(),u}async créerBdDeSchéma({schéma:e,ajouter:n=!0}){const{tableaux:a,motsClefs:o,licence:c}=e,l=await this.créerBd({licence:c,ajouter:!1});o&&await this.ajouterMotsClefsBd({idBd:l,idsMotsClefs:o});for(const u of a){const{cols:d,clef:m}=u,b=await this.ajouterTableauBd({idBd:l,clefTableau:m});for(const x of d){const{idColonne:_,idVariable:w,index:S}=x;await this.client.tableaux.ajouterColonneTableau({idTableau:b,idVariable:w,idColonne:_}),S&&await this.client.tableaux.changerColIndex({idTableau:b,idColonne:_,val:!0})}}return n&&await this.ajouterÀMesBds({id:l}),l}async suivreParent({idBd:e,f:n}){const a=async o=>{const c=o.get("copiéDe");await n(c)};return await this.client.suivreBd({id:e,f:a})}async suivreNuéesBd({idBd:e,f:n}){return await this.client.suivreBdListeDeClef({id:e,clef:"nuées",f:n})}async rechercherBdsParMotsClefs({motsClefs:e,f:n,idBdBdsCompte:a}){const o=async l=>await this.suivreBds({f:l,idBdBdsCompte:a}),c=async(l,u)=>{const d=m=>{const b=e.every(x=>m.includes(x));u(b)};return await this.suivreMotsClefsBd({id:l,f:d})};return await this.client.suivreBdsSelonCondition({fListe:o,fCondition:c,f:n})}async rechercherBdsParNuée({idNuée:e,f:n,idBdBdsCompte:a}){const o=async l=>await this.suivreBds({f:l,idBdBdsCompte:a}),c=async(l,u)=>{const d=m=>{u(m.includes(e))};return await this.suivreNuéesBd({idBd:l,f:d})};return await this.client.suivreBdsSelonCondition({fListe:o,fCondition:c,f:n})}async combinerBds({idBdBase:e,idBd2:n}){const a=async l=>await uneFois(async u=>await this.suivreTableauxBd({id:l,f:u})),o=await a(e),c=await a(n);for(const l of c){const{id:u,clef:d}=l;if(d){const m=o.find(b=>b.clef===d)?.id;m&&await this.client.tableaux.combinerDonnées({idTableauBase:m,idTableau2:u})}}}async suivreIdTableauParClef({idBd:e,clef:n,f:a}){const o=c=>{const l=c.find(u=>u.clef===n);a(l?.id)};return await this.suivreTableauxBd({id:e,f:o})}async suivreBdUnique({schéma:e,idNuéeUnique:n,f:a}){const o="bdUnique: "+n,c=new Set,l=async d=>{let m;const b=await this.client.obtDeStockageLocal({clef:o});switch(d.length){case 0:{b?m=b:(m=await this.créerBdDeSchéma({schéma:e}),await this.rejoindreNuées({idBd:m,idsNuées:n}),await this.client.sauvegarderAuStockageLocal({clef:o,val:m}));break}case 1:{m=d[0],await this.client.sauvegarderAuStockageLocal({clef:o,val:m}),b&&m!==b&&await this.combinerBds({idBdBase:m,idBd2:b});break}default:{b&&(d=[...new Set([...d,b])]),m=d.sort()[0],await this.client.sauvegarderAuStockageLocal({clef:o,val:m});for(const x of d.slice(1))c.has(x)||(c.add(x),await this.combinerBds({idBdBase:m,idBd2:x}));break}}a(m)};return await this.rechercherBdsParNuée({idNuée:n,f:l})}async suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:o}){const c=async({fSuivreRacine:u})=>await this.suivreBdUnique({schéma:e,idNuéeUnique:n,f:u}),l=async({id:u,fSuivreBd:d})=>await this.suivreIdTableauParClef({idBd:u,clef:a,f:d});return await this.client.suivreBdDeFonction({fRacine:c,f:o,fSuivre:l})}async suivreDonnéesDeTableauUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:o}){const c=d=>o(d||[]),l=async({id:d,fSuivreBd:m})=>await this.client.tableaux.suivreDonnées({idTableau:d,f:m}),u=async({fSuivreRacine:d})=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:m=>{m&&d(m)}});return await this.client.suivreBdDeFonction({fRacine:u,f:c,fSuivre:l})}async ajouterÉlémentÀTableauUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,vals:o}){const c=await uneFois(async l=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:u=>{u&&l(u)}}),!0);return await this.client.tableaux.ajouterÉlément({idTableau:c,vals:o})}async modifierÉlémentDeTableauUnique({vals:e,schémaBd:n,idNuéeUnique:a,clefTableau:o,empreintePrécédente:c}){const l=await uneFois(async u=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:n,idNuéeUnique:a,clefTableau:o,f:d=>{d&&u(d)}}),!0);return await this.client.tableaux.modifierÉlément({idTableau:l,vals:e,empreintePrécédente:c})}async effacerÉlémentDeTableauUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,empreinte:o}){const c=await uneFois(async l=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:u=>{u&&l(u)}}),!0);return await this.client.tableaux.effacerÉlément({idTableau:c,empreinteÉlément:o})}async suivreDonnéesDeTableauParClef({idBd:e,clefTableau:n,f:a}){const o=await uneFois(async c=>await this.suivreIdTableauParClef({idBd:e,clef:n,f:c}),!0);return await this.client.tableaux.suivreDonnées({idTableau:o,f:a})}async ajouterÉlémentÀTableauParClef({idBd:e,clefTableau:n,vals:a}){const o=await uneFois(async c=>await this.suivreIdTableauParClef({idBd:e,clef:n,f:c}));await this.client.tableaux.ajouterÉlément({idTableau:o,vals:a})}async modifierÉlémentDeTableauParClef({idBd:e,clefTableau:n,empreinteÉlément:a,vals:o}){const c=await uneFois(async l=>await this.suivreIdTableauParClef({idBd:e,clef:n,f:l}));this.client.tableaux.modifierÉlément({idTableau:c,vals:o,empreintePrécédente:a})}async effacerÉlémentDeTableauParClef({idBd:e,clefTableau:n,empreinteÉlément:a}){const o=await uneFois(async c=>await this.suivreIdTableauParClef({idBd:e,clef:n,f:c}));this.client.tableaux.effacerÉlément({idTableau:o,empreinteÉlément:a})}async ajouterNomsBd({id:e,noms:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});for(const u in n)await c.set(u,n[u]);await l()}async sauvegarderNomBd({id:e,langue:n,nom:a}){const o=await this.client.obtOpsAccès({idBd:e}),c=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:o});if(!c)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c});await l.set(n,a),await u()}async effacerNomBd({id:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.del(n),await l()}async ajouterDescriptionsBd({id:e,descriptions:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});for(const u in n)await c.set(u,n[u]);await l()}async sauvegarderDescrBd({id:e,langue:n,descr:a}){const o=await this.client.obtOpsAccès({idBd:e}),c=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:o});if(!c)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c});await l.set(n,a),await u()}async effacerDescrBd({id:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.del(n),await l()}async changerLicenceBd({idBd:e,licence:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("licence",n),await o()}async ajouterMotsClefsBd({idBd:e,idsMotsClefs:n}){Array.isArray(n)||(n=[n]);const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});for(const u of n)ClientConstellation.obtÉlémentsDeBdListe({bd:c}).includes(u)||await c.add(u);await l()}async effacerMotClefBd({idBd:e,idMotClef:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:c,élément:n}),await l()}async rejoindreNuées({idBd:e,idsNuées:n}){Array.isArray(n)||(n=[n]);const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"nuées",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});for(const u of n)ClientConstellation.obtÉlémentsDeBdListe({bd:c}).includes(u)||await c.add(u);await l()}async quitterNuée({idBd:e,idNuée:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"nuée",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:c,élément:n}),await l()}async ajouterTableauBd({idBd:e,clefTableau:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});n=n||v4();const u=await this.client.tableaux.créerTableau({idBd:e});return await c.set(u,{position:Object.keys(c.all).length,clef:n}),await l(),u}async effacerTableauBd({id:e,idTableau:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.del(n),await l(),await this.client.tableaux.effacerTableau({idTableau:n})}async spécifierClefTableau({idBd:e,idTableau:n,clef:a}){const o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore"}),{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o}),u=c.get(n);u.clef=a,c.set(n,u),await l()}async marquerObsolète({id:e,idNouvelle:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});a.set("statut",{statut:TYPES_STATUT.OBSOLÈTE,idNouvelle:n}),await o()}async marquerActive({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.ACTIVE}),await a()}async marquerBêta({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.BÊTA}),await a()}async marquerInterne({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.INTERNE}),await a()}async suivreLicence({id:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("licence");await n(o)}})}async inviterAuteur({idBd:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async sauvegarderImage({idBd:e,image:n}){let a;if(n.size!==void 0){if(n.size>MAX_TAILLE_IMAGE$1)throw new Error("Taille maximale excédée");a=await n.arrayBuffer()}else a=n;const o=await this.client.ajouterÀSFIP({fichier:a}),{bd:c,fOublier:l}=await this.client.ouvrirBd({id:e});await c.set("image",o),await l()}async effacerImage({idBd:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});await n.del("image"),await a()}async suivreImage({idBd:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("image");o||await n(null);const c=await this.client.obtFichierSFIP({id:o,max:MAX_TAILLE_IMAGE_VIS$1});await n(c)}})}async suivreNomsBd({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async suivreDescrBd({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",f:n})}async suivreMotsClefsBd({id:e,f:n}){return await this.client.suivreBdListeDeClef({id:e,clef:"motsClefs",f:n})}async suivreTableauxBd({id:e,f:n}){const a=o=>{const c=Object.entries(o).map(([l,u])=>({id:l,...u}));n(c)};return await this.client.suivreBdDicDeClef({id:e,clef:"tableaux",f:a})}async suivreScoreAccèsBd({id:e,f:n}){return n(Number.parseInt(e)),faisRien}async suivreScoreCouvertureBd({id:e,f:n}){const a=l=>{const u=l.reduce((m,b)=>m+b.numérateur,0),d=l.reduce((m,b)=>m+b.dénominateur,0);n(d===0?void 0:u/d)},o=async(l,u)=>{const d={},m=async()=>{const{cols:_,règles:w}=d;if(_!==void 0&&w!==void 0){const S=_.filter(C=>["numérique","catégorique"].includes(typeof C.catégorie=="string"?C.catégorie:C.catégorie?.catégorieBase)),T=S.length,B=S.filter(C=>w.some(D=>D.règle.règle.typeRègle!=="catégorie"&&D.colonne===C.id)).length;await u({numérateur:B,dénominateur:T})}},b=await this.client.tableaux.suivreColonnes({idTableau:l,f:async _=>{d.cols=_,await m()}}),x=await this.client.tableaux.suivreRègles({idTableau:l,f:async _=>{d.règles=_,await m()}});return async()=>{await b(),await x()}},c=async l=>await this.suivreTableauxBd({id:e,f:u=>l(u.map(d=>d.id))});return await this.client.suivreBdsDeFonctionListe({fListe:c,f:a,fBranche:o})}async suivreScoreValideBd({id:e,f:n}){const a=l=>{const u=l.reduce((m,b)=>m+b.numérateur,0),d=l.reduce((m,b)=>m+b.dénominateur,0);n(d===0?void 0:u/d)},o=async(l,u)=>{const d={},m=()=>{const{données:w,erreurs:S,cols:T}=d;if(w!==void 0&&S!==void 0&&T!==void 0){const B=T.filter(Y=>["numérique","catégorique"].includes(typeof Y.catégorie=="string"?Y.catégorie:Y.catégorie?.catégorieBase)),C=[],D=S.map(Y=>({empreinte:Y.empreinte,idColonne:Y.erreur.règle.colonne})).filter(Y=>C.find(O=>O.empreinte===Y.empreinte&&O.idColonne===Y.idColonne)?!1:(C.push(Y),!0)).length,z=w.map(Y=>B.filter(X=>Y.données[X.id]!==void 0).length).reduce((Y,X)=>Y+X,0),U=z-D;u({numérateur:U,dénominateur:z})}},b=await this.client.tableaux.suivreDonnées({idTableau:l,f:w=>{d.données=w,m()}}),x=await this.client.tableaux.suivreValidDonnées({idTableau:l,f:w=>{d.erreurs=w,m()}}),_=await this.client.tableaux.suivreColonnes({idTableau:l,f:w=>{d.cols=w,m()}});return async()=>{await b(),await x(),await _()}},c=async l=>await this.suivreTableauxBd({id:e,f:u=>l(u.map(d=>d.id))});return await this.client.suivreBdsDeFonctionListe({fListe:c,f:a,fBranche:o})}async suivreScoreBd({id:e,f:n}){const a={},o=()=>{const{accès:m,couverture:b,valide:x,licence:_}=a,w={total:_?((m||0)+(b||0)+(x||0))/3:0,accès:m,couverture:b,valide:x,licence:_};n(w)},c=await this.suivreScoreAccèsBd({id:e,f:m=>{a.accès=m,o()}}),l=await this.suivreScoreCouvertureBd({id:e,f:m=>{a.couverture=m,o()}}),u=await this.suivreScoreValideBd({id:e,f:m=>{a.valide=m,o()}}),d=await this.suivreLicence({id:e,f:m=>a.licence=m?1:0});return async()=>{await Promise.all([c,l,u,d])}}async suivreVariablesBd({id:e,f:n}){const a=l=>n(l||[]),o=async(l,u)=>await this.client.tableaux.suivreVariables({idTableau:l,f:u}),c=async l=>await this.suivreTableauxBd({id:e,f:u=>l(u.map(d=>d.id))});return await this.client.suivreBdsDeFonctionListe({fListe:c,f:a,fBranche:o})}async exporterDonnées({id:e,langues:n,nomFichier:a}){const o=utils$1.book_new(),c=new Set,l=await uneFois(u=>this.suivreTableauxBd({id:e,f:u}));for(const u of l){const{id:d}=u,{fichiersSFIP:m}=await this.client.tableaux.exporterDonnées({idTableau:d,langues:n,doc:o});m.forEach(b=>c.add(b))}if(!a){const u=await uneFois(m=>this.suivreNomsBd({id:e,f:m})),d=e.split("/").pop();a=n&&traduire(u,n)||d}return{doc:o,fichiersSFIP:c,nomFichier:a}}async exporterDocumentDonnées({données:e,formatDoc:n,dir:a="",inclureFichiersSFIP:o=!0}){const{doc:c,fichiersSFIP:l,nomFichier:u}=e,m={xls:"biff8"}[n]||n;if(!(isBrowser$2||isWebWorker$1)&&!fs__default.existsSync(a)&&fs__default.mkdirSync(a,{recursive:!0}),o){const b={octets:writeSync(c,{bookType:m,type:"buffer"}),nom:`${u}.${n}`},x=await Promise.all([...l].map(async _=>({nom:`${_.cid}.${_.ext}`,octets:await toBuffer(this.client.obtItérableAsyncSFIP({id:_.cid}))})));return await zipper([b],x,path.join(a,u)),path.join(a,`${u}.zip`)}else return writeFileSync(c,path.join(a,`${u}.${n}`),{bookType:m}),path.join(a,`${u}.${n}`)}async effacerBd({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a();const o=await this.client.obtOpsAccès({idBd:e});for(const l in["noms","descriptions","motsClefs"]){const u=await this.client.obtIdBd({nom:l,racine:e,optionsAccès:o});u&&await this.client.effacerBd({id:u})}const c=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:o});if(c){const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c}),d=Object.keys(l.all);for(const m of d)await this.client.tableaux.effacerTableau({idTableau:m});u(),await this.client.effacerBd({id:c})}await this.enleverDeMesBds({id:e}),await this.client.effacerBd({id:e})}}__decorate([cacheSuivi],BDs.prototype,"suivreBds",null);__decorate([cacheSuivi],BDs.prototype,"suivreParent",null);__decorate([cacheSuivi],BDs.prototype,"suivreNuéesBd",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParMotsClefs",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParNuée",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClefDeBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnéesDeTableauUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnéesDeTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicence",null);__decorate([cacheSuivi],BDs.prototype,"suivreImage",null);__decorate([cacheSuivi],BDs.prototype,"suivreNomsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreDescrBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreMotsClefsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreTableauxBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreAccèsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreCouvertureBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreValideBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreVariablesBd",null);var geojsonValidation={};(function(t){const e={};function n(b){return typeof b=="function"}function a(b){return b===Object(b)}function o(b,x){let _=!1;return typeof x=="string"?x=[x]:Object.prototype.toString.call(x)==="[object Array]"?x.length===0&&(_=!0):_=!0,b?x:_}function c(b,x){let _;if(n(e[b])){try{_=e[b](x)}catch(w){_=["Problem with custom definition for "+b+": "+w]}if(typeof result=="string"&&(_=[_]),Object.prototype.toString.call(_)==="[object Array]")return _}return[]}t.define=(b,x)=>b in m&&n(x)?(e[b]=x,!0):!1,t.isPosition=(b,x=!1)=>{let _=[];return Array.isArray(b)?(b.length<=1&&_.push("Position must be at least two elements"),b.forEach((w,S)=>{typeof w!="number"&&_.push("Position must only contain numbers. Item "+w+" at index "+S+" is invalid.")})):_.push("Position must be an array"),_=_.concat(c("Position",b)),o(x,_)},t.isGeoJSONObject=t.valid=(b,x=!1)=>{if(a(b)){let _=[];if("type"in b){if(u[b.type])return u[b.type](b,x);if(d[b.type])return d[b.type](b,x);_.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else _.push('must have a member with the name "type"');return _=_.concat(c("GeoJSONObject",b)),o(x,_)}else return o(x,["must be a JSON Object"])},t.isGeometryObject=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("type"in b){if(d[b.type])return d[b.type](b,x);_.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else _.push('must have a member with the name "type"');return _=_.concat(c("GeometryObject",b)),o(x,_)},t.isPoint=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("bbox"in b){const w=t.isBbox(b.bbox,!0);w.length&&(_=_.concat(w))}if("type"in b?b.type!=="Point"&&_.push('type must be "Point"'):_.push('must have a member with the name "type"'),"coordinates"in b){const w=t.isPosition(b.coordinates,!0);w.length&&(_=_.concat(w))}else _.push('must have a member with the name "coordinates"');return _=_.concat(c("Point",b)),o(x,_)},t.isMultiPointCoor=(b,x=!1)=>{let _=[];return Array.isArray(b)?b.forEach((w,S)=>{const T=t.isPosition(w,!0);T.length&&(T[0]="at "+S+": ".concat(T[0]),_=_.concat(T))}):_.push("coordinates must be an array"),o(x,_)},t.isMultiPoint=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("bbox"in b){const w=t.isBbox(b.bbox,!0);w.length&&(_=_.concat(w))}if("type"in b?b.type!=="MultiPoint"&&_.push('type must be "MultiPoint"'):_.push('must have a member with the name "type"'),"coordinates"in b){const w=t.isMultiPointCoor(b.coordinates,!0);w.length&&(_=_.concat(w))}else _.push('must have a member with the name "coordinates"');return _=_.concat(c("MultiPoint",b)),o(x,_)},t.isLineStringCoor=(b,x=!1)=>{let _=[];return Array.isArray(b)?b.length>1?b.forEach((w,S)=>{const T=t.isPosition(w,!0);T.length&&(T[0]="at "+S+": ".concat(T[0]),_=_.concat(T))}):_.push("coordinates must have at least two elements"):_.push("coordinates must be an array"),o(x,_)},t.isLineString=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("bbox"in b){const w=t.isBbox(b.bbox,!0);w.length&&(_=_.concat(w))}if("type"in b?b.type!=="LineString"&&_.push('type must be "LineString"'):_.push('must have a member with the name "type"'),"coordinates"in b){const w=t.isLineStringCoor(b.coordinates,!0);w.length&&(_=_.concat(w))}else _.push('must have a member with the name "coordinates"');return _=_.concat(c("LineString",b)),o(x,_)},t.isMultiLineStringCoor=(b,x=!1)=>{let _=[];return Array.isArray(b)?b.forEach((w,S)=>{const T=t.isLineStringCoor(w,!0);T.length&&(T[0]="at "+S+": ".concat(T[0]),_=_.concat(T))}):_.push("coordinates must be an array"),o(x,_)},t.isMultiLineString=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("bbox"in b){const w=t.isBbox(b.bbox,!0);w.length&&(_=_.concat(w))}if("type"in b?b.type!=="MultiLineString"&&_.push('type must be "MultiLineString"'):_.push('must have a member with the name "type"'),"coordinates"in b){const w=t.isMultiLineStringCoor(b.coordinates,!0);w.length&&(_=_.concat(w))}else _.push('must have a member with the name "coordinates"');return _=_.concat(c("MultiPoint",b)),o(x,_)};function l(b,x){let _=[];return Array.isArray(b)?(b.forEach((w,S)=>{const T=t.isPosition(w,!0);T.length&&(T[0]="at "+S+": ".concat(T[0]),_=_.concat(T))}),b[0].toString()!==b[b.length-1].toString()&&_.push("The first and last positions must be equivalent"),b.length<4&&_.push("coordinates must have at least four positions")):_.push("coordinates must be an array"),o(x,_)}t.isPolygonCoor=(b,x=!1)=>{let _=[];return Array.isArray(b)?b.forEach((w,S)=>{const T=l(w,!0);T.length&&(T[0]="at "+S+": ".concat(T[0]),_=_.concat(T))}):_.push("coordinates must be an array"),o(x,_)},t.isPolygon=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("bbox"in b){const w=t.isBbox(b.bbox,!0);w.length&&(_=_.concat(w))}if("type"in b?b.type!=="Polygon"&&_.push('type must be "Polygon"'):_.push('must have a member with the name "type"'),"coordinates"in b){const w=t.isPolygonCoor(b.coordinates,!0);w.length&&(_=_.concat(w))}else _.push('must have a member with the name "coordinates"');return _=_.concat(c("Polygon",b)),o(x,_)},t.isMultiPolygonCoor=(b,x=!1)=>{let _=[];return Array.isArray(b)?b.forEach((w,S)=>{const T=t.isPolygonCoor(w,!0);T.length&&(T[0]="at "+S+": ".concat(T[0]),_=_.concat(T))}):_.push("coordinates must be an array"),o(x,_)},t.isMultiPolygon=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("bbox"in b){const w=t.isBbox(b.bbox,!0);w.length&&(_=_.concat(w))}if("type"in b?b.type!=="MultiPolygon"&&_.push('type must be "MultiPolygon"'):_.push('must have a member with the name "type"'),"coordinates"in b){const w=t.isMultiPolygonCoor(b.coordinates,!0);w.length&&(_=_.concat(w))}else _.push('must have a member with the name "coordinates"');return _=_.concat(c("MultiPolygon",b)),o(x,_)},t.isGeometryCollection=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("bbox"in b){const w=t.isBbox(b.bbox,!0);w.length&&(_=_.concat(w))}return"type"in b?b.type!=="GeometryCollection"&&_.push('type must be "GeometryCollection"'):_.push('must have a member with the name "type"'),"geometries"in b?Array.isArray(b.geometries)?b.geometries.forEach((w,S)=>{const T=t.isGeometryObject(w,!0);T.length&&(T[0]="at "+S+": ".concat(T[0]),_=_.concat(T))}):_.push('"geometries" must be an array'):_.push('must have a member with the name "geometries"'),_=_.concat(c("GeometryCollection",b)),o(x,_)},t.isFeature=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("bbox"in b){const w=t.isBbox(b.bbox,!0);w.length&&(_=_.concat(w))}if("type"in b?b.type!=="Feature"&&_.push('type must be "Feature"'):_.push('must have a member with the name "type"'),"properties"in b||_.push('must have a member with the name "properties"'),"geometry"in b){if(b.geometry!==null){const w=t.isGeometryObject(b.geometry,!0);w.length&&(_=_.concat(w))}}else _.push('must have a member with the name "geometry"');return _=_.concat(c("Feature",b)),o(x,_)},t.isFeatureCollection=(b,x=!1)=>{if(!a(b))return o(x,["must be a JSON Object"]);let _=[];if("bbox"in b){const w=t.isBbox(b.bbox,!0);w.length&&(_=w)}return"type"in b?b.type!=="FeatureCollection"&&_.push('type must be "FeatureCollection"'):_.push('must have a member with the name "type"'),"features"in b?Array.isArray(b.features)?b.features.forEach((w,S)=>{const T=t.isFeature(w,!0);T.length&&(T[0]="at "+S+": ".concat(T[0]),_=_.concat(T))}):_.push('"Features" must be an array'):_.push('must have a member with the name "Features"'),_=_.concat(c("FeatureCollection",b)),o(x,_)},t.isBbox=(b,x=!1)=>{let _=[];return Array.isArray(b)?b.length%2!==0&&_.push("bbox, must be a 2*n array"):_.push("bbox must be an array"),_=_.concat(c("Bbox",b)),o(x,_)};const u={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection},d={Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection},m={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection,Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection,Bbox:t.isBbox,Position:t.isPosition,GeoJSON:t.isGeoJSONObject,GeometryObject:t.isGeometryObject};t.allTypes=m})(geojsonValidation);function générerFonctionRègle({règle:t,varsÀColonnes:e,donnéesCatégorie:n}){const a=t.règle,{colonne:o}=t,{typeRègle:c}=a.règle;switch(c){case"existe":return l=>l.filter(d=>d.données[o]===void 0).map(d=>{const{empreinte:m}=d;return{empreinte:m,erreur:{règle:t}}});case"catégorie":return l=>{const u=a.règle.détails.catégorie;return l.filter(m=>!validerCatégorieVal({val:m.données[o],catégorie:u})).map(m=>{const{empreinte:b}=m;return{empreinte:b,erreur:{règle:t}}})};case"bornes":{const l=a;let u,d;const{val:m,op:b,type:x}=l.règle.détails,_=(w,S)=>w===void 0||S===void 0;switch(b){case">":d=(w,S)=>_(w,S)||w>S;break;case"<":d=(w,S)=>_(w,S)||w<S;break;case">=":d=(w,S)=>_(w,S)||w>=S;break;case"<=":d=(w,S)=>_(w,S)||w<=S;break}return x==="fixe"?u=w=>d(w.données[o],m):u=w=>d(w.données[o],x==="dynamiqueVariable"?w.données[e[m]]:w.données[m]),w=>w.filter(T=>!u(T)).map(T=>{const{empreinte:B}=T;return{empreinte:B,erreur:{règle:t}}})}case"valeurCatégorique":{const l=a.règle,u=l.détails.type==="fixe"?l.détails.options:n;if(!u)throw new Error("Options non spécifiées");return d=>d.filter(b=>b.données[o]!==void 0&&!u.includes(b.données[o])).map(b=>{const{empreinte:x}=b;return{empreinte:x,colonne:o,erreur:{règle:t}}})}default:throw Error(`Catégorie ${c} inconnue.`)}}const formatsFichiers={images:["webp","svg","png","jpg","jpeg","jfif","pjpeg","pjp","gif","avif","apng"],vidéo:["mp4"],audio:["mp3","ogg","m4a"]};function validFichier(t,e){if(typeof t!="object")return!1;const{cid:n,ext:a}=t;return!cidValide(n)||typeof a!="string"?!1:e?e.includes(a.replace(".","")):!0}function validerCatégorieVal({val:t,catégorie:e}){if(t===void 0)return!0;const n=a=>{if(!["number","string"].includes(typeof a))return!1;const o=new Date(a);return!isNaN(o.valueOf())};switch(e){case"numérique":return typeof t=="number";case"horoDatage":return n(t);case"intervaleTemps":return Array.isArray(t)?t.every(a=>n(a)):!1;case"chaîne":return typeof t=="string";case"catégorique":return!0;case"booléen":return typeof t=="boolean";case"géojson":return typeof t!="object"?!1:geojsonValidation.valid(t);case"vidéo":return validFichier(t,formatsFichiers.vidéo);case"audio":return validFichier(t,formatsFichiers.audio);case"photo":return validFichier(t,formatsFichiers.images);case"fichier":return validFichier(t);default:return!1}}function élémentsÉgaux(t,e){const n=Object.keys(t).filter(o=>o!=="id"),a=Object.keys(e).filter(o=>o!=="id");return!(!n.every(o=>t[o]===e[o])||!a.every(o=>t[o]===e[o]))}function indexÉlémentsÉgaux(t,e,n){return!!n.every(a=>t[a]===e[a])}class Tableaux{constructor({client:e}){lt(this,"client");this.client=e}async créerTableau({idBd:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:n}),{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a}),l=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:n});await o.set("noms",l);const u=await this.client.créerBdIndépendante({type:"feed",optionsAccès:n});await o.set("données",u);const d=await this.client.créerBdIndépendante({type:"feed",optionsAccès:n});await o.set("colonnes",d);const m=await this.client.créerBdIndépendante({type:"feed",optionsAccès:n});return await o.set("règles",m),await c(),a}async copierTableau({id:e,idBd:n,copierDonnées:a=!0}){const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:e}),l=await this.créerTableau({idBd:n}),{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l}),m=o.get("noms"),{bd:b,fOublier:x}=await this.client.ouvrirBd({id:m}),_=b.all;return await this.ajouterNomsTableau({idTableau:l,noms:_}),await x(),await this.client.copierContenuBdListe({bdBase:o,nouvelleBd:u,clef:"colonnes"}),await this.client.copierContenuBdListe({bdBase:o,nouvelleBd:u,clef:"règles"}),a&&await this.client.copierContenuBdListe({bdBase:o,nouvelleBd:u,clef:"données"}),await c(),await d(),l}async suivreDifférencesAvecTableau({idTableau:e,idTableauRéf:n,f:a}){const o={},c=async()=>{if(!o.colonnesTableau||!o.colonnesTableauRéf)return;const d=[];for(const m of o.colonnesTableauRéf){const b=o.colonnesTableau.find(x=>x.id===m.id);if(b){if(b.variable!==m.variable){const x={type:"variableColonne",sévère:!0,idCol:b.id,varColTableau:b.variable,varColTableauLiée:m.variable};d.push(x)}if(b.index!==m.index){const x={type:"indexColonne",sévère:!0,idCol:b.id,colTableauIndexée:b.index};d.push(x)}}else{const x={type:"colonneManquante",sévère:!0,idManquante:m.id};d.push(x)}}for(const m of o.colonnesTableau)if(!o.colonnesTableauRéf.find(x=>x.id===m.id)){const x={type:"colonneSupplémentaire",sévère:!1,idExtra:m.id};d.push(x)}await a(d)},l=await this.suivreColonnes({idTableau:e,f:async d=>{o.colonnesTableau=d,await c()},catégories:!1}),u=await this.suivreColonnes({idTableau:n,f:async d=>{o.colonnesTableauRéf=d,await c()},catégories:!1});return async()=>{await Promise.all([l,u])}}async changerColIndex({idTableau:e,idColonne:n,val:a}){const o=await this.client.obtOpsAccès({idBd:e}),c=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"feed",optionsAccès:o});if(!c)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c}),m=ClientConstellation.obtÉlémentsDeBdListe({bd:l,renvoyerValeur:!1}).find(b=>b.payload.value.id===n);if(m&&Boolean(m.payload.value.index)!==a){const{value:b}=m.payload,x=Object.assign(b,{index:a});await l.remove(m.hash),await l.add(x)}await u()}async suivreIndex({idTableau:e,f:n}){const a=o=>{const c=o.filter(l=>l.index).map(l=>l.id);n(c)};return await this.suivreColonnes({idTableau:e,f:a})}async suivreDonnées({idTableau:e,f:n,clefsSelonVariables:a=!1}){const o={},c=()=>{const{données:b,colonnes:x}=o;if(b&&x){const _=b.map(w=>{const S=w.hash,T=w.payload.value;return{données:a?Object.keys(T).reduce((C,D)=>{const z=D==="id"?"id":x[D];return C[z]=T[D],C},{}):T,empreinte:S}});n(_)}},l=b=>{o.colonnes=Object.fromEntries(b.map(x=>[x.id,x.variable])),c()},u=await this.suivreColonnes({idTableau:e,f:l,catégories:!1}),d=b=>{o.données=b,c()},m=await this.client.suivreBdListeDeClef({id:e,clef:"données",f:d,renvoyerValeur:!1});return async()=>{await m(),await u()}}async exporterDonnées({idTableau:e,langues:n,doc:a,nomFichier:o}){a=a||utils$1.book_new();const c=new Set;let l;const u=e.split("/").pop();if(n){const w=await uneFois(S=>this.suivreNomsTableau({idTableau:e,f:S}));l=traduire(w,n)||u}else l=u;const d=await uneFois(w=>this.suivreColonnes({idTableau:e,f:w})),m=await uneFois(w=>this.suivreDonnées({idTableau:e,f:w})),b=w=>{const S={};for(const T of Object.keys(w)){const B=d.find(U=>U.id===T);if(!B)continue;const{variable:C,catégorie:D}=B;let z;switch(typeof w[T]){case"object":if(typeof D=="string"&&["audio","photo","vidéo","fichier"].includes(D)){const{cid:U,ext:Y}=w[T];if(!U||!Y)continue;z=`${U}.${Y}`,c.add({cid:U,ext:Y})}else z=JSON.stringify(w[T]);break;case"boolean":z=w[T].toString();break;case"number":z=w[T];break;case"string":z=w[T];break;default:continue}z!==void 0&&(S[n?C:T]=z)}return S};let x=m.map(w=>b(w.données));if(n){const w=await uneFois(T=>this.suivreVariables({idTableau:e,f:T})),S={};for(const T of w){const B=await uneFois(D=>this.client.variables.suivreNomsVariable({id:T,f:D})),C=d.find(D=>D.variable===T).id;S[T]=traduire(B,n)||C}x=x.map(T=>Object.keys(T).reduce((B,C)=>{const D=S[C];return B[D]=T[C],B},{}))}const _=utils$1.json_to_sheet(x);return utils$1.book_append_sheet(a,_,l.slice(0,30)),o=o||l,{doc:a,fichiersSFIP:c,nomFichier:o}}async ajouterÉlément({idTableau:e,vals:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"données",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});n=await this.vérifierClefsÉlément({idTableau:e,élément:n});const u=v4(),d=await c.add({...n,id:u});return await l(),d}async modifierÉlément({idTableau:e,vals:n,empreintePrécédente:a}){const o=await this.client.obtOpsAccès({idBd:e}),c=await this.client.obtIdBd({nom:"données",racine:e,type:"feed",optionsAccès:o});if(!c)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c}),d=this.client.obtÉlémentBdListeSelonEmpreinte({bd:l,empreinte:a});let m=Object.assign({},d,n);if(Object.keys(n).map(b=>{n[b]===void 0&&delete m[b]}),m=await this.vérifierClefsÉlément({idTableau:e,élément:m}),élémentsÉgaux(m,d))return await u(),Promise.resolve(a);{const b=await Promise.all([l.remove(a),l.add(m)]);return await u(),b[1]}}async vérifierClefsÉlément({idTableau:e,élément:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o}),d=[...c.iterator({limit:-1}).collect().map(b=>b.payload.value.id),"id"],m=Object.keys(n).filter(b=>d.includes(b));return await l(),Object.fromEntries(m.map(b=>[b,n[b]]))}async effacerÉlément({idTableau:e,empreinteÉlément:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"données",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.remove(n),await l()}async combinerDonnées({idTableauBase:e,idTableau2:n}){const a=await uneFois(async u=>await this.suivreColonnes({idTableau:e,f:u})),o=await uneFois(async u=>await this.suivreDonnées({idTableau:e,f:u})),c=await uneFois(async u=>await this.suivreDonnées({idTableau:n,f:u})),l=a.filter(u=>u.index).map(u=>u.id);for(const u of c){const d=o.find(m=>indexÉlémentsÉgaux(m.données,u.données,l));if(d){const m={};for(const b of a)d.données[b.id]===void 0&&u.données[b.id]!==void 0&&(m[b.id]=u.données[b.id]);Object.keys(m).length&&(await this.effacerÉlément({idTableau:e,empreinteÉlément:d.empreinte}),await this.ajouterÉlément({idTableau:e,vals:Object.assign({},d.données,m)}))}else await this.ajouterÉlément({idTableau:e,vals:u.données})}}async importerDonnées({idTableau:e,données:n}){const a=await uneFois(async l=>await this.suivreDonnées({idTableau:e,f:l})),o=[];for(const l of n)a.some(u=>élémentsÉgaux(u.données,l))||o.push(l);const c=[];for(const l of a)n.some(u=>élémentsÉgaux(u,l.données))||c.push(l.empreinte);for(const l of o)await this.ajouterÉlément({idTableau:e,vals:l});for(const l of c)await this.effacerÉlément({idTableau:e,empreinteÉlément:l})}async ajouterNomsTableau({idTableau:e,noms:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});for(const u in n)await c.set(u,n[u]);await l()}async sauvegarderNomTableau({idTableau:e,langue:n,nom:a}){const o=await this.client.obtOpsAccès({idBd:e}),c=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:o});if(!c)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c});await l.set(n,a),await u()}async effacerNomTableau({idTableau:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.del(n),await l()}async suivreNomsTableau({idTableau:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async ajouterColonneTableau({idTableau:e,idVariable:n,idColonne:a}){const o=await this.client.obtOpsAccès({idBd:e}),c=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"feed",optionsAccès:o});if(!c)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c}),d={id:a||v4(),variable:n};return await l.add(d),await u(),d.id}async effacerColonneTableau({idTableau:e,idColonne:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:c,élément:u=>u.payload.value.id===n}),await l()}async suivreColonnes({idTableau:e,f:n,catégories:a=!0}){const o=m=>n(m||[]),c=async(m,b,x)=>m?await this.client.variables.suivreCatégorieVariable({id:m,f:async _=>{const w=Object.assign({catégorie:_},x);await b(w)}}):faisRien,l=m=>m.variable,u=m=>m.id,d=async({id:m,fSuivreBd:b})=>await this.client.suivreBdsDeBdListe({id:m,f:b,fBranche:c,fIdBdDeBranche:l,fCode:u});return a?await this.client.suivreBdDeClef({id:e,clef:"colonnes",f:o,fSuivre:d}):await this.client.suivreBdListeDeClef({id:e,clef:"colonnes",f:o})}async suivreVariables({idTableau:e,f:n}){const a=c=>{n((c||[]).filter(l=>l&&OrbitDB.isValidAddress(l)))},o=async({id:c,fSuivreBd:l})=>await this.client.suivreBdListe({id:c,f:u=>l(u.map(d=>d.variable))});return await this.client.suivreBdDeClef({id:e,clef:"colonnes",f:a,fSuivre:o})}async ajouterRègleTableau({idTableau:e,idColonne:n,règle:a}){const o=await this.client.obtOpsAccès({idBd:e}),c=await this.client.obtIdBd({nom:"règles",racine:e,type:"feed",optionsAccès:o});if(!c)throw new Error(`Permission de modification refusée pour tableau ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c}),d=v4(),b={règle:{id:d,règle:a},source:"tableau",colonne:n};return await l.add(b),await u(),d}async effacerRègleTableau({idTableau:e,idRègle:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"règles",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour tableau ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:c,élément:u=>u.payload.value.règle.id===n}),await l()}async suivreRègles({idTableau:e,f:n}){const a={},o=()=>{if(!(!a.tableau||!a.variable))return n([...a.tableau,...a.variable])},c=S=>{a.tableau=S,o()},l=await this.client.suivreBdListeDeClef({id:e,clef:"règles",f:c}),u=async S=>await this.suivreColonnes({idTableau:e,f:S}),d=S=>{a.variable=S,o()},m=async(S,T,B)=>{const C=D=>{const z=D.map(U=>({règle:U,source:"variable",colonne:B.id}));return T(z)};return await this.client.variables.suivreRèglesVariable({id:S,f:C})},b=S=>S.variable,x=S=>S.id,_=await this.client.suivreBdsDeFonctionListe({fListe:u,f:d,fBranche:m,fIdBdDeBranche:b,fCode:x});return async()=>{await l(),await _()}}async suivreValidDonnées({idTableau:e,f:n}){const a={},o=()=>{if(!a.données||!a.règles)return;let T=[];for(const B of a.règles){const C=B(a.données);T=[...T,...C.flat()]}n(T)},c=T=>{a.varsÀColonnes&&(a.règles=T.map(B=>générerFonctionRègle({règle:B.règle,varsÀColonnes:a.varsÀColonnes,donnéesCatégorie:B.donnéesCatégorie})),o())},l=T=>{a.données=T,o()},u=await this.suivreColonnes({idTableau:e,f:T=>{const B=T.reduce((C,D)=>({...C,[D.variable]:D.id}),{});a.varsÀColonnes=B}}),d=async T=>await this.suivreRègles({idTableau:e,f:T}),m=async(T,B,C)=>{if(C.règle.règle.typeRègle==="valeurCatégorique"&&C.règle.règle.détails.type==="dynamique"){const{tableau:D,colonne:z}=C.règle.règle.détails;return await this.suivreDonnées({idTableau:D,f:U=>B({règle:C,donnéesCatégorie:U.map(Y=>Y.données[z])})})}else return B({règle:C}),faisRien},b=T=>T.règle.id,x=T=>T.règle.id,_=await this.client.suivreBdsDeFonctionListe({fListe:d,f:c,fBranche:m,fIdBdDeBranche:b,fCode:x}),w=await this.suivreDonnées({idTableau:e,f:l});return async()=>{await _(),await w(),await u()}}async suivreValidRègles({idTableau:e,f:n}){const a={},o=()=>{if(!a.colonnes||!a.règles)return;const w=[],S=a.règles.map(D=>D.règle).filter(D=>D.règle.règle.typeRègle==="bornes"),T=S.filter(D=>D.règle.règle.détails.type==="dynamiqueColonne"),B=S.filter(D=>D.règle.règle.détails.type==="dynamiqueVariable"),C=a.règles.filter(D=>D.règle.règle.règle.typeRègle==="valeurCatégorique"&&D.règle.règle.règle.détails.type==="dynamique");for(const D of T)if(!a.colonnes.find(U=>U.id===D.règle.règle.détails.val)){const U={règle:D,détails:"colonneBornesInexistante"};w.push(U)}for(const D of B)if(!a.colonnes.find(U=>U.variable===D.règle.règle.détails.val)){const U={règle:D,détails:"variableBornesNonPrésente"};w.push(U)}for(const D of C)if(!D.colsTableauRéf?.find(U=>U.id===D.règle.règle.règle.détails.colonne)){const U={règle:D.règle,détails:"colonneCatégInexistante"};w.push(U)}n(w)},c=w=>{a.règles=w,o()},l=await this.suivreColonnes({idTableau:e,f:w=>{a.colonnes=w,o()}}),u=async w=>await this.suivreRègles({idTableau:e,f:w}),d=async(w,S,T)=>{if(T.règle.règle.typeRègle==="valeurCatégorique"&&T.règle.règle.détails.type==="dynamique"){const{tableau:B}=T.règle.règle.détails;return await this.suivreColonnes({idTableau:B,f:C=>S({règle:T,colsTableauRéf:C})})}else return S({règle:T}),faisRien},m=w=>w.règle.id,b=w=>w.règle.id,x=await this.client.suivreBdsDeFonctionListe({fListe:u,f:c,fBranche:d,fIdBdDeBranche:m,fCode:b});return async()=>{await x(),await l()}}async effacerTableau({idTableau:e}){const n=await this.client.obtOpsAccès({idBd:e});for(const a in["noms","données","colonnes","règles"]){const o=await this.client.obtIdBd({nom:a,racine:e,optionsAccès:n});o&&await this.client.effacerBd({id:o})}await this.client.effacerBd({id:e})}}__decorate([cacheSuivi],Tableaux.prototype,"suivreDifférencesAvecTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreIndex",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreDonnées",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreNomsTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreColonnes",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreVariables",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreRègles",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidDonnées",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidRègles",null);class Variables{constructor({client:e,id:n}){lt(this,"client");lt(this,"idBd");this.client=e,this.idBd=n}async suivreVariables({f:e,idBdVariables:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async créerVariable({catégorie:e}){if(typeof e!="string")throw new Error(`catégorie doit être une chaîne, mais ${e} est de type ${typeof e}.`);const n=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}});await this.ajouterÀMesVariables({id:n});const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:n}),l={address:a.access.address};await a.set("type","variable");const u=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:l});await a.set("noms",u);const d=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:l});await a.set("descriptions",d);const m=await this.client.créerBdIndépendante({type:"feed",optionsAccès:l});return await a.set("règles",m),await a.set("catégorie",e),await this.établirStatut({id:n,statut:{statut:TYPES_STATUT.ACTIVE}}),o(),n}async ajouterÀMesVariables({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async enleverDeMesVariables({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a()}async copierVariable({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e}),o=n.get("catégorie"),c=await this.créerVariable({catégorie:o}),{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c}),d=n.get("noms"),{bd:m,fOublier:b}=await this.client.ouvrirBd({id:d}),x=ClientConstellation.obtObjetdeBdDic({bd:m});await this.ajouterNomsVariable({id:c,noms:x});const _=n.get("descriptions"),{bd:w,fOublier:S}=await this.client.ouvrirBd({id:_}),T=ClientConstellation.obtObjetdeBdDic({bd:w});await this.ajouterDescriptionsVariable({id:c,descriptions:T});const B=n.get("unités");B&&await l.put("unités",B);const C=n.get("règles"),{bd:D,fOublier:z}=await this.client.ouvrirBd({id:C}),U=ClientConstellation.obtÉlémentsDeBdListe({bd:D});await Promise.all(U.map(async X=>{await this.ajouterRègleVariable({idVariable:c,règle:X.règle})}));const Y=n.get("statut")||{statut:TYPES_STATUT.ACTIVE};return await this.établirStatut({id:c,statut:Y}),a(),u(),b(),S(),z(),c}async inviterAuteur({idVariable:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async ajouterNomsVariable({id:e,noms:n}){const a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a});for(const l in n)await o.set(l,n[l]);await c()}async sauvegarderNomVariable({id:e,langue:n,nom:a}){const o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.set(n,a),await l()}async effacerNomVariable({id:e,langue:n}){const a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a});await o.del(n),await c()}async ajouterDescriptionsVariable({id:e,descriptions:n}){const a=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a});for(const l in n)await o.set(l,n[l]);await c()}async sauvegarderDescrVariable({id:e,langue:n,description:a}){const o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore"});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.set(n,a),await l()}async effacerDescrVariable({id:e,langue:n}){const a=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a});await o.del(n),await c()}async sauvegarderCatégorieVariable({idVariable:e,catégorie:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("catégorie",n),await o()}async sauvegarderUnitésVariable({idVariable:e,idUnité:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("unités",n),await o()}async ajouterRègleVariable({idVariable:e,règle:n,idRègle:a}){const o=await this.client.obtIdBd({nom:"règles",racine:e,type:"feed"});if(!o)throw new Error(`Permission de modification refusée pour variable ${e}.`);a=a||v4();const c={id:a,règle:n},{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});return await l.add(c),await u(),a}async effacerRègleVariable({idVariable:e,idRègle:n}){const a=await this.client.obtIdBd({nom:"règles",racine:e,type:"feed"});if(!a)throw new Error(`Permission de modification refusée pour variable ${e}.`);const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a});await this.client.effacerÉlémentDeBdListe({bd:o,élément:l=>l.payload.value.id===n}),await c()}async modifierRègleVariable({idVariable:e,règleModifiée:n,idRègle:a}){await this.effacerRègleVariable({idVariable:e,idRègle:a}),await this.ajouterRègleVariable({idVariable:e,règle:n,idRègle:a})}async suivreNomsVariable({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async suivreDescrVariable({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",f:n})}async suivreCatégorieVariable({id:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("catégorie");await n(o)}})}async suivreUnitésVariable({id:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("unités");await n(o)}})}async suivreRèglesVariable({id:e,f:n}){const a={catégorie:[],propres:[]},o=()=>{n([...a.catégorie,...a.propres])},c=b=>{const x={id:v4(),règle:{typeRègle:"catégorie",détails:{catégorie:b}}};a.catégorie=[x],o()},l=await this.suivreCatégorieVariable({id:e,f:c}),u=b=>{a.propres=b,o()},d=await this.client.suivreBdListeDeClef({id:e,clef:"règles",f:u});return async()=>{await l(),await d()}}async suivreQualitéVariable({id:e,f:n}){const a={noms:{},descr:{},règles:[]},o=()=>{const x=[Object.keys(a.noms).length?1:0,Object.keys(a.descr).length?1:0];a.catégorie==="numérique"&&x.push(a.unités?1:0),(a.catégorie==="numérique"||a.catégorie==="catégorique")&&x.push(a.règles.length>=1?1:0);const _=x.reduce((w,S)=>w+S,0)/x.length;n(_)},c=await this.suivreNomsVariable({id:e,f:x=>{a.noms=x,o()}}),l=await this.suivreDescrVariable({id:e,f:x=>{a.descr=x,o()}}),u=await this.suivreUnitésVariable({id:e,f:x=>{a.unités=x,o()}}),d=await this.suivreCatégorieVariable({id:e,f:x=>{a.catégorie=x,o()}}),m=await this.suivreRèglesVariable({id:e,f:x=>{a.règles=x,o()}});return async()=>{await c(),await l(),await u(),await d(),await m()}}async établirStatut({id:e,statut:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("statut",n),await o()}async marquerObsolète({id:e,idNouvelle:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});a.set("statut",{statut:TYPES_STATUT.OBSOLÈTE,idNouvelle:n}),await o()}async effacerVariable({id:e}){await this.enleverDeMesVariables({id:e});const n=await this.client.obtOpsAccès({idBd:e});for(const a in["noms","descriptions","règles"]){const o=await this.client.obtIdBd({nom:a,racine:e,optionsAccès:n});o&&await this.client.effacerBd({id:o})}await this.client.effacerBd({id:e})}}__decorate([cacheSuivi],Variables.prototype,"suivreVariables",null);__decorate([cacheSuivi],Variables.prototype,"suivreNomsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreDescrVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreCatégorieVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreUnitésVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreRèglesVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreQualitéVariable",null);function baseSum$1(t,e){for(var n,a=-1,o=t.length;++a<o;){var c=e(t[a]);c!==void 0&&(n=n===void 0?c:n+c)}return n}var _baseSum=baseSum$1;function identity$2(t){return t}var identity_1=identity$2,baseSum=_baseSum,identity$1=identity_1;function sum$1(t){return t&&t.length?baseSum(t,identity$1):0}var sum_1=sum$1,average$3=function t(e){return e.reduce(sum,0)/e.length};function sum(t,e){return t+e}var average$2=average$3,variance$1=function t(e){var n=average$2(e);function a(o,c){var l=c-n;return o+l*l}return e.reduce(a,0)/e.length},average$1=average$3,covariance$1=function t(e,n){for(var a=e.length,o=0,c=average$1(e),l=average$1(n),u=[];o<a;o+=1){var d=e[o]-c,m=n[o]-l;u.push(d*m)}return average$1(u)},average=average$3,variance=variance$1,covariance=covariance$1,ssim=function t(e,n,a){a=a||{};var o="K1"in a?a.K1:.01,c="K2"in a?a.K2:.03,l="L"in a?a.L:255,u="alpha"in a?a.alpha:1,d="beta"in a?a.beta:1,m="gamma"in a?a.gamma:1,b=o*l*(o*l),x=c*l*(c*l),_=x/2;function w(z,U){var Y=average(z),X=average(U);return(2*Y*X+b)/(Y*Y+X*X+b)}function S(z,U){var Y=variance(z),X=variance(U),O=Math.sqrt(Y),J=Math.sqrt(X);return(2*O*J+x)/(Y+X+x)}function T(z,U){var Y=Math.sqrt(variance(z)),X=Math.sqrt(variance(U)),O=covariance(z,U);return(O+_)/(Y*X+_)}var B=Math.pow(w(e,n),u),C=Math.pow(S(e,n),d),D=Math.pow(T(e,n),m);return B*C*D};function reverse(t){return t.split("").reverse().join("")}function findMatchStarts(t,e,n){const a=reverse(e);return n.map(o=>{const c=Math.max(0,o.end-e.length-o.errors),l=reverse(t.slice(c,o.end));return{start:findMatchEnds(l,a,o.errors).reduce((d,m)=>o.end-m.end<d?o.end-m.end:d,o.end),end:o.end,errors:o.errors}})}function oneIfNotZero(t){return(t|-t)>>31&1}function advanceBlock(t,e,n,a){let o=t.P[n],c=t.M[n];const l=a>>>31,u=e[n]|l,d=u|c,m=(u&o)+o^o|u;let b=c|~(m|o),x=o&m;const _=oneIfNotZero(b&t.lastRowMask[n])-oneIfNotZero(x&t.lastRowMask[n]);return b<<=1,x<<=1,x|=l,b|=oneIfNotZero(a)-l,o=x|~(d|b),c=b&d,t.P[n]=o,t.M[n]=c,_}function findMatchEnds(t,e,n){if(e.length===0)return[];n=Math.min(n,e.length);const a=[],o=32,c=Math.ceil(e.length/o)-1,l={P:new Uint32Array(c+1),M:new Uint32Array(c+1),lastRowMask:new Uint32Array(c+1)};l.lastRowMask.fill(1<<31),l.lastRowMask[c]=1<<(e.length-1)%o;const u=new Uint32Array(c+1),d=new Map,m=[];for(let _=0;_<256;_++)m.push(u);for(let _=0;_<e.length;_+=1){const w=e.charCodeAt(_);if(d.has(w))continue;const S=new Uint32Array(c+1);d.set(w,S),w<m.length&&(m[w]=S);for(let T=0;T<=c;T+=1){S[T]=0;for(let B=0;B<o;B+=1){const C=T*o+B;if(C>=e.length)continue;e.charCodeAt(C)===w&&(S[T]|=1<<B)}}}let b=Math.max(0,Math.ceil(n/o)-1);const x=new Uint32Array(c+1);for(let _=0;_<=b;_+=1)x[_]=(_+1)*o;x[c]=e.length;for(let _=0;_<=b;_+=1)l.P[_]=-1,l.M[_]=0;for(let _=0;_<t.length;_+=1){const w=t.charCodeAt(_);let S;w<m.length?S=m[w]:(S=d.get(w),typeof S>"u"&&(S=u));let T=0;for(let B=0;B<=b;B+=1)T=advanceBlock(l,S,B,T),x[B]+=T;if(x[b]-T<=n&&b<c&&(S[b+1]&1||T<0)){b+=1,l.P[b]=-1,l.M[b]=0;let B;if(b===c){const C=e.length%o;B=C===0?o:C}else B=o;x[b]=x[b-1]+B-T+advanceBlock(l,S,b,T)}else for(;b>0&&x[b]>=n+o;)b-=1;b===c&&x[b]<=n&&(x[b]<n&&a.splice(0,a.length),a.push({start:-1,end:_+1,errors:x[b]}),n=x[b])}return a}function search(t,e,n){const a=findMatchEnds(t,e,n);return findMatchStarts(t,e,a)}const rechercherDansTexte=(t,e)=>{const a=search(e,t,Math.ceil(t.length/4)).sort((o,c)=>o.errors>c.errors?1:-1)[0];if(a)return{type:"texte",score:1/(a.errors+1),début:a.start,fin:a.end}},similTexte=(t,e)=>(Array.isArray(e)&&(e=Object.fromEntries(e.map(o=>[o,o]))),Object.entries(e).map(([o,c])=>{const l=rechercherDansTexte(t,c);if(l){const{score:u,début:d,fin:m}=l;return{type:"résultat",score:u,clef:o,info:{type:"texte",texte:c,début:d,fin:m}}}}).filter(o=>o).sort((o,c)=>o.score>c.score?-1:1)[0]),similImages=(t,e)=>{if(!e)return 0;const{mssim:n}=ssim(t,e);return n},combinerRecherches=async(t,e,n,a)=>{const o=[],c=Object.fromEntries(Object.keys(t).map(u=>[u,void 0])),l=()=>{const u=Object.values(c).filter(d=>d).sort((d,m)=>aMieuxQueB(d,m)?-1:1)[0];a(u)};return await Promise.all(Object.entries(t).map(async([u,d])=>{const m=b=>{c[u]=b,l()};o.push(await d(e,n,m))})),async()=>{await Promise.all(o.map(u=>u()))}},sousRecherche=async(t,e,n,a,o)=>{const c=async(d,m)=>await n(a,d,b=>{b&&m({id:d,résultat:b})}),l=d=>{const m=meilleurRésultat(d);if(m){const b={type:"résultat",de:t,clef:m.id,score:m.résultat.score,info:{type:"résultat",de:m.résultat.de,info:m.résultat.info}};m.résultat.clef&&(b.info.clef=m.résultat.clef),o(b)}};return await a.suivreBdsDeFonctionListe({fListe:e,f:l,fBranche:c})},aMieuxQueB=(t,e)=>{const n=(a,o)=>{for(;a.type==="résultat";)a=a.info;for(;o.type==="résultat";)o=o.info;switch(a.type){case"texte":return o.type==="texte"?a.fin-a.début>o.fin-o.début:!1;default:return!0}};return t.score>e.score?!0:t.score<e.score?!1:!!n(t.info,e.info)},meilleurRésultat=t=>Object.values(t).filter(n=>n).sort((n,a)=>aMieuxQueB(n.résultat,a.résultat)?-1:1)[0],rechercherSelonId=t=>async(e,n,a)=>{const o=rechercherDansTexte(t,n);if(o){const{score:c,début:l,fin:u}=o;a({score:c,type:"résultat",de:"id",info:{type:"texte",début:l,fin:u,texte:n}})}else a();return faisRien},rechercherTous=()=>async(t,e,n)=>(n({type:"résultat",score:1,de:"*",info:{type:"vide"}}),faisRien),rechercherProfilSelonActivité=()=>async(t,e,n)=>{const a={noms:{},image:void 0,courriel:void 0},o=()=>({type:"résultat",score:[Object.keys(a.noms).length>0,a.image,a.courriel].filter(Boolean).length/3,de:"activité",info:{type:"vide"}}),c=_=>{a.noms=_,n(o())},l=_=>{a.image=_,n(o())},u=_=>{a.courriel=_,n(o())},d=await t.réseau.suivreNomsMembre({idCompte:e,f:c}),m=await t.réseau.suivreImageMembre({idCompte:e,f:l}),b=await t.réseau.suivreCourrielMembre({idCompte:e,f:u});return async()=>{await d(),await m(),await b()}},rechercherProfilSelonNom=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,clef:m,info:b,de:"nom"})}else a()};return await e.réseau.suivreNomsMembre({idCompte:n,f:o})},rechercherProfilSelonCourriel=t=>async(e,n,a)=>{const o=l=>{const u=l?rechercherDansTexte(t,l):void 0;if(u){const{score:d,début:m,fin:b}=u;a({type:"résultat",score:d,de:"courriel",info:{type:"texte",début:m,fin:b,texte:l}})}else a()};return await e.réseau.suivreCourrielMembre({idCompte:n,f:o})},rechercherProfilSelonImage=t=>async(e,n,a)=>{const o=l=>{const u=similImages(t,l);a({type:"résultat",score:u,de:"image",info:{type:"vide"}})};return await e.réseau.suivreImageMembre({idCompte:n,f:o})},INTERVALE_SALUT=1e3*60,FACTEUR_ATÉNUATION_CONFIANCE=.8,FACTEUR_ATÉNUATION_BLOQUÉS=.9,CONFIANCE_DE_COAUTEUR=.9,CONFIANCE_DE_FAVORIS=.7,DÉLAI_SESOUVENIR_MEMBRES_EN_LIGNE=1e3*60*60*24*30,N_DÉSIRÉ_SOUVENIR_MEMBRES_EN_LIGNE=50,obtChaîneIdSFIPClient=t=>t.idNodeSFIP.id.toCID().toString();class Réseau extends eventsExports.EventEmitter{constructor({client:n,id:a}){super();lt(this,"client");lt(this,"idBd");lt(this,"bloquésPrivés");lt(this,"_fermé");lt(this,"dispositifsEnLigne");lt(this,"fsOublier");this.client=n,this.idBd=a,this.bloquésPrivés=new Set,this.dispositifsEnLigne={},this.fsOublier=[],this._fermé=!1}async initialiser(){const n={};await this.client.sfip.pubsub.subscribe(this.client.sujet_réseau,u=>{const d=v4();try{const m=this.messageReçu({msg:u});n[d]=m,m.then(()=>{delete n[d]})}catch(m){console.error(m.toString()),console.error(m.stack.toString())}}),this.fsOublier.push(async()=>{await this.client.sfip.pubsub.unsubscribe(this.client.sujet_réseau),await Promise.all(Object.values(n))});const a=this.client.sfip.libp2p,o=()=>{this.emit("changementConnexions")},c=["peer:connect","peer:disconnect"];for(const u of c)a.connectionManager.addEventListener(u,o);this.fsOublier.push(...c.map(u=>async()=>a.connectionManager.removeEventListener(u,o)));const l=setInterval(()=>{this.direSalut({})},INTERVALE_SALUT);this.fsOublier.push(async()=>clearInterval(l)),await this.direSalut({})}async envoyerMessageAuDispositif({msg:n,idSFIP:a}){a&&(n.destinataire=a);const o=this.client.sujet_réseau,c=Buffer$x.from(JSON.stringify(n));await this.client.sfip.pubsub.publish(o,c)}async envoyerMessageAuMembre({msg:n,idCompte:a,encrypté:o=!0}){const l={signature:await this.client.signer({message:JSON.stringify(n)}),valeur:n},u=Date.now(),d=Object.values(this.dispositifsEnLigne).filter(m=>m.infoDispositif.idCompte===a).filter(m=>m.vuÀ&&u-m.vuÀ<INTERVALE_SALUT+1e3*30);if(!d.length)throw new Error(`Aucun dispositif présentement en ligne pour membre ${a}`);await Promise.all(d.map(async m=>{const{idSFIP:b,encryption:x}=m.infoDispositif;if(o){if(x?.type!==this.client.encryption.nom)return;const _=this.client.encryption.encrypter({message:JSON.stringify(l),clefPubliqueDestinataire:x.clefPublique}),w={encrypté:!0,clefPubliqueExpéditeur:this.client.encryption.clefs.publique,données:_};await this.envoyerMessageAuDispositif({msg:w,idSFIP:b})}else{const _={encrypté:!1,données:l};await this.envoyerMessageAuDispositif({msg:_,idSFIP:b})}}))}async direSalut({à:n}){const a={type:"Salut !",contenu:{idSFIP:obtChaîneIdSFIPClient(this.client),idOrbite:this.client.orbite.identity.id,clefPublique:this.client.orbite.identity.publicKey,signatures:this.client.orbite.identity.signatures,idCompte:this.client.bdCompte.id}};this.client.encryption&&(a.contenu.encryption={type:this.client.encryption.nom,clefPublique:this.client.encryption.clefs.publique});const c={encrypté:!1,données:{signature:await this.client.signer({message:JSON.stringify(a)}),valeur:a}};await this.envoyerMessageAuDispositif({msg:c,idSFIP:n})}async envoyerDemandeRejoindreCompte({idCompte:n,codeSecret:a}){const o={type:"Je veux rejoindre ce compte",contenu:{idOrbite:await this.client.obtIdOrbite(),codeSecret:a}};await this.envoyerMessageAuMembre({msg:o,idCompte:n})}async messageReçu({msg:n}){if(this._fermé)return;const a=JSON.parse(new TextDecoder().decode(n.data)),{encrypté:o,destinataire:c}=a;if(c&&c!==obtChaîneIdSFIPClient(this.client))return;const l=o?JSON.parse(this.client.encryption.décrypter({message:a.données,clefPubliqueExpéditeur:a.clefPubliqueExpéditeur})):a.données,{valeur:u,signature:d}=l;if(d.clefPublique===this.client.orbite.identity.publicKey&&u.type!=="Salut !"||!await this.client.vérifierSignature({signature:d,message:JSON.stringify(u)}))return;const b=u.contenu;switch(u.type){case"Salut !":{const x=b,{clefPublique:_}=x;if(_!==d.clefPublique)return;await this.recevoirSalut({message:x}),c||await this.direSalut({à:x.idSFIP});break}case"Je veux rejoindre ce compte":{const x=b;await this.client.considérerRequèteRejoindreCompte({requète:x});break}default:console.error(`Message inconnu: ${u.type}`)}}async recevoirSalut({message:n}){await this._validerInfoMembre({info:n})&&(this.dispositifsEnLigne[n.idOrbite]={infoDispositif:n,vuÀ:new Date().getTime()},this.emit("membreVu"),this._sauvegarderDispositifsEnLigne())}_nettoyerDispositifsEnLigne(){const n=new Date().getTime(),a=Object.values(this.dispositifsEnLigne).filter(l=>n-(l.vuÀ||0)>DÉLAI_SESOUVENIR_MEMBRES_EN_LIGNE).sort((l,u)=>(l.vuÀ||0)<(u.vuÀ||0)?-1:1).map(l=>l.infoDispositif.idOrbite),o=Object.keys(this.dispositifsEnLigne).length-N_DÉSIRÉ_SOUVENIR_MEMBRES_EN_LIGNE;a.slice(a.length-o).forEach(l=>delete this.dispositifsEnLigne[l])}async _sauvegarderDispositifsEnLigne(){this._nettoyerDispositifsEnLigne(),await this.client.sauvegarderAuStockageLocal({clef:"dispositifsEnLigne",val:JSON.stringify(this.dispositifsEnLigne)})}async _validerInfoMembre({info:n}){const{idCompte:a,signatures:o,clefPublique:c,idOrbite:l}=n;if(!(a&&o&&c&&l))return!1;const u=await this.client.vérifierSignature({signature:{signature:o.id,clefPublique:c},message:l}),d=await this.client.vérifierSignature({signature:{signature:o.publicKey,clefPublique:l},message:c+o.id});if(!OrbitDB.isValidAddress(a))return!1;const{bd:m,fOublier:b}=await this.client.ouvrirBd({id:a});if(!(m.access instanceof ContrôleurConstellation))return!1;const x=m.access.estAutorisé(l);return await b(),u&&d&&x}async faireConfianceAuMembre({idBdCompte:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:this.idBd});await a.set(n,"FIABLE"),await o()}async nePlusFaireConfianceAuMembre({idBdCompte:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:this.idBd});Object.keys(ClientConstellation.obtObjetdeBdDic({bd:a})).includes(n)&&a.get(n)==="FIABLE"&&await a.del(n),await o()}async suivreFiables({f:n,idBdCompte:a}){a=a||this.client.idBdCompte;const o=c=>{const l=Object.keys(c).filter(u=>c[u]==="FIABLE");n(l)};return await this.client.suivreBdDicDeClef({id:a,clef:"réseau",f:o})}async _initaliserBloquésPrivés(){const n=await this.client.obtDeStockageLocal({clef:"membresBloqués"});n&&(JSON.parse(n).forEach(a=>this.bloquésPrivés.add(a)),this.emit("changementMembresBloqués"))}async _sauvegarderBloquésPrivés(){const n=[...this.bloquésPrivés];this.client.sauvegarderAuStockageLocal({clef:"membresBloqués",val:JSON.stringify(n)})}async bloquerMembre({idBdCompte:n,privé:a=!1}){if(a)await this.débloquerMembre({idBdCompte:n}),this.bloquésPrivés.add(n),await this._sauvegarderBloquésPrivés();else{const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:this.idBd});await o.set(n,"BLOQUÉ"),await c()}this.emit("changementMembresBloqués")}async débloquerMembre({idBdCompte:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:this.idBd});Object.keys(ClientConstellation.obtObjetdeBdDic({bd:a})).includes(n)&&a.get(n)==="BLOQUÉ"&&await a.del(n),await o(),this.bloquésPrivés.has(n)&&(this.bloquésPrivés.delete(n),await this._sauvegarderBloquésPrivés()),this.emit("changementMembresBloqués")}async suivreBloquésPubliques({f:n,idBdCompte:a}){a=a||this.client.idBdCompte;const o=c=>{const l=Object.keys(c).filter(u=>c[u]==="BLOQUÉ");n(l)};return await this.client.suivreBdDicDeClef({id:a,clef:"réseau",f:o})}async suivreBloqués({f:n,idBdCompte:a}){a=a||this.client.idBdCompte;const o=[];let c=[];const l=()=>{const u=[...new Set([...[...this.bloquésPrivés].map(d=>({idBdCompte:d,privé:!0})),...c.map(d=>({idBdCompte:d,privé:!1}))])];n(u)};return o.push(await this.suivreBloquésPubliques({f:u=>{c=u,l()},idBdCompte:a})),a===this.client.idBdCompte&&(await this._initaliserBloquésPrivés(),this.on("changementMembresBloqués",l),o.push(async()=>{this.off("changementMembresBloqués",l)}),l()),async()=>{await Promise.all(o.map(u=>u()))}}async suivreRelationsImmédiates({f:n,idBdCompte:a}){a=a||this.client.idBdCompte;const o=[],c={suivis:[],favoris:[],coauteursBds:[],coauteursProjets:[],coauteursVariables:[],coauteursMotsClefs:[]};let l=[];const u=()=>{const S=[...c.suivis,...c.favoris,...c.coauteursBds,...c.coauteursProjets,...c.coauteursVariables,...c.coauteursMotsClefs,...l.map(C=>({idBdCompte:C,confiance:-1}))],B=[...new Set(S)].map(C=>{const{idBdCompte:D}=C;if(l.includes(D))return{idBdCompte:D,confiance:-1};const U=1-S.filter(Y=>Y.idBdCompte===D).map(Y=>Y.confiance).map(Y=>1-Y).reduce((Y,X)=>X*Y,1);return{idBdCompte:D,confiance:U}});n(B)};o.push(await this.suivreBloqués({f:S=>{l=S.map(T=>T.idBdCompte),u()},idBdCompte:a})),o.push(await this.client.suivreBdDicDeClef({id:a,clef:"réseau",f:S=>{c.suivis=Object.entries(S).filter(([T,B])=>B==="FIABLE").map(([T,B])=>({idBdCompte:T,confiance:1})),u()}}));const d=async(S,T,B)=>{o.push(await this.client.suivreBdsDeFonctionListe({fListe:S,f:C=>{c[T]=C.map(D=>({idBdCompte:D,confiance:B})),u()},fBranche:async(C,D)=>await this.client.suivreAccèsBd({id:C,f:z=>D(z.map(U=>U.idBdCompte).filter(U=>U!==a))})}))};return await d(async S=>await this.suivreFavorisMembre({idCompte:a,f:T=>S((T||[]).map(B=>B.idObjet))}),"favoris",CONFIANCE_DE_FAVORIS),await d(async S=>await this.suivreBdsMembre({idCompte:a,f:T=>S(T||[])}),"coauteursBds",CONFIANCE_DE_COAUTEUR),await d(async S=>await this.suivreProjetsMembre({idCompte:a,f:T=>S(T||[])}),"coauteursProjets",CONFIANCE_DE_COAUTEUR),await d(async S=>await this.suivreVariablesMembre({idCompte:a,f:T=>S(T||[])}),"coauteursVariables",CONFIANCE_DE_COAUTEUR),await d(async S=>await this.suivreMotsClefsMembre({idCompte:a,f:T=>S(T||[])}),"coauteursMotsClefs",CONFIANCE_DE_COAUTEUR),async()=>{await Promise.all(o.map(S=>S()))}}async suivreRelationsConfiance({f:n,profondeur:a,idCompteDébut:o}){o=o||this.client.idBdCompte;const c={},l={},u=new src$4;let d=!1;const m=C=>Object.entries(c).filter(([D,z])=>z.relations.map(U=>U.idBdCompte).includes(C)).map(([D,z])=>D),b=C=>{if(C===o)return 0;const D=({ids:z,p:U=1,déjàVues:Y=new Set})=>{const X=z.map(O=>m(O).filter(J=>!Y.has(J))).flat();return X.includes(o)?U:X.length?(Y=new Set(...Y,...X),D({ids:X,p:U+1,déjàVues:Y})):1/0};return D({ids:[C]})},x=()=>{const C=[];for(const[D,z]of Object.entries(c))for(const U of z.relations){const Y=b(D)+1;C.push({de:D,pour:U.idBdCompte,confiance:U.confiance,profondeur:Y})}n(C)},_=async C=>{c[C]={relations:[]};const D=await this.suivreRelationsImmédiates({f:z=>{c[C]&&(c[C].relations=z,S())},idBdCompte:C});l[C]=D},w=async C=>{await l[C](),delete l[C],delete c[C]},S=async()=>{if(d)return;await u.acquire("modification");const C=Object.keys(c).filter(z=>b(z)>=a),D=[...new Set(Object.entries(c).filter(([z,U])=>b(z)+1<a).map(([z,U])=>U.relations.map(Y=>Y.idBdCompte)).flat())].filter(z=>!Object.keys(c).includes(z));await Promise.all(C.map(z=>w(z))),await Promise.all(D.map(z=>_(z))),x(),u.release("modification")};return await _(o),{fOublier:async()=>{d=!0,await Promise.all(Object.values(l).map(C=>C()))},fChangerProfondeur:async C=>{a=C,await S()}}}async suivreComptesRéseau({f:n,profondeur:a,idCompteDébut:o}){const c=l=>{l.push({de:this.client.idBdCompte,pour:this.client.idBdCompte,confiance:1,profondeur:0});const u={};l.forEach(m=>{Object.keys(u).includes(m.pour)||(u[m.pour]=[]),u[m.pour].push(m)});const d=Object.entries(u).map(([m,b])=>{const x=b.find(C=>C.de===this.client.idBdCompte);if(x?.confiance===1||x?.confiance===-1)return{idBdCompte:m,profondeur:x.pour===this.client.idBdCompte?0:1,confiance:x.confiance};const _=Math.min(...b.map(C=>C.profondeur)),w=b.filter(C=>C.confiance>=0),T=1-b.filter(C=>C.confiance<0).map(C=>1+C.confiance*Math.pow(FACTEUR_ATÉNUATION_BLOQUÉS,C.profondeur-1)).reduce((C,D)=>D*C,1),B=1-w.map(C=>1-C.confiance*Math.pow(FACTEUR_ATÉNUATION_CONFIANCE,C.profondeur-1)).reduce((C,D)=>D*C,1)-T;return{idBdCompte:m,profondeur:_,confiance:B}});n(d)};return await this.suivreRelationsConfiance({f:c,profondeur:a,idCompteDébut:o})}async suivreComptesRéseauEtEnLigne({f:n,profondeur:a,idCompteDébut:o}){const c={réseau:[],enLigne:[]},l=()=>{const _=[...c.réseau];c.enLigne.forEach(w=>{_.find(S=>S.idBdCompte===w.idBdCompte)||_.push(w)}),n(_)},u=await this.suivreConnexionsMembres({f:_=>{const w=_.filter(S=>S.infoMembre.idBdCompte!==this.client.idBdCompte).map(S=>({idBdCompte:S.infoMembre.idBdCompte,profondeur:1/0,confiance:0}));c.enLigne=w,l()}}),d=_=>{c.réseau=_,l()},{fOublier:m,fChangerProfondeur:b}=await this.suivreComptesRéseau({f:d,profondeur:a,idCompteDébut:o});return{fOublier:async()=>{await u(),await m()},fChangerProfondeur:b}}async suivreConfianceMonRéseauPourMembre({idBdCompte:n,f:a,profondeur:o,idBdCompteRéférence:c}){c=c||this.client.idBdCompte;const l=u=>{const d=u.find(m=>m.idBdCompte===n);a(d?.confiance||0)};return await this.suivreComptesRéseau({f:l,profondeur:o,idCompteDébut:c})}async suivreConnexionsPostesSFIP({f:n}){const a=l=>{const u=[],d=[];for(const m of l)u.includes(m.peer.toCID().toString())||(u.push(m.peer.toCID().toString()),d.push(m));return d},o=async()=>{const l=await this.client.sfip.swarm.peers(),u=a(l);n(u.map(d=>({addr:d.addr.toString(),peer:d.peer.toCID().toString()})))};return this.on("changementConnexions",o),o(),async()=>{this.off("changementConnexions",o)}}async suivreConnexionsDispositifs({f:n}){const a=()=>{n(Object.values(this.dispositifsEnLigne))};return this.on("membreVu",a),a(),async()=>{this.off("membreVu",a)}}async suivreConnexionsMembres({f:n}){const a=o=>{const c={};for(const l of o){const{idCompte:u}=l.infoDispositif;c[u]||(c[u]={infoMembre:{idBdCompte:u,dispositifs:[]}});const{infoMembre:d,vuÀ:m}=c[u];d.dispositifs.push(l.infoDispositif),c[u].vuÀ=m?l.vuÀ?Math.max(m,l.vuÀ):m:l.vuÀ}n(Object.values(c))};return await this.suivreConnexionsDispositifs({f:a})}async suivreNomsMembre({idCompte:n,f:a}){const o=c=>a(c||{});return await this.client.suivreBdDeClef({id:n,clef:"compte",f:o,fSuivre:({id:c,fSuivreBd:l})=>this.client.profil.suivreNoms({f:l,idBdProfil:c})})}async suivreCourrielMembre({idCompte:n,f:a}){return await this.client.suivreBdDeClef({id:n,clef:"compte",f:a,fSuivre:async({id:o,fSuivreBd:c})=>await this.client.profil.suivreCourriel({f:c,idBdProfil:o})})}async suivreImageMembre({idCompte:n,f:a}){const o=async l=>a(l||null),c=async({id:l,fSuivreBd:u})=>await this.client.profil.suivreImage({f:u,idBdProfil:l});return await this.client.suivreBdDeClef({id:n,clef:"compte",f:o,fSuivre:c})}async rechercher({f:n,nRésultatsDésirés:a,fRecherche:o,fConfiance:c,fQualité:l,fObjectif:u,fScore:d}){d||(d=se=>(se.confiance+se.qualité+se.objectif.score)/3),u=u||rechercherTous();const m={},b={},x=3e3;let _,w=3,S=!1;const T=se=>{w=se,X(se),_&&clearTimeout(_)},B=(se=x)=>{if(S)return;_&&clearTimeout(_);const ie=Object.values(m).map(q=>q.résultats).flat().map(q=>q.résultatObjectif.score),F=ie.length>=a?Math.min(...ie.slice(0,a)):0,k=Object.values(m).reduce(function(q,j){return q[String(j.membre.profondeur)]=q[String(j.membre.profondeur)]||[],q[String(j.membre.profondeur)].push(...j.résultats),q},{}),A=Object.entries(k).sort((q,j)=>Number(q[0])<Number(j[0])?-1:1).map(q=>q[1]).map(q=>q.filter(j=>j.résultatObjectif.score>=F).length),I=A.slice(A.length-3),P=A.slice(A.length-4),H=Math.max(3,sum_1(I)?w+1:sum_1(P)?w:w-1);H>w?_=setTimeout(()=>T(H),se):H<w&&T(H)},C=async()=>{const ie=Object.values(m).map(F=>F.résultats).flat().sort((F,k)=>F.résultatObjectif.score<k.résultatObjectif.score?1:-1);await n(ie.slice(0,a)),B()},D=async se=>{const{idBdCompte:ie}=se,F=async I=>await o({idCompte:se.idBdCompte,fSuivi:async P=>await I(P||[])}),k=async I=>{m[ie].résultats=I,await C()},y=async(I,P)=>{const H={id:I},q=()=>{const{objectif:fe,confiance:oe,qualité:de}=H;if(fe&&oe!==void 0&&de!==void 0){const ae={id:I,résultatObjectif:{...fe,score:d(H)}};P(ae)}else P(void 0)},j=fe=>{H.objectif=fe,q()},M=await u(this.client,I,j),L=await c(I,fe=>{H.confiance=fe,q()}),Q=await l(I,fe=>{H.qualité=fe,q()});return async()=>{await M(),await L(),await Q()}};m[ie]={résultats:[],membre:se,mettreÀJour:async()=>{await C()}};const A=await this.client.suivreBdsDeFonctionListe({fListe:F,f:k,fBranche:y});b[ie]=A},z=async se=>{await b[se](),delete m[se],delete b[se],await C()},U=new src$4,Y=async se=>{await U.acquire("rechercher"),se=se.filter(y=>y.confiance>=0);const ie=se.filter(y=>!m[y.idBdCompte]),F=Object.keys(m).filter(y=>!se.find(A=>A.idBdCompte===y)),k=se.filter(y=>{const A=m[y.idBdCompte];return A&&(y.confiance!==A.membre.confiance||y.profondeur!==A.membre.profondeur)});await Promise.all(ie.map(D)),await Promise.all(k.map(async y=>await m[y.idBdCompte].mettreÀJour(y))),await Promise.all(F.map(y=>z(y))),U.release("rechercher")},{fChangerProfondeur:X,fOublier:O}=await this.suivreComptesRéseauEtEnLigne({f:Y,profondeur:w});return{fChangerN:async se=>{const ie=a;a=se,se!==ie&&(await C(),B(0))},fOublier:async()=>{S=!0,_&&clearTimeout(_),await O(),await Promise.all(Object.values(b).map(se=>se()))}}}async rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o}){const c=async(d,m)=>{const{fOublier:b}=await this.suivreConfianceMonRéseauPourMembre({idBdCompte:d,f:m,profondeur:4});return b},l=async({idCompte:d,fSuivi:m})=>(m([d]),faisRien),u=async(d,m)=>await rechercherProfilSelonActivité()(this.client,d,x=>{m(x?.score||0)});return await this.rechercher({f:n,nRésultatsDésirés:a,fRecherche:l,fConfiance:c,fQualité:u,fObjectif:o})}async suivreConfianceAuteurs({idItem:n,clef:a,f:o}){const c=async m=>await this.suivreAuteursObjet({idObjet:n,clef:a,f:async b=>{const x=b.filter(_=>_.accepté).map(_=>_.idBdCompte);return await m(x)}}),l=async(m,b)=>{const{fOublier:x}=await this.suivreConfianceMonRéseauPourMembre({idBdCompte:m,f:b,profondeur:4});return x},u=m=>{const b=m.reduce((x,_)=>x+_,0);o(b)},d=m=>m.flat();return await this.client.suivreBdsDeFonctionListe({fListe:c,f:u,fBranche:l,fRéduction:d})}async rechercherObjets({f:n,clef:a,nRésultatsDésirés:o,fRecherche:c,fQualité:l,fObjectif:u}){const d=async({idCompte:b,fSuivi:x})=>{const _={propres:[],favoris:[]},w=()=>{const B=[...new Set([..._.propres,..._.favoris])];x(B)},S=await c({idCompte:b,f:B=>{_.propres=B||[],w()}}),T=await this.suivreFavorisMembre({idCompte:b,f:B=>{_.favoris=B?Object.keys(B):[],w()}});return async()=>{await S(),await T()}},m=async(b,x)=>await this.suivreConfianceAuteurs({idItem:b,clef:a,f:x});return await this.rechercher({f:n,nRésultatsDésirés:o,fRecherche:d,fConfiance:m,fQualité:l,fObjectif:u})}async rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o}){const c=this.suivreBdsMembre.bind(this),l=async(u,d)=>await this.client.nuées.suivreQualitéNuée({idNuée:u,f:d});return await this.rechercherObjets({f:n,clef:"nuées",nRésultatsDésirés:a,fRecherche:c,fQualité:l,fObjectif:o})}async rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o}){const c=this.suivreBdsMembre.bind(this),l=async(u,d)=>{const m=b=>{d(b.total)};return await this.client.bds.suivreScoreBd({id:u,f:m})};return await this.rechercherObjets({f:n,clef:"bds",nRésultatsDésirés:a,fRecherche:c,fQualité:l,fObjectif:o})}async rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o}){const c=this.suivreVariablesMembre.bind(this),l=async(u,d)=>await this.client.variables.suivreQualitéVariable({id:u,f:d});return await this.rechercherObjets({f:n,clef:"variables",nRésultatsDésirés:a,fRecherche:c,fQualité:l,fObjectif:o})}async rechercherMotsClefs({f:n,nRésultatsDésirés:a,fObjectif:o}){const c=this.suivreMotsClefsMembre.bind(this),l=async(u,d)=>await this.client.motsClefs.suivreQualitéMotClef({id:u,f:d});return await this.rechercherObjets({f:n,clef:"motsClefs",nRésultatsDésirés:a,fRecherche:c,fQualité:l,fObjectif:o})}async rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o}){const c=this.suivreProjetsMembre.bind(this),l=async(u,d)=>await this.client.projets.suivreQualitéProjet({idProjet:u,f:d});return await this.rechercherObjets({f:n,clef:"projets",nRésultatsDésirés:a,fRecherche:c,fQualité:l,fObjectif:o})}async suivreAuteursObjet({idObjet:n,clef:a,f:o}){const c=async b=>await this.client.suivreAccèsBd({id:n,f:b}),l=async(b,x,_)=>{const w=S=>(S=S||[],x([{idBdCompte:_.idBdCompte,rôle:_.rôle,accepté:S.includes(n)}]));return await this.client.suivreBdListeDeClef({id:b,clef:a,f:w})},u=b=>b.idBdCompte,d=b=>b.idBdCompte;return this.client.suivreBdsDeFonctionListe({fListe:c,f:o,fBranche:l,fIdBdDeBranche:u,fCode:d})}async suivreAuteursMotClef({idMotClef:n,f:a}){return await this.suivreAuteursObjet({idObjet:n,clef:"motsClefs",f:a})}async suivreAuteursVariable({idVariable:n,f:a}){return await this.suivreAuteursObjet({idObjet:n,clef:"variables",f:a})}async suivreAuteursBd({idBd:n,f:a}){return await this.suivreAuteursObjet({idObjet:n,clef:"bds",f:a})}async suivreAuteursProjet({idProjet:n,f:a}){return await this.suivreAuteursObjet({idObjet:n,clef:"projets",f:a})}async suivreObjetsMembre({idCompte:n,clef:a,fListeObjets:o,fSuivi:c}){const l=async u=>await this.client.suivreBdDeClef({id:n,clef:a,f:d=>u(d||[]),fSuivre:o});return await this.client.suivreBdsSelonCondition({fListe:l,fCondition:async(u,d)=>await this.client.suivreAccèsBd({id:u,f:m=>d(m.map(b=>b.idBdCompte).includes(n))}),f:c})}async suivreBdsMembre({idCompte:n,f:a}){return await this.suivreObjetsMembre({idCompte:n,clef:"bds",fListeObjets:async({id:o,fSuivreBd:c})=>await this.client.bds.suivreBds({f:c,idBdBdsCompte:o}),fSuivi:a})}async suivreProjetsMembre({idCompte:n,f:a}){return await this.suivreObjetsMembre({idCompte:n,clef:"projets",fListeObjets:async({id:o,fSuivreBd:c})=>await this.client.projets.suivreProjets({f:c,idBdProjets:o}),fSuivi:a})}async suivreFavorisMembre({idCompte:n,f:a}){const o=async({id:c,fSuivreBd:l})=>await this.client.favoris.suivreFavoris({f:l,idBdFavoris:c});return await this.client.suivreBdDeClef({id:n,clef:"favoris",f:a,fSuivre:o})}async suivreVariablesMembre({idCompte:n,f:a}){return await this.suivreObjetsMembre({idCompte:n,clef:"variables",fListeObjets:async({id:o,fSuivreBd:c})=>await this.client.variables.suivreVariables({f:c,idBdVariables:o}),fSuivi:a})}async suivreMotsClefsMembre({idCompte:n,f:a}){return await this.suivreObjetsMembre({idCompte:n,clef:"motsClefs",fListeObjets:async({id:o,fSuivreBd:c})=>await this.client.motsClefs.suivreMotsClefs({f:c,idBdMotsClefs:o}),fSuivi:a})}async suivreFavorisObjet({idObjet:n,f:a,profondeur:o}){const c=d=>{const m=d.filter(b=>b.idObjet===n);a(m)},l=async d=>{const m=async b=>await d([this.client.idBdCompte,...b.map(x=>x.idBdCompte)]);return await this.suivreComptesRéseauEtEnLigne({f:m,profondeur:o,idCompteDébut:this.client.idBdCompte})},u=async(d,m)=>await this.suivreFavorisMembre({idCompte:d,f:b=>m(b?b.map(x=>({idBdCompte:d,...x})):void 0)});return await this.client.suivreBdsDeFonctionRecherche({fListe:l,f:c,fBranche:u})}async suivreRéplications({idObjet:n,f:a,profondeur:o}){const c={connexionsMembres:[],connexionsDispositifs:[],favoris:[]},l=async()=>{const{connexionsMembres:C,favoris:D}=c,z=D.map(O=>O.favoris.idBdCompte),U=C.filter(O=>z.includes(O.infoMembre.idBdCompte)),Y=(await Promise.all(D.map(async O=>{const{favoris:J,dispositifs:Z}=O;return await Promise.all(Z.map(async se=>{const ie=c.connexionsDispositifs.find(k=>k.infoDispositif.idOrbite===se)?.vuÀ;return{idObjet:n,idDispositif:se,bd:await this.client.favoris.estÉpingléSurDispositif({dispositifs:J.dispositifs,idOrbite:se}),fichiers:await this.client.favoris.estÉpingléSurDispositif({dispositifs:J.dispositifsFichiers,idOrbite:se}),récursif:J.récursif,vuÀ:ie}}))}))).flat();a({membres:U,dispositifs:Y})},u=await this.suivreConnexionsMembres({f:C=>{c.connexionsMembres=C,l()}}),d=await this.suivreConnexionsDispositifs({f:C=>{c.connexionsDispositifs=C,l()}}),m=C=>{c.favoris=C,l()},b=async C=>await this.suivreFavorisObjet({idObjet:n,f:C,profondeur:o}),x=async(C,D,z)=>{const U=X=>{D({favoris:z,dispositifs:X})},Y=await this.client.suivreDispositifs({f:U,idBdCompte:C});return async()=>{await Y()}},_=C=>C.idBdCompte,w=C=>C.idBdCompte,{fOublier:S,fChangerProfondeur:T}=await this.client.suivreBdsDeFonctionRecherche({fListe:b,f:m,fBranche:x,fIdBdDeBranche:_,fCode:w});return{fOublier:async()=>{await S(),await u(),await d()},fChangerProfondeur:T}}async suivreBdsDeNuée({idNuée:n,f:a,nRésultatsDésirés:o}){const c=async(u,d)=>await this.client.suivreBdDeClef({id:u,clef:"bds",f:m=>{d(m||[])},fSuivre:async({id:m})=>await this.client.bds.rechercherBdsParNuée({idNuée:n,f:d,idBdBdsCompte:m})}),l=async u=>await this.suivreComptesRéseauEtEnLigne({f:d=>u(d.map(m=>m.idBdCompte)),profondeur:o});return await this.client.suivreBdsDeFonctionRecherche({fListe:l,f:a,fBranche:c})}async suivreÉlémentsDeTableauxUniques({idNuéeUnique:n,clef:a,f:o,nBds:c=100}){const l=async b=>{const x=async w=>await this.suivreBdsDeNuée({idNuée:n,f:w,nRésultatsDésirés:c}),_=async(w,S)=>await this.suivreAuteursBd({idBd:w,f:T=>{const B=T.find(D=>D.accepté)?.idBdCompte;S(B?{bd:w,idBdCompte:B}:void 0)}});return await this.client.suivreBdsDeFonctionRecherche({fListe:x,f:b,fBranche:_})},u=async(b,x,_)=>{const{idBdCompte:w}=_,S=async({fSuivreRacine:C})=>await this.client.bds.suivreIdTableauParClef({idBd:b,clef:a,f:D=>{D&&C(D)}}),T=async({id:C,fSuivreBd:D})=>{const z=U=>{const Y=U.map(X=>({idBdCompte:w,élément:X}));D(Y)};return await this.client.tableaux.suivreDonnées({idTableau:C,f:z})},B=C=>{x(C||[])};return await this.client.suivreBdDeFonction({fRacine:S,f:B,fSuivre:T})},d=b=>b.bd,m=b=>b.bd;return await this.client.suivreBdsDeFonctionRecherche({fListe:l,f:o,fBranche:u,fIdBdDeBranche:d,fCode:m})}async fermer(){this._fermé=!0,await Promise.all(this.fsOublier.map(n=>n()))}}__decorate([cacheSuivi],Réseau.prototype,"suivreFiables",null);__decorate([cacheSuivi],Réseau.prototype,"suivreBloquésPubliques",null);__decorate([cacheSuivi],Réseau.prototype,"suivreBloqués",null);__decorate([cacheSuivi],Réseau.prototype,"suivreRelationsImmédiates",null);__decorate([cacheRechercheParProfondeur],Réseau.prototype,"suivreRelationsConfiance",null);__decorate([cacheRechercheParProfondeur],Réseau.prototype,"suivreComptesRéseau",null);__decorate([cacheSuivi],Réseau.prototype,"suivreConnexionsPostesSFIP",null);__decorate([cacheSuivi],Réseau.prototype,"suivreConnexionsDispositifs",null);__decorate([cacheSuivi],Réseau.prototype,"suivreConnexionsMembres",null);__decorate([cacheSuivi],Réseau.prototype,"suivreNomsMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreCourrielMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreImageMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreAuteursObjet",null);__decorate([cacheSuivi],Réseau.prototype,"suivreBdsMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreProjetsMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreFavorisMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreVariablesMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreMotsClefsMembre",null);__decorate([cacheRechercheParNRésultats],Réseau.prototype,"suivreBdsDeNuée",null);var base64$3={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var c in o)o.hasOwnProperty(c)&&(a[c]=o[c])},t(e,n)};return function(e,n){t(e,n);function a(){this.constructor=e}e.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(base64$3,"__esModule",{value:!0});var INVALID_BYTE=256,Coder=function(){function t(e){e===void 0&&(e="="),this._paddingCharacter=e}return t.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(e*8+5)/6|0},t.prototype.encode=function(e){for(var n="",a=0;a<e.length-2;a+=3){var o=e[a]<<16|e[a+1]<<8|e[a+2];n+=this._encodeByte(o>>>3*6&63),n+=this._encodeByte(o>>>2*6&63),n+=this._encodeByte(o>>>1*6&63),n+=this._encodeByte(o>>>0*6&63)}var c=e.length-a;if(c>0){var o=e[a]<<16|(c===2?e[a+1]<<8:0);n+=this._encodeByte(o>>>3*6&63),n+=this._encodeByte(o>>>2*6&63),c===2?n+=this._encodeByte(o>>>1*6&63):n+=this._paddingCharacter||"",n+=this._paddingCharacter||""}return n},t.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(e*6+7)/8|0},t.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},t.prototype.decode=function(e){if(e.length===0)return new Uint8Array(0);for(var n=this._getPaddingLength(e),a=e.length-n,o=new Uint8Array(this.maxDecodedLength(a)),c=0,l=0,u=0,d=0,m=0,b=0,x=0;l<a-4;l+=4)d=this._decodeChar(e.charCodeAt(l+0)),m=this._decodeChar(e.charCodeAt(l+1)),b=this._decodeChar(e.charCodeAt(l+2)),x=this._decodeChar(e.charCodeAt(l+3)),o[c++]=d<<2|m>>>4,o[c++]=m<<4|b>>>2,o[c++]=b<<6|x,u|=d&INVALID_BYTE,u|=m&INVALID_BYTE,u|=b&INVALID_BYTE,u|=x&INVALID_BYTE;if(l<a-1&&(d=this._decodeChar(e.charCodeAt(l)),m=this._decodeChar(e.charCodeAt(l+1)),o[c++]=d<<2|m>>>4,u|=d&INVALID_BYTE,u|=m&INVALID_BYTE),l<a-2&&(b=this._decodeChar(e.charCodeAt(l+2)),o[c++]=m<<4|b>>>2,u|=b&INVALID_BYTE),l<a-3&&(x=this._decodeChar(e.charCodeAt(l+3)),o[c++]=b<<6|x,u|=x&INVALID_BYTE),u!==0)throw new Error("Base64Coder: incorrect characters for decoding");return o},t.prototype._encodeByte=function(e){var n=e;return n+=65,n+=25-e>>>8&0-65-26+97,n+=51-e>>>8&26-97-52+48,n+=61-e>>>8&52-48-62+43,n+=62-e>>>8&62-43-63+47,String.fromCharCode(n)},t.prototype._decodeChar=function(e){var n=INVALID_BYTE;return n+=(42-e&e-44)>>>8&-INVALID_BYTE+e-43+62,n+=(46-e&e-48)>>>8&-INVALID_BYTE+e-47+63,n+=(47-e&e-58)>>>8&-INVALID_BYTE+e-48+52,n+=(64-e&e-91)>>>8&-INVALID_BYTE+e-65+0,n+=(96-e&e-123)>>>8&-INVALID_BYTE+e-97+26,n},t.prototype._getPaddingLength=function(e){var n=0;if(this._paddingCharacter){for(var a=e.length-1;a>=0&&e[a]===this._paddingCharacter;a--)n++;if(e.length<4||n>2)throw new Error("Base64Coder: incorrect padding")}return n},t}();base64$3.Coder=Coder;var stdCoder=new Coder;function encode$9(t){return stdCoder.encode(t)}var encode_1$3=base64$3.encode=encode$9;function decode$a(t){return stdCoder.decode(t)}var decode_1$1=base64$3.decode=decode$a,URLSafeCoder=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype._encodeByte=function(n){var a=n;return a+=65,a+=25-n>>>8&0-65-26+97,a+=51-n>>>8&26-97-52+48,a+=61-n>>>8&52-48-62+45,a+=62-n>>>8&62-45-63+95,String.fromCharCode(a)},e.prototype._decodeChar=function(n){var a=INVALID_BYTE;return a+=(44-n&n-46)>>>8&-INVALID_BYTE+n-45+62,a+=(94-n&n-96)>>>8&-INVALID_BYTE+n-95+63,a+=(47-n&n-58)>>>8&-INVALID_BYTE+n-48+52,a+=(64-n&n-91)>>>8&-INVALID_BYTE+n-65+0,a+=(96-n&n-123)>>>8&-INVALID_BYTE+n-97+26,a},e}(Coder);base64$3.URLSafeCoder=URLSafeCoder;var urlSafeCoder=new URLSafeCoder;function encodeURLSafe(t){return urlSafeCoder.encode(t)}base64$3.encodeURLSafe=encodeURLSafe;function decodeURLSafe(t){return urlSafeCoder.decode(t)}base64$3.decodeURLSafe=decodeURLSafe;base64$3.encodedLength=function(t){return stdCoder.encodedLength(t)};base64$3.maxDecodedLength=function(t){return stdCoder.maxDecodedLength(t)};base64$3.decodedLength=function(t){return stdCoder.decodedLength(t)};var utf8$2={};Object.defineProperty(utf8$2,"__esModule",{value:!0});var INVALID_UTF16="utf8: invalid string",INVALID_UTF8="utf8: invalid source encoding";function encode$8(t){for(var e=new Uint8Array(encodedLength(t)),n=0,a=0;a<t.length;a++){var o=t.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=192|o>>6,e[n++]=128|o&63):o<55296?(e[n++]=224|o>>12,e[n++]=128|o>>6&63,e[n++]=128|o&63):(a++,o=(o&1023)<<10,o|=t.charCodeAt(a)&1023,o+=65536,e[n++]=240|o>>18,e[n++]=128|o>>12&63,e[n++]=128|o>>6&63,e[n++]=128|o&63)}return e}var encode_1$2=utf8$2.encode=encode$8;function encodedLength(t){for(var e=0,n=0;n<t.length;n++){var a=t.charCodeAt(n);if(a<128)e+=1;else if(a<2048)e+=2;else if(a<55296)e+=3;else if(a<=57343){if(n>=t.length-1)throw new Error(INVALID_UTF16);n++,e+=4}else throw new Error(INVALID_UTF16)}return e}var encodedLength_1=utf8$2.encodedLength=encodedLength;function decode$9(t){for(var e=[],n=0;n<t.length;n++){var a=t[n];if(a&128){var o=void 0;if(a<224){if(n>=t.length)throw new Error(INVALID_UTF8);var c=t[++n];if((c&192)!==128)throw new Error(INVALID_UTF8);a=(a&31)<<6|c&63,o=128}else if(a<240){if(n>=t.length-1)throw new Error(INVALID_UTF8);var c=t[++n],l=t[++n];if((c&192)!==128||(l&192)!==128)throw new Error(INVALID_UTF8);a=(a&15)<<12|(c&63)<<6|l&63,o=2048}else if(a<248){if(n>=t.length-2)throw new Error(INVALID_UTF8);var c=t[++n],l=t[++n],u=t[++n];if((c&192)!==128||(l&192)!==128||(u&192)!==128)throw new Error(INVALID_UTF8);a=(a&15)<<18|(c&63)<<12|(l&63)<<6|u&63,o=65536}else throw new Error(INVALID_UTF8);if(a<o||a>=55296&&a<=57343)throw new Error(INVALID_UTF8);if(a>=65536){if(a>1114111)throw new Error(INVALID_UTF8);a-=65536,e.push(String.fromCharCode(55296|a>>10)),a=56320|a&1023}}e.push(String.fromCharCode(a))}return e.join("")}var decode_1=utf8$2.decode=decode$9;const utf8$1=_mergeNamespaces({__proto__:null,decode:decode_1,default:utf8$2,encode:encode_1$2,encodedLength:encodedLength_1},[utf8$2]);var browser$3={},encode$7={},encodeBuffer={},writeCore={},extBuffer={},bufferish={},toString$4={}.toString,isarray=Array.isArray||function(t){return toString$4.call(t)=="[object Array]"},bufferishArrayExports={},bufferishArray={get exports(){return bufferishArrayExports},set exports(t){bufferishArrayExports=t}},hasRequiredBufferishArray;function requireBufferishArray(){if(hasRequiredBufferishArray)return bufferishArrayExports;hasRequiredBufferishArray=1;var t=requireBufferish(),e=bufferishArray.exports=n(0);e.alloc=n,e.concat=t.concat,e.from=a;function n(o){return new Array(o)}function a(o){if(!t.isBuffer(o)&&t.isView(o))o=t.Uint8Array.from(o);else if(t.isArrayBuffer(o))o=new Uint8Array(o);else{if(typeof o=="string")return t.from.call(e,o);if(typeof o=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(o)}return bufferishArrayExports}var bufferishBufferExports={},bufferishBuffer={get exports(){return bufferishBufferExports},set exports(t){bufferishBufferExports=t}},hasRequiredBufferishBuffer;function requireBufferishBuffer(){if(hasRequiredBufferishBuffer)return bufferishBufferExports;hasRequiredBufferishBuffer=1;var t=requireBufferish(),e=t.global,n=bufferishBuffer.exports=t.hasBuffer?a(0):[];n.alloc=t.hasBuffer&&e.alloc||a,n.concat=t.concat,n.from=o;function a(c){return new e(c)}function o(c){if(!t.isBuffer(c)&&t.isView(c))c=t.Uint8Array.from(c);else if(t.isArrayBuffer(c))c=new Uint8Array(c);else{if(typeof c=="string")return t.from.call(n,c);if(typeof c=="number")throw new TypeError('"value" argument must not be a number')}return e.from&&e.from.length!==1?e.from(c):new e(c)}return bufferishBufferExports}var bufferishUint8arrayExports={},bufferishUint8array={get exports(){return bufferishUint8arrayExports},set exports(t){bufferishUint8arrayExports=t}},hasRequiredBufferishUint8array;function requireBufferishUint8array(){if(hasRequiredBufferishUint8array)return bufferishUint8arrayExports;hasRequiredBufferishUint8array=1;var t=requireBufferish(),e=bufferishUint8array.exports=t.hasArrayBuffer?n(0):[];e.alloc=n,e.concat=t.concat,e.from=a;function n(o){return new Uint8Array(o)}function a(o){if(t.isView(o)){var c=o.byteOffset,l=o.byteLength;o=o.buffer,o.byteLength!==l&&(o.slice?o=o.slice(c,c+l):(o=new Uint8Array(o),o.byteLength!==l&&(o=Array.prototype.slice.call(o,c,c+l))))}else{if(typeof o=="string")return t.from.call(e,o);if(typeof o=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(o)}return bufferishUint8arrayExports}var bufferishProto={},bufferLite={};bufferLite.copy=copy;bufferLite.toString=toString$3;bufferLite.write=write$1;function write$1(t,e){for(var n=this,a=e||(e|=0),o=t.length,c=0,l=0;l<o;)c=t.charCodeAt(l++),c<128?n[a++]=c:c<2048?(n[a++]=192|c>>>6,n[a++]=128|c&63):c<55296||c>57343?(n[a++]=224|c>>>12,n[a++]=128|c>>>6&63,n[a++]=128|c&63):(c=(c-55296<<10|t.charCodeAt(l++)-56320)+65536,n[a++]=240|c>>>18,n[a++]=128|c>>>12&63,n[a++]=128|c>>>6&63,n[a++]=128|c&63);return a-e}function toString$3(t,e,n){var a=this,o=e|0;n||(n=a.length);for(var c="",l=0;o<n;){if(l=a[o++],l<128){c+=String.fromCharCode(l);continue}(l&224)===192?l=(l&31)<<6|a[o++]&63:(l&240)===224?l=(l&15)<<12|(a[o++]&63)<<6|a[o++]&63:(l&248)===240&&(l=(l&7)<<18|(a[o++]&63)<<12|(a[o++]&63)<<6|a[o++]&63),l>=65536?(l-=65536,c+=String.fromCharCode((l>>>10)+55296,(l&1023)+56320)):c+=String.fromCharCode(l)}return c}function copy(t,e,n,a){var o;n||(n=0),!a&&a!==0&&(a=this.length),e||(e=0);var c=a-n;if(t===this&&n<e&&e<a)for(o=c-1;o>=0;o--)t[o+e]=this[o+n];else for(o=0;o<c;o++)t[o+e]=this[o+n];return c}var hasRequiredBufferishProto;function requireBufferishProto(){if(hasRequiredBufferishProto)return bufferishProto;hasRequiredBufferishProto=1;var t=bufferLite;bufferishProto.copy=c,bufferishProto.slice=l,bufferishProto.toString=u,bufferishProto.write=d("write");var e=requireBufferish(),n=e.global,a=e.hasBuffer&&"TYPED_ARRAY_SUPPORT"in n,o=a&&!n.TYPED_ARRAY_SUPPORT;function c(m,b,x,_){var w=e.isBuffer(this),S=e.isBuffer(m);if(w&&S)return this.copy(m,b,x,_);if(!o&&!w&&!S&&e.isView(this)&&e.isView(m)){var T=x||_!=null?l.call(this,x,_):this;return m.set(T,b),T.length}else return t.copy.call(this,m,b,x,_)}function l(m,b){var x=this.slice||!o&&this.subarray;if(x)return x.call(this,m,b);var _=e.alloc.call(this,b-m);return c.call(this,_,0,m,b),_}function u(m,b,x){var _=!a&&e.isBuffer(this)?this.toString:t.toString;return _.apply(this,arguments)}function d(m){return b;function b(){var x=this[m]||t[m];return x.apply(this,arguments)}}return bufferishProto}var hasRequiredBufferish;function requireBufferish(){return hasRequiredBufferish||(hasRequiredBufferish=1,function(t){var e=t.global=requireCryptoBrowserify(),n=t.hasBuffer=e&&!!e.isBuffer,a=t.hasArrayBuffer=typeof ArrayBuffer<"u",o=t.isArray=isarray;t.isArrayBuffer=a?T:D;var c=t.isBuffer=n?e.isBuffer:D,l=t.isView=a?ArrayBuffer.isView||z("ArrayBuffer","buffer"):D;t.alloc=_,t.concat=w,t.from=x;var u=t.Array=requireBufferishArray(),d=t.Buffer=requireBufferishBuffer(),m=t.Uint8Array=requireBufferishUint8array(),b=t.prototype=requireBufferishProto();function x(U){return typeof U=="string"?B.call(this,U):C(this).from(U)}function _(U){return C(this).alloc(U)}function w(U,Y){Y||(Y=0,Array.prototype.forEach.call(U,Z));var X=this!==t&&this||U[0],O=_.call(X,Y),J=0;return Array.prototype.forEach.call(U,se),O;function Z(ie){Y+=ie.length}function se(ie){J+=b.copy.call(ie,O,J)}}var S=z("ArrayBuffer");function T(U){return U instanceof ArrayBuffer||S(U)}function B(U){var Y=U.length*3,X=_.call(this,Y),O=b.write.call(X,U);return Y!==O&&(X=b.slice.call(X,0,O)),X}function C(U){return c(U)?d:l(U)?m:o(U)?u:n?d:a?m:u}function D(){return!1}function z(U,Y){return U="[object "+U+"]",function(X){return X!=null&&{}.toString.call(Y?X[Y]:X)===U}}}(bufferish)),bufferish}extBuffer.ExtBuffer=ExtBuffer$1;var Bufferish$5=requireBufferish();function ExtBuffer$1(t,e){if(!(this instanceof ExtBuffer$1))return new ExtBuffer$1(t,e);this.buffer=Bufferish$5.from(t),this.type=e}var extPacker={},hasRequiredExtPacker;function requireExtPacker(){if(hasRequiredExtPacker)return extPacker;hasRequiredExtPacker=1,extPacker.setExtPackers=c;var t=requireBufferish(),e=t.global,n=t.Uint8Array.from,a,o={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function c(b){b.addExtPacker(14,Error,[m,l]),b.addExtPacker(1,EvalError,[m,l]),b.addExtPacker(2,RangeError,[m,l]),b.addExtPacker(3,ReferenceError,[m,l]),b.addExtPacker(4,SyntaxError,[m,l]),b.addExtPacker(5,TypeError,[m,l]),b.addExtPacker(6,URIError,[m,l]),b.addExtPacker(10,RegExp,[d,l]),b.addExtPacker(11,Boolean,[u,l]),b.addExtPacker(12,String,[u,l]),b.addExtPacker(13,Date,[Number,l]),b.addExtPacker(15,Number,[u,l]),typeof Uint8Array<"u"&&(b.addExtPacker(17,Int8Array,n),b.addExtPacker(18,Uint8Array,n),b.addExtPacker(19,Int16Array,n),b.addExtPacker(20,Uint16Array,n),b.addExtPacker(21,Int32Array,n),b.addExtPacker(22,Uint32Array,n),b.addExtPacker(23,Float32Array,n),typeof Float64Array<"u"&&b.addExtPacker(24,Float64Array,n),typeof Uint8ClampedArray<"u"&&b.addExtPacker(25,Uint8ClampedArray,n),b.addExtPacker(26,ArrayBuffer,n),b.addExtPacker(29,DataView,n)),t.hasBuffer&&b.addExtPacker(27,e,t.from)}function l(b){return a||(a=requireEncode().encode),a(b)}function u(b){return b.valueOf()}function d(b){b=RegExp.prototype.toString.call(b).split("/"),b.shift();var x=[b.pop()];return x.unshift(b.join("/")),x}function m(b){var x={};for(var _ in o)x[_]=b[_];return x}return extPacker}var writeType={},int64Buffer={};(function(t){(function(e){var n="undefined",a=n!==typeof Buffer$x&&Buffer$x,o=n!==typeof Uint8Array&&Uint8Array,c=n!==typeof ArrayBuffer&&ArrayBuffer,l=[0,0,0,0,0,0,0,0],u=Array.isArray||X,d=4294967296,m=16777216,b;x("Uint64BE",!0,!0),x("Int64BE",!0,!1),x("Uint64LE",!1,!0),x("Int64LE",!1,!1);function x(O,J,Z){var se=J?0:4,ie=J?4:0,F=J?0:3,k=J?1:2,y=J?2:1,A=J?3:0,I=J?D:U,P=J?z:Y,H=M.prototype,q="is"+O,j="_"+q;return H.buffer=void 0,H.offset=0,H[j]=!0,H.toNumber=Q,H.toString=ce,H.toJSON=Q,H.toArray=_,a&&(H.toBuffer=w),o&&(H.toArrayBuffer=S),M[q]=E,e[O]=M,M;function M(de,ae,he,te){return this instanceof M?L(this,de,ae,he,te):new M(de,ae,he,te)}function E(de){return!!(de&&de[j])}function L(de,ae,he,te,pe){if(o&&c&&(ae instanceof c&&(ae=new o(ae)),te instanceof c&&(te=new o(te))),!ae&&!he&&!te&&!b){de.buffer=C(l,0);return}if(!T(ae,he)){var ee=b||Array;pe=he,te=ae,he=0,ae=new ee(8)}de.buffer=ae,de.offset=he|=0,n!==typeof te&&(typeof te=="string"?le(ae,he,te,pe||10):T(te,pe)?B(ae,he,te,pe):typeof pe=="number"?(fe(ae,he+se,te),fe(ae,he+ie,pe)):te>0?I(ae,he,te):te<0?P(ae,he,te):B(ae,he,l,0))}function le(de,ae,he,te){var pe=0,ee=he.length,ge=0,Ee=0;he[0]==="-"&&pe++;for(var be=pe;pe<ee;){var xe=parseInt(he[pe++],te);if(!(xe>=0))break;Ee=Ee*te+xe,ge=ge*te+Math.floor(Ee/d),Ee%=d}be&&(ge=~ge,Ee?Ee=d-Ee:ge++),fe(de,ae+se,ge),fe(de,ae+ie,Ee)}function Q(){var de=this.buffer,ae=this.offset,he=oe(de,ae+se),te=oe(de,ae+ie);return Z||(he|=0),he?he*d+te:te}function ce(de){var ae=this.buffer,he=this.offset,te=oe(ae,he+se),pe=oe(ae,he+ie),ee="",ge=!Z&&te&2147483648;for(ge&&(te=~te,pe=d-pe),de=de||10;;){var Ee=te%de*d+pe;if(te=Math.floor(te/de),pe=Math.floor(Ee/de),ee=(Ee%de).toString(de)+ee,!te&&!pe)break}return ge&&(ee="-"+ee),ee}function fe(de,ae,he){de[ae+A]=he&255,he=he>>8,de[ae+y]=he&255,he=he>>8,de[ae+k]=he&255,he=he>>8,de[ae+F]=he&255}function oe(de,ae){return de[ae+F]*m+(de[ae+k]<<16)+(de[ae+y]<<8)+de[ae+A]}}function _(O){var J=this.buffer,Z=this.offset;return b=null,O!==!1&&Z===0&&J.length===8&&u(J)?J:C(J,Z)}function w(O){var J=this.buffer,Z=this.offset;if(b=a,O!==!1&&Z===0&&J.length===8&&Buffer$x.isBuffer(J))return J;var se=new a(8);return B(se,0,J,Z),se}function S(O){var J=this.buffer,Z=this.offset,se=J.buffer;if(b=o,O!==!1&&Z===0&&se instanceof c&&se.byteLength===8)return se;var ie=new o(8);return B(ie,0,J,Z),ie.buffer}function T(O,J){var Z=O&&O.length;return J|=0,Z&&J+8<=Z&&typeof O[J]!="string"}function B(O,J,Z,se){J|=0,se|=0;for(var ie=0;ie<8;ie++)O[J++]=Z[se++]&255}function C(O,J){return Array.prototype.slice.call(O,J,J+8)}function D(O,J,Z){for(var se=J+8;se>J;)O[--se]=Z&255,Z/=256}function z(O,J,Z){var se=J+8;for(Z++;se>J;)O[--se]=-Z&255^255,Z/=256}function U(O,J,Z){for(var se=J+8;J<se;)O[J++]=Z&255,Z/=256}function Y(O,J,Z){var se=J+8;for(Z++;J<se;)O[J++]=-Z&255^255,Z/=256}function X(O){return!!O&&Object.prototype.toString.call(O)=="[object Array]"}})(typeof t.nodeName!="string"?t:commonjsGlobal||{})})(int64Buffer);var writeToken={},writeUint8={},constant$1=writeUint8.uint8=new Array(256);for(var i=0;i<=255;i++)constant$1[i]=write0(i);function write0(t){return function(e){var n=e.reserve(1);e.buffer[n]=t}}var ieee754$1=ieee754$2,Int64Buffer$2=int64Buffer,Uint64BE$2=Int64Buffer$2.Uint64BE,Int64BE$2=Int64Buffer$2.Int64BE,uint8$2=writeUint8.uint8,Bufferish$4=requireBufferish(),Buffer$1=Bufferish$4.global,IS_BUFFER_SHIM=Bufferish$4.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer$1,NO_TYPED_ARRAY=IS_BUFFER_SHIM&&!Buffer$1.TYPED_ARRAY_SUPPORT,Buffer_prototype=Bufferish$4.hasBuffer&&Buffer$1.prototype||{};writeToken.getWriteToken=getWriteToken;function getWriteToken(t){return t&&t.uint8array?init_uint8array():NO_TYPED_ARRAY||Bufferish$4.hasBuffer&&t&&t.safe?init_safe():init_token$1()}function init_uint8array(){var t=init_token$1();return t[202]=writeN(202,4,writeFloatBE),t[203]=writeN(203,8,writeDoubleBE),t}function init_token$1(){var t=uint8$2.slice();return t[196]=write1(196),t[197]=write2(197),t[198]=write4(198),t[199]=write1(199),t[200]=write2(200),t[201]=write4(201),t[202]=writeN(202,4,Buffer_prototype.writeFloatBE||writeFloatBE,!0),t[203]=writeN(203,8,Buffer_prototype.writeDoubleBE||writeDoubleBE,!0),t[204]=write1(204),t[205]=write2(205),t[206]=write4(206),t[207]=writeN(207,8,writeUInt64BE),t[208]=write1(208),t[209]=write2(209),t[210]=write4(210),t[211]=writeN(211,8,writeInt64BE),t[217]=write1(217),t[218]=write2(218),t[219]=write4(219),t[220]=write2(220),t[221]=write4(221),t[222]=write2(222),t[223]=write4(223),t}function init_safe(){var t=uint8$2.slice();return t[196]=writeN(196,1,Buffer$1.prototype.writeUInt8),t[197]=writeN(197,2,Buffer$1.prototype.writeUInt16BE),t[198]=writeN(198,4,Buffer$1.prototype.writeUInt32BE),t[199]=writeN(199,1,Buffer$1.prototype.writeUInt8),t[200]=writeN(200,2,Buffer$1.prototype.writeUInt16BE),t[201]=writeN(201,4,Buffer$1.prototype.writeUInt32BE),t[202]=writeN(202,4,Buffer$1.prototype.writeFloatBE),t[203]=writeN(203,8,Buffer$1.prototype.writeDoubleBE),t[204]=writeN(204,1,Buffer$1.prototype.writeUInt8),t[205]=writeN(205,2,Buffer$1.prototype.writeUInt16BE),t[206]=writeN(206,4,Buffer$1.prototype.writeUInt32BE),t[207]=writeN(207,8,writeUInt64BE),t[208]=writeN(208,1,Buffer$1.prototype.writeInt8),t[209]=writeN(209,2,Buffer$1.prototype.writeInt16BE),t[210]=writeN(210,4,Buffer$1.prototype.writeInt32BE),t[211]=writeN(211,8,writeInt64BE),t[217]=writeN(217,1,Buffer$1.prototype.writeUInt8),t[218]=writeN(218,2,Buffer$1.prototype.writeUInt16BE),t[219]=writeN(219,4,Buffer$1.prototype.writeUInt32BE),t[220]=writeN(220,2,Buffer$1.prototype.writeUInt16BE),t[221]=writeN(221,4,Buffer$1.prototype.writeUInt32BE),t[222]=writeN(222,2,Buffer$1.prototype.writeUInt16BE),t[223]=writeN(223,4,Buffer$1.prototype.writeUInt32BE),t}function write1(t){return function(e,n){var a=e.reserve(2),o=e.buffer;o[a++]=t,o[a]=n}}function write2(t){return function(e,n){var a=e.reserve(3),o=e.buffer;o[a++]=t,o[a++]=n>>>8,o[a]=n}}function write4(t){return function(e,n){var a=e.reserve(5),o=e.buffer;o[a++]=t,o[a++]=n>>>24,o[a++]=n>>>16,o[a++]=n>>>8,o[a]=n}}function writeN(t,e,n,a){return function(o,c){var l=o.reserve(e+1);o.buffer[l++]=t,n.call(o.buffer,c,l,a)}}function writeUInt64BE(t,e){new Uint64BE$2(this,e,t)}function writeInt64BE(t,e){new Int64BE$2(this,e,t)}function writeFloatBE(t,e){ieee754$1.write(this,t,e,!1,23,4)}function writeDoubleBE(t,e){ieee754$1.write(this,t,e,!1,52,8)}var IS_ARRAY$1=isarray,Int64Buffer$1=int64Buffer,Uint64BE$1=Int64Buffer$1.Uint64BE,Int64BE$1=Int64Buffer$1.Int64BE,Bufferish$3=requireBufferish(),BufferProto$1=requireBufferishProto(),WriteToken=writeToken,uint8$1=writeUint8.uint8,ExtBuffer=extBuffer.ExtBuffer,HAS_UINT8ARRAY=typeof Uint8Array<"u",HAS_MAP$1=typeof Map<"u",extmap=[];extmap[1]=212;extmap[2]=213;extmap[4]=214;extmap[8]=215;extmap[16]=216;writeType.getWriteType=getWriteType;function getWriteType(t){var e=WriteToken.getWriteToken(t),n=t&&t.useraw,a=HAS_UINT8ARRAY&&t&&t.binarraybuffer,o=a?Bufferish$3.isArrayBuffer:Bufferish$3.isBuffer,c=a?Y:U,l=HAS_MAP$1&&t&&t.usemap,u=l?J:O,d={boolean:m,function:D,number:b,object:n?C:B,string:T(n?S:w),symbol:D,undefined:D};return d;function m(se,ie){var F=ie?195:194;e[F](se,ie)}function b(se,ie){var F=ie|0,k;if(ie!==F){k=203,e[k](se,ie);return}else-32<=F&&F<=127?k=F&255:0<=F?k=F<=255?204:F<=65535?205:206:k=-128<=F?208:-32768<=F?209:210;e[k](se,F)}function x(se,ie){var F=207;e[F](se,ie.toArray())}function _(se,ie){var F=211;e[F](se,ie.toArray())}function w(se){return se<32?1:se<=255?2:se<=65535?3:5}function S(se){return se<32?1:se<=65535?3:5}function T(se){return ie;function ie(F,k){var y=k.length,A=5+y*3;F.offset=F.reserve(A);var I=F.buffer,P=se(y),H=F.offset+P;y=BufferProto$1.write.call(I,k,H);var q=se(y);if(P!==q){var j=H+q-P,M=H+y;BufferProto$1.copy.call(I,I,j,H,M)}var E=q===1?160+y:q<=3?215+q:219;e[E](F,y),F.offset+=y}}function B(se,ie){if(ie===null)return D(se,ie);if(o(ie))return c(se,ie);if(IS_ARRAY$1(ie))return z(se,ie);if(Uint64BE$1.isUint64BE(ie))return x(se,ie);if(Int64BE$1.isInt64BE(ie))return _(se,ie);var F=se.codec.getExtPacker(ie);if(F&&(ie=F(ie)),ie instanceof ExtBuffer)return X(se,ie);u(se,ie)}function C(se,ie){if(o(ie))return Z(se,ie);B(se,ie)}function D(se,ie){var F=192;e[F](se,ie)}function z(se,ie){var F=ie.length,k=F<16?144+F:F<=65535?220:221;e[k](se,F);for(var y=se.codec.encode,A=0;A<F;A++)y(se,ie[A])}function U(se,ie){var F=ie.length,k=F<255?196:F<=65535?197:198;e[k](se,F),se.send(ie)}function Y(se,ie){U(se,new Uint8Array(ie))}function X(se,ie){var F=ie.buffer,k=F.length,y=extmap[k]||(k<255?199:k<=65535?200:201);e[y](se,k),uint8$1[ie.type](se),se.send(F)}function O(se,ie){var F=Object.keys(ie),k=F.length,y=k<16?128+k:k<=65535?222:223;e[y](se,k);var A=se.codec.encode;F.forEach(function(I){A(se,I),A(se,ie[I])})}function J(se,ie){if(!(ie instanceof Map))return O(se,ie);var F=ie.size,k=F<16?128+F:F<=65535?222:223;e[k](se,F);var y=se.codec.encode;ie.forEach(function(A,I,P){y(se,I),y(se,A)})}function Z(se,ie){var F=ie.length,k=F<32?160+F:F<=65535?218:219;e[k](se,F),se.send(ie)}}var codecBase={},IS_ARRAY=isarray;codecBase.createCodec=createCodec;codecBase.install=install;codecBase.filter=filter;var Bufferish$2=requireBufferish();function Codec$2(t){if(!(this instanceof Codec$2))return new Codec$2(t);this.options=t,this.init()}Codec$2.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=Bufferish$2.Uint8Array),this};function install(t){for(var e in t)Codec$2.prototype[e]=add(Codec$2.prototype[e],t[e])}function add(t,e){return t&&e?n:t||e;function n(){return t.apply(this,arguments),e.apply(this,arguments)}}function join(t){return t=t.slice(),function(n){return t.reduce(e,n)};function e(n,a){return a(n)}}function filter(t){return IS_ARRAY(t)?join(t):t}function createCodec(t){return new Codec$2(t)}codecBase.preset=createCodec({preset:!0});var hasRequiredWriteCore;function requireWriteCore(){if(hasRequiredWriteCore)return writeCore;hasRequiredWriteCore=1;var t=extBuffer.ExtBuffer,e=requireExtPacker(),n=writeType,a=codecBase;a.install({addExtPacker:l,getExtPacker:u,init:c}),writeCore.preset=c.call(a.preset);function o(d){var m=n.getWriteType(d);return b;function b(x,_){var w=m[typeof _];if(!w)throw new Error('Unsupported type "'+typeof _+'": '+_);w(x,_)}}function c(){var d=this.options;return this.encode=o(d),d&&d.preset&&e.setExtPackers(this),this}function l(d,m,b){b=a.filter(b);var x=m.name;if(x&&x!=="Object"){var _=this.extPackers||(this.extPackers={});_[x]=S}else{var w=this.extEncoderList||(this.extEncoderList=[]);w.unshift([m,S])}function S(T){return b&&(T=b(T)),new t(T,d)}}function u(d){var m=this.extPackers||(this.extPackers={}),b=d.constructor,x=b&&b.name&&m[b.name];if(x)return x;for(var _=this.extEncoderList||(this.extEncoderList=[]),w=_.length,S=0;S<w;S++){var T=_[S];if(b===T[0])return T[1]}}return writeCore}var flexBuffer={};flexBuffer.FlexDecoder=FlexDecoder;flexBuffer.FlexEncoder=FlexEncoder;var Bufferish$1=requireBufferish(),MIN_BUFFER_SIZE=2048,MAX_BUFFER_SIZE=65536,BUFFER_SHORTAGE="BUFFER_SHORTAGE";function FlexDecoder(){if(!(this instanceof FlexDecoder))return new FlexDecoder}function FlexEncoder(){if(!(this instanceof FlexEncoder))return new FlexEncoder}FlexDecoder.mixin=mixinFactory(getDecoderMethods());FlexDecoder.mixin(FlexDecoder.prototype);FlexEncoder.mixin=mixinFactory(getEncoderMethods());FlexEncoder.mixin(FlexEncoder.prototype);function getDecoderMethods(){return{bufferish:Bufferish$1,write:t,fetch:fetch$3,flush:e,push,pull,read:read$3,reserve:n,offset:0};function t(a){var o=this.offset?Bufferish$1.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=o?a?this.bufferish.concat([o,a]):o:a,this.offset=0}function e(){for(;this.offset<this.buffer.length;){var a=this.offset,o;try{o=this.fetch()}catch(c){if(c&&c.message!=BUFFER_SHORTAGE)throw c;this.offset=a;break}this.push(o)}}function n(a){var o=this.offset,c=o+a;if(c>this.buffer.length)throw new Error(BUFFER_SHORTAGE);return this.offset=c,o}}function getEncoderMethods(){return{bufferish:Bufferish$1,write,fetch:t,flush:e,push,pull:n,read:read$3,reserve:a,send:o,maxBufferSize:MAX_BUFFER_SIZE,minBufferSize:MIN_BUFFER_SIZE,offset:0,start:0};function t(){var c=this.start;if(c<this.offset){var l=this.start=this.offset;return Bufferish$1.prototype.slice.call(this.buffer,c,l)}}function e(){for(;this.start<this.offset;){var c=this.fetch();c&&this.push(c)}}function n(){var c=this.buffers||(this.buffers=[]),l=c.length>1?this.bufferish.concat(c):c[0];return c.length=0,l}function a(c){var l=c|0;if(this.buffer){var u=this.buffer.length,d=this.offset|0,m=d+l;if(m<u)return this.offset=m,d;this.flush(),c=Math.max(c,Math.min(u*2,this.maxBufferSize))}return c=Math.max(c,this.minBufferSize),this.buffer=this.bufferish.alloc(c),this.start=0,this.offset=l,0}function o(c){var l=c.length;if(l>this.minBufferSize)this.flush(),this.push(c);else{var u=this.reserve(l);Bufferish$1.prototype.copy.call(c,this.buffer,u)}}}function write(){throw new Error("method not implemented: write()")}function fetch$3(){throw new Error("method not implemented: fetch()")}function read$3(){var t=this.buffers&&this.buffers.length;return t?(this.flush(),this.pull()):this.fetch()}function push(t){var e=this.buffers||(this.buffers=[]);e.push(t)}function pull(){var t=this.buffers||(this.buffers=[]);return t.shift()}function mixinFactory(t){return e;function e(n){for(var a in t)n[a]=t[a];return n}}var hasRequiredEncodeBuffer;function requireEncodeBuffer(){if(hasRequiredEncodeBuffer)return encodeBuffer;hasRequiredEncodeBuffer=1,encodeBuffer.EncodeBuffer=n;var t=requireWriteCore().preset,e=flexBuffer.FlexEncoder;e.mixin(n.prototype);function n(a){if(!(this instanceof n))return new n(a);if(a&&(this.options=a,a.codec)){var o=this.codec=a.codec;o.bufferish&&(this.bufferish=o.bufferish)}}return n.prototype.codec=t,n.prototype.write=function(a){this.codec.encode(this,a)},encodeBuffer}var hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode$7;hasRequiredEncode=1,encode$7.encode=e;var t=requireEncodeBuffer().EncodeBuffer;function e(n,a){var o=new t(a);return o.write(n),o.read()}return encode$7}var decode$8={},decodeBuffer={},readCore={},extUnpacker={},hasRequiredExtUnpacker;function requireExtUnpacker(){if(hasRequiredExtUnpacker)return extUnpacker;hasRequiredExtUnpacker=1,extUnpacker.setExtUnpackers=o;var t=requireBufferish(),e=t.global,n,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function o(b){b.addExtUnpacker(14,[c,u(Error)]),b.addExtUnpacker(1,[c,u(EvalError)]),b.addExtUnpacker(2,[c,u(RangeError)]),b.addExtUnpacker(3,[c,u(ReferenceError)]),b.addExtUnpacker(4,[c,u(SyntaxError)]),b.addExtUnpacker(5,[c,u(TypeError)]),b.addExtUnpacker(6,[c,u(URIError)]),b.addExtUnpacker(10,[c,l]),b.addExtUnpacker(11,[c,d(Boolean)]),b.addExtUnpacker(12,[c,d(String)]),b.addExtUnpacker(13,[c,d(Date)]),b.addExtUnpacker(15,[c,d(Number)]),typeof Uint8Array<"u"&&(b.addExtUnpacker(17,d(Int8Array)),b.addExtUnpacker(18,d(Uint8Array)),b.addExtUnpacker(19,[m,d(Int16Array)]),b.addExtUnpacker(20,[m,d(Uint16Array)]),b.addExtUnpacker(21,[m,d(Int32Array)]),b.addExtUnpacker(22,[m,d(Uint32Array)]),b.addExtUnpacker(23,[m,d(Float32Array)]),typeof Float64Array<"u"&&b.addExtUnpacker(24,[m,d(Float64Array)]),typeof Uint8ClampedArray<"u"&&b.addExtUnpacker(25,d(Uint8ClampedArray)),b.addExtUnpacker(26,m),b.addExtUnpacker(29,[m,d(DataView)])),t.hasBuffer&&b.addExtUnpacker(27,d(e))}function c(b){return n||(n=requireDecode().decode),n(b)}function l(b){return RegExp.apply(null,b)}function u(b){return function(x){var _=new b;for(var w in a)_[w]=x[w];return _}}function d(b){return function(x){return new b(x)}}function m(b){return new Uint8Array(b).buffer}return extUnpacker}var readFormat={},ieee754=ieee754$2,Int64Buffer=int64Buffer,Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE;readFormat.getReadFormat=getReadFormat;readFormat.readUint8=uint8;var Bufferish=requireBufferish(),BufferProto=requireBufferishProto(),HAS_MAP=typeof Map<"u",NO_ASSERT=!0;function getReadFormat(t){var e=Bufferish.hasArrayBuffer&&t&&t.binarraybuffer,n=t&&t.int64,a=HAS_MAP&&t&&t.usemap,o={map:a?map_to_map:map_to_obj,array,str,bin:e?bin_arraybuffer:bin_buffer,ext:ext$1,uint8,uint16,uint32,uint64:read$2(8,n?readUInt64BE_int64:readUInt64BE),int8,int16,int32,int64:read$2(8,n?readInt64BE_int64:readInt64BE),float32:read$2(4,readFloatBE),float64:read$2(8,readDoubleBE)};return o}function map_to_obj(t,e){var n={},a,o=new Array(e),c=new Array(e),l=t.codec.decode;for(a=0;a<e;a++)o[a]=l(t),c[a]=l(t);for(a=0;a<e;a++)n[o[a]]=c[a];return n}function map_to_map(t,e){var n=new Map,a,o=new Array(e),c=new Array(e),l=t.codec.decode;for(a=0;a<e;a++)o[a]=l(t),c[a]=l(t);for(a=0;a<e;a++)n.set(o[a],c[a]);return n}function array(t,e){for(var n=new Array(e),a=t.codec.decode,o=0;o<e;o++)n[o]=a(t);return n}function str(t,e){var n=t.reserve(e),a=n+e;return BufferProto.toString.call(t.buffer,"utf-8",n,a)}function bin_buffer(t,e){var n=t.reserve(e),a=n+e,o=BufferProto.slice.call(t.buffer,n,a);return Bufferish.from(o)}function bin_arraybuffer(t,e){var n=t.reserve(e),a=n+e,o=BufferProto.slice.call(t.buffer,n,a);return Bufferish.Uint8Array.from(o).buffer}function ext$1(t,e){var n=t.reserve(e+1),a=t.buffer[n++],o=n+e,c=t.codec.getExtUnpacker(a);if(!c)throw new Error("Invalid ext type: "+(a&&"0x"+a.toString(16)));var l=BufferProto.slice.call(t.buffer,n,o);return c(l)}function uint8(t){var e=t.reserve(1);return t.buffer[e]}function int8(t){var e=t.reserve(1),n=t.buffer[e];return n&128?n-256:n}function uint16(t){var e=t.reserve(2),n=t.buffer;return n[e++]<<8|n[e]}function int16(t){var e=t.reserve(2),n=t.buffer,a=n[e++]<<8|n[e];return a&32768?a-65536:a}function uint32(t){var e=t.reserve(4),n=t.buffer;return n[e++]*16777216+(n[e++]<<16)+(n[e++]<<8)+n[e]}function int32(t){var e=t.reserve(4),n=t.buffer;return n[e++]<<24|n[e++]<<16|n[e++]<<8|n[e]}function read$2(t,e){return function(n){var a=n.reserve(t);return e.call(n.buffer,a,NO_ASSERT)}}function readUInt64BE(t){return new Uint64BE(this,t).toNumber()}function readInt64BE(t){return new Int64BE(this,t).toNumber()}function readUInt64BE_int64(t){return new Uint64BE(this,t)}function readInt64BE_int64(t){return new Int64BE(this,t)}function readFloatBE(t){return ieee754.read(this,t,!1,23,4)}function readDoubleBE(t){return ieee754.read(this,t,!1,52,8)}var readToken={},ReadFormat=readFormat;readToken.getReadToken=getReadToken;function getReadToken(t){var e=ReadFormat.getReadFormat(t);return t&&t.useraw?init_useraw(e):init_token(e)}function init_token(t){var e,n=new Array(256);for(e=0;e<=127;e++)n[e]=constant(e);for(e=128;e<=143;e++)n[e]=fix(e-128,t.map);for(e=144;e<=159;e++)n[e]=fix(e-144,t.array);for(e=160;e<=191;e++)n[e]=fix(e-160,t.str);for(n[192]=constant(null),n[193]=null,n[194]=constant(!1),n[195]=constant(!0),n[196]=flex(t.uint8,t.bin),n[197]=flex(t.uint16,t.bin),n[198]=flex(t.uint32,t.bin),n[199]=flex(t.uint8,t.ext),n[200]=flex(t.uint16,t.ext),n[201]=flex(t.uint32,t.ext),n[202]=t.float32,n[203]=t.float64,n[204]=t.uint8,n[205]=t.uint16,n[206]=t.uint32,n[207]=t.uint64,n[208]=t.int8,n[209]=t.int16,n[210]=t.int32,n[211]=t.int64,n[212]=fix(1,t.ext),n[213]=fix(2,t.ext),n[214]=fix(4,t.ext),n[215]=fix(8,t.ext),n[216]=fix(16,t.ext),n[217]=flex(t.uint8,t.str),n[218]=flex(t.uint16,t.str),n[219]=flex(t.uint32,t.str),n[220]=flex(t.uint16,t.array),n[221]=flex(t.uint32,t.array),n[222]=flex(t.uint16,t.map),n[223]=flex(t.uint32,t.map),e=224;e<=255;e++)n[e]=constant(e-256);return n}function init_useraw(t){var e,n=init_token(t).slice();for(n[217]=n[196],n[218]=n[197],n[219]=n[198],e=160;e<=191;e++)n[e]=fix(e-160,t.bin);return n}function constant(t){return function(){return t}}function flex(t,e){return function(n){var a=t(n);return e(n,a)}}function fix(t,e){return function(n){return e(n,t)}}var hasRequiredReadCore;function requireReadCore(){if(hasRequiredReadCore)return readCore;hasRequiredReadCore=1;var t=extBuffer.ExtBuffer,e=requireExtUnpacker(),n=readFormat.readUint8,a=readToken,o=codecBase;o.install({addExtUnpacker:u,getExtUnpacker:d,init:l}),readCore.preset=l.call(o.preset);function c(m){var b=a.getReadToken(m);return x;function x(_){var w=n(_),S=b[w];if(!S)throw new Error("Invalid type: "+(w&&"0x"+w.toString(16)));return S(_)}}function l(){var m=this.options;return this.decode=c(m),m&&m.preset&&e.setExtUnpackers(this),this}function u(m,b){var x=this.extUnpackers||(this.extUnpackers=[]);x[m]=o.filter(b)}function d(m){var b=this.extUnpackers||(this.extUnpackers=[]);return b[m]||x;function x(_){return new t(_,m)}}return readCore}var hasRequiredDecodeBuffer;function requireDecodeBuffer(){if(hasRequiredDecodeBuffer)return decodeBuffer;hasRequiredDecodeBuffer=1,decodeBuffer.DecodeBuffer=n;var t=requireReadCore().preset,e=flexBuffer.FlexDecoder;e.mixin(n.prototype);function n(a){if(!(this instanceof n))return new n(a);if(a&&(this.options=a,a.codec)){var o=this.codec=a.codec;o.bufferish&&(this.bufferish=o.bufferish)}}return n.prototype.codec=t,n.prototype.fetch=function(){return this.codec.decode(this)},decodeBuffer}var hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode$8;hasRequiredDecode=1,decode$8.decode=e;var t=requireDecodeBuffer().DecodeBuffer;function e(n,a){var o=new t(a);return o.write(n),o.read()}return decode$8}var encoder={},eventLiteExports={},eventLite={get exports(){return eventLiteExports},set exports(t){eventLiteExports=t}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */(function(t){function e(){if(!(this instanceof e))return new e}(function(n){t.exports=n;var a="listeners",o={on:l,once:u,off:d,emit:m};c(n.prototype),n.mixin=c;function c(x){for(var _ in o)x[_]=o[_];return x}function l(x,_){return b(this,x).push(_),this}function u(x,_){var w=this;return S.originalListener=_,b(w,x).push(S),w;function S(){d.call(w,x,S),_.apply(this,arguments)}}function d(x,_){var w=this,S;if(!arguments.length)delete w[a];else if(_){if(S=b(w,x,!0),S){if(S=S.filter(T),!S.length)return d.call(w,x);w[a][x]=S}}else if(S=w[a],S&&(delete S[x],!Object.keys(S).length))return d.call(w);return w;function T(B){return B!==_&&B.originalListener!==_}}function m(x,_){var w=this,S=b(w,x,!0);if(!S)return!1;var T=arguments.length;if(T===1)S.forEach(C);else if(T===2)S.forEach(D);else{var B=Array.prototype.slice.call(arguments,1);S.forEach(z)}return!!S.length;function C(U){U.call(w)}function D(U){U.call(w,_)}function z(U){U.apply(w,B)}}function b(x,_,w){if(!(w&&!x[a])){var S=x[a]||(x[a]={});return S[_]||(S[_]=[])}}})(e)})(eventLite);encoder.Encoder=Encoder$2;var EventLite$1=eventLiteExports,EncodeBuffer=requireEncodeBuffer().EncodeBuffer;function Encoder$2(t){if(!(this instanceof Encoder$2))return new Encoder$2(t);EncodeBuffer.call(this,t)}Encoder$2.prototype=new EncodeBuffer;EventLite$1.mixin(Encoder$2.prototype);Encoder$2.prototype.encode=function(t){this.write(t),this.emit("data",this.read())};Encoder$2.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")};var decoder={};decoder.Decoder=Decoder$2;var EventLite=eventLiteExports,DecodeBuffer=requireDecodeBuffer().DecodeBuffer;function Decoder$2(t){if(!(this instanceof Decoder$2))return new Decoder$2(t);DecodeBuffer.call(this,t)}Decoder$2.prototype=new DecodeBuffer;EventLite.mixin(Decoder$2.prototype);Decoder$2.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()};Decoder$2.prototype.push=function(t){this.emit("data",t)};Decoder$2.prototype.end=function(t){this.decode(t),this.emit("end")};var ext={};requireReadCore();requireWriteCore();ext.createCodec=codecBase.createCodec;var codec={};requireReadCore();requireWriteCore();codec.codec={preset:codecBase.preset};browser$3.encode=requireEncode().encode;browser$3.decode=requireDecode().decode;browser$3.Encoder=encoder.Encoder;browser$3.Decoder=decoder.Decoder;browser$3.createCodec=ext.createCodec;browser$3.codec=codec.codec;var naclFastExports={},naclFast={get exports(){return naclFastExports},set exports(t){naclFastExports=t}};(function(t){(function(e){var n=function(we){var Be,Me=new Float64Array(16);if(we)for(Be=0;Be<we.length;Be++)Me[Be]=we[Be];return Me},a=function(){throw new Error("no PRNG")},o=new Uint8Array(16),c=new Uint8Array(32);c[0]=9;var l=n(),u=n([1]),d=n([56129,1]),m=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),b=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),x=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function S(we,Be,Me,re){we[Be]=Me>>24&255,we[Be+1]=Me>>16&255,we[Be+2]=Me>>8&255,we[Be+3]=Me&255,we[Be+4]=re>>24&255,we[Be+5]=re>>16&255,we[Be+6]=re>>8&255,we[Be+7]=re&255}function T(we,Be,Me,re,ye){var Ae,$e=0;for(Ae=0;Ae<ye;Ae++)$e|=we[Be+Ae]^Me[re+Ae];return(1&$e-1>>>8)-1}function B(we,Be,Me,re){return T(we,Be,Me,re,16)}function C(we,Be,Me,re){return T(we,Be,Me,re,32)}function D(we,Be,Me,re){for(var ye=re[0]&255|(re[1]&255)<<8|(re[2]&255)<<16|(re[3]&255)<<24,Ae=Me[0]&255|(Me[1]&255)<<8|(Me[2]&255)<<16|(Me[3]&255)<<24,$e=Me[4]&255|(Me[5]&255)<<8|(Me[6]&255)<<16|(Me[7]&255)<<24,Te=Me[8]&255|(Me[9]&255)<<8|(Me[10]&255)<<16|(Me[11]&255)<<24,Oe=Me[12]&255|(Me[13]&255)<<8|(Me[14]&255)<<16|(Me[15]&255)<<24,Fe=re[4]&255|(re[5]&255)<<8|(re[6]&255)<<16|(re[7]&255)<<24,Ue=Be[0]&255|(Be[1]&255)<<8|(Be[2]&255)<<16|(Be[3]&255)<<24,ze=Be[4]&255|(Be[5]&255)<<8|(Be[6]&255)<<16|(Be[7]&255)<<24,He=Be[8]&255|(Be[9]&255)<<8|(Be[10]&255)<<16|(Be[11]&255)<<24,qe=Be[12]&255|(Be[13]&255)<<8|(Be[14]&255)<<16|(Be[15]&255)<<24,Xe=re[8]&255|(re[9]&255)<<8|(re[10]&255)<<16|(re[11]&255)<<24,Ze=Me[16]&255|(Me[17]&255)<<8|(Me[18]&255)<<16|(Me[19]&255)<<24,at=Me[20]&255|(Me[21]&255)<<8|(Me[22]&255)<<16|(Me[23]&255)<<24,Je=Me[24]&255|(Me[25]&255)<<8|(Me[26]&255)<<16|(Me[27]&255)<<24,Qe=Me[28]&255|(Me[29]&255)<<8|(Me[30]&255)<<16|(Me[31]&255)<<24,gt=re[12]&255|(re[13]&255)<<8|(re[14]&255)<<16|(re[15]&255)<<24,vt=ye,_t=Ae,bt=$e,St=Te,$t=Oe,wt=Fe,Ge=Ue,Ye=ze,ct=He,ot=qe,mt=Xe,Et=Ze,kt=at,Rt=Je,Pt=Qe,Mt=gt,Ve,Nt=0;Nt<20;Nt+=2)Ve=vt+kt|0,$t^=Ve<<7|Ve>>>32-7,Ve=$t+vt|0,ct^=Ve<<9|Ve>>>32-9,Ve=ct+$t|0,kt^=Ve<<13|Ve>>>32-13,Ve=kt+ct|0,vt^=Ve<<18|Ve>>>32-18,Ve=wt+_t|0,ot^=Ve<<7|Ve>>>32-7,Ve=ot+wt|0,Rt^=Ve<<9|Ve>>>32-9,Ve=Rt+ot|0,_t^=Ve<<13|Ve>>>32-13,Ve=_t+Rt|0,wt^=Ve<<18|Ve>>>32-18,Ve=mt+Ge|0,Pt^=Ve<<7|Ve>>>32-7,Ve=Pt+mt|0,bt^=Ve<<9|Ve>>>32-9,Ve=bt+Pt|0,Ge^=Ve<<13|Ve>>>32-13,Ve=Ge+bt|0,mt^=Ve<<18|Ve>>>32-18,Ve=Mt+Et|0,St^=Ve<<7|Ve>>>32-7,Ve=St+Mt|0,Ye^=Ve<<9|Ve>>>32-9,Ve=Ye+St|0,Et^=Ve<<13|Ve>>>32-13,Ve=Et+Ye|0,Mt^=Ve<<18|Ve>>>32-18,Ve=vt+St|0,_t^=Ve<<7|Ve>>>32-7,Ve=_t+vt|0,bt^=Ve<<9|Ve>>>32-9,Ve=bt+_t|0,St^=Ve<<13|Ve>>>32-13,Ve=St+bt|0,vt^=Ve<<18|Ve>>>32-18,Ve=wt+$t|0,Ge^=Ve<<7|Ve>>>32-7,Ve=Ge+wt|0,Ye^=Ve<<9|Ve>>>32-9,Ve=Ye+Ge|0,$t^=Ve<<13|Ve>>>32-13,Ve=$t+Ye|0,wt^=Ve<<18|Ve>>>32-18,Ve=mt+ot|0,Et^=Ve<<7|Ve>>>32-7,Ve=Et+mt|0,ct^=Ve<<9|Ve>>>32-9,Ve=ct+Et|0,ot^=Ve<<13|Ve>>>32-13,Ve=ot+ct|0,mt^=Ve<<18|Ve>>>32-18,Ve=Mt+Pt|0,kt^=Ve<<7|Ve>>>32-7,Ve=kt+Mt|0,Rt^=Ve<<9|Ve>>>32-9,Ve=Rt+kt|0,Pt^=Ve<<13|Ve>>>32-13,Ve=Pt+Rt|0,Mt^=Ve<<18|Ve>>>32-18;vt=vt+ye|0,_t=_t+Ae|0,bt=bt+$e|0,St=St+Te|0,$t=$t+Oe|0,wt=wt+Fe|0,Ge=Ge+Ue|0,Ye=Ye+ze|0,ct=ct+He|0,ot=ot+qe|0,mt=mt+Xe|0,Et=Et+Ze|0,kt=kt+at|0,Rt=Rt+Je|0,Pt=Pt+Qe|0,Mt=Mt+gt|0,we[0]=vt>>>0&255,we[1]=vt>>>8&255,we[2]=vt>>>16&255,we[3]=vt>>>24&255,we[4]=_t>>>0&255,we[5]=_t>>>8&255,we[6]=_t>>>16&255,we[7]=_t>>>24&255,we[8]=bt>>>0&255,we[9]=bt>>>8&255,we[10]=bt>>>16&255,we[11]=bt>>>24&255,we[12]=St>>>0&255,we[13]=St>>>8&255,we[14]=St>>>16&255,we[15]=St>>>24&255,we[16]=$t>>>0&255,we[17]=$t>>>8&255,we[18]=$t>>>16&255,we[19]=$t>>>24&255,we[20]=wt>>>0&255,we[21]=wt>>>8&255,we[22]=wt>>>16&255,we[23]=wt>>>24&255,we[24]=Ge>>>0&255,we[25]=Ge>>>8&255,we[26]=Ge>>>16&255,we[27]=Ge>>>24&255,we[28]=Ye>>>0&255,we[29]=Ye>>>8&255,we[30]=Ye>>>16&255,we[31]=Ye>>>24&255,we[32]=ct>>>0&255,we[33]=ct>>>8&255,we[34]=ct>>>16&255,we[35]=ct>>>24&255,we[36]=ot>>>0&255,we[37]=ot>>>8&255,we[38]=ot>>>16&255,we[39]=ot>>>24&255,we[40]=mt>>>0&255,we[41]=mt>>>8&255,we[42]=mt>>>16&255,we[43]=mt>>>24&255,we[44]=Et>>>0&255,we[45]=Et>>>8&255,we[46]=Et>>>16&255,we[47]=Et>>>24&255,we[48]=kt>>>0&255,we[49]=kt>>>8&255,we[50]=kt>>>16&255,we[51]=kt>>>24&255,we[52]=Rt>>>0&255,we[53]=Rt>>>8&255,we[54]=Rt>>>16&255,we[55]=Rt>>>24&255,we[56]=Pt>>>0&255,we[57]=Pt>>>8&255,we[58]=Pt>>>16&255,we[59]=Pt>>>24&255,we[60]=Mt>>>0&255,we[61]=Mt>>>8&255,we[62]=Mt>>>16&255,we[63]=Mt>>>24&255}function z(we,Be,Me,re){for(var ye=re[0]&255|(re[1]&255)<<8|(re[2]&255)<<16|(re[3]&255)<<24,Ae=Me[0]&255|(Me[1]&255)<<8|(Me[2]&255)<<16|(Me[3]&255)<<24,$e=Me[4]&255|(Me[5]&255)<<8|(Me[6]&255)<<16|(Me[7]&255)<<24,Te=Me[8]&255|(Me[9]&255)<<8|(Me[10]&255)<<16|(Me[11]&255)<<24,Oe=Me[12]&255|(Me[13]&255)<<8|(Me[14]&255)<<16|(Me[15]&255)<<24,Fe=re[4]&255|(re[5]&255)<<8|(re[6]&255)<<16|(re[7]&255)<<24,Ue=Be[0]&255|(Be[1]&255)<<8|(Be[2]&255)<<16|(Be[3]&255)<<24,ze=Be[4]&255|(Be[5]&255)<<8|(Be[6]&255)<<16|(Be[7]&255)<<24,He=Be[8]&255|(Be[9]&255)<<8|(Be[10]&255)<<16|(Be[11]&255)<<24,qe=Be[12]&255|(Be[13]&255)<<8|(Be[14]&255)<<16|(Be[15]&255)<<24,Xe=re[8]&255|(re[9]&255)<<8|(re[10]&255)<<16|(re[11]&255)<<24,Ze=Me[16]&255|(Me[17]&255)<<8|(Me[18]&255)<<16|(Me[19]&255)<<24,at=Me[20]&255|(Me[21]&255)<<8|(Me[22]&255)<<16|(Me[23]&255)<<24,Je=Me[24]&255|(Me[25]&255)<<8|(Me[26]&255)<<16|(Me[27]&255)<<24,Qe=Me[28]&255|(Me[29]&255)<<8|(Me[30]&255)<<16|(Me[31]&255)<<24,gt=re[12]&255|(re[13]&255)<<8|(re[14]&255)<<16|(re[15]&255)<<24,vt=ye,_t=Ae,bt=$e,St=Te,$t=Oe,wt=Fe,Ge=Ue,Ye=ze,ct=He,ot=qe,mt=Xe,Et=Ze,kt=at,Rt=Je,Pt=Qe,Mt=gt,Ve,Nt=0;Nt<20;Nt+=2)Ve=vt+kt|0,$t^=Ve<<7|Ve>>>32-7,Ve=$t+vt|0,ct^=Ve<<9|Ve>>>32-9,Ve=ct+$t|0,kt^=Ve<<13|Ve>>>32-13,Ve=kt+ct|0,vt^=Ve<<18|Ve>>>32-18,Ve=wt+_t|0,ot^=Ve<<7|Ve>>>32-7,Ve=ot+wt|0,Rt^=Ve<<9|Ve>>>32-9,Ve=Rt+ot|0,_t^=Ve<<13|Ve>>>32-13,Ve=_t+Rt|0,wt^=Ve<<18|Ve>>>32-18,Ve=mt+Ge|0,Pt^=Ve<<7|Ve>>>32-7,Ve=Pt+mt|0,bt^=Ve<<9|Ve>>>32-9,Ve=bt+Pt|0,Ge^=Ve<<13|Ve>>>32-13,Ve=Ge+bt|0,mt^=Ve<<18|Ve>>>32-18,Ve=Mt+Et|0,St^=Ve<<7|Ve>>>32-7,Ve=St+Mt|0,Ye^=Ve<<9|Ve>>>32-9,Ve=Ye+St|0,Et^=Ve<<13|Ve>>>32-13,Ve=Et+Ye|0,Mt^=Ve<<18|Ve>>>32-18,Ve=vt+St|0,_t^=Ve<<7|Ve>>>32-7,Ve=_t+vt|0,bt^=Ve<<9|Ve>>>32-9,Ve=bt+_t|0,St^=Ve<<13|Ve>>>32-13,Ve=St+bt|0,vt^=Ve<<18|Ve>>>32-18,Ve=wt+$t|0,Ge^=Ve<<7|Ve>>>32-7,Ve=Ge+wt|0,Ye^=Ve<<9|Ve>>>32-9,Ve=Ye+Ge|0,$t^=Ve<<13|Ve>>>32-13,Ve=$t+Ye|0,wt^=Ve<<18|Ve>>>32-18,Ve=mt+ot|0,Et^=Ve<<7|Ve>>>32-7,Ve=Et+mt|0,ct^=Ve<<9|Ve>>>32-9,Ve=ct+Et|0,ot^=Ve<<13|Ve>>>32-13,Ve=ot+ct|0,mt^=Ve<<18|Ve>>>32-18,Ve=Mt+Pt|0,kt^=Ve<<7|Ve>>>32-7,Ve=kt+Mt|0,Rt^=Ve<<9|Ve>>>32-9,Ve=Rt+kt|0,Pt^=Ve<<13|Ve>>>32-13,Ve=Pt+Rt|0,Mt^=Ve<<18|Ve>>>32-18;we[0]=vt>>>0&255,we[1]=vt>>>8&255,we[2]=vt>>>16&255,we[3]=vt>>>24&255,we[4]=wt>>>0&255,we[5]=wt>>>8&255,we[6]=wt>>>16&255,we[7]=wt>>>24&255,we[8]=mt>>>0&255,we[9]=mt>>>8&255,we[10]=mt>>>16&255,we[11]=mt>>>24&255,we[12]=Mt>>>0&255,we[13]=Mt>>>8&255,we[14]=Mt>>>16&255,we[15]=Mt>>>24&255,we[16]=Ge>>>0&255,we[17]=Ge>>>8&255,we[18]=Ge>>>16&255,we[19]=Ge>>>24&255,we[20]=Ye>>>0&255,we[21]=Ye>>>8&255,we[22]=Ye>>>16&255,we[23]=Ye>>>24&255,we[24]=ct>>>0&255,we[25]=ct>>>8&255,we[26]=ct>>>16&255,we[27]=ct>>>24&255,we[28]=ot>>>0&255,we[29]=ot>>>8&255,we[30]=ot>>>16&255,we[31]=ot>>>24&255}function U(we,Be,Me,re){D(we,Be,Me,re)}function Y(we,Be,Me,re){z(we,Be,Me,re)}var X=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function O(we,Be,Me,re,ye,Ae,$e){var Te=new Uint8Array(16),Oe=new Uint8Array(64),Fe,Ue;for(Ue=0;Ue<16;Ue++)Te[Ue]=0;for(Ue=0;Ue<8;Ue++)Te[Ue]=Ae[Ue];for(;ye>=64;){for(U(Oe,Te,$e,X),Ue=0;Ue<64;Ue++)we[Be+Ue]=Me[re+Ue]^Oe[Ue];for(Fe=1,Ue=8;Ue<16;Ue++)Fe=Fe+(Te[Ue]&255)|0,Te[Ue]=Fe&255,Fe>>>=8;ye-=64,Be+=64,re+=64}if(ye>0)for(U(Oe,Te,$e,X),Ue=0;Ue<ye;Ue++)we[Be+Ue]=Me[re+Ue]^Oe[Ue];return 0}function J(we,Be,Me,re,ye){var Ae=new Uint8Array(16),$e=new Uint8Array(64),Te,Oe;for(Oe=0;Oe<16;Oe++)Ae[Oe]=0;for(Oe=0;Oe<8;Oe++)Ae[Oe]=re[Oe];for(;Me>=64;){for(U($e,Ae,ye,X),Oe=0;Oe<64;Oe++)we[Be+Oe]=$e[Oe];for(Te=1,Oe=8;Oe<16;Oe++)Te=Te+(Ae[Oe]&255)|0,Ae[Oe]=Te&255,Te>>>=8;Me-=64,Be+=64}if(Me>0)for(U($e,Ae,ye,X),Oe=0;Oe<Me;Oe++)we[Be+Oe]=$e[Oe];return 0}function Z(we,Be,Me,re,ye){var Ae=new Uint8Array(32);Y(Ae,re,ye,X);for(var $e=new Uint8Array(8),Te=0;Te<8;Te++)$e[Te]=re[Te+16];return J(we,Be,Me,$e,Ae)}function se(we,Be,Me,re,ye,Ae,$e){var Te=new Uint8Array(32);Y(Te,Ae,$e,X);for(var Oe=new Uint8Array(8),Fe=0;Fe<8;Fe++)Oe[Fe]=Ae[Fe+16];return O(we,Be,Me,re,ye,Oe,Te)}var ie=function(we){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var Be,Me,re,ye,Ae,$e,Te,Oe;Be=we[0]&255|(we[1]&255)<<8,this.r[0]=Be&8191,Me=we[2]&255|(we[3]&255)<<8,this.r[1]=(Be>>>13|Me<<3)&8191,re=we[4]&255|(we[5]&255)<<8,this.r[2]=(Me>>>10|re<<6)&7939,ye=we[6]&255|(we[7]&255)<<8,this.r[3]=(re>>>7|ye<<9)&8191,Ae=we[8]&255|(we[9]&255)<<8,this.r[4]=(ye>>>4|Ae<<12)&255,this.r[5]=Ae>>>1&8190,$e=we[10]&255|(we[11]&255)<<8,this.r[6]=(Ae>>>14|$e<<2)&8191,Te=we[12]&255|(we[13]&255)<<8,this.r[7]=($e>>>11|Te<<5)&8065,Oe=we[14]&255|(we[15]&255)<<8,this.r[8]=(Te>>>8|Oe<<8)&8191,this.r[9]=Oe>>>5&127,this.pad[0]=we[16]&255|(we[17]&255)<<8,this.pad[1]=we[18]&255|(we[19]&255)<<8,this.pad[2]=we[20]&255|(we[21]&255)<<8,this.pad[3]=we[22]&255|(we[23]&255)<<8,this.pad[4]=we[24]&255|(we[25]&255)<<8,this.pad[5]=we[26]&255|(we[27]&255)<<8,this.pad[6]=we[28]&255|(we[29]&255)<<8,this.pad[7]=we[30]&255|(we[31]&255)<<8};ie.prototype.blocks=function(we,Be,Me){for(var re=this.fin?0:2048,ye,Ae,$e,Te,Oe,Fe,Ue,ze,He,qe,Xe,Ze,at,Je,Qe,gt,vt,_t,bt,St=this.h[0],$t=this.h[1],wt=this.h[2],Ge=this.h[3],Ye=this.h[4],ct=this.h[5],ot=this.h[6],mt=this.h[7],Et=this.h[8],kt=this.h[9],Rt=this.r[0],Pt=this.r[1],Mt=this.r[2],Ve=this.r[3],Nt=this.r[4],Ft=this.r[5],Ut=this.r[6],Ot=this.r[7],Dt=this.r[8],Lt=this.r[9];Me>=16;)ye=we[Be+0]&255|(we[Be+1]&255)<<8,St+=ye&8191,Ae=we[Be+2]&255|(we[Be+3]&255)<<8,$t+=(ye>>>13|Ae<<3)&8191,$e=we[Be+4]&255|(we[Be+5]&255)<<8,wt+=(Ae>>>10|$e<<6)&8191,Te=we[Be+6]&255|(we[Be+7]&255)<<8,Ge+=($e>>>7|Te<<9)&8191,Oe=we[Be+8]&255|(we[Be+9]&255)<<8,Ye+=(Te>>>4|Oe<<12)&8191,ct+=Oe>>>1&8191,Fe=we[Be+10]&255|(we[Be+11]&255)<<8,ot+=(Oe>>>14|Fe<<2)&8191,Ue=we[Be+12]&255|(we[Be+13]&255)<<8,mt+=(Fe>>>11|Ue<<5)&8191,ze=we[Be+14]&255|(we[Be+15]&255)<<8,Et+=(Ue>>>8|ze<<8)&8191,kt+=ze>>>5|re,He=0,qe=He,qe+=St*Rt,qe+=$t*(5*Lt),qe+=wt*(5*Dt),qe+=Ge*(5*Ot),qe+=Ye*(5*Ut),He=qe>>>13,qe&=8191,qe+=ct*(5*Ft),qe+=ot*(5*Nt),qe+=mt*(5*Ve),qe+=Et*(5*Mt),qe+=kt*(5*Pt),He+=qe>>>13,qe&=8191,Xe=He,Xe+=St*Pt,Xe+=$t*Rt,Xe+=wt*(5*Lt),Xe+=Ge*(5*Dt),Xe+=Ye*(5*Ot),He=Xe>>>13,Xe&=8191,Xe+=ct*(5*Ut),Xe+=ot*(5*Ft),Xe+=mt*(5*Nt),Xe+=Et*(5*Ve),Xe+=kt*(5*Mt),He+=Xe>>>13,Xe&=8191,Ze=He,Ze+=St*Mt,Ze+=$t*Pt,Ze+=wt*Rt,Ze+=Ge*(5*Lt),Ze+=Ye*(5*Dt),He=Ze>>>13,Ze&=8191,Ze+=ct*(5*Ot),Ze+=ot*(5*Ut),Ze+=mt*(5*Ft),Ze+=Et*(5*Nt),Ze+=kt*(5*Ve),He+=Ze>>>13,Ze&=8191,at=He,at+=St*Ve,at+=$t*Mt,at+=wt*Pt,at+=Ge*Rt,at+=Ye*(5*Lt),He=at>>>13,at&=8191,at+=ct*(5*Dt),at+=ot*(5*Ot),at+=mt*(5*Ut),at+=Et*(5*Ft),at+=kt*(5*Nt),He+=at>>>13,at&=8191,Je=He,Je+=St*Nt,Je+=$t*Ve,Je+=wt*Mt,Je+=Ge*Pt,Je+=Ye*Rt,He=Je>>>13,Je&=8191,Je+=ct*(5*Lt),Je+=ot*(5*Dt),Je+=mt*(5*Ot),Je+=Et*(5*Ut),Je+=kt*(5*Ft),He+=Je>>>13,Je&=8191,Qe=He,Qe+=St*Ft,Qe+=$t*Nt,Qe+=wt*Ve,Qe+=Ge*Mt,Qe+=Ye*Pt,He=Qe>>>13,Qe&=8191,Qe+=ct*Rt,Qe+=ot*(5*Lt),Qe+=mt*(5*Dt),Qe+=Et*(5*Ot),Qe+=kt*(5*Ut),He+=Qe>>>13,Qe&=8191,gt=He,gt+=St*Ut,gt+=$t*Ft,gt+=wt*Nt,gt+=Ge*Ve,gt+=Ye*Mt,He=gt>>>13,gt&=8191,gt+=ct*Pt,gt+=ot*Rt,gt+=mt*(5*Lt),gt+=Et*(5*Dt),gt+=kt*(5*Ot),He+=gt>>>13,gt&=8191,vt=He,vt+=St*Ot,vt+=$t*Ut,vt+=wt*Ft,vt+=Ge*Nt,vt+=Ye*Ve,He=vt>>>13,vt&=8191,vt+=ct*Mt,vt+=ot*Pt,vt+=mt*Rt,vt+=Et*(5*Lt),vt+=kt*(5*Dt),He+=vt>>>13,vt&=8191,_t=He,_t+=St*Dt,_t+=$t*Ot,_t+=wt*Ut,_t+=Ge*Ft,_t+=Ye*Nt,He=_t>>>13,_t&=8191,_t+=ct*Ve,_t+=ot*Mt,_t+=mt*Pt,_t+=Et*Rt,_t+=kt*(5*Lt),He+=_t>>>13,_t&=8191,bt=He,bt+=St*Lt,bt+=$t*Dt,bt+=wt*Ot,bt+=Ge*Ut,bt+=Ye*Ft,He=bt>>>13,bt&=8191,bt+=ct*Nt,bt+=ot*Ve,bt+=mt*Mt,bt+=Et*Pt,bt+=kt*Rt,He+=bt>>>13,bt&=8191,He=(He<<2)+He|0,He=He+qe|0,qe=He&8191,He=He>>>13,Xe+=He,St=qe,$t=Xe,wt=Ze,Ge=at,Ye=Je,ct=Qe,ot=gt,mt=vt,Et=_t,kt=bt,Be+=16,Me-=16;this.h[0]=St,this.h[1]=$t,this.h[2]=wt,this.h[3]=Ge,this.h[4]=Ye,this.h[5]=ct,this.h[6]=ot,this.h[7]=mt,this.h[8]=Et,this.h[9]=kt},ie.prototype.finish=function(we,Be){var Me=new Uint16Array(10),re,ye,Ae,$e;if(this.leftover){for($e=this.leftover,this.buffer[$e++]=1;$e<16;$e++)this.buffer[$e]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(re=this.h[1]>>>13,this.h[1]&=8191,$e=2;$e<10;$e++)this.h[$e]+=re,re=this.h[$e]>>>13,this.h[$e]&=8191;for(this.h[0]+=re*5,re=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=re,re=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=re,Me[0]=this.h[0]+5,re=Me[0]>>>13,Me[0]&=8191,$e=1;$e<10;$e++)Me[$e]=this.h[$e]+re,re=Me[$e]>>>13,Me[$e]&=8191;for(Me[9]-=1<<13,ye=(re^1)-1,$e=0;$e<10;$e++)Me[$e]&=ye;for(ye=~ye,$e=0;$e<10;$e++)this.h[$e]=this.h[$e]&ye|Me[$e];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,Ae=this.h[0]+this.pad[0],this.h[0]=Ae&65535,$e=1;$e<8;$e++)Ae=(this.h[$e]+this.pad[$e]|0)+(Ae>>>16)|0,this.h[$e]=Ae&65535;we[Be+0]=this.h[0]>>>0&255,we[Be+1]=this.h[0]>>>8&255,we[Be+2]=this.h[1]>>>0&255,we[Be+3]=this.h[1]>>>8&255,we[Be+4]=this.h[2]>>>0&255,we[Be+5]=this.h[2]>>>8&255,we[Be+6]=this.h[3]>>>0&255,we[Be+7]=this.h[3]>>>8&255,we[Be+8]=this.h[4]>>>0&255,we[Be+9]=this.h[4]>>>8&255,we[Be+10]=this.h[5]>>>0&255,we[Be+11]=this.h[5]>>>8&255,we[Be+12]=this.h[6]>>>0&255,we[Be+13]=this.h[6]>>>8&255,we[Be+14]=this.h[7]>>>0&255,we[Be+15]=this.h[7]>>>8&255},ie.prototype.update=function(we,Be,Me){var re,ye;if(this.leftover){for(ye=16-this.leftover,ye>Me&&(ye=Me),re=0;re<ye;re++)this.buffer[this.leftover+re]=we[Be+re];if(Me-=ye,Be+=ye,this.leftover+=ye,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(Me>=16&&(ye=Me-Me%16,this.blocks(we,Be,ye),Be+=ye,Me-=ye),Me){for(re=0;re<Me;re++)this.buffer[this.leftover+re]=we[Be+re];this.leftover+=Me}};function F(we,Be,Me,re,ye,Ae){var $e=new ie(Ae);return $e.update(Me,re,ye),$e.finish(we,Be),0}function k(we,Be,Me,re,ye,Ae){var $e=new Uint8Array(16);return F($e,0,Me,re,ye,Ae),B(we,Be,$e,0)}function y(we,Be,Me,re,ye){var Ae;if(Me<32)return-1;for(se(we,0,Be,0,Me,re,ye),F(we,16,we,32,Me-32,we),Ae=0;Ae<16;Ae++)we[Ae]=0;return 0}function A(we,Be,Me,re,ye){var Ae,$e=new Uint8Array(32);if(Me<32||(Z($e,0,32,re,ye),k(Be,16,Be,32,Me-32,$e)!==0))return-1;for(se(we,0,Be,0,Me,re,ye),Ae=0;Ae<32;Ae++)we[Ae]=0;return 0}function I(we,Be){var Me;for(Me=0;Me<16;Me++)we[Me]=Be[Me]|0}function P(we){var Be,Me,re=1;for(Be=0;Be<16;Be++)Me=we[Be]+re+65535,re=Math.floor(Me/65536),we[Be]=Me-re*65536;we[0]+=re-1+37*(re-1)}function H(we,Be,Me){for(var re,ye=~(Me-1),Ae=0;Ae<16;Ae++)re=ye&(we[Ae]^Be[Ae]),we[Ae]^=re,Be[Ae]^=re}function q(we,Be){var Me,re,ye,Ae=n(),$e=n();for(Me=0;Me<16;Me++)$e[Me]=Be[Me];for(P($e),P($e),P($e),re=0;re<2;re++){for(Ae[0]=$e[0]-65517,Me=1;Me<15;Me++)Ae[Me]=$e[Me]-65535-(Ae[Me-1]>>16&1),Ae[Me-1]&=65535;Ae[15]=$e[15]-32767-(Ae[14]>>16&1),ye=Ae[15]>>16&1,Ae[14]&=65535,H($e,Ae,1-ye)}for(Me=0;Me<16;Me++)we[2*Me]=$e[Me]&255,we[2*Me+1]=$e[Me]>>8}function j(we,Be){var Me=new Uint8Array(32),re=new Uint8Array(32);return q(Me,we),q(re,Be),C(Me,0,re,0)}function M(we){var Be=new Uint8Array(32);return q(Be,we),Be[0]&1}function E(we,Be){var Me;for(Me=0;Me<16;Me++)we[Me]=Be[2*Me]+(Be[2*Me+1]<<8);we[15]&=32767}function L(we,Be,Me){for(var re=0;re<16;re++)we[re]=Be[re]+Me[re]}function le(we,Be,Me){for(var re=0;re<16;re++)we[re]=Be[re]-Me[re]}function Q(we,Be,Me){var re,ye,Ae=0,$e=0,Te=0,Oe=0,Fe=0,Ue=0,ze=0,He=0,qe=0,Xe=0,Ze=0,at=0,Je=0,Qe=0,gt=0,vt=0,_t=0,bt=0,St=0,$t=0,wt=0,Ge=0,Ye=0,ct=0,ot=0,mt=0,Et=0,kt=0,Rt=0,Pt=0,Mt=0,Ve=Me[0],Nt=Me[1],Ft=Me[2],Ut=Me[3],Ot=Me[4],Dt=Me[5],Lt=Me[6],zt=Me[7],jt=Me[8],Ht=Me[9],Vt=Me[10],qt=Me[11],Kt=Me[12],Wt=Me[13],Gt=Me[14],Xt=Me[15];re=Be[0],Ae+=re*Ve,$e+=re*Nt,Te+=re*Ft,Oe+=re*Ut,Fe+=re*Ot,Ue+=re*Dt,ze+=re*Lt,He+=re*zt,qe+=re*jt,Xe+=re*Ht,Ze+=re*Vt,at+=re*qt,Je+=re*Kt,Qe+=re*Wt,gt+=re*Gt,vt+=re*Xt,re=Be[1],$e+=re*Ve,Te+=re*Nt,Oe+=re*Ft,Fe+=re*Ut,Ue+=re*Ot,ze+=re*Dt,He+=re*Lt,qe+=re*zt,Xe+=re*jt,Ze+=re*Ht,at+=re*Vt,Je+=re*qt,Qe+=re*Kt,gt+=re*Wt,vt+=re*Gt,_t+=re*Xt,re=Be[2],Te+=re*Ve,Oe+=re*Nt,Fe+=re*Ft,Ue+=re*Ut,ze+=re*Ot,He+=re*Dt,qe+=re*Lt,Xe+=re*zt,Ze+=re*jt,at+=re*Ht,Je+=re*Vt,Qe+=re*qt,gt+=re*Kt,vt+=re*Wt,_t+=re*Gt,bt+=re*Xt,re=Be[3],Oe+=re*Ve,Fe+=re*Nt,Ue+=re*Ft,ze+=re*Ut,He+=re*Ot,qe+=re*Dt,Xe+=re*Lt,Ze+=re*zt,at+=re*jt,Je+=re*Ht,Qe+=re*Vt,gt+=re*qt,vt+=re*Kt,_t+=re*Wt,bt+=re*Gt,St+=re*Xt,re=Be[4],Fe+=re*Ve,Ue+=re*Nt,ze+=re*Ft,He+=re*Ut,qe+=re*Ot,Xe+=re*Dt,Ze+=re*Lt,at+=re*zt,Je+=re*jt,Qe+=re*Ht,gt+=re*Vt,vt+=re*qt,_t+=re*Kt,bt+=re*Wt,St+=re*Gt,$t+=re*Xt,re=Be[5],Ue+=re*Ve,ze+=re*Nt,He+=re*Ft,qe+=re*Ut,Xe+=re*Ot,Ze+=re*Dt,at+=re*Lt,Je+=re*zt,Qe+=re*jt,gt+=re*Ht,vt+=re*Vt,_t+=re*qt,bt+=re*Kt,St+=re*Wt,$t+=re*Gt,wt+=re*Xt,re=Be[6],ze+=re*Ve,He+=re*Nt,qe+=re*Ft,Xe+=re*Ut,Ze+=re*Ot,at+=re*Dt,Je+=re*Lt,Qe+=re*zt,gt+=re*jt,vt+=re*Ht,_t+=re*Vt,bt+=re*qt,St+=re*Kt,$t+=re*Wt,wt+=re*Gt,Ge+=re*Xt,re=Be[7],He+=re*Ve,qe+=re*Nt,Xe+=re*Ft,Ze+=re*Ut,at+=re*Ot,Je+=re*Dt,Qe+=re*Lt,gt+=re*zt,vt+=re*jt,_t+=re*Ht,bt+=re*Vt,St+=re*qt,$t+=re*Kt,wt+=re*Wt,Ge+=re*Gt,Ye+=re*Xt,re=Be[8],qe+=re*Ve,Xe+=re*Nt,Ze+=re*Ft,at+=re*Ut,Je+=re*Ot,Qe+=re*Dt,gt+=re*Lt,vt+=re*zt,_t+=re*jt,bt+=re*Ht,St+=re*Vt,$t+=re*qt,wt+=re*Kt,Ge+=re*Wt,Ye+=re*Gt,ct+=re*Xt,re=Be[9],Xe+=re*Ve,Ze+=re*Nt,at+=re*Ft,Je+=re*Ut,Qe+=re*Ot,gt+=re*Dt,vt+=re*Lt,_t+=re*zt,bt+=re*jt,St+=re*Ht,$t+=re*Vt,wt+=re*qt,Ge+=re*Kt,Ye+=re*Wt,ct+=re*Gt,ot+=re*Xt,re=Be[10],Ze+=re*Ve,at+=re*Nt,Je+=re*Ft,Qe+=re*Ut,gt+=re*Ot,vt+=re*Dt,_t+=re*Lt,bt+=re*zt,St+=re*jt,$t+=re*Ht,wt+=re*Vt,Ge+=re*qt,Ye+=re*Kt,ct+=re*Wt,ot+=re*Gt,mt+=re*Xt,re=Be[11],at+=re*Ve,Je+=re*Nt,Qe+=re*Ft,gt+=re*Ut,vt+=re*Ot,_t+=re*Dt,bt+=re*Lt,St+=re*zt,$t+=re*jt,wt+=re*Ht,Ge+=re*Vt,Ye+=re*qt,ct+=re*Kt,ot+=re*Wt,mt+=re*Gt,Et+=re*Xt,re=Be[12],Je+=re*Ve,Qe+=re*Nt,gt+=re*Ft,vt+=re*Ut,_t+=re*Ot,bt+=re*Dt,St+=re*Lt,$t+=re*zt,wt+=re*jt,Ge+=re*Ht,Ye+=re*Vt,ct+=re*qt,ot+=re*Kt,mt+=re*Wt,Et+=re*Gt,kt+=re*Xt,re=Be[13],Qe+=re*Ve,gt+=re*Nt,vt+=re*Ft,_t+=re*Ut,bt+=re*Ot,St+=re*Dt,$t+=re*Lt,wt+=re*zt,Ge+=re*jt,Ye+=re*Ht,ct+=re*Vt,ot+=re*qt,mt+=re*Kt,Et+=re*Wt,kt+=re*Gt,Rt+=re*Xt,re=Be[14],gt+=re*Ve,vt+=re*Nt,_t+=re*Ft,bt+=re*Ut,St+=re*Ot,$t+=re*Dt,wt+=re*Lt,Ge+=re*zt,Ye+=re*jt,ct+=re*Ht,ot+=re*Vt,mt+=re*qt,Et+=re*Kt,kt+=re*Wt,Rt+=re*Gt,Pt+=re*Xt,re=Be[15],vt+=re*Ve,_t+=re*Nt,bt+=re*Ft,St+=re*Ut,$t+=re*Ot,wt+=re*Dt,Ge+=re*Lt,Ye+=re*zt,ct+=re*jt,ot+=re*Ht,mt+=re*Vt,Et+=re*qt,kt+=re*Kt,Rt+=re*Wt,Pt+=re*Gt,Mt+=re*Xt,Ae+=38*_t,$e+=38*bt,Te+=38*St,Oe+=38*$t,Fe+=38*wt,Ue+=38*Ge,ze+=38*Ye,He+=38*ct,qe+=38*ot,Xe+=38*mt,Ze+=38*Et,at+=38*kt,Je+=38*Rt,Qe+=38*Pt,gt+=38*Mt,ye=1,re=Ae+ye+65535,ye=Math.floor(re/65536),Ae=re-ye*65536,re=$e+ye+65535,ye=Math.floor(re/65536),$e=re-ye*65536,re=Te+ye+65535,ye=Math.floor(re/65536),Te=re-ye*65536,re=Oe+ye+65535,ye=Math.floor(re/65536),Oe=re-ye*65536,re=Fe+ye+65535,ye=Math.floor(re/65536),Fe=re-ye*65536,re=Ue+ye+65535,ye=Math.floor(re/65536),Ue=re-ye*65536,re=ze+ye+65535,ye=Math.floor(re/65536),ze=re-ye*65536,re=He+ye+65535,ye=Math.floor(re/65536),He=re-ye*65536,re=qe+ye+65535,ye=Math.floor(re/65536),qe=re-ye*65536,re=Xe+ye+65535,ye=Math.floor(re/65536),Xe=re-ye*65536,re=Ze+ye+65535,ye=Math.floor(re/65536),Ze=re-ye*65536,re=at+ye+65535,ye=Math.floor(re/65536),at=re-ye*65536,re=Je+ye+65535,ye=Math.floor(re/65536),Je=re-ye*65536,re=Qe+ye+65535,ye=Math.floor(re/65536),Qe=re-ye*65536,re=gt+ye+65535,ye=Math.floor(re/65536),gt=re-ye*65536,re=vt+ye+65535,ye=Math.floor(re/65536),vt=re-ye*65536,Ae+=ye-1+37*(ye-1),ye=1,re=Ae+ye+65535,ye=Math.floor(re/65536),Ae=re-ye*65536,re=$e+ye+65535,ye=Math.floor(re/65536),$e=re-ye*65536,re=Te+ye+65535,ye=Math.floor(re/65536),Te=re-ye*65536,re=Oe+ye+65535,ye=Math.floor(re/65536),Oe=re-ye*65536,re=Fe+ye+65535,ye=Math.floor(re/65536),Fe=re-ye*65536,re=Ue+ye+65535,ye=Math.floor(re/65536),Ue=re-ye*65536,re=ze+ye+65535,ye=Math.floor(re/65536),ze=re-ye*65536,re=He+ye+65535,ye=Math.floor(re/65536),He=re-ye*65536,re=qe+ye+65535,ye=Math.floor(re/65536),qe=re-ye*65536,re=Xe+ye+65535,ye=Math.floor(re/65536),Xe=re-ye*65536,re=Ze+ye+65535,ye=Math.floor(re/65536),Ze=re-ye*65536,re=at+ye+65535,ye=Math.floor(re/65536),at=re-ye*65536,re=Je+ye+65535,ye=Math.floor(re/65536),Je=re-ye*65536,re=Qe+ye+65535,ye=Math.floor(re/65536),Qe=re-ye*65536,re=gt+ye+65535,ye=Math.floor(re/65536),gt=re-ye*65536,re=vt+ye+65535,ye=Math.floor(re/65536),vt=re-ye*65536,Ae+=ye-1+37*(ye-1),we[0]=Ae,we[1]=$e,we[2]=Te,we[3]=Oe,we[4]=Fe,we[5]=Ue,we[6]=ze,we[7]=He,we[8]=qe,we[9]=Xe,we[10]=Ze,we[11]=at,we[12]=Je,we[13]=Qe,we[14]=gt,we[15]=vt}function ce(we,Be){Q(we,Be,Be)}function fe(we,Be){var Me=n(),re;for(re=0;re<16;re++)Me[re]=Be[re];for(re=253;re>=0;re--)ce(Me,Me),re!==2&&re!==4&&Q(Me,Me,Be);for(re=0;re<16;re++)we[re]=Me[re]}function oe(we,Be){var Me=n(),re;for(re=0;re<16;re++)Me[re]=Be[re];for(re=250;re>=0;re--)ce(Me,Me),re!==1&&Q(Me,Me,Be);for(re=0;re<16;re++)we[re]=Me[re]}function de(we,Be,Me){var re=new Uint8Array(32),ye=new Float64Array(80),Ae,$e,Te=n(),Oe=n(),Fe=n(),Ue=n(),ze=n(),He=n();for($e=0;$e<31;$e++)re[$e]=Be[$e];for(re[31]=Be[31]&127|64,re[0]&=248,E(ye,Me),$e=0;$e<16;$e++)Oe[$e]=ye[$e],Ue[$e]=Te[$e]=Fe[$e]=0;for(Te[0]=Ue[0]=1,$e=254;$e>=0;--$e)Ae=re[$e>>>3]>>>($e&7)&1,H(Te,Oe,Ae),H(Fe,Ue,Ae),L(ze,Te,Fe),le(Te,Te,Fe),L(Fe,Oe,Ue),le(Oe,Oe,Ue),ce(Ue,ze),ce(He,Te),Q(Te,Fe,Te),Q(Fe,Oe,ze),L(ze,Te,Fe),le(Te,Te,Fe),ce(Oe,Te),le(Fe,Ue,He),Q(Te,Fe,d),L(Te,Te,Ue),Q(Fe,Fe,Te),Q(Te,Ue,He),Q(Ue,Oe,ye),ce(Oe,ze),H(Te,Oe,Ae),H(Fe,Ue,Ae);for($e=0;$e<16;$e++)ye[$e+16]=Te[$e],ye[$e+32]=Fe[$e],ye[$e+48]=Oe[$e],ye[$e+64]=Ue[$e];var qe=ye.subarray(32),Xe=ye.subarray(16);return fe(qe,qe),Q(Xe,Xe,qe),q(we,Xe),0}function ae(we,Be){return de(we,Be,c)}function he(we,Be){return a(Be,32),ae(we,Be)}function te(we,Be,Me){var re=new Uint8Array(32);return de(re,Me,Be),Y(we,o,re,X)}var pe=y,ee=A;function ge(we,Be,Me,re,ye,Ae){var $e=new Uint8Array(32);return te($e,ye,Ae),pe(we,Be,Me,re,$e)}function Ee(we,Be,Me,re,ye,Ae){var $e=new Uint8Array(32);return te($e,ye,Ae),ee(we,Be,Me,re,$e)}var be=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function xe(we,Be,Me,re){for(var ye=new Int32Array(16),Ae=new Int32Array(16),$e,Te,Oe,Fe,Ue,ze,He,qe,Xe,Ze,at,Je,Qe,gt,vt,_t,bt,St,$t,wt,Ge,Ye,ct,ot,mt,Et,kt=we[0],Rt=we[1],Pt=we[2],Mt=we[3],Ve=we[4],Nt=we[5],Ft=we[6],Ut=we[7],Ot=Be[0],Dt=Be[1],Lt=Be[2],zt=Be[3],jt=Be[4],Ht=Be[5],Vt=Be[6],qt=Be[7],Kt=0;re>=128;){for($t=0;$t<16;$t++)wt=8*$t+Kt,ye[$t]=Me[wt+0]<<24|Me[wt+1]<<16|Me[wt+2]<<8|Me[wt+3],Ae[$t]=Me[wt+4]<<24|Me[wt+5]<<16|Me[wt+6]<<8|Me[wt+7];for($t=0;$t<80;$t++)if($e=kt,Te=Rt,Oe=Pt,Fe=Mt,Ue=Ve,ze=Nt,He=Ft,qe=Ut,Xe=Ot,Ze=Dt,at=Lt,Je=zt,Qe=jt,gt=Ht,vt=Vt,_t=qt,Ge=Ut,Ye=qt,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=(Ve>>>14|jt<<32-14)^(Ve>>>18|jt<<32-18)^(jt>>>41-32|Ve<<32-(41-32)),Ye=(jt>>>14|Ve<<32-14)^(jt>>>18|Ve<<32-18)^(Ve>>>41-32|jt<<32-(41-32)),ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,Ge=Ve&Nt^~Ve&Ft,Ye=jt&Ht^~jt&Vt,ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,Ge=be[$t*2],Ye=be[$t*2+1],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,Ge=ye[$t%16],Ye=Ae[$t%16],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,bt=mt&65535|Et<<16,St=ct&65535|ot<<16,Ge=bt,Ye=St,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=(kt>>>28|Ot<<32-28)^(Ot>>>34-32|kt<<32-(34-32))^(Ot>>>39-32|kt<<32-(39-32)),Ye=(Ot>>>28|kt<<32-28)^(kt>>>34-32|Ot<<32-(34-32))^(kt>>>39-32|Ot<<32-(39-32)),ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,Ge=kt&Rt^kt&Pt^Rt&Pt,Ye=Ot&Dt^Ot&Lt^Dt&Lt,ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,qe=mt&65535|Et<<16,_t=ct&65535|ot<<16,Ge=Fe,Ye=Je,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=bt,Ye=St,ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,Fe=mt&65535|Et<<16,Je=ct&65535|ot<<16,Rt=$e,Pt=Te,Mt=Oe,Ve=Fe,Nt=Ue,Ft=ze,Ut=He,kt=qe,Dt=Xe,Lt=Ze,zt=at,jt=Je,Ht=Qe,Vt=gt,qt=vt,Ot=_t,$t%16===15)for(wt=0;wt<16;wt++)Ge=ye[wt],Ye=Ae[wt],ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=ye[(wt+9)%16],Ye=Ae[(wt+9)%16],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,bt=ye[(wt+1)%16],St=Ae[(wt+1)%16],Ge=(bt>>>1|St<<32-1)^(bt>>>8|St<<32-8)^bt>>>7,Ye=(St>>>1|bt<<32-1)^(St>>>8|bt<<32-8)^(St>>>7|bt<<32-7),ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,bt=ye[(wt+14)%16],St=Ae[(wt+14)%16],Ge=(bt>>>19|St<<32-19)^(St>>>61-32|bt<<32-(61-32))^bt>>>6,Ye=(St>>>19|bt<<32-19)^(bt>>>61-32|St<<32-(61-32))^(St>>>6|bt<<32-6),ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,ye[wt]=mt&65535|Et<<16,Ae[wt]=ct&65535|ot<<16;Ge=kt,Ye=Ot,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=we[0],Ye=Be[0],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,we[0]=kt=mt&65535|Et<<16,Be[0]=Ot=ct&65535|ot<<16,Ge=Rt,Ye=Dt,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=we[1],Ye=Be[1],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,we[1]=Rt=mt&65535|Et<<16,Be[1]=Dt=ct&65535|ot<<16,Ge=Pt,Ye=Lt,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=we[2],Ye=Be[2],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,we[2]=Pt=mt&65535|Et<<16,Be[2]=Lt=ct&65535|ot<<16,Ge=Mt,Ye=zt,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=we[3],Ye=Be[3],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,we[3]=Mt=mt&65535|Et<<16,Be[3]=zt=ct&65535|ot<<16,Ge=Ve,Ye=jt,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=we[4],Ye=Be[4],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,we[4]=Ve=mt&65535|Et<<16,Be[4]=jt=ct&65535|ot<<16,Ge=Nt,Ye=Ht,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=we[5],Ye=Be[5],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,we[5]=Nt=mt&65535|Et<<16,Be[5]=Ht=ct&65535|ot<<16,Ge=Ft,Ye=Vt,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=we[6],Ye=Be[6],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,we[6]=Ft=mt&65535|Et<<16,Be[6]=Vt=ct&65535|ot<<16,Ge=Ut,Ye=qt,ct=Ye&65535,ot=Ye>>>16,mt=Ge&65535,Et=Ge>>>16,Ge=we[7],Ye=Be[7],ct+=Ye&65535,ot+=Ye>>>16,mt+=Ge&65535,Et+=Ge>>>16,ot+=ct>>>16,mt+=ot>>>16,Et+=mt>>>16,we[7]=Ut=mt&65535|Et<<16,Be[7]=qt=ct&65535|ot<<16,Kt+=128,re-=128}return re}function ve(we,Be,Me){var re=new Int32Array(8),ye=new Int32Array(8),Ae=new Uint8Array(256),$e,Te=Me;for(re[0]=1779033703,re[1]=3144134277,re[2]=1013904242,re[3]=2773480762,re[4]=1359893119,re[5]=2600822924,re[6]=528734635,re[7]=1541459225,ye[0]=4089235720,ye[1]=2227873595,ye[2]=4271175723,ye[3]=1595750129,ye[4]=2917565137,ye[5]=725511199,ye[6]=4215389547,ye[7]=327033209,xe(re,ye,Be,Me),Me%=128,$e=0;$e<Me;$e++)Ae[$e]=Be[Te-Me+$e];for(Ae[Me]=128,Me=256-128*(Me<112?1:0),Ae[Me-9]=0,S(Ae,Me-8,Te/536870912|0,Te<<3),xe(re,ye,Ae,Me),$e=0;$e<8;$e++)S(we,8*$e,re[$e],ye[$e]);return 0}function Se(we,Be){var Me=n(),re=n(),ye=n(),Ae=n(),$e=n(),Te=n(),Oe=n(),Fe=n(),Ue=n();le(Me,we[1],we[0]),le(Ue,Be[1],Be[0]),Q(Me,Me,Ue),L(re,we[0],we[1]),L(Ue,Be[0],Be[1]),Q(re,re,Ue),Q(ye,we[3],Be[3]),Q(ye,ye,b),Q(Ae,we[2],Be[2]),L(Ae,Ae,Ae),le($e,re,Me),le(Te,Ae,ye),L(Oe,Ae,ye),L(Fe,re,Me),Q(we[0],$e,Te),Q(we[1],Fe,Oe),Q(we[2],Oe,Te),Q(we[3],$e,Fe)}function ke(we,Be,Me){var re;for(re=0;re<4;re++)H(we[re],Be[re],Me)}function Ce(we,Be){var Me=n(),re=n(),ye=n();fe(ye,Be[2]),Q(Me,Be[0],ye),Q(re,Be[1],ye),q(we,re),we[31]^=M(Me)<<7}function Re(we,Be,Me){var re,ye;for(I(we[0],l),I(we[1],u),I(we[2],u),I(we[3],l),ye=255;ye>=0;--ye)re=Me[ye/8|0]>>(ye&7)&1,ke(we,Be,re),Se(Be,we),Se(we,we),ke(we,Be,re)}function Le(we,Be){var Me=[n(),n(),n(),n()];I(Me[0],x),I(Me[1],_),I(Me[2],u),Q(Me[3],x,_),Re(we,Me,Be)}function je(we,Be,Me){var re=new Uint8Array(64),ye=[n(),n(),n(),n()],Ae;for(Me||a(Be,32),ve(re,Be,32),re[0]&=248,re[31]&=127,re[31]|=64,Le(ye,re),Ce(we,ye),Ae=0;Ae<32;Ae++)Be[Ae+32]=we[Ae];return 0}var Pe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function me(we,Be){var Me,re,ye,Ae;for(re=63;re>=32;--re){for(Me=0,ye=re-32,Ae=re-12;ye<Ae;++ye)Be[ye]+=Me-16*Be[re]*Pe[ye-(re-32)],Me=Math.floor((Be[ye]+128)/256),Be[ye]-=Me*256;Be[ye]+=Me,Be[re]=0}for(Me=0,ye=0;ye<32;ye++)Be[ye]+=Me-(Be[31]>>4)*Pe[ye],Me=Be[ye]>>8,Be[ye]&=255;for(ye=0;ye<32;ye++)Be[ye]-=Me*Pe[ye];for(re=0;re<32;re++)Be[re+1]+=Be[re]>>8,we[re]=Be[re]&255}function ne(we){var Be=new Float64Array(64),Me;for(Me=0;Me<64;Me++)Be[Me]=we[Me];for(Me=0;Me<64;Me++)we[Me]=0;me(we,Be)}function ue(we,Be,Me,re){var ye=new Uint8Array(64),Ae=new Uint8Array(64),$e=new Uint8Array(64),Te,Oe,Fe=new Float64Array(64),Ue=[n(),n(),n(),n()];ve(ye,re,32),ye[0]&=248,ye[31]&=127,ye[31]|=64;var ze=Me+64;for(Te=0;Te<Me;Te++)we[64+Te]=Be[Te];for(Te=0;Te<32;Te++)we[32+Te]=ye[32+Te];for(ve($e,we.subarray(32),Me+32),ne($e),Le(Ue,$e),Ce(we,Ue),Te=32;Te<64;Te++)we[Te]=re[Te];for(ve(Ae,we,Me+64),ne(Ae),Te=0;Te<64;Te++)Fe[Te]=0;for(Te=0;Te<32;Te++)Fe[Te]=$e[Te];for(Te=0;Te<32;Te++)for(Oe=0;Oe<32;Oe++)Fe[Te+Oe]+=Ae[Te]*ye[Oe];return me(we.subarray(32),Fe),ze}function _e(we,Be){var Me=n(),re=n(),ye=n(),Ae=n(),$e=n(),Te=n(),Oe=n();return I(we[2],u),E(we[1],Be),ce(ye,we[1]),Q(Ae,ye,m),le(ye,ye,we[2]),L(Ae,we[2],Ae),ce($e,Ae),ce(Te,$e),Q(Oe,Te,$e),Q(Me,Oe,ye),Q(Me,Me,Ae),oe(Me,Me),Q(Me,Me,ye),Q(Me,Me,Ae),Q(Me,Me,Ae),Q(we[0],Me,Ae),ce(re,we[0]),Q(re,re,Ae),j(re,ye)&&Q(we[0],we[0],w),ce(re,we[0]),Q(re,re,Ae),j(re,ye)?-1:(M(we[0])===Be[31]>>7&&le(we[0],l,we[0]),Q(we[3],we[0],we[1]),0)}function Ie(we,Be,Me,re){var ye,Ae=new Uint8Array(32),$e=new Uint8Array(64),Te=[n(),n(),n(),n()],Oe=[n(),n(),n(),n()];if(Me<64||_e(Oe,re))return-1;for(ye=0;ye<Me;ye++)we[ye]=Be[ye];for(ye=0;ye<32;ye++)we[ye+32]=re[ye];if(ve($e,we,Me),ne($e),Re(Te,Oe,$e),Le(Oe,Be.subarray(32)),Se(Te,Oe),Ce(Ae,Te),Me-=64,C(Be,0,Ae,0)){for(ye=0;ye<Me;ye++)we[ye]=0;return-1}for(ye=0;ye<Me;ye++)we[ye]=Be[ye+64];return Me}var Ne=32,De=24,et=32,We=16,Ke=32,xt=32,tt=32,st=32,It=32,yt=De,ut=et,At=We,ht=64,nt=32,Tt=64,dt=32,it=64;e.lowlevel={crypto_core_hsalsa20:Y,crypto_stream_xor:se,crypto_stream:Z,crypto_stream_salsa20_xor:O,crypto_stream_salsa20:J,crypto_onetimeauth:F,crypto_onetimeauth_verify:k,crypto_verify_16:B,crypto_verify_32:C,crypto_secretbox:y,crypto_secretbox_open:A,crypto_scalarmult:de,crypto_scalarmult_base:ae,crypto_box_beforenm:te,crypto_box_afternm:pe,crypto_box:ge,crypto_box_open:Ee,crypto_box_keypair:he,crypto_hash:ve,crypto_sign:ue,crypto_sign_keypair:je,crypto_sign_open:Ie,crypto_secretbox_KEYBYTES:Ne,crypto_secretbox_NONCEBYTES:De,crypto_secretbox_ZEROBYTES:et,crypto_secretbox_BOXZEROBYTES:We,crypto_scalarmult_BYTES:Ke,crypto_scalarmult_SCALARBYTES:xt,crypto_box_PUBLICKEYBYTES:tt,crypto_box_SECRETKEYBYTES:st,crypto_box_BEFORENMBYTES:It,crypto_box_NONCEBYTES:yt,crypto_box_ZEROBYTES:ut,crypto_box_BOXZEROBYTES:At,crypto_sign_BYTES:ht,crypto_sign_PUBLICKEYBYTES:nt,crypto_sign_SECRETKEYBYTES:Tt,crypto_sign_SEEDBYTES:dt,crypto_hash_BYTES:it,gf:n,D:m,L:Pe,pack25519:q,unpack25519:E,M:Q,A:L,S:ce,Z:le,pow2523:oe,add:Se,set25519:I,modL:me,scalarmult:Re,scalarbase:Le};function Bt(we,Be){if(we.length!==Ne)throw new Error("bad key size");if(Be.length!==De)throw new Error("bad nonce size")}function pt(we,Be){if(we.length!==tt)throw new Error("bad public key size");if(Be.length!==st)throw new Error("bad secret key size")}function rt(){for(var we=0;we<arguments.length;we++)if(!(arguments[we]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Ct(we){for(var Be=0;Be<we.length;Be++)we[Be]=0}e.randomBytes=function(we){var Be=new Uint8Array(we);return a(Be,we),Be},e.secretbox=function(we,Be,Me){rt(we,Be,Me),Bt(Me,Be);for(var re=new Uint8Array(et+we.length),ye=new Uint8Array(re.length),Ae=0;Ae<we.length;Ae++)re[Ae+et]=we[Ae];return y(ye,re,re.length,Be,Me),ye.subarray(We)},e.secretbox.open=function(we,Be,Me){rt(we,Be,Me),Bt(Me,Be);for(var re=new Uint8Array(We+we.length),ye=new Uint8Array(re.length),Ae=0;Ae<we.length;Ae++)re[Ae+We]=we[Ae];return re.length<32||A(ye,re,re.length,Be,Me)!==0?null:ye.subarray(et)},e.secretbox.keyLength=Ne,e.secretbox.nonceLength=De,e.secretbox.overheadLength=We,e.scalarMult=function(we,Be){if(rt(we,Be),we.length!==xt)throw new Error("bad n size");if(Be.length!==Ke)throw new Error("bad p size");var Me=new Uint8Array(Ke);return de(Me,we,Be),Me},e.scalarMult.base=function(we){if(rt(we),we.length!==xt)throw new Error("bad n size");var Be=new Uint8Array(Ke);return ae(Be,we),Be},e.scalarMult.scalarLength=xt,e.scalarMult.groupElementLength=Ke,e.box=function(we,Be,Me,re){var ye=e.box.before(Me,re);return e.secretbox(we,Be,ye)},e.box.before=function(we,Be){rt(we,Be),pt(we,Be);var Me=new Uint8Array(It);return te(Me,we,Be),Me},e.box.after=e.secretbox,e.box.open=function(we,Be,Me,re){var ye=e.box.before(Me,re);return e.secretbox.open(we,Be,ye)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var we=new Uint8Array(tt),Be=new Uint8Array(st);return he(we,Be),{publicKey:we,secretKey:Be}},e.box.keyPair.fromSecretKey=function(we){if(rt(we),we.length!==st)throw new Error("bad secret key size");var Be=new Uint8Array(tt);return ae(Be,we),{publicKey:Be,secretKey:new Uint8Array(we)}},e.box.publicKeyLength=tt,e.box.secretKeyLength=st,e.box.sharedKeyLength=It,e.box.nonceLength=yt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(we,Be){if(rt(we,Be),Be.length!==Tt)throw new Error("bad secret key size");var Me=new Uint8Array(ht+we.length);return ue(Me,we,we.length,Be),Me},e.sign.open=function(we,Be){if(rt(we,Be),Be.length!==nt)throw new Error("bad public key size");var Me=new Uint8Array(we.length),re=Ie(Me,we,we.length,Be);if(re<0)return null;for(var ye=new Uint8Array(re),Ae=0;Ae<ye.length;Ae++)ye[Ae]=Me[Ae];return ye},e.sign.detached=function(we,Be){for(var Me=e.sign(we,Be),re=new Uint8Array(ht),ye=0;ye<re.length;ye++)re[ye]=Me[ye];return re},e.sign.detached.verify=function(we,Be,Me){if(rt(we,Be,Me),Be.length!==ht)throw new Error("bad signature size");if(Me.length!==nt)throw new Error("bad public key size");var re=new Uint8Array(ht+we.length),ye=new Uint8Array(ht+we.length),Ae;for(Ae=0;Ae<ht;Ae++)re[Ae]=Be[Ae];for(Ae=0;Ae<we.length;Ae++)re[Ae+ht]=we[Ae];return Ie(ye,re,re.length,Me)>=0},e.sign.keyPair=function(){var we=new Uint8Array(nt),Be=new Uint8Array(Tt);return je(we,Be),{publicKey:we,secretKey:Be}},e.sign.keyPair.fromSecretKey=function(we){if(rt(we),we.length!==Tt)throw new Error("bad secret key size");for(var Be=new Uint8Array(nt),Me=0;Me<Be.length;Me++)Be[Me]=we[32+Me];return{publicKey:Be,secretKey:new Uint8Array(we)}},e.sign.keyPair.fromSeed=function(we){if(rt(we),we.length!==dt)throw new Error("bad seed size");for(var Be=new Uint8Array(nt),Me=new Uint8Array(Tt),re=0;re<32;re++)Me[re]=we[re];return je(Be,Me,!0),{publicKey:Be,secretKey:Me}},e.sign.publicKeyLength=nt,e.sign.secretKeyLength=Tt,e.sign.seedLength=dt,e.sign.signatureLength=ht,e.hash=function(we){rt(we);var Be=new Uint8Array(it);return ve(Be,we,we.length),Be},e.hash.hashLength=it,e.verify=function(we,Be){return rt(we,Be),we.length===0||Be.length===0||we.length!==Be.length?!1:T(we,0,Be,0,we.length)===0},e.setPRNG=function(we){a=we},function(){var we=typeof self<"u"?self.crypto||self.msCrypto:null;if(we&&we.getRandomValues){var Be=65536;e.setPRNG(function(Me,re){var ye,Ae=new Uint8Array(re);for(ye=0;ye<re;ye+=Be)we.getRandomValues(Ae.subarray(ye,ye+Math.min(re-ye,Be)));for(ye=0;ye<re;ye++)Me[ye]=Ae[ye];Ct(Ae)})}else typeof commonjsRequire$1<"u"&&(we=requireCryptoBrowserify(),we&&we.randomBytes&&e.setPRNG(function(Me,re){var ye,Ae=we.randomBytes(re);for(ye=0;ye<re;ye++)Me[ye]=Ae[ye];Ct(Ae)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(naclFast);const nacl=naclFastExports;var jsonify={},parse$1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse$1;hasRequiredParse=1;var t,e,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a;function o(w){throw{name:"SyntaxError",message:w,at:t,text:a}}function c(w){return w&&w!==e&&o("Expected '"+w+"' instead of '"+e+"'"),e=a.charAt(t),t+=1,e}function l(){var w,S="";for(e==="-"&&(S="-",c("-"));e>="0"&&e<="9";)S+=e,c();if(e===".")for(S+=".";c()&&e>="0"&&e<="9";)S+=e;if(e==="e"||e==="E")for(S+=e,c(),(e==="-"||e==="+")&&(S+=e,c());e>="0"&&e<="9";)S+=e,c();return w=Number(S),isFinite(w)||o("Bad number"),w}function u(){var w,S,T="",B;if(e==='"')for(;c();){if(e==='"')return c(),T;if(e==="\\")if(c(),e==="u"){for(B=0,S=0;S<4&&(w=parseInt(c(),16),!!isFinite(w));S+=1)B=B*16+w;T+=String.fromCharCode(B)}else if(typeof n[e]=="string")T+=n[e];else break;else T+=e}o("Bad string")}function d(){for(;e&&e<=" ";)c()}function m(){switch(e){case"t":return c("t"),c("r"),c("u"),c("e"),!0;case"f":return c("f"),c("a"),c("l"),c("s"),c("e"),!1;case"n":return c("n"),c("u"),c("l"),c("l"),null;default:o("Unexpected '"+e+"'")}}function b(){var w=[];if(e==="["){if(c("["),d(),e==="]")return c("]"),w;for(;e;){if(w.push(_()),d(),e==="]")return c("]"),w;c(","),d()}}o("Bad array")}function x(){var w,S={};if(e==="{"){if(c("{"),d(),e==="}")return c("}"),S;for(;e;){if(w=u(),d(),c(":"),Object.prototype.hasOwnProperty.call(S,w)&&o('Duplicate key "'+w+'"'),S[w]=_(),d(),e==="}")return c("}"),S;c(","),d()}}o("Bad object")}function _(){switch(d(),e){case"{":return x();case"[":return b();case'"':return u();case"-":return l();default:return e>="0"&&e<="9"?l():m()}}return parse$1=function(w,S){var T;return a=w,t=0,e=" ",T=_(),d(),e&&o("Syntax error"),typeof S=="function"?function B(C,D){var z,U,Y=C[D];if(Y&&typeof Y=="object")for(z in _)Object.prototype.hasOwnProperty.call(Y,z)&&(U=B(Y,z),typeof U>"u"?delete Y[z]:Y[z]=U);return S.call(C,D,Y)}({"":T},""):T},parse$1}var stringify,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify;hasRequiredStringify=1;var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;function c(u){return t.lastIndex=0,t.test(u)?'"'+u.replace(t,function(d){var m=a[d];return typeof m=="string"?m:"\\u"+("0000"+d.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+u+'"'}function l(u,d){var m,b,x,_,w=e,S,T=d[u];switch(T&&typeof T=="object"&&typeof T.toJSON=="function"&&(T=T.toJSON(u)),typeof o=="function"&&(T=o.call(d,u,T)),typeof T){case"string":return c(T);case"number":return isFinite(T)?String(T):"null";case"boolean":case"null":return String(T);case"object":if(!T)return"null";if(e+=n,S=[],Object.prototype.toString.apply(T)==="[object Array]"){for(_=T.length,m=0;m<_;m+=1)S[m]=l(m,T)||"null";return x=S.length===0?"[]":e?`[
`+e+S.join(`,
`+e)+`
`+w+"]":"["+S.join(",")+"]",e=w,x}if(o&&typeof o=="object")for(_=o.length,m=0;m<_;m+=1)b=o[m],typeof b=="string"&&(x=l(b,T),x&&S.push(c(b)+(e?": ":":")+x));else for(b in T)Object.prototype.hasOwnProperty.call(T,b)&&(x=l(b,T),x&&S.push(c(b)+(e?": ":":")+x));return x=S.length===0?"{}":e?`{
`+e+S.join(`,
`+e)+`
`+w+"}":"{"+S.join(",")+"}",e=w,x}}return stringify=function(u,d,m){var b;if(e="",n="",typeof m=="number")for(b=0;b<m;b+=1)n+=" ";else typeof m=="string"&&(n=m);if(o=d,d&&typeof d!="function"&&(typeof d!="object"||typeof d.length!="number"))throw new Error("JSON.stringify");return l("",{"":u})},stringify}var hasRequiredJsonify;function requireJsonify(){return hasRequiredJsonify||(hasRequiredJsonify=1,jsonify.parse=requireParse(),jsonify.stringify=requireStringify()),jsonify}var json=typeof JSON<"u"?JSON:requireJsonify(),isArray$3=Array.isArray||function(t){return{}.toString.call(t)==="[object Array]"},objectKeys$1=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var a in t)e.call(t,a)&&n.push(a);return n},jsonStableStringify=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var n=e.space||"";typeof n=="number"&&(n=Array(n+1).join(" "));var a=typeof e.cycles=="boolean"?e.cycles:!1,o=e.replacer||function(u,d){return d},c=e.cmp&&function(u){return function(d){return function(m,b){var x={key:m,value:d[m]},_={key:b,value:d[b]};return u(x,_)}}}(e.cmp),l=[];return function u(d,m,b,x){var _=n?`
`+new Array(x+1).join(n):"",w=n?": ":":";if(b&&b.toJSON&&typeof b.toJSON=="function"&&(b=b.toJSON()),b=o.call(d,m,b),b!==void 0){if(typeof b!="object"||b===null)return json.stringify(b);if(isArray$3(b)){for(var C=[],S=0;S<b.length;S++){var T=u(b,S,b[S],x+1)||json.stringify(null);C.push(_+n+T)}return"["+C.join(",")+_+"]"}if(l.indexOf(b)!==-1){if(a)return json.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else l.push(b);for(var B=objectKeys$1(b).sort(c&&c(b)),C=[],S=0;S<B.length;S++){var m=B[S],D=u(b,m,b[m],x+1);if(D){var z=json.stringify(m)+w+D;C.push(_+n+z)}}return l.splice(l.indexOf(b),1),"{"+C.join(",")+_+"}"}}({"":t},"",t,0)},nonceLength=nacl.box.nonceLength,newNonce=function t(){return nacl.randomBytes(nonceLength)},keypairToBase64=function t(e){return{publicKey:encode_1$3(e.publicKey),secretKey:encode_1$3(e.secretKey)}},keyToBytes=function t(e,n){n===void 0&&(n="base64");var a=n==="base64"?decode_1$1:encode_1$2;return typeof e=="string"?a(e):e},utf8=utf8$1,payloadToBytes=function t(e){return typeof e=="string"?utf8.encode(e):ArrayBuffer.isView(e)?e:utf8.encode(jsonStableStringify(e))};function keyPair(t){var e=t?nacl.box.keyPair.fromSecretKey(keyToBytes(t)):nacl.box.keyPair();return keypairToBase64(e)}function encrypt(t){var e=t.secret,n=t.recipientPublicKey,a=t.senderSecretKey,o=newNonce(),c=payloadToBytes(e),l;if(a===void 0){var u=keyPair();a=u.secretKey,l=u.publicKey}else l=void 0;var d=nacl.box(c,o,keyToBytes(n),keyToBytes(a)),m=browser$3.encode({nonce:o,message:d,senderPublicKey:l});return encode_1$3(m)}function decrypt(t){var e,n=t.cipher,a=t.senderPublicKey,o=t.recipientSecretKey,c=keyToBytes(n),l=browser$3.decode(c),u=l.nonce,d=l.message;a=(e=a)!=null?e:l.senderPublicKey;var m=nacl.box.open(d,u,keyToBytes(a),keyToBytes(o));if(!m)throw new Error("Could not decrypt message");return decode_1(m)}var asymmetric={keyPair,encrypt,decrypt},browserExports$1={},browser$2={get exports(){return browserExports$1},set exports(t){browserExports$1=t}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var t=1e3,e=t*60,n=e*60,a=n*24,o=a*7,c=a*365.25;ms=function(b,x){x=x||{};var _=typeof b;if(_==="string"&&b.length>0)return l(b);if(_==="number"&&isFinite(b))return x.long?d(b):u(b);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b))};function l(b){if(b=String(b),!(b.length>100)){var x=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(b);if(x){var _=parseFloat(x[1]),w=(x[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return _*c;case"weeks":case"week":case"w":return _*o;case"days":case"day":case"d":return _*a;case"hours":case"hour":case"hrs":case"hr":case"h":return _*n;case"minutes":case"minute":case"mins":case"min":case"m":return _*e;case"seconds":case"second":case"secs":case"sec":case"s":return _*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return _;default:return}}}}function u(b){var x=Math.abs(b);return x>=a?Math.round(b/a)+"d":x>=n?Math.round(b/n)+"h":x>=e?Math.round(b/e)+"m":x>=t?Math.round(b/t)+"s":b+"ms"}function d(b){var x=Math.abs(b);return x>=a?m(b,x,a,"day"):x>=n?m(b,x,n,"hour"):x>=e?m(b,x,e,"minute"):x>=t?m(b,x,t,"second"):b+" ms"}function m(b,x,_,w){var S=x>=_*1.5;return Math.round(b/_)+" "+w+(S?"s":"")}return ms}function setup(t){n.debug=n,n.default=n,n.coerce=d,n.disable=c,n.enable=o,n.enabled=l,n.humanize=requireMs(),n.destroy=m,Object.keys(t).forEach(b=>{n[b]=t[b]}),n.names=[],n.skips=[],n.formatters={};function e(b){let x=0;for(let _=0;_<b.length;_++)x=(x<<5)-x+b.charCodeAt(_),x|=0;return n.colors[Math.abs(x)%n.colors.length]}n.selectColor=e;function n(b){let x,_=null,w,S;function T(...B){if(!T.enabled)return;const C=T,D=Number(new Date),z=D-(x||D);C.diff=z,C.prev=x,C.curr=D,x=D,B[0]=n.coerce(B[0]),typeof B[0]!="string"&&B.unshift("%O");let U=0;B[0]=B[0].replace(/%([a-zA-Z%])/g,(X,O)=>{if(X==="%%")return"%";U++;const J=n.formatters[O];if(typeof J=="function"){const Z=B[U];X=J.call(C,Z),B.splice(U,1),U--}return X}),n.formatArgs.call(C,B),(C.log||n.log).apply(C,B)}return T.namespace=b,T.useColors=n.useColors(),T.color=n.selectColor(b),T.extend=a,T.destroy=n.destroy,Object.defineProperty(T,"enabled",{enumerable:!0,configurable:!1,get:()=>_!==null?_:(w!==n.namespaces&&(w=n.namespaces,S=n.enabled(b)),S),set:B=>{_=B}}),typeof n.init=="function"&&n.init(T),T}function a(b,x){const _=n(this.namespace+(typeof x>"u"?":":x)+b);return _.log=this.log,_}function o(b){n.save(b),n.namespaces=b,n.names=[],n.skips=[];let x;const _=(typeof b=="string"?b:"").split(/[\s,]+/),w=_.length;for(x=0;x<w;x++)_[x]&&(b=_[x].replace(/\*/g,".*?"),b[0]==="-"?n.skips.push(new RegExp("^"+b.slice(1)+"$")):n.names.push(new RegExp("^"+b+"$")))}function c(){const b=[...n.names.map(u),...n.skips.map(u).map(x=>"-"+x)].join(",");return n.enable(""),b}function l(b){if(b[b.length-1]==="*")return!0;let x,_;for(x=0,_=n.skips.length;x<_;x++)if(n.skips[x].test(b))return!1;for(x=0,_=n.names.length;x<_;x++)if(n.names[x].test(b))return!0;return!1}function u(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function d(b){return b instanceof Error?b.stack||b.message:b}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var common$1=setup;(function(t,e){e.formatArgs=a,e.save=o,e.load=c,e.useColors=n,e.storage=l(),e.destroy=(()=>{let d=!1;return()=>{d||(d=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(d){if(d[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+d[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const m="color: "+this.color;d.splice(1,0,m,"color: inherit");let b=0,x=0;d[0].replace(/%[a-zA-Z%]/g,_=>{_!=="%%"&&(b++,_==="%c"&&(x=b))}),d.splice(x,0,m)}e.log=console.debug||console.log||(()=>{});function o(d){try{d?e.storage.setItem("debug",d):e.storage.removeItem("debug")}catch{}}function c(){let d;try{d=e.storage.getItem("debug")}catch{}return!d&&typeof browser$1$1<"u"&&"env"in browser$1$1&&(d={}.DEBUG),d}function l(){try{return localStorage}catch{}}t.exports=common$1(e);const{formatters:u}=t.exports;u.j=function(d){try{return JSON.stringify(d)}catch(m){return"[UnexpectedJSONParseError]: "+m.message}}})(browser$2,browserExports$1);const debug=browserExports$1;var srcExports$1={},src$3={get exports(){return srcExports$1},set exports(t){srcExports$1=t}};function memoize(t,e){var n=e&&e.cache?e.cache:cacheDefault,a=e&&e.serializer?e.serializer:serializerDefault,o=e&&e.strategy?e.strategy:strategyDefault;return o(t,{cache:n,serializer:a})}function isPrimitive(t){return t==null||typeof t=="number"||typeof t=="boolean"}function monadic(t,e,n,a){var o=isPrimitive(a)?a:n(a),c=e.get(o);return typeof c>"u"&&(c=t.call(this,a),e.set(o,c)),c}function variadic(t,e,n){var a=Array.prototype.slice.call(arguments,3),o=n(a),c=e.get(o);return typeof c>"u"&&(c=t.apply(this,a),e.set(o,c)),c}function assemble(t,e,n,a,o){return n.bind(e,t,a,o)}function strategyDefault(t,e){var n=t.length===1?monadic:variadic;return assemble(t,this,n,e.cache.create(),e.serializer)}function strategyVariadic(t,e){var n=variadic;return assemble(t,this,n,e.cache.create(),e.serializer)}function strategyMonadic(t,e){var n=monadic;return assemble(t,this,n,e.cache.create(),e.serializer)}function serializerDefault(){return JSON.stringify(arguments)}function ObjectWithoutPrototypeCache(){this.cache=Object.create(null)}ObjectWithoutPrototypeCache.prototype.has=function(t){return t in this.cache};ObjectWithoutPrototypeCache.prototype.get=function(t){return this.cache[t]};ObjectWithoutPrototypeCache.prototype.set=function(t,e){this.cache[t]=e};var cacheDefault={create:function t(){return new ObjectWithoutPrototypeCache}};src$3.exports=memoize;srcExports$1.strategies={variadic:strategyVariadic,monadic:strategyMonadic};function compare(t,e){if(t===e)return 0;for(var n=t.length,a=e.length,o=0,c=Math.min(n,a);o<c;++o)if(t[o]!==e[o]){n=t[o],a=e[o];break}return n<a?-1:a<n?1:0}var hasOwn$1=Object.prototype.hasOwnProperty,objectKeys=Object.keys||function(t){var e=[];for(var n in t)hasOwn$1.call(t,n)&&e.push(n);return e},pSlice=Array.prototype.slice,_functionsHaveNames;function functionsHaveNames(){return typeof _functionsHaveNames<"u"?_functionsHaveNames:_functionsHaveNames=function(){return function(){}.name==="foo"}()}function pToString(t){return Object.prototype.toString.call(t)}function isView(t){return buffer$3.isBuffer(t)||typeof globalThis.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t?!!(t instanceof DataView||t.buffer&&t.buffer instanceof ArrayBuffer):!1}function assert(t,e){t||fail(t,!0,e,"==",ok)}var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(t){if(util$9.isFunction(t)){if(functionsHaveNames())return t.name;var e=t.toString(),n=e.match(regex);return n&&n[1]}}assert.AssertionError=AssertionError;function AssertionError(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var e=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var a=n.stack,o=getName(e),c=a.indexOf(`
`+o);if(c>=0){var l=a.indexOf(`
`,c+1);a=a.substring(l+1)}this.stack=a}}}util$9.inherits(AssertionError,Error);function truncate(t,e){return typeof t=="string"?t.length<e?t:t.slice(0,e):t}function inspect$1(t){if(functionsHaveNames()||!util$9.isFunction(t))return util$9.inspect(t);var e=getName(t),n=e?": "+e:"";return"[Function"+n+"]"}function getMessage(t){return truncate(inspect$1(t.actual),128)+" "+t.operator+" "+truncate(inspect$1(t.expected),128)}function fail(t,e,n,a,o){throw new AssertionError({message:n,actual:t,expected:e,operator:a,stackStartFunction:o})}assert.fail=fail;function ok(t,e){t||fail(t,!0,e,"==",ok)}assert.ok=ok;assert.equal=equal;function equal(t,e,n){t!=e&&fail(t,e,n,"==",equal)}assert.notEqual=notEqual;function notEqual(t,e,n){t==e&&fail(t,e,n,"!=",notEqual)}assert.deepEqual=deepEqual;function deepEqual(t,e,n){_deepEqual(t,e,!1)||fail(t,e,n,"deepEqual",deepEqual)}assert.deepStrictEqual=deepStrictEqual;function deepStrictEqual(t,e,n){_deepEqual(t,e,!0)||fail(t,e,n,"deepStrictEqual",deepStrictEqual)}function _deepEqual(t,e,n,a){if(t===e)return!0;if(buffer$3.isBuffer(t)&&buffer$3.isBuffer(e))return compare(t,e)===0;if(util$9.isDate(t)&&util$9.isDate(e))return t.getTime()===e.getTime();if(util$9.isRegExp(t)&&util$9.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if((t===null||typeof t!="object")&&(e===null||typeof e!="object"))return n?t===e:t==e;if(isView(t)&&isView(e)&&pToString(t)===pToString(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return compare(new Uint8Array(t.buffer),new Uint8Array(e.buffer))===0;if(buffer$3.isBuffer(t)!==buffer$3.isBuffer(e))return!1;a=a||{actual:[],expected:[]};var o=a.actual.indexOf(t);return o!==-1&&o===a.expected.indexOf(e)?!0:(a.actual.push(t),a.expected.push(e),objEquiv(t,e,n,a))}function isArguments(t){return Object.prototype.toString.call(t)=="[object Arguments]"}function objEquiv(t,e,n,a){if(t==null||e===null||e===void 0)return!1;if(util$9.isPrimitive(t)||util$9.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=isArguments(t),c=isArguments(e);if(o&&!c||!o&&c)return!1;if(o)return t=pSlice.call(t),e=pSlice.call(e),_deepEqual(t,e,n);var l=objectKeys(t),u=objectKeys(e),d,m;if(l.length!==u.length)return!1;for(l.sort(),u.sort(),m=l.length-1;m>=0;m--)if(l[m]!==u[m])return!1;for(m=l.length-1;m>=0;m--)if(d=l[m],!_deepEqual(t[d],e[d],n,a))return!1;return!0}assert.notDeepEqual=notDeepEqual;function notDeepEqual(t,e,n){_deepEqual(t,e,!1)&&fail(t,e,n,"notDeepEqual",notDeepEqual)}assert.notDeepStrictEqual=notDeepStrictEqual;function notDeepStrictEqual(t,e,n){_deepEqual(t,e,!0)&&fail(t,e,n,"notDeepStrictEqual",notDeepStrictEqual)}assert.strictEqual=strictEqual;function strictEqual(t,e,n){t!==e&&fail(t,e,n,"===",strictEqual)}assert.notStrictEqual=notStrictEqual;function notStrictEqual(t,e,n){t===e&&fail(t,e,n,"!==",notStrictEqual)}function expectedException(t,e){if(!t||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(t);try{if(t instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function _tryBlock(t){var e;try{t()}catch(n){e=n}return e}function _throws(t,e,n,a){var o;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof n=="string"&&(a=n,n=null),o=_tryBlock(e),a=(n&&n.name?" ("+n.name+").":".")+(a?" "+a:"."),t&&!o&&fail(o,n,"Missing expected exception"+a);var c=typeof a=="string",l=!t&&util$9.isError(o),u=!t&&o&&!n;if((l&&c&&expectedException(o,n)||u)&&fail(o,n,"Got unwanted exception"+a),t&&o&&n&&!expectedException(o,n)||!t&&o)throw o}assert.throws=throws;function throws(t,e,n){_throws(!0,t,e,n)}assert.doesNotThrow=doesNotThrow;function doesNotThrow(t,e,n){_throws(!1,t,e,n)}assert.ifError=ifError;function ifError(t){if(t)throw t}const assert$1=Object.freeze(Object.defineProperty({__proto__:null,AssertionError,assert:ok,deepEqual,deepStrictEqual,default:assert,doesNotThrow,equal,fail,ifError,notDeepEqual,notDeepStrictEqual,notEqual,notStrictEqual,ok,strictEqual,throws},Symbol.toStringTag,{value:"Module"}));var KeyType;(function(t){t.TEAM="TEAM",t.ROLE="ROLE",t.MEMBER="MEMBER",t.DEVICE="DEVICE",t.EPHEMERAL="EPHEMERAL"})(KeyType||(KeyType={}));var ADMIN="admin";KeyType.TEAM,KeyType.TEAM;KeyType.ROLE;KeyType.EPHEMERAL,KeyType.EPHEMERAL;var BASE30_ALPHABET="abcdefghjkmnpqrsuvwxyz23456789".split("");BASE30_ALPHABET.length;var HashPurpose;(function(t){t.SIGNATURE="SIGNATURE",t.ENCRYPTION="ENCRYPTION",t.SYMMETRIC="SYMMETRIC",t.LINK_TO_PREVIOUS="LINK_TO_PREVIOUS",t.INVITATION="INVITATION",t.DEVICE_ID="DEVICE_ID",t.SHARED_KEY="SHARED_KEY"})(HashPurpose||(HashPurpose={}));HashPurpose.SIGNATURE;HashPurpose.ENCRYPTION;HashPurpose.SYMMETRIC;var _keyset$KeyType=KeyType;_keyset$KeyType.MEMBER;HashPurpose.LINK_TO_PREVIOUS;KeyType.DEVICE;KeyType.ROLE;KeyType.MEMBER;var _after,TIMEOUT_DELAY=7e3;_after={},_after[TIMEOUT_DELAY]={actions:"failTimeout",target:"#failure"};KeyType.DEVICE;class EncryptionLocalFirst{constructor(){lt(this,"clefs");lt(this,"nom","défaut");const{publicKey:e,secretKey:n}=asymmetric.keyPair();this.clefs={publique:e,secrète:n}}encrypter({message:e,clefPubliqueDestinataire:n}){return asymmetric.encrypt({secret:e,recipientPublicKey:n,senderSecretKey:this.clefs.secrète}).toString()}décrypter({message:e,clefPubliqueExpéditeur:n}){return asymmetric.decrypt({cipher:e,recipientSecretKey:this.clefs.secrète,senderPublicKey:n})}clefAléatoire(){return Math.random().toString()}async obtNom(){return this.nom}async obtClefs(){return this.clefs}}class Favoris{constructor({client:e,id:n}){lt(this,"client");lt(this,"idBd");lt(this,"_promesseInit");lt(this,"oublierÉpingler");this.client=e,this.idBd=n,this._promesseInit=this._épinglerFavoris()}async _épinglerFavoris(){let e=[];const n=await this.client.suivreBdDic({id:this.idBd,f:async a=>{const o=[];await Promise.all(Object.entries(a).map(async([l,u])=>{const d=await this.estÉpingléSurDispositif({dispositifs:u.dispositifs}),m=await this.estÉpingléSurDispositif({dispositifs:u.dispositifsFichiers});d&&await this.client.épingles.épinglerBd({id:l,récursif:u.récursif,fichiers:m}),o.push(l)}));const c=e.filter(l=>!o.includes(l));await Promise.all(c.map(async l=>await this.client.épingles.désépinglerBd({id:l}))),e=o}});this.oublierÉpingler=n}async suivreFavoris({f:e,idBdFavoris:n}){n=n||this.idBd;const a=async o=>{const c=Object.entries(o).map(([l,u])=>({idObjet:l,...u}));await e(c)};return await this.client.suivreBdDic({id:n,f:a})}async épinglerFavori({id:e,dispositifs:n,dispositifsFichiers:a="INSTALLÉ",récursif:o=!0}){const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:this.idBd}),u={récursif:o,dispositifs:n};a&&(u.dispositifsFichiers=a),await c.put(e,u),await l()}async désépinglerFavori({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.del(e),await a()}async suivreÉtatFavori({id:e,f:n}){return await this.client.suivreBdDic({id:this.idBd,f:a=>n(a[e])})}async suivreEstÉpingléSurDispositif({idObjet:e,f:n,idOrbite:a}){const o=async c=>{const l=await this.estÉpingléSurDispositif({dispositifs:c?.dispositifs,idOrbite:a}),u=await this.estÉpingléSurDispositif({dispositifs:c?.dispositifsFichiers,idOrbite:a});n({idObjet:e,bd:l,fichiers:u,récursif:c?.récursif||!1})};return await this.suivreÉtatFavori({id:e,f:o})}async estÉpingléSurDispositif({dispositifs:e,idOrbite:n}){return n=n||await this.client.obtIdOrbite(),e===void 0?!1:e==="TOUS"?!0:e==="INSTALLÉ"?n===await this.client.obtIdOrbite()?isNode||isElectron$1:!1:typeof e=="string"?e===n:e.includes(n)}async fermer(){await this._promesseInit,this.oublierÉpingler&&await this.oublierÉpingler()}}__decorate([cacheSuivi],Favoris.prototype,"suivreFavoris",null);__decorate([cacheSuivi],Favoris.prototype,"suivreÉtatFavori",null);__decorate([cacheSuivi],Favoris.prototype,"suivreEstÉpingléSurDispositif",null);const MAX_TAILLE_IMAGE=500*1e3,MAX_TAILLE_IMAGE_VIS=1500*1e3;class Projets{constructor({client:e,id:n}){lt(this,"client");lt(this,"idBd");this.client=e,this.idBd=n}async suivreProjets({f:e,idBdProjets:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async créerProjet(){const{bd:e,fOublier:n}=await this.client.ouvrirBd({id:this.idBd}),a=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a}),u={address:o.access.address};await o.set("type","projet");const d=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:u});await o.set("noms",d);const m=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:u});await o.set("descriptions",m);const b=await this.client.créerBdIndépendante({type:"feed",optionsAccès:u});await o.set("bds",b);const x=await this.client.créerBdIndépendante({type:"feed",optionsAccès:u});return await o.set("motsClefs",x),await o.set("statut",{statut:TYPES_STATUT.ACTIVE}),await e.add(a),n(),c(),a}async copierProjet({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e}),o=await this.créerProjet(),{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o}),u=n.get("noms"),{bd:d,fOublier:m}=await this.client.ouvrirBd({id:u}),b=ClientConstellation.obtObjetdeBdDic({bd:d});await this.ajouterNomsProjet({id:o,noms:b});const x=n.get("descriptions"),{bd:_,fOublier:w}=await this.client.ouvrirBd({id:x}),S=ClientConstellation.obtObjetdeBdDic({bd:_});await this.ajouterDescriptionsProjet({id:o,descriptions:S});const T=n.get("motsClefs"),{bd:B,fOublier:C}=await this.client.ouvrirBd({id:T}),D=ClientConstellation.obtÉlémentsDeBdListe({bd:B});await this.ajouterMotsClefsProjet({idProjet:o,idsMotsClefs:D});const z=n.get("bds"),{bd:U,fOublier:Y}=await this.client.ouvrirBd({id:z}),X=ClientConstellation.obtÉlémentsDeBdListe({bd:U});await Promise.all(X.map(async Z=>{await this.ajouterBdProjet({idProjet:o,idBd:Z})}));const O=n.get("statut")||{statut:TYPES_STATUT.ACTIVE};await c.set("statut",O);const J=n.get("image");return J&&await c.set("image",J),await c.set("copiéDe",e),a(),l(),m(),w(),C(),Y(),o}async ajouterÀMesProjets({idProjet:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async enleverDeMesProjets({idProjet:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a()}async inviterAuteur({idProjet:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async _obtBdNoms({id:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:n});if(!a)throw new Error(`Permission de modification refusée pour Projet ${e}.`);return await this.client.ouvrirBd({id:a})}async ajouterNomsProjet({id:e,noms:n}){const{bd:a,fOublier:o}=await this._obtBdNoms({id:e});for(const c in n)await a.set(c,n[c]);await o()}async sauvegarderNomProjet({id:e,langue:n,nom:a}){const{bd:o,fOublier:c}=await this._obtBdNoms({id:e});await o.set(n,a),await c()}async effacerNomProjet({id:e,langue:n}){const{bd:a,fOublier:o}=await this._obtBdNoms({id:e});await a.del(n),await o()}async _obtBdDescr({id:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:n});if(!a)throw new Error(`Permission de modification refusée pour Projet ${e}.`);return await this.client.ouvrirBd({id:a})}async ajouterDescriptionsProjet({id:e,descriptions:n}){const{bd:a,fOublier:o}=await this._obtBdDescr({id:e});for(const c in n)await a.set(c,n[c]);await o()}async sauvegarderDescrProjet({id:e,langue:n,nom:a}){const{bd:o,fOublier:c}=await this._obtBdDescr({id:e});await o.set(n,a),await c()}async effacerDescrProjet({id:e,langue:n}){const{bd:a,fOublier:o}=await this._obtBdDescr({id:e});await a.del(n),await o()}async _obtBdMotsClefs({id:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"feed",optionsAccès:n});if(!a)throw new Error(`Permission de modification refusée pour projet ${e}.`);return await this.client.ouvrirBd({id:a})}async ajouterMotsClefsProjet({idProjet:e,idsMotsClefs:n}){Array.isArray(n)||(n=[n]);const{bd:a,fOublier:o}=await this._obtBdMotsClefs({id:e});await Promise.all(n.map(async c=>{ClientConstellation.obtÉlémentsDeBdListe({bd:a}).includes(c)||await a.add(c)})),await o()}async effacerMotClefProjet({idProjet:e,idMotClef:n}){const{bd:a,fOublier:o}=await this._obtBdMotsClefs({id:e});await this.client.effacerÉlémentDeBdListe({bd:a,élément:n}),await o()}async _obtBdBds({id:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.obtIdBd({nom:"bds",racine:e,type:"feed",optionsAccès:n});if(!a)throw new Error(`Permission de modification refusée pour Projet ${e}.`);return await this.client.ouvrirBd({id:a})}async ajouterBdProjet({idProjet:e,idBd:n}){const{bd:a,fOublier:o}=await this._obtBdBds({id:e});await a.add(n),await o()}async effacerBdProjet({idProjet:e,idBd:n}){const{bd:a,fOublier:o}=await this._obtBdBds({id:e});await this.client.effacerÉlémentDeBdListe({bd:a,élément:n}),await o()}async marquerObsolète({id:e,idNouvelle:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});a.set("statut",{statut:TYPES_STATUT.OBSOLÈTE,idNouvelle:n}),await o()}async marquerActive({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.ACTIVE}),await a()}async marquerBêta({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.BÊTA}),await a()}async marquerInterne({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.INTERNE}),await a()}async sauvegarderImage({idProjet:e,image:n}){let a;if(n.size!==void 0){if(n.size>MAX_TAILLE_IMAGE)throw new Error("Taille maximale excédée");a=await n.arrayBuffer()}else a=n;const o=await this.client.ajouterÀSFIP({fichier:a}),{bd:c,fOublier:l}=await this.client.ouvrirBd({id:e});await c.set("image",o),await l()}async effacerImage({idProjet:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});await n.del("image"),await a()}async suivreImage({idProjet:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("image");o||await n(null);const c=await this.client.obtFichierSFIP({id:o,max:MAX_TAILLE_IMAGE_VIS});await n(c)}})}async suivreNomsProjet({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async suivreDescrProjet({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",f:n})}async suivreMotsClefsProjet({idProjet:e,f:n}){const a={},o=()=>{if(a.propres&&a.bds){const x=[...new Set([...a.propres,...a.bds])];n(x)}},c=x=>{a.propres=x,o()},l=await this.client.suivreBdListeDeClef({id:e,clef:"motsClefs",f:c}),u=x=>{a.bds=x,o()},d=async x=>await this.suivreBdsProjet({id:e,f:x}),m=async(x,_)=>await this.client.bds.suivreMotsClefsBd({id:x,f:_}),b=await this.client.suivreBdsDeFonctionListe({fListe:d,f:u,fBranche:m});return async()=>{await l(),await b()}}async suivreBdsProjet({id:e,f:n}){return await this.client.suivreBdListeDeClef({id:e,clef:"bds",f:n})}async suivreVariablesProjet({id:e,f:n}){const a=l=>n(l||[]),o=async(l,u)=>await this.client.bds.suivreVariablesBd({id:l,f:u}),c=async({id:l,fSuivreBd:u})=>await this.client.suivreBdsDeBdListe({id:l,f:u,fBranche:o});return await this.client.suivreBdDeClef({id:e,clef:"bds",f:a,fSuivre:c})}async suivreQualitéProjet({idProjet:e,f:n}){const a=u=>{n(u.length?u.reduce((d,m)=>d+m,0)/u.length:0)},o=async u=>await this.suivreBdsProjet({id:e,f:u}),c=async(u,d)=>await this.client.bds.suivreScoreBd({id:u,f:m=>d(m.total)}),l=u=>u.flat();return await this.client.suivreBdsDeFonctionListe({fListe:o,f:a,fBranche:c,fRéduction:l})}async exporterDonnées({id:e,langues:n,nomFichier:a}){if(!a){const l=await uneFois(d=>this.suivreNomsProjet({id:e,f:d})),u=e.split("/").pop();a=n&&traduire(l,n)||u}const o={docs:[],fichiersSFIP:new Set,nomFichier:a},c=await uneFois(l=>this.suivreBdsProjet({id:e,f:l}));for(const l of c){const{doc:u,fichiersSFIP:d}=await this.client.bds.exporterDonnées({id:l,langues:n});let m;const b=l.split("/").pop();if(n){const x=await uneFois(_=>this.client.bds.suivreNomsBd({id:l,f:_}));m=traduire(x,n)||b}else m=b;o.docs.push({doc:u,nom:m});for(const x of d)o.fichiersSFIP.add(x)}return o}async exporterDocumentDonnées({données:e,formatDoc:n,dir:a="",inclureFichiersSFIP:o=!0}){const{docs:c,fichiersSFIP:l,nomFichier:u}=e,m={xls:"biff8"}[n]||n,b=c.map(_=>({nom:`${_.nom}.${n}`,octets:writeSync(_.doc,{bookType:m,type:"buffer"})})),x=o?await Promise.all([...l].map(async _=>({nom:`${_.cid}.${_.ext}`,octets:await toBuffer(this.client.obtItérableAsyncSFIP({id:_.cid}))}))):[];await zipper(b,x,path.join(a,u))}async effacerProjet({id:e}){await this.enleverDeMesProjets({idProjet:e});const n=await this.client.obtOpsAccès({idBd:e});for(const a in["noms","descriptions","motsClefs","bds"]){const o=await this.client.obtIdBd({nom:a,racine:e,optionsAccès:n});o&&await this.client.effacerBd({id:o})}await this.client.effacerBd({id:e})}}__decorate([cacheSuivi],Projets.prototype,"suivreProjets",null);__decorate([cacheSuivi],Projets.prototype,"suivreImage",null);__decorate([cacheSuivi],Projets.prototype,"suivreNomsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreDescrProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreMotsClefsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreBdsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreVariablesProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreQualitéProjet",null);class MotsClefs{constructor({client:e,id:n}){lt(this,"client");lt(this,"idBd");this.client=e,this.idBd=n}async suivreMotsClefs({f:e,idBdMotsClefs:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async créerMotClef(){const e=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}});await this.ajouterÀMesMotsClefs({id:e});const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e}),c={address:n.access.address};await n.set("type","motClef");const l=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:c});return await n.set("noms",l),a(),e}async ajouterÀMesMotsClefs({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async enleverDeMesMotsClefs({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a()}async copierMotClef({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e}),o=await this.créerMotClef(),c=n.get("noms"),{bd:l,fOublier:u}=await this.client.ouvrirBd({id:c}),d=ClientConstellation.obtObjetdeBdDic({bd:l});return await this.ajouterNomsMotClef({id:o,noms:d}),a(),u(),o}async inviterAuteur({idMotClef:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async ajouterNomsMotClef({id:e,noms:n}){const a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a});for(const l in n)await o.set(l,n[l]);await c()}async sauvegarderNomMotClef({id:e,langue:n,nom:a}){const o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!o)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.set(n,a),await l()}async effacerNomMotClef({id:e,langue:n}){const a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:o,fOublier:c}=await this.client.ouvrirBd({id:a});await o.del(n),await c()}async suivreNomsMotClef({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async effacerMotClef({id:e}){await this.enleverDeMesMotsClefs({id:e});const n=await this.client.obtOpsAccès({idBd:e});for(const a in["noms"]){const o=await this.client.obtIdBd({nom:a,racine:e,optionsAccès:n});o&&await this.client.effacerBd({id:o})}await this.client.effacerBd({id:e})}async suivreQualitéMotClef({id:e,f:n}){return await this.suivreNomsMotClef({id:e,f:a=>n(Object.keys(a).length?1:0)})}}__decorate([cacheSuivi],MotsClefs.prototype,"suivreMotsClefs",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreNomsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreQualitéMotClef",null);class Nuée{constructor({client:e,id:n}){lt(this,"client");lt(this,"idBd");this.client=e,this.idBd=n}async créerNuée({nuéeParent:e,autorisation:n,ajouter:a=!0}){const o=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}});a&&await this.ajouterÀMesNuées({id:o});const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o}),d={address:c.access.address};await c.set("type","nuée"),await c.set("autorisation",n||await this.générerGestionnaireAutorisations({}));const m=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:d});await c.set("noms",m);const b=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:d});await c.set("descriptions",b);const x=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:d});await c.set("tableaux",x);const _=await this.client.créerBdIndépendante({type:"feed",optionsAccès:d});return await c.set("motsClefs",_),await c.set("statut",{statut:TYPES_STATUT.ACTIVE}),e&&await c.set("parent",e),l(),o}async ajouterÀMesNuées({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async copierNuée({id:e,ajouterÀMesNuées:n=!0}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e}),c=a.get("parent"),l=await this.créerNuée({nuéeParent:c,ajouter:n}),{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l}),m=a.get("noms"),{bd:b,fOublier:x}=await this.client.ouvrirBd({id:m}),_=ClientConstellation.obtObjetdeBdDic({bd:b});await this.ajouterNomsNuée({id:l,noms:_});const w=a.get("descriptions"),{bd:S,fOublier:T}=await this.client.ouvrirBd({id:w}),B=ClientConstellation.obtObjetdeBdDic({bd:S});await this.ajouterDescriptionsNuée({id:l,descriptions:B}),x(),T();const C=a.get("motsClefs"),{bd:D,fOublier:z}=await this.client.ouvrirBd({id:C}),U=ClientConstellation.obtÉlémentsDeBdListe({bd:D});await this.ajouterMotsClefsNuée({idNuée:l,idsMotsClefs:U});const Y=a.get("tableaux"),X=u.get("tableaux"),{bd:O,fOublier:J}=await this.client.ouvrirBd({id:X}),{bd:Z,fOublier:se}=await this.client.ouvrirBd({id:Y}),ie=ClientConstellation.obtObjetdeBdDic({bd:Z});for(const y of Object.keys(ie)){const A=await this.client.tableaux.copierTableau({id:y,idBd:l,copierDonnées:!1});await O.set(A,ie[y])}const F=a.get("statut")||{statut:TYPES_STATUT.ACTIVE};await u.set("statut",F);const k=a.get("image");return k&&await u.set("image",k),await u.set("copiéDe",e),await o(),J(),d(),se(),z(),l}async suivreNuées({f:e,idBdNuéesCompte:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async suivreDeParents({idNuée:e,f:n,fParents:a}){return await this.client.suivreBdsDeFonctionListe({fListe:async o=>await this.suivreNuéesParents({idNuée:e,f:c=>o([e,...c].reverse())}),f:n,fBranche:a,fRéduction:o=>o})}async ajouterNomsNuée({id:e,noms:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});for(const u in n)await c.set(u,n[u]);await l()}async effacerNomNuée({id:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.del(n),await l()}async suivreNomsNuée({idNuée:e,f:n}){const a=async o=>{await n(Object.assign({},...o))};return await this.suivreDeParents({idNuée:e,f:a,fParents:async(o,c)=>await this.client.suivreBdDicDeClef({id:o,clef:"noms",f:c})})}async ajouterDescriptionsNuée({id:e,descriptions:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});for(const u in n)await c.set(u,n[u]);await l()}async effacerDescriptionNuée({id:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.del(n),await l()}async suivreDescriptionsNuée({idNuée:e,f:n}){const a=async o=>{await n(Object.assign({},...o))};return await this.suivreDeParents({idNuée:e,f:a,fParents:async(o,c)=>await this.client.suivreBdDicDeClef({id:o,clef:"descriptions",f:c})})}async ajouterMotsClefsNuée({idsMotsClefs:e,idNuée:n}){Array.isArray(e)||(e=[e]);const a=await this.client.obtOpsAccès({idBd:n}),o=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${n}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});for(const u of e)ClientConstellation.obtÉlémentsDeBdListe({bd:c}).includes(u)||await c.add(u);await l()}async effacerMotClefNuée({idMotClef:e,idNuée:n}){const a=await this.client.obtOpsAccès({idBd:n}),o=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${n}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:c,élément:e}),await l()}async suivreMotsClefsNuée({idNuée:e,f:n}){const a=async o=>{await n([...new Set(o.flat())])};return await this.suivreDeParents({idNuée:e,f:a,fParents:async(o,c)=>await this.client.suivreBdListeDeClef({id:o,clef:"motsClefs",f:c})})}async inviterAuteur({idNuée:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async générerGestionnaireAutorisations({philosophie:e="IJPC"}){const n=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:a,fOublier:o}=await this.client.ouvrirBd({id:n});await a.set("philosophie",e);const l={address:a.access.address},u=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:l});return await a.set("membres",u),o(),n}async changerPhisolophieAutorisation({idAutorisation:e,philosophie:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("philosophie",n),o()}async suivrePhilosophieAutorisation({idNuée:e,f:n}){const a=o=>{const c=o.get("philosophie");["IJPC","CJPI"].includes(c)&&n(c)};return await this.client.suivreBd({id:e,f:a})}async accepterMembre({idAutorisation:e,idCompte:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"membres",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour groupe d'autorisation ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.set(n,"accepté"),l()}async exclureMembre({idAutorisation:e,idCompte:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"membres",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour groupe d'autorisation ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.set(n,"exclus"),l()}async suivreGestionnaireAutorisations({idNuée:e,f:n}){const a=o=>{const c=o.get("autorisation");n(c)};return await this.client.suivreBd({id:e,f:a})}async changerGestionnaireAutorisations({idNuée:e,idAutorisation:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("autorisation",n),o()}async suivreAutorisationsMembresDeGestionnaire({idAutorisation:e,f:n}){const a=o=>{const c=Object.entries(o).map(([l,u])=>({idCompte:l,statut:u}));n(c)};return await this.client.suivreBdDicDeClef({id:e,clef:"membres",f:a})}async suivreAutorisationsMembresDeNuée({idNuée:e,f:n}){const a=async({fSuivreRacine:c})=>await this.suivreGestionnaireAutorisations({idNuée:e,f:c}),o=async({id:c,fSuivreBd:l})=>await this.suivreAutorisationsMembresDeGestionnaire({idAutorisation:c,f:l});return await this.client.suivreBdDeFonction({fRacine:a,f:n,fSuivre:o})}async ajouterTableauNuée({idNuée:e,clefTableau:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});n=n||v4();const u=await this.client.tableaux.créerTableau({idBd:e});return await c.set(u,{position:Object.keys(c.all).length,clef:n}),await l(),u}async effacerTableauNuée({idNuée:e,idTableau:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:c,fOublier:l}=await this.client.ouvrirBd({id:o});await c.del(n),await l(),await this.client.tableaux.effacerTableau({idTableau:n})}async suivreTableauxNuée({idNuée:e,f:n}){const a=async c=>{await n(c.flat())},o=async(c,l)=>{const u=d=>{const m=Object.entries(d).map(([b,x])=>({id:b,...x}));l(m)};return await this.client.suivreBdDicDeClef({id:c,clef:"tableaux",f:u})};return await this.suivreDeParents({idNuée:e,f:a,fParents:o})}async ajouterNomsTableauNuée({idTableau:e,noms:n}){return await this.client.tableaux.ajouterNomsTableau({idTableau:e,noms:n})}async effacerNomsTableauNuée({idTableau:e,langue:n}){return await this.client.tableaux.effacerNomTableau({idTableau:e,langue:n})}async suivreNomsTableauNuée({idNuée:e,clefTableau:n,f:a}){const o=async l=>{await a(Object.assign({},...l))},c=async(l,u)=>await this.client.suivreBdDeFonction({fRacine:async({fSuivreRacine:d})=>await this.client.bds.suivreIdTableauParClef({idBd:l,clef:n,f:d}),f:u,fSuivre:async({id:d,fSuivreBd:m})=>await this.client.tableaux.suivreNomsTableau({idTableau:d,f:m})});return await this.suivreDeParents({idNuée:e,f:o,fParents:c})}async ajouterColonneTableauNuée({idTableau:e,idVariable:n,idColonne:a}){return await this.client.tableaux.ajouterColonneTableau({idTableau:e,idVariable:n,idColonne:a})}async effacerColonneTableauNuée({idTableau:e,idColonne:n}){return await this.client.tableaux.effacerColonneTableau({idTableau:e,idColonne:n})}async changerColIndexTableauNuée({idTableau:e,idColonne:n,val:a}){return await this.client.tableaux.changerColIndex({idTableau:e,idColonne:n,val:a})}async suivreColonnesTableauNuée({idNuée:e,clefTableau:n,f:a,catégories:o=!0}){const c=async u=>{await a(u.flat())},l=async(u,d)=>await this.client.suivreBdDeFonction({fRacine:async({fSuivreRacine:m})=>await this.client.bds.suivreIdTableauParClef({idBd:u,clef:n,f:m}),f:d,fSuivre:async({id:m,fSuivreBd:b})=>await this.client.tableaux.suivreColonnes({idTableau:m,f:b,catégories:o})});return await this.suivreDeParents({idNuée:e,f:c,fParents:l})}async ajouterRègleTableauNuée({idTableau:e,idColonne:n,règle:a}){return await this.client.tableaux.ajouterRègleTableau({idTableau:e,idColonne:n,règle:a})}async effacerRègleTableauNuée({idTableau:e,idRègle:n}){return await this.client.tableaux.effacerRègleTableau({idTableau:e,idRègle:n})}async TableauNuée({idNuée:e,clefTableau:n,f:a}){const o=async l=>{await a(l.flat())},c=async(l,u)=>await this.client.suivreBdDeFonction({fRacine:async({fSuivreRacine:d})=>await this.client.bds.suivreIdTableauParClef({idBd:l,clef:n,f:d}),f:u,fSuivre:async({id:d,fSuivreBd:m})=>await this.client.tableaux.suivreRègles({idTableau:d,f:m})});return await this.suivreDeParents({idNuée:e,f:o,fParents:c})}async suivreVariablesNuée({idNuée:e,f:n}){const a=l=>n(l||[]),o=async(l,u)=>await this.client.tableaux.suivreVariables({idTableau:l,f:u}),c=async l=>await this.suivreTableauxNuée({idNuée:e,f:u=>l(u.map(d=>d.id))});return await this.client.suivreBdsDeFonctionListe({fListe:c,f:a,fBranche:o})}async suivreQualitéNuée({idNuée:e,f:n}){const a={noms:{},descr:{}},o=()=>{const d=[Object.keys(a.noms).length?1:0,Object.keys(a.descr).length?1:0],m=d.reduce((b,x)=>b+x,0)/d.length;n(m)},c=await this.suivreNomsNuée({idNuée:e,f:d=>{a.noms=d,o()}}),l=await this.suivreDescriptionsNuée({idNuée:e,f:d=>{a.descr=d,o()}});return async()=>{await c(),await l()}}async suivreDifférencesNuéeEtTableau({idNuée:e,clefTableau:n,idTableau:a,f:o,stricte:c=!0}){const l=async m=>{const b=m.filter(x=>c||x.sévère);await o(b)},u=async({fSuivreRacine:m})=>await this.client.bds.suivreIdTableauParClef({idBd:e,clef:n,f:m}),d=async({id:m,fSuivreBd:b})=>await this.client.tableaux.suivreDifférencesAvecTableau({idTableau:a,idTableauRéf:m,f:b});return await this.client.suivreBdDeFonction({fRacine:u,f:l,fSuivre:d})}async suivreDifférencesNuéeEtBd({idNuée:e,idBd:n,f:a}){const o={},c=async()=>{const d=[];if(o.tableauxNuée&&o.tableauxBd){for(const m of o.tableauxNuée)if(!o.tableauxNuée.find(x=>x.clef===m.clef)){const x={type:"tableauManquant",sévère:!0,clefManquante:m.clef};d.push(x)}for(const m of o.tableauxBd)if(!o.tableauxNuée.find(x=>x.clef===m.clef)){const x={type:"tableauSupplémentaire",sévère:!1,clefExtra:m.clef};d.push(x)}}await a(d)},l=await this.client.bds.suivreTableauxBd({id:n,f:d=>{o.tableauxBd=d,c()}}),u=await this.suivreTableauxNuée({idNuée:e,f:d=>{o.tableauxNuée=d,c()}});return async()=>{await l(),await u()}}async suivreCorrespondanceBd({idBd:e,f:n}){const a=async c=>await this.client.bds.suivreNuéesBd({idBd:e,f:c}),o=async(c,l)=>{const u={différencesBds:[],différencesTableaux:[]},d=async()=>{l([...u.différencesBds,...u.différencesTableaux])},m=await this.suivreDifférencesNuéeEtBd({idNuée:c,idBd:e,f:async _=>{u.différencesBds=_,await d()}}),b=async(_,w,S)=>await this.suivreDifférencesNuéeEtTableau({idNuée:c,clefTableau:S.clef,idTableau:_,f:async T=>{await w(T.map(B=>({type:"tableau",sévère:B.sévère,idTableau:_,différence:B})))}}),x=await this.client.suivreBdsDeFonctionListe({fListe:async _=>await this.client.bds.suivreTableauxBd({id:e,f:_}),f:async _=>{u.différencesTableaux=_,await d()},fBranche:b,fCode:_=>_.id,fIdBdDeBranche:_=>_.id});return async()=>{await Promise.all([m,x])}};return await this.client.suivreBdsDeFonctionListe({fListe:a,f:n,fBranche:o})}async rechercherNuéesSpécialiséesLiées({idNuée:e,f:n,nRésultatsDésirés:a}){const o=async c=>{n(c.map(l=>l.id))};return await this.client.réseau.rechercherNuées({f:o,fObjectif:async(c,l,u)=>await c.nuées.suivreNuéesParents({idNuée:l,f:d=>{u({type:"résultat",score:d.includes(e)?1:0,de:"*",info:{type:"vide"}})}}),nRésultatsDésirés:a})}async suivreNuéesParents({idNuée:e,f:n}){const a=async({id:o,ancêtres:c=[]})=>{let l,u;const d=await this.client.suivreBd({id:o,f:async m=>{const b=m.get("parent");c=[...c,b],await n(c),b?b!==u&&(l&&await l(),c.includes(b)||(l=await a({id:b,ancêtres:c})),u=b):(l&&await l(),l=void 0)}});return async()=>{await d(),l&&await l()}};return await a({id:e})}async suivreBdsCorrespondantes({idNuée:e,f:n,vérifierAutorisation:a=!0,nRésultatsDésirés:o=100}){if(a){const c={},l=async()=>{const{philoAutorisation:T,membres:B,bds:C}=c;T&&B&&C||await n(void 0),await n((z=>{if(T==="CJPI"){const U=B.filter(Y=>Y.statut==="accepté").map(Y=>Y.idCompte);return z.filter(Y=>Y.auteurs.some(X=>U.includes(X))).map(Y=>Y.idBd)}else if(T==="IJPC"){const U=B.filter(Y=>Y.statut==="exclus").map(Y=>Y.idCompte);return z.filter(Y=>!Y.auteurs.some(X=>U.includes(X))).map(Y=>Y.idBd)}else throw new Error(T)})(C))},u=await this.suivrePhilosophieAutorisation({idNuée:e,f:async T=>{c.philoAutorisation=T,await l()}}),d=await this.suivreAutorisationsMembresDeNuée({idNuée:e,f:async T=>{c.membres=T,await l()}}),m=async T=>{c.bds=T,await l()},b=async T=>await this.client.réseau.suivreBdsDeNuée({idNuée:e,f:T,nRésultatsDésirés:o}),x=async(T,B)=>{const C=async D=>{B({idBd:T,auteurs:D.filter(z=>{z.accepté}).map(z=>z.idBdCompte)})};return await this.client.réseau.suivreAuteursBd({idBd:T,f:C})},{fOublier:_,fChangerProfondeur:w}=await this.client.suivreBdsDeFonctionListe({fListe:b,f:m,fBranche:x});return{fOublier:async()=>{await Promise.all([_,d,u].map(T=>T()))},fChangerProfondeur:w}}else return await this.client.réseau.suivreBdsDeNuée({idNuée:e,f:n,nRésultatsDésirés:o})}async suivreDonnéesTableauNuée({idNuée:e,clefTableau:n,f:a,ignorerErreursFormatBd:o=!0,ignorerErreursFormatTableau:c=!1,ignorerErreursDonnéesTableau:l=!0,licensesPermises:u=void 0}){const d=async _=>{const w=_.flat();await a(w)},m=async _=>await this.suivreBdsCorrespondantes({idNuée:e,f:_}),b=async _=>{const w=async(S,T)=>{const B={licence:!1,formatBd:!1},C=[],D=async()=>{const z=Object.values(B).every(U=>U);await T(z)};if(u){const z=await this.client.bds.suivreLicence({id:S,f:async U=>{B.licence=u.includes(U),await D()}});C.push(z)}else B.licence=!0;if(o)B.formatBd=!0;else{const z=await this.suivreDifférencesNuéeEtBd({idBd:S,idNuée:e,f:async U=>{B.formatBd=!U.length,await D()}});C.push(z)}return D(),async()=>{await Promise.all(C.map(z=>z()))}};return await this.client.suivreBdsSelonCondition({fListe:m,fCondition:w,f:_})},x=async(_,w)=>{const S={},T=async()=>{const{données:z,erreursÉléments:U,auteurs:Y}=S;if(z&&U&&Y&&Y.length){const X=Y.find(J=>J.accepté)?.idBdCompte;if(!X)return;const O=z.map(J=>({idBdCompte:X,élément:J,valid:U.filter(Z=>Z.empreinte==J.empreinte)})).filter(J=>l||!J.valid.length);await w(O)}},B=async({id:z,fSuivreBd:U})=>{const Y={},X=[],O=async()=>{const{données:se,erreurs:ie}=Y;se&&ie&&await U({données:se,erreurs:ie})},J=await this.client.tableaux.suivreDonnées({idTableau:z,f:async se=>{Y.données=se,await O()}});X.push(J);const Z=await this.client.tableaux.suivreValidDonnées({idTableau:z,f:async se=>{Y.erreurs=se,await O()}});return X.push(Z),async()=>{await Promise.all(X.map(se=>se()))}},C=await this.client.suivreBdDeFonction({fRacine:async({fSuivreRacine:z})=>await this.client.suivreBdSelonCondition({fRacine:async U=>await this.client.bds.suivreIdTableauParClef({idBd:_,clef:n,f:async Y=>await U(Y)}),fCondition:async(U,Y)=>c?(await Y(!0),faisRien):await this.suivreDifférencesNuéeEtTableau({idNuée:e,clefTableau:n,idTableau:U,f:async X=>await Y(!X.length),stricte:!1}),f:z}),f:async z=>{S.données=z.données,S.erreursÉléments=z.erreurs,await T()},fSuivre:B}),D=await this.client.réseau.suivreAuteursBd({idBd:_,f:async z=>{S.auteurs=z,await T()}});return async()=>{await Promise.all([C,D])}};return await this.client.suivreBdsDeFonctionListe({fListe:b,f:d,fBranche:x})}async générerDeBd({idBd:e}){const n=await this.créerNuée({}),a=await uneFois(async u=>await this.client.bds.suivreNomsBd({id:e,f:u}));await this.ajouterNomsNuée({id:n,noms:a});const o=await uneFois(async u=>await this.client.bds.suivreDescrBd({id:e,f:u}));await this.ajouterDescriptionsNuée({id:n,descriptions:o});const c=await uneFois(async u=>await this.client.bds.suivreMotsClefsBd({id:e,f:u}));await this.ajouterMotsClefsNuée({idNuée:n,idsMotsClefs:c});const l=await uneFois(async u=>await this.client.bds.suivreTableauxBd({id:e,f:u}));for(const u of l){const d=u.id,m=await this.ajouterTableauNuée({idNuée:n,clefTableau:u.clef}),b=await uneFois(async x=>await this.client.tableaux.suivreColonnes({idTableau:d,f:x,catégories:!1}));for(const x of b){await this.ajouterColonneTableauNuée({idTableau:m,idVariable:x.variable,idColonne:x.id}),await this.changerColIndexTableauNuée({idTableau:m,idColonne:x.id,val:x.index});const _=await uneFois(async w=>await this.client.tableaux.suivreRègles({idTableau:d,f:w}));for(const w of _)w.source==="tableau"&&await this.ajouterRègleTableauNuée({idTableau:m,idColonne:x.id,règle:w.règle.règle})}}return n}}__decorate([cacheSuivi],Nuée.prototype,"suivreDescriptionsNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreMotsClefsNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreNomsTableauNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreColonnesTableauNuée",null);__decorate([cacheSuivi],Nuée.prototype,"TableauNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreQualitéNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreDifférencesNuéeEtTableau",null);__decorate([cacheSuivi],Nuée.prototype,"suivreDifférencesNuéeEtBd",null);__decorate([cacheSuivi],Nuée.prototype,"suivreCorrespondanceBd",null);__decorate([cacheRechercheParNRésultats],Nuée.prototype,"rechercherNuéesSpécialiséesLiées",null);__decorate([cacheSuivi],Nuée.prototype,"suivreNuéesParents",null);__decorate([cacheRechercheParNRésultats],Nuée.prototype,"suivreBdsCorrespondantes",null);__decorate([cacheSuivi],Nuée.prototype,"suivreDonnéesTableauNuée",null);const rechercherVariableSelonNom=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,de:"nom",clef:m,info:b})}else a()};return await e.variables.suivreNomsVariable({id:n,f:o})},rechercherVariableSelonDescr=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,de:"descr",clef:m,info:b})}else a()};return await e.variables.suivreDescrVariable({id:n,f:o})},rechercherVariableSelonTexte=t=>async(e,n,a)=>{const o=rechercherVariableSelonNom(t),c=rechercherVariableSelonDescr(t),l=rechercherSelonId(t);return await combinerRecherches({noms:o,descr:c,id:l},e,n,a)},rechercherMotClefSelonNom=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,clef:m,info:b,de:"nom"})}else a()};return await e.motsClefs.suivreNomsMotClef({id:n,f:o})},rechercherMotClefSelonTexte=t=>async(e,n,a)=>{const o=rechercherMotClefSelonNom(t),c=rechercherSelonId(t);return await combinerRecherches({noms:o,id:c},e,n,a)},rechercherBdSelonNom=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,clef:m,info:b,de:"nom"})}else a()};return await e.bds.suivreNomsBd({id:n,f:o})},rechercherBdSelonDescr=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,clef:m,info:b,de:"descr"})}else a()};return await e.bds.suivreDescrBd({id:n,f:o})},rechercherBdSelonIdVariable=t=>async(e,n,a)=>{const o=async l=>await e.bds.suivreVariablesBd({id:n,f:l}),c=rechercherSelonId(t);return await sousRecherche("variable",o,c,e,a)},rechercherBdSelonNomVariable=t=>async(e,n,a)=>{const o=async l=>await e.bds.suivreVariablesBd({id:n,f:l}),c=rechercherVariableSelonNom(t);return await sousRecherche("variable",o,c,e,a)},rechercherBdSelonVariable=t=>async(e,n,a)=>await combinerRecherches({id:rechercherBdSelonIdVariable(t),nom:rechercherBdSelonNomVariable(t)},e,n,a),rechercherBdSelonIdMotClef=t=>async(e,n,a)=>{const o=async l=>await e.bds.suivreMotsClefsBd({id:n,f:l}),c=rechercherSelonId(t);return await sousRecherche("motClef",o,c,e,a)},rechercherBdSelonNomMotClef=t=>async(e,n,a)=>{const o=async l=>await e.bds.suivreMotsClefsBd({id:n,f:l}),c=rechercherMotClefSelonNom(t);return await sousRecherche("motClef",o,c,e,a)},rechercherBdSelonMotClef=t=>async(e,n,a)=>await combinerRecherches({id:rechercherBdSelonIdMotClef(t),nom:rechercherBdSelonNomMotClef(t)},e,n,a),rechercherBdSelonTexte=t=>async(e,n,a)=>await combinerRecherches({nom:rechercherBdSelonNom(t),descr:rechercherBdSelonDescr(t),variables:rechercherBdSelonVariable(t),motsClefs:rechercherBdSelonMotClef(t),id:rechercherSelonId(t)},e,n,a),rechercherProjetSelonNom=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,clef:m,info:b,de:"nom"})}else a()};return await e.projets.suivreNomsProjet({id:n,f:o})},rechercherProjetSelonDescr=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,clef:m,info:b,de:"descr"})}else a()};return await e.projets.suivreDescrProjet({id:n,f:o})},rechercherProjetSelonIdBd=t=>async(e,n,a)=>{const o=async l=>await e.projets.suivreBdsProjet({id:n,f:l}),c=rechercherSelonId(t);return await sousRecherche("bd",o,c,e,a)},rechercherProjetSelonBd=t=>async(e,n,a)=>{const o=async l=>await e.projets.suivreBdsProjet({id:n,f:l}),c=rechercherBdSelonTexte(t);return await sousRecherche("bd",o,c,e,a)},rechercherProjetSelonIdVariable=t=>async(e,n,a)=>{const o=async l=>await e.projets.suivreVariablesProjet({id:n,f:l}),c=rechercherSelonId(t);return await sousRecherche("variable",o,c,e,a)},rechercherProjetSelonNomVariable=t=>async(e,n,a)=>{const o=async l=>await e.projets.suivreVariablesProjet({id:n,f:l}),c=rechercherVariableSelonNom(t);return await sousRecherche("variable",o,c,e,a)},rechercherProjetSelonVariable=t=>async(e,n,a)=>{const o=async l=>await e.projets.suivreVariablesProjet({id:n,f:l}),c=rechercherVariableSelonTexte(t);return await sousRecherche("variable",o,c,e,a)},rechercherProjetSelonIdMotClef=t=>async(e,n,a)=>{const o=async l=>await e.projets.suivreMotsClefsProjet({idProjet:n,f:l}),c=rechercherSelonId(t);return await sousRecherche("motClef",o,c,e,a)},rechercherProjetSelonNomMotClef=t=>async(e,n,a)=>{const o=async l=>await e.projets.suivreMotsClefsProjet({idProjet:n,f:l}),c=rechercherMotClefSelonNom(t);return await sousRecherche("motClef",o,c,e,a)},rechercherProjetSelonMotClef=t=>async(e,n,a)=>{const o=async l=>await e.projets.suivreMotsClefsProjet({idProjet:n,f:l}),c=rechercherMotClefSelonTexte(t);return await sousRecherche("motClef",o,c,e,a)},rechercherProjetSelonTexte=t=>async(e,n,a)=>{const o=rechercherProjetSelonNom(t),c=rechercherProjetSelonDescr(t),l=rechercherProjetSelonBd(t),u=rechercherProjetSelonVariable(t),d=rechercherProjetSelonMotClef(t),m=rechercherSelonId(t);return await combinerRecherches({noms:o,descr:c,bd:l,variable:u,motClef:d,id:m},e,n,a)},rechercherNuéeSelonNom=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,clef:m,info:b,de:"nom"})}else a()};return await e.nuées.suivreNomsNuée({idNuée:n,f:o})},rechercherNuéeSelonDescr=t=>async(e,n,a)=>{const o=l=>{const u=similTexte(t,l);if(u){const{score:d,clef:m,info:b}=u;a({type:"résultat",score:d,clef:m,info:b,de:"descr"})}else a()};return await e.nuées.suivreDescriptionsNuée({idNuée:n,f:o})},rechercherNuéeSelonIdVariable=t=>async(e,n,a)=>{const o=async l=>await e.nuées.suivreVariablesNuée({idNuée:n,f:l}),c=rechercherSelonId(t);return await sousRecherche("variable",o,c,e,a)},rechercherNuéeSelonNomVariable=t=>async(e,n,a)=>{const o=async l=>await e.nuées.suivreVariablesNuée({idNuée:n,f:l}),c=rechercherVariableSelonNom(t);return await sousRecherche("variable",o,c,e,a)},rechercherNuéeSelonVariable=t=>async(e,n,a)=>await combinerRecherches({id:rechercherNuéeSelonIdVariable(t),nom:rechercherNuéeSelonNomVariable(t)},e,n,a),rechercherNuéeSelonIdMotClef=t=>async(e,n,a)=>{const o=async l=>await e.nuées.suivreMotsClefsNuée({idNuée:n,f:l}),c=rechercherSelonId(t);return await sousRecherche("motClef",o,c,e,a)},rechercherNuéeSelonNomMotClef=t=>async(e,n,a)=>{const o=async l=>await e.nuées.suivreMotsClefsNuée({idNuée:n,f:l}),c=rechercherMotClefSelonNom(t);return await sousRecherche("motClef",o,c,e,a)},rechercherNuéeSelonMotClef=t=>async(e,n,a)=>await combinerRecherches({id:rechercherNuéeSelonIdMotClef(t),nom:rechercherNuéeSelonNomMotClef(t)},e,n,a),rechercherNuéeSelonTexte=t=>async(e,n,a)=>await combinerRecherches({nom:rechercherNuéeSelonNom(t),descr:rechercherNuéeSelonDescr(t),variables:rechercherNuéeSelonVariable(t),motsClefs:rechercherNuéeSelonMotClef(t),id:rechercherSelonId(t)},e,n,a);class Recherche{constructor({client:e}){lt(this,"client");this.client=e}async rechercherVariables({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherVariables({f:e,nRésultatsDésirés:n})}async rechercherVariableSelonId({idVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherVariableSelonNom({nomVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherVariableSelonNom(e);return await this.client.réseau.rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherVariableSelonDescr({descrVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherVariableSelonDescr(e);return await this.client.réseau.rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherVariableSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherVariableSelonTexte(e);return await this.client.réseau.rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherMotsClefs({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherMotsClefs({f:e,nRésultatsDésirés:n})}async rechercherMotClefSelonId({idMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherMotsClefs({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherMotClefSelonNom({nomMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherMotClefSelonNom(e);return await this.client.réseau.rechercherMotsClefs({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherMotClefSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherMotClefSelonTexte(e);return await this.client.réseau.rechercherMotsClefs({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBds({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherBds({f:e,nRésultatsDésirés:n})}async rechercherBdSelonId({idBd:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonNom({nomBd:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonNom(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonDescr({descrBd:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonDescr(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonIdMotClef({idMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonIdMotClef(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonIdVariable({idVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonIdVariable(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonNomMotClef({nomMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonNomMotClef(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonNomVariable({nomVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonNomVariable(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonMotClef({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonMotClef(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonVariable({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonVariable(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonTexte(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjets({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherProjets({f:e,nRésultatsDésirés:n})}async rechercherProfilSelonId({idCompte:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProfilSelonNom({nom:e,f:n,nRésultatsDésirés:a}){const o=rechercherProfilSelonNom(e);return await this.client.réseau.rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProfilSelonImage({image:e,f:n,nRésultatsDésirés:a}){const o=rechercherProfilSelonImage(e);return await this.client.réseau.rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProfilSelonActivité({f:e,nRésultatsDésirés:n}){const a=rechercherProfilSelonActivité();return await this.client.réseau.rechercherMembres({f:e,nRésultatsDésirés:n,fObjectif:a})}async rechercherProfilSelonCourriel({courriel:e,f:n,nRésultatsDésirés:a}){const o=rechercherProfilSelonCourriel(e);return await this.client.réseau.rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonId({idProjet:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonNom({nomProjet:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonNom(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonDescr({descrProjet:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonDescr(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonIdVariable({idVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonIdVariable(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonNomVariable({nomVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonNomVariable(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonVariable({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonVariable(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonIdMotClef({idMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonIdMotClef(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonNomMotClef({nomMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonNomMotClef(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonMotClef({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonMotClef(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonIdBd({idBd:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonIdBd(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonBd({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonBd(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonTexte(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuées({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherNuées({f:e,nRésultatsDésirés:n})}async rechercherNuéeSelonId({idNuée:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonNom({nomNuée:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonNom(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonDescr({descrNuée:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonDescr(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonIdMotClef({idMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonIdMotClef(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonIdVariable({idVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonIdVariable(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonNomMotClef({nomMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonNomMotClef(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonNomVariable({nomVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonNomVariable(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonMotClef({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonMotClef(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonVariable({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonVariable(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonTexte(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}}__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariables",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariableSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariableSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariableSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariableSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotsClefs",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotClefSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotClefSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotClefSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBds",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonIdMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonIdVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonNomMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonNomVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjets",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonImage",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonActivité",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonCourriel",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonIdVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonNomVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonIdMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonNomMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonIdBd",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonBd",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuées",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonIdMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonIdVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonNomMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonNomVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonTexte",null);function bind(t,e){return function(){return t.apply(e,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>e=>{const n=toString$2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),e=>kindOf(e)===t),typeOfTest=t=>e=>typeof e===t,{isArray:isArray$2}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction$1(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer(t.buffer),e}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$1=t=>t!==null&&typeof t=="object",isBoolean$1=t=>t===!0||t===!1,isPlainObject$1=t=>{if(kindOf(t)!=="object")return!1;const e=getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject$1(t)&&isFunction$1(t.pipe),isFormData=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||toString$2.call(t)===e||isFunction$1(t.toString)&&t.toString()===e)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),isArray$2(t))for(a=0,o=t.length;a<o;a++)e.call(null,t[a],a,t);else{const c=n?Object.getOwnPropertyNames(t):Object.keys(t),l=c.length;let u;for(a=0;a<l;a++)u=c[a],e.call(null,t[u],u,t)}}function findKey(t,e){e=e.toLowerCase();const n=Object.keys(t);let a=n.length,o;for(;a-- >0;)if(o=n[a],e===o.toLowerCase())return o;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:globalThis)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge$5(){const{caseless:t}=isContextDefined(this)&&this||{},e={},n=(a,o)=>{const c=t&&findKey(e,o)||o;isPlainObject$1(e[c])&&isPlainObject$1(a)?e[c]=merge$5(e[c],a):isPlainObject$1(a)?e[c]=merge$5({},a):isArray$2(a)?e[c]=a.slice():e[c]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&forEach(arguments[a],n);return e}const extend=(t,e,n,{allOwnKeys:a}={})=>(forEach(e,(o,c)=>{n&&isFunction$1(o)?t[c]=bind(o,n):t[c]=o},{allOwnKeys:a}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,e,n,a)=>{t.prototype=Object.create(e.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject=(t,e,n,a)=>{let o,c,l;const u={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),c=o.length;c-- >0;)l=o[c],(!a||a(l,t,e))&&!u[l]&&(e[l]=t[l],u[l]=!0);t=n!==!1&&getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},endsWith=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const a=t.indexOf(e,n);return a!==-1&&a===n},toArray=t=>{if(!t)return null;if(isArray$2(t))return t;let e=t.length;if(!isNumber$1(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},isTypedArray=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,e)=>{const a=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=a.next())&&!o.done;){const c=o.value;e.call(t,c[0],c[1])}},matchAll=(t,e)=>{let n;const a=[];for(;(n=t.exec(e))!==null;)a.push(n);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(n,a,o){return a.toUpperCase()+o}),hasOwnProperty$2=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),a={};forEach(n,(o,c)=>{e(o,c,t)!==!1&&(a[c]=o)}),Object.defineProperties(t,a)},freezeMethods=t=>{reduceDescriptors(t,(e,n)=>{if(isFunction$1(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=t[n];if(isFunction$1(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(t,e)=>{const n={},a=o=>{o.forEach(c=>{n[c]=!0})};return isArray$2(t)?a(t):a(String(t).split(e)),n},noop$1=()=>{},toFiniteNumber=(t,e)=>(t=+t,Number.isFinite(t)?t:e),toJSONObject=t=>{const e=new Array(10),n=(a,o)=>{if(isObject$1(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[o]=a;const c=isArray$2(a)?[]:{};return forEach(a,(l,u)=>{const d=n(l,o+1);!isUndefined(d)&&(c[u]=d)}),e[o]=void 0,c}}return a};return n(t,0)},utils={isArray:isArray$2,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean:isBoolean$1,isObject:isObject$1,isPlainObject:isPlainObject$1,isUndefined,isDate:isDate$1,isFile,isBlob,isRegExp:isRegExp$1,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$5,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$2,hasOwnProp:hasOwnProperty$2,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,globalThis:_global,isContextDefined,toJSONObject};function AxiosError(t,e,n,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),a&&(this.request=a),o&&(this.response=o)}utils.inherits(AxiosError,Error,{toJSON:function t(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,e,n,a,o,c)=>{const l=Object.create(prototype$1);return utils.toFlatObject(t,l,function(d){return d!==Error.prototype},u=>u!=="isAxiosError"),AxiosError.call(l,t.message,e,n,a,o),l.cause=t,l.name=t.name,c&&Object.assign(l,c),l};var browser$1=typeof self=="object"?self.FormData:window.FormData;const FormData$2=browser$1;function isVisitable(t){return utils.isPlainObject(t)||utils.isArray(t)}function removeBrackets(t){return utils.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,e,n){return t?t.concat(e).map(function(o,c){return o=removeBrackets(o),!n&&c?"["+o+"]":o}).join(n?".":""):e}function isFlatArray(t){return utils.isArray(t)&&!t.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function t(e){return/^is[A-Z]/.test(e)});function isSpecCompliant(t){return t&&utils.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function toFormData(t,e,n){if(!utils.isObject(t))throw new TypeError("target must be an object");e=e||new(FormData$2||FormData),n=utils.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,B){return!utils.isUndefined(B[T])});const a=n.metaTokens,o=n.visitor||b,c=n.dots,l=n.indexes,d=(n.Blob||typeof Blob<"u"&&Blob)&&isSpecCompliant(e);if(!utils.isFunction(o))throw new TypeError("visitor must be a function");function m(S){if(S===null)return"";if(utils.isDate(S))return S.toISOString();if(!d&&utils.isBlob(S))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(S)||utils.isTypedArray(S)?d&&typeof Blob=="function"?new Blob([S]):Buffer$x.from(S):S}function b(S,T,B){let C=S;if(S&&!B&&typeof S=="object"){if(utils.endsWith(T,"{}"))T=a?T:T.slice(0,-2),S=JSON.stringify(S);else if(utils.isArray(S)&&isFlatArray(S)||utils.isFileList(S)||utils.endsWith(T,"[]")&&(C=utils.toArray(S)))return T=removeBrackets(T),C.forEach(function(z,U){!(utils.isUndefined(z)||z===null)&&e.append(l===!0?renderKey([T],U,c):l===null?T:T+"[]",m(z))}),!1}return isVisitable(S)?!0:(e.append(renderKey(B,T,c),m(S)),!1)}const x=[],_=Object.assign(predicates,{defaultVisitor:b,convertValue:m,isVisitable});function w(S,T){if(!utils.isUndefined(S)){if(x.indexOf(S)!==-1)throw Error("Circular reference detected in "+T.join("."));x.push(S),utils.forEach(S,function(C,D){(!(utils.isUndefined(C)||C===null)&&o.call(e,C,utils.isString(D)?D.trim():D,T,_))===!0&&w(C,T?T.concat(D):[D])}),x.pop()}}if(!utils.isObject(t))throw new TypeError("data must be an object");return w(t),e}function encode$6(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function AxiosURLSearchParams(t,e){this._pairs=[],t&&toFormData(t,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function t(e,n){this._pairs.push([e,n])};prototype.toString=function t(e){const n=e?function(a){return e.call(this,a,encode$6)}:encode$6;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function encode$5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,e,n){if(!e)return t;const a=n&&n.encode||encode$5,o=n&&n.serialize;let c;if(o?c=o(e,n):c=utils.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,n).toString(a),c){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}class InterceptorManager{constructor(){this.handlers=[]}use(e,n,a){return this.handlers.push({fulfilled:e,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils.forEach(this.handlers,function(a){a!==null&&e(a)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$3=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=FormData,isStandardBrowserEnv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$3,FormData:FormData$1,Blob},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(t,e){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,a,o,c){return platform.isNode&&utils.isBuffer(n)?(this.append(a,n.toString("base64")),!1):c.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(t){return utils.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(t){const e={},n=Object.keys(t);let a;const o=n.length;let c;for(a=0;a<o;a++)c=n[a],e[c]=t[c];return e}function formDataToJSON(t){function e(n,a,o,c){let l=n[c++];const u=Number.isFinite(+l),d=c>=n.length;return l=!l&&utils.isArray(o)?o.length:l,d?(utils.hasOwnProp(o,l)?o[l]=[o[l],a]:o[l]=a,!u):((!o[l]||!utils.isObject(o[l]))&&(o[l]=[]),e(n,a,o[l],c)&&utils.isArray(o[l])&&(o[l]=arrayToObject(o[l])),!u)}if(utils.isFormData(t)&&utils.isFunction(t.entries)){const n={};return utils.forEachEntry(t,(a,o)=>{e(parsePropPath(a),o,n,0)}),n}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(t,e,n){if(utils.isString(t))try{return(e||JSON.parse)(t),utils.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(t)}const defaults$2={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function t(e,n){const a=n.getContentType()||"",o=a.indexOf("application/json")>-1,c=utils.isObject(e);if(c&&utils.isHTMLForm(e)&&(e=new FormData(e)),utils.isFormData(e))return o&&o?JSON.stringify(formDataToJSON(e)):e;if(utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e))return e;if(utils.isArrayBufferView(e))return e.buffer;if(utils.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(c){if(a.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((u=utils.isFileList(e))||a.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return toFormData(u?{"files[]":e}:e,d&&new d,this.formSerializer)}}return c||o?(n.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function t(e){const n=this.transitional||defaults$2.transitional,a=n&&n.forcedJSONParsing,o=this.responseType==="json";if(e&&utils.isString(e)&&(a&&!this.responseType||o)){const l=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(u){if(l)throw u.name==="SyntaxError"?AxiosError.from(u,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function t(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function t(e){defaults$2.headers[e]={}});utils.forEach(["post","put","patch"],function t(e){defaults$2.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)});const defaults$3=defaults$2,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders$1=t=>{const e={};let n,a,o;return t&&t.split(`
`).forEach(function(l){o=l.indexOf(":"),n=l.substring(0,o).trim().toLowerCase(),a=l.substring(o+1).trim(),!(!n||e[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?e[n]?e[n].push(a):e[n]=[a]:e[n]=e[n]?e[n]+", "+a:a)}),e},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(t);)e[a[1]]=a[2];return e}function isValidHeaderName(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function matchHeaderValue(t,e,n,a){if(utils.isFunction(a))return a.call(this,e,n);if(utils.isString(e)){if(utils.isString(a))return e.indexOf(a)!==-1;if(utils.isRegExp(a))return a.test(e)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,a)=>n.toUpperCase()+a)}function buildAccessors(t,e){const n=utils.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+n,{value:function(o,c,l){return this[a].call(this,e,o,c,l)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,n,a){const o=this;function c(u,d,m){const b=normalizeHeader(d);if(!b)throw new Error("header name must be a non-empty string");const x=utils.findKey(o,b);(!x||o[x]===void 0||m===!0||m===void 0&&o[x]!==!1)&&(o[x||d]=normalizeValue(u))}const l=(u,d)=>utils.forEach(u,(m,b)=>c(m,b,d));return utils.isPlainObject(e)||e instanceof this.constructor?l(e,n):utils.isString(e)&&(e=e.trim())&&!isValidHeaderName(e)?l(parseHeaders$1(e),n):e!=null&&c(n,e,a),this}get(e,n){if(e=normalizeHeader(e),e){const a=utils.findKey(this,e);if(a){const o=this[a];if(!n)return o;if(n===!0)return parseTokens(o);if(utils.isFunction(n))return n.call(this,o,a);if(utils.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=normalizeHeader(e),e){const a=utils.findKey(this,e);return!!(a&&(!n||matchHeaderValue(this,this[a],a,n)))}return!1}delete(e,n){const a=this;let o=!1;function c(l){if(l=normalizeHeader(l),l){const u=utils.findKey(a,l);u&&(!n||matchHeaderValue(a,a[u],u,n))&&(delete a[u],o=!0)}}return utils.isArray(e)?e.forEach(c):c(e),o}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const n=this,a={};return utils.forEach(this,(o,c)=>{const l=utils.findKey(a,c);if(l){n[l]=normalizeValue(o),delete n[c];return}const u=e?formatHeader(c):String(c).trim();u!==c&&delete n[c],n[u]=normalizeValue(o),a[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return utils.forEach(this,(a,o)=>{a!=null&&a!==!1&&(n[o]=e&&utils.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const a=new this(e);return n.forEach(o=>a.set(o)),a}static accessor(e){const a=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function c(l){const u=normalizeHeader(l);a[u]||(buildAccessors(o,l),a[u]=!0)}return utils.isArray(e)?e.forEach(c):c(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,e){const n=this||defaults$3,a=e||n,o=AxiosHeaders$1.from(a.headers);let c=a.data;return utils.forEach(t,function(u){c=u.call(n,c,o.normalize(),e?e.status:void 0)}),o.normalize(),c}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,e,n){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,e,n),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});const httpAdapter=null;function settle(t,e,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?t(n):e(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const cookies=platform.isStandardBrowserEnv?function t(){return{write:function(n,a,o,c,l,u){const d=[];d.push(n+"="+encodeURIComponent(a)),utils.isNumber(o)&&d.push("expires="+new Date(o).toGMTString()),utils.isString(c)&&d.push("path="+c),utils.isString(l)&&d.push("domain="+l),u===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(n){const a=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function t(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function buildFullPath(t,e){return t&&!isAbsoluteURL(e)?combineURLs(t,e):e}const isURLSameOrigin=platform.isStandardBrowserEnv?function t(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let a;function o(c){let l=c;return e&&(n.setAttribute("href",l),l=n.href),n.setAttribute("href",l),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return a=o(window.location.href),function(l){const u=utils.isString(l)?o(l):l;return u.protocol===a.protocol&&u.host===a.host}}():function t(){return function(){return!0}}();function parseProtocol(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function speedometer(t,e){t=t||10;const n=new Array(t),a=new Array(t);let o=0,c=0,l;return e=e!==void 0?e:1e3,function(d){const m=Date.now(),b=a[c];l||(l=m),n[o]=d,a[o]=m;let x=c,_=0;for(;x!==o;)_+=n[x++],x=x%t;if(o=(o+1)%t,o===c&&(c=(c+1)%t),m-l<e)return;const w=b&&m-b;return w?Math.round(_*1e3/w):void 0}}function progressEventReducer(t,e){let n=0;const a=speedometer(50,250);return o=>{const c=o.loaded,l=o.lengthComputable?o.total:void 0,u=c-n,d=a(u),m=c<=l;n=c;const b={loaded:c,total:l,progress:l?c/l:void 0,bytes:u,rate:d||void 0,estimated:d&&l&&m?(l-c)/d:void 0,event:o};b[e?"download":"upload"]=!0,t(b)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(n,a){let o=t.data;const c=AxiosHeaders$1.from(t.headers).normalize(),l=t.responseType;let u;function d(){t.cancelToken&&t.cancelToken.unsubscribe(u),t.signal&&t.signal.removeEventListener("abort",u)}utils.isFormData(o)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv)&&c.setContentType(!1);let m=new XMLHttpRequest;if(t.auth){const w=t.auth.username||"",S=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";c.set("Authorization","Basic "+btoa(w+":"+S))}const b=buildFullPath(t.baseURL,t.url);m.open(t.method.toUpperCase(),buildURL(b,t.params,t.paramsSerializer),!0),m.timeout=t.timeout;function x(){if(!m)return;const w=AxiosHeaders$1.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),T={data:!l||l==="text"||l==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:w,config:t,request:m};settle(function(C){n(C),d()},function(C){a(C),d()},T),m=null}if("onloadend"in m?m.onloadend=x:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(x)},m.onabort=function(){m&&(a(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,m)),m=null)},m.onerror=function(){a(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,m)),m=null},m.ontimeout=function(){let S=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const T=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(S=t.timeoutErrorMessage),a(new AxiosError(S,T.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,m)),m=null},platform.isStandardBrowserEnv){const w=(t.withCredentials||isURLSameOrigin(b))&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);w&&c.set(t.xsrfHeaderName,w)}o===void 0&&c.setContentType(null),"setRequestHeader"in m&&utils.forEach(c.toJSON(),function(S,T){m.setRequestHeader(T,S)}),utils.isUndefined(t.withCredentials)||(m.withCredentials=!!t.withCredentials),l&&l!=="json"&&(m.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&m.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&(u=w=>{m&&(a(!w||w.type?new CanceledError(null,t,m):w),m.abort(),m=null)},t.cancelToken&&t.cancelToken.subscribe(u),t.signal&&(t.signal.aborted?u():t.signal.addEventListener("abort",u)));const _=parseProtocol(b);if(_&&platform.protocols.indexOf(_)===-1){a(new AxiosError("Unsupported protocol "+_+":",AxiosError.ERR_BAD_REQUEST,t));return}m.send(o||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const adapters={getAdapter:t=>{t=utils.isArray(t)?t:[t];const{length:e}=t;let n,a;for(let o=0;o<e&&(n=t[o],!(a=utils.isString(n)?knownAdapters[n.toLowerCase()]:n));o++);if(!a)throw a===!1?new AxiosError(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!utils.isFunction(a))throw new TypeError("adapter is not a function");return a},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$3.adapter)(t).then(function(a){return throwIfCancellationRequested(t),a.data=transformData.call(t,t.transformResponse,a),a.headers=AxiosHeaders$1.from(a.headers),a},function(a){return isCancel(a)||(throwIfCancellationRequested(t),a&&a.response&&(a.response.data=transformData.call(t,t.transformResponse,a.response),a.response.headers=AxiosHeaders$1.from(a.response.headers))),Promise.reject(a)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,e){e=e||{};const n={};function a(m,b,x){return utils.isPlainObject(m)&&utils.isPlainObject(b)?utils.merge.call({caseless:x},m,b):utils.isPlainObject(b)?utils.merge({},b):utils.isArray(b)?b.slice():b}function o(m,b,x){if(utils.isUndefined(b)){if(!utils.isUndefined(m))return a(void 0,m,x)}else return a(m,b,x)}function c(m,b){if(!utils.isUndefined(b))return a(void 0,b)}function l(m,b){if(utils.isUndefined(b)){if(!utils.isUndefined(m))return a(void 0,m)}else return a(void 0,b)}function u(m,b,x){if(x in e)return a(m,b);if(x in t)return a(void 0,m)}const d={url:c,method:c,data:c,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:u,headers:(m,b)=>o(headersToObject(m),headersToObject(b),!0)};return utils.forEach(Object.keys(t).concat(Object.keys(e)),function(b){const x=d[b]||o,_=x(t[b],e[b],b);utils.isUndefined(_)&&x!==u||(n[b]=_)}),n}const VERSION$2="1.2.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{validators$1[t]=function(a){return typeof a===t||"a"+(e<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function t(e,n,a){function o(c,l){return"[Axios v"+VERSION$2+"] Transitional option '"+c+"'"+l+(a?". "+a:"")}return(c,l,u)=>{if(e===!1)throw new AxiosError(o(l," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[l]&&(deprecatedWarnings[l]=!0,console.warn(o(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(c,l,u):!0}};function assertOptions(t,e,n){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const c=a[o],l=e[c];if(l){const u=t[c],d=u===void 0||l(u,c,t);if(d!==!0)throw new AxiosError("option "+c+" must be "+d,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+c,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mergeConfig(this.defaults,n);const{transitional:a,paramsSerializer:o,headers:c}=n;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!==void 0&&validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l;l=c&&utils.merge(c.common,c[n.method]),l&&utils.forEach(["delete","get","head","post","put","patch","common"],S=>{delete c[S]}),n.headers=AxiosHeaders$1.concat(l,c);const u=[];let d=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(n)===!1||(d=d&&T.synchronous,u.unshift(T.fulfilled,T.rejected))});const m=[];this.interceptors.response.forEach(function(T){m.push(T.fulfilled,T.rejected)});let b,x=0,_;if(!d){const S=[dispatchRequest.bind(this),void 0];for(S.unshift.apply(S,u),S.push.apply(S,m),_=S.length,b=Promise.resolve(n);x<_;)b=b.then(S[x++],S[x++]);return b}_=u.length;let w=n;for(x=0;x<_;){const S=u[x++],T=u[x++];try{w=S(w)}catch(B){T.call(this,B);break}}try{b=dispatchRequest.call(this,w)}catch(S){return Promise.reject(S)}for(x=0,_=m.length;x<_;)b=b.then(m[x++],m[x++]);return b}getUri(e){e=mergeConfig(this.defaults,e);const n=buildFullPath(e.baseURL,e.url);return buildURL(n,e.params,e.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function t(e){Axios.prototype[e]=function(n,a){return this.request(mergeConfig(a||{},{method:e,url:n,data:(a||{}).data}))}});utils.forEach(["post","put","patch"],function t(e){function n(a){return function(c,l,u){return this.request(mergeConfig(u||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:c,data:l}))}}Axios.prototype[e]=n(),Axios.prototype[e+"Form"]=n(!0)});const Axios$1=Axios;class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(c){n=c});const a=this;this.promise.then(o=>{if(!a._listeners)return;let c=a._listeners.length;for(;c-- >0;)a._listeners[c](o);a._listeners=null}),this.promise.then=o=>{let c;const l=new Promise(u=>{a.subscribe(u),c=u}).then(o);return l.cancel=function(){a.unsubscribe(c)},l},e(function(c,l,u){a.reason||(a.reason=new CanceledError(c,l,u),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new CancelToken(function(o){e=o}),cancel:e}}}const CancelToken$1=CancelToken;function spread(t){return function(n){return t.apply(null,n)}}function isAxiosError(t){return utils.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,e])=>{HttpStatusCode[e]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const e=new Axios$1(t),n=bind(Axios$1.prototype.request,e);return utils.extend(n,Axios$1.prototype,e,{allOwnKeys:!0}),utils.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return createInstance(mergeConfig(t,o))},n}const axios=createInstance(defaults$3);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION$2;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function t(e){return Promise.all(e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils.isHTMLForm(t)?new FormData(t):t);axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;async function importerJSONdURL(t){return await(await axios$1.get(t)).data}async function importerFeuilleCalculDURL(t,e){const a=(await axios$1.get(t,{responseType:"arraybuffer"})).data,c=Object.assign({type:"buffer",cellDates:!0},e||{});return readSync(a,c)}class ImportateurFeuilleCalcul{constructor(e){lt(this,"doc");this.doc=e}obtNomsTableaux(){return this.doc.SheetNames}obtColsTableau(e){const n=this.doc.Sheets[e];return utils$1.sheet_to_json(n,{header:1})[0]}obtDonnées(e,n){const a=this.doc.Sheets[e],o=utils$1.sheet_to_json(a);if(Array.isArray(n))return o.map(c=>Object.fromEntries(Object.keys(c).filter(l=>n.includes(l)).map(l=>[l,c[l]])));{const c=Object.fromEntries(Object.entries(n).map(([l,u])=>[u,l]));return o.map(l=>Object.fromEntries(Object.keys(l).filter(u=>Object.keys(c).includes(u)).map(u=>[c[u],l[u]])))}}}const copieProfonde=t=>JSON.parse(JSON.stringify(t)),estUnDic=t=>typeof t=="object"&&!Array.isArray(t),estUneListe=t=>Array.isArray(t),extraireBranches=(t,e)=>{let n;if(!e.length)return n=estUnDic(t)?Object.values(t):t,{base:{},branches:n};const a=extraireDonnées(t,e.slice(0,e.length-1)),o=e[e.length-1];let c;if(typeof o=="number")if(estUneListe(a)){const l=a[o];if(typeof l!="object")throw new Error(l.toString());c=l,delete a[o]}else throw new Error(`${o} ne peut pas indexer une liste.`);else if(typeof o=="string")if(estUnDic(a)){const l=a[o];if(typeof l!="object")throw new Error(l.toString());c=l,delete a[o]}else throw new Error(`${o} ne peut pas indexer un objet.`);else throw new Error(`${o} n'est pas une clef valide.`);if(estUnDic(c))n=Object.values(c);else if(estUneListe(c))n=c;else throw Error(JSON.stringify(c));return{base:t,branches:n}},injecterBranche=(t,e,n)=>{if(!e.length)Object.assign(t,n);else{const a=e.slice(1,e.length),o=extraireDonnées(t,a),c=e[e.length-1];if(typeof c=="number")if(estUneListe(o))o[c]=n;else throw new Error(`${c} ne peut pas indexer une liste.`);else if(typeof c=="string")if(estUnDic(o))o[c]=n;else throw new Error(`${c} ne peut pas indexer un objet.`);else throw new Error(`${c} n'est pas une clef valide.`)}},aplatirDonnées=(t,e=[],n,a=[])=>{e[e.length-1]!==null&&e.push(null);const o=e.indexOf(null),c=e.slice(0,o),l=e.slice(o+1,e.length),{base:u,branches:d}=extraireBranches(t,c);for(const m of d){if(typeof m!="object")throw new Error(m.toString());const b=copieProfonde(u);injecterBranche(b,c,m),l.length?aplatirDonnées(m,l,b,a):a.push(b)}return a},extraireDonnées=(t,e)=>{let n=t;for(const a of e)if(typeof a=="number")if(estUneListe(n))n=n[a];else throw new Error(`${a} ne peut pas indexer une liste.`);else if(typeof a=="string")if(estUnDic(n))n=n[a];else throw new Error(`${a} ne peut pas indexer un objet.`);else throw new Error(`Clef de type non indexable : ${a}`);return n};class ImportateurDonnéesJSON{constructor(e){lt(this,"donnéesJSON");this.donnéesJSON=e}obtDonnées(e,n,a){let o=[],c=extraireDonnées(this.donnéesJSON,e);if(typeof c!="object")throw new Error(`Type de données erroné : ${c.toString()}`);c=aplatirDonnées(c,n);for(const l of c){if(typeof l!="object")throw new Error(`Élément de type non supporté : ${l}`);o=[Object.fromEntries(Object.keys(a).map(d=>{const m=a[d];let b;try{b=extraireDonnées(l,m)}catch{b=void 0}return[d,b]}).filter(d=>d[1]!==void 0)),...o]}return o}}set_fs(fs__default);const obtTempsInterval=t=>{const{n:e,unités:n}=t;switch(n){case"années":return e*365.25*24*60*60*1e3;case"mois":return e*30*24*60*60*1e3;case"semaines":return e*7*24*60*60*1e3;case"jours":return e*24*60*60*1e3;case"heures":return e*60*60*1e3;case"minutes":return e*60*1e3;case"secondes":return e*1e3;case"millisecondes":return e;default:throw new Error(n)}},obtDonnéesImportation=async t=>{const{typeSource:e}=t.source,{formatDonnées:n}=t.source.info;switch(e){case"url":{const{url:a}=t.source;switch(n){case"json":{const{clefsRacine:o,clefsÉléments:c,cols:l}=t.source.info,u=await importerJSONdURL(a);return new ImportateurDonnéesJSON(u).obtDonnées(o,c,l)}case"feuilleCalcul":{const{nomTableau:o,cols:c,optionsXLSX:l}=t.source.info,u=await importerFeuilleCalculDURL(a,l);return new ImportateurFeuilleCalcul(u).obtDonnées(o,c)}default:throw new Error(n)}}case"fichier":{const{adresseFichier:a}=t.source;switch(n){case"json":{const{clefsRacine:o,clefsÉléments:c,cols:l}=t.source.info,u=await fs__default.promises.readFile(a),d=JSON.parse(u.toString());return new ImportateurDonnéesJSON(d).obtDonnées(o,c,l)}case"feuilleCalcul":{const{nomTableau:o,cols:c}=t.source.info,l=readFileSync(a);return new ImportateurFeuilleCalcul(l).obtDonnées(o,c)}default:throw new Error(n)}}default:throw new Error(e)}},générerFExportation=(t,e)=>async()=>{switch(t.typeObjet){case"tableau":{const n=await e.tableaux.exporterDonnées({idTableau:t.idObjet,langues:t.langues});await e.bds.exporterDocumentDonnées({données:n,formatDoc:t.formatDoc,dir:t.dir,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"bd":{const n=await e.bds.exporterDonnées({id:t.idObjet,langues:t.langues});await e.bds.exporterDocumentDonnées({données:n,formatDoc:t.formatDoc,dir:t.dir,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"projet":{const n=await e.projets.exporterDonnées({id:t.idObjet,langues:t.langues});await e.projets.exporterDocumentDonnées({données:n,formatDoc:t.formatDoc,dir:t.dir,inclureFichiersSFIP:t.inclureFichiersSFIP});break}default:throw new Error(t.typeObjet)}},générerFAuto=(t,e)=>{switch(t.type){case"importation":return async()=>{const n=t,a=await obtDonnéesImportation(n);await e.tableaux.importerDonnées({idTableau:n.idTableau,données:a})};case"exportation":return générerFExportation(t,e);default:throw new Error(t.type)}},lancerAutomatisation=async({spéc:t,idSpéc:e,client:n,fÉtat:a})=>{const o=générerFAuto(t,n),c=`auto: ${e}`,l=t.fréquence?obtTempsInterval(t.fréquence):void 0,u=new src$4;let d="";const m=async b=>{const x=await n.obtDeStockageLocal({clef:c});if(b===x)return;if(d=b,await u.acquire("opération"),b!==d){u.release("opération");return}await n.sauvegarderAuStockageLocal({clef:c,val:b});const _={type:"sync",depuis:new Date().getTime()};a(_);try{if(await o(),l){const w={type:"programmée",à:Date.now()+l};a(w)}else a({type:"écoute"})}catch(w){const S={type:"erreur",erreur:w.toString(),prochaineProgramméeÀ:l?Date.now()+l:void 0};a(S)}u.release("opération")};if(t.fréquence){a({type:"programmée",à:l});const x={},_=async()=>{const z=new Date().getTime();await m(z.toString());const U=setTimeout(_,l);x.f=async()=>clearTimeout(U)},w=new Date().getTime(),S=await n.obtDeStockageLocal({clef:c}),T=S?parseInt(S):-1/0,B=w-T,C=setTimeout(_,Math.max(l-B,0));return x.f=async()=>clearTimeout(C),async()=>{x.f&&await x.f()}}else switch(a({type:"écoute"}),t.type){case"exportation":{const x=t;return await n.suivreEmpreinteTêtesBdRécursive({idBd:x.idObjet,f:m})}case"importation":{const x=t;switch(x.source.typeSource){case"fichier":{if(!isNode&&!isElectronMain)throw new Error("L'automatisation de l'importation des fichiers locaux n'est pas disponible sur la version apli internet de Constellation.");const _=await __vitePreload(()=>import("chokidar"),[]),w=x.source,S=_.watch(w.adresseFichier);S.on("change",async()=>{const z=new Date().getTime().toString();m(z)});const T=fs__default.statSync(w.adresseFichier).mtime.getTime(),B=await n.obtDeStockageLocal({clef:c});if(B?T>parseInt(B):!0){const z=new Date().getTime().toString();m(z)}return async()=>await S.close()}case"url":return a({type:"erreur",erreur:"La fréquence d'une automatisation d'importation d'URL doit être spécifiée.",prochaineProgramméeÀ:void 0}),faisRien;default:throw new Error(x.source.typeSource)}}default:throw new Error(t.type)}};class AutomatisationActive extends eventsExports.EventEmitter{constructor(n,a,o){super();lt(this,"client");lt(this,"idSpéc");lt(this,"état");lt(this,"fOublier");this.client=o,lancerAutomatisation({spéc:n,idSpéc:a,client:this.client,fÉtat:c=>{this.état=c,this.emit("misÀJour")}}).then(c=>{this.fOublier=c,this.emit("prêt")})}async fermer(){this.fOublier||await new Promise(n=>{this.once("prêt",()=>{n()})}),this.fOublier()}}const activePourCeDispositif=(t,e)=>{switch(t.type){case"importation":return t.dispositif===e;case"exportation":return t.dispositifs.includes(e);default:throw new Error(t.type)}},verrou=new src$4;class Automatisations extends eventsExports.EventEmitter{constructor({client:n,id:a}){super();lt(this,"client");lt(this,"idBd");lt(this,"automatisations");lt(this,"fOublier");this.client=n,this.idBd=a,this.automatisations={},this.initialiser()}async initialiser(){this.fOublier=await this.client.suivreBdListe({id:this.idBd,f:n=>this.mettreAutosÀJour(n),renvoyerValeur:!1})}async mettreAutosÀJour(n){await verrou.acquire("miseÀJour");const a=Object.keys(this.automatisations);for(const o of a)n.find(c=>c.payload.value.id===o)||await this.fermerAuto(o);for(const o of n){const{payload:{value:c}}=o;if(activePourCeDispositif(c,this.client.orbite.identity.id)){if(!Object.keys(this.automatisations).includes(c.id)){const l=new AutomatisationActive(c,c.id,this.client);l.on("misÀJour",()=>this.emit("misÀJour")),this.automatisations[c.id]=l}}else this.automatisations[c.id]&&await this.fermerAuto(c.id)}verrou.release("miseÀJour")}async ajouterAutomatisationExporter({id:n,typeObjet:a,formatDoc:o,inclureFichiersSFIP:c,dir:l,langues:u,fréquence:d,dispositifs:m}){m=m||[this.client.orbite.identity.id];const b=v4(),x={type:"exportation",id:b,idObjet:n,typeObjet:a,dispositifs:m,fréquence:d,formatDoc:o,langues:u,inclureFichiersSFIP:c,dir:l};Object.keys(x).forEach(S=>{x[S]===void 0&&delete x[S]});const{bd:_,fOublier:w}=await this.client.ouvrirBd({id:this.idBd});return await _.add(x),await w(),b}async ajouterAutomatisationImporter({idTableau:n,source:a,fréquence:o,dispositif:c}){const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:this.idBd});c=c||this.client.orbite.identity.id;const d=v4(),m={type:"importation",id:d,idTableau:n,dispositif:c,fréquence:o,source:a};return Object.keys(m).forEach(b=>{m[b]===void 0&&delete m[b]}),await l.add(m),await u(),d}async annulerAutomatisation({id:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:a,élément:c=>c.payload.value.id===n}),await o()}async suivreAutomatisations({f:n,idRacine:a}){return a=a||this.idBd,await this.client.suivreBdListe({id:a,f:n})}async suivreÉtatAutomatisations({f:n}){const a=()=>{const o=Object.fromEntries(Object.keys(this.automatisations).map(c=>[c,this.automatisations[c].état]).filter(c=>c[1]));n(o)};return this.on("misÀJour",a),async()=>{this.off("misÀJour",a)}}async fermerAuto(n){await this.automatisations[n].fermer(),delete this.automatisations[n]}async fermer(){await Promise.all(Object.keys(this.automatisations).map(n=>{this.fermerAuto(n)})),this.fOublier&&await this.fOublier()}}let _localStorage;class LocalStorage{constructor(e){lt(this,"fichier");lt(this,"_données");lt(this,"_événements");lt(this,"_idRequèteSauvegarde");lt(this,"verrou");lt(this,"fOublier");this.fichier=path.join(e,"données.json"),this._événements=new eventsExports.EventEmitter,this.verrou=new src$4;try{this._données=JSON.parse(readFileSync$1(this.fichier).toString())}catch{this._données={}}const n=()=>{const a=v4();this._idRequèteSauvegarde=a,this.sauvegarder(a)};this._événements.on("sauvegarder",n),this.fOublier=()=>this._événements.off("sauvegarder",n)}getItem(e){return this._données[e]}setItem(e,n){this._données[e]=n,this.demanderSauvegarde()}demanderSauvegarde(){this._événements.emit("sauvegarder")}removeItem(e){delete this._données[e],this.demanderSauvegarde()}async sauvegarder(e){if(await this.verrou.acquire("sauvegarder"),this._idRequèteSauvegarde!==e){this.verrou.release("sauvegarder");return}await writeFile(this.fichier,JSON.stringify(this._données)),this.verrou.release("sauvegarder")}async fermer(){await this.verrou.acquire("sauvegarder"),this.fOublier&&this.fOublier(),this.verrou.release("sauvegarder")}}const obtStockageLocal=async t=>{if(typeof localStorage>"u"||localStorage===null){if(_localStorage)return _localStorage;let e;if(isElectronMain){const n=await __vitePreload(()=>import("./index-d08e16fc.js").then(a=>a.i),[]);e=t||path.join(n.default.app.getPath("userData"),"_stockageTemp")}else e=t||path.join(".","_stockageTemp");return _localStorage=new LocalStorage(e),_localStorage}else return t&&console.warn("Vous avez spécifié un dossier de stockage local mais votre choix sera ignoré car nous sommes dans le navigateur."),localStorage},verrouOuvertureBd=new src$4,DÉLAI_EXPIRATION_INVITATIONS=1e3*60*5;class ClientConstellation extends eventsExports.EventEmitter{constructor(n={}){super();lt(this,"_opts");lt(this,"optionsAccès");lt(this,"bdCompte");lt(this,"_bds");lt(this,"orbite");lt(this,"sfip");lt(this,"idNodeSFIP");lt(this,"épingles");lt(this,"profil");lt(this,"bds");lt(this,"tableaux");lt(this,"variables");lt(this,"réseau");lt(this,"favoris");lt(this,"projets");lt(this,"recherche");lt(this,"motsClefs");lt(this,"automatisations");lt(this,"nuées");lt(this,"_oublierNettoyageBdsOuvertes");lt(this,"_orbiteExterne");lt(this,"_sfipExterne");lt(this,"prêt");lt(this,"idBdCompte");lt(this,"encryption");lt(this,"sujet_réseau");lt(this,"motsDePasseRejoindreCompte");enregistrerContrôleurs(),this._opts=n,this._bds={},this.prêt=!1,this.sujet_réseau=n.sujetRéseau||"réseau-constellation",this.motsDePasseRejoindreCompte={},this._orbiteExterne=this._sfipExterne=!1,this.encryption=new EncryptionLocalFirst}async initialiser(){const{sfip:n,orbite:a}=await this._générerSFIPetOrbite();this.sfip=n,this.orbite=a,this.idNodeSFIP=await this.sfip.id();const o={type:"controlleur-constellation",premierMod:this.orbite.identity.id,nom:"racine"};this.idBdCompte=this._opts.compte,this.idBdCompte||(this.idBdCompte=await this.créerBdIndépendante({type:"kvstore",optionsAccès:o,nom:"racine"})),this.épingles=new Épingles({client:this}),this._oublierNettoyageBdsOuvertes=this._lancerNettoyageBdsOuvertes(),await this.initialiserCompte(),this.prêt=!0,this.emit("prêt")}async _générerSFIPetOrbite(){const{orbite:n}=this._opts;let a,o;const c=async l=>{if(l?.sfip)return this._sfipExterne=!0,l.sfip;{const u=(await __vitePreload(()=>import("./index-78d7a28a.js").then(d=>d.o),[])).default;return await u(l?.dossier)}};if(n)if(n instanceof OrbitDB)this._sfipExterne=this._orbiteExterne=!0,a=n._ipfs,o=n;else{const l=(await __vitePreload(()=>import("./orbite-59572136.js"),[])).default;a=await c(n.sfip),o=await l(a,n.dossier)}else{a=await c();const l=(await __vitePreload(()=>import("./orbite-59572136.js"),[])).default;o=await l(a)}return{sfip:a,orbite:o}}_lancerNettoyageBdsOuvertes(){const a=setInterval(async()=>{await Promise.all(Object.keys(this._bds).map(async o=>{const{bd:c,idsRequètes:l}=this._bds[o];l.size||(delete this._bds[o],await c.close())}))},3e5);return async()=>clearInterval(a)}async initialiserCompte(){const{bd:n}=await this.ouvrirBd({id:this.idBdCompte});this.bdCompte=n;const a=this.bdCompte.access;this.optionsAccès={type:"controlleur-constellation",address:a.bd.id};const o=await this.obtIdBd({nom:"compte",racine:this.bdCompte,type:"kvstore"});this.profil=new Profil({client:this,id:o});const c=await this.obtIdBd({nom:"bds",racine:this.bdCompte,type:"feed"});this.bds=new BDs({client:this,id:c}),this.tableaux=new Tableaux({client:this});const l=await this.obtIdBd({nom:"variables",racine:this.bdCompte,type:"feed"});this.variables=new Variables({client:this,id:l});const u=await this.obtIdBd({nom:"réseau",racine:this.bdCompte,type:"kvstore"});this.réseau=new Réseau({client:this,id:u}),await this.réseau.initialiser();const d=await this.obtIdBd({nom:"favoris",racine:this.bdCompte,type:"kvstore"});this.favoris=new Favoris({client:this,id:d});const m=await this.obtIdBd({nom:"projets",racine:this.bdCompte,type:"feed"});this.projets=new Projets({client:this,id:m});const b=await this.obtIdBd({nom:"motsClefs",racine:this.bdCompte,type:"feed"});this.motsClefs=new MotsClefs({client:this,id:b});const x=await this.obtIdBd({nom:"automatisations",racine:this.bdCompte,type:"feed"});this.automatisations=new Automatisations({client:this,id:x});const _=await this.obtIdBd({nom:"nuées",racine:this.bdCompte,type:"feed"});this.nuées=new Nuée({client:this,id:_}),this.recherche=new Recherche({client:this}),this.épingles.épinglerBd({id:o});for(const w of[c,l,u,d,m,b,x])this.épingles.épinglerBd({id:w,récursif:!1,fichiers:!1})}async signer({message:n}){const a=this.orbite.identity,o=await this.orbite.identity.provider.sign(a,n),c=this.orbite.identity.publicKey;return{signature:o,clefPublique:c}}async vérifierSignature({signature:n,message:a}){return!n||!n.clefPublique||!n.signature?!1:await this.orbite.identity.provider.verify(n.signature,n.clefPublique,a)}async suivreDispositifs({f:n,idBdCompte:a}){a=a||this.bdCompte.id;const{bd:o,fOublier:c}=await this.ouvrirBd({id:a}),l=o.access,u=l.constructor.type;if(u==="ipfs")return await n(l.write),await c(),faisRien;if(u==="controlleur-constellation"){const d=async()=>{const m=l.gestRôles._rôles[MODÉRATEUR];await n(m)};return l.on("misÀJour",d),d(),async()=>{l.off("misÀJour",d),await c()}}else return await c(),faisRien}async générerInvitationRejoindreCompte(){const n=await this.obtIdCompte(),a=this.encryption.clefAléatoire();return this.motsDePasseRejoindreCompte[a]=Date.now(),{idCompte:n,codeSecret:a}}async considérerRequèteRejoindreCompte({requète:n}){const{idOrbite:a,codeSecret:o}=n,c=Date.now();(this.motsDePasseRejoindreCompte[o]||-1/0)-c<DÉLAI_EXPIRATION_INVITATIONS&&(delete this.motsDePasseRejoindreCompte[o],await this.ajouterDispositif({idOrbite:a}))}async demanderEtPuisRejoindreCompte({idCompte:n,codeSecret:a}){await this.réseau.envoyerDemandeRejoindreCompte({idCompte:n,codeSecret:a}),await this.rejoindreCompte({idBdCompte:n})}async ajouterDispositif({idOrbite:n}){this.bdCompte||await once_1(this,"prêt"),this.bdCompte.access.grant(MODÉRATEUR,n)}async enleverDispositif({idOrbite:n}){this.bdCompte||await once_1(this,"prêt"),await this.bdCompte.access.revoke(MODÉRATEUR,n)}async rejoindreCompte({idBdCompte:n}){if(!adresseOrbiteValide(n))throw new Error(`Adresse compte ${n} non valide`);let a;const{bd:o,fOublier:c}=await this.ouvrirBd({id:n}),u=await o.access.suivreIdsOrbiteAutoriséesÉcriture(d=>a=d.includes(this.orbite.identity.id));await new Promise(d=>{const m=async()=>{a&&(clearInterval(b),await u(),await c(),d())},b=setInterval(()=>{m()},10);m()}),this.idBdCompte=n,await this.fermerCompte(),await this.initialiserCompte(),this.emit("compteChangé")}async donnerAccès({idBd:n,identité:a,rôle:o=MEMBRE}){if(!adresseOrbiteValide(a))throw new Error(`Identité ${a} non valide.`);const{bd:c,fOublier:l}=await this.ouvrirBd({id:n}),u=c.access;u.constructor.type===nomType&&u.grant(o,a),await l()}async suivreIdBdCompte({f:n}){const a=()=>{this.idBdCompte&&n(this.idBdCompte)};return this.on("compteChangé",a),a(),async()=>{this.off("compteChangé",a)}}async obtIdSFIP(){return this.idNodeSFIP||await once_1(this,"prêt"),this.idNodeSFIP}async obtIdOrbite(){return this.orbite||await once_1(this,"prêt"),this.orbite.identity.id}async obtIdentitéOrbite(){return this.orbite||await once_1(this,"prêt"),this.orbite.identity}async obtIdCompte(){return this.idBdCompte||await once_1(this,"prêt"),this.idBdCompte}async copierContenuBdListe({bdBase:n,nouvelleBd:a,clef:o}){const c=n.get(o);if(typeof c!="string")return;const{bd:l,fOublier:u}=await this.ouvrirBd({id:c}),d=a.get(o);if(!d)throw new Error("La nouvelle BD n'existait pas.");if(typeof d!="string")throw new Error(`${d} n'est pas une adresse Orbite.`);const{bd:m,fOublier:b}=await this.ouvrirBd({id:d}),x=ClientConstellation.obtÉlémentsDeBdListe({bd:l});await Promise.all(x.map(async _=>{await m.add(_)})),u(),b()}async combinerBds({idBdBase:n,idBd2:a}){const{bd:o,fOublier:c}=await this.ouvrirBd({id:n}),{bd:l,fOublier:u}=await this.ouvrirBd({id:a});if(l.type!==o.type)throw new Error("Les BDs doivent être du même type");switch(o.type){case"keyvalue":await this.combinerBdsDict({bdBase:o,bd2:l});break;case"feed":await this.combinerBdsListe({bdBase:o,bd2:l});break;default:throw new Error(`Type de BD ${o.type} non supporté.`)}c(),u()}async combinerBdsDict({bdBase:n,bd2:a}){const o=ClientConstellation.obtObjetdeBdDic({bd:a});for(const[c,l]of Object.entries(o)){const u=n.get(c);u!==l&&(u===void 0?await n.put(c,l):adresseOrbiteValide(u)&&adresseOrbiteValide(l)&&await this.combinerBds({idBdBase:u,idBd2:l}))}}async combinerBdsListe({bdBase:n,bd2:a,index:o}){const c=ClientConstellation.obtÉlémentsDeBdListe({bd:n,renvoyerValeur:!1}),l=ClientConstellation.obtÉlémentsDeBdListe({bd:a,renvoyerValeur:!1});for(const u of l){const d=u.payload.value;if(o){if(typeof d!="object")throw new Error(`Erreur combinaison listes : ${typeof d}`);const m=c.find(b=>typeof b.payload.value=="object"&&o.every(x=>b.payload.value[x]===d[x]));if(!m)await n.add(d);else{const b=m.payload.value;if(!deepEqual$2(b,d)){const x=Object.assign({},b);for(const[_,w]of Object.entries(d))x[_]===void 0?x[_]=w:deepEqual$2(x[_],w)||adresseOrbiteValide(x[_])&&adresseOrbiteValide(w)&&await this.combinerBds({idBdBase:x[_],idBd2:w});await n.remove(m.hash),await n.add(x)}}}else c.some(m=>deepEqual$2(m.payload.value,d))||await n.add(d)}}async suivreBd({id:n,f:a,événements:o=["write","replicated","ready"]}){const c=[],l={};let u=!1;const d=()=>{this.ouvrirBd({id:n}).then(({bd:b,fOublier:x})=>{c.push(x);const _=()=>{const w=v4(),S=a(b);S&&S.then&&(l[w]=S,S.then(()=>{delete l[w]}))};for(const w of o)b.events.on(w,_),c.push(async()=>{b.events.off(w,_)}),w==="write"&&b.events.listenerCount("write")>b.events.getMaxListeners();_()}).catch(b=>{if(!u)if(String(b).includes("ipfs unable to find"))d();else throw new Error(b)})};return d(),async()=>{u=!0,await Promise.all(c.map(b=>b())),await Promise.all(Object.values(l))}}async suivreBdDeFonction({fRacine:n,f:a,fSuivre:o}){let c,l,u=!0;const d=await n({fSuivreRacine:async m=>{m===void 0&&u&&(u=!1,await a(void 0)),m!==l&&(l=m,c&&await c(),l?c=await o({id:l,fSuivreBd:a}):(await a(void 0),c=void 0))}});return async()=>{await d(),c&&await c()}}async suivreBdDeClef({id:n,clef:a,f:o,fSuivre:c}){const l=async({fSuivreRacine:u})=>{const d=async m=>{const b=m.get(a);await u(b)};return await this.suivreBd({id:n,f:d})};return await this.suivreBdDeFonction({fRacine:l,f:o,fSuivre:c})}async suivreBdDic({id:n,f:a}){const o=async c=>{const l=c?ClientConstellation.obtObjetdeBdDic({bd:c}):{};await a(l)};return await this.suivreBd({id:n,f:o})}async suivreBdDicDeClef({id:n,clef:a,f:o}){const c=async u=>{await o(u||{})},l=async({id:u,fSuivreBd:d})=>await this.suivreBdDic({id:u,f:d});return await this.suivreBdDeClef({id:n,clef:a,f:c,fSuivre:l})}static obtObjetdeBdDic({bd:n}){const a=n.all;return Object.fromEntries(Object.keys(a).map(o=>[o,a[o]]))}async suivreBdListeDeClef({id:n,clef:a,f:o,renvoyerValeur:c=!0}){if(c){const l=async d=>{await o(d||[])},u=async({id:d,fSuivreBd:m})=>await this.suivreBdListe({id:d,f:m,renvoyerValeur:c});return await this.suivreBdDeClef({id:n,clef:a,f:l,fSuivre:u})}else{const l=async d=>{await o(d||[])},u=async({id:d,fSuivreBd:m})=>await this.suivreBdListe({id:d,f:m,renvoyerValeur:!1});return await this.suivreBdDeClef({id:n,clef:a,f:l,fSuivre:u})}}async suivreBdListe({id:n,f:a,renvoyerValeur:o=!0}){return await this.suivreBd({id:n,f:async c=>{const l=ClientConstellation.obtÉlémentsDeBdListe({bd:c,renvoyerValeur:o});await a(l)}})}static obtÉlémentsDeBdListe({bd:n,renvoyerValeur:a=!0}){const o=n.iterator({limit:-1}).collect();return a?o.map(c=>c.payload.value):o}obtÉlémentBdListeSelonEmpreinte({bd:n,empreinte:a}){return n.iterator({limit:-1}).collect().find(c=>c.hash===a)?.payload.value}async effacerÉlémentDeBdListe({bd:n,élément:a}){const o=n.iterator({limit:-1}).collect().find(c=>typeof a=="function"?a(c):deepEqual$2(c.payload.value,a));o&&await n.remove(o.hash)}async suivreTypeObjet({idObjet:n,f:a}){const o=async l=>{let u;const{type:d}=l;d?u=["motClef","variable","bd","projet"].includes(d)?d:void 0:l.bds?u="projet":l.tableaux?u="bd":l.catégorie?u="variable":l.nom&&(u="motClef"),await a(u)};return await this.suivreBdDic({id:n,f:o})}async suivreEmpreinteTêtesBdRécursive({idBd:n,f:a}){const o=m=>m._oplog.heads[m._oplog.heads.length-1]?.hash,c=m=>crypto$5.createHash("md5").update(m).digest("hex"),l=async m=>{await a(c(m.sort().join()))},u=async m=>await this.suivreBdsRécursives({idBd:n,f:async b=>await m(b)}),d=async(m,b)=>await this.suivreBd({id:m,f:async x=>{const _=o(x);_&&await b(_)}});return await this.suivreBdsDeFonctionListe({fListe:u,f:l,fBranche:d})}async suivreBdsDeBdListe({id:n,f:a,fBranche:o,fIdBdDeBranche:c=d=>d,fRéduction:l=d=>[...new Set(d.flat())],fCode:u=d=>d}){const d=async m=>await this.suivreBdListe({id:n,f:m});return await this.suivreBdsDeFonctionListe({fListe:d,f:a,fBranche:o,fIdBdDeBranche:c,fRéduction:l,fCode:u})}async suivreBdsDeFonctionListe({fListe:n,f:a,fBranche:o,fIdBdDeBranche:c=d=>d,fRéduction:l=d=>[...new Set(d.flat())],fCode:u=d=>d}){const d={},m={};let b=!1;const x=async()=>{const C=Object.values(d).map(z=>z.données).filter(z=>z!==void 0),D=l(C);b&&await a(D)},_=new src$4,S=await n(async C=>{if(await _.acquire("racine"),C.some(O=>typeof u(O)!="string"))throw console.error("Définir fCode si les éléments ne sont pas en format texte (chaînes)."),new Error("Définir fCode si les éléments ne sont pas en format texte (chaînes).");const D=Object.fromEntries(C.map(O=>[u(O),O])),z=Object.keys(d);let U=Object.keys(D).filter(O=>!z.includes(O));const Y=z.filter(O=>!Object.keys(D).includes(O)),X=Object.entries(D).filter(O=>!deepEqual$2(m[O[0]],O[1])).map(O=>O[0]);U.push(...X),U=[...new Set(U)];for(const O of X)if(d[O]){const J=d[O].fOublier;J&&await J(),delete d[O]}for(const O of Y){const J=d[O].fOublier;J&&await J(),delete d[O],x()}await Promise.all(U.map(async O=>{d[O]={données:void 0};const J=D[O];m[O]=J;const Z=c(J),ie=await o(Z,F=>{d[O].données=F,x()},J);d[O].fOublier=ie})),b=!0,x(),_.release("racine")});let T;const B=async()=>{await T(),await Promise.all(Object.values(d).filter(C=>C.fOublier).map(C=>C.fOublier()))};return typeof S=="function"?(T=S,B):(T=S.fOublier,Object.assign({},S,{fOublier:B}))}async suivreBdsDeFonctionRecherche({fListe:n,f:a,fBranche:o,fIdBdDeBranche:c=d=>d,fRéduction:l=d=>[...new Set(d.flat())],fCode:u=d=>d}){let d;const m=async _=>{d&&await d(_)},b=async _=>{const{fOublier:w,fChangerProfondeur:S}=await n(_);return d=S,w};return{fOublier:await this.suivreBdsDeFonctionListe({fListe:b,f:a,fBranche:o,fIdBdDeBranche:c,fRéduction:l,fCode:u}),fChangerProfondeur:m}}async suivreBdSelonCondition({fRacine:n,fCondition:a,f:o}){const c=async({id:l,fSuivreBd:u})=>await a(l,async d=>{u(d?l:void 0)});return await this.suivreBdDeFonction({fRacine:async({fSuivreRacine:l})=>await n(l),f:o,fSuivre:c})}async suivreBdsSelonCondition({fListe:n,fCondition:a,f:o}){const c=async u=>{const d=u.filter(m=>m.état).map(m=>m.id);await o(d)},l=async(u,d)=>await a(u,async b=>{await d({id:u,état:b})});return await this.suivreBdsDeFonctionListe({fListe:n,f:c,fBranche:l})}async rechercherBdListe({id:n,f:a}){const{bd:o,fOublier:c}=await this.ouvrirBd({id:n}),l=o.iterator({limit:-1}).collect().find(u=>a(u));return await c(),l}async obtFichierSFIP({id:n,max:a}){return await toBuffer$1(this.sfip.cat(n),a)}obtItérableAsyncSFIP({id:n}){return this.sfip.cat(n)}async ajouterÀSFIP({fichier:n}){return(await this.sfip.add(n)).cid.toString()}async obtDeStockageLocal({clef:n}){const a=`${this.idBdCompte.slice(this.idBdCompte.length-23,this.idBdCompte.length-8)} : ${n}`;return(await obtStockageLocal(this._opts.dossierStockageLocal||this.orbite.directory)).getItem(a)}async sauvegarderAuStockageLocal({clef:n,val:a}){const o=`${this.idBdCompte.slice(this.idBdCompte.length-23,this.idBdCompte.length-8)} : ${n}`;return(await obtStockageLocal(this._opts.dossierStockageLocal)).setItem(o,a)}async effacerDeStockageLocal({clef:n}){const a=`${this.idBdCompte.slice(this.idBdCompte.length-23,this.idBdCompte.length-8)} : ${n}`;return(await obtStockageLocal(this._opts.dossierStockageLocal)).removeItem(a)}async ouvrirBd({id:n}){if(!adresseOrbiteValide(n))throw new Error(`Adresse ${n} non valide.`);await verrouOuvertureBd.acquire(n);const a=this._bds[n],o=v4(),c=async()=>{this._bds[n]&&this._bds[n].idsRequètes.delete(o)};if(a)return this._bds[n].idsRequètes.add(o),verrouOuvertureBd.release(n),{bd:a.bd,fOublier:c};try{const l=await this.orbite.open(n);return this._bds[n]={bd:l,idsRequètes:new Set([o])},await l.load(),verrouOuvertureBd.release(n),{bd:l,fOublier:c}}catch(l){throw console.error(l.toString()),console.warn(l.stack),console.log(n),l}}async obtIdBd({nom:n,racine:a,type:o,optionsAccès:c}){let l,u;typeof a=="string"?{bd:l,fOublier:u}=await this.ouvrirBd({id:a}):l=a;const d=l.id;let m=l.get(n);const b=d+n,x=await this.obtDeStockageLocal({clef:b});if(m&&x&&m!==x)try{await this.combinerBds({idBdBase:m,idBd2:x})}catch{}if(m&&o)try{return await this.orbite[o](m),m}catch{return}if(!m&&o){const _=l.access;await uneFois(S=>_.suivreIdsOrbiteAutoriséesÉcriture(async T=>await S(T.includes(this.orbite.identity.id))))&&(m=await this.créerBdIndépendante({type:o,optionsAccès:c}),await l.set(n,m))}return m&&await this.sauvegarderAuStockageLocal({clef:b,val:m}),u&&await u(),m}async créerBdIndépendante({type:n,optionsAccès:a,nom:o}){a=Object.assign({},this.optionsAccès,a||{});const c={accessController:a},l=await this.orbite[n](o||v4(),c);await l.load();const{id:u}=l;return this._bds[u]={bd:l,idsRequètes:new Set},u}async effacerBd({id:n}){const{bd:a}=await this.ouvrirBd({id:n});await a.drop(),delete this._bds[n]}async obtOpsAccès({idBd:n}){const{bd:a,fOublier:o}=await this.ouvrirBd({id:n}),c=a.access;return await o(),{address:c.bd.id,premierMod:c._premierMod}}async suivrePermission({idObjet:n,f:a}){const{bd:o,fOublier:c}=await this.ouvrirBd({id:n}),l=o.access,u=l.constructor.type;if(u==="ipfs"){const d=this.orbite.identity.id;return await a(l.write.includes(d)?MEMBRE:void 0),await c(),faisRien}else if(u===nomType){const d=async b=>{const x=b.filter(w=>w.idBdCompte===this.idBdCompte).map(w=>w.rôle),_=x.includes(MODÉRATEUR)?MODÉRATEUR:x.includes(MEMBRE)?MEMBRE:void 0;await a(_)},m=await l.suivreUtilisateursAutorisés(d);return async()=>{await m(),await c()}}else throw new Error(`Type d'accès ${u} non reconnu.`)}async suivrePermissionÉcrire({id:n,f:a}){const o=async c=>{await a(c!==void 0)};return await this.suivrePermission({idObjet:n,f:o})}async suivreAccèsBd({id:n,f:a}){const{bd:o,fOublier:c}=await this.ouvrirBd({id:n}),l=o.access,u=l.constructor.type;if(u==="ipfs"){const d=l.write.map(m=>({idBdCompte:m,rôle:MODÉRATEUR}));await a(d)}else if(u===nomType){const d=await l.suivreUtilisateursAutorisés(a);return await c(),d}return await c(),faisRien}async suivreBdsRécursives({idBd:n,f:a}){const o={},c=async()=>{await a(Object.keys(o))},l=new src$4,u=async x=>{delete o[x],await Promise.all(Object.keys(o).map(async _=>{o[_]&&(o[_].requètes.delete(x),o[_].requètes.size||await o[_].fOublier())}))},d=["copiéDe"],m=async(x,_)=>{const w=z=>z.map(U=>typeof U=="string"?[U]:Array.isArray(U)?U:typeof U=="object"?Object.values(U):[]).flat().filter(U=>adresseOrbiteValide(U)),S=async z=>{let U=[];typeof z=="object"?(U=w(Object.entries(z).filter(O=>!d.includes(O[0])).map(O=>O[1])),U.push(...w(Object.keys(z)))):Array.isArray(z)?U=w(z):typeof z=="string"&&(U=[z]);const Y=U.filter(O=>!o[x].sousBds.includes(O)),X=o[x].sousBds.filter(O=>!U.includes(O));o[x].sousBds=U,await Promise.all(X.map(async O=>{o[O].requètes.delete(x),o[O].requètes.size||await o[O].fOublier()})),await Promise.all(Y.map(async O=>await m(O,x))),c()};if(await l.acquire(x),o[x]){o[x].requètes.add(_);return}const{bd:T,fOublier:B}=await this.ouvrirBd({id:x}),{type:C}=T;await B(),o[x]={requètes:new Set([_]),sousBds:[],fOublier:async()=>{await D(),await u(x)}};let D;C==="keyvalue"?D=await this.suivreBdDic({id:x,f:S}):C==="feed"?D=await this.suivreBdListe({id:x,f:S}):D=faisRien,l.release(x),c()};return await m(n,""),async()=>{await Promise.all(Object.values(o).map(x=>x.fOublier()))}}async fermerCompte(){this.réseau&&await this.réseau.fermer(),this.favoris&&await this.favoris.fermer(),this.automatisations&&await this.automatisations.fermer()}async fermer(){await(await obtStockageLocal()).fermer(),this._oublierNettoyageBdsOuvertes&&this._oublierNettoyageBdsOuvertes(),await this.fermerCompte(),this.épingles&&await this.épingles.fermer(),this.orbite&&!this._orbiteExterne&&await this.orbite.stop(),this.sfip&&!this._sfipExterne&&await this.sfip.stop()}static async créer(n={}){const a=new ClientConstellation(n);return await a.initialiser(),a}}__decorate([cacheSuivi],ClientConstellation.prototype,"suivreDispositifs",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreIdBdCompte",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreEmpreinteTêtesBdRécursive",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermission",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermissionÉcrire",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreAccèsBd",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreBdsRécursives",null);class Callable extends Function{constructor(){return Object.setPrototypeOf(function(){},new.target.prototype)}}class ClientMandatairifiable extends Callable{constructor(){super();lt(this,"événements");lt(this,"tâches");lt(this,"erreurs");this.événements=new eventsExports.EventEmitter,this.tâches={},this.erreurs=[],this.événements.on("message",n=>{const{type:a}=n;switch(a){case"suivre":{const{id:o,données:c}=n;if(!this.tâches[o])return;const{fSuivre:l}=this.tâches[o];l(c);break}case"suivrePrêt":{const{id:o,fonctions:c}=n;this.événements.emit(o,{fonctions:c});break}case"action":{const{id:o,résultat:c}=n;this.événements.emit(o,{résultat:c});break}case"erreur":{const{erreur:o,id:c}=n;c?this.événements.emit(c,{erreur:o}):this.erreur({erreur:o,id:c});break}default:this.erreur({erreur:`Type inconnu ${a} dans message ${n}.`,id:n.id})}})}__call__(n,a={}){typeof a!="object"&&this.erreur({erreur:`La fonction ${n.join(".")} fut appelée avec arguments ${a}. 
      Toute fonction mandataire Constellation doit être appelée avec un seul argument en format d'objet (dictionnaire).`});const o=v4(),c=Object.entries(a).find(l=>typeof l[1]=="function")?.[0];return c?this.appelerFonctionSuivre(o,n,a,c):this.appelerFonctionAction(o,n,a)}async appelerFonctionSuivre(n,a,o,c){const l=o[c],u=Object.fromEntries(Object.entries(o).filter(S=>typeof S[1]!="function"));l===void 0&&this.erreur({erreur:"Aucun argument de nom "+c+" n'a été donnée pour "+a.join(".")}),Object.keys(o).length>Object.keys(u).length+1?this.erreur({erreur:"Plus d'un argument pour "+a.join(".")+" est une fonction : "+JSON.stringify(o),id:n}):typeof l!="function"&&this.erreur({erreur:"Argument "+c+"n'est pas une fonction : ",id:n});const d={type:"suivre",id:n,fonction:a,args:u,nomArgFonction:c},b={id:n,fSuivre:l,fRetour:async(S,T)=>{const B={type:"retour",id:n,fonction:S,args:T};this.envoyerMessage(B)}};this.tâches[n]=b;const x=async()=>{await this.oublierTâche(n)};this.envoyerMessage(d);const{fonctions:_,erreur:w}=(await once_1(this.événements,n))[0];if(w&&this.erreur({erreur:w,id:n}),_&&_[0]){const S={fOublier:x};for(const T of _)S[T]=async(...B)=>{await this.tâches[n]?.fRetour(T,B)};return S}else return x}async appelerFonctionAction(n,a,o){const c={type:"action",id:n,fonction:a,args:o},l=new Promise((u,d)=>{once_1(this.événements,n).then(m=>{const{résultat:b,erreur:x}=m[0];x?d(new Error(x)):u(b)})});return this.envoyerMessage(c),l}erreur({erreur:n,id:a}){const o={erreur:n,id:a};throw this.événements.emit("erreur",{nouvelle:o,toutes:this.erreurs}),new Error(JSON.stringify(o))}async oublierTâche(n){const a=this.tâches[n];a&&await a.fRetour("fOublier"),delete this.tâches[n]}}class Handler{constructor(e){lt(this,"listeAtributs");this.listeAtributs=e||[]}get(e,n){if(["événements","erreurs"].includes(n))return e[n];{const o=[...this.listeAtributs,n],c=new Handler(o);return new Proxy(e,c)}}apply(e,n,a){return e.__call__(this.listeAtributs,a[0])}}const générerMandataire=t=>{const e=new Handler;return new Proxy(t,e)};class GestionnaireClient{constructor(e,n,a={}){lt(this,"ipa");lt(this,"_messagesEnAttente");lt(this,"prêt");lt(this,"dicFRetourSuivi");lt(this,"opts");lt(this,"fMessage");lt(this,"fErreur");lt(this,"_verrou");this.fMessage=e,this.fErreur=n,this.opts=a,this.dicFRetourSuivi={},this.prêt=!1,this._messagesEnAttente=[],this._verrou=new src$4,this.init()}async init(){if(await this._verrou.acquire("init"),this.ipa){this._verrou.release("init");return}this.ipa=await ClientConstellation.créer(this.opts),this._messagesEnAttente.forEach(e=>this._gérerMessage(e)),this.prêt=!0,this._verrou.release("init")}async gérerMessage(e){this.prêt?await this._gérerMessage(e):this._messagesEnAttente.unshift(e)}async _gérerMessage(e){const{type:n}=e;switch(n){case"suivre":{const{id:a}=e;this.ipa||this.fErreur("IPA non initialisé",a);const{fonction:o,args:c,nomArgFonction:l}=e,u=this.extraireFonctionIPA(o,a);if(!u)return;const d=m=>{const b={type:"suivre",id:a,données:m};this.fMessage(b)};c[l]=d;try{const m=await u(c),b=typeof m=="function"?{fOublier:m}:m;this.dicFRetourSuivi[a]=b;const x={type:"suivrePrêt",id:a};typeof m!="function"&&(x.fonctions=Object.keys(m)),this.fMessage(x)}catch(m){this.fErreur(m.toString(),a)}break}case"action":{const{id:a}=e;this.ipa||this.fErreur("IPA non initialisé",a);const{fonction:o,args:c}=e,l=this.extraireFonctionIPA(o,a);if(!l)return;try{const u=await l(c),d={type:"action",id:a,résultat:u};this.fMessage(d)}catch(u){this.fErreur(u.toString(),a)}break}case"retour":{const{id:a,fonction:o,args:c}=e,l=this.dicFRetourSuivi[a];l&&await l[o](c),o==="fOublier"&&delete this.dicFRetourSuivi[a];break}default:{this.fErreur(`Type de requète ${n} non reconnu dans message ${e}`,e.id);break}}}extraireFonctionIPA(e,n){const a=`Fonction ClientConstellation.${e.join(".")} n'existe pas ou n'est pas une fonction.`;let o=this.ipa;for(const[c,l]of e.entries()){if(c===e.length-1)if(typeof o=="object"&&l in o&&o[l])o=o[l].bind(o);else{this.fErreur(a,n);return}else if(typeof o=="object"&&l in o&&o[l])o=o[l];else{this.fErreur(a,n);return}if(!o){this.fErreur(a,n);return}}if(typeof o!="function"){this.fErreur(a,n);return}return o}async fermer(){await this.init(),await this.ipa.fermer()}}class MandataireClientProc extends ClientMandatairifiable{constructor(n={}){super();lt(this,"client");this.client=new GestionnaireClient(a=>{this.événements.emit("message",a)},(a,o)=>{const c={type:"erreur",id:o,erreur:a};this.événements.emit("message",c)},n)}envoyerMessage(n){this.client.gérerMessage(n)}}const générerMandataireProc=(t={})=>générerMandataire(new MandataireClientProc(t));var conditions;(function(t){t.ATTR="attribution",t.ÉGAL="partageÉgal",t.INCL="inclureDroitDauteur",t.CHNG="indiquerChangements",t.SRCE="partagerCodeSource",t.USGR="usagereseau"})(conditions||(conditions={}));var droits;(function(t){t.PRTG="partager",t.ADPT="adapter",t.CMRC="usageComercial",t.PRV="usagePrivé",t.BREV="usageBrevets"})(droits||(droits={}));var limitations;(function(t){t.RSP="aucuneResponsabilité",t.GRNT="aucuneGarantie",t.MRCM="marqueCommerce",t.BREV="brevetExclu",t.SOUS="sousLicence"})(limitations||(limitations={}));var catégories;(function(t){t.BD="basesDeDonnées",t.ART="artistique",t.CODE="codeInformatique",t.AUTRE="autre"})(catégories||(catégories={}));droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT,conditions.ATTR,conditions.ÉGAL,conditions.INCL,limitations.RSP,limitations.BREV,limitations.MRCM,limitations.GRNT,catégories.BD,droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT,conditions.ATTR,conditions.INCL,limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV,catégories.BD,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV,catégories.BD,droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG,conditions.INCL,conditions.ATTR,limitations.SOUS,limitations.RSP,catégories.BD,droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV,conditions.INCL,conditions.CHNG,conditions.ÉGAL,limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT,catégories.ART,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,conditions.ATTR,conditions.CHNG,limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT,catégories.ART,droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV,limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT,catégories.ART,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,droits.BREV,conditions.INCL,conditions.CHNG,limitations.MRCM,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.USGR,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,limitations.MRCM,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.BREV,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,droits.BREV,conditions.INCL,conditions.SRCE,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,limitations.BREV,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV,conditions.SRCE,conditions.INCL,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV,conditions.SRCE,conditions.INCL,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.ÉGAL,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.ÉGAL,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRV,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.SRCE,conditions.INCL,conditions.ÉGAL,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,limitations.GRNT,limitations.MRCM,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.SRCE,conditions.INCL,conditions.ÉGAL,limitations.GRNT,limitations.MRCM,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.ÉGAL,limitations.MRCM,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.ÉGAL,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.CHNG,limitations.RSP,limitations.GRNT,catégories.CODE,droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG,conditions.INCL,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.AUTRE;var isPlainObj=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty:hasOwnProperty$1}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=t=>{const e=[];for(const n in t)hasOwnProperty$1.call(t,n)&&e.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(t);for(const a of n)propertyIsEnumerable.call(t,a)&&e.push(a)}return e};function clone(t){return Array.isArray(t)?cloneArray(t):isOptionObject(t)?cloneOptionObject(t):t}function cloneArray(t){const e=t.slice(0,0);return getEnumerableOwnPropertyKeys(t).forEach(n=>{defineProperty(e,n,clone(t[n]))}),e}function cloneOptionObject(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(t).forEach(n=>{defineProperty(e,n,clone(t[n]))}),e}const mergeKeys=(t,e,n,a)=>(n.forEach(o=>{typeof e[o]>"u"&&a.ignoreUndefined||(o in t&&t[o]!==Object.getPrototypeOf(t)?defineProperty(t,o,merge$4(t[o],e[o],a)):defineProperty(t,o,clone(e[o])))}),t),concatArrays=(t,e,n)=>{let a=t.slice(0,0),o=0;return[t,e].forEach(c=>{const l=[];for(let u=0;u<c.length;u++)hasOwnProperty$1.call(c,u)&&(l.push(String(u)),c===t?defineProperty(a,o++,c[u]):defineProperty(a,o++,clone(c[u])));a=mergeKeys(a,c,getEnumerableOwnPropertyKeys(c).filter(u=>!l.includes(u)),n)}),a};function merge$4(t,e,n){return n.concatArrays&&Array.isArray(t)&&Array.isArray(e)?concatArrays(t,e,n):!isOptionObject(e)||!isOptionObject(t)?clone(e):mergeKeys(t,e,getEnumerableOwnPropertyKeys(e),n)}var mergeOptions$2=function(...t){const e=merge$4(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let n={_:{}};for(const a of t)if(a!==void 0){if(!isOptionObject(a))throw new TypeError("`"+a+"` is not an Option Object");n=merge$4(n,{_:a},e)}return n._};const mergeOptions$1=Object.freeze(Object.defineProperty({__proto__:null,default:mergeOptions$2},Symbol.toStringTag,{value:"Module"}));let nanoid=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const deleteDb=async t=>await new Promise((e,n)=>{const a=self.indexedDB.deleteDatabase(t);a.onerror=o=>n(o),a.onsuccess=()=>e()}),removeRepo=async t=>{await deleteDb(t),await deleteDb(t+"/keys"),await deleteDb(t+"/blocks"),await deleteDb(t+"/datastore")},repoExists=async t=>await new Promise((e,n)=>{const a=self.indexedDB.open(t);let o=!0;a.onerror=()=>n(a.error),a.onsuccess=function(){a.result.close(),o||self.indexedDB.deleteDatabase(t),e(o)},a.onupgradeneeded=function(){o=!1}}),defaultRepo=()=>"ipfs",checkForRunningApi=()=>null,tmpDir=(t="")=>`${t}_ipfs_${nanoid()}`;var error={};let TimeoutError$2=class extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}};error.TimeoutError=TimeoutError$2;let AbortError$1=class extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}};error.AbortError=AbortError$1;let HTTPError$1=class extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}};error.HTTPError=HTTPError$1;var fetch_browserExports={},fetch_browser$1={get exports(){return fetch_browserExports},set exports(t){fetch_browserExports=t}},srcExports={},src$2={get exports(){return srcExports},set exports(t){srcExports=t}},browserExports={},browser={get exports(){return browserExports},set exports(t){browserExports=t}},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(t,e){var n=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof globalThis<"u")return globalThis;throw new Error("unable to locate globalThis object")},a=n();t.exports=e=a.fetch,a.fetch&&(e.default=a.fetch.bind(globalThis)),e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response}(browser,browserExports)),browserExports}globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?src$2.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:src$2.exports={default:requireBrowser().default,Headers:requireBrowser().Headers,Request:requireBrowser().Request,Response:requireBrowser().Response};(function(t){t.exports=srcExports})(fetch_browser$1);const{TimeoutError:TimeoutError$1,AbortError}=error,{Response,Request:Request$1,Headers:Headers$1,default:fetch$2}=fetch_browserExports,fetchWithProgress=(t,e={})=>{const n=new XMLHttpRequest;n.open(e.method||"GET",t.toString(),!0);const{timeout:a,headers:o}=e;if(a&&a>0&&a<1/0&&(n.timeout=a),e.overrideMimeType!=null&&n.overrideMimeType(e.overrideMimeType),o)for(const[c,l]of new Headers$1(o))n.setRequestHeader(c,l);return e.signal&&(e.signal.onabort=()=>n.abort()),e.onUploadProgress&&(n.upload.onprogress=e.onUploadProgress),n.responseType="arraybuffer",new Promise((c,l)=>{const u=d=>{switch(d.type){case"error":{c(Response.error());break}case"load":{c(new ResponseWithURL(n.responseURL,n.response,{status:n.status,statusText:n.statusText,headers:parseHeaders(n.getAllResponseHeaders())}));break}case"timeout":{l(new TimeoutError$1);break}case"abort":{l(new AbortError);break}}};n.onerror=u,n.onload=u,n.ontimeout=u,n.onabort=u,n.send(e.body)})},fetchWithStreaming=fetch$2,fetchWith=(t,e={})=>e.onUploadProgress!=null?fetchWithProgress(t,e):fetchWithStreaming(t,e),parseHeaders=t=>{const e=new Headers$1;for(const n of t.trim().split(/[\r\n]+/)){const a=n.indexOf(": ");a>0&&e.set(n.slice(0,a),n.slice(a+1))}return e};class ResponseWithURL extends Response{constructor(e,n,a){super(n,a),Object.defineProperty(this,"url",{value:e})}}var fetch_browser={fetch:fetchWith,Request:Request$1,Headers:Headers$1};const require$$2=getAugmentedNamespace(mergeOptions$1),isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";function getDefaultBase(){return isReactNative?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const URL$2=self.URL,defaultBase$1=getDefaultBase();let URLWithLegacySupport$2=class{constructor(e="",n=defaultBase$1){this.super=new URL$2(e,n),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return URL$2.createObjectURL(e)}static revokeObjectURL(e){URL$2.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function format$3(t){if(typeof t=="string")return new URL$2(t).toString();if(!(t instanceof URL$2)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",n=t.auth?t.auth+"@":"",a=t.port?":"+t.port:"",o=t.protocol?t.protocol+"//":"",c=t.host||"",l=t.hostname||"",u=t.search||(t.query?"?"+t.query:""),d=t.hash||"",m=t.pathname||"",b=t.path||m+u;return`${o}${e||n}${c||l+a}${b}${d}`}}var urlBrowser={URLWithLegacySupport:URLWithLegacySupport$2,URLSearchParams:self.URLSearchParams,defaultBase:defaultBase$1,format:format$3};const{URLWithLegacySupport:URLWithLegacySupport$1,format:format$2}=urlBrowser;var relative$1=(t,e={},n={},a)=>{let o=e.protocol?e.protocol.replace(":",""):"http";o=(n[o]||a||o)+":";let c;try{c=new URLWithLegacySupport$1(t)}catch{c={}}const l=Object.assign({},e,{protocol:o||c.protocol,host:e.host||c.host});return new URLWithLegacySupport$1(t,format$2(l)).toString()};const{URLWithLegacySupport,format:format$1,URLSearchParams:URLSearchParams$2,defaultBase}=urlBrowser,relative=relative$1;var isoUrl={URL:URLWithLegacySupport,URLSearchParams:URLSearchParams$2,format:format$1,relative,defaultBase},anySignalExports={},anySignal$2={get exports(){return anySignalExports},set exports(t){anySignalExports=t}};function anySignal$1(t){const e=new globalThis.AbortController;function n(){e.abort();for(const a of t)!a||!a.removeEventListener||a.removeEventListener("abort",n)}for(const a of t)if(!(!a||!a.addEventListener)){if(a.aborted){n();break}a.addEventListener("abort",n)}return e.signal}anySignal$2.exports=anySignal$1;var anySignal_2=anySignalExports.anySignal=anySignal$1;async function*browserReadableStreamToIt(t,e={}){const n=t.getReader();try{for(;;){const a=await n.read();if(a.done)return;yield a.value}}finally{e.preventCancel!==!0&&n.cancel(),n.releaseLock()}}var browserReadablestreamToIt=browserReadableStreamToIt;const isElectron=isElectron_1,IS_ENV_WITH_DOM=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,IS_ELECTRON=isElectron(),IS_BROWSER=IS_ENV_WITH_DOM&&!IS_ELECTRON,IS_ELECTRON_MAIN=IS_ELECTRON&&!IS_ENV_WITH_DOM,IS_ELECTRON_RENDERER=IS_ELECTRON&&IS_ENV_WITH_DOM,IS_NODE=typeof commonjsRequire$1=="function"&&typeof browser$1$1<"u"&&typeof browser$1$1.release<"u"&&browser$1$1.release.name==="node"&&!IS_ELECTRON,IS_WEBWORKER=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,IS_TEST=typeof browser$1$1<"u"&&typeof browser$1$1.env<"u"&&!1,IS_REACT_NATIVE=typeof navigator<"u"&&navigator.product==="ReactNative";var env={isTest:IS_TEST,isElectron:IS_ELECTRON,isElectronMain:IS_ELECTRON_MAIN,isElectronRenderer:IS_ELECTRON_RENDERER,isNode:IS_NODE,isBrowser:IS_BROWSER,isWebWorker:IS_WEBWORKER,isEnvWithDom:IS_ENV_WITH_DOM,isReactNative:IS_REACT_NATIVE};const all$1=async t=>{const e=[];for await(const n of t)e.push(n);return e};var itAll=all$1;const{fetch:fetch$1,Request,Headers}=fetch_browser,{TimeoutError,HTTPError}=error,merge$3=require$$2.bind({ignoreUndefined:!0}),{URL:URL$1,URLSearchParams:URLSearchParams$1}=isoUrl,anySignal=anySignalExports,browserReableStreamToIt=browserReadablestreamToIt,{isBrowser:isBrowser$1,isWebWorker}=env,all=itAll,timeout=(t,e,n)=>{if(e===void 0)return t;const a=Date.now(),o=()=>Date.now()-a>=e;return new Promise((c,l)=>{const u=setTimeout(()=>{o()&&(l(new TimeoutError),n.abort())},e),d=m=>x=>{if(clearTimeout(u),o()){l(new TimeoutError);return}m(x)};t.then(d(c),d(l))})},defaults$1={throwHttpErrors:!0,credentials:"same-origin"};class HTTP{constructor(e={}){this.opts=merge$3(defaults$1,e)}async fetch(e,n={}){const a=merge$3(this.opts,n),o=new Headers(a.headers);if(typeof e!="string"&&!(e instanceof URL$1||e instanceof Request))throw new TypeError("`resource` must be a string, URL, or Request");const c=new URL$1(e.toString(),a.base),{searchParams:l,transformSearchParams:u,json:d}=a;l&&(typeof u=="function"?c.search=u(new URLSearchParams$1(a.searchParams)):c.search=new URLSearchParams$1(a.searchParams)),d&&(a.body=JSON.stringify(a.json),o.set("content-type","application/json"));const m=new AbortController,b=anySignal([m.signal,a.signal]);globalThis.ReadableStream!=null&&a.body instanceof globalThis.ReadableStream&&(isBrowser$1||isWebWorker)&&(a.body=new Blob(await all(browserReableStreamToIt(a.body))));const x=await timeout(fetch$1(c.toString(),{...a,signal:b,timeout:void 0,headers:o,duplex:"half"}),a.timeout,m);if(!x.ok&&a.throwHttpErrors)throw a.handleError&&await a.handleError(x),new HTTPError(x);return x.iterator=async function*(){yield*fromStream(x.body)},x.ndjson=async function*(){for await(const _ of ndjson(x.iterator()))n.transform?yield n.transform(_):yield _},x}post(e,n={}){return this.fetch(e,{...n,method:"POST"})}get(e,n={}){return this.fetch(e,{...n,method:"GET"})}put(e,n={}){return this.fetch(e,{...n,method:"PUT"})}delete(e,n={}){return this.fetch(e,{...n,method:"DELETE"})}options(e,n={}){return this.fetch(e,{...n,method:"OPTIONS"})}}const ndjson=async function*(t){const e=new TextDecoder;let n="";for await(const a of t){n+=e.decode(a,{stream:!0});const o=n.split(/\r?\n/);for(let c=0;c<o.length-1;c++){const l=o[c].trim();l.length>0&&(yield JSON.parse(l))}n=o[o.length-1]}n+=e.decode(),n=n.trim(),n.length!==0&&(yield JSON.parse(n))},fromStream=t=>{if(isAsyncIterable(t))return t;if(isNodeReadableStream(t)){const e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(n){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:n})}}}}}if(isWebReadableStream(t)){const e=t.getReader();return async function*(){try{for(;;){const{done:n,value:a}=await e.read();if(n)return;a&&(yield a)}}finally{e.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},isAsyncIterable=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",isWebReadableStream=t=>t&&typeof t.getReader=="function",isNodeReadableStream=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");HTTP.HTTPError=HTTPError;HTTP.TimeoutError=TimeoutError;HTTP.streamToAsyncIterator=fromStream;HTTP.post=(t,e)=>new HTTP(e).post(t,e);HTTP.get=(t,e)=>new HTTP(e).get(t,e);HTTP.put=(t,e)=>new HTTP(e).put(t,e);HTTP.delete=(t,e)=>new HTTP(e).delete(t,e);HTTP.options=(t,e)=>new HTTP(e).options(t,e);var http=HTTP;class Parser{constructor(){lt(this,"index",0);lt(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const n=this.index,a=e();return a===void 0&&(this.index=n),a}parseWith(e){const n=e();if(this.index===this.input.length)return n}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const n=this.readChar();if(n===e)return n})}readSeparator(e,n,a){return this.readAtomically(()=>{if(!(n>0&&this.readGivenChar(e)===void 0))return a()})}readNumber(e,n,a,o){return this.readAtomically(()=>{let c=0,l=0;const u=this.peekChar();if(u===void 0)return;const d=u==="0",m=2**(8*o)-1;for(;;){const b=this.readAtomically(()=>{const x=this.readChar();if(x===void 0)return;const _=Number.parseInt(x,e);if(!Number.isNaN(_))return _});if(b===void 0)break;if(c*=e,c+=b,c>m||(l+=1,n!==void 0&&l>n))return}if(l!==0)return!a&&d&&l>1?void 0:c})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let n=0;n<e.length;n++){const a=this.readSeparator(".",n,()=>this.readNumber(10,3,!1,1));if(a===void 0)return;e[n]=a}return e})}readIPv6Addr(){const e=n=>{for(let a=0;a<n.length/2;a++){const o=a*2;if(a<n.length-3){const l=this.readSeparator(":",a,()=>this.readIPv4Addr());if(l!==void 0)return n[o]=l[0],n[o+1]=l[1],n[o+2]=l[2],n[o+3]=l[3],[o+4,!0]}const c=this.readSeparator(":",a,()=>this.readNumber(16,4,!0,2));if(c===void 0)return[o,!1];n[o]=c>>8,n[o+1]=c&255}return[n.length,!1]};return this.readAtomically(()=>{const n=new Uint8Array(16),[a,o]=e(n);if(a===16)return n;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const c=new Uint8Array(14),l=16-(a+2),[u]=e(c.subarray(0,l));return n.set(c.subarray(0,u),16-u),n})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const MAX_IPV6_LENGTH=45,MAX_IPV4_LENGTH=15,parser=new Parser;function parseIPv4(t){if(!(t.length>MAX_IPV4_LENGTH))return parser.new(t).parseWith(()=>parser.readIPv4Addr())}function parseIPv6(t){if(!(t.length>MAX_IPV6_LENGTH))return parser.new(t).parseWith(()=>parser.readIPv6Addr())}function parseIP(t){if(!(t.length>MAX_IPV6_LENGTH))return parser.new(t).parseWith(()=>parser.readIPAddr())}function isIPv4(t){return Boolean(parseIPv4(t))}function isIPv6(t){return Boolean(parseIPv6(t))}function isIP(t){return Boolean(parseIP(t))}const isV4=isIPv4,isV6=isIPv6,toBytes=function(t){let e=0;if(t=t.toString().trim(),isV4(t)){const n=new Uint8Array(e+4);return t.split(/\./g).forEach(a=>{n[e++]=parseInt(a,10)&255}),n}if(isV6(t)){const n=t.split(":",8);let a;for(a=0;a<n.length;a++){const c=isV4(n[a]);let l;c&&(l=toBytes(n[a]),n[a]=toString$8(l.slice(0,2),"base16")),l!=null&&++a<8&&n.splice(a,0,toString$8(l.slice(2,4),"base16"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(a=0;a<n.length&&n[a]!=="";a++);const c=[a,1];for(a=9-n.length;a>0;a--)c.push("0");n.splice.apply(n,c)}const o=new Uint8Array(e+16);for(a=0;a<n.length;a++){const c=parseInt(n[a],16);o[e++]=c>>8&255,o[e++]=c&255}return o}throw new Error("invalid ip address")},toString$1=function(t,e=0,n){e=~~e,n=n??t.length-e;const a=new DataView(t.buffer);if(n===4){const o=[];for(let c=0;c<n;c++)o.push(t[e+c]);return o.join(".")}if(n===16){const o=[];for(let c=0;c<n;c+=2)o.push(a.getUint16(e+c).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V=-1,names={},codes={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[43,8,"ipcidr"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];table.forEach(t=>{const e=createProtocol(...t);codes[e.code]=e,names[e.name]=e});function createProtocol(t,e,n,a,o){return{code:t,size:e,name:n,resolvable:Boolean(a),path:Boolean(o)}}function getProtocol(t){if(typeof t=="number"){if(codes[t]!=null)return codes[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(names[t]!=null)return names[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var encode_1$1=encode$4,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$4(t,e,n){e=e||[],n=n||0;for(var a=n;t>=INT$1;)e[n++]=t&255|MSB$2,t/=128;for(;t&MSBALL$1;)e[n++]=t&255|MSB$2,t>>>=7;return e[n]=t|0,encode$4.bytes=n-a+1,e}var decode$7=read$1,MSB$1$1=128,REST$1$1=127;function read$1(t,a){var n=0,a=a||0,o=0,c=a,l,u=t.length;do{if(c>=u)throw read$1.bytes=0,new RangeError("Could not decode varint");l=t[c++],n+=o<28?(l&REST$1$1)<<o:(l&REST$1$1)*Math.pow(2,o),o+=7}while(l>=MSB$1$1);return read$1.bytes=c-a,n}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(t){return t<N1$1?1:t<N2$1?2:t<N3$1?3:t<N4$1?4:t<N5$1?5:t<N6$1?6:t<N7$1?7:t<N8$1?8:t<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$7,encodingLength:length$1},_brrp_varint=varint$1;const decode$6=(t,e=0)=>[_brrp_varint.decode(t,e),_brrp_varint.decode.bytes],encodeTo=(t,e,n=0)=>(_brrp_varint.encode(t,e,n),e),encodingLength=t=>_brrp_varint.encodingLength(t),equals$1=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},coerce$1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$1=t=>new TextEncoder().encode(t),toString=t=>new TextDecoder().decode(t),create=(t,e)=>{const n=e.byteLength,a=encodingLength(t),o=a+encodingLength(n),c=new Uint8Array(o+n);return encodeTo(t,c,0),encodeTo(n,c,a),c.set(e,o),new Digest(t,n,e,c)},decode$5=t=>{const e=coerce$1(t),[n,a]=decode$6(e),[o,c]=decode$6(e.subarray(a)),l=e.subarray(a+c);if(l.byteLength!==o)throw new Error("Incorrect length");return new Digest(n,o,l,e)},equals=(t,e)=>{if(t===e)return!0;{const n=e;return t.code===n.code&&t.size===n.size&&n.bytes instanceof Uint8Array&&equals$1(t.bytes,n.bytes)}};class Digest{constructor(e,n,a,o){this.code=e,this.size=n,this.digest=a,this.bytes=o}}function base$1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),l=c.charCodeAt(0);if(n[l]!==255)throw new TypeError(c+" is ambiguous");n[l]=o}var u=t.length,d=t.charAt(0),m=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function x(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var T=0,B=0,C=0,D=S.length;C!==D&&S[C]===0;)C++,T++;for(var z=(D-C)*b+1>>>0,U=new Uint8Array(z);C!==D;){for(var Y=S[C],X=0,O=z-1;(Y!==0||X<B)&&O!==-1;O--,X++)Y+=256*U[O]>>>0,U[O]=Y%u>>>0,Y=Y/u>>>0;if(Y!==0)throw new Error("Non-zero carry");B=X,C++}for(var J=z-B;J!==z&&U[J]===0;)J++;for(var Z=d.repeat(T);J<z;++J)Z+=t.charAt(U[J]);return Z}function _(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var T=0;if(S[T]!==" "){for(var B=0,C=0;S[T]===d;)B++,T++;for(var D=(S.length-T)*m+1>>>0,z=new Uint8Array(D);S[T];){var U=n[S.charCodeAt(T)];if(U===255)return;for(var Y=0,X=D-1;(U!==0||Y<C)&&X!==-1;X--,Y++)U+=u*z[X]>>>0,z[X]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");C=Y,T++}if(S[T]!==" "){for(var O=D-C;O!==D&&z[O]===0;)O++;for(var J=new Uint8Array(B+(D-O)),Z=B;O!==D;)J[Z++]=z[O++];return J}}}function w(S){var T=_(S);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:x,decodeUnsafe:_,decode:w}}var src$1=base$1,_brrp__multiformats_scope_baseX$1=src$1;let Encoder$1=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$1=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$1(this,e)}},ComposedDecoder$1=class{constructor(e){this.decoders=e}or(e){return or$1(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$1=(t,e)=>new ComposedDecoder$1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$1=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$1(e,n,a),this.decoder=new Decoder$1(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$1=({name:t,prefix:e,encode:n,decode:a})=>new Codec$1(t,e,n,a),baseX$1=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$1(n,e);return from$1({prefix:t,name:e,encode:a,decode:c=>coerce$1(o(c))})},decode$4=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let c=t.length;for(;t[c-1]==="=";)--c;const l=new Uint8Array(c*n/8|0);let u=0,d=0,m=0;for(let b=0;b<c;++b){const x=o[t[b]];if(x===void 0)throw new SyntaxError(`Non-${a} character`);d=d<<n|x,u+=n,u>=8&&(u-=8,l[m++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},encode$3=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let c="",l=0,u=0;for(let d=0;d<t.length;++d)for(u=u<<8|t[d],l+=8;l>n;)l-=n,c+=e[o&u>>l];if(l&&(c+=e[o&u<<n-l]),a)for(;c.length*n&7;)c+="=";return c},rfc4648$1=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$1({prefix:e,name:t,encode(o){return encode$3(o,a,n)},decode(o){return decode$4(o,a,n,t)}}),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr},Symbol.toStringTag,{value:"Module"})),base32$1=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$2=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$1,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"})),format=(t,e)=>{const{bytes:n,version:a}=t;switch(a){case 0:return toStringV0(n,baseCache(t),e||base58btc$1.encoder);default:return toStringV1(n,baseCache(t),e||base32$1.encoder)}},cache$1=new WeakMap,baseCache=t=>{const e=cache$1.get(t);if(e==null){const n=new Map;return cache$1.set(t,n),n}return e};class CID{constructor(e,n,a,o){this.code=n,this.version=e,this.multihash=a,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:n}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:n}=this.multihash,a=create(e,n);return CID.createV1(this.code,a)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,n){const a=n;return a&&e.code===a.code&&e.version===a.version&&equals(e.multihash,a.multihash)}toString(e){return format(this,e)}toJSON(){return{"/":format(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const n=e;if(n instanceof CID)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:a,code:o,multihash:c,bytes:l}=n;return new CID(a,o,c,l||encodeCID(a,o,c.bytes))}else if(n[cidSymbol]===!0){const{version:a,multihash:o,code:c}=n,l=decode$5(o);return CID.create(a,c,l)}else return null}static create(e,n,a){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(a.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(n!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,n,a,a.bytes)}case 1:{const o=encodeCID(e,n,a.bytes);return new CID(e,n,a,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,n){return CID.create(1,e,n)}static decode(e){const[n,a]=CID.decodeFirst(e);if(a.length)throw new Error("Incorrect length");return n}static decodeFirst(e){const n=CID.inspectBytes(e),a=n.size-n.multihashSize,o=coerce$1(e.subarray(a,a+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const c=o.subarray(n.multihashSize-n.digestSize),l=new Digest(n.multihashCode,n.digestSize,c,o);return[n.version===0?CID.createV0(l):CID.createV1(n.codec,l),e.subarray(n.size)]}static inspectBytes(e){let n=0;const a=()=>{const[x,_]=decode$6(e.subarray(n));return n+=_,x};let o=a(),c=DAG_PB_CODE;if(o===18?(o=0,n=0):c=a(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const l=n,u=a(),d=a(),m=n+d,b=m-l;return{version:o,codec:c,multihashCode:u,digestSize:d,multihashSize:b,size:m}}static parse(e,n){const[a,o]=parseCIDtoBytes(e,n),c=CID.decode(o);if(c.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(c).set(a,e),c}}const parseCIDtoBytes=(t,e)=>{switch(t[0]){case"Q":{const n=e||base58btc$1;return[base58btc$1.prefix,n.decode(`${base58btc$1.prefix}${t}`)]}case base58btc$1.prefix:{const n=e||base58btc$1;return[base58btc$1.prefix,n.decode(t)]}case base32$1.prefix:{const n=e||base32$1;return[base32$1.prefix,n.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0=(t,e,n)=>{const{prefix:a}=n;if(a!==base58btc$1.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=e.get(a);if(o==null){const c=n.encode(t).slice(1);return e.set(a,c),c}else return o},toStringV1=(t,e,n)=>{const{prefix:a}=n,o=e.get(a);if(o==null){const c=n.encode(t);return e.set(a,c),c}else return o},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(t,e,n)=>{const a=encodingLength(t),o=a+encodingLength(e),c=new Uint8Array(o+n.byteLength);return encodeTo(t,c,0),encodeTo(e,c,a),c.set(n,o),c},cidSymbol=Symbol.for("@ipld/js-cid/CID"),identity=from$1({prefix:"\0",name:"identity",encode:t=>toString(t),decode:t=>fromString$1(t)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base64$1=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$2=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$1,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars=alphabet.reduce((t,e,n)=>(t[n]=e,t),[]),alphabetCharsToBytes=alphabet.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function encode$2(t){return t.reduce((e,n)=>(e+=alphabetBytesToChars[n],e),"")}function decode$3(t){const e=[];for(const n of t){const a=alphabetCharsToBytes[n.codePointAt(0)];if(a===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(a)}return new Uint8Array(e)}const base256emoji=from$1({prefix:"🚀",name:"base256emoji",encode:encode$2,decode:decode$3}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$2,...base36$1,...base58,...base64$2,...base256emoji$1};var encode_1=encode$1,MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode$1(t,e,n){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw encode$1.bytes=0,new RangeError("Could not encode varint");e=e||[],n=n||0;for(var a=n;t>=INT;)e[n++]=t&255|MSB$1,t/=128;for(;t&MSBALL;)e[n++]=t&255|MSB$1,t>>>=7;return e[n]=t|0,encode$1.bytes=n-a+1,e}var decode$2=read,MSB=128,REST=127;function read(t,a){var n=0,a=a||0,o=0,c=a,l,u=t.length;do{if(c>=u||o>49)throw read.bytes=0,new RangeError("Could not decode varint");l=t[c++],n+=o<28?(l&REST)<<o:(l&REST)*Math.pow(2,o),o+=7}while(l>=MSB);return read.bytes=c-a,n}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(t){return t<N1?1:t<N2?2:t<N3?3:t<N4?4:t<N5?5:t<N6?6:t<N7?7:t<N8?8:t<N9?9:10},varint={encode:encode_1,decode:decode$2,encodingLength:length};function convertToString(t,e){switch(getProtocol(t).code){case 4:case 41:return bytes2ip(e);case 42:return bytes2str(e);case 6:case 273:case 33:case 132:return bytes2port(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return bytes2str(e);case 421:return bytes2mh(e);case 444:return bytes2onion(e);case 445:return bytes2onion(e);case 466:return bytes2mb(e);default:return toString$8(e,"base16")}}function convertToBytes(t,e){switch(getProtocol(t).code){case 4:return ip2bytes(e);case 41:return ip2bytes(e);case 42:return str2bytes(e);case 6:case 273:case 33:case 132:return port2bytes(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return str2bytes(e);case 421:return mh2bytes(e);case 444:return onion2bytes(e);case 445:return onion32bytes(e);case 466:return mb2bytes(e);default:return fromString$5(e,"base16")}}const decoders=Object.values(bases).map(t=>t.decoder),anybaseDecoder=function(){let t=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(e=>t=t.or(e)),t}();function ip2bytes(t){if(!isIP(t))throw new Error("invalid ip address");return toBytes(t)}function bytes2ip(t){const e=toString$1(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!isIP(e))throw new Error("invalid ip address");return e}function port2bytes(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function bytes2port(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function str2bytes(t){const e=fromString$5(t),n=Uint8Array.from(varint.encode(e.length));return concat$2([n,e],n.length+e.length)}function bytes2str(t){const e=varint.decode(t);if(t=t.slice(varint.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return toString$8(t)}function mh2bytes(t){let e;t[0]==="Q"||t[0]==="1"?e=decode$5(base58btc$1.decode(`z${t}`)).bytes:e=CID.parse(t).multihash.bytes;const n=Uint8Array.from(varint.encode(e.length));return concat$2([n,e],n.length+e.length)}function mb2bytes(t){const e=anybaseDecoder.decode(t),n=Uint8Array.from(varint.encode(e.length));return concat$2([n,e],n.length+e.length)}function bytes2mb(t){const e=varint.decode(t),n=t.slice(varint.decode.bytes);if(n.length!==e)throw new Error("inconsistent lengths");return"u"+toString$8(n,"base64url")}function bytes2mh(t){const e=varint.decode(t),n=t.slice(varint.decode.bytes);if(n.length!==e)throw new Error("inconsistent lengths");return toString$8(n,"base58btc")}function onion2bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const n=base32$1.decode("b"+e[0]),a=parseInt(e[1],10);if(a<1||a>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(a);return concat$2([n,o],n.length+o.length)}function onion32bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const n=base32$1.decode(`b${e[0]}`),a=parseInt(e[1],10);if(a<1||a>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(a);return concat$2([n,o],n.length+o.length)}function bytes2onion(t){const e=t.slice(0,t.length-2),n=t.slice(t.length-2),a=toString$8(e,"base32"),o=bytes2port(n);return`${a}:${o}`}function stringToStringTuples(t){const e=[],n=t.split("/").slice(1);if(n.length===1&&n[0]==="")return[];for(let a=0;a<n.length;a++){const o=n[a],c=getProtocol(o);if(c.size===0){e.push([o]);continue}if(a++,a>=n.length)throw ParseError("invalid address: "+t);if(c.path===!0){e.push([o,cleanPath(n.slice(a).join("/"))]);break}e.push([o,n[a]])}return e}function stringTuplesToString(t){const e=[];return t.map(n=>{const a=protoFromTuple(n);return e.push(a.name),n.length>1&&n[1]!=null&&e.push(n[1]),null}),cleanPath(e.join("/"))}function stringTuplesToTuples(t){return t.map(e=>{Array.isArray(e)||(e=[e]);const n=protoFromTuple(e);return e.length>1?[n.code,convertToBytes(n.code,e[1])]:[n.code]})}function tuplesToStringTuples(t){return t.map(e=>{const n=protoFromTuple(e);return e[1]!=null?[n.code,convertToString(n.code,e[1])]:[n.code]})}function tuplesToBytes(t){return fromBytes(concat$2(t.map(e=>{const n=protoFromTuple(e);let a=Uint8Array.from(varint.encode(n.code));return e.length>1&&e[1]!=null&&(a=concat$2([a,e[1]])),a})))}function sizeForAddr(t,e){return t.size>0?t.size/8:t.size===0?0:varint.decode(e)+(varint.decode.bytes??0)}function bytesToTuples(t){const e=[];let n=0;for(;n<t.length;){const a=varint.decode(t,n),o=varint.decode.bytes??0,c=getProtocol(a),l=sizeForAddr(c,t.slice(n+o));if(l===0){e.push([a]),n+=o;continue}const u=t.slice(n+o,n+o+l);if(n+=l+o,n>t.length)throw ParseError("Invalid address Uint8Array: "+toString$8(t,"base16"));e.push([a,u])}return e}function bytesToString(t){const e=bytesToTuples(t),n=tuplesToStringTuples(e);return stringTuplesToString(n)}function stringToBytes(t){t=cleanPath(t);const e=stringToStringTuples(t),n=stringTuplesToTuples(e);return tuplesToBytes(n)}function fromString(t){return stringToBytes(t)}function fromBytes(t){const e=validateBytes(t);if(e!=null)throw e;return Uint8Array.from(t)}function validateBytes(t){try{bytesToTuples(t)}catch(e){return e}}function cleanPath(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function ParseError(t){return new Error("Error parsing address: "+t)}function protoFromTuple(t){return getProtocol(t[0])}var __classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(t):a?a.value:e.get(t)},__classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},_DefaultMultiaddr_string,_DefaultMultiaddr_tuples,_DefaultMultiaddr_stringTuples,_a;const inspect=Symbol.for("nodejs.util.inspect.custom"),DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code],resolvers=new Map,symbol=Symbol.for("@multiformats/js-multiaddr/multiaddr");function fromNodeAddress(t,e){if(t==null)throw new Error("requires node address object");if(e==null)throw new Error("requires transport protocol");let n,a=t.address;switch(t.family){case 4:n="ip4";break;case 6:if(n="ip6",a.includes("%")){const o=a.split("%");if(o.length!==2)throw Error("Multiple ip6 zones in multiaddr");a=o[0],n=`/ip6zone/${o[1]}/ip6`}break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new DefaultMultiaddr("/"+[n,a,e,t.port].join("/"))}function isName(t){return isMultiaddr(t)?t.protos().some(e=>e.resolvable):!1}function isMultiaddr(t){return Boolean(t?.[symbol])}class DefaultMultiaddr{constructor(e){if(_DefaultMultiaddr_string.set(this,void 0),_DefaultMultiaddr_tuples.set(this,void 0),_DefaultMultiaddr_stringTuples.set(this,void 0),this[_a]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=fromString(e)}else if(isMultiaddr(e))this.bytes=fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return __classPrivateFieldGet(this,_DefaultMultiaddr_string,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_string,bytesToString(this.bytes),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_string,"f")}toJSON(){return this.toString()}toOptions(){let e,n,a,o,c="";const l=getProtocol("tcp"),u=getProtocol("udp"),d=getProtocol("ip4"),m=getProtocol("ip6"),b=getProtocol("dns6"),x=getProtocol("ip6zone");for(const[w,S]of this.stringTuples())w===x.code&&(c=`%${S??""}`),DNS_CODES.includes(w)&&(n=l.name,o=443,a=`${S??""}${c}`,e=w===b.code?6:4),(w===l.code||w===u.code)&&(n=getProtocol(w).name,o=parseInt(S??"")),(w===d.code||w===m.code)&&(n=getProtocol(w).name,a=`${S??""}${c}`,e=w===m.code?6:4);if(e==null||n==null||a==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:a,transport:n,port:o}}protos(){return this.protoCodes().map(e=>Object.assign({},getProtocol(e)))}protoCodes(){const e=[],n=this.bytes;let a=0;for(;a<n.length;){const o=varint.decode(n,a),c=varint.decode.bytes??0,l=getProtocol(o),u=sizeForAddr(l,n.slice(a+c));a+=u+c,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return __classPrivateFieldGet(this,_DefaultMultiaddr_tuples,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_tuples,bytesToTuples(this.bytes),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_tuples,"f")}stringTuples(){return __classPrivateFieldGet(this,_DefaultMultiaddr_stringTuples,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_stringTuples,tuplesToStringTuples(this.tuples()),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_stringTuples,"f")}encapsulate(e){return e=new DefaultMultiaddr(e),new DefaultMultiaddr(this.toString()+e.toString())}decapsulate(e){const n=e.toString(),a=this.toString(),o=a.lastIndexOf(n);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new DefaultMultiaddr(a.slice(0,o))}decapsulateCode(e){const n=this.tuples();for(let a=n.length-1;a>=0;a--)if(n[a][0]===e)return new DefaultMultiaddr(tuplesToBytes(n.slice(0,a)));return this}getPeerId(){try{const n=this.stringTuples().filter(a=>a[0]===names.ipfs.code).pop();if(n?.[1]!=null){const a=n[1];return a[0]==="Q"||a[0]==="1"?toString$8(base58btc$1.decode(`z${a}`),"base58btc"):toString$8(CID.parse(a).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(n=>getProtocol(n[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return equals$4(this.bytes,e.bytes)}async resolve(e){const n=this.protos().find(c=>c.resolvable);if(n==null)return[this];const a=resolvers.get(n.name);if(a==null)throw errCode(new Error(`no available resolver for ${n.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await a(this,e)).map(c=>new DefaultMultiaddr(c))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const n=(e??this).protos();return!(n.length!==2||n[0].code!==4&&n[0].code!==41||n[1].code!==6&&n[1].code!==273)}[(_DefaultMultiaddr_string=new WeakMap,_DefaultMultiaddr_tuples=new WeakMap,_DefaultMultiaddr_stringTuples=new WeakMap,_a=symbol,inspect)](){return`Multiaddr(${bytesToString(this.bytes)})`}}function multiaddr(t){return new DefaultMultiaddr(t)}function base(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var c=t.charAt(o),l=c.charCodeAt(0);if(n[l]!==255)throw new TypeError(c+" is ambiguous");n[l]=o}var u=t.length,d=t.charAt(0),m=Math.log(u)/Math.log(256),b=Math.log(256)/Math.log(u);function x(S){if(S instanceof Uint8Array||(ArrayBuffer.isView(S)?S=new Uint8Array(S.buffer,S.byteOffset,S.byteLength):Array.isArray(S)&&(S=Uint8Array.from(S))),!(S instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(S.length===0)return"";for(var T=0,B=0,C=0,D=S.length;C!==D&&S[C]===0;)C++,T++;for(var z=(D-C)*b+1>>>0,U=new Uint8Array(z);C!==D;){for(var Y=S[C],X=0,O=z-1;(Y!==0||X<B)&&O!==-1;O--,X++)Y+=256*U[O]>>>0,U[O]=Y%u>>>0,Y=Y/u>>>0;if(Y!==0)throw new Error("Non-zero carry");B=X,C++}for(var J=z-B;J!==z&&U[J]===0;)J++;for(var Z=d.repeat(T);J<z;++J)Z+=t.charAt(U[J]);return Z}function _(S){if(typeof S!="string")throw new TypeError("Expected String");if(S.length===0)return new Uint8Array;var T=0;if(S[T]!==" "){for(var B=0,C=0;S[T]===d;)B++,T++;for(var D=(S.length-T)*m+1>>>0,z=new Uint8Array(D);S[T];){var U=n[S.charCodeAt(T)];if(U===255)return;for(var Y=0,X=D-1;(U!==0||Y<C)&&X!==-1;X--,Y++)U+=u*z[X]>>>0,z[X]=U%256>>>0,U=U/256>>>0;if(U!==0)throw new Error("Non-zero carry");C=Y,T++}if(S[T]!==" "){for(var O=D-C;O!==D&&z[O]===0;)O++;for(var J=new Uint8Array(B+(D-O)),Z=B;O!==D;)J[Z++]=z[O++];return J}}}function w(S){var T=_(S);if(T)return T;throw new Error(`Non-${e} character`)}return{encode:x,decodeUnsafe:_,decode:w}}var src=base,_brrp__multiformats_scope_baseX=src;const coerce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};class Encoder{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(t,e)=>new ComposedDecoder({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder(e,n,a),this.decoder=new Decoder(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from=({name:t,prefix:e,encode:n,decode:a})=>new Codec(t,e,n,a),baseX=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX(n,e);return from({prefix:t,name:e,encode:a,decode:c=>coerce(o(c))})},decode$1=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let c=t.length;for(;t[c-1]==="=";)--c;const l=new Uint8Array(c*n/8|0);let u=0,d=0,m=0;for(let b=0;b<c;++b){const x=o[t[b]];if(x===void 0)throw new SyntaxError(`Non-${a} character`);d=d<<n|x,u+=n,u>=8&&(u-=8,l[m++]=255&d>>u)}if(u>=n||255&d<<8-u)throw new SyntaxError("Unexpected end of data");return l},encode=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let c="",l=0,u=0;for(let d=0;d<t.length;++d)for(u=u<<8|t[d],l+=8;l>n;)l-=n,c+=e[o&u>>l];if(l&&(c+=e[o&u<<n-l]),a)for(;c.length*n&7;)c+="=";return c},rfc4648=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from({prefix:e,name:t,encode(o){return encode(o,a,n)},decode(o){return decode$1(o,a,n,t)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base64=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});debug.formatters.b=t=>t==null?"undefined":base58btc.baseEncode(t);debug.formatters.t=t=>t==null?"undefined":base32.baseEncode(t);debug.formatters.m=t=>t==null?"undefined":base64.baseEncode(t);debug.formatters.p=t=>t==null?"undefined":t.toString();debug.formatters.c=t=>t==null?"undefined":t.toString();debug.formatters.k=t=>t==null?"undefined":t.toString();function logger(t){return Object.assign(debug(t),{error:debug(`${t}:error`),trace:debug(`${t}:trace`)})}const merge$2=mergeOptions$2.bind({ignoreUndefined:!0}),daemonLog$1={info:logger("ipfsd-ctl:client:stdout"),err:logger("ipfsd-ctl:client:stderr")},rpcModuleLogger$1=logger("ipfsd-ctl:client");class Client{constructor(e,n,a){this.opts=a,this.baseUrl=e,this.id=n.id,this.path=n.path,this.initialized=n.initialized,this.started=n.started,this.disposable=n.disposable,this.clean=n.clean,this.subprocess=null,this._setApi(n.apiAddr),this._setGateway(n.gatewayAddr),this._setGrpc(n.grpcAddr),this._createApi(),this._peerId=null}get peer(){if(this._peerId==null)throw new Error("Not started");return this._peerId}_setApi(e){e!=null&&(this.apiAddr=multiaddr(e))}_setGateway(e){e!=null&&(this.gatewayAddr=multiaddr(e))}_setGrpc(e){e!=null&&(this.grpcAddr=multiaddr(e))}_createApi(){if(this.opts.ipfsClientModule!=null&&this.grpcAddr!=null&&this.apiAddr!=null)this.api=this.opts.ipfsClientModule.create({grpc:this.grpcAddr,http:this.apiAddr});else if(this.apiAddr!=null)if(this.opts.kuboRpcModule!=null)rpcModuleLogger$1("Using kubo-rpc-client"),this.api=this.opts.kuboRpcModule.create(this.apiAddr);else if(this.opts.ipfsHttpModule!=null)rpcModuleLogger$1("Using ipfs-http-client"),this.api=this.opts.ipfsHttpModule.create(this.apiAddr);else throw new Error("You must pass either a kuboRpcModule or ipfsHttpModule");this.api!=null&&(this.apiAddr!=null&&(this.api.apiHost=this.apiAddr.nodeAddress().address,this.api.apiPort=this.apiAddr.nodeAddress().port),this.gatewayAddr!=null&&(this.api.gatewayHost=this.gatewayAddr.nodeAddress().address,this.api.gatewayPort=this.gatewayAddr.nodeAddress().port),this.grpcAddr!=null&&(this.api.grpcHost=this.grpcAddr.nodeAddress().address,this.api.grpcPort=this.grpcAddr.nodeAddress().port))}async init(e={}){if(this.initialized)return this;let n={};this.opts.ipfsOptions?.init!=null&&typeof this.opts.ipfsOptions.init!="boolean"&&(n=this.opts.ipfsOptions.init);const a=merge$2({emptyRepo:!1,profiles:this.opts.test===!0?["test"]:[]},n,typeof e=="boolean"?{}:e),c=await(await http.post(`${this.baseUrl}/init`,{searchParams:new URLSearchParams({id:this.id}),json:a})).json();return this.initialized=c.initialized,this.clean=!1,this}async cleanup(){return this.clean?this:(await http.post(`${this.baseUrl}/cleanup`,{searchParams:new URLSearchParams({id:this.id})}),this.clean=!0,this)}async start(){if(!this.started){const a=await(await http.post(`${this.baseUrl}/start`,{searchParams:new URLSearchParams({id:this.id})})).json();this._setApi(a.apiAddr),this._setGateway(a.gatewayAddr),this._setGrpc(a.grpcAddr),this._createApi(),this.started=!0}if(this.api==null)throw new Error("api was not set");const e=await this.api.id();return this._peerId=e,daemonLog$1.info(e),this}async stop(){return this.started?(await http.post(`${this.baseUrl}/stop`,{searchParams:new URLSearchParams({id:this.id})}),this.started=!1,this.disposable&&await this.cleanup(),this):this}async pid(){return(await(await http.get(`${this.baseUrl}/pid`,{searchParams:new URLSearchParams({id:this.id})})).json()).pid}async version(){return(await(await http.get(`${this.baseUrl}/version`,{searchParams:new URLSearchParams({id:this.id})})).json()).version}}const merge$1=mergeOptions$2.bind({ignoreUndefined:!0}),daemonLog={info:logger("ipfsd-ctl:proc:stdout"),err:logger("ipfsd-ctl:proc:stderr")},rpcModuleLogger=logger("ipfsd-ctl:proc");class InProc{constructor(e){this.opts=e,this.path=this.opts.ipfsOptions?.repo??(e.disposable===!0?tmpDir(e.type):defaultRepo(e.type)),this.initOptions=toInitOptions(e.ipfsOptions?.init),this.disposable=Boolean(e.disposable),this.initialized=!1,this.started=!1,this.clean=!0,this.subprocess=null,this._peerId=null}get peer(){if(this._peerId==null)throw new Error("Not started");return this._peerId}async setExec(){if(this.api!=null)return;const e=this.opts.ipfsModule;this.api=await e.create({...this.opts.ipfsOptions,silent:!0,repo:this.path,init:this.initOptions})}_setApi(e){if(this.apiAddr=multiaddr(e),this.opts.kuboRpcModule!=null)rpcModuleLogger("Using kubo-rpc-client"),this.api=this.opts.kuboRpcModule.create(e);else if(this.opts.ipfsHttpModule!=null)rpcModuleLogger("Using ipfs-http-client"),this.api=this.opts.ipfsHttpModule.create(e);else throw new Error("You must pass either a kuboRpcModule or ipfsHttpModule");this.api.apiHost=this.apiAddr.nodeAddress().address,this.api.apiPort=this.apiAddr.nodeAddress().port}async init(e={}){return this.initialized=await repoExists(this.path),this.initialized?(this.clean=!1,this):(this.initOptions=merge$1({emptyRepo:!1,profiles:this.opts.test===!0?["test"]:[]},this.initOptions,toInitOptions(e)),await this.setExec(),this.clean=!1,this.initialized=!0,this)}async cleanup(){return this.clean||(await removeRepo(this.path),this.clean=!0),this}async start(){checkForRunningApi(this.path),await this.setExec(),await this.api.start(),this.started=!0;const e=await this.api.id();return this._peerId=e,daemonLog.info(e),this}async stop(){return this.started?(await this.api.stop(),this.started=!1,this.disposable&&await this.cleanup(),this):this}async pid(){return await Promise.reject(new Error("not implemented"))}async version(){await this.setExec();const{version:e}=await this.api.version();return e}}const toInitOptions=(t={})=>typeof t=="boolean"?{}:t,testsConfig=t=>{const{type:e}=t;let n;return e!=="proc"&&(isBrowser$2||isWebWorker$1)?n=["/ip4/127.0.0.1/tcp/0/ws"]:e==="proc"&&(isBrowser$2||isWebWorker$1)?n=[]:n=["/ip4/127.0.0.1/tcp/0"],{API:{HTTPHeaders:{"Access-Control-Allow-Origin":["*"],"Access-Control-Allow-Methods":["PUT","POST","GET"]}},Addresses:{Swarm:n,API:"/ip4/127.0.0.1/tcp/0",Gateway:"/ip4/127.0.0.1/tcp/0",RPC:"/ip4/127.0.0.1/tcp/0"}}},merge=mergeOptions$2.bind({ignoreUndefined:!0}),defaults={remote:!isNode&&!isElectronMain,endpoint:{}.IPFSD_CTL_SERVER??"http://localhost:43134",disposable:!0,test:!1,type:"go",env:{},args:[],ipfsOptions:{},forceKill:!0,forceKillTimeout:5e3};class DefaultFactory{constructor(e={},n={}){this.opts=merge(defaults,e),this.overrides=merge({js:merge(this.opts,{type:"js"}),go:merge(this.opts,{type:"go"}),proc:merge(this.opts,{type:"proc"})},n),this.controllers=[]}async tmpDir(e={}){const n=merge(this.opts,e);return n.remote===!0?(await(await http.get(`${n.endpoint??""}/util/tmp-dir`,{searchParams:new URLSearchParams({type:n.type??""})})).json()).tmpDir:await Promise.resolve(tmpDir(n.type))}async _spawnRemote(e){const n={json:{...e,remote:!1,ipfsBin:void 0,ipfsModule:void 0,ipfsHttpModule:void 0,kuboRpcModule:void 0}},a=await http.post(`${e.endpoint}/spawn`,n);return new Client(e.endpoint,await a.json(),e)}async spawn(e={}){const n=e.type??this.opts.type??"go",a=merge(this.overrides[n],e),o=merge({start:!1,init:!1},a.test===!0?{config:testsConfig(a),preload:{enabled:!1}}:{},a.ipfsOptions);let c;return a.type==="proc"?c=new InProc({...a,ipfsOptions:o}):a.remote===!0?c=await this._spawnRemote({...a,ipfsOptions:o}):c=new Client({...a,ipfsOptions:o}),this.controllers.push(c),a.disposable===!0&&(e.ipfsOptions==null||e.ipfsOptions?.init!==!1)&&await c.init(o.init),a.disposable===!0&&(e.ipfsOptions==null||e.ipfsOptions?.start!==!1)&&await c.start(),c}async clean(){await Promise.all(this.controllers.map(async e=>await e.stop())),this.controllers=[]}}const require$$0=getAugmentedNamespace(assert$1),require$$1=getAugmentedNamespace(path$1);var old={},hasRequiredOld;function requireOld(){if(hasRequiredOld)return old;hasRequiredOld=1;var t=require$$1,e=browser$1$1.platform==="win32",n=fs__default,a={}.NODE_DEBUG&&/fs/.test({}.NODE_DEBUG);function o(){var d;if(a){var m=new Error;d=b}else d=x;return d;function b(_){_&&(m.message=_.message,_=m,x(_))}function x(_){if(_){if(browser$1$1.throwDeprecation)throw _;if(!browser$1$1.noDeprecation){var w="fs: missing callback "+(_.stack||_.message);browser$1$1.traceDeprecation?console.trace(w):console.error(w)}}}}function c(d){return typeof d=="function"?d:o()}if(t.normalize,e)var l=/(.*?)(?:[\/\\]+|$)/g;else var l=/(.*?)(?:[\/]+|$)/g;if(e)var u=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else var u=/^[\/]*/;return old.realpathSync=function(m,b){if(m=t.resolve(m),b&&Object.prototype.hasOwnProperty.call(b,m))return b[m];var x=m,_={},w={},S,T,B,C;D();function D(){var J=u.exec(m);S=J[0].length,T=J[0],B=J[0],C="",e&&!w[B]&&(n.lstatSync(B),w[B]=!0)}for(;S<m.length;){l.lastIndex=S;var z=l.exec(m);if(C=T,T+=z[0],B=C+z[1],S=l.lastIndex,!(w[B]||b&&b[B]===B)){var U;if(b&&Object.prototype.hasOwnProperty.call(b,B))U=b[B];else{var Y=n.lstatSync(B);if(!Y.isSymbolicLink()){w[B]=!0,b&&(b[B]=B);continue}var X=null;if(!e){var O=Y.dev.toString(32)+":"+Y.ino.toString(32);_.hasOwnProperty(O)&&(X=_[O])}X===null&&(n.statSync(B),X=n.readlinkSync(B)),U=t.resolve(C,X),b&&(b[B]=U),e||(_[O]=X)}m=t.resolve(U,m.slice(S)),D()}}return b&&(b[x]=m),m},old.realpath=function(m,b,x){if(typeof x!="function"&&(x=c(b),b=null),m=t.resolve(m),b&&Object.prototype.hasOwnProperty.call(b,m))return browser$1$1.nextTick(x.bind(null,null,b[m]));var _=m,w={},S={},T,B,C,D;z();function z(){var J=u.exec(m);T=J[0].length,B=J[0],C=J[0],D="",e&&!S[C]?n.lstat(C,function(Z){if(Z)return x(Z);S[C]=!0,U()}):browser$1$1.nextTick(U)}function U(){if(T>=m.length)return b&&(b[_]=m),x(null,m);l.lastIndex=T;var J=l.exec(m);return D=B,B+=J[0],C=D+J[1],T=l.lastIndex,S[C]||b&&b[C]===C?browser$1$1.nextTick(U):b&&Object.prototype.hasOwnProperty.call(b,C)?O(b[C]):n.lstat(C,Y)}function Y(J,Z){if(J)return x(J);if(!Z.isSymbolicLink())return S[C]=!0,b&&(b[C]=C),browser$1$1.nextTick(U);if(!e){var se=Z.dev.toString(32)+":"+Z.ino.toString(32);if(w.hasOwnProperty(se))return X(null,w[se],C)}n.stat(C,function(ie){if(ie)return x(ie);n.readlink(C,function(F,k){e||(w[se]=k),X(F,k)})})}function X(J,Z,se){if(J)return x(J);var ie=t.resolve(D,Z);b&&(b[se]=ie),O(ie)}function O(J){m=t.resolve(J,m.slice(T)),z()}},old}var fs_realpath,hasRequiredFs_realpath;function requireFs_realpath(){if(hasRequiredFs_realpath)return fs_realpath;hasRequiredFs_realpath=1,fs_realpath=u,u.realpath=u,u.sync=d,u.realpathSync=d,u.monkeypatch=m,u.unmonkeypatch=b;var t=fs__default,e=t.realpath,n=t.realpathSync,a=browser$1$1.version,o=/^v[0-5]\./.test(a),c=requireOld();function l(x){return x&&x.syscall==="realpath"&&(x.code==="ELOOP"||x.code==="ENOMEM"||x.code==="ENAMETOOLONG")}function u(x,_,w){if(o)return e(x,_,w);typeof _=="function"&&(w=_,_=null),e(x,_,function(S,T){l(S)?c.realpath(x,_,w):w(S,T)})}function d(x,_){if(o)return n(x,_);try{return n(x,_)}catch(w){if(l(w))return c.realpathSync(x,_);throw w}}function m(){t.realpath=u,t.realpathSync=d}function b(){t.realpath=e,t.realpathSync=n}return fs_realpath}var concatMap,hasRequiredConcatMap;function requireConcatMap(){if(hasRequiredConcatMap)return concatMap;hasRequiredConcatMap=1,concatMap=function(e,n){for(var a=[],o=0;o<e.length;o++){var c=n(e[o],o);t(c)?a.push.apply(a,c):a.push(c)}return a};var t=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};return concatMap}var balancedMatch,hasRequiredBalancedMatch;function requireBalancedMatch(){if(hasRequiredBalancedMatch)return balancedMatch;hasRequiredBalancedMatch=1,balancedMatch=t;function t(a,o,c){a instanceof RegExp&&(a=e(a,c)),o instanceof RegExp&&(o=e(o,c));var l=n(a,o,c);return l&&{start:l[0],end:l[1],pre:c.slice(0,l[0]),body:c.slice(l[0]+a.length,l[1]),post:c.slice(l[1]+o.length)}}function e(a,o){var c=o.match(a);return c?c[0]:null}t.range=n;function n(a,o,c){var l,u,d,m,b,x=c.indexOf(a),_=c.indexOf(o,x+1),w=x;if(x>=0&&_>0){if(a===o)return[x,_];for(l=[],d=c.length;w>=0&&!b;)w==x?(l.push(w),x=c.indexOf(a,w+1)):l.length==1?b=[l.pop(),_]:(u=l.pop(),u<d&&(d=u,m=_),_=c.indexOf(o,w+1)),w=x<_&&x>=0?x:_;l.length&&(b=[d,m])}return b}return balancedMatch}var braceExpansion,hasRequiredBraceExpansion;function requireBraceExpansion(){if(hasRequiredBraceExpansion)return braceExpansion;hasRequiredBraceExpansion=1;var t=requireConcatMap(),e=requireBalancedMatch();braceExpansion=x;var n="\0SLASH"+Math.random()+"\0",a="\0OPEN"+Math.random()+"\0",o="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function u(C){return parseInt(C,10)==C?parseInt(C,10):C.charCodeAt(0)}function d(C){return C.split("\\\\").join(n).split("\\{").join(a).split("\\}").join(o).split("\\,").join(c).split("\\.").join(l)}function m(C){return C.split(n).join("\\").split(a).join("{").split(o).join("}").split(c).join(",").split(l).join(".")}function b(C){if(!C)return[""];var D=[],z=e("{","}",C);if(!z)return C.split(",");var U=z.pre,Y=z.body,X=z.post,O=U.split(",");O[O.length-1]+="{"+Y+"}";var J=b(X);return X.length&&(O[O.length-1]+=J.shift(),O.push.apply(O,J)),D.push.apply(D,O),D}function x(C){return C?(C.substr(0,2)==="{}"&&(C="\\{\\}"+C.substr(2)),B(d(C),!0).map(m)):[]}function _(C){return"{"+C+"}"}function w(C){return/^-?0\d/.test(C)}function S(C,D){return C<=D}function T(C,D){return C>=D}function B(C,D){var z=[],U=e("{","}",C);if(!U||/\$$/.test(U.pre))return[C];var Y=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(U.body),X=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(U.body),O=Y||X,J=U.body.indexOf(",")>=0;if(!O&&!J)return U.post.match(/,.*\}/)?(C=U.pre+"{"+U.body+o+U.post,B(C)):[C];var Z;if(O)Z=U.body.split(/\.\./);else if(Z=b(U.body),Z.length===1&&(Z=B(Z[0],!1).map(_),Z.length===1)){var ie=U.post.length?B(U.post,!1):[""];return ie.map(function(oe){return U.pre+Z[0]+oe})}var se=U.pre,ie=U.post.length?B(U.post,!1):[""],F;if(O){var k=u(Z[0]),y=u(Z[1]),A=Math.max(Z[0].length,Z[1].length),I=Z.length==3?Math.abs(u(Z[2])):1,P=S,H=y<k;H&&(I*=-1,P=T);var q=Z.some(w);F=[];for(var j=k;P(j,y);j+=I){var M;if(X)M=String.fromCharCode(j),M==="\\"&&(M="");else if(M=String(j),q){var E=A-M.length;if(E>0){var L=new Array(E+1).join("0");j<0?M="-"+L+M.slice(1):M=L+M}}F.push(M)}}else F=t(Z,function(fe){return B(fe,!1)});for(var le=0;le<F.length;le++)for(var Q=0;Q<ie.length;Q++){var ce=se+F[le]+ie[Q];(!D||O||ce)&&z.push(ce)}return z}return braceExpansion}var minimatch_1,hasRequiredMinimatch;function requireMinimatch(){if(hasRequiredMinimatch)return minimatch_1;hasRequiredMinimatch=1,minimatch_1=w,w.Minimatch=S;var t=function(){try{return require$$1}catch{}}()||{sep:"/"};w.sep=t.sep;var e=w.GLOBSTAR=S.GLOBSTAR={},n=requireBraceExpansion(),a={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},o="[^/]",c=o+"*?",l="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",u="(?:(?!(?:\\/|^)\\.).)*?",d=m("().*{}+?[]^$\\!");function m(Z){return Z.split("").reduce(function(se,ie){return se[ie]=!0,se},{})}var b=/\/+/;w.filter=x;function x(Z,se){return se=se||{},function(ie,F,k){return w(ie,Z,se)}}function _(Z,se){se=se||{};var ie={};return Object.keys(Z).forEach(function(F){ie[F]=Z[F]}),Object.keys(se).forEach(function(F){ie[F]=se[F]}),ie}w.defaults=function(Z){if(!Z||typeof Z!="object"||!Object.keys(Z).length)return w;var se=w,ie=function(k,y,A){return se(k,y,_(Z,A))};return ie.Minimatch=function(k,y){return new se.Minimatch(k,_(Z,y))},ie.Minimatch.defaults=function(k){return se.defaults(_(Z,k)).Minimatch},ie.filter=function(k,y){return se.filter(k,_(Z,y))},ie.defaults=function(k){return se.defaults(_(Z,k))},ie.makeRe=function(k,y){return se.makeRe(k,_(Z,y))},ie.braceExpand=function(k,y){return se.braceExpand(k,_(Z,y))},ie.match=function(F,k,y){return se.match(F,k,_(Z,y))},ie},S.defaults=function(Z){return w.defaults(Z).Minimatch};function w(Z,se,ie){return z(se),ie||(ie={}),!ie.nocomment&&se.charAt(0)==="#"?!1:new S(se,ie).match(Z)}function S(Z,se){if(!(this instanceof S))return new S(Z,se);z(Z),se||(se={}),Z=Z.trim(),!se.allowWindowsEscape&&t.sep!=="/"&&(Z=Z.split(t.sep).join("/")),this.options=se,this.set=[],this.pattern=Z,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!se.partial,this.make()}S.prototype.debug=function(){},S.prototype.make=T;function T(){var Z=this.pattern,se=this.options;if(!se.nocomment&&Z.charAt(0)==="#"){this.comment=!0;return}if(!Z){this.empty=!0;return}this.parseNegate();var ie=this.globSet=this.braceExpand();se.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,ie),ie=this.globParts=ie.map(function(F){return F.split(b)}),this.debug(this.pattern,ie),ie=ie.map(function(F,k,y){return F.map(this.parse,this)},this),this.debug(this.pattern,ie),ie=ie.filter(function(F){return F.indexOf(!1)===-1}),this.debug(this.pattern,ie),this.set=ie}S.prototype.parseNegate=B;function B(){var Z=this.pattern,se=!1,ie=this.options,F=0;if(!ie.nonegate){for(var k=0,y=Z.length;k<y&&Z.charAt(k)==="!";k++)se=!se,F++;F&&(this.pattern=Z.substr(F)),this.negate=se}}w.braceExpand=function(Z,se){return C(Z,se)},S.prototype.braceExpand=C;function C(Z,se){return se||(this instanceof S?se=this.options:se={}),Z=typeof Z>"u"?this.pattern:Z,z(Z),se.nobrace||!/\{(?:(?!\{).)*\}/.test(Z)?[Z]:n(Z)}var D=1024*64,z=function(Z){if(typeof Z!="string")throw new TypeError("invalid pattern");if(Z.length>D)throw new TypeError("pattern is too long")};S.prototype.parse=Y;var U={};function Y(Z,se){z(Z);var ie=this.options;if(Z==="**")if(ie.noglobstar)Z="*";else return e;if(Z==="")return"";var F="",k=!!ie.nocase,y=!1,A=[],I=[],P,H=!1,q=-1,j=-1,M=Z.charAt(0)==="."?"":ie.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",E=this;function L(){if(P){switch(P){case"*":F+=c,k=!0;break;case"?":F+=o,k=!0;break;default:F+="\\"+P;break}E.debug("clearStateChar %j %j",P,F),P=!1}}for(var le=0,Q=Z.length,ce;le<Q&&(ce=Z.charAt(le));le++){if(this.debug("%s	%s %s %j",Z,le,F,ce),y&&d[ce]){F+="\\"+ce,y=!1;continue}switch(ce){case"/":return!1;case"\\":L(),y=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",Z,le,F,ce),H){this.debug("  in class"),ce==="!"&&le===j+1&&(ce="^"),F+=ce;continue}E.debug("call clearStateChar %j",P),L(),P=ce,ie.noext&&L();continue;case"(":if(H){F+="(";continue}if(!P){F+="\\(";continue}A.push({type:P,start:le-1,reStart:F.length,open:a[P].open,close:a[P].close}),F+=P==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",P,F),P=!1;continue;case")":if(H||!A.length){F+="\\)";continue}L(),k=!0;var fe=A.pop();F+=fe.close,fe.type==="!"&&I.push(fe),fe.reEnd=F.length;continue;case"|":if(H||!A.length||y){F+="\\|",y=!1;continue}L(),F+="|";continue;case"[":if(L(),H){F+="\\"+ce;continue}H=!0,j=le,q=F.length,F+=ce;continue;case"]":if(le===j+1||!H){F+="\\"+ce,y=!1;continue}var oe=Z.substring(j+1,le);try{RegExp("["+oe+"]")}catch{var de=this.parse(oe,U);F=F.substr(0,q)+"\\["+de[0]+"\\]",k=k||de[1],H=!1;continue}k=!0,H=!1,F+=ce;continue;default:L(),y?y=!1:d[ce]&&!(ce==="^"&&H)&&(F+="\\"),F+=ce}}for(H&&(oe=Z.substr(j+1),de=this.parse(oe,U),F=F.substr(0,q)+"\\["+de[0],k=k||de[1]),fe=A.pop();fe;fe=A.pop()){var ae=F.slice(fe.reStart+fe.open.length);this.debug("setting tail",F,fe),ae=ae.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(je,Pe,me){return me||(me="\\"),Pe+Pe+me+"|"}),this.debug(`tail=%j
   %s`,ae,ae,fe,F);var he=fe.type==="*"?c:fe.type==="?"?o:"\\"+fe.type;k=!0,F=F.slice(0,fe.reStart)+he+"\\("+ae}L(),y&&(F+="\\\\");var te=!1;switch(F.charAt(0)){case"[":case".":case"(":te=!0}for(var pe=I.length-1;pe>-1;pe--){var ee=I[pe],ge=F.slice(0,ee.reStart),Ee=F.slice(ee.reStart,ee.reEnd-8),be=F.slice(ee.reEnd-8,ee.reEnd),xe=F.slice(ee.reEnd);be+=xe;var ve=ge.split("(").length-1,Se=xe;for(le=0;le<ve;le++)Se=Se.replace(/\)[+*?]?/,"");xe=Se;var ke="";xe===""&&se!==U&&(ke="$");var Ce=ge+Ee+xe+ke+be;F=Ce}if(F!==""&&k&&(F="(?=.)"+F),te&&(F=M+F),se===U)return[F,k];if(!k)return O(Z);var Re=ie.nocase?"i":"";try{var Le=new RegExp("^"+F+"$",Re)}catch{return new RegExp("$.")}return Le._glob=Z,Le._src=F,Le}w.makeRe=function(Z,se){return new S(Z,se||{}).makeRe()},S.prototype.makeRe=X;function X(){if(this.regexp||this.regexp===!1)return this.regexp;var Z=this.set;if(!Z.length)return this.regexp=!1,this.regexp;var se=this.options,ie=se.noglobstar?c:se.dot?l:u,F=se.nocase?"i":"",k=Z.map(function(y){return y.map(function(A){return A===e?ie:typeof A=="string"?J(A):A._src}).join("\\/")}).join("|");k="^(?:"+k+")$",this.negate&&(k="^(?!"+k+").*$");try{this.regexp=new RegExp(k,F)}catch{this.regexp=!1}return this.regexp}w.match=function(Z,se,ie){ie=ie||{};var F=new S(se,ie);return Z=Z.filter(function(k){return F.match(k)}),F.options.nonull&&!Z.length&&Z.push(se),Z},S.prototype.match=function(se,ie){if(typeof ie>"u"&&(ie=this.partial),this.debug("match",se,this.pattern),this.comment)return!1;if(this.empty)return se==="";if(se==="/"&&ie)return!0;var F=this.options;t.sep!=="/"&&(se=se.split(t.sep).join("/")),se=se.split(b),this.debug(this.pattern,"split",se);var k=this.set;this.debug(this.pattern,"set",k);var y,A;for(A=se.length-1;A>=0&&(y=se[A],!y);A--);for(A=0;A<k.length;A++){var I=k[A],P=se;F.matchBase&&I.length===1&&(P=[y]);var H=this.matchOne(P,I,ie);if(H)return F.flipNegate?!0:!this.negate}return F.flipNegate?!1:this.negate},S.prototype.matchOne=function(Z,se,ie){var F=this.options;this.debug("matchOne",{this:this,file:Z,pattern:se}),this.debug("matchOne",Z.length,se.length);for(var k=0,y=0,A=Z.length,I=se.length;k<A&&y<I;k++,y++){this.debug("matchOne loop");var P=se[y],H=Z[k];if(this.debug(se,P,H),P===!1)return!1;if(P===e){this.debug("GLOBSTAR",[se,P,H]);var q=k,j=y+1;if(j===I){for(this.debug("** at the end");k<A;k++)if(Z[k]==="."||Z[k]===".."||!F.dot&&Z[k].charAt(0)===".")return!1;return!0}for(;q<A;){var M=Z[q];if(this.debug(`
globstar while`,Z,q,se,j,M),this.matchOne(Z.slice(q),se.slice(j),ie))return this.debug("globstar found match!",q,A,M),!0;if(M==="."||M===".."||!F.dot&&M.charAt(0)==="."){this.debug("dot detected!",Z,q,se,j);break}this.debug("globstar swallow a segment, and continue"),q++}return!!(ie&&(this.debug(`
>>> no match, partial?`,Z,q,se,j),q===A))}var E;if(typeof P=="string"?(E=H===P,this.debug("string match",P,H,E)):(E=H.match(P),this.debug("pattern match",P,H,E)),!E)return!1}if(k===A&&y===I)return!0;if(k===A)return ie;if(y===I)return k===A-1&&Z[k]==="";throw new Error("wtf?")};function O(Z){return Z.replace(/\\(.)/g,"$1")}function J(Z){return Z.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}return minimatch_1}var pathIsAbsoluteExports={},pathIsAbsolute={get exports(){return pathIsAbsoluteExports},set exports(t){pathIsAbsoluteExports=t}},hasRequiredPathIsAbsolute;function requirePathIsAbsolute(){if(hasRequiredPathIsAbsolute)return pathIsAbsoluteExports;hasRequiredPathIsAbsolute=1;function t(n){return n.charAt(0)==="/"}function e(n){var a=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,o=a.exec(n),c=o[1]||"",l=Boolean(c&&c.charAt(1)!==":");return Boolean(o[2]||l)}return pathIsAbsolute.exports=browser$1$1.platform==="win32"?e:t,pathIsAbsoluteExports.posix=t,pathIsAbsoluteExports.win32=e,pathIsAbsoluteExports}var common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1,common.setopts=m,common.ownProp=t,common.makeAbs=_,common.finish=b,common.mark=x,common.isIgnored=w,common.childrenIgnored=S;function t(T,B){return Object.prototype.hasOwnProperty.call(T,B)}var e=fs__default,n=require$$1,a=requireMinimatch(),o=requirePathIsAbsolute(),c=a.Minimatch;function l(T,B){return T.localeCompare(B,"en")}function u(T,B){T.ignore=B.ignore||[],Array.isArray(T.ignore)||(T.ignore=[T.ignore]),T.ignore.length&&(T.ignore=T.ignore.map(d))}function d(T){var B=null;if(T.slice(-3)==="/**"){var C=T.replace(/(\/\*\*)+$/,"");B=new c(C,{dot:!0})}return{matcher:new c(T,{dot:!0}),gmatcher:B}}function m(T,B,C){if(C||(C={}),C.matchBase&&B.indexOf("/")===-1){if(C.noglobstar)throw new Error("base matching requires globstar");B="**/"+B}T.silent=!!C.silent,T.pattern=B,T.strict=C.strict!==!1,T.realpath=!!C.realpath,T.realpathCache=C.realpathCache||Object.create(null),T.follow=!!C.follow,T.dot=!!C.dot,T.mark=!!C.mark,T.nodir=!!C.nodir,T.nodir&&(T.mark=!0),T.sync=!!C.sync,T.nounique=!!C.nounique,T.nonull=!!C.nonull,T.nosort=!!C.nosort,T.nocase=!!C.nocase,T.stat=!!C.stat,T.noprocess=!!C.noprocess,T.absolute=!!C.absolute,T.fs=C.fs||e,T.maxLength=C.maxLength||1/0,T.cache=C.cache||Object.create(null),T.statCache=C.statCache||Object.create(null),T.symlinks=C.symlinks||Object.create(null),u(T,C),T.changedCwd=!1;var D=browser$1$1.cwd();t(C,"cwd")?(T.cwd=n.resolve(C.cwd),T.changedCwd=T.cwd!==D):T.cwd=D,T.root=C.root||n.resolve(T.cwd,"/"),T.root=n.resolve(T.root),browser$1$1.platform==="win32"&&(T.root=T.root.replace(/\\/g,"/")),T.cwdAbs=o(T.cwd)?T.cwd:_(T,T.cwd),browser$1$1.platform==="win32"&&(T.cwdAbs=T.cwdAbs.replace(/\\/g,"/")),T.nomount=!!C.nomount,C.nonegate=!0,C.nocomment=!0,C.allowWindowsEscape=!1,T.minimatch=new c(B,C),T.options=T.minimatch.options}function b(T){for(var B=T.nounique,C=B?[]:Object.create(null),D=0,z=T.matches.length;D<z;D++){var U=T.matches[D];if(!U||Object.keys(U).length===0){if(T.nonull){var Y=T.minimatch.globSet[D];B?C.push(Y):C[Y]=!0}}else{var X=Object.keys(U);B?C.push.apply(C,X):X.forEach(function(O){C[O]=!0})}}if(B||(C=Object.keys(C)),T.nosort||(C=C.sort(l)),T.mark){for(var D=0;D<C.length;D++)C[D]=T._mark(C[D]);T.nodir&&(C=C.filter(function(O){var J=!/\/$/.test(O),Z=T.cache[O]||T.cache[_(T,O)];return J&&Z&&(J=Z!=="DIR"&&!Array.isArray(Z)),J}))}T.ignore.length&&(C=C.filter(function(O){return!w(T,O)})),T.found=C}function x(T,B){var C=_(T,B),D=T.cache[C],z=B;if(D){var U=D==="DIR"||Array.isArray(D),Y=B.slice(-1)==="/";if(U&&!Y?z+="/":!U&&Y&&(z=z.slice(0,-1)),z!==B){var X=_(T,z);T.statCache[X]=T.statCache[C],T.cache[X]=T.cache[C]}}return z}function _(T,B){var C=B;return B.charAt(0)==="/"?C=n.join(T.root,B):o(B)||B===""?C=B:T.changedCwd?C=n.resolve(T.cwd,B):C=n.resolve(B),browser$1$1.platform==="win32"&&(C=C.replace(/\\/g,"/")),C}function w(T,B){return T.ignore.length?T.ignore.some(function(C){return C.matcher.match(B)||!!(C.gmatcher&&C.gmatcher.match(B))}):!1}function S(T,B){return T.ignore.length?T.ignore.some(function(C){return!!(C.gmatcher&&C.gmatcher.match(B))}):!1}return common}var sync,hasRequiredSync;function requireSync(){if(hasRequiredSync)return sync;hasRequiredSync=1,sync=b,b.GlobSync=x;var t=requireFs_realpath(),e=requireMinimatch();e.Minimatch,requireGlob().Glob;var n=require$$1,a=require$$0,o=requirePathIsAbsolute(),c=requireCommon(),l=c.setopts,u=c.ownProp,d=c.childrenIgnored,m=c.isIgnored;function b(_,w){if(typeof w=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new x(_,w).found}function x(_,w){if(!_)throw new Error("must provide pattern");if(typeof w=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof x))return new x(_,w);if(l(this,_,w),this.noprocess)return this;var S=this.minimatch.set.length;this.matches=new Array(S);for(var T=0;T<S;T++)this._process(this.minimatch.set[T],T,!1);this._finish()}return x.prototype._finish=function(){if(a.ok(this instanceof x),this.realpath){var _=this;this.matches.forEach(function(w,S){var T=_.matches[S]=Object.create(null);for(var B in w)try{B=_._makeAbs(B);var C=t.realpathSync(B,_.realpathCache);T[C]=!0}catch(D){if(D.syscall==="stat")T[_._makeAbs(B)]=!0;else throw D}})}c.finish(this)},x.prototype._process=function(_,w,S){a.ok(this instanceof x);for(var T=0;typeof _[T]=="string";)T++;var B;switch(T){case _.length:this._processSimple(_.join("/"),w);return;case 0:B=null;break;default:B=_.slice(0,T).join("/");break}var C=_.slice(T),D;B===null?D=".":((o(B)||o(_.map(function(Y){return typeof Y=="string"?Y:"[*]"}).join("/")))&&(!B||!o(B))&&(B="/"+B),D=B);var z=this._makeAbs(D);if(!d(this,D)){var U=C[0]===e.GLOBSTAR;U?this._processGlobStar(B,D,z,C,w,S):this._processReaddir(B,D,z,C,w,S)}},x.prototype._processReaddir=function(_,w,S,T,B,C){var D=this._readdir(S,C);if(D){for(var z=T[0],U=!!this.minimatch.negate,Y=z._glob,X=this.dot||Y.charAt(0)===".",O=[],J=0;J<D.length;J++){var Z=D[J];if(Z.charAt(0)!=="."||X){var se;U&&!_?se=!Z.match(z):se=Z.match(z),se&&O.push(Z)}}var ie=O.length;if(ie!==0){if(T.length===1&&!this.mark&&!this.stat){this.matches[B]||(this.matches[B]=Object.create(null));for(var J=0;J<ie;J++){var Z=O[J];_&&(_.slice(-1)!=="/"?Z=_+"/"+Z:Z=_+Z),Z.charAt(0)==="/"&&!this.nomount&&(Z=n.join(this.root,Z)),this._emitMatch(B,Z)}return}T.shift();for(var J=0;J<ie;J++){var Z=O[J],F;_?F=[_,Z]:F=[Z],this._process(F.concat(T),B,C)}}}},x.prototype._emitMatch=function(_,w){if(!m(this,w)){var S=this._makeAbs(w);if(this.mark&&(w=this._mark(w)),this.absolute&&(w=S),!this.matches[_][w]){if(this.nodir){var T=this.cache[S];if(T==="DIR"||Array.isArray(T))return}this.matches[_][w]=!0,this.stat&&this._stat(w)}}},x.prototype._readdirInGlobStar=function(_){if(this.follow)return this._readdir(_,!1);var w,S;try{S=this.fs.lstatSync(_)}catch(B){if(B.code==="ENOENT")return null}var T=S&&S.isSymbolicLink();return this.symlinks[_]=T,!T&&S&&!S.isDirectory()?this.cache[_]="FILE":w=this._readdir(_,!1),w},x.prototype._readdir=function(_,w){if(w&&!u(this.symlinks,_))return this._readdirInGlobStar(_);if(u(this.cache,_)){var S=this.cache[_];if(!S||S==="FILE")return null;if(Array.isArray(S))return S}try{return this._readdirEntries(_,this.fs.readdirSync(_))}catch(T){return this._readdirError(_,T),null}},x.prototype._readdirEntries=function(_,w){if(!this.mark&&!this.stat)for(var S=0;S<w.length;S++){var T=w[S];_==="/"?T=_+T:T=_+"/"+T,this.cache[T]=!0}return this.cache[_]=w,w},x.prototype._readdirError=function(_,w){switch(w.code){case"ENOTSUP":case"ENOTDIR":var S=this._makeAbs(_);if(this.cache[S]="FILE",S===this.cwdAbs){var T=new Error(w.code+" invalid cwd "+this.cwd);throw T.path=this.cwd,T.code=w.code,T}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(_)]=!1;break;default:if(this.cache[this._makeAbs(_)]=!1,this.strict)throw w;this.silent||console.error("glob error",w);break}},x.prototype._processGlobStar=function(_,w,S,T,B,C){var D=this._readdir(S,C);if(D){var z=T.slice(1),U=_?[_]:[],Y=U.concat(z);this._process(Y,B,!1);var X=D.length,O=this.symlinks[S];if(!(O&&C))for(var J=0;J<X;J++){var Z=D[J];if(!(Z.charAt(0)==="."&&!this.dot)){var se=U.concat(D[J],z);this._process(se,B,!0);var ie=U.concat(D[J],T);this._process(ie,B,!0)}}}},x.prototype._processSimple=function(_,w){var S=this._stat(_);if(this.matches[w]||(this.matches[w]=Object.create(null)),!!S){if(_&&o(_)&&!this.nomount){var T=/[\/\\]$/.test(_);_.charAt(0)==="/"?_=n.join(this.root,_):(_=n.resolve(this.root,_),T&&(_+="/"))}browser$1$1.platform==="win32"&&(_=_.replace(/\\/g,"/")),this._emitMatch(w,_)}},x.prototype._stat=function(_){var w=this._makeAbs(_),S=_.slice(-1)==="/";if(_.length>this.maxLength)return!1;if(!this.stat&&u(this.cache,w)){var C=this.cache[w];if(Array.isArray(C)&&(C="DIR"),!S||C==="DIR")return C;if(S&&C==="FILE")return!1}var T=this.statCache[w];if(!T){var B;try{B=this.fs.lstatSync(w)}catch(D){if(D&&(D.code==="ENOENT"||D.code==="ENOTDIR"))return this.statCache[w]=!1,!1}if(B&&B.isSymbolicLink())try{T=this.fs.statSync(w)}catch{T=B}else T=B}this.statCache[w]=T;var C=!0;return T&&(C=T.isDirectory()?"DIR":"FILE"),this.cache[w]=this.cache[w]||C,S&&C==="FILE"?!1:C},x.prototype._mark=function(_){return c.mark(this,_)},x.prototype._makeAbs=function(_){return c.makeAbs(this,_)},sync}var wrappy_1,hasRequiredWrappy;function requireWrappy(){if(hasRequiredWrappy)return wrappy_1;hasRequiredWrappy=1,wrappy_1=t;function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(o){a[o]=e[o]}),a;function a(){for(var o=new Array(arguments.length),c=0;c<o.length;c++)o[c]=arguments[c];var l=e.apply(this,o),u=o[o.length-1];return typeof l=="function"&&l!==u&&Object.keys(u).forEach(function(d){l[d]=u[d]}),l}}return wrappy_1}var onceExports={},once={get exports(){return onceExports},set exports(t){onceExports=t}},hasRequiredOnce;function requireOnce(){if(hasRequiredOnce)return onceExports;hasRequiredOnce=1;var t=requireWrappy();once.exports=t(e),onceExports.strict=t(n),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return n(this)},configurable:!0})});function e(a){var o=function(){return o.called?o.value:(o.called=!0,o.value=a.apply(this,arguments))};return o.called=!1,o}function n(a){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=a.apply(this,arguments)},c=a.name||"Function wrapped with `once`";return o.onceError=c+" shouldn't be called more than once",o.called=!1,o}return onceExports}var inflight_1,hasRequiredInflight;function requireInflight(){if(hasRequiredInflight)return inflight_1;hasRequiredInflight=1;var t=requireWrappy(),e=Object.create(null),n=requireOnce();inflight_1=t(a);function a(l,u){return e[l]?(e[l].push(u),null):(e[l]=[u],o(l))}function o(l){return n(function u(){var d=e[l],m=d.length,b=c(arguments);try{for(var x=0;x<m;x++)d[x].apply(null,b)}finally{d.length>m?(d.splice(0,m),browser$1$1.nextTick(function(){u.apply(null,b)})):delete e[l]}})}function c(l){for(var u=l.length,d=[],m=0;m<u;m++)d[m]=l[m];return d}return inflight_1}var glob_1,hasRequiredGlob;function requireGlob(){if(hasRequiredGlob)return glob_1;hasRequiredGlob=1,glob_1=T;var t=requireFs_realpath(),e=requireMinimatch();e.Minimatch;var n=inherits_browserExports,a=eventsExports.EventEmitter,o=require$$1,c=require$$0,l=requirePathIsAbsolute(),u=requireSync(),d=requireCommon(),m=d.setopts,b=d.ownProp,x=requireInflight(),_=d.childrenIgnored,w=d.isIgnored,S=requireOnce();function T(U,Y,X){if(typeof Y=="function"&&(X=Y,Y={}),Y||(Y={}),Y.sync){if(X)throw new TypeError("callback provided to sync glob");return u(U,Y)}return new D(U,Y,X)}T.sync=u;var B=T.GlobSync=u.GlobSync;T.glob=T;function C(U,Y){if(Y===null||typeof Y!="object")return U;for(var X=Object.keys(Y),O=X.length;O--;)U[X[O]]=Y[X[O]];return U}T.hasMagic=function(U,Y){var X=C({},Y);X.noprocess=!0;var O=new D(U,X),J=O.minimatch.set;if(!U)return!1;if(J.length>1)return!0;for(var Z=0;Z<J[0].length;Z++)if(typeof J[0][Z]!="string")return!0;return!1},T.Glob=D,n(D,a);function D(U,Y,X){if(typeof Y=="function"&&(X=Y,Y=null),Y&&Y.sync){if(X)throw new TypeError("callback provided to sync glob");return new B(U,Y)}if(!(this instanceof D))return new D(U,Y,X);m(this,U,Y),this._didRealPath=!1;var O=this.minimatch.set.length;this.matches=new Array(O),typeof X=="function"&&(X=S(X),this.on("error",X),this.on("end",function(F){X(null,F)}));var J=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(O===0)return ie();for(var Z=!0,se=0;se<O;se++)this._process(this.minimatch.set[se],se,!1,ie);Z=!1;function ie(){--J._processing,J._processing<=0&&(Z?browser$1$1.nextTick(function(){J._finish()}):J._finish())}}D.prototype._finish=function(){if(c(this instanceof D),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();d.finish(this),this.emit("end",this.found)}},D.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var U=this.matches.length;if(U===0)return this._finish();for(var Y=this,X=0;X<this.matches.length;X++)this._realpathSet(X,O);function O(){--U===0&&Y._finish()}},D.prototype._realpathSet=function(U,Y){var X=this.matches[U];if(!X)return Y();var O=Object.keys(X),J=this,Z=O.length;if(Z===0)return Y();var se=this.matches[U]=Object.create(null);O.forEach(function(ie,F){ie=J._makeAbs(ie),t.realpath(ie,J.realpathCache,function(k,y){k?k.syscall==="stat"?se[ie]=!0:J.emit("error",k):se[y]=!0,--Z===0&&(J.matches[U]=se,Y())})})},D.prototype._mark=function(U){return d.mark(this,U)},D.prototype._makeAbs=function(U){return d.makeAbs(this,U)},D.prototype.abort=function(){this.aborted=!0,this.emit("abort")},D.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},D.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var U=this._emitQueue.slice(0);this._emitQueue.length=0;for(var Y=0;Y<U.length;Y++){var X=U[Y];this._emitMatch(X[0],X[1])}}if(this._processQueue.length){var O=this._processQueue.slice(0);this._processQueue.length=0;for(var Y=0;Y<O.length;Y++){var J=O[Y];this._processing--,this._process(J[0],J[1],J[2],J[3])}}}},D.prototype._process=function(U,Y,X,O){if(c(this instanceof D),c(typeof O=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([U,Y,X,O]);return}for(var J=0;typeof U[J]=="string";)J++;var Z;switch(J){case U.length:this._processSimple(U.join("/"),Y,O);return;case 0:Z=null;break;default:Z=U.slice(0,J).join("/");break}var se=U.slice(J),ie;Z===null?ie=".":((l(Z)||l(U.map(function(y){return typeof y=="string"?y:"[*]"}).join("/")))&&(!Z||!l(Z))&&(Z="/"+Z),ie=Z);var F=this._makeAbs(ie);if(_(this,ie))return O();var k=se[0]===e.GLOBSTAR;k?this._processGlobStar(Z,ie,F,se,Y,X,O):this._processReaddir(Z,ie,F,se,Y,X,O)}},D.prototype._processReaddir=function(U,Y,X,O,J,Z,se){var ie=this;this._readdir(X,Z,function(F,k){return ie._processReaddir2(U,Y,X,O,J,Z,k,se)})},D.prototype._processReaddir2=function(U,Y,X,O,J,Z,se,ie){if(!se)return ie();for(var F=O[0],k=!!this.minimatch.negate,y=F._glob,A=this.dot||y.charAt(0)===".",I=[],P=0;P<se.length;P++){var H=se[P];if(H.charAt(0)!=="."||A){var q;k&&!U?q=!H.match(F):q=H.match(F),q&&I.push(H)}}var j=I.length;if(j===0)return ie();if(O.length===1&&!this.mark&&!this.stat){this.matches[J]||(this.matches[J]=Object.create(null));for(var P=0;P<j;P++){var H=I[P];U&&(U!=="/"?H=U+"/"+H:H=U+H),H.charAt(0)==="/"&&!this.nomount&&(H=o.join(this.root,H)),this._emitMatch(J,H)}return ie()}O.shift();for(var P=0;P<j;P++){var H=I[P];U&&(U!=="/"?H=U+"/"+H:H=U+H),this._process([H].concat(O),J,Z,ie)}ie()},D.prototype._emitMatch=function(U,Y){if(!this.aborted&&!w(this,Y)){if(this.paused){this._emitQueue.push([U,Y]);return}var X=l(Y)?Y:this._makeAbs(Y);if(this.mark&&(Y=this._mark(Y)),this.absolute&&(Y=X),!this.matches[U][Y]){if(this.nodir){var O=this.cache[X];if(O==="DIR"||Array.isArray(O))return}this.matches[U][Y]=!0;var J=this.statCache[X];J&&this.emit("stat",Y,J),this.emit("match",Y)}}},D.prototype._readdirInGlobStar=function(U,Y){if(this.aborted)return;if(this.follow)return this._readdir(U,!1,Y);var X="lstat\0"+U,O=this,J=x(X,Z);J&&O.fs.lstat(U,J);function Z(se,ie){if(se&&se.code==="ENOENT")return Y();var F=ie&&ie.isSymbolicLink();O.symlinks[U]=F,!F&&ie&&!ie.isDirectory()?(O.cache[U]="FILE",Y()):O._readdir(U,!1,Y)}},D.prototype._readdir=function(U,Y,X){if(!this.aborted&&(X=x("readdir\0"+U+"\0"+Y,X),!!X)){if(Y&&!b(this.symlinks,U))return this._readdirInGlobStar(U,X);if(b(this.cache,U)){var O=this.cache[U];if(!O||O==="FILE")return X();if(Array.isArray(O))return X(null,O)}var J=this;J.fs.readdir(U,z(this,U,X))}};function z(U,Y,X){return function(O,J){O?U._readdirError(Y,O,X):U._readdirEntries(Y,J,X)}}return D.prototype._readdirEntries=function(U,Y,X){if(!this.aborted){if(!this.mark&&!this.stat)for(var O=0;O<Y.length;O++){var J=Y[O];U==="/"?J=U+J:J=U+"/"+J,this.cache[J]=!0}return this.cache[U]=Y,X(null,Y)}},D.prototype._readdirError=function(U,Y,X){if(!this.aborted){switch(Y.code){case"ENOTSUP":case"ENOTDIR":var O=this._makeAbs(U);if(this.cache[O]="FILE",O===this.cwdAbs){var J=new Error(Y.code+" invalid cwd "+this.cwd);J.path=this.cwd,J.code=Y.code,this.emit("error",J),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(U)]=!1;break;default:this.cache[this._makeAbs(U)]=!1,this.strict&&(this.emit("error",Y),this.abort()),this.silent||console.error("glob error",Y);break}return X()}},D.prototype._processGlobStar=function(U,Y,X,O,J,Z,se){var ie=this;this._readdir(X,Z,function(F,k){ie._processGlobStar2(U,Y,X,O,J,Z,k,se)})},D.prototype._processGlobStar2=function(U,Y,X,O,J,Z,se,ie){if(!se)return ie();var F=O.slice(1),k=U?[U]:[],y=k.concat(F);this._process(y,J,!1,ie);var A=this.symlinks[X],I=se.length;if(A&&Z)return ie();for(var P=0;P<I;P++){var H=se[P];if(!(H.charAt(0)==="."&&!this.dot)){var q=k.concat(se[P],F);this._process(q,J,!0,ie);var j=k.concat(se[P],O);this._process(j,J,!0,ie)}}ie()},D.prototype._processSimple=function(U,Y,X){var O=this;this._stat(U,function(J,Z){O._processSimple2(U,Y,J,Z,X)})},D.prototype._processSimple2=function(U,Y,X,O,J){if(this.matches[Y]||(this.matches[Y]=Object.create(null)),!O)return J();if(U&&l(U)&&!this.nomount){var Z=/[\/\\]$/.test(U);U.charAt(0)==="/"?U=o.join(this.root,U):(U=o.resolve(this.root,U),Z&&(U+="/"))}browser$1$1.platform==="win32"&&(U=U.replace(/\\/g,"/")),this._emitMatch(Y,U),J()},D.prototype._stat=function(U,Y){var X=this._makeAbs(U),O=U.slice(-1)==="/";if(U.length>this.maxLength)return Y();if(!this.stat&&b(this.cache,X)){var J=this.cache[X];if(Array.isArray(J)&&(J="DIR"),!O||J==="DIR")return Y(null,J);if(O&&J==="FILE")return Y()}var Z=this.statCache[X];if(Z!==void 0){if(Z===!1)return Y(null,Z);var se=Z.isDirectory()?"DIR":"FILE";return O&&se==="FILE"?Y():Y(null,se,Z)}var ie=this,F=x("stat\0"+X,k);F&&ie.fs.lstat(X,F);function k(y,A){if(A&&A.isSymbolicLink())return ie.fs.stat(X,function(I,P){I?ie._stat2(U,X,null,A,Y):ie._stat2(U,X,I,P,Y)});ie._stat2(U,X,y,A,Y)}},D.prototype._stat2=function(U,Y,X,O,J){if(X&&(X.code==="ENOENT"||X.code==="ENOTDIR"))return this.statCache[Y]=!1,J();var Z=U.slice(-1)==="/";if(this.statCache[Y]=O,Y.slice(-1)==="/"&&O&&!O.isDirectory())return J(null,!1,O);var se=!0;return O&&(se=O.isDirectory()?"DIR":"FILE"),this.cache[Y]=this.cache[Y]||se,Z&&se==="FILE"?J():J(null,se,O)},glob_1}let glob;try{glob=requireGlob()}catch(t){}browser$1$1.platform;const constellationNavigateur={install:t=>{const e=générerMandataireProc();t.provide("constl",e)}};async function loadFonts(){(await __vitePreload(()=>import("./webfontloader-2a4655c2.js").then(e=>e.w),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const materialdesignicons="",main="";function createVuetify(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...n}=t,a=mergeDeep(e,n),{aliases:o={},components:c={},directives:l={}}=a,u=createDefaults(a.defaults),d=createDisplay(a.display,a.ssr),m=createTheme(a.theme),b=createIcons(a.icons),x=createLocale(a.locale);return{install:w=>{for(const S in l)w.directive(S,l[S]);for(const S in c)w.component(S,c[S]);for(const S in o)w.component(S,defineComponent({...o[S],name:S,aliasName:o[S].name}));if(m.install(w),w.provide(DefaultsSymbol,u),w.provide(DisplaySymbol,d),w.provide(ThemeSymbol,m),w.provide(IconSymbol,b),w.provide(LocaleSymbol,x),IN_BROWSER&&a.ssr)if(w.$nuxt)w.$nuxt.hook("app:suspense:resolve",()=>{d.update()});else{const{mount:S}=w;w.mount=function(){const T=S(...arguments);return nextTick$3(()=>d.update()),w.mount=S,T}}getUid.reset(),w.mixin({computed:{$vuetify(){return reactive({defaults:inject.call(this,DefaultsSymbol),display:inject.call(this,DisplaySymbol),theme:inject.call(this,ThemeSymbol),icons:inject.call(this,IconSymbol),locale:inject.call(this,LocaleSymbol)})}}})},defaults:u,display:d,theme:m,icons:b,locale:x}}const version="3.1.2";createVuetify.version=version;function inject(t){var e,n;const a=this.$,o=((e=a.parent)==null?void 0:e.provides)??((n=a.vnode.appContext)==null?void 0:n.provides);if(o&&t in o)return o[t]}const vuetify=createVuetify({});/*!
  * shared v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser=typeof window<"u",hasSymbol=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",makeSymbol=t=>hasSymbol?Symbol(t):t,generateFormatCacheKey=(t,e,n)=>friendlyJSONstringify({l:t,k:e,s:n}),friendlyJSONstringify=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber=t=>typeof t=="number"&&isFinite(t),isDate=t=>toTypeString(t)==="[object Date]",isRegExp=t=>toTypeString(t)==="[object RegExp]",isEmptyObject=t=>isPlainObject(t)&&Object.keys(t).length===0;function warn(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const assign$1=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{});function escapeHtml(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwn(t,e){return hasOwnProperty.call(t,e)}const isArray$1=Array.isArray,isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isBoolean=t=>typeof t=="boolean",isObject=t=>t!==null&&typeof t=="object",objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),isPlainObject=t=>toTypeString(t)==="[object Object]",toDisplayString=t=>t==null?"":isArray$1(t)||isPlainObject(t)&&t.toString===objectToString?JSON.stringify(t,null,2):String(t);/*!
  * message-compiler v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function createCompileError(t,e,n={}){const{domain:a,messages:o,args:c}=n,l=t,u=new SyntaxError(String(l));return u.code=t,e&&(u.location=e),u.domain=a,u}function defaultOnError(t){throw t}function createPosition(t,e,n){return{line:t,column:e,offset:n}}function createLocation(t,e,n){const a={start:t,end:e};return n!=null&&(a.source=n),a}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(t){const e=t;let n=0,a=1,o=1,c=0;const l=O=>e[O]===CHAR_CR&&e[O+1]===CHAR_LF,u=O=>e[O]===CHAR_LF,d=O=>e[O]===CHAR_PS,m=O=>e[O]===CHAR_LS,b=O=>l(O)||u(O)||d(O)||m(O),x=()=>n,_=()=>a,w=()=>o,S=()=>c,T=O=>l(O)||d(O)||m(O)?CHAR_LF:e[O],B=()=>T(n),C=()=>T(n+c);function D(){return c=0,b(n)&&(a++,o=0),l(n)&&n++,n++,o++,e[n]}function z(){return l(n+c)&&c++,c++,e[n+c]}function U(){n=0,a=1,o=1,c=0}function Y(O=0){c=O}function X(){const O=n+c;for(;O!==n;)D();c=0}return{index:x,line:_,column:w,peekOffset:S,charAt:T,currentChar:B,currentPeek:C,next:D,peek:z,reset:U,resetPeek:Y,skipToPeek:X}}const EOF=void 0,LITERAL_DELIMITER="'",ERROR_DOMAIN$1="tokenizer";function createTokenizer(t,e={}){const n=e.location!==!1,a=createScanner(t),o=()=>a.index(),c=()=>createPosition(a.line(),a.column(),a.index()),l=c(),u=o(),d={currentType:14,offset:u,startLoc:l,endLoc:l,lastType:14,lastOffset:u,lastStartLoc:l,lastEndLoc:l,braceNest:0,inLinked:!1,text:""},m=()=>d,{onError:b}=e;function x(pe,ee,ge,...Ee){const be=m();if(ee.column+=ge,ee.offset+=ge,b){const xe=createLocation(be.startLoc,ee),ve=createCompileError(pe,xe,{domain:ERROR_DOMAIN$1,args:Ee});b(ve)}}function _(pe,ee,ge){pe.endLoc=c(),pe.currentType=ee;const Ee={type:ee};return n&&(Ee.loc=createLocation(pe.startLoc,pe.endLoc)),ge!=null&&(Ee.value=ge),Ee}const w=pe=>_(pe,14);function S(pe,ee){return pe.currentChar()===ee?(pe.next(),ee):(x(CompileErrorCodes.EXPECTED_TOKEN,c(),0,ee),"")}function T(pe){let ee="";for(;pe.currentPeek()===CHAR_SP||pe.currentPeek()===CHAR_LF;)ee+=pe.currentPeek(),pe.peek();return ee}function B(pe){const ee=T(pe);return pe.skipToPeek(),ee}function C(pe){if(pe===EOF)return!1;const ee=pe.charCodeAt(0);return ee>=97&&ee<=122||ee>=65&&ee<=90||ee===95}function D(pe){if(pe===EOF)return!1;const ee=pe.charCodeAt(0);return ee>=48&&ee<=57}function z(pe,ee){const{currentType:ge}=ee;if(ge!==2)return!1;T(pe);const Ee=C(pe.currentPeek());return pe.resetPeek(),Ee}function U(pe,ee){const{currentType:ge}=ee;if(ge!==2)return!1;T(pe);const Ee=pe.currentPeek()==="-"?pe.peek():pe.currentPeek(),be=D(Ee);return pe.resetPeek(),be}function Y(pe,ee){const{currentType:ge}=ee;if(ge!==2)return!1;T(pe);const Ee=pe.currentPeek()===LITERAL_DELIMITER;return pe.resetPeek(),Ee}function X(pe,ee){const{currentType:ge}=ee;if(ge!==8)return!1;T(pe);const Ee=pe.currentPeek()===".";return pe.resetPeek(),Ee}function O(pe,ee){const{currentType:ge}=ee;if(ge!==9)return!1;T(pe);const Ee=C(pe.currentPeek());return pe.resetPeek(),Ee}function J(pe,ee){const{currentType:ge}=ee;if(!(ge===8||ge===12))return!1;T(pe);const Ee=pe.currentPeek()===":";return pe.resetPeek(),Ee}function Z(pe,ee){const{currentType:ge}=ee;if(ge!==10)return!1;const Ee=()=>{const xe=pe.currentPeek();return xe==="{"?C(pe.peek()):xe==="@"||xe==="%"||xe==="|"||xe===":"||xe==="."||xe===CHAR_SP||!xe?!1:xe===CHAR_LF?(pe.peek(),Ee()):C(xe)},be=Ee();return pe.resetPeek(),be}function se(pe){T(pe);const ee=pe.currentPeek()==="|";return pe.resetPeek(),ee}function ie(pe){const ee=T(pe),ge=pe.currentPeek()==="%"&&pe.peek()==="{";return pe.resetPeek(),{isModulo:ge,hasSpace:ee.length>0}}function F(pe,ee=!0){const ge=(be=!1,xe="",ve=!1)=>{const Se=pe.currentPeek();return Se==="{"?xe==="%"?!1:be:Se==="@"||!Se?xe==="%"?!0:be:Se==="%"?(pe.peek(),ge(be,"%",!0)):Se==="|"?xe==="%"||ve?!0:!(xe===CHAR_SP||xe===CHAR_LF):Se===CHAR_SP?(pe.peek(),ge(!0,CHAR_SP,ve)):Se===CHAR_LF?(pe.peek(),ge(!0,CHAR_LF,ve)):!0},Ee=ge();return ee&&pe.resetPeek(),Ee}function k(pe,ee){const ge=pe.currentChar();return ge===EOF?EOF:ee(ge)?(pe.next(),ge):null}function y(pe){return k(pe,ge=>{const Ee=ge.charCodeAt(0);return Ee>=97&&Ee<=122||Ee>=65&&Ee<=90||Ee>=48&&Ee<=57||Ee===95||Ee===36})}function A(pe){return k(pe,ge=>{const Ee=ge.charCodeAt(0);return Ee>=48&&Ee<=57})}function I(pe){return k(pe,ge=>{const Ee=ge.charCodeAt(0);return Ee>=48&&Ee<=57||Ee>=65&&Ee<=70||Ee>=97&&Ee<=102})}function P(pe){let ee="",ge="";for(;ee=A(pe);)ge+=ee;return ge}function H(pe){B(pe);const ee=pe.currentChar();return ee!=="%"&&x(CompileErrorCodes.EXPECTED_TOKEN,c(),0,ee),pe.next(),"%"}function q(pe){let ee="";for(;;){const ge=pe.currentChar();if(ge==="{"||ge==="}"||ge==="@"||ge==="|"||!ge)break;if(ge==="%")if(F(pe))ee+=ge,pe.next();else break;else if(ge===CHAR_SP||ge===CHAR_LF)if(F(pe))ee+=ge,pe.next();else{if(se(pe))break;ee+=ge,pe.next()}else ee+=ge,pe.next()}return ee}function j(pe){B(pe);let ee="",ge="";for(;ee=y(pe);)ge+=ee;return pe.currentChar()===EOF&&x(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,c(),0),ge}function M(pe){B(pe);let ee="";return pe.currentChar()==="-"?(pe.next(),ee+=`-${P(pe)}`):ee+=P(pe),pe.currentChar()===EOF&&x(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,c(),0),ee}function E(pe){B(pe),S(pe,"'");let ee="",ge="";const Ee=xe=>xe!==LITERAL_DELIMITER&&xe!==CHAR_LF;for(;ee=k(pe,Ee);)ee==="\\"?ge+=L(pe):ge+=ee;const be=pe.currentChar();return be===CHAR_LF||be===EOF?(x(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,c(),0),be===CHAR_LF&&(pe.next(),S(pe,"'")),ge):(S(pe,"'"),ge)}function L(pe){const ee=pe.currentChar();switch(ee){case"\\":case"'":return pe.next(),`\\${ee}`;case"u":return le(pe,ee,4);case"U":return le(pe,ee,6);default:return x(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,c(),0,ee),""}}function le(pe,ee,ge){S(pe,ee);let Ee="";for(let be=0;be<ge;be++){const xe=I(pe);if(!xe){x(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,c(),0,`\\${ee}${Ee}${pe.currentChar()}`);break}Ee+=xe}return`\\${ee}${Ee}`}function Q(pe){B(pe);let ee="",ge="";const Ee=be=>be!=="{"&&be!=="}"&&be!==CHAR_SP&&be!==CHAR_LF;for(;ee=k(pe,Ee);)ge+=ee;return ge}function ce(pe){let ee="",ge="";for(;ee=y(pe);)ge+=ee;return ge}function fe(pe){const ee=(ge=!1,Ee)=>{const be=pe.currentChar();return be==="{"||be==="%"||be==="@"||be==="|"||!be||be===CHAR_SP?Ee:be===CHAR_LF?(Ee+=be,pe.next(),ee(ge,Ee)):(Ee+=be,pe.next(),ee(!0,Ee))};return ee(!1,"")}function oe(pe){B(pe);const ee=S(pe,"|");return B(pe),ee}function de(pe,ee){let ge=null;switch(pe.currentChar()){case"{":return ee.braceNest>=1&&x(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,c(),0),pe.next(),ge=_(ee,2,"{"),B(pe),ee.braceNest++,ge;case"}":return ee.braceNest>0&&ee.currentType===2&&x(CompileErrorCodes.EMPTY_PLACEHOLDER,c(),0),pe.next(),ge=_(ee,3,"}"),ee.braceNest--,ee.braceNest>0&&B(pe),ee.inLinked&&ee.braceNest===0&&(ee.inLinked=!1),ge;case"@":return ee.braceNest>0&&x(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,c(),0),ge=ae(pe,ee)||w(ee),ee.braceNest=0,ge;default:let be=!0,xe=!0,ve=!0;if(se(pe))return ee.braceNest>0&&x(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,c(),0),ge=_(ee,1,oe(pe)),ee.braceNest=0,ee.inLinked=!1,ge;if(ee.braceNest>0&&(ee.currentType===5||ee.currentType===6||ee.currentType===7))return x(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,c(),0),ee.braceNest=0,he(pe,ee);if(be=z(pe,ee))return ge=_(ee,5,j(pe)),B(pe),ge;if(xe=U(pe,ee))return ge=_(ee,6,M(pe)),B(pe),ge;if(ve=Y(pe,ee))return ge=_(ee,7,E(pe)),B(pe),ge;if(!be&&!xe&&!ve)return ge=_(ee,13,Q(pe)),x(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,c(),0,ge.value),B(pe),ge;break}return ge}function ae(pe,ee){const{currentType:ge}=ee;let Ee=null;const be=pe.currentChar();switch((ge===8||ge===9||ge===12||ge===10)&&(be===CHAR_LF||be===CHAR_SP)&&x(CompileErrorCodes.INVALID_LINKED_FORMAT,c(),0),be){case"@":return pe.next(),Ee=_(ee,8,"@"),ee.inLinked=!0,Ee;case".":return B(pe),pe.next(),_(ee,9,".");case":":return B(pe),pe.next(),_(ee,10,":");default:return se(pe)?(Ee=_(ee,1,oe(pe)),ee.braceNest=0,ee.inLinked=!1,Ee):X(pe,ee)||J(pe,ee)?(B(pe),ae(pe,ee)):O(pe,ee)?(B(pe),_(ee,12,ce(pe))):Z(pe,ee)?(B(pe),be==="{"?de(pe,ee)||Ee:_(ee,11,fe(pe))):(ge===8&&x(CompileErrorCodes.INVALID_LINKED_FORMAT,c(),0),ee.braceNest=0,ee.inLinked=!1,he(pe,ee))}}function he(pe,ee){let ge={type:14};if(ee.braceNest>0)return de(pe,ee)||w(ee);if(ee.inLinked)return ae(pe,ee)||w(ee);switch(pe.currentChar()){case"{":return de(pe,ee)||w(ee);case"}":return x(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,c(),0),pe.next(),_(ee,3,"}");case"@":return ae(pe,ee)||w(ee);default:if(se(pe))return ge=_(ee,1,oe(pe)),ee.braceNest=0,ee.inLinked=!1,ge;const{isModulo:be,hasSpace:xe}=ie(pe);if(be)return xe?_(ee,0,q(pe)):_(ee,4,H(pe));if(F(pe))return _(ee,0,q(pe));break}return ge}function te(){const{currentType:pe,offset:ee,startLoc:ge,endLoc:Ee}=d;return d.lastType=pe,d.lastOffset=ee,d.lastStartLoc=ge,d.lastEndLoc=Ee,d.offset=o(),d.startLoc=c(),a.currentChar()===EOF?_(d,14):he(a,d)}return{nextToken:te,currentOffset:o,currentPosition:c,context:m}}const ERROR_DOMAIN="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const a=parseInt(e||n,16);return a<=55295||a>=57344?String.fromCodePoint(a):"�"}}}function createParser(t={}){const e=t.location!==!1,{onError:n}=t;function a(C,D,z,U,...Y){const X=C.currentPosition();if(X.offset+=U,X.column+=U,n){const O=createLocation(z,X),J=createCompileError(D,O,{domain:ERROR_DOMAIN,args:Y});n(J)}}function o(C,D,z){const U={type:C,start:D,end:D};return e&&(U.loc={start:z,end:z}),U}function c(C,D,z,U){C.end=D,U&&(C.type=U),e&&C.loc&&(C.loc.end=z)}function l(C,D){const z=C.context(),U=o(3,z.offset,z.startLoc);return U.value=D,c(U,C.currentOffset(),C.currentPosition()),U}function u(C,D){const z=C.context(),{lastOffset:U,lastStartLoc:Y}=z,X=o(5,U,Y);return X.index=parseInt(D,10),C.nextToken(),c(X,C.currentOffset(),C.currentPosition()),X}function d(C,D){const z=C.context(),{lastOffset:U,lastStartLoc:Y}=z,X=o(4,U,Y);return X.key=D,C.nextToken(),c(X,C.currentOffset(),C.currentPosition()),X}function m(C,D){const z=C.context(),{lastOffset:U,lastStartLoc:Y}=z,X=o(9,U,Y);return X.value=D.replace(KNOWN_ESCAPES,fromEscapeSequence),C.nextToken(),c(X,C.currentOffset(),C.currentPosition()),X}function b(C){const D=C.nextToken(),z=C.context(),{lastOffset:U,lastStartLoc:Y}=z,X=o(8,U,Y);return D.type!==12?(a(C,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,z.lastStartLoc,0),X.value="",c(X,U,Y),{nextConsumeToken:D,node:X}):(D.value==null&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,z.lastStartLoc,0,getTokenCaption(D)),X.value=D.value||"",c(X,C.currentOffset(),C.currentPosition()),{node:X})}function x(C,D){const z=C.context(),U=o(7,z.offset,z.startLoc);return U.value=D,c(U,C.currentOffset(),C.currentPosition()),U}function _(C){const D=C.context(),z=o(6,D.offset,D.startLoc);let U=C.nextToken();if(U.type===9){const Y=b(C);z.modifier=Y.node,U=Y.nextConsumeToken||C.nextToken()}switch(U.type!==10&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(U)),U=C.nextToken(),U.type===2&&(U=C.nextToken()),U.type){case 11:U.value==null&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(U)),z.key=x(C,U.value||"");break;case 5:U.value==null&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(U)),z.key=d(C,U.value||"");break;case 6:U.value==null&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(U)),z.key=u(C,U.value||"");break;case 7:U.value==null&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(U)),z.key=m(C,U.value||"");break;default:a(C,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,D.lastStartLoc,0);const Y=C.context(),X=o(7,Y.offset,Y.startLoc);return X.value="",c(X,Y.offset,Y.startLoc),z.key=X,c(z,Y.offset,Y.startLoc),{nextConsumeToken:U,node:z}}return c(z,C.currentOffset(),C.currentPosition()),{node:z}}function w(C){const D=C.context(),z=D.currentType===1?C.currentOffset():D.offset,U=D.currentType===1?D.endLoc:D.startLoc,Y=o(2,z,U);Y.items=[];let X=null;do{const Z=X||C.nextToken();switch(X=null,Z.type){case 0:Z.value==null&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(Z)),Y.items.push(l(C,Z.value||""));break;case 6:Z.value==null&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(Z)),Y.items.push(u(C,Z.value||""));break;case 5:Z.value==null&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(Z)),Y.items.push(d(C,Z.value||""));break;case 7:Z.value==null&&a(C,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(Z)),Y.items.push(m(C,Z.value||""));break;case 8:const se=_(C);Y.items.push(se.node),X=se.nextConsumeToken||null;break}}while(D.currentType!==14&&D.currentType!==1);const O=D.currentType===1?D.lastOffset:C.currentOffset(),J=D.currentType===1?D.lastEndLoc:C.currentPosition();return c(Y,O,J),Y}function S(C,D,z,U){const Y=C.context();let X=U.items.length===0;const O=o(1,D,z);O.cases=[],O.cases.push(U);do{const J=w(C);X||(X=J.items.length===0),O.cases.push(J)}while(Y.currentType!==14);return X&&a(C,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,z,0),c(O,C.currentOffset(),C.currentPosition()),O}function T(C){const D=C.context(),{offset:z,startLoc:U}=D,Y=w(C);return D.currentType===14?Y:S(C,z,U,Y)}function B(C){const D=createTokenizer(C,assign$1({},t)),z=D.context(),U=o(0,z.offset,z.startLoc);return e&&U.loc&&(U.loc.source=C),U.body=T(D),z.currentType!==14&&a(D,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,z.lastStartLoc,0,C[z.offset]||""),c(U,D.currentOffset(),D.currentPosition()),U}return{parse:B}}function getTokenCaption(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function createTransformer(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:c=>(n.helpers.add(c),c)}}function traverseNodes(t,e){for(let n=0;n<t.length;n++)traverseNode(t[n],e)}function traverseNode(t,e){switch(t.type){case 1:traverseNodes(t.cases,e),e.helper("plural");break;case 2:traverseNodes(t.items,e);break;case 6:traverseNode(t.key,e),e.helper("linked"),e.helper("type");break;case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function transform(t,e={}){const n=createTransformer(t);n.helper("normalize"),t.body&&traverseNode(t.body,n);const a=n.context();t.helpers=Array.from(a.helpers)}function createCodeGenerator(t,e){const{sourceMap:n,filename:a,breakLineCode:o,needIndent:c}=e,l={source:t.loc.source,filename:a,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:o,needIndent:c,indentLevel:0},u=()=>l;function d(T,B){l.code+=T}function m(T,B=!0){const C=B?o:"";d(c?C+"  ".repeat(T):C)}function b(T=!0){const B=++l.indentLevel;T&&m(B)}function x(T=!0){const B=--l.indentLevel;T&&m(B)}function _(){m(l.indentLevel)}return{context:u,push:d,indent:b,deindent:x,newline:_,helper:T=>`_${T}`,needIndent:()=>l.needIndent}}function generateLinkedNode(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),generateNode(t,e.key),e.modifier?(t.push(", "),generateNode(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function generateMessageNode(t,e){const{helper:n,needIndent:a}=t;t.push(`${n("normalize")}([`),t.indent(a());const o=e.items.length;for(let c=0;c<o&&(generateNode(t,e.items[c]),c!==o-1);c++)t.push(", ");t.deindent(a()),t.push("])")}function generatePluralNode(t,e){const{helper:n,needIndent:a}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(a());const o=e.cases.length;for(let c=0;c<o&&(generateNode(t,e.cases[c]),c!==o-1);c++)t.push(", ");t.deindent(a()),t.push("])")}}function generateResource(t,e){e.body?generateNode(t,e.body):t.push("null")}function generateNode(t,e){const{helper:n}=t;switch(e.type){case 0:generateResource(t,e);break;case 1:generatePluralNode(t,e);break;case 2:generateMessageNode(t,e);break;case 6:generateLinkedNode(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const generate=(t,e={})=>{const n=isString(e.mode)?e.mode:"normal",a=isString(e.filename)?e.filename:"message.intl",o=!!e.sourceMap,c=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,l=e.needIndent?e.needIndent:n!=="arrow",u=t.helpers||[],d=createCodeGenerator(t,{mode:n,filename:a,sourceMap:o,breakLineCode:c,needIndent:l});d.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),d.indent(l),u.length>0&&(d.push(`const { ${u.map(x=>`${x}: _${x}`).join(", ")} } = ctx`),d.newline()),d.push("return "),generateNode(d,t),d.deindent(l),d.push("}");const{code:m,map:b}=d.context();return{ast:t,code:m,map:b?b.toJSON():void 0}};function baseCompile(t,e={}){const n=assign$1({},e),o=createParser(n).parse(t);return transform(o,n),generate(o,n)}/*!
  * devtools-if v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const IntlifyDevToolsHooks={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],["["]:[4],o:[7]};pathStateMachine[1]={w:[1],["."]:[2],["["]:[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],[0]:[3,0]};pathStateMachine[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};pathStateMachine[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};pathStateMachine[5]={["'"]:[4,0],o:8,l:[5,0]};pathStateMachine[6]={['"']:[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(t){return literalValueRE.test(t)}function stripQuotes(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function getPathCharType(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:isLiteral(e)?stripQuotes(e):"*"+e}function parse(t){const e=[];let n=-1,a=0,o=0,c,l,u,d,m,b,x;const _=[];_[0]=()=>{l===void 0?l=u:l+=u},_[1]=()=>{l!==void 0&&(e.push(l),l=void 0)},_[2]=()=>{_[0](),o++},_[3]=()=>{if(o>0)o--,a=4,_[0]();else{if(o=0,l===void 0||(l=formatSubPath(l),l===!1))return!1;_[1]()}};function w(){const S=t[n+1];if(a===5&&S==="'"||a===6&&S==='"')return n++,u="\\"+S,_[0](),!0}for(;a!==null;)if(n++,c=t[n],!(c==="\\"&&w())){if(d=getPathCharType(c),x=pathStateMachine[a],m=x[d]||x.l||8,m===8||(a=m[0],m[1]!==void 0&&(b=_[m[1]],b&&(u=c,b()===!1))))return;if(a===7)return e}}const cache=new Map;function resolveWithKeyValue(t,e){return isObject(t)?t[e]:null}function resolveValue(t,e){if(!isObject(t))return null;let n=cache.get(e);if(n||(n=parse(e),n&&cache.set(e,n)),!n)return null;const a=n.length;let o=t,c=0;for(;c<a;){const l=o[n[c]];if(l===void 0)return null;o=l,c++}return o}const DEFAULT_MODIFIER=t=>t,DEFAULT_MESSAGE=t=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=t=>t.length===0?"":t.join(""),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function getPluralIndex(t){const e=isNumber(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(isNumber(t.named.count)||isNumber(t.named.n))?isNumber(t.named.count)?t.named.count:isNumber(t.named.n)?t.named.n:e:e}function normalizeNamed(t,e){e.count||(e.count=t),e.n||(e.n=t)}function createMessageContext(t={}){const e=t.locale,n=getPluralIndex(t),a=isObject(t.pluralRules)&&isString(e)&&isFunction(t.pluralRules[e])?t.pluralRules[e]:pluralDefault,o=isObject(t.pluralRules)&&isString(e)&&isFunction(t.pluralRules[e])?pluralDefault:void 0,c=C=>C[a(n,C.length,o)],l=t.list||[],u=C=>l[C],d=t.named||{};isNumber(t.pluralIndex)&&normalizeNamed(n,d);const m=C=>d[C];function b(C){const D=isFunction(t.messages)?t.messages(C):isObject(t.messages)?t.messages[C]:!1;return D||(t.parent?t.parent.message(C):DEFAULT_MESSAGE)}const x=C=>t.modifiers?t.modifiers[C]:DEFAULT_MODIFIER,_=isPlainObject(t.processor)&&isFunction(t.processor.normalize)?t.processor.normalize:DEFAULT_NORMALIZE,w=isPlainObject(t.processor)&&isFunction(t.processor.interpolate)?t.processor.interpolate:DEFAULT_INTERPOLATE,S=isPlainObject(t.processor)&&isString(t.processor.type)?t.processor.type:DEFAULT_MESSAGE_DATA_TYPE,B={list:u,named:m,plural:c,linked:(C,...D)=>{const[z,U]=D;let Y="text",X="";D.length===1?isObject(z)?(X=z.modifier||X,Y=z.type||Y):isString(z)&&(X=z||X):D.length===2&&(isString(z)&&(X=z||X),isString(U)&&(Y=U||Y));let O=b(C)(B);return Y==="vnode"&&isArray$1(O)&&X&&(O=O[0]),X?x(X)(O,Y):O},message:b,type:S,interpolate:w,normalize:_};return B}let devtools=null;function setDevToolsHook(t){devtools=t}function initI18nDevTools(t,e,n){devtools&&devtools.emit(IntlifyDevToolsHooks.I18nInit,{timestamp:Date.now(),i18n:t,version:e,meta:n})}const translateDevTools=createDevToolsHook(IntlifyDevToolsHooks.FunctionTranslate);function createDevToolsHook(t){return e=>devtools&&devtools.emit(t,e)}const CoreWarnCodes={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,__EXTEND_POINT__:7};function fallbackWithSimple(t,e,n){return[...new Set([n,...isArray$1(e)?e:isObject(e)?Object.keys(e):isString(e)?[e]:[n]])]}function fallbackWithLocaleChain(t,e,n){const a=isString(n)?n:DEFAULT_LOCALE,o=t;o.__localeChainCache||(o.__localeChainCache=new Map);let c=o.__localeChainCache.get(a);if(!c){c=[];let l=[n];for(;isArray$1(l);)l=appendBlockToChain(c,l,e);const u=isArray$1(e)||!isPlainObject(e)?e:e.default?e.default:null;l=isString(u)?[u]:u,isArray$1(l)&&appendBlockToChain(c,l,!1),o.__localeChainCache.set(a,c)}return c}function appendBlockToChain(t,e,n){let a=!0;for(let o=0;o<e.length&&isBoolean(a);o++){const c=e[o];isString(c)&&(a=appendLocaleToChain(t,e[o],n))}return a}function appendLocaleToChain(t,e,n){let a;const o=e.split("-");do{const c=o.join("-");a=appendItemToChain(t,c,n),o.splice(-1,1)}while(o.length&&a===!0);return a}function appendItemToChain(t,e,n){let a=!1;if(!t.includes(e)&&(a=!0,e)){a=e[e.length-1]!=="!";const o=e.replace(/!/g,"");t.push(o),(isArray$1(n)||isPlainObject(n))&&n[o]&&(a=n[o])}return a}const VERSION$1="9.2.2",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(t,e)=>e==="text"&&isString(t)?t.toUpperCase():e==="vnode"&&isObject(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&isString(t)?t.toLowerCase():e==="vnode"&&isObject(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&isString(t)?capitalize(t):e==="vnode"&&isObject(t)&&"__v_isVNode"in t?capitalize(t.children):t}}let _compiler;function registerMessageCompiler(t){_compiler=t}let _resolver;function registerMessageResolver(t){_resolver=t}let _fallbacker;function registerLocaleFallbacker(t){_fallbacker=t}let _additionalMeta=null;const setAdditionalMeta=t=>{_additionalMeta=t},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=t=>{_fallbackContext=t},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(t={}){const e=isString(t.version)?t.version:VERSION$1,n=isString(t.locale)?t.locale:DEFAULT_LOCALE,a=isArray$1(t.fallbackLocale)||isPlainObject(t.fallbackLocale)||isString(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,o=isPlainObject(t.messages)?t.messages:{[n]:{}},c=isPlainObject(t.datetimeFormats)?t.datetimeFormats:{[n]:{}},l=isPlainObject(t.numberFormats)?t.numberFormats:{[n]:{}},u=assign$1({},t.modifiers||{},getDefaultLinkedModifiers()),d=t.pluralRules||{},m=isFunction(t.missing)?t.missing:null,b=isBoolean(t.missingWarn)||isRegExp(t.missingWarn)?t.missingWarn:!0,x=isBoolean(t.fallbackWarn)||isRegExp(t.fallbackWarn)?t.fallbackWarn:!0,_=!!t.fallbackFormat,w=!!t.unresolving,S=isFunction(t.postTranslation)?t.postTranslation:null,T=isPlainObject(t.processor)?t.processor:null,B=isBoolean(t.warnHtmlMessage)?t.warnHtmlMessage:!0,C=!!t.escapeParameter,D=isFunction(t.messageCompiler)?t.messageCompiler:_compiler,z=isFunction(t.messageResolver)?t.messageResolver:_resolver||resolveWithKeyValue,U=isFunction(t.localeFallbacker)?t.localeFallbacker:_fallbacker||fallbackWithSimple,Y=isObject(t.fallbackContext)?t.fallbackContext:void 0,X=isFunction(t.onWarn)?t.onWarn:warn,O=t,J=isObject(O.__datetimeFormatters)?O.__datetimeFormatters:new Map,Z=isObject(O.__numberFormatters)?O.__numberFormatters:new Map,se=isObject(O.__meta)?O.__meta:{};_cid++;const ie={version:e,cid:_cid,locale:n,fallbackLocale:a,messages:o,modifiers:u,pluralRules:d,missing:m,missingWarn:b,fallbackWarn:x,fallbackFormat:_,unresolving:w,postTranslation:S,processor:T,warnHtmlMessage:B,escapeParameter:C,messageCompiler:D,messageResolver:z,localeFallbacker:U,fallbackContext:Y,onWarn:X,__meta:se};return ie.datetimeFormats=c,ie.numberFormats=l,ie.__datetimeFormatters=J,ie.__numberFormatters=Z,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(ie,e,se),ie}function handleMissing(t,e,n,a,o){const{missing:c,onWarn:l}=t;if(c!==null){const u=c(t,n,e,o);return isString(u)?u:e}else return e}function updateFallbackLocale(t,e,n){const a=t;a.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}const defaultOnCacheKey=t=>t;let compileCache=Object.create(null);function compileToFunction(t,e={}){{const a=(e.onCacheKey||defaultOnCacheKey)(t),o=compileCache[a];if(o)return o;let c=!1;const l=e.onError||defaultOnError;e.onError=m=>{c=!0,l(m)};const{code:u}=baseCompile(t,e),d=new Function(`return ${u}`)();return c?d:compileCache[a]=d}}let code$1=CompileErrorCodes.__EXTEND_POINT__;const inc$1=()=>++code$1,CoreErrorCodes={INVALID_ARGUMENT:code$1,INVALID_DATE_ARGUMENT:inc$1(),INVALID_ISO_DATE_ARGUMENT:inc$1(),__EXTEND_POINT__:inc$1()};function createCoreError(t){return createCompileError(t,null,void 0)}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=t=>isFunction(t);function translate(t,...e){const{fallbackFormat:n,postTranslation:a,unresolving:o,messageCompiler:c,fallbackLocale:l,messages:u}=t,[d,m]=parseTranslateArgs(...e),b=isBoolean(m.missingWarn)?m.missingWarn:t.missingWarn,x=isBoolean(m.fallbackWarn)?m.fallbackWarn:t.fallbackWarn,_=isBoolean(m.escapeParameter)?m.escapeParameter:t.escapeParameter,w=!!m.resolvedMessage,S=isString(m.default)||isBoolean(m.default)?isBoolean(m.default)?c?d:()=>d:m.default:n?c?d:()=>d:"",T=n||S!=="",B=isString(m.locale)?m.locale:t.locale;_&&escapeParams(m);let[C,D,z]=w?[d,B,u[B]||{}]:resolveMessageFormat(t,d,B,l,x,b),U=C,Y=d;if(!w&&!(isString(U)||isMessageFunction(U))&&T&&(U=S,Y=U),!w&&(!(isString(U)||isMessageFunction(U))||!isString(D)))return o?NOT_REOSLVED:d;let X=!1;const O=()=>{X=!0},J=isMessageFunction(U)?U:compileMessageFormat(t,d,D,U,Y,O);if(X)return U;const Z=getMessageContextOptions(t,D,z,m),se=createMessageContext(Z),ie=evaluateMessage(t,J,se),F=a?a(ie,d):ie;if(__INTLIFY_PROD_DEVTOOLS__){const k={timestamp:Date.now(),key:isString(d)?d:isMessageFunction(U)?U.key:"",locale:D||(isMessageFunction(U)?U.locale:""),format:isString(U)?U:isMessageFunction(U)?U.source:"",message:F};k.meta=assign$1({},t.__meta,getAdditionalMeta()||{}),translateDevTools(k)}return F}function escapeParams(t){isArray$1(t.list)?t.list=t.list.map(e=>isString(e)?escapeHtml(e):e):isObject(t.named)&&Object.keys(t.named).forEach(e=>{isString(t.named[e])&&(t.named[e]=escapeHtml(t.named[e]))})}function resolveMessageFormat(t,e,n,a,o,c){const{messages:l,onWarn:u,messageResolver:d,localeFallbacker:m}=t,b=m(t,a,n);let x={},_,w=null;const S="translate";for(let T=0;T<b.length&&(_=b[T],x=l[_]||{},(w=d(x,e))===null&&(w=x[e]),!(isString(w)||isFunction(w)));T++){const B=handleMissing(t,e,_,c,S);B!==e&&(w=B)}return[w,_,x]}function compileMessageFormat(t,e,n,a,o,c){const{messageCompiler:l,warnHtmlMessage:u}=t;if(isMessageFunction(a)){const m=a;return m.locale=m.locale||n,m.key=m.key||e,m}if(l==null){const m=()=>a;return m.locale=n,m.key=e,m}const d=l(a,getCompileOptions(t,n,o,a,u,c));return d.locale=n,d.key=e,d.source=a,d}function evaluateMessage(t,e,n){return e(n)}function parseTranslateArgs(...t){const[e,n,a]=t,o={};if(!isString(e)&&!isNumber(e)&&!isMessageFunction(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const c=isNumber(e)?String(e):(isMessageFunction(e),e);return isNumber(n)?o.plural=n:isString(n)?o.default=n:isPlainObject(n)&&!isEmptyObject(n)?o.named=n:isArray$1(n)&&(o.list=n),isNumber(a)?o.plural=a:isString(a)?o.default=a:isPlainObject(a)&&assign$1(o,a),[c,o]}function getCompileOptions(t,e,n,a,o,c){return{warnHtmlMessage:o,onError:l=>{throw c&&c(l),l},onCacheKey:l=>generateFormatCacheKey(e,n,l)}}function getMessageContextOptions(t,e,n,a){const{modifiers:o,pluralRules:c,messageResolver:l,fallbackLocale:u,fallbackWarn:d,missingWarn:m,fallbackContext:b}=t,_={locale:e,modifiers:o,pluralRules:c,messages:w=>{let S=l(n,w);if(S==null&&b){const[,,T]=resolveMessageFormat(b,w,e,u,d,m);S=l(T,w)}if(isString(S)){let T=!1;const C=compileMessageFormat(t,w,e,S,w,()=>{T=!0});return T?NOOP_MESSAGE_FUNCTION:C}else return isMessageFunction(S)?S:NOOP_MESSAGE_FUNCTION}};return t.processor&&(_.processor=t.processor),a.list&&(_.list=a.list),a.named&&(_.named=a.named),isNumber(a.plural)&&(_.pluralIndex=a.plural),_}function datetime(t,...e){const{datetimeFormats:n,unresolving:a,fallbackLocale:o,onWarn:c,localeFallbacker:l}=t,{__datetimeFormatters:u}=t,[d,m,b,x]=parseDateTimeArgs(...e),_=isBoolean(b.missingWarn)?b.missingWarn:t.missingWarn;isBoolean(b.fallbackWarn)?b.fallbackWarn:t.fallbackWarn;const w=!!b.part,S=isString(b.locale)?b.locale:t.locale,T=l(t,o,S);if(!isString(d)||d==="")return new Intl.DateTimeFormat(S,x).format(m);let B={},C,D=null;const z="datetime format";for(let X=0;X<T.length&&(C=T[X],B=n[C]||{},D=B[d],!isPlainObject(D));X++)handleMissing(t,d,C,_,z);if(!isPlainObject(D)||!isString(C))return a?NOT_REOSLVED:d;let U=`${C}__${d}`;isEmptyObject(x)||(U=`${U}__${JSON.stringify(x)}`);let Y=u.get(U);return Y||(Y=new Intl.DateTimeFormat(C,assign$1({},D,x)),u.set(U,Y)),w?Y.formatToParts(m):Y.format(m)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...t){const[e,n,a,o]=t,c={};let l={},u;if(isString(e)){const d=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!d)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const m=d[3]?d[3].trim().startsWith("T")?`${d[1].trim()}${d[3].trim()}`:`${d[1].trim()}T${d[3].trim()}`:d[1].trim();u=new Date(m);try{u.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate(e)){if(isNaN(e.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);u=e}else if(isNumber(e))u=e;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString(n)?c.key=n:isPlainObject(n)&&Object.keys(n).forEach(d=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(d)?l[d]=n[d]:c[d]=n[d]}),isString(a)?c.locale=a:isPlainObject(a)&&(l=a),isPlainObject(o)&&(l=o),[c.key||"",u,c,l]}function clearDateTimeFormat(t,e,n){const a=t;for(const o in n){const c=`${e}__${o}`;a.__datetimeFormatters.has(c)&&a.__datetimeFormatters.delete(c)}}function number(t,...e){const{numberFormats:n,unresolving:a,fallbackLocale:o,onWarn:c,localeFallbacker:l}=t,{__numberFormatters:u}=t,[d,m,b,x]=parseNumberArgs(...e),_=isBoolean(b.missingWarn)?b.missingWarn:t.missingWarn;isBoolean(b.fallbackWarn)?b.fallbackWarn:t.fallbackWarn;const w=!!b.part,S=isString(b.locale)?b.locale:t.locale,T=l(t,o,S);if(!isString(d)||d==="")return new Intl.NumberFormat(S,x).format(m);let B={},C,D=null;const z="number format";for(let X=0;X<T.length&&(C=T[X],B=n[C]||{},D=B[d],!isPlainObject(D));X++)handleMissing(t,d,C,_,z);if(!isPlainObject(D)||!isString(C))return a?NOT_REOSLVED:d;let U=`${C}__${d}`;isEmptyObject(x)||(U=`${U}__${JSON.stringify(x)}`);let Y=u.get(U);return Y||(Y=new Intl.NumberFormat(C,assign$1({},D,x)),u.set(U,Y)),w?Y.formatToParts(m):Y.format(m)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...t){const[e,n,a,o]=t,c={};let l={};if(!isNumber(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const u=e;return isString(n)?c.key=n:isPlainObject(n)&&Object.keys(n).forEach(d=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(d)?l[d]=n[d]:c[d]=n[d]}),isString(a)?c.locale=a:isPlainObject(a)&&(l=a),isPlainObject(o)&&(l=o),[c.key||"",u,c,l]}function clearNumberFormat(t,e,n){const a=t;for(const o in n){const c=`${e}__${o}`;a.__numberFormatters.has(c)&&a.__numberFormatters.delete(c)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION="9.2.2";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}CoreWarnCodes.__EXTEND_POINT__;let code=CompileErrorCodes.__EXTEND_POINT__;const inc=()=>++code,I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSLALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSLALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(t,...e){return createCompileError(t,null,void 0)}const TransrateVNodeSymbol=makeSymbol("__transrateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules");makeSymbol("__intlifyMeta");const InejctWithOption=makeSymbol("__injectWithOption");function handleFlatJson(t){if(!isObject(t))return t;for(const e in t)if(hasOwn(t,e))if(!e.includes("."))isObject(t[e])&&handleFlatJson(t[e]);else{const n=e.split("."),a=n.length-1;let o=t;for(let c=0;c<a;c++)n[c]in o||(o[n[c]]={}),o=o[n[c]];o[n[a]]=t[e],delete t[e],isObject(o[n[a]])&&handleFlatJson(o[n[a]])}return t}function getLocaleMessages(t,e){const{messages:n,__i18n:a,messageResolver:o,flatJson:c}=e,l=isPlainObject(n)?n:isArray$1(a)?{}:{[t]:{}};if(isArray$1(a)&&a.forEach(u=>{if("locale"in u&&"resource"in u){const{locale:d,resource:m}=u;d?(l[d]=l[d]||{},deepCopy(m,l[d])):deepCopy(m,l)}else isString(u)&&deepCopy(JSON.parse(u),l)}),o==null&&c)for(const u in l)hasOwn(l,u)&&handleFlatJson(l[u]);return l}const isNotObjectOrIsArray=t=>!isObject(t)||isArray$1(t);function deepCopy(t,e){if(isNotObjectOrIsArray(t)||isNotObjectOrIsArray(e))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const n in t)hasOwn(t,n)&&(isNotObjectOrIsArray(t[n])||isNotObjectOrIsArray(e[n])?e[n]=t[n]:deepCopy(t[n],e[n]))}function getComponentOptions(t){return t.type}function adjustI18nResources(t,e,n){let a=isObject(e.messages)?e.messages:{};"__i18nGlobal"in n&&(a=getLocaleMessages(t.locale.value,{messages:a,__i18n:n.__i18nGlobal}));const o=Object.keys(a);o.length&&o.forEach(c=>{t.mergeLocaleMessage(c,a[c])});{if(isObject(e.datetimeFormats)){const c=Object.keys(e.datetimeFormats);c.length&&c.forEach(l=>{t.mergeDateTimeFormat(l,e.datetimeFormats[l])})}if(isObject(e.numberFormats)){const c=Object.keys(e.numberFormats);c.length&&c.forEach(l=>{t.mergeNumberFormat(l,e.numberFormats[l])})}}}function createTextNode(t){return createVNode(Text,null,t,0)}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(t){return(e,n,a,o)=>t(n,a,getCurrentInstance$1()||void 0,o)}const getMetaInfo=()=>{const t=getCurrentInstance$1();let e=null;return t&&(e=getComponentOptions(t)[DEVTOOLS_META])?{[DEVTOOLS_META]:e}:null};function createComposer(t={},e){const{__root:n}=t,a=n===void 0;let o=isBoolean(t.inheritLocale)?t.inheritLocale:!0;const c=ref(n&&o?n.locale.value:isString(t.locale)?t.locale:DEFAULT_LOCALE),l=ref(n&&o?n.fallbackLocale.value:isString(t.fallbackLocale)||isArray$1(t.fallbackLocale)||isPlainObject(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:c.value),u=ref(getLocaleMessages(c.value,t)),d=ref(isPlainObject(t.datetimeFormats)?t.datetimeFormats:{[c.value]:{}}),m=ref(isPlainObject(t.numberFormats)?t.numberFormats:{[c.value]:{}});let b=n?n.missingWarn:isBoolean(t.missingWarn)||isRegExp(t.missingWarn)?t.missingWarn:!0,x=n?n.fallbackWarn:isBoolean(t.fallbackWarn)||isRegExp(t.fallbackWarn)?t.fallbackWarn:!0,_=n?n.fallbackRoot:isBoolean(t.fallbackRoot)?t.fallbackRoot:!0,w=!!t.fallbackFormat,S=isFunction(t.missing)?t.missing:null,T=isFunction(t.missing)?defineCoreMissingHandler(t.missing):null,B=isFunction(t.postTranslation)?t.postTranslation:null,C=n?n.warnHtmlMessage:isBoolean(t.warnHtmlMessage)?t.warnHtmlMessage:!0,D=!!t.escapeParameter;const z=n?n.modifiers:isPlainObject(t.modifiers)?t.modifiers:{};let U=t.pluralRules||n&&n.pluralRules,Y;Y=(()=>{a&&setFallbackContext(null);const Ce={version:VERSION,locale:c.value,fallbackLocale:l.value,messages:u.value,modifiers:z,pluralRules:U,missing:T===null?void 0:T,missingWarn:b,fallbackWarn:x,fallbackFormat:w,unresolving:!0,postTranslation:B===null?void 0:B,warnHtmlMessage:C,escapeParameter:D,messageResolver:t.messageResolver,__meta:{framework:"vue"}};Ce.datetimeFormats=d.value,Ce.numberFormats=m.value,Ce.__datetimeFormatters=isPlainObject(Y)?Y.__datetimeFormatters:void 0,Ce.__numberFormatters=isPlainObject(Y)?Y.__numberFormatters:void 0;const Re=createCoreContext(Ce);return a&&setFallbackContext(Re),Re})(),updateFallbackLocale(Y,c.value,l.value);function O(){return[c.value,l.value,u.value,d.value,m.value]}const J=computed({get:()=>c.value,set:Ce=>{c.value=Ce,Y.locale=c.value}}),Z=computed({get:()=>l.value,set:Ce=>{l.value=Ce,Y.fallbackLocale=l.value,updateFallbackLocale(Y,c.value,Ce)}}),se=computed(()=>u.value),ie=computed(()=>d.value),F=computed(()=>m.value);function k(){return isFunction(B)?B:null}function y(Ce){B=Ce,Y.postTranslation=Ce}function A(){return S}function I(Ce){Ce!==null&&(T=defineCoreMissingHandler(Ce)),S=Ce,Y.missing=T}const P=(Ce,Re,Le,je,Pe,me)=>{O();let ne;if(__INTLIFY_PROD_DEVTOOLS__)try{setAdditionalMeta(getMetaInfo()),a||(Y.fallbackContext=n?getFallbackContext():void 0),ne=Ce(Y)}finally{setAdditionalMeta(null),a||(Y.fallbackContext=void 0)}else ne=Ce(Y);if(isNumber(ne)&&ne===NOT_REOSLVED){const[ue,_e]=Re();return n&&_?je(n):Pe(ue)}else{if(me(ne))return ne;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function H(...Ce){return P(Re=>Reflect.apply(translate,null,[Re,...Ce]),()=>parseTranslateArgs(...Ce),"translate",Re=>Reflect.apply(Re.t,Re,[...Ce]),Re=>Re,Re=>isString(Re))}function q(...Ce){const[Re,Le,je]=Ce;if(je&&!isObject(je))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return H(Re,Le,assign$1({resolvedMessage:!0},je||{}))}function j(...Ce){return P(Re=>Reflect.apply(datetime,null,[Re,...Ce]),()=>parseDateTimeArgs(...Ce),"datetime format",Re=>Reflect.apply(Re.d,Re,[...Ce]),()=>MISSING_RESOLVE_VALUE,Re=>isString(Re))}function M(...Ce){return P(Re=>Reflect.apply(number,null,[Re,...Ce]),()=>parseNumberArgs(...Ce),"number format",Re=>Reflect.apply(Re.n,Re,[...Ce]),()=>MISSING_RESOLVE_VALUE,Re=>isString(Re))}function E(Ce){return Ce.map(Re=>isString(Re)||isNumber(Re)||isBoolean(Re)?createTextNode(String(Re)):Re)}const le={normalize:E,interpolate:Ce=>Ce,type:"vnode"};function Q(...Ce){return P(Re=>{let Le;const je=Re;try{je.processor=le,Le=Reflect.apply(translate,null,[je,...Ce])}finally{je.processor=null}return Le},()=>parseTranslateArgs(...Ce),"translate",Re=>Re[TransrateVNodeSymbol](...Ce),Re=>[createTextNode(Re)],Re=>isArray$1(Re))}function ce(...Ce){return P(Re=>Reflect.apply(number,null,[Re,...Ce]),()=>parseNumberArgs(...Ce),"number format",Re=>Re[NumberPartsSymbol](...Ce),()=>[],Re=>isString(Re)||isArray$1(Re))}function fe(...Ce){return P(Re=>Reflect.apply(datetime,null,[Re,...Ce]),()=>parseDateTimeArgs(...Ce),"datetime format",Re=>Re[DatetimePartsSymbol](...Ce),()=>[],Re=>isString(Re)||isArray$1(Re))}function oe(Ce){U=Ce,Y.pluralRules=U}function de(Ce,Re){const Le=isString(Re)?Re:c.value,je=te(Le);return Y.messageResolver(je,Ce)!==null}function ae(Ce){let Re=null;const Le=fallbackWithLocaleChain(Y,l.value,c.value);for(let je=0;je<Le.length;je++){const Pe=u.value[Le[je]]||{},me=Y.messageResolver(Pe,Ce);if(me!=null){Re=me;break}}return Re}function he(Ce){const Re=ae(Ce);return Re??(n?n.tm(Ce)||{}:{})}function te(Ce){return u.value[Ce]||{}}function pe(Ce,Re){u.value[Ce]=Re,Y.messages=u.value}function ee(Ce,Re){u.value[Ce]=u.value[Ce]||{},deepCopy(Re,u.value[Ce]),Y.messages=u.value}function ge(Ce){return d.value[Ce]||{}}function Ee(Ce,Re){d.value[Ce]=Re,Y.datetimeFormats=d.value,clearDateTimeFormat(Y,Ce,Re)}function be(Ce,Re){d.value[Ce]=assign$1(d.value[Ce]||{},Re),Y.datetimeFormats=d.value,clearDateTimeFormat(Y,Ce,Re)}function xe(Ce){return m.value[Ce]||{}}function ve(Ce,Re){m.value[Ce]=Re,Y.numberFormats=m.value,clearNumberFormat(Y,Ce,Re)}function Se(Ce,Re){m.value[Ce]=assign$1(m.value[Ce]||{},Re),Y.numberFormats=m.value,clearNumberFormat(Y,Ce,Re)}composerID++,n&&inBrowser&&(watch(n.locale,Ce=>{o&&(c.value=Ce,Y.locale=Ce,updateFallbackLocale(Y,c.value,l.value))}),watch(n.fallbackLocale,Ce=>{o&&(l.value=Ce,Y.fallbackLocale=Ce,updateFallbackLocale(Y,c.value,l.value))}));const ke={id:composerID,locale:J,fallbackLocale:Z,get inheritLocale(){return o},set inheritLocale(Ce){o=Ce,Ce&&n&&(c.value=n.locale.value,l.value=n.fallbackLocale.value,updateFallbackLocale(Y,c.value,l.value))},get availableLocales(){return Object.keys(u.value).sort()},messages:se,get modifiers(){return z},get pluralRules(){return U||{}},get isGlobal(){return a},get missingWarn(){return b},set missingWarn(Ce){b=Ce,Y.missingWarn=b},get fallbackWarn(){return x},set fallbackWarn(Ce){x=Ce,Y.fallbackWarn=x},get fallbackRoot(){return _},set fallbackRoot(Ce){_=Ce},get fallbackFormat(){return w},set fallbackFormat(Ce){w=Ce,Y.fallbackFormat=w},get warnHtmlMessage(){return C},set warnHtmlMessage(Ce){C=Ce,Y.warnHtmlMessage=Ce},get escapeParameter(){return D},set escapeParameter(Ce){D=Ce,Y.escapeParameter=Ce},t:H,getLocaleMessage:te,setLocaleMessage:pe,mergeLocaleMessage:ee,getPostTranslationHandler:k,setPostTranslationHandler:y,getMissingHandler:A,setMissingHandler:I,[SetPluralRulesSymbol]:oe};return ke.datetimeFormats=ie,ke.numberFormats=F,ke.rt=q,ke.te=de,ke.tm=he,ke.d=j,ke.n=M,ke.getDateTimeFormat=ge,ke.setDateTimeFormat=Ee,ke.mergeDateTimeFormat=be,ke.getNumberFormat=xe,ke.setNumberFormat=ve,ke.mergeNumberFormat=Se,ke[InejctWithOption]=t.__injectWithOption,ke[TransrateVNodeSymbol]=Q,ke[DatetimePartsSymbol]=fe,ke[NumberPartsSymbol]=ce,ke}function convertComposerOptions(t){const e=isString(t.locale)?t.locale:DEFAULT_LOCALE,n=isString(t.fallbackLocale)||isArray$1(t.fallbackLocale)||isPlainObject(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,a=isFunction(t.missing)?t.missing:void 0,o=isBoolean(t.silentTranslationWarn)||isRegExp(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,c=isBoolean(t.silentFallbackWarn)||isRegExp(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,l=isBoolean(t.fallbackRoot)?t.fallbackRoot:!0,u=!!t.formatFallbackMessages,d=isPlainObject(t.modifiers)?t.modifiers:{},m=t.pluralizationRules,b=isFunction(t.postTranslation)?t.postTranslation:void 0,x=isString(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,_=!!t.escapeParameterHtml,w=isBoolean(t.sync)?t.sync:!0;let S=t.messages;if(isPlainObject(t.sharedMessages)){const Y=t.sharedMessages;S=Object.keys(Y).reduce((O,J)=>{const Z=O[J]||(O[J]={});return assign$1(Z,Y[J]),O},S||{})}const{__i18n:T,__root:B,__injectWithOption:C}=t,D=t.datetimeFormats,z=t.numberFormats,U=t.flatJson;return{locale:e,fallbackLocale:n,messages:S,flatJson:U,datetimeFormats:D,numberFormats:z,missing:a,missingWarn:o,fallbackWarn:c,fallbackRoot:l,fallbackFormat:u,modifiers:d,pluralRules:m,postTranslation:b,warnHtmlMessage:x,escapeParameter:_,messageResolver:t.messageResolver,inheritLocale:w,__i18n:T,__root:B,__injectWithOption:C}}function createVueI18n(t={},e){{const n=createComposer(convertComposerOptions(t)),a={id:n.id,get locale(){return n.locale.value},set locale(o){n.locale.value=o},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(o){n.fallbackLocale.value=o},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(o){},get missing(){return n.getMissingHandler()},set missing(o){n.setMissingHandler(o)},get silentTranslationWarn(){return isBoolean(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(o){n.missingWarn=isBoolean(o)?!o:o},get silentFallbackWarn(){return isBoolean(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(o){n.fallbackWarn=isBoolean(o)?!o:o},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(o){n.fallbackFormat=o},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(o){n.setPostTranslationHandler(o)},get sync(){return n.inheritLocale},set sync(o){n.inheritLocale=o},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(o){n.warnHtmlMessage=o!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(o){n.escapeParameter=o},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(o){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...o){const[c,l,u]=o,d={};let m=null,b=null;if(!isString(c))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const x=c;return isString(l)?d.locale=l:isArray$1(l)?m=l:isPlainObject(l)&&(b=l),isArray$1(u)?m=u:isPlainObject(u)&&(b=u),Reflect.apply(n.t,n,[x,m||b||{},d])},rt(...o){return Reflect.apply(n.rt,n,[...o])},tc(...o){const[c,l,u]=o,d={plural:1};let m=null,b=null;if(!isString(c))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const x=c;return isString(l)?d.locale=l:isNumber(l)?d.plural=l:isArray$1(l)?m=l:isPlainObject(l)&&(b=l),isString(u)?d.locale=u:isArray$1(u)?m=u:isPlainObject(u)&&(b=u),Reflect.apply(n.t,n,[x,m||b||{},d])},te(o,c){return n.te(o,c)},tm(o){return n.tm(o)},getLocaleMessage(o){return n.getLocaleMessage(o)},setLocaleMessage(o,c){n.setLocaleMessage(o,c)},mergeLocaleMessage(o,c){n.mergeLocaleMessage(o,c)},d(...o){return Reflect.apply(n.d,n,[...o])},getDateTimeFormat(o){return n.getDateTimeFormat(o)},setDateTimeFormat(o,c){n.setDateTimeFormat(o,c)},mergeDateTimeFormat(o,c){n.mergeDateTimeFormat(o,c)},n(...o){return Reflect.apply(n.n,n,[...o])},getNumberFormat(o){return n.getNumberFormat(o)},setNumberFormat(o,c){n.setNumberFormat(o,c)},mergeNumberFormat(o,c){n.mergeNumberFormat(o,c)},getChoiceIndex(o,c){return-1},__onComponentInstanceCreated(o){const{componentInstanceCreatedListener:c}=t;c&&c(o,a)}};return a}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="globalThis",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((a,o)=>a=[...a,...isArray$1(o.children)?o.children:[o]],[]):e.reduce((n,a)=>{const o=t[a];return o&&(n[a]=o()),n},{})}function getFragmentableTag(t){return Fragment}const Translation={name:"i18n-t",props:assign$1({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>isNumber(t)||!isNaN(t)}},baseFormatProps),setup(t,e){const{slots:n,attrs:a}=e,o=t.i18n||useI18n({useScope:t.scope,__useComponent:!0});return()=>{const c=Object.keys(n).filter(x=>x!=="_"),l={};t.locale&&(l.locale=t.locale),t.plural!==void 0&&(l.plural=isString(t.plural)?+t.plural:t.plural);const u=getInterpolateArg(e,c),d=o[TransrateVNodeSymbol](t.keypath,u,l),m=assign$1({},a),b=isString(t.tag)||isObject(t.tag)?t.tag:getFragmentableTag();return h(b,m,d)}}};function isVNode(t){return isArray$1(t)&&!isString(t[0])}function renderFormatter(t,e,n,a){const{slots:o,attrs:c}=e;return()=>{const l={part:!0};let u={};t.locale&&(l.locale=t.locale),isString(t.format)?l.key=t.format:isObject(t.format)&&(isString(t.format.key)&&(l.key=t.format.key),u=Object.keys(t.format).reduce((_,w)=>n.includes(w)?assign$1({},_,{[w]:t.format[w]}):_,{}));const d=a(t.value,l,u);let m=[l.key];isArray$1(d)?m=d.map((_,w)=>{const S=o[_.type],T=S?S({[_.type]:_.value,index:w,parts:d}):[_.value];return isVNode(T)&&(T[0].key=`${_.type}-${w}`),T}):isString(d)&&(m=[d]);const b=assign$1({},c),x=isString(t.tag)||isObject(t.tag)?t.tag:getFragmentableTag();return h(x,b,m)}}const NumberFormat={name:"i18n-n",props:assign$1({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(t,e){const n=t.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(t,e,NUMBER_FORMAT_OPTIONS_KEYS,(...a)=>n[NumberPartsSymbol](...a))}},DatetimeFormat={name:"i18n-d",props:assign$1({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(t,e){const n=t.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(t,e,DATETIME_FORMAT_OPTIONS_KEYS,(...a)=>n[DatetimePartsSymbol](...a))}};function getComposer$2(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const a=n.__getInstance(e);return a!=null?a.__composer:t.global.__composer}}function vTDirective(t){const e=l=>{const{instance:u,modifiers:d,value:m}=l;if(!u||!u.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const b=getComposer$2(t,u.$),x=parseValue(m);return[Reflect.apply(b.t,b,[...makeParams(x)]),b]};return{created:(l,u)=>{const[d,m]=e(u);inBrowser&&t.global===m&&(l.__i18nWatcher=watch(m.locale,()=>{u.instance&&u.instance.$forceUpdate()})),l.__composer=m,l.textContent=d},unmounted:l=>{inBrowser&&l.__i18nWatcher&&(l.__i18nWatcher(),l.__i18nWatcher=void 0,delete l.__i18nWatcher),l.__composer&&(l.__composer=void 0,delete l.__composer)},beforeUpdate:(l,{value:u})=>{if(l.__composer){const d=l.__composer,m=parseValue(u);l.textContent=Reflect.apply(d.t,d,[...makeParams(m)])}},getSSRProps:l=>{const[u]=e(l);return{textContent:u}}}}function parseValue(t){if(isString(t))return{path:t};if(isPlainObject(t)){if(!("path"in t))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return t}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(t){const{path:e,locale:n,args:a,choice:o,plural:c}=t,l={},u=a||{};return isString(n)&&(l.locale=n),isNumber(o)&&(l.plural=o),isNumber(c)&&(l.plural=c),[e,u,l]}function apply(t,e,...n){const a=isPlainObject(n[0])?n[0]:{},o=!!a.useI18nComponentName;(isBoolean(a.globalInstall)?a.globalInstall:!0)&&(t.component(o?"i18n":Translation.name,Translation),t.component(NumberFormat.name,NumberFormat),t.component(DatetimeFormat.name,DatetimeFormat)),t.directive("t",vTDirective(e))}function defineMixin(t,e,n){return{beforeCreate(){const a=getCurrentInstance$1();if(!a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const o=this.$options;if(o.i18n){const c=o.i18n;o.__i18n&&(c.__i18n=o.__i18n),c.__root=e,this===this.$root?this.$i18n=mergeToRoot(t,c):(c.__injectWithOption=!0,this.$i18n=createVueI18n(c))}else o.__i18n?this===this.$root?this.$i18n=mergeToRoot(t,o):this.$i18n=createVueI18n({__i18n:o.__i18n,__injectWithOption:!0,__root:e}):this.$i18n=t;o.__i18nGlobal&&adjustI18nResources(e,o,o),t.__onComponentInstanceCreated(this.$i18n),n.__setInstance(a,this.$i18n),this.$t=(...c)=>this.$i18n.t(...c),this.$rt=(...c)=>this.$i18n.rt(...c),this.$tc=(...c)=>this.$i18n.tc(...c),this.$te=(c,l)=>this.$i18n.te(c,l),this.$d=(...c)=>this.$i18n.d(...c),this.$n=(...c)=>this.$i18n.n(...c),this.$tm=c=>this.$i18n.tm(c)},mounted(){},unmounted(){const a=getCurrentInstance$1();if(!a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__deleteInstance(a),delete this.$i18n}}}function mergeToRoot(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[SetPluralRulesSymbol](e.pluralizationRules||t.pluralizationRules);const n=getLocaleMessages(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(a=>t.mergeLocaleMessage(a,n[a])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(a=>t.mergeDateTimeFormat(a,e.datetimeFormats[a])),e.numberFormats&&Object.keys(e.numberFormats).forEach(a=>t.mergeNumberFormat(a,e.numberFormats[a])),t}const I18nInjectionKey=makeSymbol("globalThis-vue-i18n");function createI18n(t={},e){const n=__VUE_I18N_LEGACY_API__&&isBoolean(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,a=isBoolean(t.globalInjection)?t.globalInjection:!0,o=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,c=new Map,[l,u]=createGlobal(t,n),d=makeSymbol("");function m(_){return c.get(_)||null}function b(_,w){c.set(_,w)}function x(_){c.delete(_)}{const _={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return o},async install(w,...S){w.__VUE_I18N_SYMBOL__=d,w.provide(w.__VUE_I18N_SYMBOL__,_),!n&&a&&injectGlobalFields(w,_.global),__VUE_I18N_FULL_INSTALL__&&apply(w,_,...S),__VUE_I18N_LEGACY_API__&&n&&w.mixin(defineMixin(u,u.__composer,_));const T=w.unmount;w.unmount=()=>{_.dispose(),T()}},get globalThis(){return u},dispose(){l.stop()},__instances:c,__getInstance:m,__setInstance:b,__deleteInstance:x};return _}}function useI18n(t={}){const e=getCurrentInstance$1();if(e==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSLALLED);const n=getI18nInstance(e);getGlobalComposer(n);const a=getComponentOptions(e),o=getScope(t,a);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(e,o,globalThis,t)}if(o==="globalThis")return adjustI18nResources(globalThis,t,a),globalThis;if(o==="parent"){let u=getComposer(n,e,t.__useComponent);return u==null&&(u=globalThis),u}const c=n;let l=c.__getInstance(e);if(l==null){const u=assign$1({},t);"__i18n"in a&&(u.__i18n=a.__i18n),globalThis&&(u.__root=globalThis),l=createComposer(u),setupLifeCycle(c,e),c.__setInstance(e,l)}return l}function createGlobal(t,e,n){const a=effectScope();{const o=__VUE_I18N_LEGACY_API__&&e?a.run(()=>createVueI18n(t)):a.run(()=>createComposer(t));if(o==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[a,o]}}function getI18nInstance(t){{const e=inject$1(t.isCE?I18nInjectionKey:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw createI18nError(t.isCE?I18nErrorCodes.NOT_INSLALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return e}}function getScope(t,e){return isEmptyObject(t)?"__i18n"in e?"local":"globalThis":t.useScope?t.useScope:"local"}function getGlobalComposer(t){return t.mode==="composition"?t.global:t.global.__composer}function getComposer(t,e,n=!1){let a=null;const o=e.root;let c=e.parent;for(;c!=null;){const l=t;if(t.mode==="composition")a=l.__getInstance(c);else if(__VUE_I18N_LEGACY_API__){const u=l.__getInstance(c);u!=null&&(a=u.__composer,n&&a&&!a[InejctWithOption]&&(a=null))}if(a!=null||o===c)break;c=c.parent}return a}function setupLifeCycle(t,e,n){onMounted(()=>{},e),onUnmounted(()=>{t.__deleteInstance(e)},e)}function useI18nForLegacy(t,e,n,a={}){const o=e==="local",c=shallowRef(null);if(o&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const l=isBoolean(a.inheritLocale)?a.inheritLocale:!0,u=ref(o&&l?n.locale.value:isString(a.locale)?a.locale:DEFAULT_LOCALE),d=ref(o&&l?n.fallbackLocale.value:isString(a.fallbackLocale)||isArray$1(a.fallbackLocale)||isPlainObject(a.fallbackLocale)||a.fallbackLocale===!1?a.fallbackLocale:u.value),m=ref(getLocaleMessages(u.value,a)),b=ref(isPlainObject(a.datetimeFormats)?a.datetimeFormats:{[u.value]:{}}),x=ref(isPlainObject(a.numberFormats)?a.numberFormats:{[u.value]:{}}),_=o?n.missingWarn:isBoolean(a.missingWarn)||isRegExp(a.missingWarn)?a.missingWarn:!0,w=o?n.fallbackWarn:isBoolean(a.fallbackWarn)||isRegExp(a.fallbackWarn)?a.fallbackWarn:!0,S=o?n.fallbackRoot:isBoolean(a.fallbackRoot)?a.fallbackRoot:!0,T=!!a.fallbackFormat,B=isFunction(a.missing)?a.missing:null,C=isFunction(a.postTranslation)?a.postTranslation:null,D=o?n.warnHtmlMessage:isBoolean(a.warnHtmlMessage)?a.warnHtmlMessage:!0,z=!!a.escapeParameter,U=o?n.modifiers:isPlainObject(a.modifiers)?a.modifiers:{},Y=a.pluralRules||o&&n.pluralRules;function X(){return[u.value,d.value,m.value,b.value,x.value]}const O=computed({get:()=>c.value?c.value.locale.value:u.value,set:ee=>{c.value&&(c.value.locale.value=ee),u.value=ee}}),J=computed({get:()=>c.value?c.value.fallbackLocale.value:d.value,set:ee=>{c.value&&(c.value.fallbackLocale.value=ee),d.value=ee}}),Z=computed(()=>c.value?c.value.messages.value:m.value),se=computed(()=>b.value),ie=computed(()=>x.value);function F(){return c.value?c.value.getPostTranslationHandler():C}function k(ee){c.value&&c.value.setPostTranslationHandler(ee)}function y(){return c.value?c.value.getMissingHandler():B}function A(ee){c.value&&c.value.setMissingHandler(ee)}function I(ee){return X(),ee()}function P(...ee){return c.value?I(()=>Reflect.apply(c.value.t,null,[...ee])):I(()=>"")}function H(...ee){return c.value?Reflect.apply(c.value.rt,null,[...ee]):""}function q(...ee){return c.value?I(()=>Reflect.apply(c.value.d,null,[...ee])):I(()=>"")}function j(...ee){return c.value?I(()=>Reflect.apply(c.value.n,null,[...ee])):I(()=>"")}function M(ee){return c.value?c.value.tm(ee):{}}function E(ee,ge){return c.value?c.value.te(ee,ge):!1}function L(ee){return c.value?c.value.getLocaleMessage(ee):{}}function le(ee,ge){c.value&&(c.value.setLocaleMessage(ee,ge),m.value[ee]=ge)}function Q(ee,ge){c.value&&c.value.mergeLocaleMessage(ee,ge)}function ce(ee){return c.value?c.value.getDateTimeFormat(ee):{}}function fe(ee,ge){c.value&&(c.value.setDateTimeFormat(ee,ge),b.value[ee]=ge)}function oe(ee,ge){c.value&&c.value.mergeDateTimeFormat(ee,ge)}function de(ee){return c.value?c.value.getNumberFormat(ee):{}}function ae(ee,ge){c.value&&(c.value.setNumberFormat(ee,ge),x.value[ee]=ge)}function he(ee,ge){c.value&&c.value.mergeNumberFormat(ee,ge)}const te={get id(){return c.value?c.value.id:-1},locale:O,fallbackLocale:J,messages:Z,datetimeFormats:se,numberFormats:ie,get inheritLocale(){return c.value?c.value.inheritLocale:l},set inheritLocale(ee){c.value&&(c.value.inheritLocale=ee)},get availableLocales(){return c.value?c.value.availableLocales:Object.keys(m.value)},get modifiers(){return c.value?c.value.modifiers:U},get pluralRules(){return c.value?c.value.pluralRules:Y},get isGlobal(){return c.value?c.value.isGlobal:!1},get missingWarn(){return c.value?c.value.missingWarn:_},set missingWarn(ee){c.value&&(c.value.missingWarn=ee)},get fallbackWarn(){return c.value?c.value.fallbackWarn:w},set fallbackWarn(ee){c.value&&(c.value.missingWarn=ee)},get fallbackRoot(){return c.value?c.value.fallbackRoot:S},set fallbackRoot(ee){c.value&&(c.value.fallbackRoot=ee)},get fallbackFormat(){return c.value?c.value.fallbackFormat:T},set fallbackFormat(ee){c.value&&(c.value.fallbackFormat=ee)},get warnHtmlMessage(){return c.value?c.value.warnHtmlMessage:D},set warnHtmlMessage(ee){c.value&&(c.value.warnHtmlMessage=ee)},get escapeParameter(){return c.value?c.value.escapeParameter:z},set escapeParameter(ee){c.value&&(c.value.escapeParameter=ee)},t:P,getPostTranslationHandler:F,setPostTranslationHandler:k,getMissingHandler:y,setMissingHandler:A,rt:H,d:q,n:j,tm:M,te:E,getLocaleMessage:L,setLocaleMessage:le,mergeLocaleMessage:Q,getDateTimeFormat:ce,setDateTimeFormat:fe,mergeDateTimeFormat:oe,getNumberFormat:de,setNumberFormat:ae,mergeNumberFormat:he};function pe(ee){ee.locale.value=u.value,ee.fallbackLocale.value=d.value,Object.keys(m.value).forEach(ge=>{ee.mergeLocaleMessage(ge,m.value[ge])}),Object.keys(b.value).forEach(ge=>{ee.mergeDateTimeFormat(ge,b.value[ge])}),Object.keys(x.value).forEach(ge=>{ee.mergeNumberFormat(ge,x.value[ge])}),ee.escapeParameter=z,ee.fallbackFormat=T,ee.fallbackRoot=S,ee.fallbackWarn=w,ee.missingWarn=_,ee.warnHtmlMessage=D}return onBeforeMount(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const ee=c.value=t.proxy.$i18n.__composer;e==="globalThis"?(u.value=ee.locale.value,d.value=ee.fallbackLocale.value,m.value=ee.messages.value,b.value=ee.datetimeFormats.value,x.value=ee.numberFormats.value):o&&pe(ee)}),te}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm"];function injectGlobalFields(t,e){const n=Object.create(null);globalExportProps.forEach(a=>{const o=Object.getOwnPropertyDescriptor(e,a);if(!o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const c=isRef(o.value)?{get(){return o.value.value},set(l){o.value.value=l}}:{get(){return o.get&&o.get()}};Object.defineProperty(n,a,c)}),t.config.globalProperties.$i18n=n,globalExportMethods.forEach(a=>{const o=Object.getOwnPropertyDescriptor(e,a);if(!o||!o.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${a}`,o)})}registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);initFeatureFlags();if(__INTLIFY_PROD_DEVTOOLS__){const t=getGlobalThis();t.__INTLIFY__=!0,setDevToolsHook(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const i18n=createI18n({});/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(t,e){const n={};for(const a in e){const o=e[a];n[a]=isArray(o)?o.map(t):t(o)}return n}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,e,n="/"){let a,o={},c="",l="";const u=e.indexOf("#");let d=e.indexOf("?");return u<d&&u>=0&&(d=-1),d>-1&&(a=e.slice(0,d),c=e.slice(d+1,u>-1?u:e.length),o=t(c)),u>-1&&(a=a||e.slice(0,u),l=e.slice(u,e.length)),a=resolveRelativePath(a??e,n),{fullPath:a+(c&&"?")+c+l,path:a,query:o,hash:l}}function stringifyURL(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function stripBase(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function isSameRouteLocation(t,e,n){const a=e.matched.length-1,o=n.matched.length-1;return a>-1&&a===o&&isSameRouteRecord(e.matched[a],n.matched[o])&&isSameRouteLocationParams(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function isSameRouteRecord(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function isSameRouteLocationParams(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!isSameRouteLocationParamsValue(t[n],e[n]))return!1;return!0}function isSameRouteLocationParamsValue(t,e){return isArray(t)?isEquivalentArray(t,e):isArray(e)?isEquivalentArray(e,t):t===e}function isEquivalentArray(t,e){return isArray(e)?t.length===e.length&&t.every((n,a)=>n===e[a]):t.length===1&&t[0]===e}function resolveRelativePath(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),a=t.split("/");let o=n.length-1,c,l;for(c=0;c<a.length;c++)if(l=a[c],l!==".")if(l==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+a.slice(c-(c===a.length?1:0)).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,e){return t.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(t,e){const n=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:e.behavior,left:a.left-n.left-(e.left||0),top:a.top-n.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(t){let e;if("el"in t){const n=t.el,a=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=getElementPosition(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function getScrollKey(t,e){return(history.state?history.state.position-e:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,e){scrollPositions.set(t,e)}function getSavedScrollPosition(t){const e=scrollPositions.get(t);return scrollPositions.delete(t),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,e){const{pathname:n,search:a,hash:o}=e,c=t.indexOf("#");if(c>-1){let u=o.includes(t.slice(c))?t.slice(c).length:1,d=o.slice(u);return d[0]!=="/"&&(d="/"+d),stripBase(d,"")}return stripBase(n,t)+a+o}function useHistoryListeners(t,e,n,a){let o=[],c=[],l=null;const u=({state:_})=>{const w=createCurrentLocation(t,location),S=n.value,T=e.value;let B=0;if(_){if(n.value=w,e.value=_,l&&l===S){l=null;return}B=T?_.position-T.position:0}else a(w);o.forEach(C=>{C(n.value,S,{delta:B,type:NavigationType.pop,direction:B?B>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function d(){l=n.value}function m(_){o.push(_);const w=()=>{const S=o.indexOf(_);S>-1&&o.splice(S,1)};return c.push(w),w}function b(){const{history:_}=window;_.state&&_.replaceState(assign({},_.state,{scroll:computeScrollPosition()}),"")}function x(){for(const _ of c)_();c=[],window.removeEventListener("popstate",u),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",u),window.addEventListener("beforeunload",b),{pauseListeners:d,listen:m,destroy:x}}function buildState(t,e,n,a=!1,o=!1){return{back:t,current:e,forward:n,replaced:a,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:e,location:n}=window,a={value:createCurrentLocation(t,n)},o={value:e.state};o.value||c(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function c(d,m,b){const x=t.indexOf("#"),_=x>-1?(n.host&&document.querySelector("base")?t:t.slice(x))+d:createBaseLocation()+t+d;try{e[b?"replaceState":"pushState"](m,"",_),o.value=m}catch(w){console.error(w),n[b?"replace":"assign"](_)}}function l(d,m){const b=assign({},e.state,buildState(o.value.back,d,o.value.forward,!0),m,{position:o.value.position});c(d,b,!0),a.value=d}function u(d,m){const b=assign({},o.value,e.state,{forward:d,scroll:computeScrollPosition()});c(b.current,b,!0);const x=assign({},buildState(a.value,d,null),{position:b.position+1},m);c(d,x,!1),a.value=d}return{location:a,state:o,push:u,replace:l}}function createWebHistory(t){t=normalizeBase(t);const e=useHistoryStateNavigation(t),n=useHistoryListeners(t,e.state,e.location,e.replace);function a(c,l=!0){l||n.pauseListeners(),history.go(c)}const o=assign({location:"",base:t,go:a,createHref:createHref.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function createWebHashHistory(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),createWebHistory(t)}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,e){return assign(new Error,{type:t,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(t,e){return t instanceof Error&&NavigationFailureSymbol in t&&(e==null||!!(t.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,e){const n=assign({},BASE_PATH_PARSER_OPTIONS,e),a=[];let o=n.start?"^":"";const c=[];for(const m of t){const b=m.length?[]:[90];n.strict&&!m.length&&(o+="/");for(let x=0;x<m.length;x++){const _=m[x];let w=40+(n.sensitive?.25:0);if(_.type===0)x||(o+="/"),o+=_.value.replace(REGEX_CHARS_RE,"\\$&"),w+=40;else if(_.type===1){const{value:S,repeatable:T,optional:B,regexp:C}=_;c.push({name:S,repeatable:T,optional:B});const D=C||BASE_PARAM_PATTERN;if(D!==BASE_PARAM_PATTERN){w+=10;try{new RegExp(`(${D})`)}catch(U){throw new Error(`Invalid custom RegExp for param "${S}" (${D}): `+U.message)}}let z=T?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;x||(z=B&&m.length<2?`(?:/${z})`:"/"+z),B&&(z+="?"),o+=z,w+=20,B&&(w+=-8),T&&(w+=-20),D===".*"&&(w+=-50)}b.push(w)}a.push(b)}if(n.strict&&n.end){const m=a.length-1;a[m][a[m].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const l=new RegExp(o,n.sensitive?"":"i");function u(m){const b=m.match(l),x={};if(!b)return null;for(let _=1;_<b.length;_++){const w=b[_]||"",S=c[_-1];x[S.name]=w&&S.repeatable?w.split("/"):w}return x}function d(m){let b="",x=!1;for(const _ of t){(!x||!b.endsWith("/"))&&(b+="/"),x=!1;for(const w of _)if(w.type===0)b+=w.value;else if(w.type===1){const{value:S,repeatable:T,optional:B}=w,C=S in m?m[S]:"";if(isArray(C)&&!T)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const D=isArray(C)?C.join("/"):C;if(!D)if(B)_.length<2&&(b.endsWith("/")?b=b.slice(0,-1):x=!0);else throw new Error(`Missing required param "${S}"`);b+=D}}return b||"/"}return{re:l,score:a,keys:c,parse:u,stringify:d}}function compareScoreArray(t,e){let n=0;for(;n<t.length&&n<e.length;){const a=e[n]-t[n];if(a)return a;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function comparePathParserScore(t,e){let n=0;const a=t.score,o=e.score;for(;n<a.length&&n<o.length;){const c=compareScoreArray(a[n],o[n]);if(c)return c;n++}if(Math.abs(o.length-a.length)===1){if(isLastScoreNegative(a))return 1;if(isLastScoreNegative(o))return-1}return o.length-a.length}function isLastScoreNegative(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(w){throw new Error(`ERR (${n})/"${m}": ${w}`)}let n=0,a=n;const o=[];let c;function l(){c&&o.push(c),c=[]}let u=0,d,m="",b="";function x(){m&&(n===0?c.push({type:0,value:m}):n===1||n===2||n===3?(c.length>1&&(d==="*"||d==="+")&&e(`A repeatable param (${m}) must be alone in its segment. eg: '/:ids+.`),c.push({type:1,value:m,regexp:b,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):e("Invalid state to consume buffer"),m="")}function _(){m+=d}for(;u<t.length;){if(d=t[u++],d==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:d==="/"?(m&&x(),l()):d===":"?(x(),n=1):_();break;case 4:_(),n=a;break;case 1:d==="("?n=2:VALID_PARAM_RE.test(d)?_():(x(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&u--);break;case 2:d===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+d:n=3:b+=d;break;case 3:x(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&u--,b="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${m}"`),x(),l(),o}function createRouteRecordMatcher(t,e,n){const a=tokensToParser(tokenizePath(t.path),n),o=assign(a,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function createRouterMatcher(t,e){const n=[],a=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function o(b){return a.get(b)}function c(b,x,_){const w=!_,S=normalizeRouteRecord(b);S.aliasOf=_&&_.record;const T=mergeOptions(e,b),B=[S];if("alias"in b){const z=typeof b.alias=="string"?[b.alias]:b.alias;for(const U of z)B.push(assign({},S,{components:_?_.record.components:S.components,path:U,aliasOf:_?_.record:S}))}let C,D;for(const z of B){const{path:U}=z;if(x&&U[0]!=="/"){const Y=x.record.path,X=Y[Y.length-1]==="/"?"":"/";z.path=x.record.path+(U&&X+U)}if(C=createRouteRecordMatcher(z,x,T),_?_.alias.push(C):(D=D||C,D!==C&&D.alias.push(C),w&&b.name&&!isAliasRecord(C)&&l(b.name)),S.children){const Y=S.children;for(let X=0;X<Y.length;X++)c(Y[X],C,_&&_.children[X])}_=_||C,(C.record.components&&Object.keys(C.record.components).length||C.record.name||C.record.redirect)&&d(C)}return D?()=>{l(D)}:noop}function l(b){if(isRouteName(b)){const x=a.get(b);x&&(a.delete(b),n.splice(n.indexOf(x),1),x.children.forEach(l),x.alias.forEach(l))}else{const x=n.indexOf(b);x>-1&&(n.splice(x,1),b.record.name&&a.delete(b.record.name),b.children.forEach(l),b.alias.forEach(l))}}function u(){return n}function d(b){let x=0;for(;x<n.length&&comparePathParserScore(b,n[x])>=0&&(b.record.path!==n[x].record.path||!isRecordChildOf(b,n[x]));)x++;n.splice(x,0,b),b.record.name&&!isAliasRecord(b)&&a.set(b.record.name,b)}function m(b,x){let _,w={},S,T;if("name"in b&&b.name){if(_=a.get(b.name),!_)throw createRouterError(1,{location:b});T=_.record.name,w=assign(paramsFromLocation(x.params,_.keys.filter(D=>!D.optional).map(D=>D.name)),b.params&&paramsFromLocation(b.params,_.keys.map(D=>D.name))),S=_.stringify(w)}else if("path"in b)S=b.path,_=n.find(D=>D.re.test(S)),_&&(w=_.parse(S),T=_.record.name);else{if(_=x.name?a.get(x.name):n.find(D=>D.re.test(x.path)),!_)throw createRouterError(1,{location:b,currentLocation:x});T=_.record.name,w=assign({},x.params,b.params),S=_.stringify(w)}const B=[];let C=_;for(;C;)B.unshift(C.record),C=C.parent;return{name:T,path:S,params:w,matched:B,meta:mergeMetaFields(B)}}return t.forEach(b=>c(b)),{addRoute:c,resolve:m,removeRoute:l,getRoutes:u,getRecordMatcher:o}}function paramsFromLocation(t,e){const n={};for(const a of e)a in t&&(n[a]=t[a]);return n}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const a in t.components)e[a]=typeof n=="boolean"?n:n[a];return e}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((e,n)=>assign(e,n.meta),{})}function mergeOptions(t,e){const n={};for(const a in t)n[a]=a in e?e[a]:t[a];return n}function isRecordChildOf(t,e){return e.children.some(n=>n===t||isRecordChildOf(t,n))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function parseQuery(t){const e={};if(t===""||t==="?")return e;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<a.length;++o){const c=a[o].replace(PLUS_RE," "),l=c.indexOf("="),u=decode(l<0?c:c.slice(0,l)),d=l<0?null:decode(c.slice(l+1));if(u in e){let m=e[u];isArray(m)||(m=e[u]=[m]),m.push(d)}else e[u]=d}return e}function stringifyQuery(t){let e="";for(let n in t){const a=t[n];if(n=encodeQueryKey(n),a==null){a!==void 0&&(e+=(e.length?"&":"")+n);continue}(isArray(a)?a.map(c=>c&&encodeQueryValue(c)):[a&&encodeQueryValue(a)]).forEach(c=>{c!==void 0&&(e+=(e.length?"&":"")+n,c!=null&&(e+="="+c))})}return e}function normalizeQuery(t){const e={};for(const n in t){const a=t[n];a!==void 0&&(e[n]=isArray(a)?a.map(o=>o==null?null:""+o):a==null?a:""+a)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function e(a){return t.push(a),()=>{const o=t.indexOf(a);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function guardToPromiseFn(t,e,n,a,o){const c=a&&(a.enterCallbacks[o]=a.enterCallbacks[o]||[]);return()=>new Promise((l,u)=>{const d=x=>{x===!1?u(createRouterError(4,{from:n,to:e})):x instanceof Error?u(x):isRouteLocation(x)?u(createRouterError(2,{from:e,to:x})):(c&&a.enterCallbacks[o]===c&&typeof x=="function"&&c.push(x),l())},m=t.call(a&&a.instances[o],e,n,d);let b=Promise.resolve(m);t.length<3&&(b=b.then(d)),b.catch(x=>u(x))})}function extractComponentsGuards(t,e,n,a){const o=[];for(const c of t)for(const l in c.components){let u=c.components[l];if(!(e!=="beforeRouteEnter"&&!c.instances[l]))if(isRouteComponent(u)){const m=(u.__vccOpts||u)[e];m&&o.push(guardToPromiseFn(m,n,a,c,l))}else{let d=u();o.push(()=>d.then(m=>{if(!m)return Promise.reject(new Error(`Couldn't resolve component "${l}" at "${c.path}"`));const b=isESModule(m)?m.default:m;c.components[l]=b;const _=(b.__vccOpts||b)[e];return _&&guardToPromiseFn(_,n,a,c,l)()}))}}return o}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const e=inject$1(routerKey),n=inject$1(routeLocationKey),a=computed(()=>e.resolve(unref(t.to))),o=computed(()=>{const{matched:d}=a.value,{length:m}=d,b=d[m-1],x=n.matched;if(!b||!x.length)return-1;const _=x.findIndex(isSameRouteRecord.bind(null,b));if(_>-1)return _;const w=getOriginalPath(d[m-2]);return m>1&&getOriginalPath(b)===w&&x[x.length-1].path!==w?x.findIndex(isSameRouteRecord.bind(null,d[m-2])):_}),c=computed(()=>o.value>-1&&includesParams(n.params,a.value.params)),l=computed(()=>o.value>-1&&o.value===n.matched.length-1&&isSameRouteLocationParams(n.params,a.value.params));function u(d={}){return guardEvent(d)?e[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop):Promise.resolve()}return{route:a,href:computed(()=>a.value.href),isActive:c,isExactActive:l,navigate:u}}const RouterLinkImpl=defineComponent$1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:e}){const n=reactive(useLink(t)),{options:a}=inject$1(routerKey),o=computed(()=>({[getLinkClass(t.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const c=e.default&&e.default(n);return t.custom?c:h("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},c)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,e){for(const n in e){const a=e[n],o=t[n];if(typeof a=="string"){if(a!==o)return!1}else if(!isArray(o)||o.length!==a.length||a.some((c,l)=>c!==o[l]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,e,n)=>t??e??n,RouterViewImpl=defineComponent$1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const a=inject$1(routerViewLocationKey),o=computed(()=>t.route||a.value),c=inject$1(viewDepthKey,0),l=computed(()=>{let m=unref(c);const{matched:b}=o.value;let x;for(;(x=b[m])&&!x.components;)m++;return m}),u=computed(()=>o.value.matched[l.value]);provide(viewDepthKey,computed(()=>l.value+1)),provide(matchedRouteKey,u),provide(routerViewLocationKey,o);const d=ref();return watch(()=>[d.value,u.value,t.name],([m,b,x],[_,w,S])=>{b&&(b.instances[x]=m,w&&w!==b&&m&&m===_&&(b.leaveGuards.size||(b.leaveGuards=w.leaveGuards),b.updateGuards.size||(b.updateGuards=w.updateGuards))),m&&b&&(!w||!isSameRouteRecord(b,w)||!_)&&(b.enterCallbacks[x]||[]).forEach(T=>T(m))},{flush:"post"}),()=>{const m=o.value,b=t.name,x=u.value,_=x&&x.components[b];if(!_)return normalizeSlot(n.default,{Component:_,route:m});const w=x.props[b],S=w?w===!0?m.params:typeof w=="function"?w(m):w:null,B=h(_,assign({},S,e,{onVnodeUnmounted:C=>{C.component.isUnmounted&&(x.instances[b]=null)},ref:d}));return normalizeSlot(n.default,{Component:B,route:m})||B}}});function normalizeSlot(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(t){const e=createRouterMatcher(t.routes,t),n=t.parseQuery||parseQuery,a=t.stringifyQuery||stringifyQuery,o=t.history,c=useCallbacks(),l=useCallbacks(),u=useCallbacks(),d=shallowRef(START_LOCATION_NORMALIZED);let m=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=applyToParams.bind(null,Q=>""+Q),x=applyToParams.bind(null,encodeParam),_=applyToParams.bind(null,decode);function w(Q,ce){let fe,oe;return isRouteName(Q)?(fe=e.getRecordMatcher(Q),oe=ce):oe=Q,e.addRoute(oe,fe)}function S(Q){const ce=e.getRecordMatcher(Q);ce&&e.removeRoute(ce)}function T(){return e.getRoutes().map(Q=>Q.record)}function B(Q){return!!e.getRecordMatcher(Q)}function C(Q,ce){if(ce=assign({},ce||d.value),typeof Q=="string"){const te=parseURL(n,Q,ce.path),pe=e.resolve({path:te.path},ce),ee=o.createHref(te.fullPath);return assign(te,pe,{params:_(pe.params),hash:decode(te.hash),redirectedFrom:void 0,href:ee})}let fe;if("path"in Q)fe=assign({},Q,{path:parseURL(n,Q.path,ce.path).path});else{const te=assign({},Q.params);for(const pe in te)te[pe]==null&&delete te[pe];fe=assign({},Q,{params:x(Q.params)}),ce.params=x(ce.params)}const oe=e.resolve(fe,ce),de=Q.hash||"";oe.params=b(_(oe.params));const ae=stringifyURL(a,assign({},Q,{hash:encodeHash(de),path:oe.path})),he=o.createHref(ae);return assign({fullPath:ae,hash:de,query:a===stringifyQuery?normalizeQuery(Q.query):Q.query||{}},oe,{redirectedFrom:void 0,href:he})}function D(Q){return typeof Q=="string"?parseURL(n,Q,d.value.path):assign({},Q)}function z(Q,ce){if(m!==Q)return createRouterError(8,{from:ce,to:Q})}function U(Q){return O(Q)}function Y(Q){return U(assign(D(Q),{replace:!0}))}function X(Q){const ce=Q.matched[Q.matched.length-1];if(ce&&ce.redirect){const{redirect:fe}=ce;let oe=typeof fe=="function"?fe(Q):fe;return typeof oe=="string"&&(oe=oe.includes("?")||oe.includes("#")?oe=D(oe):{path:oe},oe.params={}),assign({query:Q.query,hash:Q.hash,params:"path"in oe?{}:Q.params},oe)}}function O(Q,ce){const fe=m=C(Q),oe=d.value,de=Q.state,ae=Q.force,he=Q.replace===!0,te=X(fe);if(te)return O(assign(D(te),{state:typeof te=="object"?assign({},de,te.state):de,force:ae,replace:he}),ce||fe);const pe=fe;pe.redirectedFrom=ce;let ee;return!ae&&isSameRouteLocation(a,oe,fe)&&(ee=createRouterError(16,{to:pe,from:oe}),j(oe,oe,!0,!1)),(ee?Promise.resolve(ee):Z(pe,oe)).catch(ge=>isNavigationFailure(ge)?isNavigationFailure(ge,2)?ge:q(ge):P(ge,pe,oe)).then(ge=>{if(ge){if(isNavigationFailure(ge,2))return O(assign({replace:he},D(ge.to),{state:typeof ge.to=="object"?assign({},de,ge.to.state):de,force:ae}),ce||pe)}else ge=ie(pe,oe,!0,he,de);return se(pe,oe,ge),ge})}function J(Q,ce){const fe=z(Q,ce);return fe?Promise.reject(fe):Promise.resolve()}function Z(Q,ce){let fe;const[oe,de,ae]=extractChangingRecords(Q,ce);fe=extractComponentsGuards(oe.reverse(),"beforeRouteLeave",Q,ce);for(const te of oe)te.leaveGuards.forEach(pe=>{fe.push(guardToPromiseFn(pe,Q,ce))});const he=J.bind(null,Q,ce);return fe.push(he),runGuardQueue(fe).then(()=>{fe=[];for(const te of c.list())fe.push(guardToPromiseFn(te,Q,ce));return fe.push(he),runGuardQueue(fe)}).then(()=>{fe=extractComponentsGuards(de,"beforeRouteUpdate",Q,ce);for(const te of de)te.updateGuards.forEach(pe=>{fe.push(guardToPromiseFn(pe,Q,ce))});return fe.push(he),runGuardQueue(fe)}).then(()=>{fe=[];for(const te of Q.matched)if(te.beforeEnter&&!ce.matched.includes(te))if(isArray(te.beforeEnter))for(const pe of te.beforeEnter)fe.push(guardToPromiseFn(pe,Q,ce));else fe.push(guardToPromiseFn(te.beforeEnter,Q,ce));return fe.push(he),runGuardQueue(fe)}).then(()=>(Q.matched.forEach(te=>te.enterCallbacks={}),fe=extractComponentsGuards(ae,"beforeRouteEnter",Q,ce),fe.push(he),runGuardQueue(fe))).then(()=>{fe=[];for(const te of l.list())fe.push(guardToPromiseFn(te,Q,ce));return fe.push(he),runGuardQueue(fe)}).catch(te=>isNavigationFailure(te,8)?te:Promise.reject(te))}function se(Q,ce,fe){for(const oe of u.list())oe(Q,ce,fe)}function ie(Q,ce,fe,oe,de){const ae=z(Q,ce);if(ae)return ae;const he=ce===START_LOCATION_NORMALIZED,te=isBrowser?history.state:{};fe&&(oe||he?o.replace(Q.fullPath,assign({scroll:he&&te&&te.scroll},de)):o.push(Q.fullPath,de)),d.value=Q,j(Q,ce,fe,he),q()}let F;function k(){F||(F=o.listen((Q,ce,fe)=>{if(!le.listening)return;const oe=C(Q),de=X(oe);if(de){O(assign(de,{replace:!0}),oe).catch(noop);return}m=oe;const ae=d.value;isBrowser&&saveScrollPosition(getScrollKey(ae.fullPath,fe.delta),computeScrollPosition()),Z(oe,ae).catch(he=>isNavigationFailure(he,12)?he:isNavigationFailure(he,2)?(O(he.to,oe).then(te=>{isNavigationFailure(te,20)&&!fe.delta&&fe.type===NavigationType.pop&&o.go(-1,!1)}).catch(noop),Promise.reject()):(fe.delta&&o.go(-fe.delta,!1),P(he,oe,ae))).then(he=>{he=he||ie(oe,ae,!1),he&&(fe.delta&&!isNavigationFailure(he,8)?o.go(-fe.delta,!1):fe.type===NavigationType.pop&&isNavigationFailure(he,20)&&o.go(-1,!1)),se(oe,ae,he)}).catch(noop)}))}let y=useCallbacks(),A=useCallbacks(),I;function P(Q,ce,fe){q(Q);const oe=A.list();return oe.length?oe.forEach(de=>de(Q,ce,fe)):console.error(Q),Promise.reject(Q)}function H(){return I&&d.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Q,ce)=>{y.add([Q,ce])})}function q(Q){return I||(I=!Q,k(),y.list().forEach(([ce,fe])=>Q?fe(Q):ce()),y.reset()),Q}function j(Q,ce,fe,oe){const{scrollBehavior:de}=t;if(!isBrowser||!de)return Promise.resolve();const ae=!fe&&getSavedScrollPosition(getScrollKey(Q.fullPath,0))||(oe||!fe)&&history.state&&history.state.scroll||null;return nextTick$3().then(()=>de(Q,ce,ae)).then(he=>he&&scrollToPosition(he)).catch(he=>P(he,Q,ce))}const M=Q=>o.go(Q);let E;const L=new Set,le={currentRoute:d,listening:!0,addRoute:w,removeRoute:S,hasRoute:B,getRoutes:T,resolve:C,options:t,push:U,replace:Y,go:M,back:()=>M(-1),forward:()=>M(1),beforeEach:c.add,beforeResolve:l.add,afterEach:u.add,onError:A.add,isReady:H,install(Q){const ce=this;Q.component("RouterLink",RouterLink),Q.component("RouterView",RouterView),Q.config.globalProperties.$router=ce,Object.defineProperty(Q.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(d)}),isBrowser&&!E&&d.value===START_LOCATION_NORMALIZED&&(E=!0,U(o.location).catch(de=>{}));const fe={};for(const de in START_LOCATION_NORMALIZED)fe[de]=computed(()=>d.value[de]);Q.provide(routerKey,ce),Q.provide(routeLocationKey,reactive(fe)),Q.provide(routerViewLocationKey,d);const oe=Q.unmount;L.add(Q),Q.unmount=function(){L.delete(Q),L.size<1&&(m=START_LOCATION_NORMALIZED,F&&F(),F=null,d.value=START_LOCATION_NORMALIZED,E=!1,I=!1),oe()}}};return le}function runGuardQueue(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function extractChangingRecords(t,e){const n=[],a=[],o=[],c=Math.max(e.matched.length,t.matched.length);for(let l=0;l<c;l++){const u=e.matched[l];u&&(t.matched.find(m=>isSameRouteRecord(m,u))?a.push(u):n.push(u));const d=t.matched[l];d&&(e.matched.find(m=>isSameRouteRecord(m,d))||o.push(d))}return[n,a,o]}const routes=[{path:"/",name:"Accueil",component:()=>__vitePreload(()=>import("./PageAccueil-110fb60a.js"),["PageAccueil-110fb60a.js","PageAccueil-3b71b8fe.css"])},{path:"/compte",name:"Compte",component:()=>__vitePreload(()=>import("./PageCompte-d31ebd9f.js"),["PageCompte-d31ebd9f.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/données",name:"Données",component:()=>__vitePreload(()=>import("./MesDonnées-49cd9711.js"),["MesDonnées-49cd9711.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/données/bd/:id",component:()=>__vitePreload(()=>import("./PageBD-ae686aad.js"),["PageBD-ae686aad.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/données/bd/:id/tableau/:idTableau",component:()=>__vitePreload(()=>import("./PageTableau-5924c104.js"),["PageTableau-5924c104.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/recherche",name:"Recherche",component:()=>__vitePreload(()=>import("./PageRecherche-0b4a2853.js"),["PageRecherche-0b4a2853.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/favoris",name:"Favoris",component:()=>__vitePreload(()=>import("./PageFavoris-72062d04.js"),["PageFavoris-72062d04.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/automatisations",name:"Automatisations",component:()=>__vitePreload(()=>import("./PageAutomatisations-66a8130f.js"),["PageAutomatisations-66a8130f.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/signalements",name:"Signalements",component:()=>__vitePreload(()=>import("./PageSignalements-380f964c.js"),["PageSignalements-380f964c.js","_plugin-vue_export-helper-c27b6911.js"])},{path:encodeURI("/téléchargements"),name:"Téléchargements",component:()=>__vitePreload(()=>import("./PageTéléchargements-42dca39a.js"),["PageTéléchargements-42dca39a.js","_plugin-vue_export-helper-c27b6911.js"])}],routeur=createRouter({history:createWebHashHistory(),routes});function registerPlugins(t){loadFonts(),t.use(vuetify),t.use(i18n),t.use(routeur)}function inscrireExtentions(t){registerPlugins(t),t.use(constellationNavigateur)}const app=createApp(_sfc_main);inscrireExtentions(app);app.mount("#app");export{decode$o as $,AccessControllers$1 as A,createStaticVNode as B,ref as C,DefaultFactory as D,onMounted as E,createVNode as F,require$$1 as G,multiaddr as H,pTimeout as I,isName as J,isoUrl as K,isWebWorker$1 as L,getDefaultExportFromCjs as M,commonjsGlobal as N,OrbitDB as O,net as P,path as Q,pbkdf2$2 as R,utilExports as S,asUint8Array$2 as T,requireMinimal as U,writer$1 as V,writer_buffer as W,reader$1 as X,reader_buffer as Y,encode$p as Z,__vitePreload as _,allocUnsafe$2 as a,Token as a0,Type as a1,encodeErrPrefix as a2,fromString$7 as a3,asU8A as a4,encodeCustom as a5,decodeErrPrefix as a6,decodeCodePointsArray as a7,nanoid as a8,anySignal_2 as a9,browser$1$1 as aA,require$$0$2 as aB,isIP as aC,forge$m as aD,generateKeyPair as aE,getProtocol as aF,fromNodeAddress as aG,isReactNative$1 as aH,marshalPrivateKey as aI,resolvers as aJ,browserExports$2 as aK,PQueue as aa,http as ab,enumeration as ac,importKey as ad,mergeOptions$2 as ae,toBuffer as af,varint as ag,debug as ah,Level as ai,aspromise as aj,base64$8 as ak,eventemitter as al,float as am,inquire_1 as an,utf8$5 as ao,pool_1 as ap,commonjsRequire$1 as aq,bases$1 as ar,randomBytes$1 as as,marshalPublicKey as at,sha256$3 as au,anySignalExports as av,isMultiaddr as aw,env as ax,eventsExports as ay,requireCryptoBrowserify as az,alloc as b,concat$2 as c,errCode as d,equals$4 as e,constantTime as f,chacha20poly1305 as g,encodeMessage as h,decodeMessage as i,fromString$5 as j,unmarshalPublicKey as k,logger as l,message as m,isBrowser$2 as n,isElectronRenderer as o,isElectronMain as p,isNode as q,defineComponent$1 as r,sha256$2 as s,toString$8 as t,unmarshalPrivateKey as u,openBlock as v,wipe$1 as w,x25519 as x,createElementBlock as y,createBaseVNode as z};
//# sourceMappingURL=index-18f6c421.js.map
