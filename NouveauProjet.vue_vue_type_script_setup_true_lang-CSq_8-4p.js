import{d as L,E as z,க as W,D as G,r,q as x,a as H,c as K,w as a,b as e,h as F,V as J,y as b,t as l,f as s,aq as Q,e as v,l as X,af as Y,ag as f,dy as N,dz as Z,bG as ee,i as g,dA as te,ai as ae,ak as se,al as oe,A as h,B,H as ne,m as ue,C as ie,K as re,L as le,M as ce}from"./index-BmpvvhgS.js";const de={class:"text-center"},me={class:"text-h6 font-weight-light mb-2"},pe=L({__name:"NouveauProjet",emits:["nouveau"],setup(ve,{emit:P}){const y=P,d=z(),{மொழியாக்கம்_பயன்படுத்து:k}=W(),{$மொ:o}=k(),{mdAndUp:T}=G(),q=te(),V=r(!1),u=r(0),c=["noms","descriptions","motsClefs","ajouterBds","confirmation"],S=x(()=>{switch(c[u.value]){case"noms":return"projet.nouveau.titreNoms";case"descriptions":return"projet.nouveau.titreDescriptions";case"motsClefs":return"projet.nouveau.titreMotsClefs";case"ajouterBds":return"projet.nouveau.titreAjouterBds";case"confirmation":return"projet.nouveau.titreConfirmation";default:return""}}),I=x(()=>{switch(c[u.value]){case"noms":return"projet.nouveau.sousTitreNoms";case"descriptions":return"projet.nouveau.sousTitreDescriptions";case"motsClefs":return"projet.nouveau.sousTitreMotsClefs";case"ajouterBds":return"projet.nouveau.sousTitreAjouterBds";case"confirmation":return"projet.nouveau.sousTitreConfirmation";default:return""}}),U=()=>{switch(c[u.value]){default:u.value++;break}},$=()=>{switch(c[u.value]){default:u.value--;break}},A=x(()=>{switch(c[u.value]){case"noms":return{actif:Object.keys(m.value).length>0,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),D=x(()=>{switch(c[u.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!C.value,visible:!0};default:return{actif:!0,visible:!0}}}),m=r({}),M=t=>{m.value=t},p=r({}),O=t=>{p.value=t},j=r([]),_=r([]),w=r(!1),C=r(!1),E=async()=>{C.value=!0;const t=await d.projets.créerProjet();if(!t)throw new Error("Projet non créé.");await d.projets.sauvegarderNomsProjet({idProjet:t,noms:Object.fromEntries(Object.entries(m.value))}),await d.projets.sauvegarderDescriptionsProjet({idProjet:t,descriptions:Object.fromEntries(Object.entries(p.value))}),await d.projets.ajouterMotsClefsProjet({idProjet:t,idsMotsClefs:j.value}),await Promise.all(_.value.map(async n=>await d.projets.ajouterBdProjet({idProjet:t,idBd:n}))),y("nouveau",t),R(),w.value&&q.push(encodeURI(`/données/projet/${encodeURIComponent(t)}`))},R=()=>{m.value={},p.value={},j.value=[],_.value=[],u.value=0,C.value=!1,V.value=!1};return(t,n)=>(H(),K(ce,{modelValue:V.value,"onUpdate:modelValue":n[5]||(n[5]=i=>V.value=i)},{activator:a(({props:i})=>[ie(t.$slots,"activator",re(le({props:i})))]),default:a(()=>[e(ue,{class:"mx-auto","min-width":s(T)?750:300},{default:a(()=>[e(F,null,{default:a(()=>[e(J,{class:"text-h5 justify-space-between"},{default:a(()=>[b("span",null,l(s(o)(S.value)),1)]),_:1}),e(Q,null,{default:a(()=>[v(l(s(o)(I.value)),1)]),_:1})]),_:1}),e(X,null,{default:a(()=>[e(Y,{modelValue:u.value,"onUpdate:modelValue":n[4]||(n[4]=i=>u.value=i),style:{"overflow-y":"scroll"}},{default:a(()=>[e(f,{value:0},{default:a(()=>[e(N,{"texte-aucun-nom":s(o)("communs.texteAucunNom"),"indice-langue":s(o)("communs.indiceLangue"),"etiquette-nom":s(o)("communs.étiquetteNom"),"indice-nom":s(o)("projets.nouveau.texteIndiceNom"),"noms-initiaux":m.value,"autorisation-modification":!0,onAjusterNoms:M},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1}),e(f,{value:1},{default:a(()=>[e(N,{"texte-aucun-nom":s(o)("projets.nouveau.texteAucuneDescription"),"indice-langue":s(o)("communs.indiceLangue"),"etiquette-nom":s(o)("projets.nouveau.texteÉtiquetteDescription"),"indice-nom":s(o)("projets.nouveau.texteIndiceDescription"),"noms-initiaux":p.value,"autorisation-modification":!0,onAjusterNoms:O},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1}),e(f,{value:2},{default:a(()=>[e(Z,{multiples:"",originaux:j.value,onSelectionnee:n[0]||(n[0]=i=>j.value=i)},null,8,["originaux"])]),_:1}),e(f,{value:3},{default:a(()=>[e(ee,{multiples:!1,originales:_.value,onSelectionnee:n[1]||(n[1]=i=>_.value=i)},null,8,["originales"])]),_:1}),e(f,{value:4},{default:a(()=>[b("div",de,[b("h3",me,l(s(o)("projets.nouveau.texteCréer")),1),b("p",null,[e(g,{class:"mt-3",variant:"outlined",loading:C.value,onClick:n[2]||(n[2]=()=>E())},{default:a(()=>[v(l(s(o)("projets.nouveau.texteBtnCréation")),1)]),_:1},8,["loading"])]),e(ae,{modelValue:w.value,"onUpdate:modelValue":n[3]||(n[3]=i=>w.value=i)},{default:a(()=>[v(l(s(o)("projets.nouveau.ouvrirAprèsCréation")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(se),e(oe,null,{default:a(()=>[h(e(g,{variant:"text",disabled:!D.value.actif,onClick:$},{default:a(()=>[v(l(s(o)("communs.retour")),1)]),_:1},8,["disabled"]),[[B,D.value.visible]]),e(ne),h(e(g,{color:"primary",variant:"flat",disabled:!A.value.actif,onClick:U},{default:a(()=>[v(l(s(o)("communs.suivant")),1)]),_:1},8,["disabled"]),[[B,A.value.visible]])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}});export{pe as _};
//# sourceMappingURL=NouveauProjet.vue_vue_type_script_setup_true_lang-CSq_8-4p.js.map
