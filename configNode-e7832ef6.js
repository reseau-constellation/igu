import{b as _t,E as js,C as at,s as Fs,d as Pt,T as Vs,w as Us,a as Gs}from"./index-31577a2d.js";import{w as qs}from"./index-fb89aff9.js";import{n as zs}from"./index-bc351cda.js";import{J as Zs,K as Hs,l as ct,d as W,E as ut,L as lt,M as Xs}from"./index-4d7bf915.js";import{s as St}from"./source-55a07a62.js";var Bt={},Ks={get exports(){return Bt},set exports(a){Bt=a}},Ys=function(s){if(s){if(typeof s[Symbol.iterator]=="function")return s[Symbol.iterator]();if(typeof s[Symbol.asyncIterator]=="function")return s[Symbol.asyncIterator]();if(typeof s.next=="function")return s}throw new Error("argument is not an iterator or iterable")};const Js=Ys;var Ht=a=>async s=>{s=Js(s);const n=A=>{typeof A.return=="function"&&A.return()};let f=null,u=null;const o=A=>{f=A,u&&u(A),n(s)};let l=null,v=!1;const b=()=>{v=!0,l&&l()};let y=null,B=!1;const p=()=>{B=!0,y&&y()};let M=null;const S=()=>{M&&M()},w=()=>new Promise((A,q)=>{l=M=A,u=q,a.once("drain",S)}),g=()=>(n(s),new Promise((A,q)=>{if(v||B||f)return A();y=l=A,u=q})),G=()=>{a.removeListener("error",o),a.removeListener("close",b),a.removeListener("finish",p),a.removeListener("drain",S)};a.once("error",o),a.once("close",b),a.once("finish",p);try{for await(const A of s){if(!a.writable||a.destroyed||f)break;a.write(A)===!1&&await w()}}catch(A){f||a.destroy(),f=A}try{if(a.writable&&a.end(),await g(),f)throw f}finally{G()}};const Ws=Ht,Qs=St;var Xt=a=>({sink:Ws(a),source:Qs(a)});const tr=Xt;var er=a=>async function*(s){const n=tr(a);let f;if(n.sink(s).catch(u=>{f=u}),yield*n.source,f)throw f};(function(a){a.exports=St,a.exports.source=St,a.exports.sink=Ht,a.exports.transform=er,a.exports.duplex=Xt})(Ks);const sr=Zs(Bt);function Kt(a){return this.subnetMask<a.subnetMask?!1:this.mask(a.subnetMask)===a.mask()}function Yt(a){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===a&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}const Q=32,Ot=4,ht=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,Nt=/\/\d{1,2}$/;class U extends Error{constructor(s,n){super(s),this.name="AddressError",n!==null&&(this.parseMessage=n)}}var E={},rr={get exports(){return E},set exports(a){E=a}};(function(a,s){(function(){var n,f=0xdeadbeefcafe,u=(f&16777215)==15715070;function o(t,e,r){t!=null&&(typeof t=="number"?this.fromNumber(t,e,r):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}function l(){return new o(null)}function v(t,e,r,i,h,c){for(;--c>=0;){var d=e*this[t++]+r[i]+h;h=Math.floor(d/67108864),r[i++]=d&67108863}return h}function b(t,e,r,i,h,c){for(var d=e&32767,m=e>>15;--c>=0;){var I=this[t]&32767,k=this[t++]>>15,N=m*I+k*d;I=d*I+((N&32767)<<15)+r[i]+(h&1073741823),h=(I>>>30)+(N>>>15)+m*k+(h>>>30),r[i++]=I&1073741823}return h}function y(t,e,r,i,h,c){for(var d=e&16383,m=e>>14;--c>=0;){var I=this[t]&16383,k=this[t++]>>14,N=m*I+k*d;I=d*I+((N&16383)<<14)+r[i]+h,h=(I>>28)+(N>>14)+m*k,r[i++]=I&268435455}return h}var B=typeof navigator<"u";B&&u&&navigator.appName=="Microsoft Internet Explorer"?(o.prototype.am=b,n=30):B&&u&&navigator.appName!="Netscape"?(o.prototype.am=v,n=26):(o.prototype.am=y,n=28),o.prototype.DB=n,o.prototype.DM=(1<<n)-1,o.prototype.DV=1<<n;var p=52;o.prototype.FV=Math.pow(2,p),o.prototype.F1=p-n,o.prototype.F2=2*n-p;var M="0123456789abcdefghijklmnopqrstuvwxyz",S=new Array,w,g;for(w="0".charCodeAt(0),g=0;g<=9;++g)S[w++]=g;for(w="a".charCodeAt(0),g=10;g<36;++g)S[w++]=g;for(w="A".charCodeAt(0),g=10;g<36;++g)S[w++]=g;function G(t){return M.charAt(t)}function A(t,e){var r=S[t.charCodeAt(e)];return r??-1}function q(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function tt(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function C(t){var e=l();return e.fromInt(t),e}function Qt(t,e){var r;if(e==16)r=4;else if(e==8)r=3;else if(e==256)r=8;else if(e==2)r=1;else if(e==32)r=5;else if(e==4)r=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var i=t.length,h=!1,c=0;--i>=0;){var d=r==8?t[i]&255:A(t,i);if(d<0){t.charAt(i)=="-"&&(h=!0);continue}h=!1,c==0?this[this.t++]=d:c+r>this.DB?(this[this.t-1]|=(d&(1<<this.DB-c)-1)<<c,this[this.t++]=d>>this.DB-c):this[this.t-1]|=d<<c,c+=r,c>=this.DB&&(c-=this.DB)}r==8&&t[0]&128&&(this.s=-1,c>0&&(this[this.t-1]|=(1<<this.DB-c)-1<<c)),this.clamp(),h&&o.ZERO.subTo(this,this)}function te(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function ee(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var r=(1<<e)-1,i,h=!1,c="",d=this.t,m=this.DB-d*this.DB%e;if(d-- >0)for(m<this.DB&&(i=this[d]>>m)>0&&(h=!0,c=G(i));d>=0;)m<e?(i=(this[d]&(1<<m)-1)<<e-m,i|=this[--d]>>(m+=this.DB-e)):(i=this[d]>>(m-=e)&r,m<=0&&(m+=this.DB,--d)),i>0&&(h=!0),h&&(c+=G(i));return h?c:"0"}function se(){var t=l();return o.ZERO.subTo(this,t),t}function re(){return this.s<0?this.negate():this}function ie(t){var e=this.s-t.s;if(e!=0)return e;var r=this.t;if(e=r-t.t,e!=0)return this.s<0?-e:e;for(;--r>=0;)if((e=this[r]-t[r])!=0)return e;return 0}function rt(t){var e=1,r;return(r=t>>>16)!=0&&(t=r,e+=16),(r=t>>8)!=0&&(t=r,e+=8),(r=t>>4)!=0&&(t=r,e+=4),(r=t>>2)!=0&&(t=r,e+=2),(r=t>>1)!=0&&(t=r,e+=1),e}function ne(){return this.t<=0?0:this.DB*(this.t-1)+rt(this[this.t-1]^this.s&this.DM)}function oe(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s}function ae(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s}function fe(t,e){var r=t%this.DB,i=this.DB-r,h=(1<<i)-1,c=Math.floor(t/this.DB),d=this.s<<r&this.DM,m;for(m=this.t-1;m>=0;--m)e[m+c+1]=this[m]>>i|d,d=(this[m]&h)<<r;for(m=c-1;m>=0;--m)e[m]=0;e[c]=d,e.t=this.t+c+1,e.s=this.s,e.clamp()}function ue(t,e){e.s=this.s;var r=Math.floor(t/this.DB);if(r>=this.t){e.t=0;return}var i=t%this.DB,h=this.DB-i,c=(1<<i)-1;e[0]=this[r]>>i;for(var d=r+1;d<this.t;++d)e[d-r-1]|=(this[d]&c)<<h,e[d-r]=this[d]>>i;i>0&&(e[this.t-r-1]|=(this.s&c)<<h),e.t=this.t-r,e.clamp()}function he(t,e){for(var r=0,i=0,h=Math.min(t.t,this.t);r<h;)i+=this[r]-t[r],e[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i-=t.s;r<this.t;)i+=this[r],e[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i-=t[r],e[r++]=i&this.DM,i>>=this.DB;i-=t.s}e.s=i<0?-1:0,i<-1?e[r++]=this.DV+i:i>0&&(e[r++]=i),e.t=r,e.clamp()}function ce(t,e){var r=this.abs(),i=t.abs(),h=r.t;for(e.t=h+i.t;--h>=0;)e[h]=0;for(h=0;h<i.t;++h)e[h+r.t]=r.am(0,i[h],e,h,0,r.t);e.s=0,e.clamp(),this.s!=t.s&&o.ZERO.subTo(e,e)}function le(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var i=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,i,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()}function pe(t,e,r){var i=t.abs();if(!(i.t<=0)){var h=this.abs();if(h.t<i.t){e?.fromInt(0),r!=null&&this.copyTo(r);return}r==null&&(r=l());var c=l(),d=this.s,m=t.s,I=this.DB-rt(i[i.t-1]);I>0?(i.lShiftTo(I,c),h.lShiftTo(I,r)):(i.copyTo(c),h.copyTo(r));var k=c.t,N=c[k-1];if(N!=0){var O=N*(1<<this.F1)+(k>1?c[k-2]>>this.F2:0),z=this.FV/O,nt=(1<<this.F1)/O,L=1<<this.F2,j=r.t,ot=j-k,H=e??l();for(c.dlShiftTo(ot,H),r.compareTo(H)>=0&&(r[r.t++]=1,r.subTo(H,r)),o.ONE.dlShiftTo(k,H),H.subTo(c,c);c.t<k;)c[c.t++]=0;for(;--ot>=0;){var gt=r[--j]==N?this.DM:Math.floor(r[j]*z+(r[j-1]+L)*nt);if((r[j]+=c.am(0,gt,r,ot,0,k))<gt)for(c.dlShiftTo(ot,H),r.subTo(H,r);r[j]<--gt;)r.subTo(H,r)}e!=null&&(r.drShiftTo(k,e),d!=m&&o.ZERO.subTo(e,e)),r.t=k,r.clamp(),I>0&&r.rShiftTo(I,r),d<0&&o.ZERO.subTo(r,r)}}}function de(t){var e=l();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(o.ZERO)>0&&t.subTo(e,e),e}function X(t){this.m=t}function me(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function ge(t){return t}function ve(t){t.divRemTo(this.m,null,t)}function ye(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function be(t,e){t.squareTo(e),this.reduce(e)}X.prototype.convert=me,X.prototype.revert=ge,X.prototype.reduce=ve,X.prototype.mulTo=ye,X.prototype.sqrTo=be;function we(){if(this.t<1)return 0;var t=this[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function K(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function Te(t){var e=l();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(o.ZERO)>0&&this.m.subTo(e,e),e}function Se(t){var e=l();return t.copyTo(e),this.reduce(e),e}function Be(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=t[e]&32767,i=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t[r]+=this.m.am(0,i,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Ie(t,e){t.squareTo(e),this.reduce(e)}function Ee(t,e,r){t.multiplyTo(e,r),this.reduce(r)}K.prototype.convert=Te,K.prototype.revert=Se,K.prototype.reduce=Be,K.prototype.mulTo=Ee,K.prototype.sqrTo=Ie;function Ae(){return(this.t>0?this[0]&1:this.s)==0}function Me(t,e){if(t>4294967295||t<1)return o.ONE;var r=l(),i=l(),h=e.convert(this),c=rt(t)-1;for(h.copyTo(r);--c>=0;)if(e.sqrTo(r,i),(t&1<<c)>0)e.mulTo(i,h,r);else{var d=r;r=i,i=d}return e.revert(r)}function De(t,e){var r;return t<256||e.isEven()?r=new X(e):r=new K(e),this.exp(t,r)}o.prototype.copyTo=q,o.prototype.fromInt=tt,o.prototype.fromString=Qt,o.prototype.clamp=te,o.prototype.dlShiftTo=oe,o.prototype.drShiftTo=ae,o.prototype.lShiftTo=fe,o.prototype.rShiftTo=ue,o.prototype.subTo=he,o.prototype.multiplyTo=ce,o.prototype.squareTo=le,o.prototype.divRemTo=pe,o.prototype.invDigit=we,o.prototype.isEven=Ae,o.prototype.exp=Me,o.prototype.toString=ee,o.prototype.negate=se,o.prototype.abs=re,o.prototype.compareTo=ie,o.prototype.bitLength=ne,o.prototype.mod=de,o.prototype.modPowInt=De,o.ZERO=C(0),o.ONE=C(1);function Re(){var t=l();return this.copyTo(t),t}function ke(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function xe(){return this.t==0?this.s:this[0]<<24>>24}function Ce(){return this.t==0?this.s:this[0]<<16>>16}function _e(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function Pe(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Oe(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=C(r),h=l(),c=l(),d="";for(this.divRemTo(i,h,c);h.signum()>0;)d=(r+c.intValue()).toString(t).substr(1)+d,h.divRemTo(i,h,c);return c.intValue().toString(t)+d}function Ne(t,e){this.fromInt(0),e==null&&(e=10);for(var r=this.chunkSize(e),i=Math.pow(e,r),h=!1,c=0,d=0,m=0;m<t.length;++m){var I=A(t,m);if(I<0){t.charAt(m)=="-"&&this.signum()==0&&(h=!0);continue}d=e*d+I,++c>=r&&(this.dMultiply(i),this.dAddOffset(d,0),c=0,d=0)}c>0&&(this.dMultiply(Math.pow(e,c)),this.dAddOffset(d,0)),h&&o.ZERO.subTo(this,this)}function $e(t,e,r){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,r),this.testBit(t-1)||this.bitwiseTo(o.ONE.shiftLeft(t-1),pt,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(o.ONE.shiftLeft(t-1),this);else{var i=new Array,h=t&7;i.length=(t>>3)+1,e.nextBytes(i),h>0?i[0]&=(1<<h)-1:i[0]=0,this.fromString(i,256)}}function Le(){var t=this.t,e=new Array;e[0]=this.s;var r=this.DB-t*this.DB%8,i,h=0;if(t-- >0)for(r<this.DB&&(i=this[t]>>r)!=(this.s&this.DM)>>r&&(e[h++]=i|this.s<<this.DB-r);t>=0;)r<8?(i=(this[t]&(1<<r)-1)<<8-r,i|=this[--t]>>(r+=this.DB-8)):(i=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),i&128&&(i|=-256),h==0&&(this.s&128)!=(i&128)&&++h,(h>0||i!=this.s)&&(e[h++]=i);return e}function je(t){return this.compareTo(t)==0}function Fe(t){return this.compareTo(t)<0?this:t}function Ve(t){return this.compareTo(t)>0?this:t}function Ue(t,e,r){var i,h,c=Math.min(t.t,this.t);for(i=0;i<c;++i)r[i]=e(this[i],t[i]);if(t.t<this.t){for(h=t.s&this.DM,i=c;i<this.t;++i)r[i]=e(this[i],h);r.t=this.t}else{for(h=this.s&this.DM,i=c;i<t.t;++i)r[i]=e(h,t[i]);r.t=t.t}r.s=e(this.s,t.s),r.clamp()}function Ge(t,e){return t&e}function qe(t){var e=l();return this.bitwiseTo(t,Ge,e),e}function pt(t,e){return t|e}function ze(t){var e=l();return this.bitwiseTo(t,pt,e),e}function At(t,e){return t^e}function Ze(t){var e=l();return this.bitwiseTo(t,At,e),e}function Mt(t,e){return t&~e}function He(t){var e=l();return this.bitwiseTo(t,Mt,e),e}function Xe(){for(var t=l(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function Ke(t){var e=l();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Ye(t){var e=l();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function Je(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function We(){for(var t=0;t<this.t;++t)if(this[t]!=0)return t*this.DB+Je(this[t]);return this.s<0?this.t*this.DB:-1}function Qe(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function ts(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=Qe(this[r]^e);return t}function es(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this[e]&1<<t%this.DB)!=0}function ss(t,e){var r=o.ONE.shiftLeft(t);return this.bitwiseTo(r,e,r),r}function rs(t){return this.changeBit(t,pt)}function is(t){return this.changeBit(t,Mt)}function ns(t){return this.changeBit(t,At)}function os(t,e){for(var r=0,i=0,h=Math.min(t.t,this.t);r<h;)i+=this[r]+t[r],e[r++]=i&this.DM,i>>=this.DB;if(t.t<this.t){for(i+=t.s;r<this.t;)i+=this[r],e[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<t.t;)i+=t[r],e[r++]=i&this.DM,i>>=this.DB;i+=t.s}e.s=i<0?-1:0,i>0?e[r++]=i:i<-1&&(e[r++]=this.DV+i),e.t=r,e.clamp()}function as(t){var e=l();return this.addTo(t,e),e}function fs(t){var e=l();return this.subTo(t,e),e}function us(t){var e=l();return this.multiplyTo(t,e),e}function hs(){var t=l();return this.squareTo(t),t}function cs(t){var e=l();return this.divRemTo(t,e,null),e}function ls(t){var e=l();return this.divRemTo(t,null,e),e}function ps(t){var e=l(),r=l();return this.divRemTo(t,e,r),new Array(e,r)}function ds(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function ms(t,e){if(t!=0){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function et(){}function Dt(t){return t}function gs(t,e,r){t.multiplyTo(e,r)}function vs(t,e){t.squareTo(e)}et.prototype.convert=Dt,et.prototype.revert=Dt,et.prototype.mulTo=gs,et.prototype.sqrTo=vs;function ys(t){return this.exp(t,new et)}function bs(t,e,r){var i=Math.min(this.t+t.t,e);for(r.s=0,r.t=i;i>0;)r[--i]=0;var h;for(h=r.t-this.t;i<h;++i)r[i+this.t]=this.am(0,t[i],r,i,0,this.t);for(h=Math.min(t.t,e);i<h;++i)this.am(0,t[i],r,i,0,e-i);r.clamp()}function ws(t,e,r){--e;var i=r.t=this.t+t.t-e;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(e-this.t,0);i<t.t;++i)r[this.t+i-e]=this.am(e-i,t[i],r,0,0,this.t+i-e);r.clamp(),r.drShiftTo(1,r)}function Y(t){this.r2=l(),this.q3=l(),o.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Ts(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=l();return t.copyTo(e),this.reduce(e),e}function Ss(t){return t}function Bs(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function Is(t,e){t.squareTo(e),this.reduce(e)}function Es(t,e,r){t.multiplyTo(e,r),this.reduce(r)}Y.prototype.convert=Ts,Y.prototype.revert=Ss,Y.prototype.reduce=Bs,Y.prototype.mulTo=Es,Y.prototype.sqrTo=Is;function As(t,e){var r=t.bitLength(),i,h=C(1),c;if(r<=0)return h;r<18?i=1:r<48?i=3:r<144?i=4:r<768?i=5:i=6,r<8?c=new X(e):e.isEven()?c=new Y(e):c=new K(e);var d=new Array,m=3,I=i-1,k=(1<<i)-1;if(d[1]=c.convert(this),i>1){var N=l();for(c.sqrTo(d[1],N);m<=k;)d[m]=l(),c.mulTo(N,d[m-2],d[m]),m+=2}var O=t.t-1,z,nt=!0,L=l(),j;for(r=rt(t[O])-1;O>=0;){for(r>=I?z=t[O]>>r-I&k:(z=(t[O]&(1<<r+1)-1)<<I-r,O>0&&(z|=t[O-1]>>this.DB+r-I)),m=i;!(z&1);)z>>=1,--m;if((r-=m)<0&&(r+=this.DB,--O),nt)d[z].copyTo(h),nt=!1;else{for(;m>1;)c.sqrTo(h,L),c.sqrTo(L,h),m-=2;m>0?c.sqrTo(h,L):(j=h,h=L,L=j),c.mulTo(L,d[z],h)}for(;O>=0&&!(t[O]&1<<r);)c.sqrTo(h,L),j=h,h=L,L=j,--r<0&&(r=this.DB-1,--O)}return c.revert(h)}function Ms(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var i=e;e=r,r=i}var h=e.getLowestSetBit(),c=r.getLowestSetBit();if(c<0)return e;for(h<c&&(c=h),c>0&&(e.rShiftTo(c,e),r.rShiftTo(c,r));e.signum()>0;)(h=e.getLowestSetBit())>0&&e.rShiftTo(h,e),(h=r.getLowestSetBit())>0&&r.rShiftTo(h,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return c>0&&r.lShiftTo(c,r),r}function Ds(t){if(t<=0)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(e==0)r=this[0]%t;else for(var i=this.t-1;i>=0;--i)r=(e*r+this[i])%t;return r}function Rs(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return o.ZERO;for(var r=t.clone(),i=this.clone(),h=C(1),c=C(0),d=C(0),m=C(1);r.signum()!=0;){for(;r.isEven();)r.rShiftTo(1,r),e?((!h.isEven()||!c.isEven())&&(h.addTo(this,h),c.subTo(t,c)),h.rShiftTo(1,h)):c.isEven()||c.subTo(t,c),c.rShiftTo(1,c);for(;i.isEven();)i.rShiftTo(1,i),e?((!d.isEven()||!m.isEven())&&(d.addTo(this,d),m.subTo(t,m)),d.rShiftTo(1,d)):m.isEven()||m.subTo(t,m),m.rShiftTo(1,m);r.compareTo(i)>=0?(r.subTo(i,r),e&&h.subTo(d,h),c.subTo(m,c)):(i.subTo(r,i),e&&d.subTo(h,d),m.subTo(c,m))}if(i.compareTo(o.ONE)!=0)return o.ZERO;if(m.compareTo(t)>=0)return m.subtract(t);if(m.signum()<0)m.addTo(t,m);else return m;return m.signum()<0?m.add(t):m}var _=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],ks=(1<<26)/_[_.length-1];function xs(t){var e,r=this.abs();if(r.t==1&&r[0]<=_[_.length-1]){for(e=0;e<_.length;++e)if(r[0]==_[e])return!0;return!1}if(r.isEven())return!1;for(e=1;e<_.length;){for(var i=_[e],h=e+1;h<_.length&&i<ks;)i*=_[h++];for(i=r.modInt(i);e<h;)if(i%_[e++]==0)return!1}return r.millerRabin(t)}function Cs(t){var e=this.subtract(o.ONE),r=e.getLowestSetBit();if(r<=0)return!1;var i=e.shiftRight(r);t=t+1>>1,t>_.length&&(t=_.length);for(var h=l(),c=0;c<t;++c){h.fromInt(_[Math.floor(Math.random()*_.length)]);var d=h.modPow(i,this);if(d.compareTo(o.ONE)!=0&&d.compareTo(e)!=0){for(var m=1;m++<r&&d.compareTo(e)!=0;)if(d=d.modPowInt(2,this),d.compareTo(o.ONE)==0)return!1;if(d.compareTo(e)!=0)return!1}}return!0}o.prototype.chunkSize=_e,o.prototype.toRadix=Oe,o.prototype.fromRadix=Ne,o.prototype.fromNumber=$e,o.prototype.bitwiseTo=Ue,o.prototype.changeBit=ss,o.prototype.addTo=os,o.prototype.dMultiply=ds,o.prototype.dAddOffset=ms,o.prototype.multiplyLowerTo=bs,o.prototype.multiplyUpperTo=ws,o.prototype.modInt=Ds,o.prototype.millerRabin=Cs,o.prototype.clone=Re,o.prototype.intValue=ke,o.prototype.byteValue=xe,o.prototype.shortValue=Ce,o.prototype.signum=Pe,o.prototype.toByteArray=Le,o.prototype.equals=je,o.prototype.min=Fe,o.prototype.max=Ve,o.prototype.and=qe,o.prototype.or=ze,o.prototype.xor=Ze,o.prototype.andNot=He,o.prototype.not=Xe,o.prototype.shiftLeft=Ke,o.prototype.shiftRight=Ye,o.prototype.getLowestSetBit=We,o.prototype.bitCount=ts,o.prototype.testBit=es,o.prototype.setBit=rs,o.prototype.clearBit=is,o.prototype.flipBit=ns,o.prototype.add=as,o.prototype.subtract=fs,o.prototype.multiply=us,o.prototype.divide=cs,o.prototype.remainder=ls,o.prototype.divideAndRemainder=ps,o.prototype.modPow=As,o.prototype.modInverse=Rs,o.prototype.pow=ys,o.prototype.gcd=Ms,o.prototype.isProbablePrime=xs,o.prototype.square=hs,o.prototype.Barrett=Y;var it,P,R;function _s(t){P[R++]^=t&255,P[R++]^=t>>8&255,P[R++]^=t>>16&255,P[R++]^=t>>24&255,R>=mt&&(R-=mt)}function Rt(){_s(new Date().getTime())}if(P==null){P=new Array,R=0;var $;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var kt=new Uint8Array(32);for(window.crypto.getRandomValues(kt),$=0;$<32;++$)P[R++]=kt[$]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var xt=window.crypto.random(32);for($=0;$<xt.length;++$)P[R++]=xt.charCodeAt($)&255}}for(;R<mt;)$=Math.floor(65536*Math.random()),P[R++]=$>>>8,P[R++]=$&255;R=0,Rt()}function Ps(){if(it==null){for(Rt(),it=Ls(),it.init(P),R=0;R<P.length;++R)P[R]=0;R=0}return it.next()}function Os(t){var e;for(e=0;e<t.length;++e)t[e]=Ps()}function Ct(){}Ct.prototype.nextBytes=Os;function dt(){this.i=0,this.j=0,this.S=new Array}function Ns(t){var e,r,i;for(e=0;e<256;++e)this.S[e]=e;for(r=0,e=0;e<256;++e)r=r+this.S[e]+t[e%t.length]&255,i=this.S[e],this.S[e]=this.S[r],this.S[r]=i;this.i=0,this.j=0}function $s(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}dt.prototype.init=Ns,dt.prototype.next=$s;function Ls(){return new dt}var mt=256;a.exports={default:o,BigInteger:o,SecureRandom:Ct}}).call(Hs)})(rr);var T={};(function(a){(function(){var s={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function n(v){return u(l(v),arguments)}function f(v,b){return n.apply(null,[v].concat(b||[]))}function u(v,b){var y=1,B=v.length,p,M="",S,w,g,G,A,q,tt,C;for(S=0;S<B;S++)if(typeof v[S]=="string")M+=v[S];else if(typeof v[S]=="object"){if(g=v[S],g.keys)for(p=b[y],w=0;w<g.keys.length;w++){if(p==null)throw new Error(n('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[w],g.keys[w-1]));p=p[g.keys[w]]}else g.param_no?p=b[g.param_no]:p=b[y++];if(s.not_type.test(g.type)&&s.not_primitive.test(g.type)&&p instanceof Function&&(p=p()),s.numeric_arg.test(g.type)&&typeof p!="number"&&isNaN(p))throw new TypeError(n("[sprintf] expecting number but found %T",p));switch(s.number.test(g.type)&&(tt=p>=0),g.type){case"b":p=parseInt(p,10).toString(2);break;case"c":p=String.fromCharCode(parseInt(p,10));break;case"d":case"i":p=parseInt(p,10);break;case"j":p=JSON.stringify(p,null,g.width?parseInt(g.width):0);break;case"e":p=g.precision?parseFloat(p).toExponential(g.precision):parseFloat(p).toExponential();break;case"f":p=g.precision?parseFloat(p).toFixed(g.precision):parseFloat(p);break;case"g":p=g.precision?String(Number(p.toPrecision(g.precision))):parseFloat(p);break;case"o":p=(parseInt(p,10)>>>0).toString(8);break;case"s":p=String(p),p=g.precision?p.substring(0,g.precision):p;break;case"t":p=String(!!p),p=g.precision?p.substring(0,g.precision):p;break;case"T":p=Object.prototype.toString.call(p).slice(8,-1).toLowerCase(),p=g.precision?p.substring(0,g.precision):p;break;case"u":p=parseInt(p,10)>>>0;break;case"v":p=p.valueOf(),p=g.precision?p.substring(0,g.precision):p;break;case"x":p=(parseInt(p,10)>>>0).toString(16);break;case"X":p=(parseInt(p,10)>>>0).toString(16).toUpperCase();break}s.json.test(g.type)?M+=p:(s.number.test(g.type)&&(!tt||g.sign)?(C=tt?"+":"-",p=p.toString().replace(s.sign,"")):C="",A=g.pad_char?g.pad_char==="0"?"0":g.pad_char.charAt(1):" ",q=g.width-(C+p).length,G=g.width&&q>0?A.repeat(q):"",M+=g.align?C+p+G:A==="0"?C+G+p:G+C+p)}return M}var o=Object.create(null);function l(v){if(o[v])return o[v];for(var b=v,y,B=[],p=0;b;){if((y=s.text.exec(b))!==null)B.push(y[0]);else if((y=s.modulo.exec(b))!==null)B.push("%");else if((y=s.placeholder.exec(b))!==null){if(y[2]){p|=1;var M=[],S=y[2],w=[];if((w=s.key.exec(S))!==null)for(M.push(w[1]);(S=S.substring(w[0].length))!=="";)if((w=s.key_access.exec(S))!==null)M.push(w[1]);else if((w=s.index_access.exec(S))!==null)M.push(w[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");y[2]=M}else p|=2;if(p===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");B.push({placeholder:y[0],param_no:y[1],keys:y[2],sign:y[3],pad_char:y[4],align:y[5],width:y[6],precision:y[7],type:y[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");b=b.substring(y[0].length)}return o[v]=B}a.sprintf=n,a.vsprintf=f,typeof window<"u"&&(window.sprintf=n,window.vsprintf=f)})()})(T);class D{constructor(s){this.groups=Ot,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=Yt(Q),this.isInSubnet=Kt,this.address=s;const n=Nt.exec(s);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>Q)throw new U("Invalid subnet mask.");s=s.replace(Nt,"")}this.addressMinusSuffix=s,this.parsedAddress=this.parse(s)}static isValid(s){try{return new D(s),!0}catch{return!1}}parse(s){const n=s.split(".");if(!s.match(ht))throw new U("Invalid IPv4 address.");return n}correctForm(){return this.parsedAddress.map(s=>parseInt(s,10)).join(".")}static fromHex(s){const n=s.replace(/:/g,"").padStart(8,"0"),f=[];let u;for(u=0;u<8;u+=2){const o=n.slice(u,u+2);f.push(parseInt(o,16))}return new D(f.join("."))}static fromInteger(s){return D.fromHex(s.toString(16))}static fromArpa(s){const f=s.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new D(f)}toHex(){return this.parsedAddress.map(s=>T.sprintf("%02x",parseInt(s,10))).join(":")}toArray(){return this.parsedAddress.map(s=>parseInt(s,10))}toGroup6(){const s=[];let n;for(n=0;n<Ot;n+=2){const f=T.sprintf("%02x%02x",parseInt(this.parsedAddress[n],10),parseInt(this.parsedAddress[n+1],10));s.push(T.sprintf("%x",parseInt(f,16)))}return s.join(":")}bigInteger(){return new E.BigInteger(this.parsedAddress.map(s=>T.sprintf("%02x",parseInt(s,10))).join(""),16)}_startAddress(){return new E.BigInteger(this.mask()+"0".repeat(Q-this.subnetMask),2)}startAddress(){return D.fromBigInteger(this._startAddress())}startAddressExclusive(){const s=new E.BigInteger("1");return D.fromBigInteger(this._startAddress().add(s))}_endAddress(){return new E.BigInteger(this.mask()+"1".repeat(Q-this.subnetMask),2)}endAddress(){return D.fromBigInteger(this._endAddress())}endAddressExclusive(){const s=new E.BigInteger("1");return D.fromBigInteger(this._endAddress().subtract(s))}static fromBigInteger(s){return D.fromInteger(parseInt(s.toString(),10))}mask(s){return s===void 0&&(s=this.subnetMask),this.getBitsBase2(0,s)}getBitsBase2(s,n){return this.binaryZeroPad().slice(s,n)}reverseForm(s){s||(s={});const n=this.correctForm().split(".").reverse().join(".");return s.omitSuffix?n:T.sprintf("%s.in-addr.arpa.",n)}isMulticast(){return this.isInSubnet(new D("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(Q,"0")}groupForV6(){const s=this.parsedAddress;return this.address.replace(ht,T.sprintf('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',s.slice(0,2).join("."),s.slice(2,4).join(".")))}}const Z=128,st=8,ir={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},$t={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},Lt=/([^0-9a-f:/%])/gi,jt=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,Ft=/\/\d{1,3}(?=%|$)/,Vt=/%.*$/,nr=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),or=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/);function ar(a){return a.replace(/^(0+)/,'<span class="zero">$1</span>')}function vt(a,s=0){return a.split(":").map((f,u)=>/group-v4/.test(f)?f:T.sprintf('<span class="hover-group group-%d">%s</span>',u+s,ar(f)))}function It(a){return T.sprintf("(%s)",a.join("|"))}function yt(a){return a.length<4?T.sprintf("0{0,%d}%s",4-a.length,a):a}const Ut="[^A-Fa-f0-9:]";function bt(a){const s=[];a.forEach((f,u)=>{parseInt(f,16)===0&&s.push(u)});const n=s.map(f=>a.map((u,o)=>{if(o===f){const l=o===0||o===st-1?":":"";return It([yt(u),l])}return yt(u)}).join(":"));return n.push(a.map(yt).join(":")),It(n)}function Gt(a,s,n){const f=s?"":":",u=n?"":":",o=[];!s&&!n&&o.push("::"),s&&n&&o.push(""),(n&&!s||!n&&s)&&o.push(":"),o.push(T.sprintf("%s(:0{1,4}){1,%d}",f,a-1)),o.push(T.sprintf("(0{1,4}:){1,%d}%s",a-1,u)),o.push(T.sprintf("(0{1,4}:){%d}0{1,4}",a-1));for(let l=1;l<a-1;l++)for(let v=1;v<a-l;v++)o.push(T.sprintf("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",v,a-v-l-1));return It(o)}function ft(a){if(!a)throw new Error("Assertion failed.")}function fr(a){const s=/(\d+)(\d{3})/;for(;s.test(a);)a=a.replace(s,"$1,$2");return a}function ur(a){return a=a.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),a=a.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),a}function hr(a,s){const n=[],f=[];let u;for(u=0;u<a.length;u++)u<s[0]?n.push(a[u]):u>s[1]&&f.push(a[u]);return n.concat(["compact"]).concat(f)}function qt(a){return T.sprintf("%04x",parseInt(a,16))}function zt(a){return a&255}class x{constructor(s,n){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=Kt,this.isCorrect=Yt(Z),n===void 0?this.groups=st:this.groups=n,this.address=s;const f=Ft.exec(s);if(f){if(this.parsedSubnet=f[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>Z)throw new U("Invalid subnet mask.");s=s.replace(Ft,"")}else if(/\//.test(s))throw new U("Invalid subnet mask.");const u=Vt.exec(s);u&&(this.zone=u[0],s=s.replace(Vt,"")),this.addressMinusSuffix=s,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(s){try{return new x(s),!0}catch{return!1}}static fromBigInteger(s){const n=s.toString(16).padStart(32,"0"),f=[];let u;for(u=0;u<st;u++)f.push(n.slice(u*4,(u+1)*4));return new x(f.join(":"))}static fromURL(s){let n,f=null,u;if(s.indexOf("[")!==-1&&s.indexOf("]:")!==-1){if(u=or.exec(s),u===null)return{error:"failed to parse address with port",address:null,port:null};n=u[1],f=u[2]}else if(s.indexOf("/")!==-1){if(s=s.replace(/^[a-z0-9]+:\/\//,""),u=nr.exec(s),u===null)return{error:"failed to parse address from URL",address:null,port:null};n=u[1]}else n=s;return f?(f=parseInt(f,10),(f<0||f>65536)&&(f=null)):f=null,{address:new x(n),port:f}}static fromAddress4(s){const n=new D(s),f=Z-(Q-n.subnetMask);return new x(`::ffff:${n.correctForm()}/${f}`)}static fromArpa(s){let n=s.replace(/(\.ip6\.arpa)?\.$/,"");const f=7;if(n.length!==63)throw new U("Invalid 'ip6.arpa' form.");const u=n.split(".").reverse();for(let o=f;o>0;o--){const l=o*4;u.splice(l,0,":")}return n=u.join(""),new x(n)}microsoftTranscription(){return T.sprintf("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(s=this.subnetMask){return this.getBitsBase2(0,s)}possibleSubnets(s=128){const n=Z-this.subnetMask,f=Math.abs(s-Z),u=n-f;return u<0?"0":fr(new E.BigInteger("2",10).pow(u).toString(10))}_startAddress(){return new E.BigInteger(this.mask()+"0".repeat(Z-this.subnetMask),2)}startAddress(){return x.fromBigInteger(this._startAddress())}startAddressExclusive(){const s=new E.BigInteger("1");return x.fromBigInteger(this._startAddress().add(s))}_endAddress(){return new E.BigInteger(this.mask()+"1".repeat(Z-this.subnetMask),2)}endAddress(){return x.fromBigInteger(this._endAddress())}endAddressExclusive(){const s=new E.BigInteger("1");return x.fromBigInteger(this._endAddress().subtract(s))}getScope(){let s=ir[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&s!=="Link local"&&(s="Global"),s||"Unknown"}getType(){for(const s of Object.keys($t))if(this.isInSubnet(new x(s)))return $t[s];return"Global unicast"}getBits(s,n){return new E.BigInteger(this.getBitsBase2(s,n),2)}getBitsBase2(s,n){return this.binaryZeroPad().slice(s,n)}getBitsBase16(s,n){const f=n-s;if(f%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(s,n).toString(16).padStart(f/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,Z)}reverseForm(s){s||(s={});const n=Math.floor(this.subnetMask/4),f=this.canonicalForm().replace(/:/g,"").split("").slice(0,n).reverse().join(".");return n>0?s.omitSuffix?f:T.sprintf("%s.ip6.arpa.",f):s.omitSuffix?"":"ip6.arpa."}correctForm(){let s,n=[],f=0;const u=[];for(s=0;s<this.parsedAddress.length;s++){const v=parseInt(this.parsedAddress[s],16);v===0&&f++,v!==0&&f>0&&(f>1&&u.push([s-f,s-1]),f=0)}f>1&&u.push([this.parsedAddress.length-f,this.parsedAddress.length-1]);const o=u.map(v=>v[1]-v[0]+1);if(u.length>0){const v=o.indexOf(Math.max(...o));n=hr(this.parsedAddress,u[v])}else n=this.parsedAddress;for(s=0;s<n.length;s++)n[s]!=="compact"&&(n[s]=parseInt(n[s],16).toString(16));let l=n.join(":");return l=l.replace(/^compact$/,"::"),l=l.replace(/^compact|compact$/,":"),l=l.replace(/compact/,""),l}binaryZeroPad(){return this.bigInteger().toString(2).padStart(Z,"0")}parse4in6(s){const n=s.split(":"),u=n.slice(-1)[0].match(ht);if(u){this.parsedAddress4=u[0],this.address4=new D(this.parsedAddress4);for(let o=0;o<this.address4.groups;o++)if(/^0[0-9]+/.test(this.address4.parsedAddress[o]))throw new U("IPv4 addresses can't have leading zeroes.",s.replace(ht,this.address4.parsedAddress.map(ur).join(".")));this.v4=!0,n[n.length-1]=this.address4.toGroup6(),s=n.join(":")}return s}parse(s){s=this.parse4in6(s);const n=s.match(Lt);if(n)throw new U(T.sprintf("Bad character%s detected in address: %s",n.length>1?"s":"",n.join("")),s.replace(Lt,'<span class="parse-error">$1</span>'));const f=s.match(jt);if(f)throw new U(T.sprintf("Address failed regex: %s",f.join("")),s.replace(jt,'<span class="parse-error">$1</span>'));let u=[];const o=s.split("::");if(o.length===2){let l=o[0].split(":"),v=o[1].split(":");l.length===1&&l[0]===""&&(l=[]),v.length===1&&v[0]===""&&(v=[]);const b=this.groups-(l.length+v.length);if(!b)throw new U("Error parsing groups");this.elidedGroups=b,this.elisionBegin=l.length,this.elisionEnd=l.length+this.elidedGroups,u=u.concat(l);for(let y=0;y<b;y++)u.push("0");u=u.concat(v)}else if(o.length===1)u=s.split(":"),this.elidedGroups=0;else throw new U("Too many :: groups found");if(u=u.map(l=>T.sprintf("%x",parseInt(l,16))),u.length!==this.groups)throw new U("Incorrect number of groups found");return u}canonicalForm(){return this.parsedAddress.map(qt).join(":")}decimal(){return this.parsedAddress.map(s=>T.sprintf("%05d",parseInt(s,16))).join(":")}bigInteger(){return new E.BigInteger(this.parsedAddress.map(qt).join(""),16)}to4(){const s=this.binaryZeroPad().split("");return D.fromHex(new E.BigInteger(s.slice(96,128).join(""),2).toString(16))}to4in6(){const s=this.to4(),f=new x(this.parsedAddress.slice(0,6).join(":"),6).correctForm();let u="";return/:$/.test(f)||(u=":"),f+u+s.address}inspectTeredo(){const s=this.getBitsBase16(0,32),n=this.getBits(80,96).xor(new E.BigInteger("ffff",16)).toString(),f=D.fromHex(this.getBitsBase16(32,64)),u=D.fromHex(this.getBits(96,128).xor(new E.BigInteger("ffffffff",16)).toString(16)),o=this.getBits(64,80),l=this.getBitsBase2(64,80),v=o.testBit(15),b=o.testBit(14),y=o.testBit(8),B=o.testBit(9),p=new E.BigInteger(l.slice(2,6)+l.slice(8,16),2).toString(10);return{prefix:T.sprintf("%s:%s",s.slice(0,4),s.slice(4,8)),server4:f.address,client4:u.address,flags:l,coneNat:v,microsoft:{reserved:b,universalLocal:B,groupIndividual:y,nonce:p},udpPort:n}}inspect6to4(){const s=this.getBitsBase16(0,16),n=D.fromHex(this.getBitsBase16(16,48));return{prefix:T.sprintf("%s",s.slice(0,4)),gateway:n.address}}to6to4(){if(!this.is4())return null;const s=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new x(s)}toByteArray(){const s=this.bigInteger().toByteArray();return s.length===17&&s[0]===0?s.slice(1):s}toUnsignedByteArray(){return this.toByteArray().map(zt)}static fromByteArray(s){return this.fromUnsignedByteArray(s.map(zt))}static fromUnsignedByteArray(s){const n=new E.BigInteger("256",10);let f=new E.BigInteger("0",10),u=new E.BigInteger("1",10);for(let o=s.length-1;o>=0;o--)f=f.add(u.multiply(new E.BigInteger(s[o].toString(10),10))),u=u.multiply(n);return x.fromBigInteger(f)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new x("2001::/32"))}is6to4(){return this.isInSubnet(new x("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(s){return s===void 0?s="":s=T.sprintf(":%s",s),T.sprintf("http://[%s]%s/",this.correctForm(),s)}link(s){s||(s={}),s.className===void 0&&(s.className=""),s.prefix===void 0&&(s.prefix="/#address="),s.v4===void 0&&(s.v4=!1);let n=this.correctForm;return s.v4&&(n=this.to4in6),s.className?T.sprintf('<a href="%1$s%2$s" class="%3$s">%2$s</a>',s.prefix,n.call(this),s.className):T.sprintf('<a href="%1$s%2$s">%2$s</a>',s.prefix,n.call(this))}group(){if(this.elidedGroups===0)return vt(this.address).join(":");ft(typeof this.elidedGroups=="number"),ft(typeof this.elisionBegin=="number");const s=[],[n,f]=this.address.split("::");n.length?s.push(...vt(n)):s.push("");const u=["hover-group"];for(let o=this.elisionBegin;o<this.elisionBegin+this.elidedGroups;o++)u.push(T.sprintf("group-%d",o));return s.push(T.sprintf('<span class="%s"></span>',u.join(" "))),f.length?s.push(...vt(f,this.elisionEnd)):s.push(""),this.is4()&&(ft(this.address4 instanceof D),s.pop(),s.push(this.address4.groupForV6())),s.join(":")}regularExpressionString(s=!1){let n=[];const f=new x(this.correctForm());if(f.elidedGroups===0)n.push(bt(f.parsedAddress));else if(f.elidedGroups===st)n.push(Gt(st));else{const u=f.address.split("::");u[0].length&&n.push(bt(u[0].split(":"))),ft(typeof f.elidedGroups=="number"),n.push(Gt(f.elidedGroups,u[0].length!==0,u[1].length!==0)),u[1].length&&n.push(bt(u[1].split(":"))),n=[n.join(":")]}return s||(n=["(?=^|",Ut,"|[^\\w\\:])(",...n,")(?=[^\\w\\:]|",Ut,"|$)"]),n.join("")}regularExpression(s=!1){return new RegExp(this.regularExpressionString(s),"i")}}const cr=ct("libp2p:ip-port-to-multiaddr"),wt={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function lr(a,s){if(typeof a!="string")throw W(new Error(`invalid ip provided: ${a}`),wt.ERR_INVALID_IP_PARAMETER);if(typeof s=="string"&&(s=parseInt(s)),isNaN(s))throw W(new Error(`invalid port provided: ${s}`),wt.ERR_INVALID_PORT_PARAMETER);try{return new D(a),ut(`/ip4/${a}/tcp/${s}`)}catch{}try{const n=new x(a);return n.is4()?ut(`/ip4/${n.to4().correctForm()}/tcp/${s}`):ut(`/ip6/${a}/tcp/${s}`)}catch{const f=`invalid ip:port for creating a multiaddr: ${a}:${s}`;throw cr.error(f),W(new Error(f),wt.ERR_INVALID_IP)}}const Jt=421,pr=290,dr=400,mr=2e3,gr=3e4,vr={ip4:"IPv4",ip6:"IPv6"};function Et(a){const s=a.getPath();return s!=null?lt.platform()==="win32"?{path:Xs.join("\\\\.\\pipe\\",s)}:{path:s}:a.toOptions()}function Zt(a,s,n){const f=u=>ut(`/${a}/${u}/tcp/${n}`);return(yr(s)?wr(vr[a]):[s]).map(f)}function yr(a){return["0.0.0.0","::"].includes(a)}const br=lt.networkInterfaces();function wr(a){const s=[];for(const[,n]of Object.entries(br))if(n!=null)for(const f of n)f.family===a&&s.push(f.address);return s}const F=ct("libp2p:tcp:socket"),Wt=(a,s)=>{s=s??{};const n=s.socketInactivityTimeout??gr,f=s.socketCloseTimeout??mr;s.listeningAddr?.getPath()!=null&&(s.remoteAddr=s.listeningAddr),s.remoteAddr?.getPath()!=null&&(s.localAddr=s.remoteAddr);let u;if(s.remoteAddr!=null)u=s.remoteAddr;else{if(a.remoteAddress==null||a.remotePort==null)throw W(new Error("Could not determine remote address or port"),"ERR_NO_REMOTE_ADDRESS");u=lr(a.remoteAddress,a.remotePort)}const o=Et(u),l=o.path??`${o.host??""}:${o.port??""}`,{sink:v,source:b}=sr.duplex(a);a.setTimeout(n,()=>{F("%s socket read timeout",l);let B;a.readable&&(B=W(new Error("Socket read timeout"),"ERR_SOCKET_READ_TIMEOUT")),a.destroy(B)}),a.once("close",()=>{F("%s socket read timeout",l),y.timeline.close==null&&(y.timeline.close=Date.now())}),a.once("end",()=>{F("socket ended",y.remoteAddr.toString())});const y={async sink(B){s?.signal!=null&&(B=_t(B,s.signal));try{await v(B)}catch(p){p.type!=="aborted"&&F(p)}a.end()},source:s.signal!=null?_t(b,s.signal):b,remoteAddr:u,timeline:{open:Date.now()},async close(){if(a.destroyed){F("%s socket was already destroyed when trying to close",l);return}F("%s closing socket",l),await new Promise((B,p)=>{const M=Date.now(),S=setTimeout(()=>{a.destroyed?(F("%s is already destroyed",l),B()):(F("%s socket close timeout after %dms, destroying it manually",l,Date.now()-M),a.destroy(W(new Error("Socket close timeout"),"ERR_SOCKET_CLOSE_TIMEOUT")))},f).unref();a.once("close",()=>{F("%s socket closed",l),clearTimeout(S),B()}),a.once("error",w=>{F("%s socket error",l,w),y.timeline.close==null&&(y.timeline.close=Date.now()),a.destroyed&&clearTimeout(S),p(w)}),a.setTimeout(f),a.end(),a.writableLength>0?a.once("drain",()=>{F("%s socket drained",l),a.destroy()}):a.destroy()})}};return y},V=ct("libp2p:tcp:listener");async function Tt(a){try{await a.close()}catch(s){V.error("an error occurred closing the connection",s)}}class Tr extends js{constructor(s){super(),this.context=s,this.connections=new Set,this.status={started:!1},s.keepAlive=s.keepAlive??!0,this.server=lt.createServer(s,this.onSocket.bind(this)),s.maxConnections!==void 0&&(this.server.maxConnections=s.maxConnections),this.server.on("listening",()=>this.dispatchEvent(new at("listening"))).on("error",n=>this.dispatchEvent(new at("error",{detail:n}))).on("close",()=>this.dispatchEvent(new at("close")))}onSocket(s){s.on("error",f=>{V("socket error",f)});let n;try{n=Wt(s,{listeningAddr:this.status.started?this.status.listeningAddr:void 0,socketInactivityTimeout:this.context.socketInactivityTimeout,socketCloseTimeout:this.context.socketCloseTimeout})}catch(f){V.error("inbound connection failed",f);return}V("new inbound connection %s",n.remoteAddr);try{this.context.upgrader.upgradeInbound(n).then(f=>{V("inbound connection %s upgraded",n.remoteAddr),this.connections.add(n),s.once("close",()=>{this.connections.delete(n)}),this.context.handler!=null&&this.context.handler(f),this.dispatchEvent(new at("connection",{detail:f}))}).catch(async f=>{V.error("inbound connection failed",f),await Tt(n)}).catch(f=>{V.error("closing inbound connection failed",f)})}catch(f){V.error("inbound connection failed",f),Tt(n).catch(u=>{V.error("closing inbound connection failed",u)})}}getAddrs(){if(!this.status.started)return[];let s=[];const n=this.server.address(),{listeningAddr:f,peerId:u}=this.status;if(n==null)return[];if(typeof n=="string")s=[f];else try{f.toString().startsWith("/ip4")?s=s.concat(Zt("ip4",n.address,n.port)):n.family==="IPv6"&&(s=s.concat(Zt("ip6",n.address,n.port)))}catch(o){V.error("could not turn %s:%s into multiaddr",n.address,n.port,o)}return s.map(o=>u!=null?o.encapsulate(`/p2p/${u}`):o)}async listen(s){const n=s.getPeerId(),f=n==null?s.decapsulateCode(Jt):s;return this.status={started:!0,listeningAddr:f,peerId:n},await new Promise((u,o)=>{const l=Et(f);this.server.on("error",v=>{o(v)}),this.server.listen(l,()=>{V("Listening on %s",this.server.address()),u()})})}async close(){this.server.listening&&(await Promise.all(Array.from(this.connections.values()).map(async s=>await Tt(s))),await new Promise((s,n)=>{this.server.close(f=>f!=null?n(f):s())}))}}const J=ct("libp2p:tcp");class Sr{constructor(s={}){this.opts=s}get[Fs](){return!0}get[Symbol.toStringTag](){return"@libp2p/tcp"}async dial(s,n){n.keepAlive=n.keepAlive??!0;const f=await this._connect(s,n);f.on("error",l=>{J("socket error",l)});const u=Wt(f,{remoteAddr:s,signal:n.signal,socketInactivityTimeout:this.opts.outboundSocketInactivityTimeout,socketCloseTimeout:this.opts.socketCloseTimeout});J("new outbound connection %s",u.remoteAddr);const o=await n.upgrader.upgradeOutbound(u);return J("outbound connection %s upgraded",u.remoteAddr),o}async _connect(s,n){if(n.signal?.aborted===!0)throw new Pt;return await new Promise((f,u)=>{const o=Date.now(),l=Et(s),v=l.path??`${l.host??""}:${l.port}`;J("dialing %j",l);const b=lt.connect(l),y=w=>{w.message=`connection error ${v}: ${w.message}`,S(w)},B=()=>{J("connection timeout %s",v);const w=W(new Error(`connection timeout after ${Date.now()-o}ms`),"ERR_CONNECT_TIMEOUT");b.emit("error",w)},p=()=>{J("connection opened %j",l),S()},M=()=>{J("connection aborted %j",l),b.destroy(),S(new Pt)},S=w=>{if(b.removeListener("error",y),b.removeListener("timeout",B),b.removeListener("connect",p),n.signal!=null&&n.signal.removeEventListener("abort",M),w!=null)return u(w);f(b)};b.on("error",y),b.on("timeout",B),b.on("connect",p),n.signal!=null&&n.signal.addEventListener("abort",M)})}createListener(s){return new Tr({...s,maxConnections:this.opts.maxConnections,socketInactivityTimeout:this.opts.inboundSocketInactivityTimeout,socketCloseTimeout:this.opts.socketCloseTimeout})}filter(s){return s=Array.isArray(s)?s:[s],s.filter(n=>n.protoCodes().includes(pr)?!1:n.protoCodes().includes(dr)?!0:Vs.matches(n.decapsulateCode(Jt)))}}function Br(a={}){return()=>new Sr(a)}const Rr=async()=>({transport:[Br,Us,Gs,qs],connectionEncryption:[zs]});export{Rr as default};
//# sourceMappingURL=configNode-e7832ef6.js.map
