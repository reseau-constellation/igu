import{d as z,E as L,D as W,dy as G,r,s as x,a as H,c as J,w as a,B as F,H as K,I as Q,b as e,h as X,V as Y,x as b,t as l,f as s,ar as Z,e as v,l as ee,af as te,ag as f,dz as D,dA as ae,bG as se,i as g,ah as oe,aj as ne,ak as ue,z as N,A as B,J as ie,m as re,M as le,க as ce}from"./index-CmPTsS4g.js";const de={class:"text-center"},me={class:"text-h6 font-weight-light mb-2"},pe=z({__name:"NouveauProjet",emits:["nouveau"],setup(ve,{emit:P}){const k=P,d=L(),{மொழியாக்கம்_பயன்படுத்து:y}=ce(),{$மொ:o}=y(),{mdAndUp:T}=W(),I=G(),V=r(!1),u=r(0),c=["noms","descriptions","motsClefs","ajouterBds","confirmation"],S=x(()=>{switch(c[u.value]){case"noms":return"projet.nouveau.titreNoms";case"descriptions":return"projet.nouveau.titreDescriptions";case"motsClefs":return"projet.nouveau.titreMotsClefs";case"ajouterBds":return"projet.nouveau.titreAjouterBds";case"confirmation":return"projet.nouveau.titreConfirmation";default:return""}}),q=x(()=>{switch(c[u.value]){case"noms":return"projet.nouveau.sousTitreNoms";case"descriptions":return"projet.nouveau.sousTitreDescriptions";case"motsClefs":return"projet.nouveau.sousTitreMotsClefs";case"ajouterBds":return"projet.nouveau.sousTitreAjouterBds";case"confirmation":return"projet.nouveau.sousTitreConfirmation";default:return""}}),U=()=>{switch(c[u.value]){default:u.value++;break}},$=()=>{switch(c[u.value]){default:u.value--;break}},A=x(()=>{switch(c[u.value]){case"noms":return{actif:Object.keys(m.value).length>0,visible:!0};case"confirmation":return{actif:!1,visible:!1};default:return{actif:!0,visible:!0}}}),h=x(()=>{switch(c[u.value]){case"noms":return{actif:!1,visible:!1};case"confirmation":return{actif:!C.value,visible:!0};default:return{actif:!0,visible:!0}}}),m=r({}),M=t=>{m.value=t},p=r({}),O=t=>{p.value=t},j=r([]),_=r([]),w=r(!1),C=r(!1),E=async()=>{C.value=!0;const t=await d.projets.créerProjet();if(!t)throw new Error("Projet non créé.");await d.projets.sauvegarderNomsProjet({idProjet:t,noms:Object.fromEntries(Object.entries(m.value))}),await d.projets.sauvegarderDescriptionsProjet({idProjet:t,descriptions:Object.fromEntries(Object.entries(p.value))}),await d.projets.ajouterMotsClefsProjet({idProjet:t,idsMotsClefs:j.value}),await Promise.all(_.value.map(async n=>await d.projets.ajouterBdProjet({idProjet:t,idBd:n}))),k("nouveau",t),R(),w.value&&I.push(encodeURI(`/données/projet/${encodeURIComponent(t)}`))},R=()=>{m.value={},p.value={},j.value=[],_.value=[],u.value=0,C.value=!1,V.value=!1};return(t,n)=>(H(),J(le,{modelValue:V.value,"onUpdate:modelValue":n[5]||(n[5]=i=>V.value=i)},{activator:a(({props:i})=>[F(t.$slots,"activator",K(Q({props:i})))]),default:a(()=>[e(re,{class:"mx-auto","min-width":s(T)?750:300},{default:a(()=>[e(X,null,{default:a(()=>[e(Y,{class:"text-h5 justify-space-between"},{default:a(()=>[b("span",null,l(s(o)(S.value)),1)]),_:1}),e(Z,null,{default:a(()=>[v(l(s(o)(q.value)),1)]),_:1})]),_:1}),e(ee,null,{default:a(()=>[e(te,{modelValue:u.value,"onUpdate:modelValue":n[4]||(n[4]=i=>u.value=i),style:{"overflow-y":"scroll"}},{default:a(()=>[e(f,{value:0},{default:a(()=>[e(D,{"texte-aucun-nom":s(o)("communs.texteAucunNom"),"indice-langue":s(o)("communs.indiceLangue"),"etiquette-nom":s(o)("communs.étiquetteNom"),"indice-nom":s(o)("projets.nouveau.texteIndiceNom"),"noms-initiaux":m.value,"autorisation-modification":!0,onAjusterNoms:M},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1}),e(f,{value:1},{default:a(()=>[e(D,{"texte-aucun-nom":s(o)("projets.nouveau.texteAucuneDescription"),"indice-langue":s(o)("communs.indiceLangue"),"etiquette-nom":s(o)("projets.nouveau.texteÉtiquetteDescription"),"indice-nom":s(o)("projets.nouveau.texteIndiceDescription"),"noms-initiaux":p.value,"autorisation-modification":!0,onAjusterNoms:O},null,8,["texte-aucun-nom","indice-langue","etiquette-nom","indice-nom","noms-initiaux"])]),_:1}),e(f,{value:2},{default:a(()=>[e(ae,{multiples:"",originaux:j.value,onSelectionnee:n[0]||(n[0]=i=>j.value=i)},null,8,["originaux"])]),_:1}),e(f,{value:3},{default:a(()=>[e(se,{multiples:!1,originales:_.value,onSelectionnee:n[1]||(n[1]=i=>_.value=i)},null,8,["originales"])]),_:1}),e(f,{value:4},{default:a(()=>[b("div",de,[b("h3",me,l(s(o)("projets.nouveau.texteCréer")),1),b("p",null,[e(g,{class:"mt-3",variant:"outlined",loading:C.value,onClick:n[2]||(n[2]=()=>E())},{default:a(()=>[v(l(s(o)("projets.nouveau.texteBtnCréation")),1)]),_:1},8,["loading"])]),e(oe,{modelValue:w.value,"onUpdate:modelValue":n[3]||(n[3]=i=>w.value=i)},{default:a(()=>[v(l(s(o)("projets.nouveau.ouvrirAprèsCréation")),1)]),_:1},8,["modelValue"])])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(ne),e(ue,null,{default:a(()=>[N(e(g,{variant:"text",disabled:!h.value.actif,onClick:$},{default:a(()=>[v(l(s(o)("communs.retour")),1)]),_:1},8,["disabled"]),[[B,h.value.visible]]),e(ie),N(e(g,{color:"primary",variant:"flat",disabled:!A.value.actif,onClick:U},{default:a(()=>[v(l(s(o)("communs.suivant")),1)]),_:1},8,["disabled"]),[[B,A.value.visible]])]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}});export{pe as _};
//# sourceMappingURL=NouveauProjet.vue_vue_type_script_setup_true_lang-C35yXa07.js.map
