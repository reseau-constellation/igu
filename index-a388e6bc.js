var ir=Object.defineProperty;var ar=(t,e,n)=>e in t?ir(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ut=(t,e,n)=>(ar(t,typeof e!="symbol"?e+"":e,n),n),Zt=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var Qt=(t,e,n)=>(Zt(t,e,"read from private field"),n?n.call(t):e.get(t)),er=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},tr=(t,e,n,a)=>(Zt(t,e,"write to private field"),a?a.call(t,n):e.set(t,n),n);function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(a,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function a(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function a(){if(this instanceof a){var o=[null];o.push.apply(o,arguments);var l=Function.bind.apply(e,o);return new l}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(a){var o=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(n,a,o.get?o:{enumerable:!0,get:function(){return t[a]}})}),n}var browserExports$3={},browser$i={get exports(){return browserExports$3},set exports(t){browserExports$3=t}},process$1=browser$i.exports={},cachedSetTimeout$1,cachedClearTimeout$1;function defaultSetTimout$1(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout$1(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?cachedSetTimeout$1=setTimeout:cachedSetTimeout$1=defaultSetTimout$1}catch{cachedSetTimeout$1=defaultSetTimout$1}try{typeof clearTimeout=="function"?cachedClearTimeout$1=clearTimeout:cachedClearTimeout$1=defaultClearTimeout$1}catch{cachedClearTimeout$1=defaultClearTimeout$1}})();function runTimeout$1(t){if(cachedSetTimeout$1===setTimeout)return setTimeout(t,0);if((cachedSetTimeout$1===defaultSetTimout$1||!cachedSetTimeout$1)&&setTimeout)return cachedSetTimeout$1=setTimeout,setTimeout(t,0);try{return cachedSetTimeout$1(t,0)}catch{try{return cachedSetTimeout$1.call(null,t,0)}catch{return cachedSetTimeout$1.call(this,t,0)}}}function runClearTimeout$1(t){if(cachedClearTimeout$1===clearTimeout)return clearTimeout(t);if((cachedClearTimeout$1===defaultClearTimeout$1||!cachedClearTimeout$1)&&clearTimeout)return cachedClearTimeout$1=clearTimeout,clearTimeout(t);try{return cachedClearTimeout$1(t)}catch{try{return cachedClearTimeout$1.call(null,t)}catch{return cachedClearTimeout$1.call(this,t)}}}var queue$2=[],draining$1=!1,currentQueue$1,queueIndex$1=-1;function cleanUpNextTick$1(){!draining$1||!currentQueue$1||(draining$1=!1,currentQueue$1.length?queue$2=currentQueue$1.concat(queue$2):queueIndex$1=-1,queue$2.length&&drainQueue$1())}function drainQueue$1(){if(!draining$1){var t=runTimeout$1(cleanUpNextTick$1);draining$1=!0;for(var e=queue$2.length;e;){for(currentQueue$1=queue$2,queue$2=[];++queueIndex$1<e;)currentQueue$1&&currentQueue$1[queueIndex$1].run();queueIndex$1=-1,e=queue$2.length}currentQueue$1=null,draining$1=!1,runClearTimeout$1(t)}}process$1.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];queue$2.push(new Item$1(t,e)),queue$2.length===1&&!draining$1&&runTimeout$1(drainQueue$1)};function Item$1(t,e){this.fun=t,this.array=e}Item$1.prototype.run=function(){this.fun.apply(null,this.array)};process$1.title="browser";process$1.browser=!0;process$1.env={};process$1.argv=[];process$1.version="";process$1.versions={};function noop$8(){}process$1.on=noop$8;process$1.addListener=noop$8;process$1.once=noop$8;process$1.off=noop$8;process$1.removeListener=noop$8;process$1.removeAllListeners=noop$8;process$1.emit=noop$8;process$1.prependListener=noop$8;process$1.prependOnceListener=noop$8;process$1.listeners=function(t){return[]};process$1.binding=function(t){throw new Error("process.binding is not supported")};process$1.cwd=function(){return"/"};process$1.chdir=function(t){throw new Error("process.chdir is not supported")};process$1.umask=function(){return 0};var buffer$3={},base64Js={};base64Js.byteLength=byteLength$2;base64Js.toByteArray=toByteArray$1;base64Js.fromByteArray=fromByteArray$1;var lookup$2=[],revLookup$1=[],Arr$1=typeof Uint8Array<"u"?Uint8Array:Array,code$8="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i$1=0,len=code$8.length;i$1<len;++i$1)lookup$2[i$1]=code$8[i$1],revLookup$1[code$8.charCodeAt(i$1)]=i$1;revLookup$1["-".charCodeAt(0)]=62;revLookup$1["_".charCodeAt(0)]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var a=n===e?0:4-n%4;return[n,a]}function byteLength$2(t){var e=getLens(t),n=e[0],a=e[1];return(n+a)*3/4-a}function _byteLength(t,e,n){return(e+n)*3/4-n}function toByteArray$1(t){var e,n=getLens(t),a=n[0],o=n[1],l=new Arr$1(_byteLength(t,a,o)),u=0,d=o>0?a-4:a,m;for(m=0;m<d;m+=4)e=revLookup$1[t.charCodeAt(m)]<<18|revLookup$1[t.charCodeAt(m+1)]<<12|revLookup$1[t.charCodeAt(m+2)]<<6|revLookup$1[t.charCodeAt(m+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=e&255;return o===2&&(e=revLookup$1[t.charCodeAt(m)]<<2|revLookup$1[t.charCodeAt(m+1)]>>4,l[u++]=e&255),o===1&&(e=revLookup$1[t.charCodeAt(m)]<<10|revLookup$1[t.charCodeAt(m+1)]<<4|revLookup$1[t.charCodeAt(m+2)]>>2,l[u++]=e>>8&255,l[u++]=e&255),l}function tripletToBase64$1(t){return lookup$2[t>>18&63]+lookup$2[t>>12&63]+lookup$2[t>>6&63]+lookup$2[t&63]}function encodeChunk$1(t,e,n){for(var a,o=[],l=e;l<n;l+=3)a=(t[l]<<16&16711680)+(t[l+1]<<8&65280)+(t[l+2]&255),o.push(tripletToBase64$1(a));return o.join("")}function fromByteArray$1(t){for(var e,n=t.length,a=n%3,o=[],l=16383,u=0,d=n-a;u<d;u+=l)o.push(encodeChunk$1(t,u,u+l>d?d:u+l));return a===1?(e=t[n-1],o.push(lookup$2[e>>2]+lookup$2[e<<4&63]+"==")):a===2&&(e=(t[n-2]<<8)+t[n-1],o.push(lookup$2[e>>10]+lookup$2[e>>4&63]+lookup$2[e<<2&63]+"=")),o.join("")}var ieee754$2={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$2.read=function(t,e,n,a,o){var l,u,d=o*8-a-1,m=(1<<d)-1,y=m>>1,b=-7,_=n?o-1:0,w=n?-1:1,E=t[e+_];for(_+=w,l=E&(1<<-b)-1,E>>=-b,b+=d;b>0;l=l*256+t[e+_],_+=w,b-=8);for(u=l&(1<<-b)-1,l>>=-b,b+=a;b>0;u=u*256+t[e+_],_+=w,b-=8);if(l===0)l=1-y;else{if(l===m)return u?NaN:(E?-1:1)*(1/0);u=u+Math.pow(2,a),l=l-y}return(E?-1:1)*u*Math.pow(2,l-a)};ieee754$2.write=function(t,e,n,a,o,l){var u,d,m,y=l*8-o-1,b=(1<<y)-1,_=b>>1,w=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=a?0:l-1,A=a?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(d=isNaN(e)?1:0,u=b):(u=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-u))<1&&(u--,m*=2),u+_>=1?e+=w/m:e+=w*Math.pow(2,1-_),e*m>=2&&(u++,m/=2),u+_>=b?(d=0,u=b):u+_>=1?(d=(e*m-1)*Math.pow(2,o),u=u+_):(d=e*Math.pow(2,_-1)*Math.pow(2,o),u=0));o>=8;t[n+E]=d&255,E+=A,d/=256,o-=8);for(u=u<<o|d,y+=o;y>0;t[n+E]=u&255,E+=A,u/=256,y-=8);t[n+E-A]|=C*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=base64Js,n=ieee754$2,a=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=D,t.INSPECT_MAX_BYTES=50;const o=2147483647;t.kMaxLength=o,d.TYPED_ARRAY_SUPPORT=l(),!d.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const ge=new Uint8Array(1),ie={foo:function(){return 42}};return Object.setPrototypeOf(ie,Uint8Array.prototype),Object.setPrototypeOf(ge,ie),ge.foo()===42}catch{return!1}}Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}});function u(ge){if(ge>o)throw new RangeError('The value "'+ge+'" is invalid for option "size"');const ie=new Uint8Array(ge);return Object.setPrototypeOf(ie,d.prototype),ie}function d(ge,ie,he){if(typeof ge=="number"){if(typeof ie=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return _(ge)}return m(ge,ie,he)}d.poolSize=8192;function m(ge,ie,he){if(typeof ge=="string")return w(ge,ie);if(ArrayBuffer.isView(ge))return A(ge);if(ge==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge);if(Be(ge,ArrayBuffer)||ge&&Be(ge.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Be(ge,SharedArrayBuffer)||ge&&Be(ge.buffer,SharedArrayBuffer)))return C(ge,ie,he);if(typeof ge=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const we=ge.valueOf&&ge.valueOf();if(we!=null&&we!==ge)return d.from(we,ie,he);const Re=k(ge);if(Re)return Re;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ge[Symbol.toPrimitive]=="function")return d.from(ge[Symbol.toPrimitive]("string"),ie,he);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ge)}d.from=function(ge,ie,he){return m(ge,ie,he)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array);function y(ge){if(typeof ge!="number")throw new TypeError('"size" argument must be of type number');if(ge<0)throw new RangeError('The value "'+ge+'" is invalid for option "size"')}function b(ge,ie,he){return y(ge),ge<=0?u(ge):ie!==void 0?typeof he=="string"?u(ge).fill(ie,he):u(ge).fill(ie):u(ge)}d.alloc=function(ge,ie,he){return b(ge,ie,he)};function _(ge){return y(ge),u(ge<0?0:B(ge)|0)}d.allocUnsafe=function(ge){return _(ge)},d.allocUnsafeSlow=function(ge){return _(ge)};function w(ge,ie){if((typeof ie!="string"||ie==="")&&(ie="utf8"),!d.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);const he=q(ge,ie)|0;let we=u(he);const Re=we.write(ge,ie);return Re!==he&&(we=we.slice(0,Re)),we}function E(ge){const ie=ge.length<0?0:B(ge.length)|0,he=u(ie);for(let we=0;we<ie;we+=1)he[we]=ge[we]&255;return he}function A(ge){if(Be(ge,Uint8Array)){const ie=new Uint8Array(ge);return C(ie.buffer,ie.byteOffset,ie.byteLength)}return E(ge)}function C(ge,ie,he){if(ie<0||ge.byteLength<ie)throw new RangeError('"offset" is outside of buffer bounds');if(ge.byteLength<ie+(he||0))throw new RangeError('"length" is outside of buffer bounds');let we;return ie===void 0&&he===void 0?we=new Uint8Array(ge):he===void 0?we=new Uint8Array(ge,ie):we=new Uint8Array(ge,ie,he),Object.setPrototypeOf(we,d.prototype),we}function k(ge){if(d.isBuffer(ge)){const ie=B(ge.length)|0,he=u(ie);return he.length===0||ge.copy(he,0,0,ie),he}if(ge.length!==void 0)return typeof ge.length!="number"||Me(ge.length)?u(0):E(ge);if(ge.type==="Buffer"&&Array.isArray(ge.data))return E(ge.data)}function B(ge){if(ge>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return ge|0}function D(ge){return+ge!=ge&&(ge=0),d.alloc(+ge)}d.isBuffer=function(ie){return ie!=null&&ie._isBuffer===!0&&ie!==d.prototype},d.compare=function(ie,he){if(Be(ie,Uint8Array)&&(ie=d.from(ie,ie.offset,ie.byteLength)),Be(he,Uint8Array)&&(he=d.from(he,he.offset,he.byteLength)),!d.isBuffer(ie)||!d.isBuffer(he))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(ie===he)return 0;let we=ie.length,Re=he.length;for(let De=0,Le=Math.min(we,Re);De<Le;++De)if(ie[De]!==he[De]){we=ie[De],Re=he[De];break}return we<Re?-1:Re<we?1:0},d.isEncoding=function(ie){switch(String(ie).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(ie,he){if(!Array.isArray(ie))throw new TypeError('"list" argument must be an Array of Buffers');if(ie.length===0)return d.alloc(0);let we;if(he===void 0)for(he=0,we=0;we<ie.length;++we)he+=ie[we].length;const Re=d.allocUnsafe(he);let De=0;for(we=0;we<ie.length;++we){let Le=ie[we];if(Be(Le,Uint8Array))De+Le.length>Re.length?(d.isBuffer(Le)||(Le=d.from(Le)),Le.copy(Re,De)):Uint8Array.prototype.set.call(Re,Le,De);else if(d.isBuffer(Le))Le.copy(Re,De);else throw new TypeError('"list" argument must be an Array of Buffers');De+=Le.length}return Re};function q(ge,ie){if(d.isBuffer(ge))return ge.length;if(ArrayBuffer.isView(ge)||Be(ge,ArrayBuffer))return ge.byteLength;if(typeof ge!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ge);const he=ge.length,we=arguments.length>2&&arguments[2]===!0;if(!we&&he===0)return 0;let Re=!1;for(;;)switch(ie){case"ascii":case"latin1":case"binary":return he;case"utf8":case"utf-8":return be(ge).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he*2;case"hex":return he>>>1;case"base64":return $e(ge).length;default:if(Re)return we?-1:be(ge).length;ie=(""+ie).toLowerCase(),Re=!0}}d.byteLength=q;function j(ge,ie,he){let we=!1;if((ie===void 0||ie<0)&&(ie=0),ie>this.length||((he===void 0||he>this.length)&&(he=this.length),he<=0)||(he>>>=0,ie>>>=0,he<=ie))return"";for(ge||(ge="utf8");;)switch(ge){case"hex":return X(this,ie,he);case"utf8":case"utf-8":return x(this,ie,he);case"ascii":return O(this,ie,he);case"latin1":case"binary":return z(this,ie,he);case"base64":return I(this,ie,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return H(this,ie,he);default:if(we)throw new TypeError("Unknown encoding: "+ge);ge=(ge+"").toLowerCase(),we=!0}}d.prototype._isBuffer=!0;function J(ge,ie,he){const we=ge[ie];ge[ie]=ge[he],ge[he]=we}d.prototype.swap16=function(){const ie=this.length;if(ie%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let he=0;he<ie;he+=2)J(this,he,he+1);return this},d.prototype.swap32=function(){const ie=this.length;if(ie%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let he=0;he<ie;he+=4)J(this,he,he+3),J(this,he+1,he+2);return this},d.prototype.swap64=function(){const ie=this.length;if(ie%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let he=0;he<ie;he+=8)J(this,he,he+7),J(this,he+1,he+6),J(this,he+2,he+5),J(this,he+3,he+4);return this},d.prototype.toString=function(){const ie=this.length;return ie===0?"":arguments.length===0?x(this,0,ie):j.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(ie){if(!d.isBuffer(ie))throw new TypeError("Argument must be a Buffer");return this===ie?!0:d.compare(this,ie)===0},d.prototype.inspect=function(){let ie="";const he=t.INSPECT_MAX_BYTES;return ie=this.toString("hex",0,he).replace(/(.{2})/g,"$1 ").trim(),this.length>he&&(ie+=" ... "),"<Buffer "+ie+">"},a&&(d.prototype[a]=d.prototype.inspect),d.prototype.compare=function(ie,he,we,Re,De){if(Be(ie,Uint8Array)&&(ie=d.from(ie,ie.offset,ie.byteLength)),!d.isBuffer(ie))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof ie);if(he===void 0&&(he=0),we===void 0&&(we=ie?ie.length:0),Re===void 0&&(Re=0),De===void 0&&(De=this.length),he<0||we>ie.length||Re<0||De>this.length)throw new RangeError("out of range index");if(Re>=De&&he>=we)return 0;if(Re>=De)return-1;if(he>=we)return 1;if(he>>>=0,we>>>=0,Re>>>=0,De>>>=0,this===ie)return 0;let Le=De-Re,tt=we-he;const We=Math.min(Le,tt),Ge=this.slice(Re,De),_t=ie.slice(he,we);for(let rt=0;rt<We;++rt)if(Ge[rt]!==_t[rt]){Le=Ge[rt],tt=_t[rt];break}return Le<tt?-1:tt<Le?1:0};function Y(ge,ie,he,we,Re){if(ge.length===0)return-1;if(typeof he=="string"?(we=he,he=0):he>2147483647?he=2147483647:he<-2147483648&&(he=-2147483648),he=+he,Me(he)&&(he=Re?0:ge.length-1),he<0&&(he=ge.length+he),he>=ge.length){if(Re)return-1;he=ge.length-1}else if(he<0)if(Re)he=0;else return-1;if(typeof ie=="string"&&(ie=d.from(ie,we)),d.isBuffer(ie))return ie.length===0?-1:L(ge,ie,he,we,Re);if(typeof ie=="number")return ie=ie&255,typeof Uint8Array.prototype.indexOf=="function"?Re?Uint8Array.prototype.indexOf.call(ge,ie,he):Uint8Array.prototype.lastIndexOf.call(ge,ie,he):L(ge,[ie],he,we,Re);throw new TypeError("val must be string, number or Buffer")}function L(ge,ie,he,we,Re){let De=1,Le=ge.length,tt=ie.length;if(we!==void 0&&(we=String(we).toLowerCase(),we==="ucs2"||we==="ucs-2"||we==="utf16le"||we==="utf-16le")){if(ge.length<2||ie.length<2)return-1;De=2,Le/=2,tt/=2,he/=2}function We(_t,rt){return De===1?_t[rt]:_t.readUInt16BE(rt*De)}let Ge;if(Re){let _t=-1;for(Ge=he;Ge<Le;Ge++)if(We(ge,Ge)===We(ie,_t===-1?0:Ge-_t)){if(_t===-1&&(_t=Ge),Ge-_t+1===tt)return _t*De}else _t!==-1&&(Ge-=Ge-_t),_t=-1}else for(he+tt>Le&&(he=Le-tt),Ge=he;Ge>=0;Ge--){let _t=!0;for(let rt=0;rt<tt;rt++)if(We(ge,Ge+rt)!==We(ie,rt)){_t=!1;break}if(_t)return Ge}return-1}d.prototype.includes=function(ie,he,we){return this.indexOf(ie,he,we)!==-1},d.prototype.indexOf=function(ie,he,we){return Y(this,ie,he,we,!0)},d.prototype.lastIndexOf=function(ie,he,we){return Y(this,ie,he,we,!1)};function Z(ge,ie,he,we){he=Number(he)||0;const Re=ge.length-he;we?(we=Number(we),we>Re&&(we=Re)):we=Re;const De=ie.length;we>De/2&&(we=De/2);let Le;for(Le=0;Le<we;++Le){const tt=parseInt(ie.substr(Le*2,2),16);if(Me(tt))return Le;ge[he+Le]=tt}return Le}function Q(ge,ie,he,we){return Ie(be(ie,ge.length-he),ge,he,we)}function oe(ge,ie,he,we){return Ie(_e(ie),ge,he,we)}function ae(ge,ie,he,we){return Ie($e(ie),ge,he,we)}function U(ge,ie,he,we){return Ie(ye(ie,ge.length-he),ge,he,we)}d.prototype.write=function(ie,he,we,Re){if(he===void 0)Re="utf8",we=this.length,he=0;else if(we===void 0&&typeof he=="string")Re=he,we=this.length,he=0;else if(isFinite(he))he=he>>>0,isFinite(we)?(we=we>>>0,Re===void 0&&(Re="utf8")):(Re=we,we=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const De=this.length-he;if((we===void 0||we>De)&&(we=De),ie.length>0&&(we<0||he<0)||he>this.length)throw new RangeError("Attempt to write outside buffer bounds");Re||(Re="utf8");let Le=!1;for(;;)switch(Re){case"hex":return Z(this,ie,he,we);case"utf8":case"utf-8":return Q(this,ie,he,we);case"ascii":case"latin1":case"binary":return oe(this,ie,he,we);case"base64":return ae(this,ie,he,we);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,ie,he,we);default:if(Le)throw new TypeError("Unknown encoding: "+Re);Re=(""+Re).toLowerCase(),Le=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function I(ge,ie,he){return ie===0&&he===ge.length?e.fromByteArray(ge):e.fromByteArray(ge.slice(ie,he))}function x(ge,ie,he){he=Math.min(ge.length,he);const we=[];let Re=ie;for(;Re<he;){const De=ge[Re];let Le=null,tt=De>239?4:De>223?3:De>191?2:1;if(Re+tt<=he){let We,Ge,_t,rt;switch(tt){case 1:De<128&&(Le=De);break;case 2:We=ge[Re+1],(We&192)===128&&(rt=(De&31)<<6|We&63,rt>127&&(Le=rt));break;case 3:We=ge[Re+1],Ge=ge[Re+2],(We&192)===128&&(Ge&192)===128&&(rt=(De&15)<<12|(We&63)<<6|Ge&63,rt>2047&&(rt<55296||rt>57343)&&(Le=rt));break;case 4:We=ge[Re+1],Ge=ge[Re+2],_t=ge[Re+3],(We&192)===128&&(Ge&192)===128&&(_t&192)===128&&(rt=(De&15)<<18|(We&63)<<12|(Ge&63)<<6|_t&63,rt>65535&&rt<1114112&&(Le=rt))}}Le===null?(Le=65533,tt=1):Le>65535&&(Le-=65536,we.push(Le>>>10&1023|55296),Le=56320|Le&1023),we.push(Le),Re+=tt}return M(we)}const T=4096;function M(ge){const ie=ge.length;if(ie<=T)return String.fromCharCode.apply(String,ge);let he="",we=0;for(;we<ie;)he+=String.fromCharCode.apply(String,ge.slice(we,we+=T));return he}function O(ge,ie,he){let we="";he=Math.min(ge.length,he);for(let Re=ie;Re<he;++Re)we+=String.fromCharCode(ge[Re]&127);return we}function z(ge,ie,he){let we="";he=Math.min(ge.length,he);for(let Re=ie;Re<he;++Re)we+=String.fromCharCode(ge[Re]);return we}function X(ge,ie,he){const we=ge.length;(!ie||ie<0)&&(ie=0),(!he||he<0||he>we)&&(he=we);let Re="";for(let De=ie;De<he;++De)Re+=Fe[ge[De]];return Re}function H(ge,ie,he){const we=ge.slice(ie,he);let Re="";for(let De=0;De<we.length-1;De+=2)Re+=String.fromCharCode(we[De]+we[De+1]*256);return Re}d.prototype.slice=function(ie,he){const we=this.length;ie=~~ie,he=he===void 0?we:~~he,ie<0?(ie+=we,ie<0&&(ie=0)):ie>we&&(ie=we),he<0?(he+=we,he<0&&(he=0)):he>we&&(he=we),he<ie&&(he=ie);const Re=this.subarray(ie,he);return Object.setPrototypeOf(Re,d.prototype),Re};function P(ge,ie,he){if(ge%1!==0||ge<0)throw new RangeError("offset is not uint");if(ge+ie>he)throw new RangeError("Trying to access beyond buffer length")}d.prototype.readUintLE=d.prototype.readUIntLE=function(ie,he,we){ie=ie>>>0,he=he>>>0,we||P(ie,he,this.length);let Re=this[ie],De=1,Le=0;for(;++Le<he&&(De*=256);)Re+=this[ie+Le]*De;return Re},d.prototype.readUintBE=d.prototype.readUIntBE=function(ie,he,we){ie=ie>>>0,he=he>>>0,we||P(ie,he,this.length);let Re=this[ie+--he],De=1;for(;he>0&&(De*=256);)Re+=this[ie+--he]*De;return Re},d.prototype.readUint8=d.prototype.readUInt8=function(ie,he){return ie=ie>>>0,he||P(ie,1,this.length),this[ie]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(ie,he){return ie=ie>>>0,he||P(ie,2,this.length),this[ie]|this[ie+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(ie,he){return ie=ie>>>0,he||P(ie,2,this.length),this[ie]<<8|this[ie+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(ie,he){return ie=ie>>>0,he||P(ie,4,this.length),(this[ie]|this[ie+1]<<8|this[ie+2]<<16)+this[ie+3]*16777216},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(ie,he){return ie=ie>>>0,he||P(ie,4,this.length),this[ie]*16777216+(this[ie+1]<<16|this[ie+2]<<8|this[ie+3])},d.prototype.readBigUInt64LE=Ve(function(ie){ie=ie>>>0,me(ie,"offset");const he=this[ie],we=this[ie+7];(he===void 0||we===void 0)&&te(ie,this.length-8);const Re=he+this[++ie]*2**8+this[++ie]*2**16+this[++ie]*2**24,De=this[++ie]+this[++ie]*2**8+this[++ie]*2**16+we*2**24;return BigInt(Re)+(BigInt(De)<<BigInt(32))}),d.prototype.readBigUInt64BE=Ve(function(ie){ie=ie>>>0,me(ie,"offset");const he=this[ie],we=this[ie+7];(he===void 0||we===void 0)&&te(ie,this.length-8);const Re=he*2**24+this[++ie]*2**16+this[++ie]*2**8+this[++ie],De=this[++ie]*2**24+this[++ie]*2**16+this[++ie]*2**8+we;return(BigInt(Re)<<BigInt(32))+BigInt(De)}),d.prototype.readIntLE=function(ie,he,we){ie=ie>>>0,he=he>>>0,we||P(ie,he,this.length);let Re=this[ie],De=1,Le=0;for(;++Le<he&&(De*=256);)Re+=this[ie+Le]*De;return De*=128,Re>=De&&(Re-=Math.pow(2,8*he)),Re},d.prototype.readIntBE=function(ie,he,we){ie=ie>>>0,he=he>>>0,we||P(ie,he,this.length);let Re=he,De=1,Le=this[ie+--Re];for(;Re>0&&(De*=256);)Le+=this[ie+--Re]*De;return De*=128,Le>=De&&(Le-=Math.pow(2,8*he)),Le},d.prototype.readInt8=function(ie,he){return ie=ie>>>0,he||P(ie,1,this.length),this[ie]&128?(255-this[ie]+1)*-1:this[ie]},d.prototype.readInt16LE=function(ie,he){ie=ie>>>0,he||P(ie,2,this.length);const we=this[ie]|this[ie+1]<<8;return we&32768?we|4294901760:we},d.prototype.readInt16BE=function(ie,he){ie=ie>>>0,he||P(ie,2,this.length);const we=this[ie+1]|this[ie]<<8;return we&32768?we|4294901760:we},d.prototype.readInt32LE=function(ie,he){return ie=ie>>>0,he||P(ie,4,this.length),this[ie]|this[ie+1]<<8|this[ie+2]<<16|this[ie+3]<<24},d.prototype.readInt32BE=function(ie,he){return ie=ie>>>0,he||P(ie,4,this.length),this[ie]<<24|this[ie+1]<<16|this[ie+2]<<8|this[ie+3]},d.prototype.readBigInt64LE=Ve(function(ie){ie=ie>>>0,me(ie,"offset");const he=this[ie],we=this[ie+7];(he===void 0||we===void 0)&&te(ie,this.length-8);const Re=this[ie+4]+this[ie+5]*2**8+this[ie+6]*2**16+(we<<24);return(BigInt(Re)<<BigInt(32))+BigInt(he+this[++ie]*2**8+this[++ie]*2**16+this[++ie]*2**24)}),d.prototype.readBigInt64BE=Ve(function(ie){ie=ie>>>0,me(ie,"offset");const he=this[ie],we=this[ie+7];(he===void 0||we===void 0)&&te(ie,this.length-8);const Re=(he<<24)+this[++ie]*2**16+this[++ie]*2**8+this[++ie];return(BigInt(Re)<<BigInt(32))+BigInt(this[++ie]*2**24+this[++ie]*2**16+this[++ie]*2**8+we)}),d.prototype.readFloatLE=function(ie,he){return ie=ie>>>0,he||P(ie,4,this.length),n.read(this,ie,!0,23,4)},d.prototype.readFloatBE=function(ie,he){return ie=ie>>>0,he||P(ie,4,this.length),n.read(this,ie,!1,23,4)},d.prototype.readDoubleLE=function(ie,he){return ie=ie>>>0,he||P(ie,8,this.length),n.read(this,ie,!0,52,8)},d.prototype.readDoubleBE=function(ie,he){return ie=ie>>>0,he||P(ie,8,this.length),n.read(this,ie,!1,52,8)};function S(ge,ie,he,we,Re,De){if(!d.isBuffer(ge))throw new TypeError('"buffer" argument must be a Buffer instance');if(ie>Re||ie<De)throw new RangeError('"value" argument is out of bounds');if(he+we>ge.length)throw new RangeError("Index out of range")}d.prototype.writeUintLE=d.prototype.writeUIntLE=function(ie,he,we,Re){if(ie=+ie,he=he>>>0,we=we>>>0,!Re){const tt=Math.pow(2,8*we)-1;S(this,ie,he,we,tt,0)}let De=1,Le=0;for(this[he]=ie&255;++Le<we&&(De*=256);)this[he+Le]=ie/De&255;return he+we},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(ie,he,we,Re){if(ie=+ie,he=he>>>0,we=we>>>0,!Re){const tt=Math.pow(2,8*we)-1;S(this,ie,he,we,tt,0)}let De=we-1,Le=1;for(this[he+De]=ie&255;--De>=0&&(Le*=256);)this[he+De]=ie/Le&255;return he+we},d.prototype.writeUint8=d.prototype.writeUInt8=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,1,255,0),this[he]=ie&255,he+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,2,65535,0),this[he]=ie&255,this[he+1]=ie>>>8,he+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,2,65535,0),this[he]=ie>>>8,this[he+1]=ie&255,he+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,4,4294967295,0),this[he+3]=ie>>>24,this[he+2]=ie>>>16,this[he+1]=ie>>>8,this[he]=ie&255,he+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,4,4294967295,0),this[he]=ie>>>24,this[he+1]=ie>>>16,this[he+2]=ie>>>8,this[he+3]=ie&255,he+4};function F(ge,ie,he,we,Re){re(ie,we,Re,ge,he,7);let De=Number(ie&BigInt(4294967295));ge[he++]=De,De=De>>8,ge[he++]=De,De=De>>8,ge[he++]=De,De=De>>8,ge[he++]=De;let Le=Number(ie>>BigInt(32)&BigInt(4294967295));return ge[he++]=Le,Le=Le>>8,ge[he++]=Le,Le=Le>>8,ge[he++]=Le,Le=Le>>8,ge[he++]=Le,he}function ue(ge,ie,he,we,Re){re(ie,we,Re,ge,he,7);let De=Number(ie&BigInt(4294967295));ge[he+7]=De,De=De>>8,ge[he+6]=De,De=De>>8,ge[he+5]=De,De=De>>8,ge[he+4]=De;let Le=Number(ie>>BigInt(32)&BigInt(4294967295));return ge[he+3]=Le,Le=Le>>8,ge[he+2]=Le,Le=Le>>8,ge[he+1]=Le,Le=Le>>8,ge[he]=Le,he+8}d.prototype.writeBigUInt64LE=Ve(function(ie,he=0){return F(this,ie,he,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeBigUInt64BE=Ve(function(ie,he=0){return ue(this,ie,he,BigInt(0),BigInt("0xffffffffffffffff"))}),d.prototype.writeIntLE=function(ie,he,we,Re){if(ie=+ie,he=he>>>0,!Re){const We=Math.pow(2,8*we-1);S(this,ie,he,we,We-1,-We)}let De=0,Le=1,tt=0;for(this[he]=ie&255;++De<we&&(Le*=256);)ie<0&&tt===0&&this[he+De-1]!==0&&(tt=1),this[he+De]=(ie/Le>>0)-tt&255;return he+we},d.prototype.writeIntBE=function(ie,he,we,Re){if(ie=+ie,he=he>>>0,!Re){const We=Math.pow(2,8*we-1);S(this,ie,he,we,We-1,-We)}let De=we-1,Le=1,tt=0;for(this[he+De]=ie&255;--De>=0&&(Le*=256);)ie<0&&tt===0&&this[he+De+1]!==0&&(tt=1),this[he+De]=(ie/Le>>0)-tt&255;return he+we},d.prototype.writeInt8=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,1,127,-128),ie<0&&(ie=255+ie+1),this[he]=ie&255,he+1},d.prototype.writeInt16LE=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,2,32767,-32768),this[he]=ie&255,this[he+1]=ie>>>8,he+2},d.prototype.writeInt16BE=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,2,32767,-32768),this[he]=ie>>>8,this[he+1]=ie&255,he+2},d.prototype.writeInt32LE=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,4,2147483647,-2147483648),this[he]=ie&255,this[he+1]=ie>>>8,this[he+2]=ie>>>16,this[he+3]=ie>>>24,he+4},d.prototype.writeInt32BE=function(ie,he,we){return ie=+ie,he=he>>>0,we||S(this,ie,he,4,2147483647,-2147483648),ie<0&&(ie=4294967295+ie+1),this[he]=ie>>>24,this[he+1]=ie>>>16,this[he+2]=ie>>>8,this[he+3]=ie&255,he+4},d.prototype.writeBigInt64LE=Ve(function(ie,he=0){return F(this,ie,he,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),d.prototype.writeBigInt64BE=Ve(function(ie,he=0){return ue(this,ie,he,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ee(ge,ie,he,we,Re,De){if(he+we>ge.length)throw new RangeError("Index out of range");if(he<0)throw new RangeError("Index out of range")}function fe(ge,ie,he,we,Re){return ie=+ie,he=he>>>0,Re||ee(ge,ie,he,4),n.write(ge,ie,he,we,23,4),he+4}d.prototype.writeFloatLE=function(ie,he,we){return fe(this,ie,he,!0,we)},d.prototype.writeFloatBE=function(ie,he,we){return fe(this,ie,he,!1,we)};function le(ge,ie,he,we,Re){return ie=+ie,he=he>>>0,Re||ee(ge,ie,he,8),n.write(ge,ie,he,we,52,8),he+8}d.prototype.writeDoubleLE=function(ie,he,we){return le(this,ie,he,!0,we)},d.prototype.writeDoubleBE=function(ie,he,we){return le(this,ie,he,!1,we)},d.prototype.copy=function(ie,he,we,Re){if(!d.isBuffer(ie))throw new TypeError("argument should be a Buffer");if(we||(we=0),!Re&&Re!==0&&(Re=this.length),he>=ie.length&&(he=ie.length),he||(he=0),Re>0&&Re<we&&(Re=we),Re===we||ie.length===0||this.length===0)return 0;if(he<0)throw new RangeError("targetStart out of bounds");if(we<0||we>=this.length)throw new RangeError("Index out of range");if(Re<0)throw new RangeError("sourceEnd out of bounds");Re>this.length&&(Re=this.length),ie.length-he<Re-we&&(Re=ie.length-he+we);const De=Re-we;return this===ie&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(he,we,Re):Uint8Array.prototype.set.call(ie,this.subarray(we,Re),he),De},d.prototype.fill=function(ie,he,we,Re){if(typeof ie=="string"){if(typeof he=="string"?(Re=he,he=0,we=this.length):typeof we=="string"&&(Re=we,we=this.length),Re!==void 0&&typeof Re!="string")throw new TypeError("encoding must be a string");if(typeof Re=="string"&&!d.isEncoding(Re))throw new TypeError("Unknown encoding: "+Re);if(ie.length===1){const Le=ie.charCodeAt(0);(Re==="utf8"&&Le<128||Re==="latin1")&&(ie=Le)}}else typeof ie=="number"?ie=ie&255:typeof ie=="boolean"&&(ie=Number(ie));if(he<0||this.length<he||this.length<we)throw new RangeError("Out of range index");if(we<=he)return this;he=he>>>0,we=we===void 0?this.length:we>>>0,ie||(ie=0);let De;if(typeof ie=="number")for(De=he;De<we;++De)this[De]=ie;else{const Le=d.isBuffer(ie)?ie:d.from(ie,Re),tt=Le.length;if(tt===0)throw new TypeError('The value "'+ie+'" is invalid for argument "value"');for(De=0;De<we-he;++De)this[De+he]=Le[De%tt]}return this};const ce={};function pe(ge,ie,he){ce[ge]=class extends he{constructor(){super(),Object.defineProperty(this,"message",{value:ie.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ge}]`,this.stack,delete this.name}get code(){return ge}set code(Re){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Re,writable:!0})}toString(){return`${this.name} [${ge}]: ${this.message}`}}}pe("ERR_BUFFER_OUT_OF_BOUNDS",function(ge){return ge?`${ge} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pe("ERR_INVALID_ARG_TYPE",function(ge,ie){return`The "${ge}" argument must be of type number. Received type ${typeof ie}`},TypeError),pe("ERR_OUT_OF_RANGE",function(ge,ie,he){let we=`The value of "${ge}" is out of range.`,Re=he;return Number.isInteger(he)&&Math.abs(he)>2**32?Re=se(String(he)):typeof he=="bigint"&&(Re=String(he),(he>BigInt(2)**BigInt(32)||he<-(BigInt(2)**BigInt(32)))&&(Re=se(Re)),Re+="n"),we+=` It must be ${ie}. Received ${Re}`,we},RangeError);function se(ge){let ie="",he=ge.length;const we=ge[0]==="-"?1:0;for(;he>=we+4;he-=3)ie=`_${ge.slice(he-3,he)}${ie}`;return`${ge.slice(0,he)}${ie}`}function de(ge,ie,he){me(ie,"offset"),(ge[ie]===void 0||ge[ie+he]===void 0)&&te(ie,ge.length-(he+1))}function re(ge,ie,he,we,Re,De){if(ge>he||ge<ie){const Le=typeof ie=="bigint"?"n":"";let tt;throw De>3?ie===0||ie===BigInt(0)?tt=`>= 0${Le} and < 2${Le} ** ${(De+1)*8}${Le}`:tt=`>= -(2${Le} ** ${(De+1)*8-1}${Le}) and < 2 ** ${(De+1)*8-1}${Le}`:tt=`>= ${ie}${Le} and <= ${he}${Le}`,new ce.ERR_OUT_OF_RANGE("value",tt,ge)}de(we,Re,De)}function me(ge,ie){if(typeof ge!="number")throw new ce.ERR_INVALID_ARG_TYPE(ie,"number",ge)}function te(ge,ie,he){throw Math.floor(ge)!==ge?(me(ge,he),new ce.ERR_OUT_OF_RANGE(he||"offset","an integer",ge)):ie<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE(he||"offset",`>= ${he?1:0} and <= ${ie}`,ge)}const ve=/[^+/0-9A-Za-z-_]/g;function Se(ge){if(ge=ge.split("=")[0],ge=ge.trim().replace(ve,""),ge.length<2)return"";for(;ge.length%4!==0;)ge=ge+"=";return ge}function be(ge,ie){ie=ie||1/0;let he;const we=ge.length;let Re=null;const De=[];for(let Le=0;Le<we;++Le){if(he=ge.charCodeAt(Le),he>55295&&he<57344){if(!Re){if(he>56319){(ie-=3)>-1&&De.push(239,191,189);continue}else if(Le+1===we){(ie-=3)>-1&&De.push(239,191,189);continue}Re=he;continue}if(he<56320){(ie-=3)>-1&&De.push(239,191,189),Re=he;continue}he=(Re-55296<<10|he-56320)+65536}else Re&&(ie-=3)>-1&&De.push(239,191,189);if(Re=null,he<128){if((ie-=1)<0)break;De.push(he)}else if(he<2048){if((ie-=2)<0)break;De.push(he>>6|192,he&63|128)}else if(he<65536){if((ie-=3)<0)break;De.push(he>>12|224,he>>6&63|128,he&63|128)}else if(he<1114112){if((ie-=4)<0)break;De.push(he>>18|240,he>>12&63|128,he>>6&63|128,he&63|128)}else throw new Error("Invalid code point")}return De}function _e(ge){const ie=[];for(let he=0;he<ge.length;++he)ie.push(ge.charCodeAt(he)&255);return ie}function ye(ge,ie){let he,we,Re;const De=[];for(let Le=0;Le<ge.length&&!((ie-=2)<0);++Le)he=ge.charCodeAt(Le),we=he>>8,Re=he%256,De.push(Re),De.push(we);return De}function $e(ge){return e.toByteArray(Se(ge))}function Ie(ge,ie,he,we){let Re;for(Re=0;Re<we&&!(Re+he>=ie.length||Re>=ge.length);++Re)ie[Re+he]=ge[Re];return Re}function Be(ge,ie){return ge instanceof ie||ge!=null&&ge.constructor!=null&&ge.constructor.name!=null&&ge.constructor.name===ie.name}function Me(ge){return ge!==ge}const Fe=function(){const ge="0123456789abcdef",ie=new Array(256);for(let he=0;he<16;++he){const we=he*16;for(let Re=0;Re<16;++Re)ie[we+Re]=ge[he]+ge[Re]}return ie}();function Ve(ge){return typeof BigInt>"u"?Oe:ge}function Oe(){throw new Error("BigInt not supported")}})(buffer$3);window.Buffer=buffer$3.Buffer;window.process=browserExports$3;const global$1=typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{};function makeMap(t,e){const n=Object.create(null),a=t.split(",");for(let o=0;o<a.length;o++)n[a[o]]=!0;return e?o=>!!n[o.toLowerCase()]:o=>!!n[o]}function normalizeStyle(t){if(isArray$9(t)){const e={};for(let n=0;n<t.length;n++){const a=t[n],o=isString$6(a)?parseStringStyle(a):normalizeStyle(a);if(o)for(const l in o)e[l]=o[l]}return e}else{if(isString$6(t))return t;if(isObject$4(t))return t}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const a=n.split(propertyDelimiterRE);a.length>1&&(e[a[0].trim()]=a[1].trim())}}),e}function normalizeClass(t){let e="";if(isString$6(t))e=t;else if(isArray$9(t))for(let n=0;n<t.length;n++){const a=normalizeClass(t[n]);a&&(e+=a+" ")}else if(isObject$4(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const toDisplayString$1=t=>isString$6(t)?t:t==null?"":isArray$9(t)||isObject$4(t)&&(t.toString===objectToString$2||!isFunction$4(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>e&&e.__v_isRef?replacer(t,e.value):isMap$4(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[a,o])=>(n[`${a} =>`]=o,n),{})}:isSet$4(e)?{[`Set(${e.size})`]:[...e.values()]}:isObject$4(e)&&!isArray$9(e)&&!isPlainObject$2(e)?String(e):e,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=t=>onRE.test(t),isModelListener=t=>t.startsWith("onUpdate:"),extend$1=Object.assign,remove=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hasOwnProperty$5=Object.prototype.hasOwnProperty,hasOwn$4=(t,e)=>hasOwnProperty$5.call(t,e),isArray$9=Array.isArray,isMap$4=t=>toTypeString$2(t)==="[object Map]",isSet$4=t=>toTypeString$2(t)==="[object Set]",isFunction$4=t=>typeof t=="function",isString$6=t=>typeof t=="string",isSymbol$3=t=>typeof t=="symbol",isObject$4=t=>t!==null&&typeof t=="object",isPromise=t=>isObject$4(t)&&isFunction$4(t.then)&&isFunction$4(t.catch),objectToString$2=Object.prototype.toString,toTypeString$2=t=>objectToString$2.call(t),toRawType=t=>toTypeString$2(t).slice(8,-1),isPlainObject$2=t=>toTypeString$2(t)==="[object Object]",isIntegerKey=t=>isString$6(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize$1(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},def=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},toNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global$1<"u"?global$1:{});let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this.active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}run(e){if(this.active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this.active){let n,a;for(n=0,a=this.effects.length;n<a;n++)this.effects[n].stop();for(n=0,a=this.cleanups.length;n<a;n++)this.cleanups[n]();if(this.scopes)for(n=0,a=this.scopes.length;n<a;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0,this.active=!1}}}function effectScope(t){return new EffectScope(t)}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}function onScopeDispose(t){activeEffectScope&&activeEffectScope.cleanups.push(t)}const createDep=t=>{const e=new Set(t);return e.w=0,e.n=0,e},wasTracked=t=>(t.w&trackOpBit)>0,newTracked=t=>(t.n&trackOpBit)>0,initDepMarkers=({deps:t})=>{if(t.length)for(let e=0;e<t.length;e++)t[e].w|=trackOpBit},finalizeDepMarkers=t=>{const{deps:e}=t;if(e.length){let n=0;for(let a=0;a<e.length;a++){const o=e[a];wasTracked(o)&&!newTracked(o)?o.delete(t):e[n++]=o,o.w&=~trackOpBit,o.n&=~trackOpBit}e.length=n}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(e,n=null,a){this.fn=e,this.scheduler=n,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,a)}run(){if(!this.active)return this.fn();let e=activeEffect,n=shouldTrack;for(;e;){if(e===this)return;e=e.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=n,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function track(t,e,n){if(shouldTrack&&activeEffect){let a=targetMap.get(t);a||targetMap.set(t,a=new Map);let o=a.get(n);o||a.set(n,o=createDep()),trackEffects(o)}}function trackEffects(t,e){let n=!1;effectTrackDepth<=maxMarkerBits?newTracked(t)||(t.n|=trackOpBit,n=!wasTracked(t)):n=!t.has(activeEffect),n&&(t.add(activeEffect),activeEffect.deps.push(t))}function trigger(t,e,n,a,o,l){const u=targetMap.get(t);if(!u)return;let d=[];if(e==="clear")d=[...u.values()];else if(n==="length"&&isArray$9(t)){const m=toNumber(a);u.forEach((y,b)=>{(b==="length"||b>=m)&&d.push(y)})}else switch(n!==void 0&&d.push(u.get(n)),e){case"add":isArray$9(t)?isIntegerKey(n)&&d.push(u.get("length")):(d.push(u.get(ITERATE_KEY)),isMap$4(t)&&d.push(u.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$9(t)||(d.push(u.get(ITERATE_KEY)),isMap$4(t)&&d.push(u.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap$4(t)&&d.push(u.get(ITERATE_KEY));break}if(d.length===1)d[0]&&triggerEffects(d[0]);else{const m=[];for(const y of d)y&&m.push(...y);triggerEffects(createDep(m))}}function triggerEffects(t,e){const n=isArray$9(t)?t:[...t];for(const a of n)a.computed&&triggerEffect(a);for(const a of n)a.computed||triggerEffect(a)}function triggerEffect(t,e){(t!==activeEffect||t.allowRecurse)&&(t.scheduler?t.scheduler():t.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol$3)),get$2=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const a=toRaw(this);for(let l=0,u=this.length;l<u;l++)track(a,"get",l+"");const o=a[e](...n);return o===-1||o===!1?a[e](...n.map(toRaw)):o}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){pauseTracking();const a=toRaw(this)[e].apply(this,n);return resetTracking(),a}}),t}function createGetter(t=!1,e=!1){return function(a,o,l){if(o==="__v_isReactive")return!t;if(o==="__v_isReadonly")return t;if(o==="__v_isShallow")return e;if(o==="__v_raw"&&l===(t?e?shallowReadonlyMap:readonlyMap:e?shallowReactiveMap:reactiveMap).get(a))return a;const u=isArray$9(a);if(!t&&u&&hasOwn$4(arrayInstrumentations,o))return Reflect.get(arrayInstrumentations,o,l);const d=Reflect.get(a,o,l);return(isSymbol$3(o)?builtInSymbols.has(o):isNonTrackableKeys(o))||(t||track(a,"get",o),e)?d:isRef(d)?u&&isIntegerKey(o)?d:d.value:isObject$4(d)?t?readonly$3(d):reactive(d):d}}const set=createSetter(),shallowSet=createSetter(!0);function createSetter(t=!1){return function(n,a,o,l){let u=n[a];if(isReadonly(u)&&isRef(u)&&!isRef(o))return!1;if(!t&&(!isShallow(o)&&!isReadonly(o)&&(u=toRaw(u),o=toRaw(o)),!isArray$9(n)&&isRef(u)&&!isRef(o)))return u.value=o,!0;const d=isArray$9(n)&&isIntegerKey(a)?Number(a)<n.length:hasOwn$4(n,a),m=Reflect.set(n,a,o,l);return n===toRaw(l)&&(d?hasChanged(o,u)&&trigger(n,"set",a,o):trigger(n,"add",a,o)),m}}function deleteProperty(t,e){const n=hasOwn$4(t,e);t[e];const a=Reflect.deleteProperty(t,e);return a&&n&&trigger(t,"delete",e,void 0),a}function has$3(t,e){const n=Reflect.has(t,e);return(!isSymbol$3(e)||!builtInSymbols.has(e))&&track(t,"has",e),n}function ownKeys(t){return track(t,"iterate",isArray$9(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}const mutableHandlers={get:get$2,set,deleteProperty,has:has$3,ownKeys},readonlyHandlers={get:readonlyGet,set(t,e){return!0},deleteProperty(t,e){return!0}},shallowReactiveHandlers=extend$1({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=t=>t,getProto$3=t=>Reflect.getPrototypeOf(t);function get$1$1(t,e,n=!1,a=!1){t=t.__v_raw;const o=toRaw(t),l=toRaw(e);n||(e!==l&&track(o,"get",e),track(o,"get",l));const{has:u}=getProto$3(o),d=a?toShallow:n?toReadonly:toReactive;if(u.call(o,e))return d(t.get(e));if(u.call(o,l))return d(t.get(l));t!==o&&t.get(e)}function has$1$1(t,e=!1){const n=this.__v_raw,a=toRaw(n),o=toRaw(t);return e||(t!==o&&track(a,"has",t),track(a,"has",o)),t===o?n.has(t):n.has(t)||n.has(o)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add$1(t){t=toRaw(t);const e=toRaw(this);return getProto$3(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set$1(t,e){e=toRaw(e);const n=toRaw(this),{has:a,get:o}=getProto$3(n);let l=a.call(n,t);l||(t=toRaw(t),l=a.call(n,t));const u=o.call(n,t);return n.set(t,e),l?hasChanged(e,u)&&trigger(n,"set",t,e):trigger(n,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:n,get:a}=getProto$3(e);let o=n.call(e,t);o||(t=toRaw(t),o=n.call(e,t)),a&&a.call(e,t);const l=e.delete(t);return o&&trigger(e,"delete",t,void 0),l}function clear$2(){const t=toRaw(this),e=t.size!==0,n=t.clear();return e&&trigger(t,"clear",void 0,void 0),n}function createForEach(t,e){return function(a,o){const l=this,u=l.__v_raw,d=toRaw(u),m=e?toShallow:t?toReadonly:toReactive;return!t&&track(d,"iterate",ITERATE_KEY),u.forEach((y,b)=>a.call(o,m(y),m(b),l))}}function createIterableMethod(t,e,n){return function(...a){const o=this.__v_raw,l=toRaw(o),u=isMap$4(l),d=t==="entries"||t===Symbol.iterator&&u,m=t==="keys"&&u,y=o[t](...a),b=n?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",m?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:_,done:w}=y.next();return w?{value:_,done:w}:{value:d?[b(_[0]),b(_[1])]:b(_),done:w}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:this}}function createInstrumentations(){const t={get(l){return get$1$1(this,l)},get size(){return size(this)},has:has$1$1,add:add$1,set:set$1,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!1)},e={get(l){return get$1$1(this,l,!1,!0)},get size(){return size(this)},has:has$1$1,add:add$1,set:set$1,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!0)},n={get(l){return get$1$1(this,l,!0)},get size(){return size(this,!0)},has(l){return has$1$1.call(this,l,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},a={get(l){return get$1$1(this,l,!0,!0)},get size(){return size(this,!0)},has(l){return has$1$1.call(this,l,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(l=>{t[l]=createIterableMethod(l,!1,!1),n[l]=createIterableMethod(l,!0,!1),e[l]=createIterableMethod(l,!1,!0),a[l]=createIterableMethod(l,!0,!0)}),[t,n,e,a]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const n=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(a,o,l)=>o==="__v_isReactive"?!t:o==="__v_isReadonly"?t:o==="__v_raw"?a:Reflect.get(hasOwn$4(n,o)&&o in a?n:a,o,l)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly$3(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,n,a,o){if(!isObject$4(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const l=o.get(t);if(l)return l;const u=getTargetType(t);if(u===0)return t;const d=new Proxy(t,u===2?a:n);return o.set(t,d),d}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return isReactive(t)||isReadonly(t)}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return def(t,"__v_skip",!0),t}const toReactive=t=>isObject$4(t)?reactive(t):t,toReadonly=t=>isObject$4(t)?readonly$3(t):t;function trackRefValue(t){shouldTrack&&activeEffect&&(t=toRaw(t),trackEffects(t.dep||(t.dep=createDep())))}function triggerRefValue(t,e){t=toRaw(t),t.dep&&triggerEffects(t.dep)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:toReactive(e),triggerRefValue(this))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,n)=>unref(Reflect.get(t,e,n)),set:(t,e,n,a)=>{const o=t[e];return isRef(o)&&!isRef(n)?(o.value=n,!0):Reflect.set(t,e,n,a)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const e=isArray$9(t)?new Array(t.length):{};for(const n in t)e[n]=toRef(t,n);return e}class ObjectRefImpl{constructor(e,n,a){this._object=e,this._key=n,this._defaultValue=a,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}}function toRef(t,e,n){const a=t[e];return isRef(a)?a:new ObjectRefImpl(t,e,n)}var _a$1;class ComputedRefImpl{constructor(e,n,a,o){this._setter=n,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(e,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!o,this.__v_isReadonly=a}get value(){const e=toRaw(this);return trackRefValue(e),(e._dirty||!e._cacheable)&&(e._dirty=!1,e._value=e.effect.run()),e._value}set value(e){this._setter(e)}}_a$1="__v_isReadonly";function computed$1(t,e,n=!1){let a,o;const l=isFunction$4(t);return l?(a=t,o=NOOP):(a=t.get,o=t.set),new ComputedRefImpl(a,o,l||!o,n)}function warn$1(t,...e){}function callWithErrorHandling(t,e,n,a){let o;try{o=a?t(...a):t()}catch(l){handleError(l,e,n)}return o}function callWithAsyncErrorHandling(t,e,n,a){if(isFunction$4(t)){const l=callWithErrorHandling(t,e,n,a);return l&&isPromise(l)&&l.catch(u=>{handleError(u,e,n)}),l}const o=[];for(let l=0;l<t.length;l++)o.push(callWithAsyncErrorHandling(t[l],e,n,a));return o}function handleError(t,e,n,a=!0){const o=e?e.vnode:null;if(e){let l=e.parent;const u=e.proxy,d=n;for(;l;){const y=l.ec;if(y){for(let b=0;b<y.length;b++)if(y[b](t,u,d)===!1)return}l=l.parent}const m=e.appContext.config.errorHandler;if(m){callWithErrorHandling(m,null,10,[t,u,d]);return}}logError(t,n,o,a)}function logError(t,e,n,a=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue$1=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick$3(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,n=queue$1.length;for(;e<n;){const a=e+n>>>1;getId(queue$1[a])<t?e=a+1:n=a}return e}function queueJob(t){(!queue$1.length||!queue$1.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue$1.push(t):queue$1.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue$1.indexOf(t);e>flushIndex&&queue$1.splice(e,1)}function queuePostFlushCb(t){isArray$9(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e=isFlushing?flushIndex+1:0){for(;e<queue$1.length;e++){const n=queue$1[e];n&&n.pre&&(queue$1.splice(e,1),e--,n())}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,activePostFlushCbs.sort((n,a)=>getId(n)-getId(a)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const n=getId(t)-getId(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue$1.sort(comparator);const e=NOOP;try{for(flushIndex=0;flushIndex<queue$1.length;flushIndex++){const n=queue$1[flushIndex];n&&n.active!==!1&&callWithErrorHandling(n,null,14)}}finally{flushIndex=0,queue$1.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue$1.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit$1(t,e,...n){if(t.isUnmounted)return;const a=t.vnode.props||EMPTY_OBJ;let o=n;const l=e.startsWith("update:"),u=l&&e.slice(7);if(u&&u in a){const b=`${u==="modelValue"?"model":u}Modifiers`,{number:_,trim:w}=a[b]||EMPTY_OBJ;w&&(o=n.map(E=>isString$6(E)?E.trim():E)),_&&(o=n.map(toNumber))}let d,m=a[d=toHandlerKey(e)]||a[d=toHandlerKey(camelize(e))];!m&&l&&(m=a[d=toHandlerKey(hyphenate(e))]),m&&callWithAsyncErrorHandling(m,t,6,o);const y=a[d+"Once"];if(y){if(!t.emitted)t.emitted={};else if(t.emitted[d])return;t.emitted[d]=!0,callWithAsyncErrorHandling(y,t,6,o)}}function normalizeEmitsOptions(t,e,n=!1){const a=e.emitsCache,o=a.get(t);if(o!==void 0)return o;const l=t.emits;let u={},d=!1;if(!isFunction$4(t)){const m=y=>{const b=normalizeEmitsOptions(y,e,!0);b&&(d=!0,extend$1(u,b))};!n&&e.mixins.length&&e.mixins.forEach(m),t.extends&&m(t.extends),t.mixins&&t.mixins.forEach(m)}return!l&&!d?(isObject$4(t)&&a.set(t,null),null):(isArray$9(l)?l.forEach(m=>u[m]=null):extend$1(u,l),isObject$4(t)&&a.set(t,u),u)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn$4(t,e[0].toLowerCase()+e.slice(1))||hasOwn$4(t,hyphenate(e))||hasOwn$4(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,n){if(!e||t._n)return t;const a=(...o)=>{a._d&&setBlockTracking(-1);const l=setCurrentRenderingInstance(e);let u;try{u=t(...o)}finally{setCurrentRenderingInstance(l),a._d&&setBlockTracking(1)}return u};return a._n=!0,a._c=!0,a._d=!0,a}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:n,proxy:a,withProxy:o,props:l,propsOptions:[u],slots:d,attrs:m,emit:y,render:b,renderCache:_,data:w,setupState:E,ctx:A,inheritAttrs:C}=t;let k,B;const D=setCurrentRenderingInstance(t);try{if(n.shapeFlag&4){const j=o||a;k=normalizeVNode(b.call(j,j,_,l,E,w,A)),B=m}else{const j=e;k=normalizeVNode(j.length>1?j(l,{attrs:m,slots:d,emit:y}):j(l,null)),B=e.props?m:getFunctionalFallthrough(m)}}catch(j){blockStack.length=0,handleError(j,t,1),k=createVNode(Comment)}let q=k;if(B&&C!==!1){const j=Object.keys(B),{shapeFlag:J}=q;j.length&&J&7&&(u&&j.some(isModelListener)&&(B=filterModelListeners(B,u)),q=cloneVNode(q,B))}return n.dirs&&(q=cloneVNode(q),q.dirs=q.dirs?q.dirs.concat(n.dirs):n.dirs),n.transition&&(q.transition=n.transition),k=q,setCurrentRenderingInstance(D),k}const getFunctionalFallthrough=t=>{let e;for(const n in t)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=t[n]);return e},filterModelListeners=(t,e)=>{const n={};for(const a in t)(!isModelListener(a)||!(a.slice(9)in e))&&(n[a]=t[a]);return n};function shouldUpdateComponent(t,e,n){const{props:a,children:o,component:l}=t,{props:u,children:d,patchFlag:m}=e,y=l.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&m>=0){if(m&1024)return!0;if(m&16)return a?hasPropsChanged(a,u,y):!!u;if(m&8){const b=e.dynamicProps;for(let _=0;_<b.length;_++){const w=b[_];if(u[w]!==a[w]&&!isEmitListener(y,w))return!0}}}else return(o||d)&&(!d||!d.$stable)?!0:a===u?!1:a?u?hasPropsChanged(a,u,y):!0:!!u;return!1}function hasPropsChanged(t,e,n){const a=Object.keys(e);if(a.length!==Object.keys(t).length)return!0;for(let o=0;o<a.length;o++){const l=a[o];if(e[l]!==t[l]&&!isEmitListener(n,l))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray$9(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}function provide(t,e){if(currentInstance){let n=currentInstance.provides;const a=currentInstance.parent&&currentInstance.parent.provides;a===n&&(n=currentInstance.provides=Object.create(a)),n[t]=e}}function inject$1(t,e,n=!1){const a=currentInstance||currentRenderingInstance;if(a){const o=a.parent==null?a.vnode.appContext&&a.vnode.appContext.provides:a.parent.provides;if(o&&t in o)return o[t];if(arguments.length>1)return n&&isFunction$4(e)?e.call(a.proxy):e}}function watchEffect(t,e){return doWatch(t,null,e)}const INITIAL_WATCHER_VALUE={};function watch(t,e,n){return doWatch(t,e,n)}function doWatch(t,e,{immediate:n,deep:a,flush:o,onTrack:l,onTrigger:u}=EMPTY_OBJ){const d=currentInstance;let m,y=!1,b=!1;if(isRef(t)?(m=()=>t.value,y=isShallow(t)):isReactive(t)?(m=()=>t,a=!0):isArray$9(t)?(b=!0,y=t.some(q=>isReactive(q)||isShallow(q)),m=()=>t.map(q=>{if(isRef(q))return q.value;if(isReactive(q))return traverse(q);if(isFunction$4(q))return callWithErrorHandling(q,d,2)})):isFunction$4(t)?e?m=()=>callWithErrorHandling(t,d,2):m=()=>{if(!(d&&d.isUnmounted))return _&&_(),callWithAsyncErrorHandling(t,d,3,[w])}:m=NOOP,e&&a){const q=m;m=()=>traverse(q())}let _,w=q=>{_=B.onStop=()=>{callWithErrorHandling(q,d,4)}},E;if(isInSSRComponentSetup)if(w=NOOP,e?n&&callWithAsyncErrorHandling(e,d,3,[m(),b?[]:void 0,w]):m(),o==="sync"){const q=useSSRContext();E=q.__watcherHandles||(q.__watcherHandles=[])}else return NOOP;let A=b?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const C=()=>{if(B.active)if(e){const q=B.run();(a||y||(b?q.some((j,J)=>hasChanged(j,A[J])):hasChanged(q,A)))&&(_&&_(),callWithAsyncErrorHandling(e,d,3,[q,A===INITIAL_WATCHER_VALUE?void 0:b&&A[0]===INITIAL_WATCHER_VALUE?[]:A,w]),A=q)}else B.run()};C.allowRecurse=!!e;let k;o==="sync"?k=C:o==="post"?k=()=>queuePostRenderEffect(C,d&&d.suspense):(C.pre=!0,d&&(C.id=d.uid),k=()=>queueJob(C));const B=new ReactiveEffect(m,k);e?n?C():A=B.run():o==="post"?queuePostRenderEffect(B.run.bind(B),d&&d.suspense):B.run();const D=()=>{B.stop(),d&&d.scope&&remove(d.scope.effects,B)};return E&&E.push(D),D}function instanceWatch(t,e,n){const a=this.proxy,o=isString$6(t)?t.includes(".")?createPathGetter(a,t):()=>a[t]:t.bind(a,a);let l;isFunction$4(e)?l=e:(l=e.handler,n=e);const u=currentInstance;setCurrentInstance(this);const d=doWatch(o,l.bind(a),n);return u?setCurrentInstance(u):unsetCurrentInstance(),d}function createPathGetter(t,e){const n=e.split(".");return()=>{let a=t;for(let o=0;o<n.length&&a;o++)a=a[n[o]];return a}}function traverse(t,e){if(!isObject$4(t)||t.__v_skip||(e=e||new Set,e.has(t)))return t;if(e.add(t),isRef(t))traverse(t.value,e);else if(isArray$9(t))for(let n=0;n<t.length;n++)traverse(t[n],e);else if(isSet$4(t)||isMap$4(t))t.forEach(n=>{traverse(n,e)});else if(isPlainObject$2(t))for(const n in t)traverse(t[n],e);return t}function useTransitionState(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{t.isMounted=!0}),onBeforeUnmount(()=>{t.isUnmounting=!0}),t}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(t,{slots:e}){const n=getCurrentInstance$1(),a=useTransitionState();let o;return()=>{const l=e.default&&getTransitionRawChildren(e.default(),!0);if(!l||!l.length)return;let u=l[0];if(l.length>1){for(const C of l)if(C.type!==Comment){u=C;break}}const d=toRaw(t),{mode:m}=d;if(a.isLeaving)return emptyPlaceholder(u);const y=getKeepAliveChild(u);if(!y)return emptyPlaceholder(u);const b=resolveTransitionHooks(y,d,a,n);setTransitionHooks(y,b);const _=n.subTree,w=_&&getKeepAliveChild(_);let E=!1;const{getTransitionKey:A}=y.type;if(A){const C=A();o===void 0?o=C:C!==o&&(o=C,E=!0)}if(w&&w.type!==Comment&&(!isSameVNodeType(y,w)||E)){const C=resolveTransitionHooks(w,d,a,n);if(setTransitionHooks(w,C),m==="out-in")return a.isLeaving=!0,C.afterLeave=()=>{a.isLeaving=!1,n.update.active!==!1&&n.update()},emptyPlaceholder(u);m==="in-out"&&y.type!==Comment&&(C.delayLeave=(k,B,D)=>{const q=getLeavingNodesForType(a,w);q[String(w.key)]=w,k._leaveCb=()=>{B(),k._leaveCb=void 0,delete b.delayedLeave},b.delayedLeave=D})}return u}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(t,e){const{leavingVNodes:n}=t;let a=n.get(e.type);return a||(a=Object.create(null),n.set(e.type,a)),a}function resolveTransitionHooks(t,e,n,a){const{appear:o,mode:l,persisted:u=!1,onBeforeEnter:d,onEnter:m,onAfterEnter:y,onEnterCancelled:b,onBeforeLeave:_,onLeave:w,onAfterLeave:E,onLeaveCancelled:A,onBeforeAppear:C,onAppear:k,onAfterAppear:B,onAppearCancelled:D}=e,q=String(t.key),j=getLeavingNodesForType(n,t),J=(Z,Q)=>{Z&&callWithAsyncErrorHandling(Z,a,9,Q)},Y=(Z,Q)=>{const oe=Q[1];J(Z,Q),isArray$9(Z)?Z.every(ae=>ae.length<=1)&&oe():Z.length<=1&&oe()},L={mode:l,persisted:u,beforeEnter(Z){let Q=d;if(!n.isMounted)if(o)Q=C||d;else return;Z._leaveCb&&Z._leaveCb(!0);const oe=j[q];oe&&isSameVNodeType(t,oe)&&oe.el._leaveCb&&oe.el._leaveCb(),J(Q,[Z])},enter(Z){let Q=m,oe=y,ae=b;if(!n.isMounted)if(o)Q=k||m,oe=B||y,ae=D||b;else return;let U=!1;const I=Z._enterCb=x=>{U||(U=!0,x?J(ae,[Z]):J(oe,[Z]),L.delayedLeave&&L.delayedLeave(),Z._enterCb=void 0)};Q?Y(Q,[Z,I]):I()},leave(Z,Q){const oe=String(t.key);if(Z._enterCb&&Z._enterCb(!0),n.isUnmounting)return Q();J(_,[Z]);let ae=!1;const U=Z._leaveCb=I=>{ae||(ae=!0,Q(),I?J(A,[Z]):J(E,[Z]),Z._leaveCb=void 0,j[oe]===t&&delete j[oe])};j[oe]=t,w?Y(w,[Z,U]):U()},clone(Z){return resolveTransitionHooks(Z,e,n,a)}};return L}function emptyPlaceholder(t){if(isKeepAlive(t))return t=cloneVNode(t),t.children=null,t}function getKeepAliveChild(t){return isKeepAlive(t)?t.children?t.children[0]:void 0:t}function setTransitionHooks(t,e){t.shapeFlag&6&&t.component?setTransitionHooks(t.component.subTree,e):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function getTransitionRawChildren(t,e=!1,n){let a=[],o=0;for(let l=0;l<t.length;l++){let u=t[l];const d=n==null?u.key:String(n)+String(u.key!=null?u.key:l);u.type===Fragment?(u.patchFlag&128&&o++,a=a.concat(getTransitionRawChildren(u.children,e,d))):(e||u.type!==Comment)&&a.push(d!=null?cloneVNode(u,{key:d}):u)}if(o>1)for(let l=0;l<a.length;l++)a[l].patchFlag=-2;return a}function defineComponent$1(t){return isFunction$4(t)?{setup:t,name:t.name}:t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,n=currentInstance){const a=t.__wdc||(t.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return t()});if(injectHook(e,a,n),n){let o=n.parent;for(;o&&o.parent;)isKeepAlive(o.parent.vnode)&&injectToKeepAliveRoot(a,e,n,o),o=o.parent}}function injectToKeepAliveRoot(t,e,n,a){const o=injectHook(e,t,a,!0);onUnmounted(()=>{remove(a[e],o)},n)}function injectHook(t,e,n=currentInstance,a=!1){if(n){const o=n[t]||(n[t]=[]),l=e.__weh||(e.__weh=(...u)=>{if(n.isUnmounted)return;pauseTracking(),setCurrentInstance(n);const d=callWithAsyncErrorHandling(e,n,t,u);return unsetCurrentInstance(),resetTracking(),d});return a?o.unshift(l):o.push(l),l}}const createHook=t=>(e,n=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...a)=>e(...a),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}function withDirectives(t,e){const n=currentRenderingInstance;if(n===null)return t;const a=getExposeProxy(n)||n.proxy,o=t.dirs||(t.dirs=[]);for(let l=0;l<e.length;l++){let[u,d,m,y=EMPTY_OBJ]=e[l];u&&(isFunction$4(u)&&(u={mounted:u,updated:u}),u.deep&&traverse(d),o.push({dir:u,instance:a,value:d,oldValue:void 0,arg:m,modifiers:y}))}return t}function invokeDirectiveHook(t,e,n,a){const o=t.dirs,l=e&&e.dirs;for(let u=0;u<o.length;u++){const d=o[u];l&&(d.oldValue=l[u].value);let m=d.dir[a];m&&(pauseTracking(),callWithAsyncErrorHandling(m,n,8,[t.el,d,t,e]),resetTracking())}}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(t,e){return resolveAsset(COMPONENTS,t,!0,e)||t}const NULL_DYNAMIC_COMPONENT=Symbol();function resolveDynamicComponent(t){return isString$6(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveDirective(t){return resolveAsset(DIRECTIVES,t)}function resolveAsset(t,e,n=!0,a=!1){const o=currentRenderingInstance||currentInstance;if(o){const l=o.type;if(t===COMPONENTS){const d=getComponentName(l,!1);if(d&&(d===e||d===camelize(e)||d===capitalize$1(camelize(e))))return l}const u=resolve$1(o[t]||l[t],e)||resolve$1(o.appContext[t],e);return!u&&a?l:u}}function resolve$1(t,e){return t&&(t[e]||t[camelize(e)]||t[capitalize$1(camelize(e))])}function renderList(t,e,n,a){let o;const l=n&&n[a];if(isArray$9(t)||isString$6(t)){o=new Array(t.length);for(let u=0,d=t.length;u<d;u++)o[u]=e(t[u],u,void 0,l&&l[u])}else if(typeof t=="number"){o=new Array(t);for(let u=0;u<t;u++)o[u]=e(u+1,u,void 0,l&&l[u])}else if(isObject$4(t))if(t[Symbol.iterator])o=Array.from(t,(u,d)=>e(u,d,void 0,l&&l[d]));else{const u=Object.keys(t);o=new Array(u.length);for(let d=0,m=u.length;d<m;d++){const y=u[d];o[d]=e(t[y],y,d,l&&l[d])}}else o=[];return n&&(n[a]=o),o}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$1(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>queueJob(t.update)),$nextTick:t=>t.n||(t.n=nextTick$3.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn$4(t,e),PublicInstanceProxyHandlers={get({_:t},e){const{ctx:n,setupState:a,data:o,props:l,accessCache:u,type:d,appContext:m}=t;let y;if(e[0]!=="$"){const E=u[e];if(E!==void 0)switch(E){case 1:return a[e];case 2:return o[e];case 4:return n[e];case 3:return l[e]}else{if(hasSetupBinding(a,e))return u[e]=1,a[e];if(o!==EMPTY_OBJ&&hasOwn$4(o,e))return u[e]=2,o[e];if((y=t.propsOptions[0])&&hasOwn$4(y,e))return u[e]=3,l[e];if(n!==EMPTY_OBJ&&hasOwn$4(n,e))return u[e]=4,n[e];shouldCacheAccess&&(u[e]=0)}}const b=publicPropertiesMap[e];let _,w;if(b)return e==="$attrs"&&track(t,"get",e),b(t);if((_=d.__cssModules)&&(_=_[e]))return _;if(n!==EMPTY_OBJ&&hasOwn$4(n,e))return u[e]=4,n[e];if(w=m.config.globalProperties,hasOwn$4(w,e))return w[e]},set({_:t},e,n){const{data:a,setupState:o,ctx:l}=t;return hasSetupBinding(o,e)?(o[e]=n,!0):a!==EMPTY_OBJ&&hasOwn$4(a,e)?(a[e]=n,!0):hasOwn$4(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(l[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:a,appContext:o,propsOptions:l}},u){let d;return!!n[u]||t!==EMPTY_OBJ&&hasOwn$4(t,u)||hasSetupBinding(e,u)||(d=l[0])&&hasOwn$4(d,u)||hasOwn$4(a,u)||hasOwn$4(publicPropertiesMap,u)||hasOwn$4(o.config.globalProperties,u)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hasOwn$4(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),n=t.proxy,a=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,t,"bc");const{data:o,computed:l,methods:u,watch:d,provide:m,inject:y,created:b,beforeMount:_,mounted:w,beforeUpdate:E,updated:A,activated:C,deactivated:k,beforeDestroy:B,beforeUnmount:D,destroyed:q,unmounted:j,render:J,renderTracked:Y,renderTriggered:L,errorCaptured:Z,serverPrefetch:Q,expose:oe,inheritAttrs:ae,components:U,directives:I,filters:x}=e;if(y&&resolveInjections(y,a,null,t.appContext.config.unwrapInjectedRef),u)for(const O in u){const z=u[O];isFunction$4(z)&&(a[O]=z.bind(n))}if(o){const O=o.call(n,n);isObject$4(O)&&(t.data=reactive(O))}if(shouldCacheAccess=!0,l)for(const O in l){const z=l[O],X=isFunction$4(z)?z.bind(n,n):isFunction$4(z.get)?z.get.bind(n,n):NOOP,H=!isFunction$4(z)&&isFunction$4(z.set)?z.set.bind(n):NOOP,P=computed({get:X,set:H});Object.defineProperty(a,O,{enumerable:!0,configurable:!0,get:()=>P.value,set:S=>P.value=S})}if(d)for(const O in d)createWatcher(d[O],a,n,O);if(m){const O=isFunction$4(m)?m.call(n):m;Reflect.ownKeys(O).forEach(z=>{provide(z,O[z])})}b&&callHook$1(b,t,"c");function M(O,z){isArray$9(z)?z.forEach(X=>O(X.bind(n))):z&&O(z.bind(n))}if(M(onBeforeMount,_),M(onMounted,w),M(onBeforeUpdate,E),M(onUpdated,A),M(onActivated,C),M(onDeactivated,k),M(onErrorCaptured,Z),M(onRenderTracked,Y),M(onRenderTriggered,L),M(onBeforeUnmount,D),M(onUnmounted,j),M(onServerPrefetch,Q),isArray$9(oe))if(oe.length){const O=t.exposed||(t.exposed={});oe.forEach(z=>{Object.defineProperty(O,z,{get:()=>n[z],set:X=>n[z]=X})})}else t.exposed||(t.exposed={});J&&t.render===NOOP&&(t.render=J),ae!=null&&(t.inheritAttrs=ae),U&&(t.components=U),I&&(t.directives=I)}function resolveInjections(t,e,n=NOOP,a=!1){isArray$9(t)&&(t=normalizeInject(t));for(const o in t){const l=t[o];let u;isObject$4(l)?"default"in l?u=inject$1(l.from||o,l.default,!0):u=inject$1(l.from||o):u=inject$1(l),isRef(u)&&a?Object.defineProperty(e,o,{enumerable:!0,configurable:!0,get:()=>u.value,set:d=>u.value=d}):e[o]=u}}function callHook$1(t,e,n){callWithAsyncErrorHandling(isArray$9(t)?t.map(a=>a.bind(e.proxy)):t.bind(e.proxy),e,n)}function createWatcher(t,e,n,a){const o=a.includes(".")?createPathGetter(n,a):()=>n[a];if(isString$6(t)){const l=e[t];isFunction$4(l)&&watch(o,l)}else if(isFunction$4(t))watch(o,t.bind(n));else if(isObject$4(t))if(isArray$9(t))t.forEach(l=>createWatcher(l,e,n,a));else{const l=isFunction$4(t.handler)?t.handler.bind(n):e[t.handler];isFunction$4(l)&&watch(o,l,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:n,extends:a}=e,{mixins:o,optionsCache:l,config:{optionMergeStrategies:u}}=t.appContext,d=l.get(e);let m;return d?m=d:!o.length&&!n&&!a?m=e:(m={},o.length&&o.forEach(y=>mergeOptions$3(m,y,u,!0)),mergeOptions$3(m,e,u)),isObject$4(e)&&l.set(e,m),m}function mergeOptions$3(t,e,n,a=!1){const{mixins:o,extends:l}=e;l&&mergeOptions$3(t,l,n,!0),o&&o.forEach(u=>mergeOptions$3(t,u,n,!0));for(const u in e)if(!(a&&u==="expose")){const d=internalOptionMergeStrats[u]||n&&n[u];t[u]=d?d(t[u],e[u]):e[u]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend$1(isFunction$4(t)?t.call(this,this):t,isFunction$4(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray$9(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend$1(extend$1(Object.create(null),t),e):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const n=extend$1(Object.create(null),t);for(const a in e)n[a]=mergeAsArray(t[a],e[a]);return n}function initProps(t,e,n,a=!1){const o={},l={};def(l,InternalObjectKey,1),t.propsDefaults=Object.create(null),setFullProps(t,e,o,l);for(const u in t.propsOptions[0])u in o||(o[u]=void 0);n?t.props=a?o:shallowReactive(o):t.type.props?t.props=o:t.props=l,t.attrs=l}function updateProps(t,e,n,a){const{props:o,attrs:l,vnode:{patchFlag:u}}=t,d=toRaw(o),[m]=t.propsOptions;let y=!1;if((a||u>0)&&!(u&16)){if(u&8){const b=t.vnode.dynamicProps;for(let _=0;_<b.length;_++){let w=b[_];if(isEmitListener(t.emitsOptions,w))continue;const E=e[w];if(m)if(hasOwn$4(l,w))E!==l[w]&&(l[w]=E,y=!0);else{const A=camelize(w);o[A]=resolvePropValue(m,d,A,E,t,!1)}else E!==l[w]&&(l[w]=E,y=!0)}}}else{setFullProps(t,e,o,l)&&(y=!0);let b;for(const _ in d)(!e||!hasOwn$4(e,_)&&((b=hyphenate(_))===_||!hasOwn$4(e,b)))&&(m?n&&(n[_]!==void 0||n[b]!==void 0)&&(o[_]=resolvePropValue(m,d,_,void 0,t,!0)):delete o[_]);if(l!==d)for(const _ in l)(!e||!hasOwn$4(e,_))&&(delete l[_],y=!0)}y&&trigger(t,"set","$attrs")}function setFullProps(t,e,n,a){const[o,l]=t.propsOptions;let u=!1,d;if(e)for(let m in e){if(isReservedProp(m))continue;const y=e[m];let b;o&&hasOwn$4(o,b=camelize(m))?!l||!l.includes(b)?n[b]=y:(d||(d={}))[b]=y:isEmitListener(t.emitsOptions,m)||(!(m in a)||y!==a[m])&&(a[m]=y,u=!0)}if(l){const m=toRaw(n),y=d||EMPTY_OBJ;for(let b=0;b<l.length;b++){const _=l[b];n[_]=resolvePropValue(o,m,_,y[_],t,!hasOwn$4(y,_))}}return u}function resolvePropValue(t,e,n,a,o,l){const u=t[n];if(u!=null){const d=hasOwn$4(u,"default");if(d&&a===void 0){const m=u.default;if(u.type!==Function&&isFunction$4(m)){const{propsDefaults:y}=o;n in y?a=y[n]:(setCurrentInstance(o),a=y[n]=m.call(null,e),unsetCurrentInstance())}else a=m}u[0]&&(l&&!d?a=!1:u[1]&&(a===""||a===hyphenate(n))&&(a=!0))}return a}function normalizePropsOptions(t,e,n=!1){const a=e.propsCache,o=a.get(t);if(o)return o;const l=t.props,u={},d=[];let m=!1;if(!isFunction$4(t)){const b=_=>{m=!0;const[w,E]=normalizePropsOptions(_,e,!0);extend$1(u,w),E&&d.push(...E)};!n&&e.mixins.length&&e.mixins.forEach(b),t.extends&&b(t.extends),t.mixins&&t.mixins.forEach(b)}if(!l&&!m)return isObject$4(t)&&a.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$9(l))for(let b=0;b<l.length;b++){const _=camelize(l[b]);validatePropName(_)&&(u[_]=EMPTY_OBJ)}else if(l)for(const b in l){const _=camelize(b);if(validatePropName(_)){const w=l[b],E=u[_]=isArray$9(w)||isFunction$4(w)?{type:w}:Object.assign({},w);if(E){const A=getTypeIndex(Boolean,E.type),C=getTypeIndex(String,E.type);E[0]=A>-1,E[1]=C<0||A<C,(A>-1||hasOwn$4(E,"default"))&&d.push(_)}}}const y=[u,d];return isObject$4(t)&&a.set(t,y),y}function validatePropName(t){return t[0]!=="$"}function getType(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:t===null?"null":""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray$9(e)?e.findIndex(n=>isSameType(n,t)):isFunction$4(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$9(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,e,n)=>{if(e._n)return e;const a=withCtx((...o)=>normalizeSlotValue(e(...o)),n);return a._c=!1,a},normalizeObjectSlots=(t,e,n)=>{const a=t._ctx;for(const o in t){if(isInternalKey(o))continue;const l=t[o];if(isFunction$4(l))e[o]=normalizeSlot$1(o,l,a);else if(l!=null){const u=normalizeSlotValue(l);e[o]=()=>u}}},normalizeVNodeSlots=(t,e)=>{const n=normalizeSlotValue(e);t.slots.default=()=>n},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=toRaw(e),def(e,"_",n)):normalizeObjectSlots(e,t.slots={})}else t.slots={},e&&normalizeVNodeSlots(t,e);def(t.slots,InternalObjectKey,1)},updateSlots=(t,e,n)=>{const{vnode:a,slots:o}=t;let l=!0,u=EMPTY_OBJ;if(a.shapeFlag&32){const d=e._;d?n&&d===1?l=!1:(extend$1(o,e),!n&&d===1&&delete o._):(l=!e.$stable,normalizeObjectSlots(e,o)),u=e}else e&&(normalizeVNodeSlots(t,e),u={default:1});if(l)for(const d in o)!isInternalKey(d)&&!(d in u)&&delete o[d]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid=0;function createAppAPI(t,e){return function(a,o=null){isFunction$4(a)||(a=Object.assign({},a)),o!=null&&!isObject$4(o)&&(o=null);const l=createAppContext(),u=new Set;let d=!1;const m=l.app={_uid:uid++,_component:a,_props:o,_container:null,_context:l,_instance:null,version:version$m,get config(){return l.config},set config(y){},use(y,...b){return u.has(y)||(y&&isFunction$4(y.install)?(u.add(y),y.install(m,...b)):isFunction$4(y)&&(u.add(y),y(m,...b))),m},mixin(y){return l.mixins.includes(y)||l.mixins.push(y),m},component(y,b){return b?(l.components[y]=b,m):l.components[y]},directive(y,b){return b?(l.directives[y]=b,m):l.directives[y]},mount(y,b,_){if(!d){const w=createVNode(a,o);return w.appContext=l,b&&e?e(w,y):t(w,y,_),d=!0,m._container=y,y.__vue_app__=m,getExposeProxy(w.component)||w.component.proxy}},unmount(){d&&(t(null,m._container),delete m._container.__vue_app__)},provide(y,b){return l.provides[y]=b,m}};return m}}function setRef(t,e,n,a,o=!1){if(isArray$9(t)){t.forEach((w,E)=>setRef(w,e&&(isArray$9(e)?e[E]:e),n,a,o));return}if(isAsyncWrapper(a)&&!o)return;const l=a.shapeFlag&4?getExposeProxy(a.component)||a.component.proxy:a.el,u=o?null:l,{i:d,r:m}=t,y=e&&e.r,b=d.refs===EMPTY_OBJ?d.refs={}:d.refs,_=d.setupState;if(y!=null&&y!==m&&(isString$6(y)?(b[y]=null,hasOwn$4(_,y)&&(_[y]=null)):isRef(y)&&(y.value=null)),isFunction$4(m))callWithErrorHandling(m,d,12,[u,b]);else{const w=isString$6(m),E=isRef(m);if(w||E){const A=()=>{if(t.f){const C=w?hasOwn$4(_,m)?_[m]:b[m]:m.value;o?isArray$9(C)&&remove(C,l):isArray$9(C)?C.includes(l)||C.push(l):w?(b[m]=[l],hasOwn$4(_,m)&&(_[m]=b[m])):(m.value=[l],t.k&&(b[t.k]=m.value))}else w?(b[m]=u,hasOwn$4(_,m)&&(_[m]=u)):E&&(m.value=u,t.k&&(b[t.k]=u))};u?(A.id=-1,queuePostRenderEffect(A,n)):A()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const n=getGlobalThis$1();n.__VUE__=!0;const{insert:a,remove:o,patchProp:l,createElement:u,createText:d,createComment:m,setText:y,setElementText:b,parentNode:_,nextSibling:w,setScopeId:E=NOOP,insertStaticContent:A}=t,C=(re,me,te,ve=null,Se=null,be=null,_e=!1,ye=null,$e=!!me.dynamicChildren)=>{if(re===me)return;re&&!isSameVNodeType(re,me)&&(ve=le(re),S(re,Se,be,!0),re=null),me.patchFlag===-2&&($e=!1,me.dynamicChildren=null);const{type:Ie,ref:Be,shapeFlag:Me}=me;switch(Ie){case Text:k(re,me,te,ve);break;case Comment:B(re,me,te,ve);break;case Static:re==null&&D(me,te,ve,_e);break;case Fragment:U(re,me,te,ve,Se,be,_e,ye,$e);break;default:Me&1?J(re,me,te,ve,Se,be,_e,ye,$e):Me&6?I(re,me,te,ve,Se,be,_e,ye,$e):(Me&64||Me&128)&&Ie.process(re,me,te,ve,Se,be,_e,ye,$e,pe)}Be!=null&&Se&&setRef(Be,re&&re.ref,be,me||re,!me)},k=(re,me,te,ve)=>{if(re==null)a(me.el=d(me.children),te,ve);else{const Se=me.el=re.el;me.children!==re.children&&y(Se,me.children)}},B=(re,me,te,ve)=>{re==null?a(me.el=m(me.children||""),te,ve):me.el=re.el},D=(re,me,te,ve)=>{[re.el,re.anchor]=A(re.children,me,te,ve,re.el,re.anchor)},q=({el:re,anchor:me},te,ve)=>{let Se;for(;re&&re!==me;)Se=w(re),a(re,te,ve),re=Se;a(me,te,ve)},j=({el:re,anchor:me})=>{let te;for(;re&&re!==me;)te=w(re),o(re),re=te;o(me)},J=(re,me,te,ve,Se,be,_e,ye,$e)=>{_e=_e||me.type==="svg",re==null?Y(me,te,ve,Se,be,_e,ye,$e):Q(re,me,Se,be,_e,ye,$e)},Y=(re,me,te,ve,Se,be,_e,ye)=>{let $e,Ie;const{type:Be,props:Me,shapeFlag:Fe,transition:Ve,dirs:Oe}=re;if($e=re.el=u(re.type,be,Me&&Me.is,Me),Fe&8?b($e,re.children):Fe&16&&Z(re.children,$e,null,ve,Se,be&&Be!=="foreignObject",_e,ye),Oe&&invokeDirectiveHook(re,null,ve,"created"),Me){for(const ie in Me)ie!=="value"&&!isReservedProp(ie)&&l($e,ie,null,Me[ie],be,re.children,ve,Se,fe);"value"in Me&&l($e,"value",null,Me.value),(Ie=Me.onVnodeBeforeMount)&&invokeVNodeHook(Ie,ve,re)}L($e,re,re.scopeId,_e,ve),Oe&&invokeDirectiveHook(re,null,ve,"beforeMount");const ge=(!Se||Se&&!Se.pendingBranch)&&Ve&&!Ve.persisted;ge&&Ve.beforeEnter($e),a($e,me,te),((Ie=Me&&Me.onVnodeMounted)||ge||Oe)&&queuePostRenderEffect(()=>{Ie&&invokeVNodeHook(Ie,ve,re),ge&&Ve.enter($e),Oe&&invokeDirectiveHook(re,null,ve,"mounted")},Se)},L=(re,me,te,ve,Se)=>{if(te&&E(re,te),ve)for(let be=0;be<ve.length;be++)E(re,ve[be]);if(Se){let be=Se.subTree;if(me===be){const _e=Se.vnode;L(re,_e,_e.scopeId,_e.slotScopeIds,Se.parent)}}},Z=(re,me,te,ve,Se,be,_e,ye,$e=0)=>{for(let Ie=$e;Ie<re.length;Ie++){const Be=re[Ie]=ye?cloneIfMounted(re[Ie]):normalizeVNode(re[Ie]);C(null,Be,me,te,ve,Se,be,_e,ye)}},Q=(re,me,te,ve,Se,be,_e)=>{const ye=me.el=re.el;let{patchFlag:$e,dynamicChildren:Ie,dirs:Be}=me;$e|=re.patchFlag&16;const Me=re.props||EMPTY_OBJ,Fe=me.props||EMPTY_OBJ;let Ve;te&&toggleRecurse(te,!1),(Ve=Fe.onVnodeBeforeUpdate)&&invokeVNodeHook(Ve,te,me,re),Be&&invokeDirectiveHook(me,re,te,"beforeUpdate"),te&&toggleRecurse(te,!0);const Oe=Se&&me.type!=="foreignObject";if(Ie?oe(re.dynamicChildren,Ie,ye,te,ve,Oe,be):_e||z(re,me,ye,null,te,ve,Oe,be,!1),$e>0){if($e&16)ae(ye,me,Me,Fe,te,ve,Se);else if($e&2&&Me.class!==Fe.class&&l(ye,"class",null,Fe.class,Se),$e&4&&l(ye,"style",Me.style,Fe.style,Se),$e&8){const ge=me.dynamicProps;for(let ie=0;ie<ge.length;ie++){const he=ge[ie],we=Me[he],Re=Fe[he];(Re!==we||he==="value")&&l(ye,he,we,Re,Se,re.children,te,ve,fe)}}$e&1&&re.children!==me.children&&b(ye,me.children)}else!_e&&Ie==null&&ae(ye,me,Me,Fe,te,ve,Se);((Ve=Fe.onVnodeUpdated)||Be)&&queuePostRenderEffect(()=>{Ve&&invokeVNodeHook(Ve,te,me,re),Be&&invokeDirectiveHook(me,re,te,"updated")},ve)},oe=(re,me,te,ve,Se,be,_e)=>{for(let ye=0;ye<me.length;ye++){const $e=re[ye],Ie=me[ye],Be=$e.el&&($e.type===Fragment||!isSameVNodeType($e,Ie)||$e.shapeFlag&70)?_($e.el):te;C($e,Ie,Be,null,ve,Se,be,_e,!0)}},ae=(re,me,te,ve,Se,be,_e)=>{if(te!==ve){if(te!==EMPTY_OBJ)for(const ye in te)!isReservedProp(ye)&&!(ye in ve)&&l(re,ye,te[ye],null,_e,me.children,Se,be,fe);for(const ye in ve){if(isReservedProp(ye))continue;const $e=ve[ye],Ie=te[ye];$e!==Ie&&ye!=="value"&&l(re,ye,Ie,$e,_e,me.children,Se,be,fe)}"value"in ve&&l(re,"value",te.value,ve.value)}},U=(re,me,te,ve,Se,be,_e,ye,$e)=>{const Ie=me.el=re?re.el:d(""),Be=me.anchor=re?re.anchor:d("");let{patchFlag:Me,dynamicChildren:Fe,slotScopeIds:Ve}=me;Ve&&(ye=ye?ye.concat(Ve):Ve),re==null?(a(Ie,te,ve),a(Be,te,ve),Z(me.children,te,Be,Se,be,_e,ye,$e)):Me>0&&Me&64&&Fe&&re.dynamicChildren?(oe(re.dynamicChildren,Fe,te,Se,be,_e,ye),(me.key!=null||Se&&me===Se.subTree)&&traverseStaticChildren(re,me,!0)):z(re,me,te,Be,Se,be,_e,ye,$e)},I=(re,me,te,ve,Se,be,_e,ye,$e)=>{me.slotScopeIds=ye,re==null?me.shapeFlag&512?Se.ctx.activate(me,te,ve,_e,$e):x(me,te,ve,Se,be,_e,$e):T(re,me,$e)},x=(re,me,te,ve,Se,be,_e)=>{const ye=re.component=createComponentInstance(re,ve,Se);if(isKeepAlive(re)&&(ye.ctx.renderer=pe),setupComponent(ye),ye.asyncDep){if(Se&&Se.registerDep(ye,M),!re.el){const $e=ye.subTree=createVNode(Comment);B(null,$e,me,te)}return}M(ye,re,me,te,Se,be,_e)},T=(re,me,te)=>{const ve=me.component=re.component;if(shouldUpdateComponent(re,me,te))if(ve.asyncDep&&!ve.asyncResolved){O(ve,me,te);return}else ve.next=me,invalidateJob(ve.update),ve.update();else me.el=re.el,ve.vnode=me},M=(re,me,te,ve,Se,be,_e)=>{const ye=()=>{if(re.isMounted){let{next:Be,bu:Me,u:Fe,parent:Ve,vnode:Oe}=re,ge=Be,ie;toggleRecurse(re,!1),Be?(Be.el=Oe.el,O(re,Be,_e)):Be=Oe,Me&&invokeArrayFns(Me),(ie=Be.props&&Be.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ie,Ve,Be,Oe),toggleRecurse(re,!0);const he=renderComponentRoot(re),we=re.subTree;re.subTree=he,C(we,he,_(we.el),le(we),re,Se,be),Be.el=he.el,ge===null&&updateHOCHostEl(re,he.el),Fe&&queuePostRenderEffect(Fe,Se),(ie=Be.props&&Be.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ie,Ve,Be,Oe),Se)}else{let Be;const{el:Me,props:Fe}=me,{bm:Ve,m:Oe,parent:ge}=re,ie=isAsyncWrapper(me);if(toggleRecurse(re,!1),Ve&&invokeArrayFns(Ve),!ie&&(Be=Fe&&Fe.onVnodeBeforeMount)&&invokeVNodeHook(Be,ge,me),toggleRecurse(re,!0),Me&&de){const he=()=>{re.subTree=renderComponentRoot(re),de(Me,re.subTree,re,Se,null)};ie?me.type.__asyncLoader().then(()=>!re.isUnmounted&&he()):he()}else{const he=re.subTree=renderComponentRoot(re);C(null,he,te,ve,re,Se,be),me.el=he.el}if(Oe&&queuePostRenderEffect(Oe,Se),!ie&&(Be=Fe&&Fe.onVnodeMounted)){const he=me;queuePostRenderEffect(()=>invokeVNodeHook(Be,ge,he),Se)}(me.shapeFlag&256||ge&&isAsyncWrapper(ge.vnode)&&ge.vnode.shapeFlag&256)&&re.a&&queuePostRenderEffect(re.a,Se),re.isMounted=!0,me=te=ve=null}},$e=re.effect=new ReactiveEffect(ye,()=>queueJob(Ie),re.scope),Ie=re.update=()=>$e.run();Ie.id=re.uid,toggleRecurse(re,!0),Ie()},O=(re,me,te)=>{me.component=re;const ve=re.vnode.props;re.vnode=me,re.next=null,updateProps(re,me.props,ve,te),updateSlots(re,me.children,te),pauseTracking(),flushPreFlushCbs(),resetTracking()},z=(re,me,te,ve,Se,be,_e,ye,$e=!1)=>{const Ie=re&&re.children,Be=re?re.shapeFlag:0,Me=me.children,{patchFlag:Fe,shapeFlag:Ve}=me;if(Fe>0){if(Fe&128){H(Ie,Me,te,ve,Se,be,_e,ye,$e);return}else if(Fe&256){X(Ie,Me,te,ve,Se,be,_e,ye,$e);return}}Ve&8?(Be&16&&fe(Ie,Se,be),Me!==Ie&&b(te,Me)):Be&16?Ve&16?H(Ie,Me,te,ve,Se,be,_e,ye,$e):fe(Ie,Se,be,!0):(Be&8&&b(te,""),Ve&16&&Z(Me,te,ve,Se,be,_e,ye,$e))},X=(re,me,te,ve,Se,be,_e,ye,$e)=>{re=re||EMPTY_ARR,me=me||EMPTY_ARR;const Ie=re.length,Be=me.length,Me=Math.min(Ie,Be);let Fe;for(Fe=0;Fe<Me;Fe++){const Ve=me[Fe]=$e?cloneIfMounted(me[Fe]):normalizeVNode(me[Fe]);C(re[Fe],Ve,te,null,Se,be,_e,ye,$e)}Ie>Be?fe(re,Se,be,!0,!1,Me):Z(me,te,ve,Se,be,_e,ye,$e,Me)},H=(re,me,te,ve,Se,be,_e,ye,$e)=>{let Ie=0;const Be=me.length;let Me=re.length-1,Fe=Be-1;for(;Ie<=Me&&Ie<=Fe;){const Ve=re[Ie],Oe=me[Ie]=$e?cloneIfMounted(me[Ie]):normalizeVNode(me[Ie]);if(isSameVNodeType(Ve,Oe))C(Ve,Oe,te,null,Se,be,_e,ye,$e);else break;Ie++}for(;Ie<=Me&&Ie<=Fe;){const Ve=re[Me],Oe=me[Fe]=$e?cloneIfMounted(me[Fe]):normalizeVNode(me[Fe]);if(isSameVNodeType(Ve,Oe))C(Ve,Oe,te,null,Se,be,_e,ye,$e);else break;Me--,Fe--}if(Ie>Me){if(Ie<=Fe){const Ve=Fe+1,Oe=Ve<Be?me[Ve].el:ve;for(;Ie<=Fe;)C(null,me[Ie]=$e?cloneIfMounted(me[Ie]):normalizeVNode(me[Ie]),te,Oe,Se,be,_e,ye,$e),Ie++}}else if(Ie>Fe)for(;Ie<=Me;)S(re[Ie],Se,be,!0),Ie++;else{const Ve=Ie,Oe=Ie,ge=new Map;for(Ie=Oe;Ie<=Fe;Ie++){const We=me[Ie]=$e?cloneIfMounted(me[Ie]):normalizeVNode(me[Ie]);We.key!=null&&ge.set(We.key,Ie)}let ie,he=0;const we=Fe-Oe+1;let Re=!1,De=0;const Le=new Array(we);for(Ie=0;Ie<we;Ie++)Le[Ie]=0;for(Ie=Ve;Ie<=Me;Ie++){const We=re[Ie];if(he>=we){S(We,Se,be,!0);continue}let Ge;if(We.key!=null)Ge=ge.get(We.key);else for(ie=Oe;ie<=Fe;ie++)if(Le[ie-Oe]===0&&isSameVNodeType(We,me[ie])){Ge=ie;break}Ge===void 0?S(We,Se,be,!0):(Le[Ge-Oe]=Ie+1,Ge>=De?De=Ge:Re=!0,C(We,me[Ge],te,null,Se,be,_e,ye,$e),he++)}const tt=Re?getSequence(Le):EMPTY_ARR;for(ie=tt.length-1,Ie=we-1;Ie>=0;Ie--){const We=Oe+Ie,Ge=me[We],_t=We+1<Be?me[We+1].el:ve;Le[Ie]===0?C(null,Ge,te,_t,Se,be,_e,ye,$e):Re&&(ie<0||Ie!==tt[ie]?P(Ge,te,_t,2):ie--)}}},P=(re,me,te,ve,Se=null)=>{const{el:be,type:_e,transition:ye,children:$e,shapeFlag:Ie}=re;if(Ie&6){P(re.component.subTree,me,te,ve);return}if(Ie&128){re.suspense.move(me,te,ve);return}if(Ie&64){_e.move(re,me,te,pe);return}if(_e===Fragment){a(be,me,te);for(let Me=0;Me<$e.length;Me++)P($e[Me],me,te,ve);a(re.anchor,me,te);return}if(_e===Static){q(re,me,te);return}if(ve!==2&&Ie&1&&ye)if(ve===0)ye.beforeEnter(be),a(be,me,te),queuePostRenderEffect(()=>ye.enter(be),Se);else{const{leave:Me,delayLeave:Fe,afterLeave:Ve}=ye,Oe=()=>a(be,me,te),ge=()=>{Me(be,()=>{Oe(),Ve&&Ve()})};Fe?Fe(be,Oe,ge):ge()}else a(be,me,te)},S=(re,me,te,ve=!1,Se=!1)=>{const{type:be,props:_e,ref:ye,children:$e,dynamicChildren:Ie,shapeFlag:Be,patchFlag:Me,dirs:Fe}=re;if(ye!=null&&setRef(ye,null,te,re,!0),Be&256){me.ctx.deactivate(re);return}const Ve=Be&1&&Fe,Oe=!isAsyncWrapper(re);let ge;if(Oe&&(ge=_e&&_e.onVnodeBeforeUnmount)&&invokeVNodeHook(ge,me,re),Be&6)ee(re.component,te,ve);else{if(Be&128){re.suspense.unmount(te,ve);return}Ve&&invokeDirectiveHook(re,null,me,"beforeUnmount"),Be&64?re.type.remove(re,me,te,Se,pe,ve):Ie&&(be!==Fragment||Me>0&&Me&64)?fe(Ie,me,te,!1,!0):(be===Fragment&&Me&384||!Se&&Be&16)&&fe($e,me,te),ve&&F(re)}(Oe&&(ge=_e&&_e.onVnodeUnmounted)||Ve)&&queuePostRenderEffect(()=>{ge&&invokeVNodeHook(ge,me,re),Ve&&invokeDirectiveHook(re,null,me,"unmounted")},te)},F=re=>{const{type:me,el:te,anchor:ve,transition:Se}=re;if(me===Fragment){ue(te,ve);return}if(me===Static){j(re);return}const be=()=>{o(te),Se&&!Se.persisted&&Se.afterLeave&&Se.afterLeave()};if(re.shapeFlag&1&&Se&&!Se.persisted){const{leave:_e,delayLeave:ye}=Se,$e=()=>_e(te,be);ye?ye(re.el,be,$e):$e()}else be()},ue=(re,me)=>{let te;for(;re!==me;)te=w(re),o(re),re=te;o(me)},ee=(re,me,te)=>{const{bum:ve,scope:Se,update:be,subTree:_e,um:ye}=re;ve&&invokeArrayFns(ve),Se.stop(),be&&(be.active=!1,S(_e,re,me,te)),ye&&queuePostRenderEffect(ye,me),queuePostRenderEffect(()=>{re.isUnmounted=!0},me),me&&me.pendingBranch&&!me.isUnmounted&&re.asyncDep&&!re.asyncResolved&&re.suspenseId===me.pendingId&&(me.deps--,me.deps===0&&me.resolve())},fe=(re,me,te,ve=!1,Se=!1,be=0)=>{for(let _e=be;_e<re.length;_e++)S(re[_e],me,te,ve,Se)},le=re=>re.shapeFlag&6?le(re.component.subTree):re.shapeFlag&128?re.suspense.next():w(re.anchor||re.el),ce=(re,me,te)=>{re==null?me._vnode&&S(me._vnode,null,null,!0):C(me._vnode||null,re,me,null,null,null,te),flushPreFlushCbs(),flushPostFlushCbs(),me._vnode=re},pe={p:C,um:S,m:P,r:F,mt:x,mc:Z,pc:z,pbc:oe,n:le,o:t};let se,de;return e&&([se,de]=e(pe)),{render:ce,hydrate:se,createApp:createAppAPI(ce,se)}}function toggleRecurse({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function traverseStaticChildren(t,e,n=!1){const a=t.children,o=e.children;if(isArray$9(a)&&isArray$9(o))for(let l=0;l<a.length;l++){const u=a[l];let d=o[l];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=o[l]=cloneIfMounted(o[l]),d.el=u.el),n||traverseStaticChildren(u,d)),d.type===Text&&(d.el=u.el)}}function getSequence(t){const e=t.slice(),n=[0];let a,o,l,u,d;const m=t.length;for(a=0;a<m;a++){const y=t[a];if(y!==0){if(o=n[n.length-1],t[o]<y){e[a]=o,n.push(a);continue}for(l=0,u=n.length-1;l<u;)d=l+u>>1,t[n[d]]<y?l=d+1:u=d;y<t[n[l]]&&(l>0&&(e[a]=n[l-1]),n[l]=a)}}for(l=n.length,u=n[l-1];l-- >0;)n[l]=u,u=e[u];return n}const isTeleport=t=>t.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,n,a,o,l){return setupBlock(createBaseVNode(t,e,n,a,o,l,!0))}function createBlock(t,e,n,a,o){return setupBlock(createVNode(t,e,n,a,o,!0))}function isVNode$1(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const InternalObjectKey="__vInternal",normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:n})=>t!=null?isString$6(t)||isRef(t)||isFunction$4(t)?{i:currentRenderingInstance,r:t,k:e,f:!!n}:t:null;function createBaseVNode(t,e=null,n=null,a=0,o=null,l=t===Fragment?0:1,u=!1,d=!1){const m={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:a,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return d?(normalizeChildren(m,n),l&128&&t.normalize(m)):n&&(m.shapeFlag|=isString$6(n)?8:16),isBlockTreeEnabled>0&&!u&&currentBlock&&(m.patchFlag>0||l&6)&&m.patchFlag!==32&&currentBlock.push(m),m}const createVNode=_createVNode;function _createVNode(t,e=null,n=null,a=0,o=null,l=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode$1(t)){const d=cloneVNode(t,e,!0);return n&&normalizeChildren(d,n),isBlockTreeEnabled>0&&!l&&currentBlock&&(d.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=d:currentBlock.push(d)),d.patchFlag|=-2,d}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:d,style:m}=e;d&&!isString$6(d)&&(e.class=normalizeClass(d)),isObject$4(m)&&(isProxy(m)&&!isArray$9(m)&&(m=extend$1({},m)),e.style=normalizeStyle(m))}const u=isString$6(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject$4(t)?4:isFunction$4(t)?2:0;return createBaseVNode(t,e,n,a,o,u,l,!0)}function guardReactiveProps(t){return t?isProxy(t)||InternalObjectKey in t?extend$1({},t):t:null}function cloneVNode(t,e,n=!1){const{props:a,ref:o,patchFlag:l,children:u}=t,d=e?mergeProps(a||{},e):a;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:d,key:d&&normalizeKey(d),ref:e&&e.ref?n&&o?isArray$9(o)?o.concat(normalizeRef(e)):[o,normalizeRef(e)]:normalizeRef(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?l===-1?16:l|16:l,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx}}function createTextVNode(t=" ",e=0){return createVNode(Text,null,t,e)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$9(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let n=0;const{shapeFlag:a}=t;if(e==null)e=null;else if(isArray$9(e))n=16;else if(typeof e=="object")if(a&65){const o=e.default;o&&(o._c&&(o._d=!1),normalizeChildren(t,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!(InternalObjectKey in e)?e._ctx=currentRenderingInstance:o===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction$4(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),a&64?(n=16,e=[createTextVNode(e)]):n=8);t.children=e,t.shapeFlag|=n}function mergeProps(...t){const e={};for(let n=0;n<t.length;n++){const a=t[n];for(const o in a)if(o==="class")e.class!==a.class&&(e.class=normalizeClass([e.class,a.class]));else if(o==="style")e.style=normalizeStyle([e.style,a.style]);else if(isOn(o)){const l=e[o],u=a[o];u&&l!==u&&!(isArray$9(l)&&l.includes(u))&&(e[o]=l?[].concat(l,u):u)}else o!==""&&(e[o]=a[o])}return e}function invokeVNodeHook(t,e,n,a=null){callWithAsyncErrorHandling(t,e,7,[n,a])}const emptyAppContext=createAppContext();let uid$1=0;function createComponentInstance(t,e,n){const a=t.type,o=(e?e.appContext:t.appContext)||emptyAppContext,l={uid:uid$1++,vnode:t,type:a,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(a,o),emitsOptions:normalizeEmitsOptions(a,o),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:a.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=e?e.root:l,l.emit=emit$1.bind(null,l),t.ce&&t.ce(l),l}let currentInstance=null;const getCurrentInstance$1=()=>currentInstance||currentRenderingInstance,setCurrentInstance=t=>{currentInstance=t,t.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){isInSSRComponentSetup=e;const{props:n,children:a}=t.vnode,o=isStatefulComponent(t);initProps(t,n,o,e),initSlots(t,a);const l=o?setupStatefulComponent(t,e):void 0;return isInSSRComponentSetup=!1,l}function setupStatefulComponent(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=markRaw(new Proxy(t.ctx,PublicInstanceProxyHandlers));const{setup:a}=n;if(a){const o=t.setupContext=a.length>1?createSetupContext(t):null;setCurrentInstance(t),pauseTracking();const l=callWithErrorHandling(a,t,0,[t.props,o]);if(resetTracking(),unsetCurrentInstance(),isPromise(l)){if(l.then(unsetCurrentInstance,unsetCurrentInstance),e)return l.then(u=>{handleSetupResult(t,u,e)}).catch(u=>{handleError(u,t,0)});t.asyncDep=l}else handleSetupResult(t,l,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,n){isFunction$4(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject$4(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,n)}let compile;function finishComponentSetup(t,e,n){const a=t.type;if(!t.render){if(!e&&compile&&!a.render){const o=a.template||resolveMergedOptions(t).template;if(o){const{isCustomElement:l,compilerOptions:u}=t.appContext.config,{delimiters:d,compilerOptions:m}=a,y=extend$1(extend$1({isCustomElement:l,delimiters:d},u),m);a.render=compile(o,y)}}t.render=a.render||NOOP}setCurrentInstance(t),pauseTracking(),applyOptions(t),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(t){return new Proxy(t.attrs,{get(e,n){return track(t,"get","$attrs"),e[n]}})}function createSetupContext(t){const e=a=>{t.exposed=a||{}};let n;return{get attrs(){return n||(n=createAttrsProxy(t))},slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](t)},has(e,n){return n in e||n in publicPropertiesMap}}))}function getComponentName(t,e=!0){return isFunction$4(t)?t.displayName||t.name:t.name||e&&t.__name}function isClassComponent(t){return isFunction$4(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup);function h(t,e,n){const a=arguments.length;return a===2?isObject$4(e)&&!isArray$9(e)?isVNode$1(e)?createVNode(t,null,[e]):createVNode(t,e):createVNode(t,null,e):(a>3?n=Array.prototype.slice.call(arguments,2):a===3&&isVNode$1(n)&&(n=[n]),createVNode(t,e,n))}const ssrContextKey=Symbol(""),useSSRContext=()=>inject$1(ssrContextKey),version$m="3.2.45",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,a)=>{const o=e?doc.createElementNS(svgNS,t):doc.createElement(t,n?{is:n}:void 0);return t==="select"&&a&&a.multiple!=null&&o.setAttribute("multiple",a.multiple),o},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,a,o,l){const u=n?n.previousSibling:e.lastChild;if(o&&(o===l||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===l||!(o=o.nextSibling)););else{templateContainer.innerHTML=a?`<svg>${t}</svg>`:t;const d=templateContainer.content;if(a){const m=d.firstChild;for(;m.firstChild;)d.appendChild(m.firstChild);d.removeChild(m)}e.insertBefore(d,n)}return[u?u.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}};function patchClass(t,e,n){const a=t._vtc;a&&(e=(e?[e,...a]:[...a]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}function patchStyle(t,e,n){const a=t.style,o=isString$6(n);if(n&&!o){for(const l in n)setStyle(a,l,n[l]);if(e&&!isString$6(e))for(const l in e)n[l]==null&&setStyle(a,l,"")}else{const l=a.display;o?e!==n&&(a.cssText=n):e&&t.removeAttribute("style"),"_vod"in t&&(a.display=l)}}const importantRE=/\s*!important$/;function setStyle(t,e,n){if(isArray$9(n))n.forEach(a=>setStyle(t,e,a));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const a=autoPrefix(t,e);importantRE.test(n)?t.setProperty(hyphenate(a),n.replace(importantRE,""),"important"):t[a]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const n=prefixCache[e];if(n)return n;let a=camelize(e);if(a!=="filter"&&a in t)return prefixCache[e]=a;a=capitalize$1(a);for(let o=0;o<prefixes.length;o++){const l=prefixes[o]+a;if(l in t)return prefixCache[e]=l}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,n,a,o){if(a&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,n);else{const l=isSpecialBooleanAttr(e);n==null||l&&!includeBooleanAttr(n)?t.removeAttribute(e):t.setAttribute(e,l?"":n)}}function patchDOMProp(t,e,n,a,o,l,u){if(e==="innerHTML"||e==="textContent"){a&&u(a,o,l),t[e]=n??"";return}if(e==="value"&&t.tagName!=="PROGRESS"&&!t.tagName.includes("-")){t._value=n;const m=n??"";(t.value!==m||t.tagName==="OPTION")&&(t.value=m),n==null&&t.removeAttribute(e);return}let d=!1;if(n===""||n==null){const m=typeof t[e];m==="boolean"?n=includeBooleanAttr(n):n==null&&m==="string"?(n="",d=!0):m==="number"&&(n=0,d=!0)}try{t[e]=n}catch{}d&&t.removeAttribute(e)}function addEventListener(t,e,n,a){t.addEventListener(e,n,a)}function removeEventListener(t,e,n,a){t.removeEventListener(e,n,a)}function patchEvent(t,e,n,a,o=null){const l=t._vei||(t._vei={}),u=l[e];if(a&&u)u.value=a;else{const[d,m]=parseName(e);if(a){const y=l[e]=createInvoker(a,o);addEventListener(t,d,y,m)}else u&&(removeEventListener(t,d,u,m),l[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let a;for(;a=t.match(optionsModifierRE);)t=t.slice(0,t.length-a[0].length),e[a[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const n=a=>{if(!a._vts)a._vts=Date.now();else if(a._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(a,n.value),e,5,[a])};return n.value=t,n.attached=getNow(),n}function patchStopImmediatePropagation(t,e){if(isArray$9(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(a=>o=>!o._stopped&&a&&a(o))}else return e}const nativeOnRE=/^on[a-z]/,patchProp=(t,e,n,a,o=!1,l,u,d,m)=>{e==="class"?patchClass(t,a,o):e==="style"?patchStyle(t,n,a):isOn(e)?isModelListener(e)||patchEvent(t,e,n,a,u):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,a,o))?patchDOMProp(t,e,a,l,u,d,m):(e==="true-value"?t._trueValue=a:e==="false-value"&&(t._falseValue=a),patchAttr(t,e,a,o))};function shouldSetAsProp(t,e,n,a){return a?!!(e==="innerHTML"||e==="textContent"||e in t&&nativeOnRE.test(e)&&isFunction$4(n)):e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA"||nativeOnRE.test(e)&&isString$6(n)?!1:e in t}const TRANSITION="transition",ANIMATION="animation",Transition=(t,{slots:e})=>h(BaseTransition,resolveTransitionProps(t),e);Transition.displayName="Transition";const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=Transition.props=extend$1({},BaseTransition.props,DOMTransitionPropsValidators),callHook=(t,e=[])=>{isArray$9(t)?t.forEach(n=>n(...e)):t&&t(...e)},hasExplicitCallback=t=>t?isArray$9(t)?t.some(e=>e.length>1):t.length>1:!1;function resolveTransitionProps(t){const e={};for(const U in t)U in DOMTransitionPropsValidators||(e[U]=t[U]);if(t.css===!1)return e;const{name:n="v",type:a,duration:o,enterFromClass:l=`${n}-enter-from`,enterActiveClass:u=`${n}-enter-active`,enterToClass:d=`${n}-enter-to`,appearFromClass:m=l,appearActiveClass:y=u,appearToClass:b=d,leaveFromClass:_=`${n}-leave-from`,leaveActiveClass:w=`${n}-leave-active`,leaveToClass:E=`${n}-leave-to`}=t,A=normalizeDuration(o),C=A&&A[0],k=A&&A[1],{onBeforeEnter:B,onEnter:D,onEnterCancelled:q,onLeave:j,onLeaveCancelled:J,onBeforeAppear:Y=B,onAppear:L=D,onAppearCancelled:Z=q}=e,Q=(U,I,x)=>{removeTransitionClass(U,I?b:d),removeTransitionClass(U,I?y:u),x&&x()},oe=(U,I)=>{U._isLeaving=!1,removeTransitionClass(U,_),removeTransitionClass(U,E),removeTransitionClass(U,w),I&&I()},ae=U=>(I,x)=>{const T=U?L:D,M=()=>Q(I,U,x);callHook(T,[I,M]),nextFrame(()=>{removeTransitionClass(I,U?m:l),addTransitionClass(I,U?b:d),hasExplicitCallback(T)||whenTransitionEnds(I,a,C,M)})};return extend$1(e,{onBeforeEnter(U){callHook(B,[U]),addTransitionClass(U,l),addTransitionClass(U,u)},onBeforeAppear(U){callHook(Y,[U]),addTransitionClass(U,m),addTransitionClass(U,y)},onEnter:ae(!1),onAppear:ae(!0),onLeave(U,I){U._isLeaving=!0;const x=()=>oe(U,I);addTransitionClass(U,_),forceReflow(),addTransitionClass(U,w),nextFrame(()=>{U._isLeaving&&(removeTransitionClass(U,_),addTransitionClass(U,E),hasExplicitCallback(j)||whenTransitionEnds(U,a,k,x))}),callHook(j,[U,x])},onEnterCancelled(U){Q(U,!1),callHook(q,[U])},onAppearCancelled(U){Q(U,!0),callHook(Z,[U])},onLeaveCancelled(U){oe(U),callHook(J,[U])}})}function normalizeDuration(t){if(t==null)return null;if(isObject$4(t))return[NumberOf(t.enter),NumberOf(t.leave)];{const e=NumberOf(t);return[e,e]}}function NumberOf(t){return toNumber(t)}function addTransitionClass(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t._vtc||(t._vtc=new Set)).add(e)}function removeTransitionClass(t,e){e.split(/\s+/).forEach(a=>a&&t.classList.remove(a));const{_vtc:n}=t;n&&(n.delete(e),n.size||(t._vtc=void 0))}function nextFrame(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let endId=0;function whenTransitionEnds(t,e,n,a){const o=t._endId=++endId,l=()=>{o===t._endId&&a()};if(n)return setTimeout(l,n);const{type:u,timeout:d,propCount:m}=getTransitionInfo(t,e);if(!u)return a();const y=u+"end";let b=0;const _=()=>{t.removeEventListener(y,w),l()},w=E=>{E.target===t&&++b>=m&&_()};setTimeout(()=>{b<m&&_()},d+1),t.addEventListener(y,w)}function getTransitionInfo(t,e){const n=window.getComputedStyle(t),a=A=>(n[A]||"").split(", "),o=a(`${TRANSITION}Delay`),l=a(`${TRANSITION}Duration`),u=getTimeout(o,l),d=a(`${ANIMATION}Delay`),m=a(`${ANIMATION}Duration`),y=getTimeout(d,m);let b=null,_=0,w=0;e===TRANSITION?u>0&&(b=TRANSITION,_=u,w=l.length):e===ANIMATION?y>0&&(b=ANIMATION,_=y,w=m.length):(_=Math.max(u,y),b=_>0?u>y?TRANSITION:ANIMATION:null,w=b?b===TRANSITION?l.length:m.length:0);const E=b===TRANSITION&&/\b(transform|all)(,|$)/.test(a(`${TRANSITION}Property`).toString());return{type:b,timeout:_,propCount:w,hasTransform:E}}function getTimeout(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,a)=>toMs(n)+toMs(t[a])))}function toMs(t){return Number(t.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}const positionMap=new WeakMap,newPositionMap=new WeakMap,TransitionGroupImpl={name:"TransitionGroup",props:extend$1({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=getCurrentInstance$1(),a=useTransitionState();let o,l;return onUpdated(()=>{if(!o.length)return;const u=t.moveClass||`${t.name||"v"}-move`;if(!hasCSSTransform(o[0].el,n.vnode.el,u))return;o.forEach(callPendingCbs),o.forEach(recordPosition);const d=o.filter(applyTranslation);forceReflow(),d.forEach(m=>{const y=m.el,b=y.style;addTransitionClass(y,u),b.transform=b.webkitTransform=b.transitionDuration="";const _=y._moveCb=w=>{w&&w.target!==y||(!w||/transform$/.test(w.propertyName))&&(y.removeEventListener("transitionend",_),y._moveCb=null,removeTransitionClass(y,u))};y.addEventListener("transitionend",_)})}),()=>{const u=toRaw(t),d=resolveTransitionProps(u);let m=u.tag||Fragment;o=l,l=e.default?getTransitionRawChildren(e.default()):[];for(let y=0;y<l.length;y++){const b=l[y];b.key!=null&&setTransitionHooks(b,resolveTransitionHooks(b,d,a,n))}if(o)for(let y=0;y<o.length;y++){const b=o[y];setTransitionHooks(b,resolveTransitionHooks(b,d,a,n)),positionMap.set(b,b.el.getBoundingClientRect())}return createVNode(m,null,l)}}},TransitionGroup=TransitionGroupImpl;function callPendingCbs(t){const e=t.el;e._moveCb&&e._moveCb(),e._enterCb&&e._enterCb()}function recordPosition(t){newPositionMap.set(t,t.el.getBoundingClientRect())}function applyTranslation(t){const e=positionMap.get(t),n=newPositionMap.get(t),a=e.left-n.left,o=e.top-n.top;if(a||o){const l=t.el.style;return l.transform=l.webkitTransform=`translate(${a}px,${o}px)`,l.transitionDuration="0s",t}}function hasCSSTransform(t,e,n){const a=t.cloneNode();t._vtc&&t._vtc.forEach(u=>{u.split(/\s+/).forEach(d=>d&&a.classList.remove(d))}),n.split(/\s+/).forEach(u=>u&&a.classList.add(u)),a.style.display="none";const o=e.nodeType===1?e:e.parentNode;o.appendChild(a);const{hasTransform:l}=getTransitionInfo(a);return o.removeChild(a),l}const vShow={beforeMount(t,{value:e},{transition:n}){t._vod=t.style.display==="none"?"":t.style.display,n&&e?n.beforeEnter(t):setDisplay(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:a}){!e!=!n&&(a?e?(a.beforeEnter(t),setDisplay(t,!0),a.enter(t)):a.leave(t,()=>{setDisplay(t,!1)}):setDisplay(t,e))},beforeUnmount(t,{value:e}){setDisplay(t,e)}};function setDisplay(t,e){t.style.display=e?t._vod:"none"}const rendererOptions=extend$1({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:n}=e;return e.mount=a=>{const o=normalizeContainer(a);if(!o)return;const l=e._component;!isFunction$4(l)&&!l.render&&!l.template&&(l.template=o.innerHTML),o.innerHTML="";const u=n(o,!1,o instanceof SVGElement);return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},e};function normalizeContainer(t){return isString$6(t)?document.querySelector(t):t}const VDivider$1="";function _classPrivateFieldInitSpec(t,e,n){_checkPrivateRedeclaration$1(t,e),e.set(t,n)}function _checkPrivateRedeclaration$1(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classPrivateFieldSet$1(t,e,n){var a=_classExtractFieldDescriptor$1(t,e,"set");return _classApplyDescriptorSet$1(t,a,n),n}function _classApplyDescriptorSet$1(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function _classPrivateFieldGet$1(t,e){var n=_classExtractFieldDescriptor$1(t,e,"get");return _classApplyDescriptorGet$1(t,n)}function _classExtractFieldDescriptor$1(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function _classApplyDescriptorGet$1(t,e){return e.get?e.get.call(t):e.value}function getNestedValue(t,e,n){const a=e.length-1;if(a<0)return t===void 0?n:t;for(let o=0;o<a;o++){if(t==null)return n;t=t[e[o]]}return t==null||t[e[a]]===void 0?n:t[e[a]]}function deepEqual$3(t,e){if(t===e)return!0;if(t instanceof Date&&e instanceof Date&&t.getTime()!==e.getTime()||t!==Object(t)||e!==Object(e))return!1;const n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(a=>deepEqual$3(t[a],e[a]))}function getObjectValueByPath(t,e,n){return t==null||!e||typeof e!="string"?n:t[e]!==void 0?t[e]:(e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),getNestedValue(t,e.split("."),n))}function getPropertyFromItem(t,e,n){if(e==null)return t===void 0?n:t;if(t!==Object(t)){if(typeof e!="function")return n;const o=e(t,n);return typeof o>"u"?n:o}if(typeof e=="string")return getObjectValueByPath(t,e,n);if(Array.isArray(e))return getNestedValue(t,e,n);if(typeof e!="function")return n;const a=e(t,n);return typeof a>"u"?n:a}function createRange(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return Array.from({length:t},(n,a)=>e+a)}function convertToUnit(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"px";if(!(t==null||t===""))return isNaN(+t)?String(t):isFinite(+t)?`${Number(t)}${e}`:void 0}function isObject$3(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)}const keyCodes=Object.freeze({enter:13,tab:9,delete:46,esc:27,space:32,up:38,down:40,left:37,right:39,end:35,home:36,del:46,backspace:8,insert:45,pageup:33,pagedown:34,shift:16});function pick(t,e){const n=Object.create(null),a=Object.create(null);for(const o in t)e.some(l=>l instanceof RegExp?l.test(o):l===o)?n[o]=t[o]:a[o]=t[o];return[n,a]}function wrapInArray(t){return t==null?[]:Array.isArray(t)?t:[t]}function clamp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;return Math.max(e,Math.min(n,t))}function chunk(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=[];let a=0;for(;a<t.length;)n.push(t.substr(a,e)),a+=e;return n}function mergeDeep(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const a={};for(const o in t)a[o]=t[o];for(const o in e){const l=t[o],u=e[o];if(isObject$3(l)&&isObject$3(u)){a[o]=mergeDeep(l,u,n);continue}if(Array.isArray(l)&&Array.isArray(u)&&n){a[o]=n(l,u);continue}a[o]=u}return a}function toKebabCase(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").replace(/[^a-z]/gi,"-").replace(/\B([A-Z])/g,"-$1").toLowerCase()}function findChildrenWithProvide(t,e){if(!e||typeof e!="object")return[];if(Array.isArray(e))return e.map(n=>findChildrenWithProvide(t,n)).flat(1);if(Array.isArray(e.children))return e.children.map(n=>findChildrenWithProvide(t,n)).flat(1);if(e.component){if(Object.getOwnPropertySymbols(e.component.provides).includes(t))return[e.component];if(e.component.subTree)return findChildrenWithProvide(t,e.component.subTree).flat(1)}return[]}var _arr=new WeakMap,_pointer=new WeakMap;class CircularBuffer{constructor(e){_classPrivateFieldInitSpec(this,_arr,{writable:!0,value:[]}),_classPrivateFieldInitSpec(this,_pointer,{writable:!0,value:0}),this.size=e}push(e){_classPrivateFieldGet$1(this,_arr)[_classPrivateFieldGet$1(this,_pointer)]=e,_classPrivateFieldSet$1(this,_pointer,(_classPrivateFieldGet$1(this,_pointer)+1)%this.size)}values(){return _classPrivateFieldGet$1(this,_arr).slice(_classPrivateFieldGet$1(this,_pointer)).concat(_classPrivateFieldGet$1(this,_arr).slice(0,_classPrivateFieldGet$1(this,_pointer)))}}function destructComputed(t){const e=reactive({}),n=computed(t);return watchEffect(()=>{for(const a in n.value)e[a]=n.value[a]},{flush:"sync"}),toRefs(e)}function includes$1(t,e){return t.includes(e)}const EventProp=[Function,Array];function hasEvent(t,e){return e="on"+capitalize$1(e),!!(t[e]||t[`${e}Once`]||t[`${e}Capture`]||t[`${e}OnceCapture`]||t[`${e}CaptureOnce`])}const block=["top","bottom"],inline=["start","end","left","right"];function parseAnchor(t,e){let[n,a]=t.split(" ");return a||(a=includes$1(block,n)?"start":includes$1(inline,n)?"top":"center"),{side:toPhysical(n,e),align:toPhysical(a,e)}}function toPhysical(t,e){return t==="start"?e?"right":"left":t==="end"?e?"left":"right":t}function createMessage(t,e,n){if(n&&(e={__isVue:!0,$parent:n,$options:e}),e){if(e.$_alreadyWarned=e.$_alreadyWarned||[],e.$_alreadyWarned.includes(t))return;e.$_alreadyWarned.push(t)}return`[Vuetify] ${t}`+(e?generateComponentTrace(e):"")}function consoleWarn(t,e,n){const a=createMessage(t,e,n);a!=null&&console.warn(a)}function consoleError(t,e,n){const a=createMessage(t,e,n);a!=null&&console.error(a)}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function formatComponentName(t,e){if(t.$root===t)return"<Root>";const n=typeof t=="function"&&t.cid!=null?t.options:t.__isVue?t.$options||t.constructor.options:t||{};let a=n.name||n._componentTag;const o=n.__file;if(!a&&o){const l=o.match(/([^/\\]+)\.vue$/);a=l?.[1]}return(a?`<${classify(a)}>`:"<Anonymous>")+(o&&e!==!1?` at ${o}`:"")}function generateComponentTrace(t){if(t.__isVue&&t.$parent){const e=[];let n=0;for(;t;){if(e.length>0){const a=e[e.length-1];if(a.constructor===t.constructor){n++,t=t.$parent;continue}else n>0&&(e[e.length-1]=[a,n],n=0)}e.push(t),t=t.$parent}return`

found in

`+e.map((a,o)=>`${o===0?"---> ":" ".repeat(5+o*2)}${Array.isArray(a)?`${formatComponentName(a[0])}... (${a[1]} recursive calls)`:formatComponentName(a)}`).join(`
`)}else return`

(found in ${formatComponentName(t)})`}const srgbForwardMatrix=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],srgbForwardTransform=t=>t<=.0031308?t*12.92:1.055*t**(1/2.4)-.055,srgbReverseMatrix=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],srgbReverseTransform=t=>t<=.04045?t/12.92:((t+.055)/1.055)**2.4;function fromXYZ$1(t){const e=Array(3),n=srgbForwardTransform,a=srgbForwardMatrix;for(let o=0;o<3;++o)e[o]=Math.round(clamp(n(a[o][0]*t[0]+a[o][1]*t[1]+a[o][2]*t[2]))*255);return{r:e[0],g:e[1],b:e[2]}}function toXYZ$1(t){let{r:e,g:n,b:a}=t;const o=[0,0,0],l=srgbReverseTransform,u=srgbReverseMatrix;e=l(e/255),n=l(n/255),a=l(a/255);for(let d=0;d<3;++d)o[d]=u[d][0]*e+u[d][1]*n+u[d][2]*a;return o}const delta=.20689655172413793,cielabForwardTransform=t=>t>delta**3?Math.cbrt(t):t/(3*delta**2)+4/29,cielabReverseTransform=t=>t>delta?t**3:3*delta**2*(t-4/29);function fromXYZ(t){const e=cielabForwardTransform,n=e(t[1]);return[116*n-16,500*(e(t[0]/.95047)-n),200*(n-e(t[2]/1.08883))]}function toXYZ(t){const e=cielabReverseTransform,n=(t[0]+16)/116;return[e(n+t[1]/500)*.95047,e(n),e(n-t[2]/200)*1.08883]}function isCssColor(t){return!!t&&/^(#|var\(--|(rgb|hsl)a?\()/.test(t)}function parseColor(t){if(typeof t=="number")return(isNaN(t)||t<0||t>16777215)&&consoleWarn(`'${t}' is not a valid hex color`),{r:(t&16711680)>>16,g:(t&65280)>>8,b:t&255};if(typeof t=="string"){let e=t.startsWith("#")?t.slice(1):t;[3,4].includes(e.length)?e=e.split("").map(a=>a+a).join(""):[6,8].includes(e.length)||consoleWarn(`'${t}' is not a valid hex(a) color`);const n=parseInt(e,16);return(isNaN(n)||n<0||n>4294967295)&&consoleWarn(`'${t}' is not a valid hex(a) color`),HexToRGB(e)}else throw new TypeError(`Colors can only be numbers or strings, recieved ${t==null?t:t.constructor.name} instead`)}function toHex$3(t){const e=Math.round(t).toString(16);return("00".substr(0,2-e.length)+e).toUpperCase()}function RGBtoHex(t){let{r:e,g:n,b:a,a:o}=t;return`#${[toHex$3(e),toHex$3(n),toHex$3(a),o!==void 0?toHex$3(Math.round(o*255)):"FF"].join("")}`}function HexToRGB(t){let[e,n,a,o]=chunk(t,2).map(l=>parseInt(l,16));return o=o===void 0?o:Math.round(o/255*100)/100,{r:e,g:n,b:a,a:o}}function lighten(t,e){const n=fromXYZ(toXYZ$1(t));return n[0]=n[0]+e*10,fromXYZ$1(toXYZ(n))}function darken(t,e){const n=fromXYZ(toXYZ$1(t));return n[0]=n[0]-e*10,fromXYZ$1(toXYZ(n))}function getLuma(t){const e=parseColor(t);return toXYZ$1(e)[1]}function getCurrentInstance(t,e){const n=getCurrentInstance$1();if(!n)throw new Error(`[Vuetify] ${t} ${e||"must be called from inside a setup function"}`);return n}function getCurrentInstanceName(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"composables";const e=getCurrentInstance(t).type;return toKebabCase(e?.aliasName||e?.name)}let _uid=0,_map=new WeakMap;function getUid(){const t=getCurrentInstance("getUid");if(_map.has(t))return _map.get(t);{const e=_uid++;return _map.set(t,e),e}}getUid.reset=()=>{_uid=0,_map=new WeakMap};function injectSelf(t){const{provides:e}=getCurrentInstance("injectSelf");if(e&&t in e)return e[t]}const DefaultsSymbol=Symbol.for("vuetify:defaults");function createDefaults(t){return ref(t??{})}function useDefaults(){const t=inject$1(DefaultsSymbol);if(!t)throw new Error("[Vuetify] Could not find defaults instance");return t}function provideDefaults(t,e){const n=useDefaults(),a=ref(t),o=computed(()=>{const l=unref(e?.scoped),u=unref(e?.reset),d=unref(e?.root);let m=mergeDeep(a.value,{prev:n.value});if(l)return m;if(u||d){const y=Number(u||1/0);for(let b=0;b<=y&&m.prev;b++)m=m.prev;return m}return mergeDeep(m.prev,m)});return provide(DefaultsSymbol,o),o}function useToggleScope(t,e){let n;watch(t,a=>{if(a&&!n)n=effectScope(),n.run(e);else if(!a){var o;(o=n)==null||o.stop(),n=void 0}},{immediate:!0}),onScopeDispose(()=>{var a;(a=n)==null||a.stop()})}function propsFactory(t,e){return n=>Object.keys(t).reduce((a,o)=>{const u=typeof t[o]=="object"&&t[o]!=null&&!Array.isArray(t[o])?t[o]:{type:t[o]};return n&&o in n?a[o]={...u,default:n[o]}:a[o]=u,e&&!a[o].source&&(a[o].source=e),a},{})}function propIsDefined(t,e){var n,a;return typeof((n=t.props)==null?void 0:n[e])<"u"||typeof((a=t.props)==null?void 0:a[toKebabCase(e)])<"u"}const defineComponent=function(e){return e._setup=e._setup??e.setup,e.name?(e._setup&&(e.props=e.props??{},e.props=propsFactory(e.props,toKebabCase(e.name))(),e.props._as=String,e.setup=function(a,o){const l=getCurrentInstance$1(),u=useDefaults(),d=shallowRef(),m=shallowReactive({...toRaw(a)});watchEffect(()=>{const b=u.value.global,_=u.value[a._as??e.name];if(_){const w=Object.entries(_).filter(E=>{let[A]=E;return A.startsWith(A[0].toUpperCase())});w.length&&(d.value=Object.fromEntries(w))}for(const w of Object.keys(a)){let E=a[w];propIsDefined(l.vnode,w)||(E=_?.[w]??b?.[w]??a[w]),m[w]!==E&&(m[w]=E)}});const y=e._setup(m,o);return useToggleScope(d,()=>{var b;provideDefaults(mergeDeep(((b=injectSelf(DefaultsSymbol))==null?void 0:b.value)??{},d.value))}),y}),e):(consoleWarn("The component is missing an explicit name, unable to generate default prop value"),e)};function genericComponent(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return e=>(t?defineComponent:defineComponent$1)(e)}function createSimpleFunctional(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"div",n=arguments.length>2?arguments[2]:void 0;return defineComponent({name:n??capitalize$1(camelize(t.replace(/__/g,"-"))),props:{tag:{type:String,default:e}},setup(a,o){let{slots:l}=o;return()=>{var u;return h(a.tag,{class:t},(u=l.default)==null?void 0:u.call(l))}}})}const IN_BROWSER=typeof window<"u",SUPPORTS_INTERSECTION=IN_BROWSER&&"IntersectionObserver"in window,SUPPORTS_TOUCH=IN_BROWSER&&("ontouchstart"in window||window.navigator.maxTouchPoints>0);IN_BROWSER&&typeof CSS<"u"&&CSS.supports("selector(:focus-visible)");function useRender(t){const e=getCurrentInstance("useRender");e.render=t}const mainTRC=2.4,Rco=.2126729,Gco=.7151522,Bco=.072175,normBG=.55,normTXT=.58,revTXT=.57,revBG=.62,blkThrs=.03,blkClmp=1.45,deltaYmin=5e-4,scaleBoW=1.25,scaleWoB=1.25,loConThresh=.078,loConFactor=12.82051282051282,loConOffset=.06,loClip=.001;function APCAcontrast(t,e){const n=(t.r/255)**mainTRC,a=(t.g/255)**mainTRC,o=(t.b/255)**mainTRC,l=(e.r/255)**mainTRC,u=(e.g/255)**mainTRC,d=(e.b/255)**mainTRC;let m=n*Rco+a*Gco+o*Bco,y=l*Rco+u*Gco+d*Bco;if(m<=blkThrs&&(m+=(blkThrs-m)**blkClmp),y<=blkThrs&&(y+=(blkThrs-y)**blkClmp),Math.abs(y-m)<deltaYmin)return 0;let b;if(y>m){const _=(y**normBG-m**normTXT)*scaleBoW;b=_<loClip?0:_<loConThresh?_-_*loConFactor*loConOffset:_-loConOffset}else{const _=(y**revBG-m**revTXT)*scaleWoB;b=_>-loClip?0:_>-loConThresh?_-_*loConFactor*loConOffset:_+loConOffset}return b*100}const ThemeSymbol=Symbol.for("vuetify:theme"),makeThemeProps=propsFactory({theme:String},"theme"),defaultThemeOptions={defaultTheme:"light",variations:{colors:[],lighten:0,darken:0},themes:{light:{dark:!1,colors:{background:"#FFFFFF",surface:"#FFFFFF","surface-variant":"#424242","on-surface-variant":"#EEEEEE",primary:"#6200EE","primary-darken-1":"#3700B3",secondary:"#03DAC6","secondary-darken-1":"#018786",error:"#B00020",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#000000","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.04,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.12,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#F5F5F5","theme-on-code":"#000000"}},dark:{dark:!0,colors:{background:"#121212",surface:"#212121","surface-variant":"#BDBDBD","on-surface-variant":"#424242",primary:"#BB86FC","primary-darken-1":"#3700B3",secondary:"#03DAC5","secondary-darken-1":"#03DAC5",error:"#CF6679",info:"#2196F3",success:"#4CAF50",warning:"#FB8C00"},variables:{"border-color":"#FFFFFF","border-opacity":.12,"high-emphasis-opacity":.87,"medium-emphasis-opacity":.6,"disabled-opacity":.38,"idle-opacity":.1,"hover-opacity":.04,"focus-opacity":.12,"selected-opacity":.08,"activated-opacity":.12,"pressed-opacity":.16,"dragged-opacity":.08,"theme-kbd":"#212529","theme-on-kbd":"#FFFFFF","theme-code":"#343434","theme-on-code":"#CCCCCC"}}}};function parseThemeOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultThemeOptions;if(!t)return{...defaultThemeOptions,isDisabled:!0};const e={};for(const[o,l]of Object.entries(t.themes??{})){var n,a;const u=l.dark||o==="dark"?(n=defaultThemeOptions.themes)==null?void 0:n.dark:(a=defaultThemeOptions.themes)==null?void 0:a.light;e[o]=mergeDeep(u,l)}return mergeDeep(defaultThemeOptions,{...t,themes:e})}function createTheme(t){const e=reactive(parseThemeOptions(t)),n=ref(e.defaultTheme),a=ref(e.themes),o=computed(()=>{const y={};for(const[b,_]of Object.entries(a.value)){const w=y[b]={..._,colors:{..._.colors}};if(e.variations)for(const E of e.variations.colors){const A=w.colors[E];if(A)for(const C of["lighten","darken"]){const k=C==="lighten"?lighten:darken;for(const B of createRange(e.variations[C],1))w.colors[`${E}-${C}-${B}`]=RGBtoHex(k(parseColor(A),B))}}for(const E of Object.keys(w.colors)){if(/^on-[a-z]/.test(E)||w.colors[`on-${E}`])continue;const A=`on-${E}`,C=parseColor(w.colors[E]),k=Math.abs(APCAcontrast(parseColor(0),C)),B=Math.abs(APCAcontrast(parseColor(16777215),C));w.colors[A]=B>Math.min(k,50)?"#fff":"#000"}}return y}),l=computed(()=>o.value[n.value]),u=computed(()=>{const y=[];l.value.dark&&createCssClass(y,":root",["color-scheme: dark"]);for(const[E,A]of Object.entries(o.value)){const{variables:C,dark:k}=A;createCssClass(y,`.v-theme--${E}`,[`color-scheme: ${k?"dark":"normal"}`,...genCssVariables(A),...Object.keys(C).map(B=>{const D=C[B],q=typeof D=="string"&&D.startsWith("#")?parseColor(D):void 0,j=q?`${q.r}, ${q.g}, ${q.b}`:void 0;return`--v-${B}: ${j??D}`})])}const b=[],_=[],w=new Set(Object.values(o.value).flatMap(E=>Object.keys(E.colors)));for(const E of w)/^on-[a-z]/.test(E)?createCssClass(_,`.${E}`,[`color: rgb(var(--v-theme-${E})) !important`]):(createCssClass(b,`.bg-${E}`,[`--v-theme-overlay-multiplier: var(--v-theme-${E}-overlay-multiplier)`,`background: rgb(var(--v-theme-${E})) !important`,`color: rgb(var(--v-theme-on-${E})) !important`]),createCssClass(_,`.text-${E}`,[`color: rgb(var(--v-theme-${E})) !important`]),createCssClass(_,`.border-${E}`,[`--v-border-color: var(--v-theme-${E})`]));return y.push(...b,..._),y.map((E,A)=>A===0?E:`    ${E}`).join("")});function d(y){const b=y._context.provides.usehead;if(b)b.addHeadObjs(computed(()=>{const _={children:u.value,type:"text/css",id:"vuetify-theme-stylesheet"};return e.cspNonce&&(_.nonce=e.cspNonce),{style:[_]}})),IN_BROWSER&&watchEffect(()=>b.updateDOM());else{let w=function(){if(!e.isDisabled){if(typeof document<"u"&&!_){const E=document.createElement("style");E.type="text/css",E.id="vuetify-theme-stylesheet",e.cspNonce&&E.setAttribute("nonce",e.cspNonce),_=E,document.head.appendChild(_)}_&&(_.innerHTML=u.value)}},_=IN_BROWSER?document.getElementById("vuetify-theme-stylesheet"):null;watch(u,w,{immediate:!0})}}const m=computed(()=>e.isDisabled?void 0:`v-theme--${n.value}`);return{install:d,isDisabled:e.isDisabled,name:n,themes:a,current:l,computedThemes:o,themeClasses:m,styles:u,global:{name:n,current:l}}}function provideTheme(t){getCurrentInstance("provideTheme");const e=inject$1(ThemeSymbol,null);if(!e)throw new Error("Could not find Vuetify theme injection");const n=computed(()=>t.theme??e?.name.value),a=computed(()=>e.isDisabled?void 0:`v-theme--${n.value}`),o={...e,name:n,themeClasses:a};return provide(ThemeSymbol,o),o}function createCssClass(t,e,n){t.push(`${e} {
`,...n.map(a=>`  ${a};
`),`}
`)}function genCssVariables(t){const e=t.dark?2:1,n=t.dark?1:2,a=[];for(const[o,l]of Object.entries(t.colors)){const u=parseColor(l);a.push(`--v-theme-${o}: ${u.r},${u.g},${u.b}`),o.startsWith("on-")||a.push(`--v-theme-${o}-overlay-multiplier: ${getLuma(l)>.18?e:n}`)}return a}function useColor(t){return destructComputed(()=>{const e=[],n={};return t.value.background&&(isCssColor(t.value.background)?n.backgroundColor=t.value.background:e.push(`bg-${t.value.background}`)),t.value.text&&(isCssColor(t.value.text)?(n.color=t.value.text,n.caretColor=t.value.text):e.push(`text-${t.value.text}`)),{colorClasses:e,colorStyles:n}})}function useTextColor(t,e){const n=computed(()=>({text:isRef(t)?t.value:e?t[e]:null})),{colorClasses:a,colorStyles:o}=useColor(n);return{textColorClasses:a,textColorStyles:o}}function useBackgroundColor(t,e){const n=computed(()=>({background:isRef(t)?t.value:e?t[e]:null})),{colorClasses:a,colorStyles:o}=useColor(n);return{backgroundColorClasses:a,backgroundColorStyles:o}}const VDivider=defineComponent({name:"VDivider",props:{color:String,inset:Boolean,length:[Number,String],thickness:[Number,String],vertical:Boolean,...makeThemeProps()},setup(t,e){let{attrs:n}=e;const{themeClasses:a}=provideTheme(t),{backgroundColorClasses:o,backgroundColorStyles:l}=useBackgroundColor(toRef(t,"color")),u=computed(()=>{const d={};return t.length&&(d[t.vertical?"maxHeight":"maxWidth"]=convertToUnit(t.length)),t.thickness&&(d[t.vertical?"borderRightWidth":"borderTopWidth"]=convertToUnit(t.thickness)),d});return useRender(()=>createVNode("hr",{class:[{"v-divider":!0,"v-divider--inset":t.inset,"v-divider--vertical":t.vertical},a.value,o.value],style:[u.value,l.value],"aria-orientation":!n.role||n.role==="separator"?t.vertical?"vertical":"horizontal":void 0,role:`${n.role||"separator"}`},null)),{}}}),VList$1="",VDefaultsProvider=defineComponent$1({name:"VDefaultsProvider",props:{defaults:Object,reset:[Number,String],root:Boolean,scoped:Boolean},setup(t,e){let{slots:n}=e;const{defaults:a,reset:o,root:l,scoped:u}=toRefs(t);return provideDefaults(a,{reset:o,root:l,scoped:u}),()=>{var d;return(d=n.default)==null?void 0:d.call(n)}}});function createCssTransition(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"top center 0",n=arguments.length>2?arguments[2]:void 0;return defineComponent({name:t,props:{group:Boolean,hideOnLeave:Boolean,leaveAbsolute:Boolean,mode:{type:String,default:n},origin:{type:String,default:e}},setup(a,o){let{slots:l}=o;return()=>{const u=a.group?TransitionGroup:Transition;return h(u,{name:t,mode:a.mode,onBeforeEnter(d){d.style.transformOrigin=a.origin},onLeave(d){if(a.leaveAbsolute){const{offsetTop:m,offsetLeft:y,offsetWidth:b,offsetHeight:_}=d;d._transitionInitialStyles={position:d.style.position,top:d.style.top,left:d.style.left,width:d.style.width,height:d.style.height},d.style.position="absolute",d.style.top=`${m}px`,d.style.left=`${y}px`,d.style.width=`${b}px`,d.style.height=`${_}px`}a.hideOnLeave&&d.style.setProperty("display","none","important")},onAfterLeave(d){if(a.leaveAbsolute&&d!=null&&d._transitionInitialStyles){const{position:m,top:y,left:b,width:_,height:w}=d._transitionInitialStyles;delete d._transitionInitialStyles,d.style.position=m||"",d.style.top=y||"",d.style.left=b||"",d.style.width=_||"",d.style.height=w||""}}},l.default)}}})}function createJavascriptTransition(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"in-out";return defineComponent({name:t,props:{mode:{type:String,default:n}},setup(a,o){let{slots:l}=o;return()=>h(Transition,{name:t,...e},l.default)}})}function ExpandTransitionGenerator(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";const n=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1)?"width":"height",a=camelize(`offset-${n}`);return{onBeforeEnter(u){u._parent=u.parentNode,u._initialStyle={transition:u.style.transition,overflow:u.style.overflow,[n]:u.style[n]}},onEnter(u){const d=u._initialStyle;u.style.setProperty("transition","none","important"),u.style.overflow="hidden";const m=`${u[a]}px`;u.style[n]="0",u.offsetHeight,u.style.transition=d.transition,t&&u._parent&&u._parent.classList.add(t),requestAnimationFrame(()=>{u.style[n]=m})},onAfterEnter:l,onEnterCancelled:l,onLeave(u){u._initialStyle={transition:"",overflow:u.style.overflow,[n]:u.style[n]},u.style.overflow="hidden",u.style[n]=`${u[a]}px`,u.offsetHeight,requestAnimationFrame(()=>u.style[n]="0")},onAfterLeave:o,onLeaveCancelled:o};function o(u){t&&u._parent&&u._parent.classList.remove(t),l(u)}function l(u){const d=u._initialStyle[n];u.style.overflow=u._initialStyle.overflow,d!=null&&(u.style[n]=d),delete u._initialStyle}}createCssTransition("fab-transition","center center","out-in");createCssTransition("dialog-bottom-transition");createCssTransition("dialog-top-transition");const VFadeTransition=createCssTransition("fade-transition");createCssTransition("scale-transition");createCssTransition("scroll-x-transition");createCssTransition("scroll-x-reverse-transition");createCssTransition("scroll-y-transition");createCssTransition("scroll-y-reverse-transition");createCssTransition("slide-x-transition");createCssTransition("slide-x-reverse-transition");createCssTransition("slide-y-transition");createCssTransition("slide-y-reverse-transition");const VExpandTransition=createJavascriptTransition("expand-transition",ExpandTransitionGenerator());createJavascriptTransition("expand-x-transition",ExpandTransitionGenerator("",!0));const ListKey=Symbol.for("vuetify:list");function createList(){const t=inject$1(ListKey,{hasPrepend:ref(!1),updateHasPrepend:()=>null}),e={hasPrepend:ref(!1),updateHasPrepend:n=>{n&&(e.hasPrepend.value=n)}};return provide(ListKey,e),t}function useList(){return inject$1(ListKey,null)}const aliases$1={collapse:"mdi-chevron-up",complete:"mdi-check",cancel:"mdi-close-circle",close:"mdi-close",delete:"mdi-close-circle",clear:"mdi-close-circle",success:"mdi-check-circle",info:"mdi-information",warning:"mdi-alert-circle",error:"mdi-close-circle",prev:"mdi-chevron-left",next:"mdi-chevron-right",checkboxOn:"mdi-checkbox-marked",checkboxOff:"mdi-checkbox-blank-outline",checkboxIndeterminate:"mdi-minus-box",delimiter:"mdi-circle",sortAsc:"mdi-arrow-up",sortDesc:"mdi-arrow-down",expand:"mdi-chevron-down",menu:"mdi-menu",subgroup:"mdi-menu-down",dropdown:"mdi-menu-down",radioOn:"mdi-radiobox-marked",radioOff:"mdi-radiobox-blank",edit:"mdi-pencil",ratingEmpty:"mdi-star-outline",ratingFull:"mdi-star",ratingHalf:"mdi-star-half-full",loading:"mdi-cached",first:"mdi-page-first",last:"mdi-page-last",unfold:"mdi-unfold-more-horizontal",file:"mdi-paperclip",plus:"mdi-plus",minus:"mdi-minus"},mdi={component:t=>h(VClassIcon,{...t,class:"mdi"})},IconValue=[String,Function,Object],IconSymbol=Symbol.for("vuetify:icons"),makeIconProps=propsFactory({icon:{type:IconValue},tag:{type:String,required:!0}},"icon"),VComponentIcon=defineComponent({name:"VComponentIcon",props:makeIconProps(),setup(t,e){let{slots:n}=e;return()=>{var a;return createVNode(t.tag,null,{default:()=>[t.icon?createVNode(t.icon,null,null):(a=n.default)==null?void 0:a.call(n)]})}}}),VSvgIcon=defineComponent({name:"VSvgIcon",inheritAttrs:!1,props:makeIconProps(),setup(t,e){let{attrs:n}=e;return()=>createVNode(t.tag,mergeProps(n,{style:null}),{default:()=>[createVNode("svg",{class:"v-icon__svg",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",role:"img","aria-hidden":"true"},[createVNode("path",{d:t.icon},null)])]})}});defineComponent({name:"VLigatureIcon",props:makeIconProps(),setup(t){return()=>createVNode(t.tag,null,{default:()=>[t.icon]})}});const VClassIcon=defineComponent({name:"VClassIcon",props:makeIconProps(),setup(t){return()=>createVNode(t.tag,{class:t.icon},null)}}),defaultSets={svg:{component:VSvgIcon},class:{component:VClassIcon}};function createIcons(t){return mergeDeep({defaultSet:"mdi",sets:{...defaultSets,mdi},aliases:aliases$1},t)}const useIcon=t=>{const e=inject$1(IconSymbol);if(!e)throw new Error("Missing Vuetify Icons provide!");return{iconData:computed(()=>{const a=isRef(t)?t.value:t.icon;if(!a)return{component:VComponentIcon};let o=a;if(typeof o=="string"&&(o=o.trim(),o.startsWith("$"))){var l;o=(l=e.aliases)==null?void 0:l[o.slice(1)]}if(!o)throw new Error(`Could not find aliased icon "${a}"`);if(typeof o!="string")return{component:VComponentIcon,icon:o};const u=Object.keys(e.sets).find(y=>typeof o=="string"&&o.startsWith(`${y}:`)),d=u?o.slice(u.length+1):o;return{component:e.sets[u??e.defaultSet].component,icon:d}})}},makeTagProps=propsFactory({tag:{type:String,default:"div"}},"tag");function useProxiedModel(t,e,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:_=>_,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:_=>_;const l=getCurrentInstance("useProxiedModel"),u=ref(t[e]!==void 0?t[e]:n),d=toKebabCase(e),y=computed(d!==e?()=>{var _,w,E,A;return t[e],!!(((_=l.vnode.props)!=null&&_.hasOwnProperty(e)||(w=l.vnode.props)!=null&&w.hasOwnProperty(d))&&((E=l.vnode.props)!=null&&E.hasOwnProperty(`onUpdate:${e}`)||(A=l.vnode.props)!=null&&A.hasOwnProperty(`onUpdate:${d}`)))}:()=>{var _,w;return t[e],!!((_=l.vnode.props)!=null&&_.hasOwnProperty(e)&&(w=l.vnode.props)!=null&&w.hasOwnProperty(`onUpdate:${e}`))});useToggleScope(()=>!y.value,()=>{watch(()=>t[e],_=>{u.value=_})});const b=computed({get(){return a(y.value?t[e]:u.value)},set(_){const w=o(_);(y.value?t[e]:u.value)===w||a(y.value?t[e]:u.value)===_||(u.value=w,l?.emit(`update:${e}`,w))}});return Object.defineProperty(b,"externalValue",{get:()=>y.value?t[e]:u.value}),b}const singleOpenStrategy={open:t=>{let{id:e,value:n,opened:a,parents:o}=t;if(n){const l=new Set;l.add(e);let u=o.get(e);for(;u!=null;)l.add(u),u=o.get(u);return l}else return a.delete(e),a},select:()=>null},multipleOpenStrategy={open:t=>{let{id:e,value:n,opened:a,parents:o}=t;if(n){let l=o.get(e);for(a.add(e);l!=null&&l!==e;)a.add(l),l=o.get(l);return a}else a.delete(e);return a},select:()=>null},listOpenStrategy={open:multipleOpenStrategy.open,select:t=>{let{id:e,value:n,opened:a,parents:o}=t;if(!n)return a;const l=[];let u=o.get(e);for(;u!=null;)l.push(u),u=o.get(u);return new Set(l)}},independentSelectStrategy=t=>{const e={select:n=>{let{id:a,value:o,selected:l}=n;if(t&&!o){const u=Array.from(l.entries()).reduce((d,m)=>{let[y,b]=m;return b==="on"?[...d,y]:d},[]);if(u.length===1&&u[0]===a)return l}return l.set(a,o?"on":"off"),l},in:(n,a,o)=>{let l=new Map;for(const u of n||[])l=e.select({id:u,value:!0,selected:new Map(l),children:a,parents:o});return l},out:n=>{const a=[];for(const[o,l]of n.entries())l==="on"&&a.push(o);return a}};return e},independentSingleSelectStrategy=t=>{const e=independentSelectStrategy(t);return{select:a=>{let{selected:o,id:l,...u}=a;const d=o.has(l)?new Map([[l,o.get(l)]]):new Map;return e.select({...u,id:l,selected:d})},in:(a,o,l)=>{let u=new Map;return a!=null&&a.length&&(u=e.in(a.slice(0,1),o,l)),u},out:(a,o,l)=>e.out(a,o,l)}},leafSelectStrategy=t=>{const e=independentSelectStrategy(t);return{select:a=>{let{id:o,selected:l,children:u,...d}=a;return u.has(o)?l:e.select({id:o,selected:l,children:u,...d})},in:e.in,out:e.out}},leafSingleSelectStrategy=t=>{const e=independentSingleSelectStrategy(t);return{select:a=>{let{id:o,selected:l,children:u,...d}=a;return u.has(o)?l:e.select({id:o,selected:l,children:u,...d})},in:e.in,out:e.out}},classicSelectStrategy=t=>{const e={select:n=>{let{id:a,value:o,selected:l,children:u,parents:d}=n;const m=new Map(l),y=[a];for(;y.length;){const _=y.shift();l.set(_,o?"on":"off"),u.has(_)&&y.push(...u.get(_))}let b=d.get(a);for(;b;){const _=u.get(b),w=_.every(A=>l.get(A)==="on"),E=_.every(A=>!l.has(A)||l.get(A)==="off");l.set(b,w?"on":E?"off":"indeterminate"),b=d.get(b)}return t&&!o&&Array.from(l.entries()).reduce((w,E)=>{let[A,C]=E;return C==="on"?[...w,A]:w},[]).length===0?m:l},in:(n,a,o)=>{let l=new Map;for(const u of n||[])l=e.select({id:u,value:!0,selected:new Map(l),children:a,parents:o});return l},out:(n,a)=>{const o=[];for(const[l,u]of n.entries())u==="on"&&!a.has(l)&&o.push(l);return o}};return e},VNestedSymbol=Symbol.for("vuetify:nested"),emptyNested={id:ref(),root:{register:()=>null,unregister:()=>null,parents:ref(new Map),children:ref(new Map),open:()=>null,openOnSelect:()=>null,select:()=>null,opened:ref(new Set),selected:ref(new Map),selectedValues:ref([])}},makeNestedProps=propsFactory({selectStrategy:[String,Function],openStrategy:[String,Object],opened:Array,selected:Array,mandatory:Boolean},"nested"),useNested=t=>{let e=!1;const n=ref(new Map),a=ref(new Map),o=useProxiedModel(t,"opened",t.opened,_=>new Set(_),_=>[..._.values()]),l=computed(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single-leaf":return leafSingleSelectStrategy(t.mandatory);case"leaf":return leafSelectStrategy(t.mandatory);case"independent":return independentSelectStrategy(t.mandatory);case"single-independent":return independentSingleSelectStrategy(t.mandatory);case"classic":default:return classicSelectStrategy(t.mandatory)}}),u=computed(()=>{if(typeof t.openStrategy=="object")return t.openStrategy;switch(t.openStrategy){case"list":return listOpenStrategy;case"single":return singleOpenStrategy;case"multiple":default:return multipleOpenStrategy}}),d=useProxiedModel(t,"selected",t.selected,_=>l.value.in(_,n.value,a.value),_=>l.value.out(_,n.value,a.value));onBeforeUnmount(()=>{e=!0});function m(_){const w=[];let E=_;for(;E!=null;)w.unshift(E),E=a.value.get(E);return w}const y=getCurrentInstance("nested"),b={id:ref(),root:{opened:o,selected:d,selectedValues:computed(()=>{const _=[];for(const[w,E]of d.value.entries())E==="on"&&_.push(w);return _}),register:(_,w,E)=>{w&&_!==w&&a.value.set(_,w),E&&n.value.set(_,[]),w!=null&&n.value.set(w,[...n.value.get(w)||[],_])},unregister:_=>{if(e)return;n.value.delete(_);const w=a.value.get(_);if(w){const E=n.value.get(w)??[];n.value.set(w,E.filter(A=>A!==_))}a.value.delete(_),o.value.delete(_)},open:(_,w,E)=>{y.emit("click:open",{id:_,value:w,path:m(_),event:E});const A=u.value.open({id:_,value:w,opened:new Set(o.value),children:n.value,parents:a.value,event:E});A&&(o.value=A)},openOnSelect:(_,w,E)=>{const A=u.value.select({id:_,value:w,selected:new Map(d.value),opened:new Set(o.value),children:n.value,parents:a.value,event:E});A&&(o.value=A)},select:(_,w,E)=>{y.emit("click:select",{id:_,value:w,path:m(_),event:E});const A=l.value.select({id:_,value:w,selected:new Map(d.value),children:n.value,parents:a.value,event:E});A&&(d.value=A),b.root.openOnSelect(_,w,E)},children:n,parents:a}};return provide(VNestedSymbol,b),b.root},useNestedItem=(t,e)=>{const n=inject$1(VNestedSymbol,emptyNested),a=computed(()=>t.value??Symbol(getUid())),o={...n,id:a,open:(l,u)=>n.root.open(a.value,l,u),openOnSelect:(l,u)=>n.root.openOnSelect(a.value,l,u),isOpen:computed(()=>n.root.opened.value.has(a.value)),parent:computed(()=>n.root.parents.value.get(a.value)),select:(l,u)=>n.root.select(a.value,l,u),isSelected:computed(()=>n.root.selected.value.get(a.value)==="on"),isIndeterminate:computed(()=>n.root.selected.value.get(a.value)==="indeterminate"),isLeaf:computed(()=>!n.root.children.value.get(a.value)),isGroupActivator:n.isGroupActivator};return!n.isGroupActivator&&n.root.register(a.value,n.id.value,e),onBeforeUnmount(()=>{!n.isGroupActivator&&n.root.unregister(a.value)}),e&&provide(VNestedSymbol,o),o},useNestedGroupActivator=()=>{const t=inject$1(VNestedSymbol,emptyNested);provide(VNestedSymbol,{...t,isGroupActivator:!0})},VListGroupActivator=defineComponent({name:"VListGroupActivator",setup(t,e){let{slots:n}=e;return useNestedGroupActivator(),()=>{var a;return(a=n.default)==null?void 0:a.call(n)}}}),makeVListGroupProps=propsFactory({activeColor:String,color:String,collapseIcon:{type:IconValue,default:"$collapse"},expandIcon:{type:IconValue,default:"$expand"},prependIcon:IconValue,appendIcon:IconValue,fluid:Boolean,subgroup:Boolean,value:null,...makeTagProps()},"v-list-group"),VListGroup=genericComponent()({name:"VListGroup",props:{title:String,...makeVListGroupProps()},setup(t,e){let{slots:n}=e;const{isOpen:a,open:o,id:l}=useNestedItem(toRef(t,"value"),!0),u=computed(()=>`v-list-group--id-${String(l.value)}`),d=useList();function m(_){o(!a.value,_)}const y=computed(()=>({onClick:m,class:"v-list-group__header",id:u.value})),b=computed(()=>a.value?t.collapseIcon:t.expandIcon);return useRender(()=>{var _;return createVNode(t.tag,{class:["v-list-group",{"v-list-group--prepend":d?.hasPrepend.value,"v-list-group--fluid":t.fluid,"v-list-group--subgroup":t.subgroup,"v-list-group--open":a.value}]},{default:()=>[n.activator&&createVNode(VDefaultsProvider,{defaults:{VListItem:{active:a.value,activeColor:t.activeColor,color:t.color,prependIcon:t.prependIcon||t.subgroup&&b.value,appendIcon:t.appendIcon||!t.subgroup&&b.value,title:t.title,value:t.value}}},{default:()=>[createVNode(VListGroupActivator,null,{default:()=>[n.activator({props:y.value,isOpen:a})]})]}),createVNode(VExpandTransition,null,{default:()=>[withDirectives(createVNode("div",{class:"v-list-group__items",role:"group","aria-labelledby":u.value},[(_=n.default)==null?void 0:_.call(n)]),[[vShow,a.value]])]})]})}),{}}});function filterListGroupProps(t){return pick(t,Object.keys(VListGroup.props))}const VListItem$1="",VAvatar$1="",VIcon$1="",predefinedSizes=["x-small","small","default","large","x-large"],makeSizeProps=propsFactory({size:{type:[String,Number],default:"default"}},"size");function useSize(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return destructComputed(()=>{let n,a;return includes$1(predefinedSizes,t.size)?n=`${e}--size-${t.size}`:t.size&&(a={width:convertToUnit(t.size),height:convertToUnit(t.size)}),{sizeClasses:n,sizeStyles:a}})}const makeVIconProps=propsFactory({color:String,start:Boolean,end:Boolean,icon:IconValue,...makeSizeProps(),...makeTagProps({tag:"i"}),...makeThemeProps()},"v-icon"),VIcon=defineComponent({name:"VIcon",props:makeVIconProps(),setup(t,e){let{attrs:n,slots:a}=e,o;a.default&&(o=computed(()=>{var b,_;const w=(b=a.default)==null?void 0:b.call(a);if(w)return(_=w.filter(E=>E.type===Text&&E.children&&typeof E.children=="string")[0])==null?void 0:_.children}));const{themeClasses:l}=provideTheme(t),{iconData:u}=useIcon(o||t),{sizeClasses:d}=useSize(t),{textColorClasses:m,textColorStyles:y}=useTextColor(toRef(t,"color"));return useRender(()=>{var b;return createVNode(u.value.component,{tag:t.tag,icon:u.value.icon,class:["v-icon","notranslate",l.value,d.value,m.value,{"v-icon--clickable":!!n.onClick,"v-icon--start":t.start,"v-icon--end":t.end}],style:[d.value?void 0:{fontSize:convertToUnit(t.size),height:convertToUnit(t.size),width:convertToUnit(t.size)},y.value],role:n.onClick?"button":void 0,"aria-hidden":!n.onClick},{default:()=>[(b=a.default)==null?void 0:b.call(a)]})}),{}}}),VImg$1="",VResponsive$1="",makeDimensionProps=propsFactory({height:[Number,String],maxHeight:[Number,String],maxWidth:[Number,String],minHeight:[Number,String],minWidth:[Number,String],width:[Number,String]},"dimension");function useDimension(t){return{dimensionStyles:computed(()=>({height:convertToUnit(t.height),maxHeight:convertToUnit(t.maxHeight),maxWidth:convertToUnit(t.maxWidth),minHeight:convertToUnit(t.minHeight),minWidth:convertToUnit(t.minWidth),width:convertToUnit(t.width)}))}}function useAspectStyles(t){return{aspectStyles:computed(()=>{const e=Number(t.aspectRatio);return e?{paddingBottom:String(1/e*100)+"%"}:void 0})}}const VResponsive=defineComponent({name:"VResponsive",props:{aspectRatio:[String,Number],contentClass:String,...makeDimensionProps()},setup(t,e){let{slots:n}=e;const{aspectStyles:a}=useAspectStyles(t),{dimensionStyles:o}=useDimension(t);return useRender(()=>{var l;return createVNode("div",{class:"v-responsive",style:o.value},[createVNode("div",{class:"v-responsive__sizer",style:a.value},null),(l=n.additional)==null?void 0:l.call(n),n.default&&createVNode("div",{class:["v-responsive__content",t.contentClass]},[n.default()])])}),{}}});function mounted$1(t,e){if(!SUPPORTS_INTERSECTION)return;const n=e.modifiers||{},a=e.value,{handler:o,options:l}=typeof a=="object"?a:{handler:a,options:{}},u=new IntersectionObserver(function(){var d;let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],y=arguments.length>1?arguments[1]:void 0;const b=(d=t._observe)==null?void 0:d[e.instance.$.uid];if(!b)return;const _=m.some(w=>w.isIntersecting);o&&(!n.quiet||b.init)&&(!n.once||_||b.init)&&o(_,m,y),_&&n.once?unmounted$1(t,e):b.init=!0},l);t._observe=Object(t._observe),t._observe[e.instance.$.uid]={init:!1,observer:u},u.observe(t)}function unmounted$1(t,e){var n;const a=(n=t._observe)==null?void 0:n[e.instance.$.uid];a&&(a.observer.unobserve(t),delete t._observe[e.instance.$.uid])}const Intersect={mounted:mounted$1,unmounted:unmounted$1},intersect=Intersect,makeTransitionProps=propsFactory({transition:{type:[Boolean,String,Object],default:"fade-transition",validator:t=>t!==!0}},"transition"),MaybeTransition=(t,e)=>{let{slots:n}=e;const{transition:a,...o}=t,{component:l=Transition,...u}=typeof a=="object"?a:{};return h(l,mergeProps(typeof a=="string"?{name:a}:u,o),n)},VImg=defineComponent({name:"VImg",directives:{intersect},props:{aspectRatio:[String,Number],alt:String,cover:Boolean,eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},srcset:String,width:[String,Number],...makeTransitionProps()},emits:{loadstart:t=>!0,load:t=>!0,error:t=>!0},setup(t,e){let{emit:n,slots:a}=e;const o=ref(""),l=ref(),u=ref(t.eager?"loading":"idle"),d=ref(),m=ref(),y=computed(()=>t.src&&typeof t.src=="object"?{src:t.src.src,srcset:t.srcset||t.src.srcset,lazySrc:t.lazySrc||t.src.lazySrc,aspect:Number(t.aspectRatio||t.src.aspect||0)}:{src:t.src,srcset:t.srcset,lazySrc:t.lazySrc,aspect:Number(t.aspectRatio||0)}),b=computed(()=>y.value.aspect||d.value/m.value||0);watch(()=>t.src,()=>{_(u.value!=="idle")}),watch(b,(Z,Q)=>{!Z&&Q&&l.value&&k(l.value)}),onBeforeMount(()=>_());function _(Z){if(!(t.eager&&Z)&&!(SUPPORTS_INTERSECTION&&!Z&&!t.eager)){if(u.value="loading",y.value.lazySrc){const Q=new Image;Q.src=y.value.lazySrc,k(Q,null)}y.value.src&&nextTick$3(()=>{var Q,oe;if(n("loadstart",((Q=l.value)==null?void 0:Q.currentSrc)||y.value.src),(oe=l.value)!=null&&oe.complete){if(l.value.naturalWidth||E(),u.value==="error")return;b.value||k(l.value,null),w()}else b.value||k(l.value),A()})}}function w(){var Z;A(),u.value="loaded",n("load",((Z=l.value)==null?void 0:Z.currentSrc)||y.value.src)}function E(){var Z;u.value="error",n("error",((Z=l.value)==null?void 0:Z.currentSrc)||y.value.src)}function A(){const Z=l.value;Z&&(o.value=Z.currentSrc||Z.src)}let C=-1;function k(Z){let Q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const oe=()=>{clearTimeout(C);const{naturalHeight:ae,naturalWidth:U}=Z;ae||U?(d.value=U,m.value=ae):!Z.complete&&u.value==="loading"&&Q!=null?C=window.setTimeout(oe,Q):(Z.currentSrc.endsWith(".svg")||Z.currentSrc.startsWith("data:image/svg+xml"))&&(d.value=1,m.value=1)};oe()}const B=computed(()=>({"v-img__img--cover":t.cover,"v-img__img--contain":!t.cover})),D=()=>{var Z;if(!y.value.src||u.value==="idle")return null;const Q=createVNode("img",{class:["v-img__img",B.value],src:y.value.src,srcset:y.value.srcset,alt:"",sizes:t.sizes,ref:l,onLoad:w,onError:E},null),oe=(Z=a.sources)==null?void 0:Z.call(a);return createVNode(MaybeTransition,{transition:t.transition,appear:!0},{default:()=>[withDirectives(oe?createVNode("picture",{class:"v-img__picture"},[oe,Q]):Q,[[vShow,u.value==="loaded"]])]})},q=()=>createVNode(MaybeTransition,{transition:t.transition},{default:()=>[y.value.lazySrc&&u.value!=="loaded"&&createVNode("img",{class:["v-img__img","v-img__img--preload",B.value],src:y.value.lazySrc,alt:""},null)]}),j=()=>a.placeholder?createVNode(MaybeTransition,{transition:t.transition,appear:!0},{default:()=>[(u.value==="loading"||u.value==="error"&&!a.error)&&createVNode("div",{class:"v-img__placeholder"},[a.placeholder()])]}):null,J=()=>a.error?createVNode(MaybeTransition,{transition:t.transition,appear:!0},{default:()=>[u.value==="error"&&createVNode("div",{class:"v-img__error"},[a.error()])]}):null,Y=()=>t.gradient?createVNode("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${t.gradient})`}},null):null,L=ref(!1);{const Z=watch(b,Q=>{Q&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{L.value=!0})}),Z())})}return useRender(()=>withDirectives(createVNode(VResponsive,{class:["v-img",{"v-img--booting":!L.value}],style:{width:convertToUnit(t.width==="auto"?d.value:t.width)},aspectRatio:b.value,"aria-label":t.alt,role:t.alt?"img":void 0},{additional:()=>createVNode(Fragment,null,[createVNode(D,null,null),createVNode(q,null,null),createVNode(Y,null,null),createVNode(j,null,null),createVNode(J,null,null)]),default:a.default}),[[resolveDirective("intersect"),{handler:_,options:t.options},null,{once:!0}]])),{currentSrc:o,image:l,state:u,naturalWidth:d,naturalHeight:m}}}),allowedVariants=["elevated","flat","tonal","outlined","text","plain"];function genOverlays(t,e){return createVNode(Fragment,null,[t&&createVNode("span",{key:"overlay",class:`${e}__overlay`},null),createVNode("span",{key:"underlay",class:`${e}__underlay`},null)])}const makeVariantProps=propsFactory({color:String,variant:{type:String,default:"elevated",validator:t=>allowedVariants.includes(t)}},"variant");function useVariant(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();const n=computed(()=>{const{variant:l}=unref(t);return`${e}--variant-${l}`}),{colorClasses:a,colorStyles:o}=useColor(computed(()=>{const{variant:l,color:u}=unref(t);return{[["elevated","flat"].includes(l)?"background":"text"]:u}}));return{colorClasses:a,colorStyles:o,variantClasses:n}}const allowedDensities=[null,"default","comfortable","compact"],makeDensityProps=propsFactory({density:{type:String,default:"default",validator:t=>allowedDensities.includes(t)}},"density");function useDensity(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{densityClasses:computed(()=>`${e}--density-${t.density}`)}}const makeRoundedProps=propsFactory({rounded:{type:[Boolean,Number,String],default:void 0}},"rounded");function useRounded(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{roundedClasses:computed(()=>{const a=isRef(t)?t.value:t.rounded,o=[];if(a===!0||a==="")o.push(`${e}--rounded`);else if(typeof a=="string"||a===0)for(const l of String(a).split(" "))o.push(`rounded-${l}`);return o})}}const makeVAvatarProps=propsFactory({start:Boolean,end:Boolean,icon:IconValue,image:String,...makeDensityProps(),...makeRoundedProps(),...makeSizeProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"flat"})},"v-avatar"),VAvatar=defineComponent({name:"VAvatar",props:makeVAvatarProps(),setup(t,e){let{slots:n}=e;const{themeClasses:a}=provideTheme(t),{colorClasses:o,colorStyles:l,variantClasses:u}=useVariant(t),{densityClasses:d}=useDensity(t),{roundedClasses:m}=useRounded(t),{sizeClasses:y,sizeStyles:b}=useSize(t);return useRender(()=>{var _;return createVNode(t.tag,{class:["v-avatar",{"v-avatar--start":t.start,"v-avatar--end":t.end},a.value,o.value,d.value,m.value,y.value,u.value],style:[l.value,b.value]},{default:()=>[t.image?createVNode(VImg,{key:"image",src:t.image,alt:"",cover:!0},null):t.icon?createVNode(VIcon,{key:"icon",icon:t.icon},null):(_=n.default)==null?void 0:_.call(n),genOverlays(!1,"v-avatar")]})}),{}}}),VListItemSubtitle=createSimpleFunctional("v-list-item-subtitle"),VListItemTitle=createSimpleFunctional("v-list-item-title"),VRipple="",stopSymbol=Symbol("rippleStop"),DELAY_RIPPLE=80;function transform$1(t,e){t.style.transform=e,t.style.webkitTransform=e}function opacity(t,e){t.style.opacity=`calc(${e} * var(--v-theme-overlay-multiplier))`}function isTouchEvent(t){return t.constructor.name==="TouchEvent"}function isKeyboardEvent(t){return t.constructor.name==="KeyboardEvent"}const calculate=function(t,e){var n;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=0,l=0;if(!isKeyboardEvent(t)){const w=e.getBoundingClientRect(),E=isTouchEvent(t)?t.touches[t.touches.length-1]:t;o=E.clientX-w.left,l=E.clientY-w.top}let u=0,d=.3;(n=e._ripple)!=null&&n.circle?(d=.15,u=e.clientWidth/2,u=a.center?u:u+Math.sqrt((o-u)**2+(l-u)**2)/4):u=Math.sqrt(e.clientWidth**2+e.clientHeight**2)/2;const m=`${(e.clientWidth-u*2)/2}px`,y=`${(e.clientHeight-u*2)/2}px`,b=a.center?m:`${o-u}px`,_=a.center?y:`${l-u}px`;return{radius:u,scale:d,x:b,y:_,centerX:m,centerY:y}},ripples={show(t,e){var n;let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(e!=null&&(n=e._ripple)!=null&&n.enabled))return;const o=document.createElement("span"),l=document.createElement("span");o.appendChild(l),o.className="v-ripple__container",a.class&&(o.className+=` ${a.class}`);const{radius:u,scale:d,x:m,y,centerX:b,centerY:_}=calculate(t,e,a),w=`${u*2}px`;l.className="v-ripple__animation",l.style.width=w,l.style.height=w,e.appendChild(o);const E=window.getComputedStyle(e);E&&E.position==="static"&&(e.style.position="relative",e.dataset.previousPosition="static"),l.classList.add("v-ripple__animation--enter"),l.classList.add("v-ripple__animation--visible"),transform$1(l,`translate(${m}, ${y}) scale3d(${d},${d},${d})`),opacity(l,0),l.dataset.activated=String(performance.now()),setTimeout(()=>{l.classList.remove("v-ripple__animation--enter"),l.classList.add("v-ripple__animation--in"),transform$1(l,`translate(${b}, ${_}) scale3d(1,1,1)`),opacity(l,.08)},0)},hide(t){var e;if(!(t!=null&&(e=t._ripple)!=null&&e.enabled))return;const n=t.getElementsByClassName("v-ripple__animation");if(n.length===0)return;const a=n[n.length-1];if(a.dataset.isHiding)return;a.dataset.isHiding="true";const o=performance.now()-Number(a.dataset.activated),l=Math.max(250-o,0);setTimeout(()=>{a.classList.remove("v-ripple__animation--in"),a.classList.add("v-ripple__animation--out"),opacity(a,0),setTimeout(()=>{t.getElementsByClassName("v-ripple__animation").length===1&&t.dataset.previousPosition&&(t.style.position=t.dataset.previousPosition,delete t.dataset.previousPosition),a.parentNode&&t.removeChild(a.parentNode)},300)},l)}};function isRippleEnabled(t){return typeof t>"u"||!!t}function rippleShow(t){const e={},n=t.currentTarget;if(!(!(n!=null&&n._ripple)||n._ripple.touched||t[stopSymbol])){if(t[stopSymbol]=!0,isTouchEvent(t))n._ripple.touched=!0,n._ripple.isTouch=!0;else if(n._ripple.isTouch)return;if(e.center=n._ripple.centered||isKeyboardEvent(t),n._ripple.class&&(e.class=n._ripple.class),isTouchEvent(t)){if(n._ripple.showTimerCommit)return;n._ripple.showTimerCommit=()=>{ripples.show(t,n,e)},n._ripple.showTimer=window.setTimeout(()=>{var a;n!=null&&(a=n._ripple)!=null&&a.showTimerCommit&&(n._ripple.showTimerCommit(),n._ripple.showTimerCommit=null)},DELAY_RIPPLE)}else ripples.show(t,n,e)}}function rippleStop(t){t[stopSymbol]=!0}function rippleHide(t){const e=t.currentTarget;if(!(!e||!e._ripple)){if(window.clearTimeout(e._ripple.showTimer),t.type==="touchend"&&e._ripple.showTimerCommit){e._ripple.showTimerCommit(),e._ripple.showTimerCommit=null,e._ripple.showTimer=window.setTimeout(()=>{rippleHide(t)});return}window.setTimeout(()=>{e._ripple&&(e._ripple.touched=!1)}),ripples.hide(e)}}function rippleCancelShow(t){const e=t.currentTarget;!e||!e._ripple||(e._ripple.showTimerCommit&&(e._ripple.showTimerCommit=null),window.clearTimeout(e._ripple.showTimer))}let keyboardRipple=!1;function keyboardRippleShow(t){!keyboardRipple&&(t.keyCode===keyCodes.enter||t.keyCode===keyCodes.space)&&(keyboardRipple=!0,rippleShow(t))}function keyboardRippleHide(t){keyboardRipple=!1,rippleHide(t)}function focusRippleHide(t){keyboardRipple&&(keyboardRipple=!1,rippleHide(t))}function updateRipple(t,e,n){const{value:a,modifiers:o}=e,l=isRippleEnabled(a);if(l||ripples.hide(t),t._ripple=t._ripple??{},t._ripple.enabled=l,t._ripple.centered=o.center,t._ripple.circle=o.circle,isObject$3(a)&&a.class&&(t._ripple.class=a.class),l&&!n){if(o.stop){t.addEventListener("touchstart",rippleStop,{passive:!0}),t.addEventListener("mousedown",rippleStop);return}t.addEventListener("touchstart",rippleShow,{passive:!0}),t.addEventListener("touchend",rippleHide,{passive:!0}),t.addEventListener("touchmove",rippleCancelShow,{passive:!0}),t.addEventListener("touchcancel",rippleHide),t.addEventListener("mousedown",rippleShow),t.addEventListener("mouseup",rippleHide),t.addEventListener("mouseleave",rippleHide),t.addEventListener("keydown",keyboardRippleShow),t.addEventListener("keyup",keyboardRippleHide),t.addEventListener("blur",focusRippleHide),t.addEventListener("dragstart",rippleHide,{passive:!0})}else!l&&n&&removeListeners(t)}function removeListeners(t){t.removeEventListener("mousedown",rippleShow),t.removeEventListener("touchstart",rippleShow),t.removeEventListener("touchend",rippleHide),t.removeEventListener("touchmove",rippleCancelShow),t.removeEventListener("touchcancel",rippleHide),t.removeEventListener("mouseup",rippleHide),t.removeEventListener("mouseleave",rippleHide),t.removeEventListener("keydown",keyboardRippleShow),t.removeEventListener("keyup",keyboardRippleHide),t.removeEventListener("dragstart",rippleHide),t.removeEventListener("blur",focusRippleHide)}function mounted(t,e){updateRipple(t,e,!1)}function unmounted(t){delete t._ripple,removeListeners(t)}function updated(t,e){if(e.value===e.oldValue)return;const n=isRippleEnabled(e.oldValue);updateRipple(t,e,n)}const Ripple={mounted,unmounted,updated},makeBorderProps=propsFactory({border:[Boolean,Number,String]},"border");function useBorder(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{borderClasses:computed(()=>{const a=isRef(t)?t.value:t.border,o=[];if(a===!0||a==="")o.push(`${e}--border`);else if(typeof a=="string"||a===0)for(const l of String(a).split(" "))o.push(`border-${l}`);return o})}}const makeElevationProps=propsFactory({elevation:{type:[Number,String],validator(t){const e=parseInt(t);return!isNaN(e)&&e>=0&&e<=24}}},"elevation");function useElevation(t){return{elevationClasses:computed(()=>{const n=isRef(t)?t.value:t.elevation,a=[];return n==null||a.push(`elevation-${n}`),a})}}function useRouter(){var t,e;return(t=getCurrentInstance("useRouter"))==null||(e=t.proxy)==null?void 0:e.$router}function useLink$1(t,e){const n=resolveDynamicComponent("RouterLink"),a=computed(()=>!!(t.href||t.to)),o=computed(()=>a?.value||hasEvent(e,"click")||hasEvent(t,"click"));if(typeof n=="string")return{isLink:a,isClickable:o,href:toRef(t,"href")};const l=t.to?n.useLink(t):void 0;return{isLink:a,isClickable:o,route:l?.route,navigate:l?.navigate,isActive:l&&computed(()=>{var u,d;return t.exact?(u=l.isExactActive)==null?void 0:u.value:(d=l.isActive)==null?void 0:d.value}),href:computed(()=>t.to?l?.route.value.href:t.href)}}const makeRouterProps=propsFactory({href:String,replace:Boolean,to:[String,Object],exact:Boolean},"router"),VListItem=genericComponent()({name:"VListItem",directives:{Ripple},props:{active:{type:Boolean,default:void 0},activeClass:String,activeColor:String,appendAvatar:String,appendIcon:IconValue,disabled:Boolean,lines:String,link:{type:Boolean,default:void 0},nav:Boolean,prependAvatar:String,prependIcon:IconValue,ripple:{type:Boolean,default:!0},subtitle:[String,Number,Boolean],title:[String,Number,Boolean],value:null,onClick:EventProp,onClickOnce:EventProp,...makeBorderProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeRoundedProps(),...makeRouterProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},emits:{click:t=>!0},setup(t,e){let{attrs:n,slots:a,emit:o}=e;const l=useLink$1(t,n),u=computed(()=>t.value??l.href.value),{select:d,isSelected:m,isIndeterminate:y,isGroupActivator:b,root:_,parent:w,openOnSelect:E}=useNestedItem(u,!1),A=useList(),C=computed(()=>{var O;return t.active!==!1&&(t.active||((O=l.isActive)==null?void 0:O.value)||m.value)}),k=computed(()=>t.link!==!1&&l.isLink.value),B=computed(()=>!t.disabled&&t.link!==!1&&(t.link||l.isClickable.value||t.value!=null&&!!A)),D=computed(()=>t.rounded||t.nav),q=computed(()=>({color:C.value?t.activeColor??t.color:t.color,variant:t.variant}));watch(()=>{var O;return(O=l.isActive)==null?void 0:O.value},O=>{O&&w.value!=null&&_.open(w.value,!0),O&&E(O)},{immediate:!0});const{themeClasses:j}=provideTheme(t),{borderClasses:J}=useBorder(t),{colorClasses:Y,colorStyles:L,variantClasses:Z}=useVariant(q),{densityClasses:Q}=useDensity(t),{dimensionStyles:oe}=useDimension(t),{elevationClasses:ae}=useElevation(t),{roundedClasses:U}=useRounded(D),I=computed(()=>t.lines?`v-list-item--${t.lines}-line`:void 0),x=computed(()=>({isActive:C.value,select:d,isSelected:m.value,isIndeterminate:y.value}));function T(O){var z;o("click",O),!(b||!B.value)&&((z=l.navigate)==null||z.call(l,O),t.value!=null&&d(!m.value,O))}function M(O){(O.key==="Enter"||O.key===" ")&&(O.preventDefault(),T(O))}return useRender(()=>{var O,z,X,H,P;const S=k.value?"a":t.tag,F=!A||m.value||C.value,ue=a.title||t.title,ee=a.subtitle||t.subtitle,fe=!!(a.append||t.appendAvatar||t.appendIcon),le=!!(a.prepend||t.prependAvatar||t.prependIcon);return A?.updateHasPrepend(le),withDirectives(createVNode(S,{class:["v-list-item",{"v-list-item--active":C.value,"v-list-item--disabled":t.disabled,"v-list-item--link":B.value,"v-list-item--nav":t.nav,"v-list-item--prepend":!le&&A?.hasPrepend.value,[`${t.activeClass}`]:t.activeClass&&C.value},j.value,J.value,F?Y.value:void 0,Q.value,ae.value,I.value,U.value,Z.value],style:[F?L.value:void 0,oe.value],href:l.href.value,tabindex:B.value?0:void 0,onClick:T,onKeydown:B.value&&!k.value&&M},{default:()=>[genOverlays(B.value||C.value,"v-list-item"),le&&createVNode(VDefaultsProvider,{key:"prepend",defaults:{VAvatar:{density:t.density,image:t.prependAvatar},VIcon:{density:t.density,icon:t.prependIcon},VListItemAction:{start:!0}}},{default:()=>[createVNode("div",{class:"v-list-item__prepend"},[t.prependAvatar&&createVNode(VAvatar,{key:"prepend-avatar"},null),t.prependIcon&&createVNode(VIcon,{key:"prepend-icon"},null),(O=a.prepend)==null?void 0:O.call(a,x.value)])]}),createVNode("div",{class:"v-list-item__content","data-no-activator":""},[ue&&createVNode(VListItemTitle,{key:"title"},{default:()=>[((z=a.title)==null?void 0:z.call(a,{title:t.title}))??t.title]}),ee&&createVNode(VListItemSubtitle,{key:"subtitle"},{default:()=>[((X=a.subtitle)==null?void 0:X.call(a,{subtitle:t.subtitle}))??t.subtitle]}),(H=a.default)==null?void 0:H.call(a,x.value)]),fe&&createVNode(VDefaultsProvider,{key:"append",defaults:{VAvatar:{density:t.density,image:t.appendAvatar},VIcon:{density:t.density,icon:t.appendIcon},VListItemAction:{end:!0}}},{default:()=>[createVNode("div",{class:"v-list-item__append"},[(P=a.append)==null?void 0:P.call(a,x.value),t.appendIcon&&createVNode(VIcon,{key:"append-icon"},null),t.appendAvatar&&createVNode(VAvatar,{key:"append-avatar"},null)])]})]}),[[resolveDirective("ripple"),B.value&&t.ripple]])}),{}}}),VListSubheader=defineComponent({name:"VListSubheader",props:{color:String,inset:Boolean,sticky:Boolean,title:String,...makeTagProps()},setup(t,e){let{slots:n}=e;const{textColorClasses:a,textColorStyles:o}=useTextColor(toRef(t,"color"));return useRender(()=>{var l;const u=!!(n.default||t.title);return createVNode(t.tag,{class:["v-list-subheader",{"v-list-subheader--inset":t.inset,"v-list-subheader--sticky":t.sticky},a.value],style:{textColorStyles:o}},{default:()=>[u&&createVNode("div",{class:"v-list-subheader__text"},[((l=n.default)==null?void 0:l.call(n))??t.title])]})}),{}}}),VListChildren=genericComponent()({name:"VListChildren",props:{items:Array},setup(t,e){let{slots:n}=e;return createList(),()=>{var a,o;return((a=n.default)==null?void 0:a.call(n))??((o=t.items)==null?void 0:o.map(l=>{let{children:u,props:d,type:m,raw:y}=l;if(m==="divider"){var b;return((b=n.divider)==null?void 0:b.call(n,{props:d}))??createVNode(VDivider,d,null)}if(m==="subheader"){var _;return((_=n.subheader)==null?void 0:_.call(n,{props:d}))??createVNode(VListSubheader,d,{default:n.subheader})}const w={subtitle:n.subtitle?C=>{var k;return(k=n.subtitle)==null?void 0:k.call(n,{...C,item:y})}:void 0,prepend:n.prepend?C=>{var k;return(k=n.prepend)==null?void 0:k.call(n,{...C,item:y})}:void 0,append:n.append?C=>{var k;return(k=n.append)==null?void 0:k.call(n,{...C,item:y})}:void 0,default:n.default?C=>{var k;return(k=n.default)==null?void 0:k.call(n,{...C,item:y})}:void 0,title:n.title?C=>{var k;return(k=n.title)==null?void 0:k.call(n,{...C,item:y})}:void 0},[E,A]=filterListGroupProps(d);return u?createVNode(VListGroup,mergeProps({value:d?.value},E),{activator:C=>{let{props:k}=C;return n.header?n.header({...d,...k}):createVNode(VListItem,mergeProps(d,k),w)},default:()=>createVNode(VListChildren,{items:u},n)}):n.item?n.item(d):createVNode(VListItem,d,w)}))}}}),makeItemsProps=propsFactory({items:{type:Array,default:()=>[]},itemTitle:{type:[String,Array,Function],default:"title"},itemValue:{type:[String,Array,Function],default:"value"},itemChildren:{type:[Boolean,String,Array,Function],default:"children"},itemProps:{type:[Boolean,String,Array,Function],default:"props"},returnObject:Boolean},"item");function transformItem(t,e){const n=getPropertyFromItem(e,t.itemType,"item"),a=typeof e=="string"?e:getPropertyFromItem(e,t.itemTitle),o=getPropertyFromItem(e,t.itemValue,void 0),l=getPropertyFromItem(e,t.itemChildren),u=t.itemProps===!0?pick(e,["children"])[1]:getPropertyFromItem(e,t.itemProps),d={title:a,value:o,...u};return{type:n,title:d.title,value:d.value,props:d,children:n==="item"&&l?transformItems(t,l):void 0,raw:e}}function transformItems(t,e){const n=[];for(const a of e)n.push(transformItem(t,a));return n}function useListItems(t){return{items:computed(()=>transformItems(t,t.items))}}const VList=genericComponent()({name:"VList",props:{activeColor:String,activeClass:String,bgColor:String,disabled:Boolean,lines:{type:[Boolean,String],default:"one"},nav:Boolean,...makeNestedProps({selectStrategy:"single-leaf",openStrategy:"list"}),...makeBorderProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),itemType:{type:String,default:"type"},...makeItemsProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps({variant:"text"})},emits:{"update:selected":t=>!0,"update:opened":t=>!0,"click:open":t=>!0,"click:select":t=>!0},setup(t,e){let{slots:n}=e;const{items:a}=useListItems(t),{themeClasses:o}=provideTheme(t),{backgroundColorClasses:l,backgroundColorStyles:u}=useBackgroundColor(toRef(t,"bgColor")),{borderClasses:d}=useBorder(t),{densityClasses:m}=useDensity(t),{dimensionStyles:y}=useDimension(t),{elevationClasses:b}=useElevation(t),{roundedClasses:_}=useRounded(t),{open:w,select:E}=useNested(t),A=computed(()=>t.lines?`v-list--${t.lines}-line`:void 0),C=toRef(t,"activeColor"),k=toRef(t,"color");createList(),provideDefaults({VListGroup:{activeColor:C,color:k},VListItem:{activeClass:toRef(t,"activeClass"),activeColor:C,color:k,density:toRef(t,"density"),disabled:toRef(t,"disabled"),lines:toRef(t,"lines"),nav:toRef(t,"nav"),variant:toRef(t,"variant")}});const B=ref(!1),D=ref();function q(Z){B.value=!0}function j(Z){B.value=!1}function J(Z){var Q;!B.value&&!(Z.relatedTarget&&(Q=D.value)!=null&&Q.contains(Z.relatedTarget))&&L()}function Y(Z){if(D.value){if(Z.key==="ArrowDown")L("next");else if(Z.key==="ArrowUp")L("prev");else if(Z.key==="Home")L("first");else if(Z.key==="End")L("last");else return;Z.preventDefault()}}function L(Z){if(!D.value)return;const Q=[...D.value.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')].filter(x=>!x.hasAttribute("disabled")),oe=Q.indexOf(document.activeElement);if(Z)if(Z==="first"){var U;(U=Q[0])==null||U.focus()}else if(Z==="last"){var I;(I=Q.at(-1))==null||I.focus()}else{let x,T=oe;const M=Z==="next"?1:-1;do T+=M,x=Q[T];while((!x||x.offsetParent==null)&&T<Q.length&&T>=0);x?x.focus():L(Z==="next"?"first":"last")}else if(!D.value.contains(document.activeElement)){var ae;(ae=Q[0])==null||ae.focus()}}return useRender(()=>createVNode(t.tag,{ref:D,class:["v-list",{"v-list--disabled":t.disabled,"v-list--nav":t.nav},o.value,l.value,d.value,m.value,b.value,A.value,_.value],style:[u.value,y.value],role:"listbox","aria-activedescendant":void 0,onFocusin:q,onFocusout:j,onFocus:J,onKeydown:Y},{default:()=>[createVNode(VListChildren,{items:a.value},n)]})),{open:w,select:E,focus:L}}}),VNavigationDrawer$1="";function useResizeObserver(t){const e=ref(),n=ref();if(IN_BROWSER){const a=new ResizeObserver(o=>{t?.(o,a),o.length&&(n.value=o[0].contentRect)});onBeforeUnmount(()=>{a.disconnect()}),watch(e,(o,l)=>{l&&(a.unobserve(l),n.value=void 0),o&&a.observe(o)},{flush:"post"})}return{resizeRef:e,contentRect:readonly$3(n)}}const VuetifyLayoutKey=Symbol.for("vuetify:layout"),VuetifyLayoutItemKey=Symbol.for("vuetify:layout-item"),ROOT_ZINDEX=1e3,makeLayoutProps=propsFactory({overlaps:{type:Array,default:()=>[]},fullHeight:Boolean},"layout"),makeLayoutItemProps=propsFactory({name:{type:String},order:{type:[Number,String],default:0},absolute:Boolean},"layout-item");function useLayout(){const t=inject$1(VuetifyLayoutKey);if(!t)throw new Error("[Vuetify] Could not find injected layout");return{getLayoutItem:t.getLayoutItem,mainRect:t.mainRect,mainStyles:t.mainStyles}}function useLayoutItem(t){const e=inject$1(VuetifyLayoutKey);if(!e)throw new Error("[Vuetify] Could not find injected layout");const n=t.id??`layout-item-${getUid()}`,a=getCurrentInstance("useLayoutItem");provide(VuetifyLayoutItemKey,{id:n});const o=ref(!1);onDeactivated(()=>o.value=!0),onActivated(()=>o.value=!1);const{layoutItemStyles:l,layoutItemScrimStyles:u}=e.register(a,{...t,active:computed(()=>o.value?!1:t.active.value),id:n});return onBeforeUnmount(()=>e.unregister(n)),{layoutItemStyles:l,layoutRect:e.layoutRect,layoutItemScrimStyles:u}}const generateLayers=(t,e,n,a)=>{let o={top:0,left:0,right:0,bottom:0};const l=[{id:"",layer:{...o}}];for(const u of t){const d=e.get(u),m=n.get(u),y=a.get(u);if(!d||!m||!y)continue;const b={...o,[d.value]:parseInt(o[d.value],10)+(y.value?parseInt(m.value,10):0)};l.push({id:u,layer:b}),o=b}return l};function createLayout(t){const e=inject$1(VuetifyLayoutKey,null),n=computed(()=>e?e.rootZIndex.value-100:ROOT_ZINDEX),a=ref([]),o=reactive(new Map),l=reactive(new Map),u=reactive(new Map),d=reactive(new Map),m=reactive(new Map),{resizeRef:y,contentRect:b}=useResizeObserver(),_=computed(()=>{const Y=new Map,L=t.overlaps??[];for(const Z of L.filter(Q=>Q.includes(":"))){const[Q,oe]=Z.split(":");if(!a.value.includes(Q)||!a.value.includes(oe))continue;const ae=o.get(Q),U=o.get(oe),I=l.get(Q),x=l.get(oe);!ae||!U||!I||!x||(Y.set(oe,{position:ae.value,amount:parseInt(I.value,10)}),Y.set(Q,{position:U.value,amount:-parseInt(x.value,10)}))}return Y}),w=computed(()=>{const Y=[...new Set([...u.values()].map(Z=>Z.value))].sort((Z,Q)=>Z-Q),L=[];for(const Z of Y){const Q=a.value.filter(oe=>{var ae;return((ae=u.get(oe))==null?void 0:ae.value)===Z});L.push(...Q)}return generateLayers(L,o,l,d)}),E=computed(()=>!Array.from(m.values()).some(Y=>Y.value)),A=computed(()=>w.value[w.value.length-1].layer),C=computed(()=>({"--v-layout-left":convertToUnit(A.value.left),"--v-layout-right":convertToUnit(A.value.right),"--v-layout-top":convertToUnit(A.value.top),"--v-layout-bottom":convertToUnit(A.value.bottom),...E.value?void 0:{transition:"none"}})),k=computed(()=>w.value.slice(1).map((Y,L)=>{let{id:Z}=Y;const{layer:Q}=w.value[L],oe=l.get(Z),ae=o.get(Z);return{id:Z,...Q,size:Number(oe.value),position:ae.value}})),B=Y=>k.value.find(L=>L.id===Y),D=getCurrentInstance("createLayout"),q=ref(!1);onMounted(()=>{q.value=!0}),provide(VuetifyLayoutKey,{register:(Y,L)=>{let{id:Z,order:Q,position:oe,layoutSize:ae,elementSize:U,active:I,disableTransitions:x,absolute:T}=L;u.set(Z,Q),o.set(Z,oe),l.set(Z,ae),d.set(Z,I),x&&m.set(Z,x);const O=findChildrenWithProvide(VuetifyLayoutItemKey,D?.vnode).indexOf(Y);O>-1?a.value.splice(O,0,Z):a.value.push(Z);const z=computed(()=>k.value.findIndex(S=>S.id===Z)),X=computed(()=>n.value+w.value.length*2-z.value*2),H=computed(()=>{const S=oe.value==="left"||oe.value==="right",F=oe.value==="right",ue=oe.value==="bottom",ee={[oe.value]:0,zIndex:X.value,transform:`translate${S?"X":"Y"}(${(I.value?0:-110)*(F||ue?-1:1)}%)`,position:T.value||n.value!==ROOT_ZINDEX?"absolute":"fixed",...E.value?void 0:{transition:"none"}};if(!q.value)return ee;const fe=k.value[z.value];if(!fe)throw new Error(`[Vuetify] Could not find layout item "${Z}"`);const le=_.value.get(Z);return le&&(fe[le.position]+=le.amount),{...ee,height:S?`calc(100% - ${fe.top}px - ${fe.bottom}px)`:U.value?`${U.value}px`:void 0,left:F?void 0:`${fe.left}px`,right:F?`${fe.right}px`:void 0,top:oe.value!=="bottom"?`${fe.top}px`:void 0,bottom:oe.value!=="top"?`${fe.bottom}px`:void 0,width:S?U.value?`${U.value}px`:void 0:`calc(100% - ${fe.left}px - ${fe.right}px)`}}),P=computed(()=>({zIndex:X.value-1}));return{layoutItemStyles:H,layoutItemScrimStyles:P,zIndex:X}},unregister:Y=>{u.delete(Y),o.delete(Y),l.delete(Y),d.delete(Y),m.delete(Y),a.value=a.value.filter(L=>L!==Y)},mainRect:A,mainStyles:C,getLayoutItem:B,items:k,layoutRect:b,rootZIndex:n});const j=computed(()=>["v-layout",{"v-layout--full-height":t.fullHeight}]),J=computed(()=>({zIndex:n.value,position:e?"relative":void 0,overflow:e?"hidden":void 0}));return{layoutClasses:j,layoutStyles:J,getLayoutItem:B,items:k,layoutRect:b,layoutRef:y}}const DisplaySymbol=Symbol.for("vuetify:display"),defaultDisplayOptions={mobileBreakpoint:"lg",thresholds:{xs:0,sm:600,md:960,lg:1280,xl:1920,xxl:2560}},parseDisplayOptions=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:defaultDisplayOptions;return mergeDeep(defaultDisplayOptions,t)};function getClientWidth(t){return IN_BROWSER&&!t?window.innerWidth:0}function getClientHeight(t){return IN_BROWSER&&!t?window.innerHeight:0}function getPlatform(){const t=IN_BROWSER?window.navigator.userAgent:"ssr";function e(A){return Boolean(t.match(A))}const n=e(/android/i),a=e(/iphone|ipad|ipod/i),o=e(/cordova/i),l=e(/electron/i),u=e(/chrome/i),d=e(/edge/i),m=e(/firefox/i),y=e(/opera/i),b=e(/win/i),_=e(/mac/i),w=e(/linux/i),E=e(/ssr/i);return{android:n,ios:a,cordova:o,electron:l,chrome:u,edge:d,firefox:m,opera:y,win:b,mac:_,linux:w,touch:SUPPORTS_TOUCH,ssr:E}}function createDisplay(t,e){const{thresholds:n,mobileBreakpoint:a}=parseDisplayOptions(t),o=ref(getClientHeight(e)),l=getPlatform(),u=reactive({}),d=ref(getClientWidth(e));function m(){o.value=getClientHeight(),d.value=getClientWidth()}return watchEffect(()=>{const y=d.value<n.sm,b=d.value<n.md&&!y,_=d.value<n.lg&&!(b||y),w=d.value<n.xl&&!(_||b||y),E=d.value<n.xxl&&!(w||_||b||y),A=d.value>=n.xxl,C=y?"xs":b?"sm":_?"md":w?"lg":E?"xl":"xxl",k=typeof a=="number"?a:n[a],B=l.ssr?l.android||l.ios||l.opera:d.value<k;u.xs=y,u.sm=b,u.md=_,u.lg=w,u.xl=E,u.xxl=A,u.smAndUp=!y,u.mdAndUp=!(y||b),u.lgAndUp=!(y||b||_),u.xlAndUp=!(y||b||_||w),u.smAndDown=!(_||w||E||A),u.mdAndDown=!(w||E||A),u.lgAndDown=!(E||A),u.xlAndDown=!A,u.name=C,u.height=o.value,u.width=d.value,u.mobile=B,u.mobileBreakpoint=a,u.platform=l,u.thresholds=n}),IN_BROWSER&&window.addEventListener("resize",m,{passive:!0}),{...toRefs(u),update:m,ssr:!!e}}function useDisplay(){const t=inject$1(DisplaySymbol);if(!t)throw new Error("Could not find Vuetify display injection");return t}const en={badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected",nextMonthAriaLabel:"Next month",nextYearAriaLabel:"Next year",prevMonthAriaLabel:"Previous month",prevYearAriaLabel:"Previous year"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},input:{clear:"Clear {0}",prependAction:"{0} prepended action",appendAction:"{0} appended action"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"},pagination:{ariaLabel:{root:"Pagination Navigation",next:"Next page",previous:"Previous page",page:"Goto Page {0}",currentPage:"Page {0}, Current Page",first:"First page",last:"Last page"}},rating:{ariaLabel:{item:"Rating {0} of {1}"}}},LANG_PREFIX="$vuetify.",replace=(t,e)=>t.replace(/\{(\d+)\}/g,(n,a)=>String(e[+a])),createTranslateFunction=(t,e,n)=>function(a){for(var o=arguments.length,l=new Array(o>1?o-1:0),u=1;u<o;u++)l[u-1]=arguments[u];if(!a.startsWith(LANG_PREFIX))return replace(a,l);const d=a.replace(LANG_PREFIX,""),m=t.value&&n.value[t.value],y=e.value&&n.value[e.value];let b=getObjectValueByPath(m,d,null);return b||(consoleWarn(`Translation key "${a}" not found in "${t.value}", trying fallback locale`),b=getObjectValueByPath(y,d,null)),b||(consoleError(`Translation key "${a}" not found in fallback`),b=a),typeof b!="string"&&(consoleError(`Translation key "${a}" has a non-string value`),b=a),replace(b,l)};function createNumberFunction(t,e){return(n,a)=>new Intl.NumberFormat([t.value,e.value],a).format(n)}function useProvided(t,e,n){const a=useProxiedModel(t,e,t[e]??n.value);return a.value=t[e]??n.value,watch(n,o=>{t[e]==null&&(a.value=n.value)}),a}function createProvideFunction(t){return e=>{const n=useProvided(e,"locale",t.current),a=useProvided(e,"fallback",t.fallback),o=useProvided(e,"messages",t.messages);return{name:"vuetify",current:n,fallback:a,messages:o,t:createTranslateFunction(n,a,o),n:createNumberFunction(n,a),provide:createProvideFunction({current:n,fallback:a,messages:o})}}}function createVuetifyAdapter(t){const e=ref(t?.locale??"en"),n=ref(t?.fallback??"en"),a=ref({en,...t?.messages});return{name:"vuetify",current:e,fallback:n,messages:a,t:createTranslateFunction(e,n,a),n:createNumberFunction(e,n),provide:createProvideFunction({current:e,fallback:n,messages:a})}}const defaultRtl={af:!1,ar:!0,bg:!1,ca:!1,ckb:!1,cs:!1,de:!1,el:!1,en:!1,es:!1,et:!1,fa:!1,fi:!1,fr:!1,hr:!1,hu:!1,he:!0,id:!1,it:!1,ja:!1,ko:!1,lv:!1,lt:!1,nl:!1,no:!1,pl:!1,pt:!1,ro:!1,ru:!1,sk:!1,sl:!1,srCyrl:!1,srLatn:!1,sv:!1,th:!1,tr:!1,az:!1,uk:!1,vi:!1,zhHans:!1,zhHant:!1},LocaleSymbol=Symbol.for("vuetify:locale");function isLocaleInstance(t){return t.name!=null}function createLocale(t){const e=t!=null&&t.adapter&&isLocaleInstance(t?.adapter)?t?.adapter:createVuetifyAdapter(t),n=createRtl(e,t);return{...e,...n}}function createRtl(t,e){const n=ref(e?.rtl??defaultRtl),a=computed(()=>n.value[t.current.value]??!1);return{isRtl:a,rtl:n,rtlClasses:computed(()=>`v-locale--is-${a.value?"rtl":"ltr"}`)}}function useRtl(){const t=inject$1(LocaleSymbol);if(!t)throw new Error("[Vuetify] Could not find injected rtl instance");return{isRtl:t.isRtl,rtlClasses:t.rtlClasses}}function useSsrBoot(){const t=ref(!1);return onMounted(()=>{window.requestAnimationFrame(()=>{t.value=!0})}),{ssrBootStyles:computed(()=>t.value?void 0:{transition:"none !important"}),isBooted:readonly$3(t)}}function useSticky(t){let{rootEl:e,isSticky:n,layoutItemStyles:a}=t;const o=ref(!1),l=ref(0),u=computed(()=>{const y=typeof o.value=="boolean"?"top":o.value;return[n.value?{top:"auto",bottom:"auto",height:void 0}:void 0,o.value?{[y]:convertToUnit(l.value)}:{top:a.value.top}]});onMounted(()=>{watch(n,y=>{y?window.addEventListener("scroll",m,{passive:!0}):window.removeEventListener("scroll",m)},{immediate:!0})}),onBeforeUnmount(()=>{document.removeEventListener("scroll",m)});let d=0;function m(){const y=d>window.scrollY?"up":"down",b=e.value.getBoundingClientRect(),_=parseFloat(a.value.top??0),w=window.scrollY-Math.max(0,l.value-_),E=b.height+Math.max(l.value,_)-window.scrollY-window.innerHeight;b.height<window.innerHeight-_?(o.value="top",l.value=_):y==="up"&&o.value==="bottom"||y==="down"&&o.value==="top"?(l.value=window.scrollY+b.top,o.value=!0):y==="down"&&E<=0?(l.value=0,o.value="bottom"):y==="up"&&w<=0&&(l.value=b.top+w,o.value="top"),d=window.scrollY}return{isStuck:o,stickyStyles:u}}const HORIZON=100,HISTORY=20;function kineticEnergyToVelocity(t){const e=1.41421356237;return(t<0?-1:1)*Math.sqrt(Math.abs(t))*e}function calculateImpulseVelocity(t){if(t.length<2)return 0;if(t.length===2)return t[1].t===t[0].t?0:(t[1].d-t[0].d)/(t[1].t-t[0].t);let e=0;for(let n=t.length-1;n>0;n--){if(t[n].t===t[n-1].t)continue;const a=kineticEnergyToVelocity(e),o=(t[n].d-t[n-1].d)/(t[n].t-t[n-1].t);e+=(o-a)*Math.abs(o),n===t.length-1&&(e*=.5)}return kineticEnergyToVelocity(e)*1e3}function useVelocity(){const t={};function e(o){Array.from(o.changedTouches).forEach(l=>{(t[l.identifier]??(t[l.identifier]=new CircularBuffer(HISTORY))).push([o.timeStamp,l])})}function n(o){Array.from(o.changedTouches).forEach(l=>{delete t[l.identifier]})}function a(o){var l;const u=(l=t[o])==null?void 0:l.values().reverse();if(!u)throw new Error(`No samples for touch id ${o}`);const d=u[0],m=[],y=[];for(const b of u){if(d[0]-b[0]>HORIZON)break;m.push({t:b[0],d:b[1].clientX}),y.push({t:b[0],d:b[1].clientY})}return{x:calculateImpulseVelocity(m),y:calculateImpulseVelocity(y),get direction(){const{x:b,y:_}=this,[w,E]=[Math.abs(b),Math.abs(_)];return w>E&&b>=0?"right":w>E&&b<=0?"left":E>w&&_>=0?"down":E>w&&_<=0?"up":oops$1()}}}return{addMovement:e,endTouch:n,getVelocity:a}}function oops$1(){throw new Error}function useTouch(t){let{isActive:e,isTemporary:n,width:a,touchless:o,position:l}=t;onMounted(()=>{window.addEventListener("touchstart",B,{passive:!0}),window.addEventListener("touchmove",D,{passive:!1}),window.addEventListener("touchend",q,{passive:!0})}),onBeforeUnmount(()=>{window.removeEventListener("touchstart",B),window.removeEventListener("touchmove",D),window.removeEventListener("touchend",q)});const u=computed(()=>l.value!=="bottom"),{addMovement:d,endTouch:m,getVelocity:y}=useVelocity();let b=!1;const _=ref(!1),w=ref(0),E=ref(0);let A;function C(J,Y){return(l.value==="left"?J:l.value==="right"?document.documentElement.clientWidth-J:l.value==="bottom"?document.documentElement.clientHeight-J:oops())-(Y?a.value:0)}function k(J){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const L=l.value==="left"?(J-E.value)/a.value:l.value==="right"?(document.documentElement.clientWidth-J-E.value)/a.value:l.value==="bottom"?(document.documentElement.clientHeight-J-E.value)/a.value:oops();return Y?Math.max(0,Math.min(1,L)):L}function B(J){if(o.value)return;const Y=J.changedTouches[0].clientX,L=J.changedTouches[0].clientY,Z=25,Q=l.value==="left"?Y<Z:l.value==="right"?Y>document.documentElement.clientWidth-Z:l.value==="bottom"?L>document.documentElement.clientHeight-Z:oops(),oe=e.value&&(l.value==="left"?Y<a.value:l.value==="right"?Y>document.documentElement.clientWidth-a.value:l.value==="bottom"?L>document.documentElement.clientHeight-a.value:oops());(Q||oe||e.value&&n.value)&&(b=!0,A=[Y,L],E.value=C(u.value?Y:L,e.value),w.value=k(u.value?Y:L),m(J),d(J))}function D(J){const Y=J.changedTouches[0].clientX,L=J.changedTouches[0].clientY;if(b){if(!J.cancelable){b=!1;return}const Q=Math.abs(Y-A[0]),oe=Math.abs(L-A[1]);(u.value?Q>oe&&Q>3:oe>Q&&oe>3)?(_.value=!0,b=!1):(u.value?oe:Q)>3&&(b=!1)}if(!_.value)return;J.preventDefault(),d(J);const Z=k(u.value?Y:L,!1);w.value=Math.max(0,Math.min(1,Z)),Z>1?E.value=C(u.value?Y:L,!0):Z<0&&(E.value=C(u.value?Y:L,!1))}function q(J){if(b=!1,!_.value)return;d(J),_.value=!1;const Y=y(J.changedTouches[0].identifier),L=Math.abs(Y.x),Z=Math.abs(Y.y);(u.value?L>Z&&L>400:Z>L&&Z>3)?e.value=Y.direction===({left:"right",right:"left",bottom:"up"}[l.value]||oops()):e.value=w.value>.5}const j=computed(()=>_.value?{transform:l.value==="left"?`translateX(calc(-100% + ${w.value*a.value}px))`:l.value==="right"?`translateX(calc(100% - ${w.value*a.value}px))`:l.value==="bottom"?`translateY(calc(100% - ${w.value*a.value}px))`:oops(),transition:"none"}:void 0);return{isDragging:_,dragProgress:w,dragStyles:j}}function oops(){throw new Error}const locations=["start","end","left","right","bottom"],VNavigationDrawer=defineComponent({name:"VNavigationDrawer",props:{color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[String,Boolean],default:!0},image:String,temporary:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:t=>locations.includes(t)},sticky:Boolean,...makeBorderProps(),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"nav"}),...makeThemeProps()},emits:{"update:modelValue":t=>!0,"update:rail":t=>!0},setup(t,e){let{attrs:n,emit:a,slots:o}=e;const{isRtl:l}=useRtl(),{themeClasses:u}=provideTheme(t),{borderClasses:d}=useBorder(t),{backgroundColorClasses:m,backgroundColorStyles:y}=useBackgroundColor(toRef(t,"color")),{elevationClasses:b}=useElevation(t),{mobile:_}=useDisplay(),{roundedClasses:w}=useRounded(t),E=useRouter(),A=useProxiedModel(t,"modelValue",null,O=>!!O),{ssrBootStyles:C}=useSsrBoot(),k=ref(),B=ref(!1),D=computed(()=>t.rail&&t.expandOnHover&&B.value?Number(t.width):Number(t.rail?t.railWidth:t.width)),q=computed(()=>toPhysical(t.location,l.value)),j=computed(()=>!t.permanent&&(_.value||t.temporary)),J=computed(()=>t.sticky&&!j.value&&q.value!=="bottom");t.expandOnHover&&t.rail!=null&&watch(B,O=>a("update:rail",!O)),t.disableResizeWatcher||watch(j,O=>!t.permanent&&nextTick$3(()=>A.value=!O)),!t.disableRouteWatcher&&E&&watch(E.currentRoute,()=>j.value&&(A.value=!1)),watch(()=>t.permanent,O=>{O&&(A.value=!0)}),onBeforeMount(()=>{t.modelValue!=null||j.value||(A.value=t.permanent||!_.value)});const{isDragging:Y,dragProgress:L,dragStyles:Z}=useTouch({isActive:A,isTemporary:j,width:D,touchless:toRef(t,"touchless"),position:q}),Q=computed(()=>{const O=j.value?0:t.rail&&t.expandOnHover?Number(t.railWidth):D.value;return Y.value?O*L.value:O}),{layoutItemStyles:oe,layoutRect:ae,layoutItemScrimStyles:U}=useLayoutItem({id:t.name,order:computed(()=>parseInt(t.order,10)),position:q,layoutSize:Q,elementSize:D,active:computed(()=>A.value||Y.value),disableTransitions:computed(()=>Y.value),absolute:computed(()=>t.absolute||J.value&&typeof I.value!="string")}),{isStuck:I,stickyStyles:x}=useSticky({rootEl:k,isSticky:J,layoutItemStyles:oe}),T=useBackgroundColor(computed(()=>typeof t.scrim=="string"?t.scrim:null)),M=computed(()=>({...Y.value?{opacity:L.value*.2,transition:"none"}:void 0,...ae.value?{left:convertToUnit(ae.value.left),right:convertToUnit(ae.value.right),top:convertToUnit(ae.value.top),bottom:convertToUnit(ae.value.bottom)}:void 0,...U.value}));return provideDefaults({VList:{bgColor:"transparent"}}),useRender(()=>{var O,z,X,H;const P=o.image||t.image;return createVNode(Fragment,null,[createVNode(t.tag,mergeProps({ref:k,onMouseenter:()=>B.value=!0,onMouseleave:()=>B.value=!1,class:["v-navigation-drawer",`v-navigation-drawer--${q.value}`,{"v-navigation-drawer--expand-on-hover":t.expandOnHover,"v-navigation-drawer--floating":t.floating,"v-navigation-drawer--is-hovering":B.value,"v-navigation-drawer--rail":t.rail,"v-navigation-drawer--temporary":j.value,"v-navigation-drawer--active":A.value,"v-navigation-drawer--sticky":J.value},u.value,m.value,d.value,b.value,w.value],style:[y.value,oe.value,Z.value,C.value,x.value]},n),{default:()=>[P&&createVNode("div",{key:"image",class:"v-navigation-drawer__img"},[o.image?(O=o.image)==null?void 0:O.call(o,{image:t.image}):createVNode("img",{src:t.image,alt:""},null)]),o.prepend&&createVNode("div",{class:"v-navigation-drawer__prepend"},[(z=o.prepend)==null?void 0:z.call(o)]),createVNode("div",{class:"v-navigation-drawer__content"},[(X=o.default)==null?void 0:X.call(o)]),o.append&&createVNode("div",{class:"v-navigation-drawer__append"},[(H=o.append)==null?void 0:H.call(o)])]}),createVNode(Transition,{name:"fade-transition"},{default:()=>[j.value&&(Y.value||A.value)&&!!t.scrim&&createVNode("div",{class:["v-navigation-drawer__scrim",T.backgroundColorClasses.value],style:[M.value,T.backgroundColorStyles.value],onClick:()=>A.value=!1},null)]})])}),{isStuck:I}}}),_sfc_main$4=defineComponent$1({__name:"NavigationPrincipale",setup(t){const e=inject$1("constl"),n=ref();let a;return onMounted(async()=>{a=await e.profil.suivreImage({f:o=>n.value=o})}),onUnmounted(async()=>{a&&await a()}),(o,l)=>(openBlock(),createBlock(VNavigationDrawer,{"expand-on-hover":"",permanent:"",rail:""},{default:withCtx(()=>[createVNode(VList,null,{default:withCtx(()=>[createVNode(VListItem,{"prepend-avatar":"https://randomuser.me/api/portraits/women/85.jpg",title:"Sandra Adams",subtitle:"sandra_a88@gmailcom"})]),_:1}),createVNode(VDivider),createVNode(VList,{density:"compact",class:"align-start",nav:""},{default:withCtx(()=>[createVNode(VListItem,{"prepend-icon":"mdi-folder",title:"My Files",value:"myfiles"}),createVNode(VListItem,{"prepend-icon":"mdi-account-multiple",title:"Shared with me",value:"shared"}),createVNode(VListItem,{"prepend-icon":"mdi-star",title:"Starred",value:"starred"})]),_:1})]),_:1}))}}),_hoisted_1$2=createBaseVNode("p",null," Julien Malard-Adam ",-1),_sfc_main$3=defineComponent$1({__name:"PagePrincipale",setup(t){const e="0.2.0";return(n,a)=>{const o=resolveComponent("router-view");return openBlock(),createElementBlock("div",null,[createVNode(_sfc_main$4),createVNode(o,null,{default:withCtx(({Component:l})=>[createVNode(Transition,{name:"fade"},{default:withCtx(()=>[(openBlock(),createBlock(resolveDynamicComponent(l)))]),_:2},1024)]),_:1}),createBaseVNode("p",null," Version: "+toDisplayString$1(unref(e)),1),_hoisted_1$2])}}});let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const byteToHex=[];for(let t=0;t<256;++t)byteToHex.push((t+256).toString(16).slice(1));function unsafeStringify(t,e=0){return(byteToHex[t[e+0]]+byteToHex[t[e+1]]+byteToHex[t[e+2]]+byteToHex[t[e+3]]+"-"+byteToHex[t[e+4]]+byteToHex[t[e+5]]+"-"+byteToHex[t[e+6]]+byteToHex[t[e+7]]+"-"+byteToHex[t[e+8]]+byteToHex[t[e+9]]+"-"+byteToHex[t[e+10]]+byteToHex[t[e+11]]+byteToHex[t[e+12]]+byteToHex[t[e+13]]+byteToHex[t[e+14]]+byteToHex[t[e+15]]).toLowerCase()}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(t,e,n){if(native.randomUUID&&!e&&!t)return native.randomUUID();t=t||{};const a=t.random||(t.rng||rng)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=a[o];return e}return unsafeStringify(a)}const _hoisted_1$1=["width"],_hoisted_2$1=createBaseVNode("title",null,"Logo Constellation",-1),_hoisted_3$1=["x1","y1","x2","y2"],_hoisted_4$1=["cx","cy"],_hoisted_5=["to","dur","begin"],_sfc_main$2=defineComponent$1({__name:"LogoAnimé",props:{largeur:null,delai:null,debut:null},setup(t){const e=t,n=computed(()=>e.delai.toString()+"s"),a=ref([{cls:"cls-1",x:70.1742129851985,y:1.87,r:2},{cls:"cls-2",x:67.306684713793,y:16.47,r:5},{cls:"cls-3",x:34.3464829934943,y:10.01,r:3},{cls:"cls-4",x:22.5783740121382,y:31.93,r:3},{cls:"cls-1",x:13.8115094092477,y:56.91,r:2},{cls:"cls-2",x:46.9376282583068,y:69.76,r:6},{cls:"cls-3",x:86.0040169410121,y:61.32,r:4},{cls:"cls-4",x:91.0120944854386,y:54.13,r:2},{cls:"cls-1",x:112.68938567,y:63.71,r:5},{cls:"cls-2",x:100.419159062132,y:66.3,r:2},{cls:"cls-3",x:88.4938654324761,y:82.18,r:4},{cls:"cls-4",x:97.9593284722526,y:84.1,r:3},{cls:"cls-1",x:69.5525695323757,y:90.44,r:5},{cls:"cls-2",x:64.1411605466533,y:94.6,r:2},{cls:"cls-3",x:157.031284111252,y:83.37,r:3},{cls:"cls-4",x:136.188490590752,y:68.42,r:5},{cls:"cls-1",x:142.952888267913,y:53.85,r:2},{cls:"cls-2",x:162.02953761516,y:50.8,r:4},{cls:"cls-3",x:185.910142776055,y:57.71,r:4},{cls:"cls-4",x:137.021896694756,y:38.01,r:5},{cls:"cls-1",x:142.973627909008,y:29.65,r:3}].map(l=>Object.assign({},l,{begin:`${Math.random()*e.debut}s`,i:v4()}))),o=ref([{x1:70.1742129851985,y1:1.87,x2:34.3464829934943,y2:10.01,i:v4()},{x1:67.306684713793,y1:16.47,x2:34.3464829934943,y2:10.01,i:v4()},{x1:34.3464829934943,y1:10.01,x2:22.5783740121382,y2:31.93,i:v4()},{x1:22.5783740121382,y1:31.93,x2:13.8115094092477,y2:56.91,i:v4()},{x1:13.8115094092477,y1:56.91,x2:46.9376282583068,y2:69.76,i:v4()},{x1:46.9376282583068,y1:69.76,x2:86.0040169410121,y2:61.32,i:v4()},{x1:86.0040169410121,y1:61.32,x2:91.0120944854386,y2:54.13,i:v4()},{x1:86.0040169410121,y1:61.32,x2:100.419159062132,y2:66.3,i:v4()},{x1:91.0120944854386,y1:54.13,x2:112.68938567,y2:63.71,i:v4()},{x1:100.419159062132,y1:66.3,x2:112.68938567,y2:63.71,i:v4()},{x1:112.68938567,y1:63.71,x2:97.9593284722526,y2:84.1,i:v4()},{x1:97.9593284722526,y1:84.1,x2:88.4938654324761,y2:82.18,i:v4()},{x1:88.4938654324761,y1:82.18,x2:69.5525695323757,y2:90.44,i:v4()},{x1:69.5525695323757,y1:90.44,x2:64.1411605466533,y2:94.6,i:v4()},{x1:112.68938567,y1:63.71,x2:136.188490590752,y2:68.42,i:v4()},{x1:136.188490590752,y1:68.42,x2:157.031284111252,y2:83.37,i:v4()},{x1:136.188490590752,y1:68.42,x2:142.952888267913,y2:53.85,i:v4()},{x1:112.68938567,y1:63.71,x2:142.952888267913,y2:53.85,i:v4()},{x1:142.952888267913,y1:53.85,x2:137.021896694756,y2:38.01,i:v4()},{x1:91.0120944854386,y1:54.13,x2:137.021896694756,y2:38.01,i:v4()},{x1:137.021896694756,y1:38.01,x2:142.973627909008,y2:29.65,i:v4()},{x1:137.021896694756,y1:38.01,x2:162.02953761516,y2:50.8,i:v4()},{x1:142.952888267913,y1:53.85,x2:162.02953761516,y2:50.8,i:v4()},{x1:162.02953761516,y1:50.8,x2:185.910142776055,y2:57.71,i:v4()}]);return(l,u)=>(openBlock(),createElementBlock("svg",{id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 -10 200 110",width:t.largeur},[_hoisted_2$1,(openBlock(!0),createElementBlock(Fragment,null,renderList(o.value,d=>(openBlock(),createElementBlock("line",{key:d.i,class:"l",x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2},null,8,_hoisted_3$1))),128)),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.value,d=>(openBlock(),createElementBlock("circle",{key:d.i,class:normalizeClass(d.cls),cx:d.x,cy:d.y},[createBaseVNode("animate",{attributeName:"r",to:d.r,dur:unref(n),begin:d.begin,fill:"freeze",repeatCount:"1"},null,8,_hoisted_5)],10,_hoisted_4$1))),128))],8,_hoisted_1$1))}}),LogoAnim__vue_vue_type_style_index_0_lang="",VBtn$1="",VBtnToggle="",VBtnGroup$1="",VBtnGroup=defineComponent({name:"VBtnGroup",props:{divided:Boolean,...makeBorderProps(),...makeDensityProps(),...makeElevationProps(),...makeRoundedProps(),...makeTagProps(),...makeThemeProps(),...makeVariantProps()},setup(t,e){let{slots:n}=e;const{themeClasses:a}=provideTheme(t),{densityClasses:o}=useDensity(t),{borderClasses:l}=useBorder(t),{elevationClasses:u}=useElevation(t),{roundedClasses:d}=useRounded(t);provideDefaults({VBtn:{height:"auto",color:toRef(t,"color"),density:toRef(t,"density"),flat:!0,variant:toRef(t,"variant")}}),useRender(()=>createVNode(t.tag,{class:["v-btn-group",{"v-btn-group--divided":t.divided},a.value,l.value,o.value,u.value,d.value]},n))}}),makeGroupProps=propsFactory({modelValue:{type:null,default:void 0},multiple:Boolean,mandatory:[Boolean,String],max:Number,selectedClass:String,disabled:Boolean},"group"),makeGroupItemProps=propsFactory({value:null,disabled:Boolean,selectedClass:String},"group-item");function useGroupItem(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const a=getCurrentInstance("useGroupItem");if(!a)throw new Error("[Vuetify] useGroupItem composable must be used inside a component setup function");const o=getUid();provide(Symbol.for(`${e.description}:id`),o);const l=inject$1(e,null);if(!l){if(!n)return l;throw new Error(`[Vuetify] Could not find useGroup injection with symbol ${e.description}`)}const u=toRef(t,"value"),d=computed(()=>l.disabled.value||t.disabled);l.register({id:o,value:u,disabled:d},a),onBeforeUnmount(()=>{l.unregister(o)});const m=computed(()=>l.isSelected(o)),y=computed(()=>m.value&&[l.selectedClass.value,t.selectedClass]);return watch(m,b=>{a.emit("group:selected",{value:b})}),{id:o,isSelected:m,toggle:()=>l.select(o,!m.value),select:b=>l.select(o,b),selectedClass:y,value:u,disabled:d,group:l}}function useGroup(t,e){let n=!1;const a=reactive([]),o=useProxiedModel(t,"modelValue",[],w=>w==null?[]:getIds(a,wrapInArray(w)),w=>{const E=getValues(a,w);return t.multiple?E:E[0]}),l=getCurrentInstance("useGroup");function u(w,E){const A=w,C=Symbol.for(`${e.description}:id`),B=findChildrenWithProvide(C,l?.vnode).indexOf(E);B>-1?a.splice(B,0,A):a.push(A)}function d(w){if(n)return;m();const E=a.findIndex(A=>A.id===w);a.splice(E,1)}function m(){const w=a.find(E=>!E.disabled);w&&t.mandatory==="force"&&!o.value.length&&(o.value=[w.id])}onMounted(()=>{m()}),onBeforeUnmount(()=>{n=!0});function y(w,E){const A=a.find(C=>C.id===w);if(!(E&&A!=null&&A.disabled))if(t.multiple){const C=o.value.slice(),k=C.findIndex(D=>D===w),B=~k;if(E=E??!B,B&&t.mandatory&&C.length<=1||!B&&t.max!=null&&C.length+1>t.max)return;k<0&&E?C.push(w):k>=0&&!E&&C.splice(k,1),o.value=C}else{const C=o.value.includes(w);if(t.mandatory&&C)return;o.value=E??!C?[w]:[]}}function b(w){if(t.multiple&&consoleWarn('This method is not supported when using "multiple" prop'),o.value.length){const E=o.value[0],A=a.findIndex(B=>B.id===E);let C=(A+w)%a.length,k=a[C];for(;k.disabled&&C!==A;)C=(C+w)%a.length,k=a[C];if(k.disabled)return;o.value=[a[C].id]}else{const E=a.find(A=>!A.disabled);E&&(o.value=[E.id])}}const _={register:u,unregister:d,selected:o,select:y,disabled:toRef(t,"disabled"),prev:()=>b(a.length-1),next:()=>b(1),isSelected:w=>o.value.includes(w),selectedClass:computed(()=>t.selectedClass),items:computed(()=>a),getItemIndex:w=>getItemIndex(a,w)};return provide(e,_),_}function getItemIndex(t,e){const n=getIds(t,[e]);return n.length?t.findIndex(a=>a.id===n[0]):-1}function getIds(t,e){const n=[];for(let a=0;a<t.length;a++){const o=t[a];o.value!=null?e.find(l=>deepEqual$3(l,o.value))!=null&&n.push(o.id):e.includes(a)&&n.push(o.id)}return n}function getValues(t,e){const n=[];for(let a=0;a<t.length;a++){const o=t[a];e.includes(o.id)&&n.push(o.value!=null?o.value:a)}return n}const VBtnToggleSymbol=Symbol.for("vuetify:v-btn-toggle");genericComponent()({name:"VBtnToggle",props:makeGroupProps(),emits:{"update:modelValue":t=>!0},setup(t,e){let{slots:n}=e;const{isSelected:a,next:o,prev:l,select:u,selected:d}=useGroup(t,VBtnToggleSymbol);return useRender(()=>{var m;return createVNode(VBtnGroup,{class:"v-btn-toggle"},{default:()=>[(m=n.default)==null?void 0:m.call(n,{isSelected:a,next:o,prev:l,select:u,selected:d})]})}),{next:o,prev:l,select:u}}});const VProgressCircular$1="";function useIntersectionObserver(t){const e=ref(),n=ref(!1);if(SUPPORTS_INTERSECTION){const a=new IntersectionObserver(o=>{t?.(o,a),n.value=!!o.find(l=>l.isIntersecting)});onBeforeUnmount(()=>{a.disconnect()}),watch(e,(o,l)=>{l&&(a.unobserve(l),n.value=!1),o&&a.observe(o)},{flush:"post"})}return{intersectionRef:e,isIntersecting:n}}const VProgressCircular=defineComponent({name:"VProgressCircular",props:{bgColor:String,color:String,indeterminate:[Boolean,String],modelValue:{type:[Number,String],default:0},rotate:{type:[Number,String],default:0},width:{type:[Number,String],default:4},...makeSizeProps(),...makeTagProps({tag:"div"}),...makeThemeProps()},setup(t,e){let{slots:n}=e;const a=20,o=2*Math.PI*a,l=ref(),{themeClasses:u}=provideTheme(t),{sizeClasses:d,sizeStyles:m}=useSize(t),{textColorClasses:y,textColorStyles:b}=useTextColor(toRef(t,"color")),{textColorClasses:_,textColorStyles:w}=useTextColor(toRef(t,"bgColor")),{intersectionRef:E,isIntersecting:A}=useIntersectionObserver(),{resizeRef:C,contentRect:k}=useResizeObserver(),B=computed(()=>Math.max(0,Math.min(100,parseFloat(t.modelValue)))),D=computed(()=>Number(t.width)),q=computed(()=>m.value?Number(t.size):k.value?k.value.width:Math.max(D.value,32)),j=computed(()=>a/(1-D.value/q.value)*2),J=computed(()=>D.value/q.value*j.value),Y=computed(()=>convertToUnit((100-B.value)/100*o));return watchEffect(()=>{E.value=l.value,C.value=l.value}),useRender(()=>createVNode(t.tag,{ref:l,class:["v-progress-circular",{"v-progress-circular--indeterminate":!!t.indeterminate,"v-progress-circular--visible":A.value,"v-progress-circular--disable-shrink":t.indeterminate==="disable-shrink"},u.value,d.value,y.value],style:[m.value,b.value],role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.indeterminate?void 0:B.value},{default:()=>[createVNode("svg",{style:{transform:`rotate(calc(-90deg + ${Number(t.rotate)}deg))`},xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${j.value} ${j.value}`},[createVNode("circle",{class:["v-progress-circular__underlay",_.value],style:w.value,fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":J.value,"stroke-dasharray":o,"stroke-dashoffset":0},null),createVNode("circle",{class:"v-progress-circular__overlay",fill:"transparent",cx:"50%",cy:"50%",r:a,"stroke-width":J.value,"stroke-dasharray":o,"stroke-dashoffset":Y.value},null)]),n.default&&createVNode("div",{class:"v-progress-circular__content"},[n.default({value:B.value})])]})),{}}}),oppositeMap={center:"center",top:"bottom",bottom:"top",left:"right",right:"left"},makeLocationProps=propsFactory({location:String},"location");function useLocation(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=arguments.length>2?arguments[2]:void 0;const{isRtl:a}=useRtl();return{locationStyles:computed(()=>{if(!t.location)return{};const{side:l,align:u}=parseAnchor(t.location.split(" ").length>1?t.location:`${t.location} center`,a.value);function d(y){return n?n(y):0}const m={};return l!=="center"&&(e?m[oppositeMap[l]]=`calc(100% - ${d(l)}px)`:m[l]=0),u!=="center"?e?m[oppositeMap[u]]=`calc(100% - ${d(u)}px)`:m[u]=0:(l==="center"?m.top=m.left="50%":m[{top:"left",bottom:"left",left:"top",right:"top"}[l]]="50%",m.transform={top:"translateX(-50%)",bottom:"translateX(-50%)",left:"translateY(-50%)",right:"translateY(-50%)",center:"translate(-50%, -50%)"}[l]),m})}}const makeLoaderProps=propsFactory({loading:[Boolean,String]},"loader");function useLoader(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{loaderClasses:computed(()=>({[`${e}--loading`]:t.loading}))}}const positionValues=["static","relative","fixed","absolute","sticky"],makePositionProps=propsFactory({position:{type:String,validator:t=>positionValues.includes(t)}},"position");function usePosition(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:getCurrentInstanceName();return{positionClasses:computed(()=>t.position?`${e}--${t.position}`:void 0)}}function useSelectLink(t,e){watch(()=>{var n;return(n=t.isActive)==null?void 0:n.value},n=>{t.isLink.value&&n&&e&&nextTick$3(()=>{e(!0)})},{immediate:!0})}const VBtn=defineComponent({name:"VBtn",directives:{Ripple},props:{active:{type:Boolean,default:void 0},symbol:{type:null,default:VBtnToggleSymbol},flat:Boolean,icon:[Boolean,String,Function,Object],prependIcon:IconValue,appendIcon:IconValue,block:Boolean,stacked:Boolean,ripple:{type:Boolean,default:!0},...makeBorderProps(),...makeRoundedProps(),...makeDensityProps(),...makeDimensionProps(),...makeElevationProps(),...makeGroupItemProps(),...makeLoaderProps(),...makeLocationProps(),...makePositionProps(),...makeRouterProps(),...makeSizeProps(),...makeTagProps({tag:"button"}),...makeThemeProps(),...makeVariantProps({variant:"elevated"})},emits:{"group:selected":t=>!0},setup(t,e){let{attrs:n,slots:a}=e;const{themeClasses:o}=provideTheme(t),{borderClasses:l}=useBorder(t),{colorClasses:u,colorStyles:d,variantClasses:m}=useVariant(t),{densityClasses:y}=useDensity(t),{dimensionStyles:b}=useDimension(t),{elevationClasses:_}=useElevation(t),{loaderClasses:w}=useLoader(t),{locationStyles:E}=useLocation(t),{positionClasses:A}=usePosition(t),{roundedClasses:C}=useRounded(t),{sizeClasses:k,sizeStyles:B}=useSize(t),D=useGroupItem(t,t.symbol,!1),q=useLink$1(t,n),j=computed(()=>{if(t.active!==void 0)return t.active;if(q.isLink.value){var L;return(L=q.isActive)==null?void 0:L.value}return D?.isSelected.value}),J=computed(()=>D?.disabled.value||t.disabled),Y=computed(()=>t.variant==="elevated"&&!(t.disabled||t.flat||t.border));return useSelectLink(q,D?.select),useRender(()=>{var L,Z,Q,oe;const ae=q.isLink.value?"a":t.tag,U=!D||j.value,I=!!(t.prependIcon||a.prepend),x=!!(t.appendIcon||a.append),T=!!(t.icon&&t.icon!==!0);return withDirectives(createVNode(ae,{type:ae==="a"?void 0:"button",class:["v-btn",D?.selectedClass.value,{"v-btn--active":j.value,"v-btn--block":t.block,"v-btn--disabled":J.value,"v-btn--elevated":Y.value,"v-btn--flat":t.flat,"v-btn--icon":!!t.icon,"v-btn--loading":t.loading,"v-btn--stacked":t.stacked},o.value,l.value,U?u.value:void 0,y.value,_.value,w.value,A.value,C.value,k.value,m.value],style:[U?d.value:void 0,b.value,E.value,B.value],disabled:J.value||void 0,href:q.href.value,onClick:M=>{var O;J.value||((O=q.navigate)==null||O.call(q,M),D?.toggle())}},{default:()=>[genOverlays(!0,"v-btn"),!t.icon&&I&&createVNode(VDefaultsProvider,{key:"prepend",defaults:{VIcon:{icon:t.prependIcon}}},{default:()=>[createVNode("span",{class:"v-btn__prepend"},[((L=a.prepend)==null?void 0:L.call(a))??createVNode(VIcon,null,null)])]}),createVNode("span",{class:"v-btn__content","data-no-activator":""},[createVNode(VDefaultsProvider,{key:"content",defaults:{VIcon:{icon:T?t.icon:void 0}}},{default:()=>[((Z=a.default)==null?void 0:Z.call(a))??(T&&createVNode(VIcon,{key:"icon"},null))]})]),!t.icon&&x&&createVNode(VDefaultsProvider,{key:"append",defaults:{VIcon:{icon:t.appendIcon}}},{default:()=>[createVNode("span",{class:"v-btn__append"},[((Q=a.append)==null?void 0:Q.call(a))??createVNode(VIcon,null,null)])]}),!!t.loading&&createVNode("span",{key:"loader",class:"v-btn__loader"},[((oe=a.loader)==null?void 0:oe.call(a))??createVNode(VProgressCircular,{color:typeof t.loading=="boolean"?void 0:t.loading,indeterminate:!0,size:"23",width:"2"},null)])]}),[[resolveDirective("ripple"),!J.value&&t.ripple,null]])}),{}}}),VFooter$1="",VFooter=defineComponent({name:"VFooter",props:{app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...makeBorderProps(),...makeElevationProps(),...makeLayoutItemProps(),...makeRoundedProps(),...makeTagProps({tag:"footer"}),...makeThemeProps()},setup(t,e){let{slots:n}=e;const{themeClasses:a}=provideTheme(t),{backgroundColorClasses:o,backgroundColorStyles:l}=useBackgroundColor(toRef(t,"color")),{borderClasses:u}=useBorder(t),{elevationClasses:d}=useElevation(t),{roundedClasses:m}=useRounded(t),y=ref(32),{resizeRef:b}=useResizeObserver(E=>{E.length&&(y.value=E[0].target.clientHeight)}),_=computed(()=>t.height==="auto"?y.value:parseInt(t.height,10)),{layoutItemStyles:w}=useLayoutItem({id:t.name,order:computed(()=>parseInt(t.order,10)),position:computed(()=>"bottom"),layoutSize:_,elementSize:computed(()=>t.height==="auto"?void 0:_.value),active:computed(()=>t.app),absolute:toRef(t,"absolute")});return useRender(()=>createVNode(t.tag,{ref:b,class:["v-footer",a.value,o.value,u.value,d.value,m.value],style:[l.value,t.app?w.value:void 0]},n)),{}}}),VGrid="",VContainer=defineComponent({name:"VContainer",props:{fluid:{type:Boolean,default:!1},...makeTagProps()},setup(t,e){let{slots:n}=e;return useRender(()=>createVNode(t.tag,{class:["v-container",{"v-container--fluid":t.fluid}]},n)),{}}}),breakpoints$1=["sm","md","lg","xl","xxl"],breakpointProps=(()=>breakpoints$1.reduce((t,e)=>(t[e]={type:[Boolean,String,Number],default:!1},t),{}))(),offsetProps=(()=>breakpoints$1.reduce((t,e)=>(t["offset"+capitalize$1(e)]={type:[String,Number],default:null},t),{}))(),orderProps=(()=>breakpoints$1.reduce((t,e)=>(t["order"+capitalize$1(e)]={type:[String,Number],default:null},t),{}))(),propMap$1={col:Object.keys(breakpointProps),offset:Object.keys(offsetProps),order:Object.keys(orderProps)};function breakpointClass$1(t,e,n){let a=t;if(!(n==null||n===!1)){if(e){const o=e.replace(t,"");a+=`-${o}`}return t==="col"&&(a="v-"+a),t==="col"&&(n===""||n===!0)||(a+=`-${n}`),a.toLowerCase()}}const ALIGN_SELF_VALUES=["auto","start","end","center","baseline","stretch"],VCol=defineComponent({name:"VCol",props:{cols:{type:[Boolean,String,Number],default:!1},...breakpointProps,offset:{type:[String,Number],default:null},...offsetProps,order:{type:[String,Number],default:null},...orderProps,alignSelf:{type:String,default:null,validator:t=>ALIGN_SELF_VALUES.includes(t)},...makeTagProps()},setup(t,e){let{slots:n}=e;const a=computed(()=>{const o=[];let l;for(l in propMap$1)propMap$1[l].forEach(d=>{const m=t[d],y=breakpointClass$1(l,d,m);y&&o.push(y)});const u=o.some(d=>d.startsWith("v-col-"));return o.push({"v-col":!u||!t.cols,[`v-col-${t.cols}`]:t.cols,[`offset-${t.offset}`]:t.offset,[`order-${t.order}`]:t.order,[`align-self-${t.alignSelf}`]:t.alignSelf}),o});return()=>{var o;return h(t.tag,{class:a.value},(o=n.default)==null?void 0:o.call(n))}}}),breakpoints=["sm","md","lg","xl","xxl"],ALIGNMENT=["start","end","center"],SPACE=["space-between","space-around","space-evenly"];function makeRowProps(t,e){return breakpoints.reduce((n,a)=>(n[t+capitalize$1(a)]=e(),n),{})}const ALIGN_VALUES=[...ALIGNMENT,"baseline","stretch"],alignValidator=t=>ALIGN_VALUES.includes(t),alignProps=makeRowProps("align",()=>({type:String,default:null,validator:alignValidator})),JUSTIFY_VALUES=[...ALIGNMENT,...SPACE],justifyValidator=t=>JUSTIFY_VALUES.includes(t),justifyProps=makeRowProps("justify",()=>({type:String,default:null,validator:justifyValidator})),ALIGN_CONTENT_VALUES=[...ALIGNMENT,...SPACE,"stretch"],alignContentValidator=t=>ALIGN_CONTENT_VALUES.includes(t),alignContentProps=makeRowProps("alignContent",()=>({type:String,default:null,validator:alignContentValidator})),propMap={align:Object.keys(alignProps),justify:Object.keys(justifyProps),alignContent:Object.keys(alignContentProps)},classMap={align:"align",justify:"justify",alignContent:"align-content"};function breakpointClass(t,e,n){let a=classMap[t];if(n!=null){if(e){const o=e.replace(t,"");a+=`-${o}`}return a+=`-${n}`,a.toLowerCase()}}const VRow=defineComponent({name:"VRow",props:{dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:alignValidator},...alignProps,justify:{type:String,default:null,validator:justifyValidator},...justifyProps,alignContent:{type:String,default:null,validator:alignContentValidator},...alignContentProps,...makeTagProps()},setup(t,e){let{slots:n}=e;const a=computed(()=>{const o=[];let l;for(l in propMap)propMap[l].forEach(u=>{const d=t[u],m=breakpointClass(l,u,d);m&&o.push(m)});return o.push({"v-row--no-gutters":t.noGutters,"v-row--dense":t.dense,[`align-${t.align}`]:t.align,[`justify-${t.justify}`]:t.justify,[`align-content-${t.alignContent}`]:t.alignContent}),o});return()=>{var o;return h(t.tag,{class:["v-row",a.value]},(o=n.default)==null?void 0:o.call(n))}}}),_hoisted_1={class:"mt-6 text-h1"},_hoisted_2={class:"text-subtitle-1 text-disabled"},_hoisted_3={class:"my-6",style:{height:"150px"}},_hoisted_4={class:"text-disabled"},_sfc_main$1=defineComponent$1({__name:"AccueilInitial",emits:["entrer"],setup(t,{emit:e}){const n=()=>e("entrer"),a=ref(3),o=ref(2),l=ref(!1),u="0.2.0";return onMounted(()=>{setTimeout(()=>l.value=!0,(a.value+o.value)*1e3)}),(d,m)=>(openBlock(),createElementBlock("div",null,[createVNode(VContainer,{class:"text-center",style:{height:"100%"}},{default:withCtx(()=>[createVNode(VRow,{align:"center","no-gutters":"",style:{height:"80%"}},{default:withCtx(()=>[createVNode(VCol,null,{default:withCtx(()=>[createVNode(_sfc_main$2,{largeur:500,delai:a.value,debut:o.value},null,8,["delai","debut"]),createBaseVNode("h1",_hoisted_1,toDisplayString$1(d.$t("communs.constellation")),1),createBaseVNode("p",_hoisted_2,toDisplayString$1(d.$t("accueil.version"))+" "+toDisplayString$1(unref(u)),1),createBaseVNode("div",_hoisted_3,[createVNode(VFadeTransition,{"leave-absolute":""},{default:withCtx(()=>[withDirectives(createVNode(VBtn,{variant:"outlined",onClick:n},{default:withCtx(()=>[createTextVNode(toDisplayString$1(d.$t("accueil.démarrer")),1)]),_:1},512),[[vShow,l.value]])]),_:1})])]),_:1})]),_:1})]),_:1}),createVNode(VFooter,null,{default:withCtx(()=>[createVNode(VContainer,{class:"text-center",style:{height:"100%"}},{default:withCtx(()=>[createBaseVNode("p",_hoisted_4,toDisplayString$1(d.$t("accueil.piedDePage")),1)]),_:1})]),_:1})]))}}),VApp$1="",VApp=defineComponent({name:"VApp",props:{...makeLayoutProps({fullHeight:!0}),...makeThemeProps()},setup(t,e){let{slots:n}=e;const a=provideTheme(t),{layoutClasses:o,layoutStyles:l,getLayoutItem:u,items:d,layoutRef:m}=createLayout(t),{rtlClasses:y}=useRtl();return useRender(()=>{var b;return createVNode("div",{ref:m,class:["v-application",a.themeClasses.value,o.value,y.value],style:l.value},[createVNode("div",{class:"v-application__wrap"},[(b=n.default)==null?void 0:b.call(n)])])}),{getLayoutItem:u,items:d,theme:a}}}),VMain$1="",VMain=defineComponent({name:"VMain",props:{scrollable:Boolean,...makeTagProps({tag:"main"})},setup(t,e){let{slots:n}=e;const{mainStyles:a}=useLayout(),{ssrBootStyles:o}=useSsrBoot();return useRender(()=>{var l,u;return createVNode(t.tag,{class:["v-main",{"v-main--scrollable":t.scrollable}],style:[a.value,o.value]},{default:()=>[t.scrollable?createVNode("div",{class:"v-main__scroller"},[(l=n.default)==null?void 0:l.call(n)]):(u=n.default)==null?void 0:u.call(n)]})}),{}}}),_sfc_main=defineComponent$1({__name:"App",setup(t){const e=ref(!1);return(n,a)=>(openBlock(),createBlock(VApp,null,{default:withCtx(()=>[createVNode(VMain,null,{default:withCtx(()=>[createVNode(VFadeTransition,{"leave-absolute":""},{default:withCtx(()=>[e.value?(openBlock(),createBlock(_sfc_main$3,{key:1})):(openBlock(),createBlock(_sfc_main$1,{key:0,onEntrer:a[0]||(a[0]=o=>e.value=!0)}))]),_:1})]),_:1})]),_:1}))}}),scriptRel="modulepreload",assetsURL=function(t){return"/iug/"+t},seen={},__vitePreload=function(e,n,a){if(!n||n.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(n.map(l=>{if(l=assetsURL(l),l in seen)return;seen[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(!!a)for(let b=o.length-1;b>=0;b--){const _=o[b];if(_.href===l&&(!u||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${d}`))return;const y=document.createElement("link");if(y.rel=u?"stylesheet":scriptRel,u||(y.as="script",y.crossOrigin=""),y.href=l,document.head.appendChild(y),u)return new Promise((b,_)=>{y.addEventListener("load",b),y.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${l}`)))})})).then(()=>e())};function __decorate(t,e,n,a){var o=arguments.length,l=o<3?e:a===null?a=Object.getOwnPropertyDescriptor(e,n):a,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(t,e,n,a);else for(var d=t.length-1;d>=0;d--)(u=t[d])&&(l=(o<3?u(l):o>3?u(e,n,l):u(e,n))||l);return o>3&&l&&Object.defineProperty(e,n,l),l}var toStr$a=Object.prototype.toString,isArguments$4=function(e){var n=toStr$a.call(e),a=n==="[object Arguments]";return a||(a=n!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&toStr$a.call(e.callee)==="[object Function]"),a},implementation$b,hasRequiredImplementation;function requireImplementation(){if(hasRequiredImplementation)return implementation$b;hasRequiredImplementation=1;var t;if(!Object.keys){var e=Object.prototype.hasOwnProperty,n=Object.prototype.toString,a=isArguments$4,o=Object.prototype.propertyIsEnumerable,l=!o.call({toString:null},"toString"),u=o.call(function(){},"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],m=function(w){var E=w.constructor;return E&&E.prototype===w},y={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},b=function(){if(typeof window>"u")return!1;for(var w in window)try{if(!y["$"+w]&&e.call(window,w)&&window[w]!==null&&typeof window[w]=="object")try{m(window[w])}catch{return!0}}catch{return!0}return!1}(),_=function(w){if(typeof window>"u"||!b)return m(w);try{return m(w)}catch{return!1}};t=function(E){var A=E!==null&&typeof E=="object",C=n.call(E)==="[object Function]",k=a(E),B=A&&n.call(E)==="[object String]",D=[];if(!A&&!C&&!k)throw new TypeError("Object.keys called on a non-object");var q=u&&C;if(B&&E.length>0&&!e.call(E,0))for(var j=0;j<E.length;++j)D.push(String(j));if(k&&E.length>0)for(var J=0;J<E.length;++J)D.push(String(J));else for(var Y in E)!(q&&Y==="prototype")&&e.call(E,Y)&&D.push(String(Y));if(l)for(var L=_(E),Z=0;Z<d.length;++Z)!(L&&d[Z]==="constructor")&&e.call(E,d[Z])&&D.push(d[Z]);return D}}return implementation$b=t,implementation$b}var slice$2=Array.prototype.slice,isArgs=isArguments$4,origKeys=Object.keys,keysShim=origKeys?function(e){return origKeys(e)}:requireImplementation(),originalKeys=Object.keys;keysShim.shim=function(){if(Object.keys){var e=function(){var n=Object.keys(arguments);return n&&n.length===arguments.length}(1,2);e||(Object.keys=function(a){return isArgs(a)?originalKeys(slice$2.call(a)):originalKeys(a)})}else Object.keys=keysShim;return Object.keys||keysShim};var objectKeys$4=keysShim,shams$1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),a=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(a)!=="[object Symbol]")return!1;var o=42;e[n]=o;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var l=Object.getOwnPropertySymbols(e);if(l.length!==1||l[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var u=Object.getOwnPropertyDescriptor(e,n);if(u.value!==o||u.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams$1,hasSymbols$5=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},ERROR_MESSAGE$1="Function.prototype.bind called on incompatible ",slice$1=Array.prototype.slice,toStr$9=Object.prototype.toString,funcType="[object Function]",implementation$a=function(e){var n=this;if(typeof n!="function"||toStr$9.call(n)!==funcType)throw new TypeError(ERROR_MESSAGE$1+n);for(var a=slice$1.call(arguments,1),o,l=function(){if(this instanceof o){var b=n.apply(this,a.concat(slice$1.call(arguments)));return Object(b)===b?b:this}else return n.apply(e,a.concat(slice$1.call(arguments)))},u=Math.max(0,n.length-a.length),d=[],m=0;m<u;m++)d.push("$"+m);if(o=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(l),n.prototype){var y=function(){};y.prototype=n.prototype,o.prototype=new y,y.prototype=null}return o},implementation$9=implementation$a,functionBind=Function.prototype.bind||implementation$9,bind$2=functionBind,src$a=bind$2.call(Function.call,Object.prototype.hasOwnProperty),undefined$1,$SyntaxError$1=SyntaxError,$Function=Function,$TypeError$2=TypeError,getEvalledConstructor=function(t){try{return $Function('"use strict"; return ('+t+").constructor;")()}catch{}},$gOPD$2=Object.getOwnPropertyDescriptor;if($gOPD$2)try{$gOPD$2({},"")}catch{$gOPD$2=null}var throwTypeError=function(){throw new $TypeError$2},ThrowTypeError=$gOPD$2?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$2(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols$4=hasSymbols$5(),getProto$2=Object.getPrototypeOf||function(t){return t.__proto__},needsEval={},TypedArray=typeof Uint8Array>"u"?undefined$1:getProto$2(Uint8Array),INTRINSICS={"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols$4?getProto$2([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols$4?getProto$2(getProto$2([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols$4?undefined$1:getProto$2(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols$4?undefined$1:getProto$2(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols$4?getProto$2(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols$4?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$2,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};try{null.error}catch(t){var errorProto=getProto$2(getProto$2(t));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function t(e){var n;if(e==="%AsyncFunction%")n=getEvalledConstructor("async function () {}");else if(e==="%GeneratorFunction%")n=getEvalledConstructor("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=getEvalledConstructor("async function* () {}");else if(e==="%AsyncGenerator%"){var a=t("%AsyncGeneratorFunction%");a&&(n=a.prototype)}else if(e==="%AsyncIteratorPrototype%"){var o=t("%AsyncGenerator%");o&&(n=getProto$2(o.prototype))}return INTRINSICS[e]=n,n},LEGACY_ALIASES={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind$1=functionBind,hasOwn$3=src$a,$concat$1=bind$1.call(Function.call,Array.prototype.concat),$spliceApply=bind$1.call(Function.apply,Array.prototype.splice),$replace$1=bind$1.call(Function.call,String.prototype.replace),$strSlice=bind$1.call(Function.call,String.prototype.slice),$exec$1=bind$1.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(e){var n=$strSlice(e,0,1),a=$strSlice(e,-1);if(n==="%"&&a!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(a==="%"&&n!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var o=[];return $replace$1(e,rePropName,function(l,u,d,m){o[o.length]=d?$replace$1(m,reEscapeChar,"$1"):u||l}),o},getBaseIntrinsic=function(e,n){var a=e,o;if(hasOwn$3(LEGACY_ALIASES,a)&&(o=LEGACY_ALIASES[a],a="%"+o[0]+"%"),hasOwn$3(INTRINSICS,a)){var l=INTRINSICS[a];if(l===needsEval&&(l=doEval(a)),typeof l>"u"&&!n)throw new $TypeError$2("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:o,name:a,value:l}}throw new $SyntaxError$1("intrinsic "+e+" does not exist!")},getIntrinsic=function(e,n){if(typeof e!="string"||e.length===0)throw new $TypeError$2("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new $TypeError$2('"allowMissing" argument must be a boolean');if($exec$1(/^%?[^%]*%?$/,e)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var a=stringToPath(e),o=a.length>0?a[0]:"",l=getBaseIntrinsic("%"+o+"%",n),u=l.name,d=l.value,m=!1,y=l.alias;y&&(o=y[0],$spliceApply(a,$concat$1([0,1],y)));for(var b=1,_=!0;b<a.length;b+=1){var w=a[b],E=$strSlice(w,0,1),A=$strSlice(w,-1);if((E==='"'||E==="'"||E==="`"||A==='"'||A==="'"||A==="`")&&E!==A)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((w==="constructor"||!_)&&(m=!0),o+="."+w,u="%"+o+"%",hasOwn$3(INTRINSICS,u))d=INTRINSICS[u];else if(d!=null){if(!(w in d)){if(!n)throw new $TypeError$2("base intrinsic for "+e+" exists, but the property is not available.");return}if($gOPD$2&&b+1>=a.length){var C=$gOPD$2(d,w);_=!!C,_&&"get"in C&&!("originalValue"in C.get)?d=C.get:d=d[w]}else _=hasOwn$3(d,w),d=d[w];_&&!m&&(INTRINSICS[u]=d)}}return d},GetIntrinsic$8=getIntrinsic,$defineProperty=GetIntrinsic$8("%Object.defineProperty%",!0),hasPropertyDescriptors$1=function(){if($defineProperty)try{return $defineProperty({},"a",{value:1}),!0}catch{return!1}return!1};hasPropertyDescriptors$1.hasArrayLengthDefineBug=function(){if(!hasPropertyDescriptors$1())return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors$1,keys$3=objectKeys$4,hasSymbols$3=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",toStr$8=Object.prototype.toString,concat$4=Array.prototype.concat,origDefineProperty=Object.defineProperty,isFunction$3=function(t){return typeof t=="function"&&toStr$8.call(t)==="[object Function]"},hasPropertyDescriptors=hasPropertyDescriptors_1(),supportsDescriptors$2=origDefineProperty&&hasPropertyDescriptors,defineProperty$2=function(t,e,n,a){e in t&&(!isFunction$3(a)||!a())||(supportsDescriptors$2?origDefineProperty(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0}):t[e]=n)},defineProperties$1=function(t,e){var n=arguments.length>2?arguments[2]:{},a=keys$3(e);hasSymbols$3&&(a=concat$4.call(a,Object.getOwnPropertySymbols(e)));for(var o=0;o<a.length;o+=1)defineProperty$2(t,a[o],e[a[o]],n[a[o]])};defineProperties$1.supportsDescriptors=!!supportsDescriptors$2;var defineProperties_1=defineProperties$1,callBindExports={},callBind$5={get exports(){return callBindExports},set exports(t){callBindExports=t}};(function(t){var e=functionBind,n=getIntrinsic,a=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),l=n("%Reflect.apply%",!0)||e.call(o,a),u=n("%Object.getOwnPropertyDescriptor%",!0),d=n("%Object.defineProperty%",!0),m=n("%Math.max%");if(d)try{d({},"a",{value:1})}catch{d=null}t.exports=function(_){var w=l(e,o,arguments);if(u&&d){var E=u(w,"length");E.configurable&&d(w,"length",{value:1+m(0,_.length-(arguments.length-1))})}return w};var y=function(){return l(e,a,arguments)};d?d(t.exports,"apply",{value:y}):t.exports.apply=y})(callBind$5);var GetIntrinsic$7=getIntrinsic,callBind$4=callBindExports,$indexOf$1=callBind$4(GetIntrinsic$7("String.prototype.indexOf")),callBound$c=function(e,n){var a=GetIntrinsic$7(e,!!n);return typeof a=="function"&&$indexOf$1(e,".prototype.")>-1?callBind$4(a):a},objectKeys$3=objectKeys$4,hasSymbols$2=shams$1(),callBound$b=callBound$c,toObject=Object,$push=callBound$b("Array.prototype.push"),$propIsEnumerable=callBound$b("Object.prototype.propertyIsEnumerable"),originalGetSymbols=hasSymbols$2?Object.getOwnPropertySymbols:null,implementation$8=function(e,n){if(e==null)throw new TypeError("target must be an object");var a=toObject(e);if(arguments.length===1)return a;for(var o=1;o<arguments.length;++o){var l=toObject(arguments[o]),u=objectKeys$3(l),d=hasSymbols$2&&(Object.getOwnPropertySymbols||originalGetSymbols);if(d)for(var m=d(l),y=0;y<m.length;++y){var b=m[y];$propIsEnumerable(l,b)&&$push(u,b)}for(var _=0;_<u.length;++_){var w=u[_];if($propIsEnumerable(l,w)){var E=l[w];a[w]=E}}}return a},implementation$7=implementation$8,lacksProperEnumerationOrder=function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),n={},a=0;a<e.length;++a)n[e[a]]=e[a];var o=Object.assign({},n),l="";for(var u in o)l+=u;return t!==l},assignHasPendingExceptions=function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch{return t[1]==="y"}return!1},polyfill$4=function(){return!Object.assign||lacksProperEnumerationOrder()||assignHasPendingExceptions()?implementation$7:Object.assign},define$3=defineProperties_1,getPolyfill$5=polyfill$4,shim$5=function(){var e=getPolyfill$5();return define$3(Object,{assign:e},{assign:function(){return Object.assign!==e}}),e},defineProperties=defineProperties_1,callBind$3=callBindExports,implementation$6=implementation$8,getPolyfill$4=polyfill$4,shim$4=shim$5,polyfill$3=callBind$3.apply(getPolyfill$4()),bound=function(e,n){return polyfill$3(Object,arguments)};defineProperties(bound,{getPolyfill:getPolyfill$4,implementation:implementation$6,shim:shim$4});var object_assign=bound,implementationExports={},implementation$5={get exports(){return implementationExports},set exports(t){implementationExports=t}},functionsHaveNames$1=function(){return typeof function(){}.name=="string"},gOPD$4=Object.getOwnPropertyDescriptor;if(gOPD$4)try{gOPD$4([],"length")}catch{gOPD$4=null}functionsHaveNames$1.functionsHaveConfigurableNames=function(){if(!functionsHaveNames$1()||!gOPD$4)return!1;var e=gOPD$4(function(){},"name");return!!e&&!!e.configurable};var $bind=Function.prototype.bind;functionsHaveNames$1.boundFunctionsHaveNames=function(){return functionsHaveNames$1()&&typeof $bind=="function"&&function(){}.bind().name!==""};var functionsHaveNames_1=functionsHaveNames$1;(function(t){var e=functionsHaveNames_1.functionsHaveConfigurableNames(),n=Object,a=TypeError;t.exports=function(){if(this!=null&&this!==n(this))throw new a("RegExp.prototype.flags getter called on non-object");var l="";return this.hasIndices&&(l+="d"),this.global&&(l+="g"),this.ignoreCase&&(l+="i"),this.multiline&&(l+="m"),this.dotAll&&(l+="s"),this.unicode&&(l+="u"),this.sticky&&(l+="y"),l},e&&Object.defineProperty&&Object.defineProperty(t.exports,"name",{value:"get flags"})})(implementation$5);var implementation$4=implementationExports,supportsDescriptors$1=defineProperties_1.supportsDescriptors,$gOPD$1=Object.getOwnPropertyDescriptor,polyfill$2=function(){if(supportsDescriptors$1&&/a/mig.flags==="gim"){var e=$gOPD$1(RegExp.prototype,"flags");if(e&&typeof e.get=="function"&&typeof RegExp.prototype.dotAll=="boolean"&&typeof RegExp.prototype.hasIndices=="boolean"){var n="",a={};if(Object.defineProperty(a,"hasIndices",{get:function(){n+="d"}}),Object.defineProperty(a,"sticky",{get:function(){n+="y"}}),n==="dy")return e.get}}return implementation$4},supportsDescriptors=defineProperties_1.supportsDescriptors,getPolyfill$3=polyfill$2,gOPD$3=Object.getOwnPropertyDescriptor,defineProperty$1=Object.defineProperty,TypeErr=TypeError,getProto$1=Object.getPrototypeOf,regex$1=/a/,shim$3=function(){if(!supportsDescriptors||!getProto$1)throw new TypeErr("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=getPolyfill$3(),n=getProto$1(regex$1),a=gOPD$3(n,"flags");return(!a||a.get!==e)&&defineProperty$1(n,"flags",{configurable:!0,enumerable:!1,get:e}),e},define$2=defineProperties_1,callBind$2=callBindExports,implementation$3=implementationExports,getPolyfill$2=polyfill$2,shim$2=shim$3,flagsBound=callBind$2(getPolyfill$2());define$2(flagsBound,{getPolyfill:getPolyfill$2,implementation:implementation$3,shim:shim$2});var regexp_prototype_flags=flagsBound;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}var cachedSetTimeout=defaultSetTimout,cachedClearTimeout=defaultClearTimeout;typeof global$1.setTimeout=="function"&&(cachedSetTimeout=setTimeout);typeof global$1.clearTimeout=="function"&&(cachedClearTimeout=clearTimeout);function runTimeout(t){if(cachedSetTimeout===setTimeout)return setTimeout(t,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(t,0);try{return cachedSetTimeout(t,0)}catch{try{return cachedSetTimeout.call(null,t,0)}catch{return cachedSetTimeout.call(this,t,0)}}}function runClearTimeout(t){if(cachedClearTimeout===clearTimeout)return clearTimeout(t);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(t);try{return cachedClearTimeout(t)}catch{try{return cachedClearTimeout.call(null,t)}catch{return cachedClearTimeout.call(this,t)}}}var queue=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){!draining||!currentQueue||(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var t=runTimeout(cleanUpNextTick);draining=!0;for(var e=queue.length;e;){for(currentQueue=queue,queue=[];++queueIndex<e;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,e=queue.length}currentQueue=null,draining=!1,runClearTimeout(t)}}function nextTick$2(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];queue.push(new Item(t,e)),queue.length===1&&!draining&&runTimeout(drainQueue)}function Item(t,e){this.fun=t,this.array=e}Item.prototype.run=function(){this.fun.apply(null,this.array)};var title="browser",platform$1="browser",browser$h=!0,env$1={},argv=[],version$l="",versions={},release={},config$1={};function noop$7(){}var on=noop$7,addListener=noop$7,once$4=noop$7,off=noop$7,removeListener=noop$7,removeAllListeners=noop$7,emit=noop$7;function binding(t){throw new Error("process.binding is not supported")}function cwd(){return"/"}function chdir(t){throw new Error("process.chdir is not supported")}function umask(){return 0}var performance$1=global$1.performance||{},performanceNow=performance$1.now||performance$1.mozNow||performance$1.msNow||performance$1.oNow||performance$1.webkitNow||function(){return new Date().getTime()};function hrtime(t){var e=performanceNow.call(performance$1)*.001,n=Math.floor(e),a=Math.floor(e%1*1e9);return t&&(n=n-t[0],a=a-t[1],a<0&&(n--,a+=1e9)),[n,a]}var startTime=new Date;function uptime(){var t=new Date,e=t-startTime;return e/1e3}var browser$1$1={nextTick:nextTick$2,title,browser:browser$h,env:env$1,argv,version:version$l,versions,on,addListener,once:once$4,off,removeListener,removeAllListeners,emit,binding,cwd,chdir,umask,hrtime,platform:platform$1,release,config:config$1,uptime},esGetIteratorExports={},esGetIterator={get exports(){return esGetIteratorExports},set exports(t){esGetIteratorExports=t}},hasSymbols$1=shams$1,shams=function(){return hasSymbols$1()&&!!Symbol.toStringTag},hasToStringTag$9=shams(),callBound$a=callBound$c,$toString$4=callBound$a("Object.prototype.toString"),isStandardArguments=function(e){return hasToStringTag$9&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:$toString$4(e)==="[object Arguments]"},isLegacyArguments=function(e){return isStandardArguments(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&$toString$4(e)!=="[object Array]"&&$toString$4(e.callee)==="[object Function]"},supportsStandardArguments=function(){return isStandardArguments(arguments)}();isStandardArguments.isLegacyArguments=isLegacyArguments;var isArguments$3=supportsStandardArguments?isStandardArguments:isLegacyArguments;const net={},fs_=Object.freeze(Object.defineProperty({__proto__:null,default:net},Symbol.toStringTag,{value:"Module"})),require$$0$2=getAugmentedNamespace(fs_);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString$1=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice$2=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf$1=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||"symbol")?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO$1=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function addNumericSeparator(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||$test.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var a=t<0?-$floor(-t):$floor(t);if(a!==t){var o=String(a),l=$slice$2.call(e,o.length+1);return $replace.call(o,n,"$&_")+"."+$replace.call($replace.call(l,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(e,n,"$&_")}var utilInspect=require$$0$2,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol$2(inspectCustom)?inspectCustom:null,objectInspect=function t(e,n,a,o){var l=n||{};if(has$2(l,"quoteStyle")&&l.quoteStyle!=="single"&&l.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$2(l,"maxStringLength")&&(typeof l.maxStringLength=="number"?l.maxStringLength<0&&l.maxStringLength!==1/0:l.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var u=has$2(l,"customInspect")?l.customInspect:!0;if(typeof u!="boolean"&&u!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$2(l,"indent")&&l.indent!==null&&l.indent!=="	"&&!(parseInt(l.indent,10)===l.indent&&l.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$2(l,"numericSeparator")&&typeof l.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var d=l.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return inspectString(e,l);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var m=String(e);return d?addNumericSeparator(e,m):m}if(typeof e=="bigint"){var y=String(e)+"n";return d?addNumericSeparator(e,y):y}var b=typeof l.depth>"u"?5:l.depth;if(typeof a>"u"&&(a=0),a>=b&&b>0&&typeof e=="object")return isArray$8(e)?"[Array]":"[Object]";var _=getIndent(l,a);if(typeof o>"u")o=[];else if(indexOf$1(o,e)>=0)return"[Circular]";function w(I,x,T){if(x&&(o=$arrSlice.call(o),o.push(x)),T){var M={depth:l.depth};return has$2(l,"quoteStyle")&&(M.quoteStyle=l.quoteStyle),t(I,M,a+1,o)}return t(I,l,a+1,o)}if(typeof e=="function"&&!isRegExp$2(e)){var E=nameOf(e),A=arrObjKeys(e,w);return"[Function"+(E?": "+E:" (anonymous)")+"]"+(A.length>0?" { "+$join.call(A,", ")+" }":"")}if(isSymbol$2(e)){var C=hasShammedSymbols?$replace.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(e);return typeof e=="object"&&!hasShammedSymbols?markBoxed(C):C}if(isElement(e)){for(var k="<"+$toLowerCase.call(String(e.nodeName)),B=e.attributes||[],D=0;D<B.length;D++)k+=" "+B[D].name+"="+wrapQuotes(quote(B[D].value),"double",l);return k+=">",e.childNodes&&e.childNodes.length&&(k+="..."),k+="</"+$toLowerCase.call(String(e.nodeName))+">",k}if(isArray$8(e)){if(e.length===0)return"[]";var q=arrObjKeys(e,w);return _&&!singleLineValues(q)?"["+indentedJoin(q,_)+"]":"[ "+$join.call(q,", ")+" ]"}if(isError(e)){var j=arrObjKeys(e,w);return!("cause"in Error.prototype)&&"cause"in e&&!isEnumerable.call(e,"cause")?"{ ["+String(e)+"] "+$join.call($concat.call("[cause]: "+w(e.cause),j),", ")+" }":j.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+$join.call(j,", ")+" }"}if(typeof e=="object"&&u){if(inspectSymbol&&typeof e[inspectSymbol]=="function"&&utilInspect)return utilInspect(e,{depth:b-a});if(u!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(isMap$3(e)){var J=[];return mapForEach&&mapForEach.call(e,function(I,x){J.push(w(x,e,!0)+" => "+w(I,e))}),collectionOf("Map",mapSize.call(e),J,_)}if(isSet$3(e)){var Y=[];return setForEach&&setForEach.call(e,function(I){Y.push(w(I,e))}),collectionOf("Set",setSize.call(e),Y,_)}if(isWeakMap$1(e))return weakCollectionOf("WeakMap");if(isWeakSet$1(e))return weakCollectionOf("WeakSet");if(isWeakRef(e))return weakCollectionOf("WeakRef");if(isNumber$3(e))return markBoxed(w(Number(e)));if(isBigInt$1(e))return markBoxed(w(bigIntValueOf$1.call(e)));if(isBoolean$4(e))return markBoxed(booleanValueOf.call(e));if(isString$5(e))return markBoxed(w(String(e)));if(!isDate$3(e)&&!isRegExp$2(e)){var L=arrObjKeys(e,w),Z=gPO$1?gPO$1(e)===Object.prototype:e instanceof Object||e.constructor===Object,Q=e instanceof Object?"":"null prototype",oe=!Z&&toStringTag&&Object(e)===e&&toStringTag in e?$slice$2.call(toStr$7(e),8,-1):Q?"Object":"",ae=Z||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",U=ae+(oe||Q?"["+$join.call($concat.call([],oe||[],Q||[]),": ")+"] ":"");return L.length===0?U+"{}":_?U+"{"+indentedJoin(L,_)+"}":U+"{ "+$join.call(L,", ")+" }"}return String(e)};function wrapQuotes(t,e,n){var a=(n.quoteStyle||e)==="double"?'"':"'";return a+t+a}function quote(t){return $replace.call(String(t),/"/g,"&quot;")}function isArray$8(t){return toStr$7(t)==="[object Array]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isDate$3(t){return toStr$7(t)==="[object Date]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isRegExp$2(t){return toStr$7(t)==="[object RegExp]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isError(t){return toStr$7(t)==="[object Error]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isString$5(t){return toStr$7(t)==="[object String]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isNumber$3(t){return toStr$7(t)==="[object Number]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isBoolean$4(t){return toStr$7(t)==="[object Boolean]"&&(!toStringTag||!(typeof t=="object"&&toStringTag in t))}function isSymbol$2(t){if(hasShammedSymbols)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!symToString)return!1;try{return symToString.call(t),!0}catch{}return!1}function isBigInt$1(t){if(!t||typeof t!="object"||!bigIntValueOf$1)return!1;try{return bigIntValueOf$1.call(t),!0}catch{}return!1}var hasOwn$2=Object.prototype.hasOwnProperty||function(t){return t in this};function has$2(t,e){return hasOwn$2.call(t,e)}function toStr$7(t){return objectToString$1.call(t)}function nameOf(t){if(t.name)return t.name;var e=$match.call(functionToString.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function indexOf$1(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1}function isMap$3(t){if(!mapSize||!t||typeof t!="object")return!1;try{mapSize.call(t);try{setSize.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function isWeakMap$1(t){if(!weakMapHas||!t||typeof t!="object")return!1;try{weakMapHas.call(t,weakMapHas);try{weakSetHas.call(t,weakSetHas)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function isWeakRef(t){if(!weakRefDeref||!t||typeof t!="object")return!1;try{return weakRefDeref.call(t),!0}catch{}return!1}function isSet$3(t){if(!setSize||!t||typeof t!="object")return!1;try{setSize.call(t);try{mapSize.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function isWeakSet$1(t){if(!weakSetHas||!t||typeof t!="object")return!1;try{weakSetHas.call(t,weakSetHas);try{weakMapHas.call(t,weakMapHas)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function isElement(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function inspectString(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,a="... "+n+" more character"+(n>1?"s":"");return inspectString($slice$2.call(t,0,e.maxStringLength),e)+a}var o=$replace.call($replace.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(o,"single",e)}function lowbyte(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+$toUpperCase.call(e.toString(16))}function markBoxed(t){return"Object("+t+")"}function weakCollectionOf(t){return t+" { ? }"}function collectionOf(t,e,n,a){var o=a?indentedJoin(n,a):$join.call(n,", ");return t+" ("+e+") {"+o+"}"}function singleLineValues(t){for(var e=0;e<t.length;e++)if(indexOf$1(t[e],`
`)>=0)return!1;return!0}function getIndent(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=$join.call(Array(t.indent+1)," ");else return null;return{base:n,prev:$join.call(Array(e+1),n)}}function indentedJoin(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+$join.call(t,","+n)+`
`+e.prev}function arrObjKeys(t,e){var n=isArray$8(t),a=[];if(n){a.length=t.length;for(var o=0;o<t.length;o++)a[o]=has$2(t,o)?e(t[o],t):""}var l=typeof gOPS=="function"?gOPS(t):[],u;if(hasShammedSymbols){u={};for(var d=0;d<l.length;d++)u["$"+l[d]]=l[d]}for(var m in t)has$2(t,m)&&(n&&String(Number(m))===m&&m<t.length||hasShammedSymbols&&u["$"+m]instanceof Symbol||($test.call(/[^\w$]/,m)?a.push(e(m,t)+": "+e(t[m],t)):a.push(m+": "+e(t[m],t))));if(typeof gOPS=="function")for(var y=0;y<l.length;y++)isEnumerable.call(t,l[y])&&a.push("["+e(l[y])+"]: "+e(t[l[y]],t));return a}var GetIntrinsic$6=getIntrinsic,callBound$9=callBound$c,inspect$2=objectInspect,$TypeError$1=GetIntrinsic$6("%TypeError%"),$WeakMap$1=GetIntrinsic$6("%WeakMap%",!0),$Map$3=GetIntrinsic$6("%Map%",!0),$weakMapGet=callBound$9("WeakMap.prototype.get",!0),$weakMapSet=callBound$9("WeakMap.prototype.set",!0),$weakMapHas=callBound$9("WeakMap.prototype.has",!0),$mapGet$1=callBound$9("Map.prototype.get",!0),$mapSet=callBound$9("Map.prototype.set",!0),$mapHas$5=callBound$9("Map.prototype.has",!0),listGetNode=function(t,e){for(var n=t,a;(a=n.next)!==null;n=a)if(a.key===e)return n.next=a.next,a.next=t.next,t.next=a,a},listGet=function(t,e){var n=listGetNode(t,e);return n&&n.value},listSet=function(t,e,n){var a=listGetNode(t,e);a?a.value=n:t.next={key:e,next:t.next,value:n}},listHas=function(t,e){return!!listGetNode(t,e)},sideChannel=function(){var e,n,a,o={assert:function(l){if(!o.has(l))throw new $TypeError$1("Side channel does not contain "+inspect$2(l))},get:function(l){if($WeakMap$1&&l&&(typeof l=="object"||typeof l=="function")){if(e)return $weakMapGet(e,l)}else if($Map$3){if(n)return $mapGet$1(n,l)}else if(a)return listGet(a,l)},has:function(l){if($WeakMap$1&&l&&(typeof l=="object"||typeof l=="function")){if(e)return $weakMapHas(e,l)}else if($Map$3){if(n)return $mapHas$5(n,l)}else if(a)return listHas(a,l);return!1},set:function(l,u){$WeakMap$1&&l&&(typeof l=="object"||typeof l=="function")?(e||(e=new $WeakMap$1),$weakMapSet(e,l,u)):$Map$3?(n||(n=new $Map$3),$mapSet(n,l,u)):(a||(a={key:{},next:null}),listSet(a,l,u))}};return o},GetIntrinsic$5=getIntrinsic,has$1=src$a,channel=sideChannel(),$TypeError=GetIntrinsic$5("%TypeError%"),SLOT$1={assert:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof e!="string")throw new $TypeError("`slot` must be a string");if(channel.assert(t),!SLOT$1.has(t,e))throw new $TypeError("`slot` is not present on `O`")},get:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof e!="string")throw new $TypeError("`slot` must be a string");var n=channel.get(t);return n&&n["$"+e]},has:function(t,e){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof e!="string")throw new $TypeError("`slot` must be a string");var n=channel.get(t);return!!n&&has$1(n,"$"+e)},set:function(t,e,n){if(!t||typeof t!="object"&&typeof t!="function")throw new $TypeError("`O` is not an object");if(typeof e!="string")throw new $TypeError("`slot` must be a string");var a=channel.get(t);a||(a={},channel.set(t,a)),a["$"+e]=n}};Object.freeze&&Object.freeze(SLOT$1);var internalSlot=SLOT$1,SLOT=internalSlot,$SyntaxError=SyntaxError,$StopIteration=typeof StopIteration=="object"?StopIteration:null,stopIterationIterator=function(e){if(!$StopIteration)throw new $SyntaxError("this environment lacks StopIteration");SLOT.set(e,"[[Done]]",!1);var n={next:function(){var o=SLOT.get(this,"[[Iterator]]"),l=SLOT.get(o,"[[Done]]");try{return{done:l,value:l?void 0:o.next()}}catch(u){if(SLOT.set(o,"[[Done]]",!0),u!==$StopIteration)throw u;return{done:!0,value:void 0}}}};return SLOT.set(n,"[[Iterator]]",e),n},isarray$2,hasRequiredIsarray;function requireIsarray(){if(hasRequiredIsarray)return isarray$2;hasRequiredIsarray=1;var t={}.toString;return isarray$2=Array.isArray||function(e){return t.call(e)=="[object Array]"},isarray$2}var strValue=String.prototype.valueOf,tryStringObject=function(e){try{return strValue.call(e),!0}catch{return!1}},toStr$6=Object.prototype.toString,strClass="[object String]",hasToStringTag$8=shams(),isString$4=function(e){return typeof e=="string"?!0:typeof e!="object"?!1:hasToStringTag$8?tryStringObject(e):toStr$6.call(e)===strClass},$Map$2=typeof Map=="function"&&Map.prototype?Map:null,$Set$3=typeof Set=="function"&&Set.prototype?Set:null,exported$2;$Map$2||(exported$2=function(e){return!1});var $mapHas$4=$Map$2?Map.prototype.has:null,$setHas$4=$Set$3?Set.prototype.has:null;!exported$2&&!$mapHas$4&&(exported$2=function(e){return!1});var isMap$2=exported$2||function(e){if(!e||typeof e!="object")return!1;try{if($mapHas$4.call(e),$setHas$4)try{$setHas$4.call(e)}catch{return!0}return e instanceof $Map$2}catch{}return!1},$Map$1=typeof Map=="function"&&Map.prototype?Map:null,$Set$2=typeof Set=="function"&&Set.prototype?Set:null,exported$1;$Set$2||(exported$1=function(e){return!1});var $mapHas$3=$Map$1?Map.prototype.has:null,$setHas$3=$Set$2?Set.prototype.has:null;!exported$1&&!$setHas$3&&(exported$1=function(e){return!1});var isSet$2=exported$1||function(e){if(!e||typeof e!="object")return!1;try{if($setHas$3.call(e),$mapHas$3)try{$mapHas$3.call(e)}catch{return!0}return e instanceof $Set$2}catch{}return!1},isArguments$2=isArguments$3,getStopIterationIterator=stopIterationIterator;if(hasSymbols$5()||shams$1()){var $iterator=Symbol.iterator;esGetIterator.exports=function(e){if(e!=null&&typeof e[$iterator]<"u")return e[$iterator]();if(isArguments$2(e))return Array.prototype[$iterator].call(e)}}else{var isArray$7=requireIsarray(),isString$3=isString$4,GetIntrinsic$4=getIntrinsic,$Map=GetIntrinsic$4("%Map%",!0),$Set$1=GetIntrinsic$4("%Set%",!0),callBound$8=callBound$c,$arrayPush=callBound$8("Array.prototype.push"),$charCodeAt=callBound$8("String.prototype.charCodeAt"),$stringSlice=callBound$8("String.prototype.slice"),advanceStringIndex=function(e,n){var a=e.length;if(n+1>=a)return n+1;var o=$charCodeAt(e,n);if(o<55296||o>56319)return n+1;var l=$charCodeAt(e,n+1);return l<56320||l>57343?n+1:n+2},getArrayIterator=function(e){var n=0;return{next:function(){var o=n>=e.length,l;return o||(l=e[n],n+=1),{done:o,value:l}}}},getNonCollectionIterator=function(e,n){if(isArray$7(e)||isArguments$2(e))return getArrayIterator(e);if(isString$3(e)){var a=0;return{next:function(){var l=advanceStringIndex(e,a),u=$stringSlice(e,a,l);return a=l,{done:l>e.length,value:u}}}}if(n&&typeof e["_es6-shim iterator_"]<"u")return e["_es6-shim iterator_"]()};if(!$Map&&!$Set$1)esGetIterator.exports=function(e){if(e!=null)return getNonCollectionIterator(e,!0)};else{var isMap$1=isMap$2,isSet$1=isSet$2,$mapForEach=callBound$8("Map.prototype.forEach",!0),$setForEach=callBound$8("Set.prototype.forEach",!0);if(typeof browser$1$1>"u"||!browser$1$1.versions||!browser$1$1.versions.node)var $mapIterator=callBound$8("Map.prototype.iterator",!0),$setIterator=callBound$8("Set.prototype.iterator",!0);var $mapAtAtIterator=callBound$8("Map.prototype.@@iterator",!0)||callBound$8("Map.prototype._es6-shim iterator_",!0),$setAtAtIterator=callBound$8("Set.prototype.@@iterator",!0)||callBound$8("Set.prototype._es6-shim iterator_",!0),getCollectionIterator=function(e){if(isMap$1(e)){if($mapIterator)return getStopIterationIterator($mapIterator(e));if($mapAtAtIterator)return $mapAtAtIterator(e);if($mapForEach){var n=[];return $mapForEach(e,function(o,l){$arrayPush(n,[l,o])}),getArrayIterator(n)}}if(isSet$1(e)){if($setIterator)return getStopIterationIterator($setIterator(e));if($setAtAtIterator)return $setAtAtIterator(e);if($setForEach){var a=[];return $setForEach(e,function(o){$arrayPush(a,o)}),getArrayIterator(a)}}};esGetIterator.exports=function(e){return getCollectionIterator(e)||getNonCollectionIterator(e)}}}var numberIsNaN=function(t){return t!==t},implementation$2=function(e,n){return e===0&&n===0?1/e===1/n:!!(e===n||numberIsNaN(e)&&numberIsNaN(n))},implementation$1=implementation$2,polyfill$1=function(){return typeof Object.is=="function"?Object.is:implementation$1},getPolyfill$1=polyfill$1,define$1=defineProperties_1,shim$1=function(){var e=getPolyfill$1();return define$1(Object,{is:e},{is:function(){return Object.is!==e}}),e},define=defineProperties_1,callBind$1=callBindExports,implementation=implementation$2,getPolyfill=polyfill$1,shim=shim$1,polyfill=callBind$1(getPolyfill(),Object);define(polyfill,{getPolyfill,implementation,shim});var objectIs=polyfill,toString$c={}.toString,isarray$1=Array.isArray||function(t){return toString$c.call(t)=="[object Array]"},fnToStr$1=Function.prototype.toString,reflectApply=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,badArrayLike,isCallableMarker;if(typeof reflectApply=="function"&&typeof Object.defineProperty=="function")try{badArrayLike=Object.defineProperty({},"length",{get:function(){throw isCallableMarker}}),isCallableMarker={},reflectApply(function(){throw 42},null,badArrayLike)}catch(t){t!==isCallableMarker&&(reflectApply=null)}else reflectApply=null;var constructorRegex=/^\s*class\b/,isES6ClassFn=function(e){try{var n=fnToStr$1.call(e);return constructorRegex.test(n)}catch{return!1}},tryFunctionObject=function(e){try{return isES6ClassFn(e)?!1:(fnToStr$1.call(e),!0)}catch{return!1}},toStr$5=Object.prototype.toString,objectClass="[object Object]",fnClass="[object Function]",genClass="[object GeneratorFunction]",ddaClass="[object HTMLAllCollection]",ddaClass2="[object HTML document.all class]",ddaClass3="[object HTMLCollection]",hasToStringTag$7=typeof Symbol=="function"&&!!Symbol.toStringTag,isIE68=!(0 in[,]),isDDA=function(){return!1};if(typeof document=="object"){var all$2=document.all;toStr$5.call(all$2)===toStr$5.call(document.all)&&(isDDA=function(e){if((isIE68||!e)&&(typeof e>"u"||typeof e=="object"))try{var n=toStr$5.call(e);return(n===ddaClass||n===ddaClass2||n===ddaClass3||n===objectClass)&&e("")==null}catch{}return!1})}var isCallable$1=reflectApply?function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{reflectApply(e,null,badArrayLike)}catch(n){if(n!==isCallableMarker)return!1}return!isES6ClassFn(e)&&tryFunctionObject(e)}:function(e){if(isDDA(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(hasToStringTag$7)return tryFunctionObject(e);if(isES6ClassFn(e))return!1;var n=toStr$5.call(e);return n!==fnClass&&n!==genClass&&!/^\[object HTML/.test(n)?!1:tryFunctionObject(e)},isCallable=isCallable$1,toStr$4=Object.prototype.toString,hasOwnProperty$4=Object.prototype.hasOwnProperty,forEachArray=function(e,n,a){for(var o=0,l=e.length;o<l;o++)hasOwnProperty$4.call(e,o)&&(a==null?n(e[o],o,e):n.call(a,e[o],o,e))},forEachString=function(e,n,a){for(var o=0,l=e.length;o<l;o++)a==null?n(e.charAt(o),o,e):n.call(a,e.charAt(o),o,e)},forEachObject=function(e,n,a){for(var o in e)hasOwnProperty$4.call(e,o)&&(a==null?n(e[o],o,e):n.call(a,e[o],o,e))},forEach$4=function(e,n,a){if(!isCallable(n))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=a),toStr$4.call(e)==="[object Array]"?forEachArray(e,n,o):typeof e=="string"?forEachString(e,n,o):forEachObject(e,n,o)},forEach_1=forEach$4,possibleNames=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],g$2=typeof globalThis>"u"?commonjsGlobal:globalThis,availableTypedArrays$2=function(){for(var e=[],n=0;n<possibleNames.length;n++)typeof g$2[possibleNames[n]]=="function"&&(e[e.length]=possibleNames[n]);return e},GetIntrinsic$3=getIntrinsic,$gOPD=GetIntrinsic$3("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd=$gOPD,forEach$3=forEach_1,availableTypedArrays$1=availableTypedArrays$2,callBound$7=callBound$c,$toString$3=callBound$7("Object.prototype.toString"),hasToStringTag$6=shams(),gOPD$2=gopd,g$1=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays$1=availableTypedArrays$1(),$indexOf=callBound$7("Array.prototype.indexOf",!0)||function(e,n){for(var a=0;a<e.length;a+=1)if(e[a]===n)return a;return-1},$slice$1=callBound$7("String.prototype.slice"),toStrTags$1={},getPrototypeOf$2=Object.getPrototypeOf;hasToStringTag$6&&gOPD$2&&getPrototypeOf$2&&forEach$3(typedArrays$1,function(t){var e=new g$1[t];if(Symbol.toStringTag in e){var n=getPrototypeOf$2(e),a=gOPD$2(n,Symbol.toStringTag);if(!a){var o=getPrototypeOf$2(n);a=gOPD$2(o,Symbol.toStringTag)}toStrTags$1[t]=a.get}});var tryTypedArrays$1=function(e){var n=!1;return forEach$3(toStrTags$1,function(a,o){if(!n)try{n=a.call(e)===o}catch{}}),n},isTypedArray$3=function(e){if(!e||typeof e!="object")return!1;if(!hasToStringTag$6||!(Symbol.toStringTag in e)){var n=$slice$1($toString$3(e),8,-1);return $indexOf(typedArrays$1,n)>-1}return gOPD$2?tryTypedArrays$1(e):!1},callBind=callBindExports,callBound$6=callBound$c,GetIntrinsic$2=getIntrinsic,isTypedArray$2=isTypedArray$3,$ArrayBuffer=GetIntrinsic$2("ArrayBuffer",!0),$Float32Array=GetIntrinsic$2("Float32Array",!0),$byteLength$1=callBound$6("ArrayBuffer.prototype.byteLength",!0),abSlice=$ArrayBuffer&&!$byteLength$1&&new $ArrayBuffer().slice,$abSlice=abSlice&&callBind(abSlice),isArrayBuffer$2=$byteLength$1||$abSlice?function(e){if(!e||typeof e!="object")return!1;try{return $byteLength$1?$byteLength$1(e):$abSlice(e,0),!0}catch{return!1}}:$Float32Array?function(e){try{return new $Float32Array(e).buffer===e&&!isTypedArray$2(e)}catch{return!1}}:function(e){return!1},getDay=Date.prototype.getDay,tryDateObject=function(e){try{return getDay.call(e),!0}catch{return!1}},toStr$3=Object.prototype.toString,dateClass="[object Date]",hasToStringTag$5=shams(),isDateObject=function(e){return typeof e!="object"||e===null?!1:hasToStringTag$5?tryDateObject(e):toStr$3.call(e)===dateClass},callBound$5=callBound$c,hasToStringTag$4=shams(),has,$exec,isRegexMarker,badStringifier;if(hasToStringTag$4){has=callBound$5("Object.prototype.hasOwnProperty"),$exec=callBound$5("RegExp.prototype.exec"),isRegexMarker={};var throwRegexMarker=function(){throw isRegexMarker};badStringifier={toString:throwRegexMarker,valueOf:throwRegexMarker},typeof Symbol.toPrimitive=="symbol"&&(badStringifier[Symbol.toPrimitive]=throwRegexMarker)}var $toString$2=callBound$5("Object.prototype.toString"),gOPD$1=Object.getOwnPropertyDescriptor,regexClass="[object RegExp]",isRegex$2=hasToStringTag$4?function(e){if(!e||typeof e!="object")return!1;var n=gOPD$1(e,"lastIndex"),a=n&&has(n,"value");if(!a)return!1;try{$exec(e,badStringifier)}catch(o){return o===isRegexMarker}}:function(e){return!e||typeof e!="object"&&typeof e!="function"?!1:$toString$2(e)===regexClass},callBound$4=callBound$c,$byteLength=callBound$4("SharedArrayBuffer.prototype.byteLength",!0),isSharedArrayBuffer$1=$byteLength?function(e){if(!e||typeof e!="object")return!1;try{return $byteLength(e),!0}catch{return!1}}:function(e){return!1},numToStr=Number.prototype.toString,tryNumberObject=function(e){try{return numToStr.call(e),!0}catch{return!1}},toStr$2=Object.prototype.toString,numClass="[object Number]",hasToStringTag$3=shams(),isNumberObject=function(e){return typeof e=="number"?!0:typeof e!="object"?!1:hasToStringTag$3?tryNumberObject(e):toStr$2.call(e)===numClass},callBound$3=callBound$c,$boolToStr=callBound$3("Boolean.prototype.toString"),$toString$1=callBound$3("Object.prototype.toString"),tryBooleanObject=function(e){try{return $boolToStr(e),!0}catch{return!1}},boolClass="[object Boolean]",hasToStringTag$2=shams(),isBooleanObject=function(e){return typeof e=="boolean"?!0:e===null||typeof e!="object"?!1:hasToStringTag$2&&Symbol.toStringTag in e?tryBooleanObject(e):$toString$1(e)===boolClass},isSymbolExports={},isSymbol$1={get exports(){return isSymbolExports},set exports(t){isSymbolExports=t}},toStr$1=Object.prototype.toString,hasSymbols=hasSymbols$5();if(hasSymbols){var symToStr=Symbol.prototype.toString,symStringRegex=/^Symbol\(.*\)$/,isSymbolObject=function(e){return typeof e.valueOf()!="symbol"?!1:symStringRegex.test(symToStr.call(e))};isSymbol$1.exports=function(e){if(typeof e=="symbol")return!0;if(toStr$1.call(e)!=="[object Symbol]")return!1;try{return isSymbolObject(e)}catch{return!1}}}else isSymbol$1.exports=function(e){return!1};var isBigintExports={},isBigint={get exports(){return isBigintExports},set exports(t){isBigintExports=t}},$BigInt=typeof BigInt<"u"&&BigInt,hasBigints=function(){return typeof $BigInt=="function"&&typeof BigInt=="function"&&typeof $BigInt(42)=="bigint"&&typeof BigInt(42)=="bigint"},hasBigInts=hasBigints();if(hasBigInts){var bigIntValueOf=BigInt.prototype.valueOf,tryBigInt=function(e){try{return bigIntValueOf.call(e),!0}catch{}return!1};isBigint.exports=function(e){return e===null||typeof e>"u"||typeof e=="boolean"||typeof e=="string"||typeof e=="number"||typeof e=="symbol"||typeof e=="function"?!1:typeof e=="bigint"?!0:tryBigInt(e)}}else isBigint.exports=function(e){return!1};var isString$2=isString$4,isNumber$2=isNumberObject,isBoolean$3=isBooleanObject,isSymbol=isSymbolExports,isBigInt=isBigintExports,whichBoxedPrimitive$1=function(e){if(e==null||typeof e!="object"&&typeof e!="function")return null;if(isString$2(e))return"String";if(isNumber$2(e))return"Number";if(isBoolean$3(e))return"Boolean";if(isSymbol(e))return"Symbol";if(isBigInt(e))return"BigInt"},$WeakMap=typeof WeakMap=="function"&&WeakMap.prototype?WeakMap:null,$WeakSet$1=typeof WeakSet=="function"&&WeakSet.prototype?WeakSet:null,exported;$WeakMap||(exported=function(e){return!1});var $mapHas$2=$WeakMap?$WeakMap.prototype.has:null,$setHas$2=$WeakSet$1?$WeakSet$1.prototype.has:null;!exported&&!$mapHas$2&&(exported=function(e){return!1});var isWeakmap=exported||function(e){if(!e||typeof e!="object")return!1;try{if($mapHas$2.call(e,$mapHas$2),$setHas$2)try{$setHas$2.call(e,$setHas$2)}catch{return!0}return e instanceof $WeakMap}catch{}return!1},isWeaksetExports={},isWeakset={get exports(){return isWeaksetExports},set exports(t){isWeaksetExports=t}},GetIntrinsic$1=getIntrinsic,callBound$2=callBound$c,$WeakSet=GetIntrinsic$1("%WeakSet%",!0),$setHas$1=callBound$2("WeakSet.prototype.has",!0);if($setHas$1){var $mapHas$1=callBound$2("WeakMap.prototype.has",!0);isWeakset.exports=function(e){if(!e||typeof e!="object")return!1;try{if($setHas$1(e,$setHas$1),$mapHas$1)try{$mapHas$1(e,$mapHas$1)}catch{return!0}return e instanceof $WeakSet}catch{}return!1}}else isWeakset.exports=function(e){return!1};var isMap=isMap$2,isSet=isSet$2,isWeakMap=isWeakmap,isWeakSet=isWeaksetExports,whichCollection$1=function(e){if(e&&typeof e=="object"){if(isMap(e))return"Map";if(isSet(e))return"Set";if(isWeakMap(e))return"WeakMap";if(isWeakSet(e))return"WeakSet"}return!1},forEach$2=forEach_1,availableTypedArrays=availableTypedArrays$2,callBound$1=callBound$c,gOPD=gopd,$toString=callBound$1("Object.prototype.toString"),hasToStringTag$1=shams(),g=typeof globalThis>"u"?commonjsGlobal:globalThis,typedArrays=availableTypedArrays(),$slice=callBound$1("String.prototype.slice"),toStrTags={},getPrototypeOf$1=Object.getPrototypeOf;hasToStringTag$1&&gOPD&&getPrototypeOf$1&&forEach$2(typedArrays,function(t){if(typeof g[t]=="function"){var e=new g[t];if(Symbol.toStringTag in e){var n=getPrototypeOf$1(e),a=gOPD(n,Symbol.toStringTag);if(!a){var o=getPrototypeOf$1(n);a=gOPD(o,Symbol.toStringTag)}toStrTags[t]=a.get}}});var tryTypedArrays=function(e){var n=!1;return forEach$2(toStrTags,function(a,o){if(!n)try{var l=a.call(e);l===o&&(n=l)}catch{}}),n},isTypedArray$1=isTypedArray$3,whichTypedArray$1=function(e){return isTypedArray$1(e)?!hasToStringTag$1||!(Symbol.toStringTag in e)?$slice($toString(e),8,-1):tryTypedArrays(e):!1},assign$4=object_assign,callBound=callBound$c,flags=regexp_prototype_flags,GetIntrinsic=getIntrinsic,getIterator=esGetIteratorExports,getSideChannel=sideChannel,is$2=objectIs,isArguments$1=isArguments$3,isArray$6=isarray$1,isArrayBuffer$1=isArrayBuffer$2,isDate$2=isDateObject,isRegex$1=isRegex$2,isSharedArrayBuffer=isSharedArrayBuffer$1,objectKeys$2=objectKeys$4,whichBoxedPrimitive=whichBoxedPrimitive$1,whichCollection=whichCollection$1,whichTypedArray=whichTypedArray$1,byteLength$1=callBound("ArrayBuffer.prototype.byteLength",!0)||function(e){return e.byteLength},sabByteLength=callBound("SharedArrayBuffer.prototype.byteLength",!0),$getTime=callBound("Date.prototype.getTime"),gPO=Object.getPrototypeOf,$objToString=callBound("Object.prototype.toString"),$Set=GetIntrinsic("%Set%",!0),$mapHas=callBound("Map.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSize=callBound("Map.prototype.size",!0),$setAdd=callBound("Set.prototype.add",!0),$setDelete=callBound("Set.prototype.delete",!0),$setHas=callBound("Set.prototype.has",!0),$setSize=callBound("Set.prototype.size",!0);function setHasEqualElement(t,e,n,a){for(var o=getIterator(t),l;(l=o.next())&&!l.done;)if(internalDeepEqual(e,l.value,n,a))return $setDelete(t,l.value),!0;return!1}function findLooseMatchingPrimitives(t){if(typeof t>"u")return null;if(typeof t!="object")return typeof t=="symbol"?!1:typeof t=="string"||typeof t=="number"?+t==+t:!0}function mapMightHaveLoosePrim(t,e,n,a,o,l){var u=findLooseMatchingPrimitives(n);if(u!=null)return u;var d=$mapGet(e,u),m=assign$4({},o,{strict:!1});return typeof d>"u"&&!$mapHas(e,u)||!internalDeepEqual(a,d,m,l)?!1:!$mapHas(t,u)&&internalDeepEqual(a,d,m,l)}function setMightHaveLoosePrim(t,e,n){var a=findLooseMatchingPrimitives(n);return a??($setHas(e,a)&&!$setHas(t,a))}function mapHasEqualEntry(t,e,n,a,o,l){for(var u=getIterator(t),d,m;(d=u.next())&&!d.done;)if(m=d.value,internalDeepEqual(n,m,o,l)&&internalDeepEqual(a,$mapGet(e,m),o,l))return $setDelete(t,m),!0;return!1}function internalDeepEqual(t,e,n,a){var o=n||{};if(o.strict?is$2(t,e):t===e)return!0;var l=whichBoxedPrimitive(t),u=whichBoxedPrimitive(e);if(l!==u)return!1;if(!t||!e||typeof t!="object"&&typeof e!="object")return o.strict?is$2(t,e):t==e;var d=a.has(t),m=a.has(e),y;if(d&&m){if(a.get(t)===a.get(e))return!0}else y={};return d||a.set(t,y),m||a.set(e,y),objEquiv$1(t,e,o,a)}function isBuffer$4(t){return!t||typeof t!="object"||typeof t.length!="number"||typeof t.copy!="function"||typeof t.slice!="function"||t.length>0&&typeof t[0]!="number"?!1:!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))}function setEquiv(t,e,n,a){if($setSize(t)!==$setSize(e))return!1;for(var o=getIterator(t),l=getIterator(e),u,d,m;(u=o.next())&&!u.done;)if(u.value&&typeof u.value=="object")m||(m=new $Set),$setAdd(m,u.value);else if(!$setHas(e,u.value)){if(n.strict||!setMightHaveLoosePrim(t,e,u.value))return!1;m||(m=new $Set),$setAdd(m,u.value)}if(m){for(;(d=l.next())&&!d.done;)if(d.value&&typeof d.value=="object"){if(!setHasEqualElement(m,d.value,n.strict,a))return!1}else if(!n.strict&&!$setHas(t,d.value)&&!setHasEqualElement(m,d.value,n.strict,a))return!1;return $setSize(m)===0}return!0}function mapEquiv(t,e,n,a){if($mapSize(t)!==$mapSize(e))return!1;for(var o=getIterator(t),l=getIterator(e),u,d,m,y,b,_;(u=o.next())&&!u.done;)if(y=u.value[0],b=u.value[1],y&&typeof y=="object")m||(m=new $Set),$setAdd(m,y);else if(_=$mapGet(e,y),typeof _>"u"&&!$mapHas(e,y)||!internalDeepEqual(b,_,n,a)){if(n.strict||!mapMightHaveLoosePrim(t,e,y,b,n,a))return!1;m||(m=new $Set),$setAdd(m,y)}if(m){for(;(d=l.next())&&!d.done;)if(y=d.value[0],_=d.value[1],y&&typeof y=="object"){if(!mapHasEqualEntry(m,t,y,_,n,a))return!1}else if(!n.strict&&(!t.has(y)||!internalDeepEqual($mapGet(t,y),_,n,a))&&!mapHasEqualEntry(m,t,y,_,assign$4({},n,{strict:!1}),a))return!1;return $setSize(m)===0}return!0}function objEquiv$1(t,e,n,a){var o,l;if(typeof t!=typeof e||t==null||e==null||$objToString(t)!==$objToString(e)||isArguments$1(t)!==isArguments$1(e))return!1;var u=isArray$6(t),d=isArray$6(e);if(u!==d)return!1;var m=t instanceof Error,y=e instanceof Error;if(m!==y||(m||y)&&(t.name!==e.name||t.message!==e.message))return!1;var b=isRegex$1(t),_=isRegex$1(e);if(b!==_||(b||_)&&(t.source!==e.source||flags(t)!==flags(e)))return!1;var w=isDate$2(t),E=isDate$2(e);if(w!==E||(w||E)&&$getTime(t)!==$getTime(e)||n.strict&&gPO&&gPO(t)!==gPO(e))return!1;var A=whichTypedArray(t),C=whichTypedArray(e);if((A||C)&&A!==C)return!1;var k=isBuffer$4(t),B=isBuffer$4(e);if(k!==B)return!1;if(k||B){if(t.length!==e.length)return!1;for(o=0;o<t.length;o++)if(t[o]!==e[o])return!1;return!0}var D=isArrayBuffer$1(t),q=isArrayBuffer$1(e);if(D!==q)return!1;if(D||q)return byteLength$1(t)!==byteLength$1(e)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(t),new Uint8Array(e),n,a);var j=isSharedArrayBuffer(t),J=isSharedArrayBuffer(e);if(j!==J)return!1;if(j||J)return sabByteLength(t)!==sabByteLength(e)?!1:typeof Uint8Array=="function"&&internalDeepEqual(new Uint8Array(t),new Uint8Array(e),n,a);if(typeof t!=typeof e)return!1;var Y=objectKeys$2(t),L=objectKeys$2(e);if(Y.length!==L.length)return!1;for(Y.sort(),L.sort(),o=Y.length-1;o>=0;o--)if(Y[o]!=L[o])return!1;for(o=Y.length-1;o>=0;o--)if(l=Y[o],!internalDeepEqual(t[l],e[l],n,a))return!1;var Z=whichCollection(t),Q=whichCollection(e);return Z!==Q?!1:Z==="Set"||Q==="Set"?setEquiv(t,e,n,a):Z==="Map"?mapEquiv(t,e,n,a):!0}var deepEqual$2=function(e,n,a){return internalDeepEqual(e,n,a,getSideChannel())},cryptoBrowserify={},browserExports$2={},browser$g={get exports(){return browserExports$2},set exports(t){browserExports$2=t}},safeBufferExports={},safeBuffer$1={get exports(){return safeBufferExports},set exports(t){safeBufferExports=t}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=buffer$3,a=n.Buffer;function o(u,d){for(var m in u)d[m]=u[m]}a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=n:(o(n,e),e.Buffer=l);function l(u,d,m){return a(u,d,m)}l.prototype=Object.create(a.prototype),o(a,l),l.from=function(u,d,m){if(typeof u=="number")throw new TypeError("Argument must not be a number");return a(u,d,m)},l.alloc=function(u,d,m){if(typeof u!="number")throw new TypeError("Argument must be a number");var y=a(u);return d!==void 0?typeof m=="string"?y.fill(d,m):y.fill(d):y.fill(0),y},l.allocUnsafe=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return a(u)},l.allocUnsafeSlow=function(u){if(typeof u!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(u)}})(safeBuffer$1,safeBufferExports);var MAX_BYTES=65536,MAX_UINT32=4294967295;function oldBrowser$1(){throw new Error(`Secure random number generation is not supported by this browser.
Use Chrome, Firefox or Internet Explorer 11`)}var Buffer$J=safeBufferExports.Buffer,crypto$7=commonjsGlobal.crypto||commonjsGlobal.msCrypto;crypto$7&&crypto$7.getRandomValues?browser$g.exports=randomBytes$4:browser$g.exports=oldBrowser$1;function randomBytes$4(t,e){if(t>MAX_UINT32)throw new RangeError("requested too many random bytes");var n=Buffer$J.allocUnsafe(t);if(t>0)if(t>MAX_BYTES)for(var a=0;a<t;a+=MAX_BYTES)crypto$7.getRandomValues(n.slice(a,a+MAX_BYTES));else crypto$7.getRandomValues(n);return typeof e=="function"?browser$1$1.nextTick(function(){e(null,n)}):n}var inherits_browserExports={},inherits_browser$1={get exports(){return inherits_browserExports},set exports(t){inherits_browserExports=t}};typeof Object.create=="function"?inherits_browser$1.exports=function(e,n){n&&(e.super_=n,e.prototype=Object.create(n.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser$1.exports=function(e,n){if(n){e.super_=n;var a=function(){};a.prototype=n.prototype,e.prototype=new a,e.prototype.constructor=e}};var readableBrowserExports={},readableBrowser={get exports(){return readableBrowserExports},set exports(t){readableBrowserExports=t}},eventsExports={},events$1={get exports(){return eventsExports},set exports(t){eventsExports=t}},R=typeof Reflect=="object"?Reflect:null,ReflectApply=R&&typeof R.apply=="function"?R.apply:function(e,n,a){return Function.prototype.apply.call(e,n,a)},ReflectOwnKeys;R&&typeof R.ownKeys=="function"?ReflectOwnKeys=R.ownKeys:Object.getOwnPropertySymbols?ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:ReflectOwnKeys=function(e){return Object.getOwnPropertyNames(e)};function ProcessEmitWarning(t){console&&console.warn&&console.warn(t)}var NumberIsNaN=Number.isNaN||function(e){return e!==e};function EventEmitter$3(){EventEmitter$3.init.call(this)}events$1.exports=EventEmitter$3;var once_1=eventsExports.once=once$3;EventEmitter$3.EventEmitter=EventEmitter$3;EventEmitter$3.prototype._events=void 0;EventEmitter$3.prototype._eventsCount=0;EventEmitter$3.prototype._maxListeners=void 0;var defaultMaxListeners=10;function checkListener(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(EventEmitter$3,"defaultMaxListeners",{enumerable:!0,get:function(){return defaultMaxListeners},set:function(t){if(typeof t!="number"||t<0||NumberIsNaN(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");defaultMaxListeners=t}});EventEmitter$3.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};EventEmitter$3.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||NumberIsNaN(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function _getMaxListeners(t){return t._maxListeners===void 0?EventEmitter$3.defaultMaxListeners:t._maxListeners}EventEmitter$3.prototype.getMaxListeners=function(){return _getMaxListeners(this)};EventEmitter$3.prototype.emit=function(e){for(var n=[],a=1;a<arguments.length;a++)n.push(arguments[a]);var o=e==="error",l=this._events;if(l!==void 0)o=o&&l.error===void 0;else if(!o)return!1;if(o){var u;if(n.length>0&&(u=n[0]),u instanceof Error)throw u;var d=new Error("Unhandled error."+(u?" ("+u.message+")":""));throw d.context=u,d}var m=l[e];if(m===void 0)return!1;if(typeof m=="function")ReflectApply(m,this,n);else for(var y=m.length,b=arrayClone(m,y),a=0;a<y;++a)ReflectApply(b[a],this,n);return!0};function _addListener(t,e,n,a){var o,l,u;if(checkListener(n),l=t._events,l===void 0?(l=t._events=Object.create(null),t._eventsCount=0):(l.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),l=t._events),u=l[e]),u===void 0)u=l[e]=n,++t._eventsCount;else if(typeof u=="function"?u=l[e]=a?[n,u]:[u,n]:a?u.unshift(n):u.push(n),o=_getMaxListeners(t),o>0&&u.length>o&&!u.warned){u.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=t,d.type=e,d.count=u.length,ProcessEmitWarning(d)}return t}EventEmitter$3.prototype.addListener=function(e,n){return _addListener(this,e,n,!1)};EventEmitter$3.prototype.on=EventEmitter$3.prototype.addListener;EventEmitter$3.prototype.prependListener=function(e,n){return _addListener(this,e,n,!0)};function onceWrapper(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _onceWrap(t,e,n){var a={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},o=onceWrapper.bind(a);return o.listener=n,a.wrapFn=o,o}EventEmitter$3.prototype.once=function(e,n){return checkListener(n),this.on(e,_onceWrap(this,e,n)),this};EventEmitter$3.prototype.prependOnceListener=function(e,n){return checkListener(n),this.prependListener(e,_onceWrap(this,e,n)),this};EventEmitter$3.prototype.removeListener=function(e,n){var a,o,l,u,d;if(checkListener(n),o=this._events,o===void 0)return this;if(a=o[e],a===void 0)return this;if(a===n||a.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,a.listener||n));else if(typeof a!="function"){for(l=-1,u=a.length-1;u>=0;u--)if(a[u]===n||a[u].listener===n){d=a[u].listener,l=u;break}if(l<0)return this;l===0?a.shift():spliceOne(a,l),a.length===1&&(o[e]=a[0]),o.removeListener!==void 0&&this.emit("removeListener",e,d||n)}return this};EventEmitter$3.prototype.off=EventEmitter$3.prototype.removeListener;EventEmitter$3.prototype.removeAllListeners=function(e){var n,a,o;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[e]),this;if(arguments.length===0){var l=Object.keys(a),u;for(o=0;o<l.length;++o)u=l[o],u!=="removeListener"&&this.removeAllListeners(u);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=a[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(e,n[o]);return this};function _listeners(t,e,n){var a=t._events;if(a===void 0)return[];var o=a[e];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?unwrapListeners(o):arrayClone(o,o.length)}EventEmitter$3.prototype.listeners=function(e){return _listeners(this,e,!0)};EventEmitter$3.prototype.rawListeners=function(e){return _listeners(this,e,!1)};EventEmitter$3.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):listenerCount$1.call(t,e)};EventEmitter$3.prototype.listenerCount=listenerCount$1;function listenerCount$1(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}EventEmitter$3.prototype.eventNames=function(){return this._eventsCount>0?ReflectOwnKeys(this._events):[]};function arrayClone(t,e){for(var n=new Array(e),a=0;a<e;++a)n[a]=t[a];return n}function spliceOne(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function unwrapListeners(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function once$3(t,e){return new Promise(function(n,a){function o(u){t.removeListener(e,l),a(u)}function l(){typeof t.removeListener=="function"&&t.removeListener("error",o),n([].slice.call(arguments))}eventTargetAgnosticAddListener(t,e,l,{once:!0}),e!=="error"&&addErrorHandlerIfEventEmitter(t,o,{once:!0})})}function addErrorHandlerIfEventEmitter(t,e,n){typeof t.on=="function"&&eventTargetAgnosticAddListener(t,"error",e,n)}function eventTargetAgnosticAddListener(t,e,n,a){if(typeof t.on=="function")a.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function o(l){a.once&&t.removeEventListener(e,o),n(l)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var streamBrowser=eventsExports.EventEmitter,buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;function t(w,E){var A=Object.keys(w);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(w);E&&(C=C.filter(function(k){return Object.getOwnPropertyDescriptor(w,k).enumerable})),A.push.apply(A,C)}return A}function e(w){for(var E=1;E<arguments.length;E++){var A=arguments[E]!=null?arguments[E]:{};E%2?t(Object(A),!0).forEach(function(C){n(w,C,A[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(A)):t(Object(A)).forEach(function(C){Object.defineProperty(w,C,Object.getOwnPropertyDescriptor(A,C))})}return w}function n(w,E,A){return E in w?Object.defineProperty(w,E,{value:A,enumerable:!0,configurable:!0,writable:!0}):w[E]=A,w}function a(w,E){if(!(w instanceof E))throw new TypeError("Cannot call a class as a function")}function o(w,E){for(var A=0;A<E.length;A++){var C=E[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(w,C.key,C)}}function l(w,E,A){return E&&o(w.prototype,E),A&&o(w,A),w}var u=buffer$3,d=u.Buffer,m=require$$0$2,y=m.inspect,b=y&&y.custom||"inspect";function _(w,E,A){d.prototype.copy.call(w,E,A)}return buffer_list=function(){function w(){a(this,w),this.head=null,this.tail=null,this.length=0}return l(w,[{key:"push",value:function(A){var C={data:A,next:null};this.length>0?this.tail.next=C:this.head=C,this.tail=C,++this.length}},{key:"unshift",value:function(A){var C={data:A,next:this.head};this.length===0&&(this.tail=C),this.head=C,++this.length}},{key:"shift",value:function(){if(this.length!==0){var A=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,A}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(A){if(this.length===0)return"";for(var C=this.head,k=""+C.data;C=C.next;)k+=A+C.data;return k}},{key:"concat",value:function(A){if(this.length===0)return d.alloc(0);for(var C=d.allocUnsafe(A>>>0),k=this.head,B=0;k;)_(k.data,C,B),B+=k.data.length,k=k.next;return C}},{key:"consume",value:function(A,C){var k;return A<this.head.data.length?(k=this.head.data.slice(0,A),this.head.data=this.head.data.slice(A)):A===this.head.data.length?k=this.shift():k=C?this._getString(A):this._getBuffer(A),k}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(A){var C=this.head,k=1,B=C.data;for(A-=B.length;C=C.next;){var D=C.data,q=A>D.length?D.length:A;if(q===D.length?B+=D:B+=D.slice(0,A),A-=q,A===0){q===D.length?(++k,C.next?this.head=C.next:this.head=this.tail=null):(this.head=C,C.data=D.slice(q));break}++k}return this.length-=k,B}},{key:"_getBuffer",value:function(A){var C=d.allocUnsafe(A),k=this.head,B=1;for(k.data.copy(C),A-=k.data.length;k=k.next;){var D=k.data,q=A>D.length?D.length:A;if(D.copy(C,C.length-A,0,q),A-=q,A===0){q===D.length?(++B,k.next?this.head=k.next:this.head=this.tail=null):(this.head=k,k.data=D.slice(q));break}++B}return this.length-=B,C}},{key:b,value:function(A,C){return y(this,e({},C,{depth:0,customInspect:!1}))}}]),w}(),buffer_list}function destroy(t,e){var n=this,a=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return a||o?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,browser$1$1.nextTick(emitErrorNT,this,t)):browser$1$1.nextTick(emitErrorNT,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(l){!e&&l?n._writableState?n._writableState.errorEmitted?browser$1$1.nextTick(emitCloseNT,n):(n._writableState.errorEmitted=!0,browser$1$1.nextTick(emitErrorAndCloseNT,n,l)):browser$1$1.nextTick(emitErrorAndCloseNT,n,l):e?(browser$1$1.nextTick(emitCloseNT,n),e(l)):browser$1$1.nextTick(emitCloseNT,n)}),this)}function emitErrorAndCloseNT(t,e){emitErrorNT(t,e),emitCloseNT(t)}function emitCloseNT(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function undestroy(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function emitErrorNT(t,e){t.emit("error",e)}function errorOrDestroy(t,e){var n=t._readableState,a=t._writableState;n&&n.autoDestroy||a&&a.autoDestroy?t.destroy(e):t.emit("error",e)}var destroy_1={destroy,undestroy,errorOrDestroy},errorsBrowser={};function _inheritsLoose(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var codes$1={};function createErrorType(t,e,n){n||(n=Error);function a(l,u,d){return typeof e=="string"?e:e(l,u,d)}var o=function(l){_inheritsLoose(u,l);function u(d,m,y){return l.call(this,a(d,m,y))||this}return u}(n);o.prototype.name=n.name,o.prototype.code=t,codes$1[t]=o}function oneOf(t,e){if(Array.isArray(t)){var n=t.length;return t=t.map(function(a){return String(a)}),n>2?"one of ".concat(e," ").concat(t.slice(0,n-1).join(", "),", or ")+t[n-1]:n===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function startsWith(t,e,n){return t.substr(!n||n<0?0:+n,e.length)===e}function endsWith$1(t,e,n){return(n===void 0||n>t.length)&&(n=t.length),t.substring(n-e.length,n)===e}function includes(t,e,n){return typeof n!="number"&&(n=0),n+e.length>t.length?!1:t.indexOf(e,n)!==-1}createErrorType("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);createErrorType("ERR_INVALID_ARG_TYPE",function(t,e,n){var a;typeof e=="string"&&startsWith(e,"not ")?(a="must not be",e=e.replace(/^not /,"")):a="must be";var o;if(endsWith$1(t," argument"))o="The ".concat(t," ").concat(a," ").concat(oneOf(e,"type"));else{var l=includes(t,".")?"property":"argument";o='The "'.concat(t,'" ').concat(l," ").concat(a," ").concat(oneOf(e,"type"))}return o+=". Received type ".concat(typeof n),o},TypeError);createErrorType("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");createErrorType("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});createErrorType("ERR_STREAM_PREMATURE_CLOSE","Premature close");createErrorType("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});createErrorType("ERR_MULTIPLE_CALLBACK","Callback called multiple times");createErrorType("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");createErrorType("ERR_STREAM_WRITE_AFTER_END","write after end");createErrorType("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);createErrorType("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);createErrorType("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");errorsBrowser.codes=codes$1;var ERR_INVALID_OPT_VALUE=errorsBrowser.codes.ERR_INVALID_OPT_VALUE;function highWaterMarkFrom(t,e,n){return t.highWaterMark!=null?t.highWaterMark:e?t[n]:null}function getHighWaterMark(t,e,n,a){var o=highWaterMarkFrom(e,a,n);if(o!=null){if(!(isFinite(o)&&Math.floor(o)===o)||o<0){var l=a?n:"highWaterMark";throw new ERR_INVALID_OPT_VALUE(l,o)}return Math.floor(o)}return t.objectMode?16:16*1024}var state={getHighWaterMark},browser$f=deprecate$1;function deprecate$1(t,e){if(config("noDeprecation"))return t;var n=!1;function a(){if(!n){if(config("throwDeprecation"))throw new Error(e);config("traceDeprecation")?console.trace(e):console.warn(e),n=!0}return t.apply(this,arguments)}return a}function config(t){try{if(!commonjsGlobal.localStorage)return!1}catch{return!1}var e=commonjsGlobal.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}var _stream_writable,hasRequired_stream_writable;function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1,_stream_writable=Z;function t(fe){var le=this;this.next=null,this.entry=null,this.finish=function(){ee(le,fe)}}var e;Z.WritableState=Y;var n={deprecate:browser$f},a=streamBrowser,o=buffer$3.Buffer,l=commonjsGlobal.Uint8Array||function(){};function u(fe){return o.from(fe)}function d(fe){return o.isBuffer(fe)||fe instanceof l}var m=destroy_1,y=state,b=y.getHighWaterMark,_=errorsBrowser.codes,w=_.ERR_INVALID_ARG_TYPE,E=_.ERR_METHOD_NOT_IMPLEMENTED,A=_.ERR_MULTIPLE_CALLBACK,C=_.ERR_STREAM_CANNOT_PIPE,k=_.ERR_STREAM_DESTROYED,B=_.ERR_STREAM_NULL_VALUES,D=_.ERR_STREAM_WRITE_AFTER_END,q=_.ERR_UNKNOWN_ENCODING,j=m.errorOrDestroy;inherits_browserExports(Z,a);function J(){}function Y(fe,le,ce){e=e||require_stream_duplex(),fe=fe||{},typeof ce!="boolean"&&(ce=le instanceof e),this.objectMode=!!fe.objectMode,ce&&(this.objectMode=this.objectMode||!!fe.writableObjectMode),this.highWaterMark=b(this,fe,"writableHighWaterMark",ce),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var pe=fe.decodeStrings===!1;this.decodeStrings=!pe,this.defaultEncoding=fe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(se){M(le,se)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=fe.emitClose!==!1,this.autoDestroy=!!fe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}Y.prototype.getBuffer=function(){for(var le=this.bufferedRequest,ce=[];le;)ce.push(le),le=le.next;return ce},function(){try{Object.defineProperty(Y.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(Z,Symbol.hasInstance,{value:function(le){return L.call(this,le)?!0:this!==Z?!1:le&&le._writableState instanceof Y}})):L=function(le){return le instanceof this};function Z(fe){e=e||require_stream_duplex();var le=this instanceof e;if(!le&&!L.call(Z,this))return new Z(fe);this._writableState=new Y(fe,this,le),this.writable=!0,fe&&(typeof fe.write=="function"&&(this._write=fe.write),typeof fe.writev=="function"&&(this._writev=fe.writev),typeof fe.destroy=="function"&&(this._destroy=fe.destroy),typeof fe.final=="function"&&(this._final=fe.final)),a.call(this)}Z.prototype.pipe=function(){j(this,new C)};function Q(fe,le){var ce=new D;j(fe,ce),browser$1$1.nextTick(le,ce)}function oe(fe,le,ce,pe){var se;return ce===null?se=new B:typeof ce!="string"&&!le.objectMode&&(se=new w("chunk",["string","Buffer"],ce)),se?(j(fe,se),browser$1$1.nextTick(pe,se),!1):!0}Z.prototype.write=function(fe,le,ce){var pe=this._writableState,se=!1,de=!pe.objectMode&&d(fe);return de&&!o.isBuffer(fe)&&(fe=u(fe)),typeof le=="function"&&(ce=le,le=null),de?le="buffer":le||(le=pe.defaultEncoding),typeof ce!="function"&&(ce=J),pe.ending?Q(this,ce):(de||oe(this,pe,fe,ce))&&(pe.pendingcb++,se=U(this,pe,de,fe,le,ce)),se},Z.prototype.cork=function(){this._writableState.corked++},Z.prototype.uncork=function(){var fe=this._writableState;fe.corked&&(fe.corked--,!fe.writing&&!fe.corked&&!fe.bufferProcessing&&fe.bufferedRequest&&X(this,fe))},Z.prototype.setDefaultEncoding=function(le){if(typeof le=="string"&&(le=le.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((le+"").toLowerCase())>-1))throw new q(le);return this._writableState.defaultEncoding=le,this},Object.defineProperty(Z.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function ae(fe,le,ce){return!fe.objectMode&&fe.decodeStrings!==!1&&typeof le=="string"&&(le=o.from(le,ce)),le}Object.defineProperty(Z.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function U(fe,le,ce,pe,se,de){if(!ce){var re=ae(le,pe,se);pe!==re&&(ce=!0,se="buffer",pe=re)}var me=le.objectMode?1:pe.length;le.length+=me;var te=le.length<le.highWaterMark;if(te||(le.needDrain=!0),le.writing||le.corked){var ve=le.lastBufferedRequest;le.lastBufferedRequest={chunk:pe,encoding:se,isBuf:ce,callback:de,next:null},ve?ve.next=le.lastBufferedRequest:le.bufferedRequest=le.lastBufferedRequest,le.bufferedRequestCount+=1}else I(fe,le,!1,me,pe,se,de);return te}function I(fe,le,ce,pe,se,de,re){le.writelen=pe,le.writecb=re,le.writing=!0,le.sync=!0,le.destroyed?le.onwrite(new k("write")):ce?fe._writev(se,le.onwrite):fe._write(se,de,le.onwrite),le.sync=!1}function x(fe,le,ce,pe,se){--le.pendingcb,ce?(browser$1$1.nextTick(se,pe),browser$1$1.nextTick(F,fe,le),fe._writableState.errorEmitted=!0,j(fe,pe)):(se(pe),fe._writableState.errorEmitted=!0,j(fe,pe),F(fe,le))}function T(fe){fe.writing=!1,fe.writecb=null,fe.length-=fe.writelen,fe.writelen=0}function M(fe,le){var ce=fe._writableState,pe=ce.sync,se=ce.writecb;if(typeof se!="function")throw new A;if(T(ce),le)x(fe,ce,pe,le,se);else{var de=H(ce)||fe.destroyed;!de&&!ce.corked&&!ce.bufferProcessing&&ce.bufferedRequest&&X(fe,ce),pe?browser$1$1.nextTick(O,fe,ce,de,se):O(fe,ce,de,se)}}function O(fe,le,ce,pe){ce||z(fe,le),le.pendingcb--,pe(),F(fe,le)}function z(fe,le){le.length===0&&le.needDrain&&(le.needDrain=!1,fe.emit("drain"))}function X(fe,le){le.bufferProcessing=!0;var ce=le.bufferedRequest;if(fe._writev&&ce&&ce.next){var pe=le.bufferedRequestCount,se=new Array(pe),de=le.corkedRequestsFree;de.entry=ce;for(var re=0,me=!0;ce;)se[re]=ce,ce.isBuf||(me=!1),ce=ce.next,re+=1;se.allBuffers=me,I(fe,le,!0,le.length,se,"",de.finish),le.pendingcb++,le.lastBufferedRequest=null,de.next?(le.corkedRequestsFree=de.next,de.next=null):le.corkedRequestsFree=new t(le),le.bufferedRequestCount=0}else{for(;ce;){var te=ce.chunk,ve=ce.encoding,Se=ce.callback,be=le.objectMode?1:te.length;if(I(fe,le,!1,be,te,ve,Se),ce=ce.next,le.bufferedRequestCount--,le.writing)break}ce===null&&(le.lastBufferedRequest=null)}le.bufferedRequest=ce,le.bufferProcessing=!1}Z.prototype._write=function(fe,le,ce){ce(new E("_write()"))},Z.prototype._writev=null,Z.prototype.end=function(fe,le,ce){var pe=this._writableState;return typeof fe=="function"?(ce=fe,fe=null,le=null):typeof le=="function"&&(ce=le,le=null),fe!=null&&this.write(fe,le),pe.corked&&(pe.corked=1,this.uncork()),pe.ending||ue(this,pe,ce),this},Object.defineProperty(Z.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function H(fe){return fe.ending&&fe.length===0&&fe.bufferedRequest===null&&!fe.finished&&!fe.writing}function P(fe,le){fe._final(function(ce){le.pendingcb--,ce&&j(fe,ce),le.prefinished=!0,fe.emit("prefinish"),F(fe,le)})}function S(fe,le){!le.prefinished&&!le.finalCalled&&(typeof fe._final=="function"&&!le.destroyed?(le.pendingcb++,le.finalCalled=!0,browser$1$1.nextTick(P,fe,le)):(le.prefinished=!0,fe.emit("prefinish")))}function F(fe,le){var ce=H(le);if(ce&&(S(fe,le),le.pendingcb===0&&(le.finished=!0,fe.emit("finish"),le.autoDestroy))){var pe=fe._readableState;(!pe||pe.autoDestroy&&pe.endEmitted)&&fe.destroy()}return ce}function ue(fe,le,ce){le.ending=!0,F(fe,le),ce&&(le.finished?browser$1$1.nextTick(ce):fe.once("finish",ce)),le.ended=!0,fe.writable=!1}function ee(fe,le,ce){var pe=fe.entry;for(fe.entry=null;pe;){var se=pe.callback;le.pendingcb--,se(ce),pe=pe.next}le.corkedRequestsFree.next=fe}return Object.defineProperty(Z.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(le){this._writableState&&(this._writableState.destroyed=le)}}),Z.prototype.destroy=m.destroy,Z.prototype._undestroy=m.undestroy,Z.prototype._destroy=function(fe,le){le(fe)},_stream_writable}var _stream_duplex,hasRequired_stream_duplex;function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var t=Object.keys||function(y){var b=[];for(var _ in y)b.push(_);return b};_stream_duplex=u;var e=require_stream_readable(),n=require_stream_writable();inherits_browserExports(u,e);for(var a=t(n.prototype),o=0;o<a.length;o++){var l=a[o];u.prototype[l]||(u.prototype[l]=n.prototype[l])}function u(y){if(!(this instanceof u))return new u(y);e.call(this,y),n.call(this,y),this.allowHalfOpen=!0,y&&(y.readable===!1&&(this.readable=!1),y.writable===!1&&(this.writable=!1),y.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",d)))}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function d(){this._writableState.ended||browser$1$1.nextTick(m,this)}function m(y){y.end()}return Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),_stream_duplex}var string_decoder$1={},hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder$1;hasRequiredString_decoder=1;var t=safeBufferExports.Buffer,e=t.isEncoding||function(B){switch(B=""+B,B&&B.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(B){if(!B)return"utf8";for(var D;;)switch(B){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return B;default:if(D)return;B=(""+B).toLowerCase(),D=!0}}function a(B){var D=n(B);if(typeof D!="string"&&(t.isEncoding===e||!e(B)))throw new Error("Unknown encoding: "+B);return D||B}string_decoder$1.StringDecoder=o;function o(B){this.encoding=a(B);var D;switch(this.encoding){case"utf16le":this.text=_,this.end=w,D=4;break;case"utf8":this.fillLast=m,D=4;break;case"base64":this.text=E,this.end=A,D=3;break;default:this.write=C,this.end=k;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(D)}o.prototype.write=function(B){if(B.length===0)return"";var D,q;if(this.lastNeed){if(D=this.fillLast(B),D===void 0)return"";q=this.lastNeed,this.lastNeed=0}else q=0;return q<B.length?D?D+this.text(B,q):this.text(B,q):D||""},o.prototype.end=b,o.prototype.text=y,o.prototype.fillLast=function(B){if(this.lastNeed<=B.length)return B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);B.copy(this.lastChar,this.lastTotal-this.lastNeed,0,B.length),this.lastNeed-=B.length};function l(B){return B<=127?0:B>>5===6?2:B>>4===14?3:B>>3===30?4:B>>6===2?-1:-2}function u(B,D,q){var j=D.length-1;if(j<q)return 0;var J=l(D[j]);return J>=0?(J>0&&(B.lastNeed=J-1),J):--j<q||J===-2?0:(J=l(D[j]),J>=0?(J>0&&(B.lastNeed=J-2),J):--j<q||J===-2?0:(J=l(D[j]),J>=0?(J>0&&(J===2?J=0:B.lastNeed=J-3),J):0))}function d(B,D,q){if((D[0]&192)!==128)return B.lastNeed=0,"�";if(B.lastNeed>1&&D.length>1){if((D[1]&192)!==128)return B.lastNeed=1,"�";if(B.lastNeed>2&&D.length>2&&(D[2]&192)!==128)return B.lastNeed=2,"�"}}function m(B){var D=this.lastTotal-this.lastNeed,q=d(this,B);if(q!==void 0)return q;if(this.lastNeed<=B.length)return B.copy(this.lastChar,D,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);B.copy(this.lastChar,D,0,B.length),this.lastNeed-=B.length}function y(B,D){var q=u(this,B,D);if(!this.lastNeed)return B.toString("utf8",D);this.lastTotal=q;var j=B.length-(q-this.lastNeed);return B.copy(this.lastChar,0,j),B.toString("utf8",D,j)}function b(B){var D=B&&B.length?this.write(B):"";return this.lastNeed?D+"�":D}function _(B,D){if((B.length-D)%2===0){var q=B.toString("utf16le",D);if(q){var j=q.charCodeAt(q.length-1);if(j>=55296&&j<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1],q.slice(0,-1)}return q}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=B[B.length-1],B.toString("utf16le",D,B.length-1)}function w(B){var D=B&&B.length?this.write(B):"";if(this.lastNeed){var q=this.lastTotal-this.lastNeed;return D+this.lastChar.toString("utf16le",0,q)}return D}function E(B,D){var q=(B.length-D)%3;return q===0?B.toString("base64",D):(this.lastNeed=3-q,this.lastTotal=3,q===1?this.lastChar[0]=B[B.length-1]:(this.lastChar[0]=B[B.length-2],this.lastChar[1]=B[B.length-1]),B.toString("base64",D,B.length-q))}function A(B){var D=B&&B.length?this.write(B):"";return this.lastNeed?D+this.lastChar.toString("base64",0,3-this.lastNeed):D}function C(B){return B.toString(this.encoding)}function k(B){return B&&B.length?this.write(B):""}return string_decoder$1}var ERR_STREAM_PREMATURE_CLOSE=errorsBrowser.codes.ERR_STREAM_PREMATURE_CLOSE;function once$2(t){var e=!1;return function(){if(!e){e=!0;for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];t.apply(this,a)}}}function noop$6(){}function isRequest$1(t){return t.setHeader&&typeof t.abort=="function"}function eos$1(t,e,n){if(typeof e=="function")return eos$1(t,null,e);e||(e={}),n=once$2(n||noop$6);var a=e.readable||e.readable!==!1&&t.readable,o=e.writable||e.writable!==!1&&t.writable,l=function(){t.writable||d()},u=t._writableState&&t._writableState.finished,d=function(){o=!1,u=!0,a||n.call(t)},m=t._readableState&&t._readableState.endEmitted,y=function(){a=!1,m=!0,o||n.call(t)},b=function(A){n.call(t,A)},_=function(){var A;if(a&&!m)return(!t._readableState||!t._readableState.ended)&&(A=new ERR_STREAM_PREMATURE_CLOSE),n.call(t,A);if(o&&!u)return(!t._writableState||!t._writableState.ended)&&(A=new ERR_STREAM_PREMATURE_CLOSE),n.call(t,A)},w=function(){t.req.on("finish",d)};return isRequest$1(t)?(t.on("complete",d),t.on("abort",_),t.req?w():t.on("request",w)):o&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",y),t.on("finish",d),e.error!==!1&&t.on("error",b),t.on("close",_),function(){t.removeListener("complete",d),t.removeListener("abort",_),t.removeListener("request",w),t.req&&t.req.removeListener("finish",d),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",d),t.removeListener("end",y),t.removeListener("error",b),t.removeListener("close",_)}}var endOfStream=eos$1,async_iterator,hasRequiredAsync_iterator;function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;hasRequiredAsync_iterator=1;var t;function e(B,D,q){return D in B?Object.defineProperty(B,D,{value:q,enumerable:!0,configurable:!0,writable:!0}):B[D]=q,B}var n=endOfStream,a=Symbol("lastResolve"),o=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),d=Symbol("lastPromise"),m=Symbol("handlePromise"),y=Symbol("stream");function b(B,D){return{value:B,done:D}}function _(B){var D=B[a];if(D!==null){var q=B[y].read();q!==null&&(B[d]=null,B[a]=null,B[o]=null,D(b(q,!1)))}}function w(B){browser$1$1.nextTick(_,B)}function E(B,D){return function(q,j){B.then(function(){if(D[u]){q(b(void 0,!0));return}D[m](q,j)},j)}}var A=Object.getPrototypeOf(function(){}),C=Object.setPrototypeOf((t={get stream(){return this[y]},next:function(){var D=this,q=this[l];if(q!==null)return Promise.reject(q);if(this[u])return Promise.resolve(b(void 0,!0));if(this[y].destroyed)return new Promise(function(L,Z){browser$1$1.nextTick(function(){D[l]?Z(D[l]):L(b(void 0,!0))})});var j=this[d],J;if(j)J=new Promise(E(j,this));else{var Y=this[y].read();if(Y!==null)return Promise.resolve(b(Y,!1));J=new Promise(this[m])}return this[d]=J,J}},e(t,Symbol.asyncIterator,function(){return this}),e(t,"return",function(){var D=this;return new Promise(function(q,j){D[y].destroy(null,function(J){if(J){j(J);return}q(b(void 0,!0))})})}),t),A),k=function(D){var q,j=Object.create(C,(q={},e(q,y,{value:D,writable:!0}),e(q,a,{value:null,writable:!0}),e(q,o,{value:null,writable:!0}),e(q,l,{value:null,writable:!0}),e(q,u,{value:D._readableState.endEmitted,writable:!0}),e(q,m,{value:function(Y,L){var Z=j[y].read();Z?(j[d]=null,j[a]=null,j[o]=null,Y(b(Z,!1))):(j[a]=Y,j[o]=L)},writable:!0}),q));return j[d]=null,n(D,function(J){if(J&&J.code!=="ERR_STREAM_PREMATURE_CLOSE"){var Y=j[o];Y!==null&&(j[d]=null,j[a]=null,j[o]=null,Y(J)),j[l]=J;return}var L=j[a];L!==null&&(j[d]=null,j[a]=null,j[o]=null,L(b(void 0,!0))),j[u]=!0}),D.on("readable",w.bind(null,j)),j};return async_iterator=k,async_iterator}var fromBrowser,hasRequiredFromBrowser;function requireFromBrowser(){return hasRequiredFromBrowser||(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")}),fromBrowser}var _stream_readable,hasRequired_stream_readable;function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1,_stream_readable=Q;var t;Q.ReadableState=Z,eventsExports.EventEmitter;var e=function(re,me){return re.listeners(me).length},n=streamBrowser,a=buffer$3.Buffer,o=commonjsGlobal.Uint8Array||function(){};function l(de){return a.from(de)}function u(de){return a.isBuffer(de)||de instanceof o}var d=require$$0$2,m;d&&d.debuglog?m=d.debuglog("stream"):m=function(){};var y=requireBuffer_list(),b=destroy_1,_=state,w=_.getHighWaterMark,E=errorsBrowser.codes,A=E.ERR_INVALID_ARG_TYPE,C=E.ERR_STREAM_PUSH_AFTER_EOF,k=E.ERR_METHOD_NOT_IMPLEMENTED,B=E.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,D,q,j;inherits_browserExports(Q,n);var J=b.errorOrDestroy,Y=["error","close","destroy","pause","resume"];function L(de,re,me){if(typeof de.prependListener=="function")return de.prependListener(re,me);!de._events||!de._events[re]?de.on(re,me):Array.isArray(de._events[re])?de._events[re].unshift(me):de._events[re]=[me,de._events[re]]}function Z(de,re,me){t=t||require_stream_duplex(),de=de||{},typeof me!="boolean"&&(me=re instanceof t),this.objectMode=!!de.objectMode,me&&(this.objectMode=this.objectMode||!!de.readableObjectMode),this.highWaterMark=w(this,de,"readableHighWaterMark",me),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=de.emitClose!==!1,this.autoDestroy=!!de.autoDestroy,this.destroyed=!1,this.defaultEncoding=de.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,de.encoding&&(D||(D=requireString_decoder().StringDecoder),this.decoder=new D(de.encoding),this.encoding=de.encoding)}function Q(de){if(t=t||require_stream_duplex(),!(this instanceof Q))return new Q(de);var re=this instanceof t;this._readableState=new Z(de,this,re),this.readable=!0,de&&(typeof de.read=="function"&&(this._read=de.read),typeof de.destroy=="function"&&(this._destroy=de.destroy)),n.call(this)}Object.defineProperty(Q.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(re){this._readableState&&(this._readableState.destroyed=re)}}),Q.prototype.destroy=b.destroy,Q.prototype._undestroy=b.undestroy,Q.prototype._destroy=function(de,re){re(de)},Q.prototype.push=function(de,re){var me=this._readableState,te;return me.objectMode?te=!0:typeof de=="string"&&(re=re||me.defaultEncoding,re!==me.encoding&&(de=a.from(de,re),re=""),te=!0),oe(this,de,re,!1,te)},Q.prototype.unshift=function(de){return oe(this,de,null,!0,!1)};function oe(de,re,me,te,ve){m("readableAddChunk",re);var Se=de._readableState;if(re===null)Se.reading=!1,M(de,Se);else{var be;if(ve||(be=U(Se,re)),be)J(de,be);else if(Se.objectMode||re&&re.length>0)if(typeof re!="string"&&!Se.objectMode&&Object.getPrototypeOf(re)!==a.prototype&&(re=l(re)),te)Se.endEmitted?J(de,new B):ae(de,Se,re,!0);else if(Se.ended)J(de,new C);else{if(Se.destroyed)return!1;Se.reading=!1,Se.decoder&&!me?(re=Se.decoder.write(re),Se.objectMode||re.length!==0?ae(de,Se,re,!1):X(de,Se)):ae(de,Se,re,!1)}else te||(Se.reading=!1,X(de,Se))}return!Se.ended&&(Se.length<Se.highWaterMark||Se.length===0)}function ae(de,re,me,te){re.flowing&&re.length===0&&!re.sync?(re.awaitDrain=0,de.emit("data",me)):(re.length+=re.objectMode?1:me.length,te?re.buffer.unshift(me):re.buffer.push(me),re.needReadable&&O(de)),X(de,re)}function U(de,re){var me;return!u(re)&&typeof re!="string"&&re!==void 0&&!de.objectMode&&(me=new A("chunk",["string","Buffer","Uint8Array"],re)),me}Q.prototype.isPaused=function(){return this._readableState.flowing===!1},Q.prototype.setEncoding=function(de){D||(D=requireString_decoder().StringDecoder);var re=new D(de);this._readableState.decoder=re,this._readableState.encoding=this._readableState.decoder.encoding;for(var me=this._readableState.buffer.head,te="";me!==null;)te+=re.write(me.data),me=me.next;return this._readableState.buffer.clear(),te!==""&&this._readableState.buffer.push(te),this._readableState.length=te.length,this};var I=1073741824;function x(de){return de>=I?de=I:(de--,de|=de>>>1,de|=de>>>2,de|=de>>>4,de|=de>>>8,de|=de>>>16,de++),de}function T(de,re){return de<=0||re.length===0&&re.ended?0:re.objectMode?1:de!==de?re.flowing&&re.length?re.buffer.head.data.length:re.length:(de>re.highWaterMark&&(re.highWaterMark=x(de)),de<=re.length?de:re.ended?re.length:(re.needReadable=!0,0))}Q.prototype.read=function(de){m("read",de),de=parseInt(de,10);var re=this._readableState,me=de;if(de!==0&&(re.emittedReadable=!1),de===0&&re.needReadable&&((re.highWaterMark!==0?re.length>=re.highWaterMark:re.length>0)||re.ended))return m("read: emitReadable",re.length,re.ended),re.length===0&&re.ended?ce(this):O(this),null;if(de=T(de,re),de===0&&re.ended)return re.length===0&&ce(this),null;var te=re.needReadable;m("need readable",te),(re.length===0||re.length-de<re.highWaterMark)&&(te=!0,m("length less than watermark",te)),re.ended||re.reading?(te=!1,m("reading or ended",te)):te&&(m("do read"),re.reading=!0,re.sync=!0,re.length===0&&(re.needReadable=!0),this._read(re.highWaterMark),re.sync=!1,re.reading||(de=T(me,re)));var ve;return de>0?ve=le(de,re):ve=null,ve===null?(re.needReadable=re.length<=re.highWaterMark,de=0):(re.length-=de,re.awaitDrain=0),re.length===0&&(re.ended||(re.needReadable=!0),me!==de&&re.ended&&ce(this)),ve!==null&&this.emit("data",ve),ve};function M(de,re){if(m("onEofChunk"),!re.ended){if(re.decoder){var me=re.decoder.end();me&&me.length&&(re.buffer.push(me),re.length+=re.objectMode?1:me.length)}re.ended=!0,re.sync?O(de):(re.needReadable=!1,re.emittedReadable||(re.emittedReadable=!0,z(de)))}}function O(de){var re=de._readableState;m("emitReadable",re.needReadable,re.emittedReadable),re.needReadable=!1,re.emittedReadable||(m("emitReadable",re.flowing),re.emittedReadable=!0,browser$1$1.nextTick(z,de))}function z(de){var re=de._readableState;m("emitReadable_",re.destroyed,re.length,re.ended),!re.destroyed&&(re.length||re.ended)&&(de.emit("readable"),re.emittedReadable=!1),re.needReadable=!re.flowing&&!re.ended&&re.length<=re.highWaterMark,fe(de)}function X(de,re){re.readingMore||(re.readingMore=!0,browser$1$1.nextTick(H,de,re))}function H(de,re){for(;!re.reading&&!re.ended&&(re.length<re.highWaterMark||re.flowing&&re.length===0);){var me=re.length;if(m("maybeReadMore read 0"),de.read(0),me===re.length)break}re.readingMore=!1}Q.prototype._read=function(de){J(this,new k("_read()"))},Q.prototype.pipe=function(de,re){var me=this,te=this._readableState;switch(te.pipesCount){case 0:te.pipes=de;break;case 1:te.pipes=[te.pipes,de];break;default:te.pipes.push(de);break}te.pipesCount+=1,m("pipe count=%d opts=%j",te.pipesCount,re);var ve=(!re||re.end!==!1)&&de!==browser$1$1.stdout&&de!==browser$1$1.stderr,Se=ve?_e:Oe;te.endEmitted?browser$1$1.nextTick(Se):me.once("end",Se),de.on("unpipe",be);function be(ge,ie){m("onunpipe"),ge===me&&ie&&ie.hasUnpiped===!1&&(ie.hasUnpiped=!0,Ie())}function _e(){m("onend"),de.end()}var ye=P(me);de.on("drain",ye);var $e=!1;function Ie(){m("cleanup"),de.removeListener("close",Fe),de.removeListener("finish",Ve),de.removeListener("drain",ye),de.removeListener("error",Me),de.removeListener("unpipe",be),me.removeListener("end",_e),me.removeListener("end",Oe),me.removeListener("data",Be),$e=!0,te.awaitDrain&&(!de._writableState||de._writableState.needDrain)&&ye()}me.on("data",Be);function Be(ge){m("ondata");var ie=de.write(ge);m("dest.write",ie),ie===!1&&((te.pipesCount===1&&te.pipes===de||te.pipesCount>1&&se(te.pipes,de)!==-1)&&!$e&&(m("false write response, pause",te.awaitDrain),te.awaitDrain++),me.pause())}function Me(ge){m("onerror",ge),Oe(),de.removeListener("error",Me),e(de,"error")===0&&J(de,ge)}L(de,"error",Me);function Fe(){de.removeListener("finish",Ve),Oe()}de.once("close",Fe);function Ve(){m("onfinish"),de.removeListener("close",Fe),Oe()}de.once("finish",Ve);function Oe(){m("unpipe"),me.unpipe(de)}return de.emit("pipe",me),te.flowing||(m("pipe resume"),me.resume()),de};function P(de){return function(){var me=de._readableState;m("pipeOnDrain",me.awaitDrain),me.awaitDrain&&me.awaitDrain--,me.awaitDrain===0&&e(de,"data")&&(me.flowing=!0,fe(de))}}Q.prototype.unpipe=function(de){var re=this._readableState,me={hasUnpiped:!1};if(re.pipesCount===0)return this;if(re.pipesCount===1)return de&&de!==re.pipes?this:(de||(de=re.pipes),re.pipes=null,re.pipesCount=0,re.flowing=!1,de&&de.emit("unpipe",this,me),this);if(!de){var te=re.pipes,ve=re.pipesCount;re.pipes=null,re.pipesCount=0,re.flowing=!1;for(var Se=0;Se<ve;Se++)te[Se].emit("unpipe",this,{hasUnpiped:!1});return this}var be=se(re.pipes,de);return be===-1?this:(re.pipes.splice(be,1),re.pipesCount-=1,re.pipesCount===1&&(re.pipes=re.pipes[0]),de.emit("unpipe",this,me),this)},Q.prototype.on=function(de,re){var me=n.prototype.on.call(this,de,re),te=this._readableState;return de==="data"?(te.readableListening=this.listenerCount("readable")>0,te.flowing!==!1&&this.resume()):de==="readable"&&!te.endEmitted&&!te.readableListening&&(te.readableListening=te.needReadable=!0,te.flowing=!1,te.emittedReadable=!1,m("on readable",te.length,te.reading),te.length?O(this):te.reading||browser$1$1.nextTick(F,this)),me},Q.prototype.addListener=Q.prototype.on,Q.prototype.removeListener=function(de,re){var me=n.prototype.removeListener.call(this,de,re);return de==="readable"&&browser$1$1.nextTick(S,this),me},Q.prototype.removeAllListeners=function(de){var re=n.prototype.removeAllListeners.apply(this,arguments);return(de==="readable"||de===void 0)&&browser$1$1.nextTick(S,this),re};function S(de){var re=de._readableState;re.readableListening=de.listenerCount("readable")>0,re.resumeScheduled&&!re.paused?re.flowing=!0:de.listenerCount("data")>0&&de.resume()}function F(de){m("readable nexttick read 0"),de.read(0)}Q.prototype.resume=function(){var de=this._readableState;return de.flowing||(m("resume"),de.flowing=!de.readableListening,ue(this,de)),de.paused=!1,this};function ue(de,re){re.resumeScheduled||(re.resumeScheduled=!0,browser$1$1.nextTick(ee,de,re))}function ee(de,re){m("resume",re.reading),re.reading||de.read(0),re.resumeScheduled=!1,de.emit("resume"),fe(de),re.flowing&&!re.reading&&de.read(0)}Q.prototype.pause=function(){return m("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(m("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function fe(de){var re=de._readableState;for(m("flow",re.flowing);re.flowing&&de.read()!==null;);}Q.prototype.wrap=function(de){var re=this,me=this._readableState,te=!1;de.on("end",function(){if(m("wrapped end"),me.decoder&&!me.ended){var be=me.decoder.end();be&&be.length&&re.push(be)}re.push(null)}),de.on("data",function(be){if(m("wrapped data"),me.decoder&&(be=me.decoder.write(be)),!(me.objectMode&&be==null)&&!(!me.objectMode&&(!be||!be.length))){var _e=re.push(be);_e||(te=!0,de.pause())}});for(var ve in de)this[ve]===void 0&&typeof de[ve]=="function"&&(this[ve]=function(_e){return function(){return de[_e].apply(de,arguments)}}(ve));for(var Se=0;Se<Y.length;Se++)de.on(Y[Se],this.emit.bind(this,Y[Se]));return this._read=function(be){m("wrapped _read",be),te&&(te=!1,de.resume())},this},typeof Symbol=="function"&&(Q.prototype[Symbol.asyncIterator]=function(){return q===void 0&&(q=requireAsync_iterator()),q(this)}),Object.defineProperty(Q.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(Q.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(Q.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(re){this._readableState&&(this._readableState.flowing=re)}}),Q._fromList=le,Object.defineProperty(Q.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function le(de,re){if(re.length===0)return null;var me;return re.objectMode?me=re.buffer.shift():!de||de>=re.length?(re.decoder?me=re.buffer.join(""):re.buffer.length===1?me=re.buffer.first():me=re.buffer.concat(re.length),re.buffer.clear()):me=re.buffer.consume(de,re.decoder),me}function ce(de){var re=de._readableState;m("endReadable",re.endEmitted),re.endEmitted||(re.ended=!0,browser$1$1.nextTick(pe,re,de))}function pe(de,re){if(m("endReadableNT",de.endEmitted,de.length),!de.endEmitted&&de.length===0&&(de.endEmitted=!0,re.readable=!1,re.emit("end"),de.autoDestroy)){var me=re._writableState;(!me||me.autoDestroy&&me.finished)&&re.destroy()}}typeof Symbol=="function"&&(Q.from=function(de,re){return j===void 0&&(j=requireFromBrowser()),j(Q,de,re)});function se(de,re){for(var me=0,te=de.length;me<te;me++)if(de[me]===re)return me;return-1}return _stream_readable}var _stream_transform=Transform$8,_require$codes$1=errorsBrowser.codes,ERR_METHOD_NOT_IMPLEMENTED=_require$codes$1.ERR_METHOD_NOT_IMPLEMENTED,ERR_MULTIPLE_CALLBACK=_require$codes$1.ERR_MULTIPLE_CALLBACK,ERR_TRANSFORM_ALREADY_TRANSFORMING=_require$codes$1.ERR_TRANSFORM_ALREADY_TRANSFORMING,ERR_TRANSFORM_WITH_LENGTH_0=_require$codes$1.ERR_TRANSFORM_WITH_LENGTH_0,Duplex$1=require_stream_duplex();inherits_browserExports(Transform$8,Duplex$1);function afterTransform$1(t,e){var n=this._transformState;n.transforming=!1;var a=n.writecb;if(a===null)return this.emit("error",new ERR_MULTIPLE_CALLBACK);n.writechunk=null,n.writecb=null,e!=null&&this.push(e),a(t);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function Transform$8(t){if(!(this instanceof Transform$8))return new Transform$8(t);Duplex$1.call(this,t),this._transformState={afterTransform:afterTransform$1.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",prefinish$1)}function prefinish$1(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,n){done$1(t,e,n)}):done$1(this,null,null)}Transform$8.prototype.push=function(t,e){return this._transformState.needTransform=!1,Duplex$1.prototype.push.call(this,t,e)};Transform$8.prototype._transform=function(t,e,n){n(new ERR_METHOD_NOT_IMPLEMENTED("_transform()"))};Transform$8.prototype._write=function(t,e,n){var a=this._transformState;if(a.writecb=n,a.writechunk=t,a.writeencoding=e,!a.transforming){var o=this._readableState;(a.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Transform$8.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Transform$8.prototype._destroy=function(t,e){Duplex$1.prototype._destroy.call(this,t,function(n){e(n)})};function done$1(t,e,n){if(e)return t.emit("error",e);if(n!=null&&t.push(n),t._writableState.length)throw new ERR_TRANSFORM_WITH_LENGTH_0;if(t._transformState.transforming)throw new ERR_TRANSFORM_ALREADY_TRANSFORMING;return t.push(null)}var _stream_passthrough=PassThrough$1,Transform$7=_stream_transform;inherits_browserExports(PassThrough$1,Transform$7);function PassThrough$1(t){if(!(this instanceof PassThrough$1))return new PassThrough$1(t);Transform$7.call(this,t)}PassThrough$1.prototype._transform=function(t,e,n){n(null,t)};var eos;function once$1(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var _require$codes=errorsBrowser.codes,ERR_MISSING_ARGS=_require$codes.ERR_MISSING_ARGS,ERR_STREAM_DESTROYED=_require$codes.ERR_STREAM_DESTROYED;function noop$5(t){if(t)throw t}function isRequest(t){return t.setHeader&&typeof t.abort=="function"}function destroyer(t,e,n,a){a=once$1(a);var o=!1;t.on("close",function(){o=!0}),eos===void 0&&(eos=endOfStream),eos(t,{readable:e,writable:n},function(u){if(u)return a(u);o=!0,a()});var l=!1;return function(u){if(!o&&!l){if(l=!0,isRequest(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();a(u||new ERR_STREAM_DESTROYED("pipe"))}}}function call(t){t()}function pipe(t,e){return t.pipe(e)}function popCallback(t){return!t.length||typeof t[t.length-1]!="function"?noop$5:t.pop()}function pipeline(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var a=popCallback(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ERR_MISSING_ARGS("streams");var o,l=e.map(function(u,d){var m=d<e.length-1,y=d>0;return destroyer(u,m,y,function(b){o||(o=b),b&&l.forEach(call),!m&&(l.forEach(call),a(o))})});return e.reduce(pipe)}var pipeline_1=pipeline;(function(t,e){e=t.exports=require_stream_readable(),e.Stream=e,e.Readable=e,e.Writable=require_stream_writable(),e.Duplex=require_stream_duplex(),e.Transform=_stream_transform,e.PassThrough=_stream_passthrough,e.finished=endOfStream,e.pipeline=pipeline_1})(readableBrowser,readableBrowserExports);var Buffer$I=safeBufferExports.Buffer,Transform$6=readableBrowserExports.Transform,inherits$w=inherits_browserExports;function throwIfNotStringOrBuffer(t,e){if(!Buffer$I.isBuffer(t)&&typeof t!="string")throw new TypeError(e+" must be a string or a buffer")}function HashBase$2(t){Transform$6.call(this),this._block=Buffer$I.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}inherits$w(HashBase$2,Transform$6);HashBase$2.prototype._transform=function(t,e,n){var a=null;try{this.update(t,e)}catch(o){a=o}n(a)};HashBase$2.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(n){e=n}t(e)};HashBase$2.prototype.update=function(t,e){if(throwIfNotStringOrBuffer(t,"Data"),this._finalized)throw new Error("Digest already called");Buffer$I.isBuffer(t)||(t=Buffer$I.from(t,e));for(var n=this._block,a=0;this._blockOffset+t.length-a>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)n[o++]=t[a++];this._update(),this._blockOffset=0}for(;a<t.length;)n[this._blockOffset++]=t[a++];for(var l=0,u=t.length*8;u>0;++l)this._length[l]+=u,u=this._length[l]/4294967296|0,u>0&&(this._length[l]-=4294967296*u);return this};HashBase$2.prototype._update=function(){throw new Error("_update is not implemented")};HashBase$2.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();t!==void 0&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var n=0;n<4;++n)this._length[n]=0;return e};HashBase$2.prototype._digest=function(){throw new Error("_digest is not implemented")};var hashBase=HashBase$2,inherits$v=inherits_browserExports,HashBase$1=hashBase,Buffer$H=safeBufferExports.Buffer,ARRAY16$1=new Array(16);function MD5$3(){HashBase$1.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}inherits$v(MD5$3,HashBase$1);MD5$3.prototype._update=function(){for(var t=ARRAY16$1,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);var n=this._a,a=this._b,o=this._c,l=this._d;n=fnF(n,a,o,l,t[0],3614090360,7),l=fnF(l,n,a,o,t[1],3905402710,12),o=fnF(o,l,n,a,t[2],606105819,17),a=fnF(a,o,l,n,t[3],3250441966,22),n=fnF(n,a,o,l,t[4],4118548399,7),l=fnF(l,n,a,o,t[5],1200080426,12),o=fnF(o,l,n,a,t[6],2821735955,17),a=fnF(a,o,l,n,t[7],4249261313,22),n=fnF(n,a,o,l,t[8],1770035416,7),l=fnF(l,n,a,o,t[9],2336552879,12),o=fnF(o,l,n,a,t[10],4294925233,17),a=fnF(a,o,l,n,t[11],2304563134,22),n=fnF(n,a,o,l,t[12],1804603682,7),l=fnF(l,n,a,o,t[13],4254626195,12),o=fnF(o,l,n,a,t[14],2792965006,17),a=fnF(a,o,l,n,t[15],1236535329,22),n=fnG(n,a,o,l,t[1],4129170786,5),l=fnG(l,n,a,o,t[6],3225465664,9),o=fnG(o,l,n,a,t[11],643717713,14),a=fnG(a,o,l,n,t[0],3921069994,20),n=fnG(n,a,o,l,t[5],3593408605,5),l=fnG(l,n,a,o,t[10],38016083,9),o=fnG(o,l,n,a,t[15],3634488961,14),a=fnG(a,o,l,n,t[4],3889429448,20),n=fnG(n,a,o,l,t[9],568446438,5),l=fnG(l,n,a,o,t[14],3275163606,9),o=fnG(o,l,n,a,t[3],4107603335,14),a=fnG(a,o,l,n,t[8],1163531501,20),n=fnG(n,a,o,l,t[13],2850285829,5),l=fnG(l,n,a,o,t[2],4243563512,9),o=fnG(o,l,n,a,t[7],1735328473,14),a=fnG(a,o,l,n,t[12],2368359562,20),n=fnH(n,a,o,l,t[5],4294588738,4),l=fnH(l,n,a,o,t[8],2272392833,11),o=fnH(o,l,n,a,t[11],1839030562,16),a=fnH(a,o,l,n,t[14],4259657740,23),n=fnH(n,a,o,l,t[1],2763975236,4),l=fnH(l,n,a,o,t[4],1272893353,11),o=fnH(o,l,n,a,t[7],4139469664,16),a=fnH(a,o,l,n,t[10],3200236656,23),n=fnH(n,a,o,l,t[13],681279174,4),l=fnH(l,n,a,o,t[0],3936430074,11),o=fnH(o,l,n,a,t[3],3572445317,16),a=fnH(a,o,l,n,t[6],76029189,23),n=fnH(n,a,o,l,t[9],3654602809,4),l=fnH(l,n,a,o,t[12],3873151461,11),o=fnH(o,l,n,a,t[15],530742520,16),a=fnH(a,o,l,n,t[2],3299628645,23),n=fnI(n,a,o,l,t[0],4096336452,6),l=fnI(l,n,a,o,t[7],1126891415,10),o=fnI(o,l,n,a,t[14],2878612391,15),a=fnI(a,o,l,n,t[5],4237533241,21),n=fnI(n,a,o,l,t[12],1700485571,6),l=fnI(l,n,a,o,t[3],2399980690,10),o=fnI(o,l,n,a,t[10],4293915773,15),a=fnI(a,o,l,n,t[1],2240044497,21),n=fnI(n,a,o,l,t[8],1873313359,6),l=fnI(l,n,a,o,t[15],4264355552,10),o=fnI(o,l,n,a,t[6],2734768916,15),a=fnI(a,o,l,n,t[13],1309151649,21),n=fnI(n,a,o,l,t[4],4149444226,6),l=fnI(l,n,a,o,t[11],3174756917,10),o=fnI(o,l,n,a,t[2],718787259,15),a=fnI(a,o,l,n,t[9],3951481745,21),this._a=this._a+n|0,this._b=this._b+a|0,this._c=this._c+o|0,this._d=this._d+l|0};MD5$3.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Buffer$H.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t};function rotl$2(t,e){return t<<e|t>>>32-e}function fnF(t,e,n,a,o,l,u){return rotl$2(t+(e&n|~e&a)+o+l|0,u)+e|0}function fnG(t,e,n,a,o,l,u){return rotl$2(t+(e&a|n&~a)+o+l|0,u)+e|0}function fnH(t,e,n,a,o,l,u){return rotl$2(t+(e^n^a)+o+l|0,u)+e|0}function fnI(t,e,n,a,o,l,u){return rotl$2(t+(n^(e|~a))+o+l|0,u)+e|0}var md5_js=MD5$3,Buffer$G=buffer$3.Buffer,inherits$u=inherits_browserExports,HashBase=hashBase,ARRAY16=new Array(16),zl$1=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr$1=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr$1=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl$1=[0,1518500249,1859775393,2400959708,2840853838],hr$1=[1352829926,1548603684,1836072691,2053994217,0];function RIPEMD160$4(){HashBase.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}inherits$u(RIPEMD160$4,HashBase);RIPEMD160$4.prototype._update=function(){for(var t=ARRAY16,e=0;e<16;++e)t[e]=this._block.readInt32LE(e*4);for(var n=this._a|0,a=this._b|0,o=this._c|0,l=this._d|0,u=this._e|0,d=this._a|0,m=this._b|0,y=this._c|0,b=this._d|0,_=this._e|0,w=0;w<80;w+=1){var E,A;w<16?(E=fn1$1(n,a,o,l,u,t[zl$1[w]],hl$1[0],sl$1[w]),A=fn5$1(d,m,y,b,_,t[zr$1[w]],hr$1[0],sr$1[w])):w<32?(E=fn2$1(n,a,o,l,u,t[zl$1[w]],hl$1[1],sl$1[w]),A=fn4$1(d,m,y,b,_,t[zr$1[w]],hr$1[1],sr$1[w])):w<48?(E=fn3$1(n,a,o,l,u,t[zl$1[w]],hl$1[2],sl$1[w]),A=fn3$1(d,m,y,b,_,t[zr$1[w]],hr$1[2],sr$1[w])):w<64?(E=fn4$1(n,a,o,l,u,t[zl$1[w]],hl$1[3],sl$1[w]),A=fn2$1(d,m,y,b,_,t[zr$1[w]],hr$1[3],sr$1[w])):(E=fn5$1(n,a,o,l,u,t[zl$1[w]],hl$1[4],sl$1[w]),A=fn1$1(d,m,y,b,_,t[zr$1[w]],hr$1[4],sr$1[w])),n=u,u=l,l=rotl$1(o,10),o=a,a=E,d=_,_=b,b=rotl$1(y,10),y=m,m=A}var C=this._b+o+b|0;this._b=this._c+l+_|0,this._c=this._d+u+d|0,this._d=this._e+n+m|0,this._e=this._a+a+y|0,this._a=C};RIPEMD160$4.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=Buffer$G.alloc?Buffer$G.alloc(20):new Buffer$G(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t};function rotl$1(t,e){return t<<e|t>>>32-e}function fn1$1(t,e,n,a,o,l,u,d){return rotl$1(t+(e^n^a)+l+u|0,d)+o|0}function fn2$1(t,e,n,a,o,l,u,d){return rotl$1(t+(e&n|~e&a)+l+u|0,d)+o|0}function fn3$1(t,e,n,a,o,l,u,d){return rotl$1(t+((e|~n)^a)+l+u|0,d)+o|0}function fn4$1(t,e,n,a,o,l,u,d){return rotl$1(t+(e&a|n&~a)+l+u|0,d)+o|0}function fn5$1(t,e,n,a,o,l,u,d){return rotl$1(t+(e^(n|~a))+l+u|0,d)+o|0}var ripemd160$1=RIPEMD160$4,sha_jsExports={},sha_js={get exports(){return sha_jsExports},set exports(t){sha_jsExports=t}},Buffer$F=safeBufferExports.Buffer;function Hash$7(t,e){this._block=Buffer$F.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}Hash$7.prototype.update=function(t,e){typeof t=="string"&&(e=e||"utf8",t=Buffer$F.from(t,e));for(var n=this._block,a=this._blockSize,o=t.length,l=this._len,u=0;u<o;){for(var d=l%a,m=Math.min(o-u,a-d),y=0;y<m;y++)n[d+y]=t[u+y];l+=m,u+=m,l%a===0&&this._update(n)}return this._len+=o,this};Hash$7.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var n=this._len*8;if(n<=4294967295)this._block.writeUInt32BE(n,this._blockSize-4);else{var a=(n&4294967295)>>>0,o=(n-a)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(a,this._blockSize-4)}this._update(this._block);var l=this._hash();return t?l.toString(t):l};Hash$7.prototype._update=function(){throw new Error("_update must be implemented by subclass")};var hash$4=Hash$7,inherits$t=inherits_browserExports,Hash$6=hash$4,Buffer$E=safeBufferExports.Buffer,K$4=[1518500249,1859775393,-1894007588,-899497514],W$5=new Array(80);function Sha(){this.init(),this._w=W$5,Hash$6.call(this,64,56)}inherits$t(Sha,Hash$6);Sha.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl5$1(t){return t<<5|t>>>27}function rotl30$1(t){return t<<30|t>>>2}function ft$1(t,e,n,a){return t===0?e&n|~e&a:t===2?e&n|e&a|n&a:e^n^a}Sha.prototype._update=function(t){for(var e=this._w,n=this._a|0,a=this._b|0,o=this._c|0,l=this._d|0,u=this._e|0,d=0;d<16;++d)e[d]=t.readInt32BE(d*4);for(;d<80;++d)e[d]=e[d-3]^e[d-8]^e[d-14]^e[d-16];for(var m=0;m<80;++m){var y=~~(m/20),b=rotl5$1(n)+ft$1(y,a,o,l)+u+e[m]+K$4[y]|0;u=l,l=o,o=rotl30$1(a),a=n,n=b}this._a=n+this._a|0,this._b=a+this._b|0,this._c=o+this._c|0,this._d=l+this._d|0,this._e=u+this._e|0};Sha.prototype._hash=function(){var t=Buffer$E.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var sha$7=Sha,inherits$s=inherits_browserExports,Hash$5=hash$4,Buffer$D=safeBufferExports.Buffer,K$3=[1518500249,1859775393,-1894007588,-899497514],W$4=new Array(80);function Sha1(){this.init(),this._w=W$4,Hash$5.call(this,64,56)}inherits$s(Sha1,Hash$5);Sha1.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this};function rotl1(t){return t<<1|t>>>31}function rotl5(t){return t<<5|t>>>27}function rotl30(t){return t<<30|t>>>2}function ft(t,e,n,a){return t===0?e&n|~e&a:t===2?e&n|e&a|n&a:e^n^a}Sha1.prototype._update=function(t){for(var e=this._w,n=this._a|0,a=this._b|0,o=this._c|0,l=this._d|0,u=this._e|0,d=0;d<16;++d)e[d]=t.readInt32BE(d*4);for(;d<80;++d)e[d]=rotl1(e[d-3]^e[d-8]^e[d-14]^e[d-16]);for(var m=0;m<80;++m){var y=~~(m/20),b=rotl5(n)+ft(y,a,o,l)+u+e[m]+K$3[y]|0;u=l,l=o,o=rotl30(a),a=n,n=b}this._a=n+this._a|0,this._b=a+this._b|0,this._c=o+this._c|0,this._d=l+this._d|0,this._e=u+this._e|0};Sha1.prototype._hash=function(){var t=Buffer$D.allocUnsafe(20);return t.writeInt32BE(this._a|0,0),t.writeInt32BE(this._b|0,4),t.writeInt32BE(this._c|0,8),t.writeInt32BE(this._d|0,12),t.writeInt32BE(this._e|0,16),t};var sha1$1=Sha1,inherits$r=inherits_browserExports,Hash$4=hash$4,Buffer$C=safeBufferExports.Buffer,K$2=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],W$3=new Array(64);function Sha256$1(){this.init(),this._w=W$3,Hash$4.call(this,64,56)}inherits$r(Sha256$1,Hash$4);Sha256$1.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this};function ch(t,e,n){return n^t&(e^n)}function maj$1(t,e,n){return t&e|n&(t|e)}function sigma0$1(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function sigma1$1(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function gamma0(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function gamma1(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}Sha256$1.prototype._update=function(t){for(var e=this._w,n=this._a|0,a=this._b|0,o=this._c|0,l=this._d|0,u=this._e|0,d=this._f|0,m=this._g|0,y=this._h|0,b=0;b<16;++b)e[b]=t.readInt32BE(b*4);for(;b<64;++b)e[b]=gamma1(e[b-2])+e[b-7]+gamma0(e[b-15])+e[b-16]|0;for(var _=0;_<64;++_){var w=y+sigma1$1(u)+ch(u,d,m)+K$2[_]+e[_]|0,E=sigma0$1(n)+maj$1(n,a,o)|0;y=m,m=d,d=u,u=l+w|0,l=o,o=a,a=n,n=w+E|0}this._a=n+this._a|0,this._b=a+this._b|0,this._c=o+this._c|0,this._d=l+this._d|0,this._e=u+this._e|0,this._f=d+this._f|0,this._g=m+this._g|0,this._h=y+this._h|0};Sha256$1.prototype._hash=function(){var t=Buffer$C.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t};var sha256$8=Sha256$1,inherits$q=inherits_browserExports,Sha256=sha256$8,Hash$3=hash$4,Buffer$B=safeBufferExports.Buffer,W$2=new Array(64);function Sha224(){this.init(),this._w=W$2,Hash$3.call(this,64,56)}inherits$q(Sha224,Sha256);Sha224.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this};Sha224.prototype._hash=function(){var t=Buffer$B.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t};var sha224$1=Sha224,inherits$p=inherits_browserExports,Hash$2=hash$4,Buffer$A=safeBufferExports.Buffer,K$1=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],W$1=new Array(160);function Sha512(){this.init(),this._w=W$1,Hash$2.call(this,128,112)}inherits$p(Sha512,Hash$2);Sha512.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this};function Ch(t,e,n){return n^t&(e^n)}function maj(t,e,n){return t&e|n&(t|e)}function sigma0(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function sigma1(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function Gamma0(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function Gamma0l(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function Gamma1(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function Gamma1l(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function getCarry(t,e){return t>>>0<e>>>0?1:0}Sha512.prototype._update=function(t){for(var e=this._w,n=this._ah|0,a=this._bh|0,o=this._ch|0,l=this._dh|0,u=this._eh|0,d=this._fh|0,m=this._gh|0,y=this._hh|0,b=this._al|0,_=this._bl|0,w=this._cl|0,E=this._dl|0,A=this._el|0,C=this._fl|0,k=this._gl|0,B=this._hl|0,D=0;D<32;D+=2)e[D]=t.readInt32BE(D*4),e[D+1]=t.readInt32BE(D*4+4);for(;D<160;D+=2){var q=e[D-30],j=e[D-15*2+1],J=Gamma0(q,j),Y=Gamma0l(j,q);q=e[D-2*2],j=e[D-2*2+1];var L=Gamma1(q,j),Z=Gamma1l(j,q),Q=e[D-7*2],oe=e[D-7*2+1],ae=e[D-16*2],U=e[D-16*2+1],I=Y+oe|0,x=J+Q+getCarry(I,Y)|0;I=I+Z|0,x=x+L+getCarry(I,Z)|0,I=I+U|0,x=x+ae+getCarry(I,U)|0,e[D]=x,e[D+1]=I}for(var T=0;T<160;T+=2){x=e[T],I=e[T+1];var M=maj(n,a,o),O=maj(b,_,w),z=sigma0(n,b),X=sigma0(b,n),H=sigma1(u,A),P=sigma1(A,u),S=K$1[T],F=K$1[T+1],ue=Ch(u,d,m),ee=Ch(A,C,k),fe=B+P|0,le=y+H+getCarry(fe,B)|0;fe=fe+ee|0,le=le+ue+getCarry(fe,ee)|0,fe=fe+F|0,le=le+S+getCarry(fe,F)|0,fe=fe+I|0,le=le+x+getCarry(fe,I)|0;var ce=X+O|0,pe=z+M+getCarry(ce,X)|0;y=m,B=k,m=d,k=C,d=u,C=A,A=E+fe|0,u=l+le+getCarry(A,E)|0,l=o,E=w,o=a,w=_,a=n,_=b,b=fe+ce|0,n=le+pe+getCarry(b,fe)|0}this._al=this._al+b|0,this._bl=this._bl+_|0,this._cl=this._cl+w|0,this._dl=this._dl+E|0,this._el=this._el+A|0,this._fl=this._fl+C|0,this._gl=this._gl+k|0,this._hl=this._hl+B|0,this._ah=this._ah+n+getCarry(this._al,b)|0,this._bh=this._bh+a+getCarry(this._bl,_)|0,this._ch=this._ch+o+getCarry(this._cl,w)|0,this._dh=this._dh+l+getCarry(this._dl,E)|0,this._eh=this._eh+u+getCarry(this._el,A)|0,this._fh=this._fh+d+getCarry(this._fl,C)|0,this._gh=this._gh+m+getCarry(this._gl,k)|0,this._hh=this._hh+y+getCarry(this._hl,B)|0};Sha512.prototype._hash=function(){var t=Buffer$A.allocUnsafe(64);function e(n,a,o){t.writeInt32BE(n,o),t.writeInt32BE(a,o+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t};var sha512$3=Sha512,inherits$o=inherits_browserExports,SHA512$2=sha512$3,Hash$1=hash$4,Buffer$z=safeBufferExports.Buffer,W=new Array(160);function Sha384(){this.init(),this._w=W,Hash$1.call(this,128,112)}inherits$o(Sha384,SHA512$2);Sha384.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this};Sha384.prototype._hash=function(){var t=Buffer$z.allocUnsafe(48);function e(n,a,o){t.writeInt32BE(n,o),t.writeInt32BE(a,o+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t};var sha384$2=Sha384,exports=sha_js.exports=function(e){e=e.toLowerCase();var n=exports[e];if(!n)throw new Error(e+" is not supported (we accept pull requests)");return new n};exports.sha=sha$7;exports.sha1=sha1$1;exports.sha224=sha224$1;exports.sha256=sha256$8;exports.sha384=sha384$2;exports.sha512=sha512$3;var util$9={},types={},toStr=Object.prototype.toString,fnToStr=Function.prototype.toString,isFnRegex=/^\s*(?:function)?\*/,hasToStringTag=shams(),getProto=Object.getPrototypeOf,getGeneratorFunc=function(){if(!hasToStringTag)return!1;try{return Function("return function*() {}")()}catch{}},GeneratorFunction,isGeneratorFunction=function(e){if(typeof e!="function")return!1;if(isFnRegex.test(fnToStr.call(e)))return!0;if(!hasToStringTag){var n=toStr.call(e);return n==="[object GeneratorFunction]"}if(!getProto)return!1;if(typeof GeneratorFunction>"u"){var a=getGeneratorFunc();GeneratorFunction=a?getProto(a):!1}return getProto(e)===GeneratorFunction};(function(t){var e=isArguments$3,n=isGeneratorFunction,a=whichTypedArray$1,o=isTypedArray$3;function l(ye){return ye.call.bind(ye)}var u=typeof BigInt<"u",d=typeof Symbol<"u",m=l(Object.prototype.toString),y=l(Number.prototype.valueOf),b=l(String.prototype.valueOf),_=l(Boolean.prototype.valueOf);if(u)var w=l(BigInt.prototype.valueOf);if(d)var E=l(Symbol.prototype.valueOf);function A(ye,$e){if(typeof ye!="object")return!1;try{return $e(ye),!0}catch{return!1}}t.isArgumentsObject=e,t.isGeneratorFunction=n,t.isTypedArray=o;function C(ye){return typeof Promise<"u"&&ye instanceof Promise||ye!==null&&typeof ye=="object"&&typeof ye.then=="function"&&typeof ye.catch=="function"}t.isPromise=C;function k(ye){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(ye):o(ye)||F(ye)}t.isArrayBufferView=k;function B(ye){return a(ye)==="Uint8Array"}t.isUint8Array=B;function D(ye){return a(ye)==="Uint8ClampedArray"}t.isUint8ClampedArray=D;function q(ye){return a(ye)==="Uint16Array"}t.isUint16Array=q;function j(ye){return a(ye)==="Uint32Array"}t.isUint32Array=j;function J(ye){return a(ye)==="Int8Array"}t.isInt8Array=J;function Y(ye){return a(ye)==="Int16Array"}t.isInt16Array=Y;function L(ye){return a(ye)==="Int32Array"}t.isInt32Array=L;function Z(ye){return a(ye)==="Float32Array"}t.isFloat32Array=Z;function Q(ye){return a(ye)==="Float64Array"}t.isFloat64Array=Q;function oe(ye){return a(ye)==="BigInt64Array"}t.isBigInt64Array=oe;function ae(ye){return a(ye)==="BigUint64Array"}t.isBigUint64Array=ae;function U(ye){return m(ye)==="[object Map]"}U.working=typeof Map<"u"&&U(new Map);function I(ye){return typeof Map>"u"?!1:U.working?U(ye):ye instanceof Map}t.isMap=I;function x(ye){return m(ye)==="[object Set]"}x.working=typeof Set<"u"&&x(new Set);function T(ye){return typeof Set>"u"?!1:x.working?x(ye):ye instanceof Set}t.isSet=T;function M(ye){return m(ye)==="[object WeakMap]"}M.working=typeof WeakMap<"u"&&M(new WeakMap);function O(ye){return typeof WeakMap>"u"?!1:M.working?M(ye):ye instanceof WeakMap}t.isWeakMap=O;function z(ye){return m(ye)==="[object WeakSet]"}z.working=typeof WeakSet<"u"&&z(new WeakSet);function X(ye){return z(ye)}t.isWeakSet=X;function H(ye){return m(ye)==="[object ArrayBuffer]"}H.working=typeof ArrayBuffer<"u"&&H(new ArrayBuffer);function P(ye){return typeof ArrayBuffer>"u"?!1:H.working?H(ye):ye instanceof ArrayBuffer}t.isArrayBuffer=P;function S(ye){return m(ye)==="[object DataView]"}S.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&S(new DataView(new ArrayBuffer(1),0,1));function F(ye){return typeof DataView>"u"?!1:S.working?S(ye):ye instanceof DataView}t.isDataView=F;var ue=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function ee(ye){return m(ye)==="[object SharedArrayBuffer]"}function fe(ye){return typeof ue>"u"?!1:(typeof ee.working>"u"&&(ee.working=ee(new ue)),ee.working?ee(ye):ye instanceof ue)}t.isSharedArrayBuffer=fe;function le(ye){return m(ye)==="[object AsyncFunction]"}t.isAsyncFunction=le;function ce(ye){return m(ye)==="[object Map Iterator]"}t.isMapIterator=ce;function pe(ye){return m(ye)==="[object Set Iterator]"}t.isSetIterator=pe;function se(ye){return m(ye)==="[object Generator]"}t.isGeneratorObject=se;function de(ye){return m(ye)==="[object WebAssembly.Module]"}t.isWebAssemblyCompiledModule=de;function re(ye){return A(ye,y)}t.isNumberObject=re;function me(ye){return A(ye,b)}t.isStringObject=me;function te(ye){return A(ye,_)}t.isBooleanObject=te;function ve(ye){return u&&A(ye,w)}t.isBigIntObject=ve;function Se(ye){return d&&A(ye,E)}t.isSymbolObject=Se;function be(ye){return re(ye)||me(ye)||te(ye)||ve(ye)||Se(ye)}t.isBoxedPrimitive=be;function _e(ye){return typeof Uint8Array<"u"&&(P(ye)||fe(ye))}t.isAnyArrayBuffer=_e,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(ye){Object.defineProperty(t,ye,{enumerable:!1,value:function(){throw new Error(ye+" is not supported in userland")}})})})(types);var isBufferBrowser=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"};(function(t){var e=Object.getOwnPropertyDescriptors||function(F){for(var ue=Object.keys(F),ee={},fe=0;fe<ue.length;fe++)ee[ue[fe]]=Object.getOwnPropertyDescriptor(F,ue[fe]);return ee},n=/%[sdj%]/g;t.format=function(S){if(!J(S)){for(var F=[],ue=0;ue<arguments.length;ue++)F.push(u(arguments[ue]));return F.join(" ")}for(var ue=1,ee=arguments,fe=ee.length,le=String(S).replace(n,function(pe){if(pe==="%%")return"%";if(ue>=fe)return pe;switch(pe){case"%s":return String(ee[ue++]);case"%d":return Number(ee[ue++]);case"%j":try{return JSON.stringify(ee[ue++])}catch{return"[Circular]"}default:return pe}}),ce=ee[ue];ue<fe;ce=ee[++ue])D(ce)||!Q(ce)?le+=" "+ce:le+=" "+u(ce);return le},t.deprecate=function(S,F){if(typeof browser$1$1<"u"&&browser$1$1.noDeprecation===!0)return S;if(typeof browser$1$1>"u")return function(){return t.deprecate(S,F).apply(this,arguments)};var ue=!1;function ee(){if(!ue){if(browser$1$1.throwDeprecation)throw new Error(F);browser$1$1.traceDeprecation?console.trace(F):console.error(F),ue=!0}return S.apply(this,arguments)}return ee};var a={},o=/^$/;if({}.NODE_DEBUG){var l={}.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+l+"$","i")}t.debuglog=function(S){if(S=S.toUpperCase(),!a[S])if(o.test(S)){var F=browser$1$1.pid;a[S]=function(){var ue=t.format.apply(t,arguments);console.error("%s %d: %s",S,F,ue)}}else a[S]=function(){};return a[S]};function u(S,F){var ue={seen:[],stylize:m};return arguments.length>=3&&(ue.depth=arguments[2]),arguments.length>=4&&(ue.colors=arguments[3]),B(F)?ue.showHidden=F:F&&t._extend(ue,F),L(ue.showHidden)&&(ue.showHidden=!1),L(ue.depth)&&(ue.depth=2),L(ue.colors)&&(ue.colors=!1),L(ue.customInspect)&&(ue.customInspect=!0),ue.colors&&(ue.stylize=d),b(ue,S,ue.depth)}t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function d(S,F){var ue=u.styles[F];return ue?"\x1B["+u.colors[ue][0]+"m"+S+"\x1B["+u.colors[ue][1]+"m":S}function m(S,F){return S}function y(S){var F={};return S.forEach(function(ue,ee){F[ue]=!0}),F}function b(S,F,ue){if(S.customInspect&&F&&U(F.inspect)&&F.inspect!==t.inspect&&!(F.constructor&&F.constructor.prototype===F)){var ee=F.inspect(ue,S);return J(ee)||(ee=b(S,ee,ue)),ee}var fe=_(S,F);if(fe)return fe;var le=Object.keys(F),ce=y(le);if(S.showHidden&&(le=Object.getOwnPropertyNames(F)),ae(F)&&(le.indexOf("message")>=0||le.indexOf("description")>=0))return w(F);if(le.length===0){if(U(F)){var pe=F.name?": "+F.name:"";return S.stylize("[Function"+pe+"]","special")}if(Z(F))return S.stylize(RegExp.prototype.toString.call(F),"regexp");if(oe(F))return S.stylize(Date.prototype.toString.call(F),"date");if(ae(F))return w(F)}var se="",de=!1,re=["{","}"];if(k(F)&&(de=!0,re=["[","]"]),U(F)){var me=F.name?": "+F.name:"";se=" [Function"+me+"]"}if(Z(F)&&(se=" "+RegExp.prototype.toString.call(F)),oe(F)&&(se=" "+Date.prototype.toUTCString.call(F)),ae(F)&&(se=" "+w(F)),le.length===0&&(!de||F.length==0))return re[0]+se+re[1];if(ue<0)return Z(F)?S.stylize(RegExp.prototype.toString.call(F),"regexp"):S.stylize("[Object]","special");S.seen.push(F);var te;return de?te=E(S,F,ue,ce,le):te=le.map(function(ve){return A(S,F,ue,ce,ve,de)}),S.seen.pop(),C(te,se,re)}function _(S,F){if(L(F))return S.stylize("undefined","undefined");if(J(F)){var ue="'"+JSON.stringify(F).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return S.stylize(ue,"string")}if(j(F))return S.stylize(""+F,"number");if(B(F))return S.stylize(""+F,"boolean");if(D(F))return S.stylize("null","null")}function w(S){return"["+Error.prototype.toString.call(S)+"]"}function E(S,F,ue,ee,fe){for(var le=[],ce=0,pe=F.length;ce<pe;++ce)z(F,String(ce))?le.push(A(S,F,ue,ee,String(ce),!0)):le.push("");return fe.forEach(function(se){se.match(/^\d+$/)||le.push(A(S,F,ue,ee,se,!0))}),le}function A(S,F,ue,ee,fe,le){var ce,pe,se;if(se=Object.getOwnPropertyDescriptor(F,fe)||{value:F[fe]},se.get?se.set?pe=S.stylize("[Getter/Setter]","special"):pe=S.stylize("[Getter]","special"):se.set&&(pe=S.stylize("[Setter]","special")),z(ee,fe)||(ce="["+fe+"]"),pe||(S.seen.indexOf(se.value)<0?(D(ue)?pe=b(S,se.value,null):pe=b(S,se.value,ue-1),pe.indexOf(`
`)>-1&&(le?pe=pe.split(`
`).map(function(de){return"  "+de}).join(`
`).slice(2):pe=`
`+pe.split(`
`).map(function(de){return"   "+de}).join(`
`))):pe=S.stylize("[Circular]","special")),L(ce)){if(le&&fe.match(/^\d+$/))return pe;ce=JSON.stringify(""+fe),ce.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(ce=ce.slice(1,-1),ce=S.stylize(ce,"name")):(ce=ce.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),ce=S.stylize(ce,"string"))}return ce+": "+pe}function C(S,F,ue){var ee=S.reduce(function(fe,le){return le.indexOf(`
`)>=0,fe+le.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ee>60?ue[0]+(F===""?"":F+`
 `)+" "+S.join(`,
  `)+" "+ue[1]:ue[0]+F+" "+S.join(", ")+" "+ue[1]}t.types=types;function k(S){return Array.isArray(S)}t.isArray=k;function B(S){return typeof S=="boolean"}t.isBoolean=B;function D(S){return S===null}t.isNull=D;function q(S){return S==null}t.isNullOrUndefined=q;function j(S){return typeof S=="number"}t.isNumber=j;function J(S){return typeof S=="string"}t.isString=J;function Y(S){return typeof S=="symbol"}t.isSymbol=Y;function L(S){return S===void 0}t.isUndefined=L;function Z(S){return Q(S)&&x(S)==="[object RegExp]"}t.isRegExp=Z,t.types.isRegExp=Z;function Q(S){return typeof S=="object"&&S!==null}t.isObject=Q;function oe(S){return Q(S)&&x(S)==="[object Date]"}t.isDate=oe,t.types.isDate=oe;function ae(S){return Q(S)&&(x(S)==="[object Error]"||S instanceof Error)}t.isError=ae,t.types.isNativeError=ae;function U(S){return typeof S=="function"}t.isFunction=U;function I(S){return S===null||typeof S=="boolean"||typeof S=="number"||typeof S=="string"||typeof S=="symbol"||typeof S>"u"}t.isPrimitive=I,t.isBuffer=isBufferBrowser;function x(S){return Object.prototype.toString.call(S)}function T(S){return S<10?"0"+S.toString(10):S.toString(10)}var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var S=new Date,F=[T(S.getHours()),T(S.getMinutes()),T(S.getSeconds())].join(":");return[S.getDate(),M[S.getMonth()],F].join(" ")}t.log=function(){console.log("%s - %s",O(),t.format.apply(t,arguments))},t.inherits=inherits_browserExports,t._extend=function(S,F){if(!F||!Q(F))return S;for(var ue=Object.keys(F),ee=ue.length;ee--;)S[ue[ee]]=F[ue[ee]];return S};function z(S,F){return Object.prototype.hasOwnProperty.call(S,F)}var X=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;t.promisify=function(F){if(typeof F!="function")throw new TypeError('The "original" argument must be of type Function');if(X&&F[X]){var ue=F[X];if(typeof ue!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(ue,X,{value:ue,enumerable:!1,writable:!1,configurable:!0}),ue}function ue(){for(var ee,fe,le=new Promise(function(se,de){ee=se,fe=de}),ce=[],pe=0;pe<arguments.length;pe++)ce.push(arguments[pe]);ce.push(function(se,de){se?fe(se):ee(de)});try{F.apply(this,ce)}catch(se){fe(se)}return le}return Object.setPrototypeOf(ue,Object.getPrototypeOf(F)),X&&Object.defineProperty(ue,X,{value:ue,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(ue,e(F))},t.promisify.custom=X;function H(S,F){if(!S){var ue=new Error("Promise was rejected with a falsy value");ue.reason=S,S=ue}return F(S)}function P(S){if(typeof S!="function")throw new TypeError('The "original" argument must be of type Function');function F(){for(var ue=[],ee=0;ee<arguments.length;ee++)ue.push(arguments[ee]);var fe=ue.pop();if(typeof fe!="function")throw new TypeError("The last argument must be of type Function");var le=this,ce=function(){return fe.apply(le,arguments)};S.apply(this,ue).then(function(pe){browser$1$1.nextTick(ce.bind(null,null,pe))},function(pe){browser$1$1.nextTick(H.bind(null,pe,ce))})}return Object.setPrototypeOf(F,Object.getPrototypeOf(S)),Object.defineProperties(F,e(S)),F}t.callbackify=P})(util$9);var lookup$1=[],revLookup=[],Arr=typeof Uint8Array<"u"?Uint8Array:Array,inited=!1;function init$1(){inited=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,n=t.length;e<n;++e)lookup$1[e]=t[e],revLookup[t.charCodeAt(e)]=e;revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63}function toByteArray(t){inited||init$1();var e,n,a,o,l,u,d=t.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");l=t[d-2]==="="?2:t[d-1]==="="?1:0,u=new Arr(d*3/4-l),a=l>0?d-4:d;var m=0;for(e=0,n=0;e<a;e+=4,n+=3)o=revLookup[t.charCodeAt(e)]<<18|revLookup[t.charCodeAt(e+1)]<<12|revLookup[t.charCodeAt(e+2)]<<6|revLookup[t.charCodeAt(e+3)],u[m++]=o>>16&255,u[m++]=o>>8&255,u[m++]=o&255;return l===2?(o=revLookup[t.charCodeAt(e)]<<2|revLookup[t.charCodeAt(e+1)]>>4,u[m++]=o&255):l===1&&(o=revLookup[t.charCodeAt(e)]<<10|revLookup[t.charCodeAt(e+1)]<<4|revLookup[t.charCodeAt(e+2)]>>2,u[m++]=o>>8&255,u[m++]=o&255),u}function tripletToBase64(t){return lookup$1[t>>18&63]+lookup$1[t>>12&63]+lookup$1[t>>6&63]+lookup$1[t&63]}function encodeChunk(t,e,n){for(var a,o=[],l=e;l<n;l+=3)a=(t[l]<<16)+(t[l+1]<<8)+t[l+2],o.push(tripletToBase64(a));return o.join("")}function fromByteArray(t){inited||init$1();for(var e,n=t.length,a=n%3,o="",l=[],u=16383,d=0,m=n-a;d<m;d+=u)l.push(encodeChunk(t,d,d+u>m?m:d+u));return a===1?(e=t[n-1],o+=lookup$1[e>>2],o+=lookup$1[e<<4&63],o+="=="):a===2&&(e=(t[n-2]<<8)+t[n-1],o+=lookup$1[e>>10],o+=lookup$1[e>>4&63],o+=lookup$1[e<<2&63],o+="="),l.push(o),l.join("")}function read$9(t,e,n,a,o){var l,u,d=o*8-a-1,m=(1<<d)-1,y=m>>1,b=-7,_=n?o-1:0,w=n?-1:1,E=t[e+_];for(_+=w,l=E&(1<<-b)-1,E>>=-b,b+=d;b>0;l=l*256+t[e+_],_+=w,b-=8);for(u=l&(1<<-b)-1,l>>=-b,b+=a;b>0;u=u*256+t[e+_],_+=w,b-=8);if(l===0)l=1-y;else{if(l===m)return u?NaN:(E?-1:1)*(1/0);u=u+Math.pow(2,a),l=l-y}return(E?-1:1)*u*Math.pow(2,l-a)}function write$4(t,e,n,a,o,l){var u,d,m,y=l*8-o-1,b=(1<<y)-1,_=b>>1,w=o===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=a?0:l-1,A=a?1:-1,C=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(d=isNaN(e)?1:0,u=b):(u=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-u))<1&&(u--,m*=2),u+_>=1?e+=w/m:e+=w*Math.pow(2,1-_),e*m>=2&&(u++,m/=2),u+_>=b?(d=0,u=b):u+_>=1?(d=(e*m-1)*Math.pow(2,o),u=u+_):(d=e*Math.pow(2,_-1)*Math.pow(2,o),u=0));o>=8;t[n+E]=d&255,E+=A,d/=256,o-=8);for(u=u<<o|d,y+=o;y>0;t[n+E]=u&255,E+=A,u/=256,y-=8);t[n+E-A]|=C*128}var toString$b={}.toString,isArray$5=Array.isArray||function(t){return toString$b.call(t)=="[object Array]"};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */var INSPECT_MAX_BYTES=50;Buffer$y.TYPED_ARRAY_SUPPORT=global$1.TYPED_ARRAY_SUPPORT!==void 0?global$1.TYPED_ARRAY_SUPPORT:!0;kMaxLength();function kMaxLength(){return Buffer$y.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer$y.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Buffer$y.prototype):(t===null&&(t=new Buffer$y(e)),t.length=e),t}function Buffer$y(t,e,n){if(!Buffer$y.TYPED_ARRAY_SUPPORT&&!(this instanceof Buffer$y))return new Buffer$y(t,e,n);if(typeof t=="number"){if(typeof e=="string")throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe$3(this,t)}return from$a(this,t,e,n)}Buffer$y.poolSize=8192;Buffer$y._augment=function(t){return t.__proto__=Buffer$y.prototype,t};function from$a(t,e,n,a){if(typeof e=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer?fromArrayBuffer(t,e,n,a):typeof e=="string"?fromString$8(t,e,n):fromObject(t,e)}Buffer$y.from=function(t,e,n){return from$a(null,t,e,n)};Buffer$y.TYPED_ARRAY_SUPPORT&&(Buffer$y.prototype.__proto__=Uint8Array.prototype,Buffer$y.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&Buffer$y[Symbol.species]);function assertSize$1(t){if(typeof t!="number")throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc$2(t,e,n,a){return assertSize$1(e),e<=0?createBuffer(t,e):n!==void 0?typeof a=="string"?createBuffer(t,e).fill(n,a):createBuffer(t,e).fill(n):createBuffer(t,e)}Buffer$y.alloc=function(t,e,n){return alloc$2(null,t,e,n)};function allocUnsafe$3(t,e){if(assertSize$1(e),t=createBuffer(t,e<0?0:checked(e)|0),!Buffer$y.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}Buffer$y.allocUnsafe=function(t){return allocUnsafe$3(null,t)};Buffer$y.allocUnsafeSlow=function(t){return allocUnsafe$3(null,t)};function fromString$8(t,e,n){if((typeof n!="string"||n==="")&&(n="utf8"),!Buffer$y.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var a=byteLength(e,n)|0;t=createBuffer(t,a);var o=t.write(e,n);return o!==a&&(t=t.slice(0,o)),t}function fromArrayLike(t,e){var n=e.length<0?0:checked(e.length)|0;t=createBuffer(t,n);for(var a=0;a<n;a+=1)t[a]=e[a]&255;return t}function fromArrayBuffer(t,e,n,a){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(a||0))throw new RangeError("'length' is out of bounds");return n===void 0&&a===void 0?e=new Uint8Array(e):a===void 0?e=new Uint8Array(e,n):e=new Uint8Array(e,n,a),Buffer$y.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Buffer$y.prototype):t=fromArrayLike(t,e),t}function fromObject(t,e){if(internalIsBuffer(e)){var n=checked(e.length)|0;return t=createBuffer(t,n),t.length===0||e.copy(t,0,0,n),t}if(e){if(typeof ArrayBuffer<"u"&&e.buffer instanceof ArrayBuffer||"length"in e)return typeof e.length!="number"||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if(e.type==="Buffer"&&isArray$5(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return t|0}Buffer$y.isBuffer=isBuffer$3;function internalIsBuffer(t){return!!(t!=null&&t._isBuffer)}Buffer$y.compare=function(e,n){if(!internalIsBuffer(e)||!internalIsBuffer(n))throw new TypeError("Arguments must be Buffers");if(e===n)return 0;for(var a=e.length,o=n.length,l=0,u=Math.min(a,o);l<u;++l)if(e[l]!==n[l]){a=e[l],o=n[l];break}return a<o?-1:o<a?1:0};Buffer$y.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};Buffer$y.concat=function(e,n){if(!isArray$5(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return Buffer$y.alloc(0);var a;if(n===void 0)for(n=0,a=0;a<e.length;++a)n+=e[a].length;var o=Buffer$y.allocUnsafe(n),l=0;for(a=0;a<e.length;++a){var u=e[a];if(!internalIsBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(o,l),l+=u.length}return o};function byteLength(t,e){if(internalIsBuffer(t))return t.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;typeof t!="string"&&(t=""+t);var n=t.length;if(n===0)return 0;for(var a=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return utf8ToBytes$1(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return base64ToBytes$1(t).length;default:if(a)return utf8ToBytes$1(t).length;e=(""+e).toLowerCase(),a=!0}}Buffer$y.byteLength=byteLength;function slowToString(t,e,n){var a=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,e>>>=0,n<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,e,n);case"utf8":case"utf-8":return utf8Slice$1(this,e,n);case"ascii":return asciiSlice(this,e,n);case"latin1":case"binary":return latin1Slice(this,e,n);case"base64":return base64Slice(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,n);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}Buffer$y.prototype._isBuffer=!0;function swap(t,e,n){var a=t[e];t[e]=t[n],t[n]=a}Buffer$y.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<e;n+=2)swap(this,n,n+1);return this};Buffer$y.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<e;n+=4)swap(this,n,n+3),swap(this,n+1,n+2);return this};Buffer$y.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<e;n+=8)swap(this,n,n+7),swap(this,n+1,n+6),swap(this,n+2,n+5),swap(this,n+3,n+4);return this};Buffer$y.prototype.toString=function(){var e=this.length|0;return e===0?"":arguments.length===0?utf8Slice$1(this,0,e):slowToString.apply(this,arguments)};Buffer$y.prototype.equals=function(e){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:Buffer$y.compare(this,e)===0};Buffer$y.prototype.inspect=function(){var e="",n=INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"};Buffer$y.prototype.compare=function(e,n,a,o,l){if(!internalIsBuffer(e))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),a===void 0&&(a=e?e.length:0),o===void 0&&(o=0),l===void 0&&(l=this.length),n<0||a>e.length||o<0||l>this.length)throw new RangeError("out of range index");if(o>=l&&n>=a)return 0;if(o>=l)return-1;if(n>=a)return 1;if(n>>>=0,a>>>=0,o>>>=0,l>>>=0,this===e)return 0;for(var u=l-o,d=a-n,m=Math.min(u,d),y=this.slice(o,l),b=e.slice(n,a),_=0;_<m;++_)if(y[_]!==b[_]){u=y[_],d=b[_];break}return u<d?-1:d<u?1:0};function bidirectionalIndexOf(t,e,n,a,o){if(t.length===0)return-1;if(typeof n=="string"?(a=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0)if(o)n=0;else return-1;if(typeof e=="string"&&(e=Buffer$y.from(e,a)),internalIsBuffer(e))return e.length===0?-1:arrayIndexOf(t,e,n,a,o);if(typeof e=="number")return e=e&255,Buffer$y.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):arrayIndexOf(t,[e],n,a,o);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,n,a,o){var l=1,u=t.length,d=e.length;if(a!==void 0&&(a=String(a).toLowerCase(),a==="ucs2"||a==="ucs-2"||a==="utf16le"||a==="utf-16le")){if(t.length<2||e.length<2)return-1;l=2,u/=2,d/=2,n/=2}function m(E,A){return l===1?E[A]:E.readUInt16BE(A*l)}var y;if(o){var b=-1;for(y=n;y<u;y++)if(m(t,y)===m(e,b===-1?0:y-b)){if(b===-1&&(b=y),y-b+1===d)return b*l}else b!==-1&&(y-=y-b),b=-1}else for(n+d>u&&(n=u-d),y=n;y>=0;y--){for(var _=!0,w=0;w<d;w++)if(m(t,y+w)!==m(e,w)){_=!1;break}if(_)return y}return-1}Buffer$y.prototype.includes=function(e,n,a){return this.indexOf(e,n,a)!==-1};Buffer$y.prototype.indexOf=function(e,n,a){return bidirectionalIndexOf(this,e,n,a,!0)};Buffer$y.prototype.lastIndexOf=function(e,n,a){return bidirectionalIndexOf(this,e,n,a,!1)};function hexWrite(t,e,n,a){n=Number(n)||0;var o=t.length-n;a?(a=Number(a),a>o&&(a=o)):a=o;var l=e.length;if(l%2!==0)throw new TypeError("Invalid hex string");a>l/2&&(a=l/2);for(var u=0;u<a;++u){var d=parseInt(e.substr(u*2,2),16);if(isNaN(d))return u;t[n+u]=d}return u}function utf8Write(t,e,n,a){return blitBuffer(utf8ToBytes$1(e,t.length-n),t,n,a)}function asciiWrite(t,e,n,a){return blitBuffer(asciiToBytes(e),t,n,a)}function latin1Write(t,e,n,a){return asciiWrite(t,e,n,a)}function base64Write(t,e,n,a){return blitBuffer(base64ToBytes$1(e),t,n,a)}function ucs2Write(t,e,n,a){return blitBuffer(utf16leToBytes(e,t.length-n),t,n,a)}Buffer$y.prototype.write=function(e,n,a,o){if(n===void 0)o="utf8",a=this.length,n=0;else if(a===void 0&&typeof n=="string")o=n,a=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(a)?(a=a|0,o===void 0&&(o="utf8")):(o=a,a=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var l=this.length-n;if((a===void 0||a>l)&&(a=l),e.length>0&&(a<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var u=!1;;)switch(o){case"hex":return hexWrite(this,e,n,a);case"utf8":case"utf-8":return utf8Write(this,e,n,a);case"ascii":return asciiWrite(this,e,n,a);case"latin1":case"binary":return latin1Write(this,e,n,a);case"base64":return base64Write(this,e,n,a);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,e,n,a);default:if(u)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),u=!0}};Buffer$y.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(t,e,n){return e===0&&n===t.length?fromByteArray(t):fromByteArray(t.slice(e,n))}function utf8Slice$1(t,e,n){n=Math.min(t.length,n);for(var a=[],o=e;o<n;){var l=t[o],u=null,d=l>239?4:l>223?3:l>191?2:1;if(o+d<=n){var m,y,b,_;switch(d){case 1:l<128&&(u=l);break;case 2:m=t[o+1],(m&192)===128&&(_=(l&31)<<6|m&63,_>127&&(u=_));break;case 3:m=t[o+1],y=t[o+2],(m&192)===128&&(y&192)===128&&(_=(l&15)<<12|(m&63)<<6|y&63,_>2047&&(_<55296||_>57343)&&(u=_));break;case 4:m=t[o+1],y=t[o+2],b=t[o+3],(m&192)===128&&(y&192)===128&&(b&192)===128&&(_=(l&15)<<18|(m&63)<<12|(y&63)<<6|b&63,_>65535&&_<1114112&&(u=_))}}u===null?(u=65533,d=1):u>65535&&(u-=65536,a.push(u>>>10&1023|55296),u=56320|u&1023),a.push(u),o+=d}return decodeCodePointsArray$1(a)}var MAX_ARGUMENTS_LENGTH$1=4096;function decodeCodePointsArray$1(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH$1)return String.fromCharCode.apply(String,t);for(var n="",a=0;a<e;)n+=String.fromCharCode.apply(String,t.slice(a,a+=MAX_ARGUMENTS_LENGTH$1));return n}function asciiSlice(t,e,n){var a="";n=Math.min(t.length,n);for(var o=e;o<n;++o)a+=String.fromCharCode(t[o]&127);return a}function latin1Slice(t,e,n){var a="";n=Math.min(t.length,n);for(var o=e;o<n;++o)a+=String.fromCharCode(t[o]);return a}function hexSlice(t,e,n){var a=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>a)&&(n=a);for(var o="",l=e;l<n;++l)o+=toHex$2(t[l]);return o}function utf16leSlice(t,e,n){for(var a=t.slice(e,n),o="",l=0;l<a.length;l+=2)o+=String.fromCharCode(a[l]+a[l+1]*256);return o}Buffer$y.prototype.slice=function(e,n){var a=this.length;e=~~e,n=n===void 0?a:~~n,e<0?(e+=a,e<0&&(e=0)):e>a&&(e=a),n<0?(n+=a,n<0&&(n=0)):n>a&&(n=a),n<e&&(n=e);var o;if(Buffer$y.TYPED_ARRAY_SUPPORT)o=this.subarray(e,n),o.__proto__=Buffer$y.prototype;else{var l=n-e;o=new Buffer$y(l,void 0);for(var u=0;u<l;++u)o[u]=this[u+e]}return o};function checkOffset(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}Buffer$y.prototype.readUIntLE=function(e,n,a){e=e|0,n=n|0,a||checkOffset(e,n,this.length);for(var o=this[e],l=1,u=0;++u<n&&(l*=256);)o+=this[e+u]*l;return o};Buffer$y.prototype.readUIntBE=function(e,n,a){e=e|0,n=n|0,a||checkOffset(e,n,this.length);for(var o=this[e+--n],l=1;n>0&&(l*=256);)o+=this[e+--n]*l;return o};Buffer$y.prototype.readUInt8=function(e,n){return n||checkOffset(e,1,this.length),this[e]};Buffer$y.prototype.readUInt16LE=function(e,n){return n||checkOffset(e,2,this.length),this[e]|this[e+1]<<8};Buffer$y.prototype.readUInt16BE=function(e,n){return n||checkOffset(e,2,this.length),this[e]<<8|this[e+1]};Buffer$y.prototype.readUInt32LE=function(e,n){return n||checkOffset(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};Buffer$y.prototype.readUInt32BE=function(e,n){return n||checkOffset(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};Buffer$y.prototype.readIntLE=function(e,n,a){e=e|0,n=n|0,a||checkOffset(e,n,this.length);for(var o=this[e],l=1,u=0;++u<n&&(l*=256);)o+=this[e+u]*l;return l*=128,o>=l&&(o-=Math.pow(2,8*n)),o};Buffer$y.prototype.readIntBE=function(e,n,a){e=e|0,n=n|0,a||checkOffset(e,n,this.length);for(var o=n,l=1,u=this[e+--o];o>0&&(l*=256);)u+=this[e+--o]*l;return l*=128,u>=l&&(u-=Math.pow(2,8*n)),u};Buffer$y.prototype.readInt8=function(e,n){return n||checkOffset(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};Buffer$y.prototype.readInt16LE=function(e,n){n||checkOffset(e,2,this.length);var a=this[e]|this[e+1]<<8;return a&32768?a|4294901760:a};Buffer$y.prototype.readInt16BE=function(e,n){n||checkOffset(e,2,this.length);var a=this[e+1]|this[e]<<8;return a&32768?a|4294901760:a};Buffer$y.prototype.readInt32LE=function(e,n){return n||checkOffset(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};Buffer$y.prototype.readInt32BE=function(e,n){return n||checkOffset(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};Buffer$y.prototype.readFloatLE=function(e,n){return n||checkOffset(e,4,this.length),read$9(this,e,!0,23,4)};Buffer$y.prototype.readFloatBE=function(e,n){return n||checkOffset(e,4,this.length),read$9(this,e,!1,23,4)};Buffer$y.prototype.readDoubleLE=function(e,n){return n||checkOffset(e,8,this.length),read$9(this,e,!0,52,8)};Buffer$y.prototype.readDoubleBE=function(e,n){return n||checkOffset(e,8,this.length),read$9(this,e,!1,52,8)};function checkInt(t,e,n,a,o,l){if(!internalIsBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>o||e<l)throw new RangeError('"value" argument is out of bounds');if(n+a>t.length)throw new RangeError("Index out of range")}Buffer$y.prototype.writeUIntLE=function(e,n,a,o){if(e=+e,n=n|0,a=a|0,!o){var l=Math.pow(2,8*a)-1;checkInt(this,e,n,a,l,0)}var u=1,d=0;for(this[n]=e&255;++d<a&&(u*=256);)this[n+d]=e/u&255;return n+a};Buffer$y.prototype.writeUIntBE=function(e,n,a,o){if(e=+e,n=n|0,a=a|0,!o){var l=Math.pow(2,8*a)-1;checkInt(this,e,n,a,l,0)}var u=a-1,d=1;for(this[n+u]=e&255;--u>=0&&(d*=256);)this[n+u]=e/d&255;return n+a};Buffer$y.prototype.writeUInt8=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,1,255,0),Buffer$y.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e&255,n+1};function objectWriteUInt16(t,e,n,a){e<0&&(e=65535+e+1);for(var o=0,l=Math.min(t.length-n,2);o<l;++o)t[n+o]=(e&255<<8*(a?o:1-o))>>>(a?o:1-o)*8}Buffer$y.prototype.writeUInt16LE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,2,65535,0),Buffer$y.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2};Buffer$y.prototype.writeUInt16BE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,2,65535,0),Buffer$y.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):objectWriteUInt16(this,e,n,!1),n+2};function objectWriteUInt32(t,e,n,a){e<0&&(e=4294967295+e+1);for(var o=0,l=Math.min(t.length-n,4);o<l;++o)t[n+o]=e>>>(a?o:3-o)*8&255}Buffer$y.prototype.writeUInt32LE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,4,4294967295,0),Buffer$y.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e&255):objectWriteUInt32(this,e,n,!0),n+4};Buffer$y.prototype.writeUInt32BE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,4,4294967295,0),Buffer$y.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):objectWriteUInt32(this,e,n,!1),n+4};Buffer$y.prototype.writeIntLE=function(e,n,a,o){if(e=+e,n=n|0,!o){var l=Math.pow(2,8*a-1);checkInt(this,e,n,a,l-1,-l)}var u=0,d=1,m=0;for(this[n]=e&255;++u<a&&(d*=256);)e<0&&m===0&&this[n+u-1]!==0&&(m=1),this[n+u]=(e/d>>0)-m&255;return n+a};Buffer$y.prototype.writeIntBE=function(e,n,a,o){if(e=+e,n=n|0,!o){var l=Math.pow(2,8*a-1);checkInt(this,e,n,a,l-1,-l)}var u=a-1,d=1,m=0;for(this[n+u]=e&255;--u>=0&&(d*=256);)e<0&&m===0&&this[n+u+1]!==0&&(m=1),this[n+u]=(e/d>>0)-m&255;return n+a};Buffer$y.prototype.writeInt8=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,1,127,-128),Buffer$y.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=e&255,n+1};Buffer$y.prototype.writeInt16LE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,2,32767,-32768),Buffer$y.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8):objectWriteUInt16(this,e,n,!0),n+2};Buffer$y.prototype.writeInt16BE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,2,32767,-32768),Buffer$y.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e&255):objectWriteUInt16(this,e,n,!1),n+2};Buffer$y.prototype.writeInt32LE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,4,2147483647,-2147483648),Buffer$y.TYPED_ARRAY_SUPPORT?(this[n]=e&255,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):objectWriteUInt32(this,e,n,!0),n+4};Buffer$y.prototype.writeInt32BE=function(e,n,a){return e=+e,n=n|0,a||checkInt(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),Buffer$y.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e&255):objectWriteUInt32(this,e,n,!1),n+4};function checkIEEE754(t,e,n,a,o,l){if(n+a>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function writeFloat(t,e,n,a,o){return o||checkIEEE754(t,e,n,4),write$4(t,e,n,a,23,4),n+4}Buffer$y.prototype.writeFloatLE=function(e,n,a){return writeFloat(this,e,n,!0,a)};Buffer$y.prototype.writeFloatBE=function(e,n,a){return writeFloat(this,e,n,!1,a)};function writeDouble(t,e,n,a,o){return o||checkIEEE754(t,e,n,8),write$4(t,e,n,a,52,8),n+8}Buffer$y.prototype.writeDoubleLE=function(e,n,a){return writeDouble(this,e,n,!0,a)};Buffer$y.prototype.writeDoubleBE=function(e,n,a){return writeDouble(this,e,n,!1,a)};Buffer$y.prototype.copy=function(e,n,a,o){if(a||(a=0),!o&&o!==0&&(o=this.length),n>=e.length&&(n=e.length),n||(n=0),o>0&&o<a&&(o=a),o===a||e.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(a<0||a>=this.length)throw new RangeError("sourceStart out of bounds");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-n<o-a&&(o=e.length-n+a);var l=o-a,u;if(this===e&&a<n&&n<o)for(u=l-1;u>=0;--u)e[u+n]=this[u+a];else if(l<1e3||!Buffer$y.TYPED_ARRAY_SUPPORT)for(u=0;u<l;++u)e[u+n]=this[u+a];else Uint8Array.prototype.set.call(e,this.subarray(a,a+l),n);return l};Buffer$y.prototype.fill=function(e,n,a,o){if(typeof e=="string"){if(typeof n=="string"?(o=n,n=0,a=this.length):typeof a=="string"&&(o=a,a=this.length),e.length===1){var l=e.charCodeAt(0);l<256&&(e=l)}if(o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!Buffer$y.isEncoding(o))throw new TypeError("Unknown encoding: "+o)}else typeof e=="number"&&(e=e&255);if(n<0||this.length<n||this.length<a)throw new RangeError("Out of range index");if(a<=n)return this;n=n>>>0,a=a===void 0?this.length:a>>>0,e||(e=0);var u;if(typeof e=="number")for(u=n;u<a;++u)this[u]=e;else{var d=internalIsBuffer(e)?e:utf8ToBytes$1(new Buffer$y(e,o).toString()),m=d.length;for(u=0;u<a-n;++u)this[u+n]=d[u%m]}return this};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex$2(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes$1(t,e){e=e||1/0;for(var n,a=t.length,o=null,l=[],u=0;u<a;++u){if(n=t.charCodeAt(u),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&l.push(239,191,189);continue}else if(u+1===a){(e-=3)>-1&&l.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&l.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&l.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;l.push(n)}else if(n<2048){if((e-=2)<0)break;l.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;l.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;l.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return l}function asciiToBytes(t){for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n)&255);return e}function utf16leToBytes(t,e){for(var n,a,o,l=[],u=0;u<t.length&&!((e-=2)<0);++u)n=t.charCodeAt(u),a=n>>8,o=n%256,l.push(o),l.push(a);return l}function base64ToBytes$1(t){return toByteArray(base64clean(t))}function blitBuffer(t,e,n,a){for(var o=0;o<a&&!(o+n>=e.length||o>=t.length);++o)e[o+n]=t[o];return o}function isnan(t){return t!==t}function isBuffer$3(t){return t!=null&&(!!t._isBuffer||isFastBuffer(t)||isSlowBuffer(t))}function isFastBuffer(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function isSlowBuffer(t){return typeof t.readFloatLE=="function"&&typeof t.slice=="function"&&isFastBuffer(t.slice(0,0))}function BufferList(){this.head=null,this.tail=null,this.length=0}BufferList.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length};BufferList.prototype.unshift=function(t){var e={data:t,next:this.head};this.length===0&&(this.tail=e),this.head=e,++this.length};BufferList.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}};BufferList.prototype.clear=function(){this.head=this.tail=null,this.length=0};BufferList.prototype.join=function(t){if(this.length===0)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n};BufferList.prototype.concat=function(t){if(this.length===0)return buffer$3.Buffer.alloc(0);if(this.length===1)return this.head.data;for(var e=buffer$3.Buffer.allocUnsafe(t>>>0),n=this.head,a=0;n;)n.data.copy(e,a),a+=n.data.length,n=n.next;return e};var string_decoder={},StringDecoder_1,Buffer$x=buffer$3.Buffer,isBufferEncoding=Buffer$x.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function assertEncoding(t){if(t&&!isBufferEncoding(t))throw new Error("Unknown encoding: "+t)}var StringDecoder$1=StringDecoder_1=string_decoder.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),assertEncoding(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=utf16DetectIncompleteChar;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=base64DetectIncompleteChar;break;default:this.write=passThroughWrite;return}this.charBuffer=new Buffer$x(6),this.charReceived=0,this.charLength=0};StringDecoder$1.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var o=e.charCodeAt(e.length-1);if(o>=55296&&o<=56319){this.charLength+=this.surrogateSize,e="";continue}if(this.charReceived=this.charLength=0,t.length===0)return e;break}this.detectIncompleteChar(t);var a=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,a),a-=this.charReceived),e+=t.toString(this.encoding,0,a);var a=e.length-1,o=e.charCodeAt(a);if(o>=55296&&o<=56319){var l=this.surrogateSize;return this.charLength+=l,this.charReceived+=l,this.charBuffer.copy(this.charBuffer,l,0,l),t.copy(this.charBuffer,0,0,l),e.substring(0,a)}return e};StringDecoder$1.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(e==1&&n>>5==6){this.charLength=2;break}if(e<=2&&n>>4==14){this.charLength=3;break}if(e<=3&&n>>3==30){this.charLength=4;break}}this.charReceived=e};StringDecoder$1.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,a=this.charBuffer,o=this.encoding;e+=a.slice(0,n).toString(o)}return e};function passThroughWrite(t){return t.toString(this.encoding)}function utf16DetectIncompleteChar(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function base64DetectIncompleteChar(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}Readable.ReadableState=ReadableState;var debug$1=util$9.debuglog("stream");util$9.inherits(Readable,eventsExports);function prependListener(t,e,n){if(typeof t.prependListener=="function")return t.prependListener(e,n);!t._events||!t._events[e]?t.on(e,n):Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]}function listenerCount(t,e){return t.listeners(e).length}function ReadableState(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof Duplex&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,a=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:a,this.highWaterMark=~~this.highWaterMark,this.buffer=new BufferList,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new StringDecoder_1(t.encoding),this.encoding=t.encoding)}function Readable(t){if(!(this instanceof Readable))return new Readable(t);this._readableState=new ReadableState(t,this),this.readable=!0,t&&typeof t.read=="function"&&(this._read=t.read),eventsExports.call(this)}Readable.prototype.push=function(t,e){var n=this._readableState;return!n.objectMode&&typeof t=="string"&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=Buffer$y.from(t,e),e="")),readableAddChunk(this,n,t,e,!1)};Readable.prototype.unshift=function(t){var e=this._readableState;return readableAddChunk(this,e,t,"",!0)};Readable.prototype.isPaused=function(){return this._readableState.flowing===!1};function readableAddChunk(t,e,n,a,o){var l=chunkInvalid(e,n);if(l)t.emit("error",l);else if(n===null)e.reading=!1,onEofChunk(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!o){var u=new Error("stream.push() after EOF");t.emit("error",u)}else if(e.endEmitted&&o){var d=new Error("stream.unshift() after end event");t.emit("error",d)}else{var m;e.decoder&&!o&&!a&&(n=e.decoder.write(n),m=!e.objectMode&&n.length===0),o||(e.reading=!1),m||(e.flowing&&e.length===0&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,o?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&emitReadable(t))),maybeReadMore(t,e)}else o||(e.reading=!1);return needMoreData(e)}function needMoreData(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||t.length===0)}Readable.prototype.setEncoding=function(t){return this._readableState.decoder=new StringDecoder_1(t),this._readableState.encoding=t,this};var MAX_HWM=8388608;function computeNewHighWaterMark(t){return t>=MAX_HWM?t=MAX_HWM:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function howMuchToRead(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=computeNewHighWaterMark(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Readable.prototype.read=function(t){debug$1("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return debug$1("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?endReadable(this):emitReadable(this),null;if(t=howMuchToRead(t,e),t===0&&e.ended)return e.length===0&&endReadable(this),null;var a=e.needReadable;debug$1("need readable",a),(e.length===0||e.length-t<e.highWaterMark)&&(a=!0,debug$1("length less than watermark",a)),e.ended||e.reading?(a=!1,debug$1("reading or ended",a)):a&&(debug$1("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=howMuchToRead(n,e)));var o;return t>0?o=fromList(t,e):o=null,o===null?(e.needReadable=!0,t=0):e.length-=t,e.length===0&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&endReadable(this)),o!==null&&this.emit("data",o),o};function chunkInvalid(t,e){var n=null;return!Buffer$y.isBuffer(e)&&typeof e!="string"&&e!==null&&e!==void 0&&!t.objectMode&&(n=new TypeError("Invalid non-string/buffer chunk")),n}function onEofChunk(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,emitReadable(t)}}function emitReadable(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(debug$1("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?browserExports$3.nextTick(emitReadable_,t):emitReadable_(t))}function emitReadable_(t){debug$1("emit readable"),t.emit("readable"),flow(t)}function maybeReadMore(t,e){e.readingMore||(e.readingMore=!0,browserExports$3.nextTick(maybeReadMore_,t,e))}function maybeReadMore_(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(debug$1("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}Readable.prototype._read=function(t){this.emit("error",new Error("not implemented"))};Readable.prototype.pipe=function(t,e){var n=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=t;break;case 1:a.pipes=[a.pipes,t];break;default:a.pipes.push(t);break}a.pipesCount+=1,debug$1("pipe count=%d opts=%j",a.pipesCount,e);var o=!e||e.end!==!1,l=o?d:b;a.endEmitted?browserExports$3.nextTick(l):n.once("end",l),t.on("unpipe",u);function u(B){debug$1("onunpipe"),B===n&&b()}function d(){debug$1("onend"),t.end()}var m=pipeOnDrain(n);t.on("drain",m);var y=!1;function b(){debug$1("cleanup"),t.removeListener("close",A),t.removeListener("finish",C),t.removeListener("drain",m),t.removeListener("error",E),t.removeListener("unpipe",u),n.removeListener("end",d),n.removeListener("end",b),n.removeListener("data",w),y=!0,a.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&m()}var _=!1;n.on("data",w);function w(B){debug$1("ondata"),_=!1;var D=t.write(B);D===!1&&!_&&((a.pipesCount===1&&a.pipes===t||a.pipesCount>1&&indexOf(a.pipes,t)!==-1)&&!y&&(debug$1("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,_=!0),n.pause())}function E(B){debug$1("onerror",B),k(),t.removeListener("error",E),listenerCount(t,"error")===0&&t.emit("error",B)}prependListener(t,"error",E);function A(){t.removeListener("finish",C),k()}t.once("close",A);function C(){debug$1("onfinish"),t.removeListener("close",A),k()}t.once("finish",C);function k(){debug$1("unpipe"),n.unpipe(t)}return t.emit("pipe",n),a.flowing||(debug$1("pipe resume"),n.resume()),t};function pipeOnDrain(t){return function(){var e=t._readableState;debug$1("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,e.awaitDrain===0&&t.listeners("data").length&&(e.flowing=!0,flow(t))}}Readable.prototype.unpipe=function(t){var e=this._readableState;if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,a=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<a;o++)n[o].emit("unpipe",this);return this}var l=indexOf(e.pipes,t);return l===-1?this:(e.pipes.splice(l,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)};Readable.prototype.on=function(t,e){var n=eventsExports.prototype.on.call(this,t,e);if(t==="data")this._readableState.flowing!==!1&&this.resume();else if(t==="readable"){var a=this._readableState;!a.endEmitted&&!a.readableListening&&(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&emitReadable(this):browserExports$3.nextTick(nReadingNextTick,this))}return n};Readable.prototype.addListener=Readable.prototype.on;function nReadingNextTick(t){debug$1("readable nexttick read 0"),t.read(0)}Readable.prototype.resume=function(){var t=this._readableState;return t.flowing||(debug$1("resume"),t.flowing=!0,resume(this,t)),this};function resume(t,e){e.resumeScheduled||(e.resumeScheduled=!0,browserExports$3.nextTick(resume_,t,e))}function resume_(t,e){e.reading||(debug$1("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),flow(t),e.flowing&&!e.reading&&t.read(0)}Readable.prototype.pause=function(){return debug$1("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(debug$1("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function flow(t){var e=t._readableState;for(debug$1("flow",e.flowing);e.flowing&&t.read()!==null;);}Readable.prototype.wrap=function(t){var e=this._readableState,n=!1,a=this;t.on("end",function(){if(debug$1("wrapped end"),e.decoder&&!e.ended){var u=e.decoder.end();u&&u.length&&a.push(u)}a.push(null)}),t.on("data",function(u){if(debug$1("wrapped data"),e.decoder&&(u=e.decoder.write(u)),!(e.objectMode&&u==null)&&!(!e.objectMode&&(!u||!u.length))){var d=a.push(u);d||(n=!0,t.pause())}});for(var o in t)this[o]===void 0&&typeof t[o]=="function"&&(this[o]=function(u){return function(){return t[u].apply(t,arguments)}}(o));var l=["error","close","destroy","pause","resume"];return forEach$1(l,function(u){t.on(u,a.emit.bind(a,u))}),a._read=function(u){debug$1("wrapped _read",u),n&&(n=!1,t.resume())},a};Readable._fromList=fromList;function fromList(t,e){if(e.length===0)return null;var n;return e.objectMode?n=e.buffer.shift():!t||t>=e.length?(e.decoder?n=e.buffer.join(""):e.buffer.length===1?n=e.buffer.head.data:n=e.buffer.concat(e.length),e.buffer.clear()):n=fromListPartial(t,e.buffer,e.decoder),n}function fromListPartial(t,e,n){var a;return t<e.head.data.length?(a=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):t===e.head.data.length?a=e.shift():a=n?copyFromBufferString(t,e):copyFromBuffer(t,e),a}function copyFromBufferString(t,e){var n=e.head,a=1,o=n.data;for(t-=o.length;n=n.next;){var l=n.data,u=t>l.length?l.length:t;if(u===l.length?o+=l:o+=l.slice(0,t),t-=u,t===0){u===l.length?(++a,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=l.slice(u));break}++a}return e.length-=a,o}function copyFromBuffer(t,e){var n=Buffer$y.allocUnsafe(t),a=e.head,o=1;for(a.data.copy(n),t-=a.data.length;a=a.next;){var l=a.data,u=t>l.length?l.length:t;if(l.copy(n,n.length-t,0,u),t-=u,t===0){u===l.length?(++o,a.next?e.head=a.next:e.head=e.tail=null):(e.head=a,a.data=l.slice(u));break}++o}return e.length-=o,n}function endReadable(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,browserExports$3.nextTick(endReadableNT,e,t))}function endReadableNT(t,e){!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function forEach$1(t,e){for(var n=0,a=t.length;n<a;n++)e(t[n],n)}function indexOf(t,e){for(var n=0,a=t.length;n<a;n++)if(t[n]===e)return n;return-1}Writable.WritableState=WritableState;util$9.inherits(Writable,eventsExports.EventEmitter);function nop(){}function WriteReq(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function WritableState(t,e){Object.defineProperty(this,"buffer",{get:util$9.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof Duplex&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,a=this.objectMode?16:16*1024;this.highWaterMark=n||n===0?n:a,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(l){onwrite(e,l)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new CorkedRequest(this)}WritableState.prototype.getBuffer=function(){for(var e=this.bufferedRequest,n=[];e;)n.push(e),e=e.next;return n};function Writable(t){if(!(this instanceof Writable)&&!(this instanceof Duplex))return new Writable(t);this._writableState=new WritableState(t,this),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev)),eventsExports.EventEmitter.call(this)}Writable.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function writeAfterEnd(t,e){var n=new Error("write after end");t.emit("error",n),browserExports$3.nextTick(e,n)}function validChunk(t,e,n,a){var o=!0,l=!1;return n===null?l=new TypeError("May not write null values to stream"):!buffer$3.Buffer.isBuffer(n)&&typeof n!="string"&&n!==void 0&&!e.objectMode&&(l=new TypeError("Invalid non-string/buffer chunk")),l&&(t.emit("error",l),browserExports$3.nextTick(a,l),o=!1),o}Writable.prototype.write=function(t,e,n){var a=this._writableState,o=!1;return typeof e=="function"&&(n=e,e=null),buffer$3.Buffer.isBuffer(t)?e="buffer":e||(e=a.defaultEncoding),typeof n!="function"&&(n=nop),a.ended?writeAfterEnd(this,n):validChunk(this,a,t,n)&&(a.pendingcb++,o=writeOrBuffer(this,a,t,e,n)),o};Writable.prototype.cork=function(){var t=this._writableState;t.corked++};Writable.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&clearBuffer(this,t))};Writable.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this};function decodeChunk(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=buffer$3.Buffer.from(e,n)),e}function writeOrBuffer(t,e,n,a,o){n=decodeChunk(e,n,a),buffer$3.Buffer.isBuffer(n)&&(a="buffer");var l=e.objectMode?1:n.length;e.length+=l;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var d=e.lastBufferedRequest;e.lastBufferedRequest=new WriteReq(n,a,o),d?d.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else doWrite(t,e,!1,l,n,a,o);return u}function doWrite(t,e,n,a,o,l,u){e.writelen=a,e.writecb=u,e.writing=!0,e.sync=!0,n?t._writev(o,e.onwrite):t._write(o,l,e.onwrite),e.sync=!1}function onwriteError(t,e,n,a,o){--e.pendingcb,n?browserExports$3.nextTick(o,a):o(a),t._writableState.errorEmitted=!0,t.emit("error",a)}function onwriteStateUpdate(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function onwrite(t,e){var n=t._writableState,a=n.sync,o=n.writecb;if(onwriteStateUpdate(n),e)onwriteError(t,n,a,e,o);else{var l=needFinish(n);!l&&!n.corked&&!n.bufferProcessing&&n.bufferedRequest&&clearBuffer(t,n),a?browserExports$3.nextTick(afterWrite,t,n,l,o):afterWrite(t,n,l,o)}}function afterWrite(t,e,n,a){n||onwriteDrain(t,e),e.pendingcb--,a(),finishMaybe(t,e)}function onwriteDrain(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function clearBuffer(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var a=e.bufferedRequestCount,o=new Array(a),l=e.corkedRequestsFree;l.entry=n;for(var u=0;n;)o[u]=n,n=n.next,u+=1;doWrite(t,e,!0,e.length,o,"",l.finish),e.pendingcb++,e.lastBufferedRequest=null,l.next?(e.corkedRequestsFree=l.next,l.next=null):e.corkedRequestsFree=new CorkedRequest(e)}else{for(;n;){var d=n.chunk,m=n.encoding,y=n.callback,b=e.objectMode?1:d.length;if(doWrite(t,e,!1,b,d,m,y),n=n.next,e.writing)break}n===null&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}Writable.prototype._write=function(t,e,n){n(new Error("not implemented"))};Writable.prototype._writev=null;Writable.prototype.end=function(t,e,n){var a=this._writableState;typeof t=="function"?(n=t,t=null,e=null):typeof e=="function"&&(n=e,e=null),t!=null&&this.write(t,e),a.corked&&(a.corked=1,this.uncork()),!a.ending&&!a.finished&&endWritable(this,a,n)};function needFinish(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function prefinish(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function finishMaybe(t,e){var n=needFinish(e);return n&&(e.pendingcb===0?(prefinish(t,e),e.finished=!0,t.emit("finish")):prefinish(t,e)),n}function endWritable(t,e,n){e.ending=!0,finishMaybe(t,e),n&&(e.finished?browserExports$3.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}function CorkedRequest(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var a=e.entry;for(e.entry=null;a;){var o=a.callback;t.pendingcb--,o(n),a=a.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}util$9.inherits(Duplex,Readable);var keys$2=Object.keys(Writable.prototype);for(var v=0;v<keys$2.length;v++){var method=keys$2[v];Duplex.prototype[method]||(Duplex.prototype[method]=Writable.prototype[method])}function Duplex(t){if(!(this instanceof Duplex))return new Duplex(t);Readable.call(this,t),Writable.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",onend)}function onend(){this.allowHalfOpen||this._writableState.ended||browserExports$3.nextTick(onEndNT,this)}function onEndNT(t){t.end()}util$9.inherits(Transform$5,Duplex);function TransformState(t){this.afterTransform=function(e,n){return afterTransform(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function afterTransform(t,e,n){var a=t._transformState;a.transforming=!1;var o=a.writecb;if(!o)return t.emit("error",new Error("no writecb in Transform class"));a.writechunk=null,a.writecb=null,n!=null&&t.push(n),o(e);var l=t._readableState;l.reading=!1,(l.needReadable||l.length<l.highWaterMark)&&t._read(l.highWaterMark)}function Transform$5(t){if(!(this instanceof Transform$5))return new Transform$5(t);Duplex.call(this,t),this._transformState=new TransformState(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(n){done(e,n)}):done(e)})}Transform$5.prototype.push=function(t,e){return this._transformState.needTransform=!1,Duplex.prototype.push.call(this,t,e)};Transform$5.prototype._transform=function(t,e,n){throw new Error("Not implemented")};Transform$5.prototype._write=function(t,e,n){var a=this._transformState;if(a.writecb=n,a.writechunk=t,a.writeencoding=e,!a.transforming){var o=this._readableState;(a.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}};Transform$5.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};function done(t,e){if(e)return t.emit("error",e);var n=t._writableState,a=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(a.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}util$9.inherits(PassThrough,Transform$5);function PassThrough(t){if(!(this instanceof PassThrough))return new PassThrough(t);Transform$5.call(this,t)}PassThrough.prototype._transform=function(t,e,n){n(null,t)};util$9.inherits(Stream,eventsExports);Stream.Readable=Readable;Stream.Writable=Writable;Stream.Duplex=Duplex;Stream.Transform=Transform$5;Stream.PassThrough=PassThrough;Stream.Stream=Stream;function Stream(){eventsExports.call(this)}Stream.prototype.pipe=function(t,e){var n=this;function a(b){t.writable&&t.write(b)===!1&&n.pause&&n.pause()}n.on("data",a);function o(){n.readable&&n.resume&&n.resume()}t.on("drain",o),!t._isStdio&&(!e||e.end!==!1)&&(n.on("end",u),n.on("close",d));var l=!1;function u(){l||(l=!0,t.end())}function d(){l||(l=!0,typeof t.destroy=="function"&&t.destroy())}function m(b){if(y(),eventsExports.listenerCount(this,"error")===0)throw b}n.on("error",m),t.on("error",m);function y(){n.removeListener("data",a),t.removeListener("drain",o),n.removeListener("end",u),n.removeListener("close",d),n.removeListener("error",m),t.removeListener("error",m),n.removeListener("end",y),n.removeListener("close",y),t.removeListener("close",y)}return n.on("end",y),n.on("close",y),t.on("close",y),t.emit("pipe",n),t};const stream$2=Object.freeze(Object.defineProperty({__proto__:null,Duplex,PassThrough,Readable,Stream,Transform:Transform$5,Writable,default:Stream},Symbol.toStringTag,{value:"Module"})),require$$1$3=getAugmentedNamespace(stream$2);var Buffer$w=safeBufferExports.Buffer,Transform$4=require$$1$3.Transform,StringDecoder=string_decoder.StringDecoder,inherits$n=inherits_browserExports;function CipherBase$1(t){Transform$4.call(this),this.hashMode=typeof t=="string",this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}inherits$n(CipherBase$1,Transform$4);CipherBase$1.prototype.update=function(t,e,n){typeof t=="string"&&(t=Buffer$w.from(t,e));var a=this._update(t);return this.hashMode?this:(n&&(a=this._toString(a,n)),a)};CipherBase$1.prototype.setAutoPadding=function(){};CipherBase$1.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")};CipherBase$1.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")};CipherBase$1.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")};CipherBase$1.prototype._transform=function(t,e,n){var a;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(o){a=o}finally{n(a)}};CipherBase$1.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(n){e=n}t(e)};CipherBase$1.prototype._finalOrDigest=function(t){var e=this.__final()||Buffer$w.alloc(0);return t&&(e=this._toString(e,t,!0)),e};CipherBase$1.prototype._toString=function(t,e,n){if(this._decoder||(this._decoder=new StringDecoder(e),this._encoding=e),this._encoding!==e)throw new Error("can't switch encodings");var a=this._decoder.write(t);return n&&(a+=this._decoder.end()),a};var cipherBase=CipherBase$1,inherits$m=inherits_browserExports,MD5$2=md5_js,RIPEMD160$3=ripemd160$1,sha$6=sha_jsExports,Base$5=cipherBase;function Hash(t){Base$5.call(this,"digest"),this._hash=t}inherits$m(Hash,Base$5);Hash.prototype._update=function(t){this._hash.update(t)};Hash.prototype._final=function(){return this._hash.digest()};var browser$e=function(e){return e=e.toLowerCase(),e==="md5"?new MD5$2:e==="rmd160"||e==="ripemd160"?new RIPEMD160$3:new Hash(sha$6(e))},inherits$l=inherits_browserExports,Buffer$v=safeBufferExports.Buffer,Base$4=cipherBase,ZEROS$2=Buffer$v.alloc(128),blocksize=64;function Hmac$3(t,e){Base$4.call(this,"digest"),typeof e=="string"&&(e=Buffer$v.from(e)),this._alg=t,this._key=e,e.length>blocksize?e=t(e):e.length<blocksize&&(e=Buffer$v.concat([e,ZEROS$2],blocksize));for(var n=this._ipad=Buffer$v.allocUnsafe(blocksize),a=this._opad=Buffer$v.allocUnsafe(blocksize),o=0;o<blocksize;o++)n[o]=e[o]^54,a[o]=e[o]^92;this._hash=[n]}inherits$l(Hmac$3,Base$4);Hmac$3.prototype._update=function(t){this._hash.push(t)};Hmac$3.prototype._final=function(){var t=this._alg(Buffer$v.concat(this._hash));return this._alg(Buffer$v.concat([this._opad,t]))};var legacy=Hmac$3,MD5$1=md5_js,md5$2=function(t){return new MD5$1().update(t).digest()},inherits$k=inherits_browserExports,Legacy=legacy,Base$3=cipherBase,Buffer$u=safeBufferExports.Buffer,md5$1=md5$2,RIPEMD160$2=ripemd160$1,sha$5=sha_jsExports,ZEROS$1=Buffer$u.alloc(128);function Hmac$2(t,e){Base$3.call(this,"digest"),typeof e=="string"&&(e=Buffer$u.from(e));var n=t==="sha512"||t==="sha384"?128:64;if(this._alg=t,this._key=e,e.length>n){var a=t==="rmd160"?new RIPEMD160$2:sha$5(t);e=a.update(e).digest()}else e.length<n&&(e=Buffer$u.concat([e,ZEROS$1],n));for(var o=this._ipad=Buffer$u.allocUnsafe(n),l=this._opad=Buffer$u.allocUnsafe(n),u=0;u<n;u++)o[u]=e[u]^54,l[u]=e[u]^92;this._hash=t==="rmd160"?new RIPEMD160$2:sha$5(t),this._hash.update(o)}inherits$k(Hmac$2,Base$3);Hmac$2.prototype._update=function(t){this._hash.update(t)};Hmac$2.prototype._final=function(){var t=this._hash.digest(),e=this._alg==="rmd160"?new RIPEMD160$2:sha$5(this._alg);return e.update(this._opad).update(t).digest()};var browser$d=function(e,n){return e=e.toLowerCase(),e==="rmd160"||e==="ripemd160"?new Hmac$2("rmd160",n):e==="md5"?new Legacy(md5$1,n):new Hmac$2(e,n)},algosExports={},algos={get exports(){return algosExports},set exports(t){algosExports=t}};const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$7={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384$1={sign:"ecdsa",hash:"sha384",id:""},sha512$2={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$7,sha224,sha384:sha384$1,sha512:sha512$2,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};(function(t){t.exports=require$$6})(algos);var browser$c={},MAX_ALLOC=Math.pow(2,30)-1,precondition=function(t,e){if(typeof t!="number")throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if(typeof e!="number")throw new TypeError("Key length not a number");if(e<0||e>MAX_ALLOC||e!==e)throw new TypeError("Bad key length")},defaultEncoding$2;if(commonjsGlobal.process&&commonjsGlobal.process.browser)defaultEncoding$2="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){var pVersionMajor=parseInt(browser$1$1.version.split(".")[0].slice(1),10);defaultEncoding$2=pVersionMajor>=6?"utf-8":"binary"}else defaultEncoding$2="utf-8";var defaultEncoding_1=defaultEncoding$2,Buffer$t=safeBufferExports.Buffer,toBuffer$4=function(t,e,n){if(Buffer$t.isBuffer(t))return t;if(typeof t=="string")return Buffer$t.from(t,e);if(ArrayBuffer.isView(t))return Buffer$t.from(t.buffer);throw new TypeError(n+" must be a string, a Buffer, a typed array or a DataView")},md5=md5$2,RIPEMD160$1=ripemd160$1,sha$4=sha_jsExports,Buffer$s=safeBufferExports.Buffer,checkParameters$1=precondition,defaultEncoding$1=defaultEncoding_1,toBuffer$3=toBuffer$4,ZEROS=Buffer$s.alloc(128),sizes={md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,rmd160:20,ripemd160:20};function Hmac$1(t,e,n){var a=getDigest(t),o=t==="sha512"||t==="sha384"?128:64;e.length>o?e=a(e):e.length<o&&(e=Buffer$s.concat([e,ZEROS],o));for(var l=Buffer$s.allocUnsafe(o+sizes[t]),u=Buffer$s.allocUnsafe(o+sizes[t]),d=0;d<o;d++)l[d]=e[d]^54,u[d]=e[d]^92;var m=Buffer$s.allocUnsafe(o+n+4);l.copy(m,0,0,o),this.ipad1=m,this.ipad2=l,this.opad=u,this.alg=t,this.blocksize=o,this.hash=a,this.size=sizes[t]}Hmac$1.prototype.run=function(t,e){t.copy(e,this.blocksize);var n=this.hash(e);return n.copy(this.opad,this.blocksize),this.hash(this.opad)};function getDigest(t){function e(a){return sha$4(t).update(a).digest()}function n(a){return new RIPEMD160$1().update(a).digest()}return t==="rmd160"||t==="ripemd160"?n:t==="md5"?md5:e}function pbkdf2$3(t,e,n,a,o){checkParameters$1(n,a),t=toBuffer$3(t,defaultEncoding$1,"Password"),e=toBuffer$3(e,defaultEncoding$1,"Salt"),o=o||"sha1";var l=new Hmac$1(o,t,e.length),u=Buffer$s.allocUnsafe(a),d=Buffer$s.allocUnsafe(e.length+4);e.copy(d,0,0,e.length);for(var m=0,y=sizes[o],b=Math.ceil(a/y),_=1;_<=b;_++){d.writeUInt32BE(_,e.length);for(var w=l.run(d,l.ipad1),E=w,A=1;A<n;A++){E=l.run(E,l.ipad2);for(var C=0;C<y;C++)w[C]^=E[C]}w.copy(u,m),m+=y}return u}var syncBrowser=pbkdf2$3,Buffer$r=safeBufferExports.Buffer,checkParameters=precondition,defaultEncoding=defaultEncoding_1,sync$1=syncBrowser,toBuffer$2=toBuffer$4,ZERO_BUF,subtle=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,toBrowser={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},checks=[];function checkNative(t){if(commonjsGlobal.process&&!commonjsGlobal.process.browser||!subtle||!subtle.importKey||!subtle.deriveBits)return Promise.resolve(!1);if(checks[t]!==void 0)return checks[t];ZERO_BUF=ZERO_BUF||Buffer$r.alloc(8);var e=browserPbkdf2(ZERO_BUF,ZERO_BUF,10,128,t).then(function(){return!0}).catch(function(){return!1});return checks[t]=e,e}var nextTick$1;function getNextTick(){return nextTick$1||(commonjsGlobal.process&&commonjsGlobal.process.nextTick?nextTick$1=commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?nextTick$1=commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?nextTick$1=commonjsGlobal.setImmediate:nextTick$1=commonjsGlobal.setTimeout,nextTick$1)}function browserPbkdf2(t,e,n,a,o){return subtle.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(l){return subtle.deriveBits({name:"PBKDF2",salt:e,iterations:n,hash:{name:o}},l,a<<3)}).then(function(l){return Buffer$r.from(l)})}function resolvePromise(t,e){t.then(function(n){getNextTick()(function(){e(null,n)})},function(n){getNextTick()(function(){e(n)})})}var async=function(t,e,n,a,o,l){typeof o=="function"&&(l=o,o=void 0),o=o||"sha1";var u=toBrowser[o.toLowerCase()];if(!u||typeof commonjsGlobal.Promise!="function"){getNextTick()(function(){var d;try{d=sync$1(t,e,n,a,o)}catch(m){return l(m)}l(null,d)});return}if(checkParameters(n,a),t=toBuffer$2(t,defaultEncoding,"Password"),e=toBuffer$2(e,defaultEncoding,"Salt"),typeof l!="function")throw new Error("No callback provided to pbkdf2");resolvePromise(checkNative(u).then(function(d){return d?browserPbkdf2(t,e,n,a,u):sync$1(t,e,n,a,o)}),l)};browser$c.pbkdf2=async;browser$c.pbkdf2Sync=syncBrowser;var browser$b={},des$2={},utils$r={};utils$r.readUInt32BE=function(e,n){var a=e[0+n]<<24|e[1+n]<<16|e[2+n]<<8|e[3+n];return a>>>0};utils$r.writeUInt32BE=function(e,n,a){e[0+a]=n>>>24,e[1+a]=n>>>16&255,e[2+a]=n>>>8&255,e[3+a]=n&255};utils$r.ip=function(e,n,a,o){for(var l=0,u=0,d=6;d>=0;d-=2){for(var m=0;m<=24;m+=8)l<<=1,l|=n>>>m+d&1;for(var m=0;m<=24;m+=8)l<<=1,l|=e>>>m+d&1}for(var d=6;d>=0;d-=2){for(var m=1;m<=25;m+=8)u<<=1,u|=n>>>m+d&1;for(var m=1;m<=25;m+=8)u<<=1,u|=e>>>m+d&1}a[o+0]=l>>>0,a[o+1]=u>>>0};utils$r.rip=function(e,n,a,o){for(var l=0,u=0,d=0;d<4;d++)for(var m=24;m>=0;m-=8)l<<=1,l|=n>>>m+d&1,l<<=1,l|=e>>>m+d&1;for(var d=4;d<8;d++)for(var m=24;m>=0;m-=8)u<<=1,u|=n>>>m+d&1,u<<=1,u|=e>>>m+d&1;a[o+0]=l>>>0,a[o+1]=u>>>0};utils$r.pc1=function(e,n,a,o){for(var l=0,u=0,d=7;d>=5;d--){for(var m=0;m<=24;m+=8)l<<=1,l|=n>>m+d&1;for(var m=0;m<=24;m+=8)l<<=1,l|=e>>m+d&1}for(var m=0;m<=24;m+=8)l<<=1,l|=n>>m+d&1;for(var d=1;d<=3;d++){for(var m=0;m<=24;m+=8)u<<=1,u|=n>>m+d&1;for(var m=0;m<=24;m+=8)u<<=1,u|=e>>m+d&1}for(var m=0;m<=24;m+=8)u<<=1,u|=e>>m+d&1;a[o+0]=l>>>0,a[o+1]=u>>>0};utils$r.r28shl=function(e,n){return e<<n&268435455|e>>>28-n};var pc2table=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$r.pc2=function(e,n,a,o){for(var l=0,u=0,d=pc2table.length>>>1,m=0;m<d;m++)l<<=1,l|=e>>>pc2table[m]&1;for(var m=d;m<pc2table.length;m++)u<<=1,u|=n>>>pc2table[m]&1;a[o+0]=l>>>0,a[o+1]=u>>>0};utils$r.expand=function(e,n,a){var o=0,l=0;o=(e&1)<<5|e>>>27;for(var u=23;u>=15;u-=4)o<<=6,o|=e>>>u&63;for(var u=11;u>=3;u-=4)l|=e>>>u&63,l<<=6;l|=(e&31)<<1|e>>>31,n[a+0]=o>>>0,n[a+1]=l>>>0};var sTable=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$r.substitute=function(e,n){for(var a=0,o=0;o<4;o++){var l=e>>>18-o*6&63,u=sTable[o*64+l];a<<=4,a|=u}for(var o=0;o<4;o++){var l=n>>>18-o*6&63,u=sTable[4*64+o*64+l];a<<=4,a|=u}return a>>>0};var permuteTable=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];utils$r.permute=function(e){for(var n=0,a=0;a<permuteTable.length;a++)n<<=1,n|=e>>>permuteTable[a]&1;return n>>>0};utils$r.padSplit=function(e,n,a){for(var o=e.toString(2);o.length<n;)o="0"+o;for(var l=[],u=0;u<n;u+=a)l.push(o.slice(u,u+a));return l.join(" ")};var minimalisticAssert$1=assert$q;function assert$q(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$q.equal=function(e,n,a){if(e!=n)throw new Error(a||"Assertion failed: "+e+" != "+n)};var assert$p=minimalisticAssert$1;function Cipher$3(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0}var cipher=Cipher$3;Cipher$3.prototype._init=function(){};Cipher$3.prototype.update=function(e){return e.length===0?[]:this.type==="decrypt"?this._updateDecrypt(e):this._updateEncrypt(e)};Cipher$3.prototype._buffer=function(e,n){for(var a=Math.min(this.buffer.length-this.bufferOff,e.length-n),o=0;o<a;o++)this.buffer[this.bufferOff+o]=e[n+o];return this.bufferOff+=a,a};Cipher$3.prototype._flushBuffer=function(e,n){return this._update(this.buffer,0,e,n),this.bufferOff=0,this.blockSize};Cipher$3.prototype._updateEncrypt=function(e){var n=0,a=0,o=(this.bufferOff+e.length)/this.blockSize|0,l=new Array(o*this.blockSize);this.bufferOff!==0&&(n+=this._buffer(e,n),this.bufferOff===this.buffer.length&&(a+=this._flushBuffer(l,a)));for(var u=e.length-(e.length-n)%this.blockSize;n<u;n+=this.blockSize)this._update(e,n,l,a),a+=this.blockSize;for(;n<e.length;n++,this.bufferOff++)this.buffer[this.bufferOff]=e[n];return l};Cipher$3.prototype._updateDecrypt=function(e){for(var n=0,a=0,o=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,l=new Array(o*this.blockSize);o>0;o--)n+=this._buffer(e,n),a+=this._flushBuffer(l,a);return n+=this._buffer(e,n),l};Cipher$3.prototype.final=function(e){var n;e&&(n=this.update(e));var a;return this.type==="encrypt"?a=this._finalEncrypt():a=this._finalDecrypt(),n?n.concat(a):a};Cipher$3.prototype._pad=function(e,n){if(n===0)return!1;for(;n<e.length;)e[n++]=0;return!0};Cipher$3.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e};Cipher$3.prototype._unpad=function(e){return e};Cipher$3.prototype._finalDecrypt=function(){assert$p.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var e=new Array(this.blockSize);return this._flushBuffer(e,0),this._unpad(e)};var assert$o=minimalisticAssert$1,inherits$j=inherits_browserExports,utils$q=utils$r,Cipher$2=cipher;function DESState(){this.tmp=new Array(2),this.keys=null}function DES$3(t){Cipher$2.call(this,t);var e=new DESState;this._desState=e,this.deriveKeys(e,t.key)}inherits$j(DES$3,Cipher$2);var des$1=DES$3;DES$3.create=function(e){return new DES$3(e)};var shiftTable=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];DES$3.prototype.deriveKeys=function(e,n){e.keys=new Array(16*2),assert$o.equal(n.length,this.blockSize,"Invalid key length");var a=utils$q.readUInt32BE(n,0),o=utils$q.readUInt32BE(n,4);utils$q.pc1(a,o,e.tmp,0),a=e.tmp[0],o=e.tmp[1];for(var l=0;l<e.keys.length;l+=2){var u=shiftTable[l>>>1];a=utils$q.r28shl(a,u),o=utils$q.r28shl(o,u),utils$q.pc2(a,o,e.keys,l)}};DES$3.prototype._update=function(e,n,a,o){var l=this._desState,u=utils$q.readUInt32BE(e,n),d=utils$q.readUInt32BE(e,n+4);utils$q.ip(u,d,l.tmp,0),u=l.tmp[0],d=l.tmp[1],this.type==="encrypt"?this._encrypt(l,u,d,l.tmp,0):this._decrypt(l,u,d,l.tmp,0),u=l.tmp[0],d=l.tmp[1],utils$q.writeUInt32BE(a,u,o),utils$q.writeUInt32BE(a,d,o+4)};DES$3.prototype._pad=function(e,n){for(var a=e.length-n,o=n;o<e.length;o++)e[o]=a;return!0};DES$3.prototype._unpad=function(e){for(var n=e[e.length-1],a=e.length-n;a<e.length;a++)assert$o.equal(e[a],n);return e.slice(0,e.length-n)};DES$3.prototype._encrypt=function(e,n,a,o,l){for(var u=n,d=a,m=0;m<e.keys.length;m+=2){var y=e.keys[m],b=e.keys[m+1];utils$q.expand(d,e.tmp,0),y^=e.tmp[0],b^=e.tmp[1];var _=utils$q.substitute(y,b),w=utils$q.permute(_),E=d;d=(u^w)>>>0,u=E}utils$q.rip(d,u,o,l)};DES$3.prototype._decrypt=function(e,n,a,o,l){for(var u=a,d=n,m=e.keys.length-2;m>=0;m-=2){var y=e.keys[m],b=e.keys[m+1];utils$q.expand(u,e.tmp,0),y^=e.tmp[0],b^=e.tmp[1];var _=utils$q.substitute(y,b),w=utils$q.permute(_),E=u;u=(d^w)>>>0,d=E}utils$q.rip(u,d,o,l)};var cbc$1={},assert$n=minimalisticAssert$1,inherits$i=inherits_browserExports,proto={};function CBCState(t){assert$n.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}function instantiate(t){function e(l){t.call(this,l),this._cbcInit()}inherits$i(e,t);for(var n=Object.keys(proto),a=0;a<n.length;a++){var o=n[a];e.prototype[o]=proto[o]}return e.create=function(u){return new e(u)},e}cbc$1.instantiate=instantiate;proto._cbcInit=function(){var e=new CBCState(this.options.iv);this._cbcState=e};proto._update=function(e,n,a,o){var l=this._cbcState,u=this.constructor.super_.prototype,d=l.iv;if(this.type==="encrypt"){for(var m=0;m<this.blockSize;m++)d[m]^=e[n+m];u._update.call(this,d,0,a,o);for(var m=0;m<this.blockSize;m++)d[m]=a[o+m]}else{u._update.call(this,e,n,a,o);for(var m=0;m<this.blockSize;m++)a[o+m]^=d[m];for(var m=0;m<this.blockSize;m++)d[m]=e[n+m]}};var assert$m=minimalisticAssert$1,inherits$h=inherits_browserExports,Cipher$1=cipher,DES$2=des$1;function EDEState(t,e){assert$m.equal(e.length,24,"Invalid key length");var n=e.slice(0,8),a=e.slice(8,16),o=e.slice(16,24);t==="encrypt"?this.ciphers=[DES$2.create({type:"encrypt",key:n}),DES$2.create({type:"decrypt",key:a}),DES$2.create({type:"encrypt",key:o})]:this.ciphers=[DES$2.create({type:"decrypt",key:o}),DES$2.create({type:"encrypt",key:a}),DES$2.create({type:"decrypt",key:n})]}function EDE(t){Cipher$1.call(this,t);var e=new EDEState(this.type,this.options.key);this._edeState=e}inherits$h(EDE,Cipher$1);var ede=EDE;EDE.create=function(e){return new EDE(e)};EDE.prototype._update=function(e,n,a,o){var l=this._edeState;l.ciphers[0]._update(e,n,a,o),l.ciphers[1]._update(a,o,a,o),l.ciphers[2]._update(a,o,a,o)};EDE.prototype._pad=DES$2.prototype._pad;EDE.prototype._unpad=DES$2.prototype._unpad;des$2.utils=utils$r;des$2.Cipher=cipher;des$2.DES=des$1;des$2.CBC=cbc$1;des$2.EDE=ede;var CipherBase=cipherBase,des=des$2,inherits$g=inherits_browserExports,Buffer$q=safeBufferExports.Buffer,modes$4={"des-ede3-cbc":des.CBC.instantiate(des.EDE),"des-ede3":des.EDE,"des-ede-cbc":des.CBC.instantiate(des.EDE),"des-ede":des.EDE,"des-cbc":des.CBC.instantiate(des.DES),"des-ecb":des.DES};modes$4.des=modes$4["des-cbc"];modes$4.des3=modes$4["des-ede3-cbc"];var browserifyDes=DES$1;inherits$g(DES$1,CipherBase);function DES$1(t){CipherBase.call(this);var e=t.mode.toLowerCase(),n=modes$4[e],a;t.decrypt?a="decrypt":a="encrypt";var o=t.key;Buffer$q.isBuffer(o)||(o=Buffer$q.from(o)),(e==="des-ede"||e==="des-ede-cbc")&&(o=Buffer$q.concat([o,o.slice(0,8)]));var l=t.iv;Buffer$q.isBuffer(l)||(l=Buffer$q.from(l)),this._des=n.create({key:o,iv:l,type:a})}DES$1.prototype._update=function(t){return Buffer$q.from(this._des.update(t))};DES$1.prototype._final=function(){return Buffer$q.from(this._des.final())};var browser$a={},encrypter={},ecb={};ecb.encrypt=function(t,e){return t._cipher.encryptBlock(e)};ecb.decrypt=function(t,e){return t._cipher.decryptBlock(e)};var cbc={},bufferXor=function(e,n){for(var a=Math.min(e.length,n.length),o=new Buffer$y(a),l=0;l<a;++l)o[l]=e[l]^n[l];return o},xor$7=bufferXor;cbc.encrypt=function(t,e){var n=xor$7(e,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev};cbc.decrypt=function(t,e){var n=t._prev;t._prev=e;var a=t._cipher.decryptBlock(e);return xor$7(a,n)};var cfb={},Buffer$p=safeBufferExports.Buffer,xor$6=bufferXor;function encryptStart(t,e,n){var a=e.length,o=xor$6(e,t._cache);return t._cache=t._cache.slice(a),t._prev=Buffer$p.concat([t._prev,n?e:o]),o}cfb.encrypt=function(t,e,n){for(var a=Buffer$p.allocUnsafe(0),o;e.length;)if(t._cache.length===0&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=Buffer$p.allocUnsafe(0)),t._cache.length<=e.length)o=t._cache.length,a=Buffer$p.concat([a,encryptStart(t,e.slice(0,o),n)]),e=e.slice(o);else{a=Buffer$p.concat([a,encryptStart(t,e,n)]);break}return a};var cfb8={},Buffer$o=safeBufferExports.Buffer;function encryptByte$1(t,e,n){var a=t._cipher.encryptBlock(t._prev),o=a[0]^e;return t._prev=Buffer$o.concat([t._prev.slice(1),Buffer$o.from([n?e:o])]),o}cfb8.encrypt=function(t,e,n){for(var a=e.length,o=Buffer$o.allocUnsafe(a),l=-1;++l<a;)o[l]=encryptByte$1(t,e[l],n);return o};var cfb1={},Buffer$n=safeBufferExports.Buffer;function encryptByte(t,e,n){for(var a,o=-1,l=8,u=0,d,m;++o<l;)a=t._cipher.encryptBlock(t._prev),d=e&1<<7-o?128:0,m=a[0]^d,u+=(m&128)>>o%8,t._prev=shiftIn(t._prev,n?d:m);return u}function shiftIn(t,e){var n=t.length,a=-1,o=Buffer$n.allocUnsafe(t.length);for(t=Buffer$n.concat([t,Buffer$n.from([e])]);++a<n;)o[a]=t[a]<<1|t[a+1]>>7;return o}cfb1.encrypt=function(t,e,n){for(var a=e.length,o=Buffer$n.allocUnsafe(a),l=-1;++l<a;)o[l]=encryptByte(t,e[l],n);return o};var ofb={},xor$5=bufferXor;function getBlock$1(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}ofb.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=Buffer$y.concat([t._cache,getBlock$1(t)]);var n=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),xor$5(e,n)};var ctr={};function incr32$2(t){for(var e=t.length,n;e--;)if(n=t.readUInt8(e),n===255)t.writeUInt8(0,e);else{n++,t.writeUInt8(n,e);break}}var incr32_1=incr32$2,xor$4=bufferXor,Buffer$m=safeBufferExports.Buffer,incr32$1=incr32_1;function getBlock(t){var e=t._cipher.encryptBlockRaw(t._prev);return incr32$1(t._prev),e}var blockSize=16;ctr.encrypt=function(t,e){var n=Math.ceil(e.length/blockSize),a=t._cache.length;t._cache=Buffer$m.concat([t._cache,Buffer$m.allocUnsafe(n*blockSize)]);for(var o=0;o<n;o++){var l=getBlock(t),u=a+o*blockSize;t._cache.writeUInt32BE(l[0],u+0),t._cache.writeUInt32BE(l[1],u+4),t._cache.writeUInt32BE(l[2],u+8),t._cache.writeUInt32BE(l[3],u+12)}var d=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),xor$4(e,d)};const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2$1={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128,aes192,aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modeModules={ECB:ecb,CBC:cbc,CFB:cfb,CFB8:cfb8,CFB1:cfb1,OFB:ofb,CTR:ctr,GCM:ctr},modes$3=require$$2$1;for(var key$4 in modes$3)modes$3[key$4].module=modeModules[modes$3[key$4].mode];var modes_1=modes$3,aes$6={},Buffer$l=safeBufferExports.Buffer;function asUInt32Array(t){Buffer$l.isBuffer(t)||(t=Buffer$l.from(t));for(var e=t.length/4|0,n=new Array(e),a=0;a<e;a++)n[a]=t.readUInt32BE(a*4);return n}function scrubVec(t){for(var e=0;e<t.length;t++)t[e]=0}function cryptBlock(t,e,n,a,o){for(var l=n[0],u=n[1],d=n[2],m=n[3],y=t[0]^e[0],b=t[1]^e[1],_=t[2]^e[2],w=t[3]^e[3],E,A,C,k,B=4,D=1;D<o;D++)E=l[y>>>24]^u[b>>>16&255]^d[_>>>8&255]^m[w&255]^e[B++],A=l[b>>>24]^u[_>>>16&255]^d[w>>>8&255]^m[y&255]^e[B++],C=l[_>>>24]^u[w>>>16&255]^d[y>>>8&255]^m[b&255]^e[B++],k=l[w>>>24]^u[y>>>16&255]^d[b>>>8&255]^m[_&255]^e[B++],y=E,b=A,_=C,w=k;return E=(a[y>>>24]<<24|a[b>>>16&255]<<16|a[_>>>8&255]<<8|a[w&255])^e[B++],A=(a[b>>>24]<<24|a[_>>>16&255]<<16|a[w>>>8&255]<<8|a[y&255])^e[B++],C=(a[_>>>24]<<24|a[w>>>16&255]<<16|a[y>>>8&255]<<8|a[b&255])^e[B++],k=(a[w>>>24]<<24|a[y>>>16&255]<<16|a[b>>>8&255]<<8|a[_&255])^e[B++],E=E>>>0,A=A>>>0,C=C>>>0,k=k>>>0,[E,A,C,k]}var RCON=[0,1,2,4,8,16,32,64,128,27,54],G=function(){for(var t=new Array(256),e=0;e<256;e++)e<128?t[e]=e<<1:t[e]=e<<1^283;for(var n=[],a=[],o=[[],[],[],[]],l=[[],[],[],[]],u=0,d=0,m=0;m<256;++m){var y=d^d<<1^d<<2^d<<3^d<<4;y=y>>>8^y&255^99,n[u]=y,a[y]=u;var b=t[u],_=t[b],w=t[_],E=t[y]*257^y*16843008;o[0][u]=E<<24|E>>>8,o[1][u]=E<<16|E>>>16,o[2][u]=E<<8|E>>>24,o[3][u]=E,E=w*16843009^_*65537^b*257^u*16843008,l[0][y]=E<<24|E>>>8,l[1][y]=E<<16|E>>>16,l[2][y]=E<<8|E>>>24,l[3][y]=E,u===0?u=d=1:(u=b^t[t[t[w^b]]],d^=t[t[d]])}return{SBOX:n,INV_SBOX:a,SUB_MIX:o,INV_SUB_MIX:l}}();function AES(t){this._key=asUInt32Array(t),this._reset()}AES.blockSize=4*4;AES.keySize=256/8;AES.prototype.blockSize=AES.blockSize;AES.prototype.keySize=AES.keySize;AES.prototype._reset=function(){for(var t=this._key,e=t.length,n=e+6,a=(n+1)*4,o=[],l=0;l<e;l++)o[l]=t[l];for(l=e;l<a;l++){var u=o[l-1];l%e===0?(u=u<<8|u>>>24,u=G.SBOX[u>>>24]<<24|G.SBOX[u>>>16&255]<<16|G.SBOX[u>>>8&255]<<8|G.SBOX[u&255],u^=RCON[l/e|0]<<24):e>6&&l%e===4&&(u=G.SBOX[u>>>24]<<24|G.SBOX[u>>>16&255]<<16|G.SBOX[u>>>8&255]<<8|G.SBOX[u&255]),o[l]=o[l-e]^u}for(var d=[],m=0;m<a;m++){var y=a-m,b=o[y-(m%4?0:4)];m<4||y<=4?d[m]=b:d[m]=G.INV_SUB_MIX[0][G.SBOX[b>>>24]]^G.INV_SUB_MIX[1][G.SBOX[b>>>16&255]]^G.INV_SUB_MIX[2][G.SBOX[b>>>8&255]]^G.INV_SUB_MIX[3][G.SBOX[b&255]]}this._nRounds=n,this._keySchedule=o,this._invKeySchedule=d};AES.prototype.encryptBlockRaw=function(t){return t=asUInt32Array(t),cryptBlock(t,this._keySchedule,G.SUB_MIX,G.SBOX,this._nRounds)};AES.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),n=Buffer$l.allocUnsafe(16);return n.writeUInt32BE(e[0],0),n.writeUInt32BE(e[1],4),n.writeUInt32BE(e[2],8),n.writeUInt32BE(e[3],12),n};AES.prototype.decryptBlock=function(t){t=asUInt32Array(t);var e=t[1];t[1]=t[3],t[3]=e;var n=cryptBlock(t,this._invKeySchedule,G.INV_SUB_MIX,G.INV_SBOX,this._nRounds),a=Buffer$l.allocUnsafe(16);return a.writeUInt32BE(n[0],0),a.writeUInt32BE(n[3],4),a.writeUInt32BE(n[2],8),a.writeUInt32BE(n[1],12),a};AES.prototype.scrub=function(){scrubVec(this._keySchedule),scrubVec(this._invKeySchedule),scrubVec(this._key)};aes$6.AES=AES;var Buffer$k=safeBufferExports.Buffer,ZEROES=Buffer$k.alloc(16,0);function toArray$2(t){return[t.readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)]}function fromArray$1(t){var e=Buffer$k.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function GHASH$1(t){this.h=t,this.state=Buffer$k.alloc(16,0),this.cache=Buffer$k.allocUnsafe(0)}GHASH$1.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()};GHASH$1.prototype._multiply=function(){for(var t=toArray$2(this.h),e=[0,0,0,0],n,a,o,l=-1;++l<128;){for(a=(this.state[~~(l/8)]&1<<7-l%8)!==0,a&&(e[0]^=t[0],e[1]^=t[1],e[2]^=t[2],e[3]^=t[3]),o=(t[3]&1)!==0,n=3;n>0;n--)t[n]=t[n]>>>1|(t[n-1]&1)<<31;t[0]=t[0]>>>1,o&&(t[0]=t[0]^225<<24)}this.state=fromArray$1(e)};GHASH$1.prototype.update=function(t){this.cache=Buffer$k.concat([this.cache,t]);for(var e;this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)};GHASH$1.prototype.final=function(t,e){return this.cache.length&&this.ghash(Buffer$k.concat([this.cache,ZEROES],16)),this.ghash(fromArray$1([0,t,0,e])),this.state};var ghash=GHASH$1,aes$5=aes$6,Buffer$j=safeBufferExports.Buffer,Transform$3=cipherBase,inherits$f=inherits_browserExports,GHASH=ghash,xor$3=bufferXor,incr32=incr32_1;function xorTest(t,e){var n=0;t.length!==e.length&&n++;for(var a=Math.min(t.length,e.length),o=0;o<a;++o)n+=t[o]^e[o];return n}function calcIv(t,e,n){if(e.length===12)return t._finID=Buffer$j.concat([e,Buffer$j.from([0,0,0,1])]),Buffer$j.concat([e,Buffer$j.from([0,0,0,2])]);var a=new GHASH(n),o=e.length,l=o%16;a.update(e),l&&(l=16-l,a.update(Buffer$j.alloc(l,0))),a.update(Buffer$j.alloc(8,0));var u=o*8,d=Buffer$j.alloc(8);d.writeUIntBE(u,0,8),a.update(d),t._finID=a.state;var m=Buffer$j.from(t._finID);return incr32(m),m}function StreamCipher$3(t,e,n,a){Transform$3.call(this);var o=Buffer$j.alloc(4,0);this._cipher=new aes$5.AES(e);var l=this._cipher.encryptBlock(o);this._ghash=new GHASH(l),n=calcIv(this,n,l),this._prev=Buffer$j.from(n),this._cache=Buffer$j.allocUnsafe(0),this._secCache=Buffer$j.allocUnsafe(0),this._decrypt=a,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}inherits$f(StreamCipher$3,Transform$3);StreamCipher$3.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=Buffer$j.alloc(e,0),this._ghash.update(e))}this._called=!0;var n=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(n),this._len+=t.length,n};StreamCipher$3.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=xor$3(this._ghash.final(this._alen*8,this._len*8),this._cipher.encryptBlock(this._finID));if(this._decrypt&&xorTest(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()};StreamCipher$3.prototype.getAuthTag=function(){if(this._decrypt||!Buffer$j.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag};StreamCipher$3.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e};StreamCipher$3.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length};var authCipher=StreamCipher$3,aes$4=aes$6,Buffer$i=safeBufferExports.Buffer,Transform$2=cipherBase,inherits$e=inherits_browserExports;function StreamCipher$2(t,e,n,a){Transform$2.call(this),this._cipher=new aes$4.AES(e),this._prev=Buffer$i.from(n),this._cache=Buffer$i.allocUnsafe(0),this._secCache=Buffer$i.allocUnsafe(0),this._decrypt=a,this._mode=t}inherits$e(StreamCipher$2,Transform$2);StreamCipher$2.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)};StreamCipher$2.prototype._final=function(){this._cipher.scrub()};var streamCipher=StreamCipher$2,Buffer$h=safeBufferExports.Buffer,MD5=md5_js;function EVP_BytesToKey(t,e,n,a){if(Buffer$h.isBuffer(t)||(t=Buffer$h.from(t,"binary")),e&&(Buffer$h.isBuffer(e)||(e=Buffer$h.from(e,"binary")),e.length!==8))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=n/8,l=Buffer$h.alloc(o),u=Buffer$h.alloc(a||0),d=Buffer$h.alloc(0);o>0||a>0;){var m=new MD5;m.update(d),m.update(t),e&&m.update(e),d=m.digest();var y=0;if(o>0){var b=l.length-o;y=Math.min(o,d.length),d.copy(l,b,0,y),o-=y}if(y<d.length&&a>0){var _=u.length-a,w=Math.min(a,d.length-y);d.copy(u,_,y,y+w),a-=w}}return d.fill(0),{key:l,iv:u}}var evp_bytestokey=EVP_BytesToKey,MODES$1=modes_1,AuthCipher$1=authCipher,Buffer$g=safeBufferExports.Buffer,StreamCipher$1=streamCipher,Transform$1=cipherBase,aes$3=aes$6,ebtk$2=evp_bytestokey,inherits$d=inherits_browserExports;function Cipher(t,e,n){Transform$1.call(this),this._cache=new Splitter$1,this._cipher=new aes$3.AES(e),this._prev=Buffer$g.from(n),this._mode=t,this._autopadding=!0}inherits$d(Cipher,Transform$1);Cipher.prototype._update=function(t){this._cache.add(t);for(var e,n,a=[];e=this._cache.get();)n=this._mode.encrypt(this,e),a.push(n);return Buffer$g.concat(a)};var PADDING=Buffer$g.alloc(16,16);Cipher.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(PADDING))throw this._cipher.scrub(),new Error("data not multiple of block length")};Cipher.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function Splitter$1(){this.cache=Buffer$g.allocUnsafe(0)}Splitter$1.prototype.add=function(t){this.cache=Buffer$g.concat([this.cache,t])};Splitter$1.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null};Splitter$1.prototype.flush=function(){for(var t=16-this.cache.length,e=Buffer$g.allocUnsafe(t),n=-1;++n<t;)e.writeUInt8(t,n);return Buffer$g.concat([this.cache,e])};function createCipheriv$1(t,e,n){var a=MODES$1[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if(typeof e=="string"&&(e=Buffer$g.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if(typeof n=="string"&&(n=Buffer$g.from(n)),a.mode!=="GCM"&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);return a.type==="stream"?new StreamCipher$1(a.module,e,n):a.type==="auth"?new AuthCipher$1(a.module,e,n):new Cipher(a.module,e,n)}function createCipher$2(t,e){var n=MODES$1[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var a=ebtk$2(e,!1,n.key,n.iv);return createCipheriv$1(t,a.key,a.iv)}encrypter.createCipheriv=createCipheriv$1;encrypter.createCipher=createCipher$2;var decrypter={},AuthCipher=authCipher,Buffer$f=safeBufferExports.Buffer,MODES=modes_1,StreamCipher=streamCipher,Transform=cipherBase,aes$2=aes$6,ebtk$1=evp_bytestokey,inherits$c=inherits_browserExports;function Decipher(t,e,n){Transform.call(this),this._cache=new Splitter,this._last=void 0,this._cipher=new aes$2.AES(e),this._prev=Buffer$f.from(n),this._mode=t,this._autopadding=!0}inherits$c(Decipher,Transform);Decipher.prototype._update=function(t){this._cache.add(t);for(var e,n,a=[];e=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,e),a.push(n);return Buffer$f.concat(a)};Decipher.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return unpad(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")};Decipher.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this};function Splitter(){this.cache=Buffer$f.allocUnsafe(0)}Splitter.prototype.add=function(t){this.cache=Buffer$f.concat([this.cache,t])};Splitter.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null};Splitter.prototype.flush=function(){if(this.cache.length)return this.cache};function unpad(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var n=-1;++n<e;)if(t[n+(16-e)]!==e)throw new Error("unable to decrypt data");if(e!==16)return t.slice(0,16-e)}function createDecipheriv$1(t,e,n){var a=MODES[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if(typeof n=="string"&&(n=Buffer$f.from(n)),a.mode!=="GCM"&&n.length!==a.iv)throw new TypeError("invalid iv length "+n.length);if(typeof e=="string"&&(e=Buffer$f.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return a.type==="stream"?new StreamCipher(a.module,e,n,!0):a.type==="auth"?new AuthCipher(a.module,e,n,!0):new Decipher(a.module,e,n)}function createDecipher$1(t,e){var n=MODES[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var a=ebtk$1(e,!1,n.key,n.iv);return createDecipheriv$1(t,a.key,a.iv)}decrypter.createDecipher=createDecipher$1;decrypter.createDecipheriv=createDecipheriv$1;var ciphers$2=encrypter,deciphers=decrypter,modes$2=require$$2$1;function getCiphers$1(){return Object.keys(modes$2)}browser$a.createCipher=browser$a.Cipher=ciphers$2.createCipher;browser$a.createCipheriv=browser$a.Cipheriv=ciphers$2.createCipheriv;browser$a.createDecipher=browser$a.Decipher=deciphers.createDecipher;browser$a.createDecipheriv=browser$a.Decipheriv=deciphers.createDecipheriv;browser$a.listCiphers=browser$a.getCiphers=getCiphers$1;var modes$1={};(function(t){t["des-ecb"]={key:8,iv:0},t["des-cbc"]=t.des={key:8,iv:8},t["des-ede3-cbc"]=t.des3={key:24,iv:8},t["des-ede3"]={key:24,iv:0},t["des-ede-cbc"]={key:16,iv:8},t["des-ede"]={key:16,iv:0}})(modes$1);var DES=browserifyDes,aes$1=browser$a,aesModes=modes_1,desModes=modes$1,ebtk=evp_bytestokey;function createCipher$1(t,e){t=t.toLowerCase();var n,a;if(aesModes[t])n=aesModes[t].key,a=aesModes[t].iv;else if(desModes[t])n=desModes[t].key*8,a=desModes[t].iv;else throw new TypeError("invalid suite type");var o=ebtk(e,!1,n,a);return createCipheriv(t,o.key,o.iv)}function createDecipher(t,e){t=t.toLowerCase();var n,a;if(aesModes[t])n=aesModes[t].key,a=aesModes[t].iv;else if(desModes[t])n=desModes[t].key*8,a=desModes[t].iv;else throw new TypeError("invalid suite type");var o=ebtk(e,!1,n,a);return createDecipheriv(t,o.key,o.iv)}function createCipheriv(t,e,n){if(t=t.toLowerCase(),aesModes[t])return aes$1.createCipheriv(t,e,n);if(desModes[t])return new DES({key:e,iv:n,mode:t});throw new TypeError("invalid suite type")}function createDecipheriv(t,e,n){if(t=t.toLowerCase(),aesModes[t])return aes$1.createDecipheriv(t,e,n);if(desModes[t])return new DES({key:e,iv:n,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}function getCiphers(){return Object.keys(desModes).concat(aes$1.getCiphers())}browser$b.createCipher=browser$b.Cipher=createCipher$1;browser$b.createCipheriv=browser$b.Cipheriv=createCipheriv;browser$b.createDecipher=browser$b.Decipher=createDecipher;browser$b.createDecipheriv=browser$b.Decipheriv=createDecipheriv;browser$b.listCiphers=browser$b.getCiphers=getCiphers;var browser$9={},bnExports$4={},bn$4={get exports(){return bnExports$4},set exports(t){bnExports$4=t}};(function(t){(function(e,n){function a(ae,U){if(!ae)throw new Error(U||"Assertion failed")}function o(ae,U){ae.super_=U;var I=function(){};I.prototype=U.prototype,ae.prototype=new I,ae.prototype.constructor=ae}function l(ae,U,I){if(l.isBN(ae))return ae;this.negative=0,this.words=null,this.length=0,this.red=null,ae!==null&&((U==="le"||U==="be")&&(I=U,U=10),this._init(ae||0,U||10,I||"be"))}typeof e=="object"?e.exports=l:n.BN=l,l.BN=l,l.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=require$$0$2.Buffer}catch{}l.isBN=function(U){return U instanceof l?!0:U!==null&&typeof U=="object"&&U.constructor.wordSize===l.wordSize&&Array.isArray(U.words)},l.max=function(U,I){return U.cmp(I)>0?U:I},l.min=function(U,I){return U.cmp(I)<0?U:I},l.prototype._init=function(U,I,x){if(typeof U=="number")return this._initNumber(U,I,x);if(typeof U=="object")return this._initArray(U,I,x);I==="hex"&&(I=16),a(I===(I|0)&&I>=2&&I<=36),U=U.toString().replace(/\s+/g,"");var T=0;U[0]==="-"&&(T++,this.negative=1),T<U.length&&(I===16?this._parseHex(U,T,x):(this._parseBase(U,I,T),x==="le"&&this._initArray(this.toArray(),I,x)))},l.prototype._initNumber=function(U,I,x){U<0&&(this.negative=1,U=-U),U<67108864?(this.words=[U&67108863],this.length=1):U<4503599627370496?(this.words=[U&67108863,U/67108864&67108863],this.length=2):(a(U<9007199254740992),this.words=[U&67108863,U/67108864&67108863,1],this.length=3),x==="le"&&this._initArray(this.toArray(),I,x)},l.prototype._initArray=function(U,I,x){if(a(typeof U.length=="number"),U.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(U.length/3),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var M,O,z=0;if(x==="be")for(T=U.length-1,M=0;T>=0;T-=3)O=U[T]|U[T-1]<<8|U[T-2]<<16,this.words[M]|=O<<z&67108863,this.words[M+1]=O>>>26-z&67108863,z+=24,z>=26&&(z-=26,M++);else if(x==="le")for(T=0,M=0;T<U.length;T+=3)O=U[T]|U[T+1]<<8|U[T+2]<<16,this.words[M]|=O<<z&67108863,this.words[M+1]=O>>>26-z&67108863,z+=24,z>=26&&(z-=26,M++);return this.strip()};function d(ae,U){var I=ae.charCodeAt(U);return I>=65&&I<=70?I-55:I>=97&&I<=102?I-87:I-48&15}function m(ae,U,I){var x=d(ae,I);return I-1>=U&&(x|=d(ae,I-1)<<4),x}l.prototype._parseHex=function(U,I,x){this.length=Math.ceil((U.length-I)/6),this.words=new Array(this.length);for(var T=0;T<this.length;T++)this.words[T]=0;var M=0,O=0,z;if(x==="be")for(T=U.length-1;T>=I;T-=2)z=m(U,I,T)<<M,this.words[O]|=z&67108863,M>=18?(M-=18,O+=1,this.words[O]|=z>>>26):M+=8;else{var X=U.length-I;for(T=X%2===0?I+1:I;T<U.length;T+=2)z=m(U,I,T)<<M,this.words[O]|=z&67108863,M>=18?(M-=18,O+=1,this.words[O]|=z>>>26):M+=8}this.strip()};function y(ae,U,I,x){for(var T=0,M=Math.min(ae.length,I),O=U;O<M;O++){var z=ae.charCodeAt(O)-48;T*=x,z>=49?T+=z-49+10:z>=17?T+=z-17+10:T+=z}return T}l.prototype._parseBase=function(U,I,x){this.words=[0],this.length=1;for(var T=0,M=1;M<=67108863;M*=I)T++;T--,M=M/I|0;for(var O=U.length-x,z=O%T,X=Math.min(O,O-z)+x,H=0,P=x;P<X;P+=T)H=y(U,P,P+T,I),this.imuln(M),this.words[0]+H<67108864?this.words[0]+=H:this._iaddn(H);if(z!==0){var S=1;for(H=y(U,P,U.length,I),P=0;P<z;P++)S*=I;this.imuln(S),this.words[0]+H<67108864?this.words[0]+=H:this._iaddn(H)}this.strip()},l.prototype.copy=function(U){U.words=new Array(this.length);for(var I=0;I<this.length;I++)U.words[I]=this.words[I];U.length=this.length,U.negative=this.negative,U.red=this.red},l.prototype.clone=function(){var U=new l(null);return this.copy(U),U},l.prototype._expand=function(U){for(;this.length<U;)this.words[this.length++]=0;return this},l.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},l.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],_=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(U,I){U=U||10,I=I|0||1;var x;if(U===16||U==="hex"){x="";for(var T=0,M=0,O=0;O<this.length;O++){var z=this.words[O],X=((z<<T|M)&16777215).toString(16);M=z>>>24-T&16777215,M!==0||O!==this.length-1?x=b[6-X.length]+X+x:x=X+x,T+=2,T>=26&&(T-=26,O--)}for(M!==0&&(x=M.toString(16)+x);x.length%I!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}if(U===(U|0)&&U>=2&&U<=36){var H=_[U],P=w[U];x="";var S=this.clone();for(S.negative=0;!S.isZero();){var F=S.modn(P).toString(U);S=S.idivn(P),S.isZero()?x=F+x:x=b[H-F.length]+F+x}for(this.isZero()&&(x="0"+x);x.length%I!==0;)x="0"+x;return this.negative!==0&&(x="-"+x),x}a(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var U=this.words[0];return this.length===2?U+=this.words[1]*67108864:this.length===3&&this.words[2]===1?U+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-U:U},l.prototype.toJSON=function(){return this.toString(16)},l.prototype.toBuffer=function(U,I){return a(typeof u<"u"),this.toArrayLike(u,U,I)},l.prototype.toArray=function(U,I){return this.toArrayLike(Array,U,I)},l.prototype.toArrayLike=function(U,I,x){var T=this.byteLength(),M=x||Math.max(1,T);a(T<=M,"byte array longer than desired length"),a(M>0,"Requested array length <= 0"),this.strip();var O=I==="le",z=new U(M),X,H,P=this.clone();if(O){for(H=0;!P.isZero();H++)X=P.andln(255),P.iushrn(8),z[H]=X;for(;H<M;H++)z[H]=0}else{for(H=0;H<M-T;H++)z[H]=0;for(H=0;!P.isZero();H++)X=P.andln(255),P.iushrn(8),z[M-H-1]=X}return z},Math.clz32?l.prototype._countBits=function(U){return 32-Math.clz32(U)}:l.prototype._countBits=function(U){var I=U,x=0;return I>=4096&&(x+=13,I>>>=13),I>=64&&(x+=7,I>>>=7),I>=8&&(x+=4,I>>>=4),I>=2&&(x+=2,I>>>=2),x+I},l.prototype._zeroBits=function(U){if(U===0)return 26;var I=U,x=0;return I&8191||(x+=13,I>>>=13),I&127||(x+=7,I>>>=7),I&15||(x+=4,I>>>=4),I&3||(x+=2,I>>>=2),I&1||x++,x},l.prototype.bitLength=function(){var U=this.words[this.length-1],I=this._countBits(U);return(this.length-1)*26+I};function E(ae){for(var U=new Array(ae.bitLength()),I=0;I<U.length;I++){var x=I/26|0,T=I%26;U[I]=(ae.words[x]&1<<T)>>>T}return U}l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var U=0,I=0;I<this.length;I++){var x=this._zeroBits(this.words[I]);if(U+=x,x!==26)break}return U},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(U){return this.negative!==0?this.abs().inotn(U).iaddn(1):this.clone()},l.prototype.fromTwos=function(U){return this.testn(U-1)?this.notn(U).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(U){for(;this.length<U.length;)this.words[this.length++]=0;for(var I=0;I<U.length;I++)this.words[I]=this.words[I]|U.words[I];return this.strip()},l.prototype.ior=function(U){return a((this.negative|U.negative)===0),this.iuor(U)},l.prototype.or=function(U){return this.length>U.length?this.clone().ior(U):U.clone().ior(this)},l.prototype.uor=function(U){return this.length>U.length?this.clone().iuor(U):U.clone().iuor(this)},l.prototype.iuand=function(U){var I;this.length>U.length?I=U:I=this;for(var x=0;x<I.length;x++)this.words[x]=this.words[x]&U.words[x];return this.length=I.length,this.strip()},l.prototype.iand=function(U){return a((this.negative|U.negative)===0),this.iuand(U)},l.prototype.and=function(U){return this.length>U.length?this.clone().iand(U):U.clone().iand(this)},l.prototype.uand=function(U){return this.length>U.length?this.clone().iuand(U):U.clone().iuand(this)},l.prototype.iuxor=function(U){var I,x;this.length>U.length?(I=this,x=U):(I=U,x=this);for(var T=0;T<x.length;T++)this.words[T]=I.words[T]^x.words[T];if(this!==I)for(;T<I.length;T++)this.words[T]=I.words[T];return this.length=I.length,this.strip()},l.prototype.ixor=function(U){return a((this.negative|U.negative)===0),this.iuxor(U)},l.prototype.xor=function(U){return this.length>U.length?this.clone().ixor(U):U.clone().ixor(this)},l.prototype.uxor=function(U){return this.length>U.length?this.clone().iuxor(U):U.clone().iuxor(this)},l.prototype.inotn=function(U){a(typeof U=="number"&&U>=0);var I=Math.ceil(U/26)|0,x=U%26;this._expand(I),x>0&&I--;for(var T=0;T<I;T++)this.words[T]=~this.words[T]&67108863;return x>0&&(this.words[T]=~this.words[T]&67108863>>26-x),this.strip()},l.prototype.notn=function(U){return this.clone().inotn(U)},l.prototype.setn=function(U,I){a(typeof U=="number"&&U>=0);var x=U/26|0,T=U%26;return this._expand(x+1),I?this.words[x]=this.words[x]|1<<T:this.words[x]=this.words[x]&~(1<<T),this.strip()},l.prototype.iadd=function(U){var I;if(this.negative!==0&&U.negative===0)return this.negative=0,I=this.isub(U),this.negative^=1,this._normSign();if(this.negative===0&&U.negative!==0)return U.negative=0,I=this.isub(U),U.negative=1,I._normSign();var x,T;this.length>U.length?(x=this,T=U):(x=U,T=this);for(var M=0,O=0;O<T.length;O++)I=(x.words[O]|0)+(T.words[O]|0)+M,this.words[O]=I&67108863,M=I>>>26;for(;M!==0&&O<x.length;O++)I=(x.words[O]|0)+M,this.words[O]=I&67108863,M=I>>>26;if(this.length=x.length,M!==0)this.words[this.length]=M,this.length++;else if(x!==this)for(;O<x.length;O++)this.words[O]=x.words[O];return this},l.prototype.add=function(U){var I;return U.negative!==0&&this.negative===0?(U.negative=0,I=this.sub(U),U.negative^=1,I):U.negative===0&&this.negative!==0?(this.negative=0,I=U.sub(this),this.negative=1,I):this.length>U.length?this.clone().iadd(U):U.clone().iadd(this)},l.prototype.isub=function(U){if(U.negative!==0){U.negative=0;var I=this.iadd(U);return U.negative=1,I._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(U),this.negative=1,this._normSign();var x=this.cmp(U);if(x===0)return this.negative=0,this.length=1,this.words[0]=0,this;var T,M;x>0?(T=this,M=U):(T=U,M=this);for(var O=0,z=0;z<M.length;z++)I=(T.words[z]|0)-(M.words[z]|0)+O,O=I>>26,this.words[z]=I&67108863;for(;O!==0&&z<T.length;z++)I=(T.words[z]|0)+O,O=I>>26,this.words[z]=I&67108863;if(O===0&&z<T.length&&T!==this)for(;z<T.length;z++)this.words[z]=T.words[z];return this.length=Math.max(this.length,z),T!==this&&(this.negative=1),this.strip()},l.prototype.sub=function(U){return this.clone().isub(U)};function A(ae,U,I){I.negative=U.negative^ae.negative;var x=ae.length+U.length|0;I.length=x,x=x-1|0;var T=ae.words[0]|0,M=U.words[0]|0,O=T*M,z=O&67108863,X=O/67108864|0;I.words[0]=z;for(var H=1;H<x;H++){for(var P=X>>>26,S=X&67108863,F=Math.min(H,U.length-1),ue=Math.max(0,H-ae.length+1);ue<=F;ue++){var ee=H-ue|0;T=ae.words[ee]|0,M=U.words[ue]|0,O=T*M+S,P+=O/67108864|0,S=O&67108863}I.words[H]=S|0,X=P|0}return X!==0?I.words[H]=X|0:I.length--,I.strip()}var C=function(U,I,x){var T=U.words,M=I.words,O=x.words,z=0,X,H,P,S=T[0]|0,F=S&8191,ue=S>>>13,ee=T[1]|0,fe=ee&8191,le=ee>>>13,ce=T[2]|0,pe=ce&8191,se=ce>>>13,de=T[3]|0,re=de&8191,me=de>>>13,te=T[4]|0,ve=te&8191,Se=te>>>13,be=T[5]|0,_e=be&8191,ye=be>>>13,$e=T[6]|0,Ie=$e&8191,Be=$e>>>13,Me=T[7]|0,Fe=Me&8191,Ve=Me>>>13,Oe=T[8]|0,ge=Oe&8191,ie=Oe>>>13,he=T[9]|0,we=he&8191,Re=he>>>13,De=M[0]|0,Le=De&8191,tt=De>>>13,We=M[1]|0,Ge=We&8191,_t=We>>>13,rt=M[2]|0,ot=rt&8191,Rt=rt>>>13,xt=M[3]|0,ht=xt&8191,Tt=xt>>>13,dt=M[4]|0,it=dt&8191,Ct=dt>>>13,pt=M[5]|0,at=pt&8191,kt=pt>>>13,mt=M[6]|0,nt=mt&8191,Bt=mt>>>13,Ee=M[7]|0,ke=Ee&8191,Pe=Ee>>>13,ne=M[8]|0,xe=ne&8191,Te=ne>>>13,Ae=M[9]|0,Ce=Ae&8191,Ne=Ae>>>13;x.negative=U.negative^I.negative,x.length=19,X=Math.imul(F,Le),H=Math.imul(F,tt),H=H+Math.imul(ue,Le)|0,P=Math.imul(ue,tt);var Ue=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(Ue>>>26)|0,Ue&=67108863,X=Math.imul(fe,Le),H=Math.imul(fe,tt),H=H+Math.imul(le,Le)|0,P=Math.imul(le,tt),X=X+Math.imul(F,Ge)|0,H=H+Math.imul(F,_t)|0,H=H+Math.imul(ue,Ge)|0,P=P+Math.imul(ue,_t)|0;var je=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(je>>>26)|0,je&=67108863,X=Math.imul(pe,Le),H=Math.imul(pe,tt),H=H+Math.imul(se,Le)|0,P=Math.imul(se,tt),X=X+Math.imul(fe,Ge)|0,H=H+Math.imul(fe,_t)|0,H=H+Math.imul(le,Ge)|0,P=P+Math.imul(le,_t)|0,X=X+Math.imul(F,ot)|0,H=H+Math.imul(F,Rt)|0,H=H+Math.imul(ue,ot)|0,P=P+Math.imul(ue,Rt)|0;var Ke=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,X=Math.imul(re,Le),H=Math.imul(re,tt),H=H+Math.imul(me,Le)|0,P=Math.imul(me,tt),X=X+Math.imul(pe,Ge)|0,H=H+Math.imul(pe,_t)|0,H=H+Math.imul(se,Ge)|0,P=P+Math.imul(se,_t)|0,X=X+Math.imul(fe,ot)|0,H=H+Math.imul(fe,Rt)|0,H=H+Math.imul(le,ot)|0,P=P+Math.imul(le,Rt)|0,X=X+Math.imul(F,ht)|0,H=H+Math.imul(F,Tt)|0,H=H+Math.imul(ue,ht)|0,P=P+Math.imul(ue,Tt)|0;var He=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(He>>>26)|0,He&=67108863,X=Math.imul(ve,Le),H=Math.imul(ve,tt),H=H+Math.imul(Se,Le)|0,P=Math.imul(Se,tt),X=X+Math.imul(re,Ge)|0,H=H+Math.imul(re,_t)|0,H=H+Math.imul(me,Ge)|0,P=P+Math.imul(me,_t)|0,X=X+Math.imul(pe,ot)|0,H=H+Math.imul(pe,Rt)|0,H=H+Math.imul(se,ot)|0,P=P+Math.imul(se,Rt)|0,X=X+Math.imul(fe,ht)|0,H=H+Math.imul(fe,Tt)|0,H=H+Math.imul(le,ht)|0,P=P+Math.imul(le,Tt)|0,X=X+Math.imul(F,it)|0,H=H+Math.imul(F,Ct)|0,H=H+Math.imul(ue,it)|0,P=P+Math.imul(ue,Ct)|0;var ze=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(ze>>>26)|0,ze&=67108863,X=Math.imul(_e,Le),H=Math.imul(_e,tt),H=H+Math.imul(ye,Le)|0,P=Math.imul(ye,tt),X=X+Math.imul(ve,Ge)|0,H=H+Math.imul(ve,_t)|0,H=H+Math.imul(Se,Ge)|0,P=P+Math.imul(Se,_t)|0,X=X+Math.imul(re,ot)|0,H=H+Math.imul(re,Rt)|0,H=H+Math.imul(me,ot)|0,P=P+Math.imul(me,Rt)|0,X=X+Math.imul(pe,ht)|0,H=H+Math.imul(pe,Tt)|0,H=H+Math.imul(se,ht)|0,P=P+Math.imul(se,Tt)|0,X=X+Math.imul(fe,it)|0,H=H+Math.imul(fe,Ct)|0,H=H+Math.imul(le,it)|0,P=P+Math.imul(le,Ct)|0,X=X+Math.imul(F,at)|0,H=H+Math.imul(F,kt)|0,H=H+Math.imul(ue,at)|0,P=P+Math.imul(ue,kt)|0;var Ye=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,X=Math.imul(Ie,Le),H=Math.imul(Ie,tt),H=H+Math.imul(Be,Le)|0,P=Math.imul(Be,tt),X=X+Math.imul(_e,Ge)|0,H=H+Math.imul(_e,_t)|0,H=H+Math.imul(ye,Ge)|0,P=P+Math.imul(ye,_t)|0,X=X+Math.imul(ve,ot)|0,H=H+Math.imul(ve,Rt)|0,H=H+Math.imul(Se,ot)|0,P=P+Math.imul(Se,Rt)|0,X=X+Math.imul(re,ht)|0,H=H+Math.imul(re,Tt)|0,H=H+Math.imul(me,ht)|0,P=P+Math.imul(me,Tt)|0,X=X+Math.imul(pe,it)|0,H=H+Math.imul(pe,Ct)|0,H=H+Math.imul(se,it)|0,P=P+Math.imul(se,Ct)|0,X=X+Math.imul(fe,at)|0,H=H+Math.imul(fe,kt)|0,H=H+Math.imul(le,at)|0,P=P+Math.imul(le,kt)|0,X=X+Math.imul(F,nt)|0,H=H+Math.imul(F,Bt)|0,H=H+Math.imul(ue,nt)|0,P=P+Math.imul(ue,Bt)|0;var Qe=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,X=Math.imul(Fe,Le),H=Math.imul(Fe,tt),H=H+Math.imul(Ve,Le)|0,P=Math.imul(Ve,tt),X=X+Math.imul(Ie,Ge)|0,H=H+Math.imul(Ie,_t)|0,H=H+Math.imul(Be,Ge)|0,P=P+Math.imul(Be,_t)|0,X=X+Math.imul(_e,ot)|0,H=H+Math.imul(_e,Rt)|0,H=H+Math.imul(ye,ot)|0,P=P+Math.imul(ye,Rt)|0,X=X+Math.imul(ve,ht)|0,H=H+Math.imul(ve,Tt)|0,H=H+Math.imul(Se,ht)|0,P=P+Math.imul(Se,Tt)|0,X=X+Math.imul(re,it)|0,H=H+Math.imul(re,Ct)|0,H=H+Math.imul(me,it)|0,P=P+Math.imul(me,Ct)|0,X=X+Math.imul(pe,at)|0,H=H+Math.imul(pe,kt)|0,H=H+Math.imul(se,at)|0,P=P+Math.imul(se,kt)|0,X=X+Math.imul(fe,nt)|0,H=H+Math.imul(fe,Bt)|0,H=H+Math.imul(le,nt)|0,P=P+Math.imul(le,Bt)|0,X=X+Math.imul(F,ke)|0,H=H+Math.imul(F,Pe)|0,H=H+Math.imul(ue,ke)|0,P=P+Math.imul(ue,Pe)|0;var st=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(st>>>26)|0,st&=67108863,X=Math.imul(ge,Le),H=Math.imul(ge,tt),H=H+Math.imul(ie,Le)|0,P=Math.imul(ie,tt),X=X+Math.imul(Fe,Ge)|0,H=H+Math.imul(Fe,_t)|0,H=H+Math.imul(Ve,Ge)|0,P=P+Math.imul(Ve,_t)|0,X=X+Math.imul(Ie,ot)|0,H=H+Math.imul(Ie,Rt)|0,H=H+Math.imul(Be,ot)|0,P=P+Math.imul(Be,Rt)|0,X=X+Math.imul(_e,ht)|0,H=H+Math.imul(_e,Tt)|0,H=H+Math.imul(ye,ht)|0,P=P+Math.imul(ye,Tt)|0,X=X+Math.imul(ve,it)|0,H=H+Math.imul(ve,Ct)|0,H=H+Math.imul(Se,it)|0,P=P+Math.imul(Se,Ct)|0,X=X+Math.imul(re,at)|0,H=H+Math.imul(re,kt)|0,H=H+Math.imul(me,at)|0,P=P+Math.imul(me,kt)|0,X=X+Math.imul(pe,nt)|0,H=H+Math.imul(pe,Bt)|0,H=H+Math.imul(se,nt)|0,P=P+Math.imul(se,Bt)|0,X=X+Math.imul(fe,ke)|0,H=H+Math.imul(fe,Pe)|0,H=H+Math.imul(le,ke)|0,P=P+Math.imul(le,Pe)|0,X=X+Math.imul(F,xe)|0,H=H+Math.imul(F,Te)|0,H=H+Math.imul(ue,xe)|0,P=P+Math.imul(ue,Te)|0;var Ze=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,X=Math.imul(we,Le),H=Math.imul(we,tt),H=H+Math.imul(Re,Le)|0,P=Math.imul(Re,tt),X=X+Math.imul(ge,Ge)|0,H=H+Math.imul(ge,_t)|0,H=H+Math.imul(ie,Ge)|0,P=P+Math.imul(ie,_t)|0,X=X+Math.imul(Fe,ot)|0,H=H+Math.imul(Fe,Rt)|0,H=H+Math.imul(Ve,ot)|0,P=P+Math.imul(Ve,Rt)|0,X=X+Math.imul(Ie,ht)|0,H=H+Math.imul(Ie,Tt)|0,H=H+Math.imul(Be,ht)|0,P=P+Math.imul(Be,Tt)|0,X=X+Math.imul(_e,it)|0,H=H+Math.imul(_e,Ct)|0,H=H+Math.imul(ye,it)|0,P=P+Math.imul(ye,Ct)|0,X=X+Math.imul(ve,at)|0,H=H+Math.imul(ve,kt)|0,H=H+Math.imul(Se,at)|0,P=P+Math.imul(Se,kt)|0,X=X+Math.imul(re,nt)|0,H=H+Math.imul(re,Bt)|0,H=H+Math.imul(me,nt)|0,P=P+Math.imul(me,Bt)|0,X=X+Math.imul(pe,ke)|0,H=H+Math.imul(pe,Pe)|0,H=H+Math.imul(se,ke)|0,P=P+Math.imul(se,Pe)|0,X=X+Math.imul(fe,xe)|0,H=H+Math.imul(fe,Te)|0,H=H+Math.imul(le,xe)|0,P=P+Math.imul(le,Te)|0,X=X+Math.imul(F,Ce)|0,H=H+Math.imul(F,Ne)|0,H=H+Math.imul(ue,Ce)|0,P=P+Math.imul(ue,Ne)|0;var et=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(et>>>26)|0,et&=67108863,X=Math.imul(we,Ge),H=Math.imul(we,_t),H=H+Math.imul(Re,Ge)|0,P=Math.imul(Re,_t),X=X+Math.imul(ge,ot)|0,H=H+Math.imul(ge,Rt)|0,H=H+Math.imul(ie,ot)|0,P=P+Math.imul(ie,Rt)|0,X=X+Math.imul(Fe,ht)|0,H=H+Math.imul(Fe,Tt)|0,H=H+Math.imul(Ve,ht)|0,P=P+Math.imul(Ve,Tt)|0,X=X+Math.imul(Ie,it)|0,H=H+Math.imul(Ie,Ct)|0,H=H+Math.imul(Be,it)|0,P=P+Math.imul(Be,Ct)|0,X=X+Math.imul(_e,at)|0,H=H+Math.imul(_e,kt)|0,H=H+Math.imul(ye,at)|0,P=P+Math.imul(ye,kt)|0,X=X+Math.imul(ve,nt)|0,H=H+Math.imul(ve,Bt)|0,H=H+Math.imul(Se,nt)|0,P=P+Math.imul(Se,Bt)|0,X=X+Math.imul(re,ke)|0,H=H+Math.imul(re,Pe)|0,H=H+Math.imul(me,ke)|0,P=P+Math.imul(me,Pe)|0,X=X+Math.imul(pe,xe)|0,H=H+Math.imul(pe,Te)|0,H=H+Math.imul(se,xe)|0,P=P+Math.imul(se,Te)|0,X=X+Math.imul(fe,Ce)|0,H=H+Math.imul(fe,Ne)|0,H=H+Math.imul(le,Ce)|0,P=P+Math.imul(le,Ne)|0;var vt=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(vt>>>26)|0,vt&=67108863,X=Math.imul(we,ot),H=Math.imul(we,Rt),H=H+Math.imul(Re,ot)|0,P=Math.imul(Re,Rt),X=X+Math.imul(ge,ht)|0,H=H+Math.imul(ge,Tt)|0,H=H+Math.imul(ie,ht)|0,P=P+Math.imul(ie,Tt)|0,X=X+Math.imul(Fe,it)|0,H=H+Math.imul(Fe,Ct)|0,H=H+Math.imul(Ve,it)|0,P=P+Math.imul(Ve,Ct)|0,X=X+Math.imul(Ie,at)|0,H=H+Math.imul(Ie,kt)|0,H=H+Math.imul(Be,at)|0,P=P+Math.imul(Be,kt)|0,X=X+Math.imul(_e,nt)|0,H=H+Math.imul(_e,Bt)|0,H=H+Math.imul(ye,nt)|0,P=P+Math.imul(ye,Bt)|0,X=X+Math.imul(ve,ke)|0,H=H+Math.imul(ve,Pe)|0,H=H+Math.imul(Se,ke)|0,P=P+Math.imul(Se,Pe)|0,X=X+Math.imul(re,xe)|0,H=H+Math.imul(re,Te)|0,H=H+Math.imul(me,xe)|0,P=P+Math.imul(me,Te)|0,X=X+Math.imul(pe,Ce)|0,H=H+Math.imul(pe,Ne)|0,H=H+Math.imul(se,Ce)|0,P=P+Math.imul(se,Ne)|0;var yt=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(yt>>>26)|0,yt&=67108863,X=Math.imul(we,ht),H=Math.imul(we,Tt),H=H+Math.imul(Re,ht)|0,P=Math.imul(Re,Tt),X=X+Math.imul(ge,it)|0,H=H+Math.imul(ge,Ct)|0,H=H+Math.imul(ie,it)|0,P=P+Math.imul(ie,Ct)|0,X=X+Math.imul(Fe,at)|0,H=H+Math.imul(Fe,kt)|0,H=H+Math.imul(Ve,at)|0,P=P+Math.imul(Ve,kt)|0,X=X+Math.imul(Ie,nt)|0,H=H+Math.imul(Ie,Bt)|0,H=H+Math.imul(Be,nt)|0,P=P+Math.imul(Be,Bt)|0,X=X+Math.imul(_e,ke)|0,H=H+Math.imul(_e,Pe)|0,H=H+Math.imul(ye,ke)|0,P=P+Math.imul(ye,Pe)|0,X=X+Math.imul(ve,xe)|0,H=H+Math.imul(ve,Te)|0,H=H+Math.imul(Se,xe)|0,P=P+Math.imul(Se,Te)|0,X=X+Math.imul(re,Ce)|0,H=H+Math.imul(re,Ne)|0,H=H+Math.imul(me,Ce)|0,P=P+Math.imul(me,Ne)|0;var wt=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(wt>>>26)|0,wt&=67108863,X=Math.imul(we,it),H=Math.imul(we,Ct),H=H+Math.imul(Re,it)|0,P=Math.imul(Re,Ct),X=X+Math.imul(ge,at)|0,H=H+Math.imul(ge,kt)|0,H=H+Math.imul(ie,at)|0,P=P+Math.imul(ie,kt)|0,X=X+Math.imul(Fe,nt)|0,H=H+Math.imul(Fe,Bt)|0,H=H+Math.imul(Ve,nt)|0,P=P+Math.imul(Ve,Bt)|0,X=X+Math.imul(Ie,ke)|0,H=H+Math.imul(Ie,Pe)|0,H=H+Math.imul(Be,ke)|0,P=P+Math.imul(Be,Pe)|0,X=X+Math.imul(_e,xe)|0,H=H+Math.imul(_e,Te)|0,H=H+Math.imul(ye,xe)|0,P=P+Math.imul(ye,Te)|0,X=X+Math.imul(ve,Ce)|0,H=H+Math.imul(ve,Ne)|0,H=H+Math.imul(Se,Ce)|0,P=P+Math.imul(Se,Ne)|0;var bt=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(bt>>>26)|0,bt&=67108863,X=Math.imul(we,at),H=Math.imul(we,kt),H=H+Math.imul(Re,at)|0,P=Math.imul(Re,kt),X=X+Math.imul(ge,nt)|0,H=H+Math.imul(ge,Bt)|0,H=H+Math.imul(ie,nt)|0,P=P+Math.imul(ie,Bt)|0,X=X+Math.imul(Fe,ke)|0,H=H+Math.imul(Fe,Pe)|0,H=H+Math.imul(Ve,ke)|0,P=P+Math.imul(Ve,Pe)|0,X=X+Math.imul(Ie,xe)|0,H=H+Math.imul(Ie,Te)|0,H=H+Math.imul(Be,xe)|0,P=P+Math.imul(Be,Te)|0,X=X+Math.imul(_e,Ce)|0,H=H+Math.imul(_e,Ne)|0,H=H+Math.imul(ye,Ce)|0,P=P+Math.imul(ye,Ne)|0;var $t=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+($t>>>26)|0,$t&=67108863,X=Math.imul(we,nt),H=Math.imul(we,Bt),H=H+Math.imul(Re,nt)|0,P=Math.imul(Re,Bt),X=X+Math.imul(ge,ke)|0,H=H+Math.imul(ge,Pe)|0,H=H+Math.imul(ie,ke)|0,P=P+Math.imul(ie,Pe)|0,X=X+Math.imul(Fe,xe)|0,H=H+Math.imul(Fe,Te)|0,H=H+Math.imul(Ve,xe)|0,P=P+Math.imul(Ve,Te)|0,X=X+Math.imul(Ie,Ce)|0,H=H+Math.imul(Ie,Ne)|0,H=H+Math.imul(Be,Ce)|0,P=P+Math.imul(Be,Ne)|0;var At=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(At>>>26)|0,At&=67108863,X=Math.imul(we,ke),H=Math.imul(we,Pe),H=H+Math.imul(Re,ke)|0,P=Math.imul(Re,Pe),X=X+Math.imul(ge,xe)|0,H=H+Math.imul(ge,Te)|0,H=H+Math.imul(ie,xe)|0,P=P+Math.imul(ie,Te)|0,X=X+Math.imul(Fe,Ce)|0,H=H+Math.imul(Fe,Ne)|0,H=H+Math.imul(Ve,Ce)|0,P=P+Math.imul(Ve,Ne)|0;var Et=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(Et>>>26)|0,Et&=67108863,X=Math.imul(we,xe),H=Math.imul(we,Te),H=H+Math.imul(Re,xe)|0,P=Math.imul(Re,Te),X=X+Math.imul(ge,Ce)|0,H=H+Math.imul(ge,Ne)|0,H=H+Math.imul(ie,Ce)|0,P=P+Math.imul(ie,Ne)|0;var Xe=(z+X|0)+((H&8191)<<13)|0;z=(P+(H>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,X=Math.imul(we,Ce),H=Math.imul(we,Ne),H=H+Math.imul(Re,Ce)|0,P=Math.imul(Re,Ne);var Je=(z+X|0)+((H&8191)<<13)|0;return z=(P+(H>>>13)|0)+(Je>>>26)|0,Je&=67108863,O[0]=Ue,O[1]=je,O[2]=Ke,O[3]=He,O[4]=ze,O[5]=Ye,O[6]=Qe,O[7]=st,O[8]=Ze,O[9]=et,O[10]=vt,O[11]=yt,O[12]=wt,O[13]=bt,O[14]=$t,O[15]=At,O[16]=Et,O[17]=Xe,O[18]=Je,z!==0&&(O[19]=z,x.length++),x};Math.imul||(C=A);function k(ae,U,I){I.negative=U.negative^ae.negative,I.length=ae.length+U.length;for(var x=0,T=0,M=0;M<I.length-1;M++){var O=T;T=0;for(var z=x&67108863,X=Math.min(M,U.length-1),H=Math.max(0,M-ae.length+1);H<=X;H++){var P=M-H,S=ae.words[P]|0,F=U.words[H]|0,ue=S*F,ee=ue&67108863;O=O+(ue/67108864|0)|0,ee=ee+z|0,z=ee&67108863,O=O+(ee>>>26)|0,T+=O>>>26,O&=67108863}I.words[M]=z,x=O,O=T}return x!==0?I.words[M]=x:I.length--,I.strip()}function B(ae,U,I){var x=new D;return x.mulp(ae,U,I)}l.prototype.mulTo=function(U,I){var x,T=this.length+U.length;return this.length===10&&U.length===10?x=C(this,U,I):T<63?x=A(this,U,I):T<1024?x=k(this,U,I):x=B(this,U,I),x};function D(ae,U){this.x=ae,this.y=U}D.prototype.makeRBT=function(U){for(var I=new Array(U),x=l.prototype._countBits(U)-1,T=0;T<U;T++)I[T]=this.revBin(T,x,U);return I},D.prototype.revBin=function(U,I,x){if(U===0||U===x-1)return U;for(var T=0,M=0;M<I;M++)T|=(U&1)<<I-M-1,U>>=1;return T},D.prototype.permute=function(U,I,x,T,M,O){for(var z=0;z<O;z++)T[z]=I[U[z]],M[z]=x[U[z]]},D.prototype.transform=function(U,I,x,T,M,O){this.permute(O,U,I,x,T,M);for(var z=1;z<M;z<<=1)for(var X=z<<1,H=Math.cos(2*Math.PI/X),P=Math.sin(2*Math.PI/X),S=0;S<M;S+=X)for(var F=H,ue=P,ee=0;ee<z;ee++){var fe=x[S+ee],le=T[S+ee],ce=x[S+ee+z],pe=T[S+ee+z],se=F*ce-ue*pe;pe=F*pe+ue*ce,ce=se,x[S+ee]=fe+ce,T[S+ee]=le+pe,x[S+ee+z]=fe-ce,T[S+ee+z]=le-pe,ee!==X&&(se=H*F-P*ue,ue=H*ue+P*F,F=se)}},D.prototype.guessLen13b=function(U,I){var x=Math.max(I,U)|1,T=x&1,M=0;for(x=x/2|0;x;x=x>>>1)M++;return 1<<M+1+T},D.prototype.conjugate=function(U,I,x){if(!(x<=1))for(var T=0;T<x/2;T++){var M=U[T];U[T]=U[x-T-1],U[x-T-1]=M,M=I[T],I[T]=-I[x-T-1],I[x-T-1]=-M}},D.prototype.normalize13b=function(U,I){for(var x=0,T=0;T<I/2;T++){var M=Math.round(U[2*T+1]/I)*8192+Math.round(U[2*T]/I)+x;U[T]=M&67108863,M<67108864?x=0:x=M/67108864|0}return U},D.prototype.convert13b=function(U,I,x,T){for(var M=0,O=0;O<I;O++)M=M+(U[O]|0),x[2*O]=M&8191,M=M>>>13,x[2*O+1]=M&8191,M=M>>>13;for(O=2*I;O<T;++O)x[O]=0;a(M===0),a((M&-8192)===0)},D.prototype.stub=function(U){for(var I=new Array(U),x=0;x<U;x++)I[x]=0;return I},D.prototype.mulp=function(U,I,x){var T=2*this.guessLen13b(U.length,I.length),M=this.makeRBT(T),O=this.stub(T),z=new Array(T),X=new Array(T),H=new Array(T),P=new Array(T),S=new Array(T),F=new Array(T),ue=x.words;ue.length=T,this.convert13b(U.words,U.length,z,T),this.convert13b(I.words,I.length,P,T),this.transform(z,O,X,H,T,M),this.transform(P,O,S,F,T,M);for(var ee=0;ee<T;ee++){var fe=X[ee]*S[ee]-H[ee]*F[ee];H[ee]=X[ee]*F[ee]+H[ee]*S[ee],X[ee]=fe}return this.conjugate(X,H,T),this.transform(X,H,ue,O,T,M),this.conjugate(ue,O,T),this.normalize13b(ue,T),x.negative=U.negative^I.negative,x.length=U.length+I.length,x.strip()},l.prototype.mul=function(U){var I=new l(null);return I.words=new Array(this.length+U.length),this.mulTo(U,I)},l.prototype.mulf=function(U){var I=new l(null);return I.words=new Array(this.length+U.length),B(this,U,I)},l.prototype.imul=function(U){return this.clone().mulTo(U,this)},l.prototype.imuln=function(U){a(typeof U=="number"),a(U<67108864);for(var I=0,x=0;x<this.length;x++){var T=(this.words[x]|0)*U,M=(T&67108863)+(I&67108863);I>>=26,I+=T/67108864|0,I+=M>>>26,this.words[x]=M&67108863}return I!==0&&(this.words[x]=I,this.length++),this},l.prototype.muln=function(U){return this.clone().imuln(U)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(U){var I=E(U);if(I.length===0)return new l(1);for(var x=this,T=0;T<I.length&&I[T]===0;T++,x=x.sqr());if(++T<I.length)for(var M=x.sqr();T<I.length;T++,M=M.sqr())I[T]!==0&&(x=x.mul(M));return x},l.prototype.iushln=function(U){a(typeof U=="number"&&U>=0);var I=U%26,x=(U-I)/26,T=67108863>>>26-I<<26-I,M;if(I!==0){var O=0;for(M=0;M<this.length;M++){var z=this.words[M]&T,X=(this.words[M]|0)-z<<I;this.words[M]=X|O,O=z>>>26-I}O&&(this.words[M]=O,this.length++)}if(x!==0){for(M=this.length-1;M>=0;M--)this.words[M+x]=this.words[M];for(M=0;M<x;M++)this.words[M]=0;this.length+=x}return this.strip()},l.prototype.ishln=function(U){return a(this.negative===0),this.iushln(U)},l.prototype.iushrn=function(U,I,x){a(typeof U=="number"&&U>=0);var T;I?T=(I-I%26)/26:T=0;var M=U%26,O=Math.min((U-M)/26,this.length),z=67108863^67108863>>>M<<M,X=x;if(T-=O,T=Math.max(0,T),X){for(var H=0;H<O;H++)X.words[H]=this.words[H];X.length=O}if(O!==0)if(this.length>O)for(this.length-=O,H=0;H<this.length;H++)this.words[H]=this.words[H+O];else this.words[0]=0,this.length=1;var P=0;for(H=this.length-1;H>=0&&(P!==0||H>=T);H--){var S=this.words[H]|0;this.words[H]=P<<26-M|S>>>M,P=S&z}return X&&P!==0&&(X.words[X.length++]=P),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},l.prototype.ishrn=function(U,I,x){return a(this.negative===0),this.iushrn(U,I,x)},l.prototype.shln=function(U){return this.clone().ishln(U)},l.prototype.ushln=function(U){return this.clone().iushln(U)},l.prototype.shrn=function(U){return this.clone().ishrn(U)},l.prototype.ushrn=function(U){return this.clone().iushrn(U)},l.prototype.testn=function(U){a(typeof U=="number"&&U>=0);var I=U%26,x=(U-I)/26,T=1<<I;if(this.length<=x)return!1;var M=this.words[x];return!!(M&T)},l.prototype.imaskn=function(U){a(typeof U=="number"&&U>=0);var I=U%26,x=(U-I)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=x)return this;if(I!==0&&x++,this.length=Math.min(x,this.length),I!==0){var T=67108863^67108863>>>I<<I;this.words[this.length-1]&=T}return this.strip()},l.prototype.maskn=function(U){return this.clone().imaskn(U)},l.prototype.iaddn=function(U){return a(typeof U=="number"),a(U<67108864),U<0?this.isubn(-U):this.negative!==0?this.length===1&&(this.words[0]|0)<U?(this.words[0]=U-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(U),this.negative=1,this):this._iaddn(U)},l.prototype._iaddn=function(U){this.words[0]+=U;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},l.prototype.isubn=function(U){if(a(typeof U=="number"),a(U<67108864),U<0)return this.iaddn(-U);if(this.negative!==0)return this.negative=0,this.iaddn(U),this.negative=1,this;if(this.words[0]-=U,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},l.prototype.addn=function(U){return this.clone().iaddn(U)},l.prototype.subn=function(U){return this.clone().isubn(U)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(U,I,x){var T=U.length+x,M;this._expand(T);var O,z=0;for(M=0;M<U.length;M++){O=(this.words[M+x]|0)+z;var X=(U.words[M]|0)*I;O-=X&67108863,z=(O>>26)-(X/67108864|0),this.words[M+x]=O&67108863}for(;M<this.length-x;M++)O=(this.words[M+x]|0)+z,z=O>>26,this.words[M+x]=O&67108863;if(z===0)return this.strip();for(a(z===-1),z=0,M=0;M<this.length;M++)O=-(this.words[M]|0)+z,z=O>>26,this.words[M]=O&67108863;return this.negative=1,this.strip()},l.prototype._wordDiv=function(U,I){var x=this.length-U.length,T=this.clone(),M=U,O=M.words[M.length-1]|0,z=this._countBits(O);x=26-z,x!==0&&(M=M.ushln(x),T.iushln(x),O=M.words[M.length-1]|0);var X=T.length-M.length,H;if(I!=="mod"){H=new l(null),H.length=X+1,H.words=new Array(H.length);for(var P=0;P<H.length;P++)H.words[P]=0}var S=T.clone()._ishlnsubmul(M,1,X);S.negative===0&&(T=S,H&&(H.words[X]=1));for(var F=X-1;F>=0;F--){var ue=(T.words[M.length+F]|0)*67108864+(T.words[M.length+F-1]|0);for(ue=Math.min(ue/O|0,67108863),T._ishlnsubmul(M,ue,F);T.negative!==0;)ue--,T.negative=0,T._ishlnsubmul(M,1,F),T.isZero()||(T.negative^=1);H&&(H.words[F]=ue)}return H&&H.strip(),T.strip(),I!=="div"&&x!==0&&T.iushrn(x),{div:H||null,mod:T}},l.prototype.divmod=function(U,I,x){if(a(!U.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var T,M,O;return this.negative!==0&&U.negative===0?(O=this.neg().divmod(U,I),I!=="mod"&&(T=O.div.neg()),I!=="div"&&(M=O.mod.neg(),x&&M.negative!==0&&M.iadd(U)),{div:T,mod:M}):this.negative===0&&U.negative!==0?(O=this.divmod(U.neg(),I),I!=="mod"&&(T=O.div.neg()),{div:T,mod:O.mod}):this.negative&U.negative?(O=this.neg().divmod(U.neg(),I),I!=="div"&&(M=O.mod.neg(),x&&M.negative!==0&&M.isub(U)),{div:O.div,mod:M}):U.length>this.length||this.cmp(U)<0?{div:new l(0),mod:this}:U.length===1?I==="div"?{div:this.divn(U.words[0]),mod:null}:I==="mod"?{div:null,mod:new l(this.modn(U.words[0]))}:{div:this.divn(U.words[0]),mod:new l(this.modn(U.words[0]))}:this._wordDiv(U,I)},l.prototype.div=function(U){return this.divmod(U,"div",!1).div},l.prototype.mod=function(U){return this.divmod(U,"mod",!1).mod},l.prototype.umod=function(U){return this.divmod(U,"mod",!0).mod},l.prototype.divRound=function(U){var I=this.divmod(U);if(I.mod.isZero())return I.div;var x=I.div.negative!==0?I.mod.isub(U):I.mod,T=U.ushrn(1),M=U.andln(1),O=x.cmp(T);return O<0||M===1&&O===0?I.div:I.div.negative!==0?I.div.isubn(1):I.div.iaddn(1)},l.prototype.modn=function(U){a(U<=67108863);for(var I=(1<<26)%U,x=0,T=this.length-1;T>=0;T--)x=(I*x+(this.words[T]|0))%U;return x},l.prototype.idivn=function(U){a(U<=67108863);for(var I=0,x=this.length-1;x>=0;x--){var T=(this.words[x]|0)+I*67108864;this.words[x]=T/U|0,I=T%U}return this.strip()},l.prototype.divn=function(U){return this.clone().idivn(U)},l.prototype.egcd=function(U){a(U.negative===0),a(!U.isZero());var I=this,x=U.clone();I.negative!==0?I=I.umod(U):I=I.clone();for(var T=new l(1),M=new l(0),O=new l(0),z=new l(1),X=0;I.isEven()&&x.isEven();)I.iushrn(1),x.iushrn(1),++X;for(var H=x.clone(),P=I.clone();!I.isZero();){for(var S=0,F=1;!(I.words[0]&F)&&S<26;++S,F<<=1);if(S>0)for(I.iushrn(S);S-- >0;)(T.isOdd()||M.isOdd())&&(T.iadd(H),M.isub(P)),T.iushrn(1),M.iushrn(1);for(var ue=0,ee=1;!(x.words[0]&ee)&&ue<26;++ue,ee<<=1);if(ue>0)for(x.iushrn(ue);ue-- >0;)(O.isOdd()||z.isOdd())&&(O.iadd(H),z.isub(P)),O.iushrn(1),z.iushrn(1);I.cmp(x)>=0?(I.isub(x),T.isub(O),M.isub(z)):(x.isub(I),O.isub(T),z.isub(M))}return{a:O,b:z,gcd:x.iushln(X)}},l.prototype._invmp=function(U){a(U.negative===0),a(!U.isZero());var I=this,x=U.clone();I.negative!==0?I=I.umod(U):I=I.clone();for(var T=new l(1),M=new l(0),O=x.clone();I.cmpn(1)>0&&x.cmpn(1)>0;){for(var z=0,X=1;!(I.words[0]&X)&&z<26;++z,X<<=1);if(z>0)for(I.iushrn(z);z-- >0;)T.isOdd()&&T.iadd(O),T.iushrn(1);for(var H=0,P=1;!(x.words[0]&P)&&H<26;++H,P<<=1);if(H>0)for(x.iushrn(H);H-- >0;)M.isOdd()&&M.iadd(O),M.iushrn(1);I.cmp(x)>=0?(I.isub(x),T.isub(M)):(x.isub(I),M.isub(T))}var S;return I.cmpn(1)===0?S=T:S=M,S.cmpn(0)<0&&S.iadd(U),S},l.prototype.gcd=function(U){if(this.isZero())return U.abs();if(U.isZero())return this.abs();var I=this.clone(),x=U.clone();I.negative=0,x.negative=0;for(var T=0;I.isEven()&&x.isEven();T++)I.iushrn(1),x.iushrn(1);do{for(;I.isEven();)I.iushrn(1);for(;x.isEven();)x.iushrn(1);var M=I.cmp(x);if(M<0){var O=I;I=x,x=O}else if(M===0||x.cmpn(1)===0)break;I.isub(x)}while(!0);return x.iushln(T)},l.prototype.invm=function(U){return this.egcd(U).a.umod(U)},l.prototype.isEven=function(){return(this.words[0]&1)===0},l.prototype.isOdd=function(){return(this.words[0]&1)===1},l.prototype.andln=function(U){return this.words[0]&U},l.prototype.bincn=function(U){a(typeof U=="number");var I=U%26,x=(U-I)/26,T=1<<I;if(this.length<=x)return this._expand(x+1),this.words[x]|=T,this;for(var M=T,O=x;M!==0&&O<this.length;O++){var z=this.words[O]|0;z+=M,M=z>>>26,z&=67108863,this.words[O]=z}return M!==0&&(this.words[O]=M,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(U){var I=U<0;if(this.negative!==0&&!I)return-1;if(this.negative===0&&I)return 1;this.strip();var x;if(this.length>1)x=1;else{I&&(U=-U),a(U<=67108863,"Number is too big");var T=this.words[0]|0;x=T===U?0:T<U?-1:1}return this.negative!==0?-x|0:x},l.prototype.cmp=function(U){if(this.negative!==0&&U.negative===0)return-1;if(this.negative===0&&U.negative!==0)return 1;var I=this.ucmp(U);return this.negative!==0?-I|0:I},l.prototype.ucmp=function(U){if(this.length>U.length)return 1;if(this.length<U.length)return-1;for(var I=0,x=this.length-1;x>=0;x--){var T=this.words[x]|0,M=U.words[x]|0;if(T!==M){T<M?I=-1:T>M&&(I=1);break}}return I},l.prototype.gtn=function(U){return this.cmpn(U)===1},l.prototype.gt=function(U){return this.cmp(U)===1},l.prototype.gten=function(U){return this.cmpn(U)>=0},l.prototype.gte=function(U){return this.cmp(U)>=0},l.prototype.ltn=function(U){return this.cmpn(U)===-1},l.prototype.lt=function(U){return this.cmp(U)===-1},l.prototype.lten=function(U){return this.cmpn(U)<=0},l.prototype.lte=function(U){return this.cmp(U)<=0},l.prototype.eqn=function(U){return this.cmpn(U)===0},l.prototype.eq=function(U){return this.cmp(U)===0},l.red=function(U){return new Q(U)},l.prototype.toRed=function(U){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),U.convertTo(this)._forceRed(U)},l.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(U){return this.red=U,this},l.prototype.forceRed=function(U){return a(!this.red,"Already a number in reduction context"),this._forceRed(U)},l.prototype.redAdd=function(U){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,U)},l.prototype.redIAdd=function(U){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,U)},l.prototype.redSub=function(U){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,U)},l.prototype.redISub=function(U){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,U)},l.prototype.redShl=function(U){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,U)},l.prototype.redMul=function(U){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,U),this.red.mul(this,U)},l.prototype.redIMul=function(U){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,U),this.red.imul(this,U)},l.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(U){return a(this.red&&!U.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,U)};var q={k256:null,p224:null,p192:null,p25519:null};function j(ae,U){this.name=ae,this.p=new l(U,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}j.prototype._tmp=function(){var U=new l(null);return U.words=new Array(Math.ceil(this.n/13)),U},j.prototype.ireduce=function(U){var I=U,x;do this.split(I,this.tmp),I=this.imulK(I),I=I.iadd(this.tmp),x=I.bitLength();while(x>this.n);var T=x<this.n?-1:I.ucmp(this.p);return T===0?(I.words[0]=0,I.length=1):T>0?I.isub(this.p):I.strip!==void 0?I.strip():I._strip(),I},j.prototype.split=function(U,I){U.iushrn(this.n,0,I)},j.prototype.imulK=function(U){return U.imul(this.k)};function J(){j.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(J,j),J.prototype.split=function(U,I){for(var x=4194303,T=Math.min(U.length,9),M=0;M<T;M++)I.words[M]=U.words[M];if(I.length=T,U.length<=9){U.words[0]=0,U.length=1;return}var O=U.words[9];for(I.words[I.length++]=O&x,M=10;M<U.length;M++){var z=U.words[M]|0;U.words[M-10]=(z&x)<<4|O>>>22,O=z}O>>>=22,U.words[M-10]=O,O===0&&U.length>10?U.length-=10:U.length-=9},J.prototype.imulK=function(U){U.words[U.length]=0,U.words[U.length+1]=0,U.length+=2;for(var I=0,x=0;x<U.length;x++){var T=U.words[x]|0;I+=T*977,U.words[x]=I&67108863,I=T*64+(I/67108864|0)}return U.words[U.length-1]===0&&(U.length--,U.words[U.length-1]===0&&U.length--),U};function Y(){j.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(Y,j);function L(){j.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(L,j);function Z(){j.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(Z,j),Z.prototype.imulK=function(U){for(var I=0,x=0;x<U.length;x++){var T=(U.words[x]|0)*19+I,M=T&67108863;T>>>=26,U.words[x]=M,I=T}return I!==0&&(U.words[U.length++]=I),U},l._prime=function(U){if(q[U])return q[U];var I;if(U==="k256")I=new J;else if(U==="p224")I=new Y;else if(U==="p192")I=new L;else if(U==="p25519")I=new Z;else throw new Error("Unknown prime "+U);return q[U]=I,I};function Q(ae){if(typeof ae=="string"){var U=l._prime(ae);this.m=U.p,this.prime=U}else a(ae.gtn(1),"modulus must be greater than 1"),this.m=ae,this.prime=null}Q.prototype._verify1=function(U){a(U.negative===0,"red works only with positives"),a(U.red,"red works only with red numbers")},Q.prototype._verify2=function(U,I){a((U.negative|I.negative)===0,"red works only with positives"),a(U.red&&U.red===I.red,"red works only with red numbers")},Q.prototype.imod=function(U){return this.prime?this.prime.ireduce(U)._forceRed(this):U.umod(this.m)._forceRed(this)},Q.prototype.neg=function(U){return U.isZero()?U.clone():this.m.sub(U)._forceRed(this)},Q.prototype.add=function(U,I){this._verify2(U,I);var x=U.add(I);return x.cmp(this.m)>=0&&x.isub(this.m),x._forceRed(this)},Q.prototype.iadd=function(U,I){this._verify2(U,I);var x=U.iadd(I);return x.cmp(this.m)>=0&&x.isub(this.m),x},Q.prototype.sub=function(U,I){this._verify2(U,I);var x=U.sub(I);return x.cmpn(0)<0&&x.iadd(this.m),x._forceRed(this)},Q.prototype.isub=function(U,I){this._verify2(U,I);var x=U.isub(I);return x.cmpn(0)<0&&x.iadd(this.m),x},Q.prototype.shl=function(U,I){return this._verify1(U),this.imod(U.ushln(I))},Q.prototype.imul=function(U,I){return this._verify2(U,I),this.imod(U.imul(I))},Q.prototype.mul=function(U,I){return this._verify2(U,I),this.imod(U.mul(I))},Q.prototype.isqr=function(U){return this.imul(U,U.clone())},Q.prototype.sqr=function(U){return this.mul(U,U)},Q.prototype.sqrt=function(U){if(U.isZero())return U.clone();var I=this.m.andln(3);if(a(I%2===1),I===3){var x=this.m.add(new l(1)).iushrn(2);return this.pow(U,x)}for(var T=this.m.subn(1),M=0;!T.isZero()&&T.andln(1)===0;)M++,T.iushrn(1);a(!T.isZero());var O=new l(1).toRed(this),z=O.redNeg(),X=this.m.subn(1).iushrn(1),H=this.m.bitLength();for(H=new l(2*H*H).toRed(this);this.pow(H,X).cmp(z)!==0;)H.redIAdd(z);for(var P=this.pow(H,T),S=this.pow(U,T.addn(1).iushrn(1)),F=this.pow(U,T),ue=M;F.cmp(O)!==0;){for(var ee=F,fe=0;ee.cmp(O)!==0;fe++)ee=ee.redSqr();a(fe<ue);var le=this.pow(P,new l(1).iushln(ue-fe-1));S=S.redMul(le),P=le.redSqr(),F=F.redMul(P),ue=fe}return S},Q.prototype.invm=function(U){var I=U._invmp(this.m);return I.negative!==0?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},Q.prototype.pow=function(U,I){if(I.isZero())return new l(1).toRed(this);if(I.cmpn(1)===0)return U.clone();var x=4,T=new Array(1<<x);T[0]=new l(1).toRed(this),T[1]=U;for(var M=2;M<T.length;M++)T[M]=this.mul(T[M-1],U);var O=T[0],z=0,X=0,H=I.bitLength()%26;for(H===0&&(H=26),M=I.length-1;M>=0;M--){for(var P=I.words[M],S=H-1;S>=0;S--){var F=P>>S&1;if(O!==T[0]&&(O=this.sqr(O)),F===0&&z===0){X=0;continue}z<<=1,z|=F,X++,!(X!==x&&(M!==0||S!==0))&&(O=this.mul(O,T[z]),X=0,z=0)}H=26}return O},Q.prototype.convertTo=function(U){var I=U.umod(this.m);return I===U?I.clone():I},Q.prototype.convertFrom=function(U){var I=U.clone();return I.red=null,I},l.mont=function(U){return new oe(U)};function oe(ae){Q.call(this,ae),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(oe,Q),oe.prototype.convertTo=function(U){return this.imod(U.ushln(this.shift))},oe.prototype.convertFrom=function(U){var I=this.imod(U.mul(this.rinv));return I.red=null,I},oe.prototype.imul=function(U,I){if(U.isZero()||I.isZero())return U.words[0]=0,U.length=1,U;var x=U.imul(I),T=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=x.isub(T).iushrn(this.shift),O=M;return M.cmp(this.m)>=0?O=M.isub(this.m):M.cmpn(0)<0&&(O=M.iadd(this.m)),O._forceRed(this)},oe.prototype.mul=function(U,I){if(U.isZero()||I.isZero())return new l(0)._forceRed(this);var x=U.mul(I),T=x.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),M=x.isub(T).iushrn(this.shift),O=M;return M.cmp(this.m)>=0?O=M.isub(this.m):M.cmpn(0)<0&&(O=M.iadd(this.m)),O._forceRed(this)},oe.prototype.invm=function(U){var I=this.imod(U._invmp(this.m).mul(this.r2));return I._forceRed(this)}})(t,commonjsGlobal)})(bn$4);var brorandExports={},brorand={get exports(){return brorandExports},set exports(t){brorandExports=t}},hasRequiredBrorand;function requireBrorand(){if(hasRequiredBrorand)return brorandExports;hasRequiredBrorand=1;var t;brorand.exports=function(o){return t||(t=new e(null)),t.generate(o)};function e(a){this.rand=a}if(brorandExports.Rand=e,e.prototype.generate=function(o){return this._rand(o)},e.prototype._rand=function(o){if(this.rand.getBytes)return this.rand.getBytes(o);for(var l=new Uint8Array(o),u=0;u<l.length;u++)l[u]=this.rand.getByte();return l},typeof self=="object")self.crypto&&self.crypto.getRandomValues?e.prototype._rand=function(o){var l=new Uint8Array(o);return self.crypto.getRandomValues(l),l}:self.msCrypto&&self.msCrypto.getRandomValues?e.prototype._rand=function(o){var l=new Uint8Array(o);return self.msCrypto.getRandomValues(l),l}:typeof window=="object"&&(e.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var n=requireCryptoBrowserify();if(typeof n.randomBytes!="function")throw new Error("Not supported");e.prototype._rand=function(o){return n.randomBytes(o)}}catch{}return brorandExports}var mr,hasRequiredMr;function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var t=bnExports$4,e=requireBrorand();function n(a){this.rand=a||new e.Rand}return mr=n,n.create=function(o){return new n(o)},n.prototype._randbelow=function(o){var l=o.bitLength(),u=Math.ceil(l/8);do var d=new t(this.rand.generate(u));while(d.cmp(o)>=0);return d},n.prototype._randrange=function(o,l){var u=l.sub(o);return o.add(this._randbelow(u))},n.prototype.test=function(o,l,u){var d=o.bitLength(),m=t.mont(o),y=new t(1).toRed(m);l||(l=Math.max(1,d/48|0));for(var b=o.subn(1),_=0;!b.testn(_);_++);for(var w=o.shrn(_),E=b.toRed(m),A=!0;l>0;l--){var C=this._randrange(new t(2),b);u&&u(C);var k=C.toRed(m).redPow(w);if(!(k.cmp(y)===0||k.cmp(E)===0)){for(var B=1;B<_;B++){if(k=k.redSqr(),k.cmp(y)===0)return!1;if(k.cmp(E)===0)break}if(B===_)return!1}}return A},n.prototype.getDivisor=function(o,l){var u=o.bitLength(),d=t.mont(o),m=new t(1).toRed(d);l||(l=Math.max(1,u/48|0));for(var y=o.subn(1),b=0;!y.testn(b);b++);for(var _=o.shrn(b),w=y.toRed(d);l>0;l--){var E=this._randrange(new t(2),y),A=o.gcd(E);if(A.cmpn(1)!==0)return A;var C=E.toRed(d).redPow(_);if(!(C.cmp(m)===0||C.cmp(w)===0)){for(var k=1;k<b;k++){if(C=C.redSqr(),C.cmp(m)===0)return C.fromRed().subn(1).gcd(o);if(C.cmp(w)===0)break}if(k===b)return C=C.redSqr(),C.fromRed().subn(1).gcd(o)}}return!1},mr}var generatePrime,hasRequiredGeneratePrime;function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var t=browserExports$2;generatePrime=k,k.simpleSieve=A,k.fermatTest=C;var e=bnExports$4,n=new e(24),a=requireMr(),o=new a,l=new e(1),u=new e(2),d=new e(5);new e(16),new e(8);var m=new e(10),y=new e(3);new e(7);var b=new e(11),_=new e(4);new e(12);var w=null;function E(){if(w!==null)return w;var B=1048576,D=[];D[0]=2;for(var q=1,j=3;j<B;j+=2){for(var J=Math.ceil(Math.sqrt(j)),Y=0;Y<q&&D[Y]<=J&&j%D[Y]!==0;Y++);q!==Y&&D[Y]<=J||(D[q++]=j)}return w=D,D}function A(B){for(var D=E(),q=0;q<D.length;q++)if(B.modn(D[q])===0)return B.cmpn(D[q])===0;return!0}function C(B){var D=e.mont(B);return u.toRed(D).redPow(B.subn(1)).fromRed().cmpn(1)===0}function k(B,D){if(B<16)return D===2||D===5?new e([140,123]):new e([140,39]);D=new e(D);for(var q,j;;){for(q=new e(t(Math.ceil(B/8)));q.bitLength()>B;)q.ishrn(1);if(q.isEven()&&q.iadd(l),q.testn(1)||q.iadd(u),D.cmp(u)){if(!D.cmp(d))for(;q.mod(m).cmp(y);)q.iadd(_)}else for(;q.mod(n).cmp(b);)q.iadd(_);if(j=q.shrn(1),A(j)&&A(q)&&C(j)&&C(q)&&o.test(j)&&o.test(q))return q}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$2={modp1,modp2,modp5,modp14,modp15,modp16,modp17,modp18};var dh,hasRequiredDh;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var t=bnExports$4,e=requireMr(),n=new e,a=new t(24),o=new t(11),l=new t(10),u=new t(3),d=new t(7),m=requireGeneratePrime(),y=browserExports$2;dh=A;function b(k,B){return B=B||"utf8",Buffer$y.isBuffer(k)||(k=new Buffer$y(k,B)),this._pub=new t(k),this}function _(k,B){return B=B||"utf8",Buffer$y.isBuffer(k)||(k=new Buffer$y(k,B)),this._priv=new t(k),this}var w={};function E(k,B){var D=B.toString("hex"),q=[D,k.toString(16)].join("_");if(q in w)return w[q];var j=0;if(k.isEven()||!m.simpleSieve||!m.fermatTest(k)||!n.test(k))return j+=1,D==="02"||D==="05"?j+=8:j+=4,w[q]=j,j;n.test(k.shrn(1))||(j+=2);var J;switch(D){case"02":k.mod(a).cmp(o)&&(j+=8);break;case"05":J=k.mod(l),J.cmp(u)&&J.cmp(d)&&(j+=8);break;default:j+=4}return w[q]=j,j}function A(k,B,D){this.setGenerator(B),this.__prime=new t(k),this._prime=t.mont(this.__prime),this._primeLen=k.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,D?(this.setPublicKey=b,this.setPrivateKey=_):this._primeCode=8}Object.defineProperty(A.prototype,"verifyError",{enumerable:!0,get:function(){return typeof this._primeCode!="number"&&(this._primeCode=E(this.__prime,this.__gen)),this._primeCode}}),A.prototype.generateKeys=function(){return this._priv||(this._priv=new t(y(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},A.prototype.computeSecret=function(k){k=new t(k),k=k.toRed(this._prime);var B=k.redPow(this._priv).fromRed(),D=new Buffer$y(B.toArray()),q=this.getPrime();if(D.length<q.length){var j=new Buffer$y(q.length-D.length);j.fill(0),D=Buffer$y.concat([j,D])}return D},A.prototype.getPublicKey=function(B){return C(this._pub,B)},A.prototype.getPrivateKey=function(B){return C(this._priv,B)},A.prototype.getPrime=function(k){return C(this.__prime,k)},A.prototype.getGenerator=function(k){return C(this._gen,k)},A.prototype.setGenerator=function(k,B){return B=B||"utf8",Buffer$y.isBuffer(k)||(k=new Buffer$y(k,B)),this.__gen=k,this._gen=new t(k),this};function C(k,B){var D=new Buffer$y(k.toArray());return B?D.toString(B):D}return dh}var hasRequiredBrowser$3;function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$9;hasRequiredBrowser$3=1;var t=requireGeneratePrime(),e=require$$1$2,n=requireDh();function a(u){var d=new Buffer$y(e[u].prime,"hex"),m=new Buffer$y(e[u].gen,"hex");return new n(d,m)}var o={binary:!0,hex:!0,base64:!0};function l(u,d,m,y){return Buffer$y.isBuffer(d)||o[d]===void 0?l(u,"binary",d,m):(d=d||"binary",y=y||"binary",m=m||new Buffer$y([2]),Buffer$y.isBuffer(m)||(m=new Buffer$y(m,y)),typeof u=="number"?new n(t(u,m),m,!0):(Buffer$y.isBuffer(u)||(u=new Buffer$y(u,d)),new n(u,m,!0)))}return browser$9.DiffieHellmanGroup=browser$9.createDiffieHellmanGroup=browser$9.getDiffieHellman=a,browser$9.createDiffieHellman=browser$9.DiffieHellman=l,browser$9}var signExports={},sign$2={get exports(){return signExports},set exports(t){signExports=t}},bnExports$3={},bn$3={get exports(){return bnExports$3},set exports(t){bnExports$3=t}};(function(t){(function(e,n){function a(I,x){if(!I)throw new Error(x||"Assertion failed")}function o(I,x){I.super_=x;var T=function(){};T.prototype=x.prototype,I.prototype=new T,I.prototype.constructor=I}function l(I,x,T){if(l.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((x==="le"||x==="be")&&(T=x,x=10),this._init(I||0,x||10,T||"be"))}typeof e=="object"?e.exports=l:n.BN=l,l.BN=l,l.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=require$$0$2.Buffer}catch{}l.isBN=function(x){return x instanceof l?!0:x!==null&&typeof x=="object"&&x.constructor.wordSize===l.wordSize&&Array.isArray(x.words)},l.max=function(x,T){return x.cmp(T)>0?x:T},l.min=function(x,T){return x.cmp(T)<0?x:T},l.prototype._init=function(x,T,M){if(typeof x=="number")return this._initNumber(x,T,M);if(typeof x=="object")return this._initArray(x,T,M);T==="hex"&&(T=16),a(T===(T|0)&&T>=2&&T<=36),x=x.toString().replace(/\s+/g,"");var O=0;x[0]==="-"&&(O++,this.negative=1),O<x.length&&(T===16?this._parseHex(x,O,M):(this._parseBase(x,T,O),M==="le"&&this._initArray(this.toArray(),T,M)))},l.prototype._initNumber=function(x,T,M){x<0&&(this.negative=1,x=-x),x<67108864?(this.words=[x&67108863],this.length=1):x<4503599627370496?(this.words=[x&67108863,x/67108864&67108863],this.length=2):(a(x<9007199254740992),this.words=[x&67108863,x/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),T,M)},l.prototype._initArray=function(x,T,M){if(a(typeof x.length=="number"),x.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(x.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var z,X,H=0;if(M==="be")for(O=x.length-1,z=0;O>=0;O-=3)X=x[O]|x[O-1]<<8|x[O-2]<<16,this.words[z]|=X<<H&67108863,this.words[z+1]=X>>>26-H&67108863,H+=24,H>=26&&(H-=26,z++);else if(M==="le")for(O=0,z=0;O<x.length;O+=3)X=x[O]|x[O+1]<<8|x[O+2]<<16,this.words[z]|=X<<H&67108863,this.words[z+1]=X>>>26-H&67108863,H+=24,H>=26&&(H-=26,z++);return this._strip()};function d(I,x){var T=I.charCodeAt(x);if(T>=48&&T<=57)return T-48;if(T>=65&&T<=70)return T-55;if(T>=97&&T<=102)return T-87;a(!1,"Invalid character in "+I)}function m(I,x,T){var M=d(I,T);return T-1>=x&&(M|=d(I,T-1)<<4),M}l.prototype._parseHex=function(x,T,M){this.length=Math.ceil((x.length-T)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var z=0,X=0,H;if(M==="be")for(O=x.length-1;O>=T;O-=2)H=m(x,T,O)<<z,this.words[X]|=H&67108863,z>=18?(z-=18,X+=1,this.words[X]|=H>>>26):z+=8;else{var P=x.length-T;for(O=P%2===0?T+1:T;O<x.length;O+=2)H=m(x,T,O)<<z,this.words[X]|=H&67108863,z>=18?(z-=18,X+=1,this.words[X]|=H>>>26):z+=8}this._strip()};function y(I,x,T,M){for(var O=0,z=0,X=Math.min(I.length,T),H=x;H<X;H++){var P=I.charCodeAt(H)-48;O*=M,P>=49?z=P-49+10:P>=17?z=P-17+10:z=P,a(P>=0&&z<M,"Invalid character"),O+=z}return O}l.prototype._parseBase=function(x,T,M){this.words=[0],this.length=1;for(var O=0,z=1;z<=67108863;z*=T)O++;O--,z=z/T|0;for(var X=x.length-M,H=X%O,P=Math.min(X,X-H)+M,S=0,F=M;F<P;F+=O)S=y(x,F,F+O,T),this.imuln(z),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S);if(H!==0){var ue=1;for(S=y(x,F,x.length,T),F=0;F<H;F++)ue*=T;this.imuln(ue),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S)}this._strip()},l.prototype.copy=function(x){x.words=new Array(this.length);for(var T=0;T<this.length;T++)x.words[T]=this.words[T];x.length=this.length,x.negative=this.negative,x.red=this.red};function b(I,x){I.words=x.words,I.length=x.length,I.negative=x.negative,I.red=x.red}if(l.prototype._move=function(x){b(x,this)},l.prototype.clone=function(){var x=new l(null);return this.copy(x),x},l.prototype._expand=function(x){for(;this.length<x;)this.words[this.length++]=0;return this},l.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{l.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{l.prototype.inspect=_}else l.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(x,T){x=x||10,T=T|0||1;var M;if(x===16||x==="hex"){M="";for(var O=0,z=0,X=0;X<this.length;X++){var H=this.words[X],P=((H<<O|z)&16777215).toString(16);z=H>>>24-O&16777215,O+=2,O>=26&&(O-=26,X--),z!==0||X!==this.length-1?M=w[6-P.length]+P+M:M=P+M}for(z!==0&&(M=z.toString(16)+M);M.length%T!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(x===(x|0)&&x>=2&&x<=36){var S=E[x],F=A[x];M="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var ee=ue.modrn(F).toString(x);ue=ue.idivn(F),ue.isZero()?M=ee+M:M=w[S-ee.length]+ee+M}for(this.isZero()&&(M="0"+M);M.length%T!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}a(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var x=this.words[0];return this.length===2?x+=this.words[1]*67108864:this.length===3&&this.words[2]===1?x+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-x:x},l.prototype.toJSON=function(){return this.toString(16,2)},u&&(l.prototype.toBuffer=function(x,T){return this.toArrayLike(u,x,T)}),l.prototype.toArray=function(x,T){return this.toArrayLike(Array,x,T)};var C=function(x,T){return x.allocUnsafe?x.allocUnsafe(T):new x(T)};l.prototype.toArrayLike=function(x,T,M){this._strip();var O=this.byteLength(),z=M||Math.max(1,O);a(O<=z,"byte array longer than desired length"),a(z>0,"Requested array length <= 0");var X=C(x,z),H=T==="le"?"LE":"BE";return this["_toArrayLike"+H](X,O),X},l.prototype._toArrayLikeLE=function(x,T){for(var M=0,O=0,z=0,X=0;z<this.length;z++){var H=this.words[z]<<X|O;x[M++]=H&255,M<x.length&&(x[M++]=H>>8&255),M<x.length&&(x[M++]=H>>16&255),X===6?(M<x.length&&(x[M++]=H>>24&255),O=0,X=0):(O=H>>>24,X+=2)}if(M<x.length)for(x[M++]=O;M<x.length;)x[M++]=0},l.prototype._toArrayLikeBE=function(x,T){for(var M=x.length-1,O=0,z=0,X=0;z<this.length;z++){var H=this.words[z]<<X|O;x[M--]=H&255,M>=0&&(x[M--]=H>>8&255),M>=0&&(x[M--]=H>>16&255),X===6?(M>=0&&(x[M--]=H>>24&255),O=0,X=0):(O=H>>>24,X+=2)}if(M>=0)for(x[M--]=O;M>=0;)x[M--]=0},Math.clz32?l.prototype._countBits=function(x){return 32-Math.clz32(x)}:l.prototype._countBits=function(x){var T=x,M=0;return T>=4096&&(M+=13,T>>>=13),T>=64&&(M+=7,T>>>=7),T>=8&&(M+=4,T>>>=4),T>=2&&(M+=2,T>>>=2),M+T},l.prototype._zeroBits=function(x){if(x===0)return 26;var T=x,M=0;return T&8191||(M+=13,T>>>=13),T&127||(M+=7,T>>>=7),T&15||(M+=4,T>>>=4),T&3||(M+=2,T>>>=2),T&1||M++,M},l.prototype.bitLength=function(){var x=this.words[this.length-1],T=this._countBits(x);return(this.length-1)*26+T};function k(I){for(var x=new Array(I.bitLength()),T=0;T<x.length;T++){var M=T/26|0,O=T%26;x[T]=I.words[M]>>>O&1}return x}l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var x=0,T=0;T<this.length;T++){var M=this._zeroBits(this.words[T]);if(x+=M,M!==26)break}return x},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(x){return this.negative!==0?this.abs().inotn(x).iaddn(1):this.clone()},l.prototype.fromTwos=function(x){return this.testn(x-1)?this.notn(x).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(x){for(;this.length<x.length;)this.words[this.length++]=0;for(var T=0;T<x.length;T++)this.words[T]=this.words[T]|x.words[T];return this._strip()},l.prototype.ior=function(x){return a((this.negative|x.negative)===0),this.iuor(x)},l.prototype.or=function(x){return this.length>x.length?this.clone().ior(x):x.clone().ior(this)},l.prototype.uor=function(x){return this.length>x.length?this.clone().iuor(x):x.clone().iuor(this)},l.prototype.iuand=function(x){var T;this.length>x.length?T=x:T=this;for(var M=0;M<T.length;M++)this.words[M]=this.words[M]&x.words[M];return this.length=T.length,this._strip()},l.prototype.iand=function(x){return a((this.negative|x.negative)===0),this.iuand(x)},l.prototype.and=function(x){return this.length>x.length?this.clone().iand(x):x.clone().iand(this)},l.prototype.uand=function(x){return this.length>x.length?this.clone().iuand(x):x.clone().iuand(this)},l.prototype.iuxor=function(x){var T,M;this.length>x.length?(T=this,M=x):(T=x,M=this);for(var O=0;O<M.length;O++)this.words[O]=T.words[O]^M.words[O];if(this!==T)for(;O<T.length;O++)this.words[O]=T.words[O];return this.length=T.length,this._strip()},l.prototype.ixor=function(x){return a((this.negative|x.negative)===0),this.iuxor(x)},l.prototype.xor=function(x){return this.length>x.length?this.clone().ixor(x):x.clone().ixor(this)},l.prototype.uxor=function(x){return this.length>x.length?this.clone().iuxor(x):x.clone().iuxor(this)},l.prototype.inotn=function(x){a(typeof x=="number"&&x>=0);var T=Math.ceil(x/26)|0,M=x%26;this._expand(T),M>0&&T--;for(var O=0;O<T;O++)this.words[O]=~this.words[O]&67108863;return M>0&&(this.words[O]=~this.words[O]&67108863>>26-M),this._strip()},l.prototype.notn=function(x){return this.clone().inotn(x)},l.prototype.setn=function(x,T){a(typeof x=="number"&&x>=0);var M=x/26|0,O=x%26;return this._expand(M+1),T?this.words[M]=this.words[M]|1<<O:this.words[M]=this.words[M]&~(1<<O),this._strip()},l.prototype.iadd=function(x){var T;if(this.negative!==0&&x.negative===0)return this.negative=0,T=this.isub(x),this.negative^=1,this._normSign();if(this.negative===0&&x.negative!==0)return x.negative=0,T=this.isub(x),x.negative=1,T._normSign();var M,O;this.length>x.length?(M=this,O=x):(M=x,O=this);for(var z=0,X=0;X<O.length;X++)T=(M.words[X]|0)+(O.words[X]|0)+z,this.words[X]=T&67108863,z=T>>>26;for(;z!==0&&X<M.length;X++)T=(M.words[X]|0)+z,this.words[X]=T&67108863,z=T>>>26;if(this.length=M.length,z!==0)this.words[this.length]=z,this.length++;else if(M!==this)for(;X<M.length;X++)this.words[X]=M.words[X];return this},l.prototype.add=function(x){var T;return x.negative!==0&&this.negative===0?(x.negative=0,T=this.sub(x),x.negative^=1,T):x.negative===0&&this.negative!==0?(this.negative=0,T=x.sub(this),this.negative=1,T):this.length>x.length?this.clone().iadd(x):x.clone().iadd(this)},l.prototype.isub=function(x){if(x.negative!==0){x.negative=0;var T=this.iadd(x);return x.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(x),this.negative=1,this._normSign();var M=this.cmp(x);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,z;M>0?(O=this,z=x):(O=x,z=this);for(var X=0,H=0;H<z.length;H++)T=(O.words[H]|0)-(z.words[H]|0)+X,X=T>>26,this.words[H]=T&67108863;for(;X!==0&&H<O.length;H++)T=(O.words[H]|0)+X,X=T>>26,this.words[H]=T&67108863;if(X===0&&H<O.length&&O!==this)for(;H<O.length;H++)this.words[H]=O.words[H];return this.length=Math.max(this.length,H),O!==this&&(this.negative=1),this._strip()},l.prototype.sub=function(x){return this.clone().isub(x)};function B(I,x,T){T.negative=x.negative^I.negative;var M=I.length+x.length|0;T.length=M,M=M-1|0;var O=I.words[0]|0,z=x.words[0]|0,X=O*z,H=X&67108863,P=X/67108864|0;T.words[0]=H;for(var S=1;S<M;S++){for(var F=P>>>26,ue=P&67108863,ee=Math.min(S,x.length-1),fe=Math.max(0,S-I.length+1);fe<=ee;fe++){var le=S-fe|0;O=I.words[le]|0,z=x.words[fe]|0,X=O*z+ue,F+=X/67108864|0,ue=X&67108863}T.words[S]=ue|0,P=F|0}return P!==0?T.words[S]=P|0:T.length--,T._strip()}var D=function(x,T,M){var O=x.words,z=T.words,X=M.words,H=0,P,S,F,ue=O[0]|0,ee=ue&8191,fe=ue>>>13,le=O[1]|0,ce=le&8191,pe=le>>>13,se=O[2]|0,de=se&8191,re=se>>>13,me=O[3]|0,te=me&8191,ve=me>>>13,Se=O[4]|0,be=Se&8191,_e=Se>>>13,ye=O[5]|0,$e=ye&8191,Ie=ye>>>13,Be=O[6]|0,Me=Be&8191,Fe=Be>>>13,Ve=O[7]|0,Oe=Ve&8191,ge=Ve>>>13,ie=O[8]|0,he=ie&8191,we=ie>>>13,Re=O[9]|0,De=Re&8191,Le=Re>>>13,tt=z[0]|0,We=tt&8191,Ge=tt>>>13,_t=z[1]|0,rt=_t&8191,ot=_t>>>13,Rt=z[2]|0,xt=Rt&8191,ht=Rt>>>13,Tt=z[3]|0,dt=Tt&8191,it=Tt>>>13,Ct=z[4]|0,pt=Ct&8191,at=Ct>>>13,kt=z[5]|0,mt=kt&8191,nt=kt>>>13,Bt=z[6]|0,Ee=Bt&8191,ke=Bt>>>13,Pe=z[7]|0,ne=Pe&8191,xe=Pe>>>13,Te=z[8]|0,Ae=Te&8191,Ce=Te>>>13,Ne=z[9]|0,Ue=Ne&8191,je=Ne>>>13;M.negative=x.negative^T.negative,M.length=19,P=Math.imul(ee,We),S=Math.imul(ee,Ge),S=S+Math.imul(fe,We)|0,F=Math.imul(fe,Ge);var Ke=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,P=Math.imul(ce,We),S=Math.imul(ce,Ge),S=S+Math.imul(pe,We)|0,F=Math.imul(pe,Ge),P=P+Math.imul(ee,rt)|0,S=S+Math.imul(ee,ot)|0,S=S+Math.imul(fe,rt)|0,F=F+Math.imul(fe,ot)|0;var He=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(He>>>26)|0,He&=67108863,P=Math.imul(de,We),S=Math.imul(de,Ge),S=S+Math.imul(re,We)|0,F=Math.imul(re,Ge),P=P+Math.imul(ce,rt)|0,S=S+Math.imul(ce,ot)|0,S=S+Math.imul(pe,rt)|0,F=F+Math.imul(pe,ot)|0,P=P+Math.imul(ee,xt)|0,S=S+Math.imul(ee,ht)|0,S=S+Math.imul(fe,xt)|0,F=F+Math.imul(fe,ht)|0;var ze=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(ze>>>26)|0,ze&=67108863,P=Math.imul(te,We),S=Math.imul(te,Ge),S=S+Math.imul(ve,We)|0,F=Math.imul(ve,Ge),P=P+Math.imul(de,rt)|0,S=S+Math.imul(de,ot)|0,S=S+Math.imul(re,rt)|0,F=F+Math.imul(re,ot)|0,P=P+Math.imul(ce,xt)|0,S=S+Math.imul(ce,ht)|0,S=S+Math.imul(pe,xt)|0,F=F+Math.imul(pe,ht)|0,P=P+Math.imul(ee,dt)|0,S=S+Math.imul(ee,it)|0,S=S+Math.imul(fe,dt)|0,F=F+Math.imul(fe,it)|0;var Ye=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,P=Math.imul(be,We),S=Math.imul(be,Ge),S=S+Math.imul(_e,We)|0,F=Math.imul(_e,Ge),P=P+Math.imul(te,rt)|0,S=S+Math.imul(te,ot)|0,S=S+Math.imul(ve,rt)|0,F=F+Math.imul(ve,ot)|0,P=P+Math.imul(de,xt)|0,S=S+Math.imul(de,ht)|0,S=S+Math.imul(re,xt)|0,F=F+Math.imul(re,ht)|0,P=P+Math.imul(ce,dt)|0,S=S+Math.imul(ce,it)|0,S=S+Math.imul(pe,dt)|0,F=F+Math.imul(pe,it)|0,P=P+Math.imul(ee,pt)|0,S=S+Math.imul(ee,at)|0,S=S+Math.imul(fe,pt)|0,F=F+Math.imul(fe,at)|0;var Qe=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,P=Math.imul($e,We),S=Math.imul($e,Ge),S=S+Math.imul(Ie,We)|0,F=Math.imul(Ie,Ge),P=P+Math.imul(be,rt)|0,S=S+Math.imul(be,ot)|0,S=S+Math.imul(_e,rt)|0,F=F+Math.imul(_e,ot)|0,P=P+Math.imul(te,xt)|0,S=S+Math.imul(te,ht)|0,S=S+Math.imul(ve,xt)|0,F=F+Math.imul(ve,ht)|0,P=P+Math.imul(de,dt)|0,S=S+Math.imul(de,it)|0,S=S+Math.imul(re,dt)|0,F=F+Math.imul(re,it)|0,P=P+Math.imul(ce,pt)|0,S=S+Math.imul(ce,at)|0,S=S+Math.imul(pe,pt)|0,F=F+Math.imul(pe,at)|0,P=P+Math.imul(ee,mt)|0,S=S+Math.imul(ee,nt)|0,S=S+Math.imul(fe,mt)|0,F=F+Math.imul(fe,nt)|0;var st=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(st>>>26)|0,st&=67108863,P=Math.imul(Me,We),S=Math.imul(Me,Ge),S=S+Math.imul(Fe,We)|0,F=Math.imul(Fe,Ge),P=P+Math.imul($e,rt)|0,S=S+Math.imul($e,ot)|0,S=S+Math.imul(Ie,rt)|0,F=F+Math.imul(Ie,ot)|0,P=P+Math.imul(be,xt)|0,S=S+Math.imul(be,ht)|0,S=S+Math.imul(_e,xt)|0,F=F+Math.imul(_e,ht)|0,P=P+Math.imul(te,dt)|0,S=S+Math.imul(te,it)|0,S=S+Math.imul(ve,dt)|0,F=F+Math.imul(ve,it)|0,P=P+Math.imul(de,pt)|0,S=S+Math.imul(de,at)|0,S=S+Math.imul(re,pt)|0,F=F+Math.imul(re,at)|0,P=P+Math.imul(ce,mt)|0,S=S+Math.imul(ce,nt)|0,S=S+Math.imul(pe,mt)|0,F=F+Math.imul(pe,nt)|0,P=P+Math.imul(ee,Ee)|0,S=S+Math.imul(ee,ke)|0,S=S+Math.imul(fe,Ee)|0,F=F+Math.imul(fe,ke)|0;var Ze=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,P=Math.imul(Oe,We),S=Math.imul(Oe,Ge),S=S+Math.imul(ge,We)|0,F=Math.imul(ge,Ge),P=P+Math.imul(Me,rt)|0,S=S+Math.imul(Me,ot)|0,S=S+Math.imul(Fe,rt)|0,F=F+Math.imul(Fe,ot)|0,P=P+Math.imul($e,xt)|0,S=S+Math.imul($e,ht)|0,S=S+Math.imul(Ie,xt)|0,F=F+Math.imul(Ie,ht)|0,P=P+Math.imul(be,dt)|0,S=S+Math.imul(be,it)|0,S=S+Math.imul(_e,dt)|0,F=F+Math.imul(_e,it)|0,P=P+Math.imul(te,pt)|0,S=S+Math.imul(te,at)|0,S=S+Math.imul(ve,pt)|0,F=F+Math.imul(ve,at)|0,P=P+Math.imul(de,mt)|0,S=S+Math.imul(de,nt)|0,S=S+Math.imul(re,mt)|0,F=F+Math.imul(re,nt)|0,P=P+Math.imul(ce,Ee)|0,S=S+Math.imul(ce,ke)|0,S=S+Math.imul(pe,Ee)|0,F=F+Math.imul(pe,ke)|0,P=P+Math.imul(ee,ne)|0,S=S+Math.imul(ee,xe)|0,S=S+Math.imul(fe,ne)|0,F=F+Math.imul(fe,xe)|0;var et=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(et>>>26)|0,et&=67108863,P=Math.imul(he,We),S=Math.imul(he,Ge),S=S+Math.imul(we,We)|0,F=Math.imul(we,Ge),P=P+Math.imul(Oe,rt)|0,S=S+Math.imul(Oe,ot)|0,S=S+Math.imul(ge,rt)|0,F=F+Math.imul(ge,ot)|0,P=P+Math.imul(Me,xt)|0,S=S+Math.imul(Me,ht)|0,S=S+Math.imul(Fe,xt)|0,F=F+Math.imul(Fe,ht)|0,P=P+Math.imul($e,dt)|0,S=S+Math.imul($e,it)|0,S=S+Math.imul(Ie,dt)|0,F=F+Math.imul(Ie,it)|0,P=P+Math.imul(be,pt)|0,S=S+Math.imul(be,at)|0,S=S+Math.imul(_e,pt)|0,F=F+Math.imul(_e,at)|0,P=P+Math.imul(te,mt)|0,S=S+Math.imul(te,nt)|0,S=S+Math.imul(ve,mt)|0,F=F+Math.imul(ve,nt)|0,P=P+Math.imul(de,Ee)|0,S=S+Math.imul(de,ke)|0,S=S+Math.imul(re,Ee)|0,F=F+Math.imul(re,ke)|0,P=P+Math.imul(ce,ne)|0,S=S+Math.imul(ce,xe)|0,S=S+Math.imul(pe,ne)|0,F=F+Math.imul(pe,xe)|0,P=P+Math.imul(ee,Ae)|0,S=S+Math.imul(ee,Ce)|0,S=S+Math.imul(fe,Ae)|0,F=F+Math.imul(fe,Ce)|0;var vt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(vt>>>26)|0,vt&=67108863,P=Math.imul(De,We),S=Math.imul(De,Ge),S=S+Math.imul(Le,We)|0,F=Math.imul(Le,Ge),P=P+Math.imul(he,rt)|0,S=S+Math.imul(he,ot)|0,S=S+Math.imul(we,rt)|0,F=F+Math.imul(we,ot)|0,P=P+Math.imul(Oe,xt)|0,S=S+Math.imul(Oe,ht)|0,S=S+Math.imul(ge,xt)|0,F=F+Math.imul(ge,ht)|0,P=P+Math.imul(Me,dt)|0,S=S+Math.imul(Me,it)|0,S=S+Math.imul(Fe,dt)|0,F=F+Math.imul(Fe,it)|0,P=P+Math.imul($e,pt)|0,S=S+Math.imul($e,at)|0,S=S+Math.imul(Ie,pt)|0,F=F+Math.imul(Ie,at)|0,P=P+Math.imul(be,mt)|0,S=S+Math.imul(be,nt)|0,S=S+Math.imul(_e,mt)|0,F=F+Math.imul(_e,nt)|0,P=P+Math.imul(te,Ee)|0,S=S+Math.imul(te,ke)|0,S=S+Math.imul(ve,Ee)|0,F=F+Math.imul(ve,ke)|0,P=P+Math.imul(de,ne)|0,S=S+Math.imul(de,xe)|0,S=S+Math.imul(re,ne)|0,F=F+Math.imul(re,xe)|0,P=P+Math.imul(ce,Ae)|0,S=S+Math.imul(ce,Ce)|0,S=S+Math.imul(pe,Ae)|0,F=F+Math.imul(pe,Ce)|0,P=P+Math.imul(ee,Ue)|0,S=S+Math.imul(ee,je)|0,S=S+Math.imul(fe,Ue)|0,F=F+Math.imul(fe,je)|0;var yt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(yt>>>26)|0,yt&=67108863,P=Math.imul(De,rt),S=Math.imul(De,ot),S=S+Math.imul(Le,rt)|0,F=Math.imul(Le,ot),P=P+Math.imul(he,xt)|0,S=S+Math.imul(he,ht)|0,S=S+Math.imul(we,xt)|0,F=F+Math.imul(we,ht)|0,P=P+Math.imul(Oe,dt)|0,S=S+Math.imul(Oe,it)|0,S=S+Math.imul(ge,dt)|0,F=F+Math.imul(ge,it)|0,P=P+Math.imul(Me,pt)|0,S=S+Math.imul(Me,at)|0,S=S+Math.imul(Fe,pt)|0,F=F+Math.imul(Fe,at)|0,P=P+Math.imul($e,mt)|0,S=S+Math.imul($e,nt)|0,S=S+Math.imul(Ie,mt)|0,F=F+Math.imul(Ie,nt)|0,P=P+Math.imul(be,Ee)|0,S=S+Math.imul(be,ke)|0,S=S+Math.imul(_e,Ee)|0,F=F+Math.imul(_e,ke)|0,P=P+Math.imul(te,ne)|0,S=S+Math.imul(te,xe)|0,S=S+Math.imul(ve,ne)|0,F=F+Math.imul(ve,xe)|0,P=P+Math.imul(de,Ae)|0,S=S+Math.imul(de,Ce)|0,S=S+Math.imul(re,Ae)|0,F=F+Math.imul(re,Ce)|0,P=P+Math.imul(ce,Ue)|0,S=S+Math.imul(ce,je)|0,S=S+Math.imul(pe,Ue)|0,F=F+Math.imul(pe,je)|0;var wt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(wt>>>26)|0,wt&=67108863,P=Math.imul(De,xt),S=Math.imul(De,ht),S=S+Math.imul(Le,xt)|0,F=Math.imul(Le,ht),P=P+Math.imul(he,dt)|0,S=S+Math.imul(he,it)|0,S=S+Math.imul(we,dt)|0,F=F+Math.imul(we,it)|0,P=P+Math.imul(Oe,pt)|0,S=S+Math.imul(Oe,at)|0,S=S+Math.imul(ge,pt)|0,F=F+Math.imul(ge,at)|0,P=P+Math.imul(Me,mt)|0,S=S+Math.imul(Me,nt)|0,S=S+Math.imul(Fe,mt)|0,F=F+Math.imul(Fe,nt)|0,P=P+Math.imul($e,Ee)|0,S=S+Math.imul($e,ke)|0,S=S+Math.imul(Ie,Ee)|0,F=F+Math.imul(Ie,ke)|0,P=P+Math.imul(be,ne)|0,S=S+Math.imul(be,xe)|0,S=S+Math.imul(_e,ne)|0,F=F+Math.imul(_e,xe)|0,P=P+Math.imul(te,Ae)|0,S=S+Math.imul(te,Ce)|0,S=S+Math.imul(ve,Ae)|0,F=F+Math.imul(ve,Ce)|0,P=P+Math.imul(de,Ue)|0,S=S+Math.imul(de,je)|0,S=S+Math.imul(re,Ue)|0,F=F+Math.imul(re,je)|0;var bt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(bt>>>26)|0,bt&=67108863,P=Math.imul(De,dt),S=Math.imul(De,it),S=S+Math.imul(Le,dt)|0,F=Math.imul(Le,it),P=P+Math.imul(he,pt)|0,S=S+Math.imul(he,at)|0,S=S+Math.imul(we,pt)|0,F=F+Math.imul(we,at)|0,P=P+Math.imul(Oe,mt)|0,S=S+Math.imul(Oe,nt)|0,S=S+Math.imul(ge,mt)|0,F=F+Math.imul(ge,nt)|0,P=P+Math.imul(Me,Ee)|0,S=S+Math.imul(Me,ke)|0,S=S+Math.imul(Fe,Ee)|0,F=F+Math.imul(Fe,ke)|0,P=P+Math.imul($e,ne)|0,S=S+Math.imul($e,xe)|0,S=S+Math.imul(Ie,ne)|0,F=F+Math.imul(Ie,xe)|0,P=P+Math.imul(be,Ae)|0,S=S+Math.imul(be,Ce)|0,S=S+Math.imul(_e,Ae)|0,F=F+Math.imul(_e,Ce)|0,P=P+Math.imul(te,Ue)|0,S=S+Math.imul(te,je)|0,S=S+Math.imul(ve,Ue)|0,F=F+Math.imul(ve,je)|0;var $t=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+($t>>>26)|0,$t&=67108863,P=Math.imul(De,pt),S=Math.imul(De,at),S=S+Math.imul(Le,pt)|0,F=Math.imul(Le,at),P=P+Math.imul(he,mt)|0,S=S+Math.imul(he,nt)|0,S=S+Math.imul(we,mt)|0,F=F+Math.imul(we,nt)|0,P=P+Math.imul(Oe,Ee)|0,S=S+Math.imul(Oe,ke)|0,S=S+Math.imul(ge,Ee)|0,F=F+Math.imul(ge,ke)|0,P=P+Math.imul(Me,ne)|0,S=S+Math.imul(Me,xe)|0,S=S+Math.imul(Fe,ne)|0,F=F+Math.imul(Fe,xe)|0,P=P+Math.imul($e,Ae)|0,S=S+Math.imul($e,Ce)|0,S=S+Math.imul(Ie,Ae)|0,F=F+Math.imul(Ie,Ce)|0,P=P+Math.imul(be,Ue)|0,S=S+Math.imul(be,je)|0,S=S+Math.imul(_e,Ue)|0,F=F+Math.imul(_e,je)|0;var At=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(At>>>26)|0,At&=67108863,P=Math.imul(De,mt),S=Math.imul(De,nt),S=S+Math.imul(Le,mt)|0,F=Math.imul(Le,nt),P=P+Math.imul(he,Ee)|0,S=S+Math.imul(he,ke)|0,S=S+Math.imul(we,Ee)|0,F=F+Math.imul(we,ke)|0,P=P+Math.imul(Oe,ne)|0,S=S+Math.imul(Oe,xe)|0,S=S+Math.imul(ge,ne)|0,F=F+Math.imul(ge,xe)|0,P=P+Math.imul(Me,Ae)|0,S=S+Math.imul(Me,Ce)|0,S=S+Math.imul(Fe,Ae)|0,F=F+Math.imul(Fe,Ce)|0,P=P+Math.imul($e,Ue)|0,S=S+Math.imul($e,je)|0,S=S+Math.imul(Ie,Ue)|0,F=F+Math.imul(Ie,je)|0;var Et=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Et>>>26)|0,Et&=67108863,P=Math.imul(De,Ee),S=Math.imul(De,ke),S=S+Math.imul(Le,Ee)|0,F=Math.imul(Le,ke),P=P+Math.imul(he,ne)|0,S=S+Math.imul(he,xe)|0,S=S+Math.imul(we,ne)|0,F=F+Math.imul(we,xe)|0,P=P+Math.imul(Oe,Ae)|0,S=S+Math.imul(Oe,Ce)|0,S=S+Math.imul(ge,Ae)|0,F=F+Math.imul(ge,Ce)|0,P=P+Math.imul(Me,Ue)|0,S=S+Math.imul(Me,je)|0,S=S+Math.imul(Fe,Ue)|0,F=F+Math.imul(Fe,je)|0;var Xe=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,P=Math.imul(De,ne),S=Math.imul(De,xe),S=S+Math.imul(Le,ne)|0,F=Math.imul(Le,xe),P=P+Math.imul(he,Ae)|0,S=S+Math.imul(he,Ce)|0,S=S+Math.imul(we,Ae)|0,F=F+Math.imul(we,Ce)|0,P=P+Math.imul(Oe,Ue)|0,S=S+Math.imul(Oe,je)|0,S=S+Math.imul(ge,Ue)|0,F=F+Math.imul(ge,je)|0;var Je=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Je>>>26)|0,Je&=67108863,P=Math.imul(De,Ae),S=Math.imul(De,Ce),S=S+Math.imul(Le,Ae)|0,F=Math.imul(Le,Ce),P=P+Math.imul(he,Ue)|0,S=S+Math.imul(he,je)|0,S=S+Math.imul(we,Ue)|0,F=F+Math.imul(we,je)|0;var lt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(lt>>>26)|0,lt&=67108863,P=Math.imul(De,Ue),S=Math.imul(De,je),S=S+Math.imul(Le,Ue)|0,F=Math.imul(Le,je);var ct=(H+P|0)+((S&8191)<<13)|0;return H=(F+(S>>>13)|0)+(ct>>>26)|0,ct&=67108863,X[0]=Ke,X[1]=He,X[2]=ze,X[3]=Ye,X[4]=Qe,X[5]=st,X[6]=Ze,X[7]=et,X[8]=vt,X[9]=yt,X[10]=wt,X[11]=bt,X[12]=$t,X[13]=At,X[14]=Et,X[15]=Xe,X[16]=Je,X[17]=lt,X[18]=ct,H!==0&&(X[19]=H,M.length++),M};Math.imul||(D=B);function q(I,x,T){T.negative=x.negative^I.negative,T.length=I.length+x.length;for(var M=0,O=0,z=0;z<T.length-1;z++){var X=O;O=0;for(var H=M&67108863,P=Math.min(z,x.length-1),S=Math.max(0,z-I.length+1);S<=P;S++){var F=z-S,ue=I.words[F]|0,ee=x.words[S]|0,fe=ue*ee,le=fe&67108863;X=X+(fe/67108864|0)|0,le=le+H|0,H=le&67108863,X=X+(le>>>26)|0,O+=X>>>26,X&=67108863}T.words[z]=H,M=X,X=O}return M!==0?T.words[z]=M:T.length--,T._strip()}function j(I,x,T){return q(I,x,T)}l.prototype.mulTo=function(x,T){var M,O=this.length+x.length;return this.length===10&&x.length===10?M=D(this,x,T):O<63?M=B(this,x,T):O<1024?M=q(this,x,T):M=j(this,x,T),M},l.prototype.mul=function(x){var T=new l(null);return T.words=new Array(this.length+x.length),this.mulTo(x,T)},l.prototype.mulf=function(x){var T=new l(null);return T.words=new Array(this.length+x.length),j(this,x,T)},l.prototype.imul=function(x){return this.clone().mulTo(x,this)},l.prototype.imuln=function(x){var T=x<0;T&&(x=-x),a(typeof x=="number"),a(x<67108864);for(var M=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*x,X=(z&67108863)+(M&67108863);M>>=26,M+=z/67108864|0,M+=X>>>26,this.words[O]=X&67108863}return M!==0&&(this.words[O]=M,this.length++),T?this.ineg():this},l.prototype.muln=function(x){return this.clone().imuln(x)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(x){var T=k(x);if(T.length===0)return new l(1);for(var M=this,O=0;O<T.length&&T[O]===0;O++,M=M.sqr());if(++O<T.length)for(var z=M.sqr();O<T.length;O++,z=z.sqr())T[O]!==0&&(M=M.mul(z));return M},l.prototype.iushln=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26,O=67108863>>>26-T<<26-T,z;if(T!==0){var X=0;for(z=0;z<this.length;z++){var H=this.words[z]&O,P=(this.words[z]|0)-H<<T;this.words[z]=P|X,X=H>>>26-T}X&&(this.words[z]=X,this.length++)}if(M!==0){for(z=this.length-1;z>=0;z--)this.words[z+M]=this.words[z];for(z=0;z<M;z++)this.words[z]=0;this.length+=M}return this._strip()},l.prototype.ishln=function(x){return a(this.negative===0),this.iushln(x)},l.prototype.iushrn=function(x,T,M){a(typeof x=="number"&&x>=0);var O;T?O=(T-T%26)/26:O=0;var z=x%26,X=Math.min((x-z)/26,this.length),H=67108863^67108863>>>z<<z,P=M;if(O-=X,O=Math.max(0,O),P){for(var S=0;S<X;S++)P.words[S]=this.words[S];P.length=X}if(X!==0)if(this.length>X)for(this.length-=X,S=0;S<this.length;S++)this.words[S]=this.words[S+X];else this.words[0]=0,this.length=1;var F=0;for(S=this.length-1;S>=0&&(F!==0||S>=O);S--){var ue=this.words[S]|0;this.words[S]=F<<26-z|ue>>>z,F=ue&H}return P&&F!==0&&(P.words[P.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},l.prototype.ishrn=function(x,T,M){return a(this.negative===0),this.iushrn(x,T,M)},l.prototype.shln=function(x){return this.clone().ishln(x)},l.prototype.ushln=function(x){return this.clone().iushln(x)},l.prototype.shrn=function(x){return this.clone().ishrn(x)},l.prototype.ushrn=function(x){return this.clone().iushrn(x)},l.prototype.testn=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26,O=1<<T;if(this.length<=M)return!1;var z=this.words[M];return!!(z&O)},l.prototype.imaskn=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(T!==0&&M++,this.length=Math.min(M,this.length),T!==0){var O=67108863^67108863>>>T<<T;this.words[this.length-1]&=O}return this._strip()},l.prototype.maskn=function(x){return this.clone().imaskn(x)},l.prototype.iaddn=function(x){return a(typeof x=="number"),a(x<67108864),x<0?this.isubn(-x):this.negative!==0?this.length===1&&(this.words[0]|0)<=x?(this.words[0]=x-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(x),this.negative=1,this):this._iaddn(x)},l.prototype._iaddn=function(x){this.words[0]+=x;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},l.prototype.isubn=function(x){if(a(typeof x=="number"),a(x<67108864),x<0)return this.iaddn(-x);if(this.negative!==0)return this.negative=0,this.iaddn(x),this.negative=1,this;if(this.words[0]-=x,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this._strip()},l.prototype.addn=function(x){return this.clone().iaddn(x)},l.prototype.subn=function(x){return this.clone().isubn(x)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(x,T,M){var O=x.length+M,z;this._expand(O);var X,H=0;for(z=0;z<x.length;z++){X=(this.words[z+M]|0)+H;var P=(x.words[z]|0)*T;X-=P&67108863,H=(X>>26)-(P/67108864|0),this.words[z+M]=X&67108863}for(;z<this.length-M;z++)X=(this.words[z+M]|0)+H,H=X>>26,this.words[z+M]=X&67108863;if(H===0)return this._strip();for(a(H===-1),H=0,z=0;z<this.length;z++)X=-(this.words[z]|0)+H,H=X>>26,this.words[z]=X&67108863;return this.negative=1,this._strip()},l.prototype._wordDiv=function(x,T){var M=this.length-x.length,O=this.clone(),z=x,X=z.words[z.length-1]|0,H=this._countBits(X);M=26-H,M!==0&&(z=z.ushln(M),O.iushln(M),X=z.words[z.length-1]|0);var P=O.length-z.length,S;if(T!=="mod"){S=new l(null),S.length=P+1,S.words=new Array(S.length);for(var F=0;F<S.length;F++)S.words[F]=0}var ue=O.clone()._ishlnsubmul(z,1,P);ue.negative===0&&(O=ue,S&&(S.words[P]=1));for(var ee=P-1;ee>=0;ee--){var fe=(O.words[z.length+ee]|0)*67108864+(O.words[z.length+ee-1]|0);for(fe=Math.min(fe/X|0,67108863),O._ishlnsubmul(z,fe,ee);O.negative!==0;)fe--,O.negative=0,O._ishlnsubmul(z,1,ee),O.isZero()||(O.negative^=1);S&&(S.words[ee]=fe)}return S&&S._strip(),O._strip(),T!=="div"&&M!==0&&O.iushrn(M),{div:S||null,mod:O}},l.prototype.divmod=function(x,T,M){if(a(!x.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var O,z,X;return this.negative!==0&&x.negative===0?(X=this.neg().divmod(x,T),T!=="mod"&&(O=X.div.neg()),T!=="div"&&(z=X.mod.neg(),M&&z.negative!==0&&z.iadd(x)),{div:O,mod:z}):this.negative===0&&x.negative!==0?(X=this.divmod(x.neg(),T),T!=="mod"&&(O=X.div.neg()),{div:O,mod:X.mod}):this.negative&x.negative?(X=this.neg().divmod(x.neg(),T),T!=="div"&&(z=X.mod.neg(),M&&z.negative!==0&&z.isub(x)),{div:X.div,mod:z}):x.length>this.length||this.cmp(x)<0?{div:new l(0),mod:this}:x.length===1?T==="div"?{div:this.divn(x.words[0]),mod:null}:T==="mod"?{div:null,mod:new l(this.modrn(x.words[0]))}:{div:this.divn(x.words[0]),mod:new l(this.modrn(x.words[0]))}:this._wordDiv(x,T)},l.prototype.div=function(x){return this.divmod(x,"div",!1).div},l.prototype.mod=function(x){return this.divmod(x,"mod",!1).mod},l.prototype.umod=function(x){return this.divmod(x,"mod",!0).mod},l.prototype.divRound=function(x){var T=this.divmod(x);if(T.mod.isZero())return T.div;var M=T.div.negative!==0?T.mod.isub(x):T.mod,O=x.ushrn(1),z=x.andln(1),X=M.cmp(O);return X<0||z===1&&X===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},l.prototype.modrn=function(x){var T=x<0;T&&(x=-x),a(x<=67108863);for(var M=(1<<26)%x,O=0,z=this.length-1;z>=0;z--)O=(M*O+(this.words[z]|0))%x;return T?-O:O},l.prototype.modn=function(x){return this.modrn(x)},l.prototype.idivn=function(x){var T=x<0;T&&(x=-x),a(x<=67108863);for(var M=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+M*67108864;this.words[O]=z/x|0,M=z%x}return this._strip(),T?this.ineg():this},l.prototype.divn=function(x){return this.clone().idivn(x)},l.prototype.egcd=function(x){a(x.negative===0),a(!x.isZero());var T=this,M=x.clone();T.negative!==0?T=T.umod(x):T=T.clone();for(var O=new l(1),z=new l(0),X=new l(0),H=new l(1),P=0;T.isEven()&&M.isEven();)T.iushrn(1),M.iushrn(1),++P;for(var S=M.clone(),F=T.clone();!T.isZero();){for(var ue=0,ee=1;!(T.words[0]&ee)&&ue<26;++ue,ee<<=1);if(ue>0)for(T.iushrn(ue);ue-- >0;)(O.isOdd()||z.isOdd())&&(O.iadd(S),z.isub(F)),O.iushrn(1),z.iushrn(1);for(var fe=0,le=1;!(M.words[0]&le)&&fe<26;++fe,le<<=1);if(fe>0)for(M.iushrn(fe);fe-- >0;)(X.isOdd()||H.isOdd())&&(X.iadd(S),H.isub(F)),X.iushrn(1),H.iushrn(1);T.cmp(M)>=0?(T.isub(M),O.isub(X),z.isub(H)):(M.isub(T),X.isub(O),H.isub(z))}return{a:X,b:H,gcd:M.iushln(P)}},l.prototype._invmp=function(x){a(x.negative===0),a(!x.isZero());var T=this,M=x.clone();T.negative!==0?T=T.umod(x):T=T.clone();for(var O=new l(1),z=new l(0),X=M.clone();T.cmpn(1)>0&&M.cmpn(1)>0;){for(var H=0,P=1;!(T.words[0]&P)&&H<26;++H,P<<=1);if(H>0)for(T.iushrn(H);H-- >0;)O.isOdd()&&O.iadd(X),O.iushrn(1);for(var S=0,F=1;!(M.words[0]&F)&&S<26;++S,F<<=1);if(S>0)for(M.iushrn(S);S-- >0;)z.isOdd()&&z.iadd(X),z.iushrn(1);T.cmp(M)>=0?(T.isub(M),O.isub(z)):(M.isub(T),z.isub(O))}var ue;return T.cmpn(1)===0?ue=O:ue=z,ue.cmpn(0)<0&&ue.iadd(x),ue},l.prototype.gcd=function(x){if(this.isZero())return x.abs();if(x.isZero())return this.abs();var T=this.clone(),M=x.clone();T.negative=0,M.negative=0;for(var O=0;T.isEven()&&M.isEven();O++)T.iushrn(1),M.iushrn(1);do{for(;T.isEven();)T.iushrn(1);for(;M.isEven();)M.iushrn(1);var z=T.cmp(M);if(z<0){var X=T;T=M,M=X}else if(z===0||M.cmpn(1)===0)break;T.isub(M)}while(!0);return M.iushln(O)},l.prototype.invm=function(x){return this.egcd(x).a.umod(x)},l.prototype.isEven=function(){return(this.words[0]&1)===0},l.prototype.isOdd=function(){return(this.words[0]&1)===1},l.prototype.andln=function(x){return this.words[0]&x},l.prototype.bincn=function(x){a(typeof x=="number");var T=x%26,M=(x-T)/26,O=1<<T;if(this.length<=M)return this._expand(M+1),this.words[M]|=O,this;for(var z=O,X=M;z!==0&&X<this.length;X++){var H=this.words[X]|0;H+=z,z=H>>>26,H&=67108863,this.words[X]=H}return z!==0&&(this.words[X]=z,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(x){var T=x<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this._strip();var M;if(this.length>1)M=1;else{T&&(x=-x),a(x<=67108863,"Number is too big");var O=this.words[0]|0;M=O===x?0:O<x?-1:1}return this.negative!==0?-M|0:M},l.prototype.cmp=function(x){if(this.negative!==0&&x.negative===0)return-1;if(this.negative===0&&x.negative!==0)return 1;var T=this.ucmp(x);return this.negative!==0?-T|0:T},l.prototype.ucmp=function(x){if(this.length>x.length)return 1;if(this.length<x.length)return-1;for(var T=0,M=this.length-1;M>=0;M--){var O=this.words[M]|0,z=x.words[M]|0;if(O!==z){O<z?T=-1:O>z&&(T=1);break}}return T},l.prototype.gtn=function(x){return this.cmpn(x)===1},l.prototype.gt=function(x){return this.cmp(x)===1},l.prototype.gten=function(x){return this.cmpn(x)>=0},l.prototype.gte=function(x){return this.cmp(x)>=0},l.prototype.ltn=function(x){return this.cmpn(x)===-1},l.prototype.lt=function(x){return this.cmp(x)===-1},l.prototype.lten=function(x){return this.cmpn(x)<=0},l.prototype.lte=function(x){return this.cmp(x)<=0},l.prototype.eqn=function(x){return this.cmpn(x)===0},l.prototype.eq=function(x){return this.cmp(x)===0},l.red=function(x){return new ae(x)},l.prototype.toRed=function(x){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),x.convertTo(this)._forceRed(x)},l.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(x){return this.red=x,this},l.prototype.forceRed=function(x){return a(!this.red,"Already a number in reduction context"),this._forceRed(x)},l.prototype.redAdd=function(x){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,x)},l.prototype.redIAdd=function(x){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,x)},l.prototype.redSub=function(x){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,x)},l.prototype.redISub=function(x){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,x)},l.prototype.redShl=function(x){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,x)},l.prototype.redMul=function(x){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.mul(this,x)},l.prototype.redIMul=function(x){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.imul(this,x)},l.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(x){return a(this.red&&!x.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,x)};var J={k256:null,p224:null,p192:null,p25519:null};function Y(I,x){this.name=I,this.p=new l(x,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var x=new l(null);return x.words=new Array(Math.ceil(this.n/13)),x},Y.prototype.ireduce=function(x){var T=x,M;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),M=T.bitLength();while(M>this.n);var O=M<this.n?-1:T.ucmp(this.p);return O===0?(T.words[0]=0,T.length=1):O>0?T.isub(this.p):T.strip!==void 0?T.strip():T._strip(),T},Y.prototype.split=function(x,T){x.iushrn(this.n,0,T)},Y.prototype.imulK=function(x){return x.imul(this.k)};function L(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(L,Y),L.prototype.split=function(x,T){for(var M=4194303,O=Math.min(x.length,9),z=0;z<O;z++)T.words[z]=x.words[z];if(T.length=O,x.length<=9){x.words[0]=0,x.length=1;return}var X=x.words[9];for(T.words[T.length++]=X&M,z=10;z<x.length;z++){var H=x.words[z]|0;x.words[z-10]=(H&M)<<4|X>>>22,X=H}X>>>=22,x.words[z-10]=X,X===0&&x.length>10?x.length-=10:x.length-=9},L.prototype.imulK=function(x){x.words[x.length]=0,x.words[x.length+1]=0,x.length+=2;for(var T=0,M=0;M<x.length;M++){var O=x.words[M]|0;T+=O*977,x.words[M]=T&67108863,T=O*64+(T/67108864|0)}return x.words[x.length-1]===0&&(x.length--,x.words[x.length-1]===0&&x.length--),x};function Z(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(Z,Y);function Q(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Q,Y);function oe(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(oe,Y),oe.prototype.imulK=function(x){for(var T=0,M=0;M<x.length;M++){var O=(x.words[M]|0)*19+T,z=O&67108863;O>>>=26,x.words[M]=z,T=O}return T!==0&&(x.words[x.length++]=T),x},l._prime=function(x){if(J[x])return J[x];var T;if(x==="k256")T=new L;else if(x==="p224")T=new Z;else if(x==="p192")T=new Q;else if(x==="p25519")T=new oe;else throw new Error("Unknown prime "+x);return J[x]=T,T};function ae(I){if(typeof I=="string"){var x=l._prime(I);this.m=x.p,this.prime=x}else a(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}ae.prototype._verify1=function(x){a(x.negative===0,"red works only with positives"),a(x.red,"red works only with red numbers")},ae.prototype._verify2=function(x,T){a((x.negative|T.negative)===0,"red works only with positives"),a(x.red&&x.red===T.red,"red works only with red numbers")},ae.prototype.imod=function(x){return this.prime?this.prime.ireduce(x)._forceRed(this):(b(x,x.umod(this.m)._forceRed(this)),x)},ae.prototype.neg=function(x){return x.isZero()?x.clone():this.m.sub(x)._forceRed(this)},ae.prototype.add=function(x,T){this._verify2(x,T);var M=x.add(T);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},ae.prototype.iadd=function(x,T){this._verify2(x,T);var M=x.iadd(T);return M.cmp(this.m)>=0&&M.isub(this.m),M},ae.prototype.sub=function(x,T){this._verify2(x,T);var M=x.sub(T);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},ae.prototype.isub=function(x,T){this._verify2(x,T);var M=x.isub(T);return M.cmpn(0)<0&&M.iadd(this.m),M},ae.prototype.shl=function(x,T){return this._verify1(x),this.imod(x.ushln(T))},ae.prototype.imul=function(x,T){return this._verify2(x,T),this.imod(x.imul(T))},ae.prototype.mul=function(x,T){return this._verify2(x,T),this.imod(x.mul(T))},ae.prototype.isqr=function(x){return this.imul(x,x.clone())},ae.prototype.sqr=function(x){return this.mul(x,x)},ae.prototype.sqrt=function(x){if(x.isZero())return x.clone();var T=this.m.andln(3);if(a(T%2===1),T===3){var M=this.m.add(new l(1)).iushrn(2);return this.pow(x,M)}for(var O=this.m.subn(1),z=0;!O.isZero()&&O.andln(1)===0;)z++,O.iushrn(1);a(!O.isZero());var X=new l(1).toRed(this),H=X.redNeg(),P=this.m.subn(1).iushrn(1),S=this.m.bitLength();for(S=new l(2*S*S).toRed(this);this.pow(S,P).cmp(H)!==0;)S.redIAdd(H);for(var F=this.pow(S,O),ue=this.pow(x,O.addn(1).iushrn(1)),ee=this.pow(x,O),fe=z;ee.cmp(X)!==0;){for(var le=ee,ce=0;le.cmp(X)!==0;ce++)le=le.redSqr();a(ce<fe);var pe=this.pow(F,new l(1).iushln(fe-ce-1));ue=ue.redMul(pe),F=pe.redSqr(),ee=ee.redMul(F),fe=ce}return ue},ae.prototype.invm=function(x){var T=x._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},ae.prototype.pow=function(x,T){if(T.isZero())return new l(1).toRed(this);if(T.cmpn(1)===0)return x.clone();var M=4,O=new Array(1<<M);O[0]=new l(1).toRed(this),O[1]=x;for(var z=2;z<O.length;z++)O[z]=this.mul(O[z-1],x);var X=O[0],H=0,P=0,S=T.bitLength()%26;for(S===0&&(S=26),z=T.length-1;z>=0;z--){for(var F=T.words[z],ue=S-1;ue>=0;ue--){var ee=F>>ue&1;if(X!==O[0]&&(X=this.sqr(X)),ee===0&&H===0){P=0;continue}H<<=1,H|=ee,P++,!(P!==M&&(z!==0||ue!==0))&&(X=this.mul(X,O[H]),P=0,H=0)}S=26}return X},ae.prototype.convertTo=function(x){var T=x.umod(this.m);return T===x?T.clone():T},ae.prototype.convertFrom=function(x){var T=x.clone();return T.red=null,T},l.mont=function(x){return new U(x)};function U(I){ae.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(U,ae),U.prototype.convertTo=function(x){return this.imod(x.ushln(this.shift))},U.prototype.convertFrom=function(x){var T=this.imod(x.mul(this.rinv));return T.red=null,T},U.prototype.imul=function(x,T){if(x.isZero()||T.isZero())return x.words[0]=0,x.length=1,x;var M=x.imul(T),O=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=M.isub(O).iushrn(this.shift),X=z;return z.cmp(this.m)>=0?X=z.isub(this.m):z.cmpn(0)<0&&(X=z.iadd(this.m)),X._forceRed(this)},U.prototype.mul=function(x,T){if(x.isZero()||T.isZero())return new l(0)._forceRed(this);var M=x.mul(T),O=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=M.isub(O).iushrn(this.shift),X=z;return z.cmp(this.m)>=0?X=z.isub(this.m):z.cmpn(0)<0&&(X=z.iadd(this.m)),X._forceRed(this)},U.prototype.invm=function(x){var T=this.imod(x._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(t,commonjsGlobal)})(bn$3);var BN$d=bnExports$3,randomBytes$3=browserExports$2;function blind(t){var e=getr(t),n=e.toRed(BN$d.mont(t.modulus)).redPow(new BN$d(t.publicExponent)).fromRed();return{blinder:n,unblinder:e.invm(t.modulus)}}function getr(t){var e=t.modulus.byteLength(),n;do n=new BN$d(randomBytes$3(e));while(n.cmp(t.modulus)>=0||!n.umod(t.prime1)||!n.umod(t.prime2));return n}function crt$2(t,e){var n=blind(e),a=e.modulus.byteLength(),o=new BN$d(t).mul(n.blinder).umod(e.modulus),l=o.toRed(BN$d.mont(e.prime1)),u=o.toRed(BN$d.mont(e.prime2)),d=e.coefficient,m=e.prime1,y=e.prime2,b=l.redPow(e.exponent1).fromRed(),_=u.redPow(e.exponent2).fromRed(),w=b.isub(_).imul(d).umod(m).imul(y);return _.iadd(w).imul(n.unblinder).umod(e.modulus).toArrayLike(Buffer$y,"be",a)}crt$2.getr=getr;var browserifyRsa=crt$2,elliptic$3={};const name$6="elliptic",version$k="6.5.4",description="EC cryptography",main$1="lib/elliptic.js",files=["lib"],scripts={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository={type:"git",url:"git@github.com:indutny/elliptic"},keywords=["EC","Elliptic","curve","Cryptography"],author="Fedor Indutny <fedor@indutny.com>",license="MIT",bugs={url:"https://github.com/indutny/elliptic/issues"},homepage="https://github.com/indutny/elliptic",devDependencies={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},require$$0$1={name:name$6,version:version$k,description,main:main$1,files,scripts,repository,keywords,author,license,bugs,homepage,devDependencies,dependencies};var utils$p={},utils$o={};(function(t){var e=t;function n(l,u){if(Array.isArray(l))return l.slice();if(!l)return[];var d=[];if(typeof l!="string"){for(var m=0;m<l.length;m++)d[m]=l[m]|0;return d}if(u==="hex"){l=l.replace(/[^a-z0-9]+/ig,""),l.length%2!==0&&(l="0"+l);for(var m=0;m<l.length;m+=2)d.push(parseInt(l[m]+l[m+1],16))}else for(var m=0;m<l.length;m++){var y=l.charCodeAt(m),b=y>>8,_=y&255;b?d.push(b,_):d.push(_)}return d}e.toArray=n;function a(l){return l.length===1?"0"+l:l}e.zero2=a;function o(l){for(var u="",d=0;d<l.length;d++)u+=a(l[d].toString(16));return u}e.toHex=o,e.encode=function(u,d){return d==="hex"?o(u):u}})(utils$o);(function(t){var e=t,n=bnExports$4,a=minimalisticAssert$1,o=utils$o;e.assert=a,e.toArray=o.toArray,e.zero2=o.zero2,e.toHex=o.toHex,e.encode=o.encode;function l(b,_,w){var E=new Array(Math.max(b.bitLength(),w)+1);E.fill(0);for(var A=1<<_+1,C=b.clone(),k=0;k<E.length;k++){var B,D=C.andln(A-1);C.isOdd()?(D>(A>>1)-1?B=(A>>1)-D:B=D,C.isubn(B)):B=0,E[k]=B,C.iushrn(1)}return E}e.getNAF=l;function u(b,_){var w=[[],[]];b=b.clone(),_=_.clone();for(var E=0,A=0,C;b.cmpn(-E)>0||_.cmpn(-A)>0;){var k=b.andln(3)+E&3,B=_.andln(3)+A&3;k===3&&(k=-1),B===3&&(B=-1);var D;k&1?(C=b.andln(7)+E&7,(C===3||C===5)&&B===2?D=-k:D=k):D=0,w[0].push(D);var q;B&1?(C=_.andln(7)+A&7,(C===3||C===5)&&k===2?q=-B:q=B):q=0,w[1].push(q),2*E===D+1&&(E=1-E),2*A===q+1&&(A=1-A),b.iushrn(1),_.iushrn(1)}return w}e.getJSF=u;function d(b,_,w){var E="_"+_;b.prototype[_]=function(){return this[E]!==void 0?this[E]:this[E]=w.call(this)}}e.cachedProperty=d;function m(b){return typeof b=="string"?e.toArray(b,"hex"):b}e.parseBytes=m;function y(b){return new n(b,"hex","le")}e.intFromLE=y})(utils$p);var curve={},BN$c=bnExports$4,utils$n=utils$p,getNAF$1=utils$n.getNAF,getJSF$1=utils$n.getJSF,assert$l=utils$n.assert;function BaseCurve$1(t,e){this.type=t,this.p=new BN$c(e.p,16),this.red=e.prime?BN$c.red(e.prime):BN$c.mont(this.p),this.zero=new BN$c(0).toRed(this.red),this.one=new BN$c(1).toRed(this.red),this.two=new BN$c(2).toRed(this.red),this.n=e.n&&new BN$c(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$8=BaseCurve$1;BaseCurve$1.prototype.point=function(){throw new Error("Not implemented")};BaseCurve$1.prototype.validate=function(){throw new Error("Not implemented")};BaseCurve$1.prototype._fixedNafMul=function(e,n){assert$l(e.precomputed);var a=e._getDoubles(),o=getNAF$1(n,1,this._bitLength),l=(1<<a.step+1)-(a.step%2===0?2:1);l/=3;var u=[],d,m;for(d=0;d<o.length;d+=a.step){m=0;for(var y=d+a.step-1;y>=d;y--)m=(m<<1)+o[y];u.push(m)}for(var b=this.jpoint(null,null,null),_=this.jpoint(null,null,null),w=l;w>0;w--){for(d=0;d<u.length;d++)m=u[d],m===w?_=_.mixedAdd(a.points[d]):m===-w&&(_=_.mixedAdd(a.points[d].neg()));b=b.add(_)}return b.toP()};BaseCurve$1.prototype._wnafMul=function(e,n){var a=4,o=e._getNAFPoints(a);a=o.wnd;for(var l=o.points,u=getNAF$1(n,a,this._bitLength),d=this.jpoint(null,null,null),m=u.length-1;m>=0;m--){for(var y=0;m>=0&&u[m]===0;m--)y++;if(m>=0&&y++,d=d.dblp(y),m<0)break;var b=u[m];assert$l(b!==0),e.type==="affine"?b>0?d=d.mixedAdd(l[b-1>>1]):d=d.mixedAdd(l[-b-1>>1].neg()):b>0?d=d.add(l[b-1>>1]):d=d.add(l[-b-1>>1].neg())}return e.type==="affine"?d.toP():d};BaseCurve$1.prototype._wnafMulAdd=function(e,n,a,o,l){var u=this._wnafT1,d=this._wnafT2,m=this._wnafT3,y=0,b,_,w;for(b=0;b<o;b++){w=n[b];var E=w._getNAFPoints(e);u[b]=E.wnd,d[b]=E.points}for(b=o-1;b>=1;b-=2){var A=b-1,C=b;if(u[A]!==1||u[C]!==1){m[A]=getNAF$1(a[A],u[A],this._bitLength),m[C]=getNAF$1(a[C],u[C],this._bitLength),y=Math.max(m[A].length,y),y=Math.max(m[C].length,y);continue}var k=[n[A],null,null,n[C]];n[A].y.cmp(n[C].y)===0?(k[1]=n[A].add(n[C]),k[2]=n[A].toJ().mixedAdd(n[C].neg())):n[A].y.cmp(n[C].y.redNeg())===0?(k[1]=n[A].toJ().mixedAdd(n[C]),k[2]=n[A].add(n[C].neg())):(k[1]=n[A].toJ().mixedAdd(n[C]),k[2]=n[A].toJ().mixedAdd(n[C].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],D=getJSF$1(a[A],a[C]);for(y=Math.max(D[0].length,y),m[A]=new Array(y),m[C]=new Array(y),_=0;_<y;_++){var q=D[0][_]|0,j=D[1][_]|0;m[A][_]=B[(q+1)*3+(j+1)],m[C][_]=0,d[A]=k}}var J=this.jpoint(null,null,null),Y=this._wnafT4;for(b=y;b>=0;b--){for(var L=0;b>=0;){var Z=!0;for(_=0;_<o;_++)Y[_]=m[_][b]|0,Y[_]!==0&&(Z=!1);if(!Z)break;L++,b--}if(b>=0&&L++,J=J.dblp(L),b<0)break;for(_=0;_<o;_++){var Q=Y[_];Q!==0&&(Q>0?w=d[_][Q-1>>1]:Q<0&&(w=d[_][-Q-1>>1].neg()),w.type==="affine"?J=J.mixedAdd(w):J=J.add(w))}}for(b=0;b<o;b++)d[b]=null;return l?J:J.toP()};function BasePoint$1(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve$1.BasePoint=BasePoint$1;BasePoint$1.prototype.eq=function(){throw new Error("Not implemented")};BasePoint$1.prototype.validate=function(){return this.curve.validate(this)};BaseCurve$1.prototype.decodePoint=function(e,n){e=utils$n.toArray(e,n);var a=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*a){e[0]===6?assert$l(e[e.length-1]%2===0):e[0]===7&&assert$l(e[e.length-1]%2===1);var o=this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));return o}else if((e[0]===2||e[0]===3)&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),e[0]===3);throw new Error("Unknown point format")};BasePoint$1.prototype.encodeCompressed=function(e){return this.encode(e,!0)};BasePoint$1.prototype._encode=function(e){var n=this.curve.p.byteLength(),a=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",n))};BasePoint$1.prototype.encode=function(e,n){return utils$n.encode(this._encode(n),e)};BasePoint$1.prototype.precompute=function(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};BasePoint$1.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};BasePoint$1.prototype._getDoubles=function(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],o=this,l=0;l<n;l+=e){for(var u=0;u<e;u++)o=o.dbl();a.push(o)}return{step:e,points:a}};BasePoint$1.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],a=(1<<e)-1,o=a===1?null:this.dbl(),l=1;l<a;l++)n[l]=n[l-1].add(o);return{wnd:e,points:n}};BasePoint$1.prototype._getBeta=function(){return null};BasePoint$1.prototype.dblp=function(e){for(var n=this,a=0;a<e;a++)n=n.dbl();return n};var utils$m=utils$p,BN$b=bnExports$4,inherits$b=inherits_browserExports,Base$2=base$8,assert$k=utils$m.assert;function ShortCurve$1(t){Base$2.call(this,"short",t),this.a=new BN$b(t.a,16).toRed(this.red),this.b=new BN$b(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits$b(ShortCurve$1,Base$2);var short=ShortCurve$1;ShortCurve$1.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,a;if(e.beta)n=new BN$b(e.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);n=o[0].cmp(o[1])<0?o[0]:o[1],n=n.toRed(this.red)}if(e.lambda)a=new BN$b(e.lambda,16);else{var l=this._getEndoRoots(this.n);this.g.mul(l[0]).x.cmp(this.g.x.redMul(n))===0?a=l[0]:(a=l[1],assert$k(this.g.mul(a).x.cmp(this.g.x.redMul(n))===0))}var u;return e.basis?u=e.basis.map(function(d){return{a:new BN$b(d.a,16),b:new BN$b(d.b,16)}}):u=this._getEndoBasis(a),{beta:n,lambda:a,basis:u}}};ShortCurve$1.prototype._getEndoRoots=function(e){var n=e===this.p?this.red:BN$b.mont(e),a=new BN$b(2).toRed(n).redInvm(),o=a.redNeg(),l=new BN$b(3).toRed(n).redNeg().redSqrt().redMul(a),u=o.redAdd(l).fromRed(),d=o.redSub(l).fromRed();return[u,d]};ShortCurve$1.prototype._getEndoBasis=function(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),a=e,o=this.n.clone(),l=new BN$b(1),u=new BN$b(0),d=new BN$b(0),m=new BN$b(1),y,b,_,w,E,A,C,k=0,B,D;a.cmpn(0)!==0;){var q=o.div(a);B=o.sub(q.mul(a)),D=d.sub(q.mul(l));var j=m.sub(q.mul(u));if(!_&&B.cmp(n)<0)y=C.neg(),b=l,_=B.neg(),w=D;else if(_&&++k===2)break;C=B,o=a,a=B,d=l,l=D,m=u,u=j}E=B.neg(),A=D;var J=_.sqr().add(w.sqr()),Y=E.sqr().add(A.sqr());return Y.cmp(J)>=0&&(E=y,A=b),_.negative&&(_=_.neg(),w=w.neg()),E.negative&&(E=E.neg(),A=A.neg()),[{a:_,b:w},{a:E,b:A}]};ShortCurve$1.prototype._endoSplit=function(e){var n=this.endo.basis,a=n[0],o=n[1],l=o.b.mul(e).divRound(this.n),u=a.b.neg().mul(e).divRound(this.n),d=l.mul(a.a),m=u.mul(o.a),y=l.mul(a.b),b=u.mul(o.b),_=e.sub(d).sub(m),w=y.add(b).neg();return{k1:_,k2:w}};ShortCurve$1.prototype.pointFromX=function(e,n){e=new BN$b(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var l=o.fromRed().isOdd();return(n&&!l||!n&&l)&&(o=o.redNeg()),this.point(e,o)};ShortCurve$1.prototype.validate=function(e){if(e.inf)return!0;var n=e.x,a=e.y,o=this.a.redMul(n),l=n.redSqr().redMul(n).redIAdd(o).redIAdd(this.b);return a.redSqr().redISub(l).cmpn(0)===0};ShortCurve$1.prototype._endoWnafMulAdd=function(e,n,a){for(var o=this._endoWnafT1,l=this._endoWnafT2,u=0;u<e.length;u++){var d=this._endoSplit(n[u]),m=e[u],y=m._getBeta();d.k1.negative&&(d.k1.ineg(),m=m.neg(!0)),d.k2.negative&&(d.k2.ineg(),y=y.neg(!0)),o[u*2]=m,o[u*2+1]=y,l[u*2]=d.k1,l[u*2+1]=d.k2}for(var b=this._wnafMulAdd(1,o,l,u*2,a),_=0;_<u*2;_++)o[_]=null,l[_]=null;return b};function Point$5(t,e,n,a){Base$2.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN$b(e,16),this.y=new BN$b(n,16),a&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits$b(Point$5,Base$2.BasePoint);ShortCurve$1.prototype.point=function(e,n,a){return new Point$5(this,e,n,a)};ShortCurve$1.prototype.pointFromJSON=function(e,n){return Point$5.fromJSON(this,e,n)};Point$5.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,o=function(l){return a.point(l.x.redMul(a.endo.beta),l.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(o)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(o)}}}return n}};Point$5.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point$5.fromJSON=function(e,n,a){typeof n=="string"&&(n=JSON.parse(n));var o=e.point(n[0],n[1],a);if(!n[2])return o;function l(d){return e.point(d[0],d[1],a)}var u=n[2];return o.precomputed={beta:null,doubles:u.doubles&&{step:u.doubles.step,points:[o].concat(u.doubles.points.map(l))},naf:u.naf&&{wnd:u.naf.wnd,points:[o].concat(u.naf.points.map(l))}},o};Point$5.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point$5.prototype.isInfinity=function(){return this.inf};Point$5.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var a=n.redSqr().redISub(this.x).redISub(e.x),o=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point$5.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,a=this.x.redSqr(),o=e.redInvm(),l=a.redAdd(a).redIAdd(a).redIAdd(n).redMul(o),u=l.redSqr().redISub(this.x.redAdd(this.x)),d=l.redMul(this.x.redSub(u)).redISub(this.y);return this.curve.point(u,d)};Point$5.prototype.getX=function(){return this.x.fromRed()};Point$5.prototype.getY=function(){return this.y.fromRed()};Point$5.prototype.mul=function(e){return e=new BN$b(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point$5.prototype.mulAdd=function(e,n,a){var o=[this,n],l=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,l):this.curve._wnafMulAdd(1,o,l,2)};Point$5.prototype.jmulAdd=function(e,n,a){var o=[this,n],l=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,l,!0):this.curve._wnafMulAdd(1,o,l,2,!0)};Point$5.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point$5.prototype.neg=function(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,o=function(l){return l.neg()};n.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(o)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(o)}}}return n};Point$5.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint$1(t,e,n,a){Base$2.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&a===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN$b(0)):(this.x=new BN$b(e,16),this.y=new BN$b(n,16),this.z=new BN$b(a,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits$b(JPoint$1,Base$2.BasePoint);ShortCurve$1.prototype.jpoint=function(e,n,a){return new JPoint$1(this,e,n,a)};JPoint$1.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),a=this.x.redMul(n),o=this.y.redMul(n).redMul(e);return this.curve.point(a,o)};JPoint$1.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint$1.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),a=this.z.redSqr(),o=this.x.redMul(n),l=e.x.redMul(a),u=this.y.redMul(n.redMul(e.z)),d=e.y.redMul(a.redMul(this.z)),m=o.redSub(l),y=u.redSub(d);if(m.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=m.redSqr(),_=b.redMul(m),w=o.redMul(b),E=y.redSqr().redIAdd(_).redISub(w).redISub(w),A=y.redMul(w.redISub(E)).redISub(u.redMul(_)),C=this.z.redMul(e.z).redMul(m);return this.curve.jpoint(E,A,C)};JPoint$1.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),a=this.x,o=e.x.redMul(n),l=this.y,u=e.y.redMul(n).redMul(this.z),d=a.redSub(o),m=l.redSub(u);if(d.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=d.redSqr(),b=y.redMul(d),_=a.redMul(y),w=m.redSqr().redIAdd(b).redISub(_).redISub(_),E=m.redMul(_.redISub(w)).redISub(l.redMul(b)),A=this.z.redMul(d);return this.curve.jpoint(w,E,A)};JPoint$1.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var a=this;for(n=0;n<e;n++)a=a.dbl();return a}var o=this.curve.a,l=this.curve.tinv,u=this.x,d=this.y,m=this.z,y=m.redSqr().redSqr(),b=d.redAdd(d);for(n=0;n<e;n++){var _=u.redSqr(),w=b.redSqr(),E=w.redSqr(),A=_.redAdd(_).redIAdd(_).redIAdd(o.redMul(y)),C=u.redMul(w),k=A.redSqr().redISub(C.redAdd(C)),B=C.redISub(k),D=A.redMul(B);D=D.redIAdd(D).redISub(E);var q=b.redMul(m);n+1<e&&(y=y.redMul(E)),u=k,m=q,b=D}return this.curve.jpoint(u,b.redMul(l),m)};JPoint$1.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint$1.prototype._zeroDbl=function(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),l=this.y.redSqr(),u=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(o).redISub(u);d=d.redIAdd(d);var m=o.redAdd(o).redIAdd(o),y=m.redSqr().redISub(d).redISub(d),b=u.redIAdd(u);b=b.redIAdd(b),b=b.redIAdd(b),e=y,n=m.redMul(d.redISub(y)).redISub(b),a=this.y.redAdd(this.y)}else{var _=this.x.redSqr(),w=this.y.redSqr(),E=w.redSqr(),A=this.x.redAdd(w).redSqr().redISub(_).redISub(E);A=A.redIAdd(A);var C=_.redAdd(_).redIAdd(_),k=C.redSqr(),B=E.redIAdd(E);B=B.redIAdd(B),B=B.redIAdd(B),e=k.redISub(A).redISub(A),n=C.redMul(A.redISub(e)).redISub(B),a=this.y.redMul(this.z),a=a.redIAdd(a)}return this.curve.jpoint(e,n,a)};JPoint$1.prototype._threeDbl=function(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),l=this.y.redSqr(),u=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(o).redISub(u);d=d.redIAdd(d);var m=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),y=m.redSqr().redISub(d).redISub(d);e=y;var b=u.redIAdd(u);b=b.redIAdd(b),b=b.redIAdd(b),n=m.redMul(d.redISub(y)).redISub(b),a=this.y.redAdd(this.y)}else{var _=this.z.redSqr(),w=this.y.redSqr(),E=this.x.redMul(w),A=this.x.redSub(_).redMul(this.x.redAdd(_));A=A.redAdd(A).redIAdd(A);var C=E.redIAdd(E);C=C.redIAdd(C);var k=C.redAdd(C);e=A.redSqr().redISub(k),a=this.y.redAdd(this.z).redSqr().redISub(w).redISub(_);var B=w.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B),n=A.redMul(C.redISub(e)).redISub(B)}return this.curve.jpoint(e,n,a)};JPoint$1.prototype._dbl=function(){var e=this.curve.a,n=this.x,a=this.y,o=this.z,l=o.redSqr().redSqr(),u=n.redSqr(),d=a.redSqr(),m=u.redAdd(u).redIAdd(u).redIAdd(e.redMul(l)),y=n.redAdd(n);y=y.redIAdd(y);var b=y.redMul(d),_=m.redSqr().redISub(b.redAdd(b)),w=b.redISub(_),E=d.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var A=m.redMul(w).redISub(E),C=a.redAdd(a).redMul(o);return this.curve.jpoint(_,A,C)};JPoint$1.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr(),o=n.redSqr(),l=e.redAdd(e).redIAdd(e),u=l.redSqr(),d=this.x.redAdd(n).redSqr().redISub(e).redISub(o);d=d.redIAdd(d),d=d.redAdd(d).redIAdd(d),d=d.redISub(u);var m=d.redSqr(),y=o.redIAdd(o);y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y);var b=l.redIAdd(d).redSqr().redISub(u).redISub(m).redISub(y),_=n.redMul(b);_=_.redIAdd(_),_=_.redIAdd(_);var w=this.x.redMul(m).redISub(_);w=w.redIAdd(w),w=w.redIAdd(w);var E=this.y.redMul(b.redMul(y.redISub(b)).redISub(d.redMul(m)));E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var A=this.z.redAdd(d).redSqr().redISub(a).redISub(m);return this.curve.jpoint(w,E,A)};JPoint$1.prototype.mul=function(e,n){return e=new BN$b(e,n),this.curve._wnafMul(this,e)};JPoint$1.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),a=e.z.redSqr();if(this.x.redMul(a).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var o=n.redMul(this.z),l=a.redMul(e.z);return this.y.redMul(l).redISub(e.y.redMul(o)).cmpn(0)===0};JPoint$1.prototype.eqXToP=function(e){var n=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(a)===0)return!0;for(var o=e.clone(),l=this.curve.redN.redMul(n);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(l),this.x.cmp(a)===0)return!0}};JPoint$1.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint$1.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var BN$a=bnExports$4,inherits$a=inherits_browserExports,Base$1=base$8,utils$l=utils$p;function MontCurve(t){Base$1.call(this,"mont",t),this.a=new BN$a(t.a,16).toRed(this.red),this.b=new BN$a(t.b,16).toRed(this.red),this.i4=new BN$a(4).toRed(this.red).redInvm(),this.two=new BN$a(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}inherits$a(MontCurve,Base$1);var mont=MontCurve;MontCurve.prototype.validate=function(e){var n=e.normalize().x,a=n.redSqr(),o=a.redMul(n).redAdd(a.redMul(this.a)).redAdd(n),l=o.redSqrt();return l.redSqr().cmp(o)===0};function Point$4(t,e,n){Base$1.BasePoint.call(this,t,"projective"),e===null&&n===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new BN$a(e,16),this.z=new BN$a(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}inherits$a(Point$4,Base$1.BasePoint);MontCurve.prototype.decodePoint=function(e,n){return this.point(utils$l.toArray(e,n),1)};MontCurve.prototype.point=function(e,n){return new Point$4(this,e,n)};MontCurve.prototype.pointFromJSON=function(e){return Point$4.fromJSON(this,e)};Point$4.prototype.precompute=function(){};Point$4.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};Point$4.fromJSON=function(e,n){return new Point$4(e,n[0],n[1]||e.one)};Point$4.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$4.prototype.isInfinity=function(){return this.z.cmpn(0)===0};Point$4.prototype.dbl=function(){var e=this.x.redAdd(this.z),n=e.redSqr(),a=this.x.redSub(this.z),o=a.redSqr(),l=n.redSub(o),u=n.redMul(o),d=l.redMul(o.redAdd(this.curve.a24.redMul(l)));return this.curve.point(u,d)};Point$4.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.diffAdd=function(e,n){var a=this.x.redAdd(this.z),o=this.x.redSub(this.z),l=e.x.redAdd(e.z),u=e.x.redSub(e.z),d=u.redMul(a),m=l.redMul(o),y=n.z.redMul(d.redAdd(m).redSqr()),b=n.x.redMul(d.redISub(m).redSqr());return this.curve.point(y,b)};Point$4.prototype.mul=function(e){for(var n=e.clone(),a=this,o=this.curve.point(null,null),l=this,u=[];n.cmpn(0)!==0;n.iushrn(1))u.push(n.andln(1));for(var d=u.length-1;d>=0;d--)u[d]===0?(a=a.diffAdd(o,l),o=o.dbl()):(o=a.diffAdd(o,l),a=a.dbl());return o};Point$4.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};Point$4.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};Point$4.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};Point$4.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var utils$k=utils$p,BN$9=bnExports$4,inherits$9=inherits_browserExports,Base=base$8,assert$j=utils$k.assert;function EdwardsCurve(t){this.twisted=(t.a|0)!==1,this.mOneA=this.twisted&&(t.a|0)===-1,this.extended=this.mOneA,Base.call(this,"edwards",t),this.a=new BN$9(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new BN$9(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new BN$9(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),assert$j(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(t.c|0)===1}inherits$9(EdwardsCurve,Base);var edwards=EdwardsCurve;EdwardsCurve.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};EdwardsCurve.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};EdwardsCurve.prototype.jpoint=function(e,n,a,o){return this.point(e,n,a,o)};EdwardsCurve.prototype.pointFromX=function(e,n){e=new BN$9(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr(),o=this.c2.redSub(this.a.redMul(a)),l=this.one.redSub(this.c2.redMul(this.d).redMul(a)),u=o.redMul(l.redInvm()),d=u.redSqrt();if(d.redSqr().redSub(u).cmp(this.zero)!==0)throw new Error("invalid point");var m=d.fromRed().isOdd();return(n&&!m||!n&&m)&&(d=d.redNeg()),this.point(e,d)};EdwardsCurve.prototype.pointFromY=function(e,n){e=new BN$9(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr(),o=a.redSub(this.c2),l=a.redMul(this.d).redMul(this.c2).redSub(this.a),u=o.redMul(l.redInvm());if(u.cmp(this.zero)===0){if(n)throw new Error("invalid point");return this.point(this.zero,e)}var d=u.redSqrt();if(d.redSqr().redSub(u).cmp(this.zero)!==0)throw new Error("invalid point");return d.fromRed().isOdd()!==n&&(d=d.redNeg()),this.point(d,e)};EdwardsCurve.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var n=e.x.redSqr(),a=e.y.redSqr(),o=n.redMul(this.a).redAdd(a),l=this.c2.redMul(this.one.redAdd(this.d.redMul(n).redMul(a)));return o.cmp(l)===0};function Point$3(t,e,n,a,o){Base.BasePoint.call(this,t,"projective"),e===null&&n===null&&a===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new BN$9(e,16),this.y=new BN$9(n,16),this.z=a?new BN$9(a,16):this.curve.one,this.t=o&&new BN$9(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}inherits$9(Point$3,Base.BasePoint);EdwardsCurve.prototype.pointFromJSON=function(e){return Point$3.fromJSON(this,e)};EdwardsCurve.prototype.point=function(e,n,a,o){return new Point$3(this,e,n,a,o)};Point$3.fromJSON=function(e,n){return new Point$3(e,n[0],n[1],n[2])};Point$3.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Point$3.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Point$3.prototype._extDbl=function(){var e=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr();a=a.redIAdd(a);var o=this.curve._mulA(e),l=this.x.redAdd(this.y).redSqr().redISub(e).redISub(n),u=o.redAdd(n),d=u.redSub(a),m=o.redSub(n),y=l.redMul(d),b=u.redMul(m),_=l.redMul(m),w=d.redMul(u);return this.curve.point(y,b,w,_)};Point$3.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),a=this.y.redSqr(),o,l,u,d,m,y;if(this.curve.twisted){d=this.curve._mulA(n);var b=d.redAdd(a);this.zOne?(o=e.redSub(n).redSub(a).redMul(b.redSub(this.curve.two)),l=b.redMul(d.redSub(a)),u=b.redSqr().redSub(b).redSub(b)):(m=this.z.redSqr(),y=b.redSub(m).redISub(m),o=e.redSub(n).redISub(a).redMul(y),l=b.redMul(d.redSub(a)),u=b.redMul(y))}else d=n.redAdd(a),m=this.curve._mulC(this.z).redSqr(),y=d.redSub(m).redSub(m),o=this.curve._mulC(e.redISub(d)).redMul(y),l=this.curve._mulC(d).redMul(n.redISub(a)),u=d.redMul(y);return this.curve.point(o,l,u)};Point$3.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Point$3.prototype._extAdd=function(e){var n=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),a=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),o=this.t.redMul(this.curve.dd).redMul(e.t),l=this.z.redMul(e.z.redAdd(e.z)),u=a.redSub(n),d=l.redSub(o),m=l.redAdd(o),y=a.redAdd(n),b=u.redMul(d),_=m.redMul(y),w=u.redMul(y),E=d.redMul(m);return this.curve.point(b,_,E,w)};Point$3.prototype._projAdd=function(e){var n=this.z.redMul(e.z),a=n.redSqr(),o=this.x.redMul(e.x),l=this.y.redMul(e.y),u=this.curve.d.redMul(o).redMul(l),d=a.redSub(u),m=a.redAdd(u),y=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(o).redISub(l),b=n.redMul(d).redMul(y),_,w;return this.curve.twisted?(_=n.redMul(m).redMul(l.redSub(this.curve._mulA(o))),w=d.redMul(m)):(_=n.redMul(m).redMul(l.redSub(o)),w=this.curve._mulC(d).redMul(m)),this.curve.point(b,_,w)};Point$3.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Point$3.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Point$3.prototype.mulAdd=function(e,n,a){return this.curve._wnafMulAdd(1,[this,n],[e,a],2,!1)};Point$3.prototype.jmulAdd=function(e,n,a){return this.curve._wnafMulAdd(1,[this,n],[e,a],2,!0)};Point$3.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Point$3.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Point$3.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Point$3.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Point$3.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Point$3.prototype.eqXToP=function(e){var n=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(n)===0)return!0;for(var a=e.clone(),o=this.curve.redN.redMul(this.z);;){if(a.iadd(this.curve.n),a.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};Point$3.prototype.toP=Point$3.prototype.normalize;Point$3.prototype.mixedAdd=Point$3.prototype.add;(function(t){var e=t;e.base=base$8,e.short=short,e.mont=mont,e.edwards=edwards})(curve);var curves$1={},hash$3={},utils$j={},assert$i=minimalisticAssert$1,inherits$8=inherits_browserExports;utils$j.inherits=inherits$8;function isSurrogatePair(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function toArray$1(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var n=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),o=0;o<t.length;o+=2)n.push(parseInt(t[o]+t[o+1],16))}else for(var a=0,o=0;o<t.length;o++){var l=t.charCodeAt(o);l<128?n[a++]=l:l<2048?(n[a++]=l>>6|192,n[a++]=l&63|128):isSurrogatePair(t,o)?(l=65536+((l&1023)<<10)+(t.charCodeAt(++o)&1023),n[a++]=l>>18|240,n[a++]=l>>12&63|128,n[a++]=l>>6&63|128,n[a++]=l&63|128):(n[a++]=l>>12|224,n[a++]=l>>6&63|128,n[a++]=l&63|128)}else for(o=0;o<t.length;o++)n[o]=t[o]|0;return n}utils$j.toArray=toArray$1;function toHex$1(t){for(var e="",n=0;n<t.length;n++)e+=zero2(t[n].toString(16));return e}utils$j.toHex=toHex$1;function htonl(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}utils$j.htonl=htonl;function toHex32(t,e){for(var n="",a=0;a<t.length;a++){var o=t[a];e==="little"&&(o=htonl(o)),n+=zero8(o.toString(16))}return n}utils$j.toHex32=toHex32;function zero2(t){return t.length===1?"0"+t:t}utils$j.zero2=zero2;function zero8(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}utils$j.zero8=zero8;function join32(t,e,n,a){var o=n-e;assert$i(o%4===0);for(var l=new Array(o/4),u=0,d=e;u<l.length;u++,d+=4){var m;a==="big"?m=t[d]<<24|t[d+1]<<16|t[d+2]<<8|t[d+3]:m=t[d+3]<<24|t[d+2]<<16|t[d+1]<<8|t[d],l[u]=m>>>0}return l}utils$j.join32=join32;function split32(t,e){for(var n=new Array(t.length*4),a=0,o=0;a<t.length;a++,o+=4){var l=t[a];e==="big"?(n[o]=l>>>24,n[o+1]=l>>>16&255,n[o+2]=l>>>8&255,n[o+3]=l&255):(n[o+3]=l>>>24,n[o+2]=l>>>16&255,n[o+1]=l>>>8&255,n[o]=l&255)}return n}utils$j.split32=split32;function rotr32$1(t,e){return t>>>e|t<<32-e}utils$j.rotr32=rotr32$1;function rotl32$2(t,e){return t<<e|t>>>32-e}utils$j.rotl32=rotl32$2;function sum32$3(t,e){return t+e>>>0}utils$j.sum32=sum32$3;function sum32_3$1(t,e,n){return t+e+n>>>0}utils$j.sum32_3=sum32_3$1;function sum32_4$2(t,e,n,a){return t+e+n+a>>>0}utils$j.sum32_4=sum32_4$2;function sum32_5$2(t,e,n,a,o){return t+e+n+a+o>>>0}utils$j.sum32_5=sum32_5$2;function sum64$1(t,e,n,a){var o=t[e],l=t[e+1],u=a+l>>>0,d=(u<a?1:0)+n+o;t[e]=d>>>0,t[e+1]=u}utils$j.sum64=sum64$1;function sum64_hi$1(t,e,n,a){var o=e+a>>>0,l=(o<e?1:0)+t+n;return l>>>0}utils$j.sum64_hi=sum64_hi$1;function sum64_lo$1(t,e,n,a){var o=e+a;return o>>>0}utils$j.sum64_lo=sum64_lo$1;function sum64_4_hi$1(t,e,n,a,o,l,u,d){var m=0,y=e;y=y+a>>>0,m+=y<e?1:0,y=y+l>>>0,m+=y<l?1:0,y=y+d>>>0,m+=y<d?1:0;var b=t+n+o+u+m;return b>>>0}utils$j.sum64_4_hi=sum64_4_hi$1;function sum64_4_lo$1(t,e,n,a,o,l,u,d){var m=e+a+l+d;return m>>>0}utils$j.sum64_4_lo=sum64_4_lo$1;function sum64_5_hi$1(t,e,n,a,o,l,u,d,m,y){var b=0,_=e;_=_+a>>>0,b+=_<e?1:0,_=_+l>>>0,b+=_<l?1:0,_=_+d>>>0,b+=_<d?1:0,_=_+y>>>0,b+=_<y?1:0;var w=t+n+o+u+m+b;return w>>>0}utils$j.sum64_5_hi=sum64_5_hi$1;function sum64_5_lo$1(t,e,n,a,o,l,u,d,m,y){var b=e+a+l+d+y;return b>>>0}utils$j.sum64_5_lo=sum64_5_lo$1;function rotr64_hi$1(t,e,n){var a=e<<32-n|t>>>n;return a>>>0}utils$j.rotr64_hi=rotr64_hi$1;function rotr64_lo$1(t,e,n){var a=t<<32-n|e>>>n;return a>>>0}utils$j.rotr64_lo=rotr64_lo$1;function shr64_hi$1(t,e,n){return t>>>n}utils$j.shr64_hi=shr64_hi$1;function shr64_lo$1(t,e,n){var a=t<<32-n|e>>>n;return a>>>0}utils$j.shr64_lo=shr64_lo$1;var common$8={},utils$i=utils$j,assert$h=minimalisticAssert$1;function BlockHash$4(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}common$8.BlockHash=BlockHash$4;BlockHash$4.prototype.update=function(e,n){if(e=utils$i.toArray(e,n),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var a=e.length%this._delta8;this.pending=e.slice(e.length-a,e.length),this.pending.length===0&&(this.pending=null),e=utils$i.join32(e,0,e.length-a,this.endian);for(var o=0;o<e.length;o+=this._delta32)this._update(e,o,o+this._delta32)}return this};BlockHash$4.prototype.digest=function(e){return this.update(this._pad()),assert$h(this.pending===null),this._digest(e)};BlockHash$4.prototype._pad=function(){var e=this.pendingTotal,n=this._delta8,a=n-(e+this.padLength)%n,o=new Array(a+this.padLength);o[0]=128;for(var l=1;l<a;l++)o[l]=0;if(e<<=3,this.endian==="big"){for(var u=8;u<this.padLength;u++)o[l++]=0;o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=e>>>24&255,o[l++]=e>>>16&255,o[l++]=e>>>8&255,o[l++]=e&255}else for(o[l++]=e&255,o[l++]=e>>>8&255,o[l++]=e>>>16&255,o[l++]=e>>>24&255,o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0,u=8;u<this.padLength;u++)o[l++]=0;return o};var sha$3={},common$7={},utils$h=utils$j,rotr32=utils$h.rotr32;function ft_1$1(t,e,n,a){if(t===0)return ch32$1(e,n,a);if(t===1||t===3)return p32(e,n,a);if(t===2)return maj32$1(e,n,a)}common$7.ft_1=ft_1$1;function ch32$1(t,e,n){return t&e^~t&n}common$7.ch32=ch32$1;function maj32$1(t,e,n){return t&e^t&n^e&n}common$7.maj32=maj32$1;function p32(t,e,n){return t^e^n}common$7.p32=p32;function s0_256$1(t){return rotr32(t,2)^rotr32(t,13)^rotr32(t,22)}common$7.s0_256=s0_256$1;function s1_256$1(t){return rotr32(t,6)^rotr32(t,11)^rotr32(t,25)}common$7.s1_256=s1_256$1;function g0_256$1(t){return rotr32(t,7)^rotr32(t,18)^t>>>3}common$7.g0_256=g0_256$1;function g1_256$1(t){return rotr32(t,17)^rotr32(t,19)^t>>>10}common$7.g1_256=g1_256$1;var utils$g=utils$j,common$6=common$8,shaCommon$1=common$7,rotl32$1=utils$g.rotl32,sum32$2=utils$g.sum32,sum32_5$1=utils$g.sum32_5,ft_1=shaCommon$1.ft_1,BlockHash$3=common$6.BlockHash,sha1_K=[1518500249,1859775393,2400959708,3395469782];function SHA1(){if(!(this instanceof SHA1))return new SHA1;BlockHash$3.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}utils$g.inherits(SHA1,BlockHash$3);var _1=SHA1;SHA1.blockSize=512;SHA1.outSize=160;SHA1.hmacStrength=80;SHA1.padLength=64;SHA1.prototype._update=function(e,n){for(var a=this.W,o=0;o<16;o++)a[o]=e[n+o];for(;o<a.length;o++)a[o]=rotl32$1(a[o-3]^a[o-8]^a[o-14]^a[o-16],1);var l=this.h[0],u=this.h[1],d=this.h[2],m=this.h[3],y=this.h[4];for(o=0;o<a.length;o++){var b=~~(o/20),_=sum32_5$1(rotl32$1(l,5),ft_1(b,u,d,m),y,a[o],sha1_K[b]);y=m,m=d,d=rotl32$1(u,30),u=l,l=_}this.h[0]=sum32$2(this.h[0],l),this.h[1]=sum32$2(this.h[1],u),this.h[2]=sum32$2(this.h[2],d),this.h[3]=sum32$2(this.h[3],m),this.h[4]=sum32$2(this.h[4],y)};SHA1.prototype._digest=function(e){return e==="hex"?utils$g.toHex32(this.h,"big"):utils$g.split32(this.h,"big")};var utils$f=utils$j,common$5=common$8,shaCommon=common$7,assert$g=minimalisticAssert$1,sum32$1=utils$f.sum32,sum32_4$1=utils$f.sum32_4,sum32_5=utils$f.sum32_5,ch32=shaCommon.ch32,maj32=shaCommon.maj32,s0_256=shaCommon.s0_256,s1_256=shaCommon.s1_256,g0_256=shaCommon.g0_256,g1_256=shaCommon.g1_256,BlockHash$2=common$5.BlockHash,sha256_K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function SHA256$1(){if(!(this instanceof SHA256$1))return new SHA256$1;BlockHash$2.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=sha256_K,this.W=new Array(64)}utils$f.inherits(SHA256$1,BlockHash$2);var _256=SHA256$1;SHA256$1.blockSize=512;SHA256$1.outSize=256;SHA256$1.hmacStrength=192;SHA256$1.padLength=64;SHA256$1.prototype._update=function(e,n){for(var a=this.W,o=0;o<16;o++)a[o]=e[n+o];for(;o<a.length;o++)a[o]=sum32_4$1(g1_256(a[o-2]),a[o-7],g0_256(a[o-15]),a[o-16]);var l=this.h[0],u=this.h[1],d=this.h[2],m=this.h[3],y=this.h[4],b=this.h[5],_=this.h[6],w=this.h[7];for(assert$g(this.k.length===a.length),o=0;o<a.length;o++){var E=sum32_5(w,s1_256(y),ch32(y,b,_),this.k[o],a[o]),A=sum32$1(s0_256(l),maj32(l,u,d));w=_,_=b,b=y,y=sum32$1(m,E),m=d,d=u,u=l,l=sum32$1(E,A)}this.h[0]=sum32$1(this.h[0],l),this.h[1]=sum32$1(this.h[1],u),this.h[2]=sum32$1(this.h[2],d),this.h[3]=sum32$1(this.h[3],m),this.h[4]=sum32$1(this.h[4],y),this.h[5]=sum32$1(this.h[5],b),this.h[6]=sum32$1(this.h[6],_),this.h[7]=sum32$1(this.h[7],w)};SHA256$1.prototype._digest=function(e){return e==="hex"?utils$f.toHex32(this.h,"big"):utils$f.split32(this.h,"big")};var utils$e=utils$j,SHA256=_256;function SHA224(){if(!(this instanceof SHA224))return new SHA224;SHA256.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}utils$e.inherits(SHA224,SHA256);var _224=SHA224;SHA224.blockSize=512;SHA224.outSize=224;SHA224.hmacStrength=192;SHA224.padLength=64;SHA224.prototype._digest=function(e){return e==="hex"?utils$e.toHex32(this.h.slice(0,7),"big"):utils$e.split32(this.h.slice(0,7),"big")};var utils$d=utils$j,common$4=common$8,assert$f=minimalisticAssert$1,rotr64_hi=utils$d.rotr64_hi,rotr64_lo=utils$d.rotr64_lo,shr64_hi=utils$d.shr64_hi,shr64_lo=utils$d.shr64_lo,sum64=utils$d.sum64,sum64_hi=utils$d.sum64_hi,sum64_lo=utils$d.sum64_lo,sum64_4_hi=utils$d.sum64_4_hi,sum64_4_lo=utils$d.sum64_4_lo,sum64_5_hi=utils$d.sum64_5_hi,sum64_5_lo=utils$d.sum64_5_lo,BlockHash$1=common$4.BlockHash,sha512_K=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function SHA512$1(){if(!(this instanceof SHA512$1))return new SHA512$1;BlockHash$1.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=sha512_K,this.W=new Array(160)}utils$d.inherits(SHA512$1,BlockHash$1);var _512=SHA512$1;SHA512$1.blockSize=1024;SHA512$1.outSize=512;SHA512$1.hmacStrength=192;SHA512$1.padLength=128;SHA512$1.prototype._prepareBlock=function(e,n){for(var a=this.W,o=0;o<32;o++)a[o]=e[n+o];for(;o<a.length;o+=2){var l=g1_512_hi(a[o-4],a[o-3]),u=g1_512_lo(a[o-4],a[o-3]),d=a[o-14],m=a[o-13],y=g0_512_hi(a[o-30],a[o-29]),b=g0_512_lo(a[o-30],a[o-29]),_=a[o-32],w=a[o-31];a[o]=sum64_4_hi(l,u,d,m,y,b,_,w),a[o+1]=sum64_4_lo(l,u,d,m,y,b,_,w)}};SHA512$1.prototype._update=function(e,n){this._prepareBlock(e,n);var a=this.W,o=this.h[0],l=this.h[1],u=this.h[2],d=this.h[3],m=this.h[4],y=this.h[5],b=this.h[6],_=this.h[7],w=this.h[8],E=this.h[9],A=this.h[10],C=this.h[11],k=this.h[12],B=this.h[13],D=this.h[14],q=this.h[15];assert$f(this.k.length===a.length);for(var j=0;j<a.length;j+=2){var J=D,Y=q,L=s1_512_hi(w,E),Z=s1_512_lo(w,E),Q=ch64_hi(w,E,A,C,k),oe=ch64_lo(w,E,A,C,k,B),ae=this.k[j],U=this.k[j+1],I=a[j],x=a[j+1],T=sum64_5_hi(J,Y,L,Z,Q,oe,ae,U,I,x),M=sum64_5_lo(J,Y,L,Z,Q,oe,ae,U,I,x);J=s0_512_hi(o,l),Y=s0_512_lo(o,l),L=maj64_hi(o,l,u,d,m),Z=maj64_lo(o,l,u,d,m,y);var O=sum64_hi(J,Y,L,Z),z=sum64_lo(J,Y,L,Z);D=k,q=B,k=A,B=C,A=w,C=E,w=sum64_hi(b,_,T,M),E=sum64_lo(_,_,T,M),b=m,_=y,m=u,y=d,u=o,d=l,o=sum64_hi(T,M,O,z),l=sum64_lo(T,M,O,z)}sum64(this.h,0,o,l),sum64(this.h,2,u,d),sum64(this.h,4,m,y),sum64(this.h,6,b,_),sum64(this.h,8,w,E),sum64(this.h,10,A,C),sum64(this.h,12,k,B),sum64(this.h,14,D,q)};SHA512$1.prototype._digest=function(e){return e==="hex"?utils$d.toHex32(this.h,"big"):utils$d.split32(this.h,"big")};function ch64_hi(t,e,n,a,o){var l=t&n^~t&o;return l<0&&(l+=4294967296),l}function ch64_lo(t,e,n,a,o,l){var u=e&a^~e&l;return u<0&&(u+=4294967296),u}function maj64_hi(t,e,n,a,o){var l=t&n^t&o^n&o;return l<0&&(l+=4294967296),l}function maj64_lo(t,e,n,a,o,l){var u=e&a^e&l^a&l;return u<0&&(u+=4294967296),u}function s0_512_hi(t,e){var n=rotr64_hi(t,e,28),a=rotr64_hi(e,t,2),o=rotr64_hi(e,t,7),l=n^a^o;return l<0&&(l+=4294967296),l}function s0_512_lo(t,e){var n=rotr64_lo(t,e,28),a=rotr64_lo(e,t,2),o=rotr64_lo(e,t,7),l=n^a^o;return l<0&&(l+=4294967296),l}function s1_512_hi(t,e){var n=rotr64_hi(t,e,14),a=rotr64_hi(t,e,18),o=rotr64_hi(e,t,9),l=n^a^o;return l<0&&(l+=4294967296),l}function s1_512_lo(t,e){var n=rotr64_lo(t,e,14),a=rotr64_lo(t,e,18),o=rotr64_lo(e,t,9),l=n^a^o;return l<0&&(l+=4294967296),l}function g0_512_hi(t,e){var n=rotr64_hi(t,e,1),a=rotr64_hi(t,e,8),o=shr64_hi(t,e,7),l=n^a^o;return l<0&&(l+=4294967296),l}function g0_512_lo(t,e){var n=rotr64_lo(t,e,1),a=rotr64_lo(t,e,8),o=shr64_lo(t,e,7),l=n^a^o;return l<0&&(l+=4294967296),l}function g1_512_hi(t,e){var n=rotr64_hi(t,e,19),a=rotr64_hi(e,t,29),o=shr64_hi(t,e,6),l=n^a^o;return l<0&&(l+=4294967296),l}function g1_512_lo(t,e){var n=rotr64_lo(t,e,19),a=rotr64_lo(e,t,29),o=shr64_lo(t,e,6),l=n^a^o;return l<0&&(l+=4294967296),l}var utils$c=utils$j,SHA512=_512;function SHA384(){if(!(this instanceof SHA384))return new SHA384;SHA512.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}utils$c.inherits(SHA384,SHA512);var _384=SHA384;SHA384.blockSize=1024;SHA384.outSize=384;SHA384.hmacStrength=192;SHA384.padLength=128;SHA384.prototype._digest=function(e){return e==="hex"?utils$c.toHex32(this.h.slice(0,12),"big"):utils$c.split32(this.h.slice(0,12),"big")};sha$3.sha1=_1;sha$3.sha224=_224;sha$3.sha256=_256;sha$3.sha384=_384;sha$3.sha512=_512;var ripemd={},utils$b=utils$j,common$3=common$8,rotl32=utils$b.rotl32,sum32=utils$b.sum32,sum32_3=utils$b.sum32_3,sum32_4=utils$b.sum32_4,BlockHash=common$3.BlockHash;function RIPEMD160(){if(!(this instanceof RIPEMD160))return new RIPEMD160;BlockHash.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}utils$b.inherits(RIPEMD160,BlockHash);ripemd.ripemd160=RIPEMD160;RIPEMD160.blockSize=512;RIPEMD160.outSize=160;RIPEMD160.hmacStrength=192;RIPEMD160.padLength=64;RIPEMD160.prototype._update=function(e,n){for(var a=this.h[0],o=this.h[1],l=this.h[2],u=this.h[3],d=this.h[4],m=a,y=o,b=l,_=u,w=d,E=0;E<80;E++){var A=sum32(rotl32(sum32_4(a,f(E,o,l,u),e[r[E]+n],K(E)),s$1[E]),d);a=d,d=u,u=rotl32(l,10),l=o,o=A,A=sum32(rotl32(sum32_4(m,f(79-E,y,b,_),e[rh[E]+n],Kh(E)),sh[E]),w),m=w,w=_,_=rotl32(b,10),b=y,y=A}A=sum32_3(this.h[1],l,_),this.h[1]=sum32_3(this.h[2],u,w),this.h[2]=sum32_3(this.h[3],d,m),this.h[3]=sum32_3(this.h[4],a,y),this.h[4]=sum32_3(this.h[0],o,b),this.h[0]=A};RIPEMD160.prototype._digest=function(e){return e==="hex"?utils$b.toHex32(this.h,"little"):utils$b.split32(this.h,"little")};function f(t,e,n,a){return t<=15?e^n^a:t<=31?e&n|~e&a:t<=47?(e|~n)^a:t<=63?e&a|n&~a:e^(n|~a)}function K(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function Kh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var r=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],rh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s$1=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],utils$a=utils$j,assert$e=minimalisticAssert$1;function Hmac(t,e,n){if(!(this instanceof Hmac))return new Hmac(t,e,n);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(utils$a.toArray(e,n))}var hmac$1=Hmac;Hmac.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),assert$e(e.length<=this.blockSize);for(var n=e.length;n<this.blockSize;n++)e.push(0);for(n=0;n<e.length;n++)e[n]^=54;for(this.inner=new this.Hash().update(e),n=0;n<e.length;n++)e[n]^=106;this.outer=new this.Hash().update(e)};Hmac.prototype.update=function(e,n){return this.inner.update(e,n),this};Hmac.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=utils$j,e.common=common$8,e.sha=sha$3,e.ripemd=ripemd,e.hmac=hmac$1,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(hash$3);var secp256k1$1,hasRequiredSecp256k1;function requireSecp256k1(){return hasRequiredSecp256k1||(hasRequiredSecp256k1=1,secp256k1$1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),secp256k1$1}(function(t){var e=t,n=hash$3,a=curve,o=utils$p,l=o.assert;function u(y){y.type==="short"?this.curve=new a.short(y):y.type==="edwards"?this.curve=new a.edwards(y):this.curve=new a.mont(y),this.g=this.curve.g,this.n=this.curve.n,this.hash=y.hash,l(this.g.validate(),"Invalid curve"),l(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=u;function d(y,b){Object.defineProperty(e,y,{configurable:!0,enumerable:!0,get:function(){var _=new u(b);return Object.defineProperty(e,y,{configurable:!0,enumerable:!0,value:_}),_}})}d("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),d("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),d("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),d("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),d("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),d("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),d("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var m;try{m=requireSecp256k1()}catch{m=void 0}d("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",m]})})(curves$1);var hash$2=hash$3,utils$9=utils$o,assert$d=minimalisticAssert$1;function HmacDRBG$1(t){if(!(this instanceof HmacDRBG$1))return new HmacDRBG$1(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils$9.toArray(t.entropy,t.entropyEnc||"hex"),n=utils$9.toArray(t.nonce,t.nonceEnc||"hex"),a=utils$9.toArray(t.pers,t.persEnc||"hex");assert$d(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,a)}var hmacDrbg$1=HmacDRBG$1;HmacDRBG$1.prototype._init=function(e,n,a){var o=e.concat(n).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG$1.prototype._hmac=function(){return new hash$2.hmac(this.hash,this.K)};HmacDRBG$1.prototype._update=function(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG$1.prototype.reseed=function(e,n,a,o){typeof n!="string"&&(o=a,a=n,n=null),e=utils$9.toArray(e,n),a=utils$9.toArray(a,o),assert$d(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(a||[])),this._reseed=1};HmacDRBG$1.prototype.generate=function(e,n,a,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(o=a,a=n,n=null),a&&(a=utils$9.toArray(a,o||"hex"),this._update(a));for(var l=[];l.length<e;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var u=l.slice(0,e);return this._update(a),this._reseed++,utils$9.encode(u,n)};var BN$8=bnExports$4,utils$8=utils$p,assert$c=utils$8.assert;function KeyPair$3(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key$3=KeyPair$3;KeyPair$3.fromPublic=function(e,n,a){return n instanceof KeyPair$3?n:new KeyPair$3(e,{pub:n,pubEnc:a})};KeyPair$3.fromPrivate=function(e,n,a){return n instanceof KeyPair$3?n:new KeyPair$3(e,{priv:n,privEnc:a})};KeyPair$3.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair$3.prototype.getPublic=function(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};KeyPair$3.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair$3.prototype._importPrivate=function(e,n){this.priv=new BN$8(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair$3.prototype._importPublic=function(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?assert$c(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$c(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};KeyPair$3.prototype.derive=function(e){return e.validate()||assert$c(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair$3.prototype.sign=function(e,n,a){return this.ec.sign(e,this,n,a)};KeyPair$3.prototype.verify=function(e,n){return this.ec.verify(e,n,this)};KeyPair$3.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var BN$7=bnExports$4,utils$7=utils$p,assert$b=utils$7.assert;function Signature$5(t,e){if(t instanceof Signature$5)return t;this._importDER(t,e)||(assert$b(t.r&&t.s,"Signature without r or s"),this.r=new BN$7(t.r,16),this.s=new BN$7(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature$2=Signature$5;function Position$1(){this.place=0}function getLength$1(t,e){var n=t[e.place++];if(!(n&128))return n;var a=n&15;if(a===0||a>4)return!1;for(var o=0,l=0,u=e.place;l<a;l++,u++)o<<=8,o|=t[u],o>>>=0;return o<=127?!1:(e.place=u,o)}function rmPadding$1(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}Signature$5.prototype._importDER=function(e,n){e=utils$7.toArray(e,n);var a=new Position$1;if(e[a.place++]!==48)return!1;var o=getLength$1(e,a);if(o===!1||o+a.place!==e.length||e[a.place++]!==2)return!1;var l=getLength$1(e,a);if(l===!1)return!1;var u=e.slice(a.place,l+a.place);if(a.place+=l,e[a.place++]!==2)return!1;var d=getLength$1(e,a);if(d===!1||e.length!==d+a.place)return!1;var m=e.slice(a.place,d+a.place);if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;if(m[0]===0)if(m[1]&128)m=m.slice(1);else return!1;return this.r=new BN$7(u),this.s=new BN$7(m),this.recoveryParam=null,!0};function constructLength$1(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}Signature$5.prototype.toDER=function(e){var n=this.r.toArray(),a=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),a[0]&128&&(a=[0].concat(a)),n=rmPadding$1(n),a=rmPadding$1(a);!a[0]&&!(a[1]&128);)a=a.slice(1);var o=[2];constructLength$1(o,n.length),o=o.concat(n),o.push(2),constructLength$1(o,a.length);var l=o.concat(a),u=[48];return constructLength$1(u,l.length),u=u.concat(l),utils$7.encode(u,e)};var ec$3,hasRequiredEc;function requireEc(){if(hasRequiredEc)return ec$3;hasRequiredEc=1;var t=bnExports$4,e=hmacDrbg$1,n=utils$p,a=curves$1,o=requireBrorand(),l=n.assert,u=key$3,d=signature$2;function m(y){if(!(this instanceof m))return new m(y);typeof y=="string"&&(l(Object.prototype.hasOwnProperty.call(a,y),"Unknown curve "+y),y=a[y]),y instanceof a.PresetCurve&&(y={curve:y}),this.curve=y.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=y.curve.g,this.g.precompute(y.curve.n.bitLength()+1),this.hash=y.hash||y.curve.hash}return ec$3=m,m.prototype.keyPair=function(b){return new u(this,b)},m.prototype.keyFromPrivate=function(b,_){return u.fromPrivate(this,b,_)},m.prototype.keyFromPublic=function(b,_){return u.fromPublic(this,b,_)},m.prototype.genKeyPair=function(b){b||(b={});for(var _=new e({hash:this.hash,pers:b.pers,persEnc:b.persEnc||"utf8",entropy:b.entropy||o(this.hash.hmacStrength),entropyEnc:b.entropy&&b.entropyEnc||"utf8",nonce:this.n.toArray()}),w=this.n.byteLength(),E=this.n.sub(new t(2));;){var A=new t(_.generate(w));if(!(A.cmp(E)>0))return A.iaddn(1),this.keyFromPrivate(A)}},m.prototype._truncateToN=function(b,_){var w=b.byteLength()*8-this.n.bitLength();return w>0&&(b=b.ushrn(w)),!_&&b.cmp(this.n)>=0?b.sub(this.n):b},m.prototype.sign=function(b,_,w,E){typeof w=="object"&&(E=w,w=null),E||(E={}),_=this.keyFromPrivate(_,w),b=this._truncateToN(new t(b,16));for(var A=this.n.byteLength(),C=_.getPrivate().toArray("be",A),k=b.toArray("be",A),B=new e({hash:this.hash,entropy:C,nonce:k,pers:E.pers,persEnc:E.persEnc||"utf8"}),D=this.n.sub(new t(1)),q=0;;q++){var j=E.k?E.k(q):new t(B.generate(this.n.byteLength()));if(j=this._truncateToN(j,!0),!(j.cmpn(1)<=0||j.cmp(D)>=0)){var J=this.g.mul(j);if(!J.isInfinity()){var Y=J.getX(),L=Y.umod(this.n);if(L.cmpn(0)!==0){var Z=j.invm(this.n).mul(L.mul(_.getPrivate()).iadd(b));if(Z=Z.umod(this.n),Z.cmpn(0)!==0){var Q=(J.getY().isOdd()?1:0)|(Y.cmp(L)!==0?2:0);return E.canonical&&Z.cmp(this.nh)>0&&(Z=this.n.sub(Z),Q^=1),new d({r:L,s:Z,recoveryParam:Q})}}}}}},m.prototype.verify=function(b,_,w,E){b=this._truncateToN(new t(b,16)),w=this.keyFromPublic(w,E),_=new d(_,"hex");var A=_.r,C=_.s;if(A.cmpn(1)<0||A.cmp(this.n)>=0||C.cmpn(1)<0||C.cmp(this.n)>=0)return!1;var k=C.invm(this.n),B=k.mul(b).umod(this.n),D=k.mul(A).umod(this.n),q;return this.curve._maxwellTrick?(q=this.g.jmulAdd(B,w.getPublic(),D),q.isInfinity()?!1:q.eqXToP(A)):(q=this.g.mulAdd(B,w.getPublic(),D),q.isInfinity()?!1:q.getX().umod(this.n).cmp(A)===0)},m.prototype.recoverPubKey=function(y,b,_,w){l((3&_)===_,"The recovery param is more than two bits"),b=new d(b,w);var E=this.n,A=new t(y),C=b.r,k=b.s,B=_&1,D=_>>1;if(C.cmp(this.curve.p.umod(this.curve.n))>=0&&D)throw new Error("Unable to find sencond key candinate");D?C=this.curve.pointFromX(C.add(this.curve.n),B):C=this.curve.pointFromX(C,B);var q=b.r.invm(E),j=E.sub(A).mul(q).umod(E),J=k.mul(q).umod(E);return this.g.mulAdd(j,C,J)},m.prototype.getKeyRecoveryParam=function(y,b,_,w){if(b=new d(b,w),b.recoveryParam!==null)return b.recoveryParam;for(var E=0;E<4;E++){var A;try{A=this.recoverPubKey(y,b,E)}catch{continue}if(A.eq(_))return E}throw new Error("Unable to find valid recovery factor")},ec$3}var utils$6=utils$p,assert$a=utils$6.assert,parseBytes$2=utils$6.parseBytes,cachedProperty$1=utils$6.cachedProperty;function KeyPair$2(t,e){this.eddsa=t,this._secret=parseBytes$2(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=parseBytes$2(e.pub)}KeyPair$2.fromPublic=function(e,n){return n instanceof KeyPair$2?n:new KeyPair$2(e,{pub:n})};KeyPair$2.fromSecret=function(e,n){return n instanceof KeyPair$2?n:new KeyPair$2(e,{secret:n})};KeyPair$2.prototype.secret=function(){return this._secret};cachedProperty$1(KeyPair$2,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});cachedProperty$1(KeyPair$2,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});cachedProperty$1(KeyPair$2,"privBytes",function(){var e=this.eddsa,n=this.hash(),a=e.encodingLength-1,o=n.slice(0,e.encodingLength);return o[0]&=248,o[a]&=127,o[a]|=64,o});cachedProperty$1(KeyPair$2,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});cachedProperty$1(KeyPair$2,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});cachedProperty$1(KeyPair$2,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});KeyPair$2.prototype.sign=function(e){return assert$a(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};KeyPair$2.prototype.verify=function(e,n){return this.eddsa.verify(e,n,this)};KeyPair$2.prototype.getSecret=function(e){return assert$a(this._secret,"KeyPair is public only"),utils$6.encode(this.secret(),e)};KeyPair$2.prototype.getPublic=function(e){return utils$6.encode(this.pubBytes(),e)};var key$2=KeyPair$2,BN$6=bnExports$4,utils$5=utils$p,assert$9=utils$5.assert,cachedProperty=utils$5.cachedProperty,parseBytes$1=utils$5.parseBytes;function Signature$4(t,e){this.eddsa=t,typeof e!="object"&&(e=parseBytes$1(e)),Array.isArray(e)&&(e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),assert$9(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof BN$6&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}cachedProperty(Signature$4,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});cachedProperty(Signature$4,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});cachedProperty(Signature$4,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});cachedProperty(Signature$4,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Signature$4.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Signature$4.prototype.toHex=function(){return utils$5.encode(this.toBytes(),"hex").toUpperCase()};var signature$1=Signature$4,hash$1=hash$3,curves=curves$1,utils$4=utils$p,assert$8=utils$4.assert,parseBytes=utils$4.parseBytes,KeyPair$1=key$2,Signature$3=signature$1;function EDDSA(t){if(assert$8(t==="ed25519","only tested with ed25519 so far"),!(this instanceof EDDSA))return new EDDSA(t);t=curves[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=hash$1.sha512}var eddsa=EDDSA;EDDSA.prototype.sign=function(e,n){e=parseBytes(e);var a=this.keyFromSecret(n),o=this.hashInt(a.messagePrefix(),e),l=this.g.mul(o),u=this.encodePoint(l),d=this.hashInt(u,a.pubBytes(),e).mul(a.priv()),m=o.add(d).umod(this.curve.n);return this.makeSignature({R:l,S:m,Rencoded:u})};EDDSA.prototype.verify=function(e,n,a){e=parseBytes(e),n=this.makeSignature(n);var o=this.keyFromPublic(a),l=this.hashInt(n.Rencoded(),o.pubBytes(),e),u=this.g.mul(n.S()),d=n.R().add(o.pub().mul(l));return d.eq(u)};EDDSA.prototype.hashInt=function(){for(var e=this.hash(),n=0;n<arguments.length;n++)e.update(arguments[n]);return utils$4.intFromLE(e.digest()).umod(this.curve.n)};EDDSA.prototype.keyFromPublic=function(e){return KeyPair$1.fromPublic(this,e)};EDDSA.prototype.keyFromSecret=function(e){return KeyPair$1.fromSecret(this,e)};EDDSA.prototype.makeSignature=function(e){return e instanceof Signature$3?e:new Signature$3(this,e)};EDDSA.prototype.encodePoint=function(e){var n=e.getY().toArray("le",this.encodingLength);return n[this.encodingLength-1]|=e.getX().isOdd()?128:0,n};EDDSA.prototype.decodePoint=function(e){e=utils$4.parseBytes(e);var n=e.length-1,a=e.slice(0,n).concat(e[n]&-129),o=(e[n]&128)!==0,l=utils$4.intFromLE(a);return this.curve.pointFromY(l,o)};EDDSA.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};EDDSA.prototype.decodeInt=function(e){return utils$4.intFromLE(e)};EDDSA.prototype.isPoint=function(e){return e instanceof this.pointClass};var hasRequiredElliptic;function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,function(t){var e=t;e.version=require$$0$1.version,e.utils=utils$p,e.rand=requireBrorand(),e.curve=curve,e.curves=curves$1,e.ec=requireEc(),e.eddsa=eddsa}(elliptic$3)),elliptic$3}var bnExports$2={},bn$2={get exports(){return bnExports$2},set exports(t){bnExports$2=t}};(function(t){(function(e,n){function a(I,x){if(!I)throw new Error(x||"Assertion failed")}function o(I,x){I.super_=x;var T=function(){};T.prototype=x.prototype,I.prototype=new T,I.prototype.constructor=I}function l(I,x,T){if(l.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((x==="le"||x==="be")&&(T=x,x=10),this._init(I||0,x||10,T||"be"))}typeof e=="object"?e.exports=l:n.BN=l,l.BN=l,l.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=require$$0$2.Buffer}catch{}l.isBN=function(x){return x instanceof l?!0:x!==null&&typeof x=="object"&&x.constructor.wordSize===l.wordSize&&Array.isArray(x.words)},l.max=function(x,T){return x.cmp(T)>0?x:T},l.min=function(x,T){return x.cmp(T)<0?x:T},l.prototype._init=function(x,T,M){if(typeof x=="number")return this._initNumber(x,T,M);if(typeof x=="object")return this._initArray(x,T,M);T==="hex"&&(T=16),a(T===(T|0)&&T>=2&&T<=36),x=x.toString().replace(/\s+/g,"");var O=0;x[0]==="-"&&(O++,this.negative=1),O<x.length&&(T===16?this._parseHex(x,O,M):(this._parseBase(x,T,O),M==="le"&&this._initArray(this.toArray(),T,M)))},l.prototype._initNumber=function(x,T,M){x<0&&(this.negative=1,x=-x),x<67108864?(this.words=[x&67108863],this.length=1):x<4503599627370496?(this.words=[x&67108863,x/67108864&67108863],this.length=2):(a(x<9007199254740992),this.words=[x&67108863,x/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),T,M)},l.prototype._initArray=function(x,T,M){if(a(typeof x.length=="number"),x.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(x.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var z,X,H=0;if(M==="be")for(O=x.length-1,z=0;O>=0;O-=3)X=x[O]|x[O-1]<<8|x[O-2]<<16,this.words[z]|=X<<H&67108863,this.words[z+1]=X>>>26-H&67108863,H+=24,H>=26&&(H-=26,z++);else if(M==="le")for(O=0,z=0;O<x.length;O+=3)X=x[O]|x[O+1]<<8|x[O+2]<<16,this.words[z]|=X<<H&67108863,this.words[z+1]=X>>>26-H&67108863,H+=24,H>=26&&(H-=26,z++);return this._strip()};function d(I,x){var T=I.charCodeAt(x);if(T>=48&&T<=57)return T-48;if(T>=65&&T<=70)return T-55;if(T>=97&&T<=102)return T-87;a(!1,"Invalid character in "+I)}function m(I,x,T){var M=d(I,T);return T-1>=x&&(M|=d(I,T-1)<<4),M}l.prototype._parseHex=function(x,T,M){this.length=Math.ceil((x.length-T)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var z=0,X=0,H;if(M==="be")for(O=x.length-1;O>=T;O-=2)H=m(x,T,O)<<z,this.words[X]|=H&67108863,z>=18?(z-=18,X+=1,this.words[X]|=H>>>26):z+=8;else{var P=x.length-T;for(O=P%2===0?T+1:T;O<x.length;O+=2)H=m(x,T,O)<<z,this.words[X]|=H&67108863,z>=18?(z-=18,X+=1,this.words[X]|=H>>>26):z+=8}this._strip()};function y(I,x,T,M){for(var O=0,z=0,X=Math.min(I.length,T),H=x;H<X;H++){var P=I.charCodeAt(H)-48;O*=M,P>=49?z=P-49+10:P>=17?z=P-17+10:z=P,a(P>=0&&z<M,"Invalid character"),O+=z}return O}l.prototype._parseBase=function(x,T,M){this.words=[0],this.length=1;for(var O=0,z=1;z<=67108863;z*=T)O++;O--,z=z/T|0;for(var X=x.length-M,H=X%O,P=Math.min(X,X-H)+M,S=0,F=M;F<P;F+=O)S=y(x,F,F+O,T),this.imuln(z),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S);if(H!==0){var ue=1;for(S=y(x,F,x.length,T),F=0;F<H;F++)ue*=T;this.imuln(ue),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S)}this._strip()},l.prototype.copy=function(x){x.words=new Array(this.length);for(var T=0;T<this.length;T++)x.words[T]=this.words[T];x.length=this.length,x.negative=this.negative,x.red=this.red};function b(I,x){I.words=x.words,I.length=x.length,I.negative=x.negative,I.red=x.red}if(l.prototype._move=function(x){b(x,this)},l.prototype.clone=function(){var x=new l(null);return this.copy(x),x},l.prototype._expand=function(x){for(;this.length<x;)this.words[this.length++]=0;return this},l.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{l.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{l.prototype.inspect=_}else l.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(x,T){x=x||10,T=T|0||1;var M;if(x===16||x==="hex"){M="";for(var O=0,z=0,X=0;X<this.length;X++){var H=this.words[X],P=((H<<O|z)&16777215).toString(16);z=H>>>24-O&16777215,O+=2,O>=26&&(O-=26,X--),z!==0||X!==this.length-1?M=w[6-P.length]+P+M:M=P+M}for(z!==0&&(M=z.toString(16)+M);M.length%T!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(x===(x|0)&&x>=2&&x<=36){var S=E[x],F=A[x];M="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var ee=ue.modrn(F).toString(x);ue=ue.idivn(F),ue.isZero()?M=ee+M:M=w[S-ee.length]+ee+M}for(this.isZero()&&(M="0"+M);M.length%T!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}a(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var x=this.words[0];return this.length===2?x+=this.words[1]*67108864:this.length===3&&this.words[2]===1?x+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-x:x},l.prototype.toJSON=function(){return this.toString(16,2)},u&&(l.prototype.toBuffer=function(x,T){return this.toArrayLike(u,x,T)}),l.prototype.toArray=function(x,T){return this.toArrayLike(Array,x,T)};var C=function(x,T){return x.allocUnsafe?x.allocUnsafe(T):new x(T)};l.prototype.toArrayLike=function(x,T,M){this._strip();var O=this.byteLength(),z=M||Math.max(1,O);a(O<=z,"byte array longer than desired length"),a(z>0,"Requested array length <= 0");var X=C(x,z),H=T==="le"?"LE":"BE";return this["_toArrayLike"+H](X,O),X},l.prototype._toArrayLikeLE=function(x,T){for(var M=0,O=0,z=0,X=0;z<this.length;z++){var H=this.words[z]<<X|O;x[M++]=H&255,M<x.length&&(x[M++]=H>>8&255),M<x.length&&(x[M++]=H>>16&255),X===6?(M<x.length&&(x[M++]=H>>24&255),O=0,X=0):(O=H>>>24,X+=2)}if(M<x.length)for(x[M++]=O;M<x.length;)x[M++]=0},l.prototype._toArrayLikeBE=function(x,T){for(var M=x.length-1,O=0,z=0,X=0;z<this.length;z++){var H=this.words[z]<<X|O;x[M--]=H&255,M>=0&&(x[M--]=H>>8&255),M>=0&&(x[M--]=H>>16&255),X===6?(M>=0&&(x[M--]=H>>24&255),O=0,X=0):(O=H>>>24,X+=2)}if(M>=0)for(x[M--]=O;M>=0;)x[M--]=0},Math.clz32?l.prototype._countBits=function(x){return 32-Math.clz32(x)}:l.prototype._countBits=function(x){var T=x,M=0;return T>=4096&&(M+=13,T>>>=13),T>=64&&(M+=7,T>>>=7),T>=8&&(M+=4,T>>>=4),T>=2&&(M+=2,T>>>=2),M+T},l.prototype._zeroBits=function(x){if(x===0)return 26;var T=x,M=0;return T&8191||(M+=13,T>>>=13),T&127||(M+=7,T>>>=7),T&15||(M+=4,T>>>=4),T&3||(M+=2,T>>>=2),T&1||M++,M},l.prototype.bitLength=function(){var x=this.words[this.length-1],T=this._countBits(x);return(this.length-1)*26+T};function k(I){for(var x=new Array(I.bitLength()),T=0;T<x.length;T++){var M=T/26|0,O=T%26;x[T]=I.words[M]>>>O&1}return x}l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var x=0,T=0;T<this.length;T++){var M=this._zeroBits(this.words[T]);if(x+=M,M!==26)break}return x},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(x){return this.negative!==0?this.abs().inotn(x).iaddn(1):this.clone()},l.prototype.fromTwos=function(x){return this.testn(x-1)?this.notn(x).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(x){for(;this.length<x.length;)this.words[this.length++]=0;for(var T=0;T<x.length;T++)this.words[T]=this.words[T]|x.words[T];return this._strip()},l.prototype.ior=function(x){return a((this.negative|x.negative)===0),this.iuor(x)},l.prototype.or=function(x){return this.length>x.length?this.clone().ior(x):x.clone().ior(this)},l.prototype.uor=function(x){return this.length>x.length?this.clone().iuor(x):x.clone().iuor(this)},l.prototype.iuand=function(x){var T;this.length>x.length?T=x:T=this;for(var M=0;M<T.length;M++)this.words[M]=this.words[M]&x.words[M];return this.length=T.length,this._strip()},l.prototype.iand=function(x){return a((this.negative|x.negative)===0),this.iuand(x)},l.prototype.and=function(x){return this.length>x.length?this.clone().iand(x):x.clone().iand(this)},l.prototype.uand=function(x){return this.length>x.length?this.clone().iuand(x):x.clone().iuand(this)},l.prototype.iuxor=function(x){var T,M;this.length>x.length?(T=this,M=x):(T=x,M=this);for(var O=0;O<M.length;O++)this.words[O]=T.words[O]^M.words[O];if(this!==T)for(;O<T.length;O++)this.words[O]=T.words[O];return this.length=T.length,this._strip()},l.prototype.ixor=function(x){return a((this.negative|x.negative)===0),this.iuxor(x)},l.prototype.xor=function(x){return this.length>x.length?this.clone().ixor(x):x.clone().ixor(this)},l.prototype.uxor=function(x){return this.length>x.length?this.clone().iuxor(x):x.clone().iuxor(this)},l.prototype.inotn=function(x){a(typeof x=="number"&&x>=0);var T=Math.ceil(x/26)|0,M=x%26;this._expand(T),M>0&&T--;for(var O=0;O<T;O++)this.words[O]=~this.words[O]&67108863;return M>0&&(this.words[O]=~this.words[O]&67108863>>26-M),this._strip()},l.prototype.notn=function(x){return this.clone().inotn(x)},l.prototype.setn=function(x,T){a(typeof x=="number"&&x>=0);var M=x/26|0,O=x%26;return this._expand(M+1),T?this.words[M]=this.words[M]|1<<O:this.words[M]=this.words[M]&~(1<<O),this._strip()},l.prototype.iadd=function(x){var T;if(this.negative!==0&&x.negative===0)return this.negative=0,T=this.isub(x),this.negative^=1,this._normSign();if(this.negative===0&&x.negative!==0)return x.negative=0,T=this.isub(x),x.negative=1,T._normSign();var M,O;this.length>x.length?(M=this,O=x):(M=x,O=this);for(var z=0,X=0;X<O.length;X++)T=(M.words[X]|0)+(O.words[X]|0)+z,this.words[X]=T&67108863,z=T>>>26;for(;z!==0&&X<M.length;X++)T=(M.words[X]|0)+z,this.words[X]=T&67108863,z=T>>>26;if(this.length=M.length,z!==0)this.words[this.length]=z,this.length++;else if(M!==this)for(;X<M.length;X++)this.words[X]=M.words[X];return this},l.prototype.add=function(x){var T;return x.negative!==0&&this.negative===0?(x.negative=0,T=this.sub(x),x.negative^=1,T):x.negative===0&&this.negative!==0?(this.negative=0,T=x.sub(this),this.negative=1,T):this.length>x.length?this.clone().iadd(x):x.clone().iadd(this)},l.prototype.isub=function(x){if(x.negative!==0){x.negative=0;var T=this.iadd(x);return x.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(x),this.negative=1,this._normSign();var M=this.cmp(x);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,z;M>0?(O=this,z=x):(O=x,z=this);for(var X=0,H=0;H<z.length;H++)T=(O.words[H]|0)-(z.words[H]|0)+X,X=T>>26,this.words[H]=T&67108863;for(;X!==0&&H<O.length;H++)T=(O.words[H]|0)+X,X=T>>26,this.words[H]=T&67108863;if(X===0&&H<O.length&&O!==this)for(;H<O.length;H++)this.words[H]=O.words[H];return this.length=Math.max(this.length,H),O!==this&&(this.negative=1),this._strip()},l.prototype.sub=function(x){return this.clone().isub(x)};function B(I,x,T){T.negative=x.negative^I.negative;var M=I.length+x.length|0;T.length=M,M=M-1|0;var O=I.words[0]|0,z=x.words[0]|0,X=O*z,H=X&67108863,P=X/67108864|0;T.words[0]=H;for(var S=1;S<M;S++){for(var F=P>>>26,ue=P&67108863,ee=Math.min(S,x.length-1),fe=Math.max(0,S-I.length+1);fe<=ee;fe++){var le=S-fe|0;O=I.words[le]|0,z=x.words[fe]|0,X=O*z+ue,F+=X/67108864|0,ue=X&67108863}T.words[S]=ue|0,P=F|0}return P!==0?T.words[S]=P|0:T.length--,T._strip()}var D=function(x,T,M){var O=x.words,z=T.words,X=M.words,H=0,P,S,F,ue=O[0]|0,ee=ue&8191,fe=ue>>>13,le=O[1]|0,ce=le&8191,pe=le>>>13,se=O[2]|0,de=se&8191,re=se>>>13,me=O[3]|0,te=me&8191,ve=me>>>13,Se=O[4]|0,be=Se&8191,_e=Se>>>13,ye=O[5]|0,$e=ye&8191,Ie=ye>>>13,Be=O[6]|0,Me=Be&8191,Fe=Be>>>13,Ve=O[7]|0,Oe=Ve&8191,ge=Ve>>>13,ie=O[8]|0,he=ie&8191,we=ie>>>13,Re=O[9]|0,De=Re&8191,Le=Re>>>13,tt=z[0]|0,We=tt&8191,Ge=tt>>>13,_t=z[1]|0,rt=_t&8191,ot=_t>>>13,Rt=z[2]|0,xt=Rt&8191,ht=Rt>>>13,Tt=z[3]|0,dt=Tt&8191,it=Tt>>>13,Ct=z[4]|0,pt=Ct&8191,at=Ct>>>13,kt=z[5]|0,mt=kt&8191,nt=kt>>>13,Bt=z[6]|0,Ee=Bt&8191,ke=Bt>>>13,Pe=z[7]|0,ne=Pe&8191,xe=Pe>>>13,Te=z[8]|0,Ae=Te&8191,Ce=Te>>>13,Ne=z[9]|0,Ue=Ne&8191,je=Ne>>>13;M.negative=x.negative^T.negative,M.length=19,P=Math.imul(ee,We),S=Math.imul(ee,Ge),S=S+Math.imul(fe,We)|0,F=Math.imul(fe,Ge);var Ke=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,P=Math.imul(ce,We),S=Math.imul(ce,Ge),S=S+Math.imul(pe,We)|0,F=Math.imul(pe,Ge),P=P+Math.imul(ee,rt)|0,S=S+Math.imul(ee,ot)|0,S=S+Math.imul(fe,rt)|0,F=F+Math.imul(fe,ot)|0;var He=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(He>>>26)|0,He&=67108863,P=Math.imul(de,We),S=Math.imul(de,Ge),S=S+Math.imul(re,We)|0,F=Math.imul(re,Ge),P=P+Math.imul(ce,rt)|0,S=S+Math.imul(ce,ot)|0,S=S+Math.imul(pe,rt)|0,F=F+Math.imul(pe,ot)|0,P=P+Math.imul(ee,xt)|0,S=S+Math.imul(ee,ht)|0,S=S+Math.imul(fe,xt)|0,F=F+Math.imul(fe,ht)|0;var ze=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(ze>>>26)|0,ze&=67108863,P=Math.imul(te,We),S=Math.imul(te,Ge),S=S+Math.imul(ve,We)|0,F=Math.imul(ve,Ge),P=P+Math.imul(de,rt)|0,S=S+Math.imul(de,ot)|0,S=S+Math.imul(re,rt)|0,F=F+Math.imul(re,ot)|0,P=P+Math.imul(ce,xt)|0,S=S+Math.imul(ce,ht)|0,S=S+Math.imul(pe,xt)|0,F=F+Math.imul(pe,ht)|0,P=P+Math.imul(ee,dt)|0,S=S+Math.imul(ee,it)|0,S=S+Math.imul(fe,dt)|0,F=F+Math.imul(fe,it)|0;var Ye=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,P=Math.imul(be,We),S=Math.imul(be,Ge),S=S+Math.imul(_e,We)|0,F=Math.imul(_e,Ge),P=P+Math.imul(te,rt)|0,S=S+Math.imul(te,ot)|0,S=S+Math.imul(ve,rt)|0,F=F+Math.imul(ve,ot)|0,P=P+Math.imul(de,xt)|0,S=S+Math.imul(de,ht)|0,S=S+Math.imul(re,xt)|0,F=F+Math.imul(re,ht)|0,P=P+Math.imul(ce,dt)|0,S=S+Math.imul(ce,it)|0,S=S+Math.imul(pe,dt)|0,F=F+Math.imul(pe,it)|0,P=P+Math.imul(ee,pt)|0,S=S+Math.imul(ee,at)|0,S=S+Math.imul(fe,pt)|0,F=F+Math.imul(fe,at)|0;var Qe=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,P=Math.imul($e,We),S=Math.imul($e,Ge),S=S+Math.imul(Ie,We)|0,F=Math.imul(Ie,Ge),P=P+Math.imul(be,rt)|0,S=S+Math.imul(be,ot)|0,S=S+Math.imul(_e,rt)|0,F=F+Math.imul(_e,ot)|0,P=P+Math.imul(te,xt)|0,S=S+Math.imul(te,ht)|0,S=S+Math.imul(ve,xt)|0,F=F+Math.imul(ve,ht)|0,P=P+Math.imul(de,dt)|0,S=S+Math.imul(de,it)|0,S=S+Math.imul(re,dt)|0,F=F+Math.imul(re,it)|0,P=P+Math.imul(ce,pt)|0,S=S+Math.imul(ce,at)|0,S=S+Math.imul(pe,pt)|0,F=F+Math.imul(pe,at)|0,P=P+Math.imul(ee,mt)|0,S=S+Math.imul(ee,nt)|0,S=S+Math.imul(fe,mt)|0,F=F+Math.imul(fe,nt)|0;var st=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(st>>>26)|0,st&=67108863,P=Math.imul(Me,We),S=Math.imul(Me,Ge),S=S+Math.imul(Fe,We)|0,F=Math.imul(Fe,Ge),P=P+Math.imul($e,rt)|0,S=S+Math.imul($e,ot)|0,S=S+Math.imul(Ie,rt)|0,F=F+Math.imul(Ie,ot)|0,P=P+Math.imul(be,xt)|0,S=S+Math.imul(be,ht)|0,S=S+Math.imul(_e,xt)|0,F=F+Math.imul(_e,ht)|0,P=P+Math.imul(te,dt)|0,S=S+Math.imul(te,it)|0,S=S+Math.imul(ve,dt)|0,F=F+Math.imul(ve,it)|0,P=P+Math.imul(de,pt)|0,S=S+Math.imul(de,at)|0,S=S+Math.imul(re,pt)|0,F=F+Math.imul(re,at)|0,P=P+Math.imul(ce,mt)|0,S=S+Math.imul(ce,nt)|0,S=S+Math.imul(pe,mt)|0,F=F+Math.imul(pe,nt)|0,P=P+Math.imul(ee,Ee)|0,S=S+Math.imul(ee,ke)|0,S=S+Math.imul(fe,Ee)|0,F=F+Math.imul(fe,ke)|0;var Ze=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,P=Math.imul(Oe,We),S=Math.imul(Oe,Ge),S=S+Math.imul(ge,We)|0,F=Math.imul(ge,Ge),P=P+Math.imul(Me,rt)|0,S=S+Math.imul(Me,ot)|0,S=S+Math.imul(Fe,rt)|0,F=F+Math.imul(Fe,ot)|0,P=P+Math.imul($e,xt)|0,S=S+Math.imul($e,ht)|0,S=S+Math.imul(Ie,xt)|0,F=F+Math.imul(Ie,ht)|0,P=P+Math.imul(be,dt)|0,S=S+Math.imul(be,it)|0,S=S+Math.imul(_e,dt)|0,F=F+Math.imul(_e,it)|0,P=P+Math.imul(te,pt)|0,S=S+Math.imul(te,at)|0,S=S+Math.imul(ve,pt)|0,F=F+Math.imul(ve,at)|0,P=P+Math.imul(de,mt)|0,S=S+Math.imul(de,nt)|0,S=S+Math.imul(re,mt)|0,F=F+Math.imul(re,nt)|0,P=P+Math.imul(ce,Ee)|0,S=S+Math.imul(ce,ke)|0,S=S+Math.imul(pe,Ee)|0,F=F+Math.imul(pe,ke)|0,P=P+Math.imul(ee,ne)|0,S=S+Math.imul(ee,xe)|0,S=S+Math.imul(fe,ne)|0,F=F+Math.imul(fe,xe)|0;var et=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(et>>>26)|0,et&=67108863,P=Math.imul(he,We),S=Math.imul(he,Ge),S=S+Math.imul(we,We)|0,F=Math.imul(we,Ge),P=P+Math.imul(Oe,rt)|0,S=S+Math.imul(Oe,ot)|0,S=S+Math.imul(ge,rt)|0,F=F+Math.imul(ge,ot)|0,P=P+Math.imul(Me,xt)|0,S=S+Math.imul(Me,ht)|0,S=S+Math.imul(Fe,xt)|0,F=F+Math.imul(Fe,ht)|0,P=P+Math.imul($e,dt)|0,S=S+Math.imul($e,it)|0,S=S+Math.imul(Ie,dt)|0,F=F+Math.imul(Ie,it)|0,P=P+Math.imul(be,pt)|0,S=S+Math.imul(be,at)|0,S=S+Math.imul(_e,pt)|0,F=F+Math.imul(_e,at)|0,P=P+Math.imul(te,mt)|0,S=S+Math.imul(te,nt)|0,S=S+Math.imul(ve,mt)|0,F=F+Math.imul(ve,nt)|0,P=P+Math.imul(de,Ee)|0,S=S+Math.imul(de,ke)|0,S=S+Math.imul(re,Ee)|0,F=F+Math.imul(re,ke)|0,P=P+Math.imul(ce,ne)|0,S=S+Math.imul(ce,xe)|0,S=S+Math.imul(pe,ne)|0,F=F+Math.imul(pe,xe)|0,P=P+Math.imul(ee,Ae)|0,S=S+Math.imul(ee,Ce)|0,S=S+Math.imul(fe,Ae)|0,F=F+Math.imul(fe,Ce)|0;var vt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(vt>>>26)|0,vt&=67108863,P=Math.imul(De,We),S=Math.imul(De,Ge),S=S+Math.imul(Le,We)|0,F=Math.imul(Le,Ge),P=P+Math.imul(he,rt)|0,S=S+Math.imul(he,ot)|0,S=S+Math.imul(we,rt)|0,F=F+Math.imul(we,ot)|0,P=P+Math.imul(Oe,xt)|0,S=S+Math.imul(Oe,ht)|0,S=S+Math.imul(ge,xt)|0,F=F+Math.imul(ge,ht)|0,P=P+Math.imul(Me,dt)|0,S=S+Math.imul(Me,it)|0,S=S+Math.imul(Fe,dt)|0,F=F+Math.imul(Fe,it)|0,P=P+Math.imul($e,pt)|0,S=S+Math.imul($e,at)|0,S=S+Math.imul(Ie,pt)|0,F=F+Math.imul(Ie,at)|0,P=P+Math.imul(be,mt)|0,S=S+Math.imul(be,nt)|0,S=S+Math.imul(_e,mt)|0,F=F+Math.imul(_e,nt)|0,P=P+Math.imul(te,Ee)|0,S=S+Math.imul(te,ke)|0,S=S+Math.imul(ve,Ee)|0,F=F+Math.imul(ve,ke)|0,P=P+Math.imul(de,ne)|0,S=S+Math.imul(de,xe)|0,S=S+Math.imul(re,ne)|0,F=F+Math.imul(re,xe)|0,P=P+Math.imul(ce,Ae)|0,S=S+Math.imul(ce,Ce)|0,S=S+Math.imul(pe,Ae)|0,F=F+Math.imul(pe,Ce)|0,P=P+Math.imul(ee,Ue)|0,S=S+Math.imul(ee,je)|0,S=S+Math.imul(fe,Ue)|0,F=F+Math.imul(fe,je)|0;var yt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(yt>>>26)|0,yt&=67108863,P=Math.imul(De,rt),S=Math.imul(De,ot),S=S+Math.imul(Le,rt)|0,F=Math.imul(Le,ot),P=P+Math.imul(he,xt)|0,S=S+Math.imul(he,ht)|0,S=S+Math.imul(we,xt)|0,F=F+Math.imul(we,ht)|0,P=P+Math.imul(Oe,dt)|0,S=S+Math.imul(Oe,it)|0,S=S+Math.imul(ge,dt)|0,F=F+Math.imul(ge,it)|0,P=P+Math.imul(Me,pt)|0,S=S+Math.imul(Me,at)|0,S=S+Math.imul(Fe,pt)|0,F=F+Math.imul(Fe,at)|0,P=P+Math.imul($e,mt)|0,S=S+Math.imul($e,nt)|0,S=S+Math.imul(Ie,mt)|0,F=F+Math.imul(Ie,nt)|0,P=P+Math.imul(be,Ee)|0,S=S+Math.imul(be,ke)|0,S=S+Math.imul(_e,Ee)|0,F=F+Math.imul(_e,ke)|0,P=P+Math.imul(te,ne)|0,S=S+Math.imul(te,xe)|0,S=S+Math.imul(ve,ne)|0,F=F+Math.imul(ve,xe)|0,P=P+Math.imul(de,Ae)|0,S=S+Math.imul(de,Ce)|0,S=S+Math.imul(re,Ae)|0,F=F+Math.imul(re,Ce)|0,P=P+Math.imul(ce,Ue)|0,S=S+Math.imul(ce,je)|0,S=S+Math.imul(pe,Ue)|0,F=F+Math.imul(pe,je)|0;var wt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(wt>>>26)|0,wt&=67108863,P=Math.imul(De,xt),S=Math.imul(De,ht),S=S+Math.imul(Le,xt)|0,F=Math.imul(Le,ht),P=P+Math.imul(he,dt)|0,S=S+Math.imul(he,it)|0,S=S+Math.imul(we,dt)|0,F=F+Math.imul(we,it)|0,P=P+Math.imul(Oe,pt)|0,S=S+Math.imul(Oe,at)|0,S=S+Math.imul(ge,pt)|0,F=F+Math.imul(ge,at)|0,P=P+Math.imul(Me,mt)|0,S=S+Math.imul(Me,nt)|0,S=S+Math.imul(Fe,mt)|0,F=F+Math.imul(Fe,nt)|0,P=P+Math.imul($e,Ee)|0,S=S+Math.imul($e,ke)|0,S=S+Math.imul(Ie,Ee)|0,F=F+Math.imul(Ie,ke)|0,P=P+Math.imul(be,ne)|0,S=S+Math.imul(be,xe)|0,S=S+Math.imul(_e,ne)|0,F=F+Math.imul(_e,xe)|0,P=P+Math.imul(te,Ae)|0,S=S+Math.imul(te,Ce)|0,S=S+Math.imul(ve,Ae)|0,F=F+Math.imul(ve,Ce)|0,P=P+Math.imul(de,Ue)|0,S=S+Math.imul(de,je)|0,S=S+Math.imul(re,Ue)|0,F=F+Math.imul(re,je)|0;var bt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(bt>>>26)|0,bt&=67108863,P=Math.imul(De,dt),S=Math.imul(De,it),S=S+Math.imul(Le,dt)|0,F=Math.imul(Le,it),P=P+Math.imul(he,pt)|0,S=S+Math.imul(he,at)|0,S=S+Math.imul(we,pt)|0,F=F+Math.imul(we,at)|0,P=P+Math.imul(Oe,mt)|0,S=S+Math.imul(Oe,nt)|0,S=S+Math.imul(ge,mt)|0,F=F+Math.imul(ge,nt)|0,P=P+Math.imul(Me,Ee)|0,S=S+Math.imul(Me,ke)|0,S=S+Math.imul(Fe,Ee)|0,F=F+Math.imul(Fe,ke)|0,P=P+Math.imul($e,ne)|0,S=S+Math.imul($e,xe)|0,S=S+Math.imul(Ie,ne)|0,F=F+Math.imul(Ie,xe)|0,P=P+Math.imul(be,Ae)|0,S=S+Math.imul(be,Ce)|0,S=S+Math.imul(_e,Ae)|0,F=F+Math.imul(_e,Ce)|0,P=P+Math.imul(te,Ue)|0,S=S+Math.imul(te,je)|0,S=S+Math.imul(ve,Ue)|0,F=F+Math.imul(ve,je)|0;var $t=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+($t>>>26)|0,$t&=67108863,P=Math.imul(De,pt),S=Math.imul(De,at),S=S+Math.imul(Le,pt)|0,F=Math.imul(Le,at),P=P+Math.imul(he,mt)|0,S=S+Math.imul(he,nt)|0,S=S+Math.imul(we,mt)|0,F=F+Math.imul(we,nt)|0,P=P+Math.imul(Oe,Ee)|0,S=S+Math.imul(Oe,ke)|0,S=S+Math.imul(ge,Ee)|0,F=F+Math.imul(ge,ke)|0,P=P+Math.imul(Me,ne)|0,S=S+Math.imul(Me,xe)|0,S=S+Math.imul(Fe,ne)|0,F=F+Math.imul(Fe,xe)|0,P=P+Math.imul($e,Ae)|0,S=S+Math.imul($e,Ce)|0,S=S+Math.imul(Ie,Ae)|0,F=F+Math.imul(Ie,Ce)|0,P=P+Math.imul(be,Ue)|0,S=S+Math.imul(be,je)|0,S=S+Math.imul(_e,Ue)|0,F=F+Math.imul(_e,je)|0;var At=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(At>>>26)|0,At&=67108863,P=Math.imul(De,mt),S=Math.imul(De,nt),S=S+Math.imul(Le,mt)|0,F=Math.imul(Le,nt),P=P+Math.imul(he,Ee)|0,S=S+Math.imul(he,ke)|0,S=S+Math.imul(we,Ee)|0,F=F+Math.imul(we,ke)|0,P=P+Math.imul(Oe,ne)|0,S=S+Math.imul(Oe,xe)|0,S=S+Math.imul(ge,ne)|0,F=F+Math.imul(ge,xe)|0,P=P+Math.imul(Me,Ae)|0,S=S+Math.imul(Me,Ce)|0,S=S+Math.imul(Fe,Ae)|0,F=F+Math.imul(Fe,Ce)|0,P=P+Math.imul($e,Ue)|0,S=S+Math.imul($e,je)|0,S=S+Math.imul(Ie,Ue)|0,F=F+Math.imul(Ie,je)|0;var Et=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Et>>>26)|0,Et&=67108863,P=Math.imul(De,Ee),S=Math.imul(De,ke),S=S+Math.imul(Le,Ee)|0,F=Math.imul(Le,ke),P=P+Math.imul(he,ne)|0,S=S+Math.imul(he,xe)|0,S=S+Math.imul(we,ne)|0,F=F+Math.imul(we,xe)|0,P=P+Math.imul(Oe,Ae)|0,S=S+Math.imul(Oe,Ce)|0,S=S+Math.imul(ge,Ae)|0,F=F+Math.imul(ge,Ce)|0,P=P+Math.imul(Me,Ue)|0,S=S+Math.imul(Me,je)|0,S=S+Math.imul(Fe,Ue)|0,F=F+Math.imul(Fe,je)|0;var Xe=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,P=Math.imul(De,ne),S=Math.imul(De,xe),S=S+Math.imul(Le,ne)|0,F=Math.imul(Le,xe),P=P+Math.imul(he,Ae)|0,S=S+Math.imul(he,Ce)|0,S=S+Math.imul(we,Ae)|0,F=F+Math.imul(we,Ce)|0,P=P+Math.imul(Oe,Ue)|0,S=S+Math.imul(Oe,je)|0,S=S+Math.imul(ge,Ue)|0,F=F+Math.imul(ge,je)|0;var Je=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Je>>>26)|0,Je&=67108863,P=Math.imul(De,Ae),S=Math.imul(De,Ce),S=S+Math.imul(Le,Ae)|0,F=Math.imul(Le,Ce),P=P+Math.imul(he,Ue)|0,S=S+Math.imul(he,je)|0,S=S+Math.imul(we,Ue)|0,F=F+Math.imul(we,je)|0;var lt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(lt>>>26)|0,lt&=67108863,P=Math.imul(De,Ue),S=Math.imul(De,je),S=S+Math.imul(Le,Ue)|0,F=Math.imul(Le,je);var ct=(H+P|0)+((S&8191)<<13)|0;return H=(F+(S>>>13)|0)+(ct>>>26)|0,ct&=67108863,X[0]=Ke,X[1]=He,X[2]=ze,X[3]=Ye,X[4]=Qe,X[5]=st,X[6]=Ze,X[7]=et,X[8]=vt,X[9]=yt,X[10]=wt,X[11]=bt,X[12]=$t,X[13]=At,X[14]=Et,X[15]=Xe,X[16]=Je,X[17]=lt,X[18]=ct,H!==0&&(X[19]=H,M.length++),M};Math.imul||(D=B);function q(I,x,T){T.negative=x.negative^I.negative,T.length=I.length+x.length;for(var M=0,O=0,z=0;z<T.length-1;z++){var X=O;O=0;for(var H=M&67108863,P=Math.min(z,x.length-1),S=Math.max(0,z-I.length+1);S<=P;S++){var F=z-S,ue=I.words[F]|0,ee=x.words[S]|0,fe=ue*ee,le=fe&67108863;X=X+(fe/67108864|0)|0,le=le+H|0,H=le&67108863,X=X+(le>>>26)|0,O+=X>>>26,X&=67108863}T.words[z]=H,M=X,X=O}return M!==0?T.words[z]=M:T.length--,T._strip()}function j(I,x,T){return q(I,x,T)}l.prototype.mulTo=function(x,T){var M,O=this.length+x.length;return this.length===10&&x.length===10?M=D(this,x,T):O<63?M=B(this,x,T):O<1024?M=q(this,x,T):M=j(this,x,T),M},l.prototype.mul=function(x){var T=new l(null);return T.words=new Array(this.length+x.length),this.mulTo(x,T)},l.prototype.mulf=function(x){var T=new l(null);return T.words=new Array(this.length+x.length),j(this,x,T)},l.prototype.imul=function(x){return this.clone().mulTo(x,this)},l.prototype.imuln=function(x){var T=x<0;T&&(x=-x),a(typeof x=="number"),a(x<67108864);for(var M=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*x,X=(z&67108863)+(M&67108863);M>>=26,M+=z/67108864|0,M+=X>>>26,this.words[O]=X&67108863}return M!==0&&(this.words[O]=M,this.length++),T?this.ineg():this},l.prototype.muln=function(x){return this.clone().imuln(x)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(x){var T=k(x);if(T.length===0)return new l(1);for(var M=this,O=0;O<T.length&&T[O]===0;O++,M=M.sqr());if(++O<T.length)for(var z=M.sqr();O<T.length;O++,z=z.sqr())T[O]!==0&&(M=M.mul(z));return M},l.prototype.iushln=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26,O=67108863>>>26-T<<26-T,z;if(T!==0){var X=0;for(z=0;z<this.length;z++){var H=this.words[z]&O,P=(this.words[z]|0)-H<<T;this.words[z]=P|X,X=H>>>26-T}X&&(this.words[z]=X,this.length++)}if(M!==0){for(z=this.length-1;z>=0;z--)this.words[z+M]=this.words[z];for(z=0;z<M;z++)this.words[z]=0;this.length+=M}return this._strip()},l.prototype.ishln=function(x){return a(this.negative===0),this.iushln(x)},l.prototype.iushrn=function(x,T,M){a(typeof x=="number"&&x>=0);var O;T?O=(T-T%26)/26:O=0;var z=x%26,X=Math.min((x-z)/26,this.length),H=67108863^67108863>>>z<<z,P=M;if(O-=X,O=Math.max(0,O),P){for(var S=0;S<X;S++)P.words[S]=this.words[S];P.length=X}if(X!==0)if(this.length>X)for(this.length-=X,S=0;S<this.length;S++)this.words[S]=this.words[S+X];else this.words[0]=0,this.length=1;var F=0;for(S=this.length-1;S>=0&&(F!==0||S>=O);S--){var ue=this.words[S]|0;this.words[S]=F<<26-z|ue>>>z,F=ue&H}return P&&F!==0&&(P.words[P.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},l.prototype.ishrn=function(x,T,M){return a(this.negative===0),this.iushrn(x,T,M)},l.prototype.shln=function(x){return this.clone().ishln(x)},l.prototype.ushln=function(x){return this.clone().iushln(x)},l.prototype.shrn=function(x){return this.clone().ishrn(x)},l.prototype.ushrn=function(x){return this.clone().iushrn(x)},l.prototype.testn=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26,O=1<<T;if(this.length<=M)return!1;var z=this.words[M];return!!(z&O)},l.prototype.imaskn=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(T!==0&&M++,this.length=Math.min(M,this.length),T!==0){var O=67108863^67108863>>>T<<T;this.words[this.length-1]&=O}return this._strip()},l.prototype.maskn=function(x){return this.clone().imaskn(x)},l.prototype.iaddn=function(x){return a(typeof x=="number"),a(x<67108864),x<0?this.isubn(-x):this.negative!==0?this.length===1&&(this.words[0]|0)<=x?(this.words[0]=x-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(x),this.negative=1,this):this._iaddn(x)},l.prototype._iaddn=function(x){this.words[0]+=x;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},l.prototype.isubn=function(x){if(a(typeof x=="number"),a(x<67108864),x<0)return this.iaddn(-x);if(this.negative!==0)return this.negative=0,this.iaddn(x),this.negative=1,this;if(this.words[0]-=x,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this._strip()},l.prototype.addn=function(x){return this.clone().iaddn(x)},l.prototype.subn=function(x){return this.clone().isubn(x)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(x,T,M){var O=x.length+M,z;this._expand(O);var X,H=0;for(z=0;z<x.length;z++){X=(this.words[z+M]|0)+H;var P=(x.words[z]|0)*T;X-=P&67108863,H=(X>>26)-(P/67108864|0),this.words[z+M]=X&67108863}for(;z<this.length-M;z++)X=(this.words[z+M]|0)+H,H=X>>26,this.words[z+M]=X&67108863;if(H===0)return this._strip();for(a(H===-1),H=0,z=0;z<this.length;z++)X=-(this.words[z]|0)+H,H=X>>26,this.words[z]=X&67108863;return this.negative=1,this._strip()},l.prototype._wordDiv=function(x,T){var M=this.length-x.length,O=this.clone(),z=x,X=z.words[z.length-1]|0,H=this._countBits(X);M=26-H,M!==0&&(z=z.ushln(M),O.iushln(M),X=z.words[z.length-1]|0);var P=O.length-z.length,S;if(T!=="mod"){S=new l(null),S.length=P+1,S.words=new Array(S.length);for(var F=0;F<S.length;F++)S.words[F]=0}var ue=O.clone()._ishlnsubmul(z,1,P);ue.negative===0&&(O=ue,S&&(S.words[P]=1));for(var ee=P-1;ee>=0;ee--){var fe=(O.words[z.length+ee]|0)*67108864+(O.words[z.length+ee-1]|0);for(fe=Math.min(fe/X|0,67108863),O._ishlnsubmul(z,fe,ee);O.negative!==0;)fe--,O.negative=0,O._ishlnsubmul(z,1,ee),O.isZero()||(O.negative^=1);S&&(S.words[ee]=fe)}return S&&S._strip(),O._strip(),T!=="div"&&M!==0&&O.iushrn(M),{div:S||null,mod:O}},l.prototype.divmod=function(x,T,M){if(a(!x.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var O,z,X;return this.negative!==0&&x.negative===0?(X=this.neg().divmod(x,T),T!=="mod"&&(O=X.div.neg()),T!=="div"&&(z=X.mod.neg(),M&&z.negative!==0&&z.iadd(x)),{div:O,mod:z}):this.negative===0&&x.negative!==0?(X=this.divmod(x.neg(),T),T!=="mod"&&(O=X.div.neg()),{div:O,mod:X.mod}):this.negative&x.negative?(X=this.neg().divmod(x.neg(),T),T!=="div"&&(z=X.mod.neg(),M&&z.negative!==0&&z.isub(x)),{div:X.div,mod:z}):x.length>this.length||this.cmp(x)<0?{div:new l(0),mod:this}:x.length===1?T==="div"?{div:this.divn(x.words[0]),mod:null}:T==="mod"?{div:null,mod:new l(this.modrn(x.words[0]))}:{div:this.divn(x.words[0]),mod:new l(this.modrn(x.words[0]))}:this._wordDiv(x,T)},l.prototype.div=function(x){return this.divmod(x,"div",!1).div},l.prototype.mod=function(x){return this.divmod(x,"mod",!1).mod},l.prototype.umod=function(x){return this.divmod(x,"mod",!0).mod},l.prototype.divRound=function(x){var T=this.divmod(x);if(T.mod.isZero())return T.div;var M=T.div.negative!==0?T.mod.isub(x):T.mod,O=x.ushrn(1),z=x.andln(1),X=M.cmp(O);return X<0||z===1&&X===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},l.prototype.modrn=function(x){var T=x<0;T&&(x=-x),a(x<=67108863);for(var M=(1<<26)%x,O=0,z=this.length-1;z>=0;z--)O=(M*O+(this.words[z]|0))%x;return T?-O:O},l.prototype.modn=function(x){return this.modrn(x)},l.prototype.idivn=function(x){var T=x<0;T&&(x=-x),a(x<=67108863);for(var M=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+M*67108864;this.words[O]=z/x|0,M=z%x}return this._strip(),T?this.ineg():this},l.prototype.divn=function(x){return this.clone().idivn(x)},l.prototype.egcd=function(x){a(x.negative===0),a(!x.isZero());var T=this,M=x.clone();T.negative!==0?T=T.umod(x):T=T.clone();for(var O=new l(1),z=new l(0),X=new l(0),H=new l(1),P=0;T.isEven()&&M.isEven();)T.iushrn(1),M.iushrn(1),++P;for(var S=M.clone(),F=T.clone();!T.isZero();){for(var ue=0,ee=1;!(T.words[0]&ee)&&ue<26;++ue,ee<<=1);if(ue>0)for(T.iushrn(ue);ue-- >0;)(O.isOdd()||z.isOdd())&&(O.iadd(S),z.isub(F)),O.iushrn(1),z.iushrn(1);for(var fe=0,le=1;!(M.words[0]&le)&&fe<26;++fe,le<<=1);if(fe>0)for(M.iushrn(fe);fe-- >0;)(X.isOdd()||H.isOdd())&&(X.iadd(S),H.isub(F)),X.iushrn(1),H.iushrn(1);T.cmp(M)>=0?(T.isub(M),O.isub(X),z.isub(H)):(M.isub(T),X.isub(O),H.isub(z))}return{a:X,b:H,gcd:M.iushln(P)}},l.prototype._invmp=function(x){a(x.negative===0),a(!x.isZero());var T=this,M=x.clone();T.negative!==0?T=T.umod(x):T=T.clone();for(var O=new l(1),z=new l(0),X=M.clone();T.cmpn(1)>0&&M.cmpn(1)>0;){for(var H=0,P=1;!(T.words[0]&P)&&H<26;++H,P<<=1);if(H>0)for(T.iushrn(H);H-- >0;)O.isOdd()&&O.iadd(X),O.iushrn(1);for(var S=0,F=1;!(M.words[0]&F)&&S<26;++S,F<<=1);if(S>0)for(M.iushrn(S);S-- >0;)z.isOdd()&&z.iadd(X),z.iushrn(1);T.cmp(M)>=0?(T.isub(M),O.isub(z)):(M.isub(T),z.isub(O))}var ue;return T.cmpn(1)===0?ue=O:ue=z,ue.cmpn(0)<0&&ue.iadd(x),ue},l.prototype.gcd=function(x){if(this.isZero())return x.abs();if(x.isZero())return this.abs();var T=this.clone(),M=x.clone();T.negative=0,M.negative=0;for(var O=0;T.isEven()&&M.isEven();O++)T.iushrn(1),M.iushrn(1);do{for(;T.isEven();)T.iushrn(1);for(;M.isEven();)M.iushrn(1);var z=T.cmp(M);if(z<0){var X=T;T=M,M=X}else if(z===0||M.cmpn(1)===0)break;T.isub(M)}while(!0);return M.iushln(O)},l.prototype.invm=function(x){return this.egcd(x).a.umod(x)},l.prototype.isEven=function(){return(this.words[0]&1)===0},l.prototype.isOdd=function(){return(this.words[0]&1)===1},l.prototype.andln=function(x){return this.words[0]&x},l.prototype.bincn=function(x){a(typeof x=="number");var T=x%26,M=(x-T)/26,O=1<<T;if(this.length<=M)return this._expand(M+1),this.words[M]|=O,this;for(var z=O,X=M;z!==0&&X<this.length;X++){var H=this.words[X]|0;H+=z,z=H>>>26,H&=67108863,this.words[X]=H}return z!==0&&(this.words[X]=z,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(x){var T=x<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this._strip();var M;if(this.length>1)M=1;else{T&&(x=-x),a(x<=67108863,"Number is too big");var O=this.words[0]|0;M=O===x?0:O<x?-1:1}return this.negative!==0?-M|0:M},l.prototype.cmp=function(x){if(this.negative!==0&&x.negative===0)return-1;if(this.negative===0&&x.negative!==0)return 1;var T=this.ucmp(x);return this.negative!==0?-T|0:T},l.prototype.ucmp=function(x){if(this.length>x.length)return 1;if(this.length<x.length)return-1;for(var T=0,M=this.length-1;M>=0;M--){var O=this.words[M]|0,z=x.words[M]|0;if(O!==z){O<z?T=-1:O>z&&(T=1);break}}return T},l.prototype.gtn=function(x){return this.cmpn(x)===1},l.prototype.gt=function(x){return this.cmp(x)===1},l.prototype.gten=function(x){return this.cmpn(x)>=0},l.prototype.gte=function(x){return this.cmp(x)>=0},l.prototype.ltn=function(x){return this.cmpn(x)===-1},l.prototype.lt=function(x){return this.cmp(x)===-1},l.prototype.lten=function(x){return this.cmpn(x)<=0},l.prototype.lte=function(x){return this.cmp(x)<=0},l.prototype.eqn=function(x){return this.cmpn(x)===0},l.prototype.eq=function(x){return this.cmp(x)===0},l.red=function(x){return new ae(x)},l.prototype.toRed=function(x){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),x.convertTo(this)._forceRed(x)},l.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(x){return this.red=x,this},l.prototype.forceRed=function(x){return a(!this.red,"Already a number in reduction context"),this._forceRed(x)},l.prototype.redAdd=function(x){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,x)},l.prototype.redIAdd=function(x){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,x)},l.prototype.redSub=function(x){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,x)},l.prototype.redISub=function(x){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,x)},l.prototype.redShl=function(x){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,x)},l.prototype.redMul=function(x){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.mul(this,x)},l.prototype.redIMul=function(x){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.imul(this,x)},l.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(x){return a(this.red&&!x.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,x)};var J={k256:null,p224:null,p192:null,p25519:null};function Y(I,x){this.name=I,this.p=new l(x,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var x=new l(null);return x.words=new Array(Math.ceil(this.n/13)),x},Y.prototype.ireduce=function(x){var T=x,M;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),M=T.bitLength();while(M>this.n);var O=M<this.n?-1:T.ucmp(this.p);return O===0?(T.words[0]=0,T.length=1):O>0?T.isub(this.p):T.strip!==void 0?T.strip():T._strip(),T},Y.prototype.split=function(x,T){x.iushrn(this.n,0,T)},Y.prototype.imulK=function(x){return x.imul(this.k)};function L(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(L,Y),L.prototype.split=function(x,T){for(var M=4194303,O=Math.min(x.length,9),z=0;z<O;z++)T.words[z]=x.words[z];if(T.length=O,x.length<=9){x.words[0]=0,x.length=1;return}var X=x.words[9];for(T.words[T.length++]=X&M,z=10;z<x.length;z++){var H=x.words[z]|0;x.words[z-10]=(H&M)<<4|X>>>22,X=H}X>>>=22,x.words[z-10]=X,X===0&&x.length>10?x.length-=10:x.length-=9},L.prototype.imulK=function(x){x.words[x.length]=0,x.words[x.length+1]=0,x.length+=2;for(var T=0,M=0;M<x.length;M++){var O=x.words[M]|0;T+=O*977,x.words[M]=T&67108863,T=O*64+(T/67108864|0)}return x.words[x.length-1]===0&&(x.length--,x.words[x.length-1]===0&&x.length--),x};function Z(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(Z,Y);function Q(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Q,Y);function oe(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(oe,Y),oe.prototype.imulK=function(x){for(var T=0,M=0;M<x.length;M++){var O=(x.words[M]|0)*19+T,z=O&67108863;O>>>=26,x.words[M]=z,T=O}return T!==0&&(x.words[x.length++]=T),x},l._prime=function(x){if(J[x])return J[x];var T;if(x==="k256")T=new L;else if(x==="p224")T=new Z;else if(x==="p192")T=new Q;else if(x==="p25519")T=new oe;else throw new Error("Unknown prime "+x);return J[x]=T,T};function ae(I){if(typeof I=="string"){var x=l._prime(I);this.m=x.p,this.prime=x}else a(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}ae.prototype._verify1=function(x){a(x.negative===0,"red works only with positives"),a(x.red,"red works only with red numbers")},ae.prototype._verify2=function(x,T){a((x.negative|T.negative)===0,"red works only with positives"),a(x.red&&x.red===T.red,"red works only with red numbers")},ae.prototype.imod=function(x){return this.prime?this.prime.ireduce(x)._forceRed(this):(b(x,x.umod(this.m)._forceRed(this)),x)},ae.prototype.neg=function(x){return x.isZero()?x.clone():this.m.sub(x)._forceRed(this)},ae.prototype.add=function(x,T){this._verify2(x,T);var M=x.add(T);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},ae.prototype.iadd=function(x,T){this._verify2(x,T);var M=x.iadd(T);return M.cmp(this.m)>=0&&M.isub(this.m),M},ae.prototype.sub=function(x,T){this._verify2(x,T);var M=x.sub(T);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},ae.prototype.isub=function(x,T){this._verify2(x,T);var M=x.isub(T);return M.cmpn(0)<0&&M.iadd(this.m),M},ae.prototype.shl=function(x,T){return this._verify1(x),this.imod(x.ushln(T))},ae.prototype.imul=function(x,T){return this._verify2(x,T),this.imod(x.imul(T))},ae.prototype.mul=function(x,T){return this._verify2(x,T),this.imod(x.mul(T))},ae.prototype.isqr=function(x){return this.imul(x,x.clone())},ae.prototype.sqr=function(x){return this.mul(x,x)},ae.prototype.sqrt=function(x){if(x.isZero())return x.clone();var T=this.m.andln(3);if(a(T%2===1),T===3){var M=this.m.add(new l(1)).iushrn(2);return this.pow(x,M)}for(var O=this.m.subn(1),z=0;!O.isZero()&&O.andln(1)===0;)z++,O.iushrn(1);a(!O.isZero());var X=new l(1).toRed(this),H=X.redNeg(),P=this.m.subn(1).iushrn(1),S=this.m.bitLength();for(S=new l(2*S*S).toRed(this);this.pow(S,P).cmp(H)!==0;)S.redIAdd(H);for(var F=this.pow(S,O),ue=this.pow(x,O.addn(1).iushrn(1)),ee=this.pow(x,O),fe=z;ee.cmp(X)!==0;){for(var le=ee,ce=0;le.cmp(X)!==0;ce++)le=le.redSqr();a(ce<fe);var pe=this.pow(F,new l(1).iushln(fe-ce-1));ue=ue.redMul(pe),F=pe.redSqr(),ee=ee.redMul(F),fe=ce}return ue},ae.prototype.invm=function(x){var T=x._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},ae.prototype.pow=function(x,T){if(T.isZero())return new l(1).toRed(this);if(T.cmpn(1)===0)return x.clone();var M=4,O=new Array(1<<M);O[0]=new l(1).toRed(this),O[1]=x;for(var z=2;z<O.length;z++)O[z]=this.mul(O[z-1],x);var X=O[0],H=0,P=0,S=T.bitLength()%26;for(S===0&&(S=26),z=T.length-1;z>=0;z--){for(var F=T.words[z],ue=S-1;ue>=0;ue--){var ee=F>>ue&1;if(X!==O[0]&&(X=this.sqr(X)),ee===0&&H===0){P=0;continue}H<<=1,H|=ee,P++,!(P!==M&&(z!==0||ue!==0))&&(X=this.mul(X,O[H]),P=0,H=0)}S=26}return X},ae.prototype.convertTo=function(x){var T=x.umod(this.m);return T===x?T.clone():T},ae.prototype.convertFrom=function(x){var T=x.clone();return T.red=null,T},l.mont=function(x){return new U(x)};function U(I){ae.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(U,ae),U.prototype.convertTo=function(x){return this.imod(x.ushln(this.shift))},U.prototype.convertFrom=function(x){var T=this.imod(x.mul(this.rinv));return T.red=null,T},U.prototype.imul=function(x,T){if(x.isZero()||T.isZero())return x.words[0]=0,x.length=1,x;var M=x.imul(T),O=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=M.isub(O).iushrn(this.shift),X=z;return z.cmp(this.m)>=0?X=z.isub(this.m):z.cmpn(0)<0&&(X=z.iadd(this.m)),X._forceRed(this)},U.prototype.mul=function(x,T){if(x.isZero()||T.isZero())return new l(0)._forceRed(this);var M=x.mul(T),O=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=M.isub(O).iushrn(this.shift),X=z;return z.cmp(this.m)>=0?X=z.isub(this.m):z.cmpn(0)<0&&(X=z.iadd(this.m)),X._forceRed(this)},U.prototype.invm=function(x){var T=this.imod(x._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(t,commonjsGlobal)})(bn$2);var asn1$6={},asn1$5={},api$2={},encoders={},buffer$2=buffer$3,Buffer$e=buffer$2.Buffer,safer={},key$1;for(key$1 in buffer$2)buffer$2.hasOwnProperty(key$1)&&(key$1==="SlowBuffer"||key$1==="Buffer"||(safer[key$1]=buffer$2[key$1]));var Safer=safer.Buffer={};for(key$1 in Buffer$e)Buffer$e.hasOwnProperty(key$1)&&(key$1==="allocUnsafe"||key$1==="allocUnsafeSlow"||(Safer[key$1]=Buffer$e[key$1]));safer.Buffer.prototype=Buffer$e.prototype;(!Safer.from||Safer.from===Uint8Array.from)&&(Safer.from=function(t,e,n){if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type '+typeof t);if(t&&typeof t.length>"u")throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);return Buffer$e(t,e,n)});Safer.alloc||(Safer.alloc=function(t,e,n){if(typeof t!="number")throw new TypeError('The "size" argument must be of type number. Received type '+typeof t);if(t<0||t>=2*(1<<30))throw new RangeError('The value "'+t+'" is invalid for option "size"');var a=Buffer$e(t);return!e||e.length===0?a.fill(0):typeof n=="string"?a.fill(e,n):a.fill(e),a});if(!safer.kStringMaxLength)try{safer.kStringMaxLength=browser$1$1.binding("buffer").kStringMaxLength}catch{}safer.constants||(safer.constants={MAX_LENGTH:safer.kMaxLength},safer.kStringMaxLength&&(safer.constants.MAX_STRING_LENGTH=safer.kStringMaxLength));var safer_1=safer,reporter={};const inherits$7=inherits_browserExports;function Reporter$2(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}reporter.Reporter=Reporter$2;Reporter$2.prototype.isError=function(e){return e instanceof ReporterError};Reporter$2.prototype.save=function(){const e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}};Reporter$2.prototype.restore=function(e){const n=this._reporterState;n.obj=e.obj,n.path=n.path.slice(0,e.pathLen)};Reporter$2.prototype.enterKey=function(e){return this._reporterState.path.push(e)};Reporter$2.prototype.exitKey=function(e){const n=this._reporterState;n.path=n.path.slice(0,e-1)};Reporter$2.prototype.leaveKey=function(e,n,a){const o=this._reporterState;this.exitKey(e),o.obj!==null&&(o.obj[n]=a)};Reporter$2.prototype.path=function(){return this._reporterState.path.join("/")};Reporter$2.prototype.enterObject=function(){const e=this._reporterState,n=e.obj;return e.obj={},n};Reporter$2.prototype.leaveObject=function(e){const n=this._reporterState,a=n.obj;return n.obj=e,a};Reporter$2.prototype.error=function(e){let n;const a=this._reporterState,o=e instanceof ReporterError;if(o?n=e:n=new ReporterError(a.path.map(function(l){return"["+JSON.stringify(l)+"]"}).join(""),e.message||e,e.stack),!a.options.partial)throw n;return o||a.errors.push(n),n};Reporter$2.prototype.wrapResult=function(e){const n=this._reporterState;return n.options.partial?{result:this.isError(e)?null:e,errors:n.errors}:e};function ReporterError(t,e){this.path=t,this.rethrow(e)}inherits$7(ReporterError,Error);ReporterError.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,ReporterError),!this.stack)try{throw new Error(this.message)}catch(n){this.stack=n.stack}return this};var buffer$1={};const inherits$6=inherits_browserExports,Reporter$1=reporter.Reporter,Buffer$d=safer_1.Buffer;function DecoderBuffer$2(t,e){if(Reporter$1.call(this,e),!Buffer$d.isBuffer(t)){this.error("Input not Buffer");return}this.base=t,this.offset=0,this.length=t.length}inherits$6(DecoderBuffer$2,Reporter$1);buffer$1.DecoderBuffer=DecoderBuffer$2;DecoderBuffer$2.isDecoderBuffer=function(e){return e instanceof DecoderBuffer$2?!0:typeof e=="object"&&Buffer$d.isBuffer(e.base)&&e.constructor.name==="DecoderBuffer"&&typeof e.offset=="number"&&typeof e.length=="number"&&typeof e.save=="function"&&typeof e.restore=="function"&&typeof e.isEmpty=="function"&&typeof e.readUInt8=="function"&&typeof e.skip=="function"&&typeof e.raw=="function"};DecoderBuffer$2.prototype.save=function(){return{offset:this.offset,reporter:Reporter$1.prototype.save.call(this)}};DecoderBuffer$2.prototype.restore=function(e){const n=new DecoderBuffer$2(this.base);return n.offset=e.offset,n.length=this.offset,this.offset=e.offset,Reporter$1.prototype.restore.call(this,e.reporter),n};DecoderBuffer$2.prototype.isEmpty=function(){return this.offset===this.length};DecoderBuffer$2.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")};DecoderBuffer$2.prototype.skip=function(e,n){if(!(this.offset+e<=this.length))return this.error(n||"DecoderBuffer overrun");const a=new DecoderBuffer$2(this.base);return a._reporterState=this._reporterState,a.offset=this.offset,a.length=this.offset+e,this.offset+=e,a};DecoderBuffer$2.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)};function EncoderBuffer$1(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(n){return EncoderBuffer$1.isEncoderBuffer(n)||(n=new EncoderBuffer$1(n,e)),this.length+=n.length,n},this);else if(typeof t=="number"){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if(typeof t=="string")this.value=t,this.length=Buffer$d.byteLength(t);else if(Buffer$d.isBuffer(t))this.value=t,this.length=t.length;else return e.error("Unsupported type: "+typeof t)}buffer$1.EncoderBuffer=EncoderBuffer$1;EncoderBuffer$1.isEncoderBuffer=function(e){return e instanceof EncoderBuffer$1?!0:typeof e=="object"&&e.constructor.name==="EncoderBuffer"&&typeof e.length=="number"&&typeof e.join=="function"};EncoderBuffer$1.prototype.join=function(e,n){return e||(e=Buffer$d.alloc(this.length)),n||(n=0),this.length===0||(Array.isArray(this.value)?this.value.forEach(function(a){a.join(e,n),n+=a.length}):(typeof this.value=="number"?e[n]=this.value:typeof this.value=="string"?e.write(this.value,n):Buffer$d.isBuffer(this.value)&&this.value.copy(e,n),n+=this.length)),e};const Reporter=reporter.Reporter,EncoderBuffer=buffer$1.EncoderBuffer,DecoderBuffer$1=buffer$1.DecoderBuffer,assert$7=minimalisticAssert$1,tags=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],methods$1=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(tags),overrided=["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"];function Node$2(t,e,n){const a={};this._baseState=a,a.name=n,a.enc=t,a.parent=e||null,a.children=null,a.tag=null,a.args=null,a.reverseArgs=null,a.choice=null,a.optional=!1,a.any=!1,a.obj=!1,a.use=null,a.useDecoder=null,a.key=null,a.default=null,a.explicit=null,a.implicit=null,a.contains=null,a.parent||(a.children=[],this._wrap())}var node$1=Node$2;const stateProps=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];Node$2.prototype.clone=function(){const e=this._baseState,n={};stateProps.forEach(function(o){n[o]=e[o]});const a=new this.constructor(n.parent);return a._baseState=n,a};Node$2.prototype._wrap=function(){const e=this._baseState;methods$1.forEach(function(n){this[n]=function(){const o=new this.constructor(this);return e.children.push(o),o[n].apply(o,arguments)}},this)};Node$2.prototype._init=function(e){const n=this._baseState;assert$7(n.parent===null),e.call(this),n.children=n.children.filter(function(a){return a._baseState.parent===this},this),assert$7.equal(n.children.length,1,"Root node can have only one child")};Node$2.prototype._useArgs=function(e){const n=this._baseState,a=e.filter(function(o){return o instanceof this.constructor},this);e=e.filter(function(o){return!(o instanceof this.constructor)},this),a.length!==0&&(assert$7(n.children===null),n.children=a,a.forEach(function(o){o._baseState.parent=this},this)),e.length!==0&&(assert$7(n.args===null),n.args=e,n.reverseArgs=e.map(function(o){if(typeof o!="object"||o.constructor!==Object)return o;const l={};return Object.keys(o).forEach(function(u){u==(u|0)&&(u|=0);const d=o[u];l[d]=u}),l}))};overrided.forEach(function(t){Node$2.prototype[t]=function(){const n=this._baseState;throw new Error(t+" not implemented for encoding: "+n.enc)}});tags.forEach(function(t){Node$2.prototype[t]=function(){const n=this._baseState,a=Array.prototype.slice.call(arguments);return assert$7(n.tag===null),n.tag=t,this._useArgs(a),this}});Node$2.prototype.use=function(e){assert$7(e);const n=this._baseState;return assert$7(n.use===null),n.use=e,this};Node$2.prototype.optional=function(){const e=this._baseState;return e.optional=!0,this};Node$2.prototype.def=function(e){const n=this._baseState;return assert$7(n.default===null),n.default=e,n.optional=!0,this};Node$2.prototype.explicit=function(e){const n=this._baseState;return assert$7(n.explicit===null&&n.implicit===null),n.explicit=e,this};Node$2.prototype.implicit=function(e){const n=this._baseState;return assert$7(n.explicit===null&&n.implicit===null),n.implicit=e,this};Node$2.prototype.obj=function(){const e=this._baseState,n=Array.prototype.slice.call(arguments);return e.obj=!0,n.length!==0&&this._useArgs(n),this};Node$2.prototype.key=function(e){const n=this._baseState;return assert$7(n.key===null),n.key=e,this};Node$2.prototype.any=function(){const e=this._baseState;return e.any=!0,this};Node$2.prototype.choice=function(e){const n=this._baseState;return assert$7(n.choice===null),n.choice=e,this._useArgs(Object.keys(e).map(function(a){return e[a]})),this};Node$2.prototype.contains=function(e){const n=this._baseState;return assert$7(n.use===null),n.contains=e,this};Node$2.prototype._decode=function(e,n){const a=this._baseState;if(a.parent===null)return e.wrapResult(a.children[0]._decode(e,n));let o=a.default,l=!0,u=null;if(a.key!==null&&(u=e.enterKey(a.key)),a.optional){let m=null;if(a.explicit!==null?m=a.explicit:a.implicit!==null?m=a.implicit:a.tag!==null&&(m=a.tag),m===null&&!a.any){const y=e.save();try{a.choice===null?this._decodeGeneric(a.tag,e,n):this._decodeChoice(e,n),l=!0}catch{l=!1}e.restore(y)}else if(l=this._peekTag(e,m,a.any),e.isError(l))return l}let d;if(a.obj&&l&&(d=e.enterObject()),l){if(a.explicit!==null){const y=this._decodeTag(e,a.explicit);if(e.isError(y))return y;e=y}const m=e.offset;if(a.use===null&&a.choice===null){let y;a.any&&(y=e.save());const b=this._decodeTag(e,a.implicit!==null?a.implicit:a.tag,a.any);if(e.isError(b))return b;a.any?o=e.raw(y):e=b}if(n&&n.track&&a.tag!==null&&n.track(e.path(),m,e.length,"tagged"),n&&n.track&&a.tag!==null&&n.track(e.path(),e.offset,e.length,"content"),a.any||(a.choice===null?o=this._decodeGeneric(a.tag,e,n):o=this._decodeChoice(e,n)),e.isError(o))return o;if(!a.any&&a.choice===null&&a.children!==null&&a.children.forEach(function(b){b._decode(e,n)}),a.contains&&(a.tag==="octstr"||a.tag==="bitstr")){const y=new DecoderBuffer$1(o);o=this._getUse(a.contains,e._reporterState.obj)._decode(y,n)}}return a.obj&&l&&(o=e.leaveObject(d)),a.key!==null&&(o!==null||l===!0)?e.leaveKey(u,a.key,o):u!==null&&e.exitKey(u),o};Node$2.prototype._decodeGeneric=function(e,n,a){const o=this._baseState;return e==="seq"||e==="set"?null:e==="seqof"||e==="setof"?this._decodeList(n,e,o.args[0],a):/str$/.test(e)?this._decodeStr(n,e,a):e==="objid"&&o.args?this._decodeObjid(n,o.args[0],o.args[1],a):e==="objid"?this._decodeObjid(n,null,null,a):e==="gentime"||e==="utctime"?this._decodeTime(n,e,a):e==="null_"?this._decodeNull(n,a):e==="bool"?this._decodeBool(n,a):e==="objDesc"?this._decodeStr(n,e,a):e==="int"||e==="enum"?this._decodeInt(n,o.args&&o.args[0],a):o.use!==null?this._getUse(o.use,n._reporterState.obj)._decode(n,a):n.error("unknown tag: "+e)};Node$2.prototype._getUse=function(e,n){const a=this._baseState;return a.useDecoder=this._use(e,n),assert$7(a.useDecoder._baseState.parent===null),a.useDecoder=a.useDecoder._baseState.children[0],a.implicit!==a.useDecoder._baseState.implicit&&(a.useDecoder=a.useDecoder.clone(),a.useDecoder._baseState.implicit=a.implicit),a.useDecoder};Node$2.prototype._decodeChoice=function(e,n){const a=this._baseState;let o=null,l=!1;return Object.keys(a.choice).some(function(u){const d=e.save(),m=a.choice[u];try{const y=m._decode(e,n);if(e.isError(y))return!1;o={type:u,value:y},l=!0}catch{return e.restore(d),!1}return!0},this),l?o:e.error("Choice not matched")};Node$2.prototype._createEncoderBuffer=function(e){return new EncoderBuffer(e,this.reporter)};Node$2.prototype._encode=function(e,n,a){const o=this._baseState;if(o.default!==null&&o.default===e)return;const l=this._encodeValue(e,n,a);if(l!==void 0&&!this._skipDefault(l,n,a))return l};Node$2.prototype._encodeValue=function(e,n,a){const o=this._baseState;if(o.parent===null)return o.children[0]._encode(e,n||new Reporter);let l=null;if(this.reporter=n,o.optional&&e===void 0)if(o.default!==null)e=o.default;else return;let u=null,d=!1;if(o.any)l=this._createEncoderBuffer(e);else if(o.choice)l=this._encodeChoice(e,n);else if(o.contains)u=this._getUse(o.contains,a)._encode(e,n),d=!0;else if(o.children)u=o.children.map(function(m){if(m._baseState.tag==="null_")return m._encode(null,n,e);if(m._baseState.key===null)return n.error("Child should have a key");const y=n.enterKey(m._baseState.key);if(typeof e!="object")return n.error("Child expected, but input is not object");const b=m._encode(e[m._baseState.key],n,e);return n.leaveKey(y),b},this).filter(function(m){return m}),u=this._createEncoderBuffer(u);else if(o.tag==="seqof"||o.tag==="setof"){if(!(o.args&&o.args.length===1))return n.error("Too many args for : "+o.tag);if(!Array.isArray(e))return n.error("seqof/setof, but data is not Array");const m=this.clone();m._baseState.implicit=null,u=this._createEncoderBuffer(e.map(function(y){const b=this._baseState;return this._getUse(b.args[0],e)._encode(y,n)},m))}else o.use!==null?l=this._getUse(o.use,a)._encode(e,n):(u=this._encodePrimitive(o.tag,e),d=!0);if(!o.any&&o.choice===null){const m=o.implicit!==null?o.implicit:o.tag,y=o.implicit===null?"universal":"context";m===null?o.use===null&&n.error("Tag could be omitted only for .use()"):o.use===null&&(l=this._encodeComposite(m,d,y,u))}return o.explicit!==null&&(l=this._encodeComposite(o.explicit,!1,"context",l)),l};Node$2.prototype._encodeChoice=function(e,n){const a=this._baseState,o=a.choice[e.type];return o||assert$7(!1,e.type+" not found in "+JSON.stringify(Object.keys(a.choice))),o._encode(e.value,n)};Node$2.prototype._encodePrimitive=function(e,n){const a=this._baseState;if(/str$/.test(e))return this._encodeStr(n,e);if(e==="objid"&&a.args)return this._encodeObjid(n,a.reverseArgs[0],a.args[1]);if(e==="objid")return this._encodeObjid(n,null,null);if(e==="gentime"||e==="utctime")return this._encodeTime(n,e);if(e==="null_")return this._encodeNull();if(e==="int"||e==="enum")return this._encodeInt(n,a.args&&a.reverseArgs[0]);if(e==="bool")return this._encodeBool(n);if(e==="objDesc")return this._encodeStr(n,e);throw new Error("Unsupported tag: "+e)};Node$2.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)};Node$2.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '()+,-./:=?]*$/.test(e)};var der$2={};(function(t){function e(n){const a={};return Object.keys(n).forEach(function(o){(o|0)==o&&(o=o|0);const l=n[o];a[l]=o}),a}t.tagClass={0:"universal",1:"application",2:"context",3:"private"},t.tagClassByName=e(t.tagClass),t.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},t.tagByName=e(t.tag)})(der$2);const inherits$5=inherits_browserExports,Buffer$c=safer_1.Buffer,Node$1=node$1,der$1=der$2;function DEREncoder$1(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new DERNode$1,this.tree._init(t.body)}var der_1$1=DEREncoder$1;DEREncoder$1.prototype.encode=function(e,n){return this.tree._encode(e,n).join()};function DERNode$1(t){Node$1.call(this,"der",t)}inherits$5(DERNode$1,Node$1);DERNode$1.prototype._encodeComposite=function(e,n,a,o){const l=encodeTag$1(e,n,a,this.reporter);if(o.length<128){const m=Buffer$c.alloc(2);return m[0]=l,m[1]=o.length,this._createEncoderBuffer([m,o])}let u=1;for(let m=o.length;m>=256;m>>=8)u++;const d=Buffer$c.alloc(1+1+u);d[0]=l,d[1]=128|u;for(let m=1+u,y=o.length;y>0;m--,y>>=8)d[m]=y&255;return this._createEncoderBuffer([d,o])};DERNode$1.prototype._encodeStr=function(e,n){if(n==="bitstr")return this._createEncoderBuffer([e.unused|0,e.data]);if(n==="bmpstr"){const a=Buffer$c.alloc(e.length*2);for(let o=0;o<e.length;o++)a.writeUInt16BE(e.charCodeAt(o),o*2);return this._createEncoderBuffer(a)}else return n==="numstr"?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):n==="printstr"?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(n)?this._createEncoderBuffer(e):n==="objDesc"?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+n+" unsupported")};DERNode$1.prototype._encodeObjid=function(e,n,a){if(typeof e=="string"){if(!n)return this.reporter.error("string objid given, but no values map found");if(!n.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=n[e].split(/[\s.]+/g);for(let d=0;d<e.length;d++)e[d]|=0}else if(Array.isArray(e)){e=e.slice();for(let d=0;d<e.length;d++)e[d]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!a){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,e[0]*40+e[1])}let o=0;for(let d=0;d<e.length;d++){let m=e[d];for(o++;m>=128;m>>=7)o++}const l=Buffer$c.alloc(o);let u=l.length-1;for(let d=e.length-1;d>=0;d--){let m=e[d];for(l[u--]=m&127;(m>>=7)>0;)l[u--]=128|m&127}return this._createEncoderBuffer(l)};function two(t){return t<10?"0"+t:t}DERNode$1.prototype._encodeTime=function(e,n){let a;const o=new Date(e);return n==="gentime"?a=[two(o.getUTCFullYear()),two(o.getUTCMonth()+1),two(o.getUTCDate()),two(o.getUTCHours()),two(o.getUTCMinutes()),two(o.getUTCSeconds()),"Z"].join(""):n==="utctime"?a=[two(o.getUTCFullYear()%100),two(o.getUTCMonth()+1),two(o.getUTCDate()),two(o.getUTCHours()),two(o.getUTCMinutes()),two(o.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+n+" time is not supported yet"),this._encodeStr(a,"octstr")};DERNode$1.prototype._encodeNull=function(){return this._createEncoderBuffer("")};DERNode$1.prototype._encodeInt=function(e,n){if(typeof e=="string"){if(!n)return this.reporter.error("String int or enum given, but no values map");if(!n.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=n[e]}if(typeof e!="number"&&!Buffer$c.isBuffer(e)){const l=e.toArray();!e.sign&&l[0]&128&&l.unshift(0),e=Buffer$c.from(l)}if(Buffer$c.isBuffer(e)){let l=e.length;e.length===0&&l++;const u=Buffer$c.alloc(l);return e.copy(u),e.length===0&&(u[0]=0),this._createEncoderBuffer(u)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);let a=1;for(let l=e;l>=256;l>>=8)a++;const o=new Array(a);for(let l=o.length-1;l>=0;l--)o[l]=e&255,e>>=8;return o[0]&128&&o.unshift(0),this._createEncoderBuffer(Buffer$c.from(o))};DERNode$1.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)};DERNode$1.prototype._use=function(e,n){return typeof e=="function"&&(e=e(n)),e._getEncoder("der").tree};DERNode$1.prototype._skipDefault=function(e,n,a){const o=this._baseState;let l;if(o.default===null)return!1;const u=e.join();if(o.defaultBuffer===void 0&&(o.defaultBuffer=this._encodeValue(o.default,n,a).join()),u.length!==o.defaultBuffer.length)return!1;for(l=0;l<u.length;l++)if(u[l]!==o.defaultBuffer[l])return!1;return!0};function encodeTag$1(t,e,n,a){let o;if(t==="seqof"?t="seq":t==="setof"&&(t="set"),der$1.tagByName.hasOwnProperty(t))o=der$1.tagByName[t];else if(typeof t=="number"&&(t|0)===t)o=t;else return a.error("Unknown tag: "+t);return o>=31?a.error("Multi-octet tag encoding unsupported"):(e||(o|=32),o|=der$1.tagClassByName[n||"universal"]<<6,o)}const inherits$4=inherits_browserExports,DEREncoder=der_1$1;function PEMEncoder(t){DEREncoder.call(this,t),this.enc="pem"}inherits$4(PEMEncoder,DEREncoder);var pem$2=PEMEncoder;PEMEncoder.prototype.encode=function(e,n){const o=DEREncoder.prototype.encode.call(this,e).toString("base64"),l=["-----BEGIN "+n.label+"-----"];for(let u=0;u<o.length;u+=64)l.push(o.slice(u,u+64));return l.push("-----END "+n.label+"-----"),l.join(`
`)};(function(t){const e=t;e.der=der_1$1,e.pem=pem$2})(encoders);var decoders$1={};const inherits$3=inherits_browserExports,bignum=bnExports$4,DecoderBuffer=buffer$1.DecoderBuffer,Node=node$1,der=der$2;function DERDecoder$1(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new DERNode,this.tree._init(t.body)}var der_1=DERDecoder$1;DERDecoder$1.prototype.decode=function(e,n){return DecoderBuffer.isDecoderBuffer(e)||(e=new DecoderBuffer(e,n)),this.tree._decode(e,n)};function DERNode(t){Node.call(this,"der",t)}inherits$3(DERNode,Node);DERNode.prototype._peekTag=function(e,n,a){if(e.isEmpty())return!1;const o=e.save(),l=derDecodeTag(e,'Failed to peek tag: "'+n+'"');return e.isError(l)?l:(e.restore(o),l.tag===n||l.tagStr===n||l.tagStr+"of"===n||a)};DERNode.prototype._decodeTag=function(e,n,a){const o=derDecodeTag(e,'Failed to decode tag of "'+n+'"');if(e.isError(o))return o;let l=derDecodeLen(e,o.primitive,'Failed to get length of "'+n+'"');if(e.isError(l))return l;if(!a&&o.tag!==n&&o.tagStr!==n&&o.tagStr+"of"!==n)return e.error('Failed to match tag: "'+n+'"');if(o.primitive||l!==null)return e.skip(l,'Failed to match body of: "'+n+'"');const u=e.save(),d=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(d)?d:(l=e.offset-u.offset,e.restore(u),e.skip(l,'Failed to match body of: "'+n+'"'))};DERNode.prototype._skipUntilEnd=function(e,n){for(;;){const a=derDecodeTag(e,n);if(e.isError(a))return a;const o=derDecodeLen(e,a.primitive,n);if(e.isError(o))return o;let l;if(a.primitive||o!==null?l=e.skip(o):l=this._skipUntilEnd(e,n),e.isError(l))return l;if(a.tagStr==="end")break}};DERNode.prototype._decodeList=function(e,n,a,o){const l=[];for(;!e.isEmpty();){const u=this._peekTag(e,"end");if(e.isError(u))return u;const d=a.decode(e,"der",o);if(e.isError(d)&&u)break;l.push(d)}return l};DERNode.prototype._decodeStr=function(e,n){if(n==="bitstr"){const a=e.readUInt8();return e.isError(a)?a:{unused:a,data:e.raw()}}else if(n==="bmpstr"){const a=e.raw();if(a.length%2===1)return e.error("Decoding of string type: bmpstr length mismatch");let o="";for(let l=0;l<a.length/2;l++)o+=String.fromCharCode(a.readUInt16BE(l*2));return o}else if(n==="numstr"){const a=e.raw().toString("ascii");return this._isNumstr(a)?a:e.error("Decoding of string type: numstr unsupported characters")}else{if(n==="octstr")return e.raw();if(n==="objDesc")return e.raw();if(n==="printstr"){const a=e.raw().toString("ascii");return this._isPrintstr(a)?a:e.error("Decoding of string type: printstr unsupported characters")}else return/str$/.test(n)?e.raw().toString():e.error("Decoding of string type: "+n+" unsupported")}};DERNode.prototype._decodeObjid=function(e,n,a){let o;const l=[];let u=0,d=0;for(;!e.isEmpty();)d=e.readUInt8(),u<<=7,u|=d&127,d&128||(l.push(u),u=0);d&128&&l.push(u);const m=l[0]/40|0,y=l[0]%40;if(a?o=l:o=[m,y].concat(l.slice(1)),n){let b=n[o.join(" ")];b===void 0&&(b=n[o.join(".")]),b!==void 0&&(o=b)}return o};DERNode.prototype._decodeTime=function(e,n){const a=e.raw().toString();let o,l,u,d,m,y;if(n==="gentime")o=a.slice(0,4)|0,l=a.slice(4,6)|0,u=a.slice(6,8)|0,d=a.slice(8,10)|0,m=a.slice(10,12)|0,y=a.slice(12,14)|0;else if(n==="utctime")o=a.slice(0,2)|0,l=a.slice(2,4)|0,u=a.slice(4,6)|0,d=a.slice(6,8)|0,m=a.slice(8,10)|0,y=a.slice(10,12)|0,o<70?o=2e3+o:o=1900+o;else return e.error("Decoding "+n+" time is not supported yet");return Date.UTC(o,l-1,u,d,m,y,0)};DERNode.prototype._decodeNull=function(){return null};DERNode.prototype._decodeBool=function(e){const n=e.readUInt8();return e.isError(n)?n:n!==0};DERNode.prototype._decodeInt=function(e,n){const a=e.raw();let o=new bignum(a);return n&&(o=n[o.toString(10)]||o),o};DERNode.prototype._use=function(e,n){return typeof e=="function"&&(e=e(n)),e._getDecoder("der").tree};function derDecodeTag(t,e){let n=t.readUInt8(e);if(t.isError(n))return n;const a=der.tagClass[n>>6],o=(n&32)===0;if((n&31)===31){let u=n;for(n=0;(u&128)===128;){if(u=t.readUInt8(e),t.isError(u))return u;n<<=7,n|=u&127}}else n&=31;const l=der.tag[n];return{cls:a,primitive:o,tag:n,tagStr:l}}function derDecodeLen(t,e,n){let a=t.readUInt8(n);if(t.isError(a))return a;if(!e&&a===128)return null;if(!(a&128))return a;const o=a&127;if(o>4)return t.error("length octect is too long");a=0;for(let l=0;l<o;l++){a<<=8;const u=t.readUInt8(n);if(t.isError(u))return u;a|=u}return a}const inherits$2=inherits_browserExports,Buffer$b=safer_1.Buffer,DERDecoder=der_1;function PEMDecoder(t){DERDecoder.call(this,t),this.enc="pem"}inherits$2(PEMDecoder,DERDecoder);var pem$1=PEMDecoder;PEMDecoder.prototype.decode=function(e,n){const a=e.toString().split(/[\r\n]+/g),o=n.label.toUpperCase(),l=/^-----(BEGIN|END) ([^-]+)-----$/;let u=-1,d=-1;for(let b=0;b<a.length;b++){const _=a[b].match(l);if(_!==null&&_[2]===o)if(u===-1){if(_[1]!=="BEGIN")break;u=b}else{if(_[1]!=="END")break;d=b;break}}if(u===-1||d===-1)throw new Error("PEM section not found for: "+o);const m=a.slice(u+1,d).join("");m.replace(/[^a-z0-9+/=]+/gi,"");const y=Buffer$b.from(m,"base64");return DERDecoder.prototype.decode.call(this,y,n)};(function(t){const e=t;e.der=der_1,e.pem=pem$1})(decoders$1);(function(t){const e=encoders,n=decoders$1,a=inherits_browserExports,o=t;o.define=function(d,m){return new l(d,m)};function l(u,d){this.name=u,this.body=d,this.decoders={},this.encoders={}}l.prototype._createNamed=function(d){const m=this.name;function y(b){this._initNamed(b,m)}return a(y,d),y.prototype._initNamed=function(_,w){d.call(this,_,w)},new y(this)},l.prototype._getDecoder=function(d){return d=d||"der",this.decoders.hasOwnProperty(d)||(this.decoders[d]=this._createNamed(n[d])),this.decoders[d]},l.prototype.decode=function(d,m,y){return this._getDecoder(m).decode(d,y)},l.prototype._getEncoder=function(d){return d=d||"der",this.encoders.hasOwnProperty(d)||(this.encoders[d]=this._createNamed(e[d])),this.encoders[d]},l.prototype.encode=function(d,m,y){return this._getEncoder(m).encode(d,y)}})(api$2);var base$7={};(function(t){const e=t;e.Reporter=reporter.Reporter,e.DecoderBuffer=buffer$1.DecoderBuffer,e.EncoderBuffer=buffer$1.EncoderBuffer,e.Node=node$1})(base$7);var constants={};(function(t){const e=t;e._reverse=function(a){const o={};return Object.keys(a).forEach(function(l){(l|0)==l&&(l=l|0);const u=a[l];o[u]=l}),o},e.der=der$2})(constants);(function(t){const e=t;e.bignum=bnExports$4,e.define=api$2.define,e.base=base$7,e.constants=constants,e.decoders=decoders$1,e.encoders=encoders})(asn1$5);var asn=asn1$5,Time=asn.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),AttributeTypeValue=asn.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),AlgorithmIdentifier$1=asn.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),SubjectPublicKeyInfo=asn.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier$1),this.key("subjectPublicKey").bitstr())}),RelativeDistinguishedName=asn.define("RelativeDistinguishedName",function(){this.setof(AttributeTypeValue)}),RDNSequence=asn.define("RDNSequence",function(){this.seqof(RelativeDistinguishedName)}),Name=asn.define("Name",function(){this.choice({rdnSequence:this.use(RDNSequence)})}),Validity=asn.define("Validity",function(){this.seq().obj(this.key("notBefore").use(Time),this.key("notAfter").use(Time))}),Extension=asn.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),TBSCertificate=asn.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(AlgorithmIdentifier$1),this.key("issuer").use(Name),this.key("validity").use(Validity),this.key("subject").use(Name),this.key("subjectPublicKeyInfo").use(SubjectPublicKeyInfo),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(Extension).optional())}),X509Certificate=asn.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(TBSCertificate),this.key("signatureAlgorithm").use(AlgorithmIdentifier$1),this.key("signatureValue").bitstr())}),certificate=X509Certificate,asn1$4=asn1$5;asn1$6.certificate=certificate;var RSAPrivateKey=asn1$4.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$6.RSAPrivateKey=RSAPrivateKey;var RSAPublicKey=asn1$4.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$6.RSAPublicKey=RSAPublicKey;var PublicKey$1=asn1$4.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPublicKey").bitstr())});asn1$6.PublicKey=PublicKey$1;var AlgorithmIdentifier=asn1$4.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),PrivateKeyInfo=asn1$4.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(AlgorithmIdentifier),this.key("subjectPrivateKey").octstr())});asn1$6.PrivateKey=PrivateKeyInfo;var EncryptedPrivateKeyInfo=asn1$4.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$6.EncryptedPrivateKey=EncryptedPrivateKeyInfo;var DSAPrivateKey=asn1$4.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$6.DSAPrivateKey=DSAPrivateKey;asn1$6.DSAparam=asn1$4.define("DSAparam",function(){this.int()});var ECPrivateKey=asn1$4.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(ECParameters),this.key("publicKey").optional().explicit(1).bitstr())});asn1$6.ECPrivateKey=ECPrivateKey;var ECParameters=asn1$4.define("ECParameters",function(){this.choice({namedCurve:this.objid()})});asn1$6.signature=asn1$4.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())});const require$$1$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var findProc=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,startRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,fullRegex=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,evp=evp_bytestokey,ciphers$1=browser$a,Buffer$a=safeBufferExports.Buffer,fixProc$1=function(t,e){var n=t.toString(),a=n.match(findProc),o;if(a){var u="aes"+a[1],d=Buffer$a.from(a[2],"hex"),m=Buffer$a.from(a[3].replace(/[\r\n]/g,""),"base64"),y=evp(e,d.slice(0,8),parseInt(a[1],10)).key,b=[],_=ciphers$1.createDecipheriv(u,y,d);b.push(_.update(m)),b.push(_.final()),o=Buffer$a.concat(b)}else{var l=n.match(fullRegex);o=Buffer$a.from(l[2].replace(/[\r\n]/g,""),"base64")}var w=n.match(startRegex)[1];return{tag:w,data:o}},asn1$3=asn1$6,aesid=require$$1$1,fixProc=fixProc$1,ciphers=browser$a,compat=browser$c,Buffer$9=safeBufferExports.Buffer,parseAsn1=parseKeys$2;function parseKeys$2(t){var e;typeof t=="object"&&!Buffer$9.isBuffer(t)&&(e=t.passphrase,t=t.key),typeof t=="string"&&(t=Buffer$9.from(t));var n=fixProc(t,e),a=n.tag,o=n.data,l,u;switch(a){case"CERTIFICATE":u=asn1$3.certificate.decode(o,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(u||(u=asn1$3.PublicKey.decode(o,"der")),l=u.algorithm.algorithm.join("."),l){case"1.2.840.113549.1.1.1":return asn1$3.RSAPublicKey.decode(u.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return u.subjectPrivateKey=u.subjectPublicKey,{type:"ec",data:u};case"1.2.840.10040.4.1":return u.algorithm.params.pub_key=asn1$3.DSAparam.decode(u.subjectPublicKey.data,"der"),{type:"dsa",data:u.algorithm.params};default:throw new Error("unknown key id "+l)}case"ENCRYPTED PRIVATE KEY":o=asn1$3.EncryptedPrivateKey.decode(o,"der"),o=decrypt$4(o,e);case"PRIVATE KEY":switch(u=asn1$3.PrivateKey.decode(o,"der"),l=u.algorithm.algorithm.join("."),l){case"1.2.840.113549.1.1.1":return asn1$3.RSAPrivateKey.decode(u.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:u.algorithm.curve,privateKey:asn1$3.ECPrivateKey.decode(u.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return u.algorithm.params.priv_key=asn1$3.DSAparam.decode(u.subjectPrivateKey,"der"),{type:"dsa",params:u.algorithm.params};default:throw new Error("unknown key id "+l)}case"RSA PUBLIC KEY":return asn1$3.RSAPublicKey.decode(o,"der");case"RSA PRIVATE KEY":return asn1$3.RSAPrivateKey.decode(o,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:asn1$3.DSAPrivateKey.decode(o,"der")};case"EC PRIVATE KEY":return o=asn1$3.ECPrivateKey.decode(o,"der"),{curve:o.parameters.value,privateKey:o.privateKey};default:throw new Error("unknown key type "+a)}}parseKeys$2.signature=asn1$3.signature;function decrypt$4(t,e){var n=t.algorithm.decrypt.kde.kdeparams.salt,a=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),o=aesid[t.algorithm.decrypt.cipher.algo.join(".")],l=t.algorithm.decrypt.cipher.iv,u=t.subjectPrivateKey,d=parseInt(o.split("-")[1],10)/8,m=compat.pbkdf2Sync(e,n,a,d,"sha1"),y=ciphers.createDecipheriv(o,m,l),b=[];return b.push(y.update(u)),b.push(y.final()),Buffer$9.concat(b)}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign;function requireSign(){if(hasRequiredSign)return signExports;hasRequiredSign=1;var t=safeBufferExports.Buffer,e=browser$d,n=browserifyRsa,a=requireElliptic().ec,o=bnExports$2,l=parseAsn1,u=require$$4;function d(k,B,D,q,j){var J=l(B);if(J.curve){if(q!=="ecdsa"&&q!=="ecdsa/rsa")throw new Error("wrong private key type");return m(k,J)}else if(J.type==="dsa"){if(q!=="dsa")throw new Error("wrong private key type");return y(k,J,D)}else if(q!=="rsa"&&q!=="ecdsa/rsa")throw new Error("wrong private key type");k=t.concat([j,k]);for(var Y=J.modulus.byteLength(),L=[0,1];k.length+L.length+1<Y;)L.push(255);L.push(0);for(var Z=-1;++Z<k.length;)L.push(k[Z]);var Q=n(L,J);return Q}function m(k,B){var D=u[B.curve.join(".")];if(!D)throw new Error("unknown curve "+B.curve.join("."));var q=new a(D),j=q.keyFromPrivate(B.privateKey),J=j.sign(k);return t.from(J.toDER())}function y(k,B,D){for(var q=B.params.priv_key,j=B.params.p,J=B.params.q,Y=B.params.g,L=new o(0),Z,Q=w(k,J).mod(J),oe=!1,ae=_(q,J,k,D);oe===!1;)Z=A(J,ae,D),L=C(Y,Z,j,J),oe=Z.invm(J).imul(Q.add(q.mul(L))).mod(J),oe.cmpn(0)===0&&(oe=!1,L=new o(0));return b(L,oe)}function b(k,B){k=k.toArray(),B=B.toArray(),k[0]&128&&(k=[0].concat(k)),B[0]&128&&(B=[0].concat(B));var D=k.length+B.length+4,q=[48,D,2,k.length];return q=q.concat(k,[2,B.length],B),t.from(q)}function _(k,B,D,q){if(k=t.from(k.toArray()),k.length<B.byteLength()){var j=t.alloc(B.byteLength()-k.length);k=t.concat([j,k])}var J=D.length,Y=E(D,B),L=t.alloc(J);L.fill(1);var Z=t.alloc(J);return Z=e(q,Z).update(L).update(t.from([0])).update(k).update(Y).digest(),L=e(q,Z).update(L).digest(),Z=e(q,Z).update(L).update(t.from([1])).update(k).update(Y).digest(),L=e(q,Z).update(L).digest(),{k:Z,v:L}}function w(k,B){var D=new o(k),q=(k.length<<3)-B.bitLength();return q>0&&D.ishrn(q),D}function E(k,B){k=w(k,B),k=k.mod(B);var D=t.from(k.toArray());if(D.length<B.byteLength()){var q=t.alloc(B.byteLength()-D.length);D=t.concat([q,D])}return D}function A(k,B,D){var q,j;do{for(q=t.alloc(0);q.length*8<k.bitLength();)B.v=e(D,B.k).update(B.v).digest(),q=t.concat([q,B.v]);j=w(q,k),B.k=e(D,B.k).update(B.v).update(t.from([0])).digest(),B.v=e(D,B.k).update(B.v).digest()}while(j.cmp(k)!==-1);return j}function C(k,B,D,q){return k.toRed(o.mont(D)).redPow(B).fromRed().mod(q)}return sign$2.exports=d,signExports.getKey=_,signExports.makeKey=A,signExports}var verify_1,hasRequiredVerify;function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var t=safeBufferExports.Buffer,e=bnExports$2,n=requireElliptic().ec,a=parseAsn1,o=require$$4;function l(y,b,_,w,E){var A=a(_);if(A.type==="ec"){if(w!=="ecdsa"&&w!=="ecdsa/rsa")throw new Error("wrong public key type");return u(y,b,A)}else if(A.type==="dsa"){if(w!=="dsa")throw new Error("wrong public key type");return d(y,b,A)}else if(w!=="rsa"&&w!=="ecdsa/rsa")throw new Error("wrong public key type");b=t.concat([E,b]);for(var C=A.modulus.byteLength(),k=[1],B=0;b.length+k.length+2<C;)k.push(255),B++;k.push(0);for(var D=-1;++D<b.length;)k.push(b[D]);k=t.from(k);var q=e.mont(A.modulus);y=new e(y).toRed(q),y=y.redPow(new e(A.publicExponent)),y=t.from(y.fromRed().toArray());var j=B<8?1:0;for(C=Math.min(y.length,k.length),y.length!==k.length&&(j=1),D=-1;++D<C;)j|=y[D]^k[D];return j===0}function u(y,b,_){var w=o[_.data.algorithm.curve.join(".")];if(!w)throw new Error("unknown curve "+_.data.algorithm.curve.join("."));var E=new n(w),A=_.data.subjectPrivateKey.data;return E.verify(b,y,A)}function d(y,b,_){var w=_.data.p,E=_.data.q,A=_.data.g,C=_.data.pub_key,k=a.signature.decode(y,"der"),B=k.s,D=k.r;m(B,E),m(D,E);var q=e.mont(w),j=B.invm(E),J=A.toRed(q).redPow(new e(b).mul(j).mod(E)).fromRed().mul(C.toRed(q).redPow(D.mul(j).mod(E)).fromRed()).mod(w).mod(E);return J.cmp(D)===0}function m(y,b){if(y.cmpn(0)<=0)throw new Error("invalid sig");if(y.cmp(b)>=b)throw new Error("invalid sig")}return verify_1=l,verify_1}var browser$8,hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$8;hasRequiredBrowser$2=1;var t=safeBufferExports.Buffer,e=browser$e,n=readableBrowserExports,a=inherits_browserExports,o=requireSign(),l=requireVerify(),u=require$$6;Object.keys(u).forEach(function(_){u[_].id=t.from(u[_].id,"hex"),u[_.toLowerCase()]=u[_]});function d(_){n.Writable.call(this);var w=u[_];if(!w)throw new Error("Unknown message digest");this._hashType=w.hash,this._hash=e(w.hash),this._tag=w.id,this._signType=w.sign}a(d,n.Writable),d.prototype._write=function(w,E,A){this._hash.update(w),A()},d.prototype.update=function(w,E){return typeof w=="string"&&(w=t.from(w,E)),this._hash.update(w),this},d.prototype.sign=function(w,E){this.end();var A=this._hash.digest(),C=o(A,w,this._hashType,this._signType,this._tag);return E?C.toString(E):C};function m(_){n.Writable.call(this);var w=u[_];if(!w)throw new Error("Unknown message digest");this._hash=e(w.hash),this._tag=w.id,this._signType=w.sign}a(m,n.Writable),m.prototype._write=function(w,E,A){this._hash.update(w),A()},m.prototype.update=function(w,E){return typeof w=="string"&&(w=t.from(w,E)),this._hash.update(w),this},m.prototype.verify=function(w,E,A){typeof E=="string"&&(E=t.from(E,A)),this.end();var C=this._hash.digest();return l(E,C,w,this._signType,this._tag)};function y(_){return new d(_)}function b(_){return new m(_)}return browser$8={Sign:y,Verify:b,createSign:y,createVerify:b},browser$8}var browser$7,hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$7;hasRequiredBrowser$1=1;var t=requireElliptic(),e=bnExports$4;browser$7=function(u){return new a(u)};var n={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};n.p224=n.secp224r1,n.p256=n.secp256r1=n.prime256v1,n.p192=n.secp192r1=n.prime192v1,n.p384=n.secp384r1,n.p521=n.secp521r1;function a(l){this.curveType=n[l],this.curveType||(this.curveType={name:l}),this.curve=new t.ec(this.curveType.name),this.keys=void 0}a.prototype.generateKeys=function(l,u){return this.keys=this.curve.genKeyPair(),this.getPublicKey(l,u)},a.prototype.computeSecret=function(l,u,d){u=u||"utf8",Buffer$y.isBuffer(l)||(l=new Buffer$y(l,u));var m=this.curve.keyFromPublic(l).getPublic(),y=m.mul(this.keys.getPrivate()).getX();return o(y,d,this.curveType.byteLength)},a.prototype.getPublicKey=function(l,u){var d=this.keys.getPublic(u==="compressed",!0);return u==="hybrid"&&(d[d.length-1]%2?d[0]=7:d[0]=6),o(d,l)},a.prototype.getPrivateKey=function(l){return o(this.keys.getPrivate(),l)},a.prototype.setPublicKey=function(l,u){return u=u||"utf8",Buffer$y.isBuffer(l)||(l=new Buffer$y(l,u)),this.keys._importPublic(l),this},a.prototype.setPrivateKey=function(l,u){u=u||"utf8",Buffer$y.isBuffer(l)||(l=new Buffer$y(l,u));var d=new e(l);return d=d.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(d),this};function o(l,u,d){Array.isArray(l)||(l=l.toArray());var m=new Buffer$y(l);if(d&&m.length<d){var y=new Buffer$y(d-m.length);y.fill(0),m=Buffer$y.concat([y,m])}return u?m.toString(u):m}return browser$7}var browser$6={},createHash$2=browser$e,Buffer$8=safeBufferExports.Buffer,mgf$2=function(t,e){for(var n=Buffer$8.alloc(0),a=0,o;n.length<e;)o=i2ops(a++),n=Buffer$8.concat([n,createHash$2("sha1").update(t).update(o).digest()]);return n.slice(0,e)};function i2ops(t){var e=Buffer$8.allocUnsafe(4);return e.writeUInt32BE(t,0),e}var xor$2=function(e,n){for(var a=e.length,o=-1;++o<a;)e[o]^=n[o];return e},BN$5=bnExports$4,Buffer$7=safeBufferExports.Buffer;function withPublic$2(t,e){return Buffer$7.from(t.toRed(BN$5.mont(e.modulus)).redPow(new BN$5(e.publicExponent)).fromRed().toArray())}var withPublic_1=withPublic$2,parseKeys$1=parseAsn1,randomBytes$2=browserExports$2,createHash$1=browser$e,mgf$1=mgf$2,xor$1=xor$2,BN$4=bnExports$4,withPublic$1=withPublic_1,crt$1=browserifyRsa,Buffer$6=safeBufferExports.Buffer,publicEncrypt=function(e,n,a){var o;e.padding?o=e.padding:a?o=1:o=4;var l=parseKeys$1(e),u;if(o===4)u=oaep$1(l,n);else if(o===1)u=pkcs1$2(l,n,a);else if(o===3){if(u=new BN$4(n),u.cmp(l.modulus)>=0)throw new Error("data too long for modulus")}else throw new Error("unknown padding");return a?crt$1(u,l):withPublic$1(u,l)};function oaep$1(t,e){var n=t.modulus.byteLength(),a=e.length,o=createHash$1("sha1").update(Buffer$6.alloc(0)).digest(),l=o.length,u=2*l;if(a>n-u-2)throw new Error("message too long");var d=Buffer$6.alloc(n-a-u-2),m=n-l-1,y=randomBytes$2(l),b=xor$1(Buffer$6.concat([o,d,Buffer$6.alloc(1,1),e],m),mgf$1(y,m)),_=xor$1(y,mgf$1(b,l));return new BN$4(Buffer$6.concat([Buffer$6.alloc(1),_,b],n))}function pkcs1$2(t,e,n){var a=e.length,o=t.modulus.byteLength();if(a>o-11)throw new Error("message too long");var l;return n?l=Buffer$6.alloc(o-a-3,255):l=nonZero(o-a-3),new BN$4(Buffer$6.concat([Buffer$6.from([0,n?1:2]),l,Buffer$6.alloc(1),e],o))}function nonZero(t){for(var e=Buffer$6.allocUnsafe(t),n=0,a=randomBytes$2(t*2),o=0,l;n<t;)o===a.length&&(a=randomBytes$2(t*2),o=0),l=a[o++],l&&(e[n++]=l);return e}var parseKeys=parseAsn1,mgf=mgf$2,xor=xor$2,BN$3=bnExports$4,crt=browserifyRsa,createHash=browser$e,withPublic=withPublic_1,Buffer$5=safeBufferExports.Buffer,privateDecrypt=function(e,n,a){var o;e.padding?o=e.padding:a?o=1:o=4;var l=parseKeys(e),u=l.modulus.byteLength();if(n.length>u||new BN$3(n).cmp(l.modulus)>=0)throw new Error("decryption error");var d;a?d=withPublic(new BN$3(n),l):d=crt(n,l);var m=Buffer$5.alloc(u-d.length);if(d=Buffer$5.concat([m,d],u),o===4)return oaep(l,d);if(o===1)return pkcs1$1(l,d,a);if(o===3)return d;throw new Error("unknown padding")};function oaep(t,e){var n=t.modulus.byteLength(),a=createHash("sha1").update(Buffer$5.alloc(0)).digest(),o=a.length;if(e[0]!==0)throw new Error("decryption error");var l=e.slice(1,o+1),u=e.slice(o+1),d=xor(l,mgf(u,o)),m=xor(u,mgf(d,n-o-1));if(compare$4(a,m.slice(0,o)))throw new Error("decryption error");for(var y=o;m[y]===0;)y++;if(m[y++]!==1)throw new Error("decryption error");return m.slice(y)}function pkcs1$1(t,e,n){for(var a=e.slice(0,2),o=2,l=0;e[o++]!==0;)if(o>=e.length){l++;break}var u=e.slice(2,o-1);if((a.toString("hex")!=="0002"&&!n||a.toString("hex")!=="0001"&&n)&&l++,u.length<8&&l++,l)throw new Error("decryption error");return e.slice(o)}function compare$4(t,e){t=Buffer$5.from(t),e=Buffer$5.from(e);var n=0,a=t.length;t.length!==e.length&&(n++,a=Math.min(t.length,e.length));for(var o=-1;++o<a;)n+=t[o]^e[o];return n}(function(t){t.publicEncrypt=publicEncrypt,t.privateDecrypt=privateDecrypt,t.privateEncrypt=function(n,a){return t.publicEncrypt(n,a,!0)},t.publicDecrypt=function(n,a){return t.privateDecrypt(n,a,!0)}})(browser$6);var browser$5={};function oldBrowser(){throw new Error(`secure random number generation not supported by this browser
use chrome, FireFox or Internet Explorer 11`)}var safeBuffer=safeBufferExports,randombytes=browserExports$2,Buffer$4=safeBuffer.Buffer,kBufferMaxLength=safeBuffer.kMaxLength,crypto$6=commonjsGlobal.crypto||commonjsGlobal.msCrypto,kMaxUint32=Math.pow(2,32)-1;function assertOffset(t,e){if(typeof t!="number"||t!==t)throw new TypeError("offset must be a number");if(t>kMaxUint32||t<0)throw new TypeError("offset must be a uint32");if(t>kBufferMaxLength||t>e)throw new RangeError("offset out of range")}function assertSize(t,e,n){if(typeof t!="number"||t!==t)throw new TypeError("size must be a number");if(t>kMaxUint32||t<0)throw new TypeError("size must be a uint32");if(t+e>n||t>kBufferMaxLength)throw new RangeError("buffer too small")}crypto$6&&crypto$6.getRandomValues||!browser$1$1.browser?(browser$5.randomFill=randomFill,browser$5.randomFillSync=randomFillSync):(browser$5.randomFill=oldBrowser,browser$5.randomFillSync=oldBrowser);function randomFill(t,e,n,a){if(!Buffer$4.isBuffer(t)&&!(t instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if(typeof e=="function")a=e,e=0,n=t.length;else if(typeof n=="function")a=n,n=t.length-e;else if(typeof a!="function")throw new TypeError('"cb" argument must be a function');return assertOffset(e,t.length),assertSize(n,e,t.length),actualFill(t,e,n,a)}function actualFill(t,e,n,a){if(browser$1$1.browser){var o=t.buffer,l=new Uint8Array(o,e,n);if(crypto$6.getRandomValues(l),a){browser$1$1.nextTick(function(){a(null,t)});return}return t}if(a){randombytes(n,function(d,m){if(d)return a(d);m.copy(t,e),a(null,t)});return}var u=randombytes(n);return u.copy(t,e),t}function randomFillSync(t,e,n){if(typeof e>"u"&&(e=0),!Buffer$4.isBuffer(t)&&!(t instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return assertOffset(e,t.length),n===void 0&&(n=t.length-e),assertSize(n,e,t.length),actualFill(t,e,n)}var hasRequiredCryptoBrowserify;function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=browserExports$2,cryptoBrowserify.createHash=cryptoBrowserify.Hash=browser$e,cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=browser$d;var t=algosExports,e=Object.keys(t),n=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(e);cryptoBrowserify.getHashes=function(){return n};var a=browser$c;cryptoBrowserify.pbkdf2=a.pbkdf2,cryptoBrowserify.pbkdf2Sync=a.pbkdf2Sync;var o=browser$b;cryptoBrowserify.Cipher=o.Cipher,cryptoBrowserify.createCipher=o.createCipher,cryptoBrowserify.Cipheriv=o.Cipheriv,cryptoBrowserify.createCipheriv=o.createCipheriv,cryptoBrowserify.Decipher=o.Decipher,cryptoBrowserify.createDecipher=o.createDecipher,cryptoBrowserify.Decipheriv=o.Decipheriv,cryptoBrowserify.createDecipheriv=o.createDecipheriv,cryptoBrowserify.getCiphers=o.getCiphers,cryptoBrowserify.listCiphers=o.listCiphers;var l=requireBrowser$3();cryptoBrowserify.DiffieHellmanGroup=l.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=l.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=l.getDiffieHellman,cryptoBrowserify.createDiffieHellman=l.createDiffieHellman,cryptoBrowserify.DiffieHellman=l.DiffieHellman;var u=requireBrowser$2();cryptoBrowserify.createSign=u.createSign,cryptoBrowserify.Sign=u.Sign,cryptoBrowserify.createVerify=u.createVerify,cryptoBrowserify.Verify=u.Verify,cryptoBrowserify.createECDH=requireBrowser$1();var d=browser$6;cryptoBrowserify.publicEncrypt=d.publicEncrypt,cryptoBrowserify.privateEncrypt=d.privateEncrypt,cryptoBrowserify.publicDecrypt=d.publicDecrypt,cryptoBrowserify.privateDecrypt=d.privateDecrypt;var m=browser$5;return cryptoBrowserify.randomFill=m.randomFill,cryptoBrowserify.randomFillSync=m.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error(["sorry, createCredentials is not implemented yet","we accept pull requests","https://github.com/crypto-browserify/crypto-browserify"].join(`
`))},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}var cryptoBrowserifyExports=requireCryptoBrowserify();const crypto$5=getDefaultExportFromCjs(cryptoBrowserifyExports),nodeCrypto=_mergeNamespaces({__proto__:null,default:crypto$5},[cryptoBrowserifyExports]);function normalizeArray(t,e){for(var n=0,a=t.length-1;a>=0;a--){var o=t[a];o==="."?t.splice(a,1):o===".."?(t.splice(a,1),n++):n&&(t.splice(a,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var splitPathRe=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,splitPath=function(t){return splitPathRe.exec(t).slice(1)};function resolve(){for(var t="",e=!1,n=arguments.length-1;n>=-1&&!e;n--){var a=n>=0?arguments[n]:"/";if(typeof a!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!a)continue;t=a+"/"+t,e=a.charAt(0)==="/"}return t=normalizeArray(filter$1(t.split("/"),function(o){return!!o}),!e).join("/"),(e?"/":"")+t||"."}function normalize(t){var e=isAbsolute(t),n=substr(t,-1)==="/";return t=normalizeArray(filter$1(t.split("/"),function(a){return!!a}),!e).join("/"),!t&&!e&&(t="."),t&&n&&(t+="/"),(e?"/":"")+t}function isAbsolute(t){return t.charAt(0)==="/"}function join$1(){var t=Array.prototype.slice.call(arguments,0);return normalize(filter$1(t,function(e,n){if(typeof e!="string")throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))}function relative$2(t,e){t=resolve(t).substr(1),e=resolve(e).substr(1);function n(y){for(var b=0;b<y.length&&y[b]==="";b++);for(var _=y.length-1;_>=0&&y[_]==="";_--);return b>_?[]:y.slice(b,_-b+1)}for(var a=n(t.split("/")),o=n(e.split("/")),l=Math.min(a.length,o.length),u=l,d=0;d<l;d++)if(a[d]!==o[d]){u=d;break}for(var m=[],d=u;d<a.length;d++)m.push("..");return m=m.concat(o.slice(u)),m.join("/")}var sep="/",delimiter=":";function dirname(t){var e=splitPath(t),n=e[0],a=e[1];return!n&&!a?".":(a&&(a=a.substr(0,a.length-1)),n+a)}function basename(t,e){var n=splitPath(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n}function extname(t){return splitPath(t)[3]}const path={extname,basename,dirname,sep,delimiter,relative:relative$2,join:join$1,isAbsolute,normalize,resolve};function filter$1(t,e){if(t.filter)return t.filter(e);for(var n=[],a=0;a<t.length;a++)e(t[a],a,t)&&n.push(t[a]);return n}var substr="ab".substr(-1)==="b"?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)};const path$1=Object.freeze(Object.defineProperty({__proto__:null,basename,default:path,delimiter,dirname,extname,isAbsolute,join:join$1,normalize,relative:relative$2,resolve,sep},Symbol.toStringTag,{value:"Module"})),pEachSeries=async(t,e)=>{let n=0;for(const a of t)if(await e(await a,n++)===pEachSeries.stop)break;return t};pEachSeries.stop=Symbol("pEachSeries.stop");var eventemitter3Exports={},eventemitter3={get exports(){return eventemitter3Exports},set exports(t){eventemitter3Exports=t}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function o(m,y,b){this.fn=m,this.context=y,this.once=b||!1}function l(m,y,b,_,w){if(typeof b!="function")throw new TypeError("The listener must be a function");var E=new o(b,_||m,w),A=n?n+y:y;return m._events[A]?m._events[A].fn?m._events[A]=[m._events[A],E]:m._events[A].push(E):(m._events[A]=E,m._eventsCount++),m}function u(m,y){--m._eventsCount===0?m._events=new a:delete m._events[y]}function d(){this._events=new a,this._eventsCount=0}d.prototype.eventNames=function(){var y=[],b,_;if(this._eventsCount===0)return y;for(_ in b=this._events)e.call(b,_)&&y.push(n?_.slice(1):_);return Object.getOwnPropertySymbols?y.concat(Object.getOwnPropertySymbols(b)):y},d.prototype.listeners=function(y){var b=n?n+y:y,_=this._events[b];if(!_)return[];if(_.fn)return[_.fn];for(var w=0,E=_.length,A=new Array(E);w<E;w++)A[w]=_[w].fn;return A},d.prototype.listenerCount=function(y){var b=n?n+y:y,_=this._events[b];return _?_.fn?1:_.length:0},d.prototype.emit=function(y,b,_,w,E,A){var C=n?n+y:y;if(!this._events[C])return!1;var k=this._events[C],B=arguments.length,D,q;if(k.fn){switch(k.once&&this.removeListener(y,k.fn,void 0,!0),B){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,_),!0;case 4:return k.fn.call(k.context,b,_,w),!0;case 5:return k.fn.call(k.context,b,_,w,E),!0;case 6:return k.fn.call(k.context,b,_,w,E,A),!0}for(q=1,D=new Array(B-1);q<B;q++)D[q-1]=arguments[q];k.fn.apply(k.context,D)}else{var j=k.length,J;for(q=0;q<j;q++)switch(k[q].once&&this.removeListener(y,k[q].fn,void 0,!0),B){case 1:k[q].fn.call(k[q].context);break;case 2:k[q].fn.call(k[q].context,b);break;case 3:k[q].fn.call(k[q].context,b,_);break;case 4:k[q].fn.call(k[q].context,b,_,w);break;default:if(!D)for(J=1,D=new Array(B-1);J<B;J++)D[J-1]=arguments[J];k[q].fn.apply(k[q].context,D)}}return!0},d.prototype.on=function(y,b,_){return l(this,y,b,_,!1)},d.prototype.once=function(y,b,_){return l(this,y,b,_,!0)},d.prototype.removeListener=function(y,b,_,w){var E=n?n+y:y;if(!this._events[E])return this;if(!b)return u(this,E),this;var A=this._events[E];if(A.fn)A.fn===b&&(!w||A.once)&&(!_||A.context===_)&&u(this,E);else{for(var C=0,k=[],B=A.length;C<B;C++)(A[C].fn!==b||w&&!A[C].once||_&&A[C].context!==_)&&k.push(A[C]);k.length?this._events[E]=k.length===1?k[0]:k:u(this,E)}return this},d.prototype.removeAllListeners=function(y){var b;return y?(b=n?n+y:y,this._events[b]&&u(this,b)):(this._events=new a,this._eventsCount=0),this},d.prototype.off=d.prototype.removeListener,d.prototype.addListener=d.prototype.on,d.prefixed=n,d.EventEmitter=d,t.exports=d})(eventemitter3);let TimeoutError$3=class extends Error{constructor(e){super(e),this.name="TimeoutError"}},AbortError$4=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const getDOMException$1=t=>globalThis.DOMException===void 0?new AbortError$4(t):new DOMException(t),getAbortedReason$1=t=>{const e=t.reason===void 0?getDOMException$1("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException$1(e)};function pTimeout(t,e,n,a){let o;const l=new Promise((u,d)=>{if(typeof e!="number"||Math.sign(e)!==1)throw new TypeError(`Expected \`milliseconds\` to be a positive number, got \`${e}\``);if(e===Number.POSITIVE_INFINITY){u(t);return}if(a={customTimers:{setTimeout,clearTimeout},...a},a.signal){const{signal:m}=a;m.aborted&&d(getAbortedReason$1(m)),m.addEventListener("abort",()=>{d(getAbortedReason$1(m))})}o=a.customTimers.setTimeout.call(void 0,()=>{if(typeof n=="function"){try{u(n())}catch(b){d(b)}return}const m=typeof n=="string"?n:`Promise timed out after ${e} milliseconds`,y=n instanceof Error?n:new TimeoutError$3(m);typeof t.cancel=="function"&&t.cancel(),d(y)},e),(async()=>{try{u(await t)}catch(m){d(m)}finally{a.customTimers.clearTimeout.call(void 0,o)}})()});return l.clear=()=>{clearTimeout(o),o=void 0},l}function lowerBound(t,e,n){let a=0,o=t.length;for(;o>0;){const l=Math.trunc(o/2);let u=a+l;n(t[u],e)<=0?(a=++u,o-=l+1):o=l}return a}var __classPrivateFieldGet$2=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(t):a?a.value:e.get(t)},_PriorityQueue_queue;class PriorityQueue{constructor(){_PriorityQueue_queue.set(this,[])}enqueue(e,n){n={priority:0,...n};const a={priority:n.priority,run:e};if(this.size&&__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f")[this.size-1].priority>=n.priority){__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").push(a);return}const o=lowerBound(__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f"),a,(l,u)=>u.priority-l.priority);__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").splice(o,0,a)}dequeue(){const e=__classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").shift();return e?.run}filter(e){return __classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").filter(n=>n.priority===e.priority).map(n=>n.run)}get size(){return __classPrivateFieldGet$2(this,_PriorityQueue_queue,"f").length}}_PriorityQueue_queue=new WeakMap;var __classPrivateFieldSet$1=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},__classPrivateFieldGet$1=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(t):a?a.value:e.get(t)},_PQueue_instances,_PQueue_carryoverConcurrencyCount,_PQueue_isIntervalIgnored,_PQueue_intervalCount,_PQueue_intervalCap,_PQueue_interval,_PQueue_intervalEnd,_PQueue_intervalId,_PQueue_timeoutId,_PQueue_queue,_PQueue_queueClass,_PQueue_pendingCount,_PQueue_concurrency,_PQueue_isPaused,_PQueue_throwOnTimeout,_PQueue_doesIntervalAllowAnother_get,_PQueue_doesConcurrentAllowAnother_get,_PQueue_next,_PQueue_emitEvents,_PQueue_onResumeInterval,_PQueue_isIntervalPaused_get,_PQueue_tryToStartAnother,_PQueue_initializeIntervalIfNeeded,_PQueue_onInterval,_PQueue_processQueue,_PQueue_onEvent;const timeoutError=new TimeoutError$3;let AbortError$3=class extends Error{};class PQueue extends eventemitter3Exports{constructor(e){var n,a,o,l;if(super(),_PQueue_instances.add(this),_PQueue_carryoverConcurrencyCount.set(this,void 0),_PQueue_isIntervalIgnored.set(this,void 0),_PQueue_intervalCount.set(this,0),_PQueue_intervalCap.set(this,void 0),_PQueue_interval.set(this,void 0),_PQueue_intervalEnd.set(this,0),_PQueue_intervalId.set(this,void 0),_PQueue_timeoutId.set(this,void 0),_PQueue_queue.set(this,void 0),_PQueue_queueClass.set(this,void 0),_PQueue_pendingCount.set(this,0),_PQueue_concurrency.set(this,void 0),_PQueue_isPaused.set(this,void 0),_PQueue_throwOnTimeout.set(this,void 0),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e={carryoverConcurrencyCount:!1,intervalCap:Number.POSITIVE_INFINITY,interval:0,concurrency:Number.POSITIVE_INFINITY,autoStart:!0,queueClass:PriorityQueue,...e},!(typeof e.intervalCap=="number"&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${(a=(n=e.intervalCap)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:""}\` (${typeof e.intervalCap})`);if(e.interval===void 0||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${(l=(o=e.interval)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""}\` (${typeof e.interval})`);__classPrivateFieldSet$1(this,_PQueue_carryoverConcurrencyCount,e.carryoverConcurrencyCount,"f"),__classPrivateFieldSet$1(this,_PQueue_isIntervalIgnored,e.intervalCap===Number.POSITIVE_INFINITY||e.interval===0,"f"),__classPrivateFieldSet$1(this,_PQueue_intervalCap,e.intervalCap,"f"),__classPrivateFieldSet$1(this,_PQueue_interval,e.interval,"f"),__classPrivateFieldSet$1(this,_PQueue_queue,new e.queueClass,"f"),__classPrivateFieldSet$1(this,_PQueue_queueClass,e.queueClass,"f"),this.concurrency=e.concurrency,this.timeout=e.timeout,__classPrivateFieldSet$1(this,_PQueue_throwOnTimeout,e.throwOnTimeout===!0,"f"),__classPrivateFieldSet$1(this,_PQueue_isPaused,e.autoStart===!1,"f")}get concurrency(){return __classPrivateFieldGet$1(this,_PQueue_concurrency,"f")}set concurrency(e){if(!(typeof e=="number"&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);__classPrivateFieldSet$1(this,_PQueue_concurrency,e,"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)}async add(e,n={}){return new Promise((a,o)=>{const l=async()=>{var u,d,m;__classPrivateFieldSet$1(this,_PQueue_pendingCount,(d=__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f"),d++,d),"f"),__classPrivateFieldSet$1(this,_PQueue_intervalCount,(m=__classPrivateFieldGet$1(this,_PQueue_intervalCount,"f"),m++,m),"f");try{if(!((u=n.signal)===null||u===void 0)&&u.aborted){o(new AbortError$3("The task was aborted."));return}const b=await(this.timeout===void 0&&n.timeout===void 0?e({signal:n.signal}):pTimeout(Promise.resolve(e({signal:n.signal})),n.timeout===void 0?this.timeout:n.timeout,()=>{(n.throwOnTimeout===void 0?__classPrivateFieldGet$1(this,_PQueue_throwOnTimeout,"f"):n.throwOnTimeout)&&o(timeoutError)}));a(b),this.emit("completed",b)}catch(y){o(y),this.emit("error",y)}__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_next).call(this)};__classPrivateFieldGet$1(this,_PQueue_queue,"f").enqueue(l,n),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("add")})}async addAll(e,n){return Promise.all(e.map(async a=>this.add(a,n)))}start(){return __classPrivateFieldGet$1(this,_PQueue_isPaused,"f")?(__classPrivateFieldSet$1(this,_PQueue_isPaused,!1,"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_processQueue).call(this),this):this}pause(){__classPrivateFieldSet$1(this,_PQueue_isPaused,!0,"f")}clear(){__classPrivateFieldSet$1(this,_PQueue_queue,new(__classPrivateFieldGet$1(this,_PQueue_queueClass,"f")),"f")}async onEmpty(){__classPrivateFieldGet$1(this,_PQueue_queue,"f").size!==0&&await __classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"empty")}async onSizeLessThan(e){__classPrivateFieldGet$1(this,_PQueue_queue,"f").size<e||await __classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"next",()=>__classPrivateFieldGet$1(this,_PQueue_queue,"f").size<e)}async onIdle(){__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet$1(this,_PQueue_queue,"f").size===0||await __classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onEvent).call(this,"idle")}get size(){return __classPrivateFieldGet$1(this,_PQueue_queue,"f").size}sizeBy(e){return __classPrivateFieldGet$1(this,_PQueue_queue,"f").filter(e).length}get pending(){return __classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")}get isPaused(){return __classPrivateFieldGet$1(this,_PQueue_isPaused,"f")}}_PQueue_carryoverConcurrencyCount=new WeakMap,_PQueue_isIntervalIgnored=new WeakMap,_PQueue_intervalCount=new WeakMap,_PQueue_intervalCap=new WeakMap,_PQueue_interval=new WeakMap,_PQueue_intervalEnd=new WeakMap,_PQueue_intervalId=new WeakMap,_PQueue_timeoutId=new WeakMap,_PQueue_queue=new WeakMap,_PQueue_queueClass=new WeakMap,_PQueue_pendingCount=new WeakMap,_PQueue_concurrency=new WeakMap,_PQueue_isPaused=new WeakMap,_PQueue_throwOnTimeout=new WeakMap,_PQueue_instances=new WeakSet,_PQueue_doesIntervalAllowAnother_get=function(){return __classPrivateFieldGet$1(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet$1(this,_PQueue_intervalCount,"f")<__classPrivateFieldGet$1(this,_PQueue_intervalCap,"f")},_PQueue_doesConcurrentAllowAnother_get=function(){return __classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")<__classPrivateFieldGet$1(this,_PQueue_concurrency,"f")},_PQueue_next=function(){var e;__classPrivateFieldSet$1(this,_PQueue_pendingCount,(e=__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f"),e--,e),"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this),this.emit("next")},_PQueue_emitEvents=function(){this.emit("empty"),__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")===0&&this.emit("idle")},_PQueue_onResumeInterval=function(){__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onInterval).call(this),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),__classPrivateFieldSet$1(this,_PQueue_timeoutId,void 0,"f")},_PQueue_isIntervalPaused_get=function(){const e=Date.now();if(__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")===void 0){const n=__classPrivateFieldGet$1(this,_PQueue_intervalEnd,"f")-e;if(n<0)__classPrivateFieldSet$1(this,_PQueue_intervalCount,__classPrivateFieldGet$1(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f"):0,"f");else return __classPrivateFieldGet$1(this,_PQueue_timeoutId,"f")===void 0&&__classPrivateFieldSet$1(this,_PQueue_timeoutId,setTimeout(()=>{__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onResumeInterval).call(this)},n),"f"),!0}return!1},_PQueue_tryToStartAnother=function(){if(__classPrivateFieldGet$1(this,_PQueue_queue,"f").size===0)return __classPrivateFieldGet$1(this,_PQueue_intervalId,"f")&&clearInterval(__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")),__classPrivateFieldSet$1(this,_PQueue_intervalId,void 0,"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_emitEvents).call(this),!1;if(!__classPrivateFieldGet$1(this,_PQueue_isPaused,"f")){const e=!__classPrivateFieldGet$1(this,_PQueue_instances,"a",_PQueue_isIntervalPaused_get);if(__classPrivateFieldGet$1(this,_PQueue_instances,"a",_PQueue_doesIntervalAllowAnother_get)&&__classPrivateFieldGet$1(this,_PQueue_instances,"a",_PQueue_doesConcurrentAllowAnother_get)){const n=__classPrivateFieldGet$1(this,_PQueue_queue,"f").dequeue();return n?(this.emit("active"),n(),e&&__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_initializeIntervalIfNeeded).call(this),!0):!1}}return!1},_PQueue_initializeIntervalIfNeeded=function(){__classPrivateFieldGet$1(this,_PQueue_isIntervalIgnored,"f")||__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")!==void 0||(__classPrivateFieldSet$1(this,_PQueue_intervalId,setInterval(()=>{__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_onInterval).call(this)},__classPrivateFieldGet$1(this,_PQueue_interval,"f")),"f"),__classPrivateFieldSet$1(this,_PQueue_intervalEnd,Date.now()+__classPrivateFieldGet$1(this,_PQueue_interval,"f"),"f"))},_PQueue_onInterval=function(){__classPrivateFieldGet$1(this,_PQueue_intervalCount,"f")===0&&__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f")===0&&__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")&&(clearInterval(__classPrivateFieldGet$1(this,_PQueue_intervalId,"f")),__classPrivateFieldSet$1(this,_PQueue_intervalId,void 0,"f")),__classPrivateFieldSet$1(this,_PQueue_intervalCount,__classPrivateFieldGet$1(this,_PQueue_carryoverConcurrencyCount,"f")?__classPrivateFieldGet$1(this,_PQueue_pendingCount,"f"):0,"f"),__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_processQueue).call(this)},_PQueue_processQueue=function(){for(;__classPrivateFieldGet$1(this,_PQueue_instances,"m",_PQueue_tryToStartAnother).call(this););},_PQueue_onEvent=async function(e,n){return new Promise(a=>{const o=()=>{n&&!n()||(this.off(e,o),a())};this.on(e,o)})};class Index{constructor(e){this.id=e,this._index=[]}get(){return this._index}async updateIndex(e,n){this._index=e.values}}function indentString(t,e=1,n={}){const{indent:a=" ",includeEmptyLines:o=!1}=n;if(typeof t!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof t}\``);if(typeof e!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof e}\``);if(e<0)throw new RangeError(`Expected \`count\` to be at least 0, got \`${e}\``);if(typeof a!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof a}\``);if(e===0)return t;const l=o?/^/gm:/^(?!\s*$)/gm;return t.replace(l,a.repeat(e))}function escapeStringRegexp(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}const extractPathRegex=/\s+at.*[(\s](.*)\)?/,pathRegex=/^(?:(?:(?:node|node:[\w/]+|(?:(?:node:)?internal\/[\w/]*|.*node_modules\/(?:babel-polyfill|pirates)\/.*)?\w+)(?:\.js)?:\d+:\d+)|native)/,homeDir=typeof net.homedir>"u"?"":net.homedir().replace(/\\/g,"/");function cleanStack(t,{pretty:e=!1,basePath:n}={}){const a=n&&new RegExp(`(at | \\()${escapeStringRegexp(n.replace(/\\/g,"/"))}`,"g");if(typeof t=="string")return t.replace(/\\/g,"/").split(`
`).filter(o=>{const l=o.match(extractPathRegex);if(l===null||!l[1])return!0;const u=l[1];return u.includes(".app/Contents/Resources/electron.asar")||u.includes(".app/Contents/Resources/default_app.asar")||u.includes("node_modules/electron/dist/resources/electron.asar")||u.includes("node_modules/electron/dist/resources/default_app.asar")?!1:!pathRegex.test(u)}).filter(o=>o.trim()!=="").map(o=>(a&&(o=o.replace(a,"$1")),e&&(o=o.replace(extractPathRegex,(l,u)=>l.replace(u,u.replace(homeDir,"~")))),o)).join(`
`)}const cleanInternalStack=t=>t.replace(/\s+at .*aggregate-error\/index.js:\d+:\d+\)?/g,"");var Jt,nr;let AggregateError$1=(nr=class extends Error{constructor(n){if(!Array.isArray(n))throw new TypeError(`Expected input to be an Array, got ${typeof n}`);n=n.map(o=>o instanceof Error?o:o!==null&&typeof o=="object"?Object.assign(new Error(o.message),o):new Error(o));let a=n.map(o=>typeof o.stack=="string"&&o.stack.length>0?cleanInternalStack(cleanStack(o.stack)):String(o)).join(`
`);a=`
`+indentString(a,4);super(a);er(this,Jt,void 0);ut(this,"name","AggregateError");tr(this,Jt,n)}get errors(){return Qt(this,Jt).slice()}},Jt=new WeakMap,nr),AbortError$2=class extends Error{constructor(e){super(),this.name="AbortError",this.message=e}};const getDOMException=t=>globalThis.DOMException===void 0?new AbortError$2(t):new DOMException(t),getAbortedReason=t=>{const e=t.reason===void 0?getDOMException("This operation was aborted."):t.reason;return e instanceof Error?e:getDOMException(e)};async function pMap$1(t,e,{concurrency:n=Number.POSITIVE_INFINITY,stopOnError:a=!0,signal:o}={}){return new Promise((l,u)=>{if(t[Symbol.iterator]===void 0&&t[Symbol.asyncIterator]===void 0)throw new TypeError(`Expected \`input\` to be either an \`Iterable\` or \`AsyncIterable\`, got (${typeof t})`);if(typeof e!="function")throw new TypeError("Mapper function is required");if(!((Number.isSafeInteger(n)||n===Number.POSITIVE_INFINITY)&&n>=1))throw new TypeError(`Expected \`concurrency\` to be an integer from 1 and up or \`Infinity\`, got \`${n}\` (${typeof n})`);const d=[],m=[],y=new Map;let b=!1,_=!1,w=!1,E=0,A=0;const C=t[Symbol.iterator]===void 0?t[Symbol.asyncIterator]():t[Symbol.iterator](),k=D=>{b=!0,_=!0,u(D)};o&&(o.aborted&&k(getAbortedReason(o)),o.addEventListener("abort",()=>{k(getAbortedReason(o))}));const B=async()=>{if(_)return;const D=await C.next(),q=A;if(A++,D.done){if(w=!0,E===0&&!_){if(!a&&m.length>0){k(new AggregateError$1(m));return}if(_=!0,y.size===0){l(d);return}const j=[];for(const[J,Y]of d.entries())y.get(J)!==pMapSkip&&j.push(Y);l(j)}return}E++,(async()=>{try{const j=await D.value;if(_)return;const J=await e(j,q);J===pMapSkip&&y.set(q,J),d[q]=J,E--,await B()}catch(j){if(a)k(j);else{m.push(j),E--;try{await B()}catch(J){k(J)}}}})()};(async()=>{for(let D=0;D<n;D++){try{await B()}catch(q){k(q);break}if(w||b)break}})()})}const pMapSkip=Symbol("skip");class GSet{constructor(e){}append(e){}merge(e){}get(e){}has(e){}get values(){}get length(){}}class LamportClock{constructor(e,n){this.id=e,this.time=n||0}tick(){return new LamportClock(this.id,++this.time)}merge(e){return this.time=Math.max(this.time,e.time),new LamportClock(this.id,this.time)}clone(){return new LamportClock(this.id,this.time)}static compare(e,n){const a=e.time-n.time;return a===0&&e.id!==n.id?e.id<n.id?-1:1:a}}var encode_1$6=encode$t,MSB$5=128,REST$5=127,MSBALL$4=~REST$5,INT$4=Math.pow(2,31);function encode$t(t,e,n){e=e||[],n=n||0;for(var a=n;t>=INT$4;)e[n++]=t&255|MSB$5,t/=128;for(;t&MSBALL$4;)e[n++]=t&255|MSB$5,t>>>=7;return e[n]=t|0,encode$t.bytes=n-a+1,e}var decode$u=read$8,MSB$1$4=128,REST$1$4=127;function read$8(t,a){var n=0,a=a||0,o=0,l=a,u,d=t.length;do{if(l>=d)throw read$8.bytes=0,new RangeError("Could not decode varint");u=t[l++],n+=o<28?(u&REST$1$4)<<o:(u&REST$1$4)*Math.pow(2,o),o+=7}while(u>=MSB$1$4);return read$8.bytes=l-a,n}var N1$4=Math.pow(2,7),N2$4=Math.pow(2,14),N3$4=Math.pow(2,21),N4$4=Math.pow(2,28),N5$4=Math.pow(2,35),N6$4=Math.pow(2,42),N7$4=Math.pow(2,49),N8$4=Math.pow(2,56),N9$4=Math.pow(2,63),length$4=function(t){return t<N1$4?1:t<N2$4?2:t<N3$4?3:t<N4$4?4:t<N5$4?5:t<N6$4?6:t<N7$4?7:t<N8$4?8:t<N9$4?9:10},varint$4={encode:encode_1$6,decode:decode$u,encodingLength:length$4},_brrp_varint$3=varint$4;const decode$t=(t,e=0)=>[_brrp_varint$3.decode(t,e),_brrp_varint$3.decode.bytes],encodeTo$3=(t,e,n=0)=>(_brrp_varint$3.encode(t,e,n),e),encodingLength$3=t=>_brrp_varint$3.encodingLength(t),equals$6=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},coerce$5=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},create$6=(t,e)=>{const n=e.byteLength,a=encodingLength$3(t),o=a+encodingLength$3(n),l=new Uint8Array(o+n);return encodeTo$3(t,l,0),encodeTo$3(n,l,a),l.set(e,o),new Digest$3(t,n,e,l)},decode$s=t=>{const e=coerce$5(t),[n,a]=decode$t(e),[o,l]=decode$t(e.subarray(a)),u=e.subarray(a+l);if(u.byteLength!==o)throw new Error("Incorrect length");return new Digest$3(n,o,u,e)},equals$5=(t,e)=>{if(t===e)return!0;{const n=e;return t.code===n.code&&t.size===n.size&&n.bytes instanceof Uint8Array&&equals$6(t.bytes,n.bytes)}};let Digest$3=class{constructor(e,n,a,o){this.code=e,this.size=n,this.digest=a,this.bytes=o}};function base$6(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var l=t.charAt(o),u=l.charCodeAt(0);if(n[u]!==255)throw new TypeError(l+" is ambiguous");n[u]=o}var d=t.length,m=t.charAt(0),y=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function _(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var C=0,k=0,B=0,D=A.length;B!==D&&A[B]===0;)B++,C++;for(var q=(D-B)*b+1>>>0,j=new Uint8Array(q);B!==D;){for(var J=A[B],Y=0,L=q-1;(J!==0||Y<k)&&L!==-1;L--,Y++)J+=256*j[L]>>>0,j[L]=J%d>>>0,J=J/d>>>0;if(J!==0)throw new Error("Non-zero carry");k=Y,B++}for(var Z=q-k;Z!==q&&j[Z]===0;)Z++;for(var Q=m.repeat(C);Z<q;++Z)Q+=t.charAt(j[Z]);return Q}function w(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var C=0;if(A[C]!==" "){for(var k=0,B=0;A[C]===m;)k++,C++;for(var D=(A.length-C)*y+1>>>0,q=new Uint8Array(D);A[C];){var j=n[A.charCodeAt(C)];if(j===255)return;for(var J=0,Y=D-1;(j!==0||J<B)&&Y!==-1;Y--,J++)j+=d*q[Y]>>>0,q[Y]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");B=J,C++}if(A[C]!==" "){for(var L=D-B;L!==D&&q[L]===0;)L++;for(var Z=new Uint8Array(k+(D-L)),Q=k;L!==D;)Z[Q++]=q[L++];return Z}}}function E(A){var C=w(A);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:w,decode:E}}var src$9=base$6,_brrp__multiformats_scope_baseX$5=src$9;let Encoder$6=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$6=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$5(this,e)}},ComposedDecoder$5=class{constructor(e){this.decoders=e}or(e){return or$5(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$5=(t,e)=>new ComposedDecoder$5({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$6=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$6(e,n,a),this.decoder=new Decoder$6(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$9=({name:t,prefix:e,encode:n,decode:a})=>new Codec$6(t,e,n,a),baseX$5=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$5(n,e);return from$9({prefix:t,name:e,encode:a,decode:l=>coerce$5(o(l))})},decode$r=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let l=t.length;for(;t[l-1]==="=";)--l;const u=new Uint8Array(l*n/8|0);let d=0,m=0,y=0;for(let b=0;b<l;++b){const _=o[t[b]];if(_===void 0)throw new SyntaxError(`Non-${a} character`);m=m<<n|_,d+=n,d>=8&&(d-=8,u[y++]=255&m>>d)}if(d>=n||255&m<<8-d)throw new SyntaxError("Unexpected end of data");return u},encode$s=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let l="",u=0,d=0;for(let m=0;m<t.length;++m)for(d=d<<8|t[m],u+=8;u>n;)u-=n,l+=e[o&d>>u];if(u&&(l+=e[o&d<<n-u]),a)for(;l.length*n&7;)l+="=";return l},rfc4648$5=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$9({prefix:e,name:t,encode(o){return encode$s(o,a,n)},decode(o){return decode$r(o,a,n,t)}}),base58btc$5=baseX$5({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$5({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32$7=rfc4648$5({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648$5({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648$5({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648$5({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648$5({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648$5({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648$5({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648$5({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648$5({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const format$5=(t,e)=>{const{bytes:n,version:a}=t;switch(a){case 0:return toStringV0$2(n,baseCache$1(t),e||base58btc$5.encoder);default:return toStringV1$2(n,baseCache$1(t),e||base32$7.encoder)}},cache$3=new WeakMap,baseCache$1=t=>{const e=cache$3.get(t);if(e==null){const n=new Map;return cache$3.set(t,n),n}return e};let CID$2=class{constructor(e,n,a,o){this.code=n,this.version=e,this.multihash=a,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:n}=this;if(e!==DAG_PB_CODE$2)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==SHA_256_CODE$2)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$2.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:n}=this.multihash,a=create$6(e,n);return CID$2.createV1(this.code,a)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID$2.equals(this,e)}static equals(e,n){const a=n;return a&&e.code===a.code&&e.version===a.version&&equals$5(e.multihash,a.multihash)}toString(e){return format$5(this,e)}toJSON(){return{"/":format$5(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const n=e;if(n instanceof CID$2)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:a,code:o,multihash:l,bytes:u}=n;return new CID$2(a,o,l,u||encodeCID$2(a,o,l.bytes))}else if(n[cidSymbol$2]===!0){const{version:a,multihash:o,code:l}=n,u=decode$s(o);return CID$2.create(a,l,u)}else return null}static create(e,n,a){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(a.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(n!==DAG_PB_CODE$2)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$2}) block encoding`);return new CID$2(e,n,a,a.bytes)}case 1:{const o=encodeCID$2(e,n,a.bytes);return new CID$2(e,n,a,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$2.create(0,DAG_PB_CODE$2,e)}static createV1(e,n){return CID$2.create(1,e,n)}static decode(e){const[n,a]=CID$2.decodeFirst(e);if(a.length)throw new Error("Incorrect length");return n}static decodeFirst(e){const n=CID$2.inspectBytes(e),a=n.size-n.multihashSize,o=coerce$5(e.subarray(a,a+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const l=o.subarray(n.multihashSize-n.digestSize),u=new Digest$3(n.multihashCode,n.digestSize,l,o);return[n.version===0?CID$2.createV0(u):CID$2.createV1(n.codec,u),e.subarray(n.size)]}static inspectBytes(e){let n=0;const a=()=>{const[_,w]=decode$t(e.subarray(n));return n+=w,_};let o=a(),l=DAG_PB_CODE$2;if(o===18?(o=0,n=0):l=a(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const u=n,d=a(),m=a(),y=n+m,b=y-u;return{version:o,codec:l,multihashCode:d,digestSize:m,multihashSize:b,size:y}}static parse(e,n){const[a,o]=parseCIDtoBytes$2(e,n),l=CID$2.decode(o);if(l.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache$1(l).set(a,e),l}};const parseCIDtoBytes$2=(t,e)=>{switch(t[0]){case"Q":{const n=e||base58btc$5;return[base58btc$5.prefix,n.decode(`${base58btc$5.prefix}${t}`)]}case base58btc$5.prefix:{const n=e||base58btc$5;return[base58btc$5.prefix,n.decode(t)]}case base32$7.prefix:{const n=e||base32$7;return[base32$7.prefix,n.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0$2=(t,e,n)=>{const{prefix:a}=n;if(a!==base58btc$5.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=e.get(a);if(o==null){const l=n.encode(t).slice(1);return e.set(a,l),l}else return o},toStringV1$2=(t,e,n)=>{const{prefix:a}=n,o=e.get(a);if(o==null){const l=n.encode(t);return e.set(a,l),l}else return o},DAG_PB_CODE$2=112,SHA_256_CODE$2=18,encodeCID$2=(t,e,n)=>{const a=encodingLength$3(t),o=a+encodingLength$3(e),l=new Uint8Array(o+n.byteLength);return encodeTo$3(t,l,0),encodeTo$3(e,l,a),l.set(n,o),l},cidSymbol$2=Symbol.for("@ipld/js-cid/CID"),from$8=({name:t,code:e,encode:n})=>new Hasher$2(t,e,n);let Hasher$2=class{constructor(e,n,a){this.name=e,this.code=n,this.encode=a}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?create$6(this.code,n):n.then(a=>create$6(this.code,a))}else throw Error("Unknown type, must be binary type")}};function readonly$2({enumerable:t=!0,configurable:e=!1}={}){return{enumerable:t,configurable:e,writable:!1}}function*linksWithin(t,e){if(e!=null&&typeof e=="object")if(Array.isArray(e))for(const[n,a]of e.entries()){const o=[...t,n],l=CID$2.asCID(a);l?yield[o.join("/"),l]:typeof a=="object"&&(yield*links$1(a,o))}else{const n=CID$2.asCID(e);n?yield[t.join("/"),n]:yield*links$1(e,t)}}function*links$1(t,e){if(t==null||t instanceof Uint8Array)return;const n=CID$2.asCID(t);n&&(yield[e.join("/"),n]);for(const[a,o]of Object.entries(t)){const l=[...e,a];yield*linksWithin(l,o)}}function*treeWithin(t,e){if(Array.isArray(e))for(const[n,a]of e.entries()){const o=[...t,n];yield o.join("/"),typeof a=="object"&&!CID$2.asCID(a)&&(yield*tree$1(a,o))}else yield*tree$1(e,t)}function*tree$1(t,e){if(!(t==null||typeof t!="object"))for(const[n,a]of Object.entries(t)){const o=[...e,n];yield o.join("/"),a!=null&&!(a instanceof Uint8Array)&&typeof a=="object"&&!CID$2.asCID(a)&&(yield*treeWithin(o,a))}}function get$1(t,e){let n=t;for(const[a,o]of e.entries()){if(n=n[o],n==null)throw new Error(`Object has no property at ${e.slice(0,a+1).map(u=>`[${JSON.stringify(u)}]`).join("")}`);const l=CID$2.asCID(n);if(l)return{value:l,remaining:e.slice(a+1).join("/")}}return{value:n}}let Block$1=class{constructor({cid:e,bytes:n,value:a}){if(!e||!n||typeof a>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=n,this.value=a,this.asBlock=this,Object.defineProperties(this,{cid:readonly$2(),bytes:readonly$2(),value:readonly$2(),asBlock:readonly$2()})}links(){return links$1(this.value,[])}tree(){return tree$1(this.value,[])}get(e="/"){return get$1(this.value,e.split("/").filter(Boolean))}};async function encode$r({value:t,codec:e,hasher:n}){if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!n)throw new Error("Missing required argument: codec or hasher");const a=e.encode(t),o=await n.digest(a),l=CID$2.create(1,e.code,o);return new Block$1({value:t,bytes:a,cid:l})}async function decode$q({bytes:t,codec:e,hasher:n}){if(!t)throw new Error('Missing required argument "bytes"');if(!e||!n)throw new Error("Missing required argument: codec or hasher");const a=e.decode(t),o=await n.digest(t),l=CID$2.create(1,e.code,o);return new Block$1({value:a,bytes:t,cid:l})}const textDecoder$2=new TextDecoder;function decodeVarint(t,e){let n=0;for(let a=0;;a+=7){if(a>=64)throw new Error("protobuf: varint overflow");if(e>=t.length)throw new Error("protobuf: unexpected end of data");const o=t[e++];if(n+=a<28?(o&127)<<a:(o&127)*2**a,o<128)break}return[n,e]}function decodeBytes(t,e){let n;[n,e]=decodeVarint(t,e);const a=e+n;if(n<0||a<0)throw new Error("protobuf: invalid length");if(a>t.length)throw new Error("protobuf: unexpected end of data");return[t.subarray(e,a),a]}function decodeKey(t,e){let n;return[n,e]=decodeVarint(t,e),[n&7,n>>3,e]}function decodeLink(t){const e={},n=t.length;let a=0;for(;a<n;){let o,l;if([o,l,a]=decodeKey(t,a),l===1){if(e.Hash)throw new Error("protobuf: (PBLink) duplicate Hash section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Hash`);if(e.Name!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Name before Hash");if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[e.Hash,a]=decodeBytes(t,a)}else if(l===2){if(e.Name!==void 0)throw new Error("protobuf: (PBLink) duplicate Name section");if(o!==2)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Name`);if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) invalid order, found Tsize before Name");let u;[u,a]=decodeBytes(t,a),e.Name=textDecoder$2.decode(u)}else if(l===3){if(e.Tsize!==void 0)throw new Error("protobuf: (PBLink) duplicate Tsize section");if(o!==0)throw new Error(`protobuf: (PBLink) wrong wireType (${o}) for Tsize`);[e.Tsize,a]=decodeVarint(t,a)}else throw new Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${l}`)}if(a>n)throw new Error("protobuf: (PBLink) unexpected end of data");return e}function decodeNode(t){const e=t.length;let n=0,a,o=!1,l;for(;n<e;){let d,m;if([d,m,n]=decodeKey(t,n),d!==2)throw new Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${d}`);if(m===1){if(l)throw new Error("protobuf: (PBNode) duplicate Data section");[l,n]=decodeBytes(t,n),a&&(o=!0)}else if(m===2){if(o)throw new Error("protobuf: (PBNode) duplicate Links section");a||(a=[]);let y;[y,n]=decodeBytes(t,n),a.push(decodeLink(y))}else throw new Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${m}`)}if(n>e)throw new Error("protobuf: (PBNode) unexpected end of data");const u={};return l&&(u.Data=l),u.Links=a||[],u}const textEncoder$4=new TextEncoder,maxInt32=2**32,maxUInt32=2**31;function encodeLink(t,e){let n=e.length;if(typeof t.Tsize=="number"){if(t.Tsize<0)throw new Error("Tsize cannot be negative");if(!Number.isSafeInteger(t.Tsize))throw new Error("Tsize too large for encoding");n=encodeVarint(e,n,t.Tsize)-1,e[n]=24}if(typeof t.Name=="string"){const a=textEncoder$4.encode(t.Name);n-=a.length,e.set(a,n),n=encodeVarint(e,n,a.length)-1,e[n]=18}return t.Hash&&(n-=t.Hash.length,e.set(t.Hash,n),n=encodeVarint(e,n,t.Hash.length)-1,e[n]=10),e.length-n}function encodeNode(t){const e=sizeNode(t),n=new Uint8Array(e);let a=e;if(t.Data&&(a-=t.Data.length,n.set(t.Data,a),a=encodeVarint(n,a,t.Data.length)-1,n[a]=10),t.Links)for(let o=t.Links.length-1;o>=0;o--){const l=encodeLink(t.Links[o],n.subarray(0,a));a-=l,a=encodeVarint(n,a,l)-1,n[a]=18}return n}function sizeLink(t){let e=0;if(t.Hash){const n=t.Hash.length;e+=1+n+sov(n)}if(typeof t.Name=="string"){const n=textEncoder$4.encode(t.Name).length;e+=1+n+sov(n)}return typeof t.Tsize=="number"&&(e+=1+sov(t.Tsize)),e}function sizeNode(t){let e=0;if(t.Data){const n=t.Data.length;e+=1+n+sov(n)}if(t.Links)for(const n of t.Links){const a=sizeLink(n);e+=1+a+sov(a)}return e}function encodeVarint(t,e,n){e-=sov(n);const a=e;for(;n>=maxUInt32;)t[e++]=n&127|128,n/=128;for(;n>=128;)t[e++]=n&127|128,n>>>=7;return t[e]=n,a}function sov(t){return t%2===0&&t++,Math.floor((len64(t)+6)/7)}function len64(t){let e=0;return t>=maxInt32&&(t=Math.floor(t/maxInt32),e=32),t>=1<<16&&(t>>>=16,e+=16),t>=1<<8&&(t>>>=8,e+=8),e+len8tab[t]}const len8tab=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],pbNodeProperties=["Data","Links"],pbLinkProperties=["Hash","Name","Tsize"],textEncoder$3=new TextEncoder;function linkComparator(t,e){if(t===e)return 0;const n=t.Name?textEncoder$3.encode(t.Name):[],a=e.Name?textEncoder$3.encode(e.Name):[];let o=n.length,l=a.length;for(let u=0,d=Math.min(o,l);u<d;++u)if(n[u]!==a[u]){o=n[u],l=a[u];break}return o<l?-1:l<o?1:0}function hasOnlyProperties(t,e){return!Object.keys(t).some(n=>!e.includes(n))}function asLink(t){if(typeof t.asCID=="object"){const n=CID$2.asCID(t);if(!n)throw new TypeError("Invalid DAG-PB form");return{Hash:n}}if(typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Hash){let n=CID$2.asCID(t.Hash);try{n||(typeof t.Hash=="string"?n=CID$2.parse(t.Hash):t.Hash instanceof Uint8Array&&(n=CID$2.decode(t.Hash)))}catch(a){throw new TypeError(`Invalid DAG-PB form: ${a.message}`)}n&&(e.Hash=n)}if(!e.Hash)throw new TypeError("Invalid DAG-PB form");return typeof t.Name=="string"&&(e.Name=t.Name),typeof t.Tsize=="number"&&(e.Tsize=t.Tsize),e}function prepare(t){if((t instanceof Uint8Array||typeof t=="string")&&(t={Data:t}),typeof t!="object"||Array.isArray(t))throw new TypeError("Invalid DAG-PB form");const e={};if(t.Data!==void 0)if(typeof t.Data=="string")e.Data=textEncoder$3.encode(t.Data);else if(t.Data instanceof Uint8Array)e.Data=t.Data;else throw new TypeError("Invalid DAG-PB form");if(t.Links!==void 0)if(Array.isArray(t.Links))e.Links=t.Links.map(asLink),e.Links.sort(linkComparator);else throw new TypeError("Invalid DAG-PB form");else e.Links=[];return e}function validate(t){if(!t||typeof t!="object"||Array.isArray(t)||t instanceof Uint8Array||t["/"]&&t["/"]===t.bytes)throw new TypeError("Invalid DAG-PB form");if(!hasOnlyProperties(t,pbNodeProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties)");if(t.Data!==void 0&&!(t.Data instanceof Uint8Array))throw new TypeError("Invalid DAG-PB form (Data must be bytes)");if(!Array.isArray(t.Links))throw new TypeError("Invalid DAG-PB form (Links must be a list)");for(let e=0;e<t.Links.length;e++){const n=t.Links[e];if(!n||typeof n!="object"||Array.isArray(n)||n instanceof Uint8Array||n["/"]&&n["/"]===n.bytes)throw new TypeError("Invalid DAG-PB form (bad link)");if(!hasOnlyProperties(n,pbLinkProperties))throw new TypeError("Invalid DAG-PB form (extraneous properties on link)");if(n.Hash===void 0)throw new TypeError("Invalid DAG-PB form (link must have a Hash)");if(n.Hash==null||!n.Hash["/"]||n.Hash["/"]!==n.Hash.bytes)throw new TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(n.Name!==void 0&&typeof n.Name!="string")throw new TypeError("Invalid DAG-PB form (link Name must be a string)");if(n.Tsize!==void 0){if(typeof n.Tsize!="number"||n.Tsize%1!==0)throw new TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(n.Tsize<0)throw new TypeError("Invalid DAG-PB form (link Tsize cannot be negative)")}if(e>0&&linkComparator(n,t.Links[e-1])===-1)throw new TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function createNode(t,e=[]){return prepare({Data:t,Links:e})}function createLink(t,e,n){return asLink({Hash:n,Name:t,Tsize:e})}const name$5="dag-pb",code$7=112;function encode$q(t){validate(t);const e={};return t.Links&&(e.Links=t.Links.map(n=>{const a={};return n.Hash&&(a.Hash=n.Hash.bytes),n.Name!==void 0&&(a.Name=n.Name),n.Tsize!==void 0&&(a.Tsize=n.Tsize),a})),t.Data&&(e.Data=t.Data),encodeNode(e)}function decode$p(t){const e=decodeNode(t),n={};return e.Data&&(n.Data=e.Data),e.Links&&(n.Links=e.Links.map(a=>{const o={};try{o.Hash=CID$2.decode(a.Hash)}catch{}if(!o.Hash)throw new Error("Invalid Hash field found in link, expected CID");return a.Name!==void 0&&(o.Name=a.Name),a.Tsize!==void 0&&(o.Tsize=a.Tsize),o})),n}const dagPb=Object.freeze(Object.defineProperty({__proto__:null,code:code$7,createLink,createNode,decode:decode$p,encode:encode$q,name:name$5,prepare,validate},Symbol.toStringTag,{value:"Module"})),typeofs=["string","number","bigint","symbol"],objectTypeNames=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function is$1(t){if(t===null)return"null";if(t===void 0)return"undefined";if(t===!0||t===!1)return"boolean";const e=typeof t;if(typeofs.includes(e))return e;if(e==="function")return"Function";if(Array.isArray(t))return"Array";if(isBuffer$2(t))return"Buffer";const n=getObjectType(t);return n||"Object"}function isBuffer$2(t){return t&&t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer.call(null,t)}function getObjectType(t){const e=Object.prototype.toString.call(t).slice(8,-1);if(objectTypeNames.includes(e))return e}class Type{constructor(e,n,a){this.major=e,this.majorEncoded=e<<5,this.name=n,this.terminal=a}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}Type.uint=new Type(0,"uint",!0);Type.negint=new Type(1,"negint",!0);Type.bytes=new Type(2,"bytes",!0);Type.string=new Type(3,"string",!0);Type.array=new Type(4,"array",!1);Type.map=new Type(5,"map",!1);Type.tag=new Type(6,"tag",!1);Type.float=new Type(7,"float",!0);Type.false=new Type(7,"false",!0);Type.true=new Type(7,"true",!0);Type.null=new Type(7,"null",!0);Type.undefined=new Type(7,"undefined",!0);Type.break=new Type(7,"break",!0);class Token{constructor(e,n,a){this.type=e,this.value=n,this.encodedLength=a,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}const useBuffer=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&typeof globalThis.Buffer.isBuffer=="function",textDecoder$1=new TextDecoder,textEncoder$2=new TextEncoder;function isBuffer$1(t){return useBuffer&&globalThis.Buffer.isBuffer(t)}function asU8A(t){return t instanceof Uint8Array?isBuffer$1(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t:Uint8Array.from(t)}const toString$a=useBuffer?(t,e,n)=>n-e>64?globalThis.Buffer.from(t.subarray(e,n)).toString("utf8"):utf8Slice(t,e,n):(t,e,n)=>n-e>64?textDecoder$1.decode(t.subarray(e,n)):utf8Slice(t,e,n),fromString$7=useBuffer?t=>t.length>64?globalThis.Buffer.from(t):utf8ToBytes(t):t=>t.length>64?textEncoder$2.encode(t):utf8ToBytes(t),fromArray=t=>Uint8Array.from(t),slice=useBuffer?(t,e,n)=>isBuffer$1(t)?new Uint8Array(t.subarray(e,n)):t.slice(e,n):(t,e,n)=>t.slice(e,n),concat$3=useBuffer?(t,e)=>(t=t.map(n=>n instanceof Uint8Array?n:globalThis.Buffer.from(n)),asU8A(globalThis.Buffer.concat(t,e))):(t,e)=>{const n=new Uint8Array(e);let a=0;for(let o of t)a+o.length>n.length&&(o=o.subarray(0,n.length-a)),n.set(o,a),a+=o.length;return n},alloc$1=useBuffer?t=>globalThis.Buffer.allocUnsafe(t):t=>new Uint8Array(t);function compare$3(t,e){if(isBuffer$1(t)&&isBuffer$1(e))return t.compare(e);for(let n=0;n<t.length;n++)if(t[n]!==e[n])return t[n]<e[n]?-1:1;return 0}function utf8ToBytes(t,e=1/0){let n;const a=t.length;let o=null;const l=[];for(let u=0;u<a;++u){if(n=t.charCodeAt(u),n>55295&&n<57344){if(!o){if(n>56319){(e-=3)>-1&&l.push(239,191,189);continue}else if(u+1===a){(e-=3)>-1&&l.push(239,191,189);continue}o=n;continue}if(n<56320){(e-=3)>-1&&l.push(239,191,189),o=n;continue}n=(o-55296<<10|n-56320)+65536}else o&&(e-=3)>-1&&l.push(239,191,189);if(o=null,n<128){if((e-=1)<0)break;l.push(n)}else if(n<2048){if((e-=2)<0)break;l.push(n>>6|192,n&63|128)}else if(n<65536){if((e-=3)<0)break;l.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((e-=4)<0)break;l.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return l}function utf8Slice(t,e,n){const a=[];for(;e<n;){const o=t[e];let l=null,u=o>239?4:o>223?3:o>191?2:1;if(e+u<=n){let d,m,y,b;switch(u){case 1:o<128&&(l=o);break;case 2:d=t[e+1],(d&192)===128&&(b=(o&31)<<6|d&63,b>127&&(l=b));break;case 3:d=t[e+1],m=t[e+2],(d&192)===128&&(m&192)===128&&(b=(o&15)<<12|(d&63)<<6|m&63,b>2047&&(b<55296||b>57343)&&(l=b));break;case 4:d=t[e+1],m=t[e+2],y=t[e+3],(d&192)===128&&(m&192)===128&&(y&192)===128&&(b=(o&15)<<18|(d&63)<<12|(m&63)<<6|y&63,b>65535&&b<1114112&&(l=b))}}l===null?(l=65533,u=1):l>65535&&(l-=65536,a.push(l>>>10&1023|55296),l=56320|l&1023),a.push(l),e+=u}return decodeCodePointsArray(a)}const MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(t){const e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);let n="",a=0;for(;a<e;)n+=String.fromCharCode.apply(String,t.slice(a,a+=MAX_ARGUMENTS_LENGTH));return n}const defaultChunkSize=256;class Bl{constructor(e=defaultChunkSize){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),this._initReuseChunk!==null&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let n=this.chunks[this.chunks.length-1];if(this.cursor+e.length<=this.maxCursor+1){const o=n.length-(this.maxCursor-this.cursor)-1;n.set(e,o)}else{if(n){const o=n.length-(this.maxCursor-this.cursor)-1;o<n.length&&(this.chunks[this.chunks.length-1]=n.subarray(0,o),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(n=alloc$1(this.chunkSize),this.chunks.push(n),this.maxCursor+=n.length,this._initReuseChunk===null&&(this._initReuseChunk=n),n.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let n;if(this.chunks.length===1){const a=this.chunks[0];e&&this.cursor>a.length/2?(n=this.cursor===a.length?a:a.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):n=slice(a,0,this.cursor)}else n=concat$3(this.chunks,this.cursor);return e&&this.reset(),n}}const decodeErrPrefix="CBOR decode error:",encodeErrPrefix="CBOR encode error:";function assertEnoughData(t,e,n){if(t.length-e<n)throw new Error(`${decodeErrPrefix} not enough data for type`)}const uintBoundaries=[24,256,65536,4294967296,BigInt("18446744073709551616")];function readUint8(t,e,n){assertEnoughData(t,e,1);const a=t[e];if(n.strict===!0&&a<uintBoundaries[0])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return a}function readUint16(t,e,n){assertEnoughData(t,e,2);const a=t[e]<<8|t[e+1];if(n.strict===!0&&a<uintBoundaries[1])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return a}function readUint32(t,e,n){assertEnoughData(t,e,4);const a=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3];if(n.strict===!0&&a<uintBoundaries[2])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);return a}function readUint64(t,e,n){assertEnoughData(t,e,8);const a=t[e]*16777216+(t[e+1]<<16)+(t[e+2]<<8)+t[e+3],o=t[e+4]*16777216+(t[e+5]<<16)+(t[e+6]<<8)+t[e+7],l=(BigInt(a)<<BigInt(32))+BigInt(o);if(n.strict===!0&&l<uintBoundaries[3])throw new Error(`${decodeErrPrefix} integer encoded in more bytes than necessary (strict decode)`);if(l<=Number.MAX_SAFE_INTEGER)return Number(l);if(n.allowBigInt===!0)return l;throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`)}function decodeUint8(t,e,n,a){return new Token(Type.uint,readUint8(t,e+1,a),2)}function decodeUint16(t,e,n,a){return new Token(Type.uint,readUint16(t,e+1,a),3)}function decodeUint32(t,e,n,a){return new Token(Type.uint,readUint32(t,e+1,a),5)}function decodeUint64(t,e,n,a){return new Token(Type.uint,readUint64(t,e+1,a),9)}function encodeUint(t,e){return encodeUintValue(t,0,e.value)}function encodeUintValue(t,e,n){if(n<uintBoundaries[0]){const a=Number(n);t.push([e|a])}else if(n<uintBoundaries[1]){const a=Number(n);t.push([e|24,a])}else if(n<uintBoundaries[2]){const a=Number(n);t.push([e|25,a>>>8,a&255])}else if(n<uintBoundaries[3]){const a=Number(n);t.push([e|26,a>>>24&255,a>>>16&255,a>>>8&255,a&255])}else{const a=BigInt(n);if(a<uintBoundaries[4]){const o=[e|27,0,0,0,0,0,0,0];let l=Number(a&BigInt(4294967295)),u=Number(a>>BigInt(32)&BigInt(4294967295));o[8]=l&255,l=l>>8,o[7]=l&255,l=l>>8,o[6]=l&255,l=l>>8,o[5]=l&255,o[4]=u&255,u=u>>8,o[3]=u&255,u=u>>8,o[2]=u&255,u=u>>8,o[1]=u&255,t.push(o)}else throw new Error(`${decodeErrPrefix} encountered BigInt larger than allowable range`)}}encodeUint.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};encodeUintValue.encodedSize=function(e){return e<uintBoundaries[0]?1:e<uintBoundaries[1]?2:e<uintBoundaries[2]?3:e<uintBoundaries[3]?5:9};encodeUint.compareTokens=function(e,n){return e.value<n.value?-1:e.value>n.value?1:0};function decodeNegint8(t,e,n,a){return new Token(Type.negint,-1-readUint8(t,e+1,a),2)}function decodeNegint16(t,e,n,a){return new Token(Type.negint,-1-readUint16(t,e+1,a),3)}function decodeNegint32(t,e,n,a){return new Token(Type.negint,-1-readUint32(t,e+1,a),5)}const neg1b=BigInt(-1),pos1b=BigInt(1);function decodeNegint64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o!="bigint"){const l=-1-o;if(l>=Number.MIN_SAFE_INTEGER)return new Token(Type.negint,l,9)}if(a.allowBigInt!==!0)throw new Error(`${decodeErrPrefix} integers outside of the safe integer range are not supported`);return new Token(Type.negint,neg1b-BigInt(o),9)}function encodeNegint(t,e){const n=e.value,a=typeof n=="bigint"?n*neg1b-pos1b:n*-1-1;encodeUintValue(t,e.type.majorEncoded,a)}encodeNegint.encodedSize=function(e){const n=e.value,a=typeof n=="bigint"?n*neg1b-pos1b:n*-1-1;return a<uintBoundaries[0]?1:a<uintBoundaries[1]?2:a<uintBoundaries[2]?3:a<uintBoundaries[3]?5:9};encodeNegint.compareTokens=function(e,n){return e.value<n.value?1:e.value>n.value?-1:0};function toToken$3(t,e,n,a){assertEnoughData(t,e,n+a);const o=slice(t,e+n,e+n+a);return new Token(Type.bytes,o,n+a)}function decodeBytesCompact(t,e,n,a){return toToken$3(t,e,1,n)}function decodeBytes8(t,e,n,a){return toToken$3(t,e,2,readUint8(t,e+1,a))}function decodeBytes16(t,e,n,a){return toToken$3(t,e,3,readUint16(t,e+1,a))}function decodeBytes32(t,e,n,a){return toToken$3(t,e,5,readUint32(t,e+1,a))}function decodeBytes64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer bytes lengths not supported`);return toToken$3(t,e,9,o)}function tokenBytes(t){return t.encodedBytes===void 0&&(t.encodedBytes=t.type===Type.string?fromString$7(t.value):t.value),t.encodedBytes}function encodeBytes(t,e){const n=tokenBytes(e);encodeUintValue(t,e.type.majorEncoded,n.length),t.push(n)}encodeBytes.encodedSize=function(e){const n=tokenBytes(e);return encodeUintValue.encodedSize(n.length)+n.length};encodeBytes.compareTokens=function(e,n){return compareBytes(tokenBytes(e),tokenBytes(n))};function compareBytes(t,e){return t.length<e.length?-1:t.length>e.length?1:compare$3(t,e)}function toToken$2(t,e,n,a,o){const l=n+a;assertEnoughData(t,e,l);const u=new Token(Type.string,toString$a(t,e+n,e+l),l);return o.retainStringBytes===!0&&(u.byteValue=slice(t,e+n,e+l)),u}function decodeStringCompact(t,e,n,a){return toToken$2(t,e,1,n,a)}function decodeString8(t,e,n,a){return toToken$2(t,e,2,readUint8(t,e+1,a),a)}function decodeString16(t,e,n,a){return toToken$2(t,e,3,readUint16(t,e+1,a),a)}function decodeString32(t,e,n,a){return toToken$2(t,e,5,readUint32(t,e+1,a),a)}function decodeString64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer string lengths not supported`);return toToken$2(t,e,9,o,a)}const encodeString=encodeBytes;function toToken$1(t,e,n,a){return new Token(Type.array,a,n)}function decodeArrayCompact(t,e,n,a){return toToken$1(t,e,1,n)}function decodeArray8(t,e,n,a){return toToken$1(t,e,2,readUint8(t,e+1,a))}function decodeArray16(t,e,n,a){return toToken$1(t,e,3,readUint16(t,e+1,a))}function decodeArray32(t,e,n,a){return toToken$1(t,e,5,readUint32(t,e+1,a))}function decodeArray64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer array lengths not supported`);return toToken$1(t,e,9,o)}function decodeArrayIndefinite(t,e,n,a){if(a.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken$1(t,e,1,1/0)}function encodeArray(t,e){encodeUintValue(t,Type.array.majorEncoded,e.value)}encodeArray.compareTokens=encodeUint.compareTokens;encodeArray.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function toToken(t,e,n,a){return new Token(Type.map,a,n)}function decodeMapCompact(t,e,n,a){return toToken(t,e,1,n)}function decodeMap8(t,e,n,a){return toToken(t,e,2,readUint8(t,e+1,a))}function decodeMap16(t,e,n,a){return toToken(t,e,3,readUint16(t,e+1,a))}function decodeMap32(t,e,n,a){return toToken(t,e,5,readUint32(t,e+1,a))}function decodeMap64(t,e,n,a){const o=readUint64(t,e+1,a);if(typeof o=="bigint")throw new Error(`${decodeErrPrefix} 64-bit integer map lengths not supported`);return toToken(t,e,9,o)}function decodeMapIndefinite(t,e,n,a){if(a.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return toToken(t,e,1,1/0)}function encodeMap(t,e){encodeUintValue(t,Type.map.majorEncoded,e.value)}encodeMap.compareTokens=encodeUint.compareTokens;encodeMap.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};function decodeTagCompact(t,e,n,a){return new Token(Type.tag,n,1)}function decodeTag8(t,e,n,a){return new Token(Type.tag,readUint8(t,e+1,a),2)}function decodeTag16(t,e,n,a){return new Token(Type.tag,readUint16(t,e+1,a),3)}function decodeTag32(t,e,n,a){return new Token(Type.tag,readUint32(t,e+1,a),5)}function decodeTag64(t,e,n,a){return new Token(Type.tag,readUint64(t,e+1,a),9)}function encodeTag(t,e){encodeUintValue(t,Type.tag.majorEncoded,e.value)}encodeTag.compareTokens=encodeUint.compareTokens;encodeTag.encodedSize=function(e){return encodeUintValue.encodedSize(e.value)};const MINOR_FALSE=20,MINOR_TRUE=21,MINOR_NULL=22,MINOR_UNDEFINED=23;function decodeUndefined(t,e,n,a){if(a.allowUndefined===!1)throw new Error(`${decodeErrPrefix} undefined values are not supported`);return a.coerceUndefinedToNull===!0?new Token(Type.null,null,1):new Token(Type.undefined,void 0,1)}function decodeBreak(t,e,n,a){if(a.allowIndefinite===!1)throw new Error(`${decodeErrPrefix} indefinite length items not allowed`);return new Token(Type.break,void 0,1)}function createToken(t,e,n){if(n){if(n.allowNaN===!1&&Number.isNaN(t))throw new Error(`${decodeErrPrefix} NaN values are not supported`);if(n.allowInfinity===!1&&(t===1/0||t===-1/0))throw new Error(`${decodeErrPrefix} Infinity values are not supported`)}return new Token(Type.float,t,e)}function decodeFloat16(t,e,n,a){return createToken(readFloat16(t,e+1),3,a)}function decodeFloat32(t,e,n,a){return createToken(readFloat32(t,e+1),5,a)}function decodeFloat64(t,e,n,a){return createToken(readFloat64(t,e+1),9,a)}function encodeFloat(t,e,n){const a=e.value;if(a===!1)t.push([Type.float.majorEncoded|MINOR_FALSE]);else if(a===!0)t.push([Type.float.majorEncoded|MINOR_TRUE]);else if(a===null)t.push([Type.float.majorEncoded|MINOR_NULL]);else if(a===void 0)t.push([Type.float.majorEncoded|MINOR_UNDEFINED]);else{let o,l=!1;(!n||n.float64!==!0)&&(encodeFloat16(a),o=readFloat16(ui8a,1),a===o||Number.isNaN(a)?(ui8a[0]=249,t.push(ui8a.slice(0,3)),l=!0):(encodeFloat32(a),o=readFloat32(ui8a,1),a===o&&(ui8a[0]=250,t.push(ui8a.slice(0,5)),l=!0))),l||(encodeFloat64(a),o=readFloat64(ui8a,1),ui8a[0]=251,t.push(ui8a.slice(0,9)))}}encodeFloat.encodedSize=function(e,n){const a=e.value;if(a===!1||a===!0||a===null||a===void 0)return 1;if(!n||n.float64!==!0){encodeFloat16(a);let o=readFloat16(ui8a,1);if(a===o||Number.isNaN(a))return 3;if(encodeFloat32(a),o=readFloat32(ui8a,1),a===o)return 5}return 9};const buffer=new ArrayBuffer(9),dataView=new DataView(buffer,1),ui8a=new Uint8Array(buffer,0);function encodeFloat16(t){if(t===1/0)dataView.setUint16(0,31744,!1);else if(t===-1/0)dataView.setUint16(0,64512,!1);else if(Number.isNaN(t))dataView.setUint16(0,32256,!1);else{dataView.setFloat32(0,t);const e=dataView.getUint32(0),n=(e&2139095040)>>23,a=e&8388607;if(n===255)dataView.setUint16(0,31744,!1);else if(n===0)dataView.setUint16(0,(t&2147483648)>>16|a>>13,!1);else{const o=n-127;o<-24?dataView.setUint16(0,0):o<-14?dataView.setUint16(0,(e&2147483648)>>16|1<<24+o,!1):dataView.setUint16(0,(e&2147483648)>>16|o+15<<10|a>>13,!1)}}}function readFloat16(t,e){if(t.length-e<2)throw new Error(`${decodeErrPrefix} not enough data for float16`);const n=(t[e]<<8)+t[e+1];if(n===31744)return 1/0;if(n===64512)return-1/0;if(n===32256)return NaN;const a=n>>10&31,o=n&1023;let l;return a===0?l=o*2**-24:a!==31?l=(o+1024)*2**(a-25):l=o===0?1/0:NaN,n&32768?-l:l}function encodeFloat32(t){dataView.setFloat32(0,t,!1)}function readFloat32(t,e){if(t.length-e<4)throw new Error(`${decodeErrPrefix} not enough data for float32`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,4).getFloat32(0,!1)}function encodeFloat64(t){dataView.setFloat64(0,t,!1)}function readFloat64(t,e){if(t.length-e<8)throw new Error(`${decodeErrPrefix} not enough data for float64`);const n=(t.byteOffset||0)+e;return new DataView(t.buffer,n,8).getFloat64(0,!1)}encodeFloat.compareTokens=encodeUint.compareTokens;function invalidMinor(t,e,n){throw new Error(`${decodeErrPrefix} encountered invalid minor (${n}) for major ${t[e]>>>5}`)}function errorer(t){return()=>{throw new Error(`${decodeErrPrefix} ${t}`)}}const jump=[];for(let t=0;t<=23;t++)jump[t]=invalidMinor;jump[24]=decodeUint8;jump[25]=decodeUint16;jump[26]=decodeUint32;jump[27]=decodeUint64;jump[28]=invalidMinor;jump[29]=invalidMinor;jump[30]=invalidMinor;jump[31]=invalidMinor;for(let t=32;t<=55;t++)jump[t]=invalidMinor;jump[56]=decodeNegint8;jump[57]=decodeNegint16;jump[58]=decodeNegint32;jump[59]=decodeNegint64;jump[60]=invalidMinor;jump[61]=invalidMinor;jump[62]=invalidMinor;jump[63]=invalidMinor;for(let t=64;t<=87;t++)jump[t]=decodeBytesCompact;jump[88]=decodeBytes8;jump[89]=decodeBytes16;jump[90]=decodeBytes32;jump[91]=decodeBytes64;jump[92]=invalidMinor;jump[93]=invalidMinor;jump[94]=invalidMinor;jump[95]=errorer("indefinite length bytes/strings are not supported");for(let t=96;t<=119;t++)jump[t]=decodeStringCompact;jump[120]=decodeString8;jump[121]=decodeString16;jump[122]=decodeString32;jump[123]=decodeString64;jump[124]=invalidMinor;jump[125]=invalidMinor;jump[126]=invalidMinor;jump[127]=errorer("indefinite length bytes/strings are not supported");for(let t=128;t<=151;t++)jump[t]=decodeArrayCompact;jump[152]=decodeArray8;jump[153]=decodeArray16;jump[154]=decodeArray32;jump[155]=decodeArray64;jump[156]=invalidMinor;jump[157]=invalidMinor;jump[158]=invalidMinor;jump[159]=decodeArrayIndefinite;for(let t=160;t<=183;t++)jump[t]=decodeMapCompact;jump[184]=decodeMap8;jump[185]=decodeMap16;jump[186]=decodeMap32;jump[187]=decodeMap64;jump[188]=invalidMinor;jump[189]=invalidMinor;jump[190]=invalidMinor;jump[191]=decodeMapIndefinite;for(let t=192;t<=215;t++)jump[t]=decodeTagCompact;jump[216]=decodeTag8;jump[217]=decodeTag16;jump[218]=decodeTag32;jump[219]=decodeTag64;jump[220]=invalidMinor;jump[221]=invalidMinor;jump[222]=invalidMinor;jump[223]=invalidMinor;for(let t=224;t<=243;t++)jump[t]=errorer("simple values are not supported");jump[244]=invalidMinor;jump[245]=invalidMinor;jump[246]=invalidMinor;jump[247]=decodeUndefined;jump[248]=errorer("simple values are not supported");jump[249]=decodeFloat16;jump[250]=decodeFloat32;jump[251]=decodeFloat64;jump[252]=invalidMinor;jump[253]=invalidMinor;jump[254]=invalidMinor;jump[255]=decodeBreak;const quick=[];for(let t=0;t<24;t++)quick[t]=new Token(Type.uint,t,1);for(let t=-1;t>=-24;t--)quick[31-t]=new Token(Type.negint,t,1);quick[64]=new Token(Type.bytes,new Uint8Array(0),1);quick[96]=new Token(Type.string,"",1);quick[128]=new Token(Type.array,0,1);quick[160]=new Token(Type.map,0,1);quick[244]=new Token(Type.false,!1,1);quick[245]=new Token(Type.true,!0,1);quick[246]=new Token(Type.null,null,1);function quickEncodeToken(t){switch(t.type){case Type.false:return fromArray([244]);case Type.true:return fromArray([245]);case Type.null:return fromArray([246]);case Type.bytes:return t.value.length?void 0:fromArray([64]);case Type.string:return t.value===""?fromArray([96]):void 0;case Type.array:return t.value===0?fromArray([128]):void 0;case Type.map:return t.value===0?fromArray([160]):void 0;case Type.uint:return t.value<24?fromArray([Number(t.value)]):void 0;case Type.negint:if(t.value>=-24)return fromArray([31-Number(t.value)])}}const defaultEncodeOptions={float64:!1,mapSorter,quickEncodeToken};function makeCborEncoders(){const t=[];return t[Type.uint.major]=encodeUint,t[Type.negint.major]=encodeNegint,t[Type.bytes.major]=encodeBytes,t[Type.string.major]=encodeString,t[Type.array.major]=encodeArray,t[Type.map.major]=encodeMap,t[Type.tag.major]=encodeTag,t[Type.float.major]=encodeFloat,t}const cborEncoders=makeCborEncoders(),buf=new Bl;class Ref{constructor(e,n){this.obj=e,this.parent=n}includes(e){let n=this;do if(n.obj===e)return!0;while(n=n.parent);return!1}static createCheck(e,n){if(e&&e.includes(n))throw new Error(`${encodeErrPrefix} object contains circular references`);return new Ref(n,e)}}const simpleTokens={null:new Token(Type.null,null),undefined:new Token(Type.undefined,void 0),true:new Token(Type.true,!0),false:new Token(Type.false,!1),emptyArray:new Token(Type.array,0),emptyMap:new Token(Type.map,0)},typeEncoders={number(t,e,n,a){return!Number.isInteger(t)||!Number.isSafeInteger(t)?new Token(Type.float,t):t>=0?new Token(Type.uint,t):new Token(Type.negint,t)},bigint(t,e,n,a){return t>=BigInt(0)?new Token(Type.uint,t):new Token(Type.negint,t)},Uint8Array(t,e,n,a){return new Token(Type.bytes,t)},string(t,e,n,a){return new Token(Type.string,t)},boolean(t,e,n,a){return t?simpleTokens.true:simpleTokens.false},null(t,e,n,a){return simpleTokens.null},undefined(t,e,n,a){return simpleTokens.undefined},ArrayBuffer(t,e,n,a){return new Token(Type.bytes,new Uint8Array(t))},DataView(t,e,n,a){return new Token(Type.bytes,new Uint8Array(t.buffer,t.byteOffset,t.byteLength))},Array(t,e,n,a){if(!t.length)return n.addBreakTokens===!0?[simpleTokens.emptyArray,new Token(Type.break)]:simpleTokens.emptyArray;a=Ref.createCheck(a,t);const o=[];let l=0;for(const u of t)o[l++]=objectToTokens(u,n,a);return n.addBreakTokens?[new Token(Type.array,t.length),o,new Token(Type.break)]:[new Token(Type.array,t.length),o]},Object(t,e,n,a){const o=e!=="Object",l=o?t.keys():Object.keys(t),u=o?t.size:l.length;if(!u)return n.addBreakTokens===!0?[simpleTokens.emptyMap,new Token(Type.break)]:simpleTokens.emptyMap;a=Ref.createCheck(a,t);const d=[];let m=0;for(const y of l)d[m++]=[objectToTokens(y,n,a),objectToTokens(o?t.get(y):t[y],n,a)];return sortMapEntries(d,n),n.addBreakTokens?[new Token(Type.map,u),d,new Token(Type.break)]:[new Token(Type.map,u),d]}};typeEncoders.Map=typeEncoders.Object;typeEncoders.Buffer=typeEncoders.Uint8Array;for(const t of"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" "))typeEncoders[`${t}Array`]=typeEncoders.DataView;function objectToTokens(t,e={},n){const a=is$1(t),o=e&&e.typeEncoders&&e.typeEncoders[a]||typeEncoders[a];if(typeof o=="function"){const u=o(t,a,e,n);if(u!=null)return u}const l=typeEncoders[a];if(!l)throw new Error(`${encodeErrPrefix} unsupported type: ${a}`);return l(t,a,e,n)}function sortMapEntries(t,e){e.mapSorter&&t.sort(e.mapSorter)}function mapSorter(t,e){const n=Array.isArray(t[0])?t[0][0]:t[0],a=Array.isArray(e[0])?e[0][0]:e[0];if(n.type!==a.type)return n.type.compare(a.type);const o=n.type.major,l=cborEncoders[o].compareTokens(n,a);return l===0&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),l}function tokensToEncoded(t,e,n,a){if(Array.isArray(e))for(const o of e)tokensToEncoded(t,o,n,a);else n[e.type.major](t,e,a)}function encodeCustom(t,e,n){const a=objectToTokens(t,n);if(!Array.isArray(a)&&n.quickEncodeToken){const o=n.quickEncodeToken(a);if(o)return o;const l=e[a.type.major];if(l.encodedSize){const u=l.encodedSize(a,n),d=new Bl(u);if(l(d,a,n),d.chunks.length!==1)throw new Error(`Unexpected error: pre-calculated length for ${a} was wrong`);return asU8A(d.chunks[0])}}return buf.reset(),tokensToEncoded(buf,a,e,n),buf.toBytes(!0)}function encode$p(t,e){return e=Object.assign({},defaultEncodeOptions,e),encodeCustom(t,cborEncoders,e)}const defaultDecodeOptions={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class Tokeniser{constructor(e,n={}){this.pos=0,this.data=e,this.options=n}done(){return this.pos>=this.data.length}next(){const e=this.data[this.pos];let n=quick[e];if(n===void 0){const a=jump[e];if(!a)throw new Error(`${decodeErrPrefix} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);const o=e&31;n=a(this.data,this.pos,o,this.options)}return this.pos+=n.encodedLength,n}}const DONE=Symbol.for("DONE"),BREAK=Symbol.for("BREAK");function tokenToArray(t,e,n){const a=[];for(let o=0;o<t.value;o++){const l=tokensToObject(e,n);if(l===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed array`)}if(l===DONE)throw new Error(`${decodeErrPrefix} found array but not enough entries (got ${o}, expected ${t.value})`);a[o]=l}return a}function tokenToMap(t,e,n){const a=n.useMaps===!0,o=a?void 0:{},l=a?new Map:void 0;for(let u=0;u<t.value;u++){const d=tokensToObject(e,n);if(d===BREAK){if(t.value===1/0)break;throw new Error(`${decodeErrPrefix} got unexpected break to lengthed map`)}if(d===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${u} [no key], expected ${t.value})`);if(a!==!0&&typeof d!="string")throw new Error(`${decodeErrPrefix} non-string keys not supported (got ${typeof d})`);if(n.rejectDuplicateMapKeys===!0&&(a&&l.has(d)||!a&&d in o))throw new Error(`${decodeErrPrefix} found repeat map key "${d}"`);const m=tokensToObject(e,n);if(m===DONE)throw new Error(`${decodeErrPrefix} found map but not enough entries (got ${u} [no value], expected ${t.value})`);a?l.set(d,m):o[d]=m}return a?l:o}function tokensToObject(t,e){if(t.done())return DONE;const n=t.next();if(n.type===Type.break)return BREAK;if(n.type.terminal)return n.value;if(n.type===Type.array)return tokenToArray(n,t,e);if(n.type===Type.map)return tokenToMap(n,t,e);if(n.type===Type.tag){if(e.tags&&typeof e.tags[n.value]=="function"){const a=tokensToObject(t,e);return e.tags[n.value](a)}throw new Error(`${decodeErrPrefix} tag not supported (${n.value})`)}throw new Error("unsupported")}function decode$o(t,e){if(!(t instanceof Uint8Array))throw new Error(`${decodeErrPrefix} data to decode must be a Uint8Array`);e=Object.assign({},defaultDecodeOptions,e);const n=e.tokenizer||new Tokeniser(t,e),a=tokensToObject(n,e);if(a===DONE)throw new Error(`${decodeErrPrefix} did not find any content to decode`);if(a===BREAK)throw new Error(`${decodeErrPrefix} got unexpected break`);if(!n.done())throw new Error(`${decodeErrPrefix} too many terminals, data makes no sense`);return a}const CID_CBOR_TAG$2=42;function cidEncoder$2(t){if(t.asCID!==t&&t["/"]!==t.bytes)return null;const e=CID$2.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG$2),new Token(Type.bytes,n)]}function undefinedEncoder$2(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$2(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$2={float64:!0,typeEncoders:{Object:cidEncoder$2,undefined:undefinedEncoder$2,number:numberEncoder$2}};function cidDecoder$2(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$2.decode(t.subarray(1))}const decodeOptions$2={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,rejectDuplicateMapKeys:!0,tags:[]};decodeOptions$2.tags[CID_CBOR_TAG$2]=cidDecoder$2;const name$4="dag-cbor",code$6=113,encode$o=t=>encode$p(t,encodeOptions$2),decode$n=t=>decode$o(t,decodeOptions$2),dagCbor$1=Object.freeze(Object.defineProperty({__proto__:null,code:code$6,decode:decode$n,encode:encode$o,name:name$4},Symbol.toStringTag,{value:"Module"})),sha$2=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$6=from$8({name:"sha2-256",code:18,encode:sha$2("SHA-256")});from$8({name:"sha2-512",code:19,encode:sha$2("SHA-512")});const mhtype="sha2-256",defaultBase$2=base58btc$5,unsupportedCodecError=()=>new Error("unsupported codec"),cidifyString=t=>t&&(Array.isArray(t)?t.map(cidifyString):CID$2.parse(t)),stringifyCid=(t,e={})=>{if(!t||typeof t=="string")return t;if(Array.isArray(t))return t.map(stringifyCid);const n=e.base||defaultBase$2;return t.toString(n)},codecCodes={[code$7]:dagPb,[code$6]:dagCbor$1},codecMap={raw:dagCbor$1,"dag-pb":dagPb,"dag-cbor":dagCbor$1};async function read$7(t,e,n={}){e=cidifyString(stringifyCid(e));const a=codecCodes[e.code];if(!a)throw unsupportedCodecError();const o=await t.block.get(e,{timeout:n.timeout}),l=await decode$q({bytes:o,codec:a,hasher:sha256$6});if(l.cid.code===code$7)return JSON.parse(new TextDecoder().decode(l.value.Data));if(l.cid.code===code$6){const u=l.value;return(n.links||[]).forEach(m=>{u[m]&&(u[m]=stringifyCid(u[m],n))}),u}}async function write$3(t,e,n,a={}){a.format==="dag-pb"&&(e=a.format);const o=codecMap[e];if(!o)throw unsupportedCodecError();o.code===code$7&&(n=typeof n=="string"?n:JSON.stringify(n),n={Data:new TextEncoder().encode(n),Links:[]}),o.code===code$6&&(a.links||[]).forEach(m=>{n[m]&&(n[m]=cidifyString(n[m]))});const l=await encode$r({value:n,codec:o,hasher:sha256$6});return await t.block.put(l.bytes,{cid:l.cid.bytes,version:l.cid.version,format:e,mhtype,pin:a.pin,timeout:a.timeout}),(o.code===code$7?l.cid.toV0():l.cid).toString(a.base||defaultBase$2)}function difference$1(t,e,n){const a={},o={},l=d=>o[n?d[n]:d]=!0;t.forEach(l);const u=(d,m)=>{const y=o[n?m[n]:m]!==void 0,b=a[n?m[n]:m]!==void 0;return!y&&!b&&(d.push(m),a[n?m[n]:m]=!0),d};return e.reduce(u,[])}function findUniques(t,e){const n={},a=l=>n[l],o=l=>n[e?l[e]:l]=l;return t.forEach(o),Object.keys(n).map(a)}const isDefined$2=t=>t!=null;var defaults$4={space:"",cycles:!1,replacer:(t,e)=>e,stringify:JSON.stringify},util$8={isArray:Array.isArray,assign:Object.assign,isObject:t=>typeof t=="object",isFunction:t=>typeof t=="function",isBoolean:t=>typeof t=="boolean",isRegex:t=>t instanceof RegExp,keys:Object.keys};const DEFAULTS=defaults$4,isFunction$2=util$8.isFunction,isBoolean$2=util$8.isBoolean,isObject$2=util$8.isObject,isArray$4=util$8.isArray,isRegex=util$8.isRegex,assign$3=util$8.assign,keys$1=util$8.keys;function serialize$1(t){return t==null?t:isRegex(t)?t.toString():t.toJSON?t.toJSON():t}function stringifyDeterministic(t,e){e=e||assign$3({},DEFAULTS),isFunction$2(e)&&(e={compare:e});const n=e.space||DEFAULTS.space,a=isBoolean$2(e.cycles)?e.cycles:DEFAULTS.cycles,o=e.replacer||DEFAULTS.replacer,l=e.stringify||DEFAULTS.stringify,u=e.compare&&function(m){return function(y){return function(b,_){const w={key:b,value:y[b]},E={key:_,value:y[_]};return m(w,E)}}}(e.compare);a||l(t);const d=[];return function m(y,b,_,w){const E=n?`
`+new Array(w+1).join(n):"",A=n?": ":":";if(_=serialize$1(_),_=o.call(y,b,_),_!==void 0){if(!isObject$2(_)||_===null)return l(_);if(isArray$4(_)){const C=[];for(let k=0;k<_.length;k++){const B=m(_,k,_[k],w+1)||l(null);C.push(E+n+B)}return"["+C.join(",")+E+"]"}else{if(a){if(d.indexOf(_)!==-1)return l("[Circular]");d.push(_)}const C=keys$1(_).sort(u&&u(_)),k=[];for(let B=0;B<C.length;B++){const D=C[B],q=m(_,D,_[D],w+1);if(!q)continue;const j=l(D)+A+q;k.push(E+n+j)}return d.splice(d.indexOf(_),1),"{"+k.join(",")+E+"}"}}}({"":t},"",t,0)}var lib$1=stringifyDeterministic;const IpfsNotDefinedError=()=>new Error("Ipfs instance not defined"),IPLD_LINKS$1=["next","refs"],getWriteFormatForVersion=t=>t===0?"dag-pb":"dag-cbor",getWriteFormat=t=>Entry.isEntry(t)?getWriteFormatForVersion(t.v):getWriteFormatForVersion(t);class Entry{static async create(e,n,a,o,l=[],u,d=[],m){if(!isDefined$2(e))throw IpfsNotDefinedError();if(!isDefined$2(n))throw new Error("Identity is required, cannot create entry");if(!isDefined$2(a))throw new Error("Entry requires an id");if(!isDefined$2(o))throw new Error("Entry requires data");if(!isDefined$2(l)||!Array.isArray(l))throw new Error("'next' argument is not an array");const y=E=>E.hash?E.hash:E,b=l.filter(isDefined$2).map(y),_={hash:null,id:a,payload:o,next:b,refs:d,v:2,clock:u||new LamportClock(n.publicKey)},w=await n.provider.sign(n,Entry.toBuffer(_));return _.key=n.publicKey,_.identity=n.toJSON(),_.sig=w,_.hash=await Entry.toMultihash(e,_,m),_}static async verify(e,n){if(!e)throw new Error("Identity-provider is required, cannot verify entry");if(!Entry.isEntry(n))throw new Error("Invalid Log entry");if(!n.key)throw new Error("Entry doesn't have a key");if(!n.sig)throw new Error("Entry doesn't have a signature");const a=Entry.toEntry(n,{presigned:!0}),o=n.v<1?"v0":"v1";return e.verify(n.sig,n.key,Entry.toBuffer(a),o)}static toBuffer(e){const n=e.v===0?JSON.stringify(e):lib$1(e);return Buffer$y.from(n)}static async toMultihash(e,n,a=!1){if(!e)throw IpfsNotDefinedError();if(!Entry.isEntry(n))throw new Error("Invalid object format, cannot generate entry hash");const o=Entry.toEntry(n);return write$3(e,getWriteFormat(o.v),o,{links:IPLD_LINKS$1,pin:a})}static toEntry(e,{presigned:n=!1,includeHash:a=!1}={}){const o={hash:a?e.hash:null,id:e.id,payload:e.payload,next:e.next},l=e.v;return l>1&&(o.refs=e.refs),o.v=e.v,o.clock=new LamportClock(e.clock.id,e.clock.time),n||(o.key=e.key,l>0&&(o.identity=e.identity),o.sig=e.sig),o}static async fromMultihash(e,n){if(!e)throw IpfsNotDefinedError();if(!n)throw new Error(`Invalid hash: ${n}`);const a=await read$7(e,n,{links:IPLD_LINKS$1}),o=Entry.toEntry(a);return o.hash=n,o}static isEntry(e){return e&&e.id!==void 0&&e.next!==void 0&&e.payload!==void 0&&e.v!==void 0&&e.hash!==void 0&&e.clock!==void 0&&(e.refs!==void 0||e.v<2)}static compare(e,n){const a=LamportClock.compare(e.clock,n.clock);return a===0?e.clock.id<n.clock.id?-1:1:a}static isEqual(e,n){return e.hash===n.hash}static isParent(e,n){return n.next.indexOf(e.hash)>-1}static findChildren(e,n){let a=[],o=n.find(u=>Entry.isParent(e,u)),l=e;for(;o;)a.push(o),l=o,o=n.find(u=>Entry.isParent(l,u));return a=a.sort((u,d)=>u.clock.time>d.clock.time),a}}async function pDoWhilst(t,e){const n=await t();if(e(n))return pDoWhilst(t,e)}const{isEntry:isEntry$1,fromMultihash}=Entry,hasItems=t=>t&&t.length>0;class EntryIO{static async fetchParallel(e,n,{length:a,exclude:o=[],shouldExclude:l,timeout:u,concurrency:d,onProgressCallback:m}){const y=async E=>EntryIO.fetchAll(e,E,{length:a,exclude:o,shouldExclude:l,timeout:u,onProgressCallback:m,concurrency:d}),b=(E,A)=>E.concat(A),_=E=>E.reduce(b,[]),w=await pMap$1(n,y,{concurrency:Math.max(d||n.length,1)});return _(w)}static async fetchAll(e,n,{length:a=-1,exclude:o=[],shouldExclude:l,timeout:u,onProgressCallback:d,onStartProgressCallback:m,concurrency:y=32,delay:b=0}={}){const _=[],w={},E={},A=Array.isArray(n)?{0:n.slice()}:{0:[n]};let C=0,k=0,B=0;l=l||(()=>!1);const D=()=>Object.values(A).find(hasItems)!==void 0,q=(Z,Q)=>{!E[Z]&&!l(Z)&&(A[Q]||(A[Q]=[]),A[Q].includes(Z)||A[Q].push(Z),E[Z]=!0)},j=(Z=1)=>{const Q=(oe,ae,U)=>{const I=A[ae];for(;I.length>0&&oe.length<Z;){const x=I.shift();oe.push(x)}return I.length===0&&delete A[ae],oe};return Object.keys(A).reduce(Q,[])},J=Z=>{w[Z.hash||Z]=!0},Y=async Z=>{if(!(!Z||w[Z]||l(Z)))return new Promise(async(Q,oe)=>{const ae=u&&u>0?setTimeout(()=>{console.warn(`Warning: Couldn't fetch entry '${Z}', request timed out (${u}ms)`),Q()},u):null,U=I=>{if(isEntry$1(I)&&!w[I.hash]&&!l(I.hash)){const x=I.clock.time;k=Math.max(k,x),B=_.length>0?Math.min(_[_.length-1].clock.time,B):k;const T=_.length>=a&&x>=B,M=O=>k-x+(O+1)*O;(a<0||_.length<a||T)&&!l(I.hash)&&!w[I.hash]&&(_.push(I),w[I.hash]=!0,d&&d(I)),a<0?(I.next.forEach(q),I.refs&&I.refs.forEach(q)):((_.length<a||x>B||x===B&&!w[I.hash]&&!l(I.hash))&&I.next.forEach(O=>q(O,M(0))),I.refs&&_.length+I.refs.length<=a&&I.refs.forEach((O,z)=>q(O,M(z))))}};m&&m(Z,null,0,_.length);try{const I=await fromMultihash(e,Z);b>0&&await((T=0)=>new Promise(M=>setTimeout(M,T)))(b),U(I),Q()}catch(I){oe(I)}finally{clearTimeout(ae)}})},L=async()=>{if(C<y){const Z=j(y);C+=Z.length,await pMap$1(Z,Y,{concurrency:y}),C-=Z.length}};return o.forEach(J),await pDoWhilst(L,D),_}}function LastWriteWins$2(t,e){const n=(l,u)=>l,a=(l,u)=>SortByClockId(l,u,n);return((l,u)=>SortByClocks(l,u,a))(t,e)}function SortByEntryHash(t,e){const n=(l,u)=>l.hash<u.hash?-1:1,a=(l,u)=>SortByClockId(l,u,n);return((l,u)=>SortByClocks(l,u,a))(t,e)}function SortByClocks(t,e,n){const a=LamportClock.compare(t.clock,e.clock);return a===0?n(t,e):a}function SortByClockId(t,e,n){return t.clock.id===e.clock.id?n(t,e):t.clock.id<e.clock.id?-1:1}function NoZeroes$2(t){const e=`Your log's tiebreaker function, ${t.name}, has returned zero and therefore cannot be`;return(a,o)=>{const l=t(a,o);if(l===0)throw Error(e);return l}}const Sorting={SortByClocks,SortByClockId,LastWriteWins:LastWriteWins$2,SortByEntryHash,NoZeroes:NoZeroes$2},IPFSNotDefinedError=()=>new Error("IPFS instance not defined"),LogNotDefinedError=()=>new Error("Log instance not defined"),NotALogError=()=>new Error("Given argument is not an instance of Log"),LtOrLteMustBeStringOrArray=()=>new Error("lt or lte must be a string or array of Entries"),{LastWriteWins:LastWriteWins$1,NoZeroes:NoZeroes$1}=Sorting,{fetchAll,fetchParallel}=EntryIO,{compare:compare$2,isEntry}=Entry,IPLD_LINKS=["heads"],last=(t,e)=>t.slice(t.length-Math.min(t.length,e),t.length);class LogIO{static async toMultihash(e,n,{format:a}={}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw LogNotDefinedError();if(isDefined$2(a)||(a="dag-cbor"),n.values.length<1)throw new Error("Can't serialize an empty log");return write$3(e,a,n.toJSON(),{links:IPLD_LINKS})}static async fromMultihash(e,n,{length:a=-1,exclude:o=[],shouldExclude:l,timeout:u,concurrency:d,sortFn:m,onProgressCallback:y}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw new Error(`Invalid hash: ${n}`);const b=await read$7(e,n,{links:IPLD_LINKS});if(!b.heads||!b.id)throw NotALogError();m=m||NoZeroes$1(LastWriteWins$1);const _=k=>b.heads.includes(k.hash),w=await fetchAll(e,b.heads,{length:a,exclude:o,shouldExclude:l,timeout:u,concurrency:d,onProgressCallback:y}),E=b.id,A=a>-1?last(w.sort(m),a):w,C=A.filter(_);return{logId:E,entries:A,heads:C}}static async fromEntryHash(e,n,{length:a=-1,exclude:o=[],shouldExclude:l,timeout:u,concurrency:d,sortFn:m,onProgressCallback:y}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw new Error("'hash' must be defined");const b=Array.isArray(n)?n:[n];a=a>-1?Math.max(a,1):a;const _=await fetchParallel(e,b,{length:a,exclude:o,shouldExclude:l,timeout:u,concurrency:d,onProgressCallback:y});return m=m||NoZeroes$1(LastWriteWins$1),{entries:a>-1?last(_.sort(m),a):_}}static async fromJSON(e,n,{length:a=-1,timeout:o,concurrency:l,onProgressCallback:u}){if(!isDefined$2(e))throw IPFSNotDefinedError();const{id:d,heads:m}=n,y=m.map(w=>w.hash),_=(await fetchParallel(e,y,{length:a,timeout:o,concurrency:l,onProgressCallback:u})).sort(compare$2);return{logId:d,entries:_,heads:m}}static async fromEntry(e,n,{length:a=-1,exclude:o=[],shouldExclude:l,timeout:u,concurrency:d,onProgressCallback:m}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw new Error("'sourceEntries' must be defined");if(!Array.isArray(n)&&!isEntry(n))throw new Error("'sourceEntries' argument must be an array of Entry instances or a single Entry");Array.isArray(n)||(n=[n]),a=a>-1?Math.max(a,n.length):a;const y=n.map(D=>D.hash),b=await fetchParallel(e,y,{length:a,exclude:o,shouldExclude:l,timeout:u,concurrency:d,onProgressCallback:m}),_=n.concat(b).concat(o),w=findUniques(_,"hash").sort(compare$2),E=w.slice(a>-1?-a:-w.length),A=difference$1(E,n,"hash"),k=((D,q)=>{const j=D.slice(q.length,D.length);return q.concat(j)})(E,A);return{logId:k[k.length-1].id,entries:k}}}let AccessController$1=class{async canAppend(e,n){return!0}};class EntryIndex{constructor(e={}){this._cache=e}set(e,n){this._cache[e]=n}get(e){return this._cache[e]}delete(e){return delete this._cache[e]}add(e){this._cache=Object.assign(this._cache,e)}get length(){return Object.values(this._cache).length}}const{LastWriteWins,NoZeroes}=Sorting,randomId=()=>new Date().getTime().toString(),getHash=t=>t.hash,flatMap$1=(t,e)=>t.concat(e),getNextPointers=t=>t.next,maxClockTimeReducer=(t,e)=>Math.max(t,e.clock.time),uniqueEntriesReducer=(t,e)=>(t[e.hash]=e,t);class Log extends GSet{constructor(e,n,{logId:a,access:o,entries:l,heads:u,clock:d,sortFn:m,concurrency:y}={}){if(!isDefined$2(e))throw IPFSNotDefinedError();if(!isDefined$2(n))throw new Error("Identity is required");if(isDefined$2(o)||(o=new AccessController$1),isDefined$2(l)&&!Array.isArray(l))throw new Error("'entries' argument must be an array of Entry instances");if(isDefined$2(u)&&!Array.isArray(u))throw new Error("'heads' argument must be an array");isDefined$2(m)||(m=LastWriteWins),super(),this._sortFn=NoZeroes(m),this._storage=e,this._id=a||randomId(),this._access=o,this._identity=n;const b=(l||[]).reduce(uniqueEntriesReducer,{});this._entryIndex=new EntryIndex(b),l=Object.values(b)||[],u=u||Log.findHeads(l),this._headsIndex=u.reduce(uniqueEntriesReducer,{}),this._nextsIndex={};const _=E=>E.next.forEach(A=>this._nextsIndex[A]=E.hash);l.forEach(_),this._length=l.length;const w=Math.max(d?d.time:0,this.heads.reduce(maxClockTimeReducer,0));this._clock=new LamportClock(this._identity.publicKey,w),this.joinConcurrency=y||16}get id(){return this._id}get clock(){return this._clock}get length(){return this._length}get values(){return Object.values(this.traverse(this.heads)).reverse()}get heads(){return Object.values(this._headsIndex).sort(this._sortFn).reverse()}get tails(){return Log.findTails(this.values)}get tailHashes(){return Log.findTailHashes(this.values)}setIdentity(e){this._identity=e;const n=Math.max(this.clock.time,this.heads.reduce(maxClockTimeReducer,0));this._clock=new LamportClock(this._identity.publicKey,n)}get(e){return this._entryIndex.get(e)}has(e){return this._entryIndex.get(e.hash||e)!==void 0}traverse(e,n=-1,a){let o=e.sort(this._sortFn).reverse(),l={};const u={};let d=0;const m=_=>this.get(_),y=_=>{!_||l[_.hash]||(o=[_,...o].sort(this._sortFn).reverse(),l[_.hash]=!0)},b=_=>{u[_.hash]=_,l[_.hash]=!0,d++};for(;o.length>0&&(d<n||n<0);){const _=o.shift();if(b(_),a&&a===_.hash)break;_.next.map(m).filter(isDefined$2).forEach(y)}return o=[],l={},u}async append(e,n=1,a=!1){const o=Math.max(this.clock.time,this.heads.reduce(maxClockTimeReducer,0))+1;this._clock=new LamportClock(this.clock.id,o);const l=Object.values(this.traverse(this.heads,Math.max(n,this.heads.length))),d=(E=>{const A=new Set;for(let C=1;C<=E;C*=2){const k=Math.min(C-1,l.length-1);A.add(l[k])}return A})(Math.min(n,l.length));l.length<n&&l[l.length-1]&&d.add(l[l.length-1]);const m=Object.keys(this.heads.reverse().reduce(uniqueEntriesReducer,{})),y=E=>!m.includes(E),b=Array.from(d).map(getHash).filter(y),_=await Entry.create(this._storage,this._identity,this.id,e,m,this.clock,b,a);if(!await this._access.canAppend(_,this._identity.provider))throw new Error(`Could not append entry, key "${this._identity.id}" is not allowed to write to the log`);return this._entryIndex.set(_.hash,_),m.forEach(E=>this._nextsIndex[E]=_.hash),this._headsIndex={},this._headsIndex[_.hash]=_,this._length++,_}iterator({gt:e=void 0,gte:n=void 0,lt:a=void 0,lte:o=void 0,amount:l=-1}={}){if(l===0)return function*(){}();if(typeof o=="string"&&(o=[this.get(o)]),typeof a=="string"&&(a=[this.get(this.get(a).next[0])]),o&&!Array.isArray(o)||a&&!Array.isArray(a))throw LtOrLteMustBeStringOrArray();const u=(o||a||this.heads).filter(isDefined$2),d=n?this.get(n).hash:e?this.get(e).hash:null,m=d?-1:l||-1,y=this.traverse(u,m,d);let b=Object.values(y);return e&&b.pop(),(e||n)&&l>-1&&(b=b.slice(b.length-l,b.length)),function*(){for(const _ in b)yield b[_]}()}async join(e,n=-1){if(!isDefined$2(e))throw LogNotDefinedError();if(!Log.isLog(e))throw NotALogError();if(this.id!==e.id)return;const a=Log.difference(e,this),o=this._identity.provider,l=async A=>{if(!await this._access.canAppend(A,o))throw new Error(`Could not append entry, key "${A.identity.id}" is not allowed to write to the log`)},u=async A=>{const C=await Entry.verify(o,A),k=A.identity?A.identity.publicKey:A.key;if(!C)throw new Error(`Could not validate signature "${A.sig}" for entry "${A.hash}" and key "${k}"`)},d=Object.values(a);await pMap$1(d,async A=>{await l(A),await u(A)},{concurrency:this.joinConcurrency});const m=A=>{this.get(A.hash)||this._length++,A.next.forEach(k=>this._nextsIndex[k]=A.hash)};Object.values(a).forEach(m),this._entryIndex.add(a);const y=A=>!_.find(C=>C===A.hash),b=A=>!this._nextsIndex[A.hash],_=Object.values(a).map(getNextPointers).reduce(flatMap$1,[]),w=Log.findHeads(Object.values(Object.assign({},this._headsIndex,e._headsIndex))).filter(y).filter(b).reduce(uniqueEntriesReducer,{});if(this._headsIndex=w,n>-1){let A=this.values;A=A.slice(-n),this._entryIndex=null,this._entryIndex=new EntryIndex(A.reduce(uniqueEntriesReducer,{})),this._headsIndex=Log.findHeads(A).reduce(uniqueEntriesReducer,{}),this._length=this._entryIndex.length}const E=Object.values(this._headsIndex).reduce(maxClockTimeReducer,0);return this._clock=new LamportClock(this.clock.id,Math.max(this.clock.time,E)),this}toJSON(){return{id:this.id,heads:this.heads.sort(this._sortFn).reverse().map(getHash)}}toSnapshot(){return{id:this.id,heads:this.heads,values:this.values}}toBuffer(){return Buffer$y.from(JSON.stringify(this.toJSON()))}toString(e){return this.values.slice().reverse().map((n,a)=>{const l=Entry.findChildren(n,this.values).length;let u=new Array(Math.max(l-1,0));return u=l>1?u.fill("  "):u,u=l>0?u.concat(["└─"]):u,u.join("")+(e?e(n.payload):n.payload)}).join(`
`)}static isLog(e){return e.id!==void 0&&e.heads!==void 0&&e._entryIndex!==void 0}toMultihash({format:e}={}){return LogIO.toMultihash(this._storage,this,{format:e})}static async fromMultihash(e,n,a,{access:o,length:l=-1,exclude:u=[],shouldExclude:d,timeout:m,concurrency:y,sortFn:b,onProgressCallback:_}={}){const{logId:w,entries:E,heads:A}=await LogIO.fromMultihash(e,a,{length:l,exclude:u,shouldExclude:d,timeout:m,onProgressCallback:_,concurrency:y,sortFn:b});return new Log(e,n,{logId:w,access:o,entries:E,heads:A,sortFn:b})}static async fromEntryHash(e,n,a,{logId:o,access:l,length:u=-1,exclude:d=[],shouldExclude:m,timeout:y,concurrency:b,sortFn:_,onProgressCallback:w}={}){const{entries:E}=await LogIO.fromEntryHash(e,a,{length:u,exclude:d,shouldExclude:m,timeout:y,concurrency:b,onProgressCallback:w});return new Log(e,n,{logId:o,access:l,entries:E,sortFn:_})}static async fromJSON(e,n,a,{access:o,length:l=-1,timeout:u,sortFn:d,onProgressCallback:m}={}){const{logId:y,entries:b}=await LogIO.fromJSON(e,a,{length:l,timeout:u,onProgressCallback:m});return new Log(e,n,{logId:y,access:o,entries:b,sortFn:d})}static async fromEntry(e,n,a,{access:o,length:l=-1,exclude:u=[],timeout:d,concurrency:m,sortFn:y,onProgressCallback:b}={}){const{logId:_,entries:w}=await LogIO.fromEntry(e,a,{length:l,exclude:u,timeout:d,concurrency:m,onProgressCallback:b});return new Log(e,n,{logId:_,access:o,entries:w,sortFn:y})}static findHeads(e){const n=(u,d,m,y)=>{const b=_=>u[_]=d.hash;return d.next.forEach(b),u},a=e.reduce(n,{}),o=u=>a[u.hash]===void 0,l=(u,d)=>u.clock.id>d.clock.id;return e.filter(o).sort(l)}static findTails(e){const n={},a=[],o={};let l=[];const u=_=>{_.next.length===0&&a.push(_);const w=E=>{n[E]||(n[E]=[]),n[E].push(_)};_.next.forEach(w),l=l.concat(_.next),o[_.hash]=!0};e.forEach(u);const d=(_,w,E,A)=>_.concat(findUniques(w,"hash")),m=_=>o[_]===void 0,y=_=>n[_],b=l.filter(m).map(y).reduce(d,[]).concat(a);return findUniques(b,"hash").sort(Entry.compare)}static findTailHashes(e){const n={},a=l=>n[l.hash]=!0,o=(l,u,d,m)=>{const y=b=>{n[b]===void 0&&l.splice(0,0,b)};return u.next.reverse().forEach(y),l};return e.forEach(a),e.reduce(o,[])}static difference(e,n){const a=Object.keys(e._headsIndex),o={},l={},u=d=>{!o[d]&&!n.get(d)&&(a.push(d),o[d]=!0)};for(;a.length>0;){const d=a.shift(),m=e.get(d);m&&!n.get(d)&&m.id===n.id&&(l[m.hash]=m,o[m.hash]=!0,m.next.concat(m.refs).forEach(u))}return l}}const getNextAndRefsUnion=t=>[...new Set([...t.next,...t.refs])],flatMap=(t,e)=>t.concat(e),defaultConcurrency=32;class Replicator{constructor(e,n){this._store=e,this._concurrency=n||defaultConcurrency,this._q=new PQueue({concurrency:this._concurrency}),this._logs=[],this._fetching={},this._fetched={},this._q.on("idle",async()=>{const a=this._logs.slice();if(this._logs=[],this.onReplicationComplete&&a.length>0&&this._store._oplog)try{await this.onReplicationComplete(a),a.forEach(o=>o.values.forEach(l=>delete this._fetched[l.hash]))}catch(o){console.error(o)}})}get tasksRunning(){return this._q.pending}get tasksQueued(){return this._q.size}get unfinished(){return Object.keys(this._fetching)}async load(e){try{this._addToQueue(e)}catch(n){console.error(n)}}async _addToQueue(e){const n=o=>o&&this._store._oplog&&(this._store._oplog.has(o)||this._fetching[o]!==void 0||this._fetched[o]),a=o=>(this._fetching[o.hash||o]=!0,async()=>{o.hash&&this.onReplicationQueued&&this.onReplicationQueued(o);try{const l=await this._replicateLog(o);this._logs.push(l)}catch(l){throw console.error(l),l}delete this._fetching[o.hash||o]});if(e.length>0){const o=e.filter(l=>!n(l.hash||l)).map(l=>a(l));o.length>0&&this._q.addAll(o)}}async stop(){this._q.pause(),this._q.clear(),await this._q.onIdle(),this._logs=[],this._fetching={},this._fetched={}}async _replicateLog(e){const n=e.hash||e,a=d=>{this._fetched[d.hash]=!0,this.onReplicationProgress&&this.onReplicationProgress(d)},o=d=>d&&d!==n&&this._store._oplog&&(this._store._oplog.has(d)||this._fetching[d]!==void 0||this._fetched[d]!==void 0),l=await Log.fromEntryHash(this._store._ipfs,this._store.identity,n,{logId:this._store.id,access:this._store.access,length:-1,exclude:[],shouldExclude:o,concurrency:this._concurrency,onProgressCallback:a}),u=l.values.map(getNextAndRefsUnion).reduce(flatMap,[]);try{this._addToQueue(u)}catch(d){throw console.error(d),d}return l}}class ReplicationInfo{constructor(){this.progress=0,this.max=0}reset(){this.progress=0,this.max=0}}const fs$1=require$$0$2,format$4=util$9.format,EventEmitter$2=eventsExports.EventEmitter;let isElectronRenderer$1=browser$1$1.type&&browser$1$1.type==="renderer",isNodejs=!!(!isElectronRenderer$1&&browser$1$1.version);const LogLevels$1={DEBUG:"DEBUG",INFO:"INFO",WARN:"WARN",ERROR:"ERROR",NONE:"NONE"};let GlobalLogLevel=LogLevels$1.DEBUG,GlobalLogfile=null,GlobalEvents=new EventEmitter$2,Colors={Black:0,Red:1,Green:2,Yellow:3,Blue:4,Magenta:5,Cyan:6,Grey:7,White:9,Default:9};isNodejs||(Colors={Black:"Black",Red:"IndianRed",Green:"LimeGreen",Yellow:"Orange",Blue:"RoyalBlue",Magenta:"Orchid",Cyan:"SkyBlue",Grey:"DimGrey",White:"White",Default:"Black"});const loglevelColors=[Colors.Cyan,Colors.Green,Colors.Yellow,Colors.Red,Colors.Default],defaultOptions={useColors:!0,color:Colors.Default,showTimestamp:!0,useLocalTime:!1,showLevel:!0,filename:GlobalLogfile,appendFile:!0};let Logger$1=class{constructor(e,n){this.category=e;let a={};Object.assign(a,defaultOptions),Object.assign(a,n),this.options=a,this.debug=this.debug.bind(this),this.log=this.log.bind(this),this.info=this.info.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}debug(){this._shouldLog(LogLevels$1.DEBUG)&&this._write(LogLevels$1.DEBUG,format$4.apply(null,arguments))}log(){this._shouldLog(LogLevels$1.DEBUG)&&this.debug.apply(this,arguments)}info(){this._shouldLog(LogLevels$1.INFO)&&this._write(LogLevels$1.INFO,format$4.apply(null,arguments))}warn(){this._shouldLog(LogLevels$1.WARN)&&this._write(LogLevels$1.WARN,format$4.apply(null,arguments))}error(){this._shouldLog(LogLevels$1.ERROR)&&this._write(LogLevels$1.ERROR,format$4.apply(null,arguments))}_write(e,n){(this.options.filename||GlobalLogfile)&&!this.fileWriter&&isNodejs&&(this.fileWriter=fs$1.openSync(this.options.filename||GlobalLogfile,this.options.appendFile?"a+":"w+"));let a=this._format(e,n),o=this._createLogMessage(e,n),l=this._createLogMessage(e,n,a.timestamp,a.level,a.category,a.text);this.fileWriter&&isNodejs&&fs$1.writeSync(this.fileWriter,o+`
`,null,"utf-8"),isNodejs||!this.options.useColors?(console.log(l),GlobalEvents.emit("data",this.category,e,n)):e===LogLevels$1.ERROR?this.options.showTimestamp&&this.options.showLevel?console.error(l,a.timestamp,a.level,a.category,a.text):this.options.showTimestamp&&!this.options.showLevel?console.error(l,a.timestamp,a.category,a.text):!this.options.showTimestamp&&this.options.showLevel?console.error(l,a.level,a.category,a.text):console.error(l,a.category,a.text):this.options.showTimestamp&&this.options.showLevel?console.log(l,a.timestamp,a.level,a.category,a.text):this.options.showTimestamp&&!this.options.showLevel?console.log(l,a.timestamp,a.category,a.text):!this.options.showTimestamp&&this.options.showLevel?console.log(l,a.level,a.category,a.text):console.log(l,a.category,a.text)}_format(e,n){let a="",o="",l="",u=": ";if(this.options.useColors){const d=Object.keys(LogLevels$1).map(y=>LogLevels$1[y]).indexOf(e),m=this.options.color;isNodejs?(this.options.showTimestamp&&(a="\x1B[3"+Colors.Grey+"m"),this.options.showLevel&&(o="\x1B[3"+loglevelColors[d]+";22m"),l="\x1B[3"+m+";1m",u="\x1B[0m: "):(this.options.showTimestamp&&(a="color:"+Colors.Grey),this.options.showLevel&&(o="color:"+loglevelColors[d]),l="color:"+m+"; font-weight: bold")}return{timestamp:a,level:o,category:l,text:u}}_createLogMessage(e,n,a,o,l,u){a=a||"",o=o||"",l=l||"",u=u||": ",!isNodejs&&this.options.useColors&&(this.options.showTimestamp&&(a="%c"),this.options.showLevel&&(o="%c"),l="%c",u=": %c");let d="";return this.options.showTimestamp&&!this.options.useLocalTime&&(d+=""+new Date().toISOString()+" "),this.options.showTimestamp&&this.options.useLocalTime&&(d+=""+new Date().toLocaleString()+" "),d=a+d,this.options.showLevel&&(d+=o+"["+e+"]"+(e===LogLevels$1.INFO||e===LogLevels$1.WARN?" ":"")+" "),d+=l+this.category,d+=u+n,d}_shouldLog(e){let n=typeof browser$1$1<"u"&&browser$1$1.env!==void 0&&{}.LOG!==void 0?{}.LOG.toUpperCase():null;n=typeof window<"u"&&window.LOG?window.LOG.toUpperCase():n;const a=n||GlobalLogLevel,o=Object.keys(LogLevels$1).map(d=>LogLevels$1[d]),l=o.indexOf(e),u=o.indexOf(a);return l>=u}};var src$8={Colors,LogLevels:LogLevels$1,setLogLevel:t=>{GlobalLogLevel=t},setLogfile:t=>{GlobalLogfile=t},create:(t,e)=>new Logger$1(t,e),forceBrowserMode:t=>isNodejs=!t,events:GlobalEvents};const logger$o=src$8.create("orbit-db.store",{color:src$8.Colors.Blue});src$8.setLogLevel("ERROR");const DefaultOptions={Index,maxHistory:-1,fetchEntryTimeout:null,referenceCount:32,replicationConcurrency:32,syncLocal:!1,sortFn:void 0};class Store{constructor(e,n,a,o){if(!n)throw new Error("Identity required");const l=Object.assign({},DefaultOptions);Object.assign(l,o),this.options=l,this._type="store",this.id=a.toString(),this.identity=n,this.address=a,this.dbname=a.path||"",this.events=new eventsExports.EventEmitter,this.remoteHeadsPath=path.join(this.id,"_remoteHeads"),this.localHeadsPath=path.join(this.id,"_localHeads"),this.snapshotPath=path.join(this.id,"snapshot"),this.queuePath=path.join(this.id,"queue"),this.manifestPath=path.join(this.id,"_manifest"),this._ipfs=e,this._cache=o.cache;const u={canAppend:d=>d.identity.publicKey===n.publicKey};this.access=o.accessController||u,this._oplog=new Log(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._queue=new PQueue({concurrency:1}),this._index=new this.options.Index(this.address.root),this._replicationStatus=new ReplicationInfo,this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0};try{const d=async b=>{this._recalculateReplicationMax(b.clock?b.clock.time:0),this.events.emit("replicate",this.address.toString(),b)},m=async b=>{const _=this.replicationStatus.progress,w=this.replicationStatus.max;this._recalculateReplicationStatus(b.clock.time),(this._oplog.length+1>this.replicationStatus.progress||this.replicationStatus.progress>_||this.replicationStatus.max>w)&&this.events.emit("replicate.progress",this.address.toString(),b.hash,b,this.replicationStatus.progress,this.replicationStatus.max)},y=async b=>{const _=async()=>{try{if(this._oplog&&b.length>0){for(const E of b)await this._oplog.join(E);const w=this._oplog.heads;await this._cache.set(this.remoteHeadsPath,w),logger$o.debug(`Saved heads ${w.length} [${w.map(E=>E.hash).join(", ")}]`),await this._updateIndex(),this._oplog.length>this.replicationStatus.progress&&this._recalculateReplicationStatus(this._oplog.length),this.events.emit("replicated",this.address.toString(),b.length,this)}}catch(w){console.error(w)}};await this._queue.add(_.bind(this))};this._replicator=new Replicator(this,this.options.replicationConcurrency),this._loader=this._replicator,this._replicator.onReplicationQueued=d,this._replicator.onReplicationProgress=m,this._replicator.onReplicationComplete=y}catch(d){console.error("Store Error:",d)}this.events.on("replicated.progress",(d,m,y,b,_)=>{this._procEntry(y)}),this.events.on("write",(d,m,y)=>{this._procEntry(m)})}get all(){return Array.isArray(this._index._index)?this._index._index:Object.keys(this._index._index).map(e=>this._index._index[e])}get index(){return this._index._index}get type(){return this._type}get key(){return this._key}get replicationStatus(){return this._replicationStatus}setIdentity(e){this.identity=e,this._oplog.setIdentity(e)}async close(){await this._replicator.stop(),await this._queue.onIdle(),this._replicationStatus.reset(),this._stats={snapshot:{bytesLoaded:-1},syncRequestsReceieved:0},this.options.onClose&&await this.options.onClose(this),this.access.close&&await this.access.close();for(const e in this.events._events)this.events.removeAllListeners(e);return this._oplog=null,this.events.emit("closed",this.address.toString()),Promise.resolve()}async drop(){this.options.onDrop&&await this.options.onDrop(this),await this._cache.del(this.localHeadsPath),await this._cache.del(this.remoteHeadsPath),await this._cache.del(this.snapshotPath),await this._cache.del(this.queuePath),await this._cache.del(this.manifestPath),await this.close(),this._index=new this.options.Index(this.address.root),this._oplog=new Log(this._ipfs,this.identity,{logId:this.id,access:this.access,sortFn:this.options.sortFn}),this._cache=this.options.cache}async load(e,n={}){typeof e=="object"&&(n=e,e=void 0),e=e||this.options.maxHistory;const a=n.fetchEntryTimeout||this.options.fetchEntryTimeout;this.options.onLoad&&await this.options.onLoad(this);const o=await this._cache.get(this.localHeadsPath)||[],l=await this._cache.get(this.remoteHeadsPath)||[],u=o.concat(l);u.length>0&&this.events.emit("load",this.address.toString(),u),u.forEach(m=>this._recalculateReplicationMax(m.clock.time));const d=await Log.fromEntryHash(this._ipfs,this.identity,u.map(m=>m.hash),{logId:this.id,access:this.access,sortFn:this.options.sortFn,length:e,onProgressCallback:this._onLoadProgress.bind(this),timeout:a,concurrency:this.options.replicationConcurrency});this._oplog=d,u.length>0&&await this._updateIndex(),this.events.emit("ready",this.address.toString(),this._oplog.heads)}async sync(e){return this._stats.syncRequestsReceieved+=1,logger$o.debug(`Sync request #${this._stats.syncRequestsReceieved} ${e.length}`),e.length===0?void 0:pEachSeries(e,async a=>{if(!a)return console.warn("Warning: Given input entry was 'null'."),Promise.resolve(null);const o=this.identity.provider;if(!o)throw new Error("Identity-provider is required, cannot verify entry");if(!await this.access.canAppend(a,o))return console.warn("Warning: Given input entry is not allowed in this log and was discarded (no write access)."),Promise.resolve(null);const u=Entry.toEntry(a);return await write$3(this._ipfs,getWriteFormat(u),u,{links:IPLD_LINKS$1,onlyHash:!0})!==a.hash&&console.warn(`"WARNING! Head hash didn't match the contents`),a}).then(async a=>this._replicator.load(a.filter(o=>o!==null)))}loadMoreFrom(e,n){this._replicator.load(n)}async saveSnapshot(){const e=this._replicator.unfinished,n=this._oplog.toSnapshot(),a=Buffer$y.from(JSON.stringify({id:n.id,heads:n.heads,size:n.values.length,values:n.values,type:this.type})),o=await this._ipfs.add(a);return o.hash=o.cid.toString(),await this._cache.set(this.snapshotPath,o),await this._cache.set(this.queuePath,e),logger$o.debug(`Saved snapshot: ${o.hash}, queue length: ${e.length}`),[o]}async loadFromSnapshot(e){this.options.onLoad&&await this.options.onLoad(this),this.events.emit("load",this.address.toString());const n=(l,u)=>Math.max(l,u.clock.time),a=await this._cache.get(this.queuePath);this.sync(a||[]);const o=await this._cache.get(this.snapshotPath);if(o){const l=[];for await(const m of this._ipfs.cat(o.hash))l.push(m);const u=Buffer$y.concat(l),d=JSON.parse(u.toString());this._recalculateReplicationMax(d.values.reduce(n,0)),d&&(this._oplog=await Log.fromJSON(this._ipfs,this.identity,d,{access:this.access,sortFn:this.options.sortFn,length:-1,timeout:1e3,onProgressCallback:this._onLoadProgress.bind(this)}),await this._updateIndex(),this.events.emit("replicated",this.address.toString())),this.events.emit("ready",this.address.toString(),this._oplog.heads)}else throw new Error(`Snapshot for ${this.address} not found!`);return this}async _updateIndex(){await this._index.updateIndex(this._oplog)}async syncLocal(){const e=await this._cache.get(this.localHeadsPath)||[],n=await this._cache.get(this.remoteHeadsPath)||[],a=e.concat(n);for(let o=0;o<a.length;o++){const l=a[o];if(!this._oplog.heads.includes(l)){await this.load();break}}}async _addOperation(e,{onProgressCallback:n,pin:a=!1}={}){async function o(){if(this._oplog){this.options.syncLocal&&await this.syncLocal();const l=await this._oplog.append(e,this.options.referenceCount,a);return this._recalculateReplicationStatus(l.clock.time),await this._cache.set(this.localHeadsPath,[l]),await this._updateIndex(),this.events.emit("write",this.address.toString(),l,this._oplog.heads),n&&n(l),l.hash}}return this._queue.add(o.bind(this))}_addOperationBatch(e,n,a,o){throw new Error("Not implemented!")}_procEntry(e){const{payload:n,hash:a}=e,{op:o}=n;o?this.events.emit(`log.op.${o}`,this.address.toString(),a,n):this.events.emit("log.op.none",this.address.toString(),a,n),this.events.emit("log.op",o,this.address.toString(),a,n)}_recalculateReplicationProgress(){this._replicationStatus.progress=Math.max(Math.min(this._replicationStatus.progress+1,this._replicationStatus.max),this._oplog?this._oplog.length:0)}_recalculateReplicationMax(e){this._replicationStatus.max=Math.max.apply(null,[this.replicationStatus.max,this._oplog?this._oplog.length:0,e||0])}_recalculateReplicationStatus(e){this._recalculateReplicationMax(e),this._recalculateReplicationProgress()}_onLoadProgress(e){this._recalculateReplicationStatus(e.clock.time),this.events.emit("load.progress",this.address.toString(),e.hash,e,this.replicationStatus.progress,this.replicationStatus.max)}}class EventIndex{constructor(){this._index=null}get(){return this._index?this._index.values:[]}updateIndex(e){this._index=e}}class EventStore extends Store{constructor(e,n,a,o={}){o.Index===void 0&&Object.assign(o,{Index:EventIndex}),super(e,n,a,o),this._type="eventlog",this.events.on("log.op.ADD",(l,u,d)=>{this.events.emit("db.append",d.value)})}add(e,n={}){return this._addOperation({op:"ADD",key:null,value:e},n)}get(e){return this.iterator({gte:e,limit:1}).collect()[0]}iterator(e){const n=this._query(e);let a=0;return{[Symbol.iterator](){return this},next(){let l={value:null,done:!0};return a<n.length&&(l={value:n[a],done:!1},a++),l},collect:()=>n}}_query(e){e||(e={});const n=e.limit?e.limit>-1?e.limit:this._index.get().length:1,a=this._index.get().slice();let o=[];return e.gt||e.gte?o=this._read(a,e.gt?e.gt:e.gte,n,!!e.gte):o=this._read(a.reverse(),e.lt?e.lt:e.lte,n,e.lte||!e.lt).reverse(),e.reverse&&o.reverse(),o}_read(e,n,a,o){const l=e.map(m=>m.hash).indexOf(n);let u=Math.max(l,0);return u+=o?0:1,e.slice(u).slice(0,a)}}class FeedIndex{constructor(){this._index={}}get(){return Object.keys(this._index).map(e=>this._index[e])}updateIndex(e){this._index={},e.values.reduce((n,a)=>(n.includes(a.hash)||(n.push(a.hash),a.payload.op==="ADD"?this._index[a.hash]=a:a.payload.op==="DEL"&&delete this._index[a.payload.value]),n),[])}}class FeedStore extends EventStore{constructor(e,n,a,o){o||(o={}),o.Index||Object.assign(o,{Index:FeedIndex}),super(e,n,a,o),this._type="feed"}remove(e,n={}){return this.del(e,n)}del(e,n={}){const a={op:"DEL",key:null,value:e};return this._addOperation(a,n)}}class KeyValueIndex{constructor(){this._index={}}get(e){return this._index[e]}updateIndex(e){const n=e.values,a={};for(let o=n.length-1;o>=0;o--){const l=n[o];if(!a[l.payload.key]){if(a[l.payload.key]=!0,l.payload.op==="PUT"){this._index[l.payload.key]=l.payload.value;continue}if(l.payload.op==="DEL"){delete this._index[l.payload.key];continue}}}}}class KeyValueStore extends Store{constructor(e,n,a,o){const l=Object.assign({},{Index:KeyValueIndex});Object.assign(l,o),super(e,n,a,l),this._type="keyvalue"}get all(){return this._index._index}get(e){return this._index.get(e)}set(e,n,a={}){return this.put(e,n,a)}put(e,n,a={}){return this._addOperation({op:"PUT",key:e,value:n},a)}del(e,n={}){return this._addOperation({op:"DEL",key:e,value:null},n)}}const deepEqual$1=(t,e)=>{const n=Object.getOwnPropertyNames(t),a=Object.getOwnPropertyNames(e);if(n.length!==a.length)return!1;for(let o=0;o<n.length;o++){const l=n[o];if(t[l]!==e[l])return!1}return!0},sum$2=(t,e)=>t+e;class GCounter{constructor(e,n){this.id=e,this._counters=n||{},this._counters[this.id]=this._counters[this.id]?this._counters[this.id]:0}get value(){return Object.values(this._counters).reduce(sum$2,0)}increment(e){e&&e<1||(e==null&&(e=1),this._counters[this.id]=this._counters[this.id]+e)}merge(e){Object.entries(e._counters).forEach(([n,a])=>{this._counters[n]=Math.max(this._counters[n]||0,a)})}toJSON(){return{id:this.id,counters:this._counters}}isEqual(e){return GCounter.isEqual(this,e)}static from(e){return new GCounter(e.id,e.counters)}static isEqual(e,n){return e.id!==n.id?!1:deepEqual$1(e._counters,n._counters)}}class CounterIndex{constructor(e){this._index=new GCounter(e)}get(){return this._index}updateIndex(e){if(this._index){const n=o=>o.payload.value.counters,a=o=>this._index.merge({_counters:o});e.values.filter(o=>o&&o.payload.op==="COUNTER").map(n).forEach(a)}}}class CounterStore extends Store{constructor(e,n,a,o={}){o.Index||Object.assign(o,{Index:CounterIndex}),super(e,n,a,o),this._index=new this.options.Index(this.identity.publicKey),this._type="counter"}get value(){return this._index.get().value}inc(e,n={}){const a=new GCounter(this.identity.publicKey,Object.assign({},this._index.get()._counters));return a.increment(e),this._addOperation({op:"COUNTER",key:null,value:a.toJSON()},n)}}class DocumentIndex{constructor(){this._index={}}get(e,n=!1){return n?this._index[e]:this._index[e]?this._index[e].payload.value:null}updateIndex(e,n){const a=(o,l,u)=>{if(l.payload.op==="PUTALL"&&l.payload.docs[Symbol.iterator])for(const d of l.payload.docs)d&&o[d.key]!==!0&&(o[d.key]=!0,this._index[d.key]={payload:{op:"PUT",key:d.key,value:d.value}});else o[l.payload.key]!==!0&&(o[l.payload.key]=!0,l.payload.op==="PUT"?this._index[l.payload.key]=l:l.payload.op==="DEL"&&delete this._index[l.payload.key]);return n&&n(l,u),o};e.values.slice().reverse().reduce(a,{})}}var pMap=(t,e,n)=>new Promise((a,o)=>{n=Object.assign({concurrency:1/0},n);const l=n.concurrency;if(l<1)throw new TypeError("Expected `concurrency` to be a number from 1 and up");const u=[],d=t[Symbol.iterator]();let m=!1,y=!1,b=0,_=0;const w=()=>{if(m)return;const E=d.next(),A=_;if(_++,E.done){y=!0,b===0&&a(u);return}b++,Promise.resolve(E.value).then(C=>e(C,A)).then(C=>{u[A]=C,b--,w()},C=>{m=!0,o(C)})};for(let E=0;E<l&&(w(),!y);E++);});const replaceAll=(t,e,n)=>t.toString().split(e).join(n);class DocumentStore extends Store{constructor(e,n,a,o){o||(o={}),o.indexBy||Object.assign(o,{indexBy:"_id"}),o.Index||Object.assign(o,{Index:DocumentIndex}),super(e,n,a,o),this._type="docstore"}get(e,n=!1){e=e.toString();const a=e.split(" ");e=a.length>1?replaceAll(e,"."," ").toLowerCase():e.toLowerCase();const o=d=>a.length>1?replaceAll(d,"."," ").toLowerCase().indexOf(e)!==-1:d.toLowerCase().indexOf(e)!==-1,l=d=>this._index.get(d),u=d=>n?d.indexOf(e)!==-1:o(d);return Object.keys(this._index._index).filter(u).map(l)}query(e,n={}){const a=n.fullOp||!1;return Object.keys(this._index._index).map(o=>this._index.get(o,a)).filter(e)}batchPut(e,n){return pMap(e,(o,l)=>this._addOperationBatch({op:"PUT",key:o[this.options.indexBy],value:o},!0,l===e.length-1,n),{concurrency:1}).then(()=>this.saveSnapshot())}put(e,n={}){if(!e[this.options.indexBy])throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUT",key:e[this.options.indexBy],value:e},n)}putAll(e,n={}){if(Array.isArray(e)||(e=[e]),!e.every(a=>a[this.options.indexBy]))throw new Error(`The provided document doesn't contain field '${this.options.indexBy}'`);return this._addOperation({op:"PUTALL",docs:e.map(a=>({key:a[this.options.indexBy],value:a}))},n)}del(e,n={}){if(!this._index.get(e))throw new Error(`No entry with key '${e}' in the database`);return this._addOperation({op:"DEL",key:e,value:null},n)}}var pReduce$1=(t,e,n)=>new Promise((a,o)=>{const l=t[Symbol.iterator]();let u=0;const d=m=>{const y=l.next();if(y.done){a(m);return}Promise.all([m,y.value]).then(b=>{d(e(b[0],b[1],u++))}).catch(o)};d(n)}),distExports={},dist$1={get exports(){return distExports},set exports(t){distExports=t}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});const n=util$9,a=Object.prototype.toString,o=m=>y=>typeof y===m,l=m=>{const y=a.call(m).slice(8,-1);return y||null},u=m=>y=>l(y)===m;function d(m){if(m===null)return"null";if(m===!0||m===!1)return"boolean";const y=typeof m;if(y==="undefined")return"undefined";if(y==="string")return"string";if(y==="number")return"number";if(y==="symbol")return"symbol";if(d.function_(m))return"Function";if(Array.isArray(m))return"Array";if(Buffer$y.isBuffer(m))return"Buffer";const b=l(m);if(b)return b;if(m instanceof String||m instanceof Boolean||m instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}(function(m){const y=Q=>typeof Q=="object";m.undefined=o("undefined"),m.string=o("string"),m.number=o("number"),m.function_=o("function"),m.null_=Q=>Q===null,m.class_=Q=>m.function_(Q)&&Q.toString().startsWith("class "),m.boolean=Q=>Q===!0||Q===!1,m.symbol=o("symbol"),m.array=Array.isArray,m.buffer=Buffer$y.isBuffer,m.nullOrUndefined=Q=>m.null_(Q)||m.undefined(Q),m.object=Q=>!m.nullOrUndefined(Q)&&(m.function_(Q)||y(Q)),m.iterable=Q=>!m.nullOrUndefined(Q)&&m.function_(Q[Symbol.iterator]),m.generator=Q=>m.iterable(Q)&&m.function_(Q.next)&&m.function_(Q.throw),m.nativePromise=u("Promise");const b=Q=>!m.null_(Q)&&y(Q)&&m.function_(Q.then)&&m.function_(Q.catch);m.promise=Q=>m.nativePromise(Q)||b(Q);const _=Q=>oe=>m.function_(oe)&&m.function_(oe.constructor)&&oe.constructor.name===Q;m.generatorFunction=_("GeneratorFunction"),m.asyncFunction=_("AsyncFunction"),m.boundFunction=Q=>m.function_(Q)&&!Q.hasOwnProperty("prototype"),m.regExp=u("RegExp"),m.date=u("Date"),m.error=u("Error"),m.map=u("Map"),m.set=u("Set"),m.weakMap=u("WeakMap"),m.weakSet=u("WeakSet"),m.int8Array=u("Int8Array"),m.uint8Array=u("Uint8Array"),m.uint8ClampedArray=u("Uint8ClampedArray"),m.int16Array=u("Int16Array"),m.uint16Array=u("Uint16Array"),m.int32Array=u("Int32Array"),m.uint32Array=u("Uint32Array"),m.float32Array=u("Float32Array"),m.float64Array=u("Float64Array"),m.arrayBuffer=u("ArrayBuffer"),m.sharedArrayBuffer=u("SharedArrayBuffer"),m.dataView=u("DataView"),m.directInstanceOf=(Q,oe)=>m.object(Q)&&m.object(oe)&&Object.getPrototypeOf(Q)===oe.prototype,m.truthy=Q=>Boolean(Q),m.falsy=Q=>!Q,m.nan=Q=>Number.isNaN(Q);const w=new Set(["undefined","string","number","boolean","symbol"]);m.primitive=Q=>m.null_(Q)||w.has(typeof Q),m.integer=Q=>Number.isInteger(Q),m.safeInteger=Q=>Number.isSafeInteger(Q),m.plainObject=Q=>{let oe;return l(Q)==="Object"&&(oe=Object.getPrototypeOf(Q),oe===null||oe===Object.getPrototypeOf({}))};const E=new Set(["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"]);m.typedArray=Q=>{const oe=l(Q);return oe===null?!1:E.has(oe)};const A=Q=>m.safeInteger(Q)&&Q>-1;m.arrayLike=Q=>!m.nullOrUndefined(Q)&&!m.function_(Q)&&A(Q.length),m.inRange=(Q,oe)=>{if(m.number(oe))return Q>=Math.min(0,oe)&&Q<=Math.max(oe,0);if(m.array(oe)&&oe.length===2)return Q>=Math.min.apply(null,oe)&&Q<=Math.max.apply(null,oe);throw new TypeError(`Invalid range: ${n.inspect(oe)}`)};const C=1,k=["innerHTML","ownerDocument","style","attributes","nodeValue"];m.domElement=Q=>m.object(Q)&&Q.nodeType===C&&m.string(Q.nodeName)&&!m.plainObject(Q)&&k.every(oe=>oe in Q),m.nodeStream=Q=>!m.nullOrUndefined(Q)&&y(Q)&&m.function_(Q.pipe),m.infinite=Q=>Q===1/0||Q===-1/0;const B=Q=>oe=>m.integer(oe)&&Math.abs(oe%2)===Q;m.even=B(0),m.odd=B(1);const D=Q=>m.string(Q)&&/\S/.test(Q)===!1,q=Q=>(m.string(Q)||m.array(Q))&&Q.length===0,j=Q=>!m.map(Q)&&!m.set(Q)&&m.object(Q)&&Object.keys(Q).length===0,J=Q=>(m.map(Q)||m.set(Q))&&Q.size===0;m.empty=Q=>m.falsy(Q)||q(Q)||j(Q)||J(Q),m.emptyOrWhitespace=Q=>m.empty(Q)||D(Q);const Y=(Q,oe,ae)=>{const U=Array.prototype.slice.call(ae,1);if(m.function_(oe)===!1)throw new TypeError(`Invalid predicate: ${n.inspect(oe)}`);if(U.length===0)throw new TypeError("Invalid number of values");return Q.call(U,oe)};function L(Q){return Y(Array.prototype.some,Q,arguments)}m.any=L;function Z(Q){return Y(Array.prototype.every,Q,arguments)}m.all=Z})(d||(d={})),Object.defineProperties(d,{class:{value:d.class_},function:{value:d.function_},null:{value:d.null_}}),e.default=d,t.exports=d,t.exports.default=d})(dist$1,distExports);const pReduce=pReduce$1,is=distExports;var pSeries=t=>{const e=[];for(const n of t){const a=is(n);if(a!=="Function")return Promise.reject(new TypeError(`Expected task to be a \`Function\`, received \`${a}\``))}return pReduce(t,(n,a)=>Promise.resolve().then(a).then(o=>{e.push(o)})).then(()=>e)};const difference=(t,e)=>new Set([...t].filter(n=>!e.has(n))),DEFAULT_OPTIONS={start:!0,pollInterval:1e3};class IpfsPubsubPeerMonitor extends eventsExports{constructor(e,n,a){super(),this._pubsub=e,this._topic=n,this._options=Object.assign({},DEFAULT_OPTIONS,a),this._peers=[],this._interval=null,this._options.start&&this.start()}get started(){return this._interval!==null}set started(e){throw new Error("'started' is read-only")}start(){this._interval&&this.stop(),this._interval=setInterval(this._pollPeers.bind(this),this._options.pollInterval),this._pollPeers()}stop(){clearInterval(this._interval),this._interval=null,this.removeAllListeners("error"),this.removeAllListeners("join"),this.removeAllListeners("leave")}async getPeers(){return this._peers=await this._pubsub.peers(this._topic),this._peers.slice()}hasPeer(e){return this._peers.includes(e)}async _pollPeers(){try{const e=await this._pubsub.peers(this._topic);IpfsPubsubPeerMonitor._emitJoinsAndLeaves(new Set(this._peers),new Set(e),this),this._peers=e}catch(e){clearInterval(this._interval),this.emit("error",e)}}static _emitJoinsAndLeaves(e,n,a){const o=u=>a.emit("join",u),l=u=>a.emit("leave",u);difference(n,e).forEach(o),difference(e,n).forEach(l)}}const logger$n=src$8.create("pubsub",{color:src$8.Colors.Yellow});src$8.setLogLevel("ERROR");const maxTopicsOpen=256;let topicsOpenCount=0;class IPFSPubsub{constructor(e,n){this._ipfs=e,this._id=n,this._subscriptions={},this._ipfs.pubsub===null&&logger$n.error("The provided version of ipfs doesn't have pubsub support. Messages will not be exchanged."),this._handleMessage=this._handleMessage.bind(this),this._ipfs.setMaxListeners&&this._ipfs.setMaxListeners(maxTopicsOpen)}async subscribe(e,n,a,o={}){if(!this._subscriptions[e]&&this._ipfs.pubsub){await this._ipfs.pubsub.subscribe(e,this._handleMessage,o);const l=new IpfsPubsubPeerMonitor(this._ipfs.pubsub,e);l.on("join",u=>{logger$n.debug(`Peer joined ${e}:`),logger$n.debug(u),this._subscriptions[e]?a(e,u):(logger$n.warn("Peer joined a room we don't have a subscription for"),logger$n.warn(e,u))}),l.on("leave",u=>logger$n.debug(`Peer ${u} left ${e}`)),l.on("error",u=>logger$n.error(u)),this._subscriptions[e]={topicMonitor:l,onMessage:n,onNewPeer:a},topicsOpenCount++,logger$n.debug("Topics open:",topicsOpenCount)}}async unsubscribe(e){this._subscriptions[e]&&(await this._ipfs.pubsub.unsubscribe(e,this._handleMessage),this._subscriptions[e].topicMonitor.stop(),delete this._subscriptions[e],logger$n.debug(`Unsubscribed from '${e}'`),topicsOpenCount--,logger$n.debug("Topics open:",topicsOpenCount))}publish(e,n,a={}){if(this._subscriptions[e]&&this._ipfs.pubsub){let o;Buffer$y.isBuffer(n)||typeof n=="string"?o=n:o=JSON.stringify(n),this._ipfs.pubsub.publish(e,Buffer$y.from(o),a)}}async disconnect(){const e=Object.keys(this._subscriptions);await pSeries(e.map(n=>this.unsubscribe.bind(this,n))),this._subscriptions={}}async _handleMessage(e){if(String(e.from)===this._id)return;let n;const a=e.topic?e.topic:e.topicIDs[0];try{n=JSON.parse(Buffer$y.from(e.data).toString())}catch{n=e.data}const o=this._subscriptions[a];o&&o.onMessage&&n&&await o.onMessage(a,n,e.from)}}const logger$m=src$8.create("cache",{color:src$8.Colors.Magenta});src$8.setLogLevel("ERROR");class Cache{constructor(e){this._store=e}get status(){return this._store.status}async close(){if(!this._store)throw new Error("No cache store found to close");this.status==="open"&&await this._store.close()}async open(){if(!this._store)throw new Error("No cache store found to open");this.status!=="open"&&await this._store.open()}async get(e){try{return JSON.parse(await this._store.get(e))}catch(n){if(n.code==="LEVEL_NOT_FOUND"||n.cause!==void 0&&n.cause.code==="LEVEL_NOT_FOUND")return null;throw n}}async set(e,n){await this._store.put(e,JSON.stringify(n)),logger$m.debug(`cache: Set ${e} to ${JSON.stringify(n)}`)}load(){}destroy(){}async del(e){await this._store.del(e)}}var browserLevel={},abstractLevel$1={},abstractLevel={},levelSupports={};levelSupports.supports=function(...e){const n=e.reduce((a,o)=>Object.assign(a,o),{});return Object.assign(n,{snapshots:n.snapshots||!1,permanence:n.permanence||!1,seek:n.seek||!1,clear:n.clear||!1,getMany:n.getMany||!1,keyIterator:n.keyIterator||!1,valueIterator:n.valueIterator||!1,iteratorNextv:n.iteratorNextv||!1,iteratorAll:n.iteratorAll||!1,status:n.status||!1,createIfMissing:n.createIfMissing||!1,errorIfExists:n.errorIfExists||!1,deferredOpen:n.deferredOpen||!1,promises:n.promises||!1,streams:n.streams||!1,encodings:Object.assign({},n.encodings),events:Object.assign({},n.events),additionalMethods:Object.assign({},n.additionalMethods)})};var levelTranscoder={},moduleError=class extends Error{constructor(e,n){super(e||""),typeof n=="object"&&n!==null&&(n.code&&(this.code=String(n.code)),n.expected&&(this.expected=!0),n.transient&&(this.transient=!0),n.cause&&(this.cause=n.cause)),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},encodings$2={};let lazy=null;var textEndec$1=function(){return lazy===null&&(lazy={textEncoder:new TextEncoder,textDecoder:new TextDecoder}),lazy},formats$2={},encoding={};const ModuleError$8=moduleError,formats$1=new Set(["buffer","view","utf8"]);let Encoding$2=class{constructor(e){if(this.encode=e.encode||this.encode,this.decode=e.decode||this.decode,this.name=e.name||this.name,this.format=e.format||this.format,typeof this.encode!="function")throw new TypeError("The 'encode' property must be a function");if(typeof this.decode!="function")throw new TypeError("The 'decode' property must be a function");if(this.encode=this.encode.bind(this),this.decode=this.decode.bind(this),typeof this.name!="string"||this.name==="")throw new TypeError("The 'name' property must be a string");if(typeof this.format!="string"||!formats$1.has(this.format))throw new TypeError("The 'format' property must be one of 'buffer', 'view', 'utf8'");e.createViewTranscoder&&(this.createViewTranscoder=e.createViewTranscoder),e.createBufferTranscoder&&(this.createBufferTranscoder=e.createBufferTranscoder),e.createUTF8Transcoder&&(this.createUTF8Transcoder=e.createUTF8Transcoder)}get commonName(){return this.name.split("+")[0]}createBufferTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'buffer'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createViewTranscoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'view'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}createUTF8Transcoder(){throw new ModuleError$8(`Encoding '${this.name}' cannot be transcoded to 'utf8'`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"})}};encoding.Encoding=Encoding$2;const{Buffer:Buffer$3}=buffer$3||{},{Encoding:Encoding$1}=encoding,textEndec=textEndec$1;let BufferFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"buffer"})}createViewTranscoder(){return new ViewFormat$2({encode:this.encode,decode:e=>this.decode(Buffer$3.from(e.buffer,e.byteOffset,e.byteLength)),name:`${this.name}+view`})}createBufferTranscoder(){return this}},ViewFormat$2=class extends Encoding$1{constructor(e){super({...e,format:"view"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>{const n=this.encode(e);return Buffer$3.from(n.buffer,n.byteOffset,n.byteLength)},decode:this.decode,name:`${this.name}+buffer`})}createViewTranscoder(){return this}},UTF8Format$2=class extends Encoding$1{constructor(e){super({...e,format:"utf8"})}createBufferTranscoder(){return new BufferFormat$2({encode:e=>Buffer$3.from(this.encode(e),"utf8"),decode:e=>this.decode(e.toString("utf8")),name:`${this.name}+buffer`})}createViewTranscoder(){const{textEncoder:e,textDecoder:n}=textEndec();return new ViewFormat$2({encode:a=>e.encode(this.encode(a)),decode:a=>this.decode(n.decode(a)),name:`${this.name}+view`})}createUTF8Transcoder(){return this}};formats$2.BufferFormat=BufferFormat$2;formats$2.ViewFormat=ViewFormat$2;formats$2.UTF8Format=UTF8Format$2;const{Buffer:Buffer$2}=buffer$3||{Buffer:{isBuffer:()=>!1}},{textEncoder:textEncoder$1,textDecoder}=textEndec$1(),{BufferFormat:BufferFormat$1,ViewFormat:ViewFormat$1,UTF8Format:UTF8Format$1}=formats$2,identity$7=t=>t;encodings$2.utf8=new UTF8Format$1({encode:function(t){return Buffer$2.isBuffer(t)?t.toString("utf8"):ArrayBuffer.isView(t)?textDecoder.decode(t):String(t)},decode:identity$7,name:"utf8",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:function(t){return textDecoder.decode(t)},name:`${this.name}+view`})},createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$2.from(t.buffer,t.byteOffset,t.byteLength):Buffer$2.from(String(t),"utf8")},decode:function(t){return t.toString("utf8")},name:`${this.name}+buffer`})}});encodings$2.json=new UTF8Format$1({encode:JSON.stringify,decode:JSON.parse,name:"json"});encodings$2.buffer=new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$2.from(t.buffer,t.byteOffset,t.byteLength):Buffer$2.from(String(t),"utf8")},decode:identity$7,name:"buffer",createViewTranscoder(){return new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:Buffer$2.from(String(t),"utf8")},decode:function(t){return Buffer$2.from(t.buffer,t.byteOffset,t.byteLength)},name:`${this.name}+view`})}});encodings$2.view=new ViewFormat$1({encode:function(t){return ArrayBuffer.isView(t)?t:textEncoder$1.encode(t)},decode:identity$7,name:"view",createBufferTranscoder(){return new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:ArrayBuffer.isView(t)?Buffer$2.from(t.buffer,t.byteOffset,t.byteLength):Buffer$2.from(String(t),"utf8")},decode:identity$7,name:`${this.name}+buffer`})}});encodings$2.hex=new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:Buffer$2.from(String(t),"hex")},decode:function(t){return t.toString("hex")},name:"hex"});encodings$2.base64=new BufferFormat$1({encode:function(t){return Buffer$2.isBuffer(t)?t:Buffer$2.from(String(t),"base64")},decode:function(t){return t.toString("base64")},name:"base64"});const ModuleError$7=moduleError,encodings$1=encodings$2,{Encoding}=encoding,{BufferFormat,ViewFormat,UTF8Format}=formats$2,kFormats=Symbol("formats"),kEncodings=Symbol("encodings"),validFormats=new Set(["buffer","view","utf8"]);let Transcoder$1=class{constructor(e){if(Array.isArray(e)){if(!e.every(n=>validFormats.has(n)))throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}else throw new TypeError("The first argument 'formats' must be an array");this[kEncodings]=new Map,this[kFormats]=new Set(e);for(const n in encodings$1)try{this.encoding(n)}catch(a){if(a.code!=="LEVEL_ENCODING_NOT_SUPPORTED")throw a}}encodings(){return Array.from(new Set(this[kEncodings].values()))}encoding(e){let n=this[kEncodings].get(e);if(n===void 0){if(typeof e=="string"&&e!==""){if(n=lookup[e],!n)throw new ModuleError$7(`Encoding '${e}' is not found`,{code:"LEVEL_ENCODING_NOT_FOUND"})}else{if(typeof e!="object"||e===null)throw new TypeError("First argument 'encoding' must be a string or object");n=from$7(e)}const{name:a,format:o}=n;if(!this[kFormats].has(o))if(this[kFormats].has("view"))n=n.createViewTranscoder();else if(this[kFormats].has("buffer"))n=n.createBufferTranscoder();else if(this[kFormats].has("utf8"))n=n.createUTF8Transcoder();else throw new ModuleError$7(`Encoding '${a}' cannot be transcoded`,{code:"LEVEL_ENCODING_NOT_SUPPORTED"});for(const l of[e,a,n.name,n.commonName])this[kEncodings].set(l,n)}return n}};levelTranscoder.Transcoder=Transcoder$1;function from$7(t){if(t instanceof Encoding)return t;const e="type"in t&&typeof t.type=="string"?t.type:void 0,n=t.name||e||`anonymous-${anonymousCount++}`;switch(detectFormat(t)){case"view":return new ViewFormat({...t,name:n});case"utf8":return new UTF8Format({...t,name:n});case"buffer":return new BufferFormat({...t,name:n});default:throw new TypeError("Format must be one of 'buffer', 'view', 'utf8'")}}function detectFormat(t){return"format"in t&&t.format!==void 0?t.format:"buffer"in t&&typeof t.buffer=="boolean"?t.buffer?"buffer":"utf8":"code"in t&&Number.isInteger(t.code)?"view":"buffer"}const aliases={binary:encodings$1.buffer,"utf-8":encodings$1.utf8},lookup={...encodings$1,...aliases};let anonymousCount=0;var catering={},nextTickBrowser$1=typeof queueMicrotask=="function"?queueMicrotask:t=>Promise.resolve().then(t),nextTick=nextTickBrowser$1;catering.fromCallback=function(t,e){if(t===void 0){var n=new Promise(function(a,o){t=function(l,u){l?o(l):a(u)}});t[e!==void 0?e:"promise"]=n}else if(typeof t!="function")throw new TypeError("Callback must be a function");return t};catering.fromPromise=function(t,e){if(e===void 0)return t;t.then(function(n){nextTick(()=>e(null,n))}).catch(function(n){nextTick(()=>e(n))})};var abstractIterator={},common$2={};common$2.getCallback=function(t,e){return typeof t=="function"?t:e};common$2.getOptions=function(t,e){return typeof t=="object"&&t!==null?t:e!==void 0?e:{}};const{fromCallback:fromCallback$3}=catering,ModuleError$6=moduleError,{getOptions:getOptions$2,getCallback:getCallback$2}=common$2,kPromise$3=Symbol("promise"),kCallback$1=Symbol("callback"),kWorking=Symbol("working"),kHandleOne$1=Symbol("handleOne"),kHandleMany$1=Symbol("handleMany"),kAutoClose=Symbol("autoClose"),kFinishWork=Symbol("finishWork"),kReturnMany=Symbol("returnMany"),kClosing=Symbol("closing"),kHandleClose=Symbol("handleClose"),kClosed=Symbol("closed"),kCloseCallbacks$1=Symbol("closeCallbacks"),kKeyEncoding$1=Symbol("keyEncoding"),kValueEncoding$1=Symbol("valueEncoding"),kAbortOnClose=Symbol("abortOnClose"),kLegacy=Symbol("legacy"),kKeys=Symbol("keys"),kValues=Symbol("values"),kLimit=Symbol("limit"),kCount=Symbol("count"),emptyOptions$1=Object.freeze({}),noop$4=()=>{};let warnedEnd=!1;class CommonIterator{constructor(e,n,a){if(typeof e!="object"||e===null){const o=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${o}`)}if(typeof n!="object"||n===null)throw new TypeError("The second argument must be an options object");this[kClosed]=!1,this[kCloseCallbacks$1]=[],this[kWorking]=!1,this[kClosing]=!1,this[kAutoClose]=!1,this[kCallback$1]=null,this[kHandleOne$1]=this[kHandleOne$1].bind(this),this[kHandleMany$1]=this[kHandleMany$1].bind(this),this[kHandleClose]=this[kHandleClose].bind(this),this[kKeyEncoding$1]=n[kKeyEncoding$1],this[kValueEncoding$1]=n[kValueEncoding$1],this[kLegacy]=a,this[kLimit]=Number.isInteger(n.limit)&&n.limit>=0?n.limit:1/0,this[kCount]=0,this[kAbortOnClose]=!!n.abortOnClose,this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get count(){return this[kCount]}get limit(){return this[kLimit]}next(e){let n;if(e===void 0)n=new Promise((a,o)=>{e=(l,u,d)=>{l?o(l):this[kLegacy]?u===void 0&&d===void 0?a():a([u,d]):a(u)}});else if(typeof e!="function")throw new TypeError("Callback must be a function");return this[kClosing]?this.nextTick(e,new ModuleError$6("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(e,new ModuleError$6("Iterator is busy: cannot call next() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=e,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleOne$1],null):this._next(this[kHandleOne$1])),n}_next(e){this.nextTick(e)}nextv(e,n,a){return a=getCallback$2(n,a),a=fromCallback$3(a,kPromise$3),n=getOptions$2(n,emptyOptions$1),Number.isInteger(e)?(this[kClosing]?this.nextTick(a,new ModuleError$6("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(a,new ModuleError$6("Iterator is busy: cannot call nextv() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(e<1&&(e=1),this[kLimit]<1/0&&(e=Math.min(e,this[kLimit]-this[kCount])),this[kWorking]=!0,this[kCallback$1]=a,e<=0?this.nextTick(this[kHandleMany$1],null,[]):this._nextv(e,n,this[kHandleMany$1])),a[kPromise$3]):(this.nextTick(a,new TypeError("The first argument 'size' must be an integer")),a[kPromise$3])}_nextv(e,n,a){const o=[],l=(u,d,m)=>{if(u)return a(u);if(this[kLegacy]?d===void 0&&m===void 0:d===void 0)return a(null,o);o.push(this[kLegacy]?[d,m]:d),o.length===e?a(null,o):this._next(l)};this._next(l)}all(e,n){return n=getCallback$2(e,n),n=fromCallback$3(n,kPromise$3),e=getOptions$2(e,emptyOptions$1),this[kClosing]?this.nextTick(n,new ModuleError$6("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this[kWorking]?this.nextTick(n,new ModuleError$6("Iterator is busy: cannot call all() until previous call has completed",{code:"LEVEL_ITERATOR_BUSY"})):(this[kWorking]=!0,this[kCallback$1]=n,this[kAutoClose]=!0,this[kCount]>=this[kLimit]?this.nextTick(this[kHandleMany$1],null,[]):this._all(e,this[kHandleMany$1])),n[kPromise$3]}_all(e,n){let a=this[kCount];const o=[],l=()=>{const d=this[kLimit]<1/0?Math.min(1e3,this[kLimit]-a):1e3;d<=0?this.nextTick(n,null,o):this._nextv(d,emptyOptions$1,u)},u=(d,m)=>{d?n(d):m.length===0?n(null,o):(o.push.apply(o,m),a+=m.length,l())};l()}[kFinishWork](){const e=this[kCallback$1];return this[kAbortOnClose]&&e===null?noop$4:(this[kWorking]=!1,this[kCallback$1]=null,this[kClosing]&&this._close(this[kHandleClose]),e)}[kReturnMany](e,n,a){this[kAutoClose]?this.close(e.bind(null,n,a)):e(n,a)}seek(e,n){if(n=getOptions$2(n,emptyOptions$1),!this[kClosing]){if(this[kWorking])throw new ModuleError$6("Iterator is busy: cannot call seek() until next() has completed",{code:"LEVEL_ITERATOR_BUSY"});{const a=this.db.keyEncoding(n.keyEncoding||this[kKeyEncoding$1]),o=a.format;n.keyEncoding!==o&&(n={...n,keyEncoding:o});const l=this.db.prefixKey(a.encode(e),o);this._seek(l,n)}}}_seek(e,n){throw new ModuleError$6("Iterator does not support seek()",{code:"LEVEL_NOT_SUPPORTED"})}close(e){return e=fromCallback$3(e,kPromise$3),this[kClosed]?this.nextTick(e):this[kClosing]?this[kCloseCallbacks$1].push(e):(this[kClosing]=!0,this[kCloseCallbacks$1].push(e),this[kWorking]?this[kAbortOnClose]&&this[kFinishWork]()(new ModuleError$6("Aborted on iterator close()",{code:"LEVEL_ITERATOR_NOT_OPEN"})):this._close(this[kHandleClose])),e[kPromise$3]}_close(e){this.nextTick(e)}[kHandleClose](){this[kClosed]=!0,this.db.detachResource(this);const e=this[kCloseCallbacks$1];this[kCloseCallbacks$1]=[];for(const n of e)n()}async*[Symbol.asyncIterator](){try{let e;for(;(e=await this.next())!==void 0;)yield e}finally{this[kClosed]||await this.close()}}}let AbstractIterator$3=class extends CommonIterator{constructor(e,n){super(e,n,!0),this[kKeys]=n.keys!==!1,this[kValues]=n.values!==!1}[kHandleOne$1](e,n,a){const o=this[kFinishWork]();if(e)return o(e);try{n=this[kKeys]&&n!==void 0?this[kKeyEncoding$1].decode(n):void 0,a=this[kValues]&&a!==void 0?this[kValueEncoding$1].decode(a):void 0}catch(l){return o(new IteratorDecodeError("entry",l))}n===void 0&&a===void 0||this[kCount]++,o(null,n,a)}[kHandleMany$1](e,n){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(const o of n){const l=o[0],u=o[1];o[0]=this[kKeys]&&l!==void 0?this[kKeyEncoding$1].decode(l):void 0,o[1]=this[kValues]&&u!==void 0?this[kValueEncoding$1].decode(u):void 0}}catch(o){return this[kReturnMany](a,new IteratorDecodeError("entries",o))}this[kCount]+=n.length,this[kReturnMany](a,null,n)}end(e){return!warnedEnd&&typeof console<"u"&&(warnedEnd=!0,console.warn(new ModuleError$6("The iterator.end() method was renamed to close() and end() is an alias that will be removed in a future version",{code:"LEVEL_LEGACY"}))),this.close(e)}},AbstractKeyIterator$2=class extends CommonIterator{constructor(e,n){super(e,n,!1)}[kHandleOne$1](e,n){const a=this[kFinishWork]();if(e)return a(e);try{n=n!==void 0?this[kKeyEncoding$1].decode(n):void 0}catch(o){return a(new IteratorDecodeError("key",o))}n!==void 0&&this[kCount]++,a(null,n)}[kHandleMany$1](e,n){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(let o=0;o<n.length;o++){const l=n[o];n[o]=l!==void 0?this[kKeyEncoding$1].decode(l):void 0}}catch(o){return this[kReturnMany](a,new IteratorDecodeError("keys",o))}this[kCount]+=n.length,this[kReturnMany](a,null,n)}},AbstractValueIterator$2=class extends CommonIterator{constructor(e,n){super(e,n,!1)}[kHandleOne$1](e,n){const a=this[kFinishWork]();if(e)return a(e);try{n=n!==void 0?this[kValueEncoding$1].decode(n):void 0}catch(o){return a(new IteratorDecodeError("value",o))}n!==void 0&&this[kCount]++,a(null,n)}[kHandleMany$1](e,n){const a=this[kFinishWork]();if(e)return this[kReturnMany](a,e);try{for(let o=0;o<n.length;o++){const l=n[o];n[o]=l!==void 0?this[kValueEncoding$1].decode(l):void 0}}catch(o){return this[kReturnMany](a,new IteratorDecodeError("values",o))}this[kCount]+=n.length,this[kReturnMany](a,null,n)}};class IteratorDecodeError extends ModuleError$6{constructor(e,n){super(`Iterator could not decode ${e}`,{code:"LEVEL_DECODE_ERROR",cause:n})}}for(const t of["_ended property","_nexting property","_end method"])Object.defineProperty(AbstractIterator$3.prototype,t.split(" ")[0],{get(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})},set(){throw new ModuleError$6(`The ${t} has been removed`,{code:"LEVEL_LEGACY"})}});AbstractIterator$3.keyEncoding=kKeyEncoding$1;AbstractIterator$3.valueEncoding=kValueEncoding$1;abstractIterator.AbstractIterator=AbstractIterator$3;abstractIterator.AbstractKeyIterator=AbstractKeyIterator$2;abstractIterator.AbstractValueIterator=AbstractValueIterator$2;var defaultKvIterator={};const{AbstractKeyIterator:AbstractKeyIterator$1,AbstractValueIterator:AbstractValueIterator$1}=abstractIterator,kIterator=Symbol("iterator"),kCallback=Symbol("callback"),kHandleOne=Symbol("handleOne"),kHandleMany=Symbol("handleMany");let DefaultKeyIterator$1=class extends AbstractKeyIterator$1{constructor(e,n){super(e,n),this[kIterator]=e.iterator({...n,keys:!0,values:!1}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}},DefaultValueIterator$1=class extends AbstractValueIterator$1{constructor(e,n){super(e,n),this[kIterator]=e.iterator({...n,keys:!1,values:!0}),this[kHandleOne]=this[kHandleOne].bind(this),this[kHandleMany]=this[kHandleMany].bind(this)}};for(const t of[DefaultKeyIterator$1,DefaultValueIterator$1]){const e=t===DefaultKeyIterator$1,n=e?a=>a[0]:a=>a[1];t.prototype._next=function(a){this[kCallback]=a,this[kIterator].next(this[kHandleOne])},t.prototype[kHandleOne]=function(a,o,l){const u=this[kCallback];a?u(a):u(null,e?o:l)},t.prototype._nextv=function(a,o,l){this[kCallback]=l,this[kIterator].nextv(a,o,this[kHandleMany])},t.prototype._all=function(a,o){this[kCallback]=o,this[kIterator].all(a,this[kHandleMany])},t.prototype[kHandleMany]=function(a,o){const l=this[kCallback];a?l(a):l(null,o.map(n))},t.prototype._seek=function(a,o){this[kIterator].seek(a,o)},t.prototype._close=function(a){this[kIterator].close(a)}}defaultKvIterator.DefaultKeyIterator=DefaultKeyIterator$1;defaultKvIterator.DefaultValueIterator=DefaultValueIterator$1;var deferredIterator={};const{AbstractIterator:AbstractIterator$2,AbstractKeyIterator,AbstractValueIterator}=abstractIterator,ModuleError$5=moduleError,kNut=Symbol("nut"),kUndefer$1=Symbol("undefer"),kFactory=Symbol("factory");let DeferredIterator$1=class extends AbstractIterator$2{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.iterator(n),this.db.defer(()=>this[kUndefer$1]())}},DeferredKeyIterator$1=class extends AbstractKeyIterator{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.keys(n),this.db.defer(()=>this[kUndefer$1]())}},DeferredValueIterator$1=class extends AbstractValueIterator{constructor(e,n){super(e,n),this[kNut]=null,this[kFactory]=()=>e.values(n),this.db.defer(()=>this[kUndefer$1]())}};for(const t of[DeferredIterator$1,DeferredKeyIterator$1,DeferredValueIterator$1])t.prototype[kUndefer$1]=function(){this.db.status==="open"&&(this[kNut]=this[kFactory]())},t.prototype._next=function(e){this[kNut]!==null?this[kNut].next(e):this.db.status==="opening"?this.db.defer(()=>this._next(e)):this.nextTick(e,new ModuleError$5("Iterator is not open: cannot call next() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._nextv=function(e,n,a){this[kNut]!==null?this[kNut].nextv(e,n,a):this.db.status==="opening"?this.db.defer(()=>this._nextv(e,n,a)):this.nextTick(a,new ModuleError$5("Iterator is not open: cannot call nextv() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._all=function(e,n){this[kNut]!==null?this[kNut].all(n):this.db.status==="opening"?this.db.defer(()=>this._all(e,n)):this.nextTick(n,new ModuleError$5("Iterator is not open: cannot call all() after close()",{code:"LEVEL_ITERATOR_NOT_OPEN"}))},t.prototype._seek=function(e,n){this[kNut]!==null?this[kNut]._seek(e,n):this.db.status==="opening"&&this.db.defer(()=>this._seek(e,n))},t.prototype._close=function(e){this[kNut]!==null?this[kNut].close(e):this.db.status==="opening"?this.db.defer(()=>this._close(e)):this.nextTick(e)};deferredIterator.DeferredIterator=DeferredIterator$1;deferredIterator.DeferredKeyIterator=DeferredKeyIterator$1;deferredIterator.DeferredValueIterator=DeferredValueIterator$1;var defaultChainedBatch={},abstractChainedBatch={};const{fromCallback:fromCallback$2}=catering,ModuleError$4=moduleError,{getCallback:getCallback$1,getOptions:getOptions$1}=common$2,kPromise$2=Symbol("promise"),kStatus$1=Symbol("status"),kOperations$1=Symbol("operations"),kFinishClose=Symbol("finishClose"),kCloseCallbacks=Symbol("closeCallbacks");let AbstractChainedBatch$1=class{constructor(e){if(typeof e!="object"||e===null){const n=e===null?"null":typeof e;throw new TypeError(`The first argument must be an abstract-level database, received ${n}`)}this[kOperations$1]=[],this[kCloseCallbacks]=[],this[kStatus$1]="open",this[kFinishClose]=this[kFinishClose].bind(this),this.db=e,this.db.attachResource(this),this.nextTick=e.nextTick}get length(){return this[kOperations$1].length}put(e,n,a){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call put() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const o=this.db._checkKey(e)||this.db._checkValue(n);if(o)throw o;const l=a&&a.sublevel!=null?a.sublevel:this.db,u=a,d=l.keyEncoding(a&&a.keyEncoding),m=l.valueEncoding(a&&a.valueEncoding),y=d.format;a={...a,keyEncoding:y,valueEncoding:m.format},l!==this.db&&(a.sublevel=null);const b=l.prefixKey(d.encode(e),y),_=m.encode(n);return this._put(b,_,a),this[kOperations$1].push({...u,type:"put",key:e,value:n}),this}_put(e,n,a){}del(e,n){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call del() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});const a=this.db._checkKey(e);if(a)throw a;const o=n&&n.sublevel!=null?n.sublevel:this.db,l=n,u=o.keyEncoding(n&&n.keyEncoding),d=u.format;return n={...n,keyEncoding:d},o!==this.db&&(n.sublevel=null),this._del(o.prefixKey(u.encode(e),d),n),this[kOperations$1].push({...l,type:"del",key:e}),this}_del(e,n){}clear(){if(this[kStatus$1]!=="open")throw new ModuleError$4("Batch is not open: cannot call clear() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"});return this._clear(),this[kOperations$1]=[],this}_clear(){}write(e,n){return n=getCallback$1(e,n),n=fromCallback$2(n,kPromise$2),e=getOptions$1(e),this[kStatus$1]!=="open"?this.nextTick(n,new ModuleError$4("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"})):this.length===0?this.close(n):(this[kStatus$1]="writing",this._write(e,a=>{this[kStatus$1]="closing",this[kCloseCallbacks].push(()=>n(a)),a||this.db.emit("batch",this[kOperations$1]),this._close(this[kFinishClose])})),n[kPromise$2]}_write(e,n){}close(e){return e=fromCallback$2(e,kPromise$2),this[kStatus$1]==="closing"?this[kCloseCallbacks].push(e):this[kStatus$1]==="closed"?this.nextTick(e):(this[kCloseCallbacks].push(e),this[kStatus$1]!=="writing"&&(this[kStatus$1]="closing",this._close(this[kFinishClose]))),e[kPromise$2]}_close(e){this.nextTick(e)}[kFinishClose](){this[kStatus$1]="closed",this.db.detachResource(this);const e=this[kCloseCallbacks];this[kCloseCallbacks]=[];for(const n of e)n()}};abstractChainedBatch.AbstractChainedBatch=AbstractChainedBatch$1;const{AbstractChainedBatch}=abstractChainedBatch,ModuleError$3=moduleError,kEncoded=Symbol("encoded");let DefaultChainedBatch$1=class extends AbstractChainedBatch{constructor(e){super(e),this[kEncoded]=[]}_put(e,n,a){this[kEncoded].push({...a,type:"put",key:e,value:n})}_del(e,n){this[kEncoded].push({...n,type:"del",key:e})}_clear(){this[kEncoded]=[]}_write(e,n){this.db.status==="opening"?this.db.defer(()=>this._write(e,n)):this.db.status==="open"?this[kEncoded].length===0?this.nextTick(n):this.db._batch(this[kEncoded],e,n):this.nextTick(n,new ModuleError$3("Batch is not open: cannot call write() after write() or close()",{code:"LEVEL_BATCH_NOT_OPEN"}))}};defaultChainedBatch.DefaultChainedBatch=DefaultChainedBatch$1;const ModuleError$2=moduleError,hasOwnProperty$3=Object.prototype.hasOwnProperty,rangeOptions$1=new Set(["lt","lte","gt","gte"]);var rangeOptions_1=function(t,e){const n={};for(const a in t)if(hasOwnProperty$3.call(t,a)&&!(a==="keyEncoding"||a==="valueEncoding")){if(a==="start"||a==="end")throw new ModuleError$2(`The legacy range option '${a}' has been removed`,{code:"LEVEL_LEGACY"});if(a==="encoding")throw new ModuleError$2("The levelup-style 'encoding' alias has been removed, use 'valueEncoding' instead",{code:"LEVEL_LEGACY"});rangeOptions$1.has(a)?n[a]=e.encode(t[a]):n[a]=t[a]}return n.reverse=!!n.reverse,n.limit=Number.isInteger(n.limit)&&n.limit>=0?n.limit:-1,n};/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let promise;var queueMicrotask_1=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:commonjsGlobal):t=>(promise||(promise=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0)),nextTickBrowser,hasRequiredNextTickBrowser;function requireNextTickBrowser(){if(hasRequiredNextTickBrowser)return nextTickBrowser;hasRequiredNextTickBrowser=1;const t=queueMicrotask_1;return nextTickBrowser=function(e,...n){n.length===0?t(e):t(()=>e(...n))},nextTickBrowser}var abstractSublevelIterator={},hasRequiredAbstractSublevelIterator;function requireAbstractSublevelIterator(){if(hasRequiredAbstractSublevelIterator)return abstractSublevelIterator;hasRequiredAbstractSublevelIterator=1;const{AbstractIterator:t,AbstractKeyIterator:e,AbstractValueIterator:n}=abstractIterator,a=Symbol("unfix"),o=Symbol("iterator"),l=Symbol("handleOne"),u=Symbol("handleMany"),d=Symbol("callback");class m extends t{constructor(w,E,A,C){super(w,E),this[o]=A,this[a]=C,this[l]=this[l].bind(this),this[u]=this[u].bind(this),this[d]=null}[l](w,E,A){const C=this[d];if(w)return C(w);E!==void 0&&(E=this[a](E)),C(w,E,A)}[u](w,E){const A=this[d];if(w)return A(w);for(const C of E){const k=C[0];k!==void 0&&(C[0]=this[a](k))}A(w,E)}}class y extends e{constructor(w,E,A,C){super(w,E),this[o]=A,this[a]=C,this[l]=this[l].bind(this),this[u]=this[u].bind(this),this[d]=null}[l](w,E){const A=this[d];if(w)return A(w);E!==void 0&&(E=this[a](E)),A(w,E)}[u](w,E){const A=this[d];if(w)return A(w);for(let C=0;C<E.length;C++){const k=E[C];k!==void 0&&(E[C]=this[a](k))}A(w,E)}}class b extends n{constructor(w,E,A){super(w,E),this[o]=A}}for(const _ of[m,y])_.prototype._next=function(w){this[d]=w,this[o].next(this[l])},_.prototype._nextv=function(w,E,A){this[d]=A,this[o].nextv(w,E,this[u])},_.prototype._all=function(w,E){this[d]=E,this[o].all(w,this[u])};for(const _ of[b])_.prototype._next=function(w){this[o].next(w)},_.prototype._nextv=function(w,E,A){this[o].nextv(w,E,A)},_.prototype._all=function(w,E){this[o].all(w,E)};for(const _ of[m,y,b])_.prototype._seek=function(w,E){this[o].seek(w,E)},_.prototype._close=function(w){this[o].close(w)};return abstractSublevelIterator.AbstractSublevelIterator=m,abstractSublevelIterator.AbstractSublevelKeyIterator=y,abstractSublevelIterator.AbstractSublevelValueIterator=b,abstractSublevelIterator}var abstractSublevel,hasRequiredAbstractSublevel;function requireAbstractSublevel(){if(hasRequiredAbstractSublevel)return abstractSublevel;hasRequiredAbstractSublevel=1;const t=moduleError,{Buffer:e}=buffer$3||{},{AbstractSublevelIterator:n,AbstractSublevelKeyIterator:a,AbstractSublevelValueIterator:o}=requireAbstractSublevelIterator(),l=Symbol("prefix"),u=Symbol("upperBound"),d=Symbol("prefixRange"),m=Symbol("parent"),y=Symbol("unfix"),b=new TextEncoder,_={separator:"!"};abstractSublevel=function({AbstractLevel:B}){class D extends B{static defaults(j){if(typeof j=="string")throw new t("The subleveldown string shorthand for { separator } has been removed",{code:"LEVEL_LEGACY"});if(j&&j.open)throw new t("The subleveldown open option has been removed",{code:"LEVEL_LEGACY"});return j==null?_:j.separator?j:{...j,separator:"!"}}constructor(j,J,Y){const{separator:L,manifest:Z,...Q}=D.defaults(Y);J=k(J,L);const oe=L.charCodeAt(0)+1,ae=j[m]||j;if(!b.encode(J).every(x=>x>oe&&x<127))throw new t(`Prefix must use bytes > ${oe} < ${127}`,{code:"LEVEL_INVALID_PREFIX"});super(w(ae,Z),Q);const U=(j.prefix||"")+L+J+L,I=U.slice(0,-1)+String.fromCharCode(oe);this[m]=ae,this[l]=new A(U),this[u]=new A(I),this[y]=new C,this.nextTick=ae.nextTick}prefixKey(j,J){if(J==="utf8")return this[l].utf8+j;if(j.byteLength===0)return this[l][J];if(J==="view"){const Y=this[l].view,L=new Uint8Array(Y.byteLength+j.byteLength);return L.set(Y,0),L.set(j,Y.byteLength),L}else{const Y=this[l].buffer;return e.concat([Y,j],Y.byteLength+j.byteLength)}}[d](j,J){j.gte!==void 0?j.gte=this.prefixKey(j.gte,J):j.gt!==void 0?j.gt=this.prefixKey(j.gt,J):j.gte=this[l][J],j.lte!==void 0?j.lte=this.prefixKey(j.lte,J):j.lt!==void 0?j.lt=this.prefixKey(j.lt,J):j.lte=this[u][J]}get prefix(){return this[l].utf8}get db(){return this[m]}_open(j,J){this[m].open({passive:!0},J)}_put(j,J,Y,L){this[m].put(j,J,Y,L)}_get(j,J,Y){this[m].get(j,J,Y)}_getMany(j,J,Y){this[m].getMany(j,J,Y)}_del(j,J,Y){this[m].del(j,J,Y)}_batch(j,J,Y){this[m].batch(j,J,Y)}_clear(j,J){this[d](j,j.keyEncoding),this[m].clear(j,J)}_iterator(j){this[d](j,j.keyEncoding);const J=this[m].iterator(j),Y=this[y].get(this[l].utf8.length,j.keyEncoding);return new n(this,j,J,Y)}_keys(j){this[d](j,j.keyEncoding);const J=this[m].keys(j),Y=this[y].get(this[l].utf8.length,j.keyEncoding);return new a(this,j,J,Y)}_values(j){this[d](j,j.keyEncoding);const J=this[m].values(j);return new o(this,j,J)}}return{AbstractSublevel:D}};const w=function(B,D){return{...B.supports,createIfMissing:!1,errorIfExists:!1,events:{},additionalMethods:{},...D,encodings:{utf8:E(B,"utf8"),buffer:E(B,"buffer"),view:E(B,"view")}}},E=function(B,D){return B.supports.encodings[D]?B.keyEncoding(D).name===D:!1};class A{constructor(D){this.utf8=D,this.view=b.encode(D),this.buffer=e?e.from(this.view.buffer,0,this.view.byteLength):{}}}class C{constructor(){this.cache=new Map}get(D,q){let j=this.cache.get(q);return j===void 0&&(q==="view"?j=function(J,Y){return Y.subarray(J)}.bind(null,D):j=function(J,Y){return Y.slice(J)}.bind(null,D),this.cache.set(q,j)),j}}const k=function(B,D){let q=0,j=B.length;for(;q<j&&B[q]===D;)q++;for(;j>q&&B[j-1]===D;)j--;return B.slice(q,j)};return abstractSublevel}const{supports}=levelSupports,{Transcoder}=levelTranscoder,{EventEmitter:EventEmitter$1}=eventsExports,{fromCallback:fromCallback$1}=catering,ModuleError$1=moduleError,{AbstractIterator:AbstractIterator$1}=abstractIterator,{DefaultKeyIterator,DefaultValueIterator}=defaultKvIterator,{DeferredIterator,DeferredKeyIterator,DeferredValueIterator}=deferredIterator,{DefaultChainedBatch}=defaultChainedBatch,{getCallback,getOptions}=common$2,rangeOptions=rangeOptions_1,kPromise$1=Symbol("promise"),kLanded=Symbol("landed"),kResources=Symbol("resources"),kCloseResources=Symbol("closeResources"),kOperations=Symbol("operations"),kUndefer=Symbol("undefer"),kDeferOpen=Symbol("deferOpen"),kOptions$1=Symbol("options"),kStatus=Symbol("status"),kDefaultOptions=Symbol("defaultOptions"),kTranscoder=Symbol("transcoder"),kKeyEncoding=Symbol("keyEncoding"),kValueEncoding=Symbol("valueEncoding"),noop$3=()=>{};let AbstractLevel$1=class extends EventEmitter$1{constructor(e,n){if(super(),typeof e!="object"||e===null)throw new TypeError("The first argument 'manifest' must be an object");n=getOptions(n);const{keyEncoding:a,valueEncoding:o,passive:l,...u}=n;this[kResources]=new Set,this[kOperations]=[],this[kDeferOpen]=!0,this[kOptions$1]=u,this[kStatus]="opening",this.supports=supports(e,{status:!0,promises:!0,clear:!0,getMany:!0,deferredOpen:!0,snapshots:e.snapshots!==!1,permanence:e.permanence!==!1,keyIterator:!0,valueIterator:!0,iteratorNextv:!0,iteratorAll:!0,encodings:e.encodings||{},events:Object.assign({},e.events,{opening:!0,open:!0,closing:!0,closed:!0,put:!0,del:!0,batch:!0,clear:!0})}),this[kTranscoder]=new Transcoder(formats(this)),this[kKeyEncoding]=this[kTranscoder].encoding(a||"utf8"),this[kValueEncoding]=this[kTranscoder].encoding(o||"utf8");for(const d of this[kTranscoder].encodings())this.supports.encodings[d.commonName]||(this.supports.encodings[d.commonName]=!0);this[kDefaultOptions]={empty:Object.freeze({}),entry:Object.freeze({keyEncoding:this[kKeyEncoding].commonName,valueEncoding:this[kValueEncoding].commonName}),key:Object.freeze({keyEncoding:this[kKeyEncoding].commonName})},this.nextTick(()=>{this[kDeferOpen]&&this.open({passive:!1},noop$3)})}get status(){return this[kStatus]}keyEncoding(e){return this[kTranscoder].encoding(e??this[kKeyEncoding])}valueEncoding(e){return this[kTranscoder].encoding(e??this[kValueEncoding])}open(e,n){n=getCallback(e,n),n=fromCallback$1(n,kPromise$1),e={...this[kOptions$1],...getOptions(e)},e.createIfMissing=e.createIfMissing!==!1,e.errorIfExists=!!e.errorIfExists;const a=o=>{this[kStatus]==="closing"||this[kStatus]==="opening"?this.once(kLanded,o?()=>a(o):a):this[kStatus]!=="open"?n(new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN",cause:o})):n()};return e.passive?this[kStatus]==="opening"?this.once(kLanded,a):this.nextTick(a):this[kStatus]==="closed"||this[kDeferOpen]?(this[kDeferOpen]=!1,this[kStatus]="opening",this.emit("opening"),this._open(e,o=>{if(o){this[kStatus]="closed",this[kCloseResources](()=>{this.emit(kLanded),a(o)}),this[kUndefer]();return}this[kStatus]="open",this[kUndefer](),this.emit(kLanded),this[kStatus]==="open"&&this.emit("open"),this[kStatus]==="open"&&this.emit("ready"),a()})):this[kStatus]==="open"?this.nextTick(a):this.once(kLanded,()=>this.open(e,n)),n[kPromise$1]}_open(e,n){this.nextTick(n)}close(e){e=fromCallback$1(e,kPromise$1);const n=a=>{this[kStatus]==="opening"||this[kStatus]==="closing"?this.once(kLanded,a?n(a):n):this[kStatus]!=="closed"?e(new ModuleError$1("Database is not closed",{code:"LEVEL_DATABASE_NOT_CLOSED",cause:a})):e()};if(this[kStatus]==="open"){this[kStatus]="closing",this.emit("closing");const a=o=>{this[kStatus]="open",this[kUndefer](),this.emit(kLanded),n(o)};this[kCloseResources](()=>{this._close(o=>{if(o)return a(o);this[kStatus]="closed",this[kUndefer](),this.emit(kLanded),this[kStatus]==="closed"&&this.emit("closed"),n()})})}else this[kStatus]==="closed"?this.nextTick(n):this.once(kLanded,()=>this.close(e));return e[kPromise$1]}[kCloseResources](e){if(this[kResources].size===0)return this.nextTick(e);let n=this[kResources].size,a=!0;const o=()=>{--n===0&&(a?this.nextTick(e):e())};for(const l of this[kResources])l.close(o);a=!1,this[kResources].clear()}_close(e){this.nextTick(e)}get(e,n,a){if(a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.get(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(a,o),a[kPromise$1];const l=this.keyEncoding(n.keyEncoding),u=this.valueEncoding(n.valueEncoding),d=l.format,m=u.format;return(n.keyEncoding!==d||n.valueEncoding!==m)&&(n=Object.assign({},n,{keyEncoding:d,valueEncoding:m})),this._get(this.prefixKey(l.encode(e),d),n,(y,b)=>{if(y)return(y.code==="LEVEL_NOT_FOUND"||y.notFound||/NotFound/i.test(y))&&(y.code||(y.code="LEVEL_NOT_FOUND"),y.notFound||(y.notFound=!0),y.status||(y.status=404)),a(y);try{b=u.decode(b)}catch(_){return a(new ModuleError$1("Could not decode value",{code:"LEVEL_DECODE_ERROR",cause:_}))}a(null,b)}),a[kPromise$1]}_get(e,n,a){this.nextTick(a,new Error("NotFound"))}getMany(e,n,a){if(a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.getMany(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];if(!Array.isArray(e))return this.nextTick(a,new TypeError("The first argument 'keys' must be an array")),a[kPromise$1];if(e.length===0)return this.nextTick(a,null,[]),a[kPromise$1];const o=this.keyEncoding(n.keyEncoding),l=this.valueEncoding(n.valueEncoding),u=o.format,d=l.format;(n.keyEncoding!==u||n.valueEncoding!==d)&&(n=Object.assign({},n,{keyEncoding:u,valueEncoding:d}));const m=new Array(e.length);for(let y=0;y<e.length;y++){const b=e[y],_=this._checkKey(b);if(_)return this.nextTick(a,_),a[kPromise$1];m[y]=this.prefixKey(o.encode(b),u)}return this._getMany(m,n,(y,b)=>{if(y)return a(y);try{for(let _=0;_<b.length;_++)b[_]!==void 0&&(b[_]=l.decode(b[_]))}catch(_){return a(new ModuleError$1(`Could not decode one or more of ${b.length} value(s)`,{code:"LEVEL_DECODE_ERROR",cause:_}))}a(null,b)}),a[kPromise$1]}_getMany(e,n,a){this.nextTick(a,null,new Array(e.length).fill(void 0))}put(e,n,a,o){if(o=getCallback(a,o),o=fromCallback$1(o,kPromise$1),a=getOptions(a,this[kDefaultOptions].entry),this[kStatus]==="opening")return this.defer(()=>this.put(e,n,a,o)),o[kPromise$1];if(maybeError(this,o))return o[kPromise$1];const l=this._checkKey(e)||this._checkValue(n);if(l)return this.nextTick(o,l),o[kPromise$1];const u=this.keyEncoding(a.keyEncoding),d=this.valueEncoding(a.valueEncoding),m=u.format,y=d.format;(a.keyEncoding!==m||a.valueEncoding!==y)&&(a=Object.assign({},a,{keyEncoding:m,valueEncoding:y}));const b=this.prefixKey(u.encode(e),m),_=d.encode(n);return this._put(b,_,a,w=>{if(w)return o(w);this.emit("put",e,n),o()}),o[kPromise$1]}_put(e,n,a,o){this.nextTick(o)}del(e,n,a){if(a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].key),this[kStatus]==="opening")return this.defer(()=>this.del(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];const o=this._checkKey(e);if(o)return this.nextTick(a,o),a[kPromise$1];const l=this.keyEncoding(n.keyEncoding),u=l.format;return n.keyEncoding!==u&&(n=Object.assign({},n,{keyEncoding:u})),this._del(this.prefixKey(l.encode(e),u),n,d=>{if(d)return a(d);this.emit("del",e),a()}),a[kPromise$1]}_del(e,n,a){this.nextTick(a)}batch(e,n,a){if(!arguments.length){if(this[kStatus]==="opening")return new DefaultChainedBatch(this);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._chainedBatch()}if(typeof e=="function"?a=e:a=getCallback(n,a),a=fromCallback$1(a,kPromise$1),n=getOptions(n,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.batch(e,n,a)),a[kPromise$1];if(maybeError(this,a))return a[kPromise$1];if(!Array.isArray(e))return this.nextTick(a,new TypeError("The first argument 'operations' must be an array")),a[kPromise$1];if(e.length===0)return this.nextTick(a),a[kPromise$1];const o=new Array(e.length),{keyEncoding:l,valueEncoding:u,...d}=n;for(let m=0;m<e.length;m++){if(typeof e[m]!="object"||e[m]===null)return this.nextTick(a,new TypeError("A batch operation must be an object")),a[kPromise$1];const y=Object.assign({},e[m]);if(y.type!=="put"&&y.type!=="del")return this.nextTick(a,new TypeError("A batch operation must have a type property that is 'put' or 'del'")),a[kPromise$1];const b=this._checkKey(y.key);if(b)return this.nextTick(a,b),a[kPromise$1];const _=y.sublevel!=null?y.sublevel:this,w=_.keyEncoding(y.keyEncoding||l),E=w.format;if(y.key=_.prefixKey(w.encode(y.key),E),y.keyEncoding=E,y.type==="put"){const A=this._checkValue(y.value);if(A)return this.nextTick(a,A),a[kPromise$1];const C=_.valueEncoding(y.valueEncoding||u);y.value=C.encode(y.value),y.valueEncoding=C.format}_!==this&&(y.sublevel=null),o[m]=y}return this._batch(o,d,m=>{if(m)return a(m);this.emit("batch",e),a()}),a[kPromise$1]}_batch(e,n,a){this.nextTick(a)}sublevel(e,n){return this._sublevel(e,AbstractSublevel.defaults(n))}_sublevel(e,n){return new AbstractSublevel(this,e,n)}prefixKey(e,n){return e}clear(e,n){if(n=getCallback(e,n),n=fromCallback$1(n,kPromise$1),e=getOptions(e,this[kDefaultOptions].empty),this[kStatus]==="opening")return this.defer(()=>this.clear(e,n)),n[kPromise$1];if(maybeError(this,n))return n[kPromise$1];const a=e,o=this.keyEncoding(e.keyEncoding);return e=rangeOptions(e,o),e.keyEncoding=o.format,e.limit===0?this.nextTick(n):this._clear(e,l=>{if(l)return n(l);this.emit("clear",a),n()}),n[kPromise$1]}_clear(e,n){this.nextTick(n)}iterator(e){const n=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,n),e.keys=e.keys!==!1,e.values=e.values!==!1,e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=n.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._iterator(e)}_iterator(e){return new AbstractIterator$1(this,e)}keys(e){const n=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,n),e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=n.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredKeyIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._keys(e)}_keys(e){return new DefaultKeyIterator(this,e)}values(e){const n=this.keyEncoding(e&&e.keyEncoding),a=this.valueEncoding(e&&e.valueEncoding);if(e=rangeOptions(e,n),e[AbstractIterator$1.keyEncoding]=n,e[AbstractIterator$1.valueEncoding]=a,e.keyEncoding=n.format,e.valueEncoding=a.format,this[kStatus]==="opening")return new DeferredValueIterator(this,e);if(this[kStatus]!=="open")throw new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"});return this._values(e)}_values(e){return new DefaultValueIterator(this,e)}defer(e){if(typeof e!="function")throw new TypeError("The first argument must be a function");this[kOperations].push(e)}[kUndefer](){if(this[kOperations].length===0)return;const e=this[kOperations];this[kOperations]=[];for(const n of e)n()}attachResource(e){if(typeof e!="object"||e===null||typeof e.close!="function")throw new TypeError("The first argument must be a resource object");this[kResources].add(e)}detachResource(e){this[kResources].delete(e)}_chainedBatch(){return new DefaultChainedBatch(this)}_checkKey(e){if(e==null)return new ModuleError$1("Key cannot be null or undefined",{code:"LEVEL_INVALID_KEY"})}_checkValue(e){if(e==null)return new ModuleError$1("Value cannot be null or undefined",{code:"LEVEL_INVALID_VALUE"})}};AbstractLevel$1.prototype.nextTick=requireNextTickBrowser();const{AbstractSublevel}=requireAbstractSublevel()({AbstractLevel:AbstractLevel$1});abstractLevel.AbstractLevel=AbstractLevel$1;abstractLevel.AbstractSublevel=AbstractSublevel;const maybeError=function(t,e){return t[kStatus]!=="open"?(t.nextTick(e,new ModuleError$1("Database is not open",{code:"LEVEL_DATABASE_NOT_OPEN"})),!0):!1},formats=function(t){return Object.keys(t.supports.encodings).filter(e=>!!t.supports.encodings[e])};abstractLevel$1.AbstractLevel=abstractLevel.AbstractLevel;abstractLevel$1.AbstractSublevel=abstractLevel.AbstractSublevel;abstractLevel$1.AbstractIterator=abstractIterator.AbstractIterator;abstractLevel$1.AbstractKeyIterator=abstractIterator.AbstractKeyIterator;abstractLevel$1.AbstractValueIterator=abstractIterator.AbstractValueIterator;abstractLevel$1.AbstractChainedBatch=abstractChainedBatch.AbstractChainedBatch;/*! run-parallel-limit. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var runParallelLimit_1=runParallelLimit;const queueMicrotask$1=queueMicrotask_1;function runParallelLimit(t,e,n){if(typeof e!="number")throw new Error("second argument must be a Number");let a,o,l,u,d,m=!0,y;Array.isArray(t)?(a=[],l=o=t.length):(u=Object.keys(t),a={},l=o=u.length);function b(w){function E(){n&&n(w,a),n=null}m?queueMicrotask$1(E):E()}function _(w,E,A){if(a[w]=A,E&&(d=!0),--l===0||E)b(E);else if(!d&&y<o){let C;u?(C=u[y],y+=1,t[C](function(k,B){_(C,k,B)})):(C=y,y+=1,t[C](function(k,B){_(C,k,B)}))}}y=e,l?u?u.some(function(w,E){return t[w](function(A,C){_(w,A,C)}),E===e-1}):t.some(function(w,E){return w(function(A,C){_(E,A,C)}),E===e-1}):b(null),m=!1}var iterator={},keyRange=function(e){const n=e.gte!==void 0?e.gte:e.gt!==void 0?e.gt:void 0,a=e.lte!==void 0?e.lte:e.lt!==void 0?e.lt:void 0,o=e.gte===void 0,l=e.lte===void 0;return n!==void 0&&a!==void 0?IDBKeyRange.bound(n,a,o,l):n!==void 0?IDBKeyRange.lowerBound(n,o):a!==void 0?IDBKeyRange.upperBound(a,l):null};const textEncoder=new TextEncoder;var deserialize$2=function(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):textEncoder.encode(t)};const{AbstractIterator}=abstractLevel$1,createKeyRange$1=keyRange,deserialize$1=deserialize$2,kCache=Symbol("cache"),kFinished=Symbol("finished"),kOptions=Symbol("options"),kCurrentOptions=Symbol("currentOptions"),kPosition=Symbol("position"),kLocation$1=Symbol("location"),kFirst=Symbol("first"),emptyOptions={};let Iterator$1=class extends AbstractIterator{constructor(e,n,a){super(e,a),this[kCache]=[],this[kFinished]=this.limit===0,this[kOptions]=a,this[kCurrentOptions]={...a},this[kPosition]=void 0,this[kLocation$1]=n,this[kFirst]=!0}_nextv(e,n,a){if(this[kFirst]=!1,this[kFinished])return this.nextTick(a,null,[]);if(this[kCache].length>0)return e=Math.min(e,this[kCache].length),this.nextTick(a,null,this[kCache].splice(0,e));this[kPosition]!==void 0&&(this[kOptions].reverse?(this[kCurrentOptions].lt=this[kPosition],this[kCurrentOptions].lte=void 0):(this[kCurrentOptions].gt=this[kPosition],this[kCurrentOptions].gte=void 0));let o;try{o=createKeyRange$1(this[kCurrentOptions])}catch{return this[kFinished]=!0,this.nextTick(a,null,[])}const l=this.db.db.transaction([this[kLocation$1]],"readonly"),u=l.objectStore(this[kLocation$1]),d=[];if(this[kOptions].reverse){const m=!this[kOptions].values&&u.openKeyCursor?"openKeyCursor":"openCursor";u[m](o,"prev").onsuccess=y=>{const b=y.target.result;if(b){const{key:_,value:w}=b;this[kPosition]=_,d.push([this[kOptions].keys&&_!==void 0?deserialize$1(_):void 0,this[kOptions].values&&w!==void 0?deserialize$1(w):void 0]),d.length<e?b.continue():maybeCommit(l)}else this[kFinished]=!0}}else{let m,y;const b=()=>{if(m===void 0||y===void 0)return;const _=Math.max(m.length,y.length);_===0||e===1/0?this[kFinished]=!0:this[kPosition]=m[_-1],d.length=_;for(let w=0;w<_;w++){const E=m[w],A=y[w];d[w]=[this[kOptions].keys&&E!==void 0?deserialize$1(E):void 0,this[kOptions].values&&A!==void 0?deserialize$1(A):void 0]}maybeCommit(l)};this[kOptions].keys||e<1/0?u.getAllKeys(o,e<1/0?e:void 0).onsuccess=_=>{m=_.target.result,b()}:(m=[],this.nextTick(b)),this[kOptions].values?u.getAll(o,e<1/0?e:void 0).onsuccess=_=>{y=_.target.result,b()}:(y=[],this.nextTick(b))}l.onabort=()=>{a(l.error||new Error("aborted by user")),a=null},l.oncomplete=()=>{a(null,d),a=null}}_next(e){if(this[kCache].length>0){const[n,a]=this[kCache].shift();this.nextTick(e,null,n,a)}else if(this[kFinished])this.nextTick(e);else{let n=Math.min(100,this.limit-this.count);this[kFirst]&&(this[kFirst]=!1,n=1),this._nextv(n,emptyOptions,(a,o)=>{if(a)return e(a);this[kCache]=o,this._next(e)})}}_all(e,n){this[kFirst]=!1;const a=this[kCache].splice(0,this[kCache].length),o=this.limit-this.count-a.length;if(o<=0)return this.nextTick(n,null,a);this._nextv(o,emptyOptions,(l,u)=>{if(l)return n(l);a.length>0&&(u=a.concat(u)),n(null,u)})}_seek(e,n){this[kFirst]=!0,this[kCache]=[],this[kFinished]=!1,this[kPosition]=void 0,this[kCurrentOptions]={...this[kOptions]};let a;try{a=createKeyRange$1(this[kOptions])}catch{this[kFinished]=!0;return}a!==null&&!a.includes(e)?this[kFinished]=!0:this[kOptions].reverse?this[kCurrentOptions].lte=e:this[kCurrentOptions].gte=e}};iterator.Iterator=Iterator$1;function maybeCommit(t){typeof t.commit=="function"&&t.commit()}var clear$1=function(e,n,a,o,l){if(o.limit===0)return e.nextTick(l);const u=e.db.transaction([n],"readwrite"),d=u.objectStore(n);let m=0;u.oncomplete=function(){l()},u.onabort=function(){l(u.error||new Error("aborted by user"))};const y=d.openKeyCursor?"openKeyCursor":"openCursor",b=o.reverse?"prev":"next";d[y](a,b).onsuccess=function(_){const w=_.target.result;w&&(d.delete(w.key).onsuccess=function(){(o.limit<=0||++m<o.limit)&&w.continue()})}};const{AbstractLevel}=abstractLevel$1,ModuleError=moduleError,parallel=runParallelLimit_1,{fromCallback}=catering,{Iterator}=iterator,deserialize=deserialize$2,clear=clear$1,createKeyRange=keyRange,DEFAULT_PREFIX="level-js-",kIDB=Symbol("idb"),kNamePrefix=Symbol("namePrefix"),kLocation=Symbol("location"),kVersion=Symbol("version"),kStore=Symbol("store"),kOnComplete=Symbol("onComplete"),kPromise=Symbol("promise");class BrowserLevel extends AbstractLevel{constructor(e,n,a){if(typeof n=="function"||typeof a=="function")throw new ModuleError("The levelup-style callback argument has been removed",{code:"LEVEL_LEGACY"});const{prefix:o,version:l,...u}=n||{};if(super({encodings:{view:!0},snapshots:!1,createIfMissing:!1,errorIfExists:!1,seek:!0},u),typeof e!="string")throw new Error("constructor requires a location string argument");this[kLocation]=e,this[kNamePrefix]=o??DEFAULT_PREFIX,this[kVersion]=parseInt(l||1,10),this[kIDB]=null}get location(){return this[kLocation]}get namePrefix(){return this[kNamePrefix]}get version(){return this[kVersion]}get db(){return this[kIDB]}get type(){return"browser-level"}_open(e,n){const a=indexedDB.open(this[kNamePrefix]+this[kLocation],this[kVersion]);a.onerror=function(){n(a.error||new Error("unknown error"))},a.onsuccess=()=>{this[kIDB]=a.result,n()},a.onupgradeneeded=o=>{const l=o.target.result;l.objectStoreNames.contains(this[kLocation])||l.createObjectStore(this[kLocation])}}[kStore](e){return this[kIDB].transaction([this[kLocation]],e).objectStore(this[kLocation])}[kOnComplete](e,n){const a=e.transaction;a.onabort=function(){n(a.error||new Error("aborted by user"))},a.oncomplete=function(){n(null,e.result)}}_get(e,n,a){const o=this[kStore]("readonly");let l;try{l=o.get(e)}catch(u){return this.nextTick(a,u)}this[kOnComplete](l,function(u,d){if(u)return a(u);if(d===void 0)return a(new ModuleError("Entry not found",{code:"LEVEL_NOT_FOUND"}));a(null,deserialize(d))})}_getMany(e,n,a){const o=this[kStore]("readonly"),l=e.map(u=>d=>{let m;try{m=o.get(u)}catch(y){return d(y)}m.onsuccess=()=>{const y=m.result;d(null,y===void 0?y:deserialize(y))},m.onerror=y=>{y.stopPropagation(),d(m.error)}});parallel(l,16,a)}_del(e,n,a){const o=this[kStore]("readwrite");let l;try{l=o.delete(e)}catch(u){return this.nextTick(a,u)}this[kOnComplete](l,a)}_put(e,n,a,o){const l=this[kStore]("readwrite");let u;try{u=l.put(n,e)}catch(d){return this.nextTick(o,d)}this[kOnComplete](u,o)}_iterator(e){return new Iterator(this,this[kLocation],e)}_batch(e,n,a){const o=this[kStore]("readwrite"),l=o.transaction;let u=0,d;l.onabort=function(){a(d||l.error||new Error("aborted by user"))},l.oncomplete=function(){a()};function m(){const y=e[u++],b=y.key;let _;try{_=y.type==="del"?o.delete(b):o.put(y.value,b)}catch(w){d=w,l.abort();return}u<e.length?_.onsuccess=m:typeof l.commit=="function"&&l.commit()}m()}_clear(e,n){let a,o;try{a=createKeyRange(e)}catch{return this.nextTick(n)}if(e.limit>=0)return clear(this,this[kLocation],a,e,n);try{const l=this[kStore]("readwrite");o=a?l.delete(a):l.clear()}catch(l){return this.nextTick(n,l)}this[kOnComplete](o,n)}_close(e){this[kIDB].close(),this.nextTick(e)}}BrowserLevel.destroy=function(t,e,n){typeof e=="function"&&(n=e,e=DEFAULT_PREFIX),n=fromCallback(n,kPromise);const a=indexedDB.deleteDatabase(e+t);return a.onsuccess=function(){n()},a.onerror=function(o){n(o)},n[kPromise]};browserLevel.BrowserLevel=BrowserLevel;var Level=browserLevel.BrowserLevel;const webcrypto={get(t=globalThis){const e=t.crypto;if(e==null||e.subtle==null)throw Object.assign(new Error("Missing Web Crypto API. The most likely cause of this error is that this page is being accessed from an insecure context (i.e. not HTTPS). For more information and possible resolutions see https://github.com/libp2p/js-libp2p-crypto/blob/master/README.md#web-crypto-api"),{code:"ERR_MISSING_WEB_CRYPTO"});return e}};var forge$m={options:{usePureJavaScript:!1}},utilExports={},util$7={get exports(){return utilExports},set exports(t){utilExports=t}},api$1={},baseN$1=api$1,_reverseAlphabets={};api$1.encode=function(t,e,n){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var a="";if(!(t instanceof Uint8Array))a=_encodeWithByteBuffer(t,e);else{var o=0,l=e.length,u=e.charAt(0),d=[0];for(o=0;o<t.length;++o){for(var m=0,y=t[o];m<d.length;++m)y+=d[m]<<8,d[m]=y%l,y=y/l|0;for(;y>0;)d.push(y%l),y=y/l|0}for(o=0;t[o]===0&&o<t.length-1;++o)a+=u;for(o=d.length-1;o>=0;--o)a+=e[d[o]]}if(n){var b=new RegExp(".{1,"+n+"}","g");a=a.match(b).join(`\r
`)}return a};api$1.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var n=_reverseAlphabets[e];if(!n){n=_reverseAlphabets[e]=[];for(var a=0;a<e.length;++a)n[e.charCodeAt(a)]=a}t=t.replace(/\s/g,"");for(var o=e.length,l=e.charAt(0),u=[0],a=0;a<t.length;a++){var d=n[t.charCodeAt(a)];if(d===void 0)return;for(var m=0,y=d;m<u.length;++m)y+=u[m]*o,u[m]=y&255,y>>=8;for(;y>0;)u.push(y&255),y>>=8}for(var b=0;t[b]===l&&b<t.length-1;++b)u.push(0);return typeof Buffer$y<"u"?Buffer$y.from(u.reverse()):new Uint8Array(u.reverse())};function _encodeWithByteBuffer(t,e){var n=0,a=e.length,o=e.charAt(0),l=[0];for(n=0;n<t.length();++n){for(var u=0,d=t.at(n);u<l.length;++u)d+=l[u]<<8,l[u]=d%a,d=d/a|0;for(;d>0;)l.push(d%a),d=d/a|0}var m="";for(n=0;t.at(n)===0&&n<t.length()-1;++n)m+=o;for(n=l.length-1;n>=0;--n)m+=e[l[n]];return m}var forge$l=forge$m,baseN=baseN$1,util$6=util$7.exports=forge$l.util=forge$l.util||{};(function(){if(typeof browser$1$1<"u"&&browser$1$1.nextTick&&!browser$1$1.browser){util$6.nextTick=browser$1$1.nextTick,typeof setImmediate=="function"?util$6.setImmediate=setImmediate:util$6.setImmediate=util$6.nextTick;return}if(typeof setImmediate=="function"){util$6.setImmediate=function(){return setImmediate.apply(void 0,arguments)},util$6.nextTick=function(u){return setImmediate(u)};return}if(util$6.setImmediate=function(u){setTimeout(u,0)},typeof window<"u"&&typeof window.postMessage=="function"){let u=function(d){if(d.source===window&&d.data===t){d.stopPropagation();var m=e.slice();e.length=0,m.forEach(function(y){y()})}};var t="forge.setImmediate",e=[];util$6.setImmediate=function(d){e.push(d),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",u,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),a=!0,o=document.createElement("div"),e=[];new MutationObserver(function(){var d=e.slice();e.length=0,d.forEach(function(m){m()})}).observe(o,{attributes:!0});var l=util$6.setImmediate;util$6.setImmediate=function(d){Date.now()-n>15?(n=Date.now(),l(d)):(e.push(d),e.length===1&&o.setAttribute("a",a=!a))}}util$6.nextTick=util$6.setImmediate})();util$6.isNodejs=typeof browser$1$1<"u"&&browser$1$1.versions&&browser$1$1.versions.node;util$6.globalScope=function(){return util$6.isNodejs?commonjsGlobal:typeof self>"u"?window:self}();util$6.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};util$6.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};util$6.isArrayBufferView=function(t){return t&&util$6.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function _checkBitsParam(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}util$6.ByteBuffer=ByteStringBuffer;function ByteStringBuffer(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(util$6.isArrayBuffer(t)||util$6.isArrayBufferView(t))if(typeof Buffer$y<"u"&&t instanceof Buffer$y)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var n=0;n<e.length;++n)this.putByte(e[n])}}else(t instanceof ByteStringBuffer||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}util$6.ByteStringBuffer=ByteStringBuffer;var _MAX_CONSTRUCTED_STRING_LENGTH=4096;util$6.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>_MAX_CONSTRUCTED_STRING_LENGTH&&(this.data.substr(0,1),this._constructedStringLength=0)};util$6.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};util$6.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};util$6.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};util$6.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this};util$6.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};util$6.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(util$6.encodeUtf8(t))};util$6.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$6.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$6.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};util$6.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};util$6.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};util$6.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};util$6.ByteStringBuffer.prototype.putInt=function(t,e){_checkBitsParam(e);var n="";do e-=8,n+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(n)};util$6.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};util$6.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};util$6.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};util$6.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};util$6.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};util$6.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};util$6.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};util$6.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};util$6.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};util$6.ByteStringBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};util$6.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};util$6.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};util$6.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};util$6.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};util$6.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};util$6.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};util$6.ByteStringBuffer.prototype.copy=function(){var t=util$6.createBuffer(this.data);return t.read=this.read,t};util$6.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};util$6.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};util$6.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};util$6.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t};util$6.ByteStringBuffer.prototype.toString=function(){return util$6.decodeUtf8(this.bytes())};function DataBuffer(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var n=util$6.isArrayBuffer(t),a=util$6.isArrayBufferView(t);if(n||a){n?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}util$6.DataBuffer=DataBuffer;util$6.DataBuffer.prototype.length=function(){return this.write-this.read};util$6.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};util$6.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),a=new Uint8Array(this.length()+e);return a.set(n),this.data=new DataView(a.buffer),this};util$6.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};util$6.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this};util$6.DataBuffer.prototype.putBytes=function(t,e){if(util$6.isArrayBufferView(t)){var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=n.byteLength-n.byteOffset;this.accommodate(a);var o=new Uint8Array(this.data.buffer,this.write);return o.set(n),this.write+=a,this}if(util$6.isArrayBuffer(t)){var n=new Uint8Array(t);this.accommodate(n.byteLength);var o=new Uint8Array(this.data.buffer);return o.set(n,this.write),this.write+=n.byteLength,this}if(t instanceof util$6.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&util$6.isArrayBufferView(t.data)){var n=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(n.byteLength);var o=new Uint8Array(t.data.byteLength,this.write);return o.set(n),this.write+=n.byteLength,this}if(t instanceof util$6.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var l;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),l=new Uint8Array(this.data.buffer,this.write),this.write+=util$6.binary.hex.decode(t,l,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),l=new Uint8Array(this.data.buffer,this.write),this.write+=util$6.binary.base64.decode(t,l,this.write),this;if(e==="utf8"&&(t=util$6.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),l=new Uint8Array(this.data.buffer,this.write),this.write+=util$6.binary.raw.decode(l),this;if(e==="utf16")return this.accommodate(t.length*2),l=new Uint16Array(this.data.buffer,this.write),this.write+=util$6.text.utf16.encode(l),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};util$6.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};util$6.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};util$6.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};util$6.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};util$6.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};util$6.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};util$6.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};util$6.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};util$6.DataBuffer.prototype.putInt=function(t,e){_checkBitsParam(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};util$6.DataBuffer.prototype.putSignedInt=function(t,e){return _checkBitsParam(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};util$6.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};util$6.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};util$6.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};util$6.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};util$6.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};util$6.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};util$6.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};util$6.DataBuffer.prototype.getInt=function(t){_checkBitsParam(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};util$6.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};util$6.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};util$6.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};util$6.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};util$6.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};util$6.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};util$6.DataBuffer.prototype.copy=function(){return new util$6.DataBuffer(this)};util$6.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};util$6.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};util$6.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};util$6.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t};util$6.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return util$6.binary.raw.encode(e);if(t==="hex")return util$6.binary.hex.encode(e);if(t==="base64")return util$6.binary.base64.encode(e);if(t==="utf8")return util$6.text.utf8.decode(e);if(t==="utf16")return util$6.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};util$6.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=util$6.encodeUtf8(t)),new util$6.ByteBuffer(t)};util$6.fillString=function(t,e){for(var n="";e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return n};util$6.xorBytes=function(t,e,n){for(var a="",o="",l="",u=0,d=0;n>0;--n,++u)o=t.charCodeAt(u)^e.charCodeAt(u),d>=10&&(a+=l,l="",d=0),l+=String.fromCharCode(o),++d;return a+=l,a};util$6.hexToBytes=function(t){var e="",n=0;for(t.length&!0&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e};util$6.bytesToHex=function(t){return util$6.createBuffer(t).toHex()};util$6.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var _base64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_base64Idx=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],_base58="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";util$6.encode64=function(t,e){for(var n="",a="",o,l,u,d=0;d<t.length;)o=t.charCodeAt(d++),l=t.charCodeAt(d++),u=t.charCodeAt(d++),n+=_base64.charAt(o>>2),n+=_base64.charAt((o&3)<<4|l>>4),isNaN(l)?n+="==":(n+=_base64.charAt((l&15)<<2|u>>6),n+=isNaN(u)?"=":_base64.charAt(u&63)),e&&n.length>e&&(a+=n.substr(0,e)+`\r
`,n=n.substr(e));return a+=n,a};util$6.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",n,a,o,l,u=0;u<t.length;)n=_base64Idx[t.charCodeAt(u++)-43],a=_base64Idx[t.charCodeAt(u++)-43],o=_base64Idx[t.charCodeAt(u++)-43],l=_base64Idx[t.charCodeAt(u++)-43],e+=String.fromCharCode(n<<2|a>>4),o!==64&&(e+=String.fromCharCode((a&15)<<4|o>>2),l!==64&&(e+=String.fromCharCode((o&3)<<6|l)));return e};util$6.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};util$6.decodeUtf8=function(t){return decodeURIComponent(escape(t))};util$6.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:baseN.encode,decode:baseN.decode}};util$6.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};util$6.binary.raw.decode=function(t,e,n){var a=e;a||(a=new Uint8Array(t.length)),n=n||0;for(var o=n,l=0;l<t.length;++l)a[o++]=t.charCodeAt(l);return e?o-n:a};util$6.binary.hex.encode=util$6.bytesToHex;util$6.binary.hex.decode=function(t,e,n){var a=e;a||(a=new Uint8Array(Math.ceil(t.length/2))),n=n||0;var o=0,l=n;for(t.length&1&&(o=1,a[l++]=parseInt(t[0],16));o<t.length;o+=2)a[l++]=parseInt(t.substr(o,2),16);return e?l-n:a};util$6.binary.base64.encode=function(t,e){for(var n="",a="",o,l,u,d=0;d<t.byteLength;)o=t[d++],l=t[d++],u=t[d++],n+=_base64.charAt(o>>2),n+=_base64.charAt((o&3)<<4|l>>4),isNaN(l)?n+="==":(n+=_base64.charAt((l&15)<<2|u>>6),n+=isNaN(u)?"=":_base64.charAt(u&63)),e&&n.length>e&&(a+=n.substr(0,e)+`\r
`,n=n.substr(e));return a+=n,a};util$6.binary.base64.decode=function(t,e,n){var a=e;a||(a=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var o,l,u,d,m=0,y=n;m<t.length;)o=_base64Idx[t.charCodeAt(m++)-43],l=_base64Idx[t.charCodeAt(m++)-43],u=_base64Idx[t.charCodeAt(m++)-43],d=_base64Idx[t.charCodeAt(m++)-43],a[y++]=o<<2|l>>4,u!==64&&(a[y++]=(l&15)<<4|u>>2,d!==64&&(a[y++]=(u&3)<<6|d));return e?y-n:a.subarray(0,y)};util$6.binary.base58.encode=function(t,e){return util$6.binary.baseN.encode(t,_base58,e)};util$6.binary.base58.decode=function(t,e){return util$6.binary.baseN.decode(t,_base58,e)};util$6.text={utf8:{},utf16:{}};util$6.text.utf8.encode=function(t,e,n){t=util$6.encodeUtf8(t);var a=e;a||(a=new Uint8Array(t.length)),n=n||0;for(var o=n,l=0;l<t.length;++l)a[o++]=t.charCodeAt(l);return e?o-n:a};util$6.text.utf8.decode=function(t){return util$6.decodeUtf8(String.fromCharCode.apply(null,t))};util$6.text.utf16.encode=function(t,e,n){var a=e;a||(a=new Uint8Array(t.length*2));var o=new Uint16Array(a.buffer);n=n||0;for(var l=n,u=n,d=0;d<t.length;++d)o[u++]=t.charCodeAt(d),l+=2;return e?l-n:a};util$6.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};util$6.deflate=function(t,e,n){if(e=util$6.decode64(t.deflate(util$6.encode64(e)).rval),n){var a=2,o=e.charCodeAt(1);o&32&&(a=6),e=e.substring(a,e.length-4)}return e};util$6.inflate=function(t,e,n){var a=t.inflate(util$6.encode64(e)).rval;return a===null?null:util$6.decode64(a)};var _setStorageObject=function(t,e,n){if(!t)throw new Error("WebStorage not available.");var a;if(n===null?a=t.removeItem(e):(n=util$6.encode64(JSON.stringify(n)),a=t.setItem(e,n)),typeof a<"u"&&a.rval!==!0){var o=new Error(a.error.message);throw o.id=a.error.id,o.name=a.error.name,o}},_getStorageObject=function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(n.rval===null){if(n.error){var a=new Error(n.error.message);throw a.id=n.error.id,a.name=n.error.name,a}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(util$6.decode64(n))),n},_setItem=function(t,e,n,a){var o=_getStorageObject(t,e);o===null&&(o={}),o[n]=a,_setStorageObject(t,e,o)},_getItem=function(t,e,n){var a=_getStorageObject(t,e);return a!==null&&(a=n in a?a[n]:null),a},_removeItem=function(t,e,n){var a=_getStorageObject(t,e);if(a!==null&&n in a){delete a[n];var o=!0;for(var l in a){o=!1;break}o&&(a=null),_setStorageObject(t,e,a)}},_clearItems=function(t,e){_setStorageObject(t,e,null)},_callStorageFunction=function(t,e,n){var a=null;typeof n>"u"&&(n=["web","flash"]);var o,l=!1,u=null;for(var d in n){o=n[d];try{if(o==="flash"||o==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");a=t.apply(this,e),l=o==="flash"}(o==="web"||o==="both")&&(e[0]=localStorage,a=t.apply(this,e),l=!0)}catch(m){u=m}if(l)break}if(!l)throw u;return a};util$6.setItem=function(t,e,n,a,o){_callStorageFunction(_setItem,arguments,o)};util$6.getItem=function(t,e,n,a){return _callStorageFunction(_getItem,arguments,a)};util$6.removeItem=function(t,e,n,a){_callStorageFunction(_removeItem,arguments,a)};util$6.clearItems=function(t,e,n){_callStorageFunction(_clearItems,arguments,n)};util$6.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};util$6.format=function(t){for(var e=/%./g,n,a,o=0,l=[],u=0;n=e.exec(t);){a=t.substring(u,e.lastIndex-2),a.length>0&&l.push(a),u=e.lastIndex;var d=n[0][1];switch(d){case"s":case"o":o<arguments.length?l.push(arguments[o+++1]):l.push("<?>");break;case"%":l.push("%");break;default:l.push("<%"+d+"?>")}}return l.push(t.substring(u)),l.join("")};util$6.formatNumber=function(t,e,n,a){var o=t,l=isNaN(e=Math.abs(e))?2:e,u=n===void 0?",":n,d=a===void 0?".":a,m=o<0?"-":"",y=parseInt(o=Math.abs(+o||0).toFixed(l),10)+"",b=y.length>3?y.length%3:0;return m+(b?y.substr(0,b)+d:"")+y.substr(b).replace(/(\d{3})(?=\d)/g,"$1"+d)+(l?u+Math.abs(o-y).toFixed(l).slice(2):"")};util$6.formatSize=function(t){return t>=1073741824?t=util$6.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=util$6.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=util$6.formatNumber(t/1024,0)+" KiB":t=util$6.formatNumber(t,0)+" bytes",t};util$6.bytesFromIP=function(t){return t.indexOf(".")!==-1?util$6.bytesFromIPv4(t):t.indexOf(":")!==-1?util$6.bytesFromIPv6(t):null};util$6.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=util$6.createBuffer(),n=0;n<t.length;++n){var a=parseInt(t[n],10);if(isNaN(a))return null;e.putByte(a)}return e.getBytes()};util$6.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(u){return u.length===0&&++e,!0});for(var n=(8-t.length+e)*2,a=util$6.createBuffer(),o=0;o<8;++o){if(!t[o]||t[o].length===0){a.fillWithByte(0,n),n=0;continue}var l=util$6.hexToBytes(t[o]);l.length<2&&a.putByte(0),a.putBytes(l)}return a.getBytes()};util$6.bytesToIP=function(t){return t.length===4?util$6.bytesToIPv4(t):t.length===16?util$6.bytesToIPv6(t):null};util$6.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")};util$6.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],n=[],a=0,o=0;o<t.length;o+=2){for(var l=util$6.bytesToHex(t[o]+t[o+1]);l[0]==="0"&&l!=="0";)l=l.substr(1);if(l==="0"){var u=n[n.length-1],d=e.length;!u||d!==u.end+1?n.push({start:d,end:d}):(u.end=d,u.end-u.start>n[a].end-n[a].start&&(a=n.length-1))}e.push(l)}if(n.length>0){var m=n[a];m.end-m.start>0&&(e.splice(m.start,m.end-m.start+1,""),m.start===0&&e.unshift(""),m.end===7&&e.push(""))}return e.join(":")};util$6.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in util$6&&!t.update)return e(null,util$6.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return util$6.cores=navigator.hardwareConcurrency,e(null,util$6.cores);if(typeof Worker>"u")return util$6.cores=1,e(null,util$6.cores);if(typeof Blob>"u")return util$6.cores=2,e(null,util$6.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(u){var d=Date.now(),m=d+4;self.postMessage({st:d,et:m})})}.toString(),")()"],{type:"application/javascript"}));a([],5,16);function a(u,d,m){if(d===0){var y=Math.floor(u.reduce(function(b,_){return b+_},0)/u.length);return util$6.cores=Math.max(1,y),URL.revokeObjectURL(n),e(null,util$6.cores)}o(m,function(b,_){u.push(l(m,_)),a(u,d-1,m)})}function o(u,d){for(var m=[],y=[],b=0;b<u;++b){var _=new Worker(n);_.addEventListener("message",function(w){if(y.push(w.data),y.length===u){for(var E=0;E<u;++E)m[E].terminate();d(null,y)}}),m.push(_)}for(var b=0;b<u;++b)m[b].postMessage(b)}function l(u,d){for(var m=[],y=0;y<u;++y)for(var b=d[y],_=m[y]=[],w=0;w<u;++w)if(y!==w){var E=d[w];(b.st>E.st&&b.st<E.et||E.st>b.st&&E.st<b.et)&&_.push(w)}return m.reduce(function(A,C){return Math.max(A,C.length)},0)}};var forge$k=forge$m;forge$k.cipher=forge$k.cipher||{};forge$k.cipher.algorithms=forge$k.cipher.algorithms||{};forge$k.cipher.createCipher=function(t,e){var n=t;if(typeof n=="string"&&(n=forge$k.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new forge$k.cipher.BlockCipher({algorithm:n,key:e,decrypt:!1})};forge$k.cipher.createDecipher=function(t,e){var n=t;if(typeof n=="string"&&(n=forge$k.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new forge$k.cipher.BlockCipher({algorithm:n,key:e,decrypt:!0})};forge$k.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),forge$k.cipher.algorithms[t]=e};forge$k.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in forge$k.cipher.algorithms?forge$k.cipher.algorithms[t]:null};var BlockCipher=forge$k.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};BlockCipher.prototype.start=function(t){t=t||{};var e={};for(var n in t)e[n]=t[n];e.decrypt=this._decrypt,this._finish=!1,this._input=forge$k.util.createBuffer(),this.output=t.output||forge$k.util.createBuffer(),this.mode.start(e)};BlockCipher.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};BlockCipher.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return t(this.blockSize,n,!1)},this.mode.unpad=function(n){return t(this.blockSize,n,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))};var forge$j=forge$m;forge$j.cipher=forge$j.cipher||{};var modes=forge$j.cipher.modes=forge$j.cipher.modes||{};modes.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes.ecb.prototype.start=function(t){};modes.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a])};modes.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a])};modes.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};modes.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),a=t.at(n-1);return a>this.blockSize<<2?!1:(t.truncate(a),!0)};modes.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};modes.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=transformIV(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};modes.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=this._prev[a]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._outBlock[a]);this._prev=this._outBlock};modes.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var a=0;a<this._ints;++a)this._inBlock[a]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var a=0;a<this._ints;++a)e.putInt32(this._prev[a]^this._outBlock[a]);this._prev=this._inBlock.slice(0)};modes.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};modes.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),a=t.at(n-1);return a>this.blockSize<<2?!1:(t.truncate(a),!0)};modes.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.cfb.prototype.encrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32()^this._outBlock[o],e.putInt32(this._inBlock[o]);return}var l=(this.blockSize-a)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32()^this._outBlock[o],this._partialOutput.putInt32(this._partialBlock[o]);if(l>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!n)return e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0};modes.cfb.prototype.decrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)this._inBlock[o]=t.getInt32(),e.putInt32(this._inBlock[o]^this._outBlock[o]);return}var l=(this.blockSize-a)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialBlock[o]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[o]^this._outBlock[o]);if(l>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._partialBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!n)return e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0};modes.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.ofb.prototype.encrypt=function(t,e,n){var a=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]),this._inBlock[o]=this._outBlock[o];return}var l=(this.blockSize-a)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(l>0)t.read-=this.blockSize;else for(var o=0;o<this._ints;++o)this._inBlock[o]=this._outBlock[o];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!n)return e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0};modes.ofb.prototype.decrypt=modes.ofb.prototype.encrypt;modes.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0};modes.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=transformIV(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};modes.ctr.prototype.encrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize)for(var o=0;o<this._ints;++o)e.putInt32(t.getInt32()^this._outBlock[o]);else{var l=(this.blockSize-a)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(l>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!n)return e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}inc32(this._inBlock)};modes.ctr.prototype.decrypt=modes.ctr.prototype.encrypt;modes.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=forge$j.util.createBuffer(),this._partialBytes=0,this._R=3774873600};modes.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=forge$j.util.createBuffer(t.iv);this._cipherLength=0;var n;if("additionalData"in t?n=forge$j.util.createBuffer(t.additionalData):n=forge$j.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=forge$j.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var a=e.length();if(a===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(from64To32(a*8)))}this._inBlock=this._j0.slice(0),inc32(this._inBlock),this._partialBytes=0,n=forge$j.util.createBuffer(n),this._aDataLength=from64To32(n.length()*8);var o=n.length()%this.blockSize;for(o&&n.fillWithByte(0,this.blockSize-o),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};modes.gcm.prototype.encrypt=function(t,e,n){var a=t.length();if(a===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&a>=this.blockSize){for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^=t.getInt32());this._cipherLength+=this.blockSize}else{var l=(this.blockSize-a)%this.blockSize;l>0&&(l=this.blockSize-l),this._partialOutput.clear();for(var o=0;o<this._ints;++o)this._partialOutput.putInt32(t.getInt32()^this._outBlock[o]);if(l<=0||n){if(n){var u=a%this.blockSize;this._cipherLength+=u,this._partialOutput.truncate(this.blockSize-u)}else this._cipherLength+=this.blockSize;for(var o=0;o<this._ints;++o)this._outBlock[o]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),l>0&&!n)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(l-this._partialBytes)),this._partialBytes=l,!0;e.putBytes(this._partialOutput.getBytes(a-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),inc32(this._inBlock)};modes.gcm.prototype.decrypt=function(t,e,n){var a=t.length();if(a<this.blockSize&&!(n&&a>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),inc32(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var o=0;o<this._ints;++o)e.putInt32(this._outBlock[o]^this._hashBlock[o]);a<this.blockSize?this._cipherLength+=a%this.blockSize:this._cipherLength+=this.blockSize};modes.gcm.prototype.afterFinish=function(t,e){var n=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=forge$j.util.createBuffer();var a=this._aDataLength.concat(from64To32(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,a);var o=[];this.cipher.encrypt(this._j0,o);for(var l=0;l<this._ints;++l)this.tag.putInt32(this._s[l]^o[l]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};modes.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],a=e.slice(0),o=0;o<128;++o){var l=t[o/32|0]&1<<31-o%32;l&&(n[0]^=a[0],n[1]^=a[1],n[2]^=a[2],n[3]^=a[3]),this.pow(a,a)}return n};modes.gcm.prototype.pow=function(t,e){for(var n=t[3]&1,a=3;a>0;--a)e[a]=t[a]>>>1|(t[a-1]&1)<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)};modes.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var a=n/8|0,o=t[a]>>>(7-n%8)*4&15,l=this._m[n][o];e[0]^=l[0],e[1]^=l[1],e[2]^=l[2],e[3]^=l[3]}return e};modes.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)};modes.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,a=4*n,o=16*n,l=new Array(o),u=0;u<o;++u){var d=[0,0,0,0],m=u/a|0,y=(a-1-u%a)*e;d[m]=1<<e-1<<y,l[u]=this.generateSubHashTable(this.multiply(d,t),e)}return l};modes.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,a=n>>>1,o=new Array(n);o[a]=t.slice(0);for(var l=a>>>1;l>0;)this.pow(o[2*l],o[l]=[]),l>>=1;for(l=2;l<a;){for(var u=1;u<l;++u){var d=o[l],m=o[u];o[l+u]=[d[0]^m[0],d[1]^m[1],d[2]^m[2],d[3]^m[3]]}l*=2}for(o[0]=[0,0,0,0],l=a+1;l<n;++l){var y=o[l^a];o[l]=[t[0]^y[0],t[1]^y[1],t[2]^y[2],t[3]^y[3]]}return o};function transformIV(t,e){if(typeof t=="string"&&(t=forge$j.util.createBuffer(t)),forge$j.util.isArray(t)&&t.length>4){var n=t;t=forge$j.util.createBuffer();for(var a=0;a<n.length;++a)t.putByte(n[a])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!forge$j.util.isArray(t)){for(var o=[],l=e/4,a=0;a<l;++a)o.push(t.getInt32());t=o}return t}function inc32(t){t[t.length-1]=t[t.length-1]+1&4294967295}function from64To32(t){return[t/4294967296|0,t&4294967295]}var forge$i=forge$m;forge$i.aes=forge$i.aes||{};forge$i.aes.startEncrypting=function(t,e,n,a){var o=_createCipher$1({key:t,output:n,decrypt:!1,mode:a});return o.start(e),o};forge$i.aes.createEncryptionCipher=function(t,e){return _createCipher$1({key:t,output:null,decrypt:!1,mode:e})};forge$i.aes.startDecrypting=function(t,e,n,a){var o=_createCipher$1({key:t,output:n,decrypt:!0,mode:a});return o.start(e),o};forge$i.aes.createDecryptionCipher=function(t,e){return _createCipher$1({key:t,output:null,decrypt:!0,mode:e})};forge$i.aes.Algorithm=function(t,e){init||initialize();var n=this;n.name=t,n.mode=new e({blockSize:16,cipher:{encrypt:function(a,o){return _updateBlock$1(n._w,a,o,!1)},decrypt:function(a,o){return _updateBlock$1(n._w,a,o,!0)}}}),n._init=!1};forge$i.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,n;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=forge$i.util.createBuffer(e);else if(forge$i.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){n=e,e=forge$i.util.createBuffer();for(var a=0;a<n.length;++a)e.putByte(n[a])}if(!forge$i.util.isArray(e)){n=e,e=[];var o=n.length();if(o===16||o===24||o===32){o=o>>>2;for(var a=0;a<o;++a)e.push(n.getInt32())}}if(!forge$i.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var l=this.mode.name,u=["CFB","OFB","CTR","GCM"].indexOf(l)!==-1;this._w=_expandKey(e,t.decrypt&&!u),this._init=!0}};forge$i.aes._expandKey=function(t,e){return init||initialize(),_expandKey(t,e)};forge$i.aes._updateBlock=_updateBlock$1;registerAlgorithm$1("AES-ECB",forge$i.cipher.modes.ecb);registerAlgorithm$1("AES-CBC",forge$i.cipher.modes.cbc);registerAlgorithm$1("AES-CFB",forge$i.cipher.modes.cfb);registerAlgorithm$1("AES-OFB",forge$i.cipher.modes.ofb);registerAlgorithm$1("AES-CTR",forge$i.cipher.modes.ctr);registerAlgorithm$1("AES-GCM",forge$i.cipher.modes.gcm);function registerAlgorithm$1(t,e){var n=function(){return new forge$i.aes.Algorithm(t,e)};forge$i.cipher.registerAlgorithm(t,n)}var init=!1,Nb=4,sbox,isbox,rcon,mix,imix;function initialize(){init=!0,rcon=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;sbox=new Array(256),isbox=new Array(256),mix=new Array(4),imix=new Array(4);for(var e=0;e<4;++e)mix[e]=new Array(256),imix[e]=new Array(256);for(var n=0,a=0,o,l,u,d,m,y,b,e=0;e<256;++e){d=a^a<<1^a<<2^a<<3^a<<4,d=d>>8^d&255^99,sbox[n]=d,isbox[d]=n,m=t[d],o=t[n],l=t[o],u=t[l],y=m<<24^d<<16^d<<8^(d^m),b=(o^l^u)<<24^(n^u)<<16^(n^l^u)<<8^(n^o^u);for(var _=0;_<4;++_)mix[_][n]=y,imix[_][d]=b,y=y<<24|y>>>8,b=b<<24|b>>>8;n===0?n=a=1:(n=o^t[t[t[o^u]]],a^=t[t[a]])}}function _expandKey(t,e){for(var n=t.slice(0),a,o=1,l=n.length,u=l+6+1,d=Nb*u,m=l;m<d;++m)a=n[m-1],m%l===0?(a=sbox[a>>>16&255]<<24^sbox[a>>>8&255]<<16^sbox[a&255]<<8^sbox[a>>>24]^rcon[o]<<24,o++):l>6&&m%l===4&&(a=sbox[a>>>24]<<24^sbox[a>>>16&255]<<16^sbox[a>>>8&255]<<8^sbox[a&255]),n[m]=n[m-l]^a;if(e){var y,b=imix[0],_=imix[1],w=imix[2],E=imix[3],A=n.slice(0);d=n.length;for(var m=0,C=d-Nb;m<d;m+=Nb,C-=Nb)if(m===0||m===d-Nb)A[m]=n[C],A[m+1]=n[C+3],A[m+2]=n[C+2],A[m+3]=n[C+1];else for(var k=0;k<Nb;++k)y=n[C+k],A[m+(3&-k)]=b[sbox[y>>>24]]^_[sbox[y>>>16&255]]^w[sbox[y>>>8&255]]^E[sbox[y&255]];n=A}return n}function _updateBlock$1(t,e,n,a){var o=t.length/4-1,l,u,d,m,y;a?(l=imix[0],u=imix[1],d=imix[2],m=imix[3],y=isbox):(l=mix[0],u=mix[1],d=mix[2],m=mix[3],y=sbox);var b,_,w,E,A,C,k;b=e[0]^t[0],_=e[a?3:1]^t[1],w=e[2]^t[2],E=e[a?1:3]^t[3];for(var B=3,D=1;D<o;++D)A=l[b>>>24]^u[_>>>16&255]^d[w>>>8&255]^m[E&255]^t[++B],C=l[_>>>24]^u[w>>>16&255]^d[E>>>8&255]^m[b&255]^t[++B],k=l[w>>>24]^u[E>>>16&255]^d[b>>>8&255]^m[_&255]^t[++B],E=l[E>>>24]^u[b>>>16&255]^d[_>>>8&255]^m[w&255]^t[++B],b=A,_=C,w=k;n[0]=y[b>>>24]<<24^y[_>>>16&255]<<16^y[w>>>8&255]<<8^y[E&255]^t[++B],n[a?3:1]=y[_>>>24]<<24^y[w>>>16&255]<<16^y[E>>>8&255]<<8^y[b&255]^t[++B],n[2]=y[w>>>24]<<24^y[E>>>16&255]<<16^y[b>>>8&255]<<8^y[_&255]^t[++B],n[a?1:3]=y[E>>>24]<<24^y[b>>>16&255]<<16^y[_>>>8&255]<<8^y[w&255]^t[++B]}function _createCipher$1(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="AES-"+e,a;t.decrypt?a=forge$i.cipher.createDecipher(n,t.key):a=forge$i.cipher.createCipher(n,t.key);var o=a.start;return a.start=function(l,u){var d=null;u instanceof forge$i.util.ByteBuffer&&(d=u,u={}),u=u||{},u.output=d,u.iv=l,o.call(a,u)},a}function base$5(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var l=t.charAt(o),u=l.charCodeAt(0);if(n[u]!==255)throw new TypeError(l+" is ambiguous");n[u]=o}var d=t.length,m=t.charAt(0),y=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function _(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var C=0,k=0,B=0,D=A.length;B!==D&&A[B]===0;)B++,C++;for(var q=(D-B)*b+1>>>0,j=new Uint8Array(q);B!==D;){for(var J=A[B],Y=0,L=q-1;(J!==0||Y<k)&&L!==-1;L--,Y++)J+=256*j[L]>>>0,j[L]=J%d>>>0,J=J/d>>>0;if(J!==0)throw new Error("Non-zero carry");k=Y,B++}for(var Z=q-k;Z!==q&&j[Z]===0;)Z++;for(var Q=m.repeat(C);Z<q;++Z)Q+=t.charAt(j[Z]);return Q}function w(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var C=0;if(A[C]!==" "){for(var k=0,B=0;A[C]===m;)k++,C++;for(var D=(A.length-C)*y+1>>>0,q=new Uint8Array(D);A[C];){var j=n[A.charCodeAt(C)];if(j===255)return;for(var J=0,Y=D-1;(j!==0||J<B)&&Y!==-1;Y--,J++)j+=d*q[Y]>>>0,q[Y]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");B=J,C++}if(A[C]!==" "){for(var L=D-B;L!==D&&q[L]===0;)L++;for(var Z=new Uint8Array(k+(D-L)),Q=k;L!==D;)Z[Q++]=q[L++];return Z}}}function E(A){var C=w(A);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:w,decode:E}}var src$7=base$5,_brrp__multiformats_scope_baseX$4=src$7;const coerce$4=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$6=t=>new TextEncoder().encode(t),toString$9=t=>new TextDecoder().decode(t);let Encoder$5=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$5=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$4(this,e)}},ComposedDecoder$4=class{constructor(e){this.decoders=e}or(e){return or$4(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$4=(t,e)=>new ComposedDecoder$4({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$5=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$5(e,n,a),this.decoder=new Decoder$5(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$6=({name:t,prefix:e,encode:n,decode:a})=>new Codec$5(t,e,n,a),baseX$4=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$4(n,e);return from$6({prefix:t,name:e,encode:a,decode:l=>coerce$4(o(l))})},decode$m=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let l=t.length;for(;t[l-1]==="=";)--l;const u=new Uint8Array(l*n/8|0);let d=0,m=0,y=0;for(let b=0;b<l;++b){const _=o[t[b]];if(_===void 0)throw new SyntaxError(`Non-${a} character`);m=m<<n|_,d+=n,d>=8&&(d-=8,u[y++]=255&m>>d)}if(d>=n||255&m<<8-d)throw new SyntaxError("Unexpected end of data");return u},encode$n=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let l="",u=0,d=0;for(let m=0;m<t.length;++m)for(d=d<<8|t[m],u+=8;u>n;)u-=n,l+=e[o&d>>u];if(u&&(l+=e[o&d<<n-u]),a)for(;l.length*n&7;)l+="=";return l},rfc4648$4=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$6({prefix:e,name:t,encode(o){return encode$n(o,a,n)},decode(o){return decode$m(o,a,n,t)}}),identity$6=from$6({prefix:"\0",name:"identity",encode:t=>toString$9(t),decode:t=>fromString$6(t)}),identityBase$2=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$6},Symbol.toStringTag,{value:"Module"})),base2$4=rfc4648$4({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$5=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$4},Symbol.toStringTag,{value:"Module"})),base8$4=rfc4648$4({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$5=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$4},Symbol.toStringTag,{value:"Module"})),base10$4=baseX$4({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$5=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$4},Symbol.toStringTag,{value:"Module"})),base16$4=rfc4648$4({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$2=rfc4648$4({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$5=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$4,base16upper:base16upper$2},Symbol.toStringTag,{value:"Module"})),base32$5=rfc4648$4({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$2=rfc4648$4({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$2=rfc4648$4({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$2=rfc4648$4({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$2=rfc4648$4({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$2=rfc4648$4({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$2=rfc4648$4({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$2=rfc4648$4({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$2=rfc4648$4({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$6=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$5,base32hex:base32hex$2,base32hexpad:base32hexpad$2,base32hexpadupper:base32hexpadupper$2,base32hexupper:base32hexupper$2,base32pad:base32pad$2,base32padupper:base32padupper$2,base32upper:base32upper$2,base32z:base32z$2},Symbol.toStringTag,{value:"Module"})),base36$4=baseX$4({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$2=baseX$4({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$5=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$4,base36upper:base36upper$2},Symbol.toStringTag,{value:"Module"})),base58btc$4=baseX$4({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$2=baseX$4({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$2=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$4,base58flickr:base58flickr$2},Symbol.toStringTag,{value:"Module"})),base64$9=rfc4648$4({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$2=rfc4648$4({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$2=rfc4648$4({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$2=rfc4648$4({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$a=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$9,base64pad:base64pad$2,base64url:base64url$2,base64urlpad:base64urlpad$2},Symbol.toStringTag,{value:"Module"})),alphabet$2=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars$2=alphabet$2.reduce((t,e,n)=>(t[n]=e,t),[]),alphabetCharsToBytes$2=alphabet$2.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function encode$m(t){return t.reduce((e,n)=>(e+=alphabetBytesToChars$2[n],e),"")}function decode$l(t){const e=[];for(const n of t){const a=alphabetCharsToBytes$2[n.codePointAt(0)];if(a===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(a)}return new Uint8Array(e)}const base256emoji$4=from$6({prefix:"🚀",name:"base256emoji",encode:encode$m,decode:decode$l}),base256emoji$5=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$4},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases$2={...identityBase$2,...base2$5,...base8$5,...base10$5,...base16$5,...base32$6,...base36$5,...base58$2,...base64$a,...base256emoji$5};function asUint8Array$2(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function alloc(t=0){return globalThis.Buffer?.alloc!=null?asUint8Array$2(globalThis.Buffer.alloc(t)):new Uint8Array(t)}function allocUnsafe$2(t=0){return globalThis.Buffer?.allocUnsafe!=null?asUint8Array$2(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec$4(t,e,n,a){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:a}}}const string$2=createCodec$4("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$2=createCodec$4("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=allocUnsafe$2(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BASES$2={utf8:string$2,"utf-8":string$2,hex:bases$2.base16,latin1:ascii$2,ascii:ascii$2,binary:ascii$2,...bases$2};function toString$8(t,e="utf8"){const n=BASES$2[e];if(n==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function fromString$5(t,e="utf8"){const n=BASES$2[e];if(n==null)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$2(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function assign$2(t,e){for(const n in e)Object.defineProperty(t,n,{value:e[n],enumerable:!0,configurable:!0});return t}function createError(t,e,n){if(!t||typeof t=="string")throw new TypeError("Please pass an Error to err-code");n||(n={}),typeof e=="object"&&(n=e,e=""),e&&(n.code=e);try{return assign$2(t,n)}catch{n.message=t.message,n.stack=t.stack;const o=function(){};return o.prototype=Object.create(Object.getPrototypeOf(t)),assign$2(new o,n)}}var errCode=createError,minimal={},aspromise=asPromise;function asPromise(t,e){for(var n=new Array(arguments.length-1),a=0,o=2,l=!0;o<arguments.length;)n[a++]=arguments[o++];return new Promise(function(d,m){n[a]=function(b){if(l)if(l=!1,b)m(b);else{for(var _=new Array(arguments.length-1),w=0;w<_.length;)_[w++]=arguments[w];d.apply(null,_)}};try{t.apply(e||null,n)}catch(y){l&&(l=!1,m(y))}})}var base64$8={};(function(t){var e=t;e.length=function(d){var m=d.length;if(!m)return 0;for(var y=0;--m%4>1&&d.charAt(m)==="=";)++y;return Math.ceil(d.length*3)/4-y};for(var n=new Array(64),a=new Array(123),o=0;o<64;)a[n[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;e.encode=function(d,m,y){for(var b=null,_=[],w=0,E=0,A;m<y;){var C=d[m++];switch(E){case 0:_[w++]=n[C>>2],A=(C&3)<<4,E=1;break;case 1:_[w++]=n[A|C>>4],A=(C&15)<<2,E=2;break;case 2:_[w++]=n[A|C>>6],_[w++]=n[C&63],E=0;break}w>8191&&((b||(b=[])).push(String.fromCharCode.apply(String,_)),w=0)}return E&&(_[w++]=n[A],_[w++]=61,E===1&&(_[w++]=61)),b?(w&&b.push(String.fromCharCode.apply(String,_.slice(0,w))),b.join("")):String.fromCharCode.apply(String,_.slice(0,w))};var l="invalid encoding";e.decode=function(d,m,y){for(var b=y,_=0,w,E=0;E<d.length;){var A=d.charCodeAt(E++);if(A===61&&_>1)break;if((A=a[A])===void 0)throw Error(l);switch(_){case 0:w=A,_=1;break;case 1:m[y++]=w<<2|(A&48)>>4,w=A,_=2;break;case 2:m[y++]=(w&15)<<4|(A&60)>>2,w=A,_=3;break;case 3:m[y++]=(w&3)<<6|A,_=0;break}}if(_===1)throw Error(l);return y-b},e.test=function(d){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(d)}})(base64$8);var eventemitter=EventEmitter;function EventEmitter(){this._listeners={}}EventEmitter.prototype.on=function(e,n,a){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:n,ctx:a||this}),this};EventEmitter.prototype.off=function(e,n){if(e===void 0)this._listeners={};else if(n===void 0)this._listeners[e]=[];else for(var a=this._listeners[e],o=0;o<a.length;)a[o].fn===n?a.splice(o,1):++o;return this};EventEmitter.prototype.emit=function(e){var n=this._listeners[e];if(n){for(var a=[],o=1;o<arguments.length;)a.push(arguments[o++]);for(o=0;o<n.length;)n[o].fn.apply(n[o++].ctx,a)}return this};var float=factory(factory);function factory(t){return typeof Float32Array<"u"?function(){var e=new Float32Array([-0]),n=new Uint8Array(e.buffer),a=n[3]===128;function o(m,y,b){e[0]=m,y[b]=n[0],y[b+1]=n[1],y[b+2]=n[2],y[b+3]=n[3]}function l(m,y,b){e[0]=m,y[b]=n[3],y[b+1]=n[2],y[b+2]=n[1],y[b+3]=n[0]}t.writeFloatLE=a?o:l,t.writeFloatBE=a?l:o;function u(m,y){return n[0]=m[y],n[1]=m[y+1],n[2]=m[y+2],n[3]=m[y+3],e[0]}function d(m,y){return n[3]=m[y],n[2]=m[y+1],n[1]=m[y+2],n[0]=m[y+3],e[0]}t.readFloatLE=a?u:d,t.readFloatBE=a?d:u}():function(){function e(a,o,l,u){var d=o<0?1:0;if(d&&(o=-o),o===0)a(1/o>0?0:2147483648,l,u);else if(isNaN(o))a(2143289344,l,u);else if(o>34028234663852886e22)a((d<<31|2139095040)>>>0,l,u);else if(o<11754943508222875e-54)a((d<<31|Math.round(o/1401298464324817e-60))>>>0,l,u);else{var m=Math.floor(Math.log(o)/Math.LN2),y=Math.round(o*Math.pow(2,-m)*8388608)&8388607;a((d<<31|m+127<<23|y)>>>0,l,u)}}t.writeFloatLE=e.bind(null,writeUintLE$1),t.writeFloatBE=e.bind(null,writeUintBE$1);function n(a,o,l){var u=a(o,l),d=(u>>31)*2+1,m=u>>>23&255,y=u&8388607;return m===255?y?NaN:d*(1/0):m===0?d*1401298464324817e-60*y:d*Math.pow(2,m-150)*(y+8388608)}t.readFloatLE=n.bind(null,readUintLE$1),t.readFloatBE=n.bind(null,readUintBE$1)}(),typeof Float64Array<"u"?function(){var e=new Float64Array([-0]),n=new Uint8Array(e.buffer),a=n[7]===128;function o(m,y,b){e[0]=m,y[b]=n[0],y[b+1]=n[1],y[b+2]=n[2],y[b+3]=n[3],y[b+4]=n[4],y[b+5]=n[5],y[b+6]=n[6],y[b+7]=n[7]}function l(m,y,b){e[0]=m,y[b]=n[7],y[b+1]=n[6],y[b+2]=n[5],y[b+3]=n[4],y[b+4]=n[3],y[b+5]=n[2],y[b+6]=n[1],y[b+7]=n[0]}t.writeDoubleLE=a?o:l,t.writeDoubleBE=a?l:o;function u(m,y){return n[0]=m[y],n[1]=m[y+1],n[2]=m[y+2],n[3]=m[y+3],n[4]=m[y+4],n[5]=m[y+5],n[6]=m[y+6],n[7]=m[y+7],e[0]}function d(m,y){return n[7]=m[y],n[6]=m[y+1],n[5]=m[y+2],n[4]=m[y+3],n[3]=m[y+4],n[2]=m[y+5],n[1]=m[y+6],n[0]=m[y+7],e[0]}t.readDoubleLE=a?u:d,t.readDoubleBE=a?d:u}():function(){function e(a,o,l,u,d,m){var y=u<0?1:0;if(y&&(u=-u),u===0)a(0,d,m+o),a(1/u>0?0:2147483648,d,m+l);else if(isNaN(u))a(0,d,m+o),a(2146959360,d,m+l);else if(u>17976931348623157e292)a(0,d,m+o),a((y<<31|2146435072)>>>0,d,m+l);else{var b;if(u<22250738585072014e-324)b=u/5e-324,a(b>>>0,d,m+o),a((y<<31|b/4294967296)>>>0,d,m+l);else{var _=Math.floor(Math.log(u)/Math.LN2);_===1024&&(_=1023),b=u*Math.pow(2,-_),a(b*4503599627370496>>>0,d,m+o),a((y<<31|_+1023<<20|b*1048576&1048575)>>>0,d,m+l)}}}t.writeDoubleLE=e.bind(null,writeUintLE$1,0,4),t.writeDoubleBE=e.bind(null,writeUintBE$1,4,0);function n(a,o,l,u,d){var m=a(u,d+o),y=a(u,d+l),b=(y>>31)*2+1,_=y>>>20&2047,w=4294967296*(y&1048575)+m;return _===2047?w?NaN:b*(1/0):_===0?b*5e-324*w:b*Math.pow(2,_-1075)*(w+4503599627370496)}t.readDoubleLE=n.bind(null,readUintLE$1,0,4),t.readDoubleBE=n.bind(null,readUintBE$1,4,0)}(),t}function writeUintLE$1(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}function writeUintBE$1(t,e,n){e[n]=t>>>24,e[n+1]=t>>>16&255,e[n+2]=t>>>8&255,e[n+3]=t&255}function readUintLE$1(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function readUintBE$1(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}var inquire_1=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}var utf8$5={};(function(t){var e=t;e.length=function(a){for(var o=0,l=0,u=0;u<a.length;++u)l=a.charCodeAt(u),l<128?o+=1:l<2048?o+=2:(l&64512)===55296&&(a.charCodeAt(u+1)&64512)===56320?(++u,o+=4):o+=3;return o},e.read=function(a,o,l){var u=l-o;if(u<1)return"";for(var d=null,m=[],y=0,b;o<l;)b=a[o++],b<128?m[y++]=b:b>191&&b<224?m[y++]=(b&31)<<6|a[o++]&63:b>239&&b<365?(b=((b&7)<<18|(a[o++]&63)<<12|(a[o++]&63)<<6|a[o++]&63)-65536,m[y++]=55296+(b>>10),m[y++]=56320+(b&1023)):m[y++]=(b&15)<<12|(a[o++]&63)<<6|a[o++]&63,y>8191&&((d||(d=[])).push(String.fromCharCode.apply(String,m)),y=0);return d?(y&&d.push(String.fromCharCode.apply(String,m.slice(0,y))),d.join("")):String.fromCharCode.apply(String,m.slice(0,y))},e.write=function(a,o,l){for(var u=l,d,m,y=0;y<a.length;++y)d=a.charCodeAt(y),d<128?o[l++]=d:d<2048?(o[l++]=d>>6|192,o[l++]=d&63|128):(d&64512)===55296&&((m=a.charCodeAt(y+1))&64512)===56320?(d=65536+((d&1023)<<10)+(m&1023),++y,o[l++]=d>>18|240,o[l++]=d>>12&63|128,o[l++]=d>>6&63|128,o[l++]=d&63|128):(o[l++]=d>>12|224,o[l++]=d>>6&63|128,o[l++]=d&63|128);return l-u}})(utf8$5);var pool_1=pool;function pool(t,e,n){var a=n||8192,o=a>>>1,l=null,u=a;return function(m){if(m<1||m>o)return t(m);u+m>a&&(l=t(a),u=0);var y=e.call(l,u,u+=m);return u&7&&(u=(u|7)+1),y}}var longbits,hasRequiredLongbits;function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=e;var t=requireMinimal();function e(l,u){this.lo=l>>>0,this.hi=u>>>0}var n=e.zero=new e(0,0);n.toNumber=function(){return 0},n.zzEncode=n.zzDecode=function(){return this},n.length=function(){return 1};var a=e.zeroHash="\0\0\0\0\0\0\0\0";e.fromNumber=function(u){if(u===0)return n;var d=u<0;d&&(u=-u);var m=u>>>0,y=(u-m)/4294967296>>>0;return d&&(y=~y>>>0,m=~m>>>0,++m>4294967295&&(m=0,++y>4294967295&&(y=0))),new e(m,y)},e.from=function(u){if(typeof u=="number")return e.fromNumber(u);if(t.isString(u))if(t.Long)u=t.Long.fromString(u);else return e.fromNumber(parseInt(u,10));return u.low||u.high?new e(u.low>>>0,u.high>>>0):n},e.prototype.toNumber=function(u){if(!u&&this.hi>>>31){var d=~this.lo+1>>>0,m=~this.hi>>>0;return d||(m=m+1>>>0),-(d+m*4294967296)}return this.lo+this.hi*4294967296},e.prototype.toLong=function(u){return t.Long?new t.Long(this.lo|0,this.hi|0,Boolean(u)):{low:this.lo|0,high:this.hi|0,unsigned:Boolean(u)}};var o=String.prototype.charCodeAt;return e.fromHash=function(u){return u===a?n:new e((o.call(u,0)|o.call(u,1)<<8|o.call(u,2)<<16|o.call(u,3)<<24)>>>0,(o.call(u,4)|o.call(u,5)<<8|o.call(u,6)<<16|o.call(u,7)<<24)>>>0)},e.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},e.prototype.zzEncode=function(){var u=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^u)>>>0,this.lo=(this.lo<<1^u)>>>0,this},e.prototype.zzDecode=function(){var u=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^u)>>>0,this.hi=(this.hi>>>1^u)>>>0,this},e.prototype.length=function(){var u=this.lo,d=(this.lo>>>28|this.hi<<4)>>>0,m=this.hi>>>24;return m===0?d===0?u<16384?u<128?1:2:u<2097152?3:4:d<16384?d<128?5:6:d<2097152?7:8:m<128?9:10},longbits}var hasRequiredMinimal;function requireMinimal(){return hasRequiredMinimal||(hasRequiredMinimal=1,function(t){var e=t;e.asPromise=aspromise,e.base64=base64$8,e.EventEmitter=eventemitter,e.float=float,e.inquire=inquire_1,e.utf8=utf8$5,e.pool=pool_1,e.LongBits=requireLongbits(),e.isNode=Boolean(typeof commonjsGlobal<"u"&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),e.global=e.isNode&&commonjsGlobal||typeof window<"u"&&window||typeof self<"u"&&self||commonjsGlobal,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},e.isString=function(l){return typeof l=="string"||l instanceof String},e.isObject=function(l){return l&&typeof l=="object"},e.isset=e.isSet=function(l,u){var d=l[u];return d!=null&&l.hasOwnProperty(u)?typeof d!="object"||(Array.isArray(d)?d.length:Object.keys(d).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(l){return typeof l=="number"?e.Buffer?e._Buffer_allocUnsafe(l):new e.Array(l):e.Buffer?e._Buffer_from(l):typeof Uint8Array>"u"?l:new Uint8Array(l)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(l){return l?e.LongBits.from(l).toHash():e.LongBits.zeroHash},e.longFromHash=function(l,u){var d=e.LongBits.fromHash(l);return e.Long?e.Long.fromBits(d.lo,d.hi,u):d.toNumber(Boolean(u))};function n(o,l,u){for(var d=Object.keys(l),m=0;m<d.length;++m)(o[d[m]]===void 0||!u)&&(o[d[m]]=l[d[m]]);return o}e.merge=n,e.lcFirst=function(l){return l.charAt(0).toLowerCase()+l.substring(1)};function a(o){function l(u,d){if(!(this instanceof l))return new l(u,d);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,l):Object.defineProperty(this,"stack",{value:new Error().stack||""}),d&&n(this,d)}return l.prototype=Object.create(Error.prototype,{constructor:{value:l,writable:!0,enumerable:!1,configurable:!0},name:{get(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),l}e.newError=a,e.ProtocolError=a("ProtocolError"),e.oneOfGetter=function(l){for(var u={},d=0;d<l.length;++d)u[l[d]]=1;return function(){for(var m=Object.keys(this),y=m.length-1;y>-1;--y)if(u[m[y]]===1&&this[m[y]]!==void 0&&this[m[y]]!==null)return m[y]}},e.oneOfSetter=function(l){return function(u){for(var d=0;d<l.length;++d)l[d]!==u&&delete this[l[d]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(u,d){return new o(u,d)},e._Buffer_allocUnsafe=o.allocUnsafe||function(u){return new o(u)}}}(minimal)),minimal}var reader$1=Reader$1,util$5=requireMinimal(),BufferReader$1,LongBits$1=util$5.LongBits,utf8$4=util$5.utf8;function indexOutOfRange(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function Reader$1(t){this.buf=t,this.pos=0,this.len=t.length}var create_array=typeof Uint8Array<"u"?function t(e){if(e instanceof Uint8Array||Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")}:function t(e){if(Array.isArray(e))return new Reader$1(e);throw Error("illegal buffer")},create$5=function t(){return util$5.Buffer?function(n){return(Reader$1.create=function(o){return util$5.Buffer.isBuffer(o)?new BufferReader$1(o):create_array(o)})(n)}:create_array};Reader$1.create=create$5();Reader$1.prototype._slice=util$5.Array.prototype.subarray||util$5.Array.prototype.slice;Reader$1.prototype.uint32=function t(){var e=4294967295;return function(){if(e=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(e=(e|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,indexOutOfRange(this,10);return e}}();Reader$1.prototype.int32=function t(){return this.uint32()|0};Reader$1.prototype.sint32=function t(){var e=this.uint32();return e>>>1^-(e&1)|0};function readLongVarint(){var t=new LongBits$1(0,0),e=0;if(this.len-this.pos>4){for(;e<4;++e)if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(this.buf[this.pos]&127)<<28)>>>0,t.hi=(t.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return t;e=0}else{for(;e<3;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.lo=(t.lo|(this.buf[this.pos]&127)<<e*7)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(this.buf[this.pos++]&127)<<e*7)>>>0,t}if(this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw indexOutOfRange(this);if(t.hi=(t.hi|(this.buf[this.pos]&127)<<e*7+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}Reader$1.prototype.bool=function t(){return this.uint32()!==0};function readFixed32_end(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}Reader$1.prototype.fixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)};Reader$1.prototype.sfixed32=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);return readFixed32_end(this.buf,this.pos+=4)|0};function readFixed64(){if(this.pos+8>this.len)throw indexOutOfRange(this,8);return new LongBits$1(readFixed32_end(this.buf,this.pos+=4),readFixed32_end(this.buf,this.pos+=4))}Reader$1.prototype.float=function t(){if(this.pos+4>this.len)throw indexOutOfRange(this,4);var e=util$5.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e};Reader$1.prototype.double=function t(){if(this.pos+8>this.len)throw indexOutOfRange(this,4);var e=util$5.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e};Reader$1.prototype.bytes=function t(){var e=this.uint32(),n=this.pos,a=this.pos+e;if(a>this.len)throw indexOutOfRange(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(n,a):n===a?new this.buf.constructor(0):this._slice.call(this.buf,n,a)};Reader$1.prototype.string=function t(){var e=this.bytes();return utf8$4.read(e,0,e.length)};Reader$1.prototype.skip=function t(e){if(typeof e=="number"){if(this.pos+e>this.len)throw indexOutOfRange(this,e);this.pos+=e}else do if(this.pos>=this.len)throw indexOutOfRange(this);while(this.buf[this.pos++]&128);return this};Reader$1.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(t=this.uint32()&7)!==4;)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this};Reader$1._configure=function(t){BufferReader$1=t,Reader$1.create=create$5(),BufferReader$1._configure();var e=util$5.Long?"toLong":"toNumber";util$5.merge(Reader$1.prototype,{int64:function(){return readLongVarint.call(this)[e](!1)},uint64:function(){return readLongVarint.call(this)[e](!0)},sint64:function(){return readLongVarint.call(this).zzDecode()[e](!1)},fixed64:function(){return readFixed64.call(this)[e](!0)},sfixed64:function(){return readFixed64.call(this)[e](!1)}})};var reader_buffer=BufferReader,Reader=reader$1;(BufferReader.prototype=Object.create(Reader.prototype)).constructor=BufferReader;var util$4=requireMinimal();function BufferReader(t){Reader.call(this,t)}BufferReader._configure=function(){util$4.Buffer&&(BufferReader.prototype._slice=util$4.Buffer.prototype.slice)};BufferReader.prototype.string=function t(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))};BufferReader._configure();var writer$1=Writer$1,util$3=requireMinimal(),BufferWriter$1,LongBits=util$3.LongBits,base64$7=util$3.base64,utf8$3=util$3.utf8;function Op(t,e,n){this.fn=t,this.len=e,this.next=void 0,this.val=n}function noop$2(){}function State(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function Writer$1(){this.len=0,this.head=new Op(noop$2,0,0),this.tail=this.head,this.states=null}var create$4=function t(){return util$3.Buffer?function(){return(Writer$1.create=function(){return new BufferWriter$1})()}:function(){return new Writer$1}};Writer$1.create=create$4();Writer$1.alloc=function t(e){return new util$3.Array(e)};util$3.Array!==Array&&(Writer$1.alloc=util$3.pool(Writer$1.alloc,util$3.Array.prototype.subarray));Writer$1.prototype._push=function t(e,n,a){return this.tail=this.tail.next=new Op(e,n,a),this.len+=n,this};function writeByte(t,e,n){e[n]=t&255}function writeVarint32(t,e,n){for(;t>127;)e[n++]=t&127|128,t>>>=7;e[n]=t}function VarintOp(t,e){this.len=t,this.next=void 0,this.val=e}VarintOp.prototype=Object.create(Op.prototype);VarintOp.prototype.fn=writeVarint32;Writer$1.prototype.uint32=function t(e){return this.len+=(this.tail=this.tail.next=new VarintOp((e=e>>>0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this};Writer$1.prototype.int32=function t(e){return e<0?this._push(writeVarint64,10,LongBits.fromNumber(e)):this.uint32(e)};Writer$1.prototype.sint32=function t(e){return this.uint32((e<<1^e>>31)>>>0)};function writeVarint64(t,e,n){for(;t.hi;)e[n++]=t.lo&127|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[n++]=t.lo&127|128,t.lo=t.lo>>>7;e[n++]=t.lo}Writer$1.prototype.uint64=function t(e){var n=LongBits.from(e);return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.int64=Writer$1.prototype.uint64;Writer$1.prototype.sint64=function t(e){var n=LongBits.from(e).zzEncode();return this._push(writeVarint64,n.length(),n)};Writer$1.prototype.bool=function t(e){return this._push(writeByte,1,e?1:0)};function writeFixed32(t,e,n){e[n]=t&255,e[n+1]=t>>>8&255,e[n+2]=t>>>16&255,e[n+3]=t>>>24}Writer$1.prototype.fixed32=function t(e){return this._push(writeFixed32,4,e>>>0)};Writer$1.prototype.sfixed32=Writer$1.prototype.fixed32;Writer$1.prototype.fixed64=function t(e){var n=LongBits.from(e);return this._push(writeFixed32,4,n.lo)._push(writeFixed32,4,n.hi)};Writer$1.prototype.sfixed64=Writer$1.prototype.fixed64;Writer$1.prototype.float=function t(e){return this._push(util$3.float.writeFloatLE,4,e)};Writer$1.prototype.double=function t(e){return this._push(util$3.float.writeDoubleLE,8,e)};var writeBytes=util$3.Array.prototype.set?function t(e,n,a){n.set(e,a)}:function t(e,n,a){for(var o=0;o<e.length;++o)n[a+o]=e[o]};Writer$1.prototype.bytes=function t(e){var n=e.length>>>0;if(!n)return this._push(writeByte,1,0);if(util$3.isString(e)){var a=Writer$1.alloc(n=base64$7.length(e));base64$7.decode(e,a,0),e=a}return this.uint32(n)._push(writeBytes,n,e)};Writer$1.prototype.string=function t(e){var n=utf8$3.length(e);return n?this.uint32(n)._push(utf8$3.write,n,e):this._push(writeByte,1,0)};Writer$1.prototype.fork=function t(){return this.states=new State(this),this.head=this.tail=new Op(noop$2,0,0),this.len=0,this};Writer$1.prototype.reset=function t(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new Op(noop$2,0,0),this.len=0),this};Writer$1.prototype.ldelim=function t(){var e=this.head,n=this.tail,a=this.len;return this.reset().uint32(a),a&&(this.tail.next=e.next,this.tail=n,this.len+=a),this};Writer$1.prototype.finish=function t(){for(var e=this.head.next,n=this.constructor.alloc(this.len),a=0;e;)e.fn(e.val,n,a),a+=e.len,e=e.next;return n};Writer$1._configure=function(t){BufferWriter$1=t,Writer$1.create=create$4(),BufferWriter$1._configure()};var writer_buffer=BufferWriter,Writer=writer$1;(BufferWriter.prototype=Object.create(Writer.prototype)).constructor=BufferWriter;var util$2=requireMinimal();function BufferWriter(){Writer.call(this)}BufferWriter._configure=function(){BufferWriter.alloc=util$2._Buffer_allocUnsafe,BufferWriter.writeBytesBuffer=util$2.Buffer&&util$2.Buffer.prototype instanceof Uint8Array&&util$2.Buffer.prototype.set.name==="set"?function(e,n,a){n.set(e,a)}:function(e,n,a){if(e.copy)e.copy(n,a,0,e.length);else for(var o=0;o<e.length;)n[a++]=e[o++]}};BufferWriter.prototype.bytes=function t(e){util$2.isString(e)&&(e=util$2._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(BufferWriter.writeBytesBuffer,n,e),this};function writeStringBuffer(t,e,n){t.length<40?util$2.utf8.write(t,e,n):e.utf8Write?e.utf8Write(t,n):e.write(t,n)}BufferWriter.prototype.string=function t(e){var n=util$2.Buffer.byteLength(e);return this.uint32(n),n&&this._push(writeStringBuffer,n,e),this};BufferWriter._configure();var minimalExports=requireMinimal();const util$1=getDefaultExportFromCjs(minimalExports);function configure(){util$1._configure(),reader$1._configure(reader_buffer),writer$1._configure(writer_buffer)}configure();const methods=["uint64","int64","sint64","fixed64","sfixed64"];function patchReader(t){for(const e of methods){if(t[e]==null)continue;const n=t[e];t[e]=function(){return BigInt(n.call(this).toString())}}return t}function reader(t){return patchReader(new reader$1(t))}function patchWriter(t){for(const e of methods){if(t[e]==null)continue;const n=t[e];t[e]=function(a){return n.call(this,a.toString())}}return t}function writer(){return patchWriter(writer$1.create())}function decodeMessage(t,e){const n=reader(t instanceof Uint8Array?t:t.subarray());return e.decode(n)}function encodeMessage(t,e){const n=writer();return e.encode(t,n,{lengthDelimited:!1}),n.finish()}var CODEC_TYPES;(function(t){t[t.VARINT=0]="VARINT",t[t.BIT64=1]="BIT64",t[t.LENGTH_DELIMITED=2]="LENGTH_DELIMITED",t[t.START_GROUP=3]="START_GROUP",t[t.END_GROUP=4]="END_GROUP",t[t.BIT32=5]="BIT32"})(CODEC_TYPES||(CODEC_TYPES={}));function createCodec$3(t,e,n,a){return{name:t,type:e,encode:n,decode:a}}function enumeration(t){function e(o){if(t[o.toString()]==null)throw new Error("Invalid enum value");return t[o]}const n=function(l,u){const d=e(l);u.int32(d)},a=function(l){const u=l.int32();return e(u)};return createCodec$3("enum",CODEC_TYPES.VARINT,n,a)}function message(t,e){return createCodec$3("message",CODEC_TYPES.LENGTH_DELIMITED,t,e)}var KeyType$1;(function(t){t.RSA="RSA",t.Ed25519="Ed25519",t.Secp256k1="Secp256k1"})(KeyType$1||(KeyType$1={}));var __KeyTypeValues;(function(t){t[t.RSA=0]="RSA",t[t.Ed25519=1]="Ed25519",t[t.Secp256k1=2]="Secp256k1"})(__KeyTypeValues||(__KeyTypeValues={}));(function(t){t.codec=()=>enumeration(__KeyTypeValues)})(KeyType$1||(KeyType$1={}));var PublicKey;(function(t){let e;t.codec=()=>(e==null&&(e=message((n,a,o={})=>{o.lengthDelimited!==!1&&a.fork(),n.Type!=null&&(a.uint32(8),KeyType$1.codec().encode(n.Type,a)),n.Data!=null&&(a.uint32(18),a.bytes(n.Data)),o.lengthDelimited!==!1&&a.ldelim()},(n,a)=>{const o={},l=a==null?n.len:n.pos+a;for(;n.pos<l;){const u=n.uint32();switch(u>>>3){case 1:o.Type=KeyType$1.codec().decode(n);break;case 2:o.Data=n.bytes();break;default:n.skipType(u&7);break}}return o})),e),t.encode=n=>encodeMessage(n,t.codec()),t.decode=n=>decodeMessage(n,t.codec())})(PublicKey||(PublicKey={}));var PrivateKey;(function(t){let e;t.codec=()=>(e==null&&(e=message((n,a,o={})=>{o.lengthDelimited!==!1&&a.fork(),n.Type!=null&&(a.uint32(8),KeyType$1.codec().encode(n.Type,a)),n.Data!=null&&(a.uint32(18),a.bytes(n.Data)),o.lengthDelimited!==!1&&a.ldelim()},(n,a)=>{const o={},l=a==null?n.len:n.pos+a;for(;n.pos<l;){const u=n.uint32();switch(u>>>3){case 1:o.Type=KeyType$1.codec().decode(n);break;case 2:o.Data=n.bytes();break;default:n.skipType(u&7);break}}return o})),e),t.encode=n=>encodeMessage(n,t.codec()),t.decode=n=>decodeMessage(n,t.codec())})(PrivateKey||(PrivateKey={}));var forge$h=forge$m;forge$h.pki=forge$h.pki||{};var oids$1=forge$h.pki.oids=forge$h.oids=forge$h.oids||{};function _IN(t,e){oids$1[t]=e,oids$1[e]=t}function _I_(t,e){oids$1[t]=e}_IN("1.2.840.113549.1.1.1","rsaEncryption");_IN("1.2.840.113549.1.1.4","md5WithRSAEncryption");_IN("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_IN("1.2.840.113549.1.1.7","RSAES-OAEP");_IN("1.2.840.113549.1.1.8","mgf1");_IN("1.2.840.113549.1.1.9","pSpecified");_IN("1.2.840.113549.1.1.10","RSASSA-PSS");_IN("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_IN("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_IN("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_IN("1.3.101.112","EdDSA25519");_IN("1.2.840.10040.4.3","dsa-with-sha1");_IN("1.3.14.3.2.7","desCBC");_IN("1.3.14.3.2.26","sha1");_IN("1.3.14.3.2.29","sha1WithRSASignature");_IN("2.16.840.1.101.3.4.2.1","sha256");_IN("2.16.840.1.101.3.4.2.2","sha384");_IN("2.16.840.1.101.3.4.2.3","sha512");_IN("2.16.840.1.101.3.4.2.4","sha224");_IN("2.16.840.1.101.3.4.2.5","sha512-224");_IN("2.16.840.1.101.3.4.2.6","sha512-256");_IN("1.2.840.113549.2.2","md2");_IN("1.2.840.113549.2.5","md5");_IN("1.2.840.113549.1.7.1","data");_IN("1.2.840.113549.1.7.2","signedData");_IN("1.2.840.113549.1.7.3","envelopedData");_IN("1.2.840.113549.1.7.4","signedAndEnvelopedData");_IN("1.2.840.113549.1.7.5","digestedData");_IN("1.2.840.113549.1.7.6","encryptedData");_IN("1.2.840.113549.1.9.1","emailAddress");_IN("1.2.840.113549.1.9.2","unstructuredName");_IN("1.2.840.113549.1.9.3","contentType");_IN("1.2.840.113549.1.9.4","messageDigest");_IN("1.2.840.113549.1.9.5","signingTime");_IN("1.2.840.113549.1.9.6","counterSignature");_IN("1.2.840.113549.1.9.7","challengePassword");_IN("1.2.840.113549.1.9.8","unstructuredAddress");_IN("1.2.840.113549.1.9.14","extensionRequest");_IN("1.2.840.113549.1.9.20","friendlyName");_IN("1.2.840.113549.1.9.21","localKeyId");_IN("1.2.840.113549.1.9.22.1","x509Certificate");_IN("1.2.840.113549.1.12.10.1.1","keyBag");_IN("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_IN("1.2.840.113549.1.12.10.1.3","certBag");_IN("1.2.840.113549.1.12.10.1.4","crlBag");_IN("1.2.840.113549.1.12.10.1.5","secretBag");_IN("1.2.840.113549.1.12.10.1.6","safeContentsBag");_IN("1.2.840.113549.1.5.13","pkcs5PBES2");_IN("1.2.840.113549.1.5.12","pkcs5PBKDF2");_IN("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_IN("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_IN("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_IN("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_IN("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_IN("1.2.840.113549.2.7","hmacWithSHA1");_IN("1.2.840.113549.2.8","hmacWithSHA224");_IN("1.2.840.113549.2.9","hmacWithSHA256");_IN("1.2.840.113549.2.10","hmacWithSHA384");_IN("1.2.840.113549.2.11","hmacWithSHA512");_IN("1.2.840.113549.3.7","des-EDE3-CBC");_IN("2.16.840.1.101.3.4.1.2","aes128-CBC");_IN("2.16.840.1.101.3.4.1.22","aes192-CBC");_IN("2.16.840.1.101.3.4.1.42","aes256-CBC");_IN("2.5.4.3","commonName");_IN("2.5.4.4","surname");_IN("2.5.4.5","serialNumber");_IN("2.5.4.6","countryName");_IN("2.5.4.7","localityName");_IN("2.5.4.8","stateOrProvinceName");_IN("2.5.4.9","streetAddress");_IN("2.5.4.10","organizationName");_IN("2.5.4.11","organizationalUnitName");_IN("2.5.4.12","title");_IN("2.5.4.13","description");_IN("2.5.4.15","businessCategory");_IN("2.5.4.17","postalCode");_IN("2.5.4.42","givenName");_IN("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_IN("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_IN("2.16.840.1.113730.1.1","nsCertType");_IN("2.16.840.1.113730.1.13","nsComment");_I_("2.5.29.1","authorityKeyIdentifier");_I_("2.5.29.2","keyAttributes");_I_("2.5.29.3","certificatePolicies");_I_("2.5.29.4","keyUsageRestriction");_I_("2.5.29.5","policyMapping");_I_("2.5.29.6","subtreesConstraint");_I_("2.5.29.7","subjectAltName");_I_("2.5.29.8","issuerAltName");_I_("2.5.29.9","subjectDirectoryAttributes");_I_("2.5.29.10","basicConstraints");_I_("2.5.29.11","nameConstraints");_I_("2.5.29.12","policyConstraints");_I_("2.5.29.13","basicConstraints");_IN("2.5.29.14","subjectKeyIdentifier");_IN("2.5.29.15","keyUsage");_I_("2.5.29.16","privateKeyUsagePeriod");_IN("2.5.29.17","subjectAltName");_IN("2.5.29.18","issuerAltName");_IN("2.5.29.19","basicConstraints");_I_("2.5.29.20","cRLNumber");_I_("2.5.29.21","cRLReason");_I_("2.5.29.22","expirationDate");_I_("2.5.29.23","instructionCode");_I_("2.5.29.24","invalidityDate");_I_("2.5.29.25","cRLDistributionPoints");_I_("2.5.29.26","issuingDistributionPoint");_I_("2.5.29.27","deltaCRLIndicator");_I_("2.5.29.28","issuingDistributionPoint");_I_("2.5.29.29","certificateIssuer");_I_("2.5.29.30","nameConstraints");_IN("2.5.29.31","cRLDistributionPoints");_IN("2.5.29.32","certificatePolicies");_I_("2.5.29.33","policyMappings");_I_("2.5.29.34","policyConstraints");_IN("2.5.29.35","authorityKeyIdentifier");_I_("2.5.29.36","policyConstraints");_IN("2.5.29.37","extKeyUsage");_I_("2.5.29.46","freshestCRL");_I_("2.5.29.54","inhibitAnyPolicy");_IN("1.3.6.1.4.1.11129.2.4.2","timestampList");_IN("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_IN("1.3.6.1.5.5.7.3.1","serverAuth");_IN("1.3.6.1.5.5.7.3.2","clientAuth");_IN("1.3.6.1.5.5.7.3.3","codeSigning");_IN("1.3.6.1.5.5.7.3.4","emailProtection");_IN("1.3.6.1.5.5.7.3.8","timeStamping");var forge$g=forge$m,asn1$2=forge$g.asn1=forge$g.asn1||{};asn1$2.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};asn1$2.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};asn1$2.create=function(t,e,n,a,o){if(forge$g.util.isArray(a)){for(var l=[],u=0;u<a.length;++u)a[u]!==void 0&&l.push(a[u]);a=l}var d={tagClass:t,type:e,constructed:n,composed:n||forge$g.util.isArray(a),value:a};return o&&"bitStringContents"in o&&(d.bitStringContents=o.bitStringContents,d.original=asn1$2.copy(d)),d};asn1$2.copy=function(t,e){var n;if(forge$g.util.isArray(t)){n=[];for(var a=0;a<t.length;++a)n.push(asn1$2.copy(t[a],e));return n}return typeof t=="string"?t:(n={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:asn1$2.copy(t.value,e)},e&&!e.excludeBitStringContents&&(n.bitStringContents=t.bitStringContents),n)};asn1$2.equals=function(t,e,n){if(forge$g.util.isArray(t)){if(!forge$g.util.isArray(e)||t.length!==e.length)return!1;for(var a=0;a<t.length;++a)if(!asn1$2.equals(t[a],e[a]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var o=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&asn1$2.equals(t.value,e.value);return n&&n.includeBitStringContents&&(o=o&&t.bitStringContents===e.bitStringContents),o};asn1$2.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var n,a=e&128;return a?n=t.getInt((e&127)<<3):n=e,n}};function _checkBufferLength(t,e,n){if(n>e){var a=new Error("Too few bytes to parse DER.");throw a.available=t.length(),a.remaining=e,a.requested=n,a}}var _getValueLength=function(t,e){var n=t.getByte();if(e--,n!==128){var a,o=n&128;if(!o)a=n;else{var l=n&127;_checkBufferLength(t,e,l),a=t.getInt(l<<3)}if(a<0)throw new Error("Negative length: "+a);return a}};asn1$2.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=forge$g.util.createBuffer(t));var n=t.length(),a=_fromDer(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var o=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw o.byteCount=n,o.remaining=t.length(),o}return a};function _fromDer(t,e,n,a){var o;_checkBufferLength(t,e,2);var l=t.getByte();e--;var u=l&192,d=l&31;o=t.length();var m=_getValueLength(t,e);if(e-=o-t.length(),m!==void 0&&m>e){if(a.strict){var y=new Error("Too few bytes to read ASN.1 value.");throw y.available=t.length(),y.remaining=e,y.requested=m,y}m=e}var b,_,w=(l&32)===32;if(w)if(b=[],m===void 0)for(;;){if(_checkBufferLength(t,e,2),t.bytes(2)===String.fromCharCode(0,0)){t.getBytes(2),e-=2;break}o=t.length(),b.push(_fromDer(t,e,n+1,a)),e-=o-t.length()}else for(;m>0;)o=t.length(),b.push(_fromDer(t,m,n+1,a)),e-=o-t.length(),m-=o-t.length();if(b===void 0&&u===asn1$2.Class.UNIVERSAL&&d===asn1$2.Type.BITSTRING&&(_=t.bytes(m)),b===void 0&&a.decodeBitStrings&&u===asn1$2.Class.UNIVERSAL&&d===asn1$2.Type.BITSTRING&&m>1){var E=t.read,A=e,C=0;if(d===asn1$2.Type.BITSTRING&&(_checkBufferLength(t,e,1),C=t.getByte(),e--),C===0)try{o=t.length();var k={strict:!0,decodeBitStrings:!0},B=_fromDer(t,e,n+1,k),D=o-t.length();e-=D,d==asn1$2.Type.BITSTRING&&D++;var q=B.tagClass;D===m&&(q===asn1$2.Class.UNIVERSAL||q===asn1$2.Class.CONTEXT_SPECIFIC)&&(b=[B])}catch{}b===void 0&&(t.read=E,e=A)}if(b===void 0){if(m===void 0){if(a.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");m=e}if(d===asn1$2.Type.BMPSTRING)for(b="";m>0;m-=2)_checkBufferLength(t,e,2),b+=String.fromCharCode(t.getInt16()),e-=2;else b=t.getBytes(m),e-=m}var j=_===void 0?null:{bitStringContents:_};return asn1$2.create(u,d,w,b,j)}asn1$2.toDer=function(t){var e=forge$g.util.createBuffer(),n=t.tagClass|t.type,a=forge$g.util.createBuffer(),o=!1;if("bitStringContents"in t&&(o=!0,t.original&&(o=asn1$2.equals(t,t.original))),o)a.putBytes(t.bitStringContents);else if(t.composed){t.constructed?n|=32:a.putByte(0);for(var l=0;l<t.value.length;++l)t.value[l]!==void 0&&a.putBuffer(asn1$2.toDer(t.value[l]))}else if(t.type===asn1$2.Type.BMPSTRING)for(var l=0;l<t.value.length;++l)a.putInt16(t.value.charCodeAt(l));else t.type===asn1$2.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&!(t.value.charCodeAt(1)&128)||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?a.putBytes(t.value.substr(1)):a.putBytes(t.value);if(e.putByte(n),a.length()<=127)e.putByte(a.length()&127);else{var u=a.length(),d="";do d+=String.fromCharCode(u&255),u=u>>>8;while(u>0);e.putByte(d.length|128);for(var l=d.length-1;l>=0;--l)e.putByte(d.charCodeAt(l))}return e.putBuffer(a),e};asn1$2.oidToDer=function(t){var e=t.split("."),n=forge$g.util.createBuffer();n.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var a,o,l,u,d=2;d<e.length;++d){a=!0,o=[],l=parseInt(e[d],10);do u=l&127,l=l>>>7,a||(u|=128),o.push(u),a=!1;while(l>0);for(var m=o.length-1;m>=0;--m)n.putByte(o[m])}return n};asn1$2.derToOid=function(t){var e;typeof t=="string"&&(t=forge$g.util.createBuffer(t));var n=t.getByte();e=Math.floor(n/40)+"."+n%40;for(var a=0;t.length()>0;)n=t.getByte(),a=a<<7,n&128?a+=n&127:(e+="."+(a+n),a=0);return e};asn1$2.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var a=parseInt(t.substr(2,2),10)-1,o=parseInt(t.substr(4,2),10),l=parseInt(t.substr(6,2),10),u=parseInt(t.substr(8,2),10),d=0;if(t.length>11){var m=t.charAt(10),y=10;m!=="+"&&m!=="-"&&(d=parseInt(t.substr(10,2),10),y+=2)}if(e.setUTCFullYear(n,a,o),e.setUTCHours(l,u,d,0),y&&(m=t.charAt(y),m==="+"||m==="-")){var b=parseInt(t.substr(y+1,2),10),_=parseInt(t.substr(y+4,2),10),w=b*60+_;w*=6e4,m==="+"?e.setTime(+e-w):e.setTime(+e+w)}return e};asn1$2.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),a=parseInt(t.substr(4,2),10)-1,o=parseInt(t.substr(6,2),10),l=parseInt(t.substr(8,2),10),u=parseInt(t.substr(10,2),10),d=parseInt(t.substr(12,2),10),m=0,y=0,b=!1;t.charAt(t.length-1)==="Z"&&(b=!0);var _=t.length-5,w=t.charAt(_);if(w==="+"||w==="-"){var E=parseInt(t.substr(_+1,2),10),A=parseInt(t.substr(_+4,2),10);y=E*60+A,y*=6e4,w==="+"&&(y*=-1),b=!0}return t.charAt(14)==="."&&(m=parseFloat(t.substr(14),10)*1e3),b?(e.setUTCFullYear(n,a,o),e.setUTCHours(l,u,d,m),e.setTime(+e+y)):(e.setFullYear(n,a,o),e.setHours(l,u,d,m)),e};asn1$2.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var a=0;a<n.length;++a)n[a].length<2&&(e+="0"),e+=n[a];return e+="Z",e};asn1$2.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var a=0;a<n.length;++a)n[a].length<2&&(e+="0"),e+=n[a];return e+="Z",e};asn1$2.integerToDer=function(t){var e=forge$g.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=t,n};asn1$2.derToInteger=function(t){typeof t=="string"&&(t=forge$g.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};asn1$2.validate=function(t,e,n,a){var o=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(o=!0,e.value&&forge$g.util.isArray(e.value))for(var l=0,u=0;o&&u<e.value.length;++u)o=e.value[u].optional||!1,t.value[l]&&(o=asn1$2.validate(t.value[l],e.value[u],n,a),o?++l:e.value[u].optional&&(o=!0)),!o&&a&&a.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(o&&n&&(e.capture&&(n[e.capture]=t.value),e.captureAsn1&&(n[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(n[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t))if(t.bitStringContents.length<2)n[e.captureBitStringValue]="";else{var d=t.bitStringContents.charCodeAt(0);if(d!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[e.captureBitStringValue]=t.bitStringContents.slice(1)}}else a&&a.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else a&&(t.tagClass!==e.tagClass&&a.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&a.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return o};var _nonLatinRegex=/[^\\u0000-\\u00ff]/;asn1$2.prettyPrint=function(t,e,n){var a="";e=e||0,n=n||2,e>0&&(a+=`
`);for(var o="",l=0;l<e*n;++l)o+=" ";switch(a+=o+"Tag: ",t.tagClass){case asn1$2.Class.UNIVERSAL:a+="Universal:";break;case asn1$2.Class.APPLICATION:a+="Application:";break;case asn1$2.Class.CONTEXT_SPECIFIC:a+="Context-Specific:";break;case asn1$2.Class.PRIVATE:a+="Private:";break}if(t.tagClass===asn1$2.Class.UNIVERSAL)switch(a+=t.type,t.type){case asn1$2.Type.NONE:a+=" (None)";break;case asn1$2.Type.BOOLEAN:a+=" (Boolean)";break;case asn1$2.Type.INTEGER:a+=" (Integer)";break;case asn1$2.Type.BITSTRING:a+=" (Bit string)";break;case asn1$2.Type.OCTETSTRING:a+=" (Octet string)";break;case asn1$2.Type.NULL:a+=" (Null)";break;case asn1$2.Type.OID:a+=" (Object Identifier)";break;case asn1$2.Type.ODESC:a+=" (Object Descriptor)";break;case asn1$2.Type.EXTERNAL:a+=" (External or Instance of)";break;case asn1$2.Type.REAL:a+=" (Real)";break;case asn1$2.Type.ENUMERATED:a+=" (Enumerated)";break;case asn1$2.Type.EMBEDDED:a+=" (Embedded PDV)";break;case asn1$2.Type.UTF8:a+=" (UTF8)";break;case asn1$2.Type.ROID:a+=" (Relative Object Identifier)";break;case asn1$2.Type.SEQUENCE:a+=" (Sequence)";break;case asn1$2.Type.SET:a+=" (Set)";break;case asn1$2.Type.PRINTABLESTRING:a+=" (Printable String)";break;case asn1$2.Type.IA5String:a+=" (IA5String (ASCII))";break;case asn1$2.Type.UTCTIME:a+=" (UTC time)";break;case asn1$2.Type.GENERALIZEDTIME:a+=" (Generalized time)";break;case asn1$2.Type.BMPSTRING:a+=" (BMP String)";break}else a+=t.type;if(a+=`
`,a+=o+"Constructed: "+t.constructed+`
`,t.composed){for(var u=0,d="",l=0;l<t.value.length;++l)t.value[l]!==void 0&&(u+=1,d+=asn1$2.prettyPrint(t.value[l],e+1,n),l+1<t.value.length&&(d+=","));a+=o+"Sub values: "+u+d}else{if(a+=o+"Value: ",t.type===asn1$2.Type.OID){var m=asn1$2.derToOid(t.value);a+=m,forge$g.pki&&forge$g.pki.oids&&m in forge$g.pki.oids&&(a+=" ("+forge$g.pki.oids[m]+") ")}if(t.type===asn1$2.Type.INTEGER)try{a+=asn1$2.derToInteger(t.value)}catch{a+="0x"+forge$g.util.bytesToHex(t.value)}else if(t.type===asn1$2.Type.BITSTRING){if(t.value.length>1?a+="0x"+forge$g.util.bytesToHex(t.value.slice(1)):a+="(none)",t.value.length>0){var y=t.value.charCodeAt(0);y==1?a+=" (1 unused bit shown)":y>1&&(a+=" ("+y+" unused bits shown)")}}else if(t.type===asn1$2.Type.OCTETSTRING)_nonLatinRegex.test(t.value)||(a+="("+t.value+") "),a+="0x"+forge$g.util.bytesToHex(t.value);else if(t.type===asn1$2.Type.UTF8)try{a+=forge$g.util.decodeUtf8(t.value)}catch(b){if(b.message==="URI malformed")a+="0x"+forge$g.util.bytesToHex(t.value)+" (malformed UTF8)";else throw b}else t.type===asn1$2.Type.PRINTABLESTRING||t.type===asn1$2.Type.IA5String?a+=t.value:_nonLatinRegex.test(t.value)?a+="0x"+forge$g.util.bytesToHex(t.value):t.value.length===0?a+="[null]":a+=t.value}return a};var forge$f=forge$m;forge$f.des=forge$f.des||{};forge$f.des.startEncrypting=function(t,e,n,a){var o=_createCipher({key:t,output:n,decrypt:!1,mode:a||(e===null?"ECB":"CBC")});return o.start(e),o};forge$f.des.createEncryptionCipher=function(t,e){return _createCipher({key:t,output:null,decrypt:!1,mode:e})};forge$f.des.startDecrypting=function(t,e,n,a){var o=_createCipher({key:t,output:n,decrypt:!0,mode:a||(e===null?"ECB":"CBC")});return o.start(e),o};forge$f.des.createDecryptionCipher=function(t,e){return _createCipher({key:t,output:null,decrypt:!0,mode:e})};forge$f.des.Algorithm=function(t,e){var n=this;n.name=t,n.mode=new e({blockSize:8,cipher:{encrypt:function(a,o){return _updateBlock(n._keys,a,o,!1)},decrypt:function(a,o){return _updateBlock(n._keys,a,o,!0)}}}),n._init=!1};forge$f.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=forge$f.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=_createKeys(e),this._init=!0}};registerAlgorithm("DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("DES-CTR",forge$f.cipher.modes.ctr);registerAlgorithm("3DES-ECB",forge$f.cipher.modes.ecb);registerAlgorithm("3DES-CBC",forge$f.cipher.modes.cbc);registerAlgorithm("3DES-CFB",forge$f.cipher.modes.cfb);registerAlgorithm("3DES-OFB",forge$f.cipher.modes.ofb);registerAlgorithm("3DES-CTR",forge$f.cipher.modes.ctr);function registerAlgorithm(t,e){var n=function(){return new forge$f.des.Algorithm(t,e)};forge$f.cipher.registerAlgorithm(t,n)}var spfunction1=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],spfunction2=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],spfunction3=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],spfunction4=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],spfunction5=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],spfunction6=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],spfunction7=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],spfunction8=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function _createKeys(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],a=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],o=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],l=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],u=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],d=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],m=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],y=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],b=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],_=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],w=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],E=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],A=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],C=t.length()>8?3:1,k=[],B=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],D=0,q,j=0;j<C;j++){var J=t.getInt32(),Y=t.getInt32();q=(J>>>4^Y)&252645135,Y^=q,J^=q<<4,q=(Y>>>-16^J)&65535,J^=q,Y^=q<<-16,q=(J>>>2^Y)&858993459,Y^=q,J^=q<<2,q=(Y>>>-16^J)&65535,J^=q,Y^=q<<-16,q=(J>>>1^Y)&1431655765,Y^=q,J^=q<<1,q=(Y>>>8^J)&16711935,J^=q,Y^=q<<8,q=(J>>>1^Y)&1431655765,Y^=q,J^=q<<1,q=J<<8|Y>>>20&240,J=Y<<24|Y<<8&16711680|Y>>>8&65280|Y>>>24&240,Y=q;for(var L=0;L<B.length;++L){B[L]?(J=J<<2|J>>>26,Y=Y<<2|Y>>>26):(J=J<<1|J>>>27,Y=Y<<1|Y>>>27),J&=-15,Y&=-15;var Z=e[J>>>28]|n[J>>>24&15]|a[J>>>20&15]|o[J>>>16&15]|l[J>>>12&15]|u[J>>>8&15]|d[J>>>4&15],Q=m[Y>>>28]|y[Y>>>24&15]|b[Y>>>20&15]|_[Y>>>16&15]|w[Y>>>12&15]|E[Y>>>8&15]|A[Y>>>4&15];q=(Q>>>16^Z)&65535,k[D++]=Z^q,k[D++]=Q^q<<16}}return k}function _updateBlock(t,e,n,a){var o=t.length===32?3:9,l;o===3?l=a?[30,-2,-2]:[0,32,2]:l=a?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var u,d=e[0],m=e[1];u=(d>>>4^m)&252645135,m^=u,d^=u<<4,u=(d>>>16^m)&65535,m^=u,d^=u<<16,u=(m>>>2^d)&858993459,d^=u,m^=u<<2,u=(m>>>8^d)&16711935,d^=u,m^=u<<8,u=(d>>>1^m)&1431655765,m^=u,d^=u<<1,d=d<<1|d>>>31,m=m<<1|m>>>31;for(var y=0;y<o;y+=3){for(var b=l[y+1],_=l[y+2],w=l[y];w!=b;w+=_){var E=m^t[w],A=(m>>>4|m<<28)^t[w+1];u=d,d=m,m=u^(spfunction2[E>>>24&63]|spfunction4[E>>>16&63]|spfunction6[E>>>8&63]|spfunction8[E&63]|spfunction1[A>>>24&63]|spfunction3[A>>>16&63]|spfunction5[A>>>8&63]|spfunction7[A&63])}u=d,d=m,m=u}d=d>>>1|d<<31,m=m>>>1|m<<31,u=(d>>>1^m)&1431655765,m^=u,d^=u<<1,u=(m>>>8^d)&16711935,d^=u,m^=u<<8,u=(m>>>2^d)&858993459,d^=u,m^=u<<2,u=(d>>>16^m)&65535,m^=u,d^=u<<16,u=(d>>>4^m)&252645135,m^=u,d^=u<<4,n[0]=d,n[1]=m}function _createCipher(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="DES-"+e,a;t.decrypt?a=forge$f.cipher.createDecipher(n,t.key):a=forge$f.cipher.createCipher(n,t.key);var o=a.start;return a.start=function(l,u){var d=null;u instanceof forge$f.util.ByteBuffer&&(d=u,u={}),u=u||{},u.output=d,u.iv=l,o.call(a,u)},a}var forge$e=forge$m;forge$e.md=forge$e.md||{};forge$e.md.algorithms=forge$e.md.algorithms||{};var forge$d=forge$m,hmac=forge$d.hmac=forge$d.hmac||{};hmac.create=function(){var t=null,e=null,n=null,a=null,o={};return o.start=function(l,u){if(l!==null)if(typeof l=="string")if(l=l.toLowerCase(),l in forge$d.md.algorithms)e=forge$d.md.algorithms[l].create();else throw new Error('Unknown hash algorithm "'+l+'"');else e=l;if(u===null)u=t;else{if(typeof u=="string")u=forge$d.util.createBuffer(u);else if(forge$d.util.isArray(u)){var d=u;u=forge$d.util.createBuffer();for(var m=0;m<d.length;++m)u.putByte(d[m])}var y=u.length();y>e.blockLength&&(e.start(),e.update(u.bytes()),u=e.digest()),n=forge$d.util.createBuffer(),a=forge$d.util.createBuffer(),y=u.length();for(var m=0;m<y;++m){var d=u.at(m);n.putByte(54^d),a.putByte(92^d)}if(y<e.blockLength)for(var d=e.blockLength-y,m=0;m<d;++m)n.putByte(54),a.putByte(92);t=u,n=n.bytes(),a=a.bytes()}e.start(),e.update(n)},o.update=function(l){e.update(l)},o.getMac=function(){var l=e.digest().bytes();return e.start(),e.update(a),e.update(l),e.digest()},o.digest=o.getMac,o};var forge$c=forge$m,pkcs5=forge$c.pkcs5=forge$c.pkcs5||{},crypto$4;forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&(crypto$4=requireCryptoBrowserify());var pbkdf2$2=forge$c.pbkdf2=pkcs5.pbkdf2=function(t,e,n,a,o,l){if(typeof o=="function"&&(l=o,o=null),forge$c.util.isNodejs&&!forge$c.options.usePureJavaScript&&crypto$4.pbkdf2&&(o===null||typeof o!="object")&&(crypto$4.pbkdf2Sync.length>4||!o||o==="sha1"))return typeof o!="string"&&(o="sha1"),t=Buffer$y.from(t,"binary"),e=Buffer$y.from(e,"binary"),l?crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2(t,e,n,a,function(q,j){if(q)return l(q);l(null,j.toString("binary"))}):crypto$4.pbkdf2(t,e,n,a,o,function(q,j){if(q)return l(q);l(null,j.toString("binary"))}):crypto$4.pbkdf2Sync.length===4?crypto$4.pbkdf2Sync(t,e,n,a).toString("binary"):crypto$4.pbkdf2Sync(t,e,n,a,o).toString("binary");if((typeof o>"u"||o===null)&&(o="sha1"),typeof o=="string"){if(!(o in forge$c.md.algorithms))throw new Error("Unknown hash algorithm: "+o);o=forge$c.md[o].create()}var u=o.digestLength;if(a>4294967295*u){var d=new Error("Derived key is too long.");if(l)return l(d);throw d}var m=Math.ceil(a/u),y=a-(m-1)*u,b=forge$c.hmac.create();b.start(o,t);var _="",w,E,A;if(!l){for(var C=1;C<=m;++C){b.start(null,null),b.update(e),b.update(forge$c.util.int32ToBytes(C)),w=A=b.digest().getBytes();for(var k=2;k<=n;++k)b.start(null,null),b.update(A),E=b.digest().getBytes(),w=forge$c.util.xorBytes(w,E,u),A=E;_+=C<m?w:w.substr(0,y)}return _}var C=1,k;function B(){if(C>m)return l(null,_);b.start(null,null),b.update(e),b.update(forge$c.util.int32ToBytes(C)),w=A=b.digest().getBytes(),k=2,D()}function D(){if(k<=n)return b.start(null,null),b.update(A),E=b.digest().getBytes(),w=forge$c.util.xorBytes(w,E,u),A=E,++k,forge$c.util.setImmediate(D);_+=C<m?w:w.substr(0,y),++C,B()}B()},forge$b=forge$m,pem=forge$b.pem=forge$b.pem||{};pem.encode=function(t,e){e=e||{};var n="-----BEGIN "+t.type+`-----\r
`,a;if(t.procType&&(a={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},n+=foldHeader(a)),t.contentDomain&&(a={name:"Content-Domain",values:[t.contentDomain]},n+=foldHeader(a)),t.dekInfo&&(a={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&a.values.push(t.dekInfo.parameters),n+=foldHeader(a)),t.headers)for(var o=0;o<t.headers.length;++o)n+=foldHeader(t.headers[o]);return t.procType&&(n+=`\r
`),n+=forge$b.util.encode64(t.body,e.maxline||64)+`\r
`,n+="-----END "+t.type+`-----\r
`,n};pem.decode=function(t){for(var e=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,a=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,o=/\r?\n/,l;l=n.exec(t),!!l;){var u=l[1];u==="NEW CERTIFICATE REQUEST"&&(u="CERTIFICATE REQUEST");var d={type:u,procType:null,contentDomain:null,dekInfo:null,headers:[],body:forge$b.util.decode64(l[3])};if(e.push(d),!!l[2]){for(var m=l[2].split(o),y=0;l&&y<m.length;){for(var b=m[y].replace(/\s+$/,""),_=y+1;_<m.length;++_){var w=m[_];if(!/\s/.test(w[0]))break;b+=w,y=_}if(l=b.match(a),l){for(var E={name:l[1],values:[]},A=l[2].split(","),C=0;C<A.length;++C)E.values.push(ltrim(A[C]));if(d.procType)if(!d.contentDomain&&E.name==="Content-Domain")d.contentDomain=A[0]||"";else if(!d.dekInfo&&E.name==="DEK-Info"){if(E.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');d.dekInfo={algorithm:A[0],parameters:A[1]||null}}else d.headers.push(E);else{if(E.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(E.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');d.procType={version:A[0],type:A[1]}}}++y}if(d.procType==="ENCRYPTED"&&!d.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function foldHeader(t){for(var e=t.name+": ",n=[],a=function(m,y){return" "+y},o=0;o<t.values.length;++o)n.push(t.values[o].replace(/^(\S+\r\n)/,a));e+=n.join(",")+`\r
`;for(var l=0,u=-1,o=0;o<e.length;++o,++l)if(l>65&&u!==-1){var d=e[u];d===","?(++u,e=e.substr(0,u)+`\r
 `+e.substr(u)):e=e.substr(0,u)+`\r
`+d+e.substr(u+1),l=o-u-1,u=-1,++o}else(e[o]===" "||e[o]==="	"||e[o]===",")&&(u=o);return e}function ltrim(t){return t.replace(/^\s+/,"")}var forge$a=forge$m,sha256$5=forge$a.sha256=forge$a.sha256||{};forge$a.md.sha256=forge$a.md.algorithms.sha256=sha256$5;sha256$5.create=function(){_initialized$2||_init$2();var t=null,e=forge$a.util.createBuffer(),n=new Array(64),a={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var o=a.messageLengthSize/4,l=0;l<o;++l)a.fullMessageLength.push(0);return e=forge$a.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},a},a.start(),a.update=function(o,l){l==="utf8"&&(o=forge$a.util.encodeUtf8(o));var u=o.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=u[1],u[1]=u[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(o),_update$2(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),a},a.digest=function(){var o=forge$a.util.createBuffer();o.putBytes(e.bytes());var l=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=l&a.blockLength-1;o.putBytes(_padding$2.substr(0,a.blockLength-u));for(var d,m,y=a.fullMessageLength[0]*8,b=0;b<a.fullMessageLength.length-1;++b)d=a.fullMessageLength[b+1]*8,m=d/4294967296>>>0,y+=m,o.putInt32(y>>>0),y=d>>>0;o.putInt32(y);var _={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};_update$2(_,n,o);var w=forge$a.util.createBuffer();return w.putInt32(_.h0),w.putInt32(_.h1),w.putInt32(_.h2),w.putInt32(_.h3),w.putInt32(_.h4),w.putInt32(_.h5),w.putInt32(_.h6),w.putInt32(_.h7),w},a};var _padding$2=null,_initialized$2=!1,_k$1=null;function _init$2(){_padding$2=String.fromCharCode(128),_padding$2+=forge$a.util.fillString(String.fromCharCode(0),64),_k$1=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],_initialized$2=!0}function _update$2(t,e,n){for(var a,o,l,u,d,m,y,b,_,w,E,A,C,k,B,D=n.length();D>=64;){for(y=0;y<16;++y)e[y]=n.getInt32();for(;y<64;++y)a=e[y-2],a=(a>>>17|a<<15)^(a>>>19|a<<13)^a>>>10,o=e[y-15],o=(o>>>7|o<<25)^(o>>>18|o<<14)^o>>>3,e[y]=a+e[y-7]+o+e[y-16]|0;for(b=t.h0,_=t.h1,w=t.h2,E=t.h3,A=t.h4,C=t.h5,k=t.h6,B=t.h7,y=0;y<64;++y)u=(A>>>6|A<<26)^(A>>>11|A<<21)^(A>>>25|A<<7),d=k^A&(C^k),l=(b>>>2|b<<30)^(b>>>13|b<<19)^(b>>>22|b<<10),m=b&_|w&(b^_),a=B+u+d+_k$1[y]+e[y],o=l+m,B=k,k=C,C=A,A=E+a>>>0,E=w,w=_,_=b,b=a+o>>>0;t.h0=t.h0+b|0,t.h1=t.h1+_|0,t.h2=t.h2+w|0,t.h3=t.h3+E|0,t.h4=t.h4+A|0,t.h5=t.h5+C|0,t.h6=t.h6+k|0,t.h7=t.h7+B|0,D-=64}}var forge$9=forge$m,_crypto$1=null;forge$9.util.isNodejs&&!forge$9.options.usePureJavaScript&&!browser$1$1.versions["node-webkit"]&&(_crypto$1=requireCryptoBrowserify());var prng=forge$9.prng=forge$9.prng||{};prng.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=t.md,a=new Array(32),o=0;o<32;++o)a[o]=n.create();e.pools=a,e.pool=0,e.generate=function(y,b){if(!b)return e.generateSync(y);var _=e.plugin.cipher,w=e.plugin.increment,E=e.plugin.formatKey,A=e.plugin.formatSeed,C=forge$9.util.createBuffer();e.key=null,k();function k(B){if(B)return b(B);if(C.length()>=y)return b(null,C.getBytes(y));if(e.generated>1048575&&(e.key=null),e.key===null)return forge$9.util.nextTick(function(){l(k)});var D=_(e.key,e.seed);e.generated+=D.length,C.putBytes(D),e.key=E(_(e.key,w(e.seed))),e.seed=A(_(e.key,e.seed)),forge$9.util.setImmediate(k)}},e.generateSync=function(y){var b=e.plugin.cipher,_=e.plugin.increment,w=e.plugin.formatKey,E=e.plugin.formatSeed;e.key=null;for(var A=forge$9.util.createBuffer();A.length()<y;){e.generated>1048575&&(e.key=null),e.key===null&&u();var C=b(e.key,e.seed);e.generated+=C.length,A.putBytes(C),e.key=w(b(e.key,_(e.seed))),e.seed=E(b(e.key,e.seed))}return A.getBytes(y)};function l(y){if(e.pools[0].messageLength>=32)return d(),y();var b=32-e.pools[0].messageLength<<5;e.seedFile(b,function(_,w){if(_)return y(_);e.collect(w),d(),y()})}function u(){if(e.pools[0].messageLength>=32)return d();var y=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(y)),d()}function d(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var y=e.plugin.md.create();y.update(e.keyBytes);for(var b=1,_=0;_<32;++_)e.reseeds%b===0&&(y.update(e.pools[_].digest().getBytes()),e.pools[_].start()),b=b<<1;e.keyBytes=y.digest().getBytes(),y.start(),y.update(e.keyBytes);var w=y.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(w),e.generated=0}function m(y){var b=null,_=forge$9.util.globalScope,w=_.crypto||_.msCrypto;w&&w.getRandomValues&&(b=function(J){return w.getRandomValues(J)});var E=forge$9.util.createBuffer();if(b)for(;E.length()<y;){var A=Math.max(1,Math.min(y-E.length(),65536)/4),C=new Uint32Array(Math.floor(A));try{b(C);for(var k=0;k<C.length;++k)E.putInt32(C[k])}catch(J){if(!(typeof QuotaExceededError<"u"&&J instanceof QuotaExceededError))throw J}}if(E.length()<y)for(var B,D,q,j=Math.floor(Math.random()*65536);E.length()<y;){D=16807*(j&65535),B=16807*(j>>16),D+=(B&32767)<<16,D+=B>>15,D=(D&2147483647)+(D>>31),j=D&4294967295;for(var k=0;k<3;++k)q=j>>>(k<<3),q^=Math.floor(Math.random()*256),E.putByte(q&255)}return E.getBytes(y)}return _crypto$1?(e.seedFile=function(y,b){_crypto$1.randomBytes(y,function(_,w){if(_)return b(_);b(null,w.toString())})},e.seedFileSync=function(y){return _crypto$1.randomBytes(y).toString()}):(e.seedFile=function(y,b){try{b(null,m(y))}catch(_){b(_)}},e.seedFileSync=m),e.collect=function(y){for(var b=y.length,_=0;_<b;++_)e.pools[e.pool].update(y.substr(_,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(y,b){for(var _="",w=0;w<b;w+=8)_+=String.fromCharCode(y>>w&255);e.collect(_)},e.registerWorker=function(y){if(y===self)e.seedFile=function(_,w){function E(A){var C=A.data;C.forge&&C.forge.prng&&(self.removeEventListener("message",E),w(C.forge.prng.err,C.forge.prng.bytes))}self.addEventListener("message",E),self.postMessage({forge:{prng:{needed:_}}})};else{var b=function(_){var w=_.data;w.forge&&w.forge.prng&&e.seedFile(w.forge.prng.needed,function(E,A){y.postMessage({forge:{prng:{err:E,bytes:A}}})})};y.addEventListener("message",b)}},e};var forge$8=forge$m;(function(){forge$8.random&&forge$8.random.getBytes||function(t){var e={},n=new Array(4),a=forge$8.util.createBuffer();e.formatKey=function(_){var w=forge$8.util.createBuffer(_);return _=new Array(4),_[0]=w.getInt32(),_[1]=w.getInt32(),_[2]=w.getInt32(),_[3]=w.getInt32(),forge$8.aes._expandKey(_,!1)},e.formatSeed=function(_){var w=forge$8.util.createBuffer(_);return _=new Array(4),_[0]=w.getInt32(),_[1]=w.getInt32(),_[2]=w.getInt32(),_[3]=w.getInt32(),_},e.cipher=function(_,w){return forge$8.aes._updateBlock(_,w,n,!1),a.putInt32(n[0]),a.putInt32(n[1]),a.putInt32(n[2]),a.putInt32(n[3]),a.getBytes()},e.increment=function(_){return++_[3],_},e.md=forge$8.md.sha256;function o(){var _=forge$8.prng.create(e);return _.getBytes=function(w,E){return _.generate(w,E)},_.getBytesSync=function(w){return _.generate(w)},_}var l=o(),u=null,d=forge$8.util.globalScope,m=d.crypto||d.msCrypto;if(m&&m.getRandomValues&&(u=function(_){return m.getRandomValues(_)}),!forge$8.util.isNodejs&&!u){if(l.collectInt(+new Date,32),typeof navigator<"u"){var y="";for(var b in navigator)try{typeof navigator[b]=="string"&&(y+=navigator[b])}catch{}l.collect(y),y=null}t&&(t().mousemove(function(_){l.collectInt(_.clientX,16),l.collectInt(_.clientY,16)}),t().keypress(function(_){l.collectInt(_.charCode,8)}))}if(!forge$8.random)forge$8.random=l;else for(var b in l)forge$8.random[b]=l[b];forge$8.random.createInstance=o}(typeof jQuery<"u"?jQuery:null)})();var forge$7=forge$m,piTable=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],s=[1,2,3,5],rol=function(t,e){return t<<e&65535|(t&65535)>>16-e},ror=function(t,e){return(t&65535)>>e|t<<16-e&65535};forge$7.rc2=forge$7.rc2||{};forge$7.rc2.expandKey=function(t,e){typeof t=="string"&&(t=forge$7.util.createBuffer(t)),e=e||128;var n=t,a=t.length(),o=e,l=Math.ceil(o/8),u=255>>(o&7),d;for(d=a;d<128;d++)n.putByte(piTable[n.at(d-1)+n.at(d-a)&255]);for(n.setAt(128-l,piTable[n.at(128-l)&u]),d=127-l;d>=0;d--)n.setAt(d,piTable[n.at(d+1)^n.at(d+l)]);return n};var createCipher=function(t,e,n){var a=!1,o=null,l=null,u=null,d,m,y,b,_=[];for(t=forge$7.rc2.expandKey(t,e),y=0;y<64;y++)_.push(t.getInt16Le());n?(d=function(A){for(y=0;y<4;y++)A[y]+=_[b]+(A[(y+3)%4]&A[(y+2)%4])+(~A[(y+3)%4]&A[(y+1)%4]),A[y]=rol(A[y],s[y]),b++},m=function(A){for(y=0;y<4;y++)A[y]+=_[A[(y+3)%4]&63]}):(d=function(A){for(y=3;y>=0;y--)A[y]=ror(A[y],s[y]),A[y]-=_[b]+(A[(y+3)%4]&A[(y+2)%4])+(~A[(y+3)%4]&A[(y+1)%4]),b--},m=function(A){for(y=3;y>=0;y--)A[y]-=_[A[(y+3)%4]&63]});var w=function(A){var C=[];for(y=0;y<4;y++){var k=o.getInt16Le();u!==null&&(n?k^=u.getInt16Le():u.putInt16Le(k)),C.push(k&65535)}b=n?0:63;for(var B=0;B<A.length;B++)for(var D=0;D<A[B][0];D++)A[B][1](C);for(y=0;y<4;y++)u!==null&&(n?u.putInt16Le(C[y]):C[y]^=u.getInt16Le()),l.putInt16Le(C[y])},E=null;return E={start:function(A,C){A&&typeof A=="string"&&(A=forge$7.util.createBuffer(A)),a=!1,o=forge$7.util.createBuffer(),l=C||new forge$7.util.createBuffer,u=A,E.output=l},update:function(A){for(a||o.putBuffer(A);o.length()>=8;)w([[5,d],[1,m],[6,d],[1,m],[5,d]])},finish:function(A){var C=!0;if(n)if(A)C=A(8,o,!n);else{var k=o.length()===8?8:8-o.length();o.fillWithByte(k,k)}if(C&&(a=!0,E.update()),!n&&(C=o.length()===0,C))if(A)C=A(8,l,!n);else{var B=l.length(),D=l.at(B-1);D>B?C=!1:l.truncate(D)}return C}},E};forge$7.rc2.startEncrypting=function(t,e,n){var a=forge$7.rc2.createEncryptionCipher(t,128);return a.start(e,n),a};forge$7.rc2.createEncryptionCipher=function(t,e){return createCipher(t,e,!0)};forge$7.rc2.startDecrypting=function(t,e,n){var a=forge$7.rc2.createDecryptionCipher(t,128);return a.start(e,n),a};forge$7.rc2.createDecryptionCipher=function(t,e){return createCipher(t,e,!1)};var forge$6=forge$m;forge$6.jsbn=forge$6.jsbn||{};var dbits;function BigInteger$2(t,e,n){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,n):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}forge$6.jsbn.BigInteger=BigInteger$2;function nbi(){return new BigInteger$2(null)}function am1(t,e,n,a,o,l){for(;--l>=0;){var u=e*this.data[t++]+n.data[a]+o;o=Math.floor(u/67108864),n.data[a++]=u&67108863}return o}function am2(t,e,n,a,o,l){for(var u=e&32767,d=e>>15;--l>=0;){var m=this.data[t]&32767,y=this.data[t++]>>15,b=d*m+y*u;m=u*m+((b&32767)<<15)+n.data[a]+(o&1073741823),o=(m>>>30)+(b>>>15)+d*y+(o>>>30),n.data[a++]=m&1073741823}return o}function am3(t,e,n,a,o,l){for(var u=e&16383,d=e>>14;--l>=0;){var m=this.data[t]&16383,y=this.data[t++]>>14,b=d*m+y*u;m=u*m+((b&16383)<<14)+n.data[a]+o,o=(m>>28)+(b>>14)+d*y,n.data[a++]=m&268435455}return o}typeof navigator>"u"?(BigInteger$2.prototype.am=am3,dbits=28):navigator.appName=="Microsoft Internet Explorer"?(BigInteger$2.prototype.am=am2,dbits=30):navigator.appName!="Netscape"?(BigInteger$2.prototype.am=am1,dbits=26):(BigInteger$2.prototype.am=am3,dbits=28);BigInteger$2.prototype.DB=dbits;BigInteger$2.prototype.DM=(1<<dbits)-1;BigInteger$2.prototype.DV=1<<dbits;var BI_FP=52;BigInteger$2.prototype.FV=Math.pow(2,BI_FP);BigInteger$2.prototype.F1=BI_FP-dbits;BigInteger$2.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var n=BI_RC[t.charCodeAt(e)];return n??-1}function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==256)n=8;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var a=t.length,o=!1,l=0;--a>=0;){var u=n==8?t[a]&255:intAt(t,a);if(u<0){t.charAt(a)=="-"&&(o=!0);continue}o=!1,l==0?this.data[this.t++]=u:l+n>this.DB?(this.data[this.t-1]|=(u&(1<<this.DB-l)-1)<<l,this.data[this.t++]=u>>this.DB-l):this.data[this.t-1]|=u<<l,l+=n,l>=this.DB&&(l-=this.DB)}n==8&&t[0]&128&&(this.s=-1,l>0&&(this.data[this.t-1]|=(1<<this.DB-l)-1<<l)),this.clamp(),o&&BigInteger$2.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var n=(1<<e)-1,a,o=!1,l="",u=this.t,d=this.DB-u*this.DB%e;if(u-- >0)for(d<this.DB&&(a=this.data[u]>>d)>0&&(o=!0,l=int2char(a));u>=0;)d<e?(a=(this.data[u]&(1<<d)-1)<<e-d,a|=this.data[--u]>>(d+=this.DB-e)):(a=this.data[u]>>(d-=e)&n,d<=0&&(d+=this.DB,--u)),a>0&&(o=!0),o&&(l+=int2char(a));return o?l:"0"}function bnNegate(){var t=nbi();return BigInteger$2.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this.data[n]-t.data[n])!=0)return e;return 0}function nbits(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this.data[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var n=t%this.DB,a=this.DB-n,o=(1<<a)-1,l=Math.floor(t/this.DB),u=this.s<<n&this.DM,d;for(d=this.t-1;d>=0;--d)e.data[d+l+1]=this.data[d]>>a|u,u=(this.data[d]&o)<<n;for(d=l-1;d>=0;--d)e.data[d]=0;e.data[l]=u,e.t=this.t+l+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var a=t%this.DB,o=this.DB-a,l=(1<<a)-1;e.data[0]=this.data[n]>>a;for(var u=n+1;u<this.t;++u)e.data[u-n-1]|=(this.data[u]&l)<<o,e.data[u-n]=this.data[u]>>a;a>0&&(e.data[this.t-n-1]|=(this.s&l)<<o),e.t=this.t-n,e.clamp()}function bnpSubTo(t,e){for(var n=0,a=0,o=Math.min(t.t,this.t);n<o;)a+=this.data[n]-t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;if(t.t<this.t){for(a-=t.s;n<this.t;)a+=this.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;n<t.t;)a-=t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a-=t.s}e.s=a<0?-1:0,a<-1?e.data[n++]=this.DV+a:a>0&&(e.data[n++]=a),e.t=n,e.clamp()}function bnpMultiplyTo(t,e){var n=this.abs(),a=t.abs(),o=n.t;for(e.t=o+a.t;--o>=0;)e.data[o]=0;for(o=0;o<a.t;++o)e.data[o+n.t]=n.am(0,a.data[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger$2.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var a=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,a,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,n){var a=t.abs();if(!(a.t<=0)){var o=this.abs();if(o.t<a.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=nbi());var l=nbi(),u=this.s,d=t.s,m=this.DB-nbits(a.data[a.t-1]);m>0?(a.lShiftTo(m,l),o.lShiftTo(m,n)):(a.copyTo(l),o.copyTo(n));var y=l.t,b=l.data[y-1];if(b!=0){var _=b*(1<<this.F1)+(y>1?l.data[y-2]>>this.F2:0),w=this.FV/_,E=(1<<this.F1)/_,A=1<<this.F2,C=n.t,k=C-y,B=e??nbi();for(l.dlShiftTo(k,B),n.compareTo(B)>=0&&(n.data[n.t++]=1,n.subTo(B,n)),BigInteger$2.ONE.dlShiftTo(y,B),B.subTo(l,l);l.t<y;)l.data[l.t++]=0;for(;--k>=0;){var D=n.data[--C]==b?this.DM:Math.floor(n.data[C]*w+(n.data[C-1]+A)*E);if((n.data[C]+=l.am(0,D,n,k,0,y))<D)for(l.dlShiftTo(k,B),n.subTo(B,n);n.data[C]<--D;)n.subTo(B,n)}e!=null&&(n.drShiftTo(y,e),u!=d&&BigInteger$2.ZERO.subTo(e,e)),n.t=y,n.clamp(),m>0&&n.rShiftTo(m,n),u<0&&BigInteger$2.ZERO.subTo(n,n)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger$2.ZERO)>0&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var t=this.data[0];if(!(t&1))return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger$2.ZERO)>0&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t.data[e]&32767,a=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t.data[n]+=this.m.am(0,a,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this.data[0]&1:this.s)==0}function bnpExp(t,e){if(t>4294967295||t<1)return BigInteger$2.ONE;var n=nbi(),a=nbi(),o=e.convert(this),l=nbits(t)-1;for(o.copyTo(n);--l>=0;)if(e.sqrTo(n,a),(t&1<<l)>0)e.mulTo(a,o,n);else{var u=n;n=a,a=u}return e.revert(n)}function bnModPowInt(t,e){var n;return t<256||e.isEven()?n=new Classic(e):n=new Montgomery(e),this.exp(t,n)}BigInteger$2.prototype.copyTo=bnpCopyTo;BigInteger$2.prototype.fromInt=bnpFromInt;BigInteger$2.prototype.fromString=bnpFromString;BigInteger$2.prototype.clamp=bnpClamp;BigInteger$2.prototype.dlShiftTo=bnpDLShiftTo;BigInteger$2.prototype.drShiftTo=bnpDRShiftTo;BigInteger$2.prototype.lShiftTo=bnpLShiftTo;BigInteger$2.prototype.rShiftTo=bnpRShiftTo;BigInteger$2.prototype.subTo=bnpSubTo;BigInteger$2.prototype.multiplyTo=bnpMultiplyTo;BigInteger$2.prototype.squareTo=bnpSquareTo;BigInteger$2.prototype.divRemTo=bnpDivRemTo;BigInteger$2.prototype.invDigit=bnpInvDigit;BigInteger$2.prototype.isEven=bnpIsEven;BigInteger$2.prototype.exp=bnpExp;BigInteger$2.prototype.toString=bnToString;BigInteger$2.prototype.negate=bnNegate;BigInteger$2.prototype.abs=bnAbs;BigInteger$2.prototype.compareTo=bnCompareTo;BigInteger$2.prototype.bitLength=bnBitLength;BigInteger$2.prototype.mod=bnMod;BigInteger$2.prototype.modPowInt=bnModPowInt;BigInteger$2.ZERO=nbv(0);BigInteger$2.ONE=nbv(1);function bnClone(){var t=nbi();return this.copyTo(t),t}function bnIntValue(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function bnByteValue(){return this.t==0?this.s:this.data[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this.data[0]<<16>>16}function bnpChunkSize(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function bnSigNum(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}function bnpToRadix(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),a=nbv(n),o=nbi(),l=nbi(),u="";for(this.divRemTo(a,o,l);o.signum()>0;)u=(n+l.intValue()).toString(t).substr(1)+u,o.divRemTo(a,o,l);return l.intValue().toString(t)+u}function bnpFromRadix(t,e){this.fromInt(0),e==null&&(e=10);for(var n=this.chunkSize(e),a=Math.pow(e,n),o=!1,l=0,u=0,d=0;d<t.length;++d){var m=intAt(t,d);if(m<0){t.charAt(d)=="-"&&this.signum()==0&&(o=!0);continue}u=e*u+m,++l>=n&&(this.dMultiply(a),this.dAddOffset(u,0),l=0,u=0)}l>0&&(this.dMultiply(Math.pow(e,l)),this.dAddOffset(u,0)),o&&BigInteger$2.ZERO.subTo(this,this)}function bnpFromNumber(t,e,n){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(BigInteger$2.ONE.shiftLeft(t-1),op_or,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(BigInteger$2.ONE.shiftLeft(t-1),this);else{var a=new Array,o=t&7;a.length=(t>>3)+1,e.nextBytes(a),o>0?a[0]&=(1<<o)-1:a[0]=0,this.fromString(a,256)}}function bnToByteArray(){var t=this.t,e=new Array;e[0]=this.s;var n=this.DB-t*this.DB%8,a,o=0;if(t-- >0)for(n<this.DB&&(a=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[o++]=a|this.s<<this.DB-n);t>=0;)n<8?(a=(this.data[t]&(1<<n)-1)<<8-n,a|=this.data[--t]>>(n+=this.DB-8)):(a=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),a&128&&(a|=-256),o==0&&(this.s&128)!=(a&128)&&++o,(o>0||a!=this.s)&&(e[o++]=a);return e}function bnEquals(t){return this.compareTo(t)==0}function bnMin(t){return this.compareTo(t)<0?this:t}function bnMax(t){return this.compareTo(t)>0?this:t}function bnpBitwiseTo(t,e,n){var a,o,l=Math.min(t.t,this.t);for(a=0;a<l;++a)n.data[a]=e(this.data[a],t.data[a]);if(t.t<this.t){for(o=t.s&this.DM,a=l;a<this.t;++a)n.data[a]=e(this.data[a],o);n.t=this.t}else{for(o=this.s&this.DM,a=l;a<t.t;++a)n.data[a]=e(o,t.data[a]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function op_and(t,e){return t&e}function bnAnd(t){var e=nbi();return this.bitwiseTo(t,op_and,e),e}function op_or(t,e){return t|e}function bnOr(t){var e=nbi();return this.bitwiseTo(t,op_or,e),e}function op_xor(t,e){return t^e}function bnXor(t){var e=nbi();return this.bitwiseTo(t,op_xor,e),e}function op_andnot(t,e){return t&~e}function bnAndNot(t){var e=nbi();return this.bitwiseTo(t,op_andnot,e),e}function bnNot(){for(var t=nbi(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}function bnShiftLeft(t){var e=nbi();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function bnShiftRight(t){var e=nbi();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function lbit(t){if(t==0)return-1;var e=0;return t&65535||(t>>=16,e+=16),t&255||(t>>=8,e+=8),t&15||(t>>=4,e+=4),t&3||(t>>=2,e+=2),t&1||++e,e}function bnGetLowestSetBit(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+lbit(this.data[t]);return this.s<0?this.t*this.DB:-1}function cbit(t){for(var e=0;t!=0;)t&=t-1,++e;return e}function bnBitCount(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=cbit(this.data[n]^e);return t}function bnTestBit(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}function bnpChangeBit(t,e){var n=BigInteger$2.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function bnSetBit(t){return this.changeBit(t,op_or)}function bnClearBit(t){return this.changeBit(t,op_andnot)}function bnFlipBit(t){return this.changeBit(t,op_xor)}function bnpAddTo(t,e){for(var n=0,a=0,o=Math.min(t.t,this.t);n<o;)a+=this.data[n]+t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;if(t.t<this.t){for(a+=t.s;n<this.t;)a+=this.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a+=this.s}else{for(a+=this.s;n<t.t;)a+=t.data[n],e.data[n++]=a&this.DM,a>>=this.DB;a+=t.s}e.s=a<0?-1:0,a>0?e.data[n++]=a:a<-1&&(e.data[n++]=this.DV+a),e.t=n,e.clamp()}function bnAdd(t){var e=nbi();return this.addTo(t,e),e}function bnSubtract(t){var e=nbi();return this.subTo(t,e),e}function bnMultiply(t){var e=nbi();return this.multiplyTo(t,e),e}function bnDivide(t){var e=nbi();return this.divRemTo(t,e,null),e}function bnRemainder(t){var e=nbi();return this.divRemTo(t,null,e),e}function bnDivideAndRemainder(t){var e=nbi(),n=nbi();return this.divRemTo(t,e,n),new Array(e,n)}function bnpDMultiply(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function bnpDAddOffset(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}function NullExp(){}function nNop(t){return t}function nMulTo(t,e,n){t.multiplyTo(e,n)}function nSqrTo(t,e){t.squareTo(e)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(t){return this.exp(t,new NullExp)}function bnpMultiplyLowerTo(t,e,n){var a=Math.min(this.t+t.t,e);for(n.s=0,n.t=a;a>0;)n.data[--a]=0;var o;for(o=n.t-this.t;a<o;++a)n.data[a+this.t]=this.am(0,t.data[a],n,a,0,this.t);for(o=Math.min(t.t,e);a<o;++a)this.am(0,t.data[a],n,a,0,e-a);n.clamp()}function bnpMultiplyUpperTo(t,e,n){--e;var a=n.t=this.t+t.t-e;for(n.s=0;--a>=0;)n.data[a]=0;for(a=Math.max(e-this.t,0);a<t.t;++a)n.data[this.t+a-e]=this.am(e-a,t.data[a],n,0,0,this.t+a-e);n.clamp(),n.drShiftTo(1,n)}function Barrett(t){this.r2=nbi(),this.q3=nbi(),BigInteger$2.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function barrettConvert(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=nbi();return t.copyTo(e),this.reduce(e),e}function barrettRevert(t){return t}function barrettReduce(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}function barrettSqrTo(t,e){t.squareTo(e),this.reduce(e)}function barrettMulTo(t,e,n){t.multiplyTo(e,n),this.reduce(n)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(t,e){var n=t.bitLength(),a,o=nbv(1),l;if(n<=0)return o;n<18?a=1:n<48?a=3:n<144?a=4:n<768?a=5:a=6,n<8?l=new Classic(e):e.isEven()?l=new Barrett(e):l=new Montgomery(e);var u=new Array,d=3,m=a-1,y=(1<<a)-1;if(u[1]=l.convert(this),a>1){var b=nbi();for(l.sqrTo(u[1],b);d<=y;)u[d]=nbi(),l.mulTo(b,u[d-2],u[d]),d+=2}var _=t.t-1,w,E=!0,A=nbi(),C;for(n=nbits(t.data[_])-1;_>=0;){for(n>=m?w=t.data[_]>>n-m&y:(w=(t.data[_]&(1<<n+1)-1)<<m-n,_>0&&(w|=t.data[_-1]>>this.DB+n-m)),d=a;!(w&1);)w>>=1,--d;if((n-=d)<0&&(n+=this.DB,--_),E)u[w].copyTo(o),E=!1;else{for(;d>1;)l.sqrTo(o,A),l.sqrTo(A,o),d-=2;d>0?l.sqrTo(o,A):(C=o,o=A,A=C),l.mulTo(A,u[w],o)}for(;_>=0&&!(t.data[_]&1<<n);)l.sqrTo(o,A),C=o,o=A,A=C,--n<0&&(n=this.DB-1,--_)}return l.revert(o)}function bnGCD(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var a=e;e=n,n=a}var o=e.getLowestSetBit(),l=n.getLowestSetBit();if(l<0)return e;for(o<l&&(l=o),l>0&&(e.rShiftTo(l,e),n.rShiftTo(l,n));e.signum()>0;)(o=e.getLowestSetBit())>0&&e.rShiftTo(o,e),(o=n.getLowestSetBit())>0&&n.rShiftTo(o,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return l>0&&n.lShiftTo(l,n),n}function bnpModInt(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(e==0)n=this.data[0]%t;else for(var a=this.t-1;a>=0;--a)n=(e*n+this.data[a])%t;return n}function bnModInverse(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return BigInteger$2.ZERO;for(var n=t.clone(),a=this.clone(),o=nbv(1),l=nbv(0),u=nbv(0),d=nbv(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),e?((!o.isEven()||!l.isEven())&&(o.addTo(this,o),l.subTo(t,l)),o.rShiftTo(1,o)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);for(;a.isEven();)a.rShiftTo(1,a),e?((!u.isEven()||!d.isEven())&&(u.addTo(this,u),d.subTo(t,d)),u.rShiftTo(1,u)):d.isEven()||d.subTo(t,d),d.rShiftTo(1,d);n.compareTo(a)>=0?(n.subTo(a,n),e&&o.subTo(u,o),l.subTo(d,l)):(a.subTo(n,a),e&&u.subTo(o,u),d.subTo(l,d))}if(a.compareTo(BigInteger$2.ONE)!=0)return BigInteger$2.ZERO;if(d.compareTo(t)>=0)return d.subtract(t);if(d.signum()<0)d.addTo(t,d);else return d;return d.signum()<0?d.add(t):d}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var e,n=this.abs();if(n.t==1&&n.data[0]<=lowprimes[lowprimes.length-1]){for(e=0;e<lowprimes.length;++e)if(n.data[0]==lowprimes[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<lowprimes.length;){for(var a=lowprimes[e],o=e+1;o<lowprimes.length&&a<lplim;)a*=lowprimes[o++];for(a=n.modInt(a);e<o;)if(a%lowprimes[e++]==0)return!1}return n.millerRabin(t)}function bnpMillerRabin(t){var e=this.subtract(BigInteger$2.ONE),n=e.getLowestSetBit();if(n<=0)return!1;for(var a=e.shiftRight(n),o=bnGetPrng(),l,u=0;u<t;++u){do l=new BigInteger$2(this.bitLength(),o);while(l.compareTo(BigInteger$2.ONE)<=0||l.compareTo(e)>=0);var d=l.modPow(a,this);if(d.compareTo(BigInteger$2.ONE)!=0&&d.compareTo(e)!=0){for(var m=1;m++<n&&d.compareTo(e)!=0;)if(d=d.modPowInt(2,this),d.compareTo(BigInteger$2.ONE)==0)return!1;if(d.compareTo(e)!=0)return!1}}return!0}function bnGetPrng(){return{nextBytes:function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)}}}BigInteger$2.prototype.chunkSize=bnpChunkSize;BigInteger$2.prototype.toRadix=bnpToRadix;BigInteger$2.prototype.fromRadix=bnpFromRadix;BigInteger$2.prototype.fromNumber=bnpFromNumber;BigInteger$2.prototype.bitwiseTo=bnpBitwiseTo;BigInteger$2.prototype.changeBit=bnpChangeBit;BigInteger$2.prototype.addTo=bnpAddTo;BigInteger$2.prototype.dMultiply=bnpDMultiply;BigInteger$2.prototype.dAddOffset=bnpDAddOffset;BigInteger$2.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger$2.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger$2.prototype.modInt=bnpModInt;BigInteger$2.prototype.millerRabin=bnpMillerRabin;BigInteger$2.prototype.clone=bnClone;BigInteger$2.prototype.intValue=bnIntValue;BigInteger$2.prototype.byteValue=bnByteValue;BigInteger$2.prototype.shortValue=bnShortValue;BigInteger$2.prototype.signum=bnSigNum;BigInteger$2.prototype.toByteArray=bnToByteArray;BigInteger$2.prototype.equals=bnEquals;BigInteger$2.prototype.min=bnMin;BigInteger$2.prototype.max=bnMax;BigInteger$2.prototype.and=bnAnd;BigInteger$2.prototype.or=bnOr;BigInteger$2.prototype.xor=bnXor;BigInteger$2.prototype.andNot=bnAndNot;BigInteger$2.prototype.not=bnNot;BigInteger$2.prototype.shiftLeft=bnShiftLeft;BigInteger$2.prototype.shiftRight=bnShiftRight;BigInteger$2.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger$2.prototype.bitCount=bnBitCount;BigInteger$2.prototype.testBit=bnTestBit;BigInteger$2.prototype.setBit=bnSetBit;BigInteger$2.prototype.clearBit=bnClearBit;BigInteger$2.prototype.flipBit=bnFlipBit;BigInteger$2.prototype.add=bnAdd;BigInteger$2.prototype.subtract=bnSubtract;BigInteger$2.prototype.multiply=bnMultiply;BigInteger$2.prototype.divide=bnDivide;BigInteger$2.prototype.remainder=bnRemainder;BigInteger$2.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger$2.prototype.modPow=bnModPow;BigInteger$2.prototype.modInverse=bnModInverse;BigInteger$2.prototype.pow=bnPow;BigInteger$2.prototype.gcd=bnGCD;BigInteger$2.prototype.isProbablePrime=bnIsProbablePrime;var forge$5=forge$m,sha1=forge$5.sha1=forge$5.sha1||{};forge$5.md.sha1=forge$5.md.algorithms.sha1=sha1;sha1.create=function(){_initialized$1||_init$1();var t=null,e=forge$5.util.createBuffer(),n=new Array(80),a={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return a.start=function(){a.messageLength=0,a.fullMessageLength=a.messageLength64=[];for(var o=a.messageLengthSize/4,l=0;l<o;++l)a.fullMessageLength.push(0);return e=forge$5.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},a},a.start(),a.update=function(o,l){l==="utf8"&&(o=forge$5.util.encodeUtf8(o));var u=o.length;a.messageLength+=u,u=[u/4294967296>>>0,u>>>0];for(var d=a.fullMessageLength.length-1;d>=0;--d)a.fullMessageLength[d]+=u[1],u[1]=u[0]+(a.fullMessageLength[d]/4294967296>>>0),a.fullMessageLength[d]=a.fullMessageLength[d]>>>0,u[0]=u[1]/4294967296>>>0;return e.putBytes(o),_update$1(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),a},a.digest=function(){var o=forge$5.util.createBuffer();o.putBytes(e.bytes());var l=a.fullMessageLength[a.fullMessageLength.length-1]+a.messageLengthSize,u=l&a.blockLength-1;o.putBytes(_padding$1.substr(0,a.blockLength-u));for(var d,m,y=a.fullMessageLength[0]*8,b=0;b<a.fullMessageLength.length-1;++b)d=a.fullMessageLength[b+1]*8,m=d/4294967296>>>0,y+=m,o.putInt32(y>>>0),y=d>>>0;o.putInt32(y);var _={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};_update$1(_,n,o);var w=forge$5.util.createBuffer();return w.putInt32(_.h0),w.putInt32(_.h1),w.putInt32(_.h2),w.putInt32(_.h3),w.putInt32(_.h4),w},a};var _padding$1=null,_initialized$1=!1;function _init$1(){_padding$1=String.fromCharCode(128),_padding$1+=forge$5.util.fillString(String.fromCharCode(0),64),_initialized$1=!0}function _update$1(t,e,n){for(var a,o,l,u,d,m,y,b,_=n.length();_>=64;){for(o=t.h0,l=t.h1,u=t.h2,d=t.h3,m=t.h4,b=0;b<16;++b)a=n.getInt32(),e[b]=a,y=d^l&(u^d),a=(o<<5|o>>>27)+y+m+1518500249+a,m=d,d=u,u=(l<<30|l>>>2)>>>0,l=o,o=a;for(;b<20;++b)a=e[b-3]^e[b-8]^e[b-14]^e[b-16],a=a<<1|a>>>31,e[b]=a,y=d^l&(u^d),a=(o<<5|o>>>27)+y+m+1518500249+a,m=d,d=u,u=(l<<30|l>>>2)>>>0,l=o,o=a;for(;b<32;++b)a=e[b-3]^e[b-8]^e[b-14]^e[b-16],a=a<<1|a>>>31,e[b]=a,y=l^u^d,a=(o<<5|o>>>27)+y+m+1859775393+a,m=d,d=u,u=(l<<30|l>>>2)>>>0,l=o,o=a;for(;b<40;++b)a=e[b-6]^e[b-16]^e[b-28]^e[b-32],a=a<<2|a>>>30,e[b]=a,y=l^u^d,a=(o<<5|o>>>27)+y+m+1859775393+a,m=d,d=u,u=(l<<30|l>>>2)>>>0,l=o,o=a;for(;b<60;++b)a=e[b-6]^e[b-16]^e[b-28]^e[b-32],a=a<<2|a>>>30,e[b]=a,y=l&u|d&(l^u),a=(o<<5|o>>>27)+y+m+2400959708+a,m=d,d=u,u=(l<<30|l>>>2)>>>0,l=o,o=a;for(;b<80;++b)a=e[b-6]^e[b-16]^e[b-28]^e[b-32],a=a<<2|a>>>30,e[b]=a,y=l^u^d,a=(o<<5|o>>>27)+y+m+3395469782+a,m=d,d=u,u=(l<<30|l>>>2)>>>0,l=o,o=a;t.h0=t.h0+o|0,t.h1=t.h1+l|0,t.h2=t.h2+u|0,t.h3=t.h3+d|0,t.h4=t.h4+m|0,_-=64}}var forge$4=forge$m,pkcs1=forge$4.pkcs1=forge$4.pkcs1||{};pkcs1.encode_rsa_oaep=function(t,e,n){var a,o,l,u;typeof n=="string"?(a=n,o=arguments[3]||void 0,l=arguments[4]||void 0):n&&(a=n.label||void 0,o=n.seed||void 0,l=n.md||void 0,n.mgf1&&n.mgf1.md&&(u=n.mgf1.md)),l?l.start():l=forge$4.md.sha1.create(),u||(u=l);var d=Math.ceil(t.n.bitLength()/8),m=d-2*l.digestLength-2;if(e.length>m){var y=new Error("RSAES-OAEP input message length is too long.");throw y.length=e.length,y.maxLength=m,y}a||(a=""),l.update(a,"raw");for(var b=l.digest(),_="",w=m-e.length,E=0;E<w;E++)_+="\0";var A=b.getBytes()+_+""+e;if(!o)o=forge$4.random.getBytes(l.digestLength);else if(o.length!==l.digestLength){var y=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw y.seedLength=o.length,y.digestLength=l.digestLength,y}var C=rsa_mgf1(o,d-l.digestLength-1,u),k=forge$4.util.xorBytes(A,C,A.length),B=rsa_mgf1(k,l.digestLength,u),D=forge$4.util.xorBytes(o,B,o.length);return"\0"+D+k};pkcs1.decode_rsa_oaep=function(t,e,n){var a,o,l;typeof n=="string"?(a=n,o=arguments[3]||void 0):n&&(a=n.label||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(l=n.mgf1.md));var u=Math.ceil(t.n.bitLength()/8);if(e.length!==u){var k=new Error("RSAES-OAEP encoded message length is invalid.");throw k.length=e.length,k.expectedLength=u,k}if(o===void 0?o=forge$4.md.sha1.create():o.start(),l||(l=o),u<2*o.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");a||(a=""),o.update(a,"raw");for(var d=o.digest().getBytes(),m=e.charAt(0),y=e.substring(1,o.digestLength+1),b=e.substring(1+o.digestLength),_=rsa_mgf1(b,o.digestLength,l),w=forge$4.util.xorBytes(y,_,y.length),E=rsa_mgf1(w,u-o.digestLength-1,l),A=forge$4.util.xorBytes(b,E,b.length),C=A.substring(0,o.digestLength),k=m!=="\0",B=0;B<o.digestLength;++B)k|=d.charAt(B)!==C.charAt(B);for(var D=1,q=o.digestLength,j=o.digestLength;j<A.length;j++){var J=A.charCodeAt(j),Y=J&1^1,L=D?65534:0;k|=J&L,D=D&Y,q+=D}if(k||A.charCodeAt(q)!==1)throw new Error("Invalid RSAES-OAEP padding.");return A.substring(q+1)};function rsa_mgf1(t,e,n){n||(n=forge$4.md.sha1.create());for(var a="",o=Math.ceil(e/n.digestLength),l=0;l<o;++l){var u=String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,l&255);n.start(),n.update(t+u),a+=n.digest().getBytes()}return a.substring(0,e)}var forge$3=forge$m;(function(){if(forge$3.prime)return;var t=forge$3.prime=forge$3.prime||{},e=forge$3.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],a=new e(null);a.fromInt(30);var o=function(_,w){return _|w};t.generateProbablePrime=function(_,w,E){typeof w=="function"&&(E=w,w={}),w=w||{};var A=w.algorithm||"PRIMEINC";typeof A=="string"&&(A={name:A}),A.options=A.options||{};var C=w.prng||forge$3.random,k={nextBytes:function(B){for(var D=C.getBytesSync(B.length),q=0;q<B.length;++q)B[q]=D.charCodeAt(q)}};if(A.name==="PRIMEINC")return l(_,k,A.options,E);throw new Error("Invalid prime generation algorithm: "+A.name)};function l(_,w,E,A){return"workers"in E?m(_,w,E,A):u(_,w,E,A)}function u(_,w,E,A){var C=y(_,w),k=0,B=b(C.bitLength());"millerRabinTests"in E&&(B=E.millerRabinTests);var D=10;"maxBlockTime"in E&&(D=E.maxBlockTime),d(C,_,w,k,B,D,A)}function d(_,w,E,A,C,k,B){var D=+new Date;do{if(_.bitLength()>w&&(_=y(w,E)),_.isProbablePrime(C))return B(null,_);_.dAddOffset(n[A++%8],0)}while(k<0||+new Date-D<k);forge$3.util.setImmediate(function(){d(_,w,E,A,C,k,B)})}function m(_,w,E,A){if(typeof Worker>"u")return u(_,w,E,A);var C=y(_,w),k=E.workers,B=E.workLoad||100,D=B*30/8,q=E.workerScript||"forge/prime.worker.js";if(k===-1)return forge$3.util.estimateCores(function(J,Y){J&&(Y=2),k=Y-1,j()});j();function j(){k=Math.max(1,k);for(var J=[],Y=0;Y<k;++Y)J[Y]=new Worker(q);for(var Y=0;Y<k;++Y)J[Y].addEventListener("message",Z);var L=!1;function Z(Q){if(!L){var oe=Q.data;if(oe.found){for(var ae=0;ae<J.length;++ae)J[ae].terminate();return L=!0,A(null,new e(oe.prime,16))}C.bitLength()>_&&(C=y(_,w));var U=C.toString(16);Q.target.postMessage({hex:U,workLoad:B}),C.dAddOffset(D,0)}}}}function y(_,w){var E=new e(_,w),A=_-1;return E.testBit(A)||E.bitwiseTo(e.ONE.shiftLeft(A),o,E),E.dAddOffset(31-E.mod(a).byteValue(),0),E}function b(_){return _<=100?27:_<=150?18:_<=200?15:_<=250?12:_<=300?9:_<=350?8:_<=400?7:_<=500?6:_<=600?5:_<=800?4:_<=1250?3:2}})();var forge$2=forge$m;if(typeof BigInteger$1>"u")var BigInteger$1=forge$2.jsbn.BigInteger;var _crypto=forge$2.util.isNodejs?requireCryptoBrowserify():null,asn1$1=forge$2.asn1,util=forge$2.util;forge$2.pki=forge$2.pki||{};forge$2.pki.rsa=forge$2.rsa=forge$2.rsa||{};var pki$1=forge$2.pki,GCD_30_DELTA=[6,4,2,4,2,4,6,2],privateKeyValidator={name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},rsaPrivateKeyValidator={name:"RSAPrivateKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},rsaPublicKeyValidator={name:"RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},publicKeyValidator=forge$2.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},digestInfoValidator={name:"DigestInfo",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:asn1$1.Class.UNIVERSAL,type:asn1$1.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},emsaPkcs1v15encode=function(t){var e;if(t.algorithm in pki$1.oids)e=pki$1.oids[t.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=t.algorithm,n}var a=asn1$1.oidToDer(e).getBytes(),o=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]),l=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[]);l.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,a)),l.value.push(asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,""));var u=asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,t.digest().getBytes());return o.value.push(l),o.value.push(u),asn1$1.toDer(o).getBytes()},_modPow=function(t,e,n){if(n)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(BigInteger$1.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(BigInteger$1.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var a;do a=new BigInteger$1(forge$2.util.bytesToHex(forge$2.random.getBytes(e.n.bitLength()/8)),16);while(a.compareTo(e.n)>=0||!a.gcd(e.n).equals(BigInteger$1.ONE));t=t.multiply(a.modPow(e.e,e.n)).mod(e.n);for(var o=t.mod(e.p).modPow(e.dP,e.p),l=t.mod(e.q).modPow(e.dQ,e.q);o.compareTo(l)<0;)o=o.add(e.p);var u=o.subtract(l).multiply(e.qInv).mod(e.p).multiply(e.q).add(l);return u=u.multiply(a.modInverse(e.n)).mod(e.n),u};pki$1.rsa.encrypt=function(t,e,n){var a=n,o,l=Math.ceil(e.n.bitLength()/8);n!==!1&&n!==!0?(a=n===2,o=_encodePkcs1_v1_5(t,e,n)):(o=forge$2.util.createBuffer(),o.putBytes(t));for(var u=new BigInteger$1(o.toHex(),16),d=_modPow(u,e,a),m=d.toString(16),y=forge$2.util.createBuffer(),b=l-Math.ceil(m.length/2);b>0;)y.putByte(0),--b;return y.putBytes(forge$2.util.hexToBytes(m)),y.getBytes()};pki$1.rsa.decrypt=function(t,e,n,a){var o=Math.ceil(e.n.bitLength()/8);if(t.length!==o){var l=new Error("Encrypted message length is invalid.");throw l.length=t.length,l.expected=o,l}var u=new BigInteger$1(forge$2.util.createBuffer(t).toHex(),16);if(u.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var d=_modPow(u,e,n),m=d.toString(16),y=forge$2.util.createBuffer(),b=o-Math.ceil(m.length/2);b>0;)y.putByte(0),--b;return y.putBytes(forge$2.util.hexToBytes(m)),a!==!1?_decodePkcs1_v1_5(y.getBytes(),e,n):y.getBytes()};pki$1.rsa.createKeyPairGenerationState=function(t,e,n){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,n=n||{};var a=n.prng||forge$2.random,o={nextBytes:function(d){for(var m=a.getBytesSync(d.length),y=0;y<d.length;++y)d[y]=m.charCodeAt(y)}},l=n.algorithm||"PRIMEINC",u;if(l==="PRIMEINC")u={algorithm:l,state:0,bits:t,rng:o,eInt:e||65537,e:new BigInteger$1(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},u.e.fromInt(u.eInt);else throw new Error("Invalid key generation algorithm: "+l);return u};pki$1.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new BigInteger$1(null);n.fromInt(30);for(var a=0,o=function(_,w){return _|w},l=+new Date,u,d=0;t.keys===null&&(e<=0||d<e);){if(t.state===0){var m=t.p===null?t.pBits:t.qBits,y=m-1;t.pqState===0?(t.num=new BigInteger$1(m,t.rng),t.num.testBit(y)||t.num.bitwiseTo(BigInteger$1.ONE.shiftLeft(y),o,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),a=0,++t.pqState):t.pqState===1?t.num.bitLength()>m?t.pqState=0:t.num.isProbablePrime(_getMillerRabinTests(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(GCD_30_DELTA[a++%8],0):t.pqState===2?t.pqState=t.num.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(BigInteger$1.ONE),t.q1=t.q.subtract(BigInteger$1.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(BigInteger$1.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var b=t.e.modInverse(t.phi);t.keys={privateKey:pki$1.rsa.setPrivateKey(t.n,t.e,b,t.p,t.q,b.mod(t.p1),b.mod(t.q1),t.q.modInverse(t.p)),publicKey:pki$1.rsa.setPublicKey(t.n,t.e)}}u=+new Date,d+=u-l,l=u}return t.keys!==null};pki$1.rsa.generateKeyPair=function(t,e,n,a){if(arguments.length===1?typeof t=="object"?(n=t,t=void 0):typeof t=="function"&&(a=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(a=e,e=void 0):typeof e!="number"&&(n=e,e=void 0):(n=t,a=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof n=="function"&&(a=n,n=void 0):(a=n,n=e,e=void 0)),n=n||{},t===void 0&&(t=n.bits||2048),e===void 0&&(e=n.e||65537),!n.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(a){if(_detectNodeCrypto("generateKeyPair"))return _crypto.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(d,m,y){if(d)return a(d);a(null,{privateKey:pki$1.privateKeyFromPem(y),publicKey:pki$1.publicKeyFromPem(m)})});if(_detectSubtleCrypto("generateKey")&&_detectSubtleCrypto("exportKey"))return util.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_intToUint8Array(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(d){return util.globalScope.crypto.subtle.exportKey("pkcs8",d.privateKey)}).then(void 0,function(d){a(d)}).then(function(d){if(d){var m=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(d)));a(null,{privateKey:m,publicKey:pki$1.setRsaPublicKey(m.n,m.e)})}});if(_detectSubtleMsCrypto("generateKey")&&_detectSubtleMsCrypto("exportKey")){var o=util.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:_intToUint8Array(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);o.oncomplete=function(d){var m=d.target.result,y=util.globalScope.msCrypto.subtle.exportKey("pkcs8",m.privateKey);y.oncomplete=function(b){var _=b.target.result,w=pki$1.privateKeyFromAsn1(asn1$1.fromDer(forge$2.util.createBuffer(_)));a(null,{privateKey:w,publicKey:pki$1.setRsaPublicKey(w.n,w.e)})},y.onerror=function(b){a(b)}},o.onerror=function(d){a(d)};return}}else if(_detectNodeCrypto("generateKeyPairSync")){var l=_crypto.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:pki$1.privateKeyFromPem(l.privateKey),publicKey:pki$1.publicKeyFromPem(l.publicKey)}}}var u=pki$1.rsa.createKeyPairGenerationState(t,e,n);if(!a)return pki$1.rsa.stepKeyPairGenerationState(u,0),u.keys;_generateKeyPair(u,n,a)};pki$1.setRsaPublicKey=pki$1.rsa.setPublicKey=function(t,e){var n={n:t,e};return n.encrypt=function(a,o,l){if(typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSAES-PKCS1-V1_5"),o==="RSAES-PKCS1-V1_5")o={encode:function(d,m,y){return _encodePkcs1_v1_5(d,m,2).getBytes()}};else if(o==="RSA-OAEP"||o==="RSAES-OAEP")o={encode:function(d,m){return forge$2.pkcs1.encode_rsa_oaep(m,d,l)}};else if(["RAW","NONE","NULL",null].indexOf(o)!==-1)o={encode:function(d){return d}};else if(typeof o=="string")throw new Error('Unsupported encryption scheme: "'+o+'".');var u=o.encode(a,n,!0);return pki$1.rsa.encrypt(u,n,!0)},n.verify=function(a,o,l,u){typeof l=="string"?l=l.toUpperCase():l===void 0&&(l="RSASSA-PKCS1-V1_5"),u===void 0&&(u={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in u||(u._parseAllDigestBytes=!0),l==="RSASSA-PKCS1-V1_5"?l={verify:function(m,y){y=_decodePkcs1_v1_5(y,n,!0);var b=asn1$1.fromDer(y,{parseAllBytes:u._parseAllDigestBytes}),_={},w=[];if(!asn1$1.validate(b,digestInfoValidator,_,w)){var E=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw E.errors=w,E}var A=asn1$1.derToOid(_.algorithmIdentifier);if(!(A===forge$2.oids.md2||A===forge$2.oids.md5||A===forge$2.oids.sha1||A===forge$2.oids.sha224||A===forge$2.oids.sha256||A===forge$2.oids.sha384||A===forge$2.oids.sha512||A===forge$2.oids["sha512-224"]||A===forge$2.oids["sha512-256"])){var E=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw E.oid=A,E}if((A===forge$2.oids.md2||A===forge$2.oids.md5)&&!("parameters"in _))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return m===_.digest}}:(l==="NONE"||l==="NULL"||l===null)&&(l={verify:function(m,y){return y=_decodePkcs1_v1_5(y,n,!0),m===y}});var d=pki$1.rsa.decrypt(o,n,!0,!1);return l.verify(a,d,n.n.bitLength())},n};pki$1.setRsaPrivateKey=pki$1.rsa.setPrivateKey=function(t,e,n,a,o,l,u,d){var m={n:t,e,d:n,p:a,q:o,dP:l,dQ:u,qInv:d};return m.decrypt=function(y,b,_){typeof b=="string"?b=b.toUpperCase():b===void 0&&(b="RSAES-PKCS1-V1_5");var w=pki$1.rsa.decrypt(y,m,!1,!1);if(b==="RSAES-PKCS1-V1_5")b={decode:_decodePkcs1_v1_5};else if(b==="RSA-OAEP"||b==="RSAES-OAEP")b={decode:function(E,A){return forge$2.pkcs1.decode_rsa_oaep(A,E,_)}};else if(["RAW","NONE","NULL",null].indexOf(b)!==-1)b={decode:function(E){return E}};else throw new Error('Unsupported encryption scheme: "'+b+'".');return b.decode(w,m,!1)},m.sign=function(y,b){var _=!1;typeof b=="string"&&(b=b.toUpperCase()),b===void 0||b==="RSASSA-PKCS1-V1_5"?(b={encode:emsaPkcs1v15encode},_=1):(b==="NONE"||b==="NULL"||b===null)&&(b={encode:function(){return y}},_=1);var w=b.encode(y,m.n.bitLength());return pki$1.rsa.encrypt(w,m,_)},m};pki$1.wrapRsaPrivateKey=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OCTETSTRING,!1,asn1$1.toDer(t).getBytes())])};pki$1.privateKeyFromAsn1=function(t){var e={},n=[];if(asn1$1.validate(t,privateKeyValidator,e,n)&&(t=asn1$1.fromDer(forge$2.util.createBuffer(e.privateKey))),e={},n=[],!asn1$1.validate(t,rsaPrivateKeyValidator,e,n)){var a=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw a.errors=n,a}var o,l,u,d,m,y,b,_;return o=forge$2.util.createBuffer(e.privateKeyModulus).toHex(),l=forge$2.util.createBuffer(e.privateKeyPublicExponent).toHex(),u=forge$2.util.createBuffer(e.privateKeyPrivateExponent).toHex(),d=forge$2.util.createBuffer(e.privateKeyPrime1).toHex(),m=forge$2.util.createBuffer(e.privateKeyPrime2).toHex(),y=forge$2.util.createBuffer(e.privateKeyExponent1).toHex(),b=forge$2.util.createBuffer(e.privateKeyExponent2).toHex(),_=forge$2.util.createBuffer(e.privateKeyCoefficient).toHex(),pki$1.setRsaPrivateKey(new BigInteger$1(o,16),new BigInteger$1(l,16),new BigInteger$1(u,16),new BigInteger$1(d,16),new BigInteger$1(m,16),new BigInteger$1(y,16),new BigInteger$1(b,16),new BigInteger$1(_,16))};pki$1.privateKeyToAsn1=pki$1.privateKeyToRSAPrivateKey=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,asn1$1.integerToDer(0).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.e)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.d)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.p)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.q)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.dP)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.dQ)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.qInv))])};pki$1.publicKeyFromAsn1=function(t){var e={},n=[];if(asn1$1.validate(t,publicKeyValidator,e,n)){var a=asn1$1.derToOid(e.publicKeyOid);if(a!==pki$1.oids.rsaEncryption){var o=new Error("Cannot read public key. Unknown OID.");throw o.oid=a,o}t=e.rsaPublicKey}if(n=[],!asn1$1.validate(t,rsaPublicKeyValidator,e,n)){var o=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw o.errors=n,o}var l=forge$2.util.createBuffer(e.publicKeyModulus).toHex(),u=forge$2.util.createBuffer(e.publicKeyExponent).toHex();return pki$1.setRsaPublicKey(new BigInteger$1(l,16),new BigInteger$1(u,16))};pki$1.publicKeyToAsn1=pki$1.publicKeyToSubjectPublicKeyInfo=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.OID,!1,asn1$1.oidToDer(pki$1.oids.rsaEncryption).getBytes()),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.NULL,!1,"")]),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.BITSTRING,!1,[pki$1.publicKeyToRSAPublicKey(t)])])};pki$1.publicKeyToRSAPublicKey=function(t){return asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.SEQUENCE,!0,[asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.n)),asn1$1.create(asn1$1.Class.UNIVERSAL,asn1$1.Type.INTEGER,!1,_bnToBytes(t.e))])};function _encodePkcs1_v1_5(t,e,n){var a=forge$2.util.createBuffer(),o=Math.ceil(e.n.bitLength()/8);if(t.length>o-11){var l=new Error("Message is too long for PKCS#1 v1.5 padding.");throw l.length=t.length,l.max=o-11,l}a.putByte(0),a.putByte(n);var u=o-3-t.length,d;if(n===0||n===1){d=n===0?0:255;for(var m=0;m<u;++m)a.putByte(d)}else for(;u>0;){for(var y=0,b=forge$2.random.getBytes(u),m=0;m<u;++m)d=b.charCodeAt(m),d===0?++y:a.putByte(d);u=y}return a.putByte(0),a.putBytes(t),a}function _decodePkcs1_v1_5(t,e,n,a){var o=Math.ceil(e.n.bitLength()/8),l=forge$2.util.createBuffer(t),u=l.getByte(),d=l.getByte();if(u!==0||n&&d!==0&&d!==1||!n&&d!=2||n&&d===0&&typeof a>"u")throw new Error("Encryption block is invalid.");var m=0;if(d===0){m=o-3-a;for(var y=0;y<m;++y)if(l.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(d===1)for(m=0;l.length()>1;){if(l.getByte()!==255){--l.read;break}++m}else if(d===2)for(m=0;l.length()>1;){if(l.getByte()===0){--l.read;break}++m}var b=l.getByte();if(b!==0||m!==o-3-l.length())throw new Error("Encryption block is invalid.");return l.getBytes()}function _generateKeyPair(t,e,n){typeof e=="function"&&(n=e,e={}),e=e||{};var a={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(a.prng=e.prng),o();function o(){l(t.pBits,function(d,m){if(d)return n(d);if(t.p=m,t.q!==null)return u(d,t.q);l(t.qBits,u)})}function l(d,m){forge$2.prime.generateProbablePrime(d,a,m)}function u(d,m){if(d)return n(d);if(t.q=m,t.p.compareTo(t.q)<0){var y=t.p;t.p=t.q,t.q=y}if(t.p.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.p=null,o();return}if(t.q.subtract(BigInteger$1.ONE).gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.q=null,l(t.qBits,u);return}if(t.p1=t.p.subtract(BigInteger$1.ONE),t.q1=t.q.subtract(BigInteger$1.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(BigInteger$1.ONE)!==0){t.p=t.q=null,o();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,l(t.qBits,u);return}var b=t.e.modInverse(t.phi);t.keys={privateKey:pki$1.rsa.setPrivateKey(t.n,t.e,b,t.p,t.q,b.mod(t.p1),b.mod(t.q1),t.q.modInverse(t.p)),publicKey:pki$1.rsa.setPublicKey(t.n,t.e)},n(null,t.keys)}}function _bnToBytes(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var n=forge$2.util.hexToBytes(e);return n.length>1&&(n.charCodeAt(0)===0&&!(n.charCodeAt(1)&128)||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}function _getMillerRabinTests(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}function _detectNodeCrypto(t){return forge$2.util.isNodejs&&typeof _crypto[t]=="function"}function _detectSubtleCrypto(t){return typeof util.globalScope<"u"&&typeof util.globalScope.crypto=="object"&&typeof util.globalScope.crypto.subtle=="object"&&typeof util.globalScope.crypto.subtle[t]=="function"}function _detectSubtleMsCrypto(t){return typeof util.globalScope<"u"&&typeof util.globalScope.msCrypto=="object"&&typeof util.globalScope.msCrypto.subtle=="object"&&typeof util.globalScope.msCrypto.subtle[t]=="function"}function _intToUint8Array(t){for(var e=forge$2.util.hexToBytes(t.toString(16)),n=new Uint8Array(e.length),a=0;a<e.length;++a)n[a]=e.charCodeAt(a);return n}var forge$1=forge$m;if(typeof BigInteger>"u")var BigInteger=forge$1.jsbn.BigInteger;var asn1=forge$1.asn1,pki=forge$1.pki=forge$1.pki||{};pki.pbe=forge$1.pbe=forge$1.pbe||{};var oids=pki.oids,encryptedPrivateKeyValidator={name:"EncryptedPrivateKeyInfo",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},PBES2AlgorithmsValidator={name:"PBES2Algorithms",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},pkcs12PbeParamsValidator={name:"pkcs-12PbeParams",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:asn1.Class.UNIVERSAL,type:asn1.Type.INTEGER,constructed:!1,capture:"iterations"}]};pki.encryptPrivateKeyInfo=function(t,e,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var a=forge$1.random.getBytesSync(n.saltSize),o=n.count,l=asn1.integerToDer(o),u,d,m;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var y,b,_;switch(n.algorithm){case"aes128":u=16,y=16,b=oids["aes128-CBC"],_=forge$1.aes.createEncryptionCipher;break;case"aes192":u=24,y=16,b=oids["aes192-CBC"],_=forge$1.aes.createEncryptionCipher;break;case"aes256":u=32,y=16,b=oids["aes256-CBC"],_=forge$1.aes.createEncryptionCipher;break;case"des":u=8,y=8,b=oids.desCBC,_=forge$1.des.createEncryptionCipher;break;default:var w=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw w.algorithm=n.algorithm,w}var E="hmacWith"+n.prfAlgorithm.toUpperCase(),A=prfAlgorithmToMessageDigest(E),C=forge$1.pkcs5.pbkdf2(e,a,o,u,A),k=forge$1.random.getBytesSync(y),B=_(C);B.start(k),B.update(asn1.toDer(t)),B.finish(),m=B.output.getBytes();var D=createPbkdf2Params(a,l,u,E);d=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBES2).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids.pkcs5PBKDF2).getBytes()),D]),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(b).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,k)])])])}else if(n.algorithm==="3des"){u=24;var q=new forge$1.util.ByteBuffer(a),C=pki.pbe.generatePkcs12Key(e,q,1,o,u),k=pki.pbe.generatePkcs12Key(e,q,2,o,u),B=forge$1.des.createEncryptionCipher(C);B.start(k),B.update(asn1.toDer(t)),B.finish(),m=B.output.getBytes(),d=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,a),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,l.getBytes())])])}else{var w=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw w.algorithm=n.algorithm,w}var j=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[d,asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,m)]);return j};pki.decryptPrivateKeyInfo=function(t,e){var n=null,a={},o=[];if(!asn1.validate(t,encryptedPrivateKeyValidator,a,o)){var l=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=o,l}var u=asn1.derToOid(a.encryptionOid),d=pki.pbe.getCipher(u,a.encryptionParams,e),m=forge$1.util.createBuffer(a.encryptedData);return d.update(m),d.finish()&&(n=asn1.fromDer(d.output)),n};pki.encryptedPrivateKeyToPem=function(t,e){var n={type:"ENCRYPTED PRIVATE KEY",body:asn1.toDer(t).getBytes()};return forge$1.pem.encode(n,{maxline:e})};pki.encryptedPrivateKeyFromPem=function(t){var e=forge$1.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return asn1.fromDer(e.body)};pki.encryptRsaPrivateKey=function(t,e,n){if(n=n||{},!n.legacy){var a=pki.wrapRsaPrivateKey(pki.privateKeyToAsn1(t));return a=pki.encryptPrivateKeyInfo(a,e,n),pki.encryptedPrivateKeyToPem(a)}var o,l,u,d;switch(n.algorithm){case"aes128":o="AES-128-CBC",u=16,l=forge$1.random.getBytesSync(16),d=forge$1.aes.createEncryptionCipher;break;case"aes192":o="AES-192-CBC",u=24,l=forge$1.random.getBytesSync(16),d=forge$1.aes.createEncryptionCipher;break;case"aes256":o="AES-256-CBC",u=32,l=forge$1.random.getBytesSync(16),d=forge$1.aes.createEncryptionCipher;break;case"3des":o="DES-EDE3-CBC",u=24,l=forge$1.random.getBytesSync(8),d=forge$1.des.createEncryptionCipher;break;case"des":o="DES-CBC",u=8,l=forge$1.random.getBytesSync(8),d=forge$1.des.createEncryptionCipher;break;default:var m=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw m.algorithm=n.algorithm,m}var y=forge$1.pbe.opensslDeriveBytes(e,l.substr(0,8),u),b=d(y);b.start(l),b.update(asn1.toDer(pki.privateKeyToAsn1(t))),b.finish();var _={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:o,parameters:forge$1.util.bytesToHex(l).toUpperCase()},body:b.output.getBytes()};return forge$1.pem.encode(_)};pki.decryptRsaPrivateKey=function(t,e){var n=null,a=forge$1.pem.decode(t)[0];if(a.type!=="ENCRYPTED PRIVATE KEY"&&a.type!=="PRIVATE KEY"&&a.type!=="RSA PRIVATE KEY"){var o=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw o.headerType=o,o}if(a.procType&&a.procType.type==="ENCRYPTED"){var l,u;switch(a.dekInfo.algorithm){case"DES-CBC":l=8,u=forge$1.des.createDecryptionCipher;break;case"DES-EDE3-CBC":l=24,u=forge$1.des.createDecryptionCipher;break;case"AES-128-CBC":l=16,u=forge$1.aes.createDecryptionCipher;break;case"AES-192-CBC":l=24,u=forge$1.aes.createDecryptionCipher;break;case"AES-256-CBC":l=32,u=forge$1.aes.createDecryptionCipher;break;case"RC2-40-CBC":l=5,u=function(_){return forge$1.rc2.createDecryptionCipher(_,40)};break;case"RC2-64-CBC":l=8,u=function(_){return forge$1.rc2.createDecryptionCipher(_,64)};break;case"RC2-128-CBC":l=16,u=function(_){return forge$1.rc2.createDecryptionCipher(_,128)};break;default:var o=new Error('Could not decrypt private key; unsupported encryption algorithm "'+a.dekInfo.algorithm+'".');throw o.algorithm=a.dekInfo.algorithm,o}var d=forge$1.util.hexToBytes(a.dekInfo.parameters),m=forge$1.pbe.opensslDeriveBytes(e,d.substr(0,8),l),y=u(m);if(y.start(d),y.update(forge$1.util.createBuffer(a.body)),y.finish())n=y.output.getBytes();else return n}else n=a.body;return a.type==="ENCRYPTED PRIVATE KEY"?n=pki.decryptPrivateKeyInfo(asn1.fromDer(n),e):n=asn1.fromDer(n),n!==null&&(n=pki.privateKeyFromAsn1(n)),n};pki.pbe.generatePkcs12Key=function(t,e,n,a,o,l){var u,d;if(typeof l>"u"||l===null){if(!("sha1"in forge$1.md))throw new Error('"sha1" hash algorithm unavailable.');l=forge$1.md.sha1.create()}var m=l.digestLength,y=l.blockLength,b=new forge$1.util.ByteBuffer,_=new forge$1.util.ByteBuffer;if(t!=null){for(d=0;d<t.length;d++)_.putInt16(t.charCodeAt(d));_.putInt16(0)}var w=_.length(),E=e.length(),A=new forge$1.util.ByteBuffer;A.fillWithByte(n,y);var C=y*Math.ceil(E/y),k=new forge$1.util.ByteBuffer;for(d=0;d<C;d++)k.putByte(e.at(d%E));var B=y*Math.ceil(w/y),D=new forge$1.util.ByteBuffer;for(d=0;d<B;d++)D.putByte(_.at(d%w));var q=k;q.putBuffer(D);for(var j=Math.ceil(o/m),J=1;J<=j;J++){var Y=new forge$1.util.ByteBuffer;Y.putBytes(A.bytes()),Y.putBytes(q.bytes());for(var L=0;L<a;L++)l.start(),l.update(Y.getBytes()),Y=l.digest();var Z=new forge$1.util.ByteBuffer;for(d=0;d<y;d++)Z.putByte(Y.at(d%m));var Q=Math.ceil(E/y)+Math.ceil(w/y),oe=new forge$1.util.ByteBuffer;for(u=0;u<Q;u++){var ae=new forge$1.util.ByteBuffer(q.getBytes(y)),U=511;for(d=Z.length()-1;d>=0;d--)U=U>>8,U+=Z.at(d)+ae.at(d),ae.setAt(d,U&255);oe.putBuffer(ae)}q=oe,b.putBuffer(Y)}return b.truncate(b.length()-o),b};pki.pbe.getCipher=function(t,e,n){switch(t){case pki.oids.pkcs5PBES2:return pki.pbe.getCipherForPBES2(t,e,n);case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:return pki.pbe.getCipherForPKCS12PBE(t,e,n);default:var a=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw a.oid=t,a.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],a}};pki.pbe.getCipherForPBES2=function(t,e,n){var a={},o=[];if(!asn1.validate(e,PBES2AlgorithmsValidator,a,o)){var l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=o,l}if(t=asn1.derToOid(a.kdfOid),t!==pki.oids.pkcs5PBKDF2){var l=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw l.oid=t,l.supportedOids=["pkcs5PBKDF2"],l}if(t=asn1.derToOid(a.encOid),t!==pki.oids["aes128-CBC"]&&t!==pki.oids["aes192-CBC"]&&t!==pki.oids["aes256-CBC"]&&t!==pki.oids["des-EDE3-CBC"]&&t!==pki.oids.desCBC){var l=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw l.oid=t,l.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],l}var u=a.kdfSalt,d=forge$1.util.createBuffer(a.kdfIterationCount);d=d.getInt(d.length()<<3);var m,y;switch(pki.oids[t]){case"aes128-CBC":m=16,y=forge$1.aes.createDecryptionCipher;break;case"aes192-CBC":m=24,y=forge$1.aes.createDecryptionCipher;break;case"aes256-CBC":m=32,y=forge$1.aes.createDecryptionCipher;break;case"des-EDE3-CBC":m=24,y=forge$1.des.createDecryptionCipher;break;case"desCBC":m=8,y=forge$1.des.createDecryptionCipher;break}var b=prfOidToMessageDigest(a.prfOid),_=forge$1.pkcs5.pbkdf2(n,u,d,m,b),w=a.encIv,E=y(_);return E.start(w),E};pki.pbe.getCipherForPKCS12PBE=function(t,e,n){var a={},o=[];if(!asn1.validate(e,pkcs12PbeParamsValidator,a,o)){var l=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw l.errors=o,l}var u=forge$1.util.createBuffer(a.salt),d=forge$1.util.createBuffer(a.iterations);d=d.getInt(d.length()<<3);var m,y,b;switch(t){case pki.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:m=24,y=8,b=forge$1.des.startDecrypting;break;case pki.oids["pbewithSHAAnd40BitRC2-CBC"]:m=5,y=8,b=function(C,k){var B=forge$1.rc2.createDecryptionCipher(C,40);return B.start(k,null),B};break;default:var l=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw l.oid=t,l}var _=prfOidToMessageDigest(a.prfOid),w=pki.pbe.generatePkcs12Key(n,u,1,d,m,_);_.start();var E=pki.pbe.generatePkcs12Key(n,u,2,d,y,_);return b(w,E)};pki.pbe.opensslDeriveBytes=function(t,e,n,a){if(typeof a>"u"||a===null){if(!("md5"in forge$1.md))throw new Error('"md5" hash algorithm unavailable.');a=forge$1.md.md5.create()}e===null&&(e="");for(var o=[hash(a,t+e)],l=16,u=1;l<n;++u,l+=16)o.push(hash(a,o[u-1]+t+e));return o.join("").substr(0,n)};function hash(t,e){return t.start().update(e).digest().getBytes()}function prfOidToMessageDigest(t){var e;if(!t)e="hmacWithSHA1";else if(e=pki.oids[asn1.derToOid(t)],!e){var n=new Error("Unsupported PRF OID.");throw n.oid=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return prfAlgorithmToMessageDigest(e)}function prfAlgorithmToMessageDigest(t){var e=forge$1.md;switch(t){case"hmacWithSHA224":e=forge$1.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}function createPbkdf2Params(t,e,n,a){var o=asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OCTETSTRING,!1,t),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,e.getBytes())]);return a!=="hmacWithSHA1"&&o.value.push(asn1.create(asn1.Class.UNIVERSAL,asn1.Type.INTEGER,!1,forge$1.util.hexToBytes(n.toString(16))),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.SEQUENCE,!0,[asn1.create(asn1.Class.UNIVERSAL,asn1.Type.OID,!1,asn1.oidToDer(pki.oids[a]).getBytes()),asn1.create(asn1.Class.UNIVERSAL,asn1.Type.NULL,!1,"")])),o}function concat$2(t,e){e==null&&(e=t.reduce((o,l)=>o+l.length,0));const n=allocUnsafe$2(e);let a=0;for(const o of t)n.set(o,a),a+=o.length;return asUint8Array$2(n)}function bigIntegerToUintBase64url(t,e){let n=Uint8Array.from(t.abs().toByteArray());if(n=n[0]===0?n.subarray(1):n,e!=null){if(n.length>e)throw new Error("byte array longer than desired length");n=concat$2([new Uint8Array(e-n.length),n])}return toString$8(n,"base64url")}function base64urlToBigInteger(t){const e=base64urlToBuffer(t);return new forge$m.jsbn.BigInteger(toString$8(e,"base16"),16)}function base64urlToBuffer(t,e){let n=fromString$5(t,"base64urlpad");if(e!=null){if(n.length>e)throw new Error("byte array longer than desired length");n=concat$2([new Uint8Array(e-n.length),n])}return n}function equals$4(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0}const bits={"P-256":256,"P-384":384,"P-521":521},curveTypes=Object.keys(bits);curveTypes.join(" / ");function base$4(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var l=t.charAt(o),u=l.charCodeAt(0);if(n[u]!==255)throw new TypeError(l+" is ambiguous");n[u]=o}var d=t.length,m=t.charAt(0),y=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function _(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var C=0,k=0,B=0,D=A.length;B!==D&&A[B]===0;)B++,C++;for(var q=(D-B)*b+1>>>0,j=new Uint8Array(q);B!==D;){for(var J=A[B],Y=0,L=q-1;(J!==0||Y<k)&&L!==-1;L--,Y++)J+=256*j[L]>>>0,j[L]=J%d>>>0,J=J/d>>>0;if(J!==0)throw new Error("Non-zero carry");k=Y,B++}for(var Z=q-k;Z!==q&&j[Z]===0;)Z++;for(var Q=m.repeat(C);Z<q;++Z)Q+=t.charAt(j[Z]);return Q}function w(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var C=0;if(A[C]!==" "){for(var k=0,B=0;A[C]===m;)k++,C++;for(var D=(A.length-C)*y+1>>>0,q=new Uint8Array(D);A[C];){var j=n[A.charCodeAt(C)];if(j===255)return;for(var J=0,Y=D-1;(j!==0||J<B)&&Y!==-1;Y--,J++)j+=d*q[Y]>>>0,q[Y]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");B=J,C++}if(A[C]!==" "){for(var L=D-B;L!==D&&q[L]===0;)L++;for(var Z=new Uint8Array(k+(D-L)),Q=k;L!==D;)Z[Q++]=q[L++];return Z}}}function E(A){var C=w(A);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:w,decode:E}}var src$6=base$4,_brrp__multiformats_scope_baseX$3=src$6;const coerce$3=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};let Encoder$4=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$4=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$3(this,e)}},ComposedDecoder$3=class{constructor(e){this.decoders=e}or(e){return or$3(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$3=(t,e)=>new ComposedDecoder$3({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$4=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$4(e,n,a),this.decoder=new Decoder$4(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$5=({name:t,prefix:e,encode:n,decode:a})=>new Codec$4(t,e,n,a),baseX$3=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$3(n,e);return from$5({prefix:t,name:e,encode:a,decode:l=>coerce$3(o(l))})},decode$k=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let l=t.length;for(;t[l-1]==="=";)--l;const u=new Uint8Array(l*n/8|0);let d=0,m=0,y=0;for(let b=0;b<l;++b){const _=o[t[b]];if(_===void 0)throw new SyntaxError(`Non-${a} character`);m=m<<n|_,d+=n,d>=8&&(d-=8,u[y++]=255&m>>d)}if(d>=n||255&m<<8-d)throw new SyntaxError("Unexpected end of data");return u},encode$l=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let l="",u=0,d=0;for(let m=0;m<t.length;++m)for(d=d<<8|t[m],u+=8;u>n;)u-=n,l+=e[o&d>>u];if(u&&(l+=e[o&d<<n-u]),a)for(;l.length*n&7;)l+="=";return l},rfc4648$3=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$5({prefix:e,name:t,encode(o){return encode$l(o,a,n)},decode(o){return decode$k(o,a,n,t)}}),base64$6=rfc4648$3({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648$3({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648$3({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648$3({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});function create$3(t){const e=t?.algorithm??"AES-GCM";let n=t?.keyLength??16;const a=t?.nonceLength??12,o=t?.digest??"SHA-256",l=t?.saltLength??16,u=t?.iterations??32767,d=webcrypto.get();n*=8;async function m(_,w){const E=d.getRandomValues(new Uint8Array(l)),A=d.getRandomValues(new Uint8Array(a)),C={name:e,iv:A};typeof w=="string"&&(w=fromString$5(w));const k={name:"PBKDF2",salt:E,iterations:u,hash:{name:o}},B=await d.subtle.importKey("raw",w,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),D=await d.subtle.deriveKey(k,B,{name:e,length:n},!0,["encrypt"]),q=await d.subtle.encrypt(C,D,_);return concat$2([E,C.iv,new Uint8Array(q)])}async function y(_,w){const E=_.subarray(0,l),A=_.subarray(l,l+a),C=_.subarray(l+a),k={name:e,iv:A};typeof w=="string"&&(w=fromString$5(w));const B={name:"PBKDF2",salt:E,iterations:u,hash:{name:o}},D=await d.subtle.importKey("raw",w,{name:"PBKDF2"},!1,["deriveKey","deriveBits"]),q=await d.subtle.deriveKey(B,D,{name:e,length:n},!0,["decrypt"]),j=await d.subtle.decrypt(k,q,C);return new Uint8Array(j)}return{encrypt:m,decrypt:y}}async function importer(t,e){const n=base64$6.decode(t);return await create$3().decrypt(n,e)}var encode_1$5=encode$k,MSB$4=128,REST$4=127,MSBALL$3=~REST$4,INT$3=Math.pow(2,31);function encode$k(t,e,n){e=e||[],n=n||0;for(var a=n;t>=INT$3;)e[n++]=t&255|MSB$4,t/=128;for(;t&MSBALL$3;)e[n++]=t&255|MSB$4,t>>>=7;return e[n]=t|0,encode$k.bytes=n-a+1,e}var decode$j=read$6,MSB$1$3=128,REST$1$3=127;function read$6(t,a){var n=0,a=a||0,o=0,l=a,u,d=t.length;do{if(l>=d)throw read$6.bytes=0,new RangeError("Could not decode varint");u=t[l++],n+=o<28?(u&REST$1$3)<<o:(u&REST$1$3)*Math.pow(2,o),o+=7}while(u>=MSB$1$3);return read$6.bytes=l-a,n}var N1$3=Math.pow(2,7),N2$3=Math.pow(2,14),N3$3=Math.pow(2,21),N4$3=Math.pow(2,28),N5$3=Math.pow(2,35),N6$3=Math.pow(2,42),N7$3=Math.pow(2,49),N8$3=Math.pow(2,56),N9$3=Math.pow(2,63),length$3=function(t){return t<N1$3?1:t<N2$3?2:t<N3$3?3:t<N4$3?4:t<N5$3?5:t<N6$3?6:t<N7$3?7:t<N8$3?8:t<N9$3?9:10},varint$3={encode:encode_1$5,decode:decode$j,encodingLength:length$3},_brrp_varint$2=varint$3;const encodeTo$2=(t,e,n=0)=>(_brrp_varint$2.encode(t,e,n),e),encodingLength$2=t=>_brrp_varint$2.encodingLength(t),create$2=(t,e)=>{const n=e.byteLength,a=encodingLength$2(t),o=a+encodingLength$2(n),l=new Uint8Array(o+n);return encodeTo$2(t,l,0),encodeTo$2(n,l,a),l.set(e,o),new Digest$2(t,n,e,l)};let Digest$2=class{constructor(e,n,a,o){this.code=e,this.size=n,this.digest=a,this.bytes=o}};const from$4=({name:t,code:e,encode:n})=>new Hasher$1(t,e,n);let Hasher$1=class{constructor(e,n,a){this.name=e,this.code=n,this.encode=a}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?create$2(this.code,n):n.then(a=>create$2(this.code,a))}else throw Error("Unknown type, must be binary type")}};const sha$1=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$4=from$4({name:"sha2-256",code:18,encode:sha$1("SHA-256")});from$4({name:"sha2-512",code:19,encode:sha$1("SHA-512")});var forge=forge$m,sha512$1=forge.sha512=forge.sha512||{};forge.md.sha512=forge.md.algorithms.sha512=sha512$1;var sha384=forge.sha384=forge.sha512.sha384=forge.sha512.sha384||{};sha384.create=function(){return sha512$1.create("SHA-384")};forge.md.sha384=forge.md.algorithms.sha384=sha384;forge.sha512.sha256=forge.sha512.sha256||{create:function(){return sha512$1.create("SHA-512/256")}};forge.md["sha512/256"]=forge.md.algorithms["sha512/256"]=forge.sha512.sha256;forge.sha512.sha224=forge.sha512.sha224||{create:function(){return sha512$1.create("SHA-512/224")}};forge.md["sha512/224"]=forge.md.algorithms["sha512/224"]=forge.sha512.sha224;sha512$1.create=function(t){if(_initialized||_init(),typeof t>"u"&&(t="SHA-512"),!(t in _states))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=_states[t],n=null,a=forge.util.createBuffer(),o=new Array(80),l=0;l<80;++l)o[l]=new Array(2);var u=64;switch(t){case"SHA-384":u=48;break;case"SHA-512/256":u=32;break;case"SHA-512/224":u=28;break}var d={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:u,messageLength:0,fullMessageLength:null,messageLengthSize:16};return d.start=function(){d.messageLength=0,d.fullMessageLength=d.messageLength128=[];for(var m=d.messageLengthSize/4,y=0;y<m;++y)d.fullMessageLength.push(0);a=forge.util.createBuffer(),n=new Array(e.length);for(var y=0;y<e.length;++y)n[y]=e[y].slice(0);return d},d.start(),d.update=function(m,y){y==="utf8"&&(m=forge.util.encodeUtf8(m));var b=m.length;d.messageLength+=b,b=[b/4294967296>>>0,b>>>0];for(var _=d.fullMessageLength.length-1;_>=0;--_)d.fullMessageLength[_]+=b[1],b[1]=b[0]+(d.fullMessageLength[_]/4294967296>>>0),d.fullMessageLength[_]=d.fullMessageLength[_]>>>0,b[0]=b[1]/4294967296>>>0;return a.putBytes(m),_update(n,o,a),(a.read>2048||a.length()===0)&&a.compact(),d},d.digest=function(){var m=forge.util.createBuffer();m.putBytes(a.bytes());var y=d.fullMessageLength[d.fullMessageLength.length-1]+d.messageLengthSize,b=y&d.blockLength-1;m.putBytes(_padding.substr(0,d.blockLength-b));for(var _,w,E=d.fullMessageLength[0]*8,A=0;A<d.fullMessageLength.length-1;++A)_=d.fullMessageLength[A+1]*8,w=_/4294967296>>>0,E+=w,m.putInt32(E>>>0),E=_>>>0;m.putInt32(E);for(var C=new Array(n.length),A=0;A<n.length;++A)C[A]=n[A].slice(0);_update(C,o,m);var k=forge.util.createBuffer(),B;t==="SHA-512"?B=C.length:t==="SHA-384"?B=C.length-2:B=C.length-4;for(var A=0;A<B;++A)k.putInt32(C[A][0]),(A!==B-1||t!=="SHA-512/224")&&k.putInt32(C[A][1]);return k},d};var _padding=null,_initialized=!1,_k=null,_states=null;function _init(){_padding=String.fromCharCode(128),_padding+=forge.util.fillString(String.fromCharCode(0),128),_k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],_states={},_states["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],_states["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],_states["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],_states["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],_initialized=!0}function _update(t,e,n){for(var a,o,l,u,d,m,y,b,_,w,E,A,C,k,B,D,q,j,J,Y,L,Z,Q,oe,ae,U,I,x,T,M,O,z,X,H,P,S=n.length();S>=128;){for(T=0;T<16;++T)e[T][0]=n.getInt32()>>>0,e[T][1]=n.getInt32()>>>0;for(;T<80;++T)z=e[T-2],M=z[0],O=z[1],a=((M>>>19|O<<13)^(O>>>29|M<<3)^M>>>6)>>>0,o=((M<<13|O>>>19)^(O<<3|M>>>29)^(M<<26|O>>>6))>>>0,H=e[T-15],M=H[0],O=H[1],l=((M>>>1|O<<31)^(M>>>8|O<<24)^M>>>7)>>>0,u=((M<<31|O>>>1)^(M<<24|O>>>8)^(M<<25|O>>>7))>>>0,X=e[T-7],P=e[T-16],O=o+X[1]+u+P[1],e[T][0]=a+X[0]+l+P[0]+(O/4294967296>>>0)>>>0,e[T][1]=O>>>0;for(C=t[0][0],k=t[0][1],B=t[1][0],D=t[1][1],q=t[2][0],j=t[2][1],J=t[3][0],Y=t[3][1],L=t[4][0],Z=t[4][1],Q=t[5][0],oe=t[5][1],ae=t[6][0],U=t[6][1],I=t[7][0],x=t[7][1],T=0;T<80;++T)y=((L>>>14|Z<<18)^(L>>>18|Z<<14)^(Z>>>9|L<<23))>>>0,b=((L<<18|Z>>>14)^(L<<14|Z>>>18)^(Z<<23|L>>>9))>>>0,_=(ae^L&(Q^ae))>>>0,w=(U^Z&(oe^U))>>>0,d=((C>>>28|k<<4)^(k>>>2|C<<30)^(k>>>7|C<<25))>>>0,m=((C<<4|k>>>28)^(k<<30|C>>>2)^(k<<25|C>>>7))>>>0,E=(C&B|q&(C^B))>>>0,A=(k&D|j&(k^D))>>>0,O=x+b+w+_k[T][1]+e[T][1],a=I+y+_+_k[T][0]+e[T][0]+(O/4294967296>>>0)>>>0,o=O>>>0,O=m+A,l=d+E+(O/4294967296>>>0)>>>0,u=O>>>0,I=ae,x=U,ae=Q,U=oe,Q=L,oe=Z,O=Y+o,L=J+a+(O/4294967296>>>0)>>>0,Z=O>>>0,J=q,Y=j,q=B,j=D,B=C,D=k,O=o+u,C=a+l+(O/4294967296>>>0)>>>0,k=O>>>0;O=t[0][1]+k,t[0][0]=t[0][0]+C+(O/4294967296>>>0)>>>0,t[0][1]=O>>>0,O=t[1][1]+D,t[1][0]=t[1][0]+B+(O/4294967296>>>0)>>>0,t[1][1]=O>>>0,O=t[2][1]+j,t[2][0]=t[2][0]+q+(O/4294967296>>>0)>>>0,t[2][1]=O>>>0,O=t[3][1]+Y,t[3][0]=t[3][0]+J+(O/4294967296>>>0)>>>0,t[3][1]=O>>>0,O=t[4][1]+Z,t[4][0]=t[4][0]+L+(O/4294967296>>>0)>>>0,t[4][1]=O>>>0,O=t[5][1]+oe,t[5][0]=t[5][0]+Q+(O/4294967296>>>0)>>>0,t[5][1]=O>>>0,O=t[6][1]+U,t[6][0]=t[6][0]+ae+(O/4294967296>>>0)>>>0,t[6][1]=O>>>0,O=t[7][1]+x,t[7][0]=t[7][0]+I+(O/4294967296>>>0)>>>0,t[7][1]=O>>>0,S-=128}}/*! noble-secp256k1 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_3n=BigInt(3),_8n=BigInt(8),CURVE$1=Object.freeze({a:_0n$1,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:_1n$1,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")}),divNearest=(t,e)=>(t+e/_2n$1)/e,endo={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(t){const{n:e}=CURVE$1,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),a=-_1n$1*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),l=n,u=BigInt("0x100000000000000000000000000000000"),d=divNearest(l*t,e),m=divNearest(-a*t,e);let y=mod$1(t-d*n-m*o,e),b=mod$1(-d*a-m*l,e);const _=y>u,w=b>u;if(_&&(y=e-y),w&&(b=e-b),y>u||b>u)throw new Error("splitScalarEndo: Endomorphism failed, k="+t);return{k1neg:_,k1:y,k2neg:w,k2:b}}},fieldLen=32,groupLen=32,hashLen=32,compressedLen=fieldLen+1,uncompressedLen=2*fieldLen+1;function weierstrass(t){const{a:e,b:n}=CURVE$1,a=mod$1(t*t),o=mod$1(a*t);return mod$1(o+e*t+n)}const USE_ENDOMORPHISM=CURVE$1.a===_0n$1;class ShaError extends Error{constructor(e){super(e)}}function assertJacPoint(t){if(!(t instanceof JacobianPoint))throw new TypeError("JacobianPoint expected")}class JacobianPoint{constructor(e,n,a){this.x=e,this.y=n,this.z=a}static fromAffine(e){if(!(e instanceof Point$2))throw new TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(Point$2.ZERO)?JacobianPoint.ZERO:new JacobianPoint(e.x,e.y,_1n$1)}static toAffineBatch(e){const n=invertBatch$1(e.map(a=>a.z));return e.map((a,o)=>a.toAffine(n[o]))}static normalizeZ(e){return JacobianPoint.toAffineBatch(e).map(JacobianPoint.fromAffine)}equals(e){assertJacPoint(e);const{x:n,y:a,z:o}=this,{x:l,y:u,z:d}=e,m=mod$1(o*o),y=mod$1(d*d),b=mod$1(n*y),_=mod$1(l*m),w=mod$1(mod$1(a*d)*y),E=mod$1(mod$1(u*o)*m);return b===_&&w===E}negate(){return new JacobianPoint(this.x,mod$1(-this.y),this.z)}double(){const{x:e,y:n,z:a}=this,o=mod$1(e*e),l=mod$1(n*n),u=mod$1(l*l),d=e+l,m=mod$1(_2n$1*(mod$1(d*d)-o-u)),y=mod$1(_3n*o),b=mod$1(y*y),_=mod$1(b-_2n$1*m),w=mod$1(y*(m-_)-_8n*u),E=mod$1(_2n$1*n*a);return new JacobianPoint(_,w,E)}add(e){assertJacPoint(e);const{x:n,y:a,z:o}=this,{x:l,y:u,z:d}=e;if(l===_0n$1||u===_0n$1)return this;if(n===_0n$1||a===_0n$1)return e;const m=mod$1(o*o),y=mod$1(d*d),b=mod$1(n*y),_=mod$1(l*m),w=mod$1(mod$1(a*d)*y),E=mod$1(mod$1(u*o)*m),A=mod$1(_-b),C=mod$1(E-w);if(A===_0n$1)return C===_0n$1?this.double():JacobianPoint.ZERO;const k=mod$1(A*A),B=mod$1(A*k),D=mod$1(b*k),q=mod$1(C*C-B-_2n$1*D),j=mod$1(C*(D-q)-w*B),J=mod$1(o*d*A);return new JacobianPoint(q,j,J)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){const n=JacobianPoint.ZERO;if(typeof e=="bigint"&&e===_0n$1)return n;let a=normalizeScalar$1(e);if(a===_1n$1)return this;if(!USE_ENDOMORPHISM){let _=n,w=this;for(;a>_0n$1;)a&_1n$1&&(_=_.add(w)),w=w.double(),a>>=_1n$1;return _}let{k1neg:o,k1:l,k2neg:u,k2:d}=endo.splitScalar(a),m=n,y=n,b=this;for(;l>_0n$1||d>_0n$1;)l&_1n$1&&(m=m.add(b)),d&_1n$1&&(y=y.add(b)),b=b.double(),l>>=_1n$1,d>>=_1n$1;return o&&(m=m.negate()),u&&(y=y.negate()),y=new JacobianPoint(mod$1(y.x*endo.beta),y.y,y.z),m.add(y)}precomputeWindow(e){const n=USE_ENDOMORPHISM?128/e+1:256/e+1,a=[];let o=this,l=o;for(let u=0;u<n;u++){l=o,a.push(l);for(let d=1;d<2**(e-1);d++)l=l.add(o),a.push(l);o=l.double()}return a}wNAF(e,n){!n&&this.equals(JacobianPoint.BASE)&&(n=Point$2.BASE);const a=n&&n._WINDOW_SIZE||1;if(256%a)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let o=n&&pointPrecomputes$1.get(n);o||(o=this.precomputeWindow(a),n&&a!==1&&(o=JacobianPoint.normalizeZ(o),pointPrecomputes$1.set(n,o)));let l=JacobianPoint.ZERO,u=JacobianPoint.BASE;const d=1+(USE_ENDOMORPHISM?128/a:256/a),m=2**(a-1),y=BigInt(2**a-1),b=2**a,_=BigInt(a);for(let w=0;w<d;w++){const E=w*m;let A=Number(e&y);e>>=_,A>m&&(A-=b,e+=_1n$1);const C=E,k=E+Math.abs(A)-1,B=w%2!==0,D=A<0;A===0?u=u.add(constTimeNegate(B,o[C])):l=l.add(constTimeNegate(D,o[k]))}return{p:l,f:u}}multiply(e,n){let a=normalizeScalar$1(e),o,l;if(USE_ENDOMORPHISM){const{k1neg:u,k1:d,k2neg:m,k2:y}=endo.splitScalar(a);let{p:b,f:_}=this.wNAF(d,n),{p:w,f:E}=this.wNAF(y,n);b=constTimeNegate(u,b),w=constTimeNegate(m,w),w=new JacobianPoint(mod$1(w.x*endo.beta),w.y,w.z),o=b.add(w),l=_.add(E)}else{const{p:u,f:d}=this.wNAF(a,n);o=u,l=d}return JacobianPoint.normalizeZ([o,l])[0]}toAffine(e){const{x:n,y:a,z:o}=this,l=this.equals(JacobianPoint.ZERO);e==null&&(e=l?_8n:invert$1(o));const u=e,d=mod$1(u*u),m=mod$1(d*u),y=mod$1(n*d),b=mod$1(a*m),_=mod$1(o*u);if(l)return Point$2.ZERO;if(_!==_1n$1)throw new Error("invZ was invalid");return new Point$2(y,b)}}JacobianPoint.BASE=new JacobianPoint(CURVE$1.Gx,CURVE$1.Gy,_1n$1);JacobianPoint.ZERO=new JacobianPoint(_0n$1,_1n$1,_0n$1);function constTimeNegate(t,e){const n=e.negate();return t?n:e}const pointPrecomputes$1=new WeakMap;let Point$2=class{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,pointPrecomputes$1.delete(this)}hasEvenY(){return this.y%_2n$1===_0n$1}static fromCompressedHex(e){const n=e.length===32,a=bytesToNumber(n?e:e.subarray(1));if(!isValidFieldElement(a))throw new Error("Point is not on curve");const o=weierstrass(a);let l=sqrtMod(o);const u=(l&_1n$1)===_1n$1;n?u&&(l=mod$1(-l)):(e[0]&1)===1!==u&&(l=mod$1(-l));const d=new Point$2(a,l);return d.assertValidity(),d}static fromUncompressedHex(e){const n=bytesToNumber(e.subarray(1,fieldLen+1)),a=bytesToNumber(e.subarray(fieldLen+1,fieldLen*2+1)),o=new Point$2(n,a);return o.assertValidity(),o}static fromHex(e){const n=ensureBytes$1(e),a=n.length,o=n[0];if(a===fieldLen)return this.fromCompressedHex(n);if(a===compressedLen&&(o===2||o===3))return this.fromCompressedHex(n);if(a===uncompressedLen&&o===4)return this.fromUncompressedHex(n);throw new Error(`Point.fromHex: received invalid point. Expected 32-${compressedLen} compressed bytes or ${uncompressedLen} uncompressed bytes, not ${a}`)}static fromPrivateKey(e){return Point$2.BASE.multiply(normalizePrivateKey(e))}static fromSignature(e,n,a){const{r:o,s:l}=normalizeSignature(n);if(![0,1,2,3].includes(a))throw new Error("Cannot recover: invalid recovery bit");const u=truncateHash(ensureBytes$1(e)),{n:d}=CURVE$1,m=a===2||a===3?o+d:o,y=invert$1(m,d),b=mod$1(-u*y,d),_=mod$1(l*y,d),w=a&1?"03":"02",E=Point$2.fromHex(w+numTo32bStr(m)),A=Point$2.BASE.multiplyAndAddUnsafe(E,b,_);if(!A)throw new Error("Cannot recover signature: point at infinify");return A.assertValidity(),A}toRawBytes(e=!1){return hexToBytes$2(this.toHex(e))}toHex(e=!1){const n=numTo32bStr(this.x);return e?`${this.hasEvenY()?"02":"03"}${n}`:`04${n}${numTo32bStr(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){const e="Point is not on elliptic curve",{x:n,y:a}=this;if(!isValidFieldElement(n)||!isValidFieldElement(a))throw new Error(e);const o=mod$1(a*a),l=weierstrass(n);if(mod$1(o-l)!==_0n$1)throw new Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Point$2(this.x,mod$1(-this.y))}double(){return JacobianPoint.fromAffine(this).double().toAffine()}add(e){return JacobianPoint.fromAffine(this).add(JacobianPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return JacobianPoint.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,n,a){const o=JacobianPoint.fromAffine(this),l=n===_0n$1||n===_1n$1||this!==Point$2.BASE?o.multiplyUnsafe(n):o.multiply(n),u=JacobianPoint.fromAffine(e).multiplyUnsafe(a),d=l.add(u);return d.equals(JacobianPoint.ZERO)?void 0:d.toAffine()}};Point$2.BASE=new Point$2(CURVE$1.Gx,CURVE$1.Gy);Point$2.ZERO=new Point$2(_0n$1,_0n$1);function sliceDER(t){return Number.parseInt(t[0],16)>=8?"00"+t:t}function parseDERInt(t){if(t.length<2||t[0]!==2)throw new Error(`Invalid signature integer tag: ${bytesToHex$2(t)}`);const e=t[1],n=t.subarray(2,e+2);if(!e||n.length!==e)throw new Error("Invalid signature integer: wrong length");if(n[0]===0&&n[1]<=127)throw new Error("Invalid signature integer: trailing length");return{data:bytesToNumber(n),left:t.subarray(e+2)}}function parseDERSignature(t){if(t.length<2||t[0]!=48)throw new Error(`Invalid signature tag: ${bytesToHex$2(t)}`);if(t[1]!==t.length-2)throw new Error("Invalid signature: incorrect length");const{data:e,left:n}=parseDERInt(t.subarray(2)),{data:a,left:o}=parseDERInt(n);if(o.length)throw new Error(`Invalid signature: left bytes after parsing: ${bytesToHex$2(o)}`);return{r:e,s:a}}let Signature$2=class{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromCompact(e){const n=e instanceof Uint8Array,a="Signature.fromCompact";if(typeof e!="string"&&!n)throw new TypeError(`${a}: Expected string or Uint8Array`);const o=n?bytesToHex$2(e):e;if(o.length!==128)throw new Error(`${a}: Expected 64-byte hex`);return new Signature$2(hexToNumber(o.slice(0,64)),hexToNumber(o.slice(64,128)))}static fromDER(e){const n=e instanceof Uint8Array;if(typeof e!="string"&&!n)throw new TypeError("Signature.fromDER: Expected string or Uint8Array");const{r:a,s:o}=parseDERSignature(n?e:hexToBytes$2(e));return new Signature$2(a,o)}static fromHex(e){return this.fromDER(e)}assertValidity(){const{r:e,s:n}=this;if(!isWithinCurveOrder(e))throw new Error("Invalid Signature: r must be 0 < r < n");if(!isWithinCurveOrder(n))throw new Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){const e=CURVE$1.n>>_1n$1;return this.s>e}normalizeS(){return this.hasHighS()?new Signature$2(this.r,mod$1(-this.s,CURVE$1.n)):this}toDERRawBytes(){return hexToBytes$2(this.toDERHex())}toDERHex(){const e=sliceDER(numberToHexUnpadded(this.s)),n=sliceDER(numberToHexUnpadded(this.r)),a=e.length/2,o=n.length/2,l=numberToHexUnpadded(a),u=numberToHexUnpadded(o);return`30${numberToHexUnpadded(o+a+4)}02${u}${n}02${l}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return hexToBytes$2(this.toCompactHex())}toCompactHex(){return numTo32bStr(this.r)+numTo32bStr(this.s)}};function concatBytes$1(...t){if(!t.every(a=>a instanceof Uint8Array))throw new Error("Uint8Array list expected");if(t.length===1)return t[0];const e=t.reduce((a,o)=>a+o.length,0),n=new Uint8Array(e);for(let a=0,o=0;a<t.length;a++){const l=t[a];n.set(l,o),o+=l.length}return n}const hexes$1=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$2(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");let e="";for(let n=0;n<t.length;n++)e+=hexes$1[t[n]];return e}const POW_2_256$1=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function numTo32bStr(t){if(typeof t!="bigint")throw new Error("Expected bigint");if(!(_0n$1<=t&&t<POW_2_256$1))throw new Error("Expected number 0 <= n < 2^256");return t.toString(16).padStart(64,"0")}function numTo32b(t){const e=hexToBytes$2(numTo32bStr(t));if(e.length!==32)throw new Error("Error: expected 32 bytes");return e}function numberToHexUnpadded(t){const e=t.toString(16);return e.length&1?`0${e}`:e}function hexToNumber(t){if(typeof t!="string")throw new TypeError("hexToNumber: expected string, got "+typeof t);return BigInt(`0x${t}`)}function hexToBytes$2(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex"+t.length);const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const a=n*2,o=t.slice(a,a+2),l=Number.parseInt(o,16);if(Number.isNaN(l)||l<0)throw new Error("Invalid byte sequence");e[n]=l}return e}function bytesToNumber(t){return hexToNumber(bytesToHex$2(t))}function ensureBytes$1(t){return t instanceof Uint8Array?Uint8Array.from(t):hexToBytes$2(t)}function normalizeScalar$1(t){if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)return BigInt(t);if(typeof t=="bigint"&&isWithinCurveOrder(t))return t;throw new TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function mod$1(t,e=CURVE$1.P){const n=t%e;return n>=_0n$1?n:e+n}function pow2$1(t,e){const{P:n}=CURVE$1;let a=t;for(;e-- >_0n$1;)a*=a,a%=n;return a}function sqrtMod(t){const{P:e}=CURVE$1,n=BigInt(6),a=BigInt(11),o=BigInt(22),l=BigInt(23),u=BigInt(44),d=BigInt(88),m=t*t*t%e,y=m*m*t%e,b=pow2$1(y,_3n)*y%e,_=pow2$1(b,_3n)*y%e,w=pow2$1(_,_2n$1)*m%e,E=pow2$1(w,a)*w%e,A=pow2$1(E,o)*E%e,C=pow2$1(A,u)*A%e,k=pow2$1(C,d)*C%e,B=pow2$1(k,u)*A%e,D=pow2$1(B,_3n)*y%e,q=pow2$1(D,l)*E%e,j=pow2$1(q,n)*m%e,J=pow2$1(j,_2n$1);if(J*J%e!==t)throw new Error("Cannot find square root");return J}function invert$1(t,e=CURVE$1.P){if(t===_0n$1||e<=_0n$1)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=mod$1(t,e),a=e,o=_0n$1,l=_1n$1;for(;n!==_0n$1;){const d=a/n,m=a%n,y=o-l*d;a=n,n=m,o=l,l=y}if(a!==_1n$1)throw new Error("invert: does not exist");return mod$1(o,e)}function invertBatch$1(t,e=CURVE$1.P){const n=new Array(t.length),a=t.reduce((l,u,d)=>u===_0n$1?l:(n[d]=l,mod$1(l*u,e)),_1n$1),o=invert$1(a,e);return t.reduceRight((l,u,d)=>u===_0n$1?l:(n[d]=mod$1(l*n[d],e),mod$1(l*u,e)),o),n}function bits2int_2(t){const e=t.length*8-groupLen*8,n=bytesToNumber(t);return e>0?n>>BigInt(e):n}function truncateHash(t,e=!1){const n=bits2int_2(t);if(e)return n;const{n:a}=CURVE$1;return n>=a?n-a:n}let _sha256Sync,_hmacSha256Sync;class HmacDrbg{constructor(e,n){if(this.hashLen=e,this.qByteLen=n,typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof n!="number"||n<2)throw new Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return utils$3.hmacSha256(this.k,...e)}hmacSync(...e){return _hmacSha256Sync(this.k,...e)}checkSync(){if(typeof _hmacSha256Sync!="function")throw new ShaError("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw new Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),e.length!==0&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),e.length!==0&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);const a=this.v.slice();n.push(a),e+=this.v.length}return concatBytes$1(...n)}generateSync(){this.checkSync(),this.incr();let e=0;const n=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);const a=this.v.slice();n.push(a),e+=this.v.length}return concatBytes$1(...n)}}function isWithinCurveOrder(t){return _0n$1<t&&t<CURVE$1.n}function isValidFieldElement(t){return _0n$1<t&&t<CURVE$1.P}function kmdToSig(t,e,n,a=!0){const{n:o}=CURVE$1,l=truncateHash(t,!0);if(!isWithinCurveOrder(l))return;const u=invert$1(l,o),d=Point$2.BASE.multiply(l),m=mod$1(d.x,o);if(m===_0n$1)return;const y=mod$1(u*mod$1(e+n*m,o),o);if(y===_0n$1)return;let b=new Signature$2(m,y),_=(d.x===b.r?0:2)|Number(d.y&_1n$1);return a&&b.hasHighS()&&(b=b.normalizeS(),_^=1),{sig:b,recovery:_}}function normalizePrivateKey(t){let e;if(typeof t=="bigint")e=t;else if(typeof t=="number"&&Number.isSafeInteger(t)&&t>0)e=BigInt(t);else if(typeof t=="string"){if(t.length!==2*groupLen)throw new Error("Expected 32 bytes of private key");e=hexToNumber(t)}else if(t instanceof Uint8Array){if(t.length!==groupLen)throw new Error("Expected 32 bytes of private key");e=bytesToNumber(t)}else throw new TypeError("Expected valid private key");if(!isWithinCurveOrder(e))throw new Error("Expected private key: 0 < key < n");return e}function normalizePublicKey(t){return t instanceof Point$2?(t.assertValidity(),t):Point$2.fromHex(t)}function normalizeSignature(t){if(t instanceof Signature$2)return t.assertValidity(),t;try{return Signature$2.fromDER(t)}catch{return Signature$2.fromCompact(t)}}function getPublicKey$1(t,e=!1){return Point$2.fromPrivateKey(t).toRawBytes(e)}function bits2int(t){const e=t.length>fieldLen?t.slice(0,fieldLen):t;return bytesToNumber(e)}function bits2octets(t){const e=bits2int(t),n=mod$1(e,CURVE$1.n);return int2octets(n<_0n$1?e:n)}function int2octets(t){return numTo32b(t)}function initSigArgs(t,e,n){if(t==null)throw new Error(`sign: expected valid message hash, not "${t}"`);const a=ensureBytes$1(t),o=normalizePrivateKey(e),l=[int2octets(o),bits2octets(a)];if(n!=null){n===!0&&(n=utils$3.randomBytes(fieldLen));const m=ensureBytes$1(n);if(m.length!==fieldLen)throw new Error(`sign: Expected ${fieldLen} bytes of extra data`);l.push(m)}const u=concatBytes$1(...l),d=bits2int(a);return{seed:u,m:d,d:o}}function finalizeSig(t,e){const{sig:n,recovery:a}=t,{der:o,recovered:l}=Object.assign({canonical:!0,der:!0},e),u=o?n.toDERRawBytes():n.toCompactRawBytes();return l?[u,a]:u}async function sign$1(t,e,n={}){const{seed:a,m:o,d:l}=initSigArgs(t,e,n.extraEntropy),u=new HmacDrbg(hashLen,groupLen);await u.reseed(a);let d;for(;!(d=kmdToSig(await u.generate(),o,l,n.canonical));)await u.reseed();return finalizeSig(d,n)}const vopts={strict:!0};function verify$3(t,e,n,a=vopts){let o;try{o=normalizeSignature(t),e=ensureBytes$1(e)}catch{return!1}const{r:l,s:u}=o;if(a.strict&&o.hasHighS())return!1;const d=truncateHash(e);let m;try{m=normalizePublicKey(n)}catch{return!1}const{n:y}=CURVE$1,b=invert$1(u,y),_=mod$1(d*b,y),w=mod$1(l*b,y),E=Point$2.BASE.multiplyAndAddUnsafe(m,_,w);return E?mod$1(E.x,y)===l:!1}Point$2.BASE._setWindowSize(8);const crypto$3={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},TAGGED_HASH_PREFIXES={},utils$3={bytesToHex:bytesToHex$2,hexToBytes:hexToBytes$2,concatBytes:concatBytes$1,mod:mod$1,invert:invert$1,isValidPrivateKey(t){try{return normalizePrivateKey(t),!0}catch{return!1}},_bigintTo32Bytes:numTo32b,_normalizePrivateKey:normalizePrivateKey,hashToPrivateKey:t=>{t=ensureBytes$1(t);const e=groupLen+8;if(t.length<e||t.length>1024)throw new Error("Expected valid bytes of private key as per FIPS 186");const n=mod$1(bytesToNumber(t),CURVE$1.n-_1n$1)+_1n$1;return numTo32b(n)},randomBytes:(t=32)=>{if(crypto$3.web)return crypto$3.web.getRandomValues(new Uint8Array(t));if(crypto$3.node){const{randomBytes:e}=crypto$3.node;return Uint8Array.from(e(t))}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$3.hashToPrivateKey(utils$3.randomBytes(groupLen+8)),precompute(t=8,e=Point$2.BASE){const n=e===Point$2.BASE?e:new Point$2(e.x,e.y);return n._setWindowSize(t),n.multiply(_3n),n},sha256:async(...t)=>{if(crypto$3.web){const e=await crypto$3.web.subtle.digest("SHA-256",concatBytes$1(...t));return new Uint8Array(e)}else if(crypto$3.node){const{createHash:e}=crypto$3.node,n=e("sha256");return t.forEach(a=>n.update(a)),Uint8Array.from(n.digest())}else throw new Error("The environment doesn't have sha256 function")},hmacSha256:async(t,...e)=>{if(crypto$3.web){const n=await crypto$3.web.subtle.importKey("raw",t,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),a=concatBytes$1(...e),o=await crypto$3.web.subtle.sign("HMAC",n,a);return new Uint8Array(o)}else if(crypto$3.node){const{createHmac:n}=crypto$3.node,a=n("sha256",t);return e.forEach(o=>a.update(o)),Uint8Array.from(a.digest())}else throw new Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(t,...e)=>{let n=TAGGED_HASH_PREFIXES[t];if(n===void 0){const a=await utils$3.sha256(Uint8Array.from(t,o=>o.charCodeAt(0)));n=concatBytes$1(a,a),TAGGED_HASH_PREFIXES[t]=n}return utils$3.sha256(n,...e)},taggedHashSync:(t,...e)=>{if(typeof _sha256Sync!="function")throw new ShaError("sha256Sync is undefined, you need to set it");let n=TAGGED_HASH_PREFIXES[t];if(n===void 0){const a=_sha256Sync(Uint8Array.from(t,o=>o.charCodeAt(0)));n=concatBytes$1(a,a),TAGGED_HASH_PREFIXES[t]=n}return _sha256Sync(n,...e)},_JacobianPoint:JacobianPoint};Object.defineProperties(utils$3,{sha256Sync:{configurable:!1,get(){return _sha256Sync},set(t){_sha256Sync||(_sha256Sync=t)}},hmacSha256Sync:{configurable:!1,get(){return _hmacSha256Sync},set(t){_hmacSha256Sync||(_hmacSha256Sync=t)}}});function randomBytes$1(t){if(isNaN(t)||t<=0)throw errCode(new Error("random bytes length must be a Number bigger than 0"),"ERR_INVALID_LENGTH");return utils$3.randomBytes(t)}function pkcs1ToJwk(t){const e=forge$m.asn1.fromDer(toString$8(t,"ascii")),n=forge$m.pki.privateKeyFromAsn1(e);return{kty:"RSA",n:bigIntegerToUintBase64url(n.n),e:bigIntegerToUintBase64url(n.e),d:bigIntegerToUintBase64url(n.d),p:bigIntegerToUintBase64url(n.p),q:bigIntegerToUintBase64url(n.q),dp:bigIntegerToUintBase64url(n.dP),dq:bigIntegerToUintBase64url(n.dQ),qi:bigIntegerToUintBase64url(n.qInv),alg:"RS256"}}function jwkToPkcs1(t){if(t.n==null||t.e==null||t.d==null||t.p==null||t.q==null||t.dp==null||t.dq==null||t.qi==null)throw errCode(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const e=forge$m.pki.privateKeyToAsn1({n:base64urlToBigInteger(t.n),e:base64urlToBigInteger(t.e),d:base64urlToBigInteger(t.d),p:base64urlToBigInteger(t.p),q:base64urlToBigInteger(t.q),dP:base64urlToBigInteger(t.dp),dQ:base64urlToBigInteger(t.dq),qInv:base64urlToBigInteger(t.qi)});return fromString$5(forge$m.asn1.toDer(e).getBytes(),"ascii")}function pkixToJwk(t){const e=forge$m.asn1.fromDer(toString$8(t,"ascii")),n=forge$m.pki.publicKeyFromAsn1(e);return{kty:"RSA",n:bigIntegerToUintBase64url(n.n),e:bigIntegerToUintBase64url(n.e)}}function jwkToPkix(t){if(t.n==null||t.e==null)throw errCode(new Error("JWK was missing components"),"ERR_INVALID_PARAMETERS");const e=forge$m.pki.publicKeyToAsn1({n:base64urlToBigInteger(t.n),e:base64urlToBigInteger(t.e)});return fromString$5(forge$m.asn1.toDer(e).getBytes(),"ascii")}function convert$1(t,e){return e.map(n=>base64urlToBigInteger(t[n]))}function jwk2priv(t){return forge$m.pki.setRsaPrivateKey(...convert$1(t,["n","e","d","p","q","dp","dq","qi"]))}function jwk2pub(t){return forge$m.pki.setRsaPublicKey(...convert$1(t,["n","e"]))}async function generateKey$2(t){const e=await webcrypto.get().subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign","verify"]),n=await exportKey(e);return{privateKey:n[0],publicKey:n[1]}}async function unmarshalPrivateKey$1(t){const n=[await webcrypto.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["sign"]),await derivePublicFromPrivate(t)],a=await exportKey({privateKey:n[0],publicKey:n[1]});return{privateKey:a[0],publicKey:a[1]}}async function hashAndSign$2(t,e){const n=await webcrypto.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["sign"]),a=await webcrypto.get().subtle.sign({name:"RSASSA-PKCS1-v1_5"},n,Uint8Array.from(e));return new Uint8Array(a,0,a.byteLength)}async function hashAndVerify$2(t,e,n){const a=await webcrypto.get().subtle.importKey("jwk",t,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]);return await webcrypto.get().subtle.verify({name:"RSASSA-PKCS1-v1_5"},a,e,n)}async function exportKey(t){if(t.privateKey==null||t.publicKey==null)throw errCode(new Error("Private and public key are required"),"ERR_INVALID_PARAMETERS");return await Promise.all([webcrypto.get().subtle.exportKey("jwk",t.privateKey),webcrypto.get().subtle.exportKey("jwk",t.publicKey)])}async function derivePublicFromPrivate(t){return await webcrypto.get().subtle.importKey("jwk",{kty:t.kty,n:t.n,e:t.e},{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!0,["verify"])}function convertKey(t,e,n,a){const o=e?jwk2pub(t):jwk2priv(t),l=toString$8(Uint8Array.from(n),"ascii"),u=a(l,o);return fromString$5(u,"ascii")}function encrypt$2(t,e){return convertKey(t,!0,e,(n,a)=>a.encrypt(n))}function decrypt$3(t,e){return convertKey(t,!1,e,(n,a)=>a.decrypt(n))}async function exporter(t,e){const a=await create$3().encrypt(t,e);return base64$6.encode(a)}class RsaPublicKey{constructor(e){this._key=e}async verify(e,n){return await hashAndVerify$2(this._key,n,e)}marshal(){return jwkToPkix(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}encrypt(e){return encrypt$2(this._key,e)}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}}class RsaPrivateKey{constructor(e,n){this._key=e,this._publicKey=n}genSecret(){return randomBytes$1(16)}async sign(e){return await hashAndSign$2(this._key,e)}get public(){if(this._publicKey==null)throw errCode(new Error("public key not provided"),"ERR_PUBKEY_NOT_PROVIDED");return new RsaPublicKey(this._publicKey)}decrypt(e){return decrypt$3(this._key,e)}marshal(){return jwkToPkcs1(this._key)}get bytes(){return PrivateKey.encode({Type:KeyType$1.RSA,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}async id(){const e=await this.public.hash();return toString$8(e,"base58btc")}async export(e,n="pkcs-8"){if(n==="pkcs-8"){const a=new forge$m.util.ByteBuffer(this.marshal()),o=forge$m.asn1.fromDer(a),l=forge$m.pki.privateKeyFromAsn1(o),u={algorithm:"aes256",count:1e4,saltSize:128/8,prfAlgorithm:"sha512"};return forge$m.pki.encryptRsaPrivateKey(l,e,u)}else{if(n==="libp2p-key")return await exporter(this.bytes,e);throw errCode(new Error(`export format '${n}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}}async function unmarshalRsaPrivateKey(t){const e=pkcs1ToJwk(t),n=await unmarshalPrivateKey$1(e);return new RsaPrivateKey(n.privateKey,n.publicKey)}function unmarshalRsaPublicKey(t){const e=pkixToJwk(t);return new RsaPublicKey(e)}async function fromJwk(t){const e=await unmarshalPrivateKey$1(t);return new RsaPrivateKey(e.privateKey,e.publicKey)}async function generateKeyPair$3(t){const e=await generateKey$2(t);return new RsaPrivateKey(e.privateKey,e.publicKey)}const RSA=Object.freeze(Object.defineProperty({__proto__:null,RsaPrivateKey,RsaPublicKey,fromJwk,generateKeyPair:generateKeyPair$3,unmarshalRsaPrivateKey,unmarshalRsaPublicKey},Symbol.toStringTag,{value:"Module"})),base58btc$3=baseX$3({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX$3({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const code$5=0,name$3="identity",encode$j=coerce$3,digest$1=t=>create$2(code$5,encode$j(t)),identity$5={code:code$5,name:name$3,encode:encode$j,digest:digest$1};/*! noble-ed25519 - MIT License (c) 2019 Paul Miller (paulmillr.com) */const _0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2),CU_O=BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),CURVE=Object.freeze({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),l:CU_O,n:CU_O,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")}),POW_2_256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000"),SQRT_M1=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const SQRT_AD_MINUS_ONE=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),INVSQRT_A_MINUS_D=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),ONE_MINUS_D_SQ=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),D_MINUS_ONE_SQ=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class ExtendedPoint{constructor(e,n,a,o){this.x=e,this.y=n,this.z=a,this.t=o}static fromAffine(e){if(!(e instanceof Point$1))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Point$1.ZERO)?ExtendedPoint.ZERO:new ExtendedPoint(e.x,e.y,_1n,mod(e.x*e.y))}static toAffineBatch(e){const n=invertBatch(e.map(a=>a.z));return e.map((a,o)=>a.toAffine(n[o]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){assertExtPoint(e);const{x:n,y:a,z:o}=this,{x:l,y:u,z:d}=e,m=mod(n*d),y=mod(l*o),b=mod(a*d),_=mod(u*o);return m===y&&b===_}negate(){return new ExtendedPoint(mod(-this.x),this.y,this.z,mod(-this.t))}double(){const{x:e,y:n,z:a}=this,{a:o}=CURVE,l=mod(e*e),u=mod(n*n),d=mod(_2n*mod(a*a)),m=mod(o*l),y=e+n,b=mod(mod(y*y)-l-u),_=m+u,w=_-d,E=m-u,A=mod(b*w),C=mod(_*E),k=mod(b*E),B=mod(w*_);return new ExtendedPoint(A,C,B,k)}add(e){assertExtPoint(e);const{x:n,y:a,z:o,t:l}=this,{x:u,y:d,z:m,t:y}=e,b=mod((a-n)*(d+u)),_=mod((a+n)*(d-u)),w=mod(_-b);if(w===_0n)return this.double();const E=mod(o*_2n*y),A=mod(l*_2n*m),C=A+E,k=_+b,B=A-E,D=mod(C*w),q=mod(k*B),j=mod(C*B),J=mod(w*k);return new ExtendedPoint(D,q,J,j)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const n=1+256/e,a=[];let o=this,l=o;for(let u=0;u<n;u++){l=o,a.push(l);for(let d=1;d<2**(e-1);d++)l=l.add(o),a.push(l);o=l.double()}return a}wNAF(e,n){!n&&this.equals(ExtendedPoint.BASE)&&(n=Point$1.BASE);const a=n&&n._WINDOW_SIZE||1;if(256%a)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let o=n&&pointPrecomputes.get(n);o||(o=this.precomputeWindow(a),n&&a!==1&&(o=ExtendedPoint.normalizeZ(o),pointPrecomputes.set(n,o)));let l=ExtendedPoint.ZERO,u=ExtendedPoint.ZERO;const d=1+256/a,m=2**(a-1),y=BigInt(2**a-1),b=2**a,_=BigInt(a);for(let w=0;w<d;w++){const E=w*m;let A=Number(e&y);if(e>>=_,A>m&&(A-=b,e+=_1n),A===0){let C=o[E];w%2&&(C=C.negate()),u=u.add(C)}else{let C=o[E+Math.abs(A)-1];A<0&&(C=C.negate()),l=l.add(C)}}return ExtendedPoint.normalizeZ([l,u])[0]}multiply(e,n){return this.wNAF(normalizeScalar(e,CURVE.l),n)}multiplyUnsafe(e){let n=normalizeScalar(e,CURVE.l,!1);const a=ExtendedPoint.BASE,o=ExtendedPoint.ZERO;if(n===_0n)return o;if(this.equals(o)||n===_1n)return this;if(this.equals(a))return this.wNAF(n);let l=o,u=this;for(;n>_0n;)n&_1n&&(l=l.add(u)),u=u.double(),n>>=_1n;return l}isSmallOrder(){return this.multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO)}isTorsionFree(){return this.multiplyUnsafe(CURVE.l).equals(ExtendedPoint.ZERO)}toAffine(e=invert(this.z)){const{x:n,y:a,z:o}=this,l=mod(n*e),u=mod(a*e);if(mod(o*e)!==_1n)throw new Error("invZ was invalid");return new Point$1(l,u)}fromRistrettoBytes(){legacyRist()}toRistrettoBytes(){legacyRist()}fromRistrettoHash(){legacyRist()}}ExtendedPoint.BASE=new ExtendedPoint(CURVE.Gx,CURVE.Gy,_1n,mod(CURVE.Gx*CURVE.Gy));ExtendedPoint.ZERO=new ExtendedPoint(_0n,_1n,_1n,_0n);function assertExtPoint(t){if(!(t instanceof ExtendedPoint))throw new TypeError("ExtendedPoint expected")}function assertRstPoint(t){if(!(t instanceof RistrettoPoint))throw new TypeError("RistrettoPoint expected")}function legacyRist(){throw new Error("Legacy method: switch to RistrettoPoint")}class RistrettoPoint{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:n}=CURVE,a=mod(SQRT_M1*e*e),o=mod((a+_1n)*ONE_MINUS_D_SQ);let l=BigInt(-1);const u=mod((l-n*a)*mod(a+n));let{isValid:d,value:m}=uvRatio(o,u),y=mod(m*e);edIsNegative(y)||(y=mod(-y)),d||(m=y),d||(l=a);const b=mod(l*(a-_1n)*D_MINUS_ONE_SQ-u),_=m*m,w=mod((m+m)*u),E=mod(b*SQRT_AD_MINUS_ONE),A=mod(_1n-_),C=mod(_1n+_);return new ExtendedPoint(mod(w*C),mod(A*E),mod(E*C),mod(w*A))}static hashToCurve(e){e=ensureBytes(e,64);const n=bytes255ToNumberLE(e.slice(0,32)),a=this.calcElligatorRistrettoMap(n),o=bytes255ToNumberLE(e.slice(32,64)),l=this.calcElligatorRistrettoMap(o);return new RistrettoPoint(a.add(l))}static fromHex(e){e=ensureBytes(e,32);const{a:n,d:a}=CURVE,o="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",l=bytes255ToNumberLE(e);if(!equalBytes(numberTo32BytesLE(l),e)||edIsNegative(l))throw new Error(o);const u=mod(l*l),d=mod(_1n+n*u),m=mod(_1n-n*u),y=mod(d*d),b=mod(m*m),_=mod(n*a*y-b),{isValid:w,value:E}=invertSqrt(mod(_*b)),A=mod(E*m),C=mod(E*A*_);let k=mod((l+l)*A);edIsNegative(k)&&(k=mod(-k));const B=mod(d*C),D=mod(k*B);if(!w||edIsNegative(D)||B===_0n)throw new Error(o);return new RistrettoPoint(new ExtendedPoint(k,B,_1n,D))}toRawBytes(){let{x:e,y:n,z:a,t:o}=this.ep;const l=mod(mod(a+n)*mod(a-n)),u=mod(e*n),d=mod(u*u),{value:m}=invertSqrt(mod(l*d)),y=mod(m*l),b=mod(m*u),_=mod(y*b*o);let w;if(edIsNegative(o*_)){let A=mod(n*SQRT_M1),C=mod(e*SQRT_M1);e=A,n=C,w=mod(y*INVSQRT_A_MINUS_D)}else w=b;edIsNegative(e*_)&&(n=mod(-n));let E=mod((a-n)*w);return edIsNegative(E)&&(E=mod(-E)),numberTo32BytesLE(E)}toHex(){return bytesToHex$1(this.toRawBytes())}toString(){return this.toHex()}equals(e){assertRstPoint(e);const n=this.ep,a=e.ep,o=mod(n.x*a.y)===mod(n.y*a.x),l=mod(n.y*a.y)===mod(n.x*a.x);return o||l}add(e){return assertRstPoint(e),new RistrettoPoint(this.ep.add(e.ep))}subtract(e){return assertRstPoint(e),new RistrettoPoint(this.ep.subtract(e.ep))}multiply(e){return new RistrettoPoint(this.ep.multiply(e))}multiplyUnsafe(e){return new RistrettoPoint(this.ep.multiplyUnsafe(e))}}RistrettoPoint.BASE=new RistrettoPoint(ExtendedPoint.BASE);RistrettoPoint.ZERO=new RistrettoPoint(ExtendedPoint.ZERO);const pointPrecomputes=new WeakMap;let Point$1=class{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,pointPrecomputes.delete(this)}static fromHex(e,n=!0){const{d:a,P:o}=CURVE;e=ensureBytes(e,32);const l=e.slice();l[31]=e[31]&-129;const u=bytesToNumberLE(l);if(n&&u>=o)throw new Error("Expected 0 < hex < P");if(!n&&u>=POW_2_256)throw new Error("Expected 0 < hex < 2**256");const d=mod(u*u),m=mod(d-_1n),y=mod(a*d+_1n);let{isValid:b,value:_}=uvRatio(m,y);if(!b)throw new Error("Point.fromHex: invalid y coordinate");const w=(_&_1n)===_1n;return(e[31]&128)!==0!==w&&(_=mod(-_)),new Point$1(_,u)}static async fromPrivateKey(e){return(await getExtendedPublicKey(e)).point}toRawBytes(){const e=numberTo32BytesLE(this.y);return e[31]|=this.x&_1n?128:0,e}toHex(){return bytesToHex$1(this.toRawBytes())}toX25519(){const{y:e}=this,n=mod((_1n+e)*invert(_1n-e));return numberTo32BytesLE(n)}isTorsionFree(){return ExtendedPoint.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Point$1(mod(-this.x),this.y)}add(e){return ExtendedPoint.fromAffine(this).add(ExtendedPoint.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return ExtendedPoint.fromAffine(this).multiply(e,this).toAffine()}};Point$1.BASE=new Point$1(CURVE.Gx,CURVE.Gy);Point$1.ZERO=new Point$1(_0n,_1n);let Signature$1=class{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromHex(e){const n=ensureBytes(e,64),a=Point$1.fromHex(n.slice(0,32),!1),o=bytesToNumberLE(n.slice(32,64));return new Signature$1(a,o)}assertValidity(){const{r:e,s:n}=this;if(!(e instanceof Point$1))throw new Error("Expected Point instance");return normalizeScalar(n,CURVE.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(numberTo32BytesLE(this.s),32),e}toHex(){return bytesToHex$1(this.toRawBytes())}};function concatBytes(...t){if(!t.every(a=>a instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(t.length===1)return t[0];const e=t.reduce((a,o)=>a+o.length,0),n=new Uint8Array(e);for(let a=0,o=0;a<t.length;a++){const l=t[a];n.set(l,o),o+=l.length}return n}const hexes=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$1(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=hexes[t[n]];return e}function hexToBytes$1(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const a=n*2,o=t.slice(a,a+2),l=Number.parseInt(o,16);if(Number.isNaN(l)||l<0)throw new Error("Invalid byte sequence");e[n]=l}return e}function numberTo32BytesBE(t){const n=t.toString(16).padStart(64,"0");return hexToBytes$1(n)}function numberTo32BytesLE(t){return numberTo32BytesBE(t).reverse()}function edIsNegative(t){return(mod(t)&_1n)===_1n}function bytesToNumberLE(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+bytesToHex$1(Uint8Array.from(t).reverse()))}const MAX_255B=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function bytes255ToNumberLE(t){return mod(bytesToNumberLE(t)&MAX_255B)}function mod(t,e=CURVE.P){const n=t%e;return n>=_0n?n:e+n}function invert(t,e=CURVE.P){if(t===_0n||e<=_0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=mod(t,e),a=e,o=_0n,l=_1n;for(;n!==_0n;){const d=a/n,m=a%n,y=o-l*d;a=n,n=m,o=l,l=y}if(a!==_1n)throw new Error("invert: does not exist");return mod(o,e)}function invertBatch(t,e=CURVE.P){const n=new Array(t.length),a=t.reduce((l,u,d)=>u===_0n?l:(n[d]=l,mod(l*u,e)),_1n),o=invert(a,e);return t.reduceRight((l,u,d)=>u===_0n?l:(n[d]=mod(l*n[d],e),mod(l*u,e)),o),n}function pow2(t,e){const{P:n}=CURVE;let a=t;for(;e-- >_0n;)a*=a,a%=n;return a}function pow_2_252_3(t){const{P:e}=CURVE,n=BigInt(5),a=BigInt(10),o=BigInt(20),l=BigInt(40),u=BigInt(80),m=t*t%e*t%e,y=pow2(m,_2n)*m%e,b=pow2(y,_1n)*t%e,_=pow2(b,n)*b%e,w=pow2(_,a)*_%e,E=pow2(w,o)*w%e,A=pow2(E,l)*E%e,C=pow2(A,u)*A%e,k=pow2(C,u)*A%e,B=pow2(k,a)*_%e;return{pow_p_5_8:pow2(B,_2n)*t%e,b2:m}}function uvRatio(t,e){const n=mod(e*e*e),a=mod(n*n*e),o=pow_2_252_3(t*a).pow_p_5_8;let l=mod(t*n*o);const u=mod(e*l*l),d=l,m=mod(l*SQRT_M1),y=u===t,b=u===mod(-t),_=u===mod(-t*SQRT_M1);return y&&(l=d),(b||_)&&(l=m),edIsNegative(l)&&(l=mod(-l)),{isValid:y||b,value:l}}function invertSqrt(t){return uvRatio(_1n,t)}function modlLE(t){return mod(bytesToNumberLE(t),CURVE.l)}function equalBytes(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ensureBytes(t,e){const n=t instanceof Uint8Array?Uint8Array.from(t):hexToBytes$1(t);if(typeof e=="number"&&n.length!==e)throw new Error(`Expected ${e} bytes`);return n}function normalizeScalar(t,e,n=!0){if(!e)throw new TypeError("Specify max value");if(typeof t=="number"&&Number.isSafeInteger(t)&&(t=BigInt(t)),typeof t=="bigint"&&t<e){if(n){if(_0n<t)return t}else if(_0n<=t)return t}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function adjustBytes25519(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}function checkPrivateKey(t){if(t=typeof t=="bigint"||typeof t=="number"?numberTo32BytesBE(normalizeScalar(t,POW_2_256)):ensureBytes(t),t.length!==32)throw new Error("Expected 32 bytes");return t}function getKeyFromHash(t){const e=adjustBytes25519(t.slice(0,32)),n=t.slice(32,64),a=modlLE(e),o=Point$1.BASE.multiply(a),l=o.toRawBytes();return{head:e,prefix:n,scalar:a,point:o,pointBytes:l}}let _sha512Sync;async function getExtendedPublicKey(t){return getKeyFromHash(await utils$2.sha512(checkPrivateKey(t)))}async function getPublicKey(t){return(await getExtendedPublicKey(t)).pointBytes}async function sign(t,e){t=ensureBytes(t);const{prefix:n,scalar:a,pointBytes:o}=await getExtendedPublicKey(e),l=modlLE(await utils$2.sha512(n,t)),u=Point$1.BASE.multiply(l),d=modlLE(await utils$2.sha512(u.toRawBytes(),o,t)),m=mod(l+d*a,CURVE.l);return new Signature$1(u,m).toRawBytes()}function prepareVerification(t,e,n){e=ensureBytes(e),n instanceof Point$1||(n=Point$1.fromHex(n,!1));const{r:a,s:o}=t instanceof Signature$1?t.assertValidity():Signature$1.fromHex(t),l=ExtendedPoint.BASE.multiplyUnsafe(o);return{r:a,s:o,SB:l,pub:n,msg:e}}function finishVerification(t,e,n,a){const o=modlLE(a),l=ExtendedPoint.fromAffine(t).multiplyUnsafe(o);return ExtendedPoint.fromAffine(e).add(l).subtract(n).multiplyUnsafe(CURVE.h).equals(ExtendedPoint.ZERO)}async function verify$2(t,e,n){const{r:a,SB:o,msg:l,pub:u}=prepareVerification(t,e,n),d=await utils$2.sha512(a.toRawBytes(),u.toRawBytes(),l);return finishVerification(u,a,o,d)}Point$1.BASE._setWindowSize(8);const crypto$2={node:nodeCrypto,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},utils$2={bytesToHex:bytesToHex$1,hexToBytes:hexToBytes$1,concatBytes,getExtendedPublicKey,mod,invert,TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],hashToPrivateScalar:t=>{if(t=ensureBytes(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");return mod(bytesToNumberLE(t),CURVE.l-_1n)+_1n},randomBytes:(t=32)=>{if(crypto$2.web)return crypto$2.web.getRandomValues(new Uint8Array(t));if(crypto$2.node){const{randomBytes:e}=crypto$2.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>utils$2.randomBytes(32),sha512:async(...t)=>{const e=concatBytes(...t);if(crypto$2.web){const n=await crypto$2.web.subtle.digest("SHA-512",e.buffer);return new Uint8Array(n)}else{if(crypto$2.node)return Uint8Array.from(crypto$2.node.createHash("sha512").update(e).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Point$1.BASE){const n=e.equals(Point$1.BASE)?e:new Point$1(e.x,e.y);return n._setWindowSize(t),n.multiply(_2n),n},sha512Sync:void 0};Object.defineProperties(utils$2,{sha512Sync:{configurable:!1,get(){return _sha512Sync},set(t){_sha512Sync||(_sha512Sync=t)}}});const PUBLIC_KEY_BYTE_LENGTH=32,PRIVATE_KEY_BYTE_LENGTH=64,KEYS_BYTE_LENGTH=32;async function generateKey$1(){const t=utils$2.randomPrivateKey(),e=await getPublicKey(t);return{privateKey:concatKeys(t,e),publicKey:e}}async function generateKeyFromSeed(t){if(t.length!==KEYS_BYTE_LENGTH)throw new TypeError('"seed" must be 32 bytes in length.');if(!(t instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, or Uint8Array.');const e=t,n=await getPublicKey(e);return{privateKey:concatKeys(e,n),publicKey:n}}async function hashAndSign$1(t,e){const n=t.subarray(0,KEYS_BYTE_LENGTH);return await sign(e,n)}async function hashAndVerify$1(t,e,n){return await verify$2(e,n,t)}function concatKeys(t,e){const n=new Uint8Array(PRIVATE_KEY_BYTE_LENGTH);for(let a=0;a<KEYS_BYTE_LENGTH;a++)n[a]=t[a],n[KEYS_BYTE_LENGTH+a]=e[a];return n}class Ed25519PublicKey{constructor(e){this._key=ensureKey(e,PUBLIC_KEY_BYTE_LENGTH)}async verify(e,n){return await hashAndVerify$1(this._key,n,e)}marshal(){return this._key}get bytes(){return PublicKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}}class Ed25519PrivateKey{constructor(e,n){this._key=ensureKey(e,PRIVATE_KEY_BYTE_LENGTH),this._publicKey=ensureKey(n,PUBLIC_KEY_BYTE_LENGTH)}async sign(e){return await hashAndSign$1(this._key,e)}get public(){return new Ed25519PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Ed25519,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}async id(){const e=await identity$5.digest(this.public.bytes);return base58btc$3.encode(e.bytes).substring(1)}async export(e,n="libp2p-key"){if(n==="libp2p-key")return await exporter(this.bytes,e);throw errCode(new Error(`export format '${n}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalEd25519PrivateKey(t){if(t.length>PRIVATE_KEY_BYTE_LENGTH){t=ensureKey(t,PRIVATE_KEY_BYTE_LENGTH+PUBLIC_KEY_BYTE_LENGTH);const a=t.subarray(0,PRIVATE_KEY_BYTE_LENGTH),o=t.subarray(PRIVATE_KEY_BYTE_LENGTH,t.length);return new Ed25519PrivateKey(a,o)}t=ensureKey(t,PRIVATE_KEY_BYTE_LENGTH);const e=t.subarray(0,PRIVATE_KEY_BYTE_LENGTH),n=t.subarray(PUBLIC_KEY_BYTE_LENGTH);return new Ed25519PrivateKey(e,n)}function unmarshalEd25519PublicKey(t){return t=ensureKey(t,PUBLIC_KEY_BYTE_LENGTH),new Ed25519PublicKey(t)}async function generateKeyPair$2(){const{privateKey:t,publicKey:e}=await generateKey$1();return new Ed25519PrivateKey(t,e)}async function generateKeyPairFromSeed(t){const{privateKey:e,publicKey:n}=await generateKeyFromSeed(t);return new Ed25519PrivateKey(e,n)}function ensureKey(t,e){if(t=Uint8Array.from(t??[]),t.length!==e)throw errCode(new Error(`Key must be a Uint8Array of length ${e}, got ${t.length}`),"ERR_INVALID_KEY_TYPE");return t}const Ed25519=Object.freeze(Object.defineProperty({__proto__:null,Ed25519PrivateKey,Ed25519PublicKey,generateKeyPair:generateKeyPair$2,generateKeyPairFromSeed,unmarshalEd25519PrivateKey,unmarshalEd25519PublicKey},Symbol.toStringTag,{value:"Module"}));function generateKey(){return utils$3.randomPrivateKey()}async function hashAndSign(t,e){const{digest:n}=await sha256$4.digest(e);try{return await sign$1(n,t)}catch(a){throw errCode(a,"ERR_INVALID_INPUT")}}async function hashAndVerify(t,e,n){try{const{digest:a}=await sha256$4.digest(n);return verify$3(e,a,t)}catch(a){throw errCode(a,"ERR_INVALID_INPUT")}}function compressPublicKey(t){return Point$2.fromHex(t).toRawBytes(!0)}function validatePrivateKey(t){try{getPublicKey$1(t,!0)}catch(e){throw errCode(e,"ERR_INVALID_PRIVATE_KEY")}}function validatePublicKey(t){try{Point$2.fromHex(t)}catch(e){throw errCode(e,"ERR_INVALID_PUBLIC_KEY")}}function computePublicKey$1(t){try{return getPublicKey$1(t,!0)}catch(e){throw errCode(e,"ERR_INVALID_PRIVATE_KEY")}}class Secp256k1PublicKey{constructor(e){validatePublicKey(e),this._key=e}async verify(e,n){return await hashAndVerify(this._key,n,e)}marshal(){return compressPublicKey(this._key)}get bytes(){return PublicKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}}class Secp256k1PrivateKey{constructor(e,n){this._key=e,this._publicKey=n??computePublicKey$1(e),validatePrivateKey(this._key),validatePublicKey(this._publicKey)}async sign(e){return await hashAndSign(this._key,e)}get public(){return new Secp256k1PublicKey(this._publicKey)}marshal(){return this._key}get bytes(){return PrivateKey.encode({Type:KeyType$1.Secp256k1,Data:this.marshal()}).subarray()}equals(e){return equals$4(this.bytes,e.bytes)}async hash(){const{bytes:e}=await sha256$4.digest(this.bytes);return e}async id(){const e=await this.public.hash();return toString$8(e,"base58btc")}async export(e,n="libp2p-key"){if(n==="libp2p-key")return await exporter(this.bytes,e);throw errCode(new Error(`export format '${n}' is not supported`),"ERR_INVALID_EXPORT_FORMAT")}}function unmarshalSecp256k1PrivateKey(t){return new Secp256k1PrivateKey(t)}function unmarshalSecp256k1PublicKey(t){return new Secp256k1PublicKey(t)}async function generateKeyPair$1(){const t=await generateKey();return new Secp256k1PrivateKey(t)}const Secp256k1=Object.freeze(Object.defineProperty({__proto__:null,Secp256k1PrivateKey,Secp256k1PublicKey,generateKeyPair:generateKeyPair$1,unmarshalSecp256k1PrivateKey,unmarshalSecp256k1PublicKey},Symbol.toStringTag,{value:"Module"})),supportedKeys={rsa:RSA,ed25519:Ed25519,secp256k1:Secp256k1};function unsupportedKey(t){const e=Object.keys(supportedKeys).join(" / ");return errCode(new Error(`invalid or unsupported key type ${t}. Must be ${e}`),"ERR_UNSUPPORTED_KEY_TYPE")}function typeToKey(t){if(t=t.toLowerCase(),t==="rsa"||t==="ed25519"||t==="secp256k1")return supportedKeys[t];throw unsupportedKey(t)}async function generateKeyPair(t,e){return await typeToKey(t).generateKeyPair(e??2048)}function unmarshalPublicKey(t){const e=PublicKey.decode(t),n=e.Data??new Uint8Array;switch(e.Type){case KeyType$1.RSA:return supportedKeys.rsa.unmarshalRsaPublicKey(n);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PublicKey(n);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PublicKey(n);default:throw unsupportedKey(e.Type??"RSA")}}function marshalPublicKey(t,e){return e=(e??"rsa").toLowerCase(),typeToKey(e),t.bytes}async function unmarshalPrivateKey(t){const e=PrivateKey.decode(t),n=e.Data??new Uint8Array;switch(e.Type){case KeyType$1.RSA:return await supportedKeys.rsa.unmarshalRsaPrivateKey(n);case KeyType$1.Ed25519:return supportedKeys.ed25519.unmarshalEd25519PrivateKey(n);case KeyType$1.Secp256k1:return supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey(n);default:throw unsupportedKey(e.Type??"RSA")}}function marshalPrivateKey(t,e){return e=(e??"rsa").toLowerCase(),typeToKey(e),t.bytes}async function importKey(t,e){try{const o=await importer(t,e);return await unmarshalPrivateKey(o)}catch{}const n=forge$m.pki.decryptRsaPrivateKey(t,e);if(n===null)throw errCode(new Error("Cannot read the key, most likely the password is wrong or not a RSA key"),"ERR_CANNOT_DECRYPT_PEM");let a=forge$m.asn1.toDer(forge$m.pki.privateKeyToAsn1(n));return a=fromString$5(a.getBytes(),"ascii"),await supportedKeys.rsa.unmarshalRsaPrivateKey(a)}const errors={IMPOSSIBLE_CASE:"Impossible case. Please create issue.",TWEAK_ADD:"The tweak was out of range or the resulted private key is invalid",TWEAK_MUL:"The tweak was out of range or equal to zero",CONTEXT_RANDOMIZE_UNKNOW:"Unknow error on context randomization",SECKEY_INVALID:"Private Key is invalid",PUBKEY_PARSE:"Public Key could not be parsed",PUBKEY_SERIALIZE:"Public Key serialization error",PUBKEY_COMBINE:"The sum of the public keys is not valid",SIG_PARSE:"Signature could not be parsed",SIGN:"The nonce generation function failed, or the private key was invalid",RECOVER:"Public key could not be recover",ECDH:"Scalar was invalid (zero or overflow)"};function assert$6(t,e){if(!t)throw new Error(e)}function isUint8Array(t,e,n){if(assert$6(e instanceof Uint8Array,`Expected ${t} to be an Uint8Array`),n!==void 0)if(Array.isArray(n)){const a=n.join(", "),o=`Expected ${t} to be an Uint8Array with length [${a}]`;assert$6(n.includes(e.length),o)}else{const a=`Expected ${t} to be an Uint8Array with length ${n}`;assert$6(e.length===n,a)}}function isCompressed(t){assert$6(toTypeString$1(t)==="Boolean","Expected compressed to be a Boolean")}function getAssertedOutput(t=n=>new Uint8Array(n),e){return typeof t=="function"&&(t=t(e)),isUint8Array("output",t,e),t}function toTypeString$1(t){return Object.prototype.toString.call(t).slice(8,-1)}var lib=t=>({contextRandomize(e){switch(assert$6(e===null||e instanceof Uint8Array,"Expected seed to be an Uint8Array or null"),e!==null&&isUint8Array("seed",e,32),t.contextRandomize(e)){case 1:throw new Error(errors.CONTEXT_RANDOMIZE_UNKNOW)}},privateKeyVerify(e){return isUint8Array("private key",e,32),t.privateKeyVerify(e)===0},privateKeyNegate(e){switch(isUint8Array("private key",e,32),t.privateKeyNegate(e)){case 0:return e;case 1:throw new Error(errors.IMPOSSIBLE_CASE)}},privateKeyTweakAdd(e,n){switch(isUint8Array("private key",e,32),isUint8Array("tweak",n,32),t.privateKeyTweakAdd(e,n)){case 0:return e;case 1:throw new Error(errors.TWEAK_ADD)}},privateKeyTweakMul(e,n){switch(isUint8Array("private key",e,32),isUint8Array("tweak",n,32),t.privateKeyTweakMul(e,n)){case 0:return e;case 1:throw new Error(errors.TWEAK_MUL)}},publicKeyVerify(e){return isUint8Array("public key",e,[33,65]),t.publicKeyVerify(e)===0},publicKeyCreate(e,n=!0,a){switch(isUint8Array("private key",e,32),isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyCreate(a,e)){case 0:return a;case 1:throw new Error(errors.SECKEY_INVALID);case 2:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyConvert(e,n=!0,a){switch(isUint8Array("public key",e,[33,65]),isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyConvert(a,e)){case 0:return a;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyNegate(e,n=!0,a){switch(isUint8Array("public key",e,[33,65]),isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyNegate(a,e)){case 0:return a;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.IMPOSSIBLE_CASE);case 3:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyCombine(e,n=!0,a){assert$6(Array.isArray(e),"Expected public keys to be an Array"),assert$6(e.length>0,"Expected public keys array will have more than zero items");for(const o of e)isUint8Array("public key",o,[33,65]);switch(isCompressed(n),a=getAssertedOutput(a,n?33:65),t.publicKeyCombine(a,e)){case 0:return a;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.PUBKEY_COMBINE);case 3:throw new Error(errors.PUBKEY_SERIALIZE)}},publicKeyTweakAdd(e,n,a=!0,o){switch(isUint8Array("public key",e,[33,65]),isUint8Array("tweak",n,32),isCompressed(a),o=getAssertedOutput(o,a?33:65),t.publicKeyTweakAdd(o,e,n)){case 0:return o;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.TWEAK_ADD)}},publicKeyTweakMul(e,n,a=!0,o){switch(isUint8Array("public key",e,[33,65]),isUint8Array("tweak",n,32),isCompressed(a),o=getAssertedOutput(o,a?33:65),t.publicKeyTweakMul(o,e,n)){case 0:return o;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.TWEAK_MUL)}},signatureNormalize(e){switch(isUint8Array("signature",e,64),t.signatureNormalize(e)){case 0:return e;case 1:throw new Error(errors.SIG_PARSE)}},signatureExport(e,n){isUint8Array("signature",e,64),n=getAssertedOutput(n,72);const a={output:n,outputlen:72};switch(t.signatureExport(a,e)){case 0:return n.slice(0,a.outputlen);case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.IMPOSSIBLE_CASE)}},signatureImport(e,n){switch(isUint8Array("signature",e),n=getAssertedOutput(n,64),t.signatureImport(n,e)){case 0:return n;case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.IMPOSSIBLE_CASE)}},ecdsaSign(e,n,a={},o){isUint8Array("message",e,32),isUint8Array("private key",n,32),assert$6(toTypeString$1(a)==="Object","Expected options to be an Object"),a.data!==void 0&&isUint8Array("options.data",a.data),a.noncefn!==void 0&&assert$6(toTypeString$1(a.noncefn)==="Function","Expected options.noncefn to be a Function"),o=getAssertedOutput(o,64);const l={signature:o,recid:null};switch(t.ecdsaSign(l,e,n,a.data,a.noncefn)){case 0:return l;case 1:throw new Error(errors.SIGN);case 2:throw new Error(errors.IMPOSSIBLE_CASE)}},ecdsaVerify(e,n,a){switch(isUint8Array("signature",e,64),isUint8Array("message",n,32),isUint8Array("public key",a,[33,65]),t.ecdsaVerify(e,n,a)){case 0:return!0;case 3:return!1;case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.PUBKEY_PARSE)}},ecdsaRecover(e,n,a,o=!0,l){switch(isUint8Array("signature",e,64),assert$6(toTypeString$1(n)==="Number"&&n>=0&&n<=3,"Expected recovery id to be a Number within interval [0, 3]"),isUint8Array("message",a,32),isCompressed(o),l=getAssertedOutput(l,o?33:65),t.ecdsaRecover(l,e,n,a)){case 0:return l;case 1:throw new Error(errors.SIG_PARSE);case 2:throw new Error(errors.RECOVER);case 3:throw new Error(errors.IMPOSSIBLE_CASE)}},ecdh(e,n,a={},o){switch(isUint8Array("public key",e,[33,65]),isUint8Array("private key",n,32),assert$6(toTypeString$1(a)==="Object","Expected options to be an Object"),a.data!==void 0&&isUint8Array("options.data",a.data),a.hashfn!==void 0?(assert$6(toTypeString$1(a.hashfn)==="Function","Expected options.hashfn to be a Function"),a.xbuf!==void 0&&isUint8Array("options.xbuf",a.xbuf,32),a.ybuf!==void 0&&isUint8Array("options.ybuf",a.ybuf,32),isUint8Array("output",o)):o=getAssertedOutput(o,32),t.ecdh(o,e,n,a.data,a.hashfn,a.xbuf,a.ybuf)){case 0:return o;case 1:throw new Error(errors.PUBKEY_PARSE);case 2:throw new Error(errors.ECDH)}}});const EC$5=requireElliptic().ec,ec$2=new EC$5("secp256k1"),ecparams=ec$2.curve,BN$2=ecparams.n.constructor;function loadCompressedPublicKey(t,e){let n=new BN$2(e);if(n.cmp(ecparams.p)>=0)return null;n=n.toRed(ecparams.red);let a=n.redSqr().redIMul(n).redIAdd(ecparams.b).redSqrt();return t===3!==a.isOdd()&&(a=a.redNeg()),ec$2.keyPair({pub:{x:n,y:a}})}function loadUncompressedPublicKey(t,e,n){let a=new BN$2(e),o=new BN$2(n);if(a.cmp(ecparams.p)>=0||o.cmp(ecparams.p)>=0||(a=a.toRed(ecparams.red),o=o.toRed(ecparams.red),(t===6||t===7)&&o.isOdd()!==(t===7)))return null;const l=a.redSqr().redIMul(a);return o.redSqr().redISub(l.redIAdd(ecparams.b)).isZero()?ec$2.keyPair({pub:{x:a,y:o}}):null}function loadPublicKey(t){const e=t[0];switch(e){case 2:case 3:return t.length!==33?null:loadCompressedPublicKey(e,t.subarray(1,33));case 4:case 6:case 7:return t.length!==65?null:loadUncompressedPublicKey(e,t.subarray(1,33),t.subarray(33,65));default:return null}}function savePublicKey(t,e){const n=e.encode(null,t.length===33);for(let a=0;a<t.length;++a)t[a]=n[a]}var elliptic$2={contextRandomize(){return 0},privateKeyVerify(t){const e=new BN$2(t);return e.cmp(ecparams.n)<0&&!e.isZero()?0:1},privateKeyNegate(t){const e=new BN$2(t),n=ecparams.n.sub(e).umod(ecparams.n).toArrayLike(Uint8Array,"be",32);return t.set(n),0},privateKeyTweakAdd(t,e){const n=new BN$2(e);if(n.cmp(ecparams.n)>=0||(n.iadd(new BN$2(t)),n.cmp(ecparams.n)>=0&&n.isub(ecparams.n),n.isZero()))return 1;const a=n.toArrayLike(Uint8Array,"be",32);return t.set(a),0},privateKeyTweakMul(t,e){let n=new BN$2(e);if(n.cmp(ecparams.n)>=0||n.isZero())return 1;n.imul(new BN$2(t)),n.cmp(ecparams.n)>=0&&(n=n.umod(ecparams.n));const a=n.toArrayLike(Uint8Array,"be",32);return t.set(a),0},publicKeyVerify(t){return loadPublicKey(t)===null?1:0},publicKeyCreate(t,e){const n=new BN$2(e);if(n.cmp(ecparams.n)>=0||n.isZero())return 1;const a=ec$2.keyFromPrivate(e).getPublic();return savePublicKey(t,a),0},publicKeyConvert(t,e){const n=loadPublicKey(e);if(n===null)return 1;const a=n.getPublic();return savePublicKey(t,a),0},publicKeyNegate(t,e){const n=loadPublicKey(e);if(n===null)return 1;const a=n.getPublic();return a.y=a.y.redNeg(),savePublicKey(t,a),0},publicKeyCombine(t,e){const n=new Array(e.length);for(let o=0;o<e.length;++o)if(n[o]=loadPublicKey(e[o]),n[o]===null)return 1;let a=n[0].getPublic();for(let o=1;o<n.length;++o)a=a.add(n[o].pub);return a.isInfinity()?2:(savePublicKey(t,a),0)},publicKeyTweakAdd(t,e,n){const a=loadPublicKey(e);if(a===null)return 1;if(n=new BN$2(n),n.cmp(ecparams.n)>=0)return 2;const o=a.getPublic().add(ecparams.g.mul(n));return o.isInfinity()?2:(savePublicKey(t,o),0)},publicKeyTweakMul(t,e,n){const a=loadPublicKey(e);if(a===null)return 1;if(n=new BN$2(n),n.cmp(ecparams.n)>=0||n.isZero())return 2;const o=a.getPublic().mul(n);return savePublicKey(t,o),0},signatureNormalize(t){const e=new BN$2(t.subarray(0,32)),n=new BN$2(t.subarray(32,64));return e.cmp(ecparams.n)>=0||n.cmp(ecparams.n)>=0?1:(n.cmp(ec$2.nh)===1&&t.set(ecparams.n.sub(n).toArrayLike(Uint8Array,"be",32),32),0)},signatureExport(t,e){const n=e.subarray(0,32),a=e.subarray(32,64);if(new BN$2(n).cmp(ecparams.n)>=0||new BN$2(a).cmp(ecparams.n)>=0)return 1;const{output:o}=t;let l=o.subarray(4,4+33);l[0]=0,l.set(n,1);let u=33,d=0;for(;u>1&&l[d]===0&&!(l[d+1]&128);--u,++d);if(l=l.subarray(d),l[0]&128||u>1&&l[0]===0&&!(l[1]&128))return 1;let m=o.subarray(6+33,6+33+33);m[0]=0,m.set(a,1);let y=33,b=0;for(;y>1&&m[b]===0&&!(m[b+1]&128);--y,++b);return m=m.subarray(b),m[0]&128||y>1&&m[0]===0&&!(m[1]&128)?1:(t.outputlen=6+u+y,o[0]=48,o[1]=t.outputlen-2,o[2]=2,o[3]=l.length,o.set(l,4),o[4+u]=2,o[5+u]=m.length,o.set(m,6+u),0)},signatureImport(t,e){if(e.length<8||e.length>72||e[0]!==48||e[1]!==e.length-2||e[2]!==2)return 1;const n=e[3];if(n===0||5+n>=e.length||e[4+n]!==2)return 1;const a=e[5+n];if(a===0||6+n+a!==e.length||e[4]&128||n>1&&e[4]===0&&!(e[5]&128)||e[n+6]&128||a>1&&e[n+6]===0&&!(e[n+7]&128))return 1;let o=e.subarray(4,4+n);if(o.length===33&&o[0]===0&&(o=o.subarray(1)),o.length>32)return 1;let l=e.subarray(6+n);if(l.length===33&&l[0]===0&&(l=l.slice(1)),l.length>32)throw new Error("S length is too long");let u=new BN$2(o);u.cmp(ecparams.n)>=0&&(u=new BN$2(0));let d=new BN$2(e.subarray(6+n));return d.cmp(ecparams.n)>=0&&(d=new BN$2(0)),t.set(u.toArrayLike(Uint8Array,"be",32),0),t.set(d.toArrayLike(Uint8Array,"be",32),32),0},ecdsaSign(t,e,n,a,o){if(o){const d=o;o=m=>{const y=d(e,n,null,a,m);if(!(y instanceof Uint8Array&&y.length===32))throw new Error("This is the way");return new BN$2(y)}}const l=new BN$2(n);if(l.cmp(ecparams.n)>=0||l.isZero())return 1;let u;try{u=ec$2.sign(e,n,{canonical:!0,k:o,pers:a})}catch{return 1}return t.signature.set(u.r.toArrayLike(Uint8Array,"be",32),0),t.signature.set(u.s.toArrayLike(Uint8Array,"be",32),32),t.recid=u.recoveryParam,0},ecdsaVerify(t,e,n){const a={r:t.subarray(0,32),s:t.subarray(32,64)},o=new BN$2(a.r),l=new BN$2(a.s);if(o.cmp(ecparams.n)>=0||l.cmp(ecparams.n)>=0)return 1;if(l.cmp(ec$2.nh)===1||o.isZero()||l.isZero())return 3;const u=loadPublicKey(n);if(u===null)return 2;const d=u.getPublic();return ec$2.verify(e,a,d)?0:3},ecdsaRecover(t,e,n,a){const o={r:e.slice(0,32),s:e.slice(32,64)},l=new BN$2(o.r),u=new BN$2(o.s);if(l.cmp(ecparams.n)>=0||u.cmp(ecparams.n)>=0)return 1;if(l.isZero()||u.isZero())return 2;let d;try{d=ec$2.recoverPubKey(a,o,n)}catch{return 2}return savePublicKey(t,d),0},ecdh(t,e,n,a,o,l,u){const d=loadPublicKey(e);if(d===null)return 1;const m=new BN$2(n);if(m.cmp(ecparams.n)>=0||m.isZero())return 2;const y=d.getPublic().mul(m);if(o===void 0){const b=y.encode(null,!0),_=ec$2.hash().update(b).digest();for(let w=0;w<32;++w)t[w]=_[w]}else{l||(l=new Uint8Array(32));const b=y.getX().toArray("be",32);for(let A=0;A<32;++A)l[A]=b[A];u||(u=new Uint8Array(32));const _=y.getY().toArray("be",32);for(let A=0;A<32;++A)u[A]=_[A];const w=o(l,u,a);if(!(w instanceof Uint8Array&&w.length===t.length))return 2;t.set(w)}return 0}},elliptic$1=lib(elliptic$2),events=eventsExports,inherits$1=inherits_browserExports,lru=LRU;function LRU(t){if(!(this instanceof LRU))return new LRU(t);typeof t=="number"&&(t={max:t}),t||(t={}),events.EventEmitter.call(this),this.cache={},this.head=this.tail=null,this.length=0,this.max=t.max||1e3,this.maxAge=t.maxAge||0}inherits$1(LRU,events.EventEmitter);Object.defineProperty(LRU.prototype,"keys",{get:function(){return Object.keys(this.cache)}});LRU.prototype.clear=function(){this.cache={},this.head=this.tail=null,this.length=0};LRU.prototype.remove=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];return delete this.cache[t],this._unlink(t,e.prev,e.next),e.value}};LRU.prototype._unlink=function(t,e,n){this.length--,this.length===0?this.head=this.tail=null:this.head===t?(this.head=e,this.cache[this.head].next=null):this.tail===t?(this.tail=n,this.cache[this.tail].prev=null):(this.cache[e].next=n,this.cache[n].prev=e)};LRU.prototype.peek=function(t){if(this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return e.value}};LRU.prototype.set=function(t,e){typeof t!="string"&&(t=""+t);var n;if(this.cache.hasOwnProperty(t)){if(n=this.cache[t],n.value=e,this.maxAge&&(n.modified=Date.now()),t===this.head)return e;this._unlink(t,n.prev,n.next)}else n={value:e,modified:0,next:null,prev:null},this.maxAge&&(n.modified=Date.now()),this.cache[t]=n,this.length===this.max&&this.evict();return this.length++,n.next=null,n.prev=this.head,this.head&&(this.cache[this.head].next=t),this.head=t,this.tail||(this.tail=t),e};LRU.prototype._checkAge=function(t,e){return this.maxAge&&Date.now()-e.modified>this.maxAge?(this.remove(t),this.emit("evict",{key:t,value:e.value}),!1):!0};LRU.prototype.get=function(t){if(typeof t!="string"&&(t=""+t),!!this.cache.hasOwnProperty(t)){var e=this.cache[t];if(this._checkAge(t,e))return this.head!==t&&(t===this.tail?(this.tail=e.next,this.cache[this.tail].prev=null):this.cache[e.prev].next=e.next,this.cache[e.next].prev=e.prev,this.cache[this.head].next=t,e.prev=this.head,e.next=null,this.head=t),e.value}};LRU.prototype.evict=function(){if(this.tail){var t=this.tail,e=this.remove(this.tail);this.emit("evict",{key:t,value:e})}};var ellipticExports=requireElliptic();const elliptic=getDefaultExportFromCjs(ellipticExports),{ec:EC$4}=elliptic,verify$1=async(t,e,n)=>{if(!t)throw new Error("No signature given");if(!e)throw new Error("Given publicKey was undefined");if(!n)throw new Error("Given input data was undefined");let a=!1;const o=new EC$4("secp256k1"),l=o.keyPair({pub:e,pubEnc:"hex"});try{a=o.verify(n,t,l)}catch{}return Promise.resolve(a)},v0=Object.freeze(Object.defineProperty({__proto__:null,verify:verify$1},Symbol.toStringTag,{value:"Module"})),unmarshal$1=supportedKeys.secp256k1.unmarshalSecp256k1PublicKey,verify=async(t,e,n)=>{if(!t)throw new Error("No signature given");if(!e)throw new Error("Given publicKey was undefined");if(!n)throw new Error("Given input data was undefined");safeBufferExports.Buffer.isBuffer(n)||(n=safeBufferExports.Buffer.from(n));const a=(l,u,d)=>l.verify(u,d);let o=!1;try{const l=unmarshal$1(safeBufferExports.Buffer.from(e,"hex"));o=await a(l,n,safeBufferExports.Buffer.from(t,"hex"))}catch{}return Promise.resolve(o)},v1=Object.freeze(Object.defineProperty({__proto__:null,verify},Symbol.toStringTag,{value:"Module"})),verifiers$1={v0,v1},verifier=t=>verifiers$1[t],{ec:EC$3}=elliptic,ec$1=new EC$3("secp256k1"),unmarshal=supportedKeys.secp256k1.unmarshalSecp256k1PrivateKey;function createStore(t="./keystore"){return net&&net.mkdirSync&&net.mkdirSync(t,{recursive:!0}),new Level(t,{})}const verifiedCache=new lru(1e3);class Keystore{constructor(e={}){typeof e=="string"?this._store=createStore(e):typeof e.open=="function"?this._store=e:typeof e.store=="string"?this._store=createStore(e.store):this._store=e.store||createStore(),this._cache=e.cache||new lru(100)}async open(){if(!this._store)throw new Error("Keystore: No store found to open");await this._store.open()}async close(){this._store&&await this._store.close()}async hasKey(e){if(!e)throw new Error("id needed to check a key");if(this._store.status&&this._store.status!=="open")return null;let n=!1;try{const a=this._cache.get(e)||await this._store.get(e);n=a!=null}catch{console.error("Error: ENOENT: no such file or directory")}return n}async createKey(e,{entropy:n}={}){if(!e)throw new Error("id needed to create a key");if(this._store.status&&this._store.status!=="open")return null;const a=ec$1.genKeyPair({entropy:n}).getPrivate().toArrayLike(safeBufferExports.Buffer),o=safeBufferExports.Buffer.alloc(32);a.copy(o,o.length-a.length);const l=await unmarshal(o),u=l.public.marshal(),d=elliptic$1.publicKeyConvert(safeBufferExports.Buffer.from(u),!1),m={publicKey:safeBufferExports.Buffer.from(d).toString("hex"),privateKey:safeBufferExports.Buffer.from(l.marshal()).toString("hex")};try{await this._store.put(e,JSON.stringify(m))}catch(y){console.log(y)}return this._cache.set(e,m),l}async getKey(e){if(!e)throw new Error("id needed to get a key");if(this._store||await this.open(),this._store.status&&this._store.status!=="open")return null;const n=this._cache.get(e);let a;try{a=n||await this._store.get(e)}catch{}if(!a)return;const o=n||JSON.parse(a);if(o)return n||this._cache.set(e,o),unmarshal(safeBufferExports.Buffer.from(o.privateKey,"hex"))}async sign(e,n){if(!e)throw new Error("No signing key given");if(!n)throw new Error("Given input data was undefined");return safeBufferExports.Buffer.isBuffer(n)||(n=safeBufferExports.Buffer.from(n)),safeBufferExports.Buffer.from(await e.sign(n)).toString("hex")}getPublic(e,n={}){const a=["hex","buffer"],o=typeof n.decompress>"u"?!0:n.decompress,l=n.format||"hex";if(a.indexOf(l)===-1)throw new Error("Supported formats are `hex` and `buffer`");let u=e.public.marshal();return o&&(u=elliptic$1.publicKeyConvert(safeBufferExports.Buffer.from(u),!1)),u=safeBufferExports.Buffer.from(u),l==="buffer"?u:u.toString("hex")}async verify(e,n,a,o="v1"){return Keystore.verify(e,n,a,o)}static async verify(e,n,a,o="v1"){const l=verifiedCache.get(e);let u=!1;if(l){const d=(m,y,b)=>{let _;return b==="v0"?_=safeBufferExports.Buffer.compare(safeBufferExports.Buffer.alloc(30,m),safeBufferExports.Buffer.alloc(30,y))===0:_=safeBufferExports.Buffer.isBuffer(y)?safeBufferExports.Buffer.compare(m,y)===0:m===y,_};u=l.publicKey===n&&d(l.data,a,o)}else{const d=await verifier(o).verify(e,n,a);u=d,d&&verifiedCache.set(e,{publicKey:n,data:a})}return u}}const isDefined$1=t=>t!=null;class Identity{constructor(e,n,a,o,l,u){if(!isDefined$1(e))throw new Error("Identity id is required");if(!isDefined$1(n))throw new Error("Invalid public key");if(!isDefined$1(a))throw new Error("Signature of the id (idSignature) is required");if(!isDefined$1(o))throw new Error("Signature of (publicKey + idSignature) is required");if(!isDefined$1(l))throw new Error("Identity type is required");if(!isDefined$1(u))throw new Error("Identity provider is required");this._id=e,this._publicKey=n,this._signatures=Object.assign({},{id:a},{publicKey:o}),this._type=l,this._provider=u}get id(){return this._id}get publicKey(){return this._publicKey}get signatures(){return this._signatures}get type(){return this._type}get provider(){return this._provider}toJSON(){return{id:this.id,publicKey:this.publicKey,signatures:this.signatures,type:this.type}}static isIdentity(e){return e.id!==void 0&&e.publicKey!==void 0&&e.signatures!==void 0&&e.signatures.id!==void 0&&e.signatures.publicKey!==void 0&&e.type!==void 0}static toJSON(e){return{id:e.id,publicKey:e.publicKey,signatures:e.signatures,type:e.type}}}class IdentityProvider{async getId(e){}async signIdentity(e,n){}static async verifyIdentity(e){}static get type(){throw new Error("'static get type ()' needs to be defined in the inheriting class")}get type(){return this.constructor.type}}const type$5="orbitdb";class OrbitDBIdentityProvider extends IdentityProvider{constructor(e){if(super(),!e)throw new Error("OrbitDBIdentityProvider requires a keystore");this._keystore=e}static get type(){return type$5}async getId(e={}){const n=e.id;if(!n)throw new Error("id is required");const a=this._keystore,o=await a.getKey(n)||await a.createKey(n);return Buffer$y.from(o.public.marshal()).toString("hex")}async signIdentity(e,n={}){const a=n.id;if(!a)throw new Error("id is required");const o=this._keystore,l=await o.getKey(a);if(!l)throw new Error(`Signing key for '${a}' not found`);return o.sign(l,e)}static async verifyIdentity(e){return Keystore.verify(e.signatures.publicKey,e.id,e.publicKey+e.signatures.id)}}function _catch(t,e){try{var n=t()}catch(a){return e(a)}return n&&n.then?n.then(void 0,e):n}function inMemoryCache(){const t=new Map;return function(e,n){try{let o=function(u){if(a)return u;const d=t.get(e.didUrl);return d!==void 0?d:Promise.resolve(n()).then(function(m){var y;return((y=m.didResolutionMetadata)==null?void 0:y.error)!=="notFound"&&t.set(e.didUrl,m),m})},a;const l=function(){if(e.params&&e.params["no-cache"]==="true")return Promise.resolve(n()).then(function(u){return a=1,u})}();return Promise.resolve(l&&l.then?l.then(o):o(l))}catch(a){return Promise.reject(a)}}}function noCache(t,e){return e()}const PCT_ENCODED="(?:%[0-9a-fA-F]{2})",ID_CHAR=`(?:[a-zA-Z0-9._-]|${PCT_ENCODED})`,METHOD="([a-z0-9]+)",METHOD_ID=`((?:${ID_CHAR}*:)*(${ID_CHAR}+))`,PARAM_CHAR="[a-zA-Z0-9_.:%-]",PARAM=`;${PARAM_CHAR}+=${PARAM_CHAR}*`,PARAMS=`((${PARAM})*)`,PATH="(/[^#?]*)?",QUERY="([?][^#]*)?",FRAGMENT="(#.*)?",DID_MATCHER=new RegExp(`^did:${METHOD}:${METHOD_ID}${PARAMS}${PATH}${QUERY}${FRAGMENT}$`);function parse$2(t){if(t===""||!t)return null;const e=t.match(DID_MATCHER);if(e){const n={did:`did:${e[1]}:${e[2]}`,method:e[1],id:e[2],didUrl:t};if(e[4]){const a=e[4].slice(1).split(";");n.params={};for(const o of a){const l=o.split("=");n.params[l[0]]=l[1]}}return e[6]&&(n.path=e[6]),e[7]&&(n.query=e[7].slice(1)),e[8]&&(n.fragment=e[8].slice(1)),n}return null}const EMPTY_RESULT={didResolutionMetadata:{},didDocument:null,didDocumentMetadata:{}};function wrapLegacyResolver(t){return function(e,n,a){try{return Promise.resolve(_catch(function(){return Promise.resolve(t(e,n,a)).then(function(o){return{...EMPTY_RESULT,didResolutionMetadata:{contentType:"application/did+ld+json"},didDocument:o}})},function(o){return{...EMPTY_RESULT,didResolutionMetadata:{error:"notFound",message:o.toString()}}}))}catch(o){return Promise.reject(o)}}}class Resolver{constructor(e={},n={}){this.registry=void 0,this.cache=void 0,this.registry=e,this.cache=n.cache===!0?inMemoryCache():n.cache||noCache,n.legacyResolvers&&Object.keys(n.legacyResolvers).map(a=>{this.registry[a]||(this.registry[a]=wrapLegacyResolver(n.legacyResolvers[a]))})}resolve(e,n={}){try{const a=this,o=parse$2(e);if(o===null)return Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"invalidDid"}});const l=a.registry[o.method];return l?Promise.resolve(a.cache(o,()=>l(o.did,o,a,n))):Promise.resolve({...EMPTY_RESULT,didResolutionMetadata:{error:"unsupportedDidMethod"}})}catch(a){return Promise.reject(a)}}}function asUint8Array$1(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe$1(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array$1(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function concat$1(t,e){e||(e=t.reduce((o,l)=>o+l.length,0));const n=allocUnsafe$1(e);let a=0;for(const o of t)n.set(o,a),a+=o.length;return asUint8Array$1(n)}function base$3(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var l=t.charAt(o),u=l.charCodeAt(0);if(n[u]!==255)throw new TypeError(l+" is ambiguous");n[u]=o}var d=t.length,m=t.charAt(0),y=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function _(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var C=0,k=0,B=0,D=A.length;B!==D&&A[B]===0;)B++,C++;for(var q=(D-B)*b+1>>>0,j=new Uint8Array(q);B!==D;){for(var J=A[B],Y=0,L=q-1;(J!==0||Y<k)&&L!==-1;L--,Y++)J+=256*j[L]>>>0,j[L]=J%d>>>0,J=J/d>>>0;if(J!==0)throw new Error("Non-zero carry");k=Y,B++}for(var Z=q-k;Z!==q&&j[Z]===0;)Z++;for(var Q=m.repeat(C);Z<q;++Z)Q+=t.charAt(j[Z]);return Q}function w(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var C=0;if(A[C]!==" "){for(var k=0,B=0;A[C]===m;)k++,C++;for(var D=(A.length-C)*y+1>>>0,q=new Uint8Array(D);A[C];){var j=n[A.charCodeAt(C)];if(j===255)return;for(var J=0,Y=D-1;(j!==0||J<B)&&Y!==-1;Y--,J++)j+=d*q[Y]>>>0,q[Y]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");B=J,C++}if(A[C]!==" "){for(var L=D-B;L!==D&&q[L]===0;)L++;for(var Z=new Uint8Array(k+(D-L)),Q=k;L!==D;)Z[Q++]=q[L++];return Z}}}function E(A){var C=w(A);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:w,decode:E}}var src$5=base$3,_brrp__multiformats_scope_baseX$2=src$5;const equals$3=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},coerce$2=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$4=t=>new TextEncoder().encode(t),toString$7=t=>new TextDecoder().decode(t);let Encoder$3=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$3=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$2(this,e)}},ComposedDecoder$2=class{constructor(e){this.decoders=e}or(e){return or$2(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$2=(t,e)=>new ComposedDecoder$2({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$3=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$3(e,n,a),this.decoder=new Decoder$3(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$3=({name:t,prefix:e,encode:n,decode:a})=>new Codec$3(t,e,n,a),baseX$2=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$2(n,e);return from$3({prefix:t,name:e,encode:a,decode:l=>coerce$2(o(l))})},decode$i=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let l=t.length;for(;t[l-1]==="=";)--l;const u=new Uint8Array(l*n/8|0);let d=0,m=0,y=0;for(let b=0;b<l;++b){const _=o[t[b]];if(_===void 0)throw new SyntaxError(`Non-${a} character`);m=m<<n|_,d+=n,d>=8&&(d-=8,u[y++]=255&m>>d)}if(d>=n||255&m<<8-d)throw new SyntaxError("Unexpected end of data");return u},encode$i=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let l="",u=0,d=0;for(let m=0;m<t.length;++m)for(d=d<<8|t[m],u+=8;u>n;)u-=n,l+=e[o&d>>u];if(u&&(l+=e[o&d<<n-u]),a)for(;l.length*n&7;)l+="=";return l},rfc4648$2=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$3({prefix:e,name:t,encode(o){return encode$i(o,a,n)},decode(o){return decode$i(o,a,n,t)}}),identity$4=from$3({prefix:"\0",name:"identity",encode:t=>toString$7(t),decode:t=>fromString$4(t)}),identityBase$1=Object.freeze(Object.defineProperty({__proto__:null,identity:identity$4},Symbol.toStringTag,{value:"Module"})),base2$2=rfc4648$2({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$3=Object.freeze(Object.defineProperty({__proto__:null,base2:base2$2},Symbol.toStringTag,{value:"Module"})),base8$2=rfc4648$2({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$3=Object.freeze(Object.defineProperty({__proto__:null,base8:base8$2},Symbol.toStringTag,{value:"Module"})),base10$2=baseX$2({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$3=Object.freeze(Object.defineProperty({__proto__:null,base10:base10$2},Symbol.toStringTag,{value:"Module"})),base16$2=rfc4648$2({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper$1=rfc4648$2({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$3=Object.freeze(Object.defineProperty({__proto__:null,base16:base16$2,base16upper:base16upper$1},Symbol.toStringTag,{value:"Module"})),base32$3=rfc4648$2({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper$1=rfc4648$2({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad$1=rfc4648$2({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper$1=rfc4648$2({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex$1=rfc4648$2({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper$1=rfc4648$2({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad$1=rfc4648$2({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper$1=rfc4648$2({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z$1=rfc4648$2({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$4=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$3,base32hex:base32hex$1,base32hexpad:base32hexpad$1,base32hexpadupper:base32hexpadupper$1,base32hexupper:base32hexupper$1,base32pad:base32pad$1,base32padupper:base32padupper$1,base32upper:base32upper$1,base32z:base32z$1},Symbol.toStringTag,{value:"Module"})),base36$2=baseX$2({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper$1=baseX$2({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$3=Object.freeze(Object.defineProperty({__proto__:null,base36:base36$2,base36upper:base36upper$1},Symbol.toStringTag,{value:"Module"})),base58btc$2=baseX$2({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr$1=baseX$2({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58$1=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$2,base58flickr:base58flickr$1},Symbol.toStringTag,{value:"Module"})),base64$4=rfc4648$2({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad$1=rfc4648$2({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url$1=rfc4648$2({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad$1=rfc4648$2({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$5=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$4,base64pad:base64pad$1,base64url:base64url$1,base64urlpad:base64urlpad$1},Symbol.toStringTag,{value:"Module"})),alphabet$1=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars$1=alphabet$1.reduce((t,e,n)=>(t[n]=e,t),[]),alphabetCharsToBytes$1=alphabet$1.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function encode$h(t){return t.reduce((e,n)=>(e+=alphabetBytesToChars$1[n],e),"")}function decode$h(t){const e=[];for(const n of t){const a=alphabetCharsToBytes$1[n.codePointAt(0)];if(a===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(a)}return new Uint8Array(e)}const base256emoji$2=from$3({prefix:"🚀",name:"base256emoji",encode:encode$h,decode:decode$h}),base256emoji$3=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:base256emoji$2},Symbol.toStringTag,{value:"Module"}));var encode_1$4=encode$g,MSB$3=128,REST$3=127,MSBALL$2=~REST$3,INT$2=Math.pow(2,31);function encode$g(t,e,n){e=e||[],n=n||0;for(var a=n;t>=INT$2;)e[n++]=t&255|MSB$3,t/=128;for(;t&MSBALL$2;)e[n++]=t&255|MSB$3,t>>>=7;return e[n]=t|0,encode$g.bytes=n-a+1,e}var decode$g=read$5,MSB$1$2=128,REST$1$2=127;function read$5(t,a){var n=0,a=a||0,o=0,l=a,u,d=t.length;do{if(l>=d)throw read$5.bytes=0,new RangeError("Could not decode varint");u=t[l++],n+=o<28?(u&REST$1$2)<<o:(u&REST$1$2)*Math.pow(2,o),o+=7}while(u>=MSB$1$2);return read$5.bytes=l-a,n}var N1$2=Math.pow(2,7),N2$2=Math.pow(2,14),N3$2=Math.pow(2,21),N4$2=Math.pow(2,28),N5$2=Math.pow(2,35),N6$2=Math.pow(2,42),N7$2=Math.pow(2,49),N8$2=Math.pow(2,56),N9$2=Math.pow(2,63),length$2=function(t){return t<N1$2?1:t<N2$2?2:t<N3$2?3:t<N4$2?4:t<N5$2?5:t<N6$2?6:t<N7$2?7:t<N8$2?8:t<N9$2?9:10},varint$2={encode:encode_1$4,decode:decode$g,encodingLength:length$2},_brrp_varint$1=varint$2;const decode$f=(t,e=0)=>[_brrp_varint$1.decode(t,e),_brrp_varint$1.decode.bytes],encodeTo$1=(t,e,n=0)=>(_brrp_varint$1.encode(t,e,n),e),encodingLength$1=t=>_brrp_varint$1.encodingLength(t),create$1=(t,e)=>{const n=e.byteLength,a=encodingLength$1(t),o=a+encodingLength$1(n),l=new Uint8Array(o+n);return encodeTo$1(t,l,0),encodeTo$1(n,l,a),l.set(e,o),new Digest$1(t,n,e,l)},decode$e=t=>{const e=coerce$2(t),[n,a]=decode$f(e),[o,l]=decode$f(e.subarray(a)),u=e.subarray(a+l);if(u.byteLength!==o)throw new Error("Incorrect length");return new Digest$1(n,o,u,e)},equals$2=(t,e)=>t===e?!0:t.code===e.code&&t.size===e.size&&equals$3(t.bytes,e.bytes);let Digest$1=class{constructor(e,n,a,o){this.code=e,this.size=n,this.digest=a,this.bytes=o}};const from$2=({name:t,code:e,encode:n})=>new Hasher(t,e,n);class Hasher{constructor(e,n,a){this.name=e,this.code=n,this.encode=a}digest(e){if(e instanceof Uint8Array){const n=this.encode(e);return n instanceof Uint8Array?create$1(this.code,n):n.then(a=>create$1(this.code,a))}else throw Error("Unknown type, must be binary type")}}const sha=t=>async e=>new Uint8Array(await crypto.subtle.digest(t,e)),sha256$3=from$2({name:"sha2-256",code:18,encode:sha("SHA-256")});from$2({name:"sha2-512",code:19,encode:sha("SHA-512")});const code$4=0,name$2="identity",encode$f=coerce$2,digest=t=>create$1(code$4,encode$f(t)),identity$3={code:code$4,name:name$2,encode:encode$f,digest};new TextEncoder;new TextDecoder;let CID$1=class{constructor(e,n,a,o){this.code=n,this.version=e,this.multihash=a,this.bytes=o,this.byteOffset=o.byteOffset,this.byteLength=o.byteLength,this.asCID=this,this._baseCache=new Map,Object.defineProperties(this,{byteOffset:hidden,byteLength:hidden,code:readonly$1,version:readonly$1,multihash:readonly$1,bytes:readonly$1,_baseCache:hidden,asCID:hidden})}toV0(){switch(this.version){case 0:return this;default:{const{code:e,multihash:n}=this;if(e!==DAG_PB_CODE$1)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==SHA_256_CODE$1)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID$1.createV0(n)}}}toV1(){switch(this.version){case 0:{const{code:e,digest:n}=this.multihash,a=create$1(e,n);return CID$1.createV1(this.code,a)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}equals(e){return e&&this.code===e.code&&this.version===e.version&&equals$2(this.multihash,e.multihash)}toString(e){const{bytes:n,version:a,_baseCache:o}=this;switch(a){case 0:return toStringV0$1(n,o,e||base58btc$2.encoder);default:return toStringV1$1(n,o,e||base32$3.encoder)}}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return"CID("+this.toString()+")"}static isCID(e){return deprecate(/^0\.0/,IS_CID_DEPRECATION),!!(e&&(e[cidSymbol$1]||e.asCID===e))}get toBaseEncodedString(){throw new Error("Deprecated, use .toString()")}get codec(){throw new Error('"codec" property is deprecated, use integer "code" property instead')}get buffer(){throw new Error("Deprecated .buffer property, use .bytes to get Uint8Array instead")}get multibaseName(){throw new Error('"multibaseName" property is deprecated')}get prefix(){throw new Error('"prefix" property is deprecated')}static asCID(e){if(e instanceof CID$1)return e;if(e!=null&&e.asCID===e){const{version:n,code:a,multihash:o,bytes:l}=e;return new CID$1(n,a,o,l||encodeCID$1(n,a,o.bytes))}else if(e!=null&&e[cidSymbol$1]===!0){const{version:n,multihash:a,code:o}=e,l=decode$e(a);return CID$1.create(n,o,l)}else return null}static create(e,n,a){if(typeof n!="number")throw new Error("String codecs are no longer supported");switch(e){case 0:{if(n!==DAG_PB_CODE$1)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE$1}) block encoding`);return new CID$1(e,n,a,a.bytes)}case 1:{const o=encodeCID$1(e,n,a.bytes);return new CID$1(e,n,a,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID$1.create(0,DAG_PB_CODE$1,e)}static createV1(e,n){return CID$1.create(1,e,n)}static decode(e){const[n,a]=CID$1.decodeFirst(e);if(a.length)throw new Error("Incorrect length");return n}static decodeFirst(e){const n=CID$1.inspectBytes(e),a=n.size-n.multihashSize,o=coerce$2(e.subarray(a,a+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const l=o.subarray(n.multihashSize-n.digestSize),u=new Digest$1(n.multihashCode,n.digestSize,l,o);return[n.version===0?CID$1.createV0(u):CID$1.createV1(n.codec,u),e.subarray(n.size)]}static inspectBytes(e){let n=0;const a=()=>{const[_,w]=decode$f(e.subarray(n));return n+=w,_};let o=a(),l=DAG_PB_CODE$1;if(o===18?(o=0,n=0):o===1&&(l=a()),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const u=n,d=a(),m=a(),y=n+m,b=y-u;return{version:o,codec:l,multihashCode:d,digestSize:m,multihashSize:b,size:y}}static parse(e,n){const[a,o]=parseCIDtoBytes$1(e,n),l=CID$1.decode(o);return l._baseCache.set(a,e),l}};const parseCIDtoBytes$1=(t,e)=>{switch(t[0]){case"Q":{const n=e||base58btc$2;return[base58btc$2.prefix,n.decode(`${base58btc$2.prefix}${t}`)]}case base58btc$2.prefix:{const n=e||base58btc$2;return[base58btc$2.prefix,n.decode(t)]}case base32$3.prefix:{const n=e||base32$3;return[base32$3.prefix,n.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0$1=(t,e,n)=>{const{prefix:a}=n;if(a!==base58btc$2.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=e.get(a);if(o==null){const l=n.encode(t).slice(1);return e.set(a,l),l}else return o},toStringV1$1=(t,e,n)=>{const{prefix:a}=n,o=e.get(a);if(o==null){const l=n.encode(t);return e.set(a,l),l}else return o},DAG_PB_CODE$1=112,SHA_256_CODE$1=18,encodeCID$1=(t,e,n)=>{const a=encodingLength$1(t),o=a+encodingLength$1(e),l=new Uint8Array(o+n.byteLength);return encodeTo$1(t,l,0),encodeTo$1(e,l,a),l.set(n,o),l},cidSymbol$1=Symbol.for("@ipld/js-cid/CID"),readonly$1={writable:!1,configurable:!1,enumerable:!0},hidden={writable:!1,enumerable:!1,configurable:!1},version$j="0.0.0-dev",deprecate=(t,e)=>{if(t.test(version$j))console.warn(e);else throw new Error(e)},IS_CID_DEPRECATION=`CID.isCID(v) is deprecated and will be removed in the next major release.
Following code pattern:

if (CID.isCID(value)) {
  doSomethingWithCID(value)
}

Is replaced with:

const cid = CID.asCID(value)
if (cid) {
  // Make sure to use cid instead of value
  doSomethingWithCID(cid)
}
`,bases$1={...identityBase$1,...base2$3,...base8$3,...base10$3,...base16$3,...base32$4,...base36$3,...base58$1,...base64$5,...base256emoji$3};function createCodec$2(t,e,n,a){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:a}}}const string$1=createCodec$2("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii$1=createCodec$2("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=allocUnsafe$1(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BASES$1={utf8:string$1,"utf-8":string$1,hex:bases$1.base16,latin1:ascii$1,ascii:ascii$1,binary:ascii$1,...bases$1};function fromString$3(t,e="utf8"){const n=BASES$1[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array$1(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function toString$6(t,e="utf8"){const n=BASES$1[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}var sha256$2={},binary={},int={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});function e(d,m){var y=d>>>16&65535,b=d&65535,_=m>>>16&65535,w=m&65535;return b*w+(y*w+b*_<<16>>>0)|0}t.mul=Math.imul||e;function n(d,m){return d+m|0}t.add=n;function a(d,m){return d-m|0}t.sub=a;function o(d,m){return d<<m|d>>>32-m}t.rotl=o;function l(d,m){return d<<32-m|d>>>m}t.rotr=l;function u(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d}t.isInteger=Number.isInteger||u,t.MAX_SAFE_INTEGER=9007199254740991,t.isSafeInteger=function(d){return t.isInteger(d)&&d>=-t.MAX_SAFE_INTEGER&&d<=t.MAX_SAFE_INTEGER}})(int);Object.defineProperty(binary,"__esModule",{value:!0});var int_1=int;function readInt16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])<<16>>16}binary.readInt16BE=readInt16BE;function readUint16BE(t,e){return e===void 0&&(e=0),(t[e+0]<<8|t[e+1])>>>0}binary.readUint16BE=readUint16BE;function readInt16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])<<16>>16}binary.readInt16LE=readInt16LE;function readUint16LE(t,e){return e===void 0&&(e=0),(t[e+1]<<8|t[e])>>>0}binary.readUint16LE=readUint16LE;function writeUint16BE(t,e,n){return e===void 0&&(e=new Uint8Array(2)),n===void 0&&(n=0),e[n+0]=t>>>8,e[n+1]=t>>>0,e}binary.writeUint16BE=writeUint16BE;binary.writeInt16BE=writeUint16BE;function writeUint16LE(t,e,n){return e===void 0&&(e=new Uint8Array(2)),n===void 0&&(n=0),e[n+0]=t>>>0,e[n+1]=t>>>8,e}binary.writeUint16LE=writeUint16LE;binary.writeInt16LE=writeUint16LE;function readInt32BE(t,e){return e===void 0&&(e=0),t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}binary.readInt32BE=readInt32BE;function readUint32BE(t,e){return e===void 0&&(e=0),(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}binary.readUint32BE=readUint32BE;function readInt32LE(t,e){return e===void 0&&(e=0),t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]}binary.readInt32LE=readInt32LE;function readUint32LE(t,e){return e===void 0&&(e=0),(t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e])>>>0}binary.readUint32LE=readUint32LE;function writeUint32BE$1(t,e,n){return e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0),e[n+0]=t>>>24,e[n+1]=t>>>16,e[n+2]=t>>>8,e[n+3]=t>>>0,e}binary.writeUint32BE=writeUint32BE$1;binary.writeInt32BE=writeUint32BE$1;function writeUint32LE(t,e,n){return e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0),e[n+0]=t>>>0,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24,e}binary.writeUint32LE=writeUint32LE;binary.writeInt32LE=writeUint32LE;function readInt64BE$1(t,e){e===void 0&&(e=0);var n=readInt32BE(t,e),a=readInt32BE(t,e+4);return n*4294967296+a-(a>>31)*4294967296}binary.readInt64BE=readInt64BE$1;function readUint64BE(t,e){e===void 0&&(e=0);var n=readUint32BE(t,e),a=readUint32BE(t,e+4);return n*4294967296+a}binary.readUint64BE=readUint64BE;function readInt64LE(t,e){e===void 0&&(e=0);var n=readInt32LE(t,e),a=readInt32LE(t,e+4);return a*4294967296+n-(n>>31)*4294967296}binary.readInt64LE=readInt64LE;function readUint64LE(t,e){e===void 0&&(e=0);var n=readUint32LE(t,e),a=readUint32LE(t,e+4);return a*4294967296+n}binary.readUint64LE=readUint64LE;function writeUint64BE(t,e,n){return e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0),writeUint32BE$1(t/4294967296>>>0,e,n),writeUint32BE$1(t>>>0,e,n+4),e}binary.writeUint64BE=writeUint64BE;binary.writeInt64BE=writeUint64BE;function writeUint64LE(t,e,n){return e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0),writeUint32LE(t>>>0,e,n),writeUint32LE(t/4294967296>>>0,e,n+4),e}binary.writeUint64LE=writeUint64LE;binary.writeInt64LE=writeUint64LE;function readUintBE(t,e,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintBE supports only bitLengths divisible by 8");if(t/8>e.length-n)throw new Error("readUintBE: array is too short for the given bitLength");for(var a=0,o=1,l=t/8+n-1;l>=n;l--)a+=e[l]*o,o*=256;return a}binary.readUintBE=readUintBE;function readUintLE(t,e,n){if(n===void 0&&(n=0),t%8!==0)throw new Error("readUintLE supports only bitLengths divisible by 8");if(t/8>e.length-n)throw new Error("readUintLE: array is too short for the given bitLength");for(var a=0,o=1,l=n;l<n+t/8;l++)a+=e[l]*o,o*=256;return a}binary.readUintLE=readUintLE;function writeUintBE(t,e,n,a){if(n===void 0&&(n=new Uint8Array(t/8)),a===void 0&&(a=0),t%8!==0)throw new Error("writeUintBE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintBE value must be an integer");for(var o=1,l=t/8+a-1;l>=a;l--)n[l]=e/o&255,o*=256;return n}binary.writeUintBE=writeUintBE;function writeUintLE(t,e,n,a){if(n===void 0&&(n=new Uint8Array(t/8)),a===void 0&&(a=0),t%8!==0)throw new Error("writeUintLE supports only bitLengths divisible by 8");if(!int_1.isSafeInteger(e))throw new Error("writeUintLE value must be an integer");for(var o=1,l=a;l<a+t/8;l++)n[l]=e/o&255,o*=256;return n}binary.writeUintLE=writeUintLE;function readFloat32BE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(e)}binary.readFloat32BE=readFloat32BE;function readFloat32LE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat32(e,!0)}binary.readFloat32LE=readFloat32LE;function readFloat64BE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(e)}binary.readFloat64BE=readFloat64BE;function readFloat64LE(t,e){e===void 0&&(e=0);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return n.getFloat64(e,!0)}binary.readFloat64LE=readFloat64LE;function writeFloat32BE(t,e,n){e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat32(n,t),e}binary.writeFloat32BE=writeFloat32BE;function writeFloat32LE(t,e,n){e===void 0&&(e=new Uint8Array(4)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat32(n,t,!0),e}binary.writeFloat32LE=writeFloat32LE;function writeFloat64BE(t,e,n){e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat64(n,t),e}binary.writeFloat64BE=writeFloat64BE;function writeFloat64LE(t,e,n){e===void 0&&(e=new Uint8Array(8)),n===void 0&&(n=0);var a=new DataView(e.buffer,e.byteOffset,e.byteLength);return a.setFloat64(n,t,!0),e}binary.writeFloat64LE=writeFloat64LE;var wipe$1={};Object.defineProperty(wipe$1,"__esModule",{value:!0});function wipe(t){for(var e=0;e<t.length;e++)t[e]=0;return t}wipe$1.wipe=wipe;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,n=wipe$1;t.DIGEST_LENGTH=32,t.BLOCK_SIZE=64;var a=function(){function d(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._state=new Int32Array(8),this._temp=new Int32Array(64),this._buffer=new Uint8Array(128),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._state[0]=1779033703,this._state[1]=3144134277,this._state[2]=1013904242,this._state[3]=2773480762,this._state[4]=1359893119,this._state[5]=2600822924,this._state[6]=528734635,this._state[7]=1541459225},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._temp),this.reset()},d.prototype.update=function(m,y){if(y===void 0&&(y=m.length),this._finished)throw new Error("SHA256: can't update because hash was finished.");var b=0;if(this._bytesHashed+=y,this._bufferLength>0){for(;this._bufferLength<this.blockSize&&y>0;)this._buffer[this._bufferLength++]=m[b++],y--;this._bufferLength===this.blockSize&&(l(this._temp,this._state,this._buffer,0,this.blockSize),this._bufferLength=0)}for(y>=this.blockSize&&(b=l(this._temp,this._state,m,b,y),y%=this.blockSize);y>0;)this._buffer[this._bufferLength++]=m[b++],y--;return this},d.prototype.finish=function(m){if(!this._finished){var y=this._bytesHashed,b=this._bufferLength,_=y/536870912|0,w=y<<3,E=y%64<56?64:128;this._buffer[b]=128;for(var A=b+1;A<E-8;A++)this._buffer[A]=0;e.writeUint32BE(_,this._buffer,E-8),e.writeUint32BE(w,this._buffer,E-4),l(this._temp,this._state,this._buffer,0,E),this._finished=!0}for(var A=0;A<this.digestLength/4;A++)e.writeUint32BE(this._state[A],m,A*4);return this},d.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{state:new Int32Array(this._state),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(m){return this._state.set(m.state),this._bufferLength=m.bufferLength,m.buffer&&this._buffer.set(m.buffer),this._bytesHashed=m.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(m){n.wipe(m.state),m.buffer&&n.wipe(m.buffer),m.bufferLength=0,m.bytesHashed=0},d}();t.SHA256=a;var o=new Int32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function l(d,m,y,b,_){for(;_>=64;){for(var w=m[0],E=m[1],A=m[2],C=m[3],k=m[4],B=m[5],D=m[6],q=m[7],j=0;j<16;j++){var J=b+j*4;d[j]=e.readUint32BE(y,J)}for(var j=16;j<64;j++){var Y=d[j-2],L=(Y>>>17|Y<<32-17)^(Y>>>19|Y<<32-19)^Y>>>10;Y=d[j-15];var Z=(Y>>>7|Y<<32-7)^(Y>>>18|Y<<32-18)^Y>>>3;d[j]=(L+d[j-7]|0)+(Z+d[j-16]|0)}for(var j=0;j<64;j++){var L=(((k>>>6|k<<26)^(k>>>11|k<<21)^(k>>>25|k<<7))+(k&B^~k&D)|0)+(q+(o[j]+d[j]|0)|0)|0,Z=((w>>>2|w<<32-2)^(w>>>13|w<<32-13)^(w>>>22|w<<32-22))+(w&E^w&A^E&A)|0;q=D,D=B,B=k,k=C+L|0,C=A,A=E,E=w,w=L+Z|0}m[0]+=w,m[1]+=E,m[2]+=A,m[3]+=C,m[4]+=k,m[5]+=B,m[6]+=D,m[7]+=q,b+=64,_-=64}return b}function u(d){var m=new a;m.update(d);var y=m.digest();return m.clean(),y}t.hash=u})(sha256$2);var sha3Exports={},sha3$1={get exports(){return sha3Exports},set exports(t){sha3Exports=t}};(function(t){(function(){var e="input is invalid type",n="finalize already called",a=typeof window=="object",o=a?window:{};o.JS_SHA3_NO_WINDOW&&(a=!1);var l=!a&&typeof self=="object",u=!o.JS_SHA3_NO_NODE_JS&&typeof browser$1$1=="object"&&browser$1$1.versions&&browser$1$1.versions.node;u?o=commonjsGlobal:l&&(o=self);var d=!o.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,m=!o.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",y="0123456789abcdef".split(""),b=[31,7936,2031616,520093696],_=[4,1024,262144,67108864],w=[1,256,65536,16777216],E=[6,1536,393216,100663296],A=[0,8,16,24],C=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],k=[224,256,384,512],B=[128,256],D=["hex","buffer","arrayBuffer","array","digest"],q={128:168,256:136};(o.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(ee){return Object.prototype.toString.call(ee)==="[object Array]"}),m&&(o.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(ee){return typeof ee=="object"&&ee.buffer&&ee.buffer.constructor===ArrayBuffer});for(var j=function(ee,fe,le){return function(ce){return new S(ee,fe,ee).update(ce)[le]()}},J=function(ee,fe,le){return function(ce,pe){return new S(ee,fe,pe).update(ce)[le]()}},Y=function(ee,fe,le){return function(ce,pe,se,de){return x["cshake"+ee].update(ce,pe,se,de)[le]()}},L=function(ee,fe,le){return function(ce,pe,se,de){return x["kmac"+ee].update(ce,pe,se,de)[le]()}},Z=function(ee,fe,le,ce){for(var pe=0;pe<D.length;++pe){var se=D[pe];ee[se]=fe(le,ce,se)}return ee},Q=function(ee,fe){var le=j(ee,fe,"hex");return le.create=function(){return new S(ee,fe,ee)},le.update=function(ce){return le.create().update(ce)},Z(le,j,ee,fe)},oe=function(ee,fe){var le=J(ee,fe,"hex");return le.create=function(ce){return new S(ee,fe,ce)},le.update=function(ce,pe){return le.create(pe).update(ce)},Z(le,J,ee,fe)},ae=function(ee,fe){var le=q[ee],ce=Y(ee,fe,"hex");return ce.create=function(pe,se,de){return!se&&!de?x["shake"+ee].create(pe):new S(ee,fe,pe).bytepad([se,de],le)},ce.update=function(pe,se,de,re){return ce.create(se,de,re).update(pe)},Z(ce,Y,ee,fe)},U=function(ee,fe){var le=q[ee],ce=L(ee,fe,"hex");return ce.create=function(pe,se,de){return new F(ee,fe,se).bytepad(["KMAC",de],le).bytepad([pe],le)},ce.update=function(pe,se,de,re){return ce.create(pe,de,re).update(se)},Z(ce,L,ee,fe)},I=[{name:"keccak",padding:w,bits:k,createMethod:Q},{name:"sha3",padding:E,bits:k,createMethod:Q},{name:"shake",padding:b,bits:B,createMethod:oe},{name:"cshake",padding:_,bits:B,createMethod:ae},{name:"kmac",padding:_,bits:B,createMethod:U}],x={},T=[],M=0;M<I.length;++M)for(var O=I[M],z=O.bits,X=0;X<z.length;++X){var H=O.name+"_"+z[X];if(T.push(H),x[H]=O.createMethod(z[X],O.padding),O.name!=="sha3"){var P=O.name+z[X];T.push(P),x[P]=x[H]}}function S(ee,fe,le){this.blocks=[],this.s=[],this.padding=fe,this.outputBits=le,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(ee<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=le>>5,this.extraBytes=(le&31)>>3;for(var ce=0;ce<50;++ce)this.s[ce]=0}S.prototype.update=function(ee){if(this.finalized)throw new Error(n);var fe,le=typeof ee;if(le!=="string"){if(le==="object"){if(ee===null)throw new Error(e);if(m&&ee.constructor===ArrayBuffer)ee=new Uint8Array(ee);else if(!Array.isArray(ee)&&(!m||!ArrayBuffer.isView(ee)))throw new Error(e)}else throw new Error(e);fe=!0}for(var ce=this.blocks,pe=this.byteCount,se=ee.length,de=this.blockCount,re=0,me=this.s,te,ve;re<se;){if(this.reset)for(this.reset=!1,ce[0]=this.block,te=1;te<de+1;++te)ce[te]=0;if(fe)for(te=this.start;re<se&&te<pe;++re)ce[te>>2]|=ee[re]<<A[te++&3];else for(te=this.start;re<se&&te<pe;++re)ve=ee.charCodeAt(re),ve<128?ce[te>>2]|=ve<<A[te++&3]:ve<2048?(ce[te>>2]|=(192|ve>>6)<<A[te++&3],ce[te>>2]|=(128|ve&63)<<A[te++&3]):ve<55296||ve>=57344?(ce[te>>2]|=(224|ve>>12)<<A[te++&3],ce[te>>2]|=(128|ve>>6&63)<<A[te++&3],ce[te>>2]|=(128|ve&63)<<A[te++&3]):(ve=65536+((ve&1023)<<10|ee.charCodeAt(++re)&1023),ce[te>>2]|=(240|ve>>18)<<A[te++&3],ce[te>>2]|=(128|ve>>12&63)<<A[te++&3],ce[te>>2]|=(128|ve>>6&63)<<A[te++&3],ce[te>>2]|=(128|ve&63)<<A[te++&3]);if(this.lastByteIndex=te,te>=pe){for(this.start=te-pe,this.block=ce[de],te=0;te<de;++te)me[te]^=ce[te];ue(me),this.reset=!0}else this.start=te}return this},S.prototype.encode=function(ee,fe){var le=ee&255,ce=1,pe=[le];for(ee=ee>>8,le=ee&255;le>0;)pe.unshift(le),ee=ee>>8,le=ee&255,++ce;return fe?pe.push(ce):pe.unshift(ce),this.update(pe),pe.length},S.prototype.encodeString=function(ee){var fe,le=typeof ee;if(le!=="string"){if(le==="object"){if(ee===null)throw new Error(e);if(m&&ee.constructor===ArrayBuffer)ee=new Uint8Array(ee);else if(!Array.isArray(ee)&&(!m||!ArrayBuffer.isView(ee)))throw new Error(e)}else throw new Error(e);fe=!0}var ce=0,pe=ee.length;if(fe)ce=pe;else for(var se=0;se<ee.length;++se){var de=ee.charCodeAt(se);de<128?ce+=1:de<2048?ce+=2:de<55296||de>=57344?ce+=3:(de=65536+((de&1023)<<10|ee.charCodeAt(++se)&1023),ce+=4)}return ce+=this.encode(ce*8),this.update(ee),ce},S.prototype.bytepad=function(ee,fe){for(var le=this.encode(fe),ce=0;ce<ee.length;++ce)le+=this.encodeString(ee[ce]);var pe=fe-le%fe,se=[];return se.length=pe,this.update(se),this},S.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var ee=this.blocks,fe=this.lastByteIndex,le=this.blockCount,ce=this.s;if(ee[fe>>2]|=this.padding[fe&3],this.lastByteIndex===this.byteCount)for(ee[0]=ee[le],fe=1;fe<le+1;++fe)ee[fe]=0;for(ee[le-1]|=2147483648,fe=0;fe<le;++fe)ce[fe]^=ee[fe];ue(ce)}},S.prototype.toString=S.prototype.hex=function(){this.finalize();for(var ee=this.blockCount,fe=this.s,le=this.outputBlocks,ce=this.extraBytes,pe=0,se=0,de="",re;se<le;){for(pe=0;pe<ee&&se<le;++pe,++se)re=fe[pe],de+=y[re>>4&15]+y[re&15]+y[re>>12&15]+y[re>>8&15]+y[re>>20&15]+y[re>>16&15]+y[re>>28&15]+y[re>>24&15];se%ee===0&&(ue(fe),pe=0)}return ce&&(re=fe[pe],de+=y[re>>4&15]+y[re&15],ce>1&&(de+=y[re>>12&15]+y[re>>8&15]),ce>2&&(de+=y[re>>20&15]+y[re>>16&15])),de},S.prototype.arrayBuffer=function(){this.finalize();var ee=this.blockCount,fe=this.s,le=this.outputBlocks,ce=this.extraBytes,pe=0,se=0,de=this.outputBits>>3,re;ce?re=new ArrayBuffer(le+1<<2):re=new ArrayBuffer(de);for(var me=new Uint32Array(re);se<le;){for(pe=0;pe<ee&&se<le;++pe,++se)me[se]=fe[pe];se%ee===0&&ue(fe)}return ce&&(me[pe]=fe[pe],re=re.slice(0,de)),re},S.prototype.buffer=S.prototype.arrayBuffer,S.prototype.digest=S.prototype.array=function(){this.finalize();for(var ee=this.blockCount,fe=this.s,le=this.outputBlocks,ce=this.extraBytes,pe=0,se=0,de=[],re,me;se<le;){for(pe=0;pe<ee&&se<le;++pe,++se)re=se<<2,me=fe[pe],de[re]=me&255,de[re+1]=me>>8&255,de[re+2]=me>>16&255,de[re+3]=me>>24&255;se%ee===0&&ue(fe)}return ce&&(re=se<<2,me=fe[pe],de[re]=me&255,ce>1&&(de[re+1]=me>>8&255),ce>2&&(de[re+2]=me>>16&255)),de};function F(ee,fe,le){S.call(this,ee,fe,le)}F.prototype=new S,F.prototype.finalize=function(){return this.encode(this.outputBits,!0),S.prototype.finalize.call(this)};var ue=function(ee){var fe,le,ce,pe,se,de,re,me,te,ve,Se,be,_e,ye,$e,Ie,Be,Me,Fe,Ve,Oe,ge,ie,he,we,Re,De,Le,tt,We,Ge,_t,rt,ot,Rt,xt,ht,Tt,dt,it,Ct,pt,at,kt,mt,nt,Bt,Ee,ke,Pe,ne,xe,Te,Ae,Ce,Ne,Ue,je,Ke,He,ze,Ye,Qe;for(ce=0;ce<48;ce+=2)pe=ee[0]^ee[10]^ee[20]^ee[30]^ee[40],se=ee[1]^ee[11]^ee[21]^ee[31]^ee[41],de=ee[2]^ee[12]^ee[22]^ee[32]^ee[42],re=ee[3]^ee[13]^ee[23]^ee[33]^ee[43],me=ee[4]^ee[14]^ee[24]^ee[34]^ee[44],te=ee[5]^ee[15]^ee[25]^ee[35]^ee[45],ve=ee[6]^ee[16]^ee[26]^ee[36]^ee[46],Se=ee[7]^ee[17]^ee[27]^ee[37]^ee[47],be=ee[8]^ee[18]^ee[28]^ee[38]^ee[48],_e=ee[9]^ee[19]^ee[29]^ee[39]^ee[49],fe=be^(de<<1|re>>>31),le=_e^(re<<1|de>>>31),ee[0]^=fe,ee[1]^=le,ee[10]^=fe,ee[11]^=le,ee[20]^=fe,ee[21]^=le,ee[30]^=fe,ee[31]^=le,ee[40]^=fe,ee[41]^=le,fe=pe^(me<<1|te>>>31),le=se^(te<<1|me>>>31),ee[2]^=fe,ee[3]^=le,ee[12]^=fe,ee[13]^=le,ee[22]^=fe,ee[23]^=le,ee[32]^=fe,ee[33]^=le,ee[42]^=fe,ee[43]^=le,fe=de^(ve<<1|Se>>>31),le=re^(Se<<1|ve>>>31),ee[4]^=fe,ee[5]^=le,ee[14]^=fe,ee[15]^=le,ee[24]^=fe,ee[25]^=le,ee[34]^=fe,ee[35]^=le,ee[44]^=fe,ee[45]^=le,fe=me^(be<<1|_e>>>31),le=te^(_e<<1|be>>>31),ee[6]^=fe,ee[7]^=le,ee[16]^=fe,ee[17]^=le,ee[26]^=fe,ee[27]^=le,ee[36]^=fe,ee[37]^=le,ee[46]^=fe,ee[47]^=le,fe=ve^(pe<<1|se>>>31),le=Se^(se<<1|pe>>>31),ee[8]^=fe,ee[9]^=le,ee[18]^=fe,ee[19]^=le,ee[28]^=fe,ee[29]^=le,ee[38]^=fe,ee[39]^=le,ee[48]^=fe,ee[49]^=le,ye=ee[0],$e=ee[1],nt=ee[11]<<4|ee[10]>>>28,Bt=ee[10]<<4|ee[11]>>>28,Le=ee[20]<<3|ee[21]>>>29,tt=ee[21]<<3|ee[20]>>>29,He=ee[31]<<9|ee[30]>>>23,ze=ee[30]<<9|ee[31]>>>23,pt=ee[40]<<18|ee[41]>>>14,at=ee[41]<<18|ee[40]>>>14,ot=ee[2]<<1|ee[3]>>>31,Rt=ee[3]<<1|ee[2]>>>31,Ie=ee[13]<<12|ee[12]>>>20,Be=ee[12]<<12|ee[13]>>>20,Ee=ee[22]<<10|ee[23]>>>22,ke=ee[23]<<10|ee[22]>>>22,We=ee[33]<<13|ee[32]>>>19,Ge=ee[32]<<13|ee[33]>>>19,Ye=ee[42]<<2|ee[43]>>>30,Qe=ee[43]<<2|ee[42]>>>30,Ae=ee[5]<<30|ee[4]>>>2,Ce=ee[4]<<30|ee[5]>>>2,xt=ee[14]<<6|ee[15]>>>26,ht=ee[15]<<6|ee[14]>>>26,Me=ee[25]<<11|ee[24]>>>21,Fe=ee[24]<<11|ee[25]>>>21,Pe=ee[34]<<15|ee[35]>>>17,ne=ee[35]<<15|ee[34]>>>17,_t=ee[45]<<29|ee[44]>>>3,rt=ee[44]<<29|ee[45]>>>3,he=ee[6]<<28|ee[7]>>>4,we=ee[7]<<28|ee[6]>>>4,Ne=ee[17]<<23|ee[16]>>>9,Ue=ee[16]<<23|ee[17]>>>9,Tt=ee[26]<<25|ee[27]>>>7,dt=ee[27]<<25|ee[26]>>>7,Ve=ee[36]<<21|ee[37]>>>11,Oe=ee[37]<<21|ee[36]>>>11,xe=ee[47]<<24|ee[46]>>>8,Te=ee[46]<<24|ee[47]>>>8,kt=ee[8]<<27|ee[9]>>>5,mt=ee[9]<<27|ee[8]>>>5,Re=ee[18]<<20|ee[19]>>>12,De=ee[19]<<20|ee[18]>>>12,je=ee[29]<<7|ee[28]>>>25,Ke=ee[28]<<7|ee[29]>>>25,it=ee[38]<<8|ee[39]>>>24,Ct=ee[39]<<8|ee[38]>>>24,ge=ee[48]<<14|ee[49]>>>18,ie=ee[49]<<14|ee[48]>>>18,ee[0]=ye^~Ie&Me,ee[1]=$e^~Be&Fe,ee[10]=he^~Re&Le,ee[11]=we^~De&tt,ee[20]=ot^~xt&Tt,ee[21]=Rt^~ht&dt,ee[30]=kt^~nt&Ee,ee[31]=mt^~Bt&ke,ee[40]=Ae^~Ne&je,ee[41]=Ce^~Ue&Ke,ee[2]=Ie^~Me&Ve,ee[3]=Be^~Fe&Oe,ee[12]=Re^~Le&We,ee[13]=De^~tt&Ge,ee[22]=xt^~Tt&it,ee[23]=ht^~dt&Ct,ee[32]=nt^~Ee&Pe,ee[33]=Bt^~ke&ne,ee[42]=Ne^~je&He,ee[43]=Ue^~Ke&ze,ee[4]=Me^~Ve&ge,ee[5]=Fe^~Oe&ie,ee[14]=Le^~We&_t,ee[15]=tt^~Ge&rt,ee[24]=Tt^~it&pt,ee[25]=dt^~Ct&at,ee[34]=Ee^~Pe&xe,ee[35]=ke^~ne&Te,ee[44]=je^~He&Ye,ee[45]=Ke^~ze&Qe,ee[6]=Ve^~ge&ye,ee[7]=Oe^~ie&$e,ee[16]=We^~_t&he,ee[17]=Ge^~rt&we,ee[26]=it^~pt&ot,ee[27]=Ct^~at&Rt,ee[36]=Pe^~xe&kt,ee[37]=ne^~Te&mt,ee[46]=He^~Ye&Ae,ee[47]=ze^~Qe&Ce,ee[8]=ge^~ye&Ie,ee[9]=ie^~$e&Be,ee[18]=_t^~he&Re,ee[19]=rt^~we&De,ee[28]=pt^~ot&xt,ee[29]=at^~Rt&ht,ee[38]=xe^~kt&nt,ee[39]=Te^~mt&Bt,ee[48]=Ye^~Ae&Ne,ee[49]=Qe^~Ce&Ue,ee[0]^=C[ce],ee[1]^=C[ce+1]};if(d)t.exports=x;else for(M=0;M<T.length;++M)o[T[M]]=x[T[M]]})()})(sha3$1);const sha3=sha3Exports;var ed25519={},random={},system={},browser$4={};Object.defineProperty(browser$4,"__esModule",{value:!0});browser$4.BrowserRandomSource=void 0;const QUOTA=65536;class BrowserRandomSource{constructor(){this.isAvailable=!1,this.isInstantiated=!1;const e=typeof self<"u"?self.crypto||self.msCrypto:null;e&&e.getRandomValues!==void 0&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Browser random byte generator is not available.");const n=new Uint8Array(e);for(let a=0;a<n.length;a+=QUOTA)this._crypto.getRandomValues(n.subarray(a,a+Math.min(n.length-a,QUOTA)));return n}}browser$4.BrowserRandomSource=BrowserRandomSource;function commonjsRequire$1(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var node={};Object.defineProperty(node,"__esModule",{value:!0});node.NodeRandomSource=void 0;const wipe_1$2=wipe$1;class NodeRandomSource{constructor(){if(this.isAvailable=!1,this.isInstantiated=!1,typeof commonjsRequire$1<"u"){const e=requireCryptoBrowserify();e&&e.randomBytes&&(this._crypto=e,this.isAvailable=!0,this.isInstantiated=!0)}}randomBytes(e){if(!this.isAvailable||!this._crypto)throw new Error("Node.js random byte generator is not available.");let n=this._crypto.randomBytes(e);if(n.length!==e)throw new Error("NodeRandomSource: got fewer bytes than requested");const a=new Uint8Array(e);for(let o=0;o<a.length;o++)a[o]=n[o];return(0,wipe_1$2.wipe)(n),a}}node.NodeRandomSource=NodeRandomSource;Object.defineProperty(system,"__esModule",{value:!0});system.SystemRandomSource=void 0;const browser_1=browser$4,node_1=node;class SystemRandomSource{constructor(){if(this.isAvailable=!1,this.name="",this._source=new browser_1.BrowserRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Browser";return}if(this._source=new node_1.NodeRandomSource,this._source.isAvailable){this.isAvailable=!0,this.name="Node";return}}randomBytes(e){if(!this.isAvailable)throw new Error("System random byte generator is not available.");return this._source.randomBytes(e)}}system.SystemRandomSource=SystemRandomSource;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.randomStringForEntropy=t.randomString=t.randomUint32=t.randomBytes=t.defaultRandomSource=void 0;const e=system,n=binary,a=wipe$1;t.defaultRandomSource=new e.SystemRandomSource;function o(y,b=t.defaultRandomSource){return b.randomBytes(y)}t.randomBytes=o;function l(y=t.defaultRandomSource){const b=o(4,y),_=(0,n.readUint32LE)(b);return(0,a.wipe)(b),_}t.randomUint32=l;const u="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function d(y,b=u,_=t.defaultRandomSource){if(b.length<2)throw new Error("randomString charset is too short");if(b.length>256)throw new Error("randomString charset is too long");let w="";const E=b.length,A=256-256%E;for(;y>0;){const C=o(Math.ceil(y*256/A),_);for(let k=0;k<C.length&&y>0;k++){const B=C[k];B<A&&(w+=b.charAt(B%E),y--)}(0,a.wipe)(C)}return w}t.randomString=d;function m(y,b=u,_=t.defaultRandomSource){const w=Math.ceil(y/(Math.log(b.length)/Math.LN2));return d(w,b,_)}t.randomStringForEntropy=m})(random);var sha512={};(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=binary,n=wipe$1;t.DIGEST_LENGTH=64,t.BLOCK_SIZE=128;var a=function(){function d(){this.digestLength=t.DIGEST_LENGTH,this.blockSize=t.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return d.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},d.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},d.prototype.clean=function(){n.wipe(this._buffer),n.wipe(this._tempHi),n.wipe(this._tempLo),this.reset()},d.prototype.update=function(m,y){if(y===void 0&&(y=m.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var b=0;if(this._bytesHashed+=y,this._bufferLength>0){for(;this._bufferLength<t.BLOCK_SIZE&&y>0;)this._buffer[this._bufferLength++]=m[b++],y--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(y>=this.blockSize&&(b=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,m,b,y),y%=this.blockSize);y>0;)this._buffer[this._bufferLength++]=m[b++],y--;return this},d.prototype.finish=function(m){if(!this._finished){var y=this._bytesHashed,b=this._bufferLength,_=y/536870912|0,w=y<<3,E=y%128<112?128:256;this._buffer[b]=128;for(var A=b+1;A<E-8;A++)this._buffer[A]=0;e.writeUint32BE(_,this._buffer,E-8),e.writeUint32BE(w,this._buffer,E-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,E),this._finished=!0}for(var A=0;A<this.digestLength/8;A++)e.writeUint32BE(this._stateHi[A],m,A*8),e.writeUint32BE(this._stateLo[A],m,A*8+4);return this},d.prototype.digest=function(){var m=new Uint8Array(this.digestLength);return this.finish(m),m},d.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},d.prototype.restoreState=function(m){return this._stateHi.set(m.stateHi),this._stateLo.set(m.stateLo),this._bufferLength=m.bufferLength,m.buffer&&this._buffer.set(m.buffer),this._bytesHashed=m.bytesHashed,this._finished=!1,this},d.prototype.cleanSavedState=function(m){n.wipe(m.stateHi),n.wipe(m.stateLo),m.buffer&&n.wipe(m.buffer),m.bufferLength=0,m.bytesHashed=0},d}();t.SHA512=a;var o=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(d,m,y,b,_,w,E){for(var A=y[0],C=y[1],k=y[2],B=y[3],D=y[4],q=y[5],j=y[6],J=y[7],Y=b[0],L=b[1],Z=b[2],Q=b[3],oe=b[4],ae=b[5],U=b[6],I=b[7],x,T,M,O,z,X,H,P;E>=128;){for(var S=0;S<16;S++){var F=8*S+w;d[S]=e.readUint32BE(_,F),m[S]=e.readUint32BE(_,F+4)}for(var S=0;S<80;S++){var ue=A,ee=C,fe=k,le=B,ce=D,pe=q,se=j,de=J,re=Y,me=L,te=Z,ve=Q,Se=oe,be=ae,_e=U,ye=I;if(x=J,T=I,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=(D>>>14|oe<<32-14)^(D>>>18|oe<<32-18)^(oe>>>41-32|D<<32-(41-32)),T=(oe>>>14|D<<32-14)^(oe>>>18|D<<32-18)^(D>>>41-32|oe<<32-(41-32)),z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,x=D&q^~D&j,T=oe&ae^~oe&U,z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,x=o[S*2],T=o[S*2+1],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,x=d[S%16],T=m[S%16],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,M=H&65535|P<<16,O=z&65535|X<<16,x=M,T=O,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=(A>>>28|Y<<32-28)^(Y>>>34-32|A<<32-(34-32))^(Y>>>39-32|A<<32-(39-32)),T=(Y>>>28|A<<32-28)^(A>>>34-32|Y<<32-(34-32))^(A>>>39-32|Y<<32-(39-32)),z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,x=A&C^A&k^C&k,T=Y&L^Y&Z^L&Z,z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,de=H&65535|P<<16,ye=z&65535|X<<16,x=le,T=ve,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=M,T=O,z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,le=H&65535|P<<16,ve=z&65535|X<<16,C=ue,k=ee,B=fe,D=le,q=ce,j=pe,J=se,A=de,L=re,Z=me,Q=te,oe=ve,ae=Se,U=be,I=_e,Y=ye,S%16===15)for(var F=0;F<16;F++)x=d[F],T=m[F],z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=d[(F+9)%16],T=m[(F+9)%16],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,M=d[(F+1)%16],O=m[(F+1)%16],x=(M>>>1|O<<32-1)^(M>>>8|O<<32-8)^M>>>7,T=(O>>>1|M<<32-1)^(O>>>8|M<<32-8)^(O>>>7|M<<32-7),z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,M=d[(F+14)%16],O=m[(F+14)%16],x=(M>>>19|O<<32-19)^(O>>>61-32|M<<32-(61-32))^M>>>6,T=(O>>>19|M<<32-19)^(M>>>61-32|O<<32-(61-32))^(O>>>6|M<<32-6),z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,d[F]=H&65535|P<<16,m[F]=z&65535|X<<16}x=A,T=Y,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=y[0],T=b[0],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,y[0]=A=H&65535|P<<16,b[0]=Y=z&65535|X<<16,x=C,T=L,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=y[1],T=b[1],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,y[1]=C=H&65535|P<<16,b[1]=L=z&65535|X<<16,x=k,T=Z,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=y[2],T=b[2],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,y[2]=k=H&65535|P<<16,b[2]=Z=z&65535|X<<16,x=B,T=Q,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=y[3],T=b[3],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,y[3]=B=H&65535|P<<16,b[3]=Q=z&65535|X<<16,x=D,T=oe,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=y[4],T=b[4],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,y[4]=D=H&65535|P<<16,b[4]=oe=z&65535|X<<16,x=q,T=ae,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=y[5],T=b[5],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,y[5]=q=H&65535|P<<16,b[5]=ae=z&65535|X<<16,x=j,T=U,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=y[6],T=b[6],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,y[6]=j=H&65535|P<<16,b[6]=U=z&65535|X<<16,x=J,T=I,z=T&65535,X=T>>>16,H=x&65535,P=x>>>16,x=y[7],T=b[7],z+=T&65535,X+=T>>>16,H+=x&65535,P+=x>>>16,X+=z>>>16,H+=X>>>16,P+=H>>>16,y[7]=J=H&65535|P<<16,b[7]=I=z&65535|X<<16,w+=128,E-=128}return w}function u(d){var m=new a;m.update(d);var y=m.digest();return m.clean(),y}t.hash=u})(sha512);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.convertSecretKeyToX25519=t.convertPublicKeyToX25519=t.verify=t.sign=t.extractPublicKeyFromSecretKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.SEED_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=t.SIGNATURE_LENGTH=void 0;const e=random,n=sha512,a=wipe$1;t.SIGNATURE_LENGTH=64,t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=64,t.SEED_LENGTH=32;function o(le){const ce=new Float64Array(16);if(le)for(let pe=0;pe<le.length;pe++)ce[pe]=le[pe];return ce}const l=new Uint8Array(32);l[0]=9;const u=o(),d=o([1]),m=o([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),y=o([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),b=o([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),_=o([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),w=o([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function E(le,ce){for(let pe=0;pe<16;pe++)le[pe]=ce[pe]|0}function A(le){let ce=1;for(let pe=0;pe<16;pe++){let se=le[pe]+ce+65535;ce=Math.floor(se/65536),le[pe]=se-ce*65536}le[0]+=ce-1+37*(ce-1)}function C(le,ce,pe){const se=~(pe-1);for(let de=0;de<16;de++){const re=se&(le[de]^ce[de]);le[de]^=re,ce[de]^=re}}function k(le,ce){const pe=o(),se=o();for(let de=0;de<16;de++)se[de]=ce[de];A(se),A(se),A(se);for(let de=0;de<2;de++){pe[0]=se[0]-65517;for(let me=1;me<15;me++)pe[me]=se[me]-65535-(pe[me-1]>>16&1),pe[me-1]&=65535;pe[15]=se[15]-32767-(pe[14]>>16&1);const re=pe[15]>>16&1;pe[14]&=65535,C(se,pe,1-re)}for(let de=0;de<16;de++)le[2*de]=se[de]&255,le[2*de+1]=se[de]>>8}function B(le,ce){let pe=0;for(let se=0;se<32;se++)pe|=le[se]^ce[se];return(1&pe-1>>>8)-1}function D(le,ce){const pe=new Uint8Array(32),se=new Uint8Array(32);return k(pe,le),k(se,ce),B(pe,se)}function q(le){const ce=new Uint8Array(32);return k(ce,le),ce[0]&1}function j(le,ce){for(let pe=0;pe<16;pe++)le[pe]=ce[2*pe]+(ce[2*pe+1]<<8);le[15]&=32767}function J(le,ce,pe){for(let se=0;se<16;se++)le[se]=ce[se]+pe[se]}function Y(le,ce,pe){for(let se=0;se<16;se++)le[se]=ce[se]-pe[se]}function L(le,ce,pe){let se,de,re=0,me=0,te=0,ve=0,Se=0,be=0,_e=0,ye=0,$e=0,Ie=0,Be=0,Me=0,Fe=0,Ve=0,Oe=0,ge=0,ie=0,he=0,we=0,Re=0,De=0,Le=0,tt=0,We=0,Ge=0,_t=0,rt=0,ot=0,Rt=0,xt=0,ht=0,Tt=pe[0],dt=pe[1],it=pe[2],Ct=pe[3],pt=pe[4],at=pe[5],kt=pe[6],mt=pe[7],nt=pe[8],Bt=pe[9],Ee=pe[10],ke=pe[11],Pe=pe[12],ne=pe[13],xe=pe[14],Te=pe[15];se=ce[0],re+=se*Tt,me+=se*dt,te+=se*it,ve+=se*Ct,Se+=se*pt,be+=se*at,_e+=se*kt,ye+=se*mt,$e+=se*nt,Ie+=se*Bt,Be+=se*Ee,Me+=se*ke,Fe+=se*Pe,Ve+=se*ne,Oe+=se*xe,ge+=se*Te,se=ce[1],me+=se*Tt,te+=se*dt,ve+=se*it,Se+=se*Ct,be+=se*pt,_e+=se*at,ye+=se*kt,$e+=se*mt,Ie+=se*nt,Be+=se*Bt,Me+=se*Ee,Fe+=se*ke,Ve+=se*Pe,Oe+=se*ne,ge+=se*xe,ie+=se*Te,se=ce[2],te+=se*Tt,ve+=se*dt,Se+=se*it,be+=se*Ct,_e+=se*pt,ye+=se*at,$e+=se*kt,Ie+=se*mt,Be+=se*nt,Me+=se*Bt,Fe+=se*Ee,Ve+=se*ke,Oe+=se*Pe,ge+=se*ne,ie+=se*xe,he+=se*Te,se=ce[3],ve+=se*Tt,Se+=se*dt,be+=se*it,_e+=se*Ct,ye+=se*pt,$e+=se*at,Ie+=se*kt,Be+=se*mt,Me+=se*nt,Fe+=se*Bt,Ve+=se*Ee,Oe+=se*ke,ge+=se*Pe,ie+=se*ne,he+=se*xe,we+=se*Te,se=ce[4],Se+=se*Tt,be+=se*dt,_e+=se*it,ye+=se*Ct,$e+=se*pt,Ie+=se*at,Be+=se*kt,Me+=se*mt,Fe+=se*nt,Ve+=se*Bt,Oe+=se*Ee,ge+=se*ke,ie+=se*Pe,he+=se*ne,we+=se*xe,Re+=se*Te,se=ce[5],be+=se*Tt,_e+=se*dt,ye+=se*it,$e+=se*Ct,Ie+=se*pt,Be+=se*at,Me+=se*kt,Fe+=se*mt,Ve+=se*nt,Oe+=se*Bt,ge+=se*Ee,ie+=se*ke,he+=se*Pe,we+=se*ne,Re+=se*xe,De+=se*Te,se=ce[6],_e+=se*Tt,ye+=se*dt,$e+=se*it,Ie+=se*Ct,Be+=se*pt,Me+=se*at,Fe+=se*kt,Ve+=se*mt,Oe+=se*nt,ge+=se*Bt,ie+=se*Ee,he+=se*ke,we+=se*Pe,Re+=se*ne,De+=se*xe,Le+=se*Te,se=ce[7],ye+=se*Tt,$e+=se*dt,Ie+=se*it,Be+=se*Ct,Me+=se*pt,Fe+=se*at,Ve+=se*kt,Oe+=se*mt,ge+=se*nt,ie+=se*Bt,he+=se*Ee,we+=se*ke,Re+=se*Pe,De+=se*ne,Le+=se*xe,tt+=se*Te,se=ce[8],$e+=se*Tt,Ie+=se*dt,Be+=se*it,Me+=se*Ct,Fe+=se*pt,Ve+=se*at,Oe+=se*kt,ge+=se*mt,ie+=se*nt,he+=se*Bt,we+=se*Ee,Re+=se*ke,De+=se*Pe,Le+=se*ne,tt+=se*xe,We+=se*Te,se=ce[9],Ie+=se*Tt,Be+=se*dt,Me+=se*it,Fe+=se*Ct,Ve+=se*pt,Oe+=se*at,ge+=se*kt,ie+=se*mt,he+=se*nt,we+=se*Bt,Re+=se*Ee,De+=se*ke,Le+=se*Pe,tt+=se*ne,We+=se*xe,Ge+=se*Te,se=ce[10],Be+=se*Tt,Me+=se*dt,Fe+=se*it,Ve+=se*Ct,Oe+=se*pt,ge+=se*at,ie+=se*kt,he+=se*mt,we+=se*nt,Re+=se*Bt,De+=se*Ee,Le+=se*ke,tt+=se*Pe,We+=se*ne,Ge+=se*xe,_t+=se*Te,se=ce[11],Me+=se*Tt,Fe+=se*dt,Ve+=se*it,Oe+=se*Ct,ge+=se*pt,ie+=se*at,he+=se*kt,we+=se*mt,Re+=se*nt,De+=se*Bt,Le+=se*Ee,tt+=se*ke,We+=se*Pe,Ge+=se*ne,_t+=se*xe,rt+=se*Te,se=ce[12],Fe+=se*Tt,Ve+=se*dt,Oe+=se*it,ge+=se*Ct,ie+=se*pt,he+=se*at,we+=se*kt,Re+=se*mt,De+=se*nt,Le+=se*Bt,tt+=se*Ee,We+=se*ke,Ge+=se*Pe,_t+=se*ne,rt+=se*xe,ot+=se*Te,se=ce[13],Ve+=se*Tt,Oe+=se*dt,ge+=se*it,ie+=se*Ct,he+=se*pt,we+=se*at,Re+=se*kt,De+=se*mt,Le+=se*nt,tt+=se*Bt,We+=se*Ee,Ge+=se*ke,_t+=se*Pe,rt+=se*ne,ot+=se*xe,Rt+=se*Te,se=ce[14],Oe+=se*Tt,ge+=se*dt,ie+=se*it,he+=se*Ct,we+=se*pt,Re+=se*at,De+=se*kt,Le+=se*mt,tt+=se*nt,We+=se*Bt,Ge+=se*Ee,_t+=se*ke,rt+=se*Pe,ot+=se*ne,Rt+=se*xe,xt+=se*Te,se=ce[15],ge+=se*Tt,ie+=se*dt,he+=se*it,we+=se*Ct,Re+=se*pt,De+=se*at,Le+=se*kt,tt+=se*mt,We+=se*nt,Ge+=se*Bt,_t+=se*Ee,rt+=se*ke,ot+=se*Pe,Rt+=se*ne,xt+=se*xe,ht+=se*Te,re+=38*ie,me+=38*he,te+=38*we,ve+=38*Re,Se+=38*De,be+=38*Le,_e+=38*tt,ye+=38*We,$e+=38*Ge,Ie+=38*_t,Be+=38*rt,Me+=38*ot,Fe+=38*Rt,Ve+=38*xt,Oe+=38*ht,de=1,se=re+de+65535,de=Math.floor(se/65536),re=se-de*65536,se=me+de+65535,de=Math.floor(se/65536),me=se-de*65536,se=te+de+65535,de=Math.floor(se/65536),te=se-de*65536,se=ve+de+65535,de=Math.floor(se/65536),ve=se-de*65536,se=Se+de+65535,de=Math.floor(se/65536),Se=se-de*65536,se=be+de+65535,de=Math.floor(se/65536),be=se-de*65536,se=_e+de+65535,de=Math.floor(se/65536),_e=se-de*65536,se=ye+de+65535,de=Math.floor(se/65536),ye=se-de*65536,se=$e+de+65535,de=Math.floor(se/65536),$e=se-de*65536,se=Ie+de+65535,de=Math.floor(se/65536),Ie=se-de*65536,se=Be+de+65535,de=Math.floor(se/65536),Be=se-de*65536,se=Me+de+65535,de=Math.floor(se/65536),Me=se-de*65536,se=Fe+de+65535,de=Math.floor(se/65536),Fe=se-de*65536,se=Ve+de+65535,de=Math.floor(se/65536),Ve=se-de*65536,se=Oe+de+65535,de=Math.floor(se/65536),Oe=se-de*65536,se=ge+de+65535,de=Math.floor(se/65536),ge=se-de*65536,re+=de-1+37*(de-1),de=1,se=re+de+65535,de=Math.floor(se/65536),re=se-de*65536,se=me+de+65535,de=Math.floor(se/65536),me=se-de*65536,se=te+de+65535,de=Math.floor(se/65536),te=se-de*65536,se=ve+de+65535,de=Math.floor(se/65536),ve=se-de*65536,se=Se+de+65535,de=Math.floor(se/65536),Se=se-de*65536,se=be+de+65535,de=Math.floor(se/65536),be=se-de*65536,se=_e+de+65535,de=Math.floor(se/65536),_e=se-de*65536,se=ye+de+65535,de=Math.floor(se/65536),ye=se-de*65536,se=$e+de+65535,de=Math.floor(se/65536),$e=se-de*65536,se=Ie+de+65535,de=Math.floor(se/65536),Ie=se-de*65536,se=Be+de+65535,de=Math.floor(se/65536),Be=se-de*65536,se=Me+de+65535,de=Math.floor(se/65536),Me=se-de*65536,se=Fe+de+65535,de=Math.floor(se/65536),Fe=se-de*65536,se=Ve+de+65535,de=Math.floor(se/65536),Ve=se-de*65536,se=Oe+de+65535,de=Math.floor(se/65536),Oe=se-de*65536,se=ge+de+65535,de=Math.floor(se/65536),ge=se-de*65536,re+=de-1+37*(de-1),le[0]=re,le[1]=me,le[2]=te,le[3]=ve,le[4]=Se,le[5]=be,le[6]=_e,le[7]=ye,le[8]=$e,le[9]=Ie,le[10]=Be,le[11]=Me,le[12]=Fe,le[13]=Ve,le[14]=Oe,le[15]=ge}function Z(le,ce){L(le,ce,ce)}function Q(le,ce){const pe=o();let se;for(se=0;se<16;se++)pe[se]=ce[se];for(se=253;se>=0;se--)Z(pe,pe),se!==2&&se!==4&&L(pe,pe,ce);for(se=0;se<16;se++)le[se]=pe[se]}function oe(le,ce){const pe=o();let se;for(se=0;se<16;se++)pe[se]=ce[se];for(se=250;se>=0;se--)Z(pe,pe),se!==1&&L(pe,pe,ce);for(se=0;se<16;se++)le[se]=pe[se]}function ae(le,ce){const pe=o(),se=o(),de=o(),re=o(),me=o(),te=o(),ve=o(),Se=o(),be=o();Y(pe,le[1],le[0]),Y(be,ce[1],ce[0]),L(pe,pe,be),J(se,le[0],le[1]),J(be,ce[0],ce[1]),L(se,se,be),L(de,le[3],ce[3]),L(de,de,y),L(re,le[2],ce[2]),J(re,re,re),Y(me,se,pe),Y(te,re,de),J(ve,re,de),J(Se,se,pe),L(le[0],me,te),L(le[1],Se,ve),L(le[2],ve,te),L(le[3],me,Se)}function U(le,ce,pe){for(let se=0;se<4;se++)C(le[se],ce[se],pe)}function I(le,ce){const pe=o(),se=o(),de=o();Q(de,ce[2]),L(pe,ce[0],de),L(se,ce[1],de),k(le,se),le[31]^=q(pe)<<7}function x(le,ce,pe){E(le[0],u),E(le[1],d),E(le[2],d),E(le[3],u);for(let se=255;se>=0;--se){const de=pe[se/8|0]>>(se&7)&1;U(le,ce,de),ae(ce,le),ae(le,le),U(le,ce,de)}}function T(le,ce){const pe=[o(),o(),o(),o()];E(pe[0],b),E(pe[1],_),E(pe[2],d),L(pe[3],b,_),x(le,pe,ce)}function M(le){if(le.length!==t.SEED_LENGTH)throw new Error(`ed25519: seed must be ${t.SEED_LENGTH} bytes`);const ce=(0,n.hash)(le);ce[0]&=248,ce[31]&=127,ce[31]|=64;const pe=new Uint8Array(32),se=[o(),o(),o(),o()];T(se,ce),I(pe,se);const de=new Uint8Array(64);return de.set(le),de.set(pe,32),{publicKey:pe,secretKey:de}}t.generateKeyPairFromSeed=M;function O(le){const ce=(0,e.randomBytes)(32,le),pe=M(ce);return(0,a.wipe)(ce),pe}t.generateKeyPair=O;function z(le){if(le.length!==t.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${t.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(le.subarray(32))}t.extractPublicKeyFromSecretKey=z;const X=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function H(le,ce){let pe,se,de,re;for(se=63;se>=32;--se){for(pe=0,de=se-32,re=se-12;de<re;++de)ce[de]+=pe-16*ce[se]*X[de-(se-32)],pe=Math.floor((ce[de]+128)/256),ce[de]-=pe*256;ce[de]+=pe,ce[se]=0}for(pe=0,de=0;de<32;de++)ce[de]+=pe-(ce[31]>>4)*X[de],pe=ce[de]>>8,ce[de]&=255;for(de=0;de<32;de++)ce[de]-=pe*X[de];for(se=0;se<32;se++)ce[se+1]+=ce[se]>>8,le[se]=ce[se]&255}function P(le){const ce=new Float64Array(64);for(let pe=0;pe<64;pe++)ce[pe]=le[pe];for(let pe=0;pe<64;pe++)le[pe]=0;H(le,ce)}function S(le,ce){const pe=new Float64Array(64),se=[o(),o(),o(),o()],de=(0,n.hash)(le.subarray(0,32));de[0]&=248,de[31]&=127,de[31]|=64;const re=new Uint8Array(64);re.set(de.subarray(32),32);const me=new n.SHA512;me.update(re.subarray(32)),me.update(ce);const te=me.digest();me.clean(),P(te),T(se,te),I(re,se),me.reset(),me.update(re.subarray(0,32)),me.update(le.subarray(32)),me.update(ce);const ve=me.digest();P(ve);for(let Se=0;Se<32;Se++)pe[Se]=te[Se];for(let Se=0;Se<32;Se++)for(let be=0;be<32;be++)pe[Se+be]+=ve[Se]*de[be];return H(re.subarray(32),pe),re}t.sign=S;function F(le,ce){const pe=o(),se=o(),de=o(),re=o(),me=o(),te=o(),ve=o();return E(le[2],d),j(le[1],ce),Z(de,le[1]),L(re,de,m),Y(de,de,le[2]),J(re,le[2],re),Z(me,re),Z(te,me),L(ve,te,me),L(pe,ve,de),L(pe,pe,re),oe(pe,pe),L(pe,pe,de),L(pe,pe,re),L(pe,pe,re),L(le[0],pe,re),Z(se,le[0]),L(se,se,re),D(se,de)&&L(le[0],le[0],w),Z(se,le[0]),L(se,se,re),D(se,de)?-1:(q(le[0])===ce[31]>>7&&Y(le[0],u,le[0]),L(le[3],le[0],le[1]),0)}function ue(le,ce,pe){const se=new Uint8Array(32),de=[o(),o(),o(),o()],re=[o(),o(),o(),o()];if(pe.length!==t.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${t.SIGNATURE_LENGTH} bytes`);if(F(re,le))return!1;const me=new n.SHA512;me.update(pe.subarray(0,32)),me.update(le),me.update(ce);const te=me.digest();return P(te),x(de,re,te),T(re,pe.subarray(32)),ae(de,re),I(se,de),!B(pe,se)}t.verify=ue;function ee(le){let ce=[o(),o(),o(),o()];if(F(ce,le))throw new Error("Ed25519: invalid public key");let pe=o(),se=o(),de=ce[1];J(pe,d,de),Y(se,d,de),Q(se,se),L(pe,pe,se);let re=new Uint8Array(32);return k(re,pe),re}t.convertPublicKeyToX25519=ee;function fe(le){const ce=(0,n.hash)(le.subarray(0,32));ce[0]&=248,ce[31]&=127,ce[31]|=64;const pe=new Uint8Array(ce.subarray(0,32));return(0,a.wipe)(ce),pe}t.convertSecretKeyToX25519=fe})(ed25519);var dist={};Object.defineProperty(dist,"__esModule",{value:!0});dist.bech32m=bech32=dist.bech32=void 0;const ALPHABET="qpzry9x8gf2tvdw0s3jn54khce6mua7l",ALPHABET_MAP={};for(let t=0;t<ALPHABET.length;t++){const e=ALPHABET.charAt(t);ALPHABET_MAP[e]=t}function polymodStep(t){const e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function prefixChk(t){let e=1;for(let n=0;n<t.length;++n){const a=t.charCodeAt(n);if(a<33||a>126)return"Invalid prefix ("+t+")";e=polymodStep(e)^a>>5}e=polymodStep(e);for(let n=0;n<t.length;++n){const a=t.charCodeAt(n);e=polymodStep(e)^a&31}return e}function convert(t,e,n,a){let o=0,l=0;const u=(1<<n)-1,d=[];for(let m=0;m<t.length;++m)for(o=o<<e|t[m],l+=e;l>=n;)l-=n,d.push(o>>l&u);if(a)l>0&&d.push(o<<n-l&u);else{if(l>=e)return"Excess padding";if(o<<n-l&u)return"Non-zero padding"}return d}function toWords(t){return convert(t,8,5,!0)}function fromWordsUnsafe(t){const e=convert(t,5,8,!1);if(Array.isArray(e))return e}function fromWords(t){const e=convert(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function getLibraryFromEncoding(t){let e;t==="bech32"?e=1:e=734539939;function n(u,d,m){if(m=m||90,u.length+7+d.length>m)throw new TypeError("Exceeds length limit");u=u.toLowerCase();let y=prefixChk(u);if(typeof y=="string")throw new Error(y);let b=u+"1";for(let _=0;_<d.length;++_){const w=d[_];if(w>>5)throw new Error("Non 5-bit word");y=polymodStep(y)^w,b+=ALPHABET.charAt(w)}for(let _=0;_<6;++_)y=polymodStep(y);y^=e;for(let _=0;_<6;++_){const w=y>>(5-_)*5&31;b+=ALPHABET.charAt(w)}return b}function a(u,d){if(d=d||90,u.length<8)return u+" too short";if(u.length>d)return"Exceeds length limit";const m=u.toLowerCase(),y=u.toUpperCase();if(u!==m&&u!==y)return"Mixed-case string "+u;u=m;const b=u.lastIndexOf("1");if(b===-1)return"No separator character for "+u;if(b===0)return"Missing prefix for "+u;const _=u.slice(0,b),w=u.slice(b+1);if(w.length<6)return"Data too short";let E=prefixChk(_);if(typeof E=="string")return E;const A=[];for(let C=0;C<w.length;++C){const k=w.charAt(C),B=ALPHABET_MAP[k];if(B===void 0)return"Unknown character "+k;E=polymodStep(E)^B,!(C+6>=w.length)&&A.push(B)}return E!==e?"Invalid checksum for "+u:{prefix:_,words:A}}function o(u,d){const m=a(u,d);if(typeof m=="object")return m}function l(u,d){const m=a(u,d);if(typeof m=="object")return m;throw new Error(m)}return{decodeUnsafe:o,decode:l,encode:n,toWords,fromWordsUnsafe,fromWords}}var bech32=dist.bech32=getLibraryFromEncoding("bech32");dist.bech32m=getLibraryFromEncoding("bech32m");var x25519={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.sharedKey=t.generateKeyPair=t.generateKeyPairFromSeed=t.scalarMultBase=t.scalarMult=t.SHARED_KEY_LENGTH=t.SECRET_KEY_LENGTH=t.PUBLIC_KEY_LENGTH=void 0;const e=random,n=wipe$1;t.PUBLIC_KEY_LENGTH=32,t.SECRET_KEY_LENGTH=32,t.SHARED_KEY_LENGTH=32;function a(j){const J=new Float64Array(16);if(j)for(let Y=0;Y<j.length;Y++)J[Y]=j[Y];return J}const o=new Uint8Array(32);o[0]=9;const l=a([56129,1]);function u(j){let J=1;for(let Y=0;Y<16;Y++){let L=j[Y]+J+65535;J=Math.floor(L/65536),j[Y]=L-J*65536}j[0]+=J-1+37*(J-1)}function d(j,J,Y){const L=~(Y-1);for(let Z=0;Z<16;Z++){const Q=L&(j[Z]^J[Z]);j[Z]^=Q,J[Z]^=Q}}function m(j,J){const Y=a(),L=a();for(let Z=0;Z<16;Z++)L[Z]=J[Z];u(L),u(L),u(L);for(let Z=0;Z<2;Z++){Y[0]=L[0]-65517;for(let oe=1;oe<15;oe++)Y[oe]=L[oe]-65535-(Y[oe-1]>>16&1),Y[oe-1]&=65535;Y[15]=L[15]-32767-(Y[14]>>16&1);const Q=Y[15]>>16&1;Y[14]&=65535,d(L,Y,1-Q)}for(let Z=0;Z<16;Z++)j[2*Z]=L[Z]&255,j[2*Z+1]=L[Z]>>8}function y(j,J){for(let Y=0;Y<16;Y++)j[Y]=J[2*Y]+(J[2*Y+1]<<8);j[15]&=32767}function b(j,J,Y){for(let L=0;L<16;L++)j[L]=J[L]+Y[L]}function _(j,J,Y){for(let L=0;L<16;L++)j[L]=J[L]-Y[L]}function w(j,J,Y){let L,Z,Q=0,oe=0,ae=0,U=0,I=0,x=0,T=0,M=0,O=0,z=0,X=0,H=0,P=0,S=0,F=0,ue=0,ee=0,fe=0,le=0,ce=0,pe=0,se=0,de=0,re=0,me=0,te=0,ve=0,Se=0,be=0,_e=0,ye=0,$e=Y[0],Ie=Y[1],Be=Y[2],Me=Y[3],Fe=Y[4],Ve=Y[5],Oe=Y[6],ge=Y[7],ie=Y[8],he=Y[9],we=Y[10],Re=Y[11],De=Y[12],Le=Y[13],tt=Y[14],We=Y[15];L=J[0],Q+=L*$e,oe+=L*Ie,ae+=L*Be,U+=L*Me,I+=L*Fe,x+=L*Ve,T+=L*Oe,M+=L*ge,O+=L*ie,z+=L*he,X+=L*we,H+=L*Re,P+=L*De,S+=L*Le,F+=L*tt,ue+=L*We,L=J[1],oe+=L*$e,ae+=L*Ie,U+=L*Be,I+=L*Me,x+=L*Fe,T+=L*Ve,M+=L*Oe,O+=L*ge,z+=L*ie,X+=L*he,H+=L*we,P+=L*Re,S+=L*De,F+=L*Le,ue+=L*tt,ee+=L*We,L=J[2],ae+=L*$e,U+=L*Ie,I+=L*Be,x+=L*Me,T+=L*Fe,M+=L*Ve,O+=L*Oe,z+=L*ge,X+=L*ie,H+=L*he,P+=L*we,S+=L*Re,F+=L*De,ue+=L*Le,ee+=L*tt,fe+=L*We,L=J[3],U+=L*$e,I+=L*Ie,x+=L*Be,T+=L*Me,M+=L*Fe,O+=L*Ve,z+=L*Oe,X+=L*ge,H+=L*ie,P+=L*he,S+=L*we,F+=L*Re,ue+=L*De,ee+=L*Le,fe+=L*tt,le+=L*We,L=J[4],I+=L*$e,x+=L*Ie,T+=L*Be,M+=L*Me,O+=L*Fe,z+=L*Ve,X+=L*Oe,H+=L*ge,P+=L*ie,S+=L*he,F+=L*we,ue+=L*Re,ee+=L*De,fe+=L*Le,le+=L*tt,ce+=L*We,L=J[5],x+=L*$e,T+=L*Ie,M+=L*Be,O+=L*Me,z+=L*Fe,X+=L*Ve,H+=L*Oe,P+=L*ge,S+=L*ie,F+=L*he,ue+=L*we,ee+=L*Re,fe+=L*De,le+=L*Le,ce+=L*tt,pe+=L*We,L=J[6],T+=L*$e,M+=L*Ie,O+=L*Be,z+=L*Me,X+=L*Fe,H+=L*Ve,P+=L*Oe,S+=L*ge,F+=L*ie,ue+=L*he,ee+=L*we,fe+=L*Re,le+=L*De,ce+=L*Le,pe+=L*tt,se+=L*We,L=J[7],M+=L*$e,O+=L*Ie,z+=L*Be,X+=L*Me,H+=L*Fe,P+=L*Ve,S+=L*Oe,F+=L*ge,ue+=L*ie,ee+=L*he,fe+=L*we,le+=L*Re,ce+=L*De,pe+=L*Le,se+=L*tt,de+=L*We,L=J[8],O+=L*$e,z+=L*Ie,X+=L*Be,H+=L*Me,P+=L*Fe,S+=L*Ve,F+=L*Oe,ue+=L*ge,ee+=L*ie,fe+=L*he,le+=L*we,ce+=L*Re,pe+=L*De,se+=L*Le,de+=L*tt,re+=L*We,L=J[9],z+=L*$e,X+=L*Ie,H+=L*Be,P+=L*Me,S+=L*Fe,F+=L*Ve,ue+=L*Oe,ee+=L*ge,fe+=L*ie,le+=L*he,ce+=L*we,pe+=L*Re,se+=L*De,de+=L*Le,re+=L*tt,me+=L*We,L=J[10],X+=L*$e,H+=L*Ie,P+=L*Be,S+=L*Me,F+=L*Fe,ue+=L*Ve,ee+=L*Oe,fe+=L*ge,le+=L*ie,ce+=L*he,pe+=L*we,se+=L*Re,de+=L*De,re+=L*Le,me+=L*tt,te+=L*We,L=J[11],H+=L*$e,P+=L*Ie,S+=L*Be,F+=L*Me,ue+=L*Fe,ee+=L*Ve,fe+=L*Oe,le+=L*ge,ce+=L*ie,pe+=L*he,se+=L*we,de+=L*Re,re+=L*De,me+=L*Le,te+=L*tt,ve+=L*We,L=J[12],P+=L*$e,S+=L*Ie,F+=L*Be,ue+=L*Me,ee+=L*Fe,fe+=L*Ve,le+=L*Oe,ce+=L*ge,pe+=L*ie,se+=L*he,de+=L*we,re+=L*Re,me+=L*De,te+=L*Le,ve+=L*tt,Se+=L*We,L=J[13],S+=L*$e,F+=L*Ie,ue+=L*Be,ee+=L*Me,fe+=L*Fe,le+=L*Ve,ce+=L*Oe,pe+=L*ge,se+=L*ie,de+=L*he,re+=L*we,me+=L*Re,te+=L*De,ve+=L*Le,Se+=L*tt,be+=L*We,L=J[14],F+=L*$e,ue+=L*Ie,ee+=L*Be,fe+=L*Me,le+=L*Fe,ce+=L*Ve,pe+=L*Oe,se+=L*ge,de+=L*ie,re+=L*he,me+=L*we,te+=L*Re,ve+=L*De,Se+=L*Le,be+=L*tt,_e+=L*We,L=J[15],ue+=L*$e,ee+=L*Ie,fe+=L*Be,le+=L*Me,ce+=L*Fe,pe+=L*Ve,se+=L*Oe,de+=L*ge,re+=L*ie,me+=L*he,te+=L*we,ve+=L*Re,Se+=L*De,be+=L*Le,_e+=L*tt,ye+=L*We,Q+=38*ee,oe+=38*fe,ae+=38*le,U+=38*ce,I+=38*pe,x+=38*se,T+=38*de,M+=38*re,O+=38*me,z+=38*te,X+=38*ve,H+=38*Se,P+=38*be,S+=38*_e,F+=38*ye,Z=1,L=Q+Z+65535,Z=Math.floor(L/65536),Q=L-Z*65536,L=oe+Z+65535,Z=Math.floor(L/65536),oe=L-Z*65536,L=ae+Z+65535,Z=Math.floor(L/65536),ae=L-Z*65536,L=U+Z+65535,Z=Math.floor(L/65536),U=L-Z*65536,L=I+Z+65535,Z=Math.floor(L/65536),I=L-Z*65536,L=x+Z+65535,Z=Math.floor(L/65536),x=L-Z*65536,L=T+Z+65535,Z=Math.floor(L/65536),T=L-Z*65536,L=M+Z+65535,Z=Math.floor(L/65536),M=L-Z*65536,L=O+Z+65535,Z=Math.floor(L/65536),O=L-Z*65536,L=z+Z+65535,Z=Math.floor(L/65536),z=L-Z*65536,L=X+Z+65535,Z=Math.floor(L/65536),X=L-Z*65536,L=H+Z+65535,Z=Math.floor(L/65536),H=L-Z*65536,L=P+Z+65535,Z=Math.floor(L/65536),P=L-Z*65536,L=S+Z+65535,Z=Math.floor(L/65536),S=L-Z*65536,L=F+Z+65535,Z=Math.floor(L/65536),F=L-Z*65536,L=ue+Z+65535,Z=Math.floor(L/65536),ue=L-Z*65536,Q+=Z-1+37*(Z-1),Z=1,L=Q+Z+65535,Z=Math.floor(L/65536),Q=L-Z*65536,L=oe+Z+65535,Z=Math.floor(L/65536),oe=L-Z*65536,L=ae+Z+65535,Z=Math.floor(L/65536),ae=L-Z*65536,L=U+Z+65535,Z=Math.floor(L/65536),U=L-Z*65536,L=I+Z+65535,Z=Math.floor(L/65536),I=L-Z*65536,L=x+Z+65535,Z=Math.floor(L/65536),x=L-Z*65536,L=T+Z+65535,Z=Math.floor(L/65536),T=L-Z*65536,L=M+Z+65535,Z=Math.floor(L/65536),M=L-Z*65536,L=O+Z+65535,Z=Math.floor(L/65536),O=L-Z*65536,L=z+Z+65535,Z=Math.floor(L/65536),z=L-Z*65536,L=X+Z+65535,Z=Math.floor(L/65536),X=L-Z*65536,L=H+Z+65535,Z=Math.floor(L/65536),H=L-Z*65536,L=P+Z+65535,Z=Math.floor(L/65536),P=L-Z*65536,L=S+Z+65535,Z=Math.floor(L/65536),S=L-Z*65536,L=F+Z+65535,Z=Math.floor(L/65536),F=L-Z*65536,L=ue+Z+65535,Z=Math.floor(L/65536),ue=L-Z*65536,Q+=Z-1+37*(Z-1),j[0]=Q,j[1]=oe,j[2]=ae,j[3]=U,j[4]=I,j[5]=x,j[6]=T,j[7]=M,j[8]=O,j[9]=z,j[10]=X,j[11]=H,j[12]=P,j[13]=S,j[14]=F,j[15]=ue}function E(j,J){w(j,J,J)}function A(j,J){const Y=a();for(let L=0;L<16;L++)Y[L]=J[L];for(let L=253;L>=0;L--)E(Y,Y),L!==2&&L!==4&&w(Y,Y,J);for(let L=0;L<16;L++)j[L]=Y[L]}function C(j,J){const Y=new Uint8Array(32),L=new Float64Array(80),Z=a(),Q=a(),oe=a(),ae=a(),U=a(),I=a();for(let O=0;O<31;O++)Y[O]=j[O];Y[31]=j[31]&127|64,Y[0]&=248,y(L,J);for(let O=0;O<16;O++)Q[O]=L[O];Z[0]=ae[0]=1;for(let O=254;O>=0;--O){const z=Y[O>>>3]>>>(O&7)&1;d(Z,Q,z),d(oe,ae,z),b(U,Z,oe),_(Z,Z,oe),b(oe,Q,ae),_(Q,Q,ae),E(ae,U),E(I,Z),w(Z,oe,Z),w(oe,Q,U),b(U,Z,oe),_(Z,Z,oe),E(Q,Z),_(oe,ae,I),w(Z,oe,l),b(Z,Z,ae),w(oe,oe,Z),w(Z,ae,I),w(ae,Q,L),E(Q,U),d(Z,Q,z),d(oe,ae,z)}for(let O=0;O<16;O++)L[O+16]=Z[O],L[O+32]=oe[O],L[O+48]=Q[O],L[O+64]=ae[O];const x=L.subarray(32),T=L.subarray(16);A(x,x),w(T,T,x);const M=new Uint8Array(32);return m(M,T),M}t.scalarMult=C;function k(j){return C(j,o)}t.scalarMultBase=k;function B(j){if(j.length!==t.SECRET_KEY_LENGTH)throw new Error(`x25519: seed must be ${t.SECRET_KEY_LENGTH} bytes`);const J=new Uint8Array(j);return{publicKey:k(J),secretKey:J}}t.generateKeyPairFromSeed=B;function D(j){const J=(0,e.randomBytes)(32,j),Y=B(J);return(0,n.wipe)(J),Y}t.generateKeyPair=D;function q(j,J,Y=!1){if(j.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect secret key length");if(J.length!==t.PUBLIC_KEY_LENGTH)throw new Error("X25519: incorrect public key length");const L=C(j,J);if(Y){let Z=0;for(let Q=0;Q<L.length;Q++)Z|=L[Q];if(Z===0)throw new Error("X25519: invalid shared key")}return L}t.sharedKey=q})(x25519);var xchacha20poly1305={},xchacha20={},chacha={};Object.defineProperty(chacha,"__esModule",{value:!0});var binary_1$1=binary,wipe_1$1=wipe$1,ROUNDS$1=20;function core(t,e,n){for(var a=1634760805,o=857760878,l=2036477234,u=1797285236,d=n[3]<<24|n[2]<<16|n[1]<<8|n[0],m=n[7]<<24|n[6]<<16|n[5]<<8|n[4],y=n[11]<<24|n[10]<<16|n[9]<<8|n[8],b=n[15]<<24|n[14]<<16|n[13]<<8|n[12],_=n[19]<<24|n[18]<<16|n[17]<<8|n[16],w=n[23]<<24|n[22]<<16|n[21]<<8|n[20],E=n[27]<<24|n[26]<<16|n[25]<<8|n[24],A=n[31]<<24|n[30]<<16|n[29]<<8|n[28],C=e[3]<<24|e[2]<<16|e[1]<<8|e[0],k=e[7]<<24|e[6]<<16|e[5]<<8|e[4],B=e[11]<<24|e[10]<<16|e[9]<<8|e[8],D=e[15]<<24|e[14]<<16|e[13]<<8|e[12],q=a,j=o,J=l,Y=u,L=d,Z=m,Q=y,oe=b,ae=_,U=w,I=E,x=A,T=C,M=k,O=B,z=D,X=0;X<ROUNDS$1;X+=2)q=q+L|0,T^=q,T=T>>>32-16|T<<16,ae=ae+T|0,L^=ae,L=L>>>32-12|L<<12,j=j+Z|0,M^=j,M=M>>>32-16|M<<16,U=U+M|0,Z^=U,Z=Z>>>32-12|Z<<12,J=J+Q|0,O^=J,O=O>>>32-16|O<<16,I=I+O|0,Q^=I,Q=Q>>>32-12|Q<<12,Y=Y+oe|0,z^=Y,z=z>>>32-16|z<<16,x=x+z|0,oe^=x,oe=oe>>>32-12|oe<<12,J=J+Q|0,O^=J,O=O>>>32-8|O<<8,I=I+O|0,Q^=I,Q=Q>>>32-7|Q<<7,Y=Y+oe|0,z^=Y,z=z>>>32-8|z<<8,x=x+z|0,oe^=x,oe=oe>>>32-7|oe<<7,j=j+Z|0,M^=j,M=M>>>32-8|M<<8,U=U+M|0,Z^=U,Z=Z>>>32-7|Z<<7,q=q+L|0,T^=q,T=T>>>32-8|T<<8,ae=ae+T|0,L^=ae,L=L>>>32-7|L<<7,q=q+Z|0,z^=q,z=z>>>32-16|z<<16,I=I+z|0,Z^=I,Z=Z>>>32-12|Z<<12,j=j+Q|0,T^=j,T=T>>>32-16|T<<16,x=x+T|0,Q^=x,Q=Q>>>32-12|Q<<12,J=J+oe|0,M^=J,M=M>>>32-16|M<<16,ae=ae+M|0,oe^=ae,oe=oe>>>32-12|oe<<12,Y=Y+L|0,O^=Y,O=O>>>32-16|O<<16,U=U+O|0,L^=U,L=L>>>32-12|L<<12,J=J+oe|0,M^=J,M=M>>>32-8|M<<8,ae=ae+M|0,oe^=ae,oe=oe>>>32-7|oe<<7,Y=Y+L|0,O^=Y,O=O>>>32-8|O<<8,U=U+O|0,L^=U,L=L>>>32-7|L<<7,j=j+Q|0,T^=j,T=T>>>32-8|T<<8,x=x+T|0,Q^=x,Q=Q>>>32-7|Q<<7,q=q+Z|0,z^=q,z=z>>>32-8|z<<8,I=I+z|0,Z^=I,Z=Z>>>32-7|Z<<7;binary_1$1.writeUint32LE(q+a|0,t,0),binary_1$1.writeUint32LE(j+o|0,t,4),binary_1$1.writeUint32LE(J+l|0,t,8),binary_1$1.writeUint32LE(Y+u|0,t,12),binary_1$1.writeUint32LE(L+d|0,t,16),binary_1$1.writeUint32LE(Z+m|0,t,20),binary_1$1.writeUint32LE(Q+y|0,t,24),binary_1$1.writeUint32LE(oe+b|0,t,28),binary_1$1.writeUint32LE(ae+_|0,t,32),binary_1$1.writeUint32LE(U+w|0,t,36),binary_1$1.writeUint32LE(I+E|0,t,40),binary_1$1.writeUint32LE(x+A|0,t,44),binary_1$1.writeUint32LE(T+C|0,t,48),binary_1$1.writeUint32LE(M+k|0,t,52),binary_1$1.writeUint32LE(O+B|0,t,56),binary_1$1.writeUint32LE(z+D|0,t,60)}function streamXOR$1(t,e,n,a,o){if(o===void 0&&(o=0),t.length!==32)throw new Error("ChaCha: key size must be 32 bytes");if(a.length<n.length)throw new Error("ChaCha: destination is shorter than source");var l,u;if(o===0){if(e.length!==8&&e.length!==12)throw new Error("ChaCha nonce must be 8 or 12 bytes");l=new Uint8Array(16),u=l.length-e.length,l.set(e,u)}else{if(e.length!==16)throw new Error("ChaCha nonce with counter must be 16 bytes");l=e,u=o}for(var d=new Uint8Array(64),m=0;m<n.length;m+=64){core(d,l,t);for(var y=m;y<m+64&&y<n.length;y++)a[y]=n[y]^d[y-m];incrementCounter(l,0,u)}return wipe_1$1.wipe(d),o===0&&wipe_1$1.wipe(l),a}chacha.streamXOR=streamXOR$1;function stream$1(t,e,n,a){return a===void 0&&(a=0),wipe_1$1.wipe(n),streamXOR$1(t,e,n,n,a)}chacha.stream=stream$1;function incrementCounter(t,e,n){for(var a=1;n--;)a=a+(t[e]&255)|0,t[e]=a&255,a>>>=8,e++;if(a>0)throw new Error("ChaCha: counter overflow")}Object.defineProperty(xchacha20,"__esModule",{value:!0});var binary_1=binary,wipe_1=wipe$1,chacha_1=chacha,ROUNDS=20;function streamXOR(t,e,n,a){if(e.length!==24)throw new Error("XChaCha20 nonce must be 24 bytes");var o=hchacha(t,e.subarray(0,16),new Uint8Array(32)),l=new Uint8Array(12);l.set(e.subarray(16),4);var u=chacha_1.streamXOR(o,l,n,a);return wipe_1.wipe(o),u}xchacha20.streamXOR=streamXOR;function stream(t,e,n){return wipe_1.wipe(n),streamXOR(t,e,n,n)}xchacha20.stream=stream;function hchacha(t,e,n){for(var a=1634760805,o=857760878,l=2036477234,u=1797285236,d=t[3]<<24|t[2]<<16|t[1]<<8|t[0],m=t[7]<<24|t[6]<<16|t[5]<<8|t[4],y=t[11]<<24|t[10]<<16|t[9]<<8|t[8],b=t[15]<<24|t[14]<<16|t[13]<<8|t[12],_=t[19]<<24|t[18]<<16|t[17]<<8|t[16],w=t[23]<<24|t[22]<<16|t[21]<<8|t[20],E=t[27]<<24|t[26]<<16|t[25]<<8|t[24],A=t[31]<<24|t[30]<<16|t[29]<<8|t[28],C=e[3]<<24|e[2]<<16|e[1]<<8|e[0],k=e[7]<<24|e[6]<<16|e[5]<<8|e[4],B=e[11]<<24|e[10]<<16|e[9]<<8|e[8],D=e[15]<<24|e[14]<<16|e[13]<<8|e[12],q=a,j=o,J=l,Y=u,L=d,Z=m,Q=y,oe=b,ae=_,U=w,I=E,x=A,T=C,M=k,O=B,z=D,X=0;X<ROUNDS;X+=2)q=q+L|0,T^=q,T=T>>>32-16|T<<16,ae=ae+T|0,L^=ae,L=L>>>32-12|L<<12,j=j+Z|0,M^=j,M=M>>>32-16|M<<16,U=U+M|0,Z^=U,Z=Z>>>32-12|Z<<12,J=J+Q|0,O^=J,O=O>>>32-16|O<<16,I=I+O|0,Q^=I,Q=Q>>>32-12|Q<<12,Y=Y+oe|0,z^=Y,z=z>>>32-16|z<<16,x=x+z|0,oe^=x,oe=oe>>>32-12|oe<<12,J=J+Q|0,O^=J,O=O>>>32-8|O<<8,I=I+O|0,Q^=I,Q=Q>>>32-7|Q<<7,Y=Y+oe|0,z^=Y,z=z>>>32-8|z<<8,x=x+z|0,oe^=x,oe=oe>>>32-7|oe<<7,j=j+Z|0,M^=j,M=M>>>32-8|M<<8,U=U+M|0,Z^=U,Z=Z>>>32-7|Z<<7,q=q+L|0,T^=q,T=T>>>32-8|T<<8,ae=ae+T|0,L^=ae,L=L>>>32-7|L<<7,q=q+Z|0,z^=q,z=z>>>32-16|z<<16,I=I+z|0,Z^=I,Z=Z>>>32-12|Z<<12,j=j+Q|0,T^=j,T=T>>>32-16|T<<16,x=x+T|0,Q^=x,Q=Q>>>32-12|Q<<12,J=J+oe|0,M^=J,M=M>>>32-16|M<<16,ae=ae+M|0,oe^=ae,oe=oe>>>32-12|oe<<12,Y=Y+L|0,O^=Y,O=O>>>32-16|O<<16,U=U+O|0,L^=U,L=L>>>32-12|L<<12,J=J+oe|0,M^=J,M=M>>>32-8|M<<8,ae=ae+M|0,oe^=ae,oe=oe>>>32-7|oe<<7,Y=Y+L|0,O^=Y,O=O>>>32-8|O<<8,U=U+O|0,L^=U,L=L>>>32-7|L<<7,j=j+Q|0,T^=j,T=T>>>32-8|T<<8,x=x+T|0,Q^=x,Q=Q>>>32-7|Q<<7,q=q+Z|0,z^=q,z=z>>>32-8|z<<8,I=I+z|0,Z^=I,Z=Z>>>32-7|Z<<7;return binary_1.writeUint32LE(q,n,0),binary_1.writeUint32LE(j,n,4),binary_1.writeUint32LE(J,n,8),binary_1.writeUint32LE(Y,n,12),binary_1.writeUint32LE(T,n,16),binary_1.writeUint32LE(M,n,20),binary_1.writeUint32LE(O,n,24),binary_1.writeUint32LE(z,n,28),n}xchacha20.hchacha=hchacha;var chacha20poly1305={},poly1305={},constantTime={};Object.defineProperty(constantTime,"__esModule",{value:!0});function select(t,e,n){return~(t-1)&e|t-1&n}constantTime.select=select;function lessOrEqual(t,e){return(t|0)-(e|0)-1>>>31&1}constantTime.lessOrEqual=lessOrEqual;function compare$1(t,e){if(t.length!==e.length)return 0;for(var n=0,a=0;a<t.length;a++)n|=t[a]^e[a];return 1&n-1>>>8}constantTime.compare=compare$1;function equal$1(t,e){return t.length===0||e.length===0?!1:compare$1(t,e)!==0}constantTime.equal=equal$1;(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=constantTime,n=wipe$1;t.DIGEST_LENGTH=16;var a=function(){function u(d){this.digestLength=t.DIGEST_LENGTH,this._buffer=new Uint8Array(16),this._r=new Uint16Array(10),this._h=new Uint16Array(10),this._pad=new Uint16Array(8),this._leftover=0,this._fin=0,this._finished=!1;var m=d[0]|d[1]<<8;this._r[0]=m&8191;var y=d[2]|d[3]<<8;this._r[1]=(m>>>13|y<<3)&8191;var b=d[4]|d[5]<<8;this._r[2]=(y>>>10|b<<6)&7939;var _=d[6]|d[7]<<8;this._r[3]=(b>>>7|_<<9)&8191;var w=d[8]|d[9]<<8;this._r[4]=(_>>>4|w<<12)&255,this._r[5]=w>>>1&8190;var E=d[10]|d[11]<<8;this._r[6]=(w>>>14|E<<2)&8191;var A=d[12]|d[13]<<8;this._r[7]=(E>>>11|A<<5)&8065;var C=d[14]|d[15]<<8;this._r[8]=(A>>>8|C<<8)&8191,this._r[9]=C>>>5&127,this._pad[0]=d[16]|d[17]<<8,this._pad[1]=d[18]|d[19]<<8,this._pad[2]=d[20]|d[21]<<8,this._pad[3]=d[22]|d[23]<<8,this._pad[4]=d[24]|d[25]<<8,this._pad[5]=d[26]|d[27]<<8,this._pad[6]=d[28]|d[29]<<8,this._pad[7]=d[30]|d[31]<<8}return u.prototype._blocks=function(d,m,y){for(var b=this._fin?0:2048,_=this._h[0],w=this._h[1],E=this._h[2],A=this._h[3],C=this._h[4],k=this._h[5],B=this._h[6],D=this._h[7],q=this._h[8],j=this._h[9],J=this._r[0],Y=this._r[1],L=this._r[2],Z=this._r[3],Q=this._r[4],oe=this._r[5],ae=this._r[6],U=this._r[7],I=this._r[8],x=this._r[9];y>=16;){var T=d[m+0]|d[m+1]<<8;_+=T&8191;var M=d[m+2]|d[m+3]<<8;w+=(T>>>13|M<<3)&8191;var O=d[m+4]|d[m+5]<<8;E+=(M>>>10|O<<6)&8191;var z=d[m+6]|d[m+7]<<8;A+=(O>>>7|z<<9)&8191;var X=d[m+8]|d[m+9]<<8;C+=(z>>>4|X<<12)&8191,k+=X>>>1&8191;var H=d[m+10]|d[m+11]<<8;B+=(X>>>14|H<<2)&8191;var P=d[m+12]|d[m+13]<<8;D+=(H>>>11|P<<5)&8191;var S=d[m+14]|d[m+15]<<8;q+=(P>>>8|S<<8)&8191,j+=S>>>5|b;var F=0,ue=F;ue+=_*J,ue+=w*(5*x),ue+=E*(5*I),ue+=A*(5*U),ue+=C*(5*ae),F=ue>>>13,ue&=8191,ue+=k*(5*oe),ue+=B*(5*Q),ue+=D*(5*Z),ue+=q*(5*L),ue+=j*(5*Y),F+=ue>>>13,ue&=8191;var ee=F;ee+=_*Y,ee+=w*J,ee+=E*(5*x),ee+=A*(5*I),ee+=C*(5*U),F=ee>>>13,ee&=8191,ee+=k*(5*ae),ee+=B*(5*oe),ee+=D*(5*Q),ee+=q*(5*Z),ee+=j*(5*L),F+=ee>>>13,ee&=8191;var fe=F;fe+=_*L,fe+=w*Y,fe+=E*J,fe+=A*(5*x),fe+=C*(5*I),F=fe>>>13,fe&=8191,fe+=k*(5*U),fe+=B*(5*ae),fe+=D*(5*oe),fe+=q*(5*Q),fe+=j*(5*Z),F+=fe>>>13,fe&=8191;var le=F;le+=_*Z,le+=w*L,le+=E*Y,le+=A*J,le+=C*(5*x),F=le>>>13,le&=8191,le+=k*(5*I),le+=B*(5*U),le+=D*(5*ae),le+=q*(5*oe),le+=j*(5*Q),F+=le>>>13,le&=8191;var ce=F;ce+=_*Q,ce+=w*Z,ce+=E*L,ce+=A*Y,ce+=C*J,F=ce>>>13,ce&=8191,ce+=k*(5*x),ce+=B*(5*I),ce+=D*(5*U),ce+=q*(5*ae),ce+=j*(5*oe),F+=ce>>>13,ce&=8191;var pe=F;pe+=_*oe,pe+=w*Q,pe+=E*Z,pe+=A*L,pe+=C*Y,F=pe>>>13,pe&=8191,pe+=k*J,pe+=B*(5*x),pe+=D*(5*I),pe+=q*(5*U),pe+=j*(5*ae),F+=pe>>>13,pe&=8191;var se=F;se+=_*ae,se+=w*oe,se+=E*Q,se+=A*Z,se+=C*L,F=se>>>13,se&=8191,se+=k*Y,se+=B*J,se+=D*(5*x),se+=q*(5*I),se+=j*(5*U),F+=se>>>13,se&=8191;var de=F;de+=_*U,de+=w*ae,de+=E*oe,de+=A*Q,de+=C*Z,F=de>>>13,de&=8191,de+=k*L,de+=B*Y,de+=D*J,de+=q*(5*x),de+=j*(5*I),F+=de>>>13,de&=8191;var re=F;re+=_*I,re+=w*U,re+=E*ae,re+=A*oe,re+=C*Q,F=re>>>13,re&=8191,re+=k*Z,re+=B*L,re+=D*Y,re+=q*J,re+=j*(5*x),F+=re>>>13,re&=8191;var me=F;me+=_*x,me+=w*I,me+=E*U,me+=A*ae,me+=C*oe,F=me>>>13,me&=8191,me+=k*Q,me+=B*Z,me+=D*L,me+=q*Y,me+=j*J,F+=me>>>13,me&=8191,F=(F<<2)+F|0,F=F+ue|0,ue=F&8191,F=F>>>13,ee+=F,_=ue,w=ee,E=fe,A=le,C=ce,k=pe,B=se,D=de,q=re,j=me,m+=16,y-=16}this._h[0]=_,this._h[1]=w,this._h[2]=E,this._h[3]=A,this._h[4]=C,this._h[5]=k,this._h[6]=B,this._h[7]=D,this._h[8]=q,this._h[9]=j},u.prototype.finish=function(d,m){m===void 0&&(m=0);var y=new Uint16Array(10),b,_,w,E;if(this._leftover){for(E=this._leftover,this._buffer[E++]=1;E<16;E++)this._buffer[E]=0;this._fin=1,this._blocks(this._buffer,0,16)}for(b=this._h[1]>>>13,this._h[1]&=8191,E=2;E<10;E++)this._h[E]+=b,b=this._h[E]>>>13,this._h[E]&=8191;for(this._h[0]+=b*5,b=this._h[0]>>>13,this._h[0]&=8191,this._h[1]+=b,b=this._h[1]>>>13,this._h[1]&=8191,this._h[2]+=b,y[0]=this._h[0]+5,b=y[0]>>>13,y[0]&=8191,E=1;E<10;E++)y[E]=this._h[E]+b,b=y[E]>>>13,y[E]&=8191;for(y[9]-=1<<13,_=(b^1)-1,E=0;E<10;E++)y[E]&=_;for(_=~_,E=0;E<10;E++)this._h[E]=this._h[E]&_|y[E];for(this._h[0]=(this._h[0]|this._h[1]<<13)&65535,this._h[1]=(this._h[1]>>>3|this._h[2]<<10)&65535,this._h[2]=(this._h[2]>>>6|this._h[3]<<7)&65535,this._h[3]=(this._h[3]>>>9|this._h[4]<<4)&65535,this._h[4]=(this._h[4]>>>12|this._h[5]<<1|this._h[6]<<14)&65535,this._h[5]=(this._h[6]>>>2|this._h[7]<<11)&65535,this._h[6]=(this._h[7]>>>5|this._h[8]<<8)&65535,this._h[7]=(this._h[8]>>>8|this._h[9]<<5)&65535,w=this._h[0]+this._pad[0],this._h[0]=w&65535,E=1;E<8;E++)w=(this._h[E]+this._pad[E]|0)+(w>>>16)|0,this._h[E]=w&65535;return d[m+0]=this._h[0]>>>0,d[m+1]=this._h[0]>>>8,d[m+2]=this._h[1]>>>0,d[m+3]=this._h[1]>>>8,d[m+4]=this._h[2]>>>0,d[m+5]=this._h[2]>>>8,d[m+6]=this._h[3]>>>0,d[m+7]=this._h[3]>>>8,d[m+8]=this._h[4]>>>0,d[m+9]=this._h[4]>>>8,d[m+10]=this._h[5]>>>0,d[m+11]=this._h[5]>>>8,d[m+12]=this._h[6]>>>0,d[m+13]=this._h[6]>>>8,d[m+14]=this._h[7]>>>0,d[m+15]=this._h[7]>>>8,this._finished=!0,this},u.prototype.update=function(d){var m=0,y=d.length,b;if(this._leftover){b=16-this._leftover,b>y&&(b=y);for(var _=0;_<b;_++)this._buffer[this._leftover+_]=d[m+_];if(y-=b,m+=b,this._leftover+=b,this._leftover<16)return this;this._blocks(this._buffer,0,16),this._leftover=0}if(y>=16&&(b=y-y%16,this._blocks(d,m,b),m+=b,y-=b),y){for(var _=0;_<y;_++)this._buffer[this._leftover+_]=d[m+_];this._leftover+=y}return this},u.prototype.digest=function(){if(this._finished)throw new Error("Poly1305 was finished");var d=new Uint8Array(16);return this.finish(d),d},u.prototype.clean=function(){return n.wipe(this._buffer),n.wipe(this._r),n.wipe(this._h),n.wipe(this._pad),this._leftover=0,this._fin=0,this._finished=!0,this},u}();t.Poly1305=a;function o(u,d){var m=new a(u);m.update(d);var y=m.digest();return m.clean(),y}t.oneTimeAuth=o;function l(u,d){return u.length!==t.DIGEST_LENGTH||d.length!==t.DIGEST_LENGTH?!1:e.equal(u,d)}t.equal=l})(poly1305);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=chacha,n=poly1305,a=wipe$1,o=binary,l=constantTime;t.KEY_LENGTH=32,t.NONCE_LENGTH=12,t.TAG_LENGTH=16;var u=new Uint8Array(16),d=function(){function m(y){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,y.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(y)}return m.prototype.seal=function(y,b,_,w){if(y.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");var E=new Uint8Array(16);E.set(y,E.length-y.length);var A=new Uint8Array(32);e.stream(this._key,E,A,4);var C=b.length+this.tagLength,k;if(w){if(w.length!==C)throw new Error("ChaCha20Poly1305: incorrect destination length");k=w}else k=new Uint8Array(C);return e.streamXOR(this._key,E,b,k,4),this._authenticate(k.subarray(k.length-this.tagLength,k.length),A,k.subarray(0,k.length-this.tagLength),_),a.wipe(E),k},m.prototype.open=function(y,b,_,w){if(y.length>16)throw new Error("ChaCha20Poly1305: incorrect nonce length");if(b.length<this.tagLength)return null;var E=new Uint8Array(16);E.set(y,E.length-y.length);var A=new Uint8Array(32);e.stream(this._key,E,A,4);var C=new Uint8Array(this.tagLength);if(this._authenticate(C,A,b.subarray(0,b.length-this.tagLength),_),!l.equal(C,b.subarray(b.length-this.tagLength,b.length)))return null;var k=b.length-this.tagLength,B;if(w){if(w.length!==k)throw new Error("ChaCha20Poly1305: incorrect destination length");B=w}else B=new Uint8Array(k);return e.streamXOR(this._key,E,b.subarray(0,b.length-this.tagLength),B,4),a.wipe(E),B},m.prototype.clean=function(){return a.wipe(this._key),this},m.prototype._authenticate=function(y,b,_,w){var E=new n.Poly1305(b);w&&(E.update(w),w.length%16>0&&E.update(u.subarray(w.length%16))),E.update(_),_.length%16>0&&E.update(u.subarray(_.length%16));var A=new Uint8Array(8);w&&o.writeUint64LE(w.length,A),E.update(A),o.writeUint64LE(_.length,A),E.update(A);for(var C=E.digest(),k=0;k<C.length;k++)y[k]=C[k];E.clean(),a.wipe(C),a.wipe(A)},m}();t.ChaCha20Poly1305=d})(chacha20poly1305);(function(t){Object.defineProperty(t,"__esModule",{value:!0});var e=xchacha20,n=chacha20poly1305,a=wipe$1;t.KEY_LENGTH=32,t.NONCE_LENGTH=24,t.TAG_LENGTH=16;var o=function(){function l(u){if(this.nonceLength=t.NONCE_LENGTH,this.tagLength=t.TAG_LENGTH,u.length!==t.KEY_LENGTH)throw new Error("ChaCha20Poly1305 needs 32-byte key");this._key=new Uint8Array(u)}return l.prototype.seal=function(u,d,m,y){if(u.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");var b=e.hchacha(this._key,u.subarray(0,16),new Uint8Array(32)),_=new Uint8Array(12);_.set(u.subarray(16),4);var w=new n.ChaCha20Poly1305(b),E=w.seal(_,d,m,y);return a.wipe(b),a.wipe(_),w.clean(),E},l.prototype.open=function(u,d,m,y){if(u.length!==24)throw new Error("XChaCha20Poly1305: incorrect nonce length");if(d.length<this.tagLength)return null;var b=e.hchacha(this._key,u.subarray(0,16),new Uint8Array(32)),_=new Uint8Array(12);_.set(u.subarray(16),4);var w=new n.ChaCha20Poly1305(b),E=w.open(_,d,m,y);return a.wipe(b),a.wipe(_),w.clean(),E},l.prototype.clean=function(){return a.wipe(this._key),this},l}();t.XChaCha20Poly1305=o})(xchacha20poly1305);function bytesToBase64url(t){return toString$6(t,"base64url")}function base64ToBytes(t){const e=t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");return fromString$3(e,"base64url")}function base58ToBytes(t){return fromString$3(t,"base58btc")}function bytesToBase58(t){return toString$6(t,"base58btc")}function hexToBytes(t){const e=t.startsWith("0x")?t.substring(2):t;return fromString$3(e.toLowerCase(),"base16")}function encodeBase64url(t){return bytesToBase64url(fromString$3(t))}function decodeBase64url(t){return toString$6(base64ToBytes(t))}function bytesToHex(t){return toString$6(t,"base16")}function stringToBytes$1(t){return fromString$3(t)}function sha256$1(t){const e=typeof t=="string"?fromString$3(t):t;return sha256$2.hash(e)}function keccak(t){return new Uint8Array(sha3.keccak_256.arrayBuffer(t))}function toEthereumAddress(t){const e=fromString$3(t.slice(2),"base16");return`0x${toString$6(keccak(e).slice(-20),"base16")}`}function writeUint32BE(t,e=new Uint8Array(4)){const n=fromString$3(t.toString(),"base10");return e.set(n,4-n.length),e}const lengthAndInput=t=>concat$1([writeUint32BE(t.length),t]);function concatKDF(t,e,n,a,o){if(e!==256)throw new Error(`Unsupported key length: ${e}`);const l=concat$1([lengthAndInput(fromString$3(n)),lengthAndInput(typeof a>"u"?new Uint8Array(0):a),lengthAndInput(typeof o>"u"?new Uint8Array(0):o),writeUint32BE(e)]),u=1;return sha256$2.hash(concat$1([writeUint32BE(u),t,l]))}new elliptic.ec("secp256k1");new elliptic.ec("p256");const zl=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],zr=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],sl=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],sr=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],hl=[0,1518500249,1859775393,2400959708,2840853838],hr=[1352829926,1548603684,1836072691,2053994217,0];function rotl(t,e){return t<<e|t>>>32-e}function fn1(t,e,n,a,o,l,u,d){return rotl(t+(e^n^a)+l+u|0,d)+o|0}function fn2(t,e,n,a,o,l,u,d){return rotl(t+(e&n|~e&a)+l+u|0,d)+o|0}function fn3(t,e,n,a,o,l,u,d){return rotl(t+((e|~n)^a)+l+u|0,d)+o|0}function fn4(t,e,n,a,o,l,u,d){return rotl(t+(e&a|n&~a)+l+u|0,d)+o|0}function fn5(t,e,n,a,o,l,u,d){return rotl(t+(e^(n|~a))+l+u|0,d)+o|0}class Ripemd160{constructor(e=64){this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this._blockOffset=0,this._block=void 0,this._blockSize=void 0,this._length=[0,0,0,0],this._finalized=void 0,this.update=n=>{if(this._finalized)throw new Error("Digest already called");const a=this._block;let o=0;for(;this._blockOffset+n.length-o>=this._blockSize;){for(let l=this._blockOffset;l<this._blockSize;)a[l++]=n[o++];this._update(),this._blockOffset=0}for(;o<n.length;)a[this._blockOffset++]=n[o++];for(let l=0,u=n.length*8;u>0;++l)this._length[l]+=u,u=this._length[l]/4294967296|0,u>0&&(this._length[l]-=4294967296*u);return this},this.digest=()=>{if(this._finalized)throw new Error("Digest already called");this._finalized=!0;const n=this._digest();this._block.fill(0),this._blockOffset=0;for(let a=0;a<4;++a)this._length[a]=0;return n},this._update=()=>{const n=new Array(16),a=new DataView(this._block.buffer);for(let C=0;C<16;++C)n[C]=n[C]=a.getInt32(C*4,!0);let o=this._a|0,l=this._b|0,u=this._c|0,d=this._d|0,m=this._e|0,y=this._a|0,b=this._b|0,_=this._c|0,w=this._d|0,E=this._e|0;for(let C=0;C<80;C+=1){let k,B;C<16?(k=fn1(o,l,u,d,m,n[zl[C]],hl[0],sl[C]),B=fn5(y,b,_,w,E,n[zr[C]],hr[0],sr[C])):C<32?(k=fn2(o,l,u,d,m,n[zl[C]],hl[1],sl[C]),B=fn4(y,b,_,w,E,n[zr[C]],hr[1],sr[C])):C<48?(k=fn3(o,l,u,d,m,n[zl[C]],hl[2],sl[C]),B=fn3(y,b,_,w,E,n[zr[C]],hr[2],sr[C])):C<64?(k=fn4(o,l,u,d,m,n[zl[C]],hl[3],sl[C]),B=fn2(y,b,_,w,E,n[zr[C]],hr[3],sr[C])):(k=fn5(o,l,u,d,m,n[zl[C]],hl[4],sl[C]),B=fn1(y,b,_,w,E,n[zr[C]],hr[4],sr[C])),o=m,m=d,d=rotl(u,10),u=l,l=k,y=E,E=w,w=rotl(_,10),_=b,b=B}const A=this._b+u+w|0;this._b=this._c+d+E|0,this._c=this._d+m+y|0,this._d=this._e+o+b|0,this._e=this._a+l+_|0,this._a=A},this._digest=()=>{this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56);const n=new DataView(this._block.buffer);n.setUint32(56,this._length[0],!0),n.setUint32(60,this._length[1],!0),this._block=new Uint8Array(n.buffer),this._update();const a=new DataView(new Uint8Array(20).buffer);return a.setInt32(0,this._a,!0),a.setInt32(4,this._b,!0),a.setInt32(8,this._c,!0),a.setInt32(12,this._d,!0),a.setInt32(16,this._e,!0),new Uint8Array(a.buffer)},this._block=new Uint8Array(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}}const publicKeyToAddress$1=(t,e)=>{const n=toString$6(base58ToBytes(e).slice(0,1),"hex"),a=fromString$3(t,"hex"),o=new Ripemd160().update(sha256$1(a)).digest(),l=n+toString$6(o,"hex"),u=sha256$1(fromString$3(l,"hex")),d=sha256$1(u),m=toString$6(d,"hex").substring(0,8),y=l+m;return bytesToBase58(fromString$3(y,"hex"))},EC$2=elliptic.ec,publicKeyToAddress=(t,e)=>{const a=new EC$2("secp256k1").keyFromPublic(t,"hex").getPublic().encode("hex",!0),o=fromString$3(a,"hex"),l=new Ripemd160().update(sha256$1(o)).digest(),u=bech32.toWords(l);return bech32.encode(e,u).replace(e,"")},verifyBlockchainAccountId=(t,e)=>{if(e){const n=e.split(":");switch(n[0]){case"bip122":n[n.length-1]=publicKeyToAddress$1(t,n[n.length-1]);break;case"cosmos":n[n.length-1]=publicKeyToAddress(t,n[1]);break;case"eip155":n[n.length-1]=toEthereumAddress(t);break;default:return!1}return n.join(":").toLowerCase()===e.toLowerCase()}return!1},secp256k1=new elliptic.ec("secp256k1"),secp256r1=new elliptic.ec("p256");function toSignatureObject(t,e=!1){const n=base64ToBytes(t);if(n.length!==(e?65:64))throw new Error("wrong signature length");const a=bytesToHex(n.slice(0,32)),o=bytesToHex(n.slice(32,64)),l={r:a,s:o};return e&&(l.recoveryParam=n[64]),l}function extractPublicKeyBytes(t){if(t.publicKeyBase58)return base58ToBytes(t.publicKeyBase58);if(t.publicKeyBase64)return base64ToBytes(t.publicKeyBase64);if(t.publicKeyHex)return hexToBytes(t.publicKeyHex);if(t.publicKeyJwk&&t.publicKeyJwk.crv==="secp256k1"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return hexToBytes(secp256k1.keyFromPublic({x:bytesToHex(base64ToBytes(t.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.crv==="P-256"&&t.publicKeyJwk.x&&t.publicKeyJwk.y)return hexToBytes(secp256r1.keyFromPublic({x:bytesToHex(base64ToBytes(t.publicKeyJwk.x)),y:bytesToHex(base64ToBytes(t.publicKeyJwk.y))}).getPublic("hex"));if(t.publicKeyJwk&&t.publicKeyJwk.kty==="OKP"&&t.publicKeyJwk.crv==="Ed25519"&&t.publicKeyJwk.x)return base64ToBytes(t.publicKeyJwk.x);if(t.publicKeyMultibase){const{base16:e,base58btc:n,base64:a,base64url:o}=bases$1;return e.decoder.or(n.decoder.or(a.decoder.or(o.decoder))).decode(t.publicKeyMultibase)}return new Uint8Array}function verifyES256(t,e,n){const a=sha256$1(t),o=toSignatureObject(e),u=n.filter(({ethereumAddress:d,blockchainAccountId:m})=>typeof d>"u"&&typeof m>"u").find(d=>{try{const m=extractPublicKeyBytes(d);return secp256r1.keyFromPublic(m).verify(a,o)}catch{return!1}});if(!u)throw new Error("invalid_signature: Signature invalid for JWT");return u}function verifyES256K(t,e,n){const a=sha256$1(t),o=toSignatureObject(e),l=n.filter(({ethereumAddress:m,blockchainAccountId:y})=>typeof m>"u"&&typeof y>"u"),u=n.filter(({ethereumAddress:m,blockchainAccountId:y})=>typeof m<"u"||typeof y<"u");let d=l.find(m=>{try{const y=extractPublicKeyBytes(m);return secp256k1.keyFromPublic(y).verify(a,o)}catch{return!1}});if(!d&&u.length>0&&(d=verifyRecoverableES256K(t,e,u)),!d)throw new Error("invalid_signature: Signature invalid for JWT");return d}function verifyRecoverableES256K(t,e,n){let a;if(e.length>86)a=[toSignatureObject(e,!0)];else{const u=toSignatureObject(e,!1);a=[{...u,recoveryParam:0},{...u,recoveryParam:1}]}const o=u=>{const d=sha256$1(t),m=secp256k1.recoverPubKey(d,u,u.recoveryParam),y=m.encode("hex"),b=m.encode("hex",!0),_=toEthereumAddress(y).toLowerCase();return n.find(E=>{var A,C,k;const B=bytesToHex(extractPublicKeyBytes(E));return B===y||B===b||((A=E.ethereumAddress)==null?void 0:A.toLowerCase())===_||((C=E.blockchainAccountId)==null||(k=C.split("@eip155"))==null?void 0:k[0].toLowerCase())===_||verifyBlockchainAccountId(y,E.blockchainAccountId)})},l=a.map(o).filter(u=>typeof u<"u");if(l.length===0)throw new Error("invalid_signature: Signature invalid for JWT");return l[0]}function verifyEd25519(t,e,n){const a=stringToBytes$1(t),o=base64ToBytes(e),l=n.find(u=>ed25519.verify(extractPublicKeyBytes(u),a,o));if(!l)throw new Error("invalid_signature: Signature invalid for JWT");return l}const algorithms={ES256:verifyES256,ES256K:verifyES256K,"ES256K-R":verifyRecoverableES256K,Ed25519:verifyEd25519,EdDSA:verifyEd25519};function VerifierAlgorithm(t){const e=algorithms[t];if(!e)throw new Error(`not_supported: Unsupported algorithm ${t}`);return e}VerifierAlgorithm.toSignatureObject=toSignatureObject;function decodeJWS(t){const e=t.match(/^([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)\.([a-zA-Z0-9_-]+)$/);if(e)return{header:JSON.parse(decodeBase64url(e[1])),payload:e[2],signature:e[3],data:`${e[1]}.${e[2]}`};throw new Error("invalid_argument: Incorrect format JWS")}function verifyJWSDecoded({header:t,data:e,signature:n},a){return Array.isArray(a)||(a=[a]),VerifierAlgorithm(t.alg)(e,n,a)}function verifyJWS(t,e){const n=decodeJWS(t);return verifyJWSDecoded(n,e)}const _iteratorSymbol=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function _settle(t,e,n){if(!t.s){if(n instanceof _Pact)if(n.s)e&1&&(e=n.s),n=n.v;else{n.o=_settle.bind(null,t,e);return}if(n&&n.then){n.then(_settle.bind(null,t,e),_settle.bind(null,t,2));return}t.s=e,t.v=n;const a=t.o;a&&a(t)}}const _Pact=function(){function t(){}return t.prototype.then=function(e,n){const a=new t,o=this.s;if(o){const l=o&1?e:n;if(l){try{_settle(a,1,l(this.v))}catch(u){_settle(a,2,u)}return a}else return this}return this.o=function(l){try{const u=l.v;l.s&1?_settle(a,1,e?e(u):u):n?_settle(a,1,n(u)):_settle(a,2,u)}catch(u){_settle(a,2,u)}},a},t}();function _isSettledPact(t){return t instanceof _Pact&&t.s&1}function _forTo(t,e,n){var a=-1,o,l;function u(d){try{for(;++a<t.length&&(!n||!n());)if(d=e(a),d&&d.then)if(_isSettledPact(d))d=d.v;else{d.then(u,l||(l=_settle.bind(null,o=new _Pact,2)));return}o?_settle(o,1,d):o=d}catch(m){_settle(o||(o=new _Pact),2,m)}}return u(),o}function _forOf(t,e,n){if(typeof t[_iteratorSymbol]=="function"){let b=function(_){try{for(;!(o=a.next()).done&&(!n||!n());)if(_=e(o.value),_&&_.then)if(_isSettledPact(_))_=_.v;else{_.then(b,u||(u=_settle.bind(null,l=new _Pact,2)));return}l?_settle(l,1,_):l=_}catch(w){_settle(l||(l=new _Pact),2,w)}};var a=t[_iteratorSymbol](),o,l,u;if(b(),a.return){var d=function(_){try{o.done||a.return()}catch{}return _};if(l&&l.then)return l.then(d,function(_){throw d(_)});d()}return l}if(!("length"in t))throw new TypeError("Object is not iterable");for(var m=[],y=0;y<t.length;y++)m.push(t[y]);return _forTo(m,function(b){return e(m[b])},n)}function encodeJWE({ciphertext:t,tag:e,iv:n,protectedHeader:a,recipient:o},l){const u={protected:a,iv:bytesToBase64url(n),ciphertext:bytesToBase64url(t),tag:bytesToBase64url(e)};return l&&(u.aad=bytesToBase64url(l)),o&&(u.recipients=[o]),u}const createJWE=function(t,e,n={},a){try{if(e[0].alg==="dir"){if(e.length>1)throw new Error('not_supported: Can only do "dir" encryption to one key.');return Promise.resolve(e[0].encrypt(t,n,a)).then(function(o){return encodeJWE(o,a)})}else{const o=e[0].enc;if(!e.reduce((m,y)=>m&&y.enc===o,!0))throw new Error("invalid_argument: Incompatible encrypters passed");let l,u;const d=_forOf(e,function(m){const y=function(){return l?Promise.resolve(m.encryptCek==null?void 0:m.encryptCek(l)).then(function(b){if(b){var _,w;(_=u)==null||(w=_.recipients)==null||w.push(b)}}):Promise.resolve(m.encrypt(t,n,a)).then(function(b){l=b.cek,u=encodeJWE(b,a)})}();if(y&&y.then)return y.then(function(){})});return Promise.resolve(d&&d.then?d.then(function(){return u}):u)}}catch(o){return Promise.reject(o)}},resolveX25519Encrypters=function(t,e){try{const n=function(o,l=[]){try{return Promise.resolve(e.resolve(o)).then(function({didResolutionMetadata:u,didDocument:d}){function m(){var _,w;const E=(_=d.keyAgreement)==null||(w=_.map(C=>typeof C=="string"?[...d.publicKey||[],...d.verificationMethod||[]].find(k=>k.id===C):C))==null?void 0:w.filter(C=>typeof C<"u"),A=E?.filter(C=>C.type==="X25519KeyAgreementKey2019"&&Boolean(C.publicKeyBase58))||[];if(!A.length&&!y.length)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);return A.map(C=>x25519Encrypter(base58ToBytes(C.publicKeyBase58),C.id)).concat(...y)}if(l.push(o),u!=null&&u.error||d==null)throw new Error(`resolver_error: Could not resolve ${o}: ${u.error}, ${u.message}`);let y=[];if(!d.controller&&!d.keyAgreement)throw new Error(`no_suitable_keys: Could not find x25519 key for ${o}`);const b=function(){if(d.controller){let _=Array.isArray(d.controller)?d.controller:[d.controller];_=_.filter(E=>!l.includes(E));const w=_.map(E=>n(E,l).catch(()=>[]));return Promise.resolve(Promise.all(w)).then(function(E){y=[].concat(...E)})}}();return b&&b.then?b.then(m):m(b)})}catch(u){return Promise.reject(u)}},a=t.map(o=>n(o));return Promise.resolve(Promise.all(a)).then(function(o){return[].concat(...o)})}catch(n){return Promise.reject(n)}};function xc20pEncrypter(t){const e=new xchacha20poly1305.XChaCha20Poly1305(t);return(n,a)=>{const o=random.randomBytes(e.nonceLength),l=e.seal(o,n,a);return{ciphertext:l.subarray(0,l.length-e.tagLength),tag:l.subarray(l.length-e.tagLength),iv:o}}}function xc20pDirEncrypter(t){const e=function(l,u={},d){try{const m=encodeBase64url(JSON.stringify(Object.assign({alg:o},u,{enc:a}))),y=fromString$3(d?`${m}.${bytesToBase64url(d)}`:m);return Promise.resolve({...n(l,y),protectedHeader:m})}catch(m){return Promise.reject(m)}},n=xc20pEncrypter(t),a="XC20P",o="dir";return{alg:o,enc:a,encrypt:e}}function x25519Encrypter(t,e){const n=function(d,m={},y){try{Object.assign(m,{alg:void 0});const b=random.randomBytes(32);return Promise.resolve(xc20pDirEncrypter(b).encrypt(d,m,y)).then(function(_){return Promise.resolve(a(b)).then(function(w){return{..._,recipient:w,cek:b}})})}catch(b){return Promise.reject(b)}},a=function(d){try{const m=x25519.generateKeyPair(),y=x25519.sharedKey(m.secretKey,t),b=concatKDF(y,l,o),_=xc20pEncrypter(b)(d),w={encrypted_key:bytesToBase64url(_.ciphertext),header:{alg:o,iv:bytesToBase64url(_.iv),tag:bytesToBase64url(_.tag),epk:{kty:"OKP",crv:u,x:bytesToBase64url(m.publicKey)}}};return e&&(w.header.kid=e),Promise.resolve(w)}catch(m){return Promise.reject(m)}},o="ECDH-ES+XC20PKW",u="X25519";return{alg:o,enc:"XC20P",encrypt:n,encryptCek:a}}const readonly=({enumerable:t=!0,configurable:e=!1}={})=>({enumerable:t,configurable:e,writable:!1}),links=function*(t,e){if(t!=null&&!(t instanceof Uint8Array))for(const[n,a]of Object.entries(t)){const o=[...e,n];if(a!=null&&typeof a=="object")if(Array.isArray(a))for(const[l,u]of a.entries()){const d=[...o,l],m=CID$1.asCID(u);m?yield[d.join("/"),m]:typeof u=="object"&&(yield*links(u,d))}else{const l=CID$1.asCID(a);l?yield[o.join("/"),l]:yield*links(a,o)}}},tree=function*(t,e){if(t!=null)for(const[n,a]of Object.entries(t)){const o=[...e,n];if(yield o.join("/"),a!=null&&!(a instanceof Uint8Array)&&typeof a=="object"&&!CID$1.asCID(a))if(Array.isArray(a))for(const[l,u]of a.entries()){const d=[...o,l];yield d.join("/"),typeof u=="object"&&!CID$1.asCID(u)&&(yield*tree(u,d))}else yield*tree(a,o)}},get=(t,e)=>{let n=t;for(const[a,o]of e.entries()){if(n=n[o],n==null)throw new Error(`Object has no property at ${e.slice(0,a+1).map(u=>`[${JSON.stringify(u)}]`).join("")}`);const l=CID$1.asCID(n);if(l)return{value:l,remaining:e.slice(a+1).join("/")}}return{value:n}};class Block{constructor({cid:e,bytes:n,value:a}){if(!e||!n||typeof a>"u")throw new Error("Missing required argument");this.cid=e,this.bytes=n,this.value=a,this.asBlock=this,Object.defineProperties(this,{cid:readonly(),bytes:readonly(),value:readonly(),asBlock:readonly()})}links(){return links(this.value,[])}tree(){return tree(this.value,[])}get(e="/"){return get(this.value,e.split("/").filter(Boolean))}}const encode$e=async({value:t,codec:e,hasher:n})=>{if(typeof t>"u")throw new Error('Missing required argument "value"');if(!e||!n)throw new Error("Missing required argument: codec or hasher");const a=e.encode(t),o=await n.digest(a),l=CID$1.create(1,e.code,o);return new Block({value:t,bytes:a,cid:l})},decode$d=async({bytes:t,codec:e,hasher:n})=>{if(!t)throw new Error('Missing required argument "bytes"');if(!e||!n)throw new Error("Missing required argument: codec or hasher");const a=e.decode(t),o=await n.digest(t),l=CID$1.create(1,e.code,o);return new Block({value:a,bytes:t,cid:l})},CID_CBOR_TAG$1=42;function cidEncoder$1(t){if(t.asCID!==t)return null;const e=CID$1.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG$1),new Token(Type.bytes,n)]}function undefinedEncoder$1(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder$1(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions$1={float64:!0,typeEncoders:{Object:cidEncoder$1,undefined:undefinedEncoder$1,number:numberEncoder$1}};function cidDecoder$1(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(t.subarray(1))}const decodeOptions$1={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions$1.tags[CID_CBOR_TAG$1]=cidDecoder$1;const name$1="dag-cbor",code$3=113,encode$d=t=>encode$p(t,encodeOptions$1),decode$c=t=>decode$o(t,decodeOptions$1),dagCBOR=Object.freeze(Object.defineProperty({__proto__:null,code:code$3,decode:decode$c,encode:encode$d,name:name$1},Symbol.toStringTag,{value:"Module"})),ENC_BLOCK_SIZE=24;async function encodePayload(t){const e=await encode$e({value:t,codec:dagCBOR,hasher:sha256$3});return{cid:e.cid,linkedBlock:e.bytes}}function pad(t,e=ENC_BLOCK_SIZE){const n=(e-t.length%e)%e,a=new Uint8Array(t.length+n);return a.set(t,0),a}async function encodeIdentityCID(t){return(await encode$e({value:t,codec:dagCBOR,hasher:identity$3})).cid}function decodeIdentityCID(t){if(t=CID$1.asCID(t),t.code!==code$3)throw new Error("CID codec must be dag-cbor");if(t.multihash.code!==identity$3.code)throw new Error("CID must use identity multihash");return decode$c(t.multihash.digest)}async function prepareCleartext(t,e){return pad((await encodeIdentityCID(t)).bytes,e)}function decodeCleartext(t){return decodeIdentityCID(CID$1.decodeFirst(t)[0])}const abortedReasonSymbol=Symbol("aborted");function abortable(t,e){if(e.aborted)return Promise.reject(abortedReasonSymbol);let n;const a=new Promise((o,l)=>{n=l});return e.addEventListener("abort",()=>{n(abortedReasonSymbol)}),Promise.race([t,a])}let nanoid$1=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const ABORT_REQUEST_METHOD="utils_abort_request";var ERROR_CODE;(function(t){t[t.PARSE_ERROR=-32700]="PARSE_ERROR",t[t.INVALID_REQUEST=-32600]="INVALID_REQUEST",t[t.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",t[t.INVALID_PARAMS=-32602]="INVALID_PARAMS",t[t.INTERNAL_ERROR=-32603]="INTERNAL_ERROR"})(ERROR_CODE||(ERROR_CODE={}));const ERROR_MESSAGE={[ERROR_CODE.PARSE_ERROR]:"Parse error",[ERROR_CODE.INVALID_REQUEST]:"Invalid request",[ERROR_CODE.METHOD_NOT_FOUND]:"Method not found",[ERROR_CODE.INVALID_PARAMS]:"Invalid params",[ERROR_CODE.INTERNAL_ERROR]:"Internal error"};function isServerError(t){return-32e3>=t&&t>=-32099}function getErrorMessage(t){return ERROR_MESSAGE[t.toString()]??(isServerError(t)?"Server error":"Application error")}class RPCError extends Error{static fromObject(e){return new RPCError(e.code,e.message,e.data)}toObject(){return{code:this.code,data:this.data,message:this.message}}constructor(e,n,a){super(),Object.setPrototypeOf(this,RPCError.prototype),this.code=e,this.data=a,this.message=n??getErrorMessage(e)}}function createErrorFactory(t){const e=ERROR_MESSAGE[t];return function(a){return new RPCError(t,e,a)}}createErrorFactory(ERROR_CODE.PARSE_ERROR);createErrorFactory(ERROR_CODE.INVALID_REQUEST);createErrorFactory(ERROR_CODE.METHOD_NOT_FOUND);createErrorFactory(ERROR_CODE.INVALID_PARAMS);createErrorFactory(ERROR_CODE.INTERNAL_ERROR);function _checkPrivateRedeclaration(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _classApplyDescriptorGet(t,e){return e.get?e.get.call(t):e.value}function _classApplyDescriptorSet(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}function _classExtractFieldDescriptor(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}function _classPrivateFieldGet(t,e){var n=_classExtractFieldDescriptor(t,e,"get");return _classApplyDescriptorGet(t,n)}function _classPrivateFieldInit(t,e,n){_checkPrivateRedeclaration(t,e),e.set(t,n)}function _classPrivateFieldSet(t,e,n){var a=_classExtractFieldDescriptor(t,e,"set");return _classApplyDescriptorSet(t,a,n),n}var _connection=new WeakMap;class RPCClient{get connection(){return _classPrivateFieldGet(this,_connection)}createID(){return nanoid$1()}request(e,n=void 0,a={}){const{signal:o}=a;if(o?.aborted)return Promise.reject(abortedReasonSymbol);const l=this.createID(),u=_classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",id:l,method:e,params:n}).then(d=>{if(d==null)throw new Error("Missing response");if(d.error!=null)throw RPCError.fromObject(d.error);return d.result});return o==null?u:(o.addEventListener("abort",()=>{this.notify(ABORT_REQUEST_METHOD,{id:l})}),abortable(u,o))}async notify(e,n=void 0){await _classPrivateFieldGet(this,_connection).send({jsonrpc:"2.0",method:e,params:n})}constructor(e){_classPrivateFieldInit(this,_connection,{writable:!0,value:void 0}),_classPrivateFieldSet(this,_connection,e)}}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){return hasRequiredIdentifiers||(hasRequiredIdentifiers=1,identifiers={ALT:1,CAT:2,REP:3,RNM:4,TRG:5,TBS:6,TLS:7,UDT:11,AND:12,NOT:13,BKR:14,BKA:15,BKN:16,ABG:17,AEN:18,ACTIVE:100,MATCH:101,EMPTY:102,NOMATCH:103,SEM_PRE:200,SEM_POST:201,SEM_OK:300,SEM_SKIP:301,ATTR_N:400,ATTR_R:401,ATTR_MR:402,LOOKAROUND_NONE:500,LOOKAROUND_AHEAD:501,LOOKAROUND_BEHIND:502,BKR_MODE_UM:601,BKR_MODE_PM:602,BKR_MODE_CS:603,BKR_MODE_CI:604}),identifiers}var utilities={},style,hasRequiredStyle;function requireStyle(){return hasRequiredStyle||(hasRequiredStyle=1,style={CLASS_MONOSPACE:"apg-mono",CLASS_ACTIVE:"apg-active",CLASS_EMPTY:"apg-empty",CLASS_MATCH:"apg-match",CLASS_NOMATCH:"apg-nomatch",CLASS_LOOKAHEAD:"apg-lh-match",CLASS_LOOKBEHIND:"apg-lb-match",CLASS_REMAINDER:"apg-remainder",CLASS_CTRLCHAR:"apg-ctrl-char",CLASS_LINEEND:"apg-line-end",CLASS_ERROR:"apg-error",CLASS_PHRASE:"apg-phrase",CLASS_EMPTYPHRASE:"apg-empty-phrase",CLASS_STATE:"apg-state",CLASS_STATS:"apg-stats",CLASS_TRACE:"apg-trace",CLASS_GRAMMAR:"apg-grammar",CLASS_RULES:"apg-rules",CLASS_RULESLINK:"apg-rules-link",CLASS_ATTRIBUTES:"apg-attrs"}),style}var converter={},transformers={},hasRequiredTransformers;function requireTransformers(){if(hasRequiredTransformers)return transformers;hasRequiredTransformers=1;const t=commonjsGlobal,e=4294967292,n=4294967293,a=4294967294,o=4294967295,l=[0,1,3,7,15,31,63,127,255,511,1023],u=["00","01","02","03","04","05","06","07","08","09","0A","0B","0C","0D","0E","0F","10","11","12","13","14","15","16","17","18","19","1A","1B","1C","1D","1E","1F","20","21","22","23","24","25","26","27","28","29","2A","2B","2C","2D","2E","2F","30","31","32","33","34","35","36","37","38","39","3A","3B","3C","3D","3E","3F","40","41","42","43","44","45","46","47","48","49","4A","4B","4C","4D","4E","4F","50","51","52","53","54","55","56","57","58","59","5A","5B","5C","5D","5E","5F","60","61","62","63","64","65","66","67","68","69","6A","6B","6C","6D","6E","6F","70","71","72","73","74","75","76","77","78","79","7A","7B","7C","7D","7E","7F","80","81","82","83","84","85","86","87","88","89","8A","8B","8C","8D","8E","8F","90","91","92","93","94","95","96","97","98","99","9A","9B","9C","9D","9E","9F","A0","A1","A2","A3","A4","A5","A6","A7","A8","A9","AA","AB","AC","AD","AE","AF","B0","B1","B2","B3","B4","B5","B6","B7","B8","B9","BA","BB","BC","BD","BE","BF","C0","C1","C2","C3","C4","C5","C6","C7","C8","C9","CA","CB","CC","CD","CE","CF","D0","D1","D2","D3","D4","D5","D6","D7","D8","D9","DA","DB","DC","DD","DE","DF","E0","E1","E2","E3","E4","E5","E6","E7","E8","E9","EA","EB","EC","ED","EE","EF","F0","F1","F2","F3","F4","F5","F6","F7","F8","F9","FA","FB","FC","FD","FE","FF"],d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),m=[];d.forEach(_=>{m.push(_.charCodeAt(0))}),transformers.utf8={encode(_){const w=[];return _.forEach(E=>{if(E>=0&&E<=127)w.push(E);else if(E<=2047)w.push(192+(E>>6&l[5])),w.push(128+(E&l[6]));else if(E<55296||E>57343&&E<=65535)w.push(224+(E>>12&l[4])),w.push(128+(E>>6&l[6])),w.push(128+(E&l[6]));else if(E>=65536&&E<=1114111){const A=E>>16&l[5];w.push(240+(A>>2)),w.push(128+((A&l[2])<<4)+(E>>12&l[4])),w.push(128+(E>>6&l[6])),w.push(128+(E&l[6]))}else throw new RangeError(`utf8.encode: character out of range: char: ${E}`)}),Buffer$y.from(w)},decode(_,w){function E(Q,oe){if((oe&192)!==128)return n;const ae=((Q&l[5])<<6)+(oe&l[6]);return ae<128?e:ae}function A(Q,oe,ae){if((ae&192)!==128||(oe&192)!==128)return n;const U=((Q&l[4])<<12)+((oe&l[6])<<6)+(ae&l[6]);return U<2048?e:U>=55296&&U<=57343?a:U}function C(Q,oe,ae,U){if((U&192)!==128||(ae&192)!==128||(oe&192)!==128)return n;const I=(((Q&l[3])<<2)+(oe>>4&l[2])<<16)+((oe&l[4])<<12)+((ae&l[6])<<6)+(U&l[6]);return I<65536?e:I>1114111?a:I}let k,B,D,q,j,J;const Y=_.length;let L=w?3:0;const Z=[];for(;L<Y;){B=_[L],k=o;const Q=!0;for(;Q;){if(B>=0&&B<=127){k=B,J=1;break}if(D=L+1,D<Y&&B>=194&&B<=223){k=E(B,_[D]),J=2;break}if(q=L+2,q<Y&&B>=224&&B<=239){k=A(B,_[D],_[q]),J=3;break}if(j=L+3,j<Y&&B>=240&&B<=244){k=C(B,_[D],_[q],_[j]),J=4;break}break}if(k>1114111){const oe=`byte[${L}]`;throw k===o?new RangeError(`utf8.decode: ill-formed UTF8 byte sequence found at: ${oe}`):k===n?new RangeError(`utf8.decode: illegal trailing byte found at: ${oe}`):k===a?new RangeError(`utf8.decode: code point out of range found at: ${oe}`):k===e?new RangeError(`utf8.decode: non-shortest form found at: ${oe}`):new RangeError(`utf8.decode: unrecognized error found at: ${oe}`)}Z.push(k),L+=J}return Z}},transformers.utf16be={encode(_){const w=[];let E,A,C;for(let k=0;k<_.length;k+=1)if(E=_[k],E>=0&&E<=55295||E>=57344&&E<=65535)w.push(E>>8&l[8]),w.push(E&l[8]);else if(E>=65536&&E<=1114111)C=E-65536,A=55296+(C>>10),C=56320+(C&l[10]),w.push(A>>8&l[8]),w.push(A&l[8]),w.push(C>>8&l[8]),w.push(C&l[8]);else throw new RangeError(`utf16be.encode: UTF16BE value out of range: char[${k}]: ${E}`);return Buffer$y.from(w)},decode(_,w){if(_.length%2>0)throw new RangeError(`utf16be.decode: data length must be even multiple of 2: length: ${_.length}`);const E=[],A=_.length;let C=w?2:0,k=0,B,D,q,j,J,Y;for(;C<A;){for(;;){if(q=C+1,q<A){if(J=(_[C]<<8)+_[q],J<55296||J>57343){B=J,D=2;break}if(j=C+3,j<A&&(Y=(_[C+2]<<8)+_[j],J<=56319&&Y>=56320&&Y<=57343)){B=65536+(J-55296<<10)+(Y-56320),D=4;break}}throw new RangeError(`utf16be.decode: ill-formed UTF16BE byte sequence found: byte[${C}]`)}E[k++]=B,C+=D}return E}},transformers.utf16le={encode(_){const w=[];let E,A,C;for(let k=0;k<_.length;k+=1)if(E=_[k],E>=0&&E<=55295||E>=57344&&E<=65535)w.push(E&l[8]),w.push(E>>8&l[8]);else if(E>=65536&&E<=1114111)C=E-65536,A=55296+(C>>10),C=56320+(C&l[10]),w.push(A&l[8]),w.push(A>>8&l[8]),w.push(C&l[8]),w.push(C>>8&l[8]);else throw new RangeError(`utf16le.encode: UTF16LE value out of range: char[${k}]: ${E}`);return Buffer$y.from(w)},decode(_,w){if(_.length%2>0)throw new RangeError(`utf16le.decode: data length must be even multiple of 2: length: ${_.length}`);const E=[],A=_.length;let C=w?2:0,k=0,B,D,q,j,J,Y;for(;C<A;){for(;;){if(q=C+1,q<A){if(J=(_[q]<<8)+_[C],J<55296||J>57343){B=J,D=2;break}if(j=C+3,j<A&&(Y=(_[j]<<8)+_[C+2],J<=56319&&Y>=56320&&Y<=57343)){B=65536+(J-55296<<10)+(Y-56320),D=4;break}}throw new RangeError(`utf16le.decode: ill-formed UTF16LE byte sequence found: byte[${C}]`)}E[k++]=B,C+=D}return E}},transformers.utf32be={encode(_){const w=Buffer$y.alloc(_.length*4);let E=0;return _.forEach(A=>{if(A>=55296&&A<=57343||A>1114111)throw new RangeError(`utf32be.encode: UTF32BE character code out of range: char[${E/4}]: ${A}`);w[E++]=A>>24&l[8],w[E++]=A>>16&l[8],w[E++]=A>>8&l[8],w[E++]=A&l[8]}),w},decode(_,w){if(_.length%4>0)throw new RangeError(`utf32be.decode: UTF32BE byte length must be even multiple of 4: length: ${_.length}`);const E=[];let A=w?4:0;for(;A<_.length;A+=4){const C=(_[A]<<24)+(_[A+1]<<16)+(_[A+2]<<8)+_[A+3];if(C>=55296&&C<=57343||C>1114111)throw new RangeError(`utf32be.decode: UTF32BE character code out of range: char[${A/4}]: ${C}`);E.push(C)}return E}},transformers.utf32le={encode(_){const w=Buffer$y.alloc(_.length*4);let E=0;return _.forEach(A=>{if(A>=55296&&A<=57343||A>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${E/4}]: ${A}`);w[E++]=A&l[8],w[E++]=A>>8&l[8],w[E++]=A>>16&l[8],w[E++]=A>>24&l[8]}),w},decode(_,w){if(_.length%4>0)throw new RangeError(`utf32be.decode: UTF32LE byte length must be even multiple of 4: length: ${_.length}`);const E=[];let A=w?4:0;for(;A<_.length;A+=4){const C=(_[A+3]<<24)+(_[A+2]<<16)+(_[A+1]<<8)+_[A];if(C>=55296&&C<=57343||C>1114111)throw new RangeError(`utf32le.encode: UTF32LE character code out of range: char[${A/4}]: ${C}`);E.push(C)}return E}},transformers.uint7={encode(_){const w=Buffer$y.alloc(_.length);for(let E=0;E<_.length;E+=1){if(_[E]>127)throw new RangeError(`uint7.encode: UINT7 character code out of range: char[${E}]: ${_[E]}`);w[E]=_[E]}return w},decode(_){const w=[];for(let E=0;E<_.length;E+=1){if(_[E]>127)throw new RangeError(`uint7.decode: UINT7 character code out of range: byte[${E}]: ${_[E]}`);w[E]=_[E]}return w}},transformers.uint8={encode(_){const w=Buffer$y.alloc(_.length);for(let E=0;E<_.length;E+=1){if(_[E]>255)throw new RangeError(`uint8.encode: UINT8 character code out of range: char[${E}]: ${_[E]}`);w[E]=_[E]}return w},decode(_){const w=[];for(let E=0;E<_.length;E+=1)w[E]=_[E];return w}},transformers.uint16be={encode(_){const w=Buffer$y.alloc(_.length*2);let E=0;return _.forEach(A=>{if(A>65535)throw new RangeError(`uint16be.encode: UINT16BE character code out of range: char[${E/2}]: ${A}`);w[E++]=A>>8&l[8],w[E++]=A&l[8]}),w},decode(_){if(_.length%2>0)throw new RangeError(`uint16be.decode: UINT16BE byte length must be even multiple of 2: length: ${_.length}`);const w=[];for(let E=0;E<_.length;E+=2)w.push((_[E]<<8)+_[E+1]);return w}},transformers.uint16le={encode(_){const w=Buffer$y.alloc(_.length*2);let E=0;return _.forEach(A=>{if(A>65535)throw new RangeError(`uint16le.encode: UINT16LE character code out of range: char[${E/2}]: ${A}`);w[E++]=A&l[8],w[E++]=A>>8&l[8]}),w},decode(_){if(_.length%2>0)throw new RangeError(`uint16le.decode: UINT16LE byte length must be even multiple of 2: length: ${_.length}`);const w=[];for(let E=0;E<_.length;E+=2)w.push((_[E+1]<<8)+_[E]);return w}},transformers.uint32be={encode(_){const w=Buffer$y.alloc(_.length*4);let E=0;return _.forEach(A=>{w[E++]=A>>24&l[8],w[E++]=A>>16&l[8],w[E++]=A>>8&l[8],w[E++]=A&l[8]}),w},decode(_){if(_.length%4>0)throw new RangeError(`uint32be.decode: UINT32BE byte length must be even multiple of 4: length: ${_.length}`);const w=[];for(let E=0;E<_.length;E+=4)w.push((_[E]<<24)+(_[E+1]<<16)+(_[E+2]<<8)+_[E+3]);return w}},transformers.uint32le={encode(_){const w=Buffer$y.alloc(_.length*4);let E=0;return _.forEach(A=>{w[E++]=A&l[8],w[E++]=A>>8&l[8],w[E++]=A>>16&l[8],w[E++]=A>>24&l[8]}),w},decode(_){if(_.length%4>0)throw new RangeError(`uint32le.decode: UINT32LE byte length must be even multiple of 4: length: ${_.length}`);const w=[];for(let E=0;E<_.length;E+=4)w.push((_[E+3]<<24)+(_[E+2]<<16)+(_[E+1]<<8)+_[E]);return w}},transformers.string={encode(_){return t.utf16le.encode(_).toString("utf16le")},decode(_){return t.utf16le.decode(Buffer$y.from(_,"utf16le"),0)}},transformers.escaped={encode(_){const w=[];for(let E=0;E<_.length;E+=1){const A=_[E];if(A===96)w.push(A),w.push(A);else if(A===10)w.push(A);else if(A>=32&&A<=126)w.push(A);else{let C="";if(A>=0&&A<=31)C+=`\`x${u[A]}`;else if(A>=127&&A<=255)C+=`\`x${u[A]}`;else if(A>=256&&A<=65535)C+=`\`u${u[A>>8&l[8]]}${u[A&l[8]]}`;else if(A>=65536&&A<=4294967295){C+="`u{";const B=A>>24&l[8];B>0&&(C+=u[B]),C+=`${u[A>>16&l[8]]+u[A>>8&l[8]]+u[A&l[8]]}}`}else throw new Error("escape.encode(char): char > 0xffffffff not allowed");Buffer$y.from(C).forEach(B=>{w.push(B)})}}return Buffer$y.from(w)},decode(_){function w(Y){return Y>=48&&Y<=57||Y>=65&&Y<=70||Y>=97&&Y<=102}function E(Y,L,Z){const Q={char:null,nexti:Y+2,error:!0};if(Y+1<L&&w(Z[Y])&&w(Z[Y+1])){const oe=String.fromCodePoint(Z[Y],Z[Y+1]);Q.char=parseInt(oe,16),Number.isNaN(Q.char)||(Q.error=!1)}return Q}function A(Y,L,Z){const Q={char:null,nexti:Y+4,error:!0};if(Y+3<L&&w(Z[Y])&&w(Z[Y+1])&&w(Z[Y+2])&&w(Z[Y+3])){const oe=String.fromCodePoint(Z[Y],Z[Y+1],Z[Y+2],Z[Y+3]);Q.char=parseInt(oe,16),Number.isNaN(Q.char)||(Q.error=!1)}return Q}function C(Y,L,Z){const Q={char:null,nexti:Y+4,error:!0};let oe="";for(;Y<L&&w(Z[Y]);)oe+=String.fromCodePoint(Z[Y]),Y+=1;return Q.char=parseInt(oe,16),Z[Y]===125&&!Number.isNaN(Q.char)&&(Q.error=!1),Q.nexti=Y+1,Q}const k=[],B=_.length;let D,q,j,J=0;for(;J<B;){for(;;){if(j=!0,_[J]!==96){k.push(_[J]),J+=1,j=!1;break}if(D=J+1,D>=B)break;if(_[D]===96){k.push(96),J+=2,j=!1;break}if(_[D]===120){if(q=E(D+1,B,_),q.error)break;k.push(q.char),J=q.nexti,j=!1;break}if(_[D]===117){if(_[D+1]===123){if(q=C(D+2,B,_),q.error)break;k.push(q.char),J=q.nexti,j=!1;break}if(q=A(D+1,B,_),q.error)break;k.push(q.char),J=q.nexti,j=!1;break}break}if(j)throw new Error(`escaped.decode: ill-formed escape sequence at buf[${J}]`)}return k}};const y=13,b=10;return transformers.lineEnds={crlf(_){const w=[];let E=0;for(;E<_.length;)switch(_[E]){case y:E+1<_.length&&_[E+1]===b?E+=2:E+=1,w.push(y),w.push(b);break;case b:w.push(y),w.push(b),E+=1;break;default:w.push(_[E]),E+=1;break}return w.length>0&&w[w.length-1]!==b&&(w.push(y),w.push(b)),w},lf(_){const w=[];let E=0;for(;E<_.length;)switch(_[E]){case y:E+1<_.length&&_[E+1]===b?E+=2:E+=1,w.push(b);break;case b:w.push(b),E+=1;break;default:w.push(_[E]),E+=1;break}return w.length>0&&w[w.length-1]!==b&&w.push(b),w}},transformers.base64={encode(_){if(_.length===0)return Buffer$y.alloc(0);let w,E,A,C=_.length%3;C=C>0?3-C:0;let k=(_.length+C)/3;const B=Buffer$y.alloc(k*4);C>0&&(k-=1),w=0,E=0;for(let D=0;D<k;D+=1)A=_[w++]<<16,A+=_[w++]<<8,A+=_[w++],B[E++]=m[A>>18&l[6]],B[E++]=m[A>>12&l[6]],B[E++]=m[A>>6&l[6]],B[E++]=m[A&l[6]];if(C===0)return B;if(C===1)return A=_[w++]<<16,A+=_[w]<<8,B[E++]=m[A>>18&l[6]],B[E++]=m[A>>12&l[6]],B[E++]=m[A>>6&l[6]],B[E]=m[64],B;if(C===2)return A=_[w]<<16,B[E++]=m[A>>18&l[6]],B[E++]=m[A>>12&l[6]],B[E++]=m[64],B[E]=m[64],B},decode(_){function w(J){const Y=[];let L=0;for(let Z=0;Z<J.length;Z+=1){const Q=J[Z],oe=!0;for(;oe&&!(Q===32||Q===9||Q===10||Q===13);){if(Q>=65&&Q<=90){Y.push(Q-65);break}if(Q>=97&&Q<=122){Y.push(Q-71);break}if(Q>=48&&Q<=57){Y.push(Q+4);break}if(Q===43){Y.push(62);break}if(Q===47){Y.push(63);break}if(Q===61){Y.push(64),L+=1;break}throw new RangeError(`base64.decode: invalid character buf[${Z}]: ${Q}`)}}if(Y.length%4>0)throw new RangeError(`base64.decode: string length not integral multiple of 4: ${Y.length}`);switch(L){case 0:break;case 1:if(Y[Y.length-1]!==64)throw new RangeError("base64.decode: one tail character found: not last character");break;case 2:if(Y[Y.length-1]!==64||Y[Y.length-2]!==64)throw new RangeError("base64.decode: two tail characters found: not last characters");break;default:throw new RangeError(`base64.decode: more than two tail characters found: ${L}`)}return{tail:L,buf:Buffer$y.from(Y)}}if(_.length===0)return Buffer$y.alloc(0);const E=w(_),{tail:A}=E,C=E.buf;let k,B,D,q=C.length/4;const j=Buffer$y.alloc(q*3-A);A>0&&(q-=1),B=0,k=0;for(let J=0;J<q;J+=1)D=C[k++]<<18,D+=C[k++]<<12,D+=C[k++]<<6,D+=C[k++],j[B++]=D>>16&l[8],j[B++]=D>>8&l[8],j[B++]=D&l[8];return A===1&&(D=C[k++]<<18,D+=C[k++]<<12,D+=C[k]<<6,j[B++]=D>>16&l[8],j[B]=D>>8&l[8]),A===2&&(D=C[k++]<<18,D+=C[k++]<<12,j[B]=D>>16&l[8]),j},toString(_){if(_.length%4>0)throw new RangeError(`base64.toString: input buffer length not multiple of 4: ${_.length}`);let w="",E=0;function A(k,B,D,q){switch(E){case 76:w+=`\r
${k}${B}${D}${q}`,E=4;break;case 75:w+=`${k}\r
${B}${D}${q}`,E=3;break;case 74:w+=`${k+B}\r
${D}${q}`,E=2;break;case 73:w+=`${k+B+D}\r
${q}`,E=1;break;default:w+=k+B+D+q,E+=4;break}}function C(k){return k>=65&&k<=90||k>=97&&k<=122||k>=48&&k<=57||k===43||k===47||k===61}for(let k=0;k<_.length;k+=4){for(let B=k;B<k+4;B+=1)if(!C(_[B]))throw new RangeError(`base64.toString: buf[${B}]: ${_[B]} : not valid base64 character code`);A(String.fromCharCode(_[k]),String.fromCharCode(_[k+1]),String.fromCharCode(_[k+2]),String.fromCharCode(_[k+3]))}return w}},transformers}var hasRequiredConverter;function requireConverter(){if(hasRequiredConverter)return converter;hasRequiredConverter=1;const t=commonjsGlobal,e=requireTransformers(),n="UTF8",a="UTF16",o="UTF16BE",l="UTF16LE",u="UTF32",d="UTF32BE",m="UTF32LE",y="UINT7",b="ASCII",_="BINARY",w="UINT8",E="UINT16",A="UINT16LE",C="UINT16BE",k="UINT32",B="UINT32LE",D="UINT32BE",q="ESCAPED",j="STRING",J=function(I){I.type=n;const x=I.data;I.bom=0,x.length>=3&&x[0]===239&&x[1]===187&&x[2]===191&&(I.bom=3)},Y=function(I){const x=I.data;switch(I.bom=0,I.type){case a:I.type=o,x.length>=2&&(x[0]===254&&x[1]===255?I.bom=2:x[0]===255&&x[1]===254&&(I.type=l,I.bom=2));break;case o:if(I.type=o,x.length>=2){if(x[0]===254&&x[1]===255)I.bom=2;else if(x[0]===255&&x[1]===254)throw new TypeError(`src type: "${o}" specified but BOM is for "${l}"`)}break;case l:if(I.type=l,x.length>=0){if(x[0]===254&&x[1]===255)throw new TypeError(`src type: "${l}" specified but BOM is for "${o}"`);x[0]===255&&x[1]===254&&(I.bom=2)}break;default:throw new TypeError(`UTF16 BOM: src type "${I.type}" unrecognized`)}},L=function(I){const x=I.data;switch(I.bom=0,I.type){case u:I.type=d,x.length>=4&&(x[0]===0&&x[1]===0&&x[2]===254&&x[3]===255&&(I.bom=4),x[0]===255&&x[1]===254&&x[2]===0&&x[3]===0&&(I.type=m,I.bom=4));break;case d:if(I.type=d,x.length>=4&&(x[0]===0&&x[1]===0&&x[2]===254&&x[3]===255&&(I.bom=4),x[0]===255&&x[1]===254&&x[2]===0&&x[3]===0))throw new TypeError(`src type: ${d} specified but BOM is for ${m}"`);break;case m:if(I.type=m,x.length>=4){if(x[0]===0&&x[1]===0&&x[2]===254&&x[3]===255)throw new TypeError(`src type: "${m}" specified but BOM is for "${d}"`);x[0]===255&&x[1]===254&&x[2]===0&&x[3]===0&&(I.bom=4)}break;default:throw new TypeError(`UTF32 BOM: src type "${I.type}" unrecognized`)}},Z=function(I,x){function T(O){const z={type:"",base64:!1},H=/^(base64:)?([a-zA-Z0-9]+)$/i.exec(O);return H&&(H[2]&&(z.type=H[2].toUpperCase()),H[1]&&(z.base64=!0)),z}if(typeof I!="string"||I==="")throw new TypeError(`type: "${I}" not recognized`);const M=T(I.toUpperCase());if(M.base64){if(M.type===j)throw new TypeError(`type: "${I} "BASE64:" prefix not allowed with type ${j}`);if(Buffer$y.isBuffer(x))M.data=e.base64.decode(x);else if(typeof x=="string"){const O=Buffer$y.from(x,"ascii");M.data=e.base64.decode(O)}else throw new TypeError(`type: "${I} unrecognized data type: typeof(data): ${typeof x}`)}else M.data=x;switch(M.type){case n:J(M);break;case a:case o:case l:Y(M);break;case u:case d:case m:L(M);break;case E:M.type=C;break;case k:M.type=D;break;case b:M.type=y;break;case _:M.type=w;break;case y:case w:case A:case C:case B:case D:case j:case q:break;default:throw new TypeError(`type: "${I}" not recognized`)}if(M.type===j){if(typeof M.data!="string")throw new TypeError(`type: "${I}" but data is not a string`)}else if(!Buffer$y.isBuffer(M.data))throw new TypeError(`type: "${I}" but data is not a Buffer`);return M},Q=function(I,x){function T(O){let z,X;const H={crlf:!1,lf:!1,base64:!1,type:""},P=!0;for(;P;){if(X=O,z=O.slice(0,5),z==="CRLF:"){H.crlf=!0,X=O.slice(5);break}if(z=O.slice(0,3),z==="LF:"){H.lf=!0,X=O.slice(3);break}break}return z=X.split(":"),z.length===1?H.type=z[0]:z.length===2&&z[1]==="BASE64"&&(H.base64=!0,H.type=z[0]),H}if(!Array.isArray(x))throw new TypeError(`dst chars: not array: "${typeof x}`);if(typeof I!="string")throw new TypeError(`dst type: not string: "${typeof I}`);const M=T(I.toUpperCase());switch(M.type){case n:case o:case l:case d:case m:case y:case w:case A:case C:case B:case D:case q:break;case j:if(M.base64)throw new TypeError(`":BASE64" suffix not allowed with type ${j}`);break;case b:M.type=y;break;case _:M.type=w;break;case a:M.type=o;break;case u:M.type=d;break;case E:M.type=C;break;case k:M.type=D;break;default:throw new TypeError(`dst type unrecognized: "${I}" : must have form [crlf:|lf:]type[:base64]`)}return M},oe=function(I,x){switch(I){case n:return e.utf8.encode(x);case o:return e.utf16be.encode(x);case l:return e.utf16le.encode(x);case d:return e.utf32be.encode(x);case m:return e.utf32le.encode(x);case y:return e.uint7.encode(x);case w:return e.uint8.encode(x);case C:return e.uint16be.encode(x);case A:return e.uint16le.encode(x);case D:return e.uint32be.encode(x);case B:return e.uint32le.encode(x);case j:return e.string.encode(x);case q:return e.escaped.encode(x);default:throw new TypeError(`encode type "${I}" not recognized`)}},ae=function(I){switch(I.type){case n:return e.utf8.decode(I.data,I.bom);case l:return e.utf16le.decode(I.data,I.bom);case o:return e.utf16be.decode(I.data,I.bom);case d:return e.utf32be.decode(I.data,I.bom);case m:return e.utf32le.decode(I.data,I.bom);case y:return e.uint7.decode(I.data);case w:return e.uint8.decode(I.data);case C:return e.uint16be.decode(I.data);case A:return e.uint16le.decode(I.data);case D:return e.uint32be.decode(I.data);case B:return e.uint32le.decode(I.data);case j:return e.string.decode(I.data);case q:return e.escaped.decode(I.data);default:throw new TypeError(`decode type "${I.type}" not recognized`)}};return converter.decode=function(I,x){const T=Z(I,x);return ae(T)},converter.encode=function(I,x){let T,M;const O=Q(I,x);return O.crlf?(T=e.lineEnds.crlf(x),M=oe(O.type,T)):O.lf?(T=e.lineEnds.lf(x),M=oe(O.type,T)):M=oe(O.type,x),O.base64&&(M=e.base64.encode(M)),M},converter.convert=function(I,x,T){return t.encode(T,t.decode(I,x))},converter}var emitcss,hasRequiredEmitcss;function requireEmitcss(){return hasRequiredEmitcss||(hasRequiredEmitcss=1,emitcss=function(){return`/* This file automatically generated by jsonToless() and LESS. */
.apg-mono {
  font-family: monospace;
}
.apg-active {
  font-weight: bold;
  color: #000000;
}
.apg-match {
  font-weight: bold;
  color: #264BFF;
}
.apg-empty {
  font-weight: bold;
  color: #0fbd0f;
}
.apg-nomatch {
  font-weight: bold;
  color: #FF4000;
}
.apg-lh-match {
  font-weight: bold;
  color: #1A97BA;
}
.apg-lb-match {
  font-weight: bold;
  color: #5F1687;
}
.apg-remainder {
  font-weight: bold;
  color: #999999;
}
.apg-ctrl-char {
  font-weight: bolder;
  font-style: italic;
  font-size: 0.6em;
}
.apg-line-end {
  font-weight: bold;
  color: #000000;
}
.apg-error {
  font-weight: bold;
  color: #FF4000;
}
.apg-phrase {
  color: #000000;
  background-color: #8caae6;
}
.apg-empty-phrase {
  color: #0fbd0f;
}
table.apg-state {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th,
table.apg-state td {
  text-align: left;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-state th:nth-last-child(2),
table.apg-state td:nth-last-child(2) {
  text-align: right;
}
table.apg-state caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-stats {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats th,
table.apg-stats td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-stats caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-trace th,
table.apg-trace td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-trace th:last-child,
table.apg-trace th:nth-last-child(2),
table.apg-trace td:last-child,
table.apg-trace td:nth-last-child(2) {
  text-align: left;
}
table.apg-grammar {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-grammar th,
table.apg-grammar td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-grammar th:last-child,
table.apg-grammar td:last-child {
  text-align: left;
}
table.apg-rules {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-rules th,
table.apg-rules td {
  text-align: right;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-rules a {
  color: #003399 !important;
}
table.apg-rules a:hover {
  color: #8caae6 !important;
}
table.apg-attrs {
  font-family: monospace;
  margin-top: 5px;
  font-size: 11px;
  line-height: 130%;
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs caption {
  font-size: 125%;
  line-height: 130%;
  font-weight: bold;
  text-align: left;
}
table.apg-attrs th,
table.apg-attrs td {
  text-align: center;
  border: 1px solid black;
  border-collapse: collapse;
}
table.apg-attrs th:nth-child(1),
table.apg-attrs th:nth-child(2),
table.apg-attrs th:nth-child(3) {
  text-align: right;
}
table.apg-attrs td:nth-child(1),
table.apg-attrs td:nth-child(2),
table.apg-attrs td:nth-child(3) {
  text-align: right;
}
table.apg-attrs a {
  color: #003399 !important;
}
table.apg-attrs a:hover {
  color: #8caae6 !important;
}
`}),emitcss}var hasRequiredUtilities;function requireUtilities(){if(hasRequiredUtilities)return utilities;hasRequiredUtilities=1;const t=requireStyle(),e=requireConverter(),n=requireEmitcss(),a=requireIdentifiers(),o="utilities.js: ",l=commonjsGlobal,u=function(m,y,b){let _,w=y;const E=!0;for(;E;){if(m<=0){w=0,_=0;break}if(typeof w!="number"){w=0,_=m;break}if(w>=m){w=m,_=m;break}if(typeof b!="number"){_=m;break}if(_=w+b,_>m){_=m;break}break}return{beg:w,end:_}};utilities.htmlToPage=function(m,y){let b;if(typeof m!="string")throw new Error(`${o}htmlToPage: input HTML is not a string`);typeof y!="string"?b="htmlToPage":b=y;let _="";return _+=`<!DOCTYPE html>
`,_+=`<html lang="en">
`,_+=`<head>
`,_+=`<meta charset="utf-8">
`,_+=`<title>${b}</title>
`,_+=`<style>
`,_+=n(),_+=`</style>
`,_+=`</head>
<body>
`,_+=`<p>${new Date}</p>
`,_+=m,_+=`</body>
</html>
`,_},utilities.parserResultToHtml=function(m,y){let b=null;typeof y=="string"&&y!==""&&(b=y);let _,w;m.success===!0?_=`<span class="${t.CLASS_MATCH}">true</span>`:_=`<span class="${t.CLASS_NOMATCH}">false</span>`,m.state===a.EMPTY?w=`<span class="${t.CLASS_EMPTY}">EMPTY</span>`:m.state===a.MATCH?w=`<span class="${t.CLASS_MATCH}">MATCH</span>`:m.state===a.NOMATCH?w=`<span class="${t.CLASS_NOMATCH}">NOMATCH</span>`:w=`<span class="${t.CLASS_NOMATCH}">unrecognized</span>`;let E="";return E+=`<table class="${t.CLASS_STATE}">
`,b&&(E+=`<caption>${b}</caption>
`),E+=`<tr><th>state item</th><th>value</th><th>description</th></tr>
`,E+=`<tr><td>parser success</td><td>${_}</td>
`,E+=`<td><span class="${t.CLASS_MATCH}">true</span> if the parse succeeded,
`,E+=` <span class="${t.CLASS_NOMATCH}">false</span> otherwise`,E+=`<br><i>NOTE: for success, entire string must be matched</i></td></tr>
`,E+=`<tr><td>parser state</td><td>${w}</td>
`,E+=`<td><span class="${t.CLASS_EMPTY}">EMPTY</span>, `,E+=`<span class="${t.CLASS_MATCH}">MATCH</span> or 
`,E+=`<span class="${t.CLASS_NOMATCH}">NOMATCH</span></td></tr>
`,E+=`<tr><td>string length</td><td>${m.length}</td><td>length of the input (sub)string</td></tr>
`,E+=`<tr><td>matched length</td><td>${m.matched}</td><td>number of input string characters matched</td></tr>
`,E+=`<tr><td>max matched</td><td>${m.maxMatched}</td><td>maximum number of input string characters matched</td></tr>
`,E+=`<tr><td>max tree depth</td><td>${m.maxTreeDepth}</td><td>maximum depth of the parse tree reached</td></tr>
`,E+=`<tr><td>node hits</td><td>${m.nodeHits}</td><td>number of parse tree node hits (opcode function calls)</td></tr>
`,E+=`<tr><td>input length</td><td>${m.inputLength}</td><td>length of full input string</td></tr>
`,E+=`<tr><td>sub-string begin</td><td>${m.subBegin}</td><td>sub-string first character index</td></tr>
`,E+=`<tr><td>sub-string end</td><td>${m.subEnd}</td><td>sub-string end-of-string index</td></tr>
`,E+=`<tr><td>sub-string length</td><td>${m.subLength}</td><td>sub-string length</td></tr>
`,E+=`</table>
`,E},utilities.charsToString=function(m,y,b){let _,w;if(typeof y=="number"){if(y>=m.length)return"";_=y<0?0:y}else _=0;if(typeof b=="number"){if(b<=0)return"";w=b>m.length-_?m.length:_+b}else w=m.length;return _<w?e.encode("UTF16LE",m.slice(_,w)).toString("utf16le"):""},utilities.stringToChars=function(m){return e.decode("STRING",m)},utilities.opcodeToString=function(m){let y="unknown";switch(m){case a.ALT:y="ALT";break;case a.CAT:y="CAT";break;case a.RNM:y="RNM";break;case a.UDT:y="UDT";break;case a.AND:y="AND";break;case a.NOT:y="NOT";break;case a.REP:y="REP";break;case a.TRG:y="TRG";break;case a.TBS:y="TBS";break;case a.TLS:y="TLS";break;case a.BKR:y="BKR";break;case a.BKA:y="BKA";break;case a.BKN:y="BKN";break;case a.ABG:y="ABG";break;case a.AEN:y="AEN";break;default:throw new Error("unrecognized opcode")}return y},utilities.stateToString=function(m){let y="unknown";switch(m){case a.ACTIVE:y="ACTIVE";break;case a.MATCH:y="MATCH";break;case a.EMPTY:y="EMPTY";break;case a.NOMATCH:y="NOMATCH";break;default:throw new Error("unrecognized state")}return y},utilities.asciiChars=["NUL","SOH","STX","ETX","EOT","ENQ","ACK","BEL","BS","TAB","LF","VT","FF","CR","SO","SI","DLE","DC1","DC2","DC3","DC4","NAK","SYN","ETB","CAN","EM","SUB","ESC","FS","GS","RS","US","&nbsp;","!","&#34;","#","$","%","&#38;","&#39;","(",")","*","+",",","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";","&#60;","=","&#62;","?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","&#92;","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","DEL"],utilities.charToHex=function(m){let y=m.toString(16).toUpperCase();switch(y.length){case 1:case 3:case 7:y=`0${y}`;break;case 2:case 6:y=`00${y}`;break;case 4:break;case 5:y=`000${y}`;break;default:throw new Error("unrecognized option")}return y},utilities.charsToDec=function(m,y,b){let _="";if(!Array.isArray(m))throw new Error(`${o}charsToDec: input must be an array of integers`);const w=u(m.length,y,b);if(w.end>w.beg){_+=m[w.beg];for(let E=w.beg+1;E<w.end;E+=1)_+=`,${m[E]}`}return _},utilities.charsToHex=function(m,y,b){let _="";if(!Array.isArray(m))throw new Error(`${o}charsToHex: input must be an array of integers`);const w=u(m.length,y,b);if(w.end>w.beg){_+=`\\x${l.charToHex(m[w.beg])}`;for(let E=w.beg+1;E<w.end;E+=1)_+=`,\\x${l.charToHex(m[E])}`}return _},utilities.charsToHtmlEntities=function(m,y,b){let _="";if(!Array.isArray(m))throw new Error(`${o}charsToHex: input must be an array of integers`);const w=u(m.length,y,b);if(w.end>w.beg)for(let E=w.beg;E<w.end;E+=1)_+=`&#x${m[E].toString(16)};`;return _};function d(m){return!(m>=55296&&m<=57343||m>1114111)}return utilities.charsToUnicode=function(m,y,b){let _="";if(!Array.isArray(m))throw new Error(`${o}charsToUnicode: input must be an array of integers`);const w=u(m.length,y,b);if(w.end>w.beg)for(let E=w.beg;E<w.end;E+=1)d(m[E])?_+=`&#${m[E]};`:_+=` U+${l.charToHex(m[E])}`;return _},utilities.charsToJsUnicode=function(m,y,b){let _="";if(!Array.isArray(m))throw new Error(`${o}charsToJsUnicode: input must be an array of integers`);const w=u(m.length,y,b);if(w.end>w.beg){_+=`\\u${l.charToHex(m[w.beg])}`;for(let E=w.beg+1;E<w.end;E+=1)_+=`,\\u${l.charToHex(m[E])}`}return _},utilities.charsToAscii=function(m,y,b){let _="";if(!Array.isArray(m))throw new Error(`${o}charsToAscii: input must be an array of integers`);const w=u(m.length,y,b);for(let E=w.beg;E<w.end;E+=1){const A=m[E];A>=32&&A<=126?_+=String.fromCharCode(A):_+=`\\x${l.charToHex(A)}`}return _},utilities.charsToAsciiHtml=function(m,y,b){if(!Array.isArray(m))throw new Error(`${o}charsToAsciiHtml: input must be an array of integers`);let _="",w;const E=u(m.length,y,b);for(let A=E.beg;A<E.end;A+=1)w=m[A],w<32||w===127?_+=`<span class="${t.CLASS_CTRLCHAR}">${l.asciiChars[w]}</span>`:w>127?_+=`<span class="${t.CLASS_CTRLCHAR}">U+${l.charToHex(w)}</span>`:_+=l.asciiChars[w];return _},utilities.stringToAsciiHtml=function(m){const y=e.decode("STRING",m);return this.charsToAsciiHtml(y)},utilities}var ast,hasRequiredAst;function requireAst(){return hasRequiredAst||(hasRequiredAst=1,ast=function(){const e=requireIdentifiers(),n=requireUtilities(),a="ast.js: ",o=this;let l=null,u=null,d=null,m=0;const y=[],b=[],_=[],w=[];this.callbacks=[],this.astObject="astObject",this.init=function(C,k,B){_.length=0,w.length=0,y.length=0,m=0,l=C,u=k,d=B;let D;const q=[];for(D=0;D<l.length;D+=1)q.push(l[D].lower);for(D=0;D<u.length;D+=1)q.push(u[D].lower);for(m=l.length+u.length,D=0;D<m;D+=1)y[D]=!1,b[D]=null;for(const j in o.callbacks){const J=j.toLowerCase();if(D=q.indexOf(J),D<0)throw new Error(`${a}init: node '${j}' not a rule or udt name`);typeof o.callbacks[j]=="function"&&(y[D]=!0,b[D]=o.callbacks[j]),o.callbacks[j]===!0&&(y[D]=!0)}},this.ruleDefined=function(C){return y[C]!==!1},this.udtDefined=function(C){return y[l.length+C]!==!1},this.down=function(C,k){const B=w.length;return _.push(B),w.push({name:k,thisIndex:B,thatIndex:null,state:e.SEM_PRE,callbackIndex:C,phraseIndex:null,phraseLength:null,stack:_.length}),B},this.up=function(C,k,B,D){const q=w.length,j=_.pop();return w.push({name:k,thisIndex:q,thatIndex:j,state:e.SEM_POST,callbackIndex:C,phraseIndex:B,phraseLength:D,stack:_.length}),w[j].thatIndex=q,w[j].phraseIndex=B,w[j].phraseLength=D,q},this.translate=function(C){let k,B,D;for(let q=0;q<w.length;q+=1)D=w[q],B=b[D.callbackIndex],D.state===e.SEM_PRE?B!==null&&(k=B(e.SEM_PRE,d,D.phraseIndex,D.phraseLength,C),k===e.SEM_SKIP&&(q=D.thatIndex)):B!==null&&B(e.SEM_POST,d,D.phraseIndex,D.phraseLength,C)},this.setLength=function(C){w.length=C,C>0?_.length=w[C-1].stack:_.length=0},this.getLength=function(){return w.length};function E(A){let C="";for(let k=0;k<A;k+=1)C+=" ";return C}this.toXml=function(C){let k=n.charsToDec,B="decimal integer character codes";if(typeof C=="string"&&C.length>=3){const j=C.slice(0,3).toLowerCase();j==="asc"?(k=n.charsToAscii,B="ASCII for printing characters, hex for non-printing"):j==="hex"?(k=n.charsToHex,B="hexadecimal integer character codes"):j==="uni"&&(k=n.charsToUnicode,B="Unicode UTF-32 integer character codes")}let D="",q=0;return D+=`<?xml version="1.0" encoding="utf-8"?>
`,D+=`<root nodes="${w.length/2}" characters="${d.length}">
`,D+=`<!-- input string, ${B} -->
`,D+=E(q+2),D+=k(d),D+=`
`,w.forEach(j=>{j.state===e.SEM_PRE?(q+=1,D+=E(q),D+=`<node name="${j.name}" index="${j.phraseIndex}" length="${j.phraseLength}">
`,D+=E(q+2),D+=k(d,j.phraseIndex,j.phraseLength),D+=`
`):(D+=E(q),D+=`</node><!-- name="${j.name}" -->
`,q-=1)}),D+=`</root>
`,D},this.phrases=function(){const C={};let k,B;for(k=0;k<w.length;k+=1)B=w[k],B.state===e.SEM_PRE&&(Array.isArray(C[B.name])||(C[B.name]=[]),C[B.name].push({index:B.phraseIndex,length:B.phraseLength}));return C}}),ast}var circularBuffer,hasRequiredCircularBuffer;function requireCircularBuffer(){return hasRequiredCircularBuffer||(hasRequiredCircularBuffer=1,circularBuffer=function(){const e="circular-buffer.js: ";let n=-1,a=0;this.init=function(l){if(typeof l!="number"||l<=0)throw new Error(`${e}init: circular buffer size must an integer > 0`);a=Math.ceil(l),n=-1},this.increment=function(){return n+=1,(n+a)%a},this.maxSize=function(){return a},this.items=function(){return n+1},this.getListIndex=function(l){return n===-1||l<0||l>n||n-l>=a?-1:(l+a)%a},this.forEach=function(l){if(n!==-1){if(n<a){for(let u=0;u<=n;u+=1)l(u,u);return}for(let u=n-a+1;u<=n;u+=1){const d=(u+a)%a;l(d,u)}}}}),circularBuffer}var parser$2,hasRequiredParser$1;function requireParser$1(){return hasRequiredParser$1||(hasRequiredParser$1=1,parser$2=function(){const e=requireIdentifiers(),n=requireUtilities(),a="parser.js: ",o=this;let l;this.ast=null,this.stats=null,this.trace=null,this.callbacks=[];let u=null,d=null,m,y,b,_,w=0,E=0,A=0,C=null,k=null,B=null,D=null,q=null,j=0,J=1/0,Y=1/0;const L=function(ge,ie,he){const we=`${a}evaluateRule(): `;if(ge>=B.length)throw new Error(`${we}rule index: ${ge} out of range`);if(ie>=b)throw new Error(`${we}phrase index: ${ie} out of range`);const{length:Re}=u;u.push({type:e.RNM,index:ge}),l(Re,ie,he),u.pop()},Z=function(Oe,ge,ie){const he=`${a}evaluateUdt(): `;if(Oe>=D.length)throw new Error(`${he}udt index: ${Oe} out of range`);if(ge>=b)throw new Error(`${he}phrase index: ${ge} out of range`);const{length:we}=u;u.push({type:e.UDT,empty:D[Oe].empty,index:Oe}),l(we,ge,ie),u.pop()},Q=function(){w=0,E=0,A=0,j=0,_=[{lookAround:e.LOOKAROUND_NONE,anchor:0,charsEnd:0,charsLength:0}],B=null,D=null,d=null,m=0,y=0,b=0,C=null,k=null,q=null,u=null},oe=function(){const Oe=[],ge=function(){const he={};B.forEach(we=>{we.isBkr&&(he[we.lower]=null)}),D.length>0&&D.forEach(we=>{we.isBkr&&(he[we.lower]=null)}),Oe.push(he)},ie=function(){const he=Oe[Oe.length-1],we={};for(const Re in he)we[Re]=he[Re];return we};this.push=function(){Oe.push(ie())},this.pop=function(we){let Re=we;if(Re||(Re=Oe.length-1),Re<1||Re>Oe.length)throw new Error(`${a}backRef.pop(): bad length: ${Re}`);return Oe.length=Re,Oe[Oe.length-1]},this.length=function(){return Oe.length},this.savePhrase=function(we,Re,De){Oe[Oe.length-1][we]={phraseIndex:Re,phraseLength:De}},this.getPhrase=function(he){return Oe[Oe.length-1][he]},ge()},ae=function(){const ge=this;this.state=e.ACTIVE,this.phraseLength=0,this.ruleIndex=0,this.udtIndex=0,this.lookAround=_[_.length-1],this.uFrame=new oe,this.pFrame=new oe,this.evaluateRule=L,this.evaluateUdt=Z,this.refresh=function(){ge.state=e.ACTIVE,ge.phraseLength=0,ge.lookAround=_[_.length-1]}},U=function(){return _[_.length-1]},I=function(){return _.length>1},x=function(){return _[_.length-1].lookAround===e.LOOKAROUND_BEHIND},T=function(){const Oe=`${a}initializeAst(): `,ge=!0;for(;ge;){if(o.ast===void 0){o.ast=null;break}if(o.ast===null)break;if(o.ast.astObject!=="astObject")throw new Error(`${Oe}ast object not recognized`);break}o.ast!==null&&o.ast.init(B,D,d)},M=function(){const Oe=`${a}initializeTrace(): `,ge=!0;for(;ge;){if(o.trace===void 0){o.trace=null;break}if(o.trace===null)break;if(o.trace.traceObject!=="traceObject")throw new Error(`${Oe}trace object not recognized`);break}o.trace!==null&&o.trace.init(B,D,d)},O=function(){const Oe=`${a}initializeStats(): `,ge=!0;for(;ge;){if(o.stats===void 0){o.stats=null;break}if(o.stats===null)break;if(o.stats.statsObject!=="statsObject")throw new Error(`${Oe}stats object not recognized`);break}o.stats!==null&&o.stats.init(B,D)},z=function(Oe){const ge=`${a}initializeGrammar(): `;if(!Oe)throw new Error(`${ge}grammar object undefined`);if(Oe.grammarObject!=="grammarObject")throw new Error(`${ge}bad grammar object`);B=Oe.rules,D=Oe.udts},X=function(Oe){const ge=`${a}initializeStartRule(): `;let ie=null;if(typeof Oe=="number"){if(Oe>=B.length)throw new Error(`${ge}start rule index too large: max: ${B.length}: index: ${Oe}`);ie=Oe}else if(typeof Oe=="string"){const he=Oe.toLowerCase();for(let we=0;we<B.length;we+=1)if(he===B[we].lower){ie=B[we].index;break}if(ie===null)throw new Error(`${ge}start rule name '${Oe}' not recognized`)}else throw new Error(`${ge}type of start rule '${typeof Oe}' not recognized`);return ie},H=function(ge,ie,he){const we=`${a}initializeInputChars(): `;let Re=ge,De=ie,Le=he;if(Re===void 0)throw new Error(`${we}input string is undefined`);if(Re===null)throw new Error(`${we}input string is null`);if(typeof Re=="string")Re=n.stringToChars(Re);else if(!Array.isArray(Re))throw new Error(`${we}input string is not a string or array`);if(Re.length>0&&typeof Re[0]!="number")throw new Error(`${we}input string not an array of integers`);if(typeof De!="number")De=0;else if(De=Math.floor(De),De<0||De>Re.length)throw new Error(`${we}input beginning index out of range: ${De}`);if(typeof Le!="number")Le=Re.length-De;else if(Le=Math.floor(Le),Le<0||Le>Re.length-De)throw new Error(`${we}input length out of range: ${Le}`);d=Re,m=De,y=Le,b=m+y},P=function(){const Oe=`${a}initializeCallbacks(): `;let ge;for(C=[],k=[],ge=0;ge<B.length;ge+=1)C[ge]=null;for(ge=0;ge<D.length;ge+=1)k[ge]=null;let ie;const he=[];for(ge=0;ge<B.length;ge+=1)he.push(B[ge].lower);for(ge=0;ge<D.length;ge+=1)he.push(D[ge].lower);for(const we in o.callbacks){if(ge=he.indexOf(we.toLowerCase()),ge<0)throw new Error(`${Oe}syntax callback '${we}' not a rule or udt name`);if(ie=o.callbacks[we],ie||(ie=null),typeof ie=="function"||ie===null)ge<B.length?C[ge]=ie:k[ge-B.length]=ie;else throw new Error(`${Oe}syntax callback[${we}] must be function reference or 'false' (false/null/undefined/etc.)`)}for(ge=0;ge<D.length;ge+=1)if(k[ge]===null)throw new Error(`${Oe}all UDT callbacks must be defined. UDT callback[${D[ge].lower}] not a function reference`)};this.setMaxTreeDepth=function(Oe){if(typeof Oe!="number")throw new Error(`parser: max tree depth must be integer > 0: ${Oe}`);if(J=Math.floor(Oe),J<=0)throw new Error(`parser: max tree depth must be integer > 0: ${Oe}`)},this.setMaxNodeHits=function(Oe){if(typeof Oe!="number")throw new Error(`parser: max node hits must be integer > 0: ${Oe}`);if(Y=Math.floor(Oe),Y<=0)throw new Error(`parser: max node hits must be integer > 0: ${Oe}`)};const S=function(Oe,ge,ie){let he;const we=`${a}parse(): `;z(Oe);const Re=X(ge);P(),M(),O(),T();const De=new ae;switch(ie!=null&&(q=ie),u=[{type:e.RNM,index:Re}],l(0,m,De),u=null,De.state){case e.ACTIVE:throw new Error(`${we}final state should never be 'ACTIVE'`);case e.NOMATCH:he=!1;break;case e.EMPTY:case e.MATCH:De.phraseLength===y?he=!0:he=!1;break;default:throw new Error("unrecognized state")}return{success:he,state:De.state,length:y,matched:De.phraseLength,maxMatched:j,maxTreeDepth:E,nodeHits:A,inputLength:d.length,subBegin:m,subEnd:b,subLength:y}};this.parseSubstring=function(ge,ie,he,we,Re,De){return Q(),H(he,we,Re),S(ge,ie,De)},this.parse=function(ge,ie,he,we){return Q(),H(he,0,he.length),S(ge,ie,we)};const F=function(Oe,ge,ie){const he=u[Oe];for(let we=0;we<he.children.length&&(l(he.children[we],ge,ie),ie.state===e.NOMATCH);we+=1);},ue=function(Oe,ge,ie){let he,we,Re,De;const Le=u[Oe],tt=ie.uFrame.length(),We=ie.pFrame.length();o.ast&&(we=o.ast.getLength()),he=!0,Re=ge,De=0;for(let Ge=0;Ge<Le.children.length;Ge+=1)if(l(Le.children[Ge],Re,ie),ie.state===e.NOMATCH){he=!1;break}else Re+=ie.phraseLength,De+=ie.phraseLength;he?(ie.state=De===0?e.EMPTY:e.MATCH,ie.phraseLength=De):(ie.state=e.NOMATCH,ie.phraseLength=0,ie.uFrame.pop(tt),ie.pFrame.pop(We),o.ast&&o.ast.setLength(we))},ee=function(Oe,ge,ie){let he,we,Re,De;const Le=u[Oe];we=ge,Re=0,De=0;const tt=ie.uFrame.length(),We=ie.pFrame.length();o.ast&&(he=o.ast.getLength());const Ge=!0;for(;Ge&&!(we>=b||(l(Oe+1,we,ie),ie.state===e.NOMATCH)||ie.state===e.EMPTY||(De+=1,Re+=ie.phraseLength,we+=ie.phraseLength,De===Le.max)););ie.state===e.EMPTY||De>=Le.min?(ie.state=Re===0?e.EMPTY:e.MATCH,ie.phraseLength=Re):(ie.state=e.NOMATCH,ie.phraseLength=0,ie.uFrame.pop(tt),ie.pFrame.pop(We),o.ast&&o.ast.setLength(he))},fe=function(Oe,ge,ie,he){if(ge.phraseLength>ie){let we=`${a}opRNM(${Oe.name}): callback function error: `;throw we+=`sysData.phraseLength: ${ge.phraseLength}`,we+=` must be <= remaining chars: ${ie}`,new Error(we)}switch(ge.state){case e.ACTIVE:if(he!==!0)throw new Error(`${a}opRNM(${Oe.name}): callback function return error. ACTIVE state not allowed.`);break;case e.EMPTY:ge.phraseLength=0;break;case e.MATCH:ge.phraseLength===0&&(ge.state=e.EMPTY);break;case e.NOMATCH:ge.phraseLength=0;break;default:throw new Error(`${a}opRNM(${Oe.name}): callback function return error. Unrecognized return state: ${ge.state}`)}},le=function(Oe,ge,ie){let he,we,Re,De,Le,tt;const We=u[Oe],Ge=B[We.index],_t=C[Ge.index],rt=!I();if(rt&&(we=o.ast&&o.ast.ruleDefined(We.index),we&&(he=o.ast.getLength(),o.ast.down(We.index,B[We.index].name)),De=ie.uFrame.length(),Le=ie.pFrame.length(),ie.uFrame.push(),ie.pFrame.push(),tt=ie.pFrame,ie.pFrame=new oe),_t===null)Re=u,u=Ge.opcodes,l(0,ge,ie),u=Re;else{const ot=b-ge;ie.ruleIndex=Ge.index,_t(ie,d,ge,q),fe(Ge,ie,ot,!0),ie.state===e.ACTIVE&&(Re=u,u=Ge.opcodes,l(0,ge,ie),u=Re,ie.ruleIndex=Ge.index,_t(ie,d,ge,q),fe(Ge,ie,ot,!1))}rt&&(we&&(ie.state===e.NOMATCH?o.ast.setLength(he):o.ast.up(We.index,Ge.name,ge,ie.phraseLength)),ie.pFrame=tt,ie.state===e.NOMATCH?(ie.uFrame.pop(De),ie.pFrame.pop(Le)):Ge.isBkr&&(ie.pFrame.savePhrase(Ge.lower,ge,ie.phraseLength),ie.uFrame.savePhrase(Ge.lower,ge,ie.phraseLength)))},ce=function(Oe,ge,ie){if(ge.phraseLength>ie){let he=`${a}opUDT(${Oe.name}): callback function error: `;throw he+=`sysData.phraseLength: ${ge.phraseLength}`,he+=` must be <= remaining chars: ${ie}`,new Error(he)}switch(ge.state){case e.ACTIVE:throw new Error(`${a}opUDT(${Oe.name}): callback function return error. ACTIVE state not allowed.`);case e.EMPTY:if(Oe.empty===!1)throw new Error(`${a}opUDT(${Oe.name}): callback function return error. May not return EMPTY.`);ge.phraseLength=0;break;case e.MATCH:if(ge.phraseLength===0){if(Oe.empty===!1)throw new Error(`${a}opUDT(${Oe.name}): callback function return error. May not return EMPTY.`);ge.state=e.EMPTY}break;case e.NOMATCH:ge.phraseLength=0;break;default:throw new Error(`${a}opUDT(${Oe.name}): callback function return error. Unrecognized return state: ${ge.state}`)}},pe=function(Oe,ge,ie){let he,we,Re,De,Le,tt;const We=u[Oe],Ge=D[We.index];ie.UdtIndex=Ge.index;const _t=!I();_t&&(Re=o.ast&&o.ast.udtDefined(We.index),Re&&(we=B.length+We.index,he=o.ast.getLength(),o.ast.down(we,Ge.name)),De=ie.uFrame.length(),Le=ie.pFrame.length(),ie.uFrame.push(),ie.pFrame.push(),tt=ie.pFrame,ie.pFrame=new oe);const rt=b-ge;k[We.index](ie,d,ge,q),ce(Ge,ie,rt),_t&&(Re&&(ie.state===e.NOMATCH?o.ast.setLength(he):o.ast.up(we,Ge.name,ge,ie.phraseLength)),ie.pFrame=tt,ie.state===e.NOMATCH?(ie.uFrame.pop(De),ie.pFrame.pop(Le)):Ge.isBkr&&(ie.pFrame.savePhrase(Ge.lower,ge,ie.phraseLength),ie.uFrame.savePhrase(Ge.lower,ge,ie.phraseLength)))},se=function(Oe,ge,ie){_.push({lookAround:e.LOOKAROUND_AHEAD,anchor:ge,charsEnd:b,charsLength:y}),b=d.length,y=d.length-m,l(Oe+1,ge,ie);const he=_.pop();switch(b=he.charsEnd,y=he.charsLength,ie.phraseLength=0,ie.state){case e.EMPTY:ie.state=e.EMPTY;break;case e.MATCH:ie.state=e.EMPTY;break;case e.NOMATCH:ie.state=e.NOMATCH;break;default:throw new Error(`opAND: invalid state ${ie.state}`)}},de=function(Oe,ge,ie){_.push({lookAround:e.LOOKAROUND_AHEAD,anchor:ge,charsEnd:b,charsLength:y}),b=d.length,y=d.length-m,l(Oe+1,ge,ie);const he=_.pop();switch(b=he.charsEnd,y=he.charsLength,ie.phraseLength=0,ie.state){case e.EMPTY:case e.MATCH:ie.state=e.NOMATCH;break;case e.NOMATCH:ie.state=e.EMPTY;break;default:throw new Error(`opNOT: invalid state ${ie.state}`)}},re=function(Oe,ge,ie){const he=u[Oe];ie.state=e.NOMATCH,ge<b&&he.min<=d[ge]&&d[ge]<=he.max&&(ie.state=e.MATCH,ie.phraseLength=1)},me=function(Oe,ge,ie){let he;const we=u[Oe],Re=we.string.length;if(ie.state=e.NOMATCH,ge+Re<=b){for(he=0;he<Re;he+=1)if(d[ge+he]!==we.string[he])return;ie.state=e.MATCH,ie.phraseLength=Re}},te=function(Oe,ge,ie){let he,we;const Re=u[Oe];ie.state=e.NOMATCH;const De=Re.string.length;if(De===0){ie.state=e.EMPTY;return}if(ge+De<=b){for(he=0;he<De;he+=1)if(we=d[ge+he],we>=65&&we<=90&&(we+=32),we!==Re.string[he])return;ie.state=e.MATCH,ie.phraseLength=De}},ve=function(Oe,ge,ie){ie.state=e.NOMATCH,ie.phraseLength=0,ie.state=ge===0?e.EMPTY:e.NOMATCH},Se=function(Oe,ge,ie){ie.state=e.NOMATCH,ie.phraseLength=0,ie.state=ge===d.length?e.EMPTY:e.NOMATCH},be=function(Oe,ge,ie){let he,we,Re,De;const Le=u[Oe];ie.state=e.NOMATCH,Le.index<B.length?De=B[Le.index].lower:De=D[Le.index-B.length].lower;const tt=Le.bkrMode===e.BKR_MODE_PM?ie.pFrame.getPhrase(De):ie.uFrame.getPhrase(De),We=Le.bkrCase===e.BKR_MODE_CI;if(tt===null)return;const Ge=tt.phraseIndex,_t=tt.phraseLength;if(_t===0){ie.state=e.EMPTY;return}if(ge+_t<=b){if(We){for(he=0;he<_t;he+=1)if(we=d[ge+he],Re=d[Ge+he],we>=65&&we<=90&&(we+=32),Re>=65&&Re<=90&&(Re+=32),we!==Re)return;ie.state=e.MATCH,ie.phraseLength=_t}else for(he=0;he<_t;he+=1)if(we=d[ge+he],Re=d[Ge+he],we!==Re)return;ie.state=e.MATCH,ie.phraseLength=_t}},_e=function(Oe,ge,ie){switch(_.push({lookAround:e.LOOKAROUND_BEHIND,anchor:ge}),l(Oe+1,ge,ie),_.pop(),ie.phraseLength=0,ie.state){case e.EMPTY:ie.state=e.EMPTY;break;case e.MATCH:ie.state=e.EMPTY;break;case e.NOMATCH:ie.state=e.NOMATCH;break;default:throw new Error(`opBKA: invalid state ${ie.state}`)}},ye=function(Oe,ge,ie){switch(_.push({lookAround:e.LOOKAROUND_BEHIND,anchor:ge}),l(Oe+1,ge,ie),_.pop(),ie.phraseLength=0,ie.state){case e.EMPTY:case e.MATCH:ie.state=e.NOMATCH;break;case e.NOMATCH:ie.state=e.EMPTY;break;default:throw new Error(`opBKN: invalid state ${ie.state}`)}},$e=function(Oe,ge,ie){let he,we,Re,De;const Le=u[Oe],tt=ie.uFrame.length(),We=ie.pFrame.length();o.ast&&(we=o.ast.getLength()),he=!0,Re=ge,De=0;for(let Ge=Le.children.length-1;Ge>=0;Ge-=1)if(l(Le.children[Ge],Re,ie),Re-=ie.phraseLength,De+=ie.phraseLength,ie.state===e.NOMATCH){he=!1;break}he?(ie.state=De===0?e.EMPTY:e.MATCH,ie.phraseLength=De):(ie.state=e.NOMATCH,ie.phraseLength=0,ie.uFrame.pop(tt),ie.pFrame.pop(We),o.ast&&o.ast.setLength(we))},Ie=function(Oe,ge,ie){let he,we,Re,De;const Le=u[Oe];we=ge,Re=0,De=0;const tt=ie.uFrame.length(),We=ie.pFrame.length();o.ast&&(he=o.ast.getLength());const Ge=!0;for(;Ge&&!(we<=0||(l(Oe+1,we,ie),ie.state===e.NOMATCH)||ie.state===e.EMPTY||(De+=1,Re+=ie.phraseLength,we-=ie.phraseLength,De===Le.max)););ie.state===e.EMPTY||De>=Le.min?(ie.state=Re===0?e.EMPTY:e.MATCH,ie.phraseLength=Re):(ie.state=e.NOMATCH,ie.phraseLength=0,ie.uFrame.pop(tt),ie.pFrame.pop(We),o.ast&&o.ast.setLength(he))},Be=function(Oe,ge,ie){const he=u[Oe];if(ie.state=e.NOMATCH,ie.phraseLength=0,ge>0){const we=d[ge-1];he.min<=we&&we<=he.max&&(ie.state=e.MATCH,ie.phraseLength=1)}},Me=function(Oe,ge,ie){let he;const we=u[Oe];ie.state=e.NOMATCH;const Re=we.string.length,De=ge-Re;if(De>=0){for(he=0;he<Re;he+=1)if(d[De+he]!==we.string[he])return;ie.state=e.MATCH,ie.phraseLength=Re}},Fe=function(Oe,ge,ie){let he;const we=u[Oe];ie.state=e.NOMATCH;const Re=we.string.length;if(Re===0){ie.state=e.EMPTY;return}const De=ge-Re;if(De>=0){for(let Le=0;Le<Re;Le+=1)if(he=d[De+Le],he>=65&&he<=90&&(he+=32),he!==we.string[Le])return;ie.state=e.MATCH,ie.phraseLength=Re}},Ve=function(Oe,ge,ie){let he,we,Re,De;const Le=u[Oe];ie.state=e.NOMATCH,ie.phraseLength=0,Le.index<B.length?De=B[Le.index].lower:De=D[Le.index-B.length].lower;const tt=Le.bkrMode===e.BKR_MODE_PM?ie.pFrame.getPhrase(De):ie.uFrame.getPhrase(De),We=Le.bkrCase===e.BKR_MODE_CI;if(tt===null)return;const Ge=tt.phraseIndex,_t=tt.phraseLength;if(_t===0){ie.state=e.EMPTY,ie.phraseLength=0;return}const rt=ge-_t;if(rt>=0){if(We){for(he=0;he<_t;he+=1)if(we=d[rt+he],Re=d[Ge+he],we>=65&&we<=90&&(we+=32),Re>=65&&Re<=90&&(Re+=32),we!==Re)return;ie.state=e.MATCH,ie.phraseLength=_t}else for(he=0;he<_t;he+=1)if(we=d[rt+he],Re=d[Ge+he],we!==Re)return;ie.state=e.MATCH,ie.phraseLength=_t}};l=function(ge,ie,he){let we=!0;const Re=u[ge];if(A+=1,A>Y)throw new Error(`parser: maximum number of node hits exceeded: ${Y}`);if(w+=1,w>E&&(E=w,E>J))throw new Error(`parser: maximum parse tree depth exceeded: ${J}`);if(he.refresh(),o.trace!==null){const De=U();o.trace.down(Re,he.state,ie,he.phraseLength,De.anchor,De.lookAround)}if(x())switch(Re.type){case e.ALT:F(ge,ie,he);break;case e.CAT:$e(ge,ie,he);break;case e.REP:Ie(ge,ie,he);break;case e.RNM:le(ge,ie,he);break;case e.UDT:pe(ge,ie,he);break;case e.AND:se(ge,ie,he);break;case e.NOT:de(ge,ie,he);break;case e.TRG:Be(ge,ie,he);break;case e.TBS:Me(ge,ie,he);break;case e.TLS:Fe(ge,ie,he);break;case e.BKR:Ve(ge,ie,he);break;case e.BKA:_e(ge,ie,he);break;case e.BKN:ye(ge,ie,he);break;case e.ABG:ve(ge,ie,he);break;case e.AEN:Se(ge,ie,he);break;default:we=!1;break}else switch(Re.type){case e.ALT:F(ge,ie,he);break;case e.CAT:ue(ge,ie,he);break;case e.REP:ee(ge,ie,he);break;case e.RNM:le(ge,ie,he);break;case e.UDT:pe(ge,ie,he);break;case e.AND:se(ge,ie,he);break;case e.NOT:de(ge,ie,he);break;case e.TRG:re(ge,ie,he);break;case e.TBS:me(ge,ie,he);break;case e.TLS:te(ge,ie,he);break;case e.BKR:be(ge,ie,he);break;case e.BKA:_e(ge,ie,he);break;case e.BKN:ye(ge,ie,he);break;case e.ABG:ve(ge,ie,he);break;case e.AEN:Se(ge,ie,he);break;default:we=!1;break}if(!I()&&ie+he.phraseLength>j&&(j=ie+he.phraseLength),o.stats!==null&&o.stats.collect(Re,he),o.trace!==null){const De=U();o.trace.up(Re,he.state,ie,he.phraseLength,De.anchor,De.lookAround)}return w-=1,we}}),parser$2}var stats,hasRequiredStats;function requireStats(){return hasRequiredStats||(hasRequiredStats=1,stats=function(){const e=requireIdentifiers(),n=requireUtilities(),a=requireStyle(),o="stats.js: ";let l=[],u=[];const d=[];let m;const y=[],b=[];this.statsObject="statsObject";const _="stats",w=function(Y,L){return Y.lower<L.lower?-1:Y.lower>L.lower?1:0},E=function(Y,L){return Y.total<L.total?1:Y.total>L.total?-1:w(Y,L)},A=function(Y,L){return Y.index<L.index?-1:Y.index>L.index?1:0},C=function(){this.empty=0,this.match=0,this.nomatch=0,this.total=0},k=function(){d.length=0,m=new C,d[e.ALT]=new C,d[e.CAT]=new C,d[e.REP]=new C,d[e.RNM]=new C,d[e.TRG]=new C,d[e.TBS]=new C,d[e.TLS]=new C,d[e.UDT]=new C,d[e.AND]=new C,d[e.NOT]=new C,d[e.BKR]=new C,d[e.BKA]=new C,d[e.BKN]=new C,d[e.ABG]=new C,d[e.AEN]=new C,y.length=0;for(let Y=0;Y<l.length;Y+=1)y.push({empty:0,match:0,nomatch:0,total:0,name:l[Y].name,lower:l[Y].lower,index:l[Y].index});if(u.length>0){b.length=0;for(let Y=0;Y<u.length;Y+=1)b.push({empty:0,match:0,nomatch:0,total:0,name:u[Y].name,lower:u[Y].lower,index:u[Y].index})}},B=function(Y,L){switch(Y.total+=1,L){case e.EMPTY:Y.empty+=1;break;case e.MATCH:Y.match+=1;break;case e.NOMATCH:Y.nomatch+=1;break;default:throw new Error(`${o}collect(): incStat(): unrecognized state: ${L}`)}},D=function(Y,L){let Z="";return Z+="<tr>",Z+=`<td class="${a.CLASS_ACTIVE}">${Y}</td>`,Z+=`<td class="${a.CLASS_EMPTY}">${L.empty}</td>`,Z+=`<td class="${a.CLASS_MATCH}">${L.match}</td>`,Z+=`<td class="${a.CLASS_NOMATCH}">${L.nomatch}</td>`,Z+=`<td class="${a.CLASS_ACTIVE}">${L.total}</td>`,Z+=`</tr>
`,Z},q=function(){let Y="";return Y+=D("ALT",d[e.ALT]),Y+=D("CAT",d[e.CAT]),Y+=D("REP",d[e.REP]),Y+=D("RNM",d[e.RNM]),Y+=D("TRG",d[e.TRG]),Y+=D("TBS",d[e.TBS]),Y+=D("TLS",d[e.TLS]),Y+=D("UDT",d[e.UDT]),Y+=D("AND",d[e.AND]),Y+=D("NOT",d[e.NOT]),Y+=D("BKR",d[e.BKR]),Y+=D("BKA",d[e.BKA]),Y+=D("BKN",d[e.BKN]),Y+=D("ABG",d[e.ABG]),Y+=D("AEN",d[e.AEN]),Y+=D("totals",m),Y},j=function(){let Y="";Y+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,Y+=`<tr><th>rules</th><th></th><th></th><th></th><th></th></tr>
`;for(let L=0;L<l.length;L+=1)y[L].total>0&&(Y+="<tr>",Y+=`<td class="${a.CLASS_ACTIVE}">${y[L].name}</td>`,Y+=`<td class="${a.CLASS_EMPTY}">${y[L].empty}</td>`,Y+=`<td class="${a.CLASS_MATCH}">${y[L].match}</td>`,Y+=`<td class="${a.CLASS_NOMATCH}">${y[L].nomatch}</td>`,Y+=`<td class="${a.CLASS_ACTIVE}">${y[L].total}</td>`,Y+=`</tr>
`);if(u.length>0){Y+=`<tr><th></th><th></th><th></th><th></th><th></th></tr>
`,Y+=`<tr><th>udts</th><th></th><th></th><th></th><th></th></tr>
`;for(let L=0;L<u.length;L+=1)b[L].total>0&&(Y+="<tr>",Y+=`<td class="${a.CLASS_ACTIVE}">${b[L].name}</td>`,Y+=`<td class="${a.CLASS_EMPTY}">${b[L].empty}</td>`,Y+=`<td class="${a.CLASS_MATCH}">${b[L].match}</td>`,Y+=`<td class="${a.CLASS_NOMATCH}">${b[L].nomatch}</td>`,Y+=`<td class="${a.CLASS_ACTIVE}">${b[L].total}</td>`,Y+=`</tr>
`)}return Y};this.validate=function(Y){let L=!1;return typeof Y=="string"&&_===Y&&(L=!0),L},this.init=function(Y,L){l=Y,u=L,k()},this.collect=function(Y,L){B(m,L.state,L.phraseLength),B(d[Y.type],L.state,L.phraseLength),Y.type===e.RNM&&B(y[Y.index],L.state,L.phraseLength),Y.type===e.UDT&&B(b[Y.index],L.state,L.phraseLength)},this.toHtml=function(Y,L){let Z="";Z+=`<table class="${a.CLASS_STATS}">
`,typeof L=="string"&&(Z+=`<caption>${L}</caption>
`),Z+=`<tr><th class="${a.CLASS_ACTIVE}">ops</th>
`,Z+=`<th class="${a.CLASS_EMPTY}">EMPTY</th>
`,Z+=`<th class="${a.CLASS_MATCH}">MATCH</th>
`,Z+=`<th class="${a.CLASS_NOMATCH}">NOMATCH</th>
`,Z+=`<th class="${a.CLASS_ACTIVE}">totals</th></tr>
`;const Q=!0;for(;Q;){if(Y===void 0){Z+=q();break}if(Y===null){Z+=q();break}if(Y==="ops"){Z+=q();break}if(Y==="index"){y.sort(A),b.length>0&&b.sort(A),Z+=q(),Z+=j();break}if(Y==="hits"){y.sort(E),b.length>0&&b.sort(A),Z+=q(),Z+=j();break}if(Y==="alpha"){y.sort(w),b.length>0&&b.sort(w),Z+=q(),Z+=j();break}break}return Z+=`</table>
`,Z},this.toHtmlPage=function(Y,L,Z){return n.htmlToPage(this.toHtml(Y,L),Z)}}),stats}var trace,hasRequiredTrace;function requireTrace(){return hasRequiredTrace||(hasRequiredTrace=1,trace=function(){const e=requireUtilities(),n=requireStyle(),a=new(requireCircularBuffer()),o=requireIdentifiers(),l="trace.js: ",u=this,d=16,m=10,y=8,b=32,_=80,w=5,E=[];let A=5e3,C=-1,k=0,B=0;const D=[];let q=null,j=null,J=null;const Y=[],L=[],Z=`<span class="${n.CLASS_LINEEND}">&bull;</span>`,Q=`<span class="${n.CLASS_LINEEND}">&hellip;</span>`,oe=`<span class="${n.CLASS_EMPTY}">&#120634;</span>`,ae=function(){const ce=function(se){Y[o.ALT]=se,Y[o.CAT]=se,Y[o.REP]=se,Y[o.TLS]=se,Y[o.TBS]=se,Y[o.TRG]=se,Y[o.AND]=se,Y[o.NOT]=se,Y[o.BKR]=se,Y[o.BKA]=se,Y[o.BKN]=se,Y[o.ABG]=se,Y[o.AEN]=se};let pe=0;for(const se in u.filter.operators)pe+=1;if(pe===0){ce(!1);return}for(const se in u.filter.operators){const de=se.toUpperCase();if(de==="<ALL>"){ce(!0);return}if(de==="<NONE>"){ce(!1);return}}ce(!1);for(const se in u.filter.operators){const de=se.toUpperCase();if(de==="ALT")Y[o.ALT]=u.filter.operators[se]===!0;else if(de==="CAT")Y[o.CAT]=u.filter.operators[se]===!0;else if(de==="REP")Y[o.REP]=u.filter.operators[se]===!0;else if(de==="AND")Y[o.AND]=u.filter.operators[se]===!0;else if(de==="NOT")Y[o.NOT]=u.filter.operators[se]===!0;else if(de==="TLS")Y[o.TLS]=u.filter.operators[se]===!0;else if(de==="TBS")Y[o.TBS]=u.filter.operators[se]===!0;else if(de==="TRG")Y[o.TRG]=u.filter.operators[se]===!0;else if(de==="BKR")Y[o.BKR]=u.filter.operators[se]===!0;else if(de==="BKA")Y[o.BKA]=u.filter.operators[se]===!0;else if(de==="BKN")Y[o.BKN]=u.filter.operators[se]===!0;else if(de==="ABG")Y[o.ABG]=u.filter.operators[se]===!0;else if(de==="AEN")Y[o.AEN]=u.filter.operators[se]===!0;else throw new Error(`${l}initOpratorFilter: '${se}' not a valid operator name. Must be <all>, <none>, alt, cat, rep, tls, tbs, trg, and, not, bkr, bka or bkn`)}},U=function(){const ce=function(re){Y[o.RNM]=re,Y[o.UDT]=re;const me=j.length+J.length;L.length=0;for(let te=0;te<me;te+=1)L.push(re)};let pe,se;const de=[];for(se=0;se<j.length;se+=1)de.push(j[se].lower);for(se=0;se<J.length;se+=1)de.push(J[se].lower);L.length=0,pe=0;for(const re in u.filter.rules)pe+=1;if(pe===0){ce(!0);return}for(const re in u.filter.rules){const me=re.toLowerCase();if(me==="<all>"){ce(!0);return}if(me==="<none>"){ce(!1);return}}ce(!1),Y[o.RNM]=!0,Y[o.UDT]=!0;for(const re in u.filter.rules){const me=re.toLowerCase();if(se=de.indexOf(me),se<0)throw new Error(`${l}initRuleFilter: '${re}' not a valid rule or udt name`);L[se]=u.filter.rules[re]===!0}};this.traceObject="traceObject",this.filter={operators:[],rules:[]},this.setMaxRecords=function(ce,pe){if(C=-1,typeof ce=="number"&&ce>0)A=Math.ceil(ce);else{A=0;return}typeof pe=="number"&&(C=Math.floor(pe),C<0&&(C=-1))},this.getMaxRecords=function(){return A},this.getLastRecord=function(){return C},this.init=function(ce,pe,se){E.length=0,D.length=0,k=0,B=0,q=se,j=ce,J=pe,ae(),U(),a.init(A)};const I=function(ce){let pe=!1;return ce.type===o.RNM?Y[ce.type]&&L[ce.index]?pe=!0:pe=!1:ce.type===o.UDT?Y[ce.type]&&L[j.length+ce.index]?pe=!0:pe=!1:pe=Y[ce.type],pe},x=function(ce){return C===-1||ce<=C};this.down=function(ce,pe,se,de,re,me){x(k)&&I(ce)&&(D.push(k),E[a.increment()]={dirUp:!1,depth:B,thisLine:k,thatLine:void 0,opcode:ce,state:pe,phraseIndex:se,phraseLength:de,lookAnchor:re,lookAround:me},k+=1,B+=1)},this.up=function(ce,pe,se,de,re,me){if(x(k)&&I(ce)){const te=k,ve=D.pop(),Se=a.getListIndex(ve);Se!==-1&&(E[Se].thatLine=te),B-=1,E[a.increment()]={dirUp:!0,depth:B,thisLine:te,thatLine:ve,opcode:ce,state:pe,phraseIndex:se,phraseLength:de,lookAnchor:re,lookAround:me},k+=1}};const T=function(){function ce(ie,he){let we,Re,De;if(he)switch(ie.op={id:he.type,name:e.opcodeToString(he.type)},ie.opData=void 0,he.type){case o.RNM:ie.opData=j[he.index].name;break;case o.UDT:ie.opData=J[he.index].name;break;case o.BKR:he.index<j.length?we=j[he.index].name:we=J[he.index-j.length].name,Re=he.bkrCase===o.BKR_MODE_CI?"%i":"%s",De=he.bkrMode===o.BKR_MODE_UM?"%u":"%p",ie.opData=`\\\\${Re}${De}${we}`;break;case o.TLS:ie.opData=[];for(let Le=0;Le<he.string.length;Le+=1)ie.opData.push(he.string[Le]);break;case o.TBS:ie.opData=[];for(let Le=0;Le<he.string.length;Le+=1)ie.opData.push(he.string[Le]);break;case o.TRG:ie.opData=[he.min,he.max];break;case o.REP:ie.opData=[he.min,he.max];break;default:throw new Error("unrecognized opcode")}else ie.op={id:void 0,name:void 0},ie.opData=void 0}function pe(ie,he,we){return ie===o.MATCH?{index:he,length:we}:ie===o.NOMATCH?{index:he,length:0}:ie===o.EMPTY?{index:he,length:0}:null}let se=-1;function de(ie,he,we){const Re={id:se++,branch:-1,parent:ie,up:!1,down:!1,depth:we,children:[]};return he?(Re.down=!0,Re.state={id:he.state,name:e.stateToString(he.state)},Re.phrase=null,ce(Re,he.opcode)):(Re.state={id:void 0,name:void 0},Re.phrase=pe(),ce(Re,void 0)),Re}function re(ie,he){he&&(ie.up=!0,ie.state={id:he.state,name:e.stateToString(he.state)},ie.phrase=pe(he.state,he.phraseIndex,he.phraseLength),ie.down||ce(ie,he.opcode))}let me=0,te=-1,ve=1;function Se(ie){if(te+=1,ie.branch=ve,te>B&&(B=te),ie.children.length===0)me+=1;else for(let he=0;he<ie.children.length;he+=1)he>0&&(ve+=1),ie.children[he].leftMost=!1,ie.children[he].rightMost=!1,ie.leftMost&&(ie.children[he].leftMost=he===0),ie.rightMost&&(ie.children[he].rightMost=he===ie.children.length-1),Se(ie.children[he]);te-=1}function be(ie,he){let we;const Re={};if(Re.id=ie.id,Re.branch=ie.branch,Re.leftMost=ie.leftMost,Re.rightMost=ie.rightMost,we=ie.state.name?ie.state.name:"ACTIVE",Re.state={id:ie.state.id,name:we},we=ie.op.name?ie.op.name:"?",Re.op={id:ie.op.id,name:we},typeof ie.opData=="string")Re.opData=ie.opData;else if(Array.isArray(ie.opData)){Re.opData=[];for(let De=0;De<ie.opData.length;De+=1)Re.opData[De]=ie.opData[De]}else Re.opData=void 0;ie.phrase?Re.phrase={index:ie.phrase.index,length:ie.phrase.length}:Re.phrase=null,Re.depth=ie.depth,Re.children=[];for(let De=0;De<ie.children.length;De+=1)ie.children.length-1,Re.children[De]=be(ie.children[De]);return Re}const _e=[];let ye,$e,Ie,Be,Me=!0;const Fe=de(null,null,-1);for(_e.push(Fe),$e=Fe,a.forEach(ie=>{if(Be=E[ie],Me&&(Me=!1,Be.depth>0)){const he=Be.dirUp?Be.depth+1:Be.depth;for(let we=0;we<he;we+=1)Ie=$e,$e=de($e,null,we),_e.push($e),Ie.children.push($e)}Be.dirUp?($e=_e.pop(),re($e,Be),$e=_e[_e.length-1]):(Ie=$e,$e=de($e,Be,Be.depth),_e.push($e),Ie.children.push($e))});_e.length>1;)$e=_e.pop(),re($e,null);if(Fe.children.length===0)throw new Error("trace.toTree(): parse tree has no nodes");if(_e.length===0)throw new Error("trace.toTree(): integrity check: dummy root node disappeared?");ye=Fe.children[0];let Ve=ye;for(;ye&&!ye.down&&!ye.up;)Ve=ye,ye=ye.children[0];ye=Ve,ye.leftMost=!0,ye.rightMost=!0,Se(ye),ye.branch=0;const Oe={};Oe.string=[];for(let ie=0;ie<q.length;ie+=1)Oe.string[ie]=q[ie];Oe.rules=[];for(let ie=0;ie<j.length;ie+=1)Oe.rules[ie]=j[ie].name;Oe.udts=[];for(let ie=0;ie<J.length;ie+=1)Oe.udts[ie]=J[ie].name;Oe.id={},Oe.id.ALT={id:o.ALT,name:"ALT"},Oe.id.CAT={id:o.CAT,name:"CAT"},Oe.id.REP={id:o.REP,name:"REP"},Oe.id.RNM={id:o.RNM,name:"RNM"},Oe.id.TLS={id:o.TLS,name:"TLS"},Oe.id.TBS={id:o.TBS,name:"TBS"},Oe.id.TRG={id:o.TRG,name:"TRG"},Oe.id.UDT={id:o.UDT,name:"UDT"},Oe.id.AND={id:o.AND,name:"AND"},Oe.id.NOT={id:o.NOT,name:"NOT"},Oe.id.BKR={id:o.BKR,name:"BKR"},Oe.id.BKA={id:o.BKA,name:"BKA"},Oe.id.BKN={id:o.BKN,name:"BKN"},Oe.id.ABG={id:o.ABG,name:"ABG"},Oe.id.AEN={id:o.AEN,name:"AEN"},Oe.id.ACTIVE={id:o.ACTIVE,name:"ACTIVE"},Oe.id.MATCH={id:o.MATCH,name:"MATCH"},Oe.id.EMPTY={id:o.EMPTY,name:"EMPTY"},Oe.id.NOMATCH={id:o.NOMATCH,name:"NOMATCH"},Oe.treeDepth=B,Oe.leafNodes=me;let ge;return ye.down?ye.up?ge="none":ge="right":ye.up?ge="left":ge="both",Oe.branchesIncomplete=ge,Oe.tree=be(ye,ye.depth),Oe};this.toTree=function(ce){const pe=T();return ce?JSON.stringify(pe):pe},this.toHtmlPage=function(ce,pe,se){return e.htmlToPage(this.toHtml(ce,pe),se)};const M=function(ce,pe){let se;switch(ce){case d:se="hexadecimal";break;case m:se="decimal";break;case y:se="ASCII";break;case b:se="UNICODE";break;default:throw new Error(`${l}htmlHeader: unrecognized mode: ${ce}`)}let de="";return de+=`<p>display mode: ${se}</p>
`,de+=`<table class="${n.CLASS_TRACE}">
`,typeof pe=="string"&&(de+=`<caption>${pe}</caption>`),de},O=function(){let ce="";return ce+=`</table>
`,ce+=`<p class="${n.CLASS_MONOSPACE}">legend:<br>
`,ce+=`(a)&nbsp;-&nbsp;line number<br>
`,ce+=`(b)&nbsp;-&nbsp;matching line number<br>
`,ce+=`(c)&nbsp;-&nbsp;phrase offset<br>
`,ce+=`(d)&nbsp;-&nbsp;phrase length<br>
`,ce+=`(e)&nbsp;-&nbsp;tree depth<br>
`,ce+=`(f)&nbsp;-&nbsp;operator state<br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_ACTIVE}">&darr;</span>&nbsp;&nbsp;phrase opened<br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_MATCH}">&uarr;M</span> phrase matched<br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_EMPTY}">&uarr;E</span> empty phrase matched<br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_NOMATCH}">&uarr;N</span> phrase not matched<br>
`,ce+=`operator&nbsp;-&nbsp;ALT, CAT, REP, RNM, TRG, TLS, TBS<sup>&dagger;</sup>, UDT, AND, NOT, BKA, BKN, BKR, ABG, AEN<sup>&Dagger;</sup><br>
`,ce+=`phrase&nbsp;&nbsp;&nbsp;-&nbsp;up to ${_} characters of the phrase being matched<br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_MATCH}">matched characters</span><br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_LOOKAHEAD}">matched characters in look ahead mode</span><br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_LOOKBEHIND}">matched characters in look behind mode</span><br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_REMAINDER}">remainder characters(not yet examined by parser)</span><br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;<span class="${n.CLASS_CTRLCHAR}">control characters, TAB, LF, CR, etc. (ASCII mode only)</span><br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${oe} empty string<br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${Z} end of input string<br>
`,ce+=`&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;${Q} input string display truncated<br>
`,ce+=`</p>
`,ce+=`<p class="${n.CLASS_MONOSPACE}">
`,ce+=`<sup>&dagger;</sup>original ABNF operators:<br>
`,ce+=`ALT - alternation<br>
`,ce+=`CAT - concatenation<br>
`,ce+=`REP - repetition<br>
`,ce+=`RNM - rule name<br>
`,ce+=`TRG - terminal range<br>
`,ce+=`TLS - terminal literal string (case insensitive)<br>
`,ce+=`TBS - terminal binary string (case sensitive)<br>
`,ce+=`<br>
`,ce+=`<sup>&Dagger;</sup>super set SABNF operators:<br>
`,ce+=`UDT - user-defined terminal<br>
`,ce+=`AND - positive look ahead<br>
`,ce+=`NOT - negative look ahead<br>
`,ce+=`BKA - positive look behind<br>
`,ce+=`BKN - negative look behind<br>
`,ce+=`BKR - back reference<br>
`,ce+=`ABG - anchor - begin of input string<br>
`,ce+=`AEN - anchor - end of input string<br>
`,ce+=`</p>
`,ce};this.indent=function(ce){let pe="";for(let se=0;se<ce;se+=1)pe+=".";return pe};const z=function(ce,pe){let se="";if(pe.type===o.TRG)if(ce===d||ce===b){let de=pe.min.toString(16).toUpperCase();de.length%2!==0&&(de=`0${de}`),se+=ce===d?"%x":"U+",se+=de,de=pe.max.toString(16).toUpperCase(),de.length%2!==0&&(de=`0${de}`),se+=`&ndash;${de}`}else se=`%d${pe.min.toString(10)}&ndash;${pe.max.toString(10)}`;return se},X=function(ce,pe){let se="";if(pe.type===o.REP)if(ce===d){let de=pe.min.toString(16).toUpperCase();de.length%2!==0&&(de=`0${de}`),se=`x${de}`,pe.max<1/0?(de=pe.max.toString(16).toUpperCase(),de.length%2!==0&&(de=`0${de}`)):de="inf",se+=`&ndash;${de}`}else pe.max<1/0?se=`${pe.min.toString(10)}&ndash;${pe.max.toString(10)}`:se=`${pe.min.toString(10)}&ndash;inf`;return se},H=function(ce,pe){let se="";if(pe.type===o.TBS){const de=Math.min(pe.string.length,w*2);if(ce===d||ce===b){se+=ce===d?"%x":"U+";for(let re=0;re<de;re+=1){let me;re>0&&(se+="."),me=pe.string[re].toString(16).toUpperCase(),me.length%2!==0&&(me=`0${me}`),se+=me}}else{se="%d";for(let re=0;re<de;re+=1)re>0&&(se+="."),se+=pe.string[re].toString(10)}de<pe.string.length&&(se+=Q)}return se},P=function(ce,pe){let se="";if(pe.type===o.TLS){const de=Math.min(pe.string.length,w);if(ce===d||ce===m){let re,me,te;ce===d?(se="%x",te=16):(se="%d",te=10);for(let ve=0;ve<de;ve+=1)ve>0&&(se+="."),me=pe.string[ve],me>=97&&me<=122?(re=me-32,se+=`${re.toString(te)}/${me.toString(te)}`.toUpperCase()):me>=65&&me<=90?(re=me,me+=32,se+=`${re.toString(te)}/${me.toString(te)}`.toUpperCase()):se+=me.toString(te).toUpperCase();de<pe.string.length&&(se+=Q)}else{se='"';for(let re=0;re<de;re+=1)se+=e.asciiChars[pe.string[re]];de<pe.string.length&&(se+=Q),se+='"'}}return se},S=function(ce,pe,se,de,re){if(de===0)return"";let me="";const te=re?",":"";switch(ce){case d:me=te+e.charsToHex(pe,se,de);break;case m:if(re)return`,${e.charsToDec(pe,se,de)}`;me=te+e.charsToDec(pe,se,de);break;case b:me=e.charsToUnicode(pe,se,de);break;case y:default:me=e.charsToAsciiHtml(pe,se,de);break}return me},F=function(ce,pe,se,de,re,me){let te="",ve,Se,be,_e,ye=Z;const $e=`<span class="${n.CLASS_LOOKBEHIND}">`,Ie=`<span class="${n.CLASS_REMAINDER}">`,Be="</span>";let Me=!1;switch(se){case o.EMPTY:te+=oe;case o.NOMATCH:case o.MATCH:case o.ACTIVE:ve=de-re,Se=me-ve,be=me,_e=pe.length-be;break;default:throw new Error("unrecognized state")}return ye=Z,Se>_?(Se=_,ye=Q,_e=0):Se+_e>_&&(ye=Q,_e=_-Se),Se>0&&(te+=$e,te+=S(ce,pe,ve,Se,Me),te+=Be,Me=!0),_e>0&&(te+=Ie,te+=S(ce,pe,be,_e,Me),te+=Be),te+ye},ue=function(ce,pe,se,de,re,me){let te="",ve,Se,be,_e,ye=Z;const $e=`<span class="${n.CLASS_REMAINDER}">`,Ie="</span>";let Be=!1;switch(se){case o.EMPTY:te+=oe;case o.NOMATCH:case o.ACTIVE:ve=de,Se=0,be=de,_e=pe.length-be;break;case o.MATCH:ve=de,Se=re,be=de+Se,_e=pe.length-be;break;default:throw new Error("unrecognized state")}return ye=Z,Se>_?(Se=_,ye=Q,_e=0):Se+_e>_&&(ye=Q,_e=_-Se),Se>0&&(te+=me,te+=S(ce,pe,ve,Se,Be),te+=Ie,Be=!0),_e>0&&(te+=$e,te+=S(ce,pe,be,_e,Be),te+=Ie),te+ye},ee=function(ce,pe,se,de,re){const me=`<span class="${n.CLASS_LOOKAHEAD}">`;return ue(ce,pe,se,de,re,me)},fe=function(ce,pe,se,de,re){const me=`<span class="${n.CLASS_MATCH}">`;return ue(ce,pe,se,de,re,me)},le=function(ce){if(j===null)return"";let pe="",se,de,re,me,te,ve;return pe+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",pe+=`<th>operator</th><th>phrase</th></tr>
`,a.forEach(Se=>{const be=E[Se];switch(se=be.thisLine,de=be.thatLine!==void 0?be.thatLine:"--",re=!1,me=!1,te=!1,be.lookAround===o.LOOKAROUND_AHEAD&&(re=!0,te=!0,ve=be.lookAnchor),(be.opcode.type===o.AND||be.opcode.type===o.NOT)&&(re=!0,te=!0,ve=be.phraseIndex),be.lookAround===o.LOOKAROUND_BEHIND&&(me=!0,te=!0,ve=be.lookAnchor),(be.opcode.type===o.BKA||be.opcode.type===o.BKN)&&(me=!0,te=!0,ve=be.phraseIndex),pe+="<tr>",pe+=`<td>${se}</td><td>${de}</td>`,pe+=`<td>${be.phraseIndex}</td>`,pe+=`<td>${be.phraseLength}</td>`,pe+=`<td>${be.depth}</td>`,pe+="<td>",be.state){case o.ACTIVE:pe+=`<span class="${n.CLASS_ACTIVE}">&darr;&nbsp;</span>`;break;case o.MATCH:pe+=`<span class="${n.CLASS_MATCH}">&uarr;M</span>`;break;case o.NOMATCH:pe+=`<span class="${n.CLASS_NOMATCH}">&uarr;N</span>`;break;case o.EMPTY:pe+=`<span class="${n.CLASS_EMPTY}">&uarr;E</span>`;break;default:pe+=`<span class="${n.CLASS_ACTIVE}">--</span>`;break}if(pe+="</td>",pe+="<td>",pe+=u.indent(be.depth),re?pe+=`<span class="${n.CLASS_LOOKAHEAD}">`:me&&(pe+=`<span class="${n.CLASS_LOOKBEHIND}">`),pe+=e.opcodeToString(be.opcode.type),be.opcode.type===o.RNM&&(pe+=`(${j[be.opcode.index].name}) `),be.opcode.type===o.BKR){const _e=be.opcode.bkrCase===o.BKR_MODE_CI?"%i":"%s",ye=be.opcode.bkrMode===o.BKR_MODE_UM?"%u":"%p";pe+=`(\\${_e}${ye}${j[be.opcode.index].name}) `}be.opcode.type===o.UDT&&(pe+=`(${J[be.opcode.index].name}) `),be.opcode.type===o.TRG&&(pe+=`(${z(ce,be.opcode)}) `),be.opcode.type===o.TBS&&(pe+=`(${H(ce,be.opcode)}) `),be.opcode.type===o.TLS&&(pe+=`(${P(ce,be.opcode)}) `),be.opcode.type===o.REP&&(pe+=`(${X(ce,be.opcode)}) `),te&&(pe+="</span>"),pe+="</td>",pe+="<td>",me?pe+=F(ce,q,be.state,be.phraseIndex,be.phraseLength,ve):re?pe+=ee(ce,q,be.state,be.phraseIndex,be.phraseLength):pe+=fe(ce,q,be.state,be.phraseIndex,be.phraseLength),pe+=`</td></tr>
`}),pe+="<tr><th>(a)</th><th>(b)</th><th>(c)</th><th>(d)</th><th>(e)</th><th>(f)</th>",pe+=`<th>operator</th><th>phrase</th></tr>
`,pe+=`</table>
`,pe};this.toHtml=function(ce,pe){let se=y;if(typeof ce=="string"&&ce.length>=3){const re=ce.toLowerCase().slice(0,3);re==="hex"?se=d:re==="dec"?se=m:re==="uni"&&(se=b)}let de="";return de+=M(se,pe),de+=le(se),de+=O(),de}}),trace}var nodeExports,hasRequiredNodeExports;function requireNodeExports(){return hasRequiredNodeExports||(hasRequiredNodeExports=1,nodeExports={ast:requireAst(),circular:requireCircularBuffer(),ids:requireIdentifiers(),parser:requireParser$1(),stats:requireStats(),trace:requireTrace(),utils:requireUtilities(),emitcss:requireEmitcss(),style:requireStyle()}),nodeExports}var scannerGrammar,hasRequiredScannerGrammar;function requireScannerGrammar(){return hasRequiredScannerGrammar||(hasRequiredScannerGrammar=1,scannerGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"file",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"line",lower:"line",index:1,isBkr:!1},this.rules[2]={name:"line-text",lower:"line-text",index:2,isBkr:!1},this.rules[3]={name:"last-line",lower:"last-line",index:3,isBkr:!1},this.rules[4]={name:"valid",lower:"valid",index:4,isBkr:!1},this.rules[5]={name:"invalid",lower:"invalid",index:5,isBkr:!1},this.rules[6]={name:"end",lower:"end",index:6,isBkr:!1},this.rules[7]={name:"CRLF",lower:"crlf",index:7,isBkr:!1},this.rules[8]={name:"LF",lower:"lf",index:8,isBkr:!1},this.rules[9]={name:"CR",lower:"cr",index:9,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:2,children:[1,3]},this.rules[0].opcodes[1]={type:3,min:0,max:1/0},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:3,min:0,max:1},this.rules[0].opcodes[4]={type:4,index:3},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,2]},this.rules[1].opcodes[1]={type:4,index:2},this.rules[1].opcodes[2]={type:4,index:6},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:3,min:0,max:1/0},this.rules[2].opcodes[1]={type:1,children:[2,3]},this.rules[2].opcodes[2]={type:4,index:4},this.rules[2].opcodes[3]={type:4,index:5},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:3,min:1,max:1/0},this.rules[3].opcodes[1]={type:1,children:[2,3]},this.rules[3].opcodes[2]={type:4,index:4},this.rules[3].opcodes[3]={type:4,index:5},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:5,min:32,max:126},this.rules[4].opcodes[2]={type:6,string:[9]},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[5].opcodes[1]={type:5,min:0,max:8},this.rules[5].opcodes[2]={type:5,min:11,max:12},this.rules[5].opcodes[3]={type:5,min:14,max:31},this.rules[5].opcodes[4]={type:5,min:127,max:4294967295},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:1,children:[1,2,3]},this.rules[6].opcodes[1]={type:4,index:7},this.rules[6].opcodes[2]={type:4,index:8},this.rules[6].opcodes[3]={type:4,index:9},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:6,string:[13,10]},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:6,string:[10]},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:6,string:[13]},this.toString=function(){let n="";return n+=`file = *line [last-line]
`,n+=`line = line-text end
`,n+=`line-text = *(valid/invalid)
`,n+=`last-line = 1*(valid/invalid)
`,n+=`valid = %d32-126 / %d9
`,n+=`invalid = %d0-8 / %d11-12 /%d14-31 / %x7f-ffffffff
`,n+=`end = CRLF / LF / CR
`,n+=`CRLF = %d13.10
`,n+=`LF = %d10
`,n+=`CR = %d13
`,n}}),scannerGrammar}var scannerCallbacks={},hasRequiredScannerCallbacks;function requireScannerCallbacks(){if(hasRequiredScannerCallbacks)return scannerCallbacks;hasRequiredScannerCallbacks=1;const t=requireIdentifiers(),e=requireUtilities();function n(_,w,E,A,C){return _===t.SEM_PRE?(C.endLength=0,C.textLength=0,C.invalidCount=0):C.lines.push({lineNo:C.lines.length,beginChar:E,length:A,textLength:C.textLength,endType:C.endType,invalidChars:C.invalidCount}),t.SEM_OK}function a(_,w,E,A,C){return _===t.SEM_PRE&&(C.textLength=A),t.SEM_OK}function o(_,w,E,A,C){return _===t.SEM_PRE?(C.endLength=0,C.textLength=0,C.invalidCount=0):C.strict?(C.lines.push({lineNo:C.lines.length,beginChar:E,length:A,textLength:A,endType:"none",invalidChars:C.invalidCount}),C.errors.push({line:C.lineNo,char:E+A,msg:"no line end on last line - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})):(w.push(10),C.lines.push({lineNo:C.lines.length,beginChar:E,length:A+1,textLength:A,endType:"LF",invalidChars:C.invalidCount})),t.SEM_OK}function l(_,w,E,A,C){return _===t.SEM_PRE&&C.errors.push({line:C.lineNo,char:E,msg:`invalid character found '\\x${e.charToHex(w[E])}'`}),t.SEM_OK}function u(_,w,E,A,C){return _===t.SEM_POST&&(C.lineNo+=1),t.SEM_OK}function d(_,w,E,A,C){return _===t.SEM_PRE&&(C.endType="LF",C.strict&&C.errors.push({line:C.lineNo,char:E,msg:"line end character LF(\\n, \\x0A) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),t.SEM_OK}function m(_,w,E,A,C){return _===t.SEM_PRE&&(C.endType="CR",C.strict&&C.errors.push({line:C.lineNo,char:E,msg:"line end character CR(\\r, \\x0D) - strict ABNF specifies CRLF(\\r\\n, \\x0D\\x0A)"})),t.SEM_OK}function y(_,w,E,A,C){return _===t.SEM_PRE&&(C.endType="CRLF"),t.SEM_OK}const b=[];return b.line=n,b["line-text"]=a,b["last-line"]=o,b.invalid=l,b.end=u,b.lf=d,b.cr=m,b.crlf=y,scannerCallbacks.callbacks=b,scannerCallbacks}var scanner,hasRequiredScanner;function requireScanner(){return hasRequiredScanner||(hasRequiredScanner=1,scanner=function(e,n,a,o){const l="scanner.js: ",u=requireNodeExports(),d=new(requireScannerGrammar()),{callbacks:m}=requireScannerCallbacks(),y=[],b=new u.parser;if(b.ast=new u.ast,b.ast.callbacks=m,o){if(o.traceObject!=="traceObject")throw new TypeError(`${l}trace argument is not a trace object`);b.trace=o}if(b.parse(d,"file",e).success!==!0){n.push({line:0,char:0,msg:"syntax analysis error analyzing input SABNF grammar"});return}const w={lines:y,lineNo:0,errors:n,strict:!!a};return b.ast.translate(w),y}),scanner}var syntaxCallbacks,hasRequiredSyntaxCallbacks;function requireSyntaxCallbacks(){return hasRequiredSyntaxCallbacks||(hasRequiredSyntaxCallbacks=1,syntaxCallbacks=function(){const e="syntax-callbacks.js: ",n=requireNodeExports(),a=n.ids;let o;const l=function(P,S,F,ue){switch(P.state){case a.ACTIVE:ue.altStack=[],ue.repCount=0;break;case a.EMPTY:ue.errors.push({line:0,char:0,msg:"grammar file is empty"});break;case a.MATCH:ue.ruleCount===0&&ue.errors.push({line:0,char:0,msg:"no rules defined"});break;case a.NOMATCH:throw new Error(`${e}synFile: grammar file NOMATCH: design error: should never happen.`);default:throw new Error(`${e}synFile: unrecognized case.`)}},u=function(H,P,S,F){switch(H.state){case a.ACTIVE:F.altStack.length=0,o={groupOpen:null,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},F.altStack.push(o);break;case a.EMPTY:throw new Error(`${e}synRule: EMPTY: rule cannot be empty`);case a.NOMATCH:break;case a.MATCH:F.ruleCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},d=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"Unrecognized SABNF line. Invalid rule, comment or blank line."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},m=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"Rule names must be alphanum and begin with alphabetic character."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},y=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"Expected '=' or '=/'. Not found."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},b=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.strict&&F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"AND operator(&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},_=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.strict&&F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"NOT operator(!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},w=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.strict&&F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"Positive look-behind operator(&&) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},E=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.strict&&F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"Negative look-behind operator(!!) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},A=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.strict&&F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"Beginning of string anchor(%^) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},C=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.strict&&F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"End of string anchor(%$) found - strict ABNF specified."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},k=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:if(F.strict){const ue=n.utils.charsToString(P,S,H.phraseLength);F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:`Back reference operator(${ue}) found - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},B=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:if(F.strict){const ue=n.utils.charsToString(P,S,H.phraseLength);F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:`UDT operator found(${ue}) - strict ABNF specified.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},D=function(H,P,S){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o.tlsOpen=S;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},q=function(H,P,S,F){switch(H.state){case a.ACTIVE:F.stringTabChar=!1;break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.stringTabChar!==!1&&F.errors.push({line:F.findLine(F.lines,F.stringTabChar),char:F.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string (see 'quoted-string' definition, RFC 7405.)"});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},j=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.stringTabChar=S;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},J=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:F.errors.push({line:F.findLine(F.lines,o.tlsOpen),char:o.tlsOpen,msg:'Case-insensitive literal string("...") opened but not closed.'}),o.basicError=!0,o.tlsOpen=null;break;case a.MATCH:o.tlsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},Y=function(H,P,S){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o.clsOpen=S;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},L=function(H,P,S,F){switch(H.state){case a.ACTIVE:F.stringTabChar=!1;break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.stringTabChar!==!1&&F.errors.push({line:F.findLine(F.lines,F.stringTabChar),char:F.stringTabChar,msg:"Tab character (\\t, x09) not allowed in literal string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},Z=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:F.errors.push({line:F.findLine(F.lines,o.clsOpen),char:o.clsOpen,msg:"Case-sensitive literal string('...') opened but not closed."}),o.clsOpen=null,o.basicError=!0;break;case a.MATCH:F.strict&&F.errors.push({line:F.findLine(F.lines,o.clsOpen),char:o.clsOpen,msg:"Case-sensitive string operator('...') found - strict ABNF specified."}),o.clsOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},Q=function(H,P,S){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o.prosValOpen=S;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},oe=function(H,P,S,F){switch(H.state){case a.ACTIVE:F.stringTabChar=!1;break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.stringTabChar!==!1&&F.errors.push({line:F.findLine(F.lines,F.stringTabChar),char:F.stringTabChar,msg:"Tab character (\\t, x09) not allowed in prose value string."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},ae=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:F.errors.push({line:F.findLine(F.lines,o.prosValOpen),char:o.prosValOpen,msg:"Prose value operator(<...>) opened but not closed."}),o.basicError=!0,o.prosValOpen=null;break;case a.MATCH:F.errors.push({line:F.findLine(F.lines,o.prosValOpen),char:o.prosValOpen,msg:"Prose value operator(<...>) found. The ABNF syntax is valid, but a parser cannot be generated from this grammar."}),o.prosValOpen=null;break;default:throw new Error(`${e}synFile: unrecognized case.`)}},U=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o={groupOpen:S,groupError:!1,optionOpen:null,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},F.altStack.push(o);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},I=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:F.errors.push({line:F.findLine(F.lines,o.groupOpen),char:o.groupOpen,msg:'Group "(...)" opened but not closed.'}),o=F.altStack.pop(),o.groupError=!0;break;case a.MATCH:o=F.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},x=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o={groupOpen:null,groupError:!1,optionOpen:S,optionError:!1,tlsOpen:null,clsOpen:null,prosValOpen:null,basicError:!1},F.altStack.push(o);break;default:throw new Error(`${e}synFile: unrecognized case.`)}},T=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:F.errors.push({line:F.findLine(F.lines,o.optionOpen),char:o.optionOpen,msg:'Option "[...]" opened but not closed.'}),o=F.altStack.pop(),o.optionError=!0;break;case a.MATCH:o=F.altStack.pop();break;default:throw new Error(`${e}synFile: unrecognized case.`)}},M=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:o.basicError===!1&&F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"Unrecognized SABNF element."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},O=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:if(H.phraseLength===1&&F.strict){const ue=P[S]===13?"CR":"LF";F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:`Line end '${ue}' found - strict ABNF specified, only CRLF allowed.`})}break;default:throw new Error(`${e}synFile: unrecognized case.`)}},z=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:break;case a.MATCH:F.errors.push({line:F.findLine(F.lines,S,F.charsLength),char:S,msg:"Unrecognized grammar element or characters."});break;default:throw new Error(`${e}synFile: unrecognized case.`)}},X=function(H,P,S,F){switch(H.state){case a.ACTIVE:break;case a.EMPTY:break;case a.NOMATCH:F.repCount+=1;break;case a.MATCH:F.repCount+=1;break;default:throw new Error(`${e}synFile: unrecognized case.`)}};this.callbacks=[],this.callbacks.andop=b,this.callbacks.basicelementerr=M,this.callbacks.clsclose=Z,this.callbacks.clsopen=Y,this.callbacks.clsstring=L,this.callbacks.definedaserror=y,this.callbacks.file=l,this.callbacks.groupclose=I,this.callbacks.groupopen=U,this.callbacks.lineenderror=z,this.callbacks.lineend=O,this.callbacks.notop=_,this.callbacks.optionclose=T,this.callbacks.optionopen=x,this.callbacks.prosvalclose=ae,this.callbacks.prosvalopen=Q,this.callbacks.prosvalstring=oe,this.callbacks.repetition=X,this.callbacks.rule=u,this.callbacks.ruleerror=d,this.callbacks.rulenameerror=m,this.callbacks.stringtab=j,this.callbacks.tlsclose=J,this.callbacks.tlsopen=D,this.callbacks.tlsstring=q,this.callbacks.udtop=B,this.callbacks.bkaop=w,this.callbacks.bknop=E,this.callbacks.bkrop=k,this.callbacks.abgop=A,this.callbacks.aenop=C}),syntaxCallbacks}var semanticCallbacks,hasRequiredSemanticCallbacks;function requireSemanticCallbacks(){return hasRequiredSemanticCallbacks||(hasRequiredSemanticCallbacks=1,semanticCallbacks=function(){const e=requireNodeExports(),n=e.ids,a=function(){this.names=[],this.add=function(be){let _e=-1;return this.get(be)===-1&&(_e={name:be,lower:be.toLowerCase(),index:this.names.length},this.names.push(_e)),_e},this.get=function(be){let _e=-1;const ye=be.toLowerCase();for(let $e=0;$e<this.names.length;$e+=1)if(this.names[$e].lower===ye){_e=this.names[$e];break}return _e}},o=function(Se,be,_e){let ye=0;for(let $e=be;$e<be+_e;$e+=1)ye=10*ye+Se[$e]-48;return ye},l=function(Se,be,_e){let ye=0;for(let $e=be;$e<be+_e;$e+=1)ye=2*ye+Se[$e]-48;return ye},u=function(Se,be,_e){let ye=0;for(let $e=be;$e<be+_e;$e+=1){let Ie=Se[$e];if(Ie>=48&&Ie<=57)Ie-=48;else if(Ie>=65&&Ie<=70)Ie-=55;else if(Ie>=97&&Ie<=102)Ie-=87;else throw new Error("hexnum out of range");ye=16*ye+Ie}return ye};function d(ve,Se,be,_e,ye){const $e=n.SEM_OK;if(ve===n.SEM_PRE)ye.ruleNames=new a,ye.udtNames=new a,ye.rules=[],ye.udts=[],ye.rulesLineMap=[],ye.opcodes=[],ye.altStack=[],ye.topStack=null,ye.topRule=null;else if(ve===n.SEM_POST){let Ie;ye.rules.forEach(Be=>{Be.isBkr=!1,Be.opcodes.forEach(Me=>{Me.type===n.RNM&&(Ie=ye.ruleNames.get(Me.index.name),Ie===-1?(ye.errors.push({line:ye.findLine(ye.lines,Me.index.phraseIndex,ye.charsLength),char:Me.index.phraseIndex,msg:`Rule name '${Me.index.name}' used but not defined.`}),Me.index=-1):Me.index=Ie.index)})}),ye.udts.forEach(Be=>{Be.isBkr=!1}),ye.rules.forEach(Be=>{Be.opcodes.forEach(Me=>{Me.type===n.BKR&&(Be.hasBkr=!0,Ie=ye.ruleNames.get(Me.index.name),Ie!==-1?(ye.rules[Ie.index].isBkr=!0,Me.index=Ie.index):(Ie=ye.udtNames.get(Me.index.name),Ie!==-1?(ye.udts[Ie.index].isBkr=!0,Me.index=ye.rules.length+Ie.index):(ye.errors.push({line:ye.findLine(ye.lines,Me.index.phraseIndex,ye.charsLength),char:Me.index.phraseIndex,msg:`Back reference name '${Me.index.name}' refers to undefined rule or unamed UDT.`}),Me.index=-1)))})})}return $e}function m(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_PRE&&(ye.altStack.length=0,ye.topStack=null,ye.rulesLineMap.push({line:ye.findLine(ye.lines,be,ye.charsLength),char:be})),$e}function y(ve,Se,be,_e,ye){const $e=n.SEM_OK;if(ve===n.SEM_PRE)ye.ruleName="",ye.definedas="";else if(ve===n.SEM_POST){let Ie;ye.definedas==="="?(Ie=ye.ruleNames.add(ye.ruleName),Ie===-1?(ye.definedas=null,ye.errors.push({line:ye.findLine(ye.lines,be,ye.charsLength),char:be,msg:`Rule name '${ye.ruleName}' previously defined.`})):(ye.topRule={name:Ie.name,lower:Ie.lower,opcodes:[],index:Ie.index},ye.rules.push(ye.topRule),ye.opcodes=ye.topRule.opcodes)):(Ie=ye.ruleNames.get(ye.ruleName),Ie===-1?(ye.definedas=null,ye.errors.push({line:ye.findLine(ye.lines,be,ye.charsLength),char:be,msg:`Rule name '${ye.ruleName}' for incremental alternate not previously defined.`})):(ye.topRule=ye.rules[Ie.index],ye.opcodes=ye.topRule.opcodes))}return $e}function b(ve,Se,be,_e,ye){let $e=n.SEM_OK;if(ve===n.SEM_PRE)for(;;){if(ye.definedas===null){$e=n.SEM_SKIP;break}if(ye.topStack===null){if(ye.definedas==="="){ye.topStack={alt:{type:n.ALT,children:[]},cat:null},ye.altStack.push(ye.topStack),ye.opcodes.push(ye.topStack.alt);break}ye.topStack={alt:ye.opcodes[0],cat:null},ye.altStack.push(ye.topStack);break}ye.topStack={alt:{type:n.ALT,children:[]},cat:null},ye.altStack.push(ye.topStack),ye.opcodes.push(ye.topStack.alt);break}else ve===n.SEM_POST&&(ye.altStack.pop(),ye.altStack.length>0?ye.topStack=ye.altStack[ye.altStack.length-1]:ye.topStack=null);return $e}function _(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_PRE?(ye.topStack.alt.children.push(ye.opcodes.length),ye.topStack.cat={type:n.CAT,children:[]},ye.opcodes.push(ye.topStack.cat)):ve===n.SEM_POST&&(ye.topStack.cat=null),$e}function w(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_PRE&&ye.topStack.cat.children.push(ye.opcodes.length),$e}function E(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.opcodes.push({type:n.REP,min:0,max:1,char:be}),$e}function A(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_PRE&&(ye.ruleName=e.utils.charsToString(Se,be,_e)),$e}function C(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.definedas="="),$e}function k(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.definedas="=/"),$e}function B(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_PRE?(ye.min=0,ye.max=1/0,ye.topRep={type:n.REP,min:0,max:1/0},ye.opcodes.push(ye.topRep)):ve===n.SEM_POST&&(ye.min>ye.max&&ye.errors.push({line:ye.findLine(ye.lines,be,ye.charsLength),char:be,msg:`repetition min cannot be greater than max: min: ${ye.min}: max: ${ye.max}`}),ye.topRep.min=ye.min,ye.topRep.max=ye.max),$e}function D(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.min=o(Se,be,_e)),$e}function q(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.max=o(Se,be,_e)),$e}function j(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.max=o(Se,be,_e),ye.min=ye.max),$e}function J(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.opcodes.push({type:n.AND}),$e}function Y(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.opcodes.push({type:n.NOT}),$e}function L(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.opcodes.push({type:n.RNM,index:{phraseIndex:be,name:e.utils.charsToString(Se,be,_e)}}),$e}function Z(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.opcodes.push({type:n.ABG}),$e}function Q(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.opcodes.push({type:n.AEN}),$e}function oe(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.opcodes.push({type:n.BKA}),$e}function ae(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.opcodes.push({type:n.BKN}),$e}function U(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_PRE?(ye.ci=!0,ye.cs=!1,ye.um=!0,ye.pm=!1):ve===n.SEM_POST&&ye.opcodes.push({type:n.BKR,bkrCase:ye.cs===!0?n.BKR_MODE_CS:n.BKR_MODE_CI,bkrMode:ye.pm===!0?n.BKR_MODE_PM:n.BKR_MODE_UM,index:{phraseIndex:ye.bkrname.phraseIndex,name:e.utils.charsToString(Se,ye.bkrname.phraseIndex,ye.bkrname.phraseLength)}}),$e}function I(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.ci=!0),$e}function x(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.cs=!0),$e}function T(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.um=!0),$e}function M(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.pm=!0),$e}function O(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.bkrname={phraseIndex:be,phraseLength:_e}),$e}function z(ve,Se,be,_e,ye){const $e=n.SEM_OK;if(ve===n.SEM_POST){const Ie=e.utils.charsToString(Se,be,_e);let Be=ye.udtNames.add(Ie);if(Be===-1){if(Be=ye.udtNames.get(Ie),Be===-1)throw new Error("semUdtEmpty: name look up error")}else ye.udts.push({name:Be.name,lower:Be.lower,index:Be.index,empty:!0});ye.opcodes.push({type:n.UDT,empty:!0,index:Be.index})}return $e}function X(ve,Se,be,_e,ye){const $e=n.SEM_OK;if(ve===n.SEM_POST){const Ie=e.utils.charsToString(Se,be,_e);let Be=ye.udtNames.add(Ie);if(Be===-1){if(Be=ye.udtNames.get(Ie),Be===-1)throw new Error("semUdtNonEmpty: name look up error")}else ye.udts.push({name:Be.name,lower:Be.lower,index:Be.index,empty:!1});ye.opcodes.push({type:n.UDT,empty:!1,index:Be.index,syntax:null,semantic:null})}return $e}function H(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_PRE&&(ye.tlscase=!0),$e}function P(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&_e>0&&(Se[be+1]===83||Se[be+1]===115)&&(ye.tlscase=!1),$e}function S(ve,Se,be,_e,ye){const $e=n.SEM_OK;if(ve===n.SEM_POST)if(ye.tlscase){const Ie=Se.slice(be,be+_e);for(let Be=0;Be<Ie.length;Be+=1)Ie[Be]>=65&&Ie[Be]<=90&&(Ie[Be]+=32);ye.opcodes.push({type:n.TLS,string:Ie})}else ye.opcodes.push({type:n.TBS,string:Se.slice(be,be+_e)});return $e}function F(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(_e<=2?ye.opcodes.push({type:n.TLS,string:[]}):ye.opcodes.push({type:n.TBS,string:Se.slice(be+1,be+_e-1)})),$e}function ue(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_PRE?ye.tbsstr=[]:ve===n.SEM_POST&&ye.opcodes.push({type:n.TBS,string:ye.tbsstr}),$e}function ee(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_PRE?(ye.min=0,ye.max=0):ve===n.SEM_POST&&(ye.min>ye.max&&ye.errors.push({line:ye.findLine(ye.lines,be,ye.charsLength),char:be,msg:`TRG, (%dmin-max), min cannot be greater than max: min: ${ye.min}: max: ${ye.max}`}),ye.opcodes.push({type:n.TRG,min:ye.min,max:ye.max})),$e}function fe(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.min=o(Se,be,_e)),$e}function le(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.max=o(Se,be,_e)),$e}function ce(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.min=l(Se,be,_e)),$e}function pe(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.max=l(Se,be,_e)),$e}function se(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.min=u(Se,be,_e)),$e}function de(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&(ye.max=u(Se,be,_e)),$e}function re(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.tbsstr.push(o(Se,be,_e)),$e}function me(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.tbsstr.push(l(Se,be,_e)),$e}function te(ve,Se,be,_e,ye){const $e=n.SEM_OK;return ve===n.SEM_POST&&ye.tbsstr.push(u(Se,be,_e)),$e}this.callbacks=[],this.callbacks.abgop=Z,this.callbacks.aenop=Q,this.callbacks.alternation=b,this.callbacks.andop=J,this.callbacks.bmax=pe,this.callbacks.bmin=ce,this.callbacks.bkaop=oe,this.callbacks.bknop=ae,this.callbacks.bkrop=U,this.callbacks["bkr-name"]=O,this.callbacks.bstring=me,this.callbacks.clsop=F,this.callbacks.ci=I,this.callbacks.cs=x,this.callbacks.um=T,this.callbacks.pm=M,this.callbacks.concatenation=_,this.callbacks.defined=C,this.callbacks.dmax=le,this.callbacks.dmin=fe,this.callbacks.dstring=re,this.callbacks.file=d,this.callbacks.incalt=k,this.callbacks.notop=Y,this.callbacks.optionopen=E,this.callbacks["rep-max"]=q,this.callbacks["rep-min"]=D,this.callbacks["rep-min-max"]=j,this.callbacks.repetition=w,this.callbacks.repop=B,this.callbacks.rnmop=L,this.callbacks.rule=m,this.callbacks.rulelookup=y,this.callbacks.rulename=A,this.callbacks.tbsop=ue,this.callbacks.tlscase=P,this.callbacks.tlsstring=S,this.callbacks.tlsop=H,this.callbacks.trgop=ee,this.callbacks["udt-empty"]=z,this.callbacks["udt-non-empty"]=X,this.callbacks.xmax=de,this.callbacks.xmin=se,this.callbacks.xstring=te}),semanticCallbacks}var sabnfGrammar,hasRequiredSabnfGrammar;function requireSabnfGrammar(){return hasRequiredSabnfGrammar||(hasRequiredSabnfGrammar=1,sabnfGrammar=function(){this.grammarObject="grammarObject",this.rules=[],this.rules[0]={name:"File",lower:"file",index:0,isBkr:!1},this.rules[1]={name:"BlankLine",lower:"blankline",index:1,isBkr:!1},this.rules[2]={name:"Rule",lower:"rule",index:2,isBkr:!1},this.rules[3]={name:"RuleLookup",lower:"rulelookup",index:3,isBkr:!1},this.rules[4]={name:"RuleNameTest",lower:"rulenametest",index:4,isBkr:!1},this.rules[5]={name:"RuleName",lower:"rulename",index:5,isBkr:!1},this.rules[6]={name:"RuleNameError",lower:"rulenameerror",index:6,isBkr:!1},this.rules[7]={name:"DefinedAsTest",lower:"definedastest",index:7,isBkr:!1},this.rules[8]={name:"DefinedAsError",lower:"definedaserror",index:8,isBkr:!1},this.rules[9]={name:"DefinedAs",lower:"definedas",index:9,isBkr:!1},this.rules[10]={name:"Defined",lower:"defined",index:10,isBkr:!1},this.rules[11]={name:"IncAlt",lower:"incalt",index:11,isBkr:!1},this.rules[12]={name:"RuleError",lower:"ruleerror",index:12,isBkr:!1},this.rules[13]={name:"LineEndError",lower:"lineenderror",index:13,isBkr:!1},this.rules[14]={name:"Alternation",lower:"alternation",index:14,isBkr:!1},this.rules[15]={name:"Concatenation",lower:"concatenation",index:15,isBkr:!1},this.rules[16]={name:"Repetition",lower:"repetition",index:16,isBkr:!1},this.rules[17]={name:"Modifier",lower:"modifier",index:17,isBkr:!1},this.rules[18]={name:"Predicate",lower:"predicate",index:18,isBkr:!1},this.rules[19]={name:"BasicElement",lower:"basicelement",index:19,isBkr:!1},this.rules[20]={name:"BasicElementErr",lower:"basicelementerr",index:20,isBkr:!1},this.rules[21]={name:"Group",lower:"group",index:21,isBkr:!1},this.rules[22]={name:"GroupError",lower:"grouperror",index:22,isBkr:!1},this.rules[23]={name:"GroupOpen",lower:"groupopen",index:23,isBkr:!1},this.rules[24]={name:"GroupClose",lower:"groupclose",index:24,isBkr:!1},this.rules[25]={name:"Option",lower:"option",index:25,isBkr:!1},this.rules[26]={name:"OptionError",lower:"optionerror",index:26,isBkr:!1},this.rules[27]={name:"OptionOpen",lower:"optionopen",index:27,isBkr:!1},this.rules[28]={name:"OptionClose",lower:"optionclose",index:28,isBkr:!1},this.rules[29]={name:"RnmOp",lower:"rnmop",index:29,isBkr:!1},this.rules[30]={name:"BkrOp",lower:"bkrop",index:30,isBkr:!1},this.rules[31]={name:"bkrModifier",lower:"bkrmodifier",index:31,isBkr:!1},this.rules[32]={name:"cs",lower:"cs",index:32,isBkr:!1},this.rules[33]={name:"ci",lower:"ci",index:33,isBkr:!1},this.rules[34]={name:"um",lower:"um",index:34,isBkr:!1},this.rules[35]={name:"pm",lower:"pm",index:35,isBkr:!1},this.rules[36]={name:"bkr-name",lower:"bkr-name",index:36,isBkr:!1},this.rules[37]={name:"rname",lower:"rname",index:37,isBkr:!1},this.rules[38]={name:"uname",lower:"uname",index:38,isBkr:!1},this.rules[39]={name:"ename",lower:"ename",index:39,isBkr:!1},this.rules[40]={name:"UdtOp",lower:"udtop",index:40,isBkr:!1},this.rules[41]={name:"udt-non-empty",lower:"udt-non-empty",index:41,isBkr:!1},this.rules[42]={name:"udt-empty",lower:"udt-empty",index:42,isBkr:!1},this.rules[43]={name:"RepOp",lower:"repop",index:43,isBkr:!1},this.rules[44]={name:"AltOp",lower:"altop",index:44,isBkr:!1},this.rules[45]={name:"CatOp",lower:"catop",index:45,isBkr:!1},this.rules[46]={name:"StarOp",lower:"starop",index:46,isBkr:!1},this.rules[47]={name:"AndOp",lower:"andop",index:47,isBkr:!1},this.rules[48]={name:"NotOp",lower:"notop",index:48,isBkr:!1},this.rules[49]={name:"BkaOp",lower:"bkaop",index:49,isBkr:!1},this.rules[50]={name:"BknOp",lower:"bknop",index:50,isBkr:!1},this.rules[51]={name:"AbgOp",lower:"abgop",index:51,isBkr:!1},this.rules[52]={name:"AenOp",lower:"aenop",index:52,isBkr:!1},this.rules[53]={name:"TrgOp",lower:"trgop",index:53,isBkr:!1},this.rules[54]={name:"TbsOp",lower:"tbsop",index:54,isBkr:!1},this.rules[55]={name:"TlsOp",lower:"tlsop",index:55,isBkr:!1},this.rules[56]={name:"TlsCase",lower:"tlscase",index:56,isBkr:!1},this.rules[57]={name:"TlsOpen",lower:"tlsopen",index:57,isBkr:!1},this.rules[58]={name:"TlsClose",lower:"tlsclose",index:58,isBkr:!1},this.rules[59]={name:"TlsString",lower:"tlsstring",index:59,isBkr:!1},this.rules[60]={name:"StringTab",lower:"stringtab",index:60,isBkr:!1},this.rules[61]={name:"ClsOp",lower:"clsop",index:61,isBkr:!1},this.rules[62]={name:"ClsOpen",lower:"clsopen",index:62,isBkr:!1},this.rules[63]={name:"ClsClose",lower:"clsclose",index:63,isBkr:!1},this.rules[64]={name:"ClsString",lower:"clsstring",index:64,isBkr:!1},this.rules[65]={name:"ProsVal",lower:"prosval",index:65,isBkr:!1},this.rules[66]={name:"ProsValOpen",lower:"prosvalopen",index:66,isBkr:!1},this.rules[67]={name:"ProsValString",lower:"prosvalstring",index:67,isBkr:!1},this.rules[68]={name:"ProsValClose",lower:"prosvalclose",index:68,isBkr:!1},this.rules[69]={name:"rep-min",lower:"rep-min",index:69,isBkr:!1},this.rules[70]={name:"rep-min-max",lower:"rep-min-max",index:70,isBkr:!1},this.rules[71]={name:"rep-max",lower:"rep-max",index:71,isBkr:!1},this.rules[72]={name:"rep-num",lower:"rep-num",index:72,isBkr:!1},this.rules[73]={name:"dString",lower:"dstring",index:73,isBkr:!1},this.rules[74]={name:"xString",lower:"xstring",index:74,isBkr:!1},this.rules[75]={name:"bString",lower:"bstring",index:75,isBkr:!1},this.rules[76]={name:"Dec",lower:"dec",index:76,isBkr:!1},this.rules[77]={name:"Hex",lower:"hex",index:77,isBkr:!1},this.rules[78]={name:"Bin",lower:"bin",index:78,isBkr:!1},this.rules[79]={name:"dmin",lower:"dmin",index:79,isBkr:!1},this.rules[80]={name:"dmax",lower:"dmax",index:80,isBkr:!1},this.rules[81]={name:"bmin",lower:"bmin",index:81,isBkr:!1},this.rules[82]={name:"bmax",lower:"bmax",index:82,isBkr:!1},this.rules[83]={name:"xmin",lower:"xmin",index:83,isBkr:!1},this.rules[84]={name:"xmax",lower:"xmax",index:84,isBkr:!1},this.rules[85]={name:"dnum",lower:"dnum",index:85,isBkr:!1},this.rules[86]={name:"bnum",lower:"bnum",index:86,isBkr:!1},this.rules[87]={name:"xnum",lower:"xnum",index:87,isBkr:!1},this.rules[88]={name:"alphanum",lower:"alphanum",index:88,isBkr:!1},this.rules[89]={name:"owsp",lower:"owsp",index:89,isBkr:!1},this.rules[90]={name:"wsp",lower:"wsp",index:90,isBkr:!1},this.rules[91]={name:"space",lower:"space",index:91,isBkr:!1},this.rules[92]={name:"comment",lower:"comment",index:92,isBkr:!1},this.rules[93]={name:"LineEnd",lower:"lineend",index:93,isBkr:!1},this.rules[94]={name:"LineContinue",lower:"linecontinue",index:94,isBkr:!1},this.udts=[],this.rules[0].opcodes=[],this.rules[0].opcodes[0]={type:3,min:0,max:1/0},this.rules[0].opcodes[1]={type:1,children:[2,3,4]},this.rules[0].opcodes[2]={type:4,index:1},this.rules[0].opcodes[3]={type:4,index:2},this.rules[0].opcodes[4]={type:4,index:12},this.rules[1].opcodes=[],this.rules[1].opcodes[0]={type:2,children:[1,5,7]},this.rules[1].opcodes[1]={type:3,min:0,max:1/0},this.rules[1].opcodes[2]={type:1,children:[3,4]},this.rules[1].opcodes[3]={type:6,string:[32]},this.rules[1].opcodes[4]={type:6,string:[9]},this.rules[1].opcodes[5]={type:3,min:0,max:1},this.rules[1].opcodes[6]={type:4,index:92},this.rules[1].opcodes[7]={type:4,index:93},this.rules[2].opcodes=[],this.rules[2].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[2].opcodes[1]={type:4,index:3},this.rules[2].opcodes[2]={type:4,index:89},this.rules[2].opcodes[3]={type:4,index:14},this.rules[2].opcodes[4]={type:1,children:[5,8]},this.rules[2].opcodes[5]={type:2,children:[6,7]},this.rules[2].opcodes[6]={type:4,index:89},this.rules[2].opcodes[7]={type:4,index:93},this.rules[2].opcodes[8]={type:2,children:[9,10]},this.rules[2].opcodes[9]={type:4,index:13},this.rules[2].opcodes[10]={type:4,index:93},this.rules[3].opcodes=[],this.rules[3].opcodes[0]={type:2,children:[1,2,3]},this.rules[3].opcodes[1]={type:4,index:4},this.rules[3].opcodes[2]={type:4,index:89},this.rules[3].opcodes[3]={type:4,index:7},this.rules[4].opcodes=[],this.rules[4].opcodes[0]={type:1,children:[1,2]},this.rules[4].opcodes[1]={type:4,index:5},this.rules[4].opcodes[2]={type:4,index:6},this.rules[5].opcodes=[],this.rules[5].opcodes[0]={type:4,index:88},this.rules[6].opcodes=[],this.rules[6].opcodes[0]={type:3,min:1,max:1/0},this.rules[6].opcodes[1]={type:1,children:[2,3]},this.rules[6].opcodes[2]={type:5,min:33,max:60},this.rules[6].opcodes[3]={type:5,min:62,max:126},this.rules[7].opcodes=[],this.rules[7].opcodes[0]={type:1,children:[1,2]},this.rules[7].opcodes[1]={type:4,index:9},this.rules[7].opcodes[2]={type:4,index:8},this.rules[8].opcodes=[],this.rules[8].opcodes[0]={type:3,min:1,max:2},this.rules[8].opcodes[1]={type:5,min:33,max:126},this.rules[9].opcodes=[],this.rules[9].opcodes[0]={type:1,children:[1,2]},this.rules[9].opcodes[1]={type:4,index:11},this.rules[9].opcodes[2]={type:4,index:10},this.rules[10].opcodes=[],this.rules[10].opcodes[0]={type:6,string:[61]},this.rules[11].opcodes=[],this.rules[11].opcodes[0]={type:6,string:[61,47]},this.rules[12].opcodes=[],this.rules[12].opcodes[0]={type:2,children:[1,6]},this.rules[12].opcodes[1]={type:3,min:1,max:1/0},this.rules[12].opcodes[2]={type:1,children:[3,4,5]},this.rules[12].opcodes[3]={type:5,min:32,max:126},this.rules[12].opcodes[4]={type:6,string:[9]},this.rules[12].opcodes[5]={type:4,index:94},this.rules[12].opcodes[6]={type:4,index:93},this.rules[13].opcodes=[],this.rules[13].opcodes[0]={type:3,min:1,max:1/0},this.rules[13].opcodes[1]={type:1,children:[2,3,4]},this.rules[13].opcodes[2]={type:5,min:32,max:126},this.rules[13].opcodes[3]={type:6,string:[9]},this.rules[13].opcodes[4]={type:4,index:94},this.rules[14].opcodes=[],this.rules[14].opcodes[0]={type:2,children:[1,2]},this.rules[14].opcodes[1]={type:4,index:15},this.rules[14].opcodes[2]={type:3,min:0,max:1/0},this.rules[14].opcodes[3]={type:2,children:[4,5,6]},this.rules[14].opcodes[4]={type:4,index:89},this.rules[14].opcodes[5]={type:4,index:44},this.rules[14].opcodes[6]={type:4,index:15},this.rules[15].opcodes=[],this.rules[15].opcodes[0]={type:2,children:[1,2]},this.rules[15].opcodes[1]={type:4,index:16},this.rules[15].opcodes[2]={type:3,min:0,max:1/0},this.rules[15].opcodes[3]={type:2,children:[4,5]},this.rules[15].opcodes[4]={type:4,index:45},this.rules[15].opcodes[5]={type:4,index:16},this.rules[16].opcodes=[],this.rules[16].opcodes[0]={type:2,children:[1,3]},this.rules[16].opcodes[1]={type:3,min:0,max:1},this.rules[16].opcodes[2]={type:4,index:17},this.rules[16].opcodes[3]={type:1,children:[4,5,6,7]},this.rules[16].opcodes[4]={type:4,index:21},this.rules[16].opcodes[5]={type:4,index:25},this.rules[16].opcodes[6]={type:4,index:19},this.rules[16].opcodes[7]={type:4,index:20},this.rules[17].opcodes=[],this.rules[17].opcodes[0]={type:1,children:[1,5]},this.rules[17].opcodes[1]={type:2,children:[2,3]},this.rules[17].opcodes[2]={type:4,index:18},this.rules[17].opcodes[3]={type:3,min:0,max:1},this.rules[17].opcodes[4]={type:4,index:43},this.rules[17].opcodes[5]={type:4,index:43},this.rules[18].opcodes=[],this.rules[18].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[18].opcodes[1]={type:4,index:49},this.rules[18].opcodes[2]={type:4,index:50},this.rules[18].opcodes[3]={type:4,index:47},this.rules[18].opcodes[4]={type:4,index:48},this.rules[19].opcodes=[],this.rules[19].opcodes[0]={type:1,children:[1,2,3,4,5,6,7,8,9,10]},this.rules[19].opcodes[1]={type:4,index:40},this.rules[19].opcodes[2]={type:4,index:29},this.rules[19].opcodes[3]={type:4,index:53},this.rules[19].opcodes[4]={type:4,index:54},this.rules[19].opcodes[5]={type:4,index:55},this.rules[19].opcodes[6]={type:4,index:61},this.rules[19].opcodes[7]={type:4,index:30},this.rules[19].opcodes[8]={type:4,index:51},this.rules[19].opcodes[9]={type:4,index:52},this.rules[19].opcodes[10]={type:4,index:65},this.rules[20].opcodes=[],this.rules[20].opcodes[0]={type:3,min:1,max:1/0},this.rules[20].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[20].opcodes[2]={type:5,min:33,max:40},this.rules[20].opcodes[3]={type:5,min:42,max:46},this.rules[20].opcodes[4]={type:5,min:48,max:92},this.rules[20].opcodes[5]={type:5,min:94,max:126},this.rules[21].opcodes=[],this.rules[21].opcodes[0]={type:2,children:[1,2,3]},this.rules[21].opcodes[1]={type:4,index:23},this.rules[21].opcodes[2]={type:4,index:14},this.rules[21].opcodes[3]={type:1,children:[4,5]},this.rules[21].opcodes[4]={type:4,index:24},this.rules[21].opcodes[5]={type:4,index:22},this.rules[22].opcodes=[],this.rules[22].opcodes[0]={type:3,min:1,max:1/0},this.rules[22].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[22].opcodes[2]={type:5,min:33,max:40},this.rules[22].opcodes[3]={type:5,min:42,max:46},this.rules[22].opcodes[4]={type:5,min:48,max:92},this.rules[22].opcodes[5]={type:5,min:94,max:126},this.rules[23].opcodes=[],this.rules[23].opcodes[0]={type:2,children:[1,2]},this.rules[23].opcodes[1]={type:6,string:[40]},this.rules[23].opcodes[2]={type:4,index:89},this.rules[24].opcodes=[],this.rules[24].opcodes[0]={type:2,children:[1,2]},this.rules[24].opcodes[1]={type:4,index:89},this.rules[24].opcodes[2]={type:6,string:[41]},this.rules[25].opcodes=[],this.rules[25].opcodes[0]={type:2,children:[1,2,3]},this.rules[25].opcodes[1]={type:4,index:27},this.rules[25].opcodes[2]={type:4,index:14},this.rules[25].opcodes[3]={type:1,children:[4,5]},this.rules[25].opcodes[4]={type:4,index:28},this.rules[25].opcodes[5]={type:4,index:26},this.rules[26].opcodes=[],this.rules[26].opcodes[0]={type:3,min:1,max:1/0},this.rules[26].opcodes[1]={type:1,children:[2,3,4,5]},this.rules[26].opcodes[2]={type:5,min:33,max:40},this.rules[26].opcodes[3]={type:5,min:42,max:46},this.rules[26].opcodes[4]={type:5,min:48,max:92},this.rules[26].opcodes[5]={type:5,min:94,max:126},this.rules[27].opcodes=[],this.rules[27].opcodes[0]={type:2,children:[1,2]},this.rules[27].opcodes[1]={type:6,string:[91]},this.rules[27].opcodes[2]={type:4,index:89},this.rules[28].opcodes=[],this.rules[28].opcodes[0]={type:2,children:[1,2]},this.rules[28].opcodes[1]={type:4,index:89},this.rules[28].opcodes[2]={type:6,string:[93]},this.rules[29].opcodes=[],this.rules[29].opcodes[0]={type:4,index:88},this.rules[30].opcodes=[],this.rules[30].opcodes[0]={type:2,children:[1,2,4]},this.rules[30].opcodes[1]={type:6,string:[92]},this.rules[30].opcodes[2]={type:3,min:0,max:1},this.rules[30].opcodes[3]={type:4,index:31},this.rules[30].opcodes[4]={type:4,index:36},this.rules[31].opcodes=[],this.rules[31].opcodes[0]={type:1,children:[1,7,13,19]},this.rules[31].opcodes[1]={type:2,children:[2,3]},this.rules[31].opcodes[2]={type:4,index:32},this.rules[31].opcodes[3]={type:3,min:0,max:1},this.rules[31].opcodes[4]={type:1,children:[5,6]},this.rules[31].opcodes[5]={type:4,index:34},this.rules[31].opcodes[6]={type:4,index:35},this.rules[31].opcodes[7]={type:2,children:[8,9]},this.rules[31].opcodes[8]={type:4,index:33},this.rules[31].opcodes[9]={type:3,min:0,max:1},this.rules[31].opcodes[10]={type:1,children:[11,12]},this.rules[31].opcodes[11]={type:4,index:34},this.rules[31].opcodes[12]={type:4,index:35},this.rules[31].opcodes[13]={type:2,children:[14,15]},this.rules[31].opcodes[14]={type:4,index:34},this.rules[31].opcodes[15]={type:3,min:0,max:1},this.rules[31].opcodes[16]={type:1,children:[17,18]},this.rules[31].opcodes[17]={type:4,index:32},this.rules[31].opcodes[18]={type:4,index:33},this.rules[31].opcodes[19]={type:2,children:[20,21]},this.rules[31].opcodes[20]={type:4,index:35},this.rules[31].opcodes[21]={type:3,min:0,max:1},this.rules[31].opcodes[22]={type:1,children:[23,24]},this.rules[31].opcodes[23]={type:4,index:32},this.rules[31].opcodes[24]={type:4,index:33},this.rules[32].opcodes=[],this.rules[32].opcodes[0]={type:6,string:[37,115]},this.rules[33].opcodes=[],this.rules[33].opcodes[0]={type:6,string:[37,105]},this.rules[34].opcodes=[],this.rules[34].opcodes[0]={type:6,string:[37,117]},this.rules[35].opcodes=[],this.rules[35].opcodes[0]={type:6,string:[37,112]},this.rules[36].opcodes=[],this.rules[36].opcodes[0]={type:1,children:[1,2,3]},this.rules[36].opcodes[1]={type:4,index:38},this.rules[36].opcodes[2]={type:4,index:39},this.rules[36].opcodes[3]={type:4,index:37},this.rules[37].opcodes=[],this.rules[37].opcodes[0]={type:4,index:88},this.rules[38].opcodes=[],this.rules[38].opcodes[0]={type:2,children:[1,2]},this.rules[38].opcodes[1]={type:6,string:[117,95]},this.rules[38].opcodes[2]={type:4,index:88},this.rules[39].opcodes=[],this.rules[39].opcodes[0]={type:2,children:[1,2]},this.rules[39].opcodes[1]={type:6,string:[101,95]},this.rules[39].opcodes[2]={type:4,index:88},this.rules[40].opcodes=[],this.rules[40].opcodes[0]={type:1,children:[1,2]},this.rules[40].opcodes[1]={type:4,index:42},this.rules[40].opcodes[2]={type:4,index:41},this.rules[41].opcodes=[],this.rules[41].opcodes[0]={type:2,children:[1,2]},this.rules[41].opcodes[1]={type:6,string:[117,95]},this.rules[41].opcodes[2]={type:4,index:88},this.rules[42].opcodes=[],this.rules[42].opcodes[0]={type:2,children:[1,2]},this.rules[42].opcodes[1]={type:6,string:[101,95]},this.rules[42].opcodes[2]={type:4,index:88},this.rules[43].opcodes=[],this.rules[43].opcodes[0]={type:1,children:[1,5,8,11,12]},this.rules[43].opcodes[1]={type:2,children:[2,3,4]},this.rules[43].opcodes[2]={type:4,index:69},this.rules[43].opcodes[3]={type:4,index:46},this.rules[43].opcodes[4]={type:4,index:71},this.rules[43].opcodes[5]={type:2,children:[6,7]},this.rules[43].opcodes[6]={type:4,index:69},this.rules[43].opcodes[7]={type:4,index:46},this.rules[43].opcodes[8]={type:2,children:[9,10]},this.rules[43].opcodes[9]={type:4,index:46},this.rules[43].opcodes[10]={type:4,index:71},this.rules[43].opcodes[11]={type:4,index:46},this.rules[43].opcodes[12]={type:4,index:70},this.rules[44].opcodes=[],this.rules[44].opcodes[0]={type:2,children:[1,2]},this.rules[44].opcodes[1]={type:6,string:[47]},this.rules[44].opcodes[2]={type:4,index:89},this.rules[45].opcodes=[],this.rules[45].opcodes[0]={type:4,index:90},this.rules[46].opcodes=[],this.rules[46].opcodes[0]={type:6,string:[42]},this.rules[47].opcodes=[],this.rules[47].opcodes[0]={type:6,string:[38]},this.rules[48].opcodes=[],this.rules[48].opcodes[0]={type:6,string:[33]},this.rules[49].opcodes=[],this.rules[49].opcodes[0]={type:6,string:[38,38]},this.rules[50].opcodes=[],this.rules[50].opcodes[0]={type:6,string:[33,33]},this.rules[51].opcodes=[],this.rules[51].opcodes[0]={type:6,string:[37,94]},this.rules[52].opcodes=[],this.rules[52].opcodes[0]={type:6,string:[37,36]},this.rules[53].opcodes=[],this.rules[53].opcodes[0]={type:2,children:[1,2]},this.rules[53].opcodes[1]={type:6,string:[37]},this.rules[53].opcodes[2]={type:1,children:[3,8,13]},this.rules[53].opcodes[3]={type:2,children:[4,5,6,7]},this.rules[53].opcodes[4]={type:4,index:76},this.rules[53].opcodes[5]={type:4,index:79},this.rules[53].opcodes[6]={type:6,string:[45]},this.rules[53].opcodes[7]={type:4,index:80},this.rules[53].opcodes[8]={type:2,children:[9,10,11,12]},this.rules[53].opcodes[9]={type:4,index:77},this.rules[53].opcodes[10]={type:4,index:83},this.rules[53].opcodes[11]={type:6,string:[45]},this.rules[53].opcodes[12]={type:4,index:84},this.rules[53].opcodes[13]={type:2,children:[14,15,16,17]},this.rules[53].opcodes[14]={type:4,index:78},this.rules[53].opcodes[15]={type:4,index:81},this.rules[53].opcodes[16]={type:6,string:[45]},this.rules[53].opcodes[17]={type:4,index:82},this.rules[54].opcodes=[],this.rules[54].opcodes[0]={type:2,children:[1,2]},this.rules[54].opcodes[1]={type:6,string:[37]},this.rules[54].opcodes[2]={type:1,children:[3,10,17]},this.rules[54].opcodes[3]={type:2,children:[4,5,6]},this.rules[54].opcodes[4]={type:4,index:76},this.rules[54].opcodes[5]={type:4,index:73},this.rules[54].opcodes[6]={type:3,min:0,max:1/0},this.rules[54].opcodes[7]={type:2,children:[8,9]},this.rules[54].opcodes[8]={type:6,string:[46]},this.rules[54].opcodes[9]={type:4,index:73},this.rules[54].opcodes[10]={type:2,children:[11,12,13]},this.rules[54].opcodes[11]={type:4,index:77},this.rules[54].opcodes[12]={type:4,index:74},this.rules[54].opcodes[13]={type:3,min:0,max:1/0},this.rules[54].opcodes[14]={type:2,children:[15,16]},this.rules[54].opcodes[15]={type:6,string:[46]},this.rules[54].opcodes[16]={type:4,index:74},this.rules[54].opcodes[17]={type:2,children:[18,19,20]},this.rules[54].opcodes[18]={type:4,index:78},this.rules[54].opcodes[19]={type:4,index:75},this.rules[54].opcodes[20]={type:3,min:0,max:1/0},this.rules[54].opcodes[21]={type:2,children:[22,23]},this.rules[54].opcodes[22]={type:6,string:[46]},this.rules[54].opcodes[23]={type:4,index:75},this.rules[55].opcodes=[],this.rules[55].opcodes[0]={type:2,children:[1,2,3,4]},this.rules[55].opcodes[1]={type:4,index:56},this.rules[55].opcodes[2]={type:4,index:57},this.rules[55].opcodes[3]={type:4,index:59},this.rules[55].opcodes[4]={type:4,index:58},this.rules[56].opcodes=[],this.rules[56].opcodes[0]={type:3,min:0,max:1},this.rules[56].opcodes[1]={type:1,children:[2,3]},this.rules[56].opcodes[2]={type:7,string:[37,105]},this.rules[56].opcodes[3]={type:7,string:[37,115]},this.rules[57].opcodes=[],this.rules[57].opcodes[0]={type:6,string:[34]},this.rules[58].opcodes=[],this.rules[58].opcodes[0]={type:6,string:[34]},this.rules[59].opcodes=[],this.rules[59].opcodes[0]={type:3,min:0,max:1/0},this.rules[59].opcodes[1]={type:1,children:[2,3,4]},this.rules[59].opcodes[2]={type:5,min:32,max:33},this.rules[59].opcodes[3]={type:5,min:35,max:126},this.rules[59].opcodes[4]={type:4,index:60},this.rules[60].opcodes=[],this.rules[60].opcodes[0]={type:6,string:[9]},this.rules[61].opcodes=[],this.rules[61].opcodes[0]={type:2,children:[1,2,3]},this.rules[61].opcodes[1]={type:4,index:62},this.rules[61].opcodes[2]={type:4,index:64},this.rules[61].opcodes[3]={type:4,index:63},this.rules[62].opcodes=[],this.rules[62].opcodes[0]={type:6,string:[39]},this.rules[63].opcodes=[],this.rules[63].opcodes[0]={type:6,string:[39]},this.rules[64].opcodes=[],this.rules[64].opcodes[0]={type:3,min:0,max:1/0},this.rules[64].opcodes[1]={type:1,children:[2,3,4]},this.rules[64].opcodes[2]={type:5,min:32,max:38},this.rules[64].opcodes[3]={type:5,min:40,max:126},this.rules[64].opcodes[4]={type:4,index:60},this.rules[65].opcodes=[],this.rules[65].opcodes[0]={type:2,children:[1,2,3]},this.rules[65].opcodes[1]={type:4,index:66},this.rules[65].opcodes[2]={type:4,index:67},this.rules[65].opcodes[3]={type:4,index:68},this.rules[66].opcodes=[],this.rules[66].opcodes[0]={type:6,string:[60]},this.rules[67].opcodes=[],this.rules[67].opcodes[0]={type:3,min:0,max:1/0},this.rules[67].opcodes[1]={type:1,children:[2,3,4]},this.rules[67].opcodes[2]={type:5,min:32,max:61},this.rules[67].opcodes[3]={type:5,min:63,max:126},this.rules[67].opcodes[4]={type:4,index:60},this.rules[68].opcodes=[],this.rules[68].opcodes[0]={type:6,string:[62]},this.rules[69].opcodes=[],this.rules[69].opcodes[0]={type:4,index:72},this.rules[70].opcodes=[],this.rules[70].opcodes[0]={type:4,index:72},this.rules[71].opcodes=[],this.rules[71].opcodes[0]={type:4,index:72},this.rules[72].opcodes=[],this.rules[72].opcodes[0]={type:3,min:1,max:1/0},this.rules[72].opcodes[1]={type:5,min:48,max:57},this.rules[73].opcodes=[],this.rules[73].opcodes[0]={type:4,index:85},this.rules[74].opcodes=[],this.rules[74].opcodes[0]={type:4,index:87},this.rules[75].opcodes=[],this.rules[75].opcodes[0]={type:4,index:86},this.rules[76].opcodes=[],this.rules[76].opcodes[0]={type:1,children:[1,2]},this.rules[76].opcodes[1]={type:6,string:[68]},this.rules[76].opcodes[2]={type:6,string:[100]},this.rules[77].opcodes=[],this.rules[77].opcodes[0]={type:1,children:[1,2]},this.rules[77].opcodes[1]={type:6,string:[88]},this.rules[77].opcodes[2]={type:6,string:[120]},this.rules[78].opcodes=[],this.rules[78].opcodes[0]={type:1,children:[1,2]},this.rules[78].opcodes[1]={type:6,string:[66]},this.rules[78].opcodes[2]={type:6,string:[98]},this.rules[79].opcodes=[],this.rules[79].opcodes[0]={type:4,index:85},this.rules[80].opcodes=[],this.rules[80].opcodes[0]={type:4,index:85},this.rules[81].opcodes=[],this.rules[81].opcodes[0]={type:4,index:86},this.rules[82].opcodes=[],this.rules[82].opcodes[0]={type:4,index:86},this.rules[83].opcodes=[],this.rules[83].opcodes[0]={type:4,index:87},this.rules[84].opcodes=[],this.rules[84].opcodes[0]={type:4,index:87},this.rules[85].opcodes=[],this.rules[85].opcodes[0]={type:3,min:1,max:1/0},this.rules[85].opcodes[1]={type:5,min:48,max:57},this.rules[86].opcodes=[],this.rules[86].opcodes[0]={type:3,min:1,max:1/0},this.rules[86].opcodes[1]={type:5,min:48,max:49},this.rules[87].opcodes=[],this.rules[87].opcodes[0]={type:3,min:1,max:1/0},this.rules[87].opcodes[1]={type:1,children:[2,3,4]},this.rules[87].opcodes[2]={type:5,min:48,max:57},this.rules[87].opcodes[3]={type:5,min:65,max:70},this.rules[87].opcodes[4]={type:5,min:97,max:102},this.rules[88].opcodes=[],this.rules[88].opcodes[0]={type:2,children:[1,4]},this.rules[88].opcodes[1]={type:1,children:[2,3]},this.rules[88].opcodes[2]={type:5,min:97,max:122},this.rules[88].opcodes[3]={type:5,min:65,max:90},this.rules[88].opcodes[4]={type:3,min:0,max:1/0},this.rules[88].opcodes[5]={type:1,children:[6,7,8,9]},this.rules[88].opcodes[6]={type:5,min:97,max:122},this.rules[88].opcodes[7]={type:5,min:65,max:90},this.rules[88].opcodes[8]={type:5,min:48,max:57},this.rules[88].opcodes[9]={type:6,string:[45]},this.rules[89].opcodes=[],this.rules[89].opcodes[0]={type:3,min:0,max:1/0},this.rules[89].opcodes[1]={type:4,index:91},this.rules[90].opcodes=[],this.rules[90].opcodes[0]={type:3,min:1,max:1/0},this.rules[90].opcodes[1]={type:4,index:91},this.rules[91].opcodes=[],this.rules[91].opcodes[0]={type:1,children:[1,2,3,4]},this.rules[91].opcodes[1]={type:6,string:[32]},this.rules[91].opcodes[2]={type:6,string:[9]},this.rules[91].opcodes[3]={type:4,index:92},this.rules[91].opcodes[4]={type:4,index:94},this.rules[92].opcodes=[],this.rules[92].opcodes[0]={type:2,children:[1,2]},this.rules[92].opcodes[1]={type:6,string:[59]},this.rules[92].opcodes[2]={type:3,min:0,max:1/0},this.rules[92].opcodes[3]={type:1,children:[4,5]},this.rules[92].opcodes[4]={type:5,min:32,max:126},this.rules[92].opcodes[5]={type:6,string:[9]},this.rules[93].opcodes=[],this.rules[93].opcodes[0]={type:1,children:[1,2,3]},this.rules[93].opcodes[1]={type:6,string:[13,10]},this.rules[93].opcodes[2]={type:6,string:[10]},this.rules[93].opcodes[3]={type:6,string:[13]},this.rules[94].opcodes=[],this.rules[94].opcodes[0]={type:2,children:[1,5]},this.rules[94].opcodes[1]={type:1,children:[2,3,4]},this.rules[94].opcodes[2]={type:6,string:[13,10]},this.rules[94].opcodes[3]={type:6,string:[10]},this.rules[94].opcodes[4]={type:6,string:[13]},this.rules[94].opcodes[5]={type:1,children:[6,7]},this.rules[94].opcodes[6]={type:6,string:[32]},this.rules[94].opcodes[7]={type:6,string:[9]},this.toString=function(){let n="";return n+=`;
`,n+=`; ABNF for JavaScript APG 2.0 SABNF
`,n+=`; RFC 5234 with some restrictions and additions.
`,n+=`; Updated 11/24/2015 for RFC 7405 case-sensitive literal string notation
`,n+=`;  - accepts %s"string" as a case-sensitive string
`,n+=`;  - accepts %i"string" as a case-insensitive string
`,n+=`;  - accepts "string" as a case-insensitive string
`,n+=`;
`,n+=`; Some restrictions:
`,n+=`;   1. Rules must begin at first character of each line.
`,n+=`;      Indentations on first rule and rules thereafter are not allowed.
`,n+=`;   2. Relaxed line endings. CRLF, LF or CR are accepted as valid line ending.
`,n+=`;   3. Prose values, i.e. <prose value>, are accepted as valid grammar syntax.
`,n+=`;      However, a working parser cannot be generated from them.
`,n+=`;
`,n+=`; Super set (SABNF) additions:
`,n+=`;   1. Look-ahead (syntactic predicate) operators are accepted as element prefixes.
`,n+=`;      & is the positive look-ahead operator, succeeds and backtracks if the look-ahead phrase is found
`,n+=`;      ! is the negative look-ahead operator, succeeds and backtracks if the look-ahead phrase is NOT found
`,n+=`;      e.g. &%d13 or &rule or !(A / B)
`,n+=`;   2. User-Defined Terminals (UDT) of the form, u_name and e_name are accepted.
`,n+=`;      'name' is alpha followed by alpha/num/hyphen just like a rule name.
`,n+=`;      u_name may be used as an element but no rule definition is given.
`,n+=`;      e.g. rule = A / u_myUdt
`,n+=`;           A = "a"
`,n+=`;      would be a valid grammar.
`,n+=`;   3. Case-sensitive, single-quoted strings are accepted.
`,n+=`;      e.g. 'abc' would be equivalent to %d97.98.99
`,n+=`;      (kept for backward compatibility, but superseded by %s"abc")  
`,n+=`; New 12/26/2015
`,n+=`;   4. Look-behind operators are accepted as element prefixes.
`,n+=`;      && is the positive look-behind operator, succeeds and backtracks if the look-behind phrase is found
`,n+=`;      !! is the negative look-behind operator, succeeds and backtracks if the look-behind phrase is NOT found
`,n+=`;      e.g. &&%d13 or &&rule or !!(A / B)
`,n+=`;   5. Back reference operators, i.e. \\rulename, are accepted.
`,n+=`;      A back reference operator acts like a TLS or TBS terminal except that the phrase it attempts
`,n+=`;      to match is a phrase previously matched by the rule 'rulename'.
`,n+=`;      There are two modes of previous phrase matching - the parent-frame mode and the universal mode.
`,n+=`;      In universal mode, \\rulename matches the last match to 'rulename' regardless of where it was found.
`,n+=`;      In parent-frame mode, \\rulename matches only the last match found on the parent's frame or parse tree level.
`,n+=`;      Back reference modifiers can be used to specify case and mode.
`,n+=`;      \\A defaults to case-insensitive and universal mode, e.g. \\A === \\%i%uA
`,n+=`;      Modifiers %i and %s determine case-insensitive and case-sensitive mode, respectively.
`,n+=`;      Modifiers %u and %p determine universal mode and parent frame mode, respectively.
`,n+=`;      Case and mode modifiers can appear in any order, e.g. \\%s%pA === \\%p%sA. 
`,n+=`;   7. String begin anchor, ABG(%^) matches the beginning of the input string location.
`,n+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,n+=`;   8. String end anchor, AEN(%$) matches the end of the input string location.
`,n+=`;      Returns EMPTY or NOMATCH. Never consumes any characters.
`,n+=`;
`,n+=`File            = *(BlankLine / Rule / RuleError)
`,n+=`BlankLine       = *(%d32/%d9) [comment] LineEnd
`,n+=`Rule            = RuleLookup owsp Alternation ((owsp LineEnd)
`,n+=`                / (LineEndError LineEnd))
`,n+=`RuleLookup      = RuleNameTest owsp DefinedAsTest
`,n+=`RuleNameTest    = RuleName/RuleNameError
`,n+=`RuleName        = alphanum
`,n+=`RuleNameError   = 1*(%d33-60/%d62-126)
`,n+=`DefinedAsTest   = DefinedAs / DefinedAsError
`,n+=`DefinedAsError  = 1*2%d33-126
`,n+=`DefinedAs       = IncAlt / Defined
`,n+=`Defined         = %d61
`,n+=`IncAlt          = %d61.47
`,n+=`RuleError       = 1*(%d32-126 / %d9  / LineContinue) LineEnd
`,n+=`LineEndError    = 1*(%d32-126 / %d9  / LineContinue)
`,n+=`Alternation     = Concatenation *(owsp AltOp Concatenation)
`,n+=`Concatenation   = Repetition *(CatOp Repetition)
`,n+=`Repetition      = [Modifier] (Group / Option / BasicElement / BasicElementErr)
`,n+=`Modifier        = (Predicate [RepOp])
`,n+=`                / RepOp
`,n+=`Predicate       = BkaOp
`,n+=`                / BknOp
`,n+=`                / AndOp
`,n+=`                / NotOp
`,n+=`BasicElement    = UdtOp
`,n+=`                / RnmOp
`,n+=`                / TrgOp
`,n+=`                / TbsOp
`,n+=`                / TlsOp
`,n+=`                / ClsOp
`,n+=`                / BkrOp
`,n+=`                / AbgOp
`,n+=`                / AenOp
`,n+=`                / ProsVal
`,n+=`BasicElementErr = 1*(%d33-40/%d42-46/%d48-92/%d94-126)
`,n+=`Group           = GroupOpen  Alternation (GroupClose / GroupError)
`,n+=`GroupError      = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,n+=`GroupOpen       = %d40 owsp
`,n+=`GroupClose      = owsp %d41
`,n+=`Option          = OptionOpen Alternation (OptionClose / OptionError)
`,n+=`OptionError     = 1*(%d33-40/%d42-46/%d48-92/%d94-126) ; same as BasicElementErr
`,n+=`OptionOpen      = %d91 owsp
`,n+=`OptionClose     = owsp %d93
`,n+=`RnmOp           = alphanum
`,n+=`BkrOp           = %d92 [bkrModifier] bkr-name
`,n+=`bkrModifier     = (cs [um / pm]) / (ci [um / pm]) / (um [cs /ci]) / (pm [cs / ci])
`,n+=`cs              = '%s'
`,n+=`ci              = '%i'
`,n+=`um              = '%u'
`,n+=`pm              = '%p'
`,n+=`bkr-name        = uname / ename / rname
`,n+=`rname           = alphanum
`,n+=`uname           = %d117.95 alphanum
`,n+=`ename           = %d101.95 alphanum
`,n+=`UdtOp           = udt-empty
`,n+=`                / udt-non-empty
`,n+=`udt-non-empty   = %d117.95 alphanum
`,n+=`udt-empty       = %d101.95 alphanum
`,n+=`RepOp           = (rep-min StarOp rep-max)
`,n+=`                / (rep-min StarOp)
`,n+=`                / (StarOp rep-max)
`,n+=`                / StarOp
`,n+=`                / rep-min-max
`,n+=`AltOp           = %d47 owsp
`,n+=`CatOp           = wsp
`,n+=`StarOp          = %d42
`,n+=`AndOp           = %d38
`,n+=`NotOp           = %d33
`,n+=`BkaOp           = %d38.38
`,n+=`BknOp           = %d33.33
`,n+=`AbgOp           = %d37.94
`,n+=`AenOp           = %d37.36
`,n+=`TrgOp           = %d37 ((Dec dmin %d45 dmax) / (Hex xmin %d45 xmax) / (Bin bmin %d45 bmax))
`,n+=`TbsOp           = %d37 ((Dec dString *(%d46 dString)) / (Hex xString *(%d46 xString)) / (Bin bString *(%d46 bString)))
`,n+=`TlsOp           = TlsCase TlsOpen TlsString TlsClose
`,n+=`TlsCase         = ["%i" / "%s"]
`,n+=`TlsOpen         = %d34
`,n+=`TlsClose        = %d34
`,n+=`TlsString       = *(%d32-33/%d35-126/StringTab)
`,n+=`StringTab       = %d9
`,n+=`ClsOp           = ClsOpen ClsString ClsClose
`,n+=`ClsOpen         = %d39
`,n+=`ClsClose        = %d39
`,n+=`ClsString       = *(%d32-38/%d40-126/StringTab)
`,n+=`ProsVal         = ProsValOpen ProsValString ProsValClose
`,n+=`ProsValOpen     = %d60
`,n+=`ProsValString   = *(%d32-61/%d63-126/StringTab)
`,n+=`ProsValClose    = %d62
`,n+=`rep-min         = rep-num
`,n+=`rep-min-max     = rep-num
`,n+=`rep-max         = rep-num
`,n+=`rep-num         = 1*(%d48-57)
`,n+=`dString         = dnum
`,n+=`xString         = xnum
`,n+=`bString         = bnum
`,n+=`Dec             = (%d68/%d100)
`,n+=`Hex             = (%d88/%d120)
`,n+=`Bin             = (%d66/%d98)
`,n+=`dmin            = dnum
`,n+=`dmax            = dnum
`,n+=`bmin            = bnum
`,n+=`bmax            = bnum
`,n+=`xmin            = xnum
`,n+=`xmax            = xnum
`,n+=`dnum            = 1*(%d48-57)
`,n+=`bnum            = 1*%d48-49
`,n+=`xnum            = 1*(%d48-57 / %d65-70 / %d97-102)
`,n+=`;
`,n+=`; Basics
`,n+=`alphanum        = (%d97-122/%d65-90) *(%d97-122/%d65-90/%d48-57/%d45)
`,n+=`owsp            = *space
`,n+=`wsp             = 1*space
`,n+=`space           = %d32
`,n+=`                / %d9
`,n+=`                / comment
`,n+=`                / LineContinue
`,n+=`comment         = %d59 *(%d32-126 / %d9)
`,n+=`LineEnd         = %d13.10
`,n+=`                / %d10
`,n+=`                / %d13
`,n+=`LineContinue    = (%d13.10 / %d10 / %d13) (%d32 / %d9)
`,n}}),sabnfGrammar}var parser$1,hasRequiredParser;function requireParser(){return hasRequiredParser||(hasRequiredParser=1,parser$1=function(){const e="parser: ",n=requireNodeExports(),a=n.ids,o=new(requireSyntaxCallbacks()),l=new(requireSemanticCallbacks()),u=new(requireSabnfGrammar()),d=new n.parser;d.ast=new n.ast,d.callbacks=o.callbacks,d.ast.callbacks=l.callbacks;const m=function(w,E,A){if(E<0||E>=A)return-1;for(let C=0;C<w.length;C+=1)if(E>=w[C].beginChar&&E<w[C].beginChar+w[C].length)return C;return-1},y=function(w,E){let A=-1;if(E<w.length){for(let C=E;C<w.length;C+=1)if(w[C]!==null){A=w[C];break}}return A},b=function(w){w.forEach(E=>{const A=[],C=[];let k=0;E.opcodes.forEach(B=>{B.type===a.ALT&&B.children.length===1||B.type===a.CAT&&B.children.length===1||B.type===a.REP&&B.min===1&&B.max===1?C.push(null):(C.push(k),A.push(B),k+=1)}),C.push(k),A.forEach(B=>{if(B.type===a.ALT||B.type===a.CAT)for(let D=0;D<B.children.length;D+=1)B.children[D]=y(C,B.children[D])}),E.opcodes=A})};this.syntax=function(w,E,A,C,k){if(k){if(k.traceObject!=="traceObject")throw new TypeError(`${e}trace argument is not a trace object`);d.trace=k}const B={};B.errors=A,B.strict=!!C,B.lines=E,B.findLine=m,B.charsLength=w.length,B.ruleCount=0,d.parse(u,"file",w,B).success||A.push({line:0,char:0,msg:"syntax analysis of input grammar failed"})},this.semantic=function(w,E,A){const C={};return C.errors=A,C.lines=E,C.findLine=m,C.charsLength=w.length,d.ast.translate(C),A.length?null:(b(C.rules),{rules:C.rules,udts:C.udts,lineMap:C.rulesLineMap})},this.generateSource=function(w,E,A,C,k){let B="",D,q,j,J=0,Y=1/0,L=0;const Z=[],Q=[];let oe=0,ae=0,U=0,I=0,x=0,T=0,M=0,O=0,z=0,X=0,H=0,P=0,S=0,F=0,ue=0;A.forEach(le=>{Z.push(le.lower),J+=le.opcodes.length,le.opcodes.forEach(ce=>{switch(ce.type){case a.ALT:oe+=1;break;case a.CAT:ae+=1;break;case a.RNM:U+=1;break;case a.UDT:I+=1;break;case a.REP:x+=1;break;case a.AND:T+=1;break;case a.NOT:M+=1;break;case a.BKA:P+=1;break;case a.BKN:S+=1;break;case a.BKR:H+=1;break;case a.ABG:F+=1;break;case a.AEN:ue+=1;break;case a.TLS:for(O+=1,D=0;D<ce.string.length;D+=1)ce.string[D]<Y&&(Y=ce.string[D]),ce.string[D]>L&&(L=ce.string[D]);break;case a.TBS:for(z+=1,D=0;D<ce.string.length;D+=1)ce.string[D]<Y&&(Y=ce.string[D]),ce.string[D]>L&&(L=ce.string[D]);break;case a.TRG:X+=1,ce.min<Y&&(Y=ce.min),ce.max>L&&(L=ce.max);break;default:throw new Error("generateSource: unrecognized opcode")}})}),Z.sort(),C.length>0&&(C.forEach(le=>{Q.push(le.lower)}),Q.sort());let ee="module.exports";k&&typeof k=="string"&&(ee=`let ${k}`),B+=`// copyright: Copyright (c) 2021 Lowell D. Thomas, all rights reserved<br>
`,B+=`//   license: BSD-2-Clause (https://opensource.org/licenses/BSD-2-Clause)<br>
`,B+=`//
`,B+=`// Generated by apg-js, Version 4.0.0 [apg-js](https://github.com/ldthomas/apg-js)
`,B+=`${ee} = function grammar(){
`,B+="  // ```\n",B+=`  // SUMMARY
`,B+=`  //      rules = ${A.length}
`,B+=`  //       udts = ${C.length}
`,B+=`  //    opcodes = ${J}
`,B+=`  //        ---   ABNF original opcodes
`,B+=`  //        ALT = ${oe}
`,B+=`  //        CAT = ${ae}
`,B+=`  //        REP = ${x}
`,B+=`  //        RNM = ${U}
`,B+=`  //        TLS = ${O}
`,B+=`  //        TBS = ${z}
`,B+=`  //        TRG = ${X}
`,B+=`  //        ---   SABNF superset opcodes
`,B+=`  //        UDT = ${I}
`,B+=`  //        AND = ${T}
`,B+=`  //        NOT = ${M}
`,B+=`  //        BKA = ${P}
`,B+=`  //        BKN = ${S}
`,B+=`  //        BKR = ${H}
`,B+=`  //        ABG = ${F}
`,B+=`  //        AEN = ${ue}
`,B+="  // characters = [",O+z+X===0?B+=" none defined ]":B+=`${Y} - ${L}]`,I>0&&(B+=" + user defined"),B+=`
`,B+="  // ```\n",B+=`  /* OBJECT IDENTIFIER (for internal parser use) */
`,B+=`  this.grammarObject = 'grammarObject';
`,B+=`
`,B+=`  /* RULES */
`,B+=`  this.rules = [];
`,A.forEach((le,ce)=>{let pe="  this.rules[";pe+=ce,pe+="] = {name: '",pe+=le.name,pe+="', lower: '",pe+=le.lower,pe+="', index: ",pe+=le.index,pe+=", isBkr: ",pe+=le.isBkr,pe+=`};
`,B+=pe}),B+=`
`,B+=`  /* UDTS */
`,B+=`  this.udts = [];
`,C.length>0&&C.forEach((le,ce)=>{let pe="  this.udts[";pe+=ce,pe+="] = {name: '",pe+=le.name,pe+="', lower: '",pe+=le.lower,pe+="', index: ",pe+=le.index,pe+=", empty: ",pe+=le.empty,pe+=", isBkr: ",pe+=le.isBkr,pe+=`};
`,B+=pe}),B+=`
`,B+=`  /* OPCODES */
`,A.forEach((le,ce)=>{ce>0&&(B+=`
`),B+=`  /* ${le.name} */
`,B+=`  this.rules[${ce}].opcodes = [];
`,le.opcodes.forEach((pe,se)=>{let de;switch(pe.type){case a.ALT:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}, children: [${pe.children.toString()}]};// ALT
`;break;case a.CAT:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}, children: [${pe.children.toString()}]};// CAT
`;break;case a.RNM:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}, index: ${pe.index}};// RNM(${A[pe.index].name})
`;break;case a.BKR:pe.index>=A.length?(q=C[pe.index-A.length].name,j=C[pe.index-A.length].lower):(q=A[pe.index].name,j=A[pe.index].lower),de="%i",pe.bkrCase===a.BKR_MODE_CS&&(de="%s"),pe.bkrMode===a.BKR_MODE_UM?de+="%u":de+="%p",q=de+q,B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}, index: ${pe.index}, lower: '${j}', bkrCase: ${pe.bkrCase}, bkrMode: ${pe.bkrMode}};// BKR(\\${q})
`;break;case a.UDT:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}, empty: ${pe.empty}, index: ${pe.index}};// UDT(${C[pe.index].name})
`;break;case a.REP:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}, min: ${pe.min}, max: ${pe.max}};// REP
`;break;case a.AND:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}};// AND
`;break;case a.NOT:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}};// NOT
`;break;case a.ABG:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}};// ABG(%^)
`;break;case a.AEN:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}};// AEN(%$)
`;break;case a.BKA:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}};// BKA
`;break;case a.BKN:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}};// BKN
`;break;case a.TLS:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}, string: [${pe.string.toString()}]};// TLS
`;break;case a.TBS:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}, string: [${pe.string.toString()}]};// TBS
`;break;case a.TRG:B+=`  this.rules[${ce}].opcodes[${se}] = {type: ${pe.type}, min: ${pe.min}, max: ${pe.max}};// TRG
`;break;default:throw new Error("parser.js: ~143: unrecognized opcode")}})}),B+=`
`,B+="  // The `toString()` function will display the original grammar file(s) that produced these opcodes.\n",B+=`  this.toString = function toString(){
`,B+=`    let str = "";
`;let fe;return E.forEach(le=>{const ce=le.beginChar+le.length;fe="",B+='    str += "';for(let pe=le.beginChar;pe<ce;pe+=1){switch(w[pe]){case 9:fe=" ";break;case 10:fe="\\n";break;case 13:fe="\\r";break;case 34:fe='\\"';break;case 92:fe="\\\\";break;default:fe=String.fromCharCode(w[pe]);break}B+=fe}B+=`";
`}),B+=`    return str;
`,B+=`  }
`,B+=`}
`,B},this.generateObject=function(w,E,A){const C={},k=[],B=[],D=w.slice(0);return C.grammarObject="grammarObject",E.forEach(q=>{k.push(q.lower)}),k.sort(),A.length>0&&(A.forEach(q=>{B.push(q.lower)}),B.sort()),C.callbacks=[],k.forEach(q=>{C.callbacks[q]=!1}),A.length>0&&B.forEach(q=>{C.callbacks[q]=!1}),C.rules=E,C.udts=A,C.toString=function(){return D},C}}),parser$1}var ruleAttributes,hasRequiredRuleAttributes;function requireRuleAttributes(){return hasRequiredRuleAttributes||(hasRequiredRuleAttributes=1,ruleAttributes=function(){const e=requireIdentifiers(),n="rule-attributes.js";let a=null;function o(oe){return oe.left||oe.nested||oe.right||oe.cyclic?!1:oe.empty}function l(oe){return!!(oe.left||oe.nested||oe.right||oe.cyclic)}function u(oe,ae){let U=0,I=0,x=0;for(U=0;U<ae;U+=1)if(oe[U].nested)return!0;for(U=0;U<ae;U+=1)if(oe[U].right&&!oe[U].leaf){for(I=U+1;I<ae;I+=1)if(!o(oe[I]))return!0}for(U=ae-1;U>=0;U-=1)if(oe[U].left&&!oe[U].leaf){for(I=U-1;I>=0;I-=1)if(!o(oe[I]))return!0}for(U=0;U<ae;U+=1)if(!oe[U].empty&&!l(oe[U])){for(I=U+1;I<ae;I+=1)if(l(oe[I])){for(x=I+1;x<ae;x+=1)if(!oe[x].empty&&!l(oe[x]))return!0}}return!1}function d(oe,ae){for(let U=0;U<ae;U+=1)if(!oe[U].cyclic)return!1;return!0}function m(oe,ae){for(let U=0;U<ae;U+=1){if(oe[U].left)return!0;if(!oe[U].empty)return!1}return!1}function y(oe,ae){for(let U=ae-1;U>=0;U-=1){if(oe[U].right)return!0;if(!oe[U].empty)return!1}return!1}function b(oe,ae){for(let U=0;U<ae;U+=1)if(!oe[U].empty)return!1;return!0}function _(oe,ae){for(let U=0;U<ae;U+=1)if(!oe[U].finite)return!1;return!0}function w(oe,ae,U,I){let x=0;const T=ae[U],M=T.children.length,O=[];for(x=0;x<M;x+=1)O.push(oe.attrGen());for(x=0;x<M;x+=1)C(oe,ae,T.children[x],O[x]);I.left=m(O,M),I.right=y(O,M),I.nested=u(O,M),I.empty=b(O,M),I.finite=_(O,M),I.cyclic=d(O,M)}function E(oe,ae,U,I){let x=0;const T=ae[U],M=T.children.length,O=[];for(x=0;x<M;x+=1)O.push(oe.attrGen());for(x=0;x<M;x+=1)C(oe,ae,T.children[x],O[x]);for(I.left=!1,I.right=!1,I.nested=!1,I.empty=!1,I.finite=!1,I.cyclic=!1,x=0;x<M;x+=1)O[x].left&&(I.left=!0),O[x].nested&&(I.nested=!0),O[x].right&&(I.right=!0),O[x].empty&&(I.empty=!0),O[x].finite&&(I.finite=!0),O[x].cyclic&&(I.cyclic=!0)}function A(oe,ae,U,I){const x=ae[U];x.index>=oe.ruleCount?(I.empty=oe.udts[x.index-oe.ruleCount].empty,I.finite=!0):(k(oe,x.index,I),I.left=!1,I.nested=!1,I.right=!1,I.cyclic=!1)}function C(oe,ae,U,I){oe.attrInit(I);const x=ae[U];switch(x.type){case e.ALT:E(oe,ae,U,I);break;case e.CAT:w(oe,ae,U,I);break;case e.REP:C(oe,ae,U+1,I),x.min===0&&(I.empty=!0,I.finite=!0);break;case e.RNM:k(oe,ae[U].index,I);break;case e.BKR:A(oe,ae,U,I);break;case e.AND:case e.NOT:case e.BKA:case e.BKN:C(oe,ae,U+1,I),I.empty=!0;break;case e.TLS:I.empty=!ae[U].string.length,I.finite=!0,I.cyclic=!1;break;case e.TBS:case e.TRG:I.empty=!1,I.finite=!0,I.cyclic=!1;break;case e.UDT:I.empty=x.empty,I.finite=!0,I.cyclic=!1;break;case e.ABG:case e.AEN:I.empty=!0,I.finite=!0,I.cyclic=!1;break;default:throw new Error(`unknown opcode type: ${x}`)}}function k(oe,ae,U){const I=oe.attrsWorking[ae];I.isComplete?oe.attrCopy(U,I):I.isOpen?ae===oe.startRule?ae===oe.startRule&&(U.left=!0,U.right=!0,U.cyclic=!0,U.leaf=!0):U.finite=!0:(I.isOpen=!0,C(oe,I.rule.opcodes,0,U),I.left=U.left,I.right=U.right,I.nested=U.nested,I.empty=U.empty,I.finite=U.finite,I.cyclic=U.cyclic,I.leaf=!1,I.isOpen=!1,I.isComplete=!0)}const B=oe=>{a=oe;let ae=0,U=0;const I=a.attrGen();for(ae=0;ae<a.ruleCount;ae+=1){for(U=0;U<a.ruleCount;U+=1)a.attrInit(a.attrsWorking[U]);a.startRule=ae,k(a,ae,I),a.attrCopy(a.attrs[ae],a.attrsWorking[ae])}a.attributesComplete=!0;let x=null;for(ae=0;ae<a.ruleCount;ae+=1)if(x=a.attrs[ae],x.left||!x.finite||x.cyclic){const T=a.attrGen(x.rule);a.attrCopy(T,x),a.attrsErrors.push(T),a.attrsErrorCount+=1}},D=oe=>oe?"t":"f",q=oe=>oe?"e":"f",j=oe=>oe?"t":"e",J=(oe,ae,U,I)=>{let x=`${oe}:${ae}:`;return x+=`${q(U.left)} `,x+=`${D(U.nested)} `,x+=`${D(U.right)} `,x+=`${q(U.cyclic)} `,x+=`${j(U.finite)} `,x+=`${D(U.empty)}:`,x+=`${a.typeToString(I.recursiveType)}:`,x+=I.recursiveType===e.ATTR_MR?I.groupNumber:"-",x+=`:${U.rule.name}
`,x},Y=()=>{let oe=`LEGEND - t=true, f=false, e=error
`;return oe+=`sequence:rule index:left nested right cyclic finite empty:type:group number:rule name
`,oe},L=()=>{let oe=null,ae=null,U="";if(U+=`RULE ATTRIBUTES WITH ERRORS
`,U+=Y(),a.attrsErrorCount)for(let I=0;I<a.attrsErrorCount;I+=1)oe=a.attrsErrors[I],ae=a.ruleDeps[oe.rule.index],U+=J(I,oe.rule.index,oe,ae);else U+=`<none>
`;return U},Z=oe=>{let ae=0,U=0,I=null,x=null,T="",{ruleIndexes:M}=a;for(oe===97?M=a.ruleAlphaIndexes:oe===116&&(M=a.ruleTypeIndexes),ae=0;ae<a.ruleCount;ae+=1)U=M[ae],I=a.attrs[U],x=a.ruleDeps[U],T+=J(ae,U,I,x);return T};return{ruleAttributes:B,showAttributes:(oe="index")=>{if(!a.attributesComplete)throw new Error(`${n}:showAttributes: attributes not available`);let ae="";const U=`RULE ATTRIBUTES
`;return oe.charCodeAt(0)===97?(ae+=`alphabetical by rule name
`,ae+=U,ae+=Y(),ae+=Z(97)):oe.charCodeAt(0)===116?(ae+=`ordered by rule type
`,ae+=U,ae+=Y(),ae+=Z(116)):(ae+=`ordered by rule index
`,ae+=U,ae+=Y(),ae+=Z()),ae},showAttributeErrors:L}}()),ruleAttributes}var ruleDependencies,hasRequiredRuleDependencies;function requireRuleDependencies(){return hasRequiredRuleDependencies||(hasRequiredRuleDependencies=1,ruleDependencies=(()=>{const t=requireIdentifiers();let e=null;const n=(u,d,m,y)=>{let b=0,_=0;const w=d[m];y[m]=!0;const E=w.rule.opcodes;for(b=0;b<E.length;b+=1){const A=E[b];if(A.type===t.RNM)for(w.refersTo[A.index]=!0,y[A.index]||n(u,d,A.index,y),_=0;_<u;_+=1)d[A.index].refersTo[_]&&(w.refersTo[_]=!0);else A.type===t.UDT?w.refersToUdt[A.index]=!0:A.type===t.BKR&&(A.index<u?(w.refersTo[A.index]=!0,y[A.index]||n(u,d,A.index,y)):w.refersToUdt[u-A.index]=!0)}},a=u=>{e=u;let d=0,m=0,y=0,b=null,_=null,w=!1;e.dependenciesComplete=!1;const E=e.falseArray(e.ruleCount);for(d=0;d<e.ruleCount;d+=1)e.falsifyArray(E),n(e.ruleCount,e.ruleDeps,d,E);for(d=0;d<e.ruleCount;d+=1)for(m=0;m<e.ruleCount;m+=1)d!==m&&e.ruleDeps[m].refersTo[d]&&(e.ruleDeps[d].referencedBy[m]=!0);for(d=0;d<e.ruleCount;d+=1)e.ruleDeps[d].recursiveType=t.ATTR_N,e.ruleDeps[d].refersTo[d]&&(e.ruleDeps[d].recursiveType=t.ATTR_R);for(y=-1,d=0;d<e.ruleCount;d+=1)if(b=e.ruleDeps[d],b.recursiveType===t.ATTR_R)for(w=!0,m=0;m<e.ruleCount;m+=1)d!==m&&(_=e.ruleDeps[m],_.recursiveType===t.ATTR_R&&b.refersTo[m]&&_.refersTo[d]&&(w&&(y+=1,b.recursiveType=t.ATTR_MR,b.groupNumber=y,w=!1),_.recursiveType=t.ATTR_MR,_.groupNumber=y));e.isMutuallyRecursive=y>-1,e.ruleAlphaIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesAlpha),e.ruleTypeIndexes.sort(e.compRulesType),e.isMutuallyRecursive&&e.ruleTypeIndexes.sort(e.compRulesGroup),e.udtCount&&e.udtAlphaIndexes.sort(e.compUdtsAlpha),e.dependenciesComplete=!0},o=(u=null)=>{let d=0,m=0,y=0,b=0;const _=e.ruleCount-1,w=e.udtCount-1,E=100;let A="",C="";const k="=> ",B="<= ";let D=!1,q=null,{ruleIndexes:j}=e,{udtIndexes:J}=e;for(u===97?(j=e.ruleAlphaIndexes,J=e.udtAlphaIndexes):u===116&&(j=e.ruleTypeIndexes,J=e.udtAlphaIndexes),d=0;d<e.ruleCount;d+=1){for(q=e.ruleDeps[j[d]],C=`${j[d]}:${e.typeToString(q.recursiveType)}:`,e.isMutuallyRecursive&&(C+=q.groupNumber>-1?q.groupNumber:"-",C+=":"),C+=" ",A+=`${C+e.rules[j[d]].name}
`,D=!0,y=0,b=A.length,A+=C,m=0;m<e.ruleCount;m+=1)q.refersTo[j[m]]&&(D?(A+=k,D=!1,A+=e.ruleDeps[j[m]].rule.name):A+=`, ${e.ruleDeps[j[m]].rule.name}`,y+=1),A.length-b>E&&m!==_&&(A+=`
${C}${k}`,b=A.length);if(e.udtCount)for(m=0;m<e.udtCount;m+=1)q.refersToUdt[J[m]]&&(D?(A+=k,D=!1,A+=e.udts[J[m]].name):A+=`, ${e.udts[J[m]].name}`,y+=1),A.length-b>E&&m!==w&&(A+=`
${C}${k}`,b=A.length);for(y===0&&(A+=`=> <none>
`),D===!1&&(A+=`
`),D=!0,y=0,b=A.length,A+=C,m=0;m<e.ruleCount;m+=1)q.referencedBy[j[m]]&&(D?(A+=B,D=!1,A+=e.ruleDeps[j[m]].rule.name):A+=`, ${e.ruleDeps[j[m]].rule.name}`,y+=1),A.length-b>E&&m!==_&&(A+=`
${C}${k}`,b=A.length);y===0&&(A+=`<= <none>
`),D===!1&&(A+=`
`),A+=`
`}return A};return{ruleDependencies:a,showRuleDependencies:(u="index")=>{let d=`RULE DEPENDENCIES(index:type:[group number:])
`;return d+=`=> refers to rule names
`,d+=`<= referenced by rule names
`,e.dependenciesComplete&&(u.charCodeAt(0)===97?(d+=`alphabetical by rule name
`,d+=o(97)):u.charCodeAt(0)===116?(d+=`ordered by rule type
`,d+=o(116)):(d+=`ordered by rule index
`,d+=o(null))),d}}})()),ruleDependencies}var attributes,hasRequiredAttributes;function requireAttributes(){return hasRequiredAttributes||(hasRequiredAttributes=1,attributes=function(){const e=requireIdentifiers(),{ruleAttributes:n,showAttributes:a,showAttributeErrors:o}=requireRuleAttributes(),{ruleDependencies:l,showRuleDependencies:u}=requireRuleDependencies();class d{constructor(b,_){this.rules=b,this.udts=_,this.ruleCount=b.length,this.udtCount=_.length,this.startRule=0,this.dependenciesComplete=!1,this.attributesComplete=!1,this.isMutuallyRecursive=!1,this.ruleIndexes=this.indexArray(this.ruleCount),this.ruleAlphaIndexes=this.indexArray(this.ruleCount),this.ruleTypeIndexes=this.indexArray(this.ruleCount),this.udtIndexes=this.indexArray(this.udtCount),this.udtAlphaIndexes=this.indexArray(this.udtCount),this.attrsErrorCount=0,this.attrs=[],this.attrsErrors=[],this.attrsWorking=[],this.ruleDeps=[];for(let w=0;w<this.ruleCount;w+=1)this.attrs.push(this.attrGen(this.rules[w])),this.attrsWorking.push(this.attrGen(this.rules[w])),this.ruleDeps.push(this.rdGen(b[w],this.ruleCount,this.udtCount));this.compRulesAlpha=this.compRulesAlpha.bind(this),this.compUdtsAlpha=this.compUdtsAlpha.bind(this),this.compRulesType=this.compRulesType.bind(this),this.compRulesGroup=this.compRulesGroup.bind(this)}attrGen(b){return{left:!1,nested:!1,right:!1,empty:!1,finite:!1,cyclic:!1,leaf:!1,isOpen:!1,isComplete:!1,rule:b}}attrInit(b){b.left=!1,b.nested=!1,b.right=!1,b.empty=!1,b.finite=!1,b.cyclic=!1,b.leaf=!1,b.isOpen=!1,b.isComplete=!1}attrCopy(b,_){b.left=_.left,b.nested=_.nested,b.right=_.right,b.empty=_.empty,b.finite=_.finite,b.cyclic=_.cyclic,b.leaf=_.leaf,b.isOpen=_.isOpen,b.isComplete=_.isComplete,b.rule=_.rule}rdGen(b,_,w){return{rule:b,recursiveType:e.ATTR_N,groupNumber:-1,refersTo:this.falseArray(_),refersToUdt:this.falseArray(w),referencedBy:this.falseArray(_)}}typeToString(b){switch(b){case e.ATTR_N:return" N";case e.ATTR_R:return" R";case e.ATTR_MR:return"MR";default:return"UNKNOWN"}}falseArray(b){const _=[];if(b>0)for(let w=0;w<b;w+=1)_.push(!1);return _}falsifyArray(b){for(let _=0;_<b.length;_+=1)b[_]=!1}indexArray(b){const _=[];if(b>0)for(let w=0;w<b;w+=1)_.push(w);return _}compRulesAlpha(b,_){return this.rules[b].lower<this.rules[_].lower?-1:this.rules[b].lower>this.rules[_].lower?1:0}compUdtsAlpha(b,_){return this.udts[b].lower<this.udts[_].lower?-1:this.udts[b].lower>this.udts[_].lower?1:0}compRulesType(b,_){return this.ruleDeps[b].recursiveType<this.ruleDeps[_].recursiveType?-1:this.ruleDeps[b].recursiveType>this.ruleDeps[_].recursiveType?1:0}compRulesGroup(b,_){if(this.ruleDeps[b].recursiveType===e.ATTR_MR&&this.ruleDeps[_].recursiveType===e.ATTR_MR){if(this.ruleDeps[b].groupNumber<this.ruleDeps[_].groupNumber)return-1;if(this.ruleDeps[b].groupNumber>this.ruleDeps[_].groupNumber)return 1}return 0}}return{attributes:function(b=[],_=[],w=[],E=[]){const A=new d(b,_);return l(A),n(A),A.attrsErrorCount&&E.push({line:0,char:0,msg:`${A.attrsErrorCount} attribute errors`}),A.attrsErrorCount},showAttributes:a,showAttributeErrors:o,showRuleDependencies:u}}()),attributes}var showRules,hasRequiredShowRules;function requireShowRules(){return hasRequiredShowRules||(hasRequiredShowRules=1,showRules=function(){const e="show-rules.js";return function(o=[],l=[],u="index"){const d="showRules";let m=[],y=[];const b=[],_=[],w=o,E=l,A=o.length,C=l.length;let k="RULE/UDT NAMES",B;function D(j,J){return w[j].lower<w[J].lower?-1:w[j].lower>w[J].lower?1:0}function q(j,J){return E[j].lower<E[J].lower?-1:E[j].lower>E[J].lower?1:0}if(!(Array.isArray(o)&&o.length))throw new Error(`${e}:${d}: rules arg must be array with length > 0`);if(!Array.isArray(l))throw new Error(`${e}:${d}: udts arg must be array`);for(B=0;B<A;B+=1)b.push(B);if(m=b.slice(0),m.sort(D),C){for(B=0;B<C;B+=1)_.push(B);y=_.slice(0),y.sort(q)}if(u.charCodeAt(0)===97){for(k+=` - alphabetical by rule/UDT name
`,B=0;B<A;B+=1)k+=`${B}: ${m[B]}: ${w[m[B]].name}
`;if(C)for(B=0;B<C;B+=1)k+=`${B}: ${y[B]}: ${E[y[B]].name}
`}else{for(k+=` - ordered by rule/UDT index
`,B=0;B<A;B+=1)k+=`${B}: ${w[B].name}
`;if(C)for(B=0;B<C;B+=1)k+=`${B}: ${E[B].name}
`}return k}}()),showRules}var api=function t(e){const n="api.js: ",a=this,o=requireNodeExports(),l=requireConverter(),u=requireScanner(),d=new(requireParser()),{attributes:m,showAttributes:y,showAttributeErrors:b,showRuleDependencies:_}=requireAttributes(),w=requireShowRules(),E=function(oe,ae,U){const M=`<span class="${o.style.CLASS_CTRLCHAR}">`,O="</span>",z=`<span class="${o.style.CLASS_NOMATCH}">`,X="</span>";let H,P="";const S=!0;for(;S&&!(!Array.isArray(oe)||oe.length===0);){if(typeof ae!="number")throw new Error("abnfToHtml: beg must be type number");if(ae>=oe.length)break;typeof U!="number"||ae+U>=oe.length?H=oe.length:H=ae+U;let F=0;for(let ue=ae;ue<H;ue+=1){const ee=oe[ue];if(ee>=32&&ee<=126)switch(F===1?(P+=O,F=0):F===2&&(P+=X,F=0),ee){case 32:P+="&nbsp;";break;case 60:P+="&lt;";break;case 62:P+="&gt;";break;case 38:P+="&amp;";break;case 34:P+="&quot;";break;case 39:P+="&#039;";break;case 92:P+="&#092;";break;default:P+=String.fromCharCode(ee);break}else ee===9||ee===10||ee===13?(F===0?(P+=M,F=1):F===2&&(P+=X+M,F=1),ee===9&&(P+="TAB"),ee===10&&(P+="LF"),ee===13&&(P+="CR")):(F===0?(P+=z,F=2):F===1&&(P+=O+z,F=2),P+=`\\x${o.utils.charToHex(ee)}`)}F===2&&(P+=X),F===1&&(P+=O);break}return P},A=function(oe,ae,U){let I="";for(let x=ae;x<ae+U;x+=1){const T=oe[x];if(T>=32&&T<=126)I+=String.fromCharCode(T);else switch(T){case 9:I+="\\t";break;case 10:I+="\\n";break;case 13:I+="\\r";break;default:I+="\\unknown";break}}return I},C=function(oe){let ae="Annotated Input Grammar";return oe.forEach(U=>{ae+=`
`,ae+=`line no: ${U.lineNo}`,ae+=` : char index: ${U.beginChar}`,ae+=` : length: ${U.length}`,ae+=` : abnf: ${A(a.chars,U.beginChar,U.length)}`}),ae+=`
`,ae},k=function(oe){let ae="";return ae+=`<table class="${o.style.CLASS_GRAMMAR}">
`,ae+=`<caption>Annotated Input Grammar</caption>
`,ae+="<tr>",ae+="<th>line<br>no.</th><th>first<br>char</th><th><br>length</th><th><br>text</th>",ae+=`</tr>
`,oe.forEach(I=>{ae+="<tr>",ae+=`<td>${I.lineNo}`,ae+=`</td><td>${I.beginChar}`,ae+=`</td><td>${I.length}`,ae+=`</td><td>${E(a.chars,I.beginChar,I.length)}`,ae+="</td>",ae+=`</tr>
`}),ae+=`</table>
`,ae},B=function(oe,ae,U,I){const[x]=o;let T="";const M=`<span class="${x.CLASS_NOMATCH}">&raquo;</span>`;return T+=`<p><table class="${x.CLASS_GRAMMAR}">
`,I&&typeof I=="string"&&(T+=`<caption>${I}</caption>
`),T+=`<tr><th>line<br>no.</th><th>line<br>offset</th><th>error<br>offset</th><th><br>text</th></tr>
`,oe.forEach(O=>{let z,X,H,P,S,F="",ue="";ae.length===0?(S=M,X=0):(z=ae[O.line],H=z.beginChar,O.char>H&&(F=E(U,H,O.char-H)),H=O.char,P=z.beginChar+z.length,H<P&&(ue=E(U,H,P-H)),S=F+M+ue,X=O.char-z.beginChar,T+="<tr>",T+=`<td>${O.line}</td><td>${z.beginChar}</td><td>${X}</td><td>${S}</td>`,T+=`</tr>
`,T+="<tr>",T+=`<td colspan="3"></td><td>&uarr;:&nbsp;${o.utils.stringToAsciiHtml(O.msg)}</td>`,T+=`</tr>
`)}),T+=`</table></p>
`,T},D=function(oe,ae,U){let I,x,T,M;return I="",oe.forEach(O=>{x=ae[O.line],I+=`${x.lineNo}: `,I+=`${x.beginChar}: `,I+=`${O.char-x.beginChar}: `,T=x.beginChar,M=O.char-x.beginChar,I+=A(U,T,M),I+=" >> ",T=O.char,M=x.beginChar+x.length-O.char,I+=A(U,T,M),I+=`
`,I+=`${x.lineNo}: `,I+=`${x.beginChar}: `,I+=`${O.char-x.beginChar}: `,I+="error: ",I+=O.msg,I+=`
`}),I};let q=!1,j=!1,J=!1,Y=!1,L=0,Z;if(this.errors=[],Buffer$y.isBuffer(e))this.chars=l.decode("BINARY",e);else if(Array.isArray(e))this.chars=e.slice();else if(typeof e=="string")this.chars=l.decode("STRING",e);else throw new Error(`${n}input source is not a string, byte Buffer or character array`);this.sabnf=l.encode("STRING",this.chars),this.scan=function(oe,ae){this.lines=u(this.chars,this.errors,oe,ae),q=!0},this.parse=function(oe,ae){if(!q)throw new Error(`${n}grammar not scanned`);d.syntax(this.chars,this.lines,this.errors,oe,ae),j=!0},this.translate=function(){if(!j)throw new Error(`${n}grammar not scanned and parsed`);const oe=d.semantic(this.chars,this.lines,this.errors);this.errors.length===0&&(this.rules=oe.rules,this.udts=oe.udts,Z=oe.lineMap,J=!0)},this.attributes=function(){if(!J)throw new Error(`${n}grammar not scanned, parsed and translated`);return L=m(this.rules,this.udts,Z,this.errors),Y=!0,L},this.generate=function(oe){if(this.lines=u(this.chars,this.errors,oe),this.errors.length||(d.syntax(this.chars,this.lines,this.errors,oe),this.errors.length))return;const ae=d.semantic(this.chars,this.lines,this.errors);this.errors.length||(this.rules=ae.rules,this.udts=ae.udts,Z=ae.lineMap,L=m(this.rules,this.udts,Z,this.errors),Y=!0)},this.displayRules=function(oe="index"){if(!J)throw new Error(`${n}grammar not scanned, parsed and translated`);return w(this.rules,this.udts,oe)},this.displayRuleDependencies=function(oe="index"){if(!Y)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return _(oe)},this.displayAttributes=function(oe="index"){if(!Y)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return L&&b(oe),y(oe)},this.displayAttributeErrors=function(){if(!Y)throw new Error(`${n}no attributes - must be preceeded by call to attributes()`);return b()},this.toSource=function(oe){if(!Y)throw new Error(`${n}can't generate parser source - must be preceeded by call to attributes()`);if(L)throw new Error(`${n}can't generate parser source - attributes have ${L} errors`);return d.generateSource(this.chars,this.lines,this.rules,this.udts,oe)},this.toObject=function(){if(!Y)throw new Error(`${n}can't generate parser source - must be preceeded by call to attributes()`);if(L)throw new Error(`${n}can't generate parser source - attributes have ${L} errors`);return d.generateObject(this.sabnf,this.rules,this.udts)},this.errorsToAscii=function(){return D(this.errors,this.lines,this.chars)},this.errorsToHtml=function(oe){return B(this.errors,this.lines,this.chars,oe)},this.linesToAscii=function(){return C(this.lines)},this.linesToHtml=function(){return k(this.lines)}},nodeExportsExports=requireNodeExports();const apgLib=getDefaultExportFromCjs(nodeExportsExports),GRAMMAR=`
sign-in-with-ethereum =
    domain %s" wants you to sign in with your Ethereum account:" LF
    address LF
    LF
    [ statement LF ]
    LF
    %s"URI: " URI LF
    %s"Version: " version LF
    %s"Chain ID: " chain-id LF
    %s"Nonce: " nonce LF
    %s"Issued At: " issued-at
    [ LF %s"Expiration Time: " expiration-time ]
    [ LF %s"Not Before: " not-before ]
    [ LF %s"Request ID: " request-id ]
    [ LF %s"Resources:"
    resources ]

domain = dnsauthority

address = "0x" 40*40HEXDIG
    ; Must also conform to captilization
    ; checksum encoding specified in EIP-55
    ; where applicable (EOAs).

statement = *( reserved / unreserved / " " )
    ; The purpose is to exclude LF (line breaks).

version = "1"

nonce = 8*( ALPHA / DIGIT )

issued-at = date-time
expiration-time = date-time
not-before = date-time

request-id = *pchar

chain-id = 1*DIGIT
    ; See EIP-155 for valid CHAIN_IDs.

resources = *( LF resource )

resource = "- " URI

; ------------------------------------------------------------------------------
; RFC 3986

URI           = scheme ":" hier-part [ "?" query ] [ "#" fragment ]

hier-part     = "//" authority path-abempty
              / path-absolute
              / path-rootless
              / path-empty

scheme        = ALPHA *( ALPHA / DIGIT / "+" / "-" / "." )

authority     = [ userinfo "@" ] host [ ":" port ]
userinfo      = *( unreserved / pct-encoded / sub-delims / ":" )
host          = IP-literal / IPv4address / reg-name
port          = *DIGIT

IP-literal    = "[" ( IPv6address / IPvFuture  ) "]"

IPvFuture     = "v" 1*HEXDIG "." 1*( unreserved / sub-delims / ":" )

IPv6address   =                            6( h16 ":" ) ls32
              /                       "::" 5( h16 ":" ) ls32
              / [               h16 ] "::" 4( h16 ":" ) ls32
              / [ *1( h16 ":" ) h16 ] "::" 3( h16 ":" ) ls32
              / [ *2( h16 ":" ) h16 ] "::" 2( h16 ":" ) ls32
              / [ *3( h16 ":" ) h16 ] "::"    h16 ":"   ls32
              / [ *4( h16 ":" ) h16 ] "::"              ls32
              / [ *5( h16 ":" ) h16 ] "::"              h16
              / [ *6( h16 ":" ) h16 ] "::"

h16           = 1*4HEXDIG
ls32          = ( h16 ":" h16 ) / IPv4address
IPv4address   = dec-octet "." dec-octet "." dec-octet "." dec-octet
dec-octet     = DIGIT                 ; 0-9
                 / %x31-39 DIGIT         ; 10-99
                 / "1" 2DIGIT            ; 100-199
                 / "2" %x30-34 DIGIT     ; 200-249
                 / "25" %x30-35          ; 250-255

reg-name      = *( unreserved / pct-encoded / sub-delims )

path-abempty  = *( "/" segment )
path-absolute = "/" [ segment-nz *( "/" segment ) ]
path-rootless = segment-nz *( "/" segment )
path-empty    = 0pchar

segment       = *pchar
segment-nz    = 1*pchar

pchar         = unreserved / pct-encoded / sub-delims / ":" / "@"

query         = *( pchar / "/" / "?" )

fragment      = *( pchar / "/" / "?" )

pct-encoded   = "%" HEXDIG HEXDIG

unreserved    = ALPHA / DIGIT / "-" / "." / "_" / "~"
reserved      = gen-delims / sub-delims
gen-delims    = ":" / "/" / "?" / "#" / "[" / "]" / "@"
sub-delims    = "!" / "$" / "&" / "'" / "(" / ")"
              / "*" / "+" / "," / ";" / "="

; ------------------------------------------------------------------------------
; RFC 4501

dnsauthority    = host [ ":" port ]
                             ; See RFC 3986 for the
                             ; definition of "host" and "port".

; ------------------------------------------------------------------------------
; RFC 3339

date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                          ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap second
                          ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                  [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time

; ------------------------------------------------------------------------------
; RFC 5234

ALPHA          =  %x41-5A / %x61-7A   ; A-Z / a-z
LF             =  %x0A
                  ; linefeed
DIGIT          =  %x30-39
                  ; 0-9
HEXDIG         =  DIGIT / "A" / "B" / "C" / "D" / "E" / "F"
`;class ParsedMessage{constructor(e){const n=new api(GRAMMAR);if(n.generate(),n.errors.length)throw console.error(n.errorsToAscii()),console.error(n.linesToAscii()),console.log(n.displayAttributeErrors()),new Error("ABNF grammar has errors");const a=n.toObject(),o=new apgLib.parser;o.ast=new apgLib.ast;const l=apgLib.ids,u=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.domain=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks.domain=u;const d=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.address=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks.address=d;const m=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.statement=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks.statement=m;const y=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.uri||(Z.uri=apgLib.utils.charsToString(J,Y,L))),Q};o.ast.callbacks.uri=y;const b=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.version=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks.version=b;const _=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.chainId=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks["chain-id"]=_;const w=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.nonce=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks.nonce=w;const E=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.issuedAt=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks["issued-at"]=E;const A=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.expirationTime=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks["expiration-time"]=A;const C=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.notBefore=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks["not-before"]=C;const k=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.requestId=apgLib.utils.charsToString(J,Y,L)),Q};o.ast.callbacks["request-id"]=k;const B=function(j,J,Y,L,Z){const Q=l.SEM_OK;return j===l.SEM_PRE&&(Z.resources=apgLib.utils.charsToString(J,Y,L).slice(3).split(`
- `)),Q};o.ast.callbacks.resources=B;const D=o.parse(a,"sign-in-with-ethereum",e);if(!D.success)throw new Error(`Invalid message: ${JSON.stringify(D)}`);const q={};o.ast.translate(q);for(const[j,J]of Object.entries(q))this[j]=J}}function _extends(){return _extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},_extends.apply(this,arguments)}var CAIP2={name:"chainId",regex:"[-:a-zA-Z0-9]{5,41}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP10={name:"accountId",regex:"[-:a-zA-Z0-9]{7,106}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,32}"},2:{name:"address",regex:"[a-zA-Z0-9]{1,64}"}}}},AssetName$1={name:"assetName",regex:"[-:a-zA-Z0-9]{5,73}",parameters:{delimiter:":",values:{0:{name:"namespace",regex:"[-a-z0-9]{3,8}"},1:{name:"reference",regex:"[-a-zA-Z0-9]{1,64}"}}}},CAIP19AssetType={name:"assetType",regex:"[-:a-zA-Z0-9]{11,115}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1}}},CAIP19AssetId={name:"assetId",regex:"[-:a-zA-Z0-9]{13,148}",parameters:{delimiter:"/",values:{0:CAIP2,1:AssetName$1,2:{name:"tokenId",regex:"[-a-zA-Z0-9]{1,32}"}}}},CAIP={2:CAIP2,10:CAIP10,19:{assetName:AssetName$1,assetType:CAIP19AssetType,assetId:CAIP19AssetId}};function splitParams(t,e){return t.split(e.parameters.delimiter)}function getParams(t,e){var n=splitParams(t,e),a={};return n.forEach(function(o,l){a[e.parameters.values[l].name]=o}),a}function joinParams(t,e){return Object.values(e.parameters.values).map(function(n){var a=t[n.name];return typeof a=="string"?a:joinParams(a,n)}).join(e.parameters.delimiter)}function isValidId(t,e){if(!new RegExp(e.regex).test(t))return!1;var n=splitParams(t,e);if(n.length!==Object.keys(e.parameters.values).length)return!1;var a=n.map(function(o,l){return new RegExp(e.parameters.values[l].regex).test(o)}).filter(function(o){return!!o});return a.length===n.length}var ChainId=function(){function t(n){typeof n=="string"&&(n=t.parse(n)),this.namespace=n.namespace,this.reference=n.reference}t.parse=function(a){if(!isValidId(a,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+a);return new t(getParams(a,this.spec)).toJSON()},t.format=function(a){return joinParams(a,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{namespace:this.namespace,reference:this.reference}},t}();ChainId.spec=CAIP[2];var AccountId=function(){function t(n){typeof n=="string"&&(n=t.parse(n)),this.chainId=new ChainId(n.chainId),this.address=n.address}t.parse=function(a){if(!isValidId(a,this.spec))throw new Error("Invalid "+this.spec.name+" provided: "+a);var o=getParams(a,this.spec),l=o.namespace,u=o.reference,d=o.address,m=new ChainId({namespace:l,reference:u});return new t({chainId:m,address:d}).toJSON()},t.format=function(a){var o=new ChainId(a.chainId),l=_extends({},o.toJSON(),{address:a.address});return joinParams(l,this.spec)};var e=t.prototype;return e.toString=function(){return t.format(this.toJSON())},e.toJSON=function(){return{chainId:this.chainId.toJSON(),address:this.address}},t}();AccountId.spec=CAIP[10];var ErrorTypes;(function(t){t.INVALID_SIGNATURE="Invalid signature.",t.EXPIRED_MESSAGE="Expired message.",t.MALFORMED_SESSION="Malformed session."})(ErrorTypes||(ErrorTypes={}));var SignatureType;(function(t){t.PERSONAL_SIGNATURE="Personal signature"})(SignatureType||(SignatureType={}));class SiwxMessage{static fromCacao(e){const n=AccountId.parse(e.p.iss.replace("did:pkh:","")),a=new this({domain:e.p.domain,address:n.address,uri:e.p.aud,version:e.p.version,chainId:new ChainId(n.chainId).reference});return e.p.statement&&(a.statement=e.p.statement),e.p.nonce&&(a.nonce=e.p.nonce),e.p.iat&&(a.issuedAt=e.p.iat),e.p.exp&&(a.expirationTime=e.p.exp),e.p.nbf&&(a.notBefore=e.p.nbf),e.p.requestId&&(a.requestId=e.p.requestId),e.p.resources&&(a.resources=e.p.resources),e.s&&(e.s.s&&(a.signature=e.s.s),e.s.t==="eip191"&&(a.type=SignatureType.PERSONAL_SIGNATURE)),a}toMessage(e){return asString(this,e)}constructor(e){if(this.statement=void 0,this.nonce=void 0,this.issuedAt=void 0,this.expirationTime=void 0,this.notBefore=void 0,this.requestId=void 0,this.resources=void 0,this.signature=void 0,typeof e=="string"){const n=new ParsedMessage(e);this.domain=n.domain,this.address=n.address,this.statement=n.statement,this.uri=n.uri,this.version=n.version,this.nonce=n.nonce,this.issuedAt=n.issuedAt,this.expirationTime=n.expirationTime,this.notBefore=n.notBefore,this.requestId=n.requestId,this.chainId=n.chainId,this.resources=n.resources}else Object.assign(this,e)}}function asLegacyChainIdString(t,e){const n=`${t.domain} wants you to sign in with your ${e} account:`,a=`URI: ${t.uri}`;let o=[n,t.address].join(`
`);const l=`Version: ${t.version}`;t.nonce||(t.nonce=(Math.random()+1).toString(36).substring(4));const u=`Nonce: ${t.nonce}`,d=[a,l,u];if(t.issuedAt&&Date.parse(t.issuedAt),t.issuedAt=t.issuedAt?t.issuedAt:new Date().toISOString(),d.push(`Issued At: ${t.issuedAt}`),t.expirationTime){const y=`Expiration Time: ${t.expirationTime}`;d.push(y)}t.notBefore&&d.push(`Not Before: ${t.notBefore}`),t.requestId&&d.push(`Request ID: ${t.requestId}`),t.chainId&&d.push(`Chain ID: ${t.chainId}`),t.resources&&d.push(["Resources:",...t.resources.map(y=>`- ${y}`)].join(`
`));const m=d.join(`
`);return t.statement&&(o=[o,t.statement].join(`

`)),[o,m].join(`

`)}function asString(t,e){const n=`${t.domain} wants you to sign in with your ${e} account:`,a=`URI: ${t.uri}`;let o=[n,t.address].join(`
`);const l=`Version: ${t.version}`;t.nonce||(t.nonce=(Math.random()+1).toString(36).substring(4));const u=`Nonce: ${t.nonce}`,d=`Chain ID: ${t.chainId}`,m=[a,l,d,u];if(t.issuedAt&&Date.parse(t.issuedAt),t.issuedAt=t.issuedAt?t.issuedAt:new Date().toISOString(),m.push(`Issued At: ${t.issuedAt}`),t.expirationTime){const b=`Expiration Time: ${t.expirationTime}`;m.push(b)}t.notBefore&&m.push(`Not Before: ${t.notBefore}`),t.requestId&&m.push(`Request ID: ${t.requestId}`),t.resources&&t.resources.length>=1&&m.push(["Resources:",...t.resources.map(b=>`- ${b}`)].join(`
`));const y=m.join(`
`);return t.statement&&(o=[o,t.statement].join(`

`)),[o,y].join(`

`)}class SiweMessage extends SiwxMessage{toMessage(){return super.toMessage("Ethereum")}signMessage(){let e;switch(this.type){case SignatureType.PERSONAL_SIGNATURE:{e=this.toMessage();break}default:{e=this.toMessage();break}}return e}}const CID_CBOR_TAG=42;function cidEncoder(t){if(t.asCID!==t)return null;const e=CID$1.asCID(t);if(!e)return null;const n=new Uint8Array(e.bytes.byteLength+1);return n.set(e.bytes,1),[new Token(Type.tag,CID_CBOR_TAG),new Token(Type.bytes,n)]}function undefinedEncoder(){throw new Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")}function numberEncoder(t){if(Number.isNaN(t))throw new Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(t===1/0||t===-1/0)throw new Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}const encodeOptions={float64:!0,typeEncoders:{Object:cidEncoder,undefined:undefinedEncoder,number:numberEncoder}};function cidDecoder(t){if(t[0]!==0)throw new Error("Invalid CID for CBOR tag 42; expected leading 0x00");return CID$1.decode(t.subarray(1))}const decodeOptions={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};decodeOptions.tags[CID_CBOR_TAG]=cidDecoder;const name="dag-cbor",code$2=113,encode$c=t=>encode$p(t,encodeOptions),decode$b=t=>decode$o(t,decodeOptions),dagCbor=Object.freeze(Object.defineProperty({__proto__:null,code:code$2,decode:decode$b,encode:encode$c,name},Symbol.toStringTag,{value:"Module"})),CLOCK_SKEW_DEFAULT_SEC=5*60;new Date("2022-09-20").valueOf();var Cacao;(function(t){function e(u){const d={h:{t:"eip4361"},p:{domain:u.domain,iat:u.issuedAt,iss:`did:pkh:eip155:${u.chainId}:${u.address}`,aud:u.uri,version:u.version,nonce:u.nonce}};return u.signature&&(d.s={t:"eip191",s:u.signature}),u.notBefore&&(d.p.nbf=u.notBefore),u.expirationTime&&(d.p.exp=u.expirationTime),u.statement&&(d.p.statement=u.statement),u.requestId&&(d.p.requestId=u.requestId),u.resources&&(d.p.resources=u.resources),d}t.fromSiweMessage=e;function n(u){const d={h:{t:"caip122"},p:{domain:u.domain,iat:u.issuedAt,iss:`did:pkh:solana:${u.chainId}:${u.address}`,aud:u.uri,version:u.version,nonce:u.nonce}};return u.signature&&(d.s={t:"solana:ed25519",s:u.signature}),u.notBefore&&(d.p.nbf=u.notBefore),u.expirationTime&&(d.p.exp=u.expirationTime),u.statement&&(d.p.statement=u.statement),u.requestId&&(d.p.requestId=u.requestId),u.resources&&(d.p.resources=u.resources),d}t.fromSiwsMessage=n;function a(u){const d={h:{t:"caip122"},p:{domain:u.domain,iat:u.issuedAt,iss:`did:pkh:tezos:${u.chainId}:${u.address}`,aud:u.uri,version:u.version,nonce:u.nonce}};return u.signature&&(d.s={t:"tezos:ed25519",s:u.signature}),u.notBefore&&(d.p.nbf=u.notBefore),u.expirationTime&&(d.p.exp=u.expirationTime),u.statement&&(d.p.statement=u.statement),u.requestId&&(d.p.requestId=u.requestId),u.resources&&(d.p.resources=u.resources),d}t.fromSiwTezosMessage=a;async function o(u){return(await decode$d({bytes:u,codec:dagCbor,hasher:sha256$3})).value}t.fromBlockBytes=o;async function l(u,d={}){assertSigned(u);const m=d.verifiers[u.s.t];if(!m)throw new Error("Unsupported CACAO signature type, register the needed verifier");return m(u,d)}t.verify=l})(Cacao||(Cacao={}));var CacaoBlock;(function(t){function e(n){return encode$e({value:n,codec:dagCbor,hasher:sha256$3})}t.fromCacao=e})(CacaoBlock||(CacaoBlock={}));function assertSigned(t){if(t.s===null||t.s===void 0)throw new Error("CACAO does not have a signature")}function verifyTimeChecks(t,e){const n=e.atTime?e.atTime.getTime():Date.now(),a=(e.clockSkewSecs??CLOCK_SKEW_DEFAULT_SEC)*1e3;if(Date.parse(t.p.iat)>n+a||Date.parse(t.p.nbf)>n+a)throw new Error("CACAO is not valid yet");const o=e.revocationPhaseOutSecs?e.revocationPhaseOutSecs*1e3:0;if(!e.disableExpirationCheck&&Date.parse(t.p.exp)+o+a<n)throw new Error("CACAO has expired")}const version$i="logger/5.7.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(t){return t.message}return null}const _normalizeError=_checkNormalize();var LogLevel;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(LogLevel||(LogLevel={}));var ErrorCode;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(ErrorCode||(ErrorCode={}));const HEX="0123456789abcdef";class Logger{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,n){const a=e.toLowerCase();LogLevels[a]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(_logLevel>LogLevels[a])&&console.log.apply(console,n)}debug(...e){this._log(Logger.levels.DEBUG,e)}info(...e){this._log(Logger.levels.INFO,e)}warn(...e){this._log(Logger.levels.WARNING,e)}makeError(e,n,a){if(_censorErrors)return this.makeError("censored error",n,{});n||(n=Logger.errors.UNKNOWN_ERROR),a||(a={});const o=[];Object.keys(a).forEach(m=>{const y=a[m];try{if(y instanceof Uint8Array){let b="";for(let _=0;_<y.length;_++)b+=HEX[y[_]>>4],b+=HEX[y[_]&15];o.push(m+"=Uint8Array(0x"+b+")")}else o.push(m+"="+JSON.stringify(y))}catch{o.push(m+"="+JSON.stringify(a[m].toString()))}}),o.push(`code=${n}`),o.push(`version=${this.version}`);const l=e;let u="";switch(n){case ErrorCode.NUMERIC_FAULT:{u="NUMERIC_FAULT";const m=e;switch(m){case"overflow":case"underflow":case"division-by-zero":u+="-"+m;break;case"negative-power":case"negative-width":u+="-unsupported";break;case"unbound-bitwise-result":u+="-unbound-result";break}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:u=n;break}u&&(e+=" [ See: https://links.ethers.org/v5-errors-"+u+" ]"),o.length&&(e+=" ("+o.join(", ")+")");const d=new Error(e);return d.reason=l,d.code=n,Object.keys(a).forEach(function(m){d[m]=a[m]}),d}throwError(e,n,a){throw this.makeError(e,n,a)}throwArgumentError(e,n,a){return this.throwError(e,Logger.errors.INVALID_ARGUMENT,{argument:n,value:a})}assert(e,n,a,o){e||this.throwError(n,a,o)}assertArgument(e,n,a,o){e||this.throwArgumentError(n,a,o)}checkNormalize(e){_normalizeError&&this.throwError("platform missing String.prototype.normalize",Logger.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(e,n){typeof e=="number"&&(n==null&&(n="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(n,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(n,Logger.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,n,a){a?a=": "+a:a="",e<n&&this.throwError("missing argument"+a,Logger.errors.MISSING_ARGUMENT,{count:e,expectedCount:n}),e>n&&this.throwError("too many arguments"+a,Logger.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:n})}checkNew(e,n){(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:n.name})}checkAbstract(e,n){e===n?this.throwError("cannot instantiate abstract class "+JSON.stringify(n.name)+" directly; use a sub-class",Logger.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",Logger.errors.MISSING_NEW,{name:n.name})}static globalLogger(){return _globalLogger||(_globalLogger=new Logger(version$i)),_globalLogger}static setCensorship(e,n){if(!e&&n&&this.globalLogger().throwError("cannot permanently disable censorship",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!e)return;this.globalLogger().throwError("error censorship permanent",Logger.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!e,_permanentCensorErrors=!!n}static setLogLevel(e){const n=LogLevels[e.toLowerCase()];if(n==null){Logger.globalLogger().warn("invalid log level - "+e);return}_logLevel=n}static from(e){return new Logger(e)}}Logger.errors=ErrorCode;Logger.levels=LogLevel;const version$h="bytes/5.7.0",logger$l=new Logger(version$h);function isHexable(t){return!!t.toHexString}function addSlice(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function isBytesLike(t){return isHexString(t)&&!(t.length%2)||isBytes(t)}function isInteger(t){return typeof t=="number"&&t==t&&t%1===0}function isBytes(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!isInteger(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const n=t[e];if(!isInteger(n)||n<0||n>=256)return!1}return!0}function arrayify(t,e){if(e||(e={}),typeof t=="number"){logger$l.checkSafeUint53(t,"invalid arrayify value");const n=[];for(;t;)n.unshift(t&255),t=parseInt(String(t/256));return n.length===0&&n.push(0),addSlice(new Uint8Array(n))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t)&&(t=t.toHexString()),isHexString(t)){let n=t.substring(2);n.length%2&&(e.hexPad==="left"?n="0"+n:e.hexPad==="right"?n+="0":logger$l.throwArgumentError("hex data is odd-length","value",t));const a=[];for(let o=0;o<n.length;o+=2)a.push(parseInt(n.substring(o,o+2),16));return addSlice(new Uint8Array(a))}return isBytes(t)?addSlice(new Uint8Array(t)):logger$l.throwArgumentError("invalid arrayify value","value",t)}function concat(t){const e=t.map(o=>arrayify(o)),n=e.reduce((o,l)=>o+l.length,0),a=new Uint8Array(n);return e.reduce((o,l)=>(a.set(l,o),o+l.length),0),addSlice(a)}function stripZeros(t){let e=arrayify(t);if(e.length===0)return e;let n=0;for(;n<e.length&&e[n]===0;)n++;return n&&(e=e.slice(n)),e}function zeroPad(t,e){t=arrayify(t),t.length>e&&logger$l.throwArgumentError("value out of range","value",arguments[0]);const n=new Uint8Array(e);return n.set(t,e-t.length),addSlice(n)}function isHexString(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const HexCharacters="0123456789abcdef";function hexlify(t,e){if(e||(e={}),typeof t=="number"){logger$l.checkSafeUint53(t,"invalid hexlify value");let n="";for(;t;)n=HexCharacters[t&15]+n,t=Math.floor(t/16);return n.length?(n.length%2&&(n="0"+n),"0x"+n):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),isHexable(t))return t.toHexString();if(isHexString(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":logger$l.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(isBytes(t)){let n="0x";for(let a=0;a<t.length;a++){let o=t[a];n+=HexCharacters[(o&240)>>4]+HexCharacters[o&15]}return n}return logger$l.throwArgumentError("invalid hexlify value","value",t)}function hexDataLength(t){if(typeof t!="string")t=hexlify(t);else if(!isHexString(t)||t.length%2)return null;return(t.length-2)/2}function hexDataSlice(t,e,n){return typeof t!="string"?t=hexlify(t):(!isHexString(t)||t.length%2)&&logger$l.throwArgumentError("invalid hexData","value",t),e=2+2*e,n!=null?"0x"+t.substring(e,2+2*n):"0x"+t.substring(e)}function hexConcat(t){let e="0x";return t.forEach(n=>{e+=hexlify(n).substring(2)}),e}function hexZeroPad(t,e){for(typeof t!="string"?t=hexlify(t):isHexString(t)||logger$l.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&logger$l.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function splitSignature(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(isBytesLike(t)){let n=arrayify(t);n.length===64?(e.v=27+(n[32]>>7),n[32]&=127,e.r=hexlify(n.slice(0,32)),e.s=hexlify(n.slice(32,64))):n.length===65?(e.r=hexlify(n.slice(0,32)),e.s=hexlify(n.slice(32,64)),e.v=n[64]):logger$l.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:logger$l.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(n[32]|=128),e._vs=hexlify(n.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const o=zeroPad(arrayify(e._vs),32);e._vs=hexlify(o);const l=o[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=l:e.recoveryParam!==l&&logger$l.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),o[0]&=127;const u=hexlify(o);e.s==null?e.s=u:e.s!==u&&logger$l.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?logger$l.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const o=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==o&&logger$l.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!isHexString(e.r)?logger$l.throwArgumentError("signature missing or invalid r","signature",t):e.r=hexZeroPad(e.r,32),e.s==null||!isHexString(e.s)?logger$l.throwArgumentError("signature missing or invalid s","signature",t):e.s=hexZeroPad(e.s,32);const n=arrayify(e.s);n[0]>=128&&logger$l.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(n[0]|=128);const a=hexlify(n);e._vs&&(isHexString(e._vs)||logger$l.throwArgumentError("signature invalid _vs","signature",t),e._vs=hexZeroPad(e._vs,32)),e._vs==null?e._vs=a:e._vs!==a&&logger$l.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}function joinSignature(t){return t=splitSignature(t),hexlify(concat([t.r,t.s,t.recoveryParam?"0x1c":"0x1b"]))}var bnExports$1={},bn$1={get exports(){return bnExports$1},set exports(t){bnExports$1=t}};(function(t){(function(e,n){function a(I,x){if(!I)throw new Error(x||"Assertion failed")}function o(I,x){I.super_=x;var T=function(){};T.prototype=x.prototype,I.prototype=new T,I.prototype.constructor=I}function l(I,x,T){if(l.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((x==="le"||x==="be")&&(T=x,x=10),this._init(I||0,x||10,T||"be"))}typeof e=="object"?e.exports=l:n.BN=l,l.BN=l,l.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=require$$0$2.Buffer}catch{}l.isBN=function(x){return x instanceof l?!0:x!==null&&typeof x=="object"&&x.constructor.wordSize===l.wordSize&&Array.isArray(x.words)},l.max=function(x,T){return x.cmp(T)>0?x:T},l.min=function(x,T){return x.cmp(T)<0?x:T},l.prototype._init=function(x,T,M){if(typeof x=="number")return this._initNumber(x,T,M);if(typeof x=="object")return this._initArray(x,T,M);T==="hex"&&(T=16),a(T===(T|0)&&T>=2&&T<=36),x=x.toString().replace(/\s+/g,"");var O=0;x[0]==="-"&&(O++,this.negative=1),O<x.length&&(T===16?this._parseHex(x,O,M):(this._parseBase(x,T,O),M==="le"&&this._initArray(this.toArray(),T,M)))},l.prototype._initNumber=function(x,T,M){x<0&&(this.negative=1,x=-x),x<67108864?(this.words=[x&67108863],this.length=1):x<4503599627370496?(this.words=[x&67108863,x/67108864&67108863],this.length=2):(a(x<9007199254740992),this.words=[x&67108863,x/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),T,M)},l.prototype._initArray=function(x,T,M){if(a(typeof x.length=="number"),x.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(x.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var z,X,H=0;if(M==="be")for(O=x.length-1,z=0;O>=0;O-=3)X=x[O]|x[O-1]<<8|x[O-2]<<16,this.words[z]|=X<<H&67108863,this.words[z+1]=X>>>26-H&67108863,H+=24,H>=26&&(H-=26,z++);else if(M==="le")for(O=0,z=0;O<x.length;O+=3)X=x[O]|x[O+1]<<8|x[O+2]<<16,this.words[z]|=X<<H&67108863,this.words[z+1]=X>>>26-H&67108863,H+=24,H>=26&&(H-=26,z++);return this._strip()};function d(I,x){var T=I.charCodeAt(x);if(T>=48&&T<=57)return T-48;if(T>=65&&T<=70)return T-55;if(T>=97&&T<=102)return T-87;a(!1,"Invalid character in "+I)}function m(I,x,T){var M=d(I,T);return T-1>=x&&(M|=d(I,T-1)<<4),M}l.prototype._parseHex=function(x,T,M){this.length=Math.ceil((x.length-T)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var z=0,X=0,H;if(M==="be")for(O=x.length-1;O>=T;O-=2)H=m(x,T,O)<<z,this.words[X]|=H&67108863,z>=18?(z-=18,X+=1,this.words[X]|=H>>>26):z+=8;else{var P=x.length-T;for(O=P%2===0?T+1:T;O<x.length;O+=2)H=m(x,T,O)<<z,this.words[X]|=H&67108863,z>=18?(z-=18,X+=1,this.words[X]|=H>>>26):z+=8}this._strip()};function y(I,x,T,M){for(var O=0,z=0,X=Math.min(I.length,T),H=x;H<X;H++){var P=I.charCodeAt(H)-48;O*=M,P>=49?z=P-49+10:P>=17?z=P-17+10:z=P,a(P>=0&&z<M,"Invalid character"),O+=z}return O}l.prototype._parseBase=function(x,T,M){this.words=[0],this.length=1;for(var O=0,z=1;z<=67108863;z*=T)O++;O--,z=z/T|0;for(var X=x.length-M,H=X%O,P=Math.min(X,X-H)+M,S=0,F=M;F<P;F+=O)S=y(x,F,F+O,T),this.imuln(z),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S);if(H!==0){var ue=1;for(S=y(x,F,x.length,T),F=0;F<H;F++)ue*=T;this.imuln(ue),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S)}this._strip()},l.prototype.copy=function(x){x.words=new Array(this.length);for(var T=0;T<this.length;T++)x.words[T]=this.words[T];x.length=this.length,x.negative=this.negative,x.red=this.red};function b(I,x){I.words=x.words,I.length=x.length,I.negative=x.negative,I.red=x.red}if(l.prototype._move=function(x){b(x,this)},l.prototype.clone=function(){var x=new l(null);return this.copy(x),x},l.prototype._expand=function(x){for(;this.length<x;)this.words[this.length++]=0;return this},l.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{l.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{l.prototype.inspect=_}else l.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(x,T){x=x||10,T=T|0||1;var M;if(x===16||x==="hex"){M="";for(var O=0,z=0,X=0;X<this.length;X++){var H=this.words[X],P=((H<<O|z)&16777215).toString(16);z=H>>>24-O&16777215,O+=2,O>=26&&(O-=26,X--),z!==0||X!==this.length-1?M=w[6-P.length]+P+M:M=P+M}for(z!==0&&(M=z.toString(16)+M);M.length%T!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(x===(x|0)&&x>=2&&x<=36){var S=E[x],F=A[x];M="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var ee=ue.modrn(F).toString(x);ue=ue.idivn(F),ue.isZero()?M=ee+M:M=w[S-ee.length]+ee+M}for(this.isZero()&&(M="0"+M);M.length%T!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}a(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var x=this.words[0];return this.length===2?x+=this.words[1]*67108864:this.length===3&&this.words[2]===1?x+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-x:x},l.prototype.toJSON=function(){return this.toString(16,2)},u&&(l.prototype.toBuffer=function(x,T){return this.toArrayLike(u,x,T)}),l.prototype.toArray=function(x,T){return this.toArrayLike(Array,x,T)};var C=function(x,T){return x.allocUnsafe?x.allocUnsafe(T):new x(T)};l.prototype.toArrayLike=function(x,T,M){this._strip();var O=this.byteLength(),z=M||Math.max(1,O);a(O<=z,"byte array longer than desired length"),a(z>0,"Requested array length <= 0");var X=C(x,z),H=T==="le"?"LE":"BE";return this["_toArrayLike"+H](X,O),X},l.prototype._toArrayLikeLE=function(x,T){for(var M=0,O=0,z=0,X=0;z<this.length;z++){var H=this.words[z]<<X|O;x[M++]=H&255,M<x.length&&(x[M++]=H>>8&255),M<x.length&&(x[M++]=H>>16&255),X===6?(M<x.length&&(x[M++]=H>>24&255),O=0,X=0):(O=H>>>24,X+=2)}if(M<x.length)for(x[M++]=O;M<x.length;)x[M++]=0},l.prototype._toArrayLikeBE=function(x,T){for(var M=x.length-1,O=0,z=0,X=0;z<this.length;z++){var H=this.words[z]<<X|O;x[M--]=H&255,M>=0&&(x[M--]=H>>8&255),M>=0&&(x[M--]=H>>16&255),X===6?(M>=0&&(x[M--]=H>>24&255),O=0,X=0):(O=H>>>24,X+=2)}if(M>=0)for(x[M--]=O;M>=0;)x[M--]=0},Math.clz32?l.prototype._countBits=function(x){return 32-Math.clz32(x)}:l.prototype._countBits=function(x){var T=x,M=0;return T>=4096&&(M+=13,T>>>=13),T>=64&&(M+=7,T>>>=7),T>=8&&(M+=4,T>>>=4),T>=2&&(M+=2,T>>>=2),M+T},l.prototype._zeroBits=function(x){if(x===0)return 26;var T=x,M=0;return T&8191||(M+=13,T>>>=13),T&127||(M+=7,T>>>=7),T&15||(M+=4,T>>>=4),T&3||(M+=2,T>>>=2),T&1||M++,M},l.prototype.bitLength=function(){var x=this.words[this.length-1],T=this._countBits(x);return(this.length-1)*26+T};function k(I){for(var x=new Array(I.bitLength()),T=0;T<x.length;T++){var M=T/26|0,O=T%26;x[T]=I.words[M]>>>O&1}return x}l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var x=0,T=0;T<this.length;T++){var M=this._zeroBits(this.words[T]);if(x+=M,M!==26)break}return x},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(x){return this.negative!==0?this.abs().inotn(x).iaddn(1):this.clone()},l.prototype.fromTwos=function(x){return this.testn(x-1)?this.notn(x).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(x){for(;this.length<x.length;)this.words[this.length++]=0;for(var T=0;T<x.length;T++)this.words[T]=this.words[T]|x.words[T];return this._strip()},l.prototype.ior=function(x){return a((this.negative|x.negative)===0),this.iuor(x)},l.prototype.or=function(x){return this.length>x.length?this.clone().ior(x):x.clone().ior(this)},l.prototype.uor=function(x){return this.length>x.length?this.clone().iuor(x):x.clone().iuor(this)},l.prototype.iuand=function(x){var T;this.length>x.length?T=x:T=this;for(var M=0;M<T.length;M++)this.words[M]=this.words[M]&x.words[M];return this.length=T.length,this._strip()},l.prototype.iand=function(x){return a((this.negative|x.negative)===0),this.iuand(x)},l.prototype.and=function(x){return this.length>x.length?this.clone().iand(x):x.clone().iand(this)},l.prototype.uand=function(x){return this.length>x.length?this.clone().iuand(x):x.clone().iuand(this)},l.prototype.iuxor=function(x){var T,M;this.length>x.length?(T=this,M=x):(T=x,M=this);for(var O=0;O<M.length;O++)this.words[O]=T.words[O]^M.words[O];if(this!==T)for(;O<T.length;O++)this.words[O]=T.words[O];return this.length=T.length,this._strip()},l.prototype.ixor=function(x){return a((this.negative|x.negative)===0),this.iuxor(x)},l.prototype.xor=function(x){return this.length>x.length?this.clone().ixor(x):x.clone().ixor(this)},l.prototype.uxor=function(x){return this.length>x.length?this.clone().iuxor(x):x.clone().iuxor(this)},l.prototype.inotn=function(x){a(typeof x=="number"&&x>=0);var T=Math.ceil(x/26)|0,M=x%26;this._expand(T),M>0&&T--;for(var O=0;O<T;O++)this.words[O]=~this.words[O]&67108863;return M>0&&(this.words[O]=~this.words[O]&67108863>>26-M),this._strip()},l.prototype.notn=function(x){return this.clone().inotn(x)},l.prototype.setn=function(x,T){a(typeof x=="number"&&x>=0);var M=x/26|0,O=x%26;return this._expand(M+1),T?this.words[M]=this.words[M]|1<<O:this.words[M]=this.words[M]&~(1<<O),this._strip()},l.prototype.iadd=function(x){var T;if(this.negative!==0&&x.negative===0)return this.negative=0,T=this.isub(x),this.negative^=1,this._normSign();if(this.negative===0&&x.negative!==0)return x.negative=0,T=this.isub(x),x.negative=1,T._normSign();var M,O;this.length>x.length?(M=this,O=x):(M=x,O=this);for(var z=0,X=0;X<O.length;X++)T=(M.words[X]|0)+(O.words[X]|0)+z,this.words[X]=T&67108863,z=T>>>26;for(;z!==0&&X<M.length;X++)T=(M.words[X]|0)+z,this.words[X]=T&67108863,z=T>>>26;if(this.length=M.length,z!==0)this.words[this.length]=z,this.length++;else if(M!==this)for(;X<M.length;X++)this.words[X]=M.words[X];return this},l.prototype.add=function(x){var T;return x.negative!==0&&this.negative===0?(x.negative=0,T=this.sub(x),x.negative^=1,T):x.negative===0&&this.negative!==0?(this.negative=0,T=x.sub(this),this.negative=1,T):this.length>x.length?this.clone().iadd(x):x.clone().iadd(this)},l.prototype.isub=function(x){if(x.negative!==0){x.negative=0;var T=this.iadd(x);return x.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(x),this.negative=1,this._normSign();var M=this.cmp(x);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,z;M>0?(O=this,z=x):(O=x,z=this);for(var X=0,H=0;H<z.length;H++)T=(O.words[H]|0)-(z.words[H]|0)+X,X=T>>26,this.words[H]=T&67108863;for(;X!==0&&H<O.length;H++)T=(O.words[H]|0)+X,X=T>>26,this.words[H]=T&67108863;if(X===0&&H<O.length&&O!==this)for(;H<O.length;H++)this.words[H]=O.words[H];return this.length=Math.max(this.length,H),O!==this&&(this.negative=1),this._strip()},l.prototype.sub=function(x){return this.clone().isub(x)};function B(I,x,T){T.negative=x.negative^I.negative;var M=I.length+x.length|0;T.length=M,M=M-1|0;var O=I.words[0]|0,z=x.words[0]|0,X=O*z,H=X&67108863,P=X/67108864|0;T.words[0]=H;for(var S=1;S<M;S++){for(var F=P>>>26,ue=P&67108863,ee=Math.min(S,x.length-1),fe=Math.max(0,S-I.length+1);fe<=ee;fe++){var le=S-fe|0;O=I.words[le]|0,z=x.words[fe]|0,X=O*z+ue,F+=X/67108864|0,ue=X&67108863}T.words[S]=ue|0,P=F|0}return P!==0?T.words[S]=P|0:T.length--,T._strip()}var D=function(x,T,M){var O=x.words,z=T.words,X=M.words,H=0,P,S,F,ue=O[0]|0,ee=ue&8191,fe=ue>>>13,le=O[1]|0,ce=le&8191,pe=le>>>13,se=O[2]|0,de=se&8191,re=se>>>13,me=O[3]|0,te=me&8191,ve=me>>>13,Se=O[4]|0,be=Se&8191,_e=Se>>>13,ye=O[5]|0,$e=ye&8191,Ie=ye>>>13,Be=O[6]|0,Me=Be&8191,Fe=Be>>>13,Ve=O[7]|0,Oe=Ve&8191,ge=Ve>>>13,ie=O[8]|0,he=ie&8191,we=ie>>>13,Re=O[9]|0,De=Re&8191,Le=Re>>>13,tt=z[0]|0,We=tt&8191,Ge=tt>>>13,_t=z[1]|0,rt=_t&8191,ot=_t>>>13,Rt=z[2]|0,xt=Rt&8191,ht=Rt>>>13,Tt=z[3]|0,dt=Tt&8191,it=Tt>>>13,Ct=z[4]|0,pt=Ct&8191,at=Ct>>>13,kt=z[5]|0,mt=kt&8191,nt=kt>>>13,Bt=z[6]|0,Ee=Bt&8191,ke=Bt>>>13,Pe=z[7]|0,ne=Pe&8191,xe=Pe>>>13,Te=z[8]|0,Ae=Te&8191,Ce=Te>>>13,Ne=z[9]|0,Ue=Ne&8191,je=Ne>>>13;M.negative=x.negative^T.negative,M.length=19,P=Math.imul(ee,We),S=Math.imul(ee,Ge),S=S+Math.imul(fe,We)|0,F=Math.imul(fe,Ge);var Ke=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,P=Math.imul(ce,We),S=Math.imul(ce,Ge),S=S+Math.imul(pe,We)|0,F=Math.imul(pe,Ge),P=P+Math.imul(ee,rt)|0,S=S+Math.imul(ee,ot)|0,S=S+Math.imul(fe,rt)|0,F=F+Math.imul(fe,ot)|0;var He=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(He>>>26)|0,He&=67108863,P=Math.imul(de,We),S=Math.imul(de,Ge),S=S+Math.imul(re,We)|0,F=Math.imul(re,Ge),P=P+Math.imul(ce,rt)|0,S=S+Math.imul(ce,ot)|0,S=S+Math.imul(pe,rt)|0,F=F+Math.imul(pe,ot)|0,P=P+Math.imul(ee,xt)|0,S=S+Math.imul(ee,ht)|0,S=S+Math.imul(fe,xt)|0,F=F+Math.imul(fe,ht)|0;var ze=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(ze>>>26)|0,ze&=67108863,P=Math.imul(te,We),S=Math.imul(te,Ge),S=S+Math.imul(ve,We)|0,F=Math.imul(ve,Ge),P=P+Math.imul(de,rt)|0,S=S+Math.imul(de,ot)|0,S=S+Math.imul(re,rt)|0,F=F+Math.imul(re,ot)|0,P=P+Math.imul(ce,xt)|0,S=S+Math.imul(ce,ht)|0,S=S+Math.imul(pe,xt)|0,F=F+Math.imul(pe,ht)|0,P=P+Math.imul(ee,dt)|0,S=S+Math.imul(ee,it)|0,S=S+Math.imul(fe,dt)|0,F=F+Math.imul(fe,it)|0;var Ye=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,P=Math.imul(be,We),S=Math.imul(be,Ge),S=S+Math.imul(_e,We)|0,F=Math.imul(_e,Ge),P=P+Math.imul(te,rt)|0,S=S+Math.imul(te,ot)|0,S=S+Math.imul(ve,rt)|0,F=F+Math.imul(ve,ot)|0,P=P+Math.imul(de,xt)|0,S=S+Math.imul(de,ht)|0,S=S+Math.imul(re,xt)|0,F=F+Math.imul(re,ht)|0,P=P+Math.imul(ce,dt)|0,S=S+Math.imul(ce,it)|0,S=S+Math.imul(pe,dt)|0,F=F+Math.imul(pe,it)|0,P=P+Math.imul(ee,pt)|0,S=S+Math.imul(ee,at)|0,S=S+Math.imul(fe,pt)|0,F=F+Math.imul(fe,at)|0;var Qe=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,P=Math.imul($e,We),S=Math.imul($e,Ge),S=S+Math.imul(Ie,We)|0,F=Math.imul(Ie,Ge),P=P+Math.imul(be,rt)|0,S=S+Math.imul(be,ot)|0,S=S+Math.imul(_e,rt)|0,F=F+Math.imul(_e,ot)|0,P=P+Math.imul(te,xt)|0,S=S+Math.imul(te,ht)|0,S=S+Math.imul(ve,xt)|0,F=F+Math.imul(ve,ht)|0,P=P+Math.imul(de,dt)|0,S=S+Math.imul(de,it)|0,S=S+Math.imul(re,dt)|0,F=F+Math.imul(re,it)|0,P=P+Math.imul(ce,pt)|0,S=S+Math.imul(ce,at)|0,S=S+Math.imul(pe,pt)|0,F=F+Math.imul(pe,at)|0,P=P+Math.imul(ee,mt)|0,S=S+Math.imul(ee,nt)|0,S=S+Math.imul(fe,mt)|0,F=F+Math.imul(fe,nt)|0;var st=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(st>>>26)|0,st&=67108863,P=Math.imul(Me,We),S=Math.imul(Me,Ge),S=S+Math.imul(Fe,We)|0,F=Math.imul(Fe,Ge),P=P+Math.imul($e,rt)|0,S=S+Math.imul($e,ot)|0,S=S+Math.imul(Ie,rt)|0,F=F+Math.imul(Ie,ot)|0,P=P+Math.imul(be,xt)|0,S=S+Math.imul(be,ht)|0,S=S+Math.imul(_e,xt)|0,F=F+Math.imul(_e,ht)|0,P=P+Math.imul(te,dt)|0,S=S+Math.imul(te,it)|0,S=S+Math.imul(ve,dt)|0,F=F+Math.imul(ve,it)|0,P=P+Math.imul(de,pt)|0,S=S+Math.imul(de,at)|0,S=S+Math.imul(re,pt)|0,F=F+Math.imul(re,at)|0,P=P+Math.imul(ce,mt)|0,S=S+Math.imul(ce,nt)|0,S=S+Math.imul(pe,mt)|0,F=F+Math.imul(pe,nt)|0,P=P+Math.imul(ee,Ee)|0,S=S+Math.imul(ee,ke)|0,S=S+Math.imul(fe,Ee)|0,F=F+Math.imul(fe,ke)|0;var Ze=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,P=Math.imul(Oe,We),S=Math.imul(Oe,Ge),S=S+Math.imul(ge,We)|0,F=Math.imul(ge,Ge),P=P+Math.imul(Me,rt)|0,S=S+Math.imul(Me,ot)|0,S=S+Math.imul(Fe,rt)|0,F=F+Math.imul(Fe,ot)|0,P=P+Math.imul($e,xt)|0,S=S+Math.imul($e,ht)|0,S=S+Math.imul(Ie,xt)|0,F=F+Math.imul(Ie,ht)|0,P=P+Math.imul(be,dt)|0,S=S+Math.imul(be,it)|0,S=S+Math.imul(_e,dt)|0,F=F+Math.imul(_e,it)|0,P=P+Math.imul(te,pt)|0,S=S+Math.imul(te,at)|0,S=S+Math.imul(ve,pt)|0,F=F+Math.imul(ve,at)|0,P=P+Math.imul(de,mt)|0,S=S+Math.imul(de,nt)|0,S=S+Math.imul(re,mt)|0,F=F+Math.imul(re,nt)|0,P=P+Math.imul(ce,Ee)|0,S=S+Math.imul(ce,ke)|0,S=S+Math.imul(pe,Ee)|0,F=F+Math.imul(pe,ke)|0,P=P+Math.imul(ee,ne)|0,S=S+Math.imul(ee,xe)|0,S=S+Math.imul(fe,ne)|0,F=F+Math.imul(fe,xe)|0;var et=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(et>>>26)|0,et&=67108863,P=Math.imul(he,We),S=Math.imul(he,Ge),S=S+Math.imul(we,We)|0,F=Math.imul(we,Ge),P=P+Math.imul(Oe,rt)|0,S=S+Math.imul(Oe,ot)|0,S=S+Math.imul(ge,rt)|0,F=F+Math.imul(ge,ot)|0,P=P+Math.imul(Me,xt)|0,S=S+Math.imul(Me,ht)|0,S=S+Math.imul(Fe,xt)|0,F=F+Math.imul(Fe,ht)|0,P=P+Math.imul($e,dt)|0,S=S+Math.imul($e,it)|0,S=S+Math.imul(Ie,dt)|0,F=F+Math.imul(Ie,it)|0,P=P+Math.imul(be,pt)|0,S=S+Math.imul(be,at)|0,S=S+Math.imul(_e,pt)|0,F=F+Math.imul(_e,at)|0,P=P+Math.imul(te,mt)|0,S=S+Math.imul(te,nt)|0,S=S+Math.imul(ve,mt)|0,F=F+Math.imul(ve,nt)|0,P=P+Math.imul(de,Ee)|0,S=S+Math.imul(de,ke)|0,S=S+Math.imul(re,Ee)|0,F=F+Math.imul(re,ke)|0,P=P+Math.imul(ce,ne)|0,S=S+Math.imul(ce,xe)|0,S=S+Math.imul(pe,ne)|0,F=F+Math.imul(pe,xe)|0,P=P+Math.imul(ee,Ae)|0,S=S+Math.imul(ee,Ce)|0,S=S+Math.imul(fe,Ae)|0,F=F+Math.imul(fe,Ce)|0;var vt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(vt>>>26)|0,vt&=67108863,P=Math.imul(De,We),S=Math.imul(De,Ge),S=S+Math.imul(Le,We)|0,F=Math.imul(Le,Ge),P=P+Math.imul(he,rt)|0,S=S+Math.imul(he,ot)|0,S=S+Math.imul(we,rt)|0,F=F+Math.imul(we,ot)|0,P=P+Math.imul(Oe,xt)|0,S=S+Math.imul(Oe,ht)|0,S=S+Math.imul(ge,xt)|0,F=F+Math.imul(ge,ht)|0,P=P+Math.imul(Me,dt)|0,S=S+Math.imul(Me,it)|0,S=S+Math.imul(Fe,dt)|0,F=F+Math.imul(Fe,it)|0,P=P+Math.imul($e,pt)|0,S=S+Math.imul($e,at)|0,S=S+Math.imul(Ie,pt)|0,F=F+Math.imul(Ie,at)|0,P=P+Math.imul(be,mt)|0,S=S+Math.imul(be,nt)|0,S=S+Math.imul(_e,mt)|0,F=F+Math.imul(_e,nt)|0,P=P+Math.imul(te,Ee)|0,S=S+Math.imul(te,ke)|0,S=S+Math.imul(ve,Ee)|0,F=F+Math.imul(ve,ke)|0,P=P+Math.imul(de,ne)|0,S=S+Math.imul(de,xe)|0,S=S+Math.imul(re,ne)|0,F=F+Math.imul(re,xe)|0,P=P+Math.imul(ce,Ae)|0,S=S+Math.imul(ce,Ce)|0,S=S+Math.imul(pe,Ae)|0,F=F+Math.imul(pe,Ce)|0,P=P+Math.imul(ee,Ue)|0,S=S+Math.imul(ee,je)|0,S=S+Math.imul(fe,Ue)|0,F=F+Math.imul(fe,je)|0;var yt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(yt>>>26)|0,yt&=67108863,P=Math.imul(De,rt),S=Math.imul(De,ot),S=S+Math.imul(Le,rt)|0,F=Math.imul(Le,ot),P=P+Math.imul(he,xt)|0,S=S+Math.imul(he,ht)|0,S=S+Math.imul(we,xt)|0,F=F+Math.imul(we,ht)|0,P=P+Math.imul(Oe,dt)|0,S=S+Math.imul(Oe,it)|0,S=S+Math.imul(ge,dt)|0,F=F+Math.imul(ge,it)|0,P=P+Math.imul(Me,pt)|0,S=S+Math.imul(Me,at)|0,S=S+Math.imul(Fe,pt)|0,F=F+Math.imul(Fe,at)|0,P=P+Math.imul($e,mt)|0,S=S+Math.imul($e,nt)|0,S=S+Math.imul(Ie,mt)|0,F=F+Math.imul(Ie,nt)|0,P=P+Math.imul(be,Ee)|0,S=S+Math.imul(be,ke)|0,S=S+Math.imul(_e,Ee)|0,F=F+Math.imul(_e,ke)|0,P=P+Math.imul(te,ne)|0,S=S+Math.imul(te,xe)|0,S=S+Math.imul(ve,ne)|0,F=F+Math.imul(ve,xe)|0,P=P+Math.imul(de,Ae)|0,S=S+Math.imul(de,Ce)|0,S=S+Math.imul(re,Ae)|0,F=F+Math.imul(re,Ce)|0,P=P+Math.imul(ce,Ue)|0,S=S+Math.imul(ce,je)|0,S=S+Math.imul(pe,Ue)|0,F=F+Math.imul(pe,je)|0;var wt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(wt>>>26)|0,wt&=67108863,P=Math.imul(De,xt),S=Math.imul(De,ht),S=S+Math.imul(Le,xt)|0,F=Math.imul(Le,ht),P=P+Math.imul(he,dt)|0,S=S+Math.imul(he,it)|0,S=S+Math.imul(we,dt)|0,F=F+Math.imul(we,it)|0,P=P+Math.imul(Oe,pt)|0,S=S+Math.imul(Oe,at)|0,S=S+Math.imul(ge,pt)|0,F=F+Math.imul(ge,at)|0,P=P+Math.imul(Me,mt)|0,S=S+Math.imul(Me,nt)|0,S=S+Math.imul(Fe,mt)|0,F=F+Math.imul(Fe,nt)|0,P=P+Math.imul($e,Ee)|0,S=S+Math.imul($e,ke)|0,S=S+Math.imul(Ie,Ee)|0,F=F+Math.imul(Ie,ke)|0,P=P+Math.imul(be,ne)|0,S=S+Math.imul(be,xe)|0,S=S+Math.imul(_e,ne)|0,F=F+Math.imul(_e,xe)|0,P=P+Math.imul(te,Ae)|0,S=S+Math.imul(te,Ce)|0,S=S+Math.imul(ve,Ae)|0,F=F+Math.imul(ve,Ce)|0,P=P+Math.imul(de,Ue)|0,S=S+Math.imul(de,je)|0,S=S+Math.imul(re,Ue)|0,F=F+Math.imul(re,je)|0;var bt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(bt>>>26)|0,bt&=67108863,P=Math.imul(De,dt),S=Math.imul(De,it),S=S+Math.imul(Le,dt)|0,F=Math.imul(Le,it),P=P+Math.imul(he,pt)|0,S=S+Math.imul(he,at)|0,S=S+Math.imul(we,pt)|0,F=F+Math.imul(we,at)|0,P=P+Math.imul(Oe,mt)|0,S=S+Math.imul(Oe,nt)|0,S=S+Math.imul(ge,mt)|0,F=F+Math.imul(ge,nt)|0,P=P+Math.imul(Me,Ee)|0,S=S+Math.imul(Me,ke)|0,S=S+Math.imul(Fe,Ee)|0,F=F+Math.imul(Fe,ke)|0,P=P+Math.imul($e,ne)|0,S=S+Math.imul($e,xe)|0,S=S+Math.imul(Ie,ne)|0,F=F+Math.imul(Ie,xe)|0,P=P+Math.imul(be,Ae)|0,S=S+Math.imul(be,Ce)|0,S=S+Math.imul(_e,Ae)|0,F=F+Math.imul(_e,Ce)|0,P=P+Math.imul(te,Ue)|0,S=S+Math.imul(te,je)|0,S=S+Math.imul(ve,Ue)|0,F=F+Math.imul(ve,je)|0;var $t=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+($t>>>26)|0,$t&=67108863,P=Math.imul(De,pt),S=Math.imul(De,at),S=S+Math.imul(Le,pt)|0,F=Math.imul(Le,at),P=P+Math.imul(he,mt)|0,S=S+Math.imul(he,nt)|0,S=S+Math.imul(we,mt)|0,F=F+Math.imul(we,nt)|0,P=P+Math.imul(Oe,Ee)|0,S=S+Math.imul(Oe,ke)|0,S=S+Math.imul(ge,Ee)|0,F=F+Math.imul(ge,ke)|0,P=P+Math.imul(Me,ne)|0,S=S+Math.imul(Me,xe)|0,S=S+Math.imul(Fe,ne)|0,F=F+Math.imul(Fe,xe)|0,P=P+Math.imul($e,Ae)|0,S=S+Math.imul($e,Ce)|0,S=S+Math.imul(Ie,Ae)|0,F=F+Math.imul(Ie,Ce)|0,P=P+Math.imul(be,Ue)|0,S=S+Math.imul(be,je)|0,S=S+Math.imul(_e,Ue)|0,F=F+Math.imul(_e,je)|0;var At=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(At>>>26)|0,At&=67108863,P=Math.imul(De,mt),S=Math.imul(De,nt),S=S+Math.imul(Le,mt)|0,F=Math.imul(Le,nt),P=P+Math.imul(he,Ee)|0,S=S+Math.imul(he,ke)|0,S=S+Math.imul(we,Ee)|0,F=F+Math.imul(we,ke)|0,P=P+Math.imul(Oe,ne)|0,S=S+Math.imul(Oe,xe)|0,S=S+Math.imul(ge,ne)|0,F=F+Math.imul(ge,xe)|0,P=P+Math.imul(Me,Ae)|0,S=S+Math.imul(Me,Ce)|0,S=S+Math.imul(Fe,Ae)|0,F=F+Math.imul(Fe,Ce)|0,P=P+Math.imul($e,Ue)|0,S=S+Math.imul($e,je)|0,S=S+Math.imul(Ie,Ue)|0,F=F+Math.imul(Ie,je)|0;var Et=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Et>>>26)|0,Et&=67108863,P=Math.imul(De,Ee),S=Math.imul(De,ke),S=S+Math.imul(Le,Ee)|0,F=Math.imul(Le,ke),P=P+Math.imul(he,ne)|0,S=S+Math.imul(he,xe)|0,S=S+Math.imul(we,ne)|0,F=F+Math.imul(we,xe)|0,P=P+Math.imul(Oe,Ae)|0,S=S+Math.imul(Oe,Ce)|0,S=S+Math.imul(ge,Ae)|0,F=F+Math.imul(ge,Ce)|0,P=P+Math.imul(Me,Ue)|0,S=S+Math.imul(Me,je)|0,S=S+Math.imul(Fe,Ue)|0,F=F+Math.imul(Fe,je)|0;var Xe=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,P=Math.imul(De,ne),S=Math.imul(De,xe),S=S+Math.imul(Le,ne)|0,F=Math.imul(Le,xe),P=P+Math.imul(he,Ae)|0,S=S+Math.imul(he,Ce)|0,S=S+Math.imul(we,Ae)|0,F=F+Math.imul(we,Ce)|0,P=P+Math.imul(Oe,Ue)|0,S=S+Math.imul(Oe,je)|0,S=S+Math.imul(ge,Ue)|0,F=F+Math.imul(ge,je)|0;var Je=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Je>>>26)|0,Je&=67108863,P=Math.imul(De,Ae),S=Math.imul(De,Ce),S=S+Math.imul(Le,Ae)|0,F=Math.imul(Le,Ce),P=P+Math.imul(he,Ue)|0,S=S+Math.imul(he,je)|0,S=S+Math.imul(we,Ue)|0,F=F+Math.imul(we,je)|0;var lt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(lt>>>26)|0,lt&=67108863,P=Math.imul(De,Ue),S=Math.imul(De,je),S=S+Math.imul(Le,Ue)|0,F=Math.imul(Le,je);var ct=(H+P|0)+((S&8191)<<13)|0;return H=(F+(S>>>13)|0)+(ct>>>26)|0,ct&=67108863,X[0]=Ke,X[1]=He,X[2]=ze,X[3]=Ye,X[4]=Qe,X[5]=st,X[6]=Ze,X[7]=et,X[8]=vt,X[9]=yt,X[10]=wt,X[11]=bt,X[12]=$t,X[13]=At,X[14]=Et,X[15]=Xe,X[16]=Je,X[17]=lt,X[18]=ct,H!==0&&(X[19]=H,M.length++),M};Math.imul||(D=B);function q(I,x,T){T.negative=x.negative^I.negative,T.length=I.length+x.length;for(var M=0,O=0,z=0;z<T.length-1;z++){var X=O;O=0;for(var H=M&67108863,P=Math.min(z,x.length-1),S=Math.max(0,z-I.length+1);S<=P;S++){var F=z-S,ue=I.words[F]|0,ee=x.words[S]|0,fe=ue*ee,le=fe&67108863;X=X+(fe/67108864|0)|0,le=le+H|0,H=le&67108863,X=X+(le>>>26)|0,O+=X>>>26,X&=67108863}T.words[z]=H,M=X,X=O}return M!==0?T.words[z]=M:T.length--,T._strip()}function j(I,x,T){return q(I,x,T)}l.prototype.mulTo=function(x,T){var M,O=this.length+x.length;return this.length===10&&x.length===10?M=D(this,x,T):O<63?M=B(this,x,T):O<1024?M=q(this,x,T):M=j(this,x,T),M},l.prototype.mul=function(x){var T=new l(null);return T.words=new Array(this.length+x.length),this.mulTo(x,T)},l.prototype.mulf=function(x){var T=new l(null);return T.words=new Array(this.length+x.length),j(this,x,T)},l.prototype.imul=function(x){return this.clone().mulTo(x,this)},l.prototype.imuln=function(x){var T=x<0;T&&(x=-x),a(typeof x=="number"),a(x<67108864);for(var M=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*x,X=(z&67108863)+(M&67108863);M>>=26,M+=z/67108864|0,M+=X>>>26,this.words[O]=X&67108863}return M!==0&&(this.words[O]=M,this.length++),T?this.ineg():this},l.prototype.muln=function(x){return this.clone().imuln(x)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(x){var T=k(x);if(T.length===0)return new l(1);for(var M=this,O=0;O<T.length&&T[O]===0;O++,M=M.sqr());if(++O<T.length)for(var z=M.sqr();O<T.length;O++,z=z.sqr())T[O]!==0&&(M=M.mul(z));return M},l.prototype.iushln=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26,O=67108863>>>26-T<<26-T,z;if(T!==0){var X=0;for(z=0;z<this.length;z++){var H=this.words[z]&O,P=(this.words[z]|0)-H<<T;this.words[z]=P|X,X=H>>>26-T}X&&(this.words[z]=X,this.length++)}if(M!==0){for(z=this.length-1;z>=0;z--)this.words[z+M]=this.words[z];for(z=0;z<M;z++)this.words[z]=0;this.length+=M}return this._strip()},l.prototype.ishln=function(x){return a(this.negative===0),this.iushln(x)},l.prototype.iushrn=function(x,T,M){a(typeof x=="number"&&x>=0);var O;T?O=(T-T%26)/26:O=0;var z=x%26,X=Math.min((x-z)/26,this.length),H=67108863^67108863>>>z<<z,P=M;if(O-=X,O=Math.max(0,O),P){for(var S=0;S<X;S++)P.words[S]=this.words[S];P.length=X}if(X!==0)if(this.length>X)for(this.length-=X,S=0;S<this.length;S++)this.words[S]=this.words[S+X];else this.words[0]=0,this.length=1;var F=0;for(S=this.length-1;S>=0&&(F!==0||S>=O);S--){var ue=this.words[S]|0;this.words[S]=F<<26-z|ue>>>z,F=ue&H}return P&&F!==0&&(P.words[P.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},l.prototype.ishrn=function(x,T,M){return a(this.negative===0),this.iushrn(x,T,M)},l.prototype.shln=function(x){return this.clone().ishln(x)},l.prototype.ushln=function(x){return this.clone().iushln(x)},l.prototype.shrn=function(x){return this.clone().ishrn(x)},l.prototype.ushrn=function(x){return this.clone().iushrn(x)},l.prototype.testn=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26,O=1<<T;if(this.length<=M)return!1;var z=this.words[M];return!!(z&O)},l.prototype.imaskn=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(T!==0&&M++,this.length=Math.min(M,this.length),T!==0){var O=67108863^67108863>>>T<<T;this.words[this.length-1]&=O}return this._strip()},l.prototype.maskn=function(x){return this.clone().imaskn(x)},l.prototype.iaddn=function(x){return a(typeof x=="number"),a(x<67108864),x<0?this.isubn(-x):this.negative!==0?this.length===1&&(this.words[0]|0)<=x?(this.words[0]=x-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(x),this.negative=1,this):this._iaddn(x)},l.prototype._iaddn=function(x){this.words[0]+=x;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},l.prototype.isubn=function(x){if(a(typeof x=="number"),a(x<67108864),x<0)return this.iaddn(-x);if(this.negative!==0)return this.negative=0,this.iaddn(x),this.negative=1,this;if(this.words[0]-=x,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this._strip()},l.prototype.addn=function(x){return this.clone().iaddn(x)},l.prototype.subn=function(x){return this.clone().isubn(x)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(x,T,M){var O=x.length+M,z;this._expand(O);var X,H=0;for(z=0;z<x.length;z++){X=(this.words[z+M]|0)+H;var P=(x.words[z]|0)*T;X-=P&67108863,H=(X>>26)-(P/67108864|0),this.words[z+M]=X&67108863}for(;z<this.length-M;z++)X=(this.words[z+M]|0)+H,H=X>>26,this.words[z+M]=X&67108863;if(H===0)return this._strip();for(a(H===-1),H=0,z=0;z<this.length;z++)X=-(this.words[z]|0)+H,H=X>>26,this.words[z]=X&67108863;return this.negative=1,this._strip()},l.prototype._wordDiv=function(x,T){var M=this.length-x.length,O=this.clone(),z=x,X=z.words[z.length-1]|0,H=this._countBits(X);M=26-H,M!==0&&(z=z.ushln(M),O.iushln(M),X=z.words[z.length-1]|0);var P=O.length-z.length,S;if(T!=="mod"){S=new l(null),S.length=P+1,S.words=new Array(S.length);for(var F=0;F<S.length;F++)S.words[F]=0}var ue=O.clone()._ishlnsubmul(z,1,P);ue.negative===0&&(O=ue,S&&(S.words[P]=1));for(var ee=P-1;ee>=0;ee--){var fe=(O.words[z.length+ee]|0)*67108864+(O.words[z.length+ee-1]|0);for(fe=Math.min(fe/X|0,67108863),O._ishlnsubmul(z,fe,ee);O.negative!==0;)fe--,O.negative=0,O._ishlnsubmul(z,1,ee),O.isZero()||(O.negative^=1);S&&(S.words[ee]=fe)}return S&&S._strip(),O._strip(),T!=="div"&&M!==0&&O.iushrn(M),{div:S||null,mod:O}},l.prototype.divmod=function(x,T,M){if(a(!x.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var O,z,X;return this.negative!==0&&x.negative===0?(X=this.neg().divmod(x,T),T!=="mod"&&(O=X.div.neg()),T!=="div"&&(z=X.mod.neg(),M&&z.negative!==0&&z.iadd(x)),{div:O,mod:z}):this.negative===0&&x.negative!==0?(X=this.divmod(x.neg(),T),T!=="mod"&&(O=X.div.neg()),{div:O,mod:X.mod}):this.negative&x.negative?(X=this.neg().divmod(x.neg(),T),T!=="div"&&(z=X.mod.neg(),M&&z.negative!==0&&z.isub(x)),{div:X.div,mod:z}):x.length>this.length||this.cmp(x)<0?{div:new l(0),mod:this}:x.length===1?T==="div"?{div:this.divn(x.words[0]),mod:null}:T==="mod"?{div:null,mod:new l(this.modrn(x.words[0]))}:{div:this.divn(x.words[0]),mod:new l(this.modrn(x.words[0]))}:this._wordDiv(x,T)},l.prototype.div=function(x){return this.divmod(x,"div",!1).div},l.prototype.mod=function(x){return this.divmod(x,"mod",!1).mod},l.prototype.umod=function(x){return this.divmod(x,"mod",!0).mod},l.prototype.divRound=function(x){var T=this.divmod(x);if(T.mod.isZero())return T.div;var M=T.div.negative!==0?T.mod.isub(x):T.mod,O=x.ushrn(1),z=x.andln(1),X=M.cmp(O);return X<0||z===1&&X===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},l.prototype.modrn=function(x){var T=x<0;T&&(x=-x),a(x<=67108863);for(var M=(1<<26)%x,O=0,z=this.length-1;z>=0;z--)O=(M*O+(this.words[z]|0))%x;return T?-O:O},l.prototype.modn=function(x){return this.modrn(x)},l.prototype.idivn=function(x){var T=x<0;T&&(x=-x),a(x<=67108863);for(var M=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+M*67108864;this.words[O]=z/x|0,M=z%x}return this._strip(),T?this.ineg():this},l.prototype.divn=function(x){return this.clone().idivn(x)},l.prototype.egcd=function(x){a(x.negative===0),a(!x.isZero());var T=this,M=x.clone();T.negative!==0?T=T.umod(x):T=T.clone();for(var O=new l(1),z=new l(0),X=new l(0),H=new l(1),P=0;T.isEven()&&M.isEven();)T.iushrn(1),M.iushrn(1),++P;for(var S=M.clone(),F=T.clone();!T.isZero();){for(var ue=0,ee=1;!(T.words[0]&ee)&&ue<26;++ue,ee<<=1);if(ue>0)for(T.iushrn(ue);ue-- >0;)(O.isOdd()||z.isOdd())&&(O.iadd(S),z.isub(F)),O.iushrn(1),z.iushrn(1);for(var fe=0,le=1;!(M.words[0]&le)&&fe<26;++fe,le<<=1);if(fe>0)for(M.iushrn(fe);fe-- >0;)(X.isOdd()||H.isOdd())&&(X.iadd(S),H.isub(F)),X.iushrn(1),H.iushrn(1);T.cmp(M)>=0?(T.isub(M),O.isub(X),z.isub(H)):(M.isub(T),X.isub(O),H.isub(z))}return{a:X,b:H,gcd:M.iushln(P)}},l.prototype._invmp=function(x){a(x.negative===0),a(!x.isZero());var T=this,M=x.clone();T.negative!==0?T=T.umod(x):T=T.clone();for(var O=new l(1),z=new l(0),X=M.clone();T.cmpn(1)>0&&M.cmpn(1)>0;){for(var H=0,P=1;!(T.words[0]&P)&&H<26;++H,P<<=1);if(H>0)for(T.iushrn(H);H-- >0;)O.isOdd()&&O.iadd(X),O.iushrn(1);for(var S=0,F=1;!(M.words[0]&F)&&S<26;++S,F<<=1);if(S>0)for(M.iushrn(S);S-- >0;)z.isOdd()&&z.iadd(X),z.iushrn(1);T.cmp(M)>=0?(T.isub(M),O.isub(z)):(M.isub(T),z.isub(O))}var ue;return T.cmpn(1)===0?ue=O:ue=z,ue.cmpn(0)<0&&ue.iadd(x),ue},l.prototype.gcd=function(x){if(this.isZero())return x.abs();if(x.isZero())return this.abs();var T=this.clone(),M=x.clone();T.negative=0,M.negative=0;for(var O=0;T.isEven()&&M.isEven();O++)T.iushrn(1),M.iushrn(1);do{for(;T.isEven();)T.iushrn(1);for(;M.isEven();)M.iushrn(1);var z=T.cmp(M);if(z<0){var X=T;T=M,M=X}else if(z===0||M.cmpn(1)===0)break;T.isub(M)}while(!0);return M.iushln(O)},l.prototype.invm=function(x){return this.egcd(x).a.umod(x)},l.prototype.isEven=function(){return(this.words[0]&1)===0},l.prototype.isOdd=function(){return(this.words[0]&1)===1},l.prototype.andln=function(x){return this.words[0]&x},l.prototype.bincn=function(x){a(typeof x=="number");var T=x%26,M=(x-T)/26,O=1<<T;if(this.length<=M)return this._expand(M+1),this.words[M]|=O,this;for(var z=O,X=M;z!==0&&X<this.length;X++){var H=this.words[X]|0;H+=z,z=H>>>26,H&=67108863,this.words[X]=H}return z!==0&&(this.words[X]=z,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(x){var T=x<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this._strip();var M;if(this.length>1)M=1;else{T&&(x=-x),a(x<=67108863,"Number is too big");var O=this.words[0]|0;M=O===x?0:O<x?-1:1}return this.negative!==0?-M|0:M},l.prototype.cmp=function(x){if(this.negative!==0&&x.negative===0)return-1;if(this.negative===0&&x.negative!==0)return 1;var T=this.ucmp(x);return this.negative!==0?-T|0:T},l.prototype.ucmp=function(x){if(this.length>x.length)return 1;if(this.length<x.length)return-1;for(var T=0,M=this.length-1;M>=0;M--){var O=this.words[M]|0,z=x.words[M]|0;if(O!==z){O<z?T=-1:O>z&&(T=1);break}}return T},l.prototype.gtn=function(x){return this.cmpn(x)===1},l.prototype.gt=function(x){return this.cmp(x)===1},l.prototype.gten=function(x){return this.cmpn(x)>=0},l.prototype.gte=function(x){return this.cmp(x)>=0},l.prototype.ltn=function(x){return this.cmpn(x)===-1},l.prototype.lt=function(x){return this.cmp(x)===-1},l.prototype.lten=function(x){return this.cmpn(x)<=0},l.prototype.lte=function(x){return this.cmp(x)<=0},l.prototype.eqn=function(x){return this.cmpn(x)===0},l.prototype.eq=function(x){return this.cmp(x)===0},l.red=function(x){return new ae(x)},l.prototype.toRed=function(x){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),x.convertTo(this)._forceRed(x)},l.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(x){return this.red=x,this},l.prototype.forceRed=function(x){return a(!this.red,"Already a number in reduction context"),this._forceRed(x)},l.prototype.redAdd=function(x){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,x)},l.prototype.redIAdd=function(x){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,x)},l.prototype.redSub=function(x){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,x)},l.prototype.redISub=function(x){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,x)},l.prototype.redShl=function(x){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,x)},l.prototype.redMul=function(x){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.mul(this,x)},l.prototype.redIMul=function(x){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.imul(this,x)},l.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(x){return a(this.red&&!x.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,x)};var J={k256:null,p224:null,p192:null,p25519:null};function Y(I,x){this.name=I,this.p=new l(x,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var x=new l(null);return x.words=new Array(Math.ceil(this.n/13)),x},Y.prototype.ireduce=function(x){var T=x,M;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),M=T.bitLength();while(M>this.n);var O=M<this.n?-1:T.ucmp(this.p);return O===0?(T.words[0]=0,T.length=1):O>0?T.isub(this.p):T.strip!==void 0?T.strip():T._strip(),T},Y.prototype.split=function(x,T){x.iushrn(this.n,0,T)},Y.prototype.imulK=function(x){return x.imul(this.k)};function L(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(L,Y),L.prototype.split=function(x,T){for(var M=4194303,O=Math.min(x.length,9),z=0;z<O;z++)T.words[z]=x.words[z];if(T.length=O,x.length<=9){x.words[0]=0,x.length=1;return}var X=x.words[9];for(T.words[T.length++]=X&M,z=10;z<x.length;z++){var H=x.words[z]|0;x.words[z-10]=(H&M)<<4|X>>>22,X=H}X>>>=22,x.words[z-10]=X,X===0&&x.length>10?x.length-=10:x.length-=9},L.prototype.imulK=function(x){x.words[x.length]=0,x.words[x.length+1]=0,x.length+=2;for(var T=0,M=0;M<x.length;M++){var O=x.words[M]|0;T+=O*977,x.words[M]=T&67108863,T=O*64+(T/67108864|0)}return x.words[x.length-1]===0&&(x.length--,x.words[x.length-1]===0&&x.length--),x};function Z(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(Z,Y);function Q(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Q,Y);function oe(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(oe,Y),oe.prototype.imulK=function(x){for(var T=0,M=0;M<x.length;M++){var O=(x.words[M]|0)*19+T,z=O&67108863;O>>>=26,x.words[M]=z,T=O}return T!==0&&(x.words[x.length++]=T),x},l._prime=function(x){if(J[x])return J[x];var T;if(x==="k256")T=new L;else if(x==="p224")T=new Z;else if(x==="p192")T=new Q;else if(x==="p25519")T=new oe;else throw new Error("Unknown prime "+x);return J[x]=T,T};function ae(I){if(typeof I=="string"){var x=l._prime(I);this.m=x.p,this.prime=x}else a(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}ae.prototype._verify1=function(x){a(x.negative===0,"red works only with positives"),a(x.red,"red works only with red numbers")},ae.prototype._verify2=function(x,T){a((x.negative|T.negative)===0,"red works only with positives"),a(x.red&&x.red===T.red,"red works only with red numbers")},ae.prototype.imod=function(x){return this.prime?this.prime.ireduce(x)._forceRed(this):(b(x,x.umod(this.m)._forceRed(this)),x)},ae.prototype.neg=function(x){return x.isZero()?x.clone():this.m.sub(x)._forceRed(this)},ae.prototype.add=function(x,T){this._verify2(x,T);var M=x.add(T);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},ae.prototype.iadd=function(x,T){this._verify2(x,T);var M=x.iadd(T);return M.cmp(this.m)>=0&&M.isub(this.m),M},ae.prototype.sub=function(x,T){this._verify2(x,T);var M=x.sub(T);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},ae.prototype.isub=function(x,T){this._verify2(x,T);var M=x.isub(T);return M.cmpn(0)<0&&M.iadd(this.m),M},ae.prototype.shl=function(x,T){return this._verify1(x),this.imod(x.ushln(T))},ae.prototype.imul=function(x,T){return this._verify2(x,T),this.imod(x.imul(T))},ae.prototype.mul=function(x,T){return this._verify2(x,T),this.imod(x.mul(T))},ae.prototype.isqr=function(x){return this.imul(x,x.clone())},ae.prototype.sqr=function(x){return this.mul(x,x)},ae.prototype.sqrt=function(x){if(x.isZero())return x.clone();var T=this.m.andln(3);if(a(T%2===1),T===3){var M=this.m.add(new l(1)).iushrn(2);return this.pow(x,M)}for(var O=this.m.subn(1),z=0;!O.isZero()&&O.andln(1)===0;)z++,O.iushrn(1);a(!O.isZero());var X=new l(1).toRed(this),H=X.redNeg(),P=this.m.subn(1).iushrn(1),S=this.m.bitLength();for(S=new l(2*S*S).toRed(this);this.pow(S,P).cmp(H)!==0;)S.redIAdd(H);for(var F=this.pow(S,O),ue=this.pow(x,O.addn(1).iushrn(1)),ee=this.pow(x,O),fe=z;ee.cmp(X)!==0;){for(var le=ee,ce=0;le.cmp(X)!==0;ce++)le=le.redSqr();a(ce<fe);var pe=this.pow(F,new l(1).iushln(fe-ce-1));ue=ue.redMul(pe),F=pe.redSqr(),ee=ee.redMul(F),fe=ce}return ue},ae.prototype.invm=function(x){var T=x._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},ae.prototype.pow=function(x,T){if(T.isZero())return new l(1).toRed(this);if(T.cmpn(1)===0)return x.clone();var M=4,O=new Array(1<<M);O[0]=new l(1).toRed(this),O[1]=x;for(var z=2;z<O.length;z++)O[z]=this.mul(O[z-1],x);var X=O[0],H=0,P=0,S=T.bitLength()%26;for(S===0&&(S=26),z=T.length-1;z>=0;z--){for(var F=T.words[z],ue=S-1;ue>=0;ue--){var ee=F>>ue&1;if(X!==O[0]&&(X=this.sqr(X)),ee===0&&H===0){P=0;continue}H<<=1,H|=ee,P++,!(P!==M&&(z!==0||ue!==0))&&(X=this.mul(X,O[H]),P=0,H=0)}S=26}return X},ae.prototype.convertTo=function(x){var T=x.umod(this.m);return T===x?T.clone():T},ae.prototype.convertFrom=function(x){var T=x.clone();return T.red=null,T},l.mont=function(x){return new U(x)};function U(I){ae.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(U,ae),U.prototype.convertTo=function(x){return this.imod(x.ushln(this.shift))},U.prototype.convertFrom=function(x){var T=this.imod(x.mul(this.rinv));return T.red=null,T},U.prototype.imul=function(x,T){if(x.isZero()||T.isZero())return x.words[0]=0,x.length=1,x;var M=x.imul(T),O=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=M.isub(O).iushrn(this.shift),X=z;return z.cmp(this.m)>=0?X=z.isub(this.m):z.cmpn(0)<0&&(X=z.iadd(this.m)),X._forceRed(this)},U.prototype.mul=function(x,T){if(x.isZero()||T.isZero())return new l(0)._forceRed(this);var M=x.mul(T),O=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=M.isub(O).iushrn(this.shift),X=z;return z.cmp(this.m)>=0?X=z.isub(this.m):z.cmpn(0)<0&&(X=z.iadd(this.m)),X._forceRed(this)},U.prototype.invm=function(x){var T=this.imod(x._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(t,commonjsGlobal)})(bn$1);const _BN=bnExports$1,version$g="bignumber/5.7.0";var BN$1=_BN.BN;const logger$k=new Logger(version$g),_constructorGuard$1={},MAX_SAFE=9007199254740991;let _warnedToStringRadix=!1;class BigNumber{constructor(e,n){e!==_constructorGuard$1&&logger$k.throwError("cannot call constructor directly; use BigNumber.from",Logger.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=n,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return toBigNumber(toBN(this).fromTwos(e))}toTwos(e){return toBigNumber(toBN(this).toTwos(e))}abs(){return this._hex[0]==="-"?BigNumber.from(this._hex.substring(1)):this}add(e){return toBigNumber(toBN(this).add(toBN(e)))}sub(e){return toBigNumber(toBN(this).sub(toBN(e)))}div(e){return BigNumber.from(e).isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(e)))}mul(e){return toBigNumber(toBN(this).mul(toBN(e)))}mod(e){const n=toBN(e);return n.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(n))}pow(e){const n=toBN(e);return n.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(n))}and(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(n))}or(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(n))}xor(e){const n=toBN(e);return(this.isNegative()||n.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(n))}mask(e){return(this.isNegative()||e<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(e))}eq(e){return toBN(this).eq(toBN(e))}lt(e){return toBN(this).lt(toBN(e))}lte(e){return toBN(this).lte(toBN(e))}gt(e){return toBN(this).gt(toBN(e))}gte(e){return toBN(this).gte(toBN(e))}isNegative(){return this._hex[0]==="-"}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch{throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return logger$k.throwError("this platform does not support BigInt",Logger.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$k.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?logger$k.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger.errors.UNEXPECTED_ARGUMENT,{}):logger$k.throwError("BigNumber.toString does not accept parameters",Logger.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof BigNumber)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new BigNumber(_constructorGuard$1,toHex(e)):e.match(/^-?[0-9]+$/)?new BigNumber(_constructorGuard$1,toHex(new BN$1(e))):logger$k.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&throwFault("underflow","BigNumber.from",e),(e>=MAX_SAFE||e<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",e),BigNumber.from(String(e));const n=e;if(typeof n=="bigint")return BigNumber.from(n.toString());if(isBytes(n))return BigNumber.from(hexlify(n));if(n)if(n.toHexString){const a=n.toHexString();if(typeof a=="string")return BigNumber.from(a)}else{let a=n._hex;if(a==null&&n.type==="BigNumber"&&(a=n.hex),typeof a=="string"&&(isHexString(a)||a[0]==="-"&&isHexString(a.substring(1))))return BigNumber.from(a)}return logger$k.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function toHex(t){if(typeof t!="string")return toHex(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&logger$k.throwArgumentError("invalid hex","value",t),t=toHex(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function toBigNumber(t){return BigNumber.from(toHex(t))}function toBN(t){const e=BigNumber.from(t).toHexString();return e[0]==="-"?new BN$1("-"+e.substring(3),16):new BN$1(e.substring(2),16)}function throwFault(t,e,n){const a={fault:t,operation:e};return n!=null&&(a.value=n),logger$k.throwError(t,Logger.errors.NUMERIC_FAULT,a)}function _base36To16(t){return new BN$1(t,36).toString(16)}function keccak256(t){return"0x"+sha3.keccak_256(arrayify(t))}const version$f="rlp/5.7.0",logger$j=new Logger(version$f);function arrayifyInteger(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function _encode(t){if(Array.isArray(t)){let a=[];if(t.forEach(function(l){a=a.concat(_encode(l))}),a.length<=55)return a.unshift(192+a.length),a;const o=arrayifyInteger(a.length);return o.unshift(247+o.length),o.concat(a)}isBytesLike(t)||logger$j.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(arrayify(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const n=arrayifyInteger(e.length);return n.unshift(183+n.length),n.concat(e)}function encode$b(t){return hexlify(_encode(t))}const version$e="address/5.7.0",logger$i=new Logger(version$e);function getChecksumAddress(t){isHexString(t,20)||logger$i.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),n=new Uint8Array(40);for(let o=0;o<40;o++)n[o]=e[o].charCodeAt(0);const a=arrayify(keccak256(n));for(let o=0;o<40;o+=2)a[o>>1]>>4>=8&&(e[o]=e[o].toUpperCase()),(a[o>>1]&15)>=8&&(e[o+1]=e[o+1].toUpperCase());return"0x"+e.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const ibanLookup={};for(let t=0;t<10;t++)ibanLookup[String(t)]=String(t);for(let t=0;t<26;t++)ibanLookup[String.fromCharCode(65+t)]=String(10+t);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(a=>ibanLookup[a]).join("");for(;e.length>=safeDigits;){let a=e.substring(0,safeDigits);e=parseInt(a,10)%97+e.substring(a.length)}let n=String(98-parseInt(e,10)%97);for(;n.length<2;)n="0"+n;return n}function getAddress(t){let e=null;if(typeof t!="string"&&logger$i.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=getChecksumAddress(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&logger$i.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==ibanChecksum(t)&&logger$i.throwArgumentError("bad icap checksum","address",t),e=_base36To16(t.substring(4));e.length<40;)e="0"+e;e=getChecksumAddress("0x"+e)}else logger$i.throwArgumentError("invalid address","address",t);return e}const version$d="properties/5.7.0";var __awaiter$5=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(b){try{y(a.next(b))}catch(_){u(_)}}function m(b){try{y(a.throw(b))}catch(_){u(_)}}function y(b){b.done?l(b.value):o(b.value).then(d,m)}y((a=a.apply(t,e||[])).next())})};const logger$h=new Logger(version$d);function defineReadOnly(t,e,n){Object.defineProperty(t,e,{enumerable:!0,value:n,writable:!1})}function resolveProperties(t){return __awaiter$5(this,void 0,void 0,function*(){const e=Object.keys(t).map(a=>{const o=t[a];return Promise.resolve(o).then(l=>({key:a,value:l}))});return(yield Promise.all(e)).reduce((a,o)=>(a[o.key]=o.value,a),{})})}function checkProperties(t,e){(!t||typeof t!="object")&&logger$h.throwArgumentError("invalid object","object",t),Object.keys(t).forEach(n=>{e[n]||logger$h.throwArgumentError("invalid object key - "+n,"transaction:"+n,t)})}function shallowCopy(t){const e={};for(const n in t)e[n]=t[n];return e}const opaque={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function _isFrozen(t){if(t==null||opaque[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let n=0;n<e.length;n++){let a=null;try{a=t[e[n]]}catch{continue}if(!_isFrozen(a))return!1}return!0}return logger$h.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function _deepCopy(t){if(_isFrozen(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>deepCopy$1(e)));if(typeof t=="object"){const e={};for(const n in t){const a=t[n];a!==void 0&&defineReadOnly(e,n,deepCopy$1(a))}return e}return logger$h.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function deepCopy$1(t){return _deepCopy(t)}class Description{constructor(e){for(const n in e)this[n]=deepCopy$1(e[n])}}const version$c="abstract-provider/5.7.0";var __awaiter$4=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(b){try{y(a.next(b))}catch(_){u(_)}}function m(b){try{y(a.throw(b))}catch(_){u(_)}}function y(b){b.done?l(b.value):o(b.value).then(d,m)}y((a=a.apply(t,e||[])).next())})};const logger$g=new Logger(version$c);class Provider{constructor(){logger$g.checkAbstract(new.target,Provider),defineReadOnly(this,"_isProvider",!0)}getFeeData(){return __awaiter$4(this,void 0,void 0,function*(){const{block:e,gasPrice:n}=yield resolveProperties({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(u=>null)});let a=null,o=null,l=null;return e&&e.baseFeePerGas&&(a=e.baseFeePerGas,l=BigNumber.from("1500000000"),o=e.baseFeePerGas.mul(2).add(l)),{lastBaseFeePerGas:a,maxFeePerGas:o,maxPriorityFeePerGas:l,gasPrice:n}})}addListener(e,n){return this.on(e,n)}removeListener(e,n){return this.off(e,n)}static isProvider(e){return!!(e&&e._isProvider)}}const version$b="abstract-signer/5.7.0";var __awaiter$3=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(b){try{y(a.next(b))}catch(_){u(_)}}function m(b){try{y(a.throw(b))}catch(_){u(_)}}function y(b){b.done?l(b.value):o(b.value).then(d,m)}y((a=a.apply(t,e||[])).next())})};const logger$f=new Logger(version$b),allowedTransactionKeys$1=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],forwardErrors=[Logger.errors.INSUFFICIENT_FUNDS,Logger.errors.NONCE_EXPIRED,Logger.errors.REPLACEMENT_UNDERPRICED];class Signer{constructor(){logger$f.checkAbstract(new.target,Signer),defineReadOnly(this,"_isSigner",!0)}getBalance(e){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const n=yield resolveProperties(this.checkTransaction(e));return yield this.provider.estimateGas(n)})}call(e,n){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("call");const a=yield resolveProperties(this.checkTransaction(e));return yield this.provider.call(a,n)})}sendTransaction(e){return __awaiter$3(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const n=yield this.populateTransaction(e),a=yield this.signTransaction(n);return yield this.provider.sendTransaction(a)})}getChainId(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return __awaiter$3(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const a in e)allowedTransactionKeys$1.indexOf(a)===-1&&logger$f.throwArgumentError("invalid transaction key: "+a,"transaction",e);const n=shallowCopy(e);return n.from==null?n.from=this.getAddress():n.from=Promise.all([Promise.resolve(n.from),this.getAddress()]).then(a=>(a[0].toLowerCase()!==a[1].toLowerCase()&&logger$f.throwArgumentError("from address mismatch","transaction",e),a[0])),n}populateTransaction(e){return __awaiter$3(this,void 0,void 0,function*(){const n=yield resolveProperties(this.checkTransaction(e));n.to!=null&&(n.to=Promise.resolve(n.to).then(o=>__awaiter$3(this,void 0,void 0,function*(){if(o==null)return null;const l=yield this.resolveName(o);return l==null&&logger$f.throwArgumentError("provided ENS name resolves to null","tx.to",o),l})),n.to.catch(o=>{}));const a=n.maxFeePerGas!=null||n.maxPriorityFeePerGas!=null;if(n.gasPrice!=null&&(n.type===2||a)?logger$f.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(n.type===0||n.type===1)&&a&&logger$f.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(n.type===2||n.type==null)&&n.maxFeePerGas!=null&&n.maxPriorityFeePerGas!=null)n.type=2;else if(n.type===0||n.type===1)n.gasPrice==null&&(n.gasPrice=this.getGasPrice());else{const o=yield this.getFeeData();if(n.type==null)if(o.maxFeePerGas!=null&&o.maxPriorityFeePerGas!=null)if(n.type=2,n.gasPrice!=null){const l=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=l,n.maxPriorityFeePerGas=l}else n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas);else o.gasPrice!=null?(a&&logger$f.throwError("network does not support EIP-1559",Logger.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),n.gasPrice==null&&(n.gasPrice=o.gasPrice),n.type=0):logger$f.throwError("failed to get consistent fee data",Logger.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else n.type===2&&(n.maxFeePerGas==null&&(n.maxFeePerGas=o.maxFeePerGas),n.maxPriorityFeePerGas==null&&(n.maxPriorityFeePerGas=o.maxPriorityFeePerGas))}return n.nonce==null&&(n.nonce=this.getTransactionCount("pending")),n.gasLimit==null&&(n.gasLimit=this.estimateGas(n).catch(o=>{if(forwardErrors.indexOf(o.code)>=0)throw o;return logger$f.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",Logger.errors.UNPREDICTABLE_GAS_LIMIT,{error:o,tx:n})})),n.chainId==null?n.chainId=this.getChainId():n.chainId=Promise.all([Promise.resolve(n.chainId),this.getChainId()]).then(o=>(o[1]!==0&&o[0]!==o[1]&&logger$f.throwArgumentError("chainId address mismatch","transaction",e),o[0])),yield resolveProperties(n)})}_checkProvider(e){this.provider||logger$f.throwError("missing provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}}const version$a="strings/5.7.0",logger$e=new Logger(version$a);var UnicodeNormalizationForm;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(UnicodeNormalizationForm||(UnicodeNormalizationForm={}));var Utf8ErrorReason;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Utf8ErrorReason||(Utf8ErrorReason={}));function toUtf8Bytes(t,e=UnicodeNormalizationForm.current){e!=UnicodeNormalizationForm.current&&(logger$e.checkNormalize(),t=t.normalize(e));let n=[];for(let a=0;a<t.length;a++){const o=t.charCodeAt(a);if(o<128)n.push(o);else if(o<2048)n.push(o>>6|192),n.push(o&63|128);else if((o&64512)==55296){a++;const l=t.charCodeAt(a);if(a>=t.length||(l&64512)!==56320)throw new Error("invalid utf-8 string");const u=65536+((o&1023)<<10)+(l&1023);n.push(u>>18|240),n.push(u>>12&63|128),n.push(u>>6&63|128),n.push(u&63|128)}else n.push(o>>12|224),n.push(o>>6&63|128),n.push(o&63|128)}return arrayify(n)}function id(t){return keccak256(toUtf8Bytes(t))}const version$9="hash/5.7.0",messagePrefix=`Ethereum Signed Message:
`;function hashMessage(t){return typeof t=="string"&&(t=toUtf8Bytes(t)),keccak256(concat([toUtf8Bytes(messagePrefix),toUtf8Bytes(String(t.length)),t]))}var __awaiter$2=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(b){try{y(a.next(b))}catch(_){u(_)}}function m(b){try{y(a.throw(b))}catch(_){u(_)}}function y(b){b.done?l(b.value):o(b.value).then(d,m)}y((a=a.apply(t,e||[])).next())})};const logger$d=new Logger(version$9),padding=new Uint8Array(32);padding.fill(0);const NegativeOne=BigNumber.from(-1),Zero=BigNumber.from(0),One=BigNumber.from(1),MaxUint256=BigNumber.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function hexPadRight(t){const e=arrayify(t),n=e.length%32;return n?hexConcat([e,padding.slice(n)]):hexlify(e)}const hexTrue=hexZeroPad(One.toHexString(),32),hexFalse=hexZeroPad(Zero.toHexString(),32),domainFieldTypes={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},domainFieldNames=["name","version","chainId","verifyingContract","salt"];function checkString(t){return function(e){return typeof e!="string"&&logger$d.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const domainChecks={name:checkString("name"),version:checkString("version"),chainId:function(t){try{return BigNumber.from(t).toString()}catch{}return logger$d.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return getAddress(t).toLowerCase()}catch{}return logger$d.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=arrayify(t);if(e.length!==32)throw new Error("bad length");return hexlify(e)}catch{}return logger$d.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function getBaseEncoder(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const n=e[1]==="",a=parseInt(e[2]||"256");(a%8!==0||a>256||e[2]&&e[2]!==String(a))&&logger$d.throwArgumentError("invalid numeric width","type",t);const o=MaxUint256.mask(n?a-1:a),l=n?o.add(One).mul(NegativeOne):Zero;return function(u){const d=BigNumber.from(u);return(d.lt(l)||d.gt(o))&&logger$d.throwArgumentError(`value out-of-bounds for ${t}`,"value",u),hexZeroPad(d.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const n=parseInt(e[1]);return(n===0||n>32||e[1]!==String(n))&&logger$d.throwArgumentError("invalid bytes width","type",t),function(a){return arrayify(a).length!==n&&logger$d.throwArgumentError(`invalid length for ${t}`,"value",a),hexPadRight(a)}}}switch(t){case"address":return function(e){return hexZeroPad(getAddress(e),32)};case"bool":return function(e){return e?hexTrue:hexFalse};case"bytes":return function(e){return keccak256(e)};case"string":return function(e){return id(e)}}return null}function encodeType(t,e){return`${t}(${e.map(({name:n,type:a})=>a+" "+n).join(",")})`}class TypedDataEncoder{constructor(e){defineReadOnly(this,"types",Object.freeze(deepCopy$1(e))),defineReadOnly(this,"_encoderCache",{}),defineReadOnly(this,"_types",{});const n={},a={},o={};Object.keys(e).forEach(d=>{n[d]={},a[d]=[],o[d]={}});for(const d in e){const m={};e[d].forEach(y=>{m[y.name]&&logger$d.throwArgumentError(`duplicate variable name ${JSON.stringify(y.name)} in ${JSON.stringify(d)}`,"types",e),m[y.name]=!0;const b=y.type.match(/^([^\x5b]*)(\x5b|$)/)[1];b===d&&logger$d.throwArgumentError(`circular type reference to ${JSON.stringify(b)}`,"types",e),!getBaseEncoder(b)&&(a[b]||logger$d.throwArgumentError(`unknown type ${JSON.stringify(b)}`,"types",e),a[b].push(d),n[d][b]=!0)})}const l=Object.keys(a).filter(d=>a[d].length===0);l.length===0?logger$d.throwArgumentError("missing primary type","types",e):l.length>1&&logger$d.throwArgumentError(`ambiguous primary types or unused types: ${l.map(d=>JSON.stringify(d)).join(", ")}`,"types",e),defineReadOnly(this,"primaryType",l[0]);function u(d,m){m[d]&&logger$d.throwArgumentError(`circular type reference to ${JSON.stringify(d)}`,"types",e),m[d]=!0,Object.keys(n[d]).forEach(y=>{a[y]&&(u(y,m),Object.keys(m).forEach(b=>{o[b][y]=!0}))}),delete m[d]}u(this.primaryType,{});for(const d in o){const m=Object.keys(o[d]);m.sort(),this._types[d]=encodeType(d,e[d])+m.map(y=>encodeType(y,e[y])).join("")}}getEncoder(e){let n=this._encoderCache[e];return n||(n=this._encoderCache[e]=this._getEncoder(e)),n}_getEncoder(e){{const o=getBaseEncoder(e);if(o)return o}const n=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(n){const o=n[1],l=this.getEncoder(o),u=parseInt(n[3]);return d=>{u>=0&&d.length!==u&&logger$d.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",d);let m=d.map(l);return this._types[o]&&(m=m.map(keccak256)),keccak256(hexConcat(m))}}const a=this.types[e];if(a){const o=id(this._types[e]);return l=>{const u=a.map(({name:d,type:m})=>{const y=this.getEncoder(m)(l[d]);return this._types[m]?keccak256(y):y});return u.unshift(o),hexConcat(u)}}return logger$d.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const n=this._types[e];return n||logger$d.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),n}encodeData(e,n){return this.getEncoder(e)(n)}hashStruct(e,n){return keccak256(this.encodeData(e,n))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,n,a){if(getBaseEncoder(e))return a(e,n);const o=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(o){const u=o[1],d=parseInt(o[3]);return d>=0&&n.length!==d&&logger$d.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",n),n.map(m=>this._visit(u,m,a))}const l=this.types[e];return l?l.reduce((u,{name:d,type:m})=>(u[d]=this._visit(m,n[d],a),u),{}):logger$d.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,n){return this._visit(this.primaryType,e,n)}static from(e){return new TypedDataEncoder(e)}static getPrimaryType(e){return TypedDataEncoder.from(e).primaryType}static hashStruct(e,n,a){return TypedDataEncoder.from(n).hashStruct(e,a)}static hashDomain(e){const n=[];for(const a in e){const o=domainFieldTypes[a];o||logger$d.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(a)}`,"domain",e),n.push({name:a,type:o})}return n.sort((a,o)=>domainFieldNames.indexOf(a.name)-domainFieldNames.indexOf(o.name)),TypedDataEncoder.hashStruct("EIP712Domain",{EIP712Domain:n},e)}static encode(e,n,a){return hexConcat(["0x1901",TypedDataEncoder.hashDomain(e),TypedDataEncoder.from(n).hash(a)])}static hash(e,n,a){return keccak256(TypedDataEncoder.encode(e,n,a))}static resolveNames(e,n,a,o){return __awaiter$2(this,void 0,void 0,function*(){e=shallowCopy(e);const l={};e.verifyingContract&&!isHexString(e.verifyingContract,20)&&(l[e.verifyingContract]="0x");const u=TypedDataEncoder.from(n);u.visit(a,(d,m)=>(d==="address"&&!isHexString(m,20)&&(l[m]="0x"),m));for(const d in l)l[d]=yield o(d);return e.verifyingContract&&l[e.verifyingContract]&&(e.verifyingContract=l[e.verifyingContract]),a=u.visit(a,(d,m)=>d==="address"&&l[m]?l[m]:m),{domain:e,value:a}})}static getPayload(e,n,a){TypedDataEncoder.hashDomain(e);const o={},l=[];domainFieldNames.forEach(m=>{const y=e[m];y!=null&&(o[m]=domainChecks[m](y),l.push({name:m,type:domainFieldTypes[m]}))});const u=TypedDataEncoder.from(n),d=shallowCopy(n);return d.EIP712Domain?logger$d.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",n):d.EIP712Domain=l,u.encode(a),{types:d,domain:o,primaryType:u.primaryType,message:u.visit(a,(m,y)=>{if(m.match(/^bytes(\d*)/))return hexlify(arrayify(y));if(m.match(/^u?int/))return BigNumber.from(y).toString();switch(m){case"address":return y.toLowerCase();case"bool":return!!y;case"string":return typeof y!="string"&&logger$d.throwArgumentError("invalid string","value",y),y}return logger$d.throwArgumentError("unsupported type","type",m)})}}}class BaseX{constructor(e){defineReadOnly(this,"alphabet",e),defineReadOnly(this,"base",e.length),defineReadOnly(this,"_alphabetMap",{}),defineReadOnly(this,"_leader",e.charAt(0));for(let n=0;n<e.length;n++)this._alphabetMap[e.charAt(n)]=n}encode(e){let n=arrayify(e);if(n.length===0)return"";let a=[0];for(let l=0;l<n.length;++l){let u=n[l];for(let d=0;d<a.length;++d)u+=a[d]<<8,a[d]=u%this.base,u=u/this.base|0;for(;u>0;)a.push(u%this.base),u=u/this.base|0}let o="";for(let l=0;n[l]===0&&l<n.length-1;++l)o+=this._leader;for(let l=a.length-1;l>=0;--l)o+=this.alphabet[a[l]];return o}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let n=[];if(e.length===0)return new Uint8Array(n);n.push(0);for(let a=0;a<e.length;a++){let o=this._alphabetMap[e[a]];if(o===void 0)throw new Error("Non-base"+this.base+" character");let l=o;for(let u=0;u<n.length;++u)l+=n[u]*this.base,n[u]=l&255,l>>=8;for(;l>0;)n.push(l&255),l>>=8}for(let a=0;e[a]===this._leader&&a<e.length-1;++a)n.push(0);return arrayify(new Uint8Array(n.reverse()))}}new BaseX("abcdefghijklmnopqrstuvwxyz234567");const Base58=new BaseX("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");var SupportedAlgorithm;(function(t){t.sha256="sha256",t.sha512="sha512"})(SupportedAlgorithm||(SupportedAlgorithm={}));const version$8="sha2/5.7.0",logger$c=new Logger(version$8);function ripemd160(t){return"0x"+hash$3.ripemd160().update(arrayify(t)).digest("hex")}function sha256(t){return"0x"+hash$3.sha256().update(arrayify(t)).digest("hex")}function computeHmac(t,e,n){return SupportedAlgorithm[t]||logger$c.throwError("unsupported algorithm "+t,Logger.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:t}),"0x"+hash$3.hmac(hash$3[t],arrayify(e)).update(arrayify(n)).digest("hex")}function pbkdf2$1(t,e,n,a,o){t=arrayify(t),e=arrayify(e);let l,u=1;const d=new Uint8Array(a),m=new Uint8Array(e.length+4);m.set(e);let y,b;for(let _=1;_<=u;_++){m[e.length]=_>>24&255,m[e.length+1]=_>>16&255,m[e.length+2]=_>>8&255,m[e.length+3]=_&255;let w=arrayify(computeHmac(o,t,m));l||(l=w.length,b=new Uint8Array(l),u=Math.ceil(a/l),y=a-(u-1)*l),b.set(w);for(let C=1;C<n;C++){w=arrayify(computeHmac(o,t,w));for(let k=0;k<l;k++)b[k]^=w[k]}const E=(_-1)*l,A=_===u?y:l;d.set(arrayify(b).slice(0,A),E)}return hexlify(d)}var bnExports={},bn={get exports(){return bnExports},set exports(t){bnExports=t}};(function(t){(function(e,n){function a(I,x){if(!I)throw new Error(x||"Assertion failed")}function o(I,x){I.super_=x;var T=function(){};T.prototype=x.prototype,I.prototype=new T,I.prototype.constructor=I}function l(I,x,T){if(l.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((x==="le"||x==="be")&&(T=x,x=10),this._init(I||0,x||10,T||"be"))}typeof e=="object"?e.exports=l:n.BN=l,l.BN=l,l.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=require$$0$2.Buffer}catch{}l.isBN=function(x){return x instanceof l?!0:x!==null&&typeof x=="object"&&x.constructor.wordSize===l.wordSize&&Array.isArray(x.words)},l.max=function(x,T){return x.cmp(T)>0?x:T},l.min=function(x,T){return x.cmp(T)<0?x:T},l.prototype._init=function(x,T,M){if(typeof x=="number")return this._initNumber(x,T,M);if(typeof x=="object")return this._initArray(x,T,M);T==="hex"&&(T=16),a(T===(T|0)&&T>=2&&T<=36),x=x.toString().replace(/\s+/g,"");var O=0;x[0]==="-"&&(O++,this.negative=1),O<x.length&&(T===16?this._parseHex(x,O,M):(this._parseBase(x,T,O),M==="le"&&this._initArray(this.toArray(),T,M)))},l.prototype._initNumber=function(x,T,M){x<0&&(this.negative=1,x=-x),x<67108864?(this.words=[x&67108863],this.length=1):x<4503599627370496?(this.words=[x&67108863,x/67108864&67108863],this.length=2):(a(x<9007199254740992),this.words=[x&67108863,x/67108864&67108863,1],this.length=3),M==="le"&&this._initArray(this.toArray(),T,M)},l.prototype._initArray=function(x,T,M){if(a(typeof x.length=="number"),x.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(x.length/3),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var z,X,H=0;if(M==="be")for(O=x.length-1,z=0;O>=0;O-=3)X=x[O]|x[O-1]<<8|x[O-2]<<16,this.words[z]|=X<<H&67108863,this.words[z+1]=X>>>26-H&67108863,H+=24,H>=26&&(H-=26,z++);else if(M==="le")for(O=0,z=0;O<x.length;O+=3)X=x[O]|x[O+1]<<8|x[O+2]<<16,this.words[z]|=X<<H&67108863,this.words[z+1]=X>>>26-H&67108863,H+=24,H>=26&&(H-=26,z++);return this._strip()};function d(I,x){var T=I.charCodeAt(x);if(T>=48&&T<=57)return T-48;if(T>=65&&T<=70)return T-55;if(T>=97&&T<=102)return T-87;a(!1,"Invalid character in "+I)}function m(I,x,T){var M=d(I,T);return T-1>=x&&(M|=d(I,T-1)<<4),M}l.prototype._parseHex=function(x,T,M){this.length=Math.ceil((x.length-T)/6),this.words=new Array(this.length);for(var O=0;O<this.length;O++)this.words[O]=0;var z=0,X=0,H;if(M==="be")for(O=x.length-1;O>=T;O-=2)H=m(x,T,O)<<z,this.words[X]|=H&67108863,z>=18?(z-=18,X+=1,this.words[X]|=H>>>26):z+=8;else{var P=x.length-T;for(O=P%2===0?T+1:T;O<x.length;O+=2)H=m(x,T,O)<<z,this.words[X]|=H&67108863,z>=18?(z-=18,X+=1,this.words[X]|=H>>>26):z+=8}this._strip()};function y(I,x,T,M){for(var O=0,z=0,X=Math.min(I.length,T),H=x;H<X;H++){var P=I.charCodeAt(H)-48;O*=M,P>=49?z=P-49+10:P>=17?z=P-17+10:z=P,a(P>=0&&z<M,"Invalid character"),O+=z}return O}l.prototype._parseBase=function(x,T,M){this.words=[0],this.length=1;for(var O=0,z=1;z<=67108863;z*=T)O++;O--,z=z/T|0;for(var X=x.length-M,H=X%O,P=Math.min(X,X-H)+M,S=0,F=M;F<P;F+=O)S=y(x,F,F+O,T),this.imuln(z),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S);if(H!==0){var ue=1;for(S=y(x,F,x.length,T),F=0;F<H;F++)ue*=T;this.imuln(ue),this.words[0]+S<67108864?this.words[0]+=S:this._iaddn(S)}this._strip()},l.prototype.copy=function(x){x.words=new Array(this.length);for(var T=0;T<this.length;T++)x.words[T]=this.words[T];x.length=this.length,x.negative=this.negative,x.red=this.red};function b(I,x){I.words=x.words,I.length=x.length,I.negative=x.negative,I.red=x.red}if(l.prototype._move=function(x){b(x,this)},l.prototype.clone=function(){var x=new l(null);return this.copy(x),x},l.prototype._expand=function(x){for(;this.length<x;)this.words[this.length++]=0;return this},l.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},l.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{l.prototype[Symbol.for("nodejs.util.inspect.custom")]=_}catch{l.prototype.inspect=_}else l.prototype.inspect=_;function _(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var w=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],E=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],A=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];l.prototype.toString=function(x,T){x=x||10,T=T|0||1;var M;if(x===16||x==="hex"){M="";for(var O=0,z=0,X=0;X<this.length;X++){var H=this.words[X],P=((H<<O|z)&16777215).toString(16);z=H>>>24-O&16777215,O+=2,O>=26&&(O-=26,X--),z!==0||X!==this.length-1?M=w[6-P.length]+P+M:M=P+M}for(z!==0&&(M=z.toString(16)+M);M.length%T!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}if(x===(x|0)&&x>=2&&x<=36){var S=E[x],F=A[x];M="";var ue=this.clone();for(ue.negative=0;!ue.isZero();){var ee=ue.modrn(F).toString(x);ue=ue.idivn(F),ue.isZero()?M=ee+M:M=w[S-ee.length]+ee+M}for(this.isZero()&&(M="0"+M);M.length%T!==0;)M="0"+M;return this.negative!==0&&(M="-"+M),M}a(!1,"Base should be between 2 and 36")},l.prototype.toNumber=function(){var x=this.words[0];return this.length===2?x+=this.words[1]*67108864:this.length===3&&this.words[2]===1?x+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-x:x},l.prototype.toJSON=function(){return this.toString(16,2)},u&&(l.prototype.toBuffer=function(x,T){return this.toArrayLike(u,x,T)}),l.prototype.toArray=function(x,T){return this.toArrayLike(Array,x,T)};var C=function(x,T){return x.allocUnsafe?x.allocUnsafe(T):new x(T)};l.prototype.toArrayLike=function(x,T,M){this._strip();var O=this.byteLength(),z=M||Math.max(1,O);a(O<=z,"byte array longer than desired length"),a(z>0,"Requested array length <= 0");var X=C(x,z),H=T==="le"?"LE":"BE";return this["_toArrayLike"+H](X,O),X},l.prototype._toArrayLikeLE=function(x,T){for(var M=0,O=0,z=0,X=0;z<this.length;z++){var H=this.words[z]<<X|O;x[M++]=H&255,M<x.length&&(x[M++]=H>>8&255),M<x.length&&(x[M++]=H>>16&255),X===6?(M<x.length&&(x[M++]=H>>24&255),O=0,X=0):(O=H>>>24,X+=2)}if(M<x.length)for(x[M++]=O;M<x.length;)x[M++]=0},l.prototype._toArrayLikeBE=function(x,T){for(var M=x.length-1,O=0,z=0,X=0;z<this.length;z++){var H=this.words[z]<<X|O;x[M--]=H&255,M>=0&&(x[M--]=H>>8&255),M>=0&&(x[M--]=H>>16&255),X===6?(M>=0&&(x[M--]=H>>24&255),O=0,X=0):(O=H>>>24,X+=2)}if(M>=0)for(x[M--]=O;M>=0;)x[M--]=0},Math.clz32?l.prototype._countBits=function(x){return 32-Math.clz32(x)}:l.prototype._countBits=function(x){var T=x,M=0;return T>=4096&&(M+=13,T>>>=13),T>=64&&(M+=7,T>>>=7),T>=8&&(M+=4,T>>>=4),T>=2&&(M+=2,T>>>=2),M+T},l.prototype._zeroBits=function(x){if(x===0)return 26;var T=x,M=0;return T&8191||(M+=13,T>>>=13),T&127||(M+=7,T>>>=7),T&15||(M+=4,T>>>=4),T&3||(M+=2,T>>>=2),T&1||M++,M},l.prototype.bitLength=function(){var x=this.words[this.length-1],T=this._countBits(x);return(this.length-1)*26+T};function k(I){for(var x=new Array(I.bitLength()),T=0;T<x.length;T++){var M=T/26|0,O=T%26;x[T]=I.words[M]>>>O&1}return x}l.prototype.zeroBits=function(){if(this.isZero())return 0;for(var x=0,T=0;T<this.length;T++){var M=this._zeroBits(this.words[T]);if(x+=M,M!==26)break}return x},l.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},l.prototype.toTwos=function(x){return this.negative!==0?this.abs().inotn(x).iaddn(1):this.clone()},l.prototype.fromTwos=function(x){return this.testn(x-1)?this.notn(x).iaddn(1).ineg():this.clone()},l.prototype.isNeg=function(){return this.negative!==0},l.prototype.neg=function(){return this.clone().ineg()},l.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},l.prototype.iuor=function(x){for(;this.length<x.length;)this.words[this.length++]=0;for(var T=0;T<x.length;T++)this.words[T]=this.words[T]|x.words[T];return this._strip()},l.prototype.ior=function(x){return a((this.negative|x.negative)===0),this.iuor(x)},l.prototype.or=function(x){return this.length>x.length?this.clone().ior(x):x.clone().ior(this)},l.prototype.uor=function(x){return this.length>x.length?this.clone().iuor(x):x.clone().iuor(this)},l.prototype.iuand=function(x){var T;this.length>x.length?T=x:T=this;for(var M=0;M<T.length;M++)this.words[M]=this.words[M]&x.words[M];return this.length=T.length,this._strip()},l.prototype.iand=function(x){return a((this.negative|x.negative)===0),this.iuand(x)},l.prototype.and=function(x){return this.length>x.length?this.clone().iand(x):x.clone().iand(this)},l.prototype.uand=function(x){return this.length>x.length?this.clone().iuand(x):x.clone().iuand(this)},l.prototype.iuxor=function(x){var T,M;this.length>x.length?(T=this,M=x):(T=x,M=this);for(var O=0;O<M.length;O++)this.words[O]=T.words[O]^M.words[O];if(this!==T)for(;O<T.length;O++)this.words[O]=T.words[O];return this.length=T.length,this._strip()},l.prototype.ixor=function(x){return a((this.negative|x.negative)===0),this.iuxor(x)},l.prototype.xor=function(x){return this.length>x.length?this.clone().ixor(x):x.clone().ixor(this)},l.prototype.uxor=function(x){return this.length>x.length?this.clone().iuxor(x):x.clone().iuxor(this)},l.prototype.inotn=function(x){a(typeof x=="number"&&x>=0);var T=Math.ceil(x/26)|0,M=x%26;this._expand(T),M>0&&T--;for(var O=0;O<T;O++)this.words[O]=~this.words[O]&67108863;return M>0&&(this.words[O]=~this.words[O]&67108863>>26-M),this._strip()},l.prototype.notn=function(x){return this.clone().inotn(x)},l.prototype.setn=function(x,T){a(typeof x=="number"&&x>=0);var M=x/26|0,O=x%26;return this._expand(M+1),T?this.words[M]=this.words[M]|1<<O:this.words[M]=this.words[M]&~(1<<O),this._strip()},l.prototype.iadd=function(x){var T;if(this.negative!==0&&x.negative===0)return this.negative=0,T=this.isub(x),this.negative^=1,this._normSign();if(this.negative===0&&x.negative!==0)return x.negative=0,T=this.isub(x),x.negative=1,T._normSign();var M,O;this.length>x.length?(M=this,O=x):(M=x,O=this);for(var z=0,X=0;X<O.length;X++)T=(M.words[X]|0)+(O.words[X]|0)+z,this.words[X]=T&67108863,z=T>>>26;for(;z!==0&&X<M.length;X++)T=(M.words[X]|0)+z,this.words[X]=T&67108863,z=T>>>26;if(this.length=M.length,z!==0)this.words[this.length]=z,this.length++;else if(M!==this)for(;X<M.length;X++)this.words[X]=M.words[X];return this},l.prototype.add=function(x){var T;return x.negative!==0&&this.negative===0?(x.negative=0,T=this.sub(x),x.negative^=1,T):x.negative===0&&this.negative!==0?(this.negative=0,T=x.sub(this),this.negative=1,T):this.length>x.length?this.clone().iadd(x):x.clone().iadd(this)},l.prototype.isub=function(x){if(x.negative!==0){x.negative=0;var T=this.iadd(x);return x.negative=1,T._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(x),this.negative=1,this._normSign();var M=this.cmp(x);if(M===0)return this.negative=0,this.length=1,this.words[0]=0,this;var O,z;M>0?(O=this,z=x):(O=x,z=this);for(var X=0,H=0;H<z.length;H++)T=(O.words[H]|0)-(z.words[H]|0)+X,X=T>>26,this.words[H]=T&67108863;for(;X!==0&&H<O.length;H++)T=(O.words[H]|0)+X,X=T>>26,this.words[H]=T&67108863;if(X===0&&H<O.length&&O!==this)for(;H<O.length;H++)this.words[H]=O.words[H];return this.length=Math.max(this.length,H),O!==this&&(this.negative=1),this._strip()},l.prototype.sub=function(x){return this.clone().isub(x)};function B(I,x,T){T.negative=x.negative^I.negative;var M=I.length+x.length|0;T.length=M,M=M-1|0;var O=I.words[0]|0,z=x.words[0]|0,X=O*z,H=X&67108863,P=X/67108864|0;T.words[0]=H;for(var S=1;S<M;S++){for(var F=P>>>26,ue=P&67108863,ee=Math.min(S,x.length-1),fe=Math.max(0,S-I.length+1);fe<=ee;fe++){var le=S-fe|0;O=I.words[le]|0,z=x.words[fe]|0,X=O*z+ue,F+=X/67108864|0,ue=X&67108863}T.words[S]=ue|0,P=F|0}return P!==0?T.words[S]=P|0:T.length--,T._strip()}var D=function(x,T,M){var O=x.words,z=T.words,X=M.words,H=0,P,S,F,ue=O[0]|0,ee=ue&8191,fe=ue>>>13,le=O[1]|0,ce=le&8191,pe=le>>>13,se=O[2]|0,de=se&8191,re=se>>>13,me=O[3]|0,te=me&8191,ve=me>>>13,Se=O[4]|0,be=Se&8191,_e=Se>>>13,ye=O[5]|0,$e=ye&8191,Ie=ye>>>13,Be=O[6]|0,Me=Be&8191,Fe=Be>>>13,Ve=O[7]|0,Oe=Ve&8191,ge=Ve>>>13,ie=O[8]|0,he=ie&8191,we=ie>>>13,Re=O[9]|0,De=Re&8191,Le=Re>>>13,tt=z[0]|0,We=tt&8191,Ge=tt>>>13,_t=z[1]|0,rt=_t&8191,ot=_t>>>13,Rt=z[2]|0,xt=Rt&8191,ht=Rt>>>13,Tt=z[3]|0,dt=Tt&8191,it=Tt>>>13,Ct=z[4]|0,pt=Ct&8191,at=Ct>>>13,kt=z[5]|0,mt=kt&8191,nt=kt>>>13,Bt=z[6]|0,Ee=Bt&8191,ke=Bt>>>13,Pe=z[7]|0,ne=Pe&8191,xe=Pe>>>13,Te=z[8]|0,Ae=Te&8191,Ce=Te>>>13,Ne=z[9]|0,Ue=Ne&8191,je=Ne>>>13;M.negative=x.negative^T.negative,M.length=19,P=Math.imul(ee,We),S=Math.imul(ee,Ge),S=S+Math.imul(fe,We)|0,F=Math.imul(fe,Ge);var Ke=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,P=Math.imul(ce,We),S=Math.imul(ce,Ge),S=S+Math.imul(pe,We)|0,F=Math.imul(pe,Ge),P=P+Math.imul(ee,rt)|0,S=S+Math.imul(ee,ot)|0,S=S+Math.imul(fe,rt)|0,F=F+Math.imul(fe,ot)|0;var He=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(He>>>26)|0,He&=67108863,P=Math.imul(de,We),S=Math.imul(de,Ge),S=S+Math.imul(re,We)|0,F=Math.imul(re,Ge),P=P+Math.imul(ce,rt)|0,S=S+Math.imul(ce,ot)|0,S=S+Math.imul(pe,rt)|0,F=F+Math.imul(pe,ot)|0,P=P+Math.imul(ee,xt)|0,S=S+Math.imul(ee,ht)|0,S=S+Math.imul(fe,xt)|0,F=F+Math.imul(fe,ht)|0;var ze=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(ze>>>26)|0,ze&=67108863,P=Math.imul(te,We),S=Math.imul(te,Ge),S=S+Math.imul(ve,We)|0,F=Math.imul(ve,Ge),P=P+Math.imul(de,rt)|0,S=S+Math.imul(de,ot)|0,S=S+Math.imul(re,rt)|0,F=F+Math.imul(re,ot)|0,P=P+Math.imul(ce,xt)|0,S=S+Math.imul(ce,ht)|0,S=S+Math.imul(pe,xt)|0,F=F+Math.imul(pe,ht)|0,P=P+Math.imul(ee,dt)|0,S=S+Math.imul(ee,it)|0,S=S+Math.imul(fe,dt)|0,F=F+Math.imul(fe,it)|0;var Ye=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ye>>>26)|0,Ye&=67108863,P=Math.imul(be,We),S=Math.imul(be,Ge),S=S+Math.imul(_e,We)|0,F=Math.imul(_e,Ge),P=P+Math.imul(te,rt)|0,S=S+Math.imul(te,ot)|0,S=S+Math.imul(ve,rt)|0,F=F+Math.imul(ve,ot)|0,P=P+Math.imul(de,xt)|0,S=S+Math.imul(de,ht)|0,S=S+Math.imul(re,xt)|0,F=F+Math.imul(re,ht)|0,P=P+Math.imul(ce,dt)|0,S=S+Math.imul(ce,it)|0,S=S+Math.imul(pe,dt)|0,F=F+Math.imul(pe,it)|0,P=P+Math.imul(ee,pt)|0,S=S+Math.imul(ee,at)|0,S=S+Math.imul(fe,pt)|0,F=F+Math.imul(fe,at)|0;var Qe=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,P=Math.imul($e,We),S=Math.imul($e,Ge),S=S+Math.imul(Ie,We)|0,F=Math.imul(Ie,Ge),P=P+Math.imul(be,rt)|0,S=S+Math.imul(be,ot)|0,S=S+Math.imul(_e,rt)|0,F=F+Math.imul(_e,ot)|0,P=P+Math.imul(te,xt)|0,S=S+Math.imul(te,ht)|0,S=S+Math.imul(ve,xt)|0,F=F+Math.imul(ve,ht)|0,P=P+Math.imul(de,dt)|0,S=S+Math.imul(de,it)|0,S=S+Math.imul(re,dt)|0,F=F+Math.imul(re,it)|0,P=P+Math.imul(ce,pt)|0,S=S+Math.imul(ce,at)|0,S=S+Math.imul(pe,pt)|0,F=F+Math.imul(pe,at)|0,P=P+Math.imul(ee,mt)|0,S=S+Math.imul(ee,nt)|0,S=S+Math.imul(fe,mt)|0,F=F+Math.imul(fe,nt)|0;var st=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(st>>>26)|0,st&=67108863,P=Math.imul(Me,We),S=Math.imul(Me,Ge),S=S+Math.imul(Fe,We)|0,F=Math.imul(Fe,Ge),P=P+Math.imul($e,rt)|0,S=S+Math.imul($e,ot)|0,S=S+Math.imul(Ie,rt)|0,F=F+Math.imul(Ie,ot)|0,P=P+Math.imul(be,xt)|0,S=S+Math.imul(be,ht)|0,S=S+Math.imul(_e,xt)|0,F=F+Math.imul(_e,ht)|0,P=P+Math.imul(te,dt)|0,S=S+Math.imul(te,it)|0,S=S+Math.imul(ve,dt)|0,F=F+Math.imul(ve,it)|0,P=P+Math.imul(de,pt)|0,S=S+Math.imul(de,at)|0,S=S+Math.imul(re,pt)|0,F=F+Math.imul(re,at)|0,P=P+Math.imul(ce,mt)|0,S=S+Math.imul(ce,nt)|0,S=S+Math.imul(pe,mt)|0,F=F+Math.imul(pe,nt)|0,P=P+Math.imul(ee,Ee)|0,S=S+Math.imul(ee,ke)|0,S=S+Math.imul(fe,Ee)|0,F=F+Math.imul(fe,ke)|0;var Ze=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Ze>>>26)|0,Ze&=67108863,P=Math.imul(Oe,We),S=Math.imul(Oe,Ge),S=S+Math.imul(ge,We)|0,F=Math.imul(ge,Ge),P=P+Math.imul(Me,rt)|0,S=S+Math.imul(Me,ot)|0,S=S+Math.imul(Fe,rt)|0,F=F+Math.imul(Fe,ot)|0,P=P+Math.imul($e,xt)|0,S=S+Math.imul($e,ht)|0,S=S+Math.imul(Ie,xt)|0,F=F+Math.imul(Ie,ht)|0,P=P+Math.imul(be,dt)|0,S=S+Math.imul(be,it)|0,S=S+Math.imul(_e,dt)|0,F=F+Math.imul(_e,it)|0,P=P+Math.imul(te,pt)|0,S=S+Math.imul(te,at)|0,S=S+Math.imul(ve,pt)|0,F=F+Math.imul(ve,at)|0,P=P+Math.imul(de,mt)|0,S=S+Math.imul(de,nt)|0,S=S+Math.imul(re,mt)|0,F=F+Math.imul(re,nt)|0,P=P+Math.imul(ce,Ee)|0,S=S+Math.imul(ce,ke)|0,S=S+Math.imul(pe,Ee)|0,F=F+Math.imul(pe,ke)|0,P=P+Math.imul(ee,ne)|0,S=S+Math.imul(ee,xe)|0,S=S+Math.imul(fe,ne)|0,F=F+Math.imul(fe,xe)|0;var et=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(et>>>26)|0,et&=67108863,P=Math.imul(he,We),S=Math.imul(he,Ge),S=S+Math.imul(we,We)|0,F=Math.imul(we,Ge),P=P+Math.imul(Oe,rt)|0,S=S+Math.imul(Oe,ot)|0,S=S+Math.imul(ge,rt)|0,F=F+Math.imul(ge,ot)|0,P=P+Math.imul(Me,xt)|0,S=S+Math.imul(Me,ht)|0,S=S+Math.imul(Fe,xt)|0,F=F+Math.imul(Fe,ht)|0,P=P+Math.imul($e,dt)|0,S=S+Math.imul($e,it)|0,S=S+Math.imul(Ie,dt)|0,F=F+Math.imul(Ie,it)|0,P=P+Math.imul(be,pt)|0,S=S+Math.imul(be,at)|0,S=S+Math.imul(_e,pt)|0,F=F+Math.imul(_e,at)|0,P=P+Math.imul(te,mt)|0,S=S+Math.imul(te,nt)|0,S=S+Math.imul(ve,mt)|0,F=F+Math.imul(ve,nt)|0,P=P+Math.imul(de,Ee)|0,S=S+Math.imul(de,ke)|0,S=S+Math.imul(re,Ee)|0,F=F+Math.imul(re,ke)|0,P=P+Math.imul(ce,ne)|0,S=S+Math.imul(ce,xe)|0,S=S+Math.imul(pe,ne)|0,F=F+Math.imul(pe,xe)|0,P=P+Math.imul(ee,Ae)|0,S=S+Math.imul(ee,Ce)|0,S=S+Math.imul(fe,Ae)|0,F=F+Math.imul(fe,Ce)|0;var vt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(vt>>>26)|0,vt&=67108863,P=Math.imul(De,We),S=Math.imul(De,Ge),S=S+Math.imul(Le,We)|0,F=Math.imul(Le,Ge),P=P+Math.imul(he,rt)|0,S=S+Math.imul(he,ot)|0,S=S+Math.imul(we,rt)|0,F=F+Math.imul(we,ot)|0,P=P+Math.imul(Oe,xt)|0,S=S+Math.imul(Oe,ht)|0,S=S+Math.imul(ge,xt)|0,F=F+Math.imul(ge,ht)|0,P=P+Math.imul(Me,dt)|0,S=S+Math.imul(Me,it)|0,S=S+Math.imul(Fe,dt)|0,F=F+Math.imul(Fe,it)|0,P=P+Math.imul($e,pt)|0,S=S+Math.imul($e,at)|0,S=S+Math.imul(Ie,pt)|0,F=F+Math.imul(Ie,at)|0,P=P+Math.imul(be,mt)|0,S=S+Math.imul(be,nt)|0,S=S+Math.imul(_e,mt)|0,F=F+Math.imul(_e,nt)|0,P=P+Math.imul(te,Ee)|0,S=S+Math.imul(te,ke)|0,S=S+Math.imul(ve,Ee)|0,F=F+Math.imul(ve,ke)|0,P=P+Math.imul(de,ne)|0,S=S+Math.imul(de,xe)|0,S=S+Math.imul(re,ne)|0,F=F+Math.imul(re,xe)|0,P=P+Math.imul(ce,Ae)|0,S=S+Math.imul(ce,Ce)|0,S=S+Math.imul(pe,Ae)|0,F=F+Math.imul(pe,Ce)|0,P=P+Math.imul(ee,Ue)|0,S=S+Math.imul(ee,je)|0,S=S+Math.imul(fe,Ue)|0,F=F+Math.imul(fe,je)|0;var yt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(yt>>>26)|0,yt&=67108863,P=Math.imul(De,rt),S=Math.imul(De,ot),S=S+Math.imul(Le,rt)|0,F=Math.imul(Le,ot),P=P+Math.imul(he,xt)|0,S=S+Math.imul(he,ht)|0,S=S+Math.imul(we,xt)|0,F=F+Math.imul(we,ht)|0,P=P+Math.imul(Oe,dt)|0,S=S+Math.imul(Oe,it)|0,S=S+Math.imul(ge,dt)|0,F=F+Math.imul(ge,it)|0,P=P+Math.imul(Me,pt)|0,S=S+Math.imul(Me,at)|0,S=S+Math.imul(Fe,pt)|0,F=F+Math.imul(Fe,at)|0,P=P+Math.imul($e,mt)|0,S=S+Math.imul($e,nt)|0,S=S+Math.imul(Ie,mt)|0,F=F+Math.imul(Ie,nt)|0,P=P+Math.imul(be,Ee)|0,S=S+Math.imul(be,ke)|0,S=S+Math.imul(_e,Ee)|0,F=F+Math.imul(_e,ke)|0,P=P+Math.imul(te,ne)|0,S=S+Math.imul(te,xe)|0,S=S+Math.imul(ve,ne)|0,F=F+Math.imul(ve,xe)|0,P=P+Math.imul(de,Ae)|0,S=S+Math.imul(de,Ce)|0,S=S+Math.imul(re,Ae)|0,F=F+Math.imul(re,Ce)|0,P=P+Math.imul(ce,Ue)|0,S=S+Math.imul(ce,je)|0,S=S+Math.imul(pe,Ue)|0,F=F+Math.imul(pe,je)|0;var wt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(wt>>>26)|0,wt&=67108863,P=Math.imul(De,xt),S=Math.imul(De,ht),S=S+Math.imul(Le,xt)|0,F=Math.imul(Le,ht),P=P+Math.imul(he,dt)|0,S=S+Math.imul(he,it)|0,S=S+Math.imul(we,dt)|0,F=F+Math.imul(we,it)|0,P=P+Math.imul(Oe,pt)|0,S=S+Math.imul(Oe,at)|0,S=S+Math.imul(ge,pt)|0,F=F+Math.imul(ge,at)|0,P=P+Math.imul(Me,mt)|0,S=S+Math.imul(Me,nt)|0,S=S+Math.imul(Fe,mt)|0,F=F+Math.imul(Fe,nt)|0,P=P+Math.imul($e,Ee)|0,S=S+Math.imul($e,ke)|0,S=S+Math.imul(Ie,Ee)|0,F=F+Math.imul(Ie,ke)|0,P=P+Math.imul(be,ne)|0,S=S+Math.imul(be,xe)|0,S=S+Math.imul(_e,ne)|0,F=F+Math.imul(_e,xe)|0,P=P+Math.imul(te,Ae)|0,S=S+Math.imul(te,Ce)|0,S=S+Math.imul(ve,Ae)|0,F=F+Math.imul(ve,Ce)|0,P=P+Math.imul(de,Ue)|0,S=S+Math.imul(de,je)|0,S=S+Math.imul(re,Ue)|0,F=F+Math.imul(re,je)|0;var bt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(bt>>>26)|0,bt&=67108863,P=Math.imul(De,dt),S=Math.imul(De,it),S=S+Math.imul(Le,dt)|0,F=Math.imul(Le,it),P=P+Math.imul(he,pt)|0,S=S+Math.imul(he,at)|0,S=S+Math.imul(we,pt)|0,F=F+Math.imul(we,at)|0,P=P+Math.imul(Oe,mt)|0,S=S+Math.imul(Oe,nt)|0,S=S+Math.imul(ge,mt)|0,F=F+Math.imul(ge,nt)|0,P=P+Math.imul(Me,Ee)|0,S=S+Math.imul(Me,ke)|0,S=S+Math.imul(Fe,Ee)|0,F=F+Math.imul(Fe,ke)|0,P=P+Math.imul($e,ne)|0,S=S+Math.imul($e,xe)|0,S=S+Math.imul(Ie,ne)|0,F=F+Math.imul(Ie,xe)|0,P=P+Math.imul(be,Ae)|0,S=S+Math.imul(be,Ce)|0,S=S+Math.imul(_e,Ae)|0,F=F+Math.imul(_e,Ce)|0,P=P+Math.imul(te,Ue)|0,S=S+Math.imul(te,je)|0,S=S+Math.imul(ve,Ue)|0,F=F+Math.imul(ve,je)|0;var $t=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+($t>>>26)|0,$t&=67108863,P=Math.imul(De,pt),S=Math.imul(De,at),S=S+Math.imul(Le,pt)|0,F=Math.imul(Le,at),P=P+Math.imul(he,mt)|0,S=S+Math.imul(he,nt)|0,S=S+Math.imul(we,mt)|0,F=F+Math.imul(we,nt)|0,P=P+Math.imul(Oe,Ee)|0,S=S+Math.imul(Oe,ke)|0,S=S+Math.imul(ge,Ee)|0,F=F+Math.imul(ge,ke)|0,P=P+Math.imul(Me,ne)|0,S=S+Math.imul(Me,xe)|0,S=S+Math.imul(Fe,ne)|0,F=F+Math.imul(Fe,xe)|0,P=P+Math.imul($e,Ae)|0,S=S+Math.imul($e,Ce)|0,S=S+Math.imul(Ie,Ae)|0,F=F+Math.imul(Ie,Ce)|0,P=P+Math.imul(be,Ue)|0,S=S+Math.imul(be,je)|0,S=S+Math.imul(_e,Ue)|0,F=F+Math.imul(_e,je)|0;var At=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(At>>>26)|0,At&=67108863,P=Math.imul(De,mt),S=Math.imul(De,nt),S=S+Math.imul(Le,mt)|0,F=Math.imul(Le,nt),P=P+Math.imul(he,Ee)|0,S=S+Math.imul(he,ke)|0,S=S+Math.imul(we,Ee)|0,F=F+Math.imul(we,ke)|0,P=P+Math.imul(Oe,ne)|0,S=S+Math.imul(Oe,xe)|0,S=S+Math.imul(ge,ne)|0,F=F+Math.imul(ge,xe)|0,P=P+Math.imul(Me,Ae)|0,S=S+Math.imul(Me,Ce)|0,S=S+Math.imul(Fe,Ae)|0,F=F+Math.imul(Fe,Ce)|0,P=P+Math.imul($e,Ue)|0,S=S+Math.imul($e,je)|0,S=S+Math.imul(Ie,Ue)|0,F=F+Math.imul(Ie,je)|0;var Et=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Et>>>26)|0,Et&=67108863,P=Math.imul(De,Ee),S=Math.imul(De,ke),S=S+Math.imul(Le,Ee)|0,F=Math.imul(Le,ke),P=P+Math.imul(he,ne)|0,S=S+Math.imul(he,xe)|0,S=S+Math.imul(we,ne)|0,F=F+Math.imul(we,xe)|0,P=P+Math.imul(Oe,Ae)|0,S=S+Math.imul(Oe,Ce)|0,S=S+Math.imul(ge,Ae)|0,F=F+Math.imul(ge,Ce)|0,P=P+Math.imul(Me,Ue)|0,S=S+Math.imul(Me,je)|0,S=S+Math.imul(Fe,Ue)|0,F=F+Math.imul(Fe,je)|0;var Xe=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Xe>>>26)|0,Xe&=67108863,P=Math.imul(De,ne),S=Math.imul(De,xe),S=S+Math.imul(Le,ne)|0,F=Math.imul(Le,xe),P=P+Math.imul(he,Ae)|0,S=S+Math.imul(he,Ce)|0,S=S+Math.imul(we,Ae)|0,F=F+Math.imul(we,Ce)|0,P=P+Math.imul(Oe,Ue)|0,S=S+Math.imul(Oe,je)|0,S=S+Math.imul(ge,Ue)|0,F=F+Math.imul(ge,je)|0;var Je=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(Je>>>26)|0,Je&=67108863,P=Math.imul(De,Ae),S=Math.imul(De,Ce),S=S+Math.imul(Le,Ae)|0,F=Math.imul(Le,Ce),P=P+Math.imul(he,Ue)|0,S=S+Math.imul(he,je)|0,S=S+Math.imul(we,Ue)|0,F=F+Math.imul(we,je)|0;var lt=(H+P|0)+((S&8191)<<13)|0;H=(F+(S>>>13)|0)+(lt>>>26)|0,lt&=67108863,P=Math.imul(De,Ue),S=Math.imul(De,je),S=S+Math.imul(Le,Ue)|0,F=Math.imul(Le,je);var ct=(H+P|0)+((S&8191)<<13)|0;return H=(F+(S>>>13)|0)+(ct>>>26)|0,ct&=67108863,X[0]=Ke,X[1]=He,X[2]=ze,X[3]=Ye,X[4]=Qe,X[5]=st,X[6]=Ze,X[7]=et,X[8]=vt,X[9]=yt,X[10]=wt,X[11]=bt,X[12]=$t,X[13]=At,X[14]=Et,X[15]=Xe,X[16]=Je,X[17]=lt,X[18]=ct,H!==0&&(X[19]=H,M.length++),M};Math.imul||(D=B);function q(I,x,T){T.negative=x.negative^I.negative,T.length=I.length+x.length;for(var M=0,O=0,z=0;z<T.length-1;z++){var X=O;O=0;for(var H=M&67108863,P=Math.min(z,x.length-1),S=Math.max(0,z-I.length+1);S<=P;S++){var F=z-S,ue=I.words[F]|0,ee=x.words[S]|0,fe=ue*ee,le=fe&67108863;X=X+(fe/67108864|0)|0,le=le+H|0,H=le&67108863,X=X+(le>>>26)|0,O+=X>>>26,X&=67108863}T.words[z]=H,M=X,X=O}return M!==0?T.words[z]=M:T.length--,T._strip()}function j(I,x,T){return q(I,x,T)}l.prototype.mulTo=function(x,T){var M,O=this.length+x.length;return this.length===10&&x.length===10?M=D(this,x,T):O<63?M=B(this,x,T):O<1024?M=q(this,x,T):M=j(this,x,T),M},l.prototype.mul=function(x){var T=new l(null);return T.words=new Array(this.length+x.length),this.mulTo(x,T)},l.prototype.mulf=function(x){var T=new l(null);return T.words=new Array(this.length+x.length),j(this,x,T)},l.prototype.imul=function(x){return this.clone().mulTo(x,this)},l.prototype.imuln=function(x){var T=x<0;T&&(x=-x),a(typeof x=="number"),a(x<67108864);for(var M=0,O=0;O<this.length;O++){var z=(this.words[O]|0)*x,X=(z&67108863)+(M&67108863);M>>=26,M+=z/67108864|0,M+=X>>>26,this.words[O]=X&67108863}return M!==0&&(this.words[O]=M,this.length++),T?this.ineg():this},l.prototype.muln=function(x){return this.clone().imuln(x)},l.prototype.sqr=function(){return this.mul(this)},l.prototype.isqr=function(){return this.imul(this.clone())},l.prototype.pow=function(x){var T=k(x);if(T.length===0)return new l(1);for(var M=this,O=0;O<T.length&&T[O]===0;O++,M=M.sqr());if(++O<T.length)for(var z=M.sqr();O<T.length;O++,z=z.sqr())T[O]!==0&&(M=M.mul(z));return M},l.prototype.iushln=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26,O=67108863>>>26-T<<26-T,z;if(T!==0){var X=0;for(z=0;z<this.length;z++){var H=this.words[z]&O,P=(this.words[z]|0)-H<<T;this.words[z]=P|X,X=H>>>26-T}X&&(this.words[z]=X,this.length++)}if(M!==0){for(z=this.length-1;z>=0;z--)this.words[z+M]=this.words[z];for(z=0;z<M;z++)this.words[z]=0;this.length+=M}return this._strip()},l.prototype.ishln=function(x){return a(this.negative===0),this.iushln(x)},l.prototype.iushrn=function(x,T,M){a(typeof x=="number"&&x>=0);var O;T?O=(T-T%26)/26:O=0;var z=x%26,X=Math.min((x-z)/26,this.length),H=67108863^67108863>>>z<<z,P=M;if(O-=X,O=Math.max(0,O),P){for(var S=0;S<X;S++)P.words[S]=this.words[S];P.length=X}if(X!==0)if(this.length>X)for(this.length-=X,S=0;S<this.length;S++)this.words[S]=this.words[S+X];else this.words[0]=0,this.length=1;var F=0;for(S=this.length-1;S>=0&&(F!==0||S>=O);S--){var ue=this.words[S]|0;this.words[S]=F<<26-z|ue>>>z,F=ue&H}return P&&F!==0&&(P.words[P.length++]=F),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},l.prototype.ishrn=function(x,T,M){return a(this.negative===0),this.iushrn(x,T,M)},l.prototype.shln=function(x){return this.clone().ishln(x)},l.prototype.ushln=function(x){return this.clone().iushln(x)},l.prototype.shrn=function(x){return this.clone().ishrn(x)},l.prototype.ushrn=function(x){return this.clone().iushrn(x)},l.prototype.testn=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26,O=1<<T;if(this.length<=M)return!1;var z=this.words[M];return!!(z&O)},l.prototype.imaskn=function(x){a(typeof x=="number"&&x>=0);var T=x%26,M=(x-T)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=M)return this;if(T!==0&&M++,this.length=Math.min(M,this.length),T!==0){var O=67108863^67108863>>>T<<T;this.words[this.length-1]&=O}return this._strip()},l.prototype.maskn=function(x){return this.clone().imaskn(x)},l.prototype.iaddn=function(x){return a(typeof x=="number"),a(x<67108864),x<0?this.isubn(-x):this.negative!==0?this.length===1&&(this.words[0]|0)<=x?(this.words[0]=x-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(x),this.negative=1,this):this._iaddn(x)},l.prototype._iaddn=function(x){this.words[0]+=x;for(var T=0;T<this.length&&this.words[T]>=67108864;T++)this.words[T]-=67108864,T===this.length-1?this.words[T+1]=1:this.words[T+1]++;return this.length=Math.max(this.length,T+1),this},l.prototype.isubn=function(x){if(a(typeof x=="number"),a(x<67108864),x<0)return this.iaddn(-x);if(this.negative!==0)return this.negative=0,this.iaddn(x),this.negative=1,this;if(this.words[0]-=x,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var T=0;T<this.length&&this.words[T]<0;T++)this.words[T]+=67108864,this.words[T+1]-=1;return this._strip()},l.prototype.addn=function(x){return this.clone().iaddn(x)},l.prototype.subn=function(x){return this.clone().isubn(x)},l.prototype.iabs=function(){return this.negative=0,this},l.prototype.abs=function(){return this.clone().iabs()},l.prototype._ishlnsubmul=function(x,T,M){var O=x.length+M,z;this._expand(O);var X,H=0;for(z=0;z<x.length;z++){X=(this.words[z+M]|0)+H;var P=(x.words[z]|0)*T;X-=P&67108863,H=(X>>26)-(P/67108864|0),this.words[z+M]=X&67108863}for(;z<this.length-M;z++)X=(this.words[z+M]|0)+H,H=X>>26,this.words[z+M]=X&67108863;if(H===0)return this._strip();for(a(H===-1),H=0,z=0;z<this.length;z++)X=-(this.words[z]|0)+H,H=X>>26,this.words[z]=X&67108863;return this.negative=1,this._strip()},l.prototype._wordDiv=function(x,T){var M=this.length-x.length,O=this.clone(),z=x,X=z.words[z.length-1]|0,H=this._countBits(X);M=26-H,M!==0&&(z=z.ushln(M),O.iushln(M),X=z.words[z.length-1]|0);var P=O.length-z.length,S;if(T!=="mod"){S=new l(null),S.length=P+1,S.words=new Array(S.length);for(var F=0;F<S.length;F++)S.words[F]=0}var ue=O.clone()._ishlnsubmul(z,1,P);ue.negative===0&&(O=ue,S&&(S.words[P]=1));for(var ee=P-1;ee>=0;ee--){var fe=(O.words[z.length+ee]|0)*67108864+(O.words[z.length+ee-1]|0);for(fe=Math.min(fe/X|0,67108863),O._ishlnsubmul(z,fe,ee);O.negative!==0;)fe--,O.negative=0,O._ishlnsubmul(z,1,ee),O.isZero()||(O.negative^=1);S&&(S.words[ee]=fe)}return S&&S._strip(),O._strip(),T!=="div"&&M!==0&&O.iushrn(M),{div:S||null,mod:O}},l.prototype.divmod=function(x,T,M){if(a(!x.isZero()),this.isZero())return{div:new l(0),mod:new l(0)};var O,z,X;return this.negative!==0&&x.negative===0?(X=this.neg().divmod(x,T),T!=="mod"&&(O=X.div.neg()),T!=="div"&&(z=X.mod.neg(),M&&z.negative!==0&&z.iadd(x)),{div:O,mod:z}):this.negative===0&&x.negative!==0?(X=this.divmod(x.neg(),T),T!=="mod"&&(O=X.div.neg()),{div:O,mod:X.mod}):this.negative&x.negative?(X=this.neg().divmod(x.neg(),T),T!=="div"&&(z=X.mod.neg(),M&&z.negative!==0&&z.isub(x)),{div:X.div,mod:z}):x.length>this.length||this.cmp(x)<0?{div:new l(0),mod:this}:x.length===1?T==="div"?{div:this.divn(x.words[0]),mod:null}:T==="mod"?{div:null,mod:new l(this.modrn(x.words[0]))}:{div:this.divn(x.words[0]),mod:new l(this.modrn(x.words[0]))}:this._wordDiv(x,T)},l.prototype.div=function(x){return this.divmod(x,"div",!1).div},l.prototype.mod=function(x){return this.divmod(x,"mod",!1).mod},l.prototype.umod=function(x){return this.divmod(x,"mod",!0).mod},l.prototype.divRound=function(x){var T=this.divmod(x);if(T.mod.isZero())return T.div;var M=T.div.negative!==0?T.mod.isub(x):T.mod,O=x.ushrn(1),z=x.andln(1),X=M.cmp(O);return X<0||z===1&&X===0?T.div:T.div.negative!==0?T.div.isubn(1):T.div.iaddn(1)},l.prototype.modrn=function(x){var T=x<0;T&&(x=-x),a(x<=67108863);for(var M=(1<<26)%x,O=0,z=this.length-1;z>=0;z--)O=(M*O+(this.words[z]|0))%x;return T?-O:O},l.prototype.modn=function(x){return this.modrn(x)},l.prototype.idivn=function(x){var T=x<0;T&&(x=-x),a(x<=67108863);for(var M=0,O=this.length-1;O>=0;O--){var z=(this.words[O]|0)+M*67108864;this.words[O]=z/x|0,M=z%x}return this._strip(),T?this.ineg():this},l.prototype.divn=function(x){return this.clone().idivn(x)},l.prototype.egcd=function(x){a(x.negative===0),a(!x.isZero());var T=this,M=x.clone();T.negative!==0?T=T.umod(x):T=T.clone();for(var O=new l(1),z=new l(0),X=new l(0),H=new l(1),P=0;T.isEven()&&M.isEven();)T.iushrn(1),M.iushrn(1),++P;for(var S=M.clone(),F=T.clone();!T.isZero();){for(var ue=0,ee=1;!(T.words[0]&ee)&&ue<26;++ue,ee<<=1);if(ue>0)for(T.iushrn(ue);ue-- >0;)(O.isOdd()||z.isOdd())&&(O.iadd(S),z.isub(F)),O.iushrn(1),z.iushrn(1);for(var fe=0,le=1;!(M.words[0]&le)&&fe<26;++fe,le<<=1);if(fe>0)for(M.iushrn(fe);fe-- >0;)(X.isOdd()||H.isOdd())&&(X.iadd(S),H.isub(F)),X.iushrn(1),H.iushrn(1);T.cmp(M)>=0?(T.isub(M),O.isub(X),z.isub(H)):(M.isub(T),X.isub(O),H.isub(z))}return{a:X,b:H,gcd:M.iushln(P)}},l.prototype._invmp=function(x){a(x.negative===0),a(!x.isZero());var T=this,M=x.clone();T.negative!==0?T=T.umod(x):T=T.clone();for(var O=new l(1),z=new l(0),X=M.clone();T.cmpn(1)>0&&M.cmpn(1)>0;){for(var H=0,P=1;!(T.words[0]&P)&&H<26;++H,P<<=1);if(H>0)for(T.iushrn(H);H-- >0;)O.isOdd()&&O.iadd(X),O.iushrn(1);for(var S=0,F=1;!(M.words[0]&F)&&S<26;++S,F<<=1);if(S>0)for(M.iushrn(S);S-- >0;)z.isOdd()&&z.iadd(X),z.iushrn(1);T.cmp(M)>=0?(T.isub(M),O.isub(z)):(M.isub(T),z.isub(O))}var ue;return T.cmpn(1)===0?ue=O:ue=z,ue.cmpn(0)<0&&ue.iadd(x),ue},l.prototype.gcd=function(x){if(this.isZero())return x.abs();if(x.isZero())return this.abs();var T=this.clone(),M=x.clone();T.negative=0,M.negative=0;for(var O=0;T.isEven()&&M.isEven();O++)T.iushrn(1),M.iushrn(1);do{for(;T.isEven();)T.iushrn(1);for(;M.isEven();)M.iushrn(1);var z=T.cmp(M);if(z<0){var X=T;T=M,M=X}else if(z===0||M.cmpn(1)===0)break;T.isub(M)}while(!0);return M.iushln(O)},l.prototype.invm=function(x){return this.egcd(x).a.umod(x)},l.prototype.isEven=function(){return(this.words[0]&1)===0},l.prototype.isOdd=function(){return(this.words[0]&1)===1},l.prototype.andln=function(x){return this.words[0]&x},l.prototype.bincn=function(x){a(typeof x=="number");var T=x%26,M=(x-T)/26,O=1<<T;if(this.length<=M)return this._expand(M+1),this.words[M]|=O,this;for(var z=O,X=M;z!==0&&X<this.length;X++){var H=this.words[X]|0;H+=z,z=H>>>26,H&=67108863,this.words[X]=H}return z!==0&&(this.words[X]=z,this.length++),this},l.prototype.isZero=function(){return this.length===1&&this.words[0]===0},l.prototype.cmpn=function(x){var T=x<0;if(this.negative!==0&&!T)return-1;if(this.negative===0&&T)return 1;this._strip();var M;if(this.length>1)M=1;else{T&&(x=-x),a(x<=67108863,"Number is too big");var O=this.words[0]|0;M=O===x?0:O<x?-1:1}return this.negative!==0?-M|0:M},l.prototype.cmp=function(x){if(this.negative!==0&&x.negative===0)return-1;if(this.negative===0&&x.negative!==0)return 1;var T=this.ucmp(x);return this.negative!==0?-T|0:T},l.prototype.ucmp=function(x){if(this.length>x.length)return 1;if(this.length<x.length)return-1;for(var T=0,M=this.length-1;M>=0;M--){var O=this.words[M]|0,z=x.words[M]|0;if(O!==z){O<z?T=-1:O>z&&(T=1);break}}return T},l.prototype.gtn=function(x){return this.cmpn(x)===1},l.prototype.gt=function(x){return this.cmp(x)===1},l.prototype.gten=function(x){return this.cmpn(x)>=0},l.prototype.gte=function(x){return this.cmp(x)>=0},l.prototype.ltn=function(x){return this.cmpn(x)===-1},l.prototype.lt=function(x){return this.cmp(x)===-1},l.prototype.lten=function(x){return this.cmpn(x)<=0},l.prototype.lte=function(x){return this.cmp(x)<=0},l.prototype.eqn=function(x){return this.cmpn(x)===0},l.prototype.eq=function(x){return this.cmp(x)===0},l.red=function(x){return new ae(x)},l.prototype.toRed=function(x){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),x.convertTo(this)._forceRed(x)},l.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},l.prototype._forceRed=function(x){return this.red=x,this},l.prototype.forceRed=function(x){return a(!this.red,"Already a number in reduction context"),this._forceRed(x)},l.prototype.redAdd=function(x){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,x)},l.prototype.redIAdd=function(x){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,x)},l.prototype.redSub=function(x){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,x)},l.prototype.redISub=function(x){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,x)},l.prototype.redShl=function(x){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,x)},l.prototype.redMul=function(x){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.mul(this,x)},l.prototype.redIMul=function(x){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,x),this.red.imul(this,x)},l.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},l.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},l.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},l.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},l.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},l.prototype.redPow=function(x){return a(this.red&&!x.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,x)};var J={k256:null,p224:null,p192:null,p25519:null};function Y(I,x){this.name=I,this.p=new l(x,16),this.n=this.p.bitLength(),this.k=new l(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var x=new l(null);return x.words=new Array(Math.ceil(this.n/13)),x},Y.prototype.ireduce=function(x){var T=x,M;do this.split(T,this.tmp),T=this.imulK(T),T=T.iadd(this.tmp),M=T.bitLength();while(M>this.n);var O=M<this.n?-1:T.ucmp(this.p);return O===0?(T.words[0]=0,T.length=1):O>0?T.isub(this.p):T.strip!==void 0?T.strip():T._strip(),T},Y.prototype.split=function(x,T){x.iushrn(this.n,0,T)},Y.prototype.imulK=function(x){return x.imul(this.k)};function L(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}o(L,Y),L.prototype.split=function(x,T){for(var M=4194303,O=Math.min(x.length,9),z=0;z<O;z++)T.words[z]=x.words[z];if(T.length=O,x.length<=9){x.words[0]=0,x.length=1;return}var X=x.words[9];for(T.words[T.length++]=X&M,z=10;z<x.length;z++){var H=x.words[z]|0;x.words[z-10]=(H&M)<<4|X>>>22,X=H}X>>>=22,x.words[z-10]=X,X===0&&x.length>10?x.length-=10:x.length-=9},L.prototype.imulK=function(x){x.words[x.length]=0,x.words[x.length+1]=0,x.length+=2;for(var T=0,M=0;M<x.length;M++){var O=x.words[M]|0;T+=O*977,x.words[M]=T&67108863,T=O*64+(T/67108864|0)}return x.words[x.length-1]===0&&(x.length--,x.words[x.length-1]===0&&x.length--),x};function Z(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}o(Z,Y);function Q(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}o(Q,Y);function oe(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}o(oe,Y),oe.prototype.imulK=function(x){for(var T=0,M=0;M<x.length;M++){var O=(x.words[M]|0)*19+T,z=O&67108863;O>>>=26,x.words[M]=z,T=O}return T!==0&&(x.words[x.length++]=T),x},l._prime=function(x){if(J[x])return J[x];var T;if(x==="k256")T=new L;else if(x==="p224")T=new Z;else if(x==="p192")T=new Q;else if(x==="p25519")T=new oe;else throw new Error("Unknown prime "+x);return J[x]=T,T};function ae(I){if(typeof I=="string"){var x=l._prime(I);this.m=x.p,this.prime=x}else a(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}ae.prototype._verify1=function(x){a(x.negative===0,"red works only with positives"),a(x.red,"red works only with red numbers")},ae.prototype._verify2=function(x,T){a((x.negative|T.negative)===0,"red works only with positives"),a(x.red&&x.red===T.red,"red works only with red numbers")},ae.prototype.imod=function(x){return this.prime?this.prime.ireduce(x)._forceRed(this):(b(x,x.umod(this.m)._forceRed(this)),x)},ae.prototype.neg=function(x){return x.isZero()?x.clone():this.m.sub(x)._forceRed(this)},ae.prototype.add=function(x,T){this._verify2(x,T);var M=x.add(T);return M.cmp(this.m)>=0&&M.isub(this.m),M._forceRed(this)},ae.prototype.iadd=function(x,T){this._verify2(x,T);var M=x.iadd(T);return M.cmp(this.m)>=0&&M.isub(this.m),M},ae.prototype.sub=function(x,T){this._verify2(x,T);var M=x.sub(T);return M.cmpn(0)<0&&M.iadd(this.m),M._forceRed(this)},ae.prototype.isub=function(x,T){this._verify2(x,T);var M=x.isub(T);return M.cmpn(0)<0&&M.iadd(this.m),M},ae.prototype.shl=function(x,T){return this._verify1(x),this.imod(x.ushln(T))},ae.prototype.imul=function(x,T){return this._verify2(x,T),this.imod(x.imul(T))},ae.prototype.mul=function(x,T){return this._verify2(x,T),this.imod(x.mul(T))},ae.prototype.isqr=function(x){return this.imul(x,x.clone())},ae.prototype.sqr=function(x){return this.mul(x,x)},ae.prototype.sqrt=function(x){if(x.isZero())return x.clone();var T=this.m.andln(3);if(a(T%2===1),T===3){var M=this.m.add(new l(1)).iushrn(2);return this.pow(x,M)}for(var O=this.m.subn(1),z=0;!O.isZero()&&O.andln(1)===0;)z++,O.iushrn(1);a(!O.isZero());var X=new l(1).toRed(this),H=X.redNeg(),P=this.m.subn(1).iushrn(1),S=this.m.bitLength();for(S=new l(2*S*S).toRed(this);this.pow(S,P).cmp(H)!==0;)S.redIAdd(H);for(var F=this.pow(S,O),ue=this.pow(x,O.addn(1).iushrn(1)),ee=this.pow(x,O),fe=z;ee.cmp(X)!==0;){for(var le=ee,ce=0;le.cmp(X)!==0;ce++)le=le.redSqr();a(ce<fe);var pe=this.pow(F,new l(1).iushln(fe-ce-1));ue=ue.redMul(pe),F=pe.redSqr(),ee=ee.redMul(F),fe=ce}return ue},ae.prototype.invm=function(x){var T=x._invmp(this.m);return T.negative!==0?(T.negative=0,this.imod(T).redNeg()):this.imod(T)},ae.prototype.pow=function(x,T){if(T.isZero())return new l(1).toRed(this);if(T.cmpn(1)===0)return x.clone();var M=4,O=new Array(1<<M);O[0]=new l(1).toRed(this),O[1]=x;for(var z=2;z<O.length;z++)O[z]=this.mul(O[z-1],x);var X=O[0],H=0,P=0,S=T.bitLength()%26;for(S===0&&(S=26),z=T.length-1;z>=0;z--){for(var F=T.words[z],ue=S-1;ue>=0;ue--){var ee=F>>ue&1;if(X!==O[0]&&(X=this.sqr(X)),ee===0&&H===0){P=0;continue}H<<=1,H|=ee,P++,!(P!==M&&(z!==0||ue!==0))&&(X=this.mul(X,O[H]),P=0,H=0)}S=26}return X},ae.prototype.convertTo=function(x){var T=x.umod(this.m);return T===x?T.clone():T},ae.prototype.convertFrom=function(x){var T=x.clone();return T.red=null,T},l.mont=function(x){return new U(x)};function U(I){ae.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new l(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}o(U,ae),U.prototype.convertTo=function(x){return this.imod(x.ushln(this.shift))},U.prototype.convertFrom=function(x){var T=this.imod(x.mul(this.rinv));return T.red=null,T},U.prototype.imul=function(x,T){if(x.isZero()||T.isZero())return x.words[0]=0,x.length=1,x;var M=x.imul(T),O=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=M.isub(O).iushrn(this.shift),X=z;return z.cmp(this.m)>=0?X=z.isub(this.m):z.cmpn(0)<0&&(X=z.iadd(this.m)),X._forceRed(this)},U.prototype.mul=function(x,T){if(x.isZero()||T.isZero())return new l(0)._forceRed(this);var M=x.mul(T),O=M.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),z=M.isub(O).iushrn(this.shift),X=z;return z.cmp(this.m)>=0?X=z.isub(this.m):z.cmpn(0)<0&&(X=z.iadd(this.m)),X._forceRed(this)},U.prototype.invm=function(x){var T=this.imod(x._invmp(this.m).mul(this.r2));return T._forceRed(this)}})(t,commonjsGlobal)})(bn);const BN=bnExports;function createCommonjsModule(t,e,n){return n={path:e,exports:{},require:function(a,o){return commonjsRequire(a,o??n.path)}},t(n,n.exports),n.exports}function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var minimalisticAssert=assert$2;function assert$2(t,e){if(!t)throw new Error(e||"Assertion failed")}assert$2.equal=function t(e,n,a){if(e!=n)throw new Error(a||"Assertion failed: "+e+" != "+n)};var utils_1=createCommonjsModule(function(t,e){var n=e;function a(u,d){if(Array.isArray(u))return u.slice();if(!u)return[];var m=[];if(typeof u!="string"){for(var y=0;y<u.length;y++)m[y]=u[y]|0;return m}if(d==="hex"){u=u.replace(/[^a-z0-9]+/ig,""),u.length%2!==0&&(u="0"+u);for(var y=0;y<u.length;y+=2)m.push(parseInt(u[y]+u[y+1],16))}else for(var y=0;y<u.length;y++){var b=u.charCodeAt(y),_=b>>8,w=b&255;_?m.push(_,w):m.push(w)}return m}n.toArray=a;function o(u){return u.length===1?"0"+u:u}n.zero2=o;function l(u){for(var d="",m=0;m<u.length;m++)d+=o(u[m].toString(16));return d}n.toHex=l,n.encode=function(d,m){return m==="hex"?l(d):d}}),utils_1$1=createCommonjsModule(function(t,e){var n=e;n.assert=minimalisticAssert,n.toArray=utils_1.toArray,n.zero2=utils_1.zero2,n.toHex=utils_1.toHex,n.encode=utils_1.encode;function a(m,y,b){var _=new Array(Math.max(m.bitLength(),b)+1);_.fill(0);for(var w=1<<y+1,E=m.clone(),A=0;A<_.length;A++){var C,k=E.andln(w-1);E.isOdd()?(k>(w>>1)-1?C=(w>>1)-k:C=k,E.isubn(C)):C=0,_[A]=C,E.iushrn(1)}return _}n.getNAF=a;function o(m,y){var b=[[],[]];m=m.clone(),y=y.clone();for(var _=0,w=0,E;m.cmpn(-_)>0||y.cmpn(-w)>0;){var A=m.andln(3)+_&3,C=y.andln(3)+w&3;A===3&&(A=-1),C===3&&(C=-1);var k;A&1?(E=m.andln(7)+_&7,(E===3||E===5)&&C===2?k=-A:k=A):k=0,b[0].push(k);var B;C&1?(E=y.andln(7)+w&7,(E===3||E===5)&&A===2?B=-C:B=C):B=0,b[1].push(B),2*_===k+1&&(_=1-_),2*w===B+1&&(w=1-w),m.iushrn(1),y.iushrn(1)}return b}n.getJSF=o;function l(m,y,b){var _="_"+y;m.prototype[y]=function(){return this[_]!==void 0?this[_]:this[_]=b.call(this)}}n.cachedProperty=l;function u(m){return typeof m=="string"?n.toArray(m,"hex"):m}n.parseBytes=u;function d(m){return new BN(m,"hex","le")}n.intFromLE=d}),getNAF=utils_1$1.getNAF,getJSF=utils_1$1.getJSF,assert$1$1=utils_1$1.assert;function BaseCurve(t,e){this.type=t,this.p=new BN(e.p,16),this.red=e.prime?BN.red(e.prime):BN.mont(this.p),this.zero=new BN(0).toRed(this.red),this.one=new BN(1).toRed(this.red),this.two=new BN(2).toRed(this.red),this.n=e.n&&new BN(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var base$2=BaseCurve;BaseCurve.prototype.point=function t(){throw new Error("Not implemented")};BaseCurve.prototype.validate=function t(){throw new Error("Not implemented")};BaseCurve.prototype._fixedNafMul=function t(e,n){assert$1$1(e.precomputed);var a=e._getDoubles(),o=getNAF(n,1,this._bitLength),l=(1<<a.step+1)-(a.step%2===0?2:1);l/=3;var u=[],d,m;for(d=0;d<o.length;d+=a.step){m=0;for(var y=d+a.step-1;y>=d;y--)m=(m<<1)+o[y];u.push(m)}for(var b=this.jpoint(null,null,null),_=this.jpoint(null,null,null),w=l;w>0;w--){for(d=0;d<u.length;d++)m=u[d],m===w?_=_.mixedAdd(a.points[d]):m===-w&&(_=_.mixedAdd(a.points[d].neg()));b=b.add(_)}return b.toP()};BaseCurve.prototype._wnafMul=function t(e,n){var a=4,o=e._getNAFPoints(a);a=o.wnd;for(var l=o.points,u=getNAF(n,a,this._bitLength),d=this.jpoint(null,null,null),m=u.length-1;m>=0;m--){for(var y=0;m>=0&&u[m]===0;m--)y++;if(m>=0&&y++,d=d.dblp(y),m<0)break;var b=u[m];assert$1$1(b!==0),e.type==="affine"?b>0?d=d.mixedAdd(l[b-1>>1]):d=d.mixedAdd(l[-b-1>>1].neg()):b>0?d=d.add(l[b-1>>1]):d=d.add(l[-b-1>>1].neg())}return e.type==="affine"?d.toP():d};BaseCurve.prototype._wnafMulAdd=function t(e,n,a,o,l){var u=this._wnafT1,d=this._wnafT2,m=this._wnafT3,y=0,b,_,w;for(b=0;b<o;b++){w=n[b];var E=w._getNAFPoints(e);u[b]=E.wnd,d[b]=E.points}for(b=o-1;b>=1;b-=2){var A=b-1,C=b;if(u[A]!==1||u[C]!==1){m[A]=getNAF(a[A],u[A],this._bitLength),m[C]=getNAF(a[C],u[C],this._bitLength),y=Math.max(m[A].length,y),y=Math.max(m[C].length,y);continue}var k=[n[A],null,null,n[C]];n[A].y.cmp(n[C].y)===0?(k[1]=n[A].add(n[C]),k[2]=n[A].toJ().mixedAdd(n[C].neg())):n[A].y.cmp(n[C].y.redNeg())===0?(k[1]=n[A].toJ().mixedAdd(n[C]),k[2]=n[A].add(n[C].neg())):(k[1]=n[A].toJ().mixedAdd(n[C]),k[2]=n[A].toJ().mixedAdd(n[C].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],D=getJSF(a[A],a[C]);for(y=Math.max(D[0].length,y),m[A]=new Array(y),m[C]=new Array(y),_=0;_<y;_++){var q=D[0][_]|0,j=D[1][_]|0;m[A][_]=B[(q+1)*3+(j+1)],m[C][_]=0,d[A]=k}}var J=this.jpoint(null,null,null),Y=this._wnafT4;for(b=y;b>=0;b--){for(var L=0;b>=0;){var Z=!0;for(_=0;_<o;_++)Y[_]=m[_][b]|0,Y[_]!==0&&(Z=!1);if(!Z)break;L++,b--}if(b>=0&&L++,J=J.dblp(L),b<0)break;for(_=0;_<o;_++){var Q=Y[_];Q!==0&&(Q>0?w=d[_][Q-1>>1]:Q<0&&(w=d[_][-Q-1>>1].neg()),w.type==="affine"?J=J.mixedAdd(w):J=J.add(w))}}for(b=0;b<o;b++)d[b]=null;return l?J:J.toP()};function BasePoint(t,e){this.curve=t,this.type=e,this.precomputed=null}BaseCurve.BasePoint=BasePoint;BasePoint.prototype.eq=function t(){throw new Error("Not implemented")};BasePoint.prototype.validate=function t(){return this.curve.validate(this)};BaseCurve.prototype.decodePoint=function t(e,n){e=utils_1$1.toArray(e,n);var a=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*a){e[0]===6?assert$1$1(e[e.length-1]%2===0):e[0]===7&&assert$1$1(e[e.length-1]%2===1);var o=this.point(e.slice(1,1+a),e.slice(1+a,1+2*a));return o}else if((e[0]===2||e[0]===3)&&e.length-1===a)return this.pointFromX(e.slice(1,1+a),e[0]===3);throw new Error("Unknown point format")};BasePoint.prototype.encodeCompressed=function t(e){return this.encode(e,!0)};BasePoint.prototype._encode=function t(e){var n=this.curve.p.byteLength(),a=this.getX().toArray("be",n);return e?[this.getY().isEven()?2:3].concat(a):[4].concat(a,this.getY().toArray("be",n))};BasePoint.prototype.encode=function t(e,n){return utils_1$1.encode(this._encode(n),e)};BasePoint.prototype.precompute=function t(e){if(this.precomputed)return this;var n={doubles:null,naf:null,beta:null};return n.naf=this._getNAFPoints(8),n.doubles=this._getDoubles(4,e),n.beta=this._getBeta(),this.precomputed=n,this};BasePoint.prototype._hasDoubles=function t(e){if(!this.precomputed)return!1;var n=this.precomputed.doubles;return n?n.points.length>=Math.ceil((e.bitLength()+1)/n.step):!1};BasePoint.prototype._getDoubles=function t(e,n){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var a=[this],o=this,l=0;l<n;l+=e){for(var u=0;u<e;u++)o=o.dbl();a.push(o)}return{step:e,points:a}};BasePoint.prototype._getNAFPoints=function t(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var n=[this],a=(1<<e)-1,o=a===1?null:this.dbl(),l=1;l<a;l++)n[l]=n[l-1].add(o);return{wnd:e,points:n}};BasePoint.prototype._getBeta=function t(){return null};BasePoint.prototype.dblp=function t(e){for(var n=this,a=0;a<e;a++)n=n.dbl();return n};var inherits_browser=createCommonjsModule(function(t){typeof Object.create=="function"?t.exports=function(n,a){a&&(n.super_=a,n.prototype=Object.create(a.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(n,a){if(a){n.super_=a;var o=function(){};o.prototype=a.prototype,n.prototype=new o,n.prototype.constructor=n}}}),assert$2$1=utils_1$1.assert;function ShortCurve(t){base$2.call(this,"short",t),this.a=new BN(t.a,16).toRed(this.red),this.b=new BN(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}inherits_browser(ShortCurve,base$2);var short_1=ShortCurve;ShortCurve.prototype._getEndomorphism=function t(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var n,a;if(e.beta)n=new BN(e.beta,16).toRed(this.red);else{var o=this._getEndoRoots(this.p);n=o[0].cmp(o[1])<0?o[0]:o[1],n=n.toRed(this.red)}if(e.lambda)a=new BN(e.lambda,16);else{var l=this._getEndoRoots(this.n);this.g.mul(l[0]).x.cmp(this.g.x.redMul(n))===0?a=l[0]:(a=l[1],assert$2$1(this.g.mul(a).x.cmp(this.g.x.redMul(n))===0))}var u;return e.basis?u=e.basis.map(function(d){return{a:new BN(d.a,16),b:new BN(d.b,16)}}):u=this._getEndoBasis(a),{beta:n,lambda:a,basis:u}}};ShortCurve.prototype._getEndoRoots=function t(e){var n=e===this.p?this.red:BN.mont(e),a=new BN(2).toRed(n).redInvm(),o=a.redNeg(),l=new BN(3).toRed(n).redNeg().redSqrt().redMul(a),u=o.redAdd(l).fromRed(),d=o.redSub(l).fromRed();return[u,d]};ShortCurve.prototype._getEndoBasis=function t(e){for(var n=this.n.ushrn(Math.floor(this.n.bitLength()/2)),a=e,o=this.n.clone(),l=new BN(1),u=new BN(0),d=new BN(0),m=new BN(1),y,b,_,w,E,A,C,k=0,B,D;a.cmpn(0)!==0;){var q=o.div(a);B=o.sub(q.mul(a)),D=d.sub(q.mul(l));var j=m.sub(q.mul(u));if(!_&&B.cmp(n)<0)y=C.neg(),b=l,_=B.neg(),w=D;else if(_&&++k===2)break;C=B,o=a,a=B,d=l,l=D,m=u,u=j}E=B.neg(),A=D;var J=_.sqr().add(w.sqr()),Y=E.sqr().add(A.sqr());return Y.cmp(J)>=0&&(E=y,A=b),_.negative&&(_=_.neg(),w=w.neg()),E.negative&&(E=E.neg(),A=A.neg()),[{a:_,b:w},{a:E,b:A}]};ShortCurve.prototype._endoSplit=function t(e){var n=this.endo.basis,a=n[0],o=n[1],l=o.b.mul(e).divRound(this.n),u=a.b.neg().mul(e).divRound(this.n),d=l.mul(a.a),m=u.mul(o.a),y=l.mul(a.b),b=u.mul(o.b),_=e.sub(d).sub(m),w=y.add(b).neg();return{k1:_,k2:w}};ShortCurve.prototype.pointFromX=function t(e,n){e=new BN(e,16),e.red||(e=e.toRed(this.red));var a=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),o=a.redSqrt();if(o.redSqr().redSub(a).cmp(this.zero)!==0)throw new Error("invalid point");var l=o.fromRed().isOdd();return(n&&!l||!n&&l)&&(o=o.redNeg()),this.point(e,o)};ShortCurve.prototype.validate=function t(e){if(e.inf)return!0;var n=e.x,a=e.y,o=this.a.redMul(n),l=n.redSqr().redMul(n).redIAdd(o).redIAdd(this.b);return a.redSqr().redISub(l).cmpn(0)===0};ShortCurve.prototype._endoWnafMulAdd=function t(e,n,a){for(var o=this._endoWnafT1,l=this._endoWnafT2,u=0;u<e.length;u++){var d=this._endoSplit(n[u]),m=e[u],y=m._getBeta();d.k1.negative&&(d.k1.ineg(),m=m.neg(!0)),d.k2.negative&&(d.k2.ineg(),y=y.neg(!0)),o[u*2]=m,o[u*2+1]=y,l[u*2]=d.k1,l[u*2+1]=d.k2}for(var b=this._wnafMulAdd(1,o,l,u*2,a),_=0;_<u*2;_++)o[_]=null,l[_]=null;return b};function Point(t,e,n,a){base$2.BasePoint.call(this,t,"affine"),e===null&&n===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new BN(e,16),this.y=new BN(n,16),a&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}inherits_browser(Point,base$2.BasePoint);ShortCurve.prototype.point=function t(e,n,a){return new Point(this,e,n,a)};ShortCurve.prototype.pointFromJSON=function t(e,n){return Point.fromJSON(this,e,n)};Point.prototype._getBeta=function t(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var n=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var a=this.curve,o=function(l){return a.point(l.x.redMul(a.endo.beta),l.y)};e.beta=n,n.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(o)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(o)}}}return n}};Point.prototype.toJSON=function t(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};Point.fromJSON=function t(e,n,a){typeof n=="string"&&(n=JSON.parse(n));var o=e.point(n[0],n[1],a);if(!n[2])return o;function l(d){return e.point(d[0],d[1],a)}var u=n[2];return o.precomputed={beta:null,doubles:u.doubles&&{step:u.doubles.step,points:[o].concat(u.doubles.points.map(l))},naf:u.naf&&{wnd:u.naf.wnd,points:[o].concat(u.naf.points.map(l))}},o};Point.prototype.inspect=function t(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};Point.prototype.isInfinity=function t(){return this.inf};Point.prototype.add=function t(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var n=this.y.redSub(e.y);n.cmpn(0)!==0&&(n=n.redMul(this.x.redSub(e.x).redInvm()));var a=n.redSqr().redISub(this.x).redISub(e.x),o=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,o)};Point.prototype.dbl=function t(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var n=this.curve.a,a=this.x.redSqr(),o=e.redInvm(),l=a.redAdd(a).redIAdd(a).redIAdd(n).redMul(o),u=l.redSqr().redISub(this.x.redAdd(this.x)),d=l.redMul(this.x.redSub(u)).redISub(this.y);return this.curve.point(u,d)};Point.prototype.getX=function t(){return this.x.fromRed()};Point.prototype.getY=function t(){return this.y.fromRed()};Point.prototype.mul=function t(e){return e=new BN(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};Point.prototype.mulAdd=function t(e,n,a){var o=[this,n],l=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,l):this.curve._wnafMulAdd(1,o,l,2)};Point.prototype.jmulAdd=function t(e,n,a){var o=[this,n],l=[e,a];return this.curve.endo?this.curve._endoWnafMulAdd(o,l,!0):this.curve._wnafMulAdd(1,o,l,2,!0)};Point.prototype.eq=function t(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};Point.prototype.neg=function t(e){if(this.inf)return this;var n=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var a=this.precomputed,o=function(l){return l.neg()};n.precomputed={naf:a.naf&&{wnd:a.naf.wnd,points:a.naf.points.map(o)},doubles:a.doubles&&{step:a.doubles.step,points:a.doubles.points.map(o)}}}return n};Point.prototype.toJ=function t(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function JPoint(t,e,n,a){base$2.BasePoint.call(this,t,"jacobian"),e===null&&n===null&&a===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new BN(0)):(this.x=new BN(e,16),this.y=new BN(n,16),this.z=new BN(a,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}inherits_browser(JPoint,base$2.BasePoint);ShortCurve.prototype.jpoint=function t(e,n,a){return new JPoint(this,e,n,a)};JPoint.prototype.toP=function t(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),n=e.redSqr(),a=this.x.redMul(n),o=this.y.redMul(n).redMul(e);return this.curve.point(a,o)};JPoint.prototype.neg=function t(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};JPoint.prototype.add=function t(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var n=e.z.redSqr(),a=this.z.redSqr(),o=this.x.redMul(n),l=e.x.redMul(a),u=this.y.redMul(n.redMul(e.z)),d=e.y.redMul(a.redMul(this.z)),m=o.redSub(l),y=u.redSub(d);if(m.cmpn(0)===0)return y.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var b=m.redSqr(),_=b.redMul(m),w=o.redMul(b),E=y.redSqr().redIAdd(_).redISub(w).redISub(w),A=y.redMul(w.redISub(E)).redISub(u.redMul(_)),C=this.z.redMul(e.z).redMul(m);return this.curve.jpoint(E,A,C)};JPoint.prototype.mixedAdd=function t(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var n=this.z.redSqr(),a=this.x,o=e.x.redMul(n),l=this.y,u=e.y.redMul(n).redMul(this.z),d=a.redSub(o),m=l.redSub(u);if(d.cmpn(0)===0)return m.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=d.redSqr(),b=y.redMul(d),_=a.redMul(y),w=m.redSqr().redIAdd(b).redISub(_).redISub(_),E=m.redMul(_.redISub(w)).redISub(l.redMul(b)),A=this.z.redMul(d);return this.curve.jpoint(w,E,A)};JPoint.prototype.dblp=function t(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var n;if(this.curve.zeroA||this.curve.threeA){var a=this;for(n=0;n<e;n++)a=a.dbl();return a}var o=this.curve.a,l=this.curve.tinv,u=this.x,d=this.y,m=this.z,y=m.redSqr().redSqr(),b=d.redAdd(d);for(n=0;n<e;n++){var _=u.redSqr(),w=b.redSqr(),E=w.redSqr(),A=_.redAdd(_).redIAdd(_).redIAdd(o.redMul(y)),C=u.redMul(w),k=A.redSqr().redISub(C.redAdd(C)),B=C.redISub(k),D=A.redMul(B);D=D.redIAdd(D).redISub(E);var q=b.redMul(m);n+1<e&&(y=y.redMul(E)),u=k,m=q,b=D}return this.curve.jpoint(u,b.redMul(l),m)};JPoint.prototype.dbl=function t(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};JPoint.prototype._zeroDbl=function t(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),l=this.y.redSqr(),u=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(o).redISub(u);d=d.redIAdd(d);var m=o.redAdd(o).redIAdd(o),y=m.redSqr().redISub(d).redISub(d),b=u.redIAdd(u);b=b.redIAdd(b),b=b.redIAdd(b),e=y,n=m.redMul(d.redISub(y)).redISub(b),a=this.y.redAdd(this.y)}else{var _=this.x.redSqr(),w=this.y.redSqr(),E=w.redSqr(),A=this.x.redAdd(w).redSqr().redISub(_).redISub(E);A=A.redIAdd(A);var C=_.redAdd(_).redIAdd(_),k=C.redSqr(),B=E.redIAdd(E);B=B.redIAdd(B),B=B.redIAdd(B),e=k.redISub(A).redISub(A),n=C.redMul(A.redISub(e)).redISub(B),a=this.y.redMul(this.z),a=a.redIAdd(a)}return this.curve.jpoint(e,n,a)};JPoint.prototype._threeDbl=function t(){var e,n,a;if(this.zOne){var o=this.x.redSqr(),l=this.y.redSqr(),u=l.redSqr(),d=this.x.redAdd(l).redSqr().redISub(o).redISub(u);d=d.redIAdd(d);var m=o.redAdd(o).redIAdd(o).redIAdd(this.curve.a),y=m.redSqr().redISub(d).redISub(d);e=y;var b=u.redIAdd(u);b=b.redIAdd(b),b=b.redIAdd(b),n=m.redMul(d.redISub(y)).redISub(b),a=this.y.redAdd(this.y)}else{var _=this.z.redSqr(),w=this.y.redSqr(),E=this.x.redMul(w),A=this.x.redSub(_).redMul(this.x.redAdd(_));A=A.redAdd(A).redIAdd(A);var C=E.redIAdd(E);C=C.redIAdd(C);var k=C.redAdd(C);e=A.redSqr().redISub(k),a=this.y.redAdd(this.z).redSqr().redISub(w).redISub(_);var B=w.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B),n=A.redMul(C.redISub(e)).redISub(B)}return this.curve.jpoint(e,n,a)};JPoint.prototype._dbl=function t(){var e=this.curve.a,n=this.x,a=this.y,o=this.z,l=o.redSqr().redSqr(),u=n.redSqr(),d=a.redSqr(),m=u.redAdd(u).redIAdd(u).redIAdd(e.redMul(l)),y=n.redAdd(n);y=y.redIAdd(y);var b=y.redMul(d),_=m.redSqr().redISub(b.redAdd(b)),w=b.redISub(_),E=d.redSqr();E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var A=m.redMul(w).redISub(E),C=a.redAdd(a).redMul(o);return this.curve.jpoint(_,A,C)};JPoint.prototype.trpl=function t(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),n=this.y.redSqr(),a=this.z.redSqr(),o=n.redSqr(),l=e.redAdd(e).redIAdd(e),u=l.redSqr(),d=this.x.redAdd(n).redSqr().redISub(e).redISub(o);d=d.redIAdd(d),d=d.redAdd(d).redIAdd(d),d=d.redISub(u);var m=d.redSqr(),y=o.redIAdd(o);y=y.redIAdd(y),y=y.redIAdd(y),y=y.redIAdd(y);var b=l.redIAdd(d).redSqr().redISub(u).redISub(m).redISub(y),_=n.redMul(b);_=_.redIAdd(_),_=_.redIAdd(_);var w=this.x.redMul(m).redISub(_);w=w.redIAdd(w),w=w.redIAdd(w);var E=this.y.redMul(b.redMul(y.redISub(b)).redISub(d.redMul(m)));E=E.redIAdd(E),E=E.redIAdd(E),E=E.redIAdd(E);var A=this.z.redAdd(d).redSqr().redISub(a).redISub(m);return this.curve.jpoint(w,E,A)};JPoint.prototype.mul=function t(e,n){return e=new BN(e,n),this.curve._wnafMul(this,e)};JPoint.prototype.eq=function t(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var n=this.z.redSqr(),a=e.z.redSqr();if(this.x.redMul(a).redISub(e.x.redMul(n)).cmpn(0)!==0)return!1;var o=n.redMul(this.z),l=a.redMul(e.z);return this.y.redMul(l).redISub(e.y.redMul(o)).cmpn(0)===0};JPoint.prototype.eqXToP=function t(e){var n=this.z.redSqr(),a=e.toRed(this.curve.red).redMul(n);if(this.x.cmp(a)===0)return!0;for(var o=e.clone(),l=this.curve.redN.redMul(n);;){if(o.iadd(this.curve.n),o.cmp(this.curve.p)>=0)return!1;if(a.redIAdd(l),this.x.cmp(a)===0)return!0}};JPoint.prototype.inspect=function t(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};JPoint.prototype.isInfinity=function t(){return this.z.cmpn(0)===0};var curve_1=createCommonjsModule(function(t,e){var n=e;n.base=base$2,n.short=short_1,n.mont=null,n.edwards=null}),curves_1=createCommonjsModule(function(t,e){var n=e,a=utils_1$1.assert;function o(d){d.type==="short"?this.curve=new curve_1.short(d):d.type==="edwards"?this.curve=new curve_1.edwards(d):this.curve=new curve_1.mont(d),this.g=this.curve.g,this.n=this.curve.n,this.hash=d.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}n.PresetCurve=o;function l(d,m){Object.defineProperty(n,d,{configurable:!0,enumerable:!0,get:function(){var y=new o(m);return Object.defineProperty(n,d,{configurable:!0,enumerable:!0,value:y}),y}})}l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:hash$3.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:hash$3.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:hash$3.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:hash$3.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:hash$3.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:hash$3.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=null.crash()}catch{u=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:hash$3.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})});function HmacDRBG(t){if(!(this instanceof HmacDRBG))return new HmacDRBG(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=utils_1.toArray(t.entropy,t.entropyEnc||"hex"),n=utils_1.toArray(t.nonce,t.nonceEnc||"hex"),a=utils_1.toArray(t.pers,t.persEnc||"hex");minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,n,a)}var hmacDrbg=HmacDRBG;HmacDRBG.prototype._init=function t(e,n,a){var o=e.concat(n).concat(a);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var l=0;l<this.V.length;l++)this.K[l]=0,this.V[l]=1;this._update(o),this._reseed=1,this.reseedInterval=281474976710656};HmacDRBG.prototype._hmac=function t(){return new hash$3.hmac(this.hash,this.K)};HmacDRBG.prototype._update=function t(e){var n=this._hmac().update(this.V).update([0]);e&&(n=n.update(e)),this.K=n.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};HmacDRBG.prototype.reseed=function t(e,n,a,o){typeof n!="string"&&(o=a,a=n,n=null),e=utils_1.toArray(e,n),a=utils_1.toArray(a,o),minimalisticAssert(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(a||[])),this._reseed=1};HmacDRBG.prototype.generate=function t(e,n,a,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof n!="string"&&(o=a,a=n,n=null),a&&(a=utils_1.toArray(a,o||"hex"),this._update(a));for(var l=[];l.length<e;)this.V=this._hmac().update(this.V).digest(),l=l.concat(this.V);var u=l.slice(0,e);return this._update(a),this._reseed++,utils_1.encode(u,n)};var assert$3=utils_1$1.assert;function KeyPair(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var key=KeyPair;KeyPair.fromPublic=function t(e,n,a){return n instanceof KeyPair?n:new KeyPair(e,{pub:n,pubEnc:a})};KeyPair.fromPrivate=function t(e,n,a){return n instanceof KeyPair?n:new KeyPair(e,{priv:n,privEnc:a})};KeyPair.prototype.validate=function t(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};KeyPair.prototype.getPublic=function t(e,n){return typeof e=="string"&&(n=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),n?this.pub.encode(n,e):this.pub};KeyPair.prototype.getPrivate=function t(e){return e==="hex"?this.priv.toString(16,2):this.priv};KeyPair.prototype._importPrivate=function t(e,n){this.priv=new BN(e,n||16),this.priv=this.priv.umod(this.ec.curve.n)};KeyPair.prototype._importPublic=function t(e,n){if(e.x||e.y){this.ec.curve.type==="mont"?assert$3(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&assert$3(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,n)};KeyPair.prototype.derive=function t(e){return e.validate()||assert$3(e.validate(),"public point not validated"),e.mul(this.priv).getX()};KeyPair.prototype.sign=function t(e,n,a){return this.ec.sign(e,this,n,a)};KeyPair.prototype.verify=function t(e,n){return this.ec.verify(e,n,this)};KeyPair.prototype.inspect=function t(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var assert$4=utils_1$1.assert;function Signature(t,e){if(t instanceof Signature)return t;this._importDER(t,e)||(assert$4(t.r&&t.s,"Signature without r or s"),this.r=new BN(t.r,16),this.s=new BN(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var signature=Signature;function Position(){this.place=0}function getLength(t,e){var n=t[e.place++];if(!(n&128))return n;var a=n&15;if(a===0||a>4)return!1;for(var o=0,l=0,u=e.place;l<a;l++,u++)o<<=8,o|=t[u],o>>>=0;return o<=127?!1:(e.place=u,o)}function rmPadding(t){for(var e=0,n=t.length-1;!t[e]&&!(t[e+1]&128)&&e<n;)e++;return e===0?t:t.slice(e)}Signature.prototype._importDER=function t(e,n){e=utils_1$1.toArray(e,n);var a=new Position;if(e[a.place++]!==48)return!1;var o=getLength(e,a);if(o===!1||o+a.place!==e.length||e[a.place++]!==2)return!1;var l=getLength(e,a);if(l===!1)return!1;var u=e.slice(a.place,l+a.place);if(a.place+=l,e[a.place++]!==2)return!1;var d=getLength(e,a);if(d===!1||e.length!==d+a.place)return!1;var m=e.slice(a.place,d+a.place);if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;if(m[0]===0)if(m[1]&128)m=m.slice(1);else return!1;return this.r=new BN(u),this.s=new BN(m),this.recoveryParam=null,!0};function constructLength(t,e){if(e<128){t.push(e);return}var n=1+(Math.log(e)/Math.LN2>>>3);for(t.push(n|128);--n;)t.push(e>>>(n<<3)&255);t.push(e)}Signature.prototype.toDER=function t(e){var n=this.r.toArray(),a=this.s.toArray();for(n[0]&128&&(n=[0].concat(n)),a[0]&128&&(a=[0].concat(a)),n=rmPadding(n),a=rmPadding(a);!a[0]&&!(a[1]&128);)a=a.slice(1);var o=[2];constructLength(o,n.length),o=o.concat(n),o.push(2),constructLength(o,a.length);var l=o.concat(a),u=[48];return constructLength(u,l.length),u=u.concat(l),utils_1$1.encode(u,e)};var rand=function(){throw new Error("unsupported")},assert$5=utils_1$1.assert;function EC(t){if(!(this instanceof EC))return new EC(t);typeof t=="string"&&(assert$5(Object.prototype.hasOwnProperty.call(curves_1,t),"Unknown curve "+t),t=curves_1[t]),t instanceof curves_1.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var ec=EC;EC.prototype.keyPair=function t(e){return new key(this,e)};EC.prototype.keyFromPrivate=function t(e,n){return key.fromPrivate(this,e,n)};EC.prototype.keyFromPublic=function t(e,n){return key.fromPublic(this,e,n)};EC.prototype.genKeyPair=function t(e){e||(e={});for(var n=new hmacDrbg({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rand(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),a=this.n.byteLength(),o=this.n.sub(new BN(2));;){var l=new BN(n.generate(a));if(!(l.cmp(o)>0))return l.iaddn(1),this.keyFromPrivate(l)}};EC.prototype._truncateToN=function t(e,n){var a=e.byteLength()*8-this.n.bitLength();return a>0&&(e=e.ushrn(a)),!n&&e.cmp(this.n)>=0?e.sub(this.n):e};EC.prototype.sign=function t(e,n,a,o){typeof a=="object"&&(o=a,a=null),o||(o={}),n=this.keyFromPrivate(n,a),e=this._truncateToN(new BN(e,16));for(var l=this.n.byteLength(),u=n.getPrivate().toArray("be",l),d=e.toArray("be",l),m=new hmacDrbg({hash:this.hash,entropy:u,nonce:d,pers:o.pers,persEnc:o.persEnc||"utf8"}),y=this.n.sub(new BN(1)),b=0;;b++){var _=o.k?o.k(b):new BN(m.generate(this.n.byteLength()));if(_=this._truncateToN(_,!0),!(_.cmpn(1)<=0||_.cmp(y)>=0)){var w=this.g.mul(_);if(!w.isInfinity()){var E=w.getX(),A=E.umod(this.n);if(A.cmpn(0)!==0){var C=_.invm(this.n).mul(A.mul(n.getPrivate()).iadd(e));if(C=C.umod(this.n),C.cmpn(0)!==0){var k=(w.getY().isOdd()?1:0)|(E.cmp(A)!==0?2:0);return o.canonical&&C.cmp(this.nh)>0&&(C=this.n.sub(C),k^=1),new signature({r:A,s:C,recoveryParam:k})}}}}}};EC.prototype.verify=function t(e,n,a,o){e=this._truncateToN(new BN(e,16)),a=this.keyFromPublic(a,o),n=new signature(n,"hex");var l=n.r,u=n.s;if(l.cmpn(1)<0||l.cmp(this.n)>=0||u.cmpn(1)<0||u.cmp(this.n)>=0)return!1;var d=u.invm(this.n),m=d.mul(e).umod(this.n),y=d.mul(l).umod(this.n),b;return this.curve._maxwellTrick?(b=this.g.jmulAdd(m,a.getPublic(),y),b.isInfinity()?!1:b.eqXToP(l)):(b=this.g.mulAdd(m,a.getPublic(),y),b.isInfinity()?!1:b.getX().umod(this.n).cmp(l)===0)};EC.prototype.recoverPubKey=function(t,e,n,a){assert$5((3&n)===n,"The recovery param is more than two bits"),e=new signature(e,a);var o=this.n,l=new BN(t),u=e.r,d=e.s,m=n&1,y=n>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&y)throw new Error("Unable to find sencond key candinate");y?u=this.curve.pointFromX(u.add(this.curve.n),m):u=this.curve.pointFromX(u,m);var b=e.r.invm(o),_=o.sub(l).mul(b).umod(o),w=d.mul(b).umod(o);return this.g.mulAdd(_,u,w)};EC.prototype.getKeyRecoveryParam=function(t,e,n,a){if(e=new signature(e,a),e.recoveryParam!==null)return e.recoveryParam;for(var o=0;o<4;o++){var l;try{l=this.recoverPubKey(t,e,o)}catch{continue}if(l.eq(n))return o}throw new Error("Unable to find valid recovery factor")};var elliptic_1=createCommonjsModule(function(t,e){var n=e;n.version="6.5.4",n.utils=utils_1$1,n.rand=function(){throw new Error("unsupported")},n.curve=curve_1,n.curves=curves_1,n.ec=ec,n.eddsa=null}),EC$1=elliptic_1.ec;const version$7="signing-key/5.7.0",logger$b=new Logger(version$7);let _curve=null;function getCurve(){return _curve||(_curve=new EC$1("secp256k1")),_curve}class SigningKey{constructor(e){defineReadOnly(this,"curve","secp256k1"),defineReadOnly(this,"privateKey",hexlify(e)),hexDataLength(this.privateKey)!==32&&logger$b.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const n=getCurve().keyFromPrivate(arrayify(this.privateKey));defineReadOnly(this,"publicKey","0x"+n.getPublic(!1,"hex")),defineReadOnly(this,"compressedPublicKey","0x"+n.getPublic(!0,"hex")),defineReadOnly(this,"_isSigningKey",!0)}_addPoint(e){const n=getCurve().keyFromPublic(arrayify(this.publicKey)),a=getCurve().keyFromPublic(arrayify(e));return"0x"+n.pub.add(a.pub).encodeCompressed("hex")}signDigest(e){const n=getCurve().keyFromPrivate(arrayify(this.privateKey)),a=arrayify(e);a.length!==32&&logger$b.throwArgumentError("bad digest length","digest",e);const o=n.sign(a,{canonical:!0});return splitSignature({recoveryParam:o.recoveryParam,r:hexZeroPad("0x"+o.r.toString(16),32),s:hexZeroPad("0x"+o.s.toString(16),32)})}computeSharedSecret(e){const n=getCurve().keyFromPrivate(arrayify(this.privateKey)),a=getCurve().keyFromPublic(arrayify(computePublicKey(e)));return hexZeroPad("0x"+n.derive(a.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function recoverPublicKey(t,e){const n=splitSignature(e),a={r:arrayify(n.r),s:arrayify(n.s)};return"0x"+getCurve().recoverPubKey(arrayify(t),a,n.recoveryParam).encode("hex",!1)}function computePublicKey(t,e){const n=arrayify(t);if(n.length===32){const a=new SigningKey(n);return e?"0x"+getCurve().keyFromPrivate(n).getPublic(!0,"hex"):a.publicKey}else{if(n.length===33)return e?hexlify(n):"0x"+getCurve().keyFromPublic(n).getPublic(!1,"hex");if(n.length===65)return e?"0x"+getCurve().keyFromPublic(n).getPublic(!0,"hex"):hexlify(n)}return logger$b.throwArgumentError("invalid public or private key","key","[REDACTED]")}const version$6="transactions/5.7.0",logger$a=new Logger(version$6);var TransactionTypes;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(TransactionTypes||(TransactionTypes={}));const transactionFields=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],allowedTransactionKeys={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function computeAddress(t){const e=computePublicKey(t);return getAddress(hexDataSlice(keccak256(hexDataSlice(e,1)),12))}function recoverAddress(t,e){return computeAddress(recoverPublicKey(arrayify(t),e))}function formatNumber(t,e){const n=stripZeros(BigNumber.from(t).toHexString());return n.length>32&&logger$a.throwArgumentError("invalid length for "+e,"transaction:"+e,t),n}function accessSetify(t,e){return{address:getAddress(t),storageKeys:(e||[]).map((n,a)=>(hexDataLength(n)!==32&&logger$a.throwArgumentError("invalid access list storageKey",`accessList[${t}:${a}]`,n),n.toLowerCase()))}}function accessListify(t){if(Array.isArray(t))return t.map((n,a)=>Array.isArray(n)?(n.length>2&&logger$a.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${a}]`,n),accessSetify(n[0],n[1])):accessSetify(n.address,n.storageKeys));const e=Object.keys(t).map(n=>{const a=t[n].reduce((o,l)=>(o[l]=!0,o),{});return accessSetify(n,Object.keys(a).sort())});return e.sort((n,a)=>n.address.localeCompare(a.address)),e}function formatAccessList(t){return accessListify(t).map(e=>[e.address,e.storageKeys])}function _serializeEip1559(t,e){if(t.gasPrice!=null){const a=BigNumber.from(t.gasPrice),o=BigNumber.from(t.maxFeePerGas||0);a.eq(o)||logger$a.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:a,maxFeePerGas:o})}const n=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),formatNumber(t.maxFeePerGas||0,"maxFeePerGas"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const a=splitSignature(e);n.push(formatNumber(a.recoveryParam,"recoveryParam")),n.push(stripZeros(a.r)),n.push(stripZeros(a.s))}return hexConcat(["0x02",encode$b(n)])}function _serializeEip2930(t,e){const n=[formatNumber(t.chainId||0,"chainId"),formatNumber(t.nonce||0,"nonce"),formatNumber(t.gasPrice||0,"gasPrice"),formatNumber(t.gasLimit||0,"gasLimit"),t.to!=null?getAddress(t.to):"0x",formatNumber(t.value||0,"value"),t.data||"0x",formatAccessList(t.accessList||[])];if(e){const a=splitSignature(e);n.push(formatNumber(a.recoveryParam,"recoveryParam")),n.push(stripZeros(a.r)),n.push(stripZeros(a.s))}return hexConcat(["0x01",encode$b(n)])}function _serialize(t,e){checkProperties(t,allowedTransactionKeys);const n=[];transactionFields.forEach(function(u){let d=t[u.name]||[];const m={};u.numeric&&(m.hexPad="left"),d=arrayify(hexlify(d,m)),u.length&&d.length!==u.length&&d.length>0&&logger$a.throwArgumentError("invalid length for "+u.name,"transaction:"+u.name,d),u.maxLength&&(d=stripZeros(d),d.length>u.maxLength&&logger$a.throwArgumentError("invalid length for "+u.name,"transaction:"+u.name,d)),n.push(hexlify(d))});let a=0;if(t.chainId!=null?(a=t.chainId,typeof a!="number"&&logger$a.throwArgumentError("invalid transaction.chainId","transaction",t)):e&&!isBytesLike(e)&&e.v>28&&(a=Math.floor((e.v-35)/2)),a!==0&&(n.push(hexlify(a)),n.push("0x"),n.push("0x")),!e)return encode$b(n);const o=splitSignature(e);let l=27+o.recoveryParam;return a!==0?(n.pop(),n.pop(),n.pop(),l+=a*2+8,o.v>28&&o.v!==l&&logger$a.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e)):o.v!==l&&logger$a.throwArgumentError("transaction.chainId/signature.v mismatch","signature",e),n.push(hexlify(l)),n.push(stripZeros(arrayify(o.r))),n.push(stripZeros(arrayify(o.s))),encode$b(n)}function serialize(t,e){if(t.type==null||t.type===0)return t.accessList!=null&&logger$a.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",t),_serialize(t,e);switch(t.type){case 1:return _serializeEip2930(t,e);case 2:return _serializeEip1559(t,e)}return logger$a.throwError(`unsupported transaction type: ${t.type}`,Logger.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:t.type})}const version$5="wordlists/5.7.0",logger$9=new Logger(version$5);class Wordlist{constructor(e){logger$9.checkAbstract(new.target,Wordlist),defineReadOnly(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){const n=[];for(let a=0;a<2048;a++){const o=e.getWord(a);if(a!==e.getWordIndex(o))return"0x";n.push(o)}return id(n.join(`
`)+`
`)}static register(e,n){n||(n=e.locale)}}const words="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo";let wordlist=null;function loadWords(t){if(wordlist==null&&(wordlist=words.replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),Wordlist.check(t)!=="0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"))throw wordlist=null,new Error("BIP39 Wordlist for en (English) FAILED")}class LangEn extends Wordlist{constructor(){super("en")}getWord(e){return loadWords(this),wordlist[e]}getWordIndex(e){return loadWords(this),wordlist.indexOf(e)}}const langEn=new LangEn;Wordlist.register(langEn);const wordlists={en:langEn},version$4="hdnode/5.7.0",logger$8=new Logger(version$4),N=BigNumber.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),MasterSecret=toUtf8Bytes("Bitcoin seed"),HardenedBit=2147483648;function getUpperMask(t){return(1<<t)-1<<8-t}function getLowerMask(t){return(1<<t)-1}function bytes32(t){return hexZeroPad(hexlify(t),32)}function base58check(t){return Base58.encode(concat([t,hexDataSlice(sha256(sha256(t)),0,4)]))}function getWordlist(t){if(t==null)return wordlists.en;if(typeof t=="string"){const e=wordlists[t];return e==null&&logger$8.throwArgumentError("unknown locale","wordlist",t),e}return t}const _constructorGuard={},defaultPath="m/44'/60'/0'/0/0";class HDNode{constructor(e,n,a,o,l,u,d,m){if(e!==_constructorGuard)throw new Error("HDNode constructor cannot be called directly");if(n){const y=new SigningKey(n);defineReadOnly(this,"privateKey",y.privateKey),defineReadOnly(this,"publicKey",y.compressedPublicKey)}else defineReadOnly(this,"privateKey",null),defineReadOnly(this,"publicKey",hexlify(a));defineReadOnly(this,"parentFingerprint",o),defineReadOnly(this,"fingerprint",hexDataSlice(ripemd160(sha256(this.publicKey)),0,4)),defineReadOnly(this,"address",computeAddress(this.publicKey)),defineReadOnly(this,"chainCode",l),defineReadOnly(this,"index",u),defineReadOnly(this,"depth",d),m==null?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",null)):typeof m=="string"?(defineReadOnly(this,"mnemonic",null),defineReadOnly(this,"path",m)):(defineReadOnly(this,"mnemonic",m),defineReadOnly(this,"path",m.path))}get extendedKey(){if(this.depth>=256)throw new Error("Depth too large!");return base58check(concat([this.privateKey!=null?"0x0488ADE4":"0x0488B21E",hexlify(this.depth),this.parentFingerprint,hexZeroPad(hexlify(this.index),4),this.chainCode,this.privateKey!=null?concat(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new HDNode(_constructorGuard,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw new Error("invalid index - "+String(e));let n=this.path;n&&(n+="/"+(e&~HardenedBit));const a=new Uint8Array(37);if(e&HardenedBit){if(!this.privateKey)throw new Error("cannot derive child of neutered node");a.set(arrayify(this.privateKey),1),n&&(n+="'")}else a.set(arrayify(this.publicKey));for(let _=24;_>=0;_-=8)a[33+(_>>3)]=e>>24-_&255;const o=arrayify(computeHmac(SupportedAlgorithm.sha512,this.chainCode,a)),l=o.slice(0,32),u=o.slice(32);let d=null,m=null;this.privateKey?d=bytes32(BigNumber.from(l).add(this.privateKey).mod(N)):m=new SigningKey(hexlify(l))._addPoint(this.publicKey);let y=n;const b=this.mnemonic;return b&&(y=Object.freeze({phrase:b.phrase,path:n,locale:b.locale||"en"})),new HDNode(_constructorGuard,d,m,this.fingerprint,bytes32(u),e,this.depth+1,y)}derivePath(e){const n=e.split("/");if(n.length===0||n[0]==="m"&&this.depth!==0)throw new Error("invalid path - "+e);n[0]==="m"&&n.shift();let a=this;for(let o=0;o<n.length;o++){const l=n[o];if(l.match(/^[0-9]+'$/)){const u=parseInt(l.substring(0,l.length-1));if(u>=HardenedBit)throw new Error("invalid path index - "+l);a=a._derive(HardenedBit+u)}else if(l.match(/^[0-9]+$/)){const u=parseInt(l);if(u>=HardenedBit)throw new Error("invalid path index - "+l);a=a._derive(u)}else throw new Error("invalid path component - "+l)}return a}static _fromSeed(e,n){const a=arrayify(e);if(a.length<16||a.length>64)throw new Error("invalid seed");const o=arrayify(computeHmac(SupportedAlgorithm.sha512,MasterSecret,a));return new HDNode(_constructorGuard,bytes32(o.slice(0,32)),null,"0x00000000",bytes32(o.slice(32)),0,0,n)}static fromMnemonic(e,n,a){return a=getWordlist(a),e=entropyToMnemonic(mnemonicToEntropy(e,a),a),HDNode._fromSeed(mnemonicToSeed(e,n),{phrase:e,path:"m",locale:a.locale})}static fromSeed(e){return HDNode._fromSeed(e,null)}static fromExtendedKey(e){const n=Base58.decode(e);(n.length!==82||base58check(n.slice(0,78))!==e)&&logger$8.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");const a=n[4],o=hexlify(n.slice(5,9)),l=parseInt(hexlify(n.slice(9,13)).substring(2),16),u=hexlify(n.slice(13,45)),d=n.slice(45,78);switch(hexlify(n.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new HDNode(_constructorGuard,null,hexlify(d),o,u,l,a,null);case"0x0488ade4":case"0x04358394 ":if(d[0]!==0)break;return new HDNode(_constructorGuard,hexlify(d.slice(1)),null,o,u,l,a,null)}return logger$8.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function mnemonicToSeed(t,e){e||(e="");const n=toUtf8Bytes("mnemonic"+e,UnicodeNormalizationForm.NFKD);return pbkdf2$1(toUtf8Bytes(t,UnicodeNormalizationForm.NFKD),n,2048,64,"sha512")}function mnemonicToEntropy(t,e){e=getWordlist(e),logger$8.checkNormalize();const n=e.split(t);if(n.length%3!==0)throw new Error("invalid mnemonic");const a=arrayify(new Uint8Array(Math.ceil(11*n.length/8)));let o=0;for(let y=0;y<n.length;y++){let b=e.getWordIndex(n[y].normalize("NFKD"));if(b===-1)throw new Error("invalid mnemonic");for(let _=0;_<11;_++)b&1<<10-_&&(a[o>>3]|=1<<7-o%8),o++}const l=32*n.length/3,u=n.length/3,d=getUpperMask(u);if((arrayify(sha256(a.slice(0,l/8)))[0]&d)!==(a[a.length-1]&d))throw new Error("invalid checksum");return hexlify(a.slice(0,l/8))}function entropyToMnemonic(t,e){if(e=getWordlist(e),t=arrayify(t),t.length%4!==0||t.length<16||t.length>32)throw new Error("invalid entropy");const n=[0];let a=11;for(let u=0;u<t.length;u++)a>8?(n[n.length-1]<<=8,n[n.length-1]|=t[u],a-=8):(n[n.length-1]<<=a,n[n.length-1]|=t[u]>>8-a,n.push(t[u]&getLowerMask(8-a)),a+=3);const o=t.length/4,l=arrayify(sha256(t))[0]&getUpperMask(o);return n[n.length-1]<<=o,n[n.length-1]|=l>>8-o,e.join(n.map(u=>e.getWord(u)))}const version$3="random/5.7.0",logger$7=new Logger(version$3);function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global$1<"u")return global$1;throw new Error("unable to locate global object")}const anyGlobal=getGlobal();let crypto$1=anyGlobal.crypto||anyGlobal.msCrypto;(!crypto$1||!crypto$1.getRandomValues)&&(logger$7.warn("WARNING: Missing strong random number source"),crypto$1={getRandomValues:function(t){return logger$7.throwError("no secure random source avaialble",Logger.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});function randomBytes(t){(t<=0||t>1024||t%1||t!=t)&&logger$7.throwArgumentError("invalid length","length",t);const e=new Uint8Array(t);return crypto$1.getRandomValues(e),arrayify(e)}var aesJsExports={},aesJs={get exports(){return aesJsExports},set exports(t){aesJsExports=t}};(function(t,e){(function(n){function a(P){return parseInt(P)===P}function o(P){if(!a(P.length))return!1;for(var S=0;S<P.length;S++)if(!a(P[S])||P[S]<0||P[S]>255)return!1;return!0}function l(P,S){if(P.buffer&&ArrayBuffer.isView(P)&&P.name==="Uint8Array")return S&&(P.slice?P=P.slice():P=Array.prototype.slice.call(P)),P;if(Array.isArray(P)){if(!o(P))throw new Error("Array contains invalid value: "+P);return new Uint8Array(P)}if(a(P.length)&&o(P))return new Uint8Array(P);throw new Error("unsupported array-like object")}function u(P){return new Uint8Array(P)}function d(P,S,F,ue,ee){(ue!=null||ee!=null)&&(P.slice?P=P.slice(ue,ee):P=Array.prototype.slice.call(P,ue,ee)),S.set(P,F)}var m=function(){function P(F){var ue=[],ee=0;for(F=encodeURI(F);ee<F.length;){var fe=F.charCodeAt(ee++);fe===37?(ue.push(parseInt(F.substr(ee,2),16)),ee+=2):ue.push(fe)}return l(ue)}function S(F){for(var ue=[],ee=0;ee<F.length;){var fe=F[ee];fe<128?(ue.push(String.fromCharCode(fe)),ee++):fe>191&&fe<224?(ue.push(String.fromCharCode((fe&31)<<6|F[ee+1]&63)),ee+=2):(ue.push(String.fromCharCode((fe&15)<<12|(F[ee+1]&63)<<6|F[ee+2]&63)),ee+=3)}return ue.join("")}return{toBytes:P,fromBytes:S}}(),y=function(){function P(ue){for(var ee=[],fe=0;fe<ue.length;fe+=2)ee.push(parseInt(ue.substr(fe,2),16));return ee}var S="0123456789abcdef";function F(ue){for(var ee=[],fe=0;fe<ue.length;fe++){var le=ue[fe];ee.push(S[(le&240)>>4]+S[le&15])}return ee.join("")}return{toBytes:P,fromBytes:F}}(),b={16:10,24:12,32:14},_=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],w=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],E=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],A=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],C=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],k=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],B=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],D=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],q=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],j=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],J=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],Y=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],L=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],Z=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],Q=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function oe(P){for(var S=[],F=0;F<P.length;F+=4)S.push(P[F]<<24|P[F+1]<<16|P[F+2]<<8|P[F+3]);return S}var ae=function(P){if(!(this instanceof ae))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:l(P,!0)}),this._prepare()};ae.prototype._prepare=function(){var P=b[this.key.length];if(P==null)throw new Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var S=0;S<=P;S++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);for(var F=(P+1)*4,ue=this.key.length/4,ee=oe(this.key),fe,S=0;S<ue;S++)fe=S>>2,this._Ke[fe][S%4]=ee[S],this._Kd[P-fe][S%4]=ee[S];for(var le=0,ce=ue,pe;ce<F;){if(pe=ee[ue-1],ee[0]^=w[pe>>16&255]<<24^w[pe>>8&255]<<16^w[pe&255]<<8^w[pe>>24&255]^_[le]<<24,le+=1,ue!=8)for(var S=1;S<ue;S++)ee[S]^=ee[S-1];else{for(var S=1;S<ue/2;S++)ee[S]^=ee[S-1];pe=ee[ue/2-1],ee[ue/2]^=w[pe&255]^w[pe>>8&255]<<8^w[pe>>16&255]<<16^w[pe>>24&255]<<24;for(var S=ue/2+1;S<ue;S++)ee[S]^=ee[S-1]}for(var S=0,se,de;S<ue&&ce<F;)se=ce>>2,de=ce%4,this._Ke[se][de]=ee[S],this._Kd[P-se][de]=ee[S++],ce++}for(var se=1;se<P;se++)for(var de=0;de<4;de++)pe=this._Kd[se][de],this._Kd[se][de]=Y[pe>>24&255]^L[pe>>16&255]^Z[pe>>8&255]^Q[pe&255]},ae.prototype.encrypt=function(P){if(P.length!=16)throw new Error("invalid plaintext size (must be 16 bytes)");for(var S=this._Ke.length-1,F=[0,0,0,0],ue=oe(P),ee=0;ee<4;ee++)ue[ee]^=this._Ke[0][ee];for(var fe=1;fe<S;fe++){for(var ee=0;ee<4;ee++)F[ee]=A[ue[ee]>>24&255]^C[ue[(ee+1)%4]>>16&255]^k[ue[(ee+2)%4]>>8&255]^B[ue[(ee+3)%4]&255]^this._Ke[fe][ee];ue=F.slice()}for(var le=u(16),ce,ee=0;ee<4;ee++)ce=this._Ke[S][ee],le[4*ee]=(w[ue[ee]>>24&255]^ce>>24)&255,le[4*ee+1]=(w[ue[(ee+1)%4]>>16&255]^ce>>16)&255,le[4*ee+2]=(w[ue[(ee+2)%4]>>8&255]^ce>>8)&255,le[4*ee+3]=(w[ue[(ee+3)%4]&255]^ce)&255;return le},ae.prototype.decrypt=function(P){if(P.length!=16)throw new Error("invalid ciphertext size (must be 16 bytes)");for(var S=this._Kd.length-1,F=[0,0,0,0],ue=oe(P),ee=0;ee<4;ee++)ue[ee]^=this._Kd[0][ee];for(var fe=1;fe<S;fe++){for(var ee=0;ee<4;ee++)F[ee]=D[ue[ee]>>24&255]^q[ue[(ee+3)%4]>>16&255]^j[ue[(ee+2)%4]>>8&255]^J[ue[(ee+1)%4]&255]^this._Kd[fe][ee];ue=F.slice()}for(var le=u(16),ce,ee=0;ee<4;ee++)ce=this._Kd[S][ee],le[4*ee]=(E[ue[ee]>>24&255]^ce>>24)&255,le[4*ee+1]=(E[ue[(ee+3)%4]>>16&255]^ce>>16)&255,le[4*ee+2]=(E[ue[(ee+2)%4]>>8&255]^ce>>8)&255,le[4*ee+3]=(E[ue[(ee+1)%4]&255]^ce)&255;return le};var U=function(P){if(!(this instanceof U))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new ae(P)};U.prototype.encrypt=function(P){if(P=l(P),P.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=u(P.length),F=u(16),ue=0;ue<P.length;ue+=16)d(P,F,0,ue,ue+16),F=this._aes.encrypt(F),d(F,S,ue);return S},U.prototype.decrypt=function(P){if(P=l(P),P.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=u(P.length),F=u(16),ue=0;ue<P.length;ue+=16)d(P,F,0,ue,ue+16),F=this._aes.decrypt(F),d(F,S,ue);return S};var I=function(P,S){if(!(this instanceof I))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",!S)S=u(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastCipherblock=l(S,!0),this._aes=new ae(P)};I.prototype.encrypt=function(P){if(P=l(P),P.length%16!==0)throw new Error("invalid plaintext size (must be multiple of 16 bytes)");for(var S=u(P.length),F=u(16),ue=0;ue<P.length;ue+=16){d(P,F,0,ue,ue+16);for(var ee=0;ee<16;ee++)F[ee]^=this._lastCipherblock[ee];this._lastCipherblock=this._aes.encrypt(F),d(this._lastCipherblock,S,ue)}return S},I.prototype.decrypt=function(P){if(P=l(P),P.length%16!==0)throw new Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var S=u(P.length),F=u(16),ue=0;ue<P.length;ue+=16){d(P,F,0,ue,ue+16),F=this._aes.decrypt(F);for(var ee=0;ee<16;ee++)S[ue+ee]=F[ee]^this._lastCipherblock[ee];d(P,this._lastCipherblock,0,ue,ue+16)}return S};var x=function(P,S,F){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",!S)S=u(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 size)");F||(F=1),this.segmentSize=F,this._shiftRegister=l(S,!0),this._aes=new ae(P)};x.prototype.encrypt=function(P){if(P.length%this.segmentSize!=0)throw new Error("invalid plaintext size (must be segmentSize bytes)");for(var S=l(P,!0),F,ue=0;ue<S.length;ue+=this.segmentSize){F=this._aes.encrypt(this._shiftRegister);for(var ee=0;ee<this.segmentSize;ee++)S[ue+ee]^=F[ee];d(this._shiftRegister,this._shiftRegister,0,this.segmentSize),d(S,this._shiftRegister,16-this.segmentSize,ue,ue+this.segmentSize)}return S},x.prototype.decrypt=function(P){if(P.length%this.segmentSize!=0)throw new Error("invalid ciphertext size (must be segmentSize bytes)");for(var S=l(P,!0),F,ue=0;ue<S.length;ue+=this.segmentSize){F=this._aes.encrypt(this._shiftRegister);for(var ee=0;ee<this.segmentSize;ee++)S[ue+ee]^=F[ee];d(this._shiftRegister,this._shiftRegister,0,this.segmentSize),d(P,this._shiftRegister,16-this.segmentSize,ue,ue+this.segmentSize)}return S};var T=function(P,S){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",!S)S=u(16);else if(S.length!=16)throw new Error("invalid initialation vector size (must be 16 bytes)");this._lastPrecipher=l(S,!0),this._lastPrecipherIndex=16,this._aes=new ae(P)};T.prototype.encrypt=function(P){for(var S=l(P,!0),F=0;F<S.length;F++)this._lastPrecipherIndex===16&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),S[F]^=this._lastPrecipher[this._lastPrecipherIndex++];return S},T.prototype.decrypt=T.prototype.encrypt;var M=function(P){if(!(this instanceof M))throw Error("Counter must be instanitated with `new`");P!==0&&!P&&(P=1),typeof P=="number"?(this._counter=u(16),this.setValue(P)):this.setBytes(P)};M.prototype.setValue=function(P){if(typeof P!="number"||parseInt(P)!=P)throw new Error("invalid counter value (must be an integer)");for(var S=15;S>=0;--S)this._counter[S]=P%256,P=P>>8},M.prototype.setBytes=function(P){if(P=l(P,!0),P.length!=16)throw new Error("invalid counter bytes size (must be 16 bytes)");this._counter=P},M.prototype.increment=function(){for(var P=15;P>=0;P--)if(this._counter[P]===255)this._counter[P]=0;else{this._counter[P]++;break}};var O=function(P,S){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",S instanceof M||(S=new M(S)),this._counter=S,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new ae(P)};O.prototype.encrypt=function(P){for(var S=l(P,!0),F=0;F<S.length;F++)this._remainingCounterIndex===16&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),S[F]^=this._remainingCounter[this._remainingCounterIndex++];return S},O.prototype.decrypt=O.prototype.encrypt;function z(P){P=l(P,!0);var S=16-P.length%16,F=u(P.length+S);d(P,F);for(var ue=P.length;ue<F.length;ue++)F[ue]=S;return F}function X(P){if(P=l(P,!0),P.length<16)throw new Error("PKCS#7 invalid length");var S=P[P.length-1];if(S>16)throw new Error("PKCS#7 padding byte out of range");for(var F=P.length-S,ue=0;ue<S;ue++)if(P[F+ue]!==S)throw new Error("PKCS#7 invalid padding byte");var ee=u(F);return d(P,ee,0,0,F),ee}var H={AES:ae,Counter:M,ModeOfOperation:{ecb:U,cbc:I,cfb:x,ofb:T,ctr:O},utils:{hex:y,utf8:m},padding:{pkcs7:{pad:z,strip:X}},_arrayTest:{coerceArray:l,createArray:u,copyArray:d}};t.exports=H})()})(aesJs);const aes=aesJsExports,version$2="json-wallets/5.7.0";function looseArrayify(t){return typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),arrayify(t)}function zpad(t,e){for(t=String(t);t.length<e;)t="0"+t;return t}function getPassword(t){return typeof t=="string"?toUtf8Bytes(t,UnicodeNormalizationForm.NFKC):arrayify(t)}function searchPath(t,e){let n=t;const a=e.toLowerCase().split("/");for(let o=0;o<a.length;o++){let l=null;for(const u in n)if(u.toLowerCase()===a[o]){l=n[u];break}if(l===null)return null;n=l}return n}function uuidV4(t){const e=arrayify(t);e[6]=e[6]&15|64,e[8]=e[8]&63|128;const n=hexlify(e);return[n.substring(2,10),n.substring(10,14),n.substring(14,18),n.substring(18,22),n.substring(22,34)].join("-")}const logger$6=new Logger(version$2);class CrowdsaleAccount extends Description{isCrowdsaleAccount(e){return!!(e&&e._isCrowdsaleAccount)}}function decrypt$2(t,e){const n=JSON.parse(t);e=getPassword(e);const a=getAddress(searchPath(n,"ethaddr")),o=looseArrayify(searchPath(n,"encseed"));(!o||o.length%16!==0)&&logger$6.throwArgumentError("invalid encseed","json",t);const l=arrayify(pbkdf2$1(e,e,2e3,32,"sha256")).slice(0,16),u=o.slice(0,16),d=o.slice(16),m=new aes.ModeOfOperation.cbc(l,u),y=aes.padding.pkcs7.strip(arrayify(m.decrypt(d)));let b="";for(let E=0;E<y.length;E++)b+=String.fromCharCode(y[E]);const _=toUtf8Bytes(b),w=keccak256(_);return new CrowdsaleAccount({_isCrowdsaleAccount:!0,address:a,privateKey:w})}function isCrowdsaleWallet(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return e.encseed&&e.ethaddr}function isKeystoreWallet(t){let e=null;try{e=JSON.parse(t)}catch{return!1}return!(!e.version||parseInt(e.version)!==e.version||parseInt(e.version)!==3)}var scryptExports={},scrypt$1={get exports(){return scryptExports},set exports(t){scryptExports=t}};(function(t,e){(function(n){function o(C){const k=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);let B=1779033703,D=3144134277,q=1013904242,j=2773480762,J=1359893119,Y=2600822924,L=528734635,Z=1541459225;const Q=new Uint32Array(64);function oe(O){let z=0,X=O.length;for(;X>=64;){let H=B,P=D,S=q,F=j,ue=J,ee=Y,fe=L,le=Z,ce,pe,se,de,re;for(pe=0;pe<16;pe++)se=z+pe*4,Q[pe]=(O[se]&255)<<24|(O[se+1]&255)<<16|(O[se+2]&255)<<8|O[se+3]&255;for(pe=16;pe<64;pe++)ce=Q[pe-2],de=(ce>>>17|ce<<32-17)^(ce>>>19|ce<<32-19)^ce>>>10,ce=Q[pe-15],re=(ce>>>7|ce<<32-7)^(ce>>>18|ce<<32-18)^ce>>>3,Q[pe]=(de+Q[pe-7]|0)+(re+Q[pe-16]|0)|0;for(pe=0;pe<64;pe++)de=(((ue>>>6|ue<<32-6)^(ue>>>11|ue<<32-11)^(ue>>>25|ue<<32-25))+(ue&ee^~ue&fe)|0)+(le+(k[pe]+Q[pe]|0)|0)|0,re=((H>>>2|H<<32-2)^(H>>>13|H<<32-13)^(H>>>22|H<<32-22))+(H&P^H&S^P&S)|0,le=fe,fe=ee,ee=ue,ue=F+de|0,F=S,S=P,P=H,H=de+re|0;B=B+H|0,D=D+P|0,q=q+S|0,j=j+F|0,J=J+ue|0,Y=Y+ee|0,L=L+fe|0,Z=Z+le|0,z+=64,X-=64}}oe(C);let ae,U=C.length%64,I=C.length/536870912|0,x=C.length<<3,T=U<56?56:120,M=C.slice(C.length-U,C.length);for(M.push(128),ae=U+1;ae<T;ae++)M.push(0);return M.push(I>>>24&255),M.push(I>>>16&255),M.push(I>>>8&255),M.push(I>>>0&255),M.push(x>>>24&255),M.push(x>>>16&255),M.push(x>>>8&255),M.push(x>>>0&255),oe(M),[B>>>24&255,B>>>16&255,B>>>8&255,B>>>0&255,D>>>24&255,D>>>16&255,D>>>8&255,D>>>0&255,q>>>24&255,q>>>16&255,q>>>8&255,q>>>0&255,j>>>24&255,j>>>16&255,j>>>8&255,j>>>0&255,J>>>24&255,J>>>16&255,J>>>8&255,J>>>0&255,Y>>>24&255,Y>>>16&255,Y>>>8&255,Y>>>0&255,L>>>24&255,L>>>16&255,L>>>8&255,L>>>0&255,Z>>>24&255,Z>>>16&255,Z>>>8&255,Z>>>0&255]}function l(C,k,B){C=C.length<=64?C:o(C);const D=64+k.length+4,q=new Array(D),j=new Array(64);let J,Y=[];for(J=0;J<64;J++)q[J]=54;for(J=0;J<C.length;J++)q[J]^=C[J];for(J=0;J<k.length;J++)q[64+J]=k[J];for(J=D-4;J<D;J++)q[J]=0;for(J=0;J<64;J++)j[J]=92;for(J=0;J<C.length;J++)j[J]^=C[J];function L(){for(let Z=D-1;Z>=D-4;Z--){if(q[Z]++,q[Z]<=255)return;q[Z]=0}}for(;B>=32;)L(),Y=Y.concat(o(j.concat(o(q)))),B-=32;return B>0&&(L(),Y=Y.concat(o(j.concat(o(q))).slice(0,B))),Y}function u(C,k,B,D,q){let j;for(b(C,(2*B-1)*16,q,0,16),j=0;j<2*B;j++)y(C,j*16,q,16),m(q,D),b(q,0,C,k+j*16,16);for(j=0;j<B;j++)b(C,k+j*2*16,C,j*16,16);for(j=0;j<B;j++)b(C,k+(j*2+1)*16,C,(j+B)*16,16)}function d(C,k){return C<<k|C>>>32-k}function m(C,k){b(C,0,k,0,16);for(let B=8;B>0;B-=2)k[4]^=d(k[0]+k[12],7),k[8]^=d(k[4]+k[0],9),k[12]^=d(k[8]+k[4],13),k[0]^=d(k[12]+k[8],18),k[9]^=d(k[5]+k[1],7),k[13]^=d(k[9]+k[5],9),k[1]^=d(k[13]+k[9],13),k[5]^=d(k[1]+k[13],18),k[14]^=d(k[10]+k[6],7),k[2]^=d(k[14]+k[10],9),k[6]^=d(k[2]+k[14],13),k[10]^=d(k[6]+k[2],18),k[3]^=d(k[15]+k[11],7),k[7]^=d(k[3]+k[15],9),k[11]^=d(k[7]+k[3],13),k[15]^=d(k[11]+k[7],18),k[1]^=d(k[0]+k[3],7),k[2]^=d(k[1]+k[0],9),k[3]^=d(k[2]+k[1],13),k[0]^=d(k[3]+k[2],18),k[6]^=d(k[5]+k[4],7),k[7]^=d(k[6]+k[5],9),k[4]^=d(k[7]+k[6],13),k[5]^=d(k[4]+k[7],18),k[11]^=d(k[10]+k[9],7),k[8]^=d(k[11]+k[10],9),k[9]^=d(k[8]+k[11],13),k[10]^=d(k[9]+k[8],18),k[12]^=d(k[15]+k[14],7),k[13]^=d(k[12]+k[15],9),k[14]^=d(k[13]+k[12],13),k[15]^=d(k[14]+k[13],18);for(let B=0;B<16;++B)C[B]+=k[B]}function y(C,k,B,D){for(let q=0;q<D;q++)B[q]^=C[k+q]}function b(C,k,B,D,q){for(;q--;)B[D++]=C[k++]}function _(C){if(!C||typeof C.length!="number")return!1;for(let k=0;k<C.length;k++){const B=C[k];if(typeof B!="number"||B%1||B<0||B>=256)return!1}return!0}function w(C,k){if(typeof C!="number"||C%1)throw new Error("invalid "+k);return C}function E(C,k,B,D,q,j,J){if(B=w(B,"N"),D=w(D,"r"),q=w(q,"p"),j=w(j,"dkLen"),B===0||B&B-1)throw new Error("N must be power of 2");if(B>2147483647/128/D)throw new Error("N too large");if(D>2147483647/128/q)throw new Error("r too large");if(!_(C))throw new Error("password must be an array or buffer");if(C=Array.prototype.slice.call(C),!_(k))throw new Error("salt must be an array or buffer");k=Array.prototype.slice.call(k);let Y=l(C,k,q*128*D);const L=new Uint32Array(q*32*D);for(let ue=0;ue<L.length;ue++){const ee=ue*4;L[ue]=(Y[ee+3]&255)<<24|(Y[ee+2]&255)<<16|(Y[ee+1]&255)<<8|(Y[ee+0]&255)<<0}const Z=new Uint32Array(64*D),Q=new Uint32Array(32*D*B),oe=32*D,ae=new Uint32Array(16),U=new Uint32Array(16),I=q*B*2;let x=0,T=null,M=!1,O=0,z=0,X,H;const P=J?parseInt(1e3/D):4294967295,S=typeof setImmediate<"u"?setImmediate:setTimeout,F=function(){if(M)return J(new Error("cancelled"),x/I);let ue;switch(O){case 0:H=z*32*D,b(L,H,Z,0,oe),O=1,X=0;case 1:ue=B-X,ue>P&&(ue=P);for(let fe=0;fe<ue;fe++)b(Z,0,Q,(X+fe)*oe,oe),u(Z,oe,D,ae,U);if(X+=ue,x+=ue,J){const fe=parseInt(1e3*x/I);if(fe!==T){if(M=J(null,x/I),M)break;T=fe}}if(X<B)break;X=0,O=2;case 2:ue=B-X,ue>P&&(ue=P);for(let fe=0;fe<ue;fe++){const le=(2*D-1)*16,ce=Z[le]&B-1;y(Q,ce*oe,Z,oe),u(Z,oe,D,ae,U)}if(X+=ue,x+=ue,J){const fe=parseInt(1e3*x/I);if(fe!==T){if(M=J(null,x/I),M)break;T=fe}}if(X<B)break;if(b(Z,0,L,H,oe),z++,z<q){O=0;break}Y=[];for(let fe=0;fe<L.length;fe++)Y.push(L[fe]>>0&255),Y.push(L[fe]>>8&255),Y.push(L[fe]>>16&255),Y.push(L[fe]>>24&255);const ee=l(C,Y,j);return J&&J(null,1,ee),ee}J&&S(F)};if(!J)for(;;){const ue=F();if(ue!=null)return ue}F()}const A={scrypt:function(C,k,B,D,q,j,J){return new Promise(function(Y,L){let Z=0;J&&J(0),E(C,k,B,D,q,j,function(Q,oe,ae){if(Q)L(Q);else if(ae)J&&Z!==1&&J(1),Y(new Uint8Array(ae));else if(J&&oe!==Z)return Z=oe,J(oe)})})},syncScrypt:function(C,k,B,D,q,j){return new Uint8Array(E(C,k,B,D,q,j))}};t.exports=A})()})(scrypt$1);const scrypt=scryptExports;var __awaiter$1=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(b){try{y(a.next(b))}catch(_){u(_)}}function m(b){try{y(a.throw(b))}catch(_){u(_)}}function y(b){b.done?l(b.value):o(b.value).then(d,m)}y((a=a.apply(t,e||[])).next())})};const logger$5=new Logger(version$2);function hasMnemonic$1(t){return t!=null&&t.mnemonic&&t.mnemonic.phrase}class KeystoreAccount extends Description{isKeystoreAccount(e){return!!(e&&e._isKeystoreAccount)}}function _decrypt(t,e,n){if(searchPath(t,"crypto/cipher")==="aes-128-ctr"){const o=looseArrayify(searchPath(t,"crypto/cipherparams/iv")),l=new aes.Counter(o),u=new aes.ModeOfOperation.ctr(e,l);return arrayify(u.decrypt(n))}return null}function _getAccount(t,e){const n=looseArrayify(searchPath(t,"crypto/ciphertext"));if(hexlify(keccak256(concat([e.slice(16,32),n]))).substring(2)!==searchPath(t,"crypto/mac").toLowerCase())throw new Error("invalid password");const o=_decrypt(t,e.slice(0,16),n);o||logger$5.throwError("unsupported cipher",Logger.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});const l=e.slice(32,64),u=computeAddress(o);if(t.address){let m=t.address.toLowerCase();if(m.substring(0,2)!=="0x"&&(m="0x"+m),getAddress(m)!==u)throw new Error("address mismatch")}const d={_isKeystoreAccount:!0,address:u,privateKey:hexlify(o)};if(searchPath(t,"x-ethers/version")==="0.1"){const m=looseArrayify(searchPath(t,"x-ethers/mnemonicCiphertext")),y=looseArrayify(searchPath(t,"x-ethers/mnemonicCounter")),b=new aes.Counter(y),_=new aes.ModeOfOperation.ctr(l,b),w=searchPath(t,"x-ethers/path")||defaultPath,E=searchPath(t,"x-ethers/locale")||"en",A=arrayify(_.decrypt(m));try{const C=entropyToMnemonic(A,E),k=HDNode.fromMnemonic(C,null,E).derivePath(w);if(k.privateKey!=d.privateKey)throw new Error("mnemonic mismatch");d.mnemonic=k.mnemonic}catch(C){if(C.code!==Logger.errors.INVALID_ARGUMENT||C.argument!=="wordlist")throw C}}return new KeystoreAccount(d)}function pbkdf2Sync(t,e,n,a,o){return arrayify(pbkdf2$1(t,e,n,a,o))}function pbkdf2(t,e,n,a,o){return Promise.resolve(pbkdf2Sync(t,e,n,a,o))}function _computeKdfKey(t,e,n,a,o){const l=getPassword(e),u=searchPath(t,"crypto/kdf");if(u&&typeof u=="string"){const d=function(m,y){return logger$5.throwArgumentError("invalid key-derivation function parameters",m,y)};if(u.toLowerCase()==="scrypt"){const m=looseArrayify(searchPath(t,"crypto/kdfparams/salt")),y=parseInt(searchPath(t,"crypto/kdfparams/n")),b=parseInt(searchPath(t,"crypto/kdfparams/r")),_=parseInt(searchPath(t,"crypto/kdfparams/p"));(!y||!b||!_)&&d("kdf",u),y&y-1&&d("N",y);const w=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return w!==32&&d("dklen",w),a(l,m,y,b,_,64,o)}else if(u.toLowerCase()==="pbkdf2"){const m=looseArrayify(searchPath(t,"crypto/kdfparams/salt"));let y=null;const b=searchPath(t,"crypto/kdfparams/prf");b==="hmac-sha256"?y="sha256":b==="hmac-sha512"?y="sha512":d("prf",b);const _=parseInt(searchPath(t,"crypto/kdfparams/c")),w=parseInt(searchPath(t,"crypto/kdfparams/dklen"));return w!==32&&d("dklen",w),n(l,m,_,w,y)}}return logger$5.throwArgumentError("unsupported key-derivation function","kdf",u)}function decryptSync(t,e){const n=JSON.parse(t),a=_computeKdfKey(n,e,pbkdf2Sync,scrypt.syncScrypt);return _getAccount(n,a)}function decrypt$1(t,e,n){return __awaiter$1(this,void 0,void 0,function*(){const a=JSON.parse(t),o=yield _computeKdfKey(a,e,pbkdf2,scrypt.scrypt,n);return _getAccount(a,o)})}function encrypt$1(t,e,n,a){try{if(getAddress(t.address)!==computeAddress(t.privateKey))throw new Error("address/privateKey mismatch");if(hasMnemonic$1(t)){const k=t.mnemonic;if(HDNode.fromMnemonic(k.phrase,null,k.locale).derivePath(k.path||defaultPath).privateKey!=t.privateKey)throw new Error("mnemonic mismatch")}}catch(k){return Promise.reject(k)}typeof n=="function"&&!a&&(a=n,n={}),n||(n={});const o=arrayify(t.privateKey),l=getPassword(e);let u=null,d=null,m=null;if(hasMnemonic$1(t)){const k=t.mnemonic;u=arrayify(mnemonicToEntropy(k.phrase,k.locale||"en")),d=k.path||defaultPath,m=k.locale||"en"}let y=n.client;y||(y="ethers.js");let b=null;n.salt?b=arrayify(n.salt):b=randomBytes(32);let _=null;if(n.iv){if(_=arrayify(n.iv),_.length!==16)throw new Error("invalid iv")}else _=randomBytes(16);let w=null;if(n.uuid){if(w=arrayify(n.uuid),w.length!==16)throw new Error("invalid uuid")}else w=randomBytes(16);let E=1<<17,A=8,C=1;return n.scrypt&&(n.scrypt.N&&(E=n.scrypt.N),n.scrypt.r&&(A=n.scrypt.r),n.scrypt.p&&(C=n.scrypt.p)),scrypt.scrypt(l,b,E,A,C,64,a).then(k=>{k=arrayify(k);const B=k.slice(0,16),D=k.slice(16,32),q=k.slice(32,64),j=new aes.Counter(_),J=new aes.ModeOfOperation.ctr(B,j),Y=arrayify(J.encrypt(o)),L=keccak256(concat([D,Y])),Z={address:t.address.substring(2).toLowerCase(),id:uuidV4(w),version:3,crypto:{cipher:"aes-128-ctr",cipherparams:{iv:hexlify(_).substring(2)},ciphertext:hexlify(Y).substring(2),kdf:"scrypt",kdfparams:{salt:hexlify(b).substring(2),n:E,dklen:32,p:C,r:A},mac:L.substring(2)}};if(u){const Q=randomBytes(16),oe=new aes.Counter(Q),ae=new aes.ModeOfOperation.ctr(q,oe),U=arrayify(ae.encrypt(u)),I=new Date,x=I.getUTCFullYear()+"-"+zpad(I.getUTCMonth()+1,2)+"-"+zpad(I.getUTCDate(),2)+"T"+zpad(I.getUTCHours(),2)+"-"+zpad(I.getUTCMinutes(),2)+"-"+zpad(I.getUTCSeconds(),2)+".0Z";Z["x-ethers"]={client:y,gethFilename:"UTC--"+x+"--"+Z.address,mnemonicCounter:hexlify(Q).substring(2),mnemonicCiphertext:hexlify(U).substring(2),path:d,locale:m,version:"0.1"}}return JSON.stringify(Z)})}function decryptJsonWallet(t,e,n){if(isCrowdsaleWallet(t)){n&&n(0);const a=decrypt$2(t,e);return n&&n(1),Promise.resolve(a)}return isKeystoreWallet(t)?decrypt$1(t,e,n):Promise.reject(new Error("invalid JSON wallet"))}function decryptJsonWalletSync(t,e){if(isCrowdsaleWallet(t))return decrypt$2(t,e);if(isKeystoreWallet(t))return decryptSync(t,e);throw new Error("invalid JSON wallet")}const version$1="wallet/5.7.0";var __awaiter=globalThis&&globalThis.__awaiter||function(t,e,n,a){function o(l){return l instanceof n?l:new n(function(u){u(l)})}return new(n||(n=Promise))(function(l,u){function d(b){try{y(a.next(b))}catch(_){u(_)}}function m(b){try{y(a.throw(b))}catch(_){u(_)}}function y(b){b.done?l(b.value):o(b.value).then(d,m)}y((a=a.apply(t,e||[])).next())})};const logger$4=new Logger(version$1);function isAccount(t){return t!=null&&isHexString(t.privateKey,32)&&t.address!=null}function hasMnemonic(t){const e=t.mnemonic;return e&&e.phrase}class Wallet extends Signer{constructor(e,n){if(super(),isAccount(e)){const a=new SigningKey(e.privateKey);if(defineReadOnly(this,"_signingKey",()=>a),defineReadOnly(this,"address",computeAddress(this.publicKey)),this.address!==getAddress(e.address)&&logger$4.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),hasMnemonic(e)){const o=e.mnemonic;defineReadOnly(this,"_mnemonic",()=>({phrase:o.phrase,path:o.path||defaultPath,locale:o.locale||"en"}));const l=this.mnemonic,u=HDNode.fromMnemonic(l.phrase,null,l.locale).derivePath(l.path);computeAddress(u.privateKey)!==this.address&&logger$4.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else defineReadOnly(this,"_mnemonic",()=>null)}else{if(SigningKey.isSigningKey(e))e.curve!=="secp256k1"&&logger$4.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),defineReadOnly(this,"_signingKey",()=>e);else{typeof e=="string"&&e.match(/^[0-9a-f]*$/i)&&e.length===64&&(e="0x"+e);const a=new SigningKey(e);defineReadOnly(this,"_signingKey",()=>a)}defineReadOnly(this,"_mnemonic",()=>null),defineReadOnly(this,"address",computeAddress(this.publicKey))}n&&!Provider.isProvider(n)&&logger$4.throwArgumentError("invalid provider","provider",n),defineReadOnly(this,"provider",n||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new Wallet(this,e)}signTransaction(e){return resolveProperties(e).then(n=>{n.from!=null&&(getAddress(n.from)!==this.address&&logger$4.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete n.from);const a=this._signingKey().signDigest(keccak256(serialize(n)));return serialize(n,a)})}signMessage(e){return __awaiter(this,void 0,void 0,function*(){return joinSignature(this._signingKey().signDigest(hashMessage(e)))})}_signTypedData(e,n,a){return __awaiter(this,void 0,void 0,function*(){const o=yield TypedDataEncoder.resolveNames(e,n,a,l=>(this.provider==null&&logger$4.throwError("cannot resolve ENS names without a provider",Logger.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:l}),this.provider.resolveName(l)));return joinSignature(this._signingKey().signDigest(TypedDataEncoder.hash(o.domain,n,o.value)))})}encrypt(e,n,a){if(typeof n=="function"&&!a&&(a=n,n={}),a&&typeof a!="function")throw new Error("invalid callback");return n||(n={}),encrypt$1(this,e,n,a)}static createRandom(e){let n=randomBytes(16);e||(e={}),e.extraEntropy&&(n=arrayify(hexDataSlice(keccak256(concat([n,e.extraEntropy])),0,16)));const a=entropyToMnemonic(n,e.locale);return Wallet.fromMnemonic(a,e.path,e.locale)}static fromEncryptedJson(e,n,a){return decryptJsonWallet(e,n,a).then(o=>new Wallet(o))}static fromEncryptedJsonSync(e,n){return new Wallet(decryptJsonWalletSync(e,n))}static fromMnemonic(e,n,a){return n||(n=defaultPath),new Wallet(HDNode.fromMnemonic(e,null,a).derivePath(n))}}function verifyMessage(t,e){return recoverAddress(hashMessage(t),e)}function getEIP191Verifier(){return{eip191:async(t,e)=>{verifyEIP191Signature(t,e)}}}const LEGACY_CHAIN_ID_REORG_DATE=new Date("2022-09-20").valueOf();function verifyEIP191Signature(t,e){assertSigned(t),verifyTimeChecks(t,e);const a=[verifyMessage(SiweMessage.fromCacao(t).toMessage(),t.s.s).toLowerCase()];if(Date.parse(t.p.iat)<=LEGACY_CHAIN_ID_REORG_DATE){const l=verifyMessage(asLegacyChainIdString(SiweMessage.fromCacao(t),"Ethereum"),t.s.s).toLowerCase();a.push(l)}const o=AccountId.parse(t.p.iss.replace("did:pkh:","")).address.toLowerCase();if(!a.includes(o))throw new Error("Signature does not belong to issuer")}function asUint8Array(t){return globalThis.Buffer!=null?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t}function allocUnsafe(t=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?asUint8Array(globalThis.Buffer.allocUnsafe(t)):new Uint8Array(t)}function createCodec$1(t,e,n,a){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:n},decoder:{decode:a}}}const string=createCodec$1("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),ascii=createCodec$1("ascii","a",t=>{let e="a";for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},t=>{t=t.substring(1);const e=allocUnsafe(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}),BASES={utf8:string,"utf-8":string,hex:bases$1.base16,latin1:ascii,ascii,binary:ascii,...bases$1};function toString$5(t,e="utf8"){const n=BASES[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(t.buffer,t.byteOffset,t.byteLength).toString("utf8"):n.encoder.encode(t).substring(1)}function fromString$2(t,e="utf8"){const n=BASES[e];if(!n)throw new Error(`Unsupported encoding "${e}"`);return(e==="utf8"||e==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?asUint8Array(globalThis.Buffer.from(t,"utf-8")):n.decoder.decode(`${n.prefix}${t}`)}function randomString(){return toString$5(random.randomBytes(16),"base64")}const B64="base64pad",B64_URL="base64url";function encodeBase64(t){return toString$5(t,B64)}function encodeBase64Url(t){return toString$5(t,B64_URL)}function decodeBase64(t){return fromString$2(t,B64)}function base64urlToJSON(t){return JSON.parse(toString$5(fromString$2(t,B64_URL)))}function fromDagJWS(t){if(t.signatures.length>1)throw new Error("Cant convert to compact jws");return`${t.signatures[0].protected}.${t.payload}.${t.signatures[0].signature}`}function didWithTime(t,e){if(e){const n=e.toISOString().split(".")[0]+"Z";return`${t}?versionTime=${n}`}else return t}function extractControllers(t){return t?Array.isArray(t)?t:[t]:[]}const verifiers={...getEIP191Verifier()};function isResolver(t){return"registry"in t&&"cache"in t}class DID{get capability(){if(!this._capability)throw new Error("DID has no capability attached");return this._capability}get hasCapability(){return this._capability!=null}get parent(){if(!this._parentId)throw new Error("DID has no parent DID");return this._parentId}get hasParent(){return this._parentId!=null}get id(){if(this._id==null)throw new Error("DID is not authenticated");return this._id}get authenticated(){return this._id!=null}withCapability(e){return new DID({provider:this._client?.connection,resolver:this._resolver,capability:e,parent:this._parentId})}setProvider(e){if(this._client==null)this._client=new RPCClient(e);else if(this._client.connection!==e)throw new Error("A different provider is already set, create a new DID instance to use another provider")}setResolver(e,n){this._resolver=isResolver(e)?e:new Resolver(e,n)}async authenticate({provider:e,paths:n=[],aud:a}={}){if(e!=null&&this.setProvider(e),this._client==null)throw new Error("No provider available");const o=randomString(),l=await this._client.request("did_authenticate",{nonce:o,aud:a,paths:n}),{kid:u}=await this.verifyJWS(l),d=base64urlToJSON(l.payload);if(!u.includes(d.did))throw new Error("Invalid authencation response, kid mismatch");if(d.nonce!==o)throw new Error("Invalid authencation response, wrong nonce");if(d.aud!==a)throw new Error("Invalid authencation response, wrong aud");if(d.exp<Date.now()/1e3)throw new Error("Invalid authencation response, expired");return this._id=d.did,this._id}async createJWS(e,n={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");if(this._capability){const o=this._capability.p.exp;if(o&&Date.parse(o)<Date.now())throw new Error("Capability is expired, cannot create a valid signature");const l=await CacaoBlock.fromCacao(this._capability),u=CID$1.asCID(l.cid);if(!u)throw new Error("Capability CID of the JWS cannot be set to the capability payload cid as they are incompatible");n.protected=n.protected||{},n.protected.cap=`ipfs://${u?.toString()}`}const{jws:a}=await this._client.request("did_createJWS",{did:this._id,...n,payload:e});return a}async createDagJWS(e,n={}){const{cid:a,linkedBlock:o}=await encodePayload(e),l=encodeBase64Url(a.bytes);Object.assign(n,{linkedBlock:encodeBase64(o)});const u=await this.createJWS(l,n),d=CID$1.asCID(a);if(!d)throw new Error("CID of the JWS cannot be set to the encoded payload cid as they are incompatible");if(u.link=d,this._capability){const m=await CacaoBlock.fromCacao(this._capability);return{jws:u,linkedBlock:o,cacaoBlock:m.bytes}}return{jws:u,linkedBlock:o}}async verifyJWS(e,n={}){n=Object.assign({verifiers},n),typeof e!="string"&&(e=fromDagJWS(e));const a=base64urlToJSON(e.split(".")[0]).kid;if(!a)throw new Error('No "kid" found in jws');const o=await this.resolve(a);if(!n.disableTimecheck){const y=o.didDocumentMetadata?.nextUpdate;if(y){const _=n.revocationPhaseOutSecs?n.revocationPhaseOutSecs*1e3:0,w=new Date(y).valueOf()+_;if(!(n.atTime&&n.atTime.getTime()<w))throw new Error(`invalid_jws: signature authored with a revoked DID version: ${a}`)}const b=o.didDocumentMetadata?.updated;if(b&&n.atTime&&n.atTime.getTime()<new Date(b).valueOf())throw new Error(`invalid_jws: signature authored before creation of DID version: ${a}`)}const u=o.didDocument?.id;if(n.issuer&&n.issuer===n.capability?.p.iss&&u===n.capability.p.aud){if(!n.verifiers)throw new Error("Registered verifiers needed for CACAO");await Cacao.verify(n.capability,{disableExpirationCheck:n.disableTimecheck,atTime:n.atTime?n.atTime:void 0,revocationPhaseOutSecs:n.revocationPhaseOutSecs,verifiers:n.verifiers??{}})}else if(n.issuer&&n.issuer!==u){const y=didWithTime(n.issuer,n.atTime),_=(await this.resolve(y)).didDocument?.controller,w=extractControllers(_);if(n.capability?.s&&n.capability.p.aud===u&&w.includes(n.capability.p.iss))await Cacao.verify(n.capability,{atTime:n.atTime?n.atTime:void 0,revocationPhaseOutSecs:n.revocationPhaseOutSecs,verifiers:n.verifiers??{}});else if(!(u?w.includes(u):!1))throw new Error(`invalid_jws: not a valid verificationMethod for issuer: ${a}`)}const d=o.didDocument?.verificationMethod||[];verifyJWS(e,d);let m;try{m=base64urlToJSON(e.split(".")[1])}catch{}return{kid:a,payload:m,didResolutionResult:o}}async createJWE(e,n,a={}){const o=await resolveX25519Encrypters(n,this._resolver);return createJWE(e,o,a.protectedHeader,a.aad)}async createDagJWE(e,n,a={}){const o=await prepareCleartext(e);return this.createJWE(o,n,a)}async decryptJWE(e,n={}){if(this._client==null)throw new Error("No provider available");if(this._id==null)throw new Error("DID is not authenticated");const{cleartext:a}=await this._client.request("did_decryptJWE",{did:this._id,...n,jwe:e});return decodeBase64(a)}async decryptDagJWE(e){const n=await this.decryptJWE(e);return decodeCleartext(n)}async resolve(e){const n=await this._resolver.resolve(e);if(n.didResolutionMetadata.error){const{error:a,message:o}=n.didResolutionMetadata,l=o?`, ${o}`:"";throw new Error(`Failed to resolve ${e}: ${a}${l}`)}return n}constructor({provider:e,resolver:n={},resolverOptions:a,capability:o,parent:l}={}){if(e!=null&&(this._client=new RPCClient(e)),o){if(this._capability=o,this._parentId=this._capability.p.iss,l&&this._parentId!==l)throw new Error("Capability issuer and parent not equal")}else l&&(this._parentId=l);this.setResolver(n,a)}}const TYPE="DID";class DIDIdentityProvider extends IdentityProvider{constructor({didProvider:e}){super(),this.did=new DID({resolver:DIDIdentityProvider.did._resolver,provider:e})}static get type(){return TYPE}async getId({space:e}){return this.did.authenticated||await this.did.authenticate(),this.did.id}async signIdentity(e,{space:n}){this.did.authenticated||await this.did.authenticate();const a=toString$8(fromString$5(e,"base16"),"base64url"),o=await this.did.createJWS(a);return`${o.signatures[0].protected}..${o.signatures[0].signature}`}static setDIDResolver(e){this.did?this.did.setResolver(e):this.did=new DID({resolver:e})}static async verifyIdentity(e){if(!this.did)throw new Error("The DID resolver must first be set with setDIDResolver()");const n=e.publicKey+e.signatures.id;try{const a=toString$8(fromString$5(n,"base16"),"base64url"),[o,l]=e.signatures.publicKey.split(".."),u=[o,a,l].join(".");await this.did.verifyJWS(u)}catch{return!1}return!0}}const type$4="ethereum";class EthIdentityProvider extends IdentityProvider{constructor(e={}){super(),this.wallet=e.wallet}static get type(){return type$4}async getId(e={}){return this.wallet||(this.wallet=await this._createWallet(e)),this.wallet.getAddress()}async signIdentity(e,n={}){const a=this.wallet;if(!a)throw new Error("wallet is required");return a.signMessage(e)}static async verifyIdentity(e){return verifyMessage(e.publicKey+e.signatures.id,e.signatures.publicKey)===e.id}async _createWallet(e={}){if(e.mnemonicOpts){if(!e.mnemonicOpts.mnemonic)throw new Error("mnemonic is required");return Wallet.fromMnemonic(e.mnemonicOpts.mnemonic,e.mnemonicOpts.path,e.mnemonicOpts.wordlist)}if(e.encryptedJsonOpts){if(!e.encryptedJsonOpts.json)throw new Error("encrypted json is required");if(!e.encryptedJsonOpts.password)throw new Error("password for encrypted json is required");return Wallet.fromEncryptedJson(e.encryptedJsonOpts.json,e.encryptedJsonOpts.password,e.encryptedJsonOpts.progressCallback)}return Wallet.createRandom()}}const defaultType="orbitdb",identityKeysPath=path.join("./orbitdb","identity","identitykeys"),supportedTypes$1={orbitdb:OrbitDBIdentityProvider,[DIDIdentityProvider.type]:DIDIdentityProvider,[EthIdentityProvider.type]:EthIdentityProvider},getHandlerFor$1=t=>{if(!Identities.isSupported(t))throw new Error(`IdentityProvider type '${t}' is not supported`);return supportedTypes$1[t]};class Identities{constructor(e){this._keystore=e.keystore,this._signingKeystore=e.signingKeystore||this._keystore,this._knownIdentities=e.cache||new lru(e.cacheSize||100)}static get IdentityProvider(){return IdentityProvider}get keystore(){return this._keystore}get signingKeystore(){return this._signingKeystore}async sign(e,n){const a=await this.keystore.getKey(e.id);if(!a)throw new Error("Private signing key not found from Keystore");return await this.keystore.sign(a,n)}async verify(e,n,a,o="v1"){return this.keystore.verify(e,n,a,o)}async createIdentity(e={}){const n=e.keystore||this.keystore,a=e.type||defaultType,o=a===defaultType?new OrbitDBIdentityProvider(e.signingKeystore||n):new(getHandlerFor$1(a))(e),l=await o.getId(e);e.migrate&&await e.migrate({targetStore:n._store,targetId:l});const{publicKey:u,idSignature:d}=await this.signId(l),m=await o.signIdentity(u+d,e);return new Identity(l,u,d,m,a,this)}async signId(e){const n=this.keystore,a=await n.getKey(e)||await n.createKey(e),o=n.getPublic(a),l=await n.sign(a,e);return{publicKey:o,idSignature:l}}async verifyIdentity(e){if(!Identity.isIdentity(e))return!1;const n=this._knownIdentities.get(e.signatures.id);if(n)return e.id===n.id&&e.publicKey===n.publicKey&&e.signatures.id===n.signatures.id&&e.signatures.publicKey===n.signatures.publicKey;if(!await this.keystore.verify(e.signatures.id,e.publicKey,e.id))return!1;const l=await getHandlerFor$1(e.type).verifyIdentity(e);return l&&this._knownIdentities.set(e.signatures.id,Identity.toJSON(e)),l}static async verifyIdentity(e){return!Identity.isIdentity(e)||!await Keystore.verify(e.signatures.id,e.publicKey,e.id)?!1:getHandlerFor$1(e.type).verifyIdentity(e)}static async createIdentity(e={}){return e.keystore||(e.keystore=new Keystore(e.identityKeysPath||identityKeysPath)),e.signingKeystore||(e.signingKeysPath?e.signingKeystore=new Keystore(e.signingKeysPath):e.signingKeystore=e.keystore),await e.keystore.open(),await e.signingKeystore.open(),e=Object.assign({},{type:defaultType},e),new Identities(e).createIdentity(e)}static isSupported(e){return Object.keys(supportedTypes$1).includes(e)}static addIdentityProvider(e){if(!e)throw new Error("IdentityProvider class needs to be given as an option");if(!e.type||typeof e.type!="string")throw new Error("Given IdentityProvider class needs to implement: static get type() { /* return a string */ }.");supportedTypes$1[e.type]=e}static removeIdentityProvider(e){delete supportedTypes$1[e]}}class AccessController extends eventsExports.EventEmitter{static async create(e,n){}static get type(){throw new Error("'static get type ()' needs to be defined in the inheriting class")}get type(){return this.constructor.type}get address(){}async canAppend(e,n){}async grant(e,n){return!1}async revoke(e,n){return!1}async load(e){}async save(){}async close(){}}class AccessControllerManifest{constructor(e,n={}){this.type=e,this.params=n}static async resolve(e,n,a={}){if(a.skipManifest){if(!a.type)throw new Error("No manifest, access-controller type required");return new AccessControllerManifest(a.type,{address:n})}else{n.indexOf("/ipfs")===0&&(n=n.split("/")[2]);const{type:o,params:l}=await read$7(e,n);return new AccessControllerManifest(o,l)}}static async create(e,n,a){return a.skipManifest?a.address:write$3(e,"dag-cbor",{type:n,params:a})}}const type$3="legacy-ipfs";class LegacyIPFSAccessController extends AccessController{constructor(e,n){super(),this._ipfs=e,this._write=Array.from(n.write||[])}static get type(){return type$3}get write(){return this._write}async canAppend(e,n){const a=e.key;return!!(this.write.includes(a)||this.write.includes("*"))}async load(e){e.indexOf("/ipfs")===0&&(e=e.split("/")[2]);try{const n=await read$7(this._ipfs,e);this._write=n.write}catch(n){console.log("LegacyIPFSAccessController.load ERROR:",n)}}async save(e){let n;const a={admin:[],write:this.write,read:[]};try{n=await write$3(this._ipfs,"raw",safeBufferExports.Buffer.from(JSON.stringify(a,null,2)),{format:"dag-pb"})}catch(o){console.log("LegacyIPFSAccessController.save ERROR:",o)}return{address:n,skipManifest:!0}}static async create(e,n={}){return n={...n,write:n.write||[e.identity.publicKey]},new LegacyIPFSAccessController(e._ipfs,n)}}const read$4=async(t,e,n={})=>{const a=await read$7(t,e,n);return typeof a.write=="string"?JSON.parse(a.write):a.write},write$2=write$3,type$2="ipfs";class IPFSAccessController extends AccessController{constructor(e,n){super(),this._ipfs=e,this._write=Array.from(n.write||[])}static get type(){return type$2}get write(){return this._write}async canAppend(e,n){const a=e.identity.id;return this.write.includes(a)||this.write.includes("*")?n.verifyIdentity(e.identity):!1}async load(e){e.indexOf("/ipfs")===0&&(e=e.split("/")[2]);try{this._write=await read$4(this._ipfs,e)}catch(n){console.log("IPFSAccessController.load ERROR:",n)}}async save(){let e;try{e=await write$2(this._ipfs,"dag-cbor",{write:JSON.stringify(this.write,null,2)})}catch(n){console.log("IPFSAccessController.save ERROR:",n)}return{address:e}}static async create(e,n={}){return n={...n,write:n.write||[e.identity.id]},new IPFSAccessController(e._ipfs,n)}}async function pMapSeries(t,e){const n=[];let a=0;for(const o of t)n.push(await e(await o,a++));return n}const ensureAddress$1=t=>t.toString().split("/").pop()==="_access"?t:path.join(t,"/_access"),type$1="orbitdb";class OrbitDBAccessController extends AccessController{constructor(e,n){super(),this._orbitdb=e,this._db=null,this._options=n||{}}static get type(){return type$1}get address(){return this._db.address}async canAppend(e,n){const a=new Set([...this.get("write"),...this.get("admin")]);return a.has(e.identity.id)||a.has("*")?await n.verifyIdentity(e.identity):!1}get capabilities(){if(this._db){const e=this._db.index,n=a=>{const o=a[0];e[o]=new Set([...e[o]||[],...a[1]])};return Object.entries({...e,admin:new Set([...e.admin||[],...this._db.access.write])}).forEach(n),e}return{}}get(e){return this.capabilities[e]||new Set([])}async close(){await this._db.close()}async load(e){this._db&&await this._db.close(),this._db=await this._orbitdb.keyvalue(ensureAddress$1(e),{accessController:{type:"ipfs",write:this._options.admin||[this._orbitdb.identity.id]},sync:!0}),this._db.events.on("ready",this._onUpdate.bind(this)),this._db.events.on("write",this._onUpdate.bind(this)),this._db.events.on("replicated",this._onUpdate.bind(this)),await this._db.load()}async save(){return{address:this._db.address.toString()}}async hasCapability(e,n){const a=new Set(this.get(e));return a.has(n.id)||a.has("*")}async grant(e,n){const a=new Set([...this._db.get(e)||[],n]);await this._db.put(e,Array.from(a.values()))}async revoke(e,n){const a=new Set(this._db.get(e)||[]);a.delete(n),a.size>0?await this._db.put(e,Array.from(a.values())):await this._db.del(e)}_onUpdate(){this.emit("updated")}static async create(e,n={}){const a=new OrbitDBAccessController(e,n);return await a.load(n.address||n.name||"default-access-controller"),n.write&&!n.address&&await pMapSeries(n.write,async o=>a.grant("write",o)),a}}const supportedTypes={"legacy-ipfs":LegacyIPFSAccessController,ipfs:IPFSAccessController,orbitdb:OrbitDBAccessController},getHandlerFor=t=>{if(!AccessControllers$1.isSupported(t))throw new Error(`AccessController type '${t}' is not supported`);return supportedTypes[t]};let AccessControllers$1=class{static get AccessController(){return AccessController}static isSupported(e){return Object.keys(supportedTypes).includes(e)}static addAccessController(e){if(!e.AccessController)throw new Error("AccessController class needs to be given as an option");if(!e.AccessController.type||typeof e.AccessController.type!="string")throw new Error("Given AccessController class needs to implement: static get type() { /* return a string */}.");supportedTypes[e.AccessController.type]=e.AccessController}static addAccessControllers(e){const n=e.AccessControllers;if(!n)throw new Error("AccessController classes need to be given as an option");n.forEach(a=>{AccessControllers$1.addAccessController({AccessController:a})})}static removeAccessController(e){delete supportedTypes[e]}static async resolve(e,n,a={}){const{type:o,params:l}=await AccessControllerManifest.resolve(e._ipfs,n,a),d=await getHandlerFor(o).create(e,Object.assign({},a,l));return await d.load(l.address),d}static async create(e,n,a={}){const u=await(await getHandlerFor(n).create(e,a)).save();return await AccessControllerManifest.create(e._ipfs,n,u)}};const notEmpty=t=>t!==""&&t!==" ";class OrbitDBAddress{constructor(e,n){this.root=e,this.path=n}toString(){return OrbitDBAddress.join(this.root,this.path)}static isValid(e){e=e.toString().replace(/\\/g,"/");const n=(u,d)=>!((d===0||d===1)&&e.toString().indexOf("/orbit")===0&&u==="orbitdb"),a=e.toString().split("/").filter(n).filter(notEmpty);let o;const l=u=>{const d=["zd","Qm","ba","k5"];for(const m of d)if(u.indexOf(m)>-1)return!0;return!1};try{o=l(a[0])?CID$1.parse(a[0]).toString():null}catch{return!1}return o!==null}static parse(e){if(!e)throw new Error(`Not a valid OrbitDB address: ${e}`);if(!OrbitDBAddress.isValid(e))throw new Error(`Not a valid OrbitDB address: ${e}`);e=e.toString().replace(/\\/g,"/");const n=e.toString().split("/").filter((a,o)=>!((o===0||o===1)&&e.toString().indexOf("/orbit")===0&&a==="orbitdb")).filter(a=>a!==""&&a!==" ");return new OrbitDBAddress(n[0],n.slice(1,n.length).join("/"))}static join(...e){return(path.posix||path).join("/orbitdb",...e)}}const createDBManifest=async(t,e,n,a,o)=>{const l=Object.assign({name:e,type:n,accessController:(path.posix||path).join("/ipfs",a)},o.meta!==void 0?{meta:o.meta}:{});return write$3(t,o.format||"dag-cbor",l,o)},PROTOCOL="ipfs-pubsub-direct-channel/v1",encode$a=t=>{let e=t;return safeBufferExports.Buffer.isBuffer(e)||(e=safeBufferExports.Buffer.from(e)),e},waitForPeers=async(t,e,n,a)=>{const o=async()=>{const l=await t.pubsub.peers(n),u=e.map(y=>String(y)),d=l.map(y=>String(y));return u.map(y=>d.includes(y)).filter(y=>y===!1).length===0};return await o()?Promise.resolve():new Promise((l,u)=>{const d=setInterval(async()=>{try{a()?clearInterval(d):await o()&&(clearInterval(d),l())}catch(m){u(m)}},100)})},getPeerID=async t=>(await t.id()).id;class DirectChannel extends eventsExports{constructor(e,n){if(super(),this._ipfs=e,!e.pubsub)throw new Error("This IPFS node does not support pubsub.");if(this._closed=!1,this._isClosed=()=>this._closed,this._receiverID=n,!this._receiverID)throw new Error("Receiver ID was undefined")}get id(){return this._id}get peers(){return this._peers}async connect(){await waitForPeers(this._ipfs,[this._receiverID],this._id,this._isClosed)}async send(e){if(this._closed)return;const n=encode$a(e);await this._ipfs.pubsub.publish(this._id,n)}close(){this._closed=!0,this.removeAllListeners("message"),this._ipfs.pubsub.unsubscribe(this._id,this._messageHandler)}async _setup(){this._senderID=await getPeerID(this._ipfs),this._peers=Array.from([this._senderID,this._receiverID]).sort(),this._id="/"+PROTOCOL+"/"+this._peers.join("/"),this._messageHandler=e=>{e&&String(e.from)===String(this._receiverID)&&this.emit("message",e)}}async _openChannel(){this._closed=!1,await this._setup(),await this._ipfs.pubsub.subscribe(this._id,this._messageHandler)}static async open(e,n){const a=new DirectChannel(e,n);return await a._openChannel(),a}}const logger$3=src$8.create("exchange-heads",{color:src$8.Colors.Yellow});src$8.setLogLevel("ERROR");const getHeadsForDatabase=async t=>{if(!(t&&t._cache))return[];const e=await t._cache.get(t.localHeadsPath)||[],n=await t._cache.get(t.remoteHeadsPath)||[];return[...e,...n]},exchangeHeads=async(t,e,n,a,o,l,u)=>{const d=b=>{const _=JSON.parse(Buffer$y.from(b.data).toString()),{address:w,heads:E}=_;l(w,E)};let m=o(n);if(!m)try{logger$3.debug(`Create a channel to ${n}`),m=await DirectChannel.open(t,n),m.on("message",d),logger$3.debug(`Channel created to ${n}`),u(m)}catch(b){logger$3.error(b)}await m.connect(),logger$3.debug(`Connected to ${n}`);const y=await getHeadsForDatabase(a(e));return logger$3.debug(`Send latest heads of '${e}':
`,JSON.stringify(y.map(b=>b.hash),null,2)),y&&await m.send(JSON.stringify({address:e,heads:y})),m},isDefined=t=>t!=null;class Storage{constructor(e,n={}){const a={createIfMissing:!0,errorIfExists:!1,compression:!0,cacheSize:8388608};this.storage=e,this.preCreate=n.preCreate?n.preCreate:()=>{};const o=Object.assign({},n,a);delete o.preCreate,this.options={down:o}}async createStore(e="./orbitdb",n={}){this.options.up=n,await this.preCreate(e,this.options),this.storage;const a=new Level(e,n);return await a.open(),a}async destroy(e){!this.storage||!this.storage.destroy||await this.storage.destory(e._db.location)}async preCreate(e,n){}}const Storage$1=(t,e)=>new Storage(t,e);function isElectron$2(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof browser$1$1<"u"&&typeof browser$1$1.versions=="object"&&browser$1$1.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}var isElectron_1=isElectron$2;const isEnvWithDom=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,isElectron$1=isElectron_1(),isBrowser$2=isEnvWithDom&&!isElectron$1,isElectronMain=isElectron$1&&!isEnvWithDom,isElectronRenderer=isElectron$1&&isEnvWithDom,isNode=typeof globalThis.process<"u"&&typeof globalThis.process.release<"u"&&globalThis.process.release.name==="node"&&!isElectron$1,isWebWorker$1=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;typeof globalThis.process<"u"&&typeof globalThis.process.env<"u"&&globalThis.process.env["NODE"+(()=>"_")()+"ENV"];const isReactNative$1=typeof navigator<"u"&&navigator.product==="ReactNative",fs=!isElectronMain&&(typeof window=="object"||typeof self=="object")?null:fs_,logger$2=src$8.create("orbit-db");src$8.setLogLevel("ERROR");async function migrate(t,e,n){let a=e.cache||(t.caches[e.directory]?t.caches[e.directory].cache:null),o;if(!a){const m=(path.posix||path).join(t.directory,n.root,n.path);if(fs&&fs.existsSync&&!fs.existsSync(m))return;o=await t.storage.createStore(m),a=new Cache(o)}if(!await a.get("_localHeads"))return;const u=n.toString();logger$2.debug("Attempting to migrate from old cache location");const d=["_remoteHeads","_localHeads","snapshot","queue"];for(const m in d)try{const y=path.join(u,d[m]),b=await a.get(d[m]);b&&await e.cache.set(y,b)}catch(y){logger$2.debug(y.message)}await e.cache.set(path.join(u,"_manifest"),n.root),o&&await o.close()}const migrations=[migrate],run=async(t,e,n)=>{for(let a=0;a<migrations.length;a++)await migrations[a](t,e,n)},logger$1=src$8.create("orbit-db");src$8.setLogLevel("ERROR");const databaseTypes={counter:CounterStore,eventlog:EventStore,feed:FeedStore,docstore:DocumentStore,keyvalue:KeyValueStore},defaultTimeout=3e4;let AccessControllers=AccessControllers$1;class OrbitDB{constructor(e,n,a={}){if(!isDefined(e))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(!isDefined(n))throw new Error("identity is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");this._ipfs=e,this.identity=n,this.id=a.peerId,this._pubsub=a.offline?null:new(a.broker?a.broker:IPFSPubsub)(this._ipfs,this.id),this.directory=a.directory||"./orbitdb",this.storage=a.storage,this._directConnections={},this.caches={},this.caches[this.directory]={cache:a.cache,handlers:new Set},this.keystore=a.keystore,this.stores={},AccessControllers=a.AccessControllers||AccessControllers}static get Pubsub(){return IPFSPubsub}static get Cache(){return Cache}static get Keystore(){return Keystore}static get Identities(){return Identities}static get AccessControllers(){return AccessControllers}static get Storage(){return Storage$1}static get OrbitDBAddress(){return OrbitDBAddress}static get Store(){return Store}static get EventStore(){return EventStore}static get FeedStore(){return FeedStore}static get KeyValueStore(){return KeyValueStore}static get CounterStore(){return CounterStore}static get DocumentStore(){return DocumentStore}get cache(){return this.caches[this.directory].cache}static async createInstance(e,n={}){if(!isDefined(e))throw new Error("IPFS is a required argument. See https://github.com/orbitdb/orbit-db/blob/master/API.md#createinstance");if(n.offline===void 0&&(n.offline=!1),n.offline&&!n.id)throw new Error("Offline mode requires passing an `id` in the options");const{id:a}=n.id||n.offline?{id:n.id}:await e.id();if(n.directory||(n.directory="./orbitdb"),!n.storage){const l={};n.storage=Storage$1(null,l)}if(n.identity&&n.identity.provider.keystore&&(n.keystore=n.identity.provider.keystore),!n.keystore){const l=path.join(n.directory,typeof a!="object"?a:a.toString(),"/keystore"),u=await n.storage.createStore(l);n.keystore=new Keystore(u)}if(n.identity||(n.identity=await Identities.createIdentity({id:a,keystore:n.keystore})),!n.cache){const l=path.join(n.directory,typeof a!="object"?a:a.toString(),"/cache"),u=await n.storage.createStore(l);n.cache=new Cache(u)}const o=Object.assign({},n,{peerId:typeof a!="object"?a:a.toString()});return new OrbitDB(e,n.identity,o)}async feed(e,n={}){return n=Object.assign({create:!0,type:"feed"},n),this.open(e,n)}async log(e,n={}){return n=Object.assign({create:!0,type:"eventlog"},n),this.open(e,n)}async eventlog(e,n={}){return this.log(e,n)}async keyvalue(e,n={}){return n=Object.assign({create:!0,type:"keyvalue"},n),this.open(e,n)}async kvstore(e,n={}){return this.keyvalue(e,n)}async counter(e,n={}){return n=Object.assign({create:!0,type:"counter"},n),this.open(e,n)}async docs(e,n={}){return n=Object.assign({create:!0,type:"docstore"},n),this.open(e,n)}async docstore(e,n={}){return this.docs(e,n)}async disconnect(){for(const a of Object.values(this._directConnections))a.close();this._directConnections={},this._pubsub&&await this._pubsub.disconnect(),await this.keystore.close();const e=Object.values(this.stores);for(const a of e)await a.close();this.stores={};const n=Object.values(this.caches);for(const a of n)await a.cache.close();this.caches={},this.stores={}}async stop(){await this.disconnect()}async _createCache(e){const n=await this.storage.createStore(e);return new Cache(n)}async _createStore(e,n,a){const o=databaseTypes[e];if(!o)throw new Error(`Invalid database type '${e}'`);let l;a.accessControllerAddress&&(l=await AccessControllers.resolve(this,a.accessControllerAddress,a.accessController));const u=Object.assign({replicate:!0},a,{accessController:l,cache:a.cache,onClose:this._onClose.bind(this),onDrop:this._onDrop.bind(this),onLoad:this._onLoad.bind(this)}),d=a.identity||this.identity,m=new o(this._ipfs,d,n,u);m.events.on("write",this._onWrite.bind(this));const y=n.toString();return this.stores[y]=m,u.replicate&&this._pubsub&&await this._pubsub.subscribe(y,this._onMessage.bind(this),this._onPeerConnected.bind(this)),m}_onWrite(e,n,a){if(!a)throw new Error("'heads' not defined");this._pubsub&&this._pubsub.publish(e,a)}async _onMessage(e,n,a){const o=this.stores[e];try{logger$1.debug(`Received ${n.length} heads for '${e}':
`,JSON.stringify(n.map(l=>l.hash),null,2)),o&&n&&(n.length>0&&await o.sync(n),o.events.emit("peer.exchanged",a,e,n))}catch(l){logger$1.error(l)}}async _onPeerConnected(e,n){logger$1.debug(`New peer '${n}' connected to '${e}'`);const a=d=>this.stores[d],o=d=>this._directConnections[d],l=d=>{this._directConnections[d._receiverID]=d},u=(d,m)=>this._onMessage(d,m,n);await exchangeHeads(this._ipfs,e,n,a,o,u,l),a(e)&&a(e).events.emit("peer",n)}async _onClose(e){const n=e.address.toString();logger$1.debug(`Close ${n}`),this._pubsub&&await this._pubsub.unsubscribe(n);const a=e&&e.options.directory?e.options.directory:this.directory,o=this.caches[a];o&&o.handlers.has(n)&&(o.handlers.delete(n),o.handlers.size||await o.cache.close()),delete this.stores[n]}async _onDrop(e){const n=e.address.toString(),a=e&&e.options.directory?e.options.directory:this.directory;await this._requestCache(n,a,e._cache)}async _onLoad(e){const n=e.address.toString(),a=e&&e.options.directory?e.options.directory:this.directory;await this._requestCache(n,a,e._cache),this.stores[n]=e}async _determineAddress(e,n,a={}){if(!OrbitDB.isValidType(n))throw new Error(`Invalid database type '${n}'`);if(OrbitDBAddress.isValid(e))throw new Error("Given database name is an address. Please give only the name of the database!");a.accessController=Object.assign({},{name:e,type:"ipfs"},a.accessController);const o=await AccessControllers.create(this,a.accessController.type,a.accessController||{}),l=await createDBManifest(this._ipfs,e,n,o,a);return OrbitDBAddress.parse(OrbitDBAddress.join(l,e))}async create(e,n,a={}){logger$1.debug("create()"),logger$1.debug(`Creating database '${e}' as ${n}`);const o=await this._determineAddress(e,n,a);if(a.cache=await this._requestCache(o.toString(),a.directory),await this._haveLocalData(a.cache,o)&&!a.overwrite)throw new Error(`Database '${o}' already exists!`);return await this._migrate({...a,directory:this.directory},o),await this._addManifestToCache(a.cache,o),logger$1.debug(`Created database '${o}'`),this.open(o,a)}async determineAddress(e,n,a={}){const o=Object.assign({},{onlyHash:!0},a);return this._determineAddress(e,n,o)}async _requestCache(e,n,a){const o=n||this.directory;if(!this.caches[o]){const u=a||await this._createCache(o);this.caches[o]={cache:u,handlers:new Set}}this.caches[o].handlers.add(e);const l=this.caches[o].cache;return l&&await l.open(),l}async open(e,n={}){if(logger$1.debug("open()"),n=Object.assign({localOnly:!1,create:!1},n),logger$1.debug(`Open database '${e}'`),!OrbitDBAddress.isValid(e))if(n.create){if(n.create&&!n.type)throw new Error(`Database type not provided! Provide a type with 'options.type' (${OrbitDB.databaseTypes.join("|")})`);return logger$1.warn(`Not a valid OrbitDB address '${e}', creating the database`),n.overwrite=n.overwrite?n.overwrite:!0,this.create(e,n.type,n)}else throw new Error("'options.create' set to 'false'. If you want to create a database, set 'options.create' to 'true'.");const a=OrbitDBAddress.parse(e);n.cache=await this._requestCache(a.toString(),n.directory);const o=await this._haveLocalData(n.cache,a);if(logger$1.debug((o?"Found":"Didn't find")+` database '${a}'`),n.localOnly&&!o)throw logger$1.warn(`Database '${a}' doesn't exist!`),new Error(`Database '${a}' doesn't exist!`);logger$1.debug(`Loading Manifest for '${a}'`);let l;try{l=await read$7(this._ipfs,a.root,{timeout:n.timeout||defaultTimeout}),logger$1.debug(`Manifest for '${a}':
${JSON.stringify(l,null,2)}`)}catch(u){throw u.name==="TimeoutError"&&u.code==="ERR_TIMEOUT"?(console.error(u),new Error("ipfs unable to find and fetch manifest for this address.")):u}if(l.name!==a.path&&logger$1.warn(`Manifest name '${l.name}' and path name '${a.path}' do not match`),n.type&&l.type!==n.type)throw new Error(`Database '${a}' is type '${l.type}' but was opened as '${n.type}'`);return await this._addManifestToCache(n.cache,a),n=Object.assign({},n,{accessControllerAddress:l.accessController,meta:l.meta}),this._createStore(n.type||l.type,a,n)}async _addManifestToCache(e,n){await e.set(path.join(n.toString(),"_manifest"),n.root),logger$1.debug(`Saved manifest to IPFS as '${n.root}'`)}async _haveLocalData(e,n){if(!e)return!1;const a=n.toString(),o=await e.get(path.join(a,"_manifest"));return o!=null}async _migrate(e,n){await run(this,e,n)}static get databaseTypes(){return Object.keys(databaseTypes)}static isValidType(e){return Object.keys(databaseTypes).includes(e)}static addDatabaseType(e,n){if(databaseTypes[e])throw new Error(`Type already exists: ${e}`);databaseTypes[e]=n}static getDatabaseTypes(){return databaseTypes}static isValidAddress(e){return OrbitDBAddress.isValid(e)}static parseAddress(e){return OrbitDBAddress.parse(e)}}OrbitDB.prototype.AccessControllers=AccessControllers;OrbitDB.prototype.Identities=Identities;OrbitDB.prototype.Keystore=Keystore;class SemaphoreItem{constructor(e){this.queue=[],this.max=e,this.count=0}get canAcquire(){return this.count<this.max}acquire(){return this.canAcquire?(this.count++,Promise.resolve()):new Promise(e=>{this.queue.push(e)})}release(){const e=this.queue.shift();e?setTimeout(e,0):this.count--}}const defaultKey="_default";class Semaphore{constructor(e=1){this.semaphoreItems={},this.max=e}_getSemaphoreInstance(e=defaultKey){return this.semaphoreItems[e]||(this.semaphoreItems[e]=new SemaphoreItem(this.max)),this.semaphoreItems[e]}_tidy(e=defaultKey){this._getSemaphoreInstance(e).count==0&&delete this.semaphoreItems[e]}canAcquire(e=defaultKey){return this._getSemaphoreInstance(e).canAcquire}acquire(e=defaultKey){return this._getSemaphoreInstance(e).acquire()}release(e=defaultKey){this._getSemaphoreInstance(e).release(),this._tidy(e)}count(e=defaultKey){return this.semaphoreItems[e]?this.semaphoreItems[e].count:0}hasTasks(e=defaultKey){return this.count(e)>0}async request(e,n=defaultKey){try{return await this.acquire(n),await e()}finally{this.release(n)}}async requestIfAvailable(e,n=defaultKey){return this.canAcquire(n)?this.request(e,n):null}}var src$4=Semaphore;const verrouOuvertureBd$1=new src$4;class AccesseurBdOrbite{constructor(){ut(this,"bds");ut(this,"requètes");this.bds={},this.requètes={}}async ouvrirBd(e,n,a){const o=this._obtClef(e,n);verrouOuvertureBd$1.acquire(o),this.requètes[o]||(this.requètes[o]=new Set),this.requètes[o].add(a);const l=this.bds[o];if(l)return verrouOuvertureBd$1.release(o),l;const u=await e.open(n);return await u.load(),this.bds[o]=u,verrouOuvertureBd$1.release(o),u}async fermerBd(e,n,a){const o=this._obtClef(e,n);verrouOuvertureBd$1.acquire(o),this.requètes[o].delete(a),this.requètes[o].size||(await this.bds[o].close(),delete this.bds[o],delete this.requètes[o]),verrouOuvertureBd$1.release(o)}_obtClef(e,n){const a=e.identity.id;return n+a}}const accesseurBdOrbite=new AccesseurBdOrbite,MODÉRATEUR="MODÉRATEUR",MEMBRE="MEMBRE",rôles=[MODÉRATEUR,MEMBRE],événementsSuiviBd=["ready","write","replicated"],suivreBdAccès=async(t,e)=>{const n=()=>{const o=t.iterator({limit:-1}).collect().map(l=>l.payload.value);e(o)};t.events.setMaxListeners(100);for(const o of événementsSuiviBd)t.events.on(o,n);return n(),async()=>{événementsSuiviBd.forEach(o=>{t.events.off(o,n)})}};class AccèsUtilisateur extends eventsExports.EventEmitter{constructor(n,a){super();ut(this,"orbite");ut(this,"idBd");ut(this,"bd");ut(this,"idBdAccès");ut(this,"bdAccès");ut(this,"oublierSuivi");ut(this,"autorisés");ut(this,"accès");ut(this,"idRequète");ut(this,"prêt");this.orbite=n,this.idBd=a,this.autorisés=[],this.idRequète=v4(),this.prêt=!1}async initialiser(){this.bd=await accesseurBdOrbite.ouvrirBd(this.orbite,this.idBd,this.idRequète),this.accès=this.bd.access,this.bdAccès=this.accès.bd,this.idBdAccès=this.bdAccès.id,this.oublierSuivi=await suivreBdAccès(this.bdAccès,async n=>{await this._miseÀJour(n)}),this.prêt=!0}async _miseÀJour(n){const a=[];n=[{id:this.accès._premierMod,rôle:MODÉRATEUR},...n],n.forEach(o=>{a.push(o.id)}),this.autorisés=a,this.emit("misÀJour")}async fermer(){this.oublierSuivi&&this.oublierSuivi(),this.prêt&&await accesseurBdOrbite.fermerBd(this.orbite,this.idBd,this.idRequète)}}class GestionnaireAccès extends eventsExports.EventEmitter{constructor(n){super();ut(this,"_rôles");ut(this,"_rôlesIdOrbite");ut(this,"_rôlesUtilisateurs");ut(this,"_miseÀJourEnCours");ut(this,"orbite");this._rôles={[MODÉRATEUR]:[],[MEMBRE]:[]},this._rôlesIdOrbite={[MODÉRATEUR]:[],[MEMBRE]:[]},this._rôlesUtilisateurs={[MODÉRATEUR]:{},[MEMBRE]:{}},this._miseÀJourEnCours=!1,this.orbite=n}async estUnMembre(n){return this._miseÀJourEnCours&&await once_1(this,"misÀJour"),this._rôles[MEMBRE].includes(n)}async estUnModérateur(n){return this._miseÀJourEnCours&&await once_1(this,"misÀJour"),this._rôles[MODÉRATEUR].includes(n)}async estAutorisé(n){return await this.estUnModérateur(n)||await this.estUnMembre(n)}async ajouterÉléments(n){this._miseÀJourEnCours=!0,await Promise.all(n.map(async a=>{const{rôle:o,id:l}=a;if(OrbitDB.isValidAddress(l)){if(!this._rôlesUtilisateurs[o][l]){const u=new AccèsUtilisateur(this.orbite,l);u.on("misÀJour",()=>this._mettreRôlesÀJour()),this._rôlesUtilisateurs[o][l]=u,await u.initialiser()}}else this._rôlesIdOrbite[o].includes(l)||(this._rôlesIdOrbite[o].push(l),this._mettreRôlesÀJour())})),this._miseÀJourEnCours=!1,this._mettreRôlesÀJour(),this.emit("misÀJour")}_mettreRôlesÀJour(){const n={MODÉRATEUR:[],MEMBRE:[]};for(const[a,o]of Object.entries(this._rôlesIdOrbite)){const l=n[a];o.forEach(u=>{l.includes(u)||l.push(u)})}for(const[a,o]of Object.entries(this._rôlesUtilisateurs)){const l=n[a];Object.values(o).forEach(u=>{u.autorisés.forEach(d=>{l.includes(d)||l.push(d)})})}this._rôles=n}async fermer(){const n=Object.values(this._rôlesUtilisateurs).map(a=>Object.values(a)).flat();await Promise.all(n.map(a=>a.fermer()))}}const ensureAddress=t=>t.toString().split("/").pop()==="_access"?t:path.join(t,"/_access"),nomType="controlleur-constellation";class ContrôleurConstellation extends AccessControllers$1.AccessController{constructor(n,a){super();ut(this,"bd");ut(this,"nom");ut(this,"_orbitdb");ut(this,"_premierMod");ut(this,"_adresseBd");ut(this,"idRequète");ut(this,"gestRôles");this._orbitdb=n,this._premierMod=a.premierMod,this._adresseBd=a.address,this.nom=a.nom,this.idRequète=v4(),this.gestRôles=new GestionnaireAccès(this._orbitdb),this.gestRôles.on("misÀJour",()=>this.emit("misÀJour"))}static get type(){return nomType}get address(){return this.bd.id}async estUnMembre(n){return await this.gestRôles.estUnMembre(n)}async estUnModérateur(n){return await this.gestRôles.estUnModérateur(n)}async estAutorisé(n){return await this.gestRôles.estAutorisé(n)}async suivreUtilisateursAutorisés(n){const a=async()=>{const l=Object.keys(this.gestRôles._rôlesUtilisateurs[MODÉRATEUR]).map(y=>({idBdCompte:y,rôle:MODÉRATEUR})),u=l.map(y=>y.idBdCompte),d=Object.keys(this.gestRôles._rôlesUtilisateurs[MEMBRE]).map(y=>({idBdCompte:y,rôle:MEMBRE})).filter(y=>!u.includes(y.idBdCompte)),m=[...l,...d];await n(m)};return this.gestRôles.on("misÀJour",a),await a(),async()=>{this.gestRôles.off("misÀJour",a)}}async suivreIdsOrbiteAutoriséesÉcriture(n){const a=()=>{n([...this.gestRôles._rôles.MEMBRE,...this.gestRôles._rôles.MODÉRATEUR])};return this.gestRôles.on("misÀJour",a),a(),async()=>{this.gestRôles.off("misÀJour",a)}}async canAppend(n,a){const o=async()=>await a.verifyIdentity(n.identity);return await this.estAutorisé(n.identity.id)?await o():!1}async _miseÀJourBdAccès(){let n=this.bd.iterator({limit:-1}).collect().map(a=>a.payload.value);n=[{rôle:MODÉRATEUR,id:this._premierMod},...n],await this.gestRôles.ajouterÉléments(n)}async close(){await accesseurBdOrbite.fermerBd(this._orbitdb,this.bd.id,this.idRequète),await this.gestRôles.fermer()}async load(n){const a=OrbitDB.isValidAddress(n);let o;a?o=n:o=(await this._orbitdb.determineAddress(ensureAddress(n),"feed",this._createOrbitOpts(a))).toString(),this.bd=await accesseurBdOrbite.ouvrirBd(this._orbitdb,o,this.idRequète),suivreBdAccès(this.bd,()=>this._miseÀJourBdAccès())}_createOrbitOpts(n=!1){const a={type:"controlleur-accès-constellation",premierMod:this._premierMod};return n?{}:{accessController:a}}async save(){return{address:(this._adresseBd||await this._orbitdb.determineAddress(`${this.nom}/_access`,"feed",this._createOrbitOpts())).toString(),premierMod:this._premierMod,nom:this.nom}}async grant(n,a){if(!rôles.includes(n))throw new Error(`Erreur: Le rôle ${n} n'existe pas.`);if(!this.gestRôles._rôles[n].includes(a))try{const o={rôle:n,id:a};await this.bd.add(o)}catch(o){const l=o;throw l.toString().includes("not append entry")?new Error(`Erreur : Le rôle ${n} ne peut pas être octroyé à ${a}.`):l}}async revoke(n,a){const o=this.bd.iterator({limit:-1}).collect().find(u=>u.payload.value.rôle===n&&u.payload.value.id===a);if(!o)throw new Error(`Erreur : Le rôle ${n} n'existait pas pour ${a}.`);const l=o.hash;await this.bd.remove(l)}static async create(n,a){return a.premierMod||(a.premierMod=n.identity.id),a.nom=a.nom||v4(),new ContrôleurConstellation(n,a)}}const type="controlleur-accès-constellation";class ContrôleurAccès extends eventsExports.EventEmitter{constructor(n,a){super();ut(this,"_premierMod");ut(this,"orbitdb");ut(this,"gestAccès");ut(this,"dernierAppel");this.orbitdb=n,this._premierMod=a.premierMod,this.gestAccès=new GestionnaireAccès(this.orbitdb),this.dernierAppel=Date.now()}static get type(){return type}async estUnModérateurPatient(n){return await this.gestAccès.estUnModérateur(n)?!0:new Promise(o=>{const l=()=>{setTimeout(async()=>{await this.gestAccès.estUnModérateur(n)?o(!0):Date.now()-this.dernierAppel>1e3?o(!1):l()},100)};l()})}get premierMod(){return this._premierMod}async canAppend(n,a){const o=n.identity.id,{rôle:l,id:u}=n.payload.value,d=this.estUnModérateurPatient(o),m=rôles.includes(l),y=async()=>a.verifyIdentity(n.identity);return m&&await d&&await y()?(l===MODÉRATEUR&&(await this.gestAccès.ajouterÉléments([{id:u,rôle:MODÉRATEUR}]),this.dernierAppel=Date.now()),!0):!1}async load(){await this.gestAccès.ajouterÉléments([{id:this._premierMod,rôle:MODÉRATEUR}])}async save(){return{premierMod:this.premierMod}}static async create(n,a={}){const o=a.premierMod;if(!o)throw new Error("Contrôle d'accès: premier modérateur requis");return new ContrôleurAccès(n,{premierMod:o})}}const enregistrerContrôleurs=()=>{AccessControllers$1.addAccessController({AccessController:ContrôleurConstellation}),AccessControllers$1.addAccessController({AccessController:ContrôleurAccès})};enregistrerContrôleurs();var jszip_minExports={},jszip_min={get exports(){return jszip_minExports},set exports(t){jszip_minExports=t}};(function(t,e){(function(n){t.exports=n()})(function(){return function n(a,o,l){function u(y,b){if(!o[y]){if(!a[y]){var _=typeof commonjsRequire$1=="function"&&commonjsRequire$1;if(!b&&_)return _(y,!0);if(d)return d(y,!0);var w=new Error("Cannot find module '"+y+"'");throw w.code="MODULE_NOT_FOUND",w}var E=o[y]={exports:{}};a[y][0].call(E.exports,function(A){var C=a[y][1][A];return u(C||A)},E,E.exports,n,a,o,l)}return o[y].exports}for(var d=typeof commonjsRequire$1=="function"&&commonjsRequire$1,m=0;m<l.length;m++)u(l[m]);return u}({1:[function(n,a,o){var l=n("./utils"),u=n("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(m){for(var y,b,_,w,E,A,C,k=[],B=0,D=m.length,q=D,j=l.getTypeOf(m)!=="string";B<m.length;)q=D-B,_=j?(y=m[B++],b=B<D?m[B++]:0,B<D?m[B++]:0):(y=m.charCodeAt(B++),b=B<D?m.charCodeAt(B++):0,B<D?m.charCodeAt(B++):0),w=y>>2,E=(3&y)<<4|b>>4,A=1<q?(15&b)<<2|_>>6:64,C=2<q?63&_:64,k.push(d.charAt(w)+d.charAt(E)+d.charAt(A)+d.charAt(C));return k.join("")},o.decode=function(m){var y,b,_,w,E,A,C=0,k=0,B="data:";if(m.substr(0,B.length)===B)throw new Error("Invalid base64 input, it looks like a data url.");var D,q=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===d.charAt(64)&&q--,m.charAt(m.length-2)===d.charAt(64)&&q--,q%1!=0)throw new Error("Invalid base64 input, bad content length.");for(D=u.uint8array?new Uint8Array(0|q):new Array(0|q);C<m.length;)y=d.indexOf(m.charAt(C++))<<2|(w=d.indexOf(m.charAt(C++)))>>4,b=(15&w)<<4|(E=d.indexOf(m.charAt(C++)))>>2,_=(3&E)<<6|(A=d.indexOf(m.charAt(C++))),D[k++]=y,E!==64&&(D[k++]=b),A!==64&&(D[k++]=_);return D}},{"./support":30,"./utils":32}],2:[function(n,a,o){var l=n("./external"),u=n("./stream/DataWorker"),d=n("./stream/Crc32Probe"),m=n("./stream/DataLengthProbe");function y(b,_,w,E,A){this.compressedSize=b,this.uncompressedSize=_,this.crc32=w,this.compression=E,this.compressedContent=A}y.prototype={getContentWorker:function(){var b=new u(l.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),_=this;return b.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),b},getCompressedWorker:function(){return new u(l.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(b,_,w){return b.pipe(new d).pipe(new m("uncompressedSize")).pipe(_.compressWorker(w)).pipe(new m("compressedSize")).withStreamInfo("compression",_)},a.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,a,o){var l=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new l("STORE compression")},uncompressWorker:function(){return new l("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,a,o){var l=n("./utils"),u=function(){for(var d,m=[],y=0;y<256;y++){d=y;for(var b=0;b<8;b++)d=1&d?3988292384^d>>>1:d>>>1;m[y]=d}return m}();a.exports=function(d,m){return d!==void 0&&d.length?l.getTypeOf(d)!=="string"?function(y,b,_,w){var E=u,A=w+_;y^=-1;for(var C=w;C<A;C++)y=y>>>8^E[255&(y^b[C])];return-1^y}(0|m,d,d.length,0):function(y,b,_,w){var E=u,A=w+_;y^=-1;for(var C=w;C<A;C++)y=y>>>8^E[255&(y^b.charCodeAt(C))];return-1^y}(0|m,d,d.length,0):0}},{"./utils":32}],5:[function(n,a,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,a,o){var l=null;l=typeof Promise<"u"?Promise:n("lie"),a.exports={Promise:l}},{lie:37}],7:[function(n,a,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=n("pako"),d=n("./utils"),m=n("./stream/GenericWorker"),y=l?"uint8array":"array";function b(_,w){m.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=w,this.meta={}}o.magic="\b\0",d.inherits(b,m),b.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(y,_.data),!1)},b.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},b.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},b.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(w){_.push({data:w,meta:_.meta})}},o.compressWorker=function(_){return new b("Deflate",_)},o.uncompressWorker=function(){return new b("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,a,o){function l(E,A){var C,k="";for(C=0;C<A;C++)k+=String.fromCharCode(255&E),E>>>=8;return k}function u(E,A,C,k,B,D){var q,j,J=E.file,Y=E.compression,L=D!==y.utf8encode,Z=d.transformTo("string",D(J.name)),Q=d.transformTo("string",y.utf8encode(J.name)),oe=J.comment,ae=d.transformTo("string",D(oe)),U=d.transformTo("string",y.utf8encode(oe)),I=Q.length!==J.name.length,x=U.length!==oe.length,T="",M="",O="",z=J.dir,X=J.date,H={crc32:0,compressedSize:0,uncompressedSize:0};A&&!C||(H.crc32=E.crc32,H.compressedSize=E.compressedSize,H.uncompressedSize=E.uncompressedSize);var P=0;A&&(P|=8),L||!I&&!x||(P|=2048);var S=0,F=0;z&&(S|=16),B==="UNIX"?(F=798,S|=function(ee,fe){var le=ee;return ee||(le=fe?16893:33204),(65535&le)<<16}(J.unixPermissions,z)):(F=20,S|=function(ee){return 63&(ee||0)}(J.dosPermissions)),q=X.getUTCHours(),q<<=6,q|=X.getUTCMinutes(),q<<=5,q|=X.getUTCSeconds()/2,j=X.getUTCFullYear()-1980,j<<=4,j|=X.getUTCMonth()+1,j<<=5,j|=X.getUTCDate(),I&&(M=l(1,1)+l(b(Z),4)+Q,T+="up"+l(M.length,2)+M),x&&(O=l(1,1)+l(b(ae),4)+U,T+="uc"+l(O.length,2)+O);var ue="";return ue+=`
\0`,ue+=l(P,2),ue+=Y.magic,ue+=l(q,2),ue+=l(j,2),ue+=l(H.crc32,4),ue+=l(H.compressedSize,4),ue+=l(H.uncompressedSize,4),ue+=l(Z.length,2),ue+=l(T.length,2),{fileRecord:_.LOCAL_FILE_HEADER+ue+Z+T,dirRecord:_.CENTRAL_FILE_HEADER+l(F,2)+ue+l(ae.length,2)+"\0\0\0\0"+l(S,4)+l(k,4)+Z+T+ae}}var d=n("../utils"),m=n("../stream/GenericWorker"),y=n("../utf8"),b=n("../crc32"),_=n("../signature");function w(E,A,C,k){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=A,this.zipPlatform=C,this.encodeFileName=k,this.streamFiles=E,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(w,m),w.prototype.push=function(E){var A=E.meta.percent||0,C=this.entriesCount,k=this._sources.length;this.accumulate?this.contentBuffer.push(E):(this.bytesWritten+=E.data.length,m.prototype.push.call(this,{data:E.data,meta:{currentFile:this.currentFile,percent:C?(A+100*(C-k-1))/C:100}}))},w.prototype.openedSource=function(E){this.currentSourceOffset=this.bytesWritten,this.currentFile=E.file.name;var A=this.streamFiles&&!E.file.dir;if(A){var C=u(E,A,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:C.fileRecord,meta:{percent:0}})}else this.accumulate=!0},w.prototype.closedSource=function(E){this.accumulate=!1;var A=this.streamFiles&&!E.file.dir,C=u(E,A,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(C.dirRecord),A)this.push({data:function(k){return _.DATA_DESCRIPTOR+l(k.crc32,4)+l(k.compressedSize,4)+l(k.uncompressedSize,4)}(E),meta:{percent:100}});else for(this.push({data:C.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},w.prototype.flush=function(){for(var E=this.bytesWritten,A=0;A<this.dirRecords.length;A++)this.push({data:this.dirRecords[A],meta:{percent:100}});var C=this.bytesWritten-E,k=function(B,D,q,j,J){var Y=d.transformTo("string",J(j));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+l(B,2)+l(B,2)+l(D,4)+l(q,4)+l(Y.length,2)+Y}(this.dirRecords.length,C,E,this.zipComment,this.encodeFileName);this.push({data:k,meta:{percent:100}})},w.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},w.prototype.registerPrevious=function(E){this._sources.push(E);var A=this;return E.on("data",function(C){A.processChunk(C)}),E.on("end",function(){A.closedSource(A.previous.streamInfo),A._sources.length?A.prepareNextSource():A.end()}),E.on("error",function(C){A.error(C)}),this},w.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},w.prototype.error=function(E){var A=this._sources;if(!m.prototype.error.call(this,E))return!1;for(var C=0;C<A.length;C++)try{A[C].error(E)}catch{}return!0},w.prototype.lock=function(){m.prototype.lock.call(this);for(var E=this._sources,A=0;A<E.length;A++)E[A].lock()},a.exports=w},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,a,o){var l=n("../compressions"),u=n("./ZipFileWorker");o.generateWorker=function(d,m,y){var b=new u(m.streamFiles,y,m.platform,m.encodeFileName),_=0;try{d.forEach(function(w,E){_++;var A=function(D,q){var j=D||q,J=l[j];if(!J)throw new Error(j+" is not a valid compression method !");return J}(E.options.compression,m.compression),C=E.options.compressionOptions||m.compressionOptions||{},k=E.dir,B=E.date;E._compressWorker(A,C).withStreamInfo("file",{name:w,dir:k,date:B,comment:E.comment||"",unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions}).pipe(b)}),b.entriesCount=_}catch(w){b.error(w)}return b}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,a,o){function l(){if(!(this instanceof l))return new l;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new l;for(var d in this)typeof this[d]!="function"&&(u[d]=this[d]);return u}}(l.prototype=n("./object")).loadAsync=n("./load"),l.support=n("./support"),l.defaults=n("./defaults"),l.version="3.10.1",l.loadAsync=function(u,d){return new l().loadAsync(u,d)},l.external=n("./external"),a.exports=l},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,a,o){var l=n("./utils"),u=n("./external"),d=n("./utf8"),m=n("./zipEntries"),y=n("./stream/Crc32Probe"),b=n("./nodejsUtils");function _(w){return new u.Promise(function(E,A){var C=w.decompressed.getContentWorker().pipe(new y);C.on("error",function(k){A(k)}).on("end",function(){C.streamInfo.crc32!==w.decompressed.crc32?A(new Error("Corrupted zip : CRC32 mismatch")):E()}).resume()})}a.exports=function(w,E){var A=this;return E=l.extend(E||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),b.isNode&&b.isStream(w)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):l.prepareContent("the loaded zip file",w,!0,E.optimizedBinaryString,E.base64).then(function(C){var k=new m(E);return k.load(C),k}).then(function(C){var k=[u.Promise.resolve(C)],B=C.files;if(E.checkCRC32)for(var D=0;D<B.length;D++)k.push(_(B[D]));return u.Promise.all(k)}).then(function(C){for(var k=C.shift(),B=k.files,D=0;D<B.length;D++){var q=B[D],j=q.fileNameStr,J=l.resolve(q.fileNameStr);A.file(J,q.decompressed,{binary:!0,optimizedBinaryString:!0,date:q.date,dir:q.dir,comment:q.fileCommentStr.length?q.fileCommentStr:null,unixPermissions:q.unixPermissions,dosPermissions:q.dosPermissions,createFolders:E.createFolders}),q.dir||(A.file(J).unsafeOriginalName=j)}return k.zipComment.length&&(A.comment=k.zipComment),A})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,a,o){var l=n("../utils"),u=n("../stream/GenericWorker");function d(m,y){u.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(y)}l.inherits(d,u),d.prototype._bindStream=function(m){var y=this;(this._stream=m).pause(),m.on("data",function(b){y.push({data:b,meta:{percent:0}})}).on("error",function(b){y.isPaused?this.generatedError=b:y.error(b)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},d.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,a,o){var l=n("readable-stream").Readable;function u(d,m,y){l.call(this,m),this._helper=d;var b=this;d.on("data",function(_,w){b.push(_)||b._helper.pause(),y&&y(w)}).on("error",function(_){b.emit("error",_)}).on("end",function(){b.push(null)})}n("../utils").inherits(u,l),u.prototype._read=function(){this._helper.resume()},a.exports=u},{"../utils":32,"readable-stream":16}],14:[function(n,a,o){a.exports={isNode:typeof Buffer$y<"u",newBufferFrom:function(l,u){if(Buffer$y.from&&Buffer$y.from!==Uint8Array.from)return Buffer$y.from(l,u);if(typeof l=="number")throw new Error('The "data" argument must not be a number');return new Buffer$y(l,u)},allocBuffer:function(l){if(Buffer$y.alloc)return Buffer$y.alloc(l);var u=new Buffer$y(l);return u.fill(0),u},isBuffer:function(l){return Buffer$y.isBuffer(l)},isStream:function(l){return l&&typeof l.on=="function"&&typeof l.pause=="function"&&typeof l.resume=="function"}}},{}],15:[function(n,a,o){function l(J,Y,L){var Z,Q=d.getTypeOf(Y),oe=d.extend(L||{},b);oe.date=oe.date||new Date,oe.compression!==null&&(oe.compression=oe.compression.toUpperCase()),typeof oe.unixPermissions=="string"&&(oe.unixPermissions=parseInt(oe.unixPermissions,8)),oe.unixPermissions&&16384&oe.unixPermissions&&(oe.dir=!0),oe.dosPermissions&&16&oe.dosPermissions&&(oe.dir=!0),oe.dir&&(J=B(J)),oe.createFolders&&(Z=k(J))&&D.call(this,Z,!0);var ae=Q==="string"&&oe.binary===!1&&oe.base64===!1;L&&L.binary!==void 0||(oe.binary=!ae),(Y instanceof _&&Y.uncompressedSize===0||oe.dir||!Y||Y.length===0)&&(oe.base64=!1,oe.binary=!0,Y="",oe.compression="STORE",Q="string");var U=null;U=Y instanceof _||Y instanceof m?Y:A.isNode&&A.isStream(Y)?new C(J,Y):d.prepareContent(J,Y,oe.binary,oe.optimizedBinaryString,oe.base64);var I=new w(J,U,oe);this.files[J]=I}var u=n("./utf8"),d=n("./utils"),m=n("./stream/GenericWorker"),y=n("./stream/StreamHelper"),b=n("./defaults"),_=n("./compressedObject"),w=n("./zipObject"),E=n("./generate"),A=n("./nodejsUtils"),C=n("./nodejs/NodejsStreamInputAdapter"),k=function(J){J.slice(-1)==="/"&&(J=J.substring(0,J.length-1));var Y=J.lastIndexOf("/");return 0<Y?J.substring(0,Y):""},B=function(J){return J.slice(-1)!=="/"&&(J+="/"),J},D=function(J,Y){return Y=Y!==void 0?Y:b.createFolders,J=B(J),this.files[J]||l.call(this,J,null,{dir:!0,createFolders:Y}),this.files[J]};function q(J){return Object.prototype.toString.call(J)==="[object RegExp]"}var j={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(J){var Y,L,Z;for(Y in this.files)Z=this.files[Y],(L=Y.slice(this.root.length,Y.length))&&Y.slice(0,this.root.length)===this.root&&J(L,Z)},filter:function(J){var Y=[];return this.forEach(function(L,Z){J(L,Z)&&Y.push(Z)}),Y},file:function(J,Y,L){if(arguments.length!==1)return J=this.root+J,l.call(this,J,Y,L),this;if(q(J)){var Z=J;return this.filter(function(oe,ae){return!ae.dir&&Z.test(oe)})}var Q=this.files[this.root+J];return Q&&!Q.dir?Q:null},folder:function(J){if(!J)return this;if(q(J))return this.filter(function(Q,oe){return oe.dir&&J.test(Q)});var Y=this.root+J,L=D.call(this,Y),Z=this.clone();return Z.root=L.name,Z},remove:function(J){J=this.root+J;var Y=this.files[J];if(Y||(J.slice(-1)!=="/"&&(J+="/"),Y=this.files[J]),Y&&!Y.dir)delete this.files[J];else for(var L=this.filter(function(Q,oe){return oe.name.slice(0,J.length)===J}),Z=0;Z<L.length;Z++)delete this.files[L[Z].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(J){var Y,L={};try{if((L=d.extend(J||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=L.type.toLowerCase(),L.compression=L.compression.toUpperCase(),L.type==="binarystring"&&(L.type="string"),!L.type)throw new Error("No output type specified.");d.checkSupport(L.type),L.platform!=="darwin"&&L.platform!=="freebsd"&&L.platform!=="linux"&&L.platform!=="sunos"||(L.platform="UNIX"),L.platform==="win32"&&(L.platform="DOS");var Z=L.comment||this.comment||"";Y=E.generateWorker(this,L,Z)}catch(Q){(Y=new m("error")).error(Q)}return new y(Y,L.type||"string",L.mimeType)},generateAsync:function(J,Y){return this.generateInternalStream(J).accumulate(Y)},generateNodeStream:function(J,Y){return(J=J||{}).type||(J.type="nodebuffer"),this.generateInternalStream(J).toNodejsStream(Y)}};a.exports=j},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,a,o){a.exports=n("stream")},{stream:void 0}],17:[function(n,a,o){var l=n("./DataReader");function u(d){l.call(this,d);for(var m=0;m<this.data.length;m++)d[m]=255&d[m]}n("../utils").inherits(u,l),u.prototype.byteAt=function(d){return this.data[this.zero+d]},u.prototype.lastIndexOfSignature=function(d){for(var m=d.charCodeAt(0),y=d.charCodeAt(1),b=d.charCodeAt(2),_=d.charCodeAt(3),w=this.length-4;0<=w;--w)if(this.data[w]===m&&this.data[w+1]===y&&this.data[w+2]===b&&this.data[w+3]===_)return w-this.zero;return-1},u.prototype.readAndCheckSignature=function(d){var m=d.charCodeAt(0),y=d.charCodeAt(1),b=d.charCodeAt(2),_=d.charCodeAt(3),w=this.readData(4);return m===w[0]&&y===w[1]&&b===w[2]&&_===w[3]},u.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},a.exports=u},{"../utils":32,"./DataReader":18}],18:[function(n,a,o){var l=n("../utils");function u(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(){},readInt:function(d){var m,y=0;for(this.checkOffset(d),m=this.index+d-1;m>=this.index;m--)y=(y<<8)+this.byteAt(m);return this.index+=d,y},readString:function(d){return l.transformTo("string",this.readData(d))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},a.exports=u},{"../utils":32}],19:[function(n,a,o){var l=n("./Uint8ArrayReader");function u(d){l.call(this,d)}n("../utils").inherits(u,l),u.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},a.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,a,o){var l=n("./DataReader");function u(d){l.call(this,d)}n("../utils").inherits(u,l),u.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},u.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},u.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},u.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},a.exports=u},{"../utils":32,"./DataReader":18}],21:[function(n,a,o){var l=n("./ArrayReader");function u(d){l.call(this,d)}n("../utils").inherits(u,l),u.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},a.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(n,a,o){var l=n("../utils"),u=n("../support"),d=n("./ArrayReader"),m=n("./StringReader"),y=n("./NodeBufferReader"),b=n("./Uint8ArrayReader");a.exports=function(_){var w=l.getTypeOf(_);return l.checkSupport(w),w!=="string"||u.uint8array?w==="nodebuffer"?new y(_):u.uint8array?new b(l.transformTo("uint8array",_)):new d(l.transformTo("array",_)):new m(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,a,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,a,o){var l=n("./GenericWorker"),u=n("../utils");function d(m){l.call(this,"ConvertWorker to "+m),this.destType=m}u.inherits(d,l),d.prototype.processChunk=function(m){this.push({data:u.transformTo(this.destType,m.data),meta:m.meta})},a.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(n,a,o){var l=n("./GenericWorker"),u=n("../crc32");function d(){l.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(d,l),d.prototype.processChunk=function(m){this.streamInfo.crc32=u(m.data,this.streamInfo.crc32||0),this.push(m)},a.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,a,o){var l=n("../utils"),u=n("./GenericWorker");function d(m){u.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}l.inherits(d,u),d.prototype.processChunk=function(m){if(m){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+m.data.length}u.prototype.processChunk.call(this,m)},a.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(n,a,o){var l=n("../utils"),u=n("./GenericWorker");function d(m){u.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(b){y.dataIsReady=!0,y.data=b,y.max=b&&b.length||0,y.type=l.getTypeOf(b),y.isPaused||y._tickAndRepeat()},function(b){y.error(b)})}l.inherits(d,u),d.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,l.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(l.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,y);break;case"uint8array":m=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":m=this.data.slice(this.index,y)}return this.index=y,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(n,a,o){function l(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}l.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,d){return this._listeners[u].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,d){if(this._listeners[u])for(var m=0;m<this._listeners[u].length;m++)this._listeners[u][m].call(this,d)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var d=this;return u.on("data",function(m){d.processChunk(m)}),u.on("end",function(){d.end()}),u.on("error",function(m){d.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,d){return this.extraStreamInfo[u]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},a.exports=l},{}],29:[function(n,a,o){var l=n("../utils"),u=n("./ConvertWorker"),d=n("./GenericWorker"),m=n("../base64"),y=n("../support"),b=n("../external"),_=null;if(y.nodestream)try{_=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function w(A,C){return new b.Promise(function(k,B){var D=[],q=A._internalType,j=A._outputType,J=A._mimeType;A.on("data",function(Y,L){D.push(Y),C&&C(L)}).on("error",function(Y){D=[],B(Y)}).on("end",function(){try{var Y=function(L,Z,Q){switch(L){case"blob":return l.newBlob(l.transformTo("arraybuffer",Z),Q);case"base64":return m.encode(Z);default:return l.transformTo(L,Z)}}(j,function(L,Z){var Q,oe=0,ae=null,U=0;for(Q=0;Q<Z.length;Q++)U+=Z[Q].length;switch(L){case"string":return Z.join("");case"array":return Array.prototype.concat.apply([],Z);case"uint8array":for(ae=new Uint8Array(U),Q=0;Q<Z.length;Q++)ae.set(Z[Q],oe),oe+=Z[Q].length;return ae;case"nodebuffer":return Buffer$y.concat(Z);default:throw new Error("concat : unsupported type '"+L+"'")}}(q,D),J);k(Y)}catch(L){B(L)}D=[]}).resume()})}function E(A,C,k){var B=C;switch(C){case"blob":case"arraybuffer":B="uint8array";break;case"base64":B="string"}try{this._internalType=B,this._outputType=C,this._mimeType=k,l.checkSupport(B),this._worker=A.pipe(new u(B)),A.lock()}catch(D){this._worker=new d("error"),this._worker.error(D)}}E.prototype={accumulate:function(A){return w(this,A)},on:function(A,C){var k=this;return A==="data"?this._worker.on(A,function(B){C.call(k,B.data,B.meta)}):this._worker.on(A,function(){l.delay(C,arguments,k)}),this},resume:function(){return l.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(A){if(l.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},A)}},a.exports=E},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,a,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer$y<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var l=new ArrayBuffer(0);try{o.blob=new Blob([l],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(l),o.blob=u.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(n,a,o){for(var l=n("./utils"),u=n("./support"),d=n("./nodejsUtils"),m=n("./stream/GenericWorker"),y=new Array(256),b=0;b<256;b++)y[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;y[254]=y[254]=1;function _(){m.call(this,"utf-8 decode"),this.leftOver=null}function w(){m.call(this,"utf-8 encode")}o.utf8encode=function(E){return u.nodebuffer?d.newBufferFrom(E,"utf-8"):function(A){var C,k,B,D,q,j=A.length,J=0;for(D=0;D<j;D++)(64512&(k=A.charCodeAt(D)))==55296&&D+1<j&&(64512&(B=A.charCodeAt(D+1)))==56320&&(k=65536+(k-55296<<10)+(B-56320),D++),J+=k<128?1:k<2048?2:k<65536?3:4;for(C=u.uint8array?new Uint8Array(J):new Array(J),D=q=0;q<J;D++)(64512&(k=A.charCodeAt(D)))==55296&&D+1<j&&(64512&(B=A.charCodeAt(D+1)))==56320&&(k=65536+(k-55296<<10)+(B-56320),D++),k<128?C[q++]=k:(k<2048?C[q++]=192|k>>>6:(k<65536?C[q++]=224|k>>>12:(C[q++]=240|k>>>18,C[q++]=128|k>>>12&63),C[q++]=128|k>>>6&63),C[q++]=128|63&k);return C}(E)},o.utf8decode=function(E){return u.nodebuffer?l.transformTo("nodebuffer",E).toString("utf-8"):function(A){var C,k,B,D,q=A.length,j=new Array(2*q);for(C=k=0;C<q;)if((B=A[C++])<128)j[k++]=B;else if(4<(D=y[B]))j[k++]=65533,C+=D-1;else{for(B&=D===2?31:D===3?15:7;1<D&&C<q;)B=B<<6|63&A[C++],D--;1<D?j[k++]=65533:B<65536?j[k++]=B:(B-=65536,j[k++]=55296|B>>10&1023,j[k++]=56320|1023&B)}return j.length!==k&&(j.subarray?j=j.subarray(0,k):j.length=k),l.applyFromCharCode(j)}(E=l.transformTo(u.uint8array?"uint8array":"array",E))},l.inherits(_,m),_.prototype.processChunk=function(E){var A=l.transformTo(u.uint8array?"uint8array":"array",E.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var C=A;(A=new Uint8Array(C.length+this.leftOver.length)).set(this.leftOver,0),A.set(C,this.leftOver.length)}else A=this.leftOver.concat(A);this.leftOver=null}var k=function(D,q){var j;for((q=q||D.length)>D.length&&(q=D.length),j=q-1;0<=j&&(192&D[j])==128;)j--;return j<0||j===0?q:j+y[D[j]]>q?j:q}(A),B=A;k!==A.length&&(u.uint8array?(B=A.subarray(0,k),this.leftOver=A.subarray(k,A.length)):(B=A.slice(0,k),this.leftOver=A.slice(k,A.length))),this.push({data:o.utf8decode(B),meta:E.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=_,l.inherits(w,m),w.prototype.processChunk=function(E){this.push({data:o.utf8encode(E.data),meta:E.meta})},o.Utf8EncodeWorker=w},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,a,o){var l=n("./support"),u=n("./base64"),d=n("./nodejsUtils"),m=n("./external");function y(C){return C}function b(C,k){for(var B=0;B<C.length;++B)k[B]=255&C.charCodeAt(B);return k}n("setimmediate"),o.newBlob=function(C,k){o.checkSupport("blob");try{return new Blob([C],{type:k})}catch{try{var B=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return B.append(C),B.getBlob(k)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(C,k,B){var D=[],q=0,j=C.length;if(j<=B)return String.fromCharCode.apply(null,C);for(;q<j;)k==="array"||k==="nodebuffer"?D.push(String.fromCharCode.apply(null,C.slice(q,Math.min(q+B,j)))):D.push(String.fromCharCode.apply(null,C.subarray(q,Math.min(q+B,j)))),q+=B;return D.join("")},stringifyByChar:function(C){for(var k="",B=0;B<C.length;B++)k+=String.fromCharCode(C[B]);return k},applyCanBeUsed:{uint8array:function(){try{return l.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return l.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}}()}};function w(C){var k=65536,B=o.getTypeOf(C),D=!0;if(B==="uint8array"?D=_.applyCanBeUsed.uint8array:B==="nodebuffer"&&(D=_.applyCanBeUsed.nodebuffer),D)for(;1<k;)try{return _.stringifyByChunk(C,B,k)}catch{k=Math.floor(k/2)}return _.stringifyByChar(C)}function E(C,k){for(var B=0;B<C.length;B++)k[B]=C[B];return k}o.applyFromCharCode=w;var A={};A.string={string:y,array:function(C){return b(C,new Array(C.length))},arraybuffer:function(C){return A.string.uint8array(C).buffer},uint8array:function(C){return b(C,new Uint8Array(C.length))},nodebuffer:function(C){return b(C,d.allocBuffer(C.length))}},A.array={string:w,array:y,arraybuffer:function(C){return new Uint8Array(C).buffer},uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return d.newBufferFrom(C)}},A.arraybuffer={string:function(C){return w(new Uint8Array(C))},array:function(C){return E(new Uint8Array(C),new Array(C.byteLength))},arraybuffer:y,uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return d.newBufferFrom(new Uint8Array(C))}},A.uint8array={string:w,array:function(C){return E(C,new Array(C.length))},arraybuffer:function(C){return C.buffer},uint8array:y,nodebuffer:function(C){return d.newBufferFrom(C)}},A.nodebuffer={string:w,array:function(C){return E(C,new Array(C.length))},arraybuffer:function(C){return A.nodebuffer.uint8array(C).buffer},uint8array:function(C){return E(C,new Uint8Array(C.length))},nodebuffer:y},o.transformTo=function(C,k){if(k=k||"",!C)return k;o.checkSupport(C);var B=o.getTypeOf(k);return A[B][C](k)},o.resolve=function(C){for(var k=C.split("/"),B=[],D=0;D<k.length;D++){var q=k[D];q==="."||q===""&&D!==0&&D!==k.length-1||(q===".."?B.pop():B.push(q))}return B.join("/")},o.getTypeOf=function(C){return typeof C=="string"?"string":Object.prototype.toString.call(C)==="[object Array]"?"array":l.nodebuffer&&d.isBuffer(C)?"nodebuffer":l.uint8array&&C instanceof Uint8Array?"uint8array":l.arraybuffer&&C instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(C){if(!l[C.toLowerCase()])throw new Error(C+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(C){var k,B,D="";for(B=0;B<(C||"").length;B++)D+="\\x"+((k=C.charCodeAt(B))<16?"0":"")+k.toString(16).toUpperCase();return D},o.delay=function(C,k,B){setImmediate(function(){C.apply(B||null,k||[])})},o.inherits=function(C,k){function B(){}B.prototype=k.prototype,C.prototype=new B},o.extend=function(){var C,k,B={};for(C=0;C<arguments.length;C++)for(k in arguments[C])Object.prototype.hasOwnProperty.call(arguments[C],k)&&B[k]===void 0&&(B[k]=arguments[C][k]);return B},o.prepareContent=function(C,k,B,D,q){return m.Promise.resolve(k).then(function(j){return l.blob&&(j instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(j))!==-1)&&typeof FileReader<"u"?new m.Promise(function(J,Y){var L=new FileReader;L.onload=function(Z){J(Z.target.result)},L.onerror=function(Z){Y(Z.target.error)},L.readAsArrayBuffer(j)}):j}).then(function(j){var J=o.getTypeOf(j);return J?(J==="arraybuffer"?j=o.transformTo("uint8array",j):J==="string"&&(q?j=u.decode(j):B&&D!==!0&&(j=function(Y){return b(Y,l.uint8array?new Uint8Array(Y.length):new Array(Y.length))}(j))),j):m.Promise.reject(new Error("Can't read the data of '"+C+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,a,o){var l=n("./reader/readerFor"),u=n("./utils"),d=n("./signature"),m=n("./zipEntry"),y=n("./support");function b(_){this.files=[],this.loadOptions=_}b.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var w=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(w)+", expected "+u.pretty(_)+")")}},isSignature:function(_,w){var E=this.reader.index;this.reader.setIndex(_);var A=this.reader.readString(4)===w;return this.reader.setIndex(E),A},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),w=y.uint8array?"uint8array":"array",E=u.transformTo(w,_);this.zipComment=this.loadOptions.decodeFileName(E)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,w,E,A=this.zip64EndOfCentralSize-44;0<A;)_=this.reader.readInt(2),w=this.reader.readInt(4),E=this.reader.readData(w),this.zip64ExtensibleData[_]={id:_,length:w,value:E}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,w;for(_=0;_<this.files.length;_++)w=this.files[_],this.reader.setIndex(w.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),w.readLocalPart(this.reader),w.handleUTF8(),w.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(_=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var w=_;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var E=this.centralDirOffset+this.centralDirSize;this.zip64&&(E+=20,E+=12+this.zip64EndOfCentralSize);var A=w-E;if(0<A)this.isSignature(w,d.CENTRAL_FILE_HEADER)||(this.reader.zero=A);else if(A<0)throw new Error("Corrupted zip: missing "+Math.abs(A)+" bytes.")},prepareReader:function(_){this.reader=l(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=b},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,a,o){var l=n("./reader/readerFor"),u=n("./utils"),d=n("./compressedObject"),m=n("./crc32"),y=n("./utf8"),b=n("./compressions"),_=n("./support");function w(E,A){this.options=E,this.loadOptions=A}w.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(E){var A,C;if(E.skip(22),this.fileNameLength=E.readInt(2),C=E.readInt(2),this.fileName=E.readData(this.fileNameLength),E.skip(C),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((A=function(k){for(var B in b)if(Object.prototype.hasOwnProperty.call(b,B)&&b[B].magic===k)return b[B];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,A,E.readData(this.compressedSize))},readCentralPart:function(E){this.versionMadeBy=E.readInt(2),E.skip(2),this.bitFlag=E.readInt(2),this.compressionMethod=E.readString(2),this.date=E.readDate(),this.crc32=E.readInt(4),this.compressedSize=E.readInt(4),this.uncompressedSize=E.readInt(4);var A=E.readInt(2);if(this.extraFieldsLength=E.readInt(2),this.fileCommentLength=E.readInt(2),this.diskNumberStart=E.readInt(2),this.internalFileAttributes=E.readInt(2),this.externalFileAttributes=E.readInt(4),this.localHeaderOffset=E.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");E.skip(A),this.readExtraFields(E),this.parseZIP64ExtraField(E),this.fileComment=E.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var E=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),E==0&&(this.dosPermissions=63&this.externalFileAttributes),E==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var E=l(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=E.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=E.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=E.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=E.readInt(4))}},readExtraFields:function(E){var A,C,k,B=E.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});E.index+4<B;)A=E.readInt(2),C=E.readInt(2),k=E.readData(C),this.extraFields[A]={id:A,length:C,value:k};E.setIndex(B)},handleUTF8:function(){var E=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var A=this.findExtraFieldUnicodePath();if(A!==null)this.fileNameStr=A;else{var C=u.transformTo(E,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(C)}var k=this.findExtraFieldUnicodeComment();if(k!==null)this.fileCommentStr=k;else{var B=u.transformTo(E,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(B)}}},findExtraFieldUnicodePath:function(){var E=this.extraFields[28789];if(E){var A=l(E.value);return A.readInt(1)!==1||m(this.fileName)!==A.readInt(4)?null:y.utf8decode(A.readData(E.length-5))}return null},findExtraFieldUnicodeComment:function(){var E=this.extraFields[25461];if(E){var A=l(E.value);return A.readInt(1)!==1||m(this.fileComment)!==A.readInt(4)?null:y.utf8decode(A.readData(E.length-5))}return null}},a.exports=w},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,a,o){function l(A,C,k){this.name=A,this.dir=k.dir,this.date=k.date,this.comment=k.comment,this.unixPermissions=k.unixPermissions,this.dosPermissions=k.dosPermissions,this._data=C,this._dataBinary=k.binary,this.options={compression:k.compression,compressionOptions:k.compressionOptions}}var u=n("./stream/StreamHelper"),d=n("./stream/DataWorker"),m=n("./utf8"),y=n("./compressedObject"),b=n("./stream/GenericWorker");l.prototype={internalStream:function(A){var C=null,k="string";try{if(!A)throw new Error("No output type specified.");var B=(k=A.toLowerCase())==="string"||k==="text";k!=="binarystring"&&k!=="text"||(k="string"),C=this._decompressWorker();var D=!this._dataBinary;D&&!B&&(C=C.pipe(new m.Utf8EncodeWorker)),!D&&B&&(C=C.pipe(new m.Utf8DecodeWorker))}catch(q){(C=new b("error")).error(q)}return new u(C,k,"")},async:function(A,C){return this.internalStream(A).accumulate(C)},nodeStream:function(A,C){return this.internalStream(A||"nodebuffer").toNodejsStream(C)},_compressWorker:function(A,C){if(this._data instanceof y&&this._data.compression.magic===A.magic)return this._data.getCompressedWorker();var k=this._decompressWorker();return this._dataBinary||(k=k.pipe(new m.Utf8EncodeWorker)),y.createWorkerFrom(k,A,C)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof b?this._data:new d(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],w=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},E=0;E<_.length;E++)l.prototype[_[E]]=w;a.exports=l},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,a,o){(function(l){var u,d,m=l.MutationObserver||l.WebKitMutationObserver;if(m){var y=0,b=new m(A),_=l.document.createTextNode("");b.observe(_,{characterData:!0}),u=function(){_.data=y=++y%2}}else if(l.setImmediate||l.MessageChannel===void 0)u="document"in l&&"onreadystatechange"in l.document.createElement("script")?function(){var C=l.document.createElement("script");C.onreadystatechange=function(){A(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},l.document.documentElement.appendChild(C)}:function(){setTimeout(A,0)};else{var w=new l.MessageChannel;w.port1.onmessage=A,u=function(){w.port2.postMessage(0)}}var E=[];function A(){var C,k;d=!0;for(var B=E.length;B;){for(k=E,E=[],C=-1;++C<B;)k[C]();B=E.length}d=!1}a.exports=function(C){E.push(C)!==1||d||u()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,a,o){var l=n("immediate");function u(){}var d={},m=["REJECTED"],y=["FULFILLED"],b=["PENDING"];function _(B){if(typeof B!="function")throw new TypeError("resolver must be a function");this.state=b,this.queue=[],this.outcome=void 0,B!==u&&C(this,B)}function w(B,D,q){this.promise=B,typeof D=="function"&&(this.onFulfilled=D,this.callFulfilled=this.otherCallFulfilled),typeof q=="function"&&(this.onRejected=q,this.callRejected=this.otherCallRejected)}function E(B,D,q){l(function(){var j;try{j=D(q)}catch(J){return d.reject(B,J)}j===B?d.reject(B,new TypeError("Cannot resolve promise with itself")):d.resolve(B,j)})}function A(B){var D=B&&B.then;if(B&&(typeof B=="object"||typeof B=="function")&&typeof D=="function")return function(){D.apply(B,arguments)}}function C(B,D){var q=!1;function j(L){q||(q=!0,d.reject(B,L))}function J(L){q||(q=!0,d.resolve(B,L))}var Y=k(function(){D(J,j)});Y.status==="error"&&j(Y.value)}function k(B,D){var q={};try{q.value=B(D),q.status="success"}catch(j){q.status="error",q.value=j}return q}(a.exports=_).prototype.finally=function(B){if(typeof B!="function")return this;var D=this.constructor;return this.then(function(q){return D.resolve(B()).then(function(){return q})},function(q){return D.resolve(B()).then(function(){throw q})})},_.prototype.catch=function(B){return this.then(null,B)},_.prototype.then=function(B,D){if(typeof B!="function"&&this.state===y||typeof D!="function"&&this.state===m)return this;var q=new this.constructor(u);return this.state!==b?E(q,this.state===y?B:D,this.outcome):this.queue.push(new w(q,B,D)),q},w.prototype.callFulfilled=function(B){d.resolve(this.promise,B)},w.prototype.otherCallFulfilled=function(B){E(this.promise,this.onFulfilled,B)},w.prototype.callRejected=function(B){d.reject(this.promise,B)},w.prototype.otherCallRejected=function(B){E(this.promise,this.onRejected,B)},d.resolve=function(B,D){var q=k(A,D);if(q.status==="error")return d.reject(B,q.value);var j=q.value;if(j)C(B,j);else{B.state=y,B.outcome=D;for(var J=-1,Y=B.queue.length;++J<Y;)B.queue[J].callFulfilled(D)}return B},d.reject=function(B,D){B.state=m,B.outcome=D;for(var q=-1,j=B.queue.length;++q<j;)B.queue[q].callRejected(D);return B},_.resolve=function(B){return B instanceof this?B:d.resolve(new this(u),B)},_.reject=function(B){var D=new this(u);return d.reject(D,B)},_.all=function(B){var D=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var q=B.length,j=!1;if(!q)return this.resolve([]);for(var J=new Array(q),Y=0,L=-1,Z=new this(u);++L<q;)Q(B[L],L);return Z;function Q(oe,ae){D.resolve(oe).then(function(U){J[ae]=U,++Y!==q||j||(j=!0,d.resolve(Z,J))},function(U){j||(j=!0,d.reject(Z,U))})}},_.race=function(B){var D=this;if(Object.prototype.toString.call(B)!=="[object Array]")return this.reject(new TypeError("must be an array"));var q=B.length,j=!1;if(!q)return this.resolve([]);for(var J=-1,Y=new this(u);++J<q;)L=B[J],D.resolve(L).then(function(Z){j||(j=!0,d.resolve(Y,Z))},function(Z){j||(j=!0,d.reject(Y,Z))});var L;return Y}},{immediate:36}],38:[function(n,a,o){var l={};(0,n("./lib/utils/common").assign)(l,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),a.exports=l},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,a,o){var l=n("./zlib/deflate"),u=n("./utils/common"),d=n("./utils/strings"),m=n("./zlib/messages"),y=n("./zlib/zstream"),b=Object.prototype.toString,_=0,w=-1,E=0,A=8;function C(B){if(!(this instanceof C))return new C(B);this.options=u.assign({level:w,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:E,to:""},B||{});var D=this.options;D.raw&&0<D.windowBits?D.windowBits=-D.windowBits:D.gzip&&0<D.windowBits&&D.windowBits<16&&(D.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var q=l.deflateInit2(this.strm,D.level,D.method,D.windowBits,D.memLevel,D.strategy);if(q!==_)throw new Error(m[q]);if(D.header&&l.deflateSetHeader(this.strm,D.header),D.dictionary){var j;if(j=typeof D.dictionary=="string"?d.string2buf(D.dictionary):b.call(D.dictionary)==="[object ArrayBuffer]"?new Uint8Array(D.dictionary):D.dictionary,(q=l.deflateSetDictionary(this.strm,j))!==_)throw new Error(m[q]);this._dict_set=!0}}function k(B,D){var q=new C(D);if(q.push(B,!0),q.err)throw q.msg||m[q.err];return q.result}C.prototype.push=function(B,D){var q,j,J=this.strm,Y=this.options.chunkSize;if(this.ended)return!1;j=D===~~D?D:D===!0?4:0,typeof B=="string"?J.input=d.string2buf(B):b.call(B)==="[object ArrayBuffer]"?J.input=new Uint8Array(B):J.input=B,J.next_in=0,J.avail_in=J.input.length;do{if(J.avail_out===0&&(J.output=new u.Buf8(Y),J.next_out=0,J.avail_out=Y),(q=l.deflate(J,j))!==1&&q!==_)return this.onEnd(q),!(this.ended=!0);J.avail_out!==0&&(J.avail_in!==0||j!==4&&j!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(u.shrinkBuf(J.output,J.next_out))):this.onData(u.shrinkBuf(J.output,J.next_out)))}while((0<J.avail_in||J.avail_out===0)&&q!==1);return j===4?(q=l.deflateEnd(this.strm),this.onEnd(q),this.ended=!0,q===_):j!==2||(this.onEnd(_),!(J.avail_out=0))},C.prototype.onData=function(B){this.chunks.push(B)},C.prototype.onEnd=function(B){B===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=B,this.msg=this.strm.msg},o.Deflate=C,o.deflate=k,o.deflateRaw=function(B,D){return(D=D||{}).raw=!0,k(B,D)},o.gzip=function(B,D){return(D=D||{}).gzip=!0,k(B,D)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,a,o){var l=n("./zlib/inflate"),u=n("./utils/common"),d=n("./utils/strings"),m=n("./zlib/constants"),y=n("./zlib/messages"),b=n("./zlib/zstream"),_=n("./zlib/gzheader"),w=Object.prototype.toString;function E(C){if(!(this instanceof E))return new E(C);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},C||{});var k=this.options;k.raw&&0<=k.windowBits&&k.windowBits<16&&(k.windowBits=-k.windowBits,k.windowBits===0&&(k.windowBits=-15)),!(0<=k.windowBits&&k.windowBits<16)||C&&C.windowBits||(k.windowBits+=32),15<k.windowBits&&k.windowBits<48&&!(15&k.windowBits)&&(k.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var B=l.inflateInit2(this.strm,k.windowBits);if(B!==m.Z_OK)throw new Error(y[B]);this.header=new _,l.inflateGetHeader(this.strm,this.header)}function A(C,k){var B=new E(k);if(B.push(C,!0),B.err)throw B.msg||y[B.err];return B.result}E.prototype.push=function(C,k){var B,D,q,j,J,Y,L=this.strm,Z=this.options.chunkSize,Q=this.options.dictionary,oe=!1;if(this.ended)return!1;D=k===~~k?k:k===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof C=="string"?L.input=d.binstring2buf(C):w.call(C)==="[object ArrayBuffer]"?L.input=new Uint8Array(C):L.input=C,L.next_in=0,L.avail_in=L.input.length;do{if(L.avail_out===0&&(L.output=new u.Buf8(Z),L.next_out=0,L.avail_out=Z),(B=l.inflate(L,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&Q&&(Y=typeof Q=="string"?d.string2buf(Q):w.call(Q)==="[object ArrayBuffer]"?new Uint8Array(Q):Q,B=l.inflateSetDictionary(this.strm,Y)),B===m.Z_BUF_ERROR&&oe===!0&&(B=m.Z_OK,oe=!1),B!==m.Z_STREAM_END&&B!==m.Z_OK)return this.onEnd(B),!(this.ended=!0);L.next_out&&(L.avail_out!==0&&B!==m.Z_STREAM_END&&(L.avail_in!==0||D!==m.Z_FINISH&&D!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(q=d.utf8border(L.output,L.next_out),j=L.next_out-q,J=d.buf2string(L.output,q),L.next_out=j,L.avail_out=Z-j,j&&u.arraySet(L.output,L.output,q,j,0),this.onData(J)):this.onData(u.shrinkBuf(L.output,L.next_out)))),L.avail_in===0&&L.avail_out===0&&(oe=!0)}while((0<L.avail_in||L.avail_out===0)&&B!==m.Z_STREAM_END);return B===m.Z_STREAM_END&&(D=m.Z_FINISH),D===m.Z_FINISH?(B=l.inflateEnd(this.strm),this.onEnd(B),this.ended=!0,B===m.Z_OK):D!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(L.avail_out=0))},E.prototype.onData=function(C){this.chunks.push(C)},E.prototype.onEnd=function(C){C===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},o.Inflate=E,o.inflate=A,o.inflateRaw=function(C,k){return(k=k||{}).raw=!0,A(C,k)},o.ungzip=A},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,a,o){var l=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(m){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var b=y.shift();if(b){if(typeof b!="object")throw new TypeError(b+"must be non-object");for(var _ in b)b.hasOwnProperty(_)&&(m[_]=b[_])}}return m},o.shrinkBuf=function(m,y){return m.length===y?m:m.subarray?m.subarray(0,y):(m.length=y,m)};var u={arraySet:function(m,y,b,_,w){if(y.subarray&&m.subarray)m.set(y.subarray(b,b+_),w);else for(var E=0;E<_;E++)m[w+E]=y[b+E]},flattenChunks:function(m){var y,b,_,w,E,A;for(y=_=0,b=m.length;y<b;y++)_+=m[y].length;for(A=new Uint8Array(_),y=w=0,b=m.length;y<b;y++)E=m[y],A.set(E,w),w+=E.length;return A}},d={arraySet:function(m,y,b,_,w){for(var E=0;E<_;E++)m[w+E]=y[b+E]},flattenChunks:function(m){return[].concat.apply([],m)}};o.setTyped=function(m){m?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,u)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,d))},o.setTyped(l)},{}],42:[function(n,a,o){var l=n("./common"),u=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var m=new l.Buf8(256),y=0;y<256;y++)m[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function b(_,w){if(w<65537&&(_.subarray&&d||!_.subarray&&u))return String.fromCharCode.apply(null,l.shrinkBuf(_,w));for(var E="",A=0;A<w;A++)E+=String.fromCharCode(_[A]);return E}m[254]=m[254]=1,o.string2buf=function(_){var w,E,A,C,k,B=_.length,D=0;for(C=0;C<B;C++)(64512&(E=_.charCodeAt(C)))==55296&&C+1<B&&(64512&(A=_.charCodeAt(C+1)))==56320&&(E=65536+(E-55296<<10)+(A-56320),C++),D+=E<128?1:E<2048?2:E<65536?3:4;for(w=new l.Buf8(D),C=k=0;k<D;C++)(64512&(E=_.charCodeAt(C)))==55296&&C+1<B&&(64512&(A=_.charCodeAt(C+1)))==56320&&(E=65536+(E-55296<<10)+(A-56320),C++),E<128?w[k++]=E:(E<2048?w[k++]=192|E>>>6:(E<65536?w[k++]=224|E>>>12:(w[k++]=240|E>>>18,w[k++]=128|E>>>12&63),w[k++]=128|E>>>6&63),w[k++]=128|63&E);return w},o.buf2binstring=function(_){return b(_,_.length)},o.binstring2buf=function(_){for(var w=new l.Buf8(_.length),E=0,A=w.length;E<A;E++)w[E]=_.charCodeAt(E);return w},o.buf2string=function(_,w){var E,A,C,k,B=w||_.length,D=new Array(2*B);for(E=A=0;E<B;)if((C=_[E++])<128)D[A++]=C;else if(4<(k=m[C]))D[A++]=65533,E+=k-1;else{for(C&=k===2?31:k===3?15:7;1<k&&E<B;)C=C<<6|63&_[E++],k--;1<k?D[A++]=65533:C<65536?D[A++]=C:(C-=65536,D[A++]=55296|C>>10&1023,D[A++]=56320|1023&C)}return b(D,A)},o.utf8border=function(_,w){var E;for((w=w||_.length)>_.length&&(w=_.length),E=w-1;0<=E&&(192&_[E])==128;)E--;return E<0||E===0?w:E+m[_[E]]>w?E:w}},{"./common":41}],43:[function(n,a,o){a.exports=function(l,u,d,m){for(var y=65535&l|0,b=l>>>16&65535|0,_=0;d!==0;){for(d-=_=2e3<d?2e3:d;b=b+(y=y+u[m++]|0)|0,--_;);y%=65521,b%=65521}return y|b<<16|0}},{}],44:[function(n,a,o){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,a,o){var l=function(){for(var u,d=[],m=0;m<256;m++){u=m;for(var y=0;y<8;y++)u=1&u?3988292384^u>>>1:u>>>1;d[m]=u}return d}();a.exports=function(u,d,m,y){var b=l,_=y+m;u^=-1;for(var w=y;w<_;w++)u=u>>>8^b[255&(u^d[w])];return-1^u}},{}],46:[function(n,a,o){var l,u=n("../utils/common"),d=n("./trees"),m=n("./adler32"),y=n("./crc32"),b=n("./messages"),_=0,w=4,E=0,A=-2,C=-1,k=4,B=2,D=8,q=9,j=286,J=30,Y=19,L=2*j+1,Z=15,Q=3,oe=258,ae=oe+Q+1,U=42,I=113,x=1,T=2,M=3,O=4;function z(te,ve){return te.msg=b[ve],ve}function X(te){return(te<<1)-(4<te?9:0)}function H(te){for(var ve=te.length;0<=--ve;)te[ve]=0}function P(te){var ve=te.state,Se=ve.pending;Se>te.avail_out&&(Se=te.avail_out),Se!==0&&(u.arraySet(te.output,ve.pending_buf,ve.pending_out,Se,te.next_out),te.next_out+=Se,ve.pending_out+=Se,te.total_out+=Se,te.avail_out-=Se,ve.pending-=Se,ve.pending===0&&(ve.pending_out=0))}function S(te,ve){d._tr_flush_block(te,0<=te.block_start?te.block_start:-1,te.strstart-te.block_start,ve),te.block_start=te.strstart,P(te.strm)}function F(te,ve){te.pending_buf[te.pending++]=ve}function ue(te,ve){te.pending_buf[te.pending++]=ve>>>8&255,te.pending_buf[te.pending++]=255&ve}function ee(te,ve){var Se,be,_e=te.max_chain_length,ye=te.strstart,$e=te.prev_length,Ie=te.nice_match,Be=te.strstart>te.w_size-ae?te.strstart-(te.w_size-ae):0,Me=te.window,Fe=te.w_mask,Ve=te.prev,Oe=te.strstart+oe,ge=Me[ye+$e-1],ie=Me[ye+$e];te.prev_length>=te.good_match&&(_e>>=2),Ie>te.lookahead&&(Ie=te.lookahead);do if(Me[(Se=ve)+$e]===ie&&Me[Se+$e-1]===ge&&Me[Se]===Me[ye]&&Me[++Se]===Me[ye+1]){ye+=2,Se++;do;while(Me[++ye]===Me[++Se]&&Me[++ye]===Me[++Se]&&Me[++ye]===Me[++Se]&&Me[++ye]===Me[++Se]&&Me[++ye]===Me[++Se]&&Me[++ye]===Me[++Se]&&Me[++ye]===Me[++Se]&&Me[++ye]===Me[++Se]&&ye<Oe);if(be=oe-(Oe-ye),ye=Oe-oe,$e<be){if(te.match_start=ve,Ie<=($e=be))break;ge=Me[ye+$e-1],ie=Me[ye+$e]}}while((ve=Ve[ve&Fe])>Be&&--_e!=0);return $e<=te.lookahead?$e:te.lookahead}function fe(te){var ve,Se,be,_e,ye,$e,Ie,Be,Me,Fe,Ve=te.w_size;do{if(_e=te.window_size-te.lookahead-te.strstart,te.strstart>=Ve+(Ve-ae)){for(u.arraySet(te.window,te.window,Ve,Ve,0),te.match_start-=Ve,te.strstart-=Ve,te.block_start-=Ve,ve=Se=te.hash_size;be=te.head[--ve],te.head[ve]=Ve<=be?be-Ve:0,--Se;);for(ve=Se=Ve;be=te.prev[--ve],te.prev[ve]=Ve<=be?be-Ve:0,--Se;);_e+=Ve}if(te.strm.avail_in===0)break;if($e=te.strm,Ie=te.window,Be=te.strstart+te.lookahead,Me=_e,Fe=void 0,Fe=$e.avail_in,Me<Fe&&(Fe=Me),Se=Fe===0?0:($e.avail_in-=Fe,u.arraySet(Ie,$e.input,$e.next_in,Fe,Be),$e.state.wrap===1?$e.adler=m($e.adler,Ie,Fe,Be):$e.state.wrap===2&&($e.adler=y($e.adler,Ie,Fe,Be)),$e.next_in+=Fe,$e.total_in+=Fe,Fe),te.lookahead+=Se,te.lookahead+te.insert>=Q)for(ye=te.strstart-te.insert,te.ins_h=te.window[ye],te.ins_h=(te.ins_h<<te.hash_shift^te.window[ye+1])&te.hash_mask;te.insert&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[ye+Q-1])&te.hash_mask,te.prev[ye&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=ye,ye++,te.insert--,!(te.lookahead+te.insert<Q)););}while(te.lookahead<ae&&te.strm.avail_in!==0)}function le(te,ve){for(var Se,be;;){if(te.lookahead<ae){if(fe(te),te.lookahead<ae&&ve===_)return x;if(te.lookahead===0)break}if(Se=0,te.lookahead>=Q&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+Q-1])&te.hash_mask,Se=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),Se!==0&&te.strstart-Se<=te.w_size-ae&&(te.match_length=ee(te,Se)),te.match_length>=Q)if(be=d._tr_tally(te,te.strstart-te.match_start,te.match_length-Q),te.lookahead-=te.match_length,te.match_length<=te.max_lazy_match&&te.lookahead>=Q){for(te.match_length--;te.strstart++,te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+Q-1])&te.hash_mask,Se=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart,--te.match_length!=0;);te.strstart++}else te.strstart+=te.match_length,te.match_length=0,te.ins_h=te.window[te.strstart],te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+1])&te.hash_mask;else be=d._tr_tally(te,0,te.window[te.strstart]),te.lookahead--,te.strstart++;if(be&&(S(te,!1),te.strm.avail_out===0))return x}return te.insert=te.strstart<Q-1?te.strstart:Q-1,ve===w?(S(te,!0),te.strm.avail_out===0?M:O):te.last_lit&&(S(te,!1),te.strm.avail_out===0)?x:T}function ce(te,ve){for(var Se,be,_e;;){if(te.lookahead<ae){if(fe(te),te.lookahead<ae&&ve===_)return x;if(te.lookahead===0)break}if(Se=0,te.lookahead>=Q&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+Q-1])&te.hash_mask,Se=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),te.prev_length=te.match_length,te.prev_match=te.match_start,te.match_length=Q-1,Se!==0&&te.prev_length<te.max_lazy_match&&te.strstart-Se<=te.w_size-ae&&(te.match_length=ee(te,Se),te.match_length<=5&&(te.strategy===1||te.match_length===Q&&4096<te.strstart-te.match_start)&&(te.match_length=Q-1)),te.prev_length>=Q&&te.match_length<=te.prev_length){for(_e=te.strstart+te.lookahead-Q,be=d._tr_tally(te,te.strstart-1-te.prev_match,te.prev_length-Q),te.lookahead-=te.prev_length-1,te.prev_length-=2;++te.strstart<=_e&&(te.ins_h=(te.ins_h<<te.hash_shift^te.window[te.strstart+Q-1])&te.hash_mask,Se=te.prev[te.strstart&te.w_mask]=te.head[te.ins_h],te.head[te.ins_h]=te.strstart),--te.prev_length!=0;);if(te.match_available=0,te.match_length=Q-1,te.strstart++,be&&(S(te,!1),te.strm.avail_out===0))return x}else if(te.match_available){if((be=d._tr_tally(te,0,te.window[te.strstart-1]))&&S(te,!1),te.strstart++,te.lookahead--,te.strm.avail_out===0)return x}else te.match_available=1,te.strstart++,te.lookahead--}return te.match_available&&(be=d._tr_tally(te,0,te.window[te.strstart-1]),te.match_available=0),te.insert=te.strstart<Q-1?te.strstart:Q-1,ve===w?(S(te,!0),te.strm.avail_out===0?M:O):te.last_lit&&(S(te,!1),te.strm.avail_out===0)?x:T}function pe(te,ve,Se,be,_e){this.good_length=te,this.max_lazy=ve,this.nice_length=Se,this.max_chain=be,this.func=_e}function se(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=D,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*L),this.dyn_dtree=new u.Buf16(2*(2*J+1)),this.bl_tree=new u.Buf16(2*(2*Y+1)),H(this.dyn_ltree),H(this.dyn_dtree),H(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(Z+1),this.heap=new u.Buf16(2*j+1),H(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*j+1),H(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function de(te){var ve;return te&&te.state?(te.total_in=te.total_out=0,te.data_type=B,(ve=te.state).pending=0,ve.pending_out=0,ve.wrap<0&&(ve.wrap=-ve.wrap),ve.status=ve.wrap?U:I,te.adler=ve.wrap===2?0:1,ve.last_flush=_,d._tr_init(ve),E):z(te,A)}function re(te){var ve=de(te);return ve===E&&function(Se){Se.window_size=2*Se.w_size,H(Se.head),Se.max_lazy_match=l[Se.level].max_lazy,Se.good_match=l[Se.level].good_length,Se.nice_match=l[Se.level].nice_length,Se.max_chain_length=l[Se.level].max_chain,Se.strstart=0,Se.block_start=0,Se.lookahead=0,Se.insert=0,Se.match_length=Se.prev_length=Q-1,Se.match_available=0,Se.ins_h=0}(te.state),ve}function me(te,ve,Se,be,_e,ye){if(!te)return A;var $e=1;if(ve===C&&(ve=6),be<0?($e=0,be=-be):15<be&&($e=2,be-=16),_e<1||q<_e||Se!==D||be<8||15<be||ve<0||9<ve||ye<0||k<ye)return z(te,A);be===8&&(be=9);var Ie=new se;return(te.state=Ie).strm=te,Ie.wrap=$e,Ie.gzhead=null,Ie.w_bits=be,Ie.w_size=1<<Ie.w_bits,Ie.w_mask=Ie.w_size-1,Ie.hash_bits=_e+7,Ie.hash_size=1<<Ie.hash_bits,Ie.hash_mask=Ie.hash_size-1,Ie.hash_shift=~~((Ie.hash_bits+Q-1)/Q),Ie.window=new u.Buf8(2*Ie.w_size),Ie.head=new u.Buf16(Ie.hash_size),Ie.prev=new u.Buf16(Ie.w_size),Ie.lit_bufsize=1<<_e+6,Ie.pending_buf_size=4*Ie.lit_bufsize,Ie.pending_buf=new u.Buf8(Ie.pending_buf_size),Ie.d_buf=1*Ie.lit_bufsize,Ie.l_buf=3*Ie.lit_bufsize,Ie.level=ve,Ie.strategy=ye,Ie.method=Se,re(te)}l=[new pe(0,0,0,0,function(te,ve){var Se=65535;for(Se>te.pending_buf_size-5&&(Se=te.pending_buf_size-5);;){if(te.lookahead<=1){if(fe(te),te.lookahead===0&&ve===_)return x;if(te.lookahead===0)break}te.strstart+=te.lookahead,te.lookahead=0;var be=te.block_start+Se;if((te.strstart===0||te.strstart>=be)&&(te.lookahead=te.strstart-be,te.strstart=be,S(te,!1),te.strm.avail_out===0)||te.strstart-te.block_start>=te.w_size-ae&&(S(te,!1),te.strm.avail_out===0))return x}return te.insert=0,ve===w?(S(te,!0),te.strm.avail_out===0?M:O):(te.strstart>te.block_start&&(S(te,!1),te.strm.avail_out),x)}),new pe(4,4,8,4,le),new pe(4,5,16,8,le),new pe(4,6,32,32,le),new pe(4,4,16,16,ce),new pe(8,16,32,32,ce),new pe(8,16,128,128,ce),new pe(8,32,128,256,ce),new pe(32,128,258,1024,ce),new pe(32,258,258,4096,ce)],o.deflateInit=function(te,ve){return me(te,ve,D,15,8,0)},o.deflateInit2=me,o.deflateReset=re,o.deflateResetKeep=de,o.deflateSetHeader=function(te,ve){return te&&te.state?te.state.wrap!==2?A:(te.state.gzhead=ve,E):A},o.deflate=function(te,ve){var Se,be,_e,ye;if(!te||!te.state||5<ve||ve<0)return te?z(te,A):A;if(be=te.state,!te.output||!te.input&&te.avail_in!==0||be.status===666&&ve!==w)return z(te,te.avail_out===0?-5:A);if(be.strm=te,Se=be.last_flush,be.last_flush=ve,be.status===U)if(be.wrap===2)te.adler=0,F(be,31),F(be,139),F(be,8),be.gzhead?(F(be,(be.gzhead.text?1:0)+(be.gzhead.hcrc?2:0)+(be.gzhead.extra?4:0)+(be.gzhead.name?8:0)+(be.gzhead.comment?16:0)),F(be,255&be.gzhead.time),F(be,be.gzhead.time>>8&255),F(be,be.gzhead.time>>16&255),F(be,be.gzhead.time>>24&255),F(be,be.level===9?2:2<=be.strategy||be.level<2?4:0),F(be,255&be.gzhead.os),be.gzhead.extra&&be.gzhead.extra.length&&(F(be,255&be.gzhead.extra.length),F(be,be.gzhead.extra.length>>8&255)),be.gzhead.hcrc&&(te.adler=y(te.adler,be.pending_buf,be.pending,0)),be.gzindex=0,be.status=69):(F(be,0),F(be,0),F(be,0),F(be,0),F(be,0),F(be,be.level===9?2:2<=be.strategy||be.level<2?4:0),F(be,3),be.status=I);else{var $e=D+(be.w_bits-8<<4)<<8;$e|=(2<=be.strategy||be.level<2?0:be.level<6?1:be.level===6?2:3)<<6,be.strstart!==0&&($e|=32),$e+=31-$e%31,be.status=I,ue(be,$e),be.strstart!==0&&(ue(be,te.adler>>>16),ue(be,65535&te.adler)),te.adler=1}if(be.status===69)if(be.gzhead.extra){for(_e=be.pending;be.gzindex<(65535&be.gzhead.extra.length)&&(be.pending!==be.pending_buf_size||(be.gzhead.hcrc&&be.pending>_e&&(te.adler=y(te.adler,be.pending_buf,be.pending-_e,_e)),P(te),_e=be.pending,be.pending!==be.pending_buf_size));)F(be,255&be.gzhead.extra[be.gzindex]),be.gzindex++;be.gzhead.hcrc&&be.pending>_e&&(te.adler=y(te.adler,be.pending_buf,be.pending-_e,_e)),be.gzindex===be.gzhead.extra.length&&(be.gzindex=0,be.status=73)}else be.status=73;if(be.status===73)if(be.gzhead.name){_e=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>_e&&(te.adler=y(te.adler,be.pending_buf,be.pending-_e,_e)),P(te),_e=be.pending,be.pending===be.pending_buf_size)){ye=1;break}ye=be.gzindex<be.gzhead.name.length?255&be.gzhead.name.charCodeAt(be.gzindex++):0,F(be,ye)}while(ye!==0);be.gzhead.hcrc&&be.pending>_e&&(te.adler=y(te.adler,be.pending_buf,be.pending-_e,_e)),ye===0&&(be.gzindex=0,be.status=91)}else be.status=91;if(be.status===91)if(be.gzhead.comment){_e=be.pending;do{if(be.pending===be.pending_buf_size&&(be.gzhead.hcrc&&be.pending>_e&&(te.adler=y(te.adler,be.pending_buf,be.pending-_e,_e)),P(te),_e=be.pending,be.pending===be.pending_buf_size)){ye=1;break}ye=be.gzindex<be.gzhead.comment.length?255&be.gzhead.comment.charCodeAt(be.gzindex++):0,F(be,ye)}while(ye!==0);be.gzhead.hcrc&&be.pending>_e&&(te.adler=y(te.adler,be.pending_buf,be.pending-_e,_e)),ye===0&&(be.status=103)}else be.status=103;if(be.status===103&&(be.gzhead.hcrc?(be.pending+2>be.pending_buf_size&&P(te),be.pending+2<=be.pending_buf_size&&(F(be,255&te.adler),F(be,te.adler>>8&255),te.adler=0,be.status=I)):be.status=I),be.pending!==0){if(P(te),te.avail_out===0)return be.last_flush=-1,E}else if(te.avail_in===0&&X(ve)<=X(Se)&&ve!==w)return z(te,-5);if(be.status===666&&te.avail_in!==0)return z(te,-5);if(te.avail_in!==0||be.lookahead!==0||ve!==_&&be.status!==666){var Ie=be.strategy===2?function(Be,Me){for(var Fe;;){if(Be.lookahead===0&&(fe(Be),Be.lookahead===0)){if(Me===_)return x;break}if(Be.match_length=0,Fe=d._tr_tally(Be,0,Be.window[Be.strstart]),Be.lookahead--,Be.strstart++,Fe&&(S(Be,!1),Be.strm.avail_out===0))return x}return Be.insert=0,Me===w?(S(Be,!0),Be.strm.avail_out===0?M:O):Be.last_lit&&(S(Be,!1),Be.strm.avail_out===0)?x:T}(be,ve):be.strategy===3?function(Be,Me){for(var Fe,Ve,Oe,ge,ie=Be.window;;){if(Be.lookahead<=oe){if(fe(Be),Be.lookahead<=oe&&Me===_)return x;if(Be.lookahead===0)break}if(Be.match_length=0,Be.lookahead>=Q&&0<Be.strstart&&(Ve=ie[Oe=Be.strstart-1])===ie[++Oe]&&Ve===ie[++Oe]&&Ve===ie[++Oe]){ge=Be.strstart+oe;do;while(Ve===ie[++Oe]&&Ve===ie[++Oe]&&Ve===ie[++Oe]&&Ve===ie[++Oe]&&Ve===ie[++Oe]&&Ve===ie[++Oe]&&Ve===ie[++Oe]&&Ve===ie[++Oe]&&Oe<ge);Be.match_length=oe-(ge-Oe),Be.match_length>Be.lookahead&&(Be.match_length=Be.lookahead)}if(Be.match_length>=Q?(Fe=d._tr_tally(Be,1,Be.match_length-Q),Be.lookahead-=Be.match_length,Be.strstart+=Be.match_length,Be.match_length=0):(Fe=d._tr_tally(Be,0,Be.window[Be.strstart]),Be.lookahead--,Be.strstart++),Fe&&(S(Be,!1),Be.strm.avail_out===0))return x}return Be.insert=0,Me===w?(S(Be,!0),Be.strm.avail_out===0?M:O):Be.last_lit&&(S(Be,!1),Be.strm.avail_out===0)?x:T}(be,ve):l[be.level].func(be,ve);if(Ie!==M&&Ie!==O||(be.status=666),Ie===x||Ie===M)return te.avail_out===0&&(be.last_flush=-1),E;if(Ie===T&&(ve===1?d._tr_align(be):ve!==5&&(d._tr_stored_block(be,0,0,!1),ve===3&&(H(be.head),be.lookahead===0&&(be.strstart=0,be.block_start=0,be.insert=0))),P(te),te.avail_out===0))return be.last_flush=-1,E}return ve!==w?E:be.wrap<=0?1:(be.wrap===2?(F(be,255&te.adler),F(be,te.adler>>8&255),F(be,te.adler>>16&255),F(be,te.adler>>24&255),F(be,255&te.total_in),F(be,te.total_in>>8&255),F(be,te.total_in>>16&255),F(be,te.total_in>>24&255)):(ue(be,te.adler>>>16),ue(be,65535&te.adler)),P(te),0<be.wrap&&(be.wrap=-be.wrap),be.pending!==0?E:1)},o.deflateEnd=function(te){var ve;return te&&te.state?(ve=te.state.status)!==U&&ve!==69&&ve!==73&&ve!==91&&ve!==103&&ve!==I&&ve!==666?z(te,A):(te.state=null,ve===I?z(te,-3):E):A},o.deflateSetDictionary=function(te,ve){var Se,be,_e,ye,$e,Ie,Be,Me,Fe=ve.length;if(!te||!te.state||(ye=(Se=te.state).wrap)===2||ye===1&&Se.status!==U||Se.lookahead)return A;for(ye===1&&(te.adler=m(te.adler,ve,Fe,0)),Se.wrap=0,Fe>=Se.w_size&&(ye===0&&(H(Se.head),Se.strstart=0,Se.block_start=0,Se.insert=0),Me=new u.Buf8(Se.w_size),u.arraySet(Me,ve,Fe-Se.w_size,Se.w_size,0),ve=Me,Fe=Se.w_size),$e=te.avail_in,Ie=te.next_in,Be=te.input,te.avail_in=Fe,te.next_in=0,te.input=ve,fe(Se);Se.lookahead>=Q;){for(be=Se.strstart,_e=Se.lookahead-(Q-1);Se.ins_h=(Se.ins_h<<Se.hash_shift^Se.window[be+Q-1])&Se.hash_mask,Se.prev[be&Se.w_mask]=Se.head[Se.ins_h],Se.head[Se.ins_h]=be,be++,--_e;);Se.strstart=be,Se.lookahead=Q-1,fe(Se)}return Se.strstart+=Se.lookahead,Se.block_start=Se.strstart,Se.insert=Se.lookahead,Se.lookahead=0,Se.match_length=Se.prev_length=Q-1,Se.match_available=0,te.next_in=Ie,te.input=Be,te.avail_in=$e,Se.wrap=ye,E},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,a,o){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,a,o){a.exports=function(l,u){var d,m,y,b,_,w,E,A,C,k,B,D,q,j,J,Y,L,Z,Q,oe,ae,U,I,x,T;d=l.state,m=l.next_in,x=l.input,y=m+(l.avail_in-5),b=l.next_out,T=l.output,_=b-(u-l.avail_out),w=b+(l.avail_out-257),E=d.dmax,A=d.wsize,C=d.whave,k=d.wnext,B=d.window,D=d.hold,q=d.bits,j=d.lencode,J=d.distcode,Y=(1<<d.lenbits)-1,L=(1<<d.distbits)-1;e:do{q<15&&(D+=x[m++]<<q,q+=8,D+=x[m++]<<q,q+=8),Z=j[D&Y];t:for(;;){if(D>>>=Q=Z>>>24,q-=Q,(Q=Z>>>16&255)===0)T[b++]=65535&Z;else{if(!(16&Q)){if(!(64&Q)){Z=j[(65535&Z)+(D&(1<<Q)-1)];continue t}if(32&Q){d.mode=12;break e}l.msg="invalid literal/length code",d.mode=30;break e}oe=65535&Z,(Q&=15)&&(q<Q&&(D+=x[m++]<<q,q+=8),oe+=D&(1<<Q)-1,D>>>=Q,q-=Q),q<15&&(D+=x[m++]<<q,q+=8,D+=x[m++]<<q,q+=8),Z=J[D&L];r:for(;;){if(D>>>=Q=Z>>>24,q-=Q,!(16&(Q=Z>>>16&255))){if(!(64&Q)){Z=J[(65535&Z)+(D&(1<<Q)-1)];continue r}l.msg="invalid distance code",d.mode=30;break e}if(ae=65535&Z,q<(Q&=15)&&(D+=x[m++]<<q,(q+=8)<Q&&(D+=x[m++]<<q,q+=8)),E<(ae+=D&(1<<Q)-1)){l.msg="invalid distance too far back",d.mode=30;break e}if(D>>>=Q,q-=Q,(Q=b-_)<ae){if(C<(Q=ae-Q)&&d.sane){l.msg="invalid distance too far back",d.mode=30;break e}if(I=B,(U=0)===k){if(U+=A-Q,Q<oe){for(oe-=Q;T[b++]=B[U++],--Q;);U=b-ae,I=T}}else if(k<Q){if(U+=A+k-Q,(Q-=k)<oe){for(oe-=Q;T[b++]=B[U++],--Q;);if(U=0,k<oe){for(oe-=Q=k;T[b++]=B[U++],--Q;);U=b-ae,I=T}}}else if(U+=k-Q,Q<oe){for(oe-=Q;T[b++]=B[U++],--Q;);U=b-ae,I=T}for(;2<oe;)T[b++]=I[U++],T[b++]=I[U++],T[b++]=I[U++],oe-=3;oe&&(T[b++]=I[U++],1<oe&&(T[b++]=I[U++]))}else{for(U=b-ae;T[b++]=T[U++],T[b++]=T[U++],T[b++]=T[U++],2<(oe-=3););oe&&(T[b++]=T[U++],1<oe&&(T[b++]=T[U++]))}break}}break}}while(m<y&&b<w);m-=oe=q>>3,D&=(1<<(q-=oe<<3))-1,l.next_in=m,l.next_out=b,l.avail_in=m<y?y-m+5:5-(m-y),l.avail_out=b<w?w-b+257:257-(b-w),d.hold=D,d.bits=q}},{}],49:[function(n,a,o){var l=n("../utils/common"),u=n("./adler32"),d=n("./crc32"),m=n("./inffast"),y=n("./inftrees"),b=1,_=2,w=0,E=-2,A=1,C=852,k=592;function B(U){return(U>>>24&255)+(U>>>8&65280)+((65280&U)<<8)+((255&U)<<24)}function D(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new l.Buf16(320),this.work=new l.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function q(U){var I;return U&&U.state?(I=U.state,U.total_in=U.total_out=I.total=0,U.msg="",I.wrap&&(U.adler=1&I.wrap),I.mode=A,I.last=0,I.havedict=0,I.dmax=32768,I.head=null,I.hold=0,I.bits=0,I.lencode=I.lendyn=new l.Buf32(C),I.distcode=I.distdyn=new l.Buf32(k),I.sane=1,I.back=-1,w):E}function j(U){var I;return U&&U.state?((I=U.state).wsize=0,I.whave=0,I.wnext=0,q(U)):E}function J(U,I){var x,T;return U&&U.state?(T=U.state,I<0?(x=0,I=-I):(x=1+(I>>4),I<48&&(I&=15)),I&&(I<8||15<I)?E:(T.window!==null&&T.wbits!==I&&(T.window=null),T.wrap=x,T.wbits=I,j(U))):E}function Y(U,I){var x,T;return U?(T=new D,(U.state=T).window=null,(x=J(U,I))!==w&&(U.state=null),x):E}var L,Z,Q=!0;function oe(U){if(Q){var I;for(L=new l.Buf32(512),Z=new l.Buf32(32),I=0;I<144;)U.lens[I++]=8;for(;I<256;)U.lens[I++]=9;for(;I<280;)U.lens[I++]=7;for(;I<288;)U.lens[I++]=8;for(y(b,U.lens,0,288,L,0,U.work,{bits:9}),I=0;I<32;)U.lens[I++]=5;y(_,U.lens,0,32,Z,0,U.work,{bits:5}),Q=!1}U.lencode=L,U.lenbits=9,U.distcode=Z,U.distbits=5}function ae(U,I,x,T){var M,O=U.state;return O.window===null&&(O.wsize=1<<O.wbits,O.wnext=0,O.whave=0,O.window=new l.Buf8(O.wsize)),T>=O.wsize?(l.arraySet(O.window,I,x-O.wsize,O.wsize,0),O.wnext=0,O.whave=O.wsize):(T<(M=O.wsize-O.wnext)&&(M=T),l.arraySet(O.window,I,x-T,M,O.wnext),(T-=M)?(l.arraySet(O.window,I,x-T,T,0),O.wnext=T,O.whave=O.wsize):(O.wnext+=M,O.wnext===O.wsize&&(O.wnext=0),O.whave<O.wsize&&(O.whave+=M))),0}o.inflateReset=j,o.inflateReset2=J,o.inflateResetKeep=q,o.inflateInit=function(U){return Y(U,15)},o.inflateInit2=Y,o.inflate=function(U,I){var x,T,M,O,z,X,H,P,S,F,ue,ee,fe,le,ce,pe,se,de,re,me,te,ve,Se,be,_e=0,ye=new l.Buf8(4),$e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!U||!U.state||!U.output||!U.input&&U.avail_in!==0)return E;(x=U.state).mode===12&&(x.mode=13),z=U.next_out,M=U.output,H=U.avail_out,O=U.next_in,T=U.input,X=U.avail_in,P=x.hold,S=x.bits,F=X,ue=H,ve=w;e:for(;;)switch(x.mode){case A:if(x.wrap===0){x.mode=13;break}for(;S<16;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if(2&x.wrap&&P===35615){ye[x.check=0]=255&P,ye[1]=P>>>8&255,x.check=d(x.check,ye,2,0),S=P=0,x.mode=2;break}if(x.flags=0,x.head&&(x.head.done=!1),!(1&x.wrap)||(((255&P)<<8)+(P>>8))%31){U.msg="incorrect header check",x.mode=30;break}if((15&P)!=8){U.msg="unknown compression method",x.mode=30;break}if(S-=4,te=8+(15&(P>>>=4)),x.wbits===0)x.wbits=te;else if(te>x.wbits){U.msg="invalid window size",x.mode=30;break}x.dmax=1<<te,U.adler=x.check=1,x.mode=512&P?10:12,S=P=0;break;case 2:for(;S<16;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if(x.flags=P,(255&x.flags)!=8){U.msg="unknown compression method",x.mode=30;break}if(57344&x.flags){U.msg="unknown header flags set",x.mode=30;break}x.head&&(x.head.text=P>>8&1),512&x.flags&&(ye[0]=255&P,ye[1]=P>>>8&255,x.check=d(x.check,ye,2,0)),S=P=0,x.mode=3;case 3:for(;S<32;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}x.head&&(x.head.time=P),512&x.flags&&(ye[0]=255&P,ye[1]=P>>>8&255,ye[2]=P>>>16&255,ye[3]=P>>>24&255,x.check=d(x.check,ye,4,0)),S=P=0,x.mode=4;case 4:for(;S<16;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}x.head&&(x.head.xflags=255&P,x.head.os=P>>8),512&x.flags&&(ye[0]=255&P,ye[1]=P>>>8&255,x.check=d(x.check,ye,2,0)),S=P=0,x.mode=5;case 5:if(1024&x.flags){for(;S<16;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}x.length=P,x.head&&(x.head.extra_len=P),512&x.flags&&(ye[0]=255&P,ye[1]=P>>>8&255,x.check=d(x.check,ye,2,0)),S=P=0}else x.head&&(x.head.extra=null);x.mode=6;case 6:if(1024&x.flags&&(X<(ee=x.length)&&(ee=X),ee&&(x.head&&(te=x.head.extra_len-x.length,x.head.extra||(x.head.extra=new Array(x.head.extra_len)),l.arraySet(x.head.extra,T,O,ee,te)),512&x.flags&&(x.check=d(x.check,T,ee,O)),X-=ee,O+=ee,x.length-=ee),x.length))break e;x.length=0,x.mode=7;case 7:if(2048&x.flags){if(X===0)break e;for(ee=0;te=T[O+ee++],x.head&&te&&x.length<65536&&(x.head.name+=String.fromCharCode(te)),te&&ee<X;);if(512&x.flags&&(x.check=d(x.check,T,ee,O)),X-=ee,O+=ee,te)break e}else x.head&&(x.head.name=null);x.length=0,x.mode=8;case 8:if(4096&x.flags){if(X===0)break e;for(ee=0;te=T[O+ee++],x.head&&te&&x.length<65536&&(x.head.comment+=String.fromCharCode(te)),te&&ee<X;);if(512&x.flags&&(x.check=d(x.check,T,ee,O)),X-=ee,O+=ee,te)break e}else x.head&&(x.head.comment=null);x.mode=9;case 9:if(512&x.flags){for(;S<16;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if(P!==(65535&x.check)){U.msg="header crc mismatch",x.mode=30;break}S=P=0}x.head&&(x.head.hcrc=x.flags>>9&1,x.head.done=!0),U.adler=x.check=0,x.mode=12;break;case 10:for(;S<32;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}U.adler=x.check=B(P),S=P=0,x.mode=11;case 11:if(x.havedict===0)return U.next_out=z,U.avail_out=H,U.next_in=O,U.avail_in=X,x.hold=P,x.bits=S,2;U.adler=x.check=1,x.mode=12;case 12:if(I===5||I===6)break e;case 13:if(x.last){P>>>=7&S,S-=7&S,x.mode=27;break}for(;S<3;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}switch(x.last=1&P,S-=1,3&(P>>>=1)){case 0:x.mode=14;break;case 1:if(oe(x),x.mode=20,I!==6)break;P>>>=2,S-=2;break e;case 2:x.mode=17;break;case 3:U.msg="invalid block type",x.mode=30}P>>>=2,S-=2;break;case 14:for(P>>>=7&S,S-=7&S;S<32;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if((65535&P)!=(P>>>16^65535)){U.msg="invalid stored block lengths",x.mode=30;break}if(x.length=65535&P,S=P=0,x.mode=15,I===6)break e;case 15:x.mode=16;case 16:if(ee=x.length){if(X<ee&&(ee=X),H<ee&&(ee=H),ee===0)break e;l.arraySet(M,T,O,ee,z),X-=ee,O+=ee,H-=ee,z+=ee,x.length-=ee;break}x.mode=12;break;case 17:for(;S<14;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if(x.nlen=257+(31&P),P>>>=5,S-=5,x.ndist=1+(31&P),P>>>=5,S-=5,x.ncode=4+(15&P),P>>>=4,S-=4,286<x.nlen||30<x.ndist){U.msg="too many length or distance symbols",x.mode=30;break}x.have=0,x.mode=18;case 18:for(;x.have<x.ncode;){for(;S<3;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}x.lens[$e[x.have++]]=7&P,P>>>=3,S-=3}for(;x.have<19;)x.lens[$e[x.have++]]=0;if(x.lencode=x.lendyn,x.lenbits=7,Se={bits:x.lenbits},ve=y(0,x.lens,0,19,x.lencode,0,x.work,Se),x.lenbits=Se.bits,ve){U.msg="invalid code lengths set",x.mode=30;break}x.have=0,x.mode=19;case 19:for(;x.have<x.nlen+x.ndist;){for(;pe=(_e=x.lencode[P&(1<<x.lenbits)-1])>>>16&255,se=65535&_e,!((ce=_e>>>24)<=S);){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if(se<16)P>>>=ce,S-=ce,x.lens[x.have++]=se;else{if(se===16){for(be=ce+2;S<be;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if(P>>>=ce,S-=ce,x.have===0){U.msg="invalid bit length repeat",x.mode=30;break}te=x.lens[x.have-1],ee=3+(3&P),P>>>=2,S-=2}else if(se===17){for(be=ce+3;S<be;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}S-=ce,te=0,ee=3+(7&(P>>>=ce)),P>>>=3,S-=3}else{for(be=ce+7;S<be;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}S-=ce,te=0,ee=11+(127&(P>>>=ce)),P>>>=7,S-=7}if(x.have+ee>x.nlen+x.ndist){U.msg="invalid bit length repeat",x.mode=30;break}for(;ee--;)x.lens[x.have++]=te}}if(x.mode===30)break;if(x.lens[256]===0){U.msg="invalid code -- missing end-of-block",x.mode=30;break}if(x.lenbits=9,Se={bits:x.lenbits},ve=y(b,x.lens,0,x.nlen,x.lencode,0,x.work,Se),x.lenbits=Se.bits,ve){U.msg="invalid literal/lengths set",x.mode=30;break}if(x.distbits=6,x.distcode=x.distdyn,Se={bits:x.distbits},ve=y(_,x.lens,x.nlen,x.ndist,x.distcode,0,x.work,Se),x.distbits=Se.bits,ve){U.msg="invalid distances set",x.mode=30;break}if(x.mode=20,I===6)break e;case 20:x.mode=21;case 21:if(6<=X&&258<=H){U.next_out=z,U.avail_out=H,U.next_in=O,U.avail_in=X,x.hold=P,x.bits=S,m(U,ue),z=U.next_out,M=U.output,H=U.avail_out,O=U.next_in,T=U.input,X=U.avail_in,P=x.hold,S=x.bits,x.mode===12&&(x.back=-1);break}for(x.back=0;pe=(_e=x.lencode[P&(1<<x.lenbits)-1])>>>16&255,se=65535&_e,!((ce=_e>>>24)<=S);){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if(pe&&!(240&pe)){for(de=ce,re=pe,me=se;pe=(_e=x.lencode[me+((P&(1<<de+re)-1)>>de)])>>>16&255,se=65535&_e,!(de+(ce=_e>>>24)<=S);){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}P>>>=de,S-=de,x.back+=de}if(P>>>=ce,S-=ce,x.back+=ce,x.length=se,pe===0){x.mode=26;break}if(32&pe){x.back=-1,x.mode=12;break}if(64&pe){U.msg="invalid literal/length code",x.mode=30;break}x.extra=15&pe,x.mode=22;case 22:if(x.extra){for(be=x.extra;S<be;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}x.length+=P&(1<<x.extra)-1,P>>>=x.extra,S-=x.extra,x.back+=x.extra}x.was=x.length,x.mode=23;case 23:for(;pe=(_e=x.distcode[P&(1<<x.distbits)-1])>>>16&255,se=65535&_e,!((ce=_e>>>24)<=S);){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if(!(240&pe)){for(de=ce,re=pe,me=se;pe=(_e=x.distcode[me+((P&(1<<de+re)-1)>>de)])>>>16&255,se=65535&_e,!(de+(ce=_e>>>24)<=S);){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}P>>>=de,S-=de,x.back+=de}if(P>>>=ce,S-=ce,x.back+=ce,64&pe){U.msg="invalid distance code",x.mode=30;break}x.offset=se,x.extra=15&pe,x.mode=24;case 24:if(x.extra){for(be=x.extra;S<be;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}x.offset+=P&(1<<x.extra)-1,P>>>=x.extra,S-=x.extra,x.back+=x.extra}if(x.offset>x.dmax){U.msg="invalid distance too far back",x.mode=30;break}x.mode=25;case 25:if(H===0)break e;if(ee=ue-H,x.offset>ee){if((ee=x.offset-ee)>x.whave&&x.sane){U.msg="invalid distance too far back",x.mode=30;break}fe=ee>x.wnext?(ee-=x.wnext,x.wsize-ee):x.wnext-ee,ee>x.length&&(ee=x.length),le=x.window}else le=M,fe=z-x.offset,ee=x.length;for(H<ee&&(ee=H),H-=ee,x.length-=ee;M[z++]=le[fe++],--ee;);x.length===0&&(x.mode=21);break;case 26:if(H===0)break e;M[z++]=x.length,H--,x.mode=21;break;case 27:if(x.wrap){for(;S<32;){if(X===0)break e;X--,P|=T[O++]<<S,S+=8}if(ue-=H,U.total_out+=ue,x.total+=ue,ue&&(U.adler=x.check=x.flags?d(x.check,M,ue,z-ue):u(x.check,M,ue,z-ue)),ue=H,(x.flags?P:B(P))!==x.check){U.msg="incorrect data check",x.mode=30;break}S=P=0}x.mode=28;case 28:if(x.wrap&&x.flags){for(;S<32;){if(X===0)break e;X--,P+=T[O++]<<S,S+=8}if(P!==(4294967295&x.total)){U.msg="incorrect length check",x.mode=30;break}S=P=0}x.mode=29;case 29:ve=1;break e;case 30:ve=-3;break e;case 31:return-4;case 32:default:return E}return U.next_out=z,U.avail_out=H,U.next_in=O,U.avail_in=X,x.hold=P,x.bits=S,(x.wsize||ue!==U.avail_out&&x.mode<30&&(x.mode<27||I!==4))&&ae(U,U.output,U.next_out,ue-U.avail_out)?(x.mode=31,-4):(F-=U.avail_in,ue-=U.avail_out,U.total_in+=F,U.total_out+=ue,x.total+=ue,x.wrap&&ue&&(U.adler=x.check=x.flags?d(x.check,M,ue,U.next_out-ue):u(x.check,M,ue,U.next_out-ue)),U.data_type=x.bits+(x.last?64:0)+(x.mode===12?128:0)+(x.mode===20||x.mode===15?256:0),(F==0&&ue===0||I===4)&&ve===w&&(ve=-5),ve)},o.inflateEnd=function(U){if(!U||!U.state)return E;var I=U.state;return I.window&&(I.window=null),U.state=null,w},o.inflateGetHeader=function(U,I){var x;return U&&U.state&&2&(x=U.state).wrap?((x.head=I).done=!1,w):E},o.inflateSetDictionary=function(U,I){var x,T=I.length;return U&&U.state?(x=U.state).wrap!==0&&x.mode!==11?E:x.mode===11&&u(1,I,T,0)!==x.check?-3:ae(U,I,T,T)?(x.mode=31,-4):(x.havedict=1,w):E},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,a,o){var l=n("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(b,_,w,E,A,C,k,B){var D,q,j,J,Y,L,Z,Q,oe,ae=B.bits,U=0,I=0,x=0,T=0,M=0,O=0,z=0,X=0,H=0,P=0,S=null,F=0,ue=new l.Buf16(16),ee=new l.Buf16(16),fe=null,le=0;for(U=0;U<=15;U++)ue[U]=0;for(I=0;I<E;I++)ue[_[w+I]]++;for(M=ae,T=15;1<=T&&ue[T]===0;T--);if(T<M&&(M=T),T===0)return A[C++]=20971520,A[C++]=20971520,B.bits=1,0;for(x=1;x<T&&ue[x]===0;x++);for(M<x&&(M=x),U=X=1;U<=15;U++)if(X<<=1,(X-=ue[U])<0)return-1;if(0<X&&(b===0||T!==1))return-1;for(ee[1]=0,U=1;U<15;U++)ee[U+1]=ee[U]+ue[U];for(I=0;I<E;I++)_[w+I]!==0&&(k[ee[_[w+I]]++]=I);if(L=b===0?(S=fe=k,19):b===1?(S=u,F-=257,fe=d,le-=257,256):(S=m,fe=y,-1),U=x,Y=C,z=I=P=0,j=-1,J=(H=1<<(O=M))-1,b===1&&852<H||b===2&&592<H)return 1;for(;;){for(Z=U-z,oe=k[I]<L?(Q=0,k[I]):k[I]>L?(Q=fe[le+k[I]],S[F+k[I]]):(Q=96,0),D=1<<U-z,x=q=1<<O;A[Y+(P>>z)+(q-=D)]=Z<<24|Q<<16|oe|0,q!==0;);for(D=1<<U-1;P&D;)D>>=1;if(D!==0?(P&=D-1,P+=D):P=0,I++,--ue[U]==0){if(U===T)break;U=_[w+k[I]]}if(M<U&&(P&J)!==j){for(z===0&&(z=M),Y+=x,X=1<<(O=U-z);O+z<T&&!((X-=ue[O+z])<=0);)O++,X<<=1;if(H+=1<<O,b===1&&852<H||b===2&&592<H)return 1;A[j=P&J]=M<<24|O<<16|Y-C|0}}return P!==0&&(A[Y+P]=U-z<<24|64<<16|0),B.bits=M,0}},{"../utils/common":41}],51:[function(n,a,o){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,a,o){var l=n("../utils/common"),u=0,d=1;function m(_e){for(var ye=_e.length;0<=--ye;)_e[ye]=0}var y=0,b=29,_=256,w=_+1+b,E=30,A=19,C=2*w+1,k=15,B=16,D=7,q=256,j=16,J=17,Y=18,L=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Z=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=new Array(2*(w+2));m(ae);var U=new Array(2*E);m(U);var I=new Array(512);m(I);var x=new Array(256);m(x);var T=new Array(b);m(T);var M,O,z,X=new Array(E);function H(_e,ye,$e,Ie,Be){this.static_tree=_e,this.extra_bits=ye,this.extra_base=$e,this.elems=Ie,this.max_length=Be,this.has_stree=_e&&_e.length}function P(_e,ye){this.dyn_tree=_e,this.max_code=0,this.stat_desc=ye}function S(_e){return _e<256?I[_e]:I[256+(_e>>>7)]}function F(_e,ye){_e.pending_buf[_e.pending++]=255&ye,_e.pending_buf[_e.pending++]=ye>>>8&255}function ue(_e,ye,$e){_e.bi_valid>B-$e?(_e.bi_buf|=ye<<_e.bi_valid&65535,F(_e,_e.bi_buf),_e.bi_buf=ye>>B-_e.bi_valid,_e.bi_valid+=$e-B):(_e.bi_buf|=ye<<_e.bi_valid&65535,_e.bi_valid+=$e)}function ee(_e,ye,$e){ue(_e,$e[2*ye],$e[2*ye+1])}function fe(_e,ye){for(var $e=0;$e|=1&_e,_e>>>=1,$e<<=1,0<--ye;);return $e>>>1}function le(_e,ye,$e){var Ie,Be,Me=new Array(k+1),Fe=0;for(Ie=1;Ie<=k;Ie++)Me[Ie]=Fe=Fe+$e[Ie-1]<<1;for(Be=0;Be<=ye;Be++){var Ve=_e[2*Be+1];Ve!==0&&(_e[2*Be]=fe(Me[Ve]++,Ve))}}function ce(_e){var ye;for(ye=0;ye<w;ye++)_e.dyn_ltree[2*ye]=0;for(ye=0;ye<E;ye++)_e.dyn_dtree[2*ye]=0;for(ye=0;ye<A;ye++)_e.bl_tree[2*ye]=0;_e.dyn_ltree[2*q]=1,_e.opt_len=_e.static_len=0,_e.last_lit=_e.matches=0}function pe(_e){8<_e.bi_valid?F(_e,_e.bi_buf):0<_e.bi_valid&&(_e.pending_buf[_e.pending++]=_e.bi_buf),_e.bi_buf=0,_e.bi_valid=0}function se(_e,ye,$e,Ie){var Be=2*ye,Me=2*$e;return _e[Be]<_e[Me]||_e[Be]===_e[Me]&&Ie[ye]<=Ie[$e]}function de(_e,ye,$e){for(var Ie=_e.heap[$e],Be=$e<<1;Be<=_e.heap_len&&(Be<_e.heap_len&&se(ye,_e.heap[Be+1],_e.heap[Be],_e.depth)&&Be++,!se(ye,Ie,_e.heap[Be],_e.depth));)_e.heap[$e]=_e.heap[Be],$e=Be,Be<<=1;_e.heap[$e]=Ie}function re(_e,ye,$e){var Ie,Be,Me,Fe,Ve=0;if(_e.last_lit!==0)for(;Ie=_e.pending_buf[_e.d_buf+2*Ve]<<8|_e.pending_buf[_e.d_buf+2*Ve+1],Be=_e.pending_buf[_e.l_buf+Ve],Ve++,Ie===0?ee(_e,Be,ye):(ee(_e,(Me=x[Be])+_+1,ye),(Fe=L[Me])!==0&&ue(_e,Be-=T[Me],Fe),ee(_e,Me=S(--Ie),$e),(Fe=Z[Me])!==0&&ue(_e,Ie-=X[Me],Fe)),Ve<_e.last_lit;);ee(_e,q,ye)}function me(_e,ye){var $e,Ie,Be,Me=ye.dyn_tree,Fe=ye.stat_desc.static_tree,Ve=ye.stat_desc.has_stree,Oe=ye.stat_desc.elems,ge=-1;for(_e.heap_len=0,_e.heap_max=C,$e=0;$e<Oe;$e++)Me[2*$e]!==0?(_e.heap[++_e.heap_len]=ge=$e,_e.depth[$e]=0):Me[2*$e+1]=0;for(;_e.heap_len<2;)Me[2*(Be=_e.heap[++_e.heap_len]=ge<2?++ge:0)]=1,_e.depth[Be]=0,_e.opt_len--,Ve&&(_e.static_len-=Fe[2*Be+1]);for(ye.max_code=ge,$e=_e.heap_len>>1;1<=$e;$e--)de(_e,Me,$e);for(Be=Oe;$e=_e.heap[1],_e.heap[1]=_e.heap[_e.heap_len--],de(_e,Me,1),Ie=_e.heap[1],_e.heap[--_e.heap_max]=$e,_e.heap[--_e.heap_max]=Ie,Me[2*Be]=Me[2*$e]+Me[2*Ie],_e.depth[Be]=(_e.depth[$e]>=_e.depth[Ie]?_e.depth[$e]:_e.depth[Ie])+1,Me[2*$e+1]=Me[2*Ie+1]=Be,_e.heap[1]=Be++,de(_e,Me,1),2<=_e.heap_len;);_e.heap[--_e.heap_max]=_e.heap[1],function(ie,he){var we,Re,De,Le,tt,We,Ge=he.dyn_tree,_t=he.max_code,rt=he.stat_desc.static_tree,ot=he.stat_desc.has_stree,Rt=he.stat_desc.extra_bits,xt=he.stat_desc.extra_base,ht=he.stat_desc.max_length,Tt=0;for(Le=0;Le<=k;Le++)ie.bl_count[Le]=0;for(Ge[2*ie.heap[ie.heap_max]+1]=0,we=ie.heap_max+1;we<C;we++)ht<(Le=Ge[2*Ge[2*(Re=ie.heap[we])+1]+1]+1)&&(Le=ht,Tt++),Ge[2*Re+1]=Le,_t<Re||(ie.bl_count[Le]++,tt=0,xt<=Re&&(tt=Rt[Re-xt]),We=Ge[2*Re],ie.opt_len+=We*(Le+tt),ot&&(ie.static_len+=We*(rt[2*Re+1]+tt)));if(Tt!==0){do{for(Le=ht-1;ie.bl_count[Le]===0;)Le--;ie.bl_count[Le]--,ie.bl_count[Le+1]+=2,ie.bl_count[ht]--,Tt-=2}while(0<Tt);for(Le=ht;Le!==0;Le--)for(Re=ie.bl_count[Le];Re!==0;)_t<(De=ie.heap[--we])||(Ge[2*De+1]!==Le&&(ie.opt_len+=(Le-Ge[2*De+1])*Ge[2*De],Ge[2*De+1]=Le),Re--)}}(_e,ye),le(Me,ge,_e.bl_count)}function te(_e,ye,$e){var Ie,Be,Me=-1,Fe=ye[1],Ve=0,Oe=7,ge=4;for(Fe===0&&(Oe=138,ge=3),ye[2*($e+1)+1]=65535,Ie=0;Ie<=$e;Ie++)Be=Fe,Fe=ye[2*(Ie+1)+1],++Ve<Oe&&Be===Fe||(Ve<ge?_e.bl_tree[2*Be]+=Ve:Be!==0?(Be!==Me&&_e.bl_tree[2*Be]++,_e.bl_tree[2*j]++):Ve<=10?_e.bl_tree[2*J]++:_e.bl_tree[2*Y]++,Me=Be,ge=(Ve=0)===Fe?(Oe=138,3):Be===Fe?(Oe=6,3):(Oe=7,4))}function ve(_e,ye,$e){var Ie,Be,Me=-1,Fe=ye[1],Ve=0,Oe=7,ge=4;for(Fe===0&&(Oe=138,ge=3),Ie=0;Ie<=$e;Ie++)if(Be=Fe,Fe=ye[2*(Ie+1)+1],!(++Ve<Oe&&Be===Fe)){if(Ve<ge)for(;ee(_e,Be,_e.bl_tree),--Ve!=0;);else Be!==0?(Be!==Me&&(ee(_e,Be,_e.bl_tree),Ve--),ee(_e,j,_e.bl_tree),ue(_e,Ve-3,2)):Ve<=10?(ee(_e,J,_e.bl_tree),ue(_e,Ve-3,3)):(ee(_e,Y,_e.bl_tree),ue(_e,Ve-11,7));Me=Be,ge=(Ve=0)===Fe?(Oe=138,3):Be===Fe?(Oe=6,3):(Oe=7,4)}}m(X);var Se=!1;function be(_e,ye,$e,Ie){ue(_e,(y<<1)+(Ie?1:0),3),function(Be,Me,Fe,Ve){pe(Be),Ve&&(F(Be,Fe),F(Be,~Fe)),l.arraySet(Be.pending_buf,Be.window,Me,Fe,Be.pending),Be.pending+=Fe}(_e,ye,$e,!0)}o._tr_init=function(_e){Se||(function(){var ye,$e,Ie,Be,Me,Fe=new Array(k+1);for(Be=Ie=0;Be<b-1;Be++)for(T[Be]=Ie,ye=0;ye<1<<L[Be];ye++)x[Ie++]=Be;for(x[Ie-1]=Be,Be=Me=0;Be<16;Be++)for(X[Be]=Me,ye=0;ye<1<<Z[Be];ye++)I[Me++]=Be;for(Me>>=7;Be<E;Be++)for(X[Be]=Me<<7,ye=0;ye<1<<Z[Be]-7;ye++)I[256+Me++]=Be;for($e=0;$e<=k;$e++)Fe[$e]=0;for(ye=0;ye<=143;)ae[2*ye+1]=8,ye++,Fe[8]++;for(;ye<=255;)ae[2*ye+1]=9,ye++,Fe[9]++;for(;ye<=279;)ae[2*ye+1]=7,ye++,Fe[7]++;for(;ye<=287;)ae[2*ye+1]=8,ye++,Fe[8]++;for(le(ae,w+1,Fe),ye=0;ye<E;ye++)U[2*ye+1]=5,U[2*ye]=fe(ye,5);M=new H(ae,L,_+1,w,k),O=new H(U,Z,0,E,k),z=new H(new Array(0),Q,0,A,D)}(),Se=!0),_e.l_desc=new P(_e.dyn_ltree,M),_e.d_desc=new P(_e.dyn_dtree,O),_e.bl_desc=new P(_e.bl_tree,z),_e.bi_buf=0,_e.bi_valid=0,ce(_e)},o._tr_stored_block=be,o._tr_flush_block=function(_e,ye,$e,Ie){var Be,Me,Fe=0;0<_e.level?(_e.strm.data_type===2&&(_e.strm.data_type=function(Ve){var Oe,ge=4093624447;for(Oe=0;Oe<=31;Oe++,ge>>>=1)if(1&ge&&Ve.dyn_ltree[2*Oe]!==0)return u;if(Ve.dyn_ltree[18]!==0||Ve.dyn_ltree[20]!==0||Ve.dyn_ltree[26]!==0)return d;for(Oe=32;Oe<_;Oe++)if(Ve.dyn_ltree[2*Oe]!==0)return d;return u}(_e)),me(_e,_e.l_desc),me(_e,_e.d_desc),Fe=function(Ve){var Oe;for(te(Ve,Ve.dyn_ltree,Ve.l_desc.max_code),te(Ve,Ve.dyn_dtree,Ve.d_desc.max_code),me(Ve,Ve.bl_desc),Oe=A-1;3<=Oe&&Ve.bl_tree[2*oe[Oe]+1]===0;Oe--);return Ve.opt_len+=3*(Oe+1)+5+5+4,Oe}(_e),Be=_e.opt_len+3+7>>>3,(Me=_e.static_len+3+7>>>3)<=Be&&(Be=Me)):Be=Me=$e+5,$e+4<=Be&&ye!==-1?be(_e,ye,$e,Ie):_e.strategy===4||Me===Be?(ue(_e,2+(Ie?1:0),3),re(_e,ae,U)):(ue(_e,4+(Ie?1:0),3),function(Ve,Oe,ge,ie){var he;for(ue(Ve,Oe-257,5),ue(Ve,ge-1,5),ue(Ve,ie-4,4),he=0;he<ie;he++)ue(Ve,Ve.bl_tree[2*oe[he]+1],3);ve(Ve,Ve.dyn_ltree,Oe-1),ve(Ve,Ve.dyn_dtree,ge-1)}(_e,_e.l_desc.max_code+1,_e.d_desc.max_code+1,Fe+1),re(_e,_e.dyn_ltree,_e.dyn_dtree)),ce(_e),Ie&&pe(_e)},o._tr_tally=function(_e,ye,$e){return _e.pending_buf[_e.d_buf+2*_e.last_lit]=ye>>>8&255,_e.pending_buf[_e.d_buf+2*_e.last_lit+1]=255&ye,_e.pending_buf[_e.l_buf+_e.last_lit]=255&$e,_e.last_lit++,ye===0?_e.dyn_ltree[2*$e]++:(_e.matches++,ye--,_e.dyn_ltree[2*(x[$e]+_+1)]++,_e.dyn_dtree[2*S(ye)]++),_e.last_lit===_e.lit_bufsize-1},o._tr_align=function(_e){ue(_e,2,3),ee(_e,q,ae),function(ye){ye.bi_valid===16?(F(ye,ye.bi_buf),ye.bi_buf=0,ye.bi_valid=0):8<=ye.bi_valid&&(ye.pending_buf[ye.pending++]=255&ye.bi_buf,ye.bi_buf>>=8,ye.bi_valid-=8)}(_e)}},{"../utils/common":41}],53:[function(n,a,o){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,a,o){(function(l){(function(u,d){if(!u.setImmediate){var m,y,b,_,w=1,E={},A=!1,C=u.document,k=Object.getPrototypeOf&&Object.getPrototypeOf(u);k=k&&k.setTimeout?k:u,m={}.toString.call(u.process)==="[object process]"?function(j){browser$1$1.nextTick(function(){D(j)})}:function(){if(u.postMessage&&!u.importScripts){var j=!0,J=u.onmessage;return u.onmessage=function(){j=!1},u.postMessage("","*"),u.onmessage=J,j}}()?(_="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",q,!1):u.attachEvent("onmessage",q),function(j){u.postMessage(_+j,"*")}):u.MessageChannel?((b=new MessageChannel).port1.onmessage=function(j){D(j.data)},function(j){b.port2.postMessage(j)}):C&&"onreadystatechange"in C.createElement("script")?(y=C.documentElement,function(j){var J=C.createElement("script");J.onreadystatechange=function(){D(j),J.onreadystatechange=null,y.removeChild(J),J=null},y.appendChild(J)}):function(j){setTimeout(D,0,j)},k.setImmediate=function(j){typeof j!="function"&&(j=new Function(""+j));for(var J=new Array(arguments.length-1),Y=0;Y<J.length;Y++)J[Y]=arguments[Y+1];var L={callback:j,args:J};return E[w]=L,m(w),w++},k.clearImmediate=B}function B(j){delete E[j]}function D(j){if(A)setTimeout(D,0,j);else{var J=E[j];if(J){A=!0;try{(function(Y){var L=Y.callback,Z=Y.args;switch(Z.length){case 0:L();break;case 1:L(Z[0]);break;case 2:L(Z[0],Z[1]);break;case 3:L(Z[0],Z[1],Z[2]);break;default:L.apply(d,Z)}})(J)}finally{B(j),A=!1}}}}function q(j){j.source===u&&typeof j.data=="string"&&j.data.indexOf(_)===0&&D(+j.data.slice(_.length))}})(typeof self>"u"?l===void 0?this:l:self)}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(jszip_min);const JSZip=jszip_minExports;var FileSaver_minExports={},FileSaver_min={get exports(){return FileSaver_minExports},set exports(t){FileSaver_minExports=t}};(function(t,e){(function(n,a){a()})(commonjsGlobal,function(){function n(y,b){return typeof b>"u"?b={autoBom:!1}:typeof b!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function a(y,b,_){var w=new XMLHttpRequest;w.open("GET",y),w.responseType="blob",w.onload=function(){m(w.response,b,_)},w.onerror=function(){console.error("could not download file")},w.send()}function o(y){var b=new XMLHttpRequest;b.open("HEAD",y,!1);try{b.send()}catch{}return 200<=b.status&&299>=b.status}function l(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(b)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,d=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),m=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!d?function(y,b,_){var w=u.URL||u.webkitURL,E=document.createElement("a");b=b||y.name||"download",E.download=b,E.rel="noopener",typeof y=="string"?(E.href=y,E.origin===location.origin?l(E):o(E.href)?a(y,b,_):l(E,E.target="_blank")):(E.href=w.createObjectURL(y),setTimeout(function(){w.revokeObjectURL(E.href)},4e4),setTimeout(function(){l(E)},0))}:"msSaveOrOpenBlob"in navigator?function(y,b,_){if(b=b||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(n(y,_),b);else if(o(y))a(y,b,_);else{var w=document.createElement("a");w.href=y,w.target="_blank",setTimeout(function(){l(w)})}}:function(y,b,_,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof y=="string")return a(y,b,_);var E=y.type==="application/octet-stream",A=/constructor/i.test(u.HTMLElement)||u.safari,C=/CriOS\/[\d]+/.test(navigator.userAgent);if((C||E&&A||d)&&typeof FileReader<"u"){var k=new FileReader;k.onloadend=function(){var q=k.result;q=C?q:q.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=q:location=q,w=null},k.readAsDataURL(y)}else{var B=u.URL||u.webkitURL,D=B.createObjectURL(y);w?w.location=D:location.href=D,w=null,setTimeout(function(){B.revokeObjectURL(D)},4e4)}});u.saveAs=m.saveAs=m,t.exports=m})})(FileSaver_min);const saveAs$1=FileSaver_minExports;function traduire(t,e){const n=e.find(o=>t[o]!==void 0);return n?t[n]:void 0}async function zipper(t,e,n){n.endsWith(".zip")||(n=`${n}.zip`);const a=new JSZip;for(const l of t)a.file(l.nom,l.octets);const o=a.folder("sfip");for(const l of e)o.file(l.nom,l.octets);if(typeof window>"u"){const l=await a.generateAsync({type:"arraybuffer"});net.mkdirSync(path.dirname(n),{recursive:!0}),await net.promises.writeFile(n,Buffer$y.from(l),"binary")}else{const l=await a.generateAsync({type:"blob"});saveAs$1(l,n)}}function cidValide(t){if(typeof t=="string")try{return CID$1.parse(t),!0}catch{return!1}return!1}async function toBuffer$1(t,e){let n=new Uint8Array(0);for await(const a of t)if(n=concat$2([n,a],n.length+a.length),e!==void 0&&n.length>e)return null;return n}function adresseOrbiteValide(t){return typeof t=="string"&&t.startsWith("/orbitdb/")&&OrbitDB.isValidAddress(t)}class ÉmetteurUneFois extends eventsExports.EventEmitter{constructor(n,a){super();ut(this,"doitExister");ut(this,"résultatPrêt");ut(this,"fOublier");ut(this,"résultat");ut(this,"f");this.doitExister=a,this.résultatPrêt=!1,this.f=n,this.initialiser()}async initialiser(){const n=async a=>{(!this.doitExister||a)&&(this.résultat=a,this.résultatPrêt=!0,this.fOublier&&this.lorsquePrêt())};this.fOublier=await this.f(n),this.lorsquePrêt()}lorsquePrêt(){if(this.résultatPrêt){if(!this.fOublier)throw new Error("Fuite !!");this.fOublier&&this.fOublier(),this.emit("fini",this.résultat)}}}const uneFois=async function(t,e=!1){const n=new ÉmetteurUneFois(t,e);return(await once_1(n,"fini"))[0]},faisRien=async()=>{};var TYPES_STATUT;(function(t){t.INTERNE="interne",t.BÊTA="bêta",t.ACTIVE="active",t.OBSOLÈTE="obsolète"})(TYPES_STATUT||(TYPES_STATUT={}));class Épingles{constructor({client:e}){ut(this,"client");ut(this,"requètes");ut(this,"fsOublier");this.client=e,this.requètes=[],this.fsOublier={}}async épinglerBd({id:e,récursif:n=!0,fichiers:a=!0}){await this.directementÉpinglée({id:e})||await this._épingler({id:e,récursif:n,fichiers:a})}async désépinglerBd({id:e}){await Promise.all(this.requètes.filter(a=>a.id===e).map(async a=>await a.fOublier()));const n=this.requètes.filter(a=>a.parent===e);this.requètes=this.requètes.filter(a=>a.id!==e),this.requètes=this.requètes.filter(a=>a.parent!==e),await Promise.all(n.map(async a=>{this.requètes.filter(o=>o.id===a.id&&o.parent!==e).length||await this.désépinglerBd({id:a.id})}))}async épinglée({id:e}){return this.requètes.some(n=>n.id===e)}async épingléeParParent({id:e,parent:n}){return this.requètes.some(a=>a.id===e&&a.parent===n)}async directementÉpinglée({id:e}){return await this.épingléeParParent({id:e})}async épingles(){return new Set(this.requètes.map(e=>e.id))}async _épingler({id:e,récursif:n,fichiers:a,parent:o}){if(await this.épingléeParParent({id:e,parent:o}))return;const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:e});if(this.requètes.push({id:e,parent:o,fOublier:u}),n){const d=async m=>{let y=[];typeof m=="object"?(y=Object.values(m).filter(_=>typeof _=="string"),y.push(...Object.keys(m).filter(_=>typeof _=="string"))):Array.isArray(m)?y=m:typeof m=="string"&&(y=[m]);const b=y.filter(_=>adresseOrbiteValide(_));a&&y.filter(w=>cidValide(w)&&!b.includes(w)).forEach(w=>{this.client.sfip.pin.add(w);const E=async()=>{try{await this.client.sfip.pin.rm(w)}catch{}};this.requètes.push({id:w,parent:e,fOublier:E})}),await Promise.all(b.map(async _=>await this._épingler({id:_,récursif:n,fichiers:a,parent:e})))};if(l.type==="keyvalue"){const m=await this.client.suivreBdDic({id:e,f:d});this.fsOublier[e]=m}else if(l.type==="feed"){const m=await this.client.suivreBdListe({id:e,f:d});this.fsOublier[e]=m}}}async toutDésépingler(){const e=await this.épingles();await Promise.all([...e].map(async n=>{await this.désépinglerBd({id:n})}))}async fermer(){await Promise.all(Object.values(this.fsOublier).map(e=>e()))}}class CacheSuivi{constructor(){ut(this,"verrou");ut(this,"_cacheSuivi");ut(this,"_cacheRecherche");this.verrou=new src$4,this._cacheSuivi={},this._cacheRecherche={}}async suivre({adresseFonction:e,idClient:n,fOriginale:a,args:o,ceciOriginal:l}){const u=Object.entries(o).find(w=>typeof w[1]=="function")?.[0],d=o[u],m=Object.fromEntries(Object.entries(o).filter(w=>typeof w[1]!="function"));if(Object.keys(o).length!==Object.keys(m).length+1)throw new Error("Plus d'un argument pour "+e+" est une fonction : "+JSON.stringify(o));const y=this.générerCodeCache({adresseFonction:e,idClient:n,argsClefs:m}),b=v4();if(await this.verrou.acquire(y),this._cacheSuivi[y])this._cacheSuivi[y].requètes[b]=d,Object.keys(this._cacheSuivi[y]).includes("val")&&await d(this._cacheSuivi[y].val);else{this._cacheSuivi[y]={requètes:{[b]:d}};const w=async C=>{if(!this._cacheSuivi[y])return;this._cacheSuivi[y].val=C;const k=Object.values(this._cacheSuivi[y].requètes);await Promise.all(k.map(B=>B(C)))},E={...m,[u]:w},A=await a.apply(l,[E]);this._cacheSuivi[y].fOublier=A}const _=async()=>{await this.oublierSuivi({codeCache:y,idRequète:b})};return this.verrou.release(y),_}async suivreRecherche({adresseFonction:e,nomArgTaille:n,idClient:a,fOriginale:o,args:l,ceciOriginal:u,par:d}){const m=Object.entries(l).find(D=>typeof D[1]=="function")?.[0],y=l[m],b=Object.fromEntries(Object.entries(l).filter(D=>typeof D[1]!="function"));if(Object.keys(l).length!==Object.keys(b).length+1)throw new Error("Plus d'un argument pour "+e+" est une fonction : "+JSON.stringify(l));const _=Object.fromEntries(Object.entries(l).filter(D=>D[0]!==n)),w=l[n];if(w===void 0)throw new Error(`Aucun argument de nom ${n} n'a été passé à la fonction ${e}.`);if(typeof w!="number")throw new Error(`Argument ${n} n'est pas un nombre dans la fonction ${e}.`);const E=this.générerCodeCache({adresseFonction:e,idClient:a,argsClefs:_}),A=v4();await this.verrou.acquire(E);const C=D=>{if(!this._cacheRecherche[E])return;this._cacheRecherche[E].val=D;const q=Object.values(this._cacheRecherche[E].requètes);d==="profondeur"?q.forEach(j=>j.f(D.filter(J=>J.profondeur<=j.taille))):q.forEach(j=>j.f(D.slice(0,j.taille)))};if(this._cacheRecherche[E])this._cacheRecherche[E].requètes[A]={f:y,taille:w},Object.keys(this._cacheRecherche[E]).includes("val")&&C(this._cacheRecherche[E].val);else{this._cacheRecherche[E]={requètes:{[A]:{f:y,taille:w}},taillePrésente:w};const D={..._,[m]:C,[n]:w};if(d==="profondeur"){const{fOublier:q,fChangerProfondeur:j}=await o.apply(u,[D]);this._cacheRecherche[E].fs={fOublier:q,fChangerTaille:j}}else{const{fOublier:q,fChangerN:j}=await o.apply(u,[D]);this._cacheRecherche[E].fs={fOublier:q,fChangerTaille:j}}}const k=async()=>{await this.oublierRecherche({codeCache:E,idRequète:A})},B=D=>{const q=this._cacheRecherche[E].requètes[A].taille;if(D===q)return;this._cacheRecherche[E].requètes[A].taille=D,C(this._cacheRecherche[E].val);const j=Math.max(...Object.values(this._cacheRecherche[E].requètes).map(L=>L.taille)),{taillePrésente:J}=this._cacheRecherche[E],{fChangerTaille:Y}=this._cacheRecherche[E].fs;j!==J&&Y(j)};return this.verrou.release(E),{fOublier:k,[d==="profondeur"?"fChangerProfondeur":"fChangerN"]:B}}async oublierSuivi({codeCache:e,idRequète:n}){if(await this.verrou.acquire(e),this._cacheSuivi[e]===void 0)return;const{requètes:a,fOublier:o}=this._cacheSuivi[e];delete a[n],Object.keys(a).length||(await o(),delete this._cacheSuivi[e]),this.verrou.release(e)}async oublierRecherche({codeCache:e,idRequète:n}){if(await this.verrou.acquire(e),this._cacheRecherche[e]===void 0)return;const{requètes:a,fs:o}=this._cacheRecherche[e];delete a[n],Object.keys(a).length||(await o.fOublier(),delete this._cacheRecherche[e]),this.verrou.release(e)}générerCodeCache({adresseFonction:e,idClient:n,argsClefs:a}){const o=e+"-"+n+"-"+JSON.stringify(a);return crypto$5.createHash("md5").update(o).digest("hex")}}const cacheSuivi=(t,e,n)=>envelopper({nom:e,descripteur:n}),cacheRechercheParNRésultats=(t,e,n)=>envelopper({nom:e,descripteur:n,recherche:"nRésultats"}),cacheRechercheParProfondeur=(t,e,n)=>envelopper({nom:e,descripteur:n,recherche:"profondeur"}),envelopper=({nom:t,descripteur:e,recherche:n,nomArgTaille:a})=>{const o=e.value;if(typeof o=="function")e.value=function(...l){if(l.length>1)throw new Error("Args trop longs");const u=this.client?this.client:this;try{return n?(a=a||(n==="profondeur"?"profondeur":"nRésultatsDésirés"),cache$2.suivreRecherche({adresseFonction:this.constructor.name+"."+t,idClient:u.idBdCompte,fOriginale:o,args:l[0],ceciOriginal:this,par:n,nomArgTaille:a})):cache$2.suivre({adresseFonction:this.constructor.name+"."+t,idClient:u.idBdCompte,fOriginale:o,args:l[0],ceciOriginal:this})}catch(d){throw console.error(`Erreur: ${d}`),d}};else throw new Error("L'objet décoré n'est pas une fonction");return e},cache$2=new CacheSuivi,MAX_TAILLE_IMAGE$2=500*1e3,MAX_TAILLE_IMAGE_VIS$2=1500*1e3;class Profil{constructor({client:e,id:n}){ut(this,"client");ut(this,"idBd");this.client=e,this.idBd=n}async suivreCourriel({f:e,idBdProfil:n}){return n=n||this.idBd,await this.client.suivreBd({id:n,f:async a=>{const o=a.get("courriel");await e(o||null)}})}async sauvegarderCourriel({courriel:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.set("courriel",e),await a()}async effacerCourriel(){const{bd:e,fOublier:n}=await this.client.ouvrirBd({id:this.idBd});await e.del("courriel"),await n()}async suivreNoms({f:e,idBdProfil:n}){return n=n||this.idBd,await this.client.suivreBdDicDeClef({id:n,clef:"noms",f:e})}async sauvegarderNom({langue:e,nom:n}){const a=await this.client.obtIdBd({nom:"noms",racine:this.idBd,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${this.idBd}.`);const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a});await o.set(e,n),await l()}async effacerNom({langue:e}){const n=await this.client.obtIdBd({nom:"noms",racine:this.idBd,type:"kvstore"});if(!n)throw new Error(`Permission de modification refusée pour BD ${this.idBd}.`);const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:n});await a.del(e),await o()}async sauvegarderImage({image:e}){let n;if(e.size!==void 0){if(e.size>MAX_TAILLE_IMAGE$2)throw new Error("Taille maximale excédée");n=await e.arrayBuffer()}else n=e;const a=await this.client.ajouterÀSFIP({fichier:n}),{bd:o,fOublier:l}=await this.client.ouvrirBd({id:this.idBd});await o.set("image",a),await l()}async effacerImage(){const{bd:e,fOublier:n}=await this.client.ouvrirBd({id:this.idBd});await e.del("image"),await n()}async suivreImage({f:e,idBdProfil:n}){return n=n||this.idBd,await this.client.suivreBd({id:n,f:async a=>{const o=a.get("image");if(!o)await e(null);else{const l=await this.client.obtFichierSFIP({id:o,max:MAX_TAILLE_IMAGE_VIS$2});await e(l)}}})}}__decorate([cacheSuivi],Profil.prototype,"suivreCourriel",null);__decorate([cacheSuivi],Profil.prototype,"suivreNoms",null);__decorate([cacheSuivi],Profil.prototype,"suivreImage",null);/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var XLSX={};XLSX.version="0.19.1";var current_codepage=1200,$cptable,VALID_ANSI=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],CS2CP={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},set_ansi=function(t){VALID_ANSI.indexOf(t)!=-1&&(CS2CP[0]=t)};function reset_ansi(){set_ansi(1252)}var set_cp=function(t){current_codepage=t,set_ansi(t)};function reset_cp(){set_cp(1200),reset_ansi()}function char_codes(t){for(var e=[],n=0,a=t.length;n<a;++n)e[n]=t.charCodeAt(n);return e}function utf16leread(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n)+(t.charCodeAt(2*n+1)<<8));return e.join("")}function utf16beread(t){for(var e=[],n=0;n<t.length>>1;++n)e[n]=String.fromCharCode(t.charCodeAt(2*n+1)+(t.charCodeAt(2*n)<<8));return e.join("")}var debom=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1);return e==255&&n==254?utf16leread(t.slice(2)):e==254&&n==255?utf16beread(t.slice(2)):e==65279?t.slice(1):t},_getchar=function t(e){return String.fromCharCode(e)},_getansi=function t(e){return String.fromCharCode(e)},DENSE=null,Base64_map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Base64_encode(t){for(var e="",n=0,a=0,o=0,l=0,u=0,d=0,m=0,y=0;y<t.length;)n=t.charCodeAt(y++),l=n>>2,a=t.charCodeAt(y++),u=(n&3)<<4|a>>4,o=t.charCodeAt(y++),d=(a&15)<<2|o>>6,m=o&63,isNaN(a)?d=m=64:isNaN(o)&&(m=64),e+=Base64_map.charAt(l)+Base64_map.charAt(u)+Base64_map.charAt(d)+Base64_map.charAt(m);return e}function Base64_encode_pass(t){for(var e="",n=0,a=0,o=0,l=0,u=0,d=0,m=0,y=0;y<t.length;)n=t.charCodeAt(y++),n>255&&(n=95),l=n>>2,a=t.charCodeAt(y++),a>255&&(a=95),u=(n&3)<<4|a>>4,o=t.charCodeAt(y++),o>255&&(o=95),d=(a&15)<<2|o>>6,m=o&63,isNaN(a)?d=m=64:isNaN(o)&&(m=64),e+=Base64_map.charAt(l)+Base64_map.charAt(u)+Base64_map.charAt(d)+Base64_map.charAt(m);return e}function Base64_decode(t){var e="",n=0,a=0,o=0,l=0,u=0,d=0,m=0;t=t.replace(/^data:([^\/]+\/[^\/]+)?;base64\,/,"").replace(/[^\w\+\/\=]/g,"");for(var y=0;y<t.length;)l=Base64_map.indexOf(t.charAt(y++)),u=Base64_map.indexOf(t.charAt(y++)),n=l<<2|u>>4,e+=String.fromCharCode(n),d=Base64_map.indexOf(t.charAt(y++)),a=(u&15)<<4|d>>2,d!==64&&(e+=String.fromCharCode(a)),m=Base64_map.indexOf(t.charAt(y++)),o=(d&3)<<6|m,m!==64&&(e+=String.fromCharCode(o));return e}var has_buf=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Buffer_from=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(e,n){return n?new Buffer(e,n):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}(),buf_utf16le=function(){if(typeof Buffer>"u")return!1;var t=Buffer_from([65,0]);if(!t)return!1;var e=t.toString("utf16le");return e.length==1}();function new_raw_buf(t){return has_buf?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function new_unsafe_buf(t){return has_buf?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var s2a=function t(e){return has_buf?Buffer_from(e,"binary"):e.split("").map(function(n){return n.charCodeAt(0)&255})};function s2ab(t){if(typeof ArrayBuffer>"u")return s2a(t);for(var e=new ArrayBuffer(t.length),n=new Uint8Array(e),a=0;a!=t.length;++a)n[a]=t.charCodeAt(a)&255;return e}function a2s(t){if(Array.isArray(t))return t.map(function(a){return String.fromCharCode(a)}).join("");for(var e=[],n=0;n<t.length;++n)e[n]=String.fromCharCode(t[n]);return e.join("")}function a2u(t){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(t)}function ab2a(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return ab2a(new Uint8Array(t));for(var e=new Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e}var bconcat=has_buf?function(t){return Buffer.concat(t.map(function(e){return Buffer.isBuffer(e)?e:Buffer_from(e)}))}:function(t){if(typeof Uint8Array<"u"){var e=0,n=0;for(e=0;e<t.length;++e)n+=t[e].length;var a=new Uint8Array(n),o=0;for(e=0,n=0;e<t.length;n+=o,++e)o=t[e].length,t[e]instanceof Uint8Array?a.set(t[e],n):typeof t[e]=="string"?a.set(new Uint8Array(s2a(t[e])),n):a.set(new Uint8Array(t[e]),n);return a}return[].concat.apply([],t.map(function(l){return Array.isArray(l)?l:[].slice.call(l)}))};function utf8decode(t){for(var e=[],n=0,a=t.length+250,o=new_raw_buf(t.length+255),l=0;l<t.length;++l){var u=t.charCodeAt(l);if(u<128)o[n++]=u;else if(u<2048)o[n++]=192|u>>6&31,o[n++]=128|u&63;else if(u>=55296&&u<57344){u=(u&1023)+64;var d=t.charCodeAt(++l)&1023;o[n++]=240|u>>8&7,o[n++]=128|u>>2&63,o[n++]=128|d>>6&15|(u&3)<<4,o[n++]=128|d&63}else o[n++]=224|u>>12&15,o[n++]=128|u>>6&63,o[n++]=128|u&63;n>a&&(e.push(o.slice(0,n)),n=0,o=new_raw_buf(65535),a=65530)}return e.push(o.slice(0,n)),bconcat(e)}var chr0=/\u0000/g,chr1=/[\u0001-\u0006]/g;function _strrev(t){for(var e="",n=t.length-1;n>=0;)e+=t.charAt(n--);return e}function pad0(t,e){var n=""+t;return n.length>=e?n:fill("0",e-n.length)+n}function pad_(t,e){var n=""+t;return n.length>=e?n:fill(" ",e-n.length)+n}function rpad_(t,e){var n=""+t;return n.length>=e?n:n+fill(" ",e-n.length)}function pad0r1(t,e){var n=""+Math.round(t);return n.length>=e?n:fill("0",e-n.length)+n}function pad0r2(t,e){var n=""+t;return n.length>=e?n:fill("0",e-n.length)+n}var p2_32=Math.pow(2,32);function pad0r(t,e){if(t>p2_32||t<-p2_32)return pad0r1(t,e);var n=Math.round(t);return pad0r2(n,e)}function SSF_isgeneral(t,e){return e=e||0,t.length>=7+e&&(t.charCodeAt(e)|32)===103&&(t.charCodeAt(e+1)|32)===101&&(t.charCodeAt(e+2)|32)===110&&(t.charCodeAt(e+3)|32)===101&&(t.charCodeAt(e+4)|32)===114&&(t.charCodeAt(e+5)|32)===97&&(t.charCodeAt(e+6)|32)===108}var days=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],months=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function SSF_init_table(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',t}var table_fmt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},SSF_default_map={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},SSF_default_str={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function SSF_frac(t,e,n){for(var a=t<0?-1:1,o=t*a,l=0,u=1,d=0,m=1,y=0,b=0,_=Math.floor(o);y<e&&(_=Math.floor(o),d=_*u+l,b=_*y+m,!(o-_<5e-8));)o=1/(o-_),l=u,u=d,m=y,y=b;if(b>e&&(y>e?(b=m,d=l):(b=y,d=u)),!n)return[0,a*d,b];var w=Math.floor(a*d/b);return[w,a*d-w*b,b]}function SSF_parse_date_code(t,e,n){if(t>2958465||t<0)return null;var a=t|0,o=Math.floor(86400*(t-a)),l=0,u=[],d={D:a,T:o,u:86400*(t-a)-o,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(d.u)<1e-6&&(d.u=0),e&&e.date1904&&(a+=1462),d.u>.9999&&(d.u=0,++o==86400&&(d.T=o=0,++a,++d.D)),a===60)u=n?[1317,10,29]:[1900,2,29],l=3;else if(a===0)u=n?[1317,8,29]:[1900,1,0],l=6;else{a>60&&--a;var m=new Date(1900,0,1);m.setDate(m.getDate()+a-1),u=[m.getFullYear(),m.getMonth()+1,m.getDate()],l=m.getDay(),a<60&&(l=(l+6)%7),n&&(l=SSF_fix_hijri(m,u))}return d.y=u[0],d.m=u[1],d.d=u[2],d.S=o%60,o=Math.floor(o/60),d.M=o%60,o=Math.floor(o/60),d.H=o,d.q=l,d}var SSFbasedate=new Date(1899,11,31,0,0,0),SSFdnthresh=SSFbasedate.getTime(),SSFbase1904=new Date(1900,2,1,0,0,0);function datenum_local(t,e){var n=t.getTime();return e?n-=1461*24*60*60*1e3:t>=SSFbase1904&&(n+=24*60*60*1e3),(n-(SSFdnthresh+(t.getTimezoneOffset()-SSFbasedate.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function SSF_strip_decimal(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function SSF_normalize_exp(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function SSF_small_exp(t){var e=t<0?12:11,n=SSF_strip_decimal(t.toFixed(12));return n.length<=e||(n=t.toPrecision(10),n.length<=e)?n:t.toExponential(5)}function SSF_large_exp(t){var e=SSF_strip_decimal(t.toFixed(11));return e.length>(t<0?12:11)||e==="0"||e==="-0"?t.toPrecision(6):e}function SSF_general_num(t){var e=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),n;return e>=-4&&e<=-1?n=t.toPrecision(10+e):Math.abs(e)<=9?n=SSF_small_exp(t):e===10?n=t.toFixed(10).substr(0,12):n=SSF_large_exp(t),SSF_strip_decimal(SSF_normalize_exp(n.toUpperCase()))}function SSF_general(t,e){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):SSF_general_num(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return SSF_format(14,datenum_local(t,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+t)}function SSF_fix_hijri(t,e){e[0]-=581;var n=t.getDay();return t<60&&(n=(n+6)%7),n}function SSF_write_date(t,e,n,a){var o="",l=0,u=0,d=n.y,m,y=0;switch(t){case 98:d=n.y+543;case 121:switch(e.length){case 1:case 2:m=d%100,y=2;break;default:m=d%1e4,y=4;break}break;case 109:switch(e.length){case 1:case 2:m=n.m,y=e.length;break;case 3:return months[n.m-1][1];case 5:return months[n.m-1][0];default:return months[n.m-1][2]}break;case 100:switch(e.length){case 1:case 2:m=n.d,y=e.length;break;case 3:return days[n.q][0];default:return days[n.q][1]}break;case 104:switch(e.length){case 1:case 2:m=1+(n.H+11)%12,y=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:m=n.H,y=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:m=n.M,y=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return n.u===0&&(e=="s"||e=="ss")?pad0(n.S,e.length):(a>=2?u=a===3?1e3:100:u=a===1?10:1,l=Math.round(u*(n.S+n.u)),l>=60*u&&(l=0),e==="s"?l===0?"0":""+l/u:(o=pad0(l,2+a),e==="ss"?o.substr(0,2):"."+o.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":m=n.D*24+n.H;break;case"[m]":case"[mm]":m=(n.D*24+n.H)*60+n.M;break;case"[s]":case"[ss]":m=((n.D*24+n.H)*60+n.M)*60+Math.round(n.S+n.u);break;default:throw"bad abstime format: "+e}y=e.length===3?1:2;break;case 101:m=d,y=1;break}var b=y>0?pad0(m,y):"";return b}function commaify(t){var e=3;if(t.length<=e)return t;for(var n=t.length%e,a=t.substr(0,n);n!=t.length;n+=e)a+=(a.length>0?",":"")+t.substr(n,e);return a}var pct1=/%/g;function write_num_pct(t,e,n){var a=e.replace(pct1,""),o=e.length-a.length;return write_num(t,a,n*Math.pow(10,2*o))+fill("%",o)}function write_num_cm(t,e,n){for(var a=e.length-1;e.charCodeAt(a-1)===44;)--a;return write_num(t,e.substr(0,a),n/Math.pow(10,3*(e.length-a)))}function write_num_exp(t,e){var n,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+write_num_exp(t,-e);var o=t.indexOf(".");o===-1&&(o=t.indexOf("E"));var l=Math.floor(Math.log(e)*Math.LOG10E)%o;if(l<0&&(l+=o),n=(e/Math.pow(10,l)).toPrecision(a+1+(o+l)%o),n.indexOf("e")===-1){var u=Math.floor(Math.log(e)*Math.LOG10E);for(n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(u-n.length+l):n+="E+"+(u-l);n.substr(0,2)==="0.";)n=n.charAt(0)+n.substr(2,o)+"."+n.substr(2+o),n=n.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,m,y,b){return m+y+b.substr(0,(o+l)%o)+"."+b.substr(l)+"E"})}else n=e.toExponential(a);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}var frac1=/# (\?+)( ?)\/( ?)(\d+)/;function write_num_f1(t,e,n){var a=parseInt(t[4],10),o=Math.round(e*a),l=Math.floor(o/a),u=o-l*a,d=a;return n+(l===0?"":""+l)+" "+(u===0?fill(" ",t[1].length+1+t[4].length):pad_(u,t[1].length)+t[2]+"/"+t[3]+pad0(d,t[4].length))}function write_num_f2(t,e,n){return n+(e===0?"":""+e)+fill(" ",t[1].length+2+t[4].length)}var dec1=/^#*0*\.([0#]+)/,closeparen=/\).*[0#]/,phone=/\(###\) ###\\?-####/;function hashq(t){for(var e="",n,a=0;a!=t.length;++a)switch(n=t.charCodeAt(a)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(n)}return e}function rnd(t,e){var n=Math.pow(10,e);return""+Math.round(t*n)/n}function dec(t,e){var n=t-Math.floor(t),a=Math.pow(10,e);return e<(""+Math.round(n*a)).length?0:Math.round(n*a)}function carry(t,e){return e<(""+Math.round((t-Math.floor(t))*Math.pow(10,e))).length?1:0}function flr(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function write_num_flt(t,e,n){if(t.charCodeAt(0)===40&&!e.match(closeparen)){var a=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?write_num_flt("n",a,n):"("+write_num_flt("n",a,-n)+")"}if(e.charCodeAt(e.length-1)===44)return write_num_cm(t,e,n);if(e.indexOf("%")!==-1)return write_num_pct(t,e,n);if(e.indexOf("E")!==-1)return write_num_exp(e,n);if(e.charCodeAt(0)===36)return"$"+write_num_flt(t,e.substr(e.charAt(1)==" "?2:1),n);var o,l,u,d,m=Math.abs(n),y=n<0?"-":"";if(e.match(/^00+$/))return y+pad0r(m,e.length);if(e.match(/^[#?]+$/))return o=pad0r(n,0),o==="0"&&(o=""),o.length>e.length?o:hashq(e.substr(0,e.length-o.length))+o;if(l=e.match(frac1))return write_num_f1(l,m,y);if(e.match(/^#+0+$/))return y+pad0r(m,e.length-e.indexOf("0"));if(l=e.match(dec1))return o=rnd(n,l[1].length).replace(/^([^\.]+)$/,"$1."+hashq(l[1])).replace(/\.$/,"."+hashq(l[1])).replace(/\.(\d*)$/,function(A,C){return"."+C+fill("0",hashq(l[1]).length-C.length)}),e.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),l=e.match(/^(0*)\.(#*)$/))return y+rnd(m,l[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=e.match(/^#{1,3},##0(\.?)$/))return y+commaify(pad0r(m,0));if(l=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+write_num_flt(t,e,-n):commaify(""+(Math.floor(n)+carry(n,l[1].length)))+"."+pad0(dec(n,l[1].length),l[1].length);if(l=e.match(/^#,#*,#0/))return write_num_flt(t,e.replace(/^#,#*,/,""),n);if(l=e.match(/^([0#]+)(\\?-([0#]+))+$/))return o=_strrev(write_num_flt(t,e.replace(/[\\-]/g,""),n)),u=0,_strrev(_strrev(e.replace(/\\/g,"")).replace(/[0#]/g,function(A){return u<o.length?o.charAt(u++):A==="0"?"0":""}));if(e.match(phone))return o=write_num_flt(t,"##########",n),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var b="";if(l=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(l[4].length,7),d=SSF_frac(m,Math.pow(10,u)-1,!1),o=""+y,b=write_num("n",l[1],d[1]),b.charAt(b.length-1)==" "&&(b=b.substr(0,b.length-1)+"0"),o+=b+l[2]+"/"+l[3],b=rpad_(d[2],u),b.length<l[4].length&&(b=hashq(l[4].substr(l[4].length-b.length))+b),o+=b,o;if(l=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(l[1].length,l[4].length),7),d=SSF_frac(m,Math.pow(10,u)-1,!0),y+(d[0]||(d[1]?"":"0"))+" "+(d[1]?pad_(d[1],u)+l[2]+"/"+l[3]+rpad_(d[2],u):fill(" ",2*u+1+l[2].length+l[3].length));if(l=e.match(/^[#0?]+$/))return o=pad0r(n,0),e.length<=o.length?o:hashq(e.substr(0,e.length-o.length))+o;if(l=e.match(/^([#0?]+)\.([#0]+)$/)){o=""+n.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),u=o.indexOf(".");var _=e.indexOf(".")-u,w=e.length-o.length-_;return hashq(e.substr(0,_)+o+e.substr(e.length-w))}if(l=e.match(/^00,000\.([#0]*0)$/))return u=dec(n,l[1].length),n<0?"-"+write_num_flt(t,e,-n):commaify(flr(n)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(A){return"00,"+(A.length<3?pad0(0,3-A.length):"")+A})+"."+pad0(u,l[1].length);switch(e){case"###,##0.00":return write_num_flt(t,"#,##0.00",n);case"###,###":case"##,###":case"#,###":var E=commaify(pad0r(m,0));return E!=="0"?y+E:"";case"###,###.00":return write_num_flt(t,"###,##0.00",n).replace(/^0\./,".");case"#,###.00":return write_num_flt(t,"#,##0.00",n).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function write_num_cm2(t,e,n){for(var a=e.length-1;e.charCodeAt(a-1)===44;)--a;return write_num(t,e.substr(0,a),n/Math.pow(10,3*(e.length-a)))}function write_num_pct2(t,e,n){var a=e.replace(pct1,""),o=e.length-a.length;return write_num(t,a,n*Math.pow(10,2*o))+fill("%",o)}function write_num_exp2(t,e){var n,a=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+write_num_exp2(t,-e);var o=t.indexOf(".");o===-1&&(o=t.indexOf("E"));var l=Math.floor(Math.log(e)*Math.LOG10E)%o;if(l<0&&(l+=o),n=(e/Math.pow(10,l)).toPrecision(a+1+(o+l)%o),!n.match(/[Ee]/)){var u=Math.floor(Math.log(e)*Math.LOG10E);n.indexOf(".")===-1?n=n.charAt(0)+"."+n.substr(1)+"E+"+(u-n.length+l):n+="E+"+(u-l),n=n.replace(/\+-/,"-")}n=n.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(d,m,y,b){return m+y+b.substr(0,(o+l)%o)+"."+b.substr(l)+"E"})}else n=e.toExponential(a);return t.match(/E\+00$/)&&n.match(/e[+-]\d$/)&&(n=n.substr(0,n.length-1)+"0"+n.charAt(n.length-1)),t.match(/E\-/)&&n.match(/e\+/)&&(n=n.replace(/e\+/,"e")),n.replace("e","E")}function write_num_int(t,e,n){if(t.charCodeAt(0)===40&&!e.match(closeparen)){var a=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return n>=0?write_num_int("n",a,n):"("+write_num_int("n",a,-n)+")"}if(e.charCodeAt(e.length-1)===44)return write_num_cm2(t,e,n);if(e.indexOf("%")!==-1)return write_num_pct2(t,e,n);if(e.indexOf("E")!==-1)return write_num_exp2(e,n);if(e.charCodeAt(0)===36)return"$"+write_num_int(t,e.substr(e.charAt(1)==" "?2:1),n);var o,l,u,d,m=Math.abs(n),y=n<0?"-":"";if(e.match(/^00+$/))return y+pad0(m,e.length);if(e.match(/^[#?]+$/))return o=""+n,n===0&&(o=""),o.length>e.length?o:hashq(e.substr(0,e.length-o.length))+o;if(l=e.match(frac1))return write_num_f2(l,m,y);if(e.match(/^#+0+$/))return y+pad0(m,e.length-e.indexOf("0"));if(l=e.match(dec1))return o=(""+n).replace(/^([^\.]+)$/,"$1."+hashq(l[1])).replace(/\.$/,"."+hashq(l[1])),o=o.replace(/\.(\d*)$/,function(A,C){return"."+C+fill("0",hashq(l[1]).length-C.length)}),e.indexOf("0.")!==-1?o:o.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),l=e.match(/^(0*)\.(#*)$/))return y+(""+m).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,l[1].length?"0.":".");if(l=e.match(/^#{1,3},##0(\.?)$/))return y+commaify(""+m);if(l=e.match(/^#,##0\.([#0]*0)$/))return n<0?"-"+write_num_int(t,e,-n):commaify(""+n)+"."+fill("0",l[1].length);if(l=e.match(/^#,#*,#0/))return write_num_int(t,e.replace(/^#,#*,/,""),n);if(l=e.match(/^([0#]+)(\\?-([0#]+))+$/))return o=_strrev(write_num_int(t,e.replace(/[\\-]/g,""),n)),u=0,_strrev(_strrev(e.replace(/\\/g,"")).replace(/[0#]/g,function(A){return u<o.length?o.charAt(u++):A==="0"?"0":""}));if(e.match(phone))return o=write_num_int(t,"##########",n),"("+o.substr(0,3)+") "+o.substr(3,3)+"-"+o.substr(6);var b="";if(l=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(l[4].length,7),d=SSF_frac(m,Math.pow(10,u)-1,!1),o=""+y,b=write_num("n",l[1],d[1]),b.charAt(b.length-1)==" "&&(b=b.substr(0,b.length-1)+"0"),o+=b+l[2]+"/"+l[3],b=rpad_(d[2],u),b.length<l[4].length&&(b=hashq(l[4].substr(l[4].length-b.length))+b),o+=b,o;if(l=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(l[1].length,l[4].length),7),d=SSF_frac(m,Math.pow(10,u)-1,!0),y+(d[0]||(d[1]?"":"0"))+" "+(d[1]?pad_(d[1],u)+l[2]+"/"+l[3]+rpad_(d[2],u):fill(" ",2*u+1+l[2].length+l[3].length));if(l=e.match(/^[#0?]+$/))return o=""+n,e.length<=o.length?o:hashq(e.substr(0,e.length-o.length))+o;if(l=e.match(/^([#0]+)\.([#0]+)$/)){o=""+n.toFixed(Math.min(l[2].length,10)).replace(/([^0])0+$/,"$1"),u=o.indexOf(".");var _=e.indexOf(".")-u,w=e.length-o.length-_;return hashq(e.substr(0,_)+o+e.substr(e.length-w))}if(l=e.match(/^00,000\.([#0]*0)$/))return n<0?"-"+write_num_int(t,e,-n):commaify(""+n).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(A){return"00,"+(A.length<3?pad0(0,3-A.length):"")+A})+"."+pad0(0,l[1].length);switch(e){case"###,###":case"##,###":case"#,###":var E=commaify(""+m);return E!=="0"?y+E:"";default:if(e.match(/\.[0#?]*$/))return write_num_int(t,e.slice(0,e.lastIndexOf(".")),n)+hashq(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function write_num(t,e,n){return(n|0)===n?write_num_int(t,e,n):write_num_flt(t,e,n)}function SSF_split_fmt(t){for(var e=[],n=!1,a=0,o=0;a<t.length;++a)switch(t.charCodeAt(a)){case 34:n=!n;break;case 95:case 42:case 92:++a;break;case 59:e[e.length]=t.substr(o,a-o),o=a+1}if(e[e.length]=t.substr(o),n===!0)throw new Error("Format |"+t+"| unterminated string ");return e}var SSF_abstime=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function fmt_is_date(t){for(var e=0,n="",a="";e<t.length;)switch(n=t.charAt(e)){case"G":SSF_isgeneral(t,e)&&(e+=6),e++;break;case'"':for(;t.charCodeAt(++e)!==34&&e<t.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(t.charAt(e+1)==="1"||t.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(t.substr(e,3).toUpperCase()==="A/P"||t.substr(e,5).toUpperCase()==="AM/PM"||t.substr(e,5).toUpperCase()==="上午/下午")return!0;++e;break;case"[":for(a=n;t.charAt(e++)!=="]"&&e<t.length;)a+=t.charAt(e);if(a.match(SSF_abstime))return!0;break;case".":case"0":case"#":for(;e<t.length&&("0#?.,E+-%".indexOf(n=t.charAt(++e))>-1||n=="\\"&&t.charAt(e+1)=="-"&&"0#".indexOf(t.charAt(e+2))>-1););break;case"?":for(;t.charAt(++e)===n;);break;case"*":++e,(t.charAt(e)==" "||t.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<t.length&&"0123456789".indexOf(t.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function eval_fmt(t,e,n,a){for(var o=[],l="",u=0,d="",m="t",y,b,_,w="H";u<t.length;)switch(d=t.charAt(u)){case"G":if(!SSF_isgeneral(t,u))throw new Error("unrecognized character "+d+" in "+t);o[o.length]={t:"G",v:"General"},u+=7;break;case'"':for(l="";(_=t.charCodeAt(++u))!==34&&u<t.length;)l+=String.fromCharCode(_);o[o.length]={t:"t",v:l},++u;break;case"\\":var E=t.charAt(++u),A=E==="("||E===")"?E:"t";o[o.length]={t:A,v:E},++u;break;case"_":o[o.length]={t:"t",v:" "},u+=2;break;case"@":o[o.length]={t:"T",v:e},++u;break;case"B":case"b":if(t.charAt(u+1)==="1"||t.charAt(u+1)==="2"){if(y==null&&(y=SSF_parse_date_code(e,n,t.charAt(u+1)==="2"),y==null))return"";o[o.length]={t:"X",v:t.substr(u,2)},m=d,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":d=d.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||y==null&&(y=SSF_parse_date_code(e,n),y==null))return"";for(l=d;++u<t.length&&t.charAt(u).toLowerCase()===d;)l+=d;d==="m"&&m.toLowerCase()==="h"&&(d="M"),d==="h"&&(d=w),o[o.length]={t:d,v:l},m=d;break;case"A":case"a":case"上":var C={t:d,v:d};if(y==null&&(y=SSF_parse_date_code(e,n)),t.substr(u,3).toUpperCase()==="A/P"?(y!=null&&(C.v=y.H>=12?t.charAt(u+2):d),C.t="T",w="h",u+=3):t.substr(u,5).toUpperCase()==="AM/PM"?(y!=null&&(C.v=y.H>=12?"PM":"AM"),C.t="T",u+=5,w="h"):t.substr(u,5).toUpperCase()==="上午/下午"?(y!=null&&(C.v=y.H>=12?"下午":"上午"),C.t="T",u+=5,w="h"):(C.t="t",++u),y==null&&C.t==="T")return"";o[o.length]=C,m=d;break;case"[":for(l=d;t.charAt(u++)!=="]"&&u<t.length;)l+=t.charAt(u);if(l.slice(-1)!=="]")throw'unterminated "[" block: |'+l+"|";if(l.match(SSF_abstime)){if(y==null&&(y=SSF_parse_date_code(e,n),y==null))return"";o[o.length]={t:"Z",v:l.toLowerCase()},m=l.charAt(1)}else l.indexOf("$")>-1&&(l=(l.match(/\$([^-\[\]]*)/)||[])[1]||"$",fmt_is_date(t)||(o[o.length]={t:"t",v:l}));break;case".":if(y!=null){for(l=d;++u<t.length&&(d=t.charAt(u))==="0";)l+=d;o[o.length]={t:"s",v:l};break}case"0":case"#":for(l=d;++u<t.length&&"0#?.,E+-%".indexOf(d=t.charAt(u))>-1;)l+=d;o[o.length]={t:"n",v:l};break;case"?":for(l=d;t.charAt(++u)===d;)l+=d;o[o.length]={t:d,v:l},m=d;break;case"*":++u,(t.charAt(u)==" "||t.charAt(u)=="*")&&++u;break;case"(":case")":o[o.length]={t:a===1?"t":d,v:d},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(l=d;u<t.length&&"0123456789".indexOf(t.charAt(++u))>-1;)l+=t.charAt(u);o[o.length]={t:"D",v:l};break;case" ":o[o.length]={t:d,v:d},++u;break;case"$":o[o.length]={t:"t",v:"$"},++u;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(d)===-1)throw new Error("unrecognized character "+d+" in "+t);o[o.length]={t:"t",v:d},++u;break}var k=0,B=0,D;for(u=o.length-1,m="t";u>=0;--u)switch(o[u].t){case"h":case"H":o[u].t=w,m="h",k<1&&(k=1);break;case"s":(D=o[u].v.match(/\.0+$/))&&(B=Math.max(B,D[0].length-1)),k<3&&(k=3);case"d":case"y":case"M":case"e":m=o[u].t;break;case"m":m==="s"&&(o[u].t="M",k<2&&(k=2));break;case"X":break;case"Z":k<1&&o[u].v.match(/[Hh]/)&&(k=1),k<2&&o[u].v.match(/[Mm]/)&&(k=2),k<3&&o[u].v.match(/[Ss]/)&&(k=3)}switch(k){case 0:break;case 1:y.u>=.5&&(y.u=0,++y.S),y.S>=60&&(y.S=0,++y.M),y.M>=60&&(y.M=0,++y.H);break;case 2:y.u>=.5&&(y.u=0,++y.S),y.S>=60&&(y.S=0,++y.M);break}var q="",j;for(u=0;u<o.length;++u)switch(o[u].t){case"t":case"T":case" ":case"D":break;case"X":o[u].v="",o[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":o[u].v=SSF_write_date(o[u].t.charCodeAt(0),o[u].v,y,B),o[u].t="t";break;case"n":case"?":for(j=u+1;o[j]!=null&&((d=o[j].t)==="?"||d==="D"||(d===" "||d==="t")&&o[j+1]!=null&&(o[j+1].t==="?"||o[j+1].t==="t"&&o[j+1].v==="/")||o[u].t==="("&&(d===" "||d==="n"||d===")")||d==="t"&&(o[j].v==="/"||o[j].v===" "&&o[j+1]!=null&&o[j+1].t=="?"));)o[u].v+=o[j].v,o[j]={v:"",t:";"},++j;q+=o[u].v,u=j-1;break;case"G":o[u].t="t",o[u].v=SSF_general(e,n);break}var J="",Y,L;if(q.length>0){q.charCodeAt(0)==40?(Y=e<0&&q.charCodeAt(0)===45?-e:e,L=write_num("n",q,Y)):(Y=e<0&&a>1?-e:e,L=write_num("n",q,Y),Y<0&&o[0]&&o[0].t=="t"&&(L=L.substr(1),o[0].v="-"+o[0].v)),j=L.length-1;var Z=o.length;for(u=0;u<o.length;++u)if(o[u]!=null&&o[u].t!="t"&&o[u].v.indexOf(".")>-1){Z=u;break}var Q=o.length;if(Z===o.length&&L.indexOf("E")===-1){for(u=o.length-1;u>=0;--u)o[u]==null||"n?".indexOf(o[u].t)===-1||(j>=o[u].v.length-1?(j-=o[u].v.length,o[u].v=L.substr(j+1,o[u].v.length)):j<0?o[u].v="":(o[u].v=L.substr(0,j+1),j=-1),o[u].t="t",Q=u);j>=0&&Q<o.length&&(o[Q].v=L.substr(0,j+1)+o[Q].v)}else if(Z!==o.length&&L.indexOf("E")===-1){for(j=L.indexOf(".")-1,u=Z;u>=0;--u)if(!(o[u]==null||"n?".indexOf(o[u].t)===-1)){for(b=o[u].v.indexOf(".")>-1&&u===Z?o[u].v.indexOf(".")-1:o[u].v.length-1,J=o[u].v.substr(b+1);b>=0;--b)j>=0&&(o[u].v.charAt(b)==="0"||o[u].v.charAt(b)==="#")&&(J=L.charAt(j--)+J);o[u].v=J,o[u].t="t",Q=u}for(j>=0&&Q<o.length&&(o[Q].v=L.substr(0,j+1)+o[Q].v),j=L.indexOf(".")+1,u=Z;u<o.length;++u)if(!(o[u]==null||"n?(".indexOf(o[u].t)===-1&&u!==Z)){for(b=o[u].v.indexOf(".")>-1&&u===Z?o[u].v.indexOf(".")+1:0,J=o[u].v.substr(0,b);b<o[u].v.length;++b)j<L.length&&(J+=L.charAt(j++));o[u].v=J,o[u].t="t",Q=u}}}for(u=0;u<o.length;++u)o[u]!=null&&"n?".indexOf(o[u].t)>-1&&(Y=a>1&&e<0&&u>0&&o[u-1].v==="-"?-e:e,o[u].v=write_num(o[u].t,o[u].v,Y),o[u].t="t");var oe="";for(u=0;u!==o.length;++u)o[u]!=null&&(oe+=o[u].v);return oe}var cfregex2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function chkcond(t,e){if(e==null)return!1;var n=parseFloat(e[2]);switch(e[1]){case"=":if(t==n)return!0;break;case">":if(t>n)return!0;break;case"<":if(t<n)return!0;break;case"<>":if(t!=n)return!0;break;case">=":if(t>=n)return!0;break;case"<=":if(t<=n)return!0;break}return!1}function choose_fmt(t,e){var n=SSF_split_fmt(t),a=n.length,o=n[a-1].indexOf("@");if(a<4&&o>-1&&--a,n.length>4)throw new Error("cannot find right format for |"+n.join("|")+"|");if(typeof e!="number")return[4,n.length===4||o>-1?n[n.length-1]:"@"];switch(n.length){case 1:n=o>-1?["General","General","General",n[0]]:[n[0],n[0],n[0],"@"];break;case 2:n=o>-1?[n[0],n[0],n[0],n[1]]:[n[0],n[1],n[0],"@"];break;case 3:n=o>-1?[n[0],n[1],n[0],n[2]]:[n[0],n[1],n[2],"@"];break}var l=e>0?n[0]:e<0?n[1]:n[2];if(n[0].indexOf("[")===-1&&n[1].indexOf("[")===-1)return[a,l];if(n[0].match(/\[[=<>]/)!=null||n[1].match(/\[[=<>]/)!=null){var u=n[0].match(cfregex2),d=n[1].match(cfregex2);return chkcond(e,u)?[a,n[0]]:chkcond(e,d)?[a,n[1]]:[a,n[u!=null&&d!=null?2:1]]}return[a,l]}function SSF_format(t,e,n){n==null&&(n={});var a="";switch(typeof t){case"string":t=="m/d/yy"&&n.dateNF?a=n.dateNF:a=t;break;case"number":t==14&&n.dateNF?a=n.dateNF:a=(n.table!=null?n.table:table_fmt)[t],a==null&&(a=n.table&&n.table[SSF_default_map[t]]||table_fmt[SSF_default_map[t]]),a==null&&(a=SSF_default_str[t]||"General");break}if(SSF_isgeneral(a,0))return SSF_general(e,n);e instanceof Date&&(e=datenum_local(e,n.date1904));var o=choose_fmt(a,e);if(SSF_isgeneral(o[1]))return SSF_general(e,n);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return eval_fmt(o[1],e,n,o[0])}function SSF_load(t,e){if(typeof e!="number"){e=+e||-1;for(var n=0;n<392;++n){if(table_fmt[n]==null){e<0&&(e=n);continue}if(table_fmt[n]==t){e=n;break}}e<0&&(e=391)}return table_fmt[e]=t,e}function SSF_load_table(t){for(var e=0;e!=392;++e)t[e]!==void 0&&SSF_load(t[e],e)}function make_ssf(){table_fmt=SSF_init_table()}var SSFImplicit={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},dateNFregex=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function dateNF_regex(t){var e=typeof t=="number"?table_fmt[t]:t;return e=e.replace(dateNFregex,"(\\d+)"),new RegExp("^"+e+"$")}function dateNF_fix(t,e,n){var a=-1,o=-1,l=-1,u=-1,d=-1,m=-1;(e.match(dateNFregex)||[]).forEach(function(_,w){var E=parseInt(n[w+1],10);switch(_.toLowerCase().charAt(0)){case"y":a=E;break;case"d":l=E;break;case"h":u=E;break;case"s":m=E;break;case"m":u>=0?d=E:o=E;break}}),m>=0&&d==-1&&o>=0&&(d=o,o=-1);var y=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(o>=1?o:1)).slice(-2)+"-"+("00"+(l>=1?l:1)).slice(-2);y.length==7&&(y="0"+y),y.length==8&&(y="20"+y);var b=("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(d>=0?d:0)).slice(-2)+":"+("00"+(m>=0?m:0)).slice(-2);return u==-1&&d==-1&&m==-1?y:a==-1&&o==-1&&l==-1?b:y+"T"+b}var bad_formats={"d.m":"d\\.m"};function SSF__load(t,e){return SSF_load(bad_formats[t]||t,e)}var CRC32=function(){var t={};t.version="1.2.0";function e(){for(var L=0,Z=new Array(256),Q=0;Q!=256;++Q)L=Q,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,Z[Q]=L;return typeof Int32Array<"u"?new Int32Array(Z):Z}var n=e();function a(L){var Z=0,Q=0,oe=0,ae=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(oe=0;oe!=256;++oe)ae[oe]=L[oe];for(oe=0;oe!=256;++oe)for(Q=L[oe],Z=256+oe;Z<4096;Z+=256)Q=ae[Z]=Q>>>8^L[Q&255];var U=[];for(oe=1;oe!=16;++oe)U[oe-1]=typeof Int32Array<"u"?ae.subarray(oe*256,oe*256+256):ae.slice(oe*256,oe*256+256);return U}var o=a(n),l=o[0],u=o[1],d=o[2],m=o[3],y=o[4],b=o[5],_=o[6],w=o[7],E=o[8],A=o[9],C=o[10],k=o[11],B=o[12],D=o[13],q=o[14];function j(L,Z){for(var Q=Z^-1,oe=0,ae=L.length;oe<ae;)Q=Q>>>8^n[(Q^L.charCodeAt(oe++))&255];return~Q}function J(L,Z){for(var Q=Z^-1,oe=L.length-15,ae=0;ae<oe;)Q=q[L[ae++]^Q&255]^D[L[ae++]^Q>>8&255]^B[L[ae++]^Q>>16&255]^k[L[ae++]^Q>>>24]^C[L[ae++]]^A[L[ae++]]^E[L[ae++]]^w[L[ae++]]^_[L[ae++]]^b[L[ae++]]^y[L[ae++]]^m[L[ae++]]^d[L[ae++]]^u[L[ae++]]^l[L[ae++]]^n[L[ae++]];for(oe+=15;ae<oe;)Q=Q>>>8^n[(Q^L[ae++])&255];return~Q}function Y(L,Z){for(var Q=Z^-1,oe=0,ae=L.length,U=0,I=0;oe<ae;)U=L.charCodeAt(oe++),U<128?Q=Q>>>8^n[(Q^U)&255]:U<2048?(Q=Q>>>8^n[(Q^(192|U>>6&31))&255],Q=Q>>>8^n[(Q^(128|U&63))&255]):U>=55296&&U<57344?(U=(U&1023)+64,I=L.charCodeAt(oe++)&1023,Q=Q>>>8^n[(Q^(240|U>>8&7))&255],Q=Q>>>8^n[(Q^(128|U>>2&63))&255],Q=Q>>>8^n[(Q^(128|I>>6&15|(U&3)<<4))&255],Q=Q>>>8^n[(Q^(128|I&63))&255]):(Q=Q>>>8^n[(Q^(224|U>>12&15))&255],Q=Q>>>8^n[(Q^(128|U>>6&63))&255],Q=Q>>>8^n[(Q^(128|U&63))&255]);return~Q}return t.table=n,t.bstr=j,t.buf=J,t.str=Y,t}(),CFB=function t(){var e={};e.version="1.2.2";function n(ne,xe){for(var Te=ne.split("/"),Ae=xe.split("/"),Ce=0,Ne=0,Ue=Math.min(Te.length,Ae.length);Ce<Ue;++Ce){if(Ne=Te[Ce].length-Ae[Ce].length)return Ne;if(Te[Ce]!=Ae[Ce])return Te[Ce]<Ae[Ce]?-1:1}return Te.length-Ae.length}function a(ne){if(ne.charAt(ne.length-1)=="/")return ne.slice(0,-1).indexOf("/")===-1?ne:a(ne.slice(0,-1));var xe=ne.lastIndexOf("/");return xe===-1?ne:ne.slice(0,xe+1)}function o(ne){if(ne.charAt(ne.length-1)=="/")return o(ne.slice(0,-1));var xe=ne.lastIndexOf("/");return xe===-1?ne:ne.slice(xe+1)}function l(ne,xe){typeof xe=="string"&&(xe=new Date(xe));var Te=xe.getHours();Te=Te<<6|xe.getMinutes(),Te=Te<<5|xe.getSeconds()>>>1,ne.write_shift(2,Te);var Ae=xe.getFullYear()-1980;Ae=Ae<<4|xe.getMonth()+1,Ae=Ae<<5|xe.getDate(),ne.write_shift(2,Ae)}function u(ne){var xe=ne.read_shift(2)&65535,Te=ne.read_shift(2)&65535,Ae=new Date,Ce=Te&31;Te>>>=5;var Ne=Te&15;Te>>>=4,Ae.setMilliseconds(0),Ae.setFullYear(Te+1980),Ae.setMonth(Ne-1),Ae.setDate(Ce);var Ue=xe&31;xe>>>=5;var je=xe&63;return xe>>>=6,Ae.setHours(xe),Ae.setMinutes(je),Ae.setSeconds(Ue<<1),Ae}function d(ne){prep_blob(ne,0);for(var xe={},Te=0;ne.l<=ne.length-4;){var Ae=ne.read_shift(2),Ce=ne.read_shift(2),Ne=ne.l+Ce,Ue={};switch(Ae){case 21589:Te=ne.read_shift(1),Te&1&&(Ue.mtime=ne.read_shift(4)),Ce>5&&(Te&2&&(Ue.atime=ne.read_shift(4)),Te&4&&(Ue.ctime=ne.read_shift(4))),Ue.mtime&&(Ue.mt=new Date(Ue.mtime*1e3));break;case 1:{var je=ne.read_shift(4),Ke=ne.read_shift(4);Ue.usz=Ke*Math.pow(2,32)+je,je=ne.read_shift(4),Ke=ne.read_shift(4),Ue.csz=Ke*Math.pow(2,32)+je}break}ne.l=Ne,xe[Ae]=Ue}return xe}var m;function y(){return m||(m=_fs)}function b(ne,xe){if(ne[0]==80&&ne[1]==75)return Rt(ne,xe);if((ne[0]|32)==109&&(ne[1]|32)==105)return kt(ne,xe);if(ne.length<512)throw new Error("CFB file size "+ne.length+" < 512");var Te=3,Ae=512,Ce=0,Ne=0,Ue=0,je=0,Ke=0,He=[],ze=ne.slice(0,512);prep_blob(ze,0);var Ye=_(ze);switch(Te=Ye[0],Te){case 3:Ae=512;break;case 4:Ae=4096;break;case 0:if(Ye[1]==0)return Rt(ne,xe);default:throw new Error("Major Version: Expected 3 or 4 saw "+Te)}Ae!==512&&(ze=ne.slice(0,Ae),prep_blob(ze,28));var Qe=ne.slice(0,Ae);w(ze,Te);var st=ze.read_shift(4,"i");if(Te===3&&st!==0)throw new Error("# Directory Sectors: Expected 0 saw "+st);ze.l+=4,Ue=ze.read_shift(4,"i"),ze.l+=4,ze.chk("00100000","Mini Stream Cutoff Size: "),je=ze.read_shift(4,"i"),Ce=ze.read_shift(4,"i"),Ke=ze.read_shift(4,"i"),Ne=ze.read_shift(4,"i");for(var Ze=-1,et=0;et<109&&(Ze=ze.read_shift(4,"i"),!(Ze<0));++et)He[et]=Ze;var vt=E(ne,Ae);k(Ke,Ne,vt,Ae,He);var yt=D(vt,Ue,He,Ae);Ue<yt.length&&(yt[Ue].name="!Directory"),Ce>0&&je!==I&&(yt[je].name="!MiniFAT"),yt[He[0]].name="!FAT",yt.fat_addrs=He,yt.ssz=Ae;var wt={},bt=[],$t=[],At=[];q(Ue,yt,vt,bt,Ce,wt,$t,je),A($t,At,bt),bt.shift();var Et={FileIndex:$t,FullPaths:At};return xe&&xe.raw&&(Et.raw={header:Qe,sectors:vt}),Et}function _(ne){if(ne[ne.l]==80&&ne[ne.l+1]==75)return[0,0];ne.chk(x,"Header Signature: "),ne.l+=16;var xe=ne.read_shift(2,"u");return[ne.read_shift(2,"u"),xe]}function w(ne,xe){var Te=9;switch(ne.l+=2,Te=ne.read_shift(2)){case 9:if(xe!=3)throw new Error("Sector Shift: Expected 9 saw "+Te);break;case 12:if(xe!=4)throw new Error("Sector Shift: Expected 12 saw "+Te);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Te)}ne.chk("0600","Mini Sector Shift: "),ne.chk("000000000000","Reserved: ")}function E(ne,xe){for(var Te=Math.ceil(ne.length/xe)-1,Ae=[],Ce=1;Ce<Te;++Ce)Ae[Ce-1]=ne.slice(Ce*xe,(Ce+1)*xe);return Ae[Te-1]=ne.slice(Te*xe),Ae}function A(ne,xe,Te){for(var Ae=0,Ce=0,Ne=0,Ue=0,je=0,Ke=Te.length,He=[],ze=[];Ae<Ke;++Ae)He[Ae]=ze[Ae]=Ae,xe[Ae]=Te[Ae];for(;je<ze.length;++je)Ae=ze[je],Ce=ne[Ae].L,Ne=ne[Ae].R,Ue=ne[Ae].C,He[Ae]===Ae&&(Ce!==-1&&He[Ce]!==Ce&&(He[Ae]=He[Ce]),Ne!==-1&&He[Ne]!==Ne&&(He[Ae]=He[Ne])),Ue!==-1&&(He[Ue]=Ae),Ce!==-1&&Ae!=He[Ae]&&(He[Ce]=He[Ae],ze.lastIndexOf(Ce)<je&&ze.push(Ce)),Ne!==-1&&Ae!=He[Ae]&&(He[Ne]=He[Ae],ze.lastIndexOf(Ne)<je&&ze.push(Ne));for(Ae=1;Ae<Ke;++Ae)He[Ae]===Ae&&(Ne!==-1&&He[Ne]!==Ne?He[Ae]=He[Ne]:Ce!==-1&&He[Ce]!==Ce&&(He[Ae]=He[Ce]));for(Ae=1;Ae<Ke;++Ae)if(ne[Ae].type!==0){if(je=Ae,je!=He[je])do je=He[je],xe[Ae]=xe[je]+"/"+xe[Ae];while(je!==0&&He[je]!==-1&&je!=He[je]);He[Ae]=-1}for(xe[0]+="/",Ae=1;Ae<Ke;++Ae)ne[Ae].type!==2&&(xe[Ae]+="/")}function C(ne,xe,Te){for(var Ae=ne.start,Ce=ne.size,Ne=[],Ue=Ae;Te&&Ce>0&&Ue>=0;)Ne.push(xe.slice(Ue*U,Ue*U+U)),Ce-=U,Ue=__readInt32LE(Te,Ue*4);return Ne.length===0?new_buf(0):bconcat(Ne).slice(0,ne.size)}function k(ne,xe,Te,Ae,Ce){var Ne=I;if(ne===I){if(xe!==0)throw new Error("DIFAT chain shorter than expected")}else if(ne!==-1){var Ue=Te[ne],je=(Ae>>>2)-1;if(!Ue)return;for(var Ke=0;Ke<je&&(Ne=__readInt32LE(Ue,Ke*4))!==I;++Ke)Ce.push(Ne);xe>=1&&k(__readInt32LE(Ue,Ae-4),xe-1,Te,Ae,Ce)}}function B(ne,xe,Te,Ae,Ce){var Ne=[],Ue=[];Ce||(Ce=[]);var je=Ae-1,Ke=0,He=0;for(Ke=xe;Ke>=0;){Ce[Ke]=!0,Ne[Ne.length]=Ke,Ue.push(ne[Ke]);var ze=Te[Math.floor(Ke*4/Ae)];if(He=Ke*4&je,Ae<4+He)throw new Error("FAT boundary crossed: "+Ke+" 4 "+Ae);if(!ne[ze])break;Ke=__readInt32LE(ne[ze],He)}return{nodes:Ne,data:__toBuffer([Ue])}}function D(ne,xe,Te,Ae){var Ce=ne.length,Ne=[],Ue=[],je=[],Ke=[],He=Ae-1,ze=0,Ye=0,Qe=0,st=0;for(ze=0;ze<Ce;++ze)if(je=[],Qe=ze+xe,Qe>=Ce&&(Qe-=Ce),!Ue[Qe]){Ke=[];var Ze=[];for(Ye=Qe;Ye>=0;){Ze[Ye]=!0,Ue[Ye]=!0,je[je.length]=Ye,Ke.push(ne[Ye]);var et=Te[Math.floor(Ye*4/Ae)];if(st=Ye*4&He,Ae<4+st)throw new Error("FAT boundary crossed: "+Ye+" 4 "+Ae);if(!ne[et]||(Ye=__readInt32LE(ne[et],st),Ze[Ye]))break}Ne[Qe]={nodes:je,data:__toBuffer([Ke])}}return Ne}function q(ne,xe,Te,Ae,Ce,Ne,Ue,je){for(var Ke=0,He=Ae.length?2:0,ze=xe[ne].data,Ye=0,Qe=0,st;Ye<ze.length;Ye+=128){var Ze=ze.slice(Ye,Ye+128);prep_blob(Ze,64),Qe=Ze.read_shift(2),st=__utf16le(Ze,0,Qe-He),Ae.push(st);var et={name:st,type:Ze.read_shift(1),color:Ze.read_shift(1),L:Ze.read_shift(4,"i"),R:Ze.read_shift(4,"i"),C:Ze.read_shift(4,"i"),clsid:Ze.read_shift(16),state:Ze.read_shift(4,"i"),start:0,size:0},vt=Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2);vt!==0&&(et.ct=j(Ze,Ze.l-8));var yt=Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2)+Ze.read_shift(2);yt!==0&&(et.mt=j(Ze,Ze.l-8)),et.start=Ze.read_shift(4,"i"),et.size=Ze.read_shift(4,"i"),et.size<0&&et.start<0&&(et.size=et.type=0,et.start=I,et.name=""),et.type===5?(Ke=et.start,Ce>0&&Ke!==I&&(xe[Ke].name="!StreamData")):et.size>=4096?(et.storage="fat",xe[et.start]===void 0&&(xe[et.start]=B(Te,et.start,xe.fat_addrs,xe.ssz)),xe[et.start].name=et.name,et.content=xe[et.start].data.slice(0,et.size)):(et.storage="minifat",et.size<0?et.size=0:Ke!==I&&et.start!==I&&xe[Ke]&&(et.content=C(et,xe[Ke].data,(xe[je]||{}).data))),et.content&&prep_blob(et.content,0),Ne[st]=et,Ue.push(et)}}function j(ne,xe){return new Date((__readUInt32LE(ne,xe+4)/1e7*Math.pow(2,32)+__readUInt32LE(ne,xe)/1e7-11644473600)*1e3)}function J(ne,xe){return y(),b(m.readFileSync(ne),xe)}function Y(ne,xe){var Te=xe&&xe.type;switch(Te||has_buf&&Buffer.isBuffer(ne)&&(Te="buffer"),Te||"base64"){case"file":return J(ne,xe);case"base64":return b(s2a(Base64_decode(ne)),xe);case"binary":return b(s2a(ne),xe)}return b(ne,xe)}function L(ne,xe){var Te=xe||{},Ae=Te.root||"Root Entry";if(ne.FullPaths||(ne.FullPaths=[]),ne.FileIndex||(ne.FileIndex=[]),ne.FullPaths.length!==ne.FileIndex.length)throw new Error("inconsistent CFB structure");ne.FullPaths.length===0&&(ne.FullPaths[0]=Ae+"/",ne.FileIndex[0]={name:Ae,type:5}),Te.CLSID&&(ne.FileIndex[0].clsid=Te.CLSID),Z(ne)}function Z(ne){var xe="Sh33tJ5";if(!CFB.find(ne,"/"+xe)){var Te=new_buf(4);Te[0]=55,Te[1]=Te[3]=50,Te[2]=54,ne.FileIndex.push({name:xe,type:2,content:Te,size:4,L:69,R:69,C:69}),ne.FullPaths.push(ne.FullPaths[0]+xe),Q(ne)}}function Q(ne,xe){L(ne);for(var Te=!1,Ae=!1,Ce=ne.FullPaths.length-1;Ce>=0;--Ce){var Ne=ne.FileIndex[Ce];switch(Ne.type){case 0:Ae?Te=!0:(ne.FileIndex.pop(),ne.FullPaths.pop());break;case 1:case 2:case 5:Ae=!0,isNaN(Ne.R*Ne.L*Ne.C)&&(Te=!0),Ne.R>-1&&Ne.L>-1&&Ne.R==Ne.L&&(Te=!0);break;default:Te=!0;break}}if(!(!Te&&!xe)){var Ue=new Date(1987,1,19),je=0,Ke=Object.create?Object.create(null):{},He=[];for(Ce=0;Ce<ne.FullPaths.length;++Ce)Ke[ne.FullPaths[Ce]]=!0,ne.FileIndex[Ce].type!==0&&He.push([ne.FullPaths[Ce],ne.FileIndex[Ce]]);for(Ce=0;Ce<He.length;++Ce){var ze=a(He[Ce][0]);for(Ae=Ke[ze];!Ae;){for(;a(ze)&&!Ke[a(ze)];)ze=a(ze);He.push([ze,{name:o(ze).replace("/",""),type:1,clsid:M,ct:Ue,mt:Ue,content:null}]),Ke[ze]=!0,ze=a(He[Ce][0]),Ae=Ke[ze]}}for(He.sort(function(st,Ze){return n(st[0],Ze[0])}),ne.FullPaths=[],ne.FileIndex=[],Ce=0;Ce<He.length;++Ce)ne.FullPaths[Ce]=He[Ce][0],ne.FileIndex[Ce]=He[Ce][1];for(Ce=0;Ce<He.length;++Ce){var Ye=ne.FileIndex[Ce],Qe=ne.FullPaths[Ce];if(Ye.name=o(Qe).replace("/",""),Ye.L=Ye.R=Ye.C=-(Ye.color=1),Ye.size=Ye.content?Ye.content.length:0,Ye.start=0,Ye.clsid=Ye.clsid||M,Ce===0)Ye.C=He.length>1?1:-1,Ye.size=0,Ye.type=5;else if(Qe.slice(-1)=="/"){for(je=Ce+1;je<He.length&&a(ne.FullPaths[je])!=Qe;++je);for(Ye.C=je>=He.length?-1:je,je=Ce+1;je<He.length&&a(ne.FullPaths[je])!=a(Qe);++je);Ye.R=je>=He.length?-1:je,Ye.type=1}else a(ne.FullPaths[Ce+1]||"")==a(Qe)&&(Ye.R=Ce+1),Ye.type=2}}}function oe(ne,xe){var Te=xe||{};if(Te.fileType=="mad")return mt(ne,Te);switch(Q(ne),Te.fileType){case"zip":return ht(ne,Te)}var Ae=function(st){for(var Ze=0,et=0,vt=0;vt<st.FileIndex.length;++vt){var yt=st.FileIndex[vt];if(yt.content){var wt=yt.content.length;wt>0&&(wt<4096?Ze+=wt+63>>6:et+=wt+511>>9)}}for(var bt=st.FullPaths.length+3>>2,$t=Ze+7>>3,At=Ze+127>>7,Et=$t+et+bt+At,Xe=Et+127>>7,Je=Xe<=109?0:Math.ceil((Xe-109)/127);Et+Xe+Je+127>>7>Xe;)Je=++Xe<=109?0:Math.ceil((Xe-109)/127);var lt=[1,Je,Xe,At,bt,et,Ze,0];return st.FileIndex[0].size=Ze<<6,lt[7]=(st.FileIndex[0].start=lt[0]+lt[1]+lt[2]+lt[3]+lt[4]+lt[5])+(lt[6]+7>>3),lt}(ne),Ce=new_buf(Ae[7]<<9),Ne=0,Ue=0;{for(Ne=0;Ne<8;++Ne)Ce.write_shift(1,T[Ne]);for(Ne=0;Ne<8;++Ne)Ce.write_shift(2,0);for(Ce.write_shift(2,62),Ce.write_shift(2,3),Ce.write_shift(2,65534),Ce.write_shift(2,9),Ce.write_shift(2,6),Ne=0;Ne<3;++Ne)Ce.write_shift(2,0);for(Ce.write_shift(4,0),Ce.write_shift(4,Ae[2]),Ce.write_shift(4,Ae[0]+Ae[1]+Ae[2]+Ae[3]-1),Ce.write_shift(4,0),Ce.write_shift(4,1<<12),Ce.write_shift(4,Ae[3]?Ae[0]+Ae[1]+Ae[2]-1:I),Ce.write_shift(4,Ae[3]),Ce.write_shift(-4,Ae[1]?Ae[0]-1:I),Ce.write_shift(4,Ae[1]),Ne=0;Ne<109;++Ne)Ce.write_shift(-4,Ne<Ae[2]?Ae[1]+Ne:-1)}if(Ae[1])for(Ue=0;Ue<Ae[1];++Ue){for(;Ne<236+Ue*127;++Ne)Ce.write_shift(-4,Ne<Ae[2]?Ae[1]+Ne:-1);Ce.write_shift(-4,Ue===Ae[1]-1?I:Ue+1)}var je=function(st){for(Ue+=st;Ne<Ue-1;++Ne)Ce.write_shift(-4,Ne+1);st&&(++Ne,Ce.write_shift(-4,I))};for(Ue=Ne=0,Ue+=Ae[1];Ne<Ue;++Ne)Ce.write_shift(-4,O.DIFSECT);for(Ue+=Ae[2];Ne<Ue;++Ne)Ce.write_shift(-4,O.FATSECT);je(Ae[3]),je(Ae[4]);for(var Ke=0,He=0,ze=ne.FileIndex[0];Ke<ne.FileIndex.length;++Ke)ze=ne.FileIndex[Ke],ze.content&&(He=ze.content.length,!(He<4096)&&(ze.start=Ue,je(He+511>>9)));for(je(Ae[6]+7>>3);Ce.l&511;)Ce.write_shift(-4,O.ENDOFCHAIN);for(Ue=Ne=0,Ke=0;Ke<ne.FileIndex.length;++Ke)ze=ne.FileIndex[Ke],ze.content&&(He=ze.content.length,!(!He||He>=4096)&&(ze.start=Ue,je(He+63>>6)));for(;Ce.l&511;)Ce.write_shift(-4,O.ENDOFCHAIN);for(Ne=0;Ne<Ae[4]<<2;++Ne){var Ye=ne.FullPaths[Ne];if(!Ye||Ye.length===0){for(Ke=0;Ke<17;++Ke)Ce.write_shift(4,0);for(Ke=0;Ke<3;++Ke)Ce.write_shift(4,-1);for(Ke=0;Ke<12;++Ke)Ce.write_shift(4,0);continue}ze=ne.FileIndex[Ne],Ne===0&&(ze.start=ze.size?ze.start-1:I);var Qe=Ne===0&&Te.root||ze.name;if(Qe.length>32&&(console.error("Name "+Qe+" will be truncated to "+Qe.slice(0,32)),Qe=Qe.slice(0,32)),He=2*(Qe.length+1),Ce.write_shift(64,Qe,"utf16le"),Ce.write_shift(2,He),Ce.write_shift(1,ze.type),Ce.write_shift(1,ze.color),Ce.write_shift(-4,ze.L),Ce.write_shift(-4,ze.R),Ce.write_shift(-4,ze.C),ze.clsid)Ce.write_shift(16,ze.clsid,"hex");else for(Ke=0;Ke<4;++Ke)Ce.write_shift(4,0);Ce.write_shift(4,ze.state||0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,ze.start),Ce.write_shift(4,ze.size),Ce.write_shift(4,0)}for(Ne=1;Ne<ne.FileIndex.length;++Ne)if(ze=ne.FileIndex[Ne],ze.size>=4096)if(Ce.l=ze.start+1<<9,has_buf&&Buffer.isBuffer(ze.content))ze.content.copy(Ce,Ce.l,0,ze.size),Ce.l+=ze.size+511&-512;else{for(Ke=0;Ke<ze.size;++Ke)Ce.write_shift(1,ze.content[Ke]);for(;Ke&511;++Ke)Ce.write_shift(1,0)}for(Ne=1;Ne<ne.FileIndex.length;++Ne)if(ze=ne.FileIndex[Ne],ze.size>0&&ze.size<4096)if(has_buf&&Buffer.isBuffer(ze.content))ze.content.copy(Ce,Ce.l,0,ze.size),Ce.l+=ze.size+63&-64;else{for(Ke=0;Ke<ze.size;++Ke)Ce.write_shift(1,ze.content[Ke]);for(;Ke&63;++Ke)Ce.write_shift(1,0)}if(has_buf)Ce.l=Ce.length;else for(;Ce.l<Ce.length;)Ce.write_shift(1,0);return Ce}function ae(ne,xe){var Te=ne.FullPaths.map(function(Ke){return Ke.toUpperCase()}),Ae=Te.map(function(Ke){var He=Ke.split("/");return He[He.length-(Ke.slice(-1)=="/"?2:1)]}),Ce=!1;xe.charCodeAt(0)===47?(Ce=!0,xe=Te[0].slice(0,-1)+xe):Ce=xe.indexOf("/")!==-1;var Ne=xe.toUpperCase(),Ue=Ce===!0?Te.indexOf(Ne):Ae.indexOf(Ne);if(Ue!==-1)return ne.FileIndex[Ue];var je=!Ne.match(chr1);for(Ne=Ne.replace(chr0,""),je&&(Ne=Ne.replace(chr1,"!")),Ue=0;Ue<Te.length;++Ue)if((je?Te[Ue].replace(chr1,"!"):Te[Ue]).replace(chr0,"")==Ne||(je?Ae[Ue].replace(chr1,"!"):Ae[Ue]).replace(chr0,"")==Ne)return ne.FileIndex[Ue];return null}var U=64,I=-2,x="d0cf11e0a1b11ae1",T=[208,207,17,224,161,177,26,225],M="00000000000000000000000000000000",O={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:I,FREESECT:-1,HEADER_SIGNATURE:x,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:M,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function z(ne,xe,Te){y();var Ae=oe(ne,Te);m.writeFileSync(xe,Ae)}function X(ne){for(var xe=new Array(ne.length),Te=0;Te<ne.length;++Te)xe[Te]=String.fromCharCode(ne[Te]);return xe.join("")}function H(ne,xe){var Te=oe(ne,xe);switch(xe&&xe.type||"buffer"){case"file":return y(),m.writeFileSync(xe.filename,Te),Te;case"binary":return typeof Te=="string"?Te:X(Te);case"base64":return Base64_encode(typeof Te=="string"?Te:X(Te));case"buffer":if(has_buf)return Buffer.isBuffer(Te)?Te:Buffer_from(Te);case"array":return typeof Te=="string"?s2a(Te):Te}return Te}var P;function S(ne){try{var xe=ne.InflateRaw,Te=new xe;if(Te._processChunk(new Uint8Array([3,0]),Te._finishFlushFlag),Te.bytesRead)P=ne;else throw new Error("zlib does not expose bytesRead")}catch(Ae){console.error("cannot use native zlib: "+(Ae.message||Ae))}}function F(ne,xe){if(!P)return rt(ne,xe);var Te=P.InflateRaw,Ae=new Te,Ce=Ae._processChunk(ne.slice(ne.l),Ae._finishFlushFlag);return ne.l+=Ae.bytesRead,Ce}function ue(ne){return P?P.deflateRawSync(ne):we(ne)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],fe=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],le=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ce(ne){var xe=(ne<<1|ne<<11)&139536|(ne<<5|ne<<15)&558144;return(xe>>16|xe>>8|xe)&255}for(var pe=typeof Uint8Array<"u",se=pe?new Uint8Array(1<<8):[],de=0;de<1<<8;++de)se[de]=ce(de);function re(ne,xe){var Te=se[ne&255];return xe<=8?Te>>>8-xe:(Te=Te<<8|se[ne>>8&255],xe<=16?Te>>>16-xe:(Te=Te<<8|se[ne>>16&255],Te>>>24-xe))}function me(ne,xe){var Te=xe&7,Ae=xe>>>3;return(ne[Ae]|(Te<=6?0:ne[Ae+1]<<8))>>>Te&3}function te(ne,xe){var Te=xe&7,Ae=xe>>>3;return(ne[Ae]|(Te<=5?0:ne[Ae+1]<<8))>>>Te&7}function ve(ne,xe){var Te=xe&7,Ae=xe>>>3;return(ne[Ae]|(Te<=4?0:ne[Ae+1]<<8))>>>Te&15}function Se(ne,xe){var Te=xe&7,Ae=xe>>>3;return(ne[Ae]|(Te<=3?0:ne[Ae+1]<<8))>>>Te&31}function be(ne,xe){var Te=xe&7,Ae=xe>>>3;return(ne[Ae]|(Te<=1?0:ne[Ae+1]<<8))>>>Te&127}function _e(ne,xe,Te){var Ae=xe&7,Ce=xe>>>3,Ne=(1<<Te)-1,Ue=ne[Ce]>>>Ae;return Te<8-Ae||(Ue|=ne[Ce+1]<<8-Ae,Te<16-Ae)||(Ue|=ne[Ce+2]<<16-Ae,Te<24-Ae)||(Ue|=ne[Ce+3]<<24-Ae),Ue&Ne}function ye(ne,xe,Te){var Ae=xe&7,Ce=xe>>>3;return Ae<=5?ne[Ce]|=(Te&7)<<Ae:(ne[Ce]|=Te<<Ae&255,ne[Ce+1]=(Te&7)>>8-Ae),xe+3}function $e(ne,xe,Te){var Ae=xe&7,Ce=xe>>>3;return Te=(Te&1)<<Ae,ne[Ce]|=Te,xe+1}function Ie(ne,xe,Te){var Ae=xe&7,Ce=xe>>>3;return Te<<=Ae,ne[Ce]|=Te&255,Te>>>=8,ne[Ce+1]=Te,xe+8}function Be(ne,xe,Te){var Ae=xe&7,Ce=xe>>>3;return Te<<=Ae,ne[Ce]|=Te&255,Te>>>=8,ne[Ce+1]=Te&255,ne[Ce+2]=Te>>>8,xe+16}function Me(ne,xe){var Te=ne.length,Ae=2*Te>xe?2*Te:xe+5,Ce=0;if(Te>=xe)return ne;if(has_buf){var Ne=new_unsafe_buf(Ae);if(ne.copy)ne.copy(Ne);else for(;Ce<ne.length;++Ce)Ne[Ce]=ne[Ce];return Ne}else if(pe){var Ue=new Uint8Array(Ae);if(Ue.set)Ue.set(ne);else for(;Ce<Te;++Ce)Ue[Ce]=ne[Ce];return Ue}return ne.length=Ae,ne}function Fe(ne){for(var xe=new Array(ne),Te=0;Te<ne;++Te)xe[Te]=0;return xe}function Ve(ne,xe,Te){var Ae=1,Ce=0,Ne=0,Ue=0,je=0,Ke=ne.length,He=pe?new Uint16Array(32):Fe(32);for(Ne=0;Ne<32;++Ne)He[Ne]=0;for(Ne=Ke;Ne<Te;++Ne)ne[Ne]=0;Ke=ne.length;var ze=pe?new Uint16Array(Ke):Fe(Ke);for(Ne=0;Ne<Ke;++Ne)He[Ce=ne[Ne]]++,Ae<Ce&&(Ae=Ce),ze[Ne]=0;for(He[0]=0,Ne=1;Ne<=Ae;++Ne)He[Ne+16]=je=je+He[Ne-1]<<1;for(Ne=0;Ne<Ke;++Ne)je=ne[Ne],je!=0&&(ze[Ne]=He[je+16]++);var Ye=0;for(Ne=0;Ne<Ke;++Ne)if(Ye=ne[Ne],Ye!=0)for(je=re(ze[Ne],Ae)>>Ae-Ye,Ue=(1<<Ae+4-Ye)-1;Ue>=0;--Ue)xe[je|Ue<<Ye]=Ye&15|Ne<<4;return Ae}var Oe=pe?new Uint16Array(512):Fe(512),ge=pe?new Uint16Array(32):Fe(32);if(!pe){for(var ie=0;ie<512;++ie)Oe[ie]=0;for(ie=0;ie<32;++ie)ge[ie]=0}(function(){for(var ne=[],xe=0;xe<32;xe++)ne.push(5);Ve(ne,ge,32);var Te=[];for(xe=0;xe<=143;xe++)Te.push(8);for(;xe<=255;xe++)Te.push(9);for(;xe<=279;xe++)Te.push(7);for(;xe<=287;xe++)Te.push(8);Ve(Te,Oe,288)})();var he=function(){for(var xe=pe?new Uint8Array(32768):[],Te=0,Ae=0;Te<le.length-1;++Te)for(;Ae<le[Te+1];++Ae)xe[Ae]=Te;for(;Ae<32768;++Ae)xe[Ae]=29;var Ce=pe?new Uint8Array(259):[];for(Te=0,Ae=0;Te<fe.length-1;++Te)for(;Ae<fe[Te+1];++Ae)Ce[Ae]=Te;function Ne(je,Ke){for(var He=0;He<je.length;){var ze=Math.min(65535,je.length-He),Ye=He+ze==je.length;for(Ke.write_shift(1,+Ye),Ke.write_shift(2,ze),Ke.write_shift(2,~ze&65535);ze-- >0;)Ke[Ke.l++]=je[He++]}return Ke.l}function Ue(je,Ke){for(var He=0,ze=0,Ye=pe?new Uint16Array(32768):[];ze<je.length;){var Qe=Math.min(65535,je.length-ze);if(Qe<10){for(He=ye(Ke,He,+(ze+Qe==je.length)),He&7&&(He+=8-(He&7)),Ke.l=He/8|0,Ke.write_shift(2,Qe),Ke.write_shift(2,~Qe&65535);Qe-- >0;)Ke[Ke.l++]=je[ze++];He=Ke.l*8;continue}He=ye(Ke,He,+(ze+Qe==je.length)+2);for(var st=0;Qe-- >0;){var Ze=je[ze];st=(st<<5^Ze)&32767;var et=-1,vt=0;if((et=Ye[st])&&(et|=ze&-32768,et>ze&&(et-=32768),et<ze))for(;je[et+vt]==je[ze+vt]&&vt<250;)++vt;if(vt>2){Ze=Ce[vt],Ze<=22?He=Ie(Ke,He,se[Ze+1]>>1)-1:(Ie(Ke,He,3),He+=5,Ie(Ke,He,se[Ze-23]>>5),He+=3);var yt=Ze<8?0:Ze-4>>2;yt>0&&(Be(Ke,He,vt-fe[Ze]),He+=yt),Ze=xe[ze-et],He=Ie(Ke,He,se[Ze]>>3),He-=3;var wt=Ze<4?0:Ze-2>>1;wt>0&&(Be(Ke,He,ze-et-le[Ze]),He+=wt);for(var bt=0;bt<vt;++bt)Ye[st]=ze&32767,st=(st<<5^je[ze])&32767,++ze;Qe-=vt-1}else Ze<=143?Ze=Ze+48:He=$e(Ke,He,1),He=Ie(Ke,He,se[Ze]),Ye[st]=ze&32767,++ze}He=Ie(Ke,He,0)-1}return Ke.l=(He+7)/8|0,Ke.l}return function(Ke,He){return Ke.length<8?Ne(Ke,He):Ue(Ke,He)}}();function we(ne){var xe=new_buf(50+Math.floor(ne.length*1.1)),Te=he(ne,xe);return xe.slice(0,Te)}var Re=pe?new Uint16Array(32768):Fe(32768),De=pe?new Uint16Array(32768):Fe(32768),Le=pe?new Uint16Array(128):Fe(128),tt=1,We=1;function Ge(ne,xe){var Te=Se(ne,xe)+257;xe+=5;var Ae=Se(ne,xe)+1;xe+=5;var Ce=ve(ne,xe)+4;xe+=4;for(var Ne=0,Ue=pe?new Uint8Array(19):Fe(19),je=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ke=1,He=pe?new Uint8Array(8):Fe(8),ze=pe?new Uint8Array(8):Fe(8),Ye=Ue.length,Qe=0;Qe<Ce;++Qe)Ue[ee[Qe]]=Ne=te(ne,xe),Ke<Ne&&(Ke=Ne),He[Ne]++,xe+=3;var st=0;for(He[0]=0,Qe=1;Qe<=Ke;++Qe)ze[Qe]=st=st+He[Qe-1]<<1;for(Qe=0;Qe<Ye;++Qe)(st=Ue[Qe])!=0&&(je[Qe]=ze[st]++);var Ze=0;for(Qe=0;Qe<Ye;++Qe)if(Ze=Ue[Qe],Ze!=0){st=se[je[Qe]]>>8-Ze;for(var et=(1<<7-Ze)-1;et>=0;--et)Le[st|et<<Ze]=Ze&7|Qe<<3}var vt=[];for(Ke=1;vt.length<Te+Ae;)switch(st=Le[be(ne,xe)],xe+=st&7,st>>>=3){case 16:for(Ne=3+me(ne,xe),xe+=2,st=vt[vt.length-1];Ne-- >0;)vt.push(st);break;case 17:for(Ne=3+te(ne,xe),xe+=3;Ne-- >0;)vt.push(0);break;case 18:for(Ne=11+be(ne,xe),xe+=7;Ne-- >0;)vt.push(0);break;default:vt.push(st),Ke<st&&(Ke=st);break}var yt=vt.slice(0,Te),wt=vt.slice(Te);for(Qe=Te;Qe<286;++Qe)yt[Qe]=0;for(Qe=Ae;Qe<30;++Qe)wt[Qe]=0;return tt=Ve(yt,Re,286),We=Ve(wt,De,30),xe}function _t(ne,xe){if(ne[0]==3&&!(ne[1]&3))return[new_raw_buf(xe),2];for(var Te=0,Ae=0,Ce=new_unsafe_buf(xe||1<<18),Ne=0,Ue=Ce.length>>>0,je=0,Ke=0;!(Ae&1);){if(Ae=te(ne,Te),Te+=3,Ae>>>1)Ae>>1==1?(je=9,Ke=5):(Te=Ge(ne,Te),je=tt,Ke=We);else{Te&7&&(Te+=8-(Te&7));var He=ne[Te>>>3]|ne[(Te>>>3)+1]<<8;if(Te+=32,He>0)for(!xe&&Ue<Ne+He&&(Ce=Me(Ce,Ne+He),Ue=Ce.length);He-- >0;)Ce[Ne++]=ne[Te>>>3],Te+=8;continue}for(;;){!xe&&Ue<Ne+32767&&(Ce=Me(Ce,Ne+32767),Ue=Ce.length);var ze=_e(ne,Te,je),Ye=Ae>>>1==1?Oe[ze]:Re[ze];if(Te+=Ye&15,Ye>>>=4,!(Ye>>>8&255))Ce[Ne++]=Ye;else{if(Ye==256)break;Ye-=257;var Qe=Ye<8?0:Ye-4>>2;Qe>5&&(Qe=0);var st=Ne+fe[Ye];Qe>0&&(st+=_e(ne,Te,Qe),Te+=Qe),ze=_e(ne,Te,Ke),Ye=Ae>>>1==1?ge[ze]:De[ze],Te+=Ye&15,Ye>>>=4;var Ze=Ye<4?0:Ye-2>>1,et=le[Ye];for(Ze>0&&(et+=_e(ne,Te,Ze),Te+=Ze),!xe&&Ue<st&&(Ce=Me(Ce,st+100),Ue=Ce.length);Ne<st;)Ce[Ne]=Ce[Ne-et],++Ne}}}return xe?[Ce,Te+7>>>3]:[Ce.slice(0,Ne),Te+7>>>3]}function rt(ne,xe){var Te=ne.slice(ne.l||0),Ae=_t(Te,xe);return ne.l+=Ae[1],Ae[0]}function ot(ne,xe){if(ne)typeof console<"u"&&console.error(xe);else throw new Error(xe)}function Rt(ne,xe){var Te=ne;prep_blob(Te,0);var Ae=[],Ce=[],Ne={FileIndex:Ae,FullPaths:Ce};L(Ne,{root:xe.root});for(var Ue=Te.length-4;(Te[Ue]!=80||Te[Ue+1]!=75||Te[Ue+2]!=5||Te[Ue+3]!=6)&&Ue>=0;)--Ue;Te.l=Ue+4,Te.l+=4;var je=Te.read_shift(2);Te.l+=6;var Ke=Te.read_shift(4);for(Te.l=Ke,Ue=0;Ue<je;++Ue){Te.l+=20;var He=Te.read_shift(4),ze=Te.read_shift(4),Ye=Te.read_shift(2),Qe=Te.read_shift(2),st=Te.read_shift(2);Te.l+=8;var Ze=Te.read_shift(4),et=d(Te.slice(Te.l+Ye,Te.l+Ye+Qe));Te.l+=Ye+Qe+st;var vt=Te.l;Te.l=Ze+4,et&&et[1]&&((et[1]||{}).usz&&(ze=et[1].usz),(et[1]||{}).csz&&(He=et[1].csz)),xt(Te,He,ze,Ne,et),Te.l=vt}return Ne}function xt(ne,xe,Te,Ae,Ce){ne.l+=2;var Ne=ne.read_shift(2),Ue=ne.read_shift(2),je=u(ne);if(Ne&8257)throw new Error("Unsupported ZIP encryption");for(var Ke=ne.read_shift(4),He=ne.read_shift(4),ze=ne.read_shift(4),Ye=ne.read_shift(2),Qe=ne.read_shift(2),st="",Ze=0;Ze<Ye;++Ze)st+=String.fromCharCode(ne[ne.l++]);if(Qe){var et=d(ne.slice(ne.l,ne.l+Qe));(et[21589]||{}).mt&&(je=et[21589].mt),(et[1]||{}).usz&&(ze=et[1].usz),(et[1]||{}).csz&&(He=et[1].csz),Ce&&((Ce[21589]||{}).mt&&(je=Ce[21589].mt),(Ce[1]||{}).usz&&(ze=et[1].usz),(Ce[1]||{}).csz&&(He=et[1].csz))}ne.l+=Qe;var vt=ne.slice(ne.l,ne.l+He);switch(Ue){case 8:vt=F(ne,ze);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ue)}var yt=!1;Ne&8&&(Ke=ne.read_shift(4),Ke==134695760&&(Ke=ne.read_shift(4),yt=!0),He=ne.read_shift(4),ze=ne.read_shift(4)),He!=xe&&ot(yt,"Bad compressed size: "+xe+" != "+He),ze!=Te&&ot(yt,"Bad uncompressed size: "+Te+" != "+ze),Bt(Ae,st,vt,{unsafe:!0,mt:je})}function ht(ne,xe){var Te=xe||{},Ae=[],Ce=[],Ne=new_buf(1),Ue=Te.compression?8:0,je=0,Ke=0,He=0,ze=0,Ye=0,Qe=ne.FullPaths[0],st=Qe,Ze=ne.FileIndex[0],et=[],vt=0;for(Ke=1;Ke<ne.FullPaths.length;++Ke)if(st=ne.FullPaths[Ke].slice(Qe.length),Ze=ne.FileIndex[Ke],!(!Ze.size||!Ze.content||st=="Sh33tJ5")){var yt=ze,wt=new_buf(st.length);for(He=0;He<st.length;++He)wt.write_shift(1,st.charCodeAt(He)&127);wt=wt.slice(0,wt.l),et[Ye]=typeof Ze.content=="string"?CRC32.bstr(Ze.content,0):CRC32.buf(Ze.content,0);var bt=typeof Ze.content=="string"?s2a(Ze.content):Ze.content;Ue==8&&(bt=ue(bt)),Ne=new_buf(30),Ne.write_shift(4,67324752),Ne.write_shift(2,20),Ne.write_shift(2,je),Ne.write_shift(2,Ue),Ze.mt?l(Ne,Ze.mt):Ne.write_shift(4,0),Ne.write_shift(-4,et[Ye]),Ne.write_shift(4,bt.length),Ne.write_shift(4,Ze.content.length),Ne.write_shift(2,wt.length),Ne.write_shift(2,0),ze+=Ne.length,Ae.push(Ne),ze+=wt.length,Ae.push(wt),ze+=bt.length,Ae.push(bt),Ne=new_buf(46),Ne.write_shift(4,33639248),Ne.write_shift(2,0),Ne.write_shift(2,20),Ne.write_shift(2,je),Ne.write_shift(2,Ue),Ne.write_shift(4,0),Ne.write_shift(-4,et[Ye]),Ne.write_shift(4,bt.length),Ne.write_shift(4,Ze.content.length),Ne.write_shift(2,wt.length),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(4,0),Ne.write_shift(4,yt),vt+=Ne.l,Ce.push(Ne),vt+=wt.length,Ce.push(wt),++Ye}return Ne=new_buf(22),Ne.write_shift(4,101010256),Ne.write_shift(2,0),Ne.write_shift(2,0),Ne.write_shift(2,Ye),Ne.write_shift(2,Ye),Ne.write_shift(4,vt),Ne.write_shift(4,ze),Ne.write_shift(2,0),bconcat([bconcat(Ae),bconcat(Ce),Ne])}var Tt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function dt(ne,xe){if(ne.ctype)return ne.ctype;var Te=ne.name||"",Ae=Te.match(/\.([^\.]+)$/);return Ae&&Tt[Ae[1]]||xe&&(Ae=(Te=xe).match(/[\.\\]([^\.\\])+$/),Ae&&Tt[Ae[1]])?Tt[Ae[1]]:"application/octet-stream"}function it(ne){for(var xe=Base64_encode(ne),Te=[],Ae=0;Ae<xe.length;Ae+=76)Te.push(xe.slice(Ae,Ae+76));return Te.join(`\r
`)+`\r
`}function Ct(ne){var xe=ne.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(He){var ze=He.charCodeAt(0).toString(16).toUpperCase();return"="+(ze.length==1?"0"+ze:ze)});xe=xe.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),xe.charAt(0)==`
`&&(xe="=0D"+xe.slice(1)),xe=xe.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Te=[],Ae=xe.split(`\r
`),Ce=0;Ce<Ae.length;++Ce){var Ne=Ae[Ce];if(Ne.length==0){Te.push("");continue}for(var Ue=0;Ue<Ne.length;){var je=76,Ke=Ne.slice(Ue,Ue+je);Ke.charAt(je-1)=="="?je--:Ke.charAt(je-2)=="="?je-=2:Ke.charAt(je-3)=="="&&(je-=3),Ke=Ne.slice(Ue,Ue+je),Ue+=je,Ue<Ne.length&&(Ke+="="),Te.push(Ke)}}return Te.join(`\r
`)}function pt(ne){for(var xe=[],Te=0;Te<ne.length;++Te){for(var Ae=ne[Te];Te<=ne.length&&Ae.charAt(Ae.length-1)=="=";)Ae=Ae.slice(0,Ae.length-1)+ne[++Te];xe.push(Ae)}for(var Ce=0;Ce<xe.length;++Ce)xe[Ce]=xe[Ce].replace(/[=][0-9A-Fa-f]{2}/g,function(Ne){return String.fromCharCode(parseInt(Ne.slice(1),16))});return s2a(xe.join(`\r
`))}function at(ne,xe,Te){for(var Ae="",Ce="",Ne="",Ue,je=0;je<10;++je){var Ke=xe[je];if(!Ke||Ke.match(/^\s*$/))break;var He=Ke.match(/^(.*?):\s*([^\s].*)$/);if(He)switch(He[1].toLowerCase()){case"content-location":Ae=He[2].trim();break;case"content-type":Ne=He[2].trim();break;case"content-transfer-encoding":Ce=He[2].trim();break}}switch(++je,Ce.toLowerCase()){case"base64":Ue=s2a(Base64_decode(xe.slice(je).join("")));break;case"quoted-printable":Ue=pt(xe.slice(je));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ce)}var ze=Bt(ne,Ae.slice(Te.length),Ue,{unsafe:!0});Ne&&(ze.ctype=Ne)}function kt(ne,xe){if(X(ne.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Te=xe&&xe.root||"",Ae=(has_buf&&Buffer.isBuffer(ne)?ne.toString("binary"):X(ne)).split(`\r
`),Ce=0,Ne="";for(Ce=0;Ce<Ae.length;++Ce)if(Ne=Ae[Ce],!!/^Content-Location:/i.test(Ne)&&(Ne=Ne.slice(Ne.indexOf("file")),Te||(Te=Ne.slice(0,Ne.lastIndexOf("/")+1)),Ne.slice(0,Te.length)!=Te))for(;Te.length>0&&(Te=Te.slice(0,Te.length-1),Te=Te.slice(0,Te.lastIndexOf("/")+1),Ne.slice(0,Te.length)!=Te););var Ue=(Ae[1]||"").match(/boundary="(.*?)"/);if(!Ue)throw new Error("MAD cannot find boundary");var je="--"+(Ue[1]||""),Ke=[],He=[],ze={FileIndex:Ke,FullPaths:He};L(ze);var Ye,Qe=0;for(Ce=0;Ce<Ae.length;++Ce){var st=Ae[Ce];st!==je&&st!==je+"--"||(Qe++&&at(ze,Ae.slice(Ye,Ce),Te),Ye=Ce)}return ze}function mt(ne,xe){var Te=xe||{},Ae=Te.boundary||"SheetJS";Ae="------="+Ae;for(var Ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ae.slice(2)+'"',"","",""],Ne=ne.FullPaths[0],Ue=Ne,je=ne.FileIndex[0],Ke=1;Ke<ne.FullPaths.length;++Ke)if(Ue=ne.FullPaths[Ke].slice(Ne.length),je=ne.FileIndex[Ke],!(!je.size||!je.content||Ue=="Sh33tJ5")){Ue=Ue.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(vt){return"_x"+vt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(vt){return"_u"+vt.charCodeAt(0).toString(16)+"_"});for(var He=je.content,ze=has_buf&&Buffer.isBuffer(He)?He.toString("binary"):X(He),Ye=0,Qe=Math.min(1024,ze.length),st=0,Ze=0;Ze<=Qe;++Ze)(st=ze.charCodeAt(Ze))>=32&&st<128&&++Ye;var et=Ye>=Qe*4/5;Ce.push(Ae),Ce.push("Content-Location: "+(Te.root||"file:///C:/SheetJS/")+Ue),Ce.push("Content-Transfer-Encoding: "+(et?"quoted-printable":"base64")),Ce.push("Content-Type: "+dt(je,Ue)),Ce.push(""),Ce.push(et?Ct(ze):it(ze))}return Ce.push(Ae+`--\r
`),Ce.join(`\r
`)}function nt(ne){var xe={};return L(xe,ne),xe}function Bt(ne,xe,Te,Ae){var Ce=Ae&&Ae.unsafe;Ce||L(ne);var Ne=!Ce&&CFB.find(ne,xe);if(!Ne){var Ue=ne.FullPaths[0];xe.slice(0,Ue.length)==Ue?Ue=xe:(Ue.slice(-1)!="/"&&(Ue+="/"),Ue=(Ue+xe).replace("//","/")),Ne={name:o(xe),type:2},ne.FileIndex.push(Ne),ne.FullPaths.push(Ue),Ce||CFB.utils.cfb_gc(ne)}return Ne.content=Te,Ne.size=Te?Te.length:0,Ae&&(Ae.CLSID&&(Ne.clsid=Ae.CLSID),Ae.mt&&(Ne.mt=Ae.mt),Ae.ct&&(Ne.ct=Ae.ct)),Ne}function Ee(ne,xe){L(ne);var Te=CFB.find(ne,xe);if(Te){for(var Ae=0;Ae<ne.FileIndex.length;++Ae)if(ne.FileIndex[Ae]==Te)return ne.FileIndex.splice(Ae,1),ne.FullPaths.splice(Ae,1),!0}return!1}function ke(ne,xe,Te){L(ne);var Ae=CFB.find(ne,xe);if(Ae){for(var Ce=0;Ce<ne.FileIndex.length;++Ce)if(ne.FileIndex[Ce]==Ae)return ne.FileIndex[Ce].name=o(Te),ne.FullPaths[Ce]=Te,!0}return!1}function Pe(ne){Q(ne,!0)}return e.find=ae,e.read=Y,e.parse=b,e.write=H,e.writeFile=z,e.utils={cfb_new:nt,cfb_add:Bt,cfb_del:Ee,cfb_mov:ke,cfb_gc:Pe,ReadShift,CheckField,prep_blob,bconcat,use_zlib:S,_deflateRaw:we,_inflateRaw:rt,consts:O},e}(),_fs;function set_fs(t){_fs=t}function blobify(t){return typeof t=="string"?s2ab(t):Array.isArray(t)?a2u(t):t}function write_dl(t,e,n){if(typeof _fs<"u"&&_fs.writeFileSync)return n?_fs.writeFileSync(t,e,n):_fs.writeFileSync(t,e);if(typeof Deno<"u"){if(n&&typeof e=="string")switch(n){case"utf8":e=new TextEncoder(n).encode(e);break;case"binary":e=s2ab(e);break;default:throw new Error("Unsupported encoding "+n)}return Deno.writeFileSync(t,e)}var a=n=="utf8"?utf8write(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,t);if(typeof Blob<"u"){var o=new Blob([blobify(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(o,t);if(typeof saveAs<"u")return saveAs(o,t);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var l=URL.createObjectURL(o);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),chrome.downloads.download({url:l,filename:t,saveAs:!0});var u=document.createElement("a");if(u.download!=null)return u.download=t,u.href=l,document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(l)},6e4),l}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var d=File(t);return d.open("w"),d.encoding="binary",Array.isArray(e)&&(e=a2s(e)),d.write(e),d.close(),e}catch(m){if(!m.message||!m.message.match(/onstruct/))throw m}throw new Error("cannot save file "+t)}function read_binary(t){if(typeof _fs<"u")return _fs.readFileSync(t);if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var e=File(t);e.open("r"),e.encoding="binary";var n=e.read();return e.close(),n}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+t)}function keys(t){for(var e=Object.keys(t),n=[],a=0;a<e.length;++a)Object.prototype.hasOwnProperty.call(t,e[a])&&n.push(e[a]);return n}function evert_key(t,e){for(var n=[],a=keys(t),o=0;o!==a.length;++o)n[t[a[o]][e]]==null&&(n[t[a[o]][e]]=a[o]);return n}function evert(t){for(var e=[],n=keys(t),a=0;a!==n.length;++a)e[t[n[a]]]=n[a];return e}function evert_num(t){for(var e=[],n=keys(t),a=0;a!==n.length;++a)e[t[n[a]]]=parseInt(n[a],10);return e}function evert_arr(t){for(var e=[],n=keys(t),a=0;a!==n.length;++a)e[t[n[a]]]==null&&(e[t[n[a]]]=[]),e[t[n[a]]].push(n[a]);return e}var basedate=new Date(1899,11,30,0,0,0);function datenum(t,e){var n=t.getTime();e&&(n-=1462*24*60*60*1e3);var a=basedate.getTime()+(t.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4;return(n-a)/(24*60*60*1e3)}var refdate=new Date,dnthresh=basedate.getTime()+(refdate.getTimezoneOffset()-basedate.getTimezoneOffset())*6e4,refoffset=refdate.getTimezoneOffset();function numdate(t){var e=new Date;return e.setTime(t*24*60*60*1e3+dnthresh),e.getTimezoneOffset()!==refoffset&&e.setTime(e.getTime()+(e.getTimezoneOffset()-refoffset)*6e4),e}function parse_isodur(t){var e=0,n=0,a=!1,o=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!o)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var l=1;l!=o.length;++l)if(o[l]){switch(n=1,l>3&&(a=!0),o[l].slice(o[l].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+o[l].slice(o[l].length-1));case"D":n*=24;case"H":n*=60;case"M":if(a)n*=60;else throw new Error("Unsupported ISO Duration Field: M")}e+=n*parseInt(o[l],10)}return e}var good_pd_date_1=new Date("2017-02-19T19:06:09.000Z"),good_pd_date=isNaN(good_pd_date_1.getFullYear())?new Date("2/19/17"):good_pd_date_1,good_pd=good_pd_date.getFullYear()==2017;function parseDate(t,e){var n=new Date(t);if(good_pd)return e>0?n.setTime(n.getTime()+n.getTimezoneOffset()*60*1e3):e<0&&n.setTime(n.getTime()-n.getTimezoneOffset()*60*1e3),n;if(t instanceof Date)return t;if(good_pd_date.getFullYear()==1917&&!isNaN(n.getFullYear())){var a=n.getFullYear();return t.indexOf(""+a)>-1||n.setFullYear(n.getFullYear()+100),n}var o=t.match(/\d+/g)||["2017","2","19","0","0","0"],l=new Date(+o[0],+o[1]-1,+o[2],+o[3]||0,+o[4]||0,+o[5]||0);return t.indexOf("Z")>-1&&(l=new Date(l.getTime()-l.getTimezoneOffset()*60*1e3)),l}function cc2str(t,e){if(has_buf&&Buffer.isBuffer(t)){if(e&&buf_utf16le){if(t[0]==255&&t[1]==254)return utf8write(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return utf8write(utf16beread(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(e){if(t[0]==255&&t[1]==254)return utf8write(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return utf8write(new TextDecoder("utf-16be").decode(t.slice(2)))}var n={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(l){return n[l]||l})}catch{}for(var a=[],o=0;o!=t.length;++o)a.push(String.fromCharCode(t[o]));return a.join("")}function dup(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=dup(t[n]));return e}function fill(t,e){for(var n="";n.length<e;)n+=t;return n}function fuzzynum(t){var e=Number(t);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(t))return e;var n=1,a=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return n*=100,""});return!isNaN(e=Number(a))||(a=a.replace(/[(](.*)[)]/,function(o,l){return n=-n,l}),!isNaN(e=Number(a)))?e/n:e}var FDRE1=/^(0?\d|1[0-2])(?:|:([0-5]?\d)(?:|(\.\d+)(?:|:([0-5]?\d))|:([0-5]?\d)(|\.\d+)))\s+([ap])m?$/;function fuzzytime1(t){return t[2]?t[3]?t[4]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[4],parseFloat(t[3])*1e3):new Date(1899,11,30,t[7]=="p"?12:0,+t[1],+t[2],parseFloat(t[3])*1e3):t[5]?new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],+t[5],t[6]?parseFloat(t[6])*1e3:0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),+t[2],0,0):new Date(1899,11,30,+t[1]%12+(t[7]=="p"?12:0),0,0,0)}var lower_months=["january","february","march","april","may","june","july","august","september","october","november","december"];function fuzzydate(t){var e=t.toLowerCase(),n=e.replace(/\s+/g," ").trim(),a=n.match(FDRE1);if(a)return fuzzytime1(a);var o=new Date(t),l=new Date(NaN),u=o.getYear();o.getMonth();var d=o.getDate();if(isNaN(d))return l;if(e.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(e=e.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),e.length>3&&lower_months.indexOf(e)==-1)return l}else if(e.replace(/[ap]m?/,"").match(/[a-z]/))return l;return u<0||u>8099||t.match(/[^-0-9:,\/\\]/)?l:o}var split_regex=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(n,a,o){if(t||typeof a=="string")return n.split(a);for(var l=n.split(a),u=[l[0]],d=1;d<l.length;++d)u.push(o),u.push(l[d]);return u}}();function getdatastr(t){return t?t.content&&t.type?cc2str(t.content,!0):t.data?debom(t.data):t.asNodeBuffer&&has_buf?debom(t.asNodeBuffer().toString("binary")):t.asBinary?debom(t.asBinary()):t._data&&t._data.getContent?debom(cc2str(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function getdatabin(t){if(!t)return null;if(t.data)return char_codes(t.data);if(t.asNodeBuffer&&has_buf)return t.asNodeBuffer();if(t._data&&t._data.getContent){var e=t._data.getContent();return typeof e=="string"?char_codes(e):Array.prototype.slice.call(e)}return t.content&&t.type?t.content:null}function getdata(t){return t&&t.name.slice(-4)===".bin"?getdatabin(t):getdatastr(t)}function safegetzipfile(t,e){for(var n=t.FullPaths||keys(t.files),a=e.toLowerCase().replace(/[\/]/g,"\\"),o=a.replace(/\\/g,"/"),l=0;l<n.length;++l){var u=n[l].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==u||o==u)return t.files?t.files[n[l]]:t.FileIndex[l]}return null}function getzipfile(t,e){var n=safegetzipfile(t,e);if(n==null)throw new Error("Cannot find file "+e+" in zip");return n}function getzipdata(t,e,n){if(!n)return getdata(getzipfile(t,e));if(!e)return null;try{return getzipdata(t,e)}catch{return null}}function getzipstr(t,e,n){if(!n)return getdatastr(getzipfile(t,e));if(!e)return null;try{return getzipstr(t,e)}catch{return null}}function getzipbin(t,e,n){if(!n)return getdatabin(getzipfile(t,e));if(!e)return null;try{return getzipbin(t,e)}catch{return null}}function zipentries(t){for(var e=t.FullPaths||keys(t.files),n=[],a=0;a<e.length;++a)e[a].slice(-1)!="/"&&n.push(e[a].replace(/^Root Entry[\/]/,""));return n.sort()}function zip_add_file(t,e,n){if(t.FullPaths){if(typeof n=="string"){var a;return has_buf?a=Buffer_from(n):a=utf8decode(n),CFB.utils.cfb_add(t,e,a)}CFB.utils.cfb_add(t,e,n)}else t.file(e,n)}function zip_new(){return CFB.utils.cfb_new()}function zip_read(t,e){switch(e.type){case"base64":return CFB.read(t,{type:"base64"});case"binary":return CFB.read(t,{type:"binary"});case"buffer":case"array":return CFB.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+e.type)}function resolve_path(t,e){if(t.charAt(0)=="/")return t.slice(1);var n=e.split("/");e.slice(-1)!="/"&&n.pop();for(var a=t.split("/");a.length!==0;){var o=a.shift();o===".."?n.pop():o!=="."&&n.push(o)}return n.join("/")}var XML_HEADER=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,attregexg=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,tagregex1=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,tagregex2=/<[^>]*>/g,tagregex=XML_HEADER.match(tagregex1)?tagregex1:tagregex2,nsregex=/<\w*:/,nsregex2=/<(\/?)\w+:/;function parsexmltag(t,e,n){for(var a={},o=0,l=0;o!==t.length&&!((l=t.charCodeAt(o))===32||l===10||l===13);++o);if(e||(a[0]=t.slice(0,o)),o===t.length)return a;var u=t.match(attregexg),d=0,m="",y=0,b="",_="",w=1;if(u)for(y=0;y!=u.length;++y){for(_=u[y],l=0;l!=_.length&&_.charCodeAt(l)!==61;++l);for(b=_.slice(0,l).trim();_.charCodeAt(l+1)==32;)++l;for(w=(o=_.charCodeAt(l+1))==34||o==39?1:0,m=_.slice(l+1+w,_.length-w),d=0;d!=b.length&&b.charCodeAt(d)!==58;++d);if(d===b.length)b.indexOf("_")>0&&(b=b.slice(0,b.indexOf("_"))),a[b]=m,n||(a[b.toLowerCase()]=m);else{var E=(d===5&&b.slice(0,5)==="xmlns"?"xmlns":"")+b.slice(d+1);if(a[E]&&b.slice(d-3,d)=="ext")continue;a[E]=m,n||(a[E.toLowerCase()]=m)}}return a}function strip_ns(t){return t.replace(nsregex2,"<$1")}var encodings={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},rencoding=evert(encodings),unescapexml=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,e=/_x([\da-fA-F]{4})_/ig;function n(a){var o=a+"",l=o.indexOf("<![CDATA[");if(l==-1)return o.replace(t,function(d,m){return encodings[d]||String.fromCharCode(parseInt(m,d.indexOf("x")>-1?16:10))||d}).replace(e,function(d,m){return String.fromCharCode(parseInt(m,16))});var u=o.indexOf("]]>");return n(o.slice(0,l))+o.slice(l+9,u)+n(o.slice(u+3))}return function(o,l){var u=n(o);return l?u.replace(/\r\n/g,`
`):u}}(),decregex=/[&<>'"]/g,charegex=/[\u0000-\u0008\u000b-\u001f\uFFFE-\uFFFF]/g;function escapexml(t){var e=t+"";return e.replace(decregex,function(n){return rencoding[n]}).replace(charegex,function(n){return"_x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+"_"})}function escapexmltag(t){return escapexml(t).replace(/ /g,"_x0020_")}var htmlcharegex=/[\u0000-\u001f]/g;function escapehtml(t){var e=t+"";return e.replace(decregex,function(n){return rencoding[n]}).replace(/\n/g,"<br/>").replace(htmlcharegex,function(n){return"&#x"+("000"+n.charCodeAt(0).toString(16)).slice(-4)+";"})}function escapexlml(t){var e=t+"";return e.replace(decregex,function(n){return rencoding[n]}).replace(htmlcharegex,function(n){return"&#x"+n.charCodeAt(0).toString(16).toUpperCase()+";"})}var xlml_fixstr=function(){var t=/&#(\d+);/g;function e(n,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(t,e)}}();function xlml_unfixstr(t){return t.replace(/(\r\n|[\r\n])/g,"&#10;")}function parsexmlbool(t){switch(t){case 1:case!0:case"1":case"true":return!0;case 0:case!1:case"0":case"false":return!1}return!1}function utf8reada(t){for(var e="",n=0,a=0,o=0,l=0,u=0,d=0;n<t.length;){if(a=t.charCodeAt(n++),a<128){e+=String.fromCharCode(a);continue}if(o=t.charCodeAt(n++),a>191&&a<224){u=(a&31)<<6,u|=o&63,e+=String.fromCharCode(u);continue}if(l=t.charCodeAt(n++),a<240){e+=String.fromCharCode((a&15)<<12|(o&63)<<6|l&63);continue}u=t.charCodeAt(n++),d=((a&7)<<18|(o&63)<<12|(l&63)<<6|u&63)-65536,e+=String.fromCharCode(55296+(d>>>10&1023)),e+=String.fromCharCode(56320+(d&1023))}return e}function utf8readb(t){var e=new_raw_buf(2*t.length),n,a,o=1,l=0,u=0,d;for(a=0;a<t.length;a+=o)o=1,(d=t.charCodeAt(a))<128?n=d:d<224?(n=(d&31)*64+(t.charCodeAt(a+1)&63),o=2):d<240?(n=(d&15)*4096+(t.charCodeAt(a+1)&63)*64+(t.charCodeAt(a+2)&63),o=3):(o=4,n=(d&7)*262144+(t.charCodeAt(a+1)&63)*4096+(t.charCodeAt(a+2)&63)*64+(t.charCodeAt(a+3)&63),n-=65536,u=55296+(n>>>10&1023),n=56320+(n&1023)),u!==0&&(e[l++]=u&255,e[l++]=u>>>8,u=0),e[l++]=n%256,e[l++]=n>>>8;return e.slice(0,l).toString("ucs2")}function utf8readc(t){return Buffer_from(t,"binary").toString("utf8")}var utf8corpus="foo bar bazâð£",utf8read=has_buf&&(utf8readc(utf8corpus)==utf8reada(utf8corpus)&&utf8readc||utf8readb(utf8corpus)==utf8reada(utf8corpus)&&utf8readb)||utf8reada,utf8write=has_buf?function(t){return Buffer_from(t,"utf8").toString("binary")}:function(t){for(var e=[],n=0,a=0,o=0;n<t.length;)switch(a=t.charCodeAt(n++),!0){case a<128:e.push(String.fromCharCode(a));break;case a<2048:e.push(String.fromCharCode(192+(a>>6))),e.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,o=t.charCodeAt(n++)-56320+(a<<10),e.push(String.fromCharCode(240+(o>>18&7))),e.push(String.fromCharCode(144+(o>>12&63))),e.push(String.fromCharCode(128+(o>>6&63))),e.push(String.fromCharCode(128+(o&63)));break;default:e.push(String.fromCharCode(224+(a>>12))),e.push(String.fromCharCode(128+(a>>6&63))),e.push(String.fromCharCode(128+(a&63)))}return e.join("")},matchtag=function(){var t={};return function(n,a){var o=n+"|"+(a||"");return t[o]?t[o]:t[o]=new RegExp("<(?:\\w+:)?"+n+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+n+">",a||"")}}(),htmldecode=function(){var t=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(n){for(var a=n.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),o=0;o<t.length;++o)a=a.replace(t[o][0],t[o][1]);return a}}(),vtregex=function(){var t={};return function(n){return t[n]!==void 0?t[n]:t[n]=new RegExp("<(?:vt:)?"+n+">([\\s\\S]*?)</(?:vt:)?"+n+">","g")}}(),vtvregex=/<\/?(?:vt:)?variant>/g,vtmregex=/<(?:vt:)([^>]*)>([\s\S]*)</;function parseVector(t,e){var n=parsexmltag(t),a=t.match(vtregex(n.baseType))||[],o=[];if(a.length!=n.size){if(e.WTF)throw new Error("unexpected vector length "+a.length+" != "+n.size);return o}return a.forEach(function(l){var u=l.replace(vtvregex,"").match(vtmregex);u&&o.push({v:utf8read(u[2]),t:u[1]})}),o}var wtregex=/(^\s|\s$|\n)/;function writetag(t,e){return"<"+t+(e.match(wtregex)?' xml:space="preserve"':"")+">"+e+"</"+t+">"}function wxt_helper(t){return keys(t).map(function(e){return" "+e+'="'+t[e]+'"'}).join("")}function writextag(t,e,n){return"<"+t+(n!=null?wxt_helper(n):"")+(e!=null?(e.match(wtregex)?' xml:space="preserve"':"")+">"+e+"</"+t:"/")+">"}function write_w3cdtf(t,e){try{return t.toISOString().replace(/\.\d*/,"")}catch(n){if(e)throw n}return""}function write_vt(t,e){switch(typeof t){case"string":var n=writextag("vt:lpwstr",escapexml(t));return e&&(n=n.replace(/&quot;/g,"_x0022_")),n;case"number":return writextag((t|0)==t?"vt:i4":"vt:r8",escapexml(String(t)));case"boolean":return writextag("vt:bool",t?"true":"false")}if(t instanceof Date)return writextag("vt:filetime",write_w3cdtf(t));throw new Error("Unable to serialize "+t)}function xlml_normalize(t){if(has_buf&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return utf8read(a2s(ab2a(t)));throw new Error("Bad input format: expected Buffer or string")}var xlmlregex=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/](?:[^>=]|="[^"]*?")*)?>/mg,XMLNS={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",mx:"http://schemas.microsoft.com/office/mac/excel/2008/main",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",sjs:"http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},XMLNS_main=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],XLMLNS={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function read_double_le(t,e){for(var n=1-2*(t[e+7]>>>7),a=((t[e+7]&127)<<4)+(t[e+6]>>>4&15),o=t[e+6]&15,l=5;l>=0;--l)o=o*256+t[e+l];return a==2047?o==0?n*(1/0):NaN:(a==0?a=-1022:(a-=1023,o+=Math.pow(2,52)),n*Math.pow(2,a-52)*o)}function write_double_le(t,e,n){var a=(e<0||1/e==-1/0?1:0)<<7,o=0,l=0,u=a?-e:e;isFinite(u)?u==0?o=l=0:(o=Math.floor(Math.log(u)/Math.LN2),l=u*Math.pow(2,52-o),o<=-1023&&(!isFinite(l)||l<Math.pow(2,52))?o=-1022:(l-=Math.pow(2,52),o+=1023)):(o=2047,l=isNaN(e)?26985:0);for(var d=0;d<=5;++d,l/=256)t[n+d]=l&255;t[n+6]=(o&15)<<4|l&15,t[n+7]=o>>4|a}var ___toBuffer=function(t){for(var e=[],n=10240,a=0;a<t[0].length;++a)if(t[0][a])for(var o=0,l=t[0][a].length;o<l;o+=n)e.push.apply(e,t[0][a].slice(o,o+n));return e},__toBuffer=has_buf?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(e){return Buffer.isBuffer(e)?e:Buffer_from(e)})):___toBuffer(t)}:___toBuffer,___utf16le=function(t,e,n){for(var a=[],o=e;o<n;o+=2)a.push(String.fromCharCode(__readUInt16LE(t,o)));return a.join("").replace(chr0,"")},__utf16le=has_buf?function(t,e,n){return!Buffer.isBuffer(t)||!buf_utf16le?___utf16le(t,e,n):t.toString("utf16le",e,n).replace(chr0,"")}:___utf16le,___hexlify=function(t,e,n){for(var a=[],o=e;o<e+n;++o)a.push(("0"+t[o].toString(16)).slice(-2));return a.join("")},__hexlify=has_buf?function(t,e,n){return Buffer.isBuffer(t)?t.toString("hex",e,e+n):___hexlify(t,e,n)}:___hexlify,___utf8=function(t,e,n){for(var a=[],o=e;o<n;o++)a.push(String.fromCharCode(__readUInt8(t,o)));return a.join("")},__utf8=has_buf?function t(e,n,a){return Buffer.isBuffer(e)?e.toString("utf8",n,a):___utf8(e,n,a)}:___utf8,___lpstr=function(t,e){var n=__readUInt32LE(t,e);return n>0?__utf8(t,e+4,e+4+n-1):""},__lpstr=___lpstr,___cpstr=function(t,e){var n=__readUInt32LE(t,e);return n>0?__utf8(t,e+4,e+4+n-1):""},__cpstr=___cpstr,___lpwstr=function(t,e){var n=2*__readUInt32LE(t,e);return n>0?__utf8(t,e+4,e+4+n-1):""},__lpwstr=___lpwstr,___lpp4=function t(e,n){var a=__readUInt32LE(e,n);return a>0?__utf16le(e,n+4,n+4+a):""},__lpp4=___lpp4,___8lpp4=function(t,e){var n=__readUInt32LE(t,e);return n>0?__utf8(t,e+4,e+4+n):""},__8lpp4=___8lpp4,___double=function(t,e){return read_double_le(t,e)},__double=___double,is_buf=function t(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};has_buf&&(__lpstr=function(e,n){if(!Buffer.isBuffer(e))return ___lpstr(e,n);var a=e.readUInt32LE(n);return a>0?e.toString("utf8",n+4,n+4+a-1):""},__cpstr=function(e,n){if(!Buffer.isBuffer(e))return ___cpstr(e,n);var a=e.readUInt32LE(n);return a>0?e.toString("utf8",n+4,n+4+a-1):""},__lpwstr=function(e,n){if(!Buffer.isBuffer(e)||!buf_utf16le)return ___lpwstr(e,n);var a=2*e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+a-1)},__lpp4=function(e,n){if(!Buffer.isBuffer(e)||!buf_utf16le)return ___lpp4(e,n);var a=e.readUInt32LE(n);return e.toString("utf16le",n+4,n+4+a)},__8lpp4=function(e,n){if(!Buffer.isBuffer(e))return ___8lpp4(e,n);var a=e.readUInt32LE(n);return e.toString("utf8",n+4,n+4+a)},__double=function(e,n){return Buffer.isBuffer(e)?e.readDoubleLE(n):___double(e,n)},is_buf=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var __readUInt8=function(t,e){return t[e]},__readUInt16LE=function(t,e){return t[e+1]*(1<<8)+t[e]},__readInt16LE=function(t,e){var n=t[e+1]*256+t[e];return n<32768?n:(65535-n+1)*-1},__readUInt32LE=function(t,e){return t[e+3]*(1<<24)+(t[e+2]<<16)+(t[e+1]<<8)+t[e]},__readInt32LE=function(t,e){return t[e+3]<<24|t[e+2]<<16|t[e+1]<<8|t[e]},__readInt32BE=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]};function ReadShift(t,e){var n="",a,o,l=[],u,d,m,y;switch(e){case"dbcs":if(y=this.l,has_buf&&Buffer.isBuffer(this)&&buf_utf16le)n=this.slice(this.l,this.l+2*t).toString("utf16le");else for(m=0;m<t;++m)n+=String.fromCharCode(__readUInt16LE(this,y)),y+=2;t*=2;break;case"utf8":n=__utf8(this,this.l,this.l+t);break;case"utf16le":t*=2,n=__utf16le(this,this.l,this.l+t);break;case"wstr":return ReadShift.call(this,t,"dbcs");case"lpstr-ansi":n=__lpstr(this,this.l),t=4+__readUInt32LE(this,this.l);break;case"lpstr-cp":n=__cpstr(this,this.l),t=4+__readUInt32LE(this,this.l);break;case"lpwstr":n=__lpwstr(this,this.l),t=4+2*__readUInt32LE(this,this.l);break;case"lpp4":t=4+__readUInt32LE(this,this.l),n=__lpp4(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+__readUInt32LE(this,this.l),n=__8lpp4(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,n="";(u=__readUInt8(this,this.l+t++))!==0;)l.push(_getchar(u));n=l.join("");break;case"_wstr":for(t=0,n="";(u=__readUInt16LE(this,this.l+t))!==0;)l.push(_getchar(u)),t+=2;t+=2,n=l.join("");break;case"dbcs-cont":for(n="",y=this.l,m=0;m<t;++m){if(this.lens&&this.lens.indexOf(y)!==-1)return u=__readUInt8(this,y),this.l=y+1,d=ReadShift.call(this,t-m,u?"dbcs-cont":"sbcs-cont"),l.join("")+d;l.push(_getchar(__readUInt16LE(this,y))),y+=2}n=l.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(n="",y=this.l,m=0;m!=t;++m){if(this.lens&&this.lens.indexOf(y)!==-1)return u=__readUInt8(this,y),this.l=y+1,d=ReadShift.call(this,t-m,u?"dbcs-cont":"sbcs-cont"),l.join("")+d;l.push(_getchar(__readUInt8(this,y))),y+=1}n=l.join("");break;default:switch(t){case 1:return a=__readUInt8(this,this.l),this.l++,a;case 2:return a=(e==="i"?__readInt16LE:__readUInt16LE)(this,this.l),this.l+=2,a;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(a=(t>0?__readInt32LE:__readInt32BE)(this,this.l),this.l+=4,a):(o=__readUInt32LE(this,this.l),this.l+=4,o);case 8:case-8:if(e==="f")return t==8?o=__double(this,this.l):o=__double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,o;t=8;case 16:n=__hexlify(this,this.l,t);break}}return this.l+=t,n}var __writeUInt32LE=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24&255},__writeInt32LE=function(t,e,n){t[n]=e&255,t[n+1]=e>>8&255,t[n+2]=e>>16&255,t[n+3]=e>>24&255},__writeUInt16LE=function(t,e,n){t[n]=e&255,t[n+1]=e>>>8&255};function WriteShift(t,e,n){var a=0,o=0;if(n==="dbcs"){for(o=0;o!=e.length;++o)__writeUInt16LE(this,e.charCodeAt(o),this.l+2*o);a=2*e.length}else if(n==="sbcs"||n=="cpstr"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),o=0;o!=e.length;++o)this[this.l+o]=e.charCodeAt(o)&255;a=e.length}else if(n==="hex"){for(;o<t;++o)this[this.l++]=parseInt(e.slice(2*o,2*o+2),16)||0;return this}else if(n==="utf16le"){var l=Math.min(this.l+t,this.length);for(o=0;o<Math.min(e.length,t);++o){var u=e.charCodeAt(o);this[this.l++]=u&255,this[this.l++]=u>>8}for(;this.l<l;)this[this.l++]=0;return this}else switch(t){case 1:a=1,this[this.l]=e&255;break;case 2:a=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:a=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:a=4,__writeUInt32LE(this,e,this.l);break;case 8:if(a=8,n==="f"){write_double_le(this,e,this.l);break}case 16:break;case-4:a=4,__writeInt32LE(this,e,this.l);break}return this.l+=a,this}function CheckField(t,e){var n=__hexlify(this,this.l,t.length>>1);if(n!==t)throw new Error(e+"Expected "+t+" saw "+n);this.l+=t.length>>1}function prep_blob(t,e){t.l=e,t.read_shift=ReadShift,t.chk=CheckField,t.write_shift=WriteShift}function parsenoop(t,e){t.l+=e}function new_buf(t){var e=new_raw_buf(t);return prep_blob(e,0),e}function recordhopper(t,e,n){if(t){var a,o,l;prep_blob(t,t.l||0);for(var u=t.length,d=0,m=0;t.l<u;){d=t.read_shift(1),d&128&&(d=(d&127)+((t.read_shift(1)&127)<<7));var y=XLSBRecordEnum[d]||XLSBRecordEnum[65535];for(a=t.read_shift(1),l=a&127,o=1;o<4&&a&128;++o)l+=((a=t.read_shift(1))&127)<<7*o;m=t.l+l;var b=y.f&&y.f(t,l,n);if(t.l=m,e(b,y,d))return}}}function buf_array(){var t=[],e=has_buf?256:2048,n=function(y){var b=new_buf(y);return prep_blob(b,0),b},a=n(e),o=function(){a&&(a.l&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&t.push(a)),a=null)},l=function(y){return a&&y<a.length-a.l?a:(o(),a=n(Math.max(y+1,e)))},u=function(){return o(),bconcat(t)},d=function(y){o(),a=y,a.l==null&&(a.l=a.length),l(e)};return{next:l,push:d,end:u,_bufs:t}}function write_record(t,e,n,a){var o=+e,l;if(!isNaN(o)){a||(a=XLSBRecordEnum[o].p||(n||[]).length||0),l=1+(o>=128?1:0)+1,a>=128&&++l,a>=16384&&++l,a>=2097152&&++l;var u=t.next(l);o<=127?u.write_shift(1,o):(u.write_shift(1,(o&127)+128),u.write_shift(1,o>>7));for(var d=0;d!=4;++d)if(a>=128)u.write_shift(1,(a&127)+128),a>>=7;else{u.write_shift(1,a);break}a>0&&is_buf(n)&&t.push(n)}}function shift_cell_xls(t,e,n){var a=dup(t);if(e.s?(a.cRel&&(a.c+=e.s.c),a.rRel&&(a.r+=e.s.r)):(a.cRel&&(a.c+=e.c),a.rRel&&(a.r+=e.r)),!n||n.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function shift_range_xls(t,e,n){var a=dup(t);return a.s=shift_cell_xls(a.s,e.s,n),a.e=shift_cell_xls(a.e,e.s,n),a}function encode_cell_xls(t,e){if(t.cRel&&t.c<0)for(t=dup(t);t.c<0;)t.c+=e>8?16384:256;if(t.rRel&&t.r<0)for(t=dup(t);t.r<0;)t.r+=e>8?1048576:e>5?65536:16384;var n=encode_cell(t);return!t.cRel&&t.cRel!=null&&(n=fix_col(n)),!t.rRel&&t.rRel!=null&&(n=fix_row(n)),n}function encode_range_xls(t,e){return t.s.r==0&&!t.s.rRel&&t.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+encode_col(t.s.c)+":"+(t.e.cRel?"":"$")+encode_col(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(e.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+encode_row(t.s.r)+":"+(t.e.rRel?"":"$")+encode_row(t.e.r):encode_cell_xls(t.s,e.biff)+":"+encode_cell_xls(t.e,e.biff)}function decode_row(t){return parseInt(unfix_row(t),10)-1}function encode_row(t){return""+(t+1)}function fix_row(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function unfix_row(t){return t.replace(/\$(\d+)$/,"$1")}function decode_col(t){for(var e=unfix_col(t),n=0,a=0;a!==e.length;++a)n=26*n+e.charCodeAt(a)-64;return n-1}function encode_col(t){if(t<0)throw new Error("invalid column "+t);var e="";for(++t;t;t=Math.floor((t-1)/26))e=String.fromCharCode((t-1)%26+65)+e;return e}function fix_col(t){return t.replace(/^([A-Z])/,"$$$1")}function unfix_col(t){return t.replace(/^\$([A-Z])/,"$1")}function split_cell(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function decode_cell(t){for(var e=0,n=0,a=0;a<t.length;++a){var o=t.charCodeAt(a);o>=48&&o<=57?e=10*e+(o-48):o>=65&&o<=90&&(n=26*n+(o-64))}return{c:n-1,r:e-1}}function encode_cell(t){for(var e=t.c+1,n="";e;e=(e-1)/26|0)n=String.fromCharCode((e-1)%26+65)+n;return n+(t.r+1)}function decode_range(t){var e=t.indexOf(":");return e==-1?{s:decode_cell(t),e:decode_cell(t)}:{s:decode_cell(t.slice(0,e)),e:decode_cell(t.slice(e+1))}}function encode_range(t,e){return typeof e>"u"||typeof e=="number"?encode_range(t.s,t.e):(typeof t!="string"&&(t=encode_cell(t)),typeof e!="string"&&(e=encode_cell(e)),t==e?t:t+":"+e)}function fix_range(t){var e=decode_range(t);return"$"+encode_col(e.s.c)+"$"+encode_row(e.s.r)+":$"+encode_col(e.e.c)+"$"+encode_row(e.e.r)}function formula_quote_sheet_name(t,e){if(!t&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t.replace(/'/g,"''")+"'":t}function safe_decode_range(t){var e={s:{c:0,r:0},e:{c:0,r:0}},n=0,a=0,o=0,l=t.length;for(n=0;a<l&&!((o=t.charCodeAt(a)-64)<1||o>26);++a)n=26*n+o;for(e.s.c=--n,n=0;a<l&&!((o=t.charCodeAt(a)-48)<0||o>9);++a)n=10*n+o;if(e.s.r=--n,a===l||o!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++a,n=0;a!=l&&!((o=t.charCodeAt(a)-64)<1||o>26);++a)n=26*n+o;for(e.e.c=--n,n=0;a!=l&&!((o=t.charCodeAt(a)-48)<0||o>9);++a)n=10*n+o;return e.e.r=--n,e}function safe_format_cell(t,e){var n=t.t=="d"&&e instanceof Date;if(t.z!=null)try{return t.w=SSF_format(t.z,n?datenum(e):e)}catch{}try{return t.w=SSF_format((t.XF||{}).numFmtId||(n?14:0),n?datenum(e):e)}catch{return""+e}}function format_cell(t,e,n){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&n&&n.dateNF&&(t.z=n.dateNF),t.t=="e"?BErr[t.v]||t.v:e==null?safe_format_cell(t,t.v):safe_format_cell(t,e))}function sheet_to_workbook(t,e){var n=e&&e.sheet?e.sheet:"Sheet1",a={};return a[n]=t,{SheetNames:[n],Sheets:a}}function sheet_add_aoa(t,e,n){var a=n||{},o=t?t["!data"]!=null:a.dense,l=t||{};o&&!l["!data"]&&(l["!data"]=[]);var u=0,d=0;if(l&&a.origin!=null){if(typeof a.origin=="number")u=a.origin;else{var m=typeof a.origin=="string"?decode_cell(a.origin):a.origin;u=m.r,d=m.c}l["!ref"]||(l["!ref"]="A1:A1")}var y={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(l["!ref"]){var b=safe_decode_range(l["!ref"]);y.s.c=b.s.c,y.s.r=b.s.r,y.e.c=Math.max(y.e.c,b.e.c),y.e.r=Math.max(y.e.r,b.e.r),u==-1&&(y.e.r=u=b.e.r+1)}for(var _=[],w=0;w!=e.length;++w)if(e[w]){if(!Array.isArray(e[w]))throw new Error("aoa_to_sheet expects an array of arrays");var E=u+w,A=""+(E+1);o&&(l["!data"][E]||(l["!data"][E]=[]),_=l["!data"][E]);for(var C=0;C!=e[w].length;++C)if(!(typeof e[w][C]>"u")){var k={v:e[w][C]},B=d+C;if(y.s.r>E&&(y.s.r=E),y.s.c>B&&(y.s.c=B),y.e.r<E&&(y.e.r=E),y.e.c<B&&(y.e.c=B),e[w][C]&&typeof e[w][C]=="object"&&!Array.isArray(e[w][C])&&!(e[w][C]instanceof Date))k=e[w][C];else if(Array.isArray(k.v)&&(k.f=e[w][C][1],k.v=k.v[0]),k.v===null)if(k.f)k.t="n";else if(a.nullError)k.t="e",k.v=0;else if(a.sheetStubs)k.t="z";else continue;else typeof k.v=="number"?k.t="n":typeof k.v=="boolean"?k.t="b":k.v instanceof Date?(k.z=a.dateNF||table_fmt[14],a.cellDates?(k.t="d",k.w=SSF_format(k.z,datenum(k.v,a.date1904))):(k.t="n",k.v=datenum(k.v,a.date1904),k.w=SSF_format(k.z,k.v))):k.t="s";if(o)_[B]&&_[B].z&&(k.z=_[B].z),_[B]=k;else{var D=encode_col(B)+A;l[D]&&l[D].z&&(k.z=l[D].z),l[D]=k}}}return y.s.c<1e7&&(l["!ref"]=encode_range(y)),l}function aoa_to_sheet(t,e){return sheet_add_aoa(null,t,e)}function parse_Int32LE(t){return t.read_shift(4,"i")}function write_UInt32LE(t,e){return e||(e=new_buf(4)),e.write_shift(4,t),e}function parse_XLWideString(t){var e=t.read_shift(4);return e===0?"":t.read_shift(e,"dbcs")}function write_XLWideString(t,e){var n=!1;return e==null&&(n=!0,e=new_buf(4+2*t.length)),e.write_shift(4,t.length),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}function parse_StrRun(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function write_StrRun(t,e){return e||(e=new_buf(4)),e.write_shift(2,t.ich||0),e.write_shift(2,t.ifnt||0),e}function parse_RichStr(t,e){var n=t.l,a=t.read_shift(1),o=parse_XLWideString(t),l=[],u={t:o,h:o};if(a&1){for(var d=t.read_shift(4),m=0;m!=d;++m)l.push(parse_StrRun(t));u.r=l}else u.r=[{ich:0,ifnt:0}];return t.l=n+e,u}function write_RichStr(t,e){var n=!1;return e==null&&(n=!0,e=new_buf(15+4*t.t.length)),e.write_shift(1,0),write_XLWideString(t.t,e),n?e.slice(0,e.l):e}var parse_BrtCommentText=parse_RichStr;function write_BrtCommentText(t,e){var n=!1;return e==null&&(n=!0,e=new_buf(23+4*t.t.length)),e.write_shift(1,1),write_XLWideString(t.t,e),e.write_shift(4,1),write_StrRun({ich:0,ifnt:0},e),n?e.slice(0,e.l):e}function parse_XLSBCell(t){var e=t.read_shift(4),n=t.read_shift(2);return n+=t.read_shift(1)<<16,t.l++,{c:e,iStyleRef:n}}function write_XLSBCell(t,e){return e==null&&(e=new_buf(8)),e.write_shift(-4,t.c),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}function parse_XLSBShortCell(t){var e=t.read_shift(2);return e+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:e}}function write_XLSBShortCell(t,e){return e==null&&(e=new_buf(4)),e.write_shift(3,t.iStyleRef||t.s),e.write_shift(1,0),e}var parse_XLSBCodeName=parse_XLWideString,write_XLSBCodeName=write_XLWideString;function parse_XLNullableWideString(t){var e=t.read_shift(4);return e===0||e===4294967295?"":t.read_shift(e,"dbcs")}function write_XLNullableWideString(t,e){var n=!1;return e==null&&(n=!0,e=new_buf(127)),e.write_shift(4,t.length>0?t.length:4294967295),t.length>0&&e.write_shift(0,t,"dbcs"),n?e.slice(0,e.l):e}var parse_XLNameWideString=parse_XLWideString,parse_RelID=parse_XLNullableWideString,write_RelID=write_XLNullableWideString;function parse_RkNumber(t){var e=t.slice(t.l,t.l+4),n=e[0]&1,a=e[0]&2;t.l+=4;var o=a===0?__double([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):__readInt32LE(e,0)>>2;return n?o/100:o}function write_RkNumber(t,e){e==null&&(e=new_buf(4));var n=0,a=0,o=t*100;if(t==(t|0)&&t>=-(1<<29)&&t<1<<29?a=1:o==(o|0)&&o>=-(1<<29)&&o<1<<29&&(a=1,n=1),a)e.write_shift(-4,((n?o:t)<<2)+(n+2));else throw new Error("unsupported RkNumber "+t)}function parse_RfX(t){var e={s:{},e:{}};return e.s.r=t.read_shift(4),e.e.r=t.read_shift(4),e.s.c=t.read_shift(4),e.e.c=t.read_shift(4),e}function write_RfX(t,e){return e||(e=new_buf(16)),e.write_shift(4,t.s.r),e.write_shift(4,t.e.r),e.write_shift(4,t.s.c),e.write_shift(4,t.e.c),e}var parse_UncheckedRfX=parse_RfX,write_UncheckedRfX=write_RfX;function parse_Xnum(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function write_Xnum(t,e){return(e||new_buf(8)).write_shift(8,t,"f")}function parse_BrtColor(t){var e={},n=t.read_shift(1),a=n>>>1,o=t.read_shift(1),l=t.read_shift(2,"i"),u=t.read_shift(1),d=t.read_shift(1),m=t.read_shift(1);switch(t.l++,a){case 0:e.auto=1;break;case 1:e.index=o;var y=XLSIcv[o];y&&(e.rgb=rgb2Hex(y));break;case 2:e.rgb=rgb2Hex([u,d,m]);break;case 3:e.theme=o;break}return l!=0&&(e.tint=l>0?l/32767:l/32768),e}function write_BrtColor(t,e){if(e||(e=new_buf(8)),!t||t.auto)return e.write_shift(4,0),e.write_shift(4,0),e;t.index!=null?(e.write_shift(1,2),e.write_shift(1,t.index)):t.theme!=null?(e.write_shift(1,6),e.write_shift(1,t.theme)):(e.write_shift(1,5),e.write_shift(1,0));var n=t.tint||0;if(n>0?n*=32767:n<0&&(n*=32768),e.write_shift(2,n),!t.rgb||t.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var a=t.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),e.write_shift(1,parseInt(a.slice(0,2),16)),e.write_shift(1,parseInt(a.slice(2,4),16)),e.write_shift(1,parseInt(a.slice(4,6),16)),e.write_shift(1,255)}return e}function parse_FontFlags(t){var e=t.read_shift(1);t.l++;var n={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return n}function write_FontFlags(t,e){e||(e=new_buf(2));var n=(t.italic?2:0)|(t.strike?8:0)|(t.outline?16:0)|(t.shadow?32:0)|(t.condense?64:0)|(t.extend?128:0);return e.write_shift(1,n),e.write_shift(1,0),e}function parse_ClipboardFormatOrString(t,e){var n={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=t.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return n[t.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return t.l-=4,t.read_shift(0,e==1?"lpstr":"lpwstr")}function parse_ClipboardFormatOrAnsiString(t){return parse_ClipboardFormatOrString(t,1)}function parse_ClipboardFormatOrUnicodeString(t){return parse_ClipboardFormatOrString(t,2)}var VT_I2=2,VT_I4=3,VT_BOOL=11,VT_VARIANT=12,VT_UI4=19,VT_FILETIME=64,VT_BLOB=65,VT_CF=71,VT_VECTOR_VARIANT=4108,VT_VECTOR_LPSTR=4126,VT_STRING=80,VT_USTR=81,VT_CUSTOM=[VT_STRING,VT_USTR],DocSummaryPIDDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Category",t:VT_STRING},3:{n:"PresentationFormat",t:VT_STRING},4:{n:"ByteCount",t:VT_I4},5:{n:"LineCount",t:VT_I4},6:{n:"ParagraphCount",t:VT_I4},7:{n:"SlideCount",t:VT_I4},8:{n:"NoteCount",t:VT_I4},9:{n:"HiddenCount",t:VT_I4},10:{n:"MultimediaClipCount",t:VT_I4},11:{n:"ScaleCrop",t:VT_BOOL},12:{n:"HeadingPairs",t:VT_VECTOR_VARIANT},13:{n:"TitlesOfParts",t:VT_VECTOR_LPSTR},14:{n:"Manager",t:VT_STRING},15:{n:"Company",t:VT_STRING},16:{n:"LinksUpToDate",t:VT_BOOL},17:{n:"CharacterCount",t:VT_I4},19:{n:"SharedDoc",t:VT_BOOL},22:{n:"HyperlinksChanged",t:VT_BOOL},23:{n:"AppVersion",t:VT_I4,p:"version"},24:{n:"DigSig",t:VT_BLOB},26:{n:"ContentType",t:VT_STRING},27:{n:"ContentStatus",t:VT_STRING},28:{n:"Language",t:VT_STRING},29:{n:"Version",t:VT_STRING},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},SummaryPIDSI={1:{n:"CodePage",t:VT_I2},2:{n:"Title",t:VT_STRING},3:{n:"Subject",t:VT_STRING},4:{n:"Author",t:VT_STRING},5:{n:"Keywords",t:VT_STRING},6:{n:"Comments",t:VT_STRING},7:{n:"Template",t:VT_STRING},8:{n:"LastAuthor",t:VT_STRING},9:{n:"RevNumber",t:VT_STRING},10:{n:"EditTime",t:VT_FILETIME},11:{n:"LastPrinted",t:VT_FILETIME},12:{n:"CreatedDate",t:VT_FILETIME},13:{n:"ModifiedDate",t:VT_FILETIME},14:{n:"PageCount",t:VT_I4},15:{n:"WordCount",t:VT_I4},16:{n:"CharCount",t:VT_I4},17:{n:"Thumbnail",t:VT_CF},18:{n:"Application",t:VT_STRING},19:{n:"DocSecurity",t:VT_I4},255:{},2147483648:{n:"Locale",t:VT_UI4},2147483651:{n:"Behavior",t:VT_UI4},1919054434:{}},CountryEnum={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},XLSFillPattern=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function rgbify(t){return t.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var _XLSIcv=rgbify([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,0,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),XLSIcv=dup(_XLSIcv),BErr={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},RBErr={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},XLSLblBuiltIn=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"],ct2type={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},CT_LIST={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function new_ct(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function parse_ct(t){var e=new_ct();if(!t||!t.match)return e;var n={};if((t.match(tagregex)||[]).forEach(function(a){var o=parsexmltag(a);switch(o[0].replace(nsregex,"<")){case"<?xml":break;case"<Types":e.xmlns=o["xmlns"+(o[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":n[o.Extension.toLowerCase()]=o.ContentType;break;case"<Override":e[ct2type[o.ContentType]]!==void 0&&e[ct2type[o.ContentType]].push(o.PartName);break}}),e.xmlns!==XMLNS.CT)throw new Error("Unknown Namespace: "+e.xmlns);return e.calcchain=e.calcchains.length>0?e.calcchains[0]:"",e.sst=e.strs.length>0?e.strs[0]:"",e.style=e.styles.length>0?e.styles[0]:"",e.defaults=n,delete e.calcchains,e}function write_ct(t,e,n){var a=evert_arr(ct2type),o=[],l;n||(o[o.length]=XML_HEADER,o[o.length]=writextag("Types",null,{xmlns:XMLNS.CT,"xmlns:xsd":XMLNS.xsd,"xmlns:xsi":XMLNS.xsi}),o=o.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(y){return writextag("Default",null,{Extension:y[0],ContentType:y[1]})})));var u=function(y){t[y]&&t[y].length>0&&(l=t[y][0],o[o.length]=writextag("Override",null,{PartName:(l[0]=="/"?"":"/")+l,ContentType:CT_LIST[y][e.bookType]||CT_LIST[y].xlsx}))},d=function(y){(t[y]||[]).forEach(function(b){o[o.length]=writextag("Override",null,{PartName:(b[0]=="/"?"":"/")+b,ContentType:CT_LIST[y][e.bookType]||CT_LIST[y].xlsx})})},m=function(y){(t[y]||[]).forEach(function(b){o[o.length]=writextag("Override",null,{PartName:(b[0]=="/"?"":"/")+b,ContentType:a[y][0]})})};return u("workbooks"),d("sheets"),d("charts"),m("themes"),["strs","styles"].forEach(u),["coreprops","extprops","custprops"].forEach(m),m("vba"),m("comments"),m("threadedcomments"),m("drawings"),d("metadata"),m("people"),!n&&o.length>2&&(o[o.length]="</Types>",o[1]=o[1].replace("/>",">")),o.join("")}var RELS={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",CONN:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/connections",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function get_rels_path(t){var e=t.lastIndexOf("/");return t.slice(0,e+1)+"_rels/"+t.slice(e+1)+".rels"}function parse_rels(t,e){var n={"!id":{}};if(!t)return n;e.charAt(0)!=="/"&&(e="/"+e);var a={};return(t.match(tagregex)||[]).forEach(function(o){var l=parsexmltag(o);if(l[0]==="<Relationship"){var u={};u.Type=l.Type,u.Target=l.Target,u.Id=l.Id,l.TargetMode&&(u.TargetMode=l.TargetMode);var d=l.TargetMode==="External"?l.Target:resolve_path(l.Target,e);n[d]=u,a[l.Id]=u}}),n["!id"]=a,n}function write_rels(t){var e=[XML_HEADER,writextag("Relationships",null,{xmlns:XMLNS.RELS})];return keys(t["!id"]).forEach(function(n){e[e.length]=writextag("Relationship",null,t["!id"][n])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function add_rels(t,e,n,a,o,l){if(o||(o={}),t["!id"]||(t["!id"]={}),t["!idx"]||(t["!idx"]=1),e<0)for(e=t["!idx"];t["!id"]["rId"+e];++e);if(t["!idx"]=e+1,o.Id="rId"+e,o.Type=a,o.Target=n,l?o.TargetMode=l:[RELS.HLINK,RELS.XPATH,RELS.XMISS].indexOf(o.Type)>-1&&(o.TargetMode="External"),t["!id"][o.Id])throw new Error("Cannot rewrite rId "+e);return t["!id"][o.Id]=o,t[("/"+o.Target).replace("//","/")]=o,e}var CT_ODS="application/vnd.oasis.opendocument.spreadsheet";function parse_manifest(t,e){for(var n=xlml_normalize(t),a,o;a=xlmlregex.exec(n);)switch(a[3]){case"manifest":break;case"file-entry":if(o=parsexmltag(a[0],!1),o.path=="/"&&o.type!==CT_ODS)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(e&&e.WTF)throw a}}function write_manifest(t){var e=[XML_HEADER];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var n=0;n<t.length;++n)e.push('  <manifest:file-entry manifest:full-path="'+t[n][0]+'" manifest:media-type="'+t[n][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function write_rdf_type(t,e,n){return['  <rdf:Description rdf:about="'+t+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(n||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf_has(t,e){return['  <rdf:Description rdf:about="'+t+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function write_rdf(t){var e=[XML_HEADER];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var n=0;n!=t.length;++n)e.push(write_rdf_type(t[n][0],t[n][1])),e.push(write_rdf_has("",t[n][0]));return e.push(write_rdf_type("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function write_meta_ods(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+XLSX.version+"</meta:generator></office:meta></office:document-meta>"}var CORE_PROPS=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],CORE_PROPS_REGEX=function(){for(var t=new Array(CORE_PROPS.length),e=0;e<CORE_PROPS.length;++e){var n=CORE_PROPS[e],a="(?:"+n[0].slice(0,n[0].indexOf(":"))+":)"+n[0].slice(n[0].indexOf(":")+1);t[e]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return t}();function parse_core_props(t){var e={};t=utf8read(t);for(var n=0;n<CORE_PROPS.length;++n){var a=CORE_PROPS[n],o=t.match(CORE_PROPS_REGEX[n]);o!=null&&o.length>0&&(e[a[1]]=unescapexml(o[1])),a[2]==="date"&&e[a[1]]&&(e[a[1]]=parseDate(e[a[1]]))}return e}function cp_doit(t,e,n,a,o){o[t]!=null||e==null||e===""||(o[t]=e,e=escapexml(e),a[a.length]=n?writextag(t,e,n):writetag(t,e))}function write_core_props(t,e){var n=e||{},a=[XML_HEADER,writextag("cp:coreProperties",null,{"xmlns:cp":XMLNS.CORE_PROPS,"xmlns:dc":XMLNS.dc,"xmlns:dcterms":XMLNS.dcterms,"xmlns:dcmitype":XMLNS.dcmitype,"xmlns:xsi":XMLNS.xsi})],o={};if(!t&&!n.Props)return a.join("");t&&(t.CreatedDate!=null&&cp_doit("dcterms:created",typeof t.CreatedDate=="string"?t.CreatedDate:write_w3cdtf(t.CreatedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},a,o),t.ModifiedDate!=null&&cp_doit("dcterms:modified",typeof t.ModifiedDate=="string"?t.ModifiedDate:write_w3cdtf(t.ModifiedDate,n.WTF),{"xsi:type":"dcterms:W3CDTF"},a,o));for(var l=0;l!=CORE_PROPS.length;++l){var u=CORE_PROPS[l],d=n.Props&&n.Props[u[1]]!=null?n.Props[u[1]]:t?t[u[1]]:null;d===!0?d="1":d===!1?d="0":typeof d=="number"&&(d=String(d)),d!=null&&cp_doit(u[0],d,null,a,o)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var EXT_PROPS=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],PseudoPropsPairs=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function load_props_pairs(t,e,n,a){var o=[];if(typeof t=="string")o=parseVector(t,a);else for(var l=0;l<t.length;++l)o=o.concat(t[l].map(function(b){return{v:b}}));var u=typeof e=="string"?parseVector(e,a).map(function(b){return b.v}):e,d=0,m=0;if(u.length>0)for(var y=0;y!==o.length;y+=2){switch(m=+o[y+1].v,o[y].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":n.Worksheets=m,n.SheetNames=u.slice(d,d+m);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":n.NamedRanges=m,n.DefinedNames=u.slice(d,d+m);break;case"Charts":case"Diagramme":n.Chartsheets=m,n.ChartNames=u.slice(d,d+m);break}d+=m}}function parse_ext_props(t,e,n){var a={};return e||(e={}),t=utf8read(t),EXT_PROPS.forEach(function(o){var l=(t.match(matchtag(o[0]))||[])[1];switch(o[2]){case"string":l&&(e[o[1]]=unescapexml(l));break;case"bool":e[o[1]]=l==="true";break;case"raw":var u=t.match(new RegExp("<"+o[0]+"[^>]*>([\\s\\S]*?)</"+o[0]+">"));u&&u.length>0&&(a[o[1]]=u[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&load_props_pairs(a.HeadingPairs,a.TitlesOfParts,e,n),e}function write_ext_props(t){var e=[],n=writextag;return t||(t={}),t.Application="SheetJS",e[e.length]=XML_HEADER,e[e.length]=writextag("Properties",null,{xmlns:XMLNS.EXT_PROPS,"xmlns:vt":XMLNS.vt}),EXT_PROPS.forEach(function(a){if(t[a[1]]!==void 0){var o;switch(a[2]){case"string":o=escapexml(String(t[a[1]]));break;case"bool":o=t[a[1]]?"true":"false";break}o!==void 0&&(e[e.length]=n(a[0],o))}}),e[e.length]=n("HeadingPairs",n("vt:vector",n("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+n("vt:variant",n("vt:i4",String(t.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=n("TitlesOfParts",n("vt:vector",t.SheetNames.map(function(a){return"<vt:lpstr>"+escapexml(a)+"</vt:lpstr>"}).join(""),{size:t.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var custregex=/<[^>]+>[^<]*/g;function parse_cust_props(t,e){var n={},a="",o=t.match(custregex);if(o)for(var l=0;l!=o.length;++l){var u=o[l],d=parsexmltag(u);switch(strip_ns(d[0])){case"<?xml":break;case"<Properties":break;case"<property":a=unescapexml(d.name);break;case"</property>":a=null;break;default:if(u.indexOf("<vt:")===0){var m=u.split(">"),y=m[0].slice(4),b=m[1];switch(y){case"lpstr":case"bstr":case"lpwstr":n[a]=unescapexml(b);break;case"bool":n[a]=parsexmlbool(b);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":n[a]=parseInt(b,10);break;case"r4":case"r8":case"decimal":n[a]=parseFloat(b);break;case"filetime":case"date":n[a]=parseDate(b);break;case"cy":case"error":n[a]=unescapexml(b);break;default:if(y.slice(-1)=="/")break;e.WTF&&typeof console<"u"&&console.warn("Unexpected",u,y,m)}}else if(u.slice(0,2)!=="</"){if(e.WTF)throw new Error(u)}}}return n}function write_cust_props(t){var e=[XML_HEADER,writextag("Properties",null,{xmlns:XMLNS.CUST_PROPS,"xmlns:vt":XMLNS.vt})];if(!t)return e.join("");var n=1;return keys(t).forEach(function(o){++n,e[e.length]=writextag("property",write_vt(t[o],!0),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:n,name:escapexml(o)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var XLMLDocPropsMap={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},evert_XLMLDPM;function xlml_set_prop(t,e,n){evert_XLMLDPM||(evert_XLMLDPM=evert(XLMLDocPropsMap)),e=evert_XLMLDPM[e]||e,t[e]=n}function xlml_write_docprops(t,e){var n=[];return keys(XLMLDocPropsMap).map(function(a){for(var o=0;o<CORE_PROPS.length;++o)if(CORE_PROPS[o][1]==a)return CORE_PROPS[o];for(o=0;o<EXT_PROPS.length;++o)if(EXT_PROPS[o][1]==a)return EXT_PROPS[o];throw a}).forEach(function(a){if(t[a[1]]!=null){var o=e&&e.Props&&e.Props[a[1]]!=null?e.Props[a[1]]:t[a[1]];switch(a[2]){case"date":o=new Date(o).toISOString().replace(/\.\d*Z/,"Z");break}typeof o=="number"?o=String(o):o===!0||o===!1?o=o?"1":"0":o instanceof Date&&(o=new Date(o).toISOString().replace(/\.\d*Z/,"")),n.push(writetag(XLMLDocPropsMap[a[1]]||a[1],o))}}),writextag("DocumentProperties",n.join(""),{xmlns:XLMLNS.o})}function xlml_write_custprops(t,e){var n=["Worksheets","SheetNames"],a="CustomDocumentProperties",o=[];return t&&keys(t).forEach(function(l){if(Object.prototype.hasOwnProperty.call(t,l)){for(var u=0;u<CORE_PROPS.length;++u)if(l==CORE_PROPS[u][1])return;for(u=0;u<EXT_PROPS.length;++u)if(l==EXT_PROPS[u][1])return;for(u=0;u<n.length;++u)if(l==n[u])return;var d=t[l],m="string";typeof d=="number"?(m="float",d=String(d)):d===!0||d===!1?(m="boolean",d=d?"1":"0"):d=String(d),o.push(writextag(escapexmltag(l),d,{"dt:dt":m}))}}),e&&keys(e).forEach(function(l){if(Object.prototype.hasOwnProperty.call(e,l)&&!(t&&Object.prototype.hasOwnProperty.call(t,l))){var u=e[l],d="string";typeof u=="number"?(d="float",u=String(u)):u===!0||u===!1?(d="boolean",u=u?"1":"0"):u instanceof Date?(d="dateTime.tz",u=u.toISOString()):u=String(u),o.push(writextag(escapexmltag(l),u,{"dt:dt":d}))}}),"<"+a+' xmlns="'+XLMLNS.o+'">'+o.join("")+"</"+a+">"}function parse_FILETIME(t){var e=t.read_shift(4),n=t.read_shift(4);return new Date((n/1e7*Math.pow(2,32)+e/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function write_FILETIME(t){var e=typeof t=="string"?new Date(Date.parse(t)):t,n=e.getTime()/1e3+11644473600,a=n%Math.pow(2,32),o=(n-a)/Math.pow(2,32);a*=1e7,o*=1e7;var l=a/Math.pow(2,32)|0;l>0&&(a=a%Math.pow(2,32),o+=l);var u=new_buf(8);return u.write_shift(4,a),u.write_shift(4,o),u}function parse_lpstr(t,e,n){var a=t.l,o=t.read_shift(0,"lpstr-cp");if(n)for(;t.l-a&3;)++t.l;return o}function parse_lpwstr(t,e,n){var a=t.read_shift(0,"lpwstr");return n&&(t.l+=4-(a.length+1&3)&3),a}function parse_VtStringBase(t,e,n){return e===31?parse_lpwstr(t):parse_lpstr(t,e,n)}function parse_VtString(t,e,n){return parse_VtStringBase(t,e,n===!1?0:4)}function parse_VtUnalignedString(t,e){if(!e)throw new Error("VtUnalignedString must have positive length");return parse_VtStringBase(t,e,0)}function parse_VtVecLpwstrValue(t){for(var e=t.read_shift(4),n=[],a=0;a!=e;++a){var o=t.l;n[a]=t.read_shift(0,"lpwstr").replace(chr0,""),t.l-o&2&&(t.l+=2)}return n}function parse_VtVecUnalignedLpstrValue(t){for(var e=t.read_shift(4),n=[],a=0;a!=e;++a)n[a]=t.read_shift(0,"lpstr-cp").replace(chr0,"");return n}function parse_VtHeadingPair(t){var e=t.l,n=parse_TypedPropertyValue(t,VT_USTR);t[t.l]==0&&t[t.l+1]==0&&t.l-e&2&&(t.l+=2);var a=parse_TypedPropertyValue(t,VT_I4);return[n,a]}function parse_VtVecHeadingPairValue(t){for(var e=t.read_shift(4),n=[],a=0;a<e/2;++a)n.push(parse_VtHeadingPair(t));return n}function parse_dictionary(t,e){for(var n=t.read_shift(4),a={},o=0;o!=n;++o){var l=t.read_shift(4),u=t.read_shift(4);a[l]=t.read_shift(u,e===1200?"utf16le":"utf8").replace(chr0,"").replace(chr1,"!"),e===1200&&u%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>2+1<<2),a}function parse_BLOB(t){var e=t.read_shift(4),n=t.slice(t.l,t.l+e);return t.l+=e,(e&3)>0&&(t.l+=4-(e&3)&3),n}function parse_ClipboardData(t){var e={};return e.Size=t.read_shift(4),t.l+=e.Size+3-(e.Size-1)%4,e}function parse_TypedPropertyValue(t,e,n){var a=t.read_shift(2),o,l=n||{};if(t.l+=2,e!==VT_VARIANT&&a!==e&&VT_CUSTOM.indexOf(e)===-1&&!((e&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+e+" saw "+a);switch(e===VT_VARIANT?a:e){case 2:return o=t.read_shift(2,"i"),l.raw||(t.l+=2),o;case 3:return o=t.read_shift(4,"i"),o;case 11:return t.read_shift(4)!==0;case 19:return o=t.read_shift(4),o;case 30:return parse_lpstr(t,a,4).replace(chr0,"");case 31:return parse_lpwstr(t);case 64:return parse_FILETIME(t);case 65:return parse_BLOB(t);case 71:return parse_ClipboardData(t);case 80:return parse_VtString(t,a,!l.raw).replace(chr0,"");case 81:return parse_VtUnalignedString(t,a).replace(chr0,"");case 4108:return parse_VtVecHeadingPairValue(t);case 4126:case 4127:return a==4127?parse_VtVecLpwstrValue(t):parse_VtVecUnalignedLpstrValue(t);default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+a)}}function write_TypedPropertyValue(t,e){var n=new_buf(4),a=new_buf(4);switch(n.write_shift(4,t==80?31:t),t){case 3:a.write_shift(-4,e);break;case 5:a=new_buf(8),a.write_shift(8,e,"f");break;case 11:a.write_shift(4,e?1:0);break;case 64:a=write_FILETIME(e);break;case 31:case 80:for(a=new_buf(4+2*(e.length+1)+(e.length%2?0:2)),a.write_shift(4,e.length+1),a.write_shift(0,e,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+e)}return bconcat([n,a])}function parse_PropertySet(t,e){var n=t.l,a=t.read_shift(4),o=t.read_shift(4),l=[],u=0,d=0,m=-1,y={};for(u=0;u!=o;++u){var b=t.read_shift(4),_=t.read_shift(4);l[u]=[b,_+n]}l.sort(function(D,q){return D[1]-q[1]});var w={};for(u=0;u!=o;++u){if(t.l!==l[u][1]){var E=!0;if(u>0&&e)switch(e[l[u-1][0]].t){case 2:t.l+2===l[u][1]&&(t.l+=2,E=!1);break;case 80:t.l<=l[u][1]&&(t.l=l[u][1],E=!1);break;case 4108:t.l<=l[u][1]&&(t.l=l[u][1],E=!1);break}if((!e||u==0)&&t.l<=l[u][1]&&(E=!1,t.l=l[u][1]),E)throw new Error("Read Error: Expected address "+l[u][1]+" at "+t.l+" :"+u)}if(e){if(l[u][0]==0&&l.length>u+1&&l[u][1]==l[u+1][1])continue;var A=e[l[u][0]];if(w[A.n]=parse_TypedPropertyValue(t,A.t,{raw:!0}),A.p==="version"&&(w[A.n]=String(w[A.n]>>16)+"."+("0000"+String(w[A.n]&65535)).slice(-4)),A.n=="CodePage")switch(w[A.n]){case 0:w[A.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:set_cp(d=w[A.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+w[A.n])}}else if(l[u][0]===1){if(d=w.CodePage=parse_TypedPropertyValue(t,VT_I2),set_cp(d),m!==-1){var C=t.l;t.l=l[m][1],y=parse_dictionary(t,d),t.l=C}}else if(l[u][0]===0){if(d===0){m=u,t.l=l[u+1][1];continue}y=parse_dictionary(t,d)}else{var k=y[l[u][0]],B;switch(t[t.l]){case 65:t.l+=4,B=parse_BLOB(t);break;case 30:t.l+=4,B=parse_VtString(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,B=parse_VtString(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,B=t.read_shift(4,"i");break;case 19:t.l+=4,B=t.read_shift(4);break;case 5:t.l+=4,B=t.read_shift(8,"f");break;case 11:t.l+=4,B=parsebool(t,4);break;case 64:t.l+=4,B=parseDate(parse_FILETIME(t));break;default:throw new Error("unparsed value: "+t[t.l])}w[k]=B}}return t.l=n+a,w}var XLSPSSkip=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function guess_property_type(t){switch(typeof t){case"boolean":return 11;case"number":return(t|0)==t?3:5;case"string":return 31;case"object":if(t instanceof Date)return 64;break}return-1}function write_PropertySet(t,e,n){var a=new_buf(8),o=[],l=[],u=8,d=0,m=new_buf(8),y=new_buf(8);if(m.write_shift(4,2),m.write_shift(4,1200),y.write_shift(4,1),l.push(m),o.push(y),u+=8+m.length,!e){y=new_buf(8),y.write_shift(4,0),o.unshift(y);var b=[new_buf(4)];for(b[0].write_shift(4,t.length),d=0;d<t.length;++d){var _=t[d][0];for(m=new_buf(4+4+2*(_.length+1)+(_.length%2?0:2)),m.write_shift(4,d+2),m.write_shift(4,_.length+1),m.write_shift(0,_,"dbcs");m.l!=m.length;)m.write_shift(1,0);b.push(m)}m=bconcat(b),l.unshift(m),u+=8+m.length}for(d=0;d<t.length;++d)if(!(e&&!e[t[d][0]])&&!(XLSPSSkip.indexOf(t[d][0])>-1||PseudoPropsPairs.indexOf(t[d][0])>-1)&&t[d][1]!=null){var w=t[d][1],E=0;if(e){E=+e[t[d][0]];var A=n[E];if(A.p=="version"&&typeof w=="string"){var C=w.split(".");w=(+C[0]<<16)+(+C[1]||0)}m=write_TypedPropertyValue(A.t,w)}else{var k=guess_property_type(w);k==-1&&(k=31,w=String(w)),m=write_TypedPropertyValue(k,w)}l.push(m),y=new_buf(8),y.write_shift(4,e?E:2+d),o.push(y),u+=8+m.length}var B=8*(l.length+1);for(d=0;d<l.length;++d)o[d].write_shift(4,B),B+=l[d].length;return a.write_shift(4,u),a.write_shift(4,l.length),bconcat([a].concat(o).concat(l))}function parse_PropertySetStream(t,e,n){var a=t.content;if(!a)return{};prep_blob(a,0);var o,l,u,d,m=0;a.chk("feff","Byte Order: "),a.read_shift(2);var y=a.read_shift(4),b=a.read_shift(16);if(b!==CFB.utils.consts.HEADER_CLSID&&b!==n)throw new Error("Bad PropertySet CLSID "+b);if(o=a.read_shift(4),o!==1&&o!==2)throw new Error("Unrecognized #Sets: "+o);if(l=a.read_shift(16),d=a.read_shift(4),o===1&&d!==a.l)throw new Error("Length mismatch: "+d+" !== "+a.l);o===2&&(u=a.read_shift(16),m=a.read_shift(4));var _=parse_PropertySet(a,e),w={SystemIdentifier:y};for(var E in _)w[E]=_[E];if(w.FMTID=l,o===1)return w;if(m-a.l==2&&(a.l+=2),a.l!==m)throw new Error("Length mismatch 2: "+a.l+" !== "+m);var A;try{A=parse_PropertySet(a,null)}catch{}for(E in A)w[E]=A[E];return w.FMTID=[l,u],w}function write_PropertySetStream(t,e,n,a,o,l){var u=new_buf(o?68:48),d=[u];u.write_shift(2,65534),u.write_shift(2,0),u.write_shift(4,842412599),u.write_shift(16,CFB.utils.consts.HEADER_CLSID,"hex"),u.write_shift(4,o?2:1),u.write_shift(16,e,"hex"),u.write_shift(4,o?68:48);var m=write_PropertySet(t,n,a);if(d.push(m),o){var y=write_PropertySet(o,null,null);u.write_shift(16,l,"hex"),u.write_shift(4,68+m.length),d.push(y)}return bconcat(d)}function parsenoop2(t,e){return t.read_shift(e),null}function writezeroes(t,e){e||(e=new_buf(t));for(var n=0;n<t;++n)e.write_shift(1,0);return e}function parslurp(t,e,n){for(var a=[],o=t.l+e;t.l<o;)a.push(n(t,o-t.l));if(o!==t.l)throw new Error("Slurp error");return a}function parsebool(t,e){return t.read_shift(e)===1}function writebool(t,e){return e||(e=new_buf(2)),e.write_shift(2,+!!t),e}function parseuint16(t){return t.read_shift(2,"u")}function writeuint16(t,e){return e||(e=new_buf(2)),e.write_shift(2,t),e}function parseuint16a(t,e){return parslurp(t,e,parseuint16)}function parse_Bes(t){var e=t.read_shift(1),n=t.read_shift(1);return n===1?e:e===1}function write_Bes(t,e,n){return n||(n=new_buf(2)),n.write_shift(1,e=="e"?+t:+!!t),n.write_shift(1,e=="e"?1:0),n}function parse_ShortXLUnicodeString(t,e,n){var a=t.read_shift(n&&n.biff>=12?2:1),o="sbcs-cont",l=current_codepage;if(n&&n.biff>=8&&(current_codepage=1200),!n||n.biff==8){var u=t.read_shift(1);u&&(o="dbcs-cont")}else n.biff==12&&(o="wstr");n.biff>=2&&n.biff<=5&&(o="cpstr");var d=a?t.read_shift(a,o):"";return current_codepage=l,d}function parse_XLUnicodeRichExtendedString(t){var e=current_codepage;current_codepage=1200;var n=t.read_shift(2),a=t.read_shift(1),o=a&4,l=a&8,u=1+(a&1),d=0,m,y={};l&&(d=t.read_shift(2)),o&&(m=t.read_shift(4));var b=u==2?"dbcs-cont":"sbcs-cont",_=n===0?"":t.read_shift(n,b);return l&&(t.l+=4*d),o&&(t.l+=m),y.t=_,l||(y.raw="<t>"+y.t+"</t>",y.r=y.t),current_codepage=e,y}function write_XLUnicodeRichExtendedString(t){var e=t.t||"",n=new_buf(3+0);n.write_shift(2,e.length),n.write_shift(1,1);var a=new_buf(2*e.length);a.write_shift(2*e.length,e,"utf16le");var o=[n,a];return bconcat(o)}function parse_XLUnicodeStringNoCch(t,e,n){var a;if(n){if(n.biff>=2&&n.biff<=5)return t.read_shift(e,"cpstr");if(n.biff>=12)return t.read_shift(e,"dbcs-cont")}var o=t.read_shift(1);return o===0?a=t.read_shift(e,"sbcs-cont"):a=t.read_shift(e,"dbcs-cont"),a}function parse_XLUnicodeString(t,e,n){var a=t.read_shift(n&&n.biff==2?1:2);return a===0?(t.l++,""):parse_XLUnicodeStringNoCch(t,a,n)}function parse_XLUnicodeString2(t,e,n){if(n.biff>5)return parse_XLUnicodeString(t,e,n);var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,n.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function write_XLUnicodeString(t,e,n){return n||(n=new_buf(3+2*t.length)),n.write_shift(2,t.length),n.write_shift(1,1),n.write_shift(31,t,"utf16le"),n}function parse_ControlInfo(t){var e=t.read_shift(1);t.l++;var n=t.read_shift(2);return t.l+=2,[e,n]}function parse_URLMoniker(t){var e=t.read_shift(4),n=t.l,a=!1;e>24&&(t.l+=e-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),t.l=n);var o=t.read_shift((a?e-24:e)>>1,"utf16le").replace(chr0,"");return a&&(t.l+=24),o}function parse_FileMoniker(t){for(var e=t.read_shift(2),n="";e-- >0;)n+="../";var a=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var o=t.read_shift(4);if(o===0)return n+a.replace(/\\/g,"/");var l=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var u=t.read_shift(l>>1,"utf16le").replace(chr0,"");return n+u}function parse_HyperlinkMoniker(t,e){var n=t.read_shift(16);switch(n){case"e0c9ea79f9bace118c8200aa004ba90b":return parse_URLMoniker(t);case"0303000000000000c000000000000046":return parse_FileMoniker(t);default:throw new Error("Unsupported Moniker "+n)}}function parse_HyperlinkString(t){var e=t.read_shift(4),n=e>0?t.read_shift(e,"utf16le").replace(chr0,""):"";return n}function write_HyperlinkString(t,e){e||(e=new_buf(6+t.length*2)),e.write_shift(4,1+t.length);for(var n=0;n<t.length;++n)e.write_shift(2,t.charCodeAt(n));return e.write_shift(2,0),e}function parse_Hyperlink(t,e){var n=t.l+e,a=t.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var o=t.read_shift(2);t.l+=2;var l,u,d,m,y="",b,_;o&16&&(l=parse_HyperlinkString(t,n-t.l)),o&128&&(u=parse_HyperlinkString(t,n-t.l)),(o&257)===257&&(d=parse_HyperlinkString(t,n-t.l)),(o&257)===1&&(m=parse_HyperlinkMoniker(t,n-t.l)),o&8&&(y=parse_HyperlinkString(t,n-t.l)),o&32&&(b=t.read_shift(16)),o&64&&(_=parse_FILETIME(t)),t.l=n;var w=u||d||m||"";w&&y&&(w+="#"+y),w||(w="#"+y),o&2&&w.charAt(0)=="/"&&w.charAt(1)!="/"&&(w="file://"+w);var E={Target:w};return b&&(E.guid=b),_&&(E.time=_),l&&(E.Tooltip=l),E}function write_Hyperlink(t){var e=new_buf(512),n=0,a=t.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var o=a.indexOf("#"),l=o>-1?31:23;switch(a.charAt(0)){case"#":l=28;break;case".":l&=-3;break}e.write_shift(4,2),e.write_shift(4,l);var u=[8,6815827,6619237,4849780,83];for(n=0;n<u.length;++n)e.write_shift(4,u[n]);if(l==28)a=a.slice(1),write_HyperlinkString(a,e);else if(l&2){for(u="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),n=0;n<u.length;++n)e.write_shift(1,parseInt(u[n],16));var d=o>-1?a.slice(0,o):a;for(e.write_shift(4,2*(d.length+1)),n=0;n<d.length;++n)e.write_shift(2,d.charCodeAt(n));e.write_shift(2,0),l&8&&write_HyperlinkString(o>-1?a.slice(o+1):"",e)}else{for(u="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),n=0;n<u.length;++n)e.write_shift(1,parseInt(u[n],16));for(var m=0;a.slice(m*3,m*3+3)=="../"||a.slice(m*3,m*3+3)=="..\\";)++m;for(e.write_shift(2,m),e.write_shift(4,a.length-3*m+1),n=0;n<a.length-3*m;++n)e.write_shift(1,a.charCodeAt(n+3*m)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),n=0;n<6;++n)e.write_shift(4,0)}return e.slice(0,e.l)}function parse_LongRGBA(t){var e=t.read_shift(1),n=t.read_shift(1),a=t.read_shift(1),o=t.read_shift(1);return[e,n,a,o]}function parse_LongRGB(t,e){var n=parse_LongRGBA(t);return n[3]=0,n}function parse_XLSCell(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return{r:e,c:n,ixfe:a}}function write_XLSCell(t,e,n,a){return a||(a=new_buf(6)),a.write_shift(2,t),a.write_shift(2,e),a.write_shift(2,n||0),a}function parse_frtHeader(t){var e=t.read_shift(2),n=t.read_shift(2);return t.l+=8,{type:e,flags:n}}function parse_OptXLUnicodeString(t,e,n){return e===0?"":parse_XLUnicodeString2(t,e,n)}function parse_XTI(t,e,n){var a=n.biff>8?4:2,o=t.read_shift(a),l=t.read_shift(a,"i"),u=t.read_shift(a,"i");return[o,l,u]}function parse_RkRec(t){var e=t.read_shift(2),n=parse_RkNumber(t);return[e,n]}function parse_AddinUdf(t,e,n){t.l+=4,e-=4;var a=t.l+e,o=parse_ShortXLUnicodeString(t,e,n),l=t.read_shift(2);if(a-=t.l,l!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+l);return t.l+=l,o}function parse_Ref8U(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2);return{s:{c:a,r:e},e:{c:o,r:n}}}function write_Ref8U(t,e){return e||(e=new_buf(8)),e.write_shift(2,t.s.r),e.write_shift(2,t.e.r),e.write_shift(2,t.s.c),e.write_shift(2,t.e.c),e}function parse_RefU(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(1),o=t.read_shift(1);return{s:{c:a,r:e},e:{c:o,r:n}}}var parse_Ref=parse_RefU;function parse_FtCmo(t){t.l+=4;var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2);return t.l+=12,[n,e,a]}function parse_FtNts(t){var e={};return t.l+=4,t.l+=16,e.fSharedNote=t.read_shift(2),t.l+=4,e}function parse_FtCf(t){var e={};return t.l+=4,t.cf=t.read_shift(2),e}function parse_FtSkip(t){t.l+=2,t.l+=t.read_shift(2)}var FtTab={0:parse_FtSkip,4:parse_FtSkip,5:parse_FtSkip,6:parse_FtSkip,7:parse_FtCf,8:parse_FtSkip,9:parse_FtSkip,10:parse_FtSkip,11:parse_FtSkip,12:parse_FtSkip,13:parse_FtNts,14:parse_FtSkip,15:parse_FtSkip,16:parse_FtSkip,17:parse_FtSkip,18:parse_FtSkip,19:parse_FtSkip,20:parse_FtSkip,21:parse_FtCmo};function parse_FtArray(t,e){for(var n=t.l+e,a=[];t.l<n;){var o=t.read_shift(2);t.l-=2;try{a.push(FtTab[o](t,n-t.l))}catch{return t.l=n,a}}return t.l!=n&&(t.l=n),a}function parse_BOF(t,e){var n={BIFFVer:0,dt:0};switch(n.BIFFVer=t.read_shift(2),e-=2,e>=2&&(n.dt=t.read_shift(2),t.l-=2),n.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(e>6)throw new Error("Unexpected BIFF Ver "+n.BIFFVer)}return t.read_shift(e),n}function write_BOF(t,e,n){var a=1536,o=16;switch(n.bookType){case"biff8":break;case"biff5":a=1280,o=8;break;case"biff4":a=4,o=6;break;case"biff3":a=3,o=6;break;case"biff2":a=2,o=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var l=new_buf(o);return l.write_shift(2,a),l.write_shift(2,e),o>4&&l.write_shift(2,29282),o>6&&l.write_shift(2,1997),o>8&&(l.write_shift(2,49161),l.write_shift(2,1),l.write_shift(2,1798),l.write_shift(2,0)),l}function parse_InterfaceHdr(t,e){return e===0||t.read_shift(2),1200}function parse_WriteAccess(t,e,n){if(n.enc)return t.l+=e,"";var a=t.l,o=parse_XLUnicodeString2(t,0,n);return t.read_shift(e+a-t.l),o}function write_WriteAccess(t,e){var n=!e||e.biff==8,a=new_buf(n?112:54);for(a.write_shift(e.biff==8?2:1,7),n&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(n?0:536870912));a.l<a.length;)a.write_shift(1,n?0:32);return a}function parse_WsBool(t,e,n){var a=n&&n.biff==8||e==2?t.read_shift(2):(t.l+=e,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function parse_BoundSheet8(t,e,n){var a=t.read_shift(4),o=t.read_shift(1)&3,l=t.read_shift(1);switch(l){case 0:l="Worksheet";break;case 1:l="Macrosheet";break;case 2:l="Chartsheet";break;case 6:l="VBAModule";break}var u=parse_ShortXLUnicodeString(t,0,n);return u.length===0&&(u="Sheet1"),{pos:a,hs:o,dt:l,name:u}}function write_BoundSheet8(t,e){var n=!e||e.biff>=8?2:1,a=new_buf(8+n*t.name.length);a.write_shift(4,t.pos),a.write_shift(1,t.hs||0),a.write_shift(1,t.dt),a.write_shift(1,t.name.length),e.biff>=8&&a.write_shift(1,1),a.write_shift(n*t.name.length,t.name,e.biff<8?"sbcs":"utf16le");var o=a.slice(0,a.l);return o.l=a.l,o}function parse_SST(t,e){for(var n=t.l+e,a=t.read_shift(4),o=t.read_shift(4),l=[],u=0;u!=o&&t.l<n;++u)l.push(parse_XLUnicodeRichExtendedString(t));return l.Count=a,l.Unique=o,l}function write_SST(t,e){var n=new_buf(8);n.write_shift(4,t.Count),n.write_shift(4,t.Unique);for(var a=[],o=0;o<t.length;++o)a[o]=write_XLUnicodeRichExtendedString(t[o]);var l=bconcat([n].concat(a));return l.parts=[n.length].concat(a.map(function(u){return u.length})),l}function parse_ExtSST(t,e){var n={};return n.dsst=t.read_shift(2),t.l+=e-2,n}function parse_Row(t){var e={};e.r=t.read_shift(2),e.c=t.read_shift(2),e.cnt=t.read_shift(2)-e.c;var n=t.read_shift(2);t.l+=4;var a=t.read_shift(1);return t.l+=3,a&7&&(e.level=a&7),a&32&&(e.hidden=!0),a&64&&(e.hpt=n/20),e}function parse_ForceFullCalculation(t){var e=parse_frtHeader(t);if(e.type!=2211)throw new Error("Invalid Future Record "+e.type);var n=t.read_shift(4);return n!==0}function parse_RecalcId(t){return t.read_shift(2),t.read_shift(4)}function parse_DefaultRowHeight(t,e,n){var a=0;n&&n.biff==2||(a=t.read_shift(2));var o=t.read_shift(2);n&&n.biff==2&&(a=1-(o>>15),o&=32767);var l={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[l,o]}function parse_Window1(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2),d=t.read_shift(2),m=t.read_shift(2),y=t.read_shift(2);return{Pos:[e,n],Dim:[a,o],Flags:l,CurTab:u,FirstTab:d,Selected:m,TabRatio:y}}function write_Window1(){var t=new_buf(18);return t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,29280),t.write_shift(2,17600),t.write_shift(2,56),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,1),t.write_shift(2,500),t}function parse_Window2(t,e,n){if(n&&n.biff>=2&&n.biff<5)return{};var a=t.read_shift(2);return{RTL:a&64}}function write_Window2(t){var e=new_buf(18),n=1718;return t&&t.RTL&&(n|=64),e.write_shift(2,n),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function parse_Pane(){}function parse_Font(t,e,n){var a={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(n&&n.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return a.name=parse_ShortXLUnicodeString(t,0,n),a}function write_Font(t,e){var n=t.name||"Arial",a=e&&e.biff==5,o=a?15+n.length:16+2*n.length,l=new_buf(o);return l.write_shift(2,(t.sz||12)*20),l.write_shift(4,0),l.write_shift(2,400),l.write_shift(4,0),l.write_shift(2,0),l.write_shift(1,n.length),a||l.write_shift(1,1),l.write_shift((a?1:2)*n.length,n,a?"sbcs":"utf16le"),l}function parse_LabelSst(t){var e=parse_XLSCell(t);return e.isst=t.read_shift(4),e}function write_LabelSst(t,e,n,a){var o=new_buf(10);return write_XLSCell(t,e,a,o),o.write_shift(4,n),o}function parse_Label(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=t.l+e,o=parse_XLSCell(t);n.biff==2&&t.l++;var l=parse_XLUnicodeString(t,a-t.l,n);return o.val=l,o}function write_Label(t,e,n,a,o){var l=!o||o.biff==8,u=new_buf(6+2+ +l+(1+l)*n.length);return write_XLSCell(t,e,a,u),u.write_shift(2,n.length),l&&u.write_shift(1,1),u.write_shift((1+l)*n.length,n,l?"utf16le":"sbcs"),u}function parse_Format(t,e,n){var a=t.read_shift(2),o=parse_XLUnicodeString2(t,0,n);return[a,o]}function write_Format(t,e,n,a){var o=n&&n.biff==5;a||(a=new_buf(o?3+e.length:5+2*e.length)),a.write_shift(2,t),a.write_shift(o?1:2,e.length),o||a.write_shift(1,1),a.write_shift((o?1:2)*e.length,e,o?"sbcs":"utf16le");var l=a.length>a.l?a.slice(0,a.l):a;return l.l==null&&(l.l=l.length),l}var parse_BIFF2Format=parse_XLUnicodeString2;function parse_Dimensions(t,e,n){var a=t.l+e,o=n.biff==8||!n.biff?4:2,l=t.read_shift(o),u=t.read_shift(o),d=t.read_shift(2),m=t.read_shift(2);return t.l=a,{s:{r:l,c:d},e:{r:u,c:m}}}function write_Dimensions(t,e){var n=e.biff==8||!e.biff?4:2,a=new_buf(2*n+6);return a.write_shift(n,t.s.r),a.write_shift(n,t.e.r+1),a.write_shift(2,t.s.c),a.write_shift(2,t.e.c+1),a.write_shift(2,0),a}function parse_RK(t){var e=t.read_shift(2),n=t.read_shift(2),a=parse_RkRec(t);return{r:e,c:n,ixfe:a[0],rknum:a[1]}}function parse_MulRk(t,e){for(var n=t.l+e-2,a=t.read_shift(2),o=t.read_shift(2),l=[];t.l<n;)l.push(parse_RkRec(t));if(t.l!==n)throw new Error("MulRK read error");var u=t.read_shift(2);if(l.length!=u-o+1)throw new Error("MulRK length mismatch");return{r:a,c:o,C:u,rkrec:l}}function parse_MulBlank(t,e){for(var n=t.l+e-2,a=t.read_shift(2),o=t.read_shift(2),l=[];t.l<n;)l.push(t.read_shift(2));if(t.l!==n)throw new Error("MulBlank read error");var u=t.read_shift(2);if(l.length!=u-o+1)throw new Error("MulBlank length mismatch");return{r:a,c:o,C:u,ixfe:l}}function parse_CellStyleXF(t,e,n,a){var o={},l=t.read_shift(4),u=t.read_shift(4),d=t.read_shift(4),m=t.read_shift(2);return o.patternType=XLSFillPattern[d>>26],a.cellStyles&&(o.alc=l&7,o.fWrap=l>>3&1,o.alcV=l>>4&7,o.fJustLast=l>>7&1,o.trot=l>>8&255,o.cIndent=l>>16&15,o.fShrinkToFit=l>>20&1,o.iReadOrder=l>>22&2,o.fAtrNum=l>>26&1,o.fAtrFnt=l>>27&1,o.fAtrAlc=l>>28&1,o.fAtrBdr=l>>29&1,o.fAtrPat=l>>30&1,o.fAtrProt=l>>31&1,o.dgLeft=u&15,o.dgRight=u>>4&15,o.dgTop=u>>8&15,o.dgBottom=u>>12&15,o.icvLeft=u>>16&127,o.icvRight=u>>23&127,o.grbitDiag=u>>30&3,o.icvTop=d&127,o.icvBottom=d>>7&127,o.icvDiag=d>>14&127,o.dgDiag=d>>21&15,o.icvFore=m&127,o.icvBack=m>>7&127,o.fsxButton=m>>14&1),o}function parse_XF(t,e,n){var a={};return a.ifnt=t.read_shift(2),a.numFmtId=t.read_shift(2),a.flags=t.read_shift(2),a.fStyle=a.flags>>2&1,e-=6,a.data=parse_CellStyleXF(t,e,a.fStyle,n),a}function write_XF(t,e,n,a){var o=n&&n.biff==5;a||(a=new_buf(o?16:20)),a.write_shift(2,0),t.style?(a.write_shift(2,t.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,t.numFmtId||0),a.write_shift(2,e<<4));var l=0;return t.numFmtId>0&&o&&(l|=1024),a.write_shift(4,l),a.write_shift(4,0),o||a.write_shift(4,0),a.write_shift(2,0),a}function parse_Guts(t){t.l+=4;var e=[t.read_shift(2),t.read_shift(2)];if(e[0]!==0&&e[0]--,e[1]!==0&&e[1]--,e[0]>7||e[1]>7)throw new Error("Bad Gutters: "+e.join("|"));return e}function write_Guts(t){var e=new_buf(8);return e.write_shift(4,0),e.write_shift(2,t[0]?t[0]+1:0),e.write_shift(2,t[1]?t[1]+1:0),e}function parse_BoolErr(t,e,n){var a=parse_XLSCell(t);(n.biff==2||e==9)&&++t.l;var o=parse_Bes(t);return a.val=o,a.t=o===!0||o===!1?"b":"e",a}function write_BoolErr(t,e,n,a,o,l){var u=new_buf(8);return write_XLSCell(t,e,a,u),write_Bes(n,l,u),u}function parse_Number(t,e,n){n.biffguess&&n.biff==2&&(n.biff=5);var a=parse_XLSCell(t),o=parse_Xnum(t);return a.val=o,a}function write_Number(t,e,n,a){var o=new_buf(14);return write_XLSCell(t,e,a,o),write_Xnum(n,o),o}var parse_XLHeaderFooter=parse_OptXLUnicodeString;function parse_SupBook(t,e,n){var a=t.l+e,o=t.read_shift(2),l=t.read_shift(2);if(n.sbcch=l,l==1025||l==14849)return[l,o];if(l<1||l>255)throw new Error("Unexpected SupBook type: "+l);for(var u=parse_XLUnicodeStringNoCch(t,l),d=[];a>t.l;)d.push(parse_XLUnicodeString(t));return[l,o,u,d]}function parse_ExternName(t,e,n){var a=t.read_shift(2),o,l={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return n.sbcch===14849&&(o=parse_AddinUdf(t,e-2,n)),l.body=o||t.read_shift(e-2),typeof o=="string"&&(l.Name=o),l}function parse_Lbl(t,e,n){var a=t.l+e,o=t.read_shift(2),l=t.read_shift(1),u=t.read_shift(1),d=t.read_shift(n&&n.biff==2?1:2),m=0;(!n||n.biff>=5)&&(n.biff!=5&&(t.l+=2),m=t.read_shift(2),n.biff==5&&(t.l+=2),t.l+=4);var y=parse_XLUnicodeStringNoCch(t,u,n);o&32&&(y=XLSLblBuiltIn[y.charCodeAt(0)]);var b=a-t.l;n&&n.biff==2&&--b;var _=a==t.l||d===0||!(b>0)?[]:parse_NameParsedFormula(t,b,n,d);return{chKey:l,Name:y,itab:m,rgce:_}}function parse_ExternSheet(t,e,n){if(n.biff<8)return parse_BIFF5ExternSheet(t,e,n);for(var a=[],o=t.l+e,l=t.read_shift(n.biff>8?4:2);l--!==0;)a.push(parse_XTI(t,n.biff>8?12:6,n));if(t.l!=o)throw new Error("Bad ExternSheet: "+t.l+" != "+o);return a}function parse_BIFF5ExternSheet(t,e,n){t[t.l+1]==3&&t[t.l]++;var a=parse_ShortXLUnicodeString(t,e,n);return a.charCodeAt(0)==3?a.slice(1):a}function parse_NameCmt(t,e,n){if(n.biff<8){t.l+=e;return}var a=t.read_shift(2),o=t.read_shift(2),l=parse_XLUnicodeStringNoCch(t,a,n),u=parse_XLUnicodeStringNoCch(t,o,n);return[l,u]}function parse_ShrFmla(t,e,n){var a=parse_RefU(t);t.l++;var o=t.read_shift(1);return e-=8,[parse_SharedParsedFormula(t,e,n),o,a]}function parse_Array(t,e,n){var a=parse_Ref(t);switch(n.biff){case 2:t.l++,e-=7;break;case 3:case 4:t.l+=2,e-=8;break;default:t.l+=6,e-=12}return[a,parse_ArrayParsedFormula(t,e,n)]}function parse_MTRSettings(t){var e=t.read_shift(4)!==0,n=t.read_shift(4)!==0,a=t.read_shift(4);return[e,n,a]}function parse_NoteSh(t,e,n){if(!(n.biff<8)){var a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2),u=t.read_shift(2),d=parse_XLUnicodeString2(t,0,n);return n.biff<8&&t.read_shift(1),[{r:a,c:o},d,u,l]}}function parse_Note(t,e,n){return parse_NoteSh(t,e,n)}function parse_MergeCells(t,e){for(var n=[],a=t.read_shift(2);a--;)n.push(parse_Ref8U(t));return n}function write_MergeCells(t){var e=new_buf(2+t.length*8);e.write_shift(2,t.length);for(var n=0;n<t.length;++n)write_Ref8U(t[n],e);return e}function parse_Obj(t,e,n){if(n&&n.biff<8)return parse_BIFF5Obj(t,e,n);var a=parse_FtCmo(t),o=parse_FtArray(t,e-22,a[1]);return{cmo:a,ft:o}}var parse_BIFF5OT={8:function(t,e){var n=t.l+e;t.l+=10;var a=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var o=t.read_shift(1);return t.l+=o,t.l=n,{fmt:a}}};function parse_BIFF5Obj(t,e,n){t.l+=4;var a=t.read_shift(2),o=t.read_shift(2),l=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,e-=36;var u=[];return u.push((parse_BIFF5OT[a]||parsenoop)(t,e,n)),{cmo:[o,a,l],ft:u}}function parse_TxO(t,e,n){var a=t.l,o="";try{t.l+=4;var l=(n.lastobj||{cmo:[0,0]}).cmo[1],u;[0,5,7,11,12,14].indexOf(l)==-1?t.l+=6:u=parse_ControlInfo(t,6,n);var d=t.read_shift(2);t.read_shift(2),parseuint16(t,2);var m=t.read_shift(2);t.l+=m;for(var y=1;y<t.lens.length-1;++y){if(t.l-a!=t.lens[y])throw new Error("TxO: bad continue record");var b=t[t.l],_=parse_XLUnicodeStringNoCch(t,t.lens[y+1]-t.lens[y]-1);if(o+=_,o.length>=(b?d:2*d))break}if(o.length!==d&&o.length!==d*2)throw new Error("cchText: "+d+" != "+o.length);return t.l=a+e,{t:o}}catch{return t.l=a+e,{t:o}}}function parse_HLink(t,e){var n=parse_Ref8U(t);t.l+=16;var a=parse_Hyperlink(t,e-24);return[n,a]}function write_HLink(t){var e=new_buf(24),n=decode_cell(t[0]);e.write_shift(2,n.r),e.write_shift(2,n.r),e.write_shift(2,n.c),e.write_shift(2,n.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),o=0;o<16;++o)e.write_shift(1,parseInt(a[o],16));return bconcat([e,write_Hyperlink(t[1])])}function parse_HLinkTooltip(t,e){t.read_shift(2);var n=parse_Ref8U(t),a=t.read_shift((e-10)/2,"dbcs-cont");return a=a.replace(chr0,""),[n,a]}function write_HLinkTooltip(t){var e=t[1].Tooltip,n=new_buf(10+2*(e.length+1));n.write_shift(2,2048);var a=decode_cell(t[0]);n.write_shift(2,a.r),n.write_shift(2,a.r),n.write_shift(2,a.c),n.write_shift(2,a.c);for(var o=0;o<e.length;++o)n.write_shift(2,e.charCodeAt(o));return n.write_shift(2,0),n}function parse_Country(t){var e=[0,0],n;return n=t.read_shift(2),e[0]=CountryEnum[n]||n,n=t.read_shift(2),e[1]=CountryEnum[n]||n,e}function write_Country(t){return t||(t=new_buf(4)),t.write_shift(2,1),t.write_shift(2,1),t}function parse_ClrtClient(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(parse_LongRGB(t));return n}function parse_Palette(t){for(var e=t.read_shift(2),n=[];e-- >0;)n.push(parse_LongRGB(t));return n}function parse_XFCRC(t){t.l+=2;var e={cxfs:0,crc:0};return e.cxfs=t.read_shift(2),e.crc=t.read_shift(4),e}function parse_ColInfo(t,e,n){if(!n.cellStyles)return parsenoop(t,e);var a=n&&n.biff>=12?4:2,o=t.read_shift(a),l=t.read_shift(a),u=t.read_shift(a),d=t.read_shift(a),m=t.read_shift(2);a==2&&(t.l+=2);var y={s:o,e:l,w:u,ixfe:d,flags:m};return(n.biff>=5||!n.biff)&&(y.level=m>>8&7),y}function write_ColInfo(t,e){var n=new_buf(12);n.write_shift(2,e),n.write_shift(2,e),n.write_shift(2,t.width*256),n.write_shift(2,0);var a=0;return t.hidden&&(a|=1),n.write_shift(1,a),a=t.level||0,n.write_shift(1,a),n.write_shift(2,0),n}function parse_Setup(t,e){var n={};return e<32||(t.l+=16,n.header=parse_Xnum(t),n.footer=parse_Xnum(t),t.l+=2),n}function parse_ShtProps(t,e,n){var a={area:!1};if(n.biff!=5)return t.l+=e,a;var o=t.read_shift(1);return t.l+=3,o&16&&(a.area=!0),a}function write_RRTabId(t){for(var e=new_buf(2*t),n=0;n<t;++n)e.write_shift(2,n+1);return e}var parse_Blank=parse_XLSCell,parse_Scl=parseuint16a,parse_String=parse_XLUnicodeString;function parse_ImData(t){var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(4),o={fmt:e,env:n,len:a,data:t.slice(t.l,t.l+a)};return t.l+=a,o}function parse_BIFF2STR(t,e,n){n.biffguess&&n.biff==5&&(n.biff=2);var a=parse_XLSCell(t);++t.l;var o=parse_XLUnicodeString2(t,e-7,n);return a.t="str",a.val=o,a}function parse_BIFF2NUM(t){var e=parse_XLSCell(t);++t.l;var n=parse_Xnum(t);return e.t="n",e.val=n,e}function write_BIFF2NUM(t,e,n){var a=new_buf(15);return write_BIFF2Cell(a,t,e),a.write_shift(8,n,"f"),a}function parse_BIFF2INT(t){var e=parse_XLSCell(t);++t.l;var n=t.read_shift(2);return e.t="n",e.val=n,e}function write_BIFF2INT(t,e,n){var a=new_buf(9);return write_BIFF2Cell(a,t,e),a.write_shift(2,n),a}function parse_BIFF2STRING(t){var e=t.read_shift(1);return e===0?(t.l++,""):t.read_shift(e,"sbcs-cont")}function parse_BIFF2FONTXTRA(t,e){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=e-13}function parse_RString(t,e,n){var a=t.l+e,o=parse_XLSCell(t),l=t.read_shift(2),u=parse_XLUnicodeStringNoCch(t,l,n);return t.l=a,o.t="str",o.val=u,o}var DBF_SUPPORTED_VERSIONS=[2,3,48,49,131,139,140,245],DBF=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=evert({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function n(d,m){var y=[],b=new_raw_buf(1);switch(m.type){case"base64":b=s2a(Base64_decode(d));break;case"binary":b=s2a(d);break;case"buffer":case"array":b=d;break}prep_blob(b,0);var _=b.read_shift(1),w=!!(_&136),E=!1,A=!1;switch(_){case 2:break;case 3:break;case 48:E=!0,w=!0;break;case 49:E=!0,w=!0;break;case 131:break;case 139:break;case 140:A=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+_.toString(16))}var C=0,k=521;_==2&&(C=b.read_shift(2)),b.l+=3,_!=2&&(C=b.read_shift(4)),C>1048576&&(C=1e6),_!=2&&(k=b.read_shift(2));var B=b.read_shift(2);m.codepage,_!=2&&(b.l+=16,b.read_shift(1),b[b.l]!==0&&t[b[b.l]],b.l+=1,b.l+=2),A&&(b.l+=36);for(var D=[],q={},j=Math.min(b.length,_==2?521:k-10-(E?264:0)),J=A?32:11;b.l<j&&b[b.l]!=13;)switch(q={},q.name=a2s(b.slice(b.l,b.l+J)).replace(/[\u0000\r\n].*$/g,""),b.l+=J,q.type=String.fromCharCode(b.read_shift(1)),_!=2&&!A&&(q.offset=b.read_shift(4)),q.len=b.read_shift(1),_==2&&(q.offset=b.read_shift(2)),q.dec=b.read_shift(1),q.name.length&&D.push(q),_!=2&&(b.l+=A?13:14),q.type){case"B":(!E||q.len!=8)&&m.WTF&&console.log("Skipping "+q.name+":"+q.type);break;case"G":case"P":m.WTF&&console.log("Skipping "+q.name+":"+q.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+q.type)}if(b[b.l]!==13&&(b.l=k-1),b.read_shift(1)!==13)throw new Error("DBF Terminator not found "+b.l+" "+b[b.l]);b.l=k;var Y=0,L=0;for(y[0]=[],L=0;L!=D.length;++L)y[0][L]=D[L].name;for(;C-- >0;){if(b[b.l]===42){b.l+=B;continue}for(++b.l,y[++Y]=[],L=0,L=0;L!=D.length;++L){var Z=b.slice(b.l,b.l+D[L].len);b.l+=D[L].len,prep_blob(Z,0);var Q=a2s(Z);switch(D[L].type){case"C":Q.trim().length&&(y[Y][L]=Q.replace(/\s+$/,""));break;case"D":Q.length===8?y[Y][L]=new Date(+Q.slice(0,4),+Q.slice(4,6)-1,+Q.slice(6,8)):y[Y][L]=Q;break;case"F":y[Y][L]=parseFloat(Q.trim());break;case"+":case"I":y[Y][L]=A?Z.read_shift(-4,"i")^2147483648:Z.read_shift(4,"i");break;case"L":switch(Q.trim().toUpperCase()){case"Y":case"T":y[Y][L]=!0;break;case"N":case"F":y[Y][L]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Q+"|")}break;case"M":if(!w)throw new Error("DBF Unexpected MEMO for type "+_.toString(16));y[Y][L]="##MEMO##"+(A?parseInt(Q.trim(),10):Z.read_shift(4));break;case"N":Q=Q.replace(/\u0000/g,"").trim(),Q&&Q!="."&&(y[Y][L]=+Q||0);break;case"@":y[Y][L]=new Date(Z.read_shift(-8,"f")-621356832e5);break;case"T":y[Y][L]=new Date((Z.read_shift(4)-2440588)*864e5+Z.read_shift(4));break;case"Y":y[Y][L]=Z.read_shift(4,"i")/1e4+Z.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":y[Y][L]=-Z.read_shift(-8,"f");break;case"B":if(E&&D[L].len==8){y[Y][L]=Z.read_shift(8,"f");break}case"G":case"P":Z.l+=D[L].len;break;case"0":if(D[L].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+D[L].type)}}}if(_!=2&&b.l<b.length&&b[b.l++]!=26)throw new Error("DBF EOF Marker missing "+(b.l-1)+" of "+b.length+" "+b[b.l-1].toString(16));return m&&m.sheetRows&&(y=y.slice(0,m.sheetRows)),m.DBF=D,y}function a(d,m){var y=m||{};y.dateNF||(y.dateNF="yyyymmdd");var b=aoa_to_sheet(n(d,y),y);return b["!cols"]=y.DBF.map(function(_){return{wch:_.len,DBF:_}}),delete y.DBF,b}function o(d,m){try{var y=sheet_to_workbook(a(d,m),m);return y.bookType="dbf",y}catch(b){if(m&&m.WTF)throw b}return{SheetNames:[],Sheets:{}}}var l={B:8,C:250,L:1,D:8,"?":0,"":0};function u(d,m){var y=m||{},b=current_codepage;if(+y.codepage>=0&&set_cp(+y.codepage),y.type=="string")throw new Error("Cannot write DBF to JS string");var _=buf_array(),w=sheet_to_json(d,{header:1,raw:!0,cellDates:!0}),E=w[0],A=w.slice(1),C=d["!cols"]||[],k=0,B=0,D=0,q=1;for(k=0;k<E.length;++k){if(((C[k]||{}).DBF||{}).name){E[k]=C[k].DBF.name,++D;continue}if(E[k]!=null){if(++D,typeof E[k]=="number"&&(E[k]=E[k].toString(10)),typeof E[k]!="string")throw new Error("DBF Invalid column name "+E[k]+" |"+typeof E[k]+"|");if(E.indexOf(E[k])!==k){for(B=0;B<1024;++B)if(E.indexOf(E[k]+"_"+B)==-1){E[k]+="_"+B;break}}}}var j=safe_decode_range(d["!ref"]),J=[],Y=[],L=[];for(k=0;k<=j.e.c-j.s.c;++k){var Z="",Q="",oe=0,ae=[];for(B=0;B<A.length;++B)A[B][k]!=null&&ae.push(A[B][k]);if(ae.length==0||E[k]==null){J[k]="?";continue}for(B=0;B<ae.length;++B){switch(typeof ae[B]){case"number":Q="B";break;case"string":Q="C";break;case"boolean":Q="L";break;case"object":Q=ae[B]instanceof Date?"D":"C";break;default:Q="C"}oe=Math.max(oe,String(ae[B]).length),Z=Z&&Z!=Q?"C":Q}oe>250&&(oe=250),Q=((C[k]||{}).DBF||{}).type,Q=="C"&&C[k].DBF.len>oe&&(oe=C[k].DBF.len),Z=="B"&&Q=="N"&&(Z="N",L[k]=C[k].DBF.dec,oe=C[k].DBF.len),Y[k]=Z=="C"||Q=="N"?oe:l[Z]||0,q+=Y[k],J[k]=Z}var U=_.next(32);for(U.write_shift(4,318902576),U.write_shift(4,A.length),U.write_shift(2,296+32*D),U.write_shift(2,q),k=0;k<4;++k)U.write_shift(4,0);var I=+e[current_codepage]||3;for(U.write_shift(4,0|I<<8),t[I]!=+y.codepage&&(y.codepage&&console.error("DBF Unsupported codepage "+current_codepage+", using 1252"),current_codepage=1252),k=0,B=0;k<E.length;++k)if(E[k]!=null){var x=_.next(32),T=(E[k].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);x.write_shift(1,T,"sbcs"),x.write_shift(1,J[k]=="?"?"C":J[k],"sbcs"),x.write_shift(4,B),x.write_shift(1,Y[k]||l[J[k]]||0),x.write_shift(1,L[k]||0),x.write_shift(1,2),x.write_shift(4,0),x.write_shift(1,0),x.write_shift(4,0),x.write_shift(4,0),B+=Y[k]||l[J[k]]||0}var M=_.next(264);for(M.write_shift(4,13),k=0;k<65;++k)M.write_shift(4,0);for(k=0;k<A.length;++k){var O=_.next(q);for(O.write_shift(1,0),B=0;B<E.length;++B)if(E[B]!=null)switch(J[B]){case"L":O.write_shift(1,A[k][B]==null?63:A[k][B]?84:70);break;case"B":O.write_shift(8,A[k][B]||0,"f");break;case"N":var z="0";for(typeof A[k][B]=="number"&&(z=A[k][B].toFixed(L[B]||0)),z.length>Y[B]&&(z=z.slice(0,Y[B])),D=0;D<Y[B]-z.length;++D)O.write_shift(1,32);O.write_shift(1,z,"sbcs");break;case"D":A[k][B]?(O.write_shift(4,("0000"+A[k][B].getFullYear()).slice(-4),"sbcs"),O.write_shift(2,("00"+(A[k][B].getMonth()+1)).slice(-2),"sbcs"),O.write_shift(2,("00"+A[k][B].getDate()).slice(-2),"sbcs")):O.write_shift(8,"00000000","sbcs");break;case"C":var X=O.l,H=String(A[k][B]!=null?A[k][B]:"").slice(0,Y[B]);for(O.write_shift(1,H,"cpstr"),X+=Y[B]-O.l,D=0;D<X;++D)O.write_shift(1,32);break}}return current_codepage=b,_.next(1).write_shift(1,26),_.end()}return{to_workbook:o,to_sheet:a,from_sheet:u}}(),SYLK=function(){var t={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+keys(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),n=function(_,w){var E=t[w];return typeof E=="number"?_getansi(E):E},a=function(_,w,E){var A=w.charCodeAt(0)-32<<4|E.charCodeAt(0)-48;return A==59?_:_getansi(A)};t["|"]=254;function o(_,w){switch(w.type){case"base64":return l(Base64_decode(_),w);case"binary":return l(_,w);case"buffer":return l(has_buf&&Buffer.isBuffer(_)?_.toString("binary"):a2s(_),w);case"array":return l(cc2str(_),w)}throw new Error("Unrecognized type "+w.type)}function l(_,w){var E=_.split(/[\n\r]+/),A=-1,C=-1,k=0,B=0,D=[],q=[],j=null,J={},Y=[],L=[],Z=[],Q=0,oe,ae={Workbook:{WBProps:{},Names:[]}};for(+w.codepage>=0&&set_cp(+w.codepage);k!==E.length;++k){Q=0;var U=E[k].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(e,n),I=U.replace(/;;/g,"\0").split(";").map(function(ce){return ce.replace(/\u0000/g,";")}),x=I[0],T;if(U.length>0)switch(x){case"ID":break;case"E":break;case"B":break;case"O":for(B=1;B<I.length;++B)switch(I[B].charAt(0)){case"V":{var M=parseInt(I[B].slice(1),10);M>=1&&M<=4&&(ae.Workbook.WBProps.date1904=!0)}break}break;case"W":break;case"P":switch(I[1].charAt(0)){case"P":q.push(U.slice(3).replace(/;;/g,";"));break}break;case"NN":{var O={Sheet:0};for(B=1;B<I.length;++B)switch(I[B].charAt(0)){case"N":O.Name=I[B].slice(1);break;case"E":O.Ref=(w&&w.sheet||"Sheet1")+"!"+rc_to_a1(I[B].slice(1));break}ae.Workbook.Names.push(O)}break;case"C":var z=!1,X=!1,H=!1,P=!1,S=-1,F=-1,ue="",ee="z";for(B=1;B<I.length;++B)switch(I[B].charAt(0)){case"A":break;case"X":C=parseInt(I[B].slice(1),10)-1,X=!0;break;case"Y":for(A=parseInt(I[B].slice(1),10)-1,X||(C=0),oe=D.length;oe<=A;++oe)D[oe]=[];break;case"K":T=I[B].slice(1),T.charAt(0)==='"'?(T=T.slice(1,T.length-1),ee="s"):T==="TRUE"||T==="FALSE"?(T=T==="TRUE",ee="b"):isNaN(fuzzynum(T))?isNaN(fuzzydate(T).getDate())||(T=parseDate(T),ee="d",w.cellDates||(ee="n",T=datenum(T,ae.Workbook.WBProps.date1904))):(T=fuzzynum(T),ee="n",j!==null&&fmt_is_date(j)&&w.cellDates&&(T=numdate(ae.Workbook.WBProps.date1904?T+1462:T),ee="d")),z=!0;break;case"E":P=!0,ue=rc_to_a1(I[B].slice(1),{r:A,c:C});break;case"S":H=!0;break;case"G":break;case"R":S=parseInt(I[B].slice(1),10)-1;break;case"C":F=parseInt(I[B].slice(1),10)-1;break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+U)}if(z&&(D[A][C]?(D[A][C].t=ee,D[A][C].v=T):D[A][C]={t:ee,v:T},j&&(D[A][C].z=j),w.cellText!==!1&&j&&(D[A][C].w=SSF_format(D[A][C].z,D[A][C].v,{date1904:ae.Workbook.WBProps.date1904})),j=null),H){if(P)throw new Error("SYLK shared formula cannot have own formula");var fe=S>-1&&D[S][F];if(!fe||!fe[1])throw new Error("SYLK shared formula cannot find base");ue=shift_formula_str(fe[1],{r:A-S,c:C-F})}ue&&(D[A][C]?D[A][C].f=ue:D[A][C]={t:"n",f:ue});break;case"F":var le=0;for(B=1;B<I.length;++B)switch(I[B].charAt(0)){case"X":C=parseInt(I[B].slice(1),10)-1,++le;break;case"Y":for(A=parseInt(I[B].slice(1),10)-1,oe=D.length;oe<=A;++oe)D[oe]=[];break;case"M":Q=parseInt(I[B].slice(1),10)/20;break;case"F":break;case"G":break;case"P":j=q[parseInt(I[B].slice(1),10)];break;case"S":break;case"D":break;case"N":break;case"W":for(Z=I[B].slice(1).split(" "),oe=parseInt(Z[0],10);oe<=parseInt(Z[1],10);++oe)Q=parseInt(Z[2],10),L[oe-1]=Q===0?{hidden:!0}:{wch:Q};break;case"C":C=parseInt(I[B].slice(1),10)-1,L[C]||(L[C]={});break;case"R":A=parseInt(I[B].slice(1),10)-1,Y[A]||(Y[A]={}),Q>0?(Y[A].hpt=Q,Y[A].hpx=pt2px(Q)):Q===0&&(Y[A].hidden=!0);break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+U)}le<1&&(j=null);break;default:if(w&&w.WTF)throw new Error("SYLK bad record "+U)}}return Y.length>0&&(J["!rows"]=Y),L.length>0&&(J["!cols"]=L),L.forEach(function(ce){process_col(ce)}),w&&w.sheetRows&&(D=D.slice(0,w.sheetRows)),[D,J,ae]}function u(_,w){var E=o(_,w),A=E[0],C=E[1],k=E[2],B=dup(w);B.date1904=(((k||{}).Workbook||{}).WBProps||{}).date1904;var D=aoa_to_sheet(A,B);keys(C).forEach(function(j){D[j]=C[j]});var q=sheet_to_workbook(D,w);return keys(k).forEach(function(j){q[j]=k[j]}),q.bookType="sylk",q}function d(_,w,E,A){var C="C;Y"+(E+1)+";X"+(A+1)+";K";switch(_.t){case"n":C+=_.v||0,_.f&&!_.F&&(C+=";E"+a1_to_rc(_.f,{r:E,c:A}));break;case"b":C+=_.v?"TRUE":"FALSE";break;case"e":C+=_.w||_.v;break;case"d":C+='"'+(_.w||_.v)+'"';break;case"s":C+='"'+(_.v==null?"":String(_.v)).replace(/"/g,"").replace(/;/g,";;")+'"';break}return C}function m(_,w){w.forEach(function(E,A){var C="F;W"+(A+1)+" "+(A+1)+" ";E.hidden?C+="0":(typeof E.width=="number"&&!E.wpx&&(E.wpx=width2px(E.width)),typeof E.wpx=="number"&&!E.wch&&(E.wch=px2char(E.wpx)),typeof E.wch=="number"&&(C+=Math.round(E.wch))),C.charAt(C.length-1)!=" "&&_.push(C)})}function y(_,w){w.forEach(function(E,A){var C="F;";E.hidden?C+="M0;":E.hpt?C+="M"+20*E.hpt+";":E.hpx&&(C+="M"+20*px2pt(E.hpx)+";"),C.length>2&&_.push(C+"R"+(A+1))})}function b(_,w,E){var A=["ID;PSheetJS;N;E"],C=[],k=safe_decode_range(_["!ref"]),B,D=_["!data"]!=null,q=`\r
`,j=(((E||{}).Workbook||{}).WBProps||{}).date1904;A.push("P;PGeneral"),A.push("F;P0;DG0G8;M255"),_["!cols"]&&m(A,_["!cols"]),_["!rows"]&&y(A,_["!rows"]),A.push("B;Y"+(k.e.r-k.s.r+1)+";X"+(k.e.c-k.s.c+1)+";D"+[k.s.c,k.s.r,k.e.c,k.e.r].join(" ")),A.push("O;L;D;B"+(j?";V4":"")+";K47;G100 0.001");for(var J=k.s.r;J<=k.e.r;++J)if(!(D&&!_["!data"][J])){for(var Y=[],L=k.s.c;L<=k.e.c;++L)B=D?_["!data"][J][L]:_[encode_col(L)+encode_row(J)],!(!B||B.v==null&&(!B.f||B.F))&&Y.push(d(B,_,J,L));C.push(Y.join(q))}return A.join(q)+q+C.join(q)+q+"E"+q}return{to_workbook:u,from_sheet:b}}(),DIF=function(){function t(d,m){switch(m.type){case"base64":return e(Base64_decode(d),m);case"binary":return e(d,m);case"buffer":return e(has_buf&&Buffer.isBuffer(d)?d.toString("binary"):a2s(d),m);case"array":return e(cc2str(d),m)}throw new Error("Unrecognized type "+m.type)}function e(d,m){for(var y=d.split(`
`),b=-1,_=-1,w=0,E=[];w!==y.length;++w){if(y[w].trim()==="BOT"){E[++b]=[],_=0;continue}if(!(b<0)){var A=y[w].trim().split(","),C=A[0],k=A[1];++w;for(var B=y[w]||"";(B.match(/["]/g)||[]).length&1&&w<y.length-1;)B+=`
`+y[++w];switch(B=B.trim(),+C){case-1:if(B==="BOT"){E[++b]=[],_=0;continue}else if(B!=="EOD")throw new Error("Unrecognized DIF special command "+B);break;case 0:B==="TRUE"?E[b][_]=!0:B==="FALSE"?E[b][_]=!1:isNaN(fuzzynum(k))?isNaN(fuzzydate(k).getDate())?E[b][_]=k:E[b][_]=parseDate(k):E[b][_]=fuzzynum(k),++_;break;case 1:B=B.slice(1,B.length-1),B=B.replace(/""/g,'"'),B&&B.match(/^=".*"$/)&&(B=B.slice(2,-1)),E[b][_++]=B!==""?B:null;break}if(B==="EOD")break}}return m&&m.sheetRows&&(E=E.slice(0,m.sheetRows)),E}function n(d,m){return aoa_to_sheet(t(d,m),m)}function a(d,m){var y=sheet_to_workbook(n(d,m),m);return y.bookType="dif",y}function o(d,m){return"0,"+String(d)+`\r
`+m}function l(d){return`1,0\r
"`+d.replace(/"/g,'""')+'"'}function u(d){for(var m=safe_decode_range(d["!ref"]),y=d["!data"]!=null,b=[`TABLE\r
0,1\r
"sheetjs"\r
`,`VECTORS\r
0,`+(m.e.r-m.s.r+1)+`\r
""\r
`,`TUPLES\r
0,`+(m.e.c-m.s.c+1)+`\r
""\r
`,`DATA\r
0,0\r
""\r
`],_=m.s.r;_<=m.e.r;++_){for(var w=y?d["!data"][_]:[],E=`-1,0\r
BOT\r
`,A=m.s.c;A<=m.e.c;++A){var C=y?w&&w[A]:d[encode_cell({r:_,c:A})];if(C==null){E+=`1,0\r
""\r
`;continue}switch(C.t){case"n":C.w!=null?E+="0,"+C.w+`\r
V`:C.v!=null?E+=o(C.v,"V"):C.f!=null&&!C.F?E+=l("="+C.f):E+=`1,0\r
""`;break;case"b":E+=C.v?o(1,"TRUE"):o(0,"FALSE");break;case"s":E+=l(isNaN(+C.v)?C.v:'="'+C.v+'"');break;case"d":C.w||(C.w=SSF_format(C.z||table_fmt[14],datenum(parseDate(C.v)))),E+=o(C.w,"V");break;default:E+=`1,0\r
""`}E+=`\r
`}b.push(E)}return b.join("")+`-1,0\r
EOD`}return{to_workbook:a,to_sheet:n,from_sheet:u}}(),ETH=function(){function t(_){return _.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(_){return _.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function n(_,w){for(var E=_.split(`
`),A=-1,C=-1,k=0,B=[];k!==E.length;++k){var D=E[k].trim().split(":");if(D[0]==="cell"){var q=decode_cell(D[1]);if(B.length<=q.r)for(A=B.length;A<=q.r;++A)B[A]||(B[A]=[]);switch(A=q.r,C=q.c,D[2]){case"t":B[A][C]=t(D[3]);break;case"v":B[A][C]=+D[3];break;case"vtf":var j=D[D.length-1];case"vtc":switch(D[3]){case"nl":B[A][C]=!!+D[4];break;default:B[A][C]=+D[4];break}D[2]=="vtf"&&(B[A][C]=[B[A][C],j])}}}return w&&w.sheetRows&&(B=B.slice(0,w.sheetRows)),B}function a(_,w){return aoa_to_sheet(n(_,w),w)}function o(_,w){return sheet_to_workbook(a(_,w),w)}var l=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),u=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,d=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),m="--SocialCalcSpreadsheetControlSave--";function y(_){if(!_||!_["!ref"])return"";for(var w=[],E=[],A,C="",k=decode_range(_["!ref"]),B=_["!data"]!=null,D=k.s.r;D<=k.e.r;++D)for(var q=k.s.c;q<=k.e.c;++q)if(C=encode_cell({r:D,c:q}),A=B?(_["!data"][D]||[])[q]:_[C],!(!A||A.v==null||A.t==="z")){switch(E=["cell",C,"t"],A.t){case"s":case"str":E.push(e(A.v));break;case"n":A.f?(E[2]="vtf",E[3]="n",E[4]=A.v,E[5]=e(A.f)):(E[2]="v",E[3]=A.v);break;case"b":E[2]="vt"+(A.f?"f":"c"),E[3]="nl",E[4]=A.v?"1":"0",E[5]=e(A.f||(A.v?"TRUE":"FALSE"));break;case"d":var j=datenum(parseDate(A.v));E[2]="vtc",E[3]="nd",E[4]=""+j,E[5]=A.w||SSF_format(A.z||table_fmt[14],j);break;case"e":continue}w.push(E.join(":"))}return w.push("sheet:c:"+(k.e.c-k.s.c+1)+":r:"+(k.e.r-k.s.r+1)+":tvf:1"),w.push("valueformat:1:text-wiki"),w.join(`
`)}function b(_){return[l,u,d,u,y(_),m].join(`
`)}return{to_workbook:o,to_sheet:a,from_sheet:b}}(),PRN=function(){function t(b,_,w,E,A){A.raw?_[w][E]=b:b===""||(b==="TRUE"?_[w][E]=!0:b==="FALSE"?_[w][E]=!1:isNaN(fuzzynum(b))?isNaN(fuzzydate(b).getDate())?_[w][E]=b:_[w][E]=parseDate(b):_[w][E]=fuzzynum(b))}function e(b,_){var w=_||{},E=[];if(!b||b.length===0)return E;for(var A=b.split(/[\r\n]/),C=A.length-1;C>=0&&A[C].length===0;)--C;for(var k=10,B=0,D=0;D<=C;++D)B=A[D].indexOf(" "),B==-1?B=A[D].length:B++,k=Math.max(k,B);for(D=0;D<=C;++D){E[D]=[];var q=0;for(t(A[D].slice(0,k).trim(),E,D,q,w),q=1;q<=(A[D].length-k)/10+1;++q)t(A[D].slice(k+(q-1)*10,k+q*10).trim(),E,D,q,w)}return w.sheetRows&&(E=E.slice(0,w.sheetRows)),E}var n={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function o(b){for(var _={},w=!1,E=0,A=0;E<b.length;++E)(A=b.charCodeAt(E))==34?w=!w:!w&&A in n&&(_[A]=(_[A]||0)+1);A=[];for(E in _)Object.prototype.hasOwnProperty.call(_,E)&&A.push([_[E],E]);if(!A.length){_=a;for(E in _)Object.prototype.hasOwnProperty.call(_,E)&&A.push([_[E],E])}return A.sort(function(C,k){return C[0]-k[0]||a[C[1]]-a[k[1]]}),n[A.pop()[1]]||44}function l(b,_){var w=_||{},E="",A={};w.dense&&(A["!data"]=[]);var C={s:{c:0,r:0},e:{c:0,r:0}};b.slice(0,4)=="sep="?b.charCodeAt(5)==13&&b.charCodeAt(6)==10?(E=b.charAt(4),b=b.slice(7)):b.charCodeAt(5)==13||b.charCodeAt(5)==10?(E=b.charAt(4),b=b.slice(6)):E=o(b.slice(0,1024)):w&&w.FS?E=w.FS:E=o(b.slice(0,1024));var k=0,B=0,D=0,q=0,j=0,J=E.charCodeAt(0),Y=!1,L=0,Z=b.charCodeAt(0),Q=w.dateNF!=null?dateNF_regex(w.dateNF):null;function oe(){var ae=b.slice(q,j);ae.slice(-1)=="\r"&&(ae=ae.slice(0,-1));var U={};if(ae.charAt(0)=='"'&&ae.charAt(ae.length-1)=='"'&&(ae=ae.slice(1,-1).replace(/""/g,'"')),ae.length===0)U.t="z";else if(w.raw)U.t="s",U.v=ae;else if(ae.trim().length===0)U.t="s",U.v=ae;else if(ae.charCodeAt(0)==61)ae.charCodeAt(1)==34&&ae.charCodeAt(ae.length-1)==34?(U.t="s",U.v=ae.slice(2,-1).replace(/""/g,'"')):fuzzyfmla(ae)?(U.t="n",U.f=ae.slice(1)):(U.t="s",U.v=ae);else if(ae=="TRUE")U.t="b",U.v=!0;else if(ae=="FALSE")U.t="b",U.v=!1;else if(!isNaN(D=fuzzynum(ae)))U.t="n",w.cellText!==!1&&(U.w=ae),U.v=D;else if(!isNaN((D=fuzzydate(ae)).getDate())||Q&&ae.match(Q)){U.z=w.dateNF||table_fmt[14];var I=0;Q&&ae.match(Q)&&(ae=dateNF_fix(ae,w.dateNF,ae.match(Q)||[]),I=1,D=parseDate(ae,I)),w.cellDates?(U.t="d",U.v=D):(U.t="n",U.v=datenum(D)),w.cellText!==!1&&(U.w=SSF_format(U.z,U.v instanceof Date?datenum(U.v):U.v)),w.cellNF||delete U.z}else U.t="s",U.v=ae;if(U.t=="z"||(w.dense?(A["!data"][k]||(A["!data"][k]=[]),A["!data"][k][B]=U):A[encode_cell({c:B,r:k})]=U),q=j+1,Z=b.charCodeAt(q),C.e.c<B&&(C.e.c=B),C.e.r<k&&(C.e.r=k),L==J)++B;else if(B=0,++k,w.sheetRows&&w.sheetRows<=k)return!0}e:for(;j<b.length;++j)switch(L=b.charCodeAt(j)){case 34:Z===34&&(Y=!Y);break;case 13:if(Y)break;b.charCodeAt(j+1)==10&&++j;case J:case 10:if(!Y&&oe())break e;break}return j-q>0&&oe(),A["!ref"]=encode_range(C),A}function u(b,_){return!(_&&_.PRN)||_.FS||b.slice(0,4)=="sep="||b.indexOf("	")>=0||b.indexOf(",")>=0||b.indexOf(";")>=0?l(b,_):aoa_to_sheet(e(b,_),_)}function d(b,_){var w="",E=_.type=="string"?[0,0,0,0]:firstbyte(b,_);switch(_.type){case"base64":w=Base64_decode(b);break;case"binary":w=b;break;case"buffer":_.codepage==65001?w=b.toString("utf8"):_.codepage&&typeof $cptable<"u"?w=$cptable.utils.decode(_.codepage,b):w=has_buf&&Buffer.isBuffer(b)?b.toString("binary"):a2s(b);break;case"array":w=cc2str(b);break;case"string":w=b;break;default:throw new Error("Unrecognized type "+_.type)}return E[0]==239&&E[1]==187&&E[2]==191?w=utf8read(w.slice(3)):_.type!="string"&&_.type!="buffer"&&_.codepage==65001?w=utf8read(w):_.type=="binary"&&typeof $cptable<"u"&&_.codepage&&(w=$cptable.utils.decode(_.codepage,$cptable.utils.encode(28591,w))),w.slice(0,19)=="socialcalc:version:"?ETH.to_sheet(_.type=="string"?w:utf8read(w),_):u(w,_)}function m(b,_){return sheet_to_workbook(d(b,_),_)}function y(b){for(var _=[],w=safe_decode_range(b["!ref"]),E,A=b["!data"]!=null,C=w.s.r;C<=w.e.r;++C){for(var k=[],B=w.s.c;B<=w.e.c;++B){var D=encode_cell({r:C,c:B});if(E=A?(b["!data"][C]||[])[B]:b[D],!E||E.v==null){k.push("          ");continue}for(var q=(E.w||(format_cell(E),E.w)||"").slice(0,10);q.length<10;)q+=" ";k.push(q+(B===0?" ":""))}_.push(k.join(""))}return _.join(`
`)}return{to_workbook:m,to_sheet:d,from_sheet:y}}();function read_wb_ID(t,e){var n=e||{},a=!!n.WTF;n.WTF=!0;try{var o=SYLK.to_workbook(t,n);return n.WTF=a,o}catch(l){if(n.WTF=a,!l.message.match(/SYLK bad record ID/)&&a)throw l;return PRN.to_workbook(t,e)}}var WK_=function(){function t(ue,ee,fe){if(ue){prep_blob(ue,ue.l||0);for(var le=fe.Enum||P;ue.l<ue.length;){var ce=ue.read_shift(2),pe=le[ce]||le[65535],se=ue.read_shift(2),de=ue.l+se,re=pe.f&&pe.f(ue,se,fe);if(ue.l=de,ee(re,pe,ce))return}}}function e(ue,ee){switch(ee.type){case"base64":return n(s2a(Base64_decode(ue)),ee);case"binary":return n(s2a(ue),ee);case"buffer":case"array":return n(ue,ee)}throw"Unsupported type "+ee.type}function n(ue,ee){if(!ue)return ue;var fe=ee||{},le={},ce="Sheet1",pe="",se=0,de={},re=[],me=[],te=[];fe.dense&&(te=le["!data"]=[]);var ve={s:{r:0,c:0},e:{r:0,c:0}},Se=fe.sheetRows||0;if(ue[4]==81&&ue[5]==80&&ue[6]==87)return F(ue,ee);if(ue[2]==0&&(ue[3]==8||ue[3]==9)&&ue.length>=16&&ue[14]==5&&ue[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(ue[2]==2)fe.Enum=P,t(ue,function($e,Ie,Be){switch(Be){case 0:fe.vers=$e,$e>=4096&&(fe.qpro=!0);break;case 255:fe.vers=$e,fe.works=!0;break;case 6:ve=$e;break;case 204:$e&&(pe=$e);break;case 222:pe=$e;break;case 15:case 51:(!fe.qpro&&!fe.works||Be==51)&&$e[1].v.charCodeAt(0)<48&&($e[1].v=$e[1].v.slice(1)),(fe.works||fe.works2)&&($e[1].v=$e[1].v.replace(/\r\n/g,`
`));case 13:case 14:case 16:Be==14&&($e[2]&112)==112&&($e[2]&15)>1&&($e[2]&15)<15&&($e[1].z=fe.dateNF||table_fmt[14],fe.cellDates&&($e[1].t="d",$e[1].v=numdate($e[1].v))),fe.qpro&&$e[3]>se&&(le["!ref"]=encode_range(ve),de[ce]=le,re.push(ce),le={},fe.dense&&(te=le["!data"]=[]),ve={s:{r:0,c:0},e:{r:0,c:0}},se=$e[3],ce=pe||"Sheet"+(se+1),pe="");var Me=fe.dense?(te[$e[0].r]||[])[$e[0].c]:le[encode_cell($e[0])];if(Me){Me.t=$e[1].t,Me.v=$e[1].v,$e[1].z!=null&&(Me.z=$e[1].z),$e[1].f!=null&&(Me.f=$e[1].f);break}fe.dense?(te[$e[0].r]||(te[$e[0].r]=[]),te[$e[0].r][$e[0].c]=$e[1]):le[encode_cell($e[0])]=$e[1];break;case 21509:fe.works2=!0;break}},fe);else if(ue[2]==26||ue[2]==14)fe.Enum=S,ue[2]==14&&(fe.qpro=!0,ue.l=0),t(ue,function($e,Ie,Be){switch(Be){case 204:ce=$e;break;case 22:$e[1].v.charCodeAt(0)<48&&($e[1].v=$e[1].v.slice(1)),$e[1].v=$e[1].v.replace(/\x0F./g,function(Me){return String.fromCharCode(Me.charCodeAt(1)-32)}).replace(/\r\n/g,`
`);case 23:case 24:case 25:case 37:case 39:case 40:if($e[3]>se&&(le["!ref"]=encode_range(ve),de[ce]=le,re.push(ce),le={},fe.dense&&(te=le["!data"]=[]),ve={s:{r:0,c:0},e:{r:0,c:0}},se=$e[3],ce="Sheet"+(se+1)),Se>0&&$e[0].r>=Se)break;fe.dense?(te[$e[0].r]||(te[$e[0].r]=[]),te[$e[0].r][$e[0].c]=$e[1]):le[encode_cell($e[0])]=$e[1],ve.e.c<$e[0].c&&(ve.e.c=$e[0].c),ve.e.r<$e[0].r&&(ve.e.r=$e[0].r);break;case 27:$e[14e3]&&(me[$e[14e3][0]]=$e[14e3][1]);break;case 1537:me[$e[0]]=$e[1],$e[0]==se&&(ce=$e[1]);break}},fe);else throw new Error("Unrecognized LOTUS BOF "+ue[2]);if(le["!ref"]=encode_range(ve),de[pe||ce]=le,re.push(pe||ce),!me.length)return{SheetNames:re,Sheets:de};for(var be={},_e=[],ye=0;ye<me.length;++ye)de[re[ye]]?(_e.push(me[ye]||re[ye]),be[me[ye]]=de[me[ye]]||de[re[ye]]):(_e.push(me[ye]),be[me[ye]]={"!ref":"A1"});return{SheetNames:_e,Sheets:be}}function a(ue,ee){var fe=ee||{};if(+fe.codepage>=0&&set_cp(+fe.codepage),fe.type=="string")throw new Error("Cannot write WK1 to JS string");var le=buf_array(),ce=safe_decode_range(ue["!ref"]),pe=ue["!data"]!=null,se=[];write_biff_rec(le,0,l(1030)),write_biff_rec(le,6,m(ce));for(var de=Math.min(ce.e.r,8191),re=ce.s.c;re<=ce.e.c;++re)se[re]=encode_col(re);for(var me=ce.s.r;me<=de;++me){var te=encode_row(me);for(re=ce.s.c;re<=ce.e.c;++re){var ve=pe?(ue["!data"][me]||[])[re]:ue[se[re]+te];if(!(!ve||ve.t=="z"))if(ve.t=="n")(ve.v|0)==ve.v&&ve.v>=-32768&&ve.v<=32767?write_biff_rec(le,13,A(me,re,ve.v)):write_biff_rec(le,14,k(me,re,ve.v));else{var Se=format_cell(ve);write_biff_rec(le,15,_(me,re,Se.slice(0,239)))}}}return write_biff_rec(le,1),le.end()}function o(ue,ee){var fe=ee||{};if(+fe.codepage>=0&&set_cp(+fe.codepage),fe.type=="string")throw new Error("Cannot write WK3 to JS string");var le=buf_array();write_biff_rec(le,0,u(ue));for(var ce=0,pe=0;ce<ue.SheetNames.length;++ce)(ue.Sheets[ue.SheetNames[ce]]||{})["!ref"]&&write_biff_rec(le,27,H(ue.SheetNames[ce],pe++));var se=0;for(ce=0;ce<ue.SheetNames.length;++ce){var de=ue.Sheets[ue.SheetNames[ce]];if(!(!de||!de["!ref"])){for(var re=safe_decode_range(de["!ref"]),me=de["!data"]!=null,te=[],ve=Math.min(re.e.r,8191),Se=re.s.r;Se<=ve;++Se)for(var be=encode_row(Se),_e=re.s.c;_e<=re.e.c;++_e){Se===re.s.r&&(te[_e]=encode_col(_e));var ye=te[_e]+be,$e=me?(de["!data"][Se]||[])[_e]:de[ye];if(!(!$e||$e.t=="z"))if($e.t=="n")write_biff_rec(le,23,ae(Se,_e,se,$e.v));else{var Ie=format_cell($e);write_biff_rec(le,22,Z(Se,_e,se,Ie.slice(0,239)))}}++se}}return write_biff_rec(le,1),le.end()}function l(ue){var ee=new_buf(2);return ee.write_shift(2,ue),ee}function u(ue){var ee=new_buf(26);ee.write_shift(2,4096),ee.write_shift(2,4),ee.write_shift(4,0);for(var fe=0,le=0,ce=0,pe=0;pe<ue.SheetNames.length;++pe){var se=ue.SheetNames[pe],de=ue.Sheets[se];if(!(!de||!de["!ref"])){++ce;var re=decode_range(de["!ref"]);fe<re.e.r&&(fe=re.e.r),le<re.e.c&&(le=re.e.c)}}return fe>8191&&(fe=8191),ee.write_shift(2,fe),ee.write_shift(1,ce),ee.write_shift(1,le),ee.write_shift(2,0),ee.write_shift(2,0),ee.write_shift(1,1),ee.write_shift(1,2),ee.write_shift(4,0),ee.write_shift(4,0),ee}function d(ue,ee,fe){var le={s:{c:0,r:0},e:{c:0,r:0}};return ee==8&&fe.qpro?(le.s.c=ue.read_shift(1),ue.l++,le.s.r=ue.read_shift(2),le.e.c=ue.read_shift(1),ue.l++,le.e.r=ue.read_shift(2),le):(le.s.c=ue.read_shift(2),le.s.r=ue.read_shift(2),ee==12&&fe.qpro&&(ue.l+=2),le.e.c=ue.read_shift(2),le.e.r=ue.read_shift(2),ee==12&&fe.qpro&&(ue.l+=2),le.s.c==65535&&(le.s.c=le.e.c=le.s.r=le.e.r=0),le)}function m(ue){var ee=new_buf(8);return ee.write_shift(2,ue.s.c),ee.write_shift(2,ue.s.r),ee.write_shift(2,ue.e.c),ee.write_shift(2,ue.e.r),ee}function y(ue,ee,fe){var le=[{c:0,r:0},{t:"n",v:0},0,0];return fe.qpro&&fe.vers!=20768?(le[0].c=ue.read_shift(1),le[3]=ue.read_shift(1),le[0].r=ue.read_shift(2),ue.l+=2):fe.works?(le[0].c=ue.read_shift(2),le[0].r=ue.read_shift(2),le[2]=ue.read_shift(2)):(le[2]=ue.read_shift(1),le[0].c=ue.read_shift(2),le[0].r=ue.read_shift(2)),le}function b(ue,ee,fe){var le=ue.l+ee,ce=y(ue,ee,fe);if(ce[1].t="s",fe.vers==20768){ue.l++;var pe=ue.read_shift(1);return ce[1].v=ue.read_shift(pe,"utf8"),ce}return fe.qpro&&ue.l++,ce[1].v=ue.read_shift(le-ue.l,"cstr"),ce}function _(ue,ee,fe){var le=new_buf(7+fe.length);le.write_shift(1,255),le.write_shift(2,ee),le.write_shift(2,ue),le.write_shift(1,39);for(var ce=0;ce<le.length;++ce){var pe=fe.charCodeAt(ce);le.write_shift(1,pe>=128?95:pe)}return le.write_shift(1,0),le}function w(ue,ee,fe){var le=ue.l+ee,ce=y(ue,ee,fe);if(ce[1].t="s",fe.vers==20768){var pe=ue.read_shift(1);return ce[1].v=ue.read_shift(pe,"utf8"),ce}return ce[1].v=ue.read_shift(le-ue.l,"cstr"),ce}function E(ue,ee,fe){var le=y(ue,ee,fe);return le[1].v=ue.read_shift(2,"i"),le}function A(ue,ee,fe){var le=new_buf(7);return le.write_shift(1,255),le.write_shift(2,ee),le.write_shift(2,ue),le.write_shift(2,fe,"i"),le}function C(ue,ee,fe){var le=y(ue,ee,fe);return le[1].v=ue.read_shift(8,"f"),le}function k(ue,ee,fe){var le=new_buf(13);return le.write_shift(1,255),le.write_shift(2,ee),le.write_shift(2,ue),le.write_shift(8,fe,"f"),le}function B(ue,ee,fe){var le=ue.l+ee,ce=y(ue,ee,fe);if(ce[1].v=ue.read_shift(8,"f"),fe.qpro)ue.l=le;else{var pe=ue.read_shift(2);J(ue.slice(ue.l,ue.l+pe),ce),ue.l+=pe}return ce}function D(ue,ee,fe){var le=ee&32768;return ee&=-32769,ee=(le?ue:0)+(ee>=8192?ee-16384:ee),(le?"":"$")+(fe?encode_col(ee):encode_row(ee))}var q={31:["NA",0],33:["ABS",1],34:["TRUNC",1],35:["SQRT",1],36:["LOG",1],37:["LN",1],38:["PI",0],39:["SIN",1],40:["COS",1],41:["TAN",1],42:["ATAN2",2],43:["ATAN",1],44:["ASIN",1],45:["ACOS",1],46:["EXP",1],47:["MOD",2],49:["ISNA",1],50:["ISERR",1],51:["FALSE",0],52:["TRUE",0],53:["RAND",0],63:["ROUND",2],68:["ISNUMBER",1],69:["ISTEXT",1],70:["LEN",1],71:["VALUE",1],73:["MID",3],74:["CHAR",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],102:["UPPER",1],103:["LOWER",1],107:["PROPER",1],109:["TRIM",1],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function J(ue,ee){prep_blob(ue,0);for(var fe=[],le=0,ce="",pe="",se="",de="";ue.l<ue.length;){var re=ue[ue.l++];switch(re){case 0:fe.push(ue.read_shift(8,"f"));break;case 1:pe=D(ee[0].c,ue.read_shift(2),!0),ce=D(ee[0].r,ue.read_shift(2),!1),fe.push(pe+ce);break;case 2:{var me=D(ee[0].c,ue.read_shift(2),!0),te=D(ee[0].r,ue.read_shift(2),!1);pe=D(ee[0].c,ue.read_shift(2),!0),ce=D(ee[0].r,ue.read_shift(2),!1),fe.push(me+te+":"+pe+ce)}break;case 3:if(ue.l<ue.length){console.error("WK1 premature formula end");return}break;case 4:fe.push("("+fe.pop()+")");break;case 5:fe.push(ue.read_shift(2));break;case 6:{for(var ve="";re=ue[ue.l++];)ve+=String.fromCharCode(re);fe.push('"'+ve.replace(/"/g,'""')+'"')}break;case 8:fe.push("-"+fe.pop());break;case 23:fe.push("+"+fe.pop());break;case 22:fe.push("NOT("+fe.pop()+")");break;case 20:case 21:de=fe.pop(),se=fe.pop(),fe.push(["AND","OR"][re-20]+"("+se+","+de+")");break;default:if(re<32&&j[re])de=fe.pop(),se=fe.pop(),fe.push(se+j[re]+de);else if(q[re]){if(le=q[re][1],le==69&&(le=ue[ue.l++]),le>fe.length){console.error("WK1 bad formula parse 0x"+re.toString(16)+":|"+fe.join("|")+"|");return}var Se=fe.slice(-le);fe.length-=le,fe.push(q[re][0]+"("+Se.join(",")+")")}else return re<=7?console.error("WK1 invalid opcode "+re.toString(16)):re<=24?console.error("WK1 unsupported op "+re.toString(16)):re<=30?console.error("WK1 invalid opcode "+re.toString(16)):re<=115?console.error("WK1 unsupported function opcode "+re.toString(16)):console.error("WK1 unrecognized opcode "+re.toString(16))}}fe.length==1?ee[1].f=""+fe[0]:console.error("WK1 bad formula parse |"+fe.join("|")+"|")}function Y(ue){var ee=[{c:0,r:0},{t:"n",v:0},0];return ee[0].r=ue.read_shift(2),ee[3]=ue[ue.l++],ee[0].c=ue[ue.l++],ee}function L(ue,ee){var fe=Y(ue);return fe[1].t="s",fe[1].v=ue.read_shift(ee-4,"cstr"),fe}function Z(ue,ee,fe,le){var ce=new_buf(6+le.length);ce.write_shift(2,ue),ce.write_shift(1,fe),ce.write_shift(1,ee),ce.write_shift(1,39);for(var pe=0;pe<le.length;++pe){var se=le.charCodeAt(pe);ce.write_shift(1,se>=128?95:se)}return ce.write_shift(1,0),ce}function Q(ue,ee){var fe=Y(ue);fe[1].v=ue.read_shift(2);var le=fe[1].v>>1;if(fe[1].v&1)switch(le&7){case 0:le=(le>>3)*5e3;break;case 1:le=(le>>3)*500;break;case 2:le=(le>>3)/20;break;case 3:le=(le>>3)/200;break;case 4:le=(le>>3)/2e3;break;case 5:le=(le>>3)/2e4;break;case 6:le=(le>>3)/16;break;case 7:le=(le>>3)/64;break}return fe[1].v=le,fe}function oe(ue,ee){var fe=Y(ue),le=ue.read_shift(4),ce=ue.read_shift(4),pe=ue.read_shift(2);if(pe==65535)return le===0&&ce===3221225472?(fe[1].t="e",fe[1].v=15):le===0&&ce===3489660928?(fe[1].t="e",fe[1].v=42):fe[1].v=0,fe;var se=pe&32768;return pe=(pe&32767)-16446,fe[1].v=(1-se*2)*(ce*Math.pow(2,pe+32)+le*Math.pow(2,pe)),fe}function ae(ue,ee,fe,le){var ce=new_buf(14);if(ce.write_shift(2,ue),ce.write_shift(1,fe),ce.write_shift(1,ee),le==0)return ce.write_shift(4,0),ce.write_shift(4,0),ce.write_shift(2,65535),ce;var pe=0,se=0,de=0,re=0;return le<0&&(pe=1,le=-le),se=Math.log2(le)|0,le/=Math.pow(2,se-31),re=le>>>0,re&2147483648||(le/=2,++se,re=le>>>0),le-=re,re|=2147483648,re>>>=0,le*=Math.pow(2,32),de=le>>>0,ce.write_shift(4,de),ce.write_shift(4,re),se+=16383+(pe?32768:0),ce.write_shift(2,se),ce}function U(ue,ee){var fe=oe(ue);return ue.l+=ee-14,fe}function I(ue,ee){var fe=Y(ue),le=ue.read_shift(4);return fe[1].v=le>>6,fe}function x(ue,ee){var fe=Y(ue),le=ue.read_shift(8,"f");return fe[1].v=le,fe}function T(ue,ee){var fe=x(ue);return ue.l+=ee-12,fe}function M(ue,ee){return ue[ue.l+ee-1]==0?ue.read_shift(ee,"cstr"):""}function O(ue,ee){var fe=ue[ue.l++];fe>ee-1&&(fe=ee-1);for(var le="";le.length<fe;)le+=String.fromCharCode(ue[ue.l++]);return le}function z(ue,ee,fe){if(!(!fe.qpro||ee<21)){var le=ue.read_shift(1);ue.l+=17,ue.l+=1,ue.l+=2;var ce=ue.read_shift(ee-21,"cstr");return[le,ce]}}function X(ue,ee){for(var fe={},le=ue.l+ee;ue.l<le;){var ce=ue.read_shift(2);if(ce==14e3){for(fe[ce]=[0,""],fe[ce][0]=ue.read_shift(2);ue[ue.l];)fe[ce][1]+=String.fromCharCode(ue[ue.l]),ue.l++;ue.l++}}return fe}function H(ue,ee){var fe=new_buf(5+ue.length);fe.write_shift(2,14e3),fe.write_shift(2,ee);for(var le=0;le<ue.length;++le){var ce=ue.charCodeAt(le);fe[fe.l++]=ce>127?95:ce}return fe[fe.l++]=0,fe}var P={0:{n:"BOF",f:parseuint16},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:d},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:E},14:{n:"NUMBER",f:C},15:{n:"LABEL",f:b},16:{n:"FORMULA",f:B},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:w},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:M},222:{n:"SHEETNAMELP",f:O},255:{n:"BOF",f:parseuint16},65535:{n:""}},S={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:L},23:{n:"NUMBER17",f:oe},24:{n:"NUMBER18",f:Q},25:{n:"FORMULA19",f:U},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:X},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:I},38:{n:"??"},39:{n:"NUMBER27",f:x},40:{n:"FORMULA28",f:T},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:M},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:z},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};function F(ue,ee){prep_blob(ue,0);var fe=ee||{},le={};fe.dense&&(le["!data"]=[]);var ce=[],pe="",se={s:{r:-1,c:-1},e:{r:-1,c:-1}},de=0,re=0,me=0,te=0,ve={SheetNames:[],Sheets:{}};e:for(;ue.l<ue.length;){var Se=ue.read_shift(2),be=ue.read_shift(2),_e=ue.slice(ue.l,ue.l+be);switch(prep_blob(_e,0),Se){case 1:if(_e.read_shift(4)!=962023505)throw"Bad QPW9 BOF!";break;case 2:break e;case 1025:break;case 1026:break;case 1031:for(_e.l+=12;_e.l<_e.length;)de=_e.read_shift(2),re=_e.read_shift(1),ce.push(_e.read_shift(de,"cstr"));break;case 1032:break;case 1537:{var ye=_e.read_shift(2);le={},fe.dense&&(le["!data"]=[]),se.s.c=_e.read_shift(2),se.e.c=_e.read_shift(2),se.s.r=_e.read_shift(4),se.e.r=_e.read_shift(4),_e.l+=4,_e.l+2<_e.length&&(de=_e.read_shift(2),re=_e.read_shift(1),pe=de==0?"":_e.read_shift(de,"cstr")),pe||(pe=encode_col(ye))}break;case 1538:{if(se.s.c>255||se.s.r>999999)break;se.e.c<se.s.c&&(se.e.c=se.s.c),se.e.r<se.s.r&&(se.e.r=se.s.r),le["!ref"]=encode_range(se),book_append_sheet(ve,le,pe)}break;case 2561:me=_e.read_shift(2),se.e.c<me&&(se.e.c=me),se.s.c>me&&(se.s.c=me),te=_e.read_shift(4),se.s.r>te&&(se.s.r=te),te=_e.read_shift(4),se.e.r<te&&(se.e.r=te);break;case 3073:{te=_e.read_shift(4),de=_e.read_shift(4),se.s.r>te&&(se.s.r=te),se.e.r<te+de-1&&(se.e.r=te+de-1);for(var $e=encode_col(me);_e.l<_e.length;){var Ie={t:"z"},Be=_e.read_shift(1);Be&128&&(_e.l+=2);var Me=Be&64?_e.read_shift(2)-1:0;switch(Be&31){case 1:break;case 2:Ie={t:"n",v:_e.read_shift(2)};break;case 3:Ie={t:"n",v:_e.read_shift(2,"i")};break;case 5:Ie={t:"n",v:_e.read_shift(8,"f")};break;case 7:Ie={t:"s",v:ce[re=_e.read_shift(4)-1]};break;case 8:Ie={t:"n",v:_e.read_shift(8,"f")},_e.l+=2,_e.l+=4;break;default:throw"Unrecognized QPW cell type "+(Be&31)}var Fe=0;if(Be&32)switch(Be&31){case 2:Fe=_e.read_shift(2);break;case 3:Fe=_e.read_shift(2,"i");break;case 7:Fe=_e.read_shift(2);break;default:throw"Unsupported delta for QPW cell type "+(Be&31)}for(!fe.sheetStubs&&Ie.t=="z"||(le["!data"]!=null?(le["!data"][te]||(le["!data"][te]=[]),le["!data"][te][me]=Ie):le[$e+encode_row(te)]=Ie),++te,--de;Me-- >0&&de>=0;){if(Be&32)switch(Be&31){case 2:Ie={t:"n",v:Ie.v+Fe&65535};break;case 3:Ie={t:"n",v:Ie.v+Fe&65535},Ie.v>32767&&(Ie.v-=65536);break;case 7:Ie={t:"s",v:ce[re=re+Fe>>>0]};break;default:throw"Cannot apply delta for QPW cell type "+(Be&31)}else switch(Be&31){case 1:Ie={t:"z"};break;case 2:Ie={t:"n",v:_e.read_shift(2)};break;case 7:Ie={t:"s",v:ce[re=_e.read_shift(4)-1]};break;default:throw"Cannot apply repeat for QPW cell type "+(Be&31)}!fe.sheetStubs&&Ie.t=="z"||(le["!data"]!=null?(le["!data"][te]||(le["!data"][te]=[]),le["!data"][te][me]=Ie):le[$e+encode_row(te)]=Ie),++te,--de}}}break}ue.l+=be}return ve}return{sheet_to_wk1:a,book_to_wk3:o,to_workbook:e}}();function parse_rpr(t){var e={},n=t.match(tagregex),a=0,o=!1;if(n)for(;a!=n.length;++a){var l=parsexmltag(n[a]);switch(l[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!l.val)break;case"<shadow>":case"<shadow/>":e.shadow=1;break;case"</shadow>":break;case"<charset":if(l.val=="1")break;e.cp=CS2CP[parseInt(l.val,10)];break;case"<outline":if(!l.val)break;case"<outline>":case"<outline/>":e.outline=1;break;case"</outline>":break;case"<rFont":e.name=l.val;break;case"<sz":e.sz=l.val;break;case"<strike":if(!l.val)break;case"<strike>":case"<strike/>":e.strike=1;break;case"</strike>":break;case"<u":if(!l.val)break;switch(l.val){case"double":e.uval="double";break;case"singleAccounting":e.uval="single-accounting";break;case"doubleAccounting":e.uval="double-accounting";break}case"<u>":case"<u/>":e.u=1;break;case"</u>":break;case"<b":if(l.val=="0")break;case"<b>":case"<b/>":e.b=1;break;case"</b>":break;case"<i":if(l.val=="0")break;case"<i>":case"<i/>":e.i=1;break;case"</i>":break;case"<color":l.rgb&&(e.color=l.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":e.family=l.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":e.valign=l.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;default:if(l[0].charCodeAt(1)!==47&&!o)throw new Error("Unrecognized rich format "+l[0])}}return e}var parse_rs=function(){var t=matchtag("t"),e=matchtag("rPr");function n(l){var u=l.match(t);if(!u)return{t:"s",v:""};var d={t:"s",v:unescapexml(u[1])},m=l.match(e);return m&&(d.s=parse_rpr(m[1])),d}var a=/<(?:\w+:)?r>/g,o=/<\/(?:\w+:)?r>/;return function(u){return u.replace(a,"").split(o).map(n).filter(function(d){return d.v})}}(),rs_to_html=function t(){var e=/(\r\n|\n)/g;function n(o,l,u){var d=[];o.u&&d.push("text-decoration: underline;"),o.uval&&d.push("text-underline-style:"+o.uval+";"),o.sz&&d.push("font-size:"+o.sz+"pt;"),o.outline&&d.push("text-effect: outline;"),o.shadow&&d.push("text-shadow: auto;"),l.push('<span style="'+d.join("")+'">'),o.b&&(l.push("<b>"),u.push("</b>")),o.i&&(l.push("<i>"),u.push("</i>")),o.strike&&(l.push("<s>"),u.push("</s>"));var m=o.valign||"";return m=="superscript"||m=="super"?m="sup":m=="subscript"&&(m="sub"),m!=""&&(l.push("<"+m+">"),u.push("</"+m+">")),u.push("</span>"),o}function a(o){var l=[[],o.v,[]];return o.v?(o.s&&n(o.s,l[0],l[2]),l[0].join("")+l[1].replace(e,"<br/>")+l[2].join("")):""}return function(l){return l.map(a).join("")}}(),sitregex=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,sirregex=/<(?:\w+:)?r>/,sirphregex=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function parse_si(t,e){var n=e?e.cellHTML:!0,a={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=unescapexml(utf8read(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""),!0),a.r=utf8read(t),n&&(a.h=escapehtml(a.t))):t.match(sirregex)&&(a.r=utf8read(t),a.t=unescapexml(utf8read((t.replace(sirphregex,"").match(sitregex)||[]).join("").replace(tagregex,"")),!0),n&&(a.h=rs_to_html(parse_rs(a.r)))),a):{t:""}}var sstr0=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,sstr1=/<(?:\w+:)?(?:si|sstItem)>/g,sstr2=/<\/(?:\w+:)?(?:si|sstItem)>/;function parse_sst_xml(t,e){var n=[],a="";if(!t)return n;var o=t.match(sstr0);if(o){a=o[2].replace(sstr1,"").split(sstr2);for(var l=0;l!=a.length;++l){var u=parse_si(a[l].trim(),e);u!=null&&(n[n.length]=u)}o=parsexmltag(o[1]),n.Count=o.count,n.Unique=o.uniqueCount}return n}var straywsregex=/^\s|\s$|[\t\n\r]/;function write_sst_xml(t,e){if(!e.bookSST)return"";var n=[XML_HEADER];n[n.length]=writextag("sst",null,{xmlns:XMLNS_main[0],count:t.Count,uniqueCount:t.Unique});for(var a=0;a!=t.length;++a)if(t[a]!=null){var o=t[a],l="<si>";o.r?l+=o.r:(l+="<t",o.t||(o.t=""),typeof o.t!="string"&&(o.t=String(o.t)),o.t.match(straywsregex)&&(l+=' xml:space="preserve"'),l+=">"+escapexml(o.t)+"</t>"),l+="</si>",n[n.length]=l}return n.length>2&&(n[n.length]="</sst>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_BrtBeginSst(t){return[t.read_shift(4),t.read_shift(4)]}function parse_sst_bin(t,e){var n=[],a=!1;return recordhopper(t,function(l,u,d){switch(d){case 159:n.Count=l[0],n.Unique=l[1];break;case 19:n.push(l);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(u.T,!a||e.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}),n}function write_BrtBeginSst(t,e){return e||(e=new_buf(8)),e.write_shift(4,t.Count),e.write_shift(4,t.Unique),e}var write_BrtSSTItem=write_RichStr;function write_sst_bin(t){var e=buf_array();write_record(e,159,write_BrtBeginSst(t));for(var n=0;n<t.length;++n)write_record(e,19,write_BrtSSTItem(t[n]));return write_record(e,160),e.end()}function _JS2ANSI(t){for(var e=[],n=t.split(""),a=0;a<n.length;++a)e[a]=n[a].charCodeAt(0);return e}function parse_CRYPTOVersion(t,e){var n={};return n.Major=t.read_shift(2),n.Minor=t.read_shift(2),e>=4&&(t.l+=e-4),n}function parse_DataSpaceVersionInfo(t){var e={};return e.id=t.read_shift(0,"lpp4"),e.R=parse_CRYPTOVersion(t,4),e.U=parse_CRYPTOVersion(t,4),e.W=parse_CRYPTOVersion(t,4),e}function parse_DataSpaceMapEntry(t){for(var e=t.read_shift(4),n=t.l+e-4,a={},o=t.read_shift(4),l=[];o-- >0;)l.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(a.name=t.read_shift(0,"lpp4"),a.comps=l,t.l!=n)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+n);return a}function parse_DataSpaceMap(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(parse_DataSpaceMapEntry(t));return e}function parse_DataSpaceDefinition(t){var e=[];t.l+=4;for(var n=t.read_shift(4);n-- >0;)e.push(t.read_shift(0,"lpp4"));return e}function parse_TransformInfoHeader(t){var e={};return t.read_shift(4),t.l+=4,e.id=t.read_shift(0,"lpp4"),e.name=t.read_shift(0,"lpp4"),e.R=parse_CRYPTOVersion(t,4),e.U=parse_CRYPTOVersion(t,4),e.W=parse_CRYPTOVersion(t,4),e}function parse_Primary(t){var e=parse_TransformInfoHeader(t);if(e.ename=t.read_shift(0,"8lpp4"),e.blksz=t.read_shift(4),e.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return e}function parse_EncryptionHeader(t,e){var n=t.l+e,a={};a.Flags=t.read_shift(4)&63,t.l+=4,a.AlgID=t.read_shift(4);var o=!1;switch(a.AlgID){case 26126:case 26127:case 26128:o=a.Flags==36;break;case 26625:o=a.Flags==4;break;case 0:o=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!o)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=t.read_shift(4),a.KeySize=t.read_shift(4),a.ProviderType=t.read_shift(4),t.l+=8,a.CSPName=t.read_shift(n-t.l>>1,"utf16le"),t.l=n,a}function parse_EncryptionVerifier(t,e){var n={},a=t.l+e;return t.l+=4,n.Salt=t.slice(t.l,t.l+16),t.l+=16,n.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),n.VerifierHash=t.slice(t.l,a),t.l=a,n}function parse_EncryptionInfo(t){var e=parse_CRYPTOVersion(t);switch(e.Minor){case 2:return[e.Minor,parse_EncInfoStd(t)];case 3:return[e.Minor,parse_EncInfoExt()];case 4:return[e.Minor,parse_EncInfoAgl(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+e.Minor)}function parse_EncInfoStd(t){var e=t.read_shift(4);if((e&63)!=36)throw new Error("EncryptionInfo mismatch");var n=t.read_shift(4),a=parse_EncryptionHeader(t,n),o=parse_EncryptionVerifier(t,t.length-t.l);return{t:"Std",h:a,v:o}}function parse_EncInfoExt(){throw new Error("File is password-protected: ECMA-376 Extensible")}function parse_EncInfoAgl(t){var e=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var n=t.read_shift(t.length-t.l,"utf8"),a={};return n.replace(tagregex,function(l){var u=parsexmltag(l);switch(strip_ns(u[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":e.forEach(function(d){a[d]=u[d]});break;case"<dataIntegrity":a.encryptedHmacKey=u.encryptedHmacKey,a.encryptedHmacValue=u.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=u.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(u);break;default:throw u[0]}}),a}function parse_RC4CryptoHeader(t,e){var n={},a=n.EncryptionVersionInfo=parse_CRYPTOVersion(t,4);if(e-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);n.Flags=t.read_shift(4),e-=4;var o=t.read_shift(4);return e-=4,n.EncryptionHeader=parse_EncryptionHeader(t,o),e-=o,n.EncryptionVerifier=parse_EncryptionVerifier(t,e),n}function parse_RC4Header(t){var e={},n=e.EncryptionVersionInfo=parse_CRYPTOVersion(t,4);if(n.Major!=1||n.Minor!=1)throw"unrecognized version code "+n.Major+" : "+n.Minor;return e.Salt=t.read_shift(16),e.EncryptedVerifier=t.read_shift(16),e.EncryptedVerifierHash=t.read_shift(16),e}function crypto_CreatePasswordVerifier_Method1(t){var e=0,n,a=_JS2ANSI(t),o=a.length+1,l,u,d,m,y;for(n=new_raw_buf(o),n[0]=a.length,l=1;l!=o;++l)n[l]=a[l-1];for(l=o-1;l>=0;--l)u=n[l],d=e&16384?1:0,m=e<<1&32767,y=d|m,e=y^u;return e^52811}var crypto_CreateXorArray_Method1=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],e=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],n=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(u){return(u/2|u*128)&255},o=function(u,d){return a(u^d)},l=function(u){for(var d=e[u.length-1],m=104,y=u.length-1;y>=0;--y)for(var b=u[y],_=0;_!=7;++_)b&64&&(d^=n[m]),b*=2,--m;return d};return function(u){for(var d=_JS2ANSI(u),m=l(d),y=d.length,b=new_raw_buf(16),_=0;_!=16;++_)b[_]=0;var w,E,A;for((y&1)===1&&(w=m>>8,b[y]=o(t[0],w),--y,w=m&255,E=d[d.length-1],b[y]=o(E,w));y>0;)--y,w=m>>8,b[y]=o(d[y],w),--y,w=m&255,b[y]=o(d[y],w);for(y=15,A=15-d.length;A>0;)w=m>>8,b[y]=o(t[A],w),--y,--A,w=m&255,b[y]=o(d[y],w),--y,--A;return b}}(),crypto_DecryptData_Method1=function(t,e,n,a,o){o||(o=e),a||(a=crypto_CreateXorArray_Method1(t));var l,u;for(l=0;l!=e.length;++l)u=e[l],u^=a[n],u=(u>>5|u<<3)&255,o[l]=u,++n;return[o,n,a]},crypto_MakeXorDecryptor=function(t){var e=0,n=crypto_CreateXorArray_Method1(t);return function(a){var o=crypto_DecryptData_Method1("",a,e,n);return e=o[1],o[0]}};function parse_XORObfuscation(t,e,n,a){var o={key:parseuint16(t),verificationBytes:parseuint16(t)};return n.password&&(o.verifier=crypto_CreatePasswordVerifier_Method1(n.password)),a.valid=o.verificationBytes===o.verifier,a.valid&&(a.insitu=crypto_MakeXorDecryptor(n.password)),o}function parse_FilePassHeader(t,e,n){var a=n||{};return a.Info=t.read_shift(2),t.l-=2,a.Info===1?a.Data=parse_RC4Header(t):a.Data=parse_RC4CryptoHeader(t,e),a}function parse_FilePass(t,e,n){var a={Type:n.biff>=8?t.read_shift(2):0};return a.Type?parse_FilePassHeader(t,e-2,a):parse_XORObfuscation(t,n.biff>=8?e:e-2,n,a),a}function rtf_to_sheet(t,e){switch(e.type){case"base64":return rtf_to_sheet_str(Base64_decode(t),e);case"binary":return rtf_to_sheet_str(t,e);case"buffer":return rtf_to_sheet_str(has_buf&&Buffer.isBuffer(t)?t.toString("binary"):a2s(t),e);case"array":return rtf_to_sheet_str(cc2str(t),e)}throw new Error("Unrecognized type "+e.type)}function rtf_to_sheet_str(t,e){var n=e||{},a={},o=n.dense;o&&(a["!data"]=[]);var l=t.match(/\\trowd[\s\S]*?\\row\b/g);if(!l)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:l.length-1}},d=[];return l.forEach(function(m,y){o&&(d=a["!data"][y]=[]);for(var b=/\\[\w\-]+\b/g,_=0,w,E=-1,A=[];(w=b.exec(m))!=null;){var C=m.slice(_,b.lastIndex-w[0].length);switch(C.charCodeAt(0)==32&&(C=C.slice(1)),C.length&&A.push(C),w[0]){case"\\cell":if(++E,A.length){var k={v:A.join(""),t:"s"};k.v=="TRUE"||k.v=="FALSE"?(k.v=k.v=="TRUE",k.t="b"):isNaN(fuzzynum(k.v))||(k.t="n",n.cellText!==!1&&(k.w=k.v),k.v=fuzzynum(k.v)),o?d[E]=k:a[encode_cell({r:y,c:E})]=k}A=[];break;case"\\par":A.push(`
`);break}_=b.lastIndex}E>u.e.c&&(u.e.c=E)}),a["!ref"]=encode_range(u),a}function rtf_to_workbook(t,e){var n=sheet_to_workbook(rtf_to_sheet(t,e),e);return n.bookType="rtf",n}function sheet_to_rtf(t,e){var n=["{\\rtf1\\ansi"];if(!t["!ref"])return n[0]+"}";for(var a=safe_decode_range(t["!ref"]),o,l=t["!data"]!=null,u=[],d=a.s.r;d<=a.e.r;++d){n.push("\\trowd\\trautofit1");for(var m=a.s.c;m<=a.e.c;++m)n.push("\\cellx"+(m+1));for(n.push("\\pard\\intbl"),l&&(u=t["!data"][d]||[]),m=a.s.c;m<=a.e.c;++m){var y=encode_cell({r:d,c:m});if(o=l?u[m]:t[y],!o||o.v==null&&(!o.f||o.F)){n.push(" \\cell");continue}n.push(" "+(o.w||(format_cell(o),o.w)||"").replace(/[\r\n]/g,"\\par ")),n.push("\\cell")}n.push("\\pard\\intbl\\row")}return n.join("")+"}"}function hex2RGB(t){var e=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)]}function rgb2Hex(t){for(var e=0,n=1;e!=3;++e)n=n*256+(t[e]>255?255:t[e]<0?0:t[e]);return n.toString(16).toUpperCase().slice(1)}function rgb2HSL(t){var e=t[0]/255,n=t[1]/255,a=t[2]/255,o=Math.max(e,n,a),l=Math.min(e,n,a),u=o-l;if(u===0)return[0,0,e];var d=0,m=0,y=o+l;switch(m=u/(y>1?2-y:y),o){case e:d=((n-a)/u+6)%6;break;case n:d=(a-e)/u+2;break;case a:d=(e-n)/u+4;break}return[d/6,m,y/2]}function hsl2RGB(t){var e=t[0],n=t[1],a=t[2],o=n*2*(a<.5?a:1-a),l=a-o/2,u=[l,l,l],d=6*e,m;if(n!==0)switch(d|0){case 0:case 6:m=o*d,u[0]+=o,u[1]+=m;break;case 1:m=o*(2-d),u[0]+=m,u[1]+=o;break;case 2:m=o*(d-2),u[1]+=o,u[2]+=m;break;case 3:m=o*(4-d),u[1]+=m,u[2]+=o;break;case 4:m=o*(d-4),u[2]+=o,u[0]+=m;break;case 5:m=o*(6-d),u[2]+=m,u[0]+=o;break}for(var y=0;y!=3;++y)u[y]=Math.round(u[y]*255);return u}function rgb_tint(t,e){if(e===0)return t;var n=rgb2HSL(hex2RGB(t));return e<0?n[2]=n[2]*(1+e):n[2]=1-(1-n[2])*(1-e),rgb2Hex(hsl2RGB(n))}var DEF_MDW=6,MAX_MDW=15,MIN_MDW=1,MDW=DEF_MDW;function width2px(t){return Math.floor((t+Math.round(128/MDW)/256)*MDW)}function px2char(t){return Math.floor((t-5)/MDW*100+.5)/100}function char2width(t){return Math.round((t*MDW+5)/MDW*256)/256}function cycle_width(t){return char2width(px2char(width2px(t)))}function find_mdw_colw(t){var e=Math.abs(t-cycle_width(t)),n=MDW;if(e>.005)for(MDW=MIN_MDW;MDW<MAX_MDW;++MDW)Math.abs(t-cycle_width(t))<=e&&(e=Math.abs(t-cycle_width(t)),n=MDW);MDW=n}function process_col(t){t.width?(t.wpx=width2px(t.width),t.wch=px2char(t.wpx),t.MDW=MDW):t.wpx?(t.wch=px2char(t.wpx),t.width=char2width(t.wch),t.MDW=MDW):typeof t.wch=="number"&&(t.width=char2width(t.wch),t.wpx=width2px(t.width),t.MDW=MDW),t.customWidth&&delete t.customWidth}var DEF_PPI=96,PPI=DEF_PPI;function px2pt(t){return t*96/PPI}function pt2px(t){return t*PPI/96}var XLMLPatternTypeMap={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function parse_borders(t,e,n,a){e.Borders=[];var o={},l=!1;(t[0].match(tagregex)||[]).forEach(function(u){var d=parsexmltag(u);switch(strip_ns(d[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":o={},d.diagonalUp&&(o.diagonalUp=parsexmlbool(d.diagonalUp)),d.diagonalDown&&(o.diagonalDown=parsexmlbool(d.diagonalDown)),e.Borders.push(o);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(a&&a.WTF&&!l)throw new Error("unrecognized "+d[0]+" in borders")}})}function parse_fills(t,e,n,a){e.Fills=[];var o={},l=!1;(t[0].match(tagregex)||[]).forEach(function(u){var d=parsexmltag(u);switch(strip_ns(d[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":o={},e.Fills.push(o);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":e.Fills.push(o),o={};break;case"<patternFill":case"<patternFill>":d.patternType&&(o.patternType=d.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":o.bgColor||(o.bgColor={}),d.indexed&&(o.bgColor.indexed=parseInt(d.indexed,10)),d.theme&&(o.bgColor.theme=parseInt(d.theme,10)),d.tint&&(o.bgColor.tint=parseFloat(d.tint)),d.rgb&&(o.bgColor.rgb=d.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":o.fgColor||(o.fgColor={}),d.theme&&(o.fgColor.theme=parseInt(d.theme,10)),d.tint&&(o.fgColor.tint=parseFloat(d.tint)),d.rgb!=null&&(o.fgColor.rgb=d.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(a&&a.WTF&&!l)throw new Error("unrecognized "+d[0]+" in fills")}})}function parse_fonts(t,e,n,a){e.Fonts=[];var o={},l=!1;(t[0].match(tagregex)||[]).forEach(function(u){var d=parsexmltag(u);switch(strip_ns(d[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":e.Fonts.push(o),o={};break;case"<name":d.val&&(o.name=utf8read(d.val));break;case"<name/>":case"</name>":break;case"<b":o.bold=d.val?parsexmlbool(d.val):1;break;case"<b/>":o.bold=1;break;case"<i":o.italic=d.val?parsexmlbool(d.val):1;break;case"<i/>":o.italic=1;break;case"<u":switch(d.val){case"none":o.underline=0;break;case"single":o.underline=1;break;case"double":o.underline=2;break;case"singleAccounting":o.underline=33;break;case"doubleAccounting":o.underline=34;break}break;case"<u/>":o.underline=1;break;case"<strike":o.strike=d.val?parsexmlbool(d.val):1;break;case"<strike/>":o.strike=1;break;case"<outline":o.outline=d.val?parsexmlbool(d.val):1;break;case"<outline/>":o.outline=1;break;case"<shadow":o.shadow=d.val?parsexmlbool(d.val):1;break;case"<shadow/>":o.shadow=1;break;case"<condense":o.condense=d.val?parsexmlbool(d.val):1;break;case"<condense/>":o.condense=1;break;case"<extend":o.extend=d.val?parsexmlbool(d.val):1;break;case"<extend/>":o.extend=1;break;case"<sz":d.val&&(o.sz=+d.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":d.val&&(o.vertAlign=d.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":d.val&&(o.family=parseInt(d.val,10));break;case"<family/>":case"</family>":break;case"<scheme":d.val&&(o.scheme=d.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(d.val=="1")break;d.codepage=CS2CP[parseInt(d.val,10)];break;case"<color":if(o.color||(o.color={}),d.auto&&(o.color.auto=parsexmlbool(d.auto)),d.rgb)o.color.rgb=d.rgb.slice(-6);else if(d.indexed){o.color.index=parseInt(d.indexed,10);var m=XLSIcv[o.color.index];o.color.index==81&&(m=XLSIcv[1]),m||(m=XLSIcv[1]),o.color.rgb=m[0].toString(16)+m[1].toString(16)+m[2].toString(16)}else d.theme&&(o.color.theme=parseInt(d.theme,10),d.tint&&(o.color.tint=parseFloat(d.tint)),d.theme&&n.themeElements&&n.themeElements.clrScheme&&(o.color.rgb=rgb_tint(n.themeElements.clrScheme[o.color.theme].rgb,o.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":l=!0;break;case"</AlternateContent>":l=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(a&&a.WTF&&!l)throw new Error("unrecognized "+d[0]+" in fonts")}})}function parse_numFmts(t,e,n){e.NumberFmt=[];for(var a=keys(table_fmt),o=0;o<a.length;++o)e.NumberFmt[a[o]]=table_fmt[a[o]];var l=t[0].match(tagregex);if(l)for(o=0;o<l.length;++o){var u=parsexmltag(l[o]);switch(strip_ns(u[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var d=unescapexml(utf8read(u.formatCode)),m=parseInt(u.numFmtId,10);if(e.NumberFmt[m]=d,m>0){if(m>392){for(m=392;m>60&&e.NumberFmt[m]!=null;--m);e.NumberFmt[m]=d}SSF__load(d,m)}}break;case"</numFmt>":break;default:if(n.WTF)throw new Error("unrecognized "+u[0]+" in numFmts")}}}function write_numFmts(t){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var a=n[0];a<=n[1];++a)t[a]!=null&&(e[e.length]=writextag("numFmt",null,{numFmtId:a,formatCode:escapexml(t[a])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=writextag("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var cellXF_uint=["numFmtId","fillId","fontId","borderId","xfId"],cellXF_bool=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function parse_cellXfs(t,e,n){e.CellXf=[];var a,o=!1;(t[0].match(tagregex)||[]).forEach(function(l){var u=parsexmltag(l),d=0;switch(strip_ns(u[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=u,delete a[0],d=0;d<cellXF_uint.length;++d)a[cellXF_uint[d]]&&(a[cellXF_uint[d]]=parseInt(a[cellXF_uint[d]],10));for(d=0;d<cellXF_bool.length;++d)a[cellXF_bool[d]]&&(a[cellXF_bool[d]]=parsexmlbool(a[cellXF_bool[d]]));if(e.NumberFmt&&a.numFmtId>392){for(d=392;d>60;--d)if(e.NumberFmt[a.numFmtId]==e.NumberFmt[d]){a.numFmtId=d;break}}e.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var m={};u.vertical&&(m.vertical=u.vertical),u.horizontal&&(m.horizontal=u.horizontal),u.textRotation!=null&&(m.textRotation=u.textRotation),u.indent&&(m.indent=u.indent),u.wrapText&&(m.wrapText=parsexmlbool(u.wrapText)),a.alignment=m;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":o=!0;break;case"</AlternateContent>":o=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;default:if(n&&n.WTF&&!o)throw new Error("unrecognized "+u[0]+" in cellXfs")}})}function write_cellXfs(t){var e=[];return e[e.length]=writextag("cellXfs",null),t.forEach(function(n){e[e.length]=writextag("xf",null,n)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=writextag("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}var parse_sty_xml=function t(){var e=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,n=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,o=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,l=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(d,m,y){var b={};if(!d)return b;d=d.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var _;return(_=d.match(e))&&parse_numFmts(_,b,y),(_=d.match(o))&&parse_fonts(_,b,m,y),(_=d.match(a))&&parse_fills(_,b,m,y),(_=d.match(l))&&parse_borders(_,b,m,y),(_=d.match(n))&&parse_cellXfs(_,b,y),b}}();function write_sty_xml(t,e){var n=[XML_HEADER,writextag("styleSheet",null,{xmlns:XMLNS_main[0],"xmlns:vt":XMLNS.vt})],a;return t.SSF&&(a=write_numFmts(t.SSF))!=null&&(n[n.length]=a),n[n.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',n[n.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',n[n.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',n[n.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=write_cellXfs(e.cellXfs))&&(n[n.length]=a),n[n.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',n[n.length]='<dxfs count="0"/>',n[n.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',n.length>2&&(n[n.length]="</styleSheet>",n[1]=n[1].replace("/>",">")),n.join("")}function parse_BrtFmt(t,e){var n=t.read_shift(2),a=parse_XLWideString(t);return[n,a]}function write_BrtFmt(t,e,n){n||(n=new_buf(6+4*e.length)),n.write_shift(2,t),write_XLWideString(e,n);var a=n.length>n.l?n.slice(0,n.l):n;return n.l==null&&(n.l=n.length),a}function parse_BrtFont(t,e,n){var a={};a.sz=t.read_shift(2)/20;var o=parse_FontFlags(t);o.fItalic&&(a.italic=1),o.fCondense&&(a.condense=1),o.fExtend&&(a.extend=1),o.fShadow&&(a.shadow=1),o.fOutline&&(a.outline=1),o.fStrikeout&&(a.strike=1);var l=t.read_shift(2);switch(l===700&&(a.bold=1),t.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var u=t.read_shift(1);u!=0&&(a.underline=u);var d=t.read_shift(1);d>0&&(a.family=d);var m=t.read_shift(1);switch(m>0&&(a.charset=m),t.l++,a.color=parse_BrtColor(t),t.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=parse_XLWideString(t),a}function write_BrtFont(t,e){e||(e=new_buf(25+4*32)),e.write_shift(2,t.sz*20),write_FontFlags(t,e),e.write_shift(2,t.bold?700:400);var n=0;t.vertAlign=="superscript"?n=1:t.vertAlign=="subscript"&&(n=2),e.write_shift(2,n),e.write_shift(1,t.underline||0),e.write_shift(1,t.family||0),e.write_shift(1,t.charset||0),e.write_shift(1,0),write_BrtColor(t.color,e);var a=0;return t.scheme=="major"&&(a=1),t.scheme=="minor"&&(a=2),e.write_shift(1,a),write_XLWideString(t.name,e),e.length>e.l?e.slice(0,e.l):e}var XLSBFillPTNames=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],rev_XLSBFillPTNames,parse_BrtFill=parsenoop;function write_BrtFill(t,e){e||(e=new_buf(4*3+8*7+16*1)),rev_XLSBFillPTNames||(rev_XLSBFillPTNames=evert(XLSBFillPTNames));var n=rev_XLSBFillPTNames[t.patternType];n==null&&(n=40),e.write_shift(4,n);var a=0;if(n!=40)for(write_BrtColor({auto:1},e),write_BrtColor({auto:1},e);a<12;++a)e.write_shift(4,0);else{for(;a<4;++a)e.write_shift(4,0);for(;a<12;++a)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function parse_BrtXF(t,e){var n=t.l+e,a=t.read_shift(2),o=t.read_shift(2);return t.l=n,{ixfe:a,numFmtId:o}}function write_BrtXF(t,e,n){n||(n=new_buf(16)),n.write_shift(2,e||0),n.write_shift(2,t.numFmtId||0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(1,0),n.write_shift(1,0);var a=0;return n.write_shift(1,a),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(1,0),n}function write_Blxf(t,e){return e||(e=new_buf(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var parse_BrtBorder=parsenoop;function write_BrtBorder(t,e){return e||(e=new_buf(51)),e.write_shift(1,0),write_Blxf(null,e),write_Blxf(null,e),write_Blxf(null,e),write_Blxf(null,e),write_Blxf(null,e),e.length>e.l?e.slice(0,e.l):e}function write_BrtStyle(t,e){return e||(e=new_buf(12+4*10)),e.write_shift(4,t.xfId),e.write_shift(2,1),e.write_shift(1,+t.builtinId),e.write_shift(1,0),write_XLNullableWideString(t.name||"",e),e.length>e.l?e.slice(0,e.l):e}function write_BrtBeginTableStyles(t,e,n){var a=new_buf(2052);return a.write_shift(4,t),write_XLNullableWideString(e,a),write_XLNullableWideString(n,a),a.length>a.l?a.slice(0,a.l):a}function parse_sty_bin(t,e,n){var a={};a.NumberFmt=[];for(var o in table_fmt)a.NumberFmt[o]=table_fmt[o];a.CellXf=[],a.Fonts=[];var l=[],u=!1;return recordhopper(t,function(m,y,b){switch(b){case 44:a.NumberFmt[m[0]]=m[1],SSF__load(m[1],m[0]);break;case 43:a.Fonts.push(m),m.color.theme!=null&&e&&e.themeElements&&e.themeElements.clrScheme&&(m.color.rgb=rgb_tint(e.themeElements.clrScheme[m.color.theme].rgb,m.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:l[l.length-1]==617&&a.CellXf.push(m);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:u=!0;break;case 36:u=!1;break;case 37:l.push(b),u=!0;break;case 38:l.pop(),u=!1;break;default:if(y.T>0)l.push(b);else if(y.T<0)l.pop();else if(!u||n.WTF&&l[l.length-1]!=37)throw new Error("Unexpected record 0x"+b.toString(16))}}),a}function write_FMTS_bin(t,e){if(e){var n=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)e[o]!=null&&++n}),n!=0&&(write_record(t,615,write_UInt32LE(n)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)e[o]!=null&&write_record(t,44,write_BrtFmt(o,e[o]))}),write_record(t,616))}}function write_FONTS_bin(t){var e=1;write_record(t,611,write_UInt32LE(e)),write_record(t,43,write_BrtFont({sz:12,color:{theme:1},name:"Calibri",family:2,scheme:"minor"})),write_record(t,612)}function write_FILLS_bin(t){var e=2;write_record(t,603,write_UInt32LE(e)),write_record(t,45,write_BrtFill({patternType:"none"})),write_record(t,45,write_BrtFill({patternType:"gray125"})),write_record(t,604)}function write_BORDERS_bin(t){var e=1;write_record(t,613,write_UInt32LE(e)),write_record(t,46,write_BrtBorder()),write_record(t,614)}function write_CELLSTYLEXFS_bin(t){var e=1;write_record(t,626,write_UInt32LE(e)),write_record(t,47,write_BrtXF({numFmtId:0,fontId:0,fillId:0,borderId:0},65535)),write_record(t,627)}function write_CELLXFS_bin(t,e){write_record(t,617,write_UInt32LE(e.length)),e.forEach(function(n){write_record(t,47,write_BrtXF(n,0))}),write_record(t,618)}function write_STYLES_bin(t){var e=1;write_record(t,619,write_UInt32LE(e)),write_record(t,48,write_BrtStyle({xfId:0,builtinId:0,name:"Normal"})),write_record(t,620)}function write_DXFS_bin(t){var e=0;write_record(t,505,write_UInt32LE(e)),write_record(t,506)}function write_TABLESTYLES_bin(t){var e=0;write_record(t,508,write_BrtBeginTableStyles(e,"TableStyleMedium9","PivotStyleMedium4")),write_record(t,509)}function write_sty_bin(t,e){var n=buf_array();return write_record(n,278),write_FMTS_bin(n,t.SSF),write_FONTS_bin(n),write_FILLS_bin(n),write_BORDERS_bin(n),write_CELLSTYLEXFS_bin(n),write_CELLXFS_bin(n,e.cellXfs),write_STYLES_bin(n),write_DXFS_bin(n),write_TABLESTYLES_bin(n),write_record(n,279),n.end()}var XLSXThemeClrScheme=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function parse_clrScheme(t,e,n){e.themeElements.clrScheme=[];var a={};(t[0].match(tagregex)||[]).forEach(function(o){var l=parsexmltag(o);switch(l[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=l.val;break;case"<a:sysClr":a.rgb=l.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":l[0].charAt(1)==="/"?(e.themeElements.clrScheme[XLSXThemeClrScheme.indexOf(l[0])]=a,a={}):a.name=l[0].slice(3,l[0].length-1);break;default:if(n&&n.WTF)throw new Error("Unrecognized "+l[0]+" in clrScheme")}})}function parse_fontScheme(){}function parse_fmtScheme(){}var clrsregex=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,fntsregex=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,fmtsregex=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function parse_themeElements(t,e,n){e.themeElements={};var a;[["clrScheme",clrsregex,parse_clrScheme],["fontScheme",fntsregex,parse_fontScheme],["fmtScheme",fmtsregex,parse_fmtScheme]].forEach(function(o){if(!(a=t.match(o[1])))throw new Error(o[0]+" not found in themeElements");o[2](a,e,n)})}var themeltregex=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function parse_theme_xml(t,e){(!t||t.length===0)&&(t=write_theme());var n,a={};if(!(n=t.match(themeltregex)))throw new Error("themeElements not found in theme");return parse_themeElements(n[0],a,e),a.raw=t,a}function write_theme(t,e){if(e&&e.themeXLSX)return e.themeXLSX;if(t&&typeof t.raw=="string")return t.raw;var n=[XML_HEADER];return n[n.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',n[n.length]="<a:themeElements>",n[n.length]='<a:clrScheme name="Office">',n[n.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',n[n.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',n[n.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',n[n.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',n[n.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',n[n.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',n[n.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',n[n.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',n[n.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',n[n.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',n[n.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',n[n.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',n[n.length]="</a:clrScheme>",n[n.length]='<a:fontScheme name="Office">',n[n.length]="<a:majorFont>",n[n.length]='<a:latin typeface="Cambria"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Times New Roman"/>',n[n.length]='<a:font script="Hebr" typeface="Times New Roman"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="MoolBoran"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Times New Roman"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:majorFont>",n[n.length]="<a:minorFont>",n[n.length]='<a:latin typeface="Calibri"/>',n[n.length]='<a:ea typeface=""/>',n[n.length]='<a:cs typeface=""/>',n[n.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',n[n.length]='<a:font script="Hang" typeface="맑은 고딕"/>',n[n.length]='<a:font script="Hans" typeface="宋体"/>',n[n.length]='<a:font script="Hant" typeface="新細明體"/>',n[n.length]='<a:font script="Arab" typeface="Arial"/>',n[n.length]='<a:font script="Hebr" typeface="Arial"/>',n[n.length]='<a:font script="Thai" typeface="Tahoma"/>',n[n.length]='<a:font script="Ethi" typeface="Nyala"/>',n[n.length]='<a:font script="Beng" typeface="Vrinda"/>',n[n.length]='<a:font script="Gujr" typeface="Shruti"/>',n[n.length]='<a:font script="Khmr" typeface="DaunPenh"/>',n[n.length]='<a:font script="Knda" typeface="Tunga"/>',n[n.length]='<a:font script="Guru" typeface="Raavi"/>',n[n.length]='<a:font script="Cans" typeface="Euphemia"/>',n[n.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',n[n.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',n[n.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',n[n.length]='<a:font script="Thaa" typeface="MV Boli"/>',n[n.length]='<a:font script="Deva" typeface="Mangal"/>',n[n.length]='<a:font script="Telu" typeface="Gautami"/>',n[n.length]='<a:font script="Taml" typeface="Latha"/>',n[n.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',n[n.length]='<a:font script="Orya" typeface="Kalinga"/>',n[n.length]='<a:font script="Mlym" typeface="Kartika"/>',n[n.length]='<a:font script="Laoo" typeface="DokChampa"/>',n[n.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',n[n.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',n[n.length]='<a:font script="Viet" typeface="Arial"/>',n[n.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',n[n.length]='<a:font script="Geor" typeface="Sylfaen"/>',n[n.length]="</a:minorFont>",n[n.length]="</a:fontScheme>",n[n.length]='<a:fmtScheme name="Office">',n[n.length]="<a:fillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="1"/>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:lin ang="16200000" scaled="0"/>',n[n.length]="</a:gradFill>",n[n.length]="</a:fillStyleLst>",n[n.length]="<a:lnStyleLst>",n[n.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',n[n.length]="</a:lnStyleLst>",n[n.length]="<a:effectStyleLst>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]="</a:effectStyle>",n[n.length]="<a:effectStyle>",n[n.length]="<a:effectLst>",n[n.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',n[n.length]="</a:effectLst>",n[n.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',n[n.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',n[n.length]="</a:effectStyle>",n[n.length]="</a:effectStyleLst>",n[n.length]="<a:bgFillStyleLst>",n[n.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]='<a:gradFill rotWithShape="1">',n[n.length]="<a:gsLst>",n[n.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',n[n.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',n[n.length]="</a:gsLst>",n[n.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',n[n.length]="</a:gradFill>",n[n.length]="</a:bgFillStyleLst>",n[n.length]="</a:fmtScheme>",n[n.length]="</a:themeElements>",n[n.length]="<a:objectDefaults>",n[n.length]="<a:spDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',n[n.length]="</a:spDef>",n[n.length]="<a:lnDef>",n[n.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',n[n.length]="</a:lnDef>",n[n.length]="</a:objectDefaults>",n[n.length]="<a:extraClrSchemeLst/>",n[n.length]="</a:theme>",n.join("")}function parse_Theme(t,e,n){var a=t.l+e,o=t.read_shift(4);if(o!==124226){if(!n.cellStyles){t.l=a;return}var l=t.slice(t.l);t.l=a;var u;try{u=zip_read(l,{type:"array"})}catch{return}var d=getzipstr(u,"theme/theme/theme1.xml",!0);if(d)return parse_theme_xml(d,n)}}function parse_ColorTheme(t){return t.read_shift(4)}function parse_FullColorExt(t){var e={};switch(e.xclrType=t.read_shift(2),e.nTintShade=t.read_shift(2),e.xclrType){case 0:t.l+=4;break;case 1:e.xclrValue=parse_IcvXF(t,4);break;case 2:e.xclrValue=parse_LongRGBA(t);break;case 3:e.xclrValue=parse_ColorTheme(t);break;case 4:t.l+=4;break}return t.l+=8,e}function parse_IcvXF(t,e){return parsenoop(t,e)}function parse_XFExtGradient(t,e){return parsenoop(t,e)}function parse_ExtProp(t){var e=t.read_shift(2),n=t.read_shift(2)-4,a=[e];switch(e){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=parse_FullColorExt(t);break;case 6:a[1]=parse_XFExtGradient(t,n);break;case 14:case 15:a[1]=t.read_shift(n===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+e+" "+n)}return a}function parse_XFExt(t,e){var n=t.l+e;t.l+=2;var a=t.read_shift(2);t.l+=2;for(var o=t.read_shift(2),l=[];o-- >0;)l.push(parse_ExtProp(t,n-t.l));return{ixfe:a,ext:l}}function update_xfext(t,e){e.forEach(function(n){switch(n[0]){}})}function parse_BrtMdtinfo(t,e){return{flags:t.read_shift(4),version:t.read_shift(4),name:parse_XLWideString(t)}}function write_BrtMdtinfo(t){var e=new_buf(12+2*t.name.length);return e.write_shift(4,t.flags),e.write_shift(4,t.version),write_XLWideString(t.name,e),e.slice(0,e.l)}function parse_BrtMdb(t){for(var e=[],n=t.read_shift(4);n-- >0;)e.push([t.read_shift(4),t.read_shift(4)]);return e}function write_BrtMdb(t){var e=new_buf(4+8*t.length);e.write_shift(4,t.length);for(var n=0;n<t.length;++n)e.write_shift(4,t[n][0]),e.write_shift(4,t[n][1]);return e}function write_BrtBeginEsfmd(t,e){var n=new_buf(8+2*e.length);return n.write_shift(4,t),write_XLWideString(e,n),n.slice(0,n.l)}function parse_BrtBeginEsmdb(t){return t.l+=4,t.read_shift(4)!=0}function write_BrtBeginEsmdb(t,e){var n=new_buf(8);return n.write_shift(4,t),n.write_shift(4,e?1:0),n}function parse_xlmeta_bin(t,e,n){var a={Types:[],Cell:[],Value:[]},o=n||{},l=[],u=!1,d=2;return recordhopper(t,function(m,y,b){switch(b){case 335:a.Types.push({name:m.name});break;case 51:m.forEach(function(_){d==1?a.Cell.push({type:a.Types[_[0]-1].name,index:_[1]}):d==0&&a.Value.push({type:a.Types[_[0]-1].name,index:_[1]})});break;case 337:d=m?1:0;break;case 338:d=2;break;case 35:l.push(b),u=!0;break;case 36:l.pop(),u=!1;break;default:if(!y.T){if(!u||o.WTF&&l[l.length-1]!=35)throw new Error("Unexpected record 0x"+b.toString(16))}}}),a}function write_xlmeta_bin(){var t=buf_array();return write_record(t,332),write_record(t,334,write_UInt32LE(1)),write_record(t,335,write_BrtMdtinfo({name:"XLDAPR",version:12e4,flags:3496657072})),write_record(t,336),write_record(t,339,write_BrtBeginEsfmd(1,"XLDAPR")),write_record(t,52),write_record(t,35,write_UInt32LE(514)),write_record(t,4096,write_UInt32LE(0)),write_record(t,4097,writeuint16(1)),write_record(t,36),write_record(t,53),write_record(t,340),write_record(t,337,write_BrtBeginEsmdb(1,!0)),write_record(t,51,write_BrtMdb([[1,0]])),write_record(t,338),write_record(t,333),t.end()}function parse_xlmeta_xml(t,e,n){var a={Types:[],Cell:[],Value:[]};if(!t)return a;var o=!1,l=2,u;return t.replace(tagregex,function(d){var m=parsexmltag(d);switch(strip_ns(m[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:m.name});break;case"</metadataType>":break;case"<futureMetadata":for(var y=0;y<a.Types.length;++y)a.Types[y].name==m.name&&(u=a.Types[y]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":l==1?a.Cell.push({type:a.Types[m.t-1].name,index:+m.v}):l==0&&a.Value.push({type:a.Types[m.t-1].name,index:+m.v});break;case"</rc>":break;case"<cellMetadata":l=1;break;case"</cellMetadata>":l=2;break;case"<valueMetadata":l=0;break;case"</valueMetadata>":l=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":o=!0;break;case"</ext>":o=!1;break;case"<rvb":if(!u)break;u.offsets||(u.offsets=[]),u.offsets.push(+m.i);break;default:if(!o&&n?.WTF)throw new Error("unrecognized "+m[0]+" in metadata")}return d}),a}function write_xlmeta_xml(){var t=[XML_HEADER];return t.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),t.join("")}function parse_cc_xml(t){var e=[];if(!t)return e;var n=1;return(t.match(tagregex)||[]).forEach(function(a){var o=parsexmltag(a);switch(o[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete o[0],o.i?n=o.i:o.i=n,e.push(o);break}}),e}function parse_BrtCalcChainItem$(t){var e={};e.i=t.read_shift(4);var n={};n.r=t.read_shift(4),n.c=t.read_shift(4),e.r=encode_cell(n);var a=t.read_shift(1);return a&2&&(e.l="1"),a&8&&(e.a="1"),e}function parse_cc_bin(t,e,n){var a=[];return recordhopper(t,function(l,u,d){switch(d){case 63:a.push(l);break;default:if(!u.T)throw new Error("Unexpected record 0x"+d.toString(16))}}),a}function parse_xlink_xml(){}function parse_xlink_bin(t,e,n,a){if(!t)return t;var o=a||{},l=!1;recordhopper(t,function(d,m,y){switch(y){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:l=!0;break;case 36:l=!1;break;default:if(!m.T){if(!l||o.WTF)throw new Error("Unexpected record 0x"+y.toString(16))}}},o)}function parse_drawing(t,e){if(!t)return"??";var n=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return e["!id"][n].Target}function write_vml(t,e){var n=[21600,21600],a=["m0,0l0",n[1],n[0],n[1],n[0],"0xe"].join(","),o=[writextag("xml",null,{"xmlns:v":XLMLNS.v,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:mv":XLMLNS.mv}).replace(/\/>/,">"),writextag("o:shapelayout",writextag("o:idmap",null,{"v:ext":"edit",data:t}),{"v:ext":"edit"})],l=65536*t,u=e||[];return u.length>0&&o.push(writextag("v:shapetype",[writextag("v:stroke",null,{joinstyle:"miter"}),writextag("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202",coordsize:n.join(","),"o:spt":202,path:a})),u.forEach(function(d){++l,o.push(write_vml_comment(d,l))}),o.push("</xml>"),o.join("")}function write_vml_comment(t,e){var n=decode_cell(t[0]),a={color2:"#BEFF82",type:"gradient"};a.type=="gradient"&&(a.angle="-180");var o=a.type=="gradient"?writextag("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,l=writextag("v:fill",o,a),u={on:"t",obscured:"t"};return["<v:shape"+wxt_helper({id:"_x0000_s"+e,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(t[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",l,writextag("v:shadow",null,u),writextag("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",writetag("x:Anchor",[n.c+1,0,n.r+1,0,n.c+3,20,n.r+5,20].join(",")),writetag("x:AutoFill","False"),writetag("x:Row",String(n.r)),writetag("x:Column",String(n.c)),t[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"].join("")}function sheet_insert_comments(t,e,n,a){var o=t["!data"]!=null,l;e.forEach(function(u){var d=decode_cell(u.ref);if(o?(t["!data"][d.r]||(t["!data"][d.r]=[]),l=t["!data"][d.r][d.c]):l=t[u.ref],!l){l={t:"z"},o?t["!data"][d.r][d.c]=l:t[u.ref]=l;var m=safe_decode_range(t["!ref"]||"BDWGO1000001:A1");m.s.r>d.r&&(m.s.r=d.r),m.e.r<d.r&&(m.e.r=d.r),m.s.c>d.c&&(m.s.c=d.c),m.e.c<d.c&&(m.e.c=d.c);var y=encode_range(m);t["!ref"]=y}l.c||(l.c=[]);var b={a:u.author,t:u.t,r:u.r,T:n};u.h&&(b.h=u.h);for(var _=l.c.length-1;_>=0;--_){if(!n&&l.c[_].T)return;n&&!l.c[_].T&&l.c.splice(_,1)}if(n&&a){for(_=0;_<a.length;++_)if(b.a==a[_].id){b.a=a[_].name||b.a;break}}l.c.push(b)})}function parse_comments_xml(t,e){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var n=[],a=[],o=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);o&&o[1]&&o[1].split(/<\/\w*:?author>/).forEach(function(u){if(!(u===""||u.trim()==="")){var d=u.match(/<(?:\w+:)?author[^>]*>(.*)/);d&&n.push(d[1])}});var l=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return l&&l[1]&&l[1].split(/<\/\w*:?comment>/).forEach(function(u){if(!(u===""||u.trim()==="")){var d=u.match(/<(?:\w+:)?comment[^>]*>/);if(d){var m=parsexmltag(d[0]),y={author:m.authorId&&n[m.authorId]||"sheetjsghost",ref:m.ref,guid:m.guid},b=decode_cell(m.ref);if(!(e.sheetRows&&e.sheetRows<=b.r)){var _=u.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),w=!!_&&!!_[1]&&parse_si(_[1])||{r:"",t:"",h:""};y.r=w.r,w.r=="<t></t>"&&(w.t=w.h=""),y.t=(w.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.cellHTML&&(y.h=w.h),a.push(y)}}}}),a}function write_comments_xml(t){var e=[XML_HEADER,writextag("comments",null,{xmlns:XMLNS_main[0]})],n=[];return e.push("<authors>"),t.forEach(function(a){a[1].forEach(function(o){var l=escapexml(o.a);n.indexOf(l)==-1&&(n.push(l),e.push("<author>"+l+"</author>")),o.T&&o.ID&&n.indexOf("tc="+o.ID)==-1&&(n.push("tc="+o.ID),e.push("<author>tc="+o.ID+"</author>"))})}),n.length==0&&(n.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),t.forEach(function(a){var o=0,l=[],u=0;if(a[1][0]&&a[1][0].T&&a[1][0].ID&&(o=n.indexOf("tc="+a[1][0].ID)),a[1].forEach(function(y){y.a&&(o=n.indexOf(escapexml(y.a))),y.T&&++u,l.push(y.t==null?"":escapexml(y.t))}),u===0)a[1].forEach(function(y){e.push('<comment ref="'+a[0]+'" authorId="'+n.indexOf(escapexml(y.a))+'"><text>'),e.push(writetag("t",y.t==null?"":escapexml(y.t))),e.push("</text></comment>")});else{e.push('<comment ref="'+a[0]+'" authorId="'+o+'"><text>');for(var d=`Comment:
    `+l[0]+`
`,m=1;m<l.length;++m)d+=`Reply:
    `+l[m]+`
`;e.push(writetag("t",escapexml(d))),e.push("</text></comment>")}}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function parse_tcmnt_xml(t,e){var n=[],a=!1,o={},l=0;return t.replace(tagregex,function(d,m){var y=parsexmltag(d);switch(strip_ns(y[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":o={author:y.personId,guid:y.id,ref:y.ref,T:1};break;case"</threadedComment>":o.t!=null&&n.push(o);break;case"<text>":case"<text":l=m+d.length;break;case"</text>":o.t=t.slice(l,m).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&e.WTF)throw new Error("unrecognized "+y[0]+" in threaded comments")}return d}),n}function write_tcmnt_xml(t,e,n){var a=[XML_HEADER,writextag("ThreadedComments",null,{xmlns:XMLNS.TCMNT}).replace(/[\/]>/,">")];return t.forEach(function(o){var l="";(o[1]||[]).forEach(function(u,d){if(!u.T){delete u.ID;return}u.a&&e.indexOf(u.a)==-1&&e.push(u.a);var m={ref:o[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+n.tcid++).slice(-12)+"}"};d==0?l=m.id:m.parentId=l,u.ID=m.id,u.a&&(m.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(u.a)).slice(-12)+"}"),a.push(writextag("threadedComment",writetag("text",u.t||""),m))})}),a.push("</ThreadedComments>"),a.join("")}function parse_people_xml(t,e){var n=[],a=!1;return t.replace(tagregex,function(l){var u=parsexmltag(l);switch(strip_ns(u[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":n.push({name:u.displayname,id:u.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&e.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),n}function write_people_xml(t){var e=[XML_HEADER,writextag("personList",null,{xmlns:XMLNS.TCMNT,"xmlns:x":XMLNS_main[0]}).replace(/[\/]>/,">")];return t.forEach(function(n,a){e.push(writextag("person",null,{displayName:n,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:n,providerId:"None"}))}),e.push("</personList>"),e.join("")}function parse_BrtBeginComment(t){var e={};e.iauthor=t.read_shift(4);var n=parse_UncheckedRfX(t);return e.rfx=n.s,e.ref=encode_cell(n.s),t.l+=16,e}function write_BrtBeginComment(t,e){return e==null&&(e=new_buf(36)),e.write_shift(4,t[1].iauthor),write_UncheckedRfX(t[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var parse_BrtCommentAuthor=parse_XLWideString;function write_BrtCommentAuthor(t){return write_XLWideString(t.slice(0,54))}function parse_comments_bin(t,e){var n=[],a=[],o={},l=!1;return recordhopper(t,function(d,m,y){switch(y){case 632:a.push(d);break;case 635:o=d;break;case 637:o.t=d.t,o.h=d.h,o.r=d.r;break;case 636:if(o.author=a[o.iauthor],delete o.iauthor,e.sheetRows&&o.rfx&&e.sheetRows<=o.rfx.r)break;o.t||(o.t=""),delete o.rfx,n.push(o);break;case 3072:break;case 35:l=!0;break;case 36:l=!1;break;case 37:break;case 38:break;default:if(!m.T){if(!l||e.WTF)throw new Error("Unexpected record 0x"+y.toString(16))}}}),n}function write_comments_bin(t){var e=buf_array(),n=[];return write_record(e,628),write_record(e,630),t.forEach(function(a){a[1].forEach(function(o){n.indexOf(o.a)>-1||(n.push(o.a.slice(0,54)),write_record(e,632,write_BrtCommentAuthor(o.a)))})}),write_record(e,631),write_record(e,633),t.forEach(function(a){a[1].forEach(function(o){o.iauthor=n.indexOf(o.a);var l={s:decode_cell(a[0]),e:decode_cell(a[0])};write_record(e,635,write_BrtBeginComment([l,o])),o.t&&o.t.length>0&&write_record(e,637,write_BrtCommentText(o)),write_record(e,636),delete o.iauthor})}),write_record(e,634),write_record(e,629),e.end()}var CT_VBA="application/vnd.ms-office.vbaProject";function make_vba_xls(t){var e=CFB.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(n,a){if(!(n.slice(-1)==="/"||!n.match(/_VBA_PROJECT_CUR/))){var o=n.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");CFB.utils.cfb_add(e,o,t.FileIndex[a].content)}}),CFB.write(e)}function fill_vba_xls(t,e){e.FullPaths.forEach(function(n,a){if(a!=0){var o=n.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");o.slice(-1)!=="/"&&CFB.utils.cfb_add(t,o,e.FileIndex[a].content)}})}var VBAFMTS=["xlsb","xlsm","xlam","biff8","xla"];function parse_ds_bin(){return{"!type":"dialog"}}function parse_ds_xml(){return{"!type":"dialog"}}function parse_ms_bin(){return{"!type":"macro"}}function parse_ms_xml(){return{"!type":"macro"}}var rc_to_a1=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function n(a,o,l,u){var d=!1,m=!1;l.length==0?m=!0:l.charAt(0)=="["&&(m=!0,l=l.slice(1,-1)),u.length==0?d=!0:u.charAt(0)=="["&&(d=!0,u=u.slice(1,-1));var y=l.length>0?parseInt(l,10)|0:0,b=u.length>0?parseInt(u,10)|0:0;return d?b+=e.c:--b,m?y+=e.r:--y,o+(d?"":"$")+encode_col(b)+(m?"":"$")+encode_row(y)}return function(o,l){return e=l,o.replace(t,n)}}(),crefregex=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,a1_to_rc=function(){return function(e,n){return e.replace(crefregex,function(a,o,l,u,d,m){var y=decode_col(u)-(l?0:n.c),b=decode_row(m)-(d?0:n.r),_=d=="$"?b+1:b==0?"":"["+b+"]",w=l=="$"?y+1:y==0?"":"["+y+"]";return o+"R"+_+"C"+w})}}();function shift_formula_str(t,e){return t.replace(crefregex,function(n,a,o,l,u,d){return a+(o=="$"?o+l:encode_col(decode_col(l)+e.c))+(u=="$"?u+d:encode_row(decode_row(d)+e.r))})}function shift_formula_xlsx(t,e,n){var a=decode_range(e),o=a.s,l=decode_cell(n),u={r:l.r-o.r,c:l.c-o.c};return shift_formula_str(t,u)}function fuzzyfmla(t){return t.length!=1}function _xlfn(t){return t.replace(/_xlfn\./g,"")}function parseread1(t){t.l+=1}function parse_ColRelU(t,e){var n=t.read_shift(e==1?1:2);return[n&16383,n>>14&1,n>>15&1]}function parse_RgceArea(t,e,n){var a=2;if(n){if(n.biff>=2&&n.biff<=5)return parse_RgceArea_BIFF2(t);n.biff==12&&(a=4)}var o=t.read_shift(a),l=t.read_shift(a),u=parse_ColRelU(t,2),d=parse_ColRelU(t,2);return{s:{r:o,c:u[0],cRel:u[1],rRel:u[2]},e:{r:l,c:d[0],cRel:d[1],rRel:d[2]}}}function parse_RgceArea_BIFF2(t){var e=parse_ColRelU(t,2),n=parse_ColRelU(t,2),a=t.read_shift(1),o=t.read_shift(1);return{s:{r:e[0],c:a,cRel:e[1],rRel:e[2]},e:{r:n[0],c:o,cRel:n[1],rRel:n[2]}}}function parse_RgceAreaRel(t,e,n){if(n.biff<8)return parse_RgceArea_BIFF2(t);var a=t.read_shift(n.biff==12?4:2),o=t.read_shift(n.biff==12?4:2),l=parse_ColRelU(t,2),u=parse_ColRelU(t,2);return{s:{r:a,c:l[0],cRel:l[1],rRel:l[2]},e:{r:o,c:u[0],cRel:u[1],rRel:u[2]}}}function parse_RgceLoc(t,e,n){if(n&&n.biff>=2&&n.biff<=5)return parse_RgceLoc_BIFF2(t);var a=t.read_shift(n&&n.biff==12?4:2),o=parse_ColRelU(t,2);return{r:a,c:o[0],cRel:o[1],rRel:o[2]}}function parse_RgceLoc_BIFF2(t){var e=parse_ColRelU(t,2),n=t.read_shift(1);return{r:e[0],c:n,cRel:e[1],rRel:e[2]}}function parse_RgceElfLoc(t){var e=t.read_shift(2),n=t.read_shift(2);return{r:e,c:n&255,fQuoted:!!(n&16384),cRel:n>>15,rRel:n>>15}}function parse_RgceLocRel(t,e,n){var a=n&&n.biff?n.biff:8;if(a>=2&&a<=5)return parse_RgceLocRel_BIFF2(t);var o=t.read_shift(a>=12?4:2),l=t.read_shift(2),u=(l&16384)>>14,d=(l&32768)>>15;if(l&=16383,d==1)for(;o>524287;)o-=1048576;if(u==1)for(;l>8191;)l=l-16384;return{r:o,c:l,cRel:u,rRel:d}}function parse_RgceLocRel_BIFF2(t){var e=t.read_shift(2),n=t.read_shift(1),a=(e&32768)>>15,o=(e&16384)>>14;return e&=16383,a==1&&e>=8192&&(e=e-16384),o==1&&n>=128&&(n=n-256),{r:e,c:n,cRel:o,rRel:a}}function parse_PtgArea(t,e,n){var a=(t[t.l++]&96)>>5,o=parse_RgceArea(t,n.biff>=2&&n.biff<=5?6:8,n);return[a,o]}function parse_PtgArea3d(t,e,n){var a=(t[t.l++]&96)>>5,o=t.read_shift(2,"i"),l=8;if(n)switch(n.biff){case 5:t.l+=12,l=6;break;case 12:l=12;break}var u=parse_RgceArea(t,l,n);return[a,o,u]}function parse_PtgAreaErr(t,e,n){var a=(t[t.l++]&96)>>5;return t.l+=n&&n.biff>8?12:n.biff<8?6:8,[a]}function parse_PtgAreaErr3d(t,e,n){var a=(t[t.l++]&96)>>5,o=t.read_shift(2),l=8;if(n)switch(n.biff){case 5:t.l+=12,l=6;break;case 12:l=12;break}return t.l+=l,[a,o]}function parse_PtgAreaN(t,e,n){var a=(t[t.l++]&96)>>5,o=parse_RgceAreaRel(t,e-1,n);return[a,o]}function parse_PtgArray(t,e,n){var a=(t[t.l++]&96)>>5;return t.l+=n.biff==2?6:n.biff==12?14:7,[a]}function parse_PtgAttrBaxcel(t){var e=t[t.l+1]&1,n=1;return t.l+=4,[e,n]}function parse_PtgAttrChoose(t,e,n){t.l+=2;for(var a=t.read_shift(n&&n.biff==2?1:2),o=[],l=0;l<=a;++l)o.push(t.read_shift(n&&n.biff==2?1:2));return o}function parse_PtgAttrGoto(t,e,n){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(n&&n.biff==2?1:2)]}function parse_PtgAttrIf(t,e,n){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(n&&n.biff==2?1:2)]}function parse_PtgAttrIfError(t){var e=t[t.l+1]&255?1:0;return t.l+=2,[e,t.read_shift(2)]}function parse_PtgAttrSemi(t,e,n){var a=t[t.l+1]&255?1:0;return t.l+=n&&n.biff==2?3:4,[a]}function parse_PtgAttrSpaceType(t){var e=t.read_shift(1),n=t.read_shift(1);return[e,n]}function parse_PtgAttrSpace(t){return t.read_shift(2),parse_PtgAttrSpaceType(t)}function parse_PtgAttrSpaceSemi(t){return t.read_shift(2),parse_PtgAttrSpaceType(t)}function parse_PtgRef(t,e,n){var a=(t[t.l]&96)>>5;t.l+=1;var o=parse_RgceLoc(t,0,n);return[a,o]}function parse_PtgRefN(t,e,n){var a=(t[t.l]&96)>>5;t.l+=1;var o=parse_RgceLocRel(t,0,n);return[a,o]}function parse_PtgRef3d(t,e,n){var a=(t[t.l]&96)>>5;t.l+=1;var o=t.read_shift(2);n&&n.biff==5&&(t.l+=12);var l=parse_RgceLoc(t,0,n);return[a,o,l]}function parse_PtgFunc(t,e,n){var a=(t[t.l]&96)>>5;t.l+=1;var o=t.read_shift(n&&n.biff<=3?1:2);return[FtabArgc[o],Ftab[o],a]}function parse_PtgFuncVar(t,e,n){var a=t[t.l++],o=t.read_shift(1),l=n&&n.biff<=3?[a==88?-1:0,t.read_shift(1)]:parsetab(t);return[o,(l[0]===0?Ftab:Cetab)[l[1]]]}function parsetab(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function parse_PtgAttrSum(t,e,n){t.l+=n&&n.biff==2?3:4}function parse_PtgExp(t,e,n){if(t.l++,n&&n.biff==12)return[t.read_shift(4,"i"),0];var a=t.read_shift(2),o=t.read_shift(n&&n.biff==2?1:2);return[a,o]}function parse_PtgErr(t){return t.l++,BErr[t.read_shift(1)]}function parse_PtgInt(t){return t.l++,t.read_shift(2)}function parse_PtgBool(t){return t.l++,t.read_shift(1)!==0}function parse_PtgNum(t){return t.l++,parse_Xnum(t)}function parse_PtgStr(t,e,n){return t.l++,parse_ShortXLUnicodeString(t,e-1,n)}function parse_SerAr(t,e){var n=[t.read_shift(1)];if(e==12)switch(n[0]){case 2:n[0]=4;break;case 4:n[0]=16;break;case 0:n[0]=1;break;case 1:n[0]=2;break}switch(n[0]){case 4:n[1]=parsebool(t,1)?"TRUE":"FALSE",e!=12&&(t.l+=7);break;case 37:case 16:n[1]=BErr[t[t.l]],t.l+=e==12?4:8;break;case 0:t.l+=8;break;case 1:n[1]=parse_Xnum(t);break;case 2:n[1]=parse_XLUnicodeString2(t,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+n[0])}return n}function parse_PtgExtraMem(t,e,n){for(var a=t.read_shift(n.biff==12?4:2),o=[],l=0;l!=a;++l)o.push((n.biff==12?parse_UncheckedRfX:parse_Ref8U)(t));return o}function parse_PtgExtraArray(t,e,n){var a=0,o=0;n.biff==12?(a=t.read_shift(4),o=t.read_shift(4)):(o=1+t.read_shift(1),a=1+t.read_shift(2)),n.biff>=2&&n.biff<8&&(--a,--o==0&&(o=256));for(var l=0,u=[];l!=a&&(u[l]=[]);++l)for(var d=0;d!=o;++d)u[l][d]=parse_SerAr(t,n.biff);return u}function parse_PtgName(t,e,n){var a=t.read_shift(1)>>>5&3,o=!n||n.biff>=8?4:2,l=t.read_shift(o);switch(n.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[a,0,l]}function parse_PtgNameX(t,e,n){if(n.biff==5)return parse_PtgNameX_BIFF5(t);var a=t.read_shift(1)>>>5&3,o=t.read_shift(2),l=t.read_shift(4);return[a,o,l]}function parse_PtgNameX_BIFF5(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2,"i");t.l+=8;var a=t.read_shift(2);return t.l+=12,[e,n,a]}function parse_PtgMemArea(t,e,n){var a=t.read_shift(1)>>>5&3;t.l+=n&&n.biff==2?3:4;var o=t.read_shift(n&&n.biff==2?1:2);return[a,o]}function parse_PtgMemFunc(t,e,n){var a=t.read_shift(1)>>>5&3,o=t.read_shift(n&&n.biff==2?1:2);return[a,o]}function parse_PtgRefErr(t,e,n){var a=t.read_shift(1)>>>5&3;return t.l+=4,n.biff<8&&t.l--,n.biff==12&&(t.l+=2),[a]}function parse_PtgRefErr3d(t,e,n){var a=(t[t.l++]&96)>>5,o=t.read_shift(2),l=4;if(n)switch(n.biff){case 5:l=15;break;case 12:l=6;break}return t.l+=l,[a,o]}var parse_PtgMemErr=parsenoop,parse_PtgMemNoMem=parsenoop,parse_PtgTbl=parsenoop;function parse_PtgElfLoc(t,e,n){return t.l+=2,[parse_RgceElfLoc(t)]}function parse_PtgElfNoop(t){return t.l+=6,[]}var parse_PtgElfCol=parse_PtgElfLoc,parse_PtgElfColS=parse_PtgElfNoop,parse_PtgElfColSV=parse_PtgElfNoop,parse_PtgElfColV=parse_PtgElfLoc;function parse_PtgElfLel(t){return t.l+=2,[parseuint16(t),t.read_shift(2)&1]}var parse_PtgElfRadical=parse_PtgElfLoc,parse_PtgElfRadicalLel=parse_PtgElfLel,parse_PtgElfRadicalS=parse_PtgElfNoop,parse_PtgElfRw=parse_PtgElfLoc,parse_PtgElfRwV=parse_PtgElfLoc,PtgListRT=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function parse_PtgList(t){t.l+=2;var e=t.read_shift(2),n=t.read_shift(2),a=t.read_shift(4),o=t.read_shift(2),l=t.read_shift(2),u=PtgListRT[n>>2&31];return{ixti:e,coltype:n&3,rt:u,idx:a,c:o,C:l}}function parse_PtgSxName(t){return t.l+=2,[t.read_shift(4)]}function parse_PtgSheet(t,e,n){return t.l+=5,t.l+=2,t.l+=n.biff==2?1:4,["PTGSHEET"]}function parse_PtgEndSheet(t,e,n){return t.l+=n.biff==2?4:5,["PTGENDSHEET"]}function parse_PtgMemAreaN(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function parse_PtgMemNoMemN(t){var e=t.read_shift(1)>>>5&3,n=t.read_shift(2);return[e,n]}function parse_PtgAttrNoop(t){return t.l+=4,[0,0]}var PtgTypes={1:{n:"PtgExp",f:parse_PtgExp},2:{n:"PtgTbl",f:parse_PtgTbl},3:{n:"PtgAdd",f:parseread1},4:{n:"PtgSub",f:parseread1},5:{n:"PtgMul",f:parseread1},6:{n:"PtgDiv",f:parseread1},7:{n:"PtgPower",f:parseread1},8:{n:"PtgConcat",f:parseread1},9:{n:"PtgLt",f:parseread1},10:{n:"PtgLe",f:parseread1},11:{n:"PtgEq",f:parseread1},12:{n:"PtgGe",f:parseread1},13:{n:"PtgGt",f:parseread1},14:{n:"PtgNe",f:parseread1},15:{n:"PtgIsect",f:parseread1},16:{n:"PtgUnion",f:parseread1},17:{n:"PtgRange",f:parseread1},18:{n:"PtgUplus",f:parseread1},19:{n:"PtgUminus",f:parseread1},20:{n:"PtgPercent",f:parseread1},21:{n:"PtgParen",f:parseread1},22:{n:"PtgMissArg",f:parseread1},23:{n:"PtgStr",f:parse_PtgStr},26:{n:"PtgSheet",f:parse_PtgSheet},27:{n:"PtgEndSheet",f:parse_PtgEndSheet},28:{n:"PtgErr",f:parse_PtgErr},29:{n:"PtgBool",f:parse_PtgBool},30:{n:"PtgInt",f:parse_PtgInt},31:{n:"PtgNum",f:parse_PtgNum},32:{n:"PtgArray",f:parse_PtgArray},33:{n:"PtgFunc",f:parse_PtgFunc},34:{n:"PtgFuncVar",f:parse_PtgFuncVar},35:{n:"PtgName",f:parse_PtgName},36:{n:"PtgRef",f:parse_PtgRef},37:{n:"PtgArea",f:parse_PtgArea},38:{n:"PtgMemArea",f:parse_PtgMemArea},39:{n:"PtgMemErr",f:parse_PtgMemErr},40:{n:"PtgMemNoMem",f:parse_PtgMemNoMem},41:{n:"PtgMemFunc",f:parse_PtgMemFunc},42:{n:"PtgRefErr",f:parse_PtgRefErr},43:{n:"PtgAreaErr",f:parse_PtgAreaErr},44:{n:"PtgRefN",f:parse_PtgRefN},45:{n:"PtgAreaN",f:parse_PtgAreaN},46:{n:"PtgMemAreaN",f:parse_PtgMemAreaN},47:{n:"PtgMemNoMemN",f:parse_PtgMemNoMemN},57:{n:"PtgNameX",f:parse_PtgNameX},58:{n:"PtgRef3d",f:parse_PtgRef3d},59:{n:"PtgArea3d",f:parse_PtgArea3d},60:{n:"PtgRefErr3d",f:parse_PtgRefErr3d},61:{n:"PtgAreaErr3d",f:parse_PtgAreaErr3d},255:{}},PtgDupes={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Ptg18={1:{n:"PtgElfLel",f:parse_PtgElfLel},2:{n:"PtgElfRw",f:parse_PtgElfRw},3:{n:"PtgElfCol",f:parse_PtgElfCol},6:{n:"PtgElfRwV",f:parse_PtgElfRwV},7:{n:"PtgElfColV",f:parse_PtgElfColV},10:{n:"PtgElfRadical",f:parse_PtgElfRadical},11:{n:"PtgElfRadicalS",f:parse_PtgElfRadicalS},13:{n:"PtgElfColS",f:parse_PtgElfColS},15:{n:"PtgElfColSV",f:parse_PtgElfColSV},16:{n:"PtgElfRadicalLel",f:parse_PtgElfRadicalLel},25:{n:"PtgList",f:parse_PtgList},29:{n:"PtgSxName",f:parse_PtgSxName},255:{}},Ptg19={0:{n:"PtgAttrNoop",f:parse_PtgAttrNoop},1:{n:"PtgAttrSemi",f:parse_PtgAttrSemi},2:{n:"PtgAttrIf",f:parse_PtgAttrIf},4:{n:"PtgAttrChoose",f:parse_PtgAttrChoose},8:{n:"PtgAttrGoto",f:parse_PtgAttrGoto},16:{n:"PtgAttrSum",f:parse_PtgAttrSum},32:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},33:{n:"PtgAttrBaxcel",f:parse_PtgAttrBaxcel},64:{n:"PtgAttrSpace",f:parse_PtgAttrSpace},65:{n:"PtgAttrSpaceSemi",f:parse_PtgAttrSpaceSemi},128:{n:"PtgAttrIfError",f:parse_PtgAttrIfError},255:{}};function parse_RgbExtra(t,e,n,a){if(a.biff<8)return parsenoop(t,e);for(var o=t.l+e,l=[],u=0;u!==n.length;++u)switch(n[u][0]){case"PtgArray":n[u][1]=parse_PtgExtraArray(t,0,a),l.push(n[u][1]);break;case"PtgMemArea":n[u][2]=parse_PtgExtraMem(t,n[u][1],a),l.push(n[u][2]);break;case"PtgExp":a&&a.biff==12&&(n[u][1][1]=t.read_shift(4),l.push(n[u][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+n[u][0]}return e=o-t.l,e!==0&&l.push(parsenoop(t,e)),l}function parse_Rgce(t,e,n){for(var a=t.l+e,o,l,u=[];a!=t.l;)e=a-t.l,l=t[t.l],o=PtgTypes[l]||PtgTypes[PtgDupes[l]],(l===24||l===25)&&(o=(l===24?Ptg18:Ptg19)[t[t.l+1]]),!o||!o.f?parsenoop(t,e):u.push([o.n,o.f(t,e,n)]);return u}function stringify_array(t){for(var e=[],n=0;n<t.length;++n){for(var a=t[n],o=[],l=0;l<a.length;++l){var u=a[l];if(u)switch(u[0]){case 2:o.push('"'+u[1].replace(/"/g,'""')+'"');break;default:o.push(u[1])}else o.push("")}e.push(o.join(","))}return e.join(";")}var PtgBinOp={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function make_3d_range(t,e){var n=t.lastIndexOf("!"),a=e.lastIndexOf("!");return n==-1&&a==-1?t+":"+e:n>0&&a>0&&t.slice(0,n).toLowerCase()==e.slice(0,a).toLowerCase()?t+":"+e.slice(a+1):(console.error("Cannot hydrate range",t,e),t+":"+e)}function get_ixti_raw(t,e,n){if(!t)return"SH33TJSERR0";if(n.biff>8&&(!t.XTI||!t.XTI[e]))return t.SheetNames[e];if(!t.XTI)return"SH33TJSERR6";var a=t.XTI[e];if(n.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":t.XTI[e-1];if(!a)return"SH33TJSERR1";var o="";if(n.biff>8)switch(t[a[0]][0]){case 357:return o=a[1]==-1?"#REF":t.SheetNames[a[1]],a[1]==a[2]?o:o+":"+t.SheetNames[a[2]];case 358:return n.SID!=null?t.SheetNames[n.SID]:"SH33TJSSAME"+t[a[0]][0];case 355:default:return"SH33TJSSRC"+t[a[0]][0]}switch(t[a[0]][0][0]){case 1025:return o=a[1]==-1?"#REF":t.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?o:o+":"+t.SheetNames[a[2]];case 14849:return t[a[0]].slice(1).map(function(l){return l.Name}).join(";;");default:return t[a[0]][0][3]?(o=a[1]==-1?"#REF":t[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?o:o+":"+t[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function get_ixti(t,e,n){var a=get_ixti_raw(t,e,n);return a=="#REF"?a:formula_quote_sheet_name(a,n)}function stringify_formula(t,e,n,a,o){var l=o&&o.biff||8,u={s:{c:0,r:0},e:{c:0,r:0}},d=[],m,y,b,_=0,w=0,E,A="";if(!t[0]||!t[0][0])return"";for(var C=-1,k="",B=0,D=t[0].length;B<D;++B){var q=t[0][B];switch(q[0]){case"PtgUminus":d.push("-"+d.pop());break;case"PtgUplus":d.push("+"+d.pop());break;case"PtgPercent":d.push(d.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(m=d.pop(),y=d.pop(),C>=0){switch(t[0][C][1][0]){case 0:k=fill(" ",t[0][C][1][1]);break;case 1:k=fill("\r",t[0][C][1][1]);break;default:if(k="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][C][1][0])}y=y+k,C=-1}d.push(y+PtgBinOp[q[0]]+m);break;case"PtgIsect":m=d.pop(),y=d.pop(),d.push(y+" "+m);break;case"PtgUnion":m=d.pop(),y=d.pop(),d.push(y+","+m);break;case"PtgRange":m=d.pop(),y=d.pop(),d.push(make_3d_range(y,m));break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":b=shift_cell_xls(q[1][1],u,o),d.push(encode_cell_xls(b,l));break;case"PtgRefN":b=n?shift_cell_xls(q[1][1],n,o):q[1][1],d.push(encode_cell_xls(b,l));break;case"PtgRef3d":_=q[1][1],b=shift_cell_xls(q[1][2],u,o),A=get_ixti(a,_,o),d.push(A+"!"+encode_cell_xls(b,l));break;case"PtgFunc":case"PtgFuncVar":var j=q[1][0],J=q[1][1];j||(j=0),j&=127;var Y=j==0?[]:d.slice(-j);d.length-=j,J==="User"&&(J=Y.shift()),d.push(J+"("+Y.join(",")+")");break;case"PtgBool":d.push(q[1]?"TRUE":"FALSE");break;case"PtgInt":d.push(q[1]);break;case"PtgNum":d.push(String(q[1]));break;case"PtgStr":d.push('"'+q[1].replace(/"/g,'""')+'"');break;case"PtgErr":d.push(q[1]);break;case"PtgAreaN":E=shift_range_xls(q[1][1],n?{s:n}:u,o),d.push(encode_range_xls(E,o));break;case"PtgArea":E=shift_range_xls(q[1][1],u,o),d.push(encode_range_xls(E,o));break;case"PtgArea3d":_=q[1][1],E=q[1][2],A=get_ixti(a,_,o),d.push(A+"!"+encode_range_xls(E,o));break;case"PtgAttrSum":d.push("SUM("+d.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":w=q[1][2];var L=(a.names||[])[w-1]||(a[0]||[])[w],Z=L?L.Name:"SH33TJSNAME"+String(w);Z&&Z.slice(0,6)=="_xlfn."&&!o.xlfn&&(Z=Z.slice(6)),d.push(Z);break;case"PtgNameX":var Q=q[1][1];w=q[1][2];var oe;if(o.biff<=5)Q<0&&(Q=-Q),a[Q]&&(oe=a[Q][w]);else{var ae="";if(((a[Q]||[])[0]||[])[0]==14849||(((a[Q]||[])[0]||[])[0]==1025?a[Q][w]&&a[Q][w].itab>0&&(ae=a.SheetNames[a[Q][w].itab-1]+"!"):ae=a.SheetNames[w-1]+"!"),a[Q]&&a[Q][w])ae+=a[Q][w].Name;else if(a[0]&&a[0][w])ae+=a[0][w].Name;else{var U=(get_ixti_raw(a,Q,o)||"").split(";;");U[w-1]?ae=U[w-1]:ae+="SH33TJSERRX"}d.push(ae);break}oe||(oe={Name:"SH33TJSERRY"}),d.push(oe.Name);break;case"PtgParen":var I="(",x=")";if(C>=0){switch(k="",t[0][C][1][0]){case 2:I=fill(" ",t[0][C][1][1])+I;break;case 3:I=fill("\r",t[0][C][1][1])+I;break;case 4:x=fill(" ",t[0][C][1][1])+x;break;case 5:x=fill("\r",t[0][C][1][1])+x;break;default:if(o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][C][1][0])}C=-1}d.push(I+d.pop()+x);break;case"PtgRefErr":d.push("#REF!");break;case"PtgRefErr3d":d.push("#REF!");break;case"PtgExp":b={c:q[1][1],r:q[1][0]};var T={c:n.c,r:n.r};if(a.sharedf[encode_cell(b)]){var M=a.sharedf[encode_cell(b)];d.push(stringify_formula(M,u,T,a,o))}else{var O=!1;for(m=0;m!=a.arrayf.length;++m)if(y=a.arrayf[m],!(b.c<y[0].s.c||b.c>y[0].e.c)&&!(b.r<y[0].s.r||b.r>y[0].e.r)){d.push(stringify_formula(y[1],u,T,a,o)),O=!0;break}O||d.push(q[1])}break;case"PtgArray":d.push("{"+stringify_array(q[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":C=B;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":d.push("");break;case"PtgAreaErr":d.push("#REF!");break;case"PtgAreaErr3d":d.push("#REF!");break;case"PtgList":d.push("Table"+q[1].idx+"[#"+q[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(q));default:throw new Error("Unrecognized Formula Token: "+String(q))}var z=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(o.biff!=3&&C>=0&&z.indexOf(t[0][B][0])==-1){q=t[0][C];var X=!0;switch(q[1][0]){case 4:X=!1;case 0:k=fill(" ",q[1][1]);break;case 5:X=!1;case 1:k=fill("\r",q[1][1]);break;default:if(k="",o.WTF)throw new Error("Unexpected PtgAttrSpaceType "+q[1][0])}d.push((X?k:"")+d.pop()+(X?"":k)),C=-1}}if(d.length>1&&o.WTF)throw new Error("bad formula stack");return d[0]=="TRUE"?!0:d[0]=="FALSE"?!1:d[0]}function parse_ArrayParsedFormula(t,e,n){var a=t.l+e,o=n.biff==2?1:2,l,u=t.read_shift(o);if(u==65535)return[[],parsenoop(t,e-2)];var d=parse_Rgce(t,u,n);return e!==u+o&&(l=parse_RgbExtra(t,e-u-o,d,n)),t.l=a,[d,l]}function parse_XLSCellParsedFormula(t,e,n){var a=t.l+e,o=n.biff==2?1:2,l,u=t.read_shift(o);if(u==65535)return[[],parsenoop(t,e-2)];var d=parse_Rgce(t,u,n);return e!==u+o&&(l=parse_RgbExtra(t,e-u-o,d,n)),t.l=a,[d,l]}function parse_NameParsedFormula(t,e,n,a){var o=t.l+e,l=parse_Rgce(t,a,n),u;return o!==t.l&&(u=parse_RgbExtra(t,o-t.l,l,n)),[l,u]}function parse_SharedParsedFormula(t,e,n){var a=t.l+e,o,l=t.read_shift(2),u=parse_Rgce(t,l,n);return l==65535?[[],parsenoop(t,e-2)]:(e!==l+2&&(o=parse_RgbExtra(t,a-l-2,u,n)),[u,o])}function parse_FormulaValue(t){var e;if(__readUInt16LE(t,t.l+6)!==65535)return[parse_Xnum(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return e=t[t.l+2]===1,t.l+=8,[e,"b"];case 2:return e=t[t.l+2],t.l+=8,[e,"e"];case 3:return t.l+=8,["","s"]}return[]}function write_FormulaValue(t){if(t==null){var e=new_buf(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof t=="number")return write_Xnum(t);return write_Xnum(0)}function parse_Formula(t,e,n){var a=t.l+e,o=parse_XLSCell(t);n.biff==2&&++t.l;var l=parse_FormulaValue(t),u=t.read_shift(1);n.biff!=2&&(t.read_shift(1),n.biff>=5&&t.read_shift(4));var d=parse_XLSCellParsedFormula(t,a-t.l,n);return{cell:o,val:l[0],formula:d,shared:u>>3&1,tt:l[1]}}function write_Formula(t,e,n,a,o){var l=write_XLSCell(e,n,o),u=write_FormulaValue(t.v),d=new_buf(6),m=33;d.write_shift(2,m),d.write_shift(4,0);for(var y=new_buf(t.bf.length),b=0;b<t.bf.length;++b)y[b]=t.bf[b];var _=bconcat([l,u,d,y]);return _}function parse_XLSBParsedFormula(t,e,n){var a=t.read_shift(4),o=parse_Rgce(t,a,n),l=t.read_shift(4),u=l>0?parse_RgbExtra(t,l,o,n):null;return[o,u]}var parse_XLSBArrayParsedFormula=parse_XLSBParsedFormula,parse_XLSBCellParsedFormula=parse_XLSBParsedFormula,parse_XLSBNameParsedFormula=parse_XLSBParsedFormula,parse_XLSBSharedParsedFormula=parse_XLSBParsedFormula;function write_XLSBFormulaNum(t){if((t|0)==t&&t<Math.pow(2,16)&&t>=0){var e=new_buf(11);return e.write_shift(4,3),e.write_shift(1,30),e.write_shift(2,t),e.write_shift(4,0),e}var n=new_buf(17);return n.write_shift(4,11),n.write_shift(1,31),n.write_shift(8,t),n.write_shift(4,0),n}function write_XLSBFormulaErr(t){var e=new_buf(10);return e.write_shift(4,2),e.write_shift(1,28),e.write_shift(1,t),e.write_shift(4,0),e}function write_XLSBFormulaBool(t){var e=new_buf(10);return e.write_shift(4,2),e.write_shift(1,29),e.write_shift(1,t?1:0),e.write_shift(4,0),e}function write_XLSBFormulaStr(t){var e=new_buf(7);e.write_shift(4,3+2*t.length),e.write_shift(1,23),e.write_shift(2,t.length);var n=new_buf(2*t.length);n.write_shift(2*t.length,t,"utf16le");var a=new_buf(4);return a.write_shift(4,0),bconcat([e,n,a])}function write_XLSBFormulaRef(t){var e=decode_cell(t),n=new_buf(15);return n.write_shift(4,7),n.write_shift(1,4|1<<5),n.write_shift(4,e.r),n.write_shift(2,e.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),n.write_shift(4,0),n}function write_XLSBFormulaRef3D(t,e){var n=t.lastIndexOf("!"),a=t.slice(0,n);t=t.slice(n+1);var o=decode_cell(t);a.charAt(0)=="'"&&(a=a.slice(1,-1).replace(/''/g,"'"));var l=new_buf(17);return l.write_shift(4,9),l.write_shift(1,26|1<<5),l.write_shift(2,2+e.SheetNames.map(function(u){return u.toLowerCase()}).indexOf(a.toLowerCase())),l.write_shift(4,o.r),l.write_shift(2,o.c|(t.charAt(0)=="$"?0:1)<<14|(t.match(/\$\d/)?0:1)<<15),l.write_shift(4,0),l}function write_XLSBFormulaRefErr3D(t,e){var n=t.lastIndexOf("!"),a=t.slice(0,n);t=t.slice(n+1),a.charAt(0)=="'"&&(a=a.slice(1,-1).replace(/''/g,"'"));var o=new_buf(17);return o.write_shift(4,9),o.write_shift(1,28|1<<5),o.write_shift(2,2+e.SheetNames.map(function(l){return l.toLowerCase()}).indexOf(a.toLowerCase())),o.write_shift(4,0),o.write_shift(2,0),o.write_shift(4,0),o}function write_XLSBFormulaRange(t){var e=t.split(":"),n=e[0],a=new_buf(23);a.write_shift(4,15),n=e[0];var o=decode_cell(n);return a.write_shift(1,4|1<<5),a.write_shift(4,o.r),a.write_shift(2,o.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),a.write_shift(4,0),n=e[1],o=decode_cell(n),a.write_shift(1,4|1<<5),a.write_shift(4,o.r),a.write_shift(2,o.c|(n.charAt(0)=="$"?0:1)<<14|(n.match(/\$\d/)?0:1)<<15),a.write_shift(4,0),a.write_shift(1,17),a.write_shift(4,0),a}function write_XLSBFormulaRangeWS(t,e){var n=t.lastIndexOf("!"),a=t.slice(0,n);t=t.slice(n+1),a.charAt(0)=="'"&&(a=a.slice(1,-1).replace(/''/g,"'"));var o=t.split(":");u=o[0];var l=new_buf(27);l.write_shift(4,19);var u=o[0],d=decode_cell(u);return l.write_shift(1,26|1<<5),l.write_shift(2,2+e.SheetNames.map(function(m){return m.toLowerCase()}).indexOf(a.toLowerCase())),l.write_shift(4,d.r),l.write_shift(2,d.c|(u.charAt(0)=="$"?0:1)<<14|(u.match(/\$\d/)?0:1)<<15),u=o[1],d=decode_cell(u),l.write_shift(1,26|1<<5),l.write_shift(2,2+e.SheetNames.map(function(m){return m.toLowerCase()}).indexOf(a.toLowerCase())),l.write_shift(4,d.r),l.write_shift(2,d.c|(u.charAt(0)=="$"?0:1)<<14|(u.match(/\$\d/)?0:1)<<15),l.write_shift(1,17),l.write_shift(4,0),l}function write_XLSBFormulaArea3D(t,e){var n=t.lastIndexOf("!"),a=t.slice(0,n);t=t.slice(n+1),a.charAt(0)=="'"&&(a=a.slice(1,-1).replace(/''/g,"'"));var o=decode_range(t),l=new_buf(23);return l.write_shift(4,15),l.write_shift(1,27|1<<5),l.write_shift(2,2+e.SheetNames.map(function(u){return u.toLowerCase()}).indexOf(a.toLowerCase())),l.write_shift(4,o.s.r),l.write_shift(4,o.e.r),l.write_shift(2,o.s.c),l.write_shift(2,o.e.c),l.write_shift(4,0),l}function write_XLSBFormula(t,e){if(typeof t=="number")return write_XLSBFormulaNum(t);if(typeof t=="boolean")return write_XLSBFormulaBool(t);if(/^#(DIV\/0!|GETTING_DATA|N\/A|NAME\?|NULL!|NUM!|REF!|VALUE!)$/.test(t))return write_XLSBFormulaErr(+RBErr[t]);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef(t);if(t.match(/^\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRange(t);if(t.match(/^#REF!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaArea3D(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRef3D(t,e);if(t.match(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5}):\$?(?:[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D]|[A-Z]{1,2})\$?(?:10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})$/))return write_XLSBFormulaRangeWS(t,e);if(/^(?:'[^\\\/?*\[\]:]*'|[^'][^\\\/?*\[\]:'`~!@#$%^()\-=+{}|;,<.>]*)!#REF!$/.test(t))return write_XLSBFormulaRefErr3D(t,e);if(/^".*"$/.test(t))return write_XLSBFormulaStr(t);if(/^[+-]\d+$/.test(t))return write_XLSBFormulaNum(parseInt(t,10));throw"Formula |"+t+"| not supported for XLSB"}var write_XLSBNameParsedFormula=write_XLSBFormula,Cetab={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Ftab={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},FtabArgc={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function ods_to_csf_formula(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(e,n){return n.replace(/\./g,"")}),t=t.replace(/\$'([^']|'')+'/g,function(e){return e.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(e,n){return n.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?e:n}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function csf_to_ods_formula(t){var e="of:="+t.replace(crefregex,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function ods_to_csf_3D(t){t=t.replace(/\$'([^']|'')+'/g,function(a){return a.slice(1)}),t=t.replace(/\$([^\]\. #$]+)/g,function(a,o){return o.match(/^([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])?(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})?$/)?a:o});var e=t.split(":"),n=e[0].split(".")[0];return[n,e[0].split(".")[1]+(e.length>1?":"+(e[1].split(".")[1]||e[1].split(".")[0]):"")]}function csf_to_ods_3D(t){return t.replace(/!/,".")}var strs={},_ssfopts={},browser_has_Map=typeof Map<"u";function get_sst_id(t,e,n){var a=0,o=t.length;if(n){if(browser_has_Map?n.has(e):Object.prototype.hasOwnProperty.call(n,e)){for(var l=browser_has_Map?n.get(e):n[e];a<l.length;++a)if(t[l[a]].t===e)return t.Count++,l[a]}}else for(;a<o;++a)if(t[a].t===e)return t.Count++,a;return t[o]={t:e},t.Count++,t.Unique++,n&&(browser_has_Map?(n.has(e)||n.set(e,[]),n.get(e).push(o)):(Object.prototype.hasOwnProperty.call(n,e)||(n[e]=[]),n[e].push(o))),o}function col_obj_w(t,e){var n={min:t+1,max:t+1},a=-1;return e.MDW&&(MDW=e.MDW),e.width!=null?n.customWidth=1:e.wpx!=null?a=px2char(e.wpx):e.wch!=null&&(a=e.wch),a>-1?(n.width=char2width(a),n.customWidth=1):e.width!=null&&(n.width=e.width),e.hidden&&(n.hidden=!0),e.level!=null&&(n.outlineLevel=n.level=e.level),n}function default_margins(t,e){if(t){var n=[.7,.7,.75,.75,.3,.3];e=="xlml"&&(n=[1,1,1,1,.5,.5]),t.left==null&&(t.left=n[0]),t.right==null&&(t.right=n[1]),t.top==null&&(t.top=n[2]),t.bottom==null&&(t.bottom=n[3]),t.header==null&&(t.header=n[4]),t.footer==null&&(t.footer=n[5])}}function get_cell_style(t,e,n){var a=n.revssf[e.z!=null?e.z:"General"],o=60,l=t.length;if(a==null&&n.ssf){for(;o<392;++o)if(n.ssf[o]==null){SSF__load(e.z,o),n.ssf[o]=e.z,n.revssf[e.z]=a=o;break}}for(o=0;o!=l;++o)if(t[o].numFmtId===a)return o;return t[l]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},l}function safe_format(t,e,n,a,o,l){try{a.cellNF&&(t.z=table_fmt[e])}catch(d){if(a.WTF)throw d}if(!(t.t==="z"&&!a.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=parseDate(t.v)),(!a||a.cellText!==!1)&&t.t!=="z")try{if(table_fmt[e]==null&&SSF__load(SSFImplicit[e]||"General",e),t.t==="e")t.w=t.w||BErr[t.v];else if(e===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=SSF_general_num(t.v);else if(t.t==="d"){var u=datenum(t.v);(u|0)===u?t.w=u.toString(10):t.w=SSF_general_num(u)}else{if(t.v===void 0)return"";t.w=SSF_general(t.v,_ssfopts)}else t.t==="d"?t.w=SSF_format(e,datenum(t.v),_ssfopts):t.w=SSF_format(e,t.v,_ssfopts)}catch(d){if(a.WTF)throw d}if(a.cellStyles&&n!=null)try{t.s=l.Fills[n],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=rgb_tint(o.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),a.WTF&&(t.s.fgColor.raw_rgb=o.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=rgb_tint(o.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),a.WTF&&(t.s.bgColor.raw_rgb=o.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(d){if(a.WTF&&l.Fills)throw d}}}function check_ws(t,e,n){if(t&&t["!ref"]){var a=safe_decode_range(t["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+n+"): "+t["!ref"])}}function parse_ws_xml_dim(t,e){var n=safe_decode_range(e);n.s.r<=n.e.r&&n.s.c<=n.e.c&&n.s.r>=0&&n.s.c>=0&&(t["!ref"]=encode_range(n))}var mergecregex=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,sheetdataregex=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,hlinkregex=/<(?:\w:)?hyperlink [^>]*>/mg,dimregex=/"(\w*:\w*)"/,colregex=/<(?:\w:)?col\b[^>]*[\/]?>/g,afregex=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,marginregex=/<(?:\w:)?pageMargins[^>]*\/>/g,sheetprregex=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,sheetprregex2=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,svsregex=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function parse_ws_xml(t,e,n,a,o,l,u){if(!t)return t;a||(a={"!id":{}});var d={};e.dense&&(d["!data"]=[]);var m={s:{r:2e6,c:2e6},e:{r:0,c:0}},y="",b="",_=t.match(sheetdataregex);_?(y=t.slice(0,_.index),b=t.slice(_.index+_[0].length)):y=b=t;var w=y.match(sheetprregex);w?parse_ws_xml_sheetpr(w[0],d,o,n):(w=y.match(sheetprregex2))&&parse_ws_xml_sheetpr2(w[0],w[1]||"",d,o,n);var E=(y.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(E>0){var A=y.slice(E,E+50).match(dimregex);A&&!(e&&e.nodim)&&parse_ws_xml_dim(d,A[1])}var C=y.match(svsregex);C&&C[1]&&parse_ws_xml_sheetviews(C[1],o);var k=[];if(e.cellStyles){var B=y.match(colregex);B&&parse_ws_xml_cols(k,B)}_&&parse_ws_xml_data(_[1],d,e,m,l,u);var D=b.match(afregex);D&&(d["!autofilter"]=parse_ws_xml_autofilter(D[0]));var q=[],j=b.match(mergecregex);if(j)for(E=0;E!=j.length;++E)q[E]=safe_decode_range(j[E].slice(j[E].indexOf('"')+1));var J=b.match(hlinkregex);J&&parse_ws_xml_hlinks(d,J,a);var Y=b.match(marginregex);if(Y&&(d["!margins"]=parse_ws_xml_margins(parsexmltag(Y[0]))),e&&e.nodim&&(m.s.c=m.s.r=0),!d["!ref"]&&m.e.c>=m.s.c&&m.e.r>=m.s.r&&(d["!ref"]=encode_range(m)),e.sheetRows>0&&d["!ref"]){var L=safe_decode_range(d["!ref"]);e.sheetRows<=+L.e.r&&(L.e.r=e.sheetRows-1,L.e.r>m.e.r&&(L.e.r=m.e.r),L.e.r<L.s.r&&(L.s.r=L.e.r),L.e.c>m.e.c&&(L.e.c=m.e.c),L.e.c<L.s.c&&(L.s.c=L.e.c),d["!fullref"]=d["!ref"],d["!ref"]=encode_range(L))}return k.length>0&&(d["!cols"]=k),q.length>0&&(d["!merges"]=q),d}function write_ws_xml_merges(t){if(t.length===0)return"";for(var e='<mergeCells count="'+t.length+'">',n=0;n!=t.length;++n)e+='<mergeCell ref="'+encode_range(t[n])+'"/>';return e+"</mergeCells>"}function parse_ws_xml_sheetpr(t,e,n,a){var o=parsexmltag(t);n.Sheets[a]||(n.Sheets[a]={}),o.codeName&&(n.Sheets[a].CodeName=unescapexml(utf8read(o.codeName)))}function parse_ws_xml_sheetpr2(t,e,n,a,o){parse_ws_xml_sheetpr(t.slice(0,t.indexOf(">")),n,a,o)}function write_ws_xml_sheetpr(t,e,n,a,o){var l=!1,u={},d=null;if(a.bookType!=="xlsx"&&e.vbaraw){var m=e.SheetNames[n];try{e.Workbook&&(m=e.Workbook.Sheets[n].CodeName||m)}catch{}l=!0,u.codeName=utf8write(escapexml(m))}if(t&&t["!outline"]){var y={summaryBelow:1,summaryRight:1};t["!outline"].above&&(y.summaryBelow=0),t["!outline"].left&&(y.summaryRight=0),d=(d||"")+writextag("outlinePr",null,y)}!l&&!d||(o[o.length]=writextag("sheetPr",d,u))}var sheetprot_deffalse=["objects","scenarios","selectLockedCells","selectUnlockedCells"],sheetprot_deftrue=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function write_ws_xml_protection(t){var e={sheet:1};return sheetprot_deffalse.forEach(function(n){t[n]!=null&&t[n]&&(e[n]="1")}),sheetprot_deftrue.forEach(function(n){t[n]!=null&&!t[n]&&(e[n]="0")}),t.password&&(e.password=crypto_CreatePasswordVerifier_Method1(t.password).toString(16).toUpperCase()),writextag("sheetProtection",null,e)}function parse_ws_xml_hlinks(t,e,n){for(var a=t["!data"]!=null,o=0;o!=e.length;++o){var l=parsexmltag(utf8read(e[o]),!0);if(!l.ref)return;var u=((n||{})["!id"]||[])[l.id];u?(l.Target=u.Target,l.location&&(l.Target+="#"+unescapexml(l.location))):(l.Target="#"+unescapexml(l.location),u={Target:l.Target,TargetMode:"Internal"}),l.Rel=u,l.tooltip&&(l.Tooltip=l.tooltip,delete l.tooltip);for(var d=safe_decode_range(l.ref),m=d.s.r;m<=d.e.r;++m)for(var y=d.s.c;y<=d.e.c;++y){var b=encode_col(y)+encode_row(m);a?(t["!data"][m]||(t["!data"][m]=[]),t["!data"][m][y]||(t["!data"][m][y]={t:"z",v:void 0}),t["!data"][m][y].l=l):(t[b]||(t[b]={t:"z",v:void 0}),t[b].l=l)}}}function parse_ws_xml_margins(t){var e={};return["left","right","top","bottom","header","footer"].forEach(function(n){t[n]&&(e[n]=parseFloat(t[n]))}),e}function write_ws_xml_margins(t){return default_margins(t),writextag("pageMargins",null,t)}function parse_ws_xml_cols(t,e){for(var n=!1,a=0;a!=e.length;++a){var o=parsexmltag(e[a],!0);o.hidden&&(o.hidden=parsexmlbool(o.hidden));var l=parseInt(o.min,10)-1,u=parseInt(o.max,10)-1;for(o.outlineLevel&&(o.level=+o.outlineLevel||0),delete o.min,delete o.max,o.width=+o.width,!n&&o.width&&(n=!0,find_mdw_colw(o.width)),process_col(o);l<=u;)t[l++]=dup(o)}}function write_ws_xml_cols(t,e){for(var n=["<cols>"],a,o=0;o!=e.length;++o)(a=e[o])&&(n[n.length]=writextag("col",null,col_obj_w(o,a)));return n[n.length]="</cols>",n.join("")}function parse_ws_xml_autofilter(t){var e={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return e}function write_ws_xml_autofilter(t,e,n,a){var o=typeof t.ref=="string"?t.ref:encode_range(t.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var l=n.Workbook.Names,u=decode_range(o);u.s.r==u.e.r&&(u.e.r=decode_range(e["!ref"]).e.r,o=encode_range(u));for(var d=0;d<l.length;++d){var m=l[d];if(m.Name=="_xlnm._FilterDatabase"&&m.Sheet==a){m.Ref=formula_quote_sheet_name(n.SheetNames[a])+"!"+fix_range(o);break}}return d==l.length&&l.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+n.SheetNames[a]+"'!"+o}),writextag("autoFilter",null,{ref:o})}var sviewregex=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/g;function parse_ws_xml_sheetviews(t,e){e.Views||(e.Views=[{}]),(t.match(sviewregex)||[]).forEach(function(n,a){var o=parsexmltag(n);e.Views[a]||(e.Views[a]={}),+o.zoomScale&&(e.Views[a].zoom=+o.zoomScale),o.rightToLeft&&parsexmlbool(o.rightToLeft)&&(e.Views[a].RTL=!0)})}function write_ws_xml_sheetviews(t,e,n,a){var o={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(o.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),writextag("sheetViews",writextag("sheetView",null,o),{})}function write_ws_xml_cell(t,e,n,a){if(t.c&&n["!comments"].push([e,t.c]),(t.v===void 0||t.t==="z"&&!(a||{}).sheetStubs)&&typeof t.f!="string"&&typeof t.z>"u")return"";var o="",l=t.t,u=t.v;if(t.t!=="z")switch(t.t){case"b":o=t.v?"1":"0";break;case"n":o=""+t.v;break;case"e":o=BErr[t.v];break;case"d":a&&a.cellDates?o=parseDate(t.v,-1).toISOString():(t=dup(t),t.t="n",o=""+(t.v=datenum(parseDate(t.v)))),typeof t.z>"u"&&(t.z=table_fmt[14]);break;default:o=t.v;break}var d=t.t=="z"||t.v==null?"":writetag("v",escapexml(o)),m={r:e},y=get_cell_style(a.cellXfs,t,a);switch(y!==0&&(m.s=y),t.t){case"n":break;case"d":m.t="d";break;case"b":m.t="b";break;case"e":m.t="e";break;case"z":break;default:if(t.v==null){delete t.t;break}if(t.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){d=writetag("v",""+get_sst_id(a.Strings,t.v,a.revStrings)),m.t="s";break}else m.t="str";break}if(t.t!=l&&(t.t=l,t.v=u),typeof t.f=="string"&&t.f){var b=t.F&&t.F.slice(0,e.length)==e?{t:"array",ref:t.F}:null;d=writextag("f",escapexml(t.f),b)+(t.v!=null?d:"")}return t.l&&(t.l.display=escapexml(o),n["!links"].push([e,t.l])),t.D&&(m.cm=1),writextag("c",d,m)}var parse_ws_xml_data=function(){var t=/<(?:\w+:)?c[ \/>]/,e=/<\/(?:\w+:)?row>/,n=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,o=/ref=["']([^"']*)["']/,l=matchtag("v"),u=matchtag("f");return function(m,y,b,_,w,E){for(var A=0,C="",k=[],B=[],D=0,q=0,j=0,J="",Y,L,Z=0,Q=0,oe,ae,U=0,I=0,x=Array.isArray(E.CellXf),T,M=[],O=[],z=y["!data"]!=null,X=[],H={},P=!1,S=!!b.sheetStubs,F=m.split(e),ue=0,ee=F.length;ue!=ee;++ue){C=F[ue].trim();var fe=C.length;if(fe===0)continue;var le=0;e:for(A=0;A<fe;++A)switch(C[A]){case">":if(C[A-1]!="/"){++A;break e}if(b&&b.cellStyles){if(L=parsexmltag(C.slice(le,A),!0),Z=L.r!=null?parseInt(L.r,10):Z+1,Q=-1,b.sheetRows&&b.sheetRows<Z)continue;H={},P=!1,L.ht&&(P=!0,H.hpt=parseFloat(L.ht),H.hpx=pt2px(H.hpt)),L.hidden&&parsexmlbool(L.hidden)&&(P=!0,H.hidden=!0),L.outlineLevel!=null&&(P=!0,H.level=+L.outlineLevel),P&&(X[Z-1]=H)}break;case"<":le=A;break}if(le>=A)break;if(L=parsexmltag(C.slice(le,A),!0),Z=L.r!=null?parseInt(L.r,10):Z+1,Q=-1,!(b.sheetRows&&b.sheetRows<Z)){b.nodim||(_.s.r>Z-1&&(_.s.r=Z-1),_.e.r<Z-1&&(_.e.r=Z-1)),b&&b.cellStyles&&(H={},P=!1,L.ht&&(P=!0,H.hpt=parseFloat(L.ht),H.hpx=pt2px(H.hpt)),L.hidden&&parsexmlbool(L.hidden)&&(P=!0,H.hidden=!0),L.outlineLevel!=null&&(P=!0,H.level=+L.outlineLevel),P&&(X[Z-1]=H)),k=C.slice(A).split(t);for(var ce=0;ce!=k.length&&k[ce].trim().charAt(0)=="<";++ce);for(k=k.slice(ce),A=0;A!=k.length;++A)if(C=k[A].trim(),C.length!==0){if(B=C.match(n),D=A,q=0,j=0,C="<c "+(C.slice(0,1)=="<"?">":"")+C,B!=null&&B.length===2){for(D=0,J=B[1],q=0;q!=J.length&&!((j=J.charCodeAt(q)-64)<1||j>26);++q)D=26*D+j;--D,Q=D}else++Q;for(q=0;q!=C.length&&C.charCodeAt(q)!==62;++q);if(++q,L=parsexmltag(C.slice(0,q),!0),L.r||(L.r=encode_cell({r:Z-1,c:Q})),J=C.slice(q),Y={t:""},(B=J.match(l))!=null&&B[1]!==""&&(Y.v=unescapexml(B[1])),b.cellFormula){if((B=J.match(u))!=null&&B[1]!==""){if(Y.f=unescapexml(utf8read(B[1]),!0),b.xlfn||(Y.f=_xlfn(Y.f)),B[0].indexOf('t="array"')>-1)Y.F=(J.match(o)||[])[1],Y.F.indexOf(":")>-1&&M.push([safe_decode_range(Y.F),Y.F]);else if(B[0].indexOf('t="shared"')>-1){ae=parsexmltag(B[0]);var pe=unescapexml(utf8read(B[1]));b.xlfn||(pe=_xlfn(pe)),O[parseInt(ae.si,10)]=[ae,pe,L.r]}}else(B=J.match(/<f[^>]*\/>/))&&(ae=parsexmltag(B[0]),O[ae.si]&&(Y.f=shift_formula_xlsx(O[ae.si][1],O[ae.si][2],L.r)));var se=decode_cell(L.r);for(q=0;q<M.length;++q)se.r>=M[q][0].s.r&&se.r<=M[q][0].e.r&&se.c>=M[q][0].s.c&&se.c<=M[q][0].e.c&&(Y.F=M[q][1])}if(L.t==null&&Y.v===void 0)if(Y.f||Y.F)Y.v=0,Y.t="n";else if(S)Y.t="z";else continue;else Y.t=L.t||"n";switch(_.s.c>Q&&(_.s.c=Q),_.e.c<Q&&(_.e.c=Q),Y.t){case"n":if(Y.v==""||Y.v==null){if(!S)continue;Y.t="z"}else Y.v=parseFloat(Y.v);break;case"s":if(typeof Y.v>"u"){if(!S)continue;Y.t="z"}else oe=strs[parseInt(Y.v,10)],Y.v=oe.t,Y.r=oe.r,b.cellHTML&&(Y.h=oe.h);break;case"str":Y.t="s",Y.v=Y.v!=null?unescapexml(utf8read(Y.v),!0):"",b.cellHTML&&(Y.h=escapehtml(Y.v));break;case"inlineStr":B=J.match(a),Y.t="s",B!=null&&(oe=parse_si(B[1]))?(Y.v=oe.t,b.cellHTML&&(Y.h=oe.h)):Y.v="";break;case"b":Y.v=parsexmlbool(Y.v);break;case"d":b.cellDates?Y.v=parseDate(Y.v,1):(Y.v=datenum(parseDate(Y.v,1)),Y.t="n");break;case"e":(!b||b.cellText!==!1)&&(Y.w=Y.v),Y.v=RBErr[Y.v];break}if(U=I=0,T=null,x&&L.s!==void 0&&(T=E.CellXf[L.s],T!=null&&(T.numFmtId!=null&&(U=T.numFmtId),b.cellStyles&&T.fillId!=null&&(I=T.fillId))),safe_format(Y,U,I,b,w,E),b.cellDates&&x&&Y.t=="n"&&fmt_is_date(table_fmt[U])&&(Y.t="d",Y.v=numdate(Y.v)),L.cm&&b.xlmeta){var de=(b.xlmeta.Cell||[])[+L.cm-1];de&&de.type=="XLDAPR"&&(Y.D=!0)}var re;b.nodim&&(re=decode_cell(L.r),_.s.r>re.r&&(_.s.r=re.r),_.e.r<re.r&&(_.e.r=re.r)),z?(re=decode_cell(L.r),y["!data"][re.r]||(y["!data"][re.r]=[]),y["!data"][re.r][re.c]=Y):y[L.r]=Y}}}X.length>0&&(y["!rows"]=X)}}();function write_ws_xml_data(t,e,n,a){var o=[],l=[],u=safe_decode_range(t["!ref"]),d="",m,y="",b=[],_=0,w=0,E=t["!rows"],A=t["!data"]!=null,C={r:y},k,B=-1;for(w=u.s.c;w<=u.e.c;++w)b[w]=encode_col(w);for(_=u.s.r;_<=u.e.r;++_){for(l=[],y=encode_row(_),w=u.s.c;w<=u.e.c;++w){m=b[w]+y;var D=A?(t["!data"][_]||[])[w]:t[m];D!==void 0&&(d=write_ws_xml_cell(D,m,t,e))!=null&&l.push(d)}(l.length>0||E&&E[_])&&(C={r:y},E&&E[_]&&(k=E[_],k.hidden&&(C.hidden=1),B=-1,k.hpx?B=px2pt(k.hpx):k.hpt&&(B=k.hpt),B>-1&&(C.ht=B,C.customHeight=1),k.level&&(C.outlineLevel=k.level)),o[o.length]=writextag("row",l.join(""),C))}if(E)for(;_<E.length;++_)E&&E[_]&&(C={r:_+1},k=E[_],k.hidden&&(C.hidden=1),B=-1,k.hpx?B=px2pt(k.hpx):k.hpt&&(B=k.hpt),B>-1&&(C.ht=B,C.customHeight=1),k.level&&(C.outlineLevel=k.level),o[o.length]=writextag("row","",C));return o.join("")}function write_ws_xml(t,e,n,a){var o=[XML_HEADER,writextag("worksheet",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r})],l=n.SheetNames[t],u=0,d="",m=n.Sheets[l];m==null&&(m={});var y=m["!ref"]||"A1",b=safe_decode_range(y);if(b.e.c>16383||b.e.r>1048575){if(e.WTF)throw new Error("Range "+y+" exceeds format limit A1:XFD1048576");b.e.c=Math.min(b.e.c,16383),b.e.r=Math.min(b.e.c,1048575),y=encode_range(b)}a||(a={}),m["!comments"]=[];var _=[];write_ws_xml_sheetpr(m,n,t,e,o),o[o.length]=writextag("dimension",null,{ref:y}),o[o.length]=write_ws_xml_sheetviews(m,e,t,n),e.sheetFormat&&(o[o.length]=writextag("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),m["!cols"]!=null&&m["!cols"].length>0&&(o[o.length]=write_ws_xml_cols(m,m["!cols"])),o[u=o.length]="<sheetData/>",m["!links"]=[],m["!ref"]!=null&&(d=write_ws_xml_data(m,e),d.length>0&&(o[o.length]=d)),o.length>u+1&&(o[o.length]="</sheetData>",o[u]=o[u].replace("/>",">")),m["!protect"]&&(o[o.length]=write_ws_xml_protection(m["!protect"])),m["!autofilter"]!=null&&(o[o.length]=write_ws_xml_autofilter(m["!autofilter"],m,n,t)),m["!merges"]!=null&&m["!merges"].length>0&&(o[o.length]=write_ws_xml_merges(m["!merges"]));var w=-1,E,A=-1;return m["!links"].length>0&&(o[o.length]="<hyperlinks>",m["!links"].forEach(function(C){C[1].Target&&(E={ref:C[0]},C[1].Target.charAt(0)!="#"&&(A=add_rels(a,-1,escapexml(C[1].Target).replace(/#.*$/,""),RELS.HLINK),E["r:id"]="rId"+A),(w=C[1].Target.indexOf("#"))>-1&&(E.location=escapexml(C[1].Target.slice(w+1))),C[1].Tooltip&&(E.tooltip=escapexml(C[1].Tooltip)),E.display=C[1].display,o[o.length]=writextag("hyperlink",null,E))}),o[o.length]="</hyperlinks>"),delete m["!links"],m["!margins"]!=null&&(o[o.length]=write_ws_xml_margins(m["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(o[o.length]=writetag("ignoredErrors",writextag("ignoredError",null,{numberStoredAsText:1,sqref:y}))),_.length>0&&(A=add_rels(a,-1,"../drawings/drawing"+(t+1)+".xml",RELS.DRAW),o[o.length]=writextag("drawing",null,{"r:id":"rId"+A}),m["!drawing"]=_),m["!comments"].length>0&&(A=add_rels(a,-1,"../drawings/vmlDrawing"+(t+1)+".vml",RELS.VML),o[o.length]=writextag("legacyDrawing",null,{"r:id":"rId"+A}),m["!legacy"]=A),o.length>1&&(o[o.length]="</worksheet>",o[1]=o[1].replace("/>",">")),o.join("")}function parse_BrtRowHdr(t,e){var n={},a=t.l+e;n.r=t.read_shift(4),t.l+=4;var o=t.read_shift(2);t.l+=1;var l=t.read_shift(1);return t.l=a,l&7&&(n.level=l&7),l&16&&(n.hidden=!0),l&32&&(n.hpt=o/20),n}function write_BrtRowHdr(t,e,n){var a=new_buf(145),o=(n["!rows"]||[])[t]||{};a.write_shift(4,t),a.write_shift(4,0);var l=320;o.hpx?l=px2pt(o.hpx)*20:o.hpt&&(l=o.hpt*20),a.write_shift(2,l),a.write_shift(1,0);var u=0;o.level&&(u|=o.level),o.hidden&&(u|=16),(o.hpx||o.hpt)&&(u|=32),a.write_shift(1,u),a.write_shift(1,0);var d=0,m=a.l;a.l+=4;for(var y={r:t,c:0},b=n["!data"]!=null,_=0;_<16;++_)if(!(e.s.c>_+1<<10||e.e.c<_<<10)){for(var w=-1,E=-1,A=_<<10;A<_+1<<10;++A){y.c=A;var C=b?(n["!data"][y.r]||[])[y.c]:n[encode_cell(y)];C&&(w<0&&(w=A),E=A)}w<0||(++d,a.write_shift(4,w),a.write_shift(4,E))}var k=a.l;return a.l=m,a.write_shift(4,d),a.l=k,a.length>a.l?a.slice(0,a.l):a}function write_row_header(t,e,n,a){var o=write_BrtRowHdr(a,n,e);(o.length>17||(e["!rows"]||[])[a])&&write_record(t,0,o)}var parse_BrtWsDim=parse_UncheckedRfX,write_BrtWsDim=write_UncheckedRfX;function parse_BrtWsFmtInfo(){}function parse_BrtWsProp(t,e){var n={},a=t[t.l];return++t.l,n.above=!(a&64),n.left=!(a&128),t.l+=18,n.name=parse_XLSBCodeName(t),n}function write_BrtWsProp(t,e,n){n==null&&(n=new_buf(84+4*t.length));var a=192;e&&(e.above&&(a&=-65),e.left&&(a&=-129)),n.write_shift(1,a);for(var o=1;o<3;++o)n.write_shift(1,0);return write_BrtColor({auto:1},n),n.write_shift(-4,-1),n.write_shift(-4,-1),write_XLSBCodeName(t,n),n.slice(0,n.l)}function parse_BrtCellBlank(t){var e=parse_XLSBCell(t);return[e]}function write_BrtCellBlank(t,e,n){return n==null&&(n=new_buf(8)),write_XLSBCell(e,n)}function parse_BrtShortBlank(t){var e=parse_XLSBShortCell(t);return[e]}function write_BrtShortBlank(t,e,n){return n==null&&(n=new_buf(4)),write_XLSBShortCell(e,n)}function parse_BrtCellBool(t){var e=parse_XLSBCell(t),n=t.read_shift(1);return[e,n,"b"]}function write_BrtCellBool(t,e,n){return n==null&&(n=new_buf(9)),write_XLSBCell(e,n),n.write_shift(1,t.v?1:0),n}function parse_BrtShortBool(t){var e=parse_XLSBShortCell(t),n=t.read_shift(1);return[e,n,"b"]}function write_BrtShortBool(t,e,n){return n==null&&(n=new_buf(5)),write_XLSBShortCell(e,n),n.write_shift(1,t.v?1:0),n}function parse_BrtCellError(t){var e=parse_XLSBCell(t),n=t.read_shift(1);return[e,n,"e"]}function write_BrtCellError(t,e,n){return n==null&&(n=new_buf(9)),write_XLSBCell(e,n),n.write_shift(1,t.v),n}function parse_BrtShortError(t){var e=parse_XLSBShortCell(t),n=t.read_shift(1);return[e,n,"e"]}function write_BrtShortError(t,e,n){return n==null&&(n=new_buf(8)),write_XLSBShortCell(e,n),n.write_shift(1,t.v),n.write_shift(2,0),n.write_shift(1,0),n}function parse_BrtCellIsst(t){var e=parse_XLSBCell(t),n=t.read_shift(4);return[e,n,"s"]}function write_BrtCellIsst(t,e,n){return n==null&&(n=new_buf(12)),write_XLSBCell(e,n),n.write_shift(4,e.v),n}function parse_BrtShortIsst(t){var e=parse_XLSBShortCell(t),n=t.read_shift(4);return[e,n,"s"]}function write_BrtShortIsst(t,e,n){return n==null&&(n=new_buf(8)),write_XLSBShortCell(e,n),n.write_shift(4,e.v),n}function parse_BrtCellReal(t){var e=parse_XLSBCell(t),n=parse_Xnum(t);return[e,n,"n"]}function write_BrtCellReal(t,e,n){return n==null&&(n=new_buf(16)),write_XLSBCell(e,n),write_Xnum(t.v,n),n}function parse_BrtShortReal(t){var e=parse_XLSBShortCell(t),n=parse_Xnum(t);return[e,n,"n"]}function write_BrtShortReal(t,e,n){return n==null&&(n=new_buf(12)),write_XLSBShortCell(e,n),write_Xnum(t.v,n),n}function parse_BrtCellRk(t){var e=parse_XLSBCell(t),n=parse_RkNumber(t);return[e,n,"n"]}function write_BrtCellRk(t,e,n){return n==null&&(n=new_buf(12)),write_XLSBCell(e,n),write_RkNumber(t.v,n),n}function parse_BrtShortRk(t){var e=parse_XLSBShortCell(t),n=parse_RkNumber(t);return[e,n,"n"]}function write_BrtShortRk(t,e,n){return n==null&&(n=new_buf(8)),write_XLSBShortCell(e,n),write_RkNumber(t.v,n),n}function parse_BrtCellRString(t){var e=parse_XLSBCell(t),n=parse_RichStr(t);return[e,n,"is"]}function parse_BrtCellSt(t){var e=parse_XLSBCell(t),n=parse_XLWideString(t);return[e,n,"str"]}function write_BrtCellSt(t,e,n){var a=t.v==null?"":String(t.v);return n==null&&(n=new_buf(12+4*t.v.length)),write_XLSBCell(e,n),write_XLWideString(a,n),n.length>n.l?n.slice(0,n.l):n}function parse_BrtShortSt(t){var e=parse_XLSBShortCell(t),n=parse_XLWideString(t);return[e,n,"str"]}function write_BrtShortSt(t,e,n){var a=t.v==null?"":String(t.v);return n==null&&(n=new_buf(8+4*a.length)),write_XLSBShortCell(e,n),write_XLWideString(a,n),n.length>n.l?n.slice(0,n.l):n}function parse_BrtFmlaBool(t,e,n){var a=t.l+e,o=parse_XLSBCell(t);o.r=n["!row"];var l=t.read_shift(1),u=[o,l,"b"];if(n.cellFormula){t.l+=2;var d=parse_XLSBCellParsedFormula(t,a-t.l,n);u[3]=stringify_formula(d,null,o,n.supbooks,n)}else t.l=a;return u}function parse_BrtFmlaError(t,e,n){var a=t.l+e,o=parse_XLSBCell(t);o.r=n["!row"];var l=t.read_shift(1),u=[o,l,"e"];if(n.cellFormula){t.l+=2;var d=parse_XLSBCellParsedFormula(t,a-t.l,n);u[3]=stringify_formula(d,null,o,n.supbooks,n)}else t.l=a;return u}function parse_BrtFmlaNum(t,e,n){var a=t.l+e,o=parse_XLSBCell(t);o.r=n["!row"];var l=parse_Xnum(t),u=[o,l,"n"];if(n.cellFormula){t.l+=2;var d=parse_XLSBCellParsedFormula(t,a-t.l,n);u[3]=stringify_formula(d,null,o,n.supbooks,n)}else t.l=a;return u}function parse_BrtFmlaString(t,e,n){var a=t.l+e,o=parse_XLSBCell(t);o.r=n["!row"];var l=parse_XLWideString(t),u=[o,l,"str"];if(n.cellFormula){t.l+=2;var d=parse_XLSBCellParsedFormula(t,a-t.l,n);u[3]=stringify_formula(d,null,o,n.supbooks,n)}else t.l=a;return u}var parse_BrtMergeCell=parse_UncheckedRfX,write_BrtMergeCell=write_UncheckedRfX;function write_BrtBeginMergeCells(t,e){return e==null&&(e=new_buf(4)),e.write_shift(4,t),e}function parse_BrtHLink(t,e){var n=t.l+e,a=parse_UncheckedRfX(t),o=parse_XLNullableWideString(t),l=parse_XLWideString(t),u=parse_XLWideString(t),d=parse_XLWideString(t);t.l=n;var m={rfx:a,relId:o,loc:l,display:d};return u&&(m.Tooltip=u),m}function write_BrtHLink(t,e){var n=new_buf(50+4*(t[1].Target.length+(t[1].Tooltip||"").length));write_UncheckedRfX({s:decode_cell(t[0]),e:decode_cell(t[0])},n),write_RelID("rId"+e,n);var a=t[1].Target.indexOf("#"),o=a==-1?"":t[1].Target.slice(a+1);return write_XLWideString(o||"",n),write_XLWideString(t[1].Tooltip||"",n),write_XLWideString("",n),n.slice(0,n.l)}function parse_BrtPane(){}function parse_BrtArrFmla(t,e,n){var a=t.l+e,o=parse_RfX(t),l=t.read_shift(1),u=[o];if(u[2]=l,n.cellFormula){var d=parse_XLSBArrayParsedFormula(t,a-t.l,n);u[1]=d}else t.l=a;return u}function parse_BrtShrFmla(t,e,n){var a=t.l+e,o=parse_UncheckedRfX(t),l=[o];if(n.cellFormula){var u=parse_XLSBSharedParsedFormula(t,a-t.l,n);l[1]=u,t.l=a}else t.l=a;return l}function write_BrtColInfo(t,e,n){n==null&&(n=new_buf(18));var a=col_obj_w(t,e);n.write_shift(-4,t),n.write_shift(-4,t),n.write_shift(4,(a.width||10)*256),n.write_shift(4,0);var o=0;return e.hidden&&(o|=1),typeof a.width=="number"&&(o|=2),e.level&&(o|=e.level<<8),n.write_shift(2,o),n}var BrtMarginKeys=["left","right","top","bottom","header","footer"];function parse_BrtMargins(t){var e={};return BrtMarginKeys.forEach(function(n){e[n]=parse_Xnum(t)}),e}function write_BrtMargins(t,e){return e==null&&(e=new_buf(6*8)),default_margins(t),BrtMarginKeys.forEach(function(n){write_Xnum(t[n],e)}),e}function parse_BrtBeginWsView(t){var e=t.read_shift(2);return t.l+=28,{RTL:e&32}}function write_BrtBeginWsView(t,e,n){n==null&&(n=new_buf(30));var a=924;return(((e||{}).Views||[])[0]||{}).RTL&&(a|=32),n.write_shift(2,a),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(1,0),n.write_shift(1,0),n.write_shift(2,0),n.write_shift(2,100),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(4,0),n}function write_BrtCellIgnoreEC(t){var e=new_buf(24);return e.write_shift(4,4),e.write_shift(4,1),write_UncheckedRfX(t,e),e}function write_BrtSheetProtection(t,e){return e==null&&(e=new_buf(16*4+2)),e.write_shift(2,t.password?crypto_CreatePasswordVerifier_Method1(t.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(n){n[1]?e.write_shift(4,t[n[0]]!=null&&!t[n[0]]?1:0):e.write_shift(4,t[n[0]]!=null&&t[n[0]]?0:1)}),e}function parse_BrtDVal(){}function parse_BrtDVal14(){}function parse_ws_bin(t,e,n,a,o,l,u){if(!t)return t;var d=e||{};a||(a={"!id":{}});var m={};d.dense&&(m["!data"]=[]);var y,b={s:{r:2e6,c:2e6},e:{r:0,c:0}},_=!1,w=!1,E,A,C,k,B,D,q,j,J,Y=[];d.biff=12,d["!row"]=0;var L=0,Z=!1,Q=[],oe={},ae=d.supbooks||o.supbooks||[[]];if(ae.sharedf=oe,ae.arrayf=Q,ae.SheetNames=o.SheetNames||o.Sheets.map(function(z){return z.name}),!d.supbooks&&(d.supbooks=ae,o.Names))for(var U=0;U<o.Names.length;++U)ae[0][U+1]=o.Names[U];var I=[],x=[],T=!1;XLSBRecordEnum[16]={n:"BrtShortReal",f:parse_BrtShortReal};var M;if(recordhopper(t,function(X,H,P){if(!w)switch(P){case 148:y=X;break;case 0:E=X,d.sheetRows&&d.sheetRows<=E.r&&(w=!0),j=encode_row(k=E.r),d["!row"]=E.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=pt2px(X.hpt)),x[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(A={t:X[2]},X[2]){case"n":A.v=X[1];break;case"s":q=strs[X[1]],A.v=q.t,A.r=q.r;break;case"b":A.v=!!X[1];break;case"e":A.v=X[1],d.cellText!==!1&&(A.w=BErr[A.v]);break;case"str":A.t="s",A.v=X[1];break;case"is":A.t="s",A.v=X[1].t;break}if((C=u.CellXf[X[0].iStyleRef])&&safe_format(A,C.numFmtId,null,d,l,u),B=X[0].c==-1?B+1:X[0].c,d.dense?(m["!data"][k]||(m["!data"][k]=[]),m["!data"][k][B]=A):m[encode_col(B)+j]=A,d.cellFormula){for(Z=!1,L=0;L<Q.length;++L){var S=Q[L];E.r>=S[0].s.r&&E.r<=S[0].e.r&&B>=S[0].s.c&&B<=S[0].e.c&&(A.F=encode_range(S[0]),Z=!0)}!Z&&X.length>3&&(A.f=X[3])}if(b.s.r>E.r&&(b.s.r=E.r),b.s.c>B&&(b.s.c=B),b.e.r<E.r&&(b.e.r=E.r),b.e.c<B&&(b.e.c=B),d.cellDates&&C&&A.t=="n"&&fmt_is_date(table_fmt[C.numFmtId])){var F=SSF_parse_date_code(A.v);F&&(A.t="d",A.v=new Date(F.y,F.m-1,F.d,F.H,F.M,F.S,F.u))}M&&(M.type=="XLDAPR"&&(A.D=!0),M=void 0);break;case 1:case 12:if(!d.sheetStubs||_)break;A={t:"z",v:void 0},B=X[0].c==-1?B+1:X[0].c,d.dense?(m["!data"][k]||(m["!data"][k]=[]),m["!data"][k][B]=A):m[encode_col(B)+j]=A,b.s.r>E.r&&(b.s.r=E.r),b.s.c>B&&(b.s.c=B),b.e.r<E.r&&(b.e.r=E.r),b.e.c<B&&(b.e.c=B),M&&(M.type=="XLDAPR"&&(A.D=!0),M=void 0);break;case 176:Y.push(X);break;case 49:M=((d.xlmeta||{}).Cell||[])[X-1];break;case 494:var ue=a["!id"][X.relId];for(ue?(X.Target=ue.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=ue):X.relId==""&&(X.Target="#"+X.loc),k=X.rfx.s.r;k<=X.rfx.e.r;++k)for(B=X.rfx.s.c;B<=X.rfx.e.c;++B)d.dense?(m["!data"][k]||(m["!data"][k]=[]),m["!data"][k][B]||(m["!data"][k][B]={t:"z",v:void 0}),m["!data"][k][B].l=X):(D=encode_col(B)+encode_row(k),m[D]||(m[D]={t:"z",v:void 0}),m[D].l=X);break;case 426:if(!d.cellFormula)break;Q.push(X),J=d.dense?m["!data"][k][B]:m[encode_col(B)+j],J.f=stringify_formula(X[1],b,{r:E.r,c:B},ae,d),J.F=encode_range(X[0]);break;case 427:if(!d.cellFormula)break;oe[encode_cell(X[0].s)]=X[1],J=d.dense?m["!data"][k][B]:m[encode_col(B)+j],J.f=stringify_formula(X[1],b,{r:E.r,c:B},ae,d);break;case 60:if(!d.cellStyles)break;for(;X.e>=X.s;)I[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},T||(T=!0,find_mdw_colw(X.w/256)),process_col(I[X.e+1]);break;case 161:m["!autofilter"]={ref:encode_range(X)};break;case 476:m["!margins"]=X;break;case 147:o.Sheets[n]||(o.Sheets[n]={}),X.name&&(o.Sheets[n].CodeName=X.name),(X.above||X.left)&&(m["!outline"]={above:X.above,left:X.left});break;case 137:o.Views||(o.Views=[{}]),o.Views[0]||(o.Views[0]={}),X.RTL&&(o.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:_=!0;break;case 36:_=!1;break;case 37:_=!0;break;case 38:_=!1;break;default:if(!H.T){if(!_||d.WTF)throw new Error("Unexpected record 0x"+P.toString(16))}}},d),delete d.supbooks,delete d["!row"],!m["!ref"]&&(b.s.r<2e6||y&&(y.e.r>0||y.e.c>0||y.s.r>0||y.s.c>0))&&(m["!ref"]=encode_range(y||b)),d.sheetRows&&m["!ref"]){var O=safe_decode_range(m["!ref"]);d.sheetRows<=+O.e.r&&(O.e.r=d.sheetRows-1,O.e.r>b.e.r&&(O.e.r=b.e.r),O.e.r<O.s.r&&(O.s.r=O.e.r),O.e.c>b.e.c&&(O.e.c=b.e.c),O.e.c<O.s.c&&(O.s.c=O.e.c),m["!fullref"]=m["!ref"],m["!ref"]=encode_range(O))}return Y.length>0&&(m["!merges"]=Y),I.length>0&&(m["!cols"]=I),x.length>0&&(m["!rows"]=x),m}function write_ws_bin_cell(t,e,n,a,o,l,u){var d={r:n,c:a};if(e.c&&l["!comments"].push([encode_cell(d),e.c]),e.v===void 0)return!1;var m="";switch(e.t){case"b":m=e.v?"1":"0";break;case"d":e=dup(e),e.z=e.z||table_fmt[14],e.v=datenum(parseDate(e.v)),e.t="n";break;case"n":case"e":m=""+e.v;break;default:m=e.v;break}switch(d.s=get_cell_style(o.cellXfs,e,o),e.l&&l["!links"].push([encode_cell(d),e.l]),e.t){case"s":case"str":return o.bookSST?(m=get_sst_id(o.Strings,e.v==null?"":String(e.v),o.revStrings),d.t="s",d.v=m,u?write_record(t,18,write_BrtShortIsst(e,d)):write_record(t,7,write_BrtCellIsst(e,d))):(d.t="str",u?write_record(t,17,write_BrtShortSt(e,d)):write_record(t,6,write_BrtCellSt(e,d))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?u?write_record(t,13,write_BrtShortRk(e,d)):write_record(t,2,write_BrtCellRk(e,d)):u?write_record(t,16,write_BrtShortReal(e,d)):write_record(t,5,write_BrtCellReal(e,d)),!0;case"b":return d.t="b",u?write_record(t,15,write_BrtShortBool(e,d)):write_record(t,4,write_BrtCellBool(e,d)),!0;case"e":return d.t="e",u?write_record(t,14,write_BrtShortError(e,d)):write_record(t,3,write_BrtCellError(e,d)),!0}return u?write_record(t,12,write_BrtShortBlank(e,d)):write_record(t,1,write_BrtCellBlank(e,d)),!0}function write_CELLTABLE(t,e,n,a){var o=safe_decode_range(e["!ref"]||"A1"),l,u="",d=[];write_record(t,145);var m=e["!data"]!=null,y=o.e.r;e["!rows"]&&(y=Math.max(o.e.r,e["!rows"].length-1));for(var b=o.s.r;b<=y;++b){u=encode_row(b),write_row_header(t,e,o,b);var _=!1;if(b<=o.e.r)for(var w=o.s.c;w<=o.e.c;++w){b===o.s.r&&(d[w]=encode_col(w)),l=d[w]+u;var E=m?(e["!data"][b]||[])[w]:e[l];if(!E){_=!1;continue}_=write_ws_bin_cell(t,E,b,w,a,e,_)}}write_record(t,146)}function write_MERGECELLS(t,e){!e||!e["!merges"]||(write_record(t,177,write_BrtBeginMergeCells(e["!merges"].length)),e["!merges"].forEach(function(n){write_record(t,176,write_BrtMergeCell(n))}),write_record(t,178))}function write_COLINFOS(t,e){!e||!e["!cols"]||(write_record(t,390),e["!cols"].forEach(function(n,a){n&&write_record(t,60,write_BrtColInfo(a,n))}),write_record(t,391))}function write_IGNOREECS(t,e){!e||!e["!ref"]||(write_record(t,648),write_record(t,649,write_BrtCellIgnoreEC(safe_decode_range(e["!ref"]))),write_record(t,650))}function write_HLINKS(t,e,n){e["!links"].forEach(function(a){if(a[1].Target){var o=add_rels(n,-1,a[1].Target.replace(/#.*$/,""),RELS.HLINK);write_record(t,494,write_BrtHLink(a,o))}}),delete e["!links"]}function write_LEGACYDRAWING(t,e,n,a){if(e["!comments"].length>0){var o=add_rels(a,-1,"../drawings/vmlDrawing"+(n+1)+".vml",RELS.VML);write_record(t,551,write_RelID("rId"+o)),e["!legacy"]=o}}function write_AUTOFILTER(t,e,n,a){if(e["!autofilter"]){var o=e["!autofilter"],l=typeof o.ref=="string"?o.ref:encode_range(o.ref);n.Workbook||(n.Workbook={Sheets:[]}),n.Workbook.Names||(n.Workbook.Names=[]);var u=n.Workbook.Names,d=decode_range(l);d.s.r==d.e.r&&(d.e.r=decode_range(e["!ref"]).e.r,l=encode_range(d));for(var m=0;m<u.length;++m){var y=u[m];if(y.Name=="_xlnm._FilterDatabase"&&y.Sheet==a){y.Ref=formula_quote_sheet_name(n.SheetNames[a])+"!"+fix_range(l);break}}m==u.length&&u.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:formula_quote_sheet_name(n.SheetNames[a])+"!"+fix_range(l)}),write_record(t,161,write_UncheckedRfX(safe_decode_range(l))),write_record(t,162)}}function write_WSVIEWS2(t,e,n){write_record(t,133),write_record(t,137,write_BrtBeginWsView(e,n)),write_record(t,138),write_record(t,134)}function write_SHEETPROTECT(t,e){e["!protect"]&&write_record(t,535,write_BrtSheetProtection(e["!protect"]))}function write_ws_bin(t,e,n,a){var o=buf_array(),l=n.SheetNames[t],u=n.Sheets[l]||{},d=l;try{n&&n.Workbook&&(d=n.Workbook.Sheets[t].CodeName||d)}catch{}var m=safe_decode_range(u["!ref"]||"A1");if(m.e.c>16383||m.e.r>1048575){if(e.WTF)throw new Error("Range "+(u["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");m.e.c=Math.min(m.e.c,16383),m.e.r=Math.min(m.e.c,1048575)}return u["!links"]=[],u["!comments"]=[],write_record(o,129),(n.vbaraw||u["!outline"])&&write_record(o,147,write_BrtWsProp(d,u["!outline"])),write_record(o,148,write_BrtWsDim(m)),write_WSVIEWS2(o,u,n.Workbook),write_COLINFOS(o,u),write_CELLTABLE(o,u,t,e),write_SHEETPROTECT(o,u),write_AUTOFILTER(o,u,n,t),write_MERGECELLS(o,u),write_HLINKS(o,u,a),u["!margins"]&&write_record(o,476,write_BrtMargins(u["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&write_IGNOREECS(o,u),write_LEGACYDRAWING(o,u,t,a),write_record(o,130),o.end()}function parse_Cache(t){var e=[],n=t.match(/^<c:numCache>/),a;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(l){var u=l.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);u&&(e[+u[1]]=n?+u[2]:u[2])});var o=unescapexml((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(l){a=l.replace(/<.*?>/g,"")}),[e,o,a]}function parse_chart(t,e,n,a,o,l){var u=l||{"!type":"chart"};if(!t)return l;var d=0,m=0,y="A",b={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(_){var w=parse_Cache(_);b.s.r=b.s.c=0,b.e.c=d,y=encode_col(d),w[0].forEach(function(E,A){u["!data"]?(u["!data"][A]||(u["!data"][A]=[]),u["!data"][A][d]={t:"n",v:E,z:w[1]}):u[y+encode_row(A)]={t:"n",v:E,z:w[1]},m=A}),b.e.r<m&&(b.e.r=m),++d}),d>0&&(u["!ref"]=encode_range(b)),u}function parse_cs_xml(t,e,n,a,o){if(!t)return t;a||(a={"!id":{}});var l={"!type":"chart","!drawel":null,"!rel":""},u,d=t.match(sheetprregex);return d&&parse_ws_xml_sheetpr(d[0],l,o,n),(u=t.match(/drawing r:id="(.*?)"/))&&(l["!rel"]=u[1]),a["!id"][l["!rel"]]&&(l["!drawel"]=a["!id"][l["!rel"]]),l}function parse_BrtCsProp(t,e){t.l+=10;var n=parse_XLWideString(t);return{name:n}}function parse_cs_bin(t,e,n,a,o){if(!t)return t;a||(a={"!id":{}});var l={"!type":"chart","!drawel":null,"!rel":""},u=!1;return recordhopper(t,function(m,y,b){switch(b){case 550:l["!rel"]=m;break;case 651:o.Sheets[n]||(o.Sheets[n]={}),m.name&&(o.Sheets[n].CodeName=m.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:u=!0;break;case 36:u=!1;break;case 37:break;case 38:break;default:if(!(y.T>0)){if(!(y.T<0)){if(!u||e.WTF)throw new Error("Unexpected record 0x"+b.toString(16))}}}},e),a["!id"][l["!rel"]]&&(l["!drawel"]=a["!id"][l["!rel"]]),l}var WBPropsDef=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],WBViewDef=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],SheetDef=[],CalcPrDef=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function push_defaults_array(t,e){for(var n=0;n!=t.length;++n)for(var a=t[n],o=0;o!=e.length;++o){var l=e[o];if(a[l[0]]==null)a[l[0]]=l[1];else switch(l[2]){case"bool":typeof a[l[0]]=="string"&&(a[l[0]]=parsexmlbool(a[l[0]]));break;case"int":typeof a[l[0]]=="string"&&(a[l[0]]=parseInt(a[l[0]],10));break}}}function push_defaults(t,e){for(var n=0;n!=e.length;++n){var a=e[n];if(t[a[0]]==null)t[a[0]]=a[1];else switch(a[2]){case"bool":typeof t[a[0]]=="string"&&(t[a[0]]=parsexmlbool(t[a[0]]));break;case"int":typeof t[a[0]]=="string"&&(t[a[0]]=parseInt(t[a[0]],10));break}}}function parse_wb_defaults(t){push_defaults(t.WBProps,WBPropsDef),push_defaults(t.CalcPr,CalcPrDef),push_defaults_array(t.WBView,WBViewDef),push_defaults_array(t.Sheets,SheetDef),_ssfopts.date1904=parsexmlbool(t.WBProps.date1904)}function safe1904(t){return!t.Workbook||!t.Workbook.WBProps?"false":parsexmlbool(t.Workbook.WBProps.date1904)?"true":"false"}var badchars=":][*?/\\".split("");function check_ws_name(t,e){if(t.length>31){if(e)return!1;throw new Error("Sheet names cannot exceed 31 chars")}var n=!0;return badchars.forEach(function(a){if(t.indexOf(a)!=-1){if(!e)throw new Error("Sheet name cannot contain : \\ / ? * [ ]");n=!1}}),n}function check_wb_names(t,e,n){t.forEach(function(a,o){check_ws_name(a);for(var l=0;l<o;++l)if(a==t[l])throw new Error("Duplicate Sheet Name: "+a);if(n){var u=e&&e[o]&&e[o].CodeName||a;if(u.charCodeAt(0)==95&&u.length>22)throw new Error("Bad Code Name: Worksheet"+u)}})}function check_wb(t){if(!t||!t.SheetNames||!t.Sheets)throw new Error("Invalid Workbook");if(!t.SheetNames.length)throw new Error("Workbook is empty");var e=t.Workbook&&t.Workbook.Sheets||[];check_wb_names(t.SheetNames,e,!!t.vbaraw);for(var n=0;n<t.SheetNames.length;++n)check_ws(t.Sheets[t.SheetNames[n]],t.SheetNames[n],n);t.SheetNames.forEach(function(a,o){var l=t.Sheets[a];if(!(!l||!l["!autofilter"])){var u;t.Workbook||(t.Workbook={}),t.Workbook.Names||(t.Workbook.Names=[]),t.Workbook.Names.forEach(function(m){m.Name=="_xlnm._FilterDatabase"&&m.Sheet==o&&(u=m)});var d=formula_quote_sheet_name(a)+"!"+fix_range(l["!autofilter"].ref);u?u.Ref=d:t.Workbook.Names.push({Name:"_xlnm._FilterDatabase",Sheet:o,Ref:d})}})}var wbnsregex=/<\w+:workbook/;function parse_wb_xml(t,e){if(!t)throw new Error("Could not find file");var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,o="xmlns",l={},u=0;if(t.replace(tagregex,function(m,y){var b=parsexmltag(m);switch(strip_ns(b[0])){case"<?xml":break;case"<workbook":m.match(wbnsregex)&&(o="xmlns"+m.match(/<(\w+):/)[1]),n.xmlns=b[o];break;case"</workbook>":break;case"<fileVersion":delete b[0],n.AppVersion=b;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":WBPropsDef.forEach(function(_){if(b[_[0]]!=null)switch(_[2]){case"bool":n.WBProps[_[0]]=parsexmlbool(b[_[0]]);break;case"int":n.WBProps[_[0]]=parseInt(b[_[0]],10);break;default:n.WBProps[_[0]]=b[_[0]]}}),b.codeName&&(n.WBProps.CodeName=utf8read(b.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete b[0],n.WBView.push(b);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(b.state){case"hidden":b.Hidden=1;break;case"veryHidden":b.Hidden=2;break;default:b.Hidden=0}delete b.state,b.name=unescapexml(utf8read(b.name)),delete b[0],n.Sheets.push(b);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":l={},l.Name=utf8read(b.name),b.comment&&(l.Comment=b.comment),b.localSheetId&&(l.Sheet=+b.localSheetId),parsexmlbool(b.hidden||"0")&&(l.Hidden=!0),u=y+m.length;break;case"</definedName>":l.Ref=unescapexml(utf8read(t.slice(u,y))),n.Names.push(l);break;case"<definedName/>":break;case"<calcPr":delete b[0],n.CalcPr=b;break;case"<calcPr/>":delete b[0],n.CalcPr=b;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&e.WTF)throw new Error("unrecognized "+b[0]+" in workbook")}return m}),XMLNS_main.indexOf(n.xmlns)===-1)throw new Error("Unknown Namespace: "+n.xmlns);return parse_wb_defaults(n),n}function write_wb_xml(t){var e=[XML_HEADER];e[e.length]=writextag("workbook",null,{xmlns:XMLNS_main[0],"xmlns:r":XMLNS.r});var n=t.Workbook&&(t.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};t.Workbook&&t.Workbook.WBProps&&(WBPropsDef.forEach(function(d){t.Workbook.WBProps[d[0]]!=null&&t.Workbook.WBProps[d[0]]!=d[1]&&(a[d[0]]=t.Workbook.WBProps[d[0]])}),t.Workbook.WBProps.CodeName&&(a.codeName=t.Workbook.WBProps.CodeName,delete a.CodeName)),e[e.length]=writextag("workbookPr",null,a);var o=t.Workbook&&t.Workbook.Sheets||[],l=0;if(o&&o[0]&&o[0].Hidden){for(e[e.length]="<bookViews>",l=0;l!=t.SheetNames.length&&!(!o[l]||!o[l].Hidden);++l);l==t.SheetNames.length&&(l=0),e[e.length]='<workbookView firstSheet="'+l+'" activeTab="'+l+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",l=0;l!=t.SheetNames.length;++l){var u={name:escapexml(t.SheetNames[l].slice(0,31))};if(u.sheetId=""+(l+1),u["r:id"]="rId"+(l+1),o[l])switch(o[l].Hidden){case 1:u.state="hidden";break;case 2:u.state="veryHidden";break}e[e.length]=writextag("sheet",null,u)}return e[e.length]="</sheets>",n&&(e[e.length]="<definedNames>",t.Workbook&&t.Workbook.Names&&t.Workbook.Names.forEach(function(d){var m={name:d.Name};d.Comment&&(m.comment=d.Comment),d.Sheet!=null&&(m.localSheetId=""+d.Sheet),d.Hidden&&(m.hidden="1"),d.Ref&&(e[e.length]=writextag("definedName",escapexml(d.Ref),m))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function parse_BrtBundleSh(t,e){var n={};return n.Hidden=t.read_shift(4),n.iTabID=t.read_shift(4),n.strRelID=parse_RelID(t),n.name=parse_XLWideString(t),n}function write_BrtBundleSh(t,e){return e||(e=new_buf(127)),e.write_shift(4,t.Hidden),e.write_shift(4,t.iTabID),write_RelID(t.strRelID,e),write_XLWideString(t.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function parse_BrtWbProp(t,e){var n={},a=t.read_shift(4);n.defaultThemeVersion=t.read_shift(4);var o=e>8?parse_XLWideString(t):"";return o.length>0&&(n.CodeName=o),n.autoCompressPictures=!!(a&65536),n.backupFile=!!(a&64),n.checkCompatibility=!!(a&4096),n.date1904=!!(a&1),n.filterPrivacy=!!(a&8),n.hidePivotFieldList=!!(a&1024),n.promptedSolutions=!!(a&16),n.publishItems=!!(a&2048),n.refreshAllConnections=!!(a&262144),n.saveExternalLinkValues=!!(a&128),n.showBorderUnselectedTables=!!(a&4),n.showInkAnnotation=!!(a&32),n.showObjects=["all","placeholders","none"][a>>13&3],n.showPivotChartFilter=!!(a&32768),n.updateLinks=["userSet","never","always"][a>>8&3],n}function write_BrtWbProp(t,e){e||(e=new_buf(72));var n=0;return t&&(t.date1904&&(n|=1),t.filterPrivacy&&(n|=8)),e.write_shift(4,n),e.write_shift(4,0),write_XLSBCodeName(t&&t.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function parse_BrtFRTArchID$(t,e){var n={};return t.read_shift(4),n.ArchID=t.read_shift(4),t.l+=e-8,n}function parse_BrtName(t,e,n){var a=t.l+e,o=t.read_shift(4);t.l+=1;var l=t.read_shift(4),u=parse_XLNameWideString(t),d=parse_XLSBNameParsedFormula(t,0,n),m=parse_XLNullableWideString(t);o&32&&(u="_xlnm."+u),t.l=a;var y={Name:u,Ptg:d,Flags:o};return l<268435455&&(y.Sheet=l),m&&(y.Comment=m),y}function write_BrtName(t,e){var n=new_buf(9),a=0,o=t.Name;XLSLblBuiltIn.indexOf(o)>-1&&(a|=32,o=o.slice(6)),n.write_shift(4,a),n.write_shift(1,0),n.write_shift(4,t.Sheet==null?4294967295:t.Sheet);var l=[n,write_XLWideString(o),write_XLSBNameParsedFormula(t.Ref,e)];if(t.Comment)l.push(write_XLNullableWideString(t.Comment));else{var u=new_buf(4);u.write_shift(4,4294967295),l.push(u)}return bconcat(l)}function parse_wb_bin(t,e){var n={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],o=!1;e||(e={}),e.biff=12;var l=[],u=[[]];return u.SheetNames=[],u.XTI=[],XLSBRecordEnum[16]={n:"BrtFRTArchID$",f:parse_BrtFRTArchID$},recordhopper(t,function(m,y,b){switch(b){case 156:u.SheetNames.push(m.name),n.Sheets.push(m);break;case 153:n.WBProps=m;break;case 39:m.Sheet!=null&&(e.SID=m.Sheet),m.Ref=stringify_formula(m.Ptg,null,null,u,e),delete e.SID,delete m.Ptg,l.push(m);break;case 1036:break;case 357:case 358:case 355:case 667:u[0].length?u.push([b,m]):u[0]=[b,m],u[u.length-1].XTI=[];break;case 362:u.length===0&&(u[0]=[],u[0].XTI=[]),u[u.length-1].XTI=u[u.length-1].XTI.concat(m),u.XTI=u.XTI.concat(m);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(b),o=!0;break;case 36:a.pop(),o=!1;break;case 37:a.push(b),o=!0;break;case 38:a.pop(),o=!1;break;case 16:break;default:if(!y.T){if(!o||e.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+b.toString(16))}}},e),parse_wb_defaults(n),n.Names=l,n.supbooks=u,n}function write_BUNDLESHS(t,e){write_record(t,143);for(var n=0;n!=e.SheetNames.length;++n){var a=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[n]&&e.Workbook.Sheets[n].Hidden||0,o={Hidden:a,iTabID:n+1,strRelID:"rId"+(n+1),name:e.SheetNames[n]};write_record(t,156,write_BrtBundleSh(o))}write_record(t,144)}function write_BrtFileVersion(t,e){e||(e=new_buf(127));for(var n=0;n!=4;++n)e.write_shift(4,0);return write_XLWideString("SheetJS",e),write_XLWideString(XLSX.version,e),write_XLWideString(XLSX.version,e),write_XLWideString("7262",e),e.length>e.l?e.slice(0,e.l):e}function write_BrtBookView(t,e){e||(e=new_buf(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,t),e.write_shift(4,t);var n=120;return e.write_shift(1,n),e.length>e.l?e.slice(0,e.l):e}function write_BOOKVIEWS(t,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var n=e.Workbook.Sheets,a=0,o=-1,l=-1;a<n.length;++a)!n[a]||!n[a].Hidden&&o==-1?o=a:n[a].Hidden==1&&l==-1&&(l=a);l>o||(write_record(t,135),write_record(t,158,write_BrtBookView(o)),write_record(t,136))}}function write_BRTNAMES(t,e){!e.Workbook||!e.Workbook.Names||e.Workbook.Names.forEach(function(n){try{if(n.Flags&14)return;write_record(t,39,write_BrtName(n,e))}catch{console.error("Could not serialize defined name "+JSON.stringify(n))}})}function write_SELF_EXTERNS_xlsb(t){var e=t.SheetNames.length,n=new_buf(12*e+28);n.write_shift(4,e+2),n.write_shift(4,0),n.write_shift(4,-2),n.write_shift(4,-2),n.write_shift(4,0),n.write_shift(4,-1),n.write_shift(4,-1);for(var a=0;a<e;++a)n.write_shift(4,0),n.write_shift(4,a),n.write_shift(4,a);return n}function write_EXTERNALS_xlsb(t,e){write_record(t,353),write_record(t,357),write_record(t,362,write_SELF_EXTERNS_xlsb(e)),write_record(t,354)}function write_wb_bin(t,e){var n=buf_array();return write_record(n,131),write_record(n,128,write_BrtFileVersion()),write_record(n,153,write_BrtWbProp(t.Workbook&&t.Workbook.WBProps||null)),write_BOOKVIEWS(n,t),write_BUNDLESHS(n,t),write_EXTERNALS_xlsb(n,t),(t.Workbook||{}).Names&&write_BRTNAMES(n,t),write_record(n,132),n.end()}function parse_wb(t,e,n){return e.slice(-4)===".bin"?parse_wb_bin(t,n):parse_wb_xml(t,n)}function parse_ws(t,e,n,a,o,l,u,d){return e.slice(-4)===".bin"?parse_ws_bin(t,a,n,o,l,u,d):parse_ws_xml(t,a,n,o,l,u,d)}function parse_cs(t,e,n,a,o,l,u,d){return e.slice(-4)===".bin"?parse_cs_bin(t,a,n,o,l):parse_cs_xml(t,a,n,o,l)}function parse_ms(t,e,n,a,o,l,u,d){return e.slice(-4)===".bin"?parse_ms_bin():parse_ms_xml()}function parse_ds(t,e,n,a,o,l,u,d){return e.slice(-4)===".bin"?parse_ds_bin():parse_ds_xml()}function parse_sty(t,e,n,a){return e.slice(-4)===".bin"?parse_sty_bin(t,n,a):parse_sty_xml(t,n,a)}function parse_sst(t,e,n){return e.slice(-4)===".bin"?parse_sst_bin(t,n):parse_sst_xml(t,n)}function parse_cmnt(t,e,n){return e.slice(-4)===".bin"?parse_comments_bin(t,n):parse_comments_xml(t,n)}function parse_cc(t,e,n){return e.slice(-4)===".bin"?parse_cc_bin(t):parse_cc_xml(t)}function parse_xlink(t,e,n,a){return n.slice(-4)===".bin"?parse_xlink_bin(t,e,n,a):void 0}function parse_xlmeta(t,e,n){return e.slice(-4)===".bin"?parse_xlmeta_bin(t,e,n):parse_xlmeta_xml(t,e,n)}var attregexg2=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,attregex2=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xlml_parsexmltag(t,e){var n=t.split(/\s+/),a=[];if(e||(a[0]=n[0]),n.length===1)return a;var o=t.match(attregexg2),l,u,d,m;if(o)for(m=0;m!=o.length;++m)l=o[m].match(attregex2),(u=l[1].indexOf(":"))===-1?a[l[1]]=l[2].slice(1,l[2].length-1):(l[1].slice(0,6)==="xmlns:"?d="xmlns"+l[1].slice(6):d=l[1].slice(u+1),a[d]=l[2].slice(1,l[2].length-1));return a}function xlml_parsexmltagobj(t){var e=t.split(/\s+/),n={};if(e.length===1)return n;var a=t.match(attregexg2),o,l,u,d;if(a)for(d=0;d!=a.length;++d)o=a[d].match(attregex2),(l=o[1].indexOf(":"))===-1?n[o[1]]=o[2].slice(1,o[2].length-1):(o[1].slice(0,6)==="xmlns:"?u="xmlns"+o[1].slice(6):u=o[1].slice(l+1),n[u]=o[2].slice(1,o[2].length-1));return n}var XLMLFormatMap;function xlml_format(t,e){var n=XLMLFormatMap[t]||unescapexml(t);return n==="General"?SSF_general(e):SSF_format(n,e)}function xlml_set_custprop(t,e,n,a){var o=a;switch((n[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":o=parsexmlbool(a);break;case"i2":case"int":o=parseInt(a,10);break;case"r4":case"float":o=parseFloat(a);break;case"date":case"dateTime.tz":o=parseDate(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+n[0])}t[unescapexml(e)]=o}function safe_format_xlml(t,e,n){if(t.t!=="z"){if(!n||n.cellText!==!1)try{t.t==="e"?t.w=t.w||BErr[t.v]:e==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=SSF_general_num(t.v):t.w=SSF_general(t.v):t.w=xlml_format(e||"General",t.v)}catch(l){if(n.WTF)throw l}try{var a=XLMLFormatMap[e]||e||"General";if(n.cellNF&&(t.z=a),n.cellDates&&t.t=="n"&&fmt_is_date(a)){var o=SSF_parse_date_code(t.v);o&&(t.t="d",t.v=new Date(o.y,o.m-1,o.d,o.H,o.M,o.S,o.u))}}catch(l){if(n.WTF)throw l}}}function process_style_xlml(t,e,n){if(n.cellStyles&&e.Interior){var a=e.Interior;a.Pattern&&(a.patternType=XLMLPatternTypeMap[a.Pattern]||a.Pattern)}t[e.ID]=e}function parse_xlml_data(t,e,n,a,o,l,u,d,m,y){var b="General",_=a.StyleID,w={};y=y||{};var E=[],A=0;for(_===void 0&&d&&(_=d.StyleID),_===void 0&&u&&(_=u.StyleID);l[_]!==void 0&&(l[_].nf&&(b=l[_].nf),l[_].Interior&&E.push(l[_].Interior),!!l[_].Parent);)_=l[_].Parent;switch(n.Type){case"Boolean":a.t="b",a.v=parsexmlbool(t);break;case"String":a.t="s",a.r=xlml_fixstr(unescapexml(t)),a.v=t.indexOf("<")>-1?unescapexml(e||t).replace(/<.*?>/g,""):a.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),a.v=(parseDate(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),a.v!==a.v?a.v=unescapexml(t):a.v<60&&(a.v=a.v-1),(!b||b=="General")&&(b="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+t),a.t||(a.t="n");break;case"Error":a.t="e",a.v=RBErr[t],y.cellText!==!1&&(a.w=t);break;default:t==""&&e==""?a.t="z":(a.t="s",a.v=xlml_fixstr(e||t));break}if(safe_format_xlml(a,b,y),y.cellFormula!==!1)if(a.Formula){var C=unescapexml(a.Formula);C.charCodeAt(0)==61&&(C=C.slice(1)),a.f=rc_to_a1(C,o),delete a.Formula,a.ArrayRange=="RC"?a.F=rc_to_a1("RC:RC",o):a.ArrayRange&&(a.F=rc_to_a1(a.ArrayRange,o),m.push([safe_decode_range(a.F),a.F]))}else for(A=0;A<m.length;++A)o.r>=m[A][0].s.r&&o.r<=m[A][0].e.r&&o.c>=m[A][0].s.c&&o.c<=m[A][0].e.c&&(a.F=m[A][1]);y.cellStyles&&(E.forEach(function(k){!w.patternType&&k.patternType&&(w.patternType=k.patternType)}),a.s=w),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function xlml_prefix_dname(t){return XLSLblBuiltIn.indexOf("_xlnm."+t)>-1?"_xlnm."+t:t}function xlml_clean_comment(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function parse_xlml_xml(t,e){var n=e||{};make_ssf();var a=debom(xlml_normalize(t));(n.type=="binary"||n.type=="array"||n.type=="base64")&&(a=utf8read(a));var o=a.slice(0,1024).toLowerCase(),l=!1;if(o=o.replace(/".*?"/g,""),(o.indexOf(">")&1023)>Math.min(o.indexOf(",")&1023,o.indexOf(";")&1023)){var u=dup(n);return u.type="string",PRN.to_workbook(a,u)}if(o.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(_e){o.indexOf("<"+_e)>=0&&(l=!0)}),l)return html_to_workbook(a,n);XLMLFormatMap={"General Number":"General","General Date":table_fmt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":table_fmt[15],"Short Date":table_fmt[14],"Long Time":table_fmt[19],"Medium Time":table_fmt[18],"Short Time":table_fmt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:table_fmt[2],Standard:table_fmt[4],Percent:table_fmt[10],Scientific:table_fmt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var d,m=[],y,b={},_=[],w={},E="";n.dense&&(w["!data"]=[]);var A={},C={},k=xlml_parsexmltag('<Data ss:Type="String">'),B=0,D=0,q=0,j={s:{r:2e6,c:2e6},e:{r:0,c:0}},J={},Y={},L="",Z=0,Q=[],oe={},ae={},U=0,I=[],x=[],T={},M=[],O,z=!1,X=[],H=[],P={},S=0,F=0,ue={Sheets:[],WBProps:{date1904:!1}},ee={};xlmlregex.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var fe="";d=xlmlregex.exec(a);)switch(d[3]=(fe=d[3]).toLowerCase()){case"data":if(fe=="data"){if(d[1]==="/"){if((y=m.pop())[0]!==d[3])throw new Error("Bad state: "+y.join("|"))}else d[0].charAt(d[0].length-2)!=="/"&&m.push([d[3],!0]);break}if(m[m.length-1][1])break;d[1]==="/"?parse_xlml_data(a.slice(B,d.index),L,k,m[m.length-1][0]=="comment"?T:A,{c:D,r:q},J,M[D],C,X,n):(L="",k=xlml_parsexmltag(d[0]),B=d.index+d[0].length);break;case"cell":if(d[1]==="/")if(x.length>0&&(A.c=x),(!n.sheetRows||n.sheetRows>q)&&A.v!==void 0&&(n.dense?(w["!data"][q]||(w["!data"][q]=[]),w["!data"][q][D]=A):w[encode_col(D)+encode_row(q)]=A),A.HRef&&(A.l={Target:unescapexml(A.HRef)},A.HRefScreenTip&&(A.l.Tooltip=A.HRefScreenTip),delete A.HRef,delete A.HRefScreenTip),(A.MergeAcross||A.MergeDown)&&(S=D+(parseInt(A.MergeAcross,10)|0),F=q+(parseInt(A.MergeDown,10)|0),(S>D||F>q)&&Q.push({s:{c:D,r:q},e:{c:S,r:F}})),!n.sheetStubs)A.MergeAcross?D=S+1:++D;else if(A.MergeAcross||A.MergeDown){for(var le=D;le<=S;++le)for(var ce=q;ce<=F;++ce)(le>D||ce>q)&&(n.dense?(w["!data"][ce]||(w["!data"][ce]=[]),w["!data"][ce][le]={t:"z"}):w[encode_col(le)+encode_row(ce)]={t:"z"});D=S+1}else++D;else A=xlml_parsexmltagobj(d[0]),A.Index&&(D=+A.Index-1),D<j.s.c&&(j.s.c=D),D>j.e.c&&(j.e.c=D),d[0].slice(-2)==="/>"&&++D,x=[];break;case"row":d[1]==="/"||d[0].slice(-2)==="/>"?(q<j.s.r&&(j.s.r=q),q>j.e.r&&(j.e.r=q),d[0].slice(-2)==="/>"&&(C=xlml_parsexmltag(d[0]),C.Index&&(q=+C.Index-1)),D=0,++q):(C=xlml_parsexmltag(d[0]),C.Index&&(q=+C.Index-1),P={},(C.AutoFitHeight=="0"||C.Height)&&(P.hpx=parseInt(C.Height,10),P.hpt=px2pt(P.hpx),H[q]=P),C.Hidden=="1"&&(P.hidden=!0,H[q]=P));break;case"worksheet":if(d[1]==="/"){if((y=m.pop())[0]!==d[3])throw new Error("Bad state: "+y.join("|"));_.push(E),j.s.r<=j.e.r&&j.s.c<=j.e.c&&(w["!ref"]=encode_range(j),n.sheetRows&&n.sheetRows<=j.e.r&&(w["!fullref"]=w["!ref"],j.e.r=n.sheetRows-1,w["!ref"]=encode_range(j))),Q.length&&(w["!merges"]=Q),M.length>0&&(w["!cols"]=M),H.length>0&&(w["!rows"]=H),b[E]=w}else j={s:{r:2e6,c:2e6},e:{r:0,c:0}},q=D=0,m.push([d[3],!1]),y=xlml_parsexmltag(d[0]),E=unescapexml(y.Name),w={},n.dense&&(w["!data"]=[]),Q=[],X=[],H=[],ee={name:E,Hidden:0},ue.Sheets.push(ee);break;case"table":if(d[1]==="/"){if((y=m.pop())[0]!==d[3])throw new Error("Bad state: "+y.join("|"))}else{if(d[0].slice(-2)=="/>")break;m.push([d[3],!1]),M=[],z=!1}break;case"style":d[1]==="/"?process_style_xlml(J,Y,n):Y=xlml_parsexmltag(d[0]);break;case"numberformat":Y.nf=unescapexml(xlml_parsexmltag(d[0]).Format||"General"),XLMLFormatMap[Y.nf]&&(Y.nf=XLMLFormatMap[Y.nf]);for(var pe=0;pe!=392&&table_fmt[pe]!=Y.nf;++pe);if(pe==392){for(pe=57;pe!=392;++pe)if(table_fmt[pe]==null){SSF__load(Y.nf,pe);break}}break;case"column":if(m[m.length-1][0]!=="table"||d[1]==="/")break;if(O=xlml_parsexmltag(d[0]),O.Hidden&&(O.hidden=!0,delete O.Hidden),O.Width&&(O.wpx=parseInt(O.Width,10)),!z&&O.wpx>10){z=!0,MDW=DEF_MDW;for(var se=0;se<M.length;++se)M[se]&&process_col(M[se])}z&&process_col(O),M[O.Index-1||M.length]=O;for(var de=0;de<+O.Span;++de)M[M.length]=dup(O);break;case"namedrange":if(d[1]==="/")break;ue.Names||(ue.Names=[]);var re=parsexmltag(d[0]),me={Name:xlml_prefix_dname(re.Name),Ref:rc_to_a1(re.RefersTo.slice(1),{r:0,c:0})};ue.Sheets.length>0&&(me.Sheet=ue.Sheets.length-1),ue.Names.push(me);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(d[0].slice(-2)==="/>")break;d[1]==="/"?L+=a.slice(Z,d.index):Z=d.index+d[0].length;break;case"interior":if(!n.cellStyles)break;Y.Interior=xlml_parsexmltag(d[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(d[0].slice(-2)==="/>")break;d[1]==="/"?xlml_set_prop(oe,fe,a.slice(U,d.index)):U=d.index+d[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(d[1]==="/"){if((y=m.pop())[0]!==d[3])throw new Error("Bad state: "+y.join("|"))}else m.push([d[3],!1]);break;case"comment":if(d[1]==="/"){if((y=m.pop())[0]!==d[3])throw new Error("Bad state: "+y.join("|"));xlml_clean_comment(T),x.push(T)}else m.push([d[3],!1]),y=xlml_parsexmltag(d[0]),T={a:y.Author};break;case"autofilter":if(d[1]==="/"){if((y=m.pop())[0]!==d[3])throw new Error("Bad state: "+y.join("|"))}else if(d[0].charAt(d[0].length-2)!=="/"){var te=xlml_parsexmltag(d[0]);w["!autofilter"]={ref:rc_to_a1(te.Range).replace(/\$/g,"")},m.push([d[3],!0])}break;case"name":break;case"datavalidation":if(d[1]==="/"){if((y=m.pop())[0]!==d[3])throw new Error("Bad state: "+y.join("|"))}else d[0].charAt(d[0].length-2)!=="/"&&m.push([d[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(d[1]==="/"){if((y=m.pop())[0]!==d[3])throw new Error("Bad state: "+y.join("|"))}else d[0].charAt(d[0].length-2)!=="/"&&m.push([d[3],!0]);break;case"null":break;default:if(m.length==0&&d[3]=="document"||m.length==0&&d[3]=="uof")return parse_fods(a,n);var ve=!0;switch(m[m.length-1][0]){case"officedocumentsettings":switch(d[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ve=!1}break;case"componentoptions":switch(d[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ve=!1}break;case"excelworkbook":switch(d[3]){case"date1904":ue.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ve=!1}break;case"workbookoptions":switch(d[3]){case"owcversion":break;case"height":break;case"width":break;default:ve=!1}break;case"worksheetoptions":switch(d[3]){case"visible":if(d[0].slice(-2)!=="/>")if(d[1]==="/")switch(a.slice(U,d.index)){case"SheetHidden":ee.Hidden=1;break;case"SheetVeryHidden":ee.Hidden=2;break}else U=d.index+d[0].length;break;case"header":w["!margins"]||default_margins(w["!margins"]={},"xlml"),isNaN(+parsexmltag(d[0]).Margin)||(w["!margins"].header=+parsexmltag(d[0]).Margin);break;case"footer":w["!margins"]||default_margins(w["!margins"]={},"xlml"),isNaN(+parsexmltag(d[0]).Margin)||(w["!margins"].footer=+parsexmltag(d[0]).Margin);break;case"pagemargins":var Se=parsexmltag(d[0]);w["!margins"]||default_margins(w["!margins"]={},"xlml"),isNaN(+Se.Top)||(w["!margins"].top=+Se.Top),isNaN(+Se.Left)||(w["!margins"].left=+Se.Left),isNaN(+Se.Right)||(w["!margins"].right=+Se.Right),isNaN(+Se.Bottom)||(w["!margins"].bottom=+Se.Bottom);break;case"displayrighttoleft":ue.Views||(ue.Views=[]),ue.Views[0]||(ue.Views[0]={}),ue.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":w["!outline"]||(w["!outline"]={}),w["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":w["!outline"]||(w["!outline"]={}),w["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ve=!1}break;case"pivottable":case"pivotcache":switch(d[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ve=!1}break;case"pagebreaks":switch(d[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ve=!1}break;case"autofilter":switch(d[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ve=!1}break;case"querytable":switch(d[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ve=!1}break;case"datavalidation":switch(d[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ve=!1}break;case"sorting":case"conditionalformatting":switch(d[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ve=!1}break;case"mapinfo":case"schema":case"data":switch(d[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ve=!1}break;case"smarttags":break;default:ve=!1;break}if(ve||d[3].match(/!\[CDATA/))break;if(!m[m.length-1][1])throw"Unrecognized tag: "+d[3]+"|"+m.join("|");if(m[m.length-1][0]==="customdocumentproperties"){if(d[0].slice(-2)==="/>")break;d[1]==="/"?xlml_set_custprop(ae,fe,I,a.slice(U,d.index)):(I=d,U=d.index+d[0].length);break}if(n.WTF)throw"Unrecognized tag: "+d[3]+"|"+m.join("|")}var be={};return!n.bookSheets&&!n.bookProps&&(be.Sheets=b),be.SheetNames=_,be.Workbook=ue,be.SSF=dup(table_fmt),be.Props=oe,be.Custprops=ae,be.bookType="xlml",be}function parse_xlml(t,e){switch(fix_read_opts(e=e||{}),e.type||"base64"){case"base64":return parse_xlml_xml(Base64_decode(t),e);case"binary":case"buffer":case"file":return parse_xlml_xml(t,e);case"array":return parse_xlml_xml(a2s(t),e)}}function write_props_xlml(t,e){var n=[];return t.Props&&n.push(xlml_write_docprops(t.Props,e)),t.Custprops&&n.push(xlml_write_custprops(t.Props,t.Custprops)),n.join("")}function write_wb_xlml(t){return(((t||{}).Workbook||{}).WBProps||{}).date1904?'<ExcelWorkbook xmlns="urn:schemas-microsoft-com:office:excel"><Date1904/></ExcelWorkbook>':""}function write_sty_xlml(t,e){var n=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(a,o){var l=[];l.push(writextag("NumberFormat",null,{"ss:Format":escapexml(table_fmt[a.numFmtId])}));var u={"ss:ID":"s"+(21+o)};n.push(writextag("Style",l.join(""),u))}),writextag("Styles",n.join(""))}function write_name_xlml(t){return writextag("NamedRange",null,{"ss:Name":t.Name.slice(0,6)=="_xlnm."?t.Name.slice(6):t.Name,"ss:RefersTo":"="+a1_to_rc(t.Ref,{r:0,c:0})})}function write_names_xlml(t){if(!((t||{}).Workbook||{}).Names)return"";for(var e=t.Workbook.Names,n=[],a=0;a<e.length;++a){var o=e[a];o.Sheet==null&&(o.Name.match(/^_xlfn\./)||n.push(write_name_xlml(o)))}return writextag("Names",n.join(""))}function write_ws_xlml_names(t,e,n,a){if(!t||!((a||{}).Workbook||{}).Names)return"";for(var o=a.Workbook.Names,l=[],u=0;u<o.length;++u){var d=o[u];d.Sheet==n&&(d.Name.match(/^_xlfn\./)||l.push(write_name_xlml(d)))}return l.join("")}function write_ws_xlml_wsopts(t,e,n,a){if(!t)return"";var o=[];if(t["!margins"]&&(o.push("<PageSetup>"),t["!margins"].header&&o.push(writextag("Header",null,{"x:Margin":t["!margins"].header})),t["!margins"].footer&&o.push(writextag("Footer",null,{"x:Margin":t["!margins"].footer})),o.push(writextag("PageMargins",null,{"x:Bottom":t["!margins"].bottom||"0.75","x:Left":t["!margins"].left||"0.7","x:Right":t["!margins"].right||"0.7","x:Top":t["!margins"].top||"0.75"})),o.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[n])if(a.Workbook.Sheets[n].Hidden)o.push(writextag("Visible",a.Workbook.Sheets[n].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var l=0;l<n&&!(a.Workbook.Sheets[l]&&!a.Workbook.Sheets[l].Hidden);++l);l==n&&o.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&o.push("<DisplayRightToLeft/>"),t["!protect"]&&(o.push(writetag("ProtectContents","True")),t["!protect"].objects&&o.push(writetag("ProtectObjects","True")),t["!protect"].scenarios&&o.push(writetag("ProtectScenarios","True")),t["!protect"].selectLockedCells!=null&&!t["!protect"].selectLockedCells?o.push(writetag("EnableSelection","NoSelection")):t["!protect"].selectUnlockedCells!=null&&!t["!protect"].selectUnlockedCells&&o.push(writetag("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(u){t["!protect"][u[0]]&&o.push("<"+u[1]+"/>")})),o.length==0?"":writextag("WorksheetOptions",o.join(""),{xmlns:XLMLNS.x})}function write_ws_xlml_comment(t){return t.map(function(e){var n=xlml_unfixstr(e.t||""),a=writextag("ss:Data",n,{xmlns:"http://www.w3.org/TR/REC-html40"});return writextag("Comment",a,{"ss:Author":e.a})}).join("")}function write_ws_xlml_cell(t,e,n,a,o,l,u){if(!t||t.v==null&&t.f==null)return"";var d={};if(t.f&&(d["ss:Formula"]="="+escapexml(a1_to_rc(t.f,u))),t.F&&t.F.slice(0,e.length)==e){var m=decode_cell(t.F.slice(e.length+1));d["ss:ArrayRange"]="RC:R"+(m.r==u.r?"":"["+(m.r-u.r)+"]")+"C"+(m.c==u.c?"":"["+(m.c-u.c)+"]")}if(t.l&&t.l.Target&&(d["ss:HRef"]=escapexml(t.l.Target),t.l.Tooltip&&(d["x:HRefScreenTip"]=escapexml(t.l.Tooltip))),n["!merges"])for(var y=n["!merges"],b=0;b!=y.length;++b)y[b].s.c!=u.c||y[b].s.r!=u.r||(y[b].e.c>y[b].s.c&&(d["ss:MergeAcross"]=y[b].e.c-y[b].s.c),y[b].e.r>y[b].s.r&&(d["ss:MergeDown"]=y[b].e.r-y[b].s.r));var _="",w="";switch(t.t){case"z":if(!a.sheetStubs)return"";break;case"n":_="Number",w=String(t.v);break;case"b":_="Boolean",w=t.v?"1":"0";break;case"e":_="Error",w=BErr[t.v];break;case"d":_="DateTime",w=new Date(t.v).toISOString(),t.z==null&&(t.z=t.z||table_fmt[14]);break;case"s":_="String",w=escapexlml(t.v||"");break}var E=get_cell_style(a.cellXfs,t,a);d["ss:StyleID"]="s"+(21+E),d["ss:Index"]=u.c+1;var A=t.v!=null?w:"",C=t.t=="z"?"":'<Data ss:Type="'+_+'">'+A+"</Data>";return(t.c||[]).length>0&&(C+=write_ws_xlml_comment(t.c)),writextag("Cell",C,d)}function write_ws_xlml_row(t,e){var n='<Row ss:Index="'+(t+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=pt2px(e.hpt)),e.hpx&&(n+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(n+=' ss:Hidden="1"')),n+">"}function write_ws_xlml_table(t,e,n,a){if(!t["!ref"])return"";var o=safe_decode_range(t["!ref"]),l=t["!merges"]||[],u=0,d=[];t["!cols"]&&t["!cols"].forEach(function(k,B){process_col(k);var D=!!k.width,q=col_obj_w(B,k),j={"ss:Index":B+1};D&&(j["ss:Width"]=width2px(q.width)),k.hidden&&(j["ss:Hidden"]="1"),d.push(writextag("Column",null,j))});for(var m=t["!data"]!=null,y=o.s.r;y<=o.e.r;++y){for(var b=[write_ws_xlml_row(y,(t["!rows"]||[])[y])],_=o.s.c;_<=o.e.c;++_){var w=!1;for(u=0;u!=l.length;++u)if(!(l[u].s.c>_)&&!(l[u].s.r>y)&&!(l[u].e.c<_)&&!(l[u].e.r<y)){(l[u].s.c!=_||l[u].s.r!=y)&&(w=!0);break}if(!w){var E={r:y,c:_},A=encode_col(_)+encode_row(y),C=m?(t["!data"][y]||[])[_]:t[A];b.push(write_ws_xlml_cell(C,A,t,e,n,a,E))}}b.push("</Row>"),b.length>2&&d.push(b.join(""))}return d.join("")}function write_ws_xlml(t,e,n){var a=[],o=n.SheetNames[t],l=n.Sheets[o],u=l?write_ws_xlml_names(l,e,t,n):"";return u.length>0&&a.push("<Names>"+u+"</Names>"),u=l?write_ws_xlml_table(l,e,t,n):"",u.length>0&&a.push("<Table>"+u+"</Table>"),a.push(write_ws_xlml_wsopts(l,e,t,n)),l["!autofilter"]&&a.push('<AutoFilter x:Range="'+a1_to_rc(fix_range(l["!autofilter"].ref),{r:0,c:0})+'" xmlns="urn:schemas-microsoft-com:office:excel"></AutoFilter>'),a.join("")}function write_xlml(t,e){e||(e={}),t.SSF||(t.SSF=dup(table_fmt)),t.SSF&&(make_ssf(),SSF_load_table(t.SSF),e.revssf=evert_num(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF,e.cellXfs=[],get_cell_style(e.cellXfs,{},{revssf:{General:0}}));var n=[];n.push(write_props_xlml(t,e)),n.push(write_wb_xlml(t)),n.push(""),n.push("");for(var a=0;a<t.SheetNames.length;++a)n.push(writextag("Worksheet",write_ws_xlml(a,e,t),{"ss:Name":escapexml(t.SheetNames[a])}));return n[2]=write_sty_xlml(t,e),n[3]=write_names_xlml(t),XML_HEADER+writextag("Workbook",n.join(""),{xmlns:XLMLNS.ss,"xmlns:o":XLMLNS.o,"xmlns:x":XLMLNS.x,"xmlns:ss":XLMLNS.ss,"xmlns:dt":XLMLNS.dt,"xmlns:html":XLMLNS.html})}function parse_compobj(t){var e={},n=t.content;if(n.l=28,e.AnsiUserType=n.read_shift(0,"lpstr-ansi"),e.AnsiClipboardFormat=parse_ClipboardFormatOrAnsiString(n),n.length-n.l<=4)return e;var a=n.read_shift(4);if(a==0||a>40||(n.l-=4,e.Reserved1=n.read_shift(0,"lpstr-ansi"),n.length-n.l<=4)||(a=n.read_shift(4),a!==1907505652)||(e.UnicodeClipboardFormat=parse_ClipboardFormatOrUnicodeString(n),a=n.read_shift(4),a==0||a>40))return e;n.l-=4,e.Reserved2=n.read_shift(0,"lpwstr")}var CONTINUE_RT=[60,1084,2066,2165,2175];function slurp(t,e,n,a,o){var l=a,u=[],d=n.slice(n.l,n.l+l);if(o&&o.enc&&o.enc.insitu&&d.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:o.enc.insitu(d)}u.push(d),n.l+=l;for(var m=__readUInt16LE(n,n.l),y=XLSRecordEnum[m],b=0;y!=null&&CONTINUE_RT.indexOf(m)>-1;)l=__readUInt16LE(n,n.l+2),b=n.l+4,m==2066?b+=4:(m==2165||m==2175)&&(b+=12),d=n.slice(b,n.l+4+l),u.push(d),n.l+=4+l,y=XLSRecordEnum[m=__readUInt16LE(n,n.l)];var _=bconcat(u);prep_blob(_,0);var w=0;_.lens=[];for(var E=0;E<u.length;++E)_.lens.push(w),w+=u[E].length;if(_.length<a)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+_.length+" < "+a;return e.f(_,_.length,o)}function safe_format_xf(t,e,n){if(t.t!=="z"&&t.XF){var a=0;try{a=t.z||t.XF.numFmtId||0,e.cellNF&&(t.z=table_fmt[a])}catch(l){if(e.WTF)throw l}if(!e||e.cellText!==!1)try{t.t==="e"?t.w=t.w||BErr[t.v]:a===0||a=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=SSF_general_num(t.v):t.w=SSF_general(t.v):t.w=SSF_format(a,t.v,{date1904:!!n,dateNF:e&&e.dateNF})}catch(l){if(e.WTF)throw l}if(e.cellDates&&a&&t.t=="n"&&fmt_is_date(table_fmt[a]||String(a))){var o=SSF_parse_date_code(t.v);o&&(t.t="d",t.v=new Date(o.y,o.m-1,o.d,o.H,o.M,o.S,o.u))}}}function make_cell(t,e,n){return{v:t,ixfe:e,t:n}}function parse_workbook(t,e){var n={opts:{}},a={},o={};e.dense&&(o["!data"]=[]);var l={},u={},d=null,m=[],y="",b={},_,w="",E,A,C,k,B={},D=[],q,j,J=[],Y=[],L={Sheets:[],WBProps:{date1904:!1},Views:[{}]},Z={},Q=function(we){return we<8?XLSIcv[we]:we<64&&Y[we-8]||XLSIcv[we]},oe=function(we,Re,De){var Le=Re.XF.data;if(!(!Le||!Le.patternType||!De||!De.cellStyles)){Re.s={},Re.s.patternType=Le.patternType;var tt;(tt=rgb2Hex(Q(Le.icvFore)))&&(Re.s.fgColor={rgb:tt}),(tt=rgb2Hex(Q(Le.icvBack)))&&(Re.s.bgColor={rgb:tt})}},ae=function(we,Re,De){if(!(P>1)&&!(De.sheetRows&&we.r>=De.sheetRows)){if(De.cellStyles&&Re.XF&&Re.XF.data&&oe(we,Re,De),delete Re.ixfe,delete Re.XF,_=we,w=encode_cell(we),(!u||!u.s||!u.e)&&(u={s:{r:0,c:0},e:{r:0,c:0}}),we.r<u.s.r&&(u.s.r=we.r),we.c<u.s.c&&(u.s.c=we.c),we.r+1>u.e.r&&(u.e.r=we.r+1),we.c+1>u.e.c&&(u.e.c=we.c+1),De.cellFormula&&Re.f){for(var Le=0;Le<D.length;++Le)if(!(D[Le][0].s.c>we.c||D[Le][0].s.r>we.r)&&!(D[Le][0].e.c<we.c||D[Le][0].e.r<we.r)){Re.F=encode_range(D[Le][0]),(D[Le][0].s.c!=we.c||D[Le][0].s.r!=we.r)&&delete Re.f,Re.f&&(Re.f=""+stringify_formula(D[Le][1],u,we,X,U));break}}De.dense?(o["!data"][we.r]||(o["!data"][we.r]=[]),o["!data"][we.r][we.c]=Re):o[w]=Re}},U={enc:!1,sbcch:0,snames:[],sharedf:B,arrayf:D,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!e&&!!e.cellStyles,WTF:!!e&&!!e.wtf};e.password&&(U.password=e.password);var I,x=[],T=[],M=[],O=[],z=!1,X=[];X.SheetNames=U.snames,X.sharedf=U.sharedf,X.arrayf=U.arrayf,X.names=[],X.XTI=[];var H=0,P=0,S=0,F=[],ue=[],ee;U.codepage=1200,set_cp(1200);for(var fe=!1;t.l<t.length-1;){var le=t.l,ce=t.read_shift(2);if(ce===0&&H===10)break;var pe=t.l===t.length?0:t.read_shift(2),se=XLSRecordEnum[ce];if(P==0&&[9,521,1033,2057].indexOf(ce)==-1)break;if(se&&se.f){if(e.bookSheets&&H===133&&ce!==133)break;if(H=ce,se.r===2||se.r==12){var de=t.read_shift(2);if(pe-=2,!U.enc&&de!==ce&&((de&255)<<8|de>>8)!==ce)throw new Error("rt mismatch: "+de+"!="+ce);se.r==12&&(t.l+=10,pe-=10)}var re={};if(ce===10?re=se.f(t,pe,U):re=slurp(ce,se,t,pe,U),P==0&&[9,521,1033,2057].indexOf(H)===-1)continue;switch(ce){case 34:n.opts.Date1904=L.WBProps.date1904=re;break;case 134:n.opts.WriteProtect=!0;break;case 47:if(U.enc||(t.l=0),U.enc=re,!e.password)throw new Error("File is password-protected");if(re.valid==null)throw new Error("Encryption scheme unsupported");if(!re.valid)throw new Error("Password is incorrect");break;case 92:U.lastuser=re;break;case 66:var me=Number(re);switch(me){case 21010:me=1200;break;case 32768:me=1e4;break;case 32769:me=1252;break}set_cp(U.codepage=me),fe=!0;break;case 317:U.rrtabid=re;break;case 25:U.winlocked=re;break;case 439:n.opts.RefreshAll=re;break;case 12:n.opts.CalcCount=re;break;case 16:n.opts.CalcDelta=re;break;case 17:n.opts.CalcIter=re;break;case 13:n.opts.CalcMode=re;break;case 14:n.opts.CalcPrecision=re;break;case 95:n.opts.CalcSaveRecalc=re;break;case 15:U.CalcRefMode=re;break;case 2211:n.opts.FullCalc=re;break;case 129:re.fDialog&&(o["!type"]="dialog"),re.fBelow||((o["!outline"]||(o["!outline"]={})).above=!0),re.fRight||((o["!outline"]||(o["!outline"]={})).left=!0);break;case 224:J.push(re);break;case 430:X.push([re]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(re);break;case 24:case 536:ee={Name:re.Name,Ref:stringify_formula(re.rgce,u,null,X,U)},re.itab>0&&(ee.Sheet=re.itab-1),X.names.push(ee),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(re),re.Name=="_xlnm._FilterDatabase"&&re.itab>0&&re.rgce&&re.rgce[0]&&re.rgce[0][0]&&re.rgce[0][0][0]=="PtgArea3d"&&(ue[re.itab-1]={ref:encode_range(re.rgce[0][0][1][2])});break;case 22:U.ExternCount=re;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(re),X.XTI=X.XTI.concat(re);break;case 2196:if(U.biff<8)break;ee!=null&&(ee.Comment=re[1]);break;case 18:o["!protect"]=re;break;case 19:re!==0&&U.WTF&&console.error("Password verifier: "+re);break;case 133:l[re.pos]=re,U.snames.push(re.name);break;case 10:{if(--P)break;if(u.e){if(u.e.r>0&&u.e.c>0){if(u.e.r--,u.e.c--,o["!ref"]=encode_range(u),e.sheetRows&&e.sheetRows<=u.e.r){var te=u.e.r;u.e.r=e.sheetRows-1,o["!fullref"]=o["!ref"],o["!ref"]=encode_range(u),u.e.r=te}u.e.r++,u.e.c++}x.length>0&&(o["!merges"]=x),T.length>0&&(o["!objects"]=T),M.length>0&&(o["!cols"]=M),O.length>0&&(o["!rows"]=O),L.Sheets.push(Z)}y===""?b=o:a[y]=o,o={},e.dense&&(o["!data"]=[])}break;case 9:case 521:case 1033:case 2057:{if(U.biff===8&&(U.biff={9:2,521:3,1033:4}[ce]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[re.BIFFVer]||8),U.biffguess=re.BIFFVer==0,re.BIFFVer==0&&re.dt==4096&&(U.biff=5,fe=!0,set_cp(U.codepage=28591)),U.biff==8&&re.BIFFVer==0&&re.dt==16&&(U.biff=2),P++)break;if(o={},e.dense&&(o["!data"]=[]),U.biff<8&&!fe&&(fe=!0,set_cp(U.codepage=e.codepage||1252)),U.biff<5||re.BIFFVer==0&&re.dt==4096){y===""&&(y="Sheet1"),u={s:{r:0,c:0},e:{r:0,c:0}};var ve={pos:t.l-pe,name:y};l[ve.pos]=ve,U.snames.push(y)}else y=(l[le]||{name:""}).name;re.dt==32&&(o["!type"]="chart"),re.dt==64&&(o["!type"]="macro"),x=[],T=[],U.arrayf=D=[],M=[],O=[],z=!1,Z={Hidden:(l[le]||{hs:0}).hs,name:y}}break;case 515:case 3:case 2:o["!type"]=="chart"&&(e.dense?(o["!data"][re.r]||[])[re.c]:o[encode_col(re.c)+encode_row(re.r)])&&++re.c,q={ixfe:re.ixfe,XF:J[re.ixfe]||{},v:re.val,t:"n"},S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae({c:re.c,r:re.r},q,e);break;case 5:case 517:q={ixfe:re.ixfe,XF:J[re.ixfe],v:re.val,t:re.t},S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae({c:re.c,r:re.r},q,e);break;case 638:q={ixfe:re.ixfe,XF:J[re.ixfe],v:re.rknum,t:"n"},S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae({c:re.c,r:re.r},q,e);break;case 189:for(var Se=re.c;Se<=re.C;++Se){var be=re.rkrec[Se-re.c][0];q={ixfe:be,XF:J[be],v:re.rkrec[Se-re.c][1],t:"n"},S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae({c:Se,r:re.r},q,e)}break;case 6:case 518:case 1030:{if(re.val=="String"){d=re;break}if(q=make_cell(re.val,re.cell.ixfe,re.tt),q.XF=J[q.ixfe],e.cellFormula){var _e=re.formula;if(_e&&_e[0]&&_e[0][0]&&_e[0][0][0]=="PtgExp"){var ye=_e[0][0][1][0],$e=_e[0][0][1][1],Ie=encode_cell({r:ye,c:$e});B[Ie]?q.f=""+stringify_formula(re.formula,u,re.cell,X,U):q.F=((e.dense?(o["!data"][ye]||[])[$e]:o[Ie])||{}).F}else q.f=""+stringify_formula(re.formula,u,re.cell,X,U)}S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae(re.cell,q,e),d=re}break;case 7:case 519:if(d)d.val=re,q=make_cell(re,d.cell.ixfe,"s"),q.XF=J[q.ixfe],e.cellFormula&&(q.f=""+stringify_formula(d.formula,u,d.cell,X,U)),S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae(d.cell,q,e),d=null;else throw new Error("String record expects Formula");break;case 33:case 545:{D.push(re);var Be=encode_cell(re[0].s);if(E=e.dense?(o["!data"][re[0].s.r]||[])[re[0].s.c]:o[Be],e.cellFormula&&E){if(!d||!Be||!E)break;E.f=""+stringify_formula(re[1],u,re[0],X,U),E.F=encode_range(re[0])}}break;case 1212:{if(!e.cellFormula)break;if(w){if(!d)break;B[encode_cell(d.cell)]=re[0],E=e.dense?(o["!data"][d.cell.r]||[])[d.cell.c]:o[encode_cell(d.cell)],(E||{}).f=""+stringify_formula(re[0],u,_,X,U)}}break;case 253:q=make_cell(m[re.isst].t,re.ixfe,"s"),m[re.isst].h&&(q.h=m[re.isst].h),q.XF=J[q.ixfe],S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae({c:re.c,r:re.r},q,e);break;case 513:e.sheetStubs&&(q={ixfe:re.ixfe,XF:J[re.ixfe],t:"z"},S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae({c:re.c,r:re.r},q,e));break;case 190:if(e.sheetStubs)for(var Me=re.c;Me<=re.C;++Me){var Fe=re.ixfe[Me-re.c];q={ixfe:Fe,XF:J[Fe],t:"z"},S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae({c:Me,r:re.r},q,e)}break;case 214:case 516:case 4:q=make_cell(re.val,re.ixfe,"s"),q.XF=J[q.ixfe],S>0&&(q.z=F[q.ixfe>>8&63]),safe_format_xf(q,e,n.opts.Date1904),ae({c:re.c,r:re.r},q,e);break;case 0:case 512:P===1&&(u=re);break;case 252:m=re;break;case 1054:if(U.biff==4){F[S++]=re[1];for(var Ve=0;Ve<S+163&&table_fmt[Ve]!=re[1];++Ve);Ve>=163&&SSF__load(re[1],S+163)}else SSF__load(re[1],re[0]);break;case 30:{F[S++]=re;for(var Oe=0;Oe<S+163&&table_fmt[Oe]!=re;++Oe);Oe>=163&&SSF__load(re,S+163)}break;case 229:x=x.concat(re);break;case 93:T[re.cmo[0]]=U.lastobj=re;break;case 438:U.lastobj.TxO=re;break;case 127:U.lastobj.ImData=re;break;case 440:for(k=re[0].s.r;k<=re[0].e.r;++k)for(C=re[0].s.c;C<=re[0].e.c;++C)E=e.dense?(o["!data"][k]||[])[C]:o[encode_cell({c:C,r:k})],E&&(E.l=re[1]);break;case 2048:for(k=re[0].s.r;k<=re[0].e.r;++k)for(C=re[0].s.c;C<=re[0].e.c;++C)E=e.dense?(o["!data"][k]||[])[C]:o[encode_cell({c:C,r:k})],E&&E.l&&(E.l.Tooltip=re[1]);break;case 28:{if(U.biff<=5&&U.biff>=2)break;E=e.dense?(o["!data"][re[0].r]||[])[re[0].c]:o[encode_cell(re[0])];var ge=T[re[2]];E||(e.dense?(o["!data"][re[0].r]||(o["!data"][re[0].r]=[]),E=o["!data"][re[0].r][re[0].c]={t:"z"}):E=o[encode_cell(re[0])]={t:"z"},u.e.r=Math.max(u.e.r,re[0].r),u.s.r=Math.min(u.s.r,re[0].r),u.e.c=Math.max(u.e.c,re[0].c),u.s.c=Math.min(u.s.c,re[0].c)),E.c||(E.c=[]),A={a:re[1],t:ge.TxO.t},E.c.push(A)}break;case 2173:update_xfext(J[re.ixfe],re.ext);break;case 125:{if(!U.cellStyles)break;for(;re.e>=re.s;)M[re.e--]={width:re.w/256,level:re.level||0,hidden:!!(re.flags&1)},z||(z=!0,find_mdw_colw(re.w/256)),process_col(M[re.e+1])}break;case 520:{var ie={};re.level!=null&&(O[re.r]=ie,ie.level=re.level),re.hidden&&(O[re.r]=ie,ie.hidden=!0),re.hpt&&(O[re.r]=ie,ie.hpt=re.hpt,ie.hpx=pt2px(re.hpt))}break;case 38:case 39:case 40:case 41:o["!margins"]||default_margins(o["!margins"]={}),o["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ce]]=re;break;case 161:o["!margins"]||default_margins(o["!margins"]={}),o["!margins"].header=re.header,o["!margins"].footer=re.footer;break;case 574:re.RTL&&(L.Views[0].RTL=!0);break;case 146:Y=re;break;case 2198:I=re;break;case 140:j=re;break;case 442:y?Z.CodeName=re||Z.name:L.WBProps.CodeName=re||"ThisWorkbook";break}}else se||console.error("Missing Info for XLS Record 0x"+ce.toString(16)),t.l+=pe}return n.SheetNames=keys(l).sort(function(he,we){return Number(he)-Number(we)}).map(function(he){return l[he].name}),e.bookSheets||(n.Sheets=a),!n.SheetNames.length&&b["!ref"]?(n.SheetNames.push("Sheet1"),n.Sheets&&(n.Sheets.Sheet1=b)):n.Preamble=b,n.Sheets&&ue.forEach(function(he,we){n.Sheets[n.SheetNames[we]]["!autofilter"]=he}),n.Strings=m,n.SSF=dup(table_fmt),U.enc&&(n.Encryption=U.enc),I&&(n.Themes=I),n.Metadata={},j!==void 0&&(n.Metadata.Country=j),X.names.length>0&&(L.Names=X.names),n.Workbook=L,n}var PSCLSID={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function parse_xls_props(t,e,n){var a=CFB.find(t,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var o=parse_PropertySetStream(a,DocSummaryPIDDSI,PSCLSID.DSI);for(var l in o)e[l]=o[l]}catch(y){if(n.WTF)throw y}var u=CFB.find(t,"/!SummaryInformation");if(u&&u.size>0)try{var d=parse_PropertySetStream(u,SummaryPIDSI,PSCLSID.SI);for(var m in d)e[m]==null&&(e[m]=d[m])}catch(y){if(n.WTF)throw y}e.HeadingPairs&&e.TitlesOfParts&&(load_props_pairs(e.HeadingPairs,e.TitlesOfParts,e,n),delete e.HeadingPairs,delete e.TitlesOfParts)}function write_xls_props(t,e){var n=[],a=[],o=[],l=0,u,d=evert_key(DocSummaryPIDDSI,"n"),m=evert_key(SummaryPIDSI,"n");if(t.Props)for(u=keys(t.Props),l=0;l<u.length;++l)(Object.prototype.hasOwnProperty.call(d,u[l])?n:Object.prototype.hasOwnProperty.call(m,u[l])?a:o).push([u[l],t.Props[u[l]]]);if(t.Custprops)for(u=keys(t.Custprops),l=0;l<u.length;++l)Object.prototype.hasOwnProperty.call(t.Props||{},u[l])||(Object.prototype.hasOwnProperty.call(d,u[l])?n:Object.prototype.hasOwnProperty.call(m,u[l])?a:o).push([u[l],t.Custprops[u[l]]]);var y=[];for(l=0;l<o.length;++l)XLSPSSkip.indexOf(o[l][0])>-1||PseudoPropsPairs.indexOf(o[l][0])>-1||o[l][1]!=null&&y.push(o[l]);a.length&&CFB.utils.cfb_add(e,"/SummaryInformation",write_PropertySetStream(a,PSCLSID.SI,m,SummaryPIDSI)),(n.length||y.length)&&CFB.utils.cfb_add(e,"/DocumentSummaryInformation",write_PropertySetStream(n,PSCLSID.DSI,d,DocSummaryPIDDSI,y.length?y:null,PSCLSID.UDI))}function parse_xlscfb(t,e){e||(e={}),fix_read_opts(e),reset_cp(),e.codepage&&set_ansi(e.codepage);var n,a;if(t.FullPaths){if(CFB.find(t,"/encryption"))throw new Error("File is password-protected");n=CFB.find(t,"!CompObj"),a=CFB.find(t,"/Workbook")||CFB.find(t,"/Book")}else{switch(e.type){case"base64":t=s2a(Base64_decode(t));break;case"binary":t=s2a(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}prep_blob(t,0),a={content:t}}var o,l;if(n&&parse_compobj(n),e.bookProps&&!e.bookSheets)o={};else{var u=has_buf?"buffer":"array";if(a&&a.content)o=parse_workbook(a.content,e);else if((l=CFB.find(t,"PerfectOffice_MAIN"))&&l.content)o=WK_.to_workbook(l.content,(e.type=u,e));else if((l=CFB.find(t,"NativeContent_MAIN"))&&l.content)o=WK_.to_workbook(l.content,(e.type=u,e));else throw(l=CFB.find(t,"MN0"))&&l.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");e.bookVBA&&t.FullPaths&&CFB.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(o.vbaraw=make_vba_xls(t))}var d={};return t.FullPaths&&parse_xls_props(t,d,e),o.Props=o.Custprops=d,e.bookFiles&&(o.cfb=t),o}function write_xlscfb(t,e){var n=e||{},a=CFB.utils.cfb_new({root:"R"}),o="/Workbook";switch(n.bookType||"xls"){case"xls":n.bookType="biff8";case"xla":n.bookType||(n.bookType="xla");case"biff8":o="/Workbook",n.biff=8;break;case"biff5":o="/Book",n.biff=5;break;default:throw new Error("invalid type "+n.bookType+" for XLS CFB")}return CFB.utils.cfb_add(a,o,write_biff_buf(t,n)),n.biff==8&&(t.Props||t.Custprops)&&write_xls_props(t,a),n.biff==8&&t.vbaraw&&fill_vba_xls(a,CFB.read(t.vbaraw,{type:typeof t.vbaraw=="string"?"binary":"buffer"})),a}var XLSBRecordEnum={0:{f:parse_BrtRowHdr},1:{f:parse_BrtCellBlank},2:{f:parse_BrtCellRk},3:{f:parse_BrtCellError},4:{f:parse_BrtCellBool},5:{f:parse_BrtCellReal},6:{f:parse_BrtCellSt},7:{f:parse_BrtCellIsst},8:{f:parse_BrtFmlaString},9:{f:parse_BrtFmlaNum},10:{f:parse_BrtFmlaBool},11:{f:parse_BrtFmlaError},12:{f:parse_BrtShortBlank},13:{f:parse_BrtShortRk},14:{f:parse_BrtShortError},15:{f:parse_BrtShortBool},16:{f:parse_BrtShortReal},17:{f:parse_BrtShortSt},18:{f:parse_BrtShortIsst},19:{f:parse_RichStr},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:parse_BrtName},40:{},42:{},43:{f:parse_BrtFont},44:{f:parse_BrtFmt},45:{f:parse_BrtFill},46:{f:parse_BrtBorder},47:{f:parse_BrtXF},48:{},49:{f:parse_Int32LE},50:{},51:{f:parse_BrtMdb},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:parse_ColInfo},62:{f:parse_BrtCellRString},63:{f:parse_BrtCalcChainItem$},64:{f:parse_BrtDVal},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:parsenoop,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:parse_BrtBeginWsView},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:parse_BrtWsProp},148:{f:parse_BrtWsDim,p:16},151:{f:parse_BrtPane},152:{},153:{f:parse_BrtWbProp},154:{},155:{},156:{f:parse_BrtBundleSh},157:{},158:{},159:{T:1,f:parse_BrtBeginSst},160:{T:-1},161:{T:1,f:parse_UncheckedRfX},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:parse_BrtMergeCell},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:parse_BrtMdtinfo},336:{T:-1},337:{f:parse_BrtBeginEsmdb,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:parse_RelID},357:{},358:{},359:{},360:{T:1},361:{},362:{f:parse_ExternSheet},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:parse_BrtArrFmla},427:{f:parse_BrtShrFmla},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:parse_BrtMargins},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:parse_BrtWsFmtInfo},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:parse_BrtHLink},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:parse_RelID},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:parse_BrtCommentAuthor},633:{T:1},634:{T:-1},635:{T:1,f:parse_BrtBeginComment},636:{T:-1},637:{f:parse_BrtCommentText},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:parse_BrtCsProp},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:parse_BrtDVal14},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},XLSRecordEnum={6:{f:parse_Formula},10:{f:parsenoop2},12:{f:parseuint16},13:{f:parseuint16},14:{f:parsebool},15:{f:parsebool},16:{f:parse_Xnum},17:{f:parsebool},18:{f:parsebool},19:{f:parseuint16},20:{f:parse_XLHeaderFooter},21:{f:parse_XLHeaderFooter},23:{f:parse_ExternSheet},24:{f:parse_Lbl},25:{f:parsebool},26:{},27:{},28:{f:parse_Note},29:{},34:{f:parsebool},35:{f:parse_ExternName},38:{f:parse_Xnum},39:{f:parse_Xnum},40:{f:parse_Xnum},41:{f:parse_Xnum},42:{f:parsebool},43:{f:parsebool},47:{f:parse_FilePass},49:{f:parse_Font},51:{f:parseuint16},60:{},61:{f:parse_Window1},64:{f:parsebool},65:{f:parse_Pane},66:{f:parseuint16},77:{},80:{},81:{},82:{},85:{f:parseuint16},89:{},90:{},91:{},92:{f:parse_WriteAccess},93:{f:parse_Obj},94:{},95:{f:parsebool},96:{},97:{},99:{f:parsebool},125:{f:parse_ColInfo},128:{f:parse_Guts},129:{f:parse_WsBool},130:{f:parseuint16},131:{f:parsebool},132:{f:parsebool},133:{f:parse_BoundSheet8},134:{},140:{f:parse_Country},141:{f:parseuint16},144:{},146:{f:parse_Palette},151:{},152:{},153:{},154:{},155:{},156:{f:parseuint16},157:{},158:{},160:{f:parse_Scl},161:{f:parse_Setup},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:parse_MulRk},190:{f:parse_MulBlank},193:{f:parsenoop2},197:{},198:{},199:{},200:{},201:{},202:{f:parsebool},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:parseuint16},220:{},221:{f:parsebool},222:{},224:{f:parse_XF},225:{f:parse_InterfaceHdr},226:{f:parsenoop2},227:{},229:{f:parse_MergeCells},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:parse_SST},253:{f:parse_LabelSst},255:{f:parse_ExtSST},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:parseuint16a},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:parsebool},353:{f:parsenoop2},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:parse_SupBook},431:{f:parsebool},432:{},433:{},434:{},437:{},438:{f:parse_TxO},439:{f:parsebool},440:{f:parse_HLink},441:{},442:{f:parse_XLUnicodeString},443:{},444:{f:parseuint16},445:{},446:{},448:{f:parsenoop2},449:{f:parse_RecalcId,r:2},450:{f:parsenoop2},512:{f:parse_Dimensions},513:{f:parse_Blank},515:{f:parse_Number},516:{f:parse_Label},517:{f:parse_BoolErr},519:{f:parse_String},520:{f:parse_Row},523:{},545:{f:parse_Array},549:{f:parse_DefaultRowHeight},566:{},574:{f:parse_Window2},638:{f:parse_RK},659:{},1048:{},1054:{f:parse_Format},1084:{},1212:{f:parse_ShrFmla},2048:{f:parse_HLinkTooltip},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:parse_BOF},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:parsenoop2},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:parse_XFCRC,r:12},2173:{f:parse_XFExt,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:parsebool,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:parse_NameCmt,r:12},2197:{},2198:{f:parse_Theme,r:12},2199:{},2200:{},2201:{},2202:{f:parse_MTRSettings,r:12},2203:{f:parsenoop2},2204:{},2205:{},2206:{},2207:{},2211:{f:parse_ForceFullCalculation},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:parseuint16},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:parse_ShtProps},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:parse_ClrtClient},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:parse_Dimensions},1:{},2:{f:parse_BIFF2INT},3:{f:parse_BIFF2NUM},4:{f:parse_BIFF2STR},5:{f:parse_BoolErr},7:{f:parse_BIFF2STRING},8:{},9:{f:parse_BOF},11:{},22:{f:parseuint16},30:{f:parse_BIFF2Format},31:{},32:{},33:{f:parse_Array},36:{},37:{f:parse_DefaultRowHeight},50:{f:parse_BIFF2FONTXTRA},62:{},52:{},67:{},68:{f:parseuint16},69:{},86:{},126:{},127:{f:parse_ImData},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:parse_RString},223:{},234:{},354:{},421:{},518:{f:parse_Formula},521:{f:parse_BOF},536:{f:parse_Lbl},547:{f:parse_ExternName},561:{},579:{},1030:{f:parse_Formula},1033:{f:parse_BOF},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},101:{},102:{},105:{},106:{},107:{},109:{},112:{},114:{},29282:{}};function write_biff_rec(t,e,n,a){var o=e;if(!isNaN(o)){var l=a||(n||[]).length||0,u=t.next(4);u.write_shift(2,o),u.write_shift(2,l),l>0&&is_buf(n)&&t.push(n)}}function write_biff_continue(t,e,n,a){var o=a||(n||[]).length||0;if(o<=8224)return write_biff_rec(t,e,n,o);var l=e;if(!isNaN(l)){for(var u=n.parts||[],d=0,m=0,y=0;y+(u[d]||8224)<=8224;)y+=u[d]||8224,d++;var b=t.next(4);for(b.write_shift(2,l),b.write_shift(2,y),t.push(n.slice(m,m+y)),m+=y;m<o;){for(b=t.next(4),b.write_shift(2,60),y=0;y+(u[d]||8224)<=8224;)y+=u[d]||8224,d++;b.write_shift(2,y),t.push(n.slice(m,m+y)),m+=y}}}function write_BIFF2Cell(t,e,n){return t||(t=new_buf(7)),t.write_shift(2,e),t.write_shift(2,n),t.write_shift(2,0),t.write_shift(1,0),t}function write_BIFF2BERR(t,e,n,a){var o=new_buf(9);return write_BIFF2Cell(o,t,e),write_Bes(n,a||"b",o),o}function write_BIFF2LABEL(t,e,n){var a=new_buf(8+2*n.length);return write_BIFF2Cell(a,t,e),a.write_shift(1,n.length),a.write_shift(n.length,n,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function write_ws_biff2_cell(t,e,n,a){if(e.v!=null)switch(e.t){case"d":case"n":var o=e.t=="d"?datenum(parseDate(e.v)):e.v;o==(o|0)&&o>=0&&o<65536?write_biff_rec(t,2,write_BIFF2INT(n,a,o)):write_biff_rec(t,3,write_BIFF2NUM(n,a,o));return;case"b":case"e":write_biff_rec(t,5,write_BIFF2BERR(n,a,e.v,e.t));return;case"s":case"str":write_biff_rec(t,4,write_BIFF2LABEL(n,a,e.v==null?"":String(e.v).slice(0,255)));return}write_biff_rec(t,1,write_BIFF2Cell(null,n,a))}function write_ws_biff2(t,e,n,a){var o=e["!data"]!=null,l=safe_decode_range(e["!ref"]||"A1"),u="",d=[];if(l.e.c>255||l.e.r>16383){if(a.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");l.e.c=Math.min(l.e.c,255),l.e.r=Math.min(l.e.c,16383)}for(var m=[],y=l.s.c;y<=l.e.c;++y)d[y]=encode_col(y);for(var b=l.s.r;b<=l.e.r;++b)for(o&&(m=e["!data"][b]||[]),u=encode_row(b),y=l.s.c;y<=l.e.c;++y){var _=o?m[y]:e[d[y]+u];_&&write_ws_biff2_cell(t,_,b,y)}}function write_biff2_buf(t,e){for(var n=e||{},a=buf_array(),o=0,l=0;l<t.SheetNames.length;++l)t.SheetNames[l]==n.sheet&&(o=l);if(o==0&&n.sheet&&t.SheetNames[0]!=n.sheet)throw new Error("Sheet not found: "+n.sheet);return write_biff_rec(a,n.biff==4?1033:n.biff==3?521:9,write_BOF(t,16,n)),write_ws_biff2(a,t.Sheets[t.SheetNames[o]],o,n),write_biff_rec(a,10),a.end()}function write_FONTS_biff8(t,e,n){write_biff_rec(t,49,write_Font({sz:12,color:{theme:1},name:"Arial",family:2,scheme:"minor"},n))}function write_FMTS_biff8(t,e,n){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var o=a[0];o<=a[1];++o)e[o]!=null&&write_biff_rec(t,1054,write_Format(o,e[o],n))})}function write_FEAT(t,e){var n=new_buf(19);n.write_shift(4,2151),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,1),n.write_shift(4,0),write_biff_rec(t,2151,n),n=new_buf(39),n.write_shift(4,2152),n.write_shift(4,0),n.write_shift(4,0),n.write_shift(2,3),n.write_shift(1,0),n.write_shift(4,0),n.write_shift(2,1),n.write_shift(4,4),n.write_shift(2,0),write_Ref8U(safe_decode_range(e["!ref"]||"A1"),n),n.write_shift(4,4),write_biff_rec(t,2152,n)}function write_CELLXFS_biff8(t,e){for(var n=0;n<16;++n)write_biff_rec(t,224,write_XF({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(a){write_biff_rec(t,224,write_XF(a,0,e))})}function write_ws_biff8_hlinks(t,e){for(var n=0;n<e["!links"].length;++n){var a=e["!links"][n];write_biff_rec(t,440,write_HLink(a)),a[1].Tooltip&&write_biff_rec(t,2048,write_HLinkTooltip(a))}delete e["!links"]}function write_ws_cols_biff8(t,e){if(e){var n=0;e.forEach(function(a,o){++n<=256&&a&&write_biff_rec(t,125,write_ColInfo(col_obj_w(o,a),o))})}}function write_ws_biff8_cell(t,e,n,a,o){var l=16+get_cell_style(o.cellXfs,e,o);if(e.v==null&&!e.bf){write_biff_rec(t,513,write_XLSCell(n,a,l));return}if(e.bf)write_biff_rec(t,6,write_Formula(e,n,a,o,l));else switch(e.t){case"d":case"n":var u=e.t=="d"?datenum(parseDate(e.v)):e.v;write_biff_rec(t,515,write_Number(n,a,u,l));break;case"b":case"e":write_biff_rec(t,517,write_BoolErr(n,a,e.v,l,o,e.t));break;case"s":case"str":if(o.bookSST){var d=get_sst_id(o.Strings,e.v==null?"":String(e.v),o.revStrings);write_biff_rec(t,253,write_LabelSst(n,a,d,l))}else write_biff_rec(t,516,write_Label(n,a,(e.v==null?"":String(e.v)).slice(0,255),l,o));break;default:write_biff_rec(t,513,write_XLSCell(n,a,l))}}function write_ws_biff8(t,e,n){var a=buf_array(),o=n.SheetNames[t],l=n.Sheets[o]||{},u=(n||{}).Workbook||{},d=(u.Sheets||[])[t]||{},m=l["!data"]!=null,y=e.biff==8,b,_="",w=[],E=safe_decode_range(l["!ref"]||"A1"),A=y?65536:16384;if(E.e.c>255||E.e.r>=A){if(e.WTF)throw new Error("Range "+(l["!ref"]||"A1")+" exceeds format limit A1:IV16384");E.e.c=Math.min(E.e.c,255),E.e.r=Math.min(E.e.c,A-1)}write_biff_rec(a,2057,write_BOF(n,16,e)),write_biff_rec(a,13,writeuint16(1)),write_biff_rec(a,12,writeuint16(100)),write_biff_rec(a,15,writebool(!0)),write_biff_rec(a,17,writebool(!1)),write_biff_rec(a,16,write_Xnum(.001)),write_biff_rec(a,95,writebool(!0)),write_biff_rec(a,42,writebool(!1)),write_biff_rec(a,43,writebool(!1)),write_biff_rec(a,130,writeuint16(1)),write_biff_rec(a,128,write_Guts([0,0])),write_biff_rec(a,131,writebool(!1)),write_biff_rec(a,132,writebool(!1)),y&&write_ws_cols_biff8(a,l["!cols"]),write_biff_rec(a,512,write_Dimensions(E,e)),y&&(l["!links"]=[]);for(var C=[],k=[],B=E.s.c;B<=E.e.c;++B)w[B]=encode_col(B);for(var D=E.s.r;D<=E.e.r;++D)for(m&&(k=l["!data"][D]||[]),_=encode_row(D),B=E.s.c;B<=E.e.c;++B){b=w[B]+_;var q=m?k[B]:l[b];q&&(write_ws_biff8_cell(a,q,D,B,e),y&&q.l&&l["!links"].push([b,q.l]),y&&q.c&&C.push([b,q.c]))}var j=d.CodeName||d.name||o;return y&&write_biff_rec(a,574,write_Window2((u.Views||[])[0])),y&&(l["!merges"]||[]).length&&write_biff_rec(a,229,write_MergeCells(l["!merges"])),y&&write_ws_biff8_hlinks(a,l),write_biff_rec(a,442,write_XLUnicodeString(j)),y&&write_FEAT(a,l),write_biff_rec(a,10),a.end()}function write_biff8_global(t,e,n){var a=buf_array(),o=(t||{}).Workbook||{},l=o.Sheets||[],u=o.WBProps||{},d=n.biff==8,m=n.biff==5;if(write_biff_rec(a,2057,write_BOF(t,5,n)),n.bookType=="xla"&&write_biff_rec(a,135),write_biff_rec(a,225,d?writeuint16(1200):null),write_biff_rec(a,193,writezeroes(2)),m&&write_biff_rec(a,191),m&&write_biff_rec(a,192),write_biff_rec(a,226),write_biff_rec(a,92,write_WriteAccess("SheetJS",n)),write_biff_rec(a,66,writeuint16(d?1200:1252)),d&&write_biff_rec(a,353,writeuint16(0)),d&&write_biff_rec(a,448),write_biff_rec(a,317,write_RRTabId(t.SheetNames.length)),d&&t.vbaraw&&write_biff_rec(a,211),d&&t.vbaraw){var y=u.CodeName||"ThisWorkbook";write_biff_rec(a,442,write_XLUnicodeString(y))}write_biff_rec(a,156,writeuint16(17)),write_biff_rec(a,25,writebool(!1)),write_biff_rec(a,18,writebool(!1)),write_biff_rec(a,19,writeuint16(0)),d&&write_biff_rec(a,431,writebool(!1)),d&&write_biff_rec(a,444,writeuint16(0)),write_biff_rec(a,61,write_Window1()),write_biff_rec(a,64,writebool(!1)),write_biff_rec(a,141,writeuint16(0)),write_biff_rec(a,34,writebool(safe1904(t)=="true")),write_biff_rec(a,14,writebool(!0)),d&&write_biff_rec(a,439,writebool(!1)),write_biff_rec(a,218,writeuint16(0)),write_FONTS_biff8(a,t,n),write_FMTS_biff8(a,t.SSF,n),write_CELLXFS_biff8(a,n),d&&write_biff_rec(a,352,writebool(!1));var b=a.end(),_=buf_array();d&&write_biff_rec(_,140,write_Country()),d&&n.Strings&&write_biff_continue(_,252,write_SST(n.Strings)),write_biff_rec(_,10);var w=_.end(),E=buf_array(),A=0,C=0;for(C=0;C<t.SheetNames.length;++C)A+=(d?12:11)+(d?2:1)*t.SheetNames[C].length;var k=b.length+A+w.length;for(C=0;C<t.SheetNames.length;++C){var B=l[C]||{};write_biff_rec(E,133,write_BoundSheet8({pos:k,hs:B.Hidden||0,dt:0,name:t.SheetNames[C]},n)),k+=e[C].length}var D=E.end();if(A!=D.length)throw new Error("BS8 "+A+" != "+D.length);var q=[];return b.length&&q.push(b),D.length&&q.push(D),w.length&&q.push(w),bconcat(q)}function write_biff8_buf(t,e){var n=e||{},a=[];t&&!t.SSF&&(t.SSF=dup(table_fmt)),t&&t.SSF&&(make_ssf(),SSF_load_table(t.SSF),n.revssf=evert_num(t.SSF),n.revssf[t.SSF[65535]]=0,n.ssf=t.SSF),n.Strings=[],n.Strings.Count=0,n.Strings.Unique=0,fix_write_opts(n),n.cellXfs=[],get_cell_style(n.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={});for(var o=0;o<t.SheetNames.length;++o)a[a.length]=write_ws_biff8(o,n,t);return a.unshift(write_biff8_global(t,a,n)),bconcat(a)}function write_biff_buf(t,e){for(var n=0;n<=t.SheetNames.length;++n){var a=t.Sheets[t.SheetNames[n]];if(!(!a||!a["!ref"])){var o=decode_range(a["!ref"]);o.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+t.SheetNames[n]+"' extends beyond column IV (255).  Data may be lost.")}}var l=e||{};switch(l.biff||2){case 8:case 5:return write_biff8_buf(t,e);case 4:case 3:case 2:return write_biff2_buf(t,e)}throw new Error("invalid type "+l.bookType+" for BIFF")}function html_to_sheet(t,e){var n=e||{},a=n.dense!=null?n.dense:DENSE,o={};a&&(o["!data"]=[]),t=t.replace(/<!--.*?-->/g,"");var l=t.match(/<table/i);if(!l)throw new Error("Invalid HTML: could not find <table>");var u=t.match(/<\/table/i),d=l.index,m=u&&u.index||t.length,y=split_regex(t.slice(d,m),/(:?<tr[^>]*>)/i,"<tr>"),b=-1,_=0,w=0,E=0,A={s:{r:1e7,c:1e7},e:{r:0,c:0}},C=[];for(d=0;d<y.length;++d){var k=y[d].trim(),B=k.slice(0,3).toLowerCase();if(B=="<tr"){if(++b,n.sheetRows&&n.sheetRows<=b){--b;break}_=0;continue}if(!(B!="<td"&&B!="<th")){var D=k.split(/<\/t[dh]>/i);for(m=0;m<D.length;++m){var q=D[m].trim();if(q.match(/<t[dh]/i)){for(var j=q,J=0;j.charAt(0)=="<"&&(J=j.indexOf(">"))>-1;)j=j.slice(J+1);for(var Y=0;Y<C.length;++Y){var L=C[Y];L.s.c==_&&L.s.r<b&&b<=L.e.r&&(_=L.e.c+1,Y=-1)}var Z=parsexmltag(q.slice(0,q.indexOf(">")));E=Z.colspan?+Z.colspan:1,((w=+Z.rowspan)>1||E>1)&&C.push({s:{r:b,c:_},e:{r:b+(w||1)-1,c:_+E-1}});var Q=Z.t||Z["data-t"]||"";if(!j.length){_+=E;continue}if(j=htmldecode(j),A.s.r>b&&(A.s.r=b),A.e.r<b&&(A.e.r=b),A.s.c>_&&(A.s.c=_),A.e.c<_&&(A.e.c=_),!j.length){_+=E;continue}var oe={t:"s",v:j};n.raw||!j.trim().length||Q=="s"||(j==="TRUE"?oe={t:"b",v:!0}:j==="FALSE"?oe={t:"b",v:!1}:isNaN(fuzzynum(j))?isNaN(fuzzydate(j).getDate())||(oe={t:"d",v:parseDate(j)},n.cellDates||(oe={t:"n",v:datenum(oe.v)}),oe.z=n.dateNF||table_fmt[14]):oe={t:"n",v:fuzzynum(j)}),a?(o["!data"][b]||(o["!data"][b]=[]),o["!data"][b][_]=oe):o[encode_cell({r:b,c:_})]=oe,_+=E}}}}return o["!ref"]=encode_range(A),C.length&&(o["!merges"]=C),o}function make_html_row(t,e,n,a){for(var o=t["!merges"]||[],l=[],u={},d=t["!data"]!=null,m=e.s.c;m<=e.e.c;++m){for(var y=0,b=0,_=0;_<o.length;++_)if(!(o[_].s.r>n||o[_].s.c>m)&&!(o[_].e.r<n||o[_].e.c<m)){if(o[_].s.r<n||o[_].s.c<m){y=-1;break}y=o[_].e.r-o[_].s.r+1,b=o[_].e.c-o[_].s.c+1;break}if(!(y<0)){var w=encode_col(m)+encode_row(n),E=d?(t["!data"][n]||[])[m]:t[w],A=E&&E.v!=null&&(E.h||escapehtml(E.w||(format_cell(E),E.w)||""))||"";u={},y>1&&(u.rowspan=y),b>1&&(u.colspan=b),a.editable?A='<span contenteditable="true">'+A+"</span>":E&&(u["data-t"]=E&&E.t||"z",E.v!=null&&(u["data-v"]=E.v),E.z!=null&&(u["data-z"]=E.z),E.l&&(E.l.Target||"#").charAt(0)!="#"&&(A='<a href="'+E.l.Target+'">'+A+"</a>")),u.id=(a.id||"sjs")+"-"+w,l.push(writextag("td",A,u))}}var C="<tr>";return C+l.join("")+"</tr>"}var HTML_BEGIN='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',HTML_END="</body></html>";function html_to_workbook(t,e){var n=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!n||n.length==0)throw new Error("Invalid HTML: could not find <table>");if(n.length==1){var a=sheet_to_workbook(html_to_sheet(n[0],e),e);return a.bookType="html",a}var o=book_new();return n.forEach(function(l,u){book_append_sheet(o,html_to_sheet(l,e),"Sheet"+(u+1))}),o.bookType="html",o}function make_html_preamble(t,e,n){var a=[];return a.join("")+"<table"+(n&&n.id?' id="'+n.id+'"':"")+">"}function sheet_to_html(t,e){var n=e||{},a=n.header!=null?n.header:HTML_BEGIN,o=n.footer!=null?n.footer:HTML_END,l=[a],u=decode_range(t["!ref"]);l.push(make_html_preamble(t,u,n));for(var d=u.s.r;d<=u.e.r;++d)l.push(make_html_row(t,u,d,n));return l.push("</table>"+o),l.join("")}function sheet_add_dom(t,e,n){var a=e.rows;if(!a)throw"Unsupported origin when "+e.tagName+" is not a TABLE";var o=n||{},l=t["!data"]!=null,u=0,d=0;if(o.origin!=null)if(typeof o.origin=="number")u=o.origin;else{var m=typeof o.origin=="string"?decode_cell(o.origin):o.origin;u=m.r,d=m.c}var y=Math.min(o.sheetRows||1e7,a.length),b={s:{r:0,c:0},e:{r:u,c:d}};if(t["!ref"]){var _=decode_range(t["!ref"]);b.s.r=Math.min(b.s.r,_.s.r),b.s.c=Math.min(b.s.c,_.s.c),b.e.r=Math.max(b.e.r,_.e.r),b.e.c=Math.max(b.e.c,_.e.c),u==-1&&(b.e.r=u=_.e.r+1)}var w=[],E=0,A=t["!rows"]||(t["!rows"]=[]),C=0,k=0,B=0,D=0,q=0,j=0;for(t["!cols"]||(t["!cols"]=[]);C<a.length&&k<y;++C){var J=a[C];if(is_dom_element_hidden(J)){if(o.display)continue;A[k]={hidden:!0}}var Y=J.cells;for(B=D=0;B<Y.length;++B){var L=Y[B];if(!(o.display&&is_dom_element_hidden(L))){var Z=L.hasAttribute("data-v")?L.getAttribute("data-v"):L.hasAttribute("v")?L.getAttribute("v"):htmldecode(L.innerHTML),Q=L.getAttribute("data-z")||L.getAttribute("z");for(E=0;E<w.length;++E){var oe=w[E];oe.s.c==D+d&&oe.s.r<k+u&&k+u<=oe.e.r&&(D=oe.e.c+1-d,E=-1)}j=+L.getAttribute("colspan")||1,((q=+L.getAttribute("rowspan")||1)>1||j>1)&&w.push({s:{r:k+u,c:D+d},e:{r:k+u+(q||1)-1,c:D+d+(j||1)-1}});var ae={t:"s",v:Z},U=L.getAttribute("data-t")||L.getAttribute("t")||"";Z!=null&&(Z.length==0?ae.t=U||"z":o.raw||Z.trim().length==0||U=="s"||(Z==="TRUE"?ae={t:"b",v:!0}:Z==="FALSE"?ae={t:"b",v:!1}:isNaN(fuzzynum(Z))?isNaN(fuzzydate(Z).getDate())||(ae={t:"d",v:parseDate(Z)},o.cellDates||(ae={t:"n",v:datenum(ae.v)}),ae.z=o.dateNF||table_fmt[14]):ae={t:"n",v:fuzzynum(Z)})),ae.z===void 0&&Q!=null&&(ae.z=Q);var I="",x=L.getElementsByTagName("A");if(x&&x.length)for(var T=0;T<x.length&&!(x[T].hasAttribute("href")&&(I=x[T].getAttribute("href"),I.charAt(0)!="#"));++T);I&&I.charAt(0)!="#"&&I.slice(0,11).toLowerCase()!="javascript:"&&(ae.l={Target:I}),l?(t["!data"][k+u]||(t["!data"][k+u]=[]),t["!data"][k+u][D+d]=ae):t[encode_cell({c:D+d,r:k+u})]=ae,b.e.c<D+d&&(b.e.c=D+d),D+=j}}++k}return w.length&&(t["!merges"]=(t["!merges"]||[]).concat(w)),b.e.r=Math.max(b.e.r,k-1+u),t["!ref"]=encode_range(b),k>=y&&(t["!fullref"]=encode_range((b.e.r=a.length-C+k-1+u,b))),t}function parse_dom_table(t,e){var n=e||{},a={};return n.dense&&(a["!data"]=[]),sheet_add_dom(a,t,e)}function table_to_book(t,e){var n=sheet_to_workbook(parse_dom_table(t,e),e);return n}function is_dom_element_hidden(t){var e="",n=get_get_computed_style_function(t);return n&&(e=n(t).getPropertyValue("display")),e||(e=t.style&&t.style.display),e==="none"}function get_get_computed_style_function(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function parse_text_p(t){var e=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,o){return Array(parseInt(o,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),n=unescapexml(e.replace(/<[^>]*>/g,""));return[n]}function parse_ods_styles(t,e,n){var a=n||{},o=xlml_normalize(t);xlmlregex.lastIndex=0,o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");for(var l,u,d="",m="",y,b=0,_=-1,w="";l=xlmlregex.exec(o);)switch(l[3]=l[3].replace(/_.*$/,"")){case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":case"text-style":l[1]==="/"?(u["truncate-on-overflow"]=="false"&&(d.match(/h/)?d=d.replace(/h+/,"[$&]"):d.match(/m/)?d=d.replace(/m+/,"[$&]"):d.match(/s/)&&(d=d.replace(/s+/,"[$&]"))),a[u.name]=d,d=""):l[0].charAt(l[0].length-2)!=="/"&&(d="",u=parsexmltag(l[0],!1));break;case"boolean-style":l[1]==="/"?(a[u.name]="General",d=""):l[0].charAt(l[0].length-2)!=="/"&&(d="",u=parsexmltag(l[0],!1));break;case"boolean":d+="General";break;case"text":l[1]==="/"?(w=o.slice(_,xlmlregex.lastIndex-l[0].length),w=="%"&&u[0]=="<number:percentage-style"?d+="%":d+='"'+w.replace(/"/g,'""')+'"'):l[0].charAt(l[0].length-2)!=="/"&&(_=xlmlregex.lastIndex);break;case"day":switch(y=parsexmltag(l[0],!1),y.style){case"short":d+="d";break;case"long":d+="dd";break;default:d+="dd";break}break;case"day-of-week":switch(y=parsexmltag(l[0],!1),y.style){case"short":d+="ddd";break;case"long":d+="dddd";break;default:d+="ddd";break}break;case"era":switch(y=parsexmltag(l[0],!1),y.style){case"short":d+="ee";break;case"long":d+="eeee";break;default:d+="eeee";break}break;case"hours":switch(y=parsexmltag(l[0],!1),y.style){case"short":d+="h";break;case"long":d+="hh";break;default:d+="hh";break}break;case"minutes":switch(y=parsexmltag(l[0],!1),y.style){case"short":d+="m";break;case"long":d+="mm";break;default:d+="mm";break}break;case"month":switch(y=parsexmltag(l[0],!1),y.textual&&(d+="mm"),y.style){case"short":d+="m";break;case"long":d+="mm";break;default:d+="m";break}break;case"seconds":{switch(y=parsexmltag(l[0],!1),y.style){case"short":d+="s";break;case"long":d+="ss";break;default:d+="ss";break}y["decimal-places"]&&(d+="."+fill("0",+y["decimal-places"]))}break;case"year":switch(y=parsexmltag(l[0],!1),y.style){case"short":d+="yy";break;case"long":d+="yyyy";break;default:d+="yy";break}break;case"am-pm":d+="AM/PM";break;case"week-of-year":case"quarter":console.error("Excel does not support ODS format token "+l[3]);break;case"fill-character":l[1]==="/"?(w=o.slice(_,xlmlregex.lastIndex-l[0].length),d+='"'+w.replace(/"/g,'""')+'"*'):l[0].charAt(l[0].length-2)!=="/"&&(_=xlmlregex.lastIndex);break;case"scientific-number":y=parsexmltag(l[0],!1),d+="0."+fill("0",+y["min-decimal-places"]||+y["decimal-places"]||2)+fill("?",+y["decimal-places"]-+y["min-decimal-places"]||0)+"E"+(parsexmlbool(y["forced-exponent-sign"])?"+":"")+fill("0",+y["min-exponent-digits"]||2);break;case"fraction":y=parsexmltag(l[0],!1),+y["min-integer-digits"]?d+=fill("0",+y["min-integer-digits"]):d+="#",d+=" ",d+=fill("?",+y["min-numerator-digits"]||1),d+="/",+y["denominator-value"]?d+=y["denominator-value"]:d+=fill("?",+y["min-denominator-digits"]||1);break;case"currency-symbol":l[1]==="/"?d+='"'+o.slice(_,xlmlregex.lastIndex-l[0].length).replace(/"/g,'""')+'"':l[0].charAt(l[0].length-2)!=="/"?_=xlmlregex.lastIndex:d+="$";break;case"text-properties":switch(y=parsexmltag(l[0],!1),(y.color||"").toLowerCase().replace("#","")){case"ff0000":case"red":d="[Red]"+d;break}break;case"text-content":d+="@";break;case"map":y=parsexmltag(l[0],!1),unescapexml(y.condition)=="value()>=0"?d=a[y["apply-style-name"]]+";"+d:console.error("ODS number format may be incorrect: "+y.condition);break;case"number":if(l[1]==="/")break;y=parsexmltag(l[0],!1),m="",m+=fill("0",+y["min-integer-digits"]||1),parsexmlbool(y.grouping)&&(m=commaify(fill("#",Math.max(0,4-m.length))+m)),(+y["min-decimal-places"]||+y["decimal-places"])&&(m+="."),+y["min-decimal-places"]&&(m+=fill("0",+y["min-decimal-places"]||1)),+y["decimal-places"]-(+y["min-decimal-places"]||0)&&(m+=fill("0",+y["decimal-places"]-(+y["min-decimal-places"]||0))),d+=m;break;case"embedded-text":l[1]==="/"?b==0?d+='"'+o.slice(_,xlmlregex.lastIndex-l[0].length).replace(/"/g,'""')+'"':d=d.slice(0,b)+'"'+o.slice(_,xlmlregex.lastIndex-l[0].length).replace(/"/g,'""')+'"'+d.slice(b):l[0].charAt(l[0].length-2)!=="/"&&(_=xlmlregex.lastIndex,b=-+parsexmltag(l[0],!1).position||0);break}return a}function parse_content_xml(t,e,n){var a=e||{},o=xlml_normalize(t),l=[],u,d,m,y="",b=0,_,w,E={},A=[],C={};a.dense&&(C["!data"]=[]);var k,B,D={value:""},q="",j=0,J=[],Y=-1,L=-1,Z={s:{r:1e6,c:1e7},e:{r:0,c:0}},Q=0,oe=n||{},ae={},U=[],I={},x=0,T=0,M=[],O=1,z=1,X=[],H={Names:[],WBProps:{}},P={},S=["",""],F=[],ue={},ee="",fe=0,le=!1,ce=!1,pe=0,se=0;for(xlmlregex.lastIndex=0,o=o.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");k=xlmlregex.exec(o);)switch(k[3]=k[3].replace(/_.*$/,"")){case"table":case"工作表":k[1]==="/"?(Z.e.c>=Z.s.c&&Z.e.r>=Z.s.r?C["!ref"]=encode_range(Z):C["!ref"]="A1:A1",a.sheetRows>0&&a.sheetRows<=Z.e.r&&(C["!fullref"]=C["!ref"],Z.e.r=a.sheetRows-1,C["!ref"]=encode_range(Z)),U.length&&(C["!merges"]=U),M.length&&(C["!rows"]=M),_.name=_.名称||_.name,typeof JSON<"u"&&JSON.stringify(_),A.push(_.name),E[_.name]=C,ce=!1):k[0].charAt(k[0].length-2)!=="/"&&(_=parsexmltag(k[0],!1),Y=L=-1,Z.s.r=Z.s.c=1e7,Z.e.r=Z.e.c=0,C={},a.dense&&(C["!data"]=[]),U=[],M=[],ce=!0);break;case"table-row-group":k[1]==="/"?--Q:++Q;break;case"table-row":case"行":if(k[1]==="/"){Y+=O,O=1;break}if(w=parsexmltag(k[0],!1),w.行号?Y=w.行号-1:Y==-1&&(Y=0),O=+w["number-rows-repeated"]||1,O<10)for(pe=0;pe<O;++pe)Q>0&&(M[Y+pe]={level:Q});L=-1;break;case"covered-table-cell":k[1]!=="/"&&++L,a.sheetStubs&&(a.dense?(C["!data"][Y]||(C["!data"][Y]=[]),C["!data"][Y][L]={t:"z"}):C[encode_cell({r:Y,c:L})]={t:"z"}),q="",J=[];break;case"table-cell":case"数据":if(k[0].charAt(k[0].length-2)==="/")++L,D=parsexmltag(k[0],!1),z=parseInt(D["number-columns-repeated"]||"1",10),B={t:"z",v:null},D.formula&&a.cellFormula!=!1&&(B.f=ods_to_csf_formula(unescapexml(D.formula))),D["style-name"]&&ae[D["style-name"]]&&(B.z=ae[D["style-name"]]),(D.数据类型||D["value-type"])=="string"&&(B.t="s",B.v=unescapexml(D["string-value"]||""),a.dense?(C["!data"][Y]||(C["!data"][Y]=[]),C["!data"][Y][L]=B):C[encode_col(L)+encode_row(Y)]=B),L+=z-1;else if(k[1]!=="/"){++L,q="",j=0,J=[],z=1;var de=O?Y+O-1:Y;if(L>Z.e.c&&(Z.e.c=L),L<Z.s.c&&(Z.s.c=L),Y<Z.s.r&&(Z.s.r=Y),de>Z.e.r&&(Z.e.r=de),D=parsexmltag(k[0],!1),F=[],ue={},B={t:D.数据类型||D["value-type"],v:null},D["style-name"]&&ae[D["style-name"]]&&(B.z=ae[D["style-name"]]),a.cellFormula)if(D.formula&&(D.formula=unescapexml(D.formula)),D["number-matrix-columns-spanned"]&&D["number-matrix-rows-spanned"]&&(x=parseInt(D["number-matrix-rows-spanned"],10)||0,T=parseInt(D["number-matrix-columns-spanned"],10)||0,I={s:{r:Y,c:L},e:{r:Y+x-1,c:L+T-1}},B.F=encode_range(I),X.push([I,B.F])),D.formula)B.f=ods_to_csf_formula(D.formula);else for(pe=0;pe<X.length;++pe)Y>=X[pe][0].s.r&&Y<=X[pe][0].e.r&&L>=X[pe][0].s.c&&L<=X[pe][0].e.c&&(B.F=X[pe][1]);switch((D["number-columns-spanned"]||D["number-rows-spanned"])&&(x=parseInt(D["number-rows-spanned"],10)||0,T=parseInt(D["number-columns-spanned"],10)||0,I={s:{r:Y,c:L},e:{r:Y+x-1,c:L+T-1}},U.push(I)),D["number-columns-repeated"]&&(z=parseInt(D["number-columns-repeated"],10)),B.t){case"boolean":B.t="b",B.v=parsexmlbool(D["boolean-value"])||+D["boolean-value"]>=1;break;case"float":B.t="n",B.v=parseFloat(D.value);break;case"percentage":B.t="n",B.v=parseFloat(D.value);break;case"currency":B.t="n",B.v=parseFloat(D.value);break;case"date":B.t="d",B.v=parseDate(D["date-value"]),a.cellDates||(B.t="n",B.v=datenum(B.v,H.WBProps.date1904)-se),B.z||(B.z="m/d/yy");break;case"time":B.t="n",B.v=parse_isodur(D["time-value"])/86400,a.cellDates&&(B.t="d",B.v=numdate(B.v)),B.z||(B.z="HH:MM:SS");break;case"number":B.t="n",B.v=parseFloat(D.数据数值);break;default:if(B.t==="string"||B.t==="text"||!B.t)B.t="s",D["string-value"]!=null&&(q=unescapexml(D["string-value"]),J=[]);else throw new Error("Unsupported value type "+B.t)}}else{if(le=!1,B.t==="s"&&(B.v=q||"",J.length&&(B.R=J),le=j==0),P.Target&&(B.l=P),F.length>0&&(B.c=F,F=[]),q&&a.cellText!==!1&&(B.w=q),le&&(B.t="z",delete B.v),(!le||a.sheetStubs)&&!(a.sheetRows&&a.sheetRows<=Y))for(var re=0;re<O;++re){if(z=parseInt(D["number-columns-repeated"]||"1",10),a.dense)for(C["!data"][Y+re]||(C["!data"][Y+re]=[]),C["!data"][Y+re][L]=re==0?B:dup(B);--z>0;)C["!data"][Y+re][L+z]=dup(B);else for(C[encode_cell({r:Y+re,c:L})]=B;--z>0;)C[encode_cell({r:Y+re,c:L+z})]=dup(B);Z.e.c<=L&&(Z.e.c=L)}z=parseInt(D["number-columns-repeated"]||"1",10),L+=z-1,z=0,B={},q="",J=[]}P={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(k[1]==="/"){if((u=l.pop())[0]!==k[3])throw"Bad state: "+u}else k[0].charAt(k[0].length-2)!=="/"&&l.push([k[3],!0]);break;case"annotation":if(k[1]==="/"){if((u=l.pop())[0]!==k[3])throw"Bad state: "+u;ue.t=q,J.length&&(ue.R=J),ue.a=ee,F.push(ue)}else k[0].charAt(k[0].length-2)!=="/"&&l.push([k[3],!1]);ee="",fe=0,q="",j=0,J=[];break;case"creator":k[1]==="/"?ee=o.slice(fe,k.index):fe=k.index+k[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(k[1]==="/"){if((u=l.pop())[0]!==k[3])throw"Bad state: "+u}else k[0].charAt(k[0].length-2)!=="/"&&l.push([k[3],!1]);q="",j=0,J=[];break;case"scientific-number":case"currency-symbol":case"fill-character":break;case"text-style":case"boolean-style":case"number-style":case"currency-style":case"percentage-style":case"date-style":case"time-style":if(k[1]==="/"){var me=xlmlregex.lastIndex;parse_ods_styles(o.slice(m,xlmlregex.lastIndex),e,oe),xlmlregex.lastIndex=me}else k[0].charAt(k[0].length-2)!=="/"&&(m=xlmlregex.lastIndex-k[0].length);break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":{var te=parsexmltag(k[0],!1);te.family=="table-cell"&&oe[te["data-style-name"]]&&(ae[te.name]=oe[te["data-style-name"]])}break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":break;case"boolean":break;case"text":if(k[0].slice(-2)==="/>")break;if(k[1]==="/")switch(l[l.length-1][0]){case"number-style":case"date-style":case"time-style":y+=o.slice(b,k.index);break}else b=k.index+k[0].length;break;case"named-range":d=parsexmltag(k[0],!1),S=ods_to_csf_3D(d["cell-range-address"]);var ve={Name:d.name,Ref:S[0]+"!"+S[1]};ce&&(ve.Sheet=A.length),H.Names.push(ve);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":switch(d=parsexmltag(k[0],!1),d["date-value"]){case"1904-01-01":H.WBProps.date1904=!0;case"1900-01-01":se=0}break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(l[l.length-1][0])>-1)break;if(k[1]==="/"&&(!D||!D["string-value"])){var Se=parse_text_p(o.slice(j,k.index));q=(q.length>0?q+`
`:"")+Se[0]}else parsexmltag(k[0],!1),j=k.index+k[0].length;break;case"s":break;case"database-range":if(k[1]==="/")break;try{S=ods_to_csf_3D(parsexmltag(k[0])["target-range-address"]),E[S[0]]["!autofilter"]={ref:S[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(k[1]!=="/"){if(P=parsexmltag(k[0],!1),!P.href)break;P.Target=unescapexml(P.href),delete P.href,P.Target.charAt(0)=="#"&&P.Target.indexOf(".")>-1?(S=ods_to_csf_3D(P.Target.slice(1)),P.Target="#"+S[0]+"!"+S[1]):P.Target.match(/^\.\.[\\\/]/)&&(P.Target=P.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(k[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(a.WTF)throw new Error(k)}}var be={Sheets:E,SheetNames:A,Workbook:H};return a.bookSheets&&delete be.Sheets,be}function parse_ods(t,e){e=e||{},safegetzipfile(t,"META-INF/manifest.xml")&&parse_manifest(getzipdata(t,"META-INF/manifest.xml"),e);var n=getzipstr(t,"styles.xml"),a=n&&parse_ods_styles(utf8read(n)),o=getzipstr(t,"content.xml");if(!o)throw new Error("Missing content.xml in ODS / UOF file");var l=parse_content_xml(utf8read(o),e,a);return safegetzipfile(t,"meta.xml")&&(l.Props=parse_core_props(getzipdata(t,"meta.xml"))),l.bookType="ods",l}function parse_fods(t,e){var n=parse_content_xml(t,e);return n.bookType="fods",n}var write_styles_ods=function(){var t=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+t+"</office:document-styles>";return function(){return XML_HEADER+e}}();function write_number_format_ods(t,e){var n="number",a="",o={"style:name":e},l="",u=0;t=t.replace(/"[$]"/g,"$");e:{if(t.indexOf(";")>-1&&(console.error("Unsupported ODS Style Map exported.  Using first branch of "+t),t=t.slice(0,t.indexOf(";"))),t=="@"){n="text",a="<number:text-content/>";break e}if(t.indexOf(/\$/)>-1&&(n="currency"),t[u]=='"'){for(l="";t[++u]!='"'||t[++u]=='"';)l+=t[u];--u,t[u+1]=="*"?(u++,a+="<number:fill-character>"+escapexml(l.replace(/""/g,'"'))+"</number:fill-character>"):a+="<number:text>"+escapexml(l.replace(/""/g,'"'))+"</number:text>",t=t.slice(u+1),u=0}var d=t.match(/# (\?+)\/(\?+)/);if(d){a+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":d[1].length,"number:max-denominator-value":Math.max(+d[1].replace(/./g,"9"),+d[2].replace(/./g,"9"))});break e}if(d=t.match(/# (\?+)\/(\d+)/)){a+=writextag("number:fraction",null,{"number:min-integer-digits":0,"number:min-numerator-digits":d[1].length,"number:denominator-value":+d[2]});break e}if(d=t.match(/(\d+)(|\.\d+)%/)){n="percentage",a+=writextag("number:number",null,{"number:decimal-places":d[2]&&d.length-1||0,"number:min-decimal-places":d[2]&&d.length-1||0,"number:min-integer-digits":d[1].length})+"<number:text>%</number:text>";break e}var m=!1;if(["y","m","d"].indexOf(t[0])>-1){n="date";t:for(;u<t.length;++u)switch(l=t[u].toLowerCase()){case"h":case"s":m=!0,--u;break t;case"m":r:for(var y=u+1;y<t.length;++y)switch(t[y]){case"y":case"d":break r;case"h":case"s":m=!0,--u;break t}case"y":case"d":for(;(t[++u]||"").toLowerCase()==l[0];)l+=l[0];switch(--u,l){case"y":case"yy":a+="<number:year/>";break;case"yyy":case"yyyy":a+='<number:year number:style="long"/>';break;case"mmmmm":console.error("ODS has no equivalent of format |mmmmm|");case"m":case"mm":case"mmm":case"mmmm":a+='<number:month number:style="'+(l.length%2?"short":"long")+'" number:textual="'+(l.length>=3?"true":"false")+'"/>';break;case"d":case"dd":a+='<number:day number:style="'+(l.length%2?"short":"long")+'"/>';break;case"ddd":case"dddd":a+='<number:day-of-week number:style="'+(l.length%2?"short":"long")+'"/>';break}break;case'"':for(;t[++u]!='"'||t[++u]=='"';)l+=t[u];--u,a+="<number:text>"+escapexml(l.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":a+="<number:text>"+escapexml(l)+"</number:text>";break;default:console.error("unrecognized character "+l+" in ODF format "+t)}if(!m)break e;t=t.slice(u+1),u=0}if(t.match(/^\[?[hms]/)){for(n=="number"&&(n="time"),t.match(/\[/)&&(t=t.replace(/[\[\]]/g,""),o["number:truncate-on-overflow"]="false");u<t.length;++u)switch(l=t[u].toLowerCase()){case"h":case"m":case"s":for(;(t[++u]||"").toLowerCase()==l[0];)l+=l[0];switch(--u,l){case"h":case"hh":a+='<number:hours number:style="'+(l.length%2?"short":"long")+'"/>';break;case"m":case"mm":a+='<number:minutes number:style="'+(l.length%2?"short":"long")+'"/>';break;case"s":case"ss":if(t[u+1]==".")do l+=t[u+1],++u;while(t[u+1]=="0");a+='<number:seconds number:style="'+(l.match("ss")?"long":"short")+'"'+(l.match(/\./)?' number:decimal-places="'+(l.match(/0+/)||[""])[0].length+'"':"")+"/>";break}break;case'"':for(;t[++u]!='"'||t[++u]=='"';)l+=t[u];--u,a+="<number:text>"+escapexml(l.slice(1).replace(/""/g,'"'))+"</number:text>";break;case"/":a+="<number:text>"+escapexml(l)+"</number:text>";break;case"a":if(t.slice(u,u+3).toLowerCase()=="a/p"){a+="<number:am-pm/>",u+=2;break}if(t.slice(u,u+5).toLowerCase()=="am/pm"){a+="<number:am-pm/>",u+=4;break}default:console.error("unrecognized character "+l+" in ODF format "+t)}break e}if(t.indexOf(/\$/)>-1&&(n="currency"),t[0]=="$"&&(a+='<number:currency-symbol number:language="en" number:country="US">$</number:currency-symbol>',t=t.slice(1),u=0),u=0,t[u]=='"'){for(;t[++u]!='"'||t[++u]=='"';)l+=t[u];--u,t[u+1]=="*"?(u++,a+="<number:fill-character>"+escapexml(l.replace(/""/g,'"'))+"</number:fill-character>"):a+="<number:text>"+escapexml(l.replace(/""/g,'"'))+"</number:text>",t=t.slice(u+1),u=0}var b=t.match(/([#0][0#,]*)(\.[0#]*|)(E[+]?0*|)/i);if(!b||!b[0])console.error("Could not find numeric part of "+t);else{var _=b[1].replace(/,/g,"");a+="<number:"+(b[3]?"scientific-":"")+'number number:min-integer-digits="'+(_.indexOf("0")==-1?"0":_.length-_.indexOf("0"))+'"'+(b[0].indexOf(",")>-1?' number:grouping="true"':"")+(b[2]&&' number:decimal-places="'+(b[2].length-1)+'"'||' number:decimal-places="0"')+(b[3]&&b[3].indexOf("+")>-1?' number:forced-exponent-sign="true"':"")+(b[3]?' number:min-exponent-digits="'+b[3].match(/0+/)[0].length+'"':"")+"></number:"+(b[3]?"scientific-":"")+"number>",u=b.index+b[0].length}if(t[u]=='"'){for(l="";t[++u]!='"'||t[++u]=='"';)l+=t[u];--u,a+="<number:text>"+escapexml(l.replace(/""/g,'"'))+"</number:text>"}}return a?writextag("number:"+n+"-style",a,o):(console.error("Could not generate ODS number format for |"+t+"|"),"")}function write_names_ods(t,e,n){var a=t.filter(function(o){return o.Sheet==(n==-1?null:n)});return a.length?`      <table:named-expressions>
`+a.map(function(o){var l=csf_to_ods_3D(o.Ref);return"        "+writextag("table:named-range",null,{"table:name":o.Name,"table:cell-range-address":l,"table:base-cell-address":l.replace(/[\.]?[^\.]*$/,".$A$1")})}).join(`
`)+`
      </table:named-expressions>
`:""}var write_content_ods=function(){var t=function(l){return escapexml(l).replace(/  +/g,function(u){return'<text:s text:c="'+u.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,n=`          <table:covered-table-cell/>
`,a=function(l,u,d,m,y){var b=[];b.push('      <table:table table:name="'+escapexml(u.SheetNames[d])+`" table:style-name="ta1">
`);var _=0,w=0,E=decode_range(l["!ref"]||"A1"),A=l["!merges"]||[],C=0,k=l["!data"]!=null;if(l["!cols"])for(w=0;w<=E.e.c;++w)b.push("        <table:table-column"+(l["!cols"][w]?' table:style-name="co'+l["!cols"][w].ods+'"':"")+`></table:table-column>
`);var B="",D=l["!rows"]||[];for(_=0;_<E.s.r;++_)B=D[_]?' table:style-name="ro'+D[_].ods+'"':"",b.push("        <table:table-row"+B+`></table:table-row>
`);for(;_<=E.e.r;++_){for(B=D[_]?' table:style-name="ro'+D[_].ods+'"':"",b.push("        <table:table-row"+B+`>
`),w=0;w<E.s.c;++w)b.push(e);for(;w<=E.e.c;++w){var q=!1,j={},J="";for(C=0;C!=A.length;++C)if(!(A[C].s.c>w)&&!(A[C].s.r>_)&&!(A[C].e.c<w)&&!(A[C].e.r<_)){(A[C].s.c!=w||A[C].s.r!=_)&&(q=!0),j["table:number-columns-spanned"]=A[C].e.c-A[C].s.c+1,j["table:number-rows-spanned"]=A[C].e.r-A[C].s.r+1;break}if(q){b.push(n);continue}var Y=encode_cell({r:_,c:w}),L=k?(l["!data"][_]||[])[w]:l[Y];if(L&&L.f&&(j["table:formula"]=escapexml(csf_to_ods_formula(L.f)),L.F&&L.F.slice(0,Y.length)==Y)){var Z=decode_range(L.F);j["table:number-matrix-columns-spanned"]=Z.e.c-Z.s.c+1,j["table:number-matrix-rows-spanned"]=Z.e.r-Z.s.r+1}if(!L){b.push(e);continue}switch(L.t){case"b":J=L.v?"TRUE":"FALSE",j["office:value-type"]="boolean",j["office:boolean-value"]=L.v?"true":"false";break;case"n":J=L.w||String(L.v||0),j["office:value-type"]="float",j["office:value"]=L.v||0;break;case"s":case"str":J=L.v==null?"":L.v,j["office:value-type"]="string";break;case"d":J=L.w||parseDate(L.v).toISOString(),j["office:value-type"]="date",j["office:date-value"]=parseDate(L.v).toISOString(),j["table:style-name"]="ce1";break;default:b.push(e);continue}var Q=t(J);if(L.l&&L.l.Target){var oe=L.l.Target;oe=oe.charAt(0)=="#"?"#"+csf_to_ods_3D(oe.slice(1)):oe,oe.charAt(0)!="#"&&!oe.match(/^\w+:/)&&(oe="../"+oe),Q=writextag("text:a",Q,{"xlink:href":oe.replace(/&/g,"&amp;")})}y[L.z]&&(j["table:style-name"]="ce"+y[L.z].slice(1)),b.push("          "+writextag("table:table-cell",writextag("text:p",Q,{}),j)+`
`)}b.push(`        </table:table-row>
`)}return(u.Workbook||{}).Names&&b.push(write_names_ods(u.Workbook.Names,u.SheetNames,d)),b.push(`      </table:table>
`),b.join("")},o=function(l,u){l.push(` <office:automatic-styles>
`);var d=0;u.SheetNames.map(function(_){return u.Sheets[_]}).forEach(function(_){if(_&&_["!cols"]){for(var w=0;w<_["!cols"].length;++w)if(_["!cols"][w]){var E=_["!cols"][w];if(E.width==null&&E.wpx==null&&E.wch==null)continue;process_col(E),E.ods=d;var A=_["!cols"][w].wpx+"px";l.push('  <style:style style:name="co'+d+`" style:family="table-column">
`),l.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+A+`"/>
`),l.push(`  </style:style>
`),++d}}});var m=0;u.SheetNames.map(function(_){return u.Sheets[_]}).forEach(function(_){if(_&&_["!rows"]){for(var w=0;w<_["!rows"].length;++w)if(_["!rows"][w]){_["!rows"][w].ods=m;var E=_["!rows"][w].hpx+"px";l.push('  <style:style style:name="ro'+m+`" style:family="table-row">
`),l.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+E+`"/>
`),l.push(`  </style:style>
`),++m}}}),l.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),l.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),l.push(`  </style:style>
`),l.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),l.push(`   <number:month number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:day number:style="long"/>
`),l.push(`   <number:text>/</number:text>
`),l.push(`   <number:year/>
`),l.push(`  </number:date-style>
`);var y={},b=69;return u.SheetNames.map(function(_){return u.Sheets[_]}).forEach(function(_){if(_)for(var w=_["!data"]!=null,E=decode_range(_["!ref"]),A=0;A<=E.e.r;++A)for(var C=0;C<=E.e.c;++C){var k=w?(_["!data"][A]||[])[C]:_[encode_cell({r:A,c:C})];if(!(!k||!k.z||k.z.toLowerCase()=="general")&&!y[k.z]){var B=write_number_format_ods(k.z,"N"+b);B&&(y[k.z]="N"+b,++b,l.push(B+`
`))}}}),l.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),keys(y).forEach(function(_){l.push('<style:style style:name="ce'+y[_].slice(1)+'" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="'+y[_]+`"/>
`)}),l.push(` </office:automatic-styles>
`),y};return function(u,d){var m=[XML_HEADER],y=wxt_helper({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),b=wxt_helper({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});d.bookType=="fods"?(m.push("<office:document"+y+b+`>
`),m.push(write_meta_ods().replace(/<office:document-meta.*?>/,"").replace(/<\/office:document-meta>/,"")+`
`)):m.push("<office:document-content"+y+`>
`);var _=o(m,u);m.push(`  <office:body>
`),m.push(`    <office:spreadsheet>
`),((u.Workbook||{}).WBProps||{}).date1904&&m.push(`      <table:calculation-settings table:case-sensitive="false" table:search-criteria-must-apply-to-whole-cell="true" table:use-wildcards="true" table:use-regular-expressions="false" table:automatic-find-labels="false">
        <table:null-date table:date-value="1904-01-01"/>
      </table:calculation-settings>
`);for(var w=0;w!=u.SheetNames.length;++w)m.push(a(u.Sheets[u.SheetNames[w]],u,w,d,_));return(u.Workbook||{}).Names&&m.push(write_names_ods(u.Workbook.Names,u.SheetNames,-1)),m.push(`    </office:spreadsheet>
`),m.push(`  </office:body>
`),d.bookType=="fods"?m.push("</office:document>"):m.push("</office:document-content>"),m.join("")}}();function write_ods(t,e){if(e.bookType=="fods")return write_content_ods(t,e);var n=zip_new(),a="",o=[],l=[];return a="mimetype",zip_add_file(n,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",zip_add_file(n,a,write_content_ods(t,e)),o.push([a,"text/xml"]),l.push([a,"ContentFile"]),a="styles.xml",zip_add_file(n,a,write_styles_ods(t,e)),o.push([a,"text/xml"]),l.push([a,"StylesFile"]),a="meta.xml",zip_add_file(n,a,XML_HEADER+write_meta_ods()),o.push([a,"text/xml"]),l.push([a,"MetadataFile"]),a="manifest.rdf",zip_add_file(n,a,write_rdf(l)),o.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",zip_add_file(n,a,write_manifest(o)),n}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */var subarray=function(){try{return typeof Uint8Array>"u"||typeof Uint8Array.prototype.subarray>"u"?"slice":typeof Buffer<"u"?typeof Buffer.prototype.subarray>"u"?"slice":(typeof Buffer.from=="function"?Buffer.from([72,62]):new Buffer([72,62]))instanceof Uint8Array?"subarray":"slice":"subarray"}catch{return"slice"}}();function u8_to_dataview(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function u8str(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):utf8read(a2s(t))}function stru8(t){return typeof TextEncoder<"u"?new TextEncoder().encode(t):s2a(utf8write(t))}function u8concat(t){for(var e=0,n=0;n<t.length;++n)e+=t[n].length;var a=new Uint8Array(e),o=0;for(n=0;n<t.length;++n){var l=t[n],u=l.length;if(u<250)for(var d=0;d<u;++d)a[o++]=l[d];else a.set(l,o),o+=u}return a}function popcnt(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function readDecimal128LE(t,e){for(var n=(t[e+15]&127)<<7|t[e+14]>>1,a=t[e+14]&1,o=e+13;o>=e;--o)a=a*256+t[o];return(t[e+15]&128?-a:a)*Math.pow(10,n-6176)}function writeDecimal128LE(t,e,n){var a=Math.floor(n==0?0:Math.LOG10E*Math.log(Math.abs(n)))+6176-16,o=n/Math.pow(10,a-6176);t[e+15]|=a>>7,t[e+14]|=(a&127)<<1;for(var l=0;o>=1;++l,o/=256)t[e+l]=o&255;t[e+15]|=n>=0?0:128}function parse_varint49(t,e){var n=e.l,a=t[n]&127;e:if(t[n++]>=128&&(a|=(t[n]&127)<<7,t[n++]<128||(a|=(t[n]&127)<<14,t[n++]<128)||(a|=(t[n]&127)<<21,t[n++]<128)||(a+=(t[n]&127)*Math.pow(2,28),++n,t[n++]<128)||(a+=(t[n]&127)*Math.pow(2,35),++n,t[n++]<128)||(a+=(t[n]&127)*Math.pow(2,42),++n,t[n++]<128)))break e;return e.l=n,a}function write_varint49(t){var e=new Uint8Array(7);e[0]=t&127;var n=1;e:if(t>127){if(e[n-1]|=128,e[n]=t>>7&127,++n,t<=16383||(e[n-1]|=128,e[n]=t>>14&127,++n,t<=2097151)||(e[n-1]|=128,e[n]=t>>21&127,++n,t<=268435455)||(e[n-1]|=128,e[n]=t/256>>>21&127,++n,t<=34359738367)||(e[n-1]|=128,e[n]=t/65536>>>21&127,++n,t<=4398046511103))break e;e[n-1]|=128,e[n]=t/16777216>>>21&127,++n}return e[subarray](0,n)}function parse_packed_varints(t){for(var e={l:0},n=[];e.l<t.length;)n.push(parse_varint49(t,e));return n}function write_packed_varints(t){return u8concat(t.map(function(e){return write_varint49(e)}))}function varint_to_i32(t){var e=0,n=t[e]&127;e:if(t[e++]>=128){if(n|=(t[e]&127)<<7,t[e++]<128||(n|=(t[e]&127)<<14,t[e++]<128)||(n|=(t[e]&127)<<21,t[e++]<128))break e;n|=(t[e]&127)<<28}return n}function parse_shallow(t){for(var e=[],n={l:0};n.l<t.length;){var a=n.l,o=parse_varint49(t,n),l=o&7;o=o/8|0;var u,d=n.l;switch(l){case 0:{for(;t[d++]>=128;);u=t[subarray](n.l,d),n.l=d}break;case 1:u=t[subarray](d,d+8),n.l=d+8;break;case 2:{var m=parse_varint49(t,n);u=t[subarray](n.l,n.l+m),n.l+=m}break;case 5:u=t[subarray](d,d+4),n.l=d+4;break;default:throw new Error("PB Type ".concat(l," for Field ").concat(o," at offset ").concat(a))}var y={data:u,type:l};e[o]==null&&(e[o]=[]),e[o].push(y)}return e}function write_shallow(t){var e=[];return t.forEach(function(n,a){a!=0&&n.forEach(function(o){o.data&&(e.push(write_varint49(a*8+o.type)),o.type==2&&e.push(write_varint49(o.data.length)),e.push(o.data))})}),u8concat(e)}function mappa(t,e){return t?.map(function(n){return e(n.data)})||[]}function parse_iwa_file(t){for(var e,n=[],a={l:0};a.l<t.length;){var o=parse_varint49(t,a),l=parse_shallow(t[subarray](a.l,a.l+o));a.l+=o;var u={id:varint_to_i32(l[1][0].data),messages:[]};l[2].forEach(function(d){var m=parse_shallow(d.data),y=varint_to_i32(m[3][0].data);u.messages.push({meta:m,data:t[subarray](a.l,a.l+y)}),a.l+=y}),(e=l[3])!=null&&e[0]&&(u.merge=varint_to_i32(l[3][0].data)>>>0>0),n.push(u)}return n}function write_iwa_file(t){var e=[];return t.forEach(function(n){var a=[[],[{data:write_varint49(n.id),type:0}],[]];n.merge!=null&&(a[3]=[{data:write_varint49(+!!n.merge),type:0}]);var o=[];n.messages.forEach(function(u){o.push(u.data),u.meta[3]=[{type:0,data:write_varint49(u.data.length)}],a[2].push({data:write_shallow(u.meta),type:2})});var l=write_shallow(a);e.push(write_varint49(l.length)),e.push(l),o.forEach(function(u){return e.push(u)})}),u8concat(e)}function parse_snappy_chunk(t,e){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var n={l:0},a=parse_varint49(e,n),o=[],l=n.l;l<e.length;){var u=e[l]&3;if(u==0){var d=e[l++]>>2;if(d<60)++d;else{var m=d-59;d=e[l],m>1&&(d|=e[l+1]<<8),m>2&&(d|=e[l+2]<<16),m>3&&(d|=e[l+3]<<24),d>>>=0,d++,l+=m}o.push(e[subarray](l,l+d)),l+=d;continue}else{var y=0,b=0;if(u==1?(b=(e[l]>>2&7)+4,y=(e[l++]&224)<<3,y|=e[l++]):(b=(e[l++]>>2)+1,u==2?(y=e[l]|e[l+1]<<8,l+=2):(y=(e[l]|e[l+1]<<8|e[l+2]<<16|e[l+3]<<24)>>>0,l+=4)),y==0)throw new Error("Invalid offset 0");for(var _=o.length-1,w=y;_>=0&&w>=o[_].length;)w-=o[_].length,--_;if(_<0)if(w==0)w=o[_=0].length;else throw new Error("Invalid offset beyond length");if(b<w)o.push(o[_][subarray](o[_].length-w,o[_].length-w+b));else{for(w>0&&(o.push(o[_][subarray](o[_].length-w)),b-=w),++_;b>=o[_].length;)o.push(o[_]),b-=o[_].length,++_;b&&o.push(o[_][subarray](0,b))}o.length>25&&(o=[u8concat(o)])}}for(var E=0,A=0;A<o.length;++A)E+=o[A].length;if(E!=a)throw new Error("Unexpected length: ".concat(E," != ").concat(a));return o}function decompress_iwa_file(t){Array.isArray(t)&&(t=new Uint8Array(t));for(var e=[],n=0;n<t.length;){var a=t[n++],o=t[n]|t[n+1]<<8|t[n+2]<<16;n+=3,e.push.apply(e,parse_snappy_chunk(a,t[subarray](n,n+o))),n+=o}if(n!==t.length)throw new Error("data is not a valid framed stream!");return e.length==1?e[0]:u8concat(e)}function compress_iwa_file(t){for(var e=[],n=0;n<t.length;){var a=Math.min(t.length-n,268435455),o=new Uint8Array(4);e.push(o);var l=write_varint49(a),u=l.length;e.push(l),a<=60?(u++,e.push(new Uint8Array([a-1<<2]))):a<=256?(u+=2,e.push(new Uint8Array([240,a-1&255]))):a<=65536?(u+=3,e.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(u+=4,e.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(u+=5,e.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),e.push(t[subarray](n,n+a)),u+=a,o[0]=0,o[1]=u&255,o[2]=u>>8&255,o[3]=u>>16&255,n+=a}return u8concat(e)}var numbers_lut_new=function(){return{sst:[],rsst:[],ofmt:[],nfmt:[]}};function numbers_format_cell(t,e,n,a,o){var l,u,d,m,y=e&255,b=e>>8,_=b>=5?o:a;e:if(n&(b>4?8:4)&&t.t=="n"&&y==7){var w=(l=_[7])!=null&&l[0]?varint_to_i32(_[7][0].data):-1;if(w==-1)break e;var E=(u=_[15])!=null&&u[0]?varint_to_i32(_[15][0].data):-1,A=(d=_[16])!=null&&d[0]?varint_to_i32(_[16][0].data):-1,C=(m=_[40])!=null&&m[0]?varint_to_i32(_[40][0].data):-1,k=t.v,B=k;t:if(C){if(k==0){E=A=2;break t}k>=604800?E=1:k>=86400?E=2:k>=3600?E=4:k>=60?E=8:k>=1?E=16:E=32,Math.floor(k)!=k?A=32:k%60?A=16:k%3600?A=8:k%86400?A=4:k%604800&&(A=2),A<E&&(A=E)}if(E==-1||A==-1)break e;var D=[],q=[];E==1&&(B=k/604800,A==1?q.push('d"d"'):(B|=0,k-=604800*B),D.push(B+(w==2?" week"+(B==1?"":"s"):w==1?"w":""))),E<=2&&A>=2&&(B=k/86400,A>2&&(B|=0,k-=86400*B),q.push('d"d"'),D.push(B+(w==2?" day"+(B==1?"":"s"):w==1?"d":""))),E<=4&&A>=4&&(B=k/3600,A>4&&(B|=0,k-=3600*B),q.push((E>=4?"[h]":"h")+'"h"'),D.push(B+(w==2?" hour"+(B==1?"":"s"):w==1?"h":""))),E<=8&&A>=8&&(B=k/60,A>8&&(B|=0,k-=60*B),q.push((E>=8?"[m]":"m")+'"m"'),w==0?D.push((E==8&&A==8||B>=10?"":"0")+B):D.push(B+(w==2?" minute"+(B==1?"":"s"):w==1?"m":""))),E<=16&&A>=16&&(B=k,A>16&&(B|=0,k-=B),q.push((E>=16?"[s]":"s")+'"s"'),w==0?D.push((A==16&&E==16||B>=10?"":"0")+B):D.push(B+(w==2?" second"+(B==1?"":"s"):w==1?"s":""))),A>=32&&(B=Math.round(1e3*k),E<32&&q.push('.000"ms"'),w==0?D.push((B>=100?"":B>=10?"0":"00")+B):D.push(B+(w==2?" millisecond"+(B==1?"":"s"):w==1?"ms":""))),t.w=D.join(w==0?":":" "),t.z=q.join(w==0?'":"':" "),w==0&&(t.w=t.w.replace(/:(\d\d\d)$/,".$1"))}}function parse_old_storage(t,e,n){var a=u8_to_dataview(t),o=a.getUint32(4,!0),l=-1,u=-1,d=-1,m=NaN,y=new Date(2001,0,1),b=n>1?12:8;o&2&&(d=a.getUint32(b,!0),b+=4),b+=popcnt(o&(n>1?3468:396))*4,o&512&&(l=a.getUint32(b,!0),b+=4),b+=popcnt(o&(n>1?12288:4096))*4,o&16&&(u=a.getUint32(b,!0),b+=4),o&32&&(m=a.getFloat64(b,!0),b+=8),o&64&&(y.setTime(y.getTime()+a.getFloat64(b,!0)*1e3),b+=8),n>1&&(o=a.getUint32(8,!0)>>>16,o&255&&(d==-1&&(d=a.getUint32(b,!0)),b+=4));var _,w=t[n>=4?1:2];switch(w){case 0:return;case 2:_={t:"n",v:m};break;case 3:_={t:"s",v:e.sst[u]};break;case 5:_={t:"d",v:y};break;case 6:_={t:"b",v:m>0};break;case 7:_={t:"n",v:m};break;case 8:_={t:"e",v:0};break;case 9:if(l>-1)_={t:"s",v:e.rsst[l]};else throw new Error("Unsupported cell type ".concat(t[subarray](0,4)));break;default:throw new Error("Unsupported cell type ".concat(t[subarray](0,4)))}return d>-1&&numbers_format_cell(_,w|n<<8,o,e.ofmt[d],e.nfmt[d]),w==7&&(_.v/=86400),_}function parse_new_storage(t,e){var n=u8_to_dataview(t);n.getUint32(4,!0);var a=n.getUint32(8,!0),o=12,l=-1,u=-1,d=-1,m=NaN,y=NaN,b=new Date(2001,0,1);a&1&&(m=readDecimal128LE(t,o),o+=16),a&2&&(y=n.getFloat64(o,!0),o+=8),a&4&&(b.setTime(b.getTime()+n.getFloat64(o,!0)*1e3),o+=8),a&8&&(u=n.getUint32(o,!0),o+=4),a&16&&(l=n.getUint32(o,!0),o+=4);var _,w=t[1];switch(w){case 0:return;case 2:_={t:"n",v:m};break;case 3:_={t:"s",v:e.sst[u]};break;case 5:_={t:"d",v:b};break;case 6:_={t:"b",v:y>0};break;case 7:_={t:"n",v:y};break;case 8:_={t:"e",v:0};break;case 9:_={t:"s",v:e.rsst[l]};break;case 10:_={t:"n",v:m};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(a&31," : ").concat(t[subarray](0,4)))}return o+=popcnt(a&8160)*4,a&516096&&(d==-1&&(d=n.getUint32(o,!0)),o+=4),d>-1&&numbers_format_cell(_,w|5<<8,a>>13,e.ofmt[d],e.nfmt[d]),w==7&&(_.v/=86400),_}function write_new_storage(t,e){var n=new Uint8Array(32),a=u8_to_dataview(n),o=12,l=0;switch(n[0]=5,t.t){case"n":n[1]=2,writeDecimal128LE(n,o,t.v),l|=1,o+=16;break;case"b":n[1]=6,a.setFloat64(o,t.v?1:0,!0),l|=2,o+=8;break;case"s":var u=t.v==null?"":String(t.v),d=e.indexOf(u);d==-1&&(e[d=e.length]=u),n[1]=3,a.setUint32(o,d,!0),l|=8,o+=4;break;default:throw"unsupported cell type "+t.t}return a.setUint32(8,l,!0),n[subarray](0,o)}function write_old_storage(t,e){var n=new Uint8Array(32),a=u8_to_dataview(n),o=12,l=0;switch(n[0]=4,t.t){case"n":n[2]=2,a.setFloat64(o,t.v,!0),l|=32,o+=8;break;case"b":n[2]=6,a.setFloat64(o,t.v?1:0,!0),l|=32,o+=8;break;case"s":var u=t.v==null?"":String(t.v),d=e.indexOf(u);d==-1&&(e[d=e.length]=u),n[2]=3,a.setUint32(o,d,!0),l|=16,o+=4;break;default:throw"unsupported cell type "+t.t}return a.setUint32(8,l,!0),n[subarray](0,o)}function parse_cell_storage(t,e){switch(t[0]){case 0:case 1:case 2:case 3:case 4:return parse_old_storage(t,e,t[0]);case 5:return parse_new_storage(t,e);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function parse_TSP_Reference(t){var e=parse_shallow(t);return varint_to_i32(e[1][0].data)}function write_TSP_Reference(t){return write_shallow([[],[{type:0,data:write_varint49(t)}]])}function numbers_add_oref(t,e){var n,a=(n=t.messages[0].meta[5])!=null&&n[0]?parse_packed_varints(t.messages[0].meta[5][0].data):[],o=a.indexOf(e);o==-1&&(a.push(e),t.messages[0].meta[5]=[{type:2,data:write_packed_varints(a)}])}function numbers_del_oref(t,e){var n,a=(n=t.messages[0].meta[5])!=null&&n[0]?parse_packed_varints(t.messages[0].meta[5][0].data):[];t.messages[0].meta[5]=[{type:2,data:write_packed_varints(a.filter(function(o){return o!=e}))}]}function parse_TST_TableDataList(t,e){var n=parse_shallow(e.data),a=varint_to_i32(n[1][0].data),o=n[3],l=[];return(o||[]).forEach(function(u){var d=parse_shallow(u.data);if(d[1]){var m=varint_to_i32(d[1][0].data)>>>0;switch(a){case 1:l[m]=u8str(d[3][0].data);break;case 8:{var y=t[parse_TSP_Reference(d[9][0].data)][0],b=parse_shallow(y.data),_=t[parse_TSP_Reference(b[1][0].data)][0],w=varint_to_i32(_.meta[1][0].data);if(w!=2001)throw new Error("2000 unexpected reference to ".concat(w));var E=parse_shallow(_.data);l[m]=E[3].map(function(A){return u8str(A.data)}).join("")}break;case 2:l[m]=parse_shallow(d[6][0].data);break;default:throw a}}}),l}function parse_TST_TileRowInfo(t,e){var n,a,o,l,u,d,m,y,b,_,w,E,A,C,k=parse_shallow(t),B=varint_to_i32(k[1][0].data)>>>0,D=varint_to_i32(k[2][0].data)>>>0,q=((a=(n=k[8])==null?void 0:n[0])==null?void 0:a.data)&&varint_to_i32(k[8][0].data)>0||!1,j,J;if((l=(o=k[7])==null?void 0:o[0])!=null&&l.data&&e!=0)j=(d=(u=k[7])==null?void 0:u[0])==null?void 0:d.data,J=(y=(m=k[6])==null?void 0:m[0])==null?void 0:y.data;else if((_=(b=k[4])==null?void 0:b[0])!=null&&_.data&&e!=1)j=(E=(w=k[4])==null?void 0:w[0])==null?void 0:E.data,J=(C=(A=k[3])==null?void 0:A[0])==null?void 0:C.data;else throw"NUMBERS Tile missing ".concat(e," cell storage");for(var Y=q?4:1,L=u8_to_dataview(j),Z=[],Q=0;Q<j.length/2;++Q){var oe=L.getUint16(Q*2,!0);oe<65535&&Z.push([Q,oe])}if(Z.length!=D)throw"Expected ".concat(D," cells, found ").concat(Z.length);var ae=[];for(Q=0;Q<Z.length-1;++Q)ae[Z[Q][0]]=J[subarray](Z[Q][1]*Y,Z[Q+1][1]*Y);return Z.length>=1&&(ae[Z[Z.length-1][0]]=J[subarray](Z[Z.length-1][1]*Y)),{R:B,cells:ae}}function parse_TST_Tile(t,e){var n,a=parse_shallow(e.data),o=-1;(n=a?.[7])!=null&&n[0]&&(varint_to_i32(a[7][0].data)>>>0?o=1:o=0);var l=mappa(a[5],function(u){return parse_TST_TileRowInfo(u,o)});return{nrows:varint_to_i32(a[4][0].data)>>>0,data:l.reduce(function(u,d){return u[d.R]||(u[d.R]=[]),d.cells.forEach(function(m,y){if(u[d.R][y])throw new Error("Duplicate cell r=".concat(d.R," c=").concat(y));u[d.R][y]=m}),u},[])}}function parse_TST_TableModelArchive(t,e,n){var a,o,l,u,d,m,y=parse_shallow(e.data),b={s:{r:0,c:0},e:{r:0,c:0}};if(b.e.r=(varint_to_i32(y[6][0].data)>>>0)-1,b.e.r<0)throw new Error("Invalid row varint ".concat(y[6][0].data));if(b.e.c=(varint_to_i32(y[7][0].data)>>>0)-1,b.e.c<0)throw new Error("Invalid col varint ".concat(y[7][0].data));n["!ref"]=encode_range(b);var _=n["!data"]!=null,w=n,E=parse_shallow(y[4][0].data),A=numbers_lut_new();(a=E[4])!=null&&a[0]&&(A.sst=parse_TST_TableDataList(t,t[parse_TSP_Reference(E[4][0].data)][0])),(o=E[11])!=null&&o[0]&&(A.ofmt=parse_TST_TableDataList(t,t[parse_TSP_Reference(E[11][0].data)][0])),(l=E[17])!=null&&l[0]&&(A.rsst=parse_TST_TableDataList(t,t[parse_TSP_Reference(E[17][0].data)][0])),(u=E[22])!=null&&u[0]&&(A.nfmt=parse_TST_TableDataList(t,t[parse_TSP_Reference(E[22][0].data)][0]));var C=parse_shallow(E[3][0].data),k=0;if(C[1].forEach(function(q){var j=parse_shallow(q.data),J=t[parse_TSP_Reference(j[2][0].data)][0],Y=varint_to_i32(J.meta[1][0].data);if(Y!=6002)throw new Error("6001 unexpected reference to ".concat(Y));var L=parse_TST_Tile(t,J);L.data.forEach(function(Z,Q){Z.forEach(function(oe,ae){var U=parse_cell_storage(oe,A);U&&(_?(w["!data"][k+Q]||(w["!data"][k+Q]=[]),w["!data"][k+Q][ae]=U):n[encode_col(ae)+encode_row(k+Q)]=U)})}),k+=L.nrows}),(d=E[13])!=null&&d[0]){var B=t[parse_TSP_Reference(E[13][0].data)][0],D=varint_to_i32(B.meta[1][0].data);if(D!=6144)throw new Error("Expected merge type 6144, found ".concat(D));n["!merges"]=(m=parse_shallow(B.data))==null?void 0:m[1].map(function(q){var j=parse_shallow(q.data),J=u8_to_dataview(parse_shallow(j[1][0].data)[1][0].data),Y=u8_to_dataview(parse_shallow(j[2][0].data)[1][0].data);return{s:{r:J.getUint16(0,!0),c:J.getUint16(2,!0)},e:{r:J.getUint16(0,!0)+Y.getUint16(0,!0)-1,c:J.getUint16(2,!0)+Y.getUint16(2,!0)-1}}})}}function parse_TST_TableInfoArchive(t,e,n){var a=parse_shallow(e.data),o={"!ref":"A1"};n?.dense&&(o["!data"]=[]);var l=t[parse_TSP_Reference(a[2][0].data)],u=varint_to_i32(l[0].meta[1][0].data);if(u!=6001)throw new Error("6000 unexpected reference to ".concat(u));return parse_TST_TableModelArchive(t,l[0],o),o}function parse_TN_SheetArchive(t,e,n){var a,o=parse_shallow(e.data),l={name:(a=o[1])!=null&&a[0]?u8str(o[1][0].data):"",sheets:[]},u=mappa(o[2],parse_TSP_Reference);return u.forEach(function(d){t[d].forEach(function(m){var y=varint_to_i32(m.meta[1][0].data);y==6e3&&l.sheets.push(parse_TST_TableInfoArchive(t,m,n))})}),l}function parse_TN_DocumentArchive(t,e,n){var a,o=book_new(),l=parse_shallow(e.data);if((a=l[2])!=null&&a[0])throw new Error("Keynote presentations are not supported");var u=mappa(l[1],parse_TSP_Reference);if(u.forEach(function(d){t[d].forEach(function(m){var y=varint_to_i32(m.meta[1][0].data);if(y==2){var b=parse_TN_SheetArchive(t,m,n);b.sheets.forEach(function(_,w){book_append_sheet(o,_,w==0?b.name:b.name+"_"+w,!0)})}})}),o.SheetNames.length==0)throw new Error("Empty NUMBERS file");return o.bookType="numbers",o}function parse_numbers_iwa(t,e){var n,a,o,l,u,d,m,y={},b=[];if(t.FullPaths.forEach(function(w){if(w.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(w){if(w.name.match(/\.iwa$/)&&w.content[0]==0){var E;try{E=decompress_iwa_file(w.content)}catch(C){return console.log("?? "+w.content.length+" "+(C.message||C))}var A;try{A=parse_iwa_file(E)}catch(C){return console.log("## "+(C.message||C))}A.forEach(function(C){y[C.id]=C.messages,b.push(C.id)})}}),!b.length)throw new Error("File has no messages");if((o=(a=(n=y?.[1])==null?void 0:n[0].meta)==null?void 0:a[1])!=null&&o[0].data&&varint_to_i32(y[1][0].meta[1][0].data)==1e4)throw new Error("Pages documents are not supported");var _=((m=(d=(u=(l=y?.[1])==null?void 0:l[0])==null?void 0:u.meta)==null?void 0:d[1])==null?void 0:m[0].data)&&varint_to_i32(y[1][0].meta[1][0].data)==1&&y[1][0];if(_||b.forEach(function(w){y[w].forEach(function(E){var A=varint_to_i32(E.meta[1][0].data)>>>0;if(A==1)if(!_)_=E;else throw new Error("Document has multiple roots")})}),!_)throw new Error("Cannot find Document root");return parse_TN_DocumentArchive(y,_,e)}function write_TST_TileRowInfo(t,e,n){var a,o,l=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(0)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(5)}],[{type:2,data:new Uint8Array([])}],[{type:2,data:new Uint8Array(Array.from({length:510},function(){return 255}))}],[{type:0,data:write_varint49(1)}]];if(!((a=l[6])!=null&&a[0])||!((o=l[7])!=null&&o[0]))throw"Mutation only works on post-BNC storages!";var u=0;if(l[7][0].data.length<2*t.length){var d=new Uint8Array(2*t.length);d.set(l[7][0].data),l[7][0].data=d}if(l[4][0].data.length<2*t.length){var m=new Uint8Array(2*t.length);m.set(l[4][0].data),l[4][0].data=m}for(var y=u8_to_dataview(l[7][0].data),b=0,_=[],w=u8_to_dataview(l[4][0].data),E=0,A=[],C=n?4:1,k=0;k<t.length;++k){if(t[k]==null){y.setUint16(k*2,65535,!0),w.setUint16(k*2,65535);continue}y.setUint16(k*2,b/C,!0),w.setUint16(k*2,E/C,!0);var B,D;switch(typeof t[k]){case"string":B=write_new_storage({t:"s",v:t[k]},e),D=write_old_storage({t:"s",v:t[k]},e);break;case"number":B=write_new_storage({t:"n",v:t[k]},e),D=write_old_storage({t:"n",v:t[k]},e);break;case"boolean":B=write_new_storage({t:"b",v:t[k]},e),D=write_old_storage({t:"b",v:t[k]},e);break;default:if(t[k]instanceof Date){B=write_new_storage({t:"s",v:t[k].toISOString()},e),D=write_old_storage({t:"s",v:t[k].toISOString()},e);break}throw new Error("Unsupported value "+t[k])}_.push(B),b+=B.length,A.push(D),E+=D.length,++u}for(l[2][0].data=write_varint49(u),l[5][0].data=write_varint49(5);k<l[7][0].data.length/2;++k)y.setUint16(k*2,65535,!0),w.setUint16(k*2,65535,!0);return l[6][0].data=u8concat(_),l[3][0].data=u8concat(A),l[8]=[{type:0,data:write_varint49(n?1:0)}],l}function write_iwam(t,e){return{meta:[[],[{type:0,data:write_varint49(t)}]],data:e}}function get_unique_msgid(t,e){e.last||(e.last=927262);for(var n=e.last;n<2e6;++n)if(!e[n])return e[e.last=n]=t,n;throw new Error("Too many messages")}function build_numbers_deps(t){var e={},n=[];return t.FileIndex.map(function(a,o){return[a,t.FullPaths[o]]}).forEach(function(a){var o=a[0],l=a[1];o.type==2&&o.name.match(/\.iwa/)&&o.content[0]==0&&parse_iwa_file(decompress_iwa_file(o.content)).forEach(function(u){n.push(u.id),e[u.id]={deps:[],location:l,type:varint_to_i32(u.messages[0].meta[1][0].data)}})}),t.FileIndex.forEach(function(a){a.name.match(/\.iwa/)&&a.content[0]==0&&parse_iwa_file(decompress_iwa_file(a.content)).forEach(function(o){o.messages.forEach(function(l){[5,6].forEach(function(u){l.meta[u]&&l.meta[u].forEach(function(d){e[o.id].deps.push(varint_to_i32(d.data))})})})})}),e}function write_numbers_iwa(t,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var n=CFB.read(e.numbers,{type:"base64"}),a=build_numbers_deps(n),o=numbers_iwa_find(n,a,1);if(o==null)throw"Could not find message ".concat(1," in Numbers template");var l=mappa(parse_shallow(o.messages[0].data)[1],parse_TSP_Reference);if(l.length>1)throw new Error("Template NUMBERS file must have exactly one sheet");return t.SheetNames.forEach(function(u,d){d>=1&&(numbers_add_ws(n,a,d+1),o=numbers_iwa_find(n,a,1),l=mappa(parse_shallow(o.messages[0].data)[1],parse_TSP_Reference)),write_numbers_ws(n,a,t.Sheets[u],u,d,l[d])}),n}function numbers_iwa_doit(t,e,n,a){var o=CFB.find(t,e[n].location);if(!o)throw"Could not find ".concat(e[n].location," in Numbers template");var l=parse_iwa_file(decompress_iwa_file(o.content)),u=l.find(function(d){return d.id==n});a(u,l),o.content=compress_iwa_file(write_iwa_file(l)),o.size=o.content.length}function numbers_iwa_find(t,e,n){var a=CFB.find(t,e[n].location);if(!a)throw"Could not find ".concat(e[n].location," in Numbers template");var o=parse_iwa_file(decompress_iwa_file(a.content)),l=o.find(function(u){return u.id==n});return l}function numbers_add_ws(t,e,n){var a=-1,o=-1,l={};numbers_iwa_doit(t,e,1,function(y,b){var _=parse_shallow(y.messages[0].data);a=parse_TSP_Reference(parse_shallow(y.messages[0].data)[1][0].data),o=get_unique_msgid({deps:[1],location:e[a].location,type:2},e),l[a]=o,numbers_add_oref(y,o),_[1].push({type:2,data:write_TSP_Reference(o)});var w=numbers_iwa_find(t,e,a);w.id=o,e[1].location==e[o].location?b.push(w):numbers_iwa_doit(t,e,o,function(E,A){return A.push(w)}),y.messages[0].data=write_shallow(_)});var u=-1;numbers_iwa_doit(t,e,o,function(y,b){for(var _=parse_shallow(y.messages[0].data),w=3;w<=69;++w)delete _[w];var E=mappa(_[2],parse_TSP_Reference);E.forEach(function(k){return numbers_del_oref(y,k)}),u=get_unique_msgid({deps:[o],location:e[E[0]].location,type:e[E[0]].type},e),numbers_add_oref(y,u),l[E[0]]=u,_[2]=[{type:2,data:write_TSP_Reference(u)}];var A=numbers_iwa_find(t,e,E[0]);if(A.id=u,e[E[0]].location==e[o].location)b.push(A);else{var C=e[o].location;C=C.replace(/^Root Entry\//,""),C=C.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,e,2,function(k){var B=parse_shallow(k.messages[0].data),D=B[3].findIndex(function(j){var J,Y,L=parse_shallow(j.data);return(J=L[3])!=null&&J[0]?u8str(L[3][0].data)==C:!!((Y=L[2])!=null&&Y[0]&&u8str(L[2][0].data)==C)}),q=parse_shallow(B[3][D].data);q[6]||(q[6]=[]),q[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(u)}]])}),B[3][D].data=write_shallow(q),k.messages[0].data=write_shallow(B)}),numbers_iwa_doit(t,e,u,function(k,B){return B.push(A)})}y.messages[0].data=write_shallow(_)});var d=-1;numbers_iwa_doit(t,e,u,function(y,b){for(var _=parse_shallow(y.messages[0].data),w=parse_shallow(_[1][0].data),E=3;E<=69;++E)delete w[E];var A=parse_TSP_Reference(w[2][0].data);w[2][0].data=write_TSP_Reference(l[A]),_[1][0].data=write_shallow(w);var C=parse_TSP_Reference(_[2][0].data);numbers_del_oref(y,C),d=get_unique_msgid({deps:[u],location:e[C].location,type:e[C].type},e),numbers_add_oref(y,d),l[C]=d,_[2][0].data=write_TSP_Reference(d);var k=numbers_iwa_find(t,e,C);k.id=d,e[u].location==e[d].location?b.push(k):numbers_iwa_doit(t,e,d,function(B,D){return D.push(k)}),y.messages[0].data=write_shallow(_)});var m=e[d].location;m=m.replace(/^Root Entry\//,""),m=m.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,e,d,function(y,b){var _,w,E=parse_shallow(y.messages[0].data),A=u8str(E[1][0].data),C=A.replace(/-[A-Z0-9]*/,"-".concat(n.toString(16).padStart(4,"0")));if(E[1][0].data=stru8(C),[12,13,29,31,32,33,39,44,47,81,82,84].forEach(function(Y){return delete E[Y]}),E[45]){var k=parse_shallow(E[45][0].data),B=parse_TSP_Reference(k[1][0].data);numbers_del_oref(y,B),delete E[45]}if(E[70]){var D=parse_shallow(E[70][0].data);(_=D[2])==null||_.forEach(function(Y){var L=parse_shallow(Y.data);[2,3].map(function(Z){return L[Z][0]}).forEach(function(Z){var Q=parse_shallow(Z.data);if(Q[8]){var oe=parse_TSP_Reference(Q[8][0].data);numbers_del_oref(y,oe)}})}),delete E[70]}[46,30,34,35,36,38,48,49,60,61,62,63,64,71,72,73,74,75,85,86,87,88,89].forEach(function(Y){if(E[Y]){var L=parse_TSP_Reference(E[Y][0].data);delete E[Y],numbers_del_oref(y,L)}});var q=parse_shallow(E[4][0].data);{[2,4,5,6,11,12,13,15,16,17,18,19,20,21,22].forEach(function(Y){var L;if((L=q[Y])!=null&&L[0]){var Z=parse_TSP_Reference(q[Y][0].data),Q=get_unique_msgid({deps:[d],location:e[Z].location,type:e[Z].type},e);numbers_del_oref(y,Z),numbers_add_oref(y,Q),l[Z]=Q;var oe=numbers_iwa_find(t,e,Z);if(oe.id=Q,e[Z].location==e[d].location)b.push(oe);else{e[Q].location=e[Z].location.replace(Z.toString(),Q.toString()),e[Q].location==e[Z].location&&(e[Q].location=e[Q].location.replace(/\.iwa/,"-".concat(Q,".iwa"))),CFB.utils.cfb_add(t,e[Q].location,compress_iwa_file(write_iwa_file([oe])));var ae=e[Q].location;ae=ae.replace(/^Root Entry\//,""),ae=ae.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,e,2,function(U){var I=parse_shallow(U.messages[0].data);I[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Q)}],[{type:2,data:stru8(ae.replace(/-.*$/,""))}],[{type:2,data:stru8(ae)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),I[1]=[{type:0,data:write_varint49(Math.max(Q+1,varint_to_i32(I[1][0].data)))}];var x=I[3].findIndex(function(M){var O,z,X=parse_shallow(M.data);return(O=X[3])!=null&&O[0]?u8str(X[3][0].data)==m:!!((z=X[2])!=null&&z[0]&&u8str(X[2][0].data)==m)}),T=parse_shallow(I[3][x].data);T[6]||(T[6]=[]),T[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Q)}]])}),I[3][x].data=write_shallow(T),U.messages[0].data=write_shallow(I)})}q[Y][0].data=write_TSP_Reference(Q)}});var j=parse_shallow(q[1][0].data);(w=j[2])==null||w.forEach(function(Y){var L=parse_TSP_Reference(Y.data),Z=get_unique_msgid({deps:[d],location:e[L].location,type:e[L].type},e);numbers_del_oref(y,L),numbers_add_oref(y,Z),l[L]=Z;var Q=numbers_iwa_find(t,e,L);if(Q.id=Z,e[L].location==e[d].location)b.push(Q);else{e[Z].location=e[L].location.replace(L.toString(),Z.toString()),e[Z].location==e[L].location&&(e[Z].location=e[Z].location.replace(/\.iwa/,"-".concat(Z,".iwa"))),CFB.utils.cfb_add(t,e[Z].location,compress_iwa_file(write_iwa_file([Q])));var oe=e[Z].location;oe=oe.replace(/^Root Entry\//,""),oe=oe.replace(/^Index\//,"").replace(/\.iwa$/,""),numbers_iwa_doit(t,e,2,function(ae){var U=parse_shallow(ae.messages[0].data);U[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Z)}],[{type:2,data:stru8(oe.replace(/-.*$/,""))}],[{type:2,data:stru8(oe)}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),U[1]=[{type:0,data:write_varint49(Math.max(Z+1,varint_to_i32(U[1][0].data)))}];var I=U[3].findIndex(function(T){var M,O,z=parse_shallow(T.data);return(M=z[3])!=null&&M[0]?u8str(z[3][0].data)==m:!!((O=z[2])!=null&&O[0]&&u8str(z[2][0].data)==m)}),x=parse_shallow(U[3][I].data);x[6]||(x[6]=[]),x[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Z)}]])}),U[3][I].data=write_shallow(x),ae.messages[0].data=write_shallow(U)})}Y.data=write_TSP_Reference(Z)}),q[1][0].data=write_shallow(j);var J=parse_shallow(q[3][0].data);J[1].forEach(function(Y){var L=parse_shallow(Y.data),Z=parse_TSP_Reference(L[2][0].data),Q=l[Z];if(!l[Z]){Q=get_unique_msgid({deps:[d],location:"",type:e[Z].type},e),e[Q].location="Root Entry/Index/Tables/Tile-".concat(Q,".iwa"),l[Z]=Q;var oe=numbers_iwa_find(t,e,Z);oe.id=Q,numbers_del_oref(y,Z),numbers_add_oref(y,Q),CFB.utils.cfb_add(t,"/Index/Tables/Tile-".concat(Q,".iwa"),compress_iwa_file(write_iwa_file([oe]))),numbers_iwa_doit(t,e,2,function(ae){var U=parse_shallow(ae.messages[0].data);U[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Q)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(Q))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(0)}]])}),U[1]=[{type:0,data:write_varint49(Math.max(Q+1,varint_to_i32(U[1][0].data)))}];var I=U[3].findIndex(function(T){var M,O,z=parse_shallow(T.data);return(M=z[3])!=null&&M[0]?u8str(z[3][0].data)==m:!!((O=z[2])!=null&&O[0]&&u8str(z[2][0].data)==m)}),x=parse_shallow(U[3][I].data);x[6]||(x[6]=[]),x[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Q)}]])}),U[3][I].data=write_shallow(x),ae.messages[0].data=write_shallow(U)})}L[2][0].data=write_TSP_Reference(Q),Y.data=write_shallow(L)}),q[3][0].data=write_shallow(J)}E[4][0].data=write_shallow(q),y.messages[0].data=write_shallow(E)})}function write_numbers_ws(t,e,n,a,o,l){var u=[];numbers_iwa_doit(t,e,l,function(y){var b=parse_shallow(y.messages[0].data);b[1]=[{type:2,data:stru8(a)}],u=mappa(b[2],parse_TSP_Reference),y.messages[0].data=write_shallow(b)});var d=numbers_iwa_find(t,e,u[0]),m=parse_TSP_Reference(parse_shallow(d.messages[0].data)[2][0].data);numbers_iwa_doit(t,e,m,function(y,b){return write_numbers_tma(t,e,n,y,b,m)})}var USE_WIDE_ROWS=!0;function write_numbers_tma(t,e,n,a,o,l){var u=decode_range(n["!ref"]);u.s.r=u.s.c=0;var d=!1;u.e.c>999&&(d=!0,u.e.c=999),u.e.r>999999&&(d=!0,u.e.r=999999),d&&console.error("Truncating to ".concat(encode_range(u)));var m=sheet_to_json(n,{range:u,header:1}),y=["~Sh33tJ5~"],b=e[l].location;b=b.replace(/^Root Entry\//,""),b=b.replace(/^Index\//,"").replace(/\.iwa$/,"");var _=parse_shallow(a.messages[0].data);{_[6][0].data=write_varint49(u.e.r+1),_[7][0].data=write_varint49(u.e.c+1),delete _[46];var w=parse_shallow(_[4][0].data);{var E=parse_TSP_Reference(parse_shallow(w[1][0].data)[2][0].data);numbers_iwa_doit(t,e,E,function(x,T){var M,O=parse_shallow(x.messages[0].data);if((M=O?.[2])!=null&&M[0])for(var z=0;z<m.length;++z){var X=parse_shallow(O[2][0].data);X[1][0].data=write_varint49(z),X[4][0].data=write_varint49(m[z].length),O[2][z]={type:O[2][0].type,data:write_shallow(X)}}x.messages[0].data=write_shallow(O)});var A=parse_TSP_Reference(w[2][0].data);numbers_iwa_doit(t,e,A,function(x,T){for(var M=parse_shallow(x.messages[0].data),O=0;O<=u.e.c;++O){var z=parse_shallow(M[2][0].data);z[1][0].data=write_varint49(O),z[4][0].data=write_varint49(u.e.r+1),M[2][O]={type:M[2][0].type,data:write_shallow(z)}}x.messages[0].data=write_shallow(M)});var C=parse_shallow(w[9][0].data);C[1]=[];var k=parse_shallow(w[3][0].data);{var B=256;k[2]=[{type:0,data:write_varint49(B)}];var D=parse_TSP_Reference(parse_shallow(k[1][0].data)[2][0].data),q=function(){var x=numbers_iwa_find(t,e,2),T=parse_shallow(x.messages[0].data),M=T[3].filter(function(O){return varint_to_i32(parse_shallow(O.data)[1][0].data)==D});return M?.length?varint_to_i32(parse_shallow(M[0].data)[12][0].data):0}();CFB.utils.cfb_del(t,e[D].location),numbers_iwa_doit(t,e,2,function(x){var T=parse_shallow(x.messages[0].data);T[3]=T[3].filter(function(z){return varint_to_i32(parse_shallow(z.data)[1][0].data)!=D});var M=T[3].findIndex(function(z){var X,H,P=parse_shallow(z.data);return(X=P[3])!=null&&X[0]?u8str(P[3][0].data)==b:!!((H=P[2])!=null&&H[0]&&u8str(P[2][0].data)==b)}),O=parse_shallow(T[3][M].data);O[6]||(O[6]=[]),O[6]=O[6].filter(function(z){return varint_to_i32(parse_shallow(z.data)[1][0].data)!=D}),T[3][M].data=write_shallow(O),x.messages[0].data=write_shallow(T)}),numbers_del_oref(a,D),k[1]=[];for(var j=Math.ceil((u.e.r+1)/B),J=0;J<j;++J){var Y=get_unique_msgid({deps:[],location:"",type:6002},e);e[Y].location="Root Entry/Index/Tables/Tile-".concat(Y,".iwa");for(var L=[[],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min(u.e.r+1,(J+1)*B))}],[{type:0,data:write_varint49(0)}],[{type:0,data:write_varint49(Math.min((J+1)*B,u.e.r+1)-J*B)}],[],[{type:0,data:write_varint49(5)}],[{type:0,data:write_varint49(1)}],[{type:0,data:write_varint49(1)}]],Z=J*B;Z<=Math.min(u.e.r,(J+1)*B-1);++Z){var Q=write_TST_TileRowInfo(m[Z],y,USE_WIDE_ROWS);Q[1][0].data=write_varint49(Z-J*B),L[5].push({data:write_shallow(Q),type:2})}k[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(J)}],[{type:2,data:write_TSP_Reference(Y)}]])});var oe={id:Y,messages:[write_iwam(6002,write_shallow(L))]},ae=compress_iwa_file(write_iwa_file([oe]));CFB.utils.cfb_add(t,"/Index/Tables/Tile-".concat(Y,".iwa"),ae),numbers_iwa_doit(t,e,2,function(x){var T=parse_shallow(x.messages[0].data);T[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Y)}],[{type:2,data:stru8("Tables/Tile")}],[{type:2,data:stru8("Tables/Tile-".concat(Y))}],[{type:2,data:new Uint8Array([2,0,0])}],[{type:2,data:new Uint8Array([2,0,0])}],[],[],[],[],[{type:0,data:write_varint49(0)}],[],[{type:0,data:write_varint49(q)}]])}),T[1]=[{type:0,data:write_varint49(Math.max(Y+1,varint_to_i32(T[1][0].data)))}];var M=T[3].findIndex(function(z){var X,H,P=parse_shallow(z.data);return(X=P[3])!=null&&X[0]?u8str(P[3][0].data)==b:!!((H=P[2])!=null&&H[0]&&u8str(P[2][0].data)==b)}),O=parse_shallow(T[3][M].data);O[6]||(O[6]=[]),O[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(Y)}]])}),T[3][M].data=write_shallow(O),x.messages[0].data=write_shallow(T)}),numbers_add_oref(a,Y),C[1].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(J*B)}],[{type:0,data:write_varint49(J)}]])})}}if(w[3][0].data=write_shallow(k),w[9][0].data=write_shallow(C),w[10]=[{type:2,data:new Uint8Array([])}],n["!merges"]){var U=get_unique_msgid({type:6144,deps:[l],location:e[l].location},e);o.push({id:U,messages:[write_iwam(6144,write_shallow([[],n["!merges"].map(function(x){return{type:2,data:write_shallow([[],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([x.s.r,x.s.c]).buffer)}]])}],[{type:2,data:write_shallow([[],[{type:5,data:new Uint8Array(new Uint16Array([x.e.r-x.s.r+1,x.e.c-x.s.c+1]).buffer)}]])}]])}})]))]}),w[13]=[{type:2,data:write_TSP_Reference(U)}],numbers_iwa_doit(t,e,2,function(x){var T=parse_shallow(x.messages[0].data),M=T[3].findIndex(function(z){var X,H,P=parse_shallow(z.data);return(X=P[3])!=null&&X[0]?u8str(P[3][0].data)==b:!!((H=P[2])!=null&&H[0]&&u8str(P[2][0].data)==b)}),O=parse_shallow(T[3][M].data);O[6]||(O[6]=[]),O[6].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(U)}]])}),T[3][M].data=write_shallow(O),x.messages[0].data=write_shallow(T)}),numbers_add_oref(a,U)}else delete w[13];var I=parse_TSP_Reference(w[4][0].data);numbers_iwa_doit(t,e,I,function(x){var T=parse_shallow(x.messages[0].data);T[3]=[],y.forEach(function(M,O){O!=0&&T[3].push({type:2,data:write_shallow([[],[{type:0,data:write_varint49(O)}],[{type:0,data:write_varint49(1)}],[{type:2,data:stru8(M)}]])})}),x.messages[0].data=write_shallow(T)})}_[4][0].data=write_shallow(w)}a.messages[0].data=write_shallow(_)}function fix_opts_func(t){return function(n){for(var a=0;a!=t.length;++a){var o=t[a];n[o[0]]===void 0&&(n[o[0]]=o[1]),o[2]==="n"&&(n[o[0]]=Number(n[o[0]]))}}}function fix_read_opts(t){fix_opts_func([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function fix_write_opts(t){fix_opts_func([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(t)}function get_sheet_type(t){return RELS.WS.indexOf(t)>-1?"sheet":t==RELS.CS?"chart":t==RELS.DS?"dialog":t==RELS.MS?"macro":t&&t.length?t:"sheet"}function safe_parse_wbrels(t,e){if(!t)return 0;try{t=e.map(function(a){return a.id||(a.id=a.strRelID),[a.name,t["!id"][a.id].Target,get_sheet_type(t["!id"][a.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function safe_parse_sheet(t,e,n,a,o,l,u,d,m,y,b,_){try{l[a]=parse_rels(getzipstr(t,n,!0),e);var w=getzipdata(t,e),E;switch(d){case"sheet":E=parse_ws(w,e,o,m,l[a],y,b,_);break;case"chart":if(E=parse_cs(w,e,o,m,l[a],y,b,_),!E||!E["!drawel"])break;var A=resolve_path(E["!drawel"].Target,e),C=get_rels_path(A),k=parse_drawing(getzipstr(t,A,!0),parse_rels(getzipstr(t,C,!0),A)),B=resolve_path(k,A),D=get_rels_path(B);E=parse_chart(getzipstr(t,B,!0),B,m,parse_rels(getzipstr(t,D,!0),B),y,E);break;case"macro":E=parse_ms(w,e,o,m,l[a],y,b,_);break;case"dialog":E=parse_ds(w,e,o,m,l[a],y,b,_);break;default:throw new Error("Unrecognized sheet type "+d)}u[a]=E;var q=[],j=[];l&&l[a]&&keys(l[a]).forEach(function(J){var Y="";if(l[a][J].Type==RELS.CMNT){if(Y=resolve_path(l[a][J].Target,e),q=parse_cmnt(getzipdata(t,Y,!0),Y,m),!q||!q.length)return;sheet_insert_comments(E,q,!1)}l[a][J].Type==RELS.TCMNT&&(Y=resolve_path(l[a][J].Target,e),j=j.concat(parse_tcmnt_xml(getzipdata(t,Y,!0),m)))}),j&&j.length&&sheet_insert_comments(E,j,!0,m.people||[])}catch(J){if(m.WTF)throw J}}function strip_front_slash(t){return t.charAt(0)=="/"?t.slice(1):t}function parse_zip(t,e){if(make_ssf(),e=e||{},fix_read_opts(e),safegetzipfile(t,"META-INF/manifest.xml")||safegetzipfile(t,"objectdata.xml"))return parse_ods(t,e);if(safegetzipfile(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof parse_numbers_iwa<"u"){if(t.FileIndex)return parse_numbers_iwa(t,e);var n=CFB.utils.cfb_new();return zipentries(t).forEach(function(T){zip_add_file(n,T,getzipbin(t,T))}),parse_numbers_iwa(n,e)}throw new Error("Unsupported NUMBERS file")}if(!safegetzipfile(t,"[Content_Types].xml")){if(safegetzipfile(t,"index.xml.gz"))throw new Error("Unsupported NUMBERS 08 file");if(safegetzipfile(t,"index.xml"))throw new Error("Unsupported NUMBERS 09 file");var a=CFB.find(t,"Index.zip");if(a)return e=dup(e),delete e.type,typeof a.content=="string"&&(e.type="binary"),typeof Bun<"u"&&Buffer.isBuffer(a.content)?readSync(new Uint8Array(a.content),e):readSync(a.content,e);throw new Error("Unsupported ZIP file")}var o=zipentries(t),l=parse_ct(getzipstr(t,"[Content_Types].xml")),u=!1,d,m;if(l.workbooks.length===0&&(m="xl/workbook.xml",getzipdata(t,m,!0)&&l.workbooks.push(m)),l.workbooks.length===0){if(m="xl/workbook.bin",!getzipdata(t,m,!0))throw new Error("Could not find workbook");l.workbooks.push(m),u=!0}l.workbooks[0].slice(-3)=="bin"&&(u=!0);var y={},b={};if(!e.bookSheets&&!e.bookProps){if(strs=[],l.sst)try{strs=parse_sst(getzipdata(t,strip_front_slash(l.sst)),l.sst,e)}catch(T){if(e.WTF)throw T}e.cellStyles&&l.themes.length&&(y=parse_theme_xml(getzipstr(t,l.themes[0].replace(/^\//,""),!0)||"",e)),l.style&&(b=parse_sty(getzipdata(t,strip_front_slash(l.style)),l.style,y,e))}l.links.map(function(T){try{var M=parse_rels(getzipstr(t,get_rels_path(strip_front_slash(T))),T);return parse_xlink(getzipdata(t,strip_front_slash(T)),M,T,e)}catch{}});var _=parse_wb(getzipdata(t,strip_front_slash(l.workbooks[0])),l.workbooks[0],e),w={},E="";l.coreprops.length&&(E=getzipdata(t,strip_front_slash(l.coreprops[0]),!0),E&&(w=parse_core_props(E)),l.extprops.length!==0&&(E=getzipdata(t,strip_front_slash(l.extprops[0]),!0),E&&parse_ext_props(E,w,e)));var A={};(!e.bookSheets||e.bookProps)&&l.custprops.length!==0&&(E=getzipstr(t,strip_front_slash(l.custprops[0]),!0),E&&(A=parse_cust_props(E,e)));var C={};if((e.bookSheets||e.bookProps)&&(_.Sheets?d=_.Sheets.map(function(M){return M.name}):w.Worksheets&&w.SheetNames.length>0&&(d=w.SheetNames),e.bookProps&&(C.Props=w,C.Custprops=A),e.bookSheets&&typeof d<"u"&&(C.SheetNames=d),e.bookSheets?C.SheetNames:e.bookProps))return C;d={};var k={};e.bookDeps&&l.calcchain&&(k=parse_cc(getzipdata(t,strip_front_slash(l.calcchain)),l.calcchain));var B=0,D={},q,j;{var J=_.Sheets;w.Worksheets=J.length,w.SheetNames=[];for(var Y=0;Y!=J.length;++Y)w.SheetNames[Y]=J[Y].name}var L=u?"bin":"xml",Z=l.workbooks[0].lastIndexOf("/"),Q=(l.workbooks[0].slice(0,Z+1)+"_rels/"+l.workbooks[0].slice(Z+1)+".rels").replace(/^\//,"");safegetzipfile(t,Q)||(Q="xl/_rels/workbook."+L+".rels");var oe=parse_rels(getzipstr(t,Q,!0),Q.replace(/_rels.*/,"s5s"));(l.metadata||[]).length>=1&&(e.xlmeta=parse_xlmeta(getzipdata(t,strip_front_slash(l.metadata[0])),l.metadata[0],e)),(l.people||[]).length>=1&&(e.people=parse_people_xml(getzipdata(t,strip_front_slash(l.people[0])),e)),oe&&(oe=safe_parse_wbrels(oe,_.Sheets));var ae=getzipdata(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(B=0;B!=w.Worksheets;++B){var U="sheet";if(oe&&oe[B]?(q="xl/"+oe[B][1].replace(/[\/]?xl\//,""),safegetzipfile(t,q)||(q=oe[B][1]),safegetzipfile(t,q)||(q=Q.replace(/_rels\/.*$/,"")+oe[B][1]),U=oe[B][2]):(q="xl/worksheets/sheet"+(B+1-ae)+"."+L,q=q.replace(/sheet0\./,"sheet.")),j=q.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),e&&e.sheets!=null)switch(typeof e.sheets){case"number":if(B!=e.sheets)continue e;break;case"string":if(w.SheetNames[B].toLowerCase()!=e.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(e.sheets)){for(var I=!1,x=0;x!=e.sheets.length;++x)typeof e.sheets[x]=="number"&&e.sheets[x]==B&&(I=1),typeof e.sheets[x]=="string"&&e.sheets[x].toLowerCase()==w.SheetNames[B].toLowerCase()&&(I=1);if(!I)continue e}}safe_parse_sheet(t,q,j,w.SheetNames[B],B,D,d,U,e,_,y,b)}return C={Directory:l,Workbook:_,Props:w,Custprops:A,Deps:k,Sheets:d,SheetNames:w.SheetNames,Strings:strs,Styles:b,Themes:y,SSF:dup(table_fmt)},e&&e.bookFiles&&(t.files?(C.keys=o,C.files=t.files):(C.keys=[],C.files={},t.FullPaths.forEach(function(T,M){T=T.replace(/^Root Entry[\/]/,""),C.keys.push(T),C.files[T]=t.FileIndex[M]}))),e&&e.bookVBA&&(l.vba.length>0?C.vbaraw=getzipdata(t,strip_front_slash(l.vba[0]),!0):l.defaults&&l.defaults.bin===CT_VBA&&(C.vbaraw=getzipdata(t,"xl/vbaProject.bin",!0))),C.bookType=u?"xlsb":"xlsx",C}function parse_xlsxcfb(t,e){var n=e||{},a="Workbook",o=CFB.find(t,a);try{if(a="/!DataSpaces/Version",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(parse_DataSpaceVersionInfo(o.content),a="/!DataSpaces/DataSpaceMap",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=parse_DataSpaceMap(o.content);if(l.length!==1||l[0].comps.length!==1||l[0].comps[0].t!==0||l[0].name!=="StrongEncryptionDataSpace"||l[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);var u=parse_DataSpaceDefinition(o.content);if(u.length!=1||u[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);parse_Primary(o.content)}catch{}if(a="/EncryptionInfo",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);var d=parse_EncryptionInfo(o.content);if(a="/EncryptedPackage",o=CFB.find(t,a),!o||!o.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(d[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(d[1],o.content,n.password||"",n);if(d[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(d[1],o.content,n.password||"",n);throw new Error("File is password-protected")}function write_zip_xlsb(t,e){t&&!t.SSF&&(t.SSF=dup(table_fmt)),t&&t.SSF&&(make_ssf(),SSF_load_table(t.SSF),e.revssf=evert_num(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,browser_has_Map?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="bin",a=!0,o=new_ct();fix_write_opts(e=e||{});var l=zip_new(),u="",d=0;if(e.cellXfs=[],get_cell_style(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),u="docProps/core.xml",zip_add_file(l,u,write_core_props(t.Props,e)),o.coreprops.push(u),add_rels(e.rels,2,u,RELS.CORE_PROPS),u="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var m=[],y=0;y<t.SheetNames.length;++y)(t.Workbook.Sheets[y]||{}).Hidden!=2&&m.push(t.SheetNames[y]);t.Props.SheetNames=m}for(t.Props.Worksheets=t.Props.SheetNames.length,zip_add_file(l,u,write_ext_props(t.Props)),o.extprops.push(u),add_rels(e.rels,3,u,RELS.EXT_PROPS),t.Custprops!==t.Props&&keys(t.Custprops||{}).length>0&&(u="docProps/custom.xml",zip_add_file(l,u,write_cust_props(t.Custprops)),o.custprops.push(u),add_rels(e.rels,4,u,RELS.CUST_PROPS)),d=1;d<=t.SheetNames.length;++d){var b={"!id":{}},_=t.Sheets[t.SheetNames[d-1]],w=(_||{})["!type"]||"sheet";switch(w){case"chart":default:u="xl/worksheets/sheet"+d+"."+n,zip_add_file(l,u,write_ws_bin(d-1,e,t,b)),o.sheets.push(u),add_rels(e.wbrels,-1,"worksheets/sheet"+d+"."+n,RELS.WS[0])}if(_){var E=_["!comments"],A=!1,C="";E&&E.length>0&&(C="xl/comments"+d+"."+n,zip_add_file(l,C,write_comments_bin(E)),o.comments.push(C),add_rels(b,-1,"../comments"+d+"."+n,RELS.CMNT),A=!0),_["!legacy"]&&A&&zip_add_file(l,"xl/drawings/vmlDrawing"+d+".vml",write_vml(d,_["!comments"])),delete _["!comments"],delete _["!legacy"]}b["!id"].rId1&&zip_add_file(l,get_rels_path(u),write_rels(b))}e.Strings!=null&&e.Strings.length>0&&(u="xl/sharedStrings."+n,zip_add_file(l,u,write_sst_bin(e.Strings)),o.strs.push(u),add_rels(e.wbrels,-1,"sharedStrings."+n,RELS.SST)),u="xl/workbook."+n,zip_add_file(l,u,write_wb_bin(t)),o.workbooks.push(u),add_rels(e.rels,1,u,RELS.WB),u="xl/theme/theme1.xml";var k=write_theme(t.Themes,e);return zip_add_file(l,u,k),o.themes.push(u),add_rels(e.wbrels,-1,"theme/theme1.xml",RELS.THEME),u="xl/styles."+n,zip_add_file(l,u,write_sty_bin(t,e)),o.styles.push(u),add_rels(e.wbrels,-1,"styles."+n,RELS.STY),t.vbaraw&&a&&(u="xl/vbaProject.bin",zip_add_file(l,u,t.vbaraw),o.vba.push(u),add_rels(e.wbrels,-1,"vbaProject.bin",RELS.VBA)),u="xl/metadata."+n,zip_add_file(l,u,write_xlmeta_bin()),o.metadata.push(u),add_rels(e.wbrels,-1,"metadata."+n,RELS.XLMETA),zip_add_file(l,"[Content_Types].xml",write_ct(o,e)),zip_add_file(l,"_rels/.rels",write_rels(e.rels)),zip_add_file(l,"xl/_rels/workbook."+n+".rels",write_rels(e.wbrels)),delete e.revssf,delete e.ssf,l}function write_zip_xlsx(t,e){t&&!t.SSF&&(t.SSF=dup(table_fmt)),t&&t.SSF&&(make_ssf(),SSF_load_table(t.SSF),e.revssf=evert_num(t.SSF),e.revssf[t.SSF[65535]]=0,e.ssf=t.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,browser_has_Map?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var n="xml",a=VBAFMTS.indexOf(e.bookType)>-1,o=new_ct();fix_write_opts(e=e||{});var l=zip_new(),u="",d=0;if(e.cellXfs=[],get_cell_style(e.cellXfs,{},{revssf:{General:0}}),t.Props||(t.Props={}),u="docProps/core.xml",zip_add_file(l,u,write_core_props(t.Props,e)),o.coreprops.push(u),add_rels(e.rels,2,u,RELS.CORE_PROPS),u="docProps/app.xml",!(t.Props&&t.Props.SheetNames))if(!t.Workbook||!t.Workbook.Sheets)t.Props.SheetNames=t.SheetNames;else{for(var m=[],y=0;y<t.SheetNames.length;++y)(t.Workbook.Sheets[y]||{}).Hidden!=2&&m.push(t.SheetNames[y]);t.Props.SheetNames=m}t.Props.Worksheets=t.Props.SheetNames.length,zip_add_file(l,u,write_ext_props(t.Props)),o.extprops.push(u),add_rels(e.rels,3,u,RELS.EXT_PROPS),t.Custprops!==t.Props&&keys(t.Custprops||{}).length>0&&(u="docProps/custom.xml",zip_add_file(l,u,write_cust_props(t.Custprops)),o.custprops.push(u),add_rels(e.rels,4,u,RELS.CUST_PROPS));var b=["SheetJ5"];for(e.tcid=0,d=1;d<=t.SheetNames.length;++d){var _={"!id":{}},w=t.Sheets[t.SheetNames[d-1]],E=(w||{})["!type"]||"sheet";switch(E){case"chart":default:u="xl/worksheets/sheet"+d+"."+n,zip_add_file(l,u,write_ws_xml(d-1,e,t,_)),o.sheets.push(u),add_rels(e.wbrels,-1,"worksheets/sheet"+d+"."+n,RELS.WS[0])}if(w){var A=w["!comments"],C=!1,k="";if(A&&A.length>0){var B=!1;A.forEach(function(D){D[1].forEach(function(q){q.T==!0&&(B=!0)})}),B&&(k="xl/threadedComments/threadedComment"+d+".xml",zip_add_file(l,k,write_tcmnt_xml(A,b,e)),o.threadedcomments.push(k),add_rels(_,-1,"../threadedComments/threadedComment"+d+".xml",RELS.TCMNT)),k="xl/comments"+d+"."+n,zip_add_file(l,k,write_comments_xml(A)),o.comments.push(k),add_rels(_,-1,"../comments"+d+"."+n,RELS.CMNT),C=!0}w["!legacy"]&&C&&zip_add_file(l,"xl/drawings/vmlDrawing"+d+".vml",write_vml(d,w["!comments"])),delete w["!comments"],delete w["!legacy"]}_["!id"].rId1&&zip_add_file(l,get_rels_path(u),write_rels(_))}return e.Strings!=null&&e.Strings.length>0&&(u="xl/sharedStrings."+n,zip_add_file(l,u,write_sst_xml(e.Strings,e)),o.strs.push(u),add_rels(e.wbrels,-1,"sharedStrings."+n,RELS.SST)),u="xl/workbook."+n,zip_add_file(l,u,write_wb_xml(t)),o.workbooks.push(u),add_rels(e.rels,1,u,RELS.WB),u="xl/theme/theme1.xml",zip_add_file(l,u,write_theme(t.Themes,e)),o.themes.push(u),add_rels(e.wbrels,-1,"theme/theme1.xml",RELS.THEME),u="xl/styles."+n,zip_add_file(l,u,write_sty_xml(t,e)),o.styles.push(u),add_rels(e.wbrels,-1,"styles."+n,RELS.STY),t.vbaraw&&a&&(u="xl/vbaProject.bin",zip_add_file(l,u,t.vbaraw),o.vba.push(u),add_rels(e.wbrels,-1,"vbaProject.bin",RELS.VBA)),u="xl/metadata."+n,zip_add_file(l,u,write_xlmeta_xml()),o.metadata.push(u),add_rels(e.wbrels,-1,"metadata."+n,RELS.XLMETA),b.length>1&&(u="xl/persons/person.xml",zip_add_file(l,u,write_people_xml(b)),o.people.push(u),add_rels(e.wbrels,-1,"persons/person.xml",RELS.PEOPLE)),zip_add_file(l,"[Content_Types].xml",write_ct(o,e)),zip_add_file(l,"_rels/.rels",write_rels(e.rels)),zip_add_file(l,"xl/_rels/workbook."+n+".rels",write_rels(e.wbrels)),delete e.revssf,delete e.ssf,l}function firstbyte(t,e){var n="";switch((e||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":n=Base64_decode(t.slice(0,12));break;case"binary":n=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3),n.charCodeAt(4),n.charCodeAt(5),n.charCodeAt(6),n.charCodeAt(7)]}function read_cfb(t,e){return CFB.find(t,"EncryptedPackage")?parse_xlsxcfb(t,e):parse_xlscfb(t,e)}function read_zip(t,e){var n,a=t,o=e||{};return o.type||(o.type=has_buf&&Buffer.isBuffer(t)?"buffer":"base64"),n=zip_read(a,o),parse_zip(n,o)}function read_plaintext(t,e){var n=0;e:for(;n<t.length;)switch(t.charCodeAt(n)){case 10:case 13:case 32:++n;break;case 60:return parse_xlml(t.slice(n),e);default:break e}return PRN.to_workbook(t,e)}function read_plaintext_raw(t,e){var n="",a=firstbyte(t,e);switch(e.type){case"base64":n=Base64_decode(t);break;case"binary":n=t;break;case"buffer":n=t.toString("binary");break;case"array":n=cc2str(t);break;default:throw new Error("Unrecognized type "+e.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(n=utf8read(n)),e.type="binary",read_plaintext(n,e)}function read_utf16(t,e){var n=t;return e.type=="base64"&&(n=Base64_decode(n)),n=utf16leread(n.slice(2)),e.type="binary",read_plaintext(n,e)}function bstrify(t){return t.match(/[^\x00-\x7F]/)?utf8write(t):t}function read_prn(t,e,n,a){return a?(n.type="string",PRN.to_workbook(t,n)):PRN.to_workbook(e,n)}function readSync(t,e){reset_cp();var n=e||{};if(n.codepage&&typeof $cptable>"u"&&console.error("Codepage tables are not loaded.  Non-ASCII characters may not give expected results"),typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return readSync(new Uint8Array(t),(n=dup(n),n.type="array",n));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!n.type&&(n.type=typeof Deno<"u"?"buffer":"array");var a=t,o=[0,0,0,0],l=!1;if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),_ssfopts={},n.dateNF&&(_ssfopts.dateNF=n.dateNF),n.type||(n.type=has_buf&&Buffer.isBuffer(t)?"buffer":"base64"),n.type=="file"&&(n.type=has_buf?"buffer":"binary",a=read_binary(t),typeof Uint8Array<"u"&&!has_buf&&(n.type="array")),n.type=="string"&&(l=!0,n.type="binary",n.codepage=65001,a=bstrify(t)),n.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var u=new ArrayBuffer(3),d=new Uint8Array(u);if(d.foo="bar",!d.foo)return n=dup(n),n.type="array",readSync(ab2a(a),n)}switch((o=firstbyte(a,n))[0]){case 208:if(o[1]===207&&o[2]===17&&o[3]===224&&o[4]===161&&o[5]===177&&o[6]===26&&o[7]===225)return read_cfb(CFB.read(a,n),n);break;case 9:if(o[1]<=8)return parse_xlscfb(a,n);break;case 60:return parse_xlml(a,n);case 73:if(o[1]===73&&o[2]===42&&o[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(o[1]===68)return read_wb_ID(a,n);break;case 84:if(o[1]===65&&o[2]===66&&o[3]===76)return DIF.to_workbook(a,n);break;case 80:return o[1]===75&&o[2]<9&&o[3]<9?read_zip(a,n):read_prn(t,a,n,l);case 239:return o[3]===60?parse_xlml(a,n):read_prn(t,a,n,l);case 255:if(o[1]===254)return read_utf16(a,n);if(o[1]===0&&o[2]===2&&o[3]===0)return WK_.to_workbook(a,n);break;case 0:if(o[1]===0&&(o[2]>=2&&o[3]===0||o[2]===0&&(o[3]===8||o[3]===9)))return WK_.to_workbook(a,n);break;case 3:case 131:case 139:case 140:return DBF.to_workbook(a,n);case 123:if(o[1]===92&&o[2]===114&&o[3]===116)return rtf_to_workbook(a,n);break;case 10:case 13:case 32:return read_plaintext_raw(a,n);case 137:if(o[1]===80&&o[2]===78&&o[3]===71)throw new Error("PNG Image File is not a spreadsheet");break;case 8:if(o[1]===231)throw new Error("Unsupported Multiplan 1.x file!");break;case 12:if(o[1]===236)throw new Error("Unsupported Multiplan 2.x file!");if(o[1]===237)throw new Error("Unsupported Multiplan 3.x file!");break}return DBF_SUPPORTED_VERSIONS.indexOf(o[0])>-1&&o[2]<=12&&o[3]<=31?DBF.to_workbook(a,n):read_prn(t,a,n,l)}function readFileSync(t,e){var n=e||{};return n.type="file",readSync(t,n)}function write_cfb_ctr(t,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return write_dl(e.file,CFB.write(t,{type:has_buf?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return CFB.write(t,e)}function write_zip(t,e){switch(e.bookType){case"ods":return write_ods(t,e);case"numbers":return write_numbers_iwa(t,e);case"xlsb":return write_zip_xlsb(t,e);default:return write_zip_xlsx(t,e)}}function write_zip_type(t,e){var n=dup(e||{}),a=write_zip(t,n);return write_zip_denouement(a,n)}function write_zip_denouement(t,e){var n={},a=has_buf?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(n.compression="DEFLATE"),e.password)n.type=a;else switch(e.type){case"base64":n.type="base64";break;case"binary":n.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":n.type=a;break;default:throw new Error("Unrecognized type "+e.type)}var o=t.FullPaths?CFB.write(t,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[n.type]||n.type,compression:!!e.compression}):t.generate(n);if(typeof Deno<"u"&&typeof o=="string"){if(e.type=="binary"||e.type=="base64")return o;o=new Uint8Array(s2ab(o))}return e.password&&typeof encrypt_agile<"u"?write_cfb_ctr(encrypt_agile(o,e.password),e):e.type==="file"?write_dl(e.file,o):e.type=="string"?utf8read(o):o}function write_cfb_type(t,e){var n=e||{},a=write_xlscfb(t,n);return write_cfb_ctr(a,n)}function write_string_type(t,e,n){n||(n="");var a=n+t;switch(e.type){case"base64":return Base64_encode(utf8write(a));case"binary":return utf8write(a);case"string":return t;case"file":return write_dl(e.file,a,"utf8");case"buffer":return has_buf?Buffer_from(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):write_string_type(a,{type:"binary"}).split("").map(function(o){return o.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function write_stxt_type(t,e){switch(e.type){case"base64":return Base64_encode_pass(t);case"binary":return t;case"string":return t;case"file":return write_dl(e.file,t,"binary");case"buffer":return has_buf?Buffer_from(t,"binary"):t.split("").map(function(n){return n.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function write_binary_type(t,e){switch(e.type){case"string":case"base64":case"binary":for(var n="",a=0;a<t.length;++a)n+=String.fromCharCode(t[a]);return e.type=="base64"?Base64_encode(n):e.type=="string"?utf8read(n):n;case"file":return write_dl(e.file,t);case"buffer":return t;default:throw new Error("Unrecognized type "+e.type)}}function writeSync(t,e){reset_cp(),check_wb(t);var n=dup(e||{});if(n.cellStyles&&(n.cellNF=!0,n.sheetStubs=!0),n.type=="array"){n.type="binary";var a=writeSync(t,n);return n.type="array",s2ab(a)}var o=0;if(n.sheet&&(typeof n.sheet=="number"?o=n.sheet:o=t.SheetNames.indexOf(n.sheet),!t.SheetNames[o]))throw new Error("Sheet not found: "+n.sheet+" : "+typeof n.sheet);switch(n.bookType||"xlsb"){case"xml":case"xlml":return write_string_type(write_xlml(t,n),n);case"slk":case"sylk":return write_string_type(SYLK.from_sheet(t.Sheets[t.SheetNames[o]],n,t),n);case"htm":case"html":return write_string_type(sheet_to_html(t.Sheets[t.SheetNames[o]],n),n);case"txt":return write_stxt_type(sheet_to_txt(t.Sheets[t.SheetNames[o]],n),n);case"csv":return write_string_type(sheet_to_csv(t.Sheets[t.SheetNames[o]],n),n,"\uFEFF");case"dif":return write_string_type(DIF.from_sheet(t.Sheets[t.SheetNames[o]],n),n);case"dbf":return write_binary_type(DBF.from_sheet(t.Sheets[t.SheetNames[o]],n),n);case"prn":return write_string_type(PRN.from_sheet(t.Sheets[t.SheetNames[o]],n),n);case"rtf":return write_string_type(sheet_to_rtf(t.Sheets[t.SheetNames[o]]),n);case"eth":return write_string_type(ETH.from_sheet(t.Sheets[t.SheetNames[o]],n),n);case"fods":return write_string_type(write_ods(t,n),n);case"wk1":return write_binary_type(WK_.sheet_to_wk1(t.Sheets[t.SheetNames[o]],n),n);case"wk3":return write_binary_type(WK_.book_to_wk3(t,n),n);case"biff2":n.biff||(n.biff=2);case"biff3":n.biff||(n.biff=3);case"biff4":return n.biff||(n.biff=4),write_binary_type(write_biff_buf(t,n),n);case"biff5":n.biff||(n.biff=5);case"biff8":case"xla":case"xls":return n.biff||(n.biff=8),write_cfb_type(t,n);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return write_zip_type(t,n);default:throw new Error("Unrecognized bookType |"+n.bookType+"|")}}function resolve_book_type(t){if(!t.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},n=t.file.slice(t.file.lastIndexOf(".")).toLowerCase();n.match(/^\.[a-z]+$/)&&(t.bookType=n.slice(1)),t.bookType=e[t.bookType]||t.bookType}}function writeFileSync(t,e,n){var a=n||{};return a.type="file",a.file=e,resolve_book_type(a),writeSync(t,a)}function make_json_row(t,e,n,a,o,l,u){var d=encode_row(n),m=u.defval,y=u.raw||!Object.prototype.hasOwnProperty.call(u,"raw"),b=!0,_=t["!data"]!=null,w=o===1?[]:{};if(o!==1)if(Object.defineProperty)try{Object.defineProperty(w,"__rowNum__",{value:n,enumerable:!1})}catch{w.__rowNum__=n}else w.__rowNum__=n;if(!_||t["!data"][n])for(var E=e.s.c;E<=e.e.c;++E){var A=_?(t["!data"][n]||[])[E]:t[a[E]+d];if(A===void 0||A.t===void 0){if(m===void 0)continue;l[E]!=null&&(w[l[E]]=m);continue}var C=A.v;switch(A.t){case"z":if(C==null)break;continue;case"e":C=C==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+A.t)}if(l[E]!=null){if(C==null)if(A.t=="e"&&C===null)w[l[E]]=null;else if(m!==void 0)w[l[E]]=m;else if(y&&C===null)w[l[E]]=null;else continue;else w[l[E]]=y&&(A.t!=="n"||A.t==="n"&&u.rawNumbers!==!1)?C:format_cell(A,C,u);C!=null&&(b=!1)}}return{row:w,isempty:b}}function sheet_to_json(t,e){if(t==null||t["!ref"]==null)return[];var n={t:"n",v:0},a=0,o=1,l=[],u=0,d="",m={s:{r:0,c:0},e:{r:0,c:0}},y=e||{},b=y.range!=null?y.range:t["!ref"];switch(y.header===1?a=1:y.header==="A"?a=2:Array.isArray(y.header)?a=3:y.header==null&&(a=0),typeof b){case"string":m=safe_decode_range(b);break;case"number":m=safe_decode_range(t["!ref"]),m.s.r=b;break;default:m=b}a>0&&(o=0);var _=encode_row(m.s.r),w=[],E=[],A=0,C=0,k=t["!data"]!=null,B=m.s.r,D=0,q={};k&&!t["!data"][B]&&(t["!data"][B]=[]);var j=y.skipHidden&&t["!cols"]||[],J=y.skipHidden&&t["!rows"]||[];for(D=m.s.c;D<=m.e.c;++D)if(!(j[D]||{}).hidden)switch(w[D]=encode_col(D),n=k?t["!data"][B][D]:t[w[D]+_],a){case 1:l[D]=D-m.s.c;break;case 2:l[D]=w[D];break;case 3:l[D]=y.header[D-m.s.c];break;default:if(n==null&&(n={w:"__EMPTY",t:"s"}),d=u=format_cell(n,null,y),C=q[u]||0,!C)q[u]=1;else{do d=u+"_"+C++;while(q[d]);q[u]=C,q[d]=1}l[D]=d}for(B=m.s.r+o;B<=m.e.r;++B)if(!(J[B]||{}).hidden){var Y=make_json_row(t,m,B,w,a,l,y);(Y.isempty===!1||(a===1?y.blankrows!==!1:y.blankrows))&&(E[A++]=Y.row)}return E.length=A,E}var qreg=/"/g;function make_csv_row(t,e,n,a,o,l,u,d){for(var m=!0,y=[],b="",_=encode_row(n),w=t["!data"]!=null,E=w&&t["!data"][n]||[],A=e.s.c;A<=e.e.c;++A)if(a[A]){var C=w?E[A]:t[a[A]+_];if(C==null)b="";else if(C.v!=null){m=!1,b=""+(d.rawNumbers&&C.t=="n"?C.v:format_cell(C,null,d));for(var k=0,B=0;k!==b.length;++k)if((B=b.charCodeAt(k))===o||B===l||B===34||d.forceQuotes){b='"'+b.replace(qreg,'""')+'"';break}b=="ID"&&(b='"ID"')}else C.f!=null&&!C.F?(m=!1,b="="+C.f,b.indexOf(",")>=0&&(b='"'+b.replace(qreg,'""')+'"')):b="";y.push(b)}return d.blankrows===!1&&m?null:y.join(u)}function sheet_to_csv(t,e){var n=[],a=e??{};if(t==null||t["!ref"]==null)return"";for(var o=safe_decode_range(t["!ref"]),l=a.FS!==void 0?a.FS:",",u=l.charCodeAt(0),d=a.RS!==void 0?a.RS:`
`,m=d.charCodeAt(0),y=new RegExp((l=="|"?"\\|":l)+"+$"),b="",_=[],w=a.skipHidden&&t["!cols"]||[],E=a.skipHidden&&t["!rows"]||[],A=o.s.c;A<=o.e.c;++A)(w[A]||{}).hidden||(_[A]=encode_col(A));for(var C=0,k=o.s.r;k<=o.e.r;++k)(E[k]||{}).hidden||(b=make_csv_row(t,o,k,_,u,m,l,a),b!=null&&(a.strip&&(b=b.replace(y,"")),(b||a.blankrows!==!1)&&n.push((C++?d:"")+b)));return n.join("")}function sheet_to_txt(t,e){e||(e={}),e.FS="	",e.RS=`
`;var n=sheet_to_csv(t,e);return n}function sheet_to_formulae(t){var e="",n,a="";if(t==null||t["!ref"]==null)return[];var o=safe_decode_range(t["!ref"]),l="",u=[],d,m=[],y=t["!data"]!=null;for(d=o.s.c;d<=o.e.c;++d)u[d]=encode_col(d);for(var b=o.s.r;b<=o.e.r;++b)for(l=encode_row(b),d=o.s.c;d<=o.e.c;++d)if(e=u[d]+l,n=y?(t["!data"][b]||[])[d]:t[e],a="",n!==void 0){if(n.F!=null){if(e=n.F,!n.f)continue;a=n.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(n.f!=null)a=n.f;else{if(n.t=="z")continue;if(n.t=="n"&&n.v!=null)a=""+n.v;else if(n.t=="b")a=n.v?"TRUE":"FALSE";else if(n.w!==void 0)a="'"+n.w;else{if(n.v===void 0)continue;n.t=="s"?a="'"+n.v:a=""+n.v}}m[m.length]=e+"="+a}return m}function sheet_add_json(t,e,n){var a=n||{},o=t?t["!data"]!=null:a.dense,l=+!a.skipHeader,u=t||{};!t&&o&&(u["!data"]=[]);var d=0,m=0;if(u&&a.origin!=null)if(typeof a.origin=="number")d=a.origin;else{var y=typeof a.origin=="string"?decode_cell(a.origin):a.origin;d=y.r,m=y.c}var b={s:{c:0,r:0},e:{c:m,r:d+e.length-1+l}};if(u["!ref"]){var _=safe_decode_range(u["!ref"]);b.e.c=Math.max(b.e.c,_.e.c),b.e.r=Math.max(b.e.r,_.e.r),d==-1&&(d=_.e.r+1,b.e.r=d+e.length-1+l)}else d==-1&&(d=0,b.e.r=e.length-1+l);var w=a.header||[],E=0,A=[];e.forEach(function(k,B){o&&!u["!data"][d+B+l]&&(u["!data"][d+B+l]=[]),o&&(A=u["!data"][d+B+l]),keys(k).forEach(function(D){(E=w.indexOf(D))==-1&&(w[E=w.length]=D);var q=k[D],j="z",J="",Y=o?"":encode_col(m+E)+encode_row(d+B+l),L=o?A[m+E]:u[Y];q&&typeof q=="object"&&!(q instanceof Date)?o?A[m+E]=q:u[Y]=q:(typeof q=="number"?j="n":typeof q=="boolean"?j="b":typeof q=="string"?j="s":q instanceof Date?(j="d",a.cellDates||(j="n",q=datenum(q)),J=L!=null&&L.z&&fmt_is_date(L.z)?L.z:a.dateNF||table_fmt[14]):q===null&&a.nullError&&(j="e",q=0),L?(L.t=j,L.v=q,delete L.w,delete L.R,J&&(L.z=J)):o?A[m+E]=L={t:j,v:q}:u[Y]=L={t:j,v:q},J&&(L.z=J))})}),b.e.c=Math.max(b.e.c,m+w.length-1);var C=encode_row(d);if(o&&!u["!data"][d]&&(u["!data"][d]=[]),l)for(E=0;E<w.length;++E)o?u["!data"][d][E+m]={t:"s",v:w[E]}:u[encode_col(E+m)+C]={t:"s",v:w[E]};return u["!ref"]=encode_range(b),u}function json_to_sheet(t,e){return sheet_add_json(null,t,e)}function ws_get_cell_stub(t,e,n){if(typeof e=="string"){if(t["!data"]!=null){var a=decode_cell(e);return t["!data"][a.r]||(t["!data"][a.r]=[]),t["!data"][a.r][a.c]||(t["!data"][a.r][a.c]={t:"z"})}return t[e]||(t[e]={t:"z"})}return typeof e!="number"?ws_get_cell_stub(t,encode_cell(e)):ws_get_cell_stub(t,encode_col(n||0)+encode_row(e))}function wb_sheet_idx(t,e){if(typeof e=="number"){if(e>=0&&t.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var n=t.SheetNames.indexOf(e);if(n>-1)return n;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function book_new(){return{SheetNames:[],Sheets:{}}}function book_append_sheet(t,e,n,a){var o=1;if(!n)for(;o<=65535&&t.SheetNames.indexOf(n="Sheet"+o)!=-1;++o,n=void 0);if(!n||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&t.SheetNames.indexOf(n)>=0){var l=n.match(/(^.*?)(\d+)$/);o=l&&+l[2]||0;var u=l&&l[1]||n;for(++o;o<=65535&&t.SheetNames.indexOf(n=u+o)!=-1;++o);}if(check_ws_name(n),t.SheetNames.indexOf(n)>=0)throw new Error("Worksheet with name |"+n+"| already exists!");return t.SheetNames.push(n),t.Sheets[n]=e,n}function book_set_sheet_visibility(t,e,n){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var a=wb_sheet_idx(t,e);switch(t.Workbook.Sheets[a]||(t.Workbook.Sheets[a]={}),n){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+n)}t.Workbook.Sheets[a].Hidden=n}function cell_set_number_format(t,e){return t.z=e,t}function cell_set_hyperlink(t,e,n){return e?(t.l={Target:e},n&&(t.l.Tooltip=n)):delete t.l,t}function cell_set_internal_link(t,e,n){return cell_set_hyperlink(t,"#"+e,n)}function cell_add_comment(t,e,n){t.c||(t.c=[]),t.c.push({t:e,a:n||"SheetJS"})}function sheet_set_array_formula(t,e,n,a){for(var o=typeof e!="string"?e:safe_decode_range(e),l=typeof e=="string"?e:encode_range(e),u=o.s.r;u<=o.e.r;++u)for(var d=o.s.c;d<=o.e.c;++d){var m=ws_get_cell_stub(t,u,d);m.t="n",m.F=l,delete m.v,u==o.s.r&&d==o.s.c&&(m.f=n,a&&(m.D=!0))}var y=decode_range(t["!ref"]);return y.s.r>o.s.r&&(y.s.r=o.s.r),y.s.c>o.s.c&&(y.s.c=o.s.c),y.e.r<o.e.r&&(y.e.r=o.e.r),y.e.c<o.e.c&&(y.e.c=o.e.c),t["!ref"]=encode_range(y),t}var utils$1={encode_col,encode_row,encode_cell,encode_range,decode_col,decode_row,split_cell,decode_cell,decode_range,format_cell,sheet_add_aoa,sheet_add_json,sheet_add_dom,aoa_to_sheet,json_to_sheet,table_to_sheet:parse_dom_table,table_to_book,sheet_to_csv,sheet_to_txt,sheet_to_json,sheet_to_html,sheet_to_formulae,sheet_to_row_object_array:sheet_to_json,sheet_get_cell:ws_get_cell_stub,book_new,book_append_sheet,book_set_sheet_visibility,cell_set_number_format,cell_set_hyperlink,cell_set_internal_link,cell_add_comment,sheet_set_array_formula,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};async function toBuffer(t){let e=new Uint8Array(0);for await(const n of t)e=concat$2([e,n],e.length+n.length);return e}const MAX_TAILLE_IMAGE$1=500*1e3,MAX_TAILLE_IMAGE_VIS$1=1500*1e3;class BDs{constructor({client:e,id:n}){ut(this,"client");ut(this,"idBd");this.client=e,this.idBd=n}async suivreBds({f:e,idBdBdsCompte:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async créerBd({licence:e,ajouter:n=!0}){const a=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a});await o.set("type","bd"),await o.set("licence",e);const d={address:o.access.address},m=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:d});await o.set("noms",m);const y=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:d});await o.set("descriptions",y);const b=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:d});await o.set("tableaux",b);const _=await this.client.créerBdIndépendante({type:"feed",optionsAccès:d});await o.set("motsClefs",_);const w=await this.client.créerBdIndépendante({type:"feed",optionsAccès:d});if(await o.set("nuées",w),await o.set("statut",{statut:TYPES_STATUT.ACTIVE}),n){const{bd:E,fOublier:A}=await this.client.ouvrirBd({id:this.idBd});await E.add(a),A()}return await l(),a}async ajouterÀMesBds({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async enleverDeMesBds({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a()}async copierBd({id:e,ajouterÀMesBds:n=!0,copierDonnées:a=!0}){const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:e}),u=o.get("licence"),d=await this.créerBd({licence:u,ajouter:n}),{bd:m,fOublier:y}=await this.client.ouvrirBd({id:d}),b=o.get("noms"),{bd:_,fOublier:w}=await this.client.ouvrirBd({id:b}),E=ClientConstellation.obtObjetdeBdDic({bd:_});await this.ajouterNomsBd({id:d,noms:E});const A=o.get("descriptions"),{bd:C,fOublier:k}=await this.client.ouvrirBd({id:A}),B=ClientConstellation.obtObjetdeBdDic({bd:C});await this.ajouterDescriptionsBd({id:d,descriptions:B}),w(),k();const D=o.get("motsClefs"),{bd:q,fOublier:j}=await this.client.ouvrirBd({id:D}),J=ClientConstellation.obtÉlémentsDeBdListe({bd:q});await this.ajouterMotsClefsBd({idBd:d,idsMotsClefs:J});const Y=o.get("nuées"),{bd:L,fOublier:Z}=await this.client.ouvrirBd({id:Y}),Q=ClientConstellation.obtÉlémentsDeBdListe({bd:L});await this.rejoindreNuées({idBd:d,idsNuées:Q});const oe=o.get("tableaux"),ae=m.get("tableaux"),{bd:U,fOublier:I}=await this.client.ouvrirBd({id:ae}),{bd:x,fOublier:T}=await this.client.ouvrirBd({id:oe}),M=ClientConstellation.obtObjetdeBdDic({bd:x});for(const X of Object.keys(M)){const H=await this.client.tableaux.copierTableau({id:X,idBd:d,copierDonnées:a});await U.set(H,M[X])}const O=o.get("statut")||{statut:TYPES_STATUT.ACTIVE};await m.set("statut",O);const z=o.get("image");return z&&await m.set("image",z),await m.set("copiéDe",{id:e}),await l(),I(),y(),T(),j(),Z(),d}async créerBdDeSchéma({schéma:e,ajouter:n=!0}){const{tableaux:a,motsClefs:o,licence:l}=e,u=await this.créerBd({licence:l,ajouter:!1});o&&await this.ajouterMotsClefsBd({idBd:u,idsMotsClefs:o});for(const d of a){const{cols:m,clef:y}=d,b=await this.ajouterTableauBd({idBd:u,clefTableau:y});for(const _ of m){const{idColonne:w,idVariable:E,index:A}=_;await this.client.tableaux.ajouterColonneTableau({idTableau:b,idVariable:E,idColonne:w}),A&&await this.client.tableaux.changerColIndex({idTableau:b,idColonne:w,val:!0})}}return n&&await this.ajouterÀMesBds({id:u}),u}async suivreParent({idBd:e,f:n}){const a=async o=>{const l=o.get("copiéDe");await n(l)};return await this.client.suivreBd({id:e,f:a})}async suivreNuéesBd({idBd:e,f:n}){return await this.client.suivreBdListeDeClef({id:e,clef:"nuées",f:n})}async rechercherBdsParMotsClefs({motsClefs:e,f:n,idBdBdsCompte:a}){const o=async u=>await this.suivreBds({f:u,idBdBdsCompte:a}),l=async(u,d)=>{const m=y=>{const b=e.every(_=>y.includes(_));d(b)};return await this.suivreMotsClefsBd({id:u,f:m})};return await this.client.suivreBdsSelonCondition({fListe:o,fCondition:l,f:n})}async rechercherBdsParNuée({idNuée:e,f:n,idBdBdsCompte:a}){const o=async u=>await this.suivreBds({f:u,idBdBdsCompte:a}),l=async(u,d)=>{const m=y=>{d(y.includes(e))};return await this.suivreNuéesBd({idBd:u,f:m})};return await this.client.suivreBdsSelonCondition({fListe:o,fCondition:l,f:n})}async combinerBds({idBdBase:e,idBd2:n}){const a=async u=>await uneFois(async d=>await this.suivreTableauxBd({id:u,f:d})),o=await a(e),l=await a(n);for(const u of l){const{id:d,clef:m}=u;if(m){const y=o.find(b=>b.clef===m)?.id;y&&await this.client.tableaux.combinerDonnées({idTableauBase:y,idTableau2:d})}}}async suivreIdTableauParClef({idBd:e,clef:n,f:a}){const o=l=>{const u=l.find(d=>d.clef===n);a(u?.id)};return await this.suivreTableauxBd({id:e,f:o})}async suivreBdUnique({schéma:e,idNuéeUnique:n,f:a}){const o="bdUnique: "+n,l=new Set,u=async m=>{let y;const b=await this.client.obtDeStockageLocal({clef:o});switch(m.length){case 0:{b?y=b:(y=await this.créerBdDeSchéma({schéma:e}),await this.rejoindreNuées({idBd:y,idsNuées:n}),await this.client.sauvegarderAuStockageLocal({clef:o,val:y}));break}case 1:{y=m[0],await this.client.sauvegarderAuStockageLocal({clef:o,val:y}),b&&y!==b&&await this.combinerBds({idBdBase:y,idBd2:b});break}default:{b&&(m=[...new Set([...m,b])]),y=m.sort()[0],await this.client.sauvegarderAuStockageLocal({clef:o,val:y});for(const _ of m.slice(1))l.has(_)||(l.add(_),await this.combinerBds({idBdBase:y,idBd2:_}));break}}a(y)};return await this.rechercherBdsParNuée({idNuée:n,f:u})}async suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:o}){const l=async({fSuivreRacine:d})=>await this.suivreBdUnique({schéma:e,idNuéeUnique:n,f:d}),u=async({id:d,fSuivreBd:m})=>await this.suivreIdTableauParClef({idBd:d,clef:a,f:m});return await this.client.suivreBdDeFonction({fRacine:l,f:o,fSuivre:u})}async suivreDonnéesDeTableauUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:o}){const l=m=>o(m||[]),u=async({id:m,fSuivreBd:y})=>await this.client.tableaux.suivreDonnées({idTableau:m,f:y}),d=async({fSuivreRacine:m})=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:y=>{y&&m(y)}});return await this.client.suivreBdDeFonction({fRacine:d,f:l,fSuivre:u})}async ajouterÉlémentÀTableauUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,vals:o}){const l=await uneFois(async u=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:d=>{d&&u(d)}}),!0);return await this.client.tableaux.ajouterÉlément({idTableau:l,vals:o})}async modifierÉlémentDeTableauUnique({vals:e,schémaBd:n,idNuéeUnique:a,clefTableau:o,empreintePrécédente:l}){const u=await uneFois(async d=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:n,idNuéeUnique:a,clefTableau:o,f:m=>{m&&d(m)}}),!0);return await this.client.tableaux.modifierÉlément({idTableau:u,vals:e,empreintePrécédente:l})}async effacerÉlémentDeTableauUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,empreinte:o}){const l=await uneFois(async u=>await this.suivreIdTableauParClefDeBdUnique({schémaBd:e,idNuéeUnique:n,clefTableau:a,f:d=>{d&&u(d)}}),!0);return await this.client.tableaux.effacerÉlément({idTableau:l,empreinteÉlément:o})}async suivreDonnéesDeTableauParClef({idBd:e,clefTableau:n,f:a}){const o=await uneFois(async l=>await this.suivreIdTableauParClef({idBd:e,clef:n,f:l}),!0);return await this.client.tableaux.suivreDonnées({idTableau:o,f:a})}async ajouterÉlémentÀTableauParClef({idBd:e,clefTableau:n,vals:a}){const o=await uneFois(async l=>await this.suivreIdTableauParClef({idBd:e,clef:n,f:l}));await this.client.tableaux.ajouterÉlément({idTableau:o,vals:a})}async modifierÉlémentDeTableauParClef({idBd:e,clefTableau:n,empreinteÉlément:a,vals:o}){const l=await uneFois(async u=>await this.suivreIdTableauParClef({idBd:e,clef:n,f:u}));this.client.tableaux.modifierÉlément({idTableau:l,vals:o,empreintePrécédente:a})}async effacerÉlémentDeTableauParClef({idBd:e,clefTableau:n,empreinteÉlément:a}){const o=await uneFois(async l=>await this.suivreIdTableauParClef({idBd:e,clef:n,f:l}));this.client.tableaux.effacerÉlément({idTableau:o,empreinteÉlément:a})}async ajouterNomsBd({id:e,noms:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});for(const d in n)await l.set(d,n[d]);await u()}async sauvegarderNomBd({id:e,langue:n,nom:a}){const o=await this.client.obtOpsAccès({idBd:e}),l=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:o});if(!l)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l});await u.set(n,a),await d()}async effacerNomBd({id:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.del(n),await u()}async ajouterDescriptionsBd({id:e,descriptions:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});for(const d in n)await l.set(d,n[d]);await u()}async sauvegarderDescrBd({id:e,langue:n,descr:a}){const o=await this.client.obtOpsAccès({idBd:e}),l=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:o});if(!l)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l});await u.set(n,a),await d()}async effacerDescrBd({id:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.del(n),await u()}async changerLicenceBd({idBd:e,licence:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("licence",n),await o()}async ajouterMotsClefsBd({idBd:e,idsMotsClefs:n}){Array.isArray(n)||(n=[n]);const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});for(const d of n)ClientConstellation.obtÉlémentsDeBdListe({bd:l}).includes(d)||await l.add(d);await u()}async effacerMotClefBd({idBd:e,idMotClef:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:l,élément:n}),await u()}async rejoindreNuées({idBd:e,idsNuées:n}){Array.isArray(n)||(n=[n]);const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"nuées",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});for(const d of n)ClientConstellation.obtÉlémentsDeBdListe({bd:l}).includes(d)||await l.add(d);await u()}async quitterNuée({idBd:e,idNuée:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"nuée",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:l,élément:n}),await u()}async ajouterTableauBd({idBd:e,clefTableau:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});n=n||v4();const d=await this.client.tableaux.créerTableau({idBd:e});return await l.set(d,{position:Object.keys(l.all).length,clef:n}),await u(),d}async effacerTableauBd({id:e,idTableau:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.del(n),await u(),await this.client.tableaux.effacerTableau({idTableau:n})}async spécifierClefTableau({idBd:e,idTableau:n,clef:a}){const o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore"}),{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o}),d=l.get(n);d.clef=a,l.set(n,d),await u()}async marquerObsolète({id:e,idNouvelle:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});a.set("statut",{statut:TYPES_STATUT.OBSOLÈTE,idNouvelle:n}),await o()}async marquerActive({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.ACTIVE}),await a()}async marquerBêta({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.BÊTA}),await a()}async marquerInterne({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.INTERNE}),await a()}async suivreLicence({id:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("licence");await n(o)}})}async inviterAuteur({idBd:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async sauvegarderImage({idBd:e,image:n}){let a;if(n.size!==void 0){if(n.size>MAX_TAILLE_IMAGE$1)throw new Error("Taille maximale excédée");a=await n.arrayBuffer()}else a=n;const o=await this.client.ajouterÀSFIP({fichier:a}),{bd:l,fOublier:u}=await this.client.ouvrirBd({id:e});await l.set("image",o),await u()}async effacerImage({idBd:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});await n.del("image"),await a()}async suivreImage({idBd:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("image");o||await n(null);const l=await this.client.obtFichierSFIP({id:o,max:MAX_TAILLE_IMAGE_VIS$1});await n(l)}})}async suivreNomsBd({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async suivreDescrBd({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",f:n})}async suivreMotsClefsBd({id:e,f:n}){return await this.client.suivreBdListeDeClef({id:e,clef:"motsClefs",f:n})}async suivreTableauxBd({id:e,f:n}){const a=o=>{const l=Object.entries(o).map(([u,d])=>({id:u,...d}));n(l)};return await this.client.suivreBdDicDeClef({id:e,clef:"tableaux",f:a})}async suivreScoreAccèsBd({id:e,f:n}){return n(Number.parseInt(e)),faisRien}async suivreScoreCouvertureBd({id:e,f:n}){const a=u=>{const d=u.reduce((y,b)=>y+b.numérateur,0),m=u.reduce((y,b)=>y+b.dénominateur,0);n(m===0?void 0:d/m)},o=async(u,d)=>{const m={},y=async()=>{const{cols:w,règles:E}=m;if(w!==void 0&&E!==void 0){const A=w.filter(B=>["numérique","catégorique"].includes(typeof B.catégorie=="string"?B.catégorie:B.catégorie?.catégorieBase)),C=A.length,k=A.filter(B=>E.some(D=>D.règle.règle.typeRègle!=="catégorie"&&D.colonne===B.id)).length;await d({numérateur:k,dénominateur:C})}},b=await this.client.tableaux.suivreColonnes({idTableau:u,f:async w=>{m.cols=w,await y()}}),_=await this.client.tableaux.suivreRègles({idTableau:u,f:async w=>{m.règles=w,await y()}});return async()=>{await b(),await _()}},l=async u=>await this.suivreTableauxBd({id:e,f:d=>u(d.map(m=>m.id))});return await this.client.suivreBdsDeFonctionListe({fListe:l,f:a,fBranche:o})}async suivreScoreValideBd({id:e,f:n}){const a=u=>{const d=u.reduce((y,b)=>y+b.numérateur,0),m=u.reduce((y,b)=>y+b.dénominateur,0);n(m===0?void 0:d/m)},o=async(u,d)=>{const m={},y=()=>{const{données:E,erreurs:A,cols:C}=m;if(E!==void 0&&A!==void 0&&C!==void 0){const k=C.filter(J=>["numérique","catégorique"].includes(typeof J.catégorie=="string"?J.catégorie:J.catégorie?.catégorieBase)),B=[],D=A.map(J=>({empreinte:J.empreinte,idColonne:J.erreur.règle.colonne})).filter(J=>B.find(L=>L.empreinte===J.empreinte&&L.idColonne===J.idColonne)?!1:(B.push(J),!0)).length,q=E.map(J=>k.filter(Y=>J.données[Y.id]!==void 0).length).reduce((J,Y)=>J+Y,0),j=q-D;d({numérateur:j,dénominateur:q})}},b=await this.client.tableaux.suivreDonnées({idTableau:u,f:E=>{m.données=E,y()}}),_=await this.client.tableaux.suivreValidDonnées({idTableau:u,f:E=>{m.erreurs=E,y()}}),w=await this.client.tableaux.suivreColonnes({idTableau:u,f:E=>{m.cols=E,y()}});return async()=>{await b(),await _(),await w()}},l=async u=>await this.suivreTableauxBd({id:e,f:d=>u(d.map(m=>m.id))});return await this.client.suivreBdsDeFonctionListe({fListe:l,f:a,fBranche:o})}async suivreScoreBd({id:e,f:n}){const a={},o=()=>{const{accès:y,couverture:b,valide:_,licence:w}=a,E={total:w?((y||0)+(b||0)+(_||0))/3:0,accès:y,couverture:b,valide:_,licence:w};n(E)},l=await this.suivreScoreAccèsBd({id:e,f:y=>{a.accès=y,o()}}),u=await this.suivreScoreCouvertureBd({id:e,f:y=>{a.couverture=y,o()}}),d=await this.suivreScoreValideBd({id:e,f:y=>{a.valide=y,o()}}),m=await this.suivreLicence({id:e,f:y=>a.licence=y?1:0});return async()=>{await Promise.all([l,u,d,m])}}async suivreVariablesBd({id:e,f:n}){const a=u=>n(u||[]),o=async(u,d)=>await this.client.tableaux.suivreVariables({idTableau:u,f:d}),l=async u=>await this.suivreTableauxBd({id:e,f:d=>u(d.map(m=>m.id))});return await this.client.suivreBdsDeFonctionListe({fListe:l,f:a,fBranche:o})}async exporterDonnées({id:e,langues:n,nomFichier:a}){const o=utils$1.book_new(),l=new Set,u=await uneFois(d=>this.suivreTableauxBd({id:e,f:d}));for(const d of u){const{id:m}=d,{fichiersSFIP:y}=await this.client.tableaux.exporterDonnées({idTableau:m,langues:n,doc:o});y.forEach(b=>l.add(b))}if(!a){const d=await uneFois(y=>this.suivreNomsBd({id:e,f:y})),m=e.split("/").pop();a=n&&traduire(d,n)||m}return{doc:o,fichiersSFIP:l,nomFichier:a}}async exporterDocumentDonnées({données:e,formatDoc:n,dir:a="",inclureFichiersSFIP:o=!0}){const{doc:l,fichiersSFIP:u,nomFichier:d}=e,y={xls:"biff8"}[n]||n;if(!(isBrowser$2||isWebWorker$1)&&!net.existsSync(a)&&net.mkdirSync(a,{recursive:!0}),o){const b={octets:writeSync(l,{bookType:y,type:"buffer"}),nom:`${d}.${n}`},_=await Promise.all([...u].map(async w=>({nom:`${w.cid}.${w.ext}`,octets:await toBuffer(this.client.obtItérableAsyncSFIP({id:w.cid}))})));return await zipper([b],_,path.join(a,d)),path.join(a,`${d}.zip`)}else return writeFileSync(l,path.join(a,`${d}.${n}`),{bookType:y}),path.join(a,`${d}.${n}`)}async effacerBd({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a();const o=await this.client.obtOpsAccès({idBd:e});for(const u in["noms","descriptions","motsClefs"]){const d=await this.client.obtIdBd({nom:u,racine:e,optionsAccès:o});d&&await this.client.effacerBd({id:d})}const l=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:o});if(l){const{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l}),m=Object.keys(u.all);for(const y of m)await this.client.tableaux.effacerTableau({idTableau:y});d(),await this.client.effacerBd({id:l})}await this.enleverDeMesBds({id:e}),await this.client.effacerBd({id:e})}}__decorate([cacheSuivi],BDs.prototype,"suivreBds",null);__decorate([cacheSuivi],BDs.prototype,"suivreParent",null);__decorate([cacheSuivi],BDs.prototype,"suivreNuéesBd",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParMotsClefs",null);__decorate([cacheSuivi],BDs.prototype,"rechercherBdsParNuée",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreIdTableauParClefDeBdUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnéesDeTableauUnique",null);__decorate([cacheSuivi],BDs.prototype,"suivreDonnéesDeTableauParClef",null);__decorate([cacheSuivi],BDs.prototype,"suivreLicence",null);__decorate([cacheSuivi],BDs.prototype,"suivreImage",null);__decorate([cacheSuivi],BDs.prototype,"suivreNomsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreDescrBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreMotsClefsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreTableauxBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreAccèsBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreCouvertureBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreValideBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreScoreBd",null);__decorate([cacheSuivi],BDs.prototype,"suivreVariablesBd",null);var geojsonValidation={};(function(t){const e={};function n(b){return typeof b=="function"}function a(b){return b===Object(b)}function o(b,_){let w=!1;return typeof _=="string"?_=[_]:Object.prototype.toString.call(_)==="[object Array]"?_.length===0&&(w=!0):w=!0,b?_:w}function l(b,_){let w;if(n(e[b])){try{w=e[b](_)}catch(E){w=["Problem with custom definition for "+b+": "+E]}if(typeof result=="string"&&(w=[w]),Object.prototype.toString.call(w)==="[object Array]")return w}return[]}t.define=(b,_)=>b in y&&n(_)?(e[b]=_,!0):!1,t.isPosition=(b,_=!1)=>{let w=[];return Array.isArray(b)?(b.length<=1&&w.push("Position must be at least two elements"),b.forEach((E,A)=>{typeof E!="number"&&w.push("Position must only contain numbers. Item "+E+" at index "+A+" is invalid.")})):w.push("Position must be an array"),w=w.concat(l("Position",b)),o(_,w)},t.isGeoJSONObject=t.valid=(b,_=!1)=>{if(a(b)){let w=[];if("type"in b){if(d[b.type])return d[b.type](b,_);if(m[b.type])return m[b.type](b,_);w.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon", "GeometryCollection", "Feature", or "FeatureCollection"')}else w.push('must have a member with the name "type"');return w=w.concat(l("GeoJSONObject",b)),o(_,w)}else return o(_,["must be a JSON Object"])},t.isGeometryObject=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("type"in b){if(m[b.type])return m[b.type](b,_);w.push('type must be one of: "Point", "MultiPoint", "LineString", "MultiLineString", "Polygon", "MultiPolygon" or "GeometryCollection"')}else w.push('must have a member with the name "type"');return w=w.concat(l("GeometryObject",b)),o(_,w)},t.isPoint=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("bbox"in b){const E=t.isBbox(b.bbox,!0);E.length&&(w=w.concat(E))}if("type"in b?b.type!=="Point"&&w.push('type must be "Point"'):w.push('must have a member with the name "type"'),"coordinates"in b){const E=t.isPosition(b.coordinates,!0);E.length&&(w=w.concat(E))}else w.push('must have a member with the name "coordinates"');return w=w.concat(l("Point",b)),o(_,w)},t.isMultiPointCoor=(b,_=!1)=>{let w=[];return Array.isArray(b)?b.forEach((E,A)=>{const C=t.isPosition(E,!0);C.length&&(C[0]="at "+A+": ".concat(C[0]),w=w.concat(C))}):w.push("coordinates must be an array"),o(_,w)},t.isMultiPoint=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("bbox"in b){const E=t.isBbox(b.bbox,!0);E.length&&(w=w.concat(E))}if("type"in b?b.type!=="MultiPoint"&&w.push('type must be "MultiPoint"'):w.push('must have a member with the name "type"'),"coordinates"in b){const E=t.isMultiPointCoor(b.coordinates,!0);E.length&&(w=w.concat(E))}else w.push('must have a member with the name "coordinates"');return w=w.concat(l("MultiPoint",b)),o(_,w)},t.isLineStringCoor=(b,_=!1)=>{let w=[];return Array.isArray(b)?b.length>1?b.forEach((E,A)=>{const C=t.isPosition(E,!0);C.length&&(C[0]="at "+A+": ".concat(C[0]),w=w.concat(C))}):w.push("coordinates must have at least two elements"):w.push("coordinates must be an array"),o(_,w)},t.isLineString=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("bbox"in b){const E=t.isBbox(b.bbox,!0);E.length&&(w=w.concat(E))}if("type"in b?b.type!=="LineString"&&w.push('type must be "LineString"'):w.push('must have a member with the name "type"'),"coordinates"in b){const E=t.isLineStringCoor(b.coordinates,!0);E.length&&(w=w.concat(E))}else w.push('must have a member with the name "coordinates"');return w=w.concat(l("LineString",b)),o(_,w)},t.isMultiLineStringCoor=(b,_=!1)=>{let w=[];return Array.isArray(b)?b.forEach((E,A)=>{const C=t.isLineStringCoor(E,!0);C.length&&(C[0]="at "+A+": ".concat(C[0]),w=w.concat(C))}):w.push("coordinates must be an array"),o(_,w)},t.isMultiLineString=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("bbox"in b){const E=t.isBbox(b.bbox,!0);E.length&&(w=w.concat(E))}if("type"in b?b.type!=="MultiLineString"&&w.push('type must be "MultiLineString"'):w.push('must have a member with the name "type"'),"coordinates"in b){const E=t.isMultiLineStringCoor(b.coordinates,!0);E.length&&(w=w.concat(E))}else w.push('must have a member with the name "coordinates"');return w=w.concat(l("MultiPoint",b)),o(_,w)};function u(b,_){let w=[];return Array.isArray(b)?(b.forEach((E,A)=>{const C=t.isPosition(E,!0);C.length&&(C[0]="at "+A+": ".concat(C[0]),w=w.concat(C))}),b[0].toString()!==b[b.length-1].toString()&&w.push("The first and last positions must be equivalent"),b.length<4&&w.push("coordinates must have at least four positions")):w.push("coordinates must be an array"),o(_,w)}t.isPolygonCoor=(b,_=!1)=>{let w=[];return Array.isArray(b)?b.forEach((E,A)=>{const C=u(E,!0);C.length&&(C[0]="at "+A+": ".concat(C[0]),w=w.concat(C))}):w.push("coordinates must be an array"),o(_,w)},t.isPolygon=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("bbox"in b){const E=t.isBbox(b.bbox,!0);E.length&&(w=w.concat(E))}if("type"in b?b.type!=="Polygon"&&w.push('type must be "Polygon"'):w.push('must have a member with the name "type"'),"coordinates"in b){const E=t.isPolygonCoor(b.coordinates,!0);E.length&&(w=w.concat(E))}else w.push('must have a member with the name "coordinates"');return w=w.concat(l("Polygon",b)),o(_,w)},t.isMultiPolygonCoor=(b,_=!1)=>{let w=[];return Array.isArray(b)?b.forEach((E,A)=>{const C=t.isPolygonCoor(E,!0);C.length&&(C[0]="at "+A+": ".concat(C[0]),w=w.concat(C))}):w.push("coordinates must be an array"),o(_,w)},t.isMultiPolygon=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("bbox"in b){const E=t.isBbox(b.bbox,!0);E.length&&(w=w.concat(E))}if("type"in b?b.type!=="MultiPolygon"&&w.push('type must be "MultiPolygon"'):w.push('must have a member with the name "type"'),"coordinates"in b){const E=t.isMultiPolygonCoor(b.coordinates,!0);E.length&&(w=w.concat(E))}else w.push('must have a member with the name "coordinates"');return w=w.concat(l("MultiPolygon",b)),o(_,w)},t.isGeometryCollection=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("bbox"in b){const E=t.isBbox(b.bbox,!0);E.length&&(w=w.concat(E))}return"type"in b?b.type!=="GeometryCollection"&&w.push('type must be "GeometryCollection"'):w.push('must have a member with the name "type"'),"geometries"in b?Array.isArray(b.geometries)?b.geometries.forEach((E,A)=>{const C=t.isGeometryObject(E,!0);C.length&&(C[0]="at "+A+": ".concat(C[0]),w=w.concat(C))}):w.push('"geometries" must be an array'):w.push('must have a member with the name "geometries"'),w=w.concat(l("GeometryCollection",b)),o(_,w)},t.isFeature=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("bbox"in b){const E=t.isBbox(b.bbox,!0);E.length&&(w=w.concat(E))}if("type"in b?b.type!=="Feature"&&w.push('type must be "Feature"'):w.push('must have a member with the name "type"'),"properties"in b||w.push('must have a member with the name "properties"'),"geometry"in b){if(b.geometry!==null){const E=t.isGeometryObject(b.geometry,!0);E.length&&(w=w.concat(E))}}else w.push('must have a member with the name "geometry"');return w=w.concat(l("Feature",b)),o(_,w)},t.isFeatureCollection=(b,_=!1)=>{if(!a(b))return o(_,["must be a JSON Object"]);let w=[];if("bbox"in b){const E=t.isBbox(b.bbox,!0);E.length&&(w=E)}return"type"in b?b.type!=="FeatureCollection"&&w.push('type must be "FeatureCollection"'):w.push('must have a member with the name "type"'),"features"in b?Array.isArray(b.features)?b.features.forEach((E,A)=>{const C=t.isFeature(E,!0);C.length&&(C[0]="at "+A+": ".concat(C[0]),w=w.concat(C))}):w.push('"Features" must be an array'):w.push('must have a member with the name "Features"'),w=w.concat(l("FeatureCollection",b)),o(_,w)},t.isBbox=(b,_=!1)=>{let w=[];return Array.isArray(b)?b.length%2!==0&&w.push("bbox, must be a 2*n array"):w.push("bbox must be an array"),w=w.concat(l("Bbox",b)),o(_,w)};const d={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection},m={Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection},y={Feature:t.isFeature,FeatureCollection:t.isFeatureCollection,Point:t.isPoint,MultiPoint:t.isMultiPoint,LineString:t.isLineString,MultiLineString:t.isMultiLineString,Polygon:t.isPolygon,MultiPolygon:t.isMultiPolygon,GeometryCollection:t.isGeometryCollection,Bbox:t.isBbox,Position:t.isPosition,GeoJSON:t.isGeoJSONObject,GeometryObject:t.isGeometryObject};t.allTypes=y})(geojsonValidation);function générerFonctionRègle({règle:t,varsÀColonnes:e,donnéesCatégorie:n}){const a=t.règle,{colonne:o}=t,{typeRègle:l}=a.règle;switch(l){case"existe":return u=>u.filter(m=>m.données[o]===void 0).map(m=>{const{empreinte:y}=m;return{empreinte:y,erreur:{règle:t}}});case"catégorie":return u=>{const d=a.règle.détails.catégorie;return u.filter(y=>!validerCatégorieVal({val:y.données[o],catégorie:d})).map(y=>{const{empreinte:b}=y;return{empreinte:b,erreur:{règle:t}}})};case"bornes":{const u=a;let d,m;const{val:y,op:b,type:_}=u.règle.détails,w=(E,A)=>E===void 0||A===void 0;switch(b){case">":m=(E,A)=>w(E,A)||E>A;break;case"<":m=(E,A)=>w(E,A)||E<A;break;case">=":m=(E,A)=>w(E,A)||E>=A;break;case"<=":m=(E,A)=>w(E,A)||E<=A;break}return _==="fixe"?d=E=>m(E.données[o],y):d=E=>m(E.données[o],_==="dynamiqueVariable"?E.données[e[y]]:E.données[y]),E=>E.filter(C=>!d(C)).map(C=>{const{empreinte:k}=C;return{empreinte:k,erreur:{règle:t}}})}case"valeurCatégorique":{const u=a.règle,d=u.détails.type==="fixe"?u.détails.options:n;if(!d)throw new Error("Options non spécifiées");return m=>m.filter(b=>b.données[o]!==void 0&&!d.includes(b.données[o])).map(b=>{const{empreinte:_}=b;return{empreinte:_,colonne:o,erreur:{règle:t}}})}default:throw Error(`Catégorie ${l} inconnue.`)}}const formatsFichiers={images:["webp","svg","png","jpg","jpeg","jfif","pjpeg","pjp","gif","avif","apng"],vidéo:["mp4"],audio:["mp3","ogg","m4a"]};function validFichier(t,e){if(typeof t!="object")return!1;const{cid:n,ext:a}=t;return!cidValide(n)||typeof a!="string"?!1:e?e.includes(a.replace(".","")):!0}function validerCatégorieVal({val:t,catégorie:e}){if(t===void 0)return!0;const n=a=>{if(!["number","string"].includes(typeof a))return!1;const o=new Date(a);return!isNaN(o.valueOf())};switch(e){case"numérique":return typeof t=="number";case"horoDatage":return n(t);case"intervaleTemps":return Array.isArray(t)?t.every(a=>n(a)):!1;case"chaîne":return typeof t=="string";case"catégorique":return!0;case"booléen":return typeof t=="boolean";case"géojson":return typeof t!="object"?!1:geojsonValidation.valid(t);case"vidéo":return validFichier(t,formatsFichiers.vidéo);case"audio":return validFichier(t,formatsFichiers.audio);case"photo":return validFichier(t,formatsFichiers.images);case"fichier":return validFichier(t);default:return!1}}function élémentsÉgaux(t,e){const n=Object.keys(t).filter(o=>o!=="id"),a=Object.keys(e).filter(o=>o!=="id");return!(!n.every(o=>t[o]===e[o])||!a.every(o=>t[o]===e[o]))}function indexÉlémentsÉgaux(t,e,n){return!!n.every(a=>t[a]===e[a])}class Tableaux{constructor({client:e}){ut(this,"client");this.client=e}async créerTableau({idBd:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:n}),{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a}),u=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:n});await o.set("noms",u);const d=await this.client.créerBdIndépendante({type:"feed",optionsAccès:n});await o.set("données",d);const m=await this.client.créerBdIndépendante({type:"feed",optionsAccès:n});await o.set("colonnes",m);const y=await this.client.créerBdIndépendante({type:"feed",optionsAccès:n});return await o.set("règles",y),await l(),a}async copierTableau({id:e,idBd:n,copierDonnées:a=!0}){const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:e}),u=await this.créerTableau({idBd:n}),{bd:d,fOublier:m}=await this.client.ouvrirBd({id:u}),y=o.get("noms"),{bd:b,fOublier:_}=await this.client.ouvrirBd({id:y}),w=b.all;return await this.ajouterNomsTableau({idTableau:u,noms:w}),await _(),await this.client.copierContenuBdListe({bdBase:o,nouvelleBd:d,clef:"colonnes"}),await this.client.copierContenuBdListe({bdBase:o,nouvelleBd:d,clef:"règles"}),a&&await this.client.copierContenuBdListe({bdBase:o,nouvelleBd:d,clef:"données"}),await l(),await m(),u}async suivreDifférencesAvecTableau({idTableau:e,idTableauRéf:n,f:a}){const o={},l=async()=>{if(!o.colonnesTableau||!o.colonnesTableauRéf)return;const m=[];for(const y of o.colonnesTableauRéf){const b=o.colonnesTableau.find(_=>_.id===y.id);if(b){if(b.variable!==y.variable){const _={type:"variableColonne",sévère:!0,idCol:b.id,varColTableau:b.variable,varColTableauLiée:y.variable};m.push(_)}if(b.index!==y.index){const _={type:"indexColonne",sévère:!0,idCol:b.id,colTableauIndexée:b.index};m.push(_)}}else{const _={type:"colonneManquante",sévère:!0,idManquante:y.id};m.push(_)}}for(const y of o.colonnesTableau)if(!o.colonnesTableauRéf.find(_=>_.id===y.id)){const _={type:"colonneSupplémentaire",sévère:!1,idExtra:y.id};m.push(_)}await a(m)},u=await this.suivreColonnes({idTableau:e,f:async m=>{o.colonnesTableau=m,await l()},catégories:!1}),d=await this.suivreColonnes({idTableau:n,f:async m=>{o.colonnesTableauRéf=m,await l()},catégories:!1});return async()=>{await Promise.all([u,d])}}async changerColIndex({idTableau:e,idColonne:n,val:a}){const o=await this.client.obtOpsAccès({idBd:e}),l=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"feed",optionsAccès:o});if(!l)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l}),y=ClientConstellation.obtÉlémentsDeBdListe({bd:u,renvoyerValeur:!1}).find(b=>b.payload.value.id===n);if(y&&Boolean(y.payload.value.index)!==a){const{value:b}=y.payload,_=Object.assign(b,{index:a});await u.remove(y.hash),await u.add(_)}await d()}async suivreIndex({idTableau:e,f:n}){const a=o=>{const l=o.filter(u=>u.index).map(u=>u.id);n(l)};return await this.suivreColonnes({idTableau:e,f:a})}async suivreDonnées({idTableau:e,f:n,clefsSelonVariables:a=!1}){const o={},l=()=>{const{données:b,colonnes:_}=o;if(b&&_){const w=b.map(E=>{const A=E.hash,C=E.payload.value;return{données:a?Object.keys(C).reduce((B,D)=>{const q=D==="id"?"id":_[D];return B[q]=C[D],B},{}):C,empreinte:A}});n(w)}},u=b=>{o.colonnes=Object.fromEntries(b.map(_=>[_.id,_.variable])),l()},d=await this.suivreColonnes({idTableau:e,f:u,catégories:!1}),m=b=>{o.données=b,l()},y=await this.client.suivreBdListeDeClef({id:e,clef:"données",f:m,renvoyerValeur:!1});return async()=>{await y(),await d()}}async exporterDonnées({idTableau:e,langues:n,doc:a,nomFichier:o}){a=a||utils$1.book_new();const l=new Set;let u;const d=e.split("/").pop();if(n){const E=await uneFois(A=>this.suivreNomsTableau({idTableau:e,f:A}));u=traduire(E,n)||d}else u=d;const m=await uneFois(E=>this.suivreColonnes({idTableau:e,f:E})),y=await uneFois(E=>this.suivreDonnées({idTableau:e,f:E})),b=E=>{const A={};for(const C of Object.keys(E)){const k=m.find(j=>j.id===C);if(!k)continue;const{variable:B,catégorie:D}=k;let q;switch(typeof E[C]){case"object":if(typeof D=="string"&&["audio","photo","vidéo","fichier"].includes(D)){const{cid:j,ext:J}=E[C];if(!j||!J)continue;q=`${j}.${J}`,l.add({cid:j,ext:J})}else q=JSON.stringify(E[C]);break;case"boolean":q=E[C].toString();break;case"number":q=E[C];break;case"string":q=E[C];break;default:continue}q!==void 0&&(A[n?B:C]=q)}return A};let _=y.map(E=>b(E.données));if(n){const E=await uneFois(C=>this.suivreVariables({idTableau:e,f:C})),A={};for(const C of E){const k=await uneFois(D=>this.client.variables.suivreNomsVariable({id:C,f:D})),B=m.find(D=>D.variable===C).id;A[C]=traduire(k,n)||B}_=_.map(C=>Object.keys(C).reduce((k,B)=>{const D=A[B];return k[D]=C[B],k},{}))}const w=utils$1.json_to_sheet(_);return utils$1.book_append_sheet(a,w,u.slice(0,30)),o=o||u,{doc:a,fichiersSFIP:l,nomFichier:o}}async ajouterÉlément({idTableau:e,vals:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"données",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});n=await this.vérifierClefsÉlément({idTableau:e,élément:n});const d=v4(),m=await l.add({...n,id:d});return await u(),m}async modifierÉlément({idTableau:e,vals:n,empreintePrécédente:a}){const o=await this.client.obtOpsAccès({idBd:e}),l=await this.client.obtIdBd({nom:"données",racine:e,type:"feed",optionsAccès:o});if(!l)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l}),m=this.client.obtÉlémentBdListeSelonEmpreinte({bd:u,empreinte:a});let y=Object.assign({},m,n);if(Object.keys(n).map(b=>{n[b]===void 0&&delete y[b]}),y=await this.vérifierClefsÉlément({idTableau:e,élément:y}),élémentsÉgaux(y,m))return await d(),Promise.resolve(a);{const b=await Promise.all([u.remove(a),u.add(y)]);return await d(),b[1]}}async vérifierClefsÉlément({idTableau:e,élément:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o}),m=[...l.iterator({limit:-1}).collect().map(b=>b.payload.value.id),"id"],y=Object.keys(n).filter(b=>m.includes(b));return await u(),Object.fromEntries(y.map(b=>[b,n[b]]))}async effacerÉlément({idTableau:e,empreinteÉlément:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"données",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.remove(n),await u()}async combinerDonnées({idTableauBase:e,idTableau2:n}){const a=await uneFois(async d=>await this.suivreColonnes({idTableau:e,f:d})),o=await uneFois(async d=>await this.suivreDonnées({idTableau:e,f:d})),l=await uneFois(async d=>await this.suivreDonnées({idTableau:n,f:d})),u=a.filter(d=>d.index).map(d=>d.id);for(const d of l){const m=o.find(y=>indexÉlémentsÉgaux(y.données,d.données,u));if(m){const y={};for(const b of a)m.données[b.id]===void 0&&d.données[b.id]!==void 0&&(y[b.id]=d.données[b.id]);Object.keys(y).length&&(await this.effacerÉlément({idTableau:e,empreinteÉlément:m.empreinte}),await this.ajouterÉlément({idTableau:e,vals:Object.assign({},m.données,y)}))}else await this.ajouterÉlément({idTableau:e,vals:d.données})}}async importerDonnées({idTableau:e,données:n}){const a=await uneFois(async u=>await this.suivreDonnées({idTableau:e,f:u})),o=[];for(const u of n)a.some(d=>élémentsÉgaux(d.données,u))||o.push(u);const l=[];for(const u of a)n.some(d=>élémentsÉgaux(d,u.données))||l.push(u.empreinte);for(const u of o)await this.ajouterÉlément({idTableau:e,vals:u});for(const u of l)await this.effacerÉlément({idTableau:e,empreinteÉlément:u})}async ajouterNomsTableau({idTableau:e,noms:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});for(const d in n)await l.set(d,n[d]);await u()}async sauvegarderNomTableau({idTableau:e,langue:n,nom:a}){const o=await this.client.obtOpsAccès({idBd:e}),l=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:o});if(!l)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l});await u.set(n,a),await d()}async effacerNomTableau({idTableau:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.del(n),await u()}async suivreNomsTableau({idTableau:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async ajouterColonneTableau({idTableau:e,idVariable:n,idColonne:a}){const o=await this.client.obtOpsAccès({idBd:e}),l=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"feed",optionsAccès:o});if(!l)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l}),m={id:a||v4(),variable:n};return await u.add(m),await d(),m.id}async effacerColonneTableau({idTableau:e,idColonne:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"colonnes",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:l,élément:d=>d.payload.value.id===n}),await u()}async suivreColonnes({idTableau:e,f:n,catégories:a=!0}){const o=y=>n(y||[]),l=async(y,b,_)=>y?await this.client.variables.suivreCatégorieVariable({id:y,f:async w=>{const E=Object.assign({catégorie:w},_);await b(E)}}):faisRien,u=y=>y.variable,d=y=>y.id,m=async({id:y,fSuivreBd:b})=>await this.client.suivreBdsDeBdListe({id:y,f:b,fBranche:l,fIdBdDeBranche:u,fCode:d});return a?await this.client.suivreBdDeClef({id:e,clef:"colonnes",f:o,fSuivre:m}):await this.client.suivreBdListeDeClef({id:e,clef:"colonnes",f:o})}async suivreVariables({idTableau:e,f:n}){const a=l=>{n((l||[]).filter(u=>u&&OrbitDB.isValidAddress(u)))},o=async({id:l,fSuivreBd:u})=>await this.client.suivreBdListe({id:l,f:d=>u(d.map(m=>m.variable))});return await this.client.suivreBdDeClef({id:e,clef:"colonnes",f:a,fSuivre:o})}async ajouterRègleTableau({idTableau:e,idColonne:n,règle:a}){const o=await this.client.obtOpsAccès({idBd:e}),l=await this.client.obtIdBd({nom:"règles",racine:e,type:"feed",optionsAccès:o});if(!l)throw new Error(`Permission de modification refusée pour tableau ${e}.`);const{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l}),m=v4(),b={règle:{id:m,règle:a},source:"tableau",colonne:n};return await u.add(b),await d(),m}async effacerRègleTableau({idTableau:e,idRègle:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"règles",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour tableau ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:l,élément:d=>d.payload.value.règle.id===n}),await u()}async suivreRègles({idTableau:e,f:n}){const a={},o=()=>{if(!(!a.tableau||!a.variable))return n([...a.tableau,...a.variable])},l=A=>{a.tableau=A,o()},u=await this.client.suivreBdListeDeClef({id:e,clef:"règles",f:l}),d=async A=>await this.suivreColonnes({idTableau:e,f:A}),m=A=>{a.variable=A,o()},y=async(A,C,k)=>{const B=D=>{const q=D.map(j=>({règle:j,source:"variable",colonne:k.id}));return C(q)};return await this.client.variables.suivreRèglesVariable({id:A,f:B})},b=A=>A.variable,_=A=>A.id,w=await this.client.suivreBdsDeFonctionListe({fListe:d,f:m,fBranche:y,fIdBdDeBranche:b,fCode:_});return async()=>{await u(),await w()}}async suivreValidDonnées({idTableau:e,f:n}){const a={},o=()=>{if(!a.données||!a.règles)return;let C=[];for(const k of a.règles){const B=k(a.données);C=[...C,...B.flat()]}n(C)},l=C=>{a.varsÀColonnes&&(a.règles=C.map(k=>générerFonctionRègle({règle:k.règle,varsÀColonnes:a.varsÀColonnes,donnéesCatégorie:k.donnéesCatégorie})),o())},u=C=>{a.données=C,o()},d=await this.suivreColonnes({idTableau:e,f:C=>{const k=C.reduce((B,D)=>({...B,[D.variable]:D.id}),{});a.varsÀColonnes=k}}),m=async C=>await this.suivreRègles({idTableau:e,f:C}),y=async(C,k,B)=>{if(B.règle.règle.typeRègle==="valeurCatégorique"&&B.règle.règle.détails.type==="dynamique"){const{tableau:D,colonne:q}=B.règle.règle.détails;return await this.suivreDonnées({idTableau:D,f:j=>k({règle:B,donnéesCatégorie:j.map(J=>J.données[q])})})}else return k({règle:B}),faisRien},b=C=>C.règle.id,_=C=>C.règle.id,w=await this.client.suivreBdsDeFonctionListe({fListe:m,f:l,fBranche:y,fIdBdDeBranche:b,fCode:_}),E=await this.suivreDonnées({idTableau:e,f:u});return async()=>{await w(),await E(),await d()}}async suivreValidRègles({idTableau:e,f:n}){const a={},o=()=>{if(!a.colonnes||!a.règles)return;const E=[],A=a.règles.map(D=>D.règle).filter(D=>D.règle.règle.typeRègle==="bornes"),C=A.filter(D=>D.règle.règle.détails.type==="dynamiqueColonne"),k=A.filter(D=>D.règle.règle.détails.type==="dynamiqueVariable"),B=a.règles.filter(D=>D.règle.règle.règle.typeRègle==="valeurCatégorique"&&D.règle.règle.règle.détails.type==="dynamique");for(const D of C)if(!a.colonnes.find(j=>j.id===D.règle.règle.détails.val)){const j={règle:D,détails:"colonneBornesInexistante"};E.push(j)}for(const D of k)if(!a.colonnes.find(j=>j.variable===D.règle.règle.détails.val)){const j={règle:D,détails:"variableBornesNonPrésente"};E.push(j)}for(const D of B)if(!D.colsTableauRéf?.find(j=>j.id===D.règle.règle.règle.détails.colonne)){const j={règle:D.règle,détails:"colonneCatégInexistante"};E.push(j)}n(E)},l=E=>{a.règles=E,o()},u=await this.suivreColonnes({idTableau:e,f:E=>{a.colonnes=E,o()}}),d=async E=>await this.suivreRègles({idTableau:e,f:E}),m=async(E,A,C)=>{if(C.règle.règle.typeRègle==="valeurCatégorique"&&C.règle.règle.détails.type==="dynamique"){const{tableau:k}=C.règle.règle.détails;return await this.suivreColonnes({idTableau:k,f:B=>A({règle:C,colsTableauRéf:B})})}else return A({règle:C}),faisRien},y=E=>E.règle.id,b=E=>E.règle.id,_=await this.client.suivreBdsDeFonctionListe({fListe:d,f:l,fBranche:m,fIdBdDeBranche:y,fCode:b});return async()=>{await _(),await u()}}async effacerTableau({idTableau:e}){const n=await this.client.obtOpsAccès({idBd:e});for(const a in["noms","données","colonnes","règles"]){const o=await this.client.obtIdBd({nom:a,racine:e,optionsAccès:n});o&&await this.client.effacerBd({id:o})}await this.client.effacerBd({id:e})}}__decorate([cacheSuivi],Tableaux.prototype,"suivreDifférencesAvecTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreIndex",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreDonnées",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreNomsTableau",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreColonnes",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreVariables",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreRègles",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidDonnées",null);__decorate([cacheSuivi],Tableaux.prototype,"suivreValidRègles",null);class Variables{constructor({client:e,id:n}){ut(this,"client");ut(this,"idBd");this.client=e,this.idBd=n}async suivreVariables({f:e,idBdVariables:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async créerVariable({catégorie:e}){if(typeof e!="string")throw new Error(`catégorie doit être une chaîne, mais ${e} est de type ${typeof e}.`);const n=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}});await this.ajouterÀMesVariables({id:n});const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:n}),u={address:a.access.address};await a.set("type","variable");const d=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:u});await a.set("noms",d);const m=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:u});await a.set("descriptions",m);const y=await this.client.créerBdIndépendante({type:"feed",optionsAccès:u});return await a.set("règles",y),await a.set("catégorie",e),await this.établirStatut({id:n,statut:{statut:TYPES_STATUT.ACTIVE}}),o(),n}async ajouterÀMesVariables({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async enleverDeMesVariables({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a()}async copierVariable({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e}),o=n.get("catégorie"),l=await this.créerVariable({catégorie:o}),{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l}),m=n.get("noms"),{bd:y,fOublier:b}=await this.client.ouvrirBd({id:m}),_=ClientConstellation.obtObjetdeBdDic({bd:y});await this.ajouterNomsVariable({id:l,noms:_});const w=n.get("descriptions"),{bd:E,fOublier:A}=await this.client.ouvrirBd({id:w}),C=ClientConstellation.obtObjetdeBdDic({bd:E});await this.ajouterDescriptionsVariable({id:l,descriptions:C});const k=n.get("unités");k&&await u.put("unités",k);const B=n.get("règles"),{bd:D,fOublier:q}=await this.client.ouvrirBd({id:B}),j=ClientConstellation.obtÉlémentsDeBdListe({bd:D});await Promise.all(j.map(async Y=>{await this.ajouterRègleVariable({idVariable:l,règle:Y.règle})}));const J=n.get("statut")||{statut:TYPES_STATUT.ACTIVE};return await this.établirStatut({id:l,statut:J}),a(),d(),b(),A(),q(),l}async inviterAuteur({idVariable:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async ajouterNomsVariable({id:e,noms:n}){const a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a});for(const u in n)await o.set(u,n[u]);await l()}async sauvegarderNomVariable({id:e,langue:n,nom:a}){const o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.set(n,a),await u()}async effacerNomVariable({id:e,langue:n}){const a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a});await o.del(n),await l()}async ajouterDescriptionsVariable({id:e,descriptions:n}){const a=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a});for(const u in n)await o.set(u,n[u]);await l()}async sauvegarderDescrVariable({id:e,langue:n,description:a}){const o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore"});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.set(n,a),await u()}async effacerDescrVariable({id:e,langue:n}){const a=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a});await o.del(n),await l()}async sauvegarderCatégorieVariable({idVariable:e,catégorie:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("catégorie",n),await o()}async sauvegarderUnitésVariable({idVariable:e,idUnité:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("unités",n),await o()}async ajouterRègleVariable({idVariable:e,règle:n,idRègle:a}){const o=await this.client.obtIdBd({nom:"règles",racine:e,type:"feed"});if(!o)throw new Error(`Permission de modification refusée pour variable ${e}.`);a=a||v4();const l={id:a,règle:n},{bd:u,fOublier:d}=await this.client.ouvrirBd({id:o});return await u.add(l),await d(),a}async effacerRègleVariable({idVariable:e,idRègle:n}){const a=await this.client.obtIdBd({nom:"règles",racine:e,type:"feed"});if(!a)throw new Error(`Permission de modification refusée pour variable ${e}.`);const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a});await this.client.effacerÉlémentDeBdListe({bd:o,élément:u=>u.payload.value.id===n}),await l()}async modifierRègleVariable({idVariable:e,règleModifiée:n,idRègle:a}){await this.effacerRègleVariable({idVariable:e,idRègle:a}),await this.ajouterRègleVariable({idVariable:e,règle:n,idRègle:a})}async suivreNomsVariable({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async suivreDescrVariable({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",f:n})}async suivreCatégorieVariable({id:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("catégorie");await n(o)}})}async suivreUnitésVariable({id:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("unités");await n(o)}})}async suivreRèglesVariable({id:e,f:n}){const a={catégorie:[],propres:[]},o=()=>{n([...a.catégorie,...a.propres])},l=b=>{const _={id:v4(),règle:{typeRègle:"catégorie",détails:{catégorie:b}}};a.catégorie=[_],o()},u=await this.suivreCatégorieVariable({id:e,f:l}),d=b=>{a.propres=b,o()},m=await this.client.suivreBdListeDeClef({id:e,clef:"règles",f:d});return async()=>{await u(),await m()}}async suivreQualitéVariable({id:e,f:n}){const a={noms:{},descr:{},règles:[]},o=()=>{const _=[Object.keys(a.noms).length?1:0,Object.keys(a.descr).length?1:0];a.catégorie==="numérique"&&_.push(a.unités?1:0),(a.catégorie==="numérique"||a.catégorie==="catégorique")&&_.push(a.règles.length>=1?1:0);const w=_.reduce((E,A)=>E+A,0)/_.length;n(w)},l=await this.suivreNomsVariable({id:e,f:_=>{a.noms=_,o()}}),u=await this.suivreDescrVariable({id:e,f:_=>{a.descr=_,o()}}),d=await this.suivreUnitésVariable({id:e,f:_=>{a.unités=_,o()}}),m=await this.suivreCatégorieVariable({id:e,f:_=>{a.catégorie=_,o()}}),y=await this.suivreRèglesVariable({id:e,f:_=>{a.règles=_,o()}});return async()=>{await l(),await u(),await d(),await m(),await y()}}async établirStatut({id:e,statut:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("statut",n),await o()}async marquerObsolète({id:e,idNouvelle:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});a.set("statut",{statut:TYPES_STATUT.OBSOLÈTE,idNouvelle:n}),await o()}async effacerVariable({id:e}){await this.enleverDeMesVariables({id:e});const n=await this.client.obtOpsAccès({idBd:e});for(const a in["noms","descriptions","règles"]){const o=await this.client.obtIdBd({nom:a,racine:e,optionsAccès:n});o&&await this.client.effacerBd({id:o})}await this.client.effacerBd({id:e})}}__decorate([cacheSuivi],Variables.prototype,"suivreVariables",null);__decorate([cacheSuivi],Variables.prototype,"suivreNomsVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreDescrVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreCatégorieVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreUnitésVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreRèglesVariable",null);__decorate([cacheSuivi],Variables.prototype,"suivreQualitéVariable",null);function baseSum$1(t,e){for(var n,a=-1,o=t.length;++a<o;){var l=e(t[a]);l!==void 0&&(n=n===void 0?l:n+l)}return n}var _baseSum=baseSum$1;function identity$2(t){return t}var identity_1=identity$2,baseSum=_baseSum,identity$1=identity_1;function sum$1(t){return t&&t.length?baseSum(t,identity$1):0}var sum_1=sum$1,average$3=function t(e){return e.reduce(sum,0)/e.length};function sum(t,e){return t+e}var average$2=average$3,variance$1=function t(e){var n=average$2(e);function a(o,l){var u=l-n;return o+u*u}return e.reduce(a,0)/e.length},average$1=average$3,covariance$1=function t(e,n){for(var a=e.length,o=0,l=average$1(e),u=average$1(n),d=[];o<a;o+=1){var m=e[o]-l,y=n[o]-u;d.push(m*y)}return average$1(d)},average=average$3,variance=variance$1,covariance=covariance$1,ssim=function t(e,n,a){a=a||{};var o="K1"in a?a.K1:.01,l="K2"in a?a.K2:.03,u="L"in a?a.L:255,d="alpha"in a?a.alpha:1,m="beta"in a?a.beta:1,y="gamma"in a?a.gamma:1,b=o*u*(o*u),_=l*u*(l*u),w=_/2;function E(q,j){var J=average(q),Y=average(j);return(2*J*Y+b)/(J*J+Y*Y+b)}function A(q,j){var J=variance(q),Y=variance(j),L=Math.sqrt(J),Z=Math.sqrt(Y);return(2*L*Z+_)/(J+Y+_)}function C(q,j){var J=Math.sqrt(variance(q)),Y=Math.sqrt(variance(j)),L=covariance(q,j);return(L+w)/(J*Y+w)}var k=Math.pow(E(e,n),d),B=Math.pow(A(e,n),m),D=Math.pow(C(e,n),y);return k*B*D};function reverse(t){return t.split("").reverse().join("")}function findMatchStarts(t,e,n){const a=reverse(e);return n.map(o=>{const l=Math.max(0,o.end-e.length-o.errors),u=reverse(t.slice(l,o.end));return{start:findMatchEnds(u,a,o.errors).reduce((m,y)=>o.end-y.end<m?o.end-y.end:m,o.end),end:o.end,errors:o.errors}})}function oneIfNotZero(t){return(t|-t)>>31&1}function advanceBlock(t,e,n,a){let o=t.P[n],l=t.M[n];const u=a>>>31,d=e[n]|u,m=d|l,y=(d&o)+o^o|d;let b=l|~(y|o),_=o&y;const w=oneIfNotZero(b&t.lastRowMask[n])-oneIfNotZero(_&t.lastRowMask[n]);return b<<=1,_<<=1,_|=u,b|=oneIfNotZero(a)-u,o=_|~(m|b),l=b&m,t.P[n]=o,t.M[n]=l,w}function findMatchEnds(t,e,n){if(e.length===0)return[];n=Math.min(n,e.length);const a=[],o=32,l=Math.ceil(e.length/o)-1,u={P:new Uint32Array(l+1),M:new Uint32Array(l+1),lastRowMask:new Uint32Array(l+1)};u.lastRowMask.fill(1<<31),u.lastRowMask[l]=1<<(e.length-1)%o;const d=new Uint32Array(l+1),m=new Map,y=[];for(let w=0;w<256;w++)y.push(d);for(let w=0;w<e.length;w+=1){const E=e.charCodeAt(w);if(m.has(E))continue;const A=new Uint32Array(l+1);m.set(E,A),E<y.length&&(y[E]=A);for(let C=0;C<=l;C+=1){A[C]=0;for(let k=0;k<o;k+=1){const B=C*o+k;if(B>=e.length)continue;e.charCodeAt(B)===E&&(A[C]|=1<<k)}}}let b=Math.max(0,Math.ceil(n/o)-1);const _=new Uint32Array(l+1);for(let w=0;w<=b;w+=1)_[w]=(w+1)*o;_[l]=e.length;for(let w=0;w<=b;w+=1)u.P[w]=-1,u.M[w]=0;for(let w=0;w<t.length;w+=1){const E=t.charCodeAt(w);let A;E<y.length?A=y[E]:(A=m.get(E),typeof A>"u"&&(A=d));let C=0;for(let k=0;k<=b;k+=1)C=advanceBlock(u,A,k,C),_[k]+=C;if(_[b]-C<=n&&b<l&&(A[b+1]&1||C<0)){b+=1,u.P[b]=-1,u.M[b]=0;let k;if(b===l){const B=e.length%o;k=B===0?o:B}else k=o;_[b]=_[b-1]+k-C+advanceBlock(u,A,b,C)}else for(;b>0&&_[b]>=n+o;)b-=1;b===l&&_[b]<=n&&(_[b]<n&&a.splice(0,a.length),a.push({start:-1,end:w+1,errors:_[b]}),n=_[b])}return a}function search(t,e,n){const a=findMatchEnds(t,e,n);return findMatchStarts(t,e,a)}const rechercherDansTexte=(t,e)=>{const a=search(e,t,Math.ceil(t.length/4)).sort((o,l)=>o.errors>l.errors?1:-1)[0];if(a)return{type:"texte",score:1/(a.errors+1),début:a.start,fin:a.end}},similTexte=(t,e)=>(Array.isArray(e)&&(e=Object.fromEntries(e.map(o=>[o,o]))),Object.entries(e).map(([o,l])=>{const u=rechercherDansTexte(t,l);if(u){const{score:d,début:m,fin:y}=u;return{type:"résultat",score:d,clef:o,info:{type:"texte",texte:l,début:m,fin:y}}}}).filter(o=>o).sort((o,l)=>o.score>l.score?-1:1)[0]),similImages=(t,e)=>{if(!e)return 0;const{mssim:n}=ssim(t,e);return n},combinerRecherches=async(t,e,n,a)=>{const o=[],l=Object.fromEntries(Object.keys(t).map(d=>[d,void 0])),u=()=>{const d=Object.values(l).filter(m=>m).sort((m,y)=>aMieuxQueB(m,y)?-1:1)[0];a(d)};return await Promise.all(Object.entries(t).map(async([d,m])=>{const y=b=>{l[d]=b,u()};o.push(await m(e,n,y))})),async()=>{await Promise.all(o.map(d=>d()))}},sousRecherche=async(t,e,n,a,o)=>{const l=async(m,y)=>await n(a,m,b=>{b&&y({id:m,résultat:b})}),u=m=>{const y=meilleurRésultat(m);if(y){const b={type:"résultat",de:t,clef:y.id,score:y.résultat.score,info:{type:"résultat",de:y.résultat.de,info:y.résultat.info}};y.résultat.clef&&(b.info.clef=y.résultat.clef),o(b)}};return await a.suivreBdsDeFonctionListe({fListe:e,f:u,fBranche:l})},aMieuxQueB=(t,e)=>{const n=(a,o)=>{for(;a.type==="résultat";)a=a.info;for(;o.type==="résultat";)o=o.info;switch(a.type){case"texte":return o.type==="texte"?a.fin-a.début>o.fin-o.début:!1;default:return!0}};return t.score>e.score?!0:t.score<e.score?!1:!!n(t.info,e.info)},meilleurRésultat=t=>Object.values(t).filter(n=>n).sort((n,a)=>aMieuxQueB(n.résultat,a.résultat)?-1:1)[0],rechercherSelonId=t=>async(e,n,a)=>{const o=rechercherDansTexte(t,n);if(o){const{score:l,début:u,fin:d}=o;a({score:l,type:"résultat",de:"id",info:{type:"texte",début:u,fin:d,texte:n}})}else a();return faisRien},rechercherTous=()=>async(t,e,n)=>(n({type:"résultat",score:1,de:"*",info:{type:"vide"}}),faisRien),rechercherProfilSelonActivité=()=>async(t,e,n)=>{const a={noms:{},image:void 0,courriel:void 0},o=()=>({type:"résultat",score:[Object.keys(a.noms).length>0,a.image,a.courriel].filter(Boolean).length/3,de:"activité",info:{type:"vide"}}),l=w=>{a.noms=w,n(o())},u=w=>{a.image=w,n(o())},d=w=>{a.courriel=w,n(o())},m=await t.réseau.suivreNomsMembre({idCompte:e,f:l}),y=await t.réseau.suivreImageMembre({idCompte:e,f:u}),b=await t.réseau.suivreCourrielMembre({idCompte:e,f:d});return async()=>{await m(),await y(),await b()}},rechercherProfilSelonNom=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,clef:y,info:b,de:"nom"})}else a()};return await e.réseau.suivreNomsMembre({idCompte:n,f:o})},rechercherProfilSelonCourriel=t=>async(e,n,a)=>{const o=u=>{const d=u?rechercherDansTexte(t,u):void 0;if(d){const{score:m,début:y,fin:b}=d;a({type:"résultat",score:m,de:"courriel",info:{type:"texte",début:y,fin:b,texte:u}})}else a()};return await e.réseau.suivreCourrielMembre({idCompte:n,f:o})},rechercherProfilSelonImage=t=>async(e,n,a)=>{const o=u=>{const d=similImages(t,u);a({type:"résultat",score:d,de:"image",info:{type:"vide"}})};return await e.réseau.suivreImageMembre({idCompte:n,f:o})},INTERVALE_SALUT=1e3*60,FACTEUR_ATÉNUATION_CONFIANCE=.8,FACTEUR_ATÉNUATION_BLOQUÉS=.9,CONFIANCE_DE_COAUTEUR=.9,CONFIANCE_DE_FAVORIS=.7,DÉLAI_SESOUVENIR_MEMBRES_EN_LIGNE=1e3*60*60*24*30,N_DÉSIRÉ_SOUVENIR_MEMBRES_EN_LIGNE=50,obtChaîneIdSFIPClient=t=>t.idNodeSFIP.id.toCID().toString();class Réseau extends eventsExports.EventEmitter{constructor({client:n,id:a}){super();ut(this,"client");ut(this,"idBd");ut(this,"bloquésPrivés");ut(this,"_fermé");ut(this,"dispositifsEnLigne");ut(this,"fsOublier");this.client=n,this.idBd=a,this.bloquésPrivés=new Set,this.dispositifsEnLigne={},this.fsOublier=[],this._fermé=!1}async initialiser(){const n={};await this.client.sfip.pubsub.subscribe(this.client.sujet_réseau,d=>{const m=v4();try{const y=this.messageReçu({msg:d});n[m]=y,y.then(()=>{delete n[m]})}catch(y){console.error(y.toString()),console.error(y.stack.toString())}}),this.fsOublier.push(async()=>{await this.client.sfip.pubsub.unsubscribe(this.client.sujet_réseau),await Promise.all(Object.values(n))});const a=this.client.sfip.libp2p,o=()=>{this.emit("changementConnexions")},l=["peer:connect","peer:disconnect"];for(const d of l)a.connectionManager.addEventListener(d,o);this.fsOublier.push(...l.map(d=>async()=>a.connectionManager.removeEventListener(d,o)));const u=setInterval(()=>{this.direSalut({})},INTERVALE_SALUT);this.fsOublier.push(async()=>clearInterval(u)),await this.direSalut({})}async envoyerMessageAuDispositif({msg:n,idSFIP:a}){a&&(n.destinataire=a);const o=this.client.sujet_réseau,l=Buffer$y.from(JSON.stringify(n));await this.client.sfip.pubsub.publish(o,l)}async envoyerMessageAuMembre({msg:n,idCompte:a,encrypté:o=!0}){const u={signature:await this.client.signer({message:JSON.stringify(n)}),valeur:n},d=Date.now(),m=Object.values(this.dispositifsEnLigne).filter(y=>y.infoDispositif.idCompte===a).filter(y=>y.vuÀ&&d-y.vuÀ<INTERVALE_SALUT+1e3*30);if(!m.length)throw new Error(`Aucun dispositif présentement en ligne pour membre ${a}`);await Promise.all(m.map(async y=>{const{idSFIP:b,encryption:_}=y.infoDispositif;if(o){if(_?.type!==this.client.encryption.nom)return;const w=this.client.encryption.encrypter({message:JSON.stringify(u),clefPubliqueDestinataire:_.clefPublique}),E={encrypté:!0,clefPubliqueExpéditeur:this.client.encryption.clefs.publique,données:w};await this.envoyerMessageAuDispositif({msg:E,idSFIP:b})}else{const w={encrypté:!1,données:u};await this.envoyerMessageAuDispositif({msg:w,idSFIP:b})}}))}async direSalut({à:n}){const a={type:"Salut !",contenu:{idSFIP:obtChaîneIdSFIPClient(this.client),idOrbite:this.client.orbite.identity.id,clefPublique:this.client.orbite.identity.publicKey,signatures:this.client.orbite.identity.signatures,idCompte:this.client.bdCompte.id}};this.client.encryption&&(a.contenu.encryption={type:this.client.encryption.nom,clefPublique:this.client.encryption.clefs.publique});const l={encrypté:!1,données:{signature:await this.client.signer({message:JSON.stringify(a)}),valeur:a}};await this.envoyerMessageAuDispositif({msg:l,idSFIP:n})}async envoyerDemandeRejoindreCompte({idCompte:n,codeSecret:a}){const o={type:"Je veux rejoindre ce compte",contenu:{idOrbite:await this.client.obtIdOrbite(),codeSecret:a}};await this.envoyerMessageAuMembre({msg:o,idCompte:n})}async messageReçu({msg:n}){if(this._fermé)return;const a=JSON.parse(new TextDecoder().decode(n.data)),{encrypté:o,destinataire:l}=a;if(l&&l!==obtChaîneIdSFIPClient(this.client))return;const u=o?JSON.parse(this.client.encryption.décrypter({message:a.données,clefPubliqueExpéditeur:a.clefPubliqueExpéditeur})):a.données,{valeur:d,signature:m}=u;if(m.clefPublique===this.client.orbite.identity.publicKey&&d.type!=="Salut !"||!await this.client.vérifierSignature({signature:m,message:JSON.stringify(d)}))return;const b=d.contenu;switch(d.type){case"Salut !":{const _=b,{clefPublique:w}=_;if(w!==m.clefPublique)return;await this.recevoirSalut({message:_}),l||await this.direSalut({à:_.idSFIP});break}case"Je veux rejoindre ce compte":{const _=b;await this.client.considérerRequèteRejoindreCompte({requète:_});break}default:console.error(`Message inconnu: ${d.type}`)}}async recevoirSalut({message:n}){await this._validerInfoMembre({info:n})&&(this.dispositifsEnLigne[n.idOrbite]={infoDispositif:n,vuÀ:new Date().getTime()},this.emit("membreVu"),this._sauvegarderDispositifsEnLigne())}_nettoyerDispositifsEnLigne(){const n=new Date().getTime(),a=Object.values(this.dispositifsEnLigne).filter(u=>n-(u.vuÀ||0)>DÉLAI_SESOUVENIR_MEMBRES_EN_LIGNE).sort((u,d)=>(u.vuÀ||0)<(d.vuÀ||0)?-1:1).map(u=>u.infoDispositif.idOrbite),o=Object.keys(this.dispositifsEnLigne).length-N_DÉSIRÉ_SOUVENIR_MEMBRES_EN_LIGNE;a.slice(a.length-o).forEach(u=>delete this.dispositifsEnLigne[u])}async _sauvegarderDispositifsEnLigne(){this._nettoyerDispositifsEnLigne(),await this.client.sauvegarderAuStockageLocal({clef:"dispositifsEnLigne",val:JSON.stringify(this.dispositifsEnLigne)})}async _validerInfoMembre({info:n}){const{idCompte:a,signatures:o,clefPublique:l,idOrbite:u}=n;if(!(a&&o&&l&&u))return!1;const d=await this.client.vérifierSignature({signature:{signature:o.id,clefPublique:l},message:u}),m=await this.client.vérifierSignature({signature:{signature:o.publicKey,clefPublique:u},message:l+o.id});if(!OrbitDB.isValidAddress(a))return!1;const{bd:y,fOublier:b}=await this.client.ouvrirBd({id:a});if(!(y.access instanceof ContrôleurConstellation))return!1;const _=y.access.estAutorisé(u);return await b(),d&&m&&_}async faireConfianceAuMembre({idBdCompte:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:this.idBd});await a.set(n,"FIABLE"),await o()}async nePlusFaireConfianceAuMembre({idBdCompte:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:this.idBd});Object.keys(ClientConstellation.obtObjetdeBdDic({bd:a})).includes(n)&&a.get(n)==="FIABLE"&&await a.del(n),await o()}async suivreFiables({f:n,idBdCompte:a}){a=a||this.client.idBdCompte;const o=l=>{const u=Object.keys(l).filter(d=>l[d]==="FIABLE");n(u)};return await this.client.suivreBdDicDeClef({id:a,clef:"réseau",f:o})}async _initaliserBloquésPrivés(){const n=await this.client.obtDeStockageLocal({clef:"membresBloqués"});n&&(JSON.parse(n).forEach(a=>this.bloquésPrivés.add(a)),this.emit("changementMembresBloqués"))}async _sauvegarderBloquésPrivés(){const n=[...this.bloquésPrivés];this.client.sauvegarderAuStockageLocal({clef:"membresBloqués",val:JSON.stringify(n)})}async bloquerMembre({idBdCompte:n,privé:a=!1}){if(a)await this.débloquerMembre({idBdCompte:n}),this.bloquésPrivés.add(n),await this._sauvegarderBloquésPrivés();else{const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:this.idBd});await o.set(n,"BLOQUÉ"),await l()}this.emit("changementMembresBloqués")}async débloquerMembre({idBdCompte:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:this.idBd});Object.keys(ClientConstellation.obtObjetdeBdDic({bd:a})).includes(n)&&a.get(n)==="BLOQUÉ"&&await a.del(n),await o(),this.bloquésPrivés.has(n)&&(this.bloquésPrivés.delete(n),await this._sauvegarderBloquésPrivés()),this.emit("changementMembresBloqués")}async suivreBloquésPubliques({f:n,idBdCompte:a}){a=a||this.client.idBdCompte;const o=l=>{const u=Object.keys(l).filter(d=>l[d]==="BLOQUÉ");n(u)};return await this.client.suivreBdDicDeClef({id:a,clef:"réseau",f:o})}async suivreBloqués({f:n,idBdCompte:a}){a=a||this.client.idBdCompte;const o=[];let l=[];const u=()=>{const d=[...new Set([...[...this.bloquésPrivés].map(m=>({idBdCompte:m,privé:!0})),...l.map(m=>({idBdCompte:m,privé:!1}))])];n(d)};return o.push(await this.suivreBloquésPubliques({f:d=>{l=d,u()},idBdCompte:a})),a===this.client.idBdCompte&&(await this._initaliserBloquésPrivés(),this.on("changementMembresBloqués",u),o.push(async()=>{this.off("changementMembresBloqués",u)}),u()),async()=>{await Promise.all(o.map(d=>d()))}}async suivreRelationsImmédiates({f:n,idBdCompte:a}){a=a||this.client.idBdCompte;const o=[],l={suivis:[],favoris:[],coauteursBds:[],coauteursProjets:[],coauteursVariables:[],coauteursMotsClefs:[]};let u=[];const d=()=>{const A=[...l.suivis,...l.favoris,...l.coauteursBds,...l.coauteursProjets,...l.coauteursVariables,...l.coauteursMotsClefs,...u.map(B=>({idBdCompte:B,confiance:-1}))],k=[...new Set(A)].map(B=>{const{idBdCompte:D}=B;if(u.includes(D))return{idBdCompte:D,confiance:-1};const j=1-A.filter(J=>J.idBdCompte===D).map(J=>J.confiance).map(J=>1-J).reduce((J,Y)=>Y*J,1);return{idBdCompte:D,confiance:j}});n(k)};o.push(await this.suivreBloqués({f:A=>{u=A.map(C=>C.idBdCompte),d()},idBdCompte:a})),o.push(await this.client.suivreBdDicDeClef({id:a,clef:"réseau",f:A=>{l.suivis=Object.entries(A).filter(([C,k])=>k==="FIABLE").map(([C,k])=>({idBdCompte:C,confiance:1})),d()}}));const m=async(A,C,k)=>{o.push(await this.client.suivreBdsDeFonctionListe({fListe:A,f:B=>{l[C]=B.map(D=>({idBdCompte:D,confiance:k})),d()},fBranche:async(B,D)=>await this.client.suivreAccèsBd({id:B,f:q=>D(q.map(j=>j.idBdCompte).filter(j=>j!==a))})}))};return await m(async A=>await this.suivreFavorisMembre({idCompte:a,f:C=>A((C||[]).map(k=>k.idObjet))}),"favoris",CONFIANCE_DE_FAVORIS),await m(async A=>await this.suivreBdsMembre({idCompte:a,f:C=>A(C||[])}),"coauteursBds",CONFIANCE_DE_COAUTEUR),await m(async A=>await this.suivreProjetsMembre({idCompte:a,f:C=>A(C||[])}),"coauteursProjets",CONFIANCE_DE_COAUTEUR),await m(async A=>await this.suivreVariablesMembre({idCompte:a,f:C=>A(C||[])}),"coauteursVariables",CONFIANCE_DE_COAUTEUR),await m(async A=>await this.suivreMotsClefsMembre({idCompte:a,f:C=>A(C||[])}),"coauteursMotsClefs",CONFIANCE_DE_COAUTEUR),async()=>{await Promise.all(o.map(A=>A()))}}async suivreRelationsConfiance({f:n,profondeur:a,idCompteDébut:o}){o=o||this.client.idBdCompte;const l={},u={},d=new src$4;let m=!1;const y=B=>Object.entries(l).filter(([D,q])=>q.relations.map(j=>j.idBdCompte).includes(B)).map(([D,q])=>D),b=B=>{if(B===o)return 0;const D=({ids:q,p:j=1,déjàVues:J=new Set})=>{const Y=q.map(L=>y(L).filter(Z=>!J.has(Z))).flat();return Y.includes(o)?j:Y.length?(J=new Set(...J,...Y),D({ids:Y,p:j+1,déjàVues:J})):1/0};return D({ids:[B]})},_=()=>{const B=[];for(const[D,q]of Object.entries(l))for(const j of q.relations){const J=b(D)+1;B.push({de:D,pour:j.idBdCompte,confiance:j.confiance,profondeur:J})}n(B)},w=async B=>{l[B]={relations:[]};const D=await this.suivreRelationsImmédiates({f:q=>{l[B]&&(l[B].relations=q,A())},idBdCompte:B});u[B]=D},E=async B=>{await u[B](),delete u[B],delete l[B]},A=async()=>{if(m)return;await d.acquire("modification");const B=Object.keys(l).filter(q=>b(q)>=a),D=[...new Set(Object.entries(l).filter(([q,j])=>b(q)+1<a).map(([q,j])=>j.relations.map(J=>J.idBdCompte)).flat())].filter(q=>!Object.keys(l).includes(q));await Promise.all(B.map(q=>E(q))),await Promise.all(D.map(q=>w(q))),_(),d.release("modification")};return await w(o),{fOublier:async()=>{m=!0,await Promise.all(Object.values(u).map(B=>B()))},fChangerProfondeur:async B=>{a=B,await A()}}}async suivreComptesRéseau({f:n,profondeur:a,idCompteDébut:o}){const l=u=>{u.push({de:this.client.idBdCompte,pour:this.client.idBdCompte,confiance:1,profondeur:0});const d={};u.forEach(y=>{Object.keys(d).includes(y.pour)||(d[y.pour]=[]),d[y.pour].push(y)});const m=Object.entries(d).map(([y,b])=>{const _=b.find(B=>B.de===this.client.idBdCompte);if(_?.confiance===1||_?.confiance===-1)return{idBdCompte:y,profondeur:_.pour===this.client.idBdCompte?0:1,confiance:_.confiance};const w=Math.min(...b.map(B=>B.profondeur)),E=b.filter(B=>B.confiance>=0),C=1-b.filter(B=>B.confiance<0).map(B=>1+B.confiance*Math.pow(FACTEUR_ATÉNUATION_BLOQUÉS,B.profondeur-1)).reduce((B,D)=>D*B,1),k=1-E.map(B=>1-B.confiance*Math.pow(FACTEUR_ATÉNUATION_CONFIANCE,B.profondeur-1)).reduce((B,D)=>D*B,1)-C;return{idBdCompte:y,profondeur:w,confiance:k}});n(m)};return await this.suivreRelationsConfiance({f:l,profondeur:a,idCompteDébut:o})}async suivreComptesRéseauEtEnLigne({f:n,profondeur:a,idCompteDébut:o}){const l={réseau:[],enLigne:[]},u=()=>{const w=[...l.réseau];l.enLigne.forEach(E=>{w.find(A=>A.idBdCompte===E.idBdCompte)||w.push(E)}),n(w)},d=await this.suivreConnexionsMembres({f:w=>{const E=w.filter(A=>A.infoMembre.idBdCompte!==this.client.idBdCompte).map(A=>({idBdCompte:A.infoMembre.idBdCompte,profondeur:1/0,confiance:0}));l.enLigne=E,u()}}),m=w=>{l.réseau=w,u()},{fOublier:y,fChangerProfondeur:b}=await this.suivreComptesRéseau({f:m,profondeur:a,idCompteDébut:o});return{fOublier:async()=>{await d(),await y()},fChangerProfondeur:b}}async suivreConfianceMonRéseauPourMembre({idBdCompte:n,f:a,profondeur:o,idBdCompteRéférence:l}){l=l||this.client.idBdCompte;const u=d=>{const m=d.find(y=>y.idBdCompte===n);a(m?.confiance||0)};return await this.suivreComptesRéseau({f:u,profondeur:o,idCompteDébut:l})}async suivreConnexionsPostesSFIP({f:n}){const a=u=>{const d=[],m=[];for(const y of u)d.includes(y.peer.toCID().toString())||(d.push(y.peer.toCID().toString()),m.push(y));return m},o=async()=>{const u=await this.client.sfip.swarm.peers(),d=a(u);n(d.map(m=>({addr:m.addr.toString(),peer:m.peer.toCID().toString()})))};return this.on("changementConnexions",o),o(),async()=>{this.off("changementConnexions",o)}}async suivreConnexionsDispositifs({f:n}){const a=()=>{n(Object.values(this.dispositifsEnLigne))};return this.on("membreVu",a),a(),async()=>{this.off("membreVu",a)}}async suivreConnexionsMembres({f:n}){const a=o=>{const l={};for(const u of o){const{idCompte:d}=u.infoDispositif;l[d]||(l[d]={infoMembre:{idBdCompte:d,dispositifs:[]}});const{infoMembre:m,vuÀ:y}=l[d];m.dispositifs.push(u.infoDispositif),l[d].vuÀ=y?u.vuÀ?Math.max(y,u.vuÀ):y:u.vuÀ}n(Object.values(l))};return await this.suivreConnexionsDispositifs({f:a})}async suivreNomsMembre({idCompte:n,f:a}){const o=l=>a(l||{});return await this.client.suivreBdDeClef({id:n,clef:"compte",f:o,fSuivre:({id:l,fSuivreBd:u})=>this.client.profil.suivreNoms({f:u,idBdProfil:l})})}async suivreCourrielMembre({idCompte:n,f:a}){return await this.client.suivreBdDeClef({id:n,clef:"compte",f:a,fSuivre:async({id:o,fSuivreBd:l})=>await this.client.profil.suivreCourriel({f:l,idBdProfil:o})})}async suivreImageMembre({idCompte:n,f:a}){const o=async u=>a(u||null),l=async({id:u,fSuivreBd:d})=>await this.client.profil.suivreImage({f:d,idBdProfil:u});return await this.client.suivreBdDeClef({id:n,clef:"compte",f:o,fSuivre:l})}async rechercher({f:n,nRésultatsDésirés:a,fRecherche:o,fConfiance:l,fQualité:u,fObjectif:d,fScore:m}){m||(m=oe=>(oe.confiance+oe.qualité+oe.objectif.score)/3),d=d||rechercherTous();const y={},b={},_=3e3;let w,E=3,A=!1;const C=oe=>{E=oe,Y(oe),w&&clearTimeout(w)},k=(oe=_)=>{if(A)return;w&&clearTimeout(w);const ae=Object.values(y).map(X=>X.résultats).flat().map(X=>X.résultatObjectif.score),U=ae.length>=a?Math.min(...ae.slice(0,a)):0,I=Object.values(y).reduce(function(X,H){return X[String(H.membre.profondeur)]=X[String(H.membre.profondeur)]||[],X[String(H.membre.profondeur)].push(...H.résultats),X},{}),T=Object.entries(I).sort((X,H)=>Number(X[0])<Number(H[0])?-1:1).map(X=>X[1]).map(X=>X.filter(H=>H.résultatObjectif.score>=U).length),M=T.slice(T.length-3),O=T.slice(T.length-4),z=Math.max(3,sum_1(M)?E+1:sum_1(O)?E:E-1);z>E?w=setTimeout(()=>C(z),oe):z<E&&C(z)},B=async()=>{const ae=Object.values(y).map(U=>U.résultats).flat().sort((U,I)=>U.résultatObjectif.score<I.résultatObjectif.score?1:-1);await n(ae.slice(0,a)),k()},D=async oe=>{const{idBdCompte:ae}=oe,U=async M=>await o({idCompte:oe.idBdCompte,fSuivi:async O=>await M(O||[])}),I=async M=>{y[ae].résultats=M,await B()},x=async(M,O)=>{const z={id:M},X=()=>{const{objectif:le,confiance:ce,qualité:pe}=z;if(le&&ce!==void 0&&pe!==void 0){const se={id:M,résultatObjectif:{...le,score:m(z)}};O(se)}else O(void 0)},H=le=>{z.objectif=le,X()},P=await d(this.client,M,H),F=await l(M,le=>{z.confiance=le,X()}),ee=await u(M,le=>{z.qualité=le,X()});return async()=>{await P(),await F(),await ee()}};y[ae]={résultats:[],membre:oe,mettreÀJour:async()=>{await B()}};const T=await this.client.suivreBdsDeFonctionListe({fListe:U,f:I,fBranche:x});b[ae]=T},q=async oe=>{await b[oe](),delete y[oe],delete b[oe],await B()},j=new src$4,J=async oe=>{await j.acquire("rechercher"),oe=oe.filter(x=>x.confiance>=0);const ae=oe.filter(x=>!y[x.idBdCompte]),U=Object.keys(y).filter(x=>!oe.find(T=>T.idBdCompte===x)),I=oe.filter(x=>{const T=y[x.idBdCompte];return T&&(x.confiance!==T.membre.confiance||x.profondeur!==T.membre.profondeur)});await Promise.all(ae.map(D)),await Promise.all(I.map(async x=>await y[x.idBdCompte].mettreÀJour(x))),await Promise.all(U.map(x=>q(x))),j.release("rechercher")},{fChangerProfondeur:Y,fOublier:L}=await this.suivreComptesRéseauEtEnLigne({f:J,profondeur:E});return{fChangerN:async oe=>{const ae=a;a=oe,oe!==ae&&(await B(),k(0))},fOublier:async()=>{A=!0,w&&clearTimeout(w),await L(),await Promise.all(Object.values(b).map(oe=>oe()))}}}async rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o}){const l=async(m,y)=>{const{fOublier:b}=await this.suivreConfianceMonRéseauPourMembre({idBdCompte:m,f:y,profondeur:4});return b},u=async({idCompte:m,fSuivi:y})=>(y([m]),faisRien),d=async(m,y)=>await rechercherProfilSelonActivité()(this.client,m,_=>{y(_?.score||0)});return await this.rechercher({f:n,nRésultatsDésirés:a,fRecherche:u,fConfiance:l,fQualité:d,fObjectif:o})}async suivreConfianceAuteurs({idItem:n,clef:a,f:o}){const l=async y=>await this.suivreAuteursObjet({idObjet:n,clef:a,f:async b=>{const _=b.filter(w=>w.accepté).map(w=>w.idBdCompte);return await y(_)}}),u=async(y,b)=>{const{fOublier:_}=await this.suivreConfianceMonRéseauPourMembre({idBdCompte:y,f:b,profondeur:4});return _},d=y=>{const b=y.reduce((_,w)=>_+w,0);o(b)},m=y=>y.flat();return await this.client.suivreBdsDeFonctionListe({fListe:l,f:d,fBranche:u,fRéduction:m})}async rechercherObjets({f:n,clef:a,nRésultatsDésirés:o,fRecherche:l,fQualité:u,fObjectif:d}){const m=async({idCompte:b,fSuivi:_})=>{const w={propres:[],favoris:[]},E=()=>{const k=[...new Set([...w.propres,...w.favoris])];_(k)},A=await l({idCompte:b,f:k=>{w.propres=k||[],E()}}),C=await this.suivreFavorisMembre({idCompte:b,f:k=>{w.favoris=k?Object.keys(k):[],E()}});return async()=>{await A(),await C()}},y=async(b,_)=>await this.suivreConfianceAuteurs({idItem:b,clef:a,f:_});return await this.rechercher({f:n,nRésultatsDésirés:o,fRecherche:m,fConfiance:y,fQualité:u,fObjectif:d})}async rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o}){const l=this.suivreBdsMembre.bind(this),u=async(d,m)=>await this.client.nuées.suivreQualitéNuée({idNuée:d,f:m});return await this.rechercherObjets({f:n,clef:"nuées",nRésultatsDésirés:a,fRecherche:l,fQualité:u,fObjectif:o})}async rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o}){const l=this.suivreBdsMembre.bind(this),u=async(d,m)=>{const y=b=>{m(b.total)};return await this.client.bds.suivreScoreBd({id:d,f:y})};return await this.rechercherObjets({f:n,clef:"bds",nRésultatsDésirés:a,fRecherche:l,fQualité:u,fObjectif:o})}async rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o}){const l=this.suivreVariablesMembre.bind(this),u=async(d,m)=>await this.client.variables.suivreQualitéVariable({id:d,f:m});return await this.rechercherObjets({f:n,clef:"variables",nRésultatsDésirés:a,fRecherche:l,fQualité:u,fObjectif:o})}async rechercherMotsClefs({f:n,nRésultatsDésirés:a,fObjectif:o}){const l=this.suivreMotsClefsMembre.bind(this),u=async(d,m)=>await this.client.motsClefs.suivreQualitéMotClef({id:d,f:m});return await this.rechercherObjets({f:n,clef:"motsClefs",nRésultatsDésirés:a,fRecherche:l,fQualité:u,fObjectif:o})}async rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o}){const l=this.suivreProjetsMembre.bind(this),u=async(d,m)=>await this.client.projets.suivreQualitéProjet({idProjet:d,f:m});return await this.rechercherObjets({f:n,clef:"projets",nRésultatsDésirés:a,fRecherche:l,fQualité:u,fObjectif:o})}async suivreAuteursObjet({idObjet:n,clef:a,f:o}){const l=async b=>await this.client.suivreAccèsBd({id:n,f:b}),u=async(b,_,w)=>{const E=A=>(A=A||[],_([{idBdCompte:w.idBdCompte,rôle:w.rôle,accepté:A.includes(n)}]));return await this.client.suivreBdListeDeClef({id:b,clef:a,f:E})},d=b=>b.idBdCompte,m=b=>b.idBdCompte;return this.client.suivreBdsDeFonctionListe({fListe:l,f:o,fBranche:u,fIdBdDeBranche:d,fCode:m})}async suivreAuteursMotClef({idMotClef:n,f:a}){return await this.suivreAuteursObjet({idObjet:n,clef:"motsClefs",f:a})}async suivreAuteursVariable({idVariable:n,f:a}){return await this.suivreAuteursObjet({idObjet:n,clef:"variables",f:a})}async suivreAuteursBd({idBd:n,f:a}){return await this.suivreAuteursObjet({idObjet:n,clef:"bds",f:a})}async suivreAuteursProjet({idProjet:n,f:a}){return await this.suivreAuteursObjet({idObjet:n,clef:"projets",f:a})}async suivreObjetsMembre({idCompte:n,clef:a,fListeObjets:o,fSuivi:l}){const u=async d=>await this.client.suivreBdDeClef({id:n,clef:a,f:m=>d(m||[]),fSuivre:o});return await this.client.suivreBdsSelonCondition({fListe:u,fCondition:async(d,m)=>await this.client.suivreAccèsBd({id:d,f:y=>m(y.map(b=>b.idBdCompte).includes(n))}),f:l})}async suivreBdsMembre({idCompte:n,f:a}){return await this.suivreObjetsMembre({idCompte:n,clef:"bds",fListeObjets:async({id:o,fSuivreBd:l})=>await this.client.bds.suivreBds({f:l,idBdBdsCompte:o}),fSuivi:a})}async suivreProjetsMembre({idCompte:n,f:a}){return await this.suivreObjetsMembre({idCompte:n,clef:"projets",fListeObjets:async({id:o,fSuivreBd:l})=>await this.client.projets.suivreProjets({f:l,idBdProjets:o}),fSuivi:a})}async suivreFavorisMembre({idCompte:n,f:a}){const o=async({id:l,fSuivreBd:u})=>await this.client.favoris.suivreFavoris({f:u,idBdFavoris:l});return await this.client.suivreBdDeClef({id:n,clef:"favoris",f:a,fSuivre:o})}async suivreVariablesMembre({idCompte:n,f:a}){return await this.suivreObjetsMembre({idCompte:n,clef:"variables",fListeObjets:async({id:o,fSuivreBd:l})=>await this.client.variables.suivreVariables({f:l,idBdVariables:o}),fSuivi:a})}async suivreMotsClefsMembre({idCompte:n,f:a}){return await this.suivreObjetsMembre({idCompte:n,clef:"motsClefs",fListeObjets:async({id:o,fSuivreBd:l})=>await this.client.motsClefs.suivreMotsClefs({f:l,idBdMotsClefs:o}),fSuivi:a})}async suivreFavorisObjet({idObjet:n,f:a,profondeur:o}){const l=m=>{const y=m.filter(b=>b.idObjet===n);a(y)},u=async m=>{const y=async b=>await m([this.client.idBdCompte,...b.map(_=>_.idBdCompte)]);return await this.suivreComptesRéseauEtEnLigne({f:y,profondeur:o,idCompteDébut:this.client.idBdCompte})},d=async(m,y)=>await this.suivreFavorisMembre({idCompte:m,f:b=>y(b?b.map(_=>({idBdCompte:m,..._})):void 0)});return await this.client.suivreBdsDeFonctionRecherche({fListe:u,f:l,fBranche:d})}async suivreRéplications({idObjet:n,f:a,profondeur:o}){const l={connexionsMembres:[],connexionsDispositifs:[],favoris:[]},u=async()=>{const{connexionsMembres:B,favoris:D}=l,q=D.map(L=>L.favoris.idBdCompte),j=B.filter(L=>q.includes(L.infoMembre.idBdCompte)),J=(await Promise.all(D.map(async L=>{const{favoris:Z,dispositifs:Q}=L;return await Promise.all(Q.map(async oe=>{const ae=l.connexionsDispositifs.find(I=>I.infoDispositif.idOrbite===oe)?.vuÀ;return{idObjet:n,idDispositif:oe,bd:await this.client.favoris.estÉpingléSurDispositif({dispositifs:Z.dispositifs,idOrbite:oe}),fichiers:await this.client.favoris.estÉpingléSurDispositif({dispositifs:Z.dispositifsFichiers,idOrbite:oe}),récursif:Z.récursif,vuÀ:ae}}))}))).flat();a({membres:j,dispositifs:J})},d=await this.suivreConnexionsMembres({f:B=>{l.connexionsMembres=B,u()}}),m=await this.suivreConnexionsDispositifs({f:B=>{l.connexionsDispositifs=B,u()}}),y=B=>{l.favoris=B,u()},b=async B=>await this.suivreFavorisObjet({idObjet:n,f:B,profondeur:o}),_=async(B,D,q)=>{const j=Y=>{D({favoris:q,dispositifs:Y})},J=await this.client.suivreDispositifs({f:j,idBdCompte:B});return async()=>{await J()}},w=B=>B.idBdCompte,E=B=>B.idBdCompte,{fOublier:A,fChangerProfondeur:C}=await this.client.suivreBdsDeFonctionRecherche({fListe:b,f:y,fBranche:_,fIdBdDeBranche:w,fCode:E});return{fOublier:async()=>{await A(),await d(),await m()},fChangerProfondeur:C}}async suivreBdsDeNuée({idNuée:n,f:a,nRésultatsDésirés:o}){const l=async(d,m)=>await this.client.suivreBdDeClef({id:d,clef:"bds",f:y=>{m(y||[])},fSuivre:async({id:y})=>await this.client.bds.rechercherBdsParNuée({idNuée:n,f:m,idBdBdsCompte:y})}),u=async d=>await this.suivreComptesRéseauEtEnLigne({f:m=>d(m.map(y=>y.idBdCompte)),profondeur:o});return await this.client.suivreBdsDeFonctionRecherche({fListe:u,f:a,fBranche:l})}async suivreÉlémentsDeTableauxUniques({idNuéeUnique:n,clef:a,f:o,nBds:l=100}){const u=async b=>{const _=async E=>await this.suivreBdsDeNuée({idNuée:n,f:E,nRésultatsDésirés:l}),w=async(E,A)=>await this.suivreAuteursBd({idBd:E,f:C=>{const k=C.find(D=>D.accepté)?.idBdCompte;A(k?{bd:E,idBdCompte:k}:void 0)}});return await this.client.suivreBdsDeFonctionRecherche({fListe:_,f:b,fBranche:w})},d=async(b,_,w)=>{const{idBdCompte:E}=w,A=async({fSuivreRacine:B})=>await this.client.bds.suivreIdTableauParClef({idBd:b,clef:a,f:D=>{D&&B(D)}}),C=async({id:B,fSuivreBd:D})=>{const q=j=>{const J=j.map(Y=>({idBdCompte:E,élément:Y}));D(J)};return await this.client.tableaux.suivreDonnées({idTableau:B,f:q})},k=B=>{_(B||[])};return await this.client.suivreBdDeFonction({fRacine:A,f:k,fSuivre:C})},m=b=>b.bd,y=b=>b.bd;return await this.client.suivreBdsDeFonctionRecherche({fListe:u,f:o,fBranche:d,fIdBdDeBranche:m,fCode:y})}async fermer(){this._fermé=!0,await Promise.all(this.fsOublier.map(n=>n()))}}__decorate([cacheSuivi],Réseau.prototype,"suivreFiables",null);__decorate([cacheSuivi],Réseau.prototype,"suivreBloquésPubliques",null);__decorate([cacheSuivi],Réseau.prototype,"suivreBloqués",null);__decorate([cacheSuivi],Réseau.prototype,"suivreRelationsImmédiates",null);__decorate([cacheRechercheParProfondeur],Réseau.prototype,"suivreRelationsConfiance",null);__decorate([cacheRechercheParProfondeur],Réseau.prototype,"suivreComptesRéseau",null);__decorate([cacheSuivi],Réseau.prototype,"suivreConnexionsPostesSFIP",null);__decorate([cacheSuivi],Réseau.prototype,"suivreConnexionsDispositifs",null);__decorate([cacheSuivi],Réseau.prototype,"suivreConnexionsMembres",null);__decorate([cacheSuivi],Réseau.prototype,"suivreNomsMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreCourrielMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreImageMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreAuteursObjet",null);__decorate([cacheSuivi],Réseau.prototype,"suivreBdsMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreProjetsMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreFavorisMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreVariablesMembre",null);__decorate([cacheSuivi],Réseau.prototype,"suivreMotsClefsMembre",null);__decorate([cacheRechercheParNRésultats],Réseau.prototype,"suivreBdsDeNuée",null);var base64$3={},__extends=commonjsGlobal&&commonjsGlobal.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,o){a.__proto__=o}||function(a,o){for(var l in o)o.hasOwnProperty(l)&&(a[l]=o[l])},t(e,n)};return function(e,n){t(e,n);function a(){this.constructor=e}e.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}();Object.defineProperty(base64$3,"__esModule",{value:!0});var INVALID_BYTE=256,Coder=function(){function t(e){e===void 0&&(e="="),this._paddingCharacter=e}return t.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(e*8+5)/6|0},t.prototype.encode=function(e){for(var n="",a=0;a<e.length-2;a+=3){var o=e[a]<<16|e[a+1]<<8|e[a+2];n+=this._encodeByte(o>>>3*6&63),n+=this._encodeByte(o>>>2*6&63),n+=this._encodeByte(o>>>1*6&63),n+=this._encodeByte(o>>>0*6&63)}var l=e.length-a;if(l>0){var o=e[a]<<16|(l===2?e[a+1]<<8:0);n+=this._encodeByte(o>>>3*6&63),n+=this._encodeByte(o>>>2*6&63),l===2?n+=this._encodeByte(o>>>1*6&63):n+=this._paddingCharacter||"",n+=this._paddingCharacter||""}return n},t.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(e*6+7)/8|0},t.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},t.prototype.decode=function(e){if(e.length===0)return new Uint8Array(0);for(var n=this._getPaddingLength(e),a=e.length-n,o=new Uint8Array(this.maxDecodedLength(a)),l=0,u=0,d=0,m=0,y=0,b=0,_=0;u<a-4;u+=4)m=this._decodeChar(e.charCodeAt(u+0)),y=this._decodeChar(e.charCodeAt(u+1)),b=this._decodeChar(e.charCodeAt(u+2)),_=this._decodeChar(e.charCodeAt(u+3)),o[l++]=m<<2|y>>>4,o[l++]=y<<4|b>>>2,o[l++]=b<<6|_,d|=m&INVALID_BYTE,d|=y&INVALID_BYTE,d|=b&INVALID_BYTE,d|=_&INVALID_BYTE;if(u<a-1&&(m=this._decodeChar(e.charCodeAt(u)),y=this._decodeChar(e.charCodeAt(u+1)),o[l++]=m<<2|y>>>4,d|=m&INVALID_BYTE,d|=y&INVALID_BYTE),u<a-2&&(b=this._decodeChar(e.charCodeAt(u+2)),o[l++]=y<<4|b>>>2,d|=b&INVALID_BYTE),u<a-3&&(_=this._decodeChar(e.charCodeAt(u+3)),o[l++]=b<<6|_,d|=_&INVALID_BYTE),d!==0)throw new Error("Base64Coder: incorrect characters for decoding");return o},t.prototype._encodeByte=function(e){var n=e;return n+=65,n+=25-e>>>8&0-65-26+97,n+=51-e>>>8&26-97-52+48,n+=61-e>>>8&52-48-62+43,n+=62-e>>>8&62-43-63+47,String.fromCharCode(n)},t.prototype._decodeChar=function(e){var n=INVALID_BYTE;return n+=(42-e&e-44)>>>8&-INVALID_BYTE+e-43+62,n+=(46-e&e-48)>>>8&-INVALID_BYTE+e-47+63,n+=(47-e&e-58)>>>8&-INVALID_BYTE+e-48+52,n+=(64-e&e-91)>>>8&-INVALID_BYTE+e-65+0,n+=(96-e&e-123)>>>8&-INVALID_BYTE+e-97+26,n},t.prototype._getPaddingLength=function(e){var n=0;if(this._paddingCharacter){for(var a=e.length-1;a>=0&&e[a]===this._paddingCharacter;a--)n++;if(e.length<4||n>2)throw new Error("Base64Coder: incorrect padding")}return n},t}();base64$3.Coder=Coder;var stdCoder=new Coder;function encode$9(t){return stdCoder.encode(t)}var encode_1$3=base64$3.encode=encode$9;function decode$a(t){return stdCoder.decode(t)}var decode_1$1=base64$3.decode=decode$a,URLSafeCoder=function(t){__extends(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype._encodeByte=function(n){var a=n;return a+=65,a+=25-n>>>8&0-65-26+97,a+=51-n>>>8&26-97-52+48,a+=61-n>>>8&52-48-62+45,a+=62-n>>>8&62-45-63+95,String.fromCharCode(a)},e.prototype._decodeChar=function(n){var a=INVALID_BYTE;return a+=(44-n&n-46)>>>8&-INVALID_BYTE+n-45+62,a+=(94-n&n-96)>>>8&-INVALID_BYTE+n-95+63,a+=(47-n&n-58)>>>8&-INVALID_BYTE+n-48+52,a+=(64-n&n-91)>>>8&-INVALID_BYTE+n-65+0,a+=(96-n&n-123)>>>8&-INVALID_BYTE+n-97+26,a},e}(Coder);base64$3.URLSafeCoder=URLSafeCoder;var urlSafeCoder=new URLSafeCoder;function encodeURLSafe(t){return urlSafeCoder.encode(t)}base64$3.encodeURLSafe=encodeURLSafe;function decodeURLSafe(t){return urlSafeCoder.decode(t)}base64$3.decodeURLSafe=decodeURLSafe;base64$3.encodedLength=function(t){return stdCoder.encodedLength(t)};base64$3.maxDecodedLength=function(t){return stdCoder.maxDecodedLength(t)};base64$3.decodedLength=function(t){return stdCoder.decodedLength(t)};var utf8$2={};Object.defineProperty(utf8$2,"__esModule",{value:!0});var INVALID_UTF16="utf8: invalid string",INVALID_UTF8="utf8: invalid source encoding";function encode$8(t){for(var e=new Uint8Array(encodedLength(t)),n=0,a=0;a<t.length;a++){var o=t.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=192|o>>6,e[n++]=128|o&63):o<55296?(e[n++]=224|o>>12,e[n++]=128|o>>6&63,e[n++]=128|o&63):(a++,o=(o&1023)<<10,o|=t.charCodeAt(a)&1023,o+=65536,e[n++]=240|o>>18,e[n++]=128|o>>12&63,e[n++]=128|o>>6&63,e[n++]=128|o&63)}return e}var encode_1$2=utf8$2.encode=encode$8;function encodedLength(t){for(var e=0,n=0;n<t.length;n++){var a=t.charCodeAt(n);if(a<128)e+=1;else if(a<2048)e+=2;else if(a<55296)e+=3;else if(a<=57343){if(n>=t.length-1)throw new Error(INVALID_UTF16);n++,e+=4}else throw new Error(INVALID_UTF16)}return e}var encodedLength_1=utf8$2.encodedLength=encodedLength;function decode$9(t){for(var e=[],n=0;n<t.length;n++){var a=t[n];if(a&128){var o=void 0;if(a<224){if(n>=t.length)throw new Error(INVALID_UTF8);var l=t[++n];if((l&192)!==128)throw new Error(INVALID_UTF8);a=(a&31)<<6|l&63,o=128}else if(a<240){if(n>=t.length-1)throw new Error(INVALID_UTF8);var l=t[++n],u=t[++n];if((l&192)!==128||(u&192)!==128)throw new Error(INVALID_UTF8);a=(a&15)<<12|(l&63)<<6|u&63,o=2048}else if(a<248){if(n>=t.length-2)throw new Error(INVALID_UTF8);var l=t[++n],u=t[++n],d=t[++n];if((l&192)!==128||(u&192)!==128||(d&192)!==128)throw new Error(INVALID_UTF8);a=(a&15)<<18|(l&63)<<12|(u&63)<<6|d&63,o=65536}else throw new Error(INVALID_UTF8);if(a<o||a>=55296&&a<=57343)throw new Error(INVALID_UTF8);if(a>=65536){if(a>1114111)throw new Error(INVALID_UTF8);a-=65536,e.push(String.fromCharCode(55296|a>>10)),a=56320|a&1023}}e.push(String.fromCharCode(a))}return e.join("")}var decode_1=utf8$2.decode=decode$9;const utf8$1=_mergeNamespaces({__proto__:null,decode:decode_1,default:utf8$2,encode:encode_1$2,encodedLength:encodedLength_1},[utf8$2]);var browser$3={},encode$7={},encodeBuffer={},writeCore={},extBuffer={},bufferish={},bufferGlobal=c(typeof Buffer$y<"u"&&Buffer$y)||c(commonjsGlobal.Buffer)||c(typeof window<"u"&&window.Buffer)||commonjsGlobal.Buffer;function c(t){return t&&t.isBuffer&&t}var toString$4={}.toString,isarray=Array.isArray||function(t){return toString$4.call(t)=="[object Array]"},bufferishArrayExports={},bufferishArray={get exports(){return bufferishArrayExports},set exports(t){bufferishArrayExports=t}},hasRequiredBufferishArray;function requireBufferishArray(){if(hasRequiredBufferishArray)return bufferishArrayExports;hasRequiredBufferishArray=1;var t=requireBufferish(),e=bufferishArray.exports=n(0);e.alloc=n,e.concat=t.concat,e.from=a;function n(o){return new Array(o)}function a(o){if(!t.isBuffer(o)&&t.isView(o))o=t.Uint8Array.from(o);else if(t.isArrayBuffer(o))o=new Uint8Array(o);else{if(typeof o=="string")return t.from.call(e,o);if(typeof o=="number")throw new TypeError('"value" argument must not be a number')}return Array.prototype.slice.call(o)}return bufferishArrayExports}var bufferishBufferExports={},bufferishBuffer={get exports(){return bufferishBufferExports},set exports(t){bufferishBufferExports=t}},hasRequiredBufferishBuffer;function requireBufferishBuffer(){if(hasRequiredBufferishBuffer)return bufferishBufferExports;hasRequiredBufferishBuffer=1;var t=requireBufferish(),e=t.global,n=bufferishBuffer.exports=t.hasBuffer?a(0):[];n.alloc=t.hasBuffer&&e.alloc||a,n.concat=t.concat,n.from=o;function a(l){return new e(l)}function o(l){if(!t.isBuffer(l)&&t.isView(l))l=t.Uint8Array.from(l);else if(t.isArrayBuffer(l))l=new Uint8Array(l);else{if(typeof l=="string")return t.from.call(n,l);if(typeof l=="number")throw new TypeError('"value" argument must not be a number')}return e.from&&e.from.length!==1?e.from(l):new e(l)}return bufferishBufferExports}var bufferishUint8arrayExports={},bufferishUint8array={get exports(){return bufferishUint8arrayExports},set exports(t){bufferishUint8arrayExports=t}},hasRequiredBufferishUint8array;function requireBufferishUint8array(){if(hasRequiredBufferishUint8array)return bufferishUint8arrayExports;hasRequiredBufferishUint8array=1;var t=requireBufferish(),e=bufferishUint8array.exports=t.hasArrayBuffer?n(0):[];e.alloc=n,e.concat=t.concat,e.from=a;function n(o){return new Uint8Array(o)}function a(o){if(t.isView(o)){var l=o.byteOffset,u=o.byteLength;o=o.buffer,o.byteLength!==u&&(o.slice?o=o.slice(l,l+u):(o=new Uint8Array(o),o.byteLength!==u&&(o=Array.prototype.slice.call(o,l,l+u))))}else{if(typeof o=="string")return t.from.call(e,o);if(typeof o=="number")throw new TypeError('"value" argument must not be a number')}return new Uint8Array(o)}return bufferishUint8arrayExports}var bufferishProto={},bufferLite={};bufferLite.copy=copy;bufferLite.toString=toString$3;bufferLite.write=write$1;function write$1(t,e){for(var n=this,a=e||(e|=0),o=t.length,l=0,u=0;u<o;)l=t.charCodeAt(u++),l<128?n[a++]=l:l<2048?(n[a++]=192|l>>>6,n[a++]=128|l&63):l<55296||l>57343?(n[a++]=224|l>>>12,n[a++]=128|l>>>6&63,n[a++]=128|l&63):(l=(l-55296<<10|t.charCodeAt(u++)-56320)+65536,n[a++]=240|l>>>18,n[a++]=128|l>>>12&63,n[a++]=128|l>>>6&63,n[a++]=128|l&63);return a-e}function toString$3(t,e,n){var a=this,o=e|0;n||(n=a.length);for(var l="",u=0;o<n;){if(u=a[o++],u<128){l+=String.fromCharCode(u);continue}(u&224)===192?u=(u&31)<<6|a[o++]&63:(u&240)===224?u=(u&15)<<12|(a[o++]&63)<<6|a[o++]&63:(u&248)===240&&(u=(u&7)<<18|(a[o++]&63)<<12|(a[o++]&63)<<6|a[o++]&63),u>=65536?(u-=65536,l+=String.fromCharCode((u>>>10)+55296,(u&1023)+56320)):l+=String.fromCharCode(u)}return l}function copy(t,e,n,a){var o;n||(n=0),!a&&a!==0&&(a=this.length),e||(e=0);var l=a-n;if(t===this&&n<e&&e<a)for(o=l-1;o>=0;o--)t[o+e]=this[o+n];else for(o=0;o<l;o++)t[o+e]=this[o+n];return l}var hasRequiredBufferishProto;function requireBufferishProto(){if(hasRequiredBufferishProto)return bufferishProto;hasRequiredBufferishProto=1;var t=bufferLite;bufferishProto.copy=l,bufferishProto.slice=u,bufferishProto.toString=d,bufferishProto.write=m("write");var e=requireBufferish(),n=e.global,a=e.hasBuffer&&"TYPED_ARRAY_SUPPORT"in n,o=a&&!n.TYPED_ARRAY_SUPPORT;function l(y,b,_,w){var E=e.isBuffer(this),A=e.isBuffer(y);if(E&&A)return this.copy(y,b,_,w);if(!o&&!E&&!A&&e.isView(this)&&e.isView(y)){var C=_||w!=null?u.call(this,_,w):this;return y.set(C,b),C.length}else return t.copy.call(this,y,b,_,w)}function u(y,b){var _=this.slice||!o&&this.subarray;if(_)return _.call(this,y,b);var w=e.alloc.call(this,b-y);return l.call(this,w,0,y,b),w}function d(y,b,_){var w=!a&&e.isBuffer(this)?this.toString:t.toString;return w.apply(this,arguments)}function m(y){return b;function b(){var _=this[y]||t[y];return _.apply(this,arguments)}}return bufferishProto}var hasRequiredBufferish;function requireBufferish(){return hasRequiredBufferish||(hasRequiredBufferish=1,function(t){var e=t.global=bufferGlobal,n=t.hasBuffer=e&&!!e.isBuffer,a=t.hasArrayBuffer=typeof ArrayBuffer<"u",o=t.isArray=isarray;t.isArrayBuffer=a?C:D;var l=t.isBuffer=n?e.isBuffer:D,u=t.isView=a?ArrayBuffer.isView||q("ArrayBuffer","buffer"):D;t.alloc=w,t.concat=E,t.from=_;var d=t.Array=requireBufferishArray(),m=t.Buffer=requireBufferishBuffer(),y=t.Uint8Array=requireBufferishUint8array(),b=t.prototype=requireBufferishProto();function _(j){return typeof j=="string"?k.call(this,j):B(this).from(j)}function w(j){return B(this).alloc(j)}function E(j,J){J||(J=0,Array.prototype.forEach.call(j,Q));var Y=this!==t&&this||j[0],L=w.call(Y,J),Z=0;return Array.prototype.forEach.call(j,oe),L;function Q(ae){J+=ae.length}function oe(ae){Z+=b.copy.call(ae,L,Z)}}var A=q("ArrayBuffer");function C(j){return j instanceof ArrayBuffer||A(j)}function k(j){var J=j.length*3,Y=w.call(this,J),L=b.write.call(Y,j);return J!==L&&(Y=b.slice.call(Y,0,L)),Y}function B(j){return l(j)?m:u(j)?y:o(j)?d:n?m:a?y:d}function D(){return!1}function q(j,J){return j="[object "+j+"]",function(Y){return Y!=null&&{}.toString.call(J?Y[J]:Y)===j}}}(bufferish)),bufferish}extBuffer.ExtBuffer=ExtBuffer$1;var Bufferish$5=requireBufferish();function ExtBuffer$1(t,e){if(!(this instanceof ExtBuffer$1))return new ExtBuffer$1(t,e);this.buffer=Bufferish$5.from(t),this.type=e}var extPacker={},hasRequiredExtPacker;function requireExtPacker(){if(hasRequiredExtPacker)return extPacker;hasRequiredExtPacker=1,extPacker.setExtPackers=l;var t=requireBufferish(),e=t.global,n=t.Uint8Array.from,a,o={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function l(b){b.addExtPacker(14,Error,[y,u]),b.addExtPacker(1,EvalError,[y,u]),b.addExtPacker(2,RangeError,[y,u]),b.addExtPacker(3,ReferenceError,[y,u]),b.addExtPacker(4,SyntaxError,[y,u]),b.addExtPacker(5,TypeError,[y,u]),b.addExtPacker(6,URIError,[y,u]),b.addExtPacker(10,RegExp,[m,u]),b.addExtPacker(11,Boolean,[d,u]),b.addExtPacker(12,String,[d,u]),b.addExtPacker(13,Date,[Number,u]),b.addExtPacker(15,Number,[d,u]),typeof Uint8Array<"u"&&(b.addExtPacker(17,Int8Array,n),b.addExtPacker(18,Uint8Array,n),b.addExtPacker(19,Int16Array,n),b.addExtPacker(20,Uint16Array,n),b.addExtPacker(21,Int32Array,n),b.addExtPacker(22,Uint32Array,n),b.addExtPacker(23,Float32Array,n),typeof Float64Array<"u"&&b.addExtPacker(24,Float64Array,n),typeof Uint8ClampedArray<"u"&&b.addExtPacker(25,Uint8ClampedArray,n),b.addExtPacker(26,ArrayBuffer,n),b.addExtPacker(29,DataView,n)),t.hasBuffer&&b.addExtPacker(27,e,t.from)}function u(b){return a||(a=requireEncode().encode),a(b)}function d(b){return b.valueOf()}function m(b){b=RegExp.prototype.toString.call(b).split("/"),b.shift();var _=[b.pop()];return _.unshift(b.join("/")),_}function y(b){var _={};for(var w in o)_[w]=b[w];return _}return extPacker}var writeType={},int64Buffer={};(function(t){(function(e){var n="undefined",a=n!==typeof Buffer$y&&Buffer$y,o=n!==typeof Uint8Array&&Uint8Array,l=n!==typeof ArrayBuffer&&ArrayBuffer,u=[0,0,0,0,0,0,0,0],d=Array.isArray||Y,m=4294967296,y=16777216,b;_("Uint64BE",!0,!0),_("Int64BE",!0,!1),_("Uint64LE",!1,!0),_("Int64LE",!1,!1);function _(L,Z,Q){var oe=Z?0:4,ae=Z?4:0,U=Z?0:3,I=Z?1:2,x=Z?2:1,T=Z?3:0,M=Z?D:j,O=Z?q:J,z=P.prototype,X="is"+L,H="_"+X;return z.buffer=void 0,z.offset=0,z[H]=!0,z.toNumber=ee,z.toString=fe,z.toJSON=ee,z.toArray=w,a&&(z.toBuffer=E),o&&(z.toArrayBuffer=A),P[X]=S,e[L]=P,P;function P(pe,se,de,re){return this instanceof P?F(this,pe,se,de,re):new P(pe,se,de,re)}function S(pe){return!!(pe&&pe[H])}function F(pe,se,de,re,me){if(o&&l&&(se instanceof l&&(se=new o(se)),re instanceof l&&(re=new o(re))),!se&&!de&&!re&&!b){pe.buffer=B(u,0);return}if(!C(se,de)){var te=b||Array;me=de,re=se,de=0,se=new te(8)}pe.buffer=se,pe.offset=de|=0,n!==typeof re&&(typeof re=="string"?ue(se,de,re,me||10):C(re,me)?k(se,de,re,me):typeof me=="number"?(le(se,de+oe,re),le(se,de+ae,me)):re>0?M(se,de,re):re<0?O(se,de,re):k(se,de,u,0))}function ue(pe,se,de,re){var me=0,te=de.length,ve=0,Se=0;de[0]==="-"&&me++;for(var be=me;me<te;){var _e=parseInt(de[me++],re);if(!(_e>=0))break;Se=Se*re+_e,ve=ve*re+Math.floor(Se/m),Se%=m}be&&(ve=~ve,Se?Se=m-Se:ve++),le(pe,se+oe,ve),le(pe,se+ae,Se)}function ee(){var pe=this.buffer,se=this.offset,de=ce(pe,se+oe),re=ce(pe,se+ae);return Q||(de|=0),de?de*m+re:re}function fe(pe){var se=this.buffer,de=this.offset,re=ce(se,de+oe),me=ce(se,de+ae),te="",ve=!Q&&re&2147483648;for(ve&&(re=~re,me=m-me),pe=pe||10;;){var Se=re%pe*m+me;if(re=Math.floor(re/pe),me=Math.floor(Se/pe),te=(Se%pe).toString(pe)+te,!re&&!me)break}return ve&&(te="-"+te),te}function le(pe,se,de){pe[se+T]=de&255,de=de>>8,pe[se+x]=de&255,de=de>>8,pe[se+I]=de&255,de=de>>8,pe[se+U]=de&255}function ce(pe,se){return pe[se+U]*y+(pe[se+I]<<16)+(pe[se+x]<<8)+pe[se+T]}}function w(L){var Z=this.buffer,Q=this.offset;return b=null,L!==!1&&Q===0&&Z.length===8&&d(Z)?Z:B(Z,Q)}function E(L){var Z=this.buffer,Q=this.offset;if(b=a,L!==!1&&Q===0&&Z.length===8&&Buffer$y.isBuffer(Z))return Z;var oe=new a(8);return k(oe,0,Z,Q),oe}function A(L){var Z=this.buffer,Q=this.offset,oe=Z.buffer;if(b=o,L!==!1&&Q===0&&oe instanceof l&&oe.byteLength===8)return oe;var ae=new o(8);return k(ae,0,Z,Q),ae.buffer}function C(L,Z){var Q=L&&L.length;return Z|=0,Q&&Z+8<=Q&&typeof L[Z]!="string"}function k(L,Z,Q,oe){Z|=0,oe|=0;for(var ae=0;ae<8;ae++)L[Z++]=Q[oe++]&255}function B(L,Z){return Array.prototype.slice.call(L,Z,Z+8)}function D(L,Z,Q){for(var oe=Z+8;oe>Z;)L[--oe]=Q&255,Q/=256}function q(L,Z,Q){var oe=Z+8;for(Q++;oe>Z;)L[--oe]=-Q&255^255,Q/=256}function j(L,Z,Q){for(var oe=Z+8;Z<oe;)L[Z++]=Q&255,Q/=256}function J(L,Z,Q){var oe=Z+8;for(Q++;Z<oe;)L[Z++]=-Q&255^255,Q/=256}function Y(L){return!!L&&Object.prototype.toString.call(L)=="[object Array]"}})(typeof t.nodeName!="string"?t:commonjsGlobal||{})})(int64Buffer);var writeToken={},writeUint8={},constant$1=writeUint8.uint8=new Array(256);for(var i=0;i<=255;i++)constant$1[i]=write0(i);function write0(t){return function(e){var n=e.reserve(1);e.buffer[n]=t}}var ieee754$1=ieee754$2,Int64Buffer$2=int64Buffer,Uint64BE$2=Int64Buffer$2.Uint64BE,Int64BE$2=Int64Buffer$2.Int64BE,uint8$2=writeUint8.uint8,Bufferish$4=requireBufferish(),Buffer$1=Bufferish$4.global,IS_BUFFER_SHIM=Bufferish$4.hasBuffer&&"TYPED_ARRAY_SUPPORT"in Buffer$1,NO_TYPED_ARRAY=IS_BUFFER_SHIM&&!Buffer$1.TYPED_ARRAY_SUPPORT,Buffer_prototype=Bufferish$4.hasBuffer&&Buffer$1.prototype||{};writeToken.getWriteToken=getWriteToken;function getWriteToken(t){return t&&t.uint8array?init_uint8array():NO_TYPED_ARRAY||Bufferish$4.hasBuffer&&t&&t.safe?init_safe():init_token$1()}function init_uint8array(){var t=init_token$1();return t[202]=writeN(202,4,writeFloatBE),t[203]=writeN(203,8,writeDoubleBE),t}function init_token$1(){var t=uint8$2.slice();return t[196]=write1(196),t[197]=write2(197),t[198]=write4(198),t[199]=write1(199),t[200]=write2(200),t[201]=write4(201),t[202]=writeN(202,4,Buffer_prototype.writeFloatBE||writeFloatBE,!0),t[203]=writeN(203,8,Buffer_prototype.writeDoubleBE||writeDoubleBE,!0),t[204]=write1(204),t[205]=write2(205),t[206]=write4(206),t[207]=writeN(207,8,writeUInt64BE),t[208]=write1(208),t[209]=write2(209),t[210]=write4(210),t[211]=writeN(211,8,writeInt64BE),t[217]=write1(217),t[218]=write2(218),t[219]=write4(219),t[220]=write2(220),t[221]=write4(221),t[222]=write2(222),t[223]=write4(223),t}function init_safe(){var t=uint8$2.slice();return t[196]=writeN(196,1,Buffer$1.prototype.writeUInt8),t[197]=writeN(197,2,Buffer$1.prototype.writeUInt16BE),t[198]=writeN(198,4,Buffer$1.prototype.writeUInt32BE),t[199]=writeN(199,1,Buffer$1.prototype.writeUInt8),t[200]=writeN(200,2,Buffer$1.prototype.writeUInt16BE),t[201]=writeN(201,4,Buffer$1.prototype.writeUInt32BE),t[202]=writeN(202,4,Buffer$1.prototype.writeFloatBE),t[203]=writeN(203,8,Buffer$1.prototype.writeDoubleBE),t[204]=writeN(204,1,Buffer$1.prototype.writeUInt8),t[205]=writeN(205,2,Buffer$1.prototype.writeUInt16BE),t[206]=writeN(206,4,Buffer$1.prototype.writeUInt32BE),t[207]=writeN(207,8,writeUInt64BE),t[208]=writeN(208,1,Buffer$1.prototype.writeInt8),t[209]=writeN(209,2,Buffer$1.prototype.writeInt16BE),t[210]=writeN(210,4,Buffer$1.prototype.writeInt32BE),t[211]=writeN(211,8,writeInt64BE),t[217]=writeN(217,1,Buffer$1.prototype.writeUInt8),t[218]=writeN(218,2,Buffer$1.prototype.writeUInt16BE),t[219]=writeN(219,4,Buffer$1.prototype.writeUInt32BE),t[220]=writeN(220,2,Buffer$1.prototype.writeUInt16BE),t[221]=writeN(221,4,Buffer$1.prototype.writeUInt32BE),t[222]=writeN(222,2,Buffer$1.prototype.writeUInt16BE),t[223]=writeN(223,4,Buffer$1.prototype.writeUInt32BE),t}function write1(t){return function(e,n){var a=e.reserve(2),o=e.buffer;o[a++]=t,o[a]=n}}function write2(t){return function(e,n){var a=e.reserve(3),o=e.buffer;o[a++]=t,o[a++]=n>>>8,o[a]=n}}function write4(t){return function(e,n){var a=e.reserve(5),o=e.buffer;o[a++]=t,o[a++]=n>>>24,o[a++]=n>>>16,o[a++]=n>>>8,o[a]=n}}function writeN(t,e,n,a){return function(o,l){var u=o.reserve(e+1);o.buffer[u++]=t,n.call(o.buffer,l,u,a)}}function writeUInt64BE(t,e){new Uint64BE$2(this,e,t)}function writeInt64BE(t,e){new Int64BE$2(this,e,t)}function writeFloatBE(t,e){ieee754$1.write(this,t,e,!1,23,4)}function writeDoubleBE(t,e){ieee754$1.write(this,t,e,!1,52,8)}var IS_ARRAY$1=isarray,Int64Buffer$1=int64Buffer,Uint64BE$1=Int64Buffer$1.Uint64BE,Int64BE$1=Int64Buffer$1.Int64BE,Bufferish$3=requireBufferish(),BufferProto$1=requireBufferishProto(),WriteToken=writeToken,uint8$1=writeUint8.uint8,ExtBuffer=extBuffer.ExtBuffer,HAS_UINT8ARRAY=typeof Uint8Array<"u",HAS_MAP$1=typeof Map<"u",extmap=[];extmap[1]=212;extmap[2]=213;extmap[4]=214;extmap[8]=215;extmap[16]=216;writeType.getWriteType=getWriteType;function getWriteType(t){var e=WriteToken.getWriteToken(t),n=t&&t.useraw,a=HAS_UINT8ARRAY&&t&&t.binarraybuffer,o=a?Bufferish$3.isArrayBuffer:Bufferish$3.isBuffer,l=a?J:j,u=HAS_MAP$1&&t&&t.usemap,d=u?Z:L,m={boolean:y,function:D,number:b,object:n?B:k,string:C(n?A:E),symbol:D,undefined:D};return m;function y(oe,ae){var U=ae?195:194;e[U](oe,ae)}function b(oe,ae){var U=ae|0,I;if(ae!==U){I=203,e[I](oe,ae);return}else-32<=U&&U<=127?I=U&255:0<=U?I=U<=255?204:U<=65535?205:206:I=-128<=U?208:-32768<=U?209:210;e[I](oe,U)}function _(oe,ae){var U=207;e[U](oe,ae.toArray())}function w(oe,ae){var U=211;e[U](oe,ae.toArray())}function E(oe){return oe<32?1:oe<=255?2:oe<=65535?3:5}function A(oe){return oe<32?1:oe<=65535?3:5}function C(oe){return ae;function ae(U,I){var x=I.length,T=5+x*3;U.offset=U.reserve(T);var M=U.buffer,O=oe(x),z=U.offset+O;x=BufferProto$1.write.call(M,I,z);var X=oe(x);if(O!==X){var H=z+X-O,P=z+x;BufferProto$1.copy.call(M,M,H,z,P)}var S=X===1?160+x:X<=3?215+X:219;e[S](U,x),U.offset+=x}}function k(oe,ae){if(ae===null)return D(oe,ae);if(o(ae))return l(oe,ae);if(IS_ARRAY$1(ae))return q(oe,ae);if(Uint64BE$1.isUint64BE(ae))return _(oe,ae);if(Int64BE$1.isInt64BE(ae))return w(oe,ae);var U=oe.codec.getExtPacker(ae);if(U&&(ae=U(ae)),ae instanceof ExtBuffer)return Y(oe,ae);d(oe,ae)}function B(oe,ae){if(o(ae))return Q(oe,ae);k(oe,ae)}function D(oe,ae){var U=192;e[U](oe,ae)}function q(oe,ae){var U=ae.length,I=U<16?144+U:U<=65535?220:221;e[I](oe,U);for(var x=oe.codec.encode,T=0;T<U;T++)x(oe,ae[T])}function j(oe,ae){var U=ae.length,I=U<255?196:U<=65535?197:198;e[I](oe,U),oe.send(ae)}function J(oe,ae){j(oe,new Uint8Array(ae))}function Y(oe,ae){var U=ae.buffer,I=U.length,x=extmap[I]||(I<255?199:I<=65535?200:201);e[x](oe,I),uint8$1[ae.type](oe),oe.send(U)}function L(oe,ae){var U=Object.keys(ae),I=U.length,x=I<16?128+I:I<=65535?222:223;e[x](oe,I);var T=oe.codec.encode;U.forEach(function(M){T(oe,M),T(oe,ae[M])})}function Z(oe,ae){if(!(ae instanceof Map))return L(oe,ae);var U=ae.size,I=U<16?128+U:U<=65535?222:223;e[I](oe,U);var x=oe.codec.encode;ae.forEach(function(T,M,O){x(oe,M),x(oe,T)})}function Q(oe,ae){var U=ae.length,I=U<32?160+U:U<=65535?218:219;e[I](oe,U),oe.send(ae)}}var codecBase={},IS_ARRAY=isarray;codecBase.createCodec=createCodec;codecBase.install=install;codecBase.filter=filter;var Bufferish$2=requireBufferish();function Codec$2(t){if(!(this instanceof Codec$2))return new Codec$2(t);this.options=t,this.init()}Codec$2.prototype.init=function(){var t=this.options;return t&&t.uint8array&&(this.bufferish=Bufferish$2.Uint8Array),this};function install(t){for(var e in t)Codec$2.prototype[e]=add(Codec$2.prototype[e],t[e])}function add(t,e){return t&&e?n:t||e;function n(){return t.apply(this,arguments),e.apply(this,arguments)}}function join(t){return t=t.slice(),function(n){return t.reduce(e,n)};function e(n,a){return a(n)}}function filter(t){return IS_ARRAY(t)?join(t):t}function createCodec(t){return new Codec$2(t)}codecBase.preset=createCodec({preset:!0});var hasRequiredWriteCore;function requireWriteCore(){if(hasRequiredWriteCore)return writeCore;hasRequiredWriteCore=1;var t=extBuffer.ExtBuffer,e=requireExtPacker(),n=writeType,a=codecBase;a.install({addExtPacker:u,getExtPacker:d,init:l}),writeCore.preset=l.call(a.preset);function o(m){var y=n.getWriteType(m);return b;function b(_,w){var E=y[typeof w];if(!E)throw new Error('Unsupported type "'+typeof w+'": '+w);E(_,w)}}function l(){var m=this.options;return this.encode=o(m),m&&m.preset&&e.setExtPackers(this),this}function u(m,y,b){b=a.filter(b);var _=y.name;if(_&&_!=="Object"){var w=this.extPackers||(this.extPackers={});w[_]=A}else{var E=this.extEncoderList||(this.extEncoderList=[]);E.unshift([y,A])}function A(C){return b&&(C=b(C)),new t(C,m)}}function d(m){var y=this.extPackers||(this.extPackers={}),b=m.constructor,_=b&&b.name&&y[b.name];if(_)return _;for(var w=this.extEncoderList||(this.extEncoderList=[]),E=w.length,A=0;A<E;A++){var C=w[A];if(b===C[0])return C[1]}}return writeCore}var flexBuffer={};flexBuffer.FlexDecoder=FlexDecoder;flexBuffer.FlexEncoder=FlexEncoder;var Bufferish$1=requireBufferish(),MIN_BUFFER_SIZE=2048,MAX_BUFFER_SIZE=65536,BUFFER_SHORTAGE="BUFFER_SHORTAGE";function FlexDecoder(){if(!(this instanceof FlexDecoder))return new FlexDecoder}function FlexEncoder(){if(!(this instanceof FlexEncoder))return new FlexEncoder}FlexDecoder.mixin=mixinFactory(getDecoderMethods());FlexDecoder.mixin(FlexDecoder.prototype);FlexEncoder.mixin=mixinFactory(getEncoderMethods());FlexEncoder.mixin(FlexEncoder.prototype);function getDecoderMethods(){return{bufferish:Bufferish$1,write:t,fetch:fetch$3,flush:e,push,pull,read:read$3,reserve:n,offset:0};function t(a){var o=this.offset?Bufferish$1.prototype.slice.call(this.buffer,this.offset):this.buffer;this.buffer=o?a?this.bufferish.concat([o,a]):o:a,this.offset=0}function e(){for(;this.offset<this.buffer.length;){var a=this.offset,o;try{o=this.fetch()}catch(l){if(l&&l.message!=BUFFER_SHORTAGE)throw l;this.offset=a;break}this.push(o)}}function n(a){var o=this.offset,l=o+a;if(l>this.buffer.length)throw new Error(BUFFER_SHORTAGE);return this.offset=l,o}}function getEncoderMethods(){return{bufferish:Bufferish$1,write,fetch:t,flush:e,push,pull:n,read:read$3,reserve:a,send:o,maxBufferSize:MAX_BUFFER_SIZE,minBufferSize:MIN_BUFFER_SIZE,offset:0,start:0};function t(){var l=this.start;if(l<this.offset){var u=this.start=this.offset;return Bufferish$1.prototype.slice.call(this.buffer,l,u)}}function e(){for(;this.start<this.offset;){var l=this.fetch();l&&this.push(l)}}function n(){var l=this.buffers||(this.buffers=[]),u=l.length>1?this.bufferish.concat(l):l[0];return l.length=0,u}function a(l){var u=l|0;if(this.buffer){var d=this.buffer.length,m=this.offset|0,y=m+u;if(y<d)return this.offset=y,m;this.flush(),l=Math.max(l,Math.min(d*2,this.maxBufferSize))}return l=Math.max(l,this.minBufferSize),this.buffer=this.bufferish.alloc(l),this.start=0,this.offset=u,0}function o(l){var u=l.length;if(u>this.minBufferSize)this.flush(),this.push(l);else{var d=this.reserve(u);Bufferish$1.prototype.copy.call(l,this.buffer,d)}}}function write(){throw new Error("method not implemented: write()")}function fetch$3(){throw new Error("method not implemented: fetch()")}function read$3(){var t=this.buffers&&this.buffers.length;return t?(this.flush(),this.pull()):this.fetch()}function push(t){var e=this.buffers||(this.buffers=[]);e.push(t)}function pull(){var t=this.buffers||(this.buffers=[]);return t.shift()}function mixinFactory(t){return e;function e(n){for(var a in t)n[a]=t[a];return n}}var hasRequiredEncodeBuffer;function requireEncodeBuffer(){if(hasRequiredEncodeBuffer)return encodeBuffer;hasRequiredEncodeBuffer=1,encodeBuffer.EncodeBuffer=n;var t=requireWriteCore().preset,e=flexBuffer.FlexEncoder;e.mixin(n.prototype);function n(a){if(!(this instanceof n))return new n(a);if(a&&(this.options=a,a.codec)){var o=this.codec=a.codec;o.bufferish&&(this.bufferish=o.bufferish)}}return n.prototype.codec=t,n.prototype.write=function(a){this.codec.encode(this,a)},encodeBuffer}var hasRequiredEncode;function requireEncode(){if(hasRequiredEncode)return encode$7;hasRequiredEncode=1,encode$7.encode=e;var t=requireEncodeBuffer().EncodeBuffer;function e(n,a){var o=new t(a);return o.write(n),o.read()}return encode$7}var decode$8={},decodeBuffer={},readCore={},extUnpacker={},hasRequiredExtUnpacker;function requireExtUnpacker(){if(hasRequiredExtUnpacker)return extUnpacker;hasRequiredExtUnpacker=1,extUnpacker.setExtUnpackers=o;var t=requireBufferish(),e=t.global,n,a={name:1,message:1,stack:1,columnNumber:1,fileName:1,lineNumber:1};function o(b){b.addExtUnpacker(14,[l,d(Error)]),b.addExtUnpacker(1,[l,d(EvalError)]),b.addExtUnpacker(2,[l,d(RangeError)]),b.addExtUnpacker(3,[l,d(ReferenceError)]),b.addExtUnpacker(4,[l,d(SyntaxError)]),b.addExtUnpacker(5,[l,d(TypeError)]),b.addExtUnpacker(6,[l,d(URIError)]),b.addExtUnpacker(10,[l,u]),b.addExtUnpacker(11,[l,m(Boolean)]),b.addExtUnpacker(12,[l,m(String)]),b.addExtUnpacker(13,[l,m(Date)]),b.addExtUnpacker(15,[l,m(Number)]),typeof Uint8Array<"u"&&(b.addExtUnpacker(17,m(Int8Array)),b.addExtUnpacker(18,m(Uint8Array)),b.addExtUnpacker(19,[y,m(Int16Array)]),b.addExtUnpacker(20,[y,m(Uint16Array)]),b.addExtUnpacker(21,[y,m(Int32Array)]),b.addExtUnpacker(22,[y,m(Uint32Array)]),b.addExtUnpacker(23,[y,m(Float32Array)]),typeof Float64Array<"u"&&b.addExtUnpacker(24,[y,m(Float64Array)]),typeof Uint8ClampedArray<"u"&&b.addExtUnpacker(25,m(Uint8ClampedArray)),b.addExtUnpacker(26,y),b.addExtUnpacker(29,[y,m(DataView)])),t.hasBuffer&&b.addExtUnpacker(27,m(e))}function l(b){return n||(n=requireDecode().decode),n(b)}function u(b){return RegExp.apply(null,b)}function d(b){return function(_){var w=new b;for(var E in a)w[E]=_[E];return w}}function m(b){return function(_){return new b(_)}}function y(b){return new Uint8Array(b).buffer}return extUnpacker}var readFormat={},ieee754=ieee754$2,Int64Buffer=int64Buffer,Uint64BE=Int64Buffer.Uint64BE,Int64BE=Int64Buffer.Int64BE;readFormat.getReadFormat=getReadFormat;readFormat.readUint8=uint8;var Bufferish=requireBufferish(),BufferProto=requireBufferishProto(),HAS_MAP=typeof Map<"u",NO_ASSERT=!0;function getReadFormat(t){var e=Bufferish.hasArrayBuffer&&t&&t.binarraybuffer,n=t&&t.int64,a=HAS_MAP&&t&&t.usemap,o={map:a?map_to_map:map_to_obj,array,str,bin:e?bin_arraybuffer:bin_buffer,ext:ext$1,uint8,uint16,uint32,uint64:read$2(8,n?readUInt64BE_int64:readUInt64BE),int8,int16,int32,int64:read$2(8,n?readInt64BE_int64:readInt64BE),float32:read$2(4,readFloatBE),float64:read$2(8,readDoubleBE)};return o}function map_to_obj(t,e){var n={},a,o=new Array(e),l=new Array(e),u=t.codec.decode;for(a=0;a<e;a++)o[a]=u(t),l[a]=u(t);for(a=0;a<e;a++)n[o[a]]=l[a];return n}function map_to_map(t,e){var n=new Map,a,o=new Array(e),l=new Array(e),u=t.codec.decode;for(a=0;a<e;a++)o[a]=u(t),l[a]=u(t);for(a=0;a<e;a++)n.set(o[a],l[a]);return n}function array(t,e){for(var n=new Array(e),a=t.codec.decode,o=0;o<e;o++)n[o]=a(t);return n}function str(t,e){var n=t.reserve(e),a=n+e;return BufferProto.toString.call(t.buffer,"utf-8",n,a)}function bin_buffer(t,e){var n=t.reserve(e),a=n+e,o=BufferProto.slice.call(t.buffer,n,a);return Bufferish.from(o)}function bin_arraybuffer(t,e){var n=t.reserve(e),a=n+e,o=BufferProto.slice.call(t.buffer,n,a);return Bufferish.Uint8Array.from(o).buffer}function ext$1(t,e){var n=t.reserve(e+1),a=t.buffer[n++],o=n+e,l=t.codec.getExtUnpacker(a);if(!l)throw new Error("Invalid ext type: "+(a&&"0x"+a.toString(16)));var u=BufferProto.slice.call(t.buffer,n,o);return l(u)}function uint8(t){var e=t.reserve(1);return t.buffer[e]}function int8(t){var e=t.reserve(1),n=t.buffer[e];return n&128?n-256:n}function uint16(t){var e=t.reserve(2),n=t.buffer;return n[e++]<<8|n[e]}function int16(t){var e=t.reserve(2),n=t.buffer,a=n[e++]<<8|n[e];return a&32768?a-65536:a}function uint32(t){var e=t.reserve(4),n=t.buffer;return n[e++]*16777216+(n[e++]<<16)+(n[e++]<<8)+n[e]}function int32(t){var e=t.reserve(4),n=t.buffer;return n[e++]<<24|n[e++]<<16|n[e++]<<8|n[e]}function read$2(t,e){return function(n){var a=n.reserve(t);return e.call(n.buffer,a,NO_ASSERT)}}function readUInt64BE(t){return new Uint64BE(this,t).toNumber()}function readInt64BE(t){return new Int64BE(this,t).toNumber()}function readUInt64BE_int64(t){return new Uint64BE(this,t)}function readInt64BE_int64(t){return new Int64BE(this,t)}function readFloatBE(t){return ieee754.read(this,t,!1,23,4)}function readDoubleBE(t){return ieee754.read(this,t,!1,52,8)}var readToken={},ReadFormat=readFormat;readToken.getReadToken=getReadToken;function getReadToken(t){var e=ReadFormat.getReadFormat(t);return t&&t.useraw?init_useraw(e):init_token(e)}function init_token(t){var e,n=new Array(256);for(e=0;e<=127;e++)n[e]=constant(e);for(e=128;e<=143;e++)n[e]=fix(e-128,t.map);for(e=144;e<=159;e++)n[e]=fix(e-144,t.array);for(e=160;e<=191;e++)n[e]=fix(e-160,t.str);for(n[192]=constant(null),n[193]=null,n[194]=constant(!1),n[195]=constant(!0),n[196]=flex(t.uint8,t.bin),n[197]=flex(t.uint16,t.bin),n[198]=flex(t.uint32,t.bin),n[199]=flex(t.uint8,t.ext),n[200]=flex(t.uint16,t.ext),n[201]=flex(t.uint32,t.ext),n[202]=t.float32,n[203]=t.float64,n[204]=t.uint8,n[205]=t.uint16,n[206]=t.uint32,n[207]=t.uint64,n[208]=t.int8,n[209]=t.int16,n[210]=t.int32,n[211]=t.int64,n[212]=fix(1,t.ext),n[213]=fix(2,t.ext),n[214]=fix(4,t.ext),n[215]=fix(8,t.ext),n[216]=fix(16,t.ext),n[217]=flex(t.uint8,t.str),n[218]=flex(t.uint16,t.str),n[219]=flex(t.uint32,t.str),n[220]=flex(t.uint16,t.array),n[221]=flex(t.uint32,t.array),n[222]=flex(t.uint16,t.map),n[223]=flex(t.uint32,t.map),e=224;e<=255;e++)n[e]=constant(e-256);return n}function init_useraw(t){var e,n=init_token(t).slice();for(n[217]=n[196],n[218]=n[197],n[219]=n[198],e=160;e<=191;e++)n[e]=fix(e-160,t.bin);return n}function constant(t){return function(){return t}}function flex(t,e){return function(n){var a=t(n);return e(n,a)}}function fix(t,e){return function(n){return e(n,t)}}var hasRequiredReadCore;function requireReadCore(){if(hasRequiredReadCore)return readCore;hasRequiredReadCore=1;var t=extBuffer.ExtBuffer,e=requireExtUnpacker(),n=readFormat.readUint8,a=readToken,o=codecBase;o.install({addExtUnpacker:d,getExtUnpacker:m,init:u}),readCore.preset=u.call(o.preset);function l(y){var b=a.getReadToken(y);return _;function _(w){var E=n(w),A=b[E];if(!A)throw new Error("Invalid type: "+(E&&"0x"+E.toString(16)));return A(w)}}function u(){var y=this.options;return this.decode=l(y),y&&y.preset&&e.setExtUnpackers(this),this}function d(y,b){var _=this.extUnpackers||(this.extUnpackers=[]);_[y]=o.filter(b)}function m(y){var b=this.extUnpackers||(this.extUnpackers=[]);return b[y]||_;function _(w){return new t(w,y)}}return readCore}var hasRequiredDecodeBuffer;function requireDecodeBuffer(){if(hasRequiredDecodeBuffer)return decodeBuffer;hasRequiredDecodeBuffer=1,decodeBuffer.DecodeBuffer=n;var t=requireReadCore().preset,e=flexBuffer.FlexDecoder;e.mixin(n.prototype);function n(a){if(!(this instanceof n))return new n(a);if(a&&(this.options=a,a.codec)){var o=this.codec=a.codec;o.bufferish&&(this.bufferish=o.bufferish)}}return n.prototype.codec=t,n.prototype.fetch=function(){return this.codec.decode(this)},decodeBuffer}var hasRequiredDecode;function requireDecode(){if(hasRequiredDecode)return decode$8;hasRequiredDecode=1,decode$8.decode=e;var t=requireDecodeBuffer().DecodeBuffer;function e(n,a){var o=new t(a);return o.write(n),o.read()}return decode$8}var encoder={},eventLiteExports={},eventLite={get exports(){return eventLiteExports},set exports(t){eventLiteExports=t}};/**
 * event-lite.js - Light-weight EventEmitter (less than 1KB when gzipped)
 *
 * @copyright Yusuke Kawasaki
 * @license MIT
 * @constructor
 * @see https://github.com/kawanet/event-lite
 * @see http://kawanet.github.io/event-lite/EventLite.html
 * @example
 * var EventLite = require("event-lite");
 *
 * function MyClass() {...}             // your class
 *
 * EventLite.mixin(MyClass.prototype);  // import event methods
 *
 * var obj = new MyClass();
 * obj.on("foo", function() {...});     // add event listener
 * obj.once("bar", function() {...});   // add one-time event listener
 * obj.emit("foo");                     // dispatch event
 * obj.emit("bar");                     // dispatch another event
 * obj.off("foo");                      // remove event listener
 */(function(t){function e(){if(!(this instanceof e))return new e}(function(n){t.exports=n;var a="listeners",o={on:u,once:d,off:m,emit:y};l(n.prototype),n.mixin=l;function l(_){for(var w in o)_[w]=o[w];return _}function u(_,w){return b(this,_).push(w),this}function d(_,w){var E=this;return A.originalListener=w,b(E,_).push(A),E;function A(){m.call(E,_,A),w.apply(this,arguments)}}function m(_,w){var E=this,A;if(!arguments.length)delete E[a];else if(w){if(A=b(E,_,!0),A){if(A=A.filter(C),!A.length)return m.call(E,_);E[a][_]=A}}else if(A=E[a],A&&(delete A[_],!Object.keys(A).length))return m.call(E);return E;function C(k){return k!==w&&k.originalListener!==w}}function y(_,w){var E=this,A=b(E,_,!0);if(!A)return!1;var C=arguments.length;if(C===1)A.forEach(B);else if(C===2)A.forEach(D);else{var k=Array.prototype.slice.call(arguments,1);A.forEach(q)}return!!A.length;function B(j){j.call(E)}function D(j){j.call(E,w)}function q(j){j.apply(E,k)}}function b(_,w,E){if(!(E&&!_[a])){var A=_[a]||(_[a]={});return A[w]||(A[w]=[])}}})(e)})(eventLite);encoder.Encoder=Encoder$2;var EventLite$1=eventLiteExports,EncodeBuffer=requireEncodeBuffer().EncodeBuffer;function Encoder$2(t){if(!(this instanceof Encoder$2))return new Encoder$2(t);EncodeBuffer.call(this,t)}Encoder$2.prototype=new EncodeBuffer;EventLite$1.mixin(Encoder$2.prototype);Encoder$2.prototype.encode=function(t){this.write(t),this.emit("data",this.read())};Encoder$2.prototype.end=function(t){arguments.length&&this.encode(t),this.flush(),this.emit("end")};var decoder={};decoder.Decoder=Decoder$2;var EventLite=eventLiteExports,DecodeBuffer=requireDecodeBuffer().DecodeBuffer;function Decoder$2(t){if(!(this instanceof Decoder$2))return new Decoder$2(t);DecodeBuffer.call(this,t)}Decoder$2.prototype=new DecodeBuffer;EventLite.mixin(Decoder$2.prototype);Decoder$2.prototype.decode=function(t){arguments.length&&this.write(t),this.flush()};Decoder$2.prototype.push=function(t){this.emit("data",t)};Decoder$2.prototype.end=function(t){this.decode(t),this.emit("end")};var ext={};requireReadCore();requireWriteCore();ext.createCodec=codecBase.createCodec;var codec={};requireReadCore();requireWriteCore();codec.codec={preset:codecBase.preset};browser$3.encode=requireEncode().encode;browser$3.decode=requireDecode().decode;browser$3.Encoder=encoder.Encoder;browser$3.Decoder=decoder.Decoder;browser$3.createCodec=ext.createCodec;browser$3.codec=codec.codec;var naclFastExports={},naclFast={get exports(){return naclFastExports},set exports(t){naclFastExports=t}};(function(t){(function(e){var n=function(Ee){var ke,Pe=new Float64Array(16);if(Ee)for(ke=0;ke<Ee.length;ke++)Pe[ke]=Ee[ke];return Pe},a=function(){throw new Error("no PRNG")},o=new Uint8Array(16),l=new Uint8Array(32);l[0]=9;var u=n(),d=n([1]),m=n([56129,1]),y=n([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),b=n([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),_=n([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),w=n([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),E=n([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function A(Ee,ke,Pe,ne){Ee[ke]=Pe>>24&255,Ee[ke+1]=Pe>>16&255,Ee[ke+2]=Pe>>8&255,Ee[ke+3]=Pe&255,Ee[ke+4]=ne>>24&255,Ee[ke+5]=ne>>16&255,Ee[ke+6]=ne>>8&255,Ee[ke+7]=ne&255}function C(Ee,ke,Pe,ne,xe){var Te,Ae=0;for(Te=0;Te<xe;Te++)Ae|=Ee[ke+Te]^Pe[ne+Te];return(1&Ae-1>>>8)-1}function k(Ee,ke,Pe,ne){return C(Ee,ke,Pe,ne,16)}function B(Ee,ke,Pe,ne){return C(Ee,ke,Pe,ne,32)}function D(Ee,ke,Pe,ne){for(var xe=ne[0]&255|(ne[1]&255)<<8|(ne[2]&255)<<16|(ne[3]&255)<<24,Te=Pe[0]&255|(Pe[1]&255)<<8|(Pe[2]&255)<<16|(Pe[3]&255)<<24,Ae=Pe[4]&255|(Pe[5]&255)<<8|(Pe[6]&255)<<16|(Pe[7]&255)<<24,Ce=Pe[8]&255|(Pe[9]&255)<<8|(Pe[10]&255)<<16|(Pe[11]&255)<<24,Ne=Pe[12]&255|(Pe[13]&255)<<8|(Pe[14]&255)<<16|(Pe[15]&255)<<24,Ue=ne[4]&255|(ne[5]&255)<<8|(ne[6]&255)<<16|(ne[7]&255)<<24,je=ke[0]&255|(ke[1]&255)<<8|(ke[2]&255)<<16|(ke[3]&255)<<24,Ke=ke[4]&255|(ke[5]&255)<<8|(ke[6]&255)<<16|(ke[7]&255)<<24,He=ke[8]&255|(ke[9]&255)<<8|(ke[10]&255)<<16|(ke[11]&255)<<24,ze=ke[12]&255|(ke[13]&255)<<8|(ke[14]&255)<<16|(ke[15]&255)<<24,Ye=ne[8]&255|(ne[9]&255)<<8|(ne[10]&255)<<16|(ne[11]&255)<<24,Qe=Pe[16]&255|(Pe[17]&255)<<8|(Pe[18]&255)<<16|(Pe[19]&255)<<24,st=Pe[20]&255|(Pe[21]&255)<<8|(Pe[22]&255)<<16|(Pe[23]&255)<<24,Ze=Pe[24]&255|(Pe[25]&255)<<8|(Pe[26]&255)<<16|(Pe[27]&255)<<24,et=Pe[28]&255|(Pe[29]&255)<<8|(Pe[30]&255)<<16|(Pe[31]&255)<<24,vt=ne[12]&255|(ne[13]&255)<<8|(ne[14]&255)<<16|(ne[15]&255)<<24,yt=xe,wt=Te,bt=Ae,$t=Ce,At=Ne,Et=Ue,Xe=je,Je=Ke,lt=He,ct=ze,gt=Ye,St=Qe,It=st,Mt=Ze,Ot=et,Pt=vt,qe,Dt=0;Dt<20;Dt+=2)qe=yt+It|0,At^=qe<<7|qe>>>32-7,qe=At+yt|0,lt^=qe<<9|qe>>>32-9,qe=lt+At|0,It^=qe<<13|qe>>>32-13,qe=It+lt|0,yt^=qe<<18|qe>>>32-18,qe=Et+wt|0,ct^=qe<<7|qe>>>32-7,qe=ct+Et|0,Mt^=qe<<9|qe>>>32-9,qe=Mt+ct|0,wt^=qe<<13|qe>>>32-13,qe=wt+Mt|0,Et^=qe<<18|qe>>>32-18,qe=gt+Xe|0,Ot^=qe<<7|qe>>>32-7,qe=Ot+gt|0,bt^=qe<<9|qe>>>32-9,qe=bt+Ot|0,Xe^=qe<<13|qe>>>32-13,qe=Xe+bt|0,gt^=qe<<18|qe>>>32-18,qe=Pt+St|0,$t^=qe<<7|qe>>>32-7,qe=$t+Pt|0,Je^=qe<<9|qe>>>32-9,qe=Je+$t|0,St^=qe<<13|qe>>>32-13,qe=St+Je|0,Pt^=qe<<18|qe>>>32-18,qe=yt+$t|0,wt^=qe<<7|qe>>>32-7,qe=wt+yt|0,bt^=qe<<9|qe>>>32-9,qe=bt+wt|0,$t^=qe<<13|qe>>>32-13,qe=$t+bt|0,yt^=qe<<18|qe>>>32-18,qe=Et+At|0,Xe^=qe<<7|qe>>>32-7,qe=Xe+Et|0,Je^=qe<<9|qe>>>32-9,qe=Je+Xe|0,At^=qe<<13|qe>>>32-13,qe=At+Je|0,Et^=qe<<18|qe>>>32-18,qe=gt+ct|0,St^=qe<<7|qe>>>32-7,qe=St+gt|0,lt^=qe<<9|qe>>>32-9,qe=lt+St|0,ct^=qe<<13|qe>>>32-13,qe=ct+lt|0,gt^=qe<<18|qe>>>32-18,qe=Pt+Ot|0,It^=qe<<7|qe>>>32-7,qe=It+Pt|0,Mt^=qe<<9|qe>>>32-9,qe=Mt+It|0,Ot^=qe<<13|qe>>>32-13,qe=Ot+Mt|0,Pt^=qe<<18|qe>>>32-18;yt=yt+xe|0,wt=wt+Te|0,bt=bt+Ae|0,$t=$t+Ce|0,At=At+Ne|0,Et=Et+Ue|0,Xe=Xe+je|0,Je=Je+Ke|0,lt=lt+He|0,ct=ct+ze|0,gt=gt+Ye|0,St=St+Qe|0,It=It+st|0,Mt=Mt+Ze|0,Ot=Ot+et|0,Pt=Pt+vt|0,Ee[0]=yt>>>0&255,Ee[1]=yt>>>8&255,Ee[2]=yt>>>16&255,Ee[3]=yt>>>24&255,Ee[4]=wt>>>0&255,Ee[5]=wt>>>8&255,Ee[6]=wt>>>16&255,Ee[7]=wt>>>24&255,Ee[8]=bt>>>0&255,Ee[9]=bt>>>8&255,Ee[10]=bt>>>16&255,Ee[11]=bt>>>24&255,Ee[12]=$t>>>0&255,Ee[13]=$t>>>8&255,Ee[14]=$t>>>16&255,Ee[15]=$t>>>24&255,Ee[16]=At>>>0&255,Ee[17]=At>>>8&255,Ee[18]=At>>>16&255,Ee[19]=At>>>24&255,Ee[20]=Et>>>0&255,Ee[21]=Et>>>8&255,Ee[22]=Et>>>16&255,Ee[23]=Et>>>24&255,Ee[24]=Xe>>>0&255,Ee[25]=Xe>>>8&255,Ee[26]=Xe>>>16&255,Ee[27]=Xe>>>24&255,Ee[28]=Je>>>0&255,Ee[29]=Je>>>8&255,Ee[30]=Je>>>16&255,Ee[31]=Je>>>24&255,Ee[32]=lt>>>0&255,Ee[33]=lt>>>8&255,Ee[34]=lt>>>16&255,Ee[35]=lt>>>24&255,Ee[36]=ct>>>0&255,Ee[37]=ct>>>8&255,Ee[38]=ct>>>16&255,Ee[39]=ct>>>24&255,Ee[40]=gt>>>0&255,Ee[41]=gt>>>8&255,Ee[42]=gt>>>16&255,Ee[43]=gt>>>24&255,Ee[44]=St>>>0&255,Ee[45]=St>>>8&255,Ee[46]=St>>>16&255,Ee[47]=St>>>24&255,Ee[48]=It>>>0&255,Ee[49]=It>>>8&255,Ee[50]=It>>>16&255,Ee[51]=It>>>24&255,Ee[52]=Mt>>>0&255,Ee[53]=Mt>>>8&255,Ee[54]=Mt>>>16&255,Ee[55]=Mt>>>24&255,Ee[56]=Ot>>>0&255,Ee[57]=Ot>>>8&255,Ee[58]=Ot>>>16&255,Ee[59]=Ot>>>24&255,Ee[60]=Pt>>>0&255,Ee[61]=Pt>>>8&255,Ee[62]=Pt>>>16&255,Ee[63]=Pt>>>24&255}function q(Ee,ke,Pe,ne){for(var xe=ne[0]&255|(ne[1]&255)<<8|(ne[2]&255)<<16|(ne[3]&255)<<24,Te=Pe[0]&255|(Pe[1]&255)<<8|(Pe[2]&255)<<16|(Pe[3]&255)<<24,Ae=Pe[4]&255|(Pe[5]&255)<<8|(Pe[6]&255)<<16|(Pe[7]&255)<<24,Ce=Pe[8]&255|(Pe[9]&255)<<8|(Pe[10]&255)<<16|(Pe[11]&255)<<24,Ne=Pe[12]&255|(Pe[13]&255)<<8|(Pe[14]&255)<<16|(Pe[15]&255)<<24,Ue=ne[4]&255|(ne[5]&255)<<8|(ne[6]&255)<<16|(ne[7]&255)<<24,je=ke[0]&255|(ke[1]&255)<<8|(ke[2]&255)<<16|(ke[3]&255)<<24,Ke=ke[4]&255|(ke[5]&255)<<8|(ke[6]&255)<<16|(ke[7]&255)<<24,He=ke[8]&255|(ke[9]&255)<<8|(ke[10]&255)<<16|(ke[11]&255)<<24,ze=ke[12]&255|(ke[13]&255)<<8|(ke[14]&255)<<16|(ke[15]&255)<<24,Ye=ne[8]&255|(ne[9]&255)<<8|(ne[10]&255)<<16|(ne[11]&255)<<24,Qe=Pe[16]&255|(Pe[17]&255)<<8|(Pe[18]&255)<<16|(Pe[19]&255)<<24,st=Pe[20]&255|(Pe[21]&255)<<8|(Pe[22]&255)<<16|(Pe[23]&255)<<24,Ze=Pe[24]&255|(Pe[25]&255)<<8|(Pe[26]&255)<<16|(Pe[27]&255)<<24,et=Pe[28]&255|(Pe[29]&255)<<8|(Pe[30]&255)<<16|(Pe[31]&255)<<24,vt=ne[12]&255|(ne[13]&255)<<8|(ne[14]&255)<<16|(ne[15]&255)<<24,yt=xe,wt=Te,bt=Ae,$t=Ce,At=Ne,Et=Ue,Xe=je,Je=Ke,lt=He,ct=ze,gt=Ye,St=Qe,It=st,Mt=Ze,Ot=et,Pt=vt,qe,Dt=0;Dt<20;Dt+=2)qe=yt+It|0,At^=qe<<7|qe>>>32-7,qe=At+yt|0,lt^=qe<<9|qe>>>32-9,qe=lt+At|0,It^=qe<<13|qe>>>32-13,qe=It+lt|0,yt^=qe<<18|qe>>>32-18,qe=Et+wt|0,ct^=qe<<7|qe>>>32-7,qe=ct+Et|0,Mt^=qe<<9|qe>>>32-9,qe=Mt+ct|0,wt^=qe<<13|qe>>>32-13,qe=wt+Mt|0,Et^=qe<<18|qe>>>32-18,qe=gt+Xe|0,Ot^=qe<<7|qe>>>32-7,qe=Ot+gt|0,bt^=qe<<9|qe>>>32-9,qe=bt+Ot|0,Xe^=qe<<13|qe>>>32-13,qe=Xe+bt|0,gt^=qe<<18|qe>>>32-18,qe=Pt+St|0,$t^=qe<<7|qe>>>32-7,qe=$t+Pt|0,Je^=qe<<9|qe>>>32-9,qe=Je+$t|0,St^=qe<<13|qe>>>32-13,qe=St+Je|0,Pt^=qe<<18|qe>>>32-18,qe=yt+$t|0,wt^=qe<<7|qe>>>32-7,qe=wt+yt|0,bt^=qe<<9|qe>>>32-9,qe=bt+wt|0,$t^=qe<<13|qe>>>32-13,qe=$t+bt|0,yt^=qe<<18|qe>>>32-18,qe=Et+At|0,Xe^=qe<<7|qe>>>32-7,qe=Xe+Et|0,Je^=qe<<9|qe>>>32-9,qe=Je+Xe|0,At^=qe<<13|qe>>>32-13,qe=At+Je|0,Et^=qe<<18|qe>>>32-18,qe=gt+ct|0,St^=qe<<7|qe>>>32-7,qe=St+gt|0,lt^=qe<<9|qe>>>32-9,qe=lt+St|0,ct^=qe<<13|qe>>>32-13,qe=ct+lt|0,gt^=qe<<18|qe>>>32-18,qe=Pt+Ot|0,It^=qe<<7|qe>>>32-7,qe=It+Pt|0,Mt^=qe<<9|qe>>>32-9,qe=Mt+It|0,Ot^=qe<<13|qe>>>32-13,qe=Ot+Mt|0,Pt^=qe<<18|qe>>>32-18;Ee[0]=yt>>>0&255,Ee[1]=yt>>>8&255,Ee[2]=yt>>>16&255,Ee[3]=yt>>>24&255,Ee[4]=Et>>>0&255,Ee[5]=Et>>>8&255,Ee[6]=Et>>>16&255,Ee[7]=Et>>>24&255,Ee[8]=gt>>>0&255,Ee[9]=gt>>>8&255,Ee[10]=gt>>>16&255,Ee[11]=gt>>>24&255,Ee[12]=Pt>>>0&255,Ee[13]=Pt>>>8&255,Ee[14]=Pt>>>16&255,Ee[15]=Pt>>>24&255,Ee[16]=Xe>>>0&255,Ee[17]=Xe>>>8&255,Ee[18]=Xe>>>16&255,Ee[19]=Xe>>>24&255,Ee[20]=Je>>>0&255,Ee[21]=Je>>>8&255,Ee[22]=Je>>>16&255,Ee[23]=Je>>>24&255,Ee[24]=lt>>>0&255,Ee[25]=lt>>>8&255,Ee[26]=lt>>>16&255,Ee[27]=lt>>>24&255,Ee[28]=ct>>>0&255,Ee[29]=ct>>>8&255,Ee[30]=ct>>>16&255,Ee[31]=ct>>>24&255}function j(Ee,ke,Pe,ne){D(Ee,ke,Pe,ne)}function J(Ee,ke,Pe,ne){q(Ee,ke,Pe,ne)}var Y=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function L(Ee,ke,Pe,ne,xe,Te,Ae){var Ce=new Uint8Array(16),Ne=new Uint8Array(64),Ue,je;for(je=0;je<16;je++)Ce[je]=0;for(je=0;je<8;je++)Ce[je]=Te[je];for(;xe>=64;){for(j(Ne,Ce,Ae,Y),je=0;je<64;je++)Ee[ke+je]=Pe[ne+je]^Ne[je];for(Ue=1,je=8;je<16;je++)Ue=Ue+(Ce[je]&255)|0,Ce[je]=Ue&255,Ue>>>=8;xe-=64,ke+=64,ne+=64}if(xe>0)for(j(Ne,Ce,Ae,Y),je=0;je<xe;je++)Ee[ke+je]=Pe[ne+je]^Ne[je];return 0}function Z(Ee,ke,Pe,ne,xe){var Te=new Uint8Array(16),Ae=new Uint8Array(64),Ce,Ne;for(Ne=0;Ne<16;Ne++)Te[Ne]=0;for(Ne=0;Ne<8;Ne++)Te[Ne]=ne[Ne];for(;Pe>=64;){for(j(Ae,Te,xe,Y),Ne=0;Ne<64;Ne++)Ee[ke+Ne]=Ae[Ne];for(Ce=1,Ne=8;Ne<16;Ne++)Ce=Ce+(Te[Ne]&255)|0,Te[Ne]=Ce&255,Ce>>>=8;Pe-=64,ke+=64}if(Pe>0)for(j(Ae,Te,xe,Y),Ne=0;Ne<Pe;Ne++)Ee[ke+Ne]=Ae[Ne];return 0}function Q(Ee,ke,Pe,ne,xe){var Te=new Uint8Array(32);J(Te,ne,xe,Y);for(var Ae=new Uint8Array(8),Ce=0;Ce<8;Ce++)Ae[Ce]=ne[Ce+16];return Z(Ee,ke,Pe,Ae,Te)}function oe(Ee,ke,Pe,ne,xe,Te,Ae){var Ce=new Uint8Array(32);J(Ce,Te,Ae,Y);for(var Ne=new Uint8Array(8),Ue=0;Ue<8;Ue++)Ne[Ue]=Te[Ue+16];return L(Ee,ke,Pe,ne,xe,Ne,Ce)}var ae=function(Ee){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var ke,Pe,ne,xe,Te,Ae,Ce,Ne;ke=Ee[0]&255|(Ee[1]&255)<<8,this.r[0]=ke&8191,Pe=Ee[2]&255|(Ee[3]&255)<<8,this.r[1]=(ke>>>13|Pe<<3)&8191,ne=Ee[4]&255|(Ee[5]&255)<<8,this.r[2]=(Pe>>>10|ne<<6)&7939,xe=Ee[6]&255|(Ee[7]&255)<<8,this.r[3]=(ne>>>7|xe<<9)&8191,Te=Ee[8]&255|(Ee[9]&255)<<8,this.r[4]=(xe>>>4|Te<<12)&255,this.r[5]=Te>>>1&8190,Ae=Ee[10]&255|(Ee[11]&255)<<8,this.r[6]=(Te>>>14|Ae<<2)&8191,Ce=Ee[12]&255|(Ee[13]&255)<<8,this.r[7]=(Ae>>>11|Ce<<5)&8065,Ne=Ee[14]&255|(Ee[15]&255)<<8,this.r[8]=(Ce>>>8|Ne<<8)&8191,this.r[9]=Ne>>>5&127,this.pad[0]=Ee[16]&255|(Ee[17]&255)<<8,this.pad[1]=Ee[18]&255|(Ee[19]&255)<<8,this.pad[2]=Ee[20]&255|(Ee[21]&255)<<8,this.pad[3]=Ee[22]&255|(Ee[23]&255)<<8,this.pad[4]=Ee[24]&255|(Ee[25]&255)<<8,this.pad[5]=Ee[26]&255|(Ee[27]&255)<<8,this.pad[6]=Ee[28]&255|(Ee[29]&255)<<8,this.pad[7]=Ee[30]&255|(Ee[31]&255)<<8};ae.prototype.blocks=function(Ee,ke,Pe){for(var ne=this.fin?0:2048,xe,Te,Ae,Ce,Ne,Ue,je,Ke,He,ze,Ye,Qe,st,Ze,et,vt,yt,wt,bt,$t=this.h[0],At=this.h[1],Et=this.h[2],Xe=this.h[3],Je=this.h[4],lt=this.h[5],ct=this.h[6],gt=this.h[7],St=this.h[8],It=this.h[9],Mt=this.r[0],Ot=this.r[1],Pt=this.r[2],qe=this.r[3],Dt=this.r[4],Ut=this.r[5],jt=this.r[6],Nt=this.r[7],Lt=this.r[8],Ft=this.r[9];Pe>=16;)xe=Ee[ke+0]&255|(Ee[ke+1]&255)<<8,$t+=xe&8191,Te=Ee[ke+2]&255|(Ee[ke+3]&255)<<8,At+=(xe>>>13|Te<<3)&8191,Ae=Ee[ke+4]&255|(Ee[ke+5]&255)<<8,Et+=(Te>>>10|Ae<<6)&8191,Ce=Ee[ke+6]&255|(Ee[ke+7]&255)<<8,Xe+=(Ae>>>7|Ce<<9)&8191,Ne=Ee[ke+8]&255|(Ee[ke+9]&255)<<8,Je+=(Ce>>>4|Ne<<12)&8191,lt+=Ne>>>1&8191,Ue=Ee[ke+10]&255|(Ee[ke+11]&255)<<8,ct+=(Ne>>>14|Ue<<2)&8191,je=Ee[ke+12]&255|(Ee[ke+13]&255)<<8,gt+=(Ue>>>11|je<<5)&8191,Ke=Ee[ke+14]&255|(Ee[ke+15]&255)<<8,St+=(je>>>8|Ke<<8)&8191,It+=Ke>>>5|ne,He=0,ze=He,ze+=$t*Mt,ze+=At*(5*Ft),ze+=Et*(5*Lt),ze+=Xe*(5*Nt),ze+=Je*(5*jt),He=ze>>>13,ze&=8191,ze+=lt*(5*Ut),ze+=ct*(5*Dt),ze+=gt*(5*qe),ze+=St*(5*Pt),ze+=It*(5*Ot),He+=ze>>>13,ze&=8191,Ye=He,Ye+=$t*Ot,Ye+=At*Mt,Ye+=Et*(5*Ft),Ye+=Xe*(5*Lt),Ye+=Je*(5*Nt),He=Ye>>>13,Ye&=8191,Ye+=lt*(5*jt),Ye+=ct*(5*Ut),Ye+=gt*(5*Dt),Ye+=St*(5*qe),Ye+=It*(5*Pt),He+=Ye>>>13,Ye&=8191,Qe=He,Qe+=$t*Pt,Qe+=At*Ot,Qe+=Et*Mt,Qe+=Xe*(5*Ft),Qe+=Je*(5*Lt),He=Qe>>>13,Qe&=8191,Qe+=lt*(5*Nt),Qe+=ct*(5*jt),Qe+=gt*(5*Ut),Qe+=St*(5*Dt),Qe+=It*(5*qe),He+=Qe>>>13,Qe&=8191,st=He,st+=$t*qe,st+=At*Pt,st+=Et*Ot,st+=Xe*Mt,st+=Je*(5*Ft),He=st>>>13,st&=8191,st+=lt*(5*Lt),st+=ct*(5*Nt),st+=gt*(5*jt),st+=St*(5*Ut),st+=It*(5*Dt),He+=st>>>13,st&=8191,Ze=He,Ze+=$t*Dt,Ze+=At*qe,Ze+=Et*Pt,Ze+=Xe*Ot,Ze+=Je*Mt,He=Ze>>>13,Ze&=8191,Ze+=lt*(5*Ft),Ze+=ct*(5*Lt),Ze+=gt*(5*Nt),Ze+=St*(5*jt),Ze+=It*(5*Ut),He+=Ze>>>13,Ze&=8191,et=He,et+=$t*Ut,et+=At*Dt,et+=Et*qe,et+=Xe*Pt,et+=Je*Ot,He=et>>>13,et&=8191,et+=lt*Mt,et+=ct*(5*Ft),et+=gt*(5*Lt),et+=St*(5*Nt),et+=It*(5*jt),He+=et>>>13,et&=8191,vt=He,vt+=$t*jt,vt+=At*Ut,vt+=Et*Dt,vt+=Xe*qe,vt+=Je*Pt,He=vt>>>13,vt&=8191,vt+=lt*Ot,vt+=ct*Mt,vt+=gt*(5*Ft),vt+=St*(5*Lt),vt+=It*(5*Nt),He+=vt>>>13,vt&=8191,yt=He,yt+=$t*Nt,yt+=At*jt,yt+=Et*Ut,yt+=Xe*Dt,yt+=Je*qe,He=yt>>>13,yt&=8191,yt+=lt*Pt,yt+=ct*Ot,yt+=gt*Mt,yt+=St*(5*Ft),yt+=It*(5*Lt),He+=yt>>>13,yt&=8191,wt=He,wt+=$t*Lt,wt+=At*Nt,wt+=Et*jt,wt+=Xe*Ut,wt+=Je*Dt,He=wt>>>13,wt&=8191,wt+=lt*qe,wt+=ct*Pt,wt+=gt*Ot,wt+=St*Mt,wt+=It*(5*Ft),He+=wt>>>13,wt&=8191,bt=He,bt+=$t*Ft,bt+=At*Lt,bt+=Et*Nt,bt+=Xe*jt,bt+=Je*Ut,He=bt>>>13,bt&=8191,bt+=lt*Dt,bt+=ct*qe,bt+=gt*Pt,bt+=St*Ot,bt+=It*Mt,He+=bt>>>13,bt&=8191,He=(He<<2)+He|0,He=He+ze|0,ze=He&8191,He=He>>>13,Ye+=He,$t=ze,At=Ye,Et=Qe,Xe=st,Je=Ze,lt=et,ct=vt,gt=yt,St=wt,It=bt,ke+=16,Pe-=16;this.h[0]=$t,this.h[1]=At,this.h[2]=Et,this.h[3]=Xe,this.h[4]=Je,this.h[5]=lt,this.h[6]=ct,this.h[7]=gt,this.h[8]=St,this.h[9]=It},ae.prototype.finish=function(Ee,ke){var Pe=new Uint16Array(10),ne,xe,Te,Ae;if(this.leftover){for(Ae=this.leftover,this.buffer[Ae++]=1;Ae<16;Ae++)this.buffer[Ae]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(ne=this.h[1]>>>13,this.h[1]&=8191,Ae=2;Ae<10;Ae++)this.h[Ae]+=ne,ne=this.h[Ae]>>>13,this.h[Ae]&=8191;for(this.h[0]+=ne*5,ne=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=ne,ne=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=ne,Pe[0]=this.h[0]+5,ne=Pe[0]>>>13,Pe[0]&=8191,Ae=1;Ae<10;Ae++)Pe[Ae]=this.h[Ae]+ne,ne=Pe[Ae]>>>13,Pe[Ae]&=8191;for(Pe[9]-=1<<13,xe=(ne^1)-1,Ae=0;Ae<10;Ae++)Pe[Ae]&=xe;for(xe=~xe,Ae=0;Ae<10;Ae++)this.h[Ae]=this.h[Ae]&xe|Pe[Ae];for(this.h[0]=(this.h[0]|this.h[1]<<13)&65535,this.h[1]=(this.h[1]>>>3|this.h[2]<<10)&65535,this.h[2]=(this.h[2]>>>6|this.h[3]<<7)&65535,this.h[3]=(this.h[3]>>>9|this.h[4]<<4)&65535,this.h[4]=(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14)&65535,this.h[5]=(this.h[6]>>>2|this.h[7]<<11)&65535,this.h[6]=(this.h[7]>>>5|this.h[8]<<8)&65535,this.h[7]=(this.h[8]>>>8|this.h[9]<<5)&65535,Te=this.h[0]+this.pad[0],this.h[0]=Te&65535,Ae=1;Ae<8;Ae++)Te=(this.h[Ae]+this.pad[Ae]|0)+(Te>>>16)|0,this.h[Ae]=Te&65535;Ee[ke+0]=this.h[0]>>>0&255,Ee[ke+1]=this.h[0]>>>8&255,Ee[ke+2]=this.h[1]>>>0&255,Ee[ke+3]=this.h[1]>>>8&255,Ee[ke+4]=this.h[2]>>>0&255,Ee[ke+5]=this.h[2]>>>8&255,Ee[ke+6]=this.h[3]>>>0&255,Ee[ke+7]=this.h[3]>>>8&255,Ee[ke+8]=this.h[4]>>>0&255,Ee[ke+9]=this.h[4]>>>8&255,Ee[ke+10]=this.h[5]>>>0&255,Ee[ke+11]=this.h[5]>>>8&255,Ee[ke+12]=this.h[6]>>>0&255,Ee[ke+13]=this.h[6]>>>8&255,Ee[ke+14]=this.h[7]>>>0&255,Ee[ke+15]=this.h[7]>>>8&255},ae.prototype.update=function(Ee,ke,Pe){var ne,xe;if(this.leftover){for(xe=16-this.leftover,xe>Pe&&(xe=Pe),ne=0;ne<xe;ne++)this.buffer[this.leftover+ne]=Ee[ke+ne];if(Pe-=xe,ke+=xe,this.leftover+=xe,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(Pe>=16&&(xe=Pe-Pe%16,this.blocks(Ee,ke,xe),ke+=xe,Pe-=xe),Pe){for(ne=0;ne<Pe;ne++)this.buffer[this.leftover+ne]=Ee[ke+ne];this.leftover+=Pe}};function U(Ee,ke,Pe,ne,xe,Te){var Ae=new ae(Te);return Ae.update(Pe,ne,xe),Ae.finish(Ee,ke),0}function I(Ee,ke,Pe,ne,xe,Te){var Ae=new Uint8Array(16);return U(Ae,0,Pe,ne,xe,Te),k(Ee,ke,Ae,0)}function x(Ee,ke,Pe,ne,xe){var Te;if(Pe<32)return-1;for(oe(Ee,0,ke,0,Pe,ne,xe),U(Ee,16,Ee,32,Pe-32,Ee),Te=0;Te<16;Te++)Ee[Te]=0;return 0}function T(Ee,ke,Pe,ne,xe){var Te,Ae=new Uint8Array(32);if(Pe<32||(Q(Ae,0,32,ne,xe),I(ke,16,ke,32,Pe-32,Ae)!==0))return-1;for(oe(Ee,0,ke,0,Pe,ne,xe),Te=0;Te<32;Te++)Ee[Te]=0;return 0}function M(Ee,ke){var Pe;for(Pe=0;Pe<16;Pe++)Ee[Pe]=ke[Pe]|0}function O(Ee){var ke,Pe,ne=1;for(ke=0;ke<16;ke++)Pe=Ee[ke]+ne+65535,ne=Math.floor(Pe/65536),Ee[ke]=Pe-ne*65536;Ee[0]+=ne-1+37*(ne-1)}function z(Ee,ke,Pe){for(var ne,xe=~(Pe-1),Te=0;Te<16;Te++)ne=xe&(Ee[Te]^ke[Te]),Ee[Te]^=ne,ke[Te]^=ne}function X(Ee,ke){var Pe,ne,xe,Te=n(),Ae=n();for(Pe=0;Pe<16;Pe++)Ae[Pe]=ke[Pe];for(O(Ae),O(Ae),O(Ae),ne=0;ne<2;ne++){for(Te[0]=Ae[0]-65517,Pe=1;Pe<15;Pe++)Te[Pe]=Ae[Pe]-65535-(Te[Pe-1]>>16&1),Te[Pe-1]&=65535;Te[15]=Ae[15]-32767-(Te[14]>>16&1),xe=Te[15]>>16&1,Te[14]&=65535,z(Ae,Te,1-xe)}for(Pe=0;Pe<16;Pe++)Ee[2*Pe]=Ae[Pe]&255,Ee[2*Pe+1]=Ae[Pe]>>8}function H(Ee,ke){var Pe=new Uint8Array(32),ne=new Uint8Array(32);return X(Pe,Ee),X(ne,ke),B(Pe,0,ne,0)}function P(Ee){var ke=new Uint8Array(32);return X(ke,Ee),ke[0]&1}function S(Ee,ke){var Pe;for(Pe=0;Pe<16;Pe++)Ee[Pe]=ke[2*Pe]+(ke[2*Pe+1]<<8);Ee[15]&=32767}function F(Ee,ke,Pe){for(var ne=0;ne<16;ne++)Ee[ne]=ke[ne]+Pe[ne]}function ue(Ee,ke,Pe){for(var ne=0;ne<16;ne++)Ee[ne]=ke[ne]-Pe[ne]}function ee(Ee,ke,Pe){var ne,xe,Te=0,Ae=0,Ce=0,Ne=0,Ue=0,je=0,Ke=0,He=0,ze=0,Ye=0,Qe=0,st=0,Ze=0,et=0,vt=0,yt=0,wt=0,bt=0,$t=0,At=0,Et=0,Xe=0,Je=0,lt=0,ct=0,gt=0,St=0,It=0,Mt=0,Ot=0,Pt=0,qe=Pe[0],Dt=Pe[1],Ut=Pe[2],jt=Pe[3],Nt=Pe[4],Lt=Pe[5],Ft=Pe[6],Kt=Pe[7],Vt=Pe[8],Ht=Pe[9],qt=Pe[10],zt=Pe[11],Gt=Pe[12],Wt=Pe[13],Xt=Pe[14],Yt=Pe[15];ne=ke[0],Te+=ne*qe,Ae+=ne*Dt,Ce+=ne*Ut,Ne+=ne*jt,Ue+=ne*Nt,je+=ne*Lt,Ke+=ne*Ft,He+=ne*Kt,ze+=ne*Vt,Ye+=ne*Ht,Qe+=ne*qt,st+=ne*zt,Ze+=ne*Gt,et+=ne*Wt,vt+=ne*Xt,yt+=ne*Yt,ne=ke[1],Ae+=ne*qe,Ce+=ne*Dt,Ne+=ne*Ut,Ue+=ne*jt,je+=ne*Nt,Ke+=ne*Lt,He+=ne*Ft,ze+=ne*Kt,Ye+=ne*Vt,Qe+=ne*Ht,st+=ne*qt,Ze+=ne*zt,et+=ne*Gt,vt+=ne*Wt,yt+=ne*Xt,wt+=ne*Yt,ne=ke[2],Ce+=ne*qe,Ne+=ne*Dt,Ue+=ne*Ut,je+=ne*jt,Ke+=ne*Nt,He+=ne*Lt,ze+=ne*Ft,Ye+=ne*Kt,Qe+=ne*Vt,st+=ne*Ht,Ze+=ne*qt,et+=ne*zt,vt+=ne*Gt,yt+=ne*Wt,wt+=ne*Xt,bt+=ne*Yt,ne=ke[3],Ne+=ne*qe,Ue+=ne*Dt,je+=ne*Ut,Ke+=ne*jt,He+=ne*Nt,ze+=ne*Lt,Ye+=ne*Ft,Qe+=ne*Kt,st+=ne*Vt,Ze+=ne*Ht,et+=ne*qt,vt+=ne*zt,yt+=ne*Gt,wt+=ne*Wt,bt+=ne*Xt,$t+=ne*Yt,ne=ke[4],Ue+=ne*qe,je+=ne*Dt,Ke+=ne*Ut,He+=ne*jt,ze+=ne*Nt,Ye+=ne*Lt,Qe+=ne*Ft,st+=ne*Kt,Ze+=ne*Vt,et+=ne*Ht,vt+=ne*qt,yt+=ne*zt,wt+=ne*Gt,bt+=ne*Wt,$t+=ne*Xt,At+=ne*Yt,ne=ke[5],je+=ne*qe,Ke+=ne*Dt,He+=ne*Ut,ze+=ne*jt,Ye+=ne*Nt,Qe+=ne*Lt,st+=ne*Ft,Ze+=ne*Kt,et+=ne*Vt,vt+=ne*Ht,yt+=ne*qt,wt+=ne*zt,bt+=ne*Gt,$t+=ne*Wt,At+=ne*Xt,Et+=ne*Yt,ne=ke[6],Ke+=ne*qe,He+=ne*Dt,ze+=ne*Ut,Ye+=ne*jt,Qe+=ne*Nt,st+=ne*Lt,Ze+=ne*Ft,et+=ne*Kt,vt+=ne*Vt,yt+=ne*Ht,wt+=ne*qt,bt+=ne*zt,$t+=ne*Gt,At+=ne*Wt,Et+=ne*Xt,Xe+=ne*Yt,ne=ke[7],He+=ne*qe,ze+=ne*Dt,Ye+=ne*Ut,Qe+=ne*jt,st+=ne*Nt,Ze+=ne*Lt,et+=ne*Ft,vt+=ne*Kt,yt+=ne*Vt,wt+=ne*Ht,bt+=ne*qt,$t+=ne*zt,At+=ne*Gt,Et+=ne*Wt,Xe+=ne*Xt,Je+=ne*Yt,ne=ke[8],ze+=ne*qe,Ye+=ne*Dt,Qe+=ne*Ut,st+=ne*jt,Ze+=ne*Nt,et+=ne*Lt,vt+=ne*Ft,yt+=ne*Kt,wt+=ne*Vt,bt+=ne*Ht,$t+=ne*qt,At+=ne*zt,Et+=ne*Gt,Xe+=ne*Wt,Je+=ne*Xt,lt+=ne*Yt,ne=ke[9],Ye+=ne*qe,Qe+=ne*Dt,st+=ne*Ut,Ze+=ne*jt,et+=ne*Nt,vt+=ne*Lt,yt+=ne*Ft,wt+=ne*Kt,bt+=ne*Vt,$t+=ne*Ht,At+=ne*qt,Et+=ne*zt,Xe+=ne*Gt,Je+=ne*Wt,lt+=ne*Xt,ct+=ne*Yt,ne=ke[10],Qe+=ne*qe,st+=ne*Dt,Ze+=ne*Ut,et+=ne*jt,vt+=ne*Nt,yt+=ne*Lt,wt+=ne*Ft,bt+=ne*Kt,$t+=ne*Vt,At+=ne*Ht,Et+=ne*qt,Xe+=ne*zt,Je+=ne*Gt,lt+=ne*Wt,ct+=ne*Xt,gt+=ne*Yt,ne=ke[11],st+=ne*qe,Ze+=ne*Dt,et+=ne*Ut,vt+=ne*jt,yt+=ne*Nt,wt+=ne*Lt,bt+=ne*Ft,$t+=ne*Kt,At+=ne*Vt,Et+=ne*Ht,Xe+=ne*qt,Je+=ne*zt,lt+=ne*Gt,ct+=ne*Wt,gt+=ne*Xt,St+=ne*Yt,ne=ke[12],Ze+=ne*qe,et+=ne*Dt,vt+=ne*Ut,yt+=ne*jt,wt+=ne*Nt,bt+=ne*Lt,$t+=ne*Ft,At+=ne*Kt,Et+=ne*Vt,Xe+=ne*Ht,Je+=ne*qt,lt+=ne*zt,ct+=ne*Gt,gt+=ne*Wt,St+=ne*Xt,It+=ne*Yt,ne=ke[13],et+=ne*qe,vt+=ne*Dt,yt+=ne*Ut,wt+=ne*jt,bt+=ne*Nt,$t+=ne*Lt,At+=ne*Ft,Et+=ne*Kt,Xe+=ne*Vt,Je+=ne*Ht,lt+=ne*qt,ct+=ne*zt,gt+=ne*Gt,St+=ne*Wt,It+=ne*Xt,Mt+=ne*Yt,ne=ke[14],vt+=ne*qe,yt+=ne*Dt,wt+=ne*Ut,bt+=ne*jt,$t+=ne*Nt,At+=ne*Lt,Et+=ne*Ft,Xe+=ne*Kt,Je+=ne*Vt,lt+=ne*Ht,ct+=ne*qt,gt+=ne*zt,St+=ne*Gt,It+=ne*Wt,Mt+=ne*Xt,Ot+=ne*Yt,ne=ke[15],yt+=ne*qe,wt+=ne*Dt,bt+=ne*Ut,$t+=ne*jt,At+=ne*Nt,Et+=ne*Lt,Xe+=ne*Ft,Je+=ne*Kt,lt+=ne*Vt,ct+=ne*Ht,gt+=ne*qt,St+=ne*zt,It+=ne*Gt,Mt+=ne*Wt,Ot+=ne*Xt,Pt+=ne*Yt,Te+=38*wt,Ae+=38*bt,Ce+=38*$t,Ne+=38*At,Ue+=38*Et,je+=38*Xe,Ke+=38*Je,He+=38*lt,ze+=38*ct,Ye+=38*gt,Qe+=38*St,st+=38*It,Ze+=38*Mt,et+=38*Ot,vt+=38*Pt,xe=1,ne=Te+xe+65535,xe=Math.floor(ne/65536),Te=ne-xe*65536,ne=Ae+xe+65535,xe=Math.floor(ne/65536),Ae=ne-xe*65536,ne=Ce+xe+65535,xe=Math.floor(ne/65536),Ce=ne-xe*65536,ne=Ne+xe+65535,xe=Math.floor(ne/65536),Ne=ne-xe*65536,ne=Ue+xe+65535,xe=Math.floor(ne/65536),Ue=ne-xe*65536,ne=je+xe+65535,xe=Math.floor(ne/65536),je=ne-xe*65536,ne=Ke+xe+65535,xe=Math.floor(ne/65536),Ke=ne-xe*65536,ne=He+xe+65535,xe=Math.floor(ne/65536),He=ne-xe*65536,ne=ze+xe+65535,xe=Math.floor(ne/65536),ze=ne-xe*65536,ne=Ye+xe+65535,xe=Math.floor(ne/65536),Ye=ne-xe*65536,ne=Qe+xe+65535,xe=Math.floor(ne/65536),Qe=ne-xe*65536,ne=st+xe+65535,xe=Math.floor(ne/65536),st=ne-xe*65536,ne=Ze+xe+65535,xe=Math.floor(ne/65536),Ze=ne-xe*65536,ne=et+xe+65535,xe=Math.floor(ne/65536),et=ne-xe*65536,ne=vt+xe+65535,xe=Math.floor(ne/65536),vt=ne-xe*65536,ne=yt+xe+65535,xe=Math.floor(ne/65536),yt=ne-xe*65536,Te+=xe-1+37*(xe-1),xe=1,ne=Te+xe+65535,xe=Math.floor(ne/65536),Te=ne-xe*65536,ne=Ae+xe+65535,xe=Math.floor(ne/65536),Ae=ne-xe*65536,ne=Ce+xe+65535,xe=Math.floor(ne/65536),Ce=ne-xe*65536,ne=Ne+xe+65535,xe=Math.floor(ne/65536),Ne=ne-xe*65536,ne=Ue+xe+65535,xe=Math.floor(ne/65536),Ue=ne-xe*65536,ne=je+xe+65535,xe=Math.floor(ne/65536),je=ne-xe*65536,ne=Ke+xe+65535,xe=Math.floor(ne/65536),Ke=ne-xe*65536,ne=He+xe+65535,xe=Math.floor(ne/65536),He=ne-xe*65536,ne=ze+xe+65535,xe=Math.floor(ne/65536),ze=ne-xe*65536,ne=Ye+xe+65535,xe=Math.floor(ne/65536),Ye=ne-xe*65536,ne=Qe+xe+65535,xe=Math.floor(ne/65536),Qe=ne-xe*65536,ne=st+xe+65535,xe=Math.floor(ne/65536),st=ne-xe*65536,ne=Ze+xe+65535,xe=Math.floor(ne/65536),Ze=ne-xe*65536,ne=et+xe+65535,xe=Math.floor(ne/65536),et=ne-xe*65536,ne=vt+xe+65535,xe=Math.floor(ne/65536),vt=ne-xe*65536,ne=yt+xe+65535,xe=Math.floor(ne/65536),yt=ne-xe*65536,Te+=xe-1+37*(xe-1),Ee[0]=Te,Ee[1]=Ae,Ee[2]=Ce,Ee[3]=Ne,Ee[4]=Ue,Ee[5]=je,Ee[6]=Ke,Ee[7]=He,Ee[8]=ze,Ee[9]=Ye,Ee[10]=Qe,Ee[11]=st,Ee[12]=Ze,Ee[13]=et,Ee[14]=vt,Ee[15]=yt}function fe(Ee,ke){ee(Ee,ke,ke)}function le(Ee,ke){var Pe=n(),ne;for(ne=0;ne<16;ne++)Pe[ne]=ke[ne];for(ne=253;ne>=0;ne--)fe(Pe,Pe),ne!==2&&ne!==4&&ee(Pe,Pe,ke);for(ne=0;ne<16;ne++)Ee[ne]=Pe[ne]}function ce(Ee,ke){var Pe=n(),ne;for(ne=0;ne<16;ne++)Pe[ne]=ke[ne];for(ne=250;ne>=0;ne--)fe(Pe,Pe),ne!==1&&ee(Pe,Pe,ke);for(ne=0;ne<16;ne++)Ee[ne]=Pe[ne]}function pe(Ee,ke,Pe){var ne=new Uint8Array(32),xe=new Float64Array(80),Te,Ae,Ce=n(),Ne=n(),Ue=n(),je=n(),Ke=n(),He=n();for(Ae=0;Ae<31;Ae++)ne[Ae]=ke[Ae];for(ne[31]=ke[31]&127|64,ne[0]&=248,S(xe,Pe),Ae=0;Ae<16;Ae++)Ne[Ae]=xe[Ae],je[Ae]=Ce[Ae]=Ue[Ae]=0;for(Ce[0]=je[0]=1,Ae=254;Ae>=0;--Ae)Te=ne[Ae>>>3]>>>(Ae&7)&1,z(Ce,Ne,Te),z(Ue,je,Te),F(Ke,Ce,Ue),ue(Ce,Ce,Ue),F(Ue,Ne,je),ue(Ne,Ne,je),fe(je,Ke),fe(He,Ce),ee(Ce,Ue,Ce),ee(Ue,Ne,Ke),F(Ke,Ce,Ue),ue(Ce,Ce,Ue),fe(Ne,Ce),ue(Ue,je,He),ee(Ce,Ue,m),F(Ce,Ce,je),ee(Ue,Ue,Ce),ee(Ce,je,He),ee(je,Ne,xe),fe(Ne,Ke),z(Ce,Ne,Te),z(Ue,je,Te);for(Ae=0;Ae<16;Ae++)xe[Ae+16]=Ce[Ae],xe[Ae+32]=Ue[Ae],xe[Ae+48]=Ne[Ae],xe[Ae+64]=je[Ae];var ze=xe.subarray(32),Ye=xe.subarray(16);return le(ze,ze),ee(Ye,Ye,ze),X(Ee,Ye),0}function se(Ee,ke){return pe(Ee,ke,l)}function de(Ee,ke){return a(ke,32),se(Ee,ke)}function re(Ee,ke,Pe){var ne=new Uint8Array(32);return pe(ne,Pe,ke),J(Ee,o,ne,Y)}var me=x,te=T;function ve(Ee,ke,Pe,ne,xe,Te){var Ae=new Uint8Array(32);return re(Ae,xe,Te),me(Ee,ke,Pe,ne,Ae)}function Se(Ee,ke,Pe,ne,xe,Te){var Ae=new Uint8Array(32);return re(Ae,xe,Te),te(Ee,ke,Pe,ne,Ae)}var be=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _e(Ee,ke,Pe,ne){for(var xe=new Int32Array(16),Te=new Int32Array(16),Ae,Ce,Ne,Ue,je,Ke,He,ze,Ye,Qe,st,Ze,et,vt,yt,wt,bt,$t,At,Et,Xe,Je,lt,ct,gt,St,It=Ee[0],Mt=Ee[1],Ot=Ee[2],Pt=Ee[3],qe=Ee[4],Dt=Ee[5],Ut=Ee[6],jt=Ee[7],Nt=ke[0],Lt=ke[1],Ft=ke[2],Kt=ke[3],Vt=ke[4],Ht=ke[5],qt=ke[6],zt=ke[7],Gt=0;ne>=128;){for(At=0;At<16;At++)Et=8*At+Gt,xe[At]=Pe[Et+0]<<24|Pe[Et+1]<<16|Pe[Et+2]<<8|Pe[Et+3],Te[At]=Pe[Et+4]<<24|Pe[Et+5]<<16|Pe[Et+6]<<8|Pe[Et+7];for(At=0;At<80;At++)if(Ae=It,Ce=Mt,Ne=Ot,Ue=Pt,je=qe,Ke=Dt,He=Ut,ze=jt,Ye=Nt,Qe=Lt,st=Ft,Ze=Kt,et=Vt,vt=Ht,yt=qt,wt=zt,Xe=jt,Je=zt,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=(qe>>>14|Vt<<32-14)^(qe>>>18|Vt<<32-18)^(Vt>>>41-32|qe<<32-(41-32)),Je=(Vt>>>14|qe<<32-14)^(Vt>>>18|qe<<32-18)^(qe>>>41-32|Vt<<32-(41-32)),lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,Xe=qe&Dt^~qe&Ut,Je=Vt&Ht^~Vt&qt,lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,Xe=be[At*2],Je=be[At*2+1],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,Xe=xe[At%16],Je=Te[At%16],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,bt=gt&65535|St<<16,$t=lt&65535|ct<<16,Xe=bt,Je=$t,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=(It>>>28|Nt<<32-28)^(Nt>>>34-32|It<<32-(34-32))^(Nt>>>39-32|It<<32-(39-32)),Je=(Nt>>>28|It<<32-28)^(It>>>34-32|Nt<<32-(34-32))^(It>>>39-32|Nt<<32-(39-32)),lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,Xe=It&Mt^It&Ot^Mt&Ot,Je=Nt&Lt^Nt&Ft^Lt&Ft,lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,ze=gt&65535|St<<16,wt=lt&65535|ct<<16,Xe=Ue,Je=Ze,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=bt,Je=$t,lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,Ue=gt&65535|St<<16,Ze=lt&65535|ct<<16,Mt=Ae,Ot=Ce,Pt=Ne,qe=Ue,Dt=je,Ut=Ke,jt=He,It=ze,Lt=Ye,Ft=Qe,Kt=st,Vt=Ze,Ht=et,qt=vt,zt=yt,Nt=wt,At%16===15)for(Et=0;Et<16;Et++)Xe=xe[Et],Je=Te[Et],lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=xe[(Et+9)%16],Je=Te[(Et+9)%16],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,bt=xe[(Et+1)%16],$t=Te[(Et+1)%16],Xe=(bt>>>1|$t<<32-1)^(bt>>>8|$t<<32-8)^bt>>>7,Je=($t>>>1|bt<<32-1)^($t>>>8|bt<<32-8)^($t>>>7|bt<<32-7),lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,bt=xe[(Et+14)%16],$t=Te[(Et+14)%16],Xe=(bt>>>19|$t<<32-19)^($t>>>61-32|bt<<32-(61-32))^bt>>>6,Je=($t>>>19|bt<<32-19)^(bt>>>61-32|$t<<32-(61-32))^($t>>>6|bt<<32-6),lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,xe[Et]=gt&65535|St<<16,Te[Et]=lt&65535|ct<<16;Xe=It,Je=Nt,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=Ee[0],Je=ke[0],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,Ee[0]=It=gt&65535|St<<16,ke[0]=Nt=lt&65535|ct<<16,Xe=Mt,Je=Lt,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=Ee[1],Je=ke[1],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,Ee[1]=Mt=gt&65535|St<<16,ke[1]=Lt=lt&65535|ct<<16,Xe=Ot,Je=Ft,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=Ee[2],Je=ke[2],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,Ee[2]=Ot=gt&65535|St<<16,ke[2]=Ft=lt&65535|ct<<16,Xe=Pt,Je=Kt,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=Ee[3],Je=ke[3],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,Ee[3]=Pt=gt&65535|St<<16,ke[3]=Kt=lt&65535|ct<<16,Xe=qe,Je=Vt,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=Ee[4],Je=ke[4],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,Ee[4]=qe=gt&65535|St<<16,ke[4]=Vt=lt&65535|ct<<16,Xe=Dt,Je=Ht,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=Ee[5],Je=ke[5],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,Ee[5]=Dt=gt&65535|St<<16,ke[5]=Ht=lt&65535|ct<<16,Xe=Ut,Je=qt,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=Ee[6],Je=ke[6],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,Ee[6]=Ut=gt&65535|St<<16,ke[6]=qt=lt&65535|ct<<16,Xe=jt,Je=zt,lt=Je&65535,ct=Je>>>16,gt=Xe&65535,St=Xe>>>16,Xe=Ee[7],Je=ke[7],lt+=Je&65535,ct+=Je>>>16,gt+=Xe&65535,St+=Xe>>>16,ct+=lt>>>16,gt+=ct>>>16,St+=gt>>>16,Ee[7]=jt=gt&65535|St<<16,ke[7]=zt=lt&65535|ct<<16,Gt+=128,ne-=128}return ne}function ye(Ee,ke,Pe){var ne=new Int32Array(8),xe=new Int32Array(8),Te=new Uint8Array(256),Ae,Ce=Pe;for(ne[0]=1779033703,ne[1]=3144134277,ne[2]=1013904242,ne[3]=2773480762,ne[4]=1359893119,ne[5]=2600822924,ne[6]=528734635,ne[7]=1541459225,xe[0]=4089235720,xe[1]=2227873595,xe[2]=4271175723,xe[3]=1595750129,xe[4]=2917565137,xe[5]=725511199,xe[6]=4215389547,xe[7]=327033209,_e(ne,xe,ke,Pe),Pe%=128,Ae=0;Ae<Pe;Ae++)Te[Ae]=ke[Ce-Pe+Ae];for(Te[Pe]=128,Pe=256-128*(Pe<112?1:0),Te[Pe-9]=0,A(Te,Pe-8,Ce/536870912|0,Ce<<3),_e(ne,xe,Te,Pe),Ae=0;Ae<8;Ae++)A(Ee,8*Ae,ne[Ae],xe[Ae]);return 0}function $e(Ee,ke){var Pe=n(),ne=n(),xe=n(),Te=n(),Ae=n(),Ce=n(),Ne=n(),Ue=n(),je=n();ue(Pe,Ee[1],Ee[0]),ue(je,ke[1],ke[0]),ee(Pe,Pe,je),F(ne,Ee[0],Ee[1]),F(je,ke[0],ke[1]),ee(ne,ne,je),ee(xe,Ee[3],ke[3]),ee(xe,xe,b),ee(Te,Ee[2],ke[2]),F(Te,Te,Te),ue(Ae,ne,Pe),ue(Ce,Te,xe),F(Ne,Te,xe),F(Ue,ne,Pe),ee(Ee[0],Ae,Ce),ee(Ee[1],Ue,Ne),ee(Ee[2],Ne,Ce),ee(Ee[3],Ae,Ue)}function Ie(Ee,ke,Pe){var ne;for(ne=0;ne<4;ne++)z(Ee[ne],ke[ne],Pe)}function Be(Ee,ke){var Pe=n(),ne=n(),xe=n();le(xe,ke[2]),ee(Pe,ke[0],xe),ee(ne,ke[1],xe),X(Ee,ne),Ee[31]^=P(Pe)<<7}function Me(Ee,ke,Pe){var ne,xe;for(M(Ee[0],u),M(Ee[1],d),M(Ee[2],d),M(Ee[3],u),xe=255;xe>=0;--xe)ne=Pe[xe/8|0]>>(xe&7)&1,Ie(Ee,ke,ne),$e(ke,Ee),$e(Ee,Ee),Ie(Ee,ke,ne)}function Fe(Ee,ke){var Pe=[n(),n(),n(),n()];M(Pe[0],_),M(Pe[1],w),M(Pe[2],d),ee(Pe[3],_,w),Me(Ee,Pe,ke)}function Ve(Ee,ke,Pe){var ne=new Uint8Array(64),xe=[n(),n(),n(),n()],Te;for(Pe||a(ke,32),ye(ne,ke,32),ne[0]&=248,ne[31]&=127,ne[31]|=64,Fe(xe,ne),Be(Ee,xe),Te=0;Te<32;Te++)ke[Te+32]=Ee[Te];return 0}var Oe=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function ge(Ee,ke){var Pe,ne,xe,Te;for(ne=63;ne>=32;--ne){for(Pe=0,xe=ne-32,Te=ne-12;xe<Te;++xe)ke[xe]+=Pe-16*ke[ne]*Oe[xe-(ne-32)],Pe=Math.floor((ke[xe]+128)/256),ke[xe]-=Pe*256;ke[xe]+=Pe,ke[ne]=0}for(Pe=0,xe=0;xe<32;xe++)ke[xe]+=Pe-(ke[31]>>4)*Oe[xe],Pe=ke[xe]>>8,ke[xe]&=255;for(xe=0;xe<32;xe++)ke[xe]-=Pe*Oe[xe];for(ne=0;ne<32;ne++)ke[ne+1]+=ke[ne]>>8,Ee[ne]=ke[ne]&255}function ie(Ee){var ke=new Float64Array(64),Pe;for(Pe=0;Pe<64;Pe++)ke[Pe]=Ee[Pe];for(Pe=0;Pe<64;Pe++)Ee[Pe]=0;ge(Ee,ke)}function he(Ee,ke,Pe,ne){var xe=new Uint8Array(64),Te=new Uint8Array(64),Ae=new Uint8Array(64),Ce,Ne,Ue=new Float64Array(64),je=[n(),n(),n(),n()];ye(xe,ne,32),xe[0]&=248,xe[31]&=127,xe[31]|=64;var Ke=Pe+64;for(Ce=0;Ce<Pe;Ce++)Ee[64+Ce]=ke[Ce];for(Ce=0;Ce<32;Ce++)Ee[32+Ce]=xe[32+Ce];for(ye(Ae,Ee.subarray(32),Pe+32),ie(Ae),Fe(je,Ae),Be(Ee,je),Ce=32;Ce<64;Ce++)Ee[Ce]=ne[Ce];for(ye(Te,Ee,Pe+64),ie(Te),Ce=0;Ce<64;Ce++)Ue[Ce]=0;for(Ce=0;Ce<32;Ce++)Ue[Ce]=Ae[Ce];for(Ce=0;Ce<32;Ce++)for(Ne=0;Ne<32;Ne++)Ue[Ce+Ne]+=Te[Ce]*xe[Ne];return ge(Ee.subarray(32),Ue),Ke}function we(Ee,ke){var Pe=n(),ne=n(),xe=n(),Te=n(),Ae=n(),Ce=n(),Ne=n();return M(Ee[2],d),S(Ee[1],ke),fe(xe,Ee[1]),ee(Te,xe,y),ue(xe,xe,Ee[2]),F(Te,Ee[2],Te),fe(Ae,Te),fe(Ce,Ae),ee(Ne,Ce,Ae),ee(Pe,Ne,xe),ee(Pe,Pe,Te),ce(Pe,Pe),ee(Pe,Pe,xe),ee(Pe,Pe,Te),ee(Pe,Pe,Te),ee(Ee[0],Pe,Te),fe(ne,Ee[0]),ee(ne,ne,Te),H(ne,xe)&&ee(Ee[0],Ee[0],E),fe(ne,Ee[0]),ee(ne,ne,Te),H(ne,xe)?-1:(P(Ee[0])===ke[31]>>7&&ue(Ee[0],u,Ee[0]),ee(Ee[3],Ee[0],Ee[1]),0)}function Re(Ee,ke,Pe,ne){var xe,Te=new Uint8Array(32),Ae=new Uint8Array(64),Ce=[n(),n(),n(),n()],Ne=[n(),n(),n(),n()];if(Pe<64||we(Ne,ne))return-1;for(xe=0;xe<Pe;xe++)Ee[xe]=ke[xe];for(xe=0;xe<32;xe++)Ee[xe+32]=ne[xe];if(ye(Ae,Ee,Pe),ie(Ae),Me(Ce,Ne,Ae),Fe(Ne,ke.subarray(32)),$e(Ce,Ne),Be(Te,Ce),Pe-=64,B(ke,0,Te,0)){for(xe=0;xe<Pe;xe++)Ee[xe]=0;return-1}for(xe=0;xe<Pe;xe++)Ee[xe]=ke[xe+64];return Pe}var De=32,Le=24,tt=32,We=16,Ge=32,_t=32,rt=32,ot=32,Rt=32,xt=Le,ht=tt,Tt=We,dt=64,it=32,Ct=64,pt=32,at=64;e.lowlevel={crypto_core_hsalsa20:J,crypto_stream_xor:oe,crypto_stream:Q,crypto_stream_salsa20_xor:L,crypto_stream_salsa20:Z,crypto_onetimeauth:U,crypto_onetimeauth_verify:I,crypto_verify_16:k,crypto_verify_32:B,crypto_secretbox:x,crypto_secretbox_open:T,crypto_scalarmult:pe,crypto_scalarmult_base:se,crypto_box_beforenm:re,crypto_box_afternm:me,crypto_box:ve,crypto_box_open:Se,crypto_box_keypair:de,crypto_hash:ye,crypto_sign:he,crypto_sign_keypair:Ve,crypto_sign_open:Re,crypto_secretbox_KEYBYTES:De,crypto_secretbox_NONCEBYTES:Le,crypto_secretbox_ZEROBYTES:tt,crypto_secretbox_BOXZEROBYTES:We,crypto_scalarmult_BYTES:Ge,crypto_scalarmult_SCALARBYTES:_t,crypto_box_PUBLICKEYBYTES:rt,crypto_box_SECRETKEYBYTES:ot,crypto_box_BEFORENMBYTES:Rt,crypto_box_NONCEBYTES:xt,crypto_box_ZEROBYTES:ht,crypto_box_BOXZEROBYTES:Tt,crypto_sign_BYTES:dt,crypto_sign_PUBLICKEYBYTES:it,crypto_sign_SECRETKEYBYTES:Ct,crypto_sign_SEEDBYTES:pt,crypto_hash_BYTES:at,gf:n,D:y,L:Oe,pack25519:X,unpack25519:S,M:ee,A:F,S:fe,Z:ue,pow2523:ce,add:$e,set25519:M,modL:ge,scalarmult:Me,scalarbase:Fe};function kt(Ee,ke){if(Ee.length!==De)throw new Error("bad key size");if(ke.length!==Le)throw new Error("bad nonce size")}function mt(Ee,ke){if(Ee.length!==rt)throw new Error("bad public key size");if(ke.length!==ot)throw new Error("bad secret key size")}function nt(){for(var Ee=0;Ee<arguments.length;Ee++)if(!(arguments[Ee]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function Bt(Ee){for(var ke=0;ke<Ee.length;ke++)Ee[ke]=0}e.randomBytes=function(Ee){var ke=new Uint8Array(Ee);return a(ke,Ee),ke},e.secretbox=function(Ee,ke,Pe){nt(Ee,ke,Pe),kt(Pe,ke);for(var ne=new Uint8Array(tt+Ee.length),xe=new Uint8Array(ne.length),Te=0;Te<Ee.length;Te++)ne[Te+tt]=Ee[Te];return x(xe,ne,ne.length,ke,Pe),xe.subarray(We)},e.secretbox.open=function(Ee,ke,Pe){nt(Ee,ke,Pe),kt(Pe,ke);for(var ne=new Uint8Array(We+Ee.length),xe=new Uint8Array(ne.length),Te=0;Te<Ee.length;Te++)ne[Te+We]=Ee[Te];return ne.length<32||T(xe,ne,ne.length,ke,Pe)!==0?null:xe.subarray(tt)},e.secretbox.keyLength=De,e.secretbox.nonceLength=Le,e.secretbox.overheadLength=We,e.scalarMult=function(Ee,ke){if(nt(Ee,ke),Ee.length!==_t)throw new Error("bad n size");if(ke.length!==Ge)throw new Error("bad p size");var Pe=new Uint8Array(Ge);return pe(Pe,Ee,ke),Pe},e.scalarMult.base=function(Ee){if(nt(Ee),Ee.length!==_t)throw new Error("bad n size");var ke=new Uint8Array(Ge);return se(ke,Ee),ke},e.scalarMult.scalarLength=_t,e.scalarMult.groupElementLength=Ge,e.box=function(Ee,ke,Pe,ne){var xe=e.box.before(Pe,ne);return e.secretbox(Ee,ke,xe)},e.box.before=function(Ee,ke){nt(Ee,ke),mt(Ee,ke);var Pe=new Uint8Array(Rt);return re(Pe,Ee,ke),Pe},e.box.after=e.secretbox,e.box.open=function(Ee,ke,Pe,ne){var xe=e.box.before(Pe,ne);return e.secretbox.open(Ee,ke,xe)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var Ee=new Uint8Array(rt),ke=new Uint8Array(ot);return de(Ee,ke),{publicKey:Ee,secretKey:ke}},e.box.keyPair.fromSecretKey=function(Ee){if(nt(Ee),Ee.length!==ot)throw new Error("bad secret key size");var ke=new Uint8Array(rt);return se(ke,Ee),{publicKey:ke,secretKey:new Uint8Array(Ee)}},e.box.publicKeyLength=rt,e.box.secretKeyLength=ot,e.box.sharedKeyLength=Rt,e.box.nonceLength=xt,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(Ee,ke){if(nt(Ee,ke),ke.length!==Ct)throw new Error("bad secret key size");var Pe=new Uint8Array(dt+Ee.length);return he(Pe,Ee,Ee.length,ke),Pe},e.sign.open=function(Ee,ke){if(nt(Ee,ke),ke.length!==it)throw new Error("bad public key size");var Pe=new Uint8Array(Ee.length),ne=Re(Pe,Ee,Ee.length,ke);if(ne<0)return null;for(var xe=new Uint8Array(ne),Te=0;Te<xe.length;Te++)xe[Te]=Pe[Te];return xe},e.sign.detached=function(Ee,ke){for(var Pe=e.sign(Ee,ke),ne=new Uint8Array(dt),xe=0;xe<ne.length;xe++)ne[xe]=Pe[xe];return ne},e.sign.detached.verify=function(Ee,ke,Pe){if(nt(Ee,ke,Pe),ke.length!==dt)throw new Error("bad signature size");if(Pe.length!==it)throw new Error("bad public key size");var ne=new Uint8Array(dt+Ee.length),xe=new Uint8Array(dt+Ee.length),Te;for(Te=0;Te<dt;Te++)ne[Te]=ke[Te];for(Te=0;Te<Ee.length;Te++)ne[Te+dt]=Ee[Te];return Re(xe,ne,ne.length,Pe)>=0},e.sign.keyPair=function(){var Ee=new Uint8Array(it),ke=new Uint8Array(Ct);return Ve(Ee,ke),{publicKey:Ee,secretKey:ke}},e.sign.keyPair.fromSecretKey=function(Ee){if(nt(Ee),Ee.length!==Ct)throw new Error("bad secret key size");for(var ke=new Uint8Array(it),Pe=0;Pe<ke.length;Pe++)ke[Pe]=Ee[32+Pe];return{publicKey:ke,secretKey:new Uint8Array(Ee)}},e.sign.keyPair.fromSeed=function(Ee){if(nt(Ee),Ee.length!==pt)throw new Error("bad seed size");for(var ke=new Uint8Array(it),Pe=new Uint8Array(Ct),ne=0;ne<32;ne++)Pe[ne]=Ee[ne];return Ve(ke,Pe,!0),{publicKey:ke,secretKey:Pe}},e.sign.publicKeyLength=it,e.sign.secretKeyLength=Ct,e.sign.seedLength=pt,e.sign.signatureLength=dt,e.hash=function(Ee){nt(Ee);var ke=new Uint8Array(at);return ye(ke,Ee,Ee.length),ke},e.hash.hashLength=at,e.verify=function(Ee,ke){return nt(Ee,ke),Ee.length===0||ke.length===0||Ee.length!==ke.length?!1:C(Ee,0,ke,0,Ee.length)===0},e.setPRNG=function(Ee){a=Ee},function(){var Ee=typeof self<"u"?self.crypto||self.msCrypto:null;if(Ee&&Ee.getRandomValues){var ke=65536;e.setPRNG(function(Pe,ne){var xe,Te=new Uint8Array(ne);for(xe=0;xe<ne;xe+=ke)Ee.getRandomValues(Te.subarray(xe,xe+Math.min(ne-xe,ke)));for(xe=0;xe<ne;xe++)Pe[xe]=Te[xe];Bt(Te)})}else typeof commonjsRequire$1<"u"&&(Ee=requireCryptoBrowserify(),Ee&&Ee.randomBytes&&e.setPRNG(function(Pe,ne){var xe,Te=Ee.randomBytes(ne);for(xe=0;xe<ne;xe++)Pe[xe]=Te[xe];Bt(Te)}))}()})(t.exports?t.exports:self.nacl=self.nacl||{})})(naclFast);const nacl=naclFastExports;var jsonify={},parse$1,hasRequiredParse;function requireParse(){if(hasRequiredParse)return parse$1;hasRequiredParse=1;var t,e,n={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},a;function o(E){throw{name:"SyntaxError",message:E,at:t,text:a}}function l(E){return E&&E!==e&&o("Expected '"+E+"' instead of '"+e+"'"),e=a.charAt(t),t+=1,e}function u(){var E,A="";for(e==="-"&&(A="-",l("-"));e>="0"&&e<="9";)A+=e,l();if(e===".")for(A+=".";l()&&e>="0"&&e<="9";)A+=e;if(e==="e"||e==="E")for(A+=e,l(),(e==="-"||e==="+")&&(A+=e,l());e>="0"&&e<="9";)A+=e,l();return E=Number(A),isFinite(E)||o("Bad number"),E}function d(){var E,A,C="",k;if(e==='"')for(;l();){if(e==='"')return l(),C;if(e==="\\")if(l(),e==="u"){for(k=0,A=0;A<4&&(E=parseInt(l(),16),!!isFinite(E));A+=1)k=k*16+E;C+=String.fromCharCode(k)}else if(typeof n[e]=="string")C+=n[e];else break;else C+=e}o("Bad string")}function m(){for(;e&&e<=" ";)l()}function y(){switch(e){case"t":return l("t"),l("r"),l("u"),l("e"),!0;case"f":return l("f"),l("a"),l("l"),l("s"),l("e"),!1;case"n":return l("n"),l("u"),l("l"),l("l"),null;default:o("Unexpected '"+e+"'")}}function b(){var E=[];if(e==="["){if(l("["),m(),e==="]")return l("]"),E;for(;e;){if(E.push(w()),m(),e==="]")return l("]"),E;l(","),m()}}o("Bad array")}function _(){var E,A={};if(e==="{"){if(l("{"),m(),e==="}")return l("}"),A;for(;e;){if(E=d(),m(),l(":"),Object.prototype.hasOwnProperty.call(A,E)&&o('Duplicate key "'+E+'"'),A[E]=w(),m(),e==="}")return l("}"),A;l(","),m()}}o("Bad object")}function w(){switch(m(),e){case"{":return _();case"[":return b();case'"':return d();case"-":return u();default:return e>="0"&&e<="9"?u():y()}}return parse$1=function(E,A){var C;return a=E,t=0,e=" ",C=w(),m(),e&&o("Syntax error"),typeof A=="function"?function k(B,D){var q,j,J=B[D];if(J&&typeof J=="object")for(q in w)Object.prototype.hasOwnProperty.call(J,q)&&(j=k(J,q),typeof j>"u"?delete J[q]:J[q]=j);return A.call(B,D,J)}({"":C},""):C},parse$1}var stringify,hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify;hasRequiredStringify=1;var t=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e,n,a={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},o;function l(d){return t.lastIndex=0,t.test(d)?'"'+d.replace(t,function(m){var y=a[m];return typeof y=="string"?y:"\\u"+("0000"+m.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+d+'"'}function u(d,m){var y,b,_,w,E=e,A,C=m[d];switch(C&&typeof C=="object"&&typeof C.toJSON=="function"&&(C=C.toJSON(d)),typeof o=="function"&&(C=o.call(m,d,C)),typeof C){case"string":return l(C);case"number":return isFinite(C)?String(C):"null";case"boolean":case"null":return String(C);case"object":if(!C)return"null";if(e+=n,A=[],Object.prototype.toString.apply(C)==="[object Array]"){for(w=C.length,y=0;y<w;y+=1)A[y]=u(y,C)||"null";return _=A.length===0?"[]":e?`[
`+e+A.join(`,
`+e)+`
`+E+"]":"["+A.join(",")+"]",e=E,_}if(o&&typeof o=="object")for(w=o.length,y=0;y<w;y+=1)b=o[y],typeof b=="string"&&(_=u(b,C),_&&A.push(l(b)+(e?": ":":")+_));else for(b in C)Object.prototype.hasOwnProperty.call(C,b)&&(_=u(b,C),_&&A.push(l(b)+(e?": ":":")+_));return _=A.length===0?"{}":e?`{
`+e+A.join(`,
`+e)+`
`+E+"}":"{"+A.join(",")+"}",e=E,_}}return stringify=function(d,m,y){var b;if(e="",n="",typeof y=="number")for(b=0;b<y;b+=1)n+=" ";else typeof y=="string"&&(n=y);if(o=m,m&&typeof m!="function"&&(typeof m!="object"||typeof m.length!="number"))throw new Error("JSON.stringify");return u("",{"":d})},stringify}var hasRequiredJsonify;function requireJsonify(){return hasRequiredJsonify||(hasRequiredJsonify=1,jsonify.parse=requireParse(),jsonify.stringify=requireStringify()),jsonify}var json=typeof JSON<"u"?JSON:requireJsonify(),isArray$3=Array.isArray||function(t){return{}.toString.call(t)==="[object Array]"},objectKeys$1=Object.keys||function(t){var e=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var a in t)e.call(t,a)&&n.push(a);return n},jsonStableStringify=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var n=e.space||"";typeof n=="number"&&(n=Array(n+1).join(" "));var a=typeof e.cycles=="boolean"?e.cycles:!1,o=e.replacer||function(d,m){return m},l=e.cmp&&function(d){return function(m){return function(y,b){var _={key:y,value:m[y]},w={key:b,value:m[b]};return d(_,w)}}}(e.cmp),u=[];return function d(m,y,b,_){var w=n?`
`+new Array(_+1).join(n):"",E=n?": ":":";if(b&&b.toJSON&&typeof b.toJSON=="function"&&(b=b.toJSON()),b=o.call(m,y,b),b!==void 0){if(typeof b!="object"||b===null)return json.stringify(b);if(isArray$3(b)){for(var B=[],A=0;A<b.length;A++){var C=d(b,A,b[A],_+1)||json.stringify(null);B.push(w+n+C)}return"["+B.join(",")+w+"]"}if(u.indexOf(b)!==-1){if(a)return json.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}else u.push(b);for(var k=objectKeys$1(b).sort(l&&l(b)),B=[],A=0;A<k.length;A++){var y=k[A],D=d(b,y,b[y],_+1);if(D){var q=json.stringify(y)+E+D;B.push(w+n+q)}}return u.splice(u.indexOf(b),1),"{"+B.join(",")+w+"}"}}({"":t},"",t,0)},nonceLength=nacl.box.nonceLength,newNonce=function t(){return nacl.randomBytes(nonceLength)},keypairToBase64=function t(e){return{publicKey:encode_1$3(e.publicKey),secretKey:encode_1$3(e.secretKey)}},keyToBytes=function t(e,n){n===void 0&&(n="base64");var a=n==="base64"?decode_1$1:encode_1$2;return typeof e=="string"?a(e):e},utf8=utf8$1,payloadToBytes=function t(e){return typeof e=="string"?utf8.encode(e):ArrayBuffer.isView(e)?e:utf8.encode(jsonStableStringify(e))};function keyPair(t){var e=t?nacl.box.keyPair.fromSecretKey(keyToBytes(t)):nacl.box.keyPair();return keypairToBase64(e)}function encrypt(t){var e=t.secret,n=t.recipientPublicKey,a=t.senderSecretKey,o=newNonce(),l=payloadToBytes(e),u;if(a===void 0){var d=keyPair();a=d.secretKey,u=d.publicKey}else u=void 0;var m=nacl.box(l,o,keyToBytes(n),keyToBytes(a)),y=browser$3.encode({nonce:o,message:m,senderPublicKey:u});return encode_1$3(y)}function decrypt(t){var e,n=t.cipher,a=t.senderPublicKey,o=t.recipientSecretKey,l=keyToBytes(n),u=browser$3.decode(l),d=u.nonce,m=u.message;a=(e=a)!=null?e:u.senderPublicKey;var y=nacl.box.open(m,d,keyToBytes(a),keyToBytes(o));if(!y)throw new Error("Could not decrypt message");return decode_1(y)}var asymmetric={keyPair,encrypt,decrypt},browserExports$1={},browser$2={get exports(){return browserExports$1},set exports(t){browserExports$1=t}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var t=1e3,e=t*60,n=e*60,a=n*24,o=a*7,l=a*365.25;ms=function(b,_){_=_||{};var w=typeof b;if(w==="string"&&b.length>0)return u(b);if(w==="number"&&isFinite(b))return _.long?m(b):d(b);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(b))};function u(b){if(b=String(b),!(b.length>100)){var _=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(b);if(_){var w=parseFloat(_[1]),E=(_[2]||"ms").toLowerCase();switch(E){case"years":case"year":case"yrs":case"yr":case"y":return w*l;case"weeks":case"week":case"w":return w*o;case"days":case"day":case"d":return w*a;case"hours":case"hour":case"hrs":case"hr":case"h":return w*n;case"minutes":case"minute":case"mins":case"min":case"m":return w*e;case"seconds":case"second":case"secs":case"sec":case"s":return w*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return w;default:return}}}}function d(b){var _=Math.abs(b);return _>=a?Math.round(b/a)+"d":_>=n?Math.round(b/n)+"h":_>=e?Math.round(b/e)+"m":_>=t?Math.round(b/t)+"s":b+"ms"}function m(b){var _=Math.abs(b);return _>=a?y(b,_,a,"day"):_>=n?y(b,_,n,"hour"):_>=e?y(b,_,e,"minute"):_>=t?y(b,_,t,"second"):b+" ms"}function y(b,_,w,E){var A=_>=w*1.5;return Math.round(b/w)+" "+E+(A?"s":"")}return ms}function setup(t){n.debug=n,n.default=n,n.coerce=m,n.disable=l,n.enable=o,n.enabled=u,n.humanize=requireMs(),n.destroy=y,Object.keys(t).forEach(b=>{n[b]=t[b]}),n.names=[],n.skips=[],n.formatters={};function e(b){let _=0;for(let w=0;w<b.length;w++)_=(_<<5)-_+b.charCodeAt(w),_|=0;return n.colors[Math.abs(_)%n.colors.length]}n.selectColor=e;function n(b){let _,w=null,E,A;function C(...k){if(!C.enabled)return;const B=C,D=Number(new Date),q=D-(_||D);B.diff=q,B.prev=_,B.curr=D,_=D,k[0]=n.coerce(k[0]),typeof k[0]!="string"&&k.unshift("%O");let j=0;k[0]=k[0].replace(/%([a-zA-Z%])/g,(Y,L)=>{if(Y==="%%")return"%";j++;const Z=n.formatters[L];if(typeof Z=="function"){const Q=k[j];Y=Z.call(B,Q),k.splice(j,1),j--}return Y}),n.formatArgs.call(B,k),(B.log||n.log).apply(B,k)}return C.namespace=b,C.useColors=n.useColors(),C.color=n.selectColor(b),C.extend=a,C.destroy=n.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(E!==n.namespaces&&(E=n.namespaces,A=n.enabled(b)),A),set:k=>{w=k}}),typeof n.init=="function"&&n.init(C),C}function a(b,_){const w=n(this.namespace+(typeof _>"u"?":":_)+b);return w.log=this.log,w}function o(b){n.save(b),n.namespaces=b,n.names=[],n.skips=[];let _;const w=(typeof b=="string"?b:"").split(/[\s,]+/),E=w.length;for(_=0;_<E;_++)w[_]&&(b=w[_].replace(/\*/g,".*?"),b[0]==="-"?n.skips.push(new RegExp("^"+b.slice(1)+"$")):n.names.push(new RegExp("^"+b+"$")))}function l(){const b=[...n.names.map(d),...n.skips.map(d).map(_=>"-"+_)].join(",");return n.enable(""),b}function u(b){if(b[b.length-1]==="*")return!0;let _,w;for(_=0,w=n.skips.length;_<w;_++)if(n.skips[_].test(b))return!1;for(_=0,w=n.names.length;_<w;_++)if(n.names[_].test(b))return!0;return!1}function d(b){return b.toString().substring(2,b.toString().length-2).replace(/\.\*\?$/,"*")}function m(b){return b instanceof Error?b.stack||b.message:b}function y(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}var common$1=setup;(function(t,e){e.formatArgs=a,e.save=o,e.load=l,e.useColors=n,e.storage=u(),e.destroy=(()=>{let m=!1;return()=>{m||(m=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(m){if(m[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+m[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const y="color: "+this.color;m.splice(1,0,y,"color: inherit");let b=0,_=0;m[0].replace(/%[a-zA-Z%]/g,w=>{w!=="%%"&&(b++,w==="%c"&&(_=b))}),m.splice(_,0,y)}e.log=console.debug||console.log||(()=>{});function o(m){try{m?e.storage.setItem("debug",m):e.storage.removeItem("debug")}catch{}}function l(){let m;try{m=e.storage.getItem("debug")}catch{}return!m&&typeof browser$1$1<"u"&&"env"in browser$1$1&&(m={}.DEBUG),m}function u(){try{return localStorage}catch{}}t.exports=common$1(e);const{formatters:d}=t.exports;d.j=function(m){try{return JSON.stringify(m)}catch(y){return"[UnexpectedJSONParseError]: "+y.message}}})(browser$2,browserExports$1);const debug=browserExports$1;var srcExports$1={},src$3={get exports(){return srcExports$1},set exports(t){srcExports$1=t}};function memoize(t,e){var n=e&&e.cache?e.cache:cacheDefault,a=e&&e.serializer?e.serializer:serializerDefault,o=e&&e.strategy?e.strategy:strategyDefault;return o(t,{cache:n,serializer:a})}function isPrimitive(t){return t==null||typeof t=="number"||typeof t=="boolean"}function monadic(t,e,n,a){var o=isPrimitive(a)?a:n(a),l=e.get(o);return typeof l>"u"&&(l=t.call(this,a),e.set(o,l)),l}function variadic(t,e,n){var a=Array.prototype.slice.call(arguments,3),o=n(a),l=e.get(o);return typeof l>"u"&&(l=t.apply(this,a),e.set(o,l)),l}function assemble(t,e,n,a,o){return n.bind(e,t,a,o)}function strategyDefault(t,e){var n=t.length===1?monadic:variadic;return assemble(t,this,n,e.cache.create(),e.serializer)}function strategyVariadic(t,e){var n=variadic;return assemble(t,this,n,e.cache.create(),e.serializer)}function strategyMonadic(t,e){var n=monadic;return assemble(t,this,n,e.cache.create(),e.serializer)}function serializerDefault(){return JSON.stringify(arguments)}function ObjectWithoutPrototypeCache(){this.cache=Object.create(null)}ObjectWithoutPrototypeCache.prototype.has=function(t){return t in this.cache};ObjectWithoutPrototypeCache.prototype.get=function(t){return this.cache[t]};ObjectWithoutPrototypeCache.prototype.set=function(t,e){this.cache[t]=e};var cacheDefault={create:function t(){return new ObjectWithoutPrototypeCache}};src$3.exports=memoize;srcExports$1.strategies={variadic:strategyVariadic,monadic:strategyMonadic};function compare(t,e){if(t===e)return 0;for(var n=t.length,a=e.length,o=0,l=Math.min(n,a);o<l;++o)if(t[o]!==e[o]){n=t[o],a=e[o];break}return n<a?-1:a<n?1:0}var hasOwn$1=Object.prototype.hasOwnProperty,objectKeys=Object.keys||function(t){var e=[];for(var n in t)hasOwn$1.call(t,n)&&e.push(n);return e},pSlice=Array.prototype.slice,_functionsHaveNames;function functionsHaveNames(){return typeof _functionsHaveNames<"u"?_functionsHaveNames:_functionsHaveNames=function(){return function(){}.name==="foo"}()}function pToString(t){return Object.prototype.toString.call(t)}function isView(t){return buffer$3.isBuffer(t)||typeof global$1.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t?!!(t instanceof DataView||t.buffer&&t.buffer instanceof ArrayBuffer):!1}function assert(t,e){t||fail(t,!0,e,"==",ok)}var regex=/\s*function\s+([^\(\s]*)\s*/;function getName(t){if(util$9.isFunction(t)){if(functionsHaveNames())return t.name;var e=t.toString(),n=e.match(regex);return n&&n[1]}}assert.AssertionError=AssertionError;function AssertionError(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=getMessage(this),this.generatedMessage=!0);var e=t.stackStartFunction||fail;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var n=new Error;if(n.stack){var a=n.stack,o=getName(e),l=a.indexOf(`
`+o);if(l>=0){var u=a.indexOf(`
`,l+1);a=a.substring(u+1)}this.stack=a}}}util$9.inherits(AssertionError,Error);function truncate(t,e){return typeof t=="string"?t.length<e?t:t.slice(0,e):t}function inspect$1(t){if(functionsHaveNames()||!util$9.isFunction(t))return util$9.inspect(t);var e=getName(t),n=e?": "+e:"";return"[Function"+n+"]"}function getMessage(t){return truncate(inspect$1(t.actual),128)+" "+t.operator+" "+truncate(inspect$1(t.expected),128)}function fail(t,e,n,a,o){throw new AssertionError({message:n,actual:t,expected:e,operator:a,stackStartFunction:o})}assert.fail=fail;function ok(t,e){t||fail(t,!0,e,"==",ok)}assert.ok=ok;assert.equal=equal;function equal(t,e,n){t!=e&&fail(t,e,n,"==",equal)}assert.notEqual=notEqual;function notEqual(t,e,n){t==e&&fail(t,e,n,"!=",notEqual)}assert.deepEqual=deepEqual;function deepEqual(t,e,n){_deepEqual(t,e,!1)||fail(t,e,n,"deepEqual",deepEqual)}assert.deepStrictEqual=deepStrictEqual;function deepStrictEqual(t,e,n){_deepEqual(t,e,!0)||fail(t,e,n,"deepStrictEqual",deepStrictEqual)}function _deepEqual(t,e,n,a){if(t===e)return!0;if(buffer$3.isBuffer(t)&&buffer$3.isBuffer(e))return compare(t,e)===0;if(util$9.isDate(t)&&util$9.isDate(e))return t.getTime()===e.getTime();if(util$9.isRegExp(t)&&util$9.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if((t===null||typeof t!="object")&&(e===null||typeof e!="object"))return n?t===e:t==e;if(isView(t)&&isView(e)&&pToString(t)===pToString(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return compare(new Uint8Array(t.buffer),new Uint8Array(e.buffer))===0;if(buffer$3.isBuffer(t)!==buffer$3.isBuffer(e))return!1;a=a||{actual:[],expected:[]};var o=a.actual.indexOf(t);return o!==-1&&o===a.expected.indexOf(e)?!0:(a.actual.push(t),a.expected.push(e),objEquiv(t,e,n,a))}function isArguments(t){return Object.prototype.toString.call(t)=="[object Arguments]"}function objEquiv(t,e,n,a){if(t==null||e===null||e===void 0)return!1;if(util$9.isPrimitive(t)||util$9.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var o=isArguments(t),l=isArguments(e);if(o&&!l||!o&&l)return!1;if(o)return t=pSlice.call(t),e=pSlice.call(e),_deepEqual(t,e,n);var u=objectKeys(t),d=objectKeys(e),m,y;if(u.length!==d.length)return!1;for(u.sort(),d.sort(),y=u.length-1;y>=0;y--)if(u[y]!==d[y])return!1;for(y=u.length-1;y>=0;y--)if(m=u[y],!_deepEqual(t[m],e[m],n,a))return!1;return!0}assert.notDeepEqual=notDeepEqual;function notDeepEqual(t,e,n){_deepEqual(t,e,!1)&&fail(t,e,n,"notDeepEqual",notDeepEqual)}assert.notDeepStrictEqual=notDeepStrictEqual;function notDeepStrictEqual(t,e,n){_deepEqual(t,e,!0)&&fail(t,e,n,"notDeepStrictEqual",notDeepStrictEqual)}assert.strictEqual=strictEqual;function strictEqual(t,e,n){t!==e&&fail(t,e,n,"===",strictEqual)}assert.notStrictEqual=notStrictEqual;function notStrictEqual(t,e,n){t===e&&fail(t,e,n,"!==",notStrictEqual)}function expectedException(t,e){if(!t||!e)return!1;if(Object.prototype.toString.call(e)=="[object RegExp]")return e.test(t);try{if(t instanceof e)return!0}catch{}return Error.isPrototypeOf(e)?!1:e.call({},t)===!0}function _tryBlock(t){var e;try{t()}catch(n){e=n}return e}function _throws(t,e,n,a){var o;if(typeof e!="function")throw new TypeError('"block" argument must be a function');typeof n=="string"&&(a=n,n=null),o=_tryBlock(e),a=(n&&n.name?" ("+n.name+").":".")+(a?" "+a:"."),t&&!o&&fail(o,n,"Missing expected exception"+a);var l=typeof a=="string",u=!t&&util$9.isError(o),d=!t&&o&&!n;if((u&&l&&expectedException(o,n)||d)&&fail(o,n,"Got unwanted exception"+a),t&&o&&n&&!expectedException(o,n)||!t&&o)throw o}assert.throws=throws;function throws(t,e,n){_throws(!0,t,e,n)}assert.doesNotThrow=doesNotThrow;function doesNotThrow(t,e,n){_throws(!1,t,e,n)}assert.ifError=ifError;function ifError(t){if(t)throw t}const assert$1=Object.freeze(Object.defineProperty({__proto__:null,AssertionError,assert:ok,deepEqual,deepStrictEqual,default:assert,doesNotThrow,equal,fail,ifError,notDeepEqual,notDeepStrictEqual,notEqual,notStrictEqual,ok,strictEqual,throws},Symbol.toStringTag,{value:"Module"}));var KeyType;(function(t){t.TEAM="TEAM",t.ROLE="ROLE",t.MEMBER="MEMBER",t.DEVICE="DEVICE",t.EPHEMERAL="EPHEMERAL"})(KeyType||(KeyType={}));var ADMIN="admin";KeyType.TEAM,KeyType.TEAM;KeyType.ROLE;KeyType.EPHEMERAL,KeyType.EPHEMERAL;var BASE30_ALPHABET="abcdefghjkmnpqrsuvwxyz23456789".split("");BASE30_ALPHABET.length;var HashPurpose;(function(t){t.SIGNATURE="SIGNATURE",t.ENCRYPTION="ENCRYPTION",t.SYMMETRIC="SYMMETRIC",t.LINK_TO_PREVIOUS="LINK_TO_PREVIOUS",t.INVITATION="INVITATION",t.DEVICE_ID="DEVICE_ID",t.SHARED_KEY="SHARED_KEY"})(HashPurpose||(HashPurpose={}));HashPurpose.SIGNATURE;HashPurpose.ENCRYPTION;HashPurpose.SYMMETRIC;var _keyset$KeyType=KeyType;_keyset$KeyType.MEMBER;HashPurpose.LINK_TO_PREVIOUS;KeyType.DEVICE;KeyType.ROLE;KeyType.MEMBER;var _after,TIMEOUT_DELAY=7e3;_after={},_after[TIMEOUT_DELAY]={actions:"failTimeout",target:"#failure"};KeyType.DEVICE;class EncryptionLocalFirst{constructor(){ut(this,"clefs");ut(this,"nom","défaut");const{publicKey:e,secretKey:n}=asymmetric.keyPair();this.clefs={publique:e,secrète:n}}encrypter({message:e,clefPubliqueDestinataire:n}){return asymmetric.encrypt({secret:e,recipientPublicKey:n,senderSecretKey:this.clefs.secrète}).toString()}décrypter({message:e,clefPubliqueExpéditeur:n}){return asymmetric.decrypt({cipher:e,recipientSecretKey:this.clefs.secrète,senderPublicKey:n})}clefAléatoire(){return Math.random().toString()}async obtNom(){return this.nom}async obtClefs(){return this.clefs}}class Favoris{constructor({client:e,id:n}){ut(this,"client");ut(this,"idBd");ut(this,"_promesseInit");ut(this,"oublierÉpingler");this.client=e,this.idBd=n,this._promesseInit=this._épinglerFavoris()}async _épinglerFavoris(){let e=[];const n=await this.client.suivreBdDic({id:this.idBd,f:async a=>{const o=[];await Promise.all(Object.entries(a).map(async([u,d])=>{const m=await this.estÉpingléSurDispositif({dispositifs:d.dispositifs}),y=await this.estÉpingléSurDispositif({dispositifs:d.dispositifsFichiers});m&&await this.client.épingles.épinglerBd({id:u,récursif:d.récursif,fichiers:y}),o.push(u)}));const l=e.filter(u=>!o.includes(u));await Promise.all(l.map(async u=>await this.client.épingles.désépinglerBd({id:u}))),e=o}});this.oublierÉpingler=n}async suivreFavoris({f:e,idBdFavoris:n}){n=n||this.idBd;const a=async o=>{const l=Object.entries(o).map(([u,d])=>({idObjet:u,...d}));await e(l)};return await this.client.suivreBdDic({id:n,f:a})}async épinglerFavori({id:e,dispositifs:n,dispositifsFichiers:a="INSTALLÉ",récursif:o=!0}){const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:this.idBd}),d={récursif:o,dispositifs:n};a&&(d.dispositifsFichiers=a),await l.put(e,d),await u()}async désépinglerFavori({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.del(e),await a()}async suivreÉtatFavori({id:e,f:n}){return await this.client.suivreBdDic({id:this.idBd,f:a=>n(a[e])})}async suivreEstÉpingléSurDispositif({idObjet:e,f:n,idOrbite:a}){const o=async l=>{const u=await this.estÉpingléSurDispositif({dispositifs:l?.dispositifs,idOrbite:a}),d=await this.estÉpingléSurDispositif({dispositifs:l?.dispositifsFichiers,idOrbite:a});n({idObjet:e,bd:u,fichiers:d,récursif:l?.récursif||!1})};return await this.suivreÉtatFavori({id:e,f:o})}async estÉpingléSurDispositif({dispositifs:e,idOrbite:n}){return n=n||await this.client.obtIdOrbite(),e===void 0?!1:e==="TOUS"?!0:e==="INSTALLÉ"?n===await this.client.obtIdOrbite()?isNode||isElectron$1:!1:typeof e=="string"?e===n:e.includes(n)}async fermer(){await this._promesseInit,this.oublierÉpingler&&await this.oublierÉpingler()}}__decorate([cacheSuivi],Favoris.prototype,"suivreFavoris",null);__decorate([cacheSuivi],Favoris.prototype,"suivreÉtatFavori",null);__decorate([cacheSuivi],Favoris.prototype,"suivreEstÉpingléSurDispositif",null);const MAX_TAILLE_IMAGE=500*1e3,MAX_TAILLE_IMAGE_VIS=1500*1e3;class Projets{constructor({client:e,id:n}){ut(this,"client");ut(this,"idBd");this.client=e,this.idBd=n}async suivreProjets({f:e,idBdProjets:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async créerProjet(){const{bd:e,fOublier:n}=await this.client.ouvrirBd({id:this.idBd}),a=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a}),d={address:o.access.address};await o.set("type","projet");const m=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:d});await o.set("noms",m);const y=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:d});await o.set("descriptions",y);const b=await this.client.créerBdIndépendante({type:"feed",optionsAccès:d});await o.set("bds",b);const _=await this.client.créerBdIndépendante({type:"feed",optionsAccès:d});return await o.set("motsClefs",_),await o.set("statut",{statut:TYPES_STATUT.ACTIVE}),await e.add(a),n(),l(),a}async copierProjet({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e}),o=await this.créerProjet(),{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o}),d=n.get("noms"),{bd:m,fOublier:y}=await this.client.ouvrirBd({id:d}),b=ClientConstellation.obtObjetdeBdDic({bd:m});await this.ajouterNomsProjet({id:o,noms:b});const _=n.get("descriptions"),{bd:w,fOublier:E}=await this.client.ouvrirBd({id:_}),A=ClientConstellation.obtObjetdeBdDic({bd:w});await this.ajouterDescriptionsProjet({id:o,descriptions:A});const C=n.get("motsClefs"),{bd:k,fOublier:B}=await this.client.ouvrirBd({id:C}),D=ClientConstellation.obtÉlémentsDeBdListe({bd:k});await this.ajouterMotsClefsProjet({idProjet:o,idsMotsClefs:D});const q=n.get("bds"),{bd:j,fOublier:J}=await this.client.ouvrirBd({id:q}),Y=ClientConstellation.obtÉlémentsDeBdListe({bd:j});await Promise.all(Y.map(async Q=>{await this.ajouterBdProjet({idProjet:o,idBd:Q})}));const L=n.get("statut")||{statut:TYPES_STATUT.ACTIVE};await l.set("statut",L);const Z=n.get("image");return Z&&await l.set("image",Z),await l.set("copiéDe",e),a(),u(),y(),E(),B(),J(),o}async ajouterÀMesProjets({idProjet:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async enleverDeMesProjets({idProjet:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a()}async inviterAuteur({idProjet:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async _obtBdNoms({id:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:n});if(!a)throw new Error(`Permission de modification refusée pour Projet ${e}.`);return await this.client.ouvrirBd({id:a})}async ajouterNomsProjet({id:e,noms:n}){const{bd:a,fOublier:o}=await this._obtBdNoms({id:e});for(const l in n)await a.set(l,n[l]);await o()}async sauvegarderNomProjet({id:e,langue:n,nom:a}){const{bd:o,fOublier:l}=await this._obtBdNoms({id:e});await o.set(n,a),await l()}async effacerNomProjet({id:e,langue:n}){const{bd:a,fOublier:o}=await this._obtBdNoms({id:e});await a.del(n),await o()}async _obtBdDescr({id:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:n});if(!a)throw new Error(`Permission de modification refusée pour Projet ${e}.`);return await this.client.ouvrirBd({id:a})}async ajouterDescriptionsProjet({id:e,descriptions:n}){const{bd:a,fOublier:o}=await this._obtBdDescr({id:e});for(const l in n)await a.set(l,n[l]);await o()}async sauvegarderDescrProjet({id:e,langue:n,nom:a}){const{bd:o,fOublier:l}=await this._obtBdDescr({id:e});await o.set(n,a),await l()}async effacerDescrProjet({id:e,langue:n}){const{bd:a,fOublier:o}=await this._obtBdDescr({id:e});await a.del(n),await o()}async _obtBdMotsClefs({id:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.obtIdBd({nom:"motsClefs",racine:e,type:"feed",optionsAccès:n});if(!a)throw new Error(`Permission de modification refusée pour projet ${e}.`);return await this.client.ouvrirBd({id:a})}async ajouterMotsClefsProjet({idProjet:e,idsMotsClefs:n}){Array.isArray(n)||(n=[n]);const{bd:a,fOublier:o}=await this._obtBdMotsClefs({id:e});await Promise.all(n.map(async l=>{ClientConstellation.obtÉlémentsDeBdListe({bd:a}).includes(l)||await a.add(l)})),await o()}async effacerMotClefProjet({idProjet:e,idMotClef:n}){const{bd:a,fOublier:o}=await this._obtBdMotsClefs({id:e});await this.client.effacerÉlémentDeBdListe({bd:a,élément:n}),await o()}async _obtBdBds({id:e}){const n=await this.client.obtOpsAccès({idBd:e}),a=await this.client.obtIdBd({nom:"bds",racine:e,type:"feed",optionsAccès:n});if(!a)throw new Error(`Permission de modification refusée pour Projet ${e}.`);return await this.client.ouvrirBd({id:a})}async ajouterBdProjet({idProjet:e,idBd:n}){const{bd:a,fOublier:o}=await this._obtBdBds({id:e});await a.add(n),await o()}async effacerBdProjet({idProjet:e,idBd:n}){const{bd:a,fOublier:o}=await this._obtBdBds({id:e});await this.client.effacerÉlémentDeBdListe({bd:a,élément:n}),await o()}async marquerObsolète({id:e,idNouvelle:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});a.set("statut",{statut:TYPES_STATUT.OBSOLÈTE,idNouvelle:n}),await o()}async marquerActive({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.ACTIVE}),await a()}async marquerBêta({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.BÊTA}),await a()}async marquerInterne({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});n.set("statut",{statut:TYPES_STATUT.INTERNE}),await a()}async sauvegarderImage({idProjet:e,image:n}){let a;if(n.size!==void 0){if(n.size>MAX_TAILLE_IMAGE)throw new Error("Taille maximale excédée");a=await n.arrayBuffer()}else a=n;const o=await this.client.ajouterÀSFIP({fichier:a}),{bd:l,fOublier:u}=await this.client.ouvrirBd({id:e});await l.set("image",o),await u()}async effacerImage({idProjet:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e});await n.del("image"),await a()}async suivreImage({idProjet:e,f:n}){return await this.client.suivreBd({id:e,f:async a=>{const o=a.get("image");o||await n(null);const l=await this.client.obtFichierSFIP({id:o,max:MAX_TAILLE_IMAGE_VIS});await n(l)}})}async suivreNomsProjet({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async suivreDescrProjet({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"descriptions",f:n})}async suivreMotsClefsProjet({idProjet:e,f:n}){const a={},o=()=>{if(a.propres&&a.bds){const _=[...new Set([...a.propres,...a.bds])];n(_)}},l=_=>{a.propres=_,o()},u=await this.client.suivreBdListeDeClef({id:e,clef:"motsClefs",f:l}),d=_=>{a.bds=_,o()},m=async _=>await this.suivreBdsProjet({id:e,f:_}),y=async(_,w)=>await this.client.bds.suivreMotsClefsBd({id:_,f:w}),b=await this.client.suivreBdsDeFonctionListe({fListe:m,f:d,fBranche:y});return async()=>{await u(),await b()}}async suivreBdsProjet({id:e,f:n}){return await this.client.suivreBdListeDeClef({id:e,clef:"bds",f:n})}async suivreVariablesProjet({id:e,f:n}){const a=u=>n(u||[]),o=async(u,d)=>await this.client.bds.suivreVariablesBd({id:u,f:d}),l=async({id:u,fSuivreBd:d})=>await this.client.suivreBdsDeBdListe({id:u,f:d,fBranche:o});return await this.client.suivreBdDeClef({id:e,clef:"bds",f:a,fSuivre:l})}async suivreQualitéProjet({idProjet:e,f:n}){const a=d=>{n(d.length?d.reduce((m,y)=>m+y,0)/d.length:0)},o=async d=>await this.suivreBdsProjet({id:e,f:d}),l=async(d,m)=>await this.client.bds.suivreScoreBd({id:d,f:y=>m(y.total)}),u=d=>d.flat();return await this.client.suivreBdsDeFonctionListe({fListe:o,f:a,fBranche:l,fRéduction:u})}async exporterDonnées({id:e,langues:n,nomFichier:a}){if(!a){const u=await uneFois(m=>this.suivreNomsProjet({id:e,f:m})),d=e.split("/").pop();a=n&&traduire(u,n)||d}const o={docs:[],fichiersSFIP:new Set,nomFichier:a},l=await uneFois(u=>this.suivreBdsProjet({id:e,f:u}));for(const u of l){const{doc:d,fichiersSFIP:m}=await this.client.bds.exporterDonnées({id:u,langues:n});let y;const b=u.split("/").pop();if(n){const _=await uneFois(w=>this.client.bds.suivreNomsBd({id:u,f:w}));y=traduire(_,n)||b}else y=b;o.docs.push({doc:d,nom:y});for(const _ of m)o.fichiersSFIP.add(_)}return o}async exporterDocumentDonnées({données:e,formatDoc:n,dir:a="",inclureFichiersSFIP:o=!0}){const{docs:l,fichiersSFIP:u,nomFichier:d}=e,y={xls:"biff8"}[n]||n,b=l.map(w=>({nom:`${w.nom}.${n}`,octets:writeSync(w.doc,{bookType:y,type:"buffer"})})),_=o?await Promise.all([...u].map(async w=>({nom:`${w.cid}.${w.ext}`,octets:await toBuffer(this.client.obtItérableAsyncSFIP({id:w.cid}))}))):[];await zipper(b,_,path.join(a,d))}async effacerProjet({id:e}){await this.enleverDeMesProjets({idProjet:e});const n=await this.client.obtOpsAccès({idBd:e});for(const a in["noms","descriptions","motsClefs","bds"]){const o=await this.client.obtIdBd({nom:a,racine:e,optionsAccès:n});o&&await this.client.effacerBd({id:o})}await this.client.effacerBd({id:e})}}__decorate([cacheSuivi],Projets.prototype,"suivreProjets",null);__decorate([cacheSuivi],Projets.prototype,"suivreImage",null);__decorate([cacheSuivi],Projets.prototype,"suivreNomsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreDescrProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreMotsClefsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreBdsProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreVariablesProjet",null);__decorate([cacheSuivi],Projets.prototype,"suivreQualitéProjet",null);class MotsClefs{constructor({client:e,id:n}){ut(this,"client");ut(this,"idBd");this.client=e,this.idBd=n}async suivreMotsClefs({f:e,idBdMotsClefs:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async créerMotClef(){const e=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}});await this.ajouterÀMesMotsClefs({id:e});const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e}),l={address:n.access.address};await n.set("type","motClef");const u=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:l});return await n.set("noms",u),a(),e}async ajouterÀMesMotsClefs({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async enleverDeMesMotsClefs({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:n,élément:e}),await a()}async copierMotClef({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:e}),o=await this.créerMotClef(),l=n.get("noms"),{bd:u,fOublier:d}=await this.client.ouvrirBd({id:l}),m=ClientConstellation.obtObjetdeBdDic({bd:u});return await this.ajouterNomsMotClef({id:o,noms:m}),a(),d(),o}async inviterAuteur({idMotClef:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async ajouterNomsMotClef({id:e,noms:n}){const a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a});for(const u in n)await o.set(u,n[u]);await l()}async sauvegarderNomMotClef({id:e,langue:n,nom:a}){const o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!o)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.set(n,a),await u()}async effacerNomMotClef({id:e,langue:n}){const a=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore"});if(!a)throw new Error(`Permission de modification refusée pour mot clef ${e}.`);const{bd:o,fOublier:l}=await this.client.ouvrirBd({id:a});await o.del(n),await l()}async suivreNomsMotClef({id:e,f:n}){return await this.client.suivreBdDicDeClef({id:e,clef:"noms",f:n})}async effacerMotClef({id:e}){await this.enleverDeMesMotsClefs({id:e});const n=await this.client.obtOpsAccès({idBd:e});for(const a in["noms"]){const o=await this.client.obtIdBd({nom:a,racine:e,optionsAccès:n});o&&await this.client.effacerBd({id:o})}await this.client.effacerBd({id:e})}async suivreQualitéMotClef({id:e,f:n}){return await this.suivreNomsMotClef({id:e,f:a=>n(Object.keys(a).length?1:0)})}}__decorate([cacheSuivi],MotsClefs.prototype,"suivreMotsClefs",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreNomsMotClef",null);__decorate([cacheSuivi],MotsClefs.prototype,"suivreQualitéMotClef",null);class Nuée{constructor({client:e,id:n}){ut(this,"client");ut(this,"idBd");this.client=e,this.idBd=n}async créerNuée({nuéeParent:e,autorisation:n,ajouter:a=!0}){const o=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}});a&&await this.ajouterÀMesNuées({id:o});const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o}),m={address:l.access.address};await l.set("type","nuée"),await l.set("autorisation",n||await this.générerGestionnaireAutorisations({}));const y=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:m});await l.set("noms",y);const b=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:m});await l.set("descriptions",b);const _=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:m});await l.set("tableaux",_);const w=await this.client.créerBdIndépendante({type:"feed",optionsAccès:m});return await l.set("motsClefs",w),await l.set("statut",{statut:TYPES_STATUT.ACTIVE}),e&&await l.set("parent",e),u(),o}async ajouterÀMesNuées({id:e}){const{bd:n,fOublier:a}=await this.client.ouvrirBd({id:this.idBd});await n.add(e),await a()}async copierNuée({id:e,ajouterÀMesNuées:n=!0}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e}),l=a.get("parent"),u=await this.créerNuée({nuéeParent:l,ajouter:n}),{bd:d,fOublier:m}=await this.client.ouvrirBd({id:u}),y=a.get("noms"),{bd:b,fOublier:_}=await this.client.ouvrirBd({id:y}),w=ClientConstellation.obtObjetdeBdDic({bd:b});await this.ajouterNomsNuée({id:u,noms:w});const E=a.get("descriptions"),{bd:A,fOublier:C}=await this.client.ouvrirBd({id:E}),k=ClientConstellation.obtObjetdeBdDic({bd:A});await this.ajouterDescriptionsNuée({id:u,descriptions:k}),_(),C();const B=a.get("motsClefs"),{bd:D,fOublier:q}=await this.client.ouvrirBd({id:B}),j=ClientConstellation.obtÉlémentsDeBdListe({bd:D});await this.ajouterMotsClefsNuée({idNuée:u,idsMotsClefs:j});const J=a.get("tableaux"),Y=d.get("tableaux"),{bd:L,fOublier:Z}=await this.client.ouvrirBd({id:Y}),{bd:Q,fOublier:oe}=await this.client.ouvrirBd({id:J}),ae=ClientConstellation.obtObjetdeBdDic({bd:Q});for(const x of Object.keys(ae)){const T=await this.client.tableaux.copierTableau({id:x,idBd:u,copierDonnées:!1});await L.set(T,ae[x])}const U=a.get("statut")||{statut:TYPES_STATUT.ACTIVE};await d.set("statut",U);const I=a.get("image");return I&&await d.set("image",I),await d.set("copiéDe",e),await o(),Z(),m(),oe(),q(),u}async suivreNuées({f:e,idBdNuéesCompte:n}){return n=n||this.idBd,await this.client.suivreBdListe({id:n,f:e})}async suivreDeParents({idNuée:e,f:n,fParents:a}){return await this.client.suivreBdsDeFonctionListe({fListe:async o=>await this.suivreNuéesParents({idNuée:e,f:l=>o([e,...l].reverse())}),f:n,fBranche:a,fRéduction:o=>o})}async ajouterNomsNuée({id:e,noms:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});for(const d in n)await l.set(d,n[d]);await u()}async effacerNomNuée({id:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"noms",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.del(n),await u()}async suivreNomsNuée({idNuée:e,f:n}){const a=async o=>{await n(Object.assign({},...o))};return await this.suivreDeParents({idNuée:e,f:a,fParents:async(o,l)=>await this.client.suivreBdDicDeClef({id:o,clef:"noms",f:l})})}async ajouterDescriptionsNuée({id:e,descriptions:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});for(const d in n)await l.set(d,n[d]);await u()}async effacerDescriptionNuée({id:e,langue:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"descriptions",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.del(n),await u()}async suivreDescriptionsNuée({idNuée:e,f:n}){const a=async o=>{await n(Object.assign({},...o))};return await this.suivreDeParents({idNuée:e,f:a,fParents:async(o,l)=>await this.client.suivreBdDicDeClef({id:o,clef:"descriptions",f:l})})}async ajouterMotsClefsNuée({idsMotsClefs:e,idNuée:n}){Array.isArray(e)||(e=[e]);const a=await this.client.obtOpsAccès({idBd:n}),o=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${n}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});for(const d of e)ClientConstellation.obtÉlémentsDeBdListe({bd:l}).includes(d)||await l.add(d);await u()}async effacerMotClefNuée({idMotClef:e,idNuée:n}){const a=await this.client.obtOpsAccès({idBd:n}),o=await this.client.obtIdBd({nom:"motsClefs",racine:n,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour BD ${n}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await this.client.effacerÉlémentDeBdListe({bd:l,élément:e}),await u()}async suivreMotsClefsNuée({idNuée:e,f:n}){const a=async o=>{await n([...new Set(o.flat())])};return await this.suivreDeParents({idNuée:e,f:a,fParents:async(o,l)=>await this.client.suivreBdListeDeClef({id:o,clef:"motsClefs",f:l})})}async inviterAuteur({idNuée:e,idBdCompteAuteur:n,rôle:a}){await this.client.donnerAccès({idBd:e,identité:n,rôle:a})}async générerGestionnaireAutorisations({philosophie:e="IJPC"}){const n=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:{address:void 0,premierMod:this.client.bdCompte.id}}),{bd:a,fOublier:o}=await this.client.ouvrirBd({id:n});await a.set("philosophie",e);const u={address:a.access.address},d=await this.client.créerBdIndépendante({type:"kvstore",optionsAccès:u});return await a.set("membres",d),o(),n}async changerPhisolophieAutorisation({idAutorisation:e,philosophie:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("philosophie",n),o()}async suivrePhilosophieAutorisation({idNuée:e,f:n}){const a=o=>{const l=o.get("philosophie");["IJPC","CJPI"].includes(l)&&n(l)};return await this.client.suivreBd({id:e,f:a})}async accepterMembre({idAutorisation:e,idCompte:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"membres",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour groupe d'autorisation ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.set(n,"accepté"),u()}async exclureMembre({idAutorisation:e,idCompte:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"membres",racine:e,type:"feed",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour groupe d'autorisation ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.set(n,"exclus"),u()}async suivreGestionnaireAutorisations({idNuée:e,f:n}){const a=o=>{const l=o.get("autorisation");n(l)};return await this.client.suivreBd({id:e,f:a})}async changerGestionnaireAutorisations({idNuée:e,idAutorisation:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:e});await a.set("autorisation",n),o()}async suivreAutorisationsMembresDeGestionnaire({idAutorisation:e,f:n}){const a=o=>{const l=Object.entries(o).map(([u,d])=>({idCompte:u,statut:d}));n(l)};return await this.client.suivreBdDicDeClef({id:e,clef:"membres",f:a})}async suivreAutorisationsMembresDeNuée({idNuée:e,f:n}){const a=async({fSuivreRacine:l})=>await this.suivreGestionnaireAutorisations({idNuée:e,f:l}),o=async({id:l,fSuivreBd:u})=>await this.suivreAutorisationsMembresDeGestionnaire({idAutorisation:l,f:u});return await this.client.suivreBdDeFonction({fRacine:a,f:n,fSuivre:o})}async ajouterTableauNuée({idNuée:e,clefTableau:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});n=n||v4();const d=await this.client.tableaux.créerTableau({idBd:e});return await l.set(d,{position:Object.keys(l.all).length,clef:n}),await u(),d}async effacerTableauNuée({idNuée:e,idTableau:n}){const a=await this.client.obtOpsAccès({idBd:e}),o=await this.client.obtIdBd({nom:"tableaux",racine:e,type:"kvstore",optionsAccès:a});if(!o)throw new Error(`Permission de modification refusée pour Nuée ${e}.`);const{bd:l,fOublier:u}=await this.client.ouvrirBd({id:o});await l.del(n),await u(),await this.client.tableaux.effacerTableau({idTableau:n})}async suivreTableauxNuée({idNuée:e,f:n}){const a=async l=>{await n(l.flat())},o=async(l,u)=>{const d=m=>{const y=Object.entries(m).map(([b,_])=>({id:b,..._}));u(y)};return await this.client.suivreBdDicDeClef({id:l,clef:"tableaux",f:d})};return await this.suivreDeParents({idNuée:e,f:a,fParents:o})}async ajouterNomsTableauNuée({idTableau:e,noms:n}){return await this.client.tableaux.ajouterNomsTableau({idTableau:e,noms:n})}async effacerNomsTableauNuée({idTableau:e,langue:n}){return await this.client.tableaux.effacerNomTableau({idTableau:e,langue:n})}async suivreNomsTableauNuée({idNuée:e,clefTableau:n,f:a}){const o=async u=>{await a(Object.assign({},...u))},l=async(u,d)=>await this.client.suivreBdDeFonction({fRacine:async({fSuivreRacine:m})=>await this.client.bds.suivreIdTableauParClef({idBd:u,clef:n,f:m}),f:d,fSuivre:async({id:m,fSuivreBd:y})=>await this.client.tableaux.suivreNomsTableau({idTableau:m,f:y})});return await this.suivreDeParents({idNuée:e,f:o,fParents:l})}async ajouterColonneTableauNuée({idTableau:e,idVariable:n,idColonne:a}){return await this.client.tableaux.ajouterColonneTableau({idTableau:e,idVariable:n,idColonne:a})}async effacerColonneTableauNuée({idTableau:e,idColonne:n}){return await this.client.tableaux.effacerColonneTableau({idTableau:e,idColonne:n})}async changerColIndexTableauNuée({idTableau:e,idColonne:n,val:a}){return await this.client.tableaux.changerColIndex({idTableau:e,idColonne:n,val:a})}async suivreColonnesTableauNuée({idNuée:e,clefTableau:n,f:a,catégories:o=!0}){const l=async d=>{await a(d.flat())},u=async(d,m)=>await this.client.suivreBdDeFonction({fRacine:async({fSuivreRacine:y})=>await this.client.bds.suivreIdTableauParClef({idBd:d,clef:n,f:y}),f:m,fSuivre:async({id:y,fSuivreBd:b})=>await this.client.tableaux.suivreColonnes({idTableau:y,f:b,catégories:o})});return await this.suivreDeParents({idNuée:e,f:l,fParents:u})}async ajouterRègleTableauNuée({idTableau:e,idColonne:n,règle:a}){return await this.client.tableaux.ajouterRègleTableau({idTableau:e,idColonne:n,règle:a})}async effacerRègleTableauNuée({idTableau:e,idRègle:n}){return await this.client.tableaux.effacerRègleTableau({idTableau:e,idRègle:n})}async TableauNuée({idNuée:e,clefTableau:n,f:a}){const o=async u=>{await a(u.flat())},l=async(u,d)=>await this.client.suivreBdDeFonction({fRacine:async({fSuivreRacine:m})=>await this.client.bds.suivreIdTableauParClef({idBd:u,clef:n,f:m}),f:d,fSuivre:async({id:m,fSuivreBd:y})=>await this.client.tableaux.suivreRègles({idTableau:m,f:y})});return await this.suivreDeParents({idNuée:e,f:o,fParents:l})}async suivreVariablesNuée({idNuée:e,f:n}){const a=u=>n(u||[]),o=async(u,d)=>await this.client.tableaux.suivreVariables({idTableau:u,f:d}),l=async u=>await this.suivreTableauxNuée({idNuée:e,f:d=>u(d.map(m=>m.id))});return await this.client.suivreBdsDeFonctionListe({fListe:l,f:a,fBranche:o})}async suivreQualitéNuée({idNuée:e,f:n}){const a={noms:{},descr:{}},o=()=>{const m=[Object.keys(a.noms).length?1:0,Object.keys(a.descr).length?1:0],y=m.reduce((b,_)=>b+_,0)/m.length;n(y)},l=await this.suivreNomsNuée({idNuée:e,f:m=>{a.noms=m,o()}}),u=await this.suivreDescriptionsNuée({idNuée:e,f:m=>{a.descr=m,o()}});return async()=>{await l(),await u()}}async suivreDifférencesNuéeEtTableau({idNuée:e,clefTableau:n,idTableau:a,f:o,stricte:l=!0}){const u=async y=>{const b=y.filter(_=>l||_.sévère);await o(b)},d=async({fSuivreRacine:y})=>await this.client.bds.suivreIdTableauParClef({idBd:e,clef:n,f:y}),m=async({id:y,fSuivreBd:b})=>await this.client.tableaux.suivreDifférencesAvecTableau({idTableau:a,idTableauRéf:y,f:b});return await this.client.suivreBdDeFonction({fRacine:d,f:u,fSuivre:m})}async suivreDifférencesNuéeEtBd({idNuée:e,idBd:n,f:a}){const o={},l=async()=>{const m=[];if(o.tableauxNuée&&o.tableauxBd){for(const y of o.tableauxNuée)if(!o.tableauxNuée.find(_=>_.clef===y.clef)){const _={type:"tableauManquant",sévère:!0,clefManquante:y.clef};m.push(_)}for(const y of o.tableauxBd)if(!o.tableauxNuée.find(_=>_.clef===y.clef)){const _={type:"tableauSupplémentaire",sévère:!1,clefExtra:y.clef};m.push(_)}}await a(m)},u=await this.client.bds.suivreTableauxBd({id:n,f:m=>{o.tableauxBd=m,l()}}),d=await this.suivreTableauxNuée({idNuée:e,f:m=>{o.tableauxNuée=m,l()}});return async()=>{await u(),await d()}}async suivreCorrespondanceBd({idBd:e,f:n}){const a=async l=>await this.client.bds.suivreNuéesBd({idBd:e,f:l}),o=async(l,u)=>{const d={différencesBds:[],différencesTableaux:[]},m=async()=>{u([...d.différencesBds,...d.différencesTableaux])},y=await this.suivreDifférencesNuéeEtBd({idNuée:l,idBd:e,f:async w=>{d.différencesBds=w,await m()}}),b=async(w,E,A)=>await this.suivreDifférencesNuéeEtTableau({idNuée:l,clefTableau:A.clef,idTableau:w,f:async C=>{await E(C.map(k=>({type:"tableau",sévère:k.sévère,idTableau:w,différence:k})))}}),_=await this.client.suivreBdsDeFonctionListe({fListe:async w=>await this.client.bds.suivreTableauxBd({id:e,f:w}),f:async w=>{d.différencesTableaux=w,await m()},fBranche:b,fCode:w=>w.id,fIdBdDeBranche:w=>w.id});return async()=>{await Promise.all([y,_])}};return await this.client.suivreBdsDeFonctionListe({fListe:a,f:n,fBranche:o})}async rechercherNuéesSpécialiséesLiées({idNuée:e,f:n,nRésultatsDésirés:a}){const o=async l=>{n(l.map(u=>u.id))};return await this.client.réseau.rechercherNuées({f:o,fObjectif:async(l,u,d)=>await l.nuées.suivreNuéesParents({idNuée:u,f:m=>{d({type:"résultat",score:m.includes(e)?1:0,de:"*",info:{type:"vide"}})}}),nRésultatsDésirés:a})}async suivreNuéesParents({idNuée:e,f:n}){const a=async({id:o,ancêtres:l=[]})=>{let u,d;const m=await this.client.suivreBd({id:o,f:async y=>{const b=y.get("parent");l=[...l,b],await n(l),b?b!==d&&(u&&await u(),l.includes(b)||(u=await a({id:b,ancêtres:l})),d=b):(u&&await u(),u=void 0)}});return async()=>{await m(),u&&await u()}};return await a({id:e})}async suivreBdsCorrespondantes({idNuée:e,f:n,vérifierAutorisation:a=!0,nRésultatsDésirés:o=100}){if(a){const l={},u=async()=>{const{philoAutorisation:C,membres:k,bds:B}=l;C&&k&&B||await n(void 0),await n((q=>{if(C==="CJPI"){const j=k.filter(J=>J.statut==="accepté").map(J=>J.idCompte);return q.filter(J=>J.auteurs.some(Y=>j.includes(Y))).map(J=>J.idBd)}else if(C==="IJPC"){const j=k.filter(J=>J.statut==="exclus").map(J=>J.idCompte);return q.filter(J=>!J.auteurs.some(Y=>j.includes(Y))).map(J=>J.idBd)}else throw new Error(C)})(B))},d=await this.suivrePhilosophieAutorisation({idNuée:e,f:async C=>{l.philoAutorisation=C,await u()}}),m=await this.suivreAutorisationsMembresDeNuée({idNuée:e,f:async C=>{l.membres=C,await u()}}),y=async C=>{l.bds=C,await u()},b=async C=>await this.client.réseau.suivreBdsDeNuée({idNuée:e,f:C,nRésultatsDésirés:o}),_=async(C,k)=>{const B=async D=>{k({idBd:C,auteurs:D.filter(q=>{q.accepté}).map(q=>q.idBdCompte)})};return await this.client.réseau.suivreAuteursBd({idBd:C,f:B})},{fOublier:w,fChangerProfondeur:E}=await this.client.suivreBdsDeFonctionListe({fListe:b,f:y,fBranche:_});return{fOublier:async()=>{await Promise.all([w,m,d].map(C=>C()))},fChangerProfondeur:E}}else return await this.client.réseau.suivreBdsDeNuée({idNuée:e,f:n,nRésultatsDésirés:o})}async suivreDonnéesTableauNuée({idNuée:e,clefTableau:n,f:a,ignorerErreursFormatBd:o=!0,ignorerErreursFormatTableau:l=!1,ignorerErreursDonnéesTableau:u=!0,licensesPermises:d=void 0}){const m=async w=>{const E=w.flat();await a(E)},y=async w=>await this.suivreBdsCorrespondantes({idNuée:e,f:w}),b=async w=>{const E=async(A,C)=>{const k={licence:!1,formatBd:!1},B=[],D=async()=>{const q=Object.values(k).every(j=>j);await C(q)};if(d){const q=await this.client.bds.suivreLicence({id:A,f:async j=>{k.licence=d.includes(j),await D()}});B.push(q)}else k.licence=!0;if(o)k.formatBd=!0;else{const q=await this.suivreDifférencesNuéeEtBd({idBd:A,idNuée:e,f:async j=>{k.formatBd=!j.length,await D()}});B.push(q)}return D(),async()=>{await Promise.all(B.map(q=>q()))}};return await this.client.suivreBdsSelonCondition({fListe:y,fCondition:E,f:w})},_=async(w,E)=>{const A={},C=async()=>{const{données:q,erreursÉléments:j,auteurs:J}=A;if(q&&j&&J&&J.length){const Y=J.find(Z=>Z.accepté)?.idBdCompte;if(!Y)return;const L=q.map(Z=>({idBdCompte:Y,élément:Z,valid:j.filter(Q=>Q.empreinte==Z.empreinte)})).filter(Z=>u||!Z.valid.length);await E(L)}},k=async({id:q,fSuivreBd:j})=>{const J={},Y=[],L=async()=>{const{données:oe,erreurs:ae}=J;oe&&ae&&await j({données:oe,erreurs:ae})},Z=await this.client.tableaux.suivreDonnées({idTableau:q,f:async oe=>{J.données=oe,await L()}});Y.push(Z);const Q=await this.client.tableaux.suivreValidDonnées({idTableau:q,f:async oe=>{J.erreurs=oe,await L()}});return Y.push(Q),async()=>{await Promise.all(Y.map(oe=>oe()))}},B=await this.client.suivreBdDeFonction({fRacine:async({fSuivreRacine:q})=>await this.client.suivreBdSelonCondition({fRacine:async j=>await this.client.bds.suivreIdTableauParClef({idBd:w,clef:n,f:async J=>await j(J)}),fCondition:async(j,J)=>l?(await J(!0),faisRien):await this.suivreDifférencesNuéeEtTableau({idNuée:e,clefTableau:n,idTableau:j,f:async Y=>await J(!Y.length),stricte:!1}),f:q}),f:async q=>{A.données=q.données,A.erreursÉléments=q.erreurs,await C()},fSuivre:k}),D=await this.client.réseau.suivreAuteursBd({idBd:w,f:async q=>{A.auteurs=q,await C()}});return async()=>{await Promise.all([B,D])}};return await this.client.suivreBdsDeFonctionListe({fListe:b,f:m,fBranche:_})}async générerDeBd({idBd:e}){const n=await this.créerNuée({}),a=await uneFois(async d=>await this.client.bds.suivreNomsBd({id:e,f:d}));await this.ajouterNomsNuée({id:n,noms:a});const o=await uneFois(async d=>await this.client.bds.suivreDescrBd({id:e,f:d}));await this.ajouterDescriptionsNuée({id:n,descriptions:o});const l=await uneFois(async d=>await this.client.bds.suivreMotsClefsBd({id:e,f:d}));await this.ajouterMotsClefsNuée({idNuée:n,idsMotsClefs:l});const u=await uneFois(async d=>await this.client.bds.suivreTableauxBd({id:e,f:d}));for(const d of u){const m=d.id,y=await this.ajouterTableauNuée({idNuée:n,clefTableau:d.clef}),b=await uneFois(async _=>await this.client.tableaux.suivreColonnes({idTableau:m,f:_,catégories:!1}));for(const _ of b){await this.ajouterColonneTableauNuée({idTableau:y,idVariable:_.variable,idColonne:_.id}),await this.changerColIndexTableauNuée({idTableau:y,idColonne:_.id,val:_.index});const w=await uneFois(async E=>await this.client.tableaux.suivreRègles({idTableau:m,f:E}));for(const E of w)E.source==="tableau"&&await this.ajouterRègleTableauNuée({idTableau:y,idColonne:_.id,règle:E.règle.règle})}}return n}}__decorate([cacheSuivi],Nuée.prototype,"suivreDescriptionsNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreMotsClefsNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreNomsTableauNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreColonnesTableauNuée",null);__decorate([cacheSuivi],Nuée.prototype,"TableauNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreQualitéNuée",null);__decorate([cacheSuivi],Nuée.prototype,"suivreDifférencesNuéeEtTableau",null);__decorate([cacheSuivi],Nuée.prototype,"suivreDifférencesNuéeEtBd",null);__decorate([cacheSuivi],Nuée.prototype,"suivreCorrespondanceBd",null);__decorate([cacheRechercheParNRésultats],Nuée.prototype,"rechercherNuéesSpécialiséesLiées",null);__decorate([cacheSuivi],Nuée.prototype,"suivreNuéesParents",null);__decorate([cacheRechercheParNRésultats],Nuée.prototype,"suivreBdsCorrespondantes",null);__decorate([cacheSuivi],Nuée.prototype,"suivreDonnéesTableauNuée",null);const rechercherVariableSelonNom=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,de:"nom",clef:y,info:b})}else a()};return await e.variables.suivreNomsVariable({id:n,f:o})},rechercherVariableSelonDescr=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,de:"descr",clef:y,info:b})}else a()};return await e.variables.suivreDescrVariable({id:n,f:o})},rechercherVariableSelonTexte=t=>async(e,n,a)=>{const o=rechercherVariableSelonNom(t),l=rechercherVariableSelonDescr(t),u=rechercherSelonId(t);return await combinerRecherches({noms:o,descr:l,id:u},e,n,a)},rechercherMotClefSelonNom=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,clef:y,info:b,de:"nom"})}else a()};return await e.motsClefs.suivreNomsMotClef({id:n,f:o})},rechercherMotClefSelonTexte=t=>async(e,n,a)=>{const o=rechercherMotClefSelonNom(t),l=rechercherSelonId(t);return await combinerRecherches({noms:o,id:l},e,n,a)},rechercherBdSelonNom=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,clef:y,info:b,de:"nom"})}else a()};return await e.bds.suivreNomsBd({id:n,f:o})},rechercherBdSelonDescr=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,clef:y,info:b,de:"descr"})}else a()};return await e.bds.suivreDescrBd({id:n,f:o})},rechercherBdSelonIdVariable=t=>async(e,n,a)=>{const o=async u=>await e.bds.suivreVariablesBd({id:n,f:u}),l=rechercherSelonId(t);return await sousRecherche("variable",o,l,e,a)},rechercherBdSelonNomVariable=t=>async(e,n,a)=>{const o=async u=>await e.bds.suivreVariablesBd({id:n,f:u}),l=rechercherVariableSelonNom(t);return await sousRecherche("variable",o,l,e,a)},rechercherBdSelonVariable=t=>async(e,n,a)=>await combinerRecherches({id:rechercherBdSelonIdVariable(t),nom:rechercherBdSelonNomVariable(t)},e,n,a),rechercherBdSelonIdMotClef=t=>async(e,n,a)=>{const o=async u=>await e.bds.suivreMotsClefsBd({id:n,f:u}),l=rechercherSelonId(t);return await sousRecherche("motClef",o,l,e,a)},rechercherBdSelonNomMotClef=t=>async(e,n,a)=>{const o=async u=>await e.bds.suivreMotsClefsBd({id:n,f:u}),l=rechercherMotClefSelonNom(t);return await sousRecherche("motClef",o,l,e,a)},rechercherBdSelonMotClef=t=>async(e,n,a)=>await combinerRecherches({id:rechercherBdSelonIdMotClef(t),nom:rechercherBdSelonNomMotClef(t)},e,n,a),rechercherBdSelonTexte=t=>async(e,n,a)=>await combinerRecherches({nom:rechercherBdSelonNom(t),descr:rechercherBdSelonDescr(t),variables:rechercherBdSelonVariable(t),motsClefs:rechercherBdSelonMotClef(t),id:rechercherSelonId(t)},e,n,a),rechercherProjetSelonNom=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,clef:y,info:b,de:"nom"})}else a()};return await e.projets.suivreNomsProjet({id:n,f:o})},rechercherProjetSelonDescr=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,clef:y,info:b,de:"descr"})}else a()};return await e.projets.suivreDescrProjet({id:n,f:o})},rechercherProjetSelonIdBd=t=>async(e,n,a)=>{const o=async u=>await e.projets.suivreBdsProjet({id:n,f:u}),l=rechercherSelonId(t);return await sousRecherche("bd",o,l,e,a)},rechercherProjetSelonBd=t=>async(e,n,a)=>{const o=async u=>await e.projets.suivreBdsProjet({id:n,f:u}),l=rechercherBdSelonTexte(t);return await sousRecherche("bd",o,l,e,a)},rechercherProjetSelonIdVariable=t=>async(e,n,a)=>{const o=async u=>await e.projets.suivreVariablesProjet({id:n,f:u}),l=rechercherSelonId(t);return await sousRecherche("variable",o,l,e,a)},rechercherProjetSelonNomVariable=t=>async(e,n,a)=>{const o=async u=>await e.projets.suivreVariablesProjet({id:n,f:u}),l=rechercherVariableSelonNom(t);return await sousRecherche("variable",o,l,e,a)},rechercherProjetSelonVariable=t=>async(e,n,a)=>{const o=async u=>await e.projets.suivreVariablesProjet({id:n,f:u}),l=rechercherVariableSelonTexte(t);return await sousRecherche("variable",o,l,e,a)},rechercherProjetSelonIdMotClef=t=>async(e,n,a)=>{const o=async u=>await e.projets.suivreMotsClefsProjet({idProjet:n,f:u}),l=rechercherSelonId(t);return await sousRecherche("motClef",o,l,e,a)},rechercherProjetSelonNomMotClef=t=>async(e,n,a)=>{const o=async u=>await e.projets.suivreMotsClefsProjet({idProjet:n,f:u}),l=rechercherMotClefSelonNom(t);return await sousRecherche("motClef",o,l,e,a)},rechercherProjetSelonMotClef=t=>async(e,n,a)=>{const o=async u=>await e.projets.suivreMotsClefsProjet({idProjet:n,f:u}),l=rechercherMotClefSelonTexte(t);return await sousRecherche("motClef",o,l,e,a)},rechercherProjetSelonTexte=t=>async(e,n,a)=>{const o=rechercherProjetSelonNom(t),l=rechercherProjetSelonDescr(t),u=rechercherProjetSelonBd(t),d=rechercherProjetSelonVariable(t),m=rechercherProjetSelonMotClef(t),y=rechercherSelonId(t);return await combinerRecherches({noms:o,descr:l,bd:u,variable:d,motClef:m,id:y},e,n,a)},rechercherNuéeSelonNom=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,clef:y,info:b,de:"nom"})}else a()};return await e.nuées.suivreNomsNuée({idNuée:n,f:o})},rechercherNuéeSelonDescr=t=>async(e,n,a)=>{const o=u=>{const d=similTexte(t,u);if(d){const{score:m,clef:y,info:b}=d;a({type:"résultat",score:m,clef:y,info:b,de:"descr"})}else a()};return await e.nuées.suivreDescriptionsNuée({idNuée:n,f:o})},rechercherNuéeSelonIdVariable=t=>async(e,n,a)=>{const o=async u=>await e.nuées.suivreVariablesNuée({idNuée:n,f:u}),l=rechercherSelonId(t);return await sousRecherche("variable",o,l,e,a)},rechercherNuéeSelonNomVariable=t=>async(e,n,a)=>{const o=async u=>await e.nuées.suivreVariablesNuée({idNuée:n,f:u}),l=rechercherVariableSelonNom(t);return await sousRecherche("variable",o,l,e,a)},rechercherNuéeSelonVariable=t=>async(e,n,a)=>await combinerRecherches({id:rechercherNuéeSelonIdVariable(t),nom:rechercherNuéeSelonNomVariable(t)},e,n,a),rechercherNuéeSelonIdMotClef=t=>async(e,n,a)=>{const o=async u=>await e.nuées.suivreMotsClefsNuée({idNuée:n,f:u}),l=rechercherSelonId(t);return await sousRecherche("motClef",o,l,e,a)},rechercherNuéeSelonNomMotClef=t=>async(e,n,a)=>{const o=async u=>await e.nuées.suivreMotsClefsNuée({idNuée:n,f:u}),l=rechercherMotClefSelonNom(t);return await sousRecherche("motClef",o,l,e,a)},rechercherNuéeSelonMotClef=t=>async(e,n,a)=>await combinerRecherches({id:rechercherNuéeSelonIdMotClef(t),nom:rechercherNuéeSelonNomMotClef(t)},e,n,a),rechercherNuéeSelonTexte=t=>async(e,n,a)=>await combinerRecherches({nom:rechercherNuéeSelonNom(t),descr:rechercherNuéeSelonDescr(t),variables:rechercherNuéeSelonVariable(t),motsClefs:rechercherNuéeSelonMotClef(t),id:rechercherSelonId(t)},e,n,a);class Recherche{constructor({client:e}){ut(this,"client");this.client=e}async rechercherVariables({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherVariables({f:e,nRésultatsDésirés:n})}async rechercherVariableSelonId({idVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherVariableSelonNom({nomVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherVariableSelonNom(e);return await this.client.réseau.rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherVariableSelonDescr({descrVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherVariableSelonDescr(e);return await this.client.réseau.rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherVariableSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherVariableSelonTexte(e);return await this.client.réseau.rechercherVariables({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherMotsClefs({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherMotsClefs({f:e,nRésultatsDésirés:n})}async rechercherMotClefSelonId({idMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherMotsClefs({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherMotClefSelonNom({nomMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherMotClefSelonNom(e);return await this.client.réseau.rechercherMotsClefs({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherMotClefSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherMotClefSelonTexte(e);return await this.client.réseau.rechercherMotsClefs({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBds({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherBds({f:e,nRésultatsDésirés:n})}async rechercherBdSelonId({idBd:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonNom({nomBd:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonNom(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonDescr({descrBd:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonDescr(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonIdMotClef({idMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonIdMotClef(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonIdVariable({idVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonIdVariable(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonNomMotClef({nomMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonNomMotClef(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonNomVariable({nomVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonNomVariable(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonMotClef({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonMotClef(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonVariable({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonVariable(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherBdSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherBdSelonTexte(e);return await this.client.réseau.rechercherBds({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjets({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherProjets({f:e,nRésultatsDésirés:n})}async rechercherProfilSelonId({idCompte:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProfilSelonNom({nom:e,f:n,nRésultatsDésirés:a}){const o=rechercherProfilSelonNom(e);return await this.client.réseau.rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProfilSelonImage({image:e,f:n,nRésultatsDésirés:a}){const o=rechercherProfilSelonImage(e);return await this.client.réseau.rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProfilSelonActivité({f:e,nRésultatsDésirés:n}){const a=rechercherProfilSelonActivité();return await this.client.réseau.rechercherMembres({f:e,nRésultatsDésirés:n,fObjectif:a})}async rechercherProfilSelonCourriel({courriel:e,f:n,nRésultatsDésirés:a}){const o=rechercherProfilSelonCourriel(e);return await this.client.réseau.rechercherMembres({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonId({idProjet:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonNom({nomProjet:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonNom(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonDescr({descrProjet:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonDescr(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonIdVariable({idVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonIdVariable(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonNomVariable({nomVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonNomVariable(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonVariable({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonVariable(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonIdMotClef({idMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonIdMotClef(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonNomMotClef({nomMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonNomMotClef(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonMotClef({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonMotClef(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonIdBd({idBd:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonIdBd(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonBd({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonBd(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherProjetSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherProjetSelonTexte(e);return await this.client.réseau.rechercherProjets({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuées({f:e,nRésultatsDésirés:n}){return await this.client.réseau.rechercherNuées({f:e,nRésultatsDésirés:n})}async rechercherNuéeSelonId({idNuée:e,f:n,nRésultatsDésirés:a}){const o=rechercherSelonId(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonNom({nomNuée:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonNom(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonDescr({descrNuée:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonDescr(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonIdMotClef({idMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonIdMotClef(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonIdVariable({idVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonIdVariable(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonNomMotClef({nomMotClef:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonNomMotClef(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonNomVariable({nomVariable:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonNomVariable(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonMotClef({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonMotClef(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonVariable({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonVariable(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}async rechercherNuéeSelonTexte({texte:e,f:n,nRésultatsDésirés:a}){const o=rechercherNuéeSelonTexte(e);return await this.client.réseau.rechercherNuées({f:n,nRésultatsDésirés:a,fObjectif:o})}}__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariables",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariableSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariableSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariableSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherVariableSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotsClefs",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotClefSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotClefSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherMotClefSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBds",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonIdMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonIdVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonNomMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonNomVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherBdSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjets",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonImage",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonActivité",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProfilSelonCourriel",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonIdVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonNomVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonIdMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonNomMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonIdBd",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonBd",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherProjetSelonTexte",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuées",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonId",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonNom",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonDescr",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonIdMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonIdVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonNomMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonNomVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonMotClef",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonVariable",null);__decorate([cacheRechercheParNRésultats],Recherche.prototype,"rechercherNuéeSelonTexte",null);function bind(t,e){return function(){return t.apply(e,arguments)}}const{toString:toString$2}=Object.prototype,{getPrototypeOf}=Object,kindOf=(t=>e=>{const n=toString$2.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=t=>(t=t.toLowerCase(),e=>kindOf(e)===t),typeOfTest=t=>e=>typeof e===t,{isArray:isArray$2}=Array,isUndefined=typeOfTest("undefined");function isBuffer(t){return t!==null&&!isUndefined(t)&&t.constructor!==null&&!isUndefined(t.constructor)&&isFunction$1(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&isArrayBuffer(t.buffer),e}const isString$1=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber$1=typeOfTest("number"),isObject$1=t=>t!==null&&typeof t=="object",isBoolean$1=t=>t===!0||t===!1,isPlainObject$1=t=>{if(kindOf(t)!=="object")return!1;const e=getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},isDate$1=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=t=>isObject$1(t)&&isFunction$1(t.pipe),isFormData=t=>{const e="[object FormData]";return t&&(typeof FormData=="function"&&t instanceof FormData||toString$2.call(t)===e||isFunction$1(t.toString)&&t.toString()===e)},isURLSearchParams=kindOfTest("URLSearchParams"),trim=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let a,o;if(typeof t!="object"&&(t=[t]),isArray$2(t))for(a=0,o=t.length;a<o;a++)e.call(null,t[a],a,t);else{const l=n?Object.getOwnPropertyNames(t):Object.keys(t),u=l.length;let d;for(a=0;a<u;a++)d=l[a],e.call(null,t[d],d,t)}}function findKey(t,e){e=e.toLowerCase();const n=Object.keys(t);let a=n.length,o;for(;a-- >0;)if(o=n[a],e===o.toLowerCase())return o;return null}const _global=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global$1)(),isContextDefined=t=>!isUndefined(t)&&t!==_global;function merge$5(){const{caseless:t}=isContextDefined(this)&&this||{},e={},n=(a,o)=>{const l=t&&findKey(e,o)||o;isPlainObject$1(e[l])&&isPlainObject$1(a)?e[l]=merge$5(e[l],a):isPlainObject$1(a)?e[l]=merge$5({},a):isArray$2(a)?e[l]=a.slice():e[l]=a};for(let a=0,o=arguments.length;a<o;a++)arguments[a]&&forEach(arguments[a],n);return e}const extend=(t,e,n,{allOwnKeys:a}={})=>(forEach(e,(o,l)=>{n&&isFunction$1(o)?t[l]=bind(o,n):t[l]=o},{allOwnKeys:a}),t),stripBOM=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),inherits=(t,e,n,a)=>{t.prototype=Object.create(e.prototype,a),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject=(t,e,n,a)=>{let o,l,u;const d={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),l=o.length;l-- >0;)u=o[l],(!a||a(u,t,e))&&!d[u]&&(e[u]=t[u],d[u]=!0);t=n!==!1&&getPrototypeOf(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},endsWith=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const a=t.indexOf(e,n);return a!==-1&&a===n},toArray=t=>{if(!t)return null;if(isArray$2(t))return t;let e=t.length;if(!isNumber$1(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},isTypedArray=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&getPrototypeOf(Uint8Array)),forEachEntry=(t,e)=>{const a=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=a.next())&&!o.done;){const l=o.value;e.call(t,l[0],l[1])}},matchAll=(t,e)=>{let n;const a=[];for(;(n=t.exec(e))!==null;)a.push(n);return a},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=t=>t.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(n,a,o){return a.toUpperCase()+o}),hasOwnProperty$2=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),isRegExp$1=kindOfTest("RegExp"),reduceDescriptors=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),a={};forEach(n,(o,l)=>{e(o,l,t)!==!1&&(a[l]=o)}),Object.defineProperties(t,a)},freezeMethods=t=>{reduceDescriptors(t,(e,n)=>{if(isFunction$1(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=t[n];if(isFunction$1(a)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},toObjectSet=(t,e)=>{const n={},a=o=>{o.forEach(l=>{n[l]=!0})};return isArray$2(t)?a(t):a(String(t).split(e)),n},noop$1=()=>{},toFiniteNumber=(t,e)=>(t=+t,Number.isFinite(t)?t:e),toJSONObject=t=>{const e=new Array(10),n=(a,o)=>{if(isObject$1(a)){if(e.indexOf(a)>=0)return;if(!("toJSON"in a)){e[o]=a;const l=isArray$2(a)?[]:{};return forEach(a,(u,d)=>{const m=n(u,o+1);!isUndefined(m)&&(l[d]=m)}),e[o]=void 0,l}}return a};return n(t,0)},utils={isArray:isArray$2,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString:isString$1,isNumber:isNumber$1,isBoolean:isBoolean$1,isObject:isObject$1,isPlainObject:isPlainObject$1,isUndefined,isDate:isDate$1,isFile,isBlob,isRegExp:isRegExp$1,isFunction:isFunction$1,isStream,isURLSearchParams,isTypedArray,isFileList,forEach,merge:merge$5,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,forEachEntry,matchAll,isHTMLForm,hasOwnProperty:hasOwnProperty$2,hasOwnProp:hasOwnProperty$2,reduceDescriptors,freezeMethods,toObjectSet,toCamelCase,noop:noop$1,toFiniteNumber,findKey,global:_global,isContextDefined,toJSONObject};function AxiosError(t,e,n,a,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),a&&(this.request=a),o&&(this.response=o)}utils.inherits(AxiosError,Error,{toJSON:function t(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const prototype$1=AxiosError.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{descriptors[t]={value:t}});Object.defineProperties(AxiosError,descriptors);Object.defineProperty(prototype$1,"isAxiosError",{value:!0});AxiosError.from=(t,e,n,a,o,l)=>{const u=Object.create(prototype$1);return utils.toFlatObject(t,u,function(m){return m!==Error.prototype},d=>d!=="isAxiosError"),AxiosError.call(u,t.message,e,n,a,o),u.cause=t,u.name=t.name,l&&Object.assign(u,l),u};var browser$1=typeof self=="object"?self.FormData:window.FormData;const FormData$2=browser$1;function isVisitable(t){return utils.isPlainObject(t)||utils.isArray(t)}function removeBrackets(t){return utils.endsWith(t,"[]")?t.slice(0,-2):t}function renderKey(t,e,n){return t?t.concat(e).map(function(o,l){return o=removeBrackets(o),!n&&l?"["+o+"]":o}).join(n?".":""):e}function isFlatArray(t){return utils.isArray(t)&&!t.some(isVisitable)}const predicates=utils.toFlatObject(utils,{},null,function t(e){return/^is[A-Z]/.test(e)});function isSpecCompliant(t){return t&&utils.isFunction(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator]}function toFormData(t,e,n){if(!utils.isObject(t))throw new TypeError("target must be an object");e=e||new(FormData$2||FormData),n=utils.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(C,k){return!utils.isUndefined(k[C])});const a=n.metaTokens,o=n.visitor||b,l=n.dots,u=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&isSpecCompliant(e);if(!utils.isFunction(o))throw new TypeError("visitor must be a function");function y(A){if(A===null)return"";if(utils.isDate(A))return A.toISOString();if(!m&&utils.isBlob(A))throw new AxiosError("Blob is not supported. Use a Buffer instead.");return utils.isArrayBuffer(A)||utils.isTypedArray(A)?m&&typeof Blob=="function"?new Blob([A]):Buffer$y.from(A):A}function b(A,C,k){let B=A;if(A&&!k&&typeof A=="object"){if(utils.endsWith(C,"{}"))C=a?C:C.slice(0,-2),A=JSON.stringify(A);else if(utils.isArray(A)&&isFlatArray(A)||utils.isFileList(A)||utils.endsWith(C,"[]")&&(B=utils.toArray(A)))return C=removeBrackets(C),B.forEach(function(q,j){!(utils.isUndefined(q)||q===null)&&e.append(u===!0?renderKey([C],j,l):u===null?C:C+"[]",y(q))}),!1}return isVisitable(A)?!0:(e.append(renderKey(k,C,l),y(A)),!1)}const _=[],w=Object.assign(predicates,{defaultVisitor:b,convertValue:y,isVisitable});function E(A,C){if(!utils.isUndefined(A)){if(_.indexOf(A)!==-1)throw Error("Circular reference detected in "+C.join("."));_.push(A),utils.forEach(A,function(B,D){(!(utils.isUndefined(B)||B===null)&&o.call(e,B,utils.isString(D)?D.trim():D,C,w))===!0&&E(B,C?C.concat(D):[D])}),_.pop()}}if(!utils.isObject(t))throw new TypeError("data must be an object");return E(t),e}function encode$6(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(a){return e[a]})}function AxiosURLSearchParams(t,e){this._pairs=[],t&&toFormData(t,this,e)}const prototype=AxiosURLSearchParams.prototype;prototype.append=function t(e,n){this._pairs.push([e,n])};prototype.toString=function t(e){const n=e?function(a){return e.call(this,a,encode$6)}:encode$6;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function encode$5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(t,e,n){if(!e)return t;const a=n&&n.encode||encode$5,o=n&&n.serialize;let l;if(o?l=o(e,n):l=utils.isURLSearchParams(e)?e.toString():new AxiosURLSearchParams(e,n).toString(a),l){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class InterceptorManager{constructor(){this.handlers=[]}use(e,n,a){return this.handlers.push({fulfilled:e,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils.forEach(this.handlers,function(a){a!==null&&e(a)})}}const InterceptorManager$1=InterceptorManager,transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$3=typeof URLSearchParams<"u"?URLSearchParams:AxiosURLSearchParams,FormData$1=FormData,isStandardBrowserEnv=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),isStandardBrowserWebWorkerEnv=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),platform={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$3,FormData:FormData$1,Blob},isStandardBrowserEnv,isStandardBrowserWebWorkerEnv,protocols:["http","https","file","blob","url","data"]};function toURLEncodedForm(t,e){return toFormData(t,new platform.classes.URLSearchParams,Object.assign({visitor:function(n,a,o,l){return platform.isNode&&utils.isBuffer(n)?(this.append(a,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function parsePropPath(t){return utils.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function arrayToObject(t){const e={},n=Object.keys(t);let a;const o=n.length;let l;for(a=0;a<o;a++)l=n[a],e[l]=t[l];return e}function formDataToJSON(t){function e(n,a,o,l){let u=n[l++];const d=Number.isFinite(+u),m=l>=n.length;return u=!u&&utils.isArray(o)?o.length:u,m?(utils.hasOwnProp(o,u)?o[u]=[o[u],a]:o[u]=a,!d):((!o[u]||!utils.isObject(o[u]))&&(o[u]=[]),e(n,a,o[u],l)&&utils.isArray(o[u])&&(o[u]=arrayToObject(o[u])),!d)}if(utils.isFormData(t)&&utils.isFunction(t.entries)){const n={};return utils.forEachEntry(t,(a,o)=>{e(parsePropPath(a),o,n,0)}),n}return null}const DEFAULT_CONTENT_TYPE={"Content-Type":void 0};function stringifySafely(t,e,n){if(utils.isString(t))try{return(e||JSON.parse)(t),utils.trim(t)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(t)}const defaults$2={transitional:transitionalDefaults,adapter:["xhr","http"],transformRequest:[function t(e,n){const a=n.getContentType()||"",o=a.indexOf("application/json")>-1,l=utils.isObject(e);if(l&&utils.isHTMLForm(e)&&(e=new FormData(e)),utils.isFormData(e))return o&&o?JSON.stringify(formDataToJSON(e)):e;if(utils.isArrayBuffer(e)||utils.isBuffer(e)||utils.isStream(e)||utils.isFile(e)||utils.isBlob(e))return e;if(utils.isArrayBufferView(e))return e.buffer;if(utils.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(l){if(a.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((d=utils.isFileList(e))||a.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return toFormData(d?{"files[]":e}:e,m&&new m,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function t(e){const n=this.transitional||defaults$2.transitional,a=n&&n.forcedJSONParsing,o=this.responseType==="json";if(e&&utils.isString(e)&&(a&&!this.responseType||o)){const u=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(d){if(u)throw d.name==="SyntaxError"?AxiosError.from(d,AxiosError.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function t(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils.forEach(["delete","get","head"],function t(e){defaults$2.headers[e]={}});utils.forEach(["post","put","patch"],function t(e){defaults$2.headers[e]=utils.merge(DEFAULT_CONTENT_TYPE)});const defaults$3=defaults$2,ignoreDuplicateOf=utils.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders$1=t=>{const e={};let n,a,o;return t&&t.split(`
`).forEach(function(u){o=u.indexOf(":"),n=u.substring(0,o).trim().toLowerCase(),a=u.substring(o+1).trim(),!(!n||e[n]&&ignoreDuplicateOf[n])&&(n==="set-cookie"?e[n]?e[n].push(a):e[n]=[a]:e[n]=e[n]?e[n]+", "+a:a)}),e},$internals=Symbol("internals");function normalizeHeader(t){return t&&String(t).trim().toLowerCase()}function normalizeValue(t){return t===!1||t==null?t:utils.isArray(t)?t.map(normalizeValue):String(t)}function parseTokens(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(t);)e[a[1]]=a[2];return e}function isValidHeaderName(t){return/^[-_a-zA-Z]+$/.test(t.trim())}function matchHeaderValue(t,e,n,a){if(utils.isFunction(a))return a.call(this,e,n);if(utils.isString(e)){if(utils.isString(a))return e.indexOf(a)!==-1;if(utils.isRegExp(a))return a.test(e)}}function formatHeader(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,a)=>n.toUpperCase()+a)}function buildAccessors(t,e){const n=utils.toCamelCase(" "+e);["get","set","has"].forEach(a=>{Object.defineProperty(t,a+n,{value:function(o,l,u){return this[a].call(this,e,o,l,u)},configurable:!0})})}class AxiosHeaders{constructor(e){e&&this.set(e)}set(e,n,a){const o=this;function l(d,m,y){const b=normalizeHeader(m);if(!b)throw new Error("header name must be a non-empty string");const _=utils.findKey(o,b);(!_||o[_]===void 0||y===!0||y===void 0&&o[_]!==!1)&&(o[_||m]=normalizeValue(d))}const u=(d,m)=>utils.forEach(d,(y,b)=>l(y,b,m));return utils.isPlainObject(e)||e instanceof this.constructor?u(e,n):utils.isString(e)&&(e=e.trim())&&!isValidHeaderName(e)?u(parseHeaders$1(e),n):e!=null&&l(n,e,a),this}get(e,n){if(e=normalizeHeader(e),e){const a=utils.findKey(this,e);if(a){const o=this[a];if(!n)return o;if(n===!0)return parseTokens(o);if(utils.isFunction(n))return n.call(this,o,a);if(utils.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=normalizeHeader(e),e){const a=utils.findKey(this,e);return!!(a&&(!n||matchHeaderValue(this,this[a],a,n)))}return!1}delete(e,n){const a=this;let o=!1;function l(u){if(u=normalizeHeader(u),u){const d=utils.findKey(a,u);d&&(!n||matchHeaderValue(a,a[d],d,n))&&(delete a[d],o=!0)}}return utils.isArray(e)?e.forEach(l):l(e),o}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(e){const n=this,a={};return utils.forEach(this,(o,l)=>{const u=utils.findKey(a,l);if(u){n[u]=normalizeValue(o),delete n[l];return}const d=e?formatHeader(l):String(l).trim();d!==l&&delete n[l],n[d]=normalizeValue(o),a[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return utils.forEach(this,(a,o)=>{a!=null&&a!==!1&&(n[o]=e&&utils.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const a=new this(e);return n.forEach(o=>a.set(o)),a}static accessor(e){const a=(this[$internals]=this[$internals]={accessors:{}}).accessors,o=this.prototype;function l(u){const d=normalizeHeader(u);a[d]||(buildAccessors(o,u),a[d]=!0)}return utils.isArray(e)?e.forEach(l):l(e),this}}AxiosHeaders.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);utils.freezeMethods(AxiosHeaders.prototype);utils.freezeMethods(AxiosHeaders);const AxiosHeaders$1=AxiosHeaders;function transformData(t,e){const n=this||defaults$3,a=e||n,o=AxiosHeaders$1.from(a.headers);let l=a.data;return utils.forEach(t,function(d){l=d.call(n,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function isCancel(t){return!!(t&&t.__CANCEL__)}function CanceledError(t,e,n){AxiosError.call(this,t??"canceled",AxiosError.ERR_CANCELED,e,n),this.name="CanceledError"}utils.inherits(CanceledError,AxiosError,{__CANCEL__:!0});const httpAdapter=null;function settle(t,e,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?t(n):e(new AxiosError("Request failed with status code "+n.status,[AxiosError.ERR_BAD_REQUEST,AxiosError.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const cookies=platform.isStandardBrowserEnv?function t(){return{write:function(n,a,o,l,u,d){const m=[];m.push(n+"="+encodeURIComponent(a)),utils.isNumber(o)&&m.push("expires="+new Date(o).toGMTString()),utils.isString(l)&&m.push("path="+l),utils.isString(u)&&m.push("domain="+u),d===!0&&m.push("secure"),document.cookie=m.join("; ")},read:function(n){const a=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function t(){return{write:function(){},read:function(){return null},remove:function(){}}}();function isAbsoluteURL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function combineURLs(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function buildFullPath(t,e){return t&&!isAbsoluteURL(e)?combineURLs(t,e):e}const isURLSameOrigin=platform.isStandardBrowserEnv?function t(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let a;function o(l){let u=l;return e&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return a=o(window.location.href),function(u){const d=utils.isString(u)?o(u):u;return d.protocol===a.protocol&&d.host===a.host}}():function t(){return function(){return!0}}();function parseProtocol(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function speedometer(t,e){t=t||10;const n=new Array(t),a=new Array(t);let o=0,l=0,u;return e=e!==void 0?e:1e3,function(m){const y=Date.now(),b=a[l];u||(u=y),n[o]=m,a[o]=y;let _=l,w=0;for(;_!==o;)w+=n[_++],_=_%t;if(o=(o+1)%t,o===l&&(l=(l+1)%t),y-u<e)return;const E=b&&y-b;return E?Math.round(w*1e3/E):void 0}}function progressEventReducer(t,e){let n=0;const a=speedometer(50,250);return o=>{const l=o.loaded,u=o.lengthComputable?o.total:void 0,d=l-n,m=a(d),y=l<=u;n=l;const b={loaded:l,total:u,progress:u?l/u:void 0,bytes:d,rate:m||void 0,estimated:m&&u&&y?(u-l)/m:void 0,event:o};b[e?"download":"upload"]=!0,t(b)}}const isXHRAdapterSupported=typeof XMLHttpRequest<"u",xhrAdapter=isXHRAdapterSupported&&function(t){return new Promise(function(n,a){let o=t.data;const l=AxiosHeaders$1.from(t.headers).normalize(),u=t.responseType;let d;function m(){t.cancelToken&&t.cancelToken.unsubscribe(d),t.signal&&t.signal.removeEventListener("abort",d)}utils.isFormData(o)&&(platform.isStandardBrowserEnv||platform.isStandardBrowserWebWorkerEnv)&&l.setContentType(!1);let y=new XMLHttpRequest;if(t.auth){const E=t.auth.username||"",A=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";l.set("Authorization","Basic "+btoa(E+":"+A))}const b=buildFullPath(t.baseURL,t.url);y.open(t.method.toUpperCase(),buildURL(b,t.params,t.paramsSerializer),!0),y.timeout=t.timeout;function _(){if(!y)return;const E=AxiosHeaders$1.from("getAllResponseHeaders"in y&&y.getAllResponseHeaders()),C={data:!u||u==="text"||u==="json"?y.responseText:y.response,status:y.status,statusText:y.statusText,headers:E,config:t,request:y};settle(function(B){n(B),m()},function(B){a(B),m()},C),y=null}if("onloadend"in y?y.onloadend=_:y.onreadystatechange=function(){!y||y.readyState!==4||y.status===0&&!(y.responseURL&&y.responseURL.indexOf("file:")===0)||setTimeout(_)},y.onabort=function(){y&&(a(new AxiosError("Request aborted",AxiosError.ECONNABORTED,t,y)),y=null)},y.onerror=function(){a(new AxiosError("Network Error",AxiosError.ERR_NETWORK,t,y)),y=null},y.ontimeout=function(){let A=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const C=t.transitional||transitionalDefaults;t.timeoutErrorMessage&&(A=t.timeoutErrorMessage),a(new AxiosError(A,C.clarifyTimeoutError?AxiosError.ETIMEDOUT:AxiosError.ECONNABORTED,t,y)),y=null},platform.isStandardBrowserEnv){const E=(t.withCredentials||isURLSameOrigin(b))&&t.xsrfCookieName&&cookies.read(t.xsrfCookieName);E&&l.set(t.xsrfHeaderName,E)}o===void 0&&l.setContentType(null),"setRequestHeader"in y&&utils.forEach(l.toJSON(),function(A,C){y.setRequestHeader(C,A)}),utils.isUndefined(t.withCredentials)||(y.withCredentials=!!t.withCredentials),u&&u!=="json"&&(y.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&y.addEventListener("progress",progressEventReducer(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&y.upload&&y.upload.addEventListener("progress",progressEventReducer(t.onUploadProgress)),(t.cancelToken||t.signal)&&(d=E=>{y&&(a(!E||E.type?new CanceledError(null,t,y):E),y.abort(),y=null)},t.cancelToken&&t.cancelToken.subscribe(d),t.signal&&(t.signal.aborted?d():t.signal.addEventListener("abort",d)));const w=parseProtocol(b);if(w&&platform.protocols.indexOf(w)===-1){a(new AxiosError("Unsupported protocol "+w+":",AxiosError.ERR_BAD_REQUEST,t));return}y.send(o||null)})},knownAdapters={http:httpAdapter,xhr:xhrAdapter};utils.forEach(knownAdapters,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const adapters={getAdapter:t=>{t=utils.isArray(t)?t:[t];const{length:e}=t;let n,a;for(let o=0;o<e&&(n=t[o],!(a=utils.isString(n)?knownAdapters[n.toLowerCase()]:n));o++);if(!a)throw a===!1?new AxiosError(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(utils.hasOwnProp(knownAdapters,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!utils.isFunction(a))throw new TypeError("adapter is not a function");return a},adapters:knownAdapters};function throwIfCancellationRequested(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new CanceledError(null,t)}function dispatchRequest(t){return throwIfCancellationRequested(t),t.headers=AxiosHeaders$1.from(t.headers),t.data=transformData.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),adapters.getAdapter(t.adapter||defaults$3.adapter)(t).then(function(a){return throwIfCancellationRequested(t),a.data=transformData.call(t,t.transformResponse,a),a.headers=AxiosHeaders$1.from(a.headers),a},function(a){return isCancel(a)||(throwIfCancellationRequested(t),a&&a.response&&(a.response.data=transformData.call(t,t.transformResponse,a.response),a.response.headers=AxiosHeaders$1.from(a.response.headers))),Promise.reject(a)})}const headersToObject=t=>t instanceof AxiosHeaders$1?t.toJSON():t;function mergeConfig(t,e){e=e||{};const n={};function a(y,b,_){return utils.isPlainObject(y)&&utils.isPlainObject(b)?utils.merge.call({caseless:_},y,b):utils.isPlainObject(b)?utils.merge({},b):utils.isArray(b)?b.slice():b}function o(y,b,_){if(utils.isUndefined(b)){if(!utils.isUndefined(y))return a(void 0,y,_)}else return a(y,b,_)}function l(y,b){if(!utils.isUndefined(b))return a(void 0,b)}function u(y,b){if(utils.isUndefined(b)){if(!utils.isUndefined(y))return a(void 0,y)}else return a(void 0,b)}function d(y,b,_){if(_ in e)return a(y,b);if(_ in t)return a(void 0,y)}const m={url:l,method:l,data:l,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:d,headers:(y,b)=>o(headersToObject(y),headersToObject(b),!0)};return utils.forEach(Object.keys(t).concat(Object.keys(e)),function(b){const _=m[b]||o,w=_(t[b],e[b],b);utils.isUndefined(w)&&_!==d||(n[b]=w)}),n}const VERSION$2="1.2.4",validators$1={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{validators$1[t]=function(a){return typeof a===t||"a"+(e<1?"n ":" ")+t}});const deprecatedWarnings={};validators$1.transitional=function t(e,n,a){function o(l,u){return"[Axios v"+VERSION$2+"] Transitional option '"+l+"'"+u+(a?". "+a:"")}return(l,u,d)=>{if(e===!1)throw new AxiosError(o(u," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[u]&&(deprecatedWarnings[u]=!0,console.warn(o(u," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(l,u,d):!0}};function assertOptions(t,e,n){if(typeof t!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);const a=Object.keys(t);let o=a.length;for(;o-- >0;){const l=a[o],u=e[l];if(u){const d=t[l],m=d===void 0||u(d,l,t);if(m!==!0)throw new AxiosError("option "+l+" must be "+m,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+l,AxiosError.ERR_BAD_OPTION)}}const validator={assertOptions,validators:validators$1},validators=validator.validators;class Axios{constructor(e){this.defaults=e,this.interceptors={request:new InterceptorManager$1,response:new InterceptorManager$1}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=mergeConfig(this.defaults,n);const{transitional:a,paramsSerializer:o,headers:l}=n;a!==void 0&&validator.assertOptions(a,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),o!==void 0&&validator.assertOptions(o,{encode:validators.function,serialize:validators.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u;u=l&&utils.merge(l.common,l[n.method]),u&&utils.forEach(["delete","get","head","post","put","patch","common"],A=>{delete l[A]}),n.headers=AxiosHeaders$1.concat(u,l);const d=[];let m=!0;this.interceptors.request.forEach(function(C){typeof C.runWhen=="function"&&C.runWhen(n)===!1||(m=m&&C.synchronous,d.unshift(C.fulfilled,C.rejected))});const y=[];this.interceptors.response.forEach(function(C){y.push(C.fulfilled,C.rejected)});let b,_=0,w;if(!m){const A=[dispatchRequest.bind(this),void 0];for(A.unshift.apply(A,d),A.push.apply(A,y),w=A.length,b=Promise.resolve(n);_<w;)b=b.then(A[_++],A[_++]);return b}w=d.length;let E=n;for(_=0;_<w;){const A=d[_++],C=d[_++];try{E=A(E)}catch(k){C.call(this,k);break}}try{b=dispatchRequest.call(this,E)}catch(A){return Promise.reject(A)}for(_=0,w=y.length;_<w;)b=b.then(y[_++],y[_++]);return b}getUri(e){e=mergeConfig(this.defaults,e);const n=buildFullPath(e.baseURL,e.url);return buildURL(n,e.params,e.paramsSerializer)}}utils.forEach(["delete","get","head","options"],function t(e){Axios.prototype[e]=function(n,a){return this.request(mergeConfig(a||{},{method:e,url:n,data:(a||{}).data}))}});utils.forEach(["post","put","patch"],function t(e){function n(a){return function(l,u,d){return this.request(mergeConfig(d||{},{method:e,headers:a?{"Content-Type":"multipart/form-data"}:{},url:l,data:u}))}}Axios.prototype[e]=n(),Axios.prototype[e+"Form"]=n(!0)});const Axios$1=Axios;class CancelToken{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const a=this;this.promise.then(o=>{if(!a._listeners)return;let l=a._listeners.length;for(;l-- >0;)a._listeners[l](o);a._listeners=null}),this.promise.then=o=>{let l;const u=new Promise(d=>{a.subscribe(d),l=d}).then(o);return u.cancel=function(){a.unsubscribe(l)},u},e(function(l,u,d){a.reason||(a.reason=new CanceledError(l,u,d),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new CancelToken(function(o){e=o}),cancel:e}}}const CancelToken$1=CancelToken;function spread(t){return function(n){return t.apply(null,n)}}function isAxiosError(t){return utils.isObject(t)&&t.isAxiosError===!0}const HttpStatusCode={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(HttpStatusCode).forEach(([t,e])=>{HttpStatusCode[e]=t});const HttpStatusCode$1=HttpStatusCode;function createInstance(t){const e=new Axios$1(t),n=bind(Axios$1.prototype.request,e);return utils.extend(n,Axios$1.prototype,e,{allOwnKeys:!0}),utils.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return createInstance(mergeConfig(t,o))},n}const axios=createInstance(defaults$3);axios.Axios=Axios$1;axios.CanceledError=CanceledError;axios.CancelToken=CancelToken$1;axios.isCancel=isCancel;axios.VERSION=VERSION$2;axios.toFormData=toFormData;axios.AxiosError=AxiosError;axios.Cancel=axios.CanceledError;axios.all=function t(e){return Promise.all(e)};axios.spread=spread;axios.isAxiosError=isAxiosError;axios.mergeConfig=mergeConfig;axios.AxiosHeaders=AxiosHeaders$1;axios.formToJSON=t=>formDataToJSON(utils.isHTMLForm(t)?new FormData(t):t);axios.HttpStatusCode=HttpStatusCode$1;axios.default=axios;const axios$1=axios;async function importerJSONdURL(t){return await(await axios$1.get(t)).data}async function importerFeuilleCalculDURL(t,e){const a=(await axios$1.get(t,{responseType:"arraybuffer"})).data,l=Object.assign({type:"buffer",cellDates:!0},e||{});return readSync(a,l)}class ImportateurFeuilleCalcul{constructor(e){ut(this,"doc");this.doc=e}obtNomsTableaux(){return this.doc.SheetNames}obtColsTableau(e){const n=this.doc.Sheets[e];return utils$1.sheet_to_json(n,{header:1})[0]}obtDonnées(e,n){const a=this.doc.Sheets[e],o=utils$1.sheet_to_json(a);if(Array.isArray(n))return o.map(l=>Object.fromEntries(Object.keys(l).filter(u=>n.includes(u)).map(u=>[u,l[u]])));{const l=Object.fromEntries(Object.entries(n).map(([u,d])=>[d,u]));return o.map(u=>Object.fromEntries(Object.keys(u).filter(d=>Object.keys(l).includes(d)).map(d=>[l[d],u[d]])))}}}const copieProfonde=t=>JSON.parse(JSON.stringify(t)),estUnDic=t=>typeof t=="object"&&!Array.isArray(t),estUneListe=t=>Array.isArray(t),extraireBranches=(t,e)=>{let n;if(!e.length)return n=estUnDic(t)?Object.values(t):t,{base:{},branches:n};const a=extraireDonnées(t,e.slice(0,e.length-1)),o=e[e.length-1];let l;if(typeof o=="number")if(estUneListe(a)){const u=a[o];if(typeof u!="object")throw new Error(u.toString());l=u,delete a[o]}else throw new Error(`${o} ne peut pas indexer une liste.`);else if(typeof o=="string")if(estUnDic(a)){const u=a[o];if(typeof u!="object")throw new Error(u.toString());l=u,delete a[o]}else throw new Error(`${o} ne peut pas indexer un objet.`);else throw new Error(`${o} n'est pas une clef valide.`);if(estUnDic(l))n=Object.values(l);else if(estUneListe(l))n=l;else throw Error(JSON.stringify(l));return{base:t,branches:n}},injecterBranche=(t,e,n)=>{if(!e.length)Object.assign(t,n);else{const a=e.slice(1,e.length),o=extraireDonnées(t,a),l=e[e.length-1];if(typeof l=="number")if(estUneListe(o))o[l]=n;else throw new Error(`${l} ne peut pas indexer une liste.`);else if(typeof l=="string")if(estUnDic(o))o[l]=n;else throw new Error(`${l} ne peut pas indexer un objet.`);else throw new Error(`${l} n'est pas une clef valide.`)}},aplatirDonnées=(t,e=[],n,a=[])=>{e[e.length-1]!==null&&e.push(null);const o=e.indexOf(null),l=e.slice(0,o),u=e.slice(o+1,e.length),{base:d,branches:m}=extraireBranches(t,l);for(const y of m){if(typeof y!="object")throw new Error(y.toString());const b=copieProfonde(d);injecterBranche(b,l,y),u.length?aplatirDonnées(y,u,b,a):a.push(b)}return a},extraireDonnées=(t,e)=>{let n=t;for(const a of e)if(typeof a=="number")if(estUneListe(n))n=n[a];else throw new Error(`${a} ne peut pas indexer une liste.`);else if(typeof a=="string")if(estUnDic(n))n=n[a];else throw new Error(`${a} ne peut pas indexer un objet.`);else throw new Error(`Clef de type non indexable : ${a}`);return n};class ImportateurDonnéesJSON{constructor(e){ut(this,"donnéesJSON");this.donnéesJSON=e}obtDonnées(e,n,a){let o=[],l=extraireDonnées(this.donnéesJSON,e);if(typeof l!="object")throw new Error(`Type de données erroné : ${l.toString()}`);l=aplatirDonnées(l,n);for(const u of l){if(typeof u!="object")throw new Error(`Élément de type non supporté : ${u}`);o=[Object.fromEntries(Object.keys(a).map(m=>{const y=a[m];let b;try{b=extraireDonnées(u,y)}catch{b=void 0}return[m,b]}).filter(m=>m[1]!==void 0)),...o]}return o}}set_fs(net);const obtTempsInterval=t=>{const{n:e,unités:n}=t;switch(n){case"années":return e*365.25*24*60*60*1e3;case"mois":return e*30*24*60*60*1e3;case"semaines":return e*7*24*60*60*1e3;case"jours":return e*24*60*60*1e3;case"heures":return e*60*60*1e3;case"minutes":return e*60*1e3;case"secondes":return e*1e3;case"millisecondes":return e;default:throw new Error(n)}},obtDonnéesImportation=async t=>{const{typeSource:e}=t.source,{formatDonnées:n}=t.source.info;switch(e){case"url":{const{url:a}=t.source;switch(n){case"json":{const{clefsRacine:o,clefsÉléments:l,cols:u}=t.source.info,d=await importerJSONdURL(a);return new ImportateurDonnéesJSON(d).obtDonnées(o,l,u)}case"feuilleCalcul":{const{nomTableau:o,cols:l,optionsXLSX:u}=t.source.info,d=await importerFeuilleCalculDURL(a,u);return new ImportateurFeuilleCalcul(d).obtDonnées(o,l)}default:throw new Error(n)}}case"fichier":{const{adresseFichier:a}=t.source;switch(n){case"json":{const{clefsRacine:o,clefsÉléments:l,cols:u}=t.source.info,d=await net.promises.readFile(a),m=JSON.parse(d.toString());return new ImportateurDonnéesJSON(m).obtDonnées(o,l,u)}case"feuilleCalcul":{const{nomTableau:o,cols:l}=t.source.info,u=readFileSync(a);return new ImportateurFeuilleCalcul(u).obtDonnées(o,l)}default:throw new Error(n)}}default:throw new Error(e)}},générerFExportation=(t,e)=>async()=>{switch(t.typeObjet){case"tableau":{const n=await e.tableaux.exporterDonnées({idTableau:t.idObjet,langues:t.langues});await e.bds.exporterDocumentDonnées({données:n,formatDoc:t.formatDoc,dir:t.dir,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"bd":{const n=await e.bds.exporterDonnées({id:t.idObjet,langues:t.langues});await e.bds.exporterDocumentDonnées({données:n,formatDoc:t.formatDoc,dir:t.dir,inclureFichiersSFIP:t.inclureFichiersSFIP});break}case"projet":{const n=await e.projets.exporterDonnées({id:t.idObjet,langues:t.langues});await e.projets.exporterDocumentDonnées({données:n,formatDoc:t.formatDoc,dir:t.dir,inclureFichiersSFIP:t.inclureFichiersSFIP});break}default:throw new Error(t.typeObjet)}},générerFAuto=(t,e)=>{switch(t.type){case"importation":return async()=>{const n=t,a=await obtDonnéesImportation(n);await e.tableaux.importerDonnées({idTableau:n.idTableau,données:a})};case"exportation":return générerFExportation(t,e);default:throw new Error(t.type)}},lancerAutomatisation=async({spéc:t,idSpéc:e,client:n,fÉtat:a})=>{const o=générerFAuto(t,n),l=`auto: ${e}`,u=t.fréquence?obtTempsInterval(t.fréquence):void 0,d=new src$4;let m="";const y=async b=>{const _=await n.obtDeStockageLocal({clef:l});if(b===_)return;if(m=b,await d.acquire("opération"),b!==m){d.release("opération");return}await n.sauvegarderAuStockageLocal({clef:l,val:b});const w={type:"sync",depuis:new Date().getTime()};a(w);try{if(await o(),u){const E={type:"programmée",à:Date.now()+u};a(E)}else a({type:"écoute"})}catch(E){const A={type:"erreur",erreur:E.toString(),prochaineProgramméeÀ:u?Date.now()+u:void 0};a(A)}d.release("opération")};if(t.fréquence){a({type:"programmée",à:u});const _={},w=async()=>{const q=new Date().getTime();await y(q.toString());const j=setTimeout(w,u);_.f=async()=>clearTimeout(j)},E=new Date().getTime(),A=await n.obtDeStockageLocal({clef:l}),C=A?parseInt(A):-1/0,k=E-C,B=setTimeout(w,Math.max(u-k,0));return _.f=async()=>clearTimeout(B),async()=>{_.f&&await _.f()}}else switch(a({type:"écoute"}),t.type){case"exportation":{const _=t;return await n.suivreEmpreinteTêtesBdRécursive({idBd:_.idObjet,f:y})}case"importation":{const _=t;switch(_.source.typeSource){case"fichier":{if(!isNode&&!isElectronMain)throw new Error("L'automatisation de l'importation des fichiers locaux n'est pas disponible sur la version apli internet de Constellation.");const w=await __vitePreload(()=>import("chokidar"),[]),E=_.source,A=w.watch(E.adresseFichier);A.on("change",async()=>{const q=new Date().getTime().toString();y(q)});const C=net.statSync(E.adresseFichier).mtime.getTime(),k=await n.obtDeStockageLocal({clef:l});if(k?C>parseInt(k):!0){const q=new Date().getTime().toString();y(q)}return async()=>await A.close()}case"url":return a({type:"erreur",erreur:"La fréquence d'une automatisation d'importation d'URL doit être spécifiée.",prochaineProgramméeÀ:void 0}),faisRien;default:throw new Error(_.source.typeSource)}}default:throw new Error(t.type)}};class AutomatisationActive extends eventsExports.EventEmitter{constructor(n,a,o){super();ut(this,"client");ut(this,"idSpéc");ut(this,"état");ut(this,"fOublier");this.client=o,lancerAutomatisation({spéc:n,idSpéc:a,client:this.client,fÉtat:l=>{this.état=l,this.emit("misÀJour")}}).then(l=>{this.fOublier=l,this.emit("prêt")})}async fermer(){this.fOublier||await new Promise(n=>{this.once("prêt",()=>{n()})}),this.fOublier()}}const activePourCeDispositif=(t,e)=>{switch(t.type){case"importation":return t.dispositif===e;case"exportation":return t.dispositifs.includes(e);default:throw new Error(t.type)}},verrou=new src$4;class Automatisations extends eventsExports.EventEmitter{constructor({client:n,id:a}){super();ut(this,"client");ut(this,"idBd");ut(this,"automatisations");ut(this,"fOublier");this.client=n,this.idBd=a,this.automatisations={},this.initialiser()}async initialiser(){this.fOublier=await this.client.suivreBdListe({id:this.idBd,f:n=>this.mettreAutosÀJour(n),renvoyerValeur:!1})}async mettreAutosÀJour(n){await verrou.acquire("miseÀJour");const a=Object.keys(this.automatisations);for(const o of a)n.find(l=>l.payload.value.id===o)||await this.fermerAuto(o);for(const o of n){const{payload:{value:l}}=o;if(activePourCeDispositif(l,this.client.orbite.identity.id)){if(!Object.keys(this.automatisations).includes(l.id)){const u=new AutomatisationActive(l,l.id,this.client);u.on("misÀJour",()=>this.emit("misÀJour")),this.automatisations[l.id]=u}}else this.automatisations[l.id]&&await this.fermerAuto(l.id)}verrou.release("miseÀJour")}async ajouterAutomatisationExporter({id:n,typeObjet:a,formatDoc:o,inclureFichiersSFIP:l,dir:u,langues:d,fréquence:m,dispositifs:y}){y=y||[this.client.orbite.identity.id];const b=v4(),_={type:"exportation",id:b,idObjet:n,typeObjet:a,dispositifs:y,fréquence:m,formatDoc:o,langues:d,inclureFichiersSFIP:l,dir:u};Object.keys(_).forEach(A=>{_[A]===void 0&&delete _[A]});const{bd:w,fOublier:E}=await this.client.ouvrirBd({id:this.idBd});return await w.add(_),await E(),b}async ajouterAutomatisationImporter({idTableau:n,source:a,fréquence:o,dispositif:l}){const{bd:u,fOublier:d}=await this.client.ouvrirBd({id:this.idBd});l=l||this.client.orbite.identity.id;const m=v4(),y={type:"importation",id:m,idTableau:n,dispositif:l,fréquence:o,source:a};return Object.keys(y).forEach(b=>{y[b]===void 0&&delete y[b]}),await u.add(y),await d(),m}async annulerAutomatisation({id:n}){const{bd:a,fOublier:o}=await this.client.ouvrirBd({id:this.idBd});await this.client.effacerÉlémentDeBdListe({bd:a,élément:l=>l.payload.value.id===n}),await o()}async suivreAutomatisations({f:n,idRacine:a}){return a=a||this.idBd,await this.client.suivreBdListe({id:a,f:n})}async suivreÉtatAutomatisations({f:n}){const a=()=>{const o=Object.fromEntries(Object.keys(this.automatisations).map(l=>[l,this.automatisations[l].état]).filter(l=>l[1]));n(o)};return this.on("misÀJour",a),async()=>{this.off("misÀJour",a)}}async fermerAuto(n){await this.automatisations[n].fermer(),delete this.automatisations[n]}async fermer(){await Promise.all(Object.keys(this.automatisations).map(n=>{this.fermerAuto(n)})),this.fOublier&&await this.fOublier()}}let _localStorage;class LocalStorage{constructor(e){ut(this,"fichier");ut(this,"_données");ut(this,"_événements");ut(this,"_idRequèteSauvegarde");ut(this,"verrou");ut(this,"fOublier");this.fichier=path.join(e,"données.json"),this._événements=new eventsExports.EventEmitter,this.verrou=new src$4;try{this._données=JSON.parse(net.readFileSync(this.fichier).toString())}catch{this._données={}}const n=()=>{const a=v4();this._idRequèteSauvegarde=a,this.sauvegarder(a)};this._événements.on("sauvegarder",n),this.fOublier=()=>this._événements.off("sauvegarder",n)}getItem(e){return this._données[e]}setItem(e,n){this._données[e]=n,this.demanderSauvegarde()}demanderSauvegarde(){this._événements.emit("sauvegarder")}removeItem(e){delete this._données[e],this.demanderSauvegarde()}async sauvegarder(e){if(await this.verrou.acquire("sauvegarder"),this._idRequèteSauvegarde!==e){this.verrou.release("sauvegarder");return}await net.promises.writeFile(this.fichier,JSON.stringify(this._données)),this.verrou.release("sauvegarder")}async fermer(){await this.verrou.acquire("sauvegarder"),this.fOublier&&this.fOublier(),this.verrou.release("sauvegarder")}}const obtStockageLocal=async t=>{if(typeof localStorage>"u"||localStorage===null){if(_localStorage)return _localStorage;let e;if(isElectronMain){const n=await __vitePreload(()=>import("./index-89610354.js").then(a=>a.i),[]);e=t||path.join(n.default.app.getPath("userData"),"_stockageTemp")}else e=t||path.join(".","_stockageTemp");return _localStorage=new LocalStorage(e),_localStorage}else return t&&console.warn("Vous avez spécifié un dossier de stockage local mais votre choix sera ignoré car nous sommes dans le navigateur."),localStorage},verrouOuvertureBd=new src$4,DÉLAI_EXPIRATION_INVITATIONS=1e3*60*5;class ClientConstellation extends eventsExports.EventEmitter{constructor(n={}){super();ut(this,"_opts");ut(this,"optionsAccès");ut(this,"bdCompte");ut(this,"_bds");ut(this,"orbite");ut(this,"sfip");ut(this,"idNodeSFIP");ut(this,"épingles");ut(this,"profil");ut(this,"bds");ut(this,"tableaux");ut(this,"variables");ut(this,"réseau");ut(this,"favoris");ut(this,"projets");ut(this,"recherche");ut(this,"motsClefs");ut(this,"automatisations");ut(this,"nuées");ut(this,"_oublierNettoyageBdsOuvertes");ut(this,"_orbiteExterne");ut(this,"_sfipExterne");ut(this,"prêt");ut(this,"idBdCompte");ut(this,"encryption");ut(this,"sujet_réseau");ut(this,"motsDePasseRejoindreCompte");enregistrerContrôleurs(),this._opts=n,this._bds={},this.prêt=!1,this.sujet_réseau=n.sujetRéseau||"réseau-constellation",this.motsDePasseRejoindreCompte={},this._orbiteExterne=this._sfipExterne=!1,this.encryption=new EncryptionLocalFirst}async initialiser(){const{sfip:n,orbite:a}=await this._générerSFIPetOrbite();this.sfip=n,this.orbite=a,this.idNodeSFIP=await this.sfip.id();const o={type:"controlleur-constellation",premierMod:this.orbite.identity.id,nom:"racine"};this.idBdCompte=this._opts.compte,this.idBdCompte||(this.idBdCompte=await this.créerBdIndépendante({type:"kvstore",optionsAccès:o,nom:"racine"})),this.épingles=new Épingles({client:this}),this._oublierNettoyageBdsOuvertes=this._lancerNettoyageBdsOuvertes(),await this.initialiserCompte(),this.prêt=!0,this.emit("prêt")}async _générerSFIPetOrbite(){const{orbite:n}=this._opts;let a,o;const l=async u=>{if(u?.sfip)return this._sfipExterne=!0,u.sfip;{const d=(await __vitePreload(()=>import("./index-deae465c.js").then(m=>m.o),[])).default;return await d(u?.dossier)}};if(n)if(n instanceof OrbitDB)this._sfipExterne=this._orbiteExterne=!0,a=n._ipfs,o=n;else{const u=(await __vitePreload(()=>import("./orbite-936f4b71.js"),[])).default;a=await l(n.sfip),o=await u(a,n.dossier)}else{a=await l();const u=(await __vitePreload(()=>import("./orbite-936f4b71.js"),[])).default;o=await u(a)}return{sfip:a,orbite:o}}_lancerNettoyageBdsOuvertes(){const a=setInterval(async()=>{await Promise.all(Object.keys(this._bds).map(async o=>{const{bd:l,idsRequètes:u}=this._bds[o];u.size||(delete this._bds[o],await l.close())}))},3e5);return async()=>clearInterval(a)}async initialiserCompte(){const{bd:n}=await this.ouvrirBd({id:this.idBdCompte});this.bdCompte=n;const a=this.bdCompte.access;this.optionsAccès={type:"controlleur-constellation",address:a.bd.id};const o=await this.obtIdBd({nom:"compte",racine:this.bdCompte,type:"kvstore"});this.profil=new Profil({client:this,id:o});const l=await this.obtIdBd({nom:"bds",racine:this.bdCompte,type:"feed"});this.bds=new BDs({client:this,id:l}),this.tableaux=new Tableaux({client:this});const u=await this.obtIdBd({nom:"variables",racine:this.bdCompte,type:"feed"});this.variables=new Variables({client:this,id:u});const d=await this.obtIdBd({nom:"réseau",racine:this.bdCompte,type:"kvstore"});this.réseau=new Réseau({client:this,id:d}),await this.réseau.initialiser();const m=await this.obtIdBd({nom:"favoris",racine:this.bdCompte,type:"kvstore"});this.favoris=new Favoris({client:this,id:m});const y=await this.obtIdBd({nom:"projets",racine:this.bdCompte,type:"feed"});this.projets=new Projets({client:this,id:y});const b=await this.obtIdBd({nom:"motsClefs",racine:this.bdCompte,type:"feed"});this.motsClefs=new MotsClefs({client:this,id:b});const _=await this.obtIdBd({nom:"automatisations",racine:this.bdCompte,type:"feed"});this.automatisations=new Automatisations({client:this,id:_});const w=await this.obtIdBd({nom:"nuées",racine:this.bdCompte,type:"feed"});this.nuées=new Nuée({client:this,id:w}),this.recherche=new Recherche({client:this}),this.épingles.épinglerBd({id:o});for(const E of[l,u,d,m,y,b,_])this.épingles.épinglerBd({id:E,récursif:!1,fichiers:!1})}async signer({message:n}){const a=this.orbite.identity,o=await this.orbite.identity.provider.sign(a,n),l=this.orbite.identity.publicKey;return{signature:o,clefPublique:l}}async vérifierSignature({signature:n,message:a}){return!n||!n.clefPublique||!n.signature?!1:await this.orbite.identity.provider.verify(n.signature,n.clefPublique,a)}async suivreDispositifs({f:n,idBdCompte:a}){a=a||this.bdCompte.id;const{bd:o,fOublier:l}=await this.ouvrirBd({id:a}),u=o.access,d=u.constructor.type;if(d==="ipfs")return await n(u.write),await l(),faisRien;if(d==="controlleur-constellation"){const m=async()=>{const y=u.gestRôles._rôles[MODÉRATEUR];await n(y)};return u.on("misÀJour",m),m(),async()=>{u.off("misÀJour",m),await l()}}else return await l(),faisRien}async générerInvitationRejoindreCompte(){const n=await this.obtIdCompte(),a=this.encryption.clefAléatoire();return this.motsDePasseRejoindreCompte[a]=Date.now(),{idCompte:n,codeSecret:a}}async considérerRequèteRejoindreCompte({requète:n}){const{idOrbite:a,codeSecret:o}=n,l=Date.now();(this.motsDePasseRejoindreCompte[o]||-1/0)-l<DÉLAI_EXPIRATION_INVITATIONS&&(delete this.motsDePasseRejoindreCompte[o],await this.ajouterDispositif({idOrbite:a}))}async demanderEtPuisRejoindreCompte({idCompte:n,codeSecret:a}){await this.réseau.envoyerDemandeRejoindreCompte({idCompte:n,codeSecret:a}),await this.rejoindreCompte({idBdCompte:n})}async ajouterDispositif({idOrbite:n}){this.bdCompte||await once_1(this,"prêt"),this.bdCompte.access.grant(MODÉRATEUR,n)}async enleverDispositif({idOrbite:n}){this.bdCompte||await once_1(this,"prêt"),await this.bdCompte.access.revoke(MODÉRATEUR,n)}async rejoindreCompte({idBdCompte:n}){if(!adresseOrbiteValide(n))throw new Error(`Adresse compte ${n} non valide`);let a;const{bd:o,fOublier:l}=await this.ouvrirBd({id:n}),d=await o.access.suivreIdsOrbiteAutoriséesÉcriture(m=>a=m.includes(this.orbite.identity.id));await new Promise(m=>{const y=async()=>{a&&(clearInterval(b),await d(),await l(),m())},b=setInterval(()=>{y()},10);y()}),this.idBdCompte=n,await this.fermerCompte(),await this.initialiserCompte(),this.emit("compteChangé")}async donnerAccès({idBd:n,identité:a,rôle:o=MEMBRE}){if(!adresseOrbiteValide(a))throw new Error(`Identité ${a} non valide.`);const{bd:l,fOublier:u}=await this.ouvrirBd({id:n}),d=l.access;d.constructor.type===nomType&&d.grant(o,a),await u()}async suivreIdBdCompte({f:n}){const a=()=>{this.idBdCompte&&n(this.idBdCompte)};return this.on("compteChangé",a),a(),async()=>{this.off("compteChangé",a)}}async obtIdSFIP(){return this.idNodeSFIP||await once_1(this,"prêt"),this.idNodeSFIP}async obtIdOrbite(){return this.orbite||await once_1(this,"prêt"),this.orbite.identity.id}async obtIdentitéOrbite(){return this.orbite||await once_1(this,"prêt"),this.orbite.identity}async obtIdCompte(){return this.idBdCompte||await once_1(this,"prêt"),this.idBdCompte}async copierContenuBdListe({bdBase:n,nouvelleBd:a,clef:o}){const l=n.get(o);if(typeof l!="string")return;const{bd:u,fOublier:d}=await this.ouvrirBd({id:l}),m=a.get(o);if(!m)throw new Error("La nouvelle BD n'existait pas.");if(typeof m!="string")throw new Error(`${m} n'est pas une adresse Orbite.`);const{bd:y,fOublier:b}=await this.ouvrirBd({id:m}),_=ClientConstellation.obtÉlémentsDeBdListe({bd:u});await Promise.all(_.map(async w=>{await y.add(w)})),d(),b()}async combinerBds({idBdBase:n,idBd2:a}){const{bd:o,fOublier:l}=await this.ouvrirBd({id:n}),{bd:u,fOublier:d}=await this.ouvrirBd({id:a});if(u.type!==o.type)throw new Error("Les BDs doivent être du même type");switch(o.type){case"keyvalue":await this.combinerBdsDict({bdBase:o,bd2:u});break;case"feed":await this.combinerBdsListe({bdBase:o,bd2:u});break;default:throw new Error(`Type de BD ${o.type} non supporté.`)}l(),d()}async combinerBdsDict({bdBase:n,bd2:a}){const o=ClientConstellation.obtObjetdeBdDic({bd:a});for(const[l,u]of Object.entries(o)){const d=n.get(l);d!==u&&(d===void 0?await n.put(l,u):adresseOrbiteValide(d)&&adresseOrbiteValide(u)&&await this.combinerBds({idBdBase:d,idBd2:u}))}}async combinerBdsListe({bdBase:n,bd2:a,index:o}){const l=ClientConstellation.obtÉlémentsDeBdListe({bd:n,renvoyerValeur:!1}),u=ClientConstellation.obtÉlémentsDeBdListe({bd:a,renvoyerValeur:!1});for(const d of u){const m=d.payload.value;if(o){if(typeof m!="object")throw new Error(`Erreur combinaison listes : ${typeof m}`);const y=l.find(b=>typeof b.payload.value=="object"&&o.every(_=>b.payload.value[_]===m[_]));if(!y)await n.add(m);else{const b=y.payload.value;if(!deepEqual$2(b,m)){const _=Object.assign({},b);for(const[w,E]of Object.entries(m))_[w]===void 0?_[w]=E:deepEqual$2(_[w],E)||adresseOrbiteValide(_[w])&&adresseOrbiteValide(E)&&await this.combinerBds({idBdBase:_[w],idBd2:E});await n.remove(y.hash),await n.add(_)}}}else l.some(y=>deepEqual$2(y.payload.value,m))||await n.add(m)}}async suivreBd({id:n,f:a,événements:o=["write","replicated","ready"]}){const l=[],u={};let d=!1;const m=()=>{this.ouvrirBd({id:n}).then(({bd:b,fOublier:_})=>{l.push(_);const w=()=>{const E=v4(),A=a(b);A&&A.then&&(u[E]=A,A.then(()=>{delete u[E]}))};for(const E of o)b.events.on(E,w),l.push(async()=>{b.events.off(E,w)}),E==="write"&&b.events.listenerCount("write")>b.events.getMaxListeners();w()}).catch(b=>{if(!d)if(String(b).includes("ipfs unable to find"))m();else throw new Error(b)})};return m(),async()=>{d=!0,await Promise.all(l.map(b=>b())),await Promise.all(Object.values(u))}}async suivreBdDeFonction({fRacine:n,f:a,fSuivre:o}){let l,u,d=!0;const m=await n({fSuivreRacine:async y=>{y===void 0&&d&&(d=!1,await a(void 0)),y!==u&&(u=y,l&&await l(),u?l=await o({id:u,fSuivreBd:a}):(await a(void 0),l=void 0))}});return async()=>{await m(),l&&await l()}}async suivreBdDeClef({id:n,clef:a,f:o,fSuivre:l}){const u=async({fSuivreRacine:d})=>{const m=async y=>{const b=y.get(a);await d(b)};return await this.suivreBd({id:n,f:m})};return await this.suivreBdDeFonction({fRacine:u,f:o,fSuivre:l})}async suivreBdDic({id:n,f:a}){const o=async l=>{const u=l?ClientConstellation.obtObjetdeBdDic({bd:l}):{};await a(u)};return await this.suivreBd({id:n,f:o})}async suivreBdDicDeClef({id:n,clef:a,f:o}){const l=async d=>{await o(d||{})},u=async({id:d,fSuivreBd:m})=>await this.suivreBdDic({id:d,f:m});return await this.suivreBdDeClef({id:n,clef:a,f:l,fSuivre:u})}static obtObjetdeBdDic({bd:n}){const a=n.all;return Object.fromEntries(Object.keys(a).map(o=>[o,a[o]]))}async suivreBdListeDeClef({id:n,clef:a,f:o,renvoyerValeur:l=!0}){if(l){const u=async m=>{await o(m||[])},d=async({id:m,fSuivreBd:y})=>await this.suivreBdListe({id:m,f:y,renvoyerValeur:l});return await this.suivreBdDeClef({id:n,clef:a,f:u,fSuivre:d})}else{const u=async m=>{await o(m||[])},d=async({id:m,fSuivreBd:y})=>await this.suivreBdListe({id:m,f:y,renvoyerValeur:!1});return await this.suivreBdDeClef({id:n,clef:a,f:u,fSuivre:d})}}async suivreBdListe({id:n,f:a,renvoyerValeur:o=!0}){return await this.suivreBd({id:n,f:async l=>{const u=ClientConstellation.obtÉlémentsDeBdListe({bd:l,renvoyerValeur:o});await a(u)}})}static obtÉlémentsDeBdListe({bd:n,renvoyerValeur:a=!0}){const o=n.iterator({limit:-1}).collect();return a?o.map(l=>l.payload.value):o}obtÉlémentBdListeSelonEmpreinte({bd:n,empreinte:a}){return n.iterator({limit:-1}).collect().find(l=>l.hash===a)?.payload.value}async effacerÉlémentDeBdListe({bd:n,élément:a}){const o=n.iterator({limit:-1}).collect().find(l=>typeof a=="function"?a(l):deepEqual$2(l.payload.value,a));o&&await n.remove(o.hash)}async suivreTypeObjet({idObjet:n,f:a}){const o=async u=>{let d;const{type:m}=u;m?d=["motClef","variable","bd","projet"].includes(m)?m:void 0:u.bds?d="projet":u.tableaux?d="bd":u.catégorie?d="variable":u.nom&&(d="motClef"),await a(d)};return await this.suivreBdDic({id:n,f:o})}async suivreEmpreinteTêtesBdRécursive({idBd:n,f:a}){const o=y=>y._oplog.heads[y._oplog.heads.length-1]?.hash,l=y=>crypto$5.createHash("md5").update(y).digest("hex"),u=async y=>{await a(l(y.sort().join()))},d=async y=>await this.suivreBdsRécursives({idBd:n,f:async b=>await y(b)}),m=async(y,b)=>await this.suivreBd({id:y,f:async _=>{const w=o(_);w&&await b(w)}});return await this.suivreBdsDeFonctionListe({fListe:d,f:u,fBranche:m})}async suivreBdsDeBdListe({id:n,f:a,fBranche:o,fIdBdDeBranche:l=m=>m,fRéduction:u=m=>[...new Set(m.flat())],fCode:d=m=>m}){const m=async y=>await this.suivreBdListe({id:n,f:y});return await this.suivreBdsDeFonctionListe({fListe:m,f:a,fBranche:o,fIdBdDeBranche:l,fRéduction:u,fCode:d})}async suivreBdsDeFonctionListe({fListe:n,f:a,fBranche:o,fIdBdDeBranche:l=m=>m,fRéduction:u=m=>[...new Set(m.flat())],fCode:d=m=>m}){const m={},y={};let b=!1;const _=async()=>{const B=Object.values(m).map(q=>q.données).filter(q=>q!==void 0),D=u(B);b&&await a(D)},w=new src$4,A=await n(async B=>{if(await w.acquire("racine"),B.some(L=>typeof d(L)!="string"))throw console.error("Définir fCode si les éléments ne sont pas en format texte (chaînes)."),new Error("Définir fCode si les éléments ne sont pas en format texte (chaînes).");const D=Object.fromEntries(B.map(L=>[d(L),L])),q=Object.keys(m);let j=Object.keys(D).filter(L=>!q.includes(L));const J=q.filter(L=>!Object.keys(D).includes(L)),Y=Object.entries(D).filter(L=>!deepEqual$2(y[L[0]],L[1])).map(L=>L[0]);j.push(...Y),j=[...new Set(j)];for(const L of Y)if(m[L]){const Z=m[L].fOublier;Z&&await Z(),delete m[L]}for(const L of J){const Z=m[L].fOublier;Z&&await Z(),delete m[L],_()}await Promise.all(j.map(async L=>{m[L]={données:void 0};const Z=D[L];y[L]=Z;const Q=l(Z),ae=await o(Q,U=>{m[L].données=U,_()},Z);m[L].fOublier=ae})),b=!0,_(),w.release("racine")});let C;const k=async()=>{await C(),await Promise.all(Object.values(m).filter(B=>B.fOublier).map(B=>B.fOublier()))};return typeof A=="function"?(C=A,k):(C=A.fOublier,Object.assign({},A,{fOublier:k}))}async suivreBdsDeFonctionRecherche({fListe:n,f:a,fBranche:o,fIdBdDeBranche:l=m=>m,fRéduction:u=m=>[...new Set(m.flat())],fCode:d=m=>m}){let m;const y=async w=>{m&&await m(w)},b=async w=>{const{fOublier:E,fChangerProfondeur:A}=await n(w);return m=A,E};return{fOublier:await this.suivreBdsDeFonctionListe({fListe:b,f:a,fBranche:o,fIdBdDeBranche:l,fRéduction:u,fCode:d}),fChangerProfondeur:y}}async suivreBdSelonCondition({fRacine:n,fCondition:a,f:o}){const l=async({id:u,fSuivreBd:d})=>await a(u,async m=>{d(m?u:void 0)});return await this.suivreBdDeFonction({fRacine:async({fSuivreRacine:u})=>await n(u),f:o,fSuivre:l})}async suivreBdsSelonCondition({fListe:n,fCondition:a,f:o}){const l=async d=>{const m=d.filter(y=>y.état).map(y=>y.id);await o(m)},u=async(d,m)=>await a(d,async b=>{await m({id:d,état:b})});return await this.suivreBdsDeFonctionListe({fListe:n,f:l,fBranche:u})}async rechercherBdListe({id:n,f:a}){const{bd:o,fOublier:l}=await this.ouvrirBd({id:n}),u=o.iterator({limit:-1}).collect().find(d=>a(d));return await l(),u}async obtFichierSFIP({id:n,max:a}){return await toBuffer$1(this.sfip.cat(n),a)}obtItérableAsyncSFIP({id:n}){return this.sfip.cat(n)}async ajouterÀSFIP({fichier:n}){return(await this.sfip.add(n)).cid.toString()}async obtDeStockageLocal({clef:n}){const a=`${this.idBdCompte.slice(this.idBdCompte.length-23,this.idBdCompte.length-8)} : ${n}`;return(await obtStockageLocal(this._opts.dossierStockageLocal||this.orbite.directory)).getItem(a)}async sauvegarderAuStockageLocal({clef:n,val:a}){const o=`${this.idBdCompte.slice(this.idBdCompte.length-23,this.idBdCompte.length-8)} : ${n}`;return(await obtStockageLocal(this._opts.dossierStockageLocal)).setItem(o,a)}async effacerDeStockageLocal({clef:n}){const a=`${this.idBdCompte.slice(this.idBdCompte.length-23,this.idBdCompte.length-8)} : ${n}`;return(await obtStockageLocal(this._opts.dossierStockageLocal)).removeItem(a)}async ouvrirBd({id:n}){if(!adresseOrbiteValide(n))throw new Error(`Adresse ${n} non valide.`);await verrouOuvertureBd.acquire(n);const a=this._bds[n],o=v4(),l=async()=>{this._bds[n]&&this._bds[n].idsRequètes.delete(o)};if(a)return this._bds[n].idsRequètes.add(o),verrouOuvertureBd.release(n),{bd:a.bd,fOublier:l};try{const u=await this.orbite.open(n);return this._bds[n]={bd:u,idsRequètes:new Set([o])},await u.load(),verrouOuvertureBd.release(n),{bd:u,fOublier:l}}catch(u){throw console.error(u.toString()),console.warn(u.stack),console.log(n),u}}async obtIdBd({nom:n,racine:a,type:o,optionsAccès:l}){let u,d;typeof a=="string"?{bd:u,fOublier:d}=await this.ouvrirBd({id:a}):u=a;const m=u.id;let y=u.get(n);const b=m+n,_=await this.obtDeStockageLocal({clef:b});if(y&&_&&y!==_)try{await this.combinerBds({idBdBase:y,idBd2:_})}catch{}if(y&&o)try{return await this.orbite[o](y),y}catch{return}if(!y&&o){const w=u.access;await uneFois(A=>w.suivreIdsOrbiteAutoriséesÉcriture(async C=>await A(C.includes(this.orbite.identity.id))))&&(y=await this.créerBdIndépendante({type:o,optionsAccès:l}),await u.set(n,y))}return y&&await this.sauvegarderAuStockageLocal({clef:b,val:y}),d&&await d(),y}async créerBdIndépendante({type:n,optionsAccès:a,nom:o}){a=Object.assign({},this.optionsAccès,a||{});const l={accessController:a},u=await this.orbite[n](o||v4(),l);await u.load();const{id:d}=u;return this._bds[d]={bd:u,idsRequètes:new Set},d}async effacerBd({id:n}){const{bd:a}=await this.ouvrirBd({id:n});await a.drop(),delete this._bds[n]}async obtOpsAccès({idBd:n}){const{bd:a,fOublier:o}=await this.ouvrirBd({id:n}),l=a.access;return await o(),{address:l.bd.id,premierMod:l._premierMod}}async suivrePermission({idObjet:n,f:a}){const{bd:o,fOublier:l}=await this.ouvrirBd({id:n}),u=o.access,d=u.constructor.type;if(d==="ipfs"){const m=this.orbite.identity.id;return await a(u.write.includes(m)?MEMBRE:void 0),await l(),faisRien}else if(d===nomType){const m=async b=>{const _=b.filter(E=>E.idBdCompte===this.idBdCompte).map(E=>E.rôle),w=_.includes(MODÉRATEUR)?MODÉRATEUR:_.includes(MEMBRE)?MEMBRE:void 0;await a(w)},y=await u.suivreUtilisateursAutorisés(m);return async()=>{await y(),await l()}}else throw new Error(`Type d'accès ${d} non reconnu.`)}async suivrePermissionÉcrire({id:n,f:a}){const o=async l=>{await a(l!==void 0)};return await this.suivrePermission({idObjet:n,f:o})}async suivreAccèsBd({id:n,f:a}){const{bd:o,fOublier:l}=await this.ouvrirBd({id:n}),u=o.access,d=u.constructor.type;if(d==="ipfs"){const m=u.write.map(y=>({idBdCompte:y,rôle:MODÉRATEUR}));await a(m)}else if(d===nomType){const m=await u.suivreUtilisateursAutorisés(a);return await l(),m}return await l(),faisRien}async suivreBdsRécursives({idBd:n,f:a}){const o={},l=async()=>{await a(Object.keys(o))},u=new src$4,d=async _=>{delete o[_],await Promise.all(Object.keys(o).map(async w=>{o[w]&&(o[w].requètes.delete(_),o[w].requètes.size||await o[w].fOublier())}))},m=["copiéDe"],y=async(_,w)=>{const E=q=>q.map(j=>typeof j=="string"?[j]:Array.isArray(j)?j:typeof j=="object"?Object.values(j):[]).flat().filter(j=>adresseOrbiteValide(j)),A=async q=>{let j=[];typeof q=="object"?(j=E(Object.entries(q).filter(L=>!m.includes(L[0])).map(L=>L[1])),j.push(...E(Object.keys(q)))):Array.isArray(q)?j=E(q):typeof q=="string"&&(j=[q]);const J=j.filter(L=>!o[_].sousBds.includes(L)),Y=o[_].sousBds.filter(L=>!j.includes(L));o[_].sousBds=j,await Promise.all(Y.map(async L=>{o[L].requètes.delete(_),o[L].requètes.size||await o[L].fOublier()})),await Promise.all(J.map(async L=>await y(L,_))),l()};if(await u.acquire(_),o[_]){o[_].requètes.add(w);return}const{bd:C,fOublier:k}=await this.ouvrirBd({id:_}),{type:B}=C;await k(),o[_]={requètes:new Set([w]),sousBds:[],fOublier:async()=>{await D(),await d(_)}};let D;B==="keyvalue"?D=await this.suivreBdDic({id:_,f:A}):B==="feed"?D=await this.suivreBdListe({id:_,f:A}):D=faisRien,u.release(_),l()};return await y(n,""),async()=>{await Promise.all(Object.values(o).map(_=>_.fOublier()))}}async fermerCompte(){this.réseau&&await this.réseau.fermer(),this.favoris&&await this.favoris.fermer(),this.automatisations&&await this.automatisations.fermer()}async fermer(){await(await obtStockageLocal()).fermer(),this._oublierNettoyageBdsOuvertes&&this._oublierNettoyageBdsOuvertes(),await this.fermerCompte(),this.épingles&&await this.épingles.fermer(),this.orbite&&!this._orbiteExterne&&await this.orbite.stop(),this.sfip&&!this._sfipExterne&&await this.sfip.stop()}static async créer(n={}){const a=new ClientConstellation(n);return await a.initialiser(),a}}__decorate([cacheSuivi],ClientConstellation.prototype,"suivreDispositifs",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreIdBdCompte",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreEmpreinteTêtesBdRécursive",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermission",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivrePermissionÉcrire",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreAccèsBd",null);__decorate([cacheSuivi],ClientConstellation.prototype,"suivreBdsRécursives",null);class Callable extends Function{constructor(){return Object.setPrototypeOf(function(){},new.target.prototype)}}class ClientMandatairifiable extends Callable{constructor(){super();ut(this,"événements");ut(this,"tâches");ut(this,"erreurs");this.événements=new eventsExports.EventEmitter,this.tâches={},this.erreurs=[],this.événements.on("message",n=>{const{type:a}=n;switch(a){case"suivre":{const{id:o,données:l}=n;if(!this.tâches[o])return;const{fSuivre:u}=this.tâches[o];u(l);break}case"suivrePrêt":{const{id:o,fonctions:l}=n;this.événements.emit(o,{fonctions:l});break}case"action":{const{id:o,résultat:l}=n;this.événements.emit(o,{résultat:l});break}case"erreur":{const{erreur:o,id:l}=n;l?this.événements.emit(l,{erreur:o}):this.erreur({erreur:o,id:l});break}default:this.erreur({erreur:`Type inconnu ${a} dans message ${n}.`,id:n.id})}})}__call__(n,a={}){typeof a!="object"&&this.erreur({erreur:`La fonction ${n.join(".")} fut appelée avec arguments ${a}. 
      Toute fonction mandataire Constellation doit être appelée avec un seul argument en format d'objet (dictionnaire).`});const o=v4(),l=Object.entries(a).find(u=>typeof u[1]=="function")?.[0];return l?this.appelerFonctionSuivre(o,n,a,l):this.appelerFonctionAction(o,n,a)}async appelerFonctionSuivre(n,a,o,l){const u=o[l],d=Object.fromEntries(Object.entries(o).filter(A=>typeof A[1]!="function"));u===void 0&&this.erreur({erreur:"Aucun argument de nom "+l+" n'a été donnée pour "+a.join(".")}),Object.keys(o).length>Object.keys(d).length+1?this.erreur({erreur:"Plus d'un argument pour "+a.join(".")+" est une fonction : "+JSON.stringify(o),id:n}):typeof u!="function"&&this.erreur({erreur:"Argument "+l+"n'est pas une fonction : ",id:n});const m={type:"suivre",id:n,fonction:a,args:d,nomArgFonction:l},b={id:n,fSuivre:u,fRetour:async(A,C)=>{const k={type:"retour",id:n,fonction:A,args:C};this.envoyerMessage(k)}};this.tâches[n]=b;const _=async()=>{await this.oublierTâche(n)};this.envoyerMessage(m);const{fonctions:w,erreur:E}=(await once_1(this.événements,n))[0];if(E&&this.erreur({erreur:E,id:n}),w&&w[0]){const A={fOublier:_};for(const C of w)A[C]=async(...k)=>{await this.tâches[n]?.fRetour(C,k)};return A}else return _}async appelerFonctionAction(n,a,o){const l={type:"action",id:n,fonction:a,args:o},u=new Promise((d,m)=>{once_1(this.événements,n).then(y=>{const{résultat:b,erreur:_}=y[0];_?m(new Error(_)):d(b)})});return this.envoyerMessage(l),u}erreur({erreur:n,id:a}){const o={erreur:n,id:a};throw this.événements.emit("erreur",{nouvelle:o,toutes:this.erreurs}),new Error(JSON.stringify(o))}async oublierTâche(n){const a=this.tâches[n];a&&await a.fRetour("fOublier"),delete this.tâches[n]}}class Handler{constructor(e){ut(this,"listeAtributs");this.listeAtributs=e||[]}get(e,n){if(["événements","erreurs"].includes(n))return e[n];{const o=[...this.listeAtributs,n],l=new Handler(o);return new Proxy(e,l)}}apply(e,n,a){return e.__call__(this.listeAtributs,a[0])}}const générerMandataire=t=>{const e=new Handler;return new Proxy(t,e)};class GestionnaireClient{constructor(e,n,a={}){ut(this,"ipa");ut(this,"_messagesEnAttente");ut(this,"prêt");ut(this,"dicFRetourSuivi");ut(this,"opts");ut(this,"fMessage");ut(this,"fErreur");ut(this,"_verrou");this.fMessage=e,this.fErreur=n,this.opts=a,this.dicFRetourSuivi={},this.prêt=!1,this._messagesEnAttente=[],this._verrou=new src$4,this.init()}async init(){if(await this._verrou.acquire("init"),this.ipa){this._verrou.release("init");return}this.ipa=await ClientConstellation.créer(this.opts),this._messagesEnAttente.forEach(e=>this._gérerMessage(e)),this.prêt=!0,this._verrou.release("init")}async gérerMessage(e){this.prêt?await this._gérerMessage(e):this._messagesEnAttente.unshift(e)}async _gérerMessage(e){const{type:n}=e;switch(n){case"suivre":{const{id:a}=e;this.ipa||this.fErreur("IPA non initialisé",a);const{fonction:o,args:l,nomArgFonction:u}=e,d=this.extraireFonctionIPA(o,a);if(!d)return;const m=y=>{const b={type:"suivre",id:a,données:y};this.fMessage(b)};l[u]=m;try{const y=await d(l),b=typeof y=="function"?{fOublier:y}:y;this.dicFRetourSuivi[a]=b;const _={type:"suivrePrêt",id:a};typeof y!="function"&&(_.fonctions=Object.keys(y)),this.fMessage(_)}catch(y){this.fErreur(y.toString(),a)}break}case"action":{const{id:a}=e;this.ipa||this.fErreur("IPA non initialisé",a);const{fonction:o,args:l}=e,u=this.extraireFonctionIPA(o,a);if(!u)return;try{const d=await u(l),m={type:"action",id:a,résultat:d};this.fMessage(m)}catch(d){this.fErreur(d.toString(),a)}break}case"retour":{const{id:a,fonction:o,args:l}=e,u=this.dicFRetourSuivi[a];u&&await u[o](l),o==="fOublier"&&delete this.dicFRetourSuivi[a];break}default:{this.fErreur(`Type de requète ${n} non reconnu dans message ${e}`,e.id);break}}}extraireFonctionIPA(e,n){const a=`Fonction ClientConstellation.${e.join(".")} n'existe pas ou n'est pas une fonction.`;let o=this.ipa;for(const[l,u]of e.entries()){if(l===e.length-1)if(typeof o=="object"&&u in o&&o[u])o=o[u].bind(o);else{this.fErreur(a,n);return}else if(typeof o=="object"&&u in o&&o[u])o=o[u];else{this.fErreur(a,n);return}if(!o){this.fErreur(a,n);return}}if(typeof o!="function"){this.fErreur(a,n);return}return o}async fermer(){await this.init(),await this.ipa.fermer()}}class MandataireClientProc extends ClientMandatairifiable{constructor(n={}){super();ut(this,"client");this.client=new GestionnaireClient(a=>{this.événements.emit("message",a)},(a,o)=>{const l={type:"erreur",id:o,erreur:a};this.événements.emit("message",l)},n)}envoyerMessage(n){this.client.gérerMessage(n)}}const générerMandataireProc=(t={})=>générerMandataire(new MandataireClientProc(t));var conditions;(function(t){t.ATTR="attribution",t.ÉGAL="partageÉgal",t.INCL="inclureDroitDauteur",t.CHNG="indiquerChangements",t.SRCE="partagerCodeSource",t.USGR="usagereseau"})(conditions||(conditions={}));var droits;(function(t){t.PRTG="partager",t.ADPT="adapter",t.CMRC="usageComercial",t.PRV="usagePrivé",t.BREV="usageBrevets"})(droits||(droits={}));var limitations;(function(t){t.RSP="aucuneResponsabilité",t.GRNT="aucuneGarantie",t.MRCM="marqueCommerce",t.BREV="brevetExclu",t.SOUS="sousLicence"})(limitations||(limitations={}));var catégories;(function(t){t.BD="basesDeDonnées",t.ART="artistique",t.CODE="codeInformatique",t.AUTRE="autre"})(catégories||(catégories={}));droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT,conditions.ATTR,conditions.ÉGAL,conditions.INCL,limitations.RSP,limitations.BREV,limitations.MRCM,limitations.GRNT,catégories.BD,droits.CMRC,droits.PRTG,droits.PRV,droits.ADPT,conditions.ATTR,conditions.INCL,limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV,catégories.BD,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,limitations.RSP,limitations.GRNT,limitations.MRCM,limitations.BREV,catégories.BD,droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG,conditions.INCL,conditions.ATTR,limitations.SOUS,limitations.RSP,catégories.BD,droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV,conditions.INCL,conditions.CHNG,conditions.ÉGAL,limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT,catégories.ART,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,conditions.ATTR,conditions.CHNG,limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT,catégories.ART,droits.PRTG,droits.ADPT,droits.CMRC,droits.PRV,limitations.RSP,limitations.MRCM,limitations.BREV,limitations.GRNT,catégories.ART,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,droits.BREV,conditions.INCL,conditions.CHNG,limitations.MRCM,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.USGR,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,limitations.MRCM,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.BREV,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,droits.BREV,conditions.INCL,conditions.SRCE,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,limitations.BREV,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV,conditions.SRCE,conditions.INCL,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV,conditions.SRCE,conditions.INCL,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.ÉGAL,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.ÉGAL,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRV,droits.BREV,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.SRCE,conditions.INCL,conditions.ÉGAL,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,limitations.GRNT,limitations.MRCM,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.SRCE,conditions.INCL,conditions.ÉGAL,limitations.GRNT,limitations.MRCM,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,limitations.RSP,limitations.MRCM,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.PRTG,droits.ADPT,droits.BREV,droits.PRV,conditions.INCL,conditions.SRCE,conditions.CHNG,conditions.USGR,conditions.ÉGAL,limitations.MRCM,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.BREV,droits.PRV,conditions.INCL,limitations.RSP,limitations.GRNT,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.CHNG,conditions.SRCE,conditions.ÉGAL,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,catégories.CODE,droits.CMRC,droits.ADPT,droits.PRTG,droits.PRV,conditions.INCL,conditions.CHNG,limitations.RSP,limitations.GRNT,catégories.CODE,droits.PRV,droits.CMRC,droits.ADPT,droits.PRTG,conditions.INCL,conditions.ÉGAL,limitations.RSP,limitations.GRNT,catégories.AUTRE;var isPlainObj=t=>{if(Object.prototype.toString.call(t)!=="[object Object]")return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype};const isOptionObject=isPlainObj,{hasOwnProperty:hasOwnProperty$1}=Object.prototype,{propertyIsEnumerable}=Object,defineProperty=(t,e,n)=>Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0}),globalThis$1=commonjsGlobal,defaultMergeOptions={concatArrays:!1,ignoreUndefined:!1},getEnumerableOwnPropertyKeys=t=>{const e=[];for(const n in t)hasOwnProperty$1.call(t,n)&&e.push(n);if(Object.getOwnPropertySymbols){const n=Object.getOwnPropertySymbols(t);for(const a of n)propertyIsEnumerable.call(t,a)&&e.push(a)}return e};function clone(t){return Array.isArray(t)?cloneArray(t):isOptionObject(t)?cloneOptionObject(t):t}function cloneArray(t){const e=t.slice(0,0);return getEnumerableOwnPropertyKeys(t).forEach(n=>{defineProperty(e,n,clone(t[n]))}),e}function cloneOptionObject(t){const e=Object.getPrototypeOf(t)===null?Object.create(null):{};return getEnumerableOwnPropertyKeys(t).forEach(n=>{defineProperty(e,n,clone(t[n]))}),e}const mergeKeys=(t,e,n,a)=>(n.forEach(o=>{typeof e[o]>"u"&&a.ignoreUndefined||(o in t&&t[o]!==Object.getPrototypeOf(t)?defineProperty(t,o,merge$4(t[o],e[o],a)):defineProperty(t,o,clone(e[o])))}),t),concatArrays=(t,e,n)=>{let a=t.slice(0,0),o=0;return[t,e].forEach(l=>{const u=[];for(let d=0;d<l.length;d++)hasOwnProperty$1.call(l,d)&&(u.push(String(d)),l===t?defineProperty(a,o++,l[d]):defineProperty(a,o++,clone(l[d])));a=mergeKeys(a,l,getEnumerableOwnPropertyKeys(l).filter(d=>!u.includes(d)),n)}),a};function merge$4(t,e,n){return n.concatArrays&&Array.isArray(t)&&Array.isArray(e)?concatArrays(t,e,n):!isOptionObject(e)||!isOptionObject(t)?clone(e):mergeKeys(t,e,getEnumerableOwnPropertyKeys(e),n)}var mergeOptions$2=function(...t){const e=merge$4(clone(defaultMergeOptions),this!==globalThis$1&&this||{},defaultMergeOptions);let n={_:{}};for(const a of t)if(a!==void 0){if(!isOptionObject(a))throw new TypeError("`"+a+"` is not an Option Object");n=merge$4(n,{_:a},e)}return n._};const mergeOptions$1=Object.freeze(Object.defineProperty({__proto__:null,default:mergeOptions$2},Symbol.toStringTag,{value:"Module"}));let nanoid=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const deleteDb=async t=>await new Promise((e,n)=>{const a=self.indexedDB.deleteDatabase(t);a.onerror=o=>n(o),a.onsuccess=()=>e()}),removeRepo=async t=>{await deleteDb(t),await deleteDb(t+"/keys"),await deleteDb(t+"/blocks"),await deleteDb(t+"/datastore")},repoExists=async t=>await new Promise((e,n)=>{const a=self.indexedDB.open(t);let o=!0;a.onerror=()=>n(a.error),a.onsuccess=function(){a.result.close(),o||self.indexedDB.deleteDatabase(t),e(o)},a.onupgradeneeded=function(){o=!1}}),defaultRepo=()=>"ipfs",checkForRunningApi=()=>null,tmpDir=(t="")=>`${t}_ipfs_${nanoid()}`;var error={};let TimeoutError$2=class extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}};error.TimeoutError=TimeoutError$2;let AbortError$1=class extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}};error.AbortError=AbortError$1;let HTTPError$1=class extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}};error.HTTPError=HTTPError$1;var fetch_browserExports={},fetch_browser$1={get exports(){return fetch_browserExports},set exports(t){fetch_browserExports=t}},srcExports={},src$2={get exports(){return srcExports},set exports(t){srcExports=t}},browserExports={},browser={get exports(){return browserExports},set exports(t){browserExports=t}},hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(t,e){var n=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof commonjsGlobal<"u")return commonjsGlobal;throw new Error("unable to locate global object")},a=n();t.exports=e=a.fetch,a.fetch&&(e.default=a.fetch.bind(commonjsGlobal)),e.Headers=a.Headers,e.Request=a.Request,e.Response=a.Response}(browser,browserExports)),browserExports}globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?src$2.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:src$2.exports={default:requireBrowser().default,Headers:requireBrowser().Headers,Request:requireBrowser().Request,Response:requireBrowser().Response};(function(t){t.exports=srcExports})(fetch_browser$1);const{TimeoutError:TimeoutError$1,AbortError}=error,{Response,Request:Request$1,Headers:Headers$1,default:fetch$2}=fetch_browserExports,fetchWithProgress=(t,e={})=>{const n=new XMLHttpRequest;n.open(e.method||"GET",t.toString(),!0);const{timeout:a,headers:o}=e;if(a&&a>0&&a<1/0&&(n.timeout=a),e.overrideMimeType!=null&&n.overrideMimeType(e.overrideMimeType),o)for(const[l,u]of new Headers$1(o))n.setRequestHeader(l,u);return e.signal&&(e.signal.onabort=()=>n.abort()),e.onUploadProgress&&(n.upload.onprogress=e.onUploadProgress),n.responseType="arraybuffer",new Promise((l,u)=>{const d=m=>{switch(m.type){case"error":{l(Response.error());break}case"load":{l(new ResponseWithURL(n.responseURL,n.response,{status:n.status,statusText:n.statusText,headers:parseHeaders(n.getAllResponseHeaders())}));break}case"timeout":{u(new TimeoutError$1);break}case"abort":{u(new AbortError);break}}};n.onerror=d,n.onload=d,n.ontimeout=d,n.onabort=d,n.send(e.body)})},fetchWithStreaming=fetch$2,fetchWith=(t,e={})=>e.onUploadProgress!=null?fetchWithProgress(t,e):fetchWithStreaming(t,e),parseHeaders=t=>{const e=new Headers$1;for(const n of t.trim().split(/[\r\n]+/)){const a=n.indexOf(": ");a>0&&e.set(n.slice(0,a),n.slice(a+1))}return e};class ResponseWithURL extends Response{constructor(e,n,a){super(n,a),Object.defineProperty(this,"url",{value:e})}}var fetch_browser={fetch:fetchWith,Request:Request$1,Headers:Headers$1};const require$$2=getAugmentedNamespace(mergeOptions$1),isReactNative=typeof navigator<"u"&&navigator.product==="ReactNative";function getDefaultBase(){return isReactNative?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const URL$2=self.URL,defaultBase$1=getDefaultBase();let URLWithLegacySupport$2=class{constructor(e="",n=defaultBase$1){this.super=new URL$2(e,n),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return URL$2.createObjectURL(e)}static revokeObjectURL(e){URL$2.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function format$3(t){if(typeof t=="string")return new URL$2(t).toString();if(!(t instanceof URL$2)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",n=t.auth?t.auth+"@":"",a=t.port?":"+t.port:"",o=t.protocol?t.protocol+"//":"",l=t.host||"",u=t.hostname||"",d=t.search||(t.query?"?"+t.query:""),m=t.hash||"",y=t.pathname||"",b=t.path||y+d;return`${o}${e||n}${l||u+a}${b}${m}`}}var urlBrowser={URLWithLegacySupport:URLWithLegacySupport$2,URLSearchParams:self.URLSearchParams,defaultBase:defaultBase$1,format:format$3};const{URLWithLegacySupport:URLWithLegacySupport$1,format:format$2}=urlBrowser;var relative$1=(t,e={},n={},a)=>{let o=e.protocol?e.protocol.replace(":",""):"http";o=(n[o]||a||o)+":";let l;try{l=new URLWithLegacySupport$1(t)}catch{l={}}const u=Object.assign({},e,{protocol:o||l.protocol,host:e.host||l.host});return new URLWithLegacySupport$1(t,format$2(u)).toString()};const{URLWithLegacySupport,format:format$1,URLSearchParams:URLSearchParams$2,defaultBase}=urlBrowser,relative=relative$1;var isoUrl={URL:URLWithLegacySupport,URLSearchParams:URLSearchParams$2,format:format$1,relative,defaultBase},anySignalExports={},anySignal$2={get exports(){return anySignalExports},set exports(t){anySignalExports=t}};function anySignal$1(t){const e=new globalThis.AbortController;function n(){e.abort();for(const a of t)!a||!a.removeEventListener||a.removeEventListener("abort",n)}for(const a of t)if(!(!a||!a.addEventListener)){if(a.aborted){n();break}a.addEventListener("abort",n)}return e.signal}anySignal$2.exports=anySignal$1;var anySignal_2=anySignalExports.anySignal=anySignal$1;async function*browserReadableStreamToIt(t,e={}){const n=t.getReader();try{for(;;){const a=await n.read();if(a.done)return;yield a.value}}finally{e.preventCancel!==!0&&n.cancel(),n.releaseLock()}}var browserReadablestreamToIt=browserReadableStreamToIt;const isElectron=isElectron_1,IS_ENV_WITH_DOM=typeof window=="object"&&typeof document=="object"&&document.nodeType===9,IS_ELECTRON=isElectron(),IS_BROWSER=IS_ENV_WITH_DOM&&!IS_ELECTRON,IS_ELECTRON_MAIN=IS_ELECTRON&&!IS_ENV_WITH_DOM,IS_ELECTRON_RENDERER=IS_ELECTRON&&IS_ENV_WITH_DOM,IS_NODE=typeof commonjsRequire$1=="function"&&typeof browser$1$1<"u"&&typeof browser$1$1.release<"u"&&browser$1$1.release.name==="node"&&!IS_ELECTRON,IS_WEBWORKER=typeof importScripts=="function"&&typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,IS_TEST=typeof browser$1$1<"u"&&typeof browser$1$1.env<"u"&&!1,IS_REACT_NATIVE=typeof navigator<"u"&&navigator.product==="ReactNative";var env={isTest:IS_TEST,isElectron:IS_ELECTRON,isElectronMain:IS_ELECTRON_MAIN,isElectronRenderer:IS_ELECTRON_RENDERER,isNode:IS_NODE,isBrowser:IS_BROWSER,isWebWorker:IS_WEBWORKER,isEnvWithDom:IS_ENV_WITH_DOM,isReactNative:IS_REACT_NATIVE};const all$1=async t=>{const e=[];for await(const n of t)e.push(n);return e};var itAll=all$1;const{fetch:fetch$1,Request,Headers}=fetch_browser,{TimeoutError,HTTPError}=error,merge$3=require$$2.bind({ignoreUndefined:!0}),{URL:URL$1,URLSearchParams:URLSearchParams$1}=isoUrl,anySignal=anySignalExports,browserReableStreamToIt=browserReadablestreamToIt,{isBrowser:isBrowser$1,isWebWorker}=env,all=itAll,timeout=(t,e,n)=>{if(e===void 0)return t;const a=Date.now(),o=()=>Date.now()-a>=e;return new Promise((l,u)=>{const d=setTimeout(()=>{o()&&(u(new TimeoutError),n.abort())},e),m=y=>_=>{if(clearTimeout(d),o()){u(new TimeoutError);return}y(_)};t.then(m(l),m(u))})},defaults$1={throwHttpErrors:!0,credentials:"same-origin"};class HTTP{constructor(e={}){this.opts=merge$3(defaults$1,e)}async fetch(e,n={}){const a=merge$3(this.opts,n),o=new Headers(a.headers);if(typeof e!="string"&&!(e instanceof URL$1||e instanceof Request))throw new TypeError("`resource` must be a string, URL, or Request");const l=new URL$1(e.toString(),a.base),{searchParams:u,transformSearchParams:d,json:m}=a;u&&(typeof d=="function"?l.search=d(new URLSearchParams$1(a.searchParams)):l.search=new URLSearchParams$1(a.searchParams)),m&&(a.body=JSON.stringify(a.json),o.set("content-type","application/json"));const y=new AbortController,b=anySignal([y.signal,a.signal]);globalThis.ReadableStream!=null&&a.body instanceof globalThis.ReadableStream&&(isBrowser$1||isWebWorker)&&(a.body=new Blob(await all(browserReableStreamToIt(a.body))));const _=await timeout(fetch$1(l.toString(),{...a,signal:b,timeout:void 0,headers:o,duplex:"half"}),a.timeout,y);if(!_.ok&&a.throwHttpErrors)throw a.handleError&&await a.handleError(_),new HTTPError(_);return _.iterator=async function*(){yield*fromStream(_.body)},_.ndjson=async function*(){for await(const w of ndjson(_.iterator()))n.transform?yield n.transform(w):yield w},_}post(e,n={}){return this.fetch(e,{...n,method:"POST"})}get(e,n={}){return this.fetch(e,{...n,method:"GET"})}put(e,n={}){return this.fetch(e,{...n,method:"PUT"})}delete(e,n={}){return this.fetch(e,{...n,method:"DELETE"})}options(e,n={}){return this.fetch(e,{...n,method:"OPTIONS"})}}const ndjson=async function*(t){const e=new TextDecoder;let n="";for await(const a of t){n+=e.decode(a,{stream:!0});const o=n.split(/\r?\n/);for(let l=0;l<o.length-1;l++){const u=o[l].trim();u.length>0&&(yield JSON.parse(u))}n=o[o.length-1]}n+=e.decode(),n=n.trim(),n.length!==0&&(yield JSON.parse(n))},fromStream=t=>{if(isAsyncIterable(t))return t;if(isNodeReadableStream(t)){const e=t[Symbol.asyncIterator]();return{[Symbol.asyncIterator](){return{next:e.next.bind(e),return(n){return t.destroy(),typeof e.return=="function"?e.return():Promise.resolve({done:!0,value:n})}}}}}if(isWebReadableStream(t)){const e=t.getReader();return async function*(){try{for(;;){const{done:n,value:a}=await e.read();if(n)return;a&&(yield a)}}finally{e.releaseLock()}}()}throw new TypeError("Body can't be converted to AsyncIterable")},isAsyncIterable=t=>typeof t=="object"&&t!==null&&typeof t[Symbol.asyncIterator]=="function",isWebReadableStream=t=>t&&typeof t.getReader=="function",isNodeReadableStream=t=>Object.prototype.hasOwnProperty.call(t,"readable")&&Object.prototype.hasOwnProperty.call(t,"writable");HTTP.HTTPError=HTTPError;HTTP.TimeoutError=TimeoutError;HTTP.streamToAsyncIterator=fromStream;HTTP.post=(t,e)=>new HTTP(e).post(t,e);HTTP.get=(t,e)=>new HTTP(e).get(t,e);HTTP.put=(t,e)=>new HTTP(e).put(t,e);HTTP.delete=(t,e)=>new HTTP(e).delete(t,e);HTTP.options=(t,e)=>new HTTP(e).options(t,e);var http=HTTP;class Parser{constructor(){ut(this,"index",0);ut(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const n=this.index,a=e();return a===void 0&&(this.index=n),a}parseWith(e){const n=e();if(this.index===this.input.length)return n}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const n=this.readChar();if(n===e)return n})}readSeparator(e,n,a){return this.readAtomically(()=>{if(!(n>0&&this.readGivenChar(e)===void 0))return a()})}readNumber(e,n,a,o){return this.readAtomically(()=>{let l=0,u=0;const d=this.peekChar();if(d===void 0)return;const m=d==="0",y=2**(8*o)-1;for(;;){const b=this.readAtomically(()=>{const _=this.readChar();if(_===void 0)return;const w=Number.parseInt(_,e);if(!Number.isNaN(w))return w});if(b===void 0)break;if(l*=e,l+=b,l>y||(u+=1,n!==void 0&&u>n))return}if(u!==0)return!a&&m&&u>1?void 0:l})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let n=0;n<e.length;n++){const a=this.readSeparator(".",n,()=>this.readNumber(10,3,!1,1));if(a===void 0)return;e[n]=a}return e})}readIPv6Addr(){const e=n=>{for(let a=0;a<n.length/2;a++){const o=a*2;if(a<n.length-3){const u=this.readSeparator(":",a,()=>this.readIPv4Addr());if(u!==void 0)return n[o]=u[0],n[o+1]=u[1],n[o+2]=u[2],n[o+3]=u[3],[o+4,!0]}const l=this.readSeparator(":",a,()=>this.readNumber(16,4,!0,2));if(l===void 0)return[o,!1];n[o]=l>>8,n[o+1]=l&255}return[n.length,!1]};return this.readAtomically(()=>{const n=new Uint8Array(16),[a,o]=e(n);if(a===16)return n;if(o||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const l=new Uint8Array(14),u=16-(a+2),[d]=e(l.subarray(0,u));return n.set(l.subarray(0,d),16-d),n})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const MAX_IPV6_LENGTH=45,MAX_IPV4_LENGTH=15,parser=new Parser;function parseIPv4(t){if(!(t.length>MAX_IPV4_LENGTH))return parser.new(t).parseWith(()=>parser.readIPv4Addr())}function parseIPv6(t){if(!(t.length>MAX_IPV6_LENGTH))return parser.new(t).parseWith(()=>parser.readIPv6Addr())}function parseIP(t){if(!(t.length>MAX_IPV6_LENGTH))return parser.new(t).parseWith(()=>parser.readIPAddr())}function isIPv4(t){return Boolean(parseIPv4(t))}function isIPv6(t){return Boolean(parseIPv6(t))}function isIP(t){return Boolean(parseIP(t))}const isV4=isIPv4,isV6=isIPv6,toBytes=function(t){let e=0;if(t=t.toString().trim(),isV4(t)){const n=new Uint8Array(e+4);return t.split(/\./g).forEach(a=>{n[e++]=parseInt(a,10)&255}),n}if(isV6(t)){const n=t.split(":",8);let a;for(a=0;a<n.length;a++){const l=isV4(n[a]);let u;l&&(u=toBytes(n[a]),n[a]=toString$8(u.slice(0,2),"base16")),u!=null&&++a<8&&n.splice(a,0,toString$8(u.slice(2,4),"base16"))}if(n[0]==="")for(;n.length<8;)n.unshift("0");else if(n[n.length-1]==="")for(;n.length<8;)n.push("0");else if(n.length<8){for(a=0;a<n.length&&n[a]!=="";a++);const l=[a,1];for(a=9-n.length;a>0;a--)l.push("0");n.splice.apply(n,l)}const o=new Uint8Array(e+16);for(a=0;a<n.length;a++){const l=parseInt(n[a],16);o[e++]=l>>8&255,o[e++]=l&255}return o}throw new Error("invalid ip address")},toString$1=function(t,e=0,n){e=~~e,n=n??t.length-e;const a=new DataView(t.buffer);if(n===4){const o=[];for(let l=0;l<n;l++)o.push(t[e+l]);return o.join(".")}if(n===16){const o=[];for(let l=0;l<n;l+=2)o.push(a.getUint16(e+l).toString(16));return o.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},V=-1,names={},codes={},table=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,V,"ip6zone"],[43,8,"ipcidr"],[53,V,"dns",!0],[54,V,"dns4",!0],[55,V,"dns6",!0],[56,V,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,V,"unix",!1,!0],[421,V,"ipfs"],[421,V,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,V,"garlic64"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,V,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,V,"memory"]];table.forEach(t=>{const e=createProtocol(...t);codes[e.code]=e,names[e.name]=e});function createProtocol(t,e,n,a,o){return{code:t,size:e,name:n,resolvable:Boolean(a),path:Boolean(o)}}function getProtocol(t){if(typeof t=="number"){if(codes[t]!=null)return codes[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(names[t]!=null)return names[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}var encode_1$1=encode$4,MSB$2=128,REST$2=127,MSBALL$1=~REST$2,INT$1=Math.pow(2,31);function encode$4(t,e,n){e=e||[],n=n||0;for(var a=n;t>=INT$1;)e[n++]=t&255|MSB$2,t/=128;for(;t&MSBALL$1;)e[n++]=t&255|MSB$2,t>>>=7;return e[n]=t|0,encode$4.bytes=n-a+1,e}var decode$7=read$1,MSB$1$1=128,REST$1$1=127;function read$1(t,a){var n=0,a=a||0,o=0,l=a,u,d=t.length;do{if(l>=d)throw read$1.bytes=0,new RangeError("Could not decode varint");u=t[l++],n+=o<28?(u&REST$1$1)<<o:(u&REST$1$1)*Math.pow(2,o),o+=7}while(u>=MSB$1$1);return read$1.bytes=l-a,n}var N1$1=Math.pow(2,7),N2$1=Math.pow(2,14),N3$1=Math.pow(2,21),N4$1=Math.pow(2,28),N5$1=Math.pow(2,35),N6$1=Math.pow(2,42),N7$1=Math.pow(2,49),N8$1=Math.pow(2,56),N9$1=Math.pow(2,63),length$1=function(t){return t<N1$1?1:t<N2$1?2:t<N3$1?3:t<N4$1?4:t<N5$1?5:t<N6$1?6:t<N7$1?7:t<N8$1?8:t<N9$1?9:10},varint$1={encode:encode_1$1,decode:decode$7,encodingLength:length$1},_brrp_varint=varint$1;const decode$6=(t,e=0)=>[_brrp_varint.decode(t,e),_brrp_varint.decode.bytes],encodeTo=(t,e,n=0)=>(_brrp_varint.encode(t,e,n),e),encodingLength=t=>_brrp_varint.encodingLength(t),equals$1=(t,e)=>{if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.byteLength;n++)if(t[n]!==e[n])return!1;return!0},coerce$1=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")},fromString$1=t=>new TextEncoder().encode(t),toString=t=>new TextDecoder().decode(t),create=(t,e)=>{const n=e.byteLength,a=encodingLength(t),o=a+encodingLength(n),l=new Uint8Array(o+n);return encodeTo(t,l,0),encodeTo(n,l,a),l.set(e,o),new Digest(t,n,e,l)},decode$5=t=>{const e=coerce$1(t),[n,a]=decode$6(e),[o,l]=decode$6(e.subarray(a)),u=e.subarray(a+l);if(u.byteLength!==o)throw new Error("Incorrect length");return new Digest(n,o,u,e)},equals=(t,e)=>{if(t===e)return!0;{const n=e;return t.code===n.code&&t.size===n.size&&n.bytes instanceof Uint8Array&&equals$1(t.bytes,n.bytes)}};class Digest{constructor(e,n,a,o){this.code=e,this.size=n,this.digest=a,this.bytes=o}}function base$1(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var l=t.charAt(o),u=l.charCodeAt(0);if(n[u]!==255)throw new TypeError(l+" is ambiguous");n[u]=o}var d=t.length,m=t.charAt(0),y=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function _(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var C=0,k=0,B=0,D=A.length;B!==D&&A[B]===0;)B++,C++;for(var q=(D-B)*b+1>>>0,j=new Uint8Array(q);B!==D;){for(var J=A[B],Y=0,L=q-1;(J!==0||Y<k)&&L!==-1;L--,Y++)J+=256*j[L]>>>0,j[L]=J%d>>>0,J=J/d>>>0;if(J!==0)throw new Error("Non-zero carry");k=Y,B++}for(var Z=q-k;Z!==q&&j[Z]===0;)Z++;for(var Q=m.repeat(C);Z<q;++Z)Q+=t.charAt(j[Z]);return Q}function w(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var C=0;if(A[C]!==" "){for(var k=0,B=0;A[C]===m;)k++,C++;for(var D=(A.length-C)*y+1>>>0,q=new Uint8Array(D);A[C];){var j=n[A.charCodeAt(C)];if(j===255)return;for(var J=0,Y=D-1;(j!==0||J<B)&&Y!==-1;Y--,J++)j+=d*q[Y]>>>0,q[Y]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");B=J,C++}if(A[C]!==" "){for(var L=D-B;L!==D&&q[L]===0;)L++;for(var Z=new Uint8Array(k+(D-L)),Q=k;L!==D;)Z[Q++]=q[L++];return Z}}}function E(A){var C=w(A);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:w,decode:E}}var src$1=base$1,_brrp__multiformats_scope_baseX$1=src$1;let Encoder$1=class{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Decoder$1=class{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or$1(this,e)}},ComposedDecoder$1=class{constructor(e){this.decoders=e}or(e){return or$1(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};const or$1=(t,e)=>new ComposedDecoder$1({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});let Codec$1=class{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder$1(e,n,a),this.decoder=new Decoder$1(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};const from$1=({name:t,prefix:e,encode:n,decode:a})=>new Codec$1(t,e,n,a),baseX$1=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX$1(n,e);return from$1({prefix:t,name:e,encode:a,decode:l=>coerce$1(o(l))})},decode$4=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let l=t.length;for(;t[l-1]==="=";)--l;const u=new Uint8Array(l*n/8|0);let d=0,m=0,y=0;for(let b=0;b<l;++b){const _=o[t[b]];if(_===void 0)throw new SyntaxError(`Non-${a} character`);m=m<<n|_,d+=n,d>=8&&(d-=8,u[y++]=255&m>>d)}if(d>=n||255&m<<8-d)throw new SyntaxError("Unexpected end of data");return u},encode$3=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let l="",u=0,d=0;for(let m=0;m<t.length;++m)for(d=d<<8|t[m],u+=8;u>n;)u-=n,l+=e[o&d>>u];if(u&&(l+=e[o&d<<n-u]),a)for(;l.length*n&7;)l+="=";return l},rfc4648$1=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from$1({prefix:e,name:t,encode(o){return encode$3(o,a,n)},decode(o){return decode$4(o,a,n,t)}}),base58btc$1=baseX$1({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),base58flickr=baseX$1({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),base58=Object.freeze(Object.defineProperty({__proto__:null,base58btc:base58btc$1,base58flickr},Symbol.toStringTag,{value:"Module"})),base32$1=rfc4648$1({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),base32upper=rfc4648$1({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),base32pad=rfc4648$1({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),base32padupper=rfc4648$1({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),base32hex=rfc4648$1({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),base32hexupper=rfc4648$1({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),base32hexpad=rfc4648$1({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),base32hexpadupper=rfc4648$1({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),base32z=rfc4648$1({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),base32$2=Object.freeze(Object.defineProperty({__proto__:null,base32:base32$1,base32hex,base32hexpad,base32hexpadupper,base32hexupper,base32pad,base32padupper,base32upper,base32z},Symbol.toStringTag,{value:"Module"})),format=(t,e)=>{const{bytes:n,version:a}=t;switch(a){case 0:return toStringV0(n,baseCache(t),e||base58btc$1.encoder);default:return toStringV1(n,baseCache(t),e||base32$1.encoder)}},cache$1=new WeakMap,baseCache=t=>{const e=cache$1.get(t);if(e==null){const n=new Map;return cache$1.set(t,n),n}return e};class CID{constructor(e,n,a,o){this.code=n,this.version=e,this.multihash=a,this.bytes=o,this["/"]=o}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:n}=this;if(e!==DAG_PB_CODE)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(n.code!==SHA_256_CODE)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return CID.createV0(n)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:n}=this.multihash,a=create(e,n);return CID.createV1(this.code,a)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return CID.equals(this,e)}static equals(e,n){const a=n;return a&&e.code===a.code&&e.version===a.version&&equals(e.multihash,a.multihash)}toString(e){return format(this,e)}toJSON(){return{"/":format(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const n=e;if(n instanceof CID)return n;if(n["/"]!=null&&n["/"]===n.bytes||n.asCID===n){const{version:a,code:o,multihash:l,bytes:u}=n;return new CID(a,o,l,u||encodeCID(a,o,l.bytes))}else if(n[cidSymbol]===!0){const{version:a,multihash:o,code:l}=n,u=decode$5(o);return CID.create(a,l,u)}else return null}static create(e,n,a){if(typeof n!="number")throw new Error("String codecs are no longer supported");if(!(a.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(n!==DAG_PB_CODE)throw new Error(`Version 0 CID must use dag-pb (code: ${DAG_PB_CODE}) block encoding`);return new CID(e,n,a,a.bytes)}case 1:{const o=encodeCID(e,n,a.bytes);return new CID(e,n,a,o)}default:throw new Error("Invalid version")}}static createV0(e){return CID.create(0,DAG_PB_CODE,e)}static createV1(e,n){return CID.create(1,e,n)}static decode(e){const[n,a]=CID.decodeFirst(e);if(a.length)throw new Error("Incorrect length");return n}static decodeFirst(e){const n=CID.inspectBytes(e),a=n.size-n.multihashSize,o=coerce$1(e.subarray(a,a+n.multihashSize));if(o.byteLength!==n.multihashSize)throw new Error("Incorrect length");const l=o.subarray(n.multihashSize-n.digestSize),u=new Digest(n.multihashCode,n.digestSize,l,o);return[n.version===0?CID.createV0(u):CID.createV1(n.codec,u),e.subarray(n.size)]}static inspectBytes(e){let n=0;const a=()=>{const[_,w]=decode$6(e.subarray(n));return n+=w,_};let o=a(),l=DAG_PB_CODE;if(o===18?(o=0,n=0):l=a(),o!==0&&o!==1)throw new RangeError(`Invalid CID version ${o}`);const u=n,d=a(),m=a(),y=n+m,b=y-u;return{version:o,codec:l,multihashCode:d,digestSize:m,multihashSize:b,size:y}}static parse(e,n){const[a,o]=parseCIDtoBytes(e,n),l=CID.decode(o);if(l.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return baseCache(l).set(a,e),l}}const parseCIDtoBytes=(t,e)=>{switch(t[0]){case"Q":{const n=e||base58btc$1;return[base58btc$1.prefix,n.decode(`${base58btc$1.prefix}${t}`)]}case base58btc$1.prefix:{const n=e||base58btc$1;return[base58btc$1.prefix,n.decode(t)]}case base32$1.prefix:{const n=e||base32$1;return[base32$1.prefix,n.decode(t)]}default:{if(e==null)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}},toStringV0=(t,e,n)=>{const{prefix:a}=n;if(a!==base58btc$1.prefix)throw Error(`Cannot string encode V0 in ${n.name} encoding`);const o=e.get(a);if(o==null){const l=n.encode(t).slice(1);return e.set(a,l),l}else return o},toStringV1=(t,e,n)=>{const{prefix:a}=n,o=e.get(a);if(o==null){const l=n.encode(t);return e.set(a,l),l}else return o},DAG_PB_CODE=112,SHA_256_CODE=18,encodeCID=(t,e,n)=>{const a=encodingLength(t),o=a+encodingLength(e),l=new Uint8Array(o+n.byteLength);return encodeTo(t,l,0),encodeTo(e,l,a),l.set(n,o),l},cidSymbol=Symbol.for("@ipld/js-cid/CID"),identity=from$1({prefix:"\0",name:"identity",encode:t=>toString(t),decode:t=>fromString$1(t)}),identityBase=Object.freeze(Object.defineProperty({__proto__:null,identity},Symbol.toStringTag,{value:"Module"})),base2=rfc4648$1({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),base2$1=Object.freeze(Object.defineProperty({__proto__:null,base2},Symbol.toStringTag,{value:"Module"})),base8=rfc4648$1({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),base8$1=Object.freeze(Object.defineProperty({__proto__:null,base8},Symbol.toStringTag,{value:"Module"})),base10=baseX$1({prefix:"9",name:"base10",alphabet:"0123456789"}),base10$1=Object.freeze(Object.defineProperty({__proto__:null,base10},Symbol.toStringTag,{value:"Module"})),base16=rfc4648$1({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),base16upper=rfc4648$1({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),base16$1=Object.freeze(Object.defineProperty({__proto__:null,base16,base16upper},Symbol.toStringTag,{value:"Module"})),base36=baseX$1({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),base36upper=baseX$1({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),base36$1=Object.freeze(Object.defineProperty({__proto__:null,base36,base36upper},Symbol.toStringTag,{value:"Module"})),base64$1=rfc4648$1({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),base64pad=rfc4648$1({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),base64url=rfc4648$1({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),base64urlpad=rfc4648$1({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),base64$2=Object.freeze(Object.defineProperty({__proto__:null,base64:base64$1,base64pad,base64url,base64urlpad},Symbol.toStringTag,{value:"Module"})),alphabet=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),alphabetBytesToChars=alphabet.reduce((t,e,n)=>(t[n]=e,t),[]),alphabetCharsToBytes=alphabet.reduce((t,e,n)=>(t[e.codePointAt(0)]=n,t),[]);function encode$2(t){return t.reduce((e,n)=>(e+=alphabetBytesToChars[n],e),"")}function decode$3(t){const e=[];for(const n of t){const a=alphabetCharsToBytes[n.codePointAt(0)];if(a===void 0)throw new Error(`Non-base256emoji character: ${n}`);e.push(a)}return new Uint8Array(e)}const base256emoji=from$1({prefix:"🚀",name:"base256emoji",encode:encode$2,decode:decode$3}),base256emoji$1=Object.freeze(Object.defineProperty({__proto__:null,base256emoji},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const bases={...identityBase,...base2$1,...base8$1,...base10$1,...base16$1,...base32$2,...base36$1,...base58,...base64$2,...base256emoji$1};var encode_1=encode$1,MSB$1=128,REST$1=127,MSBALL=~REST$1,INT=Math.pow(2,31);function encode$1(t,e,n){if(Number.MAX_SAFE_INTEGER&&t>Number.MAX_SAFE_INTEGER)throw encode$1.bytes=0,new RangeError("Could not encode varint");e=e||[],n=n||0;for(var a=n;t>=INT;)e[n++]=t&255|MSB$1,t/=128;for(;t&MSBALL;)e[n++]=t&255|MSB$1,t>>>=7;return e[n]=t|0,encode$1.bytes=n-a+1,e}var decode$2=read,MSB=128,REST=127;function read(t,a){var n=0,a=a||0,o=0,l=a,u,d=t.length;do{if(l>=d||o>49)throw read.bytes=0,new RangeError("Could not decode varint");u=t[l++],n+=o<28?(u&REST)<<o:(u&REST)*Math.pow(2,o),o+=7}while(u>=MSB);return read.bytes=l-a,n}var N1=Math.pow(2,7),N2=Math.pow(2,14),N3=Math.pow(2,21),N4=Math.pow(2,28),N5=Math.pow(2,35),N6=Math.pow(2,42),N7=Math.pow(2,49),N8=Math.pow(2,56),N9=Math.pow(2,63),length=function(t){return t<N1?1:t<N2?2:t<N3?3:t<N4?4:t<N5?5:t<N6?6:t<N7?7:t<N8?8:t<N9?9:10},varint={encode:encode_1,decode:decode$2,encodingLength:length};function convertToString(t,e){switch(getProtocol(t).code){case 4:case 41:return bytes2ip(e);case 42:return bytes2str(e);case 6:case 273:case 33:case 132:return bytes2port(e).toString();case 53:case 54:case 55:case 56:case 400:case 777:return bytes2str(e);case 421:return bytes2mh(e);case 444:return bytes2onion(e);case 445:return bytes2onion(e);case 466:return bytes2mb(e);default:return toString$8(e,"base16")}}function convertToBytes(t,e){switch(getProtocol(t).code){case 4:return ip2bytes(e);case 41:return ip2bytes(e);case 42:return str2bytes(e);case 6:case 273:case 33:case 132:return port2bytes(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 777:return str2bytes(e);case 421:return mh2bytes(e);case 444:return onion2bytes(e);case 445:return onion32bytes(e);case 466:return mb2bytes(e);default:return fromString$5(e,"base16")}}const decoders=Object.values(bases).map(t=>t.decoder),anybaseDecoder=function(){let t=decoders[0].or(decoders[1]);return decoders.slice(2).forEach(e=>t=t.or(e)),t}();function ip2bytes(t){if(!isIP(t))throw new Error("invalid ip address");return toBytes(t)}function bytes2ip(t){const e=toString$1(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!isIP(e))throw new Error("invalid ip address");return e}function port2bytes(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function bytes2port(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function str2bytes(t){const e=fromString$5(t),n=Uint8Array.from(varint.encode(e.length));return concat$2([n,e],n.length+e.length)}function bytes2str(t){const e=varint.decode(t);if(t=t.slice(varint.decode.bytes),t.length!==e)throw new Error("inconsistent lengths");return toString$8(t)}function mh2bytes(t){let e;t[0]==="Q"||t[0]==="1"?e=decode$5(base58btc$1.decode(`z${t}`)).bytes:e=CID.parse(t).multihash.bytes;const n=Uint8Array.from(varint.encode(e.length));return concat$2([n,e],n.length+e.length)}function mb2bytes(t){const e=anybaseDecoder.decode(t),n=Uint8Array.from(varint.encode(e.length));return concat$2([n,e],n.length+e.length)}function bytes2mb(t){const e=varint.decode(t),n=t.slice(varint.decode.bytes);if(n.length!==e)throw new Error("inconsistent lengths");return"u"+toString$8(n,"base64url")}function bytes2mh(t){const e=varint.decode(t),n=t.slice(varint.decode.bytes);if(n.length!==e)throw new Error("inconsistent lengths");return toString$8(n,"base58btc")}function onion2bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const n=base32$1.decode("b"+e[0]),a=parseInt(e[1],10);if(a<1||a>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(a);return concat$2([n,o],n.length+o.length)}function onion32bytes(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const n=base32$1.decode(`b${e[0]}`),a=parseInt(e[1],10);if(a<1||a>65536)throw new Error("Port number is not in range(1, 65536)");const o=port2bytes(a);return concat$2([n,o],n.length+o.length)}function bytes2onion(t){const e=t.slice(0,t.length-2),n=t.slice(t.length-2),a=toString$8(e,"base32"),o=bytes2port(n);return`${a}:${o}`}function stringToStringTuples(t){const e=[],n=t.split("/").slice(1);if(n.length===1&&n[0]==="")return[];for(let a=0;a<n.length;a++){const o=n[a],l=getProtocol(o);if(l.size===0){e.push([o]);continue}if(a++,a>=n.length)throw ParseError("invalid address: "+t);if(l.path===!0){e.push([o,cleanPath(n.slice(a).join("/"))]);break}e.push([o,n[a]])}return e}function stringTuplesToString(t){const e=[];return t.map(n=>{const a=protoFromTuple(n);return e.push(a.name),n.length>1&&n[1]!=null&&e.push(n[1]),null}),cleanPath(e.join("/"))}function stringTuplesToTuples(t){return t.map(e=>{Array.isArray(e)||(e=[e]);const n=protoFromTuple(e);return e.length>1?[n.code,convertToBytes(n.code,e[1])]:[n.code]})}function tuplesToStringTuples(t){return t.map(e=>{const n=protoFromTuple(e);return e[1]!=null?[n.code,convertToString(n.code,e[1])]:[n.code]})}function tuplesToBytes(t){return fromBytes(concat$2(t.map(e=>{const n=protoFromTuple(e);let a=Uint8Array.from(varint.encode(n.code));return e.length>1&&e[1]!=null&&(a=concat$2([a,e[1]])),a})))}function sizeForAddr(t,e){return t.size>0?t.size/8:t.size===0?0:varint.decode(e)+(varint.decode.bytes??0)}function bytesToTuples(t){const e=[];let n=0;for(;n<t.length;){const a=varint.decode(t,n),o=varint.decode.bytes??0,l=getProtocol(a),u=sizeForAddr(l,t.slice(n+o));if(u===0){e.push([a]),n+=o;continue}const d=t.slice(n+o,n+o+u);if(n+=u+o,n>t.length)throw ParseError("Invalid address Uint8Array: "+toString$8(t,"base16"));e.push([a,d])}return e}function bytesToString(t){const e=bytesToTuples(t),n=tuplesToStringTuples(e);return stringTuplesToString(n)}function stringToBytes(t){t=cleanPath(t);const e=stringToStringTuples(t),n=stringTuplesToTuples(e);return tuplesToBytes(n)}function fromString(t){return stringToBytes(t)}function fromBytes(t){const e=validateBytes(t);if(e!=null)throw e;return Uint8Array.from(t)}function validateBytes(t){try{bytesToTuples(t)}catch(e){return e}}function cleanPath(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}function ParseError(t){return new Error("Error parsing address: "+t)}function protoFromTuple(t){return getProtocol(t[0])}var __classPrivateFieldGet=globalThis&&globalThis.__classPrivateFieldGet||function(t,e,n,a){if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!a:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?a:n==="a"?a.call(t):a?a.value:e.get(t)},__classPrivateFieldSet=globalThis&&globalThis.__classPrivateFieldSet||function(t,e,n,a,o){if(a==="m")throw new TypeError("Private method is not writable");if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},_DefaultMultiaddr_string,_DefaultMultiaddr_tuples,_DefaultMultiaddr_stringTuples,_a;const inspect=Symbol.for("nodejs.util.inspect.custom"),DNS_CODES=[getProtocol("dns").code,getProtocol("dns4").code,getProtocol("dns6").code,getProtocol("dnsaddr").code],resolvers=new Map,symbol=Symbol.for("@multiformats/js-multiaddr/multiaddr");function fromNodeAddress(t,e){if(t==null)throw new Error("requires node address object");if(e==null)throw new Error("requires transport protocol");let n,a=t.address;switch(t.family){case 4:n="ip4";break;case 6:if(n="ip6",a.includes("%")){const o=a.split("%");if(o.length!==2)throw Error("Multiple ip6 zones in multiaddr");a=o[0],n=`/ip6zone/${o[1]}/ip6`}break;default:throw Error("Invalid addr family, should be 4 or 6.")}return new DefaultMultiaddr("/"+[n,a,e,t.port].join("/"))}function isName(t){return isMultiaddr(t)?t.protos().some(e=>e.resolvable):!1}function isMultiaddr(t){return Boolean(t?.[symbol])}class DefaultMultiaddr{constructor(e){if(_DefaultMultiaddr_string.set(this,void 0),_DefaultMultiaddr_tuples.set(this,void 0),_DefaultMultiaddr_stringTuples.set(this,void 0),this[_a]=!0,e==null&&(e=""),e instanceof Uint8Array)this.bytes=fromBytes(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);this.bytes=fromString(e)}else if(isMultiaddr(e))this.bytes=fromBytes(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return __classPrivateFieldGet(this,_DefaultMultiaddr_string,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_string,bytesToString(this.bytes),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_string,"f")}toJSON(){return this.toString()}toOptions(){let e,n,a,o,l="";const u=getProtocol("tcp"),d=getProtocol("udp"),m=getProtocol("ip4"),y=getProtocol("ip6"),b=getProtocol("dns6"),_=getProtocol("ip6zone");for(const[E,A]of this.stringTuples())E===_.code&&(l=`%${A??""}`),DNS_CODES.includes(E)&&(n=u.name,o=443,a=`${A??""}${l}`,e=E===b.code?6:4),(E===u.code||E===d.code)&&(n=getProtocol(E).name,o=parseInt(A??"")),(E===m.code||E===y.code)&&(n=getProtocol(E).name,a=`${A??""}${l}`,e=E===y.code?6:4);if(e==null||n==null||a==null||o==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:a,transport:n,port:o}}protos(){return this.protoCodes().map(e=>Object.assign({},getProtocol(e)))}protoCodes(){const e=[],n=this.bytes;let a=0;for(;a<n.length;){const o=varint.decode(n,a),l=varint.decode.bytes??0,u=getProtocol(o),d=sizeForAddr(u,n.slice(a+l));a+=d+l,e.push(o)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return __classPrivateFieldGet(this,_DefaultMultiaddr_tuples,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_tuples,bytesToTuples(this.bytes),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_tuples,"f")}stringTuples(){return __classPrivateFieldGet(this,_DefaultMultiaddr_stringTuples,"f")==null&&__classPrivateFieldSet(this,_DefaultMultiaddr_stringTuples,tuplesToStringTuples(this.tuples()),"f"),__classPrivateFieldGet(this,_DefaultMultiaddr_stringTuples,"f")}encapsulate(e){return e=new DefaultMultiaddr(e),new DefaultMultiaddr(this.toString()+e.toString())}decapsulate(e){const n=e.toString(),a=this.toString(),o=a.lastIndexOf(n);if(o<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new DefaultMultiaddr(a.slice(0,o))}decapsulateCode(e){const n=this.tuples();for(let a=n.length-1;a>=0;a--)if(n[a][0]===e)return new DefaultMultiaddr(tuplesToBytes(n.slice(0,a)));return this}getPeerId(){try{const n=this.stringTuples().filter(a=>a[0]===names.ipfs.code).pop();if(n?.[1]!=null){const a=n[1];return a[0]==="Q"||a[0]==="1"?toString$8(base58btc$1.decode(`z${a}`),"base58btc"):toString$8(CID.parse(a).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){let e=null;try{e=this.stringTuples().filter(n=>getProtocol(n[0]).path===!0)[0][1],e==null&&(e=null)}catch{e=null}return e}equals(e){return equals$4(this.bytes,e.bytes)}async resolve(e){const n=this.protos().find(l=>l.resolvable);if(n==null)return[this];const a=resolvers.get(n.name);if(a==null)throw errCode(new Error(`no available resolver for ${n.name}`),"ERR_NO_AVAILABLE_RESOLVER");return(await a(this,e)).map(l=>new DefaultMultiaddr(l))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const n=(e??this).protos();return!(n.length!==2||n[0].code!==4&&n[0].code!==41||n[1].code!==6&&n[1].code!==273)}[(_DefaultMultiaddr_string=new WeakMap,_DefaultMultiaddr_tuples=new WeakMap,_DefaultMultiaddr_stringTuples=new WeakMap,_a=symbol,inspect)](){return`Multiaddr(${bytesToString(this.bytes)})`}}function multiaddr(t){return new DefaultMultiaddr(t)}function base(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var n=new Uint8Array(256),a=0;a<n.length;a++)n[a]=255;for(var o=0;o<t.length;o++){var l=t.charAt(o),u=l.charCodeAt(0);if(n[u]!==255)throw new TypeError(l+" is ambiguous");n[u]=o}var d=t.length,m=t.charAt(0),y=Math.log(d)/Math.log(256),b=Math.log(256)/Math.log(d);function _(A){if(A instanceof Uint8Array||(ArrayBuffer.isView(A)?A=new Uint8Array(A.buffer,A.byteOffset,A.byteLength):Array.isArray(A)&&(A=Uint8Array.from(A))),!(A instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(A.length===0)return"";for(var C=0,k=0,B=0,D=A.length;B!==D&&A[B]===0;)B++,C++;for(var q=(D-B)*b+1>>>0,j=new Uint8Array(q);B!==D;){for(var J=A[B],Y=0,L=q-1;(J!==0||Y<k)&&L!==-1;L--,Y++)J+=256*j[L]>>>0,j[L]=J%d>>>0,J=J/d>>>0;if(J!==0)throw new Error("Non-zero carry");k=Y,B++}for(var Z=q-k;Z!==q&&j[Z]===0;)Z++;for(var Q=m.repeat(C);Z<q;++Z)Q+=t.charAt(j[Z]);return Q}function w(A){if(typeof A!="string")throw new TypeError("Expected String");if(A.length===0)return new Uint8Array;var C=0;if(A[C]!==" "){for(var k=0,B=0;A[C]===m;)k++,C++;for(var D=(A.length-C)*y+1>>>0,q=new Uint8Array(D);A[C];){var j=n[A.charCodeAt(C)];if(j===255)return;for(var J=0,Y=D-1;(j!==0||J<B)&&Y!==-1;Y--,J++)j+=d*q[Y]>>>0,q[Y]=j%256>>>0,j=j/256>>>0;if(j!==0)throw new Error("Non-zero carry");B=J,C++}if(A[C]!==" "){for(var L=D-B;L!==D&&q[L]===0;)L++;for(var Z=new Uint8Array(k+(D-L)),Q=k;L!==D;)Z[Q++]=q[L++];return Z}}}function E(A){var C=w(A);if(C)return C;throw new Error(`Non-${e} character`)}return{encode:_,decodeUnsafe:w,decode:E}}var src=base,_brrp__multiformats_scope_baseX=src;const coerce=t=>{if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")};class Encoder{constructor(e,n,a){this.name=e,this.prefix=n,this.baseEncode=a}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Decoder{constructor(e,n,a){if(this.name=e,this.prefix=n,n.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=n.codePointAt(0),this.baseDecode=a}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return or(this,e)}}class ComposedDecoder{constructor(e){this.decoders=e}or(e){return or(this,e)}decode(e){const n=e[0],a=this.decoders[n];if(a)return a.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const or=(t,e)=>new ComposedDecoder({...t.decoders||{[t.prefix]:t},...e.decoders||{[e.prefix]:e}});class Codec{constructor(e,n,a,o){this.name=e,this.prefix=n,this.baseEncode=a,this.baseDecode=o,this.encoder=new Encoder(e,n,a),this.decoder=new Decoder(e,n,o)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}const from=({name:t,prefix:e,encode:n,decode:a})=>new Codec(t,e,n,a),baseX=({prefix:t,name:e,alphabet:n})=>{const{encode:a,decode:o}=_brrp__multiformats_scope_baseX(n,e);return from({prefix:t,name:e,encode:a,decode:l=>coerce(o(l))})},decode$1=(t,e,n,a)=>{const o={};for(let b=0;b<e.length;++b)o[e[b]]=b;let l=t.length;for(;t[l-1]==="=";)--l;const u=new Uint8Array(l*n/8|0);let d=0,m=0,y=0;for(let b=0;b<l;++b){const _=o[t[b]];if(_===void 0)throw new SyntaxError(`Non-${a} character`);m=m<<n|_,d+=n,d>=8&&(d-=8,u[y++]=255&m>>d)}if(d>=n||255&m<<8-d)throw new SyntaxError("Unexpected end of data");return u},encode=(t,e,n)=>{const a=e[e.length-1]==="=",o=(1<<n)-1;let l="",u=0,d=0;for(let m=0;m<t.length;++m)for(d=d<<8|t[m],u+=8;u>n;)u-=n,l+=e[o&d>>u];if(u&&(l+=e[o&d<<n-u]),a)for(;l.length*n&7;)l+="=";return l},rfc4648=({name:t,prefix:e,bitsPerChar:n,alphabet:a})=>from({prefix:e,name:t,encode(o){return encode(o,a,n)},decode(o){return decode$1(o,a,n,t)}}),base58btc=baseX({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});baseX({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});const base32=rfc4648({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});rfc4648({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5});rfc4648({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5});rfc4648({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5});rfc4648({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5});rfc4648({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5});rfc4648({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5});rfc4648({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5});rfc4648({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});const base64=rfc4648({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6});rfc4648({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});rfc4648({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});rfc4648({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});debug.formatters.b=t=>t==null?"undefined":base58btc.baseEncode(t);debug.formatters.t=t=>t==null?"undefined":base32.baseEncode(t);debug.formatters.m=t=>t==null?"undefined":base64.baseEncode(t);debug.formatters.p=t=>t==null?"undefined":t.toString();debug.formatters.c=t=>t==null?"undefined":t.toString();debug.formatters.k=t=>t==null?"undefined":t.toString();function logger(t){return Object.assign(debug(t),{error:debug(`${t}:error`),trace:debug(`${t}:trace`)})}const merge$2=mergeOptions$2.bind({ignoreUndefined:!0}),daemonLog$1={info:logger("ipfsd-ctl:client:stdout"),err:logger("ipfsd-ctl:client:stderr")},rpcModuleLogger$1=logger("ipfsd-ctl:client");class Client{constructor(e,n,a){this.opts=a,this.baseUrl=e,this.id=n.id,this.path=n.path,this.initialized=n.initialized,this.started=n.started,this.disposable=n.disposable,this.clean=n.clean,this.subprocess=null,this._setApi(n.apiAddr),this._setGateway(n.gatewayAddr),this._setGrpc(n.grpcAddr),this._createApi(),this._peerId=null}get peer(){if(this._peerId==null)throw new Error("Not started");return this._peerId}_setApi(e){e!=null&&(this.apiAddr=multiaddr(e))}_setGateway(e){e!=null&&(this.gatewayAddr=multiaddr(e))}_setGrpc(e){e!=null&&(this.grpcAddr=multiaddr(e))}_createApi(){if(this.opts.ipfsClientModule!=null&&this.grpcAddr!=null&&this.apiAddr!=null)this.api=this.opts.ipfsClientModule.create({grpc:this.grpcAddr,http:this.apiAddr});else if(this.apiAddr!=null)if(this.opts.kuboRpcModule!=null)rpcModuleLogger$1("Using kubo-rpc-client"),this.api=this.opts.kuboRpcModule.create(this.apiAddr);else if(this.opts.ipfsHttpModule!=null)rpcModuleLogger$1("Using ipfs-http-client"),this.api=this.opts.ipfsHttpModule.create(this.apiAddr);else throw new Error("You must pass either a kuboRpcModule or ipfsHttpModule");this.api!=null&&(this.apiAddr!=null&&(this.api.apiHost=this.apiAddr.nodeAddress().address,this.api.apiPort=this.apiAddr.nodeAddress().port),this.gatewayAddr!=null&&(this.api.gatewayHost=this.gatewayAddr.nodeAddress().address,this.api.gatewayPort=this.gatewayAddr.nodeAddress().port),this.grpcAddr!=null&&(this.api.grpcHost=this.grpcAddr.nodeAddress().address,this.api.grpcPort=this.grpcAddr.nodeAddress().port))}async init(e={}){if(this.initialized)return this;let n={};this.opts.ipfsOptions?.init!=null&&typeof this.opts.ipfsOptions.init!="boolean"&&(n=this.opts.ipfsOptions.init);const a=merge$2({emptyRepo:!1,profiles:this.opts.test===!0?["test"]:[]},n,typeof e=="boolean"?{}:e),l=await(await http.post(`${this.baseUrl}/init`,{searchParams:new URLSearchParams({id:this.id}),json:a})).json();return this.initialized=l.initialized,this.clean=!1,this}async cleanup(){return this.clean?this:(await http.post(`${this.baseUrl}/cleanup`,{searchParams:new URLSearchParams({id:this.id})}),this.clean=!0,this)}async start(){if(!this.started){const a=await(await http.post(`${this.baseUrl}/start`,{searchParams:new URLSearchParams({id:this.id})})).json();this._setApi(a.apiAddr),this._setGateway(a.gatewayAddr),this._setGrpc(a.grpcAddr),this._createApi(),this.started=!0}if(this.api==null)throw new Error("api was not set");const e=await this.api.id();return this._peerId=e,daemonLog$1.info(e),this}async stop(){return this.started?(await http.post(`${this.baseUrl}/stop`,{searchParams:new URLSearchParams({id:this.id})}),this.started=!1,this.disposable&&await this.cleanup(),this):this}async pid(){return(await(await http.get(`${this.baseUrl}/pid`,{searchParams:new URLSearchParams({id:this.id})})).json()).pid}async version(){return(await(await http.get(`${this.baseUrl}/version`,{searchParams:new URLSearchParams({id:this.id})})).json()).version}}const merge$1=mergeOptions$2.bind({ignoreUndefined:!0}),daemonLog={info:logger("ipfsd-ctl:proc:stdout"),err:logger("ipfsd-ctl:proc:stderr")},rpcModuleLogger=logger("ipfsd-ctl:proc");class InProc{constructor(e){this.opts=e,this.path=this.opts.ipfsOptions?.repo??(e.disposable===!0?tmpDir(e.type):defaultRepo(e.type)),this.initOptions=toInitOptions(e.ipfsOptions?.init),this.disposable=Boolean(e.disposable),this.initialized=!1,this.started=!1,this.clean=!0,this.subprocess=null,this._peerId=null}get peer(){if(this._peerId==null)throw new Error("Not started");return this._peerId}async setExec(){if(this.api!=null)return;const e=this.opts.ipfsModule;this.api=await e.create({...this.opts.ipfsOptions,silent:!0,repo:this.path,init:this.initOptions})}_setApi(e){if(this.apiAddr=multiaddr(e),this.opts.kuboRpcModule!=null)rpcModuleLogger("Using kubo-rpc-client"),this.api=this.opts.kuboRpcModule.create(e);else if(this.opts.ipfsHttpModule!=null)rpcModuleLogger("Using ipfs-http-client"),this.api=this.opts.ipfsHttpModule.create(e);else throw new Error("You must pass either a kuboRpcModule or ipfsHttpModule");this.api.apiHost=this.apiAddr.nodeAddress().address,this.api.apiPort=this.apiAddr.nodeAddress().port}async init(e={}){return this.initialized=await repoExists(this.path),this.initialized?(this.clean=!1,this):(this.initOptions=merge$1({emptyRepo:!1,profiles:this.opts.test===!0?["test"]:[]},this.initOptions,toInitOptions(e)),await this.setExec(),this.clean=!1,this.initialized=!0,this)}async cleanup(){return this.clean||(await removeRepo(this.path),this.clean=!0),this}async start(){checkForRunningApi(this.path),await this.setExec(),await this.api.start(),this.started=!0;const e=await this.api.id();return this._peerId=e,daemonLog.info(e),this}async stop(){return this.started?(await this.api.stop(),this.started=!1,this.disposable&&await this.cleanup(),this):this}async pid(){return await Promise.reject(new Error("not implemented"))}async version(){await this.setExec();const{version:e}=await this.api.version();return e}}const toInitOptions=(t={})=>typeof t=="boolean"?{}:t,testsConfig=t=>{const{type:e}=t;let n;return e!=="proc"&&(isBrowser$2||isWebWorker$1)?n=["/ip4/127.0.0.1/tcp/0/ws"]:e==="proc"&&(isBrowser$2||isWebWorker$1)?n=[]:n=["/ip4/127.0.0.1/tcp/0"],{API:{HTTPHeaders:{"Access-Control-Allow-Origin":["*"],"Access-Control-Allow-Methods":["PUT","POST","GET"]}},Addresses:{Swarm:n,API:"/ip4/127.0.0.1/tcp/0",Gateway:"/ip4/127.0.0.1/tcp/0",RPC:"/ip4/127.0.0.1/tcp/0"}}},merge=mergeOptions$2.bind({ignoreUndefined:!0}),defaults={remote:!isNode&&!isElectronMain,endpoint:{}.IPFSD_CTL_SERVER??"http://localhost:43134",disposable:!0,test:!1,type:"go",env:{},args:[],ipfsOptions:{},forceKill:!0,forceKillTimeout:5e3};class DefaultFactory{constructor(e={},n={}){this.opts=merge(defaults,e),this.overrides=merge({js:merge(this.opts,{type:"js"}),go:merge(this.opts,{type:"go"}),proc:merge(this.opts,{type:"proc"})},n),this.controllers=[]}async tmpDir(e={}){const n=merge(this.opts,e);return n.remote===!0?(await(await http.get(`${n.endpoint??""}/util/tmp-dir`,{searchParams:new URLSearchParams({type:n.type??""})})).json()).tmpDir:await Promise.resolve(tmpDir(n.type))}async _spawnRemote(e){const n={json:{...e,remote:!1,ipfsBin:void 0,ipfsModule:void 0,ipfsHttpModule:void 0,kuboRpcModule:void 0}},a=await http.post(`${e.endpoint}/spawn`,n);return new Client(e.endpoint,await a.json(),e)}async spawn(e={}){const n=e.type??this.opts.type??"go",a=merge(this.overrides[n],e),o=merge({start:!1,init:!1},a.test===!0?{config:testsConfig(a),preload:{enabled:!1}}:{},a.ipfsOptions);let l;return a.type==="proc"?l=new InProc({...a,ipfsOptions:o}):a.remote===!0?l=await this._spawnRemote({...a,ipfsOptions:o}):l=new Client({...a,ipfsOptions:o}),this.controllers.push(l),a.disposable===!0&&(e.ipfsOptions==null||e.ipfsOptions?.init!==!1)&&await l.init(o.init),a.disposable===!0&&(e.ipfsOptions==null||e.ipfsOptions?.start!==!1)&&await l.start(),l}async clean(){await Promise.all(this.controllers.map(async e=>await e.stop())),this.controllers=[]}}const require$$0=getAugmentedNamespace(assert$1),require$$1=getAugmentedNamespace(path$1);var old={},hasRequiredOld;function requireOld(){if(hasRequiredOld)return old;hasRequiredOld=1;var t=require$$1,e=browser$1$1.platform==="win32",n=require$$0$2,a={}.NODE_DEBUG&&/fs/.test({}.NODE_DEBUG);function o(){var m;if(a){var y=new Error;m=b}else m=_;return m;function b(w){w&&(y.message=w.message,w=y,_(w))}function _(w){if(w){if(browser$1$1.throwDeprecation)throw w;if(!browser$1$1.noDeprecation){var E="fs: missing callback "+(w.stack||w.message);browser$1$1.traceDeprecation?console.trace(E):console.error(E)}}}}function l(m){return typeof m=="function"?m:o()}if(t.normalize,e)var u=/(.*?)(?:[\/\\]+|$)/g;else var u=/(.*?)(?:[\/]+|$)/g;if(e)var d=/^(?:[a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/][^\\\/]+)?[\\\/]*/;else var d=/^[\/]*/;return old.realpathSync=function(y,b){if(y=t.resolve(y),b&&Object.prototype.hasOwnProperty.call(b,y))return b[y];var _=y,w={},E={},A,C,k,B;D();function D(){var Z=d.exec(y);A=Z[0].length,C=Z[0],k=Z[0],B="",e&&!E[k]&&(n.lstatSync(k),E[k]=!0)}for(;A<y.length;){u.lastIndex=A;var q=u.exec(y);if(B=C,C+=q[0],k=B+q[1],A=u.lastIndex,!(E[k]||b&&b[k]===k)){var j;if(b&&Object.prototype.hasOwnProperty.call(b,k))j=b[k];else{var J=n.lstatSync(k);if(!J.isSymbolicLink()){E[k]=!0,b&&(b[k]=k);continue}var Y=null;if(!e){var L=J.dev.toString(32)+":"+J.ino.toString(32);w.hasOwnProperty(L)&&(Y=w[L])}Y===null&&(n.statSync(k),Y=n.readlinkSync(k)),j=t.resolve(B,Y),b&&(b[k]=j),e||(w[L]=Y)}y=t.resolve(j,y.slice(A)),D()}}return b&&(b[_]=y),y},old.realpath=function(y,b,_){if(typeof _!="function"&&(_=l(b),b=null),y=t.resolve(y),b&&Object.prototype.hasOwnProperty.call(b,y))return browser$1$1.nextTick(_.bind(null,null,b[y]));var w=y,E={},A={},C,k,B,D;q();function q(){var Z=d.exec(y);C=Z[0].length,k=Z[0],B=Z[0],D="",e&&!A[B]?n.lstat(B,function(Q){if(Q)return _(Q);A[B]=!0,j()}):browser$1$1.nextTick(j)}function j(){if(C>=y.length)return b&&(b[w]=y),_(null,y);u.lastIndex=C;var Z=u.exec(y);return D=k,k+=Z[0],B=D+Z[1],C=u.lastIndex,A[B]||b&&b[B]===B?browser$1$1.nextTick(j):b&&Object.prototype.hasOwnProperty.call(b,B)?L(b[B]):n.lstat(B,J)}function J(Z,Q){if(Z)return _(Z);if(!Q.isSymbolicLink())return A[B]=!0,b&&(b[B]=B),browser$1$1.nextTick(j);if(!e){var oe=Q.dev.toString(32)+":"+Q.ino.toString(32);if(E.hasOwnProperty(oe))return Y(null,E[oe],B)}n.stat(B,function(ae){if(ae)return _(ae);n.readlink(B,function(U,I){e||(E[oe]=I),Y(U,I)})})}function Y(Z,Q,oe){if(Z)return _(Z);var ae=t.resolve(D,Q);b&&(b[oe]=ae),L(ae)}function L(Z){y=t.resolve(Z,y.slice(C)),q()}},old}var fs_realpath,hasRequiredFs_realpath;function requireFs_realpath(){if(hasRequiredFs_realpath)return fs_realpath;hasRequiredFs_realpath=1,fs_realpath=d,d.realpath=d,d.sync=m,d.realpathSync=m,d.monkeypatch=y,d.unmonkeypatch=b;var t=require$$0$2,e=t.realpath,n=t.realpathSync,a=browser$1$1.version,o=/^v[0-5]\./.test(a),l=requireOld();function u(_){return _&&_.syscall==="realpath"&&(_.code==="ELOOP"||_.code==="ENOMEM"||_.code==="ENAMETOOLONG")}function d(_,w,E){if(o)return e(_,w,E);typeof w=="function"&&(E=w,w=null),e(_,w,function(A,C){u(A)?l.realpath(_,w,E):E(A,C)})}function m(_,w){if(o)return n(_,w);try{return n(_,w)}catch(E){if(u(E))return l.realpathSync(_,w);throw E}}function y(){t.realpath=d,t.realpathSync=m}function b(){t.realpath=e,t.realpathSync=n}return fs_realpath}var concatMap,hasRequiredConcatMap;function requireConcatMap(){if(hasRequiredConcatMap)return concatMap;hasRequiredConcatMap=1,concatMap=function(e,n){for(var a=[],o=0;o<e.length;o++){var l=n(e[o],o);t(l)?a.push.apply(a,l):a.push(l)}return a};var t=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};return concatMap}var balancedMatch,hasRequiredBalancedMatch;function requireBalancedMatch(){if(hasRequiredBalancedMatch)return balancedMatch;hasRequiredBalancedMatch=1,balancedMatch=t;function t(a,o,l){a instanceof RegExp&&(a=e(a,l)),o instanceof RegExp&&(o=e(o,l));var u=n(a,o,l);return u&&{start:u[0],end:u[1],pre:l.slice(0,u[0]),body:l.slice(u[0]+a.length,u[1]),post:l.slice(u[1]+o.length)}}function e(a,o){var l=o.match(a);return l?l[0]:null}t.range=n;function n(a,o,l){var u,d,m,y,b,_=l.indexOf(a),w=l.indexOf(o,_+1),E=_;if(_>=0&&w>0){if(a===o)return[_,w];for(u=[],m=l.length;E>=0&&!b;)E==_?(u.push(E),_=l.indexOf(a,E+1)):u.length==1?b=[u.pop(),w]:(d=u.pop(),d<m&&(m=d,y=w),w=l.indexOf(o,E+1)),E=_<w&&_>=0?_:w;u.length&&(b=[m,y])}return b}return balancedMatch}var braceExpansion,hasRequiredBraceExpansion;function requireBraceExpansion(){if(hasRequiredBraceExpansion)return braceExpansion;hasRequiredBraceExpansion=1;var t=requireConcatMap(),e=requireBalancedMatch();braceExpansion=_;var n="\0SLASH"+Math.random()+"\0",a="\0OPEN"+Math.random()+"\0",o="\0CLOSE"+Math.random()+"\0",l="\0COMMA"+Math.random()+"\0",u="\0PERIOD"+Math.random()+"\0";function d(B){return parseInt(B,10)==B?parseInt(B,10):B.charCodeAt(0)}function m(B){return B.split("\\\\").join(n).split("\\{").join(a).split("\\}").join(o).split("\\,").join(l).split("\\.").join(u)}function y(B){return B.split(n).join("\\").split(a).join("{").split(o).join("}").split(l).join(",").split(u).join(".")}function b(B){if(!B)return[""];var D=[],q=e("{","}",B);if(!q)return B.split(",");var j=q.pre,J=q.body,Y=q.post,L=j.split(",");L[L.length-1]+="{"+J+"}";var Z=b(Y);return Y.length&&(L[L.length-1]+=Z.shift(),L.push.apply(L,Z)),D.push.apply(D,L),D}function _(B){return B?(B.substr(0,2)==="{}"&&(B="\\{\\}"+B.substr(2)),k(m(B),!0).map(y)):[]}function w(B){return"{"+B+"}"}function E(B){return/^-?0\d/.test(B)}function A(B,D){return B<=D}function C(B,D){return B>=D}function k(B,D){var q=[],j=e("{","}",B);if(!j||/\$$/.test(j.pre))return[B];var J=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(j.body),Y=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(j.body),L=J||Y,Z=j.body.indexOf(",")>=0;if(!L&&!Z)return j.post.match(/,.*\}/)?(B=j.pre+"{"+j.body+o+j.post,k(B)):[B];var Q;if(L)Q=j.body.split(/\.\./);else if(Q=b(j.body),Q.length===1&&(Q=k(Q[0],!1).map(w),Q.length===1)){var ae=j.post.length?k(j.post,!1):[""];return ae.map(function(ce){return j.pre+Q[0]+ce})}var oe=j.pre,ae=j.post.length?k(j.post,!1):[""],U;if(L){var I=d(Q[0]),x=d(Q[1]),T=Math.max(Q[0].length,Q[1].length),M=Q.length==3?Math.abs(d(Q[2])):1,O=A,z=x<I;z&&(M*=-1,O=C);var X=Q.some(E);U=[];for(var H=I;O(H,x);H+=M){var P;if(Y)P=String.fromCharCode(H),P==="\\"&&(P="");else if(P=String(H),X){var S=T-P.length;if(S>0){var F=new Array(S+1).join("0");H<0?P="-"+F+P.slice(1):P=F+P}}U.push(P)}}else U=t(Q,function(le){return k(le,!1)});for(var ue=0;ue<U.length;ue++)for(var ee=0;ee<ae.length;ee++){var fe=oe+U[ue]+ae[ee];(!D||L||fe)&&q.push(fe)}return q}return braceExpansion}var minimatch_1,hasRequiredMinimatch;function requireMinimatch(){if(hasRequiredMinimatch)return minimatch_1;hasRequiredMinimatch=1,minimatch_1=E,E.Minimatch=A;var t=function(){try{return require$$1}catch{}}()||{sep:"/"};E.sep=t.sep;var e=E.GLOBSTAR=A.GLOBSTAR={},n=requireBraceExpansion(),a={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},o="[^/]",l=o+"*?",u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",d="(?:(?!(?:\\/|^)\\.).)*?",m=y("().*{}+?[]^$\\!");function y(Q){return Q.split("").reduce(function(oe,ae){return oe[ae]=!0,oe},{})}var b=/\/+/;E.filter=_;function _(Q,oe){return oe=oe||{},function(ae,U,I){return E(ae,Q,oe)}}function w(Q,oe){oe=oe||{};var ae={};return Object.keys(Q).forEach(function(U){ae[U]=Q[U]}),Object.keys(oe).forEach(function(U){ae[U]=oe[U]}),ae}E.defaults=function(Q){if(!Q||typeof Q!="object"||!Object.keys(Q).length)return E;var oe=E,ae=function(I,x,T){return oe(I,x,w(Q,T))};return ae.Minimatch=function(I,x){return new oe.Minimatch(I,w(Q,x))},ae.Minimatch.defaults=function(I){return oe.defaults(w(Q,I)).Minimatch},ae.filter=function(I,x){return oe.filter(I,w(Q,x))},ae.defaults=function(I){return oe.defaults(w(Q,I))},ae.makeRe=function(I,x){return oe.makeRe(I,w(Q,x))},ae.braceExpand=function(I,x){return oe.braceExpand(I,w(Q,x))},ae.match=function(U,I,x){return oe.match(U,I,w(Q,x))},ae},A.defaults=function(Q){return E.defaults(Q).Minimatch};function E(Q,oe,ae){return q(oe),ae||(ae={}),!ae.nocomment&&oe.charAt(0)==="#"?!1:new A(oe,ae).match(Q)}function A(Q,oe){if(!(this instanceof A))return new A(Q,oe);q(Q),oe||(oe={}),Q=Q.trim(),!oe.allowWindowsEscape&&t.sep!=="/"&&(Q=Q.split(t.sep).join("/")),this.options=oe,this.set=[],this.pattern=Q,this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!oe.partial,this.make()}A.prototype.debug=function(){},A.prototype.make=C;function C(){var Q=this.pattern,oe=this.options;if(!oe.nocomment&&Q.charAt(0)==="#"){this.comment=!0;return}if(!Q){this.empty=!0;return}this.parseNegate();var ae=this.globSet=this.braceExpand();oe.debug&&(this.debug=function(){console.error.apply(console,arguments)}),this.debug(this.pattern,ae),ae=this.globParts=ae.map(function(U){return U.split(b)}),this.debug(this.pattern,ae),ae=ae.map(function(U,I,x){return U.map(this.parse,this)},this),this.debug(this.pattern,ae),ae=ae.filter(function(U){return U.indexOf(!1)===-1}),this.debug(this.pattern,ae),this.set=ae}A.prototype.parseNegate=k;function k(){var Q=this.pattern,oe=!1,ae=this.options,U=0;if(!ae.nonegate){for(var I=0,x=Q.length;I<x&&Q.charAt(I)==="!";I++)oe=!oe,U++;U&&(this.pattern=Q.substr(U)),this.negate=oe}}E.braceExpand=function(Q,oe){return B(Q,oe)},A.prototype.braceExpand=B;function B(Q,oe){return oe||(this instanceof A?oe=this.options:oe={}),Q=typeof Q>"u"?this.pattern:Q,q(Q),oe.nobrace||!/\{(?:(?!\{).)*\}/.test(Q)?[Q]:n(Q)}var D=1024*64,q=function(Q){if(typeof Q!="string")throw new TypeError("invalid pattern");if(Q.length>D)throw new TypeError("pattern is too long")};A.prototype.parse=J;var j={};function J(Q,oe){q(Q);var ae=this.options;if(Q==="**")if(ae.noglobstar)Q="*";else return e;if(Q==="")return"";var U="",I=!!ae.nocase,x=!1,T=[],M=[],O,z=!1,X=-1,H=-1,P=Q.charAt(0)==="."?"":ae.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",S=this;function F(){if(O){switch(O){case"*":U+=l,I=!0;break;case"?":U+=o,I=!0;break;default:U+="\\"+O;break}S.debug("clearStateChar %j %j",O,U),O=!1}}for(var ue=0,ee=Q.length,fe;ue<ee&&(fe=Q.charAt(ue));ue++){if(this.debug("%s	%s %s %j",Q,ue,U,fe),x&&m[fe]){U+="\\"+fe,x=!1;continue}switch(fe){case"/":return!1;case"\\":F(),x=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",Q,ue,U,fe),z){this.debug("  in class"),fe==="!"&&ue===H+1&&(fe="^"),U+=fe;continue}S.debug("call clearStateChar %j",O),F(),O=fe,ae.noext&&F();continue;case"(":if(z){U+="(";continue}if(!O){U+="\\(";continue}T.push({type:O,start:ue-1,reStart:U.length,open:a[O].open,close:a[O].close}),U+=O==="!"?"(?:(?!(?:":"(?:",this.debug("plType %j %j",O,U),O=!1;continue;case")":if(z||!T.length){U+="\\)";continue}F(),I=!0;var le=T.pop();U+=le.close,le.type==="!"&&M.push(le),le.reEnd=U.length;continue;case"|":if(z||!T.length||x){U+="\\|",x=!1;continue}F(),U+="|";continue;case"[":if(F(),z){U+="\\"+fe;continue}z=!0,H=ue,X=U.length,U+=fe;continue;case"]":if(ue===H+1||!z){U+="\\"+fe,x=!1;continue}var ce=Q.substring(H+1,ue);try{RegExp("["+ce+"]")}catch{var pe=this.parse(ce,j);U=U.substr(0,X)+"\\["+pe[0]+"\\]",I=I||pe[1],z=!1;continue}I=!0,z=!1,U+=fe;continue;default:F(),x?x=!1:m[fe]&&!(fe==="^"&&z)&&(U+="\\"),U+=fe}}for(z&&(ce=Q.substr(H+1),pe=this.parse(ce,j),U=U.substr(0,X)+"\\["+pe[0],I=I||pe[1]),le=T.pop();le;le=T.pop()){var se=U.slice(le.reStart+le.open.length);this.debug("setting tail",U,le),se=se.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(Ve,Oe,ge){return ge||(ge="\\"),Oe+Oe+ge+"|"}),this.debug(`tail=%j
   %s`,se,se,le,U);var de=le.type==="*"?l:le.type==="?"?o:"\\"+le.type;I=!0,U=U.slice(0,le.reStart)+de+"\\("+se}F(),x&&(U+="\\\\");var re=!1;switch(U.charAt(0)){case"[":case".":case"(":re=!0}for(var me=M.length-1;me>-1;me--){var te=M[me],ve=U.slice(0,te.reStart),Se=U.slice(te.reStart,te.reEnd-8),be=U.slice(te.reEnd-8,te.reEnd),_e=U.slice(te.reEnd);be+=_e;var ye=ve.split("(").length-1,$e=_e;for(ue=0;ue<ye;ue++)$e=$e.replace(/\)[+*?]?/,"");_e=$e;var Ie="";_e===""&&oe!==j&&(Ie="$");var Be=ve+Se+_e+Ie+be;U=Be}if(U!==""&&I&&(U="(?=.)"+U),re&&(U=P+U),oe===j)return[U,I];if(!I)return L(Q);var Me=ae.nocase?"i":"";try{var Fe=new RegExp("^"+U+"$",Me)}catch{return new RegExp("$.")}return Fe._glob=Q,Fe._src=U,Fe}E.makeRe=function(Q,oe){return new A(Q,oe||{}).makeRe()},A.prototype.makeRe=Y;function Y(){if(this.regexp||this.regexp===!1)return this.regexp;var Q=this.set;if(!Q.length)return this.regexp=!1,this.regexp;var oe=this.options,ae=oe.noglobstar?l:oe.dot?u:d,U=oe.nocase?"i":"",I=Q.map(function(x){return x.map(function(T){return T===e?ae:typeof T=="string"?Z(T):T._src}).join("\\/")}).join("|");I="^(?:"+I+")$",this.negate&&(I="^(?!"+I+").*$");try{this.regexp=new RegExp(I,U)}catch{this.regexp=!1}return this.regexp}E.match=function(Q,oe,ae){ae=ae||{};var U=new A(oe,ae);return Q=Q.filter(function(I){return U.match(I)}),U.options.nonull&&!Q.length&&Q.push(oe),Q},A.prototype.match=function(oe,ae){if(typeof ae>"u"&&(ae=this.partial),this.debug("match",oe,this.pattern),this.comment)return!1;if(this.empty)return oe==="";if(oe==="/"&&ae)return!0;var U=this.options;t.sep!=="/"&&(oe=oe.split(t.sep).join("/")),oe=oe.split(b),this.debug(this.pattern,"split",oe);var I=this.set;this.debug(this.pattern,"set",I);var x,T;for(T=oe.length-1;T>=0&&(x=oe[T],!x);T--);for(T=0;T<I.length;T++){var M=I[T],O=oe;U.matchBase&&M.length===1&&(O=[x]);var z=this.matchOne(O,M,ae);if(z)return U.flipNegate?!0:!this.negate}return U.flipNegate?!1:this.negate},A.prototype.matchOne=function(Q,oe,ae){var U=this.options;this.debug("matchOne",{this:this,file:Q,pattern:oe}),this.debug("matchOne",Q.length,oe.length);for(var I=0,x=0,T=Q.length,M=oe.length;I<T&&x<M;I++,x++){this.debug("matchOne loop");var O=oe[x],z=Q[I];if(this.debug(oe,O,z),O===!1)return!1;if(O===e){this.debug("GLOBSTAR",[oe,O,z]);var X=I,H=x+1;if(H===M){for(this.debug("** at the end");I<T;I++)if(Q[I]==="."||Q[I]===".."||!U.dot&&Q[I].charAt(0)===".")return!1;return!0}for(;X<T;){var P=Q[X];if(this.debug(`
globstar while`,Q,X,oe,H,P),this.matchOne(Q.slice(X),oe.slice(H),ae))return this.debug("globstar found match!",X,T,P),!0;if(P==="."||P===".."||!U.dot&&P.charAt(0)==="."){this.debug("dot detected!",Q,X,oe,H);break}this.debug("globstar swallow a segment, and continue"),X++}return!!(ae&&(this.debug(`
>>> no match, partial?`,Q,X,oe,H),X===T))}var S;if(typeof O=="string"?(S=z===O,this.debug("string match",O,z,S)):(S=z.match(O),this.debug("pattern match",O,z,S)),!S)return!1}if(I===T&&x===M)return!0;if(I===T)return ae;if(x===M)return I===T-1&&Q[I]==="";throw new Error("wtf?")};function L(Q){return Q.replace(/\\(.)/g,"$1")}function Z(Q){return Q.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}return minimatch_1}var pathIsAbsoluteExports={},pathIsAbsolute={get exports(){return pathIsAbsoluteExports},set exports(t){pathIsAbsoluteExports=t}},hasRequiredPathIsAbsolute;function requirePathIsAbsolute(){if(hasRequiredPathIsAbsolute)return pathIsAbsoluteExports;hasRequiredPathIsAbsolute=1;function t(n){return n.charAt(0)==="/"}function e(n){var a=/^([a-zA-Z]:|[\\\/]{2}[^\\\/]+[\\\/]+[^\\\/]+)?([\\\/])?([\s\S]*?)$/,o=a.exec(n),l=o[1]||"",u=Boolean(l&&l.charAt(1)!==":");return Boolean(o[2]||u)}return pathIsAbsolute.exports=browser$1$1.platform==="win32"?e:t,pathIsAbsoluteExports.posix=t,pathIsAbsoluteExports.win32=e,pathIsAbsoluteExports}var common={},hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1,common.setopts=y,common.ownProp=t,common.makeAbs=w,common.finish=b,common.mark=_,common.isIgnored=E,common.childrenIgnored=A;function t(C,k){return Object.prototype.hasOwnProperty.call(C,k)}var e=require$$0$2,n=require$$1,a=requireMinimatch(),o=requirePathIsAbsolute(),l=a.Minimatch;function u(C,k){return C.localeCompare(k,"en")}function d(C,k){C.ignore=k.ignore||[],Array.isArray(C.ignore)||(C.ignore=[C.ignore]),C.ignore.length&&(C.ignore=C.ignore.map(m))}function m(C){var k=null;if(C.slice(-3)==="/**"){var B=C.replace(/(\/\*\*)+$/,"");k=new l(B,{dot:!0})}return{matcher:new l(C,{dot:!0}),gmatcher:k}}function y(C,k,B){if(B||(B={}),B.matchBase&&k.indexOf("/")===-1){if(B.noglobstar)throw new Error("base matching requires globstar");k="**/"+k}C.silent=!!B.silent,C.pattern=k,C.strict=B.strict!==!1,C.realpath=!!B.realpath,C.realpathCache=B.realpathCache||Object.create(null),C.follow=!!B.follow,C.dot=!!B.dot,C.mark=!!B.mark,C.nodir=!!B.nodir,C.nodir&&(C.mark=!0),C.sync=!!B.sync,C.nounique=!!B.nounique,C.nonull=!!B.nonull,C.nosort=!!B.nosort,C.nocase=!!B.nocase,C.stat=!!B.stat,C.noprocess=!!B.noprocess,C.absolute=!!B.absolute,C.fs=B.fs||e,C.maxLength=B.maxLength||1/0,C.cache=B.cache||Object.create(null),C.statCache=B.statCache||Object.create(null),C.symlinks=B.symlinks||Object.create(null),d(C,B),C.changedCwd=!1;var D=browser$1$1.cwd();t(B,"cwd")?(C.cwd=n.resolve(B.cwd),C.changedCwd=C.cwd!==D):C.cwd=D,C.root=B.root||n.resolve(C.cwd,"/"),C.root=n.resolve(C.root),browser$1$1.platform==="win32"&&(C.root=C.root.replace(/\\/g,"/")),C.cwdAbs=o(C.cwd)?C.cwd:w(C,C.cwd),browser$1$1.platform==="win32"&&(C.cwdAbs=C.cwdAbs.replace(/\\/g,"/")),C.nomount=!!B.nomount,B.nonegate=!0,B.nocomment=!0,B.allowWindowsEscape=!1,C.minimatch=new l(k,B),C.options=C.minimatch.options}function b(C){for(var k=C.nounique,B=k?[]:Object.create(null),D=0,q=C.matches.length;D<q;D++){var j=C.matches[D];if(!j||Object.keys(j).length===0){if(C.nonull){var J=C.minimatch.globSet[D];k?B.push(J):B[J]=!0}}else{var Y=Object.keys(j);k?B.push.apply(B,Y):Y.forEach(function(L){B[L]=!0})}}if(k||(B=Object.keys(B)),C.nosort||(B=B.sort(u)),C.mark){for(var D=0;D<B.length;D++)B[D]=C._mark(B[D]);C.nodir&&(B=B.filter(function(L){var Z=!/\/$/.test(L),Q=C.cache[L]||C.cache[w(C,L)];return Z&&Q&&(Z=Q!=="DIR"&&!Array.isArray(Q)),Z}))}C.ignore.length&&(B=B.filter(function(L){return!E(C,L)})),C.found=B}function _(C,k){var B=w(C,k),D=C.cache[B],q=k;if(D){var j=D==="DIR"||Array.isArray(D),J=k.slice(-1)==="/";if(j&&!J?q+="/":!j&&J&&(q=q.slice(0,-1)),q!==k){var Y=w(C,q);C.statCache[Y]=C.statCache[B],C.cache[Y]=C.cache[B]}}return q}function w(C,k){var B=k;return k.charAt(0)==="/"?B=n.join(C.root,k):o(k)||k===""?B=k:C.changedCwd?B=n.resolve(C.cwd,k):B=n.resolve(k),browser$1$1.platform==="win32"&&(B=B.replace(/\\/g,"/")),B}function E(C,k){return C.ignore.length?C.ignore.some(function(B){return B.matcher.match(k)||!!(B.gmatcher&&B.gmatcher.match(k))}):!1}function A(C,k){return C.ignore.length?C.ignore.some(function(B){return!!(B.gmatcher&&B.gmatcher.match(k))}):!1}return common}var sync,hasRequiredSync;function requireSync(){if(hasRequiredSync)return sync;hasRequiredSync=1,sync=b,b.GlobSync=_;var t=requireFs_realpath(),e=requireMinimatch();e.Minimatch,requireGlob().Glob;var n=require$$1,a=require$$0,o=requirePathIsAbsolute(),l=requireCommon(),u=l.setopts,d=l.ownProp,m=l.childrenIgnored,y=l.isIgnored;function b(w,E){if(typeof E=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);return new _(w,E).found}function _(w,E){if(!w)throw new Error("must provide pattern");if(typeof E=="function"||arguments.length===3)throw new TypeError(`callback provided to sync glob
See: https://github.com/isaacs/node-glob/issues/167`);if(!(this instanceof _))return new _(w,E);if(u(this,w,E),this.noprocess)return this;var A=this.minimatch.set.length;this.matches=new Array(A);for(var C=0;C<A;C++)this._process(this.minimatch.set[C],C,!1);this._finish()}return _.prototype._finish=function(){if(a.ok(this instanceof _),this.realpath){var w=this;this.matches.forEach(function(E,A){var C=w.matches[A]=Object.create(null);for(var k in E)try{k=w._makeAbs(k);var B=t.realpathSync(k,w.realpathCache);C[B]=!0}catch(D){if(D.syscall==="stat")C[w._makeAbs(k)]=!0;else throw D}})}l.finish(this)},_.prototype._process=function(w,E,A){a.ok(this instanceof _);for(var C=0;typeof w[C]=="string";)C++;var k;switch(C){case w.length:this._processSimple(w.join("/"),E);return;case 0:k=null;break;default:k=w.slice(0,C).join("/");break}var B=w.slice(C),D;k===null?D=".":((o(k)||o(w.map(function(J){return typeof J=="string"?J:"[*]"}).join("/")))&&(!k||!o(k))&&(k="/"+k),D=k);var q=this._makeAbs(D);if(!m(this,D)){var j=B[0]===e.GLOBSTAR;j?this._processGlobStar(k,D,q,B,E,A):this._processReaddir(k,D,q,B,E,A)}},_.prototype._processReaddir=function(w,E,A,C,k,B){var D=this._readdir(A,B);if(D){for(var q=C[0],j=!!this.minimatch.negate,J=q._glob,Y=this.dot||J.charAt(0)===".",L=[],Z=0;Z<D.length;Z++){var Q=D[Z];if(Q.charAt(0)!=="."||Y){var oe;j&&!w?oe=!Q.match(q):oe=Q.match(q),oe&&L.push(Q)}}var ae=L.length;if(ae!==0){if(C.length===1&&!this.mark&&!this.stat){this.matches[k]||(this.matches[k]=Object.create(null));for(var Z=0;Z<ae;Z++){var Q=L[Z];w&&(w.slice(-1)!=="/"?Q=w+"/"+Q:Q=w+Q),Q.charAt(0)==="/"&&!this.nomount&&(Q=n.join(this.root,Q)),this._emitMatch(k,Q)}return}C.shift();for(var Z=0;Z<ae;Z++){var Q=L[Z],U;w?U=[w,Q]:U=[Q],this._process(U.concat(C),k,B)}}}},_.prototype._emitMatch=function(w,E){if(!y(this,E)){var A=this._makeAbs(E);if(this.mark&&(E=this._mark(E)),this.absolute&&(E=A),!this.matches[w][E]){if(this.nodir){var C=this.cache[A];if(C==="DIR"||Array.isArray(C))return}this.matches[w][E]=!0,this.stat&&this._stat(E)}}},_.prototype._readdirInGlobStar=function(w){if(this.follow)return this._readdir(w,!1);var E,A;try{A=this.fs.lstatSync(w)}catch(k){if(k.code==="ENOENT")return null}var C=A&&A.isSymbolicLink();return this.symlinks[w]=C,!C&&A&&!A.isDirectory()?this.cache[w]="FILE":E=this._readdir(w,!1),E},_.prototype._readdir=function(w,E){if(E&&!d(this.symlinks,w))return this._readdirInGlobStar(w);if(d(this.cache,w)){var A=this.cache[w];if(!A||A==="FILE")return null;if(Array.isArray(A))return A}try{return this._readdirEntries(w,this.fs.readdirSync(w))}catch(C){return this._readdirError(w,C),null}},_.prototype._readdirEntries=function(w,E){if(!this.mark&&!this.stat)for(var A=0;A<E.length;A++){var C=E[A];w==="/"?C=w+C:C=w+"/"+C,this.cache[C]=!0}return this.cache[w]=E,E},_.prototype._readdirError=function(w,E){switch(E.code){case"ENOTSUP":case"ENOTDIR":var A=this._makeAbs(w);if(this.cache[A]="FILE",A===this.cwdAbs){var C=new Error(E.code+" invalid cwd "+this.cwd);throw C.path=this.cwd,C.code=E.code,C}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(w)]=!1;break;default:if(this.cache[this._makeAbs(w)]=!1,this.strict)throw E;this.silent||console.error("glob error",E);break}},_.prototype._processGlobStar=function(w,E,A,C,k,B){var D=this._readdir(A,B);if(D){var q=C.slice(1),j=w?[w]:[],J=j.concat(q);this._process(J,k,!1);var Y=D.length,L=this.symlinks[A];if(!(L&&B))for(var Z=0;Z<Y;Z++){var Q=D[Z];if(!(Q.charAt(0)==="."&&!this.dot)){var oe=j.concat(D[Z],q);this._process(oe,k,!0);var ae=j.concat(D[Z],C);this._process(ae,k,!0)}}}},_.prototype._processSimple=function(w,E){var A=this._stat(w);if(this.matches[E]||(this.matches[E]=Object.create(null)),!!A){if(w&&o(w)&&!this.nomount){var C=/[\/\\]$/.test(w);w.charAt(0)==="/"?w=n.join(this.root,w):(w=n.resolve(this.root,w),C&&(w+="/"))}browser$1$1.platform==="win32"&&(w=w.replace(/\\/g,"/")),this._emitMatch(E,w)}},_.prototype._stat=function(w){var E=this._makeAbs(w),A=w.slice(-1)==="/";if(w.length>this.maxLength)return!1;if(!this.stat&&d(this.cache,E)){var B=this.cache[E];if(Array.isArray(B)&&(B="DIR"),!A||B==="DIR")return B;if(A&&B==="FILE")return!1}var C=this.statCache[E];if(!C){var k;try{k=this.fs.lstatSync(E)}catch(D){if(D&&(D.code==="ENOENT"||D.code==="ENOTDIR"))return this.statCache[E]=!1,!1}if(k&&k.isSymbolicLink())try{C=this.fs.statSync(E)}catch{C=k}else C=k}this.statCache[E]=C;var B=!0;return C&&(B=C.isDirectory()?"DIR":"FILE"),this.cache[E]=this.cache[E]||B,A&&B==="FILE"?!1:B},_.prototype._mark=function(w){return l.mark(this,w)},_.prototype._makeAbs=function(w){return l.makeAbs(this,w)},sync}var wrappy_1,hasRequiredWrappy;function requireWrappy(){if(hasRequiredWrappy)return wrappy_1;hasRequiredWrappy=1,wrappy_1=t;function t(e,n){if(e&&n)return t(e)(n);if(typeof e!="function")throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(o){a[o]=e[o]}),a;function a(){for(var o=new Array(arguments.length),l=0;l<o.length;l++)o[l]=arguments[l];var u=e.apply(this,o),d=o[o.length-1];return typeof u=="function"&&u!==d&&Object.keys(d).forEach(function(m){u[m]=d[m]}),u}}return wrappy_1}var onceExports={},once={get exports(){return onceExports},set exports(t){onceExports=t}},hasRequiredOnce;function requireOnce(){if(hasRequiredOnce)return onceExports;hasRequiredOnce=1;var t=requireWrappy();once.exports=t(e),onceExports.strict=t(n),e.proto=e(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return e(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return n(this)},configurable:!0})});function e(a){var o=function(){return o.called?o.value:(o.called=!0,o.value=a.apply(this,arguments))};return o.called=!1,o}function n(a){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=a.apply(this,arguments)},l=a.name||"Function wrapped with `once`";return o.onceError=l+" shouldn't be called more than once",o.called=!1,o}return onceExports}var inflight_1,hasRequiredInflight;function requireInflight(){if(hasRequiredInflight)return inflight_1;hasRequiredInflight=1;var t=requireWrappy(),e=Object.create(null),n=requireOnce();inflight_1=t(a);function a(u,d){return e[u]?(e[u].push(d),null):(e[u]=[d],o(u))}function o(u){return n(function d(){var m=e[u],y=m.length,b=l(arguments);try{for(var _=0;_<y;_++)m[_].apply(null,b)}finally{m.length>y?(m.splice(0,y),browser$1$1.nextTick(function(){d.apply(null,b)})):delete e[u]}})}function l(u){for(var d=u.length,m=[],y=0;y<d;y++)m[y]=u[y];return m}return inflight_1}var glob_1,hasRequiredGlob;function requireGlob(){if(hasRequiredGlob)return glob_1;hasRequiredGlob=1,glob_1=C;var t=requireFs_realpath(),e=requireMinimatch();e.Minimatch;var n=inherits_browserExports,a=eventsExports.EventEmitter,o=require$$1,l=require$$0,u=requirePathIsAbsolute(),d=requireSync(),m=requireCommon(),y=m.setopts,b=m.ownProp,_=requireInflight(),w=m.childrenIgnored,E=m.isIgnored,A=requireOnce();function C(j,J,Y){if(typeof J=="function"&&(Y=J,J={}),J||(J={}),J.sync){if(Y)throw new TypeError("callback provided to sync glob");return d(j,J)}return new D(j,J,Y)}C.sync=d;var k=C.GlobSync=d.GlobSync;C.glob=C;function B(j,J){if(J===null||typeof J!="object")return j;for(var Y=Object.keys(J),L=Y.length;L--;)j[Y[L]]=J[Y[L]];return j}C.hasMagic=function(j,J){var Y=B({},J);Y.noprocess=!0;var L=new D(j,Y),Z=L.minimatch.set;if(!j)return!1;if(Z.length>1)return!0;for(var Q=0;Q<Z[0].length;Q++)if(typeof Z[0][Q]!="string")return!0;return!1},C.Glob=D,n(D,a);function D(j,J,Y){if(typeof J=="function"&&(Y=J,J=null),J&&J.sync){if(Y)throw new TypeError("callback provided to sync glob");return new k(j,J)}if(!(this instanceof D))return new D(j,J,Y);y(this,j,J),this._didRealPath=!1;var L=this.minimatch.set.length;this.matches=new Array(L),typeof Y=="function"&&(Y=A(Y),this.on("error",Y),this.on("end",function(U){Y(null,U)}));var Z=this;if(this._processing=0,this._emitQueue=[],this._processQueue=[],this.paused=!1,this.noprocess)return this;if(L===0)return ae();for(var Q=!0,oe=0;oe<L;oe++)this._process(this.minimatch.set[oe],oe,!1,ae);Q=!1;function ae(){--Z._processing,Z._processing<=0&&(Q?browser$1$1.nextTick(function(){Z._finish()}):Z._finish())}}D.prototype._finish=function(){if(l(this instanceof D),!this.aborted){if(this.realpath&&!this._didRealpath)return this._realpath();m.finish(this),this.emit("end",this.found)}},D.prototype._realpath=function(){if(this._didRealpath)return;this._didRealpath=!0;var j=this.matches.length;if(j===0)return this._finish();for(var J=this,Y=0;Y<this.matches.length;Y++)this._realpathSet(Y,L);function L(){--j===0&&J._finish()}},D.prototype._realpathSet=function(j,J){var Y=this.matches[j];if(!Y)return J();var L=Object.keys(Y),Z=this,Q=L.length;if(Q===0)return J();var oe=this.matches[j]=Object.create(null);L.forEach(function(ae,U){ae=Z._makeAbs(ae),t.realpath(ae,Z.realpathCache,function(I,x){I?I.syscall==="stat"?oe[ae]=!0:Z.emit("error",I):oe[x]=!0,--Q===0&&(Z.matches[j]=oe,J())})})},D.prototype._mark=function(j){return m.mark(this,j)},D.prototype._makeAbs=function(j){return m.makeAbs(this,j)},D.prototype.abort=function(){this.aborted=!0,this.emit("abort")},D.prototype.pause=function(){this.paused||(this.paused=!0,this.emit("pause"))},D.prototype.resume=function(){if(this.paused){if(this.emit("resume"),this.paused=!1,this._emitQueue.length){var j=this._emitQueue.slice(0);this._emitQueue.length=0;for(var J=0;J<j.length;J++){var Y=j[J];this._emitMatch(Y[0],Y[1])}}if(this._processQueue.length){var L=this._processQueue.slice(0);this._processQueue.length=0;for(var J=0;J<L.length;J++){var Z=L[J];this._processing--,this._process(Z[0],Z[1],Z[2],Z[3])}}}},D.prototype._process=function(j,J,Y,L){if(l(this instanceof D),l(typeof L=="function"),!this.aborted){if(this._processing++,this.paused){this._processQueue.push([j,J,Y,L]);return}for(var Z=0;typeof j[Z]=="string";)Z++;var Q;switch(Z){case j.length:this._processSimple(j.join("/"),J,L);return;case 0:Q=null;break;default:Q=j.slice(0,Z).join("/");break}var oe=j.slice(Z),ae;Q===null?ae=".":((u(Q)||u(j.map(function(x){return typeof x=="string"?x:"[*]"}).join("/")))&&(!Q||!u(Q))&&(Q="/"+Q),ae=Q);var U=this._makeAbs(ae);if(w(this,ae))return L();var I=oe[0]===e.GLOBSTAR;I?this._processGlobStar(Q,ae,U,oe,J,Y,L):this._processReaddir(Q,ae,U,oe,J,Y,L)}},D.prototype._processReaddir=function(j,J,Y,L,Z,Q,oe){var ae=this;this._readdir(Y,Q,function(U,I){return ae._processReaddir2(j,J,Y,L,Z,Q,I,oe)})},D.prototype._processReaddir2=function(j,J,Y,L,Z,Q,oe,ae){if(!oe)return ae();for(var U=L[0],I=!!this.minimatch.negate,x=U._glob,T=this.dot||x.charAt(0)===".",M=[],O=0;O<oe.length;O++){var z=oe[O];if(z.charAt(0)!=="."||T){var X;I&&!j?X=!z.match(U):X=z.match(U),X&&M.push(z)}}var H=M.length;if(H===0)return ae();if(L.length===1&&!this.mark&&!this.stat){this.matches[Z]||(this.matches[Z]=Object.create(null));for(var O=0;O<H;O++){var z=M[O];j&&(j!=="/"?z=j+"/"+z:z=j+z),z.charAt(0)==="/"&&!this.nomount&&(z=o.join(this.root,z)),this._emitMatch(Z,z)}return ae()}L.shift();for(var O=0;O<H;O++){var z=M[O];j&&(j!=="/"?z=j+"/"+z:z=j+z),this._process([z].concat(L),Z,Q,ae)}ae()},D.prototype._emitMatch=function(j,J){if(!this.aborted&&!E(this,J)){if(this.paused){this._emitQueue.push([j,J]);return}var Y=u(J)?J:this._makeAbs(J);if(this.mark&&(J=this._mark(J)),this.absolute&&(J=Y),!this.matches[j][J]){if(this.nodir){var L=this.cache[Y];if(L==="DIR"||Array.isArray(L))return}this.matches[j][J]=!0;var Z=this.statCache[Y];Z&&this.emit("stat",J,Z),this.emit("match",J)}}},D.prototype._readdirInGlobStar=function(j,J){if(this.aborted)return;if(this.follow)return this._readdir(j,!1,J);var Y="lstat\0"+j,L=this,Z=_(Y,Q);Z&&L.fs.lstat(j,Z);function Q(oe,ae){if(oe&&oe.code==="ENOENT")return J();var U=ae&&ae.isSymbolicLink();L.symlinks[j]=U,!U&&ae&&!ae.isDirectory()?(L.cache[j]="FILE",J()):L._readdir(j,!1,J)}},D.prototype._readdir=function(j,J,Y){if(!this.aborted&&(Y=_("readdir\0"+j+"\0"+J,Y),!!Y)){if(J&&!b(this.symlinks,j))return this._readdirInGlobStar(j,Y);if(b(this.cache,j)){var L=this.cache[j];if(!L||L==="FILE")return Y();if(Array.isArray(L))return Y(null,L)}var Z=this;Z.fs.readdir(j,q(this,j,Y))}};function q(j,J,Y){return function(L,Z){L?j._readdirError(J,L,Y):j._readdirEntries(J,Z,Y)}}return D.prototype._readdirEntries=function(j,J,Y){if(!this.aborted){if(!this.mark&&!this.stat)for(var L=0;L<J.length;L++){var Z=J[L];j==="/"?Z=j+Z:Z=j+"/"+Z,this.cache[Z]=!0}return this.cache[j]=J,Y(null,J)}},D.prototype._readdirError=function(j,J,Y){if(!this.aborted){switch(J.code){case"ENOTSUP":case"ENOTDIR":var L=this._makeAbs(j);if(this.cache[L]="FILE",L===this.cwdAbs){var Z=new Error(J.code+" invalid cwd "+this.cwd);Z.path=this.cwd,Z.code=J.code,this.emit("error",Z),this.abort()}break;case"ENOENT":case"ELOOP":case"ENAMETOOLONG":case"UNKNOWN":this.cache[this._makeAbs(j)]=!1;break;default:this.cache[this._makeAbs(j)]=!1,this.strict&&(this.emit("error",J),this.abort()),this.silent||console.error("glob error",J);break}return Y()}},D.prototype._processGlobStar=function(j,J,Y,L,Z,Q,oe){var ae=this;this._readdir(Y,Q,function(U,I){ae._processGlobStar2(j,J,Y,L,Z,Q,I,oe)})},D.prototype._processGlobStar2=function(j,J,Y,L,Z,Q,oe,ae){if(!oe)return ae();var U=L.slice(1),I=j?[j]:[],x=I.concat(U);this._process(x,Z,!1,ae);var T=this.symlinks[Y],M=oe.length;if(T&&Q)return ae();for(var O=0;O<M;O++){var z=oe[O];if(!(z.charAt(0)==="."&&!this.dot)){var X=I.concat(oe[O],U);this._process(X,Z,!0,ae);var H=I.concat(oe[O],L);this._process(H,Z,!0,ae)}}ae()},D.prototype._processSimple=function(j,J,Y){var L=this;this._stat(j,function(Z,Q){L._processSimple2(j,J,Z,Q,Y)})},D.prototype._processSimple2=function(j,J,Y,L,Z){if(this.matches[J]||(this.matches[J]=Object.create(null)),!L)return Z();if(j&&u(j)&&!this.nomount){var Q=/[\/\\]$/.test(j);j.charAt(0)==="/"?j=o.join(this.root,j):(j=o.resolve(this.root,j),Q&&(j+="/"))}browser$1$1.platform==="win32"&&(j=j.replace(/\\/g,"/")),this._emitMatch(J,j),Z()},D.prototype._stat=function(j,J){var Y=this._makeAbs(j),L=j.slice(-1)==="/";if(j.length>this.maxLength)return J();if(!this.stat&&b(this.cache,Y)){var Z=this.cache[Y];if(Array.isArray(Z)&&(Z="DIR"),!L||Z==="DIR")return J(null,Z);if(L&&Z==="FILE")return J()}var Q=this.statCache[Y];if(Q!==void 0){if(Q===!1)return J(null,Q);var oe=Q.isDirectory()?"DIR":"FILE";return L&&oe==="FILE"?J():J(null,oe,Q)}var ae=this,U=_("stat\0"+Y,I);U&&ae.fs.lstat(Y,U);function I(x,T){if(T&&T.isSymbolicLink())return ae.fs.stat(Y,function(M,O){M?ae._stat2(j,Y,null,T,J):ae._stat2(j,Y,M,O,J)});ae._stat2(j,Y,x,T,J)}},D.prototype._stat2=function(j,J,Y,L,Z){if(Y&&(Y.code==="ENOENT"||Y.code==="ENOTDIR"))return this.statCache[J]=!1,Z();var Q=j.slice(-1)==="/";if(this.statCache[J]=L,J.slice(-1)==="/"&&L&&!L.isDirectory())return Z(null,!1,L);var oe=!0;return L&&(oe=L.isDirectory()?"DIR":"FILE"),this.cache[J]=this.cache[J]||oe,Q&&oe==="FILE"?Z():Z(null,oe,L)},glob_1}let glob;try{glob=requireGlob()}catch(t){}browser$1$1.platform;const constellationNavigateur={install:t=>{const e=générerMandataireProc();t.provide("constl",e)}};async function loadFonts(){(await __vitePreload(()=>import("./webfontloader-2a4655c2.js").then(e=>e.w),[])).load({google:{families:["Roboto:100,300,400,500,700,900&display=swap"]}})}const materialdesignicons="",main="";function createVuetify(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{blueprint:e,...n}=t,a=mergeDeep(e,n),{aliases:o={},components:l={},directives:u={}}=a,d=createDefaults(a.defaults),m=createDisplay(a.display,a.ssr),y=createTheme(a.theme),b=createIcons(a.icons),_=createLocale(a.locale);return{install:E=>{for(const A in u)E.directive(A,u[A]);for(const A in l)E.component(A,l[A]);for(const A in o)E.component(A,defineComponent({...o[A],name:A,aliasName:o[A].name}));if(y.install(E),E.provide(DefaultsSymbol,d),E.provide(DisplaySymbol,m),E.provide(ThemeSymbol,y),E.provide(IconSymbol,b),E.provide(LocaleSymbol,_),IN_BROWSER&&a.ssr)if(E.$nuxt)E.$nuxt.hook("app:suspense:resolve",()=>{m.update()});else{const{mount:A}=E;E.mount=function(){const C=A(...arguments);return nextTick$3(()=>m.update()),E.mount=A,C}}getUid.reset(),E.mixin({computed:{$vuetify(){return reactive({defaults:inject.call(this,DefaultsSymbol),display:inject.call(this,DisplaySymbol),theme:inject.call(this,ThemeSymbol),icons:inject.call(this,IconSymbol),locale:inject.call(this,LocaleSymbol)})}}})},defaults:d,display:m,theme:y,icons:b,locale:_}}const version="3.1.2";createVuetify.version=version;function inject(t){var e,n;const a=this.$,o=((e=a.parent)==null?void 0:e.provides)??((n=a.vnode.appContext)==null?void 0:n.provides);if(o&&t in o)return o[t]}const vuetify=createVuetify({});/*!
  * shared v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser=typeof window<"u",hasSymbol=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",makeSymbol=t=>hasSymbol?Symbol(t):t,generateFormatCacheKey=(t,e,n)=>friendlyJSONstringify({l:t,k:e,s:n}),friendlyJSONstringify=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber=t=>typeof t=="number"&&isFinite(t),isDate=t=>toTypeString(t)==="[object Date]",isRegExp=t=>toTypeString(t)==="[object RegExp]",isEmptyObject=t=>isPlainObject(t)&&Object.keys(t).length===0;function warn(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const assign$1=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global$1<"u"?global$1:{});function escapeHtml(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwn(t,e){return hasOwnProperty.call(t,e)}const isArray$1=Array.isArray,isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isBoolean=t=>typeof t=="boolean",isObject=t=>t!==null&&typeof t=="object",objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),isPlainObject=t=>toTypeString(t)==="[object Object]",toDisplayString=t=>t==null?"":isArray$1(t)||isPlainObject(t)&&t.toString===objectToString?JSON.stringify(t,null,2):String(t);/*!
  * message-compiler v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,__EXTEND_POINT__:15};function createCompileError(t,e,n={}){const{domain:a,messages:o,args:l}=n,u=t,d=new SyntaxError(String(u));return d.code=t,e&&(d.location=e),d.domain=a,d}function defaultOnError(t){throw t}function createPosition(t,e,n){return{line:t,column:e,offset:n}}function createLocation(t,e,n){const a={start:t,end:e};return n!=null&&(a.source=n),a}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS=String.fromCharCode(8232),CHAR_PS=String.fromCharCode(8233);function createScanner(t){const e=t;let n=0,a=1,o=1,l=0;const u=L=>e[L]===CHAR_CR&&e[L+1]===CHAR_LF,d=L=>e[L]===CHAR_LF,m=L=>e[L]===CHAR_PS,y=L=>e[L]===CHAR_LS,b=L=>u(L)||d(L)||m(L)||y(L),_=()=>n,w=()=>a,E=()=>o,A=()=>l,C=L=>u(L)||m(L)||y(L)?CHAR_LF:e[L],k=()=>C(n),B=()=>C(n+l);function D(){return l=0,b(n)&&(a++,o=0),u(n)&&n++,n++,o++,e[n]}function q(){return u(n+l)&&l++,l++,e[n+l]}function j(){n=0,a=1,o=1,l=0}function J(L=0){l=L}function Y(){const L=n+l;for(;L!==n;)D();l=0}return{index:_,line:w,column:E,peekOffset:A,charAt:C,currentChar:k,currentPeek:B,next:D,peek:q,reset:j,resetPeek:J,skipToPeek:Y}}const EOF=void 0,LITERAL_DELIMITER="'",ERROR_DOMAIN$1="tokenizer";function createTokenizer(t,e={}){const n=e.location!==!1,a=createScanner(t),o=()=>a.index(),l=()=>createPosition(a.line(),a.column(),a.index()),u=l(),d=o(),m={currentType:14,offset:d,startLoc:u,endLoc:u,lastType:14,lastOffset:d,lastStartLoc:u,lastEndLoc:u,braceNest:0,inLinked:!1,text:""},y=()=>m,{onError:b}=e;function _(me,te,ve,...Se){const be=y();if(te.column+=ve,te.offset+=ve,b){const _e=createLocation(be.startLoc,te),ye=createCompileError(me,_e,{domain:ERROR_DOMAIN$1,args:Se});b(ye)}}function w(me,te,ve){me.endLoc=l(),me.currentType=te;const Se={type:te};return n&&(Se.loc=createLocation(me.startLoc,me.endLoc)),ve!=null&&(Se.value=ve),Se}const E=me=>w(me,14);function A(me,te){return me.currentChar()===te?(me.next(),te):(_(CompileErrorCodes.EXPECTED_TOKEN,l(),0,te),"")}function C(me){let te="";for(;me.currentPeek()===CHAR_SP||me.currentPeek()===CHAR_LF;)te+=me.currentPeek(),me.peek();return te}function k(me){const te=C(me);return me.skipToPeek(),te}function B(me){if(me===EOF)return!1;const te=me.charCodeAt(0);return te>=97&&te<=122||te>=65&&te<=90||te===95}function D(me){if(me===EOF)return!1;const te=me.charCodeAt(0);return te>=48&&te<=57}function q(me,te){const{currentType:ve}=te;if(ve!==2)return!1;C(me);const Se=B(me.currentPeek());return me.resetPeek(),Se}function j(me,te){const{currentType:ve}=te;if(ve!==2)return!1;C(me);const Se=me.currentPeek()==="-"?me.peek():me.currentPeek(),be=D(Se);return me.resetPeek(),be}function J(me,te){const{currentType:ve}=te;if(ve!==2)return!1;C(me);const Se=me.currentPeek()===LITERAL_DELIMITER;return me.resetPeek(),Se}function Y(me,te){const{currentType:ve}=te;if(ve!==8)return!1;C(me);const Se=me.currentPeek()===".";return me.resetPeek(),Se}function L(me,te){const{currentType:ve}=te;if(ve!==9)return!1;C(me);const Se=B(me.currentPeek());return me.resetPeek(),Se}function Z(me,te){const{currentType:ve}=te;if(!(ve===8||ve===12))return!1;C(me);const Se=me.currentPeek()===":";return me.resetPeek(),Se}function Q(me,te){const{currentType:ve}=te;if(ve!==10)return!1;const Se=()=>{const _e=me.currentPeek();return _e==="{"?B(me.peek()):_e==="@"||_e==="%"||_e==="|"||_e===":"||_e==="."||_e===CHAR_SP||!_e?!1:_e===CHAR_LF?(me.peek(),Se()):B(_e)},be=Se();return me.resetPeek(),be}function oe(me){C(me);const te=me.currentPeek()==="|";return me.resetPeek(),te}function ae(me){const te=C(me),ve=me.currentPeek()==="%"&&me.peek()==="{";return me.resetPeek(),{isModulo:ve,hasSpace:te.length>0}}function U(me,te=!0){const ve=(be=!1,_e="",ye=!1)=>{const $e=me.currentPeek();return $e==="{"?_e==="%"?!1:be:$e==="@"||!$e?_e==="%"?!0:be:$e==="%"?(me.peek(),ve(be,"%",!0)):$e==="|"?_e==="%"||ye?!0:!(_e===CHAR_SP||_e===CHAR_LF):$e===CHAR_SP?(me.peek(),ve(!0,CHAR_SP,ye)):$e===CHAR_LF?(me.peek(),ve(!0,CHAR_LF,ye)):!0},Se=ve();return te&&me.resetPeek(),Se}function I(me,te){const ve=me.currentChar();return ve===EOF?EOF:te(ve)?(me.next(),ve):null}function x(me){return I(me,ve=>{const Se=ve.charCodeAt(0);return Se>=97&&Se<=122||Se>=65&&Se<=90||Se>=48&&Se<=57||Se===95||Se===36})}function T(me){return I(me,ve=>{const Se=ve.charCodeAt(0);return Se>=48&&Se<=57})}function M(me){return I(me,ve=>{const Se=ve.charCodeAt(0);return Se>=48&&Se<=57||Se>=65&&Se<=70||Se>=97&&Se<=102})}function O(me){let te="",ve="";for(;te=T(me);)ve+=te;return ve}function z(me){k(me);const te=me.currentChar();return te!=="%"&&_(CompileErrorCodes.EXPECTED_TOKEN,l(),0,te),me.next(),"%"}function X(me){let te="";for(;;){const ve=me.currentChar();if(ve==="{"||ve==="}"||ve==="@"||ve==="|"||!ve)break;if(ve==="%")if(U(me))te+=ve,me.next();else break;else if(ve===CHAR_SP||ve===CHAR_LF)if(U(me))te+=ve,me.next();else{if(oe(me))break;te+=ve,me.next()}else te+=ve,me.next()}return te}function H(me){k(me);let te="",ve="";for(;te=x(me);)ve+=te;return me.currentChar()===EOF&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),ve}function P(me){k(me);let te="";return me.currentChar()==="-"?(me.next(),te+=`-${O(me)}`):te+=O(me),me.currentChar()===EOF&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),te}function S(me){k(me),A(me,"'");let te="",ve="";const Se=_e=>_e!==LITERAL_DELIMITER&&_e!==CHAR_LF;for(;te=I(me,Se);)te==="\\"?ve+=F(me):ve+=te;const be=me.currentChar();return be===CHAR_LF||be===EOF?(_(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,l(),0),be===CHAR_LF&&(me.next(),A(me,"'")),ve):(A(me,"'"),ve)}function F(me){const te=me.currentChar();switch(te){case"\\":case"'":return me.next(),`\\${te}`;case"u":return ue(me,te,4);case"U":return ue(me,te,6);default:return _(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,l(),0,te),""}}function ue(me,te,ve){A(me,te);let Se="";for(let be=0;be<ve;be++){const _e=M(me);if(!_e){_(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,l(),0,`\\${te}${Se}${me.currentChar()}`);break}Se+=_e}return`\\${te}${Se}`}function ee(me){k(me);let te="",ve="";const Se=be=>be!=="{"&&be!=="}"&&be!==CHAR_SP&&be!==CHAR_LF;for(;te=I(me,Se);)ve+=te;return ve}function fe(me){let te="",ve="";for(;te=x(me);)ve+=te;return ve}function le(me){const te=(ve=!1,Se)=>{const be=me.currentChar();return be==="{"||be==="%"||be==="@"||be==="|"||!be||be===CHAR_SP?Se:be===CHAR_LF?(Se+=be,me.next(),te(ve,Se)):(Se+=be,me.next(),te(!0,Se))};return te(!1,"")}function ce(me){k(me);const te=A(me,"|");return k(me),te}function pe(me,te){let ve=null;switch(me.currentChar()){case"{":return te.braceNest>=1&&_(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,l(),0),me.next(),ve=w(te,2,"{"),k(me),te.braceNest++,ve;case"}":return te.braceNest>0&&te.currentType===2&&_(CompileErrorCodes.EMPTY_PLACEHOLDER,l(),0),me.next(),ve=w(te,3,"}"),te.braceNest--,te.braceNest>0&&k(me),te.inLinked&&te.braceNest===0&&(te.inLinked=!1),ve;case"@":return te.braceNest>0&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),ve=se(me,te)||E(te),te.braceNest=0,ve;default:let be=!0,_e=!0,ye=!0;if(oe(me))return te.braceNest>0&&_(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),ve=w(te,1,ce(me)),te.braceNest=0,te.inLinked=!1,ve;if(te.braceNest>0&&(te.currentType===5||te.currentType===6||te.currentType===7))return _(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,l(),0),te.braceNest=0,de(me,te);if(be=q(me,te))return ve=w(te,5,H(me)),k(me),ve;if(_e=j(me,te))return ve=w(te,6,P(me)),k(me),ve;if(ye=J(me,te))return ve=w(te,7,S(me)),k(me),ve;if(!be&&!_e&&!ye)return ve=w(te,13,ee(me)),_(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,l(),0,ve.value),k(me),ve;break}return ve}function se(me,te){const{currentType:ve}=te;let Se=null;const be=me.currentChar();switch((ve===8||ve===9||ve===12||ve===10)&&(be===CHAR_LF||be===CHAR_SP)&&_(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),be){case"@":return me.next(),Se=w(te,8,"@"),te.inLinked=!0,Se;case".":return k(me),me.next(),w(te,9,".");case":":return k(me),me.next(),w(te,10,":");default:return oe(me)?(Se=w(te,1,ce(me)),te.braceNest=0,te.inLinked=!1,Se):Y(me,te)||Z(me,te)?(k(me),se(me,te)):L(me,te)?(k(me),w(te,12,fe(me))):Q(me,te)?(k(me),be==="{"?pe(me,te)||Se:w(te,11,le(me))):(ve===8&&_(CompileErrorCodes.INVALID_LINKED_FORMAT,l(),0),te.braceNest=0,te.inLinked=!1,de(me,te))}}function de(me,te){let ve={type:14};if(te.braceNest>0)return pe(me,te)||E(te);if(te.inLinked)return se(me,te)||E(te);switch(me.currentChar()){case"{":return pe(me,te)||E(te);case"}":return _(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,l(),0),me.next(),w(te,3,"}");case"@":return se(me,te)||E(te);default:if(oe(me))return ve=w(te,1,ce(me)),te.braceNest=0,te.inLinked=!1,ve;const{isModulo:be,hasSpace:_e}=ae(me);if(be)return _e?w(te,0,X(me)):w(te,4,z(me));if(U(me))return w(te,0,X(me));break}return ve}function re(){const{currentType:me,offset:te,startLoc:ve,endLoc:Se}=m;return m.lastType=me,m.lastOffset=te,m.lastStartLoc=ve,m.lastEndLoc=Se,m.offset=o(),m.startLoc=l(),a.currentChar()===EOF?w(m,14):de(a,m)}return{nextToken:re,currentOffset:o,currentPosition:l,context:y}}const ERROR_DOMAIN="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const a=parseInt(e||n,16);return a<=55295||a>=57344?String.fromCodePoint(a):"�"}}}function createParser(t={}){const e=t.location!==!1,{onError:n}=t;function a(B,D,q,j,...J){const Y=B.currentPosition();if(Y.offset+=j,Y.column+=j,n){const L=createLocation(q,Y),Z=createCompileError(D,L,{domain:ERROR_DOMAIN,args:J});n(Z)}}function o(B,D,q){const j={type:B,start:D,end:D};return e&&(j.loc={start:q,end:q}),j}function l(B,D,q,j){B.end=D,j&&(B.type=j),e&&B.loc&&(B.loc.end=q)}function u(B,D){const q=B.context(),j=o(3,q.offset,q.startLoc);return j.value=D,l(j,B.currentOffset(),B.currentPosition()),j}function d(B,D){const q=B.context(),{lastOffset:j,lastStartLoc:J}=q,Y=o(5,j,J);return Y.index=parseInt(D,10),B.nextToken(),l(Y,B.currentOffset(),B.currentPosition()),Y}function m(B,D){const q=B.context(),{lastOffset:j,lastStartLoc:J}=q,Y=o(4,j,J);return Y.key=D,B.nextToken(),l(Y,B.currentOffset(),B.currentPosition()),Y}function y(B,D){const q=B.context(),{lastOffset:j,lastStartLoc:J}=q,Y=o(9,j,J);return Y.value=D.replace(KNOWN_ESCAPES,fromEscapeSequence),B.nextToken(),l(Y,B.currentOffset(),B.currentPosition()),Y}function b(B){const D=B.nextToken(),q=B.context(),{lastOffset:j,lastStartLoc:J}=q,Y=o(8,j,J);return D.type!==12?(a(B,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,q.lastStartLoc,0),Y.value="",l(Y,j,J),{nextConsumeToken:D,node:Y}):(D.value==null&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,q.lastStartLoc,0,getTokenCaption(D)),Y.value=D.value||"",l(Y,B.currentOffset(),B.currentPosition()),{node:Y})}function _(B,D){const q=B.context(),j=o(7,q.offset,q.startLoc);return j.value=D,l(j,B.currentOffset(),B.currentPosition()),j}function w(B){const D=B.context(),q=o(6,D.offset,D.startLoc);let j=B.nextToken();if(j.type===9){const J=b(B);q.modifier=J.node,j=J.nextConsumeToken||B.nextToken()}switch(j.type!==10&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(j)),j=B.nextToken(),j.type===2&&(j=B.nextToken()),j.type){case 11:j.value==null&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(j)),q.key=_(B,j.value||"");break;case 5:j.value==null&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(j)),q.key=m(B,j.value||"");break;case 6:j.value==null&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(j)),q.key=d(B,j.value||"");break;case 7:j.value==null&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(j)),q.key=y(B,j.value||"");break;default:a(B,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,D.lastStartLoc,0);const J=B.context(),Y=o(7,J.offset,J.startLoc);return Y.value="",l(Y,J.offset,J.startLoc),q.key=Y,l(q,J.offset,J.startLoc),{nextConsumeToken:j,node:q}}return l(q,B.currentOffset(),B.currentPosition()),{node:q}}function E(B){const D=B.context(),q=D.currentType===1?B.currentOffset():D.offset,j=D.currentType===1?D.endLoc:D.startLoc,J=o(2,q,j);J.items=[];let Y=null;do{const Q=Y||B.nextToken();switch(Y=null,Q.type){case 0:Q.value==null&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(Q)),J.items.push(u(B,Q.value||""));break;case 6:Q.value==null&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(Q)),J.items.push(d(B,Q.value||""));break;case 5:Q.value==null&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(Q)),J.items.push(m(B,Q.value||""));break;case 7:Q.value==null&&a(B,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,D.lastStartLoc,0,getTokenCaption(Q)),J.items.push(y(B,Q.value||""));break;case 8:const oe=w(B);J.items.push(oe.node),Y=oe.nextConsumeToken||null;break}}while(D.currentType!==14&&D.currentType!==1);const L=D.currentType===1?D.lastOffset:B.currentOffset(),Z=D.currentType===1?D.lastEndLoc:B.currentPosition();return l(J,L,Z),J}function A(B,D,q,j){const J=B.context();let Y=j.items.length===0;const L=o(1,D,q);L.cases=[],L.cases.push(j);do{const Z=E(B);Y||(Y=Z.items.length===0),L.cases.push(Z)}while(J.currentType!==14);return Y&&a(B,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,q,0),l(L,B.currentOffset(),B.currentPosition()),L}function C(B){const D=B.context(),{offset:q,startLoc:j}=D,J=E(B);return D.currentType===14?J:A(B,q,j,J)}function k(B){const D=createTokenizer(B,assign$1({},t)),q=D.context(),j=o(0,q.offset,q.startLoc);return e&&j.loc&&(j.loc.source=B),j.body=C(D),q.currentType!==14&&a(D,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,q.lastStartLoc,0,B[q.offset]||""),l(j,D.currentOffset(),D.currentPosition()),j}return{parse:k}}function getTokenCaption(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"…":e}function createTransformer(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:l=>(n.helpers.add(l),l)}}function traverseNodes(t,e){for(let n=0;n<t.length;n++)traverseNode(t[n],e)}function traverseNode(t,e){switch(t.type){case 1:traverseNodes(t.cases,e),e.helper("plural");break;case 2:traverseNodes(t.items,e);break;case 6:traverseNode(t.key,e),e.helper("linked"),e.helper("type");break;case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function transform(t,e={}){const n=createTransformer(t);n.helper("normalize"),t.body&&traverseNode(t.body,n);const a=n.context();t.helpers=Array.from(a.helpers)}function createCodeGenerator(t,e){const{sourceMap:n,filename:a,breakLineCode:o,needIndent:l}=e,u={source:t.loc.source,filename:a,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:o,needIndent:l,indentLevel:0},d=()=>u;function m(C,k){u.code+=C}function y(C,k=!0){const B=k?o:"";m(l?B+"  ".repeat(C):B)}function b(C=!0){const k=++u.indentLevel;C&&y(k)}function _(C=!0){const k=--u.indentLevel;C&&y(k)}function w(){y(u.indentLevel)}return{context:d,push:m,indent:b,deindent:_,newline:w,helper:C=>`_${C}`,needIndent:()=>u.needIndent}}function generateLinkedNode(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),generateNode(t,e.key),e.modifier?(t.push(", "),generateNode(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function generateMessageNode(t,e){const{helper:n,needIndent:a}=t;t.push(`${n("normalize")}([`),t.indent(a());const o=e.items.length;for(let l=0;l<o&&(generateNode(t,e.items[l]),l!==o-1);l++)t.push(", ");t.deindent(a()),t.push("])")}function generatePluralNode(t,e){const{helper:n,needIndent:a}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(a());const o=e.cases.length;for(let l=0;l<o&&(generateNode(t,e.cases[l]),l!==o-1);l++)t.push(", ");t.deindent(a()),t.push("])")}}function generateResource(t,e){e.body?generateNode(t,e.body):t.push("null")}function generateNode(t,e){const{helper:n}=t;switch(e.type){case 0:generateResource(t,e);break;case 1:generatePluralNode(t,e);break;case 2:generateMessageNode(t,e);break;case 6:generateLinkedNode(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break}}const generate=(t,e={})=>{const n=isString(e.mode)?e.mode:"normal",a=isString(e.filename)?e.filename:"message.intl",o=!!e.sourceMap,l=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,u=e.needIndent?e.needIndent:n!=="arrow",d=t.helpers||[],m=createCodeGenerator(t,{mode:n,filename:a,sourceMap:o,breakLineCode:l,needIndent:u});m.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),m.indent(u),d.length>0&&(m.push(`const { ${d.map(_=>`${_}: _${_}`).join(", ")} } = ctx`),m.newline()),m.push("return "),generateNode(m,t),m.deindent(u),m.push("}");const{code:y,map:b}=m.context();return{ast:t,code:y,map:b?b.toJSON():void 0}};function baseCompile(t,e={}){const n=assign$1({},e),o=createParser(n).parse(t);return transform(o,n),generate(o,n)}/*!
  * devtools-if v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const IntlifyDevToolsHooks={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * core-base v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],["["]:[4],o:[7]};pathStateMachine[1]={w:[1],["."]:[2],["["]:[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],[0]:[3,0]};pathStateMachine[3]={i:[3,0],[0]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};pathStateMachine[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};pathStateMachine[5]={["'"]:[4,0],o:8,l:[5,0]};pathStateMachine[6]={['"']:[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(t){return literalValueRE.test(t)}function stripQuotes(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function getPathCharType(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:isLiteral(e)?stripQuotes(e):"*"+e}function parse(t){const e=[];let n=-1,a=0,o=0,l,u,d,m,y,b,_;const w=[];w[0]=()=>{u===void 0?u=d:u+=d},w[1]=()=>{u!==void 0&&(e.push(u),u=void 0)},w[2]=()=>{w[0](),o++},w[3]=()=>{if(o>0)o--,a=4,w[0]();else{if(o=0,u===void 0||(u=formatSubPath(u),u===!1))return!1;w[1]()}};function E(){const A=t[n+1];if(a===5&&A==="'"||a===6&&A==='"')return n++,d="\\"+A,w[0](),!0}for(;a!==null;)if(n++,l=t[n],!(l==="\\"&&E())){if(m=getPathCharType(l),_=pathStateMachine[a],y=_[m]||_.l||8,y===8||(a=y[0],y[1]!==void 0&&(b=w[y[1]],b&&(d=l,b()===!1))))return;if(a===7)return e}}const cache=new Map;function resolveWithKeyValue(t,e){return isObject(t)?t[e]:null}function resolveValue(t,e){if(!isObject(t))return null;let n=cache.get(e);if(n||(n=parse(e),n&&cache.set(e,n)),!n)return null;const a=n.length;let o=t,l=0;for(;l<a;){const u=o[n[l]];if(u===void 0)return null;o=u,l++}return o}const DEFAULT_MODIFIER=t=>t,DEFAULT_MESSAGE=t=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=t=>t.length===0?"":t.join(""),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function getPluralIndex(t){const e=isNumber(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(isNumber(t.named.count)||isNumber(t.named.n))?isNumber(t.named.count)?t.named.count:isNumber(t.named.n)?t.named.n:e:e}function normalizeNamed(t,e){e.count||(e.count=t),e.n||(e.n=t)}function createMessageContext(t={}){const e=t.locale,n=getPluralIndex(t),a=isObject(t.pluralRules)&&isString(e)&&isFunction(t.pluralRules[e])?t.pluralRules[e]:pluralDefault,o=isObject(t.pluralRules)&&isString(e)&&isFunction(t.pluralRules[e])?pluralDefault:void 0,l=B=>B[a(n,B.length,o)],u=t.list||[],d=B=>u[B],m=t.named||{};isNumber(t.pluralIndex)&&normalizeNamed(n,m);const y=B=>m[B];function b(B){const D=isFunction(t.messages)?t.messages(B):isObject(t.messages)?t.messages[B]:!1;return D||(t.parent?t.parent.message(B):DEFAULT_MESSAGE)}const _=B=>t.modifiers?t.modifiers[B]:DEFAULT_MODIFIER,w=isPlainObject(t.processor)&&isFunction(t.processor.normalize)?t.processor.normalize:DEFAULT_NORMALIZE,E=isPlainObject(t.processor)&&isFunction(t.processor.interpolate)?t.processor.interpolate:DEFAULT_INTERPOLATE,A=isPlainObject(t.processor)&&isString(t.processor.type)?t.processor.type:DEFAULT_MESSAGE_DATA_TYPE,k={list:d,named:y,plural:l,linked:(B,...D)=>{const[q,j]=D;let J="text",Y="";D.length===1?isObject(q)?(Y=q.modifier||Y,J=q.type||J):isString(q)&&(Y=q||Y):D.length===2&&(isString(q)&&(Y=q||Y),isString(j)&&(J=j||J));let L=b(B)(k);return J==="vnode"&&isArray$1(L)&&Y&&(L=L[0]),Y?_(Y)(L,J):L},message:b,type:A,interpolate:E,normalize:w};return k}let devtools=null;function setDevToolsHook(t){devtools=t}function initI18nDevTools(t,e,n){devtools&&devtools.emit(IntlifyDevToolsHooks.I18nInit,{timestamp:Date.now(),i18n:t,version:e,meta:n})}const translateDevTools=createDevToolsHook(IntlifyDevToolsHooks.FunctionTranslate);function createDevToolsHook(t){return e=>devtools&&devtools.emit(t,e)}const CoreWarnCodes={NOT_FOUND_KEY:1,FALLBACK_TO_TRANSLATE:2,CANNOT_FORMAT_NUMBER:3,FALLBACK_TO_NUMBER_FORMAT:4,CANNOT_FORMAT_DATE:5,FALLBACK_TO_DATE_FORMAT:6,__EXTEND_POINT__:7};function fallbackWithSimple(t,e,n){return[...new Set([n,...isArray$1(e)?e:isObject(e)?Object.keys(e):isString(e)?[e]:[n]])]}function fallbackWithLocaleChain(t,e,n){const a=isString(n)?n:DEFAULT_LOCALE,o=t;o.__localeChainCache||(o.__localeChainCache=new Map);let l=o.__localeChainCache.get(a);if(!l){l=[];let u=[n];for(;isArray$1(u);)u=appendBlockToChain(l,u,e);const d=isArray$1(e)||!isPlainObject(e)?e:e.default?e.default:null;u=isString(d)?[d]:d,isArray$1(u)&&appendBlockToChain(l,u,!1),o.__localeChainCache.set(a,l)}return l}function appendBlockToChain(t,e,n){let a=!0;for(let o=0;o<e.length&&isBoolean(a);o++){const l=e[o];isString(l)&&(a=appendLocaleToChain(t,e[o],n))}return a}function appendLocaleToChain(t,e,n){let a;const o=e.split("-");do{const l=o.join("-");a=appendItemToChain(t,l,n),o.splice(-1,1)}while(o.length&&a===!0);return a}function appendItemToChain(t,e,n){let a=!1;if(!t.includes(e)&&(a=!0,e)){a=e[e.length-1]!=="!";const o=e.replace(/!/g,"");t.push(o),(isArray$1(n)||isPlainObject(n))&&n[o]&&(a=n[o])}return a}const VERSION$1="9.2.2",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(t,e)=>e==="text"&&isString(t)?t.toUpperCase():e==="vnode"&&isObject(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&isString(t)?t.toLowerCase():e==="vnode"&&isObject(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&isString(t)?capitalize(t):e==="vnode"&&isObject(t)&&"__v_isVNode"in t?capitalize(t.children):t}}let _compiler;function registerMessageCompiler(t){_compiler=t}let _resolver;function registerMessageResolver(t){_resolver=t}let _fallbacker;function registerLocaleFallbacker(t){_fallbacker=t}let _additionalMeta=null;const setAdditionalMeta=t=>{_additionalMeta=t},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=t=>{_fallbackContext=t},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(t={}){const e=isString(t.version)?t.version:VERSION$1,n=isString(t.locale)?t.locale:DEFAULT_LOCALE,a=isArray$1(t.fallbackLocale)||isPlainObject(t.fallbackLocale)||isString(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:n,o=isPlainObject(t.messages)?t.messages:{[n]:{}},l=isPlainObject(t.datetimeFormats)?t.datetimeFormats:{[n]:{}},u=isPlainObject(t.numberFormats)?t.numberFormats:{[n]:{}},d=assign$1({},t.modifiers||{},getDefaultLinkedModifiers()),m=t.pluralRules||{},y=isFunction(t.missing)?t.missing:null,b=isBoolean(t.missingWarn)||isRegExp(t.missingWarn)?t.missingWarn:!0,_=isBoolean(t.fallbackWarn)||isRegExp(t.fallbackWarn)?t.fallbackWarn:!0,w=!!t.fallbackFormat,E=!!t.unresolving,A=isFunction(t.postTranslation)?t.postTranslation:null,C=isPlainObject(t.processor)?t.processor:null,k=isBoolean(t.warnHtmlMessage)?t.warnHtmlMessage:!0,B=!!t.escapeParameter,D=isFunction(t.messageCompiler)?t.messageCompiler:_compiler,q=isFunction(t.messageResolver)?t.messageResolver:_resolver||resolveWithKeyValue,j=isFunction(t.localeFallbacker)?t.localeFallbacker:_fallbacker||fallbackWithSimple,J=isObject(t.fallbackContext)?t.fallbackContext:void 0,Y=isFunction(t.onWarn)?t.onWarn:warn,L=t,Z=isObject(L.__datetimeFormatters)?L.__datetimeFormatters:new Map,Q=isObject(L.__numberFormatters)?L.__numberFormatters:new Map,oe=isObject(L.__meta)?L.__meta:{};_cid++;const ae={version:e,cid:_cid,locale:n,fallbackLocale:a,messages:o,modifiers:d,pluralRules:m,missing:y,missingWarn:b,fallbackWarn:_,fallbackFormat:w,unresolving:E,postTranslation:A,processor:C,warnHtmlMessage:k,escapeParameter:B,messageCompiler:D,messageResolver:q,localeFallbacker:j,fallbackContext:J,onWarn:Y,__meta:oe};return ae.datetimeFormats=l,ae.numberFormats=u,ae.__datetimeFormatters=Z,ae.__numberFormatters=Q,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(ae,e,oe),ae}function handleMissing(t,e,n,a,o){const{missing:l,onWarn:u}=t;if(l!==null){const d=l(t,n,e,o);return isString(d)?d:e}else return e}function updateFallbackLocale(t,e,n){const a=t;a.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}const defaultOnCacheKey=t=>t;let compileCache=Object.create(null);function compileToFunction(t,e={}){{const a=(e.onCacheKey||defaultOnCacheKey)(t),o=compileCache[a];if(o)return o;let l=!1;const u=e.onError||defaultOnError;e.onError=y=>{l=!0,u(y)};const{code:d}=baseCompile(t,e),m=new Function(`return ${d}`)();return l?m:compileCache[a]=m}}let code$1=CompileErrorCodes.__EXTEND_POINT__;const inc$1=()=>++code$1,CoreErrorCodes={INVALID_ARGUMENT:code$1,INVALID_DATE_ARGUMENT:inc$1(),INVALID_ISO_DATE_ARGUMENT:inc$1(),__EXTEND_POINT__:inc$1()};function createCoreError(t){return createCompileError(t,null,void 0)}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=t=>isFunction(t);function translate(t,...e){const{fallbackFormat:n,postTranslation:a,unresolving:o,messageCompiler:l,fallbackLocale:u,messages:d}=t,[m,y]=parseTranslateArgs(...e),b=isBoolean(y.missingWarn)?y.missingWarn:t.missingWarn,_=isBoolean(y.fallbackWarn)?y.fallbackWarn:t.fallbackWarn,w=isBoolean(y.escapeParameter)?y.escapeParameter:t.escapeParameter,E=!!y.resolvedMessage,A=isString(y.default)||isBoolean(y.default)?isBoolean(y.default)?l?m:()=>m:y.default:n?l?m:()=>m:"",C=n||A!=="",k=isString(y.locale)?y.locale:t.locale;w&&escapeParams(y);let[B,D,q]=E?[m,k,d[k]||{}]:resolveMessageFormat(t,m,k,u,_,b),j=B,J=m;if(!E&&!(isString(j)||isMessageFunction(j))&&C&&(j=A,J=j),!E&&(!(isString(j)||isMessageFunction(j))||!isString(D)))return o?NOT_REOSLVED:m;let Y=!1;const L=()=>{Y=!0},Z=isMessageFunction(j)?j:compileMessageFormat(t,m,D,j,J,L);if(Y)return j;const Q=getMessageContextOptions(t,D,q,y),oe=createMessageContext(Q),ae=evaluateMessage(t,Z,oe),U=a?a(ae,m):ae;if(__INTLIFY_PROD_DEVTOOLS__){const I={timestamp:Date.now(),key:isString(m)?m:isMessageFunction(j)?j.key:"",locale:D||(isMessageFunction(j)?j.locale:""),format:isString(j)?j:isMessageFunction(j)?j.source:"",message:U};I.meta=assign$1({},t.__meta,getAdditionalMeta()||{}),translateDevTools(I)}return U}function escapeParams(t){isArray$1(t.list)?t.list=t.list.map(e=>isString(e)?escapeHtml(e):e):isObject(t.named)&&Object.keys(t.named).forEach(e=>{isString(t.named[e])&&(t.named[e]=escapeHtml(t.named[e]))})}function resolveMessageFormat(t,e,n,a,o,l){const{messages:u,onWarn:d,messageResolver:m,localeFallbacker:y}=t,b=y(t,a,n);let _={},w,E=null;const A="translate";for(let C=0;C<b.length&&(w=b[C],_=u[w]||{},(E=m(_,e))===null&&(E=_[e]),!(isString(E)||isFunction(E)));C++){const k=handleMissing(t,e,w,l,A);k!==e&&(E=k)}return[E,w,_]}function compileMessageFormat(t,e,n,a,o,l){const{messageCompiler:u,warnHtmlMessage:d}=t;if(isMessageFunction(a)){const y=a;return y.locale=y.locale||n,y.key=y.key||e,y}if(u==null){const y=()=>a;return y.locale=n,y.key=e,y}const m=u(a,getCompileOptions(t,n,o,a,d,l));return m.locale=n,m.key=e,m.source=a,m}function evaluateMessage(t,e,n){return e(n)}function parseTranslateArgs(...t){const[e,n,a]=t,o={};if(!isString(e)&&!isNumber(e)&&!isMessageFunction(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const l=isNumber(e)?String(e):(isMessageFunction(e),e);return isNumber(n)?o.plural=n:isString(n)?o.default=n:isPlainObject(n)&&!isEmptyObject(n)?o.named=n:isArray$1(n)&&(o.list=n),isNumber(a)?o.plural=a:isString(a)?o.default=a:isPlainObject(a)&&assign$1(o,a),[l,o]}function getCompileOptions(t,e,n,a,o,l){return{warnHtmlMessage:o,onError:u=>{throw l&&l(u),u},onCacheKey:u=>generateFormatCacheKey(e,n,u)}}function getMessageContextOptions(t,e,n,a){const{modifiers:o,pluralRules:l,messageResolver:u,fallbackLocale:d,fallbackWarn:m,missingWarn:y,fallbackContext:b}=t,w={locale:e,modifiers:o,pluralRules:l,messages:E=>{let A=u(n,E);if(A==null&&b){const[,,C]=resolveMessageFormat(b,E,e,d,m,y);A=u(C,E)}if(isString(A)){let C=!1;const B=compileMessageFormat(t,E,e,A,E,()=>{C=!0});return C?NOOP_MESSAGE_FUNCTION:B}else return isMessageFunction(A)?A:NOOP_MESSAGE_FUNCTION}};return t.processor&&(w.processor=t.processor),a.list&&(w.list=a.list),a.named&&(w.named=a.named),isNumber(a.plural)&&(w.pluralIndex=a.plural),w}function datetime(t,...e){const{datetimeFormats:n,unresolving:a,fallbackLocale:o,onWarn:l,localeFallbacker:u}=t,{__datetimeFormatters:d}=t,[m,y,b,_]=parseDateTimeArgs(...e),w=isBoolean(b.missingWarn)?b.missingWarn:t.missingWarn;isBoolean(b.fallbackWarn)?b.fallbackWarn:t.fallbackWarn;const E=!!b.part,A=isString(b.locale)?b.locale:t.locale,C=u(t,o,A);if(!isString(m)||m==="")return new Intl.DateTimeFormat(A,_).format(y);let k={},B,D=null;const q="datetime format";for(let Y=0;Y<C.length&&(B=C[Y],k=n[B]||{},D=k[m],!isPlainObject(D));Y++)handleMissing(t,m,B,w,q);if(!isPlainObject(D)||!isString(B))return a?NOT_REOSLVED:m;let j=`${B}__${m}`;isEmptyObject(_)||(j=`${j}__${JSON.stringify(_)}`);let J=d.get(j);return J||(J=new Intl.DateTimeFormat(B,assign$1({},D,_)),d.set(j,J)),E?J.formatToParts(y):J.format(y)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...t){const[e,n,a,o]=t,l={};let u={},d;if(isString(e)){const m=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!m)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const y=m[3]?m[3].trim().startsWith("T")?`${m[1].trim()}${m[3].trim()}`:`${m[1].trim()}T${m[3].trim()}`:m[1].trim();d=new Date(y);try{d.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate(e)){if(isNaN(e.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);d=e}else if(isNumber(e))d=e;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString(n)?l.key=n:isPlainObject(n)&&Object.keys(n).forEach(m=>{DATETIME_FORMAT_OPTIONS_KEYS.includes(m)?u[m]=n[m]:l[m]=n[m]}),isString(a)?l.locale=a:isPlainObject(a)&&(u=a),isPlainObject(o)&&(u=o),[l.key||"",d,l,u]}function clearDateTimeFormat(t,e,n){const a=t;for(const o in n){const l=`${e}__${o}`;a.__datetimeFormatters.has(l)&&a.__datetimeFormatters.delete(l)}}function number(t,...e){const{numberFormats:n,unresolving:a,fallbackLocale:o,onWarn:l,localeFallbacker:u}=t,{__numberFormatters:d}=t,[m,y,b,_]=parseNumberArgs(...e),w=isBoolean(b.missingWarn)?b.missingWarn:t.missingWarn;isBoolean(b.fallbackWarn)?b.fallbackWarn:t.fallbackWarn;const E=!!b.part,A=isString(b.locale)?b.locale:t.locale,C=u(t,o,A);if(!isString(m)||m==="")return new Intl.NumberFormat(A,_).format(y);let k={},B,D=null;const q="number format";for(let Y=0;Y<C.length&&(B=C[Y],k=n[B]||{},D=k[m],!isPlainObject(D));Y++)handleMissing(t,m,B,w,q);if(!isPlainObject(D)||!isString(B))return a?NOT_REOSLVED:m;let j=`${B}__${m}`;isEmptyObject(_)||(j=`${j}__${JSON.stringify(_)}`);let J=d.get(j);return J||(J=new Intl.NumberFormat(B,assign$1({},D,_)),d.set(j,J)),E?J.formatToParts(y):J.format(y)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...t){const[e,n,a,o]=t,l={};let u={};if(!isNumber(e))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const d=e;return isString(n)?l.key=n:isPlainObject(n)&&Object.keys(n).forEach(m=>{NUMBER_FORMAT_OPTIONS_KEYS.includes(m)?u[m]=n[m]:l[m]=n[m]}),isString(a)?l.locale=a:isPlainObject(a)&&(u=a),isPlainObject(o)&&(u=o),[l.key||"",d,l,u]}function clearNumberFormat(t,e,n){const a=t;for(const o in n){const l=`${e}__${o}`;a.__numberFormatters.has(l)&&a.__numberFormatters.delete(l)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1);/*!
  * vue-i18n v9.2.2
  * (c) 2022 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION="9.2.2";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}CoreWarnCodes.__EXTEND_POINT__;let code=CompileErrorCodes.__EXTEND_POINT__;const inc=()=>++code,I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSLALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSLALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(t,...e){return createCompileError(t,null,void 0)}const TransrateVNodeSymbol=makeSymbol("__transrateVNode"),DatetimePartsSymbol=makeSymbol("__datetimeParts"),NumberPartsSymbol=makeSymbol("__numberParts"),SetPluralRulesSymbol=makeSymbol("__setPluralRules");makeSymbol("__intlifyMeta");const InejctWithOption=makeSymbol("__injectWithOption");function handleFlatJson(t){if(!isObject(t))return t;for(const e in t)if(hasOwn(t,e))if(!e.includes("."))isObject(t[e])&&handleFlatJson(t[e]);else{const n=e.split("."),a=n.length-1;let o=t;for(let l=0;l<a;l++)n[l]in o||(o[n[l]]={}),o=o[n[l]];o[n[a]]=t[e],delete t[e],isObject(o[n[a]])&&handleFlatJson(o[n[a]])}return t}function getLocaleMessages(t,e){const{messages:n,__i18n:a,messageResolver:o,flatJson:l}=e,u=isPlainObject(n)?n:isArray$1(a)?{}:{[t]:{}};if(isArray$1(a)&&a.forEach(d=>{if("locale"in d&&"resource"in d){const{locale:m,resource:y}=d;m?(u[m]=u[m]||{},deepCopy(y,u[m])):deepCopy(y,u)}else isString(d)&&deepCopy(JSON.parse(d),u)}),o==null&&l)for(const d in u)hasOwn(u,d)&&handleFlatJson(u[d]);return u}const isNotObjectOrIsArray=t=>!isObject(t)||isArray$1(t);function deepCopy(t,e){if(isNotObjectOrIsArray(t)||isNotObjectOrIsArray(e))throw createI18nError(I18nErrorCodes.INVALID_VALUE);for(const n in t)hasOwn(t,n)&&(isNotObjectOrIsArray(t[n])||isNotObjectOrIsArray(e[n])?e[n]=t[n]:deepCopy(t[n],e[n]))}function getComponentOptions(t){return t.type}function adjustI18nResources(t,e,n){let a=isObject(e.messages)?e.messages:{};"__i18nGlobal"in n&&(a=getLocaleMessages(t.locale.value,{messages:a,__i18n:n.__i18nGlobal}));const o=Object.keys(a);o.length&&o.forEach(l=>{t.mergeLocaleMessage(l,a[l])});{if(isObject(e.datetimeFormats)){const l=Object.keys(e.datetimeFormats);l.length&&l.forEach(u=>{t.mergeDateTimeFormat(u,e.datetimeFormats[u])})}if(isObject(e.numberFormats)){const l=Object.keys(e.numberFormats);l.length&&l.forEach(u=>{t.mergeNumberFormat(u,e.numberFormats[u])})}}}function createTextNode(t){return createVNode(Text,null,t,0)}const DEVTOOLS_META="__INTLIFY_META__";let composerID=0;function defineCoreMissingHandler(t){return(e,n,a,o)=>t(n,a,getCurrentInstance$1()||void 0,o)}const getMetaInfo=()=>{const t=getCurrentInstance$1();let e=null;return t&&(e=getComponentOptions(t)[DEVTOOLS_META])?{[DEVTOOLS_META]:e}:null};function createComposer(t={},e){const{__root:n}=t,a=n===void 0;let o=isBoolean(t.inheritLocale)?t.inheritLocale:!0;const l=ref(n&&o?n.locale.value:isString(t.locale)?t.locale:DEFAULT_LOCALE),u=ref(n&&o?n.fallbackLocale.value:isString(t.fallbackLocale)||isArray$1(t.fallbackLocale)||isPlainObject(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:l.value),d=ref(getLocaleMessages(l.value,t)),m=ref(isPlainObject(t.datetimeFormats)?t.datetimeFormats:{[l.value]:{}}),y=ref(isPlainObject(t.numberFormats)?t.numberFormats:{[l.value]:{}});let b=n?n.missingWarn:isBoolean(t.missingWarn)||isRegExp(t.missingWarn)?t.missingWarn:!0,_=n?n.fallbackWarn:isBoolean(t.fallbackWarn)||isRegExp(t.fallbackWarn)?t.fallbackWarn:!0,w=n?n.fallbackRoot:isBoolean(t.fallbackRoot)?t.fallbackRoot:!0,E=!!t.fallbackFormat,A=isFunction(t.missing)?t.missing:null,C=isFunction(t.missing)?defineCoreMissingHandler(t.missing):null,k=isFunction(t.postTranslation)?t.postTranslation:null,B=n?n.warnHtmlMessage:isBoolean(t.warnHtmlMessage)?t.warnHtmlMessage:!0,D=!!t.escapeParameter;const q=n?n.modifiers:isPlainObject(t.modifiers)?t.modifiers:{};let j=t.pluralRules||n&&n.pluralRules,J;J=(()=>{a&&setFallbackContext(null);const Be={version:VERSION,locale:l.value,fallbackLocale:u.value,messages:d.value,modifiers:q,pluralRules:j,missing:C===null?void 0:C,missingWarn:b,fallbackWarn:_,fallbackFormat:E,unresolving:!0,postTranslation:k===null?void 0:k,warnHtmlMessage:B,escapeParameter:D,messageResolver:t.messageResolver,__meta:{framework:"vue"}};Be.datetimeFormats=m.value,Be.numberFormats=y.value,Be.__datetimeFormatters=isPlainObject(J)?J.__datetimeFormatters:void 0,Be.__numberFormatters=isPlainObject(J)?J.__numberFormatters:void 0;const Me=createCoreContext(Be);return a&&setFallbackContext(Me),Me})(),updateFallbackLocale(J,l.value,u.value);function L(){return[l.value,u.value,d.value,m.value,y.value]}const Z=computed({get:()=>l.value,set:Be=>{l.value=Be,J.locale=l.value}}),Q=computed({get:()=>u.value,set:Be=>{u.value=Be,J.fallbackLocale=u.value,updateFallbackLocale(J,l.value,Be)}}),oe=computed(()=>d.value),ae=computed(()=>m.value),U=computed(()=>y.value);function I(){return isFunction(k)?k:null}function x(Be){k=Be,J.postTranslation=Be}function T(){return A}function M(Be){Be!==null&&(C=defineCoreMissingHandler(Be)),A=Be,J.missing=C}const O=(Be,Me,Fe,Ve,Oe,ge)=>{L();let ie;if(__INTLIFY_PROD_DEVTOOLS__)try{setAdditionalMeta(getMetaInfo()),a||(J.fallbackContext=n?getFallbackContext():void 0),ie=Be(J)}finally{setAdditionalMeta(null),a||(J.fallbackContext=void 0)}else ie=Be(J);if(isNumber(ie)&&ie===NOT_REOSLVED){const[he,we]=Me();return n&&w?Ve(n):Oe(he)}else{if(ge(ie))return ie;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function z(...Be){return O(Me=>Reflect.apply(translate,null,[Me,...Be]),()=>parseTranslateArgs(...Be),"translate",Me=>Reflect.apply(Me.t,Me,[...Be]),Me=>Me,Me=>isString(Me))}function X(...Be){const[Me,Fe,Ve]=Be;if(Ve&&!isObject(Ve))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return z(Me,Fe,assign$1({resolvedMessage:!0},Ve||{}))}function H(...Be){return O(Me=>Reflect.apply(datetime,null,[Me,...Be]),()=>parseDateTimeArgs(...Be),"datetime format",Me=>Reflect.apply(Me.d,Me,[...Be]),()=>MISSING_RESOLVE_VALUE,Me=>isString(Me))}function P(...Be){return O(Me=>Reflect.apply(number,null,[Me,...Be]),()=>parseNumberArgs(...Be),"number format",Me=>Reflect.apply(Me.n,Me,[...Be]),()=>MISSING_RESOLVE_VALUE,Me=>isString(Me))}function S(Be){return Be.map(Me=>isString(Me)||isNumber(Me)||isBoolean(Me)?createTextNode(String(Me)):Me)}const ue={normalize:S,interpolate:Be=>Be,type:"vnode"};function ee(...Be){return O(Me=>{let Fe;const Ve=Me;try{Ve.processor=ue,Fe=Reflect.apply(translate,null,[Ve,...Be])}finally{Ve.processor=null}return Fe},()=>parseTranslateArgs(...Be),"translate",Me=>Me[TransrateVNodeSymbol](...Be),Me=>[createTextNode(Me)],Me=>isArray$1(Me))}function fe(...Be){return O(Me=>Reflect.apply(number,null,[Me,...Be]),()=>parseNumberArgs(...Be),"number format",Me=>Me[NumberPartsSymbol](...Be),()=>[],Me=>isString(Me)||isArray$1(Me))}function le(...Be){return O(Me=>Reflect.apply(datetime,null,[Me,...Be]),()=>parseDateTimeArgs(...Be),"datetime format",Me=>Me[DatetimePartsSymbol](...Be),()=>[],Me=>isString(Me)||isArray$1(Me))}function ce(Be){j=Be,J.pluralRules=j}function pe(Be,Me){const Fe=isString(Me)?Me:l.value,Ve=re(Fe);return J.messageResolver(Ve,Be)!==null}function se(Be){let Me=null;const Fe=fallbackWithLocaleChain(J,u.value,l.value);for(let Ve=0;Ve<Fe.length;Ve++){const Oe=d.value[Fe[Ve]]||{},ge=J.messageResolver(Oe,Be);if(ge!=null){Me=ge;break}}return Me}function de(Be){const Me=se(Be);return Me??(n?n.tm(Be)||{}:{})}function re(Be){return d.value[Be]||{}}function me(Be,Me){d.value[Be]=Me,J.messages=d.value}function te(Be,Me){d.value[Be]=d.value[Be]||{},deepCopy(Me,d.value[Be]),J.messages=d.value}function ve(Be){return m.value[Be]||{}}function Se(Be,Me){m.value[Be]=Me,J.datetimeFormats=m.value,clearDateTimeFormat(J,Be,Me)}function be(Be,Me){m.value[Be]=assign$1(m.value[Be]||{},Me),J.datetimeFormats=m.value,clearDateTimeFormat(J,Be,Me)}function _e(Be){return y.value[Be]||{}}function ye(Be,Me){y.value[Be]=Me,J.numberFormats=y.value,clearNumberFormat(J,Be,Me)}function $e(Be,Me){y.value[Be]=assign$1(y.value[Be]||{},Me),J.numberFormats=y.value,clearNumberFormat(J,Be,Me)}composerID++,n&&inBrowser&&(watch(n.locale,Be=>{o&&(l.value=Be,J.locale=Be,updateFallbackLocale(J,l.value,u.value))}),watch(n.fallbackLocale,Be=>{o&&(u.value=Be,J.fallbackLocale=Be,updateFallbackLocale(J,l.value,u.value))}));const Ie={id:composerID,locale:Z,fallbackLocale:Q,get inheritLocale(){return o},set inheritLocale(Be){o=Be,Be&&n&&(l.value=n.locale.value,u.value=n.fallbackLocale.value,updateFallbackLocale(J,l.value,u.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:oe,get modifiers(){return q},get pluralRules(){return j||{}},get isGlobal(){return a},get missingWarn(){return b},set missingWarn(Be){b=Be,J.missingWarn=b},get fallbackWarn(){return _},set fallbackWarn(Be){_=Be,J.fallbackWarn=_},get fallbackRoot(){return w},set fallbackRoot(Be){w=Be},get fallbackFormat(){return E},set fallbackFormat(Be){E=Be,J.fallbackFormat=E},get warnHtmlMessage(){return B},set warnHtmlMessage(Be){B=Be,J.warnHtmlMessage=Be},get escapeParameter(){return D},set escapeParameter(Be){D=Be,J.escapeParameter=Be},t:z,getLocaleMessage:re,setLocaleMessage:me,mergeLocaleMessage:te,getPostTranslationHandler:I,setPostTranslationHandler:x,getMissingHandler:T,setMissingHandler:M,[SetPluralRulesSymbol]:ce};return Ie.datetimeFormats=ae,Ie.numberFormats=U,Ie.rt=X,Ie.te=pe,Ie.tm=de,Ie.d=H,Ie.n=P,Ie.getDateTimeFormat=ve,Ie.setDateTimeFormat=Se,Ie.mergeDateTimeFormat=be,Ie.getNumberFormat=_e,Ie.setNumberFormat=ye,Ie.mergeNumberFormat=$e,Ie[InejctWithOption]=t.__injectWithOption,Ie[TransrateVNodeSymbol]=ee,Ie[DatetimePartsSymbol]=le,Ie[NumberPartsSymbol]=fe,Ie}function convertComposerOptions(t){const e=isString(t.locale)?t.locale:DEFAULT_LOCALE,n=isString(t.fallbackLocale)||isArray$1(t.fallbackLocale)||isPlainObject(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,a=isFunction(t.missing)?t.missing:void 0,o=isBoolean(t.silentTranslationWarn)||isRegExp(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,l=isBoolean(t.silentFallbackWarn)||isRegExp(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,u=isBoolean(t.fallbackRoot)?t.fallbackRoot:!0,d=!!t.formatFallbackMessages,m=isPlainObject(t.modifiers)?t.modifiers:{},y=t.pluralizationRules,b=isFunction(t.postTranslation)?t.postTranslation:void 0,_=isString(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,w=!!t.escapeParameterHtml,E=isBoolean(t.sync)?t.sync:!0;let A=t.messages;if(isPlainObject(t.sharedMessages)){const J=t.sharedMessages;A=Object.keys(J).reduce((L,Z)=>{const Q=L[Z]||(L[Z]={});return assign$1(Q,J[Z]),L},A||{})}const{__i18n:C,__root:k,__injectWithOption:B}=t,D=t.datetimeFormats,q=t.numberFormats,j=t.flatJson;return{locale:e,fallbackLocale:n,messages:A,flatJson:j,datetimeFormats:D,numberFormats:q,missing:a,missingWarn:o,fallbackWarn:l,fallbackRoot:u,fallbackFormat:d,modifiers:m,pluralRules:y,postTranslation:b,warnHtmlMessage:_,escapeParameter:w,messageResolver:t.messageResolver,inheritLocale:E,__i18n:C,__root:k,__injectWithOption:B}}function createVueI18n(t={},e){{const n=createComposer(convertComposerOptions(t)),a={id:n.id,get locale(){return n.locale.value},set locale(o){n.locale.value=o},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(o){n.fallbackLocale.value=o},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(o){},get missing(){return n.getMissingHandler()},set missing(o){n.setMissingHandler(o)},get silentTranslationWarn(){return isBoolean(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(o){n.missingWarn=isBoolean(o)?!o:o},get silentFallbackWarn(){return isBoolean(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(o){n.fallbackWarn=isBoolean(o)?!o:o},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(o){n.fallbackFormat=o},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(o){n.setPostTranslationHandler(o)},get sync(){return n.inheritLocale},set sync(o){n.inheritLocale=o},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(o){n.warnHtmlMessage=o!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(o){n.escapeParameter=o},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(o){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...o){const[l,u,d]=o,m={};let y=null,b=null;if(!isString(l))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const _=l;return isString(u)?m.locale=u:isArray$1(u)?y=u:isPlainObject(u)&&(b=u),isArray$1(d)?y=d:isPlainObject(d)&&(b=d),Reflect.apply(n.t,n,[_,y||b||{},m])},rt(...o){return Reflect.apply(n.rt,n,[...o])},tc(...o){const[l,u,d]=o,m={plural:1};let y=null,b=null;if(!isString(l))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const _=l;return isString(u)?m.locale=u:isNumber(u)?m.plural=u:isArray$1(u)?y=u:isPlainObject(u)&&(b=u),isString(d)?m.locale=d:isArray$1(d)?y=d:isPlainObject(d)&&(b=d),Reflect.apply(n.t,n,[_,y||b||{},m])},te(o,l){return n.te(o,l)},tm(o){return n.tm(o)},getLocaleMessage(o){return n.getLocaleMessage(o)},setLocaleMessage(o,l){n.setLocaleMessage(o,l)},mergeLocaleMessage(o,l){n.mergeLocaleMessage(o,l)},d(...o){return Reflect.apply(n.d,n,[...o])},getDateTimeFormat(o){return n.getDateTimeFormat(o)},setDateTimeFormat(o,l){n.setDateTimeFormat(o,l)},mergeDateTimeFormat(o,l){n.mergeDateTimeFormat(o,l)},n(...o){return Reflect.apply(n.n,n,[...o])},getNumberFormat(o){return n.getNumberFormat(o)},setNumberFormat(o,l){n.setNumberFormat(o,l)},mergeNumberFormat(o,l){n.mergeNumberFormat(o,l)},getChoiceIndex(o,l){return-1},__onComponentInstanceCreated(o){const{componentInstanceCreatedListener:l}=t;l&&l(o,a)}};return a}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((a,o)=>a=[...a,...isArray$1(o.children)?o.children:[o]],[]):e.reduce((n,a)=>{const o=t[a];return o&&(n[a]=o()),n},{})}function getFragmentableTag(t){return Fragment}const Translation={name:"i18n-t",props:assign$1({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>isNumber(t)||!isNaN(t)}},baseFormatProps),setup(t,e){const{slots:n,attrs:a}=e,o=t.i18n||useI18n({useScope:t.scope,__useComponent:!0});return()=>{const l=Object.keys(n).filter(_=>_!=="_"),u={};t.locale&&(u.locale=t.locale),t.plural!==void 0&&(u.plural=isString(t.plural)?+t.plural:t.plural);const d=getInterpolateArg(e,l),m=o[TransrateVNodeSymbol](t.keypath,d,u),y=assign$1({},a),b=isString(t.tag)||isObject(t.tag)?t.tag:getFragmentableTag();return h(b,y,m)}}};function isVNode(t){return isArray$1(t)&&!isString(t[0])}function renderFormatter(t,e,n,a){const{slots:o,attrs:l}=e;return()=>{const u={part:!0};let d={};t.locale&&(u.locale=t.locale),isString(t.format)?u.key=t.format:isObject(t.format)&&(isString(t.format.key)&&(u.key=t.format.key),d=Object.keys(t.format).reduce((w,E)=>n.includes(E)?assign$1({},w,{[E]:t.format[E]}):w,{}));const m=a(t.value,u,d);let y=[u.key];isArray$1(m)?y=m.map((w,E)=>{const A=o[w.type],C=A?A({[w.type]:w.value,index:E,parts:m}):[w.value];return isVNode(C)&&(C[0].key=`${w.type}-${E}`),C}):isString(m)&&(y=[m]);const b=assign$1({},l),_=isString(t.tag)||isObject(t.tag)?t.tag:getFragmentableTag();return h(_,b,y)}}const NumberFormat={name:"i18n-n",props:assign$1({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(t,e){const n=t.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(t,e,NUMBER_FORMAT_OPTIONS_KEYS,(...a)=>n[NumberPartsSymbol](...a))}},DatetimeFormat={name:"i18n-d",props:assign$1({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(t,e){const n=t.i18n||useI18n({useScope:"parent",__useComponent:!0});return renderFormatter(t,e,DATETIME_FORMAT_OPTIONS_KEYS,(...a)=>n[DatetimePartsSymbol](...a))}};function getComposer$2(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const a=n.__getInstance(e);return a!=null?a.__composer:t.global.__composer}}function vTDirective(t){const e=u=>{const{instance:d,modifiers:m,value:y}=u;if(!d||!d.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const b=getComposer$2(t,d.$),_=parseValue(y);return[Reflect.apply(b.t,b,[...makeParams(_)]),b]};return{created:(u,d)=>{const[m,y]=e(d);inBrowser&&t.global===y&&(u.__i18nWatcher=watch(y.locale,()=>{d.instance&&d.instance.$forceUpdate()})),u.__composer=y,u.textContent=m},unmounted:u=>{inBrowser&&u.__i18nWatcher&&(u.__i18nWatcher(),u.__i18nWatcher=void 0,delete u.__i18nWatcher),u.__composer&&(u.__composer=void 0,delete u.__composer)},beforeUpdate:(u,{value:d})=>{if(u.__composer){const m=u.__composer,y=parseValue(d);u.textContent=Reflect.apply(m.t,m,[...makeParams(y)])}},getSSRProps:u=>{const[d]=e(u);return{textContent:d}}}}function parseValue(t){if(isString(t))return{path:t};if(isPlainObject(t)){if(!("path"in t))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return t}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(t){const{path:e,locale:n,args:a,choice:o,plural:l}=t,u={},d=a||{};return isString(n)&&(u.locale=n),isNumber(o)&&(u.plural=o),isNumber(l)&&(u.plural=l),[e,d,u]}function apply(t,e,...n){const a=isPlainObject(n[0])?n[0]:{},o=!!a.useI18nComponentName;(isBoolean(a.globalInstall)?a.globalInstall:!0)&&(t.component(o?"i18n":Translation.name,Translation),t.component(NumberFormat.name,NumberFormat),t.component(DatetimeFormat.name,DatetimeFormat)),t.directive("t",vTDirective(e))}function defineMixin(t,e,n){return{beforeCreate(){const a=getCurrentInstance$1();if(!a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const o=this.$options;if(o.i18n){const l=o.i18n;o.__i18n&&(l.__i18n=o.__i18n),l.__root=e,this===this.$root?this.$i18n=mergeToRoot(t,l):(l.__injectWithOption=!0,this.$i18n=createVueI18n(l))}else o.__i18n?this===this.$root?this.$i18n=mergeToRoot(t,o):this.$i18n=createVueI18n({__i18n:o.__i18n,__injectWithOption:!0,__root:e}):this.$i18n=t;o.__i18nGlobal&&adjustI18nResources(e,o,o),t.__onComponentInstanceCreated(this.$i18n),n.__setInstance(a,this.$i18n),this.$t=(...l)=>this.$i18n.t(...l),this.$rt=(...l)=>this.$i18n.rt(...l),this.$tc=(...l)=>this.$i18n.tc(...l),this.$te=(l,u)=>this.$i18n.te(l,u),this.$d=(...l)=>this.$i18n.d(...l),this.$n=(...l)=>this.$i18n.n(...l),this.$tm=l=>this.$i18n.tm(l)},mounted(){},unmounted(){const a=getCurrentInstance$1();if(!a)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,n.__deleteInstance(a),delete this.$i18n}}}function mergeToRoot(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[SetPluralRulesSymbol](e.pluralizationRules||t.pluralizationRules);const n=getLocaleMessages(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(a=>t.mergeLocaleMessage(a,n[a])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(a=>t.mergeDateTimeFormat(a,e.datetimeFormats[a])),e.numberFormats&&Object.keys(e.numberFormats).forEach(a=>t.mergeNumberFormat(a,e.numberFormats[a])),t}const I18nInjectionKey=makeSymbol("global-vue-i18n");function createI18n(t={},e){const n=__VUE_I18N_LEGACY_API__&&isBoolean(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,a=isBoolean(t.globalInjection)?t.globalInjection:!0,o=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,l=new Map,[u,d]=createGlobal(t,n),m=makeSymbol("");function y(w){return l.get(w)||null}function b(w,E){l.set(w,E)}function _(w){l.delete(w)}{const w={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return o},async install(E,...A){E.__VUE_I18N_SYMBOL__=m,E.provide(E.__VUE_I18N_SYMBOL__,w),!n&&a&&injectGlobalFields(E,w.global),__VUE_I18N_FULL_INSTALL__&&apply(E,w,...A),__VUE_I18N_LEGACY_API__&&n&&E.mixin(defineMixin(d,d.__composer,w));const C=E.unmount;E.unmount=()=>{w.dispose(),C()}},get global(){return d},dispose(){u.stop()},__instances:l,__getInstance:y,__setInstance:b,__deleteInstance:_};return w}}function useI18n(t={}){const e=getCurrentInstance$1();if(e==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSLALLED);const n=getI18nInstance(e),a=getGlobalComposer(n),o=getComponentOptions(e),l=getScope(t,o);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(e,l,a,t)}if(l==="global")return adjustI18nResources(a,t,o),a;if(l==="parent"){let m=getComposer(n,e,t.__useComponent);return m==null&&(m=a),m}const u=n;let d=u.__getInstance(e);if(d==null){const m=assign$1({},t);"__i18n"in o&&(m.__i18n=o.__i18n),a&&(m.__root=a),d=createComposer(m),setupLifeCycle(u,e),u.__setInstance(e,d)}return d}function createGlobal(t,e,n){const a=effectScope();{const o=__VUE_I18N_LEGACY_API__&&e?a.run(()=>createVueI18n(t)):a.run(()=>createComposer(t));if(o==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[a,o]}}function getI18nInstance(t){{const e=inject$1(t.isCE?I18nInjectionKey:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw createI18nError(t.isCE?I18nErrorCodes.NOT_INSLALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return e}}function getScope(t,e){return isEmptyObject(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function getGlobalComposer(t){return t.mode==="composition"?t.global:t.global.__composer}function getComposer(t,e,n=!1){let a=null;const o=e.root;let l=e.parent;for(;l!=null;){const u=t;if(t.mode==="composition")a=u.__getInstance(l);else if(__VUE_I18N_LEGACY_API__){const d=u.__getInstance(l);d!=null&&(a=d.__composer,n&&a&&!a[InejctWithOption]&&(a=null))}if(a!=null||o===l)break;l=l.parent}return a}function setupLifeCycle(t,e,n){onMounted(()=>{},e),onUnmounted(()=>{t.__deleteInstance(e)},e)}function useI18nForLegacy(t,e,n,a={}){const o=e==="local",l=shallowRef(null);if(o&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const u=isBoolean(a.inheritLocale)?a.inheritLocale:!0,d=ref(o&&u?n.locale.value:isString(a.locale)?a.locale:DEFAULT_LOCALE),m=ref(o&&u?n.fallbackLocale.value:isString(a.fallbackLocale)||isArray$1(a.fallbackLocale)||isPlainObject(a.fallbackLocale)||a.fallbackLocale===!1?a.fallbackLocale:d.value),y=ref(getLocaleMessages(d.value,a)),b=ref(isPlainObject(a.datetimeFormats)?a.datetimeFormats:{[d.value]:{}}),_=ref(isPlainObject(a.numberFormats)?a.numberFormats:{[d.value]:{}}),w=o?n.missingWarn:isBoolean(a.missingWarn)||isRegExp(a.missingWarn)?a.missingWarn:!0,E=o?n.fallbackWarn:isBoolean(a.fallbackWarn)||isRegExp(a.fallbackWarn)?a.fallbackWarn:!0,A=o?n.fallbackRoot:isBoolean(a.fallbackRoot)?a.fallbackRoot:!0,C=!!a.fallbackFormat,k=isFunction(a.missing)?a.missing:null,B=isFunction(a.postTranslation)?a.postTranslation:null,D=o?n.warnHtmlMessage:isBoolean(a.warnHtmlMessage)?a.warnHtmlMessage:!0,q=!!a.escapeParameter,j=o?n.modifiers:isPlainObject(a.modifiers)?a.modifiers:{},J=a.pluralRules||o&&n.pluralRules;function Y(){return[d.value,m.value,y.value,b.value,_.value]}const L=computed({get:()=>l.value?l.value.locale.value:d.value,set:te=>{l.value&&(l.value.locale.value=te),d.value=te}}),Z=computed({get:()=>l.value?l.value.fallbackLocale.value:m.value,set:te=>{l.value&&(l.value.fallbackLocale.value=te),m.value=te}}),Q=computed(()=>l.value?l.value.messages.value:y.value),oe=computed(()=>b.value),ae=computed(()=>_.value);function U(){return l.value?l.value.getPostTranslationHandler():B}function I(te){l.value&&l.value.setPostTranslationHandler(te)}function x(){return l.value?l.value.getMissingHandler():k}function T(te){l.value&&l.value.setMissingHandler(te)}function M(te){return Y(),te()}function O(...te){return l.value?M(()=>Reflect.apply(l.value.t,null,[...te])):M(()=>"")}function z(...te){return l.value?Reflect.apply(l.value.rt,null,[...te]):""}function X(...te){return l.value?M(()=>Reflect.apply(l.value.d,null,[...te])):M(()=>"")}function H(...te){return l.value?M(()=>Reflect.apply(l.value.n,null,[...te])):M(()=>"")}function P(te){return l.value?l.value.tm(te):{}}function S(te,ve){return l.value?l.value.te(te,ve):!1}function F(te){return l.value?l.value.getLocaleMessage(te):{}}function ue(te,ve){l.value&&(l.value.setLocaleMessage(te,ve),y.value[te]=ve)}function ee(te,ve){l.value&&l.value.mergeLocaleMessage(te,ve)}function fe(te){return l.value?l.value.getDateTimeFormat(te):{}}function le(te,ve){l.value&&(l.value.setDateTimeFormat(te,ve),b.value[te]=ve)}function ce(te,ve){l.value&&l.value.mergeDateTimeFormat(te,ve)}function pe(te){return l.value?l.value.getNumberFormat(te):{}}function se(te,ve){l.value&&(l.value.setNumberFormat(te,ve),_.value[te]=ve)}function de(te,ve){l.value&&l.value.mergeNumberFormat(te,ve)}const re={get id(){return l.value?l.value.id:-1},locale:L,fallbackLocale:Z,messages:Q,datetimeFormats:oe,numberFormats:ae,get inheritLocale(){return l.value?l.value.inheritLocale:u},set inheritLocale(te){l.value&&(l.value.inheritLocale=te)},get availableLocales(){return l.value?l.value.availableLocales:Object.keys(y.value)},get modifiers(){return l.value?l.value.modifiers:j},get pluralRules(){return l.value?l.value.pluralRules:J},get isGlobal(){return l.value?l.value.isGlobal:!1},get missingWarn(){return l.value?l.value.missingWarn:w},set missingWarn(te){l.value&&(l.value.missingWarn=te)},get fallbackWarn(){return l.value?l.value.fallbackWarn:E},set fallbackWarn(te){l.value&&(l.value.missingWarn=te)},get fallbackRoot(){return l.value?l.value.fallbackRoot:A},set fallbackRoot(te){l.value&&(l.value.fallbackRoot=te)},get fallbackFormat(){return l.value?l.value.fallbackFormat:C},set fallbackFormat(te){l.value&&(l.value.fallbackFormat=te)},get warnHtmlMessage(){return l.value?l.value.warnHtmlMessage:D},set warnHtmlMessage(te){l.value&&(l.value.warnHtmlMessage=te)},get escapeParameter(){return l.value?l.value.escapeParameter:q},set escapeParameter(te){l.value&&(l.value.escapeParameter=te)},t:O,getPostTranslationHandler:U,setPostTranslationHandler:I,getMissingHandler:x,setMissingHandler:T,rt:z,d:X,n:H,tm:P,te:S,getLocaleMessage:F,setLocaleMessage:ue,mergeLocaleMessage:ee,getDateTimeFormat:fe,setDateTimeFormat:le,mergeDateTimeFormat:ce,getNumberFormat:pe,setNumberFormat:se,mergeNumberFormat:de};function me(te){te.locale.value=d.value,te.fallbackLocale.value=m.value,Object.keys(y.value).forEach(ve=>{te.mergeLocaleMessage(ve,y.value[ve])}),Object.keys(b.value).forEach(ve=>{te.mergeDateTimeFormat(ve,b.value[ve])}),Object.keys(_.value).forEach(ve=>{te.mergeNumberFormat(ve,_.value[ve])}),te.escapeParameter=q,te.fallbackFormat=C,te.fallbackRoot=A,te.fallbackWarn=E,te.missingWarn=w,te.warnHtmlMessage=D}return onBeforeMount(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const te=l.value=t.proxy.$i18n.__composer;e==="global"?(d.value=te.locale.value,m.value=te.fallbackLocale.value,y.value=te.messages.value,b.value=te.datetimeFormats.value,_.value=te.numberFormats.value):o&&me(te)}),re}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm"];function injectGlobalFields(t,e){const n=Object.create(null);globalExportProps.forEach(a=>{const o=Object.getOwnPropertyDescriptor(e,a);if(!o)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const l=isRef(o.value)?{get(){return o.value.value},set(u){o.value.value=u}}:{get(){return o.get&&o.get()}};Object.defineProperty(n,a,l)}),t.config.globalProperties.$i18n=n,globalExportMethods.forEach(a=>{const o=Object.getOwnPropertyDescriptor(e,a);if(!o||!o.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${a}`,o)})}registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);initFeatureFlags();if(__INTLIFY_PROD_DEVTOOLS__){const t=getGlobalThis();t.__INTLIFY__=!0,setDevToolsHook(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const fr={communs:{constellation:"Constellation"},accueil:{démarrer:"Démarrer",version:"Version"}},messages={fr},i18n=createI18n({locale:"fr",messages});/*!
  * vue-router v4.1.6
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof window<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(t,e){const n={};for(const a in e){const o=e[a];n[a]=isArray(o)?o.map(t):t(o)}return n}const noop=()=>{},isArray=Array.isArray,TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,e,n="/"){let a,o={},l="",u="";const d=e.indexOf("#");let m=e.indexOf("?");return d<m&&d>=0&&(m=-1),m>-1&&(a=e.slice(0,m),l=e.slice(m+1,d>-1?d:e.length),o=t(l)),d>-1&&(a=a||e.slice(0,d),u=e.slice(d,e.length)),a=resolveRelativePath(a??e,n),{fullPath:a+(l&&"?")+l+u,path:a,query:o,hash:u}}function stringifyURL(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function stripBase(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function isSameRouteLocation(t,e,n){const a=e.matched.length-1,o=n.matched.length-1;return a>-1&&a===o&&isSameRouteRecord(e.matched[a],n.matched[o])&&isSameRouteLocationParams(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function isSameRouteRecord(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function isSameRouteLocationParams(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!isSameRouteLocationParamsValue(t[n],e[n]))return!1;return!0}function isSameRouteLocationParamsValue(t,e){return isArray(t)?isEquivalentArray(t,e):isArray(e)?isEquivalentArray(e,t):t===e}function isEquivalentArray(t,e){return isArray(e)?t.length===e.length&&t.every((n,a)=>n===e[a]):t.length===1&&t[0]===e}function resolveRelativePath(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),a=t.split("/");let o=n.length-1,l,u;for(l=0;l<a.length;l++)if(u=a[l],u!==".")if(u==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+a.slice(l-(l===a.length?1:0)).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,e){return t.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(t,e){const n=document.documentElement.getBoundingClientRect(),a=t.getBoundingClientRect();return{behavior:e.behavior,left:a.left-n.left-(e.left||0),top:a.top-n.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.pageXOffset,top:window.pageYOffset});function scrollToPosition(t){let e;if("el"in t){const n=t.el,a=typeof n=="string"&&n.startsWith("#"),o=typeof n=="string"?a?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!o)return;e=getElementPosition(o,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.pageXOffset,e.top!=null?e.top:window.pageYOffset)}function getScrollKey(t,e){return(history.state?history.state.position-e:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,e){scrollPositions.set(t,e)}function getSavedScrollPosition(t){const e=scrollPositions.get(t);return scrollPositions.delete(t),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,e){const{pathname:n,search:a,hash:o}=e,l=t.indexOf("#");if(l>-1){let d=o.includes(t.slice(l))?t.slice(l).length:1,m=o.slice(d);return m[0]!=="/"&&(m="/"+m),stripBase(m,"")}return stripBase(n,t)+a+o}function useHistoryListeners(t,e,n,a){let o=[],l=[],u=null;const d=({state:w})=>{const E=createCurrentLocation(t,location),A=n.value,C=e.value;let k=0;if(w){if(n.value=E,e.value=w,u&&u===A){u=null;return}k=C?w.position-C.position:0}else a(E);o.forEach(B=>{B(n.value,A,{delta:k,type:NavigationType.pop,direction:k?k>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function m(){u=n.value}function y(w){o.push(w);const E=()=>{const A=o.indexOf(w);A>-1&&o.splice(A,1)};return l.push(E),E}function b(){const{history:w}=window;w.state&&w.replaceState(assign({},w.state,{scroll:computeScrollPosition()}),"")}function _(){for(const w of l)w();l=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",b)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",b),{pauseListeners:m,listen:y,destroy:_}}function buildState(t,e,n,a=!1,o=!1){return{back:t,current:e,forward:n,replaced:a,position:window.history.length,scroll:o?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:e,location:n}=window,a={value:createCurrentLocation(t,n)},o={value:e.state};o.value||l(a.value,{back:null,current:a.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function l(m,y,b){const _=t.indexOf("#"),w=_>-1?(n.host&&document.querySelector("base")?t:t.slice(_))+m:createBaseLocation()+t+m;try{e[b?"replaceState":"pushState"](y,"",w),o.value=y}catch(E){console.error(E),n[b?"replace":"assign"](w)}}function u(m,y){const b=assign({},e.state,buildState(o.value.back,m,o.value.forward,!0),y,{position:o.value.position});l(m,b,!0),a.value=m}function d(m,y){const b=assign({},o.value,e.state,{forward:m,scroll:computeScrollPosition()});l(b.current,b,!0);const _=assign({},buildState(a.value,m,null),{position:b.position+1},y);l(m,_,!1),a.value=m}return{location:a,state:o,push:d,replace:u}}function createWebHistory(t){t=normalizeBase(t);const e=useHistoryStateNavigation(t),n=useHistoryListeners(t,e.state,e.location,e.replace);function a(l,u=!0){u||n.pauseListeners(),history.go(l)}const o=assign({location:"",base:t,go:a,createHref:createHref.bind(null,t)},e,n);return Object.defineProperty(o,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(o,"state",{enumerable:!0,get:()=>e.state.value}),o}function createWebHashHistory(t){return t=location.host?t||location.pathname+location.search:"",t.includes("#")||(t+="#"),createWebHistory(t)}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,e){return assign(new Error,{type:t,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(t,e){return t instanceof Error&&NavigationFailureSymbol in t&&(e==null||!!(t.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,e){const n=assign({},BASE_PATH_PARSER_OPTIONS,e),a=[];let o=n.start?"^":"";const l=[];for(const y of t){const b=y.length?[]:[90];n.strict&&!y.length&&(o+="/");for(let _=0;_<y.length;_++){const w=y[_];let E=40+(n.sensitive?.25:0);if(w.type===0)_||(o+="/"),o+=w.value.replace(REGEX_CHARS_RE,"\\$&"),E+=40;else if(w.type===1){const{value:A,repeatable:C,optional:k,regexp:B}=w;l.push({name:A,repeatable:C,optional:k});const D=B||BASE_PARAM_PATTERN;if(D!==BASE_PARAM_PATTERN){E+=10;try{new RegExp(`(${D})`)}catch(j){throw new Error(`Invalid custom RegExp for param "${A}" (${D}): `+j.message)}}let q=C?`((?:${D})(?:/(?:${D}))*)`:`(${D})`;_||(q=k&&y.length<2?`(?:/${q})`:"/"+q),k&&(q+="?"),o+=q,E+=20,k&&(E+=-8),C&&(E+=-20),D===".*"&&(E+=-50)}b.push(E)}a.push(b)}if(n.strict&&n.end){const y=a.length-1;a[y][a[y].length-1]+=.7000000000000001}n.strict||(o+="/?"),n.end?o+="$":n.strict&&(o+="(?:/|$)");const u=new RegExp(o,n.sensitive?"":"i");function d(y){const b=y.match(u),_={};if(!b)return null;for(let w=1;w<b.length;w++){const E=b[w]||"",A=l[w-1];_[A.name]=E&&A.repeatable?E.split("/"):E}return _}function m(y){let b="",_=!1;for(const w of t){(!_||!b.endsWith("/"))&&(b+="/"),_=!1;for(const E of w)if(E.type===0)b+=E.value;else if(E.type===1){const{value:A,repeatable:C,optional:k}=E,B=A in y?y[A]:"";if(isArray(B)&&!C)throw new Error(`Provided param "${A}" is an array but it is not repeatable (* or + modifiers)`);const D=isArray(B)?B.join("/"):B;if(!D)if(k)w.length<2&&(b.endsWith("/")?b=b.slice(0,-1):_=!0);else throw new Error(`Missing required param "${A}"`);b+=D}}return b||"/"}return{re:u,score:a,keys:l,parse:d,stringify:m}}function compareScoreArray(t,e){let n=0;for(;n<t.length&&n<e.length;){const a=e[n]-t[n];if(a)return a;n++}return t.length<e.length?t.length===1&&t[0]===40+40?-1:1:t.length>e.length?e.length===1&&e[0]===40+40?1:-1:0}function comparePathParserScore(t,e){let n=0;const a=t.score,o=e.score;for(;n<a.length&&n<o.length;){const l=compareScoreArray(a[n],o[n]);if(l)return l;n++}if(Math.abs(o.length-a.length)===1){if(isLastScoreNegative(a))return 1;if(isLastScoreNegative(o))return-1}return o.length-a.length}function isLastScoreNegative(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(E){throw new Error(`ERR (${n})/"${y}": ${E}`)}let n=0,a=n;const o=[];let l;function u(){l&&o.push(l),l=[]}let d=0,m,y="",b="";function _(){y&&(n===0?l.push({type:0,value:y}):n===1||n===2||n===3?(l.length>1&&(m==="*"||m==="+")&&e(`A repeatable param (${y}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:y,regexp:b,repeatable:m==="*"||m==="+",optional:m==="*"||m==="?"})):e("Invalid state to consume buffer"),y="")}function w(){y+=m}for(;d<t.length;){if(m=t[d++],m==="\\"&&n!==2){a=n,n=4;continue}switch(n){case 0:m==="/"?(y&&_(),u()):m===":"?(_(),n=1):w();break;case 4:w(),n=a;break;case 1:m==="("?n=2:VALID_PARAM_RE.test(m)?w():(_(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&d--);break;case 2:m===")"?b[b.length-1]=="\\"?b=b.slice(0,-1)+m:n=3:b+=m;break;case 3:_(),n=0,m!=="*"&&m!=="?"&&m!=="+"&&d--,b="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${y}"`),_(),u(),o}function createRouteRecordMatcher(t,e,n){const a=tokensToParser(tokenizePath(t.path),n),o=assign(a,{record:t,parent:e,children:[],alias:[]});return e&&!o.record.aliasOf==!e.record.aliasOf&&e.children.push(o),o}function createRouterMatcher(t,e){const n=[],a=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function o(b){return a.get(b)}function l(b,_,w){const E=!w,A=normalizeRouteRecord(b);A.aliasOf=w&&w.record;const C=mergeOptions(e,b),k=[A];if("alias"in b){const q=typeof b.alias=="string"?[b.alias]:b.alias;for(const j of q)k.push(assign({},A,{components:w?w.record.components:A.components,path:j,aliasOf:w?w.record:A}))}let B,D;for(const q of k){const{path:j}=q;if(_&&j[0]!=="/"){const J=_.record.path,Y=J[J.length-1]==="/"?"":"/";q.path=_.record.path+(j&&Y+j)}if(B=createRouteRecordMatcher(q,_,C),w?w.alias.push(B):(D=D||B,D!==B&&D.alias.push(B),E&&b.name&&!isAliasRecord(B)&&u(b.name)),A.children){const J=A.children;for(let Y=0;Y<J.length;Y++)l(J[Y],B,w&&w.children[Y])}w=w||B,(B.record.components&&Object.keys(B.record.components).length||B.record.name||B.record.redirect)&&m(B)}return D?()=>{u(D)}:noop}function u(b){if(isRouteName(b)){const _=a.get(b);_&&(a.delete(b),n.splice(n.indexOf(_),1),_.children.forEach(u),_.alias.forEach(u))}else{const _=n.indexOf(b);_>-1&&(n.splice(_,1),b.record.name&&a.delete(b.record.name),b.children.forEach(u),b.alias.forEach(u))}}function d(){return n}function m(b){let _=0;for(;_<n.length&&comparePathParserScore(b,n[_])>=0&&(b.record.path!==n[_].record.path||!isRecordChildOf(b,n[_]));)_++;n.splice(_,0,b),b.record.name&&!isAliasRecord(b)&&a.set(b.record.name,b)}function y(b,_){let w,E={},A,C;if("name"in b&&b.name){if(w=a.get(b.name),!w)throw createRouterError(1,{location:b});C=w.record.name,E=assign(paramsFromLocation(_.params,w.keys.filter(D=>!D.optional).map(D=>D.name)),b.params&&paramsFromLocation(b.params,w.keys.map(D=>D.name))),A=w.stringify(E)}else if("path"in b)A=b.path,w=n.find(D=>D.re.test(A)),w&&(E=w.parse(A),C=w.record.name);else{if(w=_.name?a.get(_.name):n.find(D=>D.re.test(_.path)),!w)throw createRouterError(1,{location:b,currentLocation:_});C=w.record.name,E=assign({},_.params,b.params),A=w.stringify(E)}const k=[];let B=w;for(;B;)k.unshift(B.record),B=B.parent;return{name:C,path:A,params:E,matched:k,meta:mergeMetaFields(k)}}return t.forEach(b=>l(b)),{addRoute:l,resolve:y,removeRoute:u,getRoutes:d,getRecordMatcher:o}}function paramsFromLocation(t,e){const n={};for(const a of e)a in t&&(n[a]=t[a]);return n}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const a in t.components)e[a]=typeof n=="boolean"?n:n[a];return e}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((e,n)=>assign(e,n.meta),{})}function mergeOptions(t,e){const n={};for(const a in t)n[a]=a in e?e[a]:t[a];return n}function isRecordChildOf(t,e){return e.children.some(n=>n===t||isRecordChildOf(t,n))}const HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode(t){try{return decodeURIComponent(""+t)}catch{}return""+t}function parseQuery(t){const e={};if(t===""||t==="?")return e;const a=(t[0]==="?"?t.slice(1):t).split("&");for(let o=0;o<a.length;++o){const l=a[o].replace(PLUS_RE," "),u=l.indexOf("="),d=decode(u<0?l:l.slice(0,u)),m=u<0?null:decode(l.slice(u+1));if(d in e){let y=e[d];isArray(y)||(y=e[d]=[y]),y.push(m)}else e[d]=m}return e}function stringifyQuery(t){let e="";for(let n in t){const a=t[n];if(n=encodeQueryKey(n),a==null){a!==void 0&&(e+=(e.length?"&":"")+n);continue}(isArray(a)?a.map(l=>l&&encodeQueryValue(l)):[a&&encodeQueryValue(a)]).forEach(l=>{l!==void 0&&(e+=(e.length?"&":"")+n,l!=null&&(e+="="+l))})}return e}function normalizeQuery(t){const e={};for(const n in t){const a=t[n];a!==void 0&&(e[n]=isArray(a)?a.map(o=>o==null?null:""+o):a==null?a:""+a)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function e(a){return t.push(a),()=>{const o=t.indexOf(a);o>-1&&t.splice(o,1)}}function n(){t=[]}return{add:e,list:()=>t,reset:n}}function guardToPromiseFn(t,e,n,a,o){const l=a&&(a.enterCallbacks[o]=a.enterCallbacks[o]||[]);return()=>new Promise((u,d)=>{const m=_=>{_===!1?d(createRouterError(4,{from:n,to:e})):_ instanceof Error?d(_):isRouteLocation(_)?d(createRouterError(2,{from:e,to:_})):(l&&a.enterCallbacks[o]===l&&typeof _=="function"&&l.push(_),u())},y=t.call(a&&a.instances[o],e,n,m);let b=Promise.resolve(y);t.length<3&&(b=b.then(m)),b.catch(_=>d(_))})}function extractComponentsGuards(t,e,n,a){const o=[];for(const l of t)for(const u in l.components){let d=l.components[u];if(!(e!=="beforeRouteEnter"&&!l.instances[u]))if(isRouteComponent(d)){const y=(d.__vccOpts||d)[e];y&&o.push(guardToPromiseFn(y,n,a,l,u))}else{let m=d();o.push(()=>m.then(y=>{if(!y)return Promise.reject(new Error(`Couldn't resolve component "${u}" at "${l.path}"`));const b=isESModule(y)?y.default:y;l.components[u]=b;const w=(b.__vccOpts||b)[e];return w&&guardToPromiseFn(w,n,a,l,u)()}))}}return o}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const e=inject$1(routerKey),n=inject$1(routeLocationKey),a=computed(()=>e.resolve(unref(t.to))),o=computed(()=>{const{matched:m}=a.value,{length:y}=m,b=m[y-1],_=n.matched;if(!b||!_.length)return-1;const w=_.findIndex(isSameRouteRecord.bind(null,b));if(w>-1)return w;const E=getOriginalPath(m[y-2]);return y>1&&getOriginalPath(b)===E&&_[_.length-1].path!==E?_.findIndex(isSameRouteRecord.bind(null,m[y-2])):w}),l=computed(()=>o.value>-1&&includesParams(n.params,a.value.params)),u=computed(()=>o.value>-1&&o.value===n.matched.length-1&&isSameRouteLocationParams(n.params,a.value.params));function d(m={}){return guardEvent(m)?e[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop):Promise.resolve()}return{route:a,href:computed(()=>a.value.href),isActive:l,isExactActive:u,navigate:d}}const RouterLinkImpl=defineComponent$1({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:e}){const n=reactive(useLink(t)),{options:a}=inject$1(routerKey),o=computed(()=>({[getLinkClass(t.activeClass,a.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(t.exactActiveClass,a.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const l=e.default&&e.default(n);return t.custom?l:h("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},l)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,e){for(const n in e){const a=e[n],o=t[n];if(typeof a=="string"){if(a!==o)return!1}else if(!isArray(o)||o.length!==a.length||a.some((l,u)=>l!==o[u]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,e,n)=>t??e??n,RouterViewImpl=defineComponent$1({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const a=inject$1(routerViewLocationKey),o=computed(()=>t.route||a.value),l=inject$1(viewDepthKey,0),u=computed(()=>{let y=unref(l);const{matched:b}=o.value;let _;for(;(_=b[y])&&!_.components;)y++;return y}),d=computed(()=>o.value.matched[u.value]);provide(viewDepthKey,computed(()=>u.value+1)),provide(matchedRouteKey,d),provide(routerViewLocationKey,o);const m=ref();return watch(()=>[m.value,d.value,t.name],([y,b,_],[w,E,A])=>{b&&(b.instances[_]=y,E&&E!==b&&y&&y===w&&(b.leaveGuards.size||(b.leaveGuards=E.leaveGuards),b.updateGuards.size||(b.updateGuards=E.updateGuards))),y&&b&&(!E||!isSameRouteRecord(b,E)||!w)&&(b.enterCallbacks[_]||[]).forEach(C=>C(y))},{flush:"post"}),()=>{const y=o.value,b=t.name,_=d.value,w=_&&_.components[b];if(!w)return normalizeSlot(n.default,{Component:w,route:y});const E=_.props[b],A=E?E===!0?y.params:typeof E=="function"?E(y):E:null,k=h(w,assign({},A,e,{onVnodeUnmounted:B=>{B.component.isUnmounted&&(_.instances[b]=null)},ref:m}));return normalizeSlot(n.default,{Component:k,route:y})||k}}});function normalizeSlot(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(t){const e=createRouterMatcher(t.routes,t),n=t.parseQuery||parseQuery,a=t.stringifyQuery||stringifyQuery,o=t.history,l=useCallbacks(),u=useCallbacks(),d=useCallbacks(),m=shallowRef(START_LOCATION_NORMALIZED);let y=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const b=applyToParams.bind(null,ee=>""+ee),_=applyToParams.bind(null,encodeParam),w=applyToParams.bind(null,decode);function E(ee,fe){let le,ce;return isRouteName(ee)?(le=e.getRecordMatcher(ee),ce=fe):ce=ee,e.addRoute(ce,le)}function A(ee){const fe=e.getRecordMatcher(ee);fe&&e.removeRoute(fe)}function C(){return e.getRoutes().map(ee=>ee.record)}function k(ee){return!!e.getRecordMatcher(ee)}function B(ee,fe){if(fe=assign({},fe||m.value),typeof ee=="string"){const re=parseURL(n,ee,fe.path),me=e.resolve({path:re.path},fe),te=o.createHref(re.fullPath);return assign(re,me,{params:w(me.params),hash:decode(re.hash),redirectedFrom:void 0,href:te})}let le;if("path"in ee)le=assign({},ee,{path:parseURL(n,ee.path,fe.path).path});else{const re=assign({},ee.params);for(const me in re)re[me]==null&&delete re[me];le=assign({},ee,{params:_(ee.params)}),fe.params=_(fe.params)}const ce=e.resolve(le,fe),pe=ee.hash||"";ce.params=b(w(ce.params));const se=stringifyURL(a,assign({},ee,{hash:encodeHash(pe),path:ce.path})),de=o.createHref(se);return assign({fullPath:se,hash:pe,query:a===stringifyQuery?normalizeQuery(ee.query):ee.query||{}},ce,{redirectedFrom:void 0,href:de})}function D(ee){return typeof ee=="string"?parseURL(n,ee,m.value.path):assign({},ee)}function q(ee,fe){if(y!==ee)return createRouterError(8,{from:fe,to:ee})}function j(ee){return L(ee)}function J(ee){return j(assign(D(ee),{replace:!0}))}function Y(ee){const fe=ee.matched[ee.matched.length-1];if(fe&&fe.redirect){const{redirect:le}=fe;let ce=typeof le=="function"?le(ee):le;return typeof ce=="string"&&(ce=ce.includes("?")||ce.includes("#")?ce=D(ce):{path:ce},ce.params={}),assign({query:ee.query,hash:ee.hash,params:"path"in ce?{}:ee.params},ce)}}function L(ee,fe){const le=y=B(ee),ce=m.value,pe=ee.state,se=ee.force,de=ee.replace===!0,re=Y(le);if(re)return L(assign(D(re),{state:typeof re=="object"?assign({},pe,re.state):pe,force:se,replace:de}),fe||le);const me=le;me.redirectedFrom=fe;let te;return!se&&isSameRouteLocation(a,ce,le)&&(te=createRouterError(16,{to:me,from:ce}),H(ce,ce,!0,!1)),(te?Promise.resolve(te):Q(me,ce)).catch(ve=>isNavigationFailure(ve)?isNavigationFailure(ve,2)?ve:X(ve):O(ve,me,ce)).then(ve=>{if(ve){if(isNavigationFailure(ve,2))return L(assign({replace:de},D(ve.to),{state:typeof ve.to=="object"?assign({},pe,ve.to.state):pe,force:se}),fe||me)}else ve=ae(me,ce,!0,de,pe);return oe(me,ce,ve),ve})}function Z(ee,fe){const le=q(ee,fe);return le?Promise.reject(le):Promise.resolve()}function Q(ee,fe){let le;const[ce,pe,se]=extractChangingRecords(ee,fe);le=extractComponentsGuards(ce.reverse(),"beforeRouteLeave",ee,fe);for(const re of ce)re.leaveGuards.forEach(me=>{le.push(guardToPromiseFn(me,ee,fe))});const de=Z.bind(null,ee,fe);return le.push(de),runGuardQueue(le).then(()=>{le=[];for(const re of l.list())le.push(guardToPromiseFn(re,ee,fe));return le.push(de),runGuardQueue(le)}).then(()=>{le=extractComponentsGuards(pe,"beforeRouteUpdate",ee,fe);for(const re of pe)re.updateGuards.forEach(me=>{le.push(guardToPromiseFn(me,ee,fe))});return le.push(de),runGuardQueue(le)}).then(()=>{le=[];for(const re of ee.matched)if(re.beforeEnter&&!fe.matched.includes(re))if(isArray(re.beforeEnter))for(const me of re.beforeEnter)le.push(guardToPromiseFn(me,ee,fe));else le.push(guardToPromiseFn(re.beforeEnter,ee,fe));return le.push(de),runGuardQueue(le)}).then(()=>(ee.matched.forEach(re=>re.enterCallbacks={}),le=extractComponentsGuards(se,"beforeRouteEnter",ee,fe),le.push(de),runGuardQueue(le))).then(()=>{le=[];for(const re of u.list())le.push(guardToPromiseFn(re,ee,fe));return le.push(de),runGuardQueue(le)}).catch(re=>isNavigationFailure(re,8)?re:Promise.reject(re))}function oe(ee,fe,le){for(const ce of d.list())ce(ee,fe,le)}function ae(ee,fe,le,ce,pe){const se=q(ee,fe);if(se)return se;const de=fe===START_LOCATION_NORMALIZED,re=isBrowser?history.state:{};le&&(ce||de?o.replace(ee.fullPath,assign({scroll:de&&re&&re.scroll},pe)):o.push(ee.fullPath,pe)),m.value=ee,H(ee,fe,le,de),X()}let U;function I(){U||(U=o.listen((ee,fe,le)=>{if(!ue.listening)return;const ce=B(ee),pe=Y(ce);if(pe){L(assign(pe,{replace:!0}),ce).catch(noop);return}y=ce;const se=m.value;isBrowser&&saveScrollPosition(getScrollKey(se.fullPath,le.delta),computeScrollPosition()),Q(ce,se).catch(de=>isNavigationFailure(de,12)?de:isNavigationFailure(de,2)?(L(de.to,ce).then(re=>{isNavigationFailure(re,20)&&!le.delta&&le.type===NavigationType.pop&&o.go(-1,!1)}).catch(noop),Promise.reject()):(le.delta&&o.go(-le.delta,!1),O(de,ce,se))).then(de=>{de=de||ae(ce,se,!1),de&&(le.delta&&!isNavigationFailure(de,8)?o.go(-le.delta,!1):le.type===NavigationType.pop&&isNavigationFailure(de,20)&&o.go(-1,!1)),oe(ce,se,de)}).catch(noop)}))}let x=useCallbacks(),T=useCallbacks(),M;function O(ee,fe,le){X(ee);const ce=T.list();return ce.length?ce.forEach(pe=>pe(ee,fe,le)):console.error(ee),Promise.reject(ee)}function z(){return M&&m.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((ee,fe)=>{x.add([ee,fe])})}function X(ee){return M||(M=!ee,I(),x.list().forEach(([fe,le])=>ee?le(ee):fe()),x.reset()),ee}function H(ee,fe,le,ce){const{scrollBehavior:pe}=t;if(!isBrowser||!pe)return Promise.resolve();const se=!le&&getSavedScrollPosition(getScrollKey(ee.fullPath,0))||(ce||!le)&&history.state&&history.state.scroll||null;return nextTick$3().then(()=>pe(ee,fe,se)).then(de=>de&&scrollToPosition(de)).catch(de=>O(de,ee,fe))}const P=ee=>o.go(ee);let S;const F=new Set,ue={currentRoute:m,listening:!0,addRoute:E,removeRoute:A,hasRoute:k,getRoutes:C,resolve:B,options:t,push:j,replace:J,go:P,back:()=>P(-1),forward:()=>P(1),beforeEach:l.add,beforeResolve:u.add,afterEach:d.add,onError:T.add,isReady:z,install(ee){const fe=this;ee.component("RouterLink",RouterLink),ee.component("RouterView",RouterView),ee.config.globalProperties.$router=fe,Object.defineProperty(ee.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(m)}),isBrowser&&!S&&m.value===START_LOCATION_NORMALIZED&&(S=!0,j(o.location).catch(pe=>{}));const le={};for(const pe in START_LOCATION_NORMALIZED)le[pe]=computed(()=>m.value[pe]);ee.provide(routerKey,fe),ee.provide(routeLocationKey,reactive(le)),ee.provide(routerViewLocationKey,m);const ce=ee.unmount;F.add(ee),ee.unmount=function(){F.delete(ee),F.size<1&&(y=START_LOCATION_NORMALIZED,U&&U(),U=null,m.value=START_LOCATION_NORMALIZED,S=!1,M=!1),ce()}}};return ue}function runGuardQueue(t){return t.reduce((e,n)=>e.then(()=>n()),Promise.resolve())}function extractChangingRecords(t,e){const n=[],a=[],o=[],l=Math.max(e.matched.length,t.matched.length);for(let u=0;u<l;u++){const d=e.matched[u];d&&(t.matched.find(y=>isSameRouteRecord(y,d))?a.push(d):n.push(d));const m=t.matched[u];m&&(e.matched.find(y=>isSameRouteRecord(y,m))||o.push(m))}return[n,a,o]}const routes=[{path:"/",name:"Accueil",component:()=>__vitePreload(()=>import("./PageAccueil-ee04c87f.js"),["PageAccueil-ee04c87f.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/compte",name:"Compte",component:()=>__vitePreload(()=>import("./PageCompte-23c163fc.js"),["PageCompte-23c163fc.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/données",name:"Données",component:()=>__vitePreload(()=>import("./MesDonnées-499d8db3.js"),["MesDonnées-499d8db3.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/données/bd/:id",component:()=>__vitePreload(()=>import("./PageBD-9c254a25.js"),["PageBD-9c254a25.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/données/bd/:id/tableau/:idTableau",component:()=>__vitePreload(()=>import("./PageTableau-cd17d703.js"),["PageTableau-cd17d703.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/recherche",name:"Recherche",component:()=>__vitePreload(()=>import("./PageRecherche-b0d48416.js"),["PageRecherche-b0d48416.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/favoris",name:"Favoris",component:()=>__vitePreload(()=>import("./PageFavoris-ebd8cf7c.js"),["PageFavoris-ebd8cf7c.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/automatisations",name:"Automatisations",component:()=>__vitePreload(()=>import("./PageAutomatisations-c9996025.js"),["PageAutomatisations-c9996025.js","_plugin-vue_export-helper-c27b6911.js"])},{path:"/signalements",name:"Signalements",component:()=>__vitePreload(()=>import("./PageSignalements-758d86ea.js"),["PageSignalements-758d86ea.js","_plugin-vue_export-helper-c27b6911.js"])},{path:encodeURI("/téléchargements"),name:"Téléchargements",component:()=>__vitePreload(()=>import("./PageTéléchargements-2f2657ed.js"),["PageTéléchargements-2f2657ed.js","_plugin-vue_export-helper-c27b6911.js"])}],routeur=createRouter({history:createWebHashHistory(),routes});function registerPlugins(t){loadFonts(),t.use(vuetify),t.use(i18n),t.use(routeur)}function inscrireExtentions(t){registerPlugins(t),t.use(constellationNavigateur)}const app=createApp(_sfc_main);inscrireExtentions(app);app.mount("#app");export{fromString$7 as $,AccessControllers$1 as A,require$$0$2 as B,multiaddr as C,DefaultFactory as D,pTimeout as E,isName as F,isoUrl as G,isWebWorker$1 as H,getDefaultExportFromCjs as I,commonjsGlobal as J,net as K,path as L,pbkdf2$2 as M,utilExports as N,OrbitDB as O,asUint8Array$2 as P,requireMinimal as Q,writer$1 as R,writer_buffer as S,reader$1 as T,reader_buffer as U,encode$p as V,decode$o as W,Token as X,Type as Y,encodeErrPrefix as Z,__vitePreload as _,allocUnsafe$2 as a,asU8A as a0,encodeCustom as a1,decodeErrPrefix as a2,decodeCodePointsArray as a3,nanoid as a4,anySignal_2 as a5,PQueue as a6,http as a7,enumeration as a8,importKey as a9,generateKeyPair as aA,getProtocol as aB,fromNodeAddress as aC,isReactNative$1 as aD,marshalPrivateKey as aE,resolvers as aF,browserExports$2 as aG,mergeOptions$2 as aa,toBuffer as ab,varint as ac,global$1 as ad,debug as ae,Level as af,aspromise as ag,base64$8 as ah,eventemitter as ai,float as aj,inquire_1 as ak,utf8$5 as al,pool_1 as am,commonjsRequire$1 as an,bases$1 as ao,randomBytes$1 as ap,marshalPublicKey as aq,sha256$3 as ar,anySignalExports as as,isMultiaddr as at,env as au,eventsExports as av,requireCryptoBrowserify as aw,browser$1$1 as ax,isIP as ay,forge$m as az,alloc as b,concat$2 as c,errCode as d,equals$4 as e,constantTime as f,chacha20poly1305 as g,encodeMessage as h,decodeMessage as i,fromString$5 as j,unmarshalPublicKey as k,logger as l,message as m,isBrowser$2 as n,isElectronRenderer as o,isElectronMain as p,isNode as q,openBlock as r,sha256$2 as s,toString$8 as t,unmarshalPrivateKey as u,createElementBlock as v,wipe$1 as w,x25519 as x,createBaseVNode as y,require$$1 as z};
//# sourceMappingURL=index-a388e6bc.js.map
