import{d as ee,q as M,a as r,c as p,w as t,x as he,y as _e,z as ye,n as De,p as fe,r as D,s as k,b as e,h as ge,V as xe,e as j,t as C,f as a,A as H,i as x,l as me,S as Ue,L as K,Z as ue,D as Y,bE as ie,O as re,bF as Me,W as h,H as W,m as q,I as Be,க as ve,v as Ae,bG as Xe,ao as $e,bH as qe,bI as Ze,bJ as Je,as as ze,aP as Ke,bK as Ye,M as ce,J as g,am as Ee,P as ea,$ as aa,an as ne,bL as Fe,B as N,u as ta,ம as ia,o as la,bM as na,aH as oa,aG as sa,bN as da,aZ as ua,a_ as ra,a$ as Se,b0 as ca,bw as Ie,bO as ma,bx as fa,bP as Le,C as le,bQ as va,bR as pa,aa as ba,bS as _a,by as Ne,bT as ya,bz as ga,N as we,X as Te,a3 as xa,b1 as Ba,aF as Ca,Q as ka,b2 as Pe,R as Va}from"./index-CdQEPL7L.js";import{u as wa}from"./historiqueDocuments-Di-hELJ1.js";import{_ as Ta,t as ja,E as $a,a as ha,V as Da,b as Ge,c as Qe,d as Aa,e as Ea,f as Sa,g as Ia,h as La,i as Na,j as Pa,k as Oa,l as Oe}from"./VBreadcrumbs-DihX46FC.js";import{_ as Ra}from"./ChoisirStatut.vue_vue_type_script_setup_true_lang-DyP5cbOV.js";import{b as Ua,c as je}from"./SélecteurNuée.vue_vue_type_script_setup_true_lang-BBN87rmU.js";import{_ as Ma}from"./NouvelleImportation.vue_vue_type_script_setup_true_lang-CFJuIMmc.js";import{_ as qa}from"./ÉpinglerBd.vue_vue_type_script_setup_true_lang-D3hCe5xt.js";import{V as za,a as Fa}from"./VTabs-DCPavjLp.js";import{V as Re}from"./VSlideGroupItem-Bt_7ZFEB.js";import"./RésultatRechercheNuée.vue_vue_type_script_setup_true_lang-D97XdR5f.js";import"./RésultatRechercheProjet.vue_vue_type_script_setup_true_lang-B4v4ZAfR.js";import"./CarteProjet.vue_vue_type_script_setup_true_lang-CwmfqBOw.js";import"./NouveauProjet.vue_vue_type_script_setup_true_lang-DSWpRWHe.js";const Ga=ee({__name:"CarteCodeBd",props:{id:{}},setup(L){const u=L,o=M(()=>({ts:`import { créerConstellation } from "@constl/ipa";

const client = créerConstellation();

const monAnalyse = async (données) => {
  console.log(données)
  // Faire quelque chose...
}

const fOublier = client.bds.suivreDonnéesExportation({
  idBd: "${u.id}",
  f: monAnalyse
})
`,py:`from constellationPy import Serveur, ClientSync
    
with Serveur():
    client = ClientSync()

    données = client.bds.suivreDonnéesExportation(
      idBd="${u.id}"
    )
`,julia:`import Constellation

Constellation.avecServeur() do port
  Constellation.avecClient(port) do client

    oublier = Constellation.suivre(
        client, 
        "bds.suivreDonnéesExportation", 
        Dict([("idBd","${u.id}")])
    ) do résultat
        print(résultat)
    end
  end
end
`,r:`library(constellationR)

constellationR::avecClientEtServeur(
  function (client) {
    
    données <- client$appeler(
      "bds.suivreDonnéesExportation", 
      list(idBd="${u.id}")
    )
  }
)
`}));return(v,b)=>(r(),p(Ta,{codes:o.value},{activator:t(({props:B})=>[he(v.$slots,"activator",_e(ye({props:B})))]),_:3},8,["codes"]))}}),Qa=ee({__name:"CarteQualitéBd",props:{idBd:{}},setup(L){const{mdAndUp:u}=De(),{மொழியாக்கம்_பயன்படுத்து:o}=ve(),{$மொ:v}=o(),b=L,B=fe(),d=D(!1),_=k(B.bds.suivreQualitéBd,{idBd:b.idBd}),E=k(B.bds.suivreLicenceBd,{idBd:b.idBd}),z=k(B.bds.suivreLicenceContenuBd,{idBd:b.idBd}),F=k(B.suivrePermission,{idObjet:b.idBd});return(w,T)=>(r(),p(Be,{modelValue:d.value,"onUpdate:modelValue":T[1]||(T[1]=$=>d.value=$),"max-width":a(u)?500:300},{activator:t(({props:$})=>[he(w.$slots,"activator",_e(ye({props:$})))]),default:t(()=>[e(q,null,{default:t(()=>[e(ge,null,{default:t(()=>[e(xe,{class:"d-flex"},{default:t(()=>[j(C(a(v)("bds.qualité.titre"))+" ",1),e(H),e(x,{icon:"mdi-close",size:"small",variant:"flat",onClick:T[0]||(T[0]=$=>d.value=!1)})]),_:1})]),_:1}),e(me,null,{default:t(()=>[e(Ue,null,{default:t(()=>[e(K,null,{prepend:t(()=>[e(ue,null,{default:t(()=>[e(Y,{"model-value":(a(_)?.total||0)*100,width:5,indeterminate:a(_)?.total===void 0,color:a(ie)(a(_)?.total).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>T[2]||(T[2]=[j("Score total")])),_:1}),e(re),e(K,null,{prepend:t(()=>[e(ue,null,{default:t(()=>[e(Y,{"model-value":(a(_)?.accès||0)*100,width:5,indeterminate:a(_)?.accès===void 0,color:a(ie)(a(_)?.accès).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>T[3]||(T[3]=[j("Accessibilité")])),_:1}),e(Me,{licence:a(E),"licence-contenu":a(z),"permission-modifier":!!a(F)},{activator:t(({props:$})=>[e(K,_e(ye($)),{prepend:t(()=>[e(ue,null,{default:t(()=>[a(_)?.licence===void 0?(r(),p(Y,{key:0,width:5,indeterminate:"",color:a(ie)(a(_)?.licence).couleur},null,8,["color"])):h("",!0),e(W,{icon:a(_)?.licence?"mdi-check":"mdi-alert-circle-outline",color:a(ie)(a(_)?.licence).couleur},null,8,["icon","color"])]),_:1})]),title:t(()=>[j(C(a(_)?.licence===void 0?a(v)("bds.qualité.rechercheLicence"):a(_).licence?a(v)("bds.qualité.licenceOuverte"):a(v)("bds.qualité.licenceNonReconnue")),1)]),_:2},1040)]),_:1},8,["licence","licence-contenu","permission-modifier"]),e(K,null,{prepend:t(()=>[e(ue,null,{default:t(()=>[e(Y,{"model-value":(a(_)?.valide||0)*100,width:5,indeterminate:a(_)?.valide===void 0,color:a(ie)(a(_)?.valide).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>T[4]||(T[4]=[j("Validation données")])),_:1}),e(K,null,{prepend:t(()=>[e(ue,null,{default:t(()=>[e(Y,{"model-value":(a(_)?.couverture||0)*100,width:5,indeterminate:a(_)?.couverture===void 0,color:a(ie)(a(_)?.couverture).couleur},null,8,["model-value","indeterminate","color"])]),_:1})]),title:t(()=>T[5]||(T[5]=[j("Couverture tests")])),_:1})]),_:1})]),_:1})]),_:1})]),_:3},8,["modelValue","max-width"]))}}),Ha=ee({__name:"CarteStatutBd",props:{idBd:{}},setup(L){const u=L,{மொழியாக்கம்_பயன்படுத்து:o}=ve(),{$மொ:v}=o(),{mdAndUp:b}=De(),B=fe(),d=D(!1),_=k(B.bds.suivreStatutBd,{idBd:u.idBd}),E=D();Ae(()=>{E.value=_.value});const z=M(()=>_.value?.statut!==E.value?.statut||_.value?.idNouvelle!==E.value?.idNouvelle),F=D(!1),w=async()=>{F.value=!0,E.value&&await B.bds.changerStatutBd({idBd:u.idBd,statut:qe(E.value)}),F.value=!1,d.value=!1};return(T,$)=>(r(),p(Be,{modelValue:d.value,"onUpdate:modelValue":$[2]||($[2]=I=>d.value=I)},{activator:t(({props:I})=>[he(T.$slots,"activator",_e(ye({props:I})))]),default:t(()=>[e(q,{class:"mx-auto","min-width":a(b)?500:300},{default:t(()=>[e(ge,null,{default:t(()=>[e(xe,null,{default:t(()=>[j(C(a(v)("données.statut.carte.titre")),1)]),_:1})]),_:1}),e(me,null,{default:t(()=>[e(Ra,{initial:E.value,onChoisir:$[0]||($[0]=I=>E.value=I)},{sélecteur:t(({choisirNouvelle:I})=>[e(Xe,{multiples:!1,onSelectionnee:X=>I(X[0])},null,8,["onSelectionnee"])]),_:1},8,["initial"])]),_:1}),e($e,null,{default:t(()=>[e(H),e(x,{disabled:!z.value,loading:F.value,variant:"flat",color:"primary",onClick:w},{default:t(()=>[j(C(a(v)("communs.sauvegarder")),1)]),_:1},8,["disabled","loading"]),e(x,{variant:"flat","append-icon":"mdi-close",onClick:$[1]||($[1]=I=>d.value=!1)},{default:t(()=>[j(C(a(v)("communs.fermer")),1)]),_:1})]),_:1})]),_:1},8,["min-width"])]),_:3},8,["modelValue"]))}}),Wa=ee({__name:"ItemQualitéBd",props:{id:{}},setup(L){return(u,o)=>(r(),p(K,null,{prepend:t(()=>[e(Ze,{id:u.id},null,8,["id"])]),default:t(()=>[e(ze,null,{default:t(()=>[e(Je,{id:u.id},null,8,["id"])]),_:1})]),_:1}))}}),Xa=ee({__name:"ItemLicence",props:{licence:{}},setup(L){const u=fe(),{மொழியாக்கம்_பயன்படுத்து:o}=ve(),{$மொ:v}=o(),b=L,B=k(u.licences.suivreLicences),d=M(()=>b.licence&&B.value&&Object.keys(B.value).includes(b.licence));return(_,E)=>(r(),p(K,null,{prepend:t(()=>[e(W,{start:"",color:d.value?"primary":"error"},{default:t(()=>[j(C(d.value?"mdi-scale-balance":"mdi-alert"),1)]),_:1},8,["color"])]),default:t(()=>[e(ze,null,{default:t(()=>[j(C(d.value?a(v)(`licences.info.${_.licence}.abr`):_.licence),1)]),_:1})]),_:1}))}}),Za={class:"my-4 text-h6 text-disabled"},Ja=ee({__name:"TableauBd",props:{idTableau:{},idBd:{}},setup(L){const{மொழியாக்கம்_பயன்படுத்து:u}=ve(),{$மொ:o}=u(),v=fe(),b=L,B=k(v.suivrePermission,{idObjet:b.idTableau}),d=k(v.tableaux.suivreVariables,{idTableau:b.idTableau}),_=k(v.tableaux.suivreColonnesTableau,{idTableau:b.idTableau}),E=k(v.tableaux.suivreColonnesTableau,{idTableau:b.idTableau,catégories:!0}),z=M(()=>(_.value||[]).map(s=>{const n=E.value?.find(l=>l.id===s.id)?.catégorie;return{key:s.id,sortable:n===void 0||(n?.type==="simple"?ja(n.catégorie):!1),info:{index:s.index,catégorie:n,variable:s.variable}}})),F=M(()=>{const s={key:"actions",sortable:!1,info:{}};return[...z.value,s]}),w=async({idVariable:s,idColonne:n,index:l,règles:m})=>{n=await v.tableaux.ajouterColonneTableau({idTableau:b.idTableau,idVariable:s,idColonne:n}),l&&await v.tableaux.changerColIndex({idTableau:b.idTableau,idColonne:n,val:!0});for(const V of m)await v.tableaux.ajouterRègleTableau({idTableau:b.idTableau,idColonne:n,règle:V})},T=async({idColonne:s,index:n,règles:l})=>{await v.tableaux.changerColIndex({idTableau:b.idTableau,idColonne:s,val:n});for(const m of l.nouvelles)await v.tableaux.ajouterRègleTableau({idTableau:b.idTableau,idColonne:s,règle:m});for(const m of l.àEffacer)await v.tableaux.effacerRègleTableau({idTableau:b.idTableau,idRègle:m})},$=async({idColonne:s})=>{await v.tableaux.effacerColonneTableau({idTableau:b.idTableau,idColonne:s})},I=k(v.tableaux.suivreDonnées,{idTableau:b.idTableau}),X=M(()=>{const s=I.value?.toSorted((l,m)=>ae.value&&ae.value.map(V=>l.données[V.key]===void 0?m.données[V.key]===void 0?0:V.order==="asc"?1:-1:m.données[V.key]===void 0?l.données[V.key]===void 0?0:V.order==="asc"?-1:1:l.données[V.key]>m.données[V.key]?V.order==="asc"?1:-1:l.données[V.key]<m.données[V.key]?V.order==="asc"?-1:1:0).find(V=>V!==0)||0),n={id:"-1",données:{}};return Z.value&&s?[n,...s]:s}),ae=D(),O=D([]),Ce=k(v.tableaux.suivreRègles,{idTableau:b.idTableau}),Z=D(!1),pe=D(!1),G=D(),oe=M(()=>{const s=[];for(const[n,l]of Object.entries(G.value||{})){const m=I.value?.find(V=>V.id===n);m&&ke({modifs:l,original:m.données})&&s.push({idÉlément:n,vals:l})}return s}),P=M(()=>oe.value.length+(Object.keys(A.value).length?1:0)),ke=({modifs:s,original:n})=>Object.keys(s).some(l=>n[l]!==s[l]),A=D({});Ae(()=>{Z.value||(A.value={})});const S=M(()=>Object.keys(A.value).length>0),R=({val:s,idCol:n,idÉlément:l})=>{if(l==="-1")s!==void 0?A.value[n]=s:delete A.value[n];else{const m=G.value||{};m[l]||(m[l]={}),m[l][n]=s,G.value=m}},te=async({vals:s})=>Object.fromEntries(await Promise.all(Object.entries(s).map(async([n,l])=>{if(l instanceof File){const m=await v.ajouterÀSFIP({contenu:new Uint8Array(await l.arrayBuffer()),nomFichier:l.name});return[n,m]}else return[n,l]}))),be=async()=>{pe.value=!0;for(const{idÉlément:s,vals:n}of oe.value)await v.tableaux.modifierÉlément({idTableau:b.idTableau,idÉlément:s,vals:await te({vals:n})});S.value&&await se(),G.value=void 0,pe.value=!1},se=async()=>{await v.tableaux.ajouterÉlément({idTableau:b.idTableau,vals:await te({vals:A.value})}),A.value={}},de=D(!1),Q=D(!1),U=D(!1),J=D(!1),c=D(!1);Ke([J,c],()=>{de.value=Q.value});const y=async({idÉlément:s})=>{U.value=!0,await v.tableaux.effacerÉlément({idTableau:b.idTableau,idÉlément:s}),U.value=!1},i=async()=>{U.value=!0,await Promise.all(O.value.map(s=>y({idÉlément:s}))),O.value=[],U.value=!1},f=async()=>{await v.bds.effacerTableauBd({idBd:b.idBd,idTableau:b.idTableau})};return(s,n)=>(r(),p(Aa,{modelValue:O.value,"onUpdate:modelValue":n[13]||(n[13]=l=>O.value=l),headers:F.value,items:X.value,"show-select":!!a(B),"multi-sort":"","onUpdate:sortBy":n[14]||(n[14]=l=>ae.value=l)},Ye({top:t(()=>[e(Da,{flat:"",density:"compact"},{default:t(()=>[e(H),a(B)?(r(),p(x,{key:0,icon:"",disabled:!P.value,onClick:n[0]||(n[0]=()=>be())},{default:t(()=>[P.value?(r(),p(ea,{key:0,color:"success",content:P.value},{default:t(()=>[e(W,{color:"primary",icon:"mdi-content-save-outline"})]),_:1},8,["content"])):(r(),p(W,{key:1,color:"primary",icon:"mdi-content-save-check-outline"}))]),_:1},8,["disabled"])):h("",!0),a(B)?(r(),p(aa,{key:1,modelValue:Z.value,"onUpdate:modelValue":n[1]||(n[1]=l=>Z.value=l),class:"me-4",density:"compact",color:"primary","true-icon":"mdi-pencil-outline","false-icon":"mdi-pencil-off-outline","hide-details":""},null,8,["modelValue"])):h("",!0),a(B)?(r(),p(Ua,{key:2,"id-tableau":s.idTableau,"variables-interdites":a(d),onNouvelle:n[2]||(n[2]=l=>w(l))},{activator:t(({props:l})=>[e(x,g(l,{icon:"mdi-table-column-plus-after"}),null,16)]),_:1},8,["id-tableau","variables-interdites"])):h("",!0),e(Ge,{"id-objet":s.idTableau,"type-objet":"tableau"},{activator:t(({props:l})=>[e(ne,{text:a(o)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:m})=>[e(x,g({...l,...m},{icon:"mdi-sync"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet"]),e(Qe,{"id-objet":s.idTableau,"type-objet":"tableau"},{activator:t(({props:l})=>[e(ne,{text:a(o)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:m})=>[e(x,g({...l,...m},{icon:"mdi-download"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet"]),a(B)?(r(),p(Fe,{key:3,onEffacer:n[3]||(n[3]=()=>f())},{activator:t(({props:l})=>[e(x,g(l,{icon:"mdi-delete",color:"error"}),null,16)]),_:1})):h("",!0)]),_:1})]),"no-data":t(()=>[N("p",Za,C(a(o)("tableaux.aucuneDonnée")),1),e(Ma,{type:"importation","info-objet":{id:s.idTableau,typeObjet:"tableau"},"id-tableau":s.idTableau,"colonnes-tableau":a(_)||[]},{activator:t(({props:l})=>[e(x,g(l,{class:"mb-4","prepend-icon":"mdi-import",variant:"outlined"}),{default:t(()=>[j(C(a(o)("tableaux.importer")),1)]),_:2},1040)]),_:1},8,["info-objet","id-tableau","colonnes-tableau"])]),"item.actions":t(({item:l})=>[l.id==="-1"?(r(),p(x,{key:0,disabled:!S.value,icon:"mdi-content-save-outline",size:"small",variant:"flat",onClick:n[9]||(n[9]=()=>se())},null,8,["disabled"])):de.value&&a(B)?(r(),p(x,{key:1,size:"small",icon:"mdi-delete",variant:"flat",loading:U.value,onClick:()=>y({idÉlément:l.id})},null,8,["loading","onClick"])):a(B)?(r(),p(Be,{key:2,modelValue:J.value,"onUpdate:modelValue":n[12]||(n[12]=m=>J.value=m)},{activator:t(({props:m})=>[e(x,g(m,{variant:"flat",icon:"mdi-delete",size:"small",loading:U.value}),null,16,["loading"])]),default:t(()=>[e(q,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(ge,null,{default:t(()=>[e(xe,null,{default:t(()=>[j(C(a(o)("tableaux.données.titreEffacer")),1)]),_:1})]),_:1}),e(me,null,{default:t(()=>[e(Ee,{modelValue:Q.value,"onUpdate:modelValue":n[10]||(n[10]=m=>Q.value=m),label:a(o)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e($e,null,{default:t(()=>[e(H),e(x,{variant:"text",text:a(o)("communs.oui"),onClick:()=>{y({idÉlément:l.id}),J.value=!1}},null,8,["text","onClick"]),e(x,{variant:"text",color:"primary",text:a(o)("communs.non"),onClick:n[11]||(n[11]=m=>J.value=!1)},null,8,["text"]),e(H)]),_:2},1024)]),_:2},1024)]),_:2},1032,["modelValue"])):h("",!0)]),_:2},[ce(z.value||[],l=>({name:`header.${l.key}`,fn:t(({column:m,isSorted:V,getSortIcon:He,toggleSort:We})=>[e($a,{"id-colonne":l.key,"id-variable":l.info.variable,"id-tableau":s.idTableau,index:!!l.info.index,regles:a(Ce)?.filter(Ve=>Ve.colonne===l.key),"permission-modifier":!!a(B),ordonnable:m.sortable,"est-ordonnee":V(m),"icone-ordonner":He(m),onBasculerOrdonner:()=>We(m),onSauvegarder:Ve=>T({idColonne:l.key,...Ve}),onEffacer:()=>$({idColonne:l.key})},null,8,["id-colonne","id-variable","id-tableau","index","regles","permission-modifier","ordonnable","est-ordonnee","icone-ordonner","onBasculerOrdonner","onSauvegarder","onEffacer"])])})),a(B)?{name:"header.actions",fn:t(()=>[de.value?(r(),p(x,{key:0,icon:"mdi-delete",variant:"flat",size:"small",loading:U.value,readonly:!O.value.length,onClick:n[4]||(n[4]=()=>i())},null,8,["loading","readonly"])):(r(),p(Be,{key:1,modelValue:c.value,"onUpdate:modelValue":n[8]||(n[8]=l=>c.value=l)},{activator:t(({props:l})=>[e(x,g(l,{icon:"",variant:"flat",size:"small",readonly:!O.value.length,loading:U.value}),{default:t(()=>[e(W,{icon:"mdi-delete",color:O.value.length?void 0:"disabled"},null,8,["color"])]),_:2},1040,["readonly","loading"])]),default:t(()=>[e(q,{class:"mx-auto","max-width":"450"},{default:t(()=>[e(ge,null,{default:t(()=>[e(xe,null,{default:t(()=>[j(C(a(o)("tableaux.données.titreEffacerSélectionnées",O.value.length)),1)]),_:1})]),_:1}),e(me,null,{default:t(()=>[e(Ee,{modelValue:Q.value,"onUpdate:modelValue":n[5]||(n[5]=l=>Q.value=l),label:a(o)("tableaux.données.nePlusConfirmerEffacer")},null,8,["modelValue","label"])]),_:1}),e($e,null,{default:t(()=>[e(H),e(x,{variant:"text",text:a(o)("communs.oui"),onClick:n[6]||(n[6]=()=>{i(),c.value=!1})},null,8,["text"]),e(x,{variant:"text",color:"primary",text:a(o)("communs.non"),onClick:n[7]||(n[7]=l=>c.value=!1)},null,8,["text"]),e(H)]),_:1})]),_:1})]),_:1},8,["modelValue"]))]),key:"0"}:void 0,ce(z.value,l=>({name:`item.${l.key}`,fn:t(({item:m})=>[e(ha,{categorie:l.info.catégorie?.catégorie,val:m.données[l.key],editable:!!a(B)&&Z.value,onModifiee:({val:V})=>R({idCol:l.key,idÉlément:m.id,val:V})},null,8,["categorie","val","editable","onModifiee"])])}))]),1032,["modelValue","headers","items","show-select"]))}}),Ka={class:"text-center"},Ya={class:"text-center"},et={key:0,class:"text-disabled"},at={class:"text-center"},tt={class:"mt-6 text-h5"},it={class:"d-flex flex-wrap"},lt={class:"mt-6 text-h5"},nt={key:0,class:"text-disabled"},ot={class:"mt-6 text-h5"},st={key:2,class:"text-center"},dt={class:"text-h5 mt-5"},Ct=ee({__name:"PageBD",props:{id:{}},setup(L){const u=L,o=fe(),{mdAndUp:v}=De(),{isRtl:b}=ta(),{மொழியாக்கம்_பயன்படுத்து:B}=ve(),{$மொ:d}=B(),{அகராதியிலிருந்து_மொழிபெயர்ப்பு:_}=ia(),{obtImageDéco:E}=sa(),z=wa();la(()=>{z.documentOuvert({id:u.id,à:Date.now()})});const F=E("vide"),w=k(o.suivrePermission,{idObjet:u.id}),T=k(o.bds.suivreNomsBd,{idBd:u.id}),$=_(T),I=async c=>{const{àEffacer:y,àAjouter:i}=Pe({anciennes:T.value,nouvelles:c});for(const f of y)await o.bds.effacerNomBd({idBd:u.id,langue:f});await o.bds.sauvegarderNomsBd({idBd:u.id,noms:i})},X=k(o.bds.suivreDescriptionsBd,{idBd:u.id}),ae=_(X),O=async c=>{const{àEffacer:y,àAjouter:i}=Pe({anciennes:X.value,nouvelles:c});for(const f of y)await o.bds.effacerDescriptionBd({idBd:u.id,langue:f});await o.bds.sauvegarderDescriptionsBd({idBd:u.id,descriptions:i})},Ce=na(k(o.bds.suivreImage,{idBd:u.id})),Z=E("logoBD"),pe=async c=>{c?await o.bds.sauvegarderImage({idBd:u.id,image:{contenu:new Uint8Array(c.contenu),nomFichier:c.fichier}}):await o.bds.effacerImage({idBd:u.id})},G=k(o.bds.suivreStatutBd,{idBd:u.id}),oe=k(o.bds.suivreVariablesBd,{idBd:u.id}),P=k(o.bds.suivreMotsClefsBd,{idBd:u.id}),ke=async c=>{const y=c.filter(f=>!P.value?.includes(f)),i=P.value?.filter(f=>!c.includes(f))||[];await o.bds.ajouterMotsClefsBd({idBd:u.id,idsMotsClefs:y}),await Promise.all(i.map(f=>o.bds.effacerMotClefBd({idBd:u.id,idMotClef:f})))},A=k(o.bds.suivreTableauxBd,{idBd:u.id}),S=D();Ae(()=>{!S.value&&A.value?.length&&(S.value=A.value[0].clef),S.value&&!A.value?.map(c=>c.clef).includes(S.value)&&(S.value=void 0)});const R=D(!1),te=async({noms:c,cols:y})=>{R.value=!0;try{const i=await o.bds.ajouterTableauBd({idBd:u.id});await o.tableaux.sauvegarderNomsTableau({idTableau:i,noms:qe(c)}),await Promise.all(y.map(async f=>{await o.tableaux.ajouterColonneTableau({idTableau:i,idColonne:f.info.id,idVariable:f.info.variable}),f.info.index&&await o.tableaux.changerColIndex({idTableau:i,idColonne:f.info.id,val:!0}),await Promise.all(f.règles.map(async s=>await o.tableaux.ajouterRègleTableau({idTableau:i,idColonne:f.info.id,règle:s})))}))}finally{R.value=!1}},be=k(o.réseau.suivreAuteursBd,{idBd:u.id}),se=k(o.bds.suivreLicenceBd,{idBd:u.id}),de=k(o.bds.suivreLicenceContenuBd,{idBd:u.id}),Q=async({licence:c,licenceContenu:y})=>{await o.bds.changerLicenceBd({idBd:u.id,licence:c}),y&&await o.bds.changerLicenceContenuBd({idBd:u.id,licenceContenu:y})},U=M(()=>[{title:d("navigation.données"),href:encodeURI("/données/")},{title:$.value||d("bds.sansNom"),disabled:!0}]),J=async()=>{await o.bds.effacerBd({idBd:u.id})};return(c,y)=>(r(),p(oa,null,{default:t(()=>[N("div",null,[a(v)?(r(),p(Ea,{key:0,items:U.value,class:"pa-0"},{divider:t(()=>[e(W,null,{default:t(()=>[j(C(a(b)?"mdi-chevron-left":"mdi-chevron-right"),1)]),_:1})]),title:t(({item:i})=>[e(Sa,{disabled:i.disabled,onClick:f=>i.href&&c.$router.push(i.href)},{default:t(()=>[e(da,{texte:i.title,"longueur-max":35},null,8,["texte"])]),_:2},1032,["disabled","onClick"])]),_:1},8,["items"])):(r(),p(x,{key:1,icon:"mdi-arrow-left-top",variant:"flat",onClick:y[0]||(y[0]=()=>c.$router.push(encodeURI("/données/")))}))]),e(ra,{"src-image":a(Ce),"img-defaut":a(Z),editable:!!a(w),"taille-avatar":a(v)?275:175,"max-taille-image":a(ua),onImageChangee:y[1]||(y[1]=i=>pe(i))},null,8,["src-image","img-defaut","editable","taille-avatar","max-taille-image"]),N("div",Ka,[e(Se,{"etiquette-nom":a(d)("objet.étiquetteNom"),"indice-nom":a(d)("objet.indiceNom"),"indice-langue":a(d)("objet.indiceLangue"),"texte-aucun-nom":a(d)("objet.texteAucunNom"),"noms-initiaux":a(T),titre:a(d)("objet.titreDialogueNoms"),"sous-titre":a(d)("objet.sousTitreDialogueNoms"),"autorisation-modification":!!a(w),onAjusterNoms:I},{activator:t(({props:i})=>[N("span",g(i,{class:"text-h4"}),[j(C(a($)||a(d)("bds.sansNom"))+" ",1),e(x,{icon:a(w)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"},null,8,["icon"])],16)]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),e(ca,{id:c.id},null,8,["id"]),e(H)]),N("div",Ya,[e(Le,{"n-max":5,items:a(P)},{jeton:t(({id:i})=>[e(Ie,{id:i},{activator:t(({props:f})=>[e(ma,g(f,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Ie,{id:i},{activator:t(({props:f})=>[e(fa,g(f,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(P)&&!a(P).length?(r(),le("span",et,C(a(d)("bds.aucunMotClef")),1)):h("",!0),a(w)&&a(P)?(r(),p(va,{key:1,originaux:a(P),onSauvegarder:y[2]||(y[2]=i=>ke(i))},null,8,["originaux"])):h("",!0)]),N("div",at,[e(qa,{"id-bd":c.id},{activator:t(({props:i})=>[e(ne,{"open-delay":"200",location:"bottom",text:a(d)("épingler.épingler")},{activator:t(({props:f})=>[e(x,g({...i,...f},{icon:"",variant:"flat"}),{default:t(()=>[e(pa,{id:c.id},null,8,["id"])]),_:2},1040)]),_:2},1032,["text"])]),_:1},8,["id-bd"]),e(Qe,{"id-objet":c.id,"type-objet":"bd"},{activator:t(({props:i})=>[e(ne,{text:a(d)("exportations.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:f})=>[e(x,g({...i,...f},{icon:"mdi-download",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id-objet"]),e(Ga,{id:c.id},{activator:t(({props:i})=>[e(ne,{text:a(d)("code.indice"),"open-delay":200,location:"bottom"},{activator:t(({props:f})=>[e(x,g({...i,...f},{icon:"mdi-xml",variant:"flat"}),null,16)]),_:2},1032,["text"])]),_:1},8,["id"]),h("",!0),a(w)?(r(),p(Fe,{key:1,onEffacer:J},{activator:t(({props:i})=>[e(ne,{"open-delay":"200",location:"bottom",text:a(d)("effacer.indice")},{activator:t(({props:f})=>[e(x,g({...i,...f},{variant:"flat",icon:""}),{default:t(()=>[e(W,{color:"error"},{default:t(()=>y[7]||(y[7]=[j("mdi-delete")])),_:1})]),_:2},1040)]),_:2},1032,["text"])]),_:1})):h("",!0)]),e(re),e(me,null,{default:t(()=>[e(Se,{"etiquette-nom":a(d)("objet.étiquetteDescription"),"indice-nom":a(d)("objet.indiceDescription"),"indice-langue":a(d)("objet.indiceLangue"),"texte-aucun-nom":a(d)("objet.texteAucuneDescription"),"noms-initiaux":a(X),titre:a(d)("objet.titreDialogueDescriptions"),"sous-titre":a(d)("objet.sousTitreDialogueDescriptions"),"autorisation-modification":!!a(w),longue:"",onAjusterNoms:O},{activator:t(({props:i})=>[N("span",{class:ba({"text-disabled":!a(ae)})},C(a(ae)||a(d)("communs.baseCarteObjet.sansDescription")),3),e(x,g(i,{icon:a(w)?"mdi-pencil":"mdi-earth",variant:"flat",size:"small"}),null,16,["icon"])]),_:1},8,["etiquette-nom","indice-nom","indice-langue","texte-aucun-nom","noms-initiaux","titre","sous-titre","autorisation-modification"]),N("p",tt,C(a(d)("bds.info")),1),e(re,{class:"mb-2"}),N("div",it,[a(G)&&(a(G).statut!=="active"||a(w))?(r(),p(q,{key:0,flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Ha,{"id-bd":c.id},{activator:t(({props:i})=>[e(Ia,g(i,{"type-objet":"bd",statut:a(G)}),null,16,["statut"])]),_:1},8,["id-bd"])]),_:1})):h("",!0),e(q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Qa,{"id-bd":c.id},{activator:t(({props:i})=>[e(Wa,g(i,{id:c.id}),null,16,["id"])]),_:1},8,["id-bd"])]),_:1}),e(q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(_a,{id:c.id,auteurs:a(be),"permission-moderateur":a(w)==="MODÉRATEUR"},{activator:t(({props:i})=>[e(La,g(i,{auteurs:a(be)}),null,16,["auteurs"])]),_:1},8,["id","auteurs","permission-moderateur"])]),_:1}),e(q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Me,{licence:a(se),"licence-contenu":a(de),"permission-modifier":a(w)==="MODÉRATEUR",onChangerLicence:Q},{activator:t(({props:i})=>[e(Xa,g(i,{licence:a(se),onChangerLicence:Q}),null,16,["licence"])]),_:1},8,["licence","licence-contenu","permission-modifier"])]),_:1}),e(q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Na,{id:c.id},{activator:t(({props:i})=>[e(Pa,g(i,{id:c.id}),null,16,["id"])]),_:1},8,["id"])]),_:1}),e(q,{flat:"",width:"200",class:"mb-3"},{default:t(()=>[e(Ge,{"id-objet":c.id,permission:a(w),"type-objet":"bd"},{activator:t(({props:i})=>[e(Oa,g(i,{"id-objet":c.id}),null,16,["id-objet"])]),_:1},8,["id-objet","permission"])]),_:1})]),N("p",lt,C(a(d)("bds.variables")),1),e(re,{class:"mb-2"}),e(Le,{"n-max":5,items:a(oe)},{jeton:t(({id:i})=>[e(Ne,{id:i},{activator:t(({props:f})=>[e(ya,g(f,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),itemListe:t(({id:i})=>[e(Ne,{id:i},{activator:t(({props:f})=>[e(ga,g(f,{id:i}),null,16,["id"])]),_:2},1032,["id"])]),_:1},8,["items"]),a(oe)?.length?h("",!0):(r(),le("p",nt,C(a(d)("bds.aucuneVariable")),1)),e(Ue,null,{default:t(()=>[N("p",ot,C(a(d)("bds.tableaux")),1),e(re),a(v)?(r(),p(za,{key:0,modelValue:S.value,"onUpdate:modelValue":y[4]||(y[4]=i=>S.value=i),class:"mt-2"},{default:t(()=>[(r(!0),le(we,null,ce(a(A),i=>(r(),p(Fa,{key:i.clef,value:i.clef,color:"primary",size:"small",density:"compact"},{default:t(()=>[e(Oe,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["value"]))),128)),e(je,{onSauvegarder:te},{activator:t(({props:i})=>[a(w)?(r(),p(Te,g({key:0},i,{"append-icon":R.value?void 0:"mdi-plus",disabled:R.value,variant:"text",class:"mx-1 my-auto",size:"x-large",label:"",onClick:y[3]||(y[3]=xa(()=>{},["stop"]))}),{default:t(()=>[j(C(a(d)("tableaux.nouveau"))+" ",1),R.value?(r(),p(Y,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):h("",!0)]),_:2},1040,["append-icon","disabled"])):h("",!0)]),_:1})]),_:1},8,["modelValue"])):(r(),p(Ba,{key:1,modelValue:S.value,"onUpdate:modelValue":y[5]||(y[5]=i=>S.value=i),class:"mt-4","show-arrows":"","center-active":""},{default:t(()=>[(r(!0),le(we,null,ce(a(A),i=>(r(),p(Re,{key:i.clef,value:i.clef},{default:t(({isSelected:f,toggle:s})=>[e(Te,{class:"mx-1",variant:"tonal",label:"",active:!1,color:f?"primary":"",onClick:s},{default:t(()=>[e(Oe,{id:i.id,clef:i.clef},null,8,["id","clef"])]),_:2},1032,["color","onClick"])]),_:2},1032,["value"]))),128)),e(Re,{key:"nouveau",value:"nouveau"},{default:t(()=>[e(je,{onSauvegarder:te},{activator:t(({props:i})=>[a(w)?(r(),p(Te,g({key:0},i,{"append-icon":R.value?void 0:"mdi-plus",variant:"tonal",class:"mx-1",label:"",disabled:R.value}),{default:t(()=>[j(C(a(d)("tableaux.nouveau"))+" ",1),R.value?(r(),p(Y,{key:0,class:"ms-2",size:"15",width:"1",indeterminate:""})):h("",!0)]),_:2},1040,["append-icon","disabled"])):h("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])),a(A)&&!a(A).length?(r(),le("div",st,[N("p",dt,C(a(d)("tableaux.aucun")),1),e(Ca,{src:a(F),class:"my-5",contain:"",height:"175px"},null,8,["src"]),e(je,{onSauvegarder:te},{activator:t(({props:i})=>[a(w)?(r(),p(x,g({key:0},i,{color:"primary",class:"mx-2",variant:"outlined"}),{prepend:t(()=>[e(W,{icon:"mdi-table",start:""})]),default:t(()=>[j(" "+C(a(d)("tableaux.nouveau")),1)]),_:2},1040)):h("",!0)]),_:1})])):h("",!0)]),_:1}),e(ka,{modelValue:S.value,"onUpdate:modelValue":y[6]||(y[6]=i=>S.value=i)},{default:t(()=>[(r(!0),le(we,null,ce(a(A),i=>(r(),p(Va,{key:i.clef,value:i.clef},{default:t(()=>[e(Ja,{"id-tableau":i.id,"id-bd":c.id},null,8,["id-tableau","id-bd"])]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});export{Ct as default};
//# sourceMappingURL=PageBD-C0XrLSmj.js.map
